# StackOverflow 问答 12366000-12366999

# c++ - Visual Studio 调试工具提示 - 隐藏变量

> ID：12366002
> 
> 赞同：2
> 
> 时间：2012-09-11T08:49:07.017
> 
> 标签：c++, visual-studio, debugging, tooltip

我们有一个类在我们的程序中几乎无处不在，看起来像这样

```
class A : public B<type>
{
public:
static const A defaultValue;

}; 
```

这里的问题是调试器中的工具提示始终显示“默认值”，因此您必须扩展它以显示基类中的“类型”值，即。我*感兴趣的值。如果它只是偶尔出现，这不会是一个问题，但我每天这样做十亿次......

无论如何要使用编译指示隐藏像“defaultvalue”这样的静态值或重新排列顺序，以便在工具提示中显示值“type”？

重写课程是最后的选择，它真的让我发疯......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:52:33.810

在工具提示中，没有，但您可以在监视窗口中添加一个名为的变量`defaultValue.type`并直接在那里检查值。

# coq - 将要操作的数据与操作合理的证明脱钩

> ID：12366005
> 
> 赞同：3
> 
> 时间：2012-09-11T08:49:15.167
> 
> 标签：coq

我有一种列表，其头部和尾部必须在某种意义上“兼容”：

```
Inductive tag := A | B. (* Just an example *)

Inductive element : tag -> tag -> Set :=
  | AA : element A A
  | AB : element A B
  | BB : element B B. (* Also just an example *)

Inductive estack : tag -> tag -> Set :=
  | ENil  : forall     t,                              estack t t
  | ECons : forall r s t, element r s -> estack s t -> estack r t. 
```

但是，我不太喜欢这段代码，原因如下：

1.  它不是*模块化*的：ad-hoc 列表数据构造器本质上与头部和尾部兼容的证明 - 标记相结合。
2.  它不利于*代码重用*：我被迫重新定义通常的列表函数（例如列表连接）并重新证明通常的列表定理（例如列表连接的关联性）。

我想到了一种不同的方法，它包括三个步骤：

1.  定义单一类型的标记元素（而不是一系列标记类型的元素）：

    ```
    Inductive taggedElement := Tagged : forall t1 t2, element t1 t2 -> taggedElement. 
    ```

2.  定义标记元素的任意（即有效或无效）列表的类型：

    ```
    Definition taggedElementStack := list taggedElement. 
    ```

3.  *将标记元素的有效*列表定义为元组，其元素是标记元素的任意列表，*并*证明元素与相邻元素兼容。

    ```
    (* I have no idea how to do this in Coq, hence the question!
     * 
     * I am going to use pseudomathematical notation. I am not well versed in either
     * mathematics or theoretical computer science, so please do not beat me with a
     * stick if I say something that is completely bogus!
     * 
     * I want to construct the type
     * 
     *     (tes : taggedElementStack, b : proof that P(tes) holds)
     * 
     * where P(tes) is a predicate that is only true when, for every sublist of tes,
     * including tes itself, the heads and tails are compatible.
     *) 
    ```

我将如何在 Coq 中执行第三步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T03:28:31.113

看看你的`estack`，它有什么作用？概括！ `element`只是一个关系 ( `A -> A -> Set`)，`tag`只是一个`Set`. 你得到了什么？

```
Inductive RTList {I : Set} (X : Rel I) : Rel I :=
  | RTNil  : forall {i : I}, RTList X i i
  | RTCons : forall {i j k : I},    X i j -> RTList X j k -> RTList X i k. 
```

（`Rel`这只是一个定义`Rel I = I -> I -> Set`。）

自反传递闭包！这*是*通用的、可重用的和模块化的。或者你会这么认为。

我在 Coq 的库中找到的唯一实现是 in `Coq.Relations.Relation_Operators`、 named [`clos_refl_trans`](http://coq.inria.fr/stdlib/Coq.Relations.Relation_Operators.html#clos_refl_trans)、不同的结构和锁定`Prop`（全部根据文档，没有尝试过）。

您可能必须重新实现它或在某个地方找到一个库。至少，您只需执行一次（或最多执行 3 次`Set`,`Prop`和`Type`）。

* * *

Your other idea will probably be harder to manage. Look at [`NoDup`](http://coq.inria.fr/stdlib/Coq.Lists.List.html#NoDup) for something that's similar to your description, you might be able to reuse the pattern. If you really want that. [`NoDup`](http://coq.inria.fr/stdlib/Coq.Lists.List.html#NoDup) uses [`In`](http://coq.inria.fr/stdlib/Coq.Lists.List.html#In), which is a function that checks if an element is in a list. The last time I tried using it, I found it considerably harder to solve proofs involving `In`. You can't just `destruct` but have to apply helper lemmas, you have to carefully unfold exactly $n levels, folding back is hard etc. etc. I'd suggest that unless it's truly necessary, you'd better stick with data types for `Prop`s.

# android - android游戏总是只在三星galaxy s2上冻结

> ID：12366007
> 
> 赞同：0
> 
> 时间：2012-09-11T08:49:28.110
> 
> 标签：android, libgdx, galaxy

我们的新游戏在其他手机上似乎很流畅，但在**samsung gaxalxy s2**上它总是死机和崩溃。该应用程序使用 gdx lib。这个问题似乎与*音乐有关*。虽然从代码中关闭了音乐，但游戏过程很流畅，但是在打开它之后，整个系列的崩溃和冻结开始了。

对此有任何解决方案或建议吗？您可以在此处查看游戏[Fish vs Pirates](https://play.google.com/store/apps/details?id=com.frismos.fvp)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:53:37.810

三星 Galaxy S2 有一个已知的音频错误：[http ://code.google.com/p/android/issues/detail?id=17623](http://code.google.com/p/android/issues/detail?id=17623)

假设使用`MediaPlayer`API 而不是`SoundPool`API 应该可以解决该问题。也有报道称这已在 ICS 更新中得到修复。（如果您没有使用`SoundPool`API，那么您可能看不到这个特定问题。）

# timezone - 使用 ical4j 过滤一日事件，开始和结束日期有问题

> ID：12366010
> 
> 赞同：0
> 
> 时间：2012-09-11T08:49:47.727
> 
> 标签：timezone, icalendar, zimbra, ical4j

我使用 Zimbra 日历的导出文件，并希望创建一个每天发生的所有事件的列表。简化的日历看起来像这样。

```
BEGIN:VCALENDAR
X-WR-CALNAME:Test-Parking
VERSION:2.0
BEGIN:VTIMEZONE
TZID:Europe/Berlin
BEGIN:STANDARD
DTSTART:19710101T030000
TZOFFSETTO:+0100
TZOFFSETFROM:+0200
RRULE:FREQ=YEARLY;WKST=MO;INTERVAL=1;BYMONTH=10;BYDAY=-1SU
TZNAME:CET
END:STANDARD
END:VTIMEZONE

BEGIN:VEVENT
RRULE:FREQ=DAILY;COUNT=3;INTERVAL=1
SUMMARY:Day Event 3 Times
DTSTART;VALUE=DATE:20120911
DTEND;VALUE=DATE:20120912
END:VEVENT

BEGIN:VEVENT
SUMMARY:4 hours event
DTSTART;TZID="Europe/Berlin":20120911T090000
DTEND;TZID="Europe/Berlin":20120911T130000
END:VEVENT
END:VCALENDAR 
```

现在我写了几行代码来过滤事件：

```
public class CalendarTester {

    private Calendar calendar;
    private TimeZoneRegistry registry;

    public static void main(String[] args) throws Exception {
        CalendarTester tester = new CalendarTester();
        tester.run();
    }

    private void run() throws IOException, ParserException, URISyntaxException,
            ParseException {
        readCalendar();
        TimeZone tz = registry.getTimeZone("Europe/Berlin");
        SimpleDateFormat formatter = new SimpleDateFormat();
        GregorianCalendar cal = new GregorianCalendar(2012,
                GregorianCalendar.SEPTEMBER, 10);
        cal.set(GregorianCalendar.HOUR_OF_DAY, 0);
        cal.set(GregorianCalendar.MINUTE, 0);
        cal.set(GregorianCalendar.SECOND, 0);
        cal.setTimeZone(tz);

        for (int i = 0; i < 5; i++) {
            Period p = new Period(new DateTime(cal.getTime()), new Dur(1, 0, 0,
                    0));
            p.setTimeZone(tz);
            Rule[] rules = new Rule[1];
            rules[0] = new PeriodRule(p);
            Filter f = new Filter(rules, Filter.MATCH_ALL);

            System.out.println("_____________");
            System.out.println(formatter.format(cal.getTime()));
            for (Object event : f.filter(calendar
                    .getComponents(Component.VEVENT))) {
                printEvent((VEvent) event, formatter);
            }
            cal.add(GregorianCalendar.DAY_OF_YEAR, 1);
        }
    }

    private void printEvent(VEvent event, SimpleDateFormat formatter) {
        System.out.println("Start: "
                + formatter.format(event.getStartDate().getDate()) + " End: "
                + formatter.format(event.getEndDate().getDate()) + " Summary: "
                + event.getSummary().getValue());
    }

    private void readCalendar() throws FileNotFoundException, IOException,
            ParserException {
        FileInputStream fin = new FileInputStream(
                "files/Recuring_Calendar_Entry_From_To.ics");

        CalendarBuilder builder = new CalendarBuilder();
        calendar = builder.build(fin);
        registry = builder.getRegistry();
    }

} 
```

现在我正确地得到了简单的事件，但是由于开始和结束时间错误，一天事件发生了 3 次，发生了 4 次。

```
_____________
10.09.12 01:00
_____________
11.09.12 01:00
Start: 11.09.12 02:00 End: 12.09.12 02:00 Summary: Day Event 3 Times
Start: 11.09.12 10:00 End: 11.09.12 14:00 Summary: 4 hours event
_____________
12.09.12 01:00
Start: 11.09.12 02:00 End: 12.09.12 02:00 Summary: Day Event 3 Times
_____________
13.09.12 01:00
Start: 11.09.12 02:00 End: 12.09.12 02:00 Summary: Day Event 3 Times
_____________
14.09.12 01:00
Start: 11.09.12 02:00 End: 12.09.12 02:00 Summary: Day Event 3 Times 
```

因此，如果有人知道我必须在导入或过滤器中更改什么，我会在同一时区获得所有事件。

任何建议的坦克，Cy

* * *

我做了一些测试来弄清楚发生了什么。开始是对过滤器的测试：

```
test/net/fortuna/ical4j/filter/PeriodRuleTest.java 
```

如果我创建一个新的全天活动，就像它显示的那样，一切都很好。如果我添加一个 recur 规则，那么功能就会被破坏。

```
Recur recur = new Recur("FREQ=DAILY;COUNT=3;INTERVAL=1");
event.getProperties().add(new RRule(recur)); 
```

现在该事件匹配开始日期和接下来的 3 天，如上面的示例所示。如果我在规则中设置 COUNT=1，则事件现在匹配 2 次。也许我不明白重复规则？如果我查看导出此事件的网络日历（Zimbra），一切都像我预期的那样。

[在这里你可以看到我的测试课](https://gist.github.com/3781726)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T03:13:31.350

我注意到了几件事：

首先，您的“Day Event 3 Times”事件没有使用 Europe/Berlin 时区作为其日期，因此该事件实际上处于“浮动时间”。如果您的当地时区是欧洲/柏林，这可能无关紧要。

其次，同一事件跨越 9 月 11 日 - 9 月 12 日。因此，使用重复规则，您最终会得到三个事件实例：

*   9 月 11 日 - 9 月 12 日
*   9 月 12 日 - 9 月 13 日
*   9 月 13 日 - 9 月 14 日

我没有仔细研究代码在做什么，但这可能解释了为什么你会在 9 月 14 日得到匹配。

# biztalk - BizTalk ESB 门户 - 异常处理

> ID：12366012
> 
> 赞同：2
> 
> 时间：2012-09-11T08:49:57.787
> 
> 标签：biztalk, esb, biztalk-2010, esb-toolkit-2.0

我在 BizTalk 方面经验丰富，但对 ESB 工具包不熟悉。我们真的不需要这样的 ESB 解决方案，但我想使用 ESB 门户来显示错误、修改消息并重新提交。

*   据我所知，我已经成功地在我的开发机器上正确安装和配置了 ESB 工具包。

*   我已通过启用失败消息的路由和通过创建消息从编排内部向门户发送错误，因此：`FaultMessage = Microsoft.Practices.ESB.ExceptionHandling.ExceptionMgmt.CreateFaultMessage();`

消息在门户中正确显示，在选择“编辑”时，我可以选择通过 WCF OnRamp、SOAP OnRamp 和 HTTPReceive 重新提交。这就是我的问题开始的地方。我一直在使用 WCF OnRamp 重新提交，然后我收到一条消息：

> 此消息已成功重新提交

然而，在返回到门户的主屏幕时，我现在对 Microsoft.Practices.ESB 应用程序有一个新错误：

```
There was a failure executing the receive pipeline: "Microsoft.Practices.ESB.Itinerary.Pipelines.ItinerarySelectReceiveXml, Microsoft.Practices.ESB.Itinerary.Pipelines, Version=2.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" Source: "ESB Itinerary Selector" Receive Port: "OnRamp.Itinerary" URI: "/ESB.ItineraryServices.WCF/ProcessItinerary.svc" Reason: Error 135008: The itinerary was not found in the repository. 
```

我想我需要在这里配置一些东西，也许是我的消息的解析器，但到目前为止，我还没有找到可以帮助我解决这个问题的指南。是否有一些地方展示了使用 ESB 门户进行完整的端到端异常处理？我已经设法找到了很多关于将消息输入其中但没有配置重新提交的帮助。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T16:44:58.603

巧合的是，我今天也试图完成这项工作......

如果您在 WCF OnRamp 的接收管道组件配置上设置行程解析器连接字符串以使用 ITINERARY-STATIC:\headerRequired=true; （而不是 ITINERARY-STATIC:\headerRequired=false;），那么您将在事件查看器中收到以下消息：

*行程名称为必填项，未提供*

这意味着行程不存在于自定义 SOAP 标头中。

我还使用 Fiddler 跟踪了来自 ESB.Portal 的消息（在关闭 ESB.Portal 和 BizTalk 接收位置的消息安全性之后）。没有行程自定义 SOAP 标头。

在浏览了 ESB.Portal 代码后，我在 MessageResubmitter.cs 中找到了原因：

```
 [Serializable]
   public static class MessageResubmitter
   {
      /// <summary>
      /// Submits an XML message to the WCF OnRamp.  The URL of the WCF OnRamp is defined in the
      /// portal web.config.  Context properties are not resubmitted, they are expected to be
      /// applied by the receiving pipeline.
      /// </summary>
      /// <param name="doc">The XML document to submit.</param>
      /// <returns>True if the submission was successful, false if the submission failed.</returns>
      public static bool ResubmitWCF(XmlDocument doc)
      {
         try
         {
            ProcessRequestClient onRamp = new ProcessRequestClient();
            onRamp.SubmitRequest(**null**, doc.OuterXml);
            return true;
         }
         catch (Exception)
         {
            return false;
         }
      } 
```

SubmitRequest 的第一个参数是 Itinerary，设置为 null。这意味着当您重新提交消息时，ESB.Portal 不会将行程作为自定义 SOAP 标头重新发送到 BizTalk。

目前，我可以想到以下选项来完成这项工作： 1) 创建（或修改现有的）通用 WCF OnRamp 以使用 BRE 来确定要与重新提交的消息关联的行程。但是，这可能会变得复杂，因为您需要创建规则才能处理从行程中的任何步骤重新提交的任何消息。2) 修改 ESB.Portal 的代码，以便能够将 Itinerary + 当前步骤作为自定义 SOAP 标头重新发送。

我可能会选择选项2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-18T08:53:48.763

WCF OnRamp 使用 ItinerarySelectReceiveXml 管道，可以将其配置为指向行程或业务规则，因此可以根据消息类型和内容轻松路由消息。 ![通过管道重新路由错误](../Images/1a1077c7802b8c77784e5f8ed9667afc.png)

我现在的问题是第三方在我之前安装了我们的安装，所以我现在正在考虑创建一个新的 OnRamp 并配置 ESB 门户以在其重新提交列表中选择它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T12:13:20.573

我们最近遇到了类似的问题。当我们将行程导出到本地数据库并进行部署时，ESB 将无法找到行程。

结果发现，我们现场的一位顾问修改了 ESB Toolkit 中的 esb.config 文件，以便在服务器而不是本地计算机上查找行程。

因此，如果您像我一样确定行程已导出到正确的位置并且已部署，请修改 esb.config 连接字符串。

```
<connectionStrings>
    <add name="ItineraryDb" connectionString="Data Source=.;Initial Catalog=EsbItineraryDb;Integrated Security=True" providerName="System.Data.SqlClient" />
</connectionString> 
```

# joomla - 在 joomla 2.5 中创建一个新页面

> ID：12366017
> 
> 赞同：1
> 
> 时间：2012-09-11T08:50:05.807
> 
> 标签：joomla, joomla2.5

我已经用 8 个自定义 html 模块完成了主页。现在我必须创建新页面，例如联系我们、关于服务等。但它与主页不同。我只需要使用两个模块，其他模块对其他页面没有用。

我是 joomla 的新手，想知道如何在 joomla 中创建新页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:43:41.840

在文章管理器中创建一个新页面，并为该页面创建一个菜单项。然后进入模块管理器并为该菜单项启用这两个模块。您现在将拥有新页面，并且将出现这 2 个模块。

根据您使用的模板，它们可能需要处于不同的“位置”，例如，在内容下方、侧面等。在这种情况下，请使用模块管理器中的复制功能来克隆这些模块并放在适当的位置。

注意：如果您希望模块出现在实际内容区域中，您可以使用 loadposition 插件，例如，如果您创建空白文章，然后可以输入`{loadposition mynewmoduleposition}`以将模块放置在页面中。只需记住在模块管理器中选择该页面并将模块设置到该位置即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T20:25:45.167

Joomla 网站中的所有“页面”都是使用您正在使用的模板中的单个 index.php 文件创建的。为了将显示的内容从一页更改为另一页，需要考虑一些事项。

首先，Joomla 使用菜单项来确定页面是什么。创建菜单项时，会为其分配一个 itemID。如果菜单项具有子项（类别菜单中的文章），则子项继承父项 ID。然后，您可以选择在该菜单项上显示模块。在模块参数中，可以选择在所有菜单项、无菜单项、选定菜单项和排除菜单项上显示模块。您将更改这些选择以适合您想要显示的内容。

要考虑的第二件事是模板本身。听起来您已经创建了一个自定义模板，因此您可能需要对其进行更改。index.php 文件应该包含您可能想要使用的所有可能的模块位置。为了隐藏特定页面上未使用的位置，您需要使这些位置可折叠。您可以通过使用以下代码不显示任何未在特定页面上填充的模块位置来做到这一点：

```
<?php if ($this->countModules('top')) : ?><jdoc:include type="modules" name="top" style="xhtml" /><?php endif; ?> 
```

您可能希望对页面上的每个模块位置使用类似的代码。这允许您有一个侧边栏位置，该位置不显示在主页上，但显示在包含该位置模块的其他内部页面上。

理想情况下，如果您正确规划模板，您将拥有许多模块位置，允许您在许多不同位置添加内容，而无需在模板编码后触摸模板。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T15:25:59.747

请注意，joomla 是“菜单相关”网站，其中页面表示菜单项 ID，当您说“页面”时，我相信您有使用 wordpress 的经验...

# eclipse - Birt 报告多输入参数

> ID：12366020
> 
> 赞同：0
> 
> 时间：2012-09-11T08:50:21.650
> 
> 标签：eclipse, birt

我的问题和这个问题一样

[这里](https://stackoverflow.com/questions/6453299/generate-reports-in-birt-using-user-input-when-input-is-null-everything-should)

我在那个问题上尝试了解决方案，但它只有在所有参数都有值时才有效，但是当没有值时，Birt Report 会输出此错误

```
The following items have errors:
Table (id = 4):
+ Can not load the report query: 4\. Errors occurred when generating the report document for the report element with ID 4\. (Element ID:4) 
```

你们能帮帮我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:48:36.880

在该示例中，当参数没有值时，不会根据您在查询文本框中输入的内容修改查询。您还可以执行以下操作： 1- 在 select * from mytable 2 中放入查询 - 然后放入 beforeOpen 脚本，例如：

```
 if( params["myparameterval"] ){
       this.queryText = this.queryText + " where col1 = " + params["myparameterval"].value;
   }else{
       this.queryText = this.queryText + " where col1 = hardcodedvalue"
   } 
```

# windows - 由于以下原因之一，远程桌面无法连接到远程计算机

> ID：12366024
> 
> 赞同：2
> 
> 时间：2012-09-11T08:50:23.367
> 
> 标签：windows, networking, remote-access, remote-desktop, rdp

我可以 ping 一台机器的 IP 地址，但无法建立远程桌面连接。当我尝试这样做时，它说：

> 由于以下原因之一，远程桌面无法连接到远程计算机：
> 
> ```
> 1) Remote access to the server is not enabled
> 2) The remote computer is turned off
> 3) The remote computer is not available on the network 
> ```
> 
> 确保远程计算机已打开并连接到网络，并且启用了远程访问。”

……有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:54:47.950

如果你能ping通它，这意味着它已经打开了。如果可以 ping 通，则表示该计算机已在网络上可用……还有哪一种可能性？只有一个。

检查您的防火墙规则。检查 VNC 服务器（或您尝试使用的任何服务是否正常运行）。没有其他细节，我们的答案再精确不过了。

但是，这个问题很可能会迁移到[http://serverfault.com](http://serverfault.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-09T12:55:07.410

我假设您还没有关闭远程计算机，那么让我们看看错误消息的其他部分，即 1) 和 3)。

正如消息的第 1) 部分所示：您很可能尚未在远程计算机上**启用远程访问**。

如何启用它，[在 SuperUser 论坛上进行了](https://superuser.com/a/1691877/146810)描述。

关于错误消息中提到的另一个原因（**“2）远程计算机在网络上不可用”**）：

上面的链接还描述了如何更改 RDP（远程桌面协议）的默认侦听端口 3389，以防它被防火墙阻止。

如果您需要 VPN 隧道来建立远程连接，请同时检查。大多数公司网络都是这种情况（特别是如果您在家工作）。

最后但同样重要的是，检查您的网络是否正常运行（VDSL 或电缆调制解调器/路由器） - 请记住，您的调制解调器/路由器通常也有防火墙：检查它并确定它是否阻塞。

最后，一个原因可能是您输入的主机名无法被 DNS（域名服务）解析。检查您是否在两台 PC 上正确配置了 DNS - 作为解决方法，您可以使用远程 PC 的 IP 地址进行连接。

# javascript - 使用 JavaScript 只检查一个RequiredFieldValidator

> ID：12366027
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:50:40.603
> 
> 标签：javascript, asp.net

我的页面中有多个 RequiredFieldValidators 我想使用 Javascript 功能检查其中一个的验证 任何人都可以帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:53:51.673

在你的 javascript 代码中尝试这样的事情：

```
for (i = 0; i < Page_Validators.length; i++) {

                if (Page_Validators[i].Errormessage=="your Error message") {
                    //your code...
                }
            } 
```

使用上面的代码，您可以根据错误消息进行区分。

或者你可以试试这个，但我不确定它是否有效：

```
function abc(id){
    for (i = 0; i < Page_Validators.length; i++) {

                    if (Page_Validators[i]==id) {
                        //your code...
                    }
                }
} 
```

在上面的代码中，**'id' 是**您的特定验证器的客户端 ID，我正在尝试检查两个验证器是否相同，或者您可以使用它们的任何独特属性来检查是否相等以到达您的特定验证器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T08:58:18.930

您可以尝试使用`validationgroup`验证器和按钮提交

链接： http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.basevalidator.validationgroup](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.basevalidator.validationgroup(v=vs.80) (v=vs.80 )

# iphone - iPhone - 如何将本地日历事件导入我的 iPhone 应用程序？

> ID：12366028
> 
> 赞同：1
> 
> 时间：2012-09-11T08:50:41.750
> 
> 标签：iphone, calendar

我正在使用 iPhone 日历做一个简单的应用程序，我需要将 iPhone 本地日历事件导入我的 iPhone 应用程序。我怎样才能做到这一点。我有一段代码，但它似乎不起作用。我已将一些事件添加到我的 iPhone 原生日历中。但是当我检索它并没有获取任何东西时。这是一段代码。

```
-(IBAction)importCalEvents:(id)sender
{
    NSArray *caleandarsArray = [[NSArray alloc] init];
    caleandarsArray = [[eventStore calendars] retain]; 
    NSLog(@"Calendars from Array : %@", caleandarsArray);

for (EKCalendar *CalendarEK in caleandarsArray) 
 {
    NSLog(@"Calendar Title : %@", CalendarEK.title);    
 }        
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:36:23.920

您可以像这样获取所有日历事件。

导入这 2 个框架（如果不存在则添加到您的项目中）。

1 EventKit/EventKit.h

2) EventKitUI/EventKitUI.h

单击按钮时调用此函数

```
-(void)EventList{

    EKEventStore *eventStore = [[EKEventStore alloc] init];

    NSDate *startDate = [[NSDate alloc] init];
    NSDate *endDate = [[NSDate alloc] initWithTimeInterval:3600 sinceDate:startDate];

    NSArray *calendars = [eventStore calendars];
    NSPredicate *predicate = [eventStore predicateForEventsWithStartDate:startDate
                                                                 endDate:endDate calendars:calendars];
    NSArray *matchingEvents = [eventStore eventsMatchingPredicate:predicate];
    EKEvent *anEvent;

    NSLog(@"Total Events >> %d",[matchingEvents count]);

    for (int j=0; j < [ matchingEvents count]; j++) {

        anEvent = [matchingEvents objectAtIndex:j];

        NSLog(@"Title >>>%@",anEvent.title);
        NSLog(@"start date is %@ \n End Date is >>> %@",anEvent.startDate,anEvent.endDate);

    }   
} 
```

并根据您的要求设置 startDate 和 EndDate。

所以你可以得到你想要的所有细节。

好运..

# joomla1.5 - joomla 1.5 社区建设者和

> ID：12366032
> 
> 赞同：1
> 
> 时间：2012-09-11T08:50:46.813
> 
> 标签：joomla1.5

joomla 1.5 这是我收到大量垃圾邮件的网站。我从注册和留言簿组件中收到垃圾邮件。这些可以在 Joomla 后端的组件部分下找到。对于注册，我使用的是“社区生成器”。对于留言簿，我使用的是“Phoca 留言簿”。请帮忙....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-14T13:08:36.117

如果您还没有安装，请尝试安装第三方 CAPTCHA 扩展程序，例如非商业的 EasyCalcCheck Plus。Joomla 1.5 版本不再受支持，但仍可从以下位置下载：

[http://joomla-extensions.kubik-rubik.de/downloads/ecc-easycalccheck-plus/joomla-15](http://joomla-extensions.kubik-rubik.de/downloads/ecc-easycalccheck-plus/joomla-15)

最新版本（适用于 Joomla 2.5）支持 Community Builder 和 Phoca Guestbook，Joomla 1.5 版本可能也支持。

# java - 为什么 Java ArrayList 使用按元素强制转换而不是按数组强制转换？

> ID：12366035
> 
> 赞同：21
> 
> 时间：2012-09-11T08:50:52.140
> 
> 标签：java, casting, arraylist

Java `ArrayList<T>`（可能还有许多其他类）内部发生的事情是有一个 internal `Object[] array = new Object[n];`，`T`对象被写入其中。每当从中读取一个元素时，`return (T) array[i];`就会进行一次强制转换。所以，每读一次。

我想知道为什么这样做。对我来说，他们似乎只是在做不必要的演员表。`T[] array = (T[]) new Object[n];`只创建一个然后不进行强制转换不是更合乎逻辑并且稍微快一点`return array[i];`吗？这只是每个数组创建的一次强制转换，通常*远*少于读取次数。

为什么首选他们的方法？我不明白为什么我的想法严格来说不是更好？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-11T09:00:28.537

它比这更复杂：泛型在字节码中被擦除，而`T[]`is的擦除`Object[]`。同样，返回值`get()`变为`Object`。为了保持类型系统的完整性，在实际使用类时插入检查强制转换，即

```
Integer i = list.get(0); 
```

将被抹去

```
Integer i = (Integer) list.get(0); 
```

在这种情况下，ArrayList 中的任何类型检查都是多余的。但这真的是无关紧要的，因为`(T)`和`(T[])`都是*未经检查*的强制转换，并且不会产生运行时开销。

可以编写一个经过检查的 ArrayList 来执行以下操作：

```
T[] array = Array.newInstance(tClass, n); 
```

这将防止*堆污染*，但代价是冗余类型检查（您不能在调用代码中抑制合成转换）。它还需要调用者向 ArrayList 提供元素类型的类对象，这会使其 api 变得混乱，并使其更难在通用代码中使用。

**编辑：为什么禁止创建通用数组？**

一个问题是检查了数组，而未检查泛型。那是：

```
Object[] array = new String[1];
array[0] = 1; // throws ArrayStoreException

ArrayList list = new ArrayList<String>();
list.add(1); // causes heap pollution 
```

因此，数组的组件类型很重要。我认为这就是为什么 Java 语言的设计者要求我们明确使用哪种组件类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:04:42.360

> 每当从中读取一个元素时，`return (T) array[i];`就会进行一次强制转换。所以，每读一次。

Generic 是编译时检查。在运行时使用类型 T extends 代替。在这种情况下是`T`隐式`extends Object`的，所以你在运行时拥有的是有效的。

```
return (Object) array[i]; 
```

或者

```
return array[i]; 
```

> 仅仅创建一个不是更合乎逻辑并且稍微快一点吗？

```
T[] array = (T[]) new Object[n] 
```

并不真地。再次在运行时这变成

```
Object[] array = (Object[]) new Object[n]; 
```

或者

```
Object[] array = new Object[n]; 
```

你真正要钓鱼的是

```
T[] array = new T[n]; 
```

除了这不能编译，主要是因为 T 在运行时是未知的。

你能做的是

```
private final Class<T> tClass; // must be passed in the constructor

T[] array = (T[]) Array.newInstance(tClass, n); 
```

只有这样，数组才会真正成为预期的类型。这可以使读取更快，但以写入为代价。主要的好处是快速检查失败，即您将停止损坏的集合，而不是等到您检测到它已损坏才抛出异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T09:22:07.580

我认为更多的是代码风格问题，而不是性能或类型安全（因为支持数组是私有的）

[java 5`ArrayList`](http://javasourcecode.org/html/open-source/jdk/jdk-5.0/java/util/ArrayList.java.html)是按照您建议的`E[]`数组方式实现的。如果您查看源代码，您会发现它包含 7 个 (E[]) 类型转换。从 java 6[`ArrayList`](http://javasourcecode.org/html/open-source/jdk/jdk-6u23/java/util/ArrayList.java.html)更改为使用`Object[]`仅导致 3 (E) 强制转换的数组。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T08:55:09.917

数组也是对象。在这里`T[] array = (T[]) new Object[n]`，您只转换 (T[]) 对象类型而不是数组中的元素。

# ndis - 是什么导致我的 NDIS 微型端口驱动程序在 XP 操作系统上崩溃

> ID：12366040
> 
> 赞同：1
> 
> 时间：2012-09-11T08:51:20.363
> 
> 标签：ndis, miniport

我基于 Windows DDK 的示例“passthru”编写了一个简单的数据包过滤驱动程序，当我打开过滤功能时，操作系统崩溃，我从 WinDbg 收到以下消息：

> Microsoft (R) Windows 调试器版本 6.12.0002.633 X86 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 加载转储文件 [D:\iCheckTool\dump\MEMORY.DMP] 内核摘要转储文件：只有内核地址空间可用
> 
> 警告：路径元素开头的空格符号搜索路径为：D:\iCheckTool\dump；SRV*E:\DebuggingSymbols*http://msdl.microsoft.com/download/symbols;SRV*C:\MyLocalSymbols*http://192.168.20.25/zfprisymbols/ 可执行搜索路径为：Windows XP Kernel Version 2600 (Service包 3) MP (2 procs) 免费 x86 兼容产品：WinNt，套件：TerminalServer SingleUserTS 构建者：2600.xpsp_sp3_qfe.120504-1617 机器名称：内核基础 = 0x804d8000 PsLoadedModuleList = 0x8055e720 调试会话时间：9 月 11 日星期二 09:41： 2012 年 2 月 828 日（UTC + 8:00）系统正常运行时间：0 天 0:02:30.578 加载内核符号 .................... ...................................................... .............................. 加载用户符号 PEB被调出 (Peb.Ldr = 7ffd800c)。键入“.hh dbgerr001”
> 
> * * *
> 
> *   *
> *   错误检查分析 *
> *   *
>     
>     * * *
>     
>     
> 
> 使用 !analyze -v 获取详细的调试信息。
> 
> 错误检查 C5、{4、2、1、8054c10f}
> 
> 可能是由于：Pool_Corruption (nt!ExDeferredFreePool+109)
> 
> ## 跟进：池腐败
> 
> 1：kd>！分析-v
> 
> * * *
> 
> *   *
> *   错误检查分析 *
> *   *
>     
>     * * *
>     
>     
> 
> DRIVER_CORRUPTED_EXPOOL (c5) 试图以过高的中断请求级别 (IRQL) 访问可分页（或完全无效）地址。这是由损坏系统池的驱动程序引起的。针对任何新的（或可疑的）驱动程序运行驱动程序验证程序，如果没有发现罪魁祸首，则使用 gflags 启用特殊池。参数： Arg1：00000004，内存引用 Arg2：00000002，IRQL Arg3：00000001，值 0 = 读取操作，1 = 写入操作 Arg4：8054c10f，引用内存的地址
> 
> ## 调试细节：
> 
> BUGCHECK_STR：0xC5_2
> 
> 当前_IRQL：2
> 
> FAULTING_IP: nt!ExDeferredFreePool+109 8054c10f 895f04 mov
> dword ptr [edi+4],ebx
> 
> DEFAULT_BUCKET_ID：DRIVER_FAULT
> 
> PROCESS_NAME：explorer.exe
> 
> trap_frame：b42555dc - （.trap 0xfffffffffb425555dc）errcode = 00000002 eax = 89cc1c60 ebx = 89e4ded8 ecx = 000001ff edx = 89cc2a78 esi = 80565d20 edi = 00000000 EIP = 8054C10F ESP = B4255650 EBP = B4255650 EI NZ = 0 NV UP EI NZ AC PE cy cs=0008 ss=0010 ds=0023 es=0023 fs=0030 gs=0000 efl=00010297 nt!ExDeferredFreePool+0x109: 8054c10f 895f04 mov dword ptr [edi+4],ebx ds:0023:00000004=??? ？？？重置默认范围
> 
> LOCK_ADDRESS: 8055c4e0 -- (!locks 8055c4e0)
> 
> 资源@nt!PiEngineLock (0x8055c4e0) 可用争用计数 = 1 1 总锁
> 
> PNP_TRIAGE：锁定地址：0x8055c4e0 线程数：0 线程地址：0x00000000 线程等待：0x0
> 
> LAST_CONTROL_TRANSFER：从 8054c10f 到 80545768
> 
> STACK_TEXT：！！！！！b42555dc 8054c10f badb0d00 89cc2a78 b8338538 NT KiTrap0E + 0x238 b4255690 8054c75f 00000001 8055c100 00020019 NT ExDeferredFreePool + 0x109 b42556d0 8058635e 899522e8 00000000 b42557d8新台币ExFreePoolWithTag + 0x47f b42556fc 805878b8 c0000023 00000007 8058758c NT PiGetDeviceRegistryProperty +量0x108 b425578c bf879f40 8a523030 00000001 00000100 NT IoGetDeviceProperty + 0x25e b42558f8 bf879735 00000000 e1b5e008 00000000 WIN32K DrvEnumDisplayDevices + 0x33b b425591c 8054268c 00000000 00000000 0007ecc4 WIN32K NtUserEnumDisplayDevices + 0x7c b425591c 7c92e514 00000000 00000000 0007ecc4 NT KiFastCallEntry + 0xFC有警告：！！！IP帧中没有任何已知的模块。以下框架可能是错误的。0007f010 00000000 00000000 00000000 00000000 0x7c92e514
> 
> 堆栈命令：kb
> 
> FOLLOWUP_IP: nt!ExDeferredFreePool+109 8054c10f 895f04 mov
> dword ptr [edi+4],ebx
> 
> SYMBOL_STACK_INDEX：1
> 
> SYMBOL_NAME: nt!ExDeferredFreePool+109
> 
> FOLLOWUP_NAME：池腐败
> 
> IMAGE_NAME：Pool_Corruption
> 
> DEBUG_FLR_IMAGE_TIMESTAMP：0
> 
> MODULE_NAME：Pool_Corruption
> 
> FAILURE_BUCKET_ID: 0xC5_2_nt!ExDeferredFreePool+109
> 
> BUCKET_ID: 0xC5_2_nt!ExDeferredFreePool+109
> 
> ## 跟进：池腐败

谁能告诉我是什么导致了这个问题以及如何解决它？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T21:16:02.400

显然，您试图写入无效的内存区域（地址 = 0x4）。除此之外，您发布的调试器分析并没有太大帮助。您可以尝试在调试器中找到您的驱动程序堆栈（在您发布的调试输出中不存在）以获取失败的代码，但不能保证。其他解决此问题的方法包括将调试打印添加到您的代码中并使用 DbgView 捕获它（您可以稍后从内存转储中提取它们）。您还可以连接内核调试器并在错误发生时捕获错误。

# excel - Excel VBA - 删除某些字符串

> ID：12366042
> 
> 赞同：1
> 
> 时间：2012-09-11T08:51:28.747
> 
> 标签：excel, vba

我之前问过如何检查一段文本是否包含字符串，现在我想删除该单元格中的那段字符串。

> 如果 C 列中的值与 W 列不同，我检查 A 列是否包含“MIG”，如果是，我将其添加到单元格中，如果不是，我什么也不做。

因为每次保存时都会运行此宏，如果您要编辑 W 和 C 中的值以使其匹配，那么 A 列仍会显示“MIG”。

> 所以当文档被保存时，宏现在将看到列 C 和 W 是相同的，如果它包含“MIG”，它应该从单元格中删除“MIG”。

## 样本

```
If shtVO.Cells(Row, 3).Value <> shtVO.Cells(Row, 23).Value Then
  If shtVO.Cells(Row, 1).Value Like "*MIG*" Then
  Else
    shtVO.Cells(Row, 1).Value = shtVO.Cells(Row, 1).Value + "MIG"
  End If
Else
  If shtVO.Cells(Row, 3).Value = shtVO.Cells(Row, 23).Value Then
    If shtVO.Cells(Row, 1).Value Like "*MIG*" Then
        .....              
    End If
  End If
End If 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:56:28.613

不确定我是否理解您的逻辑，但要清除单元格值使用

```
shtVO.Cells( ... ).ClearContents 
```

编辑

用于`Replace`

```
shtVO.Cells( ... ).Value = Replace(shtVO.Cells( ... ).Value, "MIG", "") 
```

`MIG`
您的其余评论涉及替换Eg后留下双倍空格的可能性`"Fisrt MIG second"` -->`"Fisrt  second"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:06:44.523

您可以使用 Replace() 函数：

```
If shtVO.Cells(Row, 1).Value Like "*MIG*" Then
   shtVO.Cells(Row, 1)=Replace(shtVO.Cells(Row, 1),"MIG","")
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:04:50.317

```
If shtVO.Cells(Row, 1).Value Like "*MIG*" Then
    shtVO.Cells(Row, 1).Replace What:="MIG", Replacement:="", LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:=False, ReplaceFormat:=False
End If 
```

这也有效:)

# sql - 命名：所有大写字母都需要转换为正确的命名约定

> ID：12366045
> 
> 赞同：1
> 
> 时间：2012-09-11T08:52:04.260
> 
> 标签：sql, sql-server, naming

我们有一个遗留应用程序，它编写得非常糟糕，但具有合理的数据结构（只需要稍作修改）。然而，数据库中的命名约定很糟糕。我们要做的是将名称转换`SYSTEMNAME`为`SystemName`,`EMPLOYEEID`为`EmployeeId`.

目前有解决这个问题的方法吗？我们已经想到了一种方法来执行以下操作：

*   列出数据库中使用的所有现有单词 ( `System`, `Name`, `Employee`, `Id`)
*   使用 SQL 语句进行简单的查找和替换以更正大小写并应用更改

是否有当前可用的系统可以解决此问题并且可能包含字典？不愿意在商业应用上花钱，因为我们认为现有的解决方案是可行的（系统不是很大，大约 30 个表）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:16:55.990

我不知道这样的系统是否存在。你的要求是如此罕见，所以我认为在你的情况下（小系统）游戏是得不偿失的。

当我需要将数据库从 SQL Server 移动到 Oracle 时，我需要重命名实体。我的系统更大：它有 300 多个表和 200 多个其他实体。我做了什么：

1.  创建文件以将旧名称映射到新名称。
2.  准备分析 TSQL 模块定义并将名称从旧更改为新的脚本。（最好使用 TSQL 语言解析库）。

我的脚本是用 Powershell 编写的，并且有一些特定的企业逻辑，所以我不能把它放在这里。

我的建议是：为确保一切顺利，请尝试生成重新创建数据库脚本，然后更改名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:59:48.947

**我们得到了解决方案：**

我们能够按长度升序建立表和列名列表：

```
Type         Value
Column       NAME
Table        EMPLOYEE
Column       SYSTEMNAME
Column       EMPLOYEEID
Column       SYSTEMNAMEEMPLOYEEIDBLABLA 
```

然后该算法分析每个名称并建立一个已知单词列表

```
Input          Output         Word List (ordered by length descending)
NAME           Name           Name
EMPLOYEE       Employee       Name, Employee
SYSTEMNAME     SystemName     Name, System, Employee
EMPLOYEEID     EmployeeId     Id, Name, System, Employee
.. and so forth.. 
```

这使我们达到了大约 95%

由于无法识别的单词，某些字段仍然不正确。（在这种情况下，我们可能会更`BLABLA`喜欢）`Blabla``BlaBla`

因此我们可以在输入文件中添加：

```
Type         Value
Word         BLA
Column       NAME
Table        EMPLOYEE
Column       SYSTEMNAME 
```

然后它将识别`Bla`为一个单词并生成正确的输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:36:47.640

不可能知道在哪里放置大写字母。当然，一些猜测会有所帮助。但为了确保，您需要手动检查值

该脚本将为您提供所有字段和表格的骆驼大小写：

```
select b.table_schema + '.'+a.table_name+'.'+column_name tablecolumn, 
  upper(left(column_name, 1))+ lower(stuff(column_name, 1,1,'')) newcolumn
into #t
from INFORMATION_SCHEMA.COLUMNS a
join 
INFORMATION_SCHEMA.TABLES b
on a.table_name = b.table_name
and b.table_type = 'base table'

insert #t
select table_schema + '.' + table_name tablecolumn, 
  upper(left(table_name, 1))+ lower(stuff(table_name, 1,1,'')) newcolumn
from INFORMATION_SCHEMA.TABLES 
```

在这里，您可以从 #t 中选择 * 并将值操作为您需要的任何值，然后再运行此脚本的最后一部分。

```
-- here is an example how you can replace columns like 
-- SYSTEMNAME to SystemName, and EMPLOYEEID to EmployeeId in the temporary table
update #t set newcolumn = replace(replace(newcolumn, 'name', 'Name'), 'id', 'Id')

--loop cursor
Declare @tablecolumn as nvarchar(500)
Declare @newcolumn as nvarchar(500)
Declare SqlCursor CURSOR FAST_FORWARD FOR
SELECT tablecolumn, newcolumn FROM #t
OPEN SqlCursor
FETCH NEXT FROM SqlCursor
INTO @tablecolumn, @newcolumn
WHILE @@FETCH_STATUS = 0
BEGIN
     -- This is the actual renaming
     EXEC sp_rename @tablecolumn, @newcolumn
     FETCH NEXT FROM SqlCursor
     INTO @tablecolumn, @newcolumn
END
CLOSE SqlCursor
DEALLOCATE SqlCursor
drop table #t 
```

# sencha-touch-2 - 输入 Sencha 2 模板

> ID：12366054
> 
> 赞同：0
> 
> 时间：2012-09-11T08:52:35.767
> 
> 标签：sencha-touch-2

如何将参数传递给 Sencha 2 模板？下面是我的小模板，尝试过不同的事情，比如在模板上定义“字段变量”和使用配置，等等第四，但我肯定做错了什么。假设我想给出参数“标题”和“使用时间”，我该怎么做

```
Ext.define('Sencha.templates.AppDetailsUsageTemplate' ,{
    extend: 'Ext.XTemplate',
    constructor: function (config) {
       var html = [
           '<div id="{id}" class="limitsList {cls}">',
           '   <div class="reportsSummaryLeft"> {title} </div>',
           '   <div class="reportsSummaryRight"> {usageTime}  </div>',
           '   <div style="clear:both"></div>',
           '</div>'];
       this.callParent(html);
    }
}); 
```

在我看来，我想做一些事情（下面的伪代码）：

```
xtype: 'container',
tpl: Ext.create('Sencha.templates.AppDetailsUsageTemplate',{
    title: 'test tittle',
    usageTime: 100384
}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:11:11.513

我想通了，通过数据给参数：例子：

```
{
    id:     'appDetailsMonth',
    xtype:  'component',
    tpl:    Ext.create('Sencha.templates.AppDetailsUsageTemplate')
},{
    id:     'appDetailsLifeDuration',
    xtype:  'component',
    tpl:    Ext.create('Sencha.templates.AppDetailsUsageTemplate')
} 
```

然后在 applyItems

```
applyItems:function(newItems, oldItems) {
    var i    = 0,
        iNum = newItems.length,
        data = this.getData();

    var yesterdayItem = newItems[2];
    yesterdayItem.data = {
        title: 'Yesterday',
        usage: data.dayDuration
    };
    ....
} 
```

# html - HTML5 应用程序是否支持多人视频会议？

> ID：12366055
> 
> 赞同：0
> 
> 时间：2012-09-11T08:52:41.510
> 
> 标签：html, html5-video

是否可以创建一个支持多人视频会议的 html5 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:06:31.067

是的，你可以，它只适用于 chrome 19+ 浏览器和最新的 Firefox，这是实现 WebRTC 的方式

[使用 HTML5 进行视频会议](http://blog.gingertech.net/2012/06/04/video-conferencing-in-html5-webrtc-via-web-sockets/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:43:29.917

似乎有可能。PFB 演示和源代码的链接。

演示：[http](http://hackview.sdslabs.co.in) ://hackview.sdslabs.co.in 来源：http: [//github.com/sdslabs/hackview](http://github.com/sdslabs/hackview)

# android - Android 应用无法在 Android 4+ 上连接

> ID：12366057
> 
> 赞同：-3
> 
> 时间：2012-09-11T08:52:46.177
> 
> 标签：android, http

我们创建了一个程序，允许从 android 设备连接到服务器以发送和返回信息。该应用在模拟器上运行 Android 2.3.3，运行良好。一旦我们将它放到我们的 Android 4.0.4 手机上，该应用程序在尝试连接到服务器时就崩溃了。

我们剥离了应用程序，只是为了留下连接代码来尝试调试并找出它崩溃的原因。同样的故事，在它连接到 V2 模拟器的 V4 手机上它崩溃了。

我们尝试了 V4.1 模拟器，但它崩溃了——但在三星平板电脑 2 版上它可以工作。当通过设备网络浏览器连接到我们的服务器时，所有版本都能够连接，但不能通过应用程序连接。

谢谢你的帮助

```
package com.example.servertester;

import org.json.JSONObject;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class MainActivity extends Activity {

private Context context = this;

    EditText text, password;
    Button button;
    Toast message;
    String proxyAddress, serverAddress;
    int proxyPort;
    private final HTTPCom HTTPC = new HTTPCom();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    text = (EditText) findViewById (R.id.text);
    password = (EditText) findViewById (R.id.password);
    button = (Button) findViewById (R.id.button);
    text.setText("");
    button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
                String response = "";

                JSONObject jobject = new JSONObject();

                String request = jobject.toString();                
                response = HTTPC.HTTPJSONPost(context, "", "" + request, serverAddress, proxyAddress, proxyPort); //--- connection with proxy
                //response = HTTPC.HTTPJSONPost(context, "", "" + request, serverAddress, null, null); //--- connection without proxy

                message = Toast.makeText(MainActivity.this, response, Toast.LENGTH_LONG);
                message.show();

        }

    });
}

} 
```

注意：只是为了在这里显示代码，我没有定义 ip 地址，但是在原始代码中它们是定义的。如果我们通过代理连接或不连接，我们会得到相同的结果。

```
 09-11 08:50:33.083: D/AndroidRuntime(662): Shutting down VM
09-11 08:50:33.083: W/dalvikvm(662): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
09-11 08:50:33.123: E/AndroidRuntime(662): FATAL EXCEPTION: main
09-11 08:50:33.123: E/AndroidRuntime(662): android.os.NetworkOnMainThreadException
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
09-11 08:50:33.123: E/AndroidRuntime(662):  at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
09-11 08:50:33.123: E/AndroidRuntime(662):  at libcore.io.IoBridge.connectErrno(IoBridge.java:144)
09-11 08:50:33.123: E/AndroidRuntime(662):  at libcore.io.IoBridge.connect(IoBridge.java:112)
09-11 08:50:33.123: E/AndroidRuntime(662):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
09-11 08:50:33.123: E/AndroidRuntime(662):  at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
09-11 08:50:33.123: E/AndroidRuntime(662):  at java.net.Socket.connect(Socket.java:842)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:653)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
09-11 08:50:33.123: E/AndroidRuntime(662):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
09-11 08:50:33.123: E/AndroidRuntime(662):  at com.example.servertester.HTTPCom.HTTPPost(HTTPCom.java:68)
09-11 08:50:33.123: E/AndroidRuntime(662):  at com.example.servertester.HTTPCom.HTTPJSONPost(HTTPCom.java:27)
09-11 08:50:33.123: E/AndroidRuntime(662):  at com.example.servertester.MainActivity$1.onClick(MainActivity.java:41)
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.view.View.performClick(View.java:4084)
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.view.View$PerformClick.run(View.java:16966)
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.os.Handler.handleCallback(Handler.java:615)
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.os.Looper.loop(Looper.java:137)
09-11 08:50:33.123: E/AndroidRuntime(662):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-11 08:50:33.123: E/AndroidRuntime(662):  at java.lang.reflect.Method.invokeNative(Native Method)
09-11 08:50:33.123: E/AndroidRuntime(662):  at java.lang.reflect.Method.invoke(Method.java:511)
09-11 08:50:33.123: E/AndroidRuntime(662):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-11 08:50:33.123: E/AndroidRuntime(662):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-11 08:50:33.123: E/AndroidRuntime(662):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:55:22.380

**当您在 Main Ui 线程中进行任何与服务器相关的操作时，会发生**NetworkOnMainThreadException 。****

 **在 AsyncTask 或不同的线程中移动与服务器相关的代码。

**谷歌怎么说**

> 当应用程序尝试在其主线程上执行网络操作时抛出的异常。这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

**如何修复：**这里的问题只是您需要在单独的线程上进行 Web 服务调用（或你有什么）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T08:57:52.160

您需要在另一个线程中执行网络部分。所以为此使用 Android AsyncTask 类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:58:28.380

你得到了[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，这意味着你在主 UI 线程上进行网络连接。这很糟糕，因为任何冗长的操作都必须移动到单独的线程（我建议使用`AsyncTask`），否则您的应用程序可能会变得无响应并且系统会显示“应用程序无响应”对话框（这通常意味着您的应用程序将被用户杀死） - 请参阅[响应性设计](http://developer.android.com/guide/practices/responsiveness.html)。**

# mysql - MySQL MONTH 返回错误的结果

> ID：12366059
> 
> 赞同：0
> 
> 时间：2012-09-11T08:52:50.603
> 
> 标签：mysql

以下查询没有返回正确的结果，因为它返回“九月”月份的结果，但我需要从给定月份“八月”获取结果。

我的查询有问题吗？

```
SELECT * 
FROM table 
WHERE  YEAR(FROM_UNIXTIME(UNIX_date)) = '2012'  AND 
       MONTH(FROM_UNIXTIME(UNIX_date)) = '08' 
order by UNIX_date DESC 
```

编辑：

返回的结果是这样的：

```
 post_id    user_id     UNIX_date
 95319       12         1346475459
 97370        5         1346474849
 83527       25         1346474631
 83526       51         1346473357
 85929       12         1346471009
 26677       29         1346462100
 26839       12         1346432911
 85927       12         1346411636 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:01:43.620

月份不应该有前导`0`。所以尝试`8`代替`08`. 您还可以发布一行返回的内容，以便我们查看 UNIX_date 的样子。

参考：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:02:28.203

[如文档http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)中所写`DAY`，`MONTH`和`YEAR`函数返回整数，因此值为 1-12（或零) 为`MONTH`.

# javascript - 如何使用javascript绘制双曲线

> ID：12366062
> 
> 赞同：1
> 
> 时间：2012-09-11T08:53:04.453
> 
> 标签：javascript, html

有人可以帮助我使用 JavaScript 绘制双曲线吗？因为我现在可以绘制抛物线了。但在双曲线中变得混乱。对于抛物线，我使用：

```
function drawParabola(y)
            {

                 myGraph.context.clearRect(0, 0, myGraph.canvas.width, myGraph.canvas.height);
                 myGraph = new Graph({
                    canvasId: "myCanvas",
                    minX: -10,
                    minY: -10,
                    maxX: 10,
                    maxY: 10,
                    unitsPerTick: 1
                });

                myGraph.drawEquation(function(x){
                    return y*x*x;
                }, "red", 2);
            } 
```

请向我推荐双曲线

# java - WebsphereMQ 7.5 中的 INITIAL_CONTEXT_FACTORY 配置

> ID：12366065
> 
> 赞同：0
> 
> 时间：2012-09-11T08:53:31.587
> 
> 标签：java, websphere, ibm-mq, websphere-7

我尝试`InitialContext`在 WebsphereMQ 7.5.0 中进行配置，我的`JmsAdmin.config`文件如下：

```
INITIAL_CONTEXT_FACTORY: com.ibm.websphere.naming.WsnInitialContextFactory
PROVIDER_URL: corbaloc:iiop:localhost:2810 
```

当我在 Linux 中运行 JmsAdmin 时，出现以下异常：

```
[appuser@integration2 bin]$ ./JMSAdmin -v
Picked up JAVA_TOOL_OPTIONS: -Dorg.omg.CORBA.ORBClass=com.ibm.CORBA.iiop.ORB

Licensed Materials - Property of IBM
5724-H72, 5655-R36, 5724-L26, 5655-L82
(c) Copyright IBM Corp. 2008, 2011 All Rights Reserved.
US Government Users Restricted Rights - Use, duplication or
disclosure restricted by GSA ADP Schedule Contract with
IBM Corp.
Starting WebSphere MQ classes for Java(tm) Message Service Administration

Initializing JNDI Context...
   INITIAL_CONTEXT_FACTORY: com.ibm.websphere.naming.WsnInitialContextFactory
   PROVIDER_URL: corbaloc:iiop:localhost:2810
Done.

Welcome to the WebSphere MQ JMS administration tool command-line interface

InitCtx> DEF qcf(mqconn)
Sep 11, 2012 12:48:18 PM com.ibm.ws.naming.util.WsnInitCtxFactory
**WARNING: jndiUnavailCommErr
Unable to bind object
javax.naming.ServiceUnavailableException: A communication failure occurred while
  attempting to obtain an initial context with the provider URL:
  "corbaloc:iiop:localhost:2810".  Make sure that any bootstrap address
  information in the URL is correct and that the target name server is running.
  A bootstrap address with no port specification defaults to port 2809\.  Possible
  causes other than an incorrect bootstrap address or unavailable name server
  include the network environment and workstation network configuration.
  [Root exception is org.omg.CORBA.TRANSIENT: java.net.ConnectException:
  Connection refused:host=integration2.treetechnologies.net,port=2810
  vmcid: 0x4942f000  minor code: 3586  completed: No]** 
```

[在我的 WebSphere 服务器中，我打开了引导地址，它的默认端口为 2809。]

# html - 图像与单元格底部对齐

> ID：12366067
> 
> 赞同：0
> 
> 时间：2012-09-11T08:53:36.670
> 
> 标签：html, css

我有这个 html

```
<style type="text/css">
#DownloadLeaflet  {
bottom: 0px;
}
</style>

<table style="width:97%" summary="">
<tbody>
<tr>
<td style="width:100px" width="118">
    <img style="border-bottom:0px solid;border-left:0px solid;border-top:0px solid;border-right:0px solid" src="http://www.banqueaudi.com/RetailBanking/PublishingImages/2008/adsl.png" border="0">
</td>
<td style="width:100%" width="776">
    <div style="height:52px">
      <span class="title">ADSL Service</span><br>
      <em class="Slogan">Be Fast Ahead with Our ADSL Service</em>
    </div>
    <p>
         The new high-speed ADSL connection is now available with privileged conditions 
    </p>
    <p>
         Everybody is getting connected, what are you waiting for? Guarantee your peace of mind in a simple 1-step procedure with a reliable internet service from a trusted source.
    </p>
    <p>
         you will gain the communication edge with a high-performance internet connection at an efficient cost.
    </p>

    <img id="DownloadLeaflet" style="border-bottom:0px solid;border-left:0px solid;border-top:0px solid;border-right:0px solid" src="http://www.banqueaudi.com/PublishingImages/Shared/DownloadLeaflet.png" border="0">

</td>

</tr>
</tbody>
</table> 
```

我已经用 css 尝试了所有可能的方法，但似乎我不是 CSS 粉丝

我想将下载按钮对齐到单元格的底部，请参阅this [fiddle](http://jsfiddle.net/JfZZD/1/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:02:20.577

你必须给表相对和图像绝对和底部：0

[http://jsfiddle.net/JfZZD/44/](http://jsfiddle.net/JfZZD/44/)

检查小提琴

# windows-phone-7 - WP7如何捕捉来电信息

> ID：12366069
> 
> 赞同：1
> 
> 时间：2012-09-11T08:53:46.310
> 
> 标签：windows-phone-7

> **可能重复：**
> [Windows Phone 7 - 来电屏幕](https://stackoverflow.com/questions/10608122/windows-phone-7-incoming-call-screen)

Windows Phone 7如何获取来电信息？找了好久，没找到解决办法。有没有人知道如何在 Windows Phone 7 中获取来电信息？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:55:48.583

没有公共 API 可以让您知道是否发生了呼叫，更不用说获取呼叫的详细信息了。

一些运营商提供对帐户相关信息（包括通话记录）的访问，但这是通过远程服务而不是通过手机上的任何 API 访问的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:57:08.067

你不能这样做。这是[可访问 API 的列表](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff402531%28v=vs.92%29.aspx#appplat_overview_runtime)

*   **银光**
*   **XNA 框架**
*   **传感器**
*   **媒体**
*   **数据**- 隔离存储允许应用程序在沙盒隔离虚拟文件夹中创建和维护数据。所有 I/O 操作都仅限于隔离存储，不能直接访问底层操作系统文件系统。这可以防止其他应用程序进行未经授权的访问和数据损坏。结构化数据可以存储在关系数据库中，并且可以使用 LINQ to SQL 进行访问。
*   **地点**

所以，没有短信，没有通话记录等。

# sql-server - SSRS 查询时会锁表吗？

> ID：12366074
> 
> 赞同：1
> 
> 时间：2012-09-11T08:53:54.487
> 
> 标签：sql-server, reporting-services

我的前辈告诉我，默认情况下执行 SQL 查询不会锁定表。

但是我的 SSRS 报告出现了一些问题，似乎在锁定和出错方面遇到了一些问题。

我做了一些谷歌搜索，但没有找到任何东西。

只是寻找确认 SSRS 报告实际上会锁定任何正在查询的表吗？

是否有任何 MSDN 文档专门记录了这种行为？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T10:08:58.010

SSRS 不会自行锁定任何内容。锁定将由嵌入在报告中**的查询驱动。**没有人可以回答这个问题，但您可以查看报告和使用的查询，然后查看它们是否锁定表。

通常查询会锁定表中的*数据*，而不是表。一致、正确的报告绝对需要锁定。不要屈服于添加 NOLOCK 提示的谬论并收工，[你**会**得到不正确的结果](http://blogs.msdn.com/b/sqlcat/archive/2007/02/01/previously-committed-rows-might-be-missed-if-nolock-hint-is-used.aspx)。

如果您看到由报告引起的生产争用，那么有很多解决方案。[使用可用性组](http://rusanu.com/2010/11/11/alwayson-high-availability-and-reads-scale-out/)、[数据库快照](http://msdn.microsoft.com/en-us/library/ms175158.aspx)或[备用日志传送服务器](http://msdn.microsoft.com/en-us/library/ms187103.aspx)将报告卸载到只读服务器。另一种方法是[启用行版本化隔离级别，如 SNAPSHOT](http://www.codinghorror.com/blog/2008/08/deadlocked.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:20:17.287

对于来自 SSRS 的直接选择语句，肯定会锁定表。

您可以使用 NOLOCK 并编写一个特定查询，其中包含要在报告中显示的所需列。

在这里，您的选择查询不能有“*”，那里有列名。

# android - 获取未接来电通知

> ID：12366079
> 
> 赞同：0
> 
> 时间：2012-09-11T08:54:16.610
> 
> 标签：android, notifications, broadcastreceiver, calllog

我正在开发一个应用程序，它将确定电话状态，例如空闲、响铃、摘机。我能够区分用户何时结束通话。如果用户没有自行结束通话，那么显然是未接来电。我想在有未接电话时收到通知。我知道如何获取通话记录，但我只想在有未接来电时收到通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:45:29.023

我通过使用布尔变量使用自己的逻辑解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:33:01.260

您需要记住最后一个状态。如果您从空闲状态变为振铃状态，然后又回到空闲状态，则该呼叫会丢失。

如果您在两者之间有“摘机”事件，则通话已被接听。

# sql - 将 varchar 转换为日期 103 时的 SQL 格式问题

> ID：12366082
> 
> 赞同：1
> 
> 时间：2012-09-11T08:54:18.763
> 
> 标签：sql

我有一个从 excel 中作为 varchar 类型提取的日期字段，我目前使用以下行对其进行转换：

```
convert(date,[Appt Date],103) as [Appt date] 
```

这可行，但结果是以下格式的日期：

年年/月/日

根据其他站点，行尾的 103 格式应将此 varchar 转换为英国格式（ DD/MM/YYYY ）。

谁能告诉我为什么这没有发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:55:37.070

默认情况下，MSSQL 服务器将日期存储在`YYYY/MM/DD`. 您只能更改整个服务器上的语言，而不是单个数据库。

```
set language 'british english' 
```

在插入之前先运行它。

或另一种选择是使用**[`SET DATEFORMAT`](http://msdn.microsoft.com/en-us/library/ms189491.aspx)**（*来自 MSDN*）

```
declare @dates table (orig varchar(50) ,parsed datetime)

SET DATEFORMAT ydm;

insert into @dates
select '2008-09-01','2008-09-01'

SET DATEFORMAT ymd;
insert into @dates
select '2008-09-01','2008-09-01'

select * from @dates 
```

~~应该`VARCHAR`不是`DATE`~~

 ~~```
SELECT convert(VARCHAR(20),[Appt Date],103) as [Appt date] 
```~~

# android - 最佳实践：子类化还是发送意图？

> ID：12366084
> 
> 赞同：1
> 
> 时间：2012-09-11T08:54:34.673
> 
> 标签：android, android-intent

我有两个活动几乎做同样的事情。它们唯一不同的是要解析的 URL。

什么被认为是关于 Android 开发的最佳实践，子类只是设置 URL 或通过意图发送 URL？

```
public SuperActivity extends Activity{
    protected String pageUrl;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        [...lots of stuff...]
        super.onCreate(savedInstanceState);
    }
}

public SubActivityOne extends SuperActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        pageUrl = "http://urlOne.com"
        super.onCreate(savedInstanceState);
    }
}

public SubActivityTwo extends SuperActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        pageUrl = "http://urlTwo.com"
        super.onCreate(savedInstanceState);
    }
} 
```

或者

```
public SuperActivity extends Activity{
    private String pageUrl;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        Bundle extras = getIntent().getExtras(); 
        pageUrl = extras.getString("intent_key_url");
        [...lots of stuff...]
        super.onCreate(savedInstanceState);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:11:18.597

*   如果您有多个活动，它们共享相似的功能（和/或变量/方法）-> 进行**子分类。**
*   如果您只需要从调用活动中传递一个值，请使用`intents`（或可能`Static`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:05:38.227

在您的情况下，我会进行子类化，但与您的做法略有不同。`onCreate`在不是绝对需要的时候放入一些代码是很危险的。（您可能会迷失在您的层次结构中，并且没有以正确的顺序准确调用您想要调用的内容）我会使用覆盖方法而不是变量。去做：

```
public abstract SuperActivity extends Activity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        [...lots of stuff...]
        // instead of using pageUrl, use a method when you need it: pageUrl()
        super.onCreate(savedInstanceState);
    }

    protected abstract String pageUrl();
} 
```

你的子活动看起来像：（这里只显示一个）

```
public SubActivityOne extends SuperActivity{
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    @Override
    protected String pageUrl() {
        return "http://urlOne.com";
    }
} 
```

意图方式也很好，但是如果以后您想在子活动中添加更多差异，它可能会变得复杂。使用子类，它非常灵活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:20:29.707

第三种选择是创建一个回调接口并让您想要实现的任何类。类似“PageUrlProvider”的东西

```
public interface PageUrlProvider
{
    String getPageURL();
} 
```

那么具体的实现是

```
public MyActivity extends Activity implements PageUrlProvider 
{
    private String pageUrl ="http://example.com/";

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        String myURL = getPageURL();
        super.onCreate(savedInstanceState);
    }
    @Override
    public String getPageURL() 
    {
        return pageUrl;
    }

} 
```

您选择哪个选项在很大程度上取决于您要完成的任务。但是这个选项提供了很大的灵活性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T08:56:02.943

为避免重复代码（这主要是好事），制作基本活动类（make it `abstract`）并将您的通用代码放在那里。然后让你的“真实”活动扩展基类。所以选项“A”是方式。

# php - PHP登录未在数据库中注册数据

> ID：12366086
> 
> 赞同：0
> 
> 时间：2012-09-11T08:54:39.210
> 
> 标签：php

```
<?php

    $userid = $_POST["userid"];
    $pword = $_POST["pword"];

    # session

    session_start();

    # check that session is valid and set

    if(!isset($_SESSION['login']))
    {
        header('Location: login.php');
    }

    # check that the required values have been entered
    $testin1 = ($userid);
    $testin2 = ($pword);

    if($testin1 == "") 
    {
        print "<hr><h1> No Username Entered, Please return to the Login page</h1></hr>";
    }
    elseif ($testin2 == "") 
    {
        print "<hr><h1> No Password Entered, Please return to the Login page</h1></hr>";
    }

    # Connect to database

    $connect = mysql_connect ("localhost","root") or die("Error Connecting to SQLServer"); 
    $db = mysql_select_db ("test");

    # query  

      $query = mysql_query ("select username from login where username = '$userid' and pword = '$pword';");

    if($query === FALSE) 
    {
        die(mysql_error());
    }

    $result = mysql_fetch_array($query);
    $record = $result['username'] ;

    if ($record != null) 
    # check if session is operational, if so redirect the user to the correct page    
    {
        $_SESSION['login'] = true;
        header( 'Location: index.php' ) ;
    }
    else if ($record == null) 
    {
        header( 'Location: login.php' );
    }
?> 
```

有谁知道这在哪里不起作用？它似乎是“无错误”，但不断将我重定向回 l​​ogin.php 页面，而不是 index.php 页面。任何帮助都会很棒，因为我是 PHP 的相对新手。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T08:59:00.147

您正在使用`mysql_fetch_array().` 为了通过您需要使用的键访问结果`mysql_fetch_assoc().`

```
$result = mysql_fetch_assoc($query);
  $record = $result['username'] ; 
```

请记住，最好使用 mysql_real_escape_string() 转义任何用户输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:01:18.977

问题似乎出在您的会话中，请检查 $_SESSION['login'] 是否已设置，因为您正在检查 !isset() 然后您将重定向到 login.php 页面。只需通过调试代码来验证会话变量

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:01:43.493

看起来您可能会在输出之前向用户输出数据`header()`。你有`<HR>`s 和输出（我知道只有在出现错误时才会这样），但如果你正在使用它们，你很可能`<HTML>`在代码上方有类似的东西。

如果是这种情况，则没有其他标题将起作用。

（作为答案发布太久无法发表评论 - 可能是问题所在。

试试这个代码：

```
<?php

    session_start();
    $userid = $_POST["userid"];
    $pword = $_POST["pword"];

    // check that the required values have been entered
    $testin1 = ($userid);
    $testin2 = ($pword);

    if($testin1 == "") 
    {
        print "<hr><h1> No Username Entered, Please return to the Login page</h1></hr>";
    }

    if ($testin2 == "") 
    {
        print "<hr><h1> No Password Entered, Please return to the Login page</h1></hr>";
    }

    // Connect to database

    $connect = mysql_connect ("localhost","root") or die("Error Connecting to SQLServer"); 
    $db = mysql_select_db ("test");

    // query  

      $query = mysql_query ("select username from login where username = '$userid' and pword = '$pword';");

    if($query === FALSE) 
    {
        die(mysql_error());
    }

    $result = mysql_fetch_array($query);
    $record = $result['username'] ;

    if ($record != null) 
    // check if session is operational, if so redirect the user to the correct page    
    {
        $_SESSION['login'] = true;
        header( 'Location: index.php' ) ;
    }
    else if ($record == null) 
    {
        header( 'Location: login.php' );
    }
?> 
```

我浏览并移动了一些东西，并稍微修改了逻辑。

# hibernate - grails休眠查询计数

> ID：12366089
> 
> 赞同：0
> 
> 时间：2012-09-11T08:54:44.543
> 
> 标签：hibernate, grails, hql, grails-orm

我不知道这个查询是否可以使用 grails *executeQuery*。我制作了一个域类示例：

```
class Child {
    String firstName
    String lastName
    String nickName
} 
```

这是我的引导带：

```
class BootStrap {

def init = { servletContext ->

    def childOne = new Child(firstName: 'Poliwag', lastName:'Wrath', nickName: 'taurus')
    def childTwo = new Child(firstName: 'Poliwarp', lastName: 'Wrath', nickName:'libra')
    def childThree = new Child(firstName: 'Poliwag', lastName: 'Wrath',nickName:'aries')
    def childFour = new Child(firstName: 'Poliwag', lastName: 'Wrath',nickName:'virgo')

    childOne.save(flush: true, failOnError: true)
    childTwo.save(flush: true, failOnError: true)
    childThree.save(flush: true, failOnError: true)
    childFour.save(flush: true, failOnError: true)        
    }

} 
```

如您所见，我有 2 个示例数据条目，它们具有相同的*firstName*和*lastName*属性，它们仅在*nickName*属性上有所不同。我想在*executeQuery*中得到一个条目列表，其*名字*和*姓氏*属性与另外 2 个条目相同。*是否可以在 grails executeQuery*中使用带有 count(...) 的运算符？我认为这是使用动态查找器的等效代码：

```
def list = []
def c = Child.countByFirstNameAndLastName('Poliwag',Wrath)
if (c == 2) {
    list.add(Child.findByFirstNameAndLastName('Poliwag','Wrath'))
} 
```

*如果可能的话，我认为如果我使用executeQuery*它将节省更多的代码行。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:12:37.173

如果昵称和姓氏是固定值，就像在您的示例中一样，您可以在 executeQuery 中使用常规 WHERE 条件和 SELECT COUNT，这与您使用的 countBy 方法相同。

但如果这些值不固定，您可以使用 GROUP BY 和 HAVING 来完成此操作。但是这样你就不能返回整个对象，只能返回你分组的属性：

```
def c = Child.executeQuery("select new map(c.firstname as firstname, c.lastname as lastname) from Child c group by c.firstname, c.lastname having count(c.firstname) = 2") 
```

您可以像这样遍历结果映射：

```
c.each{
    println it.firstname + " " + it.lastname
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T13:38:09.830

你可以通过做这样的事情来实现它。

```
def x = Child.executeQuery("select c1 from Child c1,Child c2 where c1.firstName=c2.firstName and c1.nickName<>c2.nickName")

println x.size() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-02T16:04:10.977

```
def x = Child.executeQuery("select count (*) from Child c1,Child c2 where c1.firstName=c2.firstName and c1.nickName<>c2.nickName")

println x[0] 
```

# android - 是否可以在 android 设备中以编程方式锁定 SIM 卡

> ID：12366094
> 
> 赞同：0
> 
> 时间：2012-09-11T08:54:55.740
> 
> 标签：android

在我的应用程序中，我想要在满足某些条件后锁定当前 SIM 卡的功能。

那么是否可以通过编程方式锁定 SIM 卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:00:14.870

不，由于 Android 安全政策，您不能这样做

# android - 如何在android后台创建服务类以播放媒体播放器？

> ID：12366099
> 
> 赞同：-1
> 
> 时间：2012-09-11T08:55:13.820
> 
> 标签：android

我想在后台播放媒体播放器。还想在 android 的主要活动中播放、停止、暂停、下一个进程吗？有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T08:59:24.967

```
public class MusicService extends Service {

    private static final String TAG = "MyService";
    public static MediaPlayer mediaplayer;
    String musicfile;

    @Override
    public IBinder onBind(Intent intent) {
        Log.i(" ibinder ", "");
        return null;
    }

    @Override
    public void onCreate() {
        // Toast.makeText(this, "My Service Created", 0).show();
        Log.i(TAG, "onCreate");

        mediaplayer = new MediaPlayer();
        mediaplayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
    }

    @Override
    public void onDestroy() {
        Toast.makeText(this, "My Service Stopped", 0).show();
        Log.w(TAG, "onDestroy");
        mediaplayer.stop();
    }

    @Override
    public void onStart(Intent intent, int startid) {
         Toast.makeText(this,
         "My Service Started :" + intent + " start id :" + startid, 0)
         .show();

         mediaplayer.start();

    }

} 
```

# c++ - QtCreator 多定义构建错误

> ID：12366103
> 
> 赞同：11
> 
> 时间：2012-09-11T08:55:27.633
> 
> 标签：c++, linker, qt-creator, multiple-definition-error

这是我的 .pro 文件：

```
QT       += core gui widgets

TARGET = link_mult_def

TEMPLATE = app

SOURCES +=  main.cpp \
            path2/file.cpp \
            path1/file.cpp

HEADERS += 
```

出于某种原因，QtCreator 在从 .cpp 文件构建 .o 文件时不尊重源文件夹结构。这两个文件都将编译为“shadow_build_directory/file.o”。我希望构建过程在影子构建目录中创建 path1 和 path2 目录并将“path1/file.cpp”编译为“shadow_build_directory/path1/file.o”和“path2/file.cpp”编译为“shadow_build_directory/path2/文件.o”。

由于来自两个来源的编译符号在 file.o 中加起来，这还不是什么大问题。当 QtCreator 尝试链接时，它成为一个大问题：

```
g++ -Wl,-O1 -o link_mult_def main.o file.o file.o -L/usr/lib/x86_64-linux-gnu -lQtCore -lpthread 
```

QtCreator 链接 file.o 两次，这使链接器失败并出现多个定义错误。

如何确保 QtCreator 编译为反映源目录结构的目标文件？

谢谢

编辑：

路径 1/文件.cpp

```
#include <iostream>
void function1()
{
    std::cout << "function1" << std::endl;
} 
```

路径2/文件.cpp

```
#include <iostream>
void function2()
{
    std::cout << "function2" << std::endl;
} 
```

QtCreator的构建过程：

```
g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../link_mult_def -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I../link_mult_def -I. -o main.o ../link_mult_def/main.cpp

g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../link_mult_def -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I../link_mult_def -I. -o file.o ../link_mult_def/path1/file.cpp

g++ -c -pipe -O2 -Wall -W -D_REENTRANT -DQT_WEBKIT -DQT_NO_DEBUG -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED -I/usr/share/qt4/mkspecs/linux-g++ -I../link_mult_def -I/usr/include/qt4/QtCore -I/usr/include/qt4/QtGui -I/usr/include/qt4 -I. -I../link_mult_def -I. -o file.o ../link_mult_def/path2/file.cpp

g++ -Wl,-O1 -o link_mult_def main.o file.o file.o    -L/usr/lib/x86_64-linux-gnu -lQtGui -lQtCore -lpthread 

file.o: In function `function2()':
file.cpp:(.text+0x0): multiple definition of `function2()'
make: Leaving directory `/home/schmid/code/misc/trash/link_mult_def-build-desktop-Qt_4_8_1_in_PATH__System__Release'
file.o:file.cpp:(.text+0x0): first defined here
collect2: error: ld returned 1 exit status
make: *** [link_mult_def] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-15T16:44:08.870

If you're comfortable having your object files alongside your source files, then you can use either

```
CONFIG += object_parallel_to_source 
```

or

```
CONFIG += object_with_source 
```

depending on which version of QMake you're using.

Answer cribbed from [SO answer here](https://stackoverflow.com/questions/9450225/why-does-qmake-put-all-object-o-files-to-one-directory).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:30:33.730

过去我在使用 Visual Studio 时遇到了完全相同的问题。它的作用是将所有目标文件编译并放置在一个目录中，就像您的情况一样。我们通过在项目中没有重复的文件名来解决这个问题。

如果您说的是真的 - QtCreator 将所有对象文件放在一个目录中，那么您所能做的就是为每个项目使用唯一名称命名您的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:59:55.970

也许您可以将整个项目分成两个（不涉及现有的源文件配置，只管理 .pro 文件）并设置它们之间的依赖关系。然后，您可以为每个项目设置自己的输出构建文件目录（例如，请参见[此处](https://stackoverflow.com/questions/2580934/how-to-specify-different-debug-release-output-directories-in-qmake-pro-file "这里")）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T09:41:16.723

解决方案是重命名您的文件。项目的目录和目录结构与编译器*无关。*编译器甚至不关心文件在哪里，它只需要*获取*文件，无论文件是在`/src`文件夹中还是在月球上。

现在很明显，在`.o`创建文件后，您会收到错误，这仅仅是因为您有两个同名文件。

即使您没有遇到此问题，使用相同名称制作多个文件也是不好的，尤其是在名称无意义的情况下，例如`file.cpp`.

# javascript - 谷歌地图 v3 关闭信息窗口（外部功能）和标记点击功能

> ID：12366104
> 
> 赞同：1
> 
> 时间：2012-09-11T08:55:28.200
> 
> 标签：javascript, google-maps-api-3, google-maps-markers, infowindow

标题说明

我有一个带有几个标记的谷歌地图，每个标记都有一个信息窗口。

行动：

用户单击标记并触发侦听器 - OK 用户单击 onclick 函数 [myclick(i)] 显示信息窗口（特定标记）

错误：

myclick(i) 第一次工作，之后就不行了！

代码：

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="js/jquery.scrollTo.js"></script>

<script type="text/javascript">

var markers = [];

var locations = [    
['PLace 1', -8.2306155581, 37.0871796116, 'A', 'info 1'],
['Place 2', -8.5448366404, 37.1314707841, 'B', 'info 2']];

function showmap() {
  $('#results_map').toggle();

  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 10,
    center: new google.maps.LatLng(37.083, -8.25),
    mapTypeId: google.maps.MapTypeId.SATELLITE
  });

  var i;

  google.maps.event.trigger(map, 'resize');

  for (i = 0; i < locations.length; i++) {  
    markers[i] = new google.maps.Marker({
      position: new google.maps.LatLng(locations[i][2], locations[i][1]),
      map: map,
      icon: 'http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld='+locations[i][3]+'|FF0000|FFFFFF',
      title: locations[i][0]
    });

    markers[i].info = new google.maps.InfoWindow({
      content: locations[i][4]
    }); 

    markers[i].setMap(map);

  }

google.maps.event.addListener(markers[0], 'click', function(){
        $(document.body).scrollTo('#placeA', 800, 'swing');
        markers[0].info.close();
      });       
google.maps.event.addListener(markers[1], 'click', function(){
    $(document.body).scrollTo('#placeB', 800, 'swing');
    markers[1].info.close();
  });       

}

function myclick(i) { 
  $(document.body).scrollTo('#results', 800, 'swing');

  markers[i].info.open(map, markers[i]);  

}

</script>

<div id="results_map"><div id="map"></div></div>

<a href="javascript:;" onclick="myclick(0)">Map 1</a>
<a href="javascript:;" onclick="myclick(1)">Map 2</a> 
```

我的错误在哪里？

谢谢您的帮助

霍特

# java - 使用 apache 速度查看

> ID：12366109
> 
> 赞同：1
> 
> 时间：2012-09-11T08:55:58.947
> 
> 标签：java, web-applications, spring-mvc, velocity

我从 RoseIndia [http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-hello-world.html](http://www.roseindia.net/tutorial/spring/spring3/web/spring-3-mvc-hello-world.html)下载了一个示例应用程序，它工作正常，但我想使用 apache velocity 而不是jsp。我应该在当前项目中进行哪些更改。

注意：我已将后缀值更改为“.vm”而不是 JSP。并查看解析器

“org.springframework.web.servlet.view.velocity.VelocityViewResolver”

我无法得到想要的结果，我收到了找不到资源的消息。

这里是 web.xml 文件内容

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.4" xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-app_2_5.xsd">

<display-name>RoseIndia</display-name>

<servlet>
<servlet-name>dispatcher</servlet-name>
<servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>dispatcher</servlet-name>
<url-pattern>/forms/*</url-pattern>
</servlet-mapping>
<welcome-file-list>
<welcome-file>index.jsp</welcome-file>
</welcome-file-list>
</web-app> 
```

和 servlet 文件内容是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="net.roseindia.controllers"/>

<bean id="viewResolver"
class="org.springframework.web.servlet.view.InternalResourceViewResolver">

<property name="prefix">
<value>/WEB-INF/views/</value>
</property>
<property name="suffix">
<value>.jsp</value>
</property>
</bean>

</beans> 
```

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T07:06:59.043

声明 2 个额外的 bean

```
<bean id="velocityConfig" class="org.springframework.web.servlet.view.velocity.VelocityConfigurer">
    <property name="resourceLoaderPath">/WEB-INF/views/</property>
</bean>    
<bean id="viewResolver" class="org.springframework.web.servlet.view.velocity.VelocityViewResolver"/> 
```

, 并删除

```
<bean id="viewResolver"
            class="org.springframework.web.servlet.view.InternalResourceViewResolver">
       <property name="prefix">/WEB-INF/views/</property>
       <property name="suffix">.jsp</property>
</bean> 
```

# maven - 快照依赖的持续集成策略（使用 Jenkins）

> ID：12366113
> 
> 赞同：1
> 
> 时间：2012-09-11T08:56:02.953
> 
> 标签：maven, continuous-integration, jenkins

第一次搭建 Jenkins CI 系统时，我想知道如何处理快照依赖和本地 Maven 存储库。

我们有一个带有依赖项 Y 的工件 X。Jenkins 被配置为在每次 Y 提交时构建 X。

**策略 A（工作空间 Maven 存储库）：**
本地 Maven 存储库配置为“工作空间本地”。这意味着每个构建的作业都有自己的存储库。Y 的提交确实会触发构建（“mvn clean install”），但由于构建 X 和 Y 的存储库是隔离的，X 使用最后*部署*的 Y 版本，而不是最后一次提交。
使用此策略似乎有助于检测是否还部署了所有依赖项，但它不会检测集成问题（损坏的 Y 提交中断 X）。

**策略 B（通用 Maven 存储库）：**
Jenkins 使用通用的本地 Maven 存储库。提交（损坏的）Y 快照会触发使用当前 Y 快照的 X 的构建，并且会检测到集成问题。缺点是，这不会检测是否所有构建依赖项都部署到中央快照存储库（因为 CI 系统确实将它们全部安装在本地存储库中）。

有没有一种结合了 A 和 B 优点的策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T06:59:40.597

我们最终为此使用了*策略 C*：

**策略 C（让 Jenkins 部署）：**
每个作业都有其本地存储库，就像在策略 A 中一样。但不是默认的“干净安装”目标，Jenkins 被配置为在每个作业上执行“-U 干净部署”。因此，如果 Y 被破坏并提交，Jenkins 将构建它并将其部署到中央快照存储库。Jenkins 检测到依赖项 Y 的构建，并使用*最新的 Y 快照*构建X。
对这个策略有用的是 - 至少在 Maven 3 中 - 在中央快照存储库上运行自动清理作业，因为会有很多时间戳快照。

# java - 等效于 java 中的 Application.ConvertFormula （转换 b/w excel A1 和 R1C1 参考样式）

> ID：12366114
> 
> 赞同：0
> 
> 时间：2012-09-11T08:56:03.720
> 
> 标签：java, excel

伙计们。

由于我不太了解的原因，我的同事**需要在 excel 中使用的 A1 和 R1C1 参考样式之间进行转换。**在搜索没有产生令人满意的结果后，他将自己实施这种转换，但他仍然喜欢考虑他的方法的效率。最终他会实现他需要的任何东西，但也许你们中的一些人是 excel 编程领域的专家，并且可能知道已经有进行这种转换的方法的库（最好是 java 中的）。

POI 不是一个选项，因为他们尚未实现此功能 AFAIK（相信我同事的经验）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T20:44:13.393

实现了自定义实现。我想结束这个问题。

# foursquare - 免费的场馆数据库是最新的和准确的，并且允许查询广泛的区域？

> ID：12366120
> 
> 赞同：0
> 
> 时间：2012-09-11T08:56:20.737
> 
> 标签：foursquare, gis, google-places

是否有免费的场地（如电影院、餐馆、咖啡馆、学校等）数据库，其中包含场地的属性，如地理坐标、名称、联系信息、地址、类型或类别等。

我知道有诸如[Foursquare Venues Platform 之](https://developer.foursquare.com/overview/venues)类的替代方案。但是 Foursquare 场地平台对每个请求的结果数量和边界框的平方有限制。

我需要收集一大片场地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:55:16.147

您应该查看[GeoNames](http://www.geonames.org/) (www.geonames.org)

它并不完全符合您的要求，但他们确实有一个可下载（免费或付费）的位置数据库。
您可以导入它，然后根据需要获取尽可能多的数据。

它包含很多数据，但我们发现清理它还有很多工作要做（我们使用的是免费版本）

也许付费的噪音会更少。

**请注意**，它不会像 Foursquare 或 Google 所提供的那样完整，但如果您需要查询具有许多结果的大区域，它可能会满足您的需求。

他们还有一个 API（Web 服务）。

# google-app-engine - 我是所有者，但收到消息说我不拥有应用程序 ID

> ID：12366122
> 
> 赞同：1
> 
> 时间：2012-09-11T08:56:23.227
> 
> 标签：google-app-engine

我试图在管理控制台中复制我的应用程序，但收到以下错误：

> **出现错误：**开发者不拥有被分叉的应用 ID

我的 gmail 帐户在“权限”选项卡中显示为“所有者”。

有没有人有过同样的经历？关于如何解决这个问题的任何想法或建议？

我已经尝试过在 chrome 中使用 inkognito 模式，如下所述：[http ://code.google.com/p/googleappengine/issues/detail?id=8106](http://code.google.com/p/googleappengine/issues/detail?id=8106)

*编辑：我在 2 周前更改为两因素身份验证。我只是用停用的 2factorauth 尝试过，它什么也没做。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:07:26.533

您是否拥有它试图将副本绑定到的名称？

我猜，在您尝试复制之前尝试创建一个具有相同名称的应用程序来检查这一点。

# wordpress - 在 wordpress mu 网络上更改主题文件夹的名称？

> ID：12366128
> 
> 赞同：0
> 
> 时间：2012-09-11T08:56:41.190
> 
> 标签：wordpress

我正在托管一个 wordpress 网络。它有一堆名为“Nacka blue”“Nacka green”等的主题。

主题所在的文件夹也被命名为这个。（不幸的是，包括空格）。

我最近将 wordpress 升级到 3.4.1，它以不同的方式解释了指向图像屏幕截图的链接。下雪了

```
wp-content/themes/Nackablue/screenshot.png 
```

而不是之前的

```
wp-content/themes/Nacka blue/screenshot.png 
```

我想重命名主题文件夹，但是当然，使用该主题的博客会认为主题丢失并恢复为默认主题，而且他们显然会删除标题图像。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:36:38.347

我最终像这样解决它：

使用新名称复制所有主题激活新主题手动将所有主题更改为新主题。删除旧主题。

确保保存并跟踪任何自定义标题/背景颜色等。因为这些将被重置为默认值。

# css - 对齐一个流体行上的 2 个字段

> ID：12366131
> 
> 赞同：0
> 
> 时间：2012-09-11T08:56:51.397
> 
> 标签：css, twitter-bootstrap, fluid-layout

我正在尝试在选择字段旁边对齐日期字段。如何完成这项工作？（例如，一行中的两个表单域）

```
<div class="control-group">
    <label class="control-label span4">Released by</label>
    <div class="controls">
        <select class="span4">
            <option value="0" selected="selected">John Doe</option>
            <option value="1">Another name</option>
            <option value="2">And another one</option>
         </select>
         <div class="input-append date controls" id="dp1" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
             <input class="span2" size="16" type="text" value="12-02-2012" readonly="">
             <span class="add-on"><i class="icon-th"></i></span>
         </div>
     </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:14:30.887

这是我的方法：http: [//jsfiddle.net/Cakj6/](http://jsfiddle.net/Cakj6/)

```
<div class="control-group">
  <label class="control-label span4">Released by</label>
  <div class="controls">
    <select class="span4">
      <option value="0" selected="selected">John Doe</option>
      <option value="1">Another name</option>
      <option value="2">And another one</option>
    </select>
    <div class="input-append date controls" id="dp1" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
      <input class="span2" size="16" type="text" value="12-02-2012" readonly="">
      <span class="add-on"><i class="icon-th"></i></span>
    </div>
  </div>
</div> 
```

```
.control-group {
  float: left;
  margin: 0;
  padding: 0;
  width: 100%;
}
.control-label, .controls, .controls select, .controls .date {
  float: left;
  line-height: 20px;
  vertical-align: middle
}
.controls select {
  margin: 0;
  padding: 0;
}
.controls, .controls date {
  padding-left: 5px;
} 
```

让我们知道它是否回答了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:17:41.153

HI 现在已经习惯了这个 css 就像 thids

```
.control-group{
background:red;
  width:400px;
}

.control-label.span4{
float:left;
}
.input-append.date.controls{
float:right;
} 
```

***[演示](http://tinkerbin.com/ay3uNZ9K)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T08:59:23.950

添加这个CSS

```
.slct{
   float:left
 }    
.input-append{
   float:left
 } 
```

​</p>

修改后的html

```
<div class="control-group">
<label class="control-label span4">Released by</label>
<div class="controls">
    <select class="span4 slct">
        <option value="0" selected="selected">John Doe</option>
        <option value="1">Another name</option>
        <option value="2">And another one</option>
     </select>
     <div class="input-append date controls" id="dp1" data-date="12-02-2012" data-date-format="dd-mm-yyyy">
         <input class="span2" size="16" type="text" value="12-02-2012" readonly="">
         <span class="add-on"><i class="icon-th"></i></span>
     </div>
 </div> 
```

​</p>

# android - 关键字来搜索关于 android 视频流的教程（到/从服务器）

> ID：12366139
> 
> 赞同：1
> 
> 时间：2012-09-11T08:57:34.887
> 
> 标签：android, video-streaming

我需要制作一个可以使用视频流检索和发送视频的应用程序。但我只是不知道怎么做。

据我所知，视频流就像用户想要从 youtube 等服务器观看视频时一样。我还想补充一点，应用程序可以使用 android 应用程序将视频发送到服务器。

我正在使用安卓 2.2。如果有人愿意给我任何我应该搜索的关键字来获得这样的教程或我应该知道的任何提示，那将是一个很大的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:02:31.533

正如我几个月前尝试的那样，低于 4.0 的 android 版本不支持从手机到服务器的实时视频流:(

您可以使用 Threads 流水线捕获和发送视频块，这样感觉就像视频流具有非常少的延迟 :)

对于 RTSP 和流媒体相关协议的存储媒体内容搜索，我希望 2.2 支持这一点。

# javascript - Backbone.js 视图中的多个模型

> ID：12366141
> 
> 赞同：0
> 
> 时间：2012-09-11T08:58:10.427
> 
> 标签：javascript, backbone.js

是否可以创建一个列出绑定到不同模型的集合的视图？也可以使用排序功能吗？

例如，我有 'sales' 和 'accounts' 模型，并且想用在这些部门工作的人的所有姓名制作一个视图。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:20:45.100

当然。您通常所做的最终是使用在集合上应用事件侦听器、创建代表每个模型的小子视图并通过它绑定模型事件处理程序的组合。

```
BigView = Backbone.View.extend({
    el: 'ul',  // This view is a <ul> and we'll be adding the model views
    initialize: function() {
        // This collection represents the collection you passed in
        // For our purpose lets say it was a SalesCollection
        this.collection.on('reset', this.addAllSales, this);
        this.collection.on('add', this.addSale, this);
    },
    addAllSales: function() {
        var that = this;
        this.collection.each(function(sale) {
            that.addSale(sale);
        });
    }
    addSale: function(model) {
        var view = new Subview({
            'model': model
        });
        this.$el.append(view.render().el);
    }
});

SaleView = Backbone.View.extend({
    initialize: function() {
        this.model.on('change', this.something, this);
    },
    render: function() {
        this.$el.html();  // Or whatever else you need to do to represent a sale as view
        return this;
    }
    something: function(model) {
        // Code for something
    }
}); 
```

所以在这个例子中，你基本上有你的主视图有一个集合（例如销售）。当销售集合被重置时，它会启动`addAllSales()`. 每次将销售添加到集合中时，我们都会添加一个表示特定模型（销售模型）的子视图。在这个子视图中，我们负责将事件绑定到模型更改，然后执行某些操作。

# javascript - 链接/按钮从子文件夹下载文件——浏览器只是浏览

> ID：12366147
> 
> 赞同：0
> 
> 时间：2012-09-11T08:58:23.483
> 
> 标签：javascript, jquery, html, apache

我试过了：

```
var url = '/files/123.txt';
$('a').click(function(e) {
    e.preventDefault();  //stop the browser from following
    window.location.href = url;
}); 
```

这只是让Firefox浏览到文本文件，而不是提示下载。

我也试过这个功能：

```
var downloadURL = function downloadURL(url)
{
    var iframe;
    iframe = document.getElementById("hiddenDownloader");
    if (iframe === null)
    {
        iframe = document.createElement('iframe');  
        iframe.id = "hiddenDownloader";
        iframe.style.visibility = 'hidden';
        document.body.appendChild(iframe);
    }
    iframe.src = url;   
} 
```

哪个有同样的问题 - 在浏览器中打开，没有下载提示。

我尝试过使用 apache：

```
<Files *.txt>
  ForceType applicaton/octet-stream
</Files> 
```

我在子文件夹和父文件夹中都放置了`.htaccess`这个代码。只有当请求的文本文件与网页位于同一文件夹中时，此 apache 方法似乎才有效。将文本文件放入子文件夹`/files/`时，同样的问题仍然存在——没有下载提示。

真的，现在有什么秘密方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:03:14.060

使用 PHP 标头以获得最大的多功能性。如何做到这一点可以在这里找到： [http ://webdesign.about.com/od/php/ht/force_download.htm](http://webdesign.about.com/od/php/ht/force_download.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:09:09.330

如果您想使用`.htaccess`需要更改的标题而不是内容类型的方式：

```
<FilesMatch "\.(?i:txt)$">
  Header set Content-Disposition attachment
</FilesMatch> 
```

# git - 从 git 存储库合并后如何删除 .orig 文件？

> ID：12366150
> 
> 赞同：174
> 
> 时间：2012-09-11T08:58:27.783
> 
> 标签：git

在合并期间如何在我的 git 存储库中检查 .orig 文件，这些文件现在显示在已修改和未跟踪的扇区中。但我不再希望这些文件出现在我的存储库中。怎么做。

```
 modified:   Gemfile.lock.orig
    #   modified:   Gemfile.orig
    #   modified:   app/assets/images/bg_required.png.orig
    #   modified:   app/assets/javascripts/application.js.orig

    etc... 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2014-01-03T02:46:29.853

在这种情况下，最好的解决方案是保持简单并独立于 git 删除这些文件：

```
cd /your/repo/directory
find . -name '*.orig' -delete 
```

或者，在 Windows/PowerShell 中，您可以运行以下命令

```
cd \your\repo\directory
Get-ChildItem -Recurse -Filter '*.orig' | Remove-Item 
```

* * *

## 回答 #2

> 赞同：156
> 
> 时间：2012-09-11T09:01:33.997

尝试`git clean`更多信息，您可以在[此处](http://www.kernel.org/pub/software/scm/git/docs/git-clean.html)或[此处找到](http://travisjeffery.com/b/2011/12/keeping-your-git-repo-clean-of-orig-files/)

* * *

## 回答 #3

> 赞同：111
> 
> 时间：2015-12-08T06:57:15.033

你可以做：

```
git config --global mergetool.keepBackup false 
```

有关详细信息，请参阅[Git 合并工具生成不需要的 .orig 文件](https://stackoverflow.com/questions/1251681/git-mergetool-generates-unwanted-orig-files)

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-05-26T21:42:06.413

不幸的是`git clean`，这对我不起作用，因为我已经`*.orig`添加到我的全局 gitignore 文件中，所以它们也被 clean 忽略了。即使运行`git clean -x`也不好，因为我不希望我*所有*被忽略的文件都被删除。`git clean -i`很有帮助，但我真的不想检查每个文件。

但是，我们可以使用排除模式并否定匹配。使用此命令预览：

```
git clean -e '!*.orig' --dry-run 
```

然后，当您有信心时，传递`force`标志以真正删除它们：

```
git clean -e '!*.orig' -f 
```

基于[leorleor的评论](https://stackoverflow.com/posts/comments/44811993?noredirect=1)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-11T09:01:29.907

您可以使用 .gitignore 忽略文件

只需将 *.orig 放入列表中，如下所示

[https://help.github.com/articles/ignoring-files](https://help.github.com/articles/ignoring-files)

要删除当前文件，您可以创建 shell 脚本并从项目文件夹中运行，如下所示

```
for file in `find *.orig -type f -print`
do
   echo "Deleting file $file"
   git rm $file -f       
done 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-11T10:05:18.417

`git rm Gemfile.lock.orig` 以及您不需要的其余文件。 `git commit --amend`

要完全删除这些斑点， `git gc --prune=0 --aggressive`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-01-25T17:35:38.530

对我来说，`git clean -f`删除了所有 *.oig 文件。并保留之前已经存在的那些。

这是合并后它（几乎）的样子：

```
$ git status
On branch feature/xyz
Your branch is ahead of 'origin/feature/xyz' by 568 commits.
  (use "git push" to publish your local commits)

Untracked files:
  (use "git add <file>..." to include in what will be committed)

    .idea/codeStyles/
    .idea/misc.xml.orig 
```

`.idea/codeStyles/`在合并之前已经作为未跟踪的文件存在。`.idea/misc.xml.orig`（以及更多）必须被删除。

=> 使用`git clean -f`：

```
$ git clean -f
Removing .idea/misc.xml.orig 
```

导致：

```
$ git status
On branch feature/xyz
Your branch is ahead of 'origin/feature/xyz' by 568 commits.
  (use "git push" to publish your local commits)

Untracked files:
  (use "git add <file>..." to include in what will be committed)

    .idea/codeStyles/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-17T08:51:06.960

你可以简单地做`git status -s | grep "\.orig$" | awk '{print $2}' | xargs -n1 -r echo rm`

TL;博士;

`git status -s`允许您获取与索引有关的所有修改/丢失的文件

`grep "\.orig$"`过滤掉文件，以“.orig”结尾

`awk '{print $2}'`列出文件名（跳过 git 信息，例如 A、M、??）

`xargs -n1 -r echo rm`在每个参数上打印删除命令（-n1：一次一个，-r：空时跳过）只需复制并粘贴命令，仔细检查要删除的文件。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-10-09T11:28:59.587

您可以使用预提交挂钩自动执行此过程。为此，只需进入项目文件夹，然后搜索 hidden folder `.git`。在里面你会找到`hooks`目录，打开它，然后 cr8 一个`pre-commit`用下一个命名的文件包含：

```
echo "Looking for .orig files to remove"
pwd=$(pwd)
find . -name '*.orig' -delete 
echo "Done removing .orig files" 
```

现在它会在你提交之前清理 orig 文件，所以没有必要将它保存在 gitignore 中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-25T23:45:38.970

对于那些使用**Windows 机器**的人，您可以在 PowerShell 中执行此命令。

```
ls -Recurse *.orig | rm -Force 
```

或者，如果您更喜欢详细的 PowerShell

```
Get-ChildItem -Recurse *.orig | Remove-Item -Force 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2012-09-11T09:01:20.630

`git rm <file>`

[http://git-scm.com/docs/git-rm](http://git-scm.com/docs/git-rm)

还将要忽略的文件/目录添加到 .gitignore 文件中。

# android - 如何将选中的名称从复选框传递到另一个活动

> ID：12366161
> 
> 赞同：0
> 
> 时间：2012-09-11T08:59:05.557
> 
> 标签：android, database, checkbox

我目前难以将复选框中的名称从一项活动传递到另一项活动。实际上，名称应在检查后插入到我的数据库表中，然后将其传递给前面提到的活动。有人对这样做有任何想法吗？提供的任何帮助将不胜感激。

作为参考，我的项目的代码。

```
 BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contacts_list);

        ListView list = (ListView) findViewById(android.R.id.list);
        //ListView list = getListView();
        list.setOnItemClickListener(new OnItemClickListener()
        {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position,
                    long id)
            {

               Cursor cursor = null;

               cursor = (Cursor) parent.getItemAtPosition(position);
               Intent intent = new Intent(ContactsList.this, Create_Events.class);
               intent.putExtra("name", cursor.getString(cursor.getColumnIndex(buddyDB.KEY_NAME)));
               startActivity(intent);

            }

        });

        Uri allContacts = Uri.parse("content://contacts/people");

        Cursor c = managedQuery(allContacts, null, null, null, null);

        String[] columns = new String[] {ContactsContract.Contacts.DISPLAY_NAME};
        int[] views = new int[]  {R.id.contactCheckbox};

        startManagingCursor(c);

        SimpleCursorAdapter friendsAdapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views);
        this.setListAdapter(friendsAdapter);

    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id)
    {
        buddyDB.open();
        //long name_id;
        super.onListItemClick(l, v, position, id);

        Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();
        c.moveToPosition(position);

        /*TextView contactName = (TextView) v.findViewById(R.id.contactName);
        String NameValue = contactName.getText().toString();

        name_id = buddyDB.insertNames(NameValue);

        Toast.makeText(getBaseContext(),
                "Selected: " + buddiesList[position], Toast.LENGTH_SHORT).show();       
        buddyDB.close();*/

            nameCheck = (CheckBox) v.findViewById(R.id.contactCheckbox);
            nameCheck.setOnCheckedChangeListener(new OnCheckedChangeListener()
                {               
                    @Override
                    public void onCheckedChanged(CompoundButton buttonView,
                            boolean isChecked)
                    {
                        long name_id;
                        String NameValue = nameCheck.getText().toString();
                        name_id = buddyDB.insertNames(NameValue);
                        /*if(isChecked)
                        {
                            nameCheck = 1;
                        }else
                        {
                            nameCheck = 0;
                        }*/                 
                    }                   
                });     
            buddyDB.close();        
    }

} 
```

同样，任何人的任何帮助都将不胜感激。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:01:36.407

在要将参数传递给另一个活动的地方使用此代码。

```
Intent n = new Intent(actA.this , actB.class);
n.putExtra("name", NameValue);
startActivity(n); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:21:50.840

这可能会帮助你

从 oneActivity 传递名称值

```
Intent n = new Intent(actA.this , actB.class);
n.putExtra("name", NameValue);
startActivity(n); 
```

获取给定的值

```
Intent igetlist = getIntent();
String singleid = igetlist.getExtras().getString("name"); 
```

# c# - Linq查询根据属性值选择所有节点

> ID：12366167
> 
> 赞同：0
> 
> 时间：2012-09-11T08:59:15.137
> 
> 标签：c#, linq-to-xml

```
<Category id=1>
<MyLines>
      <Line GroupID="0" Cache="15" />
  <Rect GroupID="0" Cache="16"/>
  <Ellipse GroupID="0" Cache="16"/>
</MyLines> 
```

我的 XML 文档包含许多 Category 标签。您能否让我知道获取 Cache = 16 的 MyLines 的每个子元素并删除它们的最佳方法是什么。

我希望使用 linq 来实现这一目标。

我正在尝试如下：

```
 var q = from node in doc.Descendants("MyLines")
                let attr = node.Attribute("Cache")
                where attr != null && Convert.ToInt32(attr.Value) == 16
                select node;
        q.ToList().ForEach(x => x.Remove()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:05:47.583

我已经测试了以下代码：

```
string xml = 
@"<Category id=""1"">
<MyLines>
    <Line GroupID=""0"" Cache=""15"" />
<Rect GroupID=""0"" Cache=""16""/>
<Ellipse GroupID=""0"" Cache=""16""/>
</MyLines>
</Category>";

void Main()
{
    var doc = XDocument.Parse(xml);

    doc.Descendants("MyLines")
    .Elements()
    .Where(el => el.Attribute("Cache").Value == "16") 
    .ToList()
    .ForEach(el => el.Remove());

    doc.Root.ToString().Dump();
} 
```

它打印：

```
<Category id="1">
   <MyLines>
      <Line GroupID="0" Cache="15" />
   </MyLines>
</Category> 
```

问题是您正在寻找元素`Cache`上的属性`MyLines`而不是`MyLines`元素的子级。

# c# - 获取时间表 HTMLAgilityPack

> ID：12366169
> 
> 赞同：0
> 
> 时间：2012-09-11T08:59:19.037
> 
> 标签：c#, html, html-agility-pack

我需要从网站上获取时间表。我想将此时间表存储/添加到我的 C# 应用程序中的数据表中。

数据表的结构如下所示：

```
1\. | 天 | 时间 | 状态 |
2\. ..1........7:00............在
3\. ..1.......9:45.......输出
4\. ..1......10:15........在
5\. ..1......15:45......OUT
6\. ..1........8:45......总计
7\. ..2 .. ..

```

我的 DataTable 的 C# 代码：

```
DataTable table = new DataTable("Worksheet");
table.Columns.Add("Day");
table.Columns.Add("Time");
table.Columns.Add("Status"); 
```

我尝试了不同的变体，但我总是搞乱所有数据。

出于测试目的，我制作了一个带有“文本框”（用于站点路径）和“按钮”（启动进程）的新 Winform

然后我希望 HTMLAgilityPack 获取所有数据。一个例子：

```
public string[] GREYsource;

public Form1()
{
    InitializeComponent();
}

private void btnSubmit_Click(object sender, EventArgs e)
{
    var doc = new HtmlAgilityPack.HtmlDocument();
    var fileName = txtPath.Text;                    // I downloaded the HTML-File
    doc.Load(fileName);

    string strGREYInner;

    foreach (HtmlNode td in doc.DocumentNode.SelectNodes("//tr[@class=\"tblDataGreyNH\"]"))
    {
        strGREYInner = td.InnerText.Trim();
        string shorted = strGREYInner.Replace("\t", ""); string shorted2 = shorted.Replace("\n\n\n\n", "\n\n\n"); string shorted3 = shorted2.Replace("\n\n\n", "\n\n"); string shorted4 = shorted3.Replace("\n\n", "\n");
        GREYsource = shorted4.Split(new Char[] { '\n', });
    }

    foreach (string str in GREYsource)
    {
        ...
    }
} 
```

1.  问题：结果包含很多我需要修剪的制表符（/t）和换行符（/n）。
2.  问题：IMO，这不是一个好方法。这只会抓住 Totaltimes。

它可以做得更好。

这只是我尝试的一个例子（其他代码只是一堆垃圾）

我在下面附上了 HTML 结构：

概述（图片）： ![http://www.abload.de/img/overviewzoj18.png](../Images/539f82296db99b184d4c7416231f83ee.png)

更深入一点：

```
<html>
  <head>
  </head>
  <style type="text/css">
  </style>
  <body id="body" onload="handleMenuOverlapLogo();onload_column_expand();;firstElementFocus();">

    <.. some (java)scripts>             /* has to be ignoered. not necessary */
    <.. some other divs>              /* has to be ignoered. not necessary */
    <div id="rowContent">             /* This <div> contains the content i need */
      <div id="titleTab">             /* Title is not necessary */
      </div>                    
      <div id="rowContentInner">          /* Here the content starts */
        <table class="tblList">
          <tbody>
            <tr>              /* not necessary */
            <tr class="tblHeader">      /* not necessary */
            <tr class="tblHeader">      /* not necessary */
            <tr class="tblDataWhiteNH">   /*  IN : */
              <td class="tblHeader" style="font-weight: bold; text-align: right"> In </td>
              <td nowrap="">        /* "tblDataWhiteNH" always contains 7 "td nowrap"
              <td nowrap="">
              <td nowrap="">        /* Example: if it contains a value */
                <table width="100%" border="0" align="center">
                <tbody>
                    <tr>
                      <td width="25%" align="left"> </td>
                      <td nowrap="" width="50%" align="center"> 7:53 </td>  /* value = 7:53 (THIS!) */
                      <td width="25%" align="right"> </td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td nowrap="">
              <td nowrap="">        /* Example: if it contains no value */
                <table width="100%" border="0" align="center">
                  <tbody>
                    <tr>
                      <td width="25%" align="left"> </td>
                      <td nowrap="" width="50%" align="center">       /* no value = 0:00 (THIS!) */
                      <td width="25%" align="right"> </td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td nowrap="">
              <td nowrap="">
            <tr class="tblDataWhiteNH">   /* OUT : */
              <td class="tblHeader" style="font-weight: bold; text-align: right"> Out </td>
              <td nowrap="">        /* "tblDataWhiteNH" always contains 7 "td nowrap".
              <td nowrap="">
              <td nowrap="">        /* Example: if it contains a value */
                <table width="100%" border="0" align="center">
                <tbody>
                    <tr>
                      <td width="25%" align="left"> </td>
                      <td nowrap="" width="50%" align="center"> 7:53 </td>  /* value = 7:53 (THIS!) */
                      <td width="25%" align="right"> </td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td nowrap="">
              <td nowrap="">        /* Example: if it contains no value */
                <table width="100%" border="0" align="center">
                  <tbody>
                    <tr>
                      <td width="25%" align="left"> </td>
                      <td nowrap="" width="50%" align="center">       /* no value = 0:00 (THIS!) */
                      <td width="25%" align="right"> </td>
                    </tr>
                  </tbody>
                </table>
              </td>
              <td nowrap="">
              <td nowrap="">
            <tr class="tblDataGreyNH">    /*  IN : */
            <tr class="tblDataGreyNH">    /* OUT : */
            ...               /* "tblDataGreyNH" is built up the same way like "tblDataWhiteNH".
            ...               /* sometimes there could be more "tblDataWhiteNH" and "tblDataGreyNH". */
            ...               /* Usally there are just the "tblDataWhiteNH"(IN/OUT) */
            <tr class="tblHeader">      /* not necessary */
                            /* It continues f.egs. with "tblDataWhite" if the last above header was a "tblDatagrey" */
                            /* and versa vice ("grey" if there was a "white" before.) */
            <tr class="tblDataWhiteNH">   /* Worked : */
              <td class="tblHeader" style="font-weight: bold; text-align: right"> Total Time </td>
              <td> 07:47 </td>      /* value = 7:47 (THIS!) */
              <td> 04:48 </td>      
              <td> 00:00 </td>      /* no value = 0:00 (THIS!) */
              <td> 00:00 </td>      
              <td> 07:42 </td>      
              <td> 00:00 </td>      
              <td> 00:00 </td>      
            </tr>
            <tr class="tblDataGreyNH">    /* Total : */
              <td class="tblHeader" style="font-weight: bold; text-align: right"> Regular Time </td>
              <td> 07:47 </td>      /* value = 7:47 (THIS!) */
              <td> 04:48 </td>      
              <td> </td>          /* no value = 0:00 (THIS!) */
              <td> </td>          
              <td> 07:42 </td>      
              <td> </td>
              <td> </td>
            </tr>
            <tr class="tblHeader">      /* not necessary */
            <tr valign="top">       /* not necessary */
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html> 
```

原始 HTML 的副本：http: [//time.wnb.dk/123/](http://time.wnb.dk/123/)

我希望任何人都可以帮助我让它工作。

* * *

好吧，让我用一张图片来解释它。[https://www.abload.de/img/eeeqnuwu.png](https://www.abload.de/img/eeeqnuwu.png)
在图片上，您可以看到网站 + 下表，结果应该是什么样子。

声明数据表不是问题。
主要问题是我无法让 htmlagility 吐出正确的结果，如果确实如此，它几乎是错误的。我尝试的一些选择节点在一段时间后输出混乱。到目前为止，我还无法从网站上的表格中获取“所有”数据，只有一些值，但通常有问题。
所以我实际上正在寻找可以看看这个并可能帮助我找到正确的选择节点的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T12:17:55.153

不确定我是否完全理解您想要做什么，但这里有一个示例代码可以帮助您入门。我强烈建议您查看[XPATH](http://www.w3schools.com/xpath/default.asp)以了解它。

```
 HtmlDocument doc = new HtmlDocument();
        doc.Load(yourFile);

        // get all TR with a specific class name, starting from root (/), and recursively (//)
        foreach (HtmlNode node in doc.DocumentNode.SelectNodes("//tr[@class='tblDataGreyNH' or @class='tblDataWhiteNH']"))
        {
            // get all TD below the current node with a specific class name
            HtmlNode inOrOut = node.SelectSingleNode("td[@class='tblHeader']");
            if (inOrOut != null)
            {
                string io = inOrOut.InnerText.Trim();
                Console.WriteLine(io.ToUpper());
                if (io.Contains("Time"))
                {
                    // normalize-space gets rid or whitespaces (\r,\n, etc.)
                    // text() gets the node's inner text
                    foreach (HtmlNode td in node.SelectNodes("td[normalize-space(@class)='' and normalize-space(text())!='' and normalize-space(text())!='00:00']"))
                    {
                        Console.WriteLine("value:" + td.InnerText.Trim());
                    }
                }
            }

            // gets all TD below the current node that define the NOWRAP attribute
            HtmlNodeCollection tdNoWraps = node.SelectNodes("td[@nowrap]"); 
            if (tdNoWraps != null)
            {
                foreach (HtmlNode tdNoWrap in tdNoWraps)
                {
                    string value = tdNoWrap.InnerText.Trim();
                    if (value == string.Empty)
                        continue;

                    Console.WriteLine("value:" + value);
                }
            }
        } 
```

它将从您的示例页面输出：

```
IN
value:7:47
value:7:46
value:7:45
value:7:51
OUT
value:15:35
value:15:33
value:12:38
value:8:59
IN
value:12:38
value:8:59
OUT
value:15:35
TOTAL TIME
value:07:48
value:07:47
value:07:50
value:01:08
REGULAR TIME
value:07:48
value:07:47
value:07:50
value:01:08 
```

# wordpress - WordPress 问题（或者 Drupal 或框架是更好的选择吗？）。用户贡献的音乐会列表网站

> ID：12366176
> 
> 赞同：1
> 
> 时间：2012-09-11T08:59:36.010
> 
> 标签：wordpress, web

我正在为视频游戏音乐会制作一个网站。它是用户贡献的，这意味着任何人都可以输入有关新音乐会的信息或修改现有音乐会。编辑者可以还原更改。用户可能分为四组：未注册用户、注册用户、编辑、管理员。

该站点将位于[http://vgmdb.net/](http://vgmdb.net/)的子域上，该站点是视频游戏音乐专辑的站点。请查看该站点并想象我的站点类似，但更简单。我是一个初学者程序员，对 WordPress、Drupal、PHP 和 MySQL 的经验很少。有些人建议使用框架而不是 CMS。但我最喜欢 WordPress，并且更愿意使用它。

*   WordPress可以轻松处理这些事情吗？

    1.  高级搜索功能。

        *   音乐会将以 VGMdb 的高级搜索方式与特定的游戏、艺术家、场地、城市、国家、流派、日期等相关联
    2.  包含有关信息的用户配置文件

        *   他们去过哪些音乐会（“参加了这场音乐会”-音乐会上的按钮）
        *   他们对音乐会的评分（音乐会上的 5 星评分按钮）
    3.  每场音乐会的图片库

        *   用于扫描音乐会上提供的小册子和其他东西
        *   用户上传这些东西（就像他们修改和添加信息一样）
    4.  用户可以添加或修改有关音乐会的信息

        *   [以http://vgmdb.net/album/new](http://vgmdb.net/album/new)的简单方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:33:20.577

当然，它可以在 WordPress 中完成。但它不会推荐它。
最大的问题是您希望未注册的访问者做这些事情。WP擅长管理内容。但如果它是用户生成的，则不是。它最终会变得不稳定并且对用户完全不友好。

我不知道 Drupal 是否会更好。
我建议先学习[Zend 框架](http://www.zendframework.com/)或[Symphony](http://www.symfony-project.org/)。
你说你是初学者，事实是这样；
这对你来说可能太大了，无论你最终使用什么，你都必须学习更多。

# javascript - 使用 Ajax 提交表单

> ID：12366178
> 
> 赞同：0
> 
> 时间：2012-09-11T08:59:41.720
> 
> 标签：javascript, ajax

我需要使用带有 POST 方法的 Ajax 提交表单。代码如下，

```
function persistPage(divID,url,method){ 
    var scriptId = "inlineScript_" + divID;
    var xmlRequest = getXMLHttpRequest();   
    xmlRequest.open("POST",url,true);
    xmlRequest.onreadystatechange = function(){
    alert(xmlRequest.readyState + " :" + xmlRequest.status);
    if (xmlRequest.readyState ==4 || xmlRequest.status == 200)
          document.getElementById(divID).innerHTML=xmlRequest.responseText;
    };
    xmlRequest.open("POST", url, false);
    alert(xmlRequest.readyState);
    xmlRequest.send(null);
} 
```

但表单未提交（请求未执行或未发布数据）。如何使用 Ajax 提交表单。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:23:54.147

您的代码不起作用有几个原因。请允许我将其分解并一一讨论问题。我将从最后一个（但最大的）问题开始：

```
xmlRequest.send(null); 
```

我的猜测是，您的代码基于一个`GET`示例，其中 send 方法被调用`null`，甚至`undefined`作为参数 ( `xhr.send()`)。这是因为 url 包含 GET 请求 ( `.php?param1=val1&param2=val2...`) 中的数据。使用 post 时，您必须将*数据*传递给 send 方法。

但是，让我们不要超越自己：

```
function persistPage(divID,url,method)
{   
    var scriptId = "inlineScript_" + divID;
    var xmlRequest = getXMLHttpRequest();//be advised, older IE's don't support this
    xmlRequest.open("POST",url,true);
    //Set additional headers:
    xmlRequest.setRequestHeader('X-Requested-With', 'XMLHttpRequest');//marks ajax request
    xmlRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencode');//sending form 
```

两个标题中的第一个并不总是必需的，但安全总比抱歉好，IMO。现在，继续：

```
 xmlRequest.onreadystatechange = function()
    {
        alert(xmlRequest.readyState + " :" + xmlRequest.status);
        if (xmlRequest.readyState ==4 || xmlRequest.status == 200)
            document.getElementById(divID).innerHTML=xmlRequest.responseText;
    }; 
```

这段代码有很多问题。您正在为对象分配方法，因此无需使用 引用您的对象`xmlRequest`，尽管在技术上在这里有效，但一旦您将回调函数移到函数之外，这将中断`persistPage`。该`xmlRequest`变量是函数作用域的局部变量，不能在其外部访问。另外，我之前说过，它是一个方法：`this`直接指向对象
你的`if`说法也有点奇怪：the `readystate` *must* be 4, **and** status == 200, not or。所以：

```
 xmlRequest.onreadystatechange = function()
    {
        alert(this.readyState + " :" + this.status);
        if (this.readyState === 4 && this.status === 200)
        {
            document.getElementById(divID).innerHTML=this.responseText;
        }
    };
    xmlRequest.open("POST", url, false);
    alert(xmlRequest.readyState);//pointless --> ajax is async, so it will alert 0, I think
    xmlRequest.send(data);//<-- data goes here
} 
```

如何填写数据取决于您，但请确保格式与标题匹配：在这种情况下为`'content type','x-www-form-urlencode'`. [这是此类请求的完整示例](https://stackoverflow.com/questions/10534441/javascript-ajax-request-vs-jquery-ajax)，它并不完全是世界领先的，因为当时我正在放弃 jQ 以支持纯 JS，但它是有用的，您可能会选择一两件事。特别是仔细看看`function ajax()`定义。在其中，您将看到创建 xhr 对象的 X 浏览器方法，并且其中还有一个用于字符串化表单的函数

* * *

*毫无意义的更新：*

为了完整起见，我将添加一个完整的示例：

```
function getXhr()
{
    try
    {
        return XMLHttpRequest();
    }
    catch (error)
    {
        try
        {
            return new ActiveXObject('Msxml2.XMLHTTP');
        }
        catch(error)
        {
            try
            {
                return new ActiveXObject('Microsoft.XMLHTTP');
            }
            catch(error)
            {
                //throw new Error('no Ajax support?');
                            alert('You have a hopelessly outdated browser');
                            location.href = 'http://www.mozilla.org/en-US/firefox/';
            }
        }
    }
}
function formalizeObject(form)
{//we'll use this to create our send-data
    recursion = recursion || false;
    if (typeof form !== 'object')
    {
        throw new Error('no object provided');
    }
    var ret = '';
    form = form.elements || form;//double check for elements node-list
    for (var i=0;i<form.length;i++)
    {
        if (form[i].type === 'checkbox' || form[i].type === 'radio')
        {
            if (form[i].checked)
            {
                ret += (ret.length ? '&' : '') + form[i].name + '=' + form[i].value;
            }
            continue;
        }
        ret += (ret.length ? '&' : '') + form[i].name +'='+ form[i].value; 
    }
    return encodeURI(ret);
}

function persistPage(divID,url,method)
{   
    var scriptId = "inlineScript_" + divID;
    var xmlRequest = getXhr();
    xmlRequest.open("POST",url,true);
    xmlRequest.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
    xmlRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencode');
    xmlRequest.onreadystatechange = function()
    {
        alert(this.readyState + " :" + this.status);
        if (this.readyState === 4 && this.status === 200)
        {
            document.getElementById(divID).innerHTML=this.responseText;
        }
    };
    xmlRequest.open("POST", url, false);
    alert(xmlRequest.readyState);
    xmlRequest.send(formalizeObject(document.getElementById('formId').elements));
} 
```

只是为了好玩：此代码未经测试，但应该可以正常工作。但是，在每个请求上，都会`persistPage`创建一个新的函数对象并将其分配给. 您可以编写此代码，以便您只需要创建 1 个函数。我现在不会进入我心爱的闭包（我认为你的盘子已经足够了），但重要的是要知道函数是对象，并且具有属性，就像其他所有东西一样：替换：`onreadystate``xmlRequest`

```
 xmlRequest.onreadystatechange = function()
    {
        alert(this.readyState + " :" + this.status);
        if (this.readyState === 4 && this.status === 200)
        {
            document.getElementById(divID).innerHTML=this.responseText;
        }
    }; 
```

有了这个：

```
//inside persistPage function:
xmlRequest.onreadystatechange = formSubmitSuccess;
formSubmitSuccess.divID = divID;//<== assign property to function
//global scope
function formSubmitSuccess()
{
    if (this.readyState === 4 && this.status === 200)
    {
        console.log(this.responseText);
        document.getElementById(formSubmitSuccess.divID).innerHTML = this.responseText;
        //^^ uses property, set in persistPAge function
    }
} 
```

但是不要使用它，因为在您重新分配属性时异步调用可能仍在运行，从而造成混乱。如果 id 总是相同的，你可以，但是（但是闭包会更好，那么）。

好的，我就这样吧

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:16:25.657

这段代码可以让你理解。函数**SendRequest**通过**GetXMLHttpRequest**函数发送请求并构建**xmlRequest**

 **```
function SendRequest() {
    var xmlRequest = GetXMLHttpRequest(),
    if(xmlRequest) {

        xmlRequest.open("POST", '/urlToPost', true)

        xmlRequest.setRequestHeader("connection", "close");
        xmlRequest.onreadystatechange = function() {
            if (xmlRequest.status == 200) {
                // Success          
            }
            else {
                // Some errors occured                  
            }               
        };

        xmlRequest.send(null);
    }
}

function GetXMLHttpRequest() {
    if (navigator.userAgent.indexOf("MSIE") != (-1)) {
        var theClass = "Msxml2.XMLHTTP";
            if (navigator.appVersion.indexOf("MSIE 5.5") != (-1)) {
            theClass = "Microsoft.XMLHTTP";
        }
        try {
            objectXMLHTTP = new ActivexObject(theClass);
            return objectXMLHTTP;
        }
        catch (e) {
            alert("Errore: the Activex will not be executed!");
        }
    }
    else if (navigator.userAgent.indexOf("Mozilla") != (-1)) {
        objectXMLHTTP = new XMLHttpRequest();
        return objectXMLHTTP;
    }
    else {
        alert("!Browser not supported!");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:22:14.260

看看[这个](http://www.quirksmode.org/js/xmlhttp.html)页面。在这一行中：`req.send(postData);`发布数据是一个数组，其中包含应该发布到服务器的值。你有 null 那里。所以什么都没有发布。您只需调用请求并且不发送任何数据。在您的情况下，您必须从表单中收集所有值，因为 XMLHTTPRequest 不是可以简单地提交表单的东西。您必须使用 JS 传递所有值：

```
 var postData = {};
   postData.value1 = document.getElementById("value1id").value;
   ...
   xmlRequest.send(postData); 
```

像 $_POST['value'] （在`value1`PHP 中）这样的服务器上的可用位置

URL 或您的呼叫方式也可能存在问题`persistPage`。persistPage 代码对我来说看起来不错，但也许我遗漏了一些东西。如果您在控制台中没有错误，您也可以查看一下。在任何浏览器中按 F12 并找到控制台选项卡。在 FF 中你可能需要安装 Firebug 扩展。此外，您将拥有包含所有请求的网络选项卡。打开 Firebug/Web Inspector(Chrome)/Developer Toolbar(IE) 并在调用 persistPage 后检查是否在其网络选项卡中注册了新请求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:52:23.877

我发现你调用了

> xmlRequest.open()

方法两次，一次将 async 参数设置为 true，另一次设置为 false。你到底打算做什么？

```
xmlRequest.open("POST", url, true);
...
xmlRequest.open("POST", url, false); 
```

如果要发送异步请求，请将参数作为 true 传递。而且，要使用“POST”方法，您最好按照 Elias 的建议发送请求标头，

```
xmlRequest.setRequestHeader('Content-type', 'application/x-www-form-urlencode'); 
```

否则，您可能仍然会遇到意想不到的问题。

如果你想要一个同步请求，实际上你可以在发送请求后直接处理响应，就像：

```
xmlRequest.open("POST", url, false);
xmlRequest.send(postData);
// handle response here
document.getElementById(scriptId).innerHTML = xmlRequest.responseText; 
```

希望这可以帮助。**

# coffeescript - 如何比较两个字符串数组

> ID：12366181
> 
> 赞同：1
> 
> 时间：2012-09-11T08:59:48.430
> 
> 标签：coffeescript

我有以下字符串数组：

```
array1 = ["a", "b", "c"]
array2 = ["a", "c", "b"]
array3 = ["a", "b"]
array4 = ["a", "b", "c"] 
```

如何比较数组以便：

```
array1 is array2 #false
array1 is array3 #false
array1 is array4 #true 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:58:49.720

您不能使用关键字`is`（编译为`===`），但可以`is`向 的原型添加新方法`Array`：

```
Array::is = (o) ->
  return true if this is o
  return false if this.length isnt o.length
  for i in [0..this.length]
    return false if this[i] isnt o[i]
  true 
```

然后像这样使用它

```
array1 = ["a", "b", "c"]
array2 = ["a", "c", "b"]
array3 = ["a", "b"]
array4 = ["a", "b", "c"]

alert array1.is array2
alert array1.is array3
alert array1.is array4 
```

# ios - iOS 如何判断 webViewDidFinishLoad 何时完成？

> ID：12366187
> 
> 赞同：0
> 
> 时间：2012-09-11T09:00:08.520
> 
> 标签：ios, uiwebview

我在 webViewDidFinishLoad 委托方法中有一些代码，我需要一些方法来告诉我这段代码已经在我的代码完全不同部分的另一个方法中完成了执行。这可能吗？基本上我想做的是这样的：

```
-(void) myMethod
{
    // do stuff that causes webViewDidFinishLoad to be called

    if (webViewDidFinishLoad has finished executing)
    {
        // do stuff with outputString
    }
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    outputString = [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"myJSFunction('%@')",jsInputString]]; 
} 
```

我已经看过[这个答案](https://stackoverflow.com/q/10531146/1525229)了，这对我来说毫无意义。

我应该在 myMethod 中添加它，我可以确定 webViewDidFinishLoad 只会被调用一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:10:37.230

您始终可以设置一个布尔值来指示 webview 是否已完成加载。并且布尔值将在 webview 委托方法中更改：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    loadFinished = YES;
} 
```

然后在您自己的方法中，选中“loadFinished”将完成任务。您必须设置`<UIWebViewDelegate>`接口才能使用此委托方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T12:49:23.493

尽量避免在其他方法中等待代表和通知——当他们回调你的班级时，做依赖于他们的工作。`myMethod`在收到代表消息之前不要打电话。如果`myMethod`从用户输入调用，则禁用关联的控件，直到加载 Web 视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:06:26.260

*   你可以使用`UIWebView`'s iVar`loading`
*   您可以使用自己的共享布尔标志作为 iVar 并将其设置为`webViewDidFinishLoad`.

但是，也许您可​​以重新考虑您的设计并`webViewDidFinishLoad`在加载完成后做什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:11:39.173

为什么不试试 GCD？

```
dispatch_async( dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

    // WebView load content here 

    dispatch_async( dispatch_get_main_queue(), ^{

       // load myMethod

    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T09:11:43.257

使用布尔值并将其值设置`YES`为`webViewDidFinishLoad`.

然后`myMethod`像这样签入：

```
-(void) myMethod
{
    // do stuff that causes webViewDidFinishLoad to be called

  if (yourBoolean == YES)
  {
      // do more stuff
  }
} 
```

那应该做你的工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T09:14:56.833

在 webViewDidFinishLoad 中，您将通知发布到“myMethod”代码部分。像这样的东西：

在 UIWebView 中：

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"webview_finished" object:self userInfo:nil];
} 
```

在您的“myMethod”代码部分：

```
- (void)viewDidLoad
{
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(myMethod) name:@"webview_finished" object:nil];
} 
```

# c# - 是否 有 onFocusLost 事件吗？

> ID：12366196
> 
> 赞同：0
> 
> 时间：2012-09-11T09:00:28.097
> 
> 标签：c#, javascript, html

> **可能重复：**
> [asp.net 文本框的丢失焦点方法？](https://stackoverflow.com/questions/3863927/lost-focus-method-for-asp-net-textbox)

我想检查用户在客户端输入的数据。我有必要使用控制。有什么方法可以让我在客户端转到下一个输入后进行检查，我可以通过 javascript 检查数据吗？

```
<asp:TextBox ClientIDMode="Static" onblur="return userCheck(this.id)" onkeyup="return userCheck(this.id)"
                        ID="txtUserName" runat="server" Width="180"></asp:TextBox> 
```

在这里，我使用了两个事件，但我只想使用一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:03:14.790

您可以使用 javascript 使用 onblur 事件来做到这一点。像这样的东西：

```
<asp:TextBox runat="server" onblur="Javascript:alert('1234');" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:06:14.277

对于您想要做的事情，您可以将文本框设置为 AutoPostBack=True; 每当框中的文本发生更改并且框失去焦点时，它都会返回到页面；如果您不想回发，也可以使用 TextChanged 属性，该属性将检查 TextBox 的文本是否在帖子之间发生了更改。

最后，您可以将 JavaScript onFocus 和 onBlur 事件绑定到文本框，并通过 JavaScript 处理对其内容的更改：

[http://support.microsoft.com/default.asp…</a>](http://support.microsoft.com/default.aspx?scid=kb;EN-US;316719)

[](http://support.microsoft.com/default.aspx?scid=kb;EN-US;316719)

[来源：](http://support.microsoft.com/default.aspx?scid=kb;EN-US;316719)[http ://answers.yahoo.com/question/index?qid=1006040618831](http://answers.yahoo.com/question/index?qid=1006040618831)

# jqgrid - 在 jqGrid 中查找重复的行

> ID：12366198
> 
> 赞同：2
> 
> 时间：2012-09-11T09:00:32.080
> 
> 标签：jqgrid

有没有办法在 jqgrid 中找到重复的行？

# eclipse - Eclipse Open Declaration 不适用于 Ant 项目

> ID：12366200
> 
> 赞同：0
> 
> 时间：2012-09-11T09:00:49.780
> 
> 标签：eclipse, ant, alfresco

我的日食是**靛蓝**版本。开放声明适用于在我的椭圆中创建新的 Java 项目。

但是在这种情况下，我从svn获取了整个项目的露天源代码（假设为root），而root由许多java项目组成。它是用`ant`ie 构建的，通过运行`build.xml`从每个 java 项目构建 jar，最后创建一个 war 文件并部署。在这个项目中，打开声明 F3 和打开类型层次结构 F4 不起作用。据说

> 该资源不在 Java 项目的构建路径上。

* * *

所以我拿了另一个工作区，把这些java项目一个接一个地导入到root里面。打开声明 F3 和打开类型层次结构 F4 有效。但是这个工作空间只是为了查看源文件而不起作用。

**我想知道 F3 和 F4 不起作用的原因是什么，您能解释一下如何解决吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:14:07.460

您需要将 JAR 文件添加到项目的构建路径中，然后将源附加到它们。

在 Package Explorer 或 Navigator 中右键单击您的项目，然后选择 Java Build Path：

![使用“添加外部 JAR...”添加 JAR 文件](../Images/9cf7bcf9196c6c9f59e9a09e90558a29.png)

单击“添加外部 JAR...”以添加 JAR 文件。[此问题](https://stackoverflow.com/questions/122160/is-there-an-easy-way-to-attach-source-in-eclipse)的答案提供了有关如何将源附加到 JAR 的信息。

# java - Servlet：严重：为 servlet 分配异常

> ID：12366201
> 
> 赞同：9
> 
> 时间：2012-09-11T09:00:52.317
> 
> 标签：java, exception, tomcat, servlets

以下堆栈跟踪是我尝试访问 servlet 时得到的，它似乎从 Tomcat 管理器运行良好。

```
11 Sep, 2012 11:50:12 AM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet LoginServlet as unavailable
11 Sep, 2012 11:50:12 AM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Allocate exception for servlet LoginServlet
java.lang.Error: Unresolved compilation problems: 
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    HttpServlet cannot be resolved to a type
    ServletConfig cannot be resolved to a type
    ServletException cannot be resolved to a type
    HttpServlet cannot be resolved to a type
    ServletContext cannot be resolved to a type
    ServletException cannot be resolved to a type
    HttpServletRequest cannot be resolved to a type
    HttpServletResponse cannot be resolved to a type
    ServletException cannot be resolved to a type
    request cannot be resolved
    The method getLoggedin() from the type LoginHandler refers to the missing type ServletException
    The method destroy() of type LoginManager must override or implement a supertype method
    HttpServlet cannot be resolved to a type

    at com.login.servlets.LoginManager.<init>(LoginManager.java:5)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149)
    at org.apache.catalina.core.StandardWrapper.allocate(StandardWrapper.java:827)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:129)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Unknown Source)
11 Sep, 2012 12:05:12 PM org.apache.catalina.core.ApplicationContext log
INFO: Marking servlet Log4JInitServlet as unavailable
11 Sep, 2012 12:05:12 PM org.apache.catalina.core.StandardContext loadOnStartup
SEVERE: Servlet /logintest threw load() exception
java.lang.Error: Unresolved compilation problems: 
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import javax.servlet cannot be resolved
    The import org.apache cannot be resolved
    The import org.apache cannot be resolved
    HttpServlet cannot be resolved to a type
    ServletConfig cannot be resolved to a type
    ServletException cannot be resolved to a type
    ServletContext cannot be resolved to a type
    BasicConfigurator cannot be resolved
    PropertyConfigurator cannot be resolved
    BasicConfigurator cannot be resolved

    at com.logger.WebLogger.<init>(WebLogger.java:5)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1149)
    at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1026)
    at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4421)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4734)
    at org.apache.catalina.core.StandardContext.reload(StandardContext.java:3461)
    at org.apache.catalina.manager.ManagerServlet.reload(ManagerServlet.java:943)
    at org.apache.catalina.manager.HTMLManagerServlet.reload(HTMLManagerServlet.java:557)
    at org.apache.catalina.manager.HTMLManagerServlet.doGet(HTMLManagerServlet.java:121)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:563)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:877)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:594)
    at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1675)
    at java.lang.Thread.run(Unknown Source) 
```

在 Eclipse 类路径中使用的所有 jars 都可以在 Tomcat lib 文件夹中找到。webapp 正在部署，没有任何错误日志，但是当我尝试访问一个 servlet 时，会发生此异常，并且我将其记录在 tomcat 日志中。有人能帮忙吗？

```
The package names are proper inside 'classes', also, the web.xml is proper. 
```

我不知道为什么会发生这种情况。还有某些其他 webapps，它们几乎使用相同的运行良好的库。期待有人可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T11:12:11.183

最后，弄错了。这是由 Eclipse 构建引起的问题。由于构建不正确，因此类文件已损坏。我清理了整个项目，重新构建，现在它工作正常。感谢您的回复。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:18:38.380

在查看了异常之后，你得到了一些你放错了 jar 文件的地方

(servlet-api.jar)。它应该在您的 Project/WEB-INF/lib 文件夹下。我认为会

如果您的 jar 文件位于上面指定的路径中，则可以使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T09:12:10.137

不知何故，你错过了`servlet-api.jar`. 它应该位于`tomcat\lib`文件夹中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-05T23:34:35.530

如果您收到此错误“严重：为 servlet 分配异常”以及“java.lang.InstantiationException”异常，请确保您的 servlet 类具有公共无参数构造函数，因为 servlet 容器需要能够实例化它。

如果您的 servlet 类没有定义显式的非零参数构造函数（通常是这种情况），编译器提供的默认构造函数就足够了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-30T14:05:33.100

我有同样的问题！花了2个小时寻找解决方案！就在这里！

> WebContent（在Dynamic Web Project下）-> WEB-INF-> lib（它是空的-好吧）->右键单击它（lib）->构建路径->用作源文件夹。

完毕！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T09:12:15.890

“ `java.lang.Error: Unresolved compilation problems`：”

说应用程序没有正确编译。请放入`servlet-api.jar`类路径中，不仅在项目的 lib 文件夹中，还要将其附加到类路径中。

请确保`tomcat/common/lib`文件夹中也有相同的 jar。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-08-07T17:29:47.720

我的案例是使用**Java 8 lamda 表达式**和不基于 Java 8 的旧版本 Rest

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-16T22:23:34.167

我还看到了这个异常，其中@Resource 注释导致两种技术相互踩踏（tomcat servlet api 3 和 spring）发生冲突。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-14T23:03:21.297

对我来说，它发生在我在 junit 测试中使用 Lambda 表达式时。在对测试发表评论后，服务器返回了正确的 api 响应。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-05-07T05:42:37.747

我遇到了类似的异常
从 java 8 迁移到 java 11 时出现以下错误

servlet [health-servlet] 的异常 org.apache.catalina.core.ApplicationContext.log Servlet.init() 抛出异常 java.lang.IllegalArgumentException

为了修复错误，我升级了 pom 中的版本

```
<jersey.version>2.23.2</jersey.version><!-- Remove this  -->
<jersey.version>2.30.1</jersey.version><!-- Add this  --> 
```

我的 web.xml 中有以下条目

```
 <servlet>
    <servlet-name>health-servlet</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.xyz.platform.registry.service.ServiceRegistryApplication</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-23T13:13:29.273

转到项目属性-> 部署程序集-> 检查 Maven 依赖项是否可见，如果它们丢失，我们也会得到相同的错误。我可以解决将 Maven 依赖项添加到部署程序集中的问题。

[在部署程序集中添加Maven依赖后，看起来像这样]

[https://i.stack.imgur.com/7iwaW.jpg](https://i.stack.imgur.com/7iwaW.jpg)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-10-28T11:44:43.447

我有两个使用相同路径值 ( `javax.ws.rs.Path`) 注释的类/服务。当 REST API 尝试自行初始化时，很难立即看到有关重复路径的错误。

# asp.net - Paypal 集成 后处理信息

> ID：12366210
> 
> 赞同：0
> 
> 时间：2012-09-11T09:01:36.200
> 
> 标签：asp.net, visual-studio-2010, c#-4.0, paypal, paypal-sandbox

我创建了一个简单`button`的，点击它直接到贝宝网站进行付款。

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">

    <input type="hidden" name="cmd" value="_xclick" />
    <input type="hidden" name="business" value="abhish_1347270213_biz@gmail.com" />

    <input type="Show" name="item_name" value="My painting" />
    <input type="Show" name="amount" value="10.00" /> 
    <input type="submit" value="Buy!" />
</form> 
```

现在我要做的是使用交易成功通知重定向到我自己的页面。

我已经阅读了网站文章，但没有什么能为我提供解决方案。需要有关此问题的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:18:52.657

使用 PayPal 即时付款通知 (IPN)，更多信息在这里：[https](https://www.paypal.com/cgi-bin/webscr?cmd=p/pdn/article_pdn_intro-outside) ://www.paypal.com/cgi-bin/webscr?cmd=p/pdn/article_pdn_intro-outside 。

这是一个代码示例：

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_xclick">
<input type="hidden" name="business" value="alanb@alanb.com">
<input type="hidden" name="undefined_quantity" value="1">
<input type="hidden" name="item_name" value="doodad from alanb.com">
<input type="hidden" name="item_number" value="dd01">
<input type="hidden" name="amount" value="4.99">
<input type="hidden" name="return" value="http://alanb.com/doodads/thanks.html">
<input type="hidden" name="cancel_return" value="http://alanb.com/doodads/canceled.html">
<input type="image" border="0" name="submit" src="http://images.paypal.com/images/x-click-but5.gif" alt="Effectuez vos paiements via PayPal : une solution rapide, gratuite et sécurisée">
</form> 
```

诀窍是由“返回”输入元素完成的；）。

在我的网站上设置 PayPal Integral Evolution 时，对我有很大帮助的另一件事是这个 PDF：[https](https://cms.paypal.com/cms_content/FR/en_US/files/developer/IntegralEvolution.pdf) ://cms.paypal.com/cms_content/FR/en_US/files/developer/IntegralEvolution.pdf 。它记录了所有字段、可能的值以及如何使用它们。

希望这会有所帮助，卡尔

# c# - .net 3.5 的 websockets 库

> ID：12366214
> 
> 赞同：11
> 
> 时间：2012-09-11T09:01:52.593
> 
> 标签：c#, .net, websocket

我需要在**.net 3.5 中使用 websockets。**，但是，大多数实现需要 .net 4 或 4.5 ...

有没有人知道或有关于积极维护并与.net 3.5 兼容的良好开源 C# websockets 实现的建议？

# c# - 在另一个项目中引用一个项目会创建不需要的依赖项

> ID：12366218
> 
> 赞同：0
> 
> 时间：2012-09-11T09:02:07.990
> 
> 标签：c#, reference, projects-and-solutions

我有一个项目`ProjectA`，我在其中保留实用程序类。我想在多个解决方案中使用这个项目，这样我就不必在每次更改`Project`.

但似乎有一个问题：如果我在 中引用`ProjectA`，除非旁边有已编译的`ProjectB`应用`ProjectB`程序，否则无法运行已编译的应用程序。`ProjectA`因此，如果输出的`ProjectB`是 ProjectB.exe，如果 ProjectA.exe 不在其旁边，则 ProjectB.exe 在执行时会出错。这是为什么？我只想使用`ProjectA`in 中的命名空间`ProjectB`，不需要`ProjectA`依赖`ProjectB`.

谁能告诉我如何在不需要输出的情况下引用`ProjectA`in来运行输出？`ProjectB``ProjectA``ProjectB`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:09:25.583

命名空间不限于一个程序集 - 如果您愿意，您可以在多个程序集中使用相同的命名空间，并且一个程序集可以包含任意数量的命名空间。

如果您从另一个程序集引用一个类/类型，那么当您运行原始程序集时，该程序集必须存在（或可定位）。如果您所做的只是编码，那么解决方案中的简单[项目参考就可以解决问题](http://weblogs.asp.net/scottgu/archive/2009/10/29/add-reference-dialog-improvements-vs-2010-and-net-4-0-series.aspx)。如果您没有源代码，`Project A`那么您将需要它的编译形式——没有它，CLR 无法检查它并知道它包含什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:18:06.827

您可能需要一个共享的 dll。

您已经在项目 A 中创建了实用程序类，因为它们在项目 A（应用程序 A？）中共享，现在您已经引入了项目 B（应用程序 B），并且正如您所说，它需要从 projectA.dll/ 中获取代码可执行程序。

因此，在您的解决方案中创建一个新项目（可能是 Ab.Shared.dll :-)）并将您的实用程序类移入其中。您现在可以从项目 A 和项目 B 中引用该 dll。

**更新**：刚刚阅读您关于吸出代码的评论。

共享 dll 是最常见的代码共享方式，但还有其他方式。从理论上讲，您可以简单地在两个项目中“包含”相同的 *.cs 文件并以这种方式共享它们（使用“添加现有项目”对话框中的下拉菜单并选择“添加为链接”）。但是在实践中，维护这种情况变得更加尴尬，因此大多数人使用共享 dll。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:03:58.960

在这种情况下，将`ProjectA`编译后的 dll 添加到您的 bin 文件夹中，并从您的其他项目中添加对该 dll 的引用。不要添加对您的`ProjectA`项目的引用。

当您使用 Visual Studio 添加对项目的引用时，添加引用 -> 项目，然后它需要编译项目并将 dll/exe 复制到另一个项目 bin 文件夹。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:07:39.077

在文本编辑器中打开您的**csproj**文件并插入 xml：

```
<Reference Include="AssemblyName.dll">
  <HintPath>$(EnvironmentVariable)\bin\AssemblyName.dll</HintPath>
  <Private>False</Private>
</Reference> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T09:12:09.877

如果我理解正确，您在 ProjectA.exe 中有要在 ProjectB.exe 中使用的代码，但在运行时，您希望运行 ProjectB.exe 而无需用户拥有 ProjectA.exe 的副本。

这是不可能的。当您使用来自另一个程序集的类型时，该程序集会在运行时加载。类型不会从 ProjectA 复制到 ProjectB。

在我看来，您应该将公共实用程序类提取到 ProjectUtility.dll 中，然后从您的 ProjectA.exe 和 ProjectB.exe 应用程序中引用它。

编辑： ILMERGE 可能是要走的路。有关详细信息，请参阅[C# 中的静态链接](https://stackoverflow.com/q/39116/385844)。

# spring - 我可以将 Atomikos 与 Apache DBCP 一起使用吗

> ID：12366220
> 
> 赞同：1
> 
> 时间：2012-09-11T09:02:16.197
> 
> 标签：spring, hibernate, transactions, connection-pooling, jta

顾名思义，我可以将 Atomikos JTA 事务管理器与 Apache DBCP 一起使用吗？如果是这样，我应该如何配置它？我正在使用 Spring & Hibernate。我正在尝试切换到 JTA 进行事务管理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:54:05.803

是的，你可以使用它。Atomikos 提供了一个包装器数据源，用于包装 DBCP 数据源。您的数据库和 jdbc 驱动程序应该支持 XA。

然后是通常的 spring 配置来设置一个 jta 事务管理器。

这个链接有详细的说明和配置。 [http://www.atomikos.com/Documentation/SpringIntegration](http://www.atomikos.com/Documentation/SpringIntegration)

# exception - 使用 gtkada 时如何管理异常

> ID：12366231
> 
> 赞同：1
> 
> 时间：2012-09-11T09:03:07.773
> 
> 标签：exception, gtk, ada, gnat

当我使用 gtkada 并且我的 GUI 正在运行时，不会管理任何异常并且程序总是崩溃。消息是

*此应用程序已请求运行时以不寻常的方式终止它。*

*请联系应用程序的支持团队以获取更多信息。*

一段测试代码如下：

```
 with GLib;          use GLib;
    with Gtk.Label;     use Gtk.Label;
    with Gtk.Window;    use Gtk.Window;
    with Gtk.Frame;     use Gtk.Frame;
    with Gtk.Button;    use Gtk.Button;
    with Gtk.Widget;    use Gtk.Widget;

    with Gtk.Handlers;
    with Gtk.Main;

    procedure gui_test_4 is
       Window          : Gtk_Window;
       Label           : Gtk_Label;
       Frame           : Gtk_Frame;
       Button_S        : Gtk_Button;
       General_Error   : exception;

       package Handlers is new Gtk.Handlers.Callback (Gtk_Widget_Record);
       package Return_Handlers is
          new Gtk.Handlers.Return_Callback (Gtk_Widget_Record, Boolean);

       function Delete_Event (Widget : access Gtk_Widget_Record'Class)
          return Boolean is
       begin
          return False;
       end Delete_Event;

       procedure Destroy (Widget : access Gtk_Widget_Record'Class) is
       begin
          Gtk.Main.Main_Quit;
       end Destroy;

       procedure Clicked (Widget : access Gtk_Widget_Record'Class) is
       begin

          raise General_Error;
        exception
            when General_Error =>
              null;

       end Clicked;

    begin
       Gtk.Main.Init;
       Gtk.Window.Gtk_New (Window);
       Set_Default_Size (Window, 200, 200);
       Gtk.Window.Set_Title (Window, "GUI_Test_4");
       Gtk_New (Frame);
       Add (Window, Frame);
       Gtk_New (Button_S, "Try");
       Add (Frame, Button_S);

       Return_Handlers.Connect
       (  Window,
          "delete_event",
          Return_Handlers.To_Marshaller (Delete_Event'Access)
       );
       Handlers.Connect
       (  Window,
          "destroy",
          Handlers.To_Marshaller (Destroy'Access)
       );
       Handlers.Connect
       (  Button_S,
          "clicked",
          Handlers.To_Marshaller (Clicked'Access)
       );

       Show_All (Window);
       Show (Window);

       Gtk.Main.Main;

    end gui_test_4; 
```

按下按钮时，会引发异常，但应在同一过程中对其进行管理，但不是这样，而是整个程序崩溃。

知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T18:39:52.623

Looks like a job for the debugger to me.

In the comments it was mentioned that others are able to successfully run and build this same code. That could mean that your version of GTKAda has issues. It could instead mean that there's a real bug in there, but how/if it expresses depends on what garbage values happened to be loaded into what memory areas when the program starts up.

You might start off by making sure you have the latest version of GTKAda. But after that, fire up the debugger and try to see where its crashing. Note that in Ada programs often crashes happen during package elaboration before the first line of code in your main even gets called. If you are using Gnat you can step through the elaboration process in GDB as well though. With other compilers, you may have to find some elaboration code to try to put breakpoints into to catch it early enough.

# android - 我应该使用哪个框架来构建 Android 游戏？

> ID：12366236
> 
> 赞同：0
> 
> 时间：2012-09-11T09:03:19.687
> 
> 标签：android, game-engine, game-physics

我知道我应该用谷歌搜索，但我已经尝试过了，但没有成功的答案。有人可以指导我或建议我应该做些什么来开发android游戏（它有扔球等动作）我已经开发了一个名为Grepocket的应用程序）但我是游戏开发的新手。所以我帮帮我吧伙计们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:07:37.393

看看[libgdx](http://code.google.com/p/libgdx/) ，它有很好的文档记录和高效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:08:06.127

如果是 2D 游戏，我会推荐你​​ AndEngine [http://www.andengine.org/](http://www.andengine.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:08:41.870

有很多游戏库，例如`AndEngine`，`libgdx`等等。但我更喜欢`libgdx`，因为从相同的代码提供桌面应用程序也很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:24:58.793

有很多可供选择:) 对于具有硬件加速画布（ICS 和前向？）的 android 版本，这听起来很合适，但如果您针对较旧的版本，OpenGL 可能会感兴趣。使用 OpenGL，您可以从 1.1 或 2.0 中进行选择，我想说 1.1 对初学者来说更容易，而 2.0 更强大。如今，大多数设备都支持 2.0。然后你必须决定 OpenGL 使用哪种语言。您可以从 Java、RenderScript 和 C/C++ 中进行选择。Java 提供了最简单的系统集成，并且对许多人来说更容易开发。RenderScript 可在不同的 android 目标之间移植。如果操作正确，C/C++ 应该会提供最佳性能，并且您可能更容易移植到其他平台。最后，您可以在 web 视图中执行此操作，并在多个平台上获得可移植性。

此外，还有几个框架可供选择，包括 gwt、playn、unity……我前一阵子玩过 playn，发现它相当不完整。

今天的许多游戏都使用物理引擎。Box2D 非常受欢迎。如果您需要 3D，我会考虑 Bullet，但还有更多。如果你喜欢冒险，你可以实现你自己的，例如使用 verlets。

前段时间我为我给的一门课程写了一个小游戏。我发现使用画布对我来说是最好的选择，即使它没有硬件加速。在游戏中，我使用 JBox2D 作为物理。它就像一个魅力:)

鉴于此，有很多方法可以做到这一点。如果这是您的第一款游戏，您应该专注于简单性。使用您知道的工具，以便您可以专注于游戏。在它成为问题之前不要担心性能（虽然不要做愚蠢的事情;））。观看有关该主题的一些 Google IO 演讲（它们都在 youtube 上）。他们提供了大量有价值的信息。

# jquery - Backbone.js 模型 (2)

> ID：12366240
> 
> 赞同：1
> 
> 时间：2012-09-11T09:03:34.530
> 
> 标签：jquery, backbone.js, backbone-events, backbone-views

我正在使用主干 JS，我在显示模型中的数据时遇到了麻烦。谁能知道这是如何工作的？TIA

VIEW.JS -

```
 render: function() {
             ///EDITED TO SIMPLIFY      

            var toModel = new tModel();//tModel is the name of the model    
    console.log(toModel.get('data'));//?? UNDEFINE

  } 
```

模型.JS——

```
 data:[
        { text: "Google", href: "http://google.com" },
        { text: "Facebook", href: "http://facebook.com" },
        { text: "Youtube", href: "http://youtube.com" }
    ], 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:25:20.620

[http://jsfiddle.net/g3U7j/6/](http://jsfiddle.net/g3U7j/6/)

模型.js

```
MyModel = Backbone.Model.extend({
    defaults: {
        data: [
            {
            text: "Google",
            href: "http://google.com"},
        {
            text: "Facebook",
            href: "http://facebook.com"},
        {
            text: "Youtube",
            href: "http://youtube.com"}
        ]
    }
}); 
```

视图.js

```
MyView = Backbone.View.extend({
    initialize: function() {
        var x = this.model.get('data');
        console.log(x);
    }
});

var View = new MyView({
    model: new MyModel
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:07:28.763

它是`this.model.get('data')`（删除模型中的大写 M，它指的是类而不是实例成员）。

此外，如果您`render`直接从事件处理程序调用，则需要确保`this`在渲染方法中正确绑定到类实例（正常的东西使用`that`而不是`this`在 javascript 中；我主要在 Coffeescript 中这样做，这更容易一些）。

# android - 从不同的应用程序活动中调用另一个应用程序活动？

> ID：12366242
> 
> 赞同：2
> 
> 时间：2012-09-11T09:03:39.863
> 
> 标签：android

```
Intent intent = new Intent();
intent.setClassName("another_app_package_name","another_app_package_name.class_name_in_that_package");

startActivity(intent); 
```

得到**ActivityNotFoundException**？

如何解决这个问题呢？这个问题也较早发布，但没有解决方案。我清单文件的应用程序要调用其活动，我也使用了意图过滤器。

`Activity to be called by some other application's activity`

```
<activity 
     android:name="com.example.custompermission.PrivActivity">
     android:permission="abc.permission.STARTMYACTIVITY">
     <intent-filter >
          <action android:name="android.intent.action.MAIN" />
          </intent-filter>
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:06:00.190

检查这个

```
 Intent intent = new Intent(); 
 intent.setClassName(another_app_package_name.this,another_app_package_name.class_name_in_that_package.class); 
```

开始活动（意图）；

并在 manifest.xml 添加这个

```
 <activity  android:name="another_app_package_name.class_name_in_that__package"   android:configChanges="orientation|keyboardHidden"></activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:13:39.360

在清单文件中，您可以这样做：

```
<activity  android:name="another_app_package_name.class_name_in_that__package"></activity> 
```

您应该在清单文件中添加活动，您尝试从第一个活动中调用该活动。

您需要在清单文件中添加这两个活动：例如：

```
Intent intent = new Intent (HomePage.this, Second.class);
                startActivity(intent);

in manifest: <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".HomePage"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name =".Second"></activity>
    </application> 
```

一次，清理项目并运行。

# batch-file - MS DOS 替换：到 - 在 bat 文件的字符串中

> ID：12366248
> 
> 赞同：0
> 
> 时间：2012-09-11T09:03:52.293
> 
> 标签：batch-file, dos

有一个简单的问题要做：

```
set str=800:801 
```

我需要将“：”符号替换为“-”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:10:26.043

你可以试试这个：SET str=%str::=-%

# facebook - facebook login mobile $fb_user = $facebook->getUser() 在第一次加载时不起作用，但在浏览器上工作正常

> ID：12366249
> 
> 赞同：1
> 
> 时间：2012-09-11T09:03:57.037
> 
> 标签：facebook, mobile, login

当移动用户尝试 fb 登录我的网站时，我遇到了问题，而登录在桌面浏览器上工作得很好。我已将 facebook 应用程序开发部分中的移动 URL 设置为与浏览器相同。

在第一次加载时，它无法获得 '$fb_user = $facebook->getUser();' （它返回一个 0）然后重新加载，因为它第一次没有登录，然后我得到了 fb 信息（使用“CSRF 状态令牌与提供的不匹配。”）。然后我又重新加载了一次，它没有再次获取 fb_user，因此卡在了这个登录/无登录循环中。使用普通浏览器，它会第一次获取 $fb_user ，然后后续代码适用于重定向和所有内容。

fb 代码如下所示：

```
function fb_fresh() {

  global $user, $loginUrl;

  //Add the FB library code. This is version 3.1.1\. have updated this to the latest version as of 10 Sept 2012
  $path_fb = "sites/all/modules/custom/fb/facebook.php";
  require_once $path_fb;  //make sure curl is installed to work

  // Create our Application instance. (not revealed for obvious reasons)
    $facebook = new Facebook(array('appId' => '###','secret' => '###','cookie' => true,));

  // Get User array
  $fb_user = $facebook->getUser();
  //printing error logs to see where things go wrong.. 
  error_log("function fb(). fbuser = " . $fb_user . ". Drupal user->uid = " . $user->uid, 0);

  // $fb_user = 0 when no logged-in user. https://developers.facebook.com/docs/reference/php/facebook-getUser/
  if ($fb_user != "0") {
    $logoutUrl = $facebook->getLogoutUrl();
    $sessionURL = "<a href='" . $logoutUrl . "' target='_top'>Logout</a>";
  } else {

      //Get the permissions + once the user has accepted permissions send them to a page that redirects them back to the Facebook app, which then automatically goes to the mobile version if necessary
      $params_login = array(
          'scope' => 'email, user_location, friends_location, user_status, friends_status, user_checkins, user_work_history, user_education_history, user_birthday, user_relationships, friends_checkins',
          'redirect_uri' => 'https://' . $_SERVER['HTTP_HOST'] . '/fb_redirect', 
      );

      $loginUrl = $facebook->getLoginUrl($params_login);
      $sessionURL = "<a href='" . $loginUrl . "' target='_top'>Login</a>";

      //this triggers fb dialog box when app request is sent and if user goes to certain page without logging in. works fine.

      if ($fb_user == 0 && arg(0) == 'page') {
        print "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
        error_log("function fb(). JS redirect to LOGIN URL triggered..", 0); //loginUrl = " . $loginUrl

        //clear session variables to start over 
        unset($_SESSION);
        error_log("function fb(). clear session ", 0);

      }

    error_log("function fb(). NOT logged in.", 0); //loginUrl = " . $loginUrl
  }

  if ($fb_user) {

    try {

      $access_token = $facebook->getAccessToken();
      $facebook->setAccessToken($access_token);

      //Proceed knowing you have a logged in user who's authenticated.
      //Save facebook data as session variables
      $_SESSION['user_profile'] = $facebook->api('/me');
      $_SESSION['user_relationships'] = $facebook->api('/me/family'); 
      $_SESSION['user_friends'] = $facebook->api('/me/friends');
      $_SESSION['user_checkins'] = $facebook->api('/me/statuses');

      error_log("function fb(). fbuser = " . $fb_user . ". facebook user_profile->id = " . $_SESSION["user_profile"]["id"], 0);

      return array($_SESSION['user_profile'], $_SESSION['user_relationships'], $_SESSION['user_checkins'], $_SESSION['user_friends'], 1);

    } catch (FacebookApiException $e) {

      error_log("function fb(). " . $e);

    }
  }

  return array(false, false, false, false, false);
} 
```

# android - 按钮选择器不起作用

> ID：12366256
> 
> 赞同：4
> 
> 时间：2012-09-11T09:04:15.373
> 
> 标签：android

我想在按钮不可点击时更改按钮的背景。我为此使用了选择器，但在按钮仍然不可点击的情况下它不起作用。

这是选择器文件：

```
<?xml version="1.0" encoding="utf-8"?>
<selector
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_enabled="false"  android:drawable="@drawable/button_lightgrey" />
    <item  android:state_pressed="true" android:state_enabled="true" android:drawable="@drawable/button_blue"/> 
    <item android:state_focused="true" android:drawable="@drawable/button_darkgreen"  /> 
    <item  android:drawable="@drawable/button_lightgreen" /> 
</selector> 
```

这是我使用此选择器文件的按钮：

```
<Button
                android:id="@+id/PrevButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_centerInParent="true"
                android:layout_marginLeft="5.0dip"
                android:layout_weight="1.0"
                android:background="@drawable/ibtn"
                android:onClick="onPrevButtonClick"
                android:text="Prev" /> 
```

请帮助我。所有其他功能都在选择器文件中工作，但只有不可点击的按钮案例不起作用。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:36:55.227

而不是 button.setClickable(false) 做 button.setEnabled(false) 并使用相同的选择器 xml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:11:51.040

只需使用以下修改您的选择器`selector.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item android:state_focused="false" android:state_selected="false"
        android:state_pressed="false" android:drawable="@android:color/transparent" />
    <item android:state_focused="false" android:state_selected="true"
        android:state_pressed="false" android:drawable="@drawable/round_corner_button_sort" />

    <!-- Focused states -->
    <item android:state_focused="true" android:state_selected="false"
        android:state_pressed="false" android:drawable="@drawable/round_corner_button_sort" />
    <item android:state_focused="true" android:state_selected="true"
        android:state_pressed="false" android:drawable="@drawable/round_corner_button_sort" />

</selector> 
```

希望这对您有所帮助。

**编辑**

根据您的评论，您不能对按钮使用选择器，该按钮的状态为 false( `button.setclickable(false);`) 在这种状态下，您不能使用您的`selector`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:13:37.583

这可能会帮助你

我认为在您的选择器文件中有问题，请尝试如下选择器文件

请根据需要更改图像

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/img_btn_repeat_pressed"
        android:state_focused="true"
        android:state_pressed="true" />
    <item android:drawable="@drawable/img_btn_repeat_pressed"
        android:state_focused="false"
        android:state_pressed="true" />
    <item android:drawable="@drawable/img_btn_repeat_pressed" android:state_focused="true" />
    <item android:drawable="@drawable/img_btn_repeat"
        android:state_focused="false"
        android:state_pressed="false" />
</selector> 
```

# cg - CgFX 几何着色器

> ID：12366258
> 
> 赞同：1
> 
> 时间：2012-09-11T09:04:29.080
> 
> 标签：cg, geometry-shader

如何在 CgFX 中使用几何着色器？实际上如何在“技术”中指定几何着色器？

清单如下，顶点和片段着色器编译得很好。但是“NVIDIA FX Composer 2.5”`'error C3001 no program defined'`在我添加`'GeometryProgram'`到`'technique'`.

```
float4x4 WorldITXf : WorldInverseTranspose;
float4x4 WorldViewProjXf : WorldViewProjection;
float4x4 WorldXf : World;

struct appdata
{
    float4 Position : POSITION;
    float4 Color    : COLOR0;
};

struct vertexOutput
{
    float4 Position : POSITION;
    float4 Color : COLOR0;
};

TRIANGLE void gshader1(AttribArray<float4> pos : POSITION,
                      AttribArray<float4> col : COLOR0)
{
//    some code will be here;
}

vertexOutput vshader1(appdata IN)
{
    vertexOutput OUT;
    float4 Po = float4(IN.Position.xyz,1.0f);
    OUT.Position = mul(WorldViewProjXf, Po);

    OUT.Color = IN.Color;

    return OUT;
}

float4 fshader1(vertexOutput IN) : COLOR
{
    return  IN.Color;
}

technique Tec1 {
    pass p0 {
        GeometryProgram = compile glslg gshader1();
        VertexProgram = compile glslv vshader1();
        FragmentProgram = compile glslf fshader1();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:00:33.260

解决了。配置文件有问题`'glslg'`，更改它以`'gp4gp'`解决问题。

# c# - 触发特定时间的 MouseMove 事件

> ID：12366263
> 
> 赞同：0
> 
> 时间：2012-09-11T09:04:40.973
> 
> 标签：c#, winforms, menu

我有一个**从 ToolStripMenuItem Class 派生**的自定义**CustomToolStripMenuItem**。在那个自定义类“ **CustomToolStripMenuItem** ”中，我**覆盖了 OnPaint()、OnMouseMove() 和 OnMouseDown() 事件**。在这里，*我想添加一个矩形以显示在每个子菜单上，以从自定义工具条菜单项中删除该菜单项。**当用户将鼠标移动到矩形区域时，它会变回颜色，表明用户想要删除该项目。*我通过读取 xml 文件来添加这些菜单。

 ********这里的主要问题是，当我将鼠标从一个菜单项快速移动到另一个菜单项时，上一项也显示为 selected*。 **我怎样才能确保当鼠标移动到其他菜单项时，以前的选择应该被删除。**

我猜什么，**我需要在特定时间重复鼠标移动事件**（xml文件中的总项目），但是**如何使用鼠标事件来做到这一点**？任何帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:16:06.770

如果快速鼠标移动绕过您当前的 MouseMove 事件，您还可以将[MouseLeave](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mouseleave.aspx)事件与当前事件一起使用！*******

# css - 全局 CSS 主题与组件特定的本地样式表组合

> ID：12366265
> 
> 赞同：1
> 
> 时间：2012-09-11T09:04:43.420
> 
> 标签：css, themes, stylesheet

我正在创建一个带有自包含 UI 组件的 moduler html/js 应用程序。我的每个 UI 组件都可能有自己的模板文件（结构）、js 文件（行为）和 css 文件（演示）。

*   现在我希望这些组件有一个带有自己的本地 css 文件的“默认”演示文稿
*   这不是问题，我可以在组件 'local' css 上定义默认样式
*   但除此之外我也需要全局主题，主题 css 定义了“整个应用程序”的样式
*   如果用户应用了主题，则所有本地组件样式都应被主题 css 覆盖

我知道我可以通过将全局主题 css 上的所有样式标记为“重要”来做到这一点。但我不想走那条路。关于如何解决这个问题的任何其他建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:21:26.397

如果被设置样式的元素是通过相同的选择器处理的，例如`#something li`在所有样式表中，那么稍后包含的样式表将覆盖以前设置的任何内容（除非某些内容是“重要的”）。这应该允许您使用主题 - 只需在应用本地样式后导入这些主题。

我不确定我是否理解您关于本地和全球样式的问题。但是，只要您为元素提供正确的名称，每个组件的样式不应干扰全局样式。`.some-table tr td .another- table tr td { ... }`（出于渲染性能和可读性的原因，使用类/id 名称而不是长嵌套选择器是一个很好的做法）

换句话说，您可以在每个页面中写下这些：

1.  包括基本的默认布局
2.  用全局布局覆盖基础
3.  再次用用户定义的主题覆盖

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:45:33.370

鉴于您构建 RequireJS 的方式，我建议如下：

*   允许或要求在每个组件中使用 style.css 进行样式设置
*   为主题提供结构，例如`themes/`文件夹，该文件夹必须与组件文件夹具有相同的文件夹
*   在优化或拉取 CSS 时，如果定义了主题，请从主题文件夹而不是主组件文件夹中拉取 CSS，或者如果未找到，则回退到组件 style.css（可能使此回退可配置），并发出警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-14T11:48:24.770

您可以使用该属性注入您的样式元素（对于每个组件）`scope`，因此它只会影响它注入的 DOM 范围，而不是从根元素 (HTML) 开始。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style#A_scoped_stylesheet](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/style#A_scoped_stylesheet)

```
<article>
  <div>The scoped attribute allows for you to include style elements mid-document.
   Inside rules only apply to the parent element.</div>
  <p>This text should be black. If it is red your browser does not support the scoped attribute.</p>
  <section>
    <style scoped>
      p { color: red; }
    </style>
    <p>This should be red.</p>
  </section>
</article> 
```

* * *

浏览器支持（当前）：`Chrome`和`FF`

# java - arg 不能被强制转换为 java.util.List？谁能告诉我我的代码有什么问题？

> ID：12366268
> 
> 赞同：1
> 
> 时间：2012-09-11T09:04:50.490
> 
> 标签：java, python, jython, grinder

```
myDict = {'itemkey1':'itemvalue1', 'itemkey2':'itemkey2','itemkey3':'itemvalue3','itemkey4':'itemvalue4'};

event = portTest.event(myDict); 
```

我收到以下错误

`Aborted run: Jython exception: TypeError:arg can't be coerced to java.util.List`

`myDict`是键值数组。

我希望我在 datalist 中传递了正确的语法，`myDict`因为`keyvalue[]`它刚刚获得了键值对。

```
public Response event(KeyValue[] dataList) 
```

我正在使用磨床工具从 jython 脚本调用 java 中的事件函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:22:53.693

您需要将字典转换为一系列键和值：

```
def chainDict(mapping):
    items = []
    for item in mapping.iteritems():
        items.extend(item)
    return items

event = portTest.event(chainDict(myDict)) 
```

这会将一个列表传递`[keyFoo, valueFoo keyBar, valueBar]`给该`event`方法，其中键和值是成对的，但顺序是任意的。

如果没有`itertools`可用的模块，`chain`可以定义为：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:11:20.727

您需要显式传递`myDict.items()`而不是传递`myDict`对`KeyValue`，传递`myDict.keys()`键或`myDict.values()`错误，传递值......

# java - 如何获取远程linux服务器文件输入流

> ID：12366271
> 
> 赞同：0
> 
> 时间：2012-09-11T09:05:00.140
> 
> 标签：java, linux, ssh

我正在尝试读取远程 linux 服务器中的文件。但我不知道如何使用 java 获取文件的输入流。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:19:21.187

假设“*远程 linux 服务器*”是指“*远程 linux shell* ”，您应该使用像[JSch](http://www.jcraft.com/jsch/ "JSch")这样的 ssh 库。[您可以在此处](http://www.jcraft.com/jsch/examples/ScpFrom.java.html)找到文件下载示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:13:27.293

假设您有一个与服务器的有效连接并可以访问该文件，您可以使用`File`该文件的 URI 创建一个对象：

```
File f = new File(uri);
FileInputStream fis = new FileInputStream(f); 
```

URI 应该是文件的 URI，例如“file://server/path/to/file”。另请参阅[File(URI) 的 Javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#File%28java.net.URI%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:19:44.150

也许SSHJ可以帮助你？[https://github.com/shikhar/sshj](https://github.com/shikhar/sshj)

图书馆的特点包括：

*   读取 known_hosts 文件以进行主机密钥验证
*   公钥、密码和键盘交互认证
*   命令、子系统和外壳通道
*   本地和远程端口转发
*   scp + 完整的 sftp 版本 0-3 实现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:34:30.413

这取决于文件如何可用。是通过 HTTP、FTP、SFTP 还是通过您自己编写的服务器？

如果你想通过 HTTP 获取文件，你可以使用这个：

```
HttpURLConnection connec = (HttpURLConnection)new URL("http://host/file").openConnection();
if(connec.getResponseCode() != connec.HTTP_OK)
{
    System.err.println("Not OK");
    return;
}
System.out.println("length = " + connec.getContentLength());
System.out.println("Type = " + connec.getContentType());
InputStream in = connec.getInputStream();
//Now you can read the file content with in 
```

还有非常适合 SFTP / SCP 的[Jsch库](http://www.jcraft.com/jsch/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:47:51.557

您可以使用任何 ssh java lib，如其他答案中所述，或者将文件挂载目录作为 NFS 共享文件夹。安装后，您可以使用通常的 java API 来访问文件。

[例子](http://kb.open-e.com/How-do-I-mount-NFS-shares-under-the-Linux-console_95.html)

# plone - Plone：TypeError：无法在采集包装器中腌制对象

> ID：12366274
> 
> 赞同：4
> 
> 时间：2012-09-11T09:05:36.243
> 
> 标签：plone, zope

我正在使用/修复`collective.logbook`来保存网站上的错误。目前，我的网站上的日志在某些例外情况下失败：

```
 File "/srv/plone/xxx/src/collective.logbook/collective/logbook/events.py", line 101, in hand
    transaction.commit()
  File "/srv/plone/buildout-cache/eggs/transaction-1.1.1-py2.6.egg/transaction/_manager.py", line 8
    return self.get().commit()
  File "/srv/plone/buildout-cache/eggs/transaction-1.1.1-py2.6.egg/transaction/_transaction.py", li
    self._commitResources()
  File "/srv/plone/buildout-cache/eggs/transaction-1.1.1-py2.6.egg/transaction/_transaction.py", li
    rm.commit(self)
  File "/srv/plone/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/Connection.py", lin
    self._commit(transaction)
  File "/srv/plone/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/Connection.py", lin
    self._store_objects(ObjectWriter(obj), transaction)
  File "/srv/plone/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/Connection.py", lin
    p = writer.serialize(obj)  # This calls __getstate__ of obj
  File "/srv/plone/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/serialize.py", line
    return self._dump(meta, obj.__getstate__())
  File "/srv/plone/buildout-cache/eggs/ZODB3-3.10.5-py2.6-linux-x86_64.egg/ZODB/serialize.py", line
    self._p.dump(state)
TypeError: Can't pickle objects in acquisition wrappers. 
```

这显然是因为日志试图写入一个错误记录，该记录引用了一个获取的对象。我认为解决方案是从这些对象中清除错误。

但是，我怎样才能弄清楚什么是坏对象，它如何最终到达事务管理器以及导致此问题的 Python 对象引用是什么？或者任何可以帮助我调试这个问题的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:57:21.863

如果你能可靠地重现这个，你可以放入一个打印语句或`pdb.set_trace()`ZODB 连接`_register`方法（在鸡蛋`ZODB/connection.py`里面）：`ZODB`

```
def _register(self, obj=None):
    # ... skipped lines ...

    if obj is not None:
        self._registered_objects.append(obj)
        # Insert print statement here. 
```

现在，每当任何对象被标记为已更改或作为新对象添加到连接中时，它都会打印到控制台。这应该可以帮助您进行调试过程。祝你好运！

# jquery - Requests sent using PUT to cloudbees apps do not go through

> ID：12366287
> 
> 赞同：0
> 
> 时间：2012-09-11T09:06:27.633
> 
> 标签：jquery, post, tomcat7, put, cloudbees

I'm trying to send a RESTful request to my java web app hosted on cloudbees.
I'm using jQuery like so:

```
 $.ajax({
          url: '/api/users/',
          type: 'PUT',
              dataType: 'json',
              data: {
                fbId:       facebookUserId == null ? '' : facebookUserId,
                fbName:     facebookUserName,
                lnId:       linkedInUserId == null ? '' : linkedInUserId,
                lnName:     linkedInUserName
              },
          success: function(response) { 
              internalGetConfiguration();
          }
    }); 
```

Using PUT (as in the code snippet above) causes tomcat to not pass through the parameters (fbId etc. don't get parsed or never arrive, I don't know, but I can see that they are sent). If I change to POST it goes through just fine.

Is is not possible to use PUT/DELETE with Cloudbees hosting?? is there some configuration that I need to add in order for it to work, or do I need to format it somehow?

I've seen another post regarding google app engine that it also has this issue (or at least HAD), is this a known issue at cloudbees?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:00:33.133

According to [this thread](http://www.mail-archive.com/users@tomcat.apache.org/msg75469.html) on the Tomcat user group, Tomcat's implementation of the getParameter family of utility methods only supports auto-parsing of a x-www-form-urlencoded content body for POST/GET requests. The behavior is not nailed down by the Servlet spec, so may vary between Servlet engines. In REST semantics, PUT requests are generally meant to be a way to replace the content of the resource, so being conservative about auto-manipulating the content body doesn't seem inappropriate.

To ensure that your code works across all Java EE deployment environments, your best bet is to directly parse the content body of the HTTP request from inside your application. The [Apache HttpComponents](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html#parse%28org.apache.http.HttpEntity%29) library has some functionality for parsing form encoded content that may help.

# javascript - RequireJS 的文本插件的 PhoneGap/cordova 问题

> ID：12366291
> 
> 赞同：6
> 
> 时间：2012-09-11T09:06:34.867
> 
> 标签：javascript, cordova, requirejs, cordova-2.0.0

我正在尝试通过[PhoneGap](http://phonegap.com/)运行一个简单的 Web 项目。该站点使用[RequireJS](http://requirejs.org/)异步加载模块。它还有我通过[RequireJS 文本插件加载的](https://github.com/requirejs/text)[Handlebars](http://handlebarsjs.com/)模板。

当从本地 HTTP 服务器提供服务时，该站点工作正常。但是在设备上它无法呈现。在 PhoneGap 上进行调试很棘手（尽管[可以在某种程度上完成](http://debug.phonegap.com)），但据我所知，问题与使用 RequireJS 文本插件加载这些模板有关。

PhoneGap 提供的基于 weinre 的调试器在控制台中显示错误字符串：

> JSCallback 错误：请求失败。

谁能推荐一个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T19:40:37.720

例如，当模板托管在与运行 javascript 的域不同的域时，文本插件可能会产生问题。在这种情况下，由于跨源请求的安全限制，插件将假定您正在下载模板的编译版本，并附`.js`加到文件定位器。

如果您可以控制服务器，则可以检查是否请求了错误的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T04:22:10.190

使用 safari 在您的移动设备/模拟器上调试该站点，它应该准确地告诉您网络选项卡中哪个请求失败。

请参阅[http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-using-web-inspector-to-debug-mobile-safari/)

# biztalk - 具有实例验证的自定义 XSLT

> ID：12366294
> 
> 赞同：0
> 
> 时间：2012-09-11T09:06:47.450
> 
> 标签：biztalk, biztalk-2010, biztalk-mapper

我有一张使用自定义 XSLT 的地图。在 VS 中运行“测试地图”时，即使在不符合目标模式的“失败”实例上，我也会得到预期的结果。但是，当部署到我的 BizTalk Server 时，“失败”实例不会失败。

所以问题是，当使用自定义 XSLT 时，实例是否没有针对 XSLT 中提供的源和目标模式进行验证？

如果不是，那么在使用可视映射器时在地图上应用了什么，因为这似乎有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:24:32.050

出于性能原因，在 BizTalk 中的运行时处理期间，架构验证从不默认发生。

您在设计时观察到失败的实例，因为您在 Visual Studio 中设置了“检查输出实例验证”属性。这种行为在运行时不存在，因为到那时，您的文档应该已经在单元和集成测试期间得到验证。

如果您需要运行时验证，您可能需要在下游执行验证 XmlReceive Pipeline，例如在订阅管弦乐队中。

# xml - 使用 xslt 转换嵌套的子节点

> ID：12366298
> 
> 赞同：1
> 
> 时间：2012-09-11T09:06:58.840
> 
> 标签：xml, xslt, xpath

**XML 数据文件**

```
<?xml version="1.0" encoding="utf-8"?>
<page>
    <tab dim="70">

        <tab dim="50">
        alpha

        </tab>
        <tab dim="50">
        alpha

        </tab>

    </tab>
    <tab dim="30">
        gama
    </tab>
</page> 
```

**XSLT 文件**

```
<?xml version="1.0" encoding="utf-8" ?>
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml" version="1.0"
encoding="iso-8859-1" indent="yes"/>

<xsl:template match="/">
    <xsl:text disable-output-escaping='yes'>&lt;!DOCTYPE html&gt;</xsl:text>
    <html>
    <head>
        <title>Title</title>
        <link type="text/css" href="/css/framework.css" rel="stylesheet"/>

    </head>
    <body>
    <div id="page-base">
        <xsl:for-each select="//tab">
        <div class="wrapper tab">
            <xsl:attribute name="style"> 
                width:<xsl:value-of select="@dim" />%;
                min-width:<xsl:value-of select="@dim" />%;
                max-width:<xsl:value-of select="@dim" />%;
            </xsl:attribute>
            <xsl:value-of select="." />
        </div>
        </xsl:for-each>
    </div>
    </body>
    </html>
</xsl:template>

</xsl:stylesheet> 
```

**输出**

```
<!DOCTYPE html>
<html>
<head>
<title>Title</title>
<link rel="stylesheet" href="/css/framework.css" type="text/css">
</head>
<body>
<div id="page-base">
 <div class="wrapper tab" style=" width:70%; min-width:70%; max-width:70%; ">
   alpha alpha   
 </div>
 <div class="wrapper tab" style=" width:50%; min-width:50%; max-width:50%; "> alpha </div>
 <div class="wrapper tab" style=" width:50%; min-width:50%; max-width:50%; "> alpha </div>
 <div class="wrapper tab" style=" width:30%; min-width:30%; max-width:30%; "> gama </div>
</div>
</body> 
```

**期望的输出**

```
<!DOCTYPE html>
<html>
<head>
<title>Title</title>
<link rel="stylesheet" href="/css/framework.css" type="text/css">
</head>
<body>
<div id="page-base">
 <div class="wrapper tab" style=" width:70%; min-width:70%; max-width:70%; ">
  <div class="wrapper tab" style=" width:50%; min-width:50%; max-width:50%; "> alpha </div>
  <div class="wrapper tab" style=" width:50%; min-width:50%; max-width:50%; "> alpha </div>
 </div>
 <div class="wrapper tab" style=" width:30%; min-width:30%; max-width:30%; "> gama </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:39:30.830

关键是根本不用`<xsl:for-each>`。请改用模板匹配。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:template match="/">
    <html>
      <head>
        <title>Title</title>
        <link type="text/css" href="/css/framework.css" rel="stylesheet"/>
      </head>
      <body>
        <xsl:apply-templates />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="page">
    <div id="page-base">
      <xsl:apply-templates />
    </div>
  </xsl:template>

  <xsl:template match="tab">
    <div class="wrapper tab" style="width:{@dim}%; min-width:{@dim}%; max-width:{@dim}%;">
      <xsl:apply-templates />
    </div>
  </xsl:template>
</xsl:stylesheet> 
```

结果：（另见[http://xsltransform.net/gWmuiK6](http://xsltransform.net/gWmuiK6)）

```
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Title</title>
      <link type="text/css" href="/css/framework.css" rel="stylesheet">
   </head>
   <body>
      <div id="page-base">
         <div class="wrapper tab" style="width:70%; min-width:70%; max-width:70%;">
            <div class="wrapper tab" style="width:50%; min-width:50%; max-width:50%;">
               alpha

            </div>
            <div class="wrapper tab" style="width:50%; min-width:50%; max-width:50%;">
               alpha

            </div>
         </div>
         <div class="wrapper tab" style="width:30%; min-width:30%; max-width:30%;">
            gama

         </div>
      </div>
   </body>
</html> 
```

要消除输出中的空白，您需要做的就是添加另一个模板：

```
<xsl:template match="tab/text()">
  <xsl:value-of select="normalize-space()" />
</xsl:template> 
```

在某些特定情况下，`<xsl:for-each>`使用正确的东西。这不是其中的一个。

每当您想使用`<xsl:for-each>`时，您都应该停下来思考。在绝大多数情况下`<xsl:apply-templates>`是你真正想要的。

仅在`<xsl:for-each>`您找到*反对* `<xsl:apply-templates>`. 如果您想不出一个这样的原因，那么可能没有。

* * *

要输出出现在输入中的节点而不更改它们，请添加标识模板：

```
<xsl:template match="@* | node()">
  <xsl:copy>
    <xsl:apply-templates select="@* | node()" />
  </xsl:copy>
</xsl:template> 
```

要使输出中不需要的节点静音，请添加一个空模板：

```
<xsl:template match="node/to/match" /> 
```

# wpf - WPF 和 WCF RIA 服务+EF 或替代方案

> ID：12366299
> 
> 赞同：2
> 
> 时间：2012-09-11T09:06:59.733
> 
> 标签：wpf, wcf, entity-framework, nhibernate, orm

有什么方法可以完全支持 WPF 应用程序的 RIA Services+EF。我已经阅读了以前的线程，但看起来提供的解决方案缺少透明的 CRUD 和验证 API 支持等基本功能。

或者是否有其他流行的通信框架/ORM 支持该功能的替代解决方案（总结 - 在 3 层环境中使用 POCO 类的透明工作）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T17:36:45.407

您可能想尝试查看**[WCF Data Services](http://msdn.microsoft.com/en-us/library/cc668792.aspx)。**

本质上，这是`DataContext`使用 OData REST API 在 WCF 服务上抽象 EntityFramework。Visual Studio 为您生成所有必要的管道，以便您可以在客户端使用直接访问数据源时使用的相同 LINQ 查询远程访问数据层。

# magento - Magento 2Checkout 货币问题

> ID：12366301
> 
> 赞同：0
> 
> 时间：2012-09-11T09:07:03.210
> 
> 标签：magento, 2checkout

我在将金额传递到 2Checkout 付款页面时遇到问题。如果在 Magento 前端选择了其他货币，则传递到 2Checkout 付款页面的金额将转换为金额。2Checkout 有自己的货币转换器，因此如果用户想用其他货币付款，他可以在 2Checkout 支付页面上进行转换，但在这种情况下，他将从 Magento 前端转换转换后的金额而不是基础货币金额。我在徘徊如何解决这个问题，或者我如何编辑 2Checkout 扩展文件以将默认货币金额传递给 2Checkout 付款页面，而不是传递转换后的金额？？？

太好了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:26:52.060

这已在最新版本的扩展程序中实现，因此您需要做的就是在您的管理员中从 Magento Connect 卸载您的扩展程序，然后从以下 URL 重新安装：http: [//www.magentocommerce.com/magento-connect/2checkout -payment-extension.html](http://www.magentocommerce.com/magento-connect/2checkout-payment-extension.html)

现在，如果您以多种货币列出，它将显示客户货币金额并向他们显示他们将以您的默认定价货币收取基本金额。然后将该总数传递给 2Checkout。

由于社区的大量请求，我在 7 月份添加了此更改，到目前为止，每个人似乎都对此感到满意。如果您有任何问题或疑虑，请随时与我联系，以便我协助您进行 2Checkout 集成。

# ios - 以模态方式呈现的 UIViewController 移到顶部

> ID：12366309
> 
> 赞同：0
> 
> 时间：2012-09-11T09:07:30.497
> 
> 标签：ios

我正在展示一个带有 presentModalViewController:animated 的 UIViewController。

```
 CMImportViewControlleriPhone *import = [[CMImportViewControlleriPhone alloc] initWithNibName:@"Import-iPhone" bundle:nil];
    [import setModalPresentationStyle:UIModalPresentationFormSheet];
    [import setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
    [self presentModalViewController:import animated:YES];
    [import release]; 
```

然而，顶部栏是不可见的，并且它似乎移到顶部（底部有一个空白区域）。

这是 viewDidLoad，我在其中设置了 navigationItem 上的 Close 按钮

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    closeButton = [[UIBarButtonItem alloc] initWithTitle:@"Close" style:UIBarButtonItemStyleBordered target:self action:@selector(closeButtonPushed:)];
    [[self navigationItem] setRightBarButtonItem:closeButton];
    [closeButton release];
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:20:42.467

如果您正在使用 iPhone 删除

```
[import setModalPresentationStyle:UIModalPresentationFormSheet]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:28:13.097

您应该添加一个导航栏，然后呈现 modalView

```
CMImportViewControlleriPhone *obj = [[CMImportViewControlleriPhone alloc] initWithNibName:@"Import-iPhone" bundle:nil];
[obj setDelegate:self];
UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:obj];
[self presentModalViewController:navigationController animated:YES];
[obj release];
[navigationController release]; 
```

希望这可以帮助。快乐编码:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:56:47.117

添加 UIBarButtonItem 时，NavigationController 为 nil，navigationBar 也为 nil。所以它不适用于navigationItem。

```
closeButton = [[UIBarButtonItem alloc] initWithTitle:@"Close" style:UIBarButtonItemStyleBordered target:self action:@selector(closeButtonPushed:)];
[[self navigationItem] setRightBarButtonItem:closeButton]; 
```

您应该为导入对象添加一个 NavigationController 并呈现它。

```
CMImportViewControlleriPhone *import = [[CMImportViewControlleriPhone alloc] initWithNibName:@"Import-iPhone" bundle:nil];
[import setModalPresentationStyle:UIModalPresentationFormSheet];
[import setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:import];
[self presentModalViewController:import animated:YES];
[import release];
[nc release]; 
```

# ruby-on-rails - 验证说列不是唯一的，但仍然找不到该列的记录

> ID：12366311
> 
> 赞同：0
> 
> 时间：2012-09-11T09:07:33.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, activemodel

我有一种方法可以从 facebook 用户帐户创建用户。我验证`email`列以确保它是唯一的。

```
class User < ActiveRecord::Base
  validates :email,
    :'validators/email' => true,
    allow_nil: true,
    uniqueness:{ case_sensitive: false } 
```

有时在生产中，FB 用户无法创建帐户。它说用户的电子邮件已经存在于数据库中。因此，如果发生这种情况，我编写了一些代码来获取现有用户。

```
 def self.create_by_facebook()
    user = User.new()
    user.email = facebook_get_me()['email']

    # new code
    if user.invalid?
      if user.errors[:email].join.include?('already registered') #custom msg
        user = User.find_by_email(user.email)
        if user.nil?
          FacebookLogger.error("  no user is found by facebook email")
        end
      end
    end

    begin
      user.save!
    rescue ActiveRecord::RecordInvalid => e
      raise
    end

    user
  end 
```

但是，这次错误是`undefined method`保存！对于 nil:NilClass`。由于验证表明电子邮件已经存在，我的查找器应该返回一个现有的用户记录，但现在它返回 nil。这怎么会发生？

作为记录，我已经记录了错误，并且电子邮件是正确的电子邮件地址。这大约每天发生一次，我自己无法重现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:01:46.207

可能是这条线导致问题，因为如果找不到用户，它将返回 nil，您没有引发异常，您正在记录异常，

`user = User.find_by_email(user.email)`

您的代码非常复杂，您可以编写简单的代码来实现上述结果。

# javascript - 在 ie7 中不断触发窗口调整大小事件

> ID：12366315
> 
> 赞同：4
> 
> 时间：2012-09-11T09:07:44.807
> 
> 标签：javascript, jquery, resize, internet-explorer-7, throttling

***旧标题：javascript 中窗口调整大小事件的 setTimeout 节流阀在 ie7 中不断触发***

我有以下**脚本**：

```
jQuery(document).ready(function(){
    throttleTest(); 
});

function throttleTest() {

    var throttleTimer,
        testCount = 1;

    jQuery(window).on({
        "resize": function(){
            clearTimeout(throttleTimer);
            throttleTimer = setTimeout(function() {
                jQuery("ul.testList").prepend("<li>Prepended list item number: " + testCount + "</li>");
                testCount++;
            }, 500);        
        }
    });

}; 
```

以及以下**HTML**：

```
<ul class="testList">
</ul> 
```

使用 setTimeout 限制技术，它应该只在用户停止调整浏览器大小 500 毫秒后将列表项添加到 testList ul 中。基本上它只在每次调整浏览器大小时运行一次 setTimeout 代码，因为在设置它之前是 clearTimeout 。这种技术允许仅在需要时触发代码，而不是在每次调整大小事件时触发代码，每当用户调整浏览器大小时，这可能会触发数十次。

这适用于除 ie7 之外的所有浏览器。奇怪的是，在 ie7 中，代码继续运行并停止停止将列表项添加到 ul。

我在这里设置了一个**演示**：http : [//jsfiddle.net/cQRjp/](http://jsfiddle.net/cQRjp/)

看一下ie7，你会看到问题。**有谁知道为什么这在ie7中失败了？**

**编辑号：1：**

我已经剥离了代码，以便在调整窗口大小时，li 元素被添加到页面上的 ul 元素之前，然后计数器增加。而已。

这表明问题在于 ie7 如何解释调整大小事件，与油门计时器无关。似乎在页面前添加 li 项会触发 ie7 中的 resize 事件，因此，resize 会不断触发。我在这里设置了一个新的演示：http: [//jsfiddle.net/gnKsE/](http://jsfiddle.net/gnKsE/) **警告这个链接会使你的 ie7 浏览器崩溃。**

对于这个问题，我能想到的一种解决方案是在 resize 事件被触发后立即关闭它，然后在我运行其中的代码后再次设置它。像这样：

```
jQuery(document).ready(function(){
    functionName(); 
});

function functionName() {

    var throttleTimer,
        testCount = 1;

    function turnOnResize() {
        jQuery(window).on({
            "resize.anyname": function(){
                jQuery(window).off(".anyname");
                jQuery("ul.testList").prepend("<li>Resize event: " + testCount + "</li>");
                testCount++;
                setTimeout(function() {
                    turnOnResize();
                }, 50);
            }
        });
    }
    turnOnResize();

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T17:07:48.123

另一种解决方案是让您的调整大小处理程序检查窗口的宽度是否已更改。这样，您可以忽略不是由调整大小的窗口引起的调整大小事件。另请参阅：[在 Internet Explorer 中触发 window.resize 事件](https://stackoverflow.com/questions/1852751/window-resize-event-firing-in-internet-explorer/1921259#1921259)

**尝试这样的事情：**

```
jQuery(document).ready(function($){
    var lastWindowHeight = window.innerHeight, // Could use $(window).height() but $(window) is expensive
        lastWindowWidth = window.innerWidth,
        testCount = 1;

    // Handles all resize events (which for IE7 includes when _anything_ in the DOM is resized)
    function resizeHandler() {
        if (lastWindowHeight !== window.innerHeight || lastWindowWidth !== window.innerWidth )
            windowResizeHandler.apply(this, arguments);
    }

    // Handles resize events that result from the window changing size
    function windowResizeHandler() {
        lastWindowHeight = window.innerHeight;
        lastWindowWidth = window.innerWidth;
        $("ul.testList").prepend("<li>Resize event: " + testCount + "</li>");
        testCount++;
    }

    $(window).on("resize", resizeHandler);
}); 
```

# php - $_FILES 在 PUT 和 DELETE 中不起作用

> ID：12366316
> 
> 赞同：0
> 
> 时间：2012-09-11T09:07:49.810
> 
> 标签：php

我正在为我的移动应用程序编写 API。我在 PUT 和 DELETE 中遇到问题。在 post 方法中，我可以`$_FILES`用于上传文件。但是，它在 PUT 和 DELETE 方法中返回 NULL 值。

我只是使用简单的代码进行测试

```
<?php

echo "FILE: ";
var_dump($_FILES["file"]["name"]);
?> 
```

我正在使用[POSTMAN chrome 扩展](https://github.com/a85/POSTMan-Chrome-Extension/wiki)来测试 PUT 和 DELETE 方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:13:02.420

您是否在使用带有`enctype="multipart/form-data"`属性的表单？

几乎有相同的问题线程 - 检查它：[How to receive a file via HTTP PUT with PHP](https://stackoverflow.com/questions/12005790/how-to-receive-a-file-via-http-put-with-php)

# c# - 程序集名称的完全限定命名空间是什么？

> ID：12366317
> 
> 赞同：0
> 
> 时间：2012-09-11T09:07:49.937
> 
> 标签：c#

这是 Bla 类的完全限定命名空间：

```
"System.Exception.Bla"; 
```

这是：

```
 "System.Exception.Bla, Company.Services"; 
```

你怎么称呼上面的字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:10:37.413

程序集限定名称。

请注意，您使用部分程序集名称。

# image - 将图像链接到 Storyboard 中的 VIewController

> ID：12366320
> 
> 赞同：1
> 
> 时间：2012-09-11T09:08:10.077
> 
> 标签：image, ios5, viewcontroller

我正在使用情节提要制作应用程序。如果我将红色圆形按钮连接到另一个 ViewController 没有问题，但如果我尝试将图像连接到另一个 View Controller 它将不起作用。我能怎么做？

在主视图中，我添加了一个 ImageViewController，我将制作的图像放入其中。我希望用户推送此图像并转到另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:38:55.637

默认情况下，UIImage 并不意味着在点击时调用函数，因此您不能使用序列（直接推送 viewController）但是您可以添加 UIButton 而不是 UIImageView 并在其点击时推送 ViewController，并且可以将您的图像设置为来自情节提要的 UIButton 的图像，所以它似乎点击图像正在调用 ViewController 。或者你可以在 UIImageView 上使用点击手势，但是你需要为它编写更多的代码。因此，如果您只想在点击的图像上推送 ViewController，请使用第一个方法.....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-12T07:56:12.897

完全希望您可以将 IB 的 uibutton 添加到所需的位置。制作按钮背景以清除颜色并指定无标签并将其设为自定义类型。现在尝试使用情节提要进行推送。赫里工作。为该推送设置标识符并享受。

# android - google map displayed not completely in android tablet

> ID：12366325
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:08:30.527
> 
> 标签：android, html, google-maps, cordova, jquery-mobile

I am trying to add a google map to my android tablet to detect where the terminal is.But the map is not displayed completely. only a small part was displayed. and after rotate the screen, it can displayed perfectly. I did all this according to [http://www.digitalnoiz.com/mobile-development/geolocation-jquery-mobile-maps/](http://www.digitalnoiz.com/mobile-development/geolocation-jquery-mobile-maps/) This is my html code:

```
 <head>
        <link href='stylesheets/jquery.mobile-1.1.0.css' rel='stylesheet' />
        <link href='stylesheets/my.css' rel='stylesheet' />
        <script charset='utf-8' src='javascripts/jquery/jquery-1.7.1.min.js' type='text/javascript'></script>
        <script charset='utf-8' src='javascripts/jquery.ui.map.min.js' type='text/javascript'></script>
        <script charset='utf-8' src='http://maps.google.com/maps/api/js?sensor=true' type='text/javascript'></script>
        <script charset='utf-8' src='javascripts/application.js' type='text/javascript'></script>
        <script charset='utf-8' src='javascripts/jquery/jquery.mobile-1.1.1.js' type='text/javascript'></script>
    <script type="text/javascript" charset="utf-8" src="javascripts/phonegap/cordova-2.0.0.js"><\/script>
    </head>
    <body>
     <!-- Diagnostic -->
        <div data-role='page' id='diagnostic_page'>
          <div data-position='inline' data-role='header' data-theme='a'>
            <h2>
              Diagnostic
            </h2>
            <a data-icon='arrow-l' href='#index_page'>
              Back
            </a>
            <a data-role='button' href='#diagnostic_page' id='PageRefresh'>
              Refresh
            </a>
          </div>
          <div data-role='content' style='padding: 15px'>
            <ul data-divider-theme='a' data-inset='true' data-role='listview'>
             <!--there are some other list variables-->
              <li data-theme='c'>
                Show current location:
                <a class='classspan' href='#location_page'>
                  Click on me
                </a>
              </li>
            </ul>
          </div>
        </div>
        <!-- show current location -->
        <div data-role='page' data-theme='c' id='location_page'>
          <div data-position='fixed' data-role='header' data-theme='a'>
            <a data-icon='arrow-l' href='#diagnostic_page'>
              Back
            </a>
            <h2>
              DigitalNoiz
            </h2>
            <div data-role='header'></div>
            Geolocation
            <div id='map_canvas'></div>
            <div id='geolocation'></div>
          </div>
        </div>
     </body> 
```

This is my Jquery code, all my function code are edited in application.js.

```
function onLoad() {
    console.log('Init reached');
    $.mobile.allowCrossDomainPages = true;
    $.mobile.showPageLoadingMsg();
    $.support.cors = true;
    document.addEventListener('deviceready', onDeviceReady, false);
}
function onDeviceReady() {
    console.log('Starting up...');
//  navigator.app.overrideBackbutton(true);
    document.addEventListener("backbutton", onBackKeyDown, false);
    console.log('Initializing db'); 
    refreshpage();
        getPosition();

}
function getPosition(){
    var geoOptions = { enableHighAccuracy: true, timeout: 10000 };
    navigator.geolocation.getCurrentPosition(function(position){ // geoSuccess
        // we have the position
        var geolocation = $('#geolocation');
        geolocation.html('<table></table>');

        var table = geolocation.find('table');
        if(position.coords.latitude)
            table.append('<tr><th>Latitude</th><td>' + position.coords.latitude + '</td></tr>');
        if(position.coords.longitude)
            table.append('<tr><th>Longitude</th><td>' + position.coords.longitude + '</td></tr>');
        if(position.coords.altitude)
            table.append('<tr><th>Altitude</th><td>' + position.coords.altitude + '</td></tr>');
        if(position.coords.accuracy)
            table.append('<tr><th>Accuracy</th><td>' + position.coords.accuracy + '</td></tr>');
        if(position.coords.altitudeAccuracy)
            table.append('<tr><th>Altitude Accuracy</th><td>' + position.coords.altitudeAccuracy + '</td></tr>');
        if(position.coords.heading)
            table.append('<tr><th>Heading</th><td>' + position.coords.heading + '</td></tr>');
        if(position.coords.speed)
            table.append('<tr><th>Speed</th><td>' + position.coords.speed + '</td></tr>');
        if(position.coords.timestamp)
            table.append('<tr><th>Timestamp</th><td>' + new Date(position.timestamp) + '</td></tr>');

         //show position on map 
        var map_canvas = $('#map_canvas');
        map_canvas.gmap(
            {'center' : position.coords.latitude + ',' + position.coords.longitude,
            'zoom' : 12,
            'disableDefaultUI':true,
            'callback':function(){
                var self = this; 
                var marker = self.addMarker({ 'position' : this.get('map').getCenter() });
                marker.click(function(){
                    self.openInfoWindow({ 'content' : 'This is your current location' }, this);
                });
            }
        }); 
    }, function(error){ // geoError
        navigator.notification.alert('error: ' + error.message + '\n' + 'code: ' + error.code);
    }, geoOptions);
} 
```

Can anybody could give me some advices?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:29:45.347

Give your map div a size ( both width and height):

```
<div id='map_canvas' style="width:400px; height:500px"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:09:06.460

I had this too (especially in Chrome on the desktop) and solved it by resizing the map when it had finished rendering (in 'idle' state):

```
google.maps.event.addListenerOnce(map, 'idle', function() {
   google.maps.event.trigger(map, 'resize');
}); 
```

# iphone - 在Xcode中，如何显示合并English+Arabic并以Arabic开头的文本？

> ID：12366330
> 
> 赞同：15
> 
> 时间：2012-09-11T09:08:46.337
> 
> 标签：iphone, xcode, arabic

我想将标签设置为字符串：“خخخ 刚刚购买：伪装工具包。” 但是当我运行测试时，标签显示“。刚刚购买：伪装工具包خخخ”？

如果文本不是以阿拉伯语开头，它将显示为我设置的内容。有什么问题？

有人知道如何处理这个问题吗？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-28T02:52:39.637

首先，阅读 Cal Henderson 出色的[“理解 Unicode 中的双向 (BIDI) 文本”。](http://www.iamcal.com/understanding-bidirectional-text/).

信不信`UILabel`由你，按照你要求的方式进行布局。您提供了一个从右到左的字符串（以阿拉伯语开头）。它开始从右到左显示。然后，您嵌入了一个从左到右的英文字符串，它从左到右排列。然后它会看到句点，并将其从右到左排列，因为这是一个阿拉伯字符串，恰好包含一些英语（正如最好的说法`UILabel`）。

你想要的是一个嵌入了阿拉伯语的从左到右的字符串。这意味着您必须以从左到右的字符开始字符串。两个选项：在开头添加一些英文，或者使用零宽度的从左到右标记（U+200E，LRM）将字符串的开头锚定为 LTR 模式。

**目标-C：**

```
self.label.text = @"\u200eكتب just bought: Disguise Kit."; 
```

**迅速：**

```
self.label.text = "\u{200E}كتب just bought: Disguise Kit." 
```

关于 U+200E 的好消息是，您可以在显示之前安全地将其添加到每个 LTR 字符串中。您甚至可以安全地将其放在 LTR 语言的本地化字符串的开头。如果它是多余的，它不会伤害任何东西。

还有一些需要注意的事情：永远不要用ككك测试这些东西，总是用كتب（就像每个好学生：D）或更好的东西，比如الو。否则，您无法判断阿拉伯语何时向后布局。我喜欢الو，因为它向后看起来完全不同。

另外，在测试时，请注意 Xcode 不知道如何布局阿拉伯语。因此，如果您在代码中编写任何静态字符串，它们将在编辑器中向后显示，但它们会在 UI 中正确显示。让我发狂。

* * *

请务必查看 guru_meditator 对 iOS 10+/macOS 10.12 中添加的有用相关功能的[回答](https://stackoverflow.com/a/55569952/97337)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-08T09:15:20.113

由于 iOS 10（和 macOS 10.12）`String localizedStringWithFormat`在占位符周围插入 Unicode 隔离。这是使用混合语言方向格式化字符串的高级方法，无需手动插入方向标记。

```
String.localizedStringWithFormat("%@ just bought: Disguise Kit.", "خخخ")
// "⁨خخخ⁩ just bought: Disguise Kit." 
```

相比于：

```
String(format: "%@ just bought: Disguise Kit.", "خخخ")
// ".just bought: Disguise Kit خخخ" 
```

要查看localizedStringWithFormat 正在做什么：

```
let scalars = String.localizedStringWithFormat("%@ just bought: Disguise Kit.", "خخخ")
    .unicodeScalars.map { "U+\(String(format: "%04X", $0.value))" }
print(scalars)
// ["U+2068", "U+062E", "U+062E", "U+062E", "U+2069", "U+0020", ... 
```

其中 U+2068 是 FIRST STRONG ISOLATE，U+2069 是 POP DIRECTIONAL ISOLATE。您可以阅读更多关于隔离的信息：[https ://www.unicode.org/reports/tr9/tr9-41.html#Explicit_Directional_Isolates](https://www.unicode.org/reports/tr9/tr9-41.html#Explicit_Directional_Isolates)

此功能在[WWDC 2016 会议 232 国际用户界面中的新增功能中引入](https://developer.apple.com/videos/play/wwdc2016/232/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-29T15:22:36.203

实际上， \u{200E} （或任何）符号可以插入到字符串文字中。

1.  添加“Unicode Hex Input”（系统偏好设置 -> 键盘 -> 输入源 -> + -> Unicode Hex Input）。
2.  在文本编辑器中，将光标移动到要插入符号的位置。
3.  将输入源切换到“Unicode Hex Input”。
4.  按住 Option 键并键入 200E。
5.  应该插入符号并且字符串应该看起来像您期望的那样。

# admin - 刷新sugarcrm dashlet时未定义的弹出窗口

> ID：12366337
> 
> 赞同：0
> 
> 时间：2012-09-11T09:09:05.337
> 
> 标签：admin, sugarcrm

我正在尝试修改 Sugarcrm（版本 6.5.4）。我登录为“管理员”

我有一个主页，在那里我删除了一些无用的 dashlets。这个家的每一个仪表板每 30 秒刷新一次。每隔 30 秒，我就会在几毫秒内出现一个小弹出窗口，显示“未定义”。我试图用萤火虫查看可能是什么错误，但我没有发现。我想也许我删除了与仪表板相关的其他数据中的字段或某些内容，但我看不到哪个字段。

有人知道正在运行哪个错误吗？或者即使我可以修复它，好吗？

感谢您花时间阅读我糟糕的描述。并提前感谢您给我的回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:01:55.360

最后，我没有找到这个弹出窗口的原因，但我在访问权限方面遇到了几个问题。我更改了它们，现在弹出窗口从“未定义”变为“正在加载”。再次感谢，我希望它会帮助别人！:)

# c# - 来自 C# 的 APNS 通知

> ID：12366339
> 
> 赞同：3
> 
> 时间：2012-09-11T09:09:09.393
> 
> 标签：c#, push-notification, apple-push-notifications

我最近的一个项目是我想实现 APNS 推送通知。因此，我想一次向 100 个 iOS 设备发送一条通知消息。因此，对于该实现，我使用免费的 JDSOFT 库，并且我还参考了以下链接。 [http://apns-sharp.googlecode.com/svn-history/r21/trunk/JdSoft.Apple.Apns.Notifications.Test/Program.cs](http://apns-sharp.googlecode.com/svn-history/r21/trunk/JdSoft.Apple.Apns.Notifications.Test/Program.cs)

这里我的问题是当我向特定设备发送消息时，我想在发送下一个通知之前等待一段时间。为此我使用

System.Threading.Thread.Sleep(15000);

否则我的一些消息成功接收，而一些则未能接收。但是如果我使用 15000 毫秒，那么我的线程最多等待 15000*100 毫秒。

那么有什么办法可以避免这样的问题。或者如果有人知道通知之间的最短睡眠时间是多少。我正在使用 C# 进行通知实现。如果有人知道，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T13:28:36.270

我是 APNS-Sharp 的作者，我建议改用 PushSharp（我也写过）。它取代了 APNS-Sharp，不应该有您遇到的问题！

[https://github.com/Redth/PushSharp](https://github.com/Redth/PushSharp)

# css - woomark 无限画廊与 bootstrap.css 冲突

> ID：12366340
> 
> 赞同：-3
> 
> 时间：2012-09-11T09:09:12.857
> 
> 标签：css, twitter-bootstrap

我正在使用带有 JADE 和 EXPRESS 的 GBKS woodmark jquery 无限画廊插件。

我也在使用 bootstrap css，显然与 bootstrap.css 存在冲突，导致 woomark 使用的绝对定位在加载时失败。

主要问题是引导程序在ul中的li的绝对定位覆盖了woomark画廊插件的ul中li的绝对定位。

有一个临时解决方案，即在站点加载几毫秒后再次调用该方法以重新定位站点，但我认为这不是一个好主意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T02:17:56.313

问题不是与引导程序冲突，而是 wookmark 在加载图像之前不知道图像的高度。为了修复它：

1.  添加加载图像的 JS 插件 - [https://github.com/desandro/imagesloaded](https://github.com/desandro/imagesloaded)
2.  修改 wookmark 代码，使其在加载所有图像之前不会触发：

    ```
    <!-- Once the images are loaded, initalize the Wookmark plug-in. -->
      <script type="text/javascript">
    $('#tiles').imagesLoaded(function() {
      // Prepare layout options.
      var options = {
        autoResize: true, // This will auto-update the layout when the browser window is resized.
        container: $('#main'), // Optional, used for some extra CSS styling
        offset: 2, // Optional, the distance between grid items
        itemWidth: 210 // Optional, the width of a grid item
      };

      // Get a reference to your grid items.
      var handler = $('#tiles li');

      // Call the layout function.
      handler.wookmark(options);

      // Capture clicks on grid items.
      handler.click(function(){
        // Randomize the height of the clicked item.
        var newHeight = $('img', this).height() + Math.round(Math.random()*300+30);
        $(this).css('height', newHeight+'px');

        // Update the layout.
        handler.wookmark();
      });
    }); 
    ```

# spring - 客户端证书身份验证是否需要 https？

> ID：12366342
> 
> 赞同：0
> 
> 时间：2012-09-11T09:09:15.983
> 
> 标签：spring, spring-security

Spring Security：为了测试一个应用程序，我想让 SSL 关闭客户端证书 X.509 身份验证是否需要 https？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T22:06:17.757

是的，这是必要的。设置它也非常简单。请参见：

[http://static.springsource.org/spring-security/site/docs/3.0.x/reference/x509.html](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/x509.html)

22.3 在 Tomcat 中设置 SSL

Spring Security 项目的 samples/certificate 目录中有一些预生成的证书。如果您不想生成自己的，可以使用这些来启用 SSL 进行测试。文件 server.jks 包含服务器证书、私钥和颁发证书颁发机构证书。还有一些来自示例应用程序的用户的客户端证书文件。您可以在浏览器中安装这些以启用 SSL 客户端身份验证。

要运行支持 SSL 的 tomcat，请将 server.jks 文件拖放到 tomcat conf 目录中，并将以下连接器添加到 server.xml 文件中

```
<Connector port="8443" protocol="HTTP/1.1" SSLEnabled="true" scheme="https" secure="true"
        clientAuth="true" sslProtocol="TLS"
        keystoreFile="${catalina.home}/conf/server.jks"
        keystoreType="JKS" keystorePass="password"
        truststoreFile="${catalina.home}/conf/server.jks"
        truststoreType="JKS" truststorePass="password"
/> 
```

如果您仍然希望 SSL 连接成功，即使客户端不提供证书，clientAuth 也可以设置为想要的。不提供证书的客户端将无法访问 Spring Security 保护的任何对象，除非您使用非 X.509 身份验证机制，例如表单身份验证。

# java - 相对路径或任何访问目录的方式

> ID：12366345
> 
> 赞同：0
> 
> 时间：2012-09-11T09:09:26.880
> 
> 标签：java

我在 RCP 应用程序的一个目录中有图像，我必须使用相对路径访问任何 RCP 应用程序中的该文件夹。我怎样才能访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:03:26.420

如果您给图标路径以“/”开头，这意味着它从您的项目目录开始，否则它将与您访问此图标的类相关。

# php - 允许第三方更改元素

> ID：12366346
> 
> 赞同：0
> 
> 时间：2012-09-11T09:09:33.917
> 
> 标签：php, jquery

采用[以下插件](http://demo.tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/demo.php)- 实际允许第三方更改图像、描述和链接元素的最佳方式是什么 - 例如允许每个人自己的块，如在会员或广告网站中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:20:29.887

看起来该动画是由插件处理的。图像和文本元素只是常规元素，就像您在任何页面上一样。

您必须（对于每个客户）存储他们的“盒子”设置。

*   图像的路径
*   标题文字
*   说明文字

之后，由您决定如何让您的用户更改这些值。您可以拥有某种管理员控制台，要求您的客户使用密码登录...您可以允许用户通过 FTP 将文件上传到某个文件夹，然后您可以从那里提取数据...您甚至可以去100% 手动并要求他们通过电子邮件向您发送任何更改。

这完全取决于您希望如何允许他们这样做。

# ruby-on-rails - 在新实例化的关联“子”对象上调用“.parent”返回“nil”

> ID：12366348
> 
> 赞同：1
> 
> 时间：2012-09-11T09:09:40.987
> 
> 标签：ruby-on-rails, activerecord, has-many

```
r = Role.new(name: 'Admin')
=> #<Role id: nil, name: "Admin">
p = r.privileges.build
=> #<Privilege id: nil, role_id: nil>
p.role
=> nil 
```

`Privilege`有一个依赖于相关`role`名称的实例方法，并且必须在保存`r`或之前调用`p`。运行上述代码后调用它会引发`undefined method `name' for nil:NilClass`错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:34:27.800

那么呢：

```
p = r.privileges.build(role: r) 
```

要使其工作，您应该`:role`在 attr_accessible 列表中启用。

# mysql - 数字频率

> ID：12366358
> 
> 赞同：2
> 
> 时间：2012-09-11T09:10:18.217
> 
> 标签：mysql, frequency

我需要一个 sql 查询来合并我表上不同列的所有数字，并找到它们出现的总和。

我的表结构是这样的

```
id | Pick1 | Pick2 | Pick3 | Pick4 | Pick5 | Pick6 |
----------------------------------------------------
 1 | 1     |  23   |  56   |  56   |   78  |  89   |
----------------------------------------------------
 2 | 9     |  49   |  90   |  56   |   78  |  89   |
----------------------------------------------------
 3 | 2     |  65   |  56   |  56   |   78  |  89   |
----------------------------------------------------
 4 | 1     |  23   |  23   |  56   |   78  |  89   | 
```

预期结果

```
Number | Frequency
-------------------
  23   |  5
-------------------
  56   |  7
-------------------
  89   |  4
.... 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:19:43.170

如果您可以将表格重新组织成如下结构，那就容易多了：

```
id | pick | nr
------------------
1    1       1  
1    2      23
1    3      56 
```

在这样的表格中，您可以轻松地对数字进行分组和计数。在您的项目中是否可以像这样更改表结构？

或者，如果不可能，您可以创建一个帮助视图，在此结构中排列数据，然后将此结果用于进一步处理。这样的视图可以通过使用六个 select 语句的 UNION 来构建。如果您在这方面需要进一步的帮助，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:12:44.340

您需要`UNION ALL`在子查询中合并所有记录。试试这个，

```
SELECT x.a `Number`, 
       COUNT(x.a) `Frequency`
FROM
(
    SELECT Pick1 a
    FROM TableNAME
    UNION ALL
    SELECT Pick2 a
    FROM TableNAME
    UNION ALL
    SELECT Pick3 a
    FROM TableNAME
    UNION ALL
    SELECT Pick4 a
    FROM TableNAME
    UNION ALL
    SELECT Pick5 a
    FROM TableNAME
    UNION ALL
    SELECT Pick6 a
    FROM TableNAME
) x
GROUP BY x.a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:13:42.473

```
SELECT pick AS `Number`,
       COUNT(1) AS Frequency
FROM(
     SELECT Pick1 AS pick
     FROM table_name
     UNION ALL
     SELECT Pick2 AS pick
     FROM table_name
     SELECT Pick3 AS pick
     FROM table_name
     SELECT Pick4 AS pick
     FROM table_name
     SELECT Pick5 AS pick
     FROM table_name
     SELECT Pick6 AS pick
     FROM table_name
    ) a
 GROUP BY a.pick; 
```

# iphone - IOS：德语字符显示为日语

> ID：12366362
> 
> 赞同：1
> 
> 时间：2012-09-11T09:10:27.980
> 
> 标签：iphone, ios, encoding, utf-8

我有使用 ZBarSDK 扫描 QR 码的 IOS 应用程序。问题是当我尝试用德语字符扫描代码时，它们在应用程序中显示为日语。

例如：包含 - Einsteinstraße 54 81675 München/Germany 的代码将使用日语字符而不是 ß 和 ü。

有什么想法可以解决这个问题吗？

PS 使用 android Barcode Scanner 它会正确显示。

我的代码：

```
-(IBAction)StartScan:(id) sender
{
    ZBarReaderViewController *reader = [ZBarReaderViewController new];
    reader.readerDelegate = self;
    reader.readerView.torchMode = 0;
    reader.tracksSymbols = YES;
    ZBarImageScanner *scanner = reader.scanner;
    [scanner setSymbology:ZBAR_I25 config:ZBAR_CFG_ENABLE to:0];
    [self presentModalViewController: reader
                            animated: YES];
    scanner = nil;
} 
```

和

```
- (void) imagePickerController: (UIImagePickerController*) reader didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    id<NSFastEnumeration> results = [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;

    for(symbol in results) {
        self.hiddenData=[NSString stringWithString:symbol.data];
        NSLog(@"SymbolData: %@", [symbol data]);
    }
    resultTextView.text=symbol.data;
    NSUserDefaults *storeData=[NSUserDefaults standardUserDefaults];
    [storeData setObject:self.hiddenData forKey:@"CONSUMERID"];
    NSLog(@"SYMBOL : %@",self.hiddenData);
    //rest of code...
} 
```

[符号数据] 已经包含日文字符而不是德文字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:09:16.597

我有同样的问题，我解决了：

```
NSString* barcode = symbol.data; 

if ([barcode canBeConvertedToEncoding:NSShiftJISStringEncoding]) { 
    barcode = [NSString stringWithCString:[barcode cStringUsingEncoding: NSShiftJISStringEncoding] encoding:NSUTF8StringEncoding]; 
} 
```

也许它对你有用。

# java - log4j 初始化问题

> ID：12366363
> 
> 赞同：3
> 
> 时间：2012-09-11T09:10:28.393
> 
> 标签：java, jboss, log4j

首先，我需要说我是 Java 和 Java 相关技术的新手。
最近我有一个 Java 的大项目。它有客户端和服务器端。当我尝试调用客户端应用程序时，它给了我以下警告：

```
`log4j:WARN No appenders could be found for logger (org.jboss.security.SecurityAssociation).  
log4j:WARN Please initialize the log4j system properly.` 
```

好的，好像 log4j 找不到它的属性文件。我没有找到，所以我写了一个新的：

```
log4j.rootLogger=info, stdout, file

log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n

log4j.appender.file=org.apache.log4j.FileAppender
log4j.appender.file.file=server.log
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%5p [%t] (%F:%L) - %m%n` 
```

现在我不知道我必须把它放在哪里。文档说，它必须在类路径中 - 所以我试图把它放到,和文件夹`/src/`的子目录中。我也尝试了项目的根文件夹 - 但它一直给我警告。 有人知道“如何找到放置 log4j.properties 文件的位置”主题的好手册吗？或者，也许我必须在我正在使用以下文件的 jboss 配置文件中写入某个位置？`client``web``webinfo`
`log4j.properties`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:26:50.870

您可以`log4j properties`通过不同的方式进行配置，

*   正如您所说，它必须在`classpath`，对于任何 Web 应用程序默认类路径将是`WEB-INF/classes`，您可以将`log4j.properties`文件放在那里。如果它不是 Web 应用程序，请尝试查找所有类所在的位置，通常在`bin`文件夹中。
*   其他方式是您可以通过`VM args`

`-Dlog4j.configuration=file:/C:/testing/mylog4j.properties`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:24:08.047

保留一个共享库（具有任何名称的文件夹）并将其附加到服务器的类路径中。您可以将任何外部 jars、log4j 配置等放在此文件夹中。由于它已附加到您服务器的类路径中，因此它将被加载。

注意：如果您对此文件夹进行任何更改，您将需要重新启动服务器才能使更改生效。

希望这会有所帮助！！！☺</p>

# database - db2move 在具有外键约束的表中导入数据

> ID：12366365
> 
> 赞同：0
> 
> 时间：2012-09-11T09:10:33.230
> 
> 标签：database, db2

使用 db2look、db2move 备份和恢复数据库时如何处理外键约束问题？DDL（使用 db2look 生成）在恢复数据库时创建约束，因此在使用 db2move 导入数据期间发生数据错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:25:54.490

您有几个选项可用于填充具有 RI 约束的空 DB2 数据库：

*   检查数据库中的所有 FK 依赖项并相应地更改`IMPORT`语句的顺序，以防止暂时违反 RI 约束。对于具有自引用外键的表，这可能不是一个选项。
*   不要通过 填充表`IMPORT`，而是使用忽略表约束的[LOAD实用程序。](https://www.ibm.com/docs/en/db2/11.5?topic=commands-load)LOAD 会将任何具有约束的目标表（及其下游的依赖表）置于 CHECK PENDING 状态，这将阻止写访问。加载所有表后，对这些表使用[SET INTEGRITY](https://www.ibm.com/docs/en/db2/11.5?topic=statements-set-integrity)命令来验证它们是否满足所有约束。
*   将 DDL 中的语句重新定位`ALTER TABLE`到一个单独的脚本，该脚本仅在填充所有表后才运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T08:07:42.340

最好在不同的进程中执行表定义和fk约束定义。为避免在使用 db2move 工具加载数据时进行完整性检查，必须在执行导入/加载过程之后稍后执行 fk 定义。

在运行 db2look 以转储数据库的 ddl 之后。只需将外键约束分离到单独的文件中。如果其他对象也像触发器、sp 或不同文件上的视图，那就更好了。因此，在加载数据之后，立即执行 fk 约束、触发器、sp 和视图。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T07:26:47.103

1.  首先禁用约束，然后执行 db2move import。
2.  将数据导入表后，重新启用约束

ALTER TABLE ALTER FOREIGN KEY NOT Enforced

然后重新启用：

ALTER TABLE ALTER FOREIGN KEY ENFORMED

谢谢，奈杜

# php - 如何在mysql中存储阿拉伯字体

> ID：12366370
> 
> 赞同：0
> 
> 时间：2012-09-11T09:10:46.210
> 
> 标签：php, mysql, database, character-encoding, collation

我想在我的字典表中存储阿拉伯语单词。

我正在使用 java 脚本代码在文本框中输入阿拉伯语。

它工作正常。

当我得到所有记录后插入表格后，它会正确显示阿拉伯语单词。

但在我的表中，阿拉伯语单词以这种格式存储
↓ ETC

不是这种格式

这给我带来了问题。当我想使用 word = $arabic OR 从我的表中搜索任何阿拉伯语单词时

使用像这样的词`'%$arabic%'`

它失败并且没有结果。

请帮我解决这个问题。

**笔记**

当我在查询编辑器中编写查询时，它以阿拉伯格式存储阿拉伯字体。

我正在对阿拉伯语列使用 utf8-bin 排序规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:19:00.263

将您的表（列）排序规则更改为`utf8_general_ci`并在您的 html 中添加

```
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:25:45.380

您必须执行以下操作： 1.在您的 php 脚本中设置 UTF-8，如下所示：

```
 ini_set('default_charset', 'utf-8'); 
```

2.在数据库中将**排序规则**设置为**utf8_general_ci**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:26:06.483

放：

MySQL 表字符集为 utf8，排序规则为 utf8_general_ci 或 utf8_unicode_ci。并且在您的代码（连接字符串）中还将字符集设置为 utf8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T10:44:24.800

您应该通过添加来确保 html 支持阿拉伯文本

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

您还应该检查数据库中的编码，它应该是`utf8_unicode_ci`或其他类似的编码

# android-intent - 如何在 BroadcastReceiver 上使用 PendingIntent

> ID：12366371
> 
> 赞同：1
> 
> 时间：2012-09-11T09:10:50.180
> 
> 标签：android-intent, ubuntu-11.04, ubuntu-10.10

我正在尝试设置一个消息应用程序，以便：

1.  首先我们在 PreferenceConnector 上设置一条消息，然后我们收到消息
2.  BroadcastReceiver 检查消息内容是否相等
3.  我想获得一个 PendingIntent。

```
尝试 {
        if (PreferenceConnector.readString(context,"MSG","tempmsg2").equals(messages[0].getMessageBody())) {
            Intent i=new Intent(context, SecureMobiActivity.class);                 
            PendingIntent pi=PendingIntent.getBroadcast(context, 0, i, 0);
        } 别的 {
            Toast.makeText(Remotelock.this, "消息不相等！", Toast.LENGTH_LONG).show();
        }
        捕获（异常 e）{
        // TODO: 处理异常
            e.printStackTrace();
        }

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:05:15.950

它的答案很简单

```
try {
    if (PreferenceConnector.readString(context,"MSG","tempmsg2").equals(messages[0].getMessageBody())) {
        Intent i = new Intent(mContext,SecureMobiActivity.class);
        i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        mContext.startActivity(i);
    } else {
        Toast.makeText(Remotelock.this, "message are not equal!", Toast.LENGTH_LONG).show();
    }
    catch (Exception e) {
    // TODO: handle exception
        e.printStackTrace();
    } 
```

# java - java应用和x11转发

> ID：12366373
> 
> 赞同：1
> 
> 时间：2012-09-11T09:10:55.890
> 
> 标签：java, linux, ubuntu, ssh, x11-forwarding

我需要在虚拟服务器上启动 jperf。我通过 ssh 配置了 X11 转发。xclock - 正在工作。但是如果我启动 jperf 我会得到：

```
    user@client-32:~/sandbox/jperf-2.0.2$ sh jperf.sh
    线程“主”java.lang.ExceptionInInitializerError 中的异常
    引起：java.awt.HeadlessException
            在 sun.java2d.HeadlessGraphicsEnvironment.getDefaultScreenDevice（HeadlessGraphicsEnvironment.java:77）
            在 net.nlanr.jperf.JPerf.（未知来源）

```

爪哇版：

```
    java版本“1.7.0_03”
    OpenJDK 运行环境 (IcedTea7 2.1.1pre) (7~u3-2.1.1~pre1-1ubuntu3)
    OpenJDK Client VM（build 22.0-b10，混合模式，共享）

```

unname -a ：

```
`Linux client-32 3.2.0-29-generic-pae #46-Ubuntu SMP Fri Jul 27 17:25:43 UTC 2012 i686 i686 i386 GNU/Linux
```

**问题解决**

了需要添加`-Djava.awt.headless=true`到jperf.sh应该是这样的：

```
#!/bin/sh

java -classpath jperf.jar:lib/forms-1.1.0.jar:lib/jcommon-1.0.10.jar:lib/jfreechart-1.0.6.jar:lib/swingx-0.9.6.jar net.nlanr.jperf.JPerf -Djava.awt.headless=true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:42:06.353

您应该在无头模式下运行 jperf，因为您可能需要编辑 jperf.sh，请参阅：http: [//javatechniques.com/blog/linux-x11-libraries-for-headless-mode/](http://javatechniques.com/blog/linux-x11-libraries-for-headless-mode/)

如果它仍然不起作用，请尝试使用 oracle jvm 而不是 openjdk 之一。

# matlab - matlab中的accumarray命令

> ID：12366382
> 
> 赞同：0
> 
> 时间：2012-09-11T09:11:38.527
> 
> 标签：matlab, accumarray

我想通过以下方式执行通常使用循环进行的计算：

```
% d is a vector with size of k.
% X_ind, Z_ind is a vector with size k. %(have indexes only in the range of m*n)
% c is a vector with size k.
% each value of d(i) , c(i) (i=1:k) mataches the indexes X_ind(i),Z_ind(i)
% **In General**:
% N represents amplitudes (some negative,some positive) that sum up.
% M(:,:,1) reperesents a result that is weighted with M(:,:,2)
% M(:,:,1) and M(:,:,2) can be separate matrices

k=length(d); %also k=length(c), k=length(X_ind), k=length(Z_ind)
n=512 % can be any number
m=256 % can be any number
M=zeros(m,n);
N=zeros(m,n,2)+eps;    
for i=1:(m*n)
    x=X_ind(i);
    z=Z_ind(i);

    M(z,x)=M(z,x)+d(n);

    a=abs(M(z,x)); % a is a scalar

    N(z,x,1)=(N(z,x,1).*N(z,x,2)+c(n)*a)/(N(z,x,2)+a);
    N(z,x,2)=N(z,x,2)+a;
end 
```

而是使用 accumarray 命令：

```
M=accumarray([Z_ind X_ind], d];

N=??? 
```

有人可以指出如何以这种方式计算 N 吗？

# jquery-mobile - JQuery Mobile 删除文本以动态生成后退按钮

> ID：12366386
> 
> 赞同：1
> 
> 时间：2012-09-11T09:11:46.793
> 
> 标签：jquery-mobile, back-button

我想从动态生成的后退按钮（例如嵌套列表）中删除文本以实现类似这个静态标题的内容（**仅**显示箭头）：

```
<header data-role="header">
    <h1>Header</h1>
    <a data-rel="back" data-iconpos="notext" data-icon="arrow-l">Back</a>
</header> 
```

由于此解决方案无法正常工作，

```
$(document).bind("mobileinit", function() {
    $.mobile.page.prototype.options.addBackBtn = true;
    $.mobile.page.prototype.options.backBtnText = "";
} 
```

我试过这个，但它不起作用：

```
$(document).bind('pagebeforecreate', function(){ 
    $("a:jqmData(rel='back')").jqmData("iconpos", "notext");
}); 
```

错误在哪里？

**编辑**
为了使问题更容易，我想删除嵌套列表中按钮的文本，例如：http: [//jsfiddle.net/GV2wN/](http://jsfiddle.net/GV2wN/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:50:17.973

> 如果您想配置后退按钮文本，您可以在页面元素上使用 data-back-btn-text="previous" 属性，或者通过页面插件的选项以编程方式设置它。
> 
> 来源：http: [//jquerymobile.com/test/docs/toolbars/docs-headers.html](http://jquerymobile.com/test/docs/toolbars/docs-headers.html)

```
$.mobile.page.prototype.options.backBtnText = "Previous"; 
```

（将“previous”替换为您希望显示的任何文本。

`data-back-btn-text="Previous"`或者，您可以在您的 div 上逐页执行此操作，`data-role="page"`如下所示：

```
<div data-role="page" data-add-back-btn="true" data-back-btn-text="Previous"> 
```

**更新 (1)**

对不起，我错过了您已经尝试过上述方法。

**解决方法：**通过`data-iconpos="notext"`在`data-role="button"`链接上插入，会产生不带按钮文字的图标，如下图：

```
<a href="index.html" data-icon="arrow-l" data-role="button" data-iconpos="notext">Back</a> 
```

这是一个有效的 jsFiddle 示例，将按钮放在 Header 元素中：http: [//jsfiddle.net/3q28f/](http://jsfiddle.net/3q28f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:35:43.613

它不是很干净，因为它在渲染后修改了按钮的 css，但添加它似乎可以解决问题：

```
$(document).on('pagechange', function () {
    $.mobile.activePage.find(".ui-header a.ui-btn-left").addClass("ui-btn-icon-notext");
    $.mobile.activePage.find(".ui-header a.ui-btn-left").removeClass("ui-btn-icon-left");
});​ 
```

[这是你更新的小提琴。](http://jsfiddle.net/GV2wN/5/)

有时在呈现按钮和更改其标记之间存在延迟，因此您可能希望寻找更好的事件来绑定，也许是单击事件？

# javascript - 谷歌分析问题

> ID：12366388
> 
> 赞同：0
> 
> 时间：2012-09-11T09:11:53.940
> 
> 标签：javascript, google-analytics

我正在查看一个朋友的脚本，他使用了 Google Analytics 跟踪代码：

```
var _gaq = [
        ['_setAccount', 'UA-XXXXXXXX-X'],
        ['_trackPageview']
    ];
    (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
        s.parentNode.insertBefore(g, s)
    }(document, 'script')); 
```

以这种方式（或类似的方式）：

```
var SOMEOBJECT = {
    _gaq : [],
    account_code : "",

    ...

    init : function() {
        ...
    }

    ...

    _gaq.push(SOMEOBJECT.account_code);

    ...
} 
```

以及更多代码来创建相同的跟踪代码，但以不同的方式（因为它需要在许多其他页面和各种东西上重复使用）。

这个想法是`_gaq`控制台中似乎不存在范围变量，因此 Analytics 没有收到任何数据。那么可能出了什么问题？抱歉没有更多代码，但这是我记得的，我很好奇为什么它不起作用（：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:10:42.803

您的代码的第一部分看起来不错……只是对普通 Google Analytics 异步代码的重构。

我不确定你的代码的第二部分......通常`_gaq`是一个全局对象初始化的东西

```
var _gaq = _gaq || []; 
```

*如果尚未初始化，则将*全局初始化`_gaq`为数组。加载 Google Analytics 代码后，数组将替换为包含执行命令的方法的对象。*`push`*

 *查看[_gaq 全局对象](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq)和[push](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gaq#_gaq.push)方法的文档。*

# jquery - 与 IE8.0 一起使用时，Jquery 中的 column.length 抛出错误

> ID：12366389
> 
> 赞同：1
> 
> 时间：2012-09-11T09:11:55.960
> 
> 标签：jquery

我在 jquery 中传递了一组列，但是当我获取列的长度时，这给出了一个额外的我的代码如下

```
function manageUsersPage() {
this.data=null;
this.edititem=null;
this.columns = [
    [false, 'User Id', 'UserI`enter code here`d', 'readonly', 20, '', null],
    [true, 'User Name', 'fullname', 'readonly', 20, '', null],
    [true, 'Login Name', 'Login', 'string', 15, 'required', null],
    [false, 'Password', 'Password', 'password', 15, '', null],
    [false, 'Confirm Password', 'Password', 'password', 15, '', null],
    [true, 'User Type', 'UserType', 'select', 0, '', ['Hotel-Admin', 'Chain-Admin', 'User']],
    [false, 'Manage Hotels (If Chain-Admin)', 'hotels', 'multiselect', 40, '', null],
    [true, 'Email Address', 'Email', 'string', 30, 'custom[email]', null],
    [true, 'Reservation Delivery', 'ResvDelivery', 'select', 0, '', ['No Email', 'All', 'Failure', 'Failure, Pending', 'Failure, Validation', 'Failure, Validation, Rejected', 'Failure, Validation,Pnding', 'Validation,Rejected,Failure, Pnding', 'Failure, Validation,Pnding,Success']],
    [true, 'RMS Mail Delivery', 'RmsDelivery', 'select', 0, '', ['On', 'Off']],
    [false, "First Name", "FirstName", 'string', 20, '', null],
    [false, "Middle Name", "MiddleName", 'string', 20, '', null],
    [false, "Last Name", "LastName", 'string', 20, '', null],
    [false, "Address", "Address", 'text', 40, '', null],
    [false, "Comments", "Comments", 'text', 100, '', null],
    //[false, "login Status", "Loginstatus", "test", 20, '', null],
    [false, 'Mail Delivery', 'RmsDelivery', 'select', 0, '', ['No Email', 'All', 'Failure', 'Failure, Pending', 'Failure, Validation', 'Failure, Validation, Rejected', 'Failure, Validation,Pnding', 'Validation,Rejected,Failure, Pnding', 'Failure, Validation,Pnding,Success']],
];
this.edittable=null; 
```

}

当我尝试

```
 var columns = this.columns, data = this.data;
          var html = '<form id=' + this.formid + '>';
          html += '<table id=' + this.tableid + ' width=100% class=tableBox>';
         html += '<thead><tr>';
        for (i = 0; i < columns.length; i++) {
        if (!columns[i][0]) continue;
        html += '<th>' + columns[i][1] + '</th>';
} 
```

columns.length 变为 17，而 columns 为 16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:15:19.113

我认为您的代码似乎是正确的。***[见这里](http://jsfiddle.net/ekBNJ/1/)***。

将评论更改为：

```
/* [false, "login Status", "Loginstatus", "test", 20, '', null], */ 
```

### 根据评论

我检查了一下，似乎工作正常。

***[工作样本](http://jsfiddle.net/ekBNJ/5/)***

## 最后我得到了错误

在数组关闭之前，您的数组最后`this.columns`有尾随`comma(,)`。

***删除最后一个逗号***，一切都很好。

# sql - 如何选择每个品类价格最高的产品？

> ID：12366390
> 
> 赞同：6
> 
> 时间：2012-09-11T09:12:08.380
> 
> 标签：sql, sql-server, database, tsql

下面是我的表，其中包含以下项目：

```
ProductId       ProductName Category        Price
      1            Tiger      Beer          $12.00
      2             ABC       Beer          $13.99
      3            Anchor     Beer          $9.00
      4            Apolo      Wine          $10.88
      5           Randonal    Wine          $18.90
      6            Wisky      Wine          $30.19
      7             Coca     Beverage       $2.00
      8            Sting     Beverage       $5.00
      9             Spy      Beverage       $4.00
     10           Angkor      Beer          $12.88 
```

而且我想我`category`在这张表中只有三个（我可以在这张表中有很多`category`）。我想`category`在这张表中显示每个产品的最高价格。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T09:17:37.863

如果你想获得整排，试试这个，

（*支持大多数 RDBMS*）

```
SELECT  a.*
FROM    tbProduct a
        INNER JOIN
        (
            SELECT Category, MAX(Price) maxPrice
            FROM tbProduct
            GROUP BY Category
        ) b ON a.category = b.category AND
                a.price = b.maxPrice 
```

如果您正在使用`MSSQL 2008+`

```
WITH allProducts AS
(
SELECT  ProductId,ProductName,Category,Price,
        ROW_NUMBER() OVER (PARTITION BY CATEGORY ORDER BY Price DESC) ROW_NUM
FROM tbProduct
)
SELECT ProductId,ProductName,Category,Price
FROM allProducts
WHERE ROW_NUM = 1 
```

或者

```
SELECT ProductId,ProductName,Category,Price
FROM    
(
SELECT  ProductId,ProductName,Category,Price,
        ROW_NUMBER() OVER (PARTITION BY CATEGORY ORDER BY Price DESC) ROW_NUM
FROM tbProduct
) allProducts
WHERE ROW_NUM = 1 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!6/5bbc9/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:14:23.063

```
SELECT   Category,max(Price) as Price
FROM     tbProduct
GROUP BY Category 
```

如果您还想检索其他字段以及类别名称，则：

```
select * 
from  tbProduct T
join   (
         select Category,max(Price) as Price
         from tbProduct
         group by Category)a
on     T.Category=a.Category
and    T.Price=a.Price 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T09:18:39.223

```
select *
from
(Select *, 
        row_number() over (partition by category order by price desc) rn 
        from products) v
where rn=1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-11T09:14:41.473

这应该有效：

```
SELECT Category, MAX(Price)
FROM Products
GROUP BY Category 
```

这会按每个类别对表格进行分组，并使用`MAX`聚合函数来获得每个类别的最高价格。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T09:38:32.497

这是另一种方法，其中 MAX 被视为分析函数（自 SQL Server 2005 起可用）

```
 Declare @t table(ProductId  int identity, ProductName varchar(100), Category varchar(20), Price numeric(10,2))
    Insert Into @t Select 'Tiger','Beer',12.00
    Insert Into @t Select 'ABC','Beer',13.99
    Insert Into @t Select 'Anchor','Beer',9.00
    Insert Into @t Select 'Apolo','Wine',10.88
    Insert Into @t Select 'Randonal','Wine',18.90
    Insert Into @t Select 'Wisky','Wine',30.19
    Insert Into @t Select 'Coca','Beverage',2.00
    Insert Into @t Select 'Sting','Beverage',5.00
    Insert Into @t Select 'Spy','Beverage',4.00
    Insert Into @t Select 'Angkor','Beer',12.88

SELECT ProductId,ProductName,Category,Price
FROM(
        SELECT
            ProductId
            ,ProductName
            ,Category
            ,Price
            ,CASE WHEN Price =  MAX(Price) OVER(PARTITION BY Category ORDER BY (SELECT 1)) THEN 'Take' ELSE 'Leave' END AS PickUp   

        FROM @t

        )X  WHERE PickUp = 'Take' ORDER BY 1 
```

**结果**

```
ProductId   ProductName Category    Price
2           ABC         Beer            13.99
6           Wisky       Wine            30.19
8           Sting       Beverage        5.00 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-11T09:44:29.830

```
SELECT   Category,max(Price) as ProdPrice
FROM     tbProduct
GROUP BY Category 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-12T17:45:25.490

```
SELECT TOP(7)*,
             Row_number()
               OVER (
                 partition BY category
                 ORDER BY price DESC) rn
FROM   products
ORDER  BY price DESC 
```

# javascript - node.js 串口的游戏手柄

> ID：12366393
> 
> 赞同：0
> 
> 时间：2012-09-11T09:12:11.593
> 
> 标签：javascript, python, node.js, gamepad-api, node-serialport

我想用我的游戏手柄和[node.js 串口](https://github.com/voodootikigod/node-serialport)来控制机器人。

我不想重新发明轮子，所以是否可以将[pygames 操纵杆移植](http://www.pygame.org/docs/ref/joystick.html)到 javascript - 基于 Chris Williams 串行端口？

有人想过这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T17:51:28.547

我相信有人真的开始了[这样的项目](https://npmjs.org/package/node-pad)。

Creationix ( *AKA Tim Caswell* ) 也有一些他研究过并[写过博客的](http://nodebits.org/linux-joystick)东西。

# c# - 如何将 ffmpeg 输出传递给 C# 中的其他子类？

> ID：12366394
> 
> 赞同：0
> 
> 时间：2012-09-11T09:12:11.313
> 
> 标签：c#, asp.net, ftp, ffmpeg

我想将ffmpeg生成的缩略图传递给save_FTPUpload，其中save_FTPUpload函数是将图像文件上传到ftp服务器。我怎样才能做到这一点？这是我使用 ffmpeg 和“fileupload”函数将文件上传到 ftp 服务器的缩略图生成示例代码：

```
public partial class testtttt : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        generateThumbnail();
        string fi_attachment = @"C:\2.jpg";//source image file
        save_FTPUpload(fi_attachment);
    }

    private void generateThumbnail()
    {
        string thumbpath, thumbname, videofile;

        videofile = "http://www.xxxx.com/video.Avi";
        thumbpath = @"C:\";
        thumbname = thumbpath + Path.GetFileNameWithoutExtension(videofile) + ".jpg";

        string thumbargs = "-i \"" + videofile + "\" -vframes 1 -s 60*30 -ss 00:00:00 -f image2 \"" + thumbname + "\"";

        Process process = new Process();

        process.StartInfo.FileName = Server.MapPath("~\\ffmpeg\\bin\\ffmpeg.exe");
        process.StartInfo.Arguments = thumbargs;

        process.StartInfo.UseShellExecute = false;
        process.StartInfo.RedirectStandardOutput = true;
        process.StartInfo.RedirectStandardInput = false;
        process.StartInfo.RedirectStandardError = true;
        process.StartInfo.CreateNoWindow = false;
        process.StartInfo.WindowStyle = ProcessWindowStyle.Hidden;

        try
        {
            process.Start();
            string output2 = process.StandardError.ReadToEnd();
            string output3 = process.StandardOutput.ReadToEnd();

            if (process != null)
            {
                process.Close();
            }
        }

        catch (Exception)
        {
            this.lblMessage.Text = "Thumbnail created successfuly";//ex.Message.ToString();
        }
    }

    public bool save_FTPUpload(string fi_attachment)
    {
        bool fileSaved = false;
        //string fi_attachment = @"C:\1.jpg";
        string filename = "3.jpg";//image name to be saved in ftp
        string ftp_user = "*****"; //username
        string ftp_pass = "*****"; //password
        string ftpURI = "ftp://www.xxxx.com/thumb/"; //ftp path where the image will be saved

        while (!fileSaved)
        {
            string file_ftpURI = string.Format("{0}/{1}", ftpURI, filename);
            FtpWebRequest file_exist_request = (FtpWebRequest)FtpWebRequest.Create(file_ftpURI);
            file_exist_request.Credentials = new NetworkCredential(ftp_user, ftp_pass);
            file_exist_request.Method = WebRequestMethods.Ftp.GetFileSize;
            try
            {
                FtpWebResponse response = (FtpWebResponse)file_exist_request.GetResponse();
            }
            catch (WebException ex)
            {
                FtpWebResponse response = (FtpWebResponse)ex.Response;
                if (response.StatusCode ==
                    FtpStatusCode.ActionNotTakenFileUnavailable)
                {
                    FtpWebRequest upload_request = (FtpWebRequest)FtpWebRequest.Create(file_ftpURI);
                    upload_request.Credentials = new NetworkCredential(ftp_user, ftp_pass);

                    upload_request.Method = WebRequestMethods.Ftp.UploadFile;
                    upload_request.UsePassive = true;
                    upload_request.UseBinary = true;
                    upload_request.KeepAlive = false;

                    using (var fs = File.OpenRead(fi_attachment))
                    using (Stream upload_request_stream = upload_request.GetRequestStream())
                    {
                        fs.CopyTo(upload_request_stream);
                    }
                    FtpWebResponse upload_response = (FtpWebResponse)upload_request.GetResponse();

                    fileSaved = true;
                    this.Label1.Text = "Upload Successful";
                }
            }
        }
        return fileSaved;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:16:49.117

您确定 ffmpeg 将使用的输出文件名，那么为什么不使用它呢？

使用的文件名也可以出现在标准输出中，但是您已经知道它了，因为您自己选择了它。

因此，如果 generateThumbnail 将返回 thumbname，您可以将其传递给 FTPUpload。

# jquery - jqGrid在同一页面中的多个网格具有不同的警报框位置

> ID：12366396
> 
> 赞同：1
> 
> 时间：2012-09-11T09:12:22.553
> 
> 标签：jquery, jqgrid

## 我们如何在 jgGrid 的中间放置一个警告消息对话框？

我`jgGrids`在页面上使用了两个并尝试了`alerttop`，`alertleft`如[jqGrid 警告](https://stackoverflow.com/questions/11719349/jqgrid-warning-please-select-row-position)`Oleg`中所建议的， 请选择行位置

但问题是，页面中的所有网格都重复使用相同的警报框选项。在`jqGrid`ids 中，警报框是静态的，而不是基于网格上下文的。

（行号：4.4.0 源文件中的 8531）

```
var alertIDs = { themodal: 'alertmod', modalhead: 'alerthd', modalcontent: 'alertcnt' } 
```

以下代码仅针对一个网格执行

```
*if ($("#" + alertIDs.themodal).html() === null) {
                    if (!o.alerttop && !o.alertleft) {* 
```

因此，我无法为每个网格放置警报框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T11:25:25.773

我同意，这是 jqGrid 中的一个问题。同样的问题出现在添加/编辑/删除/查看对话框中，但问题已经解决。

我建议你换行

```
var alertIDs = { themodal: 'alertmod', modalhead: 'alerthd', modalcontent: 'alertcnt' } 
```

到

```
var alertIDs = {themodal: 'alertmod_' + this.p.id,
        modalhead: 'alerthd_' + this.p.id, modalcontent: 'alertcnt_' + this.p.id} 
```

直接在文件中`jquery.jqGrid.src.js`。

**UPDATED**: After writing of the answer I posted [the bug report](http://www.trirand.com/blog/?page_id=393/bugs/make-alertmod-dialog-unique-for-every-grid/#p27301). Now I can inform everybody that [the corresponding fix](https://github.com/tonytomov/jqGrid/commit/a21168b84bbedeaae823287c3b8de7f5c4dcb8e3) is already included in the main jqGrid code on the github. So the next release of jqGrid (with the version higher as the current 4.4.1) will include it.

# ffmpeg - 使用 ffmpeg 从视频中获取带时间戳的图像序列

> ID：12366397
> 
> 赞同：1
> 
> 时间：2012-09-11T09:12:22.670
> 
> 标签：ffmpeg

我应该如何使用 ffmpeg 从视频中获取时间戳图像？例如;

```
image-0001 --> 0:00:00.0000
image-0002 --> 0:00:01.0000
image-0003 --> 0:00:02.0000
..... 
```

我努力了;

```
ffmpeg -i input.flv -ss 00:00:00.0000 -r 1 image%4d.jpg 
```

但是似乎使用此代码，ffmpeg每秒并不完全拍摄一张照片，并且无法从图像文件编号准确计算出所拍摄照片的时间。

# c# - 将 .msg 文件转换为 .xps 格式？

> ID：12366398
> 
> 赞同：1
> 
> 时间：2012-09-11T09:12:24.317
> 
> 标签：c#, outlook, ms-office, xps

我的应用程序将 Microsoft Office 文档转换为 .XPS 文件。

我已成功使用 Office Interop 转换 Word、Excel 和 PowerPoint 文件。我不知道如何对“Outlook 消息格式 (.msg)”文件执行相同操作。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:11:29.227

您将[首先将**MSG**转换为**DOC**](http://msdn.microsoft.com/en-us/library/office/aa210279%28v=office.11%29.aspx)、**HTML**或**MHTML**，然后再将其[转换为 **XPS**](http://msdn.microsoft.com/en-us/library/office/bb412305%28v=office.12%29.aspx)。Outlook 互操作中不支持从**MSG**到**XPS**的直接转换。

```
mailItem.SaveAs(targetDoc, Outlook.OlSaveAsType.olDoc); // convert MSG to DOC
// convert DOC as XPS
var wordDocument = wordApplication.Documents.Open(targetDoc);
if (wordDocument != null)
    wordDocument.ExportAsFixedFormat(targetXPS, 
        Word.WdExportFormat.wdExportFormatXPS, paramOpenAfterExport, paramExportOptimizeFor,
        paramExportOptimizeFor, paramExportRange, paramStartPage,
        paramEndPage, paramExportItem, paramIncludeDocProps, 
        paramKeepIRM, paramCreateBookmarks, paramDocStructureTags, 
        paramBitmapMissingFonts, paramUseISO19005_1,
        ref paramMissing); 
```

# python - Python sqlite3 查询适用于终端，但不适用于应用程序

> ID：12366400
> 
> 赞同：1
> 
> 时间：2012-09-11T09:12:27.237
> 
> 标签：python, sqlite, flask

已经看过这些类似的问题，但没有高兴：

[PHP MySQL Query 不起作用，但从终端](https://stackoverflow.com/questions/3775072/php-mysql-query-doesnt-work-but-works-from-terminal) [Sqlite 更新无法正常工作 - python](https://stackoverflow.com/questions/4741251/sqlite-update-dont-working-right-python)

我正在使用带有 SQLite 的 Flask 并有以下查询：

```
g.db.execute( "UPDATE article_views SET views=views+1 WHERE id=:id" , { "id": this_id } ) 
```

this_id 是一个整数。这执行没有错误。但是当我检查我的数据库时，没有发生预期的更新。

有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T09:14:04.080

我怀疑您也需要[*提交*交易](http://docs.python.org/library/sqlite3.html#sqlite3.Connection.commit)：

```
g.db.commit() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:22:34.977

我不是 100% 确定，但我相信 Sqlite3 的占位符`?`不是`:1`或`%s`样式 - 您是否尝试查看以下内容是否有效：

```
g.db.execute( "UPDATE article_views SET views=views+1 WHERE id=?", (this_id,) ) 
```

虽然我预计会出现某种错误，而不仅仅是无声的失败......

# node.js - Jade 中的 Foreach 循环（node.js 模板引擎）

> ID：12366402
> 
> 赞同：29
> 
> 时间：2012-09-11T09:12:29.080
> 
> 标签：node.js, foreach, associative-array, pug

好的，我从节点服务器获取关联数组并尝试在 Jade 中呈现它。我显然需要一个 foreach 循环，但似乎没有任何效果！我尝试了这两个代码：

```
- foreach row in rows {
    li= row
- } 
```

和

```
- rows.forEach(function(item)) {
    li= item
- }) 
```

我传递的数组称为“行”。知道为什么这不起作用吗？我收到此错误：

```
500 SyntaxError: Unexpected identifier 
```

并且，使用第二个代码：

```
500 SyntaxError: Unexpected token ) 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-11T09:25:04.587

尝试

```
each item in rows
    li= item 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-07T22:57:00.433

你的第二个例子可以工作，除非你有一个小的语法错误 - 一个额外的括号，它应该是：

```
- rows.forEach(function(item) {
  li= item
- }) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-13T14:42:24.667

您可以使用

```
ul
  each val, index in ['zero', 'one', 'two']
    li= index + ': ' + val 
```

或者

```
ul
  each val, index in {1:'one',2:'two',3:'three'}
    li= index + ': ' + val 
```

看到这个[链接](https://naltatis.github.io/jade-syntax-docs/#for)

# javascript - 为什么浏览器会卡在这个 javascript 循环中？

> ID：12366403
> 
> 赞同：0
> 
> 时间：2012-09-11T09:12:31.953
> 
> 标签：javascript, jquery

我不知道为什么浏览器会挂起并在此函数的第一个 for 循环中被捕获，arguments.length 也不打印 console.log。

这是传递颜色选择器自己的 id 的 click 函数，然后是要更改的变量其他属性：

```
$('#colorSelector3').click(function(){
colorPickDynamic('#colorSelector3','h1','color');
}); 
```

这是浏览器在第一个 for 循环中挂起的函数：

```
function colorPickDynamic(cp){
    var i,
        j,
        x,
        tag = [],
        colorProperty = [];

    for (x=0, i = 1, j = 2; x <= arguments.length; i+=2, j+=2, x++) {

        tag[x]=arguments[i];
        colorProperty[x]=arguments[j];

        console.log(arguments.length);
        console.log(colorProperty[x]);
    }

    $(cp).ColorPicker({
        color: '#0000ff',
        onShow: function (colpkr) {
            $(colpkr).fadeIn(500);
            return false;
        },
        onHide: function (colpkr) {
            $(colpkr).fadeOut(500);
            return false;
        },
        onChange: function (hsb, hex, rgb) {
            for (j = 2; j < arguments.length; j+=1) {
                $(tag[0]).css(colorProperty[0], '#' + hex);
            }
            $(cp + ' div').css('backgroundColor', '#' + hex);
        }
    });
} 
```

任何帮助都会很棒！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:15:56.153

你确定它挂起（例如无限循环）吗？而不仅仅是简单的崩溃？

因为您正在访问`arguments[i]`，其中参数从 1 开始，每次迭代递增 2。如果 arguments 包含零个或一个元素，它将在第一次迭代时崩溃`arguments[1]`，在任何日志记录完成之前尝试访问。

你打算访问`arguments[x]`吗？

# javascript - jqgrid hlink 用户格式

> ID：12366408
> 
> 赞同：1
> 
> 时间：2012-09-11T09:13:00.623
> 
> 标签：javascript, jquery, jqgrid

我正在使用`jqgrid`数据`json`，格式如下
`{"my_id" : 12345, "doc_number" : 9786}`

我想使用一个 hlink 格式化程序，它显示`doc_number`但`my_id`用作我的 Javascript 函数的参数。

`my_id`是`id`用户不必知道的技术。他只需要知道`doc_number`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:37:50.363

这是示例 colModel 配置

```
colModel: [ {name:'myname', 
             edittype:'select', 
             formatter:'showlink', 
             formatoptions:{baseLinkUrl:'someurl.php', addParam: '&action=edit'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:39:26.523

```
function FilterData() {
    jQuery("#grid").jqGrid('setGridParam', { page: 1 });
    jQuery("#grid").trigger("reloadGrid");
}
function drawHyperLink(cellvalue, options, rowObject) {

    var new_formatted_cellvalue = "";
         new_formatted_cellvalue = "<a class='green'  href='Make_A_Bid?xyzparam=" + rowObject.my_id + "'>doc_number</a>";
         return new_formatted_cellvalue;
}

$(document).ready(function () {
    var grid_width = ($("#Div_IntradayStatus").width() * 90) / 100;

    $('#grid').jqGrid({
        colNames: [doc_number],
        colModel: [

                    { name: 'doc_number', index: 'doc_number', formatter: drawHyperLink }
                  ],
        pager: jQuery('#pager'),
        sortname: 'doc_number',
        rowNum: 20,
        rowList: [5, 10, 20, 50],
        sortorder: "desc",
        width: grid_width,
        height: 'auto',
        datatype: 'json',
        caption: '&nbsp;',
        viewrecords: true,
        mtype: 'POST',
        jsonReader: {
            root: "rows",
            page: "page",
            total: "total",
            records: "records",
            repeatitems: false,
            userdata: "doc_number"
        },
        //or ondblClickRow
        onSelectRow: function (id) {
            var row = $('#grid').getRowData(id);
        },
        onPaging: function (pgButton) {
            // if user has entered page number
            if (pgButton == "user") {
                // find out the requested and last page
                var requestedPage = $("#grid").getGridParam("page");
                var lastPage = $("#grid").getGridParam("lastpage");
                // if the requested page is higher than the last page value 
                if (parseInt(requestedPage) > parseInt(lastPage)) {
                    // set the requested page to the last page value – then reload
                    $("#grid").setGridParam({ page: lastPage }).trigger("reloadGrid");
                }
            }
        },
        url: your url
    })

    jQuery("#grid").jqGrid('navGrid', '#pager', { edit: false, add: false, del: false, search: false, refresh: false });
}); 
```

你必须做这样的事情

# jquery - “$(document).ready”函数的替代方案

> ID：12366410
> 
> 赞同：27
> 
> 时间：2012-09-11T09:13:02.613
> 
> 标签：jquery, asp.net, fancybox, document-ready

我在 aspx 页面中使用 fancybox。文档就绪功能在此页面中不适用于灯箱。有人告诉我编写一个新的 javascript 代码来加载该页面中的灯箱。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-11T09:51:08.853

*   包括 jQuery。
*   检查您没有收到 404 的网络选项卡。
*   检查控制台，您没有收到“$ 未知”。

当 DOM 准备好时做一些事情。

```
$(function(){
   // DOM Ready - do your stuff 
}); 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-12-20T17:16:20.833

尝试这个：

```
document.addEventListener('DOMContentLoaded', function() {
   // ...
}); 
```

适用于现代浏览器和 IE9+

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-11T09:18:49.887

如果这是您所缺少的，您可以使用标准的 js onload 函数来运行：

```
window.onload = function() {}; 
```

请注意，这可能会给您带来库问题 - 我没有对此进行调查。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-08-13T21:41:42.310

我相信使用脚本`defer`标签是最好的解决方案。例如，

```
<script src="demo_defer.js" defer></script> 
```

[W3 学校](https://www.w3schools.com/tags/att_script_defer.asp)的更多信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-12-23T12:49:36.950

最好的方法是这样使用：

```
jQuery.noConflict();
(function($) {
  $(function() {
   // by passing the $ you can code using the $ alias for jQuery
   alert('Page: ' + $('title').html() + ' dom loaded!');
  });
})(jQuery); 
```

# jquery - 使用jquery mobile动态设置单选按钮处于活动状态

> ID：12366413
> 
> 赞同：2
> 
> 时间：2012-09-11T09:13:09.463
> 
> 标签：jquery, mobile

我正在使用 jquery 移动水平控制组单选按钮。

如何将第一个单选按钮设置为活动状态。以下是两个单选按钮，

```
<input type="radio" name="rating" id="radio-mini-1" value="Above Average" /><label for="radio-mini-1">Above<br /> Average</label> 
```

平均

我尝试使用以下代码，

```
$('input:radio[name="rating"]').filter('[value="Above Average"]').attr('checked', true); 
```

但没有运气。怎么了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-11T14:57:25.920

您需要调用刷新。

```
$(..selector...).attr("checked",true).checkboxradio("refresh"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-11T09:35:22.923

当你使用 jQueryMobile 时，html 结构会发生变化，所以你必须做一些技巧，试试这个：

```
$('input:radio[name="rating"]').filter('[value="Above Average"]').next().click() 
```

如果它不起作用，试试这个：

```
$('input:radio[name="rating"]').filter('[value="Above Average"]').parent().find("label[for].ui-btn").click() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-08T21:09:36.057

这个功能很好用：

功能 set_jqm_radio_button（按钮名称，值）{

```
$( 'input:radio[name="' + button_name + '"]' ).filter( '[value="' +value + '"]' ).prop( 'checked', true ).checkboxradio( 'refresh' ); 
```

}

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-11T09:20:02.103

我不知道 jquery mobile 是如何工作的，但试试这个

```
$('input:radio[name="rating"]').filter('[value="Above Average"]').prop('checked', true); 
```

作为[reagten](https://stackoverflow.com/users/1652211/reagten)的建议，请粘贴 HTML 代码，我会更新我的答案。

但你的代码工作正常：http: [//jsfiddle.net/dH69J/](http://jsfiddle.net/dH69J/)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-11-26T16:07:07.830

对我来说，它的工作方式很简单

```
$("#myItem").prop("checked", true) 
```

我没有看到上面解释的那么复杂......

# nhibernate - 有没有办法从会话工厂对象定义中排除一些 hbm 映射文件？

> ID：12366414
> 
> 赞同：2
> 
> 时间：2012-09-11T09:13:13.877
> 
> 标签：nhibernate, mapping, spring.net

我已经使用多会话工厂对象构建了一个基于 Spring.NET/NHibernate 的应用程序。

我将所有 hbm 文件放在一个程序集中。

```
/Assembly/
....Database1
........abc.hbm.xml
....Database2
........xyz.hbm.xml 
```

我想知道是否有任何方法可以排除会话工厂对象定义的 hbm 文件。

就像这样（你看到排除标签了吗？）：

```
<object id="Db1SessionFactory" type=DataAccess.HibernateLocalSessionFactoryObject, DataAccess">
<property name="MappingAssemblies">
    <list>
         <value>DataAccess</value>
         <exclude>xyz.hbm.xml</eclude>
    </list>
</property> 
```

或者...，也许您可​​以通过其他解决方案帮助我？另外，我不想将 hbm 文件分成几个程序集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:41:48.860

我不会采用排除方式，因为这需要您在为“数据库 3”添加映射文件时更改生产中的所有配置文件。更好的方法是专门*包含*会话工厂所需的映射（目录）。

话虽如此，您可以实现自己的`SessionFactoryObject`继承，`LocalSessionFactoryObject`它需要一个程序集和（例如）一个命名空间或文件夹来加载程序集。有关如何`SessionFactoryObject`使用自定义配置创建自己的示例，您可以查看[Benny Michielsen 的 FluentNHibernate 示例](http://blog.bennymichielsen.be/2009/01/04/using-fluent-nhibernate-in-spring-net/)。

编辑......它可能看起来像这样（未经测试！）

```
public class LoadMappingsFromFolderInAssemblySessionFactoryObject
              : LocalSessionFactoryObject
{
    // inject with the name of the assembly to load
    public string MyMappingAssembly { get; set; }
    // inject with the path to the folder within the assembly
    public string MyFolder { get; set; }

    protected override void PostProcessConfiguration(Configuration config)
    {
        base.PostProcessConfiguration(config);
        // snip ... guard methods omitted
        Assembly asm = GetAssembly(MyMappingAssembly);
        IEnumerable<string> paths = GetResourcePaths(MyFolder, asm);
        config.AddResources(paths, asm);
    }
    // snip ...
} 
```

# asp.net - ASP.NET 中的页面组件/模块

> ID：12366416
> 
> 赞同：0
> 
> 时间：2012-09-11T09:13:24.770
> 
> 标签：asp.net, components

是否可以使用可重用的页面组件编写 ASP.NET (.NET 4) 应用程序？

我的意思是代码片段之类的东西，可插入多个页面，例如登录表单，女巫处理自己的帖子请求。然后在主页和登录页面中使用此代码段。这只是一个例子，但我希望它能证明我在说什么。

这里有任何准备好的课程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:19:03.793

您可以使用`UserControl`.

链接：http: [//msdn.microsoft.com/fr-fr/library/system.windows.controls.usercontrol.aspx](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.usercontrol.aspx)

您也可以使用`CustomControl`或`MasterPage`

# android - Edittext inputType="textCapCharacters" 不能在 Android 4.0+ 上运行？

> ID：12366418
> 
> 赞同：3
> 
> 时间：2012-09-11T09:13:36.143
> 
> 标签：android, android-edittext, android-4.0-ice-cream-sandwich

Editext`inputType="textCapCharacters"`似乎在 Android 2.3 上工作（默认情况下打开带有大写字母的键盘），但在 4.0 上没有这样做。我是否遗漏了某些东西，或者这部分 API 是否已弃用（找不到任何参考）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T14:52:20.977

我猜它只适用于普通键盘，自定义键盘会覆盖这些设置。我在 Android 4.0 上对其进行了测试，它仅适用于普通键盘，不适用于第三方键盘。

# c++ - 在我的字符串中找不到以引号等标点符号开头的准确单词数

> ID：12366422
> 
> 赞同：0
> 
> 时间：2012-09-11T09:13:44.850
> 
> 标签：c++, string, count, words, punctuation

我正在编写一个代码，我应该在其中找到字符串中的单词数，因为我知道每个单词都可以由 AZ（或 az）以外的任何字符分隔。我写的代码只有在句首没有标点符号的情况下才能正常工作。但是，当句子以引号等标点符号开头时，麻烦就来了（即“仅连接。”结果将显示 3 个单词而不是 2 个单词）。我正在使用 Dev-C++ 在 C++ 中编程。您的帮助将不胜感激。我的代码如下：

```
#include <cstring>
#include <iostream>
#include <conio.h>
#include <ctype.h>

using namespace std;

int getline();   //scope
int all_words(char prose[]);  //scope

int main()
{
   getline();
   system ("Pause");
   return 0;
}

int getline()
{
    char prose[600];
    cout << "Enter a sentence: ";

    cin.getline (prose, 600); 
    all_words(prose);
    return 0;
}

int all_words(char prose[])
{ int y, i=0, k=0; int count_words=0; char array_words[600], c;

    do
     {

        y=prose[i++];
        if (ispunct(y))  //skeep the punctuation
         i++;

         if ((y<65 && isspace(y)) || (y<65 && ispunct(y)))     //Case where we meet spacial character or punctuation follwed by space

          count_words++;   //count words

         if (ispunct(y))  //skeep the punctuation
           i++;

    }while (y); //till we have a character

    cout <<endl<<" here is the number of words  "<< count_words <<endl;

   return 0; 

 }

 ***********************************Output******************************
  Enter a sentence: "Only connect!"

  here is the number of words  3

  Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:25:43.143

我认为你需要重新考虑你的算法。在我的脑海中，我可能会这样做：

*   循环而不是字符串的结尾
    *   跳过所有非字母字符 ( `while (!std::isalpha)`)
    *   跳过所有字母字符 ( `while (std::isalpha)`)
    *   增加字数计数器

记得在这些内部循环中检查字符串的结尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:51:20.267

第一的

```
if (ispunct(y)) 
```

在第一个引号中，您增加了计数器 i，但 var y 仍然包含“，这是产生第二个条件为真。最后一个”为您提供 count_words++ 的额外增量；

```
if ((y<65 && isspace(y)) || (y<65 && ispunct(y))) 
```

无论如何，您的任务只是将字符串拆分为标记并计算它们。示例解决方案可以在这里[找到](https://stackoverflow.com/questions/53849/how-do-i-tokenize-a-string-in-c)。

# android - 为什么使用cordova插件时“setAttributes()”不能正常工作？

> ID：12366423
> 
> 赞同：0
> 
> 时间：2012-09-11T09:13:46.903
> 
> 标签：android, plugins, cordova, brightness, setattribute

我想创建一个连接到javascript的插件，同时使用cordova作为插件，这是我的javascipt代码：

```
var Brightness = function() {};

Brightness.prototype.brightnessUp = function( success, error ) 
{
    return cordova.exec( success, error, "Brightness", "brightnessUp", [] );
}; 
```

和我的插件代码：

```
public PluginResult execute(String action, JSONArray data, String callbackId) {
    PluginResult result = null;
    if(action.equals(BRIGHTNESS_UP)){
        lightUP();
        result = new PluginResult(Status.OK);
    }

    return result;
}

public void lightUP(){
    WindowManager.LayoutParams layoutParams = cordova.getActivity().getWindow().getAttributes();
    layoutParams.screenBrightness = 1.0f;
    cordova.getActivity().getWindow().getAttributes().screenBrightness = 1.0f;
    cordova.getActivity().getWindow().setAttributes(layoutParams);
    cordova.getActivity().getWindow().addFlags(WindowManager.LayoutParams.SCREEN_BRIGHTNESS_CHANGED);
} 
```

不知何故，我不知道为什么“setAttributes(layoutParam)”没有对我的应用程序中的亮度屏幕进行任何更改。

不小心按下主页按钮，然后返回应用程序，屏幕亮度突然根据 layoutParams 改变。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T01:02:13.757

你所拥有的在一定程度上是正确的。您需要在设置亮度后立即启动虚拟活动，以使更改生效。看看这个 SO 答案：

[https://stackoverflow.com/a/7658364/41679](https://stackoverflow.com/a/7658364/41679)

# html - 包含的 HTML 文档类型（Visual Studio 或 HTML 通用）

> ID：12366426
> 
> 赞同：5
> 
> 时间：2012-09-11T09:14:00.967
> 
> 标签：html, visual-studio, include, doctype

是否有包含的文档**类型**，它告诉验证器（在设计时，我的 IDE VS2010）不要检查包含的 HTML 片段（或进行宽松的检查）。

我有一个主页（[其中包括带有 T4 的 HTML 部分](https://stackoverflow.com/questions/12359804/vs2010-disable-validation-for-particular-html-file-not-all-files)），例如选项。验证器抱怨包含的 html 文件，该文件`<optgroup>`不能位于根级别。这是正确的，但对于包含的文件（仅包含这些选项）是不需要的。

我可以给 HTML 一个提示，而不是检查包含文件上的那些东西吗？该解决方案可以是**特定**于我的 IDE (VS2010)的，也可以是**通用**的（甚至更好），如 HTML 标准。

```
<optgroup label="Africa">
    <option>North Africa</option>
    <option>South Africa</option>
</optgroup>
.... 
```

![VS2010 IDE 验证器](../Images/b2a3b9e62fefbaabb59d78daa1d04505.png)

PS：我不想完全禁用检查（我知道可以这样做）。这不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:56:37.387

[安装Microsoft Visual Studio 2010 SP1 的 Web 标准更新](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83)后，这些错误是否仍然存在？

如果你觉得它真的很烦人，你总是可以在*工具 -> 选项 -> 文本编辑器 -> html -> 验证下完全禁用它*

# semantics - Protege 4 中的 SWRL 选项卡

> ID：12366438
> 
> 赞同：3
> 
> 时间：2012-09-11T09:14:34.827
> 
> 标签：semantics, ontology, owl, protege, swrl

protege SWRL 选项卡在 Protege 4 版本中不可用，我已尝试过 protege 4.1 和 protege 4.2。据说在 protege 中编辑 SWRL 规则的 axiome 插件仅在 protege 3 版本中有效。

谁能告诉我插件或程序包含插件以在 protege 中编辑 SWRL 规则？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-12T07:04:47.893

SWRL 规则可以在 Protégé 4 中进行编辑，但不像 Protégé 3 那样具有良好的界面。如果您进入菜单 Window -> Views -> Ontology views，则有一个选项 Rules。选择它并将其添加为“视图”，即当前选项卡中的矩形。规则是这样写的：

```
parent(?x,?y), brother(?y,?z) -> uncle(?x,?z) 
```

其中属性写成二元谓词，类写成一元谓词，变量以问号为前缀，head 与 body by 分开`->`，常量只写没有本体前缀。如果您使用的属性、类和个人之前没有在相应的选项卡中定义，则它不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-07T23:07:55.160

您可以使用 ORE 本体规则编辑器，我正在使用它，它运行良好 [http://sourceforge.net/projects/ore/](http://sourceforge.net/projects/ore/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T14:28:28.070

Protege 4.x 中有一个支持 SWRL 推理的 Pellet 插件：

[http://clarkparsia.com/pellet/protege/](http://clarkparsia.com/pellet/protege/) （推理可以在Reasoner/选择Pellet后启动reasoner开始）

这是一个关于 Protege 4.x 和 SWRL 集成的非常完整的教程：

[http://dior.ics.muni.cz/~makub/owl/](http://dior.ics.muni.cz/~makub/owl/)

# jquery - jQuery / PHP：使用 slideToggle 在两行之间显示更多信息

> ID：12366441
> 
> 赞同：0
> 
> 时间：2012-09-11T09:14:43.470
> 
> 标签：jquery, events, html-table, row, slidetoggle

我几乎完成了我的事件表，但还需要做最后一件事。我创建了一个表，现在我想通过单击一个事件来显示信息。

我的实际代码没有 slideToggle。如果您单击一个事件，它会在一个新页面上打开该事件，我对此并不幸运。我想打开该行下方事件的附加信息。

这是实际代码（更新）：

```
<?php
$query = "SELECT `id`, TIME_FORMAT(doors,'%H:%i') AS `doors`, TIME_FORMAT(begin,'%H:%i') AS `begin`, `category`, `who`, `infos`, `location`, `smoke`, `dogs`, DATE_FORMAT(date,'%d.%m.%Y') AS `de_date` FROM `events` WHERE `status` = 'enabled' ORDER BY `date` ASC";
$events_resource = mysql_query($query) or die(mysql_error());
?>

<table class="tableLine">
<tr>
<th>Wann?</th>
<th>Was?</th>
<th>Wer?</th>
<th>Wo?</th>
</tr>

<?php
$all_events = array();
$ten_events = array();

for($i = 0; $events = mysql_fetch_object($events_resource); $i++){

if($i < 9){

    $ten_events[] = $events;
}

$all_events[] = $events;
}  

$i = 0;

foreach($ten_events as $event): ?>
<tr class="row" class="show_button" href="#">
    <td><?=$event->de_date?></td>
    <td><?=$event->category?></td>
    <td><?=$event->who?></td>
    <td><?=$event->location?></td> 
</tr>
<tr>
<td class="eventinfos" colspan="4">
<?=$event->infos?>
</td>
</tr>
<?php endforeach; ?>
</table>
<script>
$(document).ready(function(){
$('.eventinfos').hide();
$('.show_button').click(function(){
$(this).closest('.row').find('.eventinfos').slideToggle();
})
})
</script> 
```

好吧，我真的不知道将隐藏信息放在哪里（使用 div？）以及我需要使用哪个 slideToggle-code 以及放在哪里。我用这段代码做了一些尝试，但我的知识还不够好。

这是我想要的 Photoshop 示例： ![在此处输入图像描述](../Images/a630a05fe92ef472526c51360a20e3b4.png)

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:18:04.497

将信息放入 div 并将此代码放入您的脚本中

```
$(document).ready(function(){
    $("#inform_id").hide();
    $("#show_button").click(function(){
         $("#inform_id").toggle();
   })
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:48:59.217

试试这个（更新）：

```
<table class="tableLine">
<?php foreach($ten_events as $event): ?>
  <tr class="show-info" style="cursor: pointer;">
        <td><?=$event->de_date?></td>
        <td><?=$event->category?></td>
        <td><?=$event->who?></td>
        <td><?=$event->location?></td>
  </tr>
  <tr class="event-info">
        <td colspan="4"><?=$event->infos?></td>
  </tr>
<?php endforeach; ?>
</table>
<script>
  $(document).ready(function(){
    $('.show-info').on('click', function(){
      $(this).next('.event-info').slideToggle();
    })
  })​
</script> 
```

要最初隐藏信息行，请指定 css-rule（在您的 css 文件或页面头部的样式部分中）：

```
.event-info {
    display: none;
} 
```

请参阅我的代码：http: [//jsfiddle.net/JEU6T/8/UPD](http://jsfiddle.net/JEU6T/8/) **。**查看更多通用代码（javascript中的一些变化）：http: [//jsfiddle.net/Eb3t3/3/](http://jsfiddle.net/Eb3t3/3/)

# vb.net - 根据条件更改数据网格视图中单元格的内容

> ID：12366443
> 
> 赞同：0
> 
> 时间：2012-09-11T09:15:12.873
> 
> 标签：vb.net, datagridview

我正在从 SQL 语句填充 datgridview。该列表来自 SharePoint 日历，如果事件是全天事件，我想将结束日期列设为空白。这是我的代码：

```
Me.UserDataTableAdapter.Fill(Me.WSS_ContentDataSet.UserData)

    For i As Integer = 0 To Me.DataGridView1.Rows.Count - 1
        If Me.DataGridView1.Rows(i).Cells("bit1").Value = True Then
            Me.DataGridView1.Rows(i).Cells("Datetime2").Value = ""
        End If
    Next 
```

如果我将应该删除 datetime2 单元格的值的行更改为 msgbox("This is an all day event") 它可以工作，因此条件测试很好。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:19:19.563

事实证明我没有调用正确的单元格名称。它应该是：

```
Me.DataGridView1.Rows(i).Cells("Datetime2DataGridViewTextBoxColumn").Value = "" 
```

# android - GCM - 注册完成后 registerID 立即为空

> ID：12366445
> 
> 赞同：2
> 
> 时间：2012-09-11T09:15:21.753
> 
> 标签：android, registration, android-c2dm, google-cloud-messaging

我终于让应用程序可以使用 GCM（Google Cloud Messaging）了。但我有一个问题。注册完成后的那一刻，我想获取registrationId。除了registrationId为空，除非我重新启动应用程序，否则它会返回一个值。

基本上我想要的是在注册完成后立即检索 registerId 。

这是我正在使用的代码：

```
checkNotNull(SENDER_ID, "SENDER_ID");

GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

TextView mDisplay = (TextView) findViewById(R.id.display);

String regId = "";

if (!GCMRegistrar.isRegistered(this))
{
    mDisplay.setText("registering");
    GCMRegistrar.register(this, SENDER_ID);

    regId = GCMRegistrar.getRegistrationId(this);
    String url = "localhost/Google-Cloud-Messaging-Server-Test/registration.php?regId=" + regId;

    Log.i(TAG, "registration url: " + url);
    HttpRequest httprequest = new HttpRequest(url);
}
else
{
    regId = GCMRegistrar.getRegistrationId(this);

    mDisplay.setText(regId);
    Log.v(TAG, "Already registered");

    GCMRegistrar.unregister(this);
} 
```

问题是代码到了这一步之后：

```
regId = GCMRegistrar.getRegistrationId(this);
String url = "localhost/Google-Cloud-Messaging-Server-Test/registration.php?regId=" + regId; 
```

regId 为空。它应该有一个值，因为注册成功。难道我做错了什么？是否有可能在它实际上仍在经历注册过程时尝试获取registrationId？

在此先感谢，
马克

编辑： manifest.xml 内容

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.codeglue.google.cloud.messaging.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="10"
    android:targetSdkVersion="15" />

<permission
    android:name="com.codeglue.google.cloud.messaging.test.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.codeglue.google.cloud.messaging.test.permission.C2D_MESSAGE" />
<uses-permission android:name="android.permission.GET_ACCOUNTS" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <activity
        android:name=".MainActivity"
        android:label="@string/app_name" >

        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="com.codeglue.google.cloud.messaging.test" />
        </intent-filter>
    </receiver>

    <service android:name=".GCMIntentService" />

</application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T15:12:09.180

1.  `GCMregistrar.register()`方法将`com.google.android.c2dm.intent.REGISTER`Intent（异步）发送到 google（查看[注册 GCM](http://developer.android.com/guide/google/gcm/gcm.html#registering)文档和 GCMregistrar 源，尤其是[register](https://code.google.com/r/sachinworldnet-pushnote/source/browse/gcm-client/src/com/google/android/gcm/GCMRegistrar.java?spec=svn2f8f3795e6e7ae45be1f8856fcd5047fe041ada4&r=2f8f3795e6e7ae45be1f8856fcd5047fe041ada4#214)和[internalRegister](https://code.google.com/r/sachinworldnet-pushnote/source/browse/gcm-client/src/com/google/android/gcm/GCMRegistrar.java?spec=svn2f8f3795e6e7ae45be1f8856fcd5047fe041ada4&r=2f8f3795e6e7ae45be1f8856fcd5047fe041ada4#220)方法）。

2.  然后 Google 处理您的`com.google.android.c2dm.intent.REGISTER`Intent 并发送`com.google.android.c2dm.intent.REGISTRATION`带有注册 ID 的 Intent 作为响应。

3.  然后当`com.google.android.c2dm.intent.REGISTRATION`意图来自谷歌（进入响应）时，广播接收器（注册用于处理这种类型的意图）将被调用，并且只有在该注册ID之后才会被保存到`SharedPreferences`.

我提醒[getRegistrationId()](https://code.google.com/r/sachinworldnet-pushnote/source/browse/gcm-client/src/com/google/android/gcm/GCMRegistrar.java?spec=svn2f8f3795e6e7ae45be1f8856fcd5047fe041ada4&r=2f8f3795e6e7ae45be1f8856fcd5047fe041ada4#305)方法从`SharedPreferences`您的设备（而不是从谷歌）获取 ID，这意味着在您可以从中获取 ID 之前`SharedPreferences`- 首先应该将其保存在那里。（只有`com.google.android.c2dm.intent.REGISTRATION`来自谷歌的 ID 才会保存在那里）。我不确定将 ID 保存到的确切放置 `SharedPreferences`的逻辑（我认为答案应该在 GCMRegistrar[来源](https://code.google.com/r/sachinworldnet-pushnote/source/browse/gcm-client/src/com/google/android/gcm/?r=2f8f3795e6e7ae45be1f8856fcd5047fe041ada4)中）

所以。在您的程序中，您的`registrationID`字符串为空，因为：

1.  你在方法`GCMRegistrar.getRegistrationId`之后调用`GCMRegistrar.register`方法。请记住，该`register`方法异步向 google 发送意图，这意味着当您调用`getRegistrationId`方法时，无法保证已经收到来自 google 的带有您 ID 的响应，并且您的 id 已经保存到`SharedPreferences`.

如果你想抓住 Intent 来自谷歌的那一刻`com.google.android.c2dm.intent.REGISTRATION`- 看看`GCMIntentService`'s`onRegistered`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:26:57.247

请检查 manifest.xml ，以便您正确添加所有使用权限和接收者。

```
 <uses-permission android:name="android.permission.INTERNET"/>
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
     <uses-permission android:name="android.permission.GET_ACCOUNTS"/>
<uses-permission android:name="android.permission.WAKE_LOCK"/>
<permission
    android:name="you_package_name.permission.C2D_MESSAGE"
    android:protectionLevel="signature" />
<uses-permission
    android:name="you_package_name.permission.C2D_MESSAGE" />
<!-- This app has permission to register and receive data message. -->
<uses-permission
    android:name="com.google.android.c2dm.permission.RECEIVE" /> 
```

这个接收器类必须在你写下注册代码的同一个包中

```
 <receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <!-- Receives the actual messages. -->
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <!-- Receives the registration id. -->
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="you_package_name" />
         </intent-filter>
    </receiver> 
```

# c - 如何使用 regex.h 查找美元符号

> ID：12366446
> 
> 赞同：1
> 
> 时间：2012-09-11T09:15:31.730
> 
> 标签：c, regex

下面是我的代码，我想在其中查找字符串是否包含`$`符号，但它显示错误：`error: unknown escape sequence '\$'`

```
#include <sys/types.h>
#include <regex.h>
#include <stdio.h>

#define MAX_MATCHES 1 //The maximum number of matches allowed in a single string

void match(regex_t *pexp, char *sz) {
        regmatch_t matches[MAX_MATCHES]; //A list of the matches in the string (a list of 1)
        //Compare the string to the expression
        //regexec() returns 0 on match, otherwise REG_NOMATCH
        if (regexec(pexp, sz, MAX_MATCHES, matches, 0) == 0) {
                printf(" matches characters ");
        } else {
                printf(" does not match\n");
        }
}

int main() {
        int rv;
        regex_t exp; //Our compiled expression
        //1\. Compile our expression.
        //Our regex is "-?[0-9]+(\\.[0-9]+)?". I will explain this later.
        //REG_EXTENDED is so that we can use Extended regular expressions
        rv = regcomp(&exp, "\$", REG_EXTENDED);
        if (rv != 0) {
                printf("regcomp failed with %d\n", rv);
        }
        //2\. Now run some tests on it
        match(&exp, "Price of iphone is $800 ");

        //3\. Free it
        regfree(&exp);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:16:53.760

您需要转义反斜杠：

```
rv = regcomp(&exp, "\\$", REG_EXTENDED); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T09:16:48.883

转义字符串文字中的反斜杠："`\\$"`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T09:17:50.170

我已经有一段时间没有做过 C 正则表达式了，但是从记忆中你必须在它们中加倍转义反斜杠，因为第一个被视为 C 转义，然后第二个被传递给正则表达式引擎作为 $ 的转义. IE`\\$`

作为进一步的例子，如果你想检查 C 正则表达式中的反斜杠，你需要使用`\\\\`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T09:17:14.670

当你想创建一个包含反斜杠的字符串时，就像这个正则表达式，你需要用另一个反斜杠转义反斜杠：

```
regcomp(&exp, "\\$", REG_EXTENDED); 
```

# android - 如何在android中使用runnable

> ID：12366448
> 
> 赞同：5
> 
> 时间：2012-09-11T09:15:47.117
> 
> 标签：android, runnable

嗨，我是 Java Android 开发的新手，我想知道如何`Runnable`在 Android 中使用。它似乎对我不起作用。这是我的源代码：

**MainTest.java**

```
package com.heeere.androiddnssd.discovery;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class MainTest extends Activity {

    android.net.wifi.WifiManager.MulticastLock lock;
    private Discovery discovery = new Discovery(this); 
    private TextView textView;

    /** Called when the activity is first created. */
    @SuppressLint("NewApi") @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        textView = (TextView)this.findViewById(R.id.text);

        android.net.wifi.WifiManager wifi = (android.net.wifi.WifiManager) getSystemService(android.content.Context.WIFI_SERVICE);
        lock = wifi.createMulticastLock("mylockthereturn");
        lock.setReferenceCounted(true);
        lock.acquire();

    }

    public void updateView () {
        String msg = discovery.getMsg();
        textView.setText(msg);
    }

    @SuppressLint("NewApi") @Override
    protected void onStop() {
        discovery.stop();
        lock.release();
        super.onStop();
    }

} 
```

**发现.java**

```
package com.heeere.androiddnssd.discovery;

import java.io.IOException;

import javax.jmdns.JmDNS;
import javax.jmdns.ServiceEvent;
import javax.jmdns.ServiceListener;

public class Discovery {

    private String type = "_ikunet._tcp.local.";
    private String msg="";
    private JmDNS jmdns = null;
    private ServiceListener listener = null;
    private MainTest maintest;
    android.os.Handler handler = new android.os.Handler();

    public Discovery (MainTest maintest) {
        this.maintest = maintest;
        setUp();
    }

    private void setUp() {

        try {
            jmdns = JmDNS.create();
            jmdns.addServiceListener(type, listener = new ServiceListener() {

                public void serviceResolved(ServiceEvent ev) {
                    msg = msg + ev.getInfo().getName()+ "\n";
                    update();
                }

                public void serviceRemoved(ServiceEvent ev) {
                }

                public void serviceAdded(ServiceEvent event) {
                    jmdns.requestServiceInfo(event.getType(), event.getName(), 1);
                }
            });
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
    }

    public String getMsg() {
        return msg;
    }

    private void update() {
        handler.postDelayed(new Runnable() {
            public void run() {
                maintest.updateView();
            }
        }, 1);
    }

    public void stop() {
        if (jmdns != null) {
            if (listener != null) {
                jmdns.removeServiceListener(type, listener);
                listener = null;
            }
            jmdns.unregisterAllServices();
            try {
                jmdns.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            jmdns = null;
        }
    }

} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scroller"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent" 
              android:layout_height="fill_parent" 
              android:orientation="vertical"
              android:scrollbars="vertical"
              android:fadeScrollbars="true"
              android:isScrollContainer="true">
    <TextView  
            android:layout_width="fill_parent" 
            android:layout_height="wrap_content" 
            android:text="Hello World, Android Discovery" />
    <TextView 
            android:id="@+id/text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello, I am a TextView" />
    <Button 
            android:id="@+id/button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Hello, I am a Button" />
    </LinearLayout>
</ScrollView> 
```

在应用程序启动后一段时间`serviceResolved`从类执行，并且应该更新（从类）。但这不会发生。我该如何解决这种行为？我认为这可能是个问题。`Discovery``textview``MainTest``Runnable`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:23:04.100

试试这个

```
private void update() {
    final Runnable r = new Runnable() {
        public void run() {
            maintest.updateView();
            handler.postDelayed(this, 1000);
        }
    };
    handler.postDelayed(r, 1000);
} 
```

但我会向你推荐这个：

```
private void update() {
new Thread() {
    public void run() {
        while (true) {
            runOnUiThread(new Runnable() {
                 @Override
                 public void run() {
                      maintest.updateView();
                 }
            });
            Thread.sleep(1000);
        } 
    }
}.start();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:22:00.980

您可以跳过使用`Runnable`，因为在 Discovery.java 中似乎没有必要。例如：

```
private void update() {
    maintest.updateView();
} 
```

但是，如果您使用线程来收集搜索结果，那么您可以做的是`runOnUiThread`在您的活动类（MainTest.java）中使用。例如：

```
public void updateView () {
    this.runOnUiThread(new Runnable() {
        @Override
        public void run() {
            String msg = discovery.getMsg();
            textView.setText(msg);
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:47:01.307

就个人而言，我会以不同的方式使用处理程序。

对我来说，处理程序应该由活动创建并交给你的发现类。这更好，因为您避免“泄漏”整个活动。

在活动中你会有

```
private final Handler mHandler = new Handler() 
{
    @Override
    public void handleMessage(Message msg)
    {
        switch (msg.what) 
        {
            case UPDATE_PROGRESS:                   
                handleUpdateProgress();
                break;               
        }
    }   
}; 
```

然后，如果您需要发回活动，您可以使用以下内容：

```
handlerFromActivity.obtainMessage(UPDATE_PROGRESS).sendToTarget(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-06T03:54:49.670

有用 ：）

```
final Handler handler = new Handler();
handler.post(new Runnable() {
     @Override
     public void run() {
     /* ... */
     handler.postDelayed(this, 15000);
     }
}); 
```

# maven - 在 pom 中配置 jars 依赖项

> ID：12366449
> 
> 赞同：1
> 
> 时间：2012-09-11T09:15:51.997
> 
> 标签：maven, libraries

我有一个使用 eclipse 在 java 中开发的项目。这个项目正在使用一组罐子。我们现在正在尝试使用 maven 执行这个项目。我已经为每个 jar 依赖项配置了 pom 文件，例如：

```
<dependency>
                        <groupId>org.eclipse.uml2</groupId>
                        <artifactId>uml</artifactId>
                        <version>3.2.1</version>
                </dependency> 
```

我正在尝试使用我们在项目中拥有的相同版本的库。我面临两个问题： 1\. 如果我只是像这样指定库，它会给我一个错误，它无法从 maven 使用的默认存储库下载。2.如果我在我的 pom smth 中指定存储库，例如：

```
<repositories>
     <repository>
       <id>Indigo Release</id>
       <url>https://raw.github.com/eclipse/acceleo/master/maven/repository/releases/indigo</url>
     </repository>
     <repository>
       <id>Juno Release</id>
       <url>https://raw.github.com/eclipse/acceleo/master/maven/repository/releases/juno</url>
     </repository>
     <repository>
       <id>Snapshots</id>
       <url>https://raw.github.com/eclipse/acceleo/master/maven/repository/snapshots</url>
     </repository>
   </repositories>

   <pluginRepositories>
     <pluginRepository>
       <id>Indigo Release</id>
       <url>https://raw.github.com/eclipse/acceleo/master/maven/repository/releases/indigo</url>
     </pluginRepository>
     <pluginRepository>
       <id>Juno Release</id>
       <url>https://raw.github.com/eclipse/acceleo/master/maven/repository/releases/juno</url>
     </pluginRepository>
     <pluginRepository>
       <id>Snapshots</id>
       <url>https://raw.github.com/eclipse/acceleo/master/maven/repository/snapshots</url>
     </pluginRepository>
   </pluginRepositories> 
```

比此存储库中的版本不是我要下载的版本。我尝试在本地存储库中手动下载库，但工作量很大。没有任何简单的方法可以做到这一点吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:07:06.603

您的配置无法正常工作，因为对 github 的原始访问会给您错误 401，但要继续检查[Eclipse 的 wiki](http://wiki.eclipse.org/Maven)。

# unique - 如何对分组为 2 和 2 的 4 个字段创建唯一约束？

> ID：12366454
> 
> 赞同：0
> 
> 时间：2012-09-11T09:16:20.280
> 
> 标签：unique, postgresql-9.1, unique-constraint

我正在尝试在我的 Web 应用程序中创建一个关系系统，该系统将依赖于定义为的单个连接表

```
CREATE TABLE associations (
  associationId SERIAL PRIMARY KEY,
  fromTable varchar(255),
  fromId int,
  toTable varchar(255),
  toId int  
); 
```

现在我需要让它`(fromTable, fromId, toTable, toId)`对每一行都是唯一的，但我需要的并不像在这四个字段上创建一个简单的唯一约束那么简单。

例如，我需要这个查询

```
INSERT INTO associations (fromTable, fromId, toTable, toId)
VALUES ('table1', 1, 'table2', 2); 
```

如果表已经包含带有元组的行，则失败`('table1', 1, 'table2', 2)` **OR的行，则失败** `('table2', 2, 'table1', 1)`

是否可以通过约束来实现这一点，或者我是否需要在尝试插入数据之前手动实施检查？

编辑：

@Germann Arlington 建议使用触发器以两种方式插入关系来执行此操作，但是如果我在触发触发器的同一个表中执行插入操作，这不会导致无限的触发器循环吗？

# javascript - 如何在容器中定位旋转图像？

> ID：12366458
> 
> 赞同：7
> 
> 时间：2012-09-11T09:16:39.130
> 
> 标签：javascript, jquery, html, css

使用 CSS3、HTML（和 javascript/jquery，如果需要），我需要将图像旋转 90/270 度并使其定位以填充其父 div/容器。听起来很简单，但是当图像旋转时，位置会发生变化，我不知道如何或为什么。

这是一个 jsFiddle 来解释 - [http://jsfiddle.net/UPGkU/2/](http://jsfiddle.net/UPGkU/2/) - 我只希望蓝色徽标恰好位于红色 div 内。

当然，我可以使用特定的偏移量，但是如果使用不同的图像，这些偏移量会改变，所以我真的很想找到一个通用的解决方案。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T09:21:51.870

您需要设置一个[`transform-origin`](https://developer.mozilla.org/en-US/docs/CSS/transform-origin)- 在这种情况下，图像围绕其旋转的点。

```
#image {
  -webkit-transform: rotate(90deg);
  -webkit-transform-origin: 0 0; //initially 50% 50%
  margin-left: 100%;
} 
```

[90度小提琴](http://jsfiddle.net/ovfiddle/UPGkU/6/) / [270度小提琴](http://jsfiddle.net/ovfiddle/UPGkU/9/)

***更新：***

后者的挑战是我们不能真正修改`transform-origin`它，因为它的位置是相对于*尚未转换*的元素的，我们不能只设置`margin-top:100%`，因为边距值（甚至是垂直的）总是以相对于[*宽度*](http://jsfiddle.net/ovfiddle/UPGkU/6/)[的百分比计算的包含块](http://jsfiddle.net/ovfiddle/UPGkU/6/)*。以下代码应该可以工作：*

 *```
#image {
  -webkit-transform: rotate(-90deg);
  -webkit-transform-origin: 0 0;
  position:relative;
  top:100%;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:20:11.237

尝试

```
#image {
    -webkit-transform: rotate(90deg);
    -webkit-transform-origin: 0 100%;
    position : relative;
    top      : -50px;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:22:17.033

嗨，现在**习惯**了这个**css** 使用的**位置**

```
#wrapper {
    width:50px;
    height:150px;
    border:2px solid red;
    position:relative;
}
#image {
    -webkit-transform: rotate(90deg);
    -moz-transform: rotate(90deg);
    position:absolute;
    left:-49px;
    top:50px;
} 
```

***[演示](http://jsfiddle.net/UPGkU/5/)****

# oracle-adf - 在命令链接上更新表单点击 adf

> ID：12366477
> 
> 赞同：0
> 
> 时间：2012-09-11T09:17:50.057
> 
> 标签：oracle-adf

我是整个 oracle adf 的新手。所以请原谅我这个问题。

在我的 JSP 页面中，我有一个表格，上面是一个视图。当我单击表格中的命令链接时，该视图应显示详细信息。但是如何在单击命令链接时调用表单的 loadData。

这是澄清的布局：

```
<h:form>
    <tr:panelHeader text="Browse" styleClass="af_m_toolbar" size="-1"/>
    <tr:panelFormLayout>
        <tr:panelLabelAndMessage label="#{bindings.name.hints.label}">
            <tr:outputText value="#{bindings.name.inputValue}"/>
        </tr:panelLabelAndMessage>
        <tr:panelLabelAndMessage label="#{bindings.id.hints.label}">
            <tr:outputText value="#{bindings.id.inputValue}"/>
        </tr:panelLabelAndMessage>
        <tr:panelLabelAndMessage label="#{bindings.salary.hints.label}">
            <tr:outputText value="#{bindings.salary.inputValue}"/>
        </tr:panelLabelAndMessage>
    </tr:panelFormLayout>
    <tr:table value="#{bindings.emp.collectionModel}" var="row" rows="#{bindings.emp.rangeSize}"
              emptyText="#{bindings.emp.viewable ? 'No data to display.' : 'Access Denied.'}"
              width="100%" inlineStyle="width:100%">
        <tr:column sortProperty="#{bindings.emp.hints.name.name}" sortable="false" inlineStyle="width:100%">
            <tr:outputText value="#{row.bindings.name.inputValue}" styleClass="af_m_listingLink"/>
            <tr:outputText value="ID: #{row.bindings.id.inputValue} Salery: #{row.bindings.salary.inputValue}"
                           styleClass="af_m_listingDetails"/>
        </tr:column>
    </tr:table>
</h:form> 
```

我正在使用 Oracle JDeveloper 11g R2。这应该成为 adf 移动浏览器应用程序，因此我只使用 trinidad 组件。

感谢您的帮助安吉洛汉内斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:20:59.187

尝试在您的表单上使用 PartialPageRefresh (http://myfaces.apache.org/trinidad/devguide/ppr.html)。为此，您将链接 ID 作为 partialTriggers 添加到表单或 panelFormLayout。这就是它在 ADF 中的工作方式，从未在特立尼达测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T11:41:24.020

您将不得不使用 ppr。您可以将 partialPageRefresh 设置为 true，并提供将触发该组件刷新的组件 ID。就像是 ：

```
<tr:panelLabelAndMessage label="#{bindings.name.hints.label}" id="pl1">
    <tr:outputText value="#{bindings.name.inputValue}"/>
</tr:panelLabelAndMessage>
<tr:panelLabelAndMessage label="#{bindings.id.hints.label}">
    <tr:outputText value="#{bindings.id.inputValue}" partialTriggers="pl1"/>
</tr:panelLabelAndMessage> 
```

这意味着当 component1 更改时 component2 将被刷新。

# javascript - 如何正确地使这个 js 片段内容不可知？

> ID：12366479
> 
> 赞同：0
> 
> 时间：2012-09-11T09:17:54.823
> 
> 标签：javascript, jquery, yii

这有效：

[http://jsfiddle.net/4XQ2u/16/](http://jsfiddle.net/4XQ2u/16/)

但是，除了代码上的其他不好的事情外，您可能会注意到我大量添加了以下内容：

```
val('Remove Translation Fields'); 
```

和

```
val('Add Translation Fields'); 
```

假设我们需要重用这个脚本、这个功能、这个交互，而不是添加或删除我们希望的“翻译”，添加或删除“更多详细信息”，或者添加或删除“任何其他字段集” sort" - 或者，例如，假设我们需要翻译这个应用程序......像这样一个糟糕的 javascript，会迫使我们每次应用程序内容发生变化时，我们都必须相应地编辑这个 javascript。

我对javascript（jquery）和一般编程相当陌生，所以我想问一下：

**有什么替代方案可以使这个脚本内容的变体不可知？**

如果相关，请注意这是使用 Yii 框架的 PHP MVC 应用程序的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:17:26.870

我将采取的方法是仅处理您的 html 中的内容以及您的 PHP[信息中的任何本地化（即语言、货币、数字）here](http://www.codeforest.net/translate-and-localize-your-web-application-with-php-and-gettext)。然后可以使用 JavaScript 来操纵标记以执行行为任务，从而很好地分离您的关注点。

例如。在您的实例中，我只需要两个按钮，其中一个在加载时使用 css 隐藏，并根据您页面中发生的事件切换它们。

我已经更新了你原来的小提琴，以反映[这里](http://jsfiddle.net/4XQ2u/46/)的一些简单变化。

# java - 如何在 java 客户端中获取 HDFS 服务器元数据信息？

> ID：12366482
> 
> 赞同：2
> 
> 时间：2012-09-11T09:18:03.737
> 
> 标签：java, hadoop, connection, client, hdfs

我需要构建一个实用程序类来测试与 HDFS 的连接。测试应该显示 HDFS 的服务器端版本和任何其他元数据。虽然，有很多客户端演示可用，但没有提取服务器元数据。有人可以帮忙吗？

请注意，我的客户端是远程 java 客户端，没有 hadoop 和 HDFS 配置文件来初始化配置。我需要通过动态使用其 URL 连接到 HDFS 名称节点服务来完成此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:12:02.667

Hadoop 通过 HTTP 公开一些您可以使用的信息。请参阅[Cloudera](http://www.cloudera.com/blog/2009/08/hadoop-default-ports-quick-reference/)的文章。可能最简单的方法是连接到`NN`UI 并解析服务器返回的内容：

```
URL url = new URL("http://myhost:50070/dfshealth.jsp");
BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
... 
```

另一方面，如果您知道 NN 和 JT 的地址，您可以使用这样的简单客户端（Hadoop 0.20.0-r10​​56497）连接到它们：

```
import java.net.InetSocketAddress;
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hdfs.DFSClient;
import org.apache.hadoop.hdfs.protocol.ClientProtocol;
import org.apache.hadoop.hdfs.protocol.DatanodeInfo;
import org.apache.hadoop.hdfs.protocol.FSConstants.DatanodeReportType;
import org.apache.hadoop.mapred.ClusterStatus;
import org.apache.hadoop.mapred.JobClient;
import org.apache.hadoop.util.VersionInfo;

public class NNConnTest {

    private enum NNStats {

        STATS_CAPACITY_IDX(0, 
                "Total storage capacity of the system, in bytes: ");
        //... see org.apache.hadoop.hdfs.protocol.ClientProtocol 

        private int id;
        private String desc;

        private NNStats(int id, String desc) {
            this.id = id;
            this.desc = desc;
        }

        public String getDesc() {
            return desc;
        }

        public int getId() {
            return id;
        }

    }

    private enum ClusterStats {

        //see org.apache.hadoop.mapred.ClusterStatus API docs
        USED_MEM {
            @Override
            public String getDesc() {
                String desc = "Total heap memory used by the JobTracker: ";
                return desc + clusterStatus.getUsedMemory();
            }
        };

        private static ClusterStatus clusterStatus;
        public static void setClusterStatus(ClusterStatus stat) {
            clusterStatus = stat;
        }

        public abstract String getDesc();
    }

    public static void main(String[] args) throws Exception {

        InetSocketAddress namenodeAddr = new InetSocketAddress("myhost",8020);
        InetSocketAddress jobtrackerAddr = new InetSocketAddress("myhost",8021);

        Configuration conf = new Configuration();

        //query NameNode
        DFSClient client = new DFSClient(namenodeAddr, conf);
        ClientProtocol namenode = client.namenode;
        long[] stats = namenode.getStats();

        System.out.println("NameNode info: ");
        for (NNStats sf : NNStats.values()) {
            System.out.println(sf.getDesc() + stats[sf.getId()]);
        }

        //query JobTracker
        JobClient jobClient = new JobClient(jobtrackerAddr, conf); 
        ClusterStatus clusterStatus = jobClient.getClusterStatus(true);

        System.out.println("\nJobTracker info: ");
        System.out.println("State: " + 
                clusterStatus.getJobTrackerState().toString());

        ClusterStats.setClusterStatus(clusterStatus);
        for (ClusterStats cs : ClusterStats.values()) {
            System.out.println(cs.getDesc());
        }

        System.out.println("\nHadoop build version: " 
                + VersionInfo.getBuildVersion());

        //query Datanodes
        System.out.println("\nDataNode info: ");
        DatanodeInfo[] datanodeReport = namenode.getDatanodeReport(
                DatanodeReportType.ALL);
        for (DatanodeInfo di : datanodeReport) {
            System.out.println("Host: " + di.getHostName());
            System.out.println(di.getDatanodeReport());
        }

    }

} 
```

确保您的客户端应该使用`same`Hadoop 版本，因为您的集群`EOFException`可能会出现这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T19:44:59.037

所有 hadoop 节点都公开 JMX 接口，您可以通过 JMX 获得的功能之一是版本。开始的好方法是在 localhost 和 jconsole 上运行 Hadoop 并连接到某个节点并探索接口并复制并粘贴 MBean 的对象名称。不幸的是，几乎没有关于 Hadoop 的 JMX iface 的文档。

顺便提一句。`NameNode`提供最有用的信息。

# symfony - 为 symfony 2.0 注入自定义表单生成器

> ID：12366487
> 
> 赞同：0
> 
> 时间：2012-09-11T09:18:13.847
> 
> 标签：symfony, propel

当我使用 propel:form:generate 命令创建表单时，它会从 propel 包执行 FormGenerateCommand.php，如何扩展此包或使其执行我的自定义表单生成器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:47:09.260

据我从该[命令的源代码中](https://github.com/propelorm/PropelBundle/blob/1.1/Command/FormGenerateCommand.php)可以看出，执行任何操作的所有方法都是私有的，因此为您自己的命令扩展此类不会有太大用处。

由于您已经拥有自己的表单生成器，因此您可以创建自己的命令来执行它并为其指定一个唯一的名称（例如“my_propel:form:generate”）。这不必在扩展 PropelBundle 的包中；您可以将此命令放在与现有表单生成器相同的包中，也可以放在新包中。有关创建自己的控制台命令的更多信息，请参阅此食谱文章：[如何创建控制台命令](http://symfony.com/doc/2.0/cookbook/console/console_command.html)

# java - 使用java从文本中删除url

> ID：12366496
> 
> 赞同：14
> 
> 时间：2012-09-11T09:18:47.133
> 
> 标签：java, regex

如何删除文本示例中存在的 URL

```
String str="Fear psychosis after #AssamRiots - http://www.google.com/LdEbWTgD http://www.yahoo.com/mksVZKBz"; 
```

使用正则表达式？

我想删除文本中的所有 URL。但它不起作用，我的代码是：

```
String pattern = "(http(.*?)\\s)";
Pattern pt = Pattern.compile(pattern);
Matcher namemacher = pt.matcher(input);
if (namemacher.find()) {
  str=input.replace(namemacher.group(0), "");
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-18T09:02:53.573

输入`String`包含url的

```
private String removeUrl(String commentstr)
    {
        String urlPattern = "((https?|ftp|gopher|telnet|file|Unsure|http):((//)|(\\\\))+[\\w\\d:#@%/;$()~_?\\+-=\\\\\\.&]*)";
        Pattern p = Pattern.compile(urlPattern,Pattern.CASE_INSENSITIVE);
        Matcher m = p.matcher(commentstr);
        int i = 0;
        while (m.find()) {
            commentstr = commentstr.replaceAll(m.group(i),"").trim();
            i++;
        }
        return commentstr;
    } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-11T09:29:31.703

好吧，您还没有提供有关您的文本的任何信息，因此假设您的文本看起来像这样：`"Some text here http://www.example.com some text there"`，您可以这样做：

```
String yourText = "blah-blah";
String cleartext = yourText.replaceAll("http.*?\\s", " "); 
```

这将删除所有以“http”开头的序列，直到第一个空格字符。

您应该阅读[String](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html "细绳")类的 Javadoc。它会让你清楚。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T09:34:22.813

你如何定义网址？您可能不仅想过滤 http://，还想过滤 https:// 和其他协议，如 ftp://、rss:// 或自定义协议。

也许这个正则表达式可以完成这项工作：

`[\S]+://[\S]+`

解释：

*   一个或多个非空格
*   后跟字符串“://”
*   后跟一个或多个非空格

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-01-19T18:28:12.800

请注意，如果您的 URL 包含 & 和 \ 之类的字符，那么上面的答案将不起作用，因为 replaceAll 无法处理这些字符。对我有用的是删除新字符串变量中的这些字符，然后从 m.find() 的结果中删除这些字符并在我的新字符串变量上使用 replaceAll。

```
private String removeUrl(String commentstr)
{
    // rid of ? and & in urls since replaceAll can't deal with them
    String commentstr1 = commentstr.replaceAll("\\?", "").replaceAll("\\&", "");

    String urlPattern = "((https?|ftp|gopher|telnet|file|Unsure|http):((//)|(\\\\))+[\\w\\d:#@%/;$()~_?\\+-=\\\\\\.&]*)";
    Pattern p = Pattern.compile(urlPattern,Pattern.CASE_INSENSITIVE);
    Matcher m = p.matcher(commentstr);
    int i = 0;
    while (m.find()) {
        commentstr = commentstr1.replaceAll(m.group(i).replaceAll("\\?", "").replaceAll("\\&", ""),"").trim();
        i++;
    }
    return commentstr;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-23T02:54:35.323

`m.group(0)`应该用空字符串替换，而不是`m.group(i)`where`i`每次调用都会增加，`m.find()`如上述答案之一中所述。

```
private String removeUrl(String commentstr)
{
    String urlPattern = "((https?|ftp|gopher|telnet|file|Unsure|http):((//)|(\\\\))+[\\w\\d:#@%/;$()~_?\\+-=\\\\\\.&]*)";
    Pattern p = Pattern.compile(urlPattern,Pattern.CASE_INSENSITIVE);
    Matcher m = p.matcher(commentstr);
    StringBuffer sb = new StringBuffer(commentstr.length);
    while (m.find()) {
        m.appendReplacement(sb, "");
    }
    return sb.toString();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-09T13:27:27.387

正如@Ev0oD 所提到的，除了我正在处理的以下推文之外，代码运行良好： `RT @_Val83_: The cast of #ThorRagnarok playing "Ragnarok Paper Scissors" #TomHiddleston #MarkRuffalo (https://t.co /k9nYBu3QHu)`

令牌将被删除的位置： `commentstr = commentstr.replaceAll(m.group(i),"").trim();`

我遇到了以下错误：

`java.util.regex.PatternSyntaxException: Unmatched closing ')' near index 22`

在哪里`m.group(i)`）`https://t.co /k9nYBu3QHu``

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2017-09-14T10:59:25.383

如果您可以继续使用 python，那么您可以使用这些代码在这里找到更好的解决方案，

```
import re
text = "<hello how are you ?> then ftp and mailto and gopher and file ftp://ideone.com/K3Cut rthen you "
text = re.sub(r"ftp\S+", "", result)
print(result) 
```

# android - 使用位置结果的隐式意图启动活动

> ID：12366502
> 
> 赞同：0
> 
> 时间：2012-09-11T09:19:01.870
> 
> 标签：android, android-intent, implicit

是否有一个已经实现的隐式意图来启动一个返回用户当前位置的活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:48:52.193

没有这样的意图。但是您可以使用[它](http://developer.android.com/reference/android/location/LocationManager.html)来获取用户位置。这是一个很好的解释[http://developer.android.com/guide/topics/location/strategies.html](http://developer.android.com/guide/topics/location/strategies.html)

# wpf - 在 wpf 中填充字段

> ID：12366504
> 
> 赞同：0
> 
> 时间：2012-09-11T09:19:02.993
> 
> 标签：wpf, entity-framework, data-binding

我有一个财务信息数据库，我想检查提供的总数是否“加起来”。我已向数据库中添加了用于检查数据的字段，并且正在通过实体框架使用数据绑定。当用户向记录添加数据时，如何填充这些“检查”字段？

例如，表单包含 SubtotalA、SubtotalB 和 TotalAB 文本框。数据库有这些字段加上 CheckTotalAB。用户键入`SubtotalA`,`SubtotalB`并`TotalAB`从硬拷贝表单中键入。我想填充`CheckTotalAB`总和`SubtotalA`并`SubtotalB`与提供的`TotalAB`.

我首先尝试从文本框中获取数据。可惜`txtSubtotalA.Value`不存在。

然后我想我必须去实体本身。不幸的是，我不知道如何访问当前输入的记录/实体，如果我这样做了，我将如何访问尚未保存的字段的值。

有人可以指出我正确的方向吗？

蒂亚麦克莱
克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T19:44:51.740

访问实体就是答案。这是通过使用数据上下文中的实体属性来实现的，我将其设置为等于添加到表单类中的类成员。

之后，获取包括我的计算字段在内的实体字段只是获取/设置成员属性的一种情况。

# mysql - MySQL 5.5 安装冲突

> ID：12366506
> 
> 赞同：0
> 
> 时间：2012-09-11T09:19:17.313
> 
> 标签：mysql, yum

我正在尝试在我的 CentOS 机器上安装 MySQL 5.5，但是运行时`yum install`我得到以下信息：

```
file /usr/share/mysql/slovak/errmsg.sys from install of mysql-libs-5.5.27-1.el5.remi.x86_64 conflicts with file from package mysql51-libs-5.1.65-1.ius.el5.x86_64
file /usr/share/mysql/spanish/errmsg.sys from install of mysql-libs-5.5.27-1.el5.remi.x86_64 conflicts with file from package mysql51-libs-5.1.65-1.ius.el5.x86_64
file /usr/share/mysql/swedish/errmsg.sys from install of mysql-libs-5.5.27-1.el5.remi.x86_64 conflicts with file from package mysql51-libs-5.1.65-1.ius.el5.x86_64
file /usr/share/mysql/ukrainian/errmsg.sys from install of mysql-libs-5.5.27-1.el5.remi.x86_64 conflicts with file from package mysql51-libs-5.1.65-1.ius.el5.x86_64 
```

它确实安装了 MySQL 5.1，但我认为我已经删除了它，非常需要帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:29:37.990

只需删除 mysql51-libs-5.1.65-1.ius.el5.x86_64

```
rpm -qa | grep mysql51-libs

rpm -e <what you find> 
```

也许会有一些依赖，所以在安装新版本之前也要删除它们。

切勿混淆 repos。仅使用官方 repos 来避免这种情况。

# android - 插入新的 android 联系人照片

> ID：12366509
> 
> 赞同：4
> 
> 时间：2012-09-11T09:19:25.427
> 
> 标签：android, android-contentprovider, android-contacts

我想为联系人插入照片时遇到问题。我想插入没有图像的“父”联系人图像。

我只想更改联系人的照片，而不是原始联系人 (contact_id)

它只适用于更新，但不适用于插入，有什么问题？照片未记录在内容提供商中。

```
//UPDATE
    if (contact.getPhotoURL() != null){
            ops.add(ContentProviderOperation
                    .newUpdate(Data.CONTENT_URI)
                    .withSelection(ContactsContract.Data.CONTACT_ID + "=?" + " AND " + ContactsContract.Data.MIMETYPE + "=?",
                            new String[] { String.valueOf(contact.getId()), ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE })
                            .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, baos.toByteArray())
                            .build());
        }else{
//INSERT
            ops.add(ContentProviderOperation
                    .newInsert(Data.CONTENT_URI)
                    .withValue(ContactsContract.Data.CONTACT_ID, contact.getId())
                    .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
                    .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, baos.toByteArray())
                    .build());
        } 
```

谢谢

编辑：以下代码有效

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
    bmp.compress(Bitmap.CompressFormat.PNG, 100, baos);

    ContentResolver c = ctx.getContentResolver();

ContentValues values = new ContentValues();
int photoRow = -1;
String where = ContactsContract.Data.RAW_CONTACT_ID + " = " + personId + " AND " + ContactsContract.Data.MIMETYPE + "=='" + ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE + "'";
Cursor cursor = c.query(ContactsContract.Data.CONTENT_URI, null, where, null, null);
int idIdx = cursor.getColumnIndexOrThrow(ContactsContract.Data._ID);
if (cursor.moveToFirst()) {
    photoRow = cursor.getInt(idIdx);
}
cursor.close();

values.put(ContactsContract.Data.RAW_CONTACT_ID, personId);
values.put(ContactsContract.Data.IS_SUPER_PRIMARY, 1);
values.put(ContactsContract.CommonDataKinds.Photo.PHOTO, baos.toByteArray());
values.put(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE);

if (photoRow >= 0) {
    c.update(ContactsContract.Data.CONTENT_URI, values, ContactsContract.Data._ID + " = " + photoRow, null);
} else {
    c.insert(ContactsContract.Data.CONTENT_URI, values);
} 
```

IS_SUPER_PRIMARY 字段解决了这个问题，照片被保存为“全局”联系人，而不仅仅是特定的 raw_contact。

问候。

# c# - 触发器未触发多行批量插入？

> ID：12366510
> 
> 赞同：1
> 
> 时间：2012-09-11T09:19:37.257
> 
> 标签：c#, asp.net, sql-server, triggers

我有一个插入后触发器，当我在表中插入一条记录时它工作正常。

```
ALTER TRIGGER [dbo].[Insert_Into_Questions_Table] 
ON  [dbo].[Questionmaster]
After Insert
AS 
BEGIN
Insert into Questions(Question_questionid,Question_questionname,Question_answer1,Question_answer2,Question_answer3,Question_answer4,Exam_examtypeid,User_Userid)
select Question_questionid,Question_questionname,Question_answer1,Question_answer2,Question_answer3,Question_answer4,Exam_examtypeid,User_Userid from Inserted
SET NOCOUNT ON;

-- Insert statements for trigger here

END 
```

**问题**：

当我尝试使用 C# 代码中的 BulkCopy 插入多条记录时，触发器不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:23:53.743

默认情况下，BULK INSERT 语句不执行触发器。但是，您可以使用 FIRE_TRIGGERS 限定符启用触发器：

[http://msdn.microsoft.com/en-us/library/ms188365(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms188365(v=sql.105).aspx)

SQL Server 2005 和更高版本对触发器使用行版本控制，并将行版本存储在 tempdb 的版本存储中。在使用触发器批量导入大量数据记录之前，您可能需要扩展 tempdb 的大小以适应触发器对版本存储的影响。了解更多信息

[http://msdn.microsoft.com/en-us/library/ms175492(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms175492(v=sql.105).aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-11T09:32:12.590

每个语句而不是数据库上的每行触发一次触发器。因此，您需要更改插入批量记录的方式。

看看这篇 msdn 文章
[http://msdn.microsoft.com/en-us/library/ms188365.aspx](http://msdn.microsoft.com/en-us/library/ms188365.aspx)
，它解释了如何在批量插入中使用触发器。

# vb.net - 如何在 VS 中禁用 VB 表单中的复选框列表项

> ID：12366511
> 
> 赞同：0
> 
> 时间：2012-09-11T09:19:37.080
> 
> 标签：vb.net, visual-studio-2010

> **可能重复：**
> [如何禁用选中列表框中的复选框？](https://stackoverflow.com/questions/4368618/how-to-disable-a-checkbox-in-a-checkedlistbox)

如果选中另一个项目，我正在考虑尝试禁用复选框列表项目。处理这件事很容易，但是我在实际禁用特定项目时遇到了困难。Items 属性中似乎没有启用功能，所以我不确定如何禁用特定项目。

```
If CheckedListBox1.GetItemChecked("0") = True Or 
       CheckedListBox1.GetItemChecked("1") = True Then
                CheckedListBox1.Items(0).enabled=false
    ElseIf CheckedListBox1.GetItemChecked("0") = false AND 
       CheckedListBox1.GetItemChecked("1") = false Then
        CheckedListBox1.Items(0).enabled=true 
```

非常感谢任何帮助

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:29:33.890

我已经这样做了：

```
 Private Sub checkbox1_CheckedChanged(sender As System.Object, e As System.EventArgs) Handles checkbox1.CheckedChanged

    If checkbox1.Focused = True Then
        checkbox1.Checked = True
    End If
    checkbox2.Checked = False
    checkbox3.Checked = False
    checkbox4.Checked = False
    checkbox5.Checked = False
    checkbox6.Checked = False
End Sub 
```

并打开每个复选框。接下来是复选框 2 Sub 中的 checkbox2。

# linux - 从 /dev/block/mmcblk0 和 /dev/block/mmcblk0p1 读取的区别

> ID：12366515
> 
> 赞同：12
> 
> 时间：2012-09-11T09:19:56.680
> 
> 标签：linux, file-io, filesystems, linux-kernel, linux-device-driver

从 /dev/block/mmcblk0 读取返回旧数据，而从 /dev/block/mmcblk0p1 读取则返回最新数据。我的问题是，如果数据写入 /dev/block/mmcblk0，linux 是否会维护备份？这是因为我能够通过读取该节点来读取 SD 卡的旧内容。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-13T10:59:17.920

Linux 内核中的 mmc 子系统注册格式为 的设备节点`mmcblkXpY`。

*   在 Linux 内核中注册的每个 mmc 设备都会收到它自己的 mmc 设备编号**X**。
*   特定设备上的每个分区都有自己的编号**Y**

挂载指向分区的设备节点后，可以进行普通文件 I/O。

另请注意，除非`/dev/mmcblkX`设备上存在有效的分区表，否则系统上将没有后续`/dev/mmcblkXpY`节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-01T19:19:03.473

**Linux 不维护备份。** 它维护一个缓存。这与特定的块设备或驱动程序（`/dev/mmcblk*`在您的情况下）无关，而是与块缓存的工作方式有关。

**因此，您的观察是正常的，但很危险。** （通常这不是问题，因为只有 root 才能找到这个“功能”。）

在 Linux 中，每个块设备在缓存方面都是在内核中独立处理的。由于原始设备（在您的情况下`/dev/mmcblk0`）和分区（`dev/mmcblk0p1`）是不同的块设备，**它们都有独立的缓存**！

如果然后分区（`/dev/mmcblk0p1`）被更新，那么分区的缓存当然会更新，但是原始设备的缓存根本没有更新，因此它变得陈旧（从映射的数据来看，缓存实例仍然被认为是新鲜的）。

如果您随后再次重新访问原始设备，**则可能会返回仍然（陈旧）缓存的数据**，只要缓存没有被刷新。

反之亦然，例如通过原始设备更新分区数据时。 **后者通常会杀死分区上的文件系统！**

如果要清除缓存，则需要在重新访问驱动器之前刷新所有缓存。这有两个效果：

*   刷新也是`sync`磁盘上的数据，因此如果将缓存中的脏数据强制到文件系统（又名分区）。

*   刷新还会删除原始块设备上的旧缓存数据。

冲洗是通过以下方式完成的：

```
echo 3 >/proc/sys/vm/drop_caches 
```

但要小心。活动分区之后仍可能快速更改。而且您无法从原始设备读取分区缓存的脏数据，反之亦然。

# css - 是否可以显示 CSS 文件中的文本？

> ID：12366516
> 
> 赞同：0
> 
> 时间：2012-09-11T09:20:00.760
> 
> 标签：css

我想知道是否可以从 CSS 文件在 HTML 页面上显示文本。

例如，对于一个 web 主机，而不是在 4 个页面上显示 100MB 的计划，并且不必编辑每个页面，而是 CSS 本身。

例如：

```
CSS
100MB 
```

而不是在文本中

我们的计划有{来自 css 的文本在此处显示}

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T09:28:15.613

您可以使用[`:after`](http://www.w3schools.com/cssref/sel_after.asp)伪选择器。假设您的“我们的计划有”部分有一个 ID `planid`，并且您的 HTML 如下所示：

```
<div id = "planid">Our plan has</div> 
```

然后您可以在 CSS 中执行此操作：

```
#planid:after {
    content: ' 100MB'; /*what the element will contain*/
    display: inline; /*it's inline*/
    /*more styling*/
} 
```

选择器在被选元素**之后**`:after`创建一个伪元素。要在它之前创建一个，请使用选择器。**`:before`**

 **小演示：[小链接](http://jsfiddle.net/glee/Va8dm/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:27:56.940

CSS 不是为了做那种工作而设计的，它是用来组织样式而不是用来管理内容的。
您需要的是一个变量来存储您的值，然后多次显示它。所以你需要 PHP、JS、Ruby、Java 或你最喜欢的语言。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T09:24:40.043

曾经`after before` `properties`

是的，这样做

**HTML**

```
<div>Hello</div> 
```

**CSS**

```
 div:after{
content:'100mb';
} 
```

***[现场演示](http://tinkerbin.com/Ptec3wKa)***

***[更多信息](http://www.quirksmode.org/css/beforeafter.html)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T09:27:11.880

你可以使用伪元素来做到这一点：after - [http://jsfiddle.net/spacebeers/LQy7T/](http://jsfiddle.net/spacebeers/LQy7T/)

```
.your_class:after {
    content: "YOUR TEXT";
    color: red;
    background: blue;
    display: inline;
}​ 
```**

# dreamweaver - Tridion：Dreamweaver 不解析 HTML 代码字段

> ID：12366518
> 
> 赞同：4
> 
> 时间：2012-09-11T09:20:04.413
> 
> 标签：dreamweaver, tridion, templating, tridion-2011

我们有一个复合 CT，它输出其中一个组件的代码字段。

CT的织梦部分如下：

```
<!-- TemplateBeginRepeat name="Component.HTMLCode" -->
    @@Component.HTMLCode@@
<!-- TemplateEndRepeat --> 
```

但是，此 CT 在页面上显示代码字段，而不是转换为 HTML。

例如：如果代码字段的值为 -> `<div align="center" id="loginapp"></div>` 那么这个相同的值将显示在页面上而不是解析。

在页面源中，我们得到输出为“ **< ;div align=" ;center" id=" ;loginapp" ;> ;< ;/div>** ;"

我知道如果我们使用 C# 可以解决这个问题。但是有没有什么办法可以使用dreamweaver 来阻止特殊字符的转换呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T13:04:09.433

您应该使用 dwt 将代码发布到服务器，我的意思是为每个代码创建新的 dwt，然后将代码粘贴到 dwt 中。您可以将此 dwt 与 emply 组件或资源类型组件一起使用。

或者，如果您想使用文本字段，请尝试遵循 tbb 代码。在模板末尾添加此 tbb。

```
public override void Transform(Engine engine, Package package)
    {

        Regex objExp = new Regex(@"&#\d+;", RegexOptions.IgnoreCase);
        Regex objDecExp = new Regex(@"[^0-9]", RegexOptions.IgnoreCase);

        this.Initialize(engine, package);
        string strPackage = package.GetValue("Output");

        strPackage = unescapeHTML(strPackage);

        strPackage = objExp.Replace(strPackage, delegate (Match match)
        {

            string strInput = match.ToString();
            strInput = objDecExp.Replace(strInput, "");

            int intValue = Convert.ToInt32(strInput);
            char strChar = (char)intValue;

            return strChar.ToString();
        });

        strPackage = strPackage.Trim();

        Item objOutput = package.CreateStringItem(ContentType.Html, strPackage);
        package.PushItem("Output", objOutput);

    }

    private string unescapeHTML(string strInput)
    {
        StringBuilder strOutput = new StringBuilder(strInput);
        strOutput.Replace("&quot;", "&#34;");
        strOutput.Replace("&nbsp;", "&#32;");
        strOutput.Replace("&amp;", "&#38;");
        strOutput.Replace("&apos;", "&#39;");
        strOutput.Replace("&lt;", "&#60;");
        strOutput.Replace("&gt;", "&#62;");
        strOutput.Replace("&iexcl;", "&#161");
        strOutput.Replace("&cent;", "&#162");
        strOutput.Replace("&pound;", "&#163");
        strOutput.Replace("&curren;", "&#164");
        strOutput.Replace("&yen;", "&#165");
        strOutput.Replace("&brvbar;", "&#166");
        strOutput.Replace("&sect;", "&#167");
        strOutput.Replace("&uml;", "&#168");
        strOutput.Replace("&copy;", "&#169");
        strOutput.Replace("&ordf;", "&#170");
        strOutput.Replace("&not;", "&#172");
        strOutput.Replace("&shy;", "&#173");
        strOutput.Replace("&reg;", "&#174");
        strOutput.Replace("&macr;", "&#175");
        strOutput.Replace("&deg;", "&#176");
        return strOutput.ToString();    
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T10:14:05.230

如果我没记错的话，这取决于您的字段类型，如果在您的架构中使用普通文本字段，则 HTML 会被转义，如果您使用富文本字段，它将被解析。

一个选项可能是编写一个 Dreamweaver 自定义函数，该函数允许您取消转义字段（将其表示为 HTML 字段而不是文本字段）。正如您提到的，您也可以在 TBB 中执行此操作，但 Dreamweaver 自定义函数可直接从 DWT 模板调用。无论哪种方式，我认为您确实需要自己进行一些编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T10:59:00.023

RenderComponentField 有两个参数：bool htmlEncodeResult 和 bool resolveHtmlAsRTFContent。你在使用这个内置功能吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T14:44:48.243

谢谢你的帮助。在对dreamweaver 代码进行大量试验后，我们决定使用C# TBB 代替，从而解决了这个问题。

将多行字段作为文本字段读取也是我们犯的错误之一。这导致字段值显示在页面上，而不是呈现为背后的代码。

我们终于使用“MultilineTextField”解决了这个问题。

# mysql - 如何调试 MySQL 错误 1242（子查询返回超过 1 行）？

> ID：12366519
> 
> 赞同：1
> 
> 时间：2012-09-11T09:20:04.713
> 
> 标签：mysql, debugging, mysql-error-1242

有没有办法让 MySQL 告诉在一个充满子查询的巨大自动生成查询中哪个子查询给出了上述错误？如果没有，您的调试策略是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T21:10:36.827

示例查询：

```
UPDATE direct_orders do
SET do.dealer_id = (
    SELECT d.dealer_id FROM dealers d
    INNER JOIN dealer_addresses da 
        ON da.dealer_id = d.dealer_id
        AND da.type =  'M'
        AND da.status = 1
    INNER JOIN dealer_details dd 
        ON dd.dealer_id = d.dealer_id
        AND dd.status = 1
    WHERE ( da.address1 LIKE CONCAT(  '%', do.address1,  '%' ) AND do.postal LIKE da.postal_code ) 
    OR dd.name LIKE CONCAT(  '%', do.company,  '%' ) 
    AND do.dealer_id = 0
) 
```

此查询失败，原因与发帖人相同。正确测试这一点的一种方法是执行以下操作（注意以前依赖于子相关的表的 LEFT JOIN）：

```
SELECT d.dealer_id FROM dealers d 
LEFT JOIN direct_orders do
    ON do.dealer_id = 0
INNER JOIN dealer_addresses da 
    ON da.dealer_id = d.dealer_id
    AND da.type =  'M'
    AND da.status = 1
INNER JOIN dealer_details dd 
    ON dd.dealer_id = d.dealer_id
    AND dd.status = 1
WHERE (da.address1 LIKE CONCAT(  '%', do.address1,  '%' ) AND do.postal LIKE da.postal_code ) 
OR dd.name LIKE CONCAT(  '%', do.company,  '%' ) 
```

这样做表明实际上“direct_orders”表中的一条记录从“dealers”表中返回了多个“dealer_id”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T15:24:12.717

我将从在查询和可能的子查询上使用 LIMIT 或 DISTINCT 开始。如果这不起作用，我将开始单独运行每个子查询，是的，这很耗时，但我发现它也有助于避免将来出现同样的问题。

# python - PyQt：QTableWidget 中的复选框

> ID：12366521
> 
> 赞同：7
> 
> 时间：2012-09-11T09:20:11.950
> 
> 标签：python, checkbox, pyqt, qtablewidget

我使用以下代码在我的第 9 列中放置一个复选框`QTableWidget`

```
chkBoxItem = QtGui.QTableWidgetItem()
chkBoxItem.setFlags(QtCore.Qt.ItemIsUserCheckable | QtCore.Qt.ItemIsEnabled)
chkBoxItem.setCheckState(QtCore.Qt.Unchecked)       
table.setItem(rowNo,9,chkBoxItem) 
```

`table`我的在哪里`QtTableWidget`。我需要将单击复选框的行添加到列表中。我到底如何实现这一点？

亲切的问候，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T15:37:17.237

一种方法是：

1.  将[`itemClicked`](http://doc-snapshot.qt-project.org/4.8/qtablewidget.html#itemClicked)表的信号连接到处理程序

2.  测试[`checkedState`](http://doc-snapshot.qt-project.org/4.8/qtablewidgetitem.html#checkState)处理程序中单击的项目的

3.  如果该项目被选中，将其添加[`row`](http://doc-snapshot.qt-project.org/4.8/qtablewidgetitem.html#row)到列表中

示例代码：

```
from PyQt4 import QtGui, QtCore

class Window(QtGui.QWidget):
    def __init__(self, rows, columns):
        QtGui.QWidget.__init__(self)
        self.table = QtGui.QTableWidget(rows, columns, self)
        for column in range(columns):
            for row in range(rows):
                item = QtGui.QTableWidgetItem('Text%d' % row)
                if row % 2:
                    item.setFlags(QtCore.Qt.ItemIsUserCheckable |
                                  QtCore.Qt.ItemIsEnabled)
                    item.setCheckState(QtCore.Qt.Unchecked)
                self.table.setItem(row, column, item)
        self.table.itemClicked.connect(self.handleItemClicked)
        layout = QtGui.QVBoxLayout(self)
        layout.addWidget(self.table)
        self._list = []

    def handleItemClicked(self, item):
        if item.checkState() == QtCore.Qt.Checked:
            print('"%s" Checked' % item.text())
            self._list.append(item.row())
            print(self._list)
        else:
            print('"%s" Clicked' % item.text())

if __name__ == '__main__':

    import sys
    app = QtGui.QApplication(sys.argv)
    window = Window(6, 3)
    window.resize(350, 300)
    window.show()
    sys.exit(app.exec_()) 
```

# entity-framework - Entity Framework 5 Code First - 在播种过程中添加用户权限

> ID：12366523
> 
> 赞同：3
> 
> 时间：2012-09-11T09:20:16.943
> 
> 标签：entity-framework, ef-code-first

我正在创建一个 EF Code First 应用程序，我希望通过报告进一步使用该数据库。由于公司政策，我需要通过网络帐户执行此操作。

所以问题是 - 如何授予 Windows 用户对由 EF Code First 创建的数据库的 [读取] 权限？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:29:55.377

编写授予权限 sql 并在`Seed`方法中执行

```
 protected override void Seed(MyContext context)
    {
        .....

        context.Database.ExecuteSqlCommand("GRANT ....");
    } 
```

# iphone - 当 NSdictionary 或 NSString 值进入 UILABEL 时崩溃

> ID：12366527
> 
> 赞同：0
> 
> 时间：2012-09-11T09:20:40.290
> 
> 标签：iphone, objective-c, xcode, uilabel

```
-(void) httpDataDidFinishLoadingWithData:(NSData *)theData
{
    m_activityLoaded=NO;
    temp=[[NSString alloc] initWithData:[dataLoader httpData]
                               encoding:NSUTF8StringEncoding];
    NSLog(@"TEMP IS TEMP %@", temp);

    NSDictionary *dict = [[NSDictionary alloc]init];
    dict = [[temp JSONValue] objectForKey:@"location"];

    NSDictionary *dict1 = [[NSDictionary alloc]init];
    dict1 = [[temp JSONValue] objectForKey:@"wind"];

    NSDictionary *dict2 = [[NSDictionary alloc]init];
    dict2 = [dict1 objectForKey:@"direction"];

    NSDictionary *dict3 = [[NSDictionary alloc]init];
    dict3 = [[temp JSONValue] objectForKey:@"atmosphere"];

    NSDictionary *dict4 = [[NSDictionary alloc]init];
    dict4 = [[temp JSONValue] objectForKey:@"condition"];
    NSDictionary *dict5 = [[NSDictionary alloc]init];
    dict5 = [dict4 objectForKey:@"text"];
    NSDictionary *dict6 = [[NSDictionary alloc]init];
    dict6 = [dict4 objectForKey:@"code"];
    NSDictionary *dict7 = [[NSDictionary alloc]init];
    dict7 = [dict4 objectForKey:@"temperature"];

    temperatureLabel.text = [dict4 objectForKey:@"temperature"];
} 
```

崩溃发生在`temperatureLabel.text = [dict4 objectForKey:@"temperature"];`

我不知道，数据完全打印在控制台中，但在 UILABEL（温度标签）处崩溃。帮帮我，提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:31:31.660

如果您查看收到的错误，它会告诉您键的对象返回`temperature`不是 a`NSString`或`NSDictionary`而是 a `NSNumber`。

试试这个：

```
-(void) httpDataDidFinishLoadingWithData:(NSData *)theData {
    m_activityLoaded=NO;
    temp=[[NSString alloc] initWithData:[dataLoader httpData]
                               encoding:NSUTF8StringEncoding];
    NSLog(@"TEMP IS TEMP %@", temp);

    NSDictionary *dict = [[temp JSONValue] objectForKey:@"location"];
    NSDictionary *dict1 =  [[temp JSONValue] objectForKey:@"wind"];
    NSDictionary *dict2 = [dict1 objectForKey:@"direction"];

    NSDictionary *dict3 = [[temp JSONValue] objectForKey:@"atmosphere"];
    NSDictionary *dict4 = [[temp JSONValue] objectForKey:@"condition"];
    NSDictionary *dict5 = [dict4 objectForKey:@"text"];
    NSDictionary *dict6 =  [dict4 objectForKey:@"code"];
    NSNumber *temperature = [dict4 objectForKey:@"temperature"];

    temperatureLabel.text = [NSString stringWithFormat:@"%@", temperature]; 
} 
```

您可能想要查看[`NSNumberFormatter`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)格式化程序的温度，例如：°F 或°C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:32:02.020

您的字典包含一个`NSNumber`实例，并且您将其分配给 type 的属性`NSString`。崩溃消息是您的提示。使用`stringValue`或其他方式将数字的数据转换为字符串形式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:39:39.393

你确定你的对象是 NSString 类的吗？

尝试放入类似的东西：

```
if([[dict4 objectForKey:@"temperature"] isKindOfClass:[NSString class]])
   NSLog(@"lalala"); 
```

如果它没有被记录到控制台，则意味着您的对象不是 NSString，您可以尝试以下操作：

```
temperatureLabel.text = [NSString stringWithFormat:@"%@", [dict4 objectForKey:@"temperature"]]; 
```

您应该根据存储在字典中的对象类型更改 %@。

# html - 如何隐藏页脚中的文本

> ID：12366531
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:20:45.993
> 
> 标签：html, css

我将以下内容作为 .CSS 文件的一部分：-

```
 #footer-profile {
    position: absolute;
    bottom: 0px;
    left: 50px;
    text-align: center;
    padding: 5px 10px;
    color: blue;
    background: yellow;
    opacity: .3;
    -moz-opacity: .3;
    filter: alpha(opacity=30);
    -moz-border-radius: 20px 20px 0px 0px;
    -webkit-border-radius: 20px 20px 0px 0px;
}
#footer {
    position: relative;
    top: 20px;
    clear: both;
    text-align: center;
    padding: 20px;
    color: #999999;
} 
```

但是我怎样才能隐藏页脚中的文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:23:55.783

添加内部`#footer`指令

`display: none;`

整个页脚将被隐藏。如果您只想隐藏页脚的某些部分，请将它们添加到带有类的某个标签中`hidden`，然后添加一条规则：

```
#footer.hidden {
   display: none;
} 
```

根据您想要做什么，您可以尝试使用`visibility: hidden;`而不是`display: none;`. 第一个将隐藏元素，但会在布局中保留其空间，第二个将“折叠”元素并可能更改您的布局。

为了完整起见，我想将 Rohit Azar 提供的解决方案作为评论添加到您的帖子中：

```
#footer {
   font-size: 0;
} 
```

该解决方案完全符合问题的要求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T11:46:53.477

如果您只想隐藏文本，请尝试以下操作：

```
#footer{
text-indent:-99999px;
} 
```

# ruby-on-rails - 试图让每个文件类型在 rails 3.2 中都有自己的图标

> ID：12366534
> 
> 赞同：1
> 
> 时间：2012-09-11T09:20:51.000
> 
> 标签：ruby-on-rails, icons, ruby-on-rails-3.2, file-type

我对 Rails 完全陌生，我试图让目录中的每个文件类型都有自己的图标，我只能让它显示一个，请帮忙？这是我到目前为止所拥有的。

控制器：

```
class DocsController < ApplicationController
 def port
   @files = Dir.glob("public/folder/*")

   filetype = [".pdf", ".txt"]

   if filetype.include? ".pdf"
    @extension = "pdf.png"
   elsif filetype.include? ".txt"
    @extension = "text.png"
   else
    @extension = "folder.png"
   end
 end
end 
```

看法：

```
<% @files.each do |file| %>
<div class="filediv">
    <%= image_tag @extension, :size => "150x150" %>
    <p><%= file.gsub("public/folder/", "") %></p>
</div>
<% end %> 
```

这导致所有内容都有pdf图标，有人可以告诉我我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:30:53.630

我认为您需要添加辅助方法

```
def extension_image(file)
  ext =File.extname(file)
  if ext==".pdf"
    "pdf.png"
  elsif ext == ".txt"
   "text.png"
  else
    "folder.png"
  end
end

 <%= image_tag extension_image(file), :size => "150x150" %> 
```

文件类型 = [".pdf", ".txt"]

删除此代码。

```
if filetype.include? ".pdf"
    @extension = "pdf.png"
   elsif filetype.include? ".txt"
    @extension = "text.png"
   else
    @extension = "folder.png"
   end
end 
```

现在为什么总是显示pdf扩展名很简单

```
[1,2,3].include?(1)  it's always true so no further checking 
```

查看包含如何在数组中工作。

# ios - UIScrollviews zoomToRect 只设置 zoomScale 而不是 contentOffset

> ID：12366536
> 
> 赞同：2
> 
> 时间：2012-09-11T09:21:03.310
> 
> 标签：ios, uiscrollview

我在使用时`UIScrollView`没有设置它。`contentOffset``zoomToRect`

我有`UIScrollView`一个`UIImageView`里面。滚动和缩放本身到目前为止工作。现在我想在应用程序开始时为滚动视图提供图像视图的某个缩放矩形。为此，我实现`zoomToRect:`了它并且设置`zoomsScale`正确，但它没有设置`contentOffset`.

使用时的预期结果`zoomToRect`是`UIScrollView`根据所选矩形进行放大或缩小，并`contentOffset`根据给定`zoomToRect`方法的矩形的原点坐标进行设置。
实际行为是它缩放到正确位置`zoomScale`，但我`UIImageView`始终位于原点 0,0，而不是我在 中指定的矩形的 x (475) 和 y (520) 坐标的预期原点`zoomToRect`。
我的图像尺寸是 1473x1473。

这是一些代码

```
- (void)viewDidLoad {

    CGRect bounds = self.view.frame;

    _imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"bgImage.png"]];

    self.containerView = [[UIView alloc] initWithFrame:bounds];
    _containerView.contentMode = UIViewContentModeCenter;

    _scrollView = [[UIScrollView alloc] initWithFrame:bounds];
    _scrollView.delegate = self;
    _scrollView.contentSize = _imageView.bounds.size;
    _scrollView.minimumZoomScale = 0.2;
    [_scrollView addSubview:_containerView];

    [_containerView addSubview:_imageView];

    [self.view addSubview:_scrollView];
}

- (void)viewWillAppear:(BOOL)animated {
    [super viewWillAppear:animated];
    [_scrollView zoomToRect:CGRectMake(475.0, 150.0, 520.0, 747.0) animated:NO];
}

#pragma mark UIScrollViewDelegate methods
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return _containerView;
}

- (void)scrollViewDidZoom:(UIScrollView *)scrollView {

    [self printVisibleRectToConsole:scrollView];

    CGSize newImageViewSizeWithScale = CGSizeMake(_imageView.bounds.size.width * _scrollView.zoomScale,
                                 _imageView.bounds.size.height * _scrollView.zoomScale);
    _scrollView.contentSize = newImageViewSizeWithScale;
} 
```

我的问题：

*   为什么不`zoomToRect`设置`contentOffset`？
*   我怎样才能按预期`zoomToRect`改变我的？`contentOffset`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T13:04:56.780

问题是您正在缩放的​​视图 ( `containerView`) 没有它包含的图像视图那么大（以及您实际想要缩放的视图）。它`frame`被设置为`frame`视图控制器的。您看不到这一点，因为`UIView`默认情况下 a 不会剪辑其子视图。

`containerView`您应该改为使用图像视图的边界进行初始化。

```
self.containerView = [[UIView alloc] initWithFrame:_imageView.bounds]; 
```

# java - 录制中的Jmeter上传错误

> ID：12366537
> 
> 赞同：5
> 
> 时间：2012-09-11T09:21:05.317
> 
> 标签：java, file-upload, runtime-error, jmeter

我正在尝试记录一个具有上传功能的会话。
我使用http代理服务器进行录制、录制控制器和http cookie管理器。
当我尝试上传文件并单击保存时，它显示以下错误：

> java.io.FileNotFoundException: a12-13538_110q.htm （系统找不到指定的文件）在 java.io.FileInputStream.open(Native Method) 在 java.io.FileInputStream.(Unknown Source) 在 java.io.FileInputStream。 （未知来源）在 org.apache.jmeter.protocol.http.sampler.PostWriter.writeFileToStream(PostWriter.java:408) 在 org.apache.jmeter.protocol.http.sampler.PostWriter.sendPostData(PostWriter.java:117)在 org.apache.jmeter.protocol.http.sampler.HTTPJavaImpl.sendPostData(HTTPJavaImpl.java:115) 在 org.apache.jmeter.protocol.http.sampler.HTTPJavaImpl.sample(HTTPJavaImpl.java:510) 在 org.apache .jmeter.protocol.http.sampler.HTTPSamplerProxy.sample(HTTPSamplerProxy.java:62) 在 org.apache.jmeter.protocol.http.sampler.HTTPSamplerBase.sample(HTTPSamplerBase.java:1060) 在 org.apache.jmeter.protocol .http.proxy.Proxy。运行（Proxy.java:238）

当我不使用 jmeter 记录时，此功能可以正常工作。

请帮助解决这个问题。
有什么方法可以进行这个测试吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T10:13:47.077

**[错误 50079](https://issues.apache.org/bugzilla/show_bug.cgi?id=50079)：Jmeter 不记录文件路径。**

由于上述问题，根据您的异常 jmeter 找不到要上传的文件。
所以你必须在采样器中手动设置路径，最好使用变量来进行测试参数化。

根本不要使用录制和播放，或者至少检查和调整你录制的采样器。
在您的情况下，您必须设置以下记录的 http [POST] 请求：

*   `Use multipart/form-data for POST = true`- 作为请求的一部分发送文件；
*   `Send Files with Request -> File Path = PATH_TO_FILE`- 现有文件的路径，直接或使用变量。

```
    . . .
    上传 HTTP 请求
    方法 = POST
    对 POST = true 使用 multipart/form-data
    *-- 发送带有请求的文件 -- 部分：*
    文件路径 = ${testFile}
    参数名称 = 数据文件
    MIME 类型 = ...
    . . .

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-17T02:42:07.057

这与上面提到的缺陷有关。但解决方法是（在 Windows 上）将上传的文件与 JMX 文件放在同一文件夹中。（此处不捕获文件路径，仅捕获文件名。因此，一旦捕获请求，需要相应地更新正确的绝对或相对路径。）

# php - php中关闭数据库连接的使用

> ID：12366539
> 
> 赞同：7
> 
> 时间：2012-09-11T09:21:09.403
> 
> 标签：php, symfony1, doctrine, database-connection, propel

我一直认为关闭数据库连接总是一个好习惯，无论数据库/ORM如何，比如mysql_close()、Propel::close()等。

参考我的另一个[问题](https://stackoverflow.com/questions/12365427/performance-impact-of-not-closing-propel-connection/12365765)和 Internet 上的其他一些研究，我了解到一张令人惊讶的面孔，大多数人建议关闭连接并不重要，因为连接总是在请求后关闭。

但是，我发现这些答案很难消化。原因是，为什么所有的 DB lib、ORM 都提供 close 方法？如果它在那里，**在每个 ORM/lib**中，都必须有一些很好的用途。

有人可以解释一下在什么情况下，我们应该使用 close 方法来关闭数据库连接？＆如果这些方法根本没有用，为什么它们存在于所有 db libs/ORM 中？

**编辑**

**我的结论**

这是 Bondye 和 Fluffeh 之间的一次很好的讨论，它消除了我对使用连接关闭的疑虑。感谢他们俩。

*   如果您的脚本预计持续时间少于 100 毫秒，请不要费心关闭连接。
*   但是：如果脚本预计会持续更长时间，并且在最后一次数据库操作和脚本关闭之间有一段时间，请通过调用 *close() 为其他人释放连接。

我真的很难接受一个答案，因为两个答案都是正确的。只需接受所有评论的答案，使其保持在首位。但是对两个正确答案+1。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T09:27:15.097

`mysql_close()`通常不需要使用，因为非持久打开的链接会在脚本执行结束时自动关闭。

**释放资源**

> 感谢 PHP 4 的 Zend 引擎引入的引用计数系统，自动检测到不再引用它的资源，并被垃圾收集器释放。因此，很少需要手动释放内存。

希望这对您有更多帮助。

（[来源](http://www.php.net/manual/en/language.types.resource.php#language.types.resource.self-destruct)）

**编辑：**

的目的`mysql_close()`也是为了节省计算机资源，但使用它的另一个关键原因是因为 MySQL 服务器可以接受的连接数量有限，如果您有多个客户端无缘无故地保持连接打开，那么服务器可能会很好需要拒绝其他等待的客户。这自然是一件坏事，因此，与 一样，如果您认为在最后一次使用数据库和脚本结束之间会有一段时间`mysql_free_result()`，最好调用。`mysql_close()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-11T09:26:02.280

当您不再需要数据库连接时，最好关闭它。即使它在脚本结束后自动关闭 - 这可能是另一秒钟或几秒钟后。如果您不再需要它，一个用户点击一个页面并浪费数据库连接半秒钟不会有什么不同——但是一次做 20 个人会突然打开连接 10 秒钟——这*确实*会产生影响。

同时，重新使用连接可能是一种很好的做法——建立和打开连接通常至少需要几毫秒——如果你要插入几十万行，那么每次几毫秒的时间确实加起来快速地。

在某种程度上，将变量设置为 NULL 或取消设置没有什么不同。您不必这样*做*，但干净优雅的代码和资源管理*始终*是一件好事。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T10:06:28.977

数据库连接不是无限的。尤其是商业数据库软件，通常具有将同时连接数限制为相对较少的许可证。在这种情况下，当您的脚本不再积极使用时，您肯定希望关闭连接。虽然 PHP 会在脚本终止时自动关闭数据库连接，但在访问者完成页面下载之前它不会这样做。如果他的连接速度很慢（拨号或移动），就你所知，这可能需要十到二十秒。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T02:00:39.003

像 Doctrine 和 Propel 这样开发良好的 ORM 擅长关闭 MySQL 连接。但是，如果您使用的是直接 php，我已经看到很多数据库问题可以追溯到未关闭的连接。在每个脚本结束时关闭所有数据库连接是明智的。

# java - 如何在媒体播放器中播放已添加书签的音频文件？

> ID：12366544
> 
> 赞同：0
> 
> 时间：2012-09-11T09:21:32.463
> 
> 标签：java, android, android-mediaplayer

我已经为音频文件添加书签并存储到数据库中，现在我想在媒体播放器上播放相同的音频文件，但从那个停止点开始。（例如：0:18/5:35 的书签音频文件想从 0:18 开始播放直到 5:35)。如何做到这一点？

编辑：

我想播放存储在数据库中的音频文件书签需要在媒体播放器中播放。有什么办法可以做到这一点吗？首先我需要知道媒体播放器是否支持书签播放。如果可以，我该如何播放，请帮助我获得解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T04:53:04.813

保存这个…………

```
mp.pause();
length=mp.getCurrentPosition(); 
```

用这个重启…………

```
mp.seekTo(length);
mp.start(); 
```

不过，您将需要一些标识符来将其与书匹配。

# .net - 将事务与 ExecuteMethodCall 一起使用

> ID：12366545
> 
> 赞同：0
> 
> 时间：2012-09-11T09:21:41.587
> 
> 标签：.net, vb.net, linq

对...

我有一个项目，由我杰出的前任留给我，其中的一部分似乎最初是使用 LINQ 的特性自动生成的。不幸的是，他并没有真正学习如何正确使用和配置 LINQ，而是似乎已经重命名了所有自动生成的文件，并在他认为适合进行更改的任何地方将它们销毁。

我不是为了抱怨（特别是）而提到这一点，而是为了提供上下文，例如，如果建议在设计器中配置代码的某些方面，则该代码的设计器不再存在，因为它已被删除.

无论如何，我有一个特定的功能，我相信它最初是设计师生成的，内容如下：

```
<System.Data.Linq.Mapping.DatabaseAttribute(Name:="ProductionControlMS")> _
Partial Public Class Database
Inherits System.Data.Linq.DataContext

<FunctionAttribute(Name:="dbo.ReleaseItemToProduction")> _
Public Function ReleaseBuildPack(<Parameter(Name:="TransitionID", DbType:="Int")> ByVal TransitionID As Integer, _
                                          <Parameter(Name:="SubLevelID", DbType:="Int")> ByVal SubLevelID As Integer, _
                                          <Parameter(Name:="CompNo", DbType:="TinyInt")> ByVal CompNo As Byte) As Integer
    Dim result As IExecuteResult = Me.ExecuteMethodCall(Me, CType(MethodInfo.GetCurrentMethod, MethodInfo), TransitionID, SubLevelID, CompNo)
    Return CType(result.ReturnValue, Integer)
End Function 
```

我需要能够将此函数分配到事务中，因为我可能需要回滚它。不幸的是，虽然我可以打电话，但我`ProductionControlMS.Connection.BeginTransaction`看不到如何将事务分配给当前命令。因此，当代码到达该`Me.ExecuteMethodCall`行时，我会收到一个 InvalidOperationException，并显示以下消息：

> 当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求该命令具有事务。该命令的 Transaction 属性尚未初始化。

为了给它分配一个事务，让我能够回滚这些操作，我可以在这里获取什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:01:03.047

您可以使用[TransactionScopes](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx#Y1560)来控制事务，根本不需要直接挂钩到 LINQ 的 SQLConnection。（LINQ2SQL 会自动挂钩到 TransactionScope）

例如：

```
Using ts As New TransactionScope()
    new MyDataContext().ReleaseBuildPack(TransitionID, SubLevelID, CompNo )

    ' Do whatever else you need to do here under the same transaction

    ' If successful, then Complete. 
    ' If no Complete() is called before the ts exits scope then the transaction will be rolled back
    ts.Complete()
End Using 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:27:42.130

您可以从数据上下文中获取更改集，并使用更改集数据来还原更改。

有关此方法的文章可在[http://xacc.wordpress.com/2009/02/17/datacontextrevertchanges/获得](http://xacc.wordpress.com/2009/02/17/datacontextrevertchanges/)

# jquery - 浮动饼图在萤火虫中给出错误：“未捕获的异常：绘图的尺寸无效，宽度 = null，高度 = null”

> ID：12366549
> 
> 赞同：30
> 
> 时间：2012-09-11T09:21:54.113
> 
> 标签：jquery, charts, pie-chart

我使用[浮点](https://github.com/flot/flot)饼图绘制饼图。但它在萤火虫中显示错误

> 未捕获的异常：绘图尺寸无效，宽度 = null，高度 = null

我也从样式表中给出了高度和宽度。也试过这样

`<div id="placeholder1" style="width:140px;height:140px" ></div>`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-11T09:27:31.410

检查这些：

*   您首先包含 jQuery 库，然后包含 flot js 库

*   将整个代码包装在`$(document).ready()`处理函数中。

*   您将 flot 与正确绑定，`id`并且没有相同的重复`id`。

*   如果您`div`是动态的，即在页面加载后出现在 DOM中，则`plot()`在元素出现在 DOM 后绑定。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-05-29T09:05:45.107

我也有同样的问题。我为标签设置了高度和宽度`<div>`，它修复了错误。

您可以使用内联 css（就像我一样）或 JS 来设置高度和宽度。但是`plot()`只有在我们设置了高度之后才应该调用函数`<div>`

```
<div class="bars_two" style="height:300px;"></div> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-30T13:59:29.730

我也有同样的问题！上面没有列出答案，所以这是我的问题和解决方案。

```
<div id="chart" class="chart" style="width:100%;height:250px;"></div> 
```

Javascript：

```
 <script type="text/javascript">
    $(document).ready(function () {
        var data = [...];
        var options = {...};
        $.plot($("#placeholder"), data, options);
    });
</script> 
```

所以。注意绘图功能。起初，我在第一个参数中没有#。这显然是必要的。它解决了我的问题。

GG。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-08-31T02:39:07.403

我发现的一个快速解决方案是在 div 标签之间键入一些内容。例如：更改 `<div id="placeholder"></div>` 为 `<div id="placeholder">.</div>`或`<div id="placeholder">randomtext</div>`。

就个人而言，我发现在这个快速解决方案中使用空格/制表符/换行符不起作用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-13T15:54:16.917

如果你把你的图表 html 放在给出“显示：无”类的 div 中，你会得到这个错误。您必须将图表 html 放在 div 中，当加载“jquery.flot.js”时，该 div 会给出“display:block”类。

```
<div id="pie_chart" class="chart"> </div> 
```

如果此 html 在`class="display: none"`加载“jquery.flot.js”时具有的任何 div 中，请将其更改为`display: block`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-10T12:20:43.723

我在将模板集成到导轨时遇到了同样的问题。这是一个不好的方法，但我只是注释引发异常的行并添加 2 行以将宽度和高度设置为 0 - 它帮助了我。

```
Canvas.prototype.resize = function(width, height) {

  if (width <= 0 || height <= 0) {
    // COMMENTED NEXT LINE
    // throw new Error("Invalid dimensions for plot, width = " + width + ", height = " + height);
    // NEW LINES ADDED
    width = 0;
    height = 0;
  }

  // ... others code 
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-10T18:22:11.890

因此，似乎在渲染到图表之前，您需要重新获取 DOM 元素。由于 flot 操作元素并插入自己的元素，因此看起来它正在用自己的元素替换元素。

在您的渲染中，执行以下操作：

```
$.plot($(".myChartId || #myChartClass"), myData, myOptions); 
```

这与在 中无关`$(document).ready()`，尽管将其放在其中是一种很好的做法。

希望这可以帮助！

# java - 使用 iText 创建不可见的 PDF 对象

> ID：12366550
> 
> 赞同：0
> 
> 时间：2012-09-11T09:21:55.727
> 
> 标签：java, pdf, itext

我有一个输出为 PDF 的程序，但是，我希望它能够从中读取。

我想出了我自己的程序能够读取的数据类型，但我需要它以某种方式包含在 PDF 文件中（没有多个文件，我希望每个输出一个文件）。我还需要这些数据对用户来说是不可见且不可检测的。

我听说过一些有关 PDF 词典的信息，但我不知道该怎么做（或者是否有其他方法）。我不想使用 XMP/XML 文件，我的数据比键值更复杂。

如果有人给我写了几行示例代码，这将使我能够：

*   使用 iText 向 PDF 添加新词典
*   使用 iText 填充数据
*   使用 iText 在文件中找到它
*   使用 iText 从中读取

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:52:56.320

您想做一些类似于 Adob​​e Illustrator 正在做的事情。如果您从 Adob​​e Illustrator 创建 PDF，则可以封装原始 AI 文件。这给您的印象是可以编辑 PDF。实际上，Adobe Illustrator 获取 AI 文件并使用它进行编辑，并从更新的 AI 重新创建 PDF。

这些信息存储在哪里？请参阅 ISO-32000-1 第 14.5 节：

> 符合标准的产品可以使用此字典作为存储与该文档、页面或表单相关的私人数据的地方。此类私有数据可以传达对生成它的合格产品有意义的信息（例如有关图形编辑器的对象分组信息或 Adob​​e Photoshop® 使用的图层信息），但可能会被通用的合格阅读器忽略。

我不确定这里问的是什么。如果您要像我上面回答的那样寻求建议：例如，将 PieceInfo 条目添加到根字典（又名目录）。这都是有据可查的，不是吗？阅读 ISO 规范，并阅读“iText in Action”的第 4 部分。

如果您的问题是：*为我编写一些代码来完成我需要做的事情。*那么我认为这或多或少违反了本网站的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:02:24.913

好吧，您可以将您的数据十六进制编码为字符串，然后像这样将其从屏幕上绘制出来：

```
cb.showTextAligned(PdfContentByte.ALIGN_LEFT,"HIDDENDATA_"+ hexencodeddata, 2000f,2000f, 0f); 
```

并读取处理所有搜索 HIDDENDATA_ 的字符串

另一种方法是使用注解

```
 public void addAnnotation(PdfWriter writer,
        Document document, Rectangle rect, String text) {
        PdfAnnotation annotation = new PdfAnnotation(writer,
            new Rectangle(
                rect.getRight() + 10, rect.getBottom(),
                rect.getRight() + 30, rect.getTop()));
        annotation.setTitle("Text annotation");
        annotation.put(PdfName.SUBTYPE, PdfName.TEXT);
        annotation.put(PdfName.OPEN, PdfBoolean.PDFFALSE);

        annotation.put(PdfName.NAME, new PdfName(text));
        writer.addAnnotation(annotation);
    } 
```

然后用这样的一些来阅读它。

[http://downloads.snowtide.com/javadoc/PDFTextStream/2.3.2/com/snowtide/pdf/PDFTextStream.html](http://downloads.snowtide.com/javadoc/PDFTextStream/2.3.2/com/snowtide/pdf/PDFTextStream.html)

# python - vim 中不完整的语法高亮显示

> ID：12366553
> 
> 赞同：1
> 
> 时间：2012-09-11T09:22:01.510
> 
> 标签：python, vim, syntax-highlighting

以 Python 为例，vim 会高亮`list`，但不会高亮`collections.defaultdict(list)` and `len`，但不会高亮`len()`。有人知道这是什么原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:48:53.967

你能把你的`/usr/share/vim/vim72/syntax/python.vim`文件内容贴出来吗？我的 vim 不会突出显示内置函数，除非我取消注释字符串

```
"        let python_highlight_builtins = 1 
```

当我这样做时，两者`len`都会`len()`被正确地突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:52:16.243

您希望如何`collections.defaultdict(list)`突出显示？Vim 的默认 Python 语法文件似乎没有为函数调用定义语法组，只有函数定义 ( `pythonFunction`)。`collections`并且`defaultdict`也不被认可。`list`突出显示，因为它被识别为内置 ( `pythonBuiltin`)。

您希望如何`len()`突出显示？`len`突出显示，因为它被识别为内置 ( `pythonBuiltin`) 但`len()`不是内置：它是内置的，后跟括号。您是否也希望括号突出显示？同色系？另一种颜色？

您可以尝试根据`/usr/share/vim/vim7x/syntax/python.vim`您的需要进行定制或[寻找“更好”的语法文件](http://www.vim.org/scripts/script_search_results.php?keywords=python&script_type=syntax&order_by=creation_date&direction=descending&search=search)。

# facebook - Facebook 喜欢计数已删除

> ID：12366555
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:22:03.723
> 
> 标签：facebook, facebook-like

我在网站上添加了 Facebook 提要和点赞计数，但在我喜欢该页面后，计数被删除并替换为“你喜欢这个”。

有没有办法一直显示计数？您可以通过单击[http://www.artfido.com/listing.php?title=Boatwood&item_number=2736498541上的顶部 facebook 图标来查看](http://www.artfido.com/listing.php?title=Boatwood&item_number=2736498541)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:49:09.173

刚刚在您提供的链接上进行了测试，计数不会像我一样消失。

# tridion - Tridion 2011 SP1 中的二进制表结构是否更改

> ID：12366556
> 
> 赞同：0
> 
> 时间：2012-09-11T09:22:06.003
> 
> 标签：tridion, tridion-2011

我们从 Tridion 5.3 升级到了 Tridion 2011 SP1。在检查 Broker 数据库表时，我们发现 BINARIES 表的结构和名称发生了变化。在 Tridion 5.3 中，我们有一个名为 BINARIES 的表，其中包含 PATH 和 URL 列，但是当我们在 Tridion 2011 SP1 中检查相同的表时，我们找不到 BINARIES 表，而是我们有没有列 PATH 和 URL 的表 BINARY。在哪个表中我们可以找到 PATH 和 URL 列。当我们从 Tridion 发布二进制内容时会更新哪个表。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T13:35:55.827

PATH 和 URL 列现在位于**BINARYVARIANTS**表中。

但是要小心在数据库结构上引入这种依赖关系。SDL 发布了一个用于访问 Content Delivery 数据库的 API，大多数用例都可以通过使用此 API 来满足。

坚持使用此公共 API 的主要优点之一是，您的代码将在很大程度上与您在此处遇到的升级问题隔离开来。SDL 花费大量精力来保持 API 在产品版本之间保持向后兼容，同时“随意”更改数据库结构。

# php - 长肥皂调用没有得到返回值

> ID：12366561
> 
> 赞同：0
> 
> 时间：2012-09-11T09:22:30.907
> 
> 标签：php, magento, soap, soap-client

**由于 php SoapClient**对象，我正在尝试调用 magento api 方法。

问题是称为创建 magentos 产品的方法**可能相对较长**（最多 2 分钟）。我需要获取此方法的返回值，但一段时间后，soap 调用停止并返回 null。

```
$session_id = _get_session_id();
$client = new SoapClient($api_url . '&SID=' . $session_id, array('trace' => 1));

try {           
    $session = $client->login($api_user, $api_password);
    $result = $client->call($session, 'api_call.method', array($arg1, $arg2);
}
catch(SoapFault $soapFault) {
...
} 
```

我真的需要得到被调用的方法返回值，不管它需要什么时间。

你知道为什么调用会在一段时间后返回 null 吗？

是否有可以配置的默认超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T13:43:38.950

这是一个解决方案，感谢 Jürgen 评论：

```
ini_set('default_socket_timeout', 120); // 2 minutes 
```

这将呼叫超时设置为 2 分钟

# c - scanf：浮点格式未链接

> ID：12366565
> 
> 赞同：4
> 
> 时间：2012-09-11T09:22:43.413
> 
> 标签：c, scanf

我收到错误 scanf：在读取以下结构的“信息”值时未链接浮点格式。

```
struct node
{
    float info; struct node *next;
}*start; 
```

在主（）

```
void main()
{
       struct node *temp;
       temp = (struct node*)malloc(sizeof(struct node));
       printf("enter data = ");
       scanf("%f",&temp->info);
} 
```

它没有读取该 scanf 的任何值并退出程序。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-30T04:49:06.523

使用 Turbo C/Borland C 编译器时最有可能出现此问题。除非我们需要，否则这些编译器不会链接到浮点 (fp) 库中。因此，当我们有或调用`"%f"`其他浮点（fp）格式时，我们需要强制添加任何浮点（fp）函数。`scanf()``printf()`

要修复此错误，请调用浮点 (fp) 函数或仅添加包含至少一个浮点 (fp) 函数的文件的链接。例如。

```
void dummy(float *a) {
    float b=*a; //perform some floating access
    dummy (&b); //calling a floating point function
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-25T09:32:23.680

### 解决方案1：

根据以下链接： [http ://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/devwin32/rte_printf_scanf_float_not_linked_xml.html](http://docs.embarcadero.com/products/rad_studio/radstudio2007/RS2007_helpupdates/HUpdate4/EN/html/devwin32/rte_printf_scanf_float_not_linked_xml.html)

您可以将以下代码添加到一个源模块（它对我有用）：

```
extern _floatconvert;
#pragma extref _floatconvert 
```

例子：

```
#include<....>
.............

extern _floatconvert;
#pragma extref _floatconvert

int main(){......}
..........
.......... 
```

* * *

### 解决方案2：

在源代码中添加以下虚拟函数：

```
void dummy()
{
    float f,*fp;
    fp=&f;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-29T05:26:45.640

浮点格式包含用于在某些运行时库函数（例如 scanf() 和 atof() ）中操作浮点数的格式信息。通常，您应该避免链接浮点格式（占用大约 1K），除非您的应用程序需要它们。但是，您必须为以有限和特定方式操作字段的程序显式链接浮点格式。

请参阅以下潜在原因列表（从最常见到最不常见列出）以确定如何解决此错误：

原因：浮点设置为无。当浮点选项应该设置为 Fast 或 Normal 时，您将其设置为 None。

FIX：将浮点设置为快速或正常。

原因：要么编译器过度优化，要么确实需要链接浮点格式。如果您的程序以有限且特定的方式操作浮点数，则需要浮点格式。在某些情况下，编译器将忽略 scanf() 中的浮点使用。例如，当尝试将数据读入作为结构中包含的数组的一部分的浮点变量时，可能会发生这种情况。

FIX：将以下代码添加到一个源模块：

解决方案：只需在您的程序中添加以下功能。它将强制编译器包含处理浮点链接所需的库。

```
static void force_fpf() /* A dummy function */
{

       float x, *y; /* Just declares two variables */
       y = &x;      /* Forces linkage of FP formats */
       x = *y;      /* Suppress warning message about x */
} 
```

# php - 在特定时间执行 php 脚本（时间将从数据库中获取）

> ID：12366573
> 
> 赞同：1
> 
> 时间：2012-09-11T09:23:13.443
> 
> 标签：php, mysql

我有这样的数据库结构。

```
CREATE TABLE IF NOT EXISTS `addreminde` (
  `SMSId` int(11) NOT NULL AUTO_INCREMENT,
  `UserId` int(11) NOT NULL,
  `SendFrom` varchar(20) NOT NULL,
  `SendTo` varchar(400) NOT NULL,
  `Message` varchar(400) NOT NULL,
  `ReminderTime` datetime NOT NULL,
  `Status` varchar(400) DEFAULT NULL,
  `datetime` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`SMSId`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=15; 
```

所以我将 ReminderTime 存储在数据库中。

现在想知道我如何在“ReminderTime”发送电子邮件或（比如说执行一个 php 脚本）到“SendTo”

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:30:52.577

这不能在 PHP 中完成。PHP 仅在用户向网络服务器发出请求时才“生效”。

如前所述，一个 cron 作业是要走的路。每分钟查询一个并发送一些电子邮件对您的服务器来说不会是一个很大的负担。

# java - 从 SOAP 标头中提取术语

> ID：12366575
> 
> 赞同：6
> 
> 时间：2012-09-11T09:23:18.270
> 
> 标签：java, xml, soap, xpath, soapheader

我想从 SOAP 标头中提取一个名为 ServiceGroupID 的元素，它指定事务的会话。我需要这个，以便我可以使用 SOAP 会话将请求定向到同一服务器。我的 XML 如下：

```
<?xml version="1.0" encoding="http://schemas.xmlsoap.org/soap/envelope/" standalone="no"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">
<soapenv:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
<wsa:ReplyTo>
<wsa:Address>http://www.w3.org/2005/08/addressing/none</wsa:Address>
<wsa:ReferenceParameters>
<axis2:ServiceGroupId xmlns:axis2="http://ws.apache.org/namespaces/axis2">urn:uuid:99A029EBBC70DBEB221347349722532</axis2:ServiceGroupId>
</wsa:ReferenceParameters>
</wsa:ReplyTo>
<wsa:MessageID>urn:uuid:99A029EBBC70DBEB221347349722564</wsa:MessageID>
<wsa:Action>Perform some action</wsa:Action>
<wsa:RelatesTo>urn:uuid:63AD67826AA44DAE8C1347349721356</wsa:RelatesTo>
</soapenv:Header> 
```

我想知道如何使用 Xpath 从上述 XML 中提取 Session GroupId。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T09:27:58.583

您尚未指定技术，因此假设您尚未设置等效的 .NET 命名空间管理器或类似的，您可以使用命名空间不可知的 Xpath，如下所示：

```
/*[local-name()='Envelope']/*[local-name()='Header']
      /*[local-name()='ReplyTo']/*[local-name()='ReferenceParameters']
      /*[local-name()='ServiceGroupId']/text() 
```

**为 Java 更新**编辑****

 **没有命名空间别名

```
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
XPathExpression expression = xpath.compile("/*[local-name()='Envelope']/*[local-name()='Header']/*[local-name()='ReplyTo']/*[local-name()='ReferenceParameters']/*[local-name()='ServiceGroupId']/text()");
System.out.println(expression.evaluate(myXml)); 
```

使用[命名空间上下文](https://stackoverflow.com/questions/914013/namespacecontext-and-using-namespaces-with-xpath)

```
NamespaceContext context = new NamespaceContextMap(
    "soapenv", "http://schemas.xmlsoap.org/soap/envelope/", 
    "wsa", "http://www.w3.org/2005/08/addressing",
    "axis2", "http://ws.apache.org/namespaces/axis2");
XPathFactory factory = XPathFactory.newInstance();
XPath xpath = factory.newXPath();
xpath.setNamespaceContext(context);
XPathExpression expression = xpath.compile("/soapenv:Envelope/soapenv:Header/wsa:ReplyTo/wsa:ReferenceParameters/axis2:Serv‌​iceGroupId/text()");
System.out.println(expression.evaluate(myXml)); 
```

`local-name()`给出与其命名空间无关的元素的标签名称。此外，`encoding`您上面的 xml 文档中的 看起来不正确。

**编辑**

假设这`urn:uuid:`是一个常数，下面的 XPath 将去掉结果的前 9 个字符（与上述 XPath 中的任何一个一起使用）。如果`urn:uuid`不是恒定的，那么您将需要标记/拆分等，[这超出了我的技能](https://stackoverflow.com/questions/136500/does-xslt-have-a-split-function)。

```
substring(string(/*[local-name()='Envelope']/*[local-name()='Header']
                 /*[local-name()='ReplyTo']/*[local-name()='ReferenceParameters']
                 /*[local-name()='ServiceGroupId']/text()), 10) 
```**

# zooming - 使用 Openlayers 禁用缩放

> ID：12366578
> 
> 赞同：9
> 
> 时间：2012-09-11T09:23:46.993
> 
> 标签：zooming, openlayers, mousewheel

我正在使用 OpenLayers 在我的网站上显示自定义 OSM 地图。

我有几点要尊重：地图必须修复（这意味着我们不能拖动或缩放它）。

我的缩放有问题，**我无法用鼠标禁用缩放**。有人有小费吗？

```
map = new OpenLayers.Map('map');
map.events.remove("move");
map.events.remove("movestart");
map.events.remove("moveend");
map.events.remove("zoomend");
map.events.remove("mouseover");
map.events.remove("mouseout");
map.events.remove("mousemove");
map.events.remove("zoomstart");
var nav = new OpenLayers.Control.Navigation({
  defaultDblClick: function(event) { return ; }
});
map[index].addControl(nav); 
```

此外，如果有人有比这更容易删除所有导航事件的提示，我们将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-11T09:37:09.237

通过传递一个空数组来禁用地图上的默认控件：

```
var map = new OpenLayers.Map('map', { controls: [] }); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-02-13T13:35:13.103

对于 OpenLayers3，交互数组也需要为空。

```
var map = new ol.Map({
  controls: [],
  interactions: []
}); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-07-03T22:50:48.253

Mahdi 的简化方法导致

```
var i, l, c = map.getControlsBy( "zoomWheelEnabled", true );
for ( i = 0, l = c.length; i < l; i++ ) {
    c[i].disableZoomWheel();
} 
```

通过这种方式禁用鼠标滚轮上的缩放不需要自定义构建地图的选项，例如通过在没有任何控制的情况下创建地图（尽管 Lght 有所要求）。此外，重新启用缩放同样有效。

此外，通过搜索与启用属性`zoomWheelEnabled`而不是类名匹配的控件，它支持从`OpenLayers.Control.Navigation`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-06-20T11:39:58.327

您还可以执行以下操作：

```
map = new OpenLayers.Map({
    // options here ...
}

var Navigation = new OpenLayers.Control.Navigation({
    'zoomWheelEnabled': false,
    'defaultDblClick': function ( event ) { 
        return; 
     }
});

map.addControl(Navigation);

var NavigationControls = map.getControlsByClass('OpenLayers.Control.Navigation')
  , i;

for ( i = 0; i < NavigationControls.length; i++ ) {
    NavigationControls[i].disableZoomWheel();
} 
```

[在这里](http://www.stoimen.com/blog/2009/06/20/openlayers-disable-mouse-wheel-on-zoom/)找到。

对于禁用拖动等其他选项，您可以查看[文档](http://dev.openlayers.org/docs/files/OpenLayers/Control/Navigation-js.html#OpenLayers.Control.Navigation.dragPan)并自定义上述代码。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-06-26T16:30:14.047

这是基于某些逻辑来限制缩放事件的另一种简单方法。因为 OpenLayers 不提供“缩放前”

```
map.zoomToProxy = map.zoomTo;
map.zoomTo =  function (zoom,xy){
// if you want zoom to go through call
map.zoomToProxy(zoom,xy); 
//else do nothing and map wont zoom
}; 
```

这是如何工作的：

对于任何类型的缩放活动，OpenLayers API 最终都会调用名为 zoomTo 的函数。所以在覆盖它之前，我们将该函数复制到一个名为“zoomToProxy”的新函数中。我们覆盖它并添加我们的条件缩放逻辑。如果我们想要进行缩放，我们只需调用新的代理函数 :)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-28T07:59:17.710

您可以重置控件数组，然后将 Zoom 和 TouchNavigation 添加到其中。

```
var map_controls = [];
map_controls.push( new OpenLayers.Control.Zoom() );
map_controls.push( new OpenLayers.Control.TouchNavigation() );
var map = new OpenLayers.Map({
  div: "map",
  controls: map_controls
}); 
```

希望能帮助到你 ！:)

# android - 安卓，平面设计在平板电脑上变得模糊

> ID：12366585
> 
> 赞同：0
> 
> 时间：2012-09-11T09:24:02.993
> 
> 标签：android, android-layout

在我的应用程序中，我使用带有一些文本的背景图像，它的大小是 800x1280（纵向模式）

在移动设备上运行应用程序时，背景图像看起来很棒。

在平板电脑上运行应用程序时..假设 Galaxy tab 10.1 您可以看到背景图像中的文字有点模糊和像素化..

看起来图像是否小于设备分辨率并被拉伸..只有该图像已经在设备分辨率中

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:37:37.780

您的可绘制文件夹包含文件夹 ldpi、mdpi、hdpi、xhdpi - 它适用于每英寸的不同密度。

我想您的移动设备使用 mdpi 或 hdpi，而平板电脑使用 xhdpi。为了获得最佳性能，我建议您将 4 种不同尺寸的图像放入这些文件夹。ldpi 的尺寸应为 0.75 x ORIGINAL_SIZE，mdpi 的尺寸应为 ORIGINAL_SIZE，hdpi 的尺寸应为 1.5 x ORIGINAL_SIZE，xhdpi 的尺寸应为 2 x ORIGINAL_SIZE

更新：平板电脑是 hdpi，而不是 xhdpi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:28:17.570

您的设备可能会以某种方式缩放图像。你的图像在 res/drawable 中吗？试着把它放在 drawable-hdpi、drawable-mdpi 和 drawable-xhdpi 中。这样，它应该选择适合您的分辨率的图像，并避免缩放任何东西。

请注意，您可能希望它在其他分辨率上进行缩放，因此为不同的 dpi 设置不同的分辨率可能是明智的。但这是查看这是否确实是问题的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:41:51.047

首先，您是否将背景图像放入指定的可绘制文件夹？:) 您的图像可以缩放。

如果您使用的是线性布局，您可以检查另一个解决方案，将 imageview 和布局放入 framelayout :) 这里有例子：

[android-scale-a-drawable-or-background-image](https://stackoverflow.com/questions/1400782/android-scale-a-drawable-or-background-image)
[scale-background-image-in-linearlayout](https://stackoverflow.com/questions/5833943/scale-background-image-in-linearlayout)

:)

# ruby-on-rails - 是否建议强制数据库迁移应该有一个有效的 down 方法，如果是这样，你如何在你的团队中做到这一点？

> ID：12366588
> 
> 赞同：2
> 
> 时间：2012-09-11T09:24:11.593
> 
> 标签：ruby-on-rails, migration

我们推动了很多迁移，它们往往进展顺利，但我知道迟早我们会推动迁移到必须回滚的生产环境。

尽管我们对代码进行了一些基本测试，并且这些测试可用于防止推送，但我们并没有强制要求迁移应该是可逆的（或至少是可回滚的）。

虽然我意识到某些迁移是不可逆的，但这并没有改变它们可能必须被逆转的事实（或者至少它们应该让我们非常清楚这是一个糟糕的迁移来正确的事实） .

你是否费心强制执行迁移是可逆的，如果是这样，你怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:31:27.150

在我的项目中，我们仅在简单时才编写向下迁移。有时不可能写相反的方向，例如当我们更改密码的加密格式时。

我认为如果您采取适当的预防措施，向下迁移不会提供那么多价值。我们部署到一个暂存环境，QA 使用它来接受特性，并在特性被接受后部署到生产环境。如果确实需要回滚，我们将使用备份。

# sql-server-2008 - 将 SQL Server 查询结果复制到 Access 2010 表中

> ID：12366590
> 
> 赞同：1
> 
> 时间：2012-09-11T09:24:33.827
> 
> 标签：sql-server-2008, ms-access-2010

每月，我需要从我们的 SQL Server 业务应用程序中获取“新”数据到包含我们所有“管理报告”的 Access 2010 数据库中。Access 数据库有一个“临时表”，其中包含报告所基于的原始数据。

我没有 Access 经验，但我建议我们：

1.  在我们的 SQL Server 上编写一个查询（存储过程？），返回所需的原始数据（......这很容易。）
2.  在每个月底，从 Access 2010 中调用 SQL Server 存储过程（...单击按钮？）
3.  将存储过程的结果保存到 Access 中的临时表中。

但我发现它比我预期的要难。我想我可以在代码隐藏中使用 ADODB 得到一些丑陋的工作，一个接一个地循环记录集中的行，然后一个接一个地设置列值。但必须有更好的方法:)

*   我应该如何从 Access 2010 获取 SQL Server 数据？（ADODB？DAO？QueryDesigner？其他？）

*   是否有我可以利用的“将记录集插入表”（或类似的）机制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:34:24.623

将相关的 sql server 表或视图链接到 MS Access。使用 MS Access 语法对链接表运行查询并更新临时表。

也可以在查询中使用 SQL Server 内联连接字符串更新 MS Access 表。

```
SELECT *
INTO   newtable
FROM   [odbc;filedsn=Z:\DSN\test.dsn].table1 
```

从 SQL Server 端工作，您可以将 MS Access 用作链接服务器或从那里运行查询和更新。

```
INSERT INTO
OPENDATASOURCE(
   'Microsoft.ACE.OLEDB.12.0', 'Data Source=z:\docs\test.accdb')...[table1] 
   ( atext )
SELECT atext FROM table1 WHERE id=2 
```

# joomla - joomla 2.5 中的 ACL

> ID：12366591
> 
> 赞同：0
> 
> 时间：2012-09-11T09:24:38.210
> 
> 标签：joomla, joomla2.5

我有一个疑问！

用户组

```
|—  Manager
|—|— Administrator 
```

经理是父母，管理员是孩子..对吗？

但是管理员有权编辑经理配置文件？怎么可能？

任何人请解释我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:49:47.310

不完全的。更多地考虑继承权限而不是父子关系。之所以这样显示，是因为管理员默认继承了经理拥有的所有权限 + 有一些额外的权限。因此管理员拥有比经理更多的权限。附件是默认权限![在此处输入图像描述](../Images/c89de2b173212fb96b843c0347776fae.png)设置的示例。

好的，所以回答与您的组件权限相关的评论。要设置特定组件的权限（而不是全局权限），可以转到组件菜单，选择组件并在其中设置权限。例如，在组件 | 下查看 Joomla 内置横幅管理器的附件图像。横幅，单击选项图标，然后单击权限选项卡。在此处查看默认值。

Manager 可以在此处访问许多功能，但您可以将下拉菜单从 Inherited 和 Allowed 更改为 Disable，以阻止 manager 在此组件中执行任何操作。同样，您可以授予对其他用户组等的更多访问权限。因此，例如，如果您只希望超级管理员能够访问该组件，只需将管理员和管理员设置为“拒绝”并将超级用户设置为允许。

![在此处输入图像描述](../Images/6c01c99cfa2e107d14c4bfb58bde7557.png)

# objective-c - 自己返回布尔值有什么意义？

> ID：12366593
> 
> 赞同：0
> 
> 时间：2012-09-11T09:24:47.517
> 
> 标签：objective-c, syntax

我有一个正在研究的示例代码，作者没有在 m 文件中声明布尔值，而是这样做了：

```
-(BOOL) loading
{
    return _loading;
} 
```

并像这样使用它：

```
self.loading = NO; 
```

为什么我不能这样做：

```
BOOL loading = NO; 
```

如果我们需要，可以这样设置：

```
loading = YES; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:35:19.780

该示例是一个 getter 方法，它从属性 _loading 返回值。self.loading 执行一个 setter 方法，该方法将 BOOL 属性设置为 NO。

有很多教程描述了 setter 和 getter 方法，例如：[http ://www.youtube.com/watch?v=9fmJLaTLsok](http://www.youtube.com/watch?v=9fmJLaTLsok)

希望能把事情弄清楚一点。

# javascript - OpenLayers 在悬停时突出显示功能并在单击时选择

> ID：12366594
> 
> 赞同：0
> 
> 时间：2012-09-11T09:24:47.330
> 
> 标签：javascript, maps, openlayers

我正在使用 OpenLayers 来显示地图并提供一些绘图功能。我还在要绘制的矢量图层中添加了两个 SelectFeature。一种用于通过悬停突出显示绘制的特征，另一种用于通过单击选择特征。
我用[这个](http://dev.openlayers.org/releases/OpenLayers-2.12/examples/highlight-feature.html)例子来实现这一点。

问题是，这个解决方案并没有真正起作用（即使在给定的例子中）。
如果我绘制一个新特征，我可以通过将光标放在它上面来突出显示它，但不能通过单击来选择它。（在示例中相同，给定的功能可以正常工作，但在绘制一个新功能后，单击选择功能不再反应）

除了官方示例之外，还有其他解决方案可以实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:20:32.027

这个例子[是](https://github.com/openlayers/openlayers/commit/b61cfdb05411f7a1ec4c12187c1767d5ee0c1c46)4 个月前修改的，由于描述的混乱，编辑工具栏被排除在外。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T16:14:54.187

我能够得到这样的工作。您需要按特定顺序激活控件：

```
highlightControl.activate();
selectControl.activate();
dragControl.activate(); 
```

悬停事件不由拖动和平移控制器处理，因此它们尝试选择控制器，它也不使用它们，将它们传递给高亮控制器。同样，点击事件不由拖动控制器处理，而是由选择控制器处理。最后，拖动事件由拖动控制器处理。最后被激活的是第一个被“咨询”的。

# mysql - 在查询中使用 if 条件时进行全表扫描

> ID：12366597
> 
> 赞同：2
> 
> 时间：2012-09-11T09:24:54.847
> 
> 标签：mysql, database

我有一种情况要在我`where`的查询子句中使用 if 条件。`indexes`在 if 中使用的所有字段都有自己的。但是查询进行了全面`table`扫描。任何人都可以帮助我避免全表扫描吗？

我的查询：

```
EXPLAIN SELECT COUNT(*) 
FROM BILL_PATIENT_BILL AS fetchInfo 
WHERE IF(fetchInfo.BILL_TYPE='OP' 
AND fetchInfo.BILL_CATEGORY=0,fetchInfo.DUE_AMOUNT != 0,TRUE) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:32:02.993

```
EXPLAIN SELECT COUNT(*) 
FROM BILL_PATIENT_BILL AS fetchInfo 
WHERE IF(fetchInfo.BILL_TYPE='OP' 
AND fetchInfo.BILL_CATEGORY=0,fetchInfo.DUE_AMOUNT != 0,TRUE) 
```

你的 IF 没有任何意义。它的作用是：

*   如果 BILL_TYPE='OP'，
*   和 BILL_CATEGORY=0，
*   那么当 DUE_AMOUNT != 0 时 where 子句为真
*   否则 where 子句始终为真。

但无论如何，你不需要它。[您可以使用De Morgan](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)像这样重写查询

```
EXPLAIN SELECT COUNT(*) 
FROM BILL_PATIENT_BILL AS fetchInfo 
WHERE (fetchInfo.BILL_TYPE='OP' 
  AND fetchInfo.BILL_CATEGORY=0 
  AND fetchInfo.DUE_AMOUNT != 0)
  OR fetchInfo.BILL_TYPE<>'OP'
  OR fetchInfo.BILL_CATEGORY=0 
```

您应该在 (BILL_TYPE,BILL_CATEGORY,DUE_AMOUNT) 上有一个索引，但即便如此，使用 OR 子句，它仍可能决定不使用该索引。如果是这种情况，请尝试将其重写为联合：

```
SELECT COUNT(*) 
    FROM BILL_PATIENT_BILL AS fetchInfo 
    WHERE (fetchInfo.BILL_TYPE='OP' 
      AND fetchInfo.BILL_CATEGORY=0 
      AND fetchInfo.DUE_AMOUNT != 0)
UNION ALL
SELECT COUNT(*)
    FROM BILL_PATIENT_BILL AS fetchInfo 
      WHERE fetchInfo.BILL_TYPE<>'OP'
UNION ALL
SELECT COUNT(*)
    FROM BILL_PATIENT_BILL AS fetchInfo 
      WHERE fetchInfo.BILL_CATEGORY=0 
```

你可以做一个 SUM 来添加这些。

由于您实际上接受了列的所有值，也许您甚至不需要 where 子句...

```
EXPLAIN SELECT COUNT(
  IF(fetchInfo.BILL_TYPE='OP' 
    AND fetchInfo.BILL_CATEGORY=0 
    AND fetchInfo.DUE_AMOUNT != 0,
  1,
  0)) 
FROM BILL_PATIENT_BILL AS fetchInfo 
```

# ruby-on-rails - Rails：处理未从数据库中找到的数据

> ID：12366601
> 
> 赞同：0
> 
> 时间：2012-09-11T09:25:05.067
> 
> 标签：ruby-on-rails, database, rails-activerecord

这可能是最基本的问题之一，但我仍然认为 stackoverflow 将是我获得正确逻辑的最佳方式。

我的简单问题是，如果数据库查询不返回任何内容，您将如何处理它。下面是我的代码；

```
@tokenSelected=Token.where(:tokenCode => "ABCDRRREF").first 
```

稍后当我想检查 @userSelected.userID 是否为空时，它给了我错误；

```
<h1>
  NoMethodError
    in InitsController#create
</h1>
<pre>undefined method `empty?&#x27; for nil:NilClass</pre> 
```

我能做些什么来防止这种情况发生

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:35:40.613

而不是`empty?`使用[`blank?`](http://api.rubyonrails.org/classes/Object.html#method-i-blank-3F)

```
 @tokenSelected.blank? 
```

如果对象为假、空或空白字符串，则该对象为空。例如，“”、“ ”、nil、[] 和 {} 都是空白的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:41:15.290

使用`object.present?`它返回`false`nil、[]、{}、空字符串和空集合。

# ios - 核心定位崩溃

> ID：12366604
> 
> 赞同：0
> 
> 时间：2012-09-11T09:25:18.500
> 
> 标签：ios, core-location

我在我的应用程序中使用核心定位，它会根据需要检索纬度/经度但是当我“返回”该页面时（[self dismissModalViewControllerAnimated:YES];）应用程序崩溃。

我没有收到任何错误，只能假设我没有正确退出更新位置？？

有什么帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:02:26.277

您的问题相当模糊，但我猜您所指的*页面是您的 CLLocationManager 的代表。*您的*页面*被解除分配，位置管理器失去它的委托，一旦位置管理器尝试访问它的委托，您的应用程序就会崩溃。

您应该正确清理位置管理器。

在 -dealloc 中，在您的*页面*（可能是 UIViewController）中设置类似的内容（这只是一个开始）：

```
- (void) dealloc {
    //todo: stop updating/release the location manager too
    [self.locationManager setDelegate:nil];

    //there should be a lot more code here

    [super dealloc];
} 
```

不过，您应该正确管理您的对象和您的位置管理器。您应该阅读 Apple 的[Delegates and Data Sources](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)文档和 Apple 的[内存管理指南](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html#//apple_ref/doc/uid/10000011-SW1)。

# c - 这两个 FOR 循环有什么区别？

> ID：12366606
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:25:23.973
> 
> 标签：c

我正在学习 C，并在我正在阅读的书中看到了下面列出的第一个循环。我很好奇两者之间的区别是什么，因为我习惯于使用第二个并且即使它们返回不同的结果也无法弄清楚它们之间的区别。

```
for(i = 0; i < 10; ++i){}

for(i = 0; i <= 10; i++){} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:26:18.750

第一个迭代到`9`，第二个迭代到`10`。就这样。

前/后增量操作没有区别。

**为两个版本生成的未优化**代码：

```
 for(int i = 0; i < 10; ++i)
00E517AE  mov         dword ptr [i],0  
00E517B5  jmp         wmain+30h (0E517C0h)  
00E517B7  mov         eax,dword ptr [i]  
00E517BA  add         eax,1  
00E517BD  mov         dword ptr [i],eax  
00E517C0  cmp         dword ptr [i],0Ah  
00E517C4  jge         wmain+53h (0E517E3h)  
    {
    }

    for(int i = 0; i <= 10; i++)
00E517E3  mov         dword ptr [i],0  
00E517EA  jmp         wmain+65h (0E517F5h)  
00E517EC  mov         eax,dword ptr [i]  
00E517EF  add         eax,1  
00E517F2  mov         dword ptr [i],eax  
00E517F5  cmp         dword ptr [i],0Ah  
00E517F9  jg          wmain+88h (0E51818h)  
    {
    } 
```

因此，即使在这里，也没有性能损失。`i++`比这慢的事实`++i`是不正确的（至少在这种情况下，它没有任何区别）。例如，它会更慢`int y = i++`，但在这种情况下，两者会做不同的事情，这里不是这种情况。性能问题可能在 20 年前的编译器上仍然有效，但现在不再有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:28:38.077

在第一个你有预增量，第二个有一个后增量。

唯一的问题是条件，即第一次检查最多 9 次，第二次检查最多 10 次。

在这两个循环中，增量运算符在这种情况下没有任何区别

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:32:51.433

当您在分配值时使用它们时，前/后增量操作将起作用。

说

```
i=10;

j = i++; 
```

这里的值`i`将是 11，但是，值`j`将是 10。因为在将值分配给即 Post Increment`i`后将递增`j`

```
i=10;

j = ++i; 
```

这里的值`i`将是 11，值`j`也将是 11。因为`i`在值被分配之前会递增，`j`即 Pre Increment

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:28:16.080

第一个将运行 10 次。第二个将运行 11 次。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T09:46:15.243

大多数人已经说过迭代次数相差一，并且前后增量在这里没有任何区别。

对于 c，我会说第一个循环是您更常遇到的。我认为这样做的原因是 c 使用从零开始的数组，因此数组（或字符串，因为这是一个字符数组）的最大值不用作数组中的索引（这将超出范围）。因此，在此示例中循​​环遍历长度为 10 的数组时，第一个循环将是更合乎逻辑的循环，因为您可以安全地`i`用作数组的索引。第二个循环将导致错误（可能是分段错误）。

你说你习惯了第二个。我不知道你为什么习惯了这一点，但我假设其他一些编程语言或者在数学中，循环（求和等）运行到极限（但通常从一个开始）。在这种情况下，从零开始的索引可能会有点令人沮丧。

简而言之，根据我的经验，您会更频繁地发现第一个循环，但第二个循环有很多用例。

至于`++i`vs `i++`：我倾向于后者，因为 for 语句的这一部分发生在循环的末尾。因此，后缀符号感觉更合乎逻辑。但再一次，这并不重要。

# python - 从numpy中的数组制作索引数组

> ID：12366607
> 
> 赞同：0
> 
> 时间：2012-09-11T09:25:26.563
> 
> 标签：python, arrays, list, numpy, indexing

各位专家早安

我有一个包含整数的数组，并且我有一个列表，其中包含按特殊顺序排序的数组中的唯一值。我想要的是创建另一个数组，它将包含数组中每个值的索引。

```
#a numpy array with integer values
#size_x and size_y: array dimensions of a
#index_list contain the unique values of a sorted in a special order.
#b New array with the index values

for i in xrange(0,size_x):
     for j in xrange(0,size_y):                    
         b[i][j]=index_list.index(a[i][j]) 
```

这可行，但需要很长时间才能完成。有更快的方法吗？

非常感谢您的帮助

德语

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:38:39.440

缓慢的部分是查找

```
index_list.index(a[i][j]) 
```

使用 Python 字典来完成这项任务会快得多，即。而不是

```
index_list = [ item_0, item_1, item_2, ...] 
```

利用

```
index_dict = { item_0:0,  item_1:1, item_2:2, ...} 
```

可以使用以下方法创建：

```
index_dict = dict( (item, i) for i, item in enumerate(index_list) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T11:14:06.837

没有尝试，但由于这是纯粹的 numpy，它应该比基于字典的方法快得多：

```
# note that the code will use the next higher value if a value is
# missing from index_list.
new_vals, old_index = np.unique(index_list, return_index=True)

# use searchsorted to find the index:
b_new_index = np.searchsorted(new_vals, a)

# And the original index:
b = old_index[b_new_index] 
```

或者，您可以简单地填写 index_list 中的任何整体。

* * *

编辑过的代码，它本身就是错误的（或非常有限的）......

# c# - 基于任务的处理，使用 .NET 4.5 和 c# 限制并发任务数

> ID：12366608
> 
> 赞同：0
> 
> 时间：2012-09-11T09:25:31.213
> 
> 标签：c#, multithreading, task-parallel-library, .net-4.5

在[此](https://stackoverflow.com/questions/12352560/async-execution-limiting-the-number-of-concurrent-instances/12352930#12352930)之后，任何人都可以为以下任务发布准系统解决方案，针对 .NET 4.5（以及更大规模的 WPF UI）吗？

基本上，我正在寻找在 .NET 4.5 和 c# 上实现的任何 torrent 应用程序的功能模拟。

任务：

我有`IEnumerable<IProcessable>`，包含 1000 个实例`IProcessable`，`IProcessable`有`Process(int argument)`方法，需要 1 到 10 秒来执行。我想遍历集合并处理 的每个实例`IProcessable`，将并发处理的实例数限制为 N (1..10)，最大并发实例数应该很容易调整。理想情况下，我每个`IProcessable`人都报告流程完成的进度，这是流程的原型（可能需要将其转换为某种东西而不是 void 以启用进度报告）：

```
void Process(int e)
{
   int progress = 0;
   ...Sleep for 100ms;
   int progress = 30;
   ...Sleep for 100ms;
   int progress = 50;
   ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:34:45.133

如果您只想限制一次处理的实例数，那么这似乎[`Parallel.ForEach()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.foreach.aspx)是一个很好的解决方案。当您使用它时，您可以指定[`MaxDegreeOfParallelism`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx), 执行此操作。

# android - 在 Android 上的 Phonegap 1.9.0 中调用 navigator.splashscreen.hide() 时出现语法错误

> ID：12366611
> 
> 赞同：1
> 
> 时间：2012-09-11T09:25:43.247
> 
> 标签：android, cordova, splash-screen

我正在使用 ember 为 android 开发 phonegap 1.9.0 应用程序，并且我试图在应用程序加载后隐藏我的启动屏幕，而不是等待指定的超时。

我的启动画面显示，但我无法成功调用

```
navigator.splashscreen.hide() 
```

包含此行会导致错误：

```
Error: SyntaxError: Unexpected token ' at file:///android_asset/src/cordova-1.9.0.js:1012 
```

我尝试再次下载 cordova-1.9.0.js 并使用 2.0.0 版本，但遇到了同样的问题。

这是我的 html/js。

```
<!DOCTYPE html>
<html>
    <head>
    <link rel="stylesheet" title="master" type="text/css"       href="css/master.css" />
    <title>Cordova Device Ready Example</title>

    <script type="text/javascript" charset="utf-8" src="cordova-1.9.0.js">     </script>
    <script type="text/javascript" charset="utf-8" src="jquery.js"></script>
    <script type="text/javascript" charset="utf-8" src="ember-0.9.8.1.min.js"></script>
    <script type="text/javascript" charset="utf-8" src="app.js"></script>
    <script type="text/javascript" charset="utf-8" src="main.js"></script>

    <script type="text/javascript" charset="utf-8"> 
        // Call onDeviceReady when Cordova is loaded.
        function onLoad() {
            document.addEventListener("deviceready", onDeviceReady, false);
        }

        // Cordova is loaded and it is now safe to make calls Cordova methods
        function onDeviceReady() {
            // Now safe to use the Cordova API
            console.log("device ready...")
            navigator.splashscreen.hide()
        }
    </script>

    </head>
    <body onload="onLoad()">
        <div id="content"></div>
    </body>
</html> 
```

和活动代码...

```
public class myApp extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        super.setIntegerProperty("splashscreen", R.drawable.splash);

        super.loadUrl("file:///android_asset/src/index.html", 5000);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:36:13.230

尝试下面的代码来隐藏启动画面：

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady() {
    cordova.exec(null, null, "SplashScreen", "hide", []);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T09:22:18.353

看看我之前的回答：[Cordova 的 Splash Screen](https://stackoverflow.com/questions/9968295/showing-splash-screen-in-phonegap-cordova-1-5-0/13601594#13601594)

我正在使用 Cordova 2.1.0，现在使用 2.2.0。调用 navigator.splashscreen.hide() 时，启动画面没有消失。使用以下代码，它起作用了：

```
private static native void hideSplashScreen() /*-{
    $wnd.Cordova.exec(null, null, "SplashScreen", "hide", []);
}-*/; 
```

希望这可以帮助

# php - Symfony2 / Doctrine2 - 将实体关联到某个连接

> ID：12366618
> 
> 赞同：1
> 
> 时间：2012-09-11T09:26:11.943
> 
> 标签：php, symfony, doctrine, doctrine-orm

我在 Symfony config.yml 中设置了两个 MySQL 连接：

```
doctrine:
    dbal:
        default_connection: default
        connections:
            default: __VARIABLES
            dealer: __VARIABLES 
```

我知道我可以通过以下方式从某个连接中检索对象： `$this->get('doctrine')->getEntityManager('dealer');`

我的问题是 - 有没有办法设置与某个实体的连接，所以`doctrine:schema:update`同步只在设置连接的范围内完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:45:02.937

是的 - 您可以在实体经理部分指定实体经理的职责。为此，您可以使用“dir”选项。您必须禁用 auto_mapping 选项并告诉 Doctrine 哪些实体与哪个实体管理器相关。例如：

```
doctrine:
   dbal:
       (...)

   orm:
       auto_generate_proxy_classes: %kernel.debug%        
       default_entity_manager:   default
       entity_managers:
           default:
               connection:       default
               mappings:                    
                   CompanySomeBundle:
                       dir: Entity/BaseEntity/

            secondem:
                connection:      second_connection
                mappings:                 
                    CompanySomeBundle:
                       dir: Entity/AdditionalEntity/ 
```

因为 BaseEntity 目录中的每个实体都属于“默认” em，而 AdditionalEntity 目录中的这些实体属于“secondem”实体管理器。

# jquery - 修复最后一列数据表的颜色排序

> ID：12366622
> 
> 赞同：0
> 
> 时间：2012-09-11T09:26:20.467
> 
> 标签：jquery, jquery-datatables

使用数据表排序时如何修复最后一列？

我尝试了以下它不起作用：

```
var oTable = $('#example').dataTable({
                "sDom": 'R',
                "oColReorder": {
                    "iFixedColumns":[-1]    
                }
             }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:01:47.177

我找到了以下解决方案：我在表格的最后一个添加了一个 div，如下所示：

```
<th >First</th>
<th >2</th>
<th >3</th>
<th >4</th>
<th ><div id="theLast">last</div></th> 
```

并调用以下脚本：

```
$(document).ready(function () {
            $("#theLast").bind("mousedown", function (event) {
                event.stopPropagation(true);
                return;
            }
            );

            var oTable = $('#example').dataTable({
                "sDom": 'R'
        });

    }); 
```

像这样我禁用了 colReorder 功能的最后一列。为了在最后一列之后禁止删除其他列，我修改了 ColReorder.js 文件中的代码，如下所示：

功能修改：_fnMouseUp

我写 ：

```
if (this.s.mouse.toIndex == 4) { // 4 means last  column index 
                    e.stopPropagation(true);
                    return null;
                }
                else
                /* Actually do the reorder */
                this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex, this.s.mouse.toIndex); 
```

代替

```
this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex, this.s.mouse.toIndex); 
```

# java - eclipse 在我的项目旁边显示感叹号

> ID：12366623
> 
> 赞同：1
> 
> 时间：2012-09-11T09:26:20.887
> 
> 标签：java, android, xml, eclipse, android-layout

> **可能重复：**
> [Eclipse 感叹号](https://stackoverflow.com/questions/6040914/eclipse-exclamation-mark)

eclipse 在我的项目旁边显示一个感叹号，该项目的所有类都没有显示错误消息。我清理了项目并再次重新启动，感叹号仍然存在。

问题选项卡输出：

```
Description Resource    Path    Location    Type 
The container 'Android Dependencies' references non existing library 'D:\workspaceQR 
\QRTest\bin\qrtest.jar' QR01        Build path  Build Path Problem
SupplementalInfoRetriever cannot be resolved    CaptureActivity.java    /QRTest 
/src/com/google/zxing/client/android    line 496    Java Problem
ShareActivity cannot be resolved to a type  CaptureActivity.java    /QRTest/src/com
/google/zxing/client/android    line 299    Java Problem
ResultHandlerFactory cannot be resolved CaptureActivity.java    /QRTest/src/com 
/google/zxing/client/android    line 359    Java Problem
ResultHandler cannot be resolved to a variable  CaptureActivity.java    /QRTest
/src/com/google/zxing/client/android    line 503    Java Problem
ResultHandler cannot be resolved to a type  CaptureActivity.java    /QRTest/src/com  
/google/zxing/client/android    line 359    Java Problem
ResultHandler cannot be resolved to a type  CaptureActivity.java    /QRTest/src/com
/google/zxing/client/android    line 438    Java Problem
ResultHandler cannot be resolved to a type  CaptureActivity.java    /QRTest/src/com  
/google/zxing/client/android    line 521    Java Problem
ResultButtonListener cannot be resolved to a type   CaptureActivity.java    /QRTest  
/src/com/google/zxing/client/android    line 508    Java Problem 
```

而且我没有任何名为 QRTest 的类，但我有 QR01，因此我将 QR01 重命名为 QRTest，但问题仍然存在。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:29:25.987

这通常发生在缺少项目依赖项之一时。请检查 Java 构建路径以查看一切是否正确。您还可以查看“问题”视图。

# sqlite - SQLite：REPLACE INTO 如何确定一行是否存在？

> ID：12366632
> 
> 赞同：2
> 
> 时间：2012-09-11T09:26:57.200
> 
> 标签：sqlite, insert, replace, indexing

我发现[这篇文章](https://stackoverflow.com/questions/2251699/sqlite-insert-or-replace-into-vs-update-where)解释了 UPDATE 和“INSERT OR REPLACE INTO”之间的区别。它解释说

```
INSERT OR REPLACE INTO names (id, name) VALUES (1, "John") 
```

如果不存在 id = 1 的记录，则插入新行，如果存在，则替换 id = 1 的行。我的问题是：SQLite 如何知道或决定“id”是其值确定记录是否已经存在的字段？

换句话说，为什么 sqlite 不搜索 name = "John" 的记录并替换 id 值？这是否取决于上面示例中未提及的索引，或者 SQLite 是否对名为“id”的字段或字段名称行中的第一个字段进行特殊处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:32:33.643

有关如何处理的信息，请参阅[CONFLICT条款文档。](http://www.sqlite.org/lang_conflict.html)本质上，它基于 UNIQUE 和 NOT NULL 约束（主键通常作为选择是否更新或插入的约束）。

> 当发生 UNIQUE 约束违规时，REPLACE 算法会在插入或更新当前行之前删除导致约束违规的预先存在的行，并且命令会继续正常执行。如果发生 NOT NULL 约束违规，则 REPLACE 冲突解决方案将 NULL 值替换为该列的默认值，或者如果该列没有默认值，则使用 ABORT 算法。如果发生 CHECK 约束冲突，则 REPLACE 冲突解决算法始终像 ABORT 一样工作。
> 
> 当 REPLACE 冲突解决策略删除行以满足约束时，当且仅当启用递归触发器时，删除触发器才会触发。
> 
> 对于由 REPLACE 冲突解决策略删除的行，不会调用更新挂钩。REPLACE 也不会增加更改计数器。本段中定义的异常行为可能会在未来的版本中发生变化。

# asp.net - Telerik Radcombobox SelectOnTab 升级到最新版本后不起作用

> ID：12366633
> 
> 赞同：0
> 
> 时间：2012-09-11T09:26:58.670
> 
> 标签：asp.net, telerik

我们今天将 radcombobox 组件从版本 2009.3.1314.20 升级到最新版本 (2012.2.724.40)。以前当我们按下 Tab 时，当我们按下 Tab 时选择了所选项目，现在它只在我们按下 Enter 时起作用。我们没有更改任何代码，也没有使用任何 javascript 来完成此行为。

```
<telerik:RadComboBox ID="ddlLevel1" runat="server" EnableEmbeddedSkins="false" skin="ourSkin" style="float:left;padding-right:1px;" Filter="Contains" AllowCustomText="false" MarkFirstMatch="true" IsCaseSensitive="false" AutoPostBack="true" Width="126"          OnClientFocus="OnClientDropdownFocus" SelectOnTab="true" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T07:07:16.043

我们最终添加了一个来自 OnClientKeyPressing 事件的简单 javascript 方法。

```
function radComboKeyPress(comboBox, eventArgs) { 
var keyCode = eventArgs.get_domEvent().keyCode; 
if (keyCode == 9) { 
    try { 
        comboBox.get_highlightedItem().select(); 
    } 
    catch (err){ 
        return; 
    } 
} 
```

}

这解决了问题

# c# - 如何预测内存不足？

> ID：12366635
> 
> 赞同：7
> 
> 时间：2012-09-11T09:27:00.697
> 
> 标签：c#, out-of-memory

在我的 C# 程序中，我执行各种消耗内存的操作。根据当前可用的内存量和各种非常量情况，程序在不同阶段失败并出现 OutOfMemoryException。

当程序在不久的将来或多或少明显会因OOM而失败时，我想在某个时候停止处理。

但是，对此没有固定的阈值；其他用户可能拥有更多（或更少）内存，另一个操作系统具有其内存细节等等。

我不想只检查软件消耗的空间是否超过 500MB，因为这可能是一个太高或太低的限制。

有没有可靠的方法来预测 .NET 中即将出现的 OOM？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:30:01.837

MemoryFailPoint 应该做你想做的事。

[http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:43:03.450

排序的答案是它可能不是最好的解决方案 - 与其预测何时会耗尽内存并尝试对其进行处理，您可能应该尝试减少应用程序的内存消耗，或者只是等到[抛出 OutOfMemoryException](http://msdn.microsoft.com/en-us/library/system.outofmemoryexception.aspx)异常然后清理。

每当 .Net 运行时无法分配刚刚请求的内存时，就会引发内存不足异常 - 这可能是因为机器的物理内存不足并且交换文件被禁用（或者机器的磁盘空间不足） )，或者可能是因为进程的虚拟内存空间过于碎片化而无法分配所需的内存块（在处理大型对象时可能会发生这种情况）。预测什么时候会是相当困难的。

您可以使用[MemoryFailPoint](http://msdn.microsoft.com/en-us/library/system.runtime.memoryfailpoint.aspx)类检查在开始使用大量内存的操作之前是否有一定数量的内存可用，但是该类不保证内存在持续时间内保持可用操作，因此您的应用程序仍然可能因 OOM 异常而失败。尽管此类在某些情况下可以用于尝试减少 OOM 异常（进而避免破坏应用程序状态），但它可能不会成为解决问题的“灵丹妙药”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:37:57.150

到目前为止，我观察到的许多 OOM 异常都是由内存泄漏或第三方组件的不当编写应用程序引起的。考虑使用针对您的操作**优化的数据结构。**

检测OOM是相当困难的，因为有随机抛出。也许您可以使用 MemoryFailPoint 和 Performance 计数器（可用内存）来确保有足够的可用内存。

# javascript - Node.js 上的 WebSocket 并在所有连接的客户端之间共享消息

> ID：12366636
> 
> 赞同：2
> 
> 时间：2012-09-11T09:27:01.650
> 
> 标签：javascript, json, node.js, websocket, eval

我有一个带有`websocket`模块的 Node.js 服务器，通过以下命令安装：

```
npm install websocket 
```

从[本指南](http://cjihrig.com/blog/creating-your-own-node-js-websocket-echo-server/)开始，我决定扩展它，在所有客户端之间共享发送的消息。

这是我的（简化的）服务器代码：

```
#!/usr/bin/env node
var WebSocketServer = require('websocket').server;
var http = require('http');

var server = http.createServer(function(request, response) {
    console.log((new Date()) + ' Received request for ' + request.url);
    response.writeHead(404);
    response.end();
});
server.listen(8080, function() {
    console.log((new Date()) + ' Server is listening on port 8080');
});

wsServer = new WebSocketServer({
    httpServer: server,
    autoAcceptConnections: false
});

var connectedClientsCount = 0; // ADDED
var connectedClients = []; // ADDED

wsServer.on('request', function(request) {
    var connection = request.accept('echo-protocol', request.origin);
    connectedClientsCount++;
    connectedClients.push(connection);
    console.log((new Date()) + ' Connection accepted.');
    connection.on('message', function(message) {
        if (message.type === 'utf8') {
            console.log('Received Message: ' + message.utf8Data);
            for(c in connectedClients) // ADDED
                c.sendUTF(message.utf8Data); // ADDED
        }
        else if (message.type === 'binary') {
            console.log('Received Binary Message of ' + message.binaryData.length + ' bytes');
            connection.sendBytes(message.binaryData);
        }
    });
    connection.on('close', function(reasonCode, description) {
        // here I should delete the client...
        console.log((new Date()) + ' Peer ' + connection.remoteAddress + ' disconnected.');
    });
}); 
```

在这种情况下，我可以获得`connectedClientsCount`价值，但我无法管理`connectedClients`列表。

我也尝试了`((eval)c).sendUTF(message.utf8Data);`as for 语句，但它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:49:46.647

我建议您使用 Socket.IO：用于实时应用程序的跨浏览器 WebSocket。[该模块的安装和配置](http://socket.io/#how-to-use)非常简单

例如：服务器

```
...
io.sockets.on('connection', function (socket) {
  //Sends the message or event to every connected user in the current namespace, except to your self.
  socket.broadcast.emit('Hi, a new user connected');

  //Sends the message or event to every connected user in the current namespace
  io.sockets.emit('Hi all');

  //Sends the message to one user
  socket.emit('news', {data:'data'});
  });
});
... 
```

[更多的](https://github.com/LearnBoost/socket.io/wiki/Messaging)

客户：

```
<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');
  //receive message
  socket.on('news', function (data) {
    console.log(data);
    //send message
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

更多关于[暴露事件](https://github.com/LearnBoost/socket.io/wiki/Exposed-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-12T01:25:53.230

尝试替换`for ... in`为`for ... of`

```
for(c of connectedClients) // ADDED
    c.sendUTF(message.utf8Data); // ADDED 
```

# sql-server - 如何从 Listview 保存到 MS SQL Server

> ID：12366647
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:27:39.897
> 
> 标签：sql-server, listview, vb.net-2010

我正在尝试将列表视图控件中的数据保存到 Microsoft SQL Server。当我运行代码时，没有显示任何错误，但数据没有保存在数据库中。有人可以帮助我吗？

```
Private Sub Save_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
        Dim con As New SqlConnection(InvoiceClass.GetConnectionString()) ' My Connection String
        con.Open()
        For Each item As ListViewItem In Lstview.Items
            Dim command As SqlCommand = New SqlCommand("SP_InvoiceSave", con)
            command.Parameters.AddWithValue("@ItemName", item.SubItems(0).Text)
            command.Parameters.AddWithValue("@Qty", item.SubItems(1).Text)
            command.Parameters.AddWithValue("@SellingPrice", item.SubItems(2).Text)
            command.CommandType = CommandType.StoredProcedure
            Dim adapter As SqlDataAdapter = New SqlDataAdapter(command)
        Next
        MsgBox("done")
    End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:34:40.863

```
Private Sub Save_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click

            Dim con As New SqlConnection(InvoiceClass.GetConnectionString()) ' My Connection String
            'open connection
            con.Open()
            For Each item As ListViewItem In Lstview.Items
                Dim command As SqlCommand = New SqlCommand("SP_InvoiceSave", con)
                command.Parameters.AddWithValue("@ItemName", item.SubItems(0).Text)
                command.Parameters.AddWithValue("@Qty", item.SubItems(1).Text)
                command.Parameters.AddWithValue("@SellingPrice", item.SubItems(2).Text)
                command.CommandType = CommandType.StoredProcedure
                command.ExecuteNonQuery() 
            Next
            MsgBox("done")
            'closing connection
            conn.Close()

End Sub 
```

# java - websocket 双向概念是如何工作的？

> ID：12366651
> 
> 赞同：2
> 
> 时间：2012-09-11T09:28:08.933
> 
> 标签：java, sockets, tomcat, websocket

我使用 Java Tomcat 作为 websocket 服务器。

我认为 websocket 和 http 流（我不是指轮询和长轮询）之间的主要区别是 websocket 允许双向通信，这类似于通常的原始套接字编程。（以上是我的理解，可能有误，欢迎指正。）

我的问题是 web 客户端（浏览器）如何继续通过已经打开的 websocket 发送另一个请求？通常的http请求会将另一个请求视为新的套接字连接，但websocket不会，这就是为什么我很困惑，它是如何实现的？它应该在服务器端还是客户端（浏览器）端处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:29:57.277

是的，websockets 是双向的。一个重要的结果是您可以有效地将数据从服务器推送到客户端。

底层套接字只是保持打开状态（如果无法保持打开状态，则在需要时重新打开）。请注意，HTTP 1.1 尚未[这样做](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)：

> HTTP/1.1 是原始 HTTP (HTTP/1.0) 的修订版。在 HTTP/1.0 中，每个资源请求都会建立到同一服务器的单独连接。HTTP/1.1 可以在页面交付后多次重用连接来下载图像、脚本、样式表等。因此，HTTP/1.1 通信的延迟更少，因为 TCP 连接的建立会带来相当大的开销。

它必须在客户端和服务器端都进行处理。当然这意味着这两个软件都需要更新（[旧的浏览器](http://caniuse.com/#feat=websockets)和旧的服务器不能处理 websockets）。

**编辑（在评论交流之后）：**

客户端，这是如何初始化连接的：

```
var ws = new WebSocket('ws://'+document.location.host+'/ws');
ws.onopen = function() {
       // do something
};
ws.onerror = function() {
       // do something
};
ws.onclose = function() {
       // do something
};
ws.onmessage = function(msgevent) {
    var msg = JSON.parse(msgevent.data);
    // handle incoming message
}; 
```

您保留 ws 变量，然后您可以使用相同的连接从客户端推送到服务器

```
ws.send(window.JSON.stringify(msg)); // msg is a basic js object 
```

# php - 完整日历中的 Json 编码数据

> ID：12366659
> 
> 赞同：0
> 
> 时间：2012-09-11T09:28:18.153
> 
> 标签：php, javascript, jquery, fullcalendar, json

我有这样一个惊人的情况。我正在从 MySql（使用 Php）中检索数据并将其编码为 json 编码字符串以插入到 jQuery 完整日历中。让我们看看 PHP 脚本 =>

```
while ($birthday_row = $birthday_r->fetch_row()){
    $birthday_array[] = array(
        'id'  => $birthday_row[0],
        'title'     => $birthday_row[1],
        'start'     => "2012-" . $birthday_row[2] . "-" . $birthday_row[3],
    );                              
} 
```

（从 MySql 检索数据时我没有错误，它工作正常）

然后用这样的`json_encode`函数编码它=>

```
$k = json_encode($birthday_array); 
```

并将其插入到 jQuery 完整日历中，这里是 JavaScript =>

```
jQuery("#calendar").fullCalendar({ // initialize full calendar
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        <?php
            echo "events:" . $k . ",";
        ?>
        eventMouseover: function(calEvent,jsEvent,view){
            $(this).css("cursor","pointer");
        }
    }); 
```

我想知道的原因是，在 Chrome 中插入了数据，但在其他浏览器（如 firefox、opera、explorer、safari）中却没有。

顺便说一下，这里是`$k`变量 =>的输出

```
[{"id":"1","title":"\u10d7\u10dd\u10e0\u10dc\u10d8\u10d9\u10d4 \u10dc\u10d0\u10dc\u10dd\u10d1\u10d0\u10e8\u10d5\u10d8\u10da\u10d8","start":"2012-10-2"},{"id":"2","title":"\u10d2\u10d8\u10dd\u10e0\u10d2\u10d8 \u10d9\u10d0\u10d9\u10d0\u10e8\u10d5\u10d8\u10da\u10d8","start":"2012-10-1"},{"id":"3","title":"\u10e0\u10e3\u10d7\u10d8 root","start":"2012-9-17"},{"id":"4","title":"one one","start":"2012-9-20"},{"id":"7","title":"\u10d2\u10d8\u10dd\u10e0\u10d2\u10d8 \u10d9\u10d0\u10d9\u10d0\u10e8\u10d5\u10d8\u10da\u10d8","start":"2012-9-5"},{"id":"8","title":"\u10d2\u10d8\u10dd\u10e0\u10d2\u10d8 \u10d0\u10e4\u10e0\u10d8\u10d0\u10e8\u10d5\u10d8\u10da\u10d8","start":"2012-1-16"}] 
```

我不知道我做错了什么，但事实是结果让我想知道。请帮助任何想法！预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:31:33.350

我已经弄清楚了我的问题的原因。在 chrome json 编码的字符串中输出是这样的 =>

```
[{"id":"1","title":"some","start":"2012-5-9"}] 
```

工作正常，但在其他浏览器如 firefox、opera、safari、explorer 中，它不起作用。原因是 date 的格式。在提到的浏览器中，如果必须像这样格式化 =>

```
[{"id":"1","title":"some","start":"2012-05-09"}] 
```

`2012-5-9`所以这是和之间的区别`2012-05-09`。我真的没有遇到过这样的情况，无论如何，如果有人想帮助我并在我的问题上浪费时间，谢谢

# android - 如何在 Android NDK 中访问 C 标志？

> ID：12366663
> 
> 赞同：0
> 
> 时间：2012-09-11T09:28:37.560
> 
> 标签：android, android-ndk

我的`jni/Android.mk`文件中有这个：

```
LOCAL_CFLAGS := -LANG=en 
```

但是当我运行程序时，LANG 不存在！有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T13:22:35.143

请改用 -D 选项：

LOCAL_CFLAGS := -D LANG=en

它相当于 C#define。然后，您将 LANG 用作带有 value 的常量`en`。请注意，它不是字符串“en”，而是不带引号的标识符。所以下面的用法很好：

```
int en = 1, de = 2, es = 3;

int CurrentLang = LANG; //Translates to CurrentLang = en; 
```

或者像这样：

```
#if LANG==en
//English localization stuff...
#endif 
```

虽然以下不是：

```
char * CurrentLang = LANG; //Error: en is an unknown identifier. It's not a string. 
```

# google-sheets - SUMIF 没有删除线

> ID：12366667
> 
> 赞同：8
> 
> 时间：2012-09-11T09:28:50.263
> 
> 标签：google-sheets, google-drive-api, sum, strikethrough

是否可以使用 Google 表格计算字段（货币）并忽略所有已应用删除线的字段？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T21:09:53.990

单元格格式不能用作电子表格公式的标准，因为没有可以获取单元格格式的公式 (AFAIK)。

如果您有另一列用单元格值更改标记值，例如“是/否”或“x”，那会容易得多。

您可以在[Apps Script](https://developers.google.com/apps-script/)中执行此操作。但是依靠格式化在 Apps Script 中进行计算[是很棘手的](https://stackoverflow.com/questions/9022984/google-apps-script-to-summarise-data-not-updating/9023954#9023954)。我建议有一个菜单触发功能，它可以获取“删除线”格式并生成一个“是/否”列，以便您可以在常规公式中使用，例如`SumIf`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-20T13:29:36.920

答案在这里：http: [//igoogledrive.blogspot.ca/2012/09/user-defined-function-to-sum-all.html](http://igoogledrive.blogspot.ca/2012/09/user-defined-function-to-sum-all.html)

# android - 清除共享首选项后仍会读取该值

> ID：12366669
> 
> 赞同：1
> 
> 时间：2012-09-11T09:28:50.813
> 
> 标签：android, sharedpreferences

我正在为登录用户存储身份验证令牌，`SharedPreferences`并在注销时清除首选项。

```
private void doSignOut(){
    SharedPreferences pref= getSharedPreferences(Constants.SHARED_PREF_DIR, Context.MODE_PRIVATE);
    Editor editor = pref.edit();
    editor.clear();
    editor.apply();
    boolean isCleared = editor.commit();
    FLog.d("Is Pref cleared = " + isCleared);
    mDbHelper.onUpgrade(mDbHelper.getWritableDatabase(), 0, 0);
    mDbHelper.close();
    Intent intent = new Intent(this, SignInActivity.class);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    startActivity(intent);
} 
```

然后在我的`SignInActivity`我检查`authToken`

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    overridePendingTransition(R.anim.fade_in, R.anim.fade_out);
    ActionBar actionBar = getSupportActionBar();
    actionBar.hide();
    checkForSignIn();

}

private void checkForSignIn() {
    SharedPreferences pref = getSharedPreferences(Constants.SHARED_PREF_DIR, Context.MODE_PRIVATE);
    String authToken = pref.getString(Constants.SHARED_PREF_AUTH, null);
    if(null == authToken){
         showAnimations();
    } else {
        FLog.d("AuthToken already present " + authToken);
        Intent intent = new Intent(getApplicationContext(), com.ribbon.ribbon.MainNavigationActivity.class);
        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(intent);
    }
} 
```

问题是在`checkForSignIn()`authToken 中`null`不是保存实际值。

我在退出之前检查了首选项 xml，它包含值，而在退出后它被清除。

这里有什么问题？我错过了一些非常明显的东西吗？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:59:27.457

最后，我让它工作了。问题是这两个活动在不同的进程中（因为我`MapView`在我的应用程序中使用了多个）。[文档](http://developer.android.com/reference/android/content/SharedPreferences.html)中提到`SharedPreferences`不支持在不同进程下使用。所以我移动`SignInActivity`了另一个在同一个主进程中，现在它运行良好。

这对我来说是一个非常明显的错误，我不得不为此挠头 4 个小时。因此，这可能会对处于类似情况的人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:33:08.080

```
 Editor editor = pref.edit();
    editor.remove(Constants.SHARED_PREF_AUTH);
editor.commit(); 
```

会做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:33:13.080

尝试自己设置字符串为 null：

```
editor.putString(Constants.SHARED_PREF_AUTH, null); 
```

# c - Turbo C中的SHA256算法无法编译

> ID：12366671
> 
> 赞同：0
> 
> 时间：2012-09-11T09:28:59.777
> 
> 标签：c, algorithm, sha256, turbo-c

我正在尝试在 c 中运行网站上给出的 SHA256 算法

[Koders 代码搜索][2]

为此，我在 Windows 机器上使用 Turbo C Compilar，它安装在目录路径设置为

```
1 C:\Program Files\TC\    
2 C:\Program Files\TC\INCLUDE
3 C:\Program Files\TC\lib 
```

我将所有头文件保存在 3

```
C:\Program Files\TC\INCLUDE 
```

运行此`SHA256.c`文件所需的文件夹。每当我尝试编译代码时，setupd 都会给出错误提示

```
Illegle file name SHA256.exe and 3 SHA256.obj. 
```

我无法找出我收到此错误的根本原因，我在做什么错误。

![我面临的错误图像](../Images/e364841515558e17119195e8dd484bb9.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:25:48.753

Turbo C 是一个旧的 DOS 应用程序。因此，它不适用于长文件和目录名称。Long as in，名称中超过 8 个字符，扩展名中超过 3 个字符。因此，12345678.txt 可以，但 123456789.txt 或 12345678.html 不行。

考虑到上述 8.3 的限制，您确实希望将`TC`目录移出或命名 Turbo C（以及使用它编译的程序）将访问的所有文件和目录。`C:\Program Files``C:\``C:\Project`

哦，在 8.3 名称中应该没有时髦的字符，没有空格，非英文字母等。只使用英文字母，数字和下划线（很像 C 本身）。

请记住更新`PATH`Turbo C IDE 中的环境变量和任何路径设置以反映新位置。

此外，将项目文件放入目录中是一种不好的做法，编译器在其中存储其头文件，以及与此相关的任何文件。

# c# - 在非模态中从 WinForm 执行 exe

> ID：12366672
> 
> 赞同：0
> 
> 时间：2012-09-11T09:29:07.600
> 
> 标签：c#, winforms

我希望从 winforms 按钮执行一个 exe 程序。我正在使用以下有效的代码。问题是 winform 进入阻塞状态，在 exe 程序关闭之前我无法与之交互。我想与 winform 和执行的程序进行交互。

如何使执行的程序非模态？

```
 public static void ExecuteCommand(string workingDirectory, 
                                           string cvsExePath, string arguments)
    {
        ProcessStartInfo exeProcess = new ProcessStartInfo(cvsExePath
                                       , " " + arguments.Trim()); 
        exeProcess.WorkingDirectory = workingDirectory;
        exeProcess.UseShellExecute = false;
        exeProcess.RedirectStandardOutput = false;
        exeProcess.RedirectStandardError = true;
        exeProcess.CreateNoWindow = false;
        Process proc = Process.Start(exeProcess);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:37:17.163

你应该创建一个线程并且线程执行这个exe

这是创建线程的方法： [如何：创建和终止线程（C# 编程指南）](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.80%29.aspx)

# sharepoint-2010 - Sharepoint 表单可以作为文件访问吗？

> ID：12366674
> 
> 赞同：0
> 
> 时间：2012-09-11T09:29:11.320
> 
> 标签：sharepoint-2010

我正在使用 Sharepoint 2010 中的列表。我已经处理了一些表单（“DispForm.aspx”等），想知道这些表单是否可以作为服务器上的文件使用？

如果我在 Visual Studio 中使用 aspx 文件，我可以在记事本中打开它……但我在 Sharepoint 服务器上找不到我的 aspx 文件。他们不能以这种方式访问​​吗？

# powershell - 使用 Powershell 复制 Active Directory 用户帐户

> ID：12366676
> 
> 赞同：1
> 
> 时间：2012-09-11T09:29:26.110
> 
> 标签：powershell, active-directory

我正在构建一个脚本来创建基于 CSV 的 AD 用户帐户（到目前为止没有什么特别的；o）。我想添加的一个特定参数是“从 xxx 复制”，其中新帐户将是现有帐户的副本（就像 AD 控制台中的“复制帐户”选项一样。

这可以实现吗？如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T13:17:25.927

这似乎很简单。在 CSV 中创建一个名为“CopyFromAccount”之类的列。

然后，在`Import-CSV | Foreach`循环期间抛出一个 if / else 语句。

```
If ($_.CopyFromAccount -ne $null) {
     ... insert code to copy AD account here ...
}
Else {
     ... insert code to use other parameters on this line to create the account ...
} 
```

Internet 上有几个可用示例用于在 PowerShell 中复制用户。这是使用 Quest AD cmdlet 的示例：http: [//dmitrysotnikov.wordpress.com/2008/01/10/copy-ad-accounts-with-powershell/](http://dmitrysotnikov.wordpress.com/2008/01/10/copy-ad-accounts-with-powershell/)

要使用 Microsoft 的 New-ADUser cmdlet 而不是 Quest，请查看实例参数。更多信息可在 Get-Help 或以下 URL 中获得： [http ://technet.microsoft.com/en-us/library/ee617253.aspx](http://technet.microsoft.com/en-us/library/ee617253.aspx)

它“指定用户对象的一个​​实例以用作新用户对象的模板。”

并像这样使用：

```
$userInstance = Get-ADUser -Identity "saraDavis"

New-ADUser -SAMAccountName "ellenAdams" -Instance $userInstance -DisplayName "EllenAdams" 
```

# javascript - jQuery模板中的if语句

> ID：12366685
> 
> 赞同：5
> 
> 时间：2012-09-11T09:29:53.707
> 
> 标签：javascript, jquery, google-chrome, jquery-templates

如果未定义变量大小，则以下代码在 Chrome 中**返回错误**“ *Uncaught ReferenceError: size is not defined ”：*

```
<script type="text/x-jquery-tmpl">    
    {{if name && size}}
        <p>${name}</p>
        <p>${size}</p>
    {{/if}}
</script> 
```

虽然这段代码**工作正常**：

```
<script type="text/x-jquery-tmpl">  
    {{if name}}
        {{if size}}
            <p>${name}</p>
            <p>${size}</p>
        {{/if}}
    {{/if}}
</script> 
```

我可以在**不使用 double if 语句**的情况下以某种方式使其在 Chrome 中工作吗？为什么它会返回错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T09:31:11.850

尝试这个：

```
<script type="text/x-jquery-tmpl">    
    {{if name && size != null && size}}
        <p>${name}</p>
        <p>${size}</p>
    {{/if}}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T10:33:19.957

尝试这个

```
<script type="text/x-jquery-tmpl">    
    {{if (name != null && size != null)}}
        <p>${name}</p>
        <p>${size}</p>
    {{/if}}
</script> 
```

注意 if 语句后面的空格。

# azure - Azure 开发结构日志记录代理在启动时崩溃

> ID：12366690
> 
> 赞同：2
> 
> 时间：2012-09-11T09:30:09.427
> 
> 标签：azure, windows-8, visual-studio-2012

当我在 Azure 项目的 Visual Studio 中单击调试时，每次都会收到相同的以下错误： ![Windows Azure Development Fabric Logging Agent 已停止工作](../Images/d5f5520b44afc2773832167a29ebb5e9.png)

在后台，其他部分确实运行并且模拟器运行，但没有任何日志记录功能起作用。我正在运行一个非常干净的 Windows 8 安装（从 DreamSpark 下载）并安装了一个干净的 Visual Studio 2012 Ultimate RC。我怎样才能解决任何问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T23:18:59.967

我有同样的问题，发现这似乎工作

1.  如果我重新启动然后从 azure 命令提示符启动 azure 模拟器。工作正常。

2.  如果我然后关闭并退出任务栏图标并从命令提示符重新启动，我会再次收到错误消息。

3.  检查正在运行的进程，dfmonitor.exe 似乎没有终止并继续运行。

4.  如果我终止 dfmonitor.exe，然后从命令提示符重新启动模拟器，它会正常启动而没有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:11:05.330

它突然开始工作，没有做任何改变。

# ios - 在应用程序全局变量中访问标签栏视图控制器

> ID：12366693
> 
> 赞同：-2
> 
> 时间：2012-09-11T09:30:16.023
> 
> 标签：ios, uitabbarcontroller, uistoryboard

如何从应用程序全局访问标签栏视图控制器？标签栏视图控制器在故事板中设置。我不想创建一个新的，但要获得现有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:35:49.950

我猜它`UITabBarViewController`被设置为应用程序的窗口`rootviewController`。如果是这种情况，您可以像这样得到它：

```
AppDelegate *myAppDelegate = (AppDelegate *)[ [UIApplication sharedApplication] delegate];
UITabBarViewController *myTabBarViewController = (UITabBarViewController *) myAppDelegate.window.rootViewController; 
```

，`AppDelegate`您的 App Delegate 类的名称在哪里。

希望这可以帮助。

问候，

乔治

# microsoft-metro - Metro 应用程序中的并发操作限制

> ID：12366699
> 
> 赞同：0
> 
> 时间：2012-09-11T09:30:48.247
> 
> 标签：microsoft-metro

在我的地铁应用程序中，我正在使用创建一些并行后台下载

```
BackgroundDownloader^ downloader = ref new BackgroundDownloader(); 
```

很多时候，我在这一点上得到一个例外，它说：

> WWAHost.exe 中 0x75424B32 处的第一次机会异常：Microsoft C++ 异常：Platform::COMException ^ 位于内存位置 0x03C5E470。HRESULT:0x8000000E 在意外的时间调用了一个方法。
> 
> WinRT 信息：已超出最大并发操作数的配额。在开始新的操作之前等待操作完成。
> 
> 如果有这个异常的处理程序，程序可以安全地继续。

我对这个限制一无所知，在 msdn 上也没有任何关于它的文档。以前有人遇到过这种情况吗？欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T15:49:40.080

这个线程有点晚了，但我们使用 BackgroundDownloader 一次下载 1,000 个文件，实际上一次下载所有文件而不是小批量下载它们要快得多。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-04T07:06:29.990

请重置已检查企业身份验证的清单，然后构建应用程序并发布...

# java - 关于 Http(Apache) 上的编码字符串

> ID：12366706
> 
> 赞同：0
> 
> 时间：2012-09-11T09:31:23.657
> 
> 标签：java, http, encoding

使用 HttpServiceClient (Apache) 发送包含特殊字符的字符串时，我有一个关于 UTF-8 编码的问题

我在下面有一小段代码，该方法接受字符串并通过 Http 发送它（在代码中并不完全完整）。

尽管解码后的字符串似乎可以正常工作，但我想知道 method.addparameter 或 httpClient.execute(method) 是否再次对字符串进行编码。我们的问题是，在客户端，字符串似乎是双重编码的！

例如。strReq = äöü

```
import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.EncoderException;
import org.apache.commons.codec.net.URLCodec;
import org.apache.commons.httpclient.methods.PostMethod;

public class Demo {
    public static void Test(String strReq) throws CancellationException, IOException, DecoderException {

        PostMethod method = null;

            method = new PostMethod("www.example.com");

            // Encode the XML document.
            URLCodec codec = new URLCodec();
            String requestEncoded = new String(strReq);
            try {
                requestEncoded = codec.encode(strReq);

            } catch (EncoderException e) {

            }

            System.out.println("encoded req = "+requestEncoded);

            method.addParameter(Constants.Hdr, requestEncoded);

            String  str2 = codec.decode(requestEncoded);

            System.out.println("str2 ="+str2);
        } 
```

# jquery - jQuery没有将div过滤为nth-childs？

> ID：12366716
> 
> 赞同：0
> 
> 时间：2012-09-11T09:32:03.330
> 
> 标签：jquery

```
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"><script>

<script>
$(document).ready(function() 
{
    $('.sss').filter(':nth-child(n+2)').hide();
    $('.sss').on('mouseenter', '.question', function() 
    {   
        $(this).next().slideDown(200).siblings('.answer').slideUp(200);
    });
});
</script>
</head>
<div class="sss">
    <div class="question">Question</div>
    <div class="answer">Answer</div>

    <div class="question">Question</div>
    <div class="answer">Answer</div>

    <div class="question">Question</div>
    <div class="answer">Answer</div>

    <div class="question">Question</div>
    <div class="answer">Answer</div>
</div> 
```

Divs 没有父子关系还是我在这里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:32:59.110

试试这个：

```
$('.sss').children().filter(':nth-child(n+2)').hide(); 
```

如果您需要所有`question`div，请尝试：

```
$('.sss').children(':nth-child(2n)').hide(); 
```

***或者***

```
$('.sss .question').hide(); 
```

对于所有人`answer`：

```
$('.sss').children(':nth-child(2n+1)').hide(); 
```

***或者***

```
$('.sss .answer').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:41:10.610

这是不使用过滤器的替代方法：

```
$('.sss').children(':nth-child(n+2)').hide(); 
```

# c# - ASP.net MVC3 如何编辑 sql 数据库

> ID：12366719
> 
> 赞同：2
> 
> 时间：2012-09-11T09:32:18.423
> 
> 标签：c#, sql, asp.net-mvc-3, linq

```
MovieStoreEntities MovieDb = new MovieStoreEntities();
public ActionResult Edit(int id)
{

    //var EditMovie1 = MovieDb
    AddMovieModel EditMovie = (from M in MovieDb.Movies
                               from C in MovieDb.Categories
                               where M.CategoryId == C.Id
                               where M.Id == id
                               select new AddMovieModel { Name = M.Name, Director = M.Director, Country = M.Country, categorie = C.CategoryName, Category = M.CategoryId }).FirstOrDefault();

    //AddMovieModel EditMovie1 = MovieDb.Movies.Where(m => m.Id == id).Select(m => new AddMovieModel {m.Id   }).First();
    List<CategoryModel> categories = MovieDb.Categories
       .Select(category => new CategoryModel { Category = category.CategoryName, id = category.Id })
       .ToList();

    ViewBag.Category = new SelectList(categories, "Id", "Category");

    return View(EditMovie);
}

//
// POST: /Default1/Edit/5

[HttpPost]
public ActionResult Edit(AddMovieModel Model2)
{
    List<CategoryModel> categories = MovieDb.Categories
        .Select(category => new CategoryModel { Category = category.CategoryName, id = category.Id })
        .ToList();
    ViewBag.Category = new SelectList(categories, "Id", "Category");

    if (ModelState.IsValid)
    {
        //MovieStoreEntities model = new MovieStoreEntities();

        MovieDb.SaveChanges();

        return View("Thanks2", Model2);
    }
    else
        return View();

} 
```

这是我编写的用于在 sql server 中编辑电影详细信息和更新数据库的代码。这没有任何编译错误，但它没有更新 sql server 数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:11:51.483

假设您正在更新一个类别，您需要执行类似的操作

```
 List<CategoryModel> categories = MovieDb.Categories
    .Select(category => new CategoryModel { Category = category.CategoryName, id = category.Id })
    .ToList();
ViewBag.Category = new SelectList(categories, "Id", "Category")
Category category = new Category()
category = categories.First(p=>p.CategoryId == Id);
category.Name = "New Name";
MovieDb.Categories.SaveChanges(category);
MovieDb.SaveChanges(); 
```

您将需要获取要编辑的项目...在这种情况下，是从类别列表中过滤的类别。然后，您可以在该实体上调用 savechanges 方法，即 MovieDb.Categories.SaveChanges() 并传递您要更新的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:36:00.620

您需要使用该`Model2`对象创建一个新实体，将其添加到 ObjectContext 并保存更改。您还没有编写任何应该将任何内容保存到数据库的代码。

# php - Wordpress HTML 编辑器中缺少 PHP 代码

> ID：12366721
> 
> 赞同：1
> 
> 时间：2012-09-11T09:32:18.657
> 
> 标签：php, wordpress

安装 PHP 插件（名称：PHP 执行）后，我在其中一个页面中放置了一些 PHP 代码，它在 HTML 编辑器视图中运行良好，但是当我将视图更改为可视化编辑器时，HTML 编辑器和也来自真实的内容。有谁能够帮我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T11:00:22.583

尝试使用[http://wordpress.org/extend/plugins/exec-php/](http://wordpress.org/extend/plugins/exec-php/)

此外，还有一个详细的插件可以帮助您在这里找到... [http://www.hongkiat.com/blog/execute-php-in-wordpress-post-page-and-widget-sidebar/](http://www.hongkiat.com/blog/execute-php-in-wordpress-post-page-and-widget-sidebar/)

# android - 设备ID识别

> ID：12366725
> 
> 赞同：1
> 
> 时间：2012-09-11T09:32:37.567
> 
> 标签：android, iphone, udid

我有一个网络和移动应用程序，它为企业及其各自的客户提供等候名单管理。目前在移动应用程序中，客户填写个人资料表格并将其本地保存在他们的设备（iPhone 和 Android）上。然后他们可以单独登记到选定的企业。当他们单击“签入”按钮时，他们的设备 ID 会附加配置文件信息并发送到 Web 应用程序。反过来，企业的员工可以将它们保存在他们的数据库中并向他们发送推送通知。

我想要做的是允许在员工手动添加客户姓名和电话号码但没有设备 ID 时发送这些推送通知。这样，移动应用程序用户就不必每次都通过提交他们的个人资料信息和设备 ID 来发起联系。

欢迎任何和所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:52:44.860

在 iPhone 中，您可以使用以下代码获取设备 UDID；

```
-(NSString*)getDeviceUDID{
    if ([Mode isEqualToString:@"Device"]) {
        NSString *domain = @"com.CompanyName.AppName";// You can specify any Domain here
        NSString *key = @"CityName";// You can specify any key here
        NSString *UDID = [SecureUDID UDIDForDomain:domain usingKey:key];
        return UDID;
    }else{
        NSString* UDID=[[[UIDevice currentDevice] uniqueIdentifier] stringByReplacingOccurrencesOfString:@"-" withString:@""];
        UDID=[UDID substringToIndex:32];
        return UDID;
    }
} 
```

希望这对您有所帮助。

# php - 雅虎股票报价中“百分比变化”的标签是什么

> ID：12366733
> 
> 赞同：2
> 
> 时间：2012-09-11T09:33:12.073
> 
> 标签：php, yahoo-finance

我正在编写用于使用 YQL 获取雅虎股票信息的 api。我已经关注[http://www.gummy-stuff.org/Yahoo-data.htm](http://www.gummy-stuff.org/Yahoo-data.htm)并获取股票的所有符号。

在获取结果时，我得到了一个额外的符号“[PercentChange] => 0.00%”，我已经搜索了它的标签，但我找不到“PercentChange”的正确标签。

[http://www.gummy-stuff.org/Yahoo-data.htm](http://www.gummy-stuff.org/Yahoo-data.htm)和其他网站有完整的标签列表，但没有提到“PercentChange”。

谁能告诉我雅虎股票中“PercentChange”的标签符号是什么

网址：- [http://query.yahooapis.com/v1/public/yql?q=select%20](http://query.yahooapis.com/v1/public/yql?q=select%20) *%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28"YHOO","AAPL" "GOOG","MSFT"%29&env=http://datatables.org/alltables.env&format=json

```
*Output print :-
  stdClass Object
(
    [symbol] => YHOO
    [Ask] => 15.34
    [AverageDailyVolume] => 15241100
    [Bid] => 15.00
    [AskRealtime] => 15.34
    [BidRealtime] => 15.00
    [BookValue] => 10.445
    [Change_PercentChange] => 0.00 - 0.00%
    [Change] => 0.00
    [Commission] => 
    [ChangeRealtime] => 0.00
    [AfterHoursChangeRealtime] => N/A - N/A
    [DividendShare] => 0.00
    [LastTradeDate] => 9/10/2012
    [TradeDate] => 
    [EarningsShare] => 0.887
    [ErrorIndicationreturnedforsymbolchangedinvalid] => 
    [EPSEstimateCurrentYear] => 1.03
    [EPSEstimateNextYear] => 1.18
    [EPSEstimateNextQuarter] => 0.29
    [DaysLow] => 
    [DaysHigh] => 
    [YearLow] => 13.11
    [YearHigh] => 16.79
    [HoldingsGainPercent] => - - -
    [AnnualizedGain] => 
    [HoldingsGain] => 
    [HoldingsGainPercentRealtime] => N/A - N/A
    [HoldingsGainRealtime] => 
    [MoreInfo] => cn
    [OrderBookRealtime] => 
    [MarketCapitalization] => 17.900B
    [MarketCapRealtime] => 
    [EBITDA] => 1.306B
    [ChangeFromYearLow] => +2.00
    [PercentChangeFromYearLow] => +15.26%
    [LastTradeRealtimeWithTime] => N/A - 15.11
    [ChangePercentRealtime] => N/A - 0.00%
    [ChangeFromYearHigh] => -1.68
    [PercebtChangeFromYearHigh] => -10.01%
    [LastTradeWithTime] => Sep 10 - 15.11
    [LastTradePriceOnly] => 15.11
    [HighLimit] => 
    [LowLimit] => 
    [DaysRange] => N/A - N/A
    [DaysRangeRealtime] => N/A - N/A
    [FiftydayMovingAverage] => 15.3154
    [TwoHundreddayMovingAverage] => 15.3131
    [ChangeFromTwoHundreddayMovingAverage] => -0.2031
    [PercentChangeFromTwoHundreddayMovingAverage] => -1.33%
    [ChangeFromFiftydayMovingAverage] => -0.2054
    [PercentChangeFromFiftydayMovingAverage] => -1.34%
    [Name] => Yahoo! Inc.
    [Notes] => 
    [Open] => 
    [PreviousClose] => 15.11
    [PricePaid] => 
    [ChangeinPercent] => 0.00%
    [PriceSales] => 3.59
    [PriceBook] => 1.45
    [ExDividendDate] => 
    [PERatio] => 17.03
    [DividendPayDate] => 
    [PERatioRealtime] => 
    [PEGRatio] => 1.20
    [PriceEPSEstimateCurrentYear] => 14.67
    [PriceEPSEstimateNextYear] => 12.81
    [Symbol] => YHOO
    [SharesOwned] => 
    [ShortRatio] => 1.80
    [LastTradeTime] => 4:00pm
    [TickerTrend] =>  ====== 
    [OneyrTargetPrice] => 17.98
    [Volume] => 0
    [HoldingsValue] => 
    [HoldingsValueRealtime] => 
    [YearRange] => 13.11 - 16.79
    [DaysValueChange] => - - 0.00%
    [DaysValueChangeRealtime] => N/A - N/A
    [StockExchange] => NasdaqNM
    [DividendYield] => 
    [PercentChange] => 0.00%       ========>This is an extra Tag
)* 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-15T16:00:29.033

根据雅虎财经的回应数据，为现价与收盘价（上一交易日联交所收盘前的最后价格）之差

# java - 如何在带有 Java 的 WebDriver 中使用 XPATH 单击此元素？

> ID：12366735
> 
> 赞同：3
> 
> 时间：2012-09-11T09:33:18.180
> 
> 标签：java, xpath, click, webdriver, selenium-webdriver

这是HTML：

```
<li>
<input type="checkbox" checked="" name="selectedMstrPrivGroupList[9].mstrAuthorities[0].status"/>
Add Dexter
</li> 
```

如何在 WebDriver 中单击此元素？它是一个复选框。我想使用 XPath，因为我在页面中有接近 30 多个复选框。这样我就可以创建一个通用方法并只传递 WebElement。我尝试了以下但没有奏效。

```
Driver.findElement(By.xpath("//input[contains(.,'Add Dexter')]")).click(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:57:19.610

如果“添加 Dexter”旁边的复选框是您要在页面上单击的内容，您可以使用：

```
Driver.findElement(By.xpath("//li[contains(.,'Add Dexter')]//input[@type='checkbox']")).click(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:36:46.907

这个是怎么回事：

```
 Driver.findElement(By.xpath("//input[@name='selectedMstrPrivGroupList[9].mstrAuthorities[0].status']")).click(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:54:48.447

你可以这样使用， `driver.findElement(By.xpath("//li[contains(text(),'Add Dexter')]")).click()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T11:19:12.540

您可以使用 xpath 单击元素，如下所示：

```
driver.findElement(By.xpath("//input[text()='Add Dexter']")).click(); 
```

您还可以使用 cssSelector 而不是 xpath 来单击该元素，如下所示：

```
driver.findElement(By.cssSelector("input:contains(^Add Dexter$)")).click(); 
```

注意：CssPath/CssSelector 比 xpath 快。所以在大多数情况下使用 cssSelector 比使用 xpath 更好。

# php - 在 PHP 中对多个 GET 变量进行故障排除

> ID：12366737
> 
> 赞同：-1
> 
> 时间：2012-09-11T09:33:20.533
> 
> 标签：php, get, httprequest

这可能是一个非常简单的问题，但我不知道我在这里做错了什么......

为了清楚地向您解释，我在下面设置了一个非常简单的示例：

```
<ul>
    <li><a href="test.php?link1=true">Link 1</a></li>
    <li><a href="test.php?link2=true">Link 2</a></li>
    <li><a href="test.php?link3=true">Link 3</a></li>
</ul>

<?php 
    if(isset($_GET['link1'])) {
        if(($_GET['link1']) == 'true') {
            echo 'This Is Link 1';
        }
    }

    if(isset($_GET['link2'])) {
        if(($_GET['link2']) == 'true') {
            echo 'This Is Link 2';
        }
    }

    if(isset($_GET['link3'])) {
        if(($_GET['link3']) == 'true') {
            echo 'This Is Link 3';
        }
    }
?> 
```

这是一个 test.php 页面，在这里我为 $_GET 设置了 3 个不同的参数，并相应地显示内容，现在一切正常，唯一不明白的是如何阻止这种 url 说

如果用户单击链接 1，则 url 将是：

```
http://localhost/test.php?link1=true 
```

这个 url 的输出是**This is Link 1**

现在，如果我将此网址更改为：

```
http://localhost/test.php?link3=true&link2=true&link1=true 
```

我得到的输出是**这是链接1这是链接2这是链接3**

现在这里没问题，但是如果有人输入这个并看到一个在另一个下面的表格，这很烦人，我有什么办法可以阻止这种篡改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:35:19.877

使用 elseif 而不是单独的 if 语句。这样，只会执行一个（第一个条件成立）。

```
<?php 
if(isset($_GET['link1'])) {
    if(($_GET['link1']) == 'true') {
        echo 'This Is Link 1';
    }
} elseif(isset($_GET['link2'])) {
    if(($_GET['link2']) == 'true') {
        echo 'This Is Link 2';
    }
} elseif(isset($_GET['link3'])) {
    if(($_GET['link3']) == 'true') {
        echo 'This Is Link 3';
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:37:53.097

一种更可靠的方法可能是对每个链接使用相同的参数名称，但改变值。例如

```
<a href="test.php?link=link1">Link 1</a>
<a href="test.php?link=link2">Link 2</a>
<a href="test.php?link=link3">Link 3</a> 
```

这样，即使有人在查询字符串中指定了多个值，也只会使用其中一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:36:31.780

您正在使用连续`if`语句，因此可以满足所有情况并且可以回显所有输出。

```
if(isset($_GET['link3'])) {
    if(($_GET['link3']) == 'true') {
        echo 'This Is Link 3';
    }
}
// Nothing stops the next if working here. 
```

您可以改为查看 switch 语句并检查第一个语句 - 或使用相同的语句`?link=`并在每个链接中将不同的数据传递给它，以便只能`if`满足一个语句。

# scala - 使用 casbah gridfs 读取文件内容会引发 MalformedInputException

> ID：12366740
> 
> 赞同：0
> 
> 时间：2012-09-11T09:33:30.110
> 
> 标签：scala, gridfs, casbah

考虑以下示例代码：它将文件写入 mongodb，然后尝试重新读取它

```
import com.mongodb.casbah.Imports._
import com.mongodb.casbah.gridfs.Imports._

object TestGridFS{
    def main(args: Array[String]){
        val mongoConn = MongoConnection()
        val mongoDB = mongoConn("gridfs_test")
        val gridfs = GridFS(mongoDB) // creates a GridFS handle on ``fs``
        val xls = new java.io.FileInputStream("ok.xls")
        val savedFile=gridfs.createFile(xls)
        savedFile.filename="ok.xls"
        savedFile.save
        println("savedfile id: %s".format(savedFile._id.get))
        val file=gridfs.findOne(savedFile._id.get)
        val bytes=file.get.source.map(_.toByte).toArray
        println(bytes)
    }
} 
```

这产生

```
gridfs $ sbt run
[info] Loading global plugins from /Users/jean/.sbt/plugins
[info] Set current project to gridfs-test (in build file:/Users/jean/dev/sdev/src/perso/gridfs/)
[info] Running TestGridFS 
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
savedfile id: 504c8cce0364a7cd145d5dc1
[error] (run-main) java.nio.charset.MalformedInputException: Input length = 1
java.nio.charset.MalformedInputException: Input length = 1
    at java.nio.charset.CoderResult.throwException(CoderResult.java:260)
    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:319)
    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
    at java.io.InputStreamReader.read(InputStreamReader.java:167)
    at java.io.BufferedReader.fill(BufferedReader.java:136)
    at java.io.BufferedReader.read(BufferedReader.java:157)
    at scala.io.BufferedSource$$anonfun$iter$1$$anonfun$apply$mcI$sp$1.apply$mcI$sp(BufferedSource.scala:38)
    at scala.io.Codec.wrap(Codec.scala:64)
    at scala.io.BufferedSource$$anonfun$iter$1.apply(BufferedSource.scala:38)
    at scala.io.BufferedSource$$anonfun$iter$1.apply(BufferedSource.scala:38)
    at scala.collection.Iterator$$anon$14.next(Iterator.scala:148)
    at scala.collection.Iterator$$anon$25.hasNext(Iterator.scala:463)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at scala.io.Source.hasNext(Source.scala:238)
    at scala.collection.Iterator$$anon$19.hasNext(Iterator.scala:334)
    at scala.collection.Iterator$class.foreach(Iterator.scala:660)
    at scala.collection.Iterator$$anon$19.foreach(Iterator.scala:333)
    at scala.collection.generic.Growable$class.$plus$plus$eq(Growable.scala:48)
    at scala.collection.mutable.ArrayBuffer.$plus$plus$eq(ArrayBuffer.scala:99)
    at scala.collection.TraversableOnce$class.toBuffer(TraversableOnce.scala:250)
    at scala.collection.Iterator$$anon$19.toBuffer(Iterator.scala:333)
    at scala.collection.TraversableOnce$class.toArray(TraversableOnce.scala:237)
    at scala.collection.Iterator$$anon$19.toArray(Iterator.scala:333)
    at TestGridFS$.main(test.scala:15)
    at TestGridFS.main(test.scala)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
java.lang.RuntimeException: Nonzero exit code: 1
    at scala.sys.package$.error(package.scala:27)
[error] {file:/Users/jean/dev/sdev/src/perso/gridfs/}default-b6ab90/compile:run: Nonzero exit code: 1
[error] Total time: 1 s, completed 9 sept. 2012 14:34:22 
```

我不明白字符集问题可能是什么，我只是将文件写入数据库。在查询基础时，我确实看到了其中的文件和块，但似乎无法读取它们。

我在 mongo 2.0 和 2.2、casbah 2.4 和 3.0.0-M2 上尝试了这个，但无济于事，并且在 mac OSX 山狮上看不到我能做些什么来获取字节。

**PS**：要运行测试，可以使用以下 build.sbt

```
name := "gridfs-test"

version := "1.0"

scalaVersion := "2.9.1"

libraryDependencies += "org.mongodb" %% "casbah" % "2.4.1"

libraryDependencies += "org.mongodb" %% "casbah-gridfs" % "2.4.1"

resolvers ++= Seq("Typesafe Releases" at "http://repo.typesafe.com/typesafe/releases/",
      "sonatype release" at "https://oss.sonatype.org/content/repositories/releases",
      "OSS Snapshots" at "https://oss.sonatype.org/content/repositories/snapshots/") 
```

这是我得到的堆栈跟踪：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:08:52.867

我找到了一种从 mongodb 读取文件内容的方法。源方法依赖于 GridFSDBFile 中定义的底层[.inpustream](https://github.com/mongodb/mongo-java-driver/blob/master/src/main/com/mongodb/gridfs/GridFSDBFile.java)。

我所做的每一个使用 underlying.inpustream 的测试都因同样的错误而失败。但是，API 提出了另一种访问文件的方法：writeTo。writeTo 不使用underlying.inpustream。

这是问题中的“固定”代码：

```
import com.mongodb.casbah.Imports._
import com.mongodb.casbah.gridfs.Imports._

object TestGridFS{
    def main(args: Array[String]){
        val mongoConn = MongoConnection()
        val mongoDB = mongoConn("gridfs_test")
        val gridfs = GridFS(mongoDB) // creates a GridFS handle on ``fs``
        val xls = new java.io.File("ok.xls")
        val savedFile=gridfs.createFile(xls)
        savedFile.filename="ok.xls"     
        savedFile.save
        println("savedfile id: %s".format(savedFile._id.get))
        val file=gridfs.findOne(savedFile._id.get)
        val byteArrayOutputStream = new java.io.ByteArrayOutputStream()
        file.map(_.writeTo(byteArrayOutputStream))
        byteArrayOutputStream.toByteArray
    }
} 
```

最后一行，`byteArrayOutputStream.toByteArray`给你一个字节数组，然后你可以使用它，但是你认为合适。

# ruby - 为什么 Sequel 不写我的数据库表？

> ID：12366741
> 
> 赞同：2
> 
> 时间：2012-09-11T09:33:29.857
> 
> 标签：ruby, sequel, ramaze

**控制器/makenew.rb**

```
class MakeController < Controller

  map '/makenew'
  #require 'model/debate'

  def debate
    if request.post? #this line is potentially dangerous!
      #---> 1/3 fetch postdata
      data = request.subset(:question, :type, :category, :assertion)
      data['user_id'] = user.id #id = request.params['id']
      #---> 2/3 check permissions
      if user.points < 40
        flash[:error] = 'You don\'t have enough points to make a debate.'
        redirect_referrer
      else
        debate = Debate.new
      end
      #---> 3/3 modify database
      begin
        debate.save(data)
        flash[:success] = success
        flash[:form_data] = debate
        redirect 'debates'
      rescue => e
        Ramaze::Log.error(e)
        #flash[:form_errors]   = debate.errors
        #flash[:error] = data
        flash[:error] = e
        #flash[:error] = 'Failure whilst saving. Contact technical support!'
        redirect 'debates' #redirect_referrer
      end
     #| 
    end #closes posting conditional
  end #closes makesave 
end 
```

我得到的错误是。

> SQLite3::ConstraintException：debates.question 可能不是 NULL

我检查了postdata `data.question`，它不为空。

到底是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:17:09.657

Are you sure that your model accepts mass assignment of primary keys?

Try calling `Debate.unrestrict_primary_key`

You can check the rules in the [Sequel documentation](http://sequel.rubyforge.org/rdoc/files/doc/mass_assignment_rdoc.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-13T05:26:20.960

您需要将“数据”传递给`#update`. 因此：

```
debate.save(data) 
```

错了，你必须这样做：

```
debate.update(data)
debate.save 
```

如果您不这样做，则您的辩论对象没有分配成员，因此其问题成员为零，违反了您的数据库约束。

在此处查看#save 和#update 之间的区别：

*   更新：[http ://sequel.rubyforge.org/rdoc/classes/Sequel/Model/InstanceMethods.html#method-i-update](http://sequel.rubyforge.org/rdoc/classes/Sequel/Model/InstanceMethods.html#method-i-update)
*   保存：[http ://sequel.rubyforge.org/rdoc/classes/Sequel/Model/InstanceMethods.html#method-i-save](http://sequel.rubyforge.org/rdoc/classes/Sequel/Model/InstanceMethods.html#method-i-save)

简而言之：`#save`将当前模型实例保存到数据库中，同时`#update`将在一次操作中更改一堆实例属性。

但是您必须记住，更改模型实例的属性**不会**将它们写入数据库。你总是必须`#save`明确地调用。

# razor - 剃刀计数项目

> ID：12366744
> 
> 赞同：3
> 
> 时间：2012-09-11T09:33:50.643
> 
> 标签：razor, count, umbraco, if-statement

我怎样才能在剃须刀中做到这一点：

*   当有一个项目时，我只希望显示该项目。（fotoGallerij 中的项目）
*   当有更多项目时，我想要所有项目（如下面的代码，工作）

如果（我认为）剃刀（c＃/umbraco）中的结构，我怎么能做到这一点？

```
@inherits umbraco.MacroEngines.DynamicNodeContext

<ul class="image-gallery">
@foreach (var item in @Model.fotoGallerij)
{
<li>
<a class="gallery grouped" href="/ImageGen.ashx?height=500&amp;constrain=true&amp;crop=resize&amp;image=@item.Image.umbracoFile" title="">

<img src="/ImageGen.ashx?width=71&amp;height=73&amp;crop=resize&amp;image=@item.Image.umbracoFile" alt=""/></a>
 </li>
 }
</ul>
 <script>
    $("a.gallery").colorbox({rel:'grouped'});
</script> 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T14:52:06.383

Razor 实际上是 C#，所以你可以用 C# 做的任何事情，你都可以用 Razor 做。像这样的东西应该工作：

```
@inherits umbraco.MacroEngines.DynamicNodeContext
@if (Model.fotoGallerij.Count() == 1)
{
    // Display only the one here...
}
else if (Model.fotoGallerij.Count() > 1)
{
    // Loop through the list of items here...
} 
```

# parsing - NLP - 你将如何解析高度嘈杂的句子（使用 Earley 解析器）

> ID：12366748
> 
> 赞同：1
> 
> 时间：2012-09-11T09:34:07.103
> 
> 标签：parsing, nlp, spell-checking, fuzzy-search, earley-parser

我需要解析一个句子。现在我有一个实现的 Earley 解析器和它的语法。当一个句子没有拼写错误时，一切都很好。但问题是我必须处理的很多句子都非常嘈杂。我想知道是否有一种将解析与纠错相结合的算法？可能的错误是：

*   拼写错误 'cheker' 而不是 'checker'
*   像“拼写检查器”而不是“拼写检查器”这样的拼写错误
*   像“Ear par”这样的收缩而不是“Earley parser”

如果你知道一篇可以回答我的问题的文章，我会申请一个链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T00:03:10.830

我假设您正在使用在 Earley 解析器之前应用的**标记器（或词法分析器）**阶段，即将输入字符串拆分为标记并在字典中查找每个标记以确定其词性 (POS) 标记的算法(s):

```
John     --> PN
loves    --> V
a        --> DT
woman    --> NN
named    --> JJ,VPP
Mary     --> PN 
```

应该可以在该阶段构建某种**近似字符串查找**（又名模糊字符串查找），因此当它出现拼写错误的标记时，例如“lobes”而不是“loves”，它不仅会识别标签通过精确的字符串匹配找到（'lobes' 作为 'lobe' 的名词复数），但也有形状相似的标记（'loves' 作为动词 'love' 的第三人称单数）。

这意味着您通常会为每个令牌获得更多的候选标签，因此在解析过程中可能会获得更多的解析结果。这是否会产生所需的结果取决于语法的综合程度，以及解析器在呈现许多可能的解析树时识别正确分析的能力。概率解析器可能对此更好，因为它为每个候选解析树分配一个概率（或置信度分数），可用于选择最可能（或最佳）的分析。

如果这是您想尝试的解决方案，有几种可能的实施策略。首先，如果标记化和标记是作为简单的字典查找执行的（即以词法分析器的方式），您可以简单地为字典使用能够实现近似字符串匹配的数据结构。近似字符串比较的一般方法在[近似字符串匹配算法](https://stackoverflow.com/questions/49263/approximate-string-matching-algorithms)中进行了描述，而在较大字典中查找近似字符串的方法在[快速比较字符串与 Java 中的集合中进行了](https://stackoverflow.com/questions/9139423/quickly-compare-a-string-against-a-collection-in-java)讨论。

但是，如果您使用实际的标注器，而不是词法分析器，即除了字典查找之外还执行*POS 消歧的东西，您将不得不在该标注器中构建近似的字典查找。*必须有一个字典查找功能，用于在应用消歧之前生成候选标签，在标注器的某处。该字典查找必须替换为启用近似字符串查找的字典。

# c# - 测试我的简单 WPF 应用程序

> ID：12366751
> 
> 赞同：4
> 
> 时间：2012-09-11T09:34:22.797
> 
> 标签：c#, visual-studio-2010, unit-testing, testing, automated-tests

我希望自学如何在即将到来的面试中使用 VS2010 和 C# 进行有效测试。*任何有关学习这方面的资源都将不胜感激（尤其是快速而肮脏的“这是您创建测试项目/运行它/做出断言的方式”文档-我只需要动手！）。:)*

我想学习的是我写的一个小项目。我有一些带有标准/关键字的组合框，它们查询表中的某些列以查看是否返回了正确的值。因此，例如，我的`"Colour"`WPF 应用程序中有一个列和一个相应的组合框，用于`"Colour"`. 选择时`"Red"`，我想返回所有`"Red"`列及其行中的值等。

我已经随机化了我的数据库数据，现在想创建一些断言（例如，对于“红色”组合框值，仅返回“红色”行）。

我可以测试这种性质的应用程序的最有效和最好的方法是什么？

从理论上讲，我知道这是关于创建一些测试数据、`"Red"`输入搜索功能并断言只`"Red"`返回列。但是，实际上，我如何使用 VS2010 和 C# 来做到这一点？令人惊讶的是，这方面的资源很难获得。

我是否打开项目，添加一个新的测试项目，创建一个独立的项目，我从那里去哪里......？一个简单的初学者介绍添加一个测试项目和一些关于做出断言的最佳方法的指南真的会帮助我。

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:37:32.417

请查看[MVVM-Pattern](http://en.wikipedia.org/wiki/MVVM)，它允许您创建模块化和可测试的 WPF 应用程序。在引用的 Wikipedia 文章中，您将找到大量资源供进一步阅读。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:37:28.193

如果您想要 WPF 的 UI 测试框架，请参阅[如何测试 WPF 用户界面？](https://stackoverflow.com/questions/58340/how-to-test-a-wpf-user-interface).

如果您想测试您的底层逻辑，请创建一个代表您的 UI 的类结构（通常称为视图模型），将其移动到单独的类库程序集 (DLL) 并使用 MS Test 或 NUnit 等测试库对其进行测试。从应用程序引用视图模型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-11T09:37:58.427

要使用单元测试测试 WPF 应用程序，您需要实现[MVVM Pattern](http://msdn.microsoft.com/en-us/library/gg405484%28v=pandp.40%29.aspx)。然后，右键单击要测试的方法，然后选择**创建单元测试**

# netty - 通过 SCTP 开发应用程序

> ID：12366754
> 
> 赞同：0
> 
> 时间：2012-09-11T09:34:26.597
> 
> 标签：netty, sctp

我们正在开始开发一个将 SCTP 协议用作客户端和服务器的应用程序。

根据文档，SCTP 似乎包含在 Netty 4.0 中。

我们现在可以使用 Netty 4.0 进行 SCTP 的开发吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:26:43.200

是的，您可以，但请注意它仍处于 alpha 状态，因此您可能会在它成为最终版本之前看到一些 api-breakage。也就是说，我认为可以公平地说 API 是相当稳定的 atm。所以不要指望有很多破损。

# google-app-engine - PhoneGap 后端数据库 - Google App Engine DataStore

> ID：12366758
> 
> 赞同：1
> 
> 时间：2012-09-11T09:34:44.157
> 
> 标签：google-app-engine, cordova, google-cloud-datastore, mobile-application

我开发了一个 PhoneGap 应用程序（HTML5、CSS、JS）。该应用程序需要使用表单创建产品项目，然后将该信息存储在 gae DataStore 中。该应用程序还需要显示存储在 DataStore 中的所有产品。

我是 Web 开发和 Google App Engine 的新手。能否请您指出一个使用 PhoneGap 和 Google App Engine DataStore 的示例（示例）代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T10:01:39.497

如果使用 java，您可以使用 REST 框架（如[Restlet](http://www.restlet.org/)、[Jersey](http://jersey.java.net/)或[Cloud Endpoint ）来实现后端](https://developers.google.com/appengine/docs/java/endpoints/)

[如果使用 python，您可以使用Flask-Restful](http://flask-restful.readthedocs.org/en/latest/)或[Cloud Endpoint](https://developers.google.com/appengine/docs/python/endpoints/)等 REST 框架来实现后端。

或者，您可以考虑使用[gwt-phonegap 之](http://code.google.com/p/gwt-phonegap/wiki/GettingStarted)类的东西，它提供 phonegap 与[GWT](https://developers.google.com/web-toolkit/)的直接集成。

您可以使用您[喜欢的 javascript 库](http://api.jquery.com/category/ajax/)或`XMLHttpRequest`.

# c# - 如何绘制驱动器容量的图形

> ID：12366759
> 
> 赞同：-2
> 
> 时间：2012-09-11T09:34:46.417
> 
> 标签：c#, graphics

你好我写的代码给出了驱动器列表、容量和可用大小。我想根据每个驱动器的大小绘制饼图，如下所示：

![驱动空间饼图](../Images/df6f13e78451354eb0f27442e0a34703.png)

这是我到目前为止的代码 - 大小值在 freeSize 和 fullSize 变量中

```
string[] drivers = new string[5];
int freeSize;
int fullSize;

private void Form1_Load(object sender, EventArgs e)
{

    foreach (var item in System.IO.Directory.GetLogicalDrives())
    {
        int i = 0;
        drivers[i] = item;

        comboBox1.Items.Add(drivers[i]);
        ++i;
    }
}

private void btnSorgula_Click(object sender, EventArgs e)
{

    string a = comboBox1.Items[comboBox1.SelectedIndex].ToString();
    System.IO.DriveInfo di = new System.IO.DriveInfo(a);
    if (!di.IsReady)
    {
        MessageBox.Show("not ready");
        return;
    }
    decimal freeByt= Convert.ToDecimal(di.TotalFreeSpace);
    decimal freeGb = freeByt / (1024 * 1024*1024);
    label1.Text = freeGb.ToString();
    freeSize = Convert.ToInt32(freeGb);

    decimal totalByt = Convert.ToDecimal(di.TotalSize);
    decimal tottalGb = totalByt / (1024 * 1024 * 1024);
    label2.Text = Convert.ToString(tottalGb);
    fullSize = Convert.ToInt32(tottalGb);
}

private void Form1_Paint(object sender, PaintEventArgs e)
{
    Graphics g = e.Graphics;
    Rectangle rect = new Rectangle(10, 10, 100, 100);
    g.FillPie(Brushes.Black, rect, fullSize, fullSize / freeSize);
    g.FillPie(Brushes.RoyalBlue, rect, 140, 100);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T11:23:38.137

这个怎么样：

```
private Image GetCake(int width, int height, double percentage)
{
    var bitmap = new Bitmap(width, height);

    using (var g = Graphics.FromImage(bitmap))
    {
        g.PixelOffsetMode = System.Drawing.Drawing2D.PixelOffsetMode.HighQuality;
        g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;

        g.FillEllipse(Brushes.DarkMagenta, 1, 9, width - 2, height - 10);
        g.DrawEllipse(Pens.Black, 1, 9, width - 2, height - 10);
        g.FillPie(Brushes.DarkBlue, 1, 9, width - 2, height - 10, 0, (int)(360 * percentage));
        g.DrawPie(Pens.Black, 1, 9, width - 2, height - 10, 0, (int)(360 * percentage));

        g.FillEllipse(Brushes.Magenta, 1, 1, width - 2, height - 10);
        g.DrawEllipse(Pens.Black, 1, 1, width - 2, height - 10);
        g.FillPie(Brushes.Blue, 1, 1, width - 2, height - 10, 0, (int)(360 * percentage));
        g.DrawPie(Pens.Black, 1, 1, width - 2, height - 10, 0, (int)(360 * percentage));
        g.DrawArc(Pens.Blue, 1, 1, width - 2, height - 10, 0, (int)(360 * percentage));
    }

    return bitmap;
} 
```

你可以这样称呼它：

```
myPictureBox.Image = GetCake(myPictureBox.Width, myPictureBox.Height, 0.4); 
```

意思是`0.4`40%。所以填写 0 到 1 之间的任何值来设置所需的百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:23:43.660

您的代码的问题是`Form1_Paint`在绘制表单时调用它，例如在第一次显示时启动之后。在那个时间点，该按钮尚未被点击，`freeSize`因此为 0。

要解决此问题，请更改代码，使其仅在至少单击一次按钮时才绘制。

# google-analytics - 通过网站跟踪用户的最佳方式

> ID：12366761
> 
> 赞同：0
> 
> 时间：2012-09-11T09:35:05.030
> 
> 标签：google-analytics, analytics

我正在尝试通过网站跟踪我的用户。我已经安装了谷歌分析，但它对我来说有点太匿名了。我想跟踪每个用户/每次访问的用户。

有没有这样的服务（我似乎找不到）？我最好写一些定制的代码来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:43:25.680

试试[http://www.kissmetrics.com/](http://www.kissmetrics.com/)

# spring - Spring security 仅用于授权。外部认证

> ID：12366763
> 
> 赞同：6
> 
> 时间：2012-09-11T09:35:13.053
> 
> 标签：spring, security, authentication, authorization, external

正如标题所说，我正在开发一个从外部应用程序接收用户身份验证信息的 Web 应用程序。我的应用程序的弹簧控制器获取用户信息并将其存储在会话中。我想在 Spring Security 中对这个用户进行身份验证，然后使用他的角色来授予/拒绝对 url 的访问，例如

```
<intercept-url pattern="/myprotectedpage*" access="hasRole('rightrole')" /> 
```

我阅读了一些关于 PRE_AUTH_FILTER 和 UserDetailsS​​ervice 的教程，但我不明白这一点。Spring Security 的应用生命周期是什么？涉及哪些类？我需要一些完整的工作样本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:58:05.477

有很多相同的东西，只需要正确谷歌即可。

无论如何，迄今为止我发现的最好的（几乎所有的春季短靴）是[克拉姆斯](http://krams915.blogspot.com)，这是基本春季安全的一个。

[http://krams915.blogspot.com/2010/12/spring-security-mvc-integration_18.html](http://krams915.blogspot.com/2010/12/spring-security-mvc-integration_18.html)

为了实现 UserDetailService 这里是链接

[http://krams915.blogspot.in/2012/01/spring-security-31-implement_5023.html](http://krams915.blogspot.in/2012/01/spring-security-31-implement_5023.html)

其他一些是：

1.  [春天的例子](http://www.springbyexample.org/examples/simple-spring-security-webapp.html)
2.  [MK 杨](http://www.mkyong.com/tutorials/spring-security-tutorials/)
3.  [还有 SpringSource 站点本身](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/springsecurity.html)

**编辑**

这就是我自己的应用程序进行身份验证的方式（请注意，我不使用外部身份验证，我只是从数据库获取详细信息，但我想这应该不是什么大问题）。

我的`security-context.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.0.xsd">

    <global-method-security pre-post-annotations="enabled" jsr250-annotations="enabled" secured-annotations="enabled">
    </global-method-security>

    <http use-expressions="true">
        <intercept-url pattern="/favicon.ico" access="permitAll" />
        <intercept-url pattern="/static/**" access="permitAll"/>
        <intercept-url pattern="/login.jsp*" access="permitAll"/> 
        <intercept-url pattern="/Admin/**" access="hasAnyRole('ROLE_SUPER_USER')"/>
        <intercept-url pattern="/**" access="hasAnyRole('ROLE_USER','ROLE_SUPER_USER','ROLE_ADMIN'"/>
        <form-login login-page="/login.jsp" authentication-failure-url="/login.jsp?login_error=1" />
        <http-basic/>
        <logout logout-success-url="/login.jsp"/>
        <remember-me user-service-ref="loginService" /
     </http>

    <authentication-manager>
        <authentication-provider user-service-ref="loginService">
         <password-encoder hash="md5"/>
        </authentication-provider>
    </authentication-manager>

    <beans:bean id="loginService" class="com.indyaah.service.LoginService">
    </beans:bean>
    <beans:bean id="authService" class="com.indyaah.service.AuthService" />
</beans:beans> 
```

现在，正如您所见，我指定了一个名为`loginService`我的身份验证提供程序的 bean，它是 class 的 bean `com.indyaah.service.LoginService`。

相同的代码是： **请注意我已经截断了不必要的代码**

```
package com.indyaah.service;
..
@Service
public class LoginService implements UserDetailsService {

....

    /**
     * Implementation for custom spring security UserDetailsService
     */
    public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException, DataAccessException {
        logger.debug("Inside get member by username");
        if (userName != null) {
            Member memberVO = memberMapper.getMemberByUsername(userName);
            if (memberVO != null) {
                ArrayList<String> authList = memberRolesMapper.getMemberRoles(memberVO.getMemberId());

                List<GrantedAuthority> authorities = new ArrayList<GrantedAuthority>();
                for (String role : authList) {
                    System.out.println(role);
                    authorities.add(new GrantedAuthorityImpl(role.toString()));
                }

                if (memberVO.getEnabled()) {
                    User user = new User(memberVO.getUserName(), memberVO.getPassword(), true, true, true, true, authorities);
                    return user;
                } else {
                    logger.error("User with login: " + userName + " not Enabled in database. Authentication failed for user ");
                    throw new UsernameNotFoundException("User Not Enabled");
                }
            } else {
                logger.error("User with login: " + userName + " not found in database. Authentication failed for user ");
                throw new UsernameNotFoundException("user not found in database");
            }
        } else {
            logger.error("No User specified in the login ");
            throw new UsernameNotFoundException("No username specified");
        }

    }
} 
```

注意这里的两件事。

1.  我获取用户详细信息（在我的情况下，来自 DB，您的可能不同。）并将其放在一个新`org.springframework.security.core.userdetails.User`对象下，然后该方法将其返回给 spring security。
2.  还有当局（我根据我的数据库架构从数据库中单独加载，你的情况可能会有所不同）并通过相同的用户对象将其传递给弹簧安全。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:25:03.460

您可以实现自己的 Custom [AuthenticationManager](http://www.jarvana.com/jarvana/view/org/springframework/security/spring-security-core/3.0.2.RELEASE/spring-security-core-3.0.2.RELEASE-sources.jar!/org/springframework/security/authentication/AuthenticationManager.java?format=ok)和 Custom [UsernamePasswordAuthenticationFilter](http://www.jarvana.com/jarvana/view/org/springframework/security/spring-security-web/3.0.5.RELEASE/spring-security-web-3.0.5.RELEASE-sources.jar!/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.java?format=ok)。这是一个简单的示例，但它也可以为您的信息提供一个想法，这是安全上下文中非常敏感的部分:)

只需在 spring_security.xml 中创建 bean：

```
<http entry-point-ref="authenticationProcessingFilterEntryPoint"
        use-expressions="true">

        <custom-filter ref="sessionManagementFilter" before="SESSION_MANAGEMENT_FILTER" />
        <custom-filter ref="customUsernamePasswordAuthenticationFilter"
            position="FORM_LOGIN_FILTER" />

        <session-management
            session-authentication-strategy-ref="sas"></session-management>
    </http>

    <beans:bean id="authenticationProcessingFilterEntryPoint"
            class="org.springframework.security.web.authentication.AuthenticationProcessingFilterEntryPoint">
            <beans:property name="loginFormUrl" value="/login" />
        </beans:bean>

        <beans:bean id="sas"
            class="org.springframework.security.web.authentication.session.SessionFixationProtectionStrategy" />

        <beans:bean id="customAuthenticationManager"
            class="my.package.security.CustomAuthenticationManager" />

        <beans:bean id="customUsernamePasswordAuthenticationFilter"
            class="my.package.security.CustomUsernamePasswordAuthenticationFilter">

            <beans:property name="sessionAuthenticationStrategy"
                ref="sas" />

            <beans:property name="authenticationManager" ref="customAuthenticationManager" />

            <beans:property name="authenticationSuccessHandler">

                <beans:bean
                    class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">

                    <beans:property name="defaultTargetUrl" value="/main.xhtml" />

                </beans:bean>

            </beans:property>

            <beans:property name="authenticationFailureHandler">

                <beans:bean
                    class="org.springframework.security.web.authentication.SimpleUrlAuthenticationFailureHandler">

                    <beans:property name="defaultFailureUrl" value="/login.xhtml" />

                </beans:bean>

            </beans:property>
        </beans:bean>
<beans:bean id="sessionManagementFilter"
        class="org.springframework.security.web.session.SessionManagementFilter">
        <beans:constructor-arg name="securityContextRepository"
            ref="httpSessionSecurityContextRepository" />
    </beans:bean>
    <beans:bean id="httpSessionSecurityContextRepository"
        class="org.springframework.security.web.context.HttpSessionSecurityContextRepository" /> 
```

当您实现 CustomUsernamePasswordAuthenticationFilter 覆盖 Authentication 并添加您的外部逻辑时：

```
public final class CustomUsernamePasswordAuthenticationFilter extends UsernamePasswordAuthenticationFilter {

@Override
    public Authentication attemptAuthentication(HttpServletRequest request,   HttpServletResponse response){
CustomAuthentication auth = new CustomAuthentication();

            // set details of current user
            auth.setDetails(new WebAuthenticationDetails(request));
            auth.setAuthenticated(true);
            auth.setUserName(username);

            // set authentication to current security session
            LOGGER.info("Setting authentication into existing security context");
            SecurityContextHolder.getContext().setAuthentication(auth);

            // if validation done return generated authentication
            return auth;

}

} 
```

然后生成的身份验证对象将由身份验证管理器处理：

```
public final class CustomAuthenticationManager implements AuthenticationManager {

    /*
     * (non-Javadoc)
     * 
     * @see org.springframework.security.authentication.AuthenticationManager#
     * authenticate(org.springframework.security.core.Authentication)
     */
    private static final Logger LOGGER = LoggerFactory.getLogger(CustomUsernamePasswordAuthenticationFilter.class);
    private final BadCredentialsException badCredentialsException = new BadCredentialsException("Invalid username/password");
    @Override
    public Authentication authenticate(Authentication authentication) {

        //check if user has valid authentication
        if (authentication == null) {
            LOGGER.debug("Null authentication");
            throw badCredentialsException;
        }
        //Check mandatory fields
        if (!Validator.isValidString((String) authentication.getPrincipal()) || !Validator.isValidString((String) authentication.getCredentials())) {
            LOGGER.debug("Null/blank username/credential");
            throw badCredentialsException;

        }
        //Check if there is any role assigned into user
        if (authentication.getAuthorities() != null && authentication.getAuthorities().size() < 1) {
            LOGGER.debug("No authority found");
            throw badCredentialsException;
        }

        //Validate role
        //IF ROLE VALIDATION REQUIRED YOU CAN HANDLE IT HERE
        boolean authorityValid = false;
        LOGGER.info("Validating user authentication. Total grantedAuth size: " + authentication.getAuthorities().size());
        for (GrantedAuthority g : authentication.getAuthorities()) {
            if (!authorityValid) {
                //Testing purpose one type role available, when exact roles prepared create enum types
                authorityValid = g.getAuthority().equals("ROLE_LDAP_AUTHENTICATED");
            }
        }

        //if none of role matching to required throw exception
        if(!authorityValid){
            LOGGER.debug("User has authority but none of them matching");
            throw badCredentialsException;
        }

        LOGGER.info("Final validation done returning authentication");
        return authentication;
    }

} 
```

然后，如果需要，您也可以覆盖默认身份验证对象，如果角色动态位于此处是您处理的位置：

```
public final class CustomAuthentication implements Authentication {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;
        private transient String userName;
        private transient boolean authenticated;
        private transient Object details;
        private static final transient String ROLE = "ROLE_LDAP_AUTHENTICATED";

        /*
         * (non-Javadoc)
         * 
         * @see java.security.Principal#getName()
         */
        @Override
        public String getName() {
            return this.userName; //for dynamic username logic here
        }

     //IF ROLES DYNAMICALLY ALLOCATED ASSIGN IT HERE, HERE IS WHERE YOU READ FROM INTERCEPT URL

        /*
         * (non-Javadoc)
         * 
         * @see org.springframework.security.core.Authentication#getAuthorities()
         */
        @Override
        public Collection<GrantedAuthority> getAuthorities() {
            Collection<GrantedAuthority> auths = new ArrayList<GrantedAuthority>();
            auths.add(new GrantedAuthority() {

                /**
                 * 
                 */
                private static final long serialVersionUID = 1L;

                @Override
                public String getAuthority() {
                    if (authenticated) {

                        return ROLE;
                    }
                    return null;
                }
            });
            return auths;
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.springframework.security.core.Authentication#getCredentials()
         */
        @Override
        public Object getCredentials() {
            //TODO: a specific algorithm can be stored
            return userName + " is ldap authenticated user";
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.springframework.security.core.Authentication#getDetails()
         */
        @Override
        public Object getDetails() {
            return this.details;
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.springframework.security.core.Authentication#getPrincipal()
         */
        @Override
        public Object getPrincipal() {
            return userName;
        }

        /*
         * (non-Javadoc)
         * 
         * @see org.springframework.security.core.Authentication#isAuthenticated()
         */
        @Override
        public boolean isAuthenticated() {

            return this.authenticated;
        }

        /*
         * (non-Javadoc)
         * 
         * @see
         * org.springframework.security.core.Authentication#setAuthenticated(boolean
         * )
         */
        @Override
        public void setAuthenticated(boolean arg0) {
            this.authenticated = arg0;

        }

        public String getUserName() {
            return userName;
        }

        public void setUserName(String userName) {
            this.userName = userName;
        }

        public void setDetails(Object details) {
            this.details = details;
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:50:26.313

实现一个保存用户信息的服务。

```
@Service
public class UserAuthenticationInfoService {

    private final Map<String, UserInfo> infos = new HashMap<String, UserInfo>();

    public void addUserInfo(UserInfo userInfo){
        infos.put(userInfo.getUsername(), userInfo);   
    }

    public UserInfo getUserInfo(String username) {
        return infos.get(username);
    }

} 
```

您的控制器使用您从外部应用程序收到的用户信息填充 UserAuthenticationInfoService 服务。

然后实现一个自定义的 UserDetailsS​​ervice 来访问这些信息。

```
public class CustomerUserDetailsService implements UserDetailsService {
    @Autowired
    private UserAuthenticationInfoService service;

     public UserDetails loadUserByUsername(String userName) throws UsernameNotFoundException, DataAccessException {
        UserInfo info = service.getUserInfo(userName);
        return new User(info.getUsername(), info.getPassword(), info.getAuthorities());
    }
} 
```

并设置 spring 安全上下文以使用此 UserDetailsS​​ervice（您可以在 spring 安全文档中找到它）

# jakarta-mail - JavaMail错误+无法识别的SSL消息，明文连接？

> ID：12366765
> 
> 赞同：1
> 
> 时间：2012-09-11T09:35:18.290
> 
> 标签：jakarta-mail, pop3, zimbra

使用以下代码从 Zimbra 邮件服务器读取邮件。

```
String SSL_FACTORY = "javax.net.ssl.SSLSocketFactory";

Properties pop3Props = new Properties();

pop3Props.setProperty("mail.pop3.socketFactory.class", SSL_FACTORY);
pop3Props.setProperty("mail.pop3.socketFactory.fallback", "false");
pop3Props.setProperty("mail.pop3.auth", "true");
pop3Props.setProperty("mail.pop3.port",  "110");
pop3Props.setProperty("mail.pop3.socketFactory.port", "110");

URLName url = new URLName("pop3", host, 110, "",username, password);

Session session = Session.getInstance(pop3Props, null);
Store store = new POP3SSLStore(session, url);
store.connect(); 
```

但不断收到此错误

```
javax.mail.MessagingException: Connect failed;
  nested exception is:
    javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:148)
    at javax.mail.Service.connect(Service.java:275)
    at javax.mail.Service.connect(Service.java:156)
    at javax.mail.Service.connect(Service.java:105)
    at VerifyMail.readPOP3(VerifyMail.java:177)
    at VerifyMail.main(VerifyMail.java:20)
Caused by: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?
    at com.sun.net.ssl.internal.ssl.InputRecord.handleUnknownRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.InputRecord.read(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Unknown Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(Unknown Source)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(Unknown Source)
    at java.io.BufferedInputStream.fill(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    at java.io.DataInputStream.readLine(Unknown Source)
    at com.sun.mail.pop3.Protocol.simpleCommand(Protocol.java:347)
    at com.sun.mail.pop3.Protocol.<init>(Protocol.java:91)
    at com.sun.mail.pop3.POP3Store.getPort(POP3Store.java:201)
    at com.sun.mail.pop3.POP3Store.protocolConnect(POP3Store.java:144)
    ... 5 more 
```

任何人都可以帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T18:52:09.903

阅读此[常见错误列表，](http://www.oracle.com/technetwork/java/javamail/faq/index.html#commonmistakes)然后清理您的代码。

[Gmail 示例](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)也应该适用于您，但显然您需要更改主机名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-19T12:00:25.813

这将帮助您绕过证书过程并直接访问 ssl 主机

```
 MailSSLSocketFactory sf = null;
    try
    {
        sf = new MailSSLSocketFactory();
    }
    catch (GeneralSecurityException e)
    {
        e.printStackTrace();
    }
            sf.setTrustAllHosts(true);

    Properties pop3Props = new Properties();
    pop3Props.setProperty("mail.pop3.ssl.enable", "true");
    pop3Props.setProperty("mail.protocol.ssl.trust", "pop3.live.com");
    pop3Props.put("mail.pop3s.ssl.socketFactory", sf);
    pop3Props.setProperty("mail.pop3s.port", "995");

    Session session = Session.getInstance(pop3Props);

    try
    {
    /* Get a Store object*/
       Store store = session.getStore("pop3s");
    //process further activity 
    } 
```

# mongodb - runCommand geohaystack 如何使用 > < <= >= 正确格式化

> ID：12366768
> 
> 赞同：0
> 
> 时间：2012-09-11T09:35:21.673
> 
> 标签：mongodb, geospatial

我在 mongo shell 中运行这个查询

```
db.runCommand({ geoSearch : "tablebusiness", near : [106.90, -6.20], maxDistance : 0.053980478460939611, search : { "Prominent" :  15 }, limit : 20 }); 
```

我得到了结果。

但是当我运行这个查询时

```
db.runCommand({ geoSearch : "tablebusiness", near : [106.90, -6.20], maxDistance : 0.053980478460939611, search : { "Prominent" : {gte: 15} }, limit : 20 }); 
```

我什么结果都没有。

那么我如何在运行命令 geohaystack 中使用 $gte mongodb？

基本上我想做相当于

```
db.tablebusiness.find({ "LongitudeLatitude" : { "$nearSphere" : [106.772835, -6.186753], "$maxDistance" : 0.053980478460939611 }, "Prominent" : { "$gte" : 15 }, "indexContents" : { "$all" : [/^soto/, /^nasi/] } }).limit(200); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:21:11.637

在您的第二个查询中，您指定

```
"Prominent" : {gte: 15} 
```

而它应该是

```
"Prominent" : { $gte : 15 } 
```

让我知道这是否只是一个错字。

# delphi - Delphi - 用于连接 SQL 语句的 TUpdateObject 与 OnUpdateRecord

> ID：12366772
> 
> 赞同：0
> 
> 时间：2012-09-11T09:35:34.810
> 
> 标签：delphi, delphi-xe, firebird

我有一个 pFibdataset（其工作方式类似于 BDEDataset），我需要在其中进行以下连接选择

```
select table.Name as name,
table1.Name as name_1,
table2.Name as name_2
from table 
left join table table_1 on table.id=table_1.id
left join table table_2 on table.id=table_2.id 
```

字段名称、名称_1 和名称_2 链接到一些数据感知编辑。现在，我希望在修改（更新、删除、插入操作）后，要在表中更新 name、name_1 和 name_2 字段。基于[wiki Using_Multiple_Update_Objects_Index](http://docwiki.embarcadero.com/RADStudio/XE3/en/Using_Multiple_Update_Objects_Index)我可以使用 UpdateObjects 或[OnUpdateRecord](http://docwiki.embarcadero.com/Libraries/en/Bde.DBTables.TBDEDataSet.OnUpdateRecord)事件。

问题是我不明白这需要如何实现。我在查询中有连接选择，我需要如何定义和使用 name_1 和 name_2 字段。有人可以为我提供一个例子吗？

我知道如何使用子查询来完成此任务。我需要看看如何使用 UpdateObjects 或 OnUpdateRecord 来实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T14:59:42.827

TpFibUpdateObject 就像客户端的触发器一样工作。要使其工作，请设置以下属性：

```
DataSet - dataset (master) to monitor
KindUpdate - Insert/Update/Delete - action to monitor
SQL - command to execute when action is fired, params are taken from DataSet
ExecuteOrder - AfterDefault/BeforeDefault - probably you need after / master 
```

但是，我建议使用两种替代方法（阅读更好），而不是使用大量 UpdateObject 组件和这种纠结的方法：

1.  可更新的视图。它将像“虚拟表”一样工作。创建一个连接这些表的视图并在插入/更新/删除触发器之前编写。在 Delphi 中将其用作常规表：从视图中选择/插入视图/更新视图并从视图中删除。无论如何，我想你在很多地方都需要这些表链接在一起。

2.  在您的 TpFIBDataSet SQL 中使用 EXECUTE BLOCK 语句。批量插入/更新/删除所有表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T15:00:22.780

解决方案： OnUpdateRecord 必须为连接表中的每个字段创建一个 TUpdateObject。

```
 UpdateObjectvariable.DataSet := Dataset;
 fill the SQL text
 Apply. 
```

设置完所有更新对象后， `UpdateAction := uaApplied;`必须调用。

# android - VideoView 不适用于 Android 4.0 及更高版本

> ID：12366774
> 
> 赞同：1
> 
> 时间：2012-09-11T09:35:39.897
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-videoview

我正在像这样在运行时创建一个 VideoView：

```
@Override
public View getUIElement(){
    if(vv==null){
        this.vv = new VideoView(this.getContext());
        vv.setVideoURI(Uri.parse(this.url));    
        mc = new MediaController(this.getContext());
        vv.setMediaController(mc);  
    }
    return vv;
} 
```

然后我将此 VideoView 添加到 LinearLayout 我称之为：

```
public void initVideo(){
    mc.show();  
    vv.setBackgroundColor(Color.TRANSPARENT);
    vv.requestFocus();
    vv.start(); 
    Log.v("Video",vv.toString());
} 
```

此代码在 Froyo (2.2) 和 Gingerbread (2.3.5) 上完美运行，但在 ICS (4.0) 和 JB(4.1) 上没有任何反应 - VideoView 在父视图中甚至不可见。你有什么想法为什么？在 Uri.parse() 我将 url 传递给 mp4 文件。

--edit 我忘了告诉你，在 ICS ang JB 的 LogCat 中，甚至没有调用 MediaPlayer（在 Froyo 和 Gingerbread 中有一些由 MediaPlayer 类生成的信息）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T06:22:57.063

我从 res 中的 raw 文件夹中获取我的视频资源。您也可以使用直接 URL。我已经在下面的代码中提交了它。

写入 XML 布局文件

```
VideoView
        android:id="@+id/videoView1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"<
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" /> 
```

并用java代码编写

```
video = (VideoView) findViewById(R.id.videoView1);
video.setVideoPath("android.resource://com.example.s3project/raw/" +R.raw.bggreen1);
//video.setVideoURI(Uri.parse("http://www.pocketjourney.com/downloads/pj/video/famous.3gp"));
        video.start(); 
```

# jquery - 任何人都知道有一个带有 jQ uery 验证的自定义单选按钮/复选框实现吗？

> ID：12366776
> 
> 赞同：0
> 
> 时间：2012-09-11T09:35:57.520
> 
> 标签：jquery, css, forms, validation

任何人都做过风格化的单选按钮、复选框，甚至可能与 jQuery 验证一起使用的下拉菜单？

示例：如果我勾选所需的自定义样式复选框，隐藏的实际复选框会检查并触发重新验证。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:27:26.903

由于没有答案，因此深入研究了它。

这是我所拥有的，仍然非常基本但可以工作，请随时改进代码。

```
(function ($) {
    $.fn.styliseForm = function () {

        var inputs = this.find('input[type=checkbox], input[type=radio]');

        inputs.each(function () {
            var t = $(this),
            type = '',
            cl = 'hdn';
            if (t.is(':checkbox')) {
                type = 'checkbox';
            }
            if (t.is(':radio')) {
                type = 'radio';
            }
            if (t.is('checked')) { cl = 'b-hdn active'; }
            t.before('<span class="b-' + type + '" data-name="' + t.attr('name') + '" />').addClass(cl);
        });

        $('.b-radio, .b-checkbox').each(function () {
            var t = $(this),
            next = t.next(),
            inputGroup = $('input[name=' + t.attr('name') + ']');

            t.click(function () {
                if (t.is('.b-radio')) {
                    $('span[data-name=' + t.attr('data-name') + ']').removeClass('active');
                    t.addClass('active');
                    next.attr('checked', true);
                    inputGroup.not(next).attr('checked', false);
                }
                if (t.is('.b-checkbox')) {
                    t.toggleClass('active');
                    next.attr('checked', t.hasClass('active'));
                    if (next.attr('class').indexOf('{') > -1 && t.hasClass('active')) { next.valid(); }
                }
            });

            if (next.is(':checked')) {
                t.addClass('active');
            }
        });
    }
})(jQuery);

$('#exampleForm').styliseForm(); 
```

# javascript - IE7 中的 HTMLInputElement

> ID：12366777
> 
> 赞同：2
> 
> 时间：2012-09-11T09:35:59.160
> 
> 标签：javascript, dom, internet-explorer-7

我正在为跨浏览器输入和文本区域选择 getter 和 setter 编写扩展。这就是我编写代码的方式：

```
HTMLInputElement.prototype.getSelectionRange = get_selection_range;
HTMLInputElement.prototype.setSelection = set_selection_range;
HTMLTextAreaElement.prototype.getSelectionRange = get_selection_range;
HTMLTextAreaElement.prototype.setSelection = set_selection_range; 
```

get_selection_range 和 set_selection_range 是那些扩展函数。所以我只想更换

```
someInputElement.selectionStart = a;  // and whole lot of code due to browser
someInputElement.selectionEnd = b;    // compatibility 
```

只需

```
someInputElement.setSelection(a, b);
someInputElement.setSelection({ start: a, end: b });
someOtherElement.setSelection(someInputElement.getSelection()); 
```

但后来我在 IE7 中遇到了一些困难。首先，IE7 不知道什么是 HTMLInputElement。

我不想扩展整个对象。好吧，那将是我要做的最后一件事，但我想逃避它。函数 get_selection_range 和 set_selection_range 没问题，不要问里面有什么，你已经看过几次了。

所以问题是：对于 IE7，JS 中的 HTMLInputElement 是否有任何合法替代？

**UPD：我在没有扩展任何全局对象类型的情况下制作了自己的解决方案：**

```
var SmartInputSelection = Base.extend({
    constructor: function (options) {
        this.node = options.node;
        this.CHARACTER = "character";
        this.END_TO_END = "EndToEnd";
        this.END_TO_START = "EndToStart";
    },
    setSelection: function (a, b) {
        if (b === undefined && typeof a == "number")
            b = a;
        else if (b === undefined) {
            b = a.end;
            a = a.start;
        }

        if (this.node.selectionStart !== undefined) {
            this.node.selectionStart = a;
            this.node.selectionEnd = b;
        } else {
            var textRange = this.node.createTextRange();
            textRange.collapse(true);
            textRange.moveStart(this.CHARACTER, a);
            textRange.moveEnd(this.CHARACTER, b - a);
            textRange.select();
        }
    },
    getSelection: function () {
        var start, end;
        if (this.node.selectionStart !== undefined) {
            start = this.node.selectionStart;
            end = this.node.selectionEnd;
        } else {
            var range = document.selection.createRange();
            if (range == null) {
                start = end = 0;
            }

            var textRange = this.node.createTextRange(),
            duplicate = textRange.duplicate();
            textRange.moveToBookmark(range.getBookmark());
            duplicate.setEndPoint(this.END_TO_END, textRange);
            end = duplicate.text.length;
            duplicate.setEndPoint(this.END_TO_START, textRange);
            start = duplicate.text.length;
        }

        return {
            start: start,
            end: end
        };
    }
}); 
```

所以现在我只需要声明如下内容：

```
function SelectSomeTextInsideInput (input /* input is some DOM element */) {
    var smartInputSelection = new SmartInputSelection({ node: input });
    smartInputSelection.setSelection(0);
    smartInputSelection.setSelection(2, 5);
    smartInputSelection.setSelection({ start: 2, end: 5 });
    smartInputSelection.getSelection(); // start: 2, end: 5
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T07:28:09.600

您不应该依赖全局定义这些对象，因为您已经注意到在某些浏览器中它们不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T07:04:16.660

不。我最近在与 IE9 作斗争，我通过切换到 HTML5 模式让它工作。
我猜 IE7 太旧了，无法以任何方式支持它。

不管怎样，试着把这句话放在页面顶部：

```
<!doctype HTML> 
```

编辑：在这里查看这个答案：[Element.prototype in IE7?](https://stackoverflow.com/questions/597268/element-prototype-in-ie7?rq=1)

# c# - 有没有办法只对公共方法/属性有 StyleCop 文档要求 SA1600？

> ID：12366780
> 
> 赞同：3
> 
> 时间：2012-09-11T09:36:02.730
> 
> 标签：c#, resharper, stylecop

几年来我一直在使用 XMLDoc，并且肯定已经成长为为公共方法和属性提供高质量文档的心态。

然而，在 StyleCop（尤其是其 Resharper 突出显示）下，我注意到文档要求同样适用于公共、内部、受保护和私有方法。这对我来说似乎有点违反直觉，所以我理想情况下希望将其压制为至少对私有方法的建议。

不幸的是，似乎抑制设置仅适用于所有公共、内部、私人等。我是否遗漏了什么或者这是设计使然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:40:42.763

当您单击 StyleCop 设置中的“文档规则”选项卡时，详细设置包含“忽略私有”和“忽略内部”复选框。

# for-loop - 从现有数据集中将值插入新数据集中

> ID：12366782
> 
> 赞同：0
> 
> 时间：2012-09-11T09:36:14.880
> 
> 标签：for-loop, dataset, vb.net-2010

我正在使用 vb.net.Having 数据集包含列名作为电话。它包含一组电话号码。我想为每个电话号码添加 0 并将其存储在另一个数据集中。

## 我的代码

```
cmd = New OracleCommand("select substr(PHONE,-10)as PHONE from  reports.renewal_contact_t where run_date=to_date('" + TextBox1.Text + "','mm/dd/yyyy') and  EXP_DATE =to_date('" + TextBox2.Text + "','mm/dd/yyyy') and  region not in('TNP')", cn)
ada = New OracleDataAdapter(cmd)
ada.Fill(ds, "reports.renewal_contact_t ")
Dim ds1 As New DataSet
ds1 = ds.Clone()
For Each q In ds.Tables(0).Rows
   phone = z + q("PHONE").ToString
   For Each q1 In ds1.Tables(0).Rows
      q1("PHONE") = phone
   Next
Next 
```

我的问题是没有在 ds1 中获取值。

请帮我纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:42:02.683

你应该试试这个

```
cmd = New OracleCommand("select substr(PHONE,-10)as PHONE from  reports.renewal_contact_t where run_date=to_date('" + TextBox1.Text + "','mm/dd/yyyy') and  EXP_DATE =to_date('" + TextBox2.Text + "','mm/dd/yyyy') and  region not in('TNP')", cn)
ada = New OracleDataAdapter(cmd)
ada.Fill(ds, "reports.renewal_contact_t ")
Dim ds1 As New DataSet
ds1 = ds.Copy()

For Each q In ds1.Tables(0).Rows
    q("PHONE") = "0" + q("PHONE").ToString
Next 
```

# java - 间谍 Java 安全套接字

> ID：12366783
> 
> 赞同：0
> 
> 时间：2012-09-11T09:36:18.460
> 
> 标签：java, security, sockets, spy

我想知道是否有一种简单（或困难）的方法可以从 java 小程序中窥探安全套接字？（没有源代码）

这里的目标是确切地知道什么信息发送一个（非常好的混淆）小程序。

我以为我可以简单地为自己编译一个带有日志功能的修改后的 java 版本，但出于安全原因，java 的完整源代码不可用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:42:04.540

使用小程序接受的安全证书设置代理服务器。之后，您只需将浏览器配置为使用该代理，并且小程序应使用相同的配置。

请参阅[https 是否可以防止代理服务器的中间人攻击？](https://security.stackexchange.com/questions/8145/does-https-prevent-man-in-the-middle-attacks-by-proxy-server)了解它在技术上是如何工作的。

您将需要一些东西： 一个可以充当 Web 服务器的代理，并且可以通过您的浏览器使用真实服务器的名称访问该代理。您将需要为此组合创建一个有效的证书，除非将小程序配置为接受来自不受信任来源的证书（没有 CA 机构会为“google.com”颁发证书，以便您可以提供该证书，否则这并不重要）到您的代理）。

谷歌搜索“中间人攻击 ssl 代理”会发现许多应该有用的链接。

这篇文章似乎描述了一个开箱即用的解决方案：[Understanding Man-In-The-Middle Attacks - Part 4: SSL Hijacking](http://www.windowsecurity.com/articles/Understanding-Man-in-the-Middle-Attacks-ARP-Part4.html)

它没有提到小程序，但[Fiddler](http://www.fiddler2.com/fiddler2/)可能符合要求（来自[Capturing HTTPS traffic in the clear?](https://stackoverflow.com/questions/1073166/capturing-https-traffic-in-the-clear)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T04:39:57.083

只需在 JVM 属性中设置 -Djavax.net.debug=all 即可。您将从网络堆栈的不同层获得各种输出，包括预加密的 SSL 流量。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-11T09:41:31.980

如果您在谈论 SSL，那么如果可能的话，它就不安全了，而且它是安全的，所以它不是。

# android - AndEngine 物理编辑器加载级别

> ID：12366787
> 
> 赞同：0
> 
> 时间：2012-09-11T09:36:32.610
> 
> 标签：android, xml-parsing, box2d, andengine

我使用 PhysicsEditor 创建了一个 .pes 文件并作为 xml 导入并添加到我的项目中。当我解析它并创建身体时，它表现出奇怪的行为。我在 PhysicsEditor 中创建的物体映射与我在应用程序中看到的完全不同，这意味着我在 PhysicsEditor 中绘制的形状在我的应用程序中呈现不同。这是我的 xml 和代码，用于解析并向场景添加主体。

PhysicsEditor XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- created with http://www.physicseditor.de -->
<bodydef version="1.0">
    <bodies numBodies="1">

        <body name="car_path" dynamic="false" numFixtures="1">

            <fixture
                density="2"
                friction="1"
                restitution="0"
                filter_categoryBits="1"
                filter_groupIndex="0"
                filter_maskBits="65535"
                isSensor="false"
                type="POLYGON"
                numPolygons="20"
                >

                <polygon numVertexes="6">

                    <vertex x="277.0000" y="152.0000" />

                    <vertex x="356.0000" y="172.0000" />

                    <vertex x="413.0000" y="194.0000" />

                    <vertex x="476.0000" y="223.0000" />

                    <vertex x="173.0000" y="232.0000" />

                    <vertex x="174.0000" y="148.0000" />

                </polygon>

                <polygon numVertexes="4">

                    <vertex x="1556.0000" y="221.0000" />

                    <vertex x="1142.0000" y="94.0000" />

                    <vertex x="1255.0000" y="-15.0000" />

                    <vertex x="1554.0000" y="-14.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="-192.0000" y="177.0000" />

                    <vertex x="-888.0000" y="139.0000" />

                    <vertex x="-549.0000" y="-125.0000" />

                </polygon>

                <polygon numVertexes="6">

                    <vertex x="1762.0000" y="24.0000" />

                    <vertex x="1862.0000" y="27.0000" />

                    <vertex x="1927.0000" y="68.0000" />

                    <vertex x="2078.0000" y="222.0000" />

                    <vertex x="1643.0000" y="212.0000" />

                    <vertex x="1642.0000" y="38.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="-1150.0000" y="146.0000" />

                    <vertex x="-1776.0000" y="140.0000" />

                    <vertex x="-1476.0000" y="-25.0000" />

                </polygon>

                <polygon numVertexes="4">

                    <vertex x="-2799.0000" y="103.0000" />

                    <vertex x="-2684.0000" y="223.0000" />

                    <vertex x="-3112.0000" y="256.0000" />

                    <vertex x="-3108.0000" y="98.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="3112.0000" y="255.0000" />

                    <vertex x="2422.0000" y="222.0000" />

                    <vertex x="3120.0000" y="-71.0000" />

                </polygon>

                <polygon numVertexes="4">

                    <vertex x="1142.0000" y="94.0000" />

                    <vertex x="1556.0000" y="221.0000" />

                    <vertex x="709.0000" y="226.0000" />

                    <vertex x="911.0000" y="93.0000" />

                </polygon>

                <polygon numVertexes="6">

                    <vertex x="-2111.0000" y="89.0000" />

                    <vertex x="-2067.0000" y="94.0000" />

                    <vertex x="-2002.0000" y="139.0000" />

                    <vertex x="-2344.0000" y="223.0000" />

                    <vertex x="-2196.0000" y="112.0000" />

                    <vertex x="-2153.0000" y="91.0000" />

                </polygon>

                <polygon numVertexes="4">

                    <vertex x="105.0000" y="233.0000" />

                    <vertex x="-94.0000" y="178.0000" />

                    <vertex x="69.0000" y="106.0000" />

                    <vertex x="91.0000" y="104.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="-2002.0000" y="139.0000" />

                    <vertex x="-2067.0000" y="94.0000" />

                    <vertex x="-2032.0000" y="110.0000" />

                </polygon>

                <polygon numVertexes="4">

                    <vertex x="-1150.0000" y="146.0000" />

                    <vertex x="105.0000" y="233.0000" />

                    <vertex x="-2344.0000" y="223.0000" />

                    <vertex x="-2002.0000" y="139.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="413.0000" y="194.0000" />

                    <vertex x="356.0000" y="172.0000" />

                    <vertex x="376.0000" y="176.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="105.0000" y="233.0000" />

                    <vertex x="-192.0000" y="177.0000" />

                    <vertex x="-94.0000" y="178.0000" />

                </polygon>

                <polygon numVertexes="4">

                    <vertex x="105.0000" y="233.0000" />

                    <vertex x="-1150.0000" y="146.0000" />

                    <vertex x="-888.0000" y="139.0000" />

                    <vertex x="-192.0000" y="177.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="3112.0000" y="255.0000" />

                    <vertex x="-3112.0000" y="256.0000" />

                    <vertex x="-2684.0000" y="223.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="3112.0000" y="255.0000" />

                    <vertex x="1556.0000" y="221.0000" />

                    <vertex x="1643.0000" y="212.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="709.0000" y="226.0000" />

                    <vertex x="173.0000" y="232.0000" />

                    <vertex x="476.0000" y="223.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="3112.0000" y="255.0000" />

                    <vertex x="2078.0000" y="222.0000" />

                    <vertex x="2422.0000" y="222.0000" />

                </polygon>

                <polygon numVertexes="3">

                    <vertex x="3112.0000" y="255.0000" />

                    <vertex x="105.0000" y="233.0000" />

                    <vertex x="173.0000" y="232.0000" />

                </polygon>

            </fixture>

        </body>

    </bodies>
    <metadata>
        <format>1</format>
        <ptm_ratio></ptm_ratio>
    </metadata>
</bodydef> 
```

这是我的代码：

```
private void loadLevel() {
    // TODO Auto-generated method stub
    AssetManager assetManager = getAssets();
    try {
        InputStream stream = assetManager.open("tmx/path1.xml");
        if(stream != null) {
            try {
                DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();

                dbf.setValidating(false);
                dbf.setIgnoringComments(false);
                dbf.setIgnoringElementContentWhitespace(true);
                dbf.setNamespaceAware(true);

                DocumentBuilder db = null;
                db = dbf.newDocumentBuilder();

                Document document = db.parse(stream);
                Element root = document.getDocumentElement();

                NodeList bodiesNodeList = root.getElementsByTagName("bodies");
                for(int i = 0; i < bodiesNodeList.getLength(); i++) {
                    BodyDef bodyDef = new BodyDef();
                    bodyDef.type = BodyType.StaticBody;
                    bodyDef.fixedRotation = true;
                    Element bodiesElement = (Element)bodiesNodeList.item(i);
                    NodeList bodyList = bodiesElement.getElementsByTagName("body");
                    for(int j = 0; j < bodyList.getLength(); j++) {
                        Element bodyElement = (Element)bodyList.item(j);
                        Body body = mPhysicsWorld.createBody(bodyDef);
                        NodeList fixtureList = bodyElement.getElementsByTagName("fixture");
                        for(int k = 0; k < fixtureList.getLength(); k++) {
                            Element fixtureElement = (Element)fixtureList.item(k);
                            FixtureDef fixtureDef = new FixtureDef();
                            if(fixtureElement != null) {
                                String density = fixtureElement.getAttribute("density");
                                String friction = fixtureElement.getAttribute("friction");
                                String restitution = fixtureElement.getAttribute("restitution");
                                fixtureDef = PhysicsFactory.createFixtureDef(Float.parseFloat(density), Float.parseFloat(friction), Float.parseFloat(restitution));

                            }
                            NodeList polygonList = fixtureElement.getElementsByTagName("polygon");
                            if(polygonList != null && polygonList.getLength() > 0) {
                                for(int m = 0; m < polygonList.getLength(); m++) {
                                    PolygonShape polyShape = new PolygonShape();
                                    Element polygonElement = (Element)polygonList.item(m);
                                    NodeList vertexList = polygonElement.getElementsByTagName("vertex");
                                    if(vertexList != null && vertexList.getLength() > 0) {
                                        Vector2 [] vectors = new Vector2[vertexList.getLength()];
                                        for(int n = 0; n < vertexList.getLength(); n++) {
                                            Element vertexElement = (Element)vertexList.item(n);
                                            if(vertexElement != null) {
                                                float x = Float.parseFloat(vertexElement.getAttribute("x"));
                                                float y = Float.parseFloat(vertexElement.getAttribute("y"));
                                                vectors[n] = new Vector2(x/PIXEL_TO_METER_RATIO_DEFAULT, y/PIXEL_TO_METER_RATIO_DEFAULT);
                                            }
                                        }
                                        polyShape.set(vectors);
                                        fixtureDef.shape = polyShape;
                                    }
                                    body.createFixture(fixtureDef);
                                }

                            }

                        }
                        mScene.attachChild(bgSprite);
                        mPhysicsWorld.registerPhysicsConnector(new PhysicsConnector(bgSprite, body, false, false));

                    }

                }
            }
            catch(Exception e) {
                e.printStackTrace();
            }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T11:34:27.150

我认为你正在做的错误的事情是重新发明轮子。我建议你使用这个加载器： [https ://github.com/ANDLABS-Git/AndEngine-PhysicsEditor-Extension](https://github.com/ANDLABS-Git/AndEngine-PhysicsEditor-Extension)

# c# - 无法使用 regsvr32 注册第三方 DLL

> ID：12366788
> 
> 赞同：2
> 
> 时间：2012-09-11T09:36:33.433
> 
> 标签：c#, regsvr32

我一直在尝试使用该命令注册第三方 dll 文件`regsvr32`，但它一直给我错误`the dll doesn't have a entry point, dll could not be registered`。是否可以注册此 dll 并将其用作 .NET 中的 COM 组件？我正在以管理员权限运行命令提示符。

如果我想将该 dll 用作 c#.NET 中的 COM 组件怎么办？有没有办法将该 dll 用作 COM 组件？当我尝试将它用作 COM 组件时，dll 文件、它的方法、接口在 .NET 中是可见的。但是，当我尝试使用该界面中的任何一个时，它都会给我错误，因为`Retrieving the COM class factory for component with CLSID {C4CC4F47-2AF6-41FA-A43D-01E8B3050D3F} failed due to the following error: 80040154.`.

# javascript - 强制谷歌索引 javascript 背景图片

> ID：12366790
> 
> 赞同：0
> 
> 时间：2012-09-11T09:36:34.623
> 
> 标签：javascript, meta

我通过 javascript 加载了一些背景图像，因此 div 或容器在加载时为空，我可以使用一些元数据让谷歌知道并索引这些图像吗？如果我也可以关联一个标签，那将很有用

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:23:33.537

我不认为这是可能的 - 一些谷歌搜索也有帮助：[链接](https://stackoverflow.com/questions/2319201/background-image-in-div-google-indexing)

# c# - 使用 ASP.NET 存储以前的搜索条件

> ID：12366791
> 
> 赞同：2
> 
> 时间：2012-09-11T09:36:42.507
> 
> 标签：c#, asp.net, web-applications

我创建了一个返回产品列表的 Web 应用程序。在此页面上，它允许用户搜索一系列不同的搜索条件。

一旦用户搜索并将结果返回到页面上的表格，用户就可以编辑产品。然而，在返回产品列表页面后，页面会重新加载，并再次显示所有产品。

我想知道保留搜索结果的最佳方法是什么，并在返回搜索页面时保留以前的条件。

我发现了一些关于堆栈交换的帖子——[在 ASP.NET 中存储以前搜索条件的最佳方式](https://stackoverflow.com/questions/253701/best-way-to-store-previous-search-criteria-in-asp-net)——可能是更好的帖子之一。

有谁知道我可以如何保持搜索条件，所以当用户返回搜索页面时，以前的搜索条件和结果保持不变。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:44:46.190

如果您的整个搜索可以通过查询字符串表示，那么将查询字符串（或搜索条件）存储在 cookie 中是非常有意义的。当然，假设 cookie 已打开。

当用户导航到搜索页面时，您可以从 cookie 中读取查询字符串并返回相关结果。

在高负载系统中，客户端状态是一种很好的前进方式。如果您有数百个并发用户，您不希望将状态存储在服务器上。

**编辑**

好的，假设您决定将结果存储在会话中。这有什么问题？您的结果可能不再相关。底层数据存储中的某些内容可能会发生变化，您最终将显示不准确的数据。

假设您最终将相当大的结果集存储在内存中 - 每个用户 100kb。假设您有 200 名并发用户，那么您已经看到了至少 100kb * 200 的存储空间。这不到 20MB 的存储空间，不包括您可能存储在会话中的其他数据。随着系统的增长，扩展成本会变得很高。

另一方面，如果您将搜索条件存储在客户端上，那么您可以轻松扩展到数千个用户。您所要做的就是从 cookie 中检索他们的搜索条件并重新执行它。

我个人会寻找一个很好的理由将数据存储在会话状态中。即存储用户敏感数据。

关于[这个问题](https://stackoverflow.com/questions/253701/best-way-to-store-previous-search-criteria-in-asp-net)- 是的，它会起作用，但正如我已经说过的，如果您决定将结果存储在服务器上，它的扩展性就不会太好。此外，如果重新启动应用程序池或重新启动 IIS，您将丢失搜索条件。

# android - Android：获取具有其价值的sharedpreferences的键

> ID：12366795
> 
> 赞同：3
> 
> 时间：2012-09-11T09:36:47.923
> 
> 标签：android, sharedpreferences, key-value

我在 Android 中有一个项目的价值，`SharedPreferences`我想得到它的密钥。我无法弄清楚。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:42:10.827

用于`SharedPreferences` `getAll()`获取所有键值对的映射并迭代它以`entrySet()`寻找您所追求的值键对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:41:52.640

共享首选项 getAll()。方法将返回键值对的映射，现在从值中过滤掉键。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:43:45.430

您可以使用返回 Map 的 getAll() 函数

[http://developer.android.com/reference/android/content/SharedPreferences.html#getAll](http://developer.android.com/reference/android/content/SharedPreferences.html#getAll) ()

地图有方法 getKeySet()

[http://developer.android.com/reference/java/util/Map.html#keySet](http://developer.android.com/reference/java/util/Map.html#keySet) ()

你可以得到钥匙

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-28T09:30:44.213

如果在 SharedPreferences 中保证键是唯一的，请使用此方法，因为它只会返回第一个匹配值的键。

```
private String getSharedKeyByValue(SharedPreferences sharedPreferences, String value) {
    for (Map.Entry<String, ?> entry : sharedPreferences.getAll().entrySet()) {
        if (value.equals(entry.getValue())) {
            return entry.getKey();
        }
    }
    return null; // Not Found
} 
```

# devexpress - XAF：如何从 XAF Windows 应用程序中的代码中最小化功能区

> ID：12366800
> 
> 赞同：1
> 
> 时间：2012-09-11T09:36:57.790
> 
> 标签：devexpress, ribbon, xaf

当用户单击特定导航项时，我想最小化功能区。例如 - 当用户单击仪表板导航项时，我希望功能区最小化，并自动“最大化”其他功能区。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:29:42.927

我发现我可以简单地访问`ViewController`. 所以像往常一样在 XAF 中，覆盖 " `OnActivated`" 并在那里做魔术

```
 protected override void OnActivated()
    {
        if (Frame.Template != null)
        {
            ((XtraFormTemplateBase)Frame.Template)).RibbonTransformer.Ribbon
                                           .Minimized = View.Id == "TestView;
        }
        base.OnActivated();
    } 
```

`Frame.Template`我在访问仪表板视图时遇到了几个错误`NULL`，其中包含许多嵌套的 ListView。确保你不要忘记检查它:)

# gwt - 不指定对象字段的 SmartGWT 对象绑定

> ID：12366805
> 
> 赞同：0
> 
> 时间：2012-09-11T09:37:28.100
> 
> 标签：gwt, data-binding, smartgwt

我只是想知道是否可以在不明确指定需要映射到某个小部件（即 ListGrid）的所有字段的情况下创建某种绑定。

目前我执行以下操作：首先，我读取所有 JSON 对象字段并将这些字段放入 CategoryRecord 对象中，如下所示：

```
 public class CategoryRecord extends Record {

                public CategoryRecord(String displayName, String id) {
                    setDisplayName(displayName);
                    setId(id);
                }

                private void setId(String id) {
                    setAttribute("id", id);

                }

                public String getId() {
                    return getAttributeAsString("id");
                }
    private void setDisplayName(String displayName) {
            setAttribute("displayName", displayName);

        }

        public String getDisplayName() {
            return getAttributeAsString("displayName");
        }
 } 
```

然后我返回一个 CategoryRecord[] 对象并将其放入 ListGrid。但是，如果应用程序开发人员决定将“id”字段更改为“categoryId”或完全删除它会怎样。每次发生这种情况时，我是否必须手动更改我的代码？或者有没有办法获取整个 JSON 对象，获取它的字段并将其放在我想要的任何位置，而不指定它们的名称。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T21:13:11.973

只需遍历 JSON 对象的属性并为每个对象创建 ListGridField 对象。

# assembly - 替换openmp临界区的汇编指令

> ID：12366806
> 
> 赞同：4
> 
> 时间：2012-09-11T09:37:30.203
> 
> 标签：assembly, openmp, critical-section

我有一组由 openmp 任务处理的元素。任务可能会在数组末尾添加新元素。当然，这些元素也必须进行处理，并且可以产生新的项目。目前我正在使用此代码

```
int p;
#pragma omp critical
{
    p=l.n++;
} 
```

这只是在数组末尾保留一个位置。的类型`l`是

```
struct list
{
    int n;
    double *e;
} 
```

并将`p`用作存储新元素的位置的索引。我想知道是否有一种方法可以在不使用关键区域的情况下执行此操作。是否有一个汇编指令复制一个值然后原子地递增原始值？

代码将在 nehalem cpu 上执行，无需担心旧机器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:48:02.883

```
#pragma omp atomic capture
p = l.n++; 
```

如果硬件支持，这应该在捕获值时使用原子增量。

`#pragma omp atomic`在这个问题中阅读更多信息： [openMP，原子与关键？](https://stackoverflow.com/q/7798010/274261)

这是[英特尔的`#pragma omp atomic`](http://software.intel.com/sites/products/documentation/hpc/composerxe/en-us/2011Update/cpp/lin/cref_cls/common/cppref_pragma_omp_atomic.htm).

我尝试编译一个最小的例子`gcc -fopenmp -m32 -O2 -S`：

```
int i, j;
void foo (void)
{
  #pragma omp atomic capture
  i = j++;
} 
```

我得到的是一个简单的原子“获取和添加”，这就是我们想要的：

```
movl $1, %eax       # eax = 1
lock xaddl %eax, j  # atomic {swap (eax,j); j = eax + j;}
movl %eax, i        # i = eax
ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:14:10.317

是的，在 x86 上有几个可能的选择。

`XADD r/m, r`

该指令以原子方式将第二个操作数 (r) 与第一个操作数 (r/m) 相加，并使用第一个操作数 (r/m) 的原始值加载第二个操作数 (r)。

要使用它，您需要加载带有增量的第二个操作数（我猜，这里是 1），第一个操作数应该是正在递增的内存位置。

该指令必须以 LOCK 前缀开头（它将使其成为原子指令）。

Microsoft Visual C++ 中的`InterlockedAdd()`函数执行此操作，AFAIR 使用`XADD`它是否可用（自 i80486 起可用）。

另一种方法是使用带有`CMPXCHG`指令的循环......

伪代码：

```
while (true)
{
  int oldValue = l.n;
  int newValue = oldValue + 1;
  if (CAS(&l.n, newValue, oldValue) == oldValue)
    break;
} 
```

`CAS()`代表（并发编程中的`Compare And Swap`一个常用术语）是一个尝试用新值原子地替换内存中的值的函数。当被替换的值等于最后提供的参数时，替换成功`oldValue`。否则它会失败。`CAS`从内存中返回原始值，这让我们知道替换是否成功（我们将返回的值与 进行比较`oldValue`）。失败（返回的原始值与 不同`oldValue`）表明在读取`oldValue`和我们尝试用`newValue`另一个线程替换它的那一刻改变了内存中的值。在这种情况下，我们只需重试整个过程。

`CMPXCHG`指令是`CAS`x86 。

在 Microsoft Visual C++中`InterlockedCompareExchange()`使用`CMPXCHG`来实现`CAS`.

如果`XADD`不可用，`InterlockedAdd()`则使用`CAS`//实现`CMPXCHG`。`InterlockedCompareExchange()`

在其他一些 CPU 上，可能还有其他可能性。有些允许原子执行一些相邻的指令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:05:47.823

这实际上只是一个返回结果的原子增量，如下所示：

```
mov p, 1  ; p must be a register
lock xadd [l.n], p 
```

现在你知道了。我认为没有理由实际使用它，但有一些方法可以在不求助于汇编代码的情况下做到这一点。

# c# - 模拟 StreamWriter/确定何时模拟

> ID：12366807
> 
> 赞同：0
> 
> 时间：2012-09-11T09:37:30.457
> 
> 标签：c#, c#-4.0, moq

我有一个使用 StreamWriter 写入文件的类。

```
public void CreateLog(string errorLogFilePath, StringBuilder errorLogBuilder, string errorMessage)
{
    using (StreamWriter sw = new StreamWriter(errorLogFilePath, true)
    {
        errorLogBuilder.Apend("An error was discovered.");
        //....
        sw.Write(errorLogBuilder.ToString());
    }
} 
```

[问题]

1：是否可以检查 .Write() 方法是否被调用？

2：我是否需要在 StreamWriter 中包装 MemoryStream 以对其进行测试，而无需实际访问硬盘驱动器。StreamWriters 构造函数之一接受流，但它指出以下 + UTF-8 编码会影响这一点吗？

> 使用 UTF-8 编码和默认缓冲区大小为指定流初始化 StreamWriter 类的新实例。

3：你如何确定一个类是否真的在访问 hd 并因此需要被模拟？（对不起，如果最后一个问题听起来很愚蠢，但我真的对此有点困惑。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:40:33.980

让方法写入 TextWriter 而不是 StreamWriter。然后通过传递一个模拟 TextWriter 来测试该方法。当然，在“真实”代码中，您将传入一个使用`new StreamWriter(errorLogFilePath, true)`.

这将为您的问题提供以下答案：

1.  是的
2.  不
3.  如果不反编译其代码，您通常无法确定这一点。

更详细一点：

将该方法重构为两种方法：

```
public void CreateLog(string errorLogFilePath, StringBuilder errorLogBuilder, string errorMessage) 
{ 
    using (StreamWriter sw = new StreamWriter(errorLogFilePath, true) 
    {
        CreateLog(sw, errorLogBuilder, errorMessage); 
    } 
} 

public void CreateLog(TextWriter writer, StringBuilder errorLogBuilder, string errorMessage)
{
    errorLogBuilder.Apend("An error was discovered."); 
    //.... 
    writer.Write(errorLogBuilder.ToString()); 
} 
```

测试第一个方法以确保它使用适当构造的 StreamWriter 调用第二个方法。测试第二种方法以确保它`Write`使用适当的参数调用传递的 TextWriter。现在您已经抽象出对硬盘驱动器的依赖。您的测试不使用硬盘驱动器，但您正在测试所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:51:18.557

一般来说，您可以：

使用经过良好测试的日志库（如 NLog、MS 日志应用程序块），让您无需开发和维护自己的日志库。

将您的日志记录逻辑（或代码调用消息框、打开文件对话框等）重构为带有接口的服务。这样您就可以拆分测试策略：

*   在测试登录服务的消费者时：模拟日志接口以确保调用日志方法。这将确保日志记录服务的使用者正确调用日志记录
*   在测试日志服务实现时，只需确保预期的输出与给定的输入匹配：如果您想将“FOO”写入 bar.log，请有效调用

IE ：

```
// arrrange
File.Delete("bar.log")

// act
CreateLog("bar.log", errorLogBuilder, "FOO")

// assert
Assert.IsTrue( File.Exists("bar.log") )
Assert.IsTrue( File.ReadAllLines("bar.log").First() == "FOO") 
```

关键是确保通过模拟来调用组件。然后您可以检查该组件是否按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-13T15:47:57.400

我知道这是一个非常古老的问题，但我在尝试解决类似问题时遇到了这个问题......即如何伪造 StreamWriter。

我解决这个问题的方法是不将 StreamWriter 作为 using 语句的一部分在方法内创建，而是在 ctor 内预先创建（让您的类从 IDisposable 扩展，然后在 Dispose 方法中销毁 StreamWriter）。然后在测试时在其顶部注入一个假的：

```
internal class FakeStreamWriter : StreamWriter
{
    public List<string> Writes { get; set; } = new List<string>();

    public FakeStreamWriter() : base(new MemoryStream()) { }

    public override void Write(string value)
    {
        WriteLine(value);
    }
    public override void WriteLine(string value)
    {
        Writes.Add(value);
    }

    public override void Flush()
    {

    }
} 
```

我的单元测试方法如下所示：

```
public void SmtpStream_Negotiate_EhloResultsCorrectly()
{
    var ctx = new APIContext();
    var logger = new FakeLogger();
    var writer = new FakeStreamWriter();
    var reader = new FakeStreamReader { Line = "EHLO test.com" };
    var stream = new SmtpStream(logger, ctx, new MemoryStream())
    {
        _writer = writer,
        _reader = reader
    };

    Exception ex = null;

    try
    {
        stream.Negotiate(ctx);
    }
    catch (Exception x)
    {
        ex = x;
    }

    Assert.IsNull(ex);
    Assert.IsTrue(writer.Writes.ElementAt(0) == "250 Hello test.com");
    Assert.IsTrue(writer.Writes.ElementAt(1) == "250 STARTTLS");
} 
```

# c# - 在运行时更改 dbContext

> ID：12366811
> 
> 赞同：0
> 
> 时间：2012-09-11T09:37:46.537
> 
> 标签：c#, asp.net, asp.net-mvc, entity-framework

我有一个 UsersContext : DbContext 和一个 DbSet Users { get; 放; }

**用户控制器.cs**

```
public class UsersController : Controller
{
   private UsersContext db = new UsersContext("dbA");

   public ViewResult Index()
   {
       if (...)
          db = new UsersContext("dbA");
       else
          db = new UsersContext("dbB");
       return View(db.Users.ToList());
   }
} 
```

这将返回良好的关联列表。
如果我选择 dbB，我有一个很好的列表，但是当我继续详细介绍以下结果之一时：

```
public ViewResult Details(int id)
{
   User user = db.Users.Find(id);
   return View(user);
} 
```

db 的 connectionString 关联到 dbA 而不是 dbB。为什么新数据库没有很好地初始化和保存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:01:09.750

那是因为您的`Index`操作和`Details`操作不在同一个控制器实例上执行。您可以将数据库名称保存在会话变量中并使用它来创建`DbContext`实例。

```
public class UsersController : Controller
{
   private UsersContext db;

   protected override void Initialize(RequestContext requestContext)
   {
        base.Initialize(requestContext);

       if (Session["Database"] == null)
          db = new UsersContext("dbA");
       else
          db = new UsersContext((string)Session["Database"]);
   }

   public ViewResult Index()
   {
       if (...)       {
          db = new UsersContext("dbA");
          Session
       else
       {
          db = new UsersContext("dbB");
          Session["Database"] = "dbB";
       }

       return View(db.Users.ToList());
   }
} 
```

# tcl - 如何创建一个tcl文件的dll

> ID：12366815
> 
> 赞同：0
> 
> 时间：2012-09-11T09:37:54.497
> 
> 标签：tcl

1）我想创建一个下面的 tcl 示例代码的 dll 文件，我在这样做时遇到了很多麻烦。我正在使用 linux (ubuntu 10.04) 机器。该文件的名称是clock.tcl。我看过很多网站，但我无法获得确切的流程。

2）我也在努力使用 linux 上的确切命令来创建 tcl 代码的 dll 文件

我是 tcl 的新手，也创建了 dll。谁能帮我解决这个问题。请尽快帮助我。

时钟.tcl

```
#!/usr/bin/env tclsh8.5

package require Tk

namespace eval ::sd {
set time0 0
set value 0
set h_outfile "i"
}

proc every {ms body} {eval $body; after $ms [info level 0]}

proc time_ms { } {

set m [clock milliseconds]
puts " in time_ms time is $m"
set m  [format %2.2d:%2.2d:%2.2d.%2.2d \
[expr {$m/3600000}] [expr {$m/60000}] [expr {($m/1000)%60}] [expr {$m%1000}]]

incr ::sd::value
set ::sd::time0 $m
puts $::sd::h_outfile " \t $::sd::time0 \t $::sd::value \n"
}

proc open_log { } {
set ::sd::h_outfile [open "output.txt" "w"]
puts " file is $::sd::h_outfile"
puts $::sd::h_outfile " \t hr::mm::ss::ms \t temperature in celcius \n"
}

if {$argc < 1} {

open_log
every 100 {
time_ms
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:40:38.707

请参阅[为 Windows 构建 Tcl DLL](http://wiki.tcl.tk/2419)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T19:51:45.833

很少将 Tcl 代码构建到共享库中（正式地说，DLL 只是 Windows 上的共享库格式；其他平台具有概念上的等价物，但名称不同），但可以做到。它的完成方式——嗯，可能是最简单的，但也可能有其他方式——是构建一个[StarDLL](http://wiki.tcl.tk/15969)。这包括一个共享库中的 Tcl/Tk 运行时，以及一个保存 Tcl 代码的小型虚拟文件系统。[Pat Thoyts 的页面上有关于构建 StarDLL](http://www.patthoyts.tk/tclkit/building-basekits.html)的进一步说明，但它似乎仍然不是初学者要做的事情。

我质疑这是否是你真正需要的。将您从其他地方调用的程序作为外部进程创建要容易得多，而且打包为[StarPack](http://wiki.tcl.tk/3663)的工具也更加成熟。

# javascript - 在 BoilerplateJS 中，浏览器正在加载所有脚本（在其他模块中），无论激活的模块如何

> ID：12366823
> 
> 赞同：4
> 
> 时间：2012-09-11T09:38:15.837
> 
> 标签：javascript, javascript-framework, boilerplatejs

在[BoilerplatJS](https://github.com/ectechno/boilerplatejs)站点托管的示例项目中，当我们激活特定示例模块（例如 clickCounter）时，其他模块（component.js、viewmodel.js 和其他）中的所有脚本都会加载到浏览器中。

如果我们必须基于某种授权将模块限制为用户，如何限制这种行为？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T09:51:16.863

这里有几件事需要注意。

*   首先关于加载的文件：在您的生产部署中，所有这些文件将被 BoilerplateJS 优化器组合、缩小和混淆。这意味着，无论如何，您的所有代码都将在生产中的单个脚本中，这在 AMD JavaScript 应用程序中是正常的。

*   即使加载了代码，各个组件也不会被渲染，直到它们收到来自前端控制器的激活调用。您的模块将在初始应用程序加载时注册 UI 组件，但 UI 组件的真正创建仅发生在组件的“激活”功能中。这将确保应用程序加载时间更快，并且 UI 组件的创建仅按需进行。

*   您永远不应依赖应用程序中的客户端授权。您所有的 JS 代码都将转到客户端浏览器并有可能被修改。但为了用户友好，您可以隐藏用户不允许的操作。在哪里做取决于控制的粒度。如果您想在组件级别使用它，您可以在导航菜单本身上执行此操作。

# c# - 我可以使用 GetHashCode() 进行所有字符串比较吗？

> ID：12366828
> 
> 赞同：4
> 
> 时间：2012-09-11T09:38:32.767
> 
> 标签：c#, hashcode

我想根据要搜索的对象和一些搜索设置缓存一些搜索结果。

但是：这会创建一个相当长的缓存键，我想我会为它创建一个快捷方式，我想我会使用`GetHashCode()`它。

所以我想知道，`GetHashCode()`总是会产生不同的数字，即使我有很长的字符串或仅以此不同：'ä'而不是'a'

我尝试了一些字符串，*似乎*答案是肯定的，但不理解这种`GetHashCode()`行为并不能让我真正感觉到我是对的。

而且因为它是当你没有准备好时会弹出的那些东西之一（客户端正在查看错误搜索的缓存结果）我想确定......

编辑：如果 MD5 可以工作，我当然可以更改我的代码不使用 GetHashCode，目标是获得比原始字符串更短的字符串（> 1000 个字符）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T09:40:13.750

## 你不能指望`GetHashCode()`自己是独一无二的。

[在http://kennetthorman.blogspot.com/2010/09/c-net-equals-and-getashcode.html](http://kenneththorman.blogspot.com/2010/09/c-net-equals-and-gethashcode.html)上有一篇很好的文章调查了冲突的可能性。调查结果是“对不同字符串返回相同哈希码的调用 GetHashCode() 的最少次数是在 565 次迭代之后，而在发生哈希码冲突之前的最高迭代次数是 296390 次迭代。”

为了让您能够理解实施合同`GetHashCode`，以下是 MSDN 文档的摘录[`Object.GetHashCode()`](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)：

哈希函数必须具有以下属性：

*   如果两个对象比较相等，则每个对象的 GetHashCode 方法必须返回相同的值。但是，如果两个对象比较不相等，则两个对象的 GetHashCode 方法不必返回不同的值。

*   只要确定对象的 Equals 方法的返回值的对象状态没有修改，对象的 GetHashCode 方法就必须始终返回相同的哈希码。请注意，这仅适用于应用程序的当前执行，并且如果再次运行应用程序，则可以返回不同的哈希码。

*   为了获得最佳性能，散列函数必须为所有输入生成随机分布。

`GetHashCode`C# 编译器团队的 Eric Lippert在他的博客[http://ericlippert.com/2011/02/28/guidelines-and-rules-for-getashcode/](http://ericlippert.com/2011/02/28/guidelines-and-rules-for-gethashcode/)上解释了实现规则的基本原理。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-11T09:42:59.717

逻辑上`GetHashCode` **不可能**是唯一的，因为只有 2^32 个整数和无限数量的字符串（参见[鸽洞](http://en.wikipedia.org/wiki/Pigeonhole_principle)原理）。

* * *

正如[@Henk](https://stackoverflow.com/users/60761/henk-holterman)在评论中指出的那样，即使有无限数量的字符串，也有[有限数量的`System.String`s](https://stackoverflow.com/questions/140468/what-is-the-maximum-possible-length-of-a-net-string)。不过鸽子洞原理仍然比后者大得多`int.MaxValue`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-07T20:57:45.930

如果将每个字符串的哈希码与字符串本身一起存储，则可以将字符串的哈希码作为“第一步”来比较它们是否相等。如果两个字符串具有不同的哈希码，它们就不相等，并且不必费心做任何其他事情。如果希望比较多对长度相同且“几乎”但不完全相等的字符串，则在检查内容之前检查哈希码可能是一种有用的性能优化。 *请注意，如果没有缓存哈希码，这种“优化”将不值得，因为计算两个字符串的哈希码几乎肯定会比比较它们慢*. 但是，如果必须出于其他目的计算和缓存哈希码，则将检查哈希码作为比较字符串的第一步可能会很有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T09:43:31.517

使用 GetHashCode() 时总是有冲突的风险，因为您在有限的数字空间 Int32 内操作，而且散列算法无法在该空间内完美分布的事实也会加剧这种情况。

如果您查看 HashTable 或 Dictionary 的实现，您会看到 GetHashCode 用于将键分配到桶中以减少所需的比较次数，但是，如果同一桶中有多个项目，则仍然需要相等比较。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T09:42:47.117

不，GetHasCode 只提供一个哈希码。会有碰撞。具有不同的散列意味着字符串是不同的，但具有相同的散列并不意味着字符串是相同的。

阅读[Eric Lippert 的这些指导方针以正确使用 GetHashCode](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)，它们很有指导意义。

如果你想比较字符串，就这样做！`stringA == stringB`工作正常。如果你想确保一个字符串在一个大集合中是唯一的，使用哈希码的力量来做到这一点，使用`HashSet<string>`.

# java - JAVA：按下按钮时，JCheckBox 在 JTable 中丢失了选择

> ID：12366829
> 
> 赞同：0
> 
> 时间：2012-09-11T09:38:34.917
> 
> 标签：java, swing, jtable, jcheckbox

我有这个问题：在 jtable 中添加**了**一个**jcheckbox**。在我的模型中，这个 jcheckbox 在用户选择时加载`getValueAt`并使用该方法`setValueAt`。

在我按下确认按钮之前没有问题，当我选择的所有行（真值）消失并且循环没有读取任何具有真值的内容时。

我的错误在哪里？在按下确认按钮之前如何更新模型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:09:35.487

听起来您正在寻找：

```
table.putClientProperty("terminateOnFocusLost", true); 
```

这告诉表在焦点转移到外部时尝试提交任何正在进行的编辑，即转移到不是表子的组件。

# css - 如何使用 CSS 将 UpdateProgress 中心定位到 DIV？

> ID：12366832
> 
> 赞同：1
> 
> 时间：2012-09-11T09:38:37.430
> 
> 标签：css, ajax, updateprogress

我在用户控件中有一个 UpdatePanel 和 UpdateProgress。

用户控件的位置可以从后端控制。所以需要一个 css 使 ajax-loader.gif 位于我的用户控件的 Div id="main" 的中心。我该如何定位它？

现在，我使用下面的代码......

HTML 呈现：

```
 <div id="ctl00_ContentPlaceHolder1_ltlsectionRight2">

  <style type="text/css">
 #UpdateProgress1 {
 background-color:#CF4342;
   color:#fff;
   top:0px;
   right:0px;
   position:absolute;
   display:inline;
 }

#UpdateProgress1 img {
   vertical-align:middle;
   margin:2px;
 }
 </style>

<div style="visibility:hidden;display:block;" id="ctl00_ContentPlaceHolder1_GovermentSchemes_UpdateProgress1" role="status" aria-hidden="true">

        <img src="Images/ajax-loader.gif">

    </div>
<div class="title">
    <div class="title-text">
        <div class="title-text-brown">
            Assistance
        </div>
        <div class="title-text-white">
            Schemes</div>
    </div>
</div>
<div id="Main" class="green-box">
    <div class="box-content">
        <table>
            <tbody><tr>
                <td>
                </td>
            </tr>
            <tr>
                <td class="style3">
                    <div id="ctl00_ContentPlaceHolder1_GovermentSchemes_UP1">

                            <select style="width:208px;" id="ctl00_ContentPlaceHolder1_GovermentSchemes_ddlTypes" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$GovermentSchemes$ddlTypes\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$GovermentSchemes$ddlTypes">
            <option value="0" selected="selected">Select Type</option>
            <option value="17">type 1</option>
            <option value="19">type 2</option>

        </select>

    </div>
                </td>
            </tr>
            <tr>
                <td class="style3">
                    <div id="ctl00_ContentPlaceHolder1_GovermentSchemes_UP2">

                            <select style="width:208px;" id="ctl00_ContentPlaceHolder1_GovermentSchemes_ddlSchemes" onchange="javascript:setTimeout('__doPostBack(\'ctl00$ContentPlaceHolder1$GovermentSchemes$ddlSchemes\',\'\')', 0)" name="ctl00$ContentPlaceHolder1$GovermentSchemes$ddlSchemes">
            <option value="-1">Type is not selected</option>
            <option value="0" selected="selected">Select Scheme</option>

        </select>

    </div>
                </td>
            </tr>
            <tr>
                <td align="right">
                    <div id="ctl00_ContentPlaceHolder1_GovermentSchemes_UP3">

                            <a title="Select Type &amp; Schemes to view." disabled="disabled" id="ctl00_ContentPlaceHolder1_GovermentSchemes_HypView"><img src="uploadedimages/System/Static_Images/search_button.png"></a>

    </div>
                </td>
            </tr>
        </tbody></table>
    </div>
</div>

</div> 
```

* * *

ASPX 代码：

```
 <style type="text/css">
     #UpdateProgress1 {
       background-color:#CF4342;
       color:#fff;
       top:0px;
       right:0px;
       position:fixed;
     }

    #UpdateProgress1 img {
       vertical-align:middle;
       margin:2px;
     }
     </style>

    <asp:UpdateProgress ID="UpdateProgress2" runat="server" DynamicLayout="false">
            <ProgressTemplate>
            <div class="progress">
                   <img src="Images/ajax-loader.gif" />  
                    Please Wait...
             </div>
            </ProgressTemplate>
   </asp:UpdateProgress>

    <div id="Main">
    <table> 
                <tr>
                    <td class="style3">
                        <asp:UpdatePanel ID="UP1" runat="server">
                            <ContentTemplate>
                                <asp:DropDownList ID="ddlTypes" runat="server" AutoPostBack="true"  
                                    Width="208px" />
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </td>
                </tr>
                <tr>
                    <td class="style3">
                        <asp:UpdatePanel ID="UP2" runat="server">
                            <ContentTemplate>
                                <asp:DropDownList ID="ddlSchemes" runat="server" Width="208px" AutoPostBack="true"
                                    EnableViewState="true">
                                </asp:DropDownList>
                            </ContentTemplate>
                            <Triggers>
                                <asp:AsyncPostBackTrigger ControlID="ddlTypes" />
                            </Triggers>
                        </asp:UpdatePanel>
                    </td>
                </tr>
                <tr>
                    <td align="right">
                        <asp:UpdatePanel ID="UP3" runat="server">
                            <ContentTemplate>
                                <asp:HyperLink ID="HypView" runat="server"><img src="uploadedimages/System/Static_Images/search_button.png" /></asp:HyperLink>
                            </ContentTemplate>
                            <Triggers>
                                <asp:AsyncPostBackTrigger ControlID="ddlSchemes" />
                            </Triggers>
                        </asp:UpdatePanel>
                    </td>
                </tr>
            </table>
    </div> 
```

# iphone - Facebook API SDK 3.0“应用程序发生错误”

> ID：12366833
> 
> 赞同：2
> 
> 时间：2012-09-11T09:38:46.477
> 
> 标签：iphone, ios, facebook-graph-api, ios5

我正在与 facebook 进行 ios 集成，我刚刚添加了 Facebook 登录。我可以使用我的 Facebook 帐户登录，

但是我的朋友测试了它，当他尝试它时，它给了他一条错误消息，上面写着“发生错误。请稍后再试。”

但是，当我尝试使用自己的 Facebook 帐户登录时，我能够成功注册。所以我不确定出了什么问题。

有人可以给出任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:41:42.527

我的应用程序遇到了同样的错误，

我发现“沙盒模式”标志设置为 true，它导致了这个错误，它设置了只有开发人员可以使用那里的帐户登录，

将其设置为false，您就完成了！

也许它会帮助你:)

# mysql - 在 MySql 中按 AVG 和 COUNT 排序的最佳方法

> ID：12366834
> 
> 赞同：0
> 
> 时间：2012-09-11T09:38:48.807
> 
> 标签：mysql, optimization, indexing

[正如我在这里](https://stackoverflow.com/questions/12357075/advanced-rating-system-mysql-database-optimization)问的那样，我正在研究一个简单的评级系统

数据是半大的（100k 记录），我有一个具有这种结构的速率表：

```
CREATE TABLE IF NOT EXISTS `rates` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `rate` int(10) unsigned NOT NULL DEFAULT '0',
  `ip` int(10) unsigned DEFAULT NULL,
  `imageid` int(10) unsigned NOT NULL DEFAULT '0',
  `sdate` date DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `imageid` (`imageid`)
) 
```

它存储每个图像的用户比率。正如你所看到的，我只有一个用于另一个查询中的 OUTER JOIN 的表（imageid）的键......

但是在这个没有任何 JOIN 的简单查询中，我也有问题：

```
SELECT r.imageid,COUNT(r.id) as cnt,AVG(r.rate) AS arate,MAX(r.sdate) as lastdate  FROM rates r  GROUP BY r.imageid 
ORDER BY
arate DESC, cnt DESC,lastdate DESC 
```

解释说查询是**使用临时的；使用文件排序。**在我的大型数据库中，这是一个问题，这个问题蔓延到我的主要 JOIN 查询。

有没有办法在不排序的情况下获得字段的最高平均值？（它按 AVG 排序，不能使用索引）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:42:57.427

各种统计数据的共同优化 - 是预先计算。

当您需要 100% 的实际平均值时，这是非常罕见的。因此，只需将其预先计算到另一个表并立即获得结果。

实际状态可以通过触发器或调度来维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:42:17.257

我的意见 - 在表格图像中使用 - 字段 sum_rates 和 count_rates 以及每个比率 - 将比率添加到 sum_rates 并将 +1 添加到 count_rates。

如果您需要获得平均费率，您可以选择

```
select (sum_rates / count_rates)
from images 
```

这个查询必须更有效。

# caching - 如何在 ActionFilter 上获取呈现的 html

> ID：12366835
> 
> 赞同：1
> 
> 时间：2012-09-11T09:38:52.123
> 
> 标签：caching, asp.net-mvc-4, action-filter

我正在 ASP.NET MVC4 上创建一个 ActionFilter，我想将其用于缓存目的。

我的目标是如何在 OnActionExecuted（或其他地方）上获取最终呈现的 Html 并将其存储在缓存中。

我的问题是，当我阅读 httpcontext.response.output （流）时，它是只写的。

一些想法？

# android - 是否可以让使用 android 大屏设备的用户强制应用在 xlarge 屏幕模式下运行？

> ID：12366837
> 
> 赞同：0
> 
> 时间：2012-09-11T09:38:53.777
> 
> 标签：android, screen

我对在设备具有大屏幕时让应用程序以超大屏幕模式运行的可能性感兴趣。也就是说，用户可以在运行时决定在她的大屏幕设备上运行手机版本还是平板电脑版本。有人有想法吗？

最好的问候一梅

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:47:25.960

将此添加到您的 manifest.xml 中，以便您的屏幕大小可以调整。

```
 supports-screens android:resizeable="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:45:16.863

在 Android 框架中没有任何东西支持这种功能。您必须自己实现它，让用户选择一种类型，并根据他们的选择加载不同的 xml 布局资源。

例如。

如果用户选择 Tablet，则 load `"my_layout_tablet.xml"`，否则 load `"my_layout_phone.xml"`。

显然，在您需要为特定屏幕选择布局之前，您需要将他们的选择存储在首选项文件中并在每次加载应用程序时加载它

# java - log4j spring jdbc异常

> ID：12366844
> 
> 赞同：0
> 
> 时间：2012-09-11T09:39:31.953
> 
> 标签：java, database, logging, log4j, spring-jdbc

我遇到了 log4j 和 spring JDBC 的问题。我可能遗漏了一些东西，所以如果有误解，请不要犹豫纠正我。

我目前正在使用 log4j.xml 文件

```
 <appender name="console" class="org.apache.log4j.ConsoleAppender">
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %p %C{1}.%M - %m%n" />
    </layout>
</appender>
<appender name="stationPdf" class="org.apache.log4j.RollingFileAppender">
    <param name="File" value="./log/stationPdf.log" />
    <param name="Append" value="true" />
    <param name="MaxFileSize" value="5000KB" />
    <param name="MaxBackupIndex" value="3" />
    <layout class="org.apache.log4j.PatternLayout">
        <param name="ConversionPattern" value="%d %p %C{1}.%M - %m%n" />
    </layout>
</appender>

<category name="com.mypackage">
    <level value="debug" />
    <appender-ref ref="stationPdf" />
</category>
<category name="org.springframework.jdbc">
    <level value="debug" />
    <appender-ref ref="stationPdf" />
</category>
<root>
    <level value="debug" />
    <appender-ref ref="console" />
    <appender-ref ref="stationPdf" />
</root> 
```

如您所见，它主要是重定向特定文件中的所有内容。主要问题与spring jdbc有关。我正在使用一个小型数据库来存储属性，我需要连接到这个数据库来提取数据。

因此，当我输入密码错误时，如预期的那样，我会收到以下异常：

```
 Exception in thread "AWT-EventQueue-0" org.springframework.jdbc.CannotGetJdbcConnectionException: Could not get JDBC Connection; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: YES))
    at org.springframework.jdbc.datasource.DataSourceUtils.getConnection(DataSourceUtils.java:80)
    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:573)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:637)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:666)
    at org.springframework.jdbc.core.JdbcTemplate.query(JdbcTemplate.java:674)
    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:729)
    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:749)
    at com.mypackage.dao.impl.PropertiesDaoJdbcImpl.selectProperty(PropertiesDaoJdbcImpl.java:37)
    at com.mypackage.data.ExtractedDataClass.loadProperties(ExtractedDataClass.java:42)
    at com.mypackage.accueil.Accueil.<init>(Accueil.java:138)
    at com.mypackage.accueil.Accueil$12.run(Accueil.java:896)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
[...]
Caused by: org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: YES))
    at org.apache.commons.dbcp.BasicDataSource.createPoolableConnectionFactory(BasicDataSource.java:1549)
[...]

Caused by: java.sql.SQLException: Access denied for user 'root'@'localhost' (using password: YES)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4098)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4030)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:951)
    [...] 
```

问题是我无法在我的日志文件中得到这个异常。它出现在控制台中，但从未出现在我的文件中。我应该在 log4j.xml 文件中使用、添加或删除什么来获取这些异常？

提前致谢，

对不起我的近似英语:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:56:32.293

错误消息开始的事实

```
Exception in thread "AWT-EventQueue-0" 
```

表明它根本没有通过 log4j 记录，而只是出现在控制台上，因为每个 Java 线程默认获得的标准“未捕获异常”逻辑，这可以解释为什么你的 log4j 设置没有任何效果。您需要在自己的代码中的适当位置捕获异常并自己记录。

# javascript - 我应该为我的按钮元素指定 type="button" 有什么可能的原因吗？

> ID：12366845
> 
> 赞同：3
> 
> 时间：2012-09-11T09:39:34.523
> 
> 标签：javascript, jquery, html, css

我有我的小组开发的代码：

```
<button id="createLink" class="blue" type="button" title="Create Text"></button> 
```

有人可以给我一些建议吗？我的队友正在指定措辞 type="button"。如果这已经是一个按钮，那么为什么需要它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-11T09:40:43.463

默认情况下，`<button>`元素是`type="submit"`，而不是`type="button"`。

见[规格](http://www.w3.org/TR/html4/interact/forms.html#h-17.5)：

> type = submit|button|reset [CI]
> 此属性声明按钮的类型。可能的值：
> **submit**：创建提交按钮。这是默认值。
> **reset**：创建一个重置按钮。
> **button**：创建一个按钮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T09:42:27.737

按钮的默认类型是`submit`它会在单击时提交您的表单。所以如果你只想让它成为按钮，那么类型应该是`button`

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-11T10:08:36.100

type 属性指定按钮的类型。

通常我们指定以下任意三个属性：

属性值

1.  button : 该按钮是一个可点击的按钮

2.  submit : 该按钮是一个提交按钮（提交表单数据）

3.  reset ：该按钮是一个重置按钮（清除表单数据）

希望这有帮助！

# c# - 使用 ASP.NET 将 MSCharts 导出为 PPT 文件

> ID：12366846
> 
> 赞同：-2
> 
> 时间：2012-09-11T09:39:35.460
> 
> 标签：c#, asp.net

如何将 MSCharts 导出到`.ppt`使用 ASP.NET/C#？

我正在动态创建需要导出到的 mscharts `.ppt`。我可以`.pdf`使用 itextxharp 导出，但使用`.ppt`.

谁能告诉我导出的方式或者我们有任何第三方 DLL 可以这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T12:26:35.837

尝试将 mscharts 转换为图像，然后使用`Microsoft.Office.Interop.PowerPoint`dll 将这些图像添加到 ppt 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:02:04.083

我认为你需要嵌入到 PPT 文档中。

要将图像嵌入到 word 文档中，您可以查看[http://docx.codeplex.com/](http://docx.codeplex.com/)

这会给一些想法。不确定是否有其他 PPT 库。

# javascript - {{#each}} 内的车把助手

> ID：12366848
> 
> 赞同：8
> 
> 时间：2012-09-11T09:39:40.127
> 
> 标签：javascript, ember.js, handlebars.js

我尝试在`{{#each}}`循环中调用已注册的车把助手。不幸的是，Ember.js 抱怨，因为它试图将助手解析为控制器的属性而不是助手。

```
Handlebars.registerHelper('testHelper', function(name) {
    return 'foo: ' + name
}); 
```

（名称和内容只是显示示例的虚拟值）

```
{{#each entry in App.testController}}
   <div>{{{testHelper entry.name}}}</div>
{{/each}} 
```

Ember.js 打印的错误是：

```
Uncaught Error:  Handlebars error: Could not find property 'testHelper' on object <App.testController:ember254>. 
```

我如何需要调用已注册的助手以使其被识别？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-11T10:01:40.463

让它运行，无论是使用[这个解决方案](http://jsfiddle.net/CngTM/28/)，

**Javascript**

```
Handlebars.registerHelper('testHelper', function(property, options) {
  return 'foo: ' + Ember.get(options.data.view.content, property);
}); 
```

**车把模板**

```
<script type="text/x-handlebars" data-template-name='app-view'>
  <ul>
  {{#each entry in content}}
    <li>{{testHelper name}}</li>
  {{/each}}
  </ul>
</script>​ 
```

或者更好的是，有了这个：

**Javascript**

```
Handlebars.registerHelper('testHelper', function(property) {
  return 'foo: ' + Ember.get(this, property);
}); 
```

**车把模板**

```
<script type="text/x-handlebars" data-template-name='app-view'>
  <ul>
  {{#each entry in content}}
    {{#with entry}}
      <li>{{testHelper name}}</li>
    {{/with}}
  {{/each}}
  </ul>
</script>​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-29T18:16:34.843

如果您不想使用全局帮助器，则可以使用“路径查询”：

```
{{#each entry in App.testController}}  
   <div>{{{../testHelper entry.name}}}</div>  
{{/each}} 
```

`../`是路径查询的语法。它使您向上遍历范围树 1 级，并从父范围访问私有数据。要向上遍历 2 个级别，您可以执行以下操作`../../`。如果您有嵌套的 for 循环，这将很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-25T16:29:37.067

我的助手写在单独的文件中，所以我修改了@MikeAski 的答案如下。

在`helpers/my-helper.js`：

```
var MyHelper = function(value) {
    return moment(value).format("MMMM Do, YYYY");
};

export
default MyHelper; 
```

在顶部`app.js`：

```
// import modules
import myHelper from 'appkit/helpers/my-helper';

// register custom helpers
Ember.Handlebars.registerBoundHelper('myHelper', myHelper); 
```

然后你甚至不需要`{{#with}}`in 车把，只需用作普通助手即可。

```
{{#each thing}}
    {{myHelper thing.foo}}
{{/each}} 
```

# visual-studio-2010 - Visual Studio 102 错误

> ID：12366852
> 
> 赞同：1
> 
> 时间：2012-09-11T09:40:11.530
> 
> 标签：visual-studio-2010, visual-studio

我一直在 Visual Studio 2010 中平静地开发我的软件，但突然出现了这个新问题。

一旦我查看任何数据集的代码，我就会得到大量错误列表。然后我必须关闭并重新打开项目。如果我再次查看代码进行修改，102错误再次填满错误列表。

它们都是“未定义类型'XXX'”的那种，它们出现在我项目中各种.vb文件的.Designer.vb中。

这是一个截图 ![错误列表](../Images/cc0c580d984b15ad0649eb583ff8ffeb.png)

我已经安装了来自 Microsoft Update 的所有最新更新。我被困住了，不知道是什么原因造成的。

请在这方面帮助我。谢谢。

更新：我已经能够查明原因。以下自动生成的代码导致了问题。

```
Namespace Export.dsAirlinesTableAdapters
Partial Public Class AirlinesTableAdapter
' Remaining Code Here
End Class
End Namespace 
```

（export是我项目的名字）

如果我删除“导出”。从第一行开始，一切都很好了。我现在又恢复了平静，但仍然想知道问题的原因并在将来防止它。

# php - 服务器停止确认 php 更改

> ID：12366866
> 
> 赞同：0
> 
> 时间：2012-09-11T09:40:45.897
> 
> 标签：php, ajax, webserver, centos

我有一个执行此操作的 php 文件：

```
$recresults = array('dupes' => $result, 'total' => $number2);
header('Content-type: application/json');
echo json_encode($recresults); 
```

然后我将文件修改为：

```
$recresults = array('dupes' => $result, 'total' => $number2, 'thefield' => "WWW");
header('Content-type: application/json');
echo json_encode($recresults); 
```

但是当我检查谷歌开发工具，网络选项卡时，我发现它没有返回我添加的最后一个数组元素`thefield`。如果我尝试在我的 JavaScript 中使用该元素的变量，我会得到 undefined `data.thefield`。

因此，为了查看服务器是否正在确认更改，我尝试将代码更改为：

```
$recresults = array('dupes' => $result, 'total' => $number2, 'thefield' => "WWW");
echo ("WTF SERVER?"); 
```

我还删除`json`了我的 ajax 调用中的类型。好吧，在检查了我关于服务器不承认我对 php 文件的更改是正确的。返回代码仍然是`json`第一个代码集中的代码。我尝试了一个更改 php 文件名的老技巧。不工作。尝试重新启动服务器。没有骰子。

我能做些什么？服务器没有返回任何错误。

```
$.post(PROCESSORFILE, {"task": "csv_dedupe", "file_name": file_name, "column_dedupe":                                    elem}, function(data) {
                $("#message").replaceWith('<div id="message" class="nNote nSuccess hideit"><p><strong>CSV Deduped! </strong><span class="badge badge-important">' + data.thefield + '</span> duplicate<span class="label label-info"> ' + data.dupes+ '</span> found</p></div>')
            }); 
```

当我使用 json_encode 从 php 文件返回内容时，我将上面的 JS 更改`$.post()`为 type `json`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:52:23.580

尝试以下操作，根据变量的内容替换`?`为。`&``PROCESSORFILE`

```
var cacheBuster = new Date().getTime() + Math.round(Math.random()*100000);
$.post(PROCESSORFILE + "?t=" + cacheBuster, {"task": "csv_dedupe", "file_name": file_name, "column_dedupe": elem}, function(data) {
    $("#message").replaceWith('<div id="message" class="nNote nSuccess hideit"><p><strong>CSV Deduped! </strong><span class="badge badge-important">' + data.thefield + '</span> duplicate<span class="label label-info"> ' + data.dupes+ '</span> found</p></div>')
}); 
```

这是缓存破坏代码，以确保检索到 php 页面的新副本。

# android - EditText 缺少光标

> ID：12366867
> 
> 赞同：2
> 
> 时间：2012-09-11T09:40:49.210
> 
> 标签：android, cursor, android-edittext

我通过以下方式禁用了软键盘：`setInputType(InputType.TYPE_NORMAL)`查看`EditText`。正如我所料，键盘被禁用。视图上的光标也随之消失。

我想知道是否有办法在禁用键盘时让光标返回？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T11:35:06.893

这是 Android 报告的问题：

[http://code.google.com/p/android/issues/detail?id=27609](http://code.google.com/p/android/issues/detail?id=27609)

我在禁用软键盘以允许使用外部键盘时亲身经历过这种情况。在这种情况下，即使使用 setCursorVisible(true) ，如本问题的另一个答案中所述，我也无法恢复光标。

在对上述问题的评论中建议了一些解决方法，但它们似乎并非在所有情况下都有效。

我的测试表明，在我的 Nexus One 手机上的 Android 2.3.3 中不会出现该问题（当使用禁用软输入的蓝牙键盘时），在我的 Nexus 7 平板电脑上的 Android 4.3 中确实会出现同样的情况。这与上面链接的问题的评论一致，这表明该问题是在 Android 4.0 及更高版本中遇到的。

该问题的一位评论者报告说调用 setTextIsSelectable() 可以解决该问题，并且此方法的 Javadoc 显示它在 API 级别 11 及更高级别可用。这意味着它应该在所有出现问题的设备上都可用（因为 4.0 从 API 15 开始）。

因此，一种可能的方法是使用反射来测试此方法（或仅测试 API 的级别 >= 11），并在设备上可用时调用该方法。为此，您必须编译为 API >= 11（Eclipse 中的 Project / Properties / Android / Project Build Target - 可能只有最新的 API 效果最佳）并且必须将清单文件中的 targetSdkVersion 设置为至少11（同样，匹配您编译的 API 可能是最好的）。

有关选择性使用某些（但不是全部）应用程序被声明为支持的 API 级别可用功能的更多信息，请参阅此答案：

[Eclipse 中的“构建目标 SDK”和 AndroidManifest.xml 中的 android:targetSdkVersion 之间的区别？](https://stackoverflow.com/questions/8938348/difference-between-build-target-sdk-in-eclipse-and-androidtargetsdkversion-in/15402516#15402516)

我还没有尝试过这种方法，但打算最终。同时，如果其他人尝试过，请在下方添加评论，说明这是否是一个好的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:45:59.933

```
setCursorVisible(true) this can show the cursor!

android:cursorVisible="false" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-28T09:39:28.253

我遇到了同样的问题，所以我在清单文件中添加了以下内容并解决了问题。在您的活动中添加 windowSoftInputMode：

```
<activity
    android:name=".YourActivity"
    android:windowSoftInputMode="adjustPan">
</activity> 
```

# linux - 通过终端录制正在计算机上播放的音频

> ID：12366868
> 
> 赞同：0
> 
> 时间：2012-09-11T09:41:05.773
> 
> 标签：linux, macos, lame

我正在尝试录制从我在计算机上收听的任何内容输出的音频并将其保存到我的桌面。

我正在关注本教程 [http://jordilin.wordpress.com/2006/07/28/howto-recording-audio-from-the-command-line/](http://jordilin.wordpress.com/2006/07/28/howto-recording-audio-from-the-command-line/)

如果我运行我得到的 lame，我已经安装了 lame

```
/opt/local/bin/lame 
```

所以安装正确，但如果我尝试运行以下命令。

```
arecord -f cd -t raw | lame -x -r - out.mp3 
```

我得到下面的输出

```
-bash: arecord: command not found
Assuming raw pcm input file : Forcing byte-swapping
LAME 3.99.5 64bits (http://lame.sf.net)
Using polyphase lowpass filter, transition band: 16538 Hz - 17071 Hz
Encoding <stdin> to out.mp3
Encoding as 44.1 kHz j-stereo MPEG-1 Layer III (11x) 128 kbps qval=3 
```

我的桌面上有一个 834 字节的 mp3 文件，但没有播放我看到的任何内容

```
-bash: arecord: command not found 
```

但是当我在谷歌上安装记录时，我没有得到任何有用的东西？

有人可以指出我正确的方向吗

谢谢

哦，是的，我在 mac osx lion 上

# zend-framework - 自定义验证器在 Zend 中不起作用

> ID：12366870
> 
> 赞同：2
> 
> 时间：2012-09-11T09:41:13.933
> 
> 标签：zend-framework, zend-form, customvalidator

我有一个自定义验证器 NoOtherUsed: 检查电子邮件是否已被其他用户使用

```
class Toxter_Validate_NoOtherUsed extends Zend_Validate_Abstract
{
    protected $_parameters;
    protected $_messageTemplates = array();
    const ALREADY_USED = 'alreadyused';

    public function __construct($parameters) {
      $this->_parameters = $parameters;      
      $this->_messageTemplates[self::ALREADY_USED] =  $this->_parameters['message'];
   }

    public function isValid($value)
    {
        $db = Zend_Registry::get('db');
        $sql = 'SELECT * FROM '.$this->_parameters['table'].' WHERE '.
                $this->_parameters['query_field'].' != \''. $this->_parameters['query_value'].
                '\' AND '.$this->_parameters['field'].' = \''.$value.'\'';

        $stmt = $db->query($sql);
        $result = $stmt->fetchall();
        $rowCount = sizeof($result);

        if($rowCount > 0){
            $this->_error(self::ALREADY_USED);
            return false;
        }

        return true;
    }
} 
```

我以以下形式使用了这个验证器：

```
$this->createElement('text', 'email')
                        ->setLabel('Email')            
                        ->addValidator(new Zend_Validate_EmailAddress(), true)
                        ->addValidator(new Toxter_Validate_NoOtherUsed(array(
                            'table' => 'user',
                            'query_field' => 'id',
                            'query_value' => $currentUser->getRecord()->getId(),
                            'field' => 'email',
                            'message' => 'This email is used by another user'
                            )), true)
                        ->addValidator(new Toxter_Validate_NoOtherUsed(array(
                            'table' => 'email',
                            'query_field' => 'user_id',
                            'query_value' => $currentUser->getRecord()->getId(),
                            'field' => 'address',
                            'message' => 'This email is used by another user'
                        )), true)
                        ->addFilter(new Zend_Filter_StringTrim()) 
```

我使用了自定义验证器 2 次。我打算检查是否有其他用户使用此电子邮件并检查此电子邮件是否在电子邮件表上使用（包含所有电子邮件属于一个用户）。

问题是稍后的验证器将运行并正确检查，但另一个不会运行。所以我可以检查是否有用户使用了这封电子邮件，或者检查该电子邮件是否已经在其他人的电子邮件列表中。不能同时检查它们。

谁能给我一个理由？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:04:06.617

问题是附加到元素的验证器是由类名作为键的，所以第二个会覆盖第一个。

您需要做的是创建一个包含两个自定义验证器实例的验证器链，并将该链附加到您的元素。请参阅 ZF 问题跟踪器中此条目末尾的解决方法：

[[#ZF-6904] 同一类的两个验证器不能对表单中的一个字段使用两次以验证 db 中的两个值 - Zend Framework 问题跟踪器](http://framework.zend.com/issues/browse/ZF-6904)

感谢[JeremyKendall](https://twitter.com/jeremykendall)最初指出问题报告和解决方法。

# sql - 使用 LEN 的 ntext 字段的 SQL SUM

> ID：12366875
> 
> 赞同：2
> 
> 时间：2012-09-11T09:41:25.820
> 
> 标签：sql, sql-server-2008, sum, content-length

我想计算一`ntext`列中的字符数，然后得到`SUM`例如我有以下查询：

```
SELECT LEN(field1) AS Length, field1 
FROM table 
```

它将返回如下结果：

```
|Length|field1|
-------------------
  4     abcd
  6     abcdef
  4     abcd 
```

我现在想得到`SUM`Length 字段的。使用 MS SQL 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:43:25.400

最简单的解决方案是（*不使用子查询或任何其他可能降低性能的方法*）

```
SELECT SUM(LEN(field1)) AS totalLength
FROM table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:42:40.293

试试这个：

由于您使用的是 sql server 2008 ，因此您可以使用公用表表达式（CTE）：

```
;with cte as(
     SELECT LEN(field1) AS Length, field1 
     FROM table)
select sum(Length) as sumOfLenght from CTE 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:46:09.810

您可以先找到长度，然后找到该长度的总和......

```
SELECT SUM(LEN(field1)) FROM table 
```

# jpa - JPA Scheme Listener，有这样的东西吗？

> ID：12366876
> 
> 赞同：4
> 
> 时间：2012-09-11T09:41:27.413
> 
> 标签：jpa

您可以告诉 hibernate 或任何 JPA 实现为您创建方案，问题是如果您想使用默认初始记录填充表怎么办？

对于解决方案，在应用程序启动时，您可以检查表是否为空，然后创建记录，但我认为在创建方案后调用侦听器会更合适。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:38:17.420

如果您使用的是 Hibernate，您可以`import.sql`使用您的初始数据创建一个（例如在 src/main/resources 中）文件。在应用程序启动时，文件被 Hibernate 拾取并执行。

您还可以使用专门的工具来预填充（和清空）数据库，例如[DBUnit](http://www.dbunit.org/)或[Arquillian persistence extension](https://github.com/arquillian/arquillian-extension-persistence)。

至于最初的问题 - AFAIK 您只能访问 JPA 中的[实体生命周期事件](http://www.objectdb.com/java/jpa/persistence/event)。从理论上讲，它们可用于检查或更改表的内容，但这是一个坏主意。

编辑：数据库播种没有可访问的 JPA 标准。甚至[Pro JPA 2 书](https://rads.stackoverflow.com/amzn/click/com/1430219564)也建议使用 JDBC 设置进行播种。我认为您最好使用上述工具。我不知道像 Hibernate 那样对 EclipseLink 有任何播种帮助`import.sql`，但是[对于类似的解决方法有一些 DIY 建议](http://onpersistence.blogspot.de/2010/03/running-sql-script-on-startup-in.html)。我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T13:14:02.430

在 EclipseLink 中，您可以使用 SessionEventListener 在持久性单元启动时接收事件。

您可以使用持久性单元属性“eclipselink.session-event-listener”设置 SessionEventListener。您可以使用 postLogin 事件来填充您的表，或执行您自己的 DDL。

见， [http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/sessions/SessionEventAdapter.html](http://www.eclipse.org/eclipselink/api/2.4/org/eclipse/persistence/sessions/SessionEventAdapter.html)

# javascript - Javascript 验证问题

> ID：12366878
> 
> 赞同：0
> 
> 时间：2012-09-11T09:41:28.003
> 
> 标签：javascript, jquery, regex, validation

我在使用 javascript 验证某些字段时遇到了一些问题。我正在尝试测试一个名为 name of 30 characters max 的字段，John Smith、Paul M'Dougall Laura-Jane 都应该测试为真，但 gazz8932 应该测试为假。

EAID 最多应为 16 个字符 123kjg-34_dfs 应测试为真，但 *&$ 等应测试为假。

最后，网址应该来自 youtube.com 或 ea.com，但我不能打赌其中任何一个都可以工作。

如果可以提供任何光，将不胜感激......

```
// create the errors array
var errors = false;

// clean last errors
$('#goalsubmission p.error').remove();
$('#goalsubmission .error').removeClass('error');

// test the name
var reg = /^[a-z ,.'-]{0,30}/i;
var name = $('#goalsubmission input#name');
if(reg.test(name.val()) == false){
    name.parent().addClass('error');
    errors == true;
    name.parent().append('<p class="error">Make sure you have put your name using only letters and spaces.</p>');
} else {
    name.parent().removeClass('error');
}

/*
// test the email
var reg = /(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/;
var email = $('#goalsubmission input#email');
var result = reg.test(email.val());
if(email.val().length == 0 || result == false){
    email.parent().addClass('error');
    errors == true;
    email.parent().append('<p class="error">Make sure you have entered a valid email address.</p>');
} else {
    email.parent().removeClass('error');
}
*/

// test the ea id
var reg = /^[a-z0-9-_]{0,16}/i;
var eaid = $('#goalsubmission input#eaid');
if(reg.test(eaid.val()) == false){
    eaid.parent().addClass('error');
    errors == true;
    eaid.parent().append('<p class="error">Make sure you have entered a valid EAID.</p>');
} else {
    eaid.parent().removeClass('error');
}

// test the url
var regYT = /^http:\/\/(?:www\.)?youtube.com\/watch\?v=\w+(&\S*)?$/
var regEA = /^http:\/\/(?:www\.)?ea.com\/?$/
var url = $('#goalsubmission input#url');
if(
//                          url.val().length == 0 || 
//                          url.val().length > 255  || 
    (regYT.test(url.val()) == false && regEA.test(url.val()) == false)
){
    url.parent().addClass('error');
    errors == true;
    url.parent().append('<p class="error">Make sure you have entered a valid Url, from either YouTube or EA.</p>');
} else {
    url.parent().removeClass('error');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:52:51.457

您需要**`$`**在末尾标记正则表达式，以便它不匹配表达式之外的任何内容。这样，您将匹配`"Paul"`，但不会`"Paul123"`使用以下表达式：

```
var reg = /^[a-z ,.'-]{0,30}$/i; 
```

同样的事情发生在`eai`：

```
var reg = /^[a-z0-9-_]{0,16}$/i; 
```

# c++ - 更改光标隐藏光标

> ID：12366881
> 
> 赞同：3
> 
> 时间：2012-09-11T09:41:32.623
> 
> 标签：c++, qt, winapi

在我的 Qt 应用程序中，我正在关闭应用程序时保存一些数据。保存数据在 closeEvent(QCloseEvent*) 方法中执行。我想在保存数据之前更改光标并在保存后将其恢复。

根据我在 Internet 上阅读的内容，setCursor( const QCursor& ) 不能在全局范围内工作，而只能在某些指定小部件的范围内工作。因此我尝试使用 WinAPI 中的 SetCursor( HCURSOR )。

代码如下所示：

```
void mainWin::closeEvent( QCloseEvent* e ) {
    SetCursor( LoadCursor( GetModuleHandle( NULL ), ( LPCWSTR )IDC_WAIT ) );
    saveData();
    SetCursor( LoadCursor( GetModuleHandle( NULL ), ( LPCWSTR )IDC_ARROW ) );
    e->accept();
} 
```

但是，第一个 SetCursor() 方法只是在数据保存时隐藏光标，而不是将其更改为某种沙漏。为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:46:46.817

您应该使用`QApplication::setOverrideCursor`，它会为您的整个应用程序更改光标。

```
QApplication::setOverrideCursor(QCursor(Qt::WaitCursor));
saveData();
QApplication::restoreOverrideCursor(); 
```

您当然可以在创建光标时提供自己的像素图。您可以做的另一件有趣的事情是创建一个 RAII 类来处理自定义光标。你`setOverrideCursor`在构造函数中调用，`restoreOverrideCursor`在析构函数中调用。当您有很多地方要更改光标并在范围末尾自动恢复时，这样做非常方便。另一个优点是，如果您的`saveData`方法抛出，您的光标无论如何都会重置，这非常好。

# cassandra - Cassandra 客户端未显示通过 json2sstable 所做的更改

> ID：12366884
> 
> 赞同：3
> 
> 时间：2012-09-11T09:41:48.987
> 
> 标签：cassandra, datastax-enterprise

我已经使用 Cassandra sstable2json 实用程序将 sstable 转换为 Json 文件，然后修改了一些行值，现在我调用了实用程序 json2sstable。Utlity json2sstable 使用以下命令成功执行。

命令：

```
bin/json2sstable -s -K UserDemo -c Users Users.json /opt/dse-2.1/dse-data/UserDemo/Users-hd-1-Data.db 
```

我试图查看更改是否反映或不使用 cassandra 客户端。注意到更改没有反映我使用 json2sstable 实用程序所做的事情。

我尝试使用 nodetool 刷新 CF 用户，但没有发现任何变化。

请就没有反映在 cassandra 中的原因提出建议。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:00:55.537

JSON 导入/导出确实是为了调试；如果您尝试进行某种批量加载，请查看 cqlsh `COPY FROM`（从 1.1.2 开始）或 sstableloader 工具。

也就是说，如果您手动注入新的 sstables，则需要调用 ColumnFamilyStore.loadNewSSTables 方法。这不会通过 nodetool 公开。（记住：用于调试。）您需要使用 jvisualvm 或类似的方法调用它。

# jquery - JQuery 下拉鼠标悬停

> ID：12366889
> 
> 赞同：1
> 
> 时间：2012-09-11T09:41:57.643
> 
> 标签：jquery, css, drop-down-menu

我想我有一个简单的问题，但我看不到解决方案。当我用鼠标输入“one”-div（仅菜单顶部！）时，它会正确展开，但如果我将鼠标移出“one”-div，它会崩溃，但它不应该！我放了我的 JS 文件，如果我鼠标离开“ **oneX** ”-div（菜单点的容器！） ，它应该首先崩溃

这里的代码：HTML

```
<div id="root">
            <div style="height:50px;width:100%;"></div>
                <div id="one" class="menuTop">
                    <div style="clear:both;position:absolute;">
                        <div id="oneX" class="menuPointCon">
                            <div class="menuTopHover">Oh shit</div>
                            <div class="menuPoint">awefwafe</div>
                            <div class="menuPoint">wqdwaed</div>
                            <div class="menuPoint">gsregser</div>
                        </div>
                    </div>
                </div>
                <div id="two" class="menuTop">
                    <div style="clear:both;position:absolute;">
                        <div id="twoX" class="menuPointCon">
                            <div class="menuTopHover">Oh shit</div>
                            <div class="menuPoint">awefwafe</div>
                            <div class="menuPoint">wqdwaed</div>
                            <div class="menuPoint">gsregser</div>
                        </div>
                    </div>
                </div>
                <div id="three" class="menuTop">
                    <div style="clear:both;position:absolute;">
                        <div id="threeX" class="menuPointCon">
                            <div class="menuTopHover">Oh shit</div>
                            <div class="menuPoint">awefwafe</div>
                            <div class="menuPoint">wqdwaed</div>
                            <div class="menuPoint">gsregser</div>
                        </div>
                    </div>
                </div>
            </div>
        </div> 
```

CSS

```
#root {
    width:600px;
    height:300px;
    background-color:red;
}
.menuTop {
    float:left;
    width:200px;
    height:50px;
    background-color:blue;
}
.menuPointCon {
    position:relative;
    background-color:green;
    display:none;
}
#one {
}
#two {
}
#three {
}
#oneX{
}
#twoX{
}
#threeX {
}
.menuTopHover {
    position:relative;
    width:200px;
    height:50px;
    color:white;
}
.menuPoint {
    position:relative;
    width:200px;
    height:50px;
    color:white;
} 
```

jQuery / JS

```
$(document).ready(function(){
    $("div#one").mouseenter(function() {
        $("div#oneX").slideDown("normal");
    });
    $("div#oneX").mouseout(function() {
        $("div#oneX").slideUp("normal");
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:45:58.607

我认为你应该使用`mouseleave()`而不是`mouseout()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:44:47.203

试试这个

```
$(document).ready(function(){
$("div#one").mouseover(function() {
    $("div#oneX").slideDown("normal");
});
$("div#oneX").mousedown(function() {
    $("div#oneX").slideUp("normal");
   });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:47:45.440

试试这个
工作演示链接[http://codebins.com/bin/4ldqp7d](http://codebins.com/bin/4ldqp7d)

```
$("div#one").mouseenter(function() {
        $("div#oneX").slideDown("normal");
    });
    $("div#oneX").mouseleave(function() {
        $("div#oneX").slideUp("normal");
    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:51:03.970

像这样给

```
$("div#one").mouseenter(function() {
    $("div#oneX").slideDown("normal");
});
$("div#oneX").mouseleave(function() {
    $("div#oneX").slideUp("normal");
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T09:53:23.280

## *[jsBin 演示](http://jsbin.com/uxobiw/3/edit)*

```
$(".menuTop").on('mouseenter mouseleave',function( e ) {
    var $ch = $(this).find('.menuPointCon');
    var evt = e.type=='mouseenter' ? $ch.slideDown() : $ch.slideUp();
}); 
```

# python - django 的 Bootstrap 预输入

> ID：12366893
> 
> 赞同：-5
> 
> 时间：2012-09-11T09:42:05.243
> 
> 标签：python, django, twitter-bootstrap, typeahead

我在我的应用程序中使用 twitter 引导程序。我想在我的应用程序中使用预输入。我怎样才能做到这一点？

内森

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T04:39:21.803

见工作演示：[http ://codebins.com/bin/4ldqp7b#](http://codebins.com/bin/4ldqp7b#)

请研究这个链接

[http://twitter.github.com/bootstrap/javascript.html#typeahead](http://twitter.github.com/bootstrap/javascript.html#typeahead)

你必须使用 jquery、Bootstrap js、Bootstrap css 来实现 typehead。我已经完成了工作演示，`data-source`应该是您的选择。

# java - 在android中扫描条码

> ID：12366900
> 
> 赞同：1
> 
> 时间：2012-09-11T09:42:26.660
> 
> 标签：java, android, barcode-scanner

当我运行应用程序时，它被强制关闭。如何扫描二维码？我需要在我的 android 应用程序中实现条形码扫描仪。这里我的控制台上出现以下错误。如何清除此错误？.. .这里还添加了zxing(code.jar) jar 文件。我使用了以下代码：

```
 public class Main extends Activity {
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    HandleClick hc = new HandleClick();
    findViewById(R.id.butQR).setOnClickListener(hc);
    findViewById(R.id.butProd).setOnClickListener(hc);
    findViewById(R.id.butOther).setOnClickListener(hc);
  }
  private class HandleClick implements OnClickListener{
    public void onClick(View arg0) {
      Intent intent = new Intent("com.google.zxing.client.android.SCAN");
      switch(arg0.getId()){
        case R.id.butQR:
          intent.putExtra("SCAN_MODE", "QR_CODE_MODE");
        break;
        case R.id.butProd:
          intent.putExtra("SCAN_MODE", "PRODUCT_MODE");
        break;
        case R.id.butOther:
          intent.putExtra("SCAN_FORMATS", "CODE_39,CODE_93,CODE_128,DATA_MATRIX,ITF,CODABAR");
        break;
      }
      startActivityForResult(intent, 0);    //Barcode Scanner to scan for us
    }
  }
  public void onActivityResult(int requestCode, int resultCode, Intent intent) {
    if (requestCode == 0) {
      TextView tvStatus=(TextView)findViewById(R.id.tvStatus);
      TextView tvResult=(TextView)findViewById(R.id.tvResult);
      if (resultCode == RESULT_OK) {
        tvStatus.setText(intent.getStringExtra("SCAN_RESULT_FORMAT"));
        tvResult.setText(intent.getStringExtra("SCAN_RESULT"));
      } else if (resultCode == RESULT_CANCELED) {
        tvStatus.setText("Press a button to start a scan.");
        tvResult.setText("Scan cancelled.");
      }
    }
  }
} 
```

我的控制台显示以下错误：

```
 09-06 00:56:36.198: D/AndroidRuntime(5417): Shutting down VM
      09-06 00:56:36.198: W/dalvikvm(5417): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
      09-06 00:56:36.208: E/AndroidRuntime(5417): FATAL EXCEPTION: main
      09-06 00:56:36.208: E/AndroidRuntime(5417): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.google.zxing.client.android.SCAN (has extras) }
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1408)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.app.Instrumentation.execStartActivity(Instrumentation.java:1378)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.app.Activity.startActivityForResult(Activity.java:2817)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at biz.tekeye.scanbarcode.Main$HandleClick.onClick(Main.java:33)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.view.View.performClick(View.java:2408)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.view.View$PerformClick.run(View.java:8816)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.os.Handler.handleCallback(Handler.java:587)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.os.Handler.dispatchMessage(Handler.java:92)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.os.Looper.loop(Looper.java:123)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at android.app.ActivityThread.main(ActivityThread.java:4627)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at java.lang.reflect.Method.invokeNative(Native Method)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at java.lang.reflect.Method.invoke(Method.java:521)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
      09-06 00:56:36.208: E/AndroidRuntime(5417):   at dalvik.system.NativeStart.main(Native Method)
      09-06 00:56:38.359: I/Process(5417): Sending signal. PID: 5417 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:45:05.677

只需安装一个可以处理该意图的应用程序（Zxing）。

此外，捕获该异常并提示用户安装所述应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:45:21.823

乍一看，您似乎还没有在手机上安装[ZXing Barcode Scanner](https://play.google.com/store/apps/details?id=com.google.zxing.client.android#?t=W251bGwsMSwxLDIxMiwiY29tLmdvb2dsZS56eGluZy5jbGllbnQuYW5kcm9pZCJd)应用程序。

您可以使用市场链接将用户引导至市场中的应用程序，如下所示：[在 Android 上以编程方式安装应用程序](https://stackoverflow.com/questions/4604239/install-application-programmatically-on-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T11:16:45.847

迄今为止最好的解决方案是使用`IntentIntegrator`项目提供的。它不仅处理安装应用程序，还处理其他小问题。

[http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration](http://code.google.com/p/zxing/source/browse/trunk#trunk%2Fandroid-integration)

# ruby-on-rails - 开源项目学习 CanCan gem

> ID：12366909
> 
> 赞同：-2
> 
> 时间：2012-09-11T09:43:02.217
> 
> 标签：ruby-on-rails, cancan

有没有完全实现 Can Can 的好的开源项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T04:18:17.933

试试[rails app composer](http://railsapps.github.com/rails-composer/)脚本。这很棒。您可以使用 devise、rolify、cancan、rspec 等设置功能齐全的应用程序。只需运行脚本，回答问题，它就会为您生成应用程序。然后你可以四处逛逛，看看它是如何实现的。

您还可以在 cancan 上观看此[RailsCast](http://railscasts.com/episodes/192-authorization-with-cancan)并下载示例源代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T04:23:01.407

对于 Rails 3.2+，使用 rails composer 工具：

[http://railsapps.github.com/rails-composer/](http://railsapps.github.com/rails-composer/)

# database - 排序键/值数据库解决方案

> ID：12366912
> 
> 赞同：2
> 
> 时间：2012-09-11T09:43:09.077
> 
> 标签：database, redis, key-value-store

我正在寻求实现一个数据库解决方案，以支持对一组简单的 2D 数据集进行非常快速的基于列的访问。即考虑这个数据集

```
==========================================================
                     SOME DATASET1
==========================================================
   ENTRY     |    Col1   |   Col2  |    Col3    ... Coln
----------------------------------------------------------
   ENTRY A        1.1        0.2         5.5       6.2
   ENTRY B        2.3        6.4         1.5       1.1
   ENTRY C        2.2        4.2         9.5       3.4
   ENTRY D        2.3        1.1         5.5       2.9
   ENTRY E        9.1        3.6         7.5       2.6 
```

我需要的是一种简单地选择 column1、column2 或 column n 中的所有值，同时保留排序顺序的方法。我最初的想法是使用 redis，具有以下键空间设计：

```
 SOMEDS1/COLUMNS/           =>     Col1, Col2, Col3 ... Coln
   SOMEDS1/ENTRIES/           =>     A, B, C, D, E
   SOMEDS1/Col1/              =>     1.1, 2.3, 2.2, 2.3, 9.1
   SOMEDS1/Coln/              =>     ...... 
```

这种设计背后的原理是每个列表中的条目数量不大，可能< 10,000，但可能有很多列，并且在给定时间只需要选定的列。

我的问题是有没有人已经实现了这样的东西，如果有的话，你能建议最合适的数据库类型吗？我最初的想法是使用 redis，但我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:18:06.887

您没有指定是否需要对数据存储进行本地或远程访问。如果你需要远程访问，那么 Redis 可能是一个非常好的解决方案。如果您的访问纯粹是本地的，那么嵌入式数据库（例如 BerkeleyDB）可能会更有效。

重点是定义数据的维护方式：是否只能在数据结构的末尾添加新条目？如果是，Redis 列表将飞来存储您的列。如果不是这样，将您的数据保持在每列的哈希对象（关联的条目和值）中可能会更好。如果条目数很少，那么在客户端检索后对数据进行排序无论如何都很便宜。

这种设计类似于您可以在某些列式数据库中找到的实现。这种方法的主要好处是系统可以以高压缩率压缩给定列的值，这在数据量很大时很有趣。缺点是数据的实时维护比较困难。对于 MySQL 的示例，您可能想看看[Infobright](http://en.wikipedia.org/wiki/Infobright)或[Calpont](http://en.wikipedia.org/wiki/Calpont)产品。

在您的情况下，如果数据量有限，Redis 非常适合。[但是请注意，当条目数量变得很大（即超过此处](http://redis.io/topics/memory-optimization)描述的阈值）时，这些数据在内存中的表示将不会特别紧凑（涉及指针、双链表和/或哈希表）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T16:02:43.760

我像这样在 Redis 中存储数据：

字符串：

```
Entry:A:Col1 => 1.1
Entry:A:Col2 => 0.2
Entry:A:Col3 => 5.5
...
Entry:A:ColN => 6.2 
```

您可以使用无限数量的列（受物理内存限制）

# wordpress - 在#wpcontent 之前在管理面板中嵌入图像或 div 标签

> ID：12366913
> 
> 赞同：0
> 
> 时间：2012-09-11T09:43:19.410
> 
> 标签：wordpress, wordpress-theming

我想在管理面板中嵌入具有固定宽度的图像或 div 标签，以设置最小宽度。像这样的东西，

```
<div style="width:1000px; height:0px; border:0px;"></div> 
```

我找不到合适的钩子。此页面[http://codex.wordpress.org/Plugin_API/Action_Reference](http://codex.wordpress.org/Plugin_API/Action_Reference)列出了可用的钩子，我尝试了其中的一些，包括`wp_before_admin_bar_render`, `wp_after_admin_bar_render`。但是嵌入图像为时已晚，因为`#wpcontent`已经加载和渲染。我也尝试过`admin_head`，但嵌入图像还为时过早；宽度没有任何影响。我需要将图像放在#wpcontent 的 div 元素之前。我猜是在渲染左侧菜单之后。

可能吗？

直接在样式表中为 #wpcontent 指定宽度在不同的 WordPress 版本中并不成功。所以我正在寻找替代品。感谢您的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T15:03:57.760

你试过这个吗？

```
add_action('in_admin_header'); 
```

或者这些……

```
add_action('network_admin_notices');
add_action('user_admin_notices');
add_action('admin_notices');
add_action('all_admin_notices'); 
```

但我更喜欢第一个，因为其他的都是留作通知的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:58:14.763

It seems the problem was not the timing of when it is inserted but the style of the div tag. Since the purpose of this is to create a minimum width in the admin panel, the `border:0px` does not create a solid element. Therefore, the browser seems to ignore it.

Inserting this worked.

```
<div id="min-width" style="width:1000px; height:0px; border:1px; border-style:solid; border-color: rgba(0,0,0,0);"></div> 
```

This is the sample plugin which demonstrates how to do it.

```
<?php
    /* Plugin Name: Sample Embed Image for Admin Page Width  */

    add_action('plugins_loaded', create_function('', 
        '$o = new AdminPageClass_EmbedImage("Sample Embed Image in Admin Panel"
                , "Sample Embed Image in Admin Panel"
                , "manage_options"
                , "sample_embed_image_in_admin_panel");
        '));

    class AdminPageClass_EmbedImage {

        function __construct($title, $menuname, $privilege, $pageslug) {
            $this->title = $title;
            $this->menuname = $menuname;
            $this->privilege = $privilege;
            $this->pageslug = $pageslug;
            add_action('admin_menu', array(&$this, 'admin_menu'));  
            add_action('wp_before_admin_bar_render', array(&$this, 'embed_image')); // inserts it between #wpcontent and #wpadminbar
            // add_action('in_admin_header', array(&$this, 'embed_image')); // inserts it between #wpadminbar and #wp-body which is after #wpcontent
            // add_action('network_admin_notices', array(&$this, 'embed_image')); // no insertion
            // add_action('user_admin_notices', array(&$this, 'embed_image')); // no insertion
            // add_action('admin_notices', array(&$this, 'embed_image')); // inserts it after #screen-meta inside #wpbody-content which is inside #wp-content
            // add_action('all_admin_notices', array(&$this, 'embed_image')); // same as 'admin_notices'
        }
        function admin_menu() {
            add_options_page($this->title, $this->menuname, $this->privilege, $this->pageslug, array(&$this, 'admin_page'));
        }
        function embed_image() {
            ?>
            <div id="min-width" style="width:1000px; height:0px; border:1px; border-style:solid; border-color: rgba(0,0,0,0);"></div>
            <?
        }
        function admin_page() {
            // $this->embed_image();
            ?>
            <div class="wrap">
                <h1>Hi there</h1>
                <?php // $this->embed_image(); ?>
                <p>Hello World!</p>
            </div>
            <?php
        }
    } 
```

# wso2 - 从模板 Wso2 ESB 创建代理服务

> ID：12366915
> 
> 赞同：0
> 
> 时间：2012-09-11T09:43:21.110
> 
> 标签：wso2, wso2esb, esb, wso2carbon

**是否可以创建自己的模板来创建新的代理服务？**

我想为使用自定义模板创建的每个新代理添加一个 inSequence（“mySequence”），比如说“mytemplate”。它与许多新代理中的序列相同

我在哪里可以找到现有的模板？我怎样才能创建一个？

请帮忙

**编辑：**如何为代理服务创建模板的任何示例？ ![在此处输入图像描述](../Images/0006a586d5ba6d8a7b596f45ed027df7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:51:21.620

有关 WSO2 ESB 模板的详细信息，请参见 [1]

[1] [http://docs.wso2.org/wiki/display/ESB402/Templates](http://docs.wso2.org/wiki/display/ESB402/Templates)

问候，/女娲

# iphone - iphone - 我应该依靠 NSManagedObjectId 在上下文之间交换 NSManagedObject 吗？

> ID：12366919
> 
> 赞同：1
> 
> 时间：2012-09-11T09:43:28.270
> 
> 标签：iphone, performance, core-data, nsoperation, nsoperationqueue

这是一个`design question`，以下是我的问题的背景。

* * *

## 问题

我正在写一个新闻应用程序。

我从一个提要下载了一些新闻项目（一个项目有标题、内容、图像等）。然后我将所有项目存储到一个`CoreData db`.

同时，我可能会从数据库中获取项目并在 UI 上显示它们。

我了解 CoreData 数据库操作（尤其是在繁重的情况下）可能会影响和滞后 UI，因此我想将所有 CoreData 操作放入`NSOpeartionQueue`最低线程优先级。例如，一个典型的操作可能是获取一个提要的所有项目并使它们为 UI 做好准备。

由于 CoreData 不是线程安全的，并且操作和主线程中的上下文不同，**所以问题来了：如何将这些项目提供给主线程，以便主线程可以相应地更新 UI？**

* * *

## 提议

我有两种可能的解决方案。

*第一个解决方案*是，**对于每个 NSManagedObject 项目，我创建一个与任何上下文无关的新项目，**然后将所有新闻项目返回主线程。然后主线程使用这些新项目作为使用非 NSManagedObject。该解决方案有一个缺点：内存成本。我必须将所有获取的项目的内存加倍。

*第二种解决方案*是，在 NSOperation 中获取时，除了这些项目的 objectId 之外，我不获取任何其他内容。然后**将所有 objectIds 交给主线程，主线程可以从自己的上下文中读取所有真正的 NSManagedObject 项**。此解决方案也有一个缺点：UI 可能滞后。由于读取db真的会在主线程中再次发生，我担心读取会影响UI。

* * *

**任何人都可以给我一些建议吗？**

谢谢

# twitter-bootstrap - twitter bootstrap 在导航栏中显示当前登录的用户标签垂直对齐

> ID：12366921
> 
> 赞同：0
> 
> 时间：2012-09-11T09:43:33.573
> 
> 标签：twitter-bootstrap, vertical-alignment, navbar

使用以下示例：http: [//jsfiddle.net/n7cbh/1/](http://jsfiddle.net/n7cbh/1/)

为了正确对齐navitems +用户标签+注销按钮，我们需要更改什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:58:57.693

表单内的按钮很棘手。向按钮添加类`.pull-right`将修复垂直对齐。

# c# - 从同一台机器上的其他进程访问 outproc COM 服务器中的 c# 对象

> ID：12366922
> 
> 赞同：1
> 
> 时间：2012-09-11T09:43:34.340
> 
> 标签：c#, serialization, com, com-interop, out-of-process

我试图从另一个进程访问 C# 对象，而不是它们通过 COM 所在的进程。C# 对象向 COM 公开。

问题是，当我在这些对象上调用方法时，这些调用是在本地执行的，而不是在我希望这些调用的副作用发生的 outproc COM 服务器上。

更准确地说，这是我在尝试访问驻留在 outproc COM 服务器中的对象的过程中所做的：

```
Type oType = Type.GetTypeFromProgID("myProgId");

var obj = Activator.CreateInstance(oType);

var result = oType.InvokeMember("GetObjForMyClassMethod",
                                BindingFlags.InvokeMethod, null, obj, null); 
```

然后我将结果转换为 C# 类的适当接口 ( `IMyInterface`)，当我调用该接口的方法时，它们会像我期望的那样在 outproc COM 服务器上远程执行。

当我使用该接口检索其他 C# 对象（我使用`IMyInterface.GetOtherObject()`返回的方法`IOtherObjectInterface`）时，问题就开始了。

当我调用 on 时`IOtherObjectInterface`，它们在本地执行，而不是在 outproc COM 服务器上执行，因此它们的副作用会丢失（例如，如果我调用 SetValue 方法，则值不会到达 outproc 服务器并丢失）。

此外，当我在运行时查看调试器时，我看到远程调用工作的`System._ComObject`接口类型是远程调用不起作用的接口类型是实际类型（`IOtherObjectInterface`）。

我试图复制关于方式`IMyInterface`（远程调用工作的那个）暴露给COM `IOtherObjectInterface`（远程调用不起作用的那个）的所有内容（所有属性和其他实现的接口），但没有运气。

必须做什么才能使我进行的调用`IOtherObjectInterface`通过 RPC 在 outproc 服务器中执行，而不是在对任何人都没有用处的本地进程（发出调用的进程）中执行？

**编辑**：

从那以后我发现，如果我`IOtherObjectInterface`使用与它工作的对象相同的方法（oType.InvokeMember（“GetOtherObjForMyClassMethod”，....）检索它不起作用的对象（）不起作用（我对对象进行的调用仍未转发到 outproc COM 服务器）。

所以问题出在类本身，而不是用于检索对象的方法。

我强烈怀疑这个问题在某种程度上与序列化有关，即使两个类（工作和不工作）似乎都以相同的方式实现序列化......

**编辑2：**

我没有得到的部分是这个“COM远程处理”工作的类（当我在COM服务器外部检索对象时获得System._ComObject的类）具有“可序列化”属性。我认为具有此属性的类型的默认值是按值封送。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:06:59.907

You have confirmed, I think, that `IMyInterface.GetOtherObject()` executes remotely, and your question is why the object returned to your calling code is a concrete instance of the .NET type implementing `IOtherObjectInterface`, rather than being a `System._ComObject` or something else which would cause method calls on that object to be remoted.

The answer must be that `IMyInterface.GetOtherObject()` instantiates the "OtherObject" and then when it returns, that instance is being marshalled to your calling process. This will happen by default if the object is of a serializable .NET type.

I think that if the object were a `MarshalByRefObject`, it wouldn't be marshalled back to the calling process: the calling code would receive instead a TransparentProxy and then calls on it would be remoted as you expect.

The original (`IMyInterface`) object is a special case because the calling code itself instantiates this, using the Activator and a Type derived from the ProgID, with the assistance (under the hood) of the COM Runtime, resulting in the special proxy type _ComObject.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T12:48:14.080

您可以做的是在组件服务控制台中创建一个新应用程序，并声明它是一个进程外应用程序。为此，您需要

1.  创建一个新的应用程序
2.  右键单击此应用程序
3.  转到“激活”选项卡，然后选择“服务器应用程序”
4.  将您的 DLL 添加到此应用程序

您可能必须配置安全性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:48:17.640

您需要按照 Marc 在此处的回答使用 ServicedComponent：

[在 C#/.Net 中创建进程外 COM？](https://stackoverflow.com/questions/446417/create-out-of-process-com-in-c-net)

# drop-down-menu - 选项卡窗格中的引导按钮下拉菜单导致溢出

> ID：12366923
> 
> 赞同：8
> 
> 时间：2012-09-11T09:43:36.563
> 
> 标签：drop-down-menu, twitter-bootstrap, overflow

我正在使用 Bootstrap，并在包含按钮下拉菜单的选项卡窗格中嵌入了一个表单。有时下拉列表中的项目数量会超出选项卡窗格的高度。我总是可以增加选项卡窗格的最小高度，但这个解决方案是 hackish。我在这里有一个示例 jsfiddle：

[http://jsfiddle.net/Sudp7/1/](http://jsfiddle.net/Sudp7/1/)

在其中，您可以看到下拉菜单如何在选项卡窗格的底部被剪裁。有没有办法让下拉菜单溢出其父容器的高度？我尝试使用 z-index 和 overflow-y 属性无济于事。任何提示将不胜感激。

谢谢，理查德

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-11T15:50:43.207

如果更改`overflow`是您的选择，那么正确的选择器是`.tab-content`

```
.tab-content {
    overflow: visible;
} 
```

# ruby - 如何将 Eclipse 用于 Ruby on Rails (RoR)

> ID：12366924
> 
> 赞同：32
> 
> 时间：2012-09-11T09:43:37.800
> 
> 标签：ruby, eclipse, eclipse-plugin, ruby-on-rails-3.2

我是 Ruby 的新手。我已经在 Windows 7 上安装了 Ruby on Rails。我访问了以下内容以选择合适的 IDE/Editor 来编写 Ruby 代码：

[http://rubyonrails.org/download](http://rubyonrails.org/download)

我找到了以下 Ruby 编辑器：

用于 Rails 的 VIM、RadRails、RubyMine、3rd Rail、用于 Ruby 的 Netbeans

我熟悉 Eclipse，因为我正在使用 Eclipse for java。我可以将 Eclipse 用于 Ruby 吗？如果是这样，Eclipse 中对于 Ruby 项目需要什么配置？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-07-24T01:57:21.533

为了节省您的一些跑腿工作，在 Eclipse 中：

1.  转到帮助 -> 安装新软件...
2.  单击添加（弹出窗口的右上角）
3.  输入名称，例如“RadRails2”
4.  输入位置为[http://download.aptana.com/tools/radrails/plugin/install/radrails-bundle](http://download.aptana.com/tools/radrails/plugin/install/radrails-bundle)（对于完整的 Aptana studio Studio 3，请输入[http://download.aptana.com/studio3/plugin/安装](http://download.aptana.com/studio3/plugin/install)）
5.  点击确定
6.  重启 Eclipse
7.  转到窗口-> 首选项。您将在左侧面板中看到 Ruby

你完成了...

现在，当您使用“新建”菜单时，您可以选择创建一个 Ruby 项目（除其他外）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-21T07:07:55.970

I am using Eclipse Luna and installed Ruby(DLTK) 5.0 kepler from Eclipse Marketplace. I just imported my existing Rails project and seeing it working well with this. I am still exploring it. Hope that helps.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-10T12:36:28.103

您需要安装 aptana sudio eclipse 插件，并且将包含 radrails。

请参阅此[无法在 Eclipse 4.2 上安装 Aptana 插件](https://stackoverflow.com/questions/11404760/cannot-install-aptana-plugin-on-eclipse-4-2)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-01T09:52:08.337

Aptana[在 Luna 上很大程度上功能失调，](https://stackoverflow.com/questions/30500732/is-it-possible-to-update-the-pydev-plug-in-bundled-with-aptana)并且没有批发替代品。但是，将以下插件组合在一起可以获得很好的支持：

*   **[TM Terminal](http://marketplace.eclipse.org/content/tm-terminal)** - 在 Eclipse 中提供本地和远程命令行会话。

*   **[Ruby Development Tools](http://marketplace.eclipse.org/content/ruby-dltk)** - 参考 Ruby 编辑器。

*   **[JavaScript 开发工具](https://encrypted.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&uact=8&ved=0CBwQFjAA&url=http%3A%2F%2Feclipse.org%2Fwebtools%2Fjsdt&ei=-UCNVc2oN8r_-AHDzoKQCA&usg=AFQjCNHVrwek8aJrCC8qVNTIU1MQChN2sA&sig2=gqIGlUanAnXlSWEpuqz9SA&bvm=bv.96782255,d.cWw)**- 基本的 JavaScript 编辑器。

*   **[EGit](http://marketplace.eclipse.org/content/egit-git-team-provider)** - Git 集成插件。

我在命令行中运行`rails`；`rake`我还通过命令行进行调试（例如使用`binding.pry`）。编辑`.erb`文件是最棘手的一点，Ruby 编辑器还可以，但在遗留代码中，我在这些文件中有大量 JS；在这种情况下，我使用 JavaScript 开发工具。

使用这种设置，Eclipse 运行起来比使用 Aptana 轻得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-06T06:24:03.113

Ruby 开发工具[http://marketplace.eclipse.org/content/ruby-dltk](http://marketplace.eclipse.org/content/ruby-dltk)不再在 marketplace.eclipse.org 上提供。

# php - 将 URL 参数添加到 Hostgator 上的 PHP 错误日志

> ID：12366929
> 
> 赞同：0
> 
> 时间：2012-09-11T09:43:46.657
> 
> 标签：php, mysql, parameters, error-log

我有一个 PHP error_log，它返回一些 MySQL 错误，但为了复制和修复这些错误，我需要能够查看哪些参数被传递到页面。我尝试使用我的 Hostgator 主机中的 PHP error_log 文件和 Apache 日志来找到它，但无法确定哪个属于哪个，因为时间似乎不匹配。有没有办法将带有参数的 URL 存储在 error_log 中，或者有更好的方法吗？

非常感谢，罗恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:52:59.133

看看使用：

```
error_log($url);
error_log($param1); 
```

您应该能够将您希望的任何数据推送到日志

# powershell - 用于导入 psts 的 PowerShell 脚本

> ID：12366931
> 
> 赞同：1
> 
> 时间：2012-09-11T09:43:56.757
> 
> 标签：powershell, import, exchange-server, pst

我需要这个脚本的帮助。

```
$data = Import-CSV C:\temp\import.csv
ForEach ($i in $data){
$pstpath = "\\server\pst$\" + $i.folder + "\"
$user = $i.user
$folder = $i.folder
Get-ChildItem -Recurse -path $pstpath -Filter *.pst | New-MailboxImportRequest -FilePath "$pstpath + $_.name" - Mailbox $user -Name "Import $user $_.name" -BadItemLimit 30 -ConflictResolutionOption KeepAll -TargetRootFolder $_.name -IsArchive -confirm: $false

} 
```

我对文件夹中的每个 pst 都有此错误：

输入对象不能绑定到命令的任何参数，因为命令不接受管道输入，或者输入及其属性不匹配接受管道输入的任何参数。+ CategoryInfo : InvalidArgument: (archive.pst:PSObject) [New-MailboxImportRequest], ParameterBindingException
+ FullyQualifiedErrorId : InputObjectNotBound,New-MailboxImportRequest

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:10:50.920

看起来`New-MailboxImportRequest`cmdlet 不接受管道输入，如果接受了，您必须从命令中删除“-FilePath "$pstpath + $_.name"' 部分。

试试这个：

```
$data = Import-CSV C:\temp\import.csv
ForEach ($i in $data){

    $user = $i.user
    $folder = $i.folder
    $pstpath = "\\server\pst$\$folder"

    Get-ChildItem -Recurse -path $pstpath -Filter *.pst | Foreach-Object{
        New-MailboxImportRequest -FilePath $_.FullName - Mailbox $user -Name "Import $user $($_.Name)" -BadItemLimit 30 -ConflictResolutionOption KeepAll -TargetRootFolder $_.Name -IsArchive -Confirm:$false
    }

} 
```

# php - 列出目录中的所有图像而不列出内容

> ID：12366934
> 
> 赞同：0
> 
> 时间：2012-09-11T09:44:01.340
> 
> 标签：php, image, readdir, closedir

我正在使用以下内容列出目录中的所有 jpg 图像，但由于某种原因它不起作用，我认为我的一些 's 和 .s 可能在错误的位置，我想我有点困惑： -S。

```
<?php
if ($handle = opendir('images/photobanner')) {
while (false !== ($file = readdir($handle)))
{
    if ($file != "." && $file != ".." && strtolower(substr($file, strrpos($file, '.') + 1)) == 'jpg')
    {
        $thelist .= '<li><a href="'.$file.'">'<img src="'.$file.'.'"/>'</a></li>';
    }
}
closedir($handle);
}
?>

<P>List of files:</p>
<UL>
<P><?=$thelist?></p>
</UL> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:50:42.937

如下更改连接的 lins。

```
 $thelist .= '<li><a href="'.$file.'"><img src="'.$file.'"/></a></li>'; 
```

并且在开始循环声明之前`$thelist`，它在范围内可用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:51:36.153

也许`glob()`最适合你，你还有一些额外的`'`：

```
$thelist = '';
foreach (glob("images/photobanner/*.jpg") as $file) {
    $thelist .= '<li><a href="'.$file.'"><img src="'.$file.'"/></a></li>';
}
echo $thelist; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:48:14.737

您的变量`$thelist`仅在您的 while 循环中已知。

如果你改变你的开始，它应该可以工作：

```
<?php
$thelist = "";
if ($handle = opendir('images/photobanner')) { 
```

您的问题的技术术语是“范围”。

# php - php/mysql登录系统报错 MySQL Error:()

> ID：12366935
> 
> 赞同：0
> 
> 时间：2012-09-11T09:44:05.913
> 
> 标签：php, mysql

当我运行代码时，我得到 mysql error() 并且我在 Query Execution.Error 中得到错误：执行查询时出现问题：

```
insert into kyaami_user_logins set `user_id` = '32', `email` = 'test@test2.com', `ip` = , `timestamp` = NOW(), `state` = 'success', `active`=1 
```

MySQL 错误：()

```
<?php
if ( isset( $_GET['msg'] ) )
    {
  if ( $_GET['msg'] == 1 )
    echo "Invalid User. Try Again.";
  if ( $_GET['msg'] == 2 )
    echo "Account Activated Successfully.";
  if ( $_GET['msg'] == 3 )
    echo "Your Account is Locked. contact Administrator.";
  if ( $_REQUEST['msg'] == 4 )
    echo "Mail has been sent to your email address.";
  if ( $_REQUEST['msg'] == 5 )
    echo "Your Account is already activated, Login Here";
  if ( $_REQUEST['msg'] == 6 )
    echo "Your Activation link has been expired, please register again";
     }
?>
</span></td>
</tr>
<tr>
  <td width="70" align="right" valign="top"><p class="form_text" style="color:#FFF;" align="right"><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email</strong></p></td>
  <td width="410"><div class="form_input_BG"><input type="text" name="username" id="username" value=""/></div></td>
</tr>
<tr>
  <td valign="top"><p class="form_text" style="margin-left:8px; color:#FFF;"><strong>Password</strong></p></td>
  <td align="left"><div class="form_input_BG"><input type="password" name="pwd" id="pwd" value=""/></div>
  </td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td>&nbsp;&nbsp;<strong><a href="index.php?page=forgot_pwd" >Forgot your password?</a></strong></td>
</tr>
<tr>
  <td>&nbsp;</td>
  <td><div class="form_login_signup_btn">
<input title="login Now" type="image" src="images/login_btn.png" name="formSubmit" id="login" width="104" height="33" /> <!--<input type="image" src="images/signup_btn.png" title="Signup Now" name="signup" id="signup" />-->&nbsp;&nbsp;<a href="fbconnect.php"><img src="images/fconnect-but.gif" width="89" height="21" border="0"></a> &nbsp;&nbsp;<a href="twit_redirect.php"><img src="images/sign-in-with-twitter.png" width="151" height="24" alt="Sign in with Twitter" border="0" /></a>
    </div>
  </td>
</tr>
</table>
</div>
</div>
</div>
<div class="clr"></div></div>
<div class="clr"></div>
</div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:49:29.667

应该是**ip = ''**

```
insert into kyaami_user_logins set `user_id` = '32', `email` = 'test@test2.com', `ip` = '', `timestamp` = NOW(), `state` = 'success', `active`=1 
```

`ip = ,`导致错误。`ip = ''`如果值为空，请将其更正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:49:47.800

您正在插入一个空白：

```
insert into kyaami_user_logins 
    set `user_id` = '32', 
    `email` = 'test@test2.com', 
    `ip` = , 
    `timestamp` = NOW(), 
    `state` = 'success', 
    `active`=1 
```

如果要插入空值，请使用：

```
insert into kyaami_user_logins 
    set `user_id` = '32', 
    `email` = 'test@test2.com', 
    `ip` = null, 
    `timestamp` = NOW(), 
    `state` = 'success', 
    `active`=1 
```

此外，通常插入具有以下语法：

```
insert into kyaami_user_logins 
    (`user_id`, `email`, `ip`, `timestamp`, `state`, `active`)
    values ('32', 'test@test2.com', null, NOW(), 'success', 1) 
```

此方法将保留对表的更改，并且您实际上可以通过命名列（如果默认设置为 null）来完全跳过 IP 部分，如下所示：

```
insert into kyaami_user_logins 
    (`user_id`, `email`, `timestamp`, `state`, `active`)
    values ('32', 'test@test2.com', NOW(), 'success', 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:01:27.170

为避免任何类似的错误，请尝试将您的代码更改为[PDO](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)：

```
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));

$stmt = $db->prepare("INSERT INTO `kyaami_user_logins`(`user_id`, `email`, `timestamp`, `state`, `active`, `ip`) VALUES (:user_id, :email, NOW(), :state, 1, :ip)");
$stmt->execute(array(':user_id' => 32, ':email' => 'test@test2.com', ':state' => 'success', ':ip'=>'')); 
```

# visual-studio-2010 - 使用 Expression Blend 4 和 Visual Studio2010 进行调试

> ID：12366939
> 
> 赞同：0
> 
> 时间：2012-09-11T09:44:29.560
> 
> 标签：visual-studio-2010, debugging, expression-blend-4

我正在执行我的视图实现`Blend 4`，我想在`Visual Studio 2010`.

从 Blend 启动我的项目后，我将 VS 调试器附加到它。调试工作正常。下次我想再次调试时（经过一些修改）我无法构建项目并显示错误消息：

`Unable to copy file "obj\Debug\Application.exe" to "bin\Debug\Application.exe". The process cannot acess the file "bin\Debug\Applicaiton.exe" because it is being used by another process`

同样的消息来自两个 dev.app。

根据任务管理器，没有正在运行的 Application.exe。当我关闭 Visual Studio 时，我可以再次运行该项目。

在不总是重新打开这些 dev.apps 之一的情况下运行、修改和调试代码的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T16:40:34.007

您可以删除您的 obj/bin 文件夹，这些东西是在构建时创建的。就我个人而言，我所做的就是我在 Blend 中的所有视图工作，然后我总是从 VS 构建。只要您拥有所有 SDK 并且所有内容都已同步等，我发现这是最好的方法。

当您在 Blend 和 VS 之间切换时，请记住经常按 ctrl+Shift+S，否则您会发现其中一个的内容可能会错误地覆盖另一个。

例如，如果我在 Blend 中进行一些视图/设计工作，我会认真地保存它，然后转到 VS 来构建它。唯一的缺点是你需要一台像样的机器来同时运行 Blend 和 VS 而没有太多延迟。希望这可以帮助。

# java - 在 Java 中读取、排序和合并多个文件的最快方法是什么？

> ID：12366944
> 
> 赞同：2
> 
> 时间：2012-09-11T09:44:46.460
> 
> 标签：java, performance, sorting, io, large-data

我正在研究一个项目，该项目处理读取和处理包含某些个人的各种数据的巨大 .txt 文件。

多个文件将按单个 ID（存在于所有文件中）读取和排序，然后合并，即从分配给同一 ID 的所有文件中检索所有条目。换句话说，每个人在每个文件中都可以有多个条目（即行）。我需要检索我找到的关于一个 ID 的所有信息，将其存储起来，然后传递给下一个。

到目前为止，我已经尝试过`FileChannel`,`FileInputStream`和`MappedFileBuffer`，但显然最适合我的情况是`FileInputStream`使用 a`BufferedReader`和比较它们，我看到了`Collection.sort()`推荐的方法。一个重要的问题是我不知道要使用该应用程序的 PC 的性能，并且文件可能大于 2GB。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:53:12.470

如果文件足够大，您将不得不使用外部排序，在这种情况下，数据库真正开始成为最实用的选择。JDK 中没有外部排序方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:10:23.833

如果您希望处理的数据多于目标环境可以装入内存的数据，那么您将不得不使用某种形式的磁盘流式传输或多次重新解析文件。

选择哪个选项的决定取决于数据的分布。

如果每个 id 的行数相对较少（即很多不同的 id），那么假设您需要所有 id 的整理结果，重新解析将是最慢的。

如果 id 相对较少（即很多行），那么重新解析可能会变得更有效。

我的猜测是，在一般情况下，为每个 id 重新解析效率会很低（但如果你知道可能有 <10 个不同的 id，那么我会考虑一个基于重新解析的解决方案）

然后的想法是，您只需将结果放入一种列表映射中即可解析文件......

```
Map<Id,List<Record>> 
```

你面临的问题是你没有足够的内存来保存这样的地图......

因此，您需要在磁盘存储上创建一个中间临时来保存每个 id 的列表。

磁盘存储有两种选择：

1.  自己滚

2.  使用数据库（例如 derby 或 hsqldb 或 ...）

选项 1 的工作量更大，但您可以针对您的用例进行优化（即仅通过追加写入，然后最后将所有记录读回并对其进行排序）

选项 2 将更容易和更快地实施，但有性能风险，因为数据库将在 id 上维护一个索引，以防您想在解析时随机读取数据（在此用例中您不会这样做）...

如果我必须选择，我会从选项 2 开始，并且只会给自己引入维护头痛，如果性能次优，选项 1 将是。（避免过早优化）

您将需要使用缓冲读取器（具有非常大（64k）的缓冲区，以避免通过竞争性读/写操作破坏磁盘（磁盘会降低性能）

# ember.js - Emberjs 路由器：视图属性未在关联控制器上定义

> ID：12366945
> 
> 赞同：0
> 
> 时间：2012-09-11T09:44:49.123
> 
> 标签：ember.js, ember-old-router

我正在尝试将我的应用程序移至使用“插座”的新 Emberjs 路由器组件。

参见参考文献：[http](http://emberjs.com/guides/outlets/) ://emberjs.com/guides/outlets/和这个： [http ://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-路由和出口/](http://codebrief.com/2012/07/anatomy-of-an-ember-dot-js-app-part-i-redux-routing-and-outlets/)

我如何理解它的工作原理：当您使用字符串连接插座时，会发生以下事情

1.  Ember 在 App 上查找视图定义并实例化它
2.  Ember 在 App 上查找控制器定义并创建它的实例
3.  像这样将两者相互挂钩：设置视图控制器属性和设置控制器视图属性

--- 在最后一步之前运行良好。我似乎无法在控制器上设置视图属性。

JSBin 这里：http: [//jsbin.com/ekekir/40/edit](http://jsbin.com/ekekir/40/edit)

相关代码：

**应用路由器**

```
App.Router = Ember.Router.extend({
  root: Ember.Route.extend({
    state1: Ember.Route.extend({
      route: '/state1',

      connectOutlets: function (router) {
        router.get('applicationController').connectOutlet('state1')
      }
    })
  })
}); 
```

**控制器和视图**

```
App.State1View = Ember.View.extend ({ 
  templateName: 'state1',
  submit: function () {
    this.get('controller').doLogView();
    return false;
  }
});

App.State1Controller = Ember.Controller.extend({
  doLogView: function () {
    console.log('Getting controller view:');
    console.log(this.get('view'));
  }
}); 
```

最后它返回一个大空值。

我做错了什么还是这就是它应该的方式？

顺便说一句：这是使用 ember-1.0.pre。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:47:04.170

Mike Aski 是正确的，控制器不应该知道视图。

但是，当前的实现实际上*确实在**控制器*上设置了视图，而不是您期望的控制器。在上面的示例中， 的`view`属性`applicationController`将设置为 的实例`State1View`。

来自 Ember 源代码的相关代码如下：

[https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L140](https://github.com/emberjs/ember.js/blob/master/packages/ember-views/lib/system/controller.js#L140)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-11T13:21:14.363

这是正常行为，因为控制器不必知道呈现其内容的视图。你会有一个依赖循环（和一个破碎的设计......）。

依赖关系遵循链：V -> C -> M

而且，控制器注入一次，每次显示时都会创建视图。

# r - 按 row.name 和 column 合并

> ID：12366946
> 
> 赞同：11
> 
> 时间：2012-09-11T09:44:50.890
> 
> 标签：r, merge, dataframe

这应该很简单，我可能只是很傻，但是...我需要通过 df1 的行名和 df2 中的列合并两个数据框，即

```
df1<-data.frame(x=1:3,y=4:6) 
rownames(df1)<-c("a","b","c")
df1
  x y
a 1 4
b 2 5
c 3 6

df2<-data.frame(site=c("a","b"),p=5:6,q=10:11)
df2
  site p  q
     a 5 10
     b 6 11 
```

合并应产生：

```
df3<-data.frame(site=c("a","b"),p=5:6,q=10:11,x=1:2,y=4:5)
df3
  site p  q x y
     a 5 10 1 4
     b 6 11 2 5 
```

我努力了

```
merge(df1,df2,by.x=row.names(df1),by.y=df2$site) 
```

但得到错误

> fix.by(by.x, x) 中的错误：“by”必须指定唯一有效的列

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-11T10:02:06.497

这是一种选择：

```
merge(df1, df2, by.x = "row.names", by.y = "site")
  Row.names x y p  q
1         a 1 4 5 10
2         b 2 5 6 11 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T09:57:07.057

'by' 参数必须是列名。像这样的东西会起作用

```
merge(cbind(df1, row=row.names(df1)), df2, by.x="row", by.y="site") 
```

# c# - 使用 mvc 和 js 解析日期时间

> ID：12366949
> 
> 赞同：0
> 
> 时间：2012-09-11T09:45:01.447
> 
> 标签：c#, ajax, json, asp.net-mvc-3

我已经实现了 jquery 日期选择器，但我正在努力解析日期时间值。场景如下，用户应使用 jquery datepicker 选择日期，日期应采用以下格式 ( `dd.MM.yy`)，日期时间值应使用 ajax 发送到控制器，并通过 json 接收（为简单起见）一些虚拟数据。

我有以下

```
Views/Shared/EditorTemplates/DateTime.cshtml

@model DateTime
@Html.TextBox("", Model.ToString("dd.MM.yy"),  new { @class = "date" }) 
```

视图/主页/@Html.EditorFor(m => m.MyDate)

```
<script type="text/javascript">
    $('#pickDate').click(function () {
        var date = $('input[name="MyDate"]').val();    
        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: { MyDate: date }, 
            url: '/Home/DateManipulation',
            success: function (result) { alert('Success');  },
            error: function () { alert("error"); }
        });    
    });
</script>

HomeController.cs
 [HttpPost]
 public JsonResult DateManipulation(string MyDate)
 {
    DateTime date = DateTime.ParseExact(MyDate, "dd.MM.yy", CultureInfo.InvariantCulture);              
    var process = //omitting 
    return Json(process);
 } 
```

在 _Layout.cshtml 我已经准备好 dom

```
 $('.date').datepicker({ dateFormat: "dd.MM.yy" }); 
```

> 我没有在控制器上获取日期，错误是无效的 JSON 原语：MyDate。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:58:08.177

在您的电话中`/Home/DataManipulation/`

```
<script type="text/javascript">
    $('#pickDate').click(function () {
        var date = $('input[name="MyDate"]').val();    
        $.ajax({
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            data: { MyDate: date }, 
            url: '/Home/DateManipulation',
            success: function (result) { alert('Success');  },
            error: function () { alert("error"); }
        });    
    });
</script> 
```

尝试替换`data: { MyDate: date }`为`data: JSON.stringify({ MyDate: date })`

# macos - 从 Mac OSX 10.5.8 升级到 Xcode 4.4.1

> ID：12366953
> 
> 赞同：0
> 
> 时间：2012-09-11T09:45:12.147
> 
> 标签：macos, osx-snow-leopard

> **可能重复：**
> [如何在 mac leopard 中将 Xcode 3.2.5 更新到 4.4.1 版本？](https://stackoverflow.com/questions/12348180/how-to-update-xcode-3-2-5-to-4-4-1-version-in-mac-leopard)

希望有人能帮我弄清楚如何从 OSX 10.5.8 升级到 Xcode 4.4.1。看来我需要雪豹。有什么地方可以下载吗？

# iphone - Game-kit 中回合制多人游戏的问题

> ID：12366955
> 
> 赞同：2
> 
> 时间：2012-09-11T09:45:18.160
> 
> 标签：iphone, cocos2d-iphone, game-center, gamekit

我正在使用我正在实现 Game-kit 的 cocos2d 游戏。我的游戏支持多人游戏选项。实际上作为给定的示例[Raywenderlich 链接](http://www.raywenderlich.com/5480/beginning-turn-based-gaming-with-ios-5-part-1)。我是 Game-kit 的 GKTurnBasedMultiplayer 类。但是现在当第一个玩家连接到游戏中心并选择“立即播放”选项时，它会自动为另一个玩家提供问题。但问题是它直接连接并开始比赛，而不是等待另一个玩家。我在用

```
[[GCTurnBasedMatchHelper sharedInstance] findMatchWithMinPlayers:2 maxPlayers:4 viewController:viewConroller]; 
```

用于连接和与其他玩家一起玩，但直接连接比赛。

我想等待另一个球员。这就是问题所在。我也在使用 GCTurnBasedMatchHelper 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T04:21:33.433

这是 GameKit API 的预期功能。在回合制比赛中，比赛数据与第一回合一起提交，在自动比赛的情况下，在 Game Center在第一个提交回合*后找到对手之前，该玩家是未确定的玩家。*

这背后的逻辑是回合制比赛的“轮到你了”的原则。如果 Game Center 在您提交第一个回合之前将您与一名玩家匹配，则该其他玩家将被邀请参加轮到他们的比赛，这是非常不可取的。

正如 Apple 文档所说，您必须考虑比赛参与者 playerID 属性返回 nil 的情况，并在您的块代码中进行相应处理。在你轮到他们之前，对手将是零（这自然发生在创造者的第一轮之后）。如果您仍然对此感到困惑，请参考[Turn-Based Game Center API](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/GameKit_Guide/ImplementingaTurn-BasedMatch/ImplementingaTurn-BasedMatch.html#//apple_ref/doc/uid/TP40008304-CH15-SW1)。

# c# - 捕捉键盘

> ID：12366956
> 
> 赞同：1
> 
> 时间：2012-09-11T09:45:18.280
> 
> 标签：c#, keyboard

每次用户按下 F2 时，如何切换事件？

```
if(/*is pressed F2*/){
    this.Close(); 
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:03:13.613

一个简单的方法是使用[`MessageFilter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx)

创建一个实现的类`IMessageFilter`

```
public class YourFilter : IMessageFilter
{
    public event EventHandler F2Pressed = delegate { };

    private const Int32 WM_KEYDOWN = 0x0100;

    public bool PreFilterMessage(ref Message m)
    {
        if (m.Msg != WM_KEYDOWN)
            return false;

        if ((Keys)m.WParam==Keys.F2)
            F2Pressed(this, new EventArgs());

        return false;
    }
} 
```

并使用注册

```
var filter = new YourFilter();
Application.AddMessageFilter(filter);
filter.F2Pressed += YourEventHandlerHere; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T10:11:24.763

首先创建一个按键事件，例如：

```
 private void form1_KeyDown(object sender, KeyEventArgs e)
    {
        if ( e.KeyCode == Keys.F2 ) 
            this.Close();
    } 
```

当您按下 form1 控件上的键时获取键：在 form1 的事件中将 form1 更改`KeyPreview`为 true`page_load`

```
 private void form1_Load(object sender, EventArgs e)
    {
        this.KeyPreview = true;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T10:26:15.480

现在，这将重点放在表单和其中的其他元素上（现在，如果您同意我的观点，请将其标记为答案）：

```
public partial class preferences : Form {
    public preferences() {
        InitializeComponent();
        this.KeyPreview = true;
    }
    private void preferences_KeyDown( object sender, KeyEventArgs e ) {
        if (e.KeyCode == Keys.F2) {
            this.Close();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:15:04.180

我找到了最简单的方法来做到这一点：

```
private void preferences_KeyDown( object sender, KeyEventArgs e ) {
    if (e.KeyCode == Keys.F2) {
        this.Close();
    }
} 
```

# c++ - C++ 手工制作的互斥锁

> ID：12366958
> 
> 赞同：3
> 
> 时间：2012-09-11T09:45:29.363
> 
> 标签：c++, algorithm, mutex, atomic, mutual-exclusion

我为我的项目制作了一个手工制作的互斥锁，但我怀疑它是否是线程安全的......

```
 bool blocked;

    while ( blocked )
    {

    }

    blocked = true;
    ...
    blocked = false; 
```

可以说，线程 A 通过了 while 循环并且没有及时阻塞标志（没有时间将标志设置为`false`），线程 B 也通过了 while 循环！

1.  可能吗？为什么？

2.  据我了解，互斥锁具有完全相同的工作原理。为什么这不能发生在互斥体中？我读过关于不能被中断的原子操作......所以`check-if-mutex-available`和`mutex-block`不能被中断，对吧？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-11T09:51:23.890

你的代码完全失效了！

原因是对变量`blocked`的访问不是原子的。如果两次读取发生在第一个线程写出`true`更新并且更新传播到所有 CPU 之前，两个线程可以同时读取它并确定互斥锁已解锁。

你需要原子变量和原子交换来解决这个问题。该`atomic_flag`类型正是您想要的：

```
#include <atomic>

std::atomic_flag blocked;

while (blocked.test_and_set()) { }  // spin while "true"

// critical work goes here

blocked.clear();                    // unlock 
```

（或者，您可以使用`std::atomic<bool>`and `exchange(true)`，但 the`atomic_flag`是专门为此目的而制作的。）

如果这是一个单线程上下文，原子变量不仅可以防止编译器重新排序*看起来*不相关的代码，而且它们还可以使编译器生成必要的代码，以防止 CPU 本身以允许不一致的方式重新排序指令执行流程。

事实上，如果你想稍微提高一点效率，你可以在 set 和 clear 操作上要求更便宜的内存排序，如下所示：

```
while (blocked.test_and_set(std::memory_order_acquire)) { }  // lock

// ...

blocked.clear(std::memory_order_release);                    // unlock 
```

原因是您只关心一个方向上的正确排序：另一个方向上的延迟更新并不是很昂贵，但要求顺序一致性（默认情况下）可能很昂贵。

* * *

**重要提示：**上面的代码是所谓的*自旋锁*，因为当状态被锁定时，我们会进行一次忙自旋（`while`循环）。这在几乎所有情况下都非常糟糕。内核提供的互斥体系统调用是完全不同的鱼，因为它允许线程向内核发出信号，它可以进入睡眠状态并让内核重新调度整个线程。这几乎总是更好的行为。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-11T09:53:14.263

1.  这是可能的，因为处理器可以在进入循环后但在锁定互斥体之前从第一个线程切换到第二个线程。
2.  这是可能的，因为它们使用内核级操作来确保在某个操作完成之前不会切换线程。

例如，在 Windows 上，您可以使互斥锁看起来像[这样](http://pastebin.com/n45zL3sC)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T09:51:44.400

你已经得到了它。

1.  是的，很有可能。对于单核，操作系统通过时间片执行[线程](http://en.wikipedia.org/wiki/Preemption_%28computing%29#Time_slice)。它运行线程 A 一段时间，然后暂停它，然后运行线程 B 一段时间。通过 while 循环后，线程 A 可能会立即暂停。

2.  为了解决这些问题，CPU 已经实现了不能被任何东西打断的特殊指令。互斥体使用这些原子操作来检查标志，并将其设置在一个操作中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-11T09:52:28.490

是的，您描述的情况可能会发生。这样做的原因是线程可以在测试`blocked`is`false`和设置`blocked`到之间中断`true`。要获得您想要的行为，您需要使用或模拟原子**测试和设置**操作。

可以在[此处](http://en.wikipedia.org/wiki/Test-and-set)找到有关测试和设置的更多信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-11T09:54:35.120

互斥锁实现必须确保互斥性（这就是它的含义）并且不会在您的代码中获得。它需要一些原子变量和合适的内存顺序才能访问。在 C++11 中，最好使用`std::mutex`（最好与 一起使用`std::lock`），对于 C++03，您可以使用`boost::mutex`等。

# visual-studio-2010 - 如何在 Visual Studio 2010 中找到实现某个接口的所有类？

> ID：12366959
> 
> 赞同：0
> 
> 时间：2012-09-11T09:45:28.590
> 
> 标签：visual-studio-2010, visual-studio

我知道我可以将光标放在接口上并为其“查找所有引用”。

但结果包含太多噪音。

我只想找到实现该接口的所有类。不是具有该接口的变量声明。

而不是通过反思。我想在 IDE 中完成这项任务。

这有什么捷径吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:52:56.933

您可以`"View Call Hierarchy"`通过将光标放在界面成员上来使用。

但如果你想要更多，你可以`Resharper`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T09:51:41.967

尝试查找文本 ":INameofinterface" 。

您也可以使用正则表达式搜索前面带有“：”的接口名称

# django - 如何在 django 的模板中使用 url 的 slug 值

> ID：12366961
> 
> 赞同：1
> 
> 时间：2012-09-11T09:45:35.867
> 
> 标签：django

```
 var params = {
            year: escape(year.val()),
            month: escape(month.val()),
            day:  escape(day.val()),
         };

  $(window.location).attr('href', getUrlSlug()+'enquiry/thanks/?year='+params.year+'&month='+params.month+'&day='+params.day); 
```

现在在我的 teplate url 中显示为：

```
http://127.0.0.1:8000/venues/adc-dfds-hds-kdfdf-fd-dfd/enquiry/thanks/?year=2012&month=9&day=13 
```

现在我想在我的模板中使用日期如下

```
<p>Your chosen date is {{params.year}},{{params.month}},{{params.day}}</p> 
```

我不确定语法任何帮助...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T10:00:13.320

**为了在模板**中显示上述值，我只使用了下面的代码......

```
{{request.GET.year}},{{request.GET.month}},{{request.GET.day}} 
```

如果在我们需要使用的**视图中使用相同的**

```
request.GET.get('year')
request.GET.get('month')
request.GET.get('day') 
```

# html - 如何从 VIM 中的其他文件类型加载 ftplugins？

> ID：12366962
> 
> 赞同：1
> 
> 时间：2012-09-11T09:45:45.960
> 
> 标签：html, vim, handlebars.js, ftplugin, sparkup

我正在使用 Pathogen，并且正在使用 xmledit 和 sparkup 的 git 克隆作为捆绑包。这两个插件自动为 HTML 启用，但我想为其他类似 HTML 的文件类型启用它们，例如 Handlebars。

当我加载 Handlebars 缓冲区时，如何自动加载 HTML 的 ftplugins？我正在专门寻找一种不涉及对 xmledit 或 sparkup git repos 进行任何更改的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T10:24:07.253

当*Handlebars*与 HTML 完全一样时，只教文件类型检测将其视为 HTML 是最简单的方法；您将自动获得语法、缩进和其他设置。

如果它只是有点相关，并且您只想从 HTML 文件类型“导入”某些设置，但不是所有设置，请定义您自己的设置`~/.vim/ftplugin/handlebars_sparkup.vim`（假设您已经有了`&ft=handlebars`为您的文件生成的文件类型检测）。在该文件中，`:runtime`您需要相应的 HTML 文件类型脚本，例如

```
:runtime! ftplugin/html_sparkup.vim 
```

# java - 在Java中搜索字符串中的一组字符串的有效方法

> ID：12366964
> 
> 赞同：3
> 
> 时间：2012-09-11T09:45:56.733
> 
> 标签：java, regex, string, algorithm, data-structures

我有一组大小约为 100-200 的元素。设一个样本元素为`X`。

每个元素都是一组字符串（这样的集合中的字符串数在 1 到 4 之间）。`X`= { `s1`, `s2`, `s3`}

对于给定的输入字符串（大约 100 个字符），例如`P`，我想测试字符串中是否`X`存在*任何*。

`X`存在于iff 中，表示所有*属于*，是的子串。`P``s``X``s``P`

该组元素可用于预处理。

* * *

我希望这在 Java 中尽可能快。不符合我要求的可能方法：

*   检查所有字符串是否`s`都是子字符串`P`似乎是一项代价高昂的操作
*   因为`s`可以是`P`（不一定是单词）的任何子字符串，所以我不能使用单词的散列
*   我不能直接使用正则表达式，因为`s1`, `s2`,`s3`可以以任何顺序出现，并且所有字符串都需要作为子字符串出现

* * *

现在我的方法是`X`用所有可能的字符串顺序排列构建一个巨大的正则表达式。因为 <= 4 中的元素数量`X`，这仍然是可行的。如果有人可以为我指出一种更好（更快/更优雅）的方法，那就太好了。

请注意，这组元素可用于预处理，我想要 java 中的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:50:40.337

您*可以*直接使用正则表达式：

```
Pattern regex = Pattern.compile(
    "^               # Anchor search to start of string\n" +
    "(?=.*s1)        # Check if string contains s1\n" +
    "(?=.*s2)        # Check if string contains s2\n" +
    "(?=.*s3)        # Check if string contains s3", 
    Pattern.DOTALL | Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
foundMatch = regexMatcher.find(); 
```

`foundMatch`如果字符串中存在所有三个子字符串，则为真。

请注意，如果“针字符串”可能包含正则表达式元字符，您可能需要转义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T03:27:58.643

看起来像是[Rabin–Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm#Rabin.E2.80.93Karp_and_multiple_pattern_search)的完美案例：

> Rabin-Karp 在单模式搜索方面不如 Knuth-Morris-Pratt 算法、Boyer-Moore 字符串搜索算法和其他更快的单模式字符串搜索算法，因为它的最坏情况行为较慢。然而，Rabin-Karp 是多模式搜索的首选算法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-11T10:52:01.540

听起来您在实际发现特定方法实际上太慢之前就过早地优化了代码。

关于你的字符串集的一个很好的属性是字符串必须包含`X`作为子字符串的所有元素——这意味着如果我们发现其中一个元素`X`不包含在其中，我们可能会很快失败`P`。这可能会比其他方法更节省时间，特别是如果 的元素`X`通常比几个字符长并且不包含或只包含几个重复字符。例如，正则表达式引擎在检查是否存在具有非重复字符的 5 长度字符串（例如海岸）时，只需要检查 100 长度字符串中的 20 个字符。而且由于`X`有 100-200 个元素，如果可以的话，你真的非常想快速失败。

我的建议是按长度顺序对字符串进行排序，然后依次检查每个字符串，如果找不到一个字符串，请尽早停止。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T10:39:40.903

One way is to generate every possible substring and add this to a set. This is pretty inefficient.

Instead you can create all the strings from any point to the end into a NavigableSet and search for the closest match. If the closest match starts with the string you are looking for, you have a substring match.

```
static class SubstringMatcher {
    final NavigableSet<String> set = new TreeSet<String>();

    SubstringMatcher(Set<String> strings) {
        for (String string : strings) {
            for (int i = 0; i < string.length(); i++)
                set.add(string.substring(i));
        }
        // remove duplicates.
        String last = "";
        for (String string : set.toArray(new String[set.size()])) {
            if (string.startsWith(last))
                set.remove(last);
            last = string;
        }
    }

    public boolean findIn(String s) {
        String s1 = set.ceiling(s);
        return s1 != null && s1.startsWith(s);
    }
}

public static void main(String... args) {
    Set<String> strings = new HashSet<String>();
    strings.add("hello");
    strings.add("there");
    strings.add("old");
    strings.add("world");
    SubstringMatcher sm = new SubstringMatcher(strings);
    System.out.println(sm.set);
    for (String s : "ell,he,ow,lol".split(","))
        System.out.println(s + ": " + sm.findIn(s));
} 
```

prints

```
[d, ello, ere, hello, here, ld, llo, lo, old, orld, re, rld, there, world]
ell: true
he: true
ow: false
lol: false 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-11T10:18:59.973

您可能正在寻找[Aho-Corasick 算法](http://en.wikipedia.org/wiki/Aho%E2%80%93Corasick_string_matching_algorithm)，该算法从字符串集（字典）构造一个自动机（类 trie），并尝试使用此自动机将输入字符串与字典匹配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-11T10:02:19.187

当预处理时间无关紧要时，您可以创建一个哈希表，它将至少出现在一个字符串中的每个一个字母、两个字母、三个字母等组合映射到它出现的字符串列表。

索引字符串的算法如下所示（未经测试）：

```
HashMap<String, Set<String>> indexes = new HashMap<String, Set<String>>();

for (int pos = 0; pos < string.length(); pos++) {
    for (int sublen=0; sublen < string.length-pos; sublen++) {
         String substring = string.substr(pos, sublen);
         Set<String> stringsForThisKey = indexes.get(substring);
         if (stringsForThisKey == null) {
             stringsForThisKey = new HashSet<String>();
             indexes.put(substring, stringsForThisKey);
         }
         stringsForThisKey.add(string);
    }
} 
```

以这种方式索引每个字符串将是字符串长度的二次方，但只需要对每个字符串执行一次。

但结果将是对出现特定字符串的字符串列表的恒定速度访问。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-11T11:22:20.523

您可能还想考虑使用“后缀树”。我没有使用过这段代码，但是这里有一个[描述](http://www.koders.com/java/fidA0DAAB7F0503E4A2214823E16063D7ECA3DB5FBB.aspx)

我使用了专有实现（我什至无法访问）并且它们非常快。

# c# - 你调用的对象是空的。怎么了？

> ID：12366967
> 
> 赞同：0
> 
> 时间：2012-09-11T09:46:00.183
> 
> 标签：c#, xna

我有两个课程：Game1 和 Animation。我总是得到“对象引用未设置为对象的实例”。Game1 类的这一行错误信息：animation.Draw(spriteBatch); 怎么了？我不知道要改变什么。

```
Animation class code:
public class Animation 
{            
    private int _animIndex; 
    public TimeSpan PassedTime { get; private set; } 
    public Rectangle[] SourceRects { get; private set; }      
    public Texture2D Texture {get; private set; } 
    public TimeSpan Duration { get; private set; } 

    public Animation(Rectangle[] sourceRects, Texture2D texture, TimeSpan duration) 
    { 
          for (int i = 0; i < sourceRects.Length; i++) 
          { 
                sourceRects[i] = new Rectangle((sourceRects.Length - 1 - i) * (Texture.Width / sourceRects.Length), 0, Texture.Width / sourceRects.Length, Texture.Height); 
          } 

        SourceRects = sourceRects; 
        Texture = texture; 
        Duration = duration; 
    }        

    public void Update(GameTime dt) 
    { 
        PassedTime += dt.ElapsedGameTime; 
        if (PassedTime > Duration) 
        { 
            PassedTime -= Duration; // zurücksetzen 
        } 

        var percent = PassedTime.TotalSeconds / Duration.TotalSeconds; 
        _animIndex = (int)Math.Round(percent * (SourceRects.Length - 1)); 
    } 

    public void Draw(SpriteBatch batch) 
    { 
        batch.Draw(Texture, new Rectangle(0, 0, Texture.Width / SourceRects.Length, Texture.Height), SourceRects[_animIndex], Color.White); 
    } 
}

Game1 class code:
public class Game1 : Microsoft.Xna.Framework.Game 
{ 
    GraphicsDeviceManager graphics; 
    SpriteBatch spriteBatch; 
    Animation animation; 
    Texture2D gegner; 
    Rectangle[] gegnerbilder = new Rectangle[10]; 

    public Game1() 
    { 
        graphics = new GraphicsDeviceManager(this); 
        Content.RootDirectory = "Content"; 
    } 

    protected override void Initialize() 
    {          
        base.Initialize(); 
    } 

    protected override void LoadContent() 
    {            
        spriteBatch = new SpriteBatch(GraphicsDevice); 
        gegner = Content.Load<Texture2D>("kurzeanim"); 
    } 

    protected override void Update(GameTime gameTime) 
    { 
        KeyboardState kbState = Keyboard.GetState(); 
        if (kbState.IsKeyDown(Keys.A)) 
        { 
            animation = new Animation(gegnerbilder, gegner, TimeSpan.FromSeconds(3)); 
            animation.Update(gameTime); 
        } 
        base.Update(gameTime); 
    } 

    protected override void Draw(GameTime gameTime) 
    { 
        GraphicsDevice.Clear(Color.CornflowerBlue); 
        spriteBatch.Begin(); 
        animation.Draw(spriteBatch);    
        spriteBatch.End(); 

        base.Draw(gameTime); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:51:52.437

您的字段`animation`未初始化，您正在调用其实例方法`Draw`，这就是您收到此异常的原因。在那个特定的行它是空的。它正在更新方法中初始化，您可以在构造函数中对其进行初始化以避免该异常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T11:59:02.360

`animation = new Animation(gegnerbilder, gegner, TimeSpan.FromSeconds(3));`

您是否真的在创建一个新动画并每隔`Update()`60 次更新一次？

您将需要将其添加到您的`Initialize()`方法中（或者当您需要更改动画时）

然后在更新中你仍然可以做 animation.Update() 但没有构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:52:12.250

确保-class 的`Update`-method在该类的 -method 之前调用，或者确保不在调用其成员之前调用：`Game1``Draw``animation``null`

```
protected override void Draw(GameTime gameTime) 
{ 
    if (animation != null)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue); 
        spriteBatch.Begin(); 
        animation.Draw(spriteBatch);    
        spriteBatch.End(); 
    }
    base.Draw(gameTime); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T09:53:25.383

如果在调用 Update 时按下 A 键，您只会实例化动画属性。

```
protected override void Update(GameTime gameTime) 
{ 
    KeyboardState kbState = Keyboard.GetState(); 
    if (kbState.IsKeyDown(Keys.A)) 
    { 
    animation = new Animation(gegnerbilder, gegner, TimeSpan.FromSeconds(3)); 
    animation.Update(gameTime); 
    } 
    base.Update(gameTime); 
} 
```

您需要更早地初始化它（例如在构造函数中）或向 Draw 方法添加一些逻辑以检查空值。

# .net - AppHarbor MVC3 应用程序抛出 HTTP500 错误

> ID：12366968
> 
> 赞同：0
> 
> 时间：2012-09-11T09:46:04.463
> 
> 标签：.net, mysql, asp.net-mvc-3, appharbor

我正在 AppHarbor (http://test-1335.apphb.com) 上的测试站点上测试一些 MVC3 的东西。

我的数据库在 AppHarbor 上运行，并且在手动设置 MySQLConnection 时可以访问数据库。这可以通过单击我网站上的“测试”来测试。

```
 myConnectionString = "my connection string goes here...";

        try
        {
            conn = new MySql.Data.MySqlClient.MySqlConnection();
            conn.ConnectionString = myConnectionString;
            conn.Open();
            ViewBag.Response = "OK";
        }
        catch (MySql.Data.MySqlClient.MySqlException ex)
        {
            ViewBag.Response = ex.Message;
        } 
```

通过实体框架访问数据库时，我收到 HTTP500 错误。这可以通过单击我网站上的“驱动程序”链接进行测试。

我在 AppHarbor 管理页面的错误页面中没有收到任何错误，并且在我的开发机器上也可以完美运行。

还有其他人在 AppHarbor 上收到 HTTP500 错误，或者有关如何获取有关该错误的更多详细信息的任何提示或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T20:10:39.093

您的网站目前正在显示`Unable to find the requested .Net Framework Data Provider. It may not be installed.`。有关如何解决问题的详细信息，请参阅[此问题。](https://stackoverflow.com/questions/6865249/unable-to-find-the-requested-net-framework-data-provider-it-may-not-be-install)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:49:48.490

我删除了 machine.config 中对 MySql.Data 的引用，并将下面的代码添加到 web.config。

```
<system.data>
<DbProviderFactories>
  <remove invariant="MySql.Data.MySqlClient" />
  <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data,                    Version=6.5.4.0, Culture=neutral,                    PublicKeyToken=c5687fc88969c44d" />
</DbProviderFactories> 
```

# drupal-7 - drupal 的替代日志记录系统

> ID：12366971
> 
> 赞同：1
> 
> 时间：2012-09-11T09:46:14.167
> 
> 标签：drupal-7, drupal-modules

我需要在 Drupal 中记录一些操作。即：X类型的发布内容类型，删除评论y，将角色W分配给用户Z等。

使用看门狗可以很容易地做到这一点，但我不想这样做，因为我想保留这些日志而不删除行，并且因为我不想将业务操作与错误日志混合在一起。

我认为必须有一个模块可以做到这一点，也许也只有一个 API 模块。

理想情况下，它应该使用新实体来存储日志，并且应该与视图模块集成。

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:33:10.447

我一直在寻找类似的东西。但我只是看不到这种类型的订阅。我确实找到了这个：[http](http://drupal.org/project/logging_alerts) ://drupal.org/project/logging_alerts 。它添加了电子邮件日志记录并允许规则添加监视程序语句。

有了规则的想法，心跳监视器实际上也可以完成这项工作。[http://drupal.org/project/heartbeat](http://drupal.org/project/heartbeat)它应该为您提供 Facebook 风格的主页，但您可以选择使用规则记录到它的内容，因此它只会记录节点创建信息等。

当我在谷歌偶然发现这个问题时，我正在经历一些想法。

# python - 如何在 python shell 中改变颜色？

> ID：12366973
> 
> 赞同：2
> 
> 时间：2012-09-11T09:46:18.003
> 
> 标签：python

> **可能重复：**
> [Python | 更改外壳中的文本颜色](https://stackoverflow.com/questions/2330245/python-change-text-color-in-shell)

我已经编写了一个代码来计算亮度温度，我想用不同的颜色突出显示最终结果。python - 如何在python shell的白色背景上将文本颜色从默认蓝色更改为红色？

# c++ - 将列表元素分配给 char*

> ID：12366974
> 
> 赞同：0
> 
> 时间：2012-09-11T09:46:28.473
> 
> 标签：c++, string, list, char

我在列表中添加了一些元素

```
std::list<std::string> dirList2;
//Code
dirList2.push_back(findData.cFileName);

copy(dirList2.begin(), dirList2.end(),std::ostream_iterator<std::string>  (std::cout,"\n")); 
```

一切正常，我可以查看这些项目，

现在我想将列表的第一个元素分配给 char* 。

有人能帮助我吗 ？我不知道该怎么做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T09:50:24.967

如果我很清楚你想要什么，那么你可以这样做：

```
const char *s = dirList2.front().c_str(); 
```

不过要小心。变量`s`指向的 C 字符串由列表中的字符串对象拥有。如果列表超出范围或您从列表中删除元素，则 C 字符串将由`std::string`的析构函数释放，您的`s`指针将无效。

如果你想在物体的提升时间之外操纵 C 弦，那么`std::string`你可以做某事。像这样：

```
const char *s = strdup(dirList2.front().c_str()); 
```

但通常最好使用`std::string`原始 C 指针而不是原始 C 指针，除非您别无选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T09:50:22.363

字符串对象提供了一个`c_str()`返回 const char * 的方法。如果您需要修改字符串，您还必须制作字符串的副本（使用 strcpy 的 IE，其中源指针是由返回的指针`c_str()`）

# jsp - 如何在 Liferay MVC 的 JSP 页面中设置 PortletSession？

> ID：12366977
> 
> 赞同：2
> 
> 时间：2012-09-11T09:46:45.227
> 
> 标签：jsp, content-management-system, liferay-6

在 Liferay MVC 项目中，如何`portletSession`在 JSP 页面中设置并在自定义操作类中检索`portletSession`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T13:15:49.233

在 JSP 中，您不需要做任何事情，因为它是提供的对象之一：

```
<%@ taglib uri="http://java.sun.com/portlet_2_0" prefix="portlet" %>
<portlet:defineObjects />
<%
    portletSession.getAttribute(...);
%> 
```

从一个类也不是什么大不了的事，它在你的渲染或动作方法中可用：

```
PortletSession portletSession = actionRequest.getPortletSession(); // action method
PortletSession portletSession = renderRequest.getPortletSession(); // render method 
```

# .net - SQL Server CLR 程序集可重复实现排序？

> ID：12366979
> 
> 赞同：0
> 
> 时间：2012-09-11T09:46:51.810
> 
> 标签：.net, sql-server, sql-server-2008-r2, implementation

我有一对 CLR 程序集，我正在尝试创建一个可重复的实现脚本。两个程序集都需要 EXTERNAL 权限集，所以我还涉及到非对称密钥，这些都会导致问题。当您第二次运行它时，您会收到“无法删除密钥，登录映射到它”错误。

我有其他一些问题是：我需要数据库和服务器级别的登录名/密钥吗？

目前我的脚本是：

```
USE master
GO 

IF EXISTS (SELECT * FROM sys.database_principals WHERE name = 'BaselCLRLogin')
    DROP LOGIN [BaselCLRLogin]
GO

IF EXISTS (SELECT * FROM sys.asymmetric_keys WHERE name = 'BaselCLRKey')
    DROP ASYMMETRIC KEY [BaselCLRKey]
GO

USE [BaselST]
GO

IF EXISTS (SELECT * FROM sys.objects WHERE OBJECT_ID = OBJECT_ID('clr.CheckFileFormat'))
    DROP PROCEDURE clr.CheckFileFormat
GO

IF  EXISTS (SELECT * FROM sys.database_principals WHERE name = N'BaselCLRLogin')
    DROP USER [BaselCLRLogin]
GO

IF  EXISTS (SELECT * FROM sys.assemblies asms WHERE asms.name = N'BaselCLR' and is_user_defined = 1)
    DROP ASSEMBLY [BaselCLR]
GO

IF EXISTS (SELECT * FROM sys.asymmetric_keys WHERE name = 'BaselCLRKey')
    DROP ASYMMETRIC KEY [BaselCLRKey]
GO

USE master
GO 

-- First Create the Asymmetric Key from the Assembly
CREATE ASYMMETRIC KEY BaselCLRKey
FROM EXECUTABLE FILE = 'D:\BASEL\BS_Assemblies\BaselCLR.dll'
GO

-- Create the Login from the Asymmetric Key
CREATE LOGIN BaselCLRLogin FROM ASYMMETRIC KEY BaselCLRKey
GO

-- Grant the External Access Priviledge to the Login
GRANT EXTERNAL ACCESS ASSEMBLY TO BaselCLRLogin
GO

USE [BaselST] 
GO

IF NOT EXISTS(SELECT * FROM sys.schemas WHERE name = 'clr')
    EXEC ('CREATE SCHEMA [clr]')
GO

-- Add a database user in the SQLCLR_Net Database for the Login
CREATE USER [BaselCLRLogin] FOR LOGIN [BaselCLRLogin]
GO

CREATE ASSEMBLY BaselCLR
FROM 'D:\BASEL\BS_Assemblies\BaselCLR.dll'
WITH PERMISSION_SET = EXTERNAL_ACCESS
GO

CREATE PROCEDURE clr.CheckFileFormat(
    @fileName nvarchar(255)
    , @seperator nvarchar(1)
    , @lineTerminator tinyint
    , @encoding tinyint
    , @headerFieldCount int
    , @bodyFieldCount int
    , @footerFieldCount int
    , @reason nvarchar(max) out)
AS
EXTERNAL NAME BaselCLR.StoredProcedures.CheckFileFormat
GO 
```

如果还有什么我做过的不，不让我知道！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-11T09:52:39.510

The problem is in the following line...

```
IF EXISTS (SELECT * FROM sys.database_principals WHERE name = 'BaselCLRLogin') 
```

You're looking for the login name in the wrong system table!

Select from `sys.syslogins` instead.

```
IF EXISTS (SELECT * FROM sys.syslogins WHERE [sid] = SUSER_SID('BaselCLRLogin'))
    DROP LOGIN [BaselCLRLogin]
GO 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:14:09.347

您必须使用不同的密钥对每个程序集进行签名。

# glossary - 在线词汇表 - 简单（免费）的方法

> ID：12366987
> 
> 赞同：3
> 
> 时间：2012-09-11T09:47:27.163
> 
> 标签：glossary

我坐在一个 CSV 文件中，其中包含大约 3000 个与医学专业相关的术语和定义。我想以词汇表的形式在线提供信息。

它需要具备以下功能：

*   将所有术语显示为列表，单击术语时会显示定义。
*   搜索给定术语的能力 - 搜索不仅应返回与名称匹配的术语，还应返回包含搜索词的定义。
*   从一个定义链接到另一个定义的能力，即如果定义包含另一个术语单词，我希望用户能够单击该单词并链接到该单词的定义。*我已经在我的 CSV 文件中准备了链接，方法是用 [方括号] 限制定义中的所有可链接词*。
*   免费创作。我打算使它成为一个开放资源，所以不想为特权付费。
*   这是一本医学词典，而*不是*维基。只有我应该能够编辑它。
*   定义简短而温馨——没有图片，定义很少超过 20 个单词。

几年前，有人问过[这个问题。](https://stackoverflow.com/questions/1443560/best-approach-to-make-an-online-dictionary)我也遇到过[这个](http://www.phpdictionary.com/)，但是所有的术语都必须单独输入（而不是仅仅能够导入 CSV 文件）。我想知道人们是否知道任何新的发展，或者可能更适合我的需要的东西..？

我可以从头开始做，但如果已经有一些我可以使用的开放代码，那就太好了。如果做不到这一点，欢迎提出一些让我开始的建议。如果我无法获得现成的解决方案，我愿意学习并使用任何语言来实现这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T10:15:41.477

就我个人而言，我会编写一些 JavaScript 代码来接收 csv 数据并将其转换为[jQuery Mobile](http://jquerymobile.com)增强的 HTML。我的意思是生成一个常规的 <ul>-list 并让 jQM 将其转换为[像这样](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-search-inset.html)的可过滤列表视图。列表视图项目本身可以是[collapsibles](http://jquerymobile.com/demos/1.1.1/docs/content/content-collapsible.html)，因此您可以实现“单击以显示描述”行为。

链接稍微复杂一些；您可以附加（在 csv 解析过程中）打开所需描述的简单点击处理程序。或者，您可以将过滤器字段替换为链接文本，但这会产生多个结果。

jQuery Mobile 的优点是它也可以在移动设备上很好地工作。但是，如果您出于某种原因不喜欢它，但认为推出自己的客户端 JavaScript 解决方案可能是一个不错的选择，那么[jQuery UI](http://jqueryui.com/)也有有用的小部件，例如[自动完成](http://jqueryui.com/demos/autocomplete/)和[手风琴](http://jqueryui.com/demos/accordion/)。

编辑：这是一个使用 jQM 在大约 15 行代码中解析 csv 数据并从中生成一个漂亮的可过滤列表的快速演示：http: [//jsfiddle.net/gssMm/](http://jsfiddle.net/gssMm/)

EDIT2：演示的修订版，包含 3003 个项目，让您了解性能：http: [//jsfiddle.net/gssMm/1/](http://jsfiddle.net/gssMm/1/)

# asp.net - 在特定日期和时间触发事件

> ID：12366988
> 
> 赞同：0
> 
> 时间：2012-09-11T09:47:34.010
> 
> 标签：asp.net, sql-server

我有一个现有的数据结构，我不得不使用它，计划的事件按星期几和每小时保存。

我正在使用 SQL Server 2008 和 ASP.NET 控制台应用程序（临时）来触发。

触发时间作为布尔值存储在数据库中。

例子：

```
SendMonday            bit   Unchecked
SendTuesday           bit   Unchecked
SendWednesday         bit   Unchecked
...
=====================================    
Send0000              bit   Unchecked
Send0100              bit   Unchecked
Send0200              bit   Unchecked
Send0300              bit   Unchecked
... 
```

从理论和编程的角度来看，为了在特定时间触发事件，最好的方法是什么？

我的方法涉及在数据库中存储“LastProcessed”日期并进行大量手动工作，但想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:49:33.660

我会使用[SQL Server 代理](http://msdn.microsoft.com/en-us/library/ms189237%28v=sql.100%29.aspx)每小时运行一个计划任务，以检查需要调用的事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T10:02:33.047

听起来像是在后端有一个存储过程的计划任务的工作。计划作业应该执行存储过程，sproc 将查看带有调用时间的表并决定是否需要执行以及需要执行什么。如果需要，您可以将外部程序连接到存储过程中。

或者，如果您不想依赖 sproc 和 sql server 代理，您可以在控制台应用程序中编写所有逻辑，并从 Windows 任务计划程序执行您的应用程序。因此，您的应用程序将从调度表中获取数据，决定是否以及做什么，并根据需要继续进行。

我更喜欢第二种方法 - 更易于维护，但这实际上取决于您的要求和环境。

# java - java内存不足错误堆空间

> ID：12366989
> 
> 赞同：5
> 
> 时间：2012-09-11T09:47:40.030
> 
> 标签：java, tomcat, out-of-memory

我在 jsp/servlet 中开发 web 应用程序，我遇到了 netbeans 和 Java 的问题。我的程序需要大数据处理。所以我使用 -Xmx512m 来增加最大堆大小

> 工具 -> 服务器 -> 在平台选项卡上，Java 平台下方有一个 VM 选项。然后它工作正常..

现在我的问题是我正在构建**WAR**文件，直接部署并在我的另一台机器 Tomcat 中运行以进行演示，这里我面临同样的问题 java out of memory error-heap space 我也尝试过

> 环境变量设置 CATALINA_OPTS=-Xms512m -Xmx512m

这也没有帮助我

如何解决这个问题？，请指出正确的方向

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-11T09:51:25.590

尝试设置`PermSize`和`MaxPermSize`值，应该在tomcat**启动**时设置，`Catalina.bat`然后使用这个脚本。`stop``start`

```
 set CATALINA_OPTS=-server -Xms1024m -Xmx1024m -XX:PermSize=512m -XX:MaxPermSize=512m 
```

[http://javahowto.blogspot.co.uk/2006/06/6-common-errors-in-setting-java-heap.html](http://javahowto.blogspot.co.uk/2006/06/6-common-errors-in-setting-java-heap.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-11T11:16:02.120

最后我找到了问题的解决方案

在 Catalina.bat 文件中，您可以找到如下文本

```
set _EXECJAVA=%_RUNJAVA%
set MAINCLASS=org.apache.catalina.startup.Bootstrap
set ACTION=start
set SECURITY_POLICY_FILE=
set DEBUG_OPTS=
set JPDA= 
```

在此之下，您需要将

> 设置 CATALINA_OPTS=-Xms512m -Xmx512m

堆大小大于计算机的物理内存。例如，

java -Xmx2g BigApp 初始化 VM 时发生错误 无法为对象堆保留足够的空间 无法创建 Java 虚拟机。

修复方法是使其低于物理内存：java -Xmx1g BigApp

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-22T01:37:13.257

我知道我在这个回复上完全迟到了，但如果它对遇到同样情况的任何人有帮助，我认为值得在这里写下笔记。我指的是 tomcat 9，因此您可能需要检查此处提到的内容与您的版本的相关性：

在 %CATALINA_HOME%/bin/catalina.bat 中，明确指出：

```
rem   WHEN RUNNING TOMCAT AS A WINDOWS SERVICE:
rem   Note that the environment variables that affect the behavior of this
rem   script will have no effect at all on Windows Services. As such, any
rem   local customizations made in a CATALINA_BASE/bin/setenv.bat script
rem   will also have no effect on Tomcat when launched as a Windows Service.
rem   The configuration that controls Windows Services is stored in the Windows
rem   Registry, and is most conveniently maintained using the "tomcatXw.exe"
rem   maintenance utility, where "X" is the major version of Tomcat you are
rem   running. 
```

如果您检查 %CATALINA_HOME%/bin 文件夹，您会发现一个名为“tomcat9w.exe”的文件。双击它，您可以看到此屏幕截图，您可以在其中设置 Xms 和 Xmx 参数，以便为您保存到注册表中

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-29T13:26:47.487

内存不足错误可能是 Tomcat 的 web.xml 中的大会话超时数的结果。在这种情况下，许多 Web 会话可能会占用许多系统内存。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-11T11:01:45.187

我建议您启用堆转储并使用 IBM 支持工作台（具有堆转储分析器）进行分析，并准确了解问题并进行相应的配置。

# date - 如何派生当前日期和时间并附加在包含“Hello”的每一行的末尾

> ID：12366995
> 
> 赞同：23
> 
> 时间：2012-09-11T09:48:04.637
> 
> 标签：date, awk, grep

我有以下文件`party.txt`，其中包含以下内容：

```
Hello Jacky
Hello Peter
Bye Johnson
Hello Willy
Bye Johnny
Hello Mary
Hello Wendy 
```

我使用`grep hello`来捕获内容，但是当我使用`print date +"%Y-%m-%d'`并附加到它时，我不能，而且`0`每行会得到很多。

```
cat party.txt | grep Hello | awk '{ print date +"%Y-%m-%d"}' 
```

我会错过什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-10-23T12:14:15.097

gawk（和最新版本的 mawk）具有内置的[时间/日期功能](http://www.gnu.org/software/gawk/manual/html_node/Time-Functions.html)，因此无需使用外部工具。

```
gawk '/Hello/{print NR " - " $0 " - " strftime("%Y-%m-%d")}' party.txt 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-09-11T09:53:00.253

一种使用方式`awk`：

```
awk -v date="$(date +"%Y-%m-%d %r")" '/Hello/ { print $0, date}' party.txt 
```

结果：

```
Hello Jacky 2012-09-11 07:55:51 PM
Hello Peter 2012-09-11 07:55:51 PM
Hello Willy 2012-09-11 07:55:51 PM
Hello Mary 2012-09-11 07:55:51 PM
Hello Wendy 2012-09-11 07:55:51 PM 
```

请注意，日期值仅在`awk`启动时设置，因此即使命令需要很长时间运行，它也不会更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-11T12:20:44.720

```
 awk 'BEGIN{"date +'%Y-%m-%d'"|getline d;}/Hello/{print $0,d}' file 
```

会给你：

```
Hello Jacky  2012-09-11
Hello Peter 2012-09-11
Hello Willy 2012-09-11
Hello Mary 2012-09-11
Hello Wendy 2012-09-11 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-12-14T09:20:54.913

此解决方案应适用于任何 awk：

```
awk '/Hello/ {cmd="(date +'%H:%M:%S')"; cmd | getline d; print d,$0; close(cmd)}' party.txt 
```

魔法发生在`close(cmd)`语句中。它每次都强制`awk`执行`cmd`，因此，日期每次都是实际的。

`cmd | get line d`从 读取输出`cmd`并将其保存到`d`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-11T21:46:05.970

要回答直接问题，您缺少的是`date`外部命令，因此您需要在 awk 之外调用它并将其作为变量传递（如其他答案之一所示），或者从在 awk 中作为系统命令使用`system()`内置或管道（如另一个答案所示）。

您看到的原因`0`是因为表达式`date +"%Y-%m-%d"`被解释为将变量的数值`date`（`0`因为它没有定义）添加到字符串的数值`"%Y-%m-%d"`（`0`因为它不是有效数字）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-16T20:56:05.900

仅在傻瓜中：

```
$ gawk '/Hello/ {print $0, strftime("%Y-%m-%d");}' party.txt 
Hello Jacky 2019-09-17 
Hello Peter 2019-09-17 
Hello Willy 2019-09-17 
Hello Mary 2019-09-17 
Hello Wendy 2019-09-17 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-10T08:06:26.320

使用 posix sed（以及由于 sed 中缺少时间函数而导致的子 shell）

```
sed -n "/^Hello/ s/$/ $( date +'%Y-%m-%d' )/p" party.txt 
```

返回

```
Hello Jacky 2016-11-10
Hello Peter 2016-11-10
Hello Willy 2016-11-10
Hello Mary 2016-11-10
Hello Wendy 2016-11-10 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-01T16:52:08.460

如果您愿意使用 Perl：

```
perl -MPOSIX -lne 'if (/Hello/){ print "$_ " . strftime "%Y-%m-%d",localtime }' party.txt 
```

产生这个输出

```
Hello Jacky 2015-10-01
Hello Peter 2015-10-01
Hello Willy 2015-10-01
Hello Mary 2015-10-01
Hello Wendy 2015-10-01 
```

以下是它的工作原理：

*   `-n`循环输入文件的每一行，不自动打印每一行

*   `-l`在处理之前删除换行符，然后将它们添加回来

*   `-e`执行 perl 代码

*   `$_`是当前行

*   `-MPOSIX`加载 POSIX 模块，其中包括`strftime`

*   `localtime`并`strftime`打印时间，给定格式`%Y-%m-%d`

# css - 位置中的 div 在绝对位置与内容的 div 下使用背景图像固定

> ID：12366997
> 
> 赞同：0
> 
> 时间：2012-09-11T09:48:07.707
> 
> 标签：css, html, background-image, css-position

我想改变我在页面中显示背景图像的方式以获得更大的灵活性。

这里是我的 CSS 代码在`section id="home"`显示图像的那一刻：

```
background-image: url("/img/architecture.jpg");
background-attachment: fixed;
background-position: center 1115px;
height: 350px;
width: 100%;
margin-top: 35px;
box-shadow: 2px 1px 6px 0 #888888 inset; 
```

我想做同样的事情，但以这种方式：在相同位置创建一个固定位置的 div，并将此背景图像固定在同一位置，然后将网页内容放在另一个 div 的上方（绝对位置？）。那可能吗？你怎么能做到这一点？希望解释清楚

这是我的页面：[http](http://tommywebdesigner.com/Home%20Page.html) ://tommywebdesigner.com/Home%20Page.html 还有： http: [//fiddle.jshell.net/CGJmE/](http://fiddle.jshell.net/CGJmE/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T10:46:11.337

我认为是这样的：

```
<div id="background">...background stuff here...</div>
<div id="content">...content here...</div> 
```

使用 CSS：

```
#background 
{
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    z-index: 1;
    ...other styles...
}
#content
{
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
    z-index:2;
    overflow:scroll;
    ...other styles...
} 
```

将是开始的地方。