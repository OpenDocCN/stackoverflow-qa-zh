# StackOverflow 问答 10704000-10704999

# javascript - Rails 3 wicked_pdf 和分页

> ID：10704000
> 
> 赞同：1
> 
> 时间：2012-05-22T14:22:17.587
> 
> 标签：javascript, ruby-on-rails-3, pagination, pdf-generation, wicked-pdf

自定义分页pdf有什么简单的解决方案吗？我在考虑一些 javascript，它将检查 div 高度并在下一个元素溢出聚合 div 时分页 - 是否已经实现了类似的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:54:40.927

这可能会有所帮助 - 当您希望报告跳到新页面时，请尝试

```
<!-- PAGE BREAK --> 
```

在您正在呈现的 HTML 页面中

# c - Lua API 评估变量名而不是值

> ID：10704008
> 
> 赞同：1
> 
> 时间：2012-05-22T14:22:44.730
> 
> 标签：c, api, lua

我正在使用 Lua 5.2 C API。我试图让一个函数接受一个字符串变量或一个字符串文字。

这段代码：

```
static int printTest(lua_State *L)
{   
    size_t lslen = NULL;
    const char *lsrc = lua_tolstring(L, 0, &lslen);
    printf("%s\n", lsrc);
}
/* ----- Registration array ----- */
static const luaL_Reg testhook[] = {
        {"printTest", printTest},
        {NULL, NULL} /* sentinel */
};    
/* ----- Registration function ----- */    
LUALIB_API int registerTestHookFunctions(lua_State *L)
{
    lua_newtable(L); 
    lua_setglobal(L, "hook"); 
    lua_getglobal(L, "hook"); 
    luaL_setfuncs(L, testhook, 0); 
    lua_settop(L, 0);
    return 0;
} 
```

从 Lua 运行时，将执行以下操作：

```
hook.printTest('hello')  -- prints 'hello'
a = 'hello'
hook.printTest(a) -- prints 'a' 
```

我对 Lua 非常陌生，并且正在使用以下文档：[http](http://www.lua.org/manual/5.2/manual.html) ://www.lua.org/manual/5.2/manual.html 并且我没有找到/理解如何从文字中辨别变量。（例如，没有 lua_isliteral() 或 lua_isvariable() 方法）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:33:55.840

您已将错误的索引传递给`lua_tolstring`. 参考手册明确指出

> 0 绝不是可接受的索引。

您对相对值使用负索引，对绝对值使用正索引。这些条件都不是0。

# reporting - Dynamics AX 2009 X++ 页面计数器查询

> ID：10704009
> 
> 赞同：0
> 
> 时间：2012-05-22T14:22:50.643
> 
> 标签：reporting, x++, axapta

如果可能的话，想知道如何执行此要求。

我正在修改客户帐户报表 morphx 报告，并且用户要求我们有一页页，即第 1 页，共 10 页，第 2 页，共 10 页等……

我们需要的是报告在获取新客户后重置总页数。所以客户 00001 可能有一个 3 页的声明，即“第 1 页，共 3 页”“第 2 页，共 3 页”和“第 3 页，共 3 页”。客户 00002 可能只有一个页面声明，因此它将是“第 1 页，共 1 页”。

按照标准，您会得到整个报告的总页数，即“第 1 页，共 140 页”“第 2 页，共 140 页”“第 3 页，共 140 页”，然后是下一个客户“第 1 页，共 140 页”等等……

我会假设需要一个基于标准计数器的总计数器，但不确定在哪里捕获这个总值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:47:12.940

您可以在每个帐户对帐单之后调用该`element.reset()`方法。`fetch`这将报告最终确定为打印作业。如果输出到 PDF 或邮件，这不好。

也看看[这个](https://stackoverflow.com/q/10225296/4509)和[这个问题](https://stackoverflow.com/q/10298285/4509)。

# grails - Grails：是什么确保版本检查和更新是原子的？

> ID：10704011
> 
> 赞同：4
> 
> 时间：2012-05-22T14:22:54.697
> 
> 标签：grails, optimistic-locking

Grails 中的`update`操作首先检查要更新的对象的版本，然后更新它。在检查版本和更新对象期间，Grails 的哪一部分确保对象不会被另一个请求更新？

**更新：**

是的，hibernate 会在保存对象时检查版本，如果乐观锁定失败，则会抛出异常。而且我想hibernate会确保检查+更新是原子的，但是......

如果您查看 grails 生成的更新方法，您会发现 grails 首先进行了仔细检查，然后（从我的角度来看）并没有准备好处理异常。在更新方法已经检查了正确的版本之后，hibernate 抛出异常的可能性很小，但对我来说似乎是可能的。

那么尝试保存并捕获异常（如果有的话）还不够吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:48:28.930

它由 Hibernate 层管理。它被称为“乐观锁定”，基本上它只更新具有已知版本的对象。喜欢：

```
UPDATE SET
  %... fields ...%, 
  version = version + 1                      --update version to a new value
WHERE 
  id = %obj id%                              --current object
  AND version = %previous obj version%`      --last known version 
```

并在更新失败时抛出异常（顺便说一句，此时很难从这个错误中恢复，在大多数情况下你只是丢失了更新）。

如果您想确保保存数据，请尝试强制保存数据（并检查保存/验证错误）：

```
try {
    if (!obj.save(flush: true)) {
        // validation error
    }
} catch (OptimisticLockingFailureException e) {
    // not saved
} 
```

甚至在更新前锁定数据。仅当您有大量并发更新时它才有用。

```
MyDomain obj = MyDomain.lock(params.id) //now it's locked for update
// update fields
obj.save() 
```

[在http://grails.org/doc/latest/guide/GORM.html#locking](http://grails.org/doc/latest/guide/GORM.html#locking)查看更多关于 GORM 锁定的细节

# c# - 用户定义的自动刷新网页

> ID：10704017
> 
> 赞同：1
> 
> 时间：2012-05-22T14:23:12.623
> 
> 标签：c#, html, asp.net-mvc-2

我正在尝试在 asp.net 中进行用户定义的自动刷新，这可行，`<meta http-equiv="refresh" content="90" />`但这 `<meta http-equiv="refresh" content="<%=REFRESHINTERVAL%>" />`不起作用， REFRESHINTERVAL 是一个公共整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:34:49.087

你能像这样使用 ASPNET API`Response.AppendHeader("Refresh", REFRESHINTERVAL.ToString());`吗？

# c# - 在 C# 中以另一种形式更改标签的文本？

> ID：10704020
> 
> 赞同：19
> 
> 时间：2012-05-22T14:23:19.940
> 
> 标签：c#, winforms

我有一个名为 LabelX1 的标签。这是在form2上。在 form1 上，我有一个按钮。我希望将按钮的文本转移到另一个表单的标签。我努力了

```
form2 frm2 = new form2();
frm2.labelX1.Text = this.button1.text; 
```

但它不起作用。有没有一种简单、直接的方法来做到这一点？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-22T14:26:01.430

您需要公开您的标签或其属性。

在表格 2 中：

```
public string LabelText
{
    get
    {
        return this.labelX1.Text;
    }
    set
    {
        this.labelX1.Text = value;
    }
} 
```

然后你可以这样做：

```
form2 frm2 = new form2();
frm2.LabelText = this.button1.text; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-22T14:31:32.610

您可以像这样修改 Form2 的构造函数：

```
public Form2(string labelText)
{
    InitializeComponent();
    this.labelX1.Text = labelText;
} 
```

然后创建 Form2 传递文本：

```
Form2 frm2 = new Form2(this.button1.text); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-22T14:36:34.583

或者你可以这样做>>

```
((Label)frm2.Controls["labelX1"]).Text = "test"; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-22T14:35:12.520

在form2里面写这个

```
public void ChangeLabel(string s)
{
    labelX1.Text = s;
} 
```

然后在您创建表格 2 的地方执行此操作

```
form2 frm2 = new form2();
frm2.ChangeLabel(this.button1.text); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-22T14:25:52.703

> 有没有一种简单、直接的方法来做到这一点？

最简单的方法是让 labelX1 成为 form2 的公共成员。您遇到的问题是因为 Form1 代码 form2.labelX1 不可见。在 form2 设计器中，您可以转到 labelX1 的属性并将其可见性设置为公共/内部。

更好的方法是将 labelX1.Text 公开为可以在类外的代码中设置的属性。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T14:29:21.253

您可以`labelX1`公开，它会起作用，但有更好的方法来做到这一点：

[http://www.codeproject.com/Articles/14122/Passing-Data-Between-Forms](http://www.codeproject.com/Articles/14122/Passing-Data-Between-Forms)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-31T21:52:37.860

您唯一需要做的就是将另一种形式的标签设为公开

例如：表格1：

```
 public System.Windows.Forms.Label txtInfo; 
```

然后在 Form2

```
Form1 frm =new Form1();
frm.txtInfo.text="....."//you have access because is public 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-11-10T20:54:34.047

```
form2 frm2 = new form2();
((Label)frm2.Controls["labelX1"]).Text=button1.Text;
frm2.Show(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-11-21T04:18:03.700

Generally the controllers are private. That is why you unable to access it from another form. Above mentioned ways such as passing data through parameters etc are so correct. There is one another method, Go to your form Form2.Designer.cs

```
private System.Windows.Forms.Label labelX1; 
```

Change 'private' into 'public'. Now the labelX1 is visible to outside.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-01T17:10:19.277

如果您需要从代码中的其他位置访问 form2（例如按下按钮），您将无法看到您创建的表单实例。为了解决这个问题，我创建了一个公共实例来保存对它的引用，例如：

```
 public form2 form2_pub; 
```

然后在您创建它之后，将新的分配给您的公共实例：

```
form2 frm2 = new form2();
frm2.Show();
form2_pub = frm2 
```

现在您可以在整个例程中引用 form2_pub。

至少对我有用。

请记住，在您的设置器中，您可以运行您想要的任何其他代码。例如，我只需将 show_scanning 设置为 true，就可以使用以下内容在另一个表单上显示我想要的内容：

```
 public bool show_scanning //turns on the scanning screen
    {
        set
        {
            scanning_pnl.Visible = true;
            notReady_pnl.Visible = false;
            timer1.Enabled = true;
        }
    } 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-21T13:28:54.567

我将父窗口属性更改为以下代码：

```
this.MdiParent.Controls["label1"].Text = "test"; 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-06-17T05:41:16.487

另一种方法是将标签或文本的修饰符属性更改为公共，现在它允许访问 form1 文本框的内容以在另一个表单上添加标签

所以代码是

```
private void button1_click(){
    Form2 obj1 =new Form2();
    Obj1.show();
    Obj1.label1.text="welcome"+textbox1.Text;
} 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2012-05-22T14:26:22.110

你有例外吗？您可以在 form2 上设置 public 属性，使用 setter 在标签上设置文本，或者将 labex1 访问修饰符设置为 public 并直接设置。它应该工作。

# android - 在 Android 中存储和恢复 cookie（持久 cookie 存储）

> ID：10704023
> 
> 赞同：0
> 
> 时间：2012-05-22T14:23:31.050
> 
> 标签：android, cookies, client-server

搜索了很多。

我有一个应用程序。应用程序在服务器上登录并接收一些 cookie，然后它可以使用它们执行一些 POST 请求（例如，获取用户配置文件）。我想在会话之间存储它们（这意味着我可以重新启动设备、运行应用程序并获取配置文件而无需额外登录）。或者，换句话说，如何创建持久的 cookie 存储？

我正在使用唯一的 DefaultHttpClient 并且没有 WebView。但是我应该在创建后使用一些 cookie 初始化这个客户端。我应该将它存储在文件中还是什么？有没有办法以 iOS 方式做到这一点，而不需要奇怪的黑客攻击，存储在文件/数据库中和手动填充 CookieManagers？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T17:18:33.620

现在我使用[PersistentCookieStorage](http://loopj.com/android-async-http/)类来达到这些目的。我在应用程序启动时创建了一个单例。它将 cookie 存储在 SharedPreferences 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T20:24:06.083

java.net.CookieStore 的实现，用于提供持久性 cookie。

使用这个[https://gist.github.com/manishk3008/2a2373c6c155a5df6326](https://gist.github.com/manishk3008/2a2373c6c155a5df6326)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-05T10:25:25.197

[在CookieManager](http://www.programcreek.com/java-api-examples/index.php?api=java.net.CookieManager)中存储一些数据：

```
void populateCookieStore(URI uri)
        throws IOException {

    CookieManager cm = new CookieManager(null, CookiePolicy.ACCEPT_ALL);

    CookieHandler.setDefault(cm);

    Map<String,List<String>> header = new HashMap<>();

    List<String> values = new ArrayList<>();

    values.add("JSESSIONID=" + SESSION_ID + "; version=1; Path="
               + URI_PATH +"; HttpOnly");

    values.add("CUSTOMER=WILE_E_COYOTE; version=1; Path=" + URI_PATH);

    header.put("Set-Cookie", values);

    cm.put(uri, header);
} 
```

# iphone - 替换 UIView

> ID：10704026
> 
> 赞同：0
> 
> 时间：2012-05-22T14:23:39.443
> 
> 标签：iphone, ios, uiview

我是iOS的新手。我有 5 个视图，一个主视图，其他的就像缩略图。如何替换视图。

例如，如果 mainview(view1) 有图片 1，view2 有图片 2，view3 有图片 3 等等。

如何将图片 1 替换为图片 2，以便 View2 进入主视图？

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:26:56.430

您不要为此使用单独的视图。请参阅此页面并从此处下载示例代码以查看详细信息。这是页面控件

[http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:29:15.540

是的，这可以像这样简单地完成 View_1 是第一个视图 View_2 是第二个视图 containerView 是 View_1 的主要超级视图 View_1 是当前可见的视图

```
 [UIView beginAnimations:@"doTheFlipping" context:nil];
    [UIView setAnimationDuration:.5];
    [UIView setAnimationDelay:0];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(myTransitionDidStop:finished:context:)];

    [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromRight forView:containerView cache:YES];

    [View_1 removeFromSuperview];
    [containerView addSubview:View_2];

    [UIView commitAnimations]; 
```

这将为视图 1 到视图 2 创建翻转视图

# c# - 将 LINQ 表达式传递给另一个 QueryProvider

> ID：10704027
> 
> 赞同：14
> 
> 时间：2012-05-22T14:23:45.400
> 
> 标签：c#, linq, linq-expressions

我有一个简单的自定义 QueryProvider，它接受一个表达式，将其转换为 SQL 并查询一个 sql 数据库。

我想在 QueryProvider 中创建一个小型缓存，用于存储经常访问的对象，这样就可以在没有数据库命中的情况下进行检索。

QueryProvider 有方法

```
public object Execute(System.Linq.Expressions.Expression expression)
{
    /// Builds an SQL statement from the expression, 
    /// executes it and returns matching objects
} 
```

缓存作为这个 QueryProvider 类中的一个字段，是一个简单的通用列表。

如果我使用 List.AsQueryable 方法并将上述表达式传递给 List.AsQueryable 的 Provider 的 Execute 方法，它就不能按预期工作。看起来当一个表达式被编译时，初始的 QueryProvider 成为一个不可或缺的部分。

是否可以将表达式传递给后续的 QueryProvider 并根据需要执行表达式？

调用代码看起来模糊如下：

```
public class QueryProvider<Entity>()
{
    private List<TEntity> cache = new List<Entity>();

    public object Execute(System.Linq.Expressions.Expression expression)
    {
        /// check whether expression expects single or multiple result
        bool isSingle = true;

        if (isSingle)
        {
            var result = this.cache.AsQueryable<Entity>().Provider.Execute(expression);
            if (result != null) 
                return result;
        }

        /// cache failed, hit database
        var qt = new QueryTranslator();
        string sql = qt.Translate(expression);
        /// .... hit database
    }
} 
```

它不会返回错误，而是卡在循环中，一遍又一遍地调用同一个提供程序。

这是更多代码，显示了我正在尝试做的事情：

收藏：

```
class Collection<Entity>
{

    internal List<Entity> cacheOne { get; private set; }
    internal Dictionary<Guid, Entity> cacheTwo { get; private set; }

    internal Collection()
    {
        this.cacheOne = new List<Entity>();
        this.cacheTwo = new Dictionary<Guid, Entity>();
    }

    public IQueryable<Entity> Query()
    {
        return new Query<Entity>(this.cacheOne, this.cacheTwo);
    }

} 
```

询问：

```
class Query<Entity> : IQueryable<Entity>
{
    internal Query(List<Entity> cacheOne, Dictionary<Guid, Entity> cacheTwo)
    {
        this.Provider = new QueryProvider<Entity>(cacheOne, cacheTwo);
        this.Expression = Expression.Constant(this);
    }

    internal Query(IQueryProvider provider, Expression expression)
    {
        this.Provider = provider;
        if (expression != null)
            this.Expression = expression;
    }

    public IEnumerator<Entity> GetEnumerator()
    {
        return this.Provider.Execute<IEnumerator<Entity>>(this.Expression);
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }

    public Type ElementType
    {
        get { return typeof(Entity); }
    }

    public System.Linq.Expressions.Expression Expression { get; private set; }

    public IQueryProvider Provider { get; private set; }
} 
```

查询提供者：

```
class QueryProvider<Entity> : IQueryProvider
{

    private List<Entity> cacheOne;
    private Dictionary<Guid, Entity> cacheTwo;

    internal QueryProvider(List<Entity> cacheOne, Dictionary<Guid, Entity> cacheTwo)
    {
        this.cacheOne = cacheOne;
        this.cacheTwo = cacheTwo;   
    }

    public IQueryable<TElement> CreateQuery<TElement>(System.Linq.Expressions.Expression expression)
    {
        return new Query<TElement>(this, expression);
    }

    public IQueryable CreateQuery(System.Linq.Expressions.Expression expression)
    {
        throw new NotImplementedException();
    }

    public TResult Execute<TResult>(System.Linq.Expressions.Expression expression)
    {
        return (TResult)this.Execute(expression);
    }

    public object Execute(System.Linq.Expressions.Expression expression)
    {
        Iterator<Entity> iterator = new Iterator<Entity>(expression, cacheOne, cacheTwo);
        return (iterator as IEnumerable<Entity>).GetEnumerator();
    }
} 
```

迭代器：

```
class Iterator<Entity> : IEnumerable<Entity>
{
    private Expression expression;
    private List<Entity> cacheOne;
    private Dictionary<Guid, Entity> cacheTwo;

    internal Iterator(Expression expression, List<Entity> cacheOne, Dictionary<Guid, Entity> cacheTwo)
    {
        this.expression = expression;
        this.cacheOne = cacheOne;
        this.cacheTwo = cacheTwo;
    }

    public IEnumerator<Entity> GetEnumerator()
    {
        foreach (var result in (IEnumerable<Entity>)this.cacheOne.AsQueryable<Entity>().Provider.Execute(expression))
        {
            yield return result;
        }

        foreach (var more in (IEnumerable<Entity>)this.cacheTwo.Values.AsQueryable<Entity>().Provider.Execute(expression))
        {
            yield return more;
        }
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();
    }
} 
```

程序：

```
class Program
{
    static void Main(string[] args)
    {
        /// Create collection + caches
        var collection = new Collection<Giraffe>();
        collection.cacheOne.AddRange(new Giraffe[] {
            new Giraffe() { Id = Guid.NewGuid(), DateOfBirth = new DateTime(2011, 03, 21), Height = 192, Name = "Percy" },
            new Giraffe() { Id = Guid.NewGuid(), DateOfBirth = new DateTime(2005, 12, 25), Height = 188, Name = "Santa" },
            new Giraffe() { Id = Guid.NewGuid(), DateOfBirth = new DateTime(1999, 04, 01), Height=144, Name="Clown" }
        });
        var cachetwo = new List<Giraffe>(new Giraffe[] {
            new Giraffe() { Id = Guid.NewGuid(), DateOfBirth = new DateTime(1980, 03,03), Height = 599, Name="Big Ears" },
            new Giraffe() { Id = Guid.NewGuid(), DateOfBirth = new DateTime(1985, 04, 02), Height= 209, Name="Pug" }
        });
        foreach (var giraffe in cachetwo)
            collection.cacheTwo.Add(giraffe.Id, giraffe);

        /// Iterate through giraffes born before a certain date
        foreach (var result in collection.Query().Where(T => T.DateOfBirth < new DateTime(2006, 01, 01)))
        {
            Console.WriteLine(result.Name);
        }

    }
} 
```

长颈鹿：

```
class Giraffe
{
    public Guid Id { get; set; }
    public string Name { get; set;  }
    public long Height { get; set; }
    public DateTime DateOfBirth { get; set; }
} 
```

特殊情况，例如 SingleAndDefault 等被忽略。我想要工作的部分发生在迭代器中，它首先在执行字典之前执行列表的查询提供程序。

两个 Queryable 对象之一可能是数据库或其他对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-25T15:03:10.363

不，查询不会绑定到提供程序。这就是您拥有 IQueryable 接口的原因：它同时提供了表达式和提供程序，因此 LINQ 可以调用提供程序来执行表达式。

您的实现中的问题在`Query<Entity>`于其自身的表现方式：您将根表达式设置为，*查询*`Expression.Constant(this)`在哪里（而不是集合）。`this`

 *因此，当您使用 LINQ-to-Objects 执行查询时，它会调用`GetEnumerator`on `Query<>`，然后调用 LINQ-to-Objects 来执行`Expression`，它有一个根表达式`Expression.Constant(this)`（类型为`Query<>`），然后 LINQ-to-Objects 迭代这个根表达式通过调用`GetEnumerator`this`Query<>`等

问题在于

```
(IEnumerable<Entity>)this.cacheOne.AsQueryable<Entity>().Provider.Execute(expression) 
```

这基本上等于

```
new Entity[0].AsQueryable().Provider.Execute(expression) 
```

或者

```
linqToObjectsProvider.Execute(expression) 
```

查询返回的 Provider*未*链接到源 ( `this.cacheOne`)，因此您只是重新执行表达式，而不是查询缓存。

以下有什么问题？

```
class Collection<Entity>
{
    ...

    public IQueryable<Entity> Query()
    {
        return this.cacheOne.Concat(this.cacheTwo.Values).AsQueryable();
    }
} 
```

请注意，`Concat`使用延迟评估，因此只有在执行查询时才将 cacheOne 和 cacheTwo 连接起来，然后使用附加的 LINQ 运算符进行操作。

（在这种情况下，我会创建`Collection<Entity>`一个 IQueryable `with`Expression `equal to`Expression.Constant(this.cacheOne.Concat(this.cacheTwo.Values))`。我认为您可以取消所有其他类。）

* * *

**原始答案**

但是，我认为这种捎带 LINQ to Objects 的方式永远无法完成您认为应该做的事情。

至少，您应该保留*原始*查询提供程序，以便在缓存未命中时调用该提供程序。如果你不这样做，并使用你自己的查询提供程序（你没有显示你用来进行实际调用的代码），你的查询提供程序将一次又一次地调用自己。

所以你需要创建一个 CachingQueryProvider*和*一个 CachingQuery：

```
class CachingQuery<T> : IQueryable<T>
{
    private readonly CachingQueryProvider _provider;
    private readonly Expression _expression;

    public CachingQuery(CachingQueryProvider provider, Expression expression)
    {
        _provider = provider;
        _expression = expression;
    }

    // etc.
}

class CachingQueryProvider : IQueryProvider
{
    private readonly IQueryProvider _original;

    public CachingQueryProvider(IQueryProvider original)
    {
        _original = original;
    }

    // etc.
}

public static class CachedQueryable
{
    public static IQuerable<T> AsCached(this IQueryable<T> source)
    {
        return new CachingQuery<T>(
             new CachingQueryProvider(source.Provider), 
             source.Expression);
    }
} 
```

此外，如果要缓存结果，则需要在缓存结果*之前*具体化结果，否则缓存查询，而不是结果。结果本身不应该再次执行，因为它已经是您应该返回的数据。

我将进入的方向如下：

```
class CachingQueryProvider : IQueryProvider
{
    public object Execute(Expression expression)
    {
        var key = TranslateExpressionToCacheKey(expression);

        object cachedValue;
        if (_cache.TryGetValue(key, out cachedValue))
            return cachedValue;

        object result = _originalProvider.Execute(expression);

        // Won't compile because we don't know T at compile time
        IEnumerable<T> sequence = result as IEnumerable<T>;
        if (sequence != null && !(sequence is ICollection<T>)) 
        {
            result = sequence.ToList<T>();
        }

        _cache[key] = result; 

        return result;
    }
} 
```

对于标记为 的部分`Won't compile`，您将不得不做一些反射技巧。

注意：字符串实现了 IEnumerable，因此请注意*不要*尝试实现单个字符串结果值。*

# .net - 指针和句柄有什么区别

> ID：10704029
> 
> 赞同：13
> 
> 时间：2012-05-22T14:23:46.970
> 
> 标签：.net, pointers, clr, handle

我不能说我有很强的 C++ 背景，所以这些天我经常听到 Handle。我知道指针是什么（它存储内存位置的地址，如引用），但我不确定句柄是什么以及这两者之间的区别是什么。如果你能提供一个 C# 中的示例代码，那就太好了。

顺便说一句，我用谷歌搜索了这个术语，但是很多人给出了不同的解释，所以我认为我从 SO 中得到了最好的解释。

**编辑：**

**其他访问者的快速提示：**句柄就像指向资源的参考。它可以像指针一样指向内存地址，但句柄是更通用的术语，因此它更像是伪指针。文件就是一个很好的例子。文件可以具有操作系统可以理解并用于查找文件的 ID。因此，Handle 可以保存这个 ID（可能是也可能不是内存地址），当我们传入这个 Handle 时，OS 可以轻松找到该文件。

请参阅下面的答案以获取更多详细信息。

**编辑：**

这个问题下的所有答案都很棒而且非常解释。我很难选择其中一个来将其标记为答案。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T14:32:28.457

抱歉，没有 C# 示例，但是：

指针是一个内存地址，在这种情况下，它指向对象在内存中的存储位置。这是 C++ 从 C 继承的一个低级概念。

关于手柄：

> 句柄一词用于表示任何可以让您访问另一个对象的技术——通用伪指针。该术语（故意）含糊不清。

另一个密切相关的重要术语是对象引用，它是对象的“别名”。

[您可能会在此页面](https://isocpp.org/wiki/faq/references#overview-refs)上获得相当清晰简洁的答案

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T15:11:46.470

句柄是抽象对象（位图、套接字、文件、内存等）的标识符，用于识别受操作影响的对象：`HBITMAP`、`socket`、`FILE*`是句柄的示例——它们实际上是整数，可能表示操作系统中某个表或映射中的索引。

严格来说，指针是内存中的一个精确位置。虽然指针有时用作句柄，但很少（如果有的话）反之亦然。

在面向对象的环境中，句柄被认为是低级实体，最好将句柄包装在对象中，该对象具有使用分配的句柄调用操作的方法。在这种情况下，您有一个对持有句柄的对象的引用，例如：`CBitmap`、`System.Net.Sockets.Socket`、`std::fstream`等。

在不深入研究语言宗教战争的情况下，有些人会争辩说其中一种更清洁、更安全、更快、更容易。它几乎总是取决于你所处的环境——如果你有选择的话，建议你直接在 C# 中使用句柄，而在 C 中使用句柄会更简单（也是必要的）。

**重要提示**：在 .Net 环境中，如果您必须进行封送处理，您最终会读到一些关于被称为句柄的实际对象引用的内容。这是因为它们实际上是引擎盖下的句柄而不是指针。因此，当您在对象上调用方法时，编译器实际上是使用可以在内存中自由移动的对象的句柄调用该方法。这使得垃圾收集器可以避免内存碎片。因此，`System.Drawing.Bitmap`您最终会得到一个指向句柄的指针的句柄。

**编辑：**

例如，C++ 中的 stdio/fstream：

```
// Read a short line from a file and output it to the console
// 256 bytes max for simplicity purposes

char buffer[256];

// With handle
FILE* file = fopen ("file.txt" , "r");
fgets(buffer, 256 , file);
std::cout << buffer << std::endl;
fclose (file);

// With object reference
{
  std::ifstream stream ("file.txt");
  stream.getline(buffer, 256);
  std::cout << buffer << std::endl;
} 
```

上面的例子使用了应该被认为是`FILE*`文件句柄的东西。`file`句柄是使用分配的，并`fopen`传递给诸如`fgets()`和之类的操作`close()`。`close()`释放句柄。

底部示例使用`std::ifstream`. 句柄在对象构造函数中分配，并且在该对象内部。要对文件进行操作，请使用该对象提供的方法，例如`getline()`. 当对象超出范围时，流析构函数会释放句柄，即在右括号处，或者如果对象是在堆上分配的，则需要显式删除它。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-22T14:45:24.560

句柄只是作为资源替代的一条信息。

最常见的示例是文件句柄，它通常只是分配给您打开的每个文件的整数，以便您可以区分它们。它们更常用于 C 等语言中，所有文件都包含在其中。 `open()`返回一个整数，然后在所有其他文件访问函数中，您需要将该值作为参数传递，以指定您所指的文件。例如，在函数`int read(int fd, void * ptr, int numbytes)`中，您可以将它作为 的参数传入`fd`。

C 提供了 3 个听起来很熟悉的标准文件句柄：

*   0：标准输入
*   1：标准输出
*   2：标准误差

在 C# 中，句柄通常被抽象为实现细节，取而代之的是给你一个与之交互的对象。我能想到的最好的例子是（现已弃用）[FileStream.Handle](http://msdn.microsoft.com/en-us/library/system.io.filestream.handle.aspx)属性：

```
public virtual IntPtr Handle { get; } 
```

# java - 覆盖在父类中为 EntityManager 声明的持久化上下文 unitName。

> ID：10704033
> 
> 赞同：2
> 
> 时间：2012-05-22T14:23:58.697
> 
> 标签：java, spring, hibernate, generics, jpa

我有一个看起来像这样的通用 DAO 类：

```
public class GenericDaoJpa <T extends DomainObject> implements GenericDao<T> {

    private final Class<T> type;

    @PersistenceContext(type=PersistenceContextType.TRANSACTION, unitName="myPersistenceUnit")
    protected EntityManager entityManager;

    public GenericDaoJpa(Class<T> type) {
        super();
        this.type = type;
    }

    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }

    public T get(Object id) {
        return (T) entityManager.find(type, id);
    }
} 
```

实现 DAO 类如下所示：

```
 @Repository("appDao")
    public class ProductDaoJpa extends GenericDaoJpa<Product> implements ProductDao{

    public ProductDaoJpa() {
        super(Product.class);
    }

    public List<Product> getAllProducts() {
        return getAll();
    }   
} 
```

我为不同的数据库配置了另一个名为 mySecondPersistenceUnit 的 persistentUnit。我想创建一个新的 DAO 类，它也将扩展 GenericDaoJpa 类，但使用不同的持久单元。如何扩展 GenericDaoJpa 类，但为每个 DAO 使用不同的持久单元？

我尝试将此声明移动到每个 DAO 类，但这会导致父类无法编译，因为它没有对 entityManager 的引用。

```
@PersistenceContext(type=PersistenceContextType.TRANSACTION, unitName="myPersistenceUnit")
protected EntityManager entityManager; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:33:18.713

尝试改用方法注入：

```
public class GenericDaoJpa <T extends DomainObject> implements GenericDao<T> {

    @PersistenceContext(type=PersistenceContextType.TRANSACTION, unitName="myPersistenceUnit")
    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }
} 
```

而需要使用不同PU的子类：

```
@Repository("appDao")
public class ProductDaoJpa extends GenericDaoJpa<Product> implements ProductDao{

    @Override
    @PersistenceContext(type=PersistenceContextType.TRANSACTION, unitName="mySecondPersistenceUnit")
    public void setEntityManager(EntityManager entityManager) {
        this.entityManager = entityManager;
    }
} 
```

# php - 为什么某些类没有从我的 CodeIgniter 库中加载

> ID：10704034
> 
> 赞同：0
> 
> 时间：2012-05-22T14:23:59.560
> 
> 标签：php, codeigniter, autoload, bootstrapping, evernote

我正在尝试将 Evernote SDK 集成到我的 CodeIgniter Web 应用程序中，并且库中的一些类已加载，而其他类则没有，:-SI 不明白为什么。

我有一段简单的代码：

```
$access_token = 'my validated access token ';

// Get User Store
$userStoreTrans;
try{
    $userStoreTrans = new THttpClient(USER_STORE_HOST, USER_STORE_PORT, USER_STORE_URL, USER_STORE_PROTO);
}
catch(TTransportException $e)
{
    print $e->errorCode.' Message:'.$e->parameter;
}

$userStoreProt = new TBinaryProtocol($userStoreTrans);
$userStoreClient = new UserStoreClient($userStoreProt, $userStoreProt); 
```

在正确创建 and 时，来自 Evernote SDK 的`$userStoreTrans`and类会抛出一个`$userStoreProt``THttpClient``TBinaryProtocol``$userStoreClient``Class 'UserStoreClient' not found in .../home.php`

我不明白为什么有些类被识别而另一些类不被识别，我可以看到的主要区别是“TClasses”在`evernote-sdk-php/lib/transport/*.php`and`evernote-sdk-php/lib/protocol/*.php`和 UserStoreClient 有一个额外的文件夹`evernote-sdk-php/lib/packages/UserStore/*.php`

我将解释如何将 evernote-sdk-php 包含到我的 CodeIgniter 安装中：

这是我的 CodeIgniter 配置/autoload.php

```
$autoload['libraries'] = array('database','session','form_validation','security','tank_auth','Evernote_bootstrap'); 
```

这是我的 Evernote_bootstrap.php 文件

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');

define("EVERNOTE_LIBS", dirname(__FILE__) . DIRECTORY_SEPARATOR . "evernote-sdk-php/lib");

// add ourselves to include path
ini_set("include_path", ini_get("include_path") . ":" . EVERNOTE_LIBS);

require_once("evernote-sdk-php/lib/autoload.php");
require_once("evernote-oauth/functions.php");

class Evernote_Bootstrap
{
    function __construct()
    {
        // log_message('debug','Evernote_Bootstrap');
    }
}
?> 
```

Evernote_Bootstrap 类的主要目的是`require_once of evernote-sdk-php/lib/autoload.php`，这个类是使用 -phpa Thrift 生成器标志自动生成的，我只添加一些日志来查看问题。

自动加载.php：

```
<?php

/**
 * Copyright (c) 2006- Facebook
 * Distributed under the Thrift Software License
 *
 * See accompanying file LICENSE or visit the Thrift site at:
 * http://developers.facebook.com/thrift/
 *
 * @package thrift
 * @author Mark Slee <mcslee@facebook.com>
 */

/**
 * Include this file if you wish to use autoload with your PHP generated Thrift
 * code. The generated code will *not* include any defined Thrift classes by
 * default, except for the service interfaces. The generated code will populate
 * values into $GLOBALS['THRIFT_AUTOLOAD'] which can be used by the autoload
 * method below. If you have your own autoload system already in place, rename your
 * __autoload function to something else and then do:
 * $GLOBALS['AUTOLOAD_HOOKS'][] = 'my_autoload_func';
 *
 * Generate this code using the -phpa Thrift generator flag.
 */

/**
 * This parses a given filename for classnames and populates
 * $GLOBALS['THRIFT_AUTOLOAD'] with key => value pairs
 * where key is lower-case'd classname and value is full path to containing file.
 *
 * @param String $filename Full path to the filename to parse
 */
function scrapeClasses($filename) {
  $fh = fopen($filename, "r");
  while ($line = fgets($fh)) {
    $matches = array();
    if ( preg_match("/^\s*class\s+([^\s]+)/", $line, $matches)) {
      if (count($matches) > 1)
        $GLOBALS['THRIFT_AUTOLOAD'][strtolower($matches[1])] = $filename;
    }
  }
}

function findFiles($dir, $pattern, &$finds) {
  if (! is_dir($dir))
    return;
  if (empty($pattern))
    $pattern = "/^[^\.][^\.]?$/";
  $files = scandir($dir);
  if (!empty($files)) {
    foreach ($files as $f) {
      if ($f == "." || $f == "..")
        continue;
      if ( is_file($dir . DIRECTORY_SEPARATOR . $f) && preg_match($pattern, $f)) {
        $finds[] = $dir . DIRECTORY_SEPARATOR . $f;
      } else if ( is_dir($dir . DIRECTORY_SEPARATOR . $f) && substr($f, 0, 1) != ".") {
        findFiles($dir . DIRECTORY_SEPARATOR . $f, $pattern, $finds);
      }
    }
  }
}
function str_var_dump($object)
  {
    ob_start();
    var_dump($object);
    $dump = ob_get_clean();
    return $dump;
  }

// require Thrift core
require_once(dirname(__FILE__) . DIRECTORY_SEPARATOR . "Thrift.php");

if (! isset($GLOBALS['THRIFT_ROOT']))
  $GLOBALS['THRIFT_ROOT'] = dirname(__FILE__);

log_message('debug','bootstrap autoload.php is executing');

// stuff for managing autoloading of classes
$GLOBALS['THRIFT_AUTOLOAD'] = array();
$GLOBALS['AUTOLOAD_HOOKS'] = array();
$THRIFT_AUTOLOAD =& $GLOBALS['THRIFT_AUTOLOAD'];

// only populate if not done so already
if (empty($GLOBALS['THRIFT_AUTOLOAD'])) {
  //$allLibs = glob( dirname(__FILE__) . "/**/*.php");  // oh poor winblows users can't use glob recursively
  $allLibs = array();
  findFiles( dirname(__FILE__), "/\.php$/i", $allLibs);
  log_message('debug',str_var_dump($allLibs));
  if (!empty($allLibs)) {
    foreach ($allLibs as $libFile) {
      scrapeClasses($libFile);
    }
    log_message('debug','all scrapped classes: ' . str_var_dump($GLOBALS['THRIFT_AUTOLOAD']));
  }
}else{
  log_message('debug','$GLOBALS[THRIFT_AUTOLOAD] already defined');
}

// main autoloading
if (!function_exists('__autoload')) {
  function __autoload($class) {
    log_message('debug','__autoload');
    global $THRIFT_AUTOLOAD;
    $classl = strtolower($class);
    if (isset($THRIFT_AUTOLOAD[$classl])) {
      // log_message('debug','$THRIFT_AUTOLOAD[$classl] is set, do require_once');
      //include_once $GLOBALS['THRIFT_ROOT'].'/packages/'.$THRIFT_AUTOLOAD[$classl];
      require_once($THRIFT_AUTOLOAD[$classl]);
    } else if (!empty($GLOBALS['AUTOLOAD_HOOKS'])) {
      log_message('debug','$GLOBALS[AUTOLOAD_HOOKS]is no empty, lets foreach');
      foreach ($GLOBALS['AUTOLOAD_HOOKS'] as $hook) {
        // log_message('debug','iterate');
        $hook($class);
      }
    } else {
        log_message('debug','nothing to do');
    }
  }  
} 
```

然后我记录了那个库，似乎工作正常。您可以看到主要的重要日志：`log_message('debug',str_var_dump($allLibs));`和`log_message('debug','all scrapped classes: ' . str_var_dump($GLOBALS['THRIFT_AUTOLOAD']));`输出：[http](http://pastebin.com/8w1MCKx9) ://pastebin.com/8w1MCKx9 ：

正如你所看到的，UserStore 类似乎与 THttpClient 或 TBinaryProtocol 一样好加载......关于这个问题的任何想法？

我不知道这是否重要，但我注意到`$GLOBALS['THRIFT_ROOT']`在 autoload.php 上定义的，不能从 CI 控制器访问。可能我错过了关于 CI 架构的一些东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:37:40.843

在我们最新的 SDK 更新中，UserStoreClient（和其他 SDK 类）位于适当的命名空间中。假设您正在使用我们生成的代码，您是否导入了您正在使用的类？例如

```
use EDAM\UserStore\UserStoreClient; 
```

# android - ArrayAdapter 过滤器返回错误的项目

> ID：10704037
> 
> 赞同：0
> 
> 时间：2012-05-22T14:24:12.167
> 
> 标签：android

我在使用自定义对象过滤数组适配器时遇到问题。我 owerride 自定义对象 toString() 所以它返回我想要过滤的名称。问题是它提交了正确的项目计数但错误的项目。例如，我有包含项目 a1、a2、b1、b2 的列表。当我输入 b 时，它会过滤并看到 a1，a2。这是我的适配器代码。我想问题在那里：

```
class CustomerAdapter extends ArrayAdapter<Customer> {

private LayoutInflater mInflater;
private List<Customer> customers;

public CustomerAdapter(Context context, int textViewResourceId,
        List<Customer> customers) {
    super(context, textViewResourceId, customers);
    mInflater = LayoutInflater.from(context);
    this.customers = customers;
}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder;

    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.customers_list_item, null);

        holder = new ViewHolder();
        holder.text = (TextView) convertView
                .findViewById(R.id.textViewCustomerName);
        holder.icon = (LinearLayout) convertView
                .findViewById(R.id.linearLayoutCustomersListEdit);

        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    // Bind the data efficiently with the holder.
    holder.text.setText(customers.get(position).getCustomerName());

    return convertView;
}

static class ViewHolder {
    TextView text;
    LinearLayout icon;
} 
```

}

这是过滤器设置和调用：

```
customerAdapter = new CustomerAdapter(this,
                R.layout.customers_list_item, repository.getCustomers());
setListAdapter(customerAdapter);

etSearch = (EditText) findViewById(R.id.editText_customers_search);
        etSearch.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int arg1, int arg2,
                int arg3) {
            customerAdapter.getFilter().filter(s.toString());
        }

        @Override
        public void beforeTextChanged(CharSequence arg0, int arg1,
                int arg2, int arg3) {
        }

        @Override
        public void afterTextChanged(Editable arg0) {
        }
    });

    getListView().setTextFilterEnabled(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:47:45.177

```
List<Customer> customers = new List<Customer>();
List<Customer> tempcustomers = new List<Customer>();
customers = repository.getCustomers();
etSearch .addTextChangedListener(new TextWatcher() {
            @Override
            public void onTextChanged(CharSequence s, int start, int before, int count) {
                // TODO Auto-generated method stub
                System.out.println("onTextChanged Key presed..."+s);

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {
                // TODO Auto-generated method stub
                System.out.println("beforeTextChanged Key presed..."+filterText.getText());

            }

            @Override
            public void afterTextChanged(Editable s) {
                // TODO Auto-generated method stub
                System.out.println("afterTextChanged Key presed..."+filterText.getText());
                if (!etSearch .getText().toString().equalsIgnoreCase("")){
                    tempcustomers = new List<Customer>();
                    String text = etSearch .getText().toString();

                    for(int i=0 ;i< customers .size();i++){

                        if(customers .get(i).toUpperCase().toString().contains(text.toUpperCase())){
                            tempcustomers .add(customers .get(i));

                        }
                    }

                        }
                    customerAdapter = new CustomerAdapter(this,
                R.layout.customers_list_item,tempcustomers  );
setListAdapter(customerAdapter);

                }else{
                    customerAdapter = new CustomerAdapter(this,
                R.layout.customers_list_item,customers  );
setListAdapter(customerAdapter);

                }
            }
        });
    } 
```

# jquery - 使用 JSON 集合序列化的 MVC3 表单使用 Ajax Post 为空

> ID：10704043
> 
> 赞同：0
> 
> 时间：2012-05-22T14:24:36.680
> 
> 标签：jquery, ajax, asp.net-mvc-3

我试图传回一个具有属性的对象，该属性是对象的集合，但是在我的 Ajax 帖子中使用序列化表单作为数据属性时，该集合为空（null）。这是将包含列表作为属性的对象传回的错误方法，还是我忽略了一些简单的东西？当我进入控制器操作时，我可以看到我填充了 Holder.Id 属性，但 MyList 为空。

我试过在没有帮助的情况下制作 contentType: 'application/json' 。我希望将完整对象作为 Ajax 发布的有效负载，而不是集合中的每个单独项目。当使用每个单独的项目调用 Ajax 时，它确实有效，我可能不得不使用该方法。

简单的 POCO 对象：

```
public class Holder
{
    public int Id { get; set; }
    public List<Contained> MyList { get; set; }
}

public class Contained
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

控制器方法：

```
 [HttpGet]
    public ActionResult Edit()
    {
        List<Contained> contained = new List<Contained>();
        contained.Add(new Contained{Id=123, Name="123Name"});
        contained.Add(new Contained{Id=456, Name="456Name"});
        return View(new Holder { Id = 1001, MyList = contained });

    }

    [HttpPost]
    public JsonResult Edit(Holder holder)
    {
        return Json("Succeeded");
    } 
```

html标记：

```
@model Compeat.MyMvcApp.Controllers.Holder
@{
     ViewBag.Title = "Edit";
}
<script type="text/javascript">
$(document).ready(function () {
    $("#btnAdd").click(function () {
        var coll = [];
        var newName = $("#txtAddNameToList").val();
        coll.push(newContainedJson(999, newName));
        $("#MyList").val(coll);
        var frmElems = $("form").serialize();
        console.log(coll);
        $.ajax({
            type: "POST",
            data: coll,
            url: "Edit",
            dataType: "json",
            success: function (data) { alert('worked!'); },
            error: function (data) {
                alert('error: ' + data.responseText);
            }
        });
    });

    function newContainedJson(id, name) {
        return { "Id": id , "Name": name };
    }
});
</script>
<ul>
@foreach (var o in Model.MyList)
{
    <li>@o.Name</li>
}
</ul>
@{ using (Html.BeginForm())
   {
@Html.HiddenFor(e => e.Id)
<input type="hidden" name="MyList" id="MyList" value="" />
<input type="text" id="txtAddNameToList" name="txtAddNameToList" />
<input type="button" id="btnAdd" value="Add Name" />
}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:36:00.420

使用下面的 JQuery 并在控制器中设置断点。

```
 $("#btnAdd").click(function () {

        var data = {}
        data.Id = 9;
        data.MyList = [];
        data.MyList.push({ 'Id': 99, 'Name': 'Dude' });
        data.MyList.push({ 'Id': 990, 'Name': 'Dude2' });

        $.ajax({
            type: "POST",
            data: JSON.stringify(data),
            url: "Home/Index",
            dataType: "json",
            contentType: 'application/json',
            success: function (data) { alert('worked!'); },
            error: function (data) {

            }
        });
    }); 
```

# python-2.7 - ZMQ IOLoop 实例写入/读取工作流

> ID：10704045
> 
> 赞同：3
> 
> 时间：2012-05-22T14:24:54.903
> 
> 标签：python-2.7, zeromq, pyzmq

使用 PyZMQ 的 IOLoop 实例时，我遇到了奇怪的系统行为：

```
def main():
    context = zmq.Context()
    s = context.socket(zmq.REP)
    s.bind('tcp://*:12345')
    stream = zmqstream.ZMQStream(s)
    stream.on_recv(on_message)

    io_loop = ioloop.IOLoop.instance()
    io_loop.add_handler(some_file.fileno(), on_file_data_ready_read_and_then_write, io_loop.READ)
    io_loop.add_timeout(time.time() + 10, another_handler)
    io_loop.start()

def on_file_data_ready_read_and_then_write(fd, events):
   # Read content of the file and then write back
   some_file.read()
   print "Read content"
   some_file.write("blah")
   print "Wrote content"

def on_message(msg):
   # Do something...
   pass

if __name__=='__main__':
    main() 
```

基本上，事件循环监听 12345 的 zmq 端口以获取 JSON 请求，并在可用时从文件中读取内容（当它这样做时，对其进行操作并回写。基本上，该文件是一个特殊的 /proc/ 内核模块，已构建为了那个原因）。

一切正常，但由于某种原因，在查看 strace 时，我看到以下内容：

```
...
1\. read(\23424) <--- Content read from file
2\. write("read content")
3\. write("Wrote content")
4\. POLLING
5\. write(\324324) # <---- THIS is the content that was sent using some_file.write()
... 
```

所以看起来写入文件不是按照 python 脚本的顺序完成的，但是写入该文件的系统调用是在轮询之后完成的，即使它应该在第 2 行和第 3 行之间完成。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:48:44.853

看起来您遇到了缓存问题。如果 some_file 是类似对象的文件，您可以尝试在其上显式调用 .flush() ，ZMQ Socket 也是如此，它也可以出于效率原因保存消息。

就目前而言，当 some_file 引用被垃圾收集时，文件的内容将被刷新。

额外的：

使用较新版本的 Python 通过 open() 提供的上下文管理器逻辑

```
with open("my_file") as some_file:
     some_file.write("blah") 
```

一旦完成此上下文， some_file 将自动刷新并关闭。

# c - 是什么导致该程序无法可靠执行

> ID：10704048
> 
> 赞同：-3
> 
> 时间：2012-05-22T14:25:00.893
> 
> 标签：c

我最近做了一个程序，它应该采用两个环境变量，将它们插入一个字符串，然后将字符串发送到 popen，它大部分时间都可以正常工作，但由于某种原因，它不会经常随机执行，所以我只是想知道是否有人看到我正在犯的任何可能的错误或错误？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main(int argc, char *argv[], char *envp[]) {

   char *output;
   char *ccode;
   char *command;
   char *log;

   command = malloc(1024);
   log = malloc(1024);
   const char *parg = getenv("MCEXEC_ARGS");
   const char *pname = getenv("MCEXEC_PLAYERNAME");

   if(strcmp(parg,"")==0) {
       output = "Usage: /staff <message>";
       printf( "%s\n", output );
       return 0;
   }

   freopen("/dev/null","w",stdout);

   if (argv[1] == NULL) {
       snprintf(command, 1024,
                "/home/minecraft/remoteclient01a.py 'sendmsgtogroup staff §f(§bSTAFF§f) <%s§f> %s'",
                pname, parg);
       snprintf(log, 1024,
                "/home/minecraft/remoteclient01a.py 'savetolog info staffmsg: <%s> %s'",
                pname, parg);
   }
   else if (strcmp(argv[1],"me")==0) {
       snprintf(command, 1024,
                "/home/minecraft/remoteclient01a.py 'sendmsgtogroup staff §f(§bSTAFF§f) * %s§f %s'",
                pname, parg);
       snprintf(log, 1024,
                "/home/minecraft/remoteclient01a.py 'savetolog info staffmsg: * %s %s'",
                pname, parg);
   }

   popen(command, "w");
   popen(log, "w");

   free(command);
   free(log);

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:31:02.787

好 ...

*   你没有检查`malloc()`成功。
*   您没有处理环境变量可能不存在。
*   您正在调用`strcmp()`一个可能为 NULL 的指针；这可能会在那里杀死你的程序。
*   您没有检查文件打开是否成功。
*   命令字符串中有奇怪的 § 字符，不确定这些字符是否有意。
*   你不检查是否`popen()`成功。
*   I don't think your usage of `popen()` makes sense; you're not using the pipes once opened.

# hudson - 如何在 Jenkins 电子邮件报告中插入外部数据？

> ID：10704050
> 
> 赞同：2
> 
> 时间：2012-05-22T14:25:06.960
> 
> 标签：hudson, jenkins, jelly

是否可以传递在“执行外壳”构建步骤中执行的脚本生成的数据并将其插入到电子邮件报告中。我正在使用 email-ext 插件和 Jelly 模板。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:58:39.393

使用[EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)将变量“传播到外部”。[这是你可以做到的](https://stackoverflow.com/a/10626193/1178189)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-19T10:18:15.567

我使用基于 groovy 的电子邮件模板。请参阅下面我发现的内容。也许它对 Jelly 模板也有帮助：

```
<%
    import hudson.model.*

    def YOUR_VARIABLE= build.getEnvVars()["SOME_BUILD_PARAMETER"];
%> 
```

然后你可以使用

```
${YOUR_VARIABLE} 
```

# g++ - g ++中无用的错误消息

> ID：10704057
> 
> 赞同：0
> 
> 时间：2012-05-22T14:25:31.997
> 
> 标签：g++

对于 g++ 4.1.2，我到处都收到这些错误消息，但它根本没有帮助：

```
<file>:<line>: error: expected primary-expression before 'int'
<file>:<line>: error: expected ';' before 'int'
<file>:<line>: error: invalid use of qualified-name '::SuccessCode' 
```

它发生的代码就像这样简单：

```
class Test
{
  static Status debug_function(void)
  {
    return Status::SuccessCode();   // this would be <file>:<line> mentioned above
    // and this one too:
    // return Status::FailureCode("test");
  }
}; 
```

这是 Status 的代码（*是的，它已正确包含，因为如果包含文件无效，我会遇到错误*）：

```
namespace CODES
{
  enum Values { Success = 0, Failed = 1 };
}

class Status
{
private:
  CODES::Values code;
  string msg;
public:
  Status(CODES::Values val, const string &i_msg ): code(val), msg(i_msg) {}

  static Status SuccessCode(void)
  {
    return Status(CODES::Success, "");
  }

  static Status FailureCode(const string &fail_msg)
  {
    return Status(CODES::Failed, fail_msg);
  }
}; 
```

那么，这段代码有什么问题呢？并且在 VC++ 下可以正常编译！

编辑：实际上， SuccessCode 和 FailureCode 的代码在 *.cpp 文件中。我将它们放在类声明中，因为错误消息仍然相同！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:41:30.723

如果没有完整的程序，我将不得不猜测。我的猜测是：你`#define Status int`的程序中有一个地方。

# jquery - Carousel 不会将其幻灯片居中

> ID：10704064
> 
> 赞同：0
> 
> 时间：2012-05-22T14:25:57.267
> 
> 标签：jquery, center, carousel

我的 jQuery 轮播出现问题：当我单击“下一张幻灯片”按钮时，它的幻灯片不会在视口上居中。

相反，它们将被放置在中心的“某处”，稍微错位，因为 jQuery 似乎根据轮播的总宽度滑动我的图像（我认为）。

这是我为您制作的测试页面，以便您更好地看到它：

[http://paragraphe.org/stackoverflowdemos/slider-how-to-center-slides/](http://paragraphe.org/stackoverflowdemos/slider-how-to-center-slides/)

...这是我正在使用的代码，取自 WordPress 主题。我玩了一段时间并改变了一些行为，但不是我主要关心的问题。

```
jQuery(document).ready(function () {
    jQuery("#mainholder").css("width", "100%");
    jQuery("#mainindex").css("width", "100%");
    jQuery("#mainholder #holder div.singleitem").css({
        "margin-left": 10
    });
    jQuery("#mainholder #holder div.singleitem").last().addClass("last").css({
        "border-right": "10px"
    });
    jQuery("#mainindex #imagediv img").css({
        "margin-left": 0
    });
    jQuery("#mainindex #imagediv img").last().css({
        "margin-right": 0
    });
    totalwidth = jQuery("#holder").width(); // Total large image width          
    totalimages = jQuery("#holder .singleitem").size();
    totalwidth = totalwidth + (10) * (totalimages + 1);
    jQuery("#holder").css({
        "width": totalwidth
    });
    sliderwidth = 1;
    jQuery("#imagediv img").each(function () {
        sliderwidth = sliderwidth + parseInt(jQuery(this).attr("width")) + 1;
    });
    jQuery(".end").css("right", "0");
    if (totalimages <= 1) {
        jQuery("#mainholder").addClass("fixwidth");
        jQuery("#mainholder").css("width", "960px");
        jQuery("a.leftnav,a.rightnav").hide();
    }
    variablechange(); //for initialization before window resize is called
    function variablechange() {
        tempslidedist = new Array();
        slidedist = new Array();
        screenwidth = jQuery(window).width(); // Visible screen width
        handlewidth = ((screenwidth / 10) - 6); // width of the slider handle according to the width of the screen      
        screenmid = (screenwidth) / 2; // Middle of visible screen
        tempval = (screenmid * 10000) / (totalwidth); // The total distance the slider has moved when it reaches the middle of the screen.
        mval = totalwidth * .000095; //
        holdermulti = (totalwidth - screenwidth + 10) / 1000; // Multiple value with which the main images move     
        halfhandlewidth = handlewidth / 2;
        jQuery("#imagediv").css("width", (sliderwidth) + "px");
        indexwidth = (sliderwidth - handlewidth - 5);
        jQuery("#index").css("width", indexwidth + "px");
        divratio = (indexwidth) / 1000;
        if (sliderwidth > screenwidth) {
            jQuery("#index").css("margin-left", "71px");
        } else {
            jQuery("#index").css("margin-left", "");
        }
        slidespeed = (1000 / (sliderwidth)) * 95;
        if (sliderwidth < (handlewidth + 10) || totalimages == 0) { //+10 is added to make the difference larger so when they are almost same, the
            error doesnot takeplace
            jQuery("#mainindex").hide();
            jQuery(".slider-navigation a.leftnav, .slider-navigation a.rightnav").hide();
        } else {
            jQuery("#mainindex").show();
            jQuery(".slider-navigation a.leftnav, .slider-navigation a.rightnav").show();
        }
        for (var i = 0; i < totalimages; i++) {
            if (i == 0) {
                tempslidedist[i] = ((jQuery("#imagediv img:eq(" + (i) + ")").width() - ((handlewidth + 3) / 2)) + (jQuery("#imagediv
 img:eq(" + (i + 1) + ")").width() / 2) + 0);
            } else {
                tempslidedist[i] = (tempslidedist[i - 1] + jQuery("#imagediv img:eq(" + (i) + ")").width() / 2 + jQuery("#imagediv
 img:eq(" + (i + 1) + ")").width() / 2 + 0);
            }
            slidedist[i] = Math.round(((tempslidedist[i])) / divratio);
        }
    }
    jQuery(".imgexcerpt").hide();
    jQuery(".imglink").mouseover(function () {
        jQuery("#mainholder").addClass("disablemove");
    });
    jQuery(".imglink").mouseout(function () {
        jQuery("#mainholder").removeClass("disablemove");
    });
    jQuery(".imgexcerpt").mouseover(function () {
        jQuery("#mainholder").addClass("disablemove");
    });
    jQuery(".imgexcerpt").mouseout(function () {
        jQuery("#mainholder").removeClass("disablemove");
    });
    jQuery(".imglink").click(function (e) { //Toggling the show/hide the img excerpt link   
        thisimgwidth = jQuery(this).parent().find("img").width();
        if (thisimgwidth < 355) {
            exceptwidth = (.85 * thisimgwidth);
        } else {
            exceptwidth = 340;
        }
        jQuery(this).parent().siblings().find(".imgexcerpt").fadeOut("fast").end().find("img").fadeTo("fast", 1).end().find(".imglink").addClass("show");
        if (jQuery(this).hasClass("show")) {
            jQuery(this).parent().find(".imgexcerpt").css({
                "width": exceptwidth
            }).fadeIn("fast");
            jQuery(this).parent().find("img").fadeTo("fast", .3);
            jQuery(this).removeClass("show");
        } else {
            jQuery(this).parent().find(".imgexcerpt").css({
                "width": exceptwidth
            }).fadeOut("fast");
            jQuery(this).parent().find("img").fadeTo("fast", 1);
            jQuery(this).addClass("show");
        }
    });
    jQuery("#index").slider({
        max: 1000,
        animate: true,
        step: 1,
        change: ifSliderChange,
        slide: ifSliderSlide
    });
    jQuery("#index").slider("value", (0));
    jQuery("#index").css("z-index", "99");
    mainfunctions(); //for initialization before window resize  
    function mainfunctions() {
        jQuery("#index .ui-slider-handle").css("width", (handlewidth) + "px");
        if (sliderwidth < screenwidth) {
            jQuery("#index .ui-slider-handle").css("margin", "0 -" + (handlewidth / 2 + 3) + "px");
        }
    }
    animating = false;
    click = -1;
    jQuery(".leftnav").live("click", function () {
        if (!animating && !jQuery("#mainholder").hasClass("disablemove")) {
            if (click >= 0) {
                click--;
            }
            var sliderpos = jQuery("#index").slider("value");
            var flag = 0;
            for (var j = totalimages; j >= 0; j--) {
                if ((sliderpos > slidedist[(j)]) && flag == 0) {
                    click = j;
                    flag = 1;
                }
            }
            if (click < 0) {
                jQuery("#index").slider("value", (0));
            } else {
                jQuery("#index").slider("value", (slidedist[click]));
            }
            animating = true;
        }
    });
    jQuery(".rightnav").live("click", function () {
        if (!animating && !jQuery("#mainholder").hasClass("disablemove")) {
            click++;
            var sliderpos = jQuery("#index").slider("value");
            var flag = 0;
            for (var j = 0; j < totalimages; j++) {
                if ((slidedist[(j)] > sliderpos) && flag == 0) {
                    click = j;
                    flag = 1;
                }
            }
            if (sliderpos >= 1000) {
                jQuery("#index").slider("value", (0));
                click = -1;
            } else {
                jQuery("#index").slider("value", (slidedist[click]));
            }
            animating = true;
        }
    });
    jQuery(".end").css("z-index", "99");
    jQuery(".start").css("z-index", "99");
    jQuery(".end").click(function () {
        jQuery("#index").slider("value", (1000));
    });
    jQuery(".start").click(function () {
        jQuery("#index").slider("value", (0));
    });
    jQuery(window).resize(function () {
        variablechange();
        mainfunctions();
    });

    function ifSliderChange(e, ui) {
        jQuery("#mainindex").animate({
            scrollLeft: (((ui.value - tempval) * mval))
        }, 500);
        jQuery("#mainholder").animate({
            scrollLeft: (ui.value * holdermulti)
        }, 500, function () {
            animating = false;
        });
    }

    function ifSliderSlide(e, ui) {
        jQuery("#mainholder").prop({
            scrollLeft: (ui.value * holdermulti)
        });
    }
}); 
```

您知道一种在视口中心获取图像的方法吗？

非常感谢！

# c# - 将 DatePicker 绑定到日期列表

> ID：10704068
> 
> 赞同：1
> 
> 时间：2012-05-22T14:26:12.243
> 
> 标签：c#, wpf, xaml, binding, charts

可能无关紧要，但我有一个 Infragistics XamDataChart，它有一个 CategoryXAxis 日期。我已经设法将日期选择器绑定到图表中可用的日期范围，但我确实需要绑定到图表上绘制的特定日期列表。

```
<DatePicker x:Name="statsDatePicker" DisplayDateStart="{Binding Path=ActualMinimumValue.Date, ElementName=xAxisPath, Mode=OneWay, StringFormat=\{0:d\}}" DisplayDateEnd="{Binding ElementName=xAxisPath, Path=ActualMaximumValue.Date, Mode=OneWay, StringFormat=\{0:d\}}" SelectedDateChanged="DatePicker_SelectedDateChanged" /> 
```

我发现您可以提供一个不适用日期列表，但是如何将我拥有的日期范围转换为我没有的日期范围？或者，有没有办法为日期选择器提供我有的日期而不是我没有的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:46:03.263

也许是这样的？

```
DateTime end = DateTime.MaxValue;
DateTime start = DateTime.MinValue;
List<DateTime> datesIHave= new List<DateTime>();
datesIHave.Add(DateTime.Now);
List<DateTime> allDates = Enumerable.Range(0, 1 + end.Subtract(start).Days).Select(offset => start.AddDays(offset)).ToList();
List<DateTime> blackoutDates = (from a in allDates 
                                where !datesIHave.Contains(a)
                                select a).ToList(); 
```

# java - 我应该在 try 块中对语句进行分组吗？

> ID：10704069
> 
> 赞同：1
> 
> 时间：2012-05-22T14:26:13.857
> 
> 标签：java, exception, exception-handling

选项 A：

```
public void method() {
  try {
    // some operation that throws FirstException
  } catch (FirstException ex) {
    throw new RuntimeException(ex);
  }
  try {
    // some operation that throws SecondException
  } catch (SecondException ex) {
    throw new RuntimeException(ex);
  }
} 
```

选项 B：

```
public void method() {
  try {
    // some operation that throws FirstException
    // some operation that throws SecondException
  } catch (FirstException ex) {
    throw new RuntimeException(ex);
  } catch (SecondException ex) {
    throw new RuntimeException(ex);
  }
} 
```

哪个更好，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:42:25.733

如果您的问题是关于性能的，那么不，这两个选项没有区别。它们都具有相同的处理开销，相同的编译时间（或多或少）。问题更多是关于功能和可读性。

当然选项 B 更具可读性。

但是，如果您没有`RuntimeException`在 catch 块中抛出 a，那么我会建议使用选项 A，因为在选项 A 中，即使抛出第一个异常，第二个操作也会执行。

`After an exception is thrown from a try block the execution control will never return to the same try block.`

但是在选项 A 中，由于两个操作都在单独的 try 块中，不像选项 B，所以不会出现这样的问题。在第一次操作中遇到异常并处理后，如果您在选项 A 中*编码允许，您可以继续进行第二次操作。*

但是，如果您坚持`RuntimeException`从 catch 块中抛出，那么就像我说的那样，除了可读性之外，这两个选项都没有区别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:33:08.530

路易吉是对的。B 更容易阅读。但是大卫说了一些非常重要的事情：因为我们没有区分异常处理你可以做的：

```
public void method() {
  try {
    // some operation that throws FirstException
    // some operation that throws SecondException
  } catch (Throwable ex) {
    throw new RuntimeException(ex);
  }
} 
```

鉴于我们不想以不同的方式处理未来的新异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:30:54.847

如果您没有 `RuntimeException(ex)`在第一个选项中抛出 then ，那么第二次尝试也会执行。

在第二个选项中，如果第一行`try`已经抛出，`FirstException`它将不会执行`try`块中的任何其他行..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T14:31:55.690

在选项 A 中，您将能够捕获两个异常。在选项 B 中，当且仅当未抛出 FirstException 时，您才会捕获 SecondException

如果始终抛出 FirstException，那么您有无法访问的语句（SecondException 的代码）。这不会产生编译器错误

# powershell - 将 NLB 绑定到接口

> ID：10704075
> 
> 赞同：1
> 
> 时间：2012-05-22T14:26:31.643
> 
> 标签：powershell, nlb

我已经安装并设置了 NLB。我得到这样的接口数据：

```
Get-NlbClusterNodeNetworkInterface

InterfaceName       : quanet
   NlbBound            : False
   Cluster             :
   DhcpEnabled         : False
   InterfaceIP         : 10.165.250.206
   InterfaceSubnetMask : 255.255.0.0
   ClusterPrimaryIP    :
   ClusterSubnetMask   :

   InterfaceName       : cluster
   NlbBound            : False
   Cluster             :
   DhcpEnabled         : False
   InterfaceIP         : 172.16.1.206
   InterfaceSubnetMask : 255.255.255.0
   ClusterPrimaryIP    :
   ClusterSubnetMask   : 
```

我想使用 Powershell 将 NlbBound 设置为 true。不用说设置属性不起作用。例如

```
 $x = Get-NlbClusterNodeNetworkInterface
   $x[1].nlbbound = $true
   $x = Get-NlbClusterNodeNetworkInterface
   echo $x[1].NlbBound
   False 
```

我想避免在网络适配器设置中显式设置属性，因为此功能将存在于脚本中。如果可能的话，我也想避免使用 WMI。

根据 Get-Member cmdlet，NlbBound 属性是可设置的：

```
Get-Member -InputObject $x[1]

   TypeName: Microsoft.NetworkLoadBalancingClusters.PowerShell.NetworkInterface

Name                MemberType Definition
----                ---------- ----------
Equals              Method     bool Equals(System.Object obj)
GetHashCode         Method     int GetHashCode()
GetType             Method     type GetType()
ToString            Method     string ToString()
Cluster             Property   System.String Cluster {get;set;}
ClusterPrimaryIP    Property   System.String ClusterPrimaryIP {get;set;}
ClusterSubnetMask   Property   System.String ClusterSubnetMask {get;set;}
DhcpEnabled         Property   System.Boolean DhcpEnabled {get;set;}
InterfaceIP         Property   System.String InterfaceIP {get;set;}
InterfaceName       Property   System.String InterfaceName {get;set;}
InterfaceSubnetMask Property   System.String InterfaceSubnetMask {get;set;}
NlbBound            Property   **System.Boolean NlbBound {get;set;}** 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:30:45.007

```
Import-Module ServerManager

# Interface cards should be named the same and have a fixed IP
$interfaceName = "NLB"
$clusterName = "NLB-Cluster"
$clusterIpAddress = "1.2.3.0"
$clusterSubnet = "255.0.0.0"

# Install Network Load Balancing and Tools
Write-Host "Install Network Load Balancing and Tools"
Add-WindowsFeature NLB, RSAT-NLB
Import-Module NetworkLoadBalancingClusters

# If the cluster hasn't been created yet then create it
if (!(Get-NlbCluster -HostName $clusterIpAddress -ErrorAction SilentlyContinue))
{
    Write-Host "Creating NLB Cluster: $clusterName" -ForegroundColor yellow 

    # Create Cluster (default unicast)
    New-NlbCluster -InterfaceName $interfaceName -ClusterName $clusterName -ClusterPrimaryIP $clusterIpAddress -SubnetMask $clusterSubnet 

    # Remove defaults
    Write-Host "Removing default port rules" -ForegroundColor yellow 
    Get-NlbClusterPortRule | Remove-NlbClusterPortRule -Force

    # Create port rules
    Get-NlbCluster | Add-NlbClusterPortRule -StartPort 80 -EndPort 80 -Protocol TCP -Affinity None | Out-Null
    Get-NlbCluster | Add-NlbClusterPortRule -StartPort 443 -EndPort 443 -Protocol TCP -Affinity None | Out-Null 
}
else
{
    Get-NlbCluster 
}

# if this node isn't already a member of a cluster then add it
if(!(Get-NlbClusterNode -HostName $env:COMPUTERNAME))
{
    # Add node to cluster
    Write-Host "Adding node to cluster: $clusterName" -ForegroundColor yellow 
    Get-NlbCluster -HostName $clusterIpAddress | Add-NlbClusterNode -NewNodeName $env:COMPUTERNAME -NewNodeInterface $interfaceName
}
else
{
    Get-NlbClusterNode
} 
```

# .net - datagridview 复制到剪贴板异常

> ID：10704078
> 
> 赞同：0
> 
> 时间：2012-05-22T14:26:40.800
> 
> 标签：.net, datagridview, clipboard

我正在尝试将大量数据（约 50,000 行，200 列双精度数）从 datagridview 复制到剪贴板。为此，我选择所有单元格并按 Ctrl+C，此时我认为 datagridview 会在内部处理实际的剪贴板复制。程序暂停几秒钟，然后显示神秘消息......

“参数‘提示’不能转换为类型‘字符串’。”

...然后程序退出。

过去我已经从 datagridview 复制到剪贴板很多次，但从来没有这么多的单元格。无论如何，我不认为这对于今天的计算机来说是过多的数据。

这是调试一个更大问题的一部分，我在其中编写了一个例程，将整个 datagridview 复制到剪贴板，打开一个新的 Excel 工作簿，然后转储到 Excel。如果我为这个特定的 datagridview 运行该例程，我会得到一个 System.OutofMemory 异常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:24:46.177

也许我太快说 50K 行 + 200 列对于剪贴板来说是一个可管理的数量。该判断部分来自在 Excel 中复制和粘贴类似数量的能力，但经过进一步检查，我不确定 Excel 是否/何时/如何使用剪贴板。所以也许我超出了合理的内存需求......我已经转向零碎的方法。

# javascript - 用 JavaScript 控制 SVG 的 SMIL

> ID：10704081
> 
> 赞同：6
> 
> 时间：2012-05-22T14:26:53.333
> 
> 标签：javascript, html, animation, svg, smil

假设我有一个昆虫的 SVG。除非以这种方式不可能，否则我想将其插入为`<img />`或`<object />`标记。

现在，*insect.svg*有两个动画：一个用于行走，另一个用于飞行。

我想从 HTML 的 JavaScript 单独启动/停止这些动画（或者从 HTML JavaScript 调用嵌入 SVG JS 函数“walk”或“fly”）。

所以，最后，如果在游戏过程中我想让我的昆虫飞起来，我可以用 JS 告诉它这样做，并在它不应该再飞时告诉它停止。走路也一样。

有没有办法做到这一点？在过去的一个小时里，我一直在谷歌搜索，并没有真正的发现。如果这是一个问题，我不关心 IE 支持。

感谢您的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:49:43.650

您可以尝试使用 SMIL 动画超链接。你在 URL 上的 # 后面加上你想要开始的动画的 id。例如，请参阅[http://www.w3.org/Graphics/SVG/Test/20061213/htmlObjectHarness/full-animate-elem-21-t.html](http://www.w3.org/Graphics/SVG/Test/20061213/htmlObjectHarness/full-animate-elem-21-t.html) - 单击鼠标并启动动画时，URL 会发生变化。

否则，如果你想用 javascript 开始动画，它会像这样......

```
var svgDocument = document.getElementById("objectId>").getSVGDocument();
svgDocument.getElementById('<animationElementId>').beginElement(); 
```

但这不适用于`<img>`元素，因为它不允许编写脚本。

# ios - Iphone（ios 5.0）蓝牙低功耗：无法从设备获取数据

> ID：10704082
> 
> 赞同：2
> 
> 时间：2012-05-22T14:26:54.730
> 
> 标签：ios, iphone, bluetooth-lowenergy, core-bluetooth

我在 IOS 5.0 上使用 corebluetooth.framework 让蓝牙低能量心率监测器工作。但有时我会遇到以下问题。

1）有时当我开始扫描（使用**scanForPeripheralsWithServices**方法）时，它无法发现任何BLE（蓝牙低功耗）设备，直到我手动关闭并打开Iphone蓝牙。有时，如果蓝牙关闭并打开不起作用，我也不得不重新启动手机。

2）有时当我尝试连接到之前存储了UUID的设备时，我能够连接到设备，即调用了**didConnectPeripheral**委托方法，但即使我调用**[外设发现服务：它也从未发现任何服务： nil]**即，我没有在委托方法**didDiscoverServices**中从设备获取任何数据。为此，我也不得不重新启动手机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:49:54.373

尝试在这里查看档案：http: [//lists.apple.com/archives/bluetooth-dev](http://lists.apple.com/archives/bluetooth-dev)

如果找不到，请将问题发送到那里。许多 Apple 蓝牙工程师在该邮件列表上回答问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T12:16:41.280

1）它与蓝牙低功耗和iPhone的配对程序有关。iPhone每隔一段时间就会改变一次ID，我不知道多久，但确实如此。您是否尝试过重置/重新启动从设备？这通常对我有用。从设备也具有有限的广播周期，例如20-30秒。

2) 再次检查您是否已重置从站。我不知道您是自己制造了设备还是购买了心率带，但这通常是解决方案。哦，顺便说一句，我遇到了一个问题，`didDiscoverServices`实际上我跳过了一个 if 句，在那里我检查了一个特定的服务。在我重新启动手机之前，这并没有自行修复。真的很奇怪的行为，但我还没有找到任何其他解决方案。

# iphone - 单击 UISearchbar (searchDisplayController) 时应用程序崩溃

> ID：10704085
> 
> 赞同：0
> 
> 时间：2012-05-22T14:26:56.877
> 
> 标签：iphone, ios, crash, uisearchbar, uisearchdisplaycontroller

我正在 iPhone 应用程序上实现 searchdisplay 控制器，但是当我尝试单击搜索栏时会遇到以下错误（经过几次尝试）

```
Thread 1: EXC_BAD_ACCESS (code=1, address=0x30000008) 
```

![在此处输入图像描述](../Images/85762e2fa70508726eefa89e8d2acf88.png)

我的代码片段如下：

```
- (void)viewDidLoad
{

  //Setting up the search bar for search display controller
  UISearchBar *tempBar = [[UISearchBar alloc]initWithFrame:CGRectMake(0, 34, 320, 44)];
  self.sBar = tempBar;
  [tempBar release];
  self.sBar.delegate = self;
  self.sBar.tintColor = [UIColor colorWithHexString:@"#b6c0c7"];
  self.sBar.placeholder = @"Search DM friends";

  self.searchDisplayController = [[[UISearchDisplayController alloc] initWithSearchBar:sBar contentsController:self]autorelease];
  [self setSearchDisplayController:searchDisplayController];
  [searchDisplayController setDelegate:self];
  [searchDisplayController setSearchResultsDataSource:self];
  self.searchDisplayController.searchResultsTableView.delegate = self;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section
{
    UIView *headerView = [[[UIView alloc]initWithFrame:CGRectMake(0, 0, 320, 78)]autorelease];
    headerView.backgroundColor = [UIColor colorWithHexString:@"#ebe7e6"];

    if (tableView != self.searchDisplayController.searchResultsTableView){
        //Search

        UILabel *tagFriendsTitle = [[UILabel alloc]initWithFrame:CGRectMake(10, 10, 320, 16)];
        tagFriendsTitle.font = [UIFont boldSystemFontOfSize:14];
        tagFriendsTitle.backgroundColor = [UIColor clearColor];
        tagFriendsTitle.text = @"Who should see this? Tag them!";

        [headerView addSubview:tagFriendsTitle];

        //THIS IS WHERE I GET MY EXC_BAD_ACCESS error
        [headerView addSubview:self.sBar];

        [tagFriendsTitle release];

    }
    return headerView;

} 
```

我不确定我的代码的哪一部分导致了错误，但是当我尝试将 sBar 添加到标题子视图时，它似乎从内存中释放了？但我不知道为什么我需要多次点击搜索栏才能发生这种情况。

这是它在 iPhone 上的样子，搜索栏是 headerview 的一部分

![在此处输入图像描述](../Images/3fcf7143d3d4c7a4620576286cb5633e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:33:06.473

转到产品>编辑方案>启用nszombie对象，看看那里有什么问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:34:29.243

如果这是一个分配属性，您可能应该将其更改为保留属性。并且不要忘记在`dealloc`and中将属性设置为 nil `viewDidUnload`。

# asp.net - 请求变量中的查询字符串

> ID：10704086
> 
> 赞同：4
> 
> 时间：2012-05-22T14:27:01.097
> 
> 标签：asp.net, .net, vb.net

你好，我正在尝试从 url 获取 id 并将其发送到 clint 端，这就是我所做的

这是我的网址：

```
http://localhost:53010/edit.aspx?Id=4 
```

后面的代码

```
 Public Partial Class Edit
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 
Handles Me.Load

End Sub
Private _myId As String = Request.QueryString("id")

Public Property myId() As String
    Get
        Return _myId
    End Get
    Set(ByVal value As String)
        _myId = value
    End Set
End Property 
```

端类客户端

```
<%= myId%> 
```

错误

```
Request is not available in this context 
```

这也是我将私有道具移动到 page_load() 时得到的结果“私有”在局部变量声明中无效——知道发生了什么

谢谢

* * *

我解决了这个问题，这就是答案

```
Public Partial Class Edit
Inherits System.Web.UI.Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) 
Handles Me.Load
    MyIdVal = Request.QueryString("id")

End Sub

Private _myIdVal As String
Public Property MyIdVal() As String
    Get
        Return _myIdVal
    End Get
    Set(ByVal value As String)
        _myIdVal = value
    End Set
End Property 
```

结束类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:31:16.600

那是一个*字段初始化器*。
字段初始化程序在构造函数之前运行，并且无法访问它们正在初始化的实例。
因此，您不能在`Request`那里使用该物业。

您需要将其移至构造函数或`Page_Load`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:30:13.920

你访问的`Request`太早了。

`myId`如果您设置on或任何其他类似的页面事件`Init`，它将起作用。`Page_Load`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:30:13.213

尝试在您的 PageLoad 中设置 _myId。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T14:18:54.227

所以我想要一个具有从查询字符串设置的属性的类，并找到了这个线程。我还希望能够从一个位置访问首页甚至是 JavaScript 中的属性。这是我想出的：

```
// App_Code/QueryStrings.cs
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

/// <summary>
/// Summary description for QueryStrings
/// </summary>
public class QS
{
    private int id = -1;

    public QS()
    {
        if (HttpContext.Current.Request.QueryString["id"] != null)
            try
            {
                Int32.TryParse(HttpContext.Current.Request.QueryString["id"], out id);
            }
            catch
            {
                id = -2;
            }
        else
            id = -3;
    }

    public int ID
    {
    get
        {
            return id;
        }
    }
} 
```

然后你可以从你的 .aspx 页面调用它，如下所示：

```
<body>
    <form id="form1" runat="server">
    <div>
        <% QS qs = new QS(); %>
        ID = <%= qs.ID %>
    </div>
    </form>
</body> 
```

当然，您可以使用相同的语法从后面的代码中调用。

# google-apps-script - 是否可以通过网站上的 Google Apps 脚本小工具进行 OAuth？

> ID：10704093
> 
> 赞同：1
> 
> 时间：2012-05-22T14:27:34.850
> 
> 标签：google-apps-script

我在使用 oAuth 的电子表格中开发了一个谷歌应用程序脚本。我现在将相同的脚本复制到在站点上运行的小工具中。当我想运行使用 oauth 的函数时，出现以下错误：

序列化延续时出现意外异常

当我在站点上运行实际小工具或从脚本编辑器运行函数时，都会发生这种情况。从电子表格中的脚本编辑器调用完全相同的代码。是我做错了什么，还是在使用站点小工具时根本无法将 oAuth 与 UrlFetchApp.fetch 一起使用？

谢谢，

简

这是我正在尝试做的一些示例代码，您需要包含来自 Google Api 控制台的真实 api 机密来测试它。

```
 function CalendarApiBug( ) {

    var oAuthConfig = UrlFetchApp.addOAuthService('agenda scheduler');
    oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/"+
                                   "OAuthGetRequestToken?scope=https://www.googleapis.com/auth/calendar");
    oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
    oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
    oAuthConfig.setConsumerKey('replacemewithsomethingreal');
    oAuthConfig.setConsumerSecret('replacemewithsomethingreal');

    this.baseUrl = 'https://www.googleapis.com/calendar/v3/';
    this.calendarsList = null;

    this.getBaseUrl = function() {
      return this.baseUrl;
    } //CalendarApiBug.getBaseUrl

    this.getFetchArgs = function() {
      return {oAuthServiceName:'agenda scheduler', oAuthUseToken:"always"};
    } //CalendarApiBug.getFetchArgs

    this.getCalendarList = function(refresh){
      if (refresh != true && this.calendarsList != null )
        return this.calendarsList;

      var fetchArgs = this.getFetchArgs();   
      fetchArgs.method = 'get';
      var url = this.baseUrl + 'users/me/calendarList'; 
      this.calendarsList = Utilities.jsonParse(UrlFetchApp.fetch(url, fetchArgs).getContentText());
      return this.calendarsList; 
    } //CalendarApiBug.getCalendarList
  }

  function test(){
    var api = new CalendarApiBug();
    Logger.log(api.getCalendarList(false));
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T19:40:31.037

oAuth 批准对话框仅在从脚本管理器内部运行代码时才可见。为了将您的 Apps 脚本代码发布到站点，您需要将该版本的脚本作为服务发布。打开该脚本的代码编辑器，并确保您可以先使用脚本编辑器运行这些函数。这将验证您的 oAuth 批准是否已存储。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:30:09.690

为什么在日历服务的 Google Apps 脚本中使用 Oauth？

# android - 在 Android MediaPlayer 上暂停流式传输音频

> ID：10704095
> 
> 赞同：0
> 
> 时间：2012-05-22T14:27:44.413
> 
> 标签：android

我有这种方法可以用按钮播放音频文件：

```
final MediaPlayer mediaplayer = MediaPlayer.create(
                    this,
                    Uri.parse("android.resource://" + getPackageName() + "/"
                            + R.raw.inro));
            mediaplayer.setOnPreparedListener(new OnPreparedListener() {
                @Override
                public void onPrepared(MediaPlayer mp) {
                    if (mediaplayer.isPlaying()) {
                        mediaplayer.pause();
                    } else {
                        mediaplayer.start();
                    }
                }
            }); 
```

我想要做的是，当音频正在播放并且用户再次单击该按钮时，音频将暂停，但当他再次单击它时，音频将恢复。

## 更新

```
@Override
    public void onClick(View v) {

        switch (v.getId()) {
        case R.id.btn_nav_back:
            WWHApplication.getMapActivityIntance().getVideoLocationDB();
            WWHApplication.getMapActivityIntance().initLocations();
            if (category == 'f') {
                if (WWHApplication.getFavoritesListActivityIntance() != null)
                    WWHApplication.getFavoritesListActivityIntance()
                            .loadListView();
            }
            finish();
            break;
        case R.id.btn_tool_audio:
            final MediaPlayer mediaplayer = MediaPlayer.create(this,
                    Uri.parse("android.resource://" + getPackageName() + "/"
                            + R.raw.inro));     
                    if (mediaplayer.isPlaying()) {
                        mediaplayer.pause();
                    } else {
                        mediaplayer.start();
                    }

            break; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:33:42.070

问题是您试图在 PreparedListener 上暂停音频。IT 不是这样工作的。在按钮单击事件中执行相同操作，

```
playButton.setOnClickListener(new OnClickListener() {
                @Override
        public void onClick(View v) {
       if (mediaplayer.isPlaying()) {
                    mediaplayer.pause();
                } else {
                    mediaplayer.start();
                }
                }
    }); 
```

仅当源准备好并且可以播放时才调用 Prepared Listener。它不能确保您的 MediaPlayer 的播放和暂停。

# eclipse - 使用户制作的 Java 类可用于所有 Eclipse 项目

> ID：10704103
> 
> 赞同：0
> 
> 时间：2012-05-22T14:28:10.747
> 
> 标签：eclipse, class, java

这对我来说有点。

做所有用户需要做的事情应该是一个简单且陈旧的程序，但绝不是简单的。

我将想要添加到所有新 Java 项目中的 Java 类制作成一个 JAR 文件。我使用 Window > Prefs > Java > Installed JREs 等将它放入​​ JRE 文件夹。但是在运行时，Java 解释器只是没有看到这个类附加到我的项目中。

有谁知道这个讨厌的怎么解决的？

我正在使用 Eclipse 3.6.2 Helios 和 JRE 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:41:34.607

JRE 并不是真的打算以这种方式扩展。如果必须将共享库存储在 JRE 中，`ext`则应使用该文件夹，而不是顶级 JRE 文件夹。但是，即使这通常也是一种不好的做法：[将外部 jar 放在 JAVA_HOME/lib/ext 目录中是一件坏事吗？](https://stackoverflow.com/questions/2068961/is-putting-external-jars-in-the-java-home-lib-ext-directory-a-bad-thing).

要将依赖项添加到 Eclipse 项目，请使用项目的构建路径。要在运行时添加依赖项，请使用 Java 类路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:34:21.537

我会创建一个用户库并将该库添加到项目设置中。[http://goo.gl/pEoto](http://goo.gl/pEoto)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:01:50.543

考虑使用 Maven 来管理您的依赖项。

# php - 使 Facebook 访问令牌无效？

> ID：10704114
> 
> 赞同：3
> 
> 时间：2012-05-22T14:28:59.597
> 
> 标签：php, jquery, facebook, facebook-graph-api, sdk

是否可以使 facebook 访问令牌无效？

由于最近弃用了offline_access，我需要这样做。

问题是令牌不能延长超过 60 天。即使用户返回应用程序（除非我误解？）

所以，我想做的是使令牌无效，然后立即重新登录用户，以便我可以取回一个新的访问令牌，新的 60 天到期日。只要用户每两个月来一次，一切都应该没问题。

我不想让用户退出 Facebook，所以 FB.logout 不可用。

那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:41:20.913

您可以发送一个 DELETE 请求`/me/permissions`，应该（我认为）使用户的会话无效。

但是，我真的不明白你为什么要这样做。无论您之前拥有什么令牌，您都可以只使用最终获得 60 天令牌的服务器端身份验证。因此，每次您想要多 60 天时，只需使用服务器端进程对用户进行身份验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-26T05:14:35.580

我会认真考虑避免像瘟疫那样使用 Facebook Javascript SDK，因为它是异步的，这实际上意味着 Facebook 是安全的，但您的网站却不是。

我刚刚开始重建我的登录流程，我想知道我的这部分代码是否可以方便地管理用户令牌：

```
if ($user) {
  try {
    // Proceed knowing you have a logged in user who's authenticated.
    $user_profile = $facebook->api('/me');
  } catch (FacebookApiException $e) {
    $fb_error = $e->getResult();
    error_log($e);
    $user = null;
  }
}

//https://developers.facebook.com/docs/reference/api/errors/
switch ($fb_error['error']['error_subcode']) {
    case '458':
    //Returned on app trying something or user attempting an action after app deauth
    //Can do database cleannup operations from this
        $fb_error = '458 - User removed the app from user settings';
        break;
    case '460':
    //App is no longer reauthorized and the user is trying something ?
    //Stop user from all activities if this comes up as they may deauth then try perform an action
        $fb_error = '460 - User needs to reauthorize';
        break;
    case '463':
    //Expired Token
    //This is where we autolog the user back in
        $fb_error = '463 - Token has expired and a new one needs to be requested';
        //need to somehow get the login request code from another page to hide it
        //or use htaccess tricks
        $facebook->getAccessToken();
        break;
    case '467':
    //Invalid Token
    //This is where we autolog the user back in
        $fb_error = '467 - Token is invalid and a new one needs to be requested';
        break;
} 
```

您可以将错误输出到页面进行测试：

```
echo 'Error Subcode: '.$fb_error.'<br/>';
echo 'Facebook Error Dump:<br/>';
var_dump($e); 
```

请注意，PHP switch 的工作方式类似于`if`具有多个答案（案例）的单个语句。

我建议代码速度优化重新排序开关以在开关顶部列出最常见的错误，因为 PHP 开关的工作方式是向下运行列表，直到找到与错误代码匹配的大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-10T09:13:31.007

根据 Facebook[文档](https://developers.facebook.com/roadmap/offline-access-removal/)，您不需要做任何复杂的事情。

在用户登录过程中，取回一个短寿命的访问令牌，换成一个有效期为60天的长寿命访问令牌。

如果用户在一天中多次注销并登录，他将收到相同的访问令牌（可能），但到期时间不会更新。但至少经过一天后，您将收到一个具有新到期时间的新的长寿命访问令牌。

唯一可能的问题是用户持续登录超过两个月（超过 60 天）的情况。对于这种情况（即使这几乎不可能），我编写了一个小超时函数，当令牌过期时，它会在后台更新它。

我昨天下午重构了我的代码以检索和使用长期存在的令牌，所以没有足够的时间来确定，但根据提到的 Facebook 文档，它应该是这样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T14:48:06.607

您不需要使访问令牌无效。

如果您使用**新**的短期访问令牌进行交换，它将返回一个新的延长 60 天令牌。当用户再次使用该应用程序时，该特定的短期令牌始终会提供给您。使用客户端身份验证流程（JS SDK），这样您就可以确定您获得了短期令牌。使用新端点交换令牌。

有关更多信息，请查看[facebook 文档](https://developers.facebook.com/roadmap/offline-access-removal/)。

# java - 我可以@Inject 泛型类型吗？

> ID：10704117
> 
> 赞同：0
> 
> 时间：2012-05-22T14:29:05.280
> 
> 标签：java, jakarta-ee, cdi, jboss7.x, jboss-weld

这似乎不起作用：

```
@Inject
private MyBBean<OtherBBean> myBean; 
```

它应该有效还是尝试这样做是错误的？我收到此错误：

```
Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [MyBBean<OtherBBean>] with qualifiers [@Default] at injection point [[field] @Inject private com.my.project.beans.jsf.BreakBBean.myBBean] 
```

编辑：添加更多信息：

```
@Named(value="org")
@SessionScoped
public class OrgBBean extends MainViewBase<Org> implements Serializable {

    private static final long serialVersionUID = 1L;
    @Inject
    private OtherBBean otherBBean;
}

@Named
@Dependent
public class OtherBBean extends OrgTabMemberBBean<Other> implements Serializable {

    private static final long serialVersionUID = 1L;
    @Inject
    private MyBBean<OtherBBean> myBBean;
}

@Named
@Dependent
public class MyBBean <O extends EditableBase<? extends BaseEntity>> extends EditableTabListBBean<My, O> implements Serializable {

    private static final long serialVersionUID = 1L;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:38:18.043

在这里测试并且工作正常。您是否错过了一些事情，例如忘记添加`@Named`MyBBean 类，或者可能在`@SessionScoped`bean 中使用它而 MyBBean 没有实现 Serializable？

编辑：您可以发布您的 MyBBean 代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:47:14.863

我只使用原始类型来解决这个问题。它有效，但现在我必须小心我如何使用它。

```
@Inject
private MyBBean myBBean; 
```

# jersey - 是否有人通过模板引擎成功地在嵌入式模式下使用 Jersey（不是 servlet env 而是独立的 Grizzly 实例）？

> ID：10704118
> 
> 赞同：1
> 
> 时间：2012-05-22T14:29:07.603
> 
> 标签：jersey, velocity, freemarker, grizzly, rythm

Velocity、Freemarker、Japid、Rythm，还有其他吗？我正在寻找的是类似于 JSP 在 servlet 环境中提供的解决方案。它应该是 ViewProcessor 实现的一种形式，但适用于独立的嵌入式 Grizzly 部署（NIO 架构）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T19:08:34.550

Jersey 支持 freemarker 模板 - 请参阅maven 上[的 jersey-freemarker 模块](http://search.maven.org/#search%7Cga%7C1%7Ca%3a%22jersey-freemarker%22)。它适用于任何容器（即不依赖于 servlet）。Jersey 工作区中还有 freemarker 示例，展示了如何使用它 - 请参见[此处](http://java.net/projects/jersey/sources/svn/show/trunk/jersey/samples/freemarker)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-30T05:01:59.420

我认为您列出的所有模板引擎都可以在独立环境中使用。专门针对 Rythm（因为我是这些东西的作者），它从不同的来源加载模板文件：

1.  从提供的字符串内容：

    `String result = Rythm.render("hello @who", "world");`

2.  从`rythm.root`设置中找到的文件：

    `String result = Rythm.render("helloWorld.html", "world");`

3.  `rythm.root`如果您没有设置，则从类路径中找到的文件

它只是不依赖于任何 servlet 容器，所以只要你有 JRE，你就可以自由地使用它。如果您想在不允许文件写入的 GAE 中使用它，请务必设置`rythm.noFileWrite`为。`true`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-27T13:04:56.023

开源项目

[http://www.bitplan.com/index.php/SimpleRest](http://www.bitplan.com/index.php/SimpleRest)

提供一个 TemplateResource 基类，它将完成大部分“繁重的工作”以使 Jersey、Grizzly 和 Rythm 模板引擎很好地协同工作。

# php - PHP - setcookie 不生效

> ID：10704125
> 
> 赞同：0
> 
> 时间：2012-05-22T14:29:40.493
> 
> 标签：php, cookies

```
<?php
    setcookie("name", "abc");
    echo $_COOKIE["name"];
?> 
```

当我重新加载此页面时，屏幕上什么也没有显示。为什么？

但再次重新加载，显示 abc。

为什么？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-22T14:31:16.063

当您设置 cookie 时，它​​在下一页加载之前不可用。

[这在文档](http://php.net/setcookie)中非常清楚地列出，您应该阅读。

> 一旦设置了 cookie，就可以在**下一页加载**时使用 $_COOKIE 或 $HTTP_COOKIE_VARS 数组访问它们。注意，像 $_COOKIE 这样的超全局变量在 PHP 4.1.0 中可用。Cookie 值也存在于 $_REQUEST 中。

和

> 直到下次加载 cookie 应该可见的页面时，cookie 才会变得可见。要测试 cookie 是否设置成功，请在 cookie 过期之前检查下一个加载页面上的 cookie。过期时间通过 expire 参数设置。调试 cookie 存在的一个好方法是简单地调用 print_r($_COOKIE);。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:31:32.213

*Cookie 会作为您页面的 HTTP 响应的一部分发送，因此在*您发送响应之前它们不存在。这就是为什么您必须重新加载页面才能看到该值。

# html - 为什么这个 html/css 在 firefox 和 ie 中看起来不一样？

> ID：10704136
> 
> 赞同：1
> 
> 时间：2012-05-22T14:30:21.993
> 
> 标签：html, css

CSS：

```
 * {
        margin:0;
        padding:0;
    }

    .blue-button
    {
        width:auto;
        display:inline-block;
    }

    .blue-button:before
    {
        /*background-image:url('blue-button.gif');*/
        background:red;
        width:5px;
        height:21px;
        display:block;
        content:"\00a0";";
        float:left;
    }

    .blue-button span
    {
        background:#00AEEF;
        display:block;
        height:100%;
        text-align:center;
        margin-left:5px;

        padding:3px;
        padding-left:8px;
        padding-right:8px;
        color:white;
    } 
```

身体：

```
<div class="blue-button"><span>abcdef</span></div> 
```

所以基本上这只是一个`div`with 前置`div`using `before`。我想`span`在 .blue-button 内调整为文本的大小。它在 Chrome 上运行良好，但在 IE/FF 上失败 - 在这些浏览器中，蓝色`div`位于下一行（它应该与红色 div 位于同一行）。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:35:18.387

这是一个问题，因为 IE 无法识别属性

```
display: inline-block; 
```

IE 资源管理器将内联显示它，为了达到预期的效果，您需要使用“布局”来赋予内容

```
zoom: 1; 
```

或类似的。

这篇文章对我很有帮助，请查看它以完全理解我要说的内容！

[http://flipc.blogspot.co.uk/2009/02/damn-ie7-and-inline-block.html](http://flipc.blogspot.co.uk/2009/02/damn-ie7-and-inline-block.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:35:08.977

我只是用你的代码设置了一个 jsfiddle，FF 也将红色和蓝色部分放在不同的行上。你的 CSS 中有一个错误，当我修复它时，修复了 FF 并且在 IE8 中也运行良好。您在使用哪个版本的 IE 时遇到问题？

```
content:"\00a0";"; 
```

应该

```
content:"\00a0"; 
```

你能确认这只是一个错字，还是它也为你解决了这个问题？

# jquery - 在 HTML 选择输入中将 Google App Engine 数据存储区值显示为选定选项

> ID：10704142
> 
> 赞同：0
> 
> 时间：2012-05-22T14:30:44.263
> 
> 标签：jquery, python, google-app-engine

我有一个存储在 Google App Engine 数据存储区中的值，该值是从下拉选择控件中选择的。

但是每次我加载 html 页面时，它都不会显示存储的数据存储区值。相反，它显示了未选择任何选项的原始下拉选择。

HTML：

```
<select name="items">
  <option>Select</option>
</select> 
```

JavaScript：

```
(function($) {
    $.fn.changeType = function() {
        var data = [{"user":"a","name":"Mr A"},
                    {"user":"b","name":"Miss B"},
                    {"user":"c","name":"Mrs C"}];
        var tlist = '<option>Select<\/option>';
        $.each(data, function(i,d){
            tlist += '<option value="' + d.user + '">' + d.name + '<\/option>';
        });
        $("select", this).html(tlist);
    };
})(jQuery); 
```

主要.py：

```
# assume model s
user = db.StringProperty()
...
updated_user = self.request.get('items')
s.user = updated_user
s.put() 
```

请注意，我只将用户（值）部分（例如 a）存储在数据存储中，但我希望拥有名称部分（例如 Mr A）。这可能吗？

非常感谢！

更新：抱歉不清楚。我正在使用 jinja2，其模板值 p 来自模型 s

```
<select name="items">
    <option>{{ p.user }}</option>
</select> 
```

并尝试将其放入 jQuery 中：

```
var tlist = '<option>{{ p.user }}<\/option>'; 
```

但是没有效果（嗯，它有点显示用户（价值）部分一瞬间）。本质上，我想问一下我在我的 HTML 和 jQuery 中将 Google App Engine 数据存储区的值放在什么位置和位置。谢谢。

更新 2：我将 JavaScript 更改为

```
(function($) {
    $.fn.changeType = function() {
        var data = [{"user":"a","name":"Mr A"},
                    {"user":"b","name":"Miss B"},
                    {"user":"c","name":"Mrs C"}];
        var tselected = $("select option:selected").val();
        var tlist = '<option>Select<\/option>';
        $.each(data, function(i,d){
    if (d.user === tselected)
                tlist += '<option value="' + d.user + 'selected="selected">' + d.name + '<\/option>';
            else
                tlist += '<option value="' + d.user + '">' + d.name + '<\/option>';
        });
        $("select", this).html(tlist);
    };
})(jQuery); 
```

但 tselected 似乎不会返回当前选定的值。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T03:04:09.593

使用输入隐藏值求解。

# java - Java JsonObject 数组值到键

> ID：10704144
> 
> 赞同：3
> 
> 时间：2012-05-22T14:30:46.530
> 
> 标签：java, json

我是java新手，所以这有点令人困惑

我想获取 json 格式的字符串

我想要的结果是

```
{ "user": [ "name", "lamis" ] } 
```

我目前正在做的是这样的：

```
JSONObject json = new JSONObject();         
json.put("name", "Lamis");
System.out.println(json.toString()); 
```

我得到了这个结果

```
{"name":"Lamis"} 
```

我试过了，但没有用 json.put("user", json.put("name", "Lamis"));

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T14:34:26.050

试试这个：

```
JSONObject json = new JSONObject();         
json.put("user", new JSONArray(new Object[] { "name", "Lamis"} ));
System.out.println(json.toString()); 
```

**但是**，您显示的“错误”结果将是“有一个*名为*“lamis”的用户比“正确”结果更自然的映射。

*为什么*你认为“正确”的结果更好？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T14:56:19.000

另一种方法是使用 JSONArray 来呈现列表

```
 JSONArray arr = new JSONArray();
   arr.put("name");
   arr.put("lamis");

   JSONObject json = new JSONObject();
   json.put("user", arr);

   System.out.println(json);   //{ "user": [ "name", "lamis" ] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:43:27.343

可能您所追求的与您认为需要的不同；

您应该有一个单独的“用户”对象来保存所有属性，如姓名、年龄等。然后该对象应该有一个方法为您提供对象的 Json 表示...

您可以检查下面的代码；

```
import org.codehaus.jettison.json.JSONException;
import org.codehaus.jettison.json.JSONObject;

public class User {
    String  name;
    Integer age;

    public User(String name, Integer age) {
        this.name = name;
        this.age = age;
    }

    public JSONObject toJson() {
        try {
            JSONObject json = new JSONObject();
            json.put("name", name);
            json.put("age", age);
            return json;
        } catch (JSONException e) {
            e.printStackTrace();
            return null;
        }
    }

    public static void main(String[] args) {
        User lamis = new User("lamis", 23);
        System.out.println(lamis.toJson());
    }
} 
```

# kml - Google 地球插件：FF 以外的浏览器在使用 .getBalloonHTML() 将地标内容转储到 DIV 时显示 HTML 标记

> ID：10704146
> 
> 赞同：1
> 
> 时间：2012-05-22T14:30:52.003
> 
> 标签：kml, google-earth-plugin

我正在尝试将 Google 地球地标内容转储到插件外部的 div 中，它在 FireFox 中按预期工作，但在 Chrome、Safari 或 IE 中却没有。后3个显示：

```
<!--Content-type: mhtml-die-die-die--> 
```

在地标内容的开头，HTML 标记与其他内容一起显示。FF 将内容解析为实际的 HTML，因此它按预期格式正确显示。

有人知道如何让其他浏览器将内容解析为 HTML，而不是他们现在正在做的任何事情吗？

以下是我的 GE 插件代码：

```
currentKmlObject = kmlObject;
ge.getFeatures().appendChild(currentKmlObject);
google.earth.addEventListener(kmlObject, 'click', function(event) {
    event.preventDefault(); 
    var placemark = event.getTarget();
    var content = placemark.getBalloonHtml();
    document.getElementById('balloonContents').innerHTML = content;
    document.getElementById('balloonContents').innerText = content; 
```

我正在使用 fetchKml 从另一个 URL 加载 KML 数据，该 URL 设置如下：

```
<?xml version="1.0" encoding="utf-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2">
    <Document>
        <Placemark>
            <name></name>
            <description>
                <![CDATA[   HTML CONTENTS ]]>
            </description>
            <Point>
                <coordinates></coordinates>
            </Point>
         </Placemark>
    </Document></kml> 
```

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:31:44.847

我想到了。它与 Google 地球或 KML 无关。出于某种原因，我不小心将地标内容分配给了 innerText。我只需要将它分配给innerHTML。

# jquery-mobile - 列表中的 Jquerymobile 链接

> ID：10704159
> 
> 赞同：1
> 
> 时间：2012-05-22T14:31:26.107
> 
> 标签：jquery-mobile

使用jqmobile列表，我的每个项目（在**li**标签中）都指向一个页面，使用**a**标签，但我想用href mailto放置另一个**a**
标签 问题是它拆分项目，不显示邮件关联

小提琴：http: [//jsfiddle.net/ca11111/ghxVY/](http://jsfiddle.net/ca11111/ghxVY/)

我想要第一个项目的视觉结果，但有一个可点击的邮件链接，如第二个项目 - > [http://jsfiddle.net/ca11111/ghxVY/1/](http://jsfiddle.net/ca11111/ghxVY/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:53:02.013

可以通过`<a>`用另一个标签包装，例如`<p>` [http://jsfiddle.net/ghxVY/6/](http://jsfiddle.net/ghxVY/6/)

# java - Dialog.show() 是非阻塞方法吗？

> ID：10704162
> 
> 赞同：0
> 
> 时间：2012-05-22T14:31:39.467
> 
> 标签：java, android

我有一个按钮可以启动后台线程来做一些工作，我正在尝试使用 ProgressDialog 来防止用户在完成该工作时双击该按钮（或任何其他 ui 元素）。我在按钮 onClick 代码中做的第一件事是显示进度对话框，它接管了屏幕。我看到的问题是，如果我快速点击此按钮，有时会在显示 ProgressDialog 之前注册两次或多次按下。这使我假设 ProgressDialog.show() 在 ProgressDialog 实际可见之前返回。

有人可以证实这一点吗？另外，有没有办法改变这种行为，或者至少得到对话框何时真正可见的通知？我看到了 Dialog.onStart() 但鉴于 javadoc，这似乎是在 Dialog 实际可见之前调用的......

更新：虽然一般来说似乎没有解决这个问题的好方法，但以下适用于我的工作是由外部线程完成的情况，并且要做的工作量比所有要处理的按钮点击：

```
void myOnClickHandler() {
  if(myButton.isEnabled()) {
    myButton.setEnabled(False);
    // do work here
    // setEnabled(true) is invoked at the end of my spawned thread's run().
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:36:27.933

不。

问题是您在单击事件传递之前单击了多次。（即它在你运行之前排队`ProgressDialog.show()`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:40:57.763

从我在 Android 中注意到的情况来看，您可以快速双击一个按钮并让 onClick 侦听器触发两次（甚至更多），而不管侦听器中的代码如何（即使您立即禁用该按钮）。

不久前我在这里报告了一个错误：[http](http://code.google.com/p/android/issues/detail?id=20073) ://code.google.com/p/android/issues/detail?id=20073但当然这些事情往往会被谷歌“忽视”。随意加注星标，希望能引起 Google 的注意

# wpf - wpf 绑定到元素和属性

> ID：10704164
> 
> 赞同：0
> 
> 时间：2012-05-22T14:31:45.913
> 
> 标签：wpf, data-binding, bind

我有以下表格：

![在此处输入图像描述](../Images/d59af269e4b48b82ec0965595e0b4bc6.png)

我在 MVVM 中实现了它，XAML 看起来像这样：

```
<!-- Username -->
<Label Grid.Row="2" Style="{StaticResource TypicalLabelStyle}">Username:</Label>
<TextBox Grid.Row="2" Grid.Column="1" Style="{StaticResource TypicalTextBoxStyle}" Name="UsernameTextBox"
            Text="{Binding SourceConnection.Username, UpdateSourceTrigger=PropertyChanged}" 
            />

<CheckBox Grid.Row="2" Grid.Column="2" Margin="5" VerticalAlignment="Center" Name="CopyPasswordCheckBox">Copy Password</CheckBox>

<!-- Password -->
<Label Grid.Row="3" Style="{StaticResource TypicalLabelStyle}">Password:</Label>
<TextBox Grid.Row="3"  Grid.Column="1" >
    <TextBox.Style>
        <Style>          
            <Style.Triggers>
                <DataTrigger Binding="{Binding ElementName=CopyPasswordCheckBox, Path=IsChecked}" Value="True">
                    <Setter Property="TextBox.Text" Value="{Binding ElementName=UsernameTextBox, Path=Text}" />
                </DataTrigger>
                <DataTrigger Binding="{Binding ElementName=CopyPasswordCheckBox, Path=IsChecked}" Value="False">
                    <Setter Property="TextBox.Text" Value="{Binding SourceConnection.Password}" />
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </TextBox.Style>
</TextBox> 
```

问题出在密码文本框中：如果选中“复制密码”复选框，则绑定 SourceConnection.Password 为空。在没有检查的情况下，我得到正确的值绑定。

（复制密码意味着将用户名文本框中的文本复制到密码文本框中）。我不想在代码中保留“复制密码”的属性，然后询问是否...”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:43:47.997

我会添加一个布尔值来保持视图模型中的复选框状态。然后在视图模型中，您可以捕获用户名更改，检查复选框状态并相应地更新密码。

# javascript - 在 JavaScript 中，什么是 event.isTrigger？

> ID：10704168
> 
> 赞同：41
> 
> 时间：2012-05-22T14:32:04.400
> 
> 标签：javascript, jquery

我在我正在处理的一些 JS 代码中遇到了这个问题：

```
if ( typeof( e.isTrigger ) == 'undefined' ) {
// do some stuff            
} 
```

这似乎是 jQuery 的一部分。据我所知，它会告诉您事件是由用户发起还是自动发起。

这是正确的吗？鉴于它没有记录在案，有没有办法在不隐藏 jQuery API 的情况下找到这些东西？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-22T14:36:46.200

在 jQuery 1.7.2（未缩小）中，第 3148 行包含`event.isTrigger = true;`嵌套在触发器函数中。所以是的，你是对的 - 这仅在您使用时被标记`.trigger()`并在内部用于确定如何处理事件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-25T05:37:15.140

如果您查看 jQuery github 项目，在 trigger.js 文件第 49 行（[此处链接](https://github.com/jquery/jquery/blob/c9935b6d2db9e1be4bed12f7419e98cdca45763e/src/event/trigger.js#L49)）中，您可以找到 isTrigger 是如何计算的。

[![在此处输入图像描述](../Images/13fb3f52051bb71083ecebd0b06b79db.png)](https://i.stack.imgur.com/JuIUJ.png)

如果您在 JavaScript 中添加触发器并通过调试，您可以看到断点如何到达此代码行（*在 jQuery-2.1.3.js 中检查[此 SO 问题](https://stackoverflow.com/questions/33907765/jquery-why-does-trigger-method-call-it-three-times/33908785#33908785)*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-22T11:29:10.850

现代浏览器与自动脚本打开的弹出窗口作斗争，而不是真正的用户点击。如果您不介意立即打开和关闭真实用户点击的窗口并显示自动点击的阻止弹出窗口警告，那么您可以使用这种方式：

```
button.onclick = (ev) => {

  // Window will be shortly shown and closed for a real user click.
  // For automated clicks a blocked popup warning will be shown.
  const w = window.open();
  if (w) {
    w.close();
    console.log('Real user clicked the button.');
    return;
  }
  console.log('Automated click detected.');
}; 
```

# asp.net-mvc-3 - MVC3 :: 创建一个视图来处理多种类型

> ID：10704169
> 
> 赞同：0
> 
> 时间：2012-05-22T14:32:04.647
> 
> 标签：asp.net-mvc-3, c#-4.0

我有一种情况，我希望“添加”视图接受来自控制器的 int，但向 HttpPost 控制器方法返回不同的类型。令人困惑，我知道。“添加”视图用于创建类型为 Widget 的对象，但我需要传入 WidgetCategory 的 ID。所以在我的 WidgetController 中，我会有一个类似的方法：

```
public ActionResult Add(int id) // 'id' is the WidgetCategoryID
{
    return View(id);
} 
```

但是，在视图中，由于它打算返回要添加的 Widget，因此将像这样开始：

```
@using MyProject.Models
@model Widget
@{
    ViewBag.Title = "My Title";
    Layout = "~/Views/Shared/_MyLayout.cshtml";
}
@using (Html.BeginForm())
{
    // Insert markup here ...
} 
```

我的问题是，如果输入 WidgetCategoryID 以返回 Widget，我该如何将其传递给控制器​​？我希望将其添加为表单中的隐藏字段，如下所示：

```
@Html.Hidden(id) 
```

任何想法将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:49:13.200

假设你的 ViewModel`Widget`有一个`WidgetCategoryId`属性

```
public class Widget
{
  public int ID  { set;get;}
  public int WidgetCategoryId { set;get;}
  //Other properties
} 
```

将其发送到`Add`视图（HttpGet）

```
public ActionResult Add(int id)
{
  Widget objModel=new Widget{ WidgetCategoryId =id} ;
  return View(objModel);
} 
```

现在在您的视图中，使用HTML 帮助器方法`Add`将其保存在隐藏变量中。`HiddenFor`

```
@using MyProject.Models
@model Widget
@{
    ViewBag.Title = "My Title";   
}
@using (Html.BeginForm())
{
    @Html.HiddenFor(m=>m.WidgetCategoryId);
    <input type="submit" value="Save" />
} 
```

现在，`HTTPPost`当您提交时，您将在您的操作方法中拥有它。

```
[HttpPost]
public ActionResult Add(Widget model)
{
  //  check model.WidgetCategoryId and Have fun with it
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:39:10.510

默认模型绑定器按名称检查请求参数并尝试根据模型设置属性。如果你需要更进化的东西，你可以看看自定义模型绑定。顺便说一句，您可以将操作更改为：

```
public ActionResult Add(Widget widget) // Widget class has one property named Id with public set
{
    return View(widget);
} 
```

或者

```
public ActionResult Add(int id) // 'id' is the WidgetCategoryID
{
    Widget widget = new Widget();
    widget.Id = id;
    return View(widget);
} 
```

我稍微喜欢第二种形式的创作，但我想这是一个品味问题

顺便说一句，您的视图表单应为 Widget 对象的每个“重要”属性提供输入。（隐藏或文本）通过：

```
@Html.HiddenFor (m => m.Id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:04:13.427

在您的视图代码中，您不仅要指定视图将*返回*一个`Widget`类型，还要指定该视图的整个模型是一个`Widget`类型。基本上，通过它*传入*和*传出*View 的数据`@model`是 type `Widget`。

您可以在这里做的是将 View 的强类型保留为 a `Widget`，但是您只需传入一个 ID 值（a simple `int`），您可以使用 the[`ViewData`](http://msdn.microsoft.com/en-us/library/system.web.mvc.viewpage.viewdata.aspx)或 the[`ViewBag`](http://msdn.microsoft.com/en-us/library/system.web.mvc.controllerbase.viewbag%28v=vs.98%29.aspx)

例如，在控制器中：

```
public ActionResult Add(int id) // 'id' is the WidgetCategoryID
{
    // All properties of a ViewBag are completely dynamic!
    ViewBag.WidgetID = id;

    // You're still returning a View strongly-typed to a Widget, but not 
    // actually supplying a Widget instance.
    return View();
} 
```

在视图中：

```
@using MyProject.Models
@model Widget
@{
    ViewBag.Title = "My Title";
    Layout = "~/Views/Shared/_MyLayout.cshtml";
}
@using (Html.BeginForm())
{
    // Retrieve the WidgetID from the ViewBag
    var WidgetID = ViewBag.WidgetID;

    // Do something with the WidgetID, for example:
    @Html.Hidden(WidgetID)
} 
```

注意`ViewData`和`ViewBag`是[非常相似的机制](http://brendan.enrick.com/post/Difference-Between-ViewBag-and-ViewData-in-MVC-3.aspx)，通过它可以将“非模型”数据传递到视图中。ViewBag 是较新的（MVC 3）并且基于[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264741.aspx)C#4.0 的特性，而 ViewData 是基于键/值对集合的旧方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T14:44:05.167

在 Controller 中的 Add Action 中，您可以将 ViewBag 属性设置为 id，并在 View 中使用 ViewBag 属性执行 html.Hidden() 。IE，

```
public ActionResult Add(int id) // 'id' is the WidgetCategoryID 
{     
   Widget widget = new Widget();     
   widget.Id = id;     
   ViewBag.categoryId = id;
   return View(widget); 
} 
```

在视图中

```
@Html.Hidden(@:ViewBag.categoryId) 
```

# mysql - Mysql Innodb，获取父行及其子行以便在 ul 中呈现

> ID：10704172
> 
> 赞同：0
> 
> 时间：2012-05-22T14:32:07.753
> 
> 标签：mysql, sql

我有以下数据库结构：

请注意，fk_parent_group_id 字段对于根组可以是 NULL，也可以是根组的 id。fk_parent_group_id 为 NOT NULL 的组不能有子组。

我正在尝试按如下方式呈现数据：

```
16  Module 1    0   5       1
19  Submodule 1 0       16  1
20  Submodule 2 0       16  1
22  Submodule 3 0       16  1
24  Module 2    0           1
25  Module 3    0           1
26  Submodule 4 0       25  1
27  Submodule 5 0       25  1
28  Submodule 6 0       25  1
29  Module 4    0           1
30  Module 5    1           1
31  Module 6    0           1 
```

巧合的是，数据已经以我希望输出的正确方式输入，我想在一系列无序列表中输出格式化为 JavaScript 手风琴风格的小部件：

*   子模块 1
*   子模块 2
*   子模块 3

实际上，我想选择一个根组，然后选择它的子组。

抱歉，如果我在这里输入了太多信息，我已经尝试自行加入，但根本无法让它发挥作用！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:48:45.217

```
SELECT * FROM group ORDER BY CONCAT_WS('_', fk_parent_group_id, id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:50:38.423

我不确定这是否是您想要的，请告诉我：

我创建了一个包含重要字段（id、模块、模块子）的表，并填写了一些愚蠢的数据，这就是我所拥有的。

```
mysql> show create table groups\G
*************************** 1\. row ***************************
       Table: groups
Create Table: CREATE TABLE `groups` (
  `id` int(11) DEFAULT NULL,
  `modu` varchar(200) DEFAULT NULL,
  `sub_group` int(11) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

mysql> insert into groups (id,modu,sub_group) values (16,'Module 1',null),
    -> (19,'Submodule 1' ,16),
    -> (20,'Submodule 2' , 16),
    -> (22,'Submodule 3' , 16),
    -> (24,'Module 2',null),
    -> (25,'Module 3',null),
    -> (26,'Submodule 4', 25),
    -> (27,'Submodule 5', 25),
    -> (28,'Submodule 6', 25);
Query OK, 9 rows affected (0.00 sec)
Records: 9  Duplicates: 0  Warnings: 0

mysql> select * from groups;
+------+-------------+-----------+
| id   | modu        | sub_group |
+------+-------------+-----------+
|   16 | Module 1    |      NULL |
|   19 | Submodule 1 |        16 |
|   20 | Submodule 2 |        16 |
|   22 | Submodule 3 |        16 |
|   24 | Module 2    |      NULL |
|   25 | Module 3    |      NULL |
|   26 | Submodule 4 |        25 |
|   27 | Submodule 5 |        25 |
|   28 | Submodule 6 |        25 |
+------+-------------+-----------+
9 rows in set (0.00 sec) 
```

重要的是我应用了“自联接”的查询，它看起来像这样：

```
mysql> select * from groups as t1 join groups as t2  on t1.id=t2.sub_group;
+------+----------+-----------+------+-------------+-----------+
| id   | modu     | sub_group | id   | modu        | sub_group |
+------+----------+-----------+------+-------------+-----------+
|   16 | Module 1 |      NULL |   19 | Submodule 1 |        16 |
|   16 | Module 1 |      NULL |   20 | Submodule 2 |        16 |
|   16 | Module 1 |      NULL |   22 | Submodule 3 |        16 |
|   25 | Module 3 |      NULL |   26 | Submodule 4 |        25 |
|   25 | Module 3 |      NULL |   27 | Submodule 5 |        25 |
|   25 | Module 3 |      NULL |   28 | Submodule 6 |        25 |
+------+----------+-----------+------+-------------+-----------+
6 rows in set (0.00 sec) 
```

如果你想简化结果：

```
mysql> select t1.id as ID, t1.modu as PARENT, t2.modu as SON from groups as t1 join groups as t2  on t1.id=t2.sub_group;
+------+----------+-------------+
| ID   | PARENT   | SON         |
+------+----------+-------------+
|   16 | Module 1 | Submodule 1 |
|   16 | Module 1 | Submodule 2 |
|   16 | Module 1 | Submodule 3 |
|   25 | Module 3 | Submodule 4 |
|   25 | Module 3 | Submodule 5 |
|   25 | Module 3 | Submodule 6 |
+------+----------+-------------+
6 rows in set (0.00 sec) 
```

它只会显示带有儿童的模块：

如果你想显示所有这些，你可以这样做

```
mysql> select t1.id as ID, t1.modu as PARENT, t2.modu as SON from groups as t1 join groups as t2  on t1.id=IFNULL(t2.sub_group,t2.id);
+------+----------+-------------+
| ID   | PARENT   | SON         |
+------+----------+-------------+
|   16 | Module 1 | Module 1    |
|   16 | Module 1 | Submodule 1 |
|   16 | Module 1 | Submodule 2 |
|   16 | Module 1 | Submodule 3 |
|   24 | Module 2 | Module 2    |
|   25 | Module 3 | Module 3    |
|   25 | Module 3 | Submodule 4 |
|   25 | Module 3 | Submodule 5 |
|   25 | Module 3 | Submodule 6 |
+------+----------+-------------+
9 rows in set (0.00 sec) 
```

或者这样

```
mysql> select t1.id as ID, t1.modu as PARENT, if(t2.modu=t1.id,NULL,t2.sub_group) as SON from groups as t1 join groups as t2  on t1.id=IFNULL(t2.sub_group,t2.id);
+------+----------+------+
| ID   | PARENT   | SON  |
+------+----------+------+
|   16 | Module 1 | NULL |
|   16 | Module 1 |   16 |
|   16 | Module 1 |   16 |
|   16 | Module 1 |   16 |
|   24 | Module 2 | NULL |
|   25 | Module 3 | NULL |
|   25 | Module 3 |   25 |
|   25 | Module 3 |   25 |
|   25 | Module 3 |   25 |
+------+----------+------+
9 rows in set, 9 warnings (0.00 sec) 
```

# php - PHP 特征：此代码中的逻辑错误是什么

> ID：10704176
> 
> 赞同：0
> 
> 时间：2012-05-22T14:32:28.527
> 
> 标签：php, traits

我在这段代码上投入了大约 4 个小时，但在代码片段正常运行时没有得到所需的结果。代码如下：

```
trait CircleShape{
    public function input($radius){
        $this->$radius = $radius;
    }
}

trait AngleShape{
    public function input($height, $width){
        $this->$height = $height;
        $this->$width = $height;
    }
}

trait GeneralMethod{
    public function get($property){
        return $this->$property;
    }
}

class Shape{
    private $height, $width, $radius;
    const PI = 3.1415;

    use GeneralMethod, AngleShape, CircleShape{
        AngleShape::input insteadof CircleShape;
        CircleShape::input as inputCircle;
    }
}

class Circle extends Shape{
    public function area(){
        return parent::PI * $this->get('radius') * $this->get('radius'); 
    }       
}

class Rectangle extends Shape{

    use GeneralMethod, AngleShape, CircleShape{
        AngleShape::input insteadof CircleShape;
        CircleShape::input as inputCircle;
    }
    public function area(){
        return $this->get('height') * $this->get('width'); 
    }       
}

$rect = new Rectangle;
$rect->input(12, 2);
Echo "Area: " . $rect->area() . "\n";

$cir = new Circle;
$cir->inputCircle(10);
Echo "Circle Area : " . $cir->area() . "\n"; 
```

此代码中的逻辑错误是什么？为什么我得到以下输出：

```
Rectangle Area : 0
Circle Area : 0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:35:24.833

```
$this->$radius = $radius; 
```

应该

```
$this->radius = $radius; 
```

与 和`$height`相同`$width`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T05:14:13.897

在这里，您正在尝试使用伪变量 $this 和箭头运算符 (->) 来调用一个变量，那么您应该在变量前面放下 $

# regex - RegEx 小写字母和连字符

> ID：10704177
> 
> 赞同：8
> 
> 时间：2012-05-22T14:32:28.730
> 
> 标签：regex

有人可以帮我写一个只匹配所有小写字母加连字符的正则表达式。

示例：此页面名称

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-11-18T18:18:39.713

迈克克拉克的模式`[a-z\-]+` 将匹配`-start-dash-double-dash---and-end-dash-`

也许`^[a-z]+(-[a-z]+)*$`更精确一点。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-05-22T14:34:43.643

这将捕获 1 个或多个小写 az 或连字符的字符

```
[a-z\-]+ 
```

诀窍是用反斜杠转义连字符。

为了完整起见，您可以在每一端添加适当的边界，例如 \b 以表示完整的单词匹配，或 ^ 和 $ 使其匹配整行。

# json - 如何在 Ubuntu 上看到一个漂亮的大型 JSON 文件？

> ID：10704178
> 
> 赞同：44
> 
> 时间：2012-05-22T14:32:32.257
> 
> 标签：json, ubuntu, syntax-highlighting, pretty-print

我想听听您关于如何在 Ubuntu 上处理大型 (40MB) JSON 文件的建议。我希望看到它在*vim*或*gedit*或任何其他编辑器中打印得很漂亮。可以找到许多关于如何[美化 JSON 的](http://thinkwhere.wordpress.com/2011/06/23/json-prettifier-for-gedit/)教程，但是它们不必处理大量输入。我还想象我可以通过[pygments](http://pygments.org/)或任何其他语法高亮显示数据。我很想听听你的想法。

示例下载：

```
wget -O large-dataset.json http://data.wien.gv.at/daten/wfs?service=WFS&request=GetFeature&version=1.1.0&typeName=ogdwien:BAUMOGD&srsName=EPSG:4326&outputFormat=json 
```

请注意下载大小！

* * *

**编辑：**我发现[融合](http://meldmerge.org/)有点工作。应用程序不会立即加载整个文件，这会阻塞用户界面。相反，它顺序读取文件内容。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2017-09-19T13:12:13.137

Python JSON 的模块也可以做到这一点（`python -m json.tool`），例如：

```
cat myjsonfile.json | python -m json.tool > pretty.json 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2019-02-12T17:07:48.727

如果你只是想**可视化（和搜索）**一个 json 文件，**[Firefox](https://www.mozilla.org/en-US/firefox/new/?utm_source=google&utm_medium=cpc&utm_campaign=Firefox-Brand-DE-EN-GGL-Exact&utm_term=firefox&utm_content=A144_A203_A006316&&gclid=EAIaIQobChMIheqSpNe24AIVszLTCh0VZwCxEAAYASAAEgKFX_D_BwE&gclsrc=aw.ds)**做得很好。我手头没有`40MB`文件，但它很容易处理一个**9MB**的文件。

只需将 JSON 文件拖到 Firefox 中，或运行：

`firefox your_file.json`

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-10-25T08:40:13.860

jq 是一个轻量级的命令行 JSON 处理器，运行良好！为此，您需要使用以下命令安装 jq（如果您使用的是 apt 包管理器）。

```
sudo apt-get install jq 
```

下面的命令会将漂亮的 json 转换为一个新文件。

```
 jq '.' non-pretty.json > pretty.json 
```

我们也可以用 jq 过滤 json，我发现它在处理大型 geojson 文件时非常有用，例如下面的命令将只保存第一个特性的属性。

```
jq '.features[0].properties' geojson_file.json > pretty.json 
```

希望这会有所帮助！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-22T14:36:27.807

你有 KDE 或任何其他视觉环境吗？如果是，您是否尝试过使用 chrome 扩展[JSONView](https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc)？

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-12-26T11:58:01.327

为此，我通常使用[Sublime Text 。](https://www.sublimetext.com/)这项工作有一个专用插件。

插件[Pretty JSON](https://packagecontrol.io/packages/Pretty%20JSON)解析选择的 JSON 内容，并以结构化的方式打印它们。

您需要做的就是选择内容并按`Ctrl`+ `Alt`+ `j`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-12-15T10:31:44.227

核心用法是格式化大 json。我用 25MB json 文件测试了 Chrome 扩展 JSON View。它在将其作为本地文件或从网络加载时崩溃。通过崩溃，我的意思是 JSON 不会被格式化，并且在查看 JSON 视图选项时，您将收到一条崩溃消息。我也为 Firefox 尝试了类似的插件。我也尝试过在线 json 格式化程序。

找到这个库 - [jsonpps](https://github.com/bazaarvoice/jsonpps)。从命令行很好地格式化大型 json，获取输入并将格式化的 json 保存为单独的文件，效果很好。也可以保存在同一个文件中（需要可选参数）

一个缺点是，要安装和运行，应该更熟悉 Java 和 Maven。

要安装和运行：

```
git clone https://github.com/bazaarvoice/jsonpps.git
mvn clean package
cd target 
java -jar jsonpps-1.2-SNAPSHOT.jar -o /path/to/output.json /path/to/largeInput.json 
```

此解决方案不限于 Ubuntu。它应该适用于任何操作系统。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-08-08T09:00:37.870

使用外部工具选项。这对我 [有用 http://www.milosev.com/downloads/websphere/117-linux/ubuntu/454-json-prettifier-for-gedit.html](http://www.milosev.com/downloads/websphere/117-linux/ubuntu/454-json-prettifier-for-gedit.html)

# http-headers - Urlfetch blob 多部分/m

> ID：10704180
> 
> 赞同：1
> 
> 时间：2012-05-22T14:32:42.120
> 
> 标签：http-headers, google-apps-script

我正在尝试使用 UlrFetch 将 CSV 数据提交到 Zoho 报告。我正在使用以下代码：

```
function doImport(tabla,file) {
  var url="https://reportsapi.zoho.com/api/xxxxxxxx/yyyyyyyyyyy/"+tabla;
  var ticket="zzzzzzzzzzzzzzzz" ;//getTicket();
  url=url + "?ZOHO_ACTION=IMPORT&ZOHO_OUTPUT_FORMAT=XML&ZOHO_ERROR_FORMAT=json&ZOHO_API_VERSION=1.0"
  var params={"ZOHO_API_KEY":"vvvvvvvvvvvvvvvvvvvvvv"
              ,"ticket":ticket
              ,"ZOHO_FILE":file
              ,"ZOHO_IMPORT_TYPE":"APPEND"
              ,"ZOHO_ON_IMPORT_ERROR":"ABORT"
              ,"ZOHO_AUTO_IDENTIFY":"true"
              ,"ZOHO_CREATE_TABLE":"false"
              ,"ZOHO_DATE_FORMAT":"dd-MM-YYYY"
              ,"ZOHO_DELIMITER":"0"
             };

  var options =
    {
      "method" : "post",
      "payload" : params,
      "contentType": "multipart/form-data"
    };
  var response=UrlFetchApp.fetch(url, options);
  var tableDataString=response.getContentText();
  expireTicket(ticket);
  Logger.log(tableDataString);
  return tableDataString;
} 
```

但是，数据未以正确的多格式格式提交（出现错误 500 状态）。这个问题可以[追溯到 2011 年初](http://productforums.google.com/forum/#!searchin/apps-script/urlfetch%2420multipart/apps-script/qpJCDYtaSDQ/e4gqaaaq-AMJ)。欢迎提供一两个如何以多部分/表单数据格式提交 blob 文件的示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:03:30.810

对于有效负载，您将其作为 传递`Object`，这看起来是正确的。这将被解释为 HTTP 表单（您想要的）。

要修复您的脚本，请尝试以下操作：

1.  确保您使用的值`ZOHO_FILE`是 Blob。这确保 HTTP 表单将自动发送：
    `Content-Type: multipart/form-data; boundary=[automatically determined]`

2.  不要`contentType`为 HTTP POST 指定。这允许 UrlFetchApp 自动使用它自己的`contentType`值，其中包括该`boundary`字段。（次要细节：仍然可以在 Blob 本身上指定 contentType，而不是整个帖子请求。这允许指定帖子中每个 Blob 的 contentType，如果您感兴趣的话。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:53:32.297

如果您将 Blob 作为有效负载值传递，UrlFetchApp 将自动使用 multipart/form-data 编码。您可能需要使用：

```
"ZOHO_FILE": file.getBlob() 
```

# javascript - 未捕获的错误：语法错误，无法识别的表达式：悬停

> ID：10704183
> 
> 赞同：2
> 
> 时间：2012-05-22T14:32:48.923
> 
> 标签：javascript, jquery, syntax-error

这是解决问题的 JSFidle：http: [//jsfiddle.net/LRTh3/36/](http://jsfiddle.net/LRTh3/36/)

```
$('div.boxes').mousedown(function (event) {

    // Error on this line
    var inner_box = $(".box").is(":hover");

    if ( inner_box == true ) {

        alert("blue,gree,pink was clicked");
    }

    else alert("You mousedowned on the red box");

});​

console: Uncaught Error: Syntax error, unrecognized expression: hover 
```

如果只呈现**一个**“.box”层就可以工作。这是一个错误吗？我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:45:21.227

```
$('div.boxes').mousedown(function (event) {

// Error on this line
var $target = $(event.target);    
if (  $target.is(".box")) {

    alert("blue,gree,pink was clicked");
}

else alert("You mousedowned on the red box");

});​ 
```

我从[jQuery API 文档中提取它](http://api.jquery.com/is/)

# node.js - 在 Redis 中使用嵌套对象？

> ID：10704190
> 
> 赞同：4
> 
> 时间：2012-05-22T14:33:24.193
> 
> 标签：node.js, redis

假设我有一个嵌套属性可以更改的哈希。

```
"key1": {
  "prop1": {
    "subprop1": "could_change"
  }
} 
```

如果我收到`prop1.subprop1`已更改的信息，我可以对此属性执行原子更新吗？现在`node_redis`保存`prop1`为一个字符串，上面写着`'[object Object]'`. 如果我 JSON.stringify() obj 那么我需要检索对象，解析为内存中的对象，进行编辑，然后字符串化并保存对象——同时不知道是否有任何变化。

如果我应该以不同的方式处理这些数据，有人可以解释一下吗？我有一个具有可能嵌套属性的对象，除了需要作为整个对象检索之外，我还需要能够更新其中的一部分。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T22:21:14.913

Lua 脚本或锁定模式可以解决您的问题。

```
EVAL 'local obj = cjson.decode(redis.call("GET", "key1")); obj.prop1.subprop1 = ARGV[1]; redis.call("SET", "key1", cjson.encode(obj));' 0 "did_change" 
```

如果你愿意，你甚至可以在 Lua 中做一些更高级的东西来编辑任何键的 JSON 子对象。

查看[Redis SETNX 命令文档](http://redis.io/commands/setnx)，了解如何使用锁的示例。

# magento - Magento：将多选显示为具有唯一 ID 的列表，因此可以使用 CSS 将列表项更改为图像

> ID：10704193
> 
> 赞同：0
> 
> 时间：2012-05-22T14:33:31.880
> 
> 标签：magento

我想出了如何将我的自定义多选属性显示为列表，但无法弄清楚如何将 ID 或类添加到每个列表项。这将允许我使用 CSS 而不是文本来显示图像。

希望你们能帮助我。顺便说一句，这是我用来将我的自定义属性“评级”显示为列表的代码：

```
 <?php if($_product->getResource()->getAttribute('rating')->getFrontend()->getValue($_product)): ?>
        <ul><li><?php
        $_comma = ",";
        $_list = "</li><li>";
        echo str_replace($_comma,$_list,$_product->getResource()->getAttribute('rating')->getFrontend()->getValue($_product))    ?>    
        </li></ul>
        <?php endif; ?> 
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:15:15.050

在不知道函数返回的确切格式的情况下，我不能 100% 确定，但我认为这可以解决问题：

```
 <div>
    <?php if($_product->getResource()->getAttribute('rating')->getFrontend()->getValue($_product)):?>
        <ul>
        <?php $i=0?>
        <?php foreach(explode(',', $_product->getResource()->getAttribute('rating')->getFrontend()->getValue($_product)) as $value) : ?>
            <li id="value_<?php echo $i?>"><?php echo $value ?></li>
            <?php $i++ ?>
        <?php endforeach ?>
        </ul>
    <?php endif; ?> 
    </div> 
```

只修改返回值以返回数组可能会更容易一些，但是如果返回值是逗号分隔的列表并且不容易更改，那么 explode 应该可以解决问题。

# c# - 如何复制在 SE 站点中看到的“弹出”消息？

> ID：10704199
> 
> 赞同：-1
> 
> 时间：2012-05-22T14:33:50.700
> 
> 标签：c#, asp.net

SE 网络中的 StackOverflow 和其他网站有一些漂亮的东西会弹出消息，例如，当你在未登录的情况下单击一个赞成链接时。不过，我不确定这种东西叫什么。

我假设这是在某处使用 CSS 完成的，但是查看页面源以对其进行逆向工程，看起来按钮实际上并不是链接。

使用 C# 和 ASP.NET，我如何模拟这种功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:37:42.300

您可能正在寻找的是 ModalPopupExtenders 等，可以在 AjaxControlToolkit 中找到。有很多东西要学，太多了，无法真正给出一个答案。快速示例，看看这是否方向正确，[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

它们非常可定制且非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:45:19.317

有不同的方法可以满足这些要求。

您可以使用`JavaScript`/`jQuery`或`Ajax`

例如，看看这些文章

[jQuery 弹出窗口](http://www.jquerypopup.com/)

[JavaScript 弹出窗口](http://www.javascript-coder.com/window-popup/javascript-popup-window.phtml)

[Ajax ModalPopup](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/ModalPopup/ModalPopup.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:46:00.673

或者您可以使用独立插件，例如[Noty](http://needim.github.com/noty/)、 jGrowl 或 Notifica。

# django - 访问与 Haystack SearchQuerySet 关联的 ImageField

> ID：10704206
> 
> 赞同：2
> 
> 时间：2012-05-22T14:34:19.280
> 
> 标签：django, django-haystack, imagefield

我有一个带有 ImageField 的模型，我正在使用 Django Haystack 为搜索建立索引，并且我想在搜索结果中使用这些图像。如果我错了，请纠正我，但在 Django Haystack SearchQuerySet 中不能有 ImageField。那么访问与 SearchQuerySet 关联的模型 ImageField 的最佳方法是什么？我真的必须遍历模型 ID 并将它们添加到单独的 QuerySet 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-06T13:28:44.700

访问对象命中数据库。

如果您不想访问数据库，可以这样索引：

```
class MyIndex(SearchIndex, Indexable):
   ...
   photo_url = CharField()

   def prepare_photo_url(self, obj):
       return obj.image_field.path 
```

来源：[http ://django-haystack.readthedocs.org/en/latest/searchindex_api.html#prepare-foo-self-object](http://django-haystack.readthedocs.org/en/latest/searchindex_api.html#prepare-foo-self-object)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-25T14:52:07.153

我知道这个问题已经很老了，但我遇到了同样的问题，我有信息要分享。

懒惰读书？跳转到**解决方案**。

说你有这个模型：

```
class School(models.Model):
  city = models.CharField(max_length=50)
  name = models.CharField(max_length=50)
  slug = models.SlugField(max_length=50, unique=True)
  cover = models.ImageField(upload_to='images/school-covers/') 
```

你可以看到**ImageField** : 封面。

如果您想使用带有自动完成功能的 Haystack 索引 School 模型，您应该这样做：

```
class SchoolIndex(indexes.SearchIndex, indexes.Indexable):
  name = indexes.EdgeNgramField(model_attr='name')
  city = indexes.EdgeNgramField(model_attr='city')
  slug = indexes.CharField(model_attr='slug')

  def get_model(self):
    return School

  def index_queryset(self, using=None):
    # Used when the entire index for model is updated.
    return self.get_model().objects.all() 
```

如您所见，我没有包含 ImageField，因为 ImageField 对象不是`indexes`包的一部分。

此代码片段将使用School 模型的`name`和字段进行索引。`city`然后在您的 AJAX 视图中，您将使用 SearchQuerySet 处理搜索：

```
def search_ecoles(request):
  name = SearchQuerySet().autocomplete(name=request.POST.get('search_text',''))
  city = SearchQuerySet().autocomplete(city=request.POST.get('search_text',''))

  schools = name | city

  return render(request, 'website/ajax_search.html', {'schools' : schools}) 
```

到目前为止，我可以像这样访问我的模板中的结果：

```
<ul>
  {% for school in schools %}
  <li>
    <span id="name"><a href="/school/{{ school.slug }}/">{{ school.name }}</a></span>
    <span id="city">City: {{ school.city }}</span>
  </li>
  {% endfor %}
</ul> 
```

### 解决方案

但也许您想访问封面 ImageField。最简单的方法也可能是更整洁的方法就是使用 School 对象中的对象，如下所示：

```
<img src="{{ school.object.cover.url }}" /> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T14:48:03.360

只需使用`result.object.my_image_field`. 该`object`属性包含与搜索结果关联的完整 Django 对象。

# wpf - 没有 INotifiedChanges 的 wpf 数据网格刷新

> ID：10704207
> 
> 赞同：0
> 
> 时间：2012-05-22T14:34:20.803
> 
> 标签：wpf, datagrid, refresh

我在 wpf 中有数据网格，在 .xaml.cs 中有一些代码

```
List<TaskHeader> taskHeaders;
//initialization of taskHeaders
taskDataGrid.ItemsSource = taskHeaders; 
```

因此，在单击刷新按钮后，我需要将我的 taskHeaders 更改更新为 taskDataGrid 视图，但如果不实现 ObservableCollection，我就找不到方法。`taskDataGrid.Items.Refresh();`不管用。

```
taskDataGrid.ItemsSource = null;
taskDataGrid.ItemsSource = taskHeaders;
taskDataGrid.Items.Refresh(); 
```

是不是工作太有想法了？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-25T14:36:43.823

与其绑定整个列表，不如试试这个（实际上我不知道你的逻辑如何，但可能会对某人有所帮助）。

taskHeader 值是一个 TaskHeader 对象。

taskDataGrid.Items.Add(taskHeader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:44:02.720

尝试

```
CollectionViewSource.GetDefaultView(taskHeaders).Refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:17:52.017

我已经对此进行了测试，并且有效：

我的 XAML：

```
<Window x:Class="WpfApplication.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<DockPanel>
    <Button DockPanel.Dock="Bottom" Content="Change list and refresh grid" Click="OnRefreshButtonClicked"/>
    <DataGrid x:Name="taskDataGrid"/>
</DockPanel> 
```

我背后的代码：

```
using System.Collections.Generic;
using System.Windows;
using System.Windows.Data;

namespace WpfApplication
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            var taskHeaders = new List<TaskHeader>();
            for (int i = 0; i < 10; ++i)
                taskHeaders.Add(new TaskHeader() { Property = "Property " + i });

            this.taskDataGrid.ItemsSource = taskHeaders;
        }

        private void OnRefreshButtonClicked(object sender, RoutedEventArgs e)
        {
            var taskHeaders = (List<TaskHeader>)this.taskDataGrid.ItemsSource;

            // Make changes on taskHeaders by removing first item.
            taskHeaders.RemoveAt(0);

            CollectionViewSource.GetDefaultView(taskHeaders).Refresh();
        }
    }
} 
```

和我的虚拟 TaskHeader 类：

```
namespace WpfApplication
{
    public class TaskHeader
    {
        public string Property { get; set; }
    }
} 
```

# javascript - 在输入键上按更改光标位置javascript？

> ID：10704209
> 
> 赞同：0
> 
> 时间：2012-05-22T14:34:23.523
> 
> 标签：javascript, html

我有两个文本字段的表单，`onLoad="document.forms.obrazac.sifra.focus()"`我将光标放在第一个字段上。现在我想当用户按下回车键将光标聚焦在第二个字段上，然后当再次按下回车时我想提交我的表单。我该怎么做，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:45:31.020

打破默认行为绝对不好。顺便说一句，你知道`autofocus`HTML 中的属性吗？

如果你绝对需要这个，你去：

```
document.forms.obrazac.onkeypress = function( e ) {
    // If the hit key is "Enter"
    if ( e.keyCode === 13 ) {

        // Cross-browser handling for our dear friend @MaxArt :p
        var evt = e || window.event,
            target = evt.target || evt.srcElement,

        // Find the next input
            nextInput = target.nextSibling;
        while ( nextInput.tagName !== 'INPUT' && nextInput.nextSibling ) {
            nextInput = nextInput.nextSibling;
        }

        // And focus it
        nextInput.focus();

        // Finally, disable submitting IF there is no input after
        if ( nextInput !== this.elements[ this.elements.length - 1 ] ) {
            return false;
        }
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:07:21.717

只是一个简短的不是真正的测试样本......只是给你一个想法：

```
<head>
    <script type="text/javascript">
    function onKeyPress(args)
    {
        if(args.keyCode === 13)
            document.getElementById("tb2").focus();
    }       
    </script>
</head>
<body>
    <input type="text" onkeypress="onKeyPress(event);" id="tb1" />
    <input type="text" id="tb2" />
</body> 
```

您可以在 tb2 上执行相同的操作以在“ENTER”上提交表单。我还将使用 jQuery 之类的东西在 javascript 中绑定事件，而不是直接在标记中。

希望能帮助到你。

@as 我已经开始在没有答案的地方创建我的样本 =)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:48:39.760

我不会破坏默认行为，这对用户来说非常烦人和违反直觉，但如果你真的想这样做，你可以用 jquery 做这样的事情：

```
$('#form').keydown(function(e) {
    if( e.keyCode === 13) {  // When "Shift + Enter"
        e.preventDefault();
        // focus on next field here.
    }
}); 
```

与其这样做，不如像这样（使用 tabindex）制作正确的标签顺序：

```
<input type="text" name="field1" tabindex=1 /><br /> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-22T14:46:55.733

尝试这个：

```
document.forms.obrazac.sifra.addEventListener("keyup", function(e) {
    if (e.keyCode === 13) { // 13 === enter key
        e.preventDefault();
        this.nextSibling.focus();
    }
}); 
```

注意这些事情：

1.  我使用过`addEventListener`，但在 IE8 和更早版本中，您必须使用`attachEvent("onkeyup"...`并检查全局`event`对象。此外，`e.preventDefault();`成为`e.returnValue = false;`
2.  我想那`this.nextSibling`是下一个领域。更正此以适合您的 DOM。

# c++ - 交叉编译 wsO2 CPP 时出错

> ID：10704215
> 
> 赞同：0
> 
> 时间：2012-05-22T14:34:32.503
> 
> 标签：c++, cross-compiling, wso2

我正在使用 WSO2 CPP 开发在 ARM 处理器上运行的应用程序。当我在编译时遇到错误时，我正在尝试在基于 Linux 的 PC 计算机中交叉编译该库。我已将 WSO2 配置为：

```
 export CXXFLAGS="-O2 -march=armv7-a -mtune=cortex-a8 -mfpu=neon -ftree-vectorize -ffast-math -mfloat-abi=softfp"
    export CXXFLAGS=${CXXFLAGS}" -I/home/logic/Logic_BSPs/Linux_3.0/1021559_LogicPD_Linux_BSP_2.0-5p1/rootfs/usr/include"
    export LDFLAGS=" -L/home/logic/Logic_BSPs/Linux_3.0/1021559_LogicPD_Linux_BSP_2.0-5p1/rootfs/usr/lib"

    INSTALL_DIR=/home/logic/Logic_BSPs/Linux_3.0/1021559_LogicPD_Linux_BSP_2.0-5p1/rootfs/usr

    CC=/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-gcc \
    CXX=/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-g++ \
    AR=/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-ar \
    RANLIB=/opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-ranlib \
    ./configure --prefix=${INSTALL_DIR} \
        --build=i686-linux --host=arm-none-linux-gnueabi \
        --target=arm-none-linux-gnueabi --with-apache2=no 
```

在编译时，报告的错误是：

```
    /opt/CodeSourcery/Sourcery_G++_Lite/bin/arm-none-linux-gnueabi-gcc -DHAVE_CONFIG_H -I。-I../../../../.. -I../../../../../包括 -I../../../../.. /src/core/transport -I../../../../../src/core/transport/http -I../../../../../src/core /transport/http/sender/libcurl -I../../../../../src/core/description -I../../../../../src/core /context -I../../../../../src/core/phaseresolver -I../../../../../src/core/engine -I.. /../../../../src/core/deployment -I../../../../../util/include -I../../../. ./../axiom/include -g -O2 -D_LARGEFILE64_SOURCE -ansi -Wall -Wno-implicit-function-declaration -g -D_GNU_SOURCE -DAXIS2_SVR_MULTI_THREADED -DAXIS2_SSL_ENABLED -MT ssl_stream.lo -MD -MP -MF .deps/ssl_stream。 tpo -c ssl/ssl_stream.c -fPIC -DPIC -o .libs/ssl_stream.o
    在 http_client.c:32 包含的文件中：
    ssl/ssl_stream.h:26:25：错误：openssl/ssl.h：没有这样的文件或目录
    make[11]: *** [http_client.lo] 错误 1
    make[11]: *** 等待未完成的工作......
    在 ssl/ssl_stream.c:21 包含的文件中：
    ssl/ssl_stream.h:26:25：错误：openssl/ssl.h：没有这样的文件或目录
    在 ssl/ssl_stream.c:22 包含的文件中：
    ssl/ssl_utils.h:33：错误：在 '*' 标记之前应有 '='、','、';'、'asm' 或 '__attribute__'
    ssl/ssl_utils.h:40: 错误：在 '*' 标记之前需要 '='、','、';'、'asm' 或 '__attribute__'
    ssl/ssl_utils.h:49: 错误: 'SSL_CTX' 之前的预期声明说明符或'...'
    ssl/ssl_utils.h:50：错误：预期的声明说明符或“...”在“SSL”之前
[...]

```

看起来有错误的库没有配置 CXXFLAGS 变量：如您所见，包含到 /home/logic/logic 不包含在编译命令中。

你能解决这个问题吗？

谢谢和最好的问候， Joaquim Duran

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T17:20:49.930

我有同样的问题。对我来说，这是两件事。我需要指定 CFLAGS，而不仅仅是 CXXFLAGS。另外，我在路径中使用了一个 ~ 来指向家，由于某种原因，构建过程不喜欢它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:51:31.347

问题是它找不到 openssl 的包含文件。

```
 ssl/ssl_stream.h:26:25: error: openssl/ssl.h: No such file or directory 
```

首先检查正在编译的环境的 openssl 安装位置，然后您需要通过使用“-I”编译标志指定包含路径来告诉编译器这些包含在哪里。

配置包含路径时，请尝试使用绝对路径，而不是使用多个“../”路径的长相对路径。以这种方式更容易调试包括路径问题。

# web-services - Jaspert 报告通过 Web 服务从提供商处获取数据。如何？

> ID：10704216
> 
> 赞同：2
> 
> 时间：2012-05-22T14:34:38.290
> 
> 标签：web-services, jasper-reports

有一个系统，它有数据，并且可以通过 Web 服务（例如 Lotus Notes 数据库）提供它的数据。Jasper 可以通过调用 web 服务获取报告的数据吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:48:55.133

您可以通过实现接口[JRDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JRDataSource.html)来编写自定义数据源。

完整说明：http: [//jasperforge.org/uploads/publish/jasperreportswebsite/trunk/sample.reference/datasource/index.html#customdatasource](http://jasperforge.org/uploads/publish/jasperreportswebsite/trunk/sample.reference/datasource/index.html#customdatasource)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:48:24.767

你可以，但它可能很快就会变得非常复杂。但是，如果您想走这条路，绝对可以使用[JRXmlDataSource](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/data/JRXmlDataSource.html)。您将必须定义数据源，例如：

```
new net.sf.jasperreports.engine.data.JRXmlDataSource(
net.sf.jasperreports.engine.util.JRLoader.getLocationInputStream("http://yourserver.com/xml_data_source") 
```

看到[这篇](http://blog.altosresearch.com/use-xml-data-source-for-chart-generation-in-jasperreports/)文章，有人似乎已经开始了类似的探索，从远程服务器检索 xml 数据以获取报告。

话虽如此，如果您在代码中从服务器获取数据，选择您想要的报告字段并将其传递给您，您的代码可能会少很多工作，并且您的代码可能会更易于维护，例如，一个 JRMapCollection 数据源，特别是如果远程服务提供了一个 wsdl，您可以使用 Apache Axis 之类的工具生成一个客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T05:10:31.457

现在更好的解决方案是使用 Jasper 数据源 SPI 将您的 Restful 服务作为数据源，就像 JDBC 数据源一样。

[http://javattitude.com/2015/07/30/using-rest-web-service-as-data-source-for-jasper-reports/](http://javattitude.com/2015/07/30/using-rest-web-service-as-data-source-for-jasper-reports/)

由于这是通用的，因此编写的一个将适用于您的所有服务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-27T09:30:08.680

现在可以使用 Web 服务数据源

[http://community.jaspersoft.com/project/web-service-data-source](http://community.jaspersoft.com/project/web-service-data-source)

这个社区项目实现了一个自定义数据源，使用最新的自定义数据源框架（内部利用数据适配器）构建。

它也在 JasperReports 服务器内部工作：

您可以使用它来填充基于查询的输入控件，以及通过 Topic 使用它的 Ad Hoc Reporting（商业版）。

谢谢

# javascript - 在 jQuery 中删除元素的问题

> ID：10704219
> 
> 赞同：1
> 
> 时间：2012-05-22T14:34:46.580
> 
> 标签：javascript, jquery, settimeout, fadeout

我正在尝试使用 jQuery 从页面中删除对象。我还想为删除设置动画。目标是使元素fadeOut()，等待一秒钟，然后remove()。但它似乎拒绝等待删除元素，即使我在 setTimeout() 函数中使用它也是如此。我怎样才能让一个元素fadeOut()，然后remove()呢？

```
$("button").click(function() {
    $(this).fadeOut();
    setTimeout(function() { $(this).remove();}, 1000);
}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T14:37:31.370

仔细阅读手册：http: [//api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

fadeOut() 方法有一个回调，在fadeOut 完成后调用。要使用它：

```
$("button").click(function() {
    $(this).fadeOut(function() { $(this).remove();});
}); 
```

在fadeOut 完成后，在移除元素之前没有理由等待一秒钟，因为元素在移除时将是不可见的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-22T14:37:03.547

在您的超时功能中，`this`并不是您认为的那样 - 它实际上是全局`window`对象。

无论如何（没有双关语），您应该使用“完成回调”：

```
$("button").click(function() {
    $(this).fadeOut('slow', function() {
        $(this).remove();
    });
}); 
```

永远不要混合`setTimeout`和动画队列。可以将两者*交错*，即让完成回调启动计时器，或让计时器启动动画，但假设您可以同时启动 1000 毫秒动画和 1000 毫秒计时器并让它们同时完成，这是绝对不行的.

**编辑**固定代码 - 不需要`self`在完成回调中，我还在想`setTimeout`，`this`当我写的时候！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:40:39.793

```
$('button').click(function(){
    $(this).fadeOut(function(){$(this).remove()});
});​ 
```

[演示](http://jsfiddle.net/AZDsT/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T14:39:51.007

为什么不直接使用淡出的回调呢？

```
$("button").click(function() {
    $(this).fadeOut(function(){$(this).remove();});
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T15:59:57.690

试试这个，也许它有帮助：

```
$("button").click(function() {
    (function(that) {
        that.fadeOut();
        setTimeout(function() {
            that.remove();
        }, 1000);
    })($(this));
}); 
```

# jquery - Zend Framework 灵活的表单元素与 jQuery

> ID：10704224
> 
> 赞同：0
> 
> 时间：2012-05-22T14:34:57.737
> 
> 标签：jquery, forms, zend-framework

我对 Zend Framework 很陌生，你开始了解它的要点，但是我又遇到了一个问题。我想创建一个表单，用户可以在其中上传文件。

现在的想法是，当用户第一次访问带有表单的页面时，他/她将只看到一个表单元素，该元素用于上传文件，在该元素下方是一个按钮，用于添加附加文件，从而向表单添加附加元素。

我一直在环顾四周，并被建议尝试使用 JQuery，在这一点上，提一下我从未使用过 JQuery 可能是件好事，更不用说与 Zend 框架结合使用了。

我已将 ZendX 库添加到与 Zend 文件夹相同的文件夹中，如下所示

```
/Zend Framework
 /library
  /Zend
  /ZendX 
```

我当然在 php.ini 的 include_path 变量中包含库文件夹。根据我对 Zend 参考指南的了解，我需要将以下内容添加到我的引导程序中。

```
public function _initJQuery() {
    $view = new Zend_View();
    $view->addHelperPath("ZendX/JQuery/View/Helper", "ZendX_JQuery_View_Helper");
    $viewRenderer = new Zend_Controller_Action_Helper_ViewRenderer();
    $viewRenderer->setView($view);
    Zend_Controller_Action_HelperBroker::addHelper($viewRenderer);
} 
```

完成后，我在我的内容模块中构建了以下 Jquery 表单。

```
<?php
class Content_Form_JQueryForm extends ZendX_JQuery_Form
{
    public function init()
    {
        $this->setMethod('post');
        $this->setName('frm');
        $this->setAction('content/index/add');

        $date1 = new ZendX_JQuery_Form_Element_DatePicker(
                'date1',
                array('label' => 'Date:')
             );

        $this->addElement($date1);

        $elem = new ZendX_JQuery_Form_Element_Spinner(
                "spinner1", 
                array('label' => 'Spinner:')
        );

        $elem->setJQueryParams(array('min' => 0, 'max' => 1000, 'start' => 100));
        $this->addElement($elem);
    }
} 
```

然后在控制器中，我只需创建表单并将其分配给视图

```
public function indexAction() {
    $form = new Content_Form_JQueryForm();
        $this->view->form = $form;
} 
```

当然，在适当的视图中，我呼应了表格

```
<?php echo $this->form; ?> 
```

当我运行应用程序时，我收到以下错误消息

致命错误：第 10 行的 C:\wamp\www\ZendProject\application\modules\content\controllers\CategoryController.php 中找不到类 'Content_Form_JQueryForm'

我对自己做错了什么一无所知，如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:25:01.107

最后，我偶然发现了本教程，[http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/](http://www.jeremykendall.net/2009/01/19/dynamically-adding-elements-to-zend-form/)。

它极大地帮助了理解 Zend 中的表单是如何工作的。

# javascript - 使用同一脚本的多条记录

> ID：10704226
> 
> 赞同：0
> 
> 时间：2012-05-22T14:35:07.373
> 
> 标签：javascript

我建立了一个优惠券网站，每张优惠券都有一个倒计时。当您查看凭证时，倒计时工作正常，但是......我还有一个包含多个凭证的摘要页面（使用记录集上的重复区域）......当我将脚本应用于每个凭证时，脚本不会工作。

HMTL：

```
 <h3 class="remaining"><?php echo $row_rs_dealItem['dateend']; ?> remaining</h3> 
```

JAVASCRIPT 外部文件：

```
$(document).ready(function(){
$('.remaining').each(function(){
    var expiry_date = Date.createFromMysql($(this).html());
    var current_date = new Date();
    console.log(expiry_date.getTime() );
    console.log(current_date.getTime());
    if (expiry_date.getTime() >  current_date.getTime()) {
        var time_diff = Math.floor((expiry_date.getTime() - current_date.getTime()) / (1000*60*60));
        console.log(expiry_date.getTime() - current_date.getTime());
        console.log(time_diff);
        days_diff = Math.floor(time_diff / 24);
        hours_diff = time_diff % 24;

        $(this).html(days_diff + ' days ' + hours_diff + ' hours');
    }
    else{
        $(this).html('expired');
    }
});
}); 

 Date.createFromMysql = function(mysql_string)
{ 
 if(typeof mysql_string === 'string')
{
   var t = mysql_string.split(/[- :]/);

  //when t[3], t[4] and t[5] are missing they defaults to zero
  return new Date(t[0], t[1] - 1, t[2], t[3] || 0, t[4] || 0, t[5] || 0);          
}

return null;   
} 
```

JAVASCRIPT 内联：

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="scripts/script.js"></script>
<script type="text/javascript">
    var reference       = '<?php echo $row_rs_dealItem['reference']; ?>';
    var today           = Date.createFromMysql('<?php echo date('Y-m-d h:i:s'); ?>');
    var contractstarts  = <?php echo ($row_rs_dealItem['datestart'] == '0000-00-00') ? '""' : 'Date.createFromMysql("' . $row_rs_dealItem['datestart'] . '")'; ?>;
    var contractexpires = <?php echo ($row_rs_dealItem['dateend'] == '0000-00-00') ? '""' : 'Date.createFromMysql("' . $row_rs_dealItem['dateend'] . '")'; ?>;
</script> 
```

我希望这对你来说是足够的数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:10:37.307

我意识到我已经有效地将代码从一页复制到另一页，并且记录集有不同的名称:(

# c - 用于在 C 中解析 JSON 的代码生成器和库

> ID：10704231
> 
> 赞同：1
> 
> 时间：2012-05-22T14:35:31.723
> 
> 标签：c, json

> **可能重复：**
> [用于在 C 中解析 JSON 的代码生成器和库](https://stackoverflow.com/questions/10674575/code-generators-and-libraries-for-parsing-json-in-c)

我想将 JSON 编码的数据读入预定义的 C 结构。数据符合众所周知的对象结构。

由于性能在这里至关重要，我真的不喜欢使用生成链接对象树的库。

哪个库适合这个目的？是否有替代方法，例如代码生成器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:45:10.723

为了性能，我会选择[libjson](http://projects.snarc.org/libjson/)。它速度极快，并且不会生成自己的数据结构。它很像 XML 的 SAX 解析器，它将 START_OBJECT、END_OBJECT 等事件传递给回调函数，因此您可以将其绑定到所需的任何数据结构。

# windows-phone-7 - 使用什么控件来实现市场中的截图预览

> ID：10704233
> 
> 赞同：1
> 
> 时间：2012-05-22T14:35:37.183
> 
> 标签：windows-phone-7

windows phone 市场中使用什么控件来实现应用截图预览。该控件允许缩放、平移和滚动图像。

在“图片”应用程序中滚动图片时也使用此控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:55:11.467

看看这篇博文。Morten 在其中谈到了如何实现您的目标。我在自己的一个应用程序中使用过它，效果很好

[http://sharpgis.net/post/2012/01/17/Building-A-Multi-Touch-Photo-Viewer-Control.aspx](http://sharpgis.net/post/2012/01/17/Building-A-Multi-Touch-Photo-Viewer-Control.aspx)

# asp.net - 将域映射到另一个域的子目录

> ID：10704238
> 
> 赞同：0
> 
> 时间：2012-05-22T14:36:09.430
> 
> 标签：asp.net, iis, mapping, subdomain, subdirectory

我们的主站点 (www.example.com) 内部托管在 IIS/ASP.NET 服务器上，但我们最近创建了一个博客，该博客外部托管在 Linux/Apache 配置 (www.exampleblog.com) 上。

目前，我们已经设法将博客映射到我们主站点的子域 (blog.example.com)，但我们希望它映射到子目录 (www.example.com/blog)。

这可能吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:40:11.040

如果您在博客站点后面有另一个 Web 服务器 (Apache)，唯一的方法是重定向`www.example.com/blog`到另一个 Web 服务器。您还可以使用包含博客站点的框架（位于另一个地址下），这样用户就不会在其浏览器的地址栏中看到另一个地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:03:51.827

好吧，这取决于，但让我考虑一下您的博客是在 PHP 上开发的。

主要你需要做以下事情：

1.  在你的 Windows 机器上安装 PHP。
2.  在 IIS 中配置和激活 PHP。
3.  在您的网站中创建一个文件夹，也许您将其称为博客。
4.  从 IIS 将此文件夹转换为 App。

好吧，就是这样。

注意：我不确定您在博客中运行的是什么平台，但基本上主要思想是配置 windows 框以运行其他站点，如果是 php，您会找到很多关于此的示例。

# php - 使用 php 运行 ipconfig 命令

> ID：10704239
> 
> 赞同：2
> 
> 时间：2012-05-22T14:36:09.883
> 
> 标签：php, windows, cmd, mac-address, ipconfig

我使用此代码来了解访问者（客户）的一些信息。它一直在我的 Xampp 上的虚拟服务器上运行，但我无法在我的主服务器（主机）上运行。我只看到一个空白页。

```
$info = system('ipconfig /all');
echo $info; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:37:48.140

这可能会帮助你

**服务器 IP**

您可以从中获取服务器 IP 地址`$_SERVER['SERVER_ADDR']`。

**客户端 IP 地址**

您可以从中获取客户端IP`$_SERVER['REMOTE_ADDR']`

**编辑**：您在评论中询问如何获取外部命令的输出 - 一种方法是使用反引号，例如

```
$ipAddress=$_SERVER['REMOTE_ADDR'];
$macAddr=false;

#run the external command, break output into lines
$arp=`arp -a $ipAddress`;
$lines=explode("\n", $arp);

#look for the output line describing our IP address
foreach($lines as $line)
{
   $cols=preg_split('/\s+/', trim($line));
   if ($cols[0]==$ipAddress)
   {
       $macAddr=$cols[1];
   }
} 
```

**但是，如果客户端不在 LAN 上怎么办？**

好吧，除非您可以让客户自愿提供该信息并通过其他方式传输，否则您很不走运。请参阅 Peter G Mac 对使用 Javascript 的建议。

您也可以尝试以下命令

```
 <?php
  // http://www.php.net/manual/en/function.exec.php#85930

  $_ = null;

  // If you care about the return value, use this:
    passthru("C:\\WINDOWS\\system32\\cmd.exe /c custom.bat",$_);
    header('Content-Type: text/plain');
    echo $_;
  // if you don't care, just use this:
    $_ = exec("C:\\WINDOWS\\system32\\cmd.exe /c custom.bat");
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:39:24.763

这只会获取***服务器***IP 信息而不是客户端。因为您在本地 PC 上运行代码，所以您将看到您的本地信息（与服务器信息相同）。

此外，如果您的主机服务器正在运行 linux，则命令将为`ifconfig`，但这仍然只会获取服务器信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:44:54.020

好吧，既然你澄清了服务器是基于 linux 的，那么 linux 上的正确命令是

```
/sbin/ifconfig -a 
```

返回的数据看起来会略有不同

```
eth0      Link encap:Ethernet  HWaddr 00:00:00:00:00:00  
          inet addr:192.168.1.2  Bcast:192.168.1.255  Mask:255.255.255.0
          inet6 addr: 0000::000:0000:0000:0000/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:14141910 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6532919 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:4462743134 (4.4 GB)  TX bytes:1340503018 (1.3 GB)
          Interrupt:22 Memory:f6ae0000-f6b00000 
```

# node.js - 对 Node.js 进行基准测试

> ID：10704241
> 
> 赞同：1
> 
> 时间：2012-05-22T14:36:12.057
> 
> 标签：node.js, apache, performance, apache2, benchmarking

我在 Mac OS X 下使用 ApacheBench 对 Node.js 进行基准测试，并将其与 Apache 2 进行比较。我基本上有三个问题：

1.  我对 Hello World 网页的基本测试结果如下： [http://i.imgur.com/lgPMc.png](http://i.imgur.com/lgPMc.png) Node.js 通过 Web 服务器以纯文本形式提供“Hello World”，而 Apache 2 提供纯文本文件其中也只包含“Hello World”。我对 8000 个请求进行了相同的测试，它显示在最后 1000 个请求期间响应时间的增加相同。到底是什么原因增加的？

2.  Mac OS X 上是否有等效的 linux dstat 来记录测试期间的内存和 CPU 使用情况？

3.  是否有必须执行的一组基本测试来评估 Web 服务器的性能、吞吐量等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:08:10.697

你说的阿帕奇是什么意思？阿帕切雄猫？阿帕奇 2？Apache Hadoop（*好吧，显然不是那个*）？您应该指定要进行基准测试的代码是什么，以及平台是什么。根据您编写的内容，您可能会导致很多问题，在基本的 Hello World 测试中，NodeJS 应该表现更好，因为执行 PHP 脚本需要访问磁盘，而大多数 NodeJS Hello World 测试是在内存中的，因为您只需编写`response.send("Hello World");`这与 PHP 基准测试完全不同。

最后增加的原因是您的计算机的限制。您的计算机无法维持数百个打开的连接。NodeJS 会一一响应所有连接，而 Apache 正在启动新线程，这将导致它们最后全部耗尽，因为会有很多上下文交换，所以最后会出现缓慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T23:38:10.523

1.  当您的测试查询服务器的速度超过它的响应速度时，就会出现一个问题，这会导致未解决的请求以越来越快的速度累积。它们的开销不成比例地影响响应时间。换句话说，您对您的服务器执行了 DDoS 攻击并发现了它的容量。

2.  有unix 'top' 命令，不过有点繁琐，还有ps

3.  Quick google 表示确实存在用于基准测试网络服务器的标准，例如 SpecWeb、WebStone 和 SURGE

# codeigniter - 动态添加标题howto

> ID：10704246
> 
> 赞同：0
> 
> 时间：2012-05-22T14:36:25.327
> 
> 标签：codeigniter, templates

我正在使用优秀的 phil sturgeon 模板库，但是我想知道如何将任何标题或标题动态分配给我的部分的任何部分？就像我有一个带有登录表单的侧边栏一样。如果登录成功，如果登录成功而不创建仅 h2 标签的一部分，我希望标题例如“登录”说“欢迎”。但作为旁注，我注意到模板库的用户指南根本没有提到 append_css 和 append_js 函数？我在某人的示例代码中看到了这一点，想知道为什么会这样？

无论如何感谢所有的支持！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T14:49:05.823

您可以在控制器中使用函数 *prepend_metadata()* 或 *append_metadata*，然后在视图中*回显 $template['metadata']*

# java - 在android中拖动手指时选择多个视图

> ID：10704250
> 
> 赞同：3
> 
> 时间：2012-05-22T14:36:33.063
> 
> 标签：java, android

在我的例子中，我动态地创建了多个视图`textViews`。我给了他们身份证。我想要的是选择`textViews`i 所在的所有 id `slide my finger`。例如，如果有文本视图说 A 和 B，并且当我将手指从 A 滑动到 bi 时，应该将 ids 保存在我的数组中。目前我正在学习触摸。我不知道如何实现它。

此致

```
 OnTouchListener MyOnTouchListener = new OnTouchListener(){ 
          public boolean onTouch(View v, MotionEvent event) 
          {
              Drawable d = getResources().getDrawable(R.drawable.small_corners);
              switch(event.getAction() & MotionEvent.ACTION_MASK){
                    case MotionEvent.ACTION_DOWN:
                           vibe.vibrate(20);

                               id.add(v.getId());   
                               TextView vv = (TextView) v;
                               val.add(vv.getText().toString()); 
                               vv.setBackgroundDrawable(d);
                               String str = "";

            //A pressed gesture has started, the motion contains the initial starting location.
            return false;
           case MotionEvent.ACTION_POINTER_DOWN:
            //A non-primary pointer has gone down.
            break;
           case MotionEvent.ACTION_MOVE:
            //A change has happened during a press gesture (between ACTION_DOWN and ACTION_UP).
               int check = 0;
               for (int i = 0; i < id.size(); i ++)
               {
                   if (id.get(i) == v.getId())
                       check = 1;
               }
               if (check != 1)
               {
                   id.add(v.getId());
                   vv = (TextView) v;
                   val.add(vv.getText().toString()); 
                   vv.setBackgroundDrawable(d);
               }
            return false;
           case MotionEvent.ACTION_MASK:
                //A change has happened during a press gesture (between ACTION_DOWN and ACTION_UP).

                break;
           case MotionEvent.ACTION_OUTSIDE:
                //A change has happened during a press gesture (between ACTION_DOWN and ACTION_UP).

                break;

           case MotionEvent.ACTION_UP:
            //A pressed gesture has finished.

              break;

           case MotionEvent.ACTION_POINTER_UP:
            //A non-primary pointer has gone up.

            break;
           }

           return false;
          }
         }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:45:18.447

你试过[ACTION_HOVER_ENTER](http://developer.android.com/reference/android/view/MotionEvent.html#ACTION_HOVER_ENTER)和 ACTION_HOVER_EXIT 吗？它可能会奏效。[请参阅onGenericMotionEvent](http://developer.android.com/reference/android/view/View.html#onGenericMotionEvent%28android.view.MotionEvent%29)文档中的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:47:08.303

据我了解，试试这个；为您的所有s实现`onTouchlistner`并设置此侦听器，执行以下操作：`TextView``onTouch()`

```
public boolean onTouch(View v, MotionEvent event) {
    // TODO Auto-generated method stub
    if(event.getAction() == MotionEvent.ACTION_MOVE){
            //SAVE YOUR VIEWS ID//
            someArray[index] = ((TextView)v).getId()) 
            return true;
     }
     return false;
} 
```

尝试不同`ACTIONS`的`MotionEvent`

# sms - 是否有可供开发或研究使用的示例短信数据库？

> ID：10704252
> 
> 赞同：1
> 
> 时间：2012-05-22T14:36:34.000
> 
> 标签：sms

我目前正在从事一个涉及数据挖掘 SMS 消息的个人项目。问题是，除了我自己的 SMS 消息之外，我还想使用真实的数据，并且需要大约一年的历史。

我不愿意向熟人询问这些数据，因为它可能非常个人化。

我想知道那里是否已经有数据可供我用于这些目的，无论是免费的还是购买的。

# google-api - 不处理主要谷歌电子邮件地址时，无法通过 api 删除对谷歌文档的访问

> ID：10704261
> 
> 赞同：1
> 
> 时间：2012-05-22T14:37:16.923
> 
> 标签：google-api, google-docs-api

使用谷歌文档 API，我正在创建一个文档并添加访问规则。在我的系统中，我只有这个特定用户的一个电子邮件地址。假设它是 johndoe@company.com。使用该电子邮件地址，我将访问规则添加到我的谷歌文档中。在 google 中，John Doe 有两个电子邮件地址：一个主要 (johndoe@gmail.com) 和一个辅助 (johndoe@company.com)。谷歌似乎足够聪明，可以建立关联，当我查看该文档的共享时，它显示了约翰的主要电子邮件地址 (johndoe@gmail.com)。

现在的问题是我需要找到该访问规则并将其删除，所以我做了一个查找（使用文档 API）通过电子邮件地址查找访问规则，因为我只有一个电子邮件地址（johndoe@company.com）谷歌什么都不返回。

希望我在这里缺少一个简单的解决方案，例如：

*   我可以使用我拥有的电子邮件地址并使用一些未记录的功能从谷歌请求访问规则，让谷歌通过主要或辅助电子邮件地址查找记录吗？

*   在创建访问规则时获取主电子邮件地址？（似乎没有被退回）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:23:35.587

根据 API，您只需要为给定 acl 发出 DELETE 请求。请参阅“删除共享权限”。因此，它应该像添加一样为您解决主要/次要电子邮件。

[https://developers.google.com/google-apps/documents-list/](https://developers.google.com/google-apps/documents-list/)

# c# - 可以“说服” AutoMapper 暂时暂停特定的映射吗？

> ID：10704267
> 
> 赞同：9
> 
> 时间：2012-05-22T14:37:33.693
> 
> 标签：c#, linq, linq-to-sql, automapper

可以“说服” AutoMapper 暂时暂停特定的映射吗？

为了说明要完成的工作，我将使用一个插图。假设我有一个存储库**StudentRepository**，它使用 LINQ 与数据库对象（表）进行交互，例如学生、课程、活动、俱乐部等。在应用程序端，有匹配的域对象学生、课程、活动、俱乐部。Student 类包含 Course、Activity 和 Club 类型的数组成员，例如：

```
public class Student
{
    // ... more members
    public Course[] Courses { get; set; }
    public Activity[] Activities { get; set; }
    public Club[] Clubs { get; set; }
    // ... even more members
} 
```

AutoMapper 配置为将数据库对象映射到在 StudentRepository 的静态构造函数中定义映射的域对象，例如：

```
public class StudentRepository : IStudentRepository
{
    static class StudentRepository
    {
        // ... other mappings

        Mapper.CreateMap<TableStudent, Student>()
            .ForMember(dest => dest.Courses, opt => opt.MapFrom(src => Mapper.Map<IEnumerable<Course>>(src.TableCourses)))
            .ForMember(dest => dest.Activities, opt => opt.MapFrom(src => Mapper.Map<IEnumerable<Activity>>(src.TableActivities)))
            .ForMember(dest => dest.Clubs, opt => opt.MapFrom(src => Mapper.Map<IEnumerable<Clubs>>(src.TableClubs)))
        // where TableStudents, TableCourses, TableActivities, TableClubs are database entities

        // ... yet more mappings

    }
} 
```

是否可以“说服” AutoMapper 暂停一个功能块内的映射？例如：

```
public Student[] GetStudents()
{
    DataContext dbContext = new StudentDBContext();

    var query = dbContext.Students;
    // => SUSPEND CONFIGURATION MAPPINGS for Subjects, Activities and Clubs WHILE STILL making use of others
    // => The idea here it to take personal charge of 'manually' setting the particular members (*for some specific reasons)

    var students = Mapper.Map<Student>(query); // => Still be able to use AutoMapper to map other members
}

public Student[] OtherStudentRepositoryMethods()
{
    // Other repository methods continue to make use of the mappings configured in the static constructor
} 
```

注意“**出于某些特定原因**”：可能希望从 AutoMapper 中控制权的一个原因是[http://codebetter.com/davidhayden/2007/08/06/linq-to-sql-query-tuning-appears- to-break-down-in-more-advanced-scenarios/](http://codebetter.com/davidhayden/2007/08/06/linq-to-sql-query-tuning-appears-to-break-down-in-more-advanced-scenarios/)在**1:n 关联的情况下，LINQ to SQL 仅支持每个查询加入一个 1:n 关联**。AutoMapper 在这里效率低下 - 为返回的 N 名学生调用 N 次加载课程，为返回的相同 N 名学生再次调用 N 次加载活动，并且可能为返回的相同 N 名学生再次调用 N 次加载俱乐部。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-28T09:37:27.897

> 是否可以“说服” AutoMapper 暂停一个功能块内的映射？

据我所知，最好的方法是这样使用 Ignore()

```
public class StudentRepository : IStudentRepository
{
    static class StudentRepository
    {
        // ... other mappings

        Mapper.CreateMap<TableStudent, Student>()
            .ForMember(dest => dest.Courses, opt => opt.Ignore())
            .ForMember(dest => dest.Activities, opt => opt.Ignore())
            .ForMember(dest => dest.Clubs, opt => opt.Ignore())
        // where TableStudents, TableCourses, TableActivities, TableClubs are database entities

        // ... yet more mappings

    }
} 
```

此外，正如之前所注意到的，我建议您为要实现的每个目标使用不同的配置文件。这是一个示例

```
public BaseService()
{
    AutoMapperRegistry.Configure();
}

public class AutoMapperRegistry
{
    public static void Configure()
    {
        Mapper.Initialize(x =>
        {
            x.AddProfile<ServiceProfile1>();
            x.AddProfile<ServiceProfileReverseProfile1>();
        });
    }
}

public class ServiceProfile1 : Profile
{
    protected override string ProfileName
    {
        get
        {
            return "ServiceProfile1";
        }
    }

    protected override void Configure()
    {
        Mapper.CreateMap<DataContract_Sub, DTO_Sub>();
        Mapper.CreateMap<DataContract, DTO>()
            .ForMember(x => x.DataContract_Sub, opt => opt.MapFrom(y => y.DTO_Sub))
    .BeforeMap((s, d) => 
            {
                // your custom logic
            })
    .AfterMap((s, d) => 
            {
                // your custom logic
            });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T08:58:26.897

实现此目的的一种方法是为每个场景创建单独的映射引擎实例，这样您就可以配置不同的映射，正如Jimmy Bogard 关于希望以不同方式映射单一类型的[答案中所建议的那样。](https://stackoverflow.com/questions/2183401/using-profiles-in-automapper-to-map-the-same-types-with-different-logic/2196854#2196854)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T08:46:26.543

嗯...谢谢大家的反馈。我花时间考虑所有的答案和建议。尽管它们提供了很多值得深思的东西，但没有一个特别能很好地呈现出来。我想我应该注入一些我尝试过的东西。（**免责声明**：我认为这是一种肮脏的方法——很多事情都可能出错——墨菲定律继续有效）。您可以利用特定实例中的忽略功能来“暂停”映射。通常，在 try and catch 块中，如下所示：

```
public Student[] GetStudents()
{
    try
    { // Suspend/Ignore the mappings
        // => SUSPEND CONFIGURATION MAPPINGS for Subjects, Activities and Clubs
        Mapper.CreateMap<TableStudent, Student>()
                    .ForMember(dest => dest.Courses, opt => opt.Ignore())
                    .ForMember(dest => dest.Activities, opt => opt.Ignore())
                    .ForMember(dest => dest.Clubs, opt => opt.Ignore())

        DataContext dbContext = new StudentDBContext();

        var query = dbContext.Students;

        // other logic ...

        var students = Mapper.Map<Student>(query); // => Still be able to use AutoMapper to map other members
        // set the properties you needed to do manually
    }
    finally // Restore back the mappings
    {
        Mapper.CreateMap<TableStudent, Student>()
                    .ForMember(dest => dest.Courses, opt => opt.MapFrom(src => Mapper.Map<IEnumerable<Course>>(src.TableCourses)))
                    .ForMember(dest => dest.Activities, opt => opt.MapFrom(src => Mapper.Map<IEnumerable<Activity>>(src.TableActivities)))
                    .ForMember(dest => dest.Clubs, opt => opt.MapFrom(src => Mapper.Map<IEnumerable<Clubs>>(src.TableClubs)))
    }
} 
```

就像我提到的，它可能很脏。不是我很乐意编写的那种代码——特别是因为我不知道如果 CreateMap() 在 finally 块中失败会出现什么样的异常情况，但是在你无法彻底检查方法的遗留应用程序上——可能使用上面@AndriyZakharko 建议的不同配置文件，您可以使用它来暂时恢复控制权。我亲自试了一下。

# android - 无法使用 AsyncTask 显示 ProgressDialog

> ID：10704268
> 
> 赞同：0
> 
> 时间：2012-05-22T14:37:36.810
> 
> 标签：android, multithreading, progress-bar, android-asynctask, progressdialog

我想在等待服务器响应时显示 ProgressDialog。

我的班级 JogarActivity 执行以下操作（我的应用程序是一个问答游戏）：

1-初始化变量

2-验证它是否是第一个问题（primeiraPergunta）

2.1- 如果是第一个问题，调用 UserFunctions.getJogar()。此函数构建一个带有参数的列表并将其发送到 JSONParser 类。JSONParser 发出 http 请求并返回一个带有数据的 JSONArray

2.2-如果不是第一个问题，只需从意图附加内容中检索实际问题。

3-尝试将 JSONArray 解析为字符串。如果用户已经回答了实际类别中的所有问题，这将返回一个异常（JSONArray 将为空），因此它可以显示一个对话框，要求用户选择另一个类别。

4-将所有数据（问题和答案选项）放在屏幕上并等待用户交互。

5- 当用户选择一个答案时，它会调用 UserFunctions.gerResposta()。这一次，它将在更新数据库（标点符号、已回答的问题等）后返回状态消息（正确、错误、错误等）。它还将检索下一个问题。

6- 显示一个对话框，其中包含有关问题的信息和一个确定按钮，按下该按钮会重新启动活动。下一个问题作为 intent.putExtra() 传递，并且 primeiraPergunta（第一个问题？）设置为 false。

*UserFunctions 和 JSONParser 不是活动，所以我不能在其中使用 ProgressDialog，只要我不能检索应用程序的上下文。*JSONParser 被其他类使用，所以我不想更改它 *我正在寻找另一种解决方案，而不是重写 JogarActivity 中的所有内容（这也将需要更改其他类）。

首先在下面我粘贴了 JogarActivity 没有更改。然后，我尝试添加一个 AsyncTask 来显示 ProgressDialog，但它只是没有出现在屏幕上（AsyncTask.get() 用于让 JogarActivity 等待来自 asynctask 的结果）。最后，我粘贴了另一个类（RegisterActivity），AsyncTask 工作得很好。

我猜 AsyncTask 可能不是最好的方法，但我只想让它尽快工作。这不是我的代码（RegisterActivity 除外）。应用程序运行后，我将对其进行优化:)

==========JogarActivity.java====================

```
public class JogarActivity  extends Activity {

private static final String TAG_RESPOSTA = "resposta";
private static final String TAG_ID = "idt";
private static final String TAG_PRIMEIRAPERGUNTA = "primeiraPergunta";
private static final String TAG_JSON = "json";
private Integer idPergunta;
private String pergunta;
private String respostaRecebe; //Texto da resposta que o usuário escolheu
private String respostaConfere;
private String resposta;
private String idCategoria;
private String respostaCorreta;
private String[] arrayRespostas = new String[5];
private boolean primeiraPergunta;
private JSONArray json;
private JSONArray jsonResposta;
String idUser;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.jogar_layout);
    Intent in = getIntent();
    String url = this.getString(R.string.urlSite);
    ArrayList<HashMap<String, String>> respostaList = new ArrayList<HashMap<String, String>>();

    String idt = in.getStringExtra(TAG_ID);
    primeiraPergunta = in.getBooleanExtra(TAG_PRIMEIRAPERGUNTA, true);

    TextView insertPergunta = (TextView) findViewById(R.id.insertPergunta);
    ListView insertRespostas = (ListView) findViewById(R.id.listResposta);

    SharedPreferences settings = getSharedPreferences("PREFS_LOGIN", MODE_PRIVATE);
    Integer idUsuario = settings.getInt("idUsuario", 0);
    idUser = idUsuario.toString();

    if (primeiraPergunta){
        UserFunctions userFunction = new UserFunctions();
        json = userFunction.getJogar(idt, idUser);

    }else{
        try {
            json = new JSONArray(in.getStringExtra(TAG_JSON));
            json = json.getJSONArray(2);
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    try{
        @SuppressWarnings("unused")
        String s = json.toString(); // Se o usuário já respondeu todas as perguntas da categoria, retorna uma Exception
        try {
            idPergunta = json.getInt(0);
            pergunta = json.getString(1);
            for (int i=2; i<7 ; i++){
                resposta = json.getString(i);
                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_RESPOSTA, resposta);
                respostaList.add(map);
                arrayRespostas[i-2] = resposta;
            }

            respostaCorreta = json.getString(7);
            respostaConfere = arrayRespostas[Integer.parseInt(respostaCorreta)-1];
            idCategoria = json.getString(11);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        insertPergunta.setText(pergunta);
        ListAdapter adapter = new SimpleAdapter(this, respostaList,
                R.layout.resposta_data,
                new String[] { TAG_RESPOSTA }, new int[] {
                        R.id.insertResposta });

        insertRespostas.setAdapter(adapter);

        // selecting single ListView item
        ListView lv = insertRespostas;

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id){

                Integer pos = position + 1;
                String respostaEscolhida = pos.toString();
                String pergunta = idPergunta.toString();

                UserFunctions userFunction = new UserFunctions();
                            final JSONArray jsonResposta = userFunction.getResposta(pergunta, idUser , respostaEscolhida, idCategoria);

                respostaRecebe = arrayRespostas[position];

                String mensagem = "";
                try {
                    mensagem = jsonResposta.getString(1);
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                final String jrString = jsonResposta.toString();

                AlertDialog alertDialog = new AlertDialog.Builder(
                        JogarActivity.this).create();

                    if (respostaCorreta.equals(pos.toString())){
                        alertDialog.setTitle("PARABÉNS");   
                        alertDialog.setMessage("Resposta correta: "+respostaRecebe+"\n\n"+mensagem);
                    }
                    else{
                        alertDialog.setTitle("VOCÊ ERROU");
                        alertDialog.setMessage("Sua resposta: "+respostaRecebe+"\n\nResposta correta: "+respostaConfere+"\n\n"+mensagem);

                    }
                        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                Intent i = new Intent(getApplicationContext(),JogarActivity.class);
                                //in.putExtra(TAG_NAME, name);
                                i.putExtra(TAG_ID, idCategoria);
                                i.putExtra(TAG_PRIMEIRAPERGUNTA, false);
                                i.putExtra(TAG_JSON, jrString);
                                startActivity(i);
                                finish();
                            }
                    });

                    alertDialog.show();

                        }

        });
    }catch (Exception e){
        AlertDialog sem_perguntas = new AlertDialog.Builder(
                JogarActivity.this).create();
            sem_perguntas.setTitle("PARABÉNS"); 
            sem_perguntas.setMessage("Você já respondeu todas as perguntas desta categoria!");

            sem_perguntas.setButton("VOLTAR", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent i = new Intent(getApplicationContext(),CategoriasJogarActivity.class);
                        i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                        startActivity(i);
                        finish();
                    }
            });

            sem_perguntas.show();
            //finish();
    }

   //finish(); 
}

public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu_jogar, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item)
{

    switch (item.getItemId())
    {
    case R.id.menu_pularPergunta:
        Intent i = new Intent(getApplicationContext(),JogarActivity.class);
        startActivity(i);
        finish();
        Toast.makeText(JogarActivity.this, "Pergunta Pulada", Toast.LENGTH_SHORT).show();
        return true;
    }
    return false;
} 
```

}

==============AsyncTask 的JogarActivity（ProgressDialog 不出现）=============

```
public class JogarActivity  extends Activity {

private static final String TAG_RESPOSTA = "resposta";
private static final String TAG_ID = "idt";
private static final String TAG_PRIMEIRAPERGUNTA = "primeiraPergunta";
private static final String TAG_JSON = "json";
private Integer idPergunta;
private String pergunta;
private String respostaRecebe; //Texto da resposta que o usuário escolheu
private String respostaConfere;
private String resposta;
private String idCategoria;
private String respostaCorreta;
private String[] arrayRespostas = new String[5];
private boolean primeiraPergunta;
private JSONArray json;
private JSONArray jsonResposta;
ProgressDialog pDialog;
Context ctx = this;
String idUser;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.jogar_layout);
    Intent in = getIntent();
    String url = this.getString(R.string.urlSite);
    ArrayList<HashMap<String, String>> respostaList = new ArrayList<HashMap<String, String>>();

    String idt = in.getStringExtra(TAG_ID);
    primeiraPergunta = in.getBooleanExtra(TAG_PRIMEIRAPERGUNTA, true);

    TextView insertPergunta = (TextView) findViewById(R.id.insertPergunta);
    ListView insertRespostas = (ListView) findViewById(R.id.listResposta);

    SharedPreferences settings = getSharedPreferences("PREFS_LOGIN", MODE_PRIVATE);
    Integer idUsuario = settings.getInt("idUsuario", 0);
    idUser = idUsuario.toString();

    if (primeiraPergunta){
        //UserFunctions userFunction = new UserFunctions();
        //json = userFunction.getJogar(idt, idUser);
        AsyncTask jogar = new Jogar().execute("url", "http://www.qranio.com/mobile/perguntas.php", "categoria", idt, "idUsuario", idUser);
        try {
            json = (JSONArray) jogar.get();
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (ExecutionException e) {
            e.printStackTrace();
        }
    }else{
        try {
            json = new JSONArray(in.getStringExtra(TAG_JSON));
            json = json.getJSONArray(2);
        } catch (JSONException e) {
            e.printStackTrace();
        }
    }

    try{
        @SuppressWarnings("unused")
        String s = json.toString(); // Se o usuário já respondeu todas as perguntas da categoria, retorna uma Exception
        try {
            idPergunta = json.getInt(0);
            pergunta = json.getString(1);
            for (int i=2; i<7 ; i++){
                resposta = json.getString(i);
                HashMap<String, String> map = new HashMap<String, String>();
                map.put(TAG_RESPOSTA, resposta);
                respostaList.add(map);
                arrayRespostas[i-2] = resposta;
            }

            respostaCorreta = json.getString(7);
            respostaConfere = arrayRespostas[Integer.parseInt(respostaCorreta)-1];
            idCategoria = json.getString(11);

        } catch (JSONException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        insertPergunta.setText(pergunta);
        ListAdapter adapter = new SimpleAdapter(this, respostaList,
                R.layout.resposta_data,
                new String[] { TAG_RESPOSTA }, new int[] {
                        R.id.insertResposta });

        insertRespostas.setAdapter(adapter);

        // selecting single ListView item
        ListView lv = insertRespostas;

        lv.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> parent, View view, int position, long id){

                Integer pos = position + 1;
                String respostaEscolhida = pos.toString();
                String pergunta = idPergunta.toString();

                //UserFunctions userFunction = new UserFunctions();
                //final JSONArray jsonResposta = userFunction.getResposta(pergunta, idUser , respostaEscolhida, idCategoria);
                AsyncTask jogar = new Jogar().execute("url", "http://www.qranio.com/mobile/resposta.php", "id_pergunta", pergunta, "id_usuario", idUser, "resposta", respostaEscolhida, "categoria", idCategoria);

                try {
                    jsonResposta = (JSONArray) jogar.get();
                } catch (InterruptedException e1) {
                    e1.printStackTrace();
                } catch (ExecutionException e1) {
                    e1.printStackTrace();
                }

                respostaRecebe = arrayRespostas[position];

                String mensagem = "";
                try {
                    mensagem = jsonResposta.getString(1);
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                final String jrString = jsonResposta.toString();

                AlertDialog alertDialog = new AlertDialog.Builder(
                        JogarActivity.this).create();

                    if (respostaCorreta.equals(pos.toString())){
                        alertDialog.setTitle("PARABÉNS");   
                        alertDialog.setMessage("Resposta correta: "+respostaRecebe+"\n\n"+mensagem);
                    }
                    else{
                        alertDialog.setTitle("VOCÊ ERROU");
                        alertDialog.setMessage("Sua resposta: "+respostaRecebe+"\n\nResposta correta: "+respostaConfere+"\n\n"+mensagem);

                    }
                        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                            public void onClick(DialogInterface dialog, int which) {
                                Intent i = new Intent(getApplicationContext(),JogarActivity.class);
                                //in.putExtra(TAG_NAME, name);
                                i.putExtra(TAG_ID, idCategoria);
                                i.putExtra(TAG_PRIMEIRAPERGUNTA, false);
                                i.putExtra(TAG_JSON, jrString);
                                startActivity(i);
                                finish();
                            }
                    });

                    alertDialog.show();

                        }

        });
    }catch (Exception e){
        AlertDialog sem_perguntas = new AlertDialog.Builder(
                JogarActivity.this).create();
            sem_perguntas.setTitle("PARABÉNS"); 
            sem_perguntas.setMessage("Você já respondeu todas as perguntas desta categoria!");

            sem_perguntas.setButton("VOLTAR", new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        Intent i = new Intent(getApplicationContext(),CategoriasJogarActivity.class);
                        i.addFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
                        startActivity(i);
                        finish();
                    }
            });

            sem_perguntas.show();
            //finish();
    }

   //finish(); 
}

/*public void colocaResposta (int i, JSONArray json, ArrayList respostaList) throws JSONException{
    resposta = json.getString(i);
    HashMap<String, String> map = new HashMap<String, String>();
    map.put(TAG_RESPOSTA, resposta);
    respostaList.add(map);
}*/

public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater menuInflater = getMenuInflater();
    menuInflater.inflate(R.layout.menu_jogar, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item)
{

    switch (item.getItemId())
    {
    case R.id.menu_pularPergunta:
        Intent i = new Intent(getApplicationContext(),JogarActivity.class);
        startActivity(i);
        finish();
        Toast.makeText(JogarActivity.this, "Pergunta Pulada", Toast.LENGTH_SHORT).show();
        return true;
    }
    return false;
}

class Jogar extends AsyncTask<String, Void, JSONArray>{

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(ctx);
        pDialog.setMessage("Aguarde...");
        pDialog.setIndeterminate(true);
        pDialog.setCancelable(false);
        pDialog.show();

    }

    @Override
    protected JSONArray doInBackground(String... values) {
        String url = values[1];
        int count = values.length;
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        for (int i=2; i<count; i++){
            params.add(new BasicNameValuePair(values[i], values[i+1]));
            i++;
        }

    JSONParser jsonParser = new JSONParser();
    JSONArray json = jsonParser.getJSONFromUrl(url, params);

        return json;
    }

    protected void onPostExecute(JSONArray result) {
        // dismiss the dialog once done

        pDialog.dismiss();
    }

}

} 
```

=================RegisterActivity（工作正常）======================

```
public class RegisterActivity extends Activity{
EditText reg_fullname;
EditText reg_email;
EditText reg_login;
EditText reg_password;
EditText reg_password2;
Spinner reg_country;
Spinner reg_genre;
EditText reg_birthday;
EditText reg_promocode;
Button btnRegister;
Context ctx = this;
ProgressDialog pDialog;
JSONArray json;
String status;
String msg;

String fullname;
String email;
String login;
String password;
String password2;
String country;
String genre;
String birthday;
String promocode;

boolean finishActivity = false;

/**
 * @see android.app.Activity#onCreate(Bundle)
 */

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.register);

    TextView loginScreen = (TextView) findViewById(R.id.link_to_login);

    loginScreen.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
                            // Closing registration screen
            // Switching to Login Screen/closing register screen
            finish();
        }
    });

    reg_fullname = (EditText) findViewById(R.id.reg_fullname);
    reg_email = (EditText) findViewById(R.id.reg_email);
    reg_login = (EditText) findViewById(R.id.reg_login);
    reg_password = (EditText) findViewById(R.id.reg_password);
    reg_password2 = (EditText) findViewById(R.id.reg_password2); //confirmação de senha
    reg_country = (Spinner) findViewById(R.id.reg_country);
    reg_genre = (Spinner) findViewById(R.id.reg_genre);
    reg_birthday = (EditText) findViewById(R.id.reg_birthday);
    reg_promocode = (EditText) findViewById(R.id.reg_promocode);

    btnRegister = (Button) findViewById(R.id.btnRegister);

    btnRegister.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            fullname = reg_fullname.getText().toString();
            email = reg_email.getText().toString();
            login = reg_login.getText().toString();
            password = reg_password.getText().toString();
            password2 = reg_password2.getText().toString();
            country = reg_country.getSelectedItem().toString();
            genre = reg_genre.getSelectedItem().toString();
            birthday = reg_birthday.getText().toString();
            promocode = reg_promocode.getText().toString();

            boolean validation = true;
            String message = "Campo de preencimento obrigatório";

            if(fullname.equalsIgnoreCase("")){
                reg_fullname.setError(message);
                validation = false;
            }
            if(email.equalsIgnoreCase("")){
                reg_email.setError(message);
                validation = false;
            }
            if(!email.matches(".*@.*")){
                reg_email.setError("O endereço de email não é válido");
                validation = false;
            }
            if(login.equalsIgnoreCase("")){
                reg_login.setError(message);
                validation = false;
            }
            if(password.equalsIgnoreCase("")){
                reg_password.setError(message);
                validation = false;
            }
            if(password2.equalsIgnoreCase("")){
                reg_password2.setError(message);
                validation = false;
            }
            if(!password.equals(password2)){
                reg_password2.setError("A confirmação de senha não confere");
                validation = false;
            }
            if(birthday.equalsIgnoreCase("")){
                reg_birthday.setError(message);
                validation = false;
            }
            SimpleDateFormat bd = new SimpleDateFormat("dd/MM/yyyy");
            if(bd.parse(birthday, new ParsePosition(0)) == null){
                reg_birthday.setError("Esta data não é válida! Preencha novamente, usando o formato dd/mm/aaaa");
                validation = false;
            }

            if(validation){
            new Register().execute();
            }

        }
    });

}

class Register extends AsyncTask<Void, Void, JSONArray>{

@Override
protected void onPreExecute() {
    super.onPreExecute();
    pDialog = new ProgressDialog(ctx);
    pDialog.setMessage("Aguarde...");
    pDialog.setIndeterminate(true);
    pDialog.setCancelable(false);
    pDialog.show();
}

@Override
protected JSONArray doInBackground(Void... params) {
    UserFunctions userFunction = new UserFunctions();
    json = userFunction.newUser(fullname, email, login, password, country, genre, birthday, promocode);

    return json;

}

protected void onPostExecute(JSONArray result) {
    // dismiss the dialog once done
    pDialog.dismiss();
    final AlertDialog alertDialog = new AlertDialog.Builder(
            RegisterActivity.this).create();

            try {
                status = json.getString(0);
                msg = json.getString(1);
                Log.d("Status", status);
            } catch (JSONException e) {
                Log.e("RegisterActiviry", "Error converting result " + e.toString());
                e.printStackTrace();
                status = null;
            }

            if (status.equalsIgnoreCase("erro")){
                alertDialog.setTitle("Erro");
                alertDialog.setMessage(msg);

            }else if (status.equalsIgnoreCase("sucesso")){
                alertDialog.setTitle("Sucesso!");
                alertDialog.setMessage(msg);
                finishActivity = true;
            }else{
                alertDialog.setTitle("Erro");   
                alertDialog.setMessage("Não foi possível realizar seu cadastro, tente novamente mais tarde.");
            }

            alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    if(finishActivity){
                    finish();
                    }else{
                        alertDialog.dismiss();
                    }
                }
        });

        alertDialog.show();

} 
```

}

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:41:58.043

把你的对话框像下面我希望它会起作用。

```
runOnUiThread(new Runnable() {
                    public void run() {

                   //Your dailog 

                    }
                }); 
```

# jquery - 如何使用 JQuery 使图像在封闭的矩形中移动和反弹？

> ID：10704269
> 
> 赞同：0
> 
> 时间：2012-05-22T14:37:41.930
> 
> 标签：jquery, html

我可以知道任何示例或代码，由此我可以为小图像设置动画以移动并使用 Jquery 让它从给定矩形的墙上反弹？

非常感谢您花时间阅读这个问题..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:42:43.877

[Processing.js](http://processingjs.org/)是一个强大的可视化引擎，有一些你可以学习的基于物理的例子。

# blackberry-simulator - 在黑莓中的按钮焦点上显示工具提示

> ID：10704275
> 
> 赞同：0
> 
> 时间：2012-05-22T14:38:01.883
> 
> 标签：blackberry-simulator

谁能告诉我如何在按钮焦点侦听器上的黑莓上显示工具提示？我正在使用黑莓 6.0。我试过 Status.show() 方法。但它在屏幕之间显示巨大的工具提示。显示在字段附近显示的工具提示的任何其他方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:39:45.980

好吧，我建议的最好方法是，在按钮焦点列表器上创建一个带有箭头类型的 bg 图像的自定义标签字段，显示带有计时器运行的标签字段，并在一段时间后删除标签字段，不知道这是否是你的要求，我们在项目中尝试相同的方法。

# delphi - 来自 MDIChild 的 AdvToolbar 显示在 MainForm 上，并且可以拖动它

> ID：10704281
> 
> 赞同：0
> 
> 时间：2012-05-22T14:38:17.217
> 
> 标签：delphi, delphi-xe2, toolbar, mdi

我创建了一个由 MainForm 和几个 MDIChild Forms 组成的应用程序。我正在使用 TMS 组件中的 AdvDockPanel 和 AdvToolbar。我的主窗体在窗体的顶部、底部、左侧和右侧都有 AdvDockPanel 以显示 AdvToolbars。

每个 MDIChild 表单都包含一个 AdvToolbar，在创建这些表单时，AdvToolbar.Parent 设置为 MainForm 上的 AdvDockPanel。起初，AdvToolbar.Visible 为 False，在激活每个 MDIChild 表单时，我将其可见性设置为 True。

总而言之，在激活 MDIChild 表单时，我希望它的 AdvToolbar 显示在 MainForm.AdvDockPanel 上，而在停用它时，我希望它隐藏。

这一切都很好，除非我尝试将 AdvToolbar 从一个 AdvDockPanel 拖动到另一个将穿过我的 MainForm 的中间，这使我的活动 MDIChild 表单隐藏并导致此错误：“无法在 OnShow 或 OnHide 中更改可见”。

我已经对其进行了调试，并找到了引发此异常的位置。它在 Vcl.Forms 中。过程 TCustomForm.CMShowingChanged(var Message: TMessage);

所以，我想知道是否有一种方法可以在 MainForm 上从我的活动 MDIChild 表单中显示 AdvToolbar，同时能够在我的 MainForm 中拖动我的工具栏。

谢谢，

*   查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T18:01:41.957

您可以检查工具栏的当前父级是否是 TFloatingWindow（拖动工具栏时的父级）：

```
procedure TForm25.FormDeactivate(Sender: TObject);
begin
   if not (orgaadvtoolbar1.Parent is TFloatingWindow) then
      OrgaAdvToolBar1.visible:=false;
end; 
```

TAdvToolBar.Dragging 不起作用，因为 TAdvToolbar 使用自己的拖动标志 FDraging 但它不是属性，因此只有修改 TMS Software 的源代码才能访问该变量。

# c# - 如何更改 PrintDialog 表单的大小

> ID：10704284
> 
> 赞同：2
> 
> 时间：2012-05-22T14:38:27.873
> 
> 标签：c#, printing, printdialog

我的 C# 程序允许用户选择他们希望打印一些标签的几个类似名称的打印机中的哪一个。与必须显示的打印机名称相比，标准 PrintDialog 相当狭窄，因此您无法在下拉列表中看到所有打印机的全名。有没有办法增加 PrintDialog 表单的宽度？由于它是一个对话框，因此在运行时无法调整大小。我真的不想重新发明轮子并想出一个全新的表格来枚举已安装的打印机，尽管这项任务看起来很小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:27:23.220

您显然知道如何创建自己的表单，所以我不会向您建议。
但是如何在打印按钮附近添加一个组合框，然后像这样填充它。
我建议只制作组合框 dropdwon，这样用户就不能添加他们自己的打印机名称和 F*** 它全部了。

```
foreach (string s in PrinterSettings.InstalledPrinters)
{
    comboBox1.Items.Add(s);
} 
```

# wpf - WPF 数据网格异常

> ID：10704285
> 
> 赞同：1
> 
> 时间：2012-05-22T14:38:30.073
> 
> 标签：wpf, datagrid

我一直在实现一种在我的数据网格中“勾选所有”复选框的方法。

```
public void SelectAllCheckboxes(object sender, RoutedEventArgs e)
    {
        if (bindSource != null)
        {
            DataView list = (DataView)bindSource.List;
            System.Windows.Controls.Button btn = e.OriginalSource as System.Windows.Controls.Button;
            if (btn.Content.ToString() == "Select All")
            {
                for (int i = 0; i < list.Count; i++)
                {
                    list[i]["Approve?"] = true;
                }
            }
            else
            {
                for (int i = 0; i < list.Count; i++)
                {
                    list[i]["Approve?"] = false;
                }
            }
            bindSource.DataSource = list;
            dataGrid.DataContext = bindSource;
        }
    } 
```

当我使用该方法一次勾选所有复选框时，它工作正常。所有复选框均已勾选。但是，当我尝试“选择无”以取消选中所有内容时，第一个复选框将永远不会改变。蜱呆在那里。

这也以相反的选择顺序发生。

数据行确实保留了预期的真/假值，只是没有在网格上表示。

到底是怎么回事？

[编辑]经过一些进一步的测试，在我“唤醒它”后，该复选框可以正常工作，方法是单击它几次并更改其勾选值。非常非常奇怪。

# objective-c - 我应该在哪里初始化目标 c 中的变量？

> ID：10704291
> 
> 赞同：2
> 
> 时间：2012-05-22T14:38:59.417
> 
> 标签：objective-c, ios, xcode

在目标 c 中，我应该覆盖 init 方法来初始化我的变量吗？如果变量是属性，我仍然可以通过通常的方式访问它们来设置它们的初始值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:54:28.990

> 在目标 c 中，我应该覆盖 init 方法来初始化我的变量吗？

是的。具体来说，指定的初始化程序。

您的子类还可以指定另一个构建阶段（例如 viewDidLoad）。此外，对象的内存在分配时归零，因此您无需将它们显式设置为 0/nil（除非您发现它更具可读性）。

> 如果变量是属性，我仍然可以通过通常的方式访问它们来设置它们的初始值吗？

您应该避免使用对象的实例方法/访问器，并在部分构造的状态下直接访问 ivars（尤其是初始化程序和 dealloc）。您需要避免许多副作用 -[此处示例](https://stackoverflow.com/questions/5932677/initializing-a-property-dot-notation/5932733#5932733)；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:50:23.650

在类接口中声明的变量将自动初始化为默认值，0 表示整数值，nil/NULL 表示类和指针。如果您需要将变量初始化为其他值，那么您需要为您的类覆盖一个有保证的入口点。`NSObject`例如，继承自的自定义类您将简单地覆盖`init`. 如果您正在使用从`NIB`文件加载的视图控制器，那么您可以覆盖`initWithCoder:`或[`– awakeFromNib`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html#//apple_ref/occ/instm/NSObject/awakeFromNib). 您应该始终检查您从哪个类继承的文档并找到该类的指定初始化程序。有时您需要设置一个通用的初始化方法并从各种初始化程序中调用它。此外，如果您有一个也是属性的变量，建议您设置属性而不是直接设置变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:46:02.997

您可以在视图控制器的 viewDidLoad 方法中初始化变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T14:48:55.357

> 我应该覆盖init方法来初始化我的变量吗？

实例变量：是的，尽管它们已经默认初始化为 0/nil/false。

> 如果变量是属性，我仍然可以通过通常的方式访问它们来设置它们的初始值吗？

是的你可以。Apple 建议不要这样做，因为子类可能会覆盖 set 访问器来做一些意想不到的事情。在实践中，这很少成为问题。

# python - XPATH Python 表达式

> ID：10704292
> 
> 赞同：-2
> 
> 时间：2012-05-22T14:39:08.107
> 
> 标签：python, xml, xpath, python-3.x, libxml2

我是 XPATH 的新手。我正在使用 Python 和 libxml 模块来尝试仅获取节点，例如`<TITLE>`，`<TARGET>`但仅在某些日期之间。例如，打电话时`python program.py 01/04/12 01/20/12`我只想在这两个日期之间有节点，我想不出一个好的方法来解决这个问题。也许有一个我可以使用的 XPATH 表达式。任何人都可以提出解决方案吗？

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE SCAN_LIST_OUTPUT SYSTEM "https://qualysapi.qualys.com/api/2.0/fo/scan/scan_list_output.dtd">
<SCAN_LIST_OUTPUT>
<RESPONSE>
<DATETIME>2012-02-13T14:54:21Z</DATETIME>
<SCAN_LIST>
  <SCAN>
    <REF>scan/121212112.61291</REF>
    <TYPE>Scheduled</TYPE>
    <TITLE><![CDATA[Company A 5/19/2012]]></TITLE>
    <USER_LOGIN>username</USER_LOGIN>
    <LAUNCH_DATETIME>2012-05-20T04:10:05Z</LAUNCH_DATETIME>
    <STATUS>
      <STATE>Finished</STATE>
    </STATUS>
    <TARGET><![CDATA[10.1.1.1, 10.1.1.1, 10.1.1.1, 10.1.1.1...]]></TARGET>
  </SCAN>
  <SCAN>
    <REF>scan/12121212.1212</REF>
    <TYPE>Scheduled</TYPE>
    <TITLE><![CDATA[Company B 5/19/2012]]></TITLE>
    <USER_LOGIN>username</USER_LOGIN>
    <LAUNCH_DATETIME>2012-05-19T04:10:06Z</LAUNCH_DATETIME>
    <STATUS>
      <STATE>Finished</STATE>
    </STATUS>
    <TARGET><![CDATA[10.2.2.2, 10.2.3.3, 10.2.14.5, 10.1.2...]]></TARGET>
  </SCAN> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:45:51.253

查看 Mark Pilgrim 的*Dive Into Python 3*，第 6 章。XML，第[12.6 节。进一步使用 lxml](http://getpython3.com/diveintopython3/xml.html#xml-lxml)。

# regex - 是否可以通过 Vim 中的正则表达式替换有条件地插入文本？

> ID：10704295
> 
> 赞同：4
> 
> 时间：2012-05-22T14:39:13.897
> 
> 标签：regex, vim

我的表格中有几行要从 Excel 转换为 Wiki 格式，如果该字段中有文本，我想为每行的部分文本添加链接标签。我已经开始了转换工作并来到了这一点：

```
|10.20.30.9||x|-||
|10.20.30.10||x|s04|Server 4|
|10.20.30.11||x|s05|Server 5|
|10.20.30.12|||||
|10.20.30.13||||| 
```

我想要的是将第四列从例如更改`s04` 为`[[server:s04]]`. 如果该行为空或包含 `-`. 如果这 `-`是一个大问题，我可以删除它。

我对正则表达式的所有尝试都以从被替换的整行结尾处获取任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T15:36:07.177

这似乎在你放弃的样本上完成了工作（使用 Vim）：

```
%s/^|\%([^|]*|\)\{3}\zs[^|]*/\=(empty(submatch(0)) || submatch(0) == '-') ? submatch(0) : '[[server:'.submatch(0).']]'/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T14:56:44.167

考虑使用`awk`这样做：

```
#!/bin/bash

awk -F'|' '
{ 
  OFS = "|";
  if ($5 != "" && $5 != "-")
    $5 = "server:" $5;
  print $0
}' 
```

*注意：我从第一个版本开始就编辑了这个脚本。目前的这个，IMO 更好。*

然后您可以使用以下方法处理它：

```
cat $FILENAME | sh $AWK_SCRIPTNAME 
```

该`-F'|'`开关告诉`awk`用作`|`字段分隔符。`if/else`and`printf`语句是非常不言自明的。它打印字段，在第 5 列前附加“服务器：”，仅当它不是`"-"`或时`""`。

为什么是第 5 列而不是第 4 列？：因为您`|`在每条记录的开头使用。因此`awk`，将 'first' 字段 ( `$1`) 视为一个空字符串，它*认为*应该在此 first*之前*`|`出现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T15:19:50.297

It's probably better to use awk as ArjunShankar writes, but this should work if you remove "-" ;) Didn't get it to work with it there.

```
:%s/^\([^|]*|\)\([^|]*|\)\([^|]*|\)\([^|]*|\)\([^|]\+|\)/\1\2\3\4[[server:\5]]/ 
```

It's just stupid though. The first 4 are identical (match anything up to | 4 times). Didn't get it to work with {4}. The fifth matches the s04/s05-strings (just requires that it's not empty, therefor "-" must be removed).

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-22T23:02:35.877

为其他人给出的想法增加一点可读性：

```
:%s/\v^%(\|.{-}){3}\|\zs(\w+)/[[server:\1]]/ 
```

任务完成。

请注意 {3} 如何指示要跳过的列数。还要注意使用非常神奇的`\v`正*则*表达式模式。这降低了正则表达式的复杂性，尤其是当它使用比文字文本更多的“特殊”字符时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T06:08:40.637

让我推荐以下替换命令。

```
:%s/^|\%([^|]*|\)\{3}\zs[^|-]\+\ze|/[[server:&]]/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T16:57:31.780

可以通过以下方式实现更简单的替换：

```
%s/^|.\{-}|.\{-}|.\{-}|\zs\(\w\{1,}\)\ze|/[[server:\1]]/

   ^^^^^^^^^^^^^^^^^^^^                   -> Match the first 3 groups (empty or not);
                       ^^^                -> Marks the "start of match";
                          ^^^^^^^^^^^     -> Match only if the 4th line contains letters numbers and `_` ([0-9A-Za-z_]);
                                     ^^^  -> Marks the "end of match"; 
```

如果`_`字符类似于`-`, 可以出现但不能被替换，请使用以下正则表达式：`%s/^|.\{-}|.\{-}|.\{-}|\zs\([0-9a-zA-Z]\{1,}\)\ze|/[[server:\1]]/`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T15:17:43.030

尝试

```
 :1,$s/|\(s[0-9]\+\)|/|[[server:\1]]|/ 
```

假设你的 s04, s05 总是 s 和一个数字

# php - Zend Gdata 日历 API 返回“不支持 3.0 版”。

> ID：10704299
> 
> 赞同：0
> 
> 时间：2012-05-22T14:39:25.607
> 
> 标签：php, google-api, google-apps-marketplace

在进行简单的日历获取时收到以下错误：

```
Expected response code 200, got 403
Version 3.0 is not supported. 
```

代码如下：

认证

```
$options = array(
    'requestScheme' => Zend_Oauth::REQUEST_SCHEME_HEADER,
    'version' => '1.0',
    'signatureMethod' => 'HMAC-SHA1',
    'consumerKey' => $config['consumer_key'],
    'consumerSecret' => $config['consumer_secret']
);

/**
 * Create HTTP Client object which adds OAuth Authorization
 * headers to outbound requests.
 */
$this->_consumer = new Zend_Oauth_Consumer($options);
$this->_token = new Zend_Oauth_Token_Access();
$this->_http_client = $this->_token->getHttpClient($options); 
```

日历查询

```
$calendarClient = new Zend_Gdata_Calendar(Oauth::I()->getHttpClient());
print $calendarClient->getMajorProtocolVersion();

$query = $calendarClient->newEventQuery();
$query->setUser('default');
$query->setVisibility('private');
$query->setProjection('full');

Oauth::I()->setRequestorId($query);
try {
  $list = $calendarClient->getCalendarEventEntry($query);
  var_dump($list);
} catch(Exception $e) {
  var_dump($e->getMessage());
}
var_dump($calendarEventsFeed); 
```

* * *

在 Zend_Http_Client_Adapter_Socket 资源头下转储 $calenderClient 时：

```
 ["gdata-version"]=>
  array(2) {
    [0]=>
    string(13) "GData-Version"
    [1]=>
    string(3) "3.0"
  } 
```

但是 getMajorProtocolVersion() 返回 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:46:59.463

解决方案是在您需要更改 GData 版本时在 HTTP 客户端上设置标头（）。我确信有专门针对此的方法，但这有效。

```
// $http_client is Zend_Oauth_Token_Access()::getHttpClient()
$http_client->setHeaders('GData-Version', '2.0'); 
```

# java - Hibernate：将数据库中的看似 n:n 映射转移到 Hibernate 中的 @OneToMany 并附加条件

> ID：10704300
> 
> 赞同：0
> 
> 时间：2012-05-22T14:39:32.707
> 
> 标签：java, hibernate

我有一个在应用程序和 application_descriptions 之间映射的数据库。每个应用程序可以有多个描述（由列 product_id 映射）。表应用中的product_id 列可以有重复值，但是product_id 列和wrapping_version 列的组合是唯一的。所以描述应该只映射到最高版本的应用程序。

我已经在表应用程序中制定了一个 @OneToMany 映射来获取所有描述。在描述中，我只得到 product_id 的字符串。这不是最佳的，但它不能像在替代 a) 中那样映射它。

因此，我制定的解决方案可以很好地从数据库中读取数据，但是当我尝试将应用程序更新到数据库时，我得到（仅有时）以下错误：

```
Hibernate: 
    /* update
        com.twistbox.iwp.dao.Application */ update
            applications 
        set
            created=?,
            design_id=?,
            message=?,
            product_id=?,
            product_title=?,
            retailer_id=?,
            state=?,
            tbyb_playduration=?,
            tbyb_startups=?,
            wrapping_security_layer=?,
            wrapping_version=? 
        where
            id=?
Hibernate: 
    /* delete one-to-many com.twistbox.iwp.dao.Application.applicationDescriptions */ update
            application_descriptions 
        set
            product_id=null 
        where
            product_id=?

104330 [http-8080-1] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 1048, SQLState: 23000
104330 [http-8080-1] ERROR org.hibernate.util.JDBCExceptionReporter - Column 'product_id' cannot be null 
```

我尝试过 1\. 在更新之前将映射描述集设置为 null 2\. 在更新之前设置为新的空 HashSet 对象 3\. 让映射对象像我从数据库中获取一样

默认休眠不应该在更新时级联，我还没有找到停止这样做的方法（最后一次尝试是@OneToMany（cascade = {}））。我还在表中尝试了 true 和 false 值：1\. 属性可以为空 2\. 可更新 3\. 可插入

其中一些适用于我收到错误的应用程序，但随后我收到其他应用程序的相同错误，只有当我再次删除属性时才有效。有什么想法该怎么做？

我的代码（只有重要的 getter 和 setter，所有其他的都被删除以获得更好的概览）：

```
@Entity
@Table (name = "applications")
@FilterDef(name = "versionFilter")
public class Application implements Comparable<Application>, Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private long id;
    private Retailer retailerId;
    private long designId;
    private String productId;
    private String productTitle;
    private int tbybPlayDuration;
    private int tbybStartups;
    private int wrappingSecurityLayer;
    private int wrappingVersion;
    private ApplicationStatus status;
    private String message;
    private Timestamp created;
    private Set<ApplicationDescription> applicationDescriptions = new HashSet<ApplicationDescription>();
    private Set<PricingApplicationMapping> pricingApplication = new HashSet<PricingApplicationMapping>();

    public Application() {

    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @GenericGenerator(name="increment", strategy="increment")
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }
    @Column(name="product_id")
    public String getProductId() {
        return productId;
    }
    public void setProductId(String productId) {
        this.productId = productId;
    }

    @OneToMany(cascade = {})
    @JoinColumn(name="product_id", referencedColumnName="product_id")
    @Filter(name = "versionFilter", condition = "wrapping_version =select max(A.wrapping_version) from application A where A.product_id= product_id")
    public Set<ApplicationDescription> getApplicationDescriptions() {
        return applicationDescriptions;
    }

    public void setApplicationDescriptions(
            Set<ApplicationDescription> applicationDescriptions) {
        this.applicationDescriptions = applicationDescriptions;
    }

    @Override
    public int compareTo(Application o) {
        return this.getProductTitle().compareToIgnoreCase(o.getProductTitle());
    }

}

@Entity
@Table (name = "application_descriptions")
@FilterDef(name = "paMapping")
public class ApplicationDescription implements Comparable<ApplicationDescription>, Serializable{

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private long id;
    private String productId;
//  private Application application;
//  private String countryCode;
    private Territory territory;
    private String name;
    private String description;
    private String termsAndConditions;

    public ApplicationDescription() {

    }

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    @GenericGenerator(name="increment", strategy="increment")   
    public long getId() {
        return id;
    }
    public void setId(long id) {
        this.id = id;
    }

//  @ManyToOne
//  @JoinColumn(name="product_id")
//  public Application getApplication() {
//      return application;
//  }
//
//  public void setApplication(Application application) {
//      this.application = application;
//  }

    @Column(name="product_id")
    public String getProductId() {
        return productId;
    }
    public void setProductId(String productId) {
        this.productId = productId;
    }

    @Column(name="name")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Column(name="description")
    public String getDescription() {
        return description;
    }
    public void setDescription(String description) {
        this.description = description;
    }
    @Column(name="terms_and_conditions")
    public String getTermsAndConditions() {
        if (this.termsAndConditions != null && !this.termsAndConditions.equals("") && !this.termsAndConditions.toLowerCase().equals("null"))
            return this.termsAndConditions;
        return "default";
    }
    public void setTermsAndConditions(String termsAndConditions) {
        this.termsAndConditions = termsAndConditions;
    }

    @JoinColumn(name="country_code")
    @OneToOne
    public Territory getTerritory() {
        return territory;
    }

    public void setTerritory(Territory territory) {
        this.territory = territory;
    }

    @Override
    public int compareTo(ApplicationDescription o) {
        return this.getTerritory().getCountryCode().compareToIgnoreCase(o.getTerritory().getCountryCode());
    }

} 
```

application_descriptions a) 中 product_id 的替代方案：

```
@ManyToOne
    @JoinColumn(name="product_id")
    public Application getApplication() {
        return application;
    } 
```

错误信息：

```
Hibernate: 
    /* load one-to-many com.twistbox.iwp.dao.Application.applicationDescriptions */ select
        applicatio0_.product_id as product5_0_2_,
        applicatio0_.id as id2_,
        applicatio0_.id as id4_1_,
        applicatio0_.product_id as product5_4_1_,
        applicatio0_.description as descript2_4_1_,
        applicatio0_.name as name4_1_,
        applicatio0_.terms_and_conditions as terms4_4_1_,
        applicatio0_.country_code as country6_4_1_,
        territory1_.country_code as country1_8_0_,
        territory1_.currency as currency8_0_,
        territory1_.name as name8_0_,
        territory1_.terms_and_conditions as terms4_8_0_ 
    from
        application_descriptions applicatio0_ 
    left outer join
        territories territory1_ 
            on applicatio0_.country_code=territory1_.country_code 
    where
        applicatio0_.product_id=?

180684 [http-8080-1] WARN org.hibernate.util.JDBCExceptionReporter - SQL Error: 0, SQLState: S1009
180684 [http-8080-1] ERROR org.hibernate.util.JDBCExceptionReporter - Invalid value for getLong() - 'para' 
```

SQL 生成表：

```
CREATE TABLE IF NOT EXISTS `applications` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `retailer_id` int(10) unsigned NOT NULL,
  `design_id` int(10) unsigned NOT NULL,
  `product_id` varchar(150) NOT NULL,
  `product_title` varchar(150) NOT NULL,
  `tbyb_playduration` int(10) NOT NULL,
  `tbyb_startups` int(10) NOT NULL,
  `wrapping_security_layer` int(10) unsigned NOT NULL DEFAULT '1',
  `wrapping_version` int(10) unsigned NOT NULL DEFAULT '1',
  `state` enum('WAITING','RUNNING','DONE','FAILED') NOT NULL DEFAULT 'WAITING',
  `message` varchar(250) DEFAULT NULL,
  `created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `product_id_wrapping_version` (`product_id`,`wrapping_version`),
  KEY `FK_applications_retailers` (`retailer_id`),
  KEY `FK_applications_custom_designs` (`design_id`),
  KEY `product_id` (`product_id`),
  CONSTRAINT `FK_applications_custom_designs` FOREIGN KEY (`design_id`) REFERENCES `custom_designs` (`id`),
  CONSTRAINT `FK_applications_retailers` FOREIGN KEY (`retailer_id`) REFERENCES `retailers` (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE IF NOT EXISTS `application_descriptions` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `product_id` varchar(150) NOT NULL,
  `country_code` varchar(5) NOT NULL,
  `name` varchar(150) NOT NULL,
  `description` varchar(500) NOT NULL,
  `terms_and_conditions` text,
  PRIMARY KEY (`id`),
  UNIQUE KEY `product_id_county_code` (`product_id`,`country_code`),
  KEY `FK_application_descriptions_applications` (`product_id`),
  KEY `FK_application_descriptions_territories` (`country_code`),
  CONSTRAINT `FK_application_descriptions_territories` FOREIGN KEY (`country_code`) REFERENCES `territories` (`country_code`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

应用更新：

```
public static long updateApplication(Application application){

        SessionFactory sf = HibernateUtil.getSessionFactory();
        Session session = null;
        try{
            session = sf.openSession();
            session.beginTransaction();
            session.saveOrUpdate(application);
            session.getTransaction().commit();
        }
        catch(HibernateException he){
            logger.severe("Error updating application! " + he.getMessage() + " " + he.getStackTrace());
            return -1;

        }
        catch(Exception e){
            logger.severe("Error updating application! " + e.getMessage() + " " + e.getStackTrace());
            return -1;
        }
        finally{
            session.close();
        }
        return application.getId();

    } 
```

# xml - XSL：在进一步计算中使用计算值

> ID：10704302
> 
> 赞同：2
> 
> 时间：2012-05-22T14:39:39.070
> 
> 标签：xml, xslt

以下是我的代码的简短示例。

我想计算组（或 gid）中每个**条目的平均****target_value**在一个简单的伪代码中，这将按以下方式编写：

 **```
total target_value of entries with gid "001" / amount of entries with gid "001" 
```

但是，由于 XML 对我来说相当新，我想知道如何重用已经计算的值（请参阅下面的 XSL）以进行进一步的计算？变量是最有效的方法吗？如果是，应该在哪里/如何定义它们？

XML:

```
<root>
   <entry gid ="001">
      <level_1>
         <target_value>50</target_value>
      </level_1>
   </entry>

   <entry gid ="001">
      <level_1>
         <target_value>30</target_value>
      </level_1>
   </entry>
</root> 
```

XSL：

```
<xsl:value-of select="sum(entry[@gid='001']/level_1/target_value)" /> 
```

结果：80

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:18:30.173

```
<xsl:value-of select="
  sum(entry[@gid='001']/level_1/target_value) div count(entry[@gid='001'])
" /> 
```

当然，您可以将计算值保存在变量中以供重复使用：

```
<xsl:variable 
  name="target_value_sum" 
  select="sum(entry[@gid='001']/level_1/target_value)" 
/>

<xsl:value-of select="$target_value_sum div count(entry[@gid='001'])" /> 
```

在这种情况下没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:45:55.660

这个 xslt 1.0 样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

  <xsl:key name="entry-by-gid" match="entry" use="@gid" />

  <xsl:template match="root">
   <entries>
    <xsl:apply-templates select="entry
       [generate-id(.) = generate-id( key('entry-by-gid',@gid)[1])]"/>
   </entries>
   </xsl:template>

  <xsl:template match="entry">
    <entry-average gid="{@gid}">
      <xsl:value-of select="sum(../entry[@gid=current()/@gid]/level_1/target_value) div
                          count(../entry[@gid=current()/@gid]/level_1/target_value)"/>
    </entry-average>
  </xsl:template>

</xsl:stylesheet> 
```

会产生像..这样的输出

```
<?xml version="1.0" encoding="utf-8"?>
<entries>
  <entry-average gid="001">40</entry-average>
</entries> 
```

对于 xslt 2.0，使用 for-each-group。这是一个 XSLT 2.0 样式表来做同样的事情。

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="/">
   <entries>
    <xsl:for-each-group select="*/entry" group-by="@gid">
      <entry-average gid="{@gid}">
        <xsl:value-of select="sum(../entry[@gid=current-grouping-key()]/level_1/target_value) div
                            count(../entry[@gid=current-grouping-key()]/level_1/target_value)"/>
      </entry-average>
    </xsl:for-each-group>
   </entries>
 </xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T16:05:56.583

我会把它写成两个文件范围的变量，第一个选择节点集到一个变量中，第二个计算平均值。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="text" />

  <xsl:variable name="target_values" select="/root/entry[@gid='001']/level_1/target_value" />
  <xsl:variable name="mean_target_values" select="sum($target_values) div count($target_values)" />

  <xsl:template match="/root">
    <xsl:value-of select="format-number($mean_target_values, '0.00')" />
  </xsl:template>

</xsl:stylesheet> 
```

由于您提到格式化浮点数，我已对其进行了修改以使用该`format-number`函数。格式符号与 Java DecimalForamt 类的相同，文档在[此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)。我使用`0.00`了它给出了两位小数。我认为如果需要，如何更改它很清楚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T17:18:23.100

看到您的评论后，您想为所有条目组提供相同的信息，`@gid`我必须编写一个与我以前的解决方案截然不同的解决方案，它值得一个新的答案。

不幸的是，以这种方式分组并不是 XSL 中最简单的部分，但它就是这样。请注意，使用所谓的 Muenchian 方法可以提高效率，但我以这种方式编写它是为了（相对）简单性和可读性。（我看到[Sean B. Durkin](https://stackoverflow.com/users/10823/sean-b-durkin)使用了更快的方法，因此您可以比较它们。）

它的工作方式是`xsl:for-each`循环遍历`<entry>`具有`gid`与所有先前元素不同的属性的所有`<entry>`元素。这会选择`gid`属性的所有唯一值，这些值会复制到`$gid`变量中。

之后，将`<target_value>`元素内`<entry>`具有相同`gid`属性的所有元素收集到一个节点集中并分配给变量`$target_values`。之后很容易计算它们并找到它们的总数，将它们除以另一个以获得平均值，然后将其分配给另一个变量。

然后只输出`gid`每个不同的属性值和平均值`gid`。该`$nl`变量是一个方便变量，等于用于布局输出的换行符。

我希望很容易从这里推断出您需要的最终解决方案。如果你卡住了，请再次询问。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">

  <xsl:output method="text" />

  <xsl:variable name="nl">
    <xsl:text>
</xsl:text>
  </xsl:variable>

  <xsl:template match="/root">
    <xsl:for-each select="entry[not(@gid = preceding-sibling::entry/@gid)]">
      <xsl:sort select="@gid" />

      <xsl:variable name="gid" select="@gid" />

      <xsl:variable name="target_values" select="/root/entry[@gid=$gid]/level_1/target_value" />
      <xsl:variable name="mean_target_values" select="sum($target_values) div count($target_values)" />

      <xsl:value-of select="concat('GID: ', $gid, $nl)" />
      <xsl:value-of select="concat('mean target value ', format-number($mean_target_values, '0.00'), $nl)" />
      <xsl:value-of select="$nl" />

    </xsl:for-each>
  </xsl:template>

</xsl:stylesheet> 
```

产生这个输出

```
GID: 001
mean target value 40.00

GID: 002
mean target value 60.33

GID: 003
mean target value 27.00 
```

应用于此 XML 时

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <entry gid ="001">
        <level_1>
            <target_value>50</target_value>
        </level_1>
    </entry>
    <entry gid ="001">
        <level_1>
            <target_value>30</target_value>
        </level_1>
    </entry>
    <entry gid ="002">
        <level_1>
            <target_value>40</target_value>
        </level_1>
    </entry>
    <entry gid ="002">
        <level_1>
            <target_value>72</target_value>
        </level_1>
    </entry>
    <entry gid ="002">
        <level_1>
            <target_value>69</target_value>
        </level_1>
    </entry>
    <entry gid ="003">
        <level_1>
            <target_value>14</target_value>
        </level_1>
    </entry>
    <entry gid ="003">
        <level_1>
            <target_value>44</target_value>
        </level_1>
    </entry>
    <entry gid ="003">
        <level_1>
            <target_value>23</target_value>
        </level_1>
    </entry>
</root> 
```**

# jquery - 来自 JavaServlet 的 HTML 字符串在 Javascript 中解释为 #document 而不是字符串

> ID：10704304
> 
> 赞同：1
> 
> 时间：2012-05-22T14:39:56.823
> 
> 标签：jquery

我们有一个 JavaServlet 正在运行，它为我们提供所需的数据。问题是 Jquery 解释这些数据的方式。

信息通过响应编写器发送。（例如：消息）

```
protected void doPost(HttpServletRequest request,
    HttpServletResponse response)
        throws ServletException {

    String body = "";
    for (Message msg : messages) {
        body += "<div class=\"Message\" id=\"" + msg.getId() + "\">"
            + *inner information*
            + "</div>";
    }
    response.getWriter().write(body);
} 
```

信息是通过 Ajax 请求获取的

```
$.ajax({
    type: 'POST',
    url: 'message.jsp',
    data: { *Needed data* },
    success: function(data) {
        $('#element').append(data);
    }
}); 
```

这有时有效，有时无效。所以我们在 chrome 中检查了控制台，让代码停在附加行。当发送多条消息时，成功函数中的“数据”被解释为一个大字符串，

```
"<div class="message" id="153" onclick="loadFullMessage(153)"></div>
<div class="message" id="154" onclick="loadFullMessage(154)"></div>
<div class="message" id="155" onclick="loadFullMessage(155)"></div>
<div class="message" id="156" onclick="loadFullMessage(156)"></div>
" 
```

但是当仅发送 1 条消息/div 时，它会被解释为“#document”对象。

```
#document
    <div class=​"message" id=​"174" onclick=​"loadFullMessage(174)​">​…​&lt;/div>​ 
```

可以在 chrome 控制台中看到该消息可用，但是在附加以下错误时遇到“未捕获错误：HIERARCHY_REQUEST_ERR：DOM 异常 3”。

数据如何总是被解释为字符串而不变成文档对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T10:44:48.733

@boblail 是对的 - 更改`dataType`为`ajax`会成功。但是，您有时会使用您不打算修改的第三方库。就我而言，它是 JQuery UI。

发送`Content-Type: application/xhtml+xml`会导致 JQuery 从响应中构建一个 DOM 文档。设置你`Content-Type`的`text/html`，你很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T16:18:59.320

我刚刚通过添加调用解决了一个非常相似的`dataType`问题`ajax`：

```
$.ajax({
  type: 'POST',
  url: 'message.jsp',
  data: { *Needed data* },
  success: function(data) {
    $('#element').append(data);
  }
}); 
```

另请参阅这两个 StackOverflow 答案：

*   [错误：HIERARCHY_REQUEST_ERR：DOM 异常 3](https://stackoverflow.com/a/8848923/731300)
*   [究竟什么会导致“HIERARCHY_REQUEST_ERR: DOM Exception 3”-错误？](https://stackoverflow.com/a/1258409/731300)

# textmate - 突出显示 TextMate 2 中的当前行

> ID：10704309
> 
> 赞同：12
> 
> 时间：2012-05-22T14:40:11.193
> 
> 标签：textmate, textmate2

在 TM 1.x 中，有一个首选项设置可以突出显示当前行。这个选项似乎在 TM2 中消失了。我假设 tm_properties 中有一些可以设置的设置，但我无法弄清楚。我尝试将 lineHighlight 设置为一种颜色，但这不起作用。有没有人弄清楚这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T13:34:25.307

在 TM2 中还不可能，但[在 github 上](https://github.com/textmate/textmate/issues/197)有一张关于这个问题的公开票。首席开发人员被分配给它，但它似乎没有那么高的优先级。

最终你应该能够这样做：

```
 settings = {
            lineHighlight = '#FF483E';
        }; 
```

这是来自 Monokai 主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-30T13:21:05.827

可以在窗口左侧的行号和折叠栏中设置当前行的颜色。`{`在主题开头的第一个之后添加以下内容：

```
gutterSettings = {
        foreground = '#BBBBBB';
        background = '#333333';
        divider = '#BBBBBB';
        selectionBackground = '#FF8800';
        selectionForeground = '#000000';
    }; 
```

# ruby-on-rails - Mongoid store_in 产生随机结果

> ID：10704310
> 
> 赞同：5
> 
> 时间：2012-05-22T14:40:19.883
> 
> 标签：ruby-on-rails, mongodb, inheritance, mongoid, multiple-inheritance

我正在使用带有 mongoid 2.4.6 的 Rails 3.2.2。为了使我的集合保持较小，我使用“store_in”语句将子对象存储到单独集合中的基类中。我的代码如下所示：

```
class BaseClass
  include Mongoid::Document
end

class ChildClass1 < BaseClass
  store_in :child_1
end  

class ChildClass2 < BaseClass
  store_in :child_2
end 
```

似乎对象随机存储在 or 或其他子集合中。Child1 类型的对象有时会存储在集合 Child2 中。这是我在日志中看到的令人惊讶的事情：

```
Started POST "/child_class_1" for 127.0.0.1 at 2012-05-22 10:22:51 -0400
Processing by ChildClass1Controller#create as HTML

MONGODB (0ms) myproject_development['child_2'].insert.... 
```

那是从哪里来的？这是 mongoid、rails 或 mongodb 中的错误吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T14:27:51.433

我花了一段时间，但我想出了答案。我决定发布它，希望它可以帮助其他人。

Mongoid 实现了一种叫做“单表继承”的东西。一旦您从父类派生子类，子类就会存储在父集合中，并添加一个“类型”属性。使用“store_in”明确地告诉 mongodb 将文档存储在哪个集合中。在子类中定义 store_in 使 mongoid 将所有内容（包括父级）存储在给定的集合中。我猜想为每个孩子使用专门的 store_in 分配会弄乱 mongoid。但是，结果是文档随机存储在任何给定的集合中。

这可以在 Ruby 中使用模块作为通用功能的 mixin 来解决。[本文档对此](https://stackoverflow.com/questions/10317376/rails-3-using-mongodb-via-mongoid-adapter-is-there-any-way-to-share-attribute)进行了很好的描述。

**但我决定不这样做！我想要这个的原因是为了保持我的收藏量很小，希望获得更好的性能。在与一些（10gen）专家交谈后，我认为更好的方法是对所有子元素使用单父对象集合。对 mongodb 的性能应该没有影响，但解决方案变得更加灵活。事实上，这更好地利用了 mongodb 中的无模式设计。**

所以代码将再次看起来像这样：

```
class BaseClass
  include Mongoid::Document

  ... shared functionality

end

class ChildClass1 < BaseClass
  ...individual functionality...
end  

class ChildClass2 < BaseClass
  ...individual functionality...
end 
```

# java - 这些错误消息的原因是什么？

> ID：10704312
> 
> 赞同：2
> 
> 时间：2012-05-22T14:40:31.317
> 
> 标签：java, eclipse, jsp, jakarta-ee, rad

我在 RAD 8 中无缘无故地收到错误消息：

![在此处输入图像描述](../Images/ae2fb123b35037c3a8845d2846b810cd.png)

![在此处输入图像描述](../Images/db4c1cce6a3a272f67ff8c0996df3642.png)

并且错误消息抱怨在一个完全不同的项目中完全不同的方法在一个完全不同的包中。我的错误报告是否错误？我该如何解决这个问题？由于 JSP 验证在 RAD 8 中似乎被破坏了，我已经关闭了对片段的验证，但我希望能够找到合法的错误。我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T15:14:51.497

我知道这已经晚了，但是...

当错误指示符甚至与源代码不一致时，RAD/Eclipse 似乎在内部查看文件的过时版本。我通常可以通过关闭并重新打开文件、重新验证文件或运行 Clean 构建来清除此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:43:46.383

它似乎是 WAS 8 中的新功能。验证已损坏，必须关闭才能使其正常工作。从 6.1->8.0 升级时发现。

碎片？小脚本？您不应该在 JSP 中使用这些。那是1998年的古董。我会推荐 JSTL。

# php - Doctrine 2 DQL - 在 QueryBuilder 中嵌套表达式和函数

> ID：10704316
> 
> 赞同：0
> 
> 时间：2012-05-22T14:40:50.770
> 
> 标签：php, mysql, doctrine-orm, dql, query-builder

我发现[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)模块实现了一些有用的 MySQL 功能。但我认为我的问题是普遍问题。您如何将另一个 mysql 表达式作为参数传递给函数？

如果我有 2 列`updated_at`，分别是 a `DATETIME`，`lifespan`而`INT`我想查询实体的生命周期是否已过期，我可以这样做；

```
WHERE 0 > TIMESTAMPDIFF(SECONDS, NOW(), e.updated_at + INTERVAL e.lifespan SECOND) 
```

在 QueryBuilder 中是这样的。

```
$qb->andWhere('0 > TIMESTAMPDIFF(SECONDS, CURRENT_TIMESTAMP(), e.updated_at + INTERVAL e.lifespan SECOND)'); 
```

但是解析器不喜欢`+ INTERVAL e.lifespan SECOND`，因为它需要右括号而不是加号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:23:13.263

我意识到我可以使用[DoctrineExtensions](https://github.com/beberlei/DoctrineExtensions)模块中的 DateAdd 类。

`TIMESTAMPDIFF(SECOND, CURRENT_TIMESTAMP(), DATEADD(e.updated_at, INTERVAL e.lifespan SECOND))`

# c# - 等待网络 C# 控制台应用程序完全启动

> ID：10704320
> 
> 赞同：2
> 
> 时间：2012-05-22T14:41:06.047
> 
> 标签：c#, .net, performance, network-programming, udp

我遇到了 C# 启动时间慢导致 UDP 数据包最初丢弃的问题。下面是我为减轻这种启动延迟所做的工作。我基本上在前两个数据包传输之间额外等待了 10 毫秒。这至少在我的机器上修复了初始下降。我担心的是较慢的机器可能需要比这更长的延迟。

```
private void FlushPacketsToNetwork()
{
    MemoryStream packetStream = new MemoryStream();

    while (packetQ.Count != 0)
    {
        byte[] packetBytes = packetQ.Dequeue().ToArray();
        packetStream.Write(packetBytes, 0, packetBytes.Length);
    }

    byte[] txArray = packetStream.ToArray();
    udpSocket.Send(txArray);

    txCount++;

    ExecuteStartupDelay();
}

// socket takes too long to transmit unless I give it some time to "warm up"
private void ExecuteStartupDelay()
{
    if (txCount < 3)
    {
        timer.SpinWait(10e-3);
    }
} 
```

所以，我想知道有没有更好的方法让 C# 完全加载它的所有依赖项？我真的不介意完全加载是否需要几秒钟。我只是不想在 C# 准备好全速之前进行任何高带宽传输。

## 其他相关细节

这是一个控制台应用程序，网络传输是从一个单独的线程运行的，主线程只是等待按键来终止网络传输。

在该`Program.Main`方法中，我尝试通过使用合理的最高优先级从我的应用程序中获得最高性能：

```
public static void Main(string[] args)
{
    Process.GetCurrentProcess().PriorityClass = ProcessPriorityClass.High;
    ...
    Thread workerThread = new Thread(new ThreadStart(worker.Run));
    workerThread.Priority = ThreadPriority.Highest;
    workerThread.Start();
    ...
    Console.WriteLine("Press any key to stop the stream...");
    WaitForKeyPress();

    worker.RequestStop = true;
    workerThread.Join(); 
```

此外，我当前使用的套接字设置如下所示：

```
udpSocket = new Socket(targetEndPoint.Address.AddressFamily,
                       SocketType.Dgram,
                       ProtocolType.Udp);
udpSocket.Ttl = ttl;
udpSocket.SendBufferSize = 1024 * 1024;
udpSocket.Blocking = true;

udpSocket.Connect(targetEndPoint); 
```

默认值`SendBufferSize`是 8192，所以我继续将它移到了兆字节，但这个设置似乎对一开始丢弃的数据包没有任何影响。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T18:07:07.800

从评论中我了解到 TCP 不是你的选择（因为传输中的固有延迟），你也不想因为另一端没有完全加载而丢失数据包。

因此，您实际上需要以更健壮和轻量级的方式实现 TCP（重传）中存在的一些功能。我还假设您可以控制接收方。

我建议您发送一些预定数量的数据包。然后等待确认。例如，每个数据包都可以有一个不断增长的 id。每 N 个数据包，接收应用程序将最后收到的数据包的数量发送给发送者。收到此号码后，发送方将知道是否需要重复最后 N 个数据包。

这种方法不会对您的带宽造成太大影响，并且您将获得有关接收数据的某种信息（尽管不能保证）。

否则最好切换到 TCP。顺便说一句，您尝试过使用 TCP 吗？您的带宽因此受到了多大的伤害？

# android - getExternalFilesDir() 中的图像

> ID：10704321
> 
> 赞同：2
> 
> 时间：2012-05-22T14:41:09.607
> 
> 标签：android, android-gallery, cooliris

我存储了一些图像`getExternalFilesDir()`，我正在尝试在 android 库（cooliris）中显示这些图像。现在我一直在这样做：

```
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(imgPath,"image/*");
startActivity(intent); 
```

但什么也没有发生。我已将 setDataAndType 更改为：

```
intent.setDataAndType(Uri.fromFile(new File(imgPath)),"image/*"); 
```

这样就可以了，但是画廊从黑屏到显示我的图像需要 5-10 秒。

无论如何要解决这个问题或任何更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:04:56.910

通过实现文件内容提供程序，您将能够避免这 5-10 秒的延迟

```
import java.io.File;
import java.io.FileNotFoundException;

import android.content.ContentProvider;
import android.content.ContentValues;
import android.database.Cursor;
import android.net.Uri;
import android.os.ParcelFileDescriptor;

public class FileContentProvider extends ContentProvider {
    private static final String AUTHORITY = "content://com.yourprojectinfo.fileprovider";

    public static Uri constructUri(String url) {
        Uri uri = Uri.parse(url);
        return uri.isAbsolute() ? uri : Uri.parse(AUTHORITY + url);
    }

    public static Uri constructUri(File file) {
        Uri uri = Uri.parse(file.getAbsolutePath());
        return uri.isAbsolute() ? uri : Uri.parse(AUTHORITY
                + file.getAbsolutePath());
    }

    @Override
    public ParcelFileDescriptor openFile(Uri uri, String mode)
            throws FileNotFoundException {
        File file = new File(uri.getPath());
        ParcelFileDescriptor parcel = ParcelFileDescriptor.open(file,
                ParcelFileDescriptor.MODE_READ_ONLY);
        return parcel;
    }

    @Override
    public boolean onCreate() {
        return true;
    }

    @Override
    public int delete(Uri uri, String s, String[] as) {
        throw new UnsupportedOperationException(
                "Not supported by this provider");
    }

    @Override
    public String getType(Uri uri) {
        return "image/jpeg";
    }

    @Override
    public Uri insert(Uri uri, ContentValues contentvalues) {
        throw new UnsupportedOperationException(
                "Not supported by this provider");
    }

    @Override
    public Cursor query(Uri uri, String[] as, String s, String[] as1, String s1) {
        throw new UnsupportedOperationException(
                "Not supported by this provider");
    }

    @Override
    public int update(Uri uri, ContentValues contentvalues, String s,
            String[] as) {
        throw new UnsupportedOperationException(
                "Not supported by this provider");
    }

} 
```

然后你可以打电话

```
Uri uri = FileContentProvider.constructUri(file);
Intent intent = new Intent();
intent.setAction(android.content.Intent.ACTION_VIEW);
intent.setDataAndType(uri,"image/*");
startActivity(intent); 
```

这是一个奇怪的解决方法，但我认为它与 android 如何使用 URI 打开图像有关。他们的 openFile(Uri uri, String mode) 方法是错误的/损坏的/无法正确解析 URI。虽然我不是 100% 确定，但我发现这种解决方法是有效的。

不要忘记在清单中注册提供者

# air - Crunch Less 编辑器不会打开文件？

> ID：10704322
> 
> 赞同：1
> 
> 时间：2012-05-22T14:41:09.553
> 
> 标签：air, editor, adobe

由于某种原因，Less 编辑器 CRUNCH 不再打开任何文件。我不知道为什么会这样。我重新启动了，我卸载/重新安装了 AIR 和 CRUNCH。当我重新启动 Crunch 以启动时，我得到的 GUI 没有任何功能，也没有从菜单中打开任何文件？

任何想法如何解决这一问题？

更新这里是修复：在 Facebook 页面（所有地方）上找到答案“Zac Evans：好的，所以我设法通过删除 C:\Users###\AppData\Roaming 下的 crunch.app 文件夹来解决问题\Adobe\AIR\ELS" mac 修复是在您的主库中搜索 ELS 文件夹并删除其中的 crunch 数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T14:38:43.453

更新：在 Facebook 页面（所有地方）上找到了答案“Zac Evans：好的，所以我设法通过删除 C:\Users###\AppData\Roaming\Adobe\ 下的 crunch.app 文件夹来解决问题航空\ELS"

在重新启动并重新安装 Crunch 和 Air 之后 - MAC 修复是在您的主库中搜索 ELS 文件夹并删除其中的 crunch 数据。

# ant - 如何将ant中一组目录中的所有类添加到类路径中？

> ID：10704324
> 
> 赞同：8
> 
> 时间：2012-05-22T14:41:10.180
> 
> 标签：ant

如何将目录集中的所有类添加到类路径？

我有以下财产：

> class.dirs=lib1dir,lib2dir,lib3dir

这些目录下有类。
是否可以将这些目录下的所有类添加到类路径？

就像是：

```
<classpath>
   <dirset dir="${root.dir}" includes="${class.dirs}/**/*.class"/>
</classpath> 
```

或者

```
<classpath>
   <pathelement location="${class.dirs}" />
</classpath> 
```

但是这个例子当然行不通。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T15:06:35.257

您可以设置路径以包含特定目录中的所有 .class 文件：

```
<path id="mypath"> 
  <fileset dir="${root.dir}">
    <include name="lib1dir/**/*.class lib2dir/**/*.class lib3dir/**/*.class"/>
  </fileset>
</path> 
```

但是，如果您想将此路径用作类路径，您只需要引用根文件夹，否则您将获得`ClassNotFoundError`s 作为包名称转换为目录：

```
<path id="build.classpath"> 
  <dirset dir="${root.dir}">
    <include name="lib1dir lib2dir lib3dir"/>
  </dirset>
</path> 
```

然后在使用时通过其 id 引用路径（例如，对于类路径）：

```
<javac srcdir="${src.dir}" destdir="${build.dir}" classpathref="build.classpath" /> 
```

# php - jQuery 表示法

> ID：10704327
> 
> 赞同：-1
> 
> 时间：2012-05-22T14:41:23.363
> 
> 标签：php, jquery, ajax

我正忙着调试别人的代码，我遇到了一些我认为很奇怪的事情。

我有两个 PHP 页面，每个页面都导入一个包含一堆通用函数的脚本。其中一个函数称为`getFormTableOptions`.

两页中的每一页都绘制了略微不同的形式。有些字段完全相同。在两个页面上都有一个带有`onchange`事件的选择框：

```
$('#form_table_name').php('getFormTableOptions', this.value, 'false', this.form.data_source.value) 
```

`onchange`我的问题是：事件会在一页中触发的可能原因是什么，而另一页告诉我：

```
PHP function "makeFormReportGroup" does not exist in the specified file! 
```

如果这是一个基本问题，请耐心等待，我对 jQuery 很陌生，我真的很难找到对这种语法的引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:44:05.620

`jQuery.php`插件文件包含在一个页面上，但不包含在另一个页面上。

# mongodb - JSON 客户端应用程序、杰克逊映射器或 morphia 驱动程序的 mongodb 持久性模式？

> ID：10704328
> 
> 赞同：1
> 
> 时间：2012-05-22T14:41:24.437
> 
> 标签：mongodb, jackson, morphia

我开始了一项新工作，他们**在 java 环境中使用 mongodb**。

他们已经使用带有 morphia 驱动程序的 DTO 和工厂实现了一种模式，这可能是由于之前从键值存储迁移到 mongodb。客户端是**JSON 客户端**。

在我看来，[jackson-mongo-mapper](http://vznet.github.com/mongo-jackson-mapper/)将是一种更好的方法，因为它只是将 pojos 从 json 映射到 BSON 并返回，似乎它可以**取消所有 DTO 工厂外观？**

有人知道这些不同方法的优缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T15:27:40.997

Spring Data for Mongodb 非常好，因为您甚至可以使用另一个数据存储或混合它们，并且存储库接口非常有用。

Kundera 是通过 JPA2 [http://agilemobiledeveloper.wordpress.com/2013/08/22/working-with-mongodb-using-kundera/的一个选项](http://agilemobiledeveloper.wordpress.com/2013/08/22/working-with-mongodb-using-kundera/)

有很多 java 到 mongodb 选项。

[http://www.agilemobiledeveloper.com/2013/01/31/hibernate-ogm-mongodb-vs-kundera-vs-jongo-vs-mongodb-api-vs-morphia-vs-spring-data-mongo-mongodb- java驱动程序/](http://www.agilemobiledeveloper.com/2013/01/31/hibernate-ogm-mongodb-vs-kundera-vs-jongo-vs-mongodb-api-vs-morphia-vs-spring-data-mongo-mongodb-drivers-for-java/)

添加您自己的数据层并确保您使用 DI 并对其进行全面测试非常有帮助。

NOSQLUnit 很棒 -> [https://github.com/lordofthejars/nosql-unit](https://github.com/lordofthejars/nosql-unit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T21:53:56.820

DTO 有利于保持实现和设计之间的分离，因此当他们需要或想要从 mongo 切换到其他 NoSQL 或 SQL 数据库时，可以干净利落地完成。

# svn - 如何通过所有修订（历史）重命名 SVN 分支？

> ID：10704329
> 
> 赞同：1
> 
> 时间：2012-05-22T14:41:25.437
> 
> 标签：svn, git-svn

如何通过所有修订重命名 SVN 中的分支，以便在检查日志时看起来总是具有新名称？
我知道这可能没有 SVN 客户端命令，但是我可以在服务器上做些什么吗？

这样做的原因是我想转移到**git**并且**git-svn clone**不喜欢像“ *Fix 1, 2 and 3* ”这样的分支名称（我猜是因为逗号）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:45:01.970

svn move last_branch new_branch

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:09:27.610

为此，您可以使用“svnadmin dump”+ 编辑转储（使用自己的脚本或查看 svndumptool.py）+“svnadmin load”组合。但不推荐使用这种方法，因为您可能会损坏 svn:mergeinfo 并可能损坏您的存储库。

所以也会投票支持“svn move”方法。

# java - android / java - 如何在没有引用实例时得到通知

> ID：10704331
> 
> 赞同：1
> 
> 时间：2012-05-22T14:41:32.507
> 
> 标签：java, android, memory-leaks, interrupted-exception

这个问题适用于 android 或 java 。假设我有一个类的实例（甚至是一个线程）。

我希望为了避免忘记处置/关闭实例（并避免任何可能的内存泄漏），如果没有更多对该实例的引用，它将自动调用特定方法，自行处置/关闭（如果是线程，它可能会自行中断）。

有可能强制执行这样的事情吗？如果需要，我不介意这种事情只会在 GC 期间发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T14:44:11.017

> 如果没有更多对该实例的引用，它将自动调用特定方法，自行处理/关闭（如果是线程，它可能会自行中断）

[finalize()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#finalize%28%29)执行您在此处描述的操作。你很少看到它被使用，并且在使用它时有一些陷阱。由于您无法控制垃圾收集，因此您无法确定何时会运行 finalize，如果有的话！从api：

> 然而，finalize 的通常目的是在对象被不可撤销地丢弃之前执行清理操作。例如，代表输入/输出连接的对象的 finalize 方法可能会执行显式 I/O 事务以在对象被永久丢弃之前中断连接。

你不能**强制**垃圾收集。您只能使用[System.gc()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/System.html#gc%28%29)建议 JVM 这样做，但不能保证它会完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T05:34:00.333

我知道这已经很晚了，但我希望有一天它会对某人有所帮助。

您可以使用我正在开发的名为[gcRadar](https://github.com/R-daneel-olivaw/gcRadar)的库来接收此类事件。它在对象被孤立时和对象的实际垃圾回收之后提供事件。

欢迎对图书馆提出任何改进建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:59:50.947

无法访问 VM 持有的引用。正如 Zavior 所建议的那样，确定一个对象或对象“岛”不可访问的唯一方法是使用该`finalize`方法。

请注意，您只会在 GC 运行期间收到通知。因此，它并不能真正帮助关闭/处置仍被引用但应该关闭的资源。如果您也想这样做并且不想使用诸如 之类的结构`try/catch/finally`，您应该为资源编写一个管理器类。

对于任何可能的情况，包括经理课程，您都不会获得一种“防弹”方式来整合您的资源。小心是最好的解决方案恕我直言。

编辑：

我发现[这个线程](https://stackoverflow.com/questions/5334137/is-it-possible-to-get-the-object-reference-count)可能有用。

# haskell - 如何在 Yesod 中提取“extractEntityFromPostedJson”？

> ID：10704334
> 
> 赞同：3
> 
> 时间：2012-05-22T14:41:37.433
> 
> 标签：haskell, yesod

经过一番反复试验，我设法在 Yesod 中创建了以下函数，以从 JSON POST 中获取对象，创建`EventFolder`实体并将其保存到数据库中。

```
postAddEventFolderR :: Handler RepJson
postAddEventFolderR = do
    r <- waiRequest 
    v <- liftIO . runResourceT $ requestBody r $$ sinkParser json
    let v1 :: EventFolder
        v1 = case fromJSON v of
                 Success a -> a
                 Error s   -> error s
    runDB $ insert $ v1
    return $ RepJson $ toContent $ show v1 
```

测试功能看起来像`curl -H "Content-Type: application/json" -X POST -d '{"name":"test_folder"}' http://localhost:5000/AddEventFolder`.

问题是，首先，有没有更简洁的方法来编写这个函数——它似乎相当冗长。其次，我如何从 JSON 中提取一般创建对象的函数？所以我想最终得到类似的东西

```
postAddEventFolderR = do
    v1 = extractEntityFromJsonPost (whatever params) :: EventFolder
    runDB $ insert $ v1
    return $ RepJson $ toContent $ show v1 
```

注意我对 Haskell 完全陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T15:55:44.623

我认为您正在寻找的功能是[parseJsonBody_](http://hackage.haskell.org/packages/archive/yesod-json/1.0.0.1/doc/html/Yesod-Json.html#v%3aparseJsonBody_)。此外，我认为您不想使用`toContent`and ，而是使用[jsonToRepJson](http://hackage.haskell.org/packages/archive/yesod-json/1.0.0.1/doc/html/Yesod-Json.html#v%3ajsonToRepJson)。所以总的来说，你可以将你的代码表达为：`show`

```
postAddEventFolderR = do
    v <- parseJsonBody_
    runDB $ insert (v :: EventFolder)
    jsonToRepJson v 
```

虽然我不完全确定你为什么用客户刚刚提交的数据做出回应。

# php - 使用php、ajax和jqplot制作饼图

> ID：10704335
> 
> 赞同：1
> 
> 时间：2012-05-22T14:41:40.783
> 
> 标签：php, javascript, ajax, jqplot

我正在尝试使用从 MySQL 获取信息的 php 文件制作饼图，JSON 对其进行编码，然后将其发送到我的 JS 文件以制作饼图。我查看了此处发布的大多数其他问题，但没有一个对我有帮助。我试图重新编写我的代码以匹配似乎适合的代码，但没有任何效果。
我的 php 文件是：

```
$shelvDate = $_POST['shelvDate'];
$x = 0;

// get information from database for shelving chart
$shelv = $conn -> query ("SELECT sum(quantity) as qty, date_process, created_by, first_name from inventory LEFT JOIN users on users.user_id =inventory.created_by
    WHERE date_process = '$shelvDate' GROUP BY created_by" );
$num_rows = $shelv->num_rows;

if($num_rows > 0){
    while($row = $shelv->fetch_assoc()) {
        if($row['qty'] > 0){
            $qtyArray[$x] = $row['qty'];
            $nameArray[$x] = $row['first_name'];
        }
        $x++;

        $pairs = array('first_name' => $nameArray, 'qty' => $qtyArray);
    } // end of while statement
} //end of if statement

$conn->close();
echo json_encode(array($pairs)); 
```

当我尝试将数据输入我的时`ajax/js`，我得到一个错误。我`JS`的是：

```
$("#getRecords").live('click', function() {
    var ajaxDataRenderer = function(url, plot, options) {
        var ret = null;
        $.ajax({
            type: "POST",
            async: false,
            url: url,
            dataType:"json",
            data: ({shelvDate: $('#shelvDate').val()}),
            success: function(data) {
                for(var x=0; x<data.first_name.length; x++) {
                    var info = [data.first_name[x], data.qty[x]];
                    ret.push(info);
                }
        }); // end of ajax call

        return ret;
    }; // end of ajaxDataRenerer call

    // The url for our json data
    var jsonurl = "shelvChart.php";
    var plot2 = $.jqplot('shelvChart', jsonurl,{
    seriesDefaults: {
           // Make this a pie chart.
           renderer: jQuery.jqplot.PieRenderer,
           rendererOptions: {
               // Put data labels on the pie slices.
               // By default, labels show the percentage of the slice.
               showDataLabels: true
           }
        }, 
        title: "Books Shelved",
        dataRenderer: ajaxDataRenderer,
        dataRendererOptions: {
            unusedOptionalUrl: jsonurl
        }
    });
}); 
```

我不知道我做错了什么，甚至不知道从这里去哪里，因为我还是 AJAX 和 JS 的新手。任何帮助将不胜感激。
吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T09:07:56.510

*查看您收到的真实字符串将非常有用`JSON`，因为我不确定您`name[object,object],qty[object,object]`在调用后如何获得，`alert(ret)`或者您可能指的是其他警报？*

无论如何，从您所说的来看，您的问题是您必须确保`ajaxDataRenderer`函数返回的数组具有饼图接受的正确格式。

因此，例如，在您的`PHP`或`JavaScript`代码中，您需要确保返回的数组`ret`具有以下格式：

```
ret = [[name[0], qty[0]], [name[1], qty[1]], ...]; 
```

这样，名称数组中的所有值都将用作标签，而数量数组将用作评估百分比的值。

[此答案中显示了显示如何为图表准备数据的类似方法。](https://stackoverflow.com/a/10329792/613495)

# jquery - .animate 不工作 - 需要持续时间？

> ID：10704337
> 
> 赞同：0
> 
> 时间：2012-05-22T14:42:00.240
> 
> 标签：jquery

以下 JQuery 动画在另一个函数中不起作用：

```
$('navigation').animate({left: '+=500'}); 
```

是因为我没有给它打电话吗？

谢谢，

乔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:43:43.020

选择器不正确。您正在选择`<navigation>`元素。可能您的意思是`$("#navigation")`- 这将选择具有 ID 的元素`navigation`。

持续时间[不是必需的参数](http://api.jquery.com/animate/)：

> 持续时间以毫秒为单位；较高的值表示较慢的动画，而不是较快的动画。**默认持续时间为 400 毫秒。**

# sql-server-2005 - 没有使用事务将数据插入表中

> ID：10704341
> 
> 赞同：0
> 
> 时间：2012-05-22T14:42:27.950
> 
> 标签：sql-server-2005

我正在尝试插入一些数据。它没有使用事务插入表中。相反，它将进入 catch 块。下面是sql存储过程：GO

```
/****** Object:  StoredProcedure [dbo].[rml_re_GetAndStoreConsumerSubscriptionData_NEWUPS] Script Date: 05/21/2012 12:39:59 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

--EXEC rml_re_GetAndStoreConsumerSubscriptionData_NEWUPS
ALTER PROCEDURE [dbo].[rml_re_GetAndStoreConsumerSubscriptionData_NEWUPS]  

AS
BEGIN  
 DECLARE @currenttime datetime  
 SET @currenttime= getdate()  
 INSERT INTO rml_re_consumerdatasync_log VALUES('rml_re_GetAndStoreConsumerSubscriptionData',@currenttime,null,'started',@currenttime,'',getdate(),null);  
  BEGIN TRY  
    BEGIN TRANSACTION PULLCONSUMERDATA  
        DECLARE @dbServerName VARCHAR(50),@databaseName VARCHAR(50),@dbUserName VARCHAR(50),@query VARCHAR(MAX)    
        SELECT  @dbServerName=dbservername,@databaseName=dbname,@dbUserName=dbusername FROM rml_re_applications   
        WHERE id=(SELECT configvalue FROM rml_re_configuration WHERE configname='CRMApplicationID')

        -- Removes all old data before insertion.  
        ALTER TABLE [dbo].[rml_re_consumermarkets] DROP CONSTRAINT [FK_rml_re_consumermarkets_rml_re_consumercrops]
        ALTER TABLE [dbo].[rml_re_consumermarkets] DROP CONSTRAINT [FK_rml_re_ConsumerSubscriptionMarket_rml_re_ConsumerSubscriptionData]
        ALTER TABLE [dbo].[rml_re_consumercrops] DROP CONSTRAINT [FK_rml_re_ConsumerSubscriptionCrops_rml_re_ConsumerSubscriptionData]

        TRUNCATE TABLE rml_re_consumermarkets
        TRUNCATE TABLE rml_re_consumercrops
        TRUNCATE TABLE rml_re_ConsumerSubscriptionData

    ALTER TABLE [dbo].[rml_re_consumercrops]  WITH NOCHECK ADD  CONSTRAINT [FK_rml_re_ConsumerSubscriptionCrops_rml_re_ConsumerSubscriptionData] FOREIGN KEY([subscriptionid])
    REFERENCES [dbo].[rml_re_ConsumerSubscriptionData] ([id])
    ALTER TABLE [dbo].[rml_re_consumermarkets]  WITH NOCHECK ADD  CONSTRAINT [FK_rml_re_ConsumerSubscriptionMarket_rml_re_ConsumerSubscriptionData] FOREIGN KEY([subscriptionid])
    REFERENCES [dbo].[rml_re_ConsumerSubscriptionData] ([id])
    ALTER TABLE [dbo].[rml_re_consumermarkets]  WITH CHECK ADD  CONSTRAINT [FK_rml_re_consumermarkets_rml_re_consumercrops] FOREIGN KEY([cropid])
    REFERENCES [dbo].[rml_re_consumercrops] ([cropid])

        SET @query='';
        SET @query= 'INSERT INTO rml_re_ConsumerSubscriptionData(id,msisdn,consumername,
                    languagetype,statecode,talukcode,districtcode,regioncode,status,
                    subscriptionstartdate,subscriptionenddate,DistributorCode,
                    package,soiltype,comp_category,AdditionalInfo) 
                            SELECT  id,msisdn,
                            case when Len(consumername) <=150 then consumername else null end  as consumername,
                            case when Len(languagetype) <=10 then languagetype else null end  as languagetype ,'  
        SET @query=@query+' case when Len(statecode) <=5 then statecode else null end  as statecode ,
                            case when Len(talukcode) <=10 then talukcode else null end  as talukcode  ,
                            case when Len(districtcode) <=10 then districtcode else null end  as districtcode,
                            case when Len(regioncode) <=10 then regioncode else null end  as regioncode ,
                            case when Len(status) <=50 then status else null end  as status ,
                            subscriptionstartdate ,'  
        SET @query=@query+' subscriptionenddate,
                            case when Len(DistributorCode) <=100 then DistributorCode else null end as DistributorCode ,
                            case when Len(package) <=50 then package else null end AS package ,
                            case when Len(soiltype) <=50 then soiltype else null end   as soiltype,'  
        SET @query=@query+' case when Len(comp_category) <=50 then comp_category  else null end  as comp_category  ,
                            case when Len(AdditionalInfo) <=100 then AdditionalInfo  else null end  as AdditionalInfo '  
        SET @query=@query+' FROM '  
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New '
        SET @query=@query+' WHERE crop1code is not null AND crop2code is not null '

        EXEC (@query)  
        SET @query='';
        -- INSERT FOR rml_re_consumercrops
        --INSER FOR PRIMARY CROP
        SET @query='INSERT INTO rml_re_consumercrops(subscriptionid,commoditycode,sowingdate,sowingweek)'
        SET @query=@query+'SELECT id,case when Len(crop1code) <=15 then crop1code  else null end  as crop1code ,sowingdate1,DATEDIFF (WEEK,sowingdate1,getdate()) '
        SET @query=@query+' FROM '
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New '
        SET @query=@query+' WHERE crop1code is not null AND crop2code is not null'

        EXEC (@query)  
        SET @query=''
        --INSER FOR SECONDARY CROP
        SET @query='INSERT INTO rml_re_consumercrops(subscriptionid,commoditycode,sowingdate,sowingweek)'
        SET @query=@query+'SELECT id,case when Len(crop2code) <=15 then crop2code  else null end  as crop2code  ,sowingdate2,DATEDIFF (WEEK,sowingdate2,getdate()) '
        SET @query=@query+'FROM '
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New '
        SET @query=@query+' WHERE crop1code is not null AND crop2code is not null'

        EXEC (@query)  
        SET @query=''

        --INSERT FOR rml_re_consumermarkets
        --INSER FOR PRIMARY CROP
        SET @query='INSERT INTO rml_re_consumermarkets(cropid,subscriptionid,marketcode,ric)'
        SET @query=@query+'SELECT CS.cropid,E.id,case when Len(M.item) <=15 then M.item  else null end AS marketcode ,case when Len( R.item) <=15 then  R.item  else null end  AS ric '
        SET @query=@query+'FROM rml_re_consumercrops CS,'
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New  E ' 
        SET @query=@query+' OUTER APPLY fnSplit(E.Ric1,'+''','''+') R,'
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New  F '
        SET @query=@query+' OUTER APPLY fnSplit(F.MandiCode1,'+''','''+') M '
        SET @query=@query+' WHERE F.ID = E.ID 
                AND R.ID = M.ID
                AND CS.commoditycode = E.crop1code
                AND CS.subscriptionid=E.id 
                AND CS.subscriptionid=F.id '
        SET @query=@query+' AND E.crop1code is not null AND E.crop2code is not null'
        SET @query=@query+' AND F.crop1code is not null AND F.crop2code is not null'

        EXEC (@query)  
        SET @query=''
        --INSER FOR SECONDARY CROP
        SET @query='INSERT INTO rml_re_consumermarkets(cropid,subscriptionid,marketcode,ric) '
        SET @query=@query+'SELECT CS.cropid,E.id,case when Len(M.item) <=15 then M.item  else null end AS marketcode,case when Len( R.item) <=15 then R.item  else null end AS ric  '
        SET @query=@query+'FROM rml_re_consumercrops CS,'
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New  E '
        SET @query=@query+' OUTER APPLY fnSplit(E.Ric2,'+''','''+') R,'
        SET @query=@query+' ['+@dbServerName+'].'+@databaseName+'.'+@dbUserName+'.rml_re_getConsumerSubscriptionData_New  F ' 
        SET @query=@query+' OUTER APPLY fnSplit(F.MandiCode2,'+''','''+') M '
        SET @query=@query+' WHERE F.ID = E.ID 
              AND R.ID = M.ID
              AND CS.commoditycode = E.crop2code
              AND CS.subscriptionid=E.id 
              AND CS.subscriptionid=F.id '
        SET @query=@query+' AND E.crop1code is not null AND E.crop2code is not null'
        SET @query=@query+' AND F.crop1code is not null AND F.crop2code is not null'

    EXEC (@query)       
    COMMIT TRANSACTION PULLCONSUMERDATA  
    UPDATE  rml_re_consumerdatasync_log SET status='completed',endtime=getdate() WHERE logdate=@currenttime  
  END TRY  
  BEGIN CATCH  
  --  ROLLBACK TRANSACTION PULLCONSUMERDATA  

    UPDATE  rml_re_consumerdatasync_log SET status='failure',error_info=ERROR_MESSAGE() WHERE logdate=@currenttime  
  END CATCH  

END  

--exec rml_re_GetAndStoreConsumerSubscriptionData

GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:50:21.870

好的，首先这里有一些事情可以帮助自己。向 proc 添加一个默认值为 0 的调试参数。然后添加代码以打印动态 SQl，而不是在将调试参数值设置为 1 时运行它。这应该是您在任何时候使用动态 SQl 时的标准做法过程。很可能其中一个动态语句没有正确形成，因此您需要查看生成的 SQL 以找出问题所在。

您将失败存储在 catch 块中，您收到什么错误消息？

# r - 在 r 中平均每 16 列

> ID：10704344
> 
> 赞同：7
> 
> 时间：2012-05-22T14:42:52.083
> 
> 标签：r

> **可能重复：**
> [对列组应用函数](https://stackoverflow.com/questions/10661295/apply-a-function-over-groups-of-columns)

我有`data.frame`30 行和多列（1000+），但我需要平均每 16 列。例如，数据框将如下所示（我将其截断以使其更容易......）：

```
Col1            Col2            Col3            Col4........

4.176           4.505           4.048           4.489
6.167           6.184           6.359           6.444
5.829           5.739           5.961           5.764
.
.
. 
```

因此，我无法汇总（我没有列表），我尝试了：

```
a <- data.frame(rowMeans(my.df[,1:length(my.df)]) ) 
```

这给了我所有 1000 多列的平均值，但是有没有办法说我想每 16 列执行一次，直到最后？（它们是总列数 16 的倍数）。

次要的，不太重要的一点，但也有助于解决这个问题。col 名称的结构如下：

```
XXYY4ZZZ.txt 
```

一旦对列进行平均，我只需要一个新的列名称，`XXYY`其余的将被平均。我知道我可以使用 gsub，但是有没有一种最佳的方法可以一次性完成平均和这个操作？

我对 R 还是比较陌生，因此我不确定在哪里以及如何找到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:04:08.067

这是一个改编自@ben 的问题和@TylerRinker 的答案的示例，来自[apply a function over groups of columns](https://stackoverflow.com/questions/10661295/apply-a-function-over-groups-of-columns)。它应该能够通过列的间隔在矩阵或数据帧上应用任何函数。

```
# Create sample data for reproducible example
n <- 1000
set.seed(1234)
x <- matrix(runif(30 * n), ncol = n)

# Function to apply 'fun' to object 'x' over every 'by' columns
# Alternatively, 'by' may be a vector of groups
byapply <- function(x, by, fun, ...)
{
    # Create index list
    if (length(by) == 1)
    {
        nc <- ncol(x)
        split.index <- rep(1:ceiling(nc / by), each = by, length.out = nc)
    } else # 'by' is a vector of groups
    {
        nc <- length(by)
        split.index <- by
    }
    index.list <- split(seq(from = 1, to = nc), split.index)

    # Pass index list to fun using sapply() and return object
    sapply(index.list, function(i)
            {
                do.call(fun, list(x[, i], ...))
            })
}

# Run function
y <- byapply(x, 16, rowMeans)

# Test to make sure it returns expected result
y.test <- rowMeans(x[, 17:32])
all.equal(y[, 2], y.test)
# TRUE 
```

你可以用它做其他奇怪的事情。例如，如果您需要知道每 10 列的总和，请确保删除`NA`s（如果存在）：

```
y.sums <- byapply(x, 10, sum, na.rm = T)
y.sums[1]
# 146.7756 
sum(x[, 1:10], na.rm = T)
# 146.7756 
```

或求标准差：

```
byapply(x, 10, apply, 1, sd) 
```

**更新**

`by`也可以指定为组向量：

```
byapply(x, rep(1:10, each = 10), rowMeans) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:31:40.620

这对我来说适用于更小的数据框：

```
rowMeans(my.df[,seq(1,length(my.df),by=16)]) 
```

# jquery - Jquery幻灯片在本地工作但不在服务器上

> ID：10704349
> 
> 赞同：0
> 
> 时间：2012-05-22T14:42:58.943
> 
> 标签：jquery, ftp

在我的网站[http://filthypolitics.com](http://filthypolitics.com) 上应该有一个幻灯片放映，但当我将它上传到我的 ftp 时它不再起作用，但一切都在我的计算机上本地完美运行。谁能帮忙？我的主机是dreamhost

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:44:54.793

如果您检查您的控制台，您会注意到它无法加载 6 个不同的图像。也许您忘记上传幻灯片的图像？

# css - 使用严格文档类型时出现底部边框

> ID：10704350
> 
> 赞同：0
> 
> 时间：2012-05-22T14:43:02.333
> 
> 标签：css

以下代码适用于过渡文档类型，但使用严格文档类型时会出现一个小的底部边框。我不明白为什么。

```
<div class="image"><img width="100" height="100" src="aaa.jpg" title="aaa" alt="aaa" /></div>

        div.image {
            -moz-box-shadow: 0 0 5px #939393;
            -ms-box-shadow: 0 0 5px #939393;
            -o-box-shadow: 0 0 5px #939393;
            -webkit-box-shadow: 0 0 5px #939393;
            box-shadow: 0 0 5px #939393;
            padding: 2px;
            display: inline-block;
        } 
```

有小费吗？

Edit1：理想情况下，图像类不能有高度和宽度信息，因为它必须适合任何图像大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:00:12.003

创建具有图像大小的图像持有者并隐藏其余部分。

```
<div class="image">
    <div class="imageholder">
         <img width="100" height="100" src="aaa.jpg" title="aaa" alt="aaa" />
    </div>
</div>

.image {-moz-box-shadow: 0 0 5px #939393;
        -ms-box-shadow: 0 0 5px #939393;
        -o-box-shadow: 0 0 5px #939393;
        -webkit-box-shadow: 0 0 5px #939393;
        box-shadow: 0 0 5px #939393;
        padding: 2px;
        display: inline-block;} // anything, like border, etc.
.imageholder {width: 100px; height: 100px; overflow: hidden;} 
```

# gwt - 如何将 css 类添加到 CellTable 小部件 (GWT) 的第一列？

> ID：10704351
> 
> 赞同：2
> 
> 时间：2012-05-22T14:43:02.927
> 
> 标签：gwt, gwt-2.2-celltable

我在 GWT 中使用了 CellTable 小部件。

我想更改第一列中包含的每个文本的字体大小。该方法`addColumnStyleName`不符合我的需要，因为它将类添加到`colgroup`标签中；此标记仅处理部分 css，我无法更改 colgroup 的字体属性（它与文本无关）。

所以，我想`td`在第一列的每一列上添加一个类，但找不到一种简单的方法来做到这一点。

像 setRowStyles 这样的列会很好，但它不存在......

你对做这样的事情有什么暗示吗？

**编辑：我使用 GWT 2.3 而不是 2.4（它有方法 setCellStyleNames）**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:06:28.937

就像调用实例一样[`setCellStyleNames`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/Column.html#setCellStyleNames%28java.lang.String%29)简单`Column`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:07:37.593

我终于明白了。但我对这个解决方案并不满意。对于这样一个简单的任务来说，这有点冗长。我愿意接受任何其他建议。

我实现它的方法是创建一个新单元格和一个新列：

```
private class KeyColumn extends Column<SimpleLegendItem, String> {

    public KeyColumn() {
        super(new KeyCell());
    }

    @Override
    public String getValue(SimpleLegendItem item) {
        return item.getKey();
    }       
}

private class KeyCell extends AbstractCell<String> {

    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context, String value, SafeHtmlBuilder sb) {
        sb.appendHtmlConstant("<span class=\"" + tableResources.cellTableStyle().box() + "\">");
        sb.appendEscaped(value);
        sb.appendHtmlConstant("</span>");
    }       
} 
```

为了简化示例，我故意不使用模板。

# squashfs - 如何写入/更改现有的 squashfs 文件系统？

> ID：10704353
> 
> 赞同：4
> 
> 时间：2012-05-22T14:43:08.897
> 
> 标签：squashfs

如何写入/更改现有的 squashfs 文件系统？我曾尝试使用 aufs/unionfs，但这些需要极难编译的内核模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:07:46.513

不要使用 aufs/unionfs。例如，在 Fedora 系统上，安装 squashfs-tools 通过执行

```
#yum install squashfs-tools 
```

这将使您 /sbin/mksquashfs 和 /usr/sbin/unsquashfs 安装在您的主机上。使用这些解压缩现有的 squashfs，进行更改，然后再次将其压缩回来。像这样......

```
#ls rfs.squashfs 
#unsquashfs rfs.squashfs 
#ls rfs.squashfs squashfs 
```

现在进行更改

```
#cd squashfs
#mkdir etc/vector 
```

并将其压缩回来

```
#mksquashfs squashfs my-new-squashfs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-09T14:11:40.247

使用 (mk|un)squashfs 您可能会失去原始权限、压缩类型等。因此，使用 unsquashfs -s 来确定有用的选项。另外，您可以挂载 -o loop -t squashfs 来查看 fs PS：抱歉，无法评论

# html - CSS rgba 不适用于谷歌浏览器

> ID：10704364
> 
> 赞同：0
> 
> 时间：2012-05-22T14:43:49.613
> 
> 标签：html, css

输入元素的 RGBA 选项在 Chrome 中不起作用（在所有其他浏览器中都可以）。似乎是什么问题？此外，似乎孔输入字段无法正常工作oO？？？

[http://jsfiddle.net/8t5kc/1/](http://jsfiddle.net/8t5kc/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:04:31.543

如果您更改`<input type="search" />`为`<input type="text" />`它似乎正在工作 - [http://jsfiddle.net/8t5kc/2/](http://jsfiddle.net/8t5kc/2/)

“WebKit 对搜索输入可以更改的内容有很大的时间限制。我猜这个想法是一致性。” -[阅读更多](http://css-tricks.com/webkit-html5-search-inputs/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:48:17.530

[http://www.w3.org/TR/css3-color/](http://www.w3.org/TR/css3-color/)

笔记。如果用户代理不支持 RGBA 值，则应按照 CSS 前向兼容性解析规则（[CSS21]，第 4 章）将它们视为无法识别的值。不得将 RGBA 值视为忽略不透明度的简单 RGB 值。

# php - 如何在 PHP 中访问容器对象？

> ID：10704365
> 
> 赞同：1
> 
> 时间：2012-05-22T14:43:50.583
> 
> 标签：php, object, properties, containers

在此示例中，如何从 object`$containerObj`中的`getContainerID()`方法访问 object 中的属性`$containerObj->bar`，或者至少获取指向的指针`$containerObj`？

```
class Foo {
  public $id = 123;
}

class Bar {
  function getContainerID() {
    ... //**From here how can I can access the property in the container class Foo?**
  }
}

$containerObj = new Foo();
$containerObj->bar = new Bar();

echo $containerObj->bar->getContainerID(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:49:03.613

你不能这样做。对类的引用可以分配给多个变量，例如：

```
$bar = new Bar();
$container = new Foo();
$container->bar = $bar;
$container2 = new Foo();
$container2->bar = $bar; 
```

现在 PHP 应该返回哪个 Foo 容器？

你最好改变你的方法，让容器知道分配给它的对象（反之亦然）：

```
class Foo {
    public $id = 23;
    private $bar;
    public function setBar(Bar $bar) {
        $this->bar = $bar;
        $bar->setContainer($this);
    }
}
class Bar {
    private $container;
    public function setContainer($container) {
        $this->container = $container;
    }
    public function getContainerId() {
        return $this->container->id;
    }
}
$bar = new Bar();
$foo = new Foo();
$foo->setBar($bar);
echo $bar->getContainerId(); 
```

# java - 在 Android 中获取 ArrayList 项的旧位置

> ID：10704369
> 
> 赞同：1
> 
> 时间：2012-05-22T14:44:02.833
> 
> 标签：java, android

我有一个名为的 ArrayList `play_viewCount`：我正在对这个 ArrryList 进行排序并将其存储在一个新的 ArrayList 中。

现在我已经对 ArrayList 进行了排序：但我想要的是在对 ArrayList 中新项目的位置进行排序之前？

```
ArrayList<String> sort_play_viewCount = play_ViewCount; // here play_viewCount is ArrayList
ArrayList<Integer> position_array = new ArrayList<Integer>(); 
System.out.println("......................................... Play Count :"+sort_play_viewCount);
Collections.sort(sort_play_viewCount);
System.out.println(".........................................sort Play Count :"+sort_play_viewCount);

for(int j = 0; j<sort_play_viewCount.size(); j++){
    for(int k = 0; k<sort_play_viewCount.size(); k++){
        if(play_ViewCount.contains(sort_play_viewCount.get(j))){
            position_array.add(k);
        }
    }
}

System.out.println(" .................Position Array: "+position_array); 
```

有谁知道如何在排序之前获取新项目的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:49:47.533

尝试做一些不同的事情：

```
ArrayList<Integer> position_array = new ArrayList<Integer>(); 

position_array.addAll(play_viewCount);
Collections.sort(position_array); 
```

现在`position_array`已排序，要获取以前的位置，您可以调用`play_viewCount.indexOf(value);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:52:38.250

您可以将 the 的元素`ArrayList`放入 a `Map<String, Integer>`（由 a 实现`HashMap<String, Integer>`），其中条目的键是`String`来自的元素，`ArrayList`值`Integer`表示位置。

```
Map<String, Integer> originalPositions = new HashMap<String, Integer>();

String item = ...
String position = ...
originalPositions.put(item, position);

// do something with the ArrayList, such as sorting
Collections.sort(arrayList);

String someItem = arrayList.get(i);
int originalPosition = originalPositions.get(someItem); 
```

**顺便说一句，您的代码片段中的这一行并没有按照您的想法执行**：

```
ArrayList<String> sort_play_viewCount = play_ViewCount; 
```

它不会创建与原始内容相同的新 ArrayList。相反，它只是创建对原始 ArrayList 的新引用。两者`play_ViewCount`和都`sort_play_viewCount`引用同一个对象，换句话说，对其中一个变量的任何更改（例如排序）也会影响另一个变量。

要创建 an 的新副本（但是，它仍然很浅）`ArrayList`，请使用以下成语：

```
ArrayList<Integer> original = ...
ArrayList<Integer> copy = new ArrayList<Integer>(original); 
```

# php - PHP会话超时htaccess文件

> ID：10704370
> 
> 赞同：3
> 
> 时间：2012-05-22T14:44:03.063
> 
> 标签：php, session, timeout

嗨，我是编程新手，但目前正在处理会话超时问题。基本上，即使我更改了 session.gc_maxlifetime，我的会话也会超时。我认为另一个使用同一目录存储会话数据的脚本没有设置 maxlifetime 正在运行，因此它将使用较短的值。为了解决这个问题，我更改了 htaccess 文件，但它在 1 小时 30 分钟后仍然终止，我需要它持续更长时间。我的 htaccess 文件如下。我已经查看并尝试了该板上的许多相关帖子，但到目前为止没有任何效果。任何想法将不胜感激。

```
SetEnv PHPRC /home/rocket/public_html/php.ini

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

<IfModule mod_php5.c>
php_value session.save_path "new/username/php_sessions"
php_value session.gc_maxlifetime "86400"
php_value session.cookie_lifetime "86400"

</IfModule>

# END WordPress 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:28:25.697

PHP 不会像您认为的那样处理会话 cookie...

`php_value session.gc_maxlifetime "86400"`

这只是设置了*可能*发生垃圾收集的时间 - 因为在此时间之后会话数据**被**垃圾收集的可能性很小，这不太可能是罪魁祸首。

`php_value session.cookie_lifetime "86400"`

这设置了会话 cookie 过期的时间……**但**它不会更新，`session_start()`因此，如果您在一页上启动会话，则会设置时钟滴答作响。从一个页面移动到另一个页面不会重置“时钟”，因此`cookie_lifetime`600 的会话将在它开始**后 10 分钟而不是在 10 分钟不活动后**过期- 您可能会看到这种行为。

最好的办法是设置`php_value session.cookie_lifetime "0"`这意味着会话 cookie**仅**在用户关闭浏览器时才会过期。

如果您想处理在一段时间不活动后触发的任意到期，最好在 PHP 代码中通过在会话中设置一个变量来执行此操作，例如`$_SESSION['expires']`在每个页面的开头检查/更新/处理它。

# php - 使用 PHP 和 FTP 上传大文件

> ID：10704374
> 
> 赞同：0
> 
> 时间：2012-05-22T14:44:15.793
> 
> 标签：php, curl

我需要编写一个脚本来将大文件（~2GB+）上传到服务器。我不认为 HTTP 是正确的方法，所以我想使用 (S)FTP。有几个关于这个的教程（使用 cURL 或 ftp_connect），我知道我必须在 php.ini 中设置一些东西。

但是所有这些教程都将文件上传到`remote`服务器，我想做的是将其上传到运行脚本的服务器，而不必先通过 HTTP 将文件上传到服务器。

这可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:48:32.733

HTTP*可能*是上传大文件的正确方式。您可以使用`resumable.js`或类似的库将文件拆分为“块”，然后在服务器上重新组装文件。

如果您决定不使用 HTTP 并具有 shell 访问权限，我建议您使用`rsync`（带有`--partial`标志），这将为您完成繁重的工作。

# iphone - UIImageView z-index 的问题

> ID：10704375
> 
> 赞同：0
> 
> 时间：2012-05-22T14:44:20.820
> 
> 标签：iphone, uiimageview, z-order, tablerow

在界面设计器中，我有一个非常简单的设置。主视图（这是一个表格单元格视图）有四个子视图，都是兄弟：`UIImageView`和三个`UILabel`s。我正在使用 UIImageView 来显示表格行的背景。我将它设置为 UIImageView 位于 z-index 树的最后面，并将其 alpha 设置为 0.2 以使图像变暗 - UILabel 正在检查它。

如果我在界面设计器的设计时将图像设置到 imageview 中，那么一切都很好，但是如果我在设计时将图像设置到 imageview 中（我从服务器接收到实际图像），那么 imageview alpha 设置是忽略，图像以 alpha = 1 显示，uiimageview 显示在所有标签上。我什至尝试使用`[parent sendSubviewToBack:imageView]`，但它没有帮助。

我错过了什么？这是我显示表格行的整个代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[NSBundle mainBundle] loadNibNamed:@"OOItemInfoCell" owner:self options:nil] lastObject];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    OOXMLNode *infoNode = [searchItemList objectAtIndex:indexPath.row];
    [(UILabel *)[cell viewWithTag:2] setText:[itemNode elementNodeWithKey:@"title"].value];
    [(UILabel *)[cell viewWithTag:3] setText:[itemNode elementNodeWithKey:@"intro"].value];
    [(UILabel *)[cell viewWithTag:4] setText:[NSString stringWithFormat:kThemeAge,
                                          [itemNode elementNodeWithKey:@"theme"].value,
                                          [itemNode elementNodeWithKey:@"age"].value]];

    UIImageView *bgview = (UIImageView *)[cell viewWithTag:0];
    [bgview setImage:[itemNode imageFromKey:@"background"]];
    [cell sendSubviewToBack:bgview];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:52:49.793

好的，这对我来说很愚蠢......我将 UIImageView 的标签设置为 0，然后`viewWithTag:0`用于查找该视图。然而，父视图也有标签 0，所以不是我的背景 UIImageView，而是整个单元格被设置为图像（我不认为表格单元格视图会响应`setImage`- 但它确实响应了。

我现在将 UIImageView 上的标签更改为 5 - 一切都是 hunky-dory。

# jquery - 在 window.load 上操作 DOM 的 jQuery 代码并不总是运行

> ID：10704377
> 
> 赞同：0
> 
> 时间：2012-05-22T14:44:25.190
> 
> 标签：jquery, window-load

我需要在选择列表中居中文本。没有仅使用 CSS 的跨浏览器和设备方法，所以我使用 JavaScript 设置文本缩进。

代码从选择列表中获取文本，将其添加到跨度（使用 css 使文本大小相同），并测量跨度的宽度。有了这个值，需要一些简单的数学来计算文本缩进需要是什么。

```
$(window).load(function() {
  function textIndentFunc () {
     textString = $('#from-1 :selected').text();
     $('#hidden').text(textString);
     textWidth = $('#hidden').width();
     inputWidth = $('#from-1 select').width();
     indentMy = (inputWidth / 2) - (textWidth / 2);
     $('#from-1').css('text-indent',indentMy); 
}
$('#from-1 select').change(function() {
    textIndentFunc();
});
textIndentFunc();
}); 
```

大多数情况下，这段代码运行良好，但有时似乎没有做任何事情，在这种情况下，刷新页面通常会修复它。为什么这段代码如此喜怒无常？是否与必须操纵dom有关？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:45:49.427

不要`$(document).ready()` **_** `$(window).load()`

当调用`$(document).ready()`你的函数时，一旦 DOM 被处理并准备好被操作，`load()`当所有资产加载（图像，声音）时将回调。

# c# - MonoTouch：如何使用 UITableViewController 作为 UITableView 的数据源？

> ID：10704378
> 
> 赞同：0
> 
> 时间：2012-05-22T14:44:29.973
> 
> 标签：c#, xamarin.ios, uikit

我正在使用带有静态内容的故事板和表格视图。在内部，似乎`UITableViewController`隐含地成为`UITableView`.

如果我现在想影响静态内容，我将不得不覆盖表源的方法。在ObjectiveC中，我可以放置

```
-(NSString*)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    if (section == 0)
        return @"HELLO!";
    else {
        return [super tableView:tableView titleForHeaderInSection:section];
    }
} 
```

在我的控制器中，该方法将被覆盖。但在 MonoTouch 中，这不起作用。请注意，我不想创建委托或数据源的新实例。对于静态单元，控制器*是*源/代表。在 ObjectiveC 中，这是通过让控制器实现相应的协议来完成的。

这是我提出的与该主题相关的问题，但现在我将解决方案转换为 MonoTouch：

[如何覆盖 tableView:titleForHeaderInSection: 以调整静态 UITableViews 的节标题？](https://stackoverflow.com/questions/10691157/how-to-override-tableviewtitleforheaderinsection-to-adjust-section-headers-of/10692062#comment13896288_10692062)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:48:48.713

在 Xamarin 网站上的精彩教程中找到了解决方案：http: [//docs.xamarin.com/ios/tutorials/Events%2c_Protocols_and_Delegates](http://docs.xamarin.com/ios/tutorials/Events%2c_Protocols_and_Delegates)

" `Export`" 属性可以解决问题！

```
public partial class TestController : UITableViewController
    {
        public TestController (IntPtr handle) : base (handle)
        {

        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
        }

        [Export("tableView:titleForHeaderInSection:")]
        public string TitleForHeaderInSection(UITableView oTableView, int iSection)
        {
            return "TEST";
        }
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-22T16:18:40.797

在 Mono Touch 中，您必须创建一个 DataSource Delegate。

就像这篇博文中的演示一样：http: [//sabonrai.wordpress.com/2009/08/28/monotouch-sample-code-uitableview/](http://sabonrai.wordpress.com/2009/08/28/monotouch-sample-code-uitableview/)

```
 public override string TitleForHeader (UITableView tableView, int section)
        {
        //do your stuff 
        } 
```

如果要自定义标题部分的标题，只需覆盖 TableViewDelegate 中的 titleForHeaderInSection。

# c# - Wolfram .NET 连接器 EvaluateToImage 给出动画

> ID：10704379
> 
> 赞同：2
> 
> 时间：2012-05-22T14:44:33.547
> 
> 标签：c#, wolfram-mathematica

我`Expr`在 C# 中有一个对象，它代表`Wolfram Mathematica`的类型 - 它可以包含一个数字、一个数学表达式、一个声音、一个图像或其他。

我一直在使用我的`Wolfram Mathemtica`版本中包含的教程来通过 .NET 调用`Mathematica`，我想从我的输出中创建一个图像。例如，绘制一个函数或很好地绘制一个表达式。

我有这个代码：

```
public System.Drawing.Image ToImage(int width = 300, int height = 300)
{
    return link.EvaluateToImage(this.e, width, height);
} 
```

`link`我的在哪里`IKernelLink`，`this.e`是我的`Expr`。

之后，我使用`image.Save(@"C:\file.png")`

问题是，当我打开一个表单并执行`form.pictureBox.Image = LoadImage(@"C:\file.png")`，或者我用适当的程序打开图像时，它会给我一个三帧的动画。我会在这里上传：

![在此处输入图像描述](../Images/68b2e35fcdd4b0952a1fea3793de54ee.png)

此外，它没有给我整个输出，它是`{{x -> -(-3)^(1/3)}, {x -> 3^(1/3)}, {x -> (-1)^(2/3)*3^(1/3)}}`（生成的`EvaluateToInputForm`）
显然，这种行为是错误的，任何人都可以帮助我吗？

注意：当它是一个图形对象时，它会生成一个单独的帧文件`Expr`，即`Plot`函数的评估。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:25:43.237

我认为您应该使用 Graphics 数组将一组图像从 Mathematica 发送到 .NET，即：

[.NET/Link MathKernel.Graphics 属性](http://reference.wolfram.com/legacy/v7/NETLink/ref/net/Wolfram.NETLink.MathKernel.Graphics.html)

[这里](https://stackoverflow.com/questions/7542828/netlink-graphics-producing-png-instead-of-emf)有一个使用此代码的示例。

# java - 另一个轮子上的 android 媒体播放器 mp3 流式音频

> ID：10704381
> 
> 赞同：0
> 
> 时间：2012-05-22T14:44:40.650
> 
> 标签：java, android, media-player, audio-streaming

具有以下代码来运行 mp3 播客

```
public void playPodcast( final Uri data){
            new Thread (new Runnable(){
                public void run() {
                  if(!mediaPlayer.isPlaying()){
                        try {
                            mediaPlayer.setDataSource(getApplicationContext(), data);
                        } catch (IllegalArgumentException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (SecurityException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IllegalStateException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        try {
                            mediaPlayer.prepare();
                        } catch (IllegalStateException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } 
                        mediaFileLengthInMilliseconds = mediaPlayer.getDuration();
                        duracaoPodcast = mediaPlayer.getDuration();

                        mediaPlayer.start();

                        if(!(controlTimer >= 1)){
                            timer();
                            controlTimer++;
                        }

                        primarySeekBarProgressUpdater();

                }
              } 
            }).start();
        } 
```

并关闭用户意图有：

```
 voltar.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    finish();
                    mediaPlayer.stop();
                }
            }); 
```

当用户关闭所有带有android的返回按钮手机的意图时会出现问题，因为它没有：

```
finish();
mediaPlayer.stop(); 
```

只做：

```
finish(); 
```

所以音频仍在播放，即使我回到那个意图暂停：

```
stop.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                if(mediaPlayer.isPlaying()){
                    mediaPlayer.stop(); 
                    frame.setVisibility(View.INVISIBLE);

                }

            }
        }); 
```

按钮不起作用，如果我按下播放，他会在空播放的顶部开始一个新的音频，

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:00:38.150

据我了解您的问题，请`mediaPlayer.stop();`输入活动方法。`onStop()`

# c# - 站点地图菜单和角色

> ID：10704394
> 
> 赞同：1
> 
> 时间：2012-05-22T14:45:56.357
> 
> 标签：c#, asp.net, sitemap

我正在尝试基于角色创建站点地图菜单，但是当我将所有角色添加到根菜单，然后将单个角色添加到各个菜单项时，我总是会在菜单中获得所有内容。

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="" title="Menu"  description="" roles="Role1;Role2;Role3">
    <siteMapNode url="~/page1.aspx" title=""  description="" roles="Role1;Role2;Role3">
    </siteMapNode>
    <siteMapNode url="~/page2.aspx" title=""  description="" roles="Role2; Role3">
    </siteMapNode>
    <siteMapNode url="~/page3.aspx" title=""  description="" roles="Role3">
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

如上所述，角色 1、2、3 可以看到根菜单。我是 Role1 的一部分，因此我应该只被允许查看 page1.aspx，但我可以看到所有三个。

如何解决？

菜单显示如下：

第 1 页 | 第2页| 第3页

所以如果我只在 Role1 我应该看到：

第 1 页 |

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:46:29.653

您是否将 securityTrimmingEnabled 设置为 true？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:54:39.923

按照 4guysfromrolla 的站点地图菜单教程第 3 部分 -[配置站点导航以使用安全修剪](http://www.4guysfromrolla.com/articles/122805-1.aspx)

*可以使用以下模式通过 Web.config 文件配置站点导航设置：*

```
<siteMap defaultProvider="XmlSiteMapProvider" enabled="true">
  <providers>
    <add name="XmlSiteMapProvider"
      description="Default SiteMap provider."
      type="System.Web.XmlSiteMapProvider"
      siteMapFile="siteMapFileName"
      securityTrimmingEnabled="true" />
  </providers>
</siteMap> 
```

关注文章了解详细信息。。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:50:10.207

是的，它已启用。

```
<siteMap defaultProvider="WMSSiteMapProvider">
      <providers>
        <clear/>
        <add name="WMSSiteMapProvider" type="System.Web.XmlSiteMapProvider" securityTrimmingEnabled="true" siteMapFile="WMS.sitemap"/>
      </providers>
    </siteMap> 
```

# meteor - 流星应用可以离线启动吗

> ID：10704400
> 
> 赞同：4
> 
> 时间：2012-05-22T14:46:04.883
> 
> 标签：meteor

当没有服务器连接处于活动状态时，可以离线启动流星应用程序，例如从浏览器中的 html5 应用程序缓存。

或被保存到离线文件夹。

当然没有数据传播到服务器，但可能是一些本地缓存。

编辑：如何在关闭时将事件保存到本地存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T14:46:36.093

我有同样的查询。对于离线保存数据，这是值得关注的：-

[https://github.com/awwx/meteor-offline-data](https://github.com/awwx/meteor-offline-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T14:24:22.737

是的，理论上，这应该可以通过创建 HTML5 缓存清单来实现。我在这里问过这个问题：

[如何将缓存清单添加到 Meteor 应用程序？](https://stackoverflow.com/questions/10668687/how-can-i-add-a-cache-manifest-to-a-meteor-app)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-07T12:43:48.787

Meteor 有一个 appcache 包（检查文档），它目前在文档本身中使用。

# php - 将 lonlat 转换为 GPS 使用值

> ID：10704401
> 
> 赞同：0
> 
> 时间：2012-05-22T14:46:09.160
> 
> 标签：php, javascript, map, gps, openstreetmap

我有以下代码。如何将 lonlat 值转换为以度为单位的 GPS 使用值？

更新：我不确定我使用了正确的词汇，但目前`lonlat`等于“2698.98978 1232.8998”。我想转换成度数，例如'41.2987 2.1989'。

`lonlat`是一个变量。请在代码中查看。

```
<html>
 <head>
 <script src="http://openlayers.org/api/OpenLayers.js"></script>
 <script type="text/javascript"> 
    function init(){
      map = new OpenLayers.Map('map');
      base_layer = new OpenLayers.Layer.WMS( "OpenLayers WMS",
      "http://labs.metacarta.com/wms/vmap0", {layers: 'basic'} );
      map.addLayer(base_layer);
      map.zoomToMaxExtent();
      map.events.register('click', map, handleMapClick);
    } 

    function handleMapClick(evt)
    {
       var lonlat = map.getLonLatFromViewPortPx(evt.xy);
       // use lonlat
       alert(lonlat);
    } 
 </script>
 </head>
 <body onload="init()">
  Hello Map.<br />
 <div id="map"></div>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:38:17.277

你不应该使用这样 `getLonLatFromViewPortPx`的`getLonLatFromPixel`方法：

```
var lonlat = map.getLonLatFromPixel(evt.xy); 
```

这将为您提供正确的坐标而无需任何变换。

# ios - pjsip在ios des上启用扬声器不起作用

> ID：10704403
> 
> 赞同：5
> 
> 时间：2012-05-22T14:46:14.980
> 
> 标签：ios, pjsip

我使用此代码尝试在 iOS 设备上启用扬声器。

```
pjmedia_aud_dev_route route = PJMEDIA_AUD_DEV_ROUTE_LOUDSPEAKER;
pj_status_t status = pjsua_snd_set_setting(PJMEDIA_AUD_DEV_CAP_INPUT_ROUTE, &route, PJ_FALSE);
if (status != PJ_SUCCESS){
             NSLog(@"Error enabling loudspeaker");
} 
```

我知道我可以使用`kAudioSessionProperty_OverrideAudioRoute`，但我想通过 pjsip 启用它，因为这样我可以传递`PJMEDIA_AUD_DEV_ROUTE_BLUETOOTH`给路由并启用蓝牙。

我在 iOS 5.0 上使用 pjsip 1.8.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T12:18:37.717

我已将 pjsip 更新到 2.0.1 版，上面的代码运行没有问题。

# c# - 如何防止 XMLReader 转义字符

> ID：10704404
> 
> 赞同：2
> 
> 时间：2012-05-22T14:46:17.353
> 
> 标签：c#, escaping, xmlreader

我想创建一个简单的 XMLreader，它将一个完整的节点（包括子节点）作为文本读取：

```
string TXML = @"<xml><text>hall&#xF6;le</text></xml>";

XmlReader r = XmlReader.Create(new StringReader(TXML));
r.Read(); r.Read();

string o = r.ReadOuterXml(); 
```

`ReadOuterXml`做这项工作，但它没有逃脱已经逃脱的迹象：

```
"<text>hallöle</text>" 
```

我希望得到结果：

```
"<text>hall&#xF6;le</text>" 
```

我怎么能省略那个“逃避”。我想将这些片段存储到数据库中，并且确实需要转义。此外，我不想解析和重新创建片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T13:11:31.433

我有一个类似的问题，我想在从 xml 读取时保留转义字符，但是在调用 ReadOuterXml() 时，可能只保留了一些字符并且至少 oane 被转换了（我用头“而不是”）

我的解决方案如下：

```
string TXML = @"<xml><text>hall&#xF6;le</text></xml>";
TXML = TXML.Replace("&", "&amp;");
XmlTextReader r = new XmlTextReader(new StringReader(TXML));
r.Read(); r.Read();
// now we are at the text element
r.ReadStartElement()
var content = SecurityElement.Escape(r.ReadContentAsString())
r.ReadEndElement() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T14:42:46.980

我找到了两个解决方案。两者都不是很好，但也许你可以告诉我哪个缺点更少。

这两种解决方案都直接依赖于使用“XmlTextReader”而不是“XmlReader”。它带有属性“LinePosition”，它引导我找到第一个解决方案，并使用方法“ReadChars”作为第二个解决方案的基础。

## 解决方案（1），通过索引从原始字符串中获取数据

问题：

*   不适用于流输入
*   如果 xml 有几行则不起作用

代码

```
string TXML = @"<xml><data></data><rawnode at=""10 4""><text>hall&#xF6;le</text><z d=""2"">3</z></rawnode><data></data></xml>";

//XmlReader r = XmlReader.Create(new StringReader(TXML));
XmlTextReader r = new XmlTextReader(new StringReader(TXML));

// read to node which shall be retrived "raw"
while ( r.Read() )
{
    if ( r.Name.Equals("rawnode") )
        break;
}

// here we start
int Begin = r.LinePosition;
r.Skip();
int End = r.LinePosition;

// get it out
string output=TXML.Substring(Begin - 2, End - Begin); 
```

## 解决方案 (2)，使用“ReadChars”获取数据

问题：

*   我必须解析并重新创建我想阅读的标签的“外部”标记。
*   这可能会降低性能。
*   我可能会引入错误。

代码：

```
// ... again create XmlTextReader and read to rawnode, then:
// here we start
int buflen = 15;
char[] buf = new char[buflen];
StringBuilder sb= new StringBuilder("<",20);

//get start tag and attributes    
string tagname=r.Name;
sb.Append(tagname);
bool hasAttributes = r.MoveToFirstAttribute();
while (hasAttributes)
{
    sb.Append(" " + r.Name + @"=""" + r.Value + @"""");
    hasAttributes = r.MoveToNextAttribute();
}
sb.Append(@">");
r.MoveToContent();

//get raw inner data    
int cnt;
while ((cnt = r.ReadChars(buf, 0, buflen)) > 0)
{
    if ( cnt<buflen )
        buf[cnt]=(char)0;
    sb.Append(buf);
}

//append end tag    
sb.Append("</" + tagname + ">");

// get it out
string output = sb.ToString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:53:17.790

查看您的 xml 标头并验证它是否包含以下内容：`<?xml version="1.0" encoding="ISO-8859-9"?>`

对于转义和取消转义，您可以使用 c# 函数`InnerXml`和`InnerText`：

```
public static string XmlEscape(string unescaped)
{
    XmlDocument doc = new XmlDocument();
    var node = doc.CreateElement("root");
    node.InnerText = unescaped;
    return node.InnerXml;
}

public static string XmlUnescape(string escaped)
{
    XmlDocument doc = new XmlDocument();
    var node = doc.CreateElement("root");
    node.InnerXml = escaped;
    return node.InnerText;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:25:35.600

我理解您不想解析和重新创建转义字符的愿望，但我找不到不这样做的方法，除非您完全自定义它。也许这不是那么糟糕？

```
string TXML = @"<xml><text>hall&#xF6;le</text></xml>";
TXML = TXML.Replace("&", "&amp;");
XmlTextReader r = new XmlTextReader(new StringReader(TXML));
r.Read(); r.Read();

string o = r.ReadOuterXml();
o = o.Replace("&amp;", "&"); 
```

# jsf - Tomcat + RichFaces 4.1 加载文件时出现异常

> ID：10704407
> 
> 赞同：4
> 
> 时间：2012-05-22T14:46:45.853
> 
> 标签：jsf, richfaces, tomcat7

我已经部署了我的 webapp，但是由于某种原因，尝试将文件加载到服务器时出现了一些异常，我不知道为什么会这样。有时，当我尝试上传文件`rich:fileUpload`但未上传文件时，组件的进度条永远不会被填满，并且 Tomcat 的日志中会出现如下异常：

```
may 21, 2012 8:38:04 PM org.richfaces.request.MultipartRequest25 parseIfNecessary
SEVERE: Exception parsing multipart request: Request prolog cannot be read
org.richfaces.exception.FileUploadException: Exception parsing multipart request: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:156)
    at org.richfaces.request.MultipartRequest25.parseIfNecessary(MultipartRequest25.java:77)
    at org.richfaces.request.MultipartRequest25.getParameter(MultipartRequest25.java:114)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:75)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:56)
    at java.util.Collections$UnmodifiableMap.get(Collections.java:1339)
    at com.sun.faces.application.view.MultiViewHandler.calculateRenderKitId(MultiViewHandler.java:220)
    at javax.faces.application.ViewHandlerWrapper.calculateRenderKitId(ViewHandlerWrapper.java:155)
    at com.sun.faces.context.FacesContextImpl.isPostback(FacesContextImpl.java:211)
    at javax.faces.context.FacesContextWrapper.isPostback(FacesContextWrapper.java:402)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:188)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1824)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.readProlog(MultipartRequestParser.java:270)
    at org.richfaces.request.MultipartRequestParser.initialize(MultipartRequestParser.java:172)
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:148)
    ... 30 more

may 21, 2012 8:38:04 PM org.richfaces.request.MultipartRequest25 parseIfNecessary
SEVERE: Exception parsing multipart request: Request prolog cannot be read
org.richfaces.exception.FileUploadException: Exception parsing multipart request: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:156)
    at org.richfaces.request.MultipartRequest25.parseIfNecessary(MultipartRequest25.java:77)
    at org.richfaces.request.MultipartRequest25.getParameter(MultipartRequest25.java:114)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:75)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:56)
    at java.util.Collections$UnmodifiableMap.get(Collections.java:1339)
    at com.sun.faces.application.view.MultiViewHandler.calculateRenderKitId(MultiViewHandler.java:220)
    at javax.faces.application.ViewHandlerWrapper.calculateRenderKitId(ViewHandlerWrapper.java:155)
    at com.sun.faces.context.FacesContextImpl.isPostback(FacesContextImpl.java:211)
    at javax.faces.context.FacesContextWrapper.isPostback(FacesContextWrapper.java:402)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:188)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:473)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:455)
    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:399)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:191)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1824)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.readProlog(MultipartRequestParser.java:270)
    at org.richfaces.request.MultipartRequestParser.initialize(MultipartRequestParser.java:172)
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:148)
    ... 33 more

may 21, 2012 8:38:04 PM org.richfaces.request.MultipartRequest25 parseIfNecessary
SEVERE: Exception parsing multipart request: Request prolog cannot be read
org.richfaces.exception.FileUploadException: Exception parsing multipart request: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:156)
    at org.richfaces.request.MultipartRequest25.parseIfNecessary(MultipartRequest25.java:77)
    at org.richfaces.request.MultipartRequest25.getParameter(MultipartRequest25.java:114)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:75)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:56)
    at java.util.Collections$UnmodifiableMap.get(Collections.java:1339)
    at com.sun.faces.application.view.MultiViewHandler.calculateRenderKitId(MultiViewHandler.java:220)
    at javax.faces.application.ViewHandlerWrapper.calculateRenderKitId(ViewHandlerWrapper.java:155)
    at com.sun.faces.context.FacesContextImpl.isPostback(FacesContextImpl.java:211)
    at javax.faces.context.FacesContextWrapper.isPostback(FacesContextWrapper.java:402)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:188)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1824)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.readProlog(MultipartRequestParser.java:270)
    at org.richfaces.request.MultipartRequestParser.initialize(MultipartRequestParser.java:172)
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:148)
    ... 30 more

may 21, 2012 8:38:04 PM org.richfaces.request.MultipartRequest25 parseIfNecessary
SEVERE: Exception parsing multipart request: Request prolog cannot be read
org.richfaces.exception.FileUploadException: Exception parsing multipart request: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:156)
    at org.richfaces.request.MultipartRequest25.parseIfNecessary(MultipartRequest25.java:77)
    at org.richfaces.request.MultipartRequest25.getParameter(MultipartRequest25.java:114)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:75)
    at com.sun.faces.context.RequestParameterMap.get(RequestParameterMap.java:56)
    at java.util.Collections$UnmodifiableMap.get(Collections.java:1339)
    at com.sun.faces.application.view.MultiViewHandler.calculateRenderKitId(MultiViewHandler.java:220)
    at javax.faces.application.ViewHandlerWrapper.calculateRenderKitId(ViewHandlerWrapper.java:155)
    at com.sun.faces.context.FacesContextImpl.isPostback(FacesContextImpl.java:211)
    at javax.faces.context.FacesContextWrapper.isPostback(FacesContextWrapper.java:402)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:188)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:116)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:473)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
    at org.apache.catalina.core.StandardHostValve.custom(StandardHostValve.java:455)
    at org.apache.catalina.core.StandardHostValve.throwable(StandardHostValve.java:399)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:191)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:964)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1824)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.io.IOException: Request prolog cannot be read
    at org.richfaces.request.MultipartRequestParser.readProlog(MultipartRequestParser.java:270)
    at org.richfaces.request.MultipartRequestParser.initialize(MultipartRequestParser.java:172)
    at org.richfaces.request.MultipartRequestParser.parse(MultipartRequestParser.java:148)
    ... 33 more 
```

对可能发生的事情有任何想法吗？我可以从哪里开始寻找在我的应用程序上解决此问题？

干杯，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T11:00:06.263

我的项目中有相同的堆栈跟踪。我可以解释为什么会发生这种情况以及解决它的几种方法。

因此，richfaces fileUpload 组件假定尚未从其他地方读取多部分请求 InputStream。但是，如果您的应用程序中有任何执行简单的过滤器， `request.getParameter(anyParamName)`这会强制多部分请求读取完整的输入流并将所有内容放入`request.getParts()`集合中。

当richfaces fileupload 尝试从输入流中读取某些内容时，它不能这样做，因为流光标位于末尾（这是在tomcat 源中）并且只返回-1；这导致richfaces 认为它​​无法从流中读取任何内容。

要解决此问题，您可以删除所有强制多部分请求解析 inputStream 的过滤器。此外，作为热修复，您可以尝试更改一些 Richfaces 类，例如`MultipartRequest25`或`MultipartRequestParser`.

我添加了热修复以`MultipartRequestParser`检查请求是否已经有部件并尝试将这些部件解析为 FileUploadParam。检查异常的消息是相当麻烦的，但它可以作为一个热修复。

jboss jira 中存在似乎与此问题有关的未解决问题。你可以检查一下。我也在那里添加评论。[https://issues.jboss.org/browse/RF-13061](https://issues.jboss.org/browse/RF-13061)

 `````
public void parse() throws FileUploadException {
    try {
        initialize();

        while (!sequenceMatcher.isEOF()) {
            readNext();
        }
    } catch (IOException e) {
        if(e.getMessage().equals(REQUEST_PROLOG_CANNOT_BE_READ)){
            //means it can not read request prolog. maybe application server already read everything and stores data in parts
            try {
                if(request.getParts()!=null && request.getParts().size()>0){
                    Collection<Part> parts = request.getParts();
                    //parts seem to be complete files so get the headers and so on here
                    //and create fileUploadItems from parts
                    for(Part part:parts){
                        String headersString = part.getHeader("content-disposition");
                        Multimap<String, String> headers = LinkedListMultimap.create();
                        String[] split = headersString.split("\r\n");
                        for (String headerString : split) {
                            parseParams(headerString, "; ", headers);
                        }
                        FileUploadParam param = createParam(headers);
                        if (param == null) {
                            continue;
                        }
                        param.create();
                        try{
                            int size = (int)part.getSize();
                            byte[] buf = new byte[size];
                            part.getInputStream().read(buf, 0, size);
                            param.handle(buf, size);
                        }finally{
                            param.complete();
                        }

                        if (param.isFileParam()) {
                            uploadedFiles.add(new UploadedFile25(param.getName(), param.getResource(), headers));
                        } else {
                            parametersMap.put(param.getName(), param.getValue());
                        }
                    }
                    //return from the method if everything was successfull
                    return;
                }
            } catch (Exception e1) {
                this.cancel();
                throw new IllegalStateException("Could get Parts from the request", e1);
            }
        }
        this.cancel();
        throw new FileUploadException(MessageFormat.format("Exception parsing multipart request: {0}", e.getMessage()), e);
    }
} 
`````

# php - 警告：mysql_fetch_array() 期望参数 1 是资源，给定的布尔值

> ID：10704408
> 
> 赞同：-3
> 
> 时间：2012-05-22T14:46:47.373
> 
> 标签：php

> **可能重复：**
> [PHP：警告：sort() 期望参数 1 是数组，资源给定](https://stackoverflow.com/questions/6169146/php-warning-sort-expects-parameter-1-to-be-array-resource-given)

我有以下 PHP 代码，但收到此错误。我尝试了不同的解决方案，但似乎不起作用。任何帮助将不胜感激。

```
<?php
INCLUDE 'functions.php' ;

$host = 'localhost';    
$id = '***';    
$pwd = '***';    
$db = '****'; 

$myconnection = connect_db($host, $id, $pwd, $db);

$SortOn = $_POST["SortOn"];    
$SortIn = $_POST["SortIn"];

$sql = "SELECT ID, DateTime, FirstName, LastName, AdditionalInformation, Category1,    Category2, Category3, Category4, Category5, Pending, Approved, Disapproved, WebsiteName, WebsiteURL FROM 'websites' ORDER BY $SortOn $SortIn";
echo "<table border=\"1\"><tr><th>ID</th><th>Date & Time</th><th>First Name</th><th>Last Name</th><th>Additional Information</th><th>Category 1</th><th>Category 2</th><th>Category 3</th><th>Category 4</th><th>Category 5</th><th>Pending</th><th>Approved</th><th>Disapproved</th><th>Website Name</th><th>Website URL</th></tr>";

$result = mysql_query($sql);            

while ( $row = mysql_fetch_array($result))            
{                
    echo "<tr>";        
    for ( $column = 0;$column < count($row);$column++)        
    {            
        echo "<td>" . $row[$column] . "</td>";        
    }        
    echo "</tr>";    

}            
echo "</table>";

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:52:37.750

这个变量`$result`给了你一个布尔值（可能它会返回一个 False 或类似的东西，告诉你查询没有完成“好”的执行）而不是他预期的[资源。](http://www.php.net/manual/en/language.types.resource.php)

所以你必须使用类似的东西`mysql_error()`来检索原因并更正上面的代码。

**编辑** 看看你的代码，你错过了`,`你的`order by`领域

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:55:11.043

发生错误时，[mysql_query返回布尔值 false。](http://php.net/manual/en/function.mysql-query.php)所以看起来你必须修复你的查询。您可以使用[mysql_error](http://php.net/manual/en/function.mysql-error.php)找出错误是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:55:53.587

确保您也有一个有效的数据库连接。试试 connect_db($host, $id, $pwd, $db) 或 die(mysql_error())。另外，按照其他人的建议，在 sql 语句中使用 die。

# javascript - 这可以简化为按顺序加载多个脚本吗

> ID：10704411
> 
> 赞同：2
> 
> 时间：2012-05-22T14:46:54.183
> 
> 标签：javascript, jquery

以下工作，但我需要将其分发给可能不愿意将所有这些脚本粘贴到他们的主页的客户。只是想知道它是否可以简化？我需要加载 Jquery 1.71，然后是 UI，然后是我自己的脚本，然后在我自己的脚本中调用该函数。甚至将其相当长的时间最小化。

希望一些javascript大师可以提供帮助。谢谢！

```
var head = document.getElementsByTagName('head')[0];
var script = document.createElement('script');
script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js';
script.type = 'text/javascript';
head.appendChild(script);
if (script.onreadystatechange) script.onreadystatechange = function () {
    if (script.readyState == "complete" || script.readyState == "loaded") {
        script.onreadystatechange = false;
        //alert("complete");
        load_script();
    }
} else {
    script.onload = function () {
        //alert("complete");
        load_script();
    }
}
//setup array of scripts and an index to keep track of where we are in the process
var scripts = ['script/jquery-ui-1.8.7.custom.min.js', 'script/wfo171.js'],
    index = 0;
//setup a function that loads a single script
function load_script() {
    //make sure the current index is still a part of the array
    if (index < scripts.length) {
        //get the script at the current index
        $.getScript('http://mydomainn.com/script/' + scripts[index], function () {
            //once the script is loaded, increase the index and attempt to load the next script
            //alert('Loaded: ' + scripts[index] + "," + index);
            if (index != 0) {
                LoadEdge();
            }
            index++;
            load_script();
        });
    }
}

function LoadEdge() {
    Edge('f08430fa2a');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:51:57.080

一旦你有了 jQuery，你就可以使用它的强大功能：

```
$.when.apply($, $.map(scripts, $.getScript)).then(LoadEdge); 
```

这依赖于它的延迟功能 - 每个 URL 都被替换为`getScript`延迟（这将获取脚本），然后将这些延迟传递给，`$.when`以便您可以添加一个回调`.then`，以便在所有脚本完成加载时调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:52:15.787

为什么不使用 onload 事件来确保在尝试执行之前加载所有内容？

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="http://mydomainn.com/script/jquery-ui-1.8.7.custom.min.js"></script>
<script src="http://mydomainn.com/script/wfo171.js"></script>
<script>
    $(function() { // this executes when the page is ready
        Edge('f08430fa2a');
    });
</script> 
```

（检查脚本上的路径，您似乎是从 加载的`/script/script`，不确定这是否正确，所以我将其删除。

# macos - zsh - 似乎不区分大小写？

> ID：10704413
> 
> 赞同：0
> 
> 时间：2012-05-22T14:47:08.677
> 
> 标签：macos, zsh

我试图将一些具有相同名称但大小写不同的文件复制到同一目录。

请参阅以下步骤：

```
~/tmp $ echo "First" > test
~/tmp $ echo "Second" > Test
~/tmp $ ls
test
~/tmp $ cat test
Second 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T14:49:54.717

它不是来自 Unix 层：它来自文件系统。可能是 OSX 在 HFS+ 上运行。其他 Unix 没有。所以这就是区别。默认情况下，HFS+ 不区分大小写，但会保留大小写。您可以将 HFS+ 重新设置为 HFSX（区分大小写的 HFS+）。

# php - PHP：允许的内存大小有问题

> ID：10704414
> 
> 赞同：1
> 
> 时间：2012-05-22T14:47:18.737
> 
> 标签：php, apache-flex, memory, mysqli

我正在使用 Flex 应用程序通过 PHP 对我的数据库进行两次调用。在我的第二次调用中，我收到一个错误，该错误显示在我的代理调试器中，`Fatal error: Allowed memory size of 268435456 bytes exhausted (tried to allocate 40961 bytes)`这让我非常困惑，因为第一次搜索必须占用大量内存。就在我显示代码之前，我会说我有一个`users`只包含 15 行、只有 10 个小列的`businesses`表，我有一个包含 19 行和 19 列的表。所以基本上我一开始没有很多数据。

我的第一个函数中有以下 Flex 代码：

> 用户=新用户（）；
> user.facebookid = facebookidLbl.text;
> getUserIDResult.token = userService.getUserByID(user);

在 PHP 中调用以下函数：

> 公共函数 getUserByID ($item)

```
{
    $getfbid = mysqli_real_escape_string($this->connection, $item->facebookid);

    $stmt = mysqli_prepare($this->connection,

    "SELECT

          users.facebookid,

          users.dob,

          users.latitude,

          users.longitude

       FROM users where users.facebookid='{$getfbid}'");

    mysqli_stmt_execute($stmt);

    $row = new User();

    mysqli_stmt_bind_result($stmt, $row->facebookid, $row->dob, $row->latitude, $row->longitude);

    if (mysqli_stmt_fetch($stmt)) {

        return $row;

    } else {

        return null;

    }

    mysqli_stmt_free_result($stmt);

    mysqli_close($this->connection);

} 
```

然后第二个函数在 flex 中只有以下行：`getBusinessResult.token = businessService.getBusiness(business);`

它调用以下 PHP：

> 公共函数 getBusiness ($item)

```
{
    $result = mysqli_query($this->connection, "SELECT * FROM businesses");

while (($row = mysqli_fetch_array($result, MYSQL_NUM)) !== false) 
{
$data[] = $row;
} 
```

第二个功能至少需要一分钟才能完成，然后我得到上面提到的错误，而第一个功能几乎立即发生。我会假设它是第二个函数，但错误还指出它正在尝试分配 40961 字节，这比配额小得多，所以它必须是第一个执行此操作的搜索。我真的被卡住了，所以非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T14:51:54.263

```
Fatal error: Allowed memory size of 268435456 bytes exhausted (tried to allocate 40961 bytes) 
```

此错误并不意味着它无法分配`40961`字节，而是意味着尝试分配额外的 40961 字节时超出了配额。查看您的代码：

```
while (($row = mysqli_fetch_array($result, MYSQL_NUM)) !== false) 
{
$data[] = $row;
} 
```

您将每一行保存在一个数组中。假设，你有一个非常大的表，分配无法保存这么大的数组。

# ruby-on-rails - Rspec 1.3 中的更改匹配器不识别相等的对象

> ID：10704416
> 
> 赞同：0
> 
> 时间：2012-05-22T14:47:21.113
> 
> 标签：ruby-on-rails, ruby, rspec, comparison, matcher

我有那个 rspec 测试

```
let(:document) { Document.new }
let(:residue)  { Residue.new  } 

describe "inner_residue=" do
  before do
    document.producer_residue = residue
  end

  it 'dont changes the producer residue' do
    expect { document.inner_residue = residue }.to_not change(document, :producer_residue)
  end
end 
```

输出此错误：

```
producer_residue should not have changed, but did change from #<Residue id: nil, un_code: nil, description: "res", created_at: ... > to #<Residue id: nil, un_code: nil, description: "res", created_at: ... > 
```

如您所见，有相同的残留物。该方法更复杂，但这也是一种失败的简单方法：

```
def inner_residue=(other)
  return self.producer_residue = self.addressee_residue = nil unless other
  self.producer_residue = producer_residue
end 
```

所以... WTF？

为自己更改残基会使断言失败？我检查了它们是否与 ==、===、eq 相同？它总是正确的。我不明白这有什么问题。

我正在使用 rspec 1.3（它是一个 rails 2.3 应用程序，我无法升级到 rspec2）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:21:12.113

RSpec 对相等的对象没有问题。这里的问题是，在 ActiveRecord 中，两个未保存的模型被认为是不相等的，即使它们具有所有相同的属性。如果你运行，你可以看到这一点`puts (Residue.new == Residue.new)`。

您必须保存 Residue 对象才能使其正常工作。

# java - 如何防止石英中的内存泄漏

> ID：10704418
> 
> 赞同：12
> 
> 时间：2012-05-22T14:47:21.867
> 
> 标签：java, jsp, tomcat, servlets, quartz-scheduler

我在我的项目中使用石英。我的 Web 应用程序在停止时显然导致了内存泄漏，错误是：

```
SEVERE: A web application appears to have started a TimerThread named [Timer-12] via the java.util.Timer API but has failed to stop it. To prevent a memory leak, the timer (and hence the associated thread) has been forcibly cancelled. 
Jan 2, 2013 6:55:35 AM org.apache.catalina.loader.WebappClassLoader clearReferencesThreads
SEVERE: A web application appears to have started a thread named [DefaultQuartzScheduler_Worker-1] but has failed to stop it. This is very likely to create a memory leak. 
```

我用`org.quartz.ee.servlet.QuartzInitializerServlet`和`org.quartz.ee.servlet.QuartzInitializerListener`。我工厂的代码是：

```
StdSchedulerFactory factory = (StdSchedulerFactory) context.getAttribute(QuartzInitializerListener.QUARTZ_FACTORY_KEY ); 
```

web.xml 中石英的设置是：

```
<servlet>
         <servlet-name>
             QuartzInitializer
         </servlet-name>
         <display-name>
             Quartz Initializer Servlet
         </display-name>
         <servlet-class>
             org.quartz.ee.servlet.QuartzInitializerServlet
         </servlet-class>
         <load-on-startup>
             1
         </load-on-startup>
         <init-param>
             <param-name>shutdown-on-unload</param-name>
             <param-value>true</param-value>
         </init-param>
         <init-param>
             <param-name>wait-on-shutdown</param-name>
             <param-value>true</param-value>
         </init-param>
         <init-param>
             <param-name>start-scheduler-on-load</param-name>
             <param-value>true</param-value>
         </init-param>
     </servlet>
     <context-param>
         <param-name>quartz:shutdown-on-unload</param-name>
         <param-value>true</param-value>
     </context-param>
     <context-param>
         <param-name>quartz:wait-on-shutdown</param-name>
         <param-value>true</param-value>
     </context-param>
     <context-param>
         <param-name>quartz:start-on-load</param-name>
         <param-value>true</param-value>
     </context-param>
     <listener>
         <listener-class>
             org.quartz.ee.servlet.QuartzInitializerListener
         </listener-class>
     </listener> 
```

请帮我解决这个内存泄漏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T11:25:22.310

通过实现[`org.quartz.InterruptableJob`](http://quartz-scheduler.org/api/2.0.0/org/quartz/InterruptableJob.html)，您可以正确中断由 servlet 卸载触发的线程。

```
@DisallowConcurrentExecution
public class Job implements InterruptableJob {

    private Thread thread;

    @Override
    public void execute(JobExecutionContext context) throws JobExecutionException {
        thread = Thread.currentThread();
        // ... do work
    }

    @Override
    public void interrupt() throws UnableToInterruptJobException {
        thread.interrupt();
        try {
            thread.join();
        } catch (InterruptedException e) {
            throw new UnableToInterruptJobException(e);
        } finally {
            // ... do cleanup
        }
    }
} 
```

如果作业在中断之前尚未执行，则此示例可能会导致线程变量出现竞争条件错误。根据目标应用程序的生命周期，我保留最终解决方案以征求建议。如果您需要通过同一作业实例并发执行，请扩充解决方案以处理多个线程并删除[`@DisallowConcurrentExecution`](http://quartz-scheduler.org/api/2.0.0/org/quartz/DisallowConcurrentExecution.html)注释。

为了使其工作，quartz 属性`org.quartz.scheduler.interruptJobsOnShutdownWithWait`必须设置为`true`。这可以通过为调度程序定义一个属性文件来完成，或者如果使用 spring 框架，则可以通过一个 bean 引用来完成。

示例`quartz.properties`文件：

```
org.quartz.scheduler.interruptJobsOnShutdownWithWait=true 
```

**请注意**，仅当调度程序配置为等待关闭时才会调度中断，从而导致调用[`scheduler.shutdown(true)`](http://quartz-scheduler.org/api/2.0.0/org/quartz/Scheduler.html#shutdown%28boolean%29).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:48:03.807

我看到你初始化了两个实例...... - 首先通过 org.quartz.ee.servlet.QuartzInitializerServlet - 第二个通过 org.quartz.ee.servlet.QuartzInitializerListener

删除 QuartzInitializerServlet 或 QuartzInitializerListener （以及相应的参数）...如果您想要多个实例（出于特定原因），请使用 QuartzInitializerServlet （并且不要忘记每个实例使用不同的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-06T11:01:49.503

如果您在 Web 应用程序中使用自己的 ServletContextListener 接口实现，则可以在 contextDestroyed 方法中优雅地关闭 Quartz。请在下面找到 Quartz 版本 2.1.7 的示例代码。

你的工作：

```
import org.quartz.Job;
import org.quartz.JobExecutionContext;
import org.quartz.JobExecutionException;

public class CronJob implements Job {
    public void execute(JobExecutionContext context)
            throws JobExecutionException {
        // TODO: do you job
    }
} 
```

您的作业调度程序：

```
import org.quartz.CronScheduleBuilder;
import org.quartz.JobBuilder;
import org.quartz.JobDetail;
import org.quartz.JobKey;
import org.quartz.Scheduler;
import org.quartz.SchedulerException;
import org.quartz.Trigger;
import org.quartz.TriggerBuilder;
import org.quartz.impl.StdSchedulerFactory;

public class CronJobScheduler {

    private static CronJobScheduler instance = new CronJobScheduler();  
    private Scheduler scheduler;

    private CronJobScheduler() {    
        try {
            scheduler = new StdSchedulerFactory().getScheduler();
        } catch (SchedulerException e) {
            // TODO
        }
    }

    public static CronJobScheduler getInstance() {
        return instance;
    }

    public void trigger() {
        JobKey jobKey = JobKey.jobKey("myJobName", "myJobGroup");       
        JobDetail job = JobBuilder.newJob(CronJob.class).withIdentity(jobKey).build();

        Trigger trigger = TriggerBuilder
                .newTrigger()
                .withIdentity("myTriggerName", "myJobGroup")
                .withSchedule(CronScheduleBuilder.cronSchedule("0 0 1,13 * * ?"))
                .build();

        try {
            scheduler.start();
            scheduler.scheduleJob(job, trigger);
        } catch (SchedulerException e) {    
            // TODO
        }
    }

    public void shutdown(boolean waitForJobsToComplete) {
        try {
            scheduler.shutdown(waitForJobsToComplete);
        } catch (SchedulerException e) {
            // TODO
        }
    }

} 
```

ServletContextListener 接口的实现：

```
import javax.servlet.ServletContextEvent;
import javax.servlet.ServletContextListener;

public class MyServletContextListener implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
        CronJobScheduler.getInstance().shutdown(true);
    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
        CronJobScheduler.getInstance().trigger();
    }

} 
```

你的 web.xml

```
<listener>
    <listener-class>my.package.name.MyServletContextListener</listener-class>
</listener> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:50:10.557

我想你想要：

```
 <init-param>
         <param-name>wait-on-shutdown</param-name>
         <param-value>true</param-value>
     </init-param> 
```

您有一个“quartz:”前缀，这可能会导致 Quartz 恢复为该配置设置的默认值“false”。

# javascript - 页面加载完成时的setTimeout - jQuery

> ID：10704419
> 
> 赞同：0
> 
> 时间：2012-05-22T14:47:23.593
> 
> 标签：javascript, jquery, ajax, settimeout, pageload

我喜欢这个插件：http: [//jquery.malsup.com/block/#demos](http://jquery.malsup.com/block/#demos)

到目前为止，iPhoto（ish）在我的网站上运行良好**。**我单击一个按钮，出现块并加载新页面。

但是，我想**将 setTimeout 值设置为下一页完成加载时**。因此，一旦页面完全加载，该块就会消失。

我如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T22:17:13.590

我不知道您是如何加载页面的，但是如果您可以在页面加载时发送一个函数，请执行以下操作：

```
function page_loaded(){

    $.blockUI({ 
        message: 'page loaded!'
    }); 

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:53:52.077

如果您通过 ajax 加载新页面，则在此页面中：

[http://jquery.malsup.com/block/#overview](http://jquery.malsup.com/block/#overview)

有这个：

```
$(document).ajaxStart($.blockUI).ajaxStop($.unblockUI); 
```

哪种方式将自身绑定到每个 ajax 负载。我猜你应该在加载页面结束时放置一个事件而不是 setTimeout，因为 setTimeout 仅适用于时间，并且“猜测”页面的加载时间没有多大意义

希望这可以帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:57:02.387

我认为您必须使用 ajax 重新加载内容。

你可以这样做：

```
$('#TheLastElementThatYouReload').ready(function () {

// set timeout / hide block

}); 
```

我不确定你为什么需要超时，但这样你就不需要了。

# jquery - Jquery在IE中点击DIV只会触发文本而不是DIV中的任何地方......？

> ID：10704420
> 
> 赞同：4
> 
> 时间：2012-05-22T14:47:36.750
> 
> 标签：jquery, internet-explorer, click

我有一个 DIV：

```
 <div id="leftBoxTools" class="toolboxHeaders" style="margin-top: 10px; width: 100%">
                    TOOLS</div> 
```

我想在有人点击它的任何地方时触发一个点击事件，这样我就可以制作一种可折叠的工具箱：

```
 $(".toolboxHeaders").click(function () {
    $(this).next().slideToggle("slow");
}); 
```

# 在 ff 和 chrome 中工作正常，但在 ie9 中，它只有在您单击实际文本而不是 div 中的任何位置时才有效......有什么想法吗？

更新：澄清一下，这一切都发生在 JQ UI 对话框中。不确定这是否会导致问题。我从这篇文章中查看了 JSFiddle，它们在 IE9 中都可以正常工作。然而，我仍然无法解决我的特定问题。

我也在一个使用框架和母版页（guh）的旧 aspx 应用程序中做这一切......所以真的很难说出是什么原因造成的。

我已经将文档类型更改为 HTML5，但仍然无法让它点击除文本之外的任何内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T22:24:48.663

我有同样的问题，原来在我的css文件中我有：

`body { z-index: -1}`

删除后一切正常。这就是为什么这些在 jsfiddle 中工作，而不是在我的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:53:57.500

它在 IE9 ( [jsfiddle](http://jsfiddle.net/PBNcq/1/) )中运行良好

这是代码：

```
 <div id="leftBoxTools" class="toolboxHeaders" style="margin-top: 10px; width: 100%; height:60px; background-color:red;">
                TOOLS

</div>
<div>another </div> 
```

JS：

```
$(".toolboxHeaders").click(function () {
    $(this).next().slideToggle("slow");
}); 
```

`div`单击红色区域中的任意位置时，内容为“另一个”的内容将向上/向下滑动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:54:13.167

仔细检查**`DOCTYPE`**您正在使用的。

我做了一个现场测试，[http://jsfiddle.net/kYcD9/](http://jsfiddle.net/kYcD9/)，它在 IE9 中运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:04:52.873

也许我遇到这个问题的原因是不同的，但对我来说，解决它的方法是为 div 提供背景属性：

```
.myactivediv {
    ...
    background: #E8E6EE;
    ...
} 
```

# java - 如何查看 java 序列化对象？

> ID：10704424
> 
> 赞同：4
> 
> 时间：2012-05-22T14:47:56.440
> 
> 标签：java, serialization

我有一个来自旧 Java 代码的对象，现在我更改了序列化的对象代码。我希望能够同时读取旧文件和新文件。我需要 readObject 中的分支语句来执行以下操作：

```
if (next object is int -- just poking, it might be an Object)
{
    // we know we are in version 1
} else {
    // read new version of object
} 
```

那有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:49:55.547

```
if (object instanceof Integer) {
  ... Do stuff
} else {
  ... Do other stuff
} 
```

编辑：我想我应该对此进行扩展。您可以使用检查对象类型，`instanceof`但我不确定是否能够使用`int`或`char`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:39:42.833

最简单的方法是保留旧的成员变量和它们的旧类型，并为新类型添加新的成员变量。此外，您必须保持类的 serialVersionUID 相同。然后，您的 readObject() 实现可以进行任何必要的操作以将旧数据转换为新数据。

原始对象：

```
public class MyObject {
   private static final long serialVersionUID = 1234L;

   private int _someVal;
} 
```

新版本：

```
public class MyObject {
   private static final long serialVersionUID = 1234L;

   private int _someVal;  //obsolete
   private String _newSomeVal;

    private void readObject(java.io.ObjectInputStream in)
      throws IOException, ClassNotFoundException
    {
      in.defaultReadObject();

      if(_someVal != 0) {
        // translate _someVal to _newSomeVal
      }
    }
} 
```

我相信使用 custom`ObjectStreamField[] serialPersistentFields`和.`ObjectInputStream.GetField``ObjectOutputStream.PutField`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:40:58.763

好的，所以基本上问题是“我们如何检查`ObjectInputStream`下一个字段是原始字段还是对象？” 据我所知，答案是：你不能。

这意味着我能看到的保持向后兼容性的最佳解决方案是*永远不要*从原始版本中删除原语 - 保留无用的信息会稍微扩大大小，但否则这很容易。

要添加新字段，我可以看到两种方法：

1.  保持之前的消息格式相同，只在最后添加新对象 - 然后您可以通过消息大小轻松区分不同版本（或者更准确地说，当您获得 v1 对象时读取 v2 的数据时您将获得 IOException）。这要简单得多，而且通常是首选。

2.  您可以将对象从 v1 更改为 v2，然后进行简单`instanceof`检查。如果要添加原语是存储它们的包装器版本（即`Integer`等）。可以为您节省一些字节，但 Java 的序列化协议从一开始就效率不高，所以这实际上是不必要的复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:42:45.937

`ObjectInputStream`将加载并创建正确类的实例。

```
object = ois.readObject();

if (object instanceof YourNewShiny ){
    // new style object
} else if (object instanceof YourOldBusted ){
    // convert YourOldBusted to YourNewShiny
} else {
    throw new ToyOutOfPram();
} 
```

如果您有一个新类，这一切都很好，但是如果您以不兼容的方式更改了您的类，以至于`ObjectInputStream`无法将类的旧版本反序列化为新形式。如果是这种情况，你就吃饱了。

选项：

*   还原您的更改，或者以兼容的方式进行更改，即添加一个 serialVersionId，不要更改字段的顺序，只添加新字段，另外不要假设非空约束
*   使用旧版本的代码读取序列化数据，将其转换为某种中间形式（xml、csv 等），然后将此数据导入新的类定义并序列化
*   手动重新实现`ObjectInputStream`以检测您的类类型（您可以使用 serialVersionId 来加强类型）

只有第一个对我来说似乎是个好主意。

# sql - 如何在包含大量数据的表上使用自联接编写查询？

> ID：10704428
> 
> 赞同：0
> 
> 时间：2012-05-22T14:48:13.283
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

具有以下表结构：

表 1：**客户**

```
CustID(primary key)  |  CustName(indexed)
----------------------------------
C1                       Cust1
C2                       Cust2
.                        Cust3
.                        Cust.
.                        Cust.
C10000                   Cust10000 
```

表 2：**自定义字段**

```
FieldID (primary key) |  ID (indexed)                | FieldValue
---------------------------------------------------------------------
1                        C1                              Test 
2                        C2                              Test 
3                        C3                              Test 
4                        C4                              Test 
.                        .                               Test 
.                        .                               Test 
few millions             Z1                              Test   

"ID" column is indexed. 
```

尝试输出以下内容；

```
CustID  |  Field 1  |  Field 2 | Field 3 | .... | Field N
---------------------------------------------------------- 
```

我试着写一个像

```
Select 
    CustID, A1.FieldValue as [Field 1], A2.FieldValue as [Field 2]
from 
    Customers 
left outer join 
    CustomFields A1 on Customers.custID = A1.ID
left outer join 
    CustomFields A2 on Customers.custID = A2.ID
left outer join 
    CustomFields An on Customers.custID = An.ID
where 
    custName like 'C%' 
```

由于该`CustomFields`表包含几百万条记录，因此上述查询表现不佳。现在大约需要 10-12 秒（对于 500 个客户和 6 个字段）

我认为左外连接在这里增加了时间。解决问题的任何想法都会真正有帮助吗？

平台：SQL Server 2005

更新 ：

`CustomFields`table 是一个通用表，它可以包含任何其他实体（供应商、项目等）的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:33:59.463

您是否尝试过使用数据库引擎优化顾问分析查询？不能保证，但它可能会提供一两个有用的建议。

![在此处输入图像描述](../Images/8dee05f72c9db0ab48f23f89590e85c8.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:57:52.503

你的询问是完全合理的。但是，数据库结构已关闭。您应该有一个单独的列用于客户 ID 和字段 ID。按照编写查询的方式，您将获得与其他表中的字段一样多的 CustId 行。

它们不应该组合成一列。我希望加入看起来像：

```
left outer join
CustomerFields cfn
on cfn.CustId = Customers.CustId and
   cfn.FieldNum = <n> 
```

另一种可能性是性能下降是您第一次运行查询。如果您有足够的内存，那么它第二次运行的速度可能会快得多——因为字段表在内存中。

为了记录，我对“喜欢”有一个历史偏见，认为它会导致性能问题。这可能无济于事，但您可以尝试：

```
where left(CustName, 1) = 'C' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:21:00.990

```
 SELECT  Pvt.ID, 
            Customers.CustName, 
            Pvt.[1] AS Field1, 
            Pvt.[2] AS Field2, 
            Pvt.[3] AS Field3, 
            Pvt.[4] AS Field4, 
            Pvt.[5] AS Field5,
            ...
    FROM (
            SELECT ID, FieldID, FieldValue
            FROM CustomFields) AS p
            PIVOT (
                MIN (FieldValue)
                FOR FieldID IN ([1], [2], [3], [4], [5], ... )
        ) AS pvt
    inner join Customers ON Customers.CustID = pvt.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T12:49:29.940

您可以使用单个连接来获取自定义字段，并使用聚合函数来转置它们。这样，与表 CustomFields 的联接只进行一次。

像这样。

```
SELECT
  Customers.CustID,
  MAX(CASE WHEN CF.FieldID = 1 THEN CF.FieldValue ELSE NULL END) AS Field1,
  MAX(CASE WHEN CF.FieldID = 2 THEN CF.FieldValue ELSE NULL END) AS Field2,
  MAX(CASE WHEN CF.FieldID = 3 THEN CF.FieldValue ELSE NULL END) AS Field3,
  MAX(CASE WHEN CF.FieldID = 4 THEN CF.FieldValue ELSE NULL END) AS Field4
  -- Add more...

  FROM Customers 

  LEFT OUTER JOIN CustomFields CF
  ON CF.ID = Customers.CustID

  WHERE Customers.CustName like 'C%'

  GROUP BY Customers.CustID 
```

# windows-8 - 如何在 WinRT XAML 中添加数组

> ID：10704430
> 
> 赞同：5
> 
> 时间：2012-05-22T14:48:20.417
> 
> 标签：windows-8, winrt-xaml

我希望在 XAML 中声明一个数组。我可以在 WPF 中做到这一点。只是似乎无法在 WinRT 中找到正确的命名空间。有人知道吗？

```
<Page xmlns:list="?Something?">

    <Page.Resources>

        <x:Int32 x:Name="MyScalarValue">123</x:Int32>

        <list:Array x:Name="MyValueList">
            <x:Int32>123</x:Int32>
            <x:Int32>456</x:Int32>
        <list:Array>

    </Page.Resources>

</Page> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:42:03.093

WinRT 目前不支持 x:Array（以及 x:Static 和其他一些）。就此而言，Silverlight 也不支持 x:Array，[尽管开发人员正在推动它](http://connect.microsoft.com/VisualStudio/feedback/details/643058/support-x-array-construct-in-silverlight-xaml)。

鉴于 WinRT 的 XAML 实现似乎[与 SL 比 WPF 更紧密地对齐](https://stackoverflow.com/questions/9935048/wpf-silverlight-vs-winrt)，这并不奇怪。

[编辑 - 有关SL4+ 与 WPF 差异](http://msdn.microsoft.com/en-us/library/cc917841%28v=vs.95%29.aspx)的更多信息：
“WPF 或 [MS-XAML] 中存在的显着遗漏是 x:Array、x:Code、x:Type 和代码访问修饰符。”

[此外，此处](http://metroapps.wikispaces.com/Delta+with+Silverlight)的 SL4 和 WinRT 实现之间的差异及其相关链接清楚地表明，当这些位被（并且仍然）从 ​​SL 中省略时，它们并没有神奇地进入 WinRT。

# magento - Magento中某些单词的自定义翻译文件翻译失败

> ID：10704433
> 
> 赞同：7
> 
> 时间：2012-05-22T14:48:24.820
> 
> 标签：magento, translation

我正在为我的 Magento 安装（版本 1.6.2.0）开发一个自定义模块。我在 config.xml 中为该模块注册了一个翻译文件，并开始添加德语翻译。该模块向 Magento 后端添加了一些新行为。

在进行翻译时，我注意到 Magento 的一个奇怪行为。尽管模块的 csv 文件中提供了翻译，但 Magento 不会翻译某些单词。

当我将密钥更改为不同的值时，翻译按预期工作，因此 Magento 似乎可以看到并读取 cvs 文件。

目前我注意到键“City”和“Store”的这种行为。

csv文件的内容：

```
"City","Stadt"
"City1","Stadt" 
```

我使用以下行来翻译字符串。

```
Mage::helper('mymodule')->__('City') // returns "City" 
```

当我将密钥更改为“City1”时，一切都按预期工作。

```
 Mage::helper('mymodule')->__('City1') // returns "Stadt" 
```

在此之后，我搜索了德语翻译 csv 文件（由 German Magento 社区提供）以查找关键“City”的翻译，并在“adminhtml 模块”中找到了一个。

```
 Mage::helper('adminhtml')->__('City') // returns "Stadt" 
```

所以这也可以按预期工作。

我不知道我做错了什么。正如我所说，字符串“Store”也会发生相同的行为。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T13:58:40.157

最后我解决了翻译问题。原因是 config.xml 中的配置错误。我通过调试 Magento 在翻译文件中读取的代码找到了它。发生这种情况时，会从 config.xml 文件的 XML 元素之一读取一个名为 scope 的参数。

该元素通常应具有模块的名称，例如`<MyCompany_MyModule>`. 在我按照配置翻译的教程中，这个 XML 元素的命名`<translations>`是错误的。

我猜这对于早期版本的 Magento 来说可能是正确的。难以发现的是，错误只发生在其他模块的翻译文件中也定义的键上。仅在我的翻译文件中定义的键按预期工作。

正确的配置应该如下所示。

```
<frontend>
   ...
    <translate>
        <modules>
            <MyCompany_MyModule>
                <files>
                    <default>MyCompany_MyModule.csv</default>
                </files>
            </MyCompany_MyModule>
        </modules>
    </translate>
  ...
</frontend>
<adminhtml>
  ...
    <translate>
        <modules>
            <MyCompany_MyModule>
                <files>
                    <default>MyCompany_MyModule.csv</default>
                </files>
            </MyCompany_MyModule>
        </modules>
    </translate>
    ...
 </adminhtml> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T09:54:02.713

如果手头没有您的代码，很难说，但我的猜测是您的模块的翻译范围会以某种方式丢失（无论出于何种原因）导致 Magento 回退。

Afaik，在 Magento 1.6.2.0 中，以下翻译文件*也*定义了密钥`City`：

```
/app/locale/<language>_<region>/Mage_Checkout.csv
/app/locale/<language>_<region>/Mage_Customer.csv
/app/locale/<language>_<region>/Mage_Persistent.csv
/app/locale/<language>_<region>/Mage_Sales.csv
/app/locale/<language>_<region>/Mage_Shipping.csv
/app/locale/<language>_<region>/Mage_XmlConnect.csv 
```

我会尝试一一更改`City`这些`.csv`文件中的翻译，以找出相关翻译的实际来源。

一旦找到 Magento 回退到的文件，您*也*知道需要覆盖哪个翻译范围，以强制`City`使用您的翻译。

例如，如果您发现更改翻译`Mage_Shipping.csv`确实生效，那么您编辑*翻译*文件 ( `My_Module.csv`) 以包含

```
"Mage_Shipping::City","Stadt" 
```

# php - php表单复选框='$变量'

> ID：10704434
> 
> 赞同：1
> 
> 时间：2012-05-22T14:48:29.190
> 
> 标签：php, forms, checkbox

我似乎无法完成这件事。我从表中获取数据，如果列中的值 = y，则必须选中复选框，如果列中的值 = n，则不得选中复选框，所有复选框都保持选中状态，即使只有第一行的列 = y

```
<?php
session_start();
    include 'datalogin.php';
    $sel_course_id = 2;
    $sel_date_1    = '2012-05-21';
    $sel_date_2    = '2012-05-22';
    echo "<form action='' method='post'>";
    echo "<strong>Completed the course</strong>";

    $sql1 = "SELECT * FROM trn WHERE course_id = '$sel_course_id' AND date_1 = '$sel_date_1' and date_2 = '$sel_date_2'";
    $res1 = mysql_query($sql1);
    while ($row1 = mysql_fetch_assoc($res1)) {
        $rowid1           = $row1['id'];
        $uid1              = $row1['usr_id'];
        $certificate_name1 = $row1['certificate_name'];
        $course_completed1 = $row1['course_completed'];

            $sql2 = "SELECT * FROM ex_usrs WHERE id = '$uid1'";
            $res2 = mysql_query($sql2);
            while ($row2 = mysql_fetch_assoc($res2)) {
                $fn2 = $row2['firstname'];
                $ln2 = $row2['lastname'];
            } 
            $checked2 = "";
            if ($course_completed1 == y) {
                $checked2 = "checked";
            } 
            if ($course_completed1 == n) {
                $checked2 = "";
            } 
            echo "<input name='question[$rowid1][]' type='checkbox'  checked='$checked2' value='1' />$fn2 $ln2";
echo "</br>";
   } 
    echo "</form>";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:49:59.537

对字符串使用引号：

```
if ($course_completed1 == "y") {
    $checked2 = "checked";
} 
if ($course_completed1 == "n") {
    $checked2 = "";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:50:23.947

`checked='$checked2'`应该是 plain `$checked2`，它是一个布尔属性。

（除非您正在编写 XHTML，在这种情况下，它也应该`'checked="checked"`在您 test 之后被赋予该值`if ($course_completed1 == "y") {`）。

您的测试还应该检查字符串 ( `"y"`) 而不是常量 ( `y`)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T14:57:52.810

如前所述，您需要引用`y`并`n`比较字符串值。但即使只是拥有`checked=""`也会导致您的复选框被选中。试着做这样的陈述：

```
if ($course_completed1 == "y") {
    $checked2 = "checked='checked'";
} 
elseif ($course_completed1 == "n") {
    $checked2 = "";
}

echo "<input name='question[$rowid1][]' type='checkbox' $checked2 value='1' />$fn2 $ln2"; 
```

# c# - TcpClient.Connect 说“连接尝试失败，因为连接方......”

> ID：10704436
> 
> 赞同：2
> 
> 时间：2012-05-22T14:48:32.187
> 
> 标签：c#, .net-3.5, tcpclient

我有一个在 Windows XP SP3 x86 上运行的 Visual Studio 2008 C# .NET 3.5 应用程序。在我的应用程序中，我有一个`OnSendTask`可以由多个线程同时调用的事件处理程序。它打开到远程主机的 TCP 连接并发送/接收数据。

例如：

```
/// <summary>
/// prevent us from exceeding the maximum number of half-open TCP 
/// connections in Windows XP.
/// </summary>
private System.Threading.Semaphore tcp_connection_lock_ = 
    new System.Threading.Semaphore(10, 10);

public event EventHandler<SendTaskEventArgs> SendTask;

private void OnSendTask(object sender, SendTaskEventArgs args)
{
    try
    {
        tcp_connection_lock_.WaitOne();
        using (TcpClient recipient = new TcpClient())
        {
            // error here!
            recipient.Connect(args.IPAddress, args.Port);
            using (NetworkStream stream = recipient.GetStream())
            {
                // read/write data
            }
    }
    catch
    {
        // write exceptions to the logfile
    }
    finally
    {
        tcp_connection_lock_.Release();
    }
}

void SendTasks(int tasks_to_send)
{
    using (ManualResetEvent done_event = new ManualResetEvent(false))
    {
        int countdown = tasks_to_send;
        for (int i = 0; i < tasks_to_send; ++i)
        {
            ThreadPool.QueueUserWorkItem((o) =>
            {
                SendTaskEventArgs args = new SendTaskEventArgs(/*...*/);

                EventHandler<SendTaskEventArgs> evt = SendTask;
                if (evt != null)
                    evt(this, e);

                if (Interlocked.Decrement(ref countdown) == 0)
                    done_event.Set();
            }, i);
        }
        done_event.WaitOne();
    }
} 
```

不幸的是，我偶尔会看到这个错误：

```
System.Net.Sockets.SocketException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 192.168.0.16:59596
at System.Net.Sockets.TcpClient.Connect(String hostname, Int32 port) 
```

一些信息点：

*   如果我向 40 个遥控器发送任务，我会在 6 左右看到这个响应。
*   Wireshark 跟踪显示甚至没有尝试启动从 PC 到远程的 TCP 连接。
*   我可以从 PC 上 ping 遥控器并获得一致的良好响应。
*   遥控器都与运行此应用程序的 PC 位于同一交换机和子网中。途中没有花哨的网络。

任何人都可以建议可能导致此错误的原因或我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T21:49:21.740

我不确定最大半开 TCP 连接背后的所有细节，但我相信它不是特定于应用程序连接，而是系统范围内的。您确定发生此错误时系统上没有其他应用程序正在创建 TCP 连接吗？

每当发生错误时，我都会设置重试。就像是：

```
private const int MaxRetries = 10;
private void OnSendTask(object sender, SendTaskEventArgs args)
{
    bool retry = false;
    try
    {
        tcp_connection_lock_.WaitOne();
        using (TcpClient recipient = new TcpClient())
        {
            // error here!
            recipient.Connect(args.IPAddress, args.Port);
            using (NetworkStream stream = recipient.GetStream())
            {
                // read/write data
            }
        }
    }
    catch (SocketException ex)
    {
        if(args.RetryCount < MaxRetries)
        {
            retry = true;
            args.RetryCount++;
        }
        else
        {
            // write exceptions to the logfile
        }
    }
    finally
    {
        tcp_connection_lock_.Release();
    }

    if(retry)
    {
        Thread.Sleep(1);
        OnSendTask(sender, args);
    }
} 
```

# jquery - RAILS 3 + Facebox 表单提交丢失选择上传的图像

> ID：10704440
> 
> 赞同：1
> 
> 时间：2012-05-22T14:48:40.487
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, facebox

我有一个包含文件上传字段的注册表单，我使用回形针为我处理上传。当我有rails提交的表格时，一切都很好。我试图做的是而不是 form.submit 添加一个 link_to 来触发对表单中隐藏 div 的 facebox 调用并使用提交按钮呈现弹出窗口。我通过 jQuery 的发布请求提交表单，但是当通过 jQuery 提交表单时，我看不到文件上传。

我通过 form.serialize() 看到的所有其他参数。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:29:25.673

我所做的只是隐藏一个 div，然后在该 div 上显示提交按钮。我使 div 看起来像一个带有 css 的弹出窗口，现在表单提交了所有字段，一切看起来都很好。

# asp.net - 为什么我的 UpdatePanel 未在 ScriptManager 中注册时无法取消注册？

> ID：10704441
> 
> 赞同：1
> 
> 时间：2012-05-22T14:48:43.127
> 
> 标签：asp.net, user-controls, updatepanel, radgrid

我在下面的代码中使用模态弹出窗口。我收到以下错误：

```
Cannot unregister UpdatePanel with ID 'updatePnl' since it was not registered with the ScriptManager. This might occur if the UpdatePanel was removed from the control tree and later added again, which is not supported.
Parameter name: updatePanel 
```

这可能是什么原因造成的？

这是我的代码：

```
<telerik:GridTemplateColumn HeaderStyle-Width="20%" HeaderText="See Your Assessment">
                    <ItemTemplate>
                        <asp:Button CommandName="Show" OnClick="grdMasterbtnClick" CommandArgument='<%#Eval("SurveyClientID")%>'
                            ID="btn" runat="server" Text="Your Assessment" />
                        <cc1:ModalPopupExtender CancelControlID="btnCancel" PopupControlID="modelPopUp" ID="ModalPopupExtender1"
                            runat="server" TargetControlID="imgClientFreeEval">
                        </cc1:ModalPopupExtender>
                        <asp:UpdatePanel ID="updatePnl" runat="server">
                            <ContentTemplate>
                                <asp:Panel ID="modelPopUp" runat="server" Visible="false" BackColor="AliceBlue">
                                    <p>
                                        These items will be permanently deleted and cannot be recovered. Are you sure?
                                    </p>
                                    <asp:Button ID="btnOk" Text="OK" runat="server" />
                                    <asp:Button ID="btnCancel" Text="Cancel" runat="server" />
                                </asp:Panel>
                            </ContentTemplate>
                        </asp:UpdatePanel>
                    </ItemTemplate>
                    <HeaderStyle Width="20%"></HeaderStyle>
                </telerik:GridTemplateColumn> 
```

# map - JMock 地图预期

> ID：10704443
> 
> 赞同：2
> 
> 时间：2012-05-22T14:48:48.600
> 
> 标签：map, jmock, hamcrest

我依赖于一个将 Map 作为参数的方法。

```
public interface Service {
    void doSomething(Map<String, String> map);
} 
```

我想写一个断言，这个依赖是用适当的地图内容调用的。像这样的东西：

```
@RunWith(JMock.class)
public class MainTest {
    private Mockery context = new Mockery();
    private Service service = context.mock(Service.class);
    private Main main = new Main(service);

    @Test
    public void test() {
        context.checking(new Expectations(){{
            oneOf(service).doSomething(with(hasEntry("test", "test")));
        }});
        main.run();
    }
} 
```

不幸的是，这无法编译，因为 hasEntry 在映射通用参数中有通配符：

```
public static <K, V> org.hamcrest.Matcher<java.util.Map<? extends K, ? extends V>> hasEntry(K key, V value); 
```

有没有办法为地图内容编写 JMock 期望？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T09:31:51.747

由于我们达到了 Java 泛型的限制，因此没有一个好的答案。jMock 所需的泛型与 assertThat() 所需的泛型之间存在矛盾

我倾向于添加一个具有表现力名称的辅助方法来强制类型。

```
@Test public void test() {
  context.checking(new Expectations(){{
    oneOf(service).doSomething(with(mapIncluding("test", "test")));
  }});

  main.run();
}

@SuppressWarnings({"unchecked", "rawtypes"})
private Matcher<Map<String, String>> mapIncluding(String key, String value) {
   return (Matcher)Matchers.hasEntry(key, value);
}; 
```

是的，这很丑陋。我只能道歉，这是我们似乎能做的最好的事情。也就是说，我很少需要关闭类型，我可以给它一个在域中有意义的名称，并且我已经将取消选中本地化为辅助方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T12:30:32.120

我最终创建了一个方法指定（），允许将通用匹配器向下转换为更具体的匹配器

```
public static <T> Matcher<T> specify(final Matcher<? super T> matcher) {
    return new TypeSafeMatcher<T>() {
        @Override
        protected boolean matchesSafely(T item) {
            return matcher.matches(item);
        }

        @Override
        public void describeTo(Description description) {
            matcher.describeTo(description);
        }
    };
} 
```

使用这种方法，我可以向下转换任何现有的通用匹配器，例如 hasEntry()

```
public <K, V> Matcher<Map<? extends K, ? extends V>> hasEntry(K key, V value) 
```

以通用安全的方式转换为更具体的，如下所示：

```
private static <K,V> Matcher<Map<K, V>> aMapHavingEntry(K key, V value) {
    return specify(hasEntry(key, value));
} 
```

现在我可以使用这个特定的匹配器作为期望参数：

```
 context.checking(new Expectations() {{
        oneOf(service).doSomething(with(aMapHavingEntry("test", "test")));
    }}); 
```

使用指定（）方法，我为最流行的接口创建了一堆特定的匹配器：Map、Collection、List、Set，例如：

```
private static <K,V> Matcher<Map<K, V>> aMapHavingEntry(K key, V value) {
    return specify(hasEntry(key, value));
}

private static <K> Matcher<Collection<K>> aCollectionContainingInAnyOrder(K... items) {
    return specify(containsInAnyOrder(items));
} 
```

我还建议向 JMock 添加相同的功能，尽管我得到的只是沉默。

# c# - 获取当前项目中文件的文件路径

> ID：10704444
> 
> 赞同：16
> 
> 时间：2012-05-22T14:48:49.883
> 
> 标签：c#

如何以编程方式获取项目中文件的文件路径？

```
 string fileContent = File.ReadAllText(LocalConstants.EMAIL_PATH); 
```

我作为文本文件添加到项目中的 EMAIL_PATH。这行代码会引发异常，因为默认情况下它出于某种原因在 system32 文件夹中查找。我需要将其设置为项目目录。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-22T14:51:59.357

你可以使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)and [`AppDomain.CurrentDomain.BaseDirectory`](http://msdn.microsoft.com/en-us/library/system.appdomain.basedirectory.aspx)：

```
string fileName = "SampleFile.txt";
string path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, LocalConstants.EMAIL_PATH, fileName); 
```

在调试模式下的测试项目中返回此路径（何时`LocalConstants.EMAIL_PATH="Emails"`）：

```
C:\****\****\Documents\Visual Studio 2010\Projects\WindowsApplication1\WindowsFormsApplication1\bin\Debug\Emails\SampleFile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:54:52.947

您可以使用`Environment.CurrentDirectory`

请参阅：http: [//msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx](http://msdn.microsoft.com/en-us/library/system.environment.currentdirectory.aspx)

供进一步阅读。

编辑*

`string temp = Path.GetDirectoryName(Assembly.GetExecutingAssembly().CodeBase);`

会做同样的事情，也许更安全一些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-06T21:22:40.643

这对我有用 System.AppDomain.CurrentDomain.BaseDirectory.ToString()

# c# - 如何阻止 JIT 调试器介入崩溃的 wcf 服务？

> ID：10704446
> 
> 赞同：6
> 
> 时间：2012-05-22T14:48:55.030
> 
> 标签：c#, .net, wcf, jit

我有一个自托管的 wcf Web 服务，其中有一个 UnhandledExceptionEventHandler 记录任何未处理的异常......当我与一个有点礼貌的第 3 方技术提供商接触时，这种情况经常发生......

我的问题是；处理未处理的异常后，我可以停止调用 JIT 调试器吗？我正在尽我所能处理未处理的异常；我知道该服务正在轰炸，但它被轰炸的事实记录在我们的事件数据库中。有我可以设置的编译开关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T17:17:28.490

根据 MSDN，您可以通过 Visual Studio 中的“选项”对话框启用/禁用 JIT 调试 - [http://msdn.microsoft.com/en-us/library/5hs4b7a6.aspx](http://msdn.microsoft.com/en-us/library/5hs4b7a6.aspx)似乎还有一个注册表黑客可以做到这一点。高温高压

# jquery - Click/Bind/Unbind - 在浏览器和 iPad 上工作的交互式地图处理程序

> ID：10704450
> 
> 赞同：0
> 
> 时间：2012-05-22T14:49:02.417
> 
> 标签：jquery, map, click

我已经使用基本地图和区域标签创建了一个图像地图。我已经测试了地图，所有区域的行为都符合预期，因此 HTML 绝对正确。

单击某个区域时，地图图像的来源将被另一个替换。自然，当第二次单击时，地图源应恢复到其原始状态。它基本上是一个点击/取消点击类型的事件，我试图用它`.bind()`来进行取消点击。出于某种原因，它似乎不起作用。

**代码如下：**

```
$(document).ready(function(){
$("#area1").click(function(){ 
$("#londonmap").attr('src','images/clickimage.png');
});
$("#area1").unbind("click", function() {
$("#londonmap").attr('src','images/originalimage.png');
});
}); 
```

我用 mouseover/mouseout 而不是单击和取消绑定对此进行了测试，这工作得很好，但当然这对 iPad 不友好。但是，当我尝试此操作时，只有单击有效，然后我第二次单击该区域-没有任何反应。

我怀疑我实现 .unbind() 的方式有问题

感谢您帮助 jQuery 菜鸟！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:53:57.270

## 更新

*   [jsFiddle 演示 1](http://jsfiddle.net/X6fXq/1/)
*   [jsFiddle 演示 2 - 通用图像交换器](http://jsfiddle.net/X6fXq/2/)
*   [jsFiddle 演示 3 - 带有 div clicker 的通用图像交换器](http://jsfiddle.net/X6fXq/3/)
*   [jsFiddle 演示 4 - 褪色](http://jsfiddle.net/X6fXq/4/)

## 原来的

该`.unbind`事件将一起删除点击事件。使用当前代码，一旦单击图像一次，它将删除单击事件并且不可单击...永远，悲伤的时代！尝试像这样切换图像 src：

```
$(document).ready(function()
{
    var images = ['http://www.doggyplanet.co.uk/images/new-icon-images/Dog-cartoon.png', 'http://s.thumbs.canstockphoto.com/canstock2134964.jpg'];
    $('#area1').click(function()
    {
        // select the image and determine what the next src will be
        var londonMap = $('#londonmap');
        var newImageSrc = londonMap.attr('src') != images[0] ? images[0] : images[1];

        // re-bind the src attribute
        londonMap.attr('src', newImageSrc);
    });
});​ 
```

# c# - 关于 XML Diff & Patch

> ID：10704452
> 
> 赞同：2
> 
> 时间：2012-05-22T14:49:06.793
> 
> 标签：c#, xml, xml-parsing, xmldiff

我从 MSDN 获得了有关如何将两个 XML 与 XML Diff 和 Patch 进行比较的示例。 [MSDN XML 差异和路径](http://msdn.microsoft.com/en-us/library/aa302294.aspx)

这是一个简单的例子，但我没有得到我所期望的。

我有以下 XML：

```
<a>
<component>A</component>
<component>4</component>
</a> 
```

和

```
<a>
<component>A</component>
<component>5</component>
</a> 
```

运行工具代码我并没有完全不同。我得到的输出是：

```
<a>
<component>A</component>
<component>5</component>
</a> 
```

但是出于我的目的，在这种情况下，我只想获得与原始版本不同的差异。

```
<a>
<component>4</component>
</a> 
```

有谁知道我如何使代码适应我的解决方案。

非常感谢。

**使用的编辑**代码：

*   （在这里我找出文件之间的差异）

    ```
    public void GenerateDiffGram(string originalFile, string finalFile, 
                                XmlWriter diffGramWriter)
    {
        XmlDiff xmldiff = new XmlDiff(XmlDiffOptions.IgnoreChildOrder | 
                                     XmlDiffOptions.IgnoreNamespaces | 
                                     XmlDiffOptions.IgnorePrefixes);
       bool bIdentical = xmldiff.Compare(originalFile, newFile, false, diffgramWriter);
       diffgramWriter.Close();
    } 
    ```

*   修补原始文件以创建新的更改文件。

    ```
    public void PatchUp(string originalFile, String diffGramFile, String OutputFile)
    {
    XmlDocument sourceDoc = new XmlDocument(new NameTable());
    sourceDoc.Load(originalFile);
    XmlTextReader diffgramReader = new XmlTextReader(diffGramFile);

    xmlpatch.Patch(sourceDoc,diffgramReader);

    XmlTextWriter output = new XmlTextWriter(OutputFile,Encoding.Unicode);
    sourceDoc.Save(output);
    output.Close();
    } 
    ```

# php - PHP替换字符串的随机单词

> ID：10704460
> 
> 赞同：1
> 
> 时间：2012-05-22T14:49:47.220
> 
> 标签：php, string, random, replace, word

我想替换一个字符串中的一个随机单词。

所以假设字符串是

```
$str = 'I like blue, blue is my favorite colour because blue is very nice and blue is pretty'; 
```

假设我想用红色替换蓝色这个词，但在随机位置只替换 2 次。

所以在一个功能完成后，输出可能就像

```
I like red, blue is my favorite colour because red is very nice and blue is pretty 
```

另一个可能是

```
I like blue, red is my favorite colour because blue is very nice and red is pretty 
```

所以我想多次替换同一个词，但每次都在不同的位置。

我想过使用 preg_match ，但是没有选项 peing 替换的单词的位置也是随机的。

有人知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:24:54.620

尽管我很讨厌将正则表达式用于表面上非常简单的事情，但为了**保证准确地替换*n***，我认为它在这里可以提供帮助，因为它允许使用轻松使用[`array_rand()`](http://php.net/manual/en/function.array-rand.php)，这正是你想要的 - 选择来自不确定长度列表的*n 个随机项目 (* **IMPROVED** )。

```
<?php

    function replace_n_occurences ($str, $search, $replace, $n) {

        // Get all occurences of $search and their offsets within the string
        $count = preg_match_all('/\b'.preg_quote($search, '/').'\b/', $str, $matches, PREG_OFFSET_CAPTURE);

        // Get string length information so we can account for replacement strings that are of a different length to the search string
        $searchLen = strlen($search);
        $diff = strlen($replace) - $searchLen;
        $offset = 0;

        // Loop $n random matches and replace them, if $n < 1 || $n > $count, replace all matches
        $toReplace = ($n < 1 || $n > $count) ? array_keys($matches[0]) : (array) array_rand($matches[0], $n);
        foreach ($toReplace as $match) {
            $str = substr($str, 0, $matches[0][$match][1] + $offset).$replace.substr($str, $matches[0][$match][1] + $searchLen + $offset);
            $offset += $diff;
        }

        return $str;

    }

    $str = 'I like blue, blue is my favorite colour because blue is very nice and blue is pretty';

    $search = 'blue';
    $replace = 'red';
    $replaceCount = 2;

    echo replace_n_occurences($str, $search, $replace, $replaceCount); 
```

[看到它工作](http://codepad.viper-7.com/tcpRsG)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:02:28.877

```
echo preg_replace_callback('/blue/', function($match) { return rand(0,100) > 50 ? $match[0] : 'red'; }, $str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T14:55:18.767

好吧，你可以使用这个算法：

1.  计算要替换字符串的随机次数
2.  将字符串分解为数组
3.  对于该数组，仅当 1 到 100 之间的随机值是 % 3 时才替换字符串出现（例如）
4.  减少在点 1 处计算的数字。
5.  重复直到数字达到 0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:03:43.047

```
<?php
$amount_to_replace = 2;
$word_to_replace = 'blue';
$new_word = 'red';

$str = 'I like blue, blue is my favorite colour because blue is very nice and blue is pretty';

$words = explode(' ', $str); //convert string to array of words
$blue_keys = array_keys($words, $word_to_replace); //get index of all $word_to_replace

if(count($blue_keys) <= $amount_to_replace) { //if there are less to replace, we don't need to randomly choose.  just replace them all
    $keys_to_replace = array_keys($blue_keys);
}
else {
    $keys_to_replace = array();
    while(count($keys_to_replace) < $amount_to_replace) { //while we have more to choose
        $replacement_key = rand(0, count($blue_keys) -1);
        if(in_array($replacement_key, $keys_to_replace)) continue; //we have already chosen to replace this word, don't add it again
        else {
            $keys_to_replace[] = $replacement_key;
        }
    }
}

foreach($keys_to_replace as $replacement_key) {
    $words[$blue_keys[$replacement_key]] = $new_word;
}

$new_str = implode(' ', $words); //convert array of words back into string
echo $new_str."\n";
?> 
```

注意我刚刚意识到这不会替换第一个蓝色，因为它作为“蓝色”输入到单词数组中，因此在 array_keys 调用中不匹配。

# sql - 我怎样才能让 NHibernate 只生成 SQL 而不执行它？

> ID：10704462
> 
> 赞同：62
> 
> 时间：2012-05-22T14:49:50.117
> 
> 标签：sql, nhibernate, fluent-nhibernate

`show_sql`我知道如何在运行时使用配置选项将 SQL 记录到 log4net/NLog/trace 窗口。

我正在寻找的是一种让`Query<T>()`NHibernate 检索生成的 SQL 的方法。

我浏览了 Persister 类、驱动程序、不同的拦截器和事件。有很多地方要看，即使缩小我的搜索范围也会有很大帮助。

* * *

## 回答 #1

> 赞同：117
> 
> 时间：2012-05-22T21:27:42.213

您可以使用以下方法在不执行的情况下获取生成的 sql 查询：

对于 NHibernate.Linq 查询：

```
public String GetGeneratedSql(System.Linq.IQueryable queryable, ISession session)
{
    var sessionImp = (ISessionImplementor) session;
    var nhLinqExpression = new NhLinqExpression(queryable.Expression, sessionImp.Factory);
    var translatorFactory = new ASTQueryTranslatorFactory();
    var translators = translatorFactory.CreateQueryTranslators(nhLinqExpression, null, false, sessionImp.EnabledFilters, sessionImp.Factory);

    return translators[0].SQLString;
} 
```

对于条件查询：

```
public String GetGeneratedSql(ICriteria criteria)
{
    var criteriaImpl = (CriteriaImpl) criteria;
    var sessionImpl = (SessionImpl) criteriaImpl.Session;
    var factory = (SessionFactoryImpl) sessionImpl.SessionFactory;
    var implementors = factory.GetImplementors(criteriaImpl.EntityOrClassName);
    var loader = new CriteriaLoader((IOuterJoinLoadable) factory.GetEntityPersister(implementors[0]), factory, criteriaImpl, implementors[0], sessionImpl.EnabledFilters);

    return loader.SqlString.ToString();
} 
```

对于 QueryOver 查询：

```
public String GetGeneratedSql(IQueryOver queryOver)
{
    return GetGeneratedSql(queryOver.UnderlyingCriteria);
} 
```

对于 Hql 查询：

```
public String GetGeneratedSql(IQuery query, ISession session)
{
    var sessionImp = (ISessionImplementor)session;
    var translatorFactory = new ASTQueryTranslatorFactory();
    var translators = translatorFactory.CreateQueryTranslators(query.QueryString, null, false, sessionImp.EnabledFilters, sessionImp.Factory);

    return translators[0].SQLString;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-04-04T14:01:21.753

对于 NHibernate 5.2，如果您想查看实际`DbCommand`准备好的查询（因此您可以检查 SQL in`cmd.CommandText`和提供的参数`cmd.Parameters`）：

```
//For LINQ
public IEnumerable<DbCommand> GetDbCommands<T>(IQueryable<T> query, ISession s)
{
    return GetDbCommands(LinqBatchItem.Create(query), s);
}

//For HQL
public IEnumerable<DbCommand> GetDbCommands(IQuery query, ISession s)
{
    return GetDbCommands(new QueryBatchItem<object>(query), s);
}

//For QueryOver
public IEnumerable<DbCommand> GetDbCommands(IQueryOver query, ISession s)
{
    return GetDbCommands(query.RootCriteria, s);
}

//For Criteria (needs to be called for root criteria)
public IEnumerable<DbCommand> GetDbCommands(ICriteria rootCriteria, ISession s)
{
    return GetDbCommands(new CriteriaBatchItem<object>(query), s);
}

//Adapted from Loader.PrepareQueryCommand
private static IEnumerable<DbCommand> GetDbCommands(IQueryBatchItem item, ISession s)
{
    var si = s.GetSessionImplementation();
    item.Init(si);
    var commands = item.GetCommands();
    foreach (var sqlCommand in commands)
    {
        //If you don't need fully prepared command sqlCommand.Query contains SQL returned by accepted answer
        var sqlString = sqlCommand.Query;
        sqlCommand.ResetParametersIndexesForTheCommand(0);
        var command = si.Batcher.PrepareQueryCommand(System.Data.CommandType.Text, sqlString, sqlCommand.ParameterTypes);
        RowSelection selection = sqlCommand.QueryParameters.RowSelection;
        if (selection != null && selection.Timeout != RowSelection.NoValue)
        {
            command.CommandTimeout = selection.Timeout;
        }

        sqlCommand.Bind(command, si);

        IDriver driver = si.Factory.ConnectionProvider.Driver;
        driver.RemoveUnusedCommandParameters(command, sqlString);
        driver.ExpandQueryParameters(command, sqlString, sqlCommand.ParameterTypes);
        yield return command;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-17T06:26:56.233

基于 NHibernate 3.4 版，linq 表达式的方法是：

```
public String GetGeneratedSql(System.Linq.IQueryable queryable, ISession session)
      {
         var sessionImp = (ISessionImplementor)session;
         var nhLinqExpression = new NhLinqExpression(queryable.Expression,              
                                     sessionImp.Factory);
         var translatorFactory = new ASTQueryTranslatorFactory();
         var translators = translatorFactory.CreateQueryTranslators(nhLinqExpression.Key, nhLinqExpression, null, false,
                                                                sessionImp.EnabledFilters, sessionImp.Factory);

         var sql = translators.First().SQLString;
         var formamttedSql = FormatStyle.Basic.Formatter.Format(sql);
         int i = 0;
         var map = ExpressionParameterVisitor.Visit(queryable.Expression, sessionImp.Factory).ToArray();
         formamttedSql = Regex.Replace(formamttedSql, @"\?", m => map[i++].Key.ToString().Replace('"', '\''));

         return formamttedSql;
      } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-05T19:50:37.290

以下是如何使用 NH 5.2 从 Hql 生成 Sql（NH 4.0.4 中出现了一个重大变化，这使得 Hql 成为最高投票解决方案的一部分）：

```
public string HqlToSql(string hql, ISession session)
{
    var sessionImp = (ISessionImplementor)session;
    var translatorFactory = new ASTQueryTranslatorFactory();
    var translators = translatorFactory.CreateQueryTranslators(new NHibernate.Hql.StringQueryExpression(hql),
         null, false, sessionImp.EnabledFilters, sessionImp.Factory);
    var hqlSqlGenerator = new HqlSqlGenerator(((QueryTranslatorImpl)translators[0]).SqlAST, sessionImp.Factory);
    hqlSqlGenerator.Generate();
    return hqlSqlGenerator.Sql.ToString();
} 
```

# python - Python：我应该在这里使用委托还是继承？

> ID：10704465
> 
> 赞同：4
> 
> 时间：2012-05-22T14:49:55.240
> 
> 标签：python, oop, inheritance, python-3.x, delegation

我正在考虑是否应该使用继承或委托来实现一种包装类。我的问题是这样的：假设我有一个名为`Python`.

```
class Python:

    def __init__(self):
        ...

    def snake(self):
        """ Make python snake through the forest"""
        ...

    def sleep(self):
        """ Let python sleep """
        ... 
```

...以及更多的行为。现在我有一个需要 a 的现有代码`Anaconda`，它几乎像 a `Python`，但略有不同：一些成员的名称和参数略有不同，其他成员添加了新功能。我真的很想重用`Python`. 因此我可以通过继承来做到这一点：

```
class Anaconda(Python):

    def __init__(self):
        Python.__init__(self)

    def wriggle(self):
        """Different name, same thing"""
        Python.snake(self)

    def devourCrocodile(self, croc):
        """ Python can't do this"""
        ... 
```

当然我也可以打电话`Anaconda().sleep()`。但这里有一个问题：`PythonFactory`我需要使用一个。

```
class PythonFactory:

    def makeSpecialPython(self):
        """ Do a lot of complicated work to produce a special python"""
        …
        return python 
```

我希望它制作 a`Python`然后我应该能够将其转换为 a `Anaconda`：

```
myAnaconda = Anaconda(PythonFactory().makeSpecialPython()) 
```

在这种情况下，授权将是可行的方法。（我不知道这是否可以使用继承来完成）：

```
class Anaconda:

    def __init__(self, python):
        self.python = python

    def wriggle(self):
        self.python.wriggle()

    def devourCrocodile(self, croc):
        ... 
```

但是有代表团，我不能打电话`Anaconda().sleep()`。

所以，如果你还在我身边，我的问题是：

A）在与此类似的情况下，我需要

*   添加一些功能
*   重命名一些功能
*   否则使用“基类”功能
*   将“基类”对象转换为“子类”对象

我应该使用继承还是委托？（或者是其他东西？）

B）一个优雅的解决方案是使用委托加上一些特殊的方法来转发所有`Anaconda`不响应其实例的属性和方法访问`Python`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T14:58:35.943

> B）一个优雅的解决方案是使用委托加上一些特殊的方法来转发 Anaconda 不响应其 Python 实例的所有属性和方法访问。

这在 Python 中很简单，只需定义`__getattr__`：

```
class Anaconda:

    def __init__(self, python):
        self.python = python

    def wriggle(self):
        self.python.snake()

    def devourCrocodile(self, croc):
        ...

    def __getattr__(self, name):
        return getattr(self.python, name) 
```

请参阅 Python 文档[`__getattr__`](http://docs.python.org/reference/datamodel.html#object.__getattr__)

# iphone - UIWebView 显示原始 html 标签

> ID：10704467
> 
> 赞同：0
> 
> 时间：2012-05-22T14:49:55.577
> 
> 标签：iphone, ipad, ios5, uiwebview

我正在开发一个 iPad 应用程序（iOS 5 ARC），它将使用基于 php 的 web 服务显示来自服务器的线程数据。

从服务器获取 JSON 字典数据后，我`UIWebView`用来显示数据，但它显示的是原始 HTML 标记。

请建议如何解决它。

我正在使用的代码：

```
[cell.webVwPostedContent loadHTMLString:[dic objectForKey:kpost_shortDesc] baseURL:nil]; 
```

下面是我从服务器获取并在 Web 视图中显示的 html 数据字符串：

```
<u><em><strong>http:\/\/www.msn.com\/<\/strong><\/em><\/u><br \/>\r\n
By clicking &quot;OK&quot;, you agree to the Microsoft Service Agreement 
and Privacy Statement. You&#39;ll get future updates to Bing Bar and other 
Microsoft products from Microsoft Update. This software may also download 
and install some updates automatically. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:13:33.827

这里的问题是你的字符串，即

```
<u><em><strong>http:\/\/www.msn.com\/<\/strong><\/em><\/u><br \/> 
```

应该是这样的

```
<u><em><strong>http://www.msn.com/</strong></em></u><br/> 
```

该字符`\/`不是任何转义序列。因为`/`您不需要任何转义序列。只需`/`输入您的响应字符串。我建议更改您的服务器生成的响应。

* * *

我试过

```
[webView loadHTMLString:@"<u><em><strong>http:\/\/www.msn.com\/<\/strong><\/em><\/u><br \/>\r\n\
     By clicking &quot;OK&quot;, you agree to the Microsoft Service Agreement \
     and Privacy Statement. You&#39;ll get future updates to Bing Bar and other \
     Microsoft products from Microsoft Update. This software may also download \
     and install some updates automatically." baseURL:nil]; 
```

这个对我有用

# mobile - 移动平台上的 Web 应用程序

> ID：10704468
> 
> 赞同：1
> 
> 时间：2012-05-22T14:49:58.410
> 
> 标签：mobile, sencha-touch-2

首先，我的问题听起来像是重复的，但我在这个论坛上经历了很多问题，但没有找到我正在寻找的答案。

我有一个使用 Java、struts2 和 jsps 构建的现有 Web 应用程序。我希望网站是移动友好的。我现在不打算开发原生应用程序。我希望移动网站具有类似原生应用的外观。因此，如果用户在移动设备上访问浏览器并访问我的网站，它应该具有原生的外观和感觉。因此，我首先查看了 Sencha touch 2。我是移动开发的新手，希望能帮助我了解如何评估 Sencha touch 2 作为一个可行的选择。我从示例中看到，在 ST 中，UI 主要是使用 ExtJs javascript 构建的。

我的问题如下

> 1.  有没有办法将我现有的 jsps 和 html 移植到移动视图，而无需从头开始构建它们？
>     
>     
> 2.  由于该站点的 css 目前是为“屏幕”媒体构建的，因此显然必须解决这个问题，但是 Sencha Touch 是否提供使用现有 css 并为移动设备定制它的任何功能？

感谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:20:23.897

不幸的是，您的第一个问题的答案是否定的。

Java/JSP 和 Javascript 本质上是完全不同的。没有约定可以在这两者之间进行转换。

对于第二个，SASS/SCSS 可能是您正在寻找的东西：[http](http://sass-lang.com/) ://sass-lang.com/ 。这是因为 Sencha Touch 组件的 CSS 属性是通过 SCSS 文件构建的。你可以利用这些。有关更多想法，请参阅：[http ://www.sencha.com/blog/an-introduction-to-theming-sencha-touch](http://www.sencha.com/blog/an-introduction-to-theming-sencha-touch)

# sql - Oracle 中的分层查询

> ID：10704472
> 
> 赞同：2
> 
> 时间：2012-05-22T14:50:09.080
> 
> 标签：sql, oracle, hierarchical-data

我在 Oracle11g 中有一个结构类似于 (id, parent_id) 的表。

```
id    parent_id
---------------
1     (null)
2     (null)
3     1
4     3
5     3
6     2
7     2 
```

我想查询它以获取分层链接到每个 ID 的所有行，因此结果应该是：

```
root_id  id    parent_id
------------------------
1        3     1
1        4     3
1        5     3
2        6     2
2        7     2
3        4     3
3        5     3 
```

我一直在与`connect by`and苦苦挣扎`start with`很长一段时间，而我所能得到的只是我想要的查询结果的一小部分，例如：

```
select connect_by_root(id) root_id, id, parent_id from my-table
start with id=1
connect by prior id = parent_id 
```

我不想使用任何`for`循环来获得完整的结果。

任何的想法 ？

最好的问候，杰罗姆·勒弗雷尔

PS：在第一次回答后编辑，注意到我忘记了一些我想要的结果......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:01:47.130

您发布的查询缺少该`from`子句并在 中留下了一个下划线`connect_by_root`，但我认为这些实际上并不是您的问题的根源。

以下查询为您提供了您正在寻找的结果：

```
select * from (
   select connect_by_root(id) root_id, id, parent_id
   from test1
   start with parent_id is null
   connect by prior id = parent_id)
where root_id <> id 
```

核心问题是您指定了一个特定的值开始，而不是指定一种方法来识别根行。更改`id = 1`为`parent_id is null`允许返回表的全部内容。

我还添加了外部查询以从结果集中过滤根行，这在您的问题中没有提到，但显示在您想要的结果中。

[SQL 小提琴示例](http://sqlfiddle.com/#!4/da2e9/6)

* * *

评论回复：

在提供的版本中，您确实获得了 的后代`id = 3`，但不是以这种方式`3`是根。这是因为我们从绝对根开始。解决这个问题很容易，只需省略`start with`子句：

```
SELECT *
FROM
  (SELECT connect_by_root(id) root_id,
          id,
          parent_id
   FROM test1
CONNECT BY
   PRIOR id = parent_id)
WHERE root_id <> id 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!4/da2e9/9)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:00:48.320

试试这个：

```
select connect_by_root(id) root_id, id, parent_id
from your_table
start with parent_id is null
connect by prior id = parent_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-20T12:54:25.910

它会给你你想要的确切结果：

```
select connect_by_root(id) as root, id, parent_id
from test1
connect by prior id=parent_id
start with parent_id is not null; 
```

# visual-foxpro - 如何更新空闲表中索引列的值？

> ID：10704473
> 
> 赞同：0
> 
> 时间：2012-05-22T14:50:11.723
> 
> 标签：visual-foxpro

我支持用 Visual FoxPro 9 编写的遗留应用程序，我需要一些指导来了解如何修改空闲表的索引列中的值。

表定义如下： ![表定义](../Images/5d5f6bb835cdd07d00d83cd9469bf52c.png)

如果“nversion”列包含特定值（例如“22.30”），我想将“lrecordno”列的值增加 1,000。

完成此操作的正确步骤顺序是什么？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:41:11.287

如果您使用 SQL 在 Visual FoxPro 中工作：

```
USE tableName SHARED
UPDATE tableName SET lrecordno = lrecordno + 1000 WHERE nversion = 22.30
USE 
```

或者使用 FoxPro`REPLACE`命令：

```
USE tableName SHARED
REPLACE lrecordno WITH lrecordno + 1000 FOR nversion = 22.30
USE 
```

`WHERE`这些将影响与or`FOR`子句匹配的所有记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T20:35:17.897

您没有显示足够的信息来表明您想要做的事情是否安全。如果 iRecordNo 是表的主键或候选键，则以编程方式修改其值可能会导致错误。

那么，该字段有什么样的索引呢？如果它是主要的或候选的，它首先如何获得它的值？从您显示的图中，它不是 AutoIncrementing。

添马舰

# vbscript - 如何在 VS 2010 Professional 中调试 VBScript？

> ID：10704478
> 
> 赞同：1
> 
> 时间：2012-05-22T14:50:23.730
> 
> 标签：vbscript

我有一个从 SQL 作业运行的 VBScript 文件抱怨语法错误。我想调试文件。我确定必须有一种方法可以从 vs 2010 调试它。有人可以帮助我吗？我试图添加一个 makeafile 项目，但我没有找到要添加到 makeafile 项目的 vbscript 文件。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:18:23.070

在任何语言中使用 SQL 时的最佳实践是首先将查询组装为字符串，记录此字符串，如果代码失败，您会选择可疑查询并在工具中以交互方式运行它，在该工具中您会得到正确的 SQL 错误，并且可以轻松调整查询直到正确。然后修改您的代码以获取此查询，您就完成了。我与 Oracle 合作，那里的工具是 Sql*Plus。

```
sql = "select * from table where id=" & id
log(sql) 'a routine for logging you have to provide, in vbscript you could just wscript.echo
oConn.execute(sql) 'you get your error here 
```

# emacs - 在 Emacs 中从行首到第 n 个字符

> ID：10704483
> 
> 赞同：1
> 
> 时间：2012-05-22T14:50:40.803
> 
> 标签：emacs

我最近开始使用***emacs***来编写我的程序代码。我想知道是否有一个“命令”可以**直接**从行首到达第 n 个字符而不使用任何技巧（如重复 n 次 `C-f`）。我简要地浏览了emacs手册，但没有找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:01:42.640

对于 n == 12

`C-u``12``C-f`

或者

`C-1``C-2``C-f`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T15:31:53.207

> 我简要地浏览了emacs手册，但没有找到任何东西。

`C-h``r``C-s` `repeat`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T12:33:25.457

*（评论太长了）*

您评论说您不想使用命令组合，但是... Emacs 的一个特点是通过组合功能很容易“扩展”它。您经常重复某些任务并希望将其自动化？编写一个函数来解决您的问题并将其绑定到一个键。或者录制一个宏并重播（如果需要，可以将其绑定到一个键）。

现在到*第n个*字符，我这样做的方式取决于我所追求的......

*   通常，如果我想转到“缩进”，那么我会使用绑定到*Ca*的便捷函数（我可能从 SO 上的某个人那里得到），该函数在行首或缩进之间循环：

    ```
    (defun beginning-of-line-or-indentation ()

    "move to beginning of line, or indentation"
     (interactive)
     (if (bolp)
         (back-to-indentation)
       (beginning-of-line))) 
    ```

*   现在，如果我想转到特定字符，通常我会使用*isearch-forward*（默认绑定到*Cs*），然后输入我想要的内容。我一直在使用它，它可以节省大量时间。我看到很多关于人们使用 Emacs（或其他东西）并将光标“一直”移动到一个可以通过执行 Cs 然后输入一两个字符就可以到达的位置的视频，这总是让我大吃一惊。它当然可以跨多行工作，您可以通过调用*isearch-backward 向后*搜索（默认绑定到*Cr*）。

*   否则*，通用参数*（Cu）很好，但如果您不在行首，它就不起作用。

如果由于某种原因这是您需要经常做的事情，那么编写一个调用*行*首的函数然后向前移动您想要的字符数是微不足道的......现在当然这是 Emacs，所以这个函数可能已经存在 ： ）

# php - 比较两组文件数组

> ID：10704485
> 
> 赞同：0
> 
> 时间：2012-05-22T14:50:59.233
> 
> 标签：php, html

我是 php 新手，我正在创建一个图片库。我编写的代码工作正常，但我需要将文件上传到服务器。画廊通过将缩略图加载到页面上来工作，当单击缩略图时，将打开一个花式框弹出窗口，并将显示缩略图的高分辨率版本。

文件夹结构中有 2 张图像。照片位于 /gfx/photos 中，缩略图位于 /gfx/photos/thumbs 中。我正在尝试编写一个 PHP 脚本来检查新照片是否已添加到 /gfx/photos/ 文件夹中，并自动在 /gfx/photos/thumbs 文件夹中创建缩略图。我可以做调整大小的部分，但我需要帮助比较 2 个文件。缩略图和照片具有完全相同的名称，它们只是位于不同的位置。

我有一个像这样工作的图像数组：

```
<?PHP
    $dir = "gfx/photos/thumbs";
    $files = scandir($dir);

    foreach ($files as $key => $value);
    $result = count($files);
    for ($i = 0; $i < $result; $i++) {
      /* loads appropriate code for every file... */
    }

?> 
```

这段代码可以用来检查文件还是我应该使用不同的代码。

感谢您的帮助人们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:00:16.800

这是获得此结果的一种简单方法，只要目录不填满数百万张图像就可以很好地工作，但如果您能够拥有数百万张图像，您可能应该将它们分解为更小的目录。

由于 scandir 返回一个整数索引数组，您通常必须进行一些数组搜索才能找到您的图像。然而。如果您使用[array_flip](http://php.net/manual/en/function.array-flip.php)执行此操作：

```
$image_name = "some_image.jpg";

$dir = "gfx/photos/thumbs";
$files = scandir($dir);

$files = array_flip($files); // makes the values = to keys and keys = values

// now you have an 0(1) look up table that you can simply check if the key exists
// which, now that we flipped the array, are the file names
if(!isset($files[$image_name])){
    // create the thumbnail etc
} 
```

# php - PHP 类和函数可选参数

> ID：10704487
> 
> 赞同：1
> 
> 时间：2012-05-22T14:51:12.730
> 
> 标签：php

这不是要在 PHP 中工作吗？

```
<?php
function shout($mute="", $message="") {
    echo $message;
}

shout($message = "Boo");
?> 
```

我知道这是一个糟糕的例子，但它明白了我的意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T14:54:13.353

不，这不起作用，函数参数顺序是严格的，不能被操纵。

您可以这样做：

```
shout(null, 'Boo'); 
```

或者重构你的函数来接受一个数组：

```
function shout($args) {
    echo $args['message'];
}

$args = array('message' => 'boo');
shout($args); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T14:53:20.500

```
<?php
function shout($mute="", $message="") {
    echo $message;
}

shout(null, "Boo"); //echo's "Boo"
?> 
```

您必须以正确的顺序传入正确的参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:04:14.877

在php中传递函数参数是常规的，

假设您有这样的函数定义，`function myfunc($arg='something or null' , $arg)`这是错误的方法，因为我们必须像这样将常量放在函数的右侧

```
function myfunc($arg, $arg='something or null'){} 
```

当您调用函数时，请确保您传递了正确的参数，即`myfunc('test')`

如果你描述了 $arg='null' 那么你不需要从你的函数调用中传递任何东西，因为 null 是一个值，而空字符串什么都不是。

所以在你的情况下你必须这样做`function yourfunction('value1','value2')`

# android - 来自 ArrayAdapter 的奇怪行为

> ID：10704488
> 
> 赞同：0
> 
> 时间：2012-05-22T14:51:13.573
> 
> 标签：android, android-layout

我有一个包含两个类的 android 测试项目：

1.  `AdapterTestActivity`扩展`ListActivity`-> [http://pastebin.com/BreRSPj1](http://pastebin.com/BreRSPj1)
2.  `MyAdapter`扩展`ArrayAdapter`-> [http://pastebin.com/YUK4CRQq](http://pastebin.com/YUK4CRQq)

从我得到这个打印输出 `System.out.println()`：`MyAdapter`

```
05-22 16:43:03.942: I/System.out(17943): test 1
05-22 16:43:03.942: I/System.out(17943): test 2
05-22 16:43:03.950: I/System.out(17943): test 3
05-22 16:43:04.098: I/System.out(17943): test 1 
05-22 16:43:04.098: I/System.out(17943): test 2
05-22 16:43:04.098: I/System.out(17943): test 3
05-22 16:43:04.106: I/System.out(17943): test 1
05-22 16:43:04.106: I/System.out(17943): test 2
05-22 16:43:04.106: I/System.out(17943): test 3 
```

但我期待的是：

```
test 1
test 2
test 3 
```

有谁知道为什么？- 谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:07:01.810

这不是一个奇怪的行为，但它是框架的一个实现细节。不能保证调用哪个或顺序或调用多少时间`getView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:11:38.790

对于您的第二个问题，您可能需要添加：

```
 _adapter.notifyDataSetChanged(); 
```

添加“测试 4”后

# javascript - Javascript 获得 MIME 类型支持

> ID：10704489
> 
> 赞同：3
> 
> 时间：2012-05-22T14:51:16.740
> 
> 标签：javascript, mime-types, mime

我找到了如何从 navigator.mimeTypes 获取 mimetypes：

```
function GetMimeTypes() {
    var message = "";
    var mimes = navigator.mimeTypes;
    for (var i = 0; i < mimes.length; i++) {
        message += "<b>" + mimes[i].type + "</b> : " + mimes[i].description + "/" + mimes[i].suffixes + "<br />";
    }

    var info = document.getElementById("mime");
    info.innerHTML = message;
}​ 
```

但它不返回 text/html、text/css 或 text/javascript 等类型。我发现：很自然，浏览器本身会处理几种 MIME 类型，例如 text/javascript（JavaScript 文件）、text/css（CSS 样式表）、image/gif（GIF 编码的图像）、image/jpegimages）、text /xml（XML 文件）和 text/html（HTML 文件）。然而，许多其他的由插件和检查器处理 navigator.mimeTypes[“text/html”] ！= null，我怎样才能得到这些列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:13:39.570

在 Google Chrome/Firefox 中使用您的代码，我得到：

```
application/vnd.chromium.remoting-viewer : /
pepper-application/x-chromoting : /
application/x-nacl : Native Client Executable/nexe
application/pdf : Portable Document Format/pdf
application/x-google-chrome-print-preview-pdf : Portable Document Format/pdf
application/x-shockwave-flash : Adobe Flash movie/swf
...
etc. 
```

如果您使用的是 Internet Explorer，那么很遗憾不支持 navigator.mimeTypes。

请参阅以下链接以确认您**无法**从 IE 获取 mimetypes 列表：http: [//www.howtocreate.co.uk/wrongWithIE/? chapter=navigator.plugins](http://www.howtocreate.co.uk/wrongWithIE/?chapter=navigator.plugins)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-02-25T02:55:02.640

[Filetypes.js](https://github.com/stretchr/filetypes.js)是一个通过制作跨浏览器 API 来获取 mime 类型、描述和文件扩展名来解决这个问题的项目。

# php - 表单没有向查询字符串发送任何数据

> ID：10704491
> 
> 赞同：3
> 
> 时间：2012-05-22T14:51:21.793
> 
> 标签：php, html, forms, query-string

我在这里束手无策，我很肯定这是一些荒谬的打字错误，或者我忘记写点什么了。

无论如何，我正在尝试将数据从 twitter 引导模式内的表单发送到使用 PHPMailer 脚本的名为“processed.php”的文件。但是，当我提交表单时，没有数据传递给查询字符串，url 只是更改为“/processed.php？”

如果有人能对此有所了解，我将非常感激。

这是代码：

HTML 第一：

```
 <div class="modal-body">
        <form id="send-msg" method="GET" action="processed.php">
            <fieldset>
                <div class="control-group">
                    <label class="control-label" for="inputNavn">Navn:</label>
                    <div class="controls">
                        <input type="text" class="input-medium required" id="inputNavn">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputTlf">Telefon nummer:</label>
                    <div class="controls">
                        <input type="text" class="input-medium required" id="inputTlf">
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputMsg">Besked:</label>
                    <div class="controls">
                        <textarea class="input-large required" id="inputMsg" rows="3"></textarea>
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn btn-primary btn-large" id="inputSend" href="#" rel="popover" data-content="Vi vender tilbage hurtigst muligt." data-original-title="Send besked" data-loading-text="Sender besked…">Send besked</button>
                    </div>
                </div>
            </fieldset>
        </form>
        <div id="results" class="alert alert-info span2">
            <p>Udfyld venligst alle felter.</p>
        </div>
    </div> 
```

现在的PHP：

```
<?php

$navn= $_REQUEST['inputNavn'];
$tlf= $_REQUEST['inputTlf'];
$besked= $_REQUEST['inputMsg'];

require_once('PHPMailer/class.phpmailer.php');
...(The rest is just the PHPMailer script)

echo $navn;
?> 
```

无论如何，我在查询字符串中没有得到任何东西。希望可以有人帮帮我。

提前非常感谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T14:55:28.767

我认为你需要添加一个`name`属性，`input`以便提交值，例如

```
<input type="text" class="input-medium required" id="inputNavn"> 
```

应该

```
<input type="text" class="input-medium required" id="inputNavn" name="inputNavn"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T14:57:49.357

您忘记为表单元素设置名称属性。

```
<input type="text" class="input-medium required" id="inputNavn" name="inputNavn"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:01:56.890

正如 Smirkin Gherkin 所说，有必要指定一个名称。

Id 指的是作为对象的输入。这意味着，您可以使用 javascript 或其他语言对输入进行更新或执行某些操作。

名称是服务器语言用来访问该输入字段上的数据的引用。

如果我没记错的话（这是我的提示，可能是错误的）：您可以将javascript与输入的名称一起使用，但您不能将php与输入的id一起使用

# javascript - 我可以有 2 个相互重叠的 JQuery 函数，在一页中运行吗？

> ID：10704498
> 
> 赞同：0
> 
> 时间：2012-05-22T14:51:36.647
> 
> 标签：javascript, jquery, html, webpage

嗨，我在 html 页面中实现了一些问题 2 jquery 这是我使用的查询：

```
<script language="Javascript" type="text/javascript" src="js/jquery.blinds-0.9.js"></script>

 <script type="text/javascript">                  //running the script for blinds
    $(window).load(function () {
            // start the slideshow
    $('.slideshow').blinds();
    })
    </script>

<script language="Javascript" type="text/javascript" src="jquery.min.js"></script>
<script language="Javascript" type="text/javascript" src="jquery-ui.min.js"></script>

<script type="text/javascript">              //running the script for accordion
$(document).ready(function() {
$("#accordion").accordion();
});
</script> 
```

问题是如果我在 html 中实现它们（手风琴或百叶窗）只有 1 个脚本可以运行，有谁知道如何修改它们以便所有 jquery 都可以运行，并且我可以在整个页面中重用它们？

例如，如果我将手风琴 js 引用添加到头部，百叶窗将不会运行。

将不胜感激，在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:56:08.523

只有一个运行，因为另一个是在加载 jQuery 之前执行的

尝试：

```
<script src="jquery.min.js"></script>              <!--jQuery-->
<script src="jquery-ui.min.js"></script>           <!--jQueryUI plugin-->
<script src="js/jquery.blinds-0.9.js"></script>    <!--blinds plugin-->
<script>                                           <!--your scripts-->
    $(function() {
        $('#accordion').accordion();
        $('.slideshow').blinds();
    });
</script> 
```

并且[jQueryUI 内置了百叶窗效果](http://jqueryui.com/demos/show/)。如果效果相同，您可能不需要百叶窗插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:05:56.397

首先，尝试清理调用脚本的顺序。让 jQuery 首先加载，然后所有其他库和您的自定义脚本最后加载。您可能还希望将其保存到外部 JS 文件中以改进维护。

```
<script type="text/javascript" src="js/jquery.blinds-0.9.js"></script>
<script type="text/javascript" src="jquery-ui.min.js"></script>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="path/to/your/javascript/foo.js"></script> 
```

此外，该属性`language="Javascript"`是多余的，可以安全地删除。

在`foo.js`文件中，使用以下内容：

```
$(document).ready(function () {
    // start the slideshow & accordion
    $('.slideshow').blinds();
    $("#accordion").accordion();
}); 
```

这里的区别是您使用`$(document).ready()`而不是`$(window).load()`. 此外，您只需要调用`$(document).ready()`一次，而不是两次。

希望有帮助。

# android - Android：为什么SDK不提供程序员轻松添加WiFi配置文件（EAP）？

> ID：10704503
> 
> 赞同：6
> 
> 时间：2012-05-22T14:51:51.253
> 
> 标签：android, sdk, android-wifi

我正在尝试以编程方式在 Android（WPA-Enterprise、WPA2-Enterprise）上创建企业 WiFi 配置文件。

我见过一个相当著名的解决方案，即使用反射来实现这一点。据我了解，如果必须以这种间接的方式完成，包括获得对已被拒绝访问的 API 部分的访问权限，则必须有充分的理由。

这是否意味着 Google 不希望开发人员能够以编程方式配置 WiFi 设置？如果是这样，这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T22:06:33.807

Android JellyBean 4.3 已将此功能添加到其 API：

[http://developer.android.com/reference/android/net/wifi/WifiEnterpriseConfig.html](http://developer.android.com/reference/android/net/wifi/WifiEnterpriseConfig.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T19:24:28.393

I have written a class with a static method that will allow you to do this. Here it is. You will need to pass your SSID, Username, and Password into the method. There are some other options you can set if you need to set the EAP to TLS or PEAP. It should be noted that this code is base off of the code here: [How to programmatically create and read WEP/EAP WiFi configurations in Android?](https://stackoverflow.com/questions/4374862/how-to-programatically-create-and-read-wep-eap-wifi-configurations-in-android/4375874#4375874). The difference being that my code allows you to adjust the IP configuration settings and the proxy settings. Using this code you can automatically connect to a wifi network with WPA_EAP settings.

Hope this helps:

```
import java.lang.reflect.Field;
import java.lang.reflect.Method;

import android.net.wifi.WifiConfiguration;
import android.util.Log;

public class WPAConfiguration {

    private static final String INT_PRIVATE_KEY = "private_key";
    private static final String INT_PHASE2 = "phase2";
    private static final String INT_PASSWORD = "password";
    private static final String INT_IDENTITY = "identity";
    private static final String INT_EAP = "eap";
    private static final String INT_CLIENT_CERT = "client_cert";
    private static final String INT_CA_CERT = "ca_cert";
    private static final String INT_ANONYMOUS_IDENTITY = "anonymous_identity";
    private static final String INT_ENTERPRISEFIELD_NAME = "android.net.wifi.WifiConfiguration$EnterpriseField";
    private static final String INT_IPASSIGNMENT_NAME = "android.net.wifi.WifiConfiguration$IpAssignment"; 
    private static final String INT_PROXYSETTINGS_NAME = "android.net.wifi.WifiConfiguration$ProxySettings";
    //change this to TLS,PEAP, or other options that are listed when you connect via a device
    private static final String ENTERPRISE_EAP = "PEAP";
    private static final String INT_IP_ASSIGNMENT = "ipAssignment";
    private static final String INT_PROXY_SETTINGS = "proxySettings";

    public static WifiConfiguration setWifiConfigurations(WifiConfiguration wifiConfig, String SSID, String userName, String userPass)
    {
        /*define basic configuration settings*/

        /*Access Point*/
        wifiConfig.SSID = SSID; 
        wifiConfig.networkId = 0; 

        /*Priority*/
        wifiConfig.priority = 0; 

        /*Enable Hidden SSID's*/
        wifiConfig.hiddenSSID = false; 

        /*Key Management*/
        wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.IEEE8021X);
        wifiConfig.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.WPA_EAP);

        /*Set Group Ciphers*/

        wifiConfig.allowedGroupCiphers.clear(); 
        wifiConfig.allowedGroupCiphers.clear();
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.CCMP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.TKIP);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP104);
        wifiConfig.allowedGroupCiphers.set(WifiConfiguration.GroupCipher.WEP40);

         /*Set Pairwise Ciphers*/

        wifiConfig.allowedPairwiseCiphers.clear();
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.CCMP);
        wifiConfig.allowedPairwiseCiphers.set(WifiConfiguration.PairwiseCipher.TKIP);

        /*Set Protocols*/

        wifiConfig.allowedProtocols.clear();
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.RSN);
        wifiConfig.allowedProtocols.set(WifiConfiguration.Protocol.WPA);

        /*Set Enterprise Settings Using Reflection*/
        try
        {
            Class<?> wifiEnterpriseField = null; 
            Class<?> wifiIpAssignmentField = null; 
            Class<?> wifiProxySettingsField = null; 

            boolean enterpriseFieldType = true; 
            boolean ipAssignmentFieldType = true; 
            boolean proxySettingsFieldType = true; 

            Field anonymousId = null, caCert = null, clientCert = null, eap = null, identity = null, password = null, phase2 = null, privateKey = null, ipAssignment = null, proxy = null; 

            Method setValue = null; 

            Class<?>[] wifiClasses = WifiConfiguration.class.getClasses(); 

            /*Get Enterprise/IP Assignment/Proxy Setting Field Class to Modify*/
            for(Class<?> wifiClass : wifiClasses)
            {
                if(wifiClass.getName().equals(INT_ENTERPRISEFIELD_NAME))
                {
                    wifiEnterpriseField = wifiClass; 
                }
                else if(wifiClass.getName().equals(INT_IPASSIGNMENT_NAME))
                {
                    wifiIpAssignmentField = wifiClass; 
                }
                else if(wifiClass.getName().equals(INT_PROXYSETTINGS_NAME))
                {
                    wifiProxySettingsField = wifiClass; 
                }
            }

            /*Certain OS (Cupcake & Doughnut) access the enterprise field directly*/
            if(wifiEnterpriseField == null)
            {
                enterpriseFieldType = false; 
            }
            if(wifiIpAssignmentField == null)
            {
                ipAssignmentFieldType = false; 
            }
            if(wifiProxySettingsField == null)
            {
                proxySettingsFieldType = false; 
            }

            /*Get Fields*/
            Log.d("Enterprise Setting", "Getting Fields "); 
            Field[] wifiFields = WifiConfiguration.class.getFields();
            for(Field wifiField : wifiFields)
            {
                if(wifiField.getName().equals(INT_ANONYMOUS_IDENTITY))
                {
                    anonymousId = wifiField;
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField); 
                }
                else if(wifiField.getName().equals(INT_CA_CERT))
                {
                    caCert = wifiField;
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_CLIENT_CERT))
                {
                    clientCert = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_EAP))
                {
                    eap = wifiField;
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_IDENTITY))
                {
                    identity = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_PASSWORD))
                {
                    password = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_PHASE2))
                {
                    phase2 = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_PRIVATE_KEY))
                {
                    privateKey = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_IP_ASSIGNMENT))
                {
                    ipAssignment = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }
                else if(wifiField.getName().equals(INT_PROXY_SETTINGS))
                {
                    proxy = wifiField; 
                    Log.d("Enterprise Setting", "Getting Field: " + wifiField);
                }

            }

            /*Get method to set value of enterprise fields*/
            if(enterpriseFieldType)
            {
                for(Method method : wifiEnterpriseField.getMethods())
                {
                    Log.d("Get Methods", "Enterprise Method: " + method);
                    if(method.getName().trim().equals("setValue"))
                    {
                        setValue = method; 
                        break;  
                    }
                }
            }

            /*Set EAP*/
            if(enterpriseFieldType)
            {
                setValue.invoke(eap.get(wifiConfig), ENTERPRISE_EAP);
                Log.d("Enterprise Setting", "Setting " + ENTERPRISE_EAP); 
            }
            else
            {
                eap.set(wifiConfig, ENTERPRISE_EAP); 
            }

            /*Set Identity*/
            if(enterpriseFieldType)
            {
                setValue.invoke(identity.get(wifiConfig), userName); 
                Log.d("Enterprise Setting", "Setting " + userName); 
            }
            else
            {
                identity.set(wifiConfig, userName); 
            }

            /*Set user password*/
            if(enterpriseFieldType)
            {
                setValue.invoke(password.get(wifiConfig), userPass); 
                Log.d("Enterprise Setting", "Setting " + userPass); 
            }
            else
            {
                password.set(wifiConfig, userPass); 
            }

            /*Set IP Protocol*/
            if(ipAssignmentFieldType)
            {
                /*Change the literal string in here to change the value of obtaining and IP address*/
                ipAssignment.set(wifiConfig, Enum.valueOf((Class<Enum>) ipAssignment.getType().asSubclass(Enum.class), "DHCP")); 
                Log.d("Enterprise Setting", "Setting " + ipAssignment); 
            }
            else
            {
                ipAssignment.set(wifiConfig, "DHCP"); 
            }

            /*Set Proxy Protocol*/
            if(proxySettingsFieldType)
            {
                /*Change the literal string in here to change the value of proxy settingss*/
                proxy.set(wifiConfig, Enum.valueOf((Class<Enum>) proxy.getType().asSubclass(Enum.class), "NONE"));
                Log.d("Enterprise Setting", "Setting " + proxy); 
            }
            else
            {
                proxy.set(wifiConfig, "NONE"); 
            }

        }
        catch(Exception e)
        {
            Log.e("ERROR!!!", "Error: " + e);

        }
        Log.d("WIFI", "Configuration Settings " + wifiConfig.toString()); 
        return wifiConfig;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:14:31.407

也许我在问题或细节中遗漏了一些东西，因为我自己不需要这样做，但是[`WifiManager`](http://developer.android.com/reference/android/net/wifi/WifiManager.html)and[`WifiConfiguration`](http://developer.android.com/reference/android/net/wifi/WifiConfiguration.html)类不能满足你的需要吗？例如：

```
WifiManager wMan = getSystemService(Context.WIFI_SERVICE);
WifiConfiguration config = new WifiConfiguration();

config.SSID = "your ssid";
//continue setting up the configuration

wMan.addNetwork(config); 
```

编辑：您指出的答案仅对 EAP 配置使用反射（通常使用 WPA-Enterprise 或 WPA2-Enterprise 安全性的连接）。对于典型的连接，您不必使用反射。

# asp.net - 在 asp.net 中丢失会话变量

> ID：10704504
> 
> 赞同：0
> 
> 时间：2012-05-22T14:51:53.517
> 
> 标签：asp.net, vb.net

我一直在研究这个问题并试图找到解决这个问题的方法。当我创建会话变量然后执行 response.redirect() 时，我丢失了会话变量。有没有人可以解决这个问题。我尝试了以下方法，但仍然没有成功。

```
response.redirect("site", false)
server.transfer("site") 
```

**编辑**

这是我的代码：

```
Session("Config") = drop_config.SelectedValue
Session("Weight") = radOutput.SelectedValue
Session("QNHUnits") = radQNH.SelectedValue

Response.Redirect("test.aspx") 
```

注意：我看到这只发生在 IE 而不是 Fire Fox

# macos - Quartz JobStore：JobPersistenceException：无法检索触发器：ClassNotFoundException

> ID：10704509
> 
> 赞同：4
> 
> 时间：2012-05-22T14:52:06.693
> 
> 标签：macos, spring, glassfish-3, quartz-scheduler, classnotfoundexception

我希望你们中的一个可爱的人能够帮助我解决这个问题，因为我已经花了很多时间试图让一切都变得美好！

我已经将问题追溯到 Classloading，并且能够看到当 Quartz 尝试从 jobStore (jobStoreCMT) 反序列化 jobDetail 时，使用的 Classloader 不包含我的任何应用程序类，并且仅包含在EARs 库文件夹。

所以......我显然正在使用应用程序服务器，在这种情况下尝试针对 Glassfish 3.1.1/3.1.2

尝试使用 Spring 3.1.0.RELEASE 对抗 Quartz 1.8.6/2.1.5

弹簧/石英配置：

```
<bean id="schedulerFactoryBean" class="org.springframework.scheduling.quartz.SchedulerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="overwriteExistingJobs" value="true" />

    <property name="triggers">
        <list>
            <ref bean="notificationEmailsSimpleTrigger" />
        </list>
    </property>

    <property name="quartzProperties">
        <props>
            <prop key="org.quartz.scheduler.instanceName">QuartzScheduler</prop>
            <prop key="org.quartz.scheduler.instanceId">AUTO</prop>

            <prop key="org.quartz.threadPool.class">org.quartz.simpl.SimpleThreadPool</prop>
            <prop key="org.quartz.threadPool.threadCount">25</prop>
            <prop key="org.quartz.threadPool.threadPriority">5</prop>
            <prop key="org.quartz.jobStore.class">org.quartz.impl.jdbcjobstore.JobStoreCMT</prop>
            <prop key="org.quartz.jobStore.driverDelegateClass">org.quartz.impl.jdbcjobstore.StdJDBCDelegate</prop>
            <prop key="org.quartz.jobStore.misfireThreshold">60000</prop>
            <prop key="org.quartz.jobStore.tablePrefix">QRTZ_</prop>
            <!-- <prop key="org.quartz.jobStore.isClustered">true</prop> -->
            <!-- <prop key="org.quartz.jobStore.clusterCheckinInterval">20000</prop> -->

            <prop key="org.quartz.scheduler.classLoadHelper.class">org.quartz.simpl.CascadingClassLoadHelper</prop>
            <prop key="org.quartz.scheduler.threadsInheritContextClassLoaderOfInitializer">true</prop>
            <prop key="org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread">true</prop>

            <prop key="org.quartz.scheduler.skipUpdateCheck">true</prop>
        </props>
    </property>
</bean> 
```

以及相应的触发器参考：

```
<bean id="notificationEmailsSimpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean">
    <property name="jobDetail" ref="notificationJobDetail" />
    <property name="repeatInterval" value="60000" />
</bean>

<bean id="notificationJobDetail" class="org.springframework.scheduling.quartz.JobDetailFactoryBean">
    <property name="jobClass" value="com.mcboom.social.notifications.NotificationQuartzJobBean" />
</bean> 
```

所以我遇到的问题是：下面的任何组合似乎都不会影响正在使用的类加载器。

```
 <prop key="org.quartz.scheduler.classLoadHelper.class">org.quartz.simpl.CascadingClassLoadHelper</prop>
    <prop key="org.quartz.scheduler.threadsInheritContextClassLoaderOfInitializer">true</prop>
    <prop key="org.quartz.threadPool.threadsInheritContextClassLoaderOfInitializingThread">true</prop> 
```

或者更具体地说，在尝试检索以前持久的触发器时没有帮助，导致以下 stracktrace：

```
INFO: ERROR - ErrorLogger.schedulerError(schedulerFactoryBean_QuartzSchedulerThread)(2358) | An error occured while scanning for the next trigger to fire.
org.quartz.JobPersistenceException: Couldn't acquire next trigger: Couldn't retrieve trigger: com.mcboom.social.notifications.NotificationQuartzJobBean [See nested exception: org.quartz.JobPersistenceException: Couldn't retrieve trigger: com.mcboom.social.notifications.NotificationQuartzJobBean [See nested exception: java.lang.ClassNotFoundException: com.mcboom.social.notifications.NotificationQuartzJobBean]]
at org.quartz.impl.jdbcjobstore.JobStoreSupport.acquireNextTrigger(JobStoreSupport.java:2814)
at org.quartz.impl.jdbcjobstore.JobStoreSupport$36.execute(JobStoreSupport.java:2757)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3788)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.acquireNextTrigger(JobStoreSupport.java:2753)
at org.quartz.core.QuartzSchedulerThread.run(QuartzSchedulerThread.java:263)
Caused by: org.quartz.JobPersistenceException: Couldn't retrieve trigger: com.mcboom.social.notifications.NotificationQuartzJobBean [See nested exception: java.lang.ClassNotFoundException: com.mcboom.social.notifications.NotificationQuartzJobBean]
at org.quartz.impl.jdbcjobstore.JobStoreSupport.retrieveTrigger(JobStoreSupport.java:1596)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.retrieveTrigger(JobStoreSupport.java:1572)
at org.quartz.impl.jdbcjobstore.JobStoreSupport.acquireNextTrigger(JobStoreSupport.java:2792)
... 4 more 
```

我可以看到**org.quartz.simpl.CascadingClassLoadHelper**在加载时使用，并正确选择了正确的类加载器。

问题是，当**QuartzSchedulerThread**尝试检索触发器时，它使用**JobStoreSupport.retrieveTrigger()**，而后者又回退到**ObjectInputsStream.resolveClass()**和以下代码行：

```
Class.forName(name, false, latestUserDefinedLoader()) 
```

latestUserDefinedLoader **()**总是返回错误的类加载器......导致 ClassNotFoundException 让我很困惑！

我应该指出**latestUserDefinedLoader()**是 ObjectInputsStream 的本机方法，我在 OSX 上使用 jdk 1.6。

来自 Quartz/Spring 或更可能是 Glassfish 社区的任何人都可以对此有所了解吗？我现在正在拔头发。

谢谢史蒂夫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-28T16:51:09.130

如果有人对我提出的解决方案感兴趣，虽然并不理想是扩展默认值`StdJDBCDelegate`，在我的情况下，对于 MySQL，我可以`ObjectInputStream.resolveClass()`像下面这样匿名覆盖。

```
/**
 * <p>
 * This method should be overridden by any delegate subclasses that need
 * special handling for BLOBs. The default implementation uses standard JDBC
 * <code>java.sql.Blob</code> operations.
 * </p>
 * 
 * <p>
 * This implementation overcomes the incorrect classloader being used in
 * ObjectInputStream, overriding it with the current threads classloader.
 * </p>
 * 
 * @param rs
 *            the result set, already queued to the correct row
 * @param colName
 *            the column name for the BLOB
 * @return the deserialized Object from the ResultSet BLOB
 * @throws ClassNotFoundException
 *             if a class found during deserialization cannot be found
 * @throws IOException
 *             if deserialization causes an error
 */
@Override
protected Object getObjectFromBlob(ResultSet rs, String colName) throws ClassNotFoundException, IOException, SQLException {
    Object obj = null;

    Blob blobLocator = rs.getBlob(colName);
    if (blobLocator != null && blobLocator.length() != 0) {
        InputStream binaryInput = blobLocator.getBinaryStream();

        if (null != binaryInput) {
            if (binaryInput instanceof ByteArrayInputStream && ((ByteArrayInputStream) binaryInput).available() == 0) {
                // do nothing
            } else {
                ObjectInputStream in = new ObjectInputStream(binaryInput) {

                    @Override
                    protected Class<?> resolveClass(ObjectStreamClass desc) throws IOException, ClassNotFoundException {
                        String name = desc.getName();
                        try {
                            return Class.forName(name, false, Thread.currentThread().getContextClassLoader());
                        } catch (ClassNotFoundException ex) {
                            return super.resolveClass(desc);
                        }
                    }
                };

                try {
                    obj = in.readObject();
                } finally {
                    in.close();
                }
            }
        }

    }
    return obj;
} 
```

使用当前线程类加载器，如果不成功则回退到默认处理。

如果有人有更好的解决方案，甚至可以解释为什么首先会出现问题，我会非常有兴趣听到。

S。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T17:55:34.207

`org.springframework.scheduling.quartz.JobDetailBean`改为使用`org.springframework.scheduling.quartz.JobDetailFactoryBean`

# mysql - MySQL查询 - 在现有数据之前，之后添加字符串

> ID：10704512
> 
> 赞同：10
> 
> 时间：2012-05-22T14:52:16.080
> 
> 标签：mysql

我想知道是否有人能够就如何在 MySQL 中完成以下任务提供一些智慧。

我需要运行查询以在现有数据之前和之后的字段内添加一些内容。例如，假设我在“characters.name”中有以下数据：

```
'Fred Flintstone'
'Barney Rubble' 
```

我将如何在现有数据“Fred Flinstone”之前插入一些东西，在这个例子中，“xxxxx”以及数据之后的“yyyyy”？

结果将是：

```
'xxxxxFred Flintstoneyyyyy'
'xxxxxBarney Rubbleyyyyy' 
```

对此的任何帮助将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T14:58:05.337

```
SELECT CONCAT('xxxxx', name, 'yyyyy') AS name FROM characters 
```

# html - 将 DIV 拉伸到页面宽度

> ID：10704517
> 
> 赞同：1
> 
> 时间：2012-05-22T14:52:34.943
> 
> 标签：html, css, internet-explorer, internet-explorer-7

我需要一个 div 来根据其内容扩展到 HTML 文档的整个页面宽度。

这是场景：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0  Traditional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>testing</title>
<style type="text/css">
body
{
background-color:pink;
padding:0;
margin:0;
}
#testDiv
{
background-color:red;
}
</style>
</head>

<body>
<div id="testDiv">
<table width="2000px">
<tr>
<td>
test
</td>
</tr>
</table>
</div>
</body>

</html> 
```

testDiv 只会拉伸到浏览器窗口的大小，而不是整个页面本身。我已经让这种行为与表格布局一起工作，但如果有人可以提供 CSS 解决方案，我更愿意。我还需要适用于 IE 7 的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:00:36.873

`<div>`要在刚刚设置的`display`规则中拉伸到内容的大小`inline-block`，对于 IE7，您还必须包含一些技巧。

[例子](http://jsfiddle.net/C5mmK/)

```
<!DOCTYPE html>
<html>
   <head>
     <title>testing</title>
     <style type="text/css">
       body
       {
         background-color:pink;
         padding:0;
         margin:0;
       }
       #testDiv
       {
         background-color:red;
         display: inline-block;
         /* IE 7- hacks */
         zoom: 1;
         *display: inline;
       }
      </style>
   </head>
   <body>
     <div id="testDiv">
       test
       <div style="width: 2000px"></div>
     </div>
   </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T14:56:57.967

试试这个。:)

```
html {width: 100%; height: 100%; padding: 0; margin: 0;}
body {width: 100%; height: 100%; position: relative; padding: 0; margin: 0;}
#testDiv {width: 100%; height: 100%; position: absolute; top: 0; left: 0;} 
```

# .net - 如何准确记录从 WCF 客户端发送和接收的消息

> ID：10704518
> 
> 赞同：8
> 
> 时间：2012-05-22T14:52:36.127
> 
> 标签：.net, wcf, logging

请不要使用**WCF 跟踪工具**回答，除非明确说明如何捕获实际消息，包括标头和错误。此[链接](http://msdn.microsoft.com/en-us/library/ms733025.aspx)不起作用。

此外，`IClientMessageInspector`除非您知道如何让它包含所有标题（*它不*包含）并捕获具有无法解析的错误元素的响应，否则不要回答。

使用 pre-wcf Web 服务，您可以编写一个`SoapExtension`完美运行的服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T15:38:42.813

编写[自定义消息编码器](http://msdn.microsoft.com/en-us/library/ms751486.aspx)。它可以访问所有标题。关于您希望解决方案的通用性如何，您可能需要编写它以使其进入真正的编码器。

就在几天前，我在[这个线程](https://stackoverflow.com/questions/10589561/attempting-to-migrate-from-wse-3-0-to-wcf-for-client-code/10661470#10661470)中实现了一个“包装器编码器” 。该编码器更改了消息。你不需要这样做，你可以像我一样记录它并将它传递给传输。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T19:28:28.013

实现 IEndpointBehavior 的类允许您捕获和记录入站/出站消息。

在此处查看示例[http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iendpointbehavior.applydispatchbehavior.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.description.iendpointbehavior.applydispatchbehavior.aspx)

您还需要一个实现 IDispatchMessageInspector 的类

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T16:15:46.680

我也发现[了这个](http://msdn.microsoft.com/en-us/library/ms730064.aspx)：

```
<system.diagnostics>
    <sources>
        <source name="System.ServiceModel.MessageLogging">
            <listeners>
                <add name="messages"
                type="System.Diagnostics.XmlWriterTraceListener"
                initializeData="c:\log\wcfMessages.svclog" />
            </listeners>
        </source>
    </sources>
</system.diagnostics>

<system.serviceModel>
    <diagnostics>
        <messageLogging
                 logEntireMessage="true"
                 logMalformedMessages="true"
                 logMessagesAtServiceLevel="true"
                 logMessagesAtTransportLevel="true"
                 maxMessagesToLog="1000000"
                 maxSizeOfMessageToLog="10000000"/>
    </diagnostics>
</system.serviceModel> 
```

这并不理想，因为您必须使用工具来查看消息，但它似乎确实捕获了带有所有标题和错误等的实际消息。

# tomcat - JSF 2.0/Tomcat/ Apache Orchestra @InitView 在访问 Bean 时似乎被忽略...初始化函数没有被执行

> ID：10704524
> 
> 赞同：1
> 
> 时间：2012-05-22T14:52:53.193
> 
> 标签：tomcat, jsf-2, jboss-tools, orchestra

我已经尝试了几个小时来解决这个问题，但无法弄清楚问题所在。我想要做的是获取表单输入并将其保存到数据库中。我已经以完全相同的方式完成了一百万次，从未遇到任何麻烦。

这是我的表格（addPerson.xhtml）

```
<h:form>
                <div id="detail_metadata">

                         <p>
                            <h:outputText class="detail_subheaders" value="#{msgs.first_name}"  /><br></br>
                            <h:inputTextarea value="#{addPersonBean.person.firstName}" class="admin_textarea styled"/>
                        </p>

                        <p>
                            <h:outputText class="detail_subheaders" value="#{msgs.last_name}"  /><br></br>
                            <h:outputText class="detail_subheaders" value="#{addPersonBean.test}"  /><br></br>
                            <h:inputTextarea value="#{addPersonBean.person.lastName}" class="admin_textarea styled"/>
                        </p>

                        <p>

                            <h:outputLabel class="detail_subheaders" value="#{msgs.gender}"/><br/>

                            <h:selectOneRadio id="gender" required="true" value="#{addPersonBean.person.gender}"> 
                                <f:selectItem itemLabel="#{msgs.gender_m}" itemValue="m"/>
                                <f:selectItem itemLabel="#{msgs.gender_f}" itemValue="f"/>
                            </h:selectOneRadio>

                        </p>

                        <p>
                            <h:outputText class="detail_subheaders" value="#{msgs.links}"  /><br></br>
                            <h:inputTextarea value="#{addPersonBean.person.links}" class="admin_textarea styled"/>
                        </p>
                    .
                                    .
                                    . 
```

这是我的豆：

```
import at.irian.jsfatwork.service.PersonService;
import at.irian.jsfatwork.domain.Role;
import at.irian.jsfatwork.gui.util.Utils;
import org.apache.myfaces.orchestra.conversation.Conversation;
import org.apache.myfaces.orchestra.conversation.annotations.ConversationRequire;
import org.apache.myfaces.orchestra.viewController.annotations.InitView;
import org.apache.myfaces.orchestra.viewController.annotations.ViewController;
import org.springframework.context.annotation.Scope;

import javax.inject.Inject;
import javax.inject.Named;

@Named("addPersonBean")
@Scope("manual")
@ViewController(viewIds = {"/addPerson.xhtml"})
@ConversationRequire(conversationNames = "addPersonBean", entryPointViewIds =   "/addPerson.xhtml",
    navigationAction = "addPerson.xhtml")
public class AddPersonBean extends PersonBeanBase {

@Inject
private PersonService personService;

@InitView
public void createPerson() {
    if (person == null) {
       person = personService.createNew();
   }
}

public String save() {
    personService.save(person);
    return ViewIds.SHOW_COLLECTION;

}

public String cancel() {
   //Conversation.getCurrentInstance().invalidate()
    return ViewIds.SHOW_COLLECTION;

}
} 
```

和家长：

```
import at.irian.jsfatwork.domain.Person;
import javax.faces.model.SelectItem;
import java.util.List;

public abstract class PersonBeanBase {

protected Person person;
private List<SelectItem> collections;

public Person getPerson() {
    return this.person;
}

public void setPerson(Person person) {
    this.person=person;
}

public List<SelectItem> getCollections() {
    return this.collections;
} 
```

}

无论我尝试什么，@InitView 都会被直接忽略，当我尝试坚持时，人是空的……这怎么可能？我对提示很有帮助，因为我只是看不出问题出在哪里......事实上我之前已经工作了一百万次，这令人沮丧---如果您需要任何额外的代码，请给我留言/信息。非常感谢！

我刚刚注意到我在控制台上收到以下错误输出：

```
22.05.2012 17:52:42 org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage loadLibraries
SCHWERWIEGEND: Error Loading library: /WEB-INF/autorenhp_archive.taglib.xml
java.io.IOException: Error parsing [jndi:/localhost/autorenhp_archive-webapp/WEB-INF/autorenhp_archive.taglib.xml]: 
    at org.apache.myfaces.view.facelets.compiler.TagLibraryConfig.create(TagLibraryConfig.java:637)
    at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.loadLibraries(FaceletViewDeclarationLanguage.java:2033)
    at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.createCompiler(FaceletViewDeclarationLanguage.java:1680)
    at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.initialize(FaceletViewDeclarationLanguage.java:1958)
    at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage.<init>(FaceletViewDeclarationLanguage.java:281)
    at org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguageStrategy.<init>(FaceletViewDeclarationLanguageStrategy.java:52)
    at org.apache.myfaces.view.ViewDeclarationLanguageFactoryImpl.initialize(ViewDeclarationLanguageFactoryImpl.java:106)
    at org.apache.myfaces.view.ViewDeclarationLanguageFactoryImpl.getViewDeclarationLanguage(ViewDeclarationLanguageFactoryImpl.java:79)
    at org.apache.myfaces.application.ViewHandlerImpl.getViewDeclarationLanguage(ViewHandlerImpl.java:175)
    at org.apache.myfaces.shared_impl.application.DefaultViewHandlerSupport.checkResourceExists(DefaultViewHandlerSupport.java:473)
    at org.apache.myfaces.shared_impl.application.DefaultViewHandlerSupport.handleSuffixMapping(DefaultViewHandlerSupport.java:402)
    at org.apache.myfaces.shared_impl.application.DefaultViewHandlerSupport.calculateViewId(DefaultViewHandlerSupport.java:76)
    at org.apache.myfaces.application.ViewHandlerImpl.deriveLogicalViewId(ViewHandlerImpl.java:114)
    at org.apache.myfaces.lifecycle.RestoreViewExecutor.execute(RestoreViewExecutor.java:151)
    at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
    at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:150)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.xml.sax.SAXException: Error Handling [jndi:/localhost/autorenhp_archive-webapp/WEB-INF/autorenhp_archive.taglib.xml@13,26] <function-class>
    at org.apache.myfaces.view.facelets.compiler.TagLibraryConfig$LibraryHandler.endElement(TagLibraryConfig.java:454)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2938)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:395)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
    at org.apache.myfaces.view.facelets.compiler.TagLibraryConfig.create(TagLibraryConfig.java:632)
    ... 63 more 
```

我不知道这是从哪里来的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:07:25.773

看起来读取 .taglib.xml 文件的 SAXParser 在 /WEB-INF/autorenhp_archive.taglib.xml 中发现了一个异常。检查那个文件。

# mysql - MySQL 的 INSERT 查询中的用户定义变量

> ID：10704527
> 
> 赞同：11
> 
> 时间：2012-05-22T14:53:00.423
> 
> 标签：mysql, variables, insert, user-defined

我需要在 MySQL 的 INSERT 查询中使用用户定义的变量，请参见下面的示例：

```
INSERT INTO `posts`(`id`) VALUES(NULL);
SET @last_insert_id = LAST_INSERT_ID();
INSERT INTO `comments`(`id`, `post_id`) VALUES(NULL, "@last_insert_id"); 
```

这个例子不起作用并插入了0。我做错了什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-22T15:01:05.207

无需将其存储在变量中。您可以`LAST_INSERT_ID()`在以下`INSERT`语句中调用。

```
INSERT INTO `comments`(`id`, `post_id`) VALUES (NULL, LAST_INSERT_ID()); 
```

...除非您使用该 ID 执行多个插入操作。

在这种情况下，使用变量的正确语法是不带引号：

```
INSERT INTO `posts`(`id`) VALUES (NULL);
SET @last_insert_id = LAST_INSERT_ID();
/* Several new entries using the same @last_insert_id */
INSERT INTO `comments`(`id`, `post_id`) VALUES (NULL, @last_insert_id);
INSERT INTO `comments`(`id`, `post_id`) VALUES (NULL, @last_insert_id);
INSERT INTO `comments`(`id`, `post_id`) VALUES (NULL, @last_insert_id);
INSERT INTO `comments`(`id`, `post_id`) VALUES (NULL, @last_insert_id);
INSERT INTO `comments`(`id`, `post_id`) VALUES (NULL, @last_insert_id); 
```

# c# - 传递委托方法和动态调用参数

> ID：10704531
> 
> 赞同：1
> 
> 时间：2012-05-22T14:53:10.893
> 
> 标签：c#, delegates

我以前也问过类似的问题，但我只是很难理解这个问题......

我有一个代表...

```
delegate void assertDelegate(params object[] args); 
```

我有一个调用委托的方法......

```
public void assert(assertDelegate assertMethod, params object[] args) {
        string expectedValue;
        string actualValue;
        // derive value of 'expectedValue' and 'actualValue' from 'args'
        assertMethod.DynamicInvoke(expectedValue, actualValue);
    } 
```

我的想法是必须有一种方法来传递动作并动态调用该动作的参数......

```
assert(Assert.AreEqual,new object[]{ HtmlDiv.PropertyNames.Id, "footer"}); 
```

但我得到了错误`Expected a method with 'void AreEqual(params object[])' signature`。

也许我误会了`DynamicInvoke`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:55:16.257

```
delegate void assertDelegate(params object[] args); 
```

此委托签名与 的任何签名都不匹配`Assert.AreEqual`。改用：

```
delegate void assertDelegate(string first, string second); 
```

或者一个`Func<string, string>`.

# c++ - 使用具有存储的常量变量分配数组

> ID：10704532
> 
> 赞同：0
> 
> 时间：2012-05-22T14:53:12.477
> 
> 标签：c++, c

```
const int i = 100;
int *j = &i;
int array[i] = {0}; 
```

这合法吗？我在某处读到，如果没有 &i，i 和 100 将被添加到符号表中，但由于 &i，i 强制存储，并且 100 将在编译时存储在 i 中；因此编译器将无法读取 i 的值（从存储中）来分配数组 - 这是真的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T15:01:29.200

在 C90 和 C99 中，定义`int array[i] = {0};`是不合法的（不管你用 做什么`i`）。

在文件范围内声明的数组必须有一个整数常量表达式作为长度（分别为 6.5.4.2 或 6.7.5.2，§2）

如果定义具有函数/块范围，它仍然是非法的，因为

*   在 C90 中，不允许使用可变长度数组 (6.5.4.2)
*   在 C99 中，不得初始化可变长度数组（6.7.8，§3）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T15:00:58.157

`int *j = &i;`应该是`const int *j = &i;`。之后，您的代码是合法的。

编辑：在 C++ 中

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T15:08:43.667

绝对没有理由为什么一个变量不能同时具有编译时常量值*和*物理存储。因此，这取决于语言的标准。

C++ 允许一个常量整数作为编译时常量。C 没有。一些也编译 C 的 C++ 编译器将混合和匹配两种语言的某些特性，因此您的编译器可能会接受它作为标准的扩展。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T15:43:58.643

> 这合法吗？我在某处读到，如果没有 &i，i 和 100 将被添加到符号表中，但由于 &i，i 强制存储，并且 100 将在编译时存储在 i 中；因此编译器将无法读取 i 的值（从存储中）来分配数组 - 这是真的吗？

这是来自 C99 标准的语言：

> **6.7.3 类型限定符**
> ...
> 3 与限定类型相关的属性仅对左值表达式有意义。^(114))
> 
> * * *
> 
> ^(114) 实现可能会放置一个`const`不在`volatile`只读存储区域中的对象。此外，如果从未使用过此类对象的地址，则实现不需要为此类对象分配存储空间。)

所以，有点真实，但在这种情况下并不真正相关。编译器不必*为*`i`在别处使用它的值而创建存储；它可以简单地使用值为 的立即操作数`100`代替`i`。无论哪种方式，这条线`int j = &i;`都是不必要的。

`i`不是整数常量表达式，这意味着它不是编译时常量（在 C 中；C++ 在这方面有所不同）；它是一个运行时变量，其值在其生命周期内可能不会被修改。

从 C99 开始，您可以使用运行时变量来指定数组大小，即使是声明的变量`const`，所以

```
const int i = 100;
int array[i]; 
```

将分配`array`为 100 个元素的数组`int`。但是，您不能将初始化程序与 VLA 一起使用，`int array[i] = {0};`因此*无效*。

同样，C++ 是不同的，根本不支持 VLA。但是由于`i`is declared `const`，C++ 将其视为编译时常量，这意味着您的代码*应该*是合法的 C++（无论如何它是为我构建的）。

更多来自 C99：

> **6.7.5.2 数组声明符**
> ...
> 4 如果大小不存在，则数组类型是不完整类型。如果大小`*`不是表达式，则数组类型是未指定大小的变长数组类型，只能在具有函数原型范围的声明中使用；^(124）)这样的数组仍然是完整的类型。如果大小是整数常量表达式，并且元素类型具有已知的常量大小，则数组类型不是变长数组类型；否则，数组类型是可变长度数组类型。
> ...
> **6.7.8 初始化**
> ...
> 3 要初始化的实体的类型应为大小未知的数组或不是可变长度数组类型的对象类型。
> 
> * * *
> 
> ^(124) 因此，* 只能用在不是定义的函数声明中（见 6.7.5.3）。)

# memory-management - OpenCV 的自定义内存分配器

> ID：10704533
> 
> 赞同：3
> 
> 时间：2012-05-22T14:53:16.253
> 
> 标签：memory-management, opencv, pool, allocator

是否可以为 OpenCV 2.3.1 设置自定义分配器？我创建了一个内存池，我希望 OpenCV 使用该池来满足它的需要。

那可能吗？如果是，怎么办？

**更新：**

自上次回答以来，我取得了一些进展，但我仍然有一些问题。这是我现在的代码：

```
CvAllocFunc allocCV() 
{ 
     return (CvAllocFunc) MEMPOOL->POOLalloc(sz); 
}

CvFreeFunc deallocCV()
{
    return (CvFreeFunc) MEMPOOL->POOLfree(ptr);
}

...

cvSetMemoryManager(allocCV(),deallocCV(),data); 
```

现在，我的问题是，我怎样才能访问我想要分配的数据的大小和指针，然后再解除分配？

刚刚发现：我使用的OpenCV版本（2.3.1）在使用cvSetMemoryManager时会报错。原因在于它的源代码：

```
void cvSetMemoryManager( CvAllocFunc, CvFreeFunc, void * )
{
    CV_Error( -1, "Custom memory allocator is not supported" );
} 
```

我对此感到非常失望。我想我不能再在 OpenCV 中使用自定义内存池了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T14:56:06.283

就在文档中

[http://opencv.willowgarage.com/documentation/c/core_utility_and_system_functions_and_macros.html#setmemorymanager](http://opencv.willowgarage.com/documentation/c/core_utility_and_system_functions_and_macros.html#setmemorymanager)

使用

```
void cvSetMemoryManager(CvAllocFunc allocFunc=NULL, CvFreeFunc freeFunc=NULL, void* userdata=NULL) 
```

功能。

你的代码

```
cvSetMemoryManager(allocCV(),deallocCV(),data); 
```

是错的。

看看会发生什么：你*调用*allocCV 和 deallocCV 函数（它们返回一些被悄悄转换为 cvAllocFunc 的指针）！

而这仅仅是开始。有关 alloc/dealloc 语义，请参阅文档。您应该使用正确的签名编写 allocCV/deallocCV。

```
void* CV_CDECL allocCV(size_t size, void* userdata)
{
     return ((YourMemPoolTypeWhichIDoNotKnow*)userdata)->POOLalloc(size);
}

int CV_CDECL deallocCV(void* pptr, void* userdata)
{
    return ((YourMemPoolTypeWhichIDoNotKnow*)userdata)->POOLfree(pptr);
} 
```

然后在 'userdata' 参数中传递您的 MEMPOOL：

```
cvSetMemoryManager(&allocCV, &deallocCV, (void*)MEMPOOL); 
```

这是库提供用户回调的标准方式。

# eclipse - 在不搞砸 pom 的情况下修复“生命周期配置未涵盖的插件执行”？

> ID：10704536
> 
> 赞同：1
> 
> 时间：2012-05-22T14:53:22.890
> 
> 标签：eclipse, maven, m2e

[这篇](http://wiki.eclipse.org/M2E_plugin_execution_not_covered#ignore_plugin_goal)文章和许多其他帖子都建议更改一个 pom 以使其正常工作，这对于一个单纯的插件来说是一个相当大胆的要求。是否有可能让 pom 完好无损，但仍然看不到这些错误？

最好的问候，尤金。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:11:29.957

好吧，这是不可能的。如果您不希望出现这些错误，这种 POM 中的混乱是某种解决方法。除非您的插件以某种方式提供 m2e 连接器，否则您别无选择。对不起。

# grails - NoClassDefFoundError org.codehaus.groovy.grails.plugins.springsecurity.ui.RegistrationCode 仅适用于运行应用程序

> ID：10704539
> 
> 赞同：0
> 
> 时间：2012-05-22T14:53:40.037
> 
> 标签：grails

我在 grails 应用程序中有一个奇怪的情况。我的应用程序使用 spring-security-ui，我正在使用类*org.codehaus.groovy.grails.plugins.springsecurity.ui.RegistrationCode*。
奇怪的是，当我使用此类时，应用程序会抛出异常：

```
java.lang.NoClassDefFoundError: org.codehaus.groovy.grails.plugins.springsecurity.ui.RegistrationCode 
```

但是如果我尝试打开**grails shell**并编写一个导入该类的脚本，它就可以工作。如果我生成**战争**并将其部署在 Tomcat 上，则应用程序可以正常工作。只是*运行应用程序*不起作用。哪个可能是导致此错误的原因？
谢谢

更新：
现在我尝试注册用户或登录时遇到同样的情况......

```
2012-07-10 12:24:40,835  ERROR org.codehaus.groovy.grails.web.errors.GrailsExceptionResolver - NoClassDefFoundError occurred when processing request: [GET] /myapplication/dashboard
org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils.
Stacktrace follows:
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'LoginController': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [LoginController]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils
   at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:909)
   at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [LoginController]: Constructor threw exception; nested exception is java.lang.NoClassDefFoundError: org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils
   ... 3 more
Caused by: java.lang.NoClassDefFoundError: org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils
   ... 3 more 
```

但是，如果我将这段代码放在控制器中，它就可以工作：

```
println org.codehaus.groovy.grails.plugins.springsecurity.SpringSecurityUtils.class 
```

有人建议？

更多信息：

```
Plug-ins you currently have installed are listed below:
-------------------------------------------------------------
blueprint           1.0.2            --  Blueprint CSS framework
burning-image       0.6.0            --  Burning Image
ckeditor            3.6.2.1          --  CKeditor plugin
constraints         0.6.0            --  Custom domain constraints plugin
famfamfam           1.0.1            --  Silk icons from famfamfam.com
hibernate           2.0.1            --  Hibernate for Grails
invoicer            0.1              --  Invoicer Plugin
jdbc-pool           0.3              --  Tomcat JDBC Pool plugin
jquery              1.7.1            --  JQuery for Grails
jquery-ui           1.8.15           --  jQuery UI resources
jquery-validation   1.7.3            --  JQuery Validation Plugin
jquery-validation-ui1.2.3            --  JQuery Validation UI Plugin - Client Side Validation without writing JavaScript
lesscss-resources   1.3.0.3          --  Less CSS Resources
mail                1.0              --  Provides Mail support to a running Grails application
quartz              0.4.2            --  This plugin adds Quartz job scheduling features to Grails application.
rendering           0.4.3            --  Grails Rendering
resources           1.1.6            --  Resources
spring-security-core1.2.7.2          --  Spring Security Core Plugin
spring-security-ui  0.2              --  Spring Security UI
tomcat              2.0.1            --  Apache Tomcat plugin for Grails
webxml              1.4.1            --  WebXmlConfig 
```

我有类来管理从另一家公司开发的插件中的 spring 安全用户、角色和控制器。但这很奇怪，因为*NoClassDefFoundError*是针对 SpringSecurityUtils 类的，如果我尝试将它导入到控制器中，它工作正常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-04T21:37:44.900

问题是该库未包含在您的开发环境中：您只需在 BuildConfig.groovy 文件中添加依赖项即可将该库添加到您的开发环境中：

```
dependencies {
        // specify dependencies here under either 'build', 'compile', 'runtime', 'test' or 'provided' scopes eg.

        runtime 'mysql:mysql-connector-java:5.1.20'
        runtime 'apacheexec:commons-exec:1.1' // this is the external library that I added which is the apache commons exec.
    } 
```

欲了解更多信息，请访问此页面： http: [//grails.org/doc/latest/guide/conf.html#configurationsAndDependencies](http://grails.org/doc/latest/guide/conf.html#configurationsAndDependencies)

我希望它有帮助

# maven - 如何使用 maven 操作 Manifest 文件

> ID：10704543
> 
> 赞同：2
> 
> 时间：2012-05-22T14:53:53.960
> 
> 标签：maven, maven-2, ear, maven-ear-plugin

我有一个用 maven 构建的 EAR 文件。EAR 包含几个 jar，我需要在清单文件中为其中一个 jar 添加一行。我知道 maven-jar-plugin 选项（manifestEntries），但这对于单个独立 jar 是好的，而不是在 EAR 中的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T15:05:20.233

如果您深入了解[maven-ear-plugin 配置](http://maven.apache.org/plugins/maven-ear-plugin/ear-mojo.html)，您会发现归档配置部分正是为此目的而设计的。

这可以添加到 maven-ear-plugin 的配置中：

```
<archive>
  <addMavenDescriptor/>
  <compress/>
  <forced/>
  <index/>
  <manifest>
    <addClasspath/>
    <addDefaultImplementationEntries/>
    <addDefaultSpecificationEntries/>
    <addExtensions/>
    <classpathLayoutType/>
    <classpathMavenRepositoryLayout/>
    <classpathPrefix/>
    <customClasspathLayout/>
    <mainClass/>
    <packageName/>
  </manifest>
  <manifestEntries>
    <key>value</key>
  </manifestEntries>
  <manifestFile/>
  <manifestSections>
    <manifestSection>
      <name/>
      <manifestEntries>
        <key>value</key>
      </manifestEntries>
    <manifestSection/>
  </manifestSections>
  <pomPropertiesFile/>
</archive> 
```

这为您提供了所需的任何机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:59:31.560

我想你能看一下[`maven-shade-plugin`](http://maven.apache.org/plugins/maven-shade-plugin/index.html)并使用[`ManifestResourceTransformer`](http://maven.apache.org/plugins/maven-shade-plugin/examples/resource-transformers.html#ManifestResourceTransformer)来更改 jar 的清单。

# html - 即时查找两个网页的常用词

> ID：10704546
> 
> 赞同：1
> 
> 时间：2012-05-22T14:54:02.783
> 
> 标签：html, search, text

我这里有一个物种清单：

[http://megasun.bch.umontreal.ca/ogmp/projects/other/compare.html](http://megasun.bch.umontreal.ca/ogmp/projects/other/compare.html)

以及这里的物种清单：

[http://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=3524](http://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?id=3524)

我想找到两页上提到的所有物种。我怎样才能快速做到这一点？（我不介意是否找到不涉及物种的词。我想做一般的词比较：）

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:45:44.860

在控制台的每个页面上，执行：

```
var html = document.body.innerHTML;
results = [];
html.match(/>([^<]+?)</g)               // grab all values like ">...<"
    .map(function(match) {              // look for a long words..words..words
        return match.match(/\w.*\w/);
    })
    .filter(function(match) {           // ignore empty matches
        return match!==null
    })
    .forEach(function(match) {
        var text = match[0];
        if (!text.match(/[0-9]/) &&     // ignore matches with numbers
            results.indexOf(text)==-1)  // add to results if not duplicate
            results.push(text);
    });
JSON.stringify(results); 
```

然后做：

```
var page1 = JSON.parse(' /*COPY-PASTE THE RESULT OF PAGE 1*/ ');
var page2 = JSON.parse(' /*COPY-PASTE THE RESULT OF PAGE 2*/ ');
page1.map(function(s){return page2.indexOf(s)!=-1}); 
```

这是规避浏览器限制所必需的。

演示：

```
> JSON.stringify( page1.filter(function(s){return page2.indexOf(s)!=-1}) )
'["Beta vulgaris","Spinacia oleracea"]' 
```

# javascript - 英国邮政编码的 JavaScript 正则表达式

> ID：10704547
> 
> 赞同：-1
> 
> 时间：2012-05-22T14:54:06.150
> 
> 标签：javascript, regex

我一直在使用这个正则表达式来验证我的联系表格中的英国邮政编码，它工作正常：

```
/^([a-zA-Z]){1}([0-9][0-9]|[0-9]|[a-zA-Z][0-9][a-zA-Z]|[a-zA-Z][0-9][0-9]|[a-zA-Z][0-9]){1}([ ])([0-9][a-zA-z][a-zA-z]){1}$/ 
```

但是我现在需要对其进行修改以验证是否有空格，例如 GL50 1HX 或 GL501HX

有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T14:58:57.537

这是匹配英国邮政编码的正则表达式：

```
^([A-PR-UWYZ0-9][A-HK-Y0-9][AEHMNPRTVXY0-9]?[ABEHMNPRVWXY0-9]? {0,2}[0-9][ABD-HJLN-UW-Z]{2}|GIR ?0AA)$ 
```

[http://regexlib.com/REDetails.aspx?regexp_id=260&AspxAutoDetectCookieSupport=1](http://regexlib.com/REDetails.aspx?regexp_id=260&AspxAutoDetectCookieSupport=1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T14:57:32.477

要在正则表达式中指定可选空格，请在其后放置一个问号。

例子：

```
^[A-Z]{2}\d{2} ?\d[A-Z]{2}$ 
```

问号是`{0,1}`限定符的缩写形式，即零次或一次：

```
^[A-Z]{2}\d{2} {0,1}\d[A-Z]{2}$ 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-22T14:55:31.840

将空格放在条件正则表达式 exp 中： `[ ]`

# gwt - TabLayoutPanel 和 gwt-slider-bar

> ID：10704549
> 
> 赞同：0
> 
> 时间：2012-05-22T14:54:08.350
> 
> 标签：gwt, gwt-tablayoutpanel

我尝试使用[http://code.google.com/p/gwt-slider-bar/](http://code.google.com/p/gwt-slider-bar/) 代码向 TabLayoutPanel 添加滑块，但即使在 DeckPanel 上运行良好，也不会显示滑块。

有没有人成功地使用此代码或使用其他替代方法做同样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:27:20.683

[我找到了一种更好的方法来使用类http://code.google.com/p/listwidget/source/browse/trunk/web/src/main/java/com/google/gwt/gen2](http://code.google.com/p/listwidget/source/browse/trunk/web/src/main/java/com/google/gwt/gen2/#gen2%2Fclient)在 TabLayoutPanel 中制作滑块[/#gen2%2Fclient](http://code.google.com/p/listwidget/source/browse/trunk/web/src/main/java/com/google/gwt/gen2/#gen2%2Fclient)与 CSS 和 gif 在同一目录中可用。

我希望这会有所帮助

# android - android eclipse 在图形布局中看不到图层列表

> ID：10704551
> 
> 赞同：1
> 
> 时间：2012-05-22T14:54:13.183
> 
> 标签：android, xml

我正在尝试构建一个包含 2 个图像的图层列表并在 eclipse 的图形布局中查看它，以查看它是否正确...由于某种原因我收到错误

这是我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<layer-list xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="50dp"
android:layout_height="50dp">

<item android:drawable="@drawable/picuser" 
android:layout_width="50dp"
android:layout_height="50dp"/>

<item android:drawable="@drawable/ic_launcher" 
android:layout_width="50dp"
android:layout_height="50dp"/>

</layer-list> 
```

这是我的错误：

```
NOTE: This project contains Java compilation errors, which can cause rendering failures  
for custom views. Fix compilation problems first.

com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup
Exception details are logged in Window > Show View > Error Log
The following classes could not be found:
- item (Fix Build Path, Edit XML)
- layer-list (Fix Build Path, Edit XML) 
```

# tsql - 另一个会话正在使用的事务上下文

> ID：10704553
> 
> 赞同：17
> 
> 时间：2012-05-22T14:54:25.113
> 
> 标签：tsql, triggers, sql-server-2008-r2, linked-server

我有一个表`MyTable`，我在其上定义了一个触发器，如下所示：

```
CREATE TRIGGER dbo.trg_Ins_MyTable
   ON  dbo.MyTable 
   FOR INSERT
AS 
BEGIN
    SET NOCOUNT ON;

    insert SomeLinkedSrv.Catalog.dbo.OtherTable 
        (MyTableId, IsProcessing, ModifiedOn)
    values (-1, 0, GETUTCDATE())
END
GO 
```

每当我尝试在 中插入一行时`MyTable`，都会收到以下错误消息：

> 消息 3910，级别 16，状态 2，行 1 另一个会话正在使用事务上下文。

我已`SomeLinkedSrv`正确定义为链接服务器（例如，`select * from SomeLinkedSrv.Catalog.dbo.OtherTable`工作正常）。

如何避免错误并成功插入记录+执行触发器？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-22T15:27:56.560

如果启用 MARS，则不能在分布式事务中使用环回链接服务器。

> 环回链接服务器不能用于分布式事务。尝试从分布式事务中对环回链接服务器执行分布式查询会导致错误，例如错误 3910：“[Microsoft][ODBC SQL Server Driver][SQL Server]Transaction context in use by another session。” 当由未启用多个活动结果集 (MARS) 的连接发出的 INSERT...EXECUTE 语句针对环回链接服务器执行时，此限制不适用。请注意，当在连接上启用 MARS 时，该限制仍然适用。

[http://msdn.microsoft.com/en-us/library/ms188716(SQL.105).aspx](http://msdn.microsoft.com/en-us/library/ms188716%28SQL.105%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-20T17:45:38.903

我解决它。我使用同一个链接服务器调用第二个过程，然后进入我使用同一个链接服务器的过程。

很简单，只需要知道链接服务器的限制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-15T19:47:09.677

我通过删除存储过程中使用的链接服务器解决了这个问题，然后由同一链接服务器调用存储过程。它不能在 DEV 环境中工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-19T12:22:13.140

这种情况的原因之一是适用于链接服务器数据库表的触发器。处理数据库事务的 SQL-Server 的 SQL 版本。为避免在 sql 查询执行期间出现此错误，我们应暂时禁用并在执行后为更新的表启用触发器。全部带有数据库名称检查。这是一个例子：

```
 Select * From People  where PersonId In (@PersonId, @PersonIdRight)
     IF 'DOUBLE' = DB_NAME()
        ALTER TABLE [dbo].[PeopleSites] DISABLE TRIGGER [PeopleSites_ENTDB_UPDATE]

     Update PeopleSites Set PersonId = @PersonIdRight Where  PersonId = @PersonId

     IF 'DOUBLE' = DB_NAME()
        ALTER TABLE [dbo].[PeopleSites] ENABLE TRIGGER [PeopleSites_ENTDB_UPDATE]

     Select * From PeopleSites where PersonId In (@PersonId, @PersonIdRight) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-29T11:34:22.390

我在我们的 DEV 环境中也遇到了同样的错误，将链接的数据库移动到另一个 sql 实例解决了这个问题。在我们的生产环境中，这些数据库已经在不同的实例上

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-12T16:38:21.497

在我的情况下，我使用 SQL 2005 并在链接服务器上运行 Insert....exec 时得到“另一个会话正在使用的事务上下文”。对我来说，修复是从 SP2 build 3161 修补到 SP3。SP2 累积 5 应该可以修复。

[https://support.microsoft.com/en-us/kb/947486](https://support.microsoft.com/en-us/kb/947486)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-09-05T10:07:39.797

当远程数据库位于同一台服务器上时，无需指定数据库服务器 ip/主机名和端口即可配置链接服务器。只需数据库名称就足够了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-17T15:10:18.793

尝试运行 UPDATE 查询时，我得到了相同的“另一个会话错误正在使用的事务上下文”：

```
 BEGIN      TRAN
--ROLLBACK  TRAN
--COMMIT    TRAN
UPDATE  did 
SET     did.IsProcessed = 0,
        did.ProcessingLockID = NULL
FROM    [proddb\production].DLP.dbo.tbl_DLPID did (NOLOCK)
WHERE   did.dlpid IN ('bunch of GUIDs')
--WHERE   did.DLPID IN (SELECT DLPID FROM @TableWithData) 
```

但是我没有意识到我已经尝试在 ProdDb\Production 服务器上的 DLP 数据库上运行它。一旦我删除了“[proddb\production].DLP.dbo”。查询的前缀，它工作正常。

# php - Facebook 应用程序在 Mac Safari 浏览器中获取会话或 Cookie 时出错？

> ID：10704554
> 
> 赞同：0
> 
> 时间：2012-05-22T14:54:27.120
> 
> 标签：php, cross-domain, facebook-apps, safari

我已经在这里对 facebook 进行了研究，我找到的解决方案在这个页面上

[Safari 会话变量中具有多个页面的 Facebook Iframe 应用程序不持久](https://stackoverflow.com/questions/2691864/facebook-iframe-app-with-multiple-pages-in-safari-session-variables-not-persisti)

我也已经包含此代码但仍然无法正常工作

```
<?php header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

但它仍然无法正常工作，Facebook 是否为 Safari 中的 iframe 实现了跨域 cookie/会话的新技术？

我希望你能帮助我，因为我已经搜索了 2 天的任何解决方案，但我无法成功解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:57:52.107

该标头解决了我在 IE 上的问题，但在 safari 上却没有：

```
if ( strpos($_SERVER['HTTP_USER_AGENT'], 'MSIE') ) header('P3P:CP="IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT"'); 
```

# maven-3 - 如何为特定的 Maven 构建配置文件重命名文件

> ID：10704559
> 
> 赞同：1
> 
> 时间：2012-05-22T14:54:45.557
> 
> 标签：maven-3, maven-assembly-plugin

我对我的 web.xml 配置文件进行了更改，这些更改需要仅保留在本地，因为当我们尝试使用它们时，Google-App-Engine 会阻塞它们，而且它们实际上仅用于开发目的。

如何使 maven 复制我`src/main/webapp/WEB-INF/web_local.xml`的`web.xml`目标`WEB-INF`目录？

我查看了 maven-assembly-plugin，但这并没有提供为输出文件命名的方法（而且它似乎专门用于构建 .jar 文件）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:18:06.667

您可以使用maven-war-plugin 插件配置的[webXml](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#webXml)属性指向自定义 web.xml

# java - 在andengine中扭曲/扭曲纹理

> ID：10704563
> 
> 赞同：3
> 
> 时间：2012-05-22T14:55:05.177
> 
> 标签：java, android, andengine

我很感兴趣我必须使用 AndEngine GLES1 的哪些方法来实现纹理的波浪效果。我需要有[http://hge.relishgames.com/demos.html](http://hge.relishgames.com/demos.html)示例 3\. 失真网格的效果。我必须使用什么，甚至什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:06:38.813

没有为此准备的课程。您将创建一个 Entity 或 Shape 的子类，该子类具有一个顶点网格，您可以手动转换其中的位置，以便它们的行为与您想要可视化的任何内容一样。

根据效果，您可以使用 GLES2 中的着色器获得相同的结果。=)

# c# - MVC 3 Razor UTF 字符编码问题

> ID：10704568
> 
> 赞同：0
> 
> 时间：2012-05-22T14:55:13.683
> 
> 标签：c#, html, asp.net-mvc-3, encoding, utf-8

我有一个应用程序并且有字符编码问题，该应用程序是土耳其语，当我在 facebook 上分享帖子时

```
Foto**ÄŸ**raf yar**Ä±ÅŸ**masÄ±na bir fotoÄŸraf yÃ¼kledi. Sen de bir Macbook Air kazanmak iÃ§in konulu fotoÄŸrafÄ±nÄ± yÃ¼kle, hayatÄ±na cam kat 
```

我得到这个文本。

在我将编码转换为 UTF8-NO BOM 后，我得到了这个文本。

所以这在 IE 中有效。但是在 chrome 和 firefox 中不起作用。

如果我只使用 UTF-8。所以我不使用 UTF-8 NO BOM

然后 IE 中断和 Chrome，FF 工作。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:17:08.410

编码字符串在这种情况下有效。

# html - 是否有没有任何样式的 html 元素？

> ID：10704575
> 
> 赞同：18
> 
> 时间：2012-05-22T14:55:30.453
> 
> 标签：html

`<div>`s 有一个块显示模型。

`<span>`s 有一个内联显示模型。

是否有没有任何呈现目的的元素，其唯一目标是对其他元素进行分组？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-22T14:57:57.040

不可以。每个元素都必须有一个`display`属性值。CSS 不允许空值的可能性。

`<div>`和`<span>`是通用分组元素，并且有许多非通用分组元素。您只需为上下文选择正确的一个（这取决于所涉及的标记和语义，而不是 的默认值`display`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-19T10:59:48.550

好吧 - 至少使用 CSS3 你可以更好地控制它，例如在你的 div 中

```
style="all:unset;" 
```

这可以用于与重置样式表相同的效果。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T14:57:49.823

`div`并且`span`没有语义意义；它们完全是为了对元素进行分组而制作的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-22T15:03:44.253

不，没有用于对任何类型的视觉元素进行分组的元素。

您可以使用`<thead>`和元素对表格中的`<tfoot>`元素`<tbody>`进行分组。`<tr>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-22T09:35:25.817

虽然`<div>`和`<span>`元素以及诸如`<article>`, `<aside>`, `<footer>`, `<header>`, `<main>`,`<nav>`等较新的语义元素`<section>`实现了分组的目的，但它们都带有默认的用户代理样式。

尽管可以根据需要覆盖这些样式，但 DOM 树本身内的元素嵌套可能会产生不良影响。例如，在`display: flex;`父元素上使用时，其直接子元素 ( `>`) 的渲染会受此影响。

新的 CSS`display: contents;`属性值旨在解决此问题：

> display: contents 使元素的子元素看起来好像是元素父元素的直接子元素，忽略元素本身。当使用 CSS 网格或类似布局技术时应该忽略包装元素时，这可能很有用。

然而，到 2020 年底，浏览器的支持并没有人们希望的那么好：

[https://caniuse.com/css-display-contents](https://caniuse.com/css-display-contents)

可以在规范中找到有关实现**应如何详细工作的更多详细信息：**

[https://drafts.c​​sswg.org/css-display/#valdef-display-contents](https://drafts.csswg.org/css-display/#valdef-display-contents)

# jsp - 如何在 JSF EL 中创建一个数组？

> ID：10704577
> 
> 赞同：17
> 
> 时间：2012-05-22T14:55:33.447
> 
> 标签：jsp, jsf, el

我想在 JSF EL 中创建一个数组。我怎样才能做到这一点？甚至可能吗？

为了说明我正在尝试的内容：

```
<rich:pickList addAllText="" addText="" removeAllText="" removeText="">
    <f:selectItems value="#{'Test', 'TestTest', 'TestTestTest'}" />
</rich:pickList> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-22T15:01:13.997

如果您使用的是 EL 3.0 或更高版本，则可以[直接在 EL 中构建集合](http://docs.oracle.com/javaee/7/tutorial/jsf-el004.htm)。

```
<f:selectItems value="#{['Test','TestTest','TestTestTest']}" /> 
```

如果你还没有使用 EL 3.0，你可以用一个技巧来解决*这个特殊情况。*[`fn:split()`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/fn/split.fn.html)

```
<html ... xmlns:fn="http://java.sun.com/jsp/jstl/functions">
...
<f:selectItems value="#{fn:split('Test,TestTest,TestTestTest', ',')}" /> 
```

无论哪种方式，这都需要至少 JSF 2.0 来支持`List<T>`in `<f:selectItems>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-14T10:00:47.457

EL 3.0 可以：

```
[1, 2, 3].toArray() 
```

这首先创建一个 List，然后将其转换为数组。

至少对于最近的 JSF 版本，您甚至不需要数组`f:selectItems`，任何 Iterable 都可以。所以：

```
<f:selectItems value="#{['Test', 'TestTest', 'TestTestTest']}" /> 
```

有关 EL 中集合构造的更多信息，请参阅[EL 3.0 规范 - 最终版本](https://java.net/projects/el-spec/downloads)，2.2 集合对象的构造。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T10:12:43.470

我正在使用来自 apache 的 ArrayUtils 来执行此操作。首先，将 ArrayUtils 类注册为 bean，以便您可以从 EL 访问它。

```
<managed-bean>
    <managed-bean-name>arrayUtils</managed-bean-name>
    <managed-bean-class>org.apache.commons.lang3.ArrayUtils</managed-bean-class>
    <managed-bean-scope>application</managed-bean-scope>
</managed-bean> 
```

那么你可以调用 ArrayUtils 的方法：

```
#{myBean.aMethod(arrayUtils.add(ArrayUtils.EMPTY_INT_ARRAY, 1))} 
```

如果您无法访问常量 EMPTY_INT_ARRAY，上述代码将不起作用。为此，我使用了 primefaces p:importConstants 组件，不确定是否可以在纯 JSF 中完成。

这就是我使用它的方式：

```
<p:importConstants type="org.apache.commons.lang3.ArrayUtils" var="ArrayUtils" /> 
```

# c# - 在 C# 中构建文件路径的最佳实践

> ID：10704579
> 
> 赞同：37
> 
> 时间：2012-05-22T14:55:48.583
> 
> 标签：c#, file, path, concatenation

我正在开发一个 C# 项目，我必须在其中构建各种文件和文件夹的路径。这些都在我在 Web.config 文件中指定的一个根文件夹下。

例如：

1.  “从我的 Web.config 开始：“D:\builds\”
2.  传递给 GetRelativePath() 以获取“D:\builds\5.2\5.2.9751”
3.  然后传递给 GetAutoSuitePath() 以获取“D:\builds\5.2\5.2.9751\AutoSuite\”
4.  然后传递给 ParseBrLog，它将读取“D:\builds\5.2\5.2.9751\AutoSuite\AASanity.csv”

我的路径是正确的，但我只想知道不完整路径的最佳做法是什么。我应该在每个文件夹的末尾添加一个“\”（“D:\Builds\5.2\”+“test.txt”），还是在我添加到路径的每个文件夹/文件的开头添加一个（“D :\Builds" + "\5.2" + "\test.txt"）？目前，我是双向的，并且想选择一种统一的方式。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-05-22T14:57:34.683

使用[`Path`](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)该类来构建您的路径。它会做正确的事。

> 对包含文件或目录路径信息的 String 实例执行操作。这些操作以跨平台的方式执行。

```
var full = Path.Combine(baseDir, dirFragment); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T15:01:59.547

使用[Path.Combine](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)连接路径标记。

如果路径是设置/更改扩展名的文件，请使用[Path.ChangeExtension](http://msdn.microsoft.com/en-us/library/system.io.path.changeextension)。

# .net - 如何更改 Windows 7 任务栏的位置

> ID：10704580
> 
> 赞同：1
> 
> 时间：2012-05-22T14:55:51.823
> 
> 标签：.net, windows, winapi, taskbar

我有一个带有窗体的程序，它的大小与 Windows 任务栏相同。表单必须放在 Windows 7 任务栏上。我做了这个，但用户可以选择放置表单的位置（左、右、下、上）。我想在我的应用程序窗体的同一位置更改 Windows 任务栏的位置。有没有办法用 C# 或 VB 做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:06:03.433

您可以通过编程方式移动任务栏，但只能移动到它允许的预设固定位置（即底部、左侧、右侧、顶部）。

[这里](http://bytes.com/topic/c-sharp/answers/247701-moving-windows-takbar)的例子。

# c# - 读取 xslx 文件并转换为 List

> ID：10704582
> 
> 赞同：0
> 
> 时间：2012-05-22T14:55:58.953
> 
> 标签：c#, asp.net, .net, xlsx

我有一个包含以下数据的 xslx 文件

```
 www.url.com
    www.url.com
    www.url.com
    www.url.com
    www.url.com
    www.url.com
    www.url.com
    www.url.com
    ... 
```

如您所见，我只使用了 1 列和很多行。我需要以某种方式从 xslx 文件中读取该列并将其转换为`List<string>`.

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T15:01:57.800

您可以使用[EPPlus](http://epplus.codeplex.com/)，很简单，如下所示：

```
 var ep = new ExcelPackage(new FileInfo(excelFile));
  var ws = ep.Workbook.Worksheets["Sheet1"];

  var domains = new List<string>();
  for (int rw = 1; rw <= ws.Dimension.End.Row; rw++)
  {
    if (ws.Cells[rw, 1].Value != null)
     domains.Add(ws.Cells[rw, 1].Value.ToString());
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T15:18:03.957

最简单的方法是使用 OleDb，你可以这样做：

```
List<string> values = new List<string>();

string constr = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\your\\path\\file.xlsx;Extended Properties=\"Excel 12.0 Xml;HDR=NO;\"";
using (OleDbConnection conn = new OleDbConnection(constr))
{
    conn.Open();
    OleDbCommand command = new OleDbCommand("Select * from [SheetName$]", conn);
    OleDbDataReader reader = command.ExecuteReader();
    if (reader.HasRows)
    {
        while (reader.Read())
        {
            // this assumes just one column, and the value is text
            string value = reader[0].ToString();
            values.Add(value);
        }
    }
}

foreach (string value in values)
    Console.WriteLine(value); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T14:58:17.893

您可以使用 OOXML 来读取文件，这个库可以简化您的工作[http://simpleooxml.codeplex.com](http://simpleooxml.codeplex.com)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-17T19:58:24.477

您是否尝试过使用[ClosedXML](https://github.com/ClosedXML/ClosedXML)？做起来超级简单。

```
 var wb = new XLWorkbook(FileName);

        var ws2 = wb.Worksheet(1);

        List<string> myData = new List<string>();

        foreach (var r in ws2.RangeUsed().RowsUsed())
        {
            myData.Add(r.Cell(1).GetString());
        } 
```

# typo3 - 使用分隔页的 id 定义菜单结束

> ID：10704585
> 
> 赞同：0
> 
> 时间：2012-05-22T14:56:06.003
> 
> 标签：typo3, typoscript

我有以下页面结构：

```
toppage
-page1
-page2
-page3
-page4
- (menu separator)
-page5
-page6
-page7
-page8 
```

Page1 到 page4 用于定义水平主菜单。

Page5 到 page7 用于定义垂直侧边菜单。

以下排版用于主菜单：

```
lib.mainMenu = HMENU
lib.mainMenu.special = directory
lib.mainMenu.special.value = {$main_menu_start_id}

lib.mainMenu.entryLevel = 0

lib.mainMenu.1 = TMENU
lib.mainMenu.1 {
  // Fix to limit items in main menu
  maxItems = 4
} 
```

是否可以在打字稿中用类似以下的方法替换该`maxItems`方法？

*   获取菜单分隔符的 pageid。
*   使用一个语句说 mainMenu 应该在这个 pageid 结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:17:45.510

冒险的方法，我怀疑是否有可能用纯 TypoScript 做到这一点

相反，我建议使用`special=list`示例构建水平菜单（第 1-4 页）：

```
lib.mainMenu = HMENU
lib.mainMenu.special = list
lib.mainMenu.special.value = 1,2,3,4
lib.mainMenu.1 = TMENU
//etc 
```

然后将垂直菜单作为除前 4 项之外的所有其他项目的菜单

```
lib.sideMenu = HMENU
lib.sideMenu.excludeUidList = 1,2,3,4
lib.sideMenu.1 = TMENU
// etc 
```

**另一种方式**

您也可以将`hidden in menu`开头的页面调用它`horizontal menu items`，然后使用`special=directory`in`HMENU`来构建包含所有子项的菜单。在不更改 TS 的情况下添加/删除/更改项目也更容易：

结构体：

```
- horizontal menu items (uid: 123, hidden in menu)
  |-- page 1
  |-- page 2
  |-- page 3
  --- page 4
- page 5
- page 6
- page 7 
```

TS：

```
lib.mainMenu = HMENU
lib.mainMenu.special = directory
lib.mainMenu.special.value = 123
lib.mainMenu.1 = TMENU
//etc

lib.sideMenu = HMENU
lib.sideMenu.1 = TMENU
// etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:14:50.733

有可能的。但是你不能使用 optionSplit 。

（未经测试）

```
lib.mainMenu.1.NO.allStdWrap {
  prepend = LOAD_REGISTER
  prepend {
    data = REGISTER:hideMenuItem
    ifEmpty = 0
    override = 1
    override.if.equals.field = doktype
    override.if.value = 199
  }
  if.isFalse.data = REGISTER:hideMenuItem
} 
```

我没有测试，但主要原则应该很清楚：创建一个内部寄存器，检查每个菜单项。如果有 doktype menu-separator (199) 的菜单项，则设置寄存器。如果设置了寄存器，则不呈现菜单。

# objective-c - Objective C 使用“完成”按钮实现 UIPickerView

> ID：10704592
> 
> 赞同：7
> 
> 时间：2012-05-22T14:56:40.713
> 
> 标签：objective-c, ios, uipickerview, xcode4.3

我正在尝试在 UIPickerView 中实现“完成”按钮，类似于此[链接下的按钮](http://www.google.ca/imgres?um=1&hl=en&client=firefox-a&sa=N&rls=org.mozilla:en-US:official&biw=1280&bih=895&tbm=isch&tbnid=71GJsMJn9OBRZM:&imgrefurl=http://timroadley.com/2012/02/26/core-data-basics-part-6-core-data-uipickerview/&docid=xJ68Wie2M1dtJM&imgurl=http://timroadley.com/wp-content/uploads/2012/02/RolePicker.jpg&w=280&h=252&ei=46e7T6fPD8LjggfJz7z-Cg&zoom=1&iact=rc&dur=379&sig=107602261705778553768&page=3&tbnh=156&tbnw=173&start=66&ndsp=28&ved=1t:429,r:18,s:66,i:254&tx=93&ty=91)

我查看了类参考，但找不到

谢谢

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-22T15:28:46.153

最简单的方法是在 Interface Builder 中对其进行建模。它是一个`UIView`包含 a`UIToolbar`和 a 的`UIPickerView`。

![在此处输入图像描述](../Images/ad48ce43bee4ed16e5d3a40e6e7a372c.png)

然后为它创建一个插座`UIView`并连接它。

![在此处输入图像描述](../Images/41795f0f1e981b5e80e6a1ec7a229312.png)

如果你有一个`UITextField`，你可以将你的自定义视图分配给它的`inputView`属性。

```
[self.textField setInputView:self.customPicker]; 
```

或者，您可以将选择器添加到主视图...

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.customPicker.frame = CGRectMake(0, CGRectGetMaxY(self.view.frame), CGRectGetWidth(self.customPicker.frame), CGRectGetHeight(self.customPicker.frame));
    [self.view addSubview:self.customPicker];
} 
```

...然后使用此方法显示或隐藏选择器。

```
- (void)setPickerHidden:(BOOL)hidden
{
    CGAffineTransform transform = hidden ? CGAffineTransformIdentity : CGAffineTransformMakeTranslation(0, -CGRectGetHeight(self.customPicker.frame));

    [UIView animateWithDuration:0.3 animations:^{
        self.customPicker.transform = transform;
    }];
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-22T15:29:59.020

我在我的 xib 中为“完成”按钮添加了一个 UIToolbar 和一个 UIBarButtonItem，并设置了框架，使其最初不可见（y 值等于父视图的高度）。

每次用户访问选择器时，我都会使用动画更改 UIDatePicker 和 UIToolbar 的框架（y 值），以便它与选择器一起从屏幕底部向上滑动，类似于键盘。

在下面查看我的代码。

```
- (IBAction)showPicker
{
    if(pickerVisible == NO)
    {
        // create the picker and add it to the view
        if(self.datePicker == nil) self.datePicker = [[[UIDatePicker alloc] initWithFrame:CGRectMake(0, 460, 320, 216)] autorelease];
        [self.datePicker setMaximumDate:[NSDate date]];
        [self.datePicker setDatePickerMode:UIDatePickerModeDate];
        [self.datePicker setHidden:NO];
        [self.view addSubview:datePicker];

        // the UIToolbar is referenced 'using self.datePickerToolbar'
        [UIView beginAnimations:@"showDatepicker" context:nil];
        // animate for 0.3 secs.
        [UIView setAnimationDuration:0.3];

        CGRect datepickerToolbarFrame = self.datePickerToolbar.frame;
        datepickerToolbarFrame.origin.y -= (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
        self.datePickerToolbar.frame = datepickerToolbarFrame;

        CGRect datepickerFrame = self.datePicker.frame;
        datepickerFrame.origin.y -= (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
        self.datePicker.frame = datepickerFrame;

        [UIView commitAnimations];
        pickerVisible = YES;
    }
}

- (IBAction)done
{
    if(pickerVisible == YES)
    {
        [UIView beginAnimations:@"hideDatepicker" context:nil];
        [UIView setAnimationDuration:0.3];

        CGRect datepickerToolbarFrame = self.datePickerToolbar.frame;
        datepickerToolbarFrame.origin.y += (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
        self.datePickerToolbar.frame = datepickerToolbarFrame;

        CGRect datepickerFrame = self.datePicker.frame;
        datepickerFrame.origin.y += (self.datePicker.frame.size.height + self.datePickerToolbar.frame.size.height);
        self.datePicker.frame = datepickerFrame;
        [UIView commitAnimations];

        // remove the picker after the animation is finished
        [self.datePicker performSelector:@selector(removeFromSuperview) withObject:nil afterDelay:0.3];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-28T08:26:32.763

我创建了一个自定义类，它支持多个方向：

日期时间选择器.h

```
 @interface DateTimePicker : UIView {
}

@property (nonatomic, assign, readonly) UIDatePicker *picker;

- (void) setMode: (UIDatePickerMode) mode;
- (void) addTargetForDoneButton: (id) target action: (SEL) action;

@end 
```

日期时间选择器.m

```
#define MyDateTimePickerToolbarHeight 40

@interface DateTimePicker()

@property (nonatomic, assign, readwrite) UIDatePicker *picker;

@property (nonatomic, assign) id doneTarget;
@property (nonatomic, assign) SEL doneSelector;

- (void) donePressed;

@end

@implementation DateTimePicker

@synthesize picker = _picker;

@synthesize doneTarget = _doneTarget;
@synthesize doneSelector = _doneSelector;

- (id) initWithFrame: (CGRect) frame {
    if ((self = [super initWithFrame: frame])) {
        self.backgroundColor = [UIColor clearColor];

        UIDatePicker *picker = [[UIDatePicker alloc] initWithFrame: CGRectMake(0, MyDateTimePickerToolbarHeight, frame.size.width, frame.size.height - MyDateTimePickerToolbarHeight)];
        [self addSubview: picker];

        UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame: CGRectMake(0, 0, frame.size.width, MyDateTimePickerToolbarHeight)];
        toolbar.barStyle = UIBarStyleBlackOpaque;
        toolbar.autoresizingMask = UIViewAutoresizingFlexibleWidth;

        UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle: @"Done" style: UIBarButtonItemStyleBordered target: self action: @selector(donePressed)];
        UIBarButtonItem* flexibleSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];
        toolbar.items = [NSArray arrayWithObjects:flexibleSpace, doneButton, nil];

        [self addSubview: toolbar];

        self.picker = picker;
        picker.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleBottomMargin;

        self.autoresizesSubviews = YES;
        self.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleTopMargin|UIViewAutoresizingFlexibleBottomMargin;
    }
    return self;
}

- (void) setMode: (UIDatePickerMode) mode {
    self.picker.datePickerMode = mode;
}

- (void) donePressed {
    if (self.doneTarget) {
        [self.doneTarget performSelector:self.doneSelector withObject:nil afterDelay:0];
    }
}

- (void) addTargetForDoneButton: (id) target action: (SEL) action {
    self.doneTarget = target;
    self.doneSelector = action;
} 
```

在视图控制器中使用自定义视图：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button addTarget:self
               action:@selector(buttonPressed:)
     forControlEvents:UIControlEventTouchDown];
    [button setTitle:@"Show picker" forState:UIControlStateNormal];
    button.frame = CGRectMake(100, 50, 100, 40.0);
    [self.view addSubview:button];

    CGRect screenRect = [[UIScreen mainScreen] bounds];
    CGFloat screenWidth = screenRect.size.width;
    CGFloat screenHeight = screenRect.size.height;
    picker = [[DateTimePicker alloc] initWithFrame:CGRectMake(0, screenHeight/2 - 35, screenWidth, screenHeight/2 + 35)];
    [picker addTargetForDoneButton:self action:@selector(donePressed)];
    [self.view addSubview:picker];
    picker.hidden = YES;
    [picker setMode:UIDatePickerModeDate];
}

-(void)donePressed {
    picker.hidden = YES;
}

-(void)buttonPressed:(id)sender {
    picker.hidden = NO;
} 
```

希望这可以帮助。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-31T17:43:53.497

有一个更优雅的解决方案。我不确定这是否是最近的（从 iOS7 开始），但这对我来说非常有用。

TJDatePicker.h

```
@protocol TJDatePickerActionDelegate <NSObject>
- (void)cancel:(id)sender;
- (void)done:(id)sender;
@end

@interface TJDatePicker : UIDatePicker
@property (strong, nonatomic) UIView *navInputView;
@property (weak, nonatomic) id<TJDatePickerActionDelegate> actionDelegate;
@end 
```

TJDatePicker.m

```
#import "TJDatePicker.h"

@interface TJDatePicker ()
@property (strong, nonatomic) TJButton *cancelButton;
@property (strong, nonatomic) TJButton *doneButton;
@end

@implementation TJDatePicker

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        [self updateSubviews];
    }

    return self;
}

- (void)layoutSubviews
{
    [super layoutSubviews];

    [self updateSubviews];
}

- (void)updateSubviews
{
    self.navInputView.frame = CGRectMake(0, 0, self.width, 45);
    self.cancelButton.frame = CGRectMake(5, 5, 80, 35);
    CGFloat width = 80;
    self.doneButton.frame = CGRectMake(CGRectGetMaxX(self.navInputView.frame) - width, self.cancelButton.frame.origin.y, width, self.cancelButton.height);
}

- (UIView *)navInputView
{
    if (!_navInputView)
    {
        _navInputView = [[UIView alloc] init];
        _navInputView.backgroundColor = [UIColor whiteColor];

        self.cancelButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [self.cancelButton setTitle:@"CANCEL" forState:UIControlStateNormal];
        [self.cancelButton addTarget:self action:@selector(cancelButtonPressed) forControlEvents:UIControlEventTouchUpInside];
        [_navInputView addSubview:self.cancelButton];

        self.doneButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [self.doneButton setTitle:@"DONE" forState:UIControlStateNormal];
        [self.doneButton addTarget:self action:@selector(doneButtonPressed) forControlEvents:UIControlEventTouchUpInside];
        [_navInputView addSubview:self.doneButton];
    }

    return _navInputView;
}

- (void)cancelButtonPressed
{
    [self.actionDelegate cancel:self];
}

- (void)doneButtonPressed
{
    [self.actionDelegate done:self];
} 
```

然后在实施时...

```
self.datePicker = [[TJDatePicker alloc] init];
self.datePicker.actionDelegate = self;
self.textField.inputAccessoryView = self.datePicker.navInputView; 
```

这里的关键是使用`inputAccessoryView`您`UITextField`计划设置的`UIDatePicker`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-01T18:02:08.723

您可以使用 ActionSheetPicker 在工具栏中获得“完成”按钮。它是自己构建它的绝佳选择。

[https://github.com/skywinder/ActionSheetPicker-3.0](https://github.com/skywinder/ActionSheetPicker-3.0)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-18T14:08:36.110

如果您正在处理表格视图单元格并且您没有使用 UITextField（因此您不会使用附件视图），这就是我所做的：

我创建了一个名为的表格视图单元格`GWDatePickerCell`，看起来像这样（不涉及 .nib 文件）。

`GWDatePickerCell.h`：

```
#import <UIKit/UIKit.h>

@interface GWDatePickerCell : UITableViewCell

@property (nonatomic, strong) UIDatePicker *datePicker;
@property (nonatomic, strong) UIToolbar *toolbar;
@property (nonatomic, strong) UIBarButtonItem *buttonDone;

@end 
```

`GWDatePickerCell.m`：

```
 #import "GWDatePickerCell.h"

    @implementation GWDatePickerCell

    - (id) initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {
        if(!(self=[super initWithStyle:style reuseIdentifier:reuseIdentifier])) return nil;

    _datePicker = [[UIDatePicker alloc] init];
    [_datePicker setMinuteInterval:5];
    [_datePicker setDatePickerMode:UIDatePickerModeDateAndTime];
    [self.contentView addSubview:_datePicker];

    _toolbar = [[UIToolbar alloc] init];
    _buttonDone = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:nil action:nil];
    _toolbar.items = @[[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil], _buttonDone];
    [self.contentView addSubview:_toolbar];

    return self;
}

- (void)layoutSubviews{
    [super layoutSubviews];
    CGRect r = self.contentView.bounds;
    r.origin.y +=44;
    r.size.height = 216;
    CGRect tb = self.contentView.bounds;
    tb.size.height = 44;
    _datePicker.frame = r;
    _toolbar.frame = tb;
}

@end 
```

现在，在表格视图中创建单元格时我要做的就是：

*   为完成按钮指定`@selector`。
*   设置正确的单元格高度`heightForRowAtIndexPath`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-22T15:10:09.790

成功！好的，我永远不会建议这样做，但这里是在您的特定教程代码中创建完成按钮的位置：

查看故事板，我们可以看到，当您单击“AddPersonTVC.h”（故事板右上角的类）中的“角色”框时，会弹出一个名为“RollPickerTVCell.h”的类

查看 RollPickerTVCell.h，我们注意到整个类是“CoreDataTableViewCell”的子类

```
@interface RolePickerTVCell : CoreDataTableViewCell <UIPickerViewDataSource, UIPickerViewDelegate> 
```

查看类“CoreDataTableViewCell.m”，我们终于找到了我们的uibarbuttonitem！

```
UIBarButtonItem *doneBtn =[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(done:)]; 
```

# magento-1.4 - magento admin - 在多存储后端检索当前选定的存储

> ID：10704595
> 
> 赞同：1
> 
> 时间：2012-05-22T14:56:50.697
> 
> 标签：magento-1.4, magento-1.5, magento, magento-1.6

是否可以在多商店 magento 后端检索当前选定的商店视图？我在一个 admi 页面（目录-> 管理类别-> 一般信息），我必须检索当前选择的商店/商店 ID。有可能吗？怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:17:27.163

有很多选项，但你应该能够使用，

```
Mage::app()->getRequest()->getParam('store'); 
```

如果您不是在寻找特定的 ID，则可以使用

```
Mage::getModel('core/store')->getCollection()->load()->getAllIds(); 
```

分配您自己的变量以与它们一起使用。

# .net - 删除DatagridView一个单元格的内容

> ID：10704597
> 
> 赞同：0
> 
> 时间：2012-05-22T14:56:59.377
> 
> 标签：.net, datagridview

我是 VB2008 的新手。你们能否建议我如何以编程方式删除 DataGridView 单元格的内容？

比如说，我有以下代码填充 DataGridView 中的数据。我只想删除循环通过列的 DataGrid 单元格的文本。例如，我正在使用以下代码循环遍历 GridView，如果我得到文本“Test4”，我想从 GridView 的单元格中删除/删除它。因此，只有单元格（1）的文本“Test4”将被删除。GridView 未绑定到任何数据库：

谢谢

> 公开课形式1
> 
> ```
> Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
>     Dim dt As New DataTable
>     dt.Columns.Add("income")
>     dt.Columns.Add("income1")
>     dt.Columns.Add("sum")
>     dt.Rows.Add("Test1", "Test")
>     dt.Rows.Add("Test2", "Test3")
>     dt.Rows.Add("", "Test4")
>     Me.DataGridView1.DataSource = dt
> End Sub
> 
> Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
>     Dim celldata As String
> 
>     For Each r As DataGridViewRow In Me.DataGridView1.Rows
> 
>         celldata = r.Cells(1).Value
>         MessageBox.Show(celldata)
>     Next
> End Sub End Class 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:02:50.837

你将不得不使用类似的东西

```
dt.Rows(i).Cells(i).Value = "" 
```

我相信这是格式，但是，您可能需要稍微交换一下。

# html - 身份验证重定向 - 在 Firefox 扩展的新选项卡中打开本地 HTML 文档

> ID：10704606
> 
> 赞同：3
> 
> 时间：2012-05-22T14:57:51.650
> 
> 标签：html, firefox, google-chrome-extension, firefox-addon

我目前正在尝试将 Chrome 扩展移植到 Firefox。

Chrome 扩展程序有一个“登录”页面，该页面以 HTML 文档的形式在新选项卡中打开。HTML 文档与其他扩展文件一起存储在本地目录中。用户输入一个 URL，该 URL 应该代表运行我们应用程序的服务器，用户将被要求登录。成功登录后，用户将被重定向回 options.html 页面，该页面已更新以显示用户的偏好。

我想在 Firefox 扩展中复制它，即我想避免在 XUL 中编写任何东西来构建选项页面。

我尝试使用我的 HTML 页面打开一个新选项卡，如下所示：

```
var url = "chrome://myextension/content/options.html";
        var win = Components.classes['@mozilla.org/appshell/window-mediator;1']
                    .getService(Components.interfaces.nsIWindowMediator)
                    .getMostRecentWindow('navigator:browser');
        win.gBrowser.selectedTab = win.gBrowser.addTab(url); 
```

但我不喜欢这个有几个原因：1）新选项卡中的导航栏显示“chrome:// ...” URL，2）它破坏了身份验证过程。身份验证是使用 OAuth 类型系统完成的，并且当前 URL 被传递到 API 中，以便用户可以在身份验证成功后被重定向回来。身份验证失败，“chrome://”作为 URL 的一部分。

只是出于好奇，我尝试像这样对 URL 进行硬编码：

```
http://myextension/content/options.html 
```

并且用户实际上已成功通过身份验证，但随后重定向显然失败了。

Chrome 扩展程序似乎没有任何问题或奇怪的黑客攻击。据我所知，打开它的工作原理是这样的：

```
chrome.tabs.create({"url":chrome.extension.getURL("options.html"), "selected":true}); 
```

稍后引用选项卡的 URL，以便我们可以重定向回它，就像这样：

```
var options_url = chrome.extension.getURL('options.html'); 
```

所以，我想知道：在不使用“chrome://”“协议”的情况下，使用 Firefox 扩展在新选项卡中打开本地 HTML 文档的最佳方法是什么？是否有类似的方法可以使用 Google Chrome 扩展来完成？

更新 23/5/12

所以这篇文章说 chrome:// URL 不能从网络访问，只能在本地访问。

[http://adblockplus.org/blog/web-pages-accessing-chrome-is-forbidden](http://adblockplus.org/blog/web-pages-accessing-chrome-is-forbidden)

我认为这可能是我的身份验证失败的原因。我肯定在寻找一种方法让我的扩展程序在不使用 chrome:// 的情况下在窗口或选项卡中显示本地 HTML 文件。

2012 年 7 月 6 日更新

这是我的（希望是临时的）解决方案：

用户输入运行我们应用程序的服务器的 URL。他/她被重定向到应用程序登录页面，但我没有传递“chrome://myextension/content/options.html”作为身份验证后重定向回的 URL，而是传递了一个虚假的 URL，即“http:/ /myextension/thisis/madeup.html”。

在我的扩展程序的 overlay.js 中，我设置了一个 HTTP 请求侦听器，它侦听被请求的虚假 URL。当虚假 URL 发生 GET 时，我取消请求，并在“chrome://myextension/content/options.html”打开真实的本地存储页面。

请参阅以下参考资料：

[https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIObserver](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIObserver) https://developer.mozilla.org/en/XUL_School/Intercepting_Page_Loads#HTTP_Observers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T00:32:43.633

如果您尝试为 OAuth 调用执行此重定向，则应尝试使用Mozilla 的[OAuthorizer](https://github.com/mozilla/oauthorizer)而不是自己执行重定向工作。希望有帮助！

# ios - 为 iOS5 和 Storyboard 更新 MGSplitViewController 的已知努力？

> ID：10704609
> 
> 赞同：3
> 
> 时间：2012-05-22T14:57:53.773
> 
> 标签：ios, ipad, storyboard, uisplitviewcontroller

我正在开发一个需要隐藏/显示拆分视图的主控制器的 iPad 应用程序。

相关的 SO 答案请注意 Matt Gemmell 的[MGSplitViewController](https://github.com/mattgemmell/MGSplitViewController)：

*   [如何在 ipad 的 UiSplitviewcontroller 中隐藏主视图](https://stackoverflow.com/a/9829558/143136)
*   [如何以编程方式隐藏 UISplitViewController 的主要部分？](https://stackoverflow.com/a/9105504/143136)
*   [在 Universal App 中集成 MGSplitViewController](https://stackoverflow.com/q/6954040/143136)
*   [MGSplitViewController 使用情节提要](https://stackoverflow.com/q/9590453/143136)

MGSplitViewController 将是完美的——甚至提供一种调整主视图与细节视图比例的方法。

极好的！除非它与使用故事板和 ARC 的最新 Xcode 不兼容。

我看到一个拉取请求（从 9 个月前开始）转换为[适用于 iOS4 的 ARC，](https://github.com/mattgemmell/MGSplitViewController/pull/43)但这仍然需要一些工作才能使故事板友好。

有谁知道正在努力更新这个开源的宝石以在最新的 iOS 开发环境中正常运行？

如果做不到这一点，如何将其集成到 Xcode 故事板/iOS5 项目中的示例/教程将非常有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:37:56.690

我能够解决故事板问题。我有一个带有主细节情节提要设置的通用应用程序，因此我将它们全部保留，并将应用程序的初始化更改为不使用情节提要，而是以编程方式在我的 applicationDidFinishLaunching 中进行设置，如下所示：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];

    self.masterController = [storyboard instantiateViewControllerWithIdentifier:@"masterController"];
    self.detailController = [storyboard instantiateViewControllerWithIdentifier:@"detailController"];

    self.splitViewController = [[MGSplitViewController alloc] init];
    self.splitViewController.masterViewController = self.masterController;
    self.splitViewController.detailViewController = self.detailController;
    ACALandingVC* landingVC = [self.detailController.childViewControllers objectAtIndex:0];
    landingVC.splitController = self.splitViewController;
    self.splitViewController.delegate = landingVC;

    //self.splitViewController.splitWidth = 5;
    self.splitViewController.allowsDraggingDivider = YES;
    self.splitViewController.dividerStyle = MGSplitViewDividerStylePaneSplitter;
    self.splitViewController.splitPosition = 350;
    self.splitViewController.splitWidth = 10;

    self.window.rootViewController = self.splitViewController;
}
else {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:nil];
    UITabBarController* firstVC = [storyboard instantiateInitialViewController];
    self.window.rootViewController = firstVC;
    [[UINavigationBar appearance] setTintColor:[UIColor lightGrayColor]];
}

[self.window makeKeyAndVisible]; 
```

我的 AppDelegate.h 看起来像：

```
@class MGSplitViewController;

@interface ACAAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, strong) MGSplitViewController* splitViewController;
@property (nonatomic, strong) UITabBarController* masterController;
@property (nonatomic, strong) UINavigationController* detailController;

@end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-14T03:38:07.970

看起来如果你等待的时间足够长，每一个好的包裹都会得到应有的关注。

再次感谢 Matt Gemmell 提供的出色软件包，并感谢 Heath Borders 采取主动。

[Heath Borders 移植到 iOS 5.1](https://github.com/hborders/MGSplitViewController)

# android - 适用于 Android 和 iOS 的 Unity3D：二维码解码（阅读器）

> ID：10704611
> 
> 赞同：2
> 
> 时间：2012-05-22T14:57:57.227
> 
> 标签：android, ios, unity3d, qr-code, zxing

是否有适用于 Unity3D（Android 和 iOS）的良好 QR 解码脚本或插件？

或者有人已经成功地将 ZXing 集成到 Android 和 iOS 的 Unity3D 中？[这](http://ydaira.blogspot.de/2012/05/how-to-decode-qr-code-using-unity3d.html)是一个很好的网络摄像头解决方案，但 WebCamTexture 并不总是适用于[Android](http://forum.unity3d.com/threads/123732-Webcam-on-Android-not-working) :(

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T02:07:08.130

有一个非免费（50 美元）插件可用：[Antares QR 码](http://u3d.as/content/neo-pax/antares-qr-code/1QF)

如果您对支付插件不感兴趣，那么您必须创建自己的插件。由于 ZXing 可用于 iOS 和 Android，因此您可以为其创建 C# 包装器，然后在 iOS 上使用本机插件并在 Android 上使用 C#-to-Java 扩展来获得您需要的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T13:55:39.563

还有一个适用于 Android 和 iOS 的条形码和 QRCode 的其他插件：[Easy Code Scanner](http://u3d.as/content/c4mprod/easy-code-scanner/3sM)

您只需调用一个方法（适用于 Android 和 iPhone 的通用 C# API），它就会自动启动一个摄像头视图/预览来解码条形码/QR 码并在回调中返回它的文字字符串。它基于 ZBar，您无需集成任何内容，所有内容都已自行打包。

该插件可以为您返回预览期间拍摄的图片（作为 Texture2D/图像），也可以在脚本中直接解码 Texture2D/图像，无需相机预览/拍摄。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-28T04:07:43.763

OP 链接到的博客现在在[此处](http://ydaira.blogspot.com/2012/09/how-to-decode-qr-codes-using-unity3d.html)为 Android 设备提供免费选项您还可以在 Unity 教程中查看此相关视频 [ARCamera prefab](https://www.youtube.com/watch?v=-v0OJdqxFpo) 您可能需要修复一些小的编译错误以使一切正常由于 Vuforia 的较新版本具有不同的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T16:45:17.163

您还可以使用内置支持二维码读取的免费[metaio SDK 。](http://www.metaio.com/products/sdk/)

# jquery-ui - DNN jQuery 冲突 - 弹出窗口不会关闭

> ID：10704615
> 
> 赞同：0
> 
> 时间：2012-05-22T14:58:10.760
> 
> 标签：jquery-ui, jquery, dotnetnuke

我正在开发一个 DNN 站点，该站点是在我来这里之前建立的。

我相信与 jQuery 存在一些冲突，这会阻止附加日历（链接）事件中的模式弹出窗口无法正确关闭：

[http://www.sim-one.ca/NewsandEvents/calendar-of-events.aspx](http://www.sim-one.ca/NewsandEvents/calendar-of-events.aspx)

我尝试一次消除一个脚本调用，看看哪一个可能会搞砸这一切，但无济于事。

当我用默认主题测试它时，它就像一个魅力。

有任何想法吗？以前有人遇到过这样的事情吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:01:47.047

你在那个页面上有很多 404 错误，首先确保文件在他们的位置。例如，未找到[http://www.sim-one.ca/NewsandEvents/Portals/_default/Skins/SimTwo/includes/js/jquery.listnav-2.1.js 。](http://www.sim-one.ca/NewsandEvents/Portals/_default/Skins/SimTwo/includes/js/jquery.listnav-2.1.js)确保此路径存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T19:57:48.427

我同意 Anrie 的观点，即您的参考资料已损坏。例如，`http://www.sim-one.ca/NewsandEvents/Portals/_default/Skins/SimTwo/includes/css/custom-theme/jquery-ui-1.8.9.custom.css`显示 404 但`http://www.sim-one.ca/Portals/_default/Skins/SimTwo/includes/css/custom-theme/jquery-ui-1.8.9.custom.css`

您可以使用以下链接： `/Portals/_default/Skins/SimTwo/includes/css/custom-theme/jquery-ui-1.8.9.custom.css`为了在皮肤文件中修复此问题或使用`<%= SkinPath %>`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-05T14:26:52.947

尝试添加 return false; 调用 dnnModal.show() 后在您的活动中

# neo4j - 了解密码输出

> ID：10704620
> 
> 赞同：0
> 
> 时间：2012-05-22T14:58:29.650
> 
> 标签：neo4j, cypher

我有一个这样的图表： (2)<-[0:CHILD]-(1)-[1:CHILD]->(3) 用文字表示：节点 1,2 和 3（都有名字）；边 0 和 1

我写了以下密码查询：

```
START nodes = node(1,2,3), relationship = relationship(0,1) 
RETURN nodes, relationship 
```

结果得到：

```
==> +-----------------------------------------------+
==> | nodes                          | relationship |
==> +-----------------------------------------------+
==> | Node[1]{name->"Risikogruppe2"} | :CHILD[0] {} |
==> | Node[1]{name->"Risikogruppe2"} | :CHILD[1] {} |
==> | Node[2]{name->"Beruf 1"}       | :CHILD[0] {} |
==> | Node[2]{name->"Beruf 1"}       | :CHILD[1] {} |
==> | Node[3]{name->"Beruf 2"}       | :CHILD[0] {} |
==> | Node[3]{name->"Beruf 2"}       | :CHILD[1] {} |
==> +-----------------------------------------------+
==> 6 rows, 0 ms 
```

现在我的问题是：为什么我两次成为所有节点，三次成为关系？我只想一次全部搞定。

谢谢你的时间^^

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-08T21:51:55.280

Cypher 的工作方式与 SQL 非常相似。当您在 START 子句中创建变量时，您有点`from nodes, relationships`在 SQL（表）中进行操作。您获得两者所有可能值的笛卡尔积的原因是因为您没有对它们进行任何类型的过滤`match`或`where`过滤，所以基本上就像：

```
select *
from nodes, relationships 
```

您忘记在表之间放置外键关系的地方。

在 Cypher 中，您通常通过匹配来做到这一点：

```
start n=node(1,2,3), r=relationship(0,1)
match n-[r]-m // find where the n nodes and the r relationships point (to m)
return * 
```

但是由于您没有匹配项，因此您将获得笛卡尔积。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:14:27.553

除非您进行一些匹配，否则您应该只看到一次节点和关系。

试图重现您的问题，但我无法重现。

[http://tinyurl.com/cobd8oq](http://tinyurl.com/cobd8oq)

您是否可以为您的问题创建一个 console.neo4j.org 示例？

谢谢，

安德烈斯

# c# - 比较 VS2010 中 dataGridView 表中的值 - C#

> ID：10704621
> 
> 赞同：0
> 
> 时间：2012-05-22T14:58:30.833
> 
> 标签：c#, visual-studio-2010, excel-2007

我编写了一个代码，显示 6 个 DataGridView 表，其中包含来自 excel 的值，其中包含来自 6 家不同银行的欧元和美元汇率。汇率是从 excel 文件中导入的。现在我必须比较它们中的每一个并显示欧元买入率的最小值（Куповен курс）和卖出率的最大值（Продажен/Откупен курс）和美元买入率的最小值（Куповен курс）和卖出率的最大值（Продажен/Откупен курс）。我需要一些关于 C# 代码的帮助，这些代码将比较这些值并通过单击“比较”按钮将它们显示在 TextBox 中。

这是我的应用程序中的图片：

[http://uploadpic.org/v.php?img=CYRmqhbE6F](http://uploadpic.org/v.php?img=CYRmqhbE6F)

我尝试使用此代码，但给我错误：

```
private void button7_Click(object sender, EventArgs e)
    {

        string s = dataGridView1.Rows[1].Cells[1].Value.ToString();
        string t = dataGridView2.Rows[0].Cells[6].Value.ToString();
        string k = dataGridView3.Rows[0].Cells[1].Value.ToString();
        string l = dataGridView4.Rows[0].Cells[4].Value.ToString();
        string m = dataGridView5.Rows[0].Cells[2].Value.ToString();
        string n = dataGridView6.Rows[0].Cells[3].Value.ToString();

        string[] kupoven = new string[] { s,t,k,l,m,n};

        int length = kupoven.Length;

        int last = length - 1;

        int largest = kupoven[];

        for (int i = 1; i <= length / 2; i++)
        {

            if (kupoven[i] > kupoven[last] && kupoven[i] > largest) largest = arr[i];

            else if (kupoven[last] > largest) largest = kupoven[last];

            last--;

        }

        return largest;

    } 
```

有了这个，我将所有欧元值放入字符串（s，t，k，l，m，n）中，然后将它们放入数组中，然后尝试从数组中获取最大值。我认为问题出在字符串类型上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:25:13.447

您发布的代码很可能无法编译......您应该始终发布可编译的代码，除非您的问题是关于未编译的代码。我强烈建议您尝试发布符合[sscce](http://sscce.org/)的问题：[http ://sscce.org/](http://sscce.org/)

话虽如此，如果你想要最大值，我会做一些类似的事情：

```
private void button7_Click(object sender, EventArgs e)
{
    double s = double.Parse(dataGridView1.Rows[1].Cells[1].Value.ToString());
    double t = double.Parse(dataGridView2.Rows[0].Cells[6].Value.ToString());
    double k = double.Parse(dataGridView3.Rows[0].Cells[1].Value.ToString());
    double l = double.Parse(dataGridView4.Rows[0].Cells[4].Value.ToString());
    double m = double.Parse(dataGridView5.Rows[0].Cells[2].Value.ToString());
    double n = double.Parse(dataGridView6.Rows[0].Cells[3].Value.ToString());

    double[] kupoven = new double[] { s,t,k,l,m,n};
    double max = kupoven.Max();
} 
```

当然，那只会将最大值存储在局部变量 max 中。要在文本框中显示最大值，您必须编写更多代码。我也觉得仅仅显示最大值可能还不够，因为您正在比较不同银行之间的汇率。

# c++ - 到达主函数结束时发生调试运行时堆栈错误

> ID：10704625
> 
> 赞同：1
> 
> 时间：2012-05-22T14:58:52.403
> 
> 标签：c++, c, visual-studio-2010, debugging

我使用 f2c 转换器 (f2c) 将一些旧的 Fortran 代码转换为 C，并在 Windows 7（64 位）上创建了 Visual Studio 10 解决方案。我还必须将我的 C++ 程序（test.cpp，包含我的 main 函数）与 f2c 库（使用 nmake 在我的系统上构建）链接起来。

程序运行，但是一旦到达 main 函数的末尾，我就会收到以下 Debug 错误：

```
Stack around the variable 'qq' was corrupted
Stack around the variable 'pf' was corrupted
Stack around the variable 'ampls' was corrupted 
```

我想知道这是否可能是由于 f2c 转换器在转换后的 C（来自 Fortran）文件中进行的“更正”：

```
/* Parameter adjustments */
--x1;
--xabs;
--ximag;
--xreal;
--work4;
--work3;
--work2;
--work1;
--ampls;
--pf;
--qq;
--tri; 
```

这似乎有点奇怪，因为所有这些变量都是 C 数组，而且我认为 f2c 程序只是在做一些指针运算，以便数组中的索引 0 变为索引 1，与 Fortran 类似。

我不知道这是否也可能是由于转换后的代码访问尚未分配的数组元素时出现问题。

调试此错误并修复它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:33:32.687

潜在原因：

*   此错误通常与超出数组（动态或静态数组）边界的写入有关。通过在 -ve 索引或索引 >= size_of_array 中写入\获取值可能会发生此错误。
*   如果您的指针未设置到正确的位置，也会出现此错误。（例如`ptr = 0`，，`ptr = 55`指向已删除（释放；或已空闲）的内存，或任何无效地址）

在我看来，调试错误的最佳方法是逐步调试程序并观察这些指针值。他们一定有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T17:33:59.420

你说的可能是真的。我建议创建一个非常小的程序，它使用数组并像 f2c 一样递减指针。就像是

```
int aa[10];
int *pa = aa;
--pa;
pa[1] = ... 
```

即小规模测试可疑代码。您可以通过这种方式隔离问题的原因。（找到解决方法是另一回事）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T15:23:19.213

您是否使用 crt 的调试版本进行编译？这可能会给你更多的信息。

此外，您的库是否有可能是用 C 构建的，而您的应用程序是用 C++ 编写的？

您提到的那些错误有时是由于不同的调用约定。您确实声明它是一个 64 位应用程序，所以它应该不是问题（所有 64 位应用程序都使用相同的调用约定），但值得研究。

是否可以将所有 fortran 转换的代码添加到 Visual Studio 而不是单独制作？

# configuration - Nginx：将所有子域重写为www，除了一个？

> ID：10704627
> 
> 赞同：0
> 
> 时间：2012-05-22T14:58:57.143
> 
> 标签：configuration, nginx, rewrite

假设我有一对服务器，由于部署方式，需要使用相同的`nginx.conf`. 其中一台服务器位于`staging.someserver.com`，另一台位于`www.someserver.com`。

我想要的是一个单独的重写行或一个 if 条件，它将域上的所有内容（主要是 http 上的 www 和非 www，以及 https 上的非 www）重定向到 ，`https://www.someserver.com/`并且`http://staging.someserver.com/`重定向到`https://staging.someserver.com/`，但不重定向到`https://www.someserver.com/`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T07:04:54.330

这是 Nginx 配置的一个技巧：HTTP 块的第一个服务器块将是“默认”配置。

因此，您可以在第一个服务器块中重定向所有内容，并使用您的 www 创建另一个服务器块。配置 ！

那是最好的解决方案。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-23T11:41:15.540

我不知道这是否是最好的方法，但我想出了一些办法：

```
server {
    listen 443 default deferred;

    # ...

    if ($host !~ (staging)|(www).*)
        rewrite ^(.*) https://www.someserver.com$1 permanent;
    }
}

server {
    listen 80;

    # ...

    if ($host !~ staging.*) {                                   
        rewrite ^(.*) https://www.someserver.com$1 permanent;    
    }                                                           
    if ($host ~ staging.*) {                                    
        rewrite ^(.*) https://staging.someserver.com$1 permanent;
    }                                                           
} 
```

# xcode - NSTextView / NSScrollView - 几个问题来帮助我理解它的正确用法

> ID：10704629
> 
> 赞同：1
> 
> 时间：2012-05-22T14:59:01.287
> 
> 标签：xcode, cocoa, nstextview, nsscrollview

我创建了一个“注释”字段，旨在保存我想存储在自定义对象中的多段文本。最初，我只是使用 NSTextField 作为临时解决方案，但这不允许我滚动或拥有多段文本......

在 IB 中，我放置了一个 NSTextView（它似乎被包裹在一个 NSScrollView 中。）在执行我的程序时，似乎允许我在多个段落中输入文本、滚动等。简而言之，它看起来正是我想要的喜欢它。到现在为止还挺好。

现在，我需要从此字段中检索数据并将其存储在我的自定义对象中。这是我在开发人员文档中有点迷失的地方......

我的目标相当简单：

1.  允许用户在框中键入。

2.  当用户移动到另一个字段时，将框的内容存储到我的自定义对象中的变量（数组等）中，留下注释字段。

3.  下次查看记录时，在文本框中显示用户存储的文本。

其次，有没有一种简单的方法来检索数据并将其存储到我的自定义对象（例如 NSString 对象）中的“notes”变量中？我认为有多个将排除 NSString 对象作为此处的选项，但也许我是错了）还是我在这里进入了一个更复杂的领域（例如必须将其存储在 NSString 对象的数组中等）？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:40:41.307

您可以使用`-string`由 NSText 定义的数据（例如`NSString *savedString = [aTextView string]`）

您的保存代码可以放在您的`NSTextDelegate`（读取，委托`NSTextView`，因为它是直接超类）中`– textDidEndEditing:`，当编辑完成时（例如，当用户在视图外单击时）或其他方法之一将调用其中.

如果您清空了文本视图或其他内容，然后重新加载保存的字符串，请`[textView setString:savedString]`在编辑开始之前使用。

NSTextDelegate 文档：[这里](http://developer.apple.com/library/mac/#documentation/cocoa/Reference/NSTextDelegate_Protocol/Reference/Reference.html)。

* * *

当您说“将框的内容存储到变量（数组等）中时，我不确定您的意思。您是否希望自定义注释数组？文本视图存储一串数据，所以最简单的方法存储它的值是使用一个字符串；如果您需要一组注释，则必须将字符串值拆分为不同的段落，这应该不会太难。

# html - 在这种情况下防止换行

> ID：10704630
> 
> 赞同：0
> 
> 时间：2012-05-22T14:59:03.413
> 
> 标签：html, css, whitespace, nowrap

我试图防止在这个 Html 中换行

[http://jsfiddle.net/DD3v8/](http://jsfiddle.net/DD3v8/)

碰巧当我调整窗口大小时，图标和文本都会换行。我已经尝试过使用空白 CSS 属性。我也尝试过，一种表格方法，但行为是一样的

谁能弄清楚发生了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:08:20.390

试试这个：

```
.line {
            height: 44px; 
            width: 100%; 
            display: inline-block; 
            background-color: #6c7987;
            white-space: nowrap;
            position: relative;
        }

        .icon {
            position: absolute;
            left: 0;
            height: 44px; 
            width: 90px; 
            background-color: 
            #FF0080; 
            color: white;
            text-align: center;
            line-height: 44px;
            font-family: Arial;
            float: left;
            font-size: 12px;
            font-weight: bold;
            padding: 0;
        }

        .title {
            position: absolute;
            left: 90px;
            color: white;
            line-height: 44px;
            text-align: left;
            padding: 0 0 0 10px;
            font-family: Arial;
            float: left;
            font-size: 12px;
            display: inline;
            white-space:nowrap;
        }

        .botoes {

            position: absolute;
            width: 300px;
            right: 0
        }

        .botao {
            width: 46px;
            height: 45px;
            float: right;
            line-height: 44px;
            text-align: center;
            display: block;
            white-space:nowrap;
            cursor: pointer;
        }

        .botaoVerRecurso {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoVerRecurso:hover {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoEditarRecurso {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoEditarRecurso:hover {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoFavRecurso {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoFavRecurso:hover {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoPartRecurso {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoPartRecurso:hover {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoApagarRecurso {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .botaoApagarRecurso:hover {
            background: url('http://www.think-cell.com/images/cross.png') center no-repeat;
        }

        .clear {
            clear: both;
        } 
```

​</p>

解释很简单：用浮动，你不能给一个持有人更多的宽度，超过持有人的高度，浮动会自动下降它，并断线。

如果您使用位置，请像这样使用它：

CONTAINER（位置：相对）
子元素（位置：绝对，顶部：0，左侧：0）<放在左上角
子元素（位置：绝对，底部：0，右：0）<放在右下角

在 W3C：[http ://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:15:46.530

如果我正确理解您的问题，您需要能够在没有文本和“x”图标跳下的情况下调整窗口宽度，是这样的：

**移除 CSS`.title`**

```
min-width: 500px; 
```

请参阅此[小提琴示例](http://jsfiddle.net/zuul/DD3v8/3/)！

# vector - 使用 OpenLayers 和 Google Layer 进行多点触控事件时的矢量移动和缩放

> ID：10704636
> 
> 赞同：0
> 
> 时间：2012-05-22T14:59:25.737
> 
> 标签：vector, openlayers, multi-touch

我将 OpenLayers 与 Google Layer 一起使用，并且我对地图上的矢量有一种奇怪的行为。

在移动设备 (Android) 上，当在地图上执行多点触控事件（缩放）时，矢量会在 touchmove 事件处于活动状态时移动和缩放。但是当触发 touchend 事件时，向量会在正确的位置刷新，并具有它们的真实大小。

OpenstreetMap 图层不会发生这种情况。我还在我的手机上测试了一些实现 OpenLayers & Google Layer & 矢量层的网页，它们都有同样的问题。知道为什么吗？我测试了这个，如果有人想重现： http: [//www.macfh.co.uk/Test/Google_with_OpenLayers.html](http://www.macfh.co.uk/Test/Google_with_OpenLayers.html) 使用多点触控事件，标记正在移动/缩放，然后回到它的初始位置。

我已经注意到了sphericalMercator 的特殊性，所以我认为这不是问题。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:43:53.343

google 图层的平铺定位是通过他们的 api 完成的，这不允许使捏缩放工作与对所有其他图层的工作方式相同：捏缩放不适用于 google 图层。

如果您想让捏缩放起作用，您应该考虑使用可直接访问图块的图层（OSM、Bing、...）。您的手机会感谢您减少要加载的脚本数量；）。

# asp.net - ASP.Net 刷新 GridView

> ID：10704638
> 
> 赞同：0
> 
> 时间：2012-05-22T14:59:30.163
> 
> 标签：asp.net, visual-studio-2010, visual-studio, asp.net-controls

下午所有，

我正在使用 Visual Studio 2010。我有一个用于记录会议记录的网页。该页面有一个部分，用户可以使用该部分将“操作”添加到站点。我可以让用户成功向页面添加操作。

我遇到的问题是我在网页上也有一个网格视图，并且希望在用户将新的“操作”添加到页面后刷新。以便用户可以看到它已提交。

我是 .net 环境和 VB 的新手，我不确定 100% 如何完成这项任务。

我的 .aspx 页面中有以下代码....

```
 Submitted Actions:
    <hr />
        <!-- DataSource for submitted Actions -->

        <asp:SqlDataSource ID="OutstandingActionsDS" runat="server" 
            ConnectionString="<%$ ConnectionStrings:SMCConnectionString %>" 
            SelectCommand="Populate_grdOutstandingActions" 
            SelectCommandType="StoredProcedure"></asp:SqlDataSource>

        <!-- Gridview that holds submitted Actions -->

        <asp:GridView ID="GridView1" runat="server" DataSourceID="OutstandingActionsDS">
        </asp:GridView>
    <br />
    <br />
        New Actions to Record:
    <hr />

            <!-- Add new Action -->
            <asp:Panel ID="pnlHeaderAction" runat="server" CssClass="pnl" Width="740px">

                <div style="float:left;">
                    &nbsp;Record New Actions
                </div>
                <div style="float:right;">
                    <asp:Label ID="lblShowHideAction" runat="server" ></asp:Label>
                </div>
                <div style="clear:both"></div>
            </asp:Panel>
            <asp:Panel ID="pnlInfoAction" runat="server" CssClass="pnlBody">
               <table> 
    <tr>
           <td  style="width:498px; height: 15px;"><h5>Actions:</h5></td>
          <td style="width:130px; height: 15px;"><h5>Owner:</h5></td>
          <td style="height: 15px;"><h5>&nbsp;Target Date:</h5></td>
    </tr>
    </table>
    <table style="width: 99%">
       <tr>
          <td style="width: 495px">
             <asp:TextBox ID="txtAction" runat="server" TextMode="MultiLine" 
                                Width="493px" Height="50px" style="font-family:Verdana"></asp:TextBox>
           </td>
           <td style="width: 132px" valign="top">
              <asp:TextBox ID="txtOwner" runat="server"  Height="50px" 
                                width="128px" style="font-family:Verdana"></asp:TextBox>
           </td>
            <td valign="top">
              <asp:TextBox ID="txtTargetDate" runat="server" width="89px" style="font-family:Verdana"></asp:TextBox>
            </td>
          </tr>
         </table>
        <br />
             <div style="text-align: right;">
                         <asp:Button ID="btnAddAction" runat="server" Text="Add New Action" CssClass="button" />
              </div>
            </asp:Panel> 
```

这是我的VB页面代码...

```
 Protected Sub btnAddAction_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnAddAction.Click

    Dim oActionClass As New ActionClass

    With oActionClass
        .Action = txtAction.Text
        .Owner = txtOwner.Text
        .TargetDate = New SmartDate(Convert.ToDateTime(txtTargetDate.Text))

          oActionClass.ActionID = ActionClassDAL.AddActionClass(oActionClass)
        ClearActions()
    End With

    End Sub

    Private Sub ClearActions()
       txtAction.Text = ""
       txtOwner.Text = ""
       txtTargetDate.Text = ""

    End Sub 
```

这似乎是一个简单的请求，但我似乎找不到任何东西来告诉我如何根据用户向系统添加操作来刷新网格。

非常感谢您提供的任何帮助。

问候

贝蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:05:25.147

您只需要将数据绑定到 GridView1。我认为是这样的：me.GridView1.databind(); 在您的方法 btnAddAction_Click 的底部。

我希望我对您有所帮助。

# c# - 从cs类传递参数

> ID：10704645
> 
> 赞同：0
> 
> 时间：2012-05-22T15:00:01.520
> 
> 标签：c#, asp.net

我正在使用 asp.net 开发一个 Web 应用程序，我想将参数表单 class.cs 文件传递​​给 aspx.cs 文件。但是我没有显示或检索任何内容。以下是我的代码：

Class.cs 类：

```
public class Class1
{

     public string _time = "TIME ";

     public String _RetrievedTime(string time)
     {
           return  _time = time;
     }
 } 
```

aspx.cs 代码：

```
 protected void Button4_Click(object sender, EventArgs e)
    {
        String f = Request.QueryString["_time"];

        //a = f.ToString();
        Class1 tmp = new Class1();
        String q;
        q = tmp._RetrievedTime(f);
        Response.Write(q);

   } 
```

您能否帮助解决问题或我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:02:46.670

将其更改为

```
 public String _RetrievedTime(string time)
 {
       return  time;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:23:30.780

你不在你的页面上使用 AJAX 吗？如果是这样，您最好使用一些标签来测试您的课程。

```
 protected void Button4_Click(object sender, EventArgs e)
    {
        String f = Request.QueryString["_time"];

        //a = f.ToString();
        Class1 tmp = new Class1();
        String q;
        q = tmp._RetrievedTime(f);
        Label1.Text = q;
   } 
```

将您的标签放在 UpdatePanel 中，不要忘记将您的 button4 指定为该更新面板的触发器。

# security - 从欧洲DTCO公司卡读取数据

> ID：10704647
> 
> 赞同：2
> 
> 时间：2012-05-22T15:00:08.453
> 
> 标签：security, cryptography, smartcard

我需要能够从欧洲数字行驶记录仪公司卡（智能卡）中读取卡和公司识别数据。这些在[COMMISSION REGULATION (EC) No 1360/2002](http://eur-lex.europa.eu/LexUriServ/LexUriServ.do?uri=OJ%3aL:2002:207:0001:0252%3aEN%3aPDF)文件中有所描述，但我遇到了问题。我需要能够读取的数据包含在文件**EF Identification**中，必须使用安全消息来读取该文件，因此我需要发出一个**Manage Secure Environment** APDU 命令，该命令需要一个密钥标识符来标识驻留在卡上的密钥。

我不知道在哪里可以找到这些关键标识符或构成它们的数据（在文档的附录中描述）。我正在等待我们在欧洲的合作伙伴的反馈，但我想我会借此机会在这里提问，希望有人会这样做并能够提供一些建议。

密钥标识符由设备序列号、日期、制造商代码和制造商特定类型组成。这表明存在问题，因为我需要能够从任何公司卡访问数据，无论制造商、发行人或持有人如何。不知道如何获取数据来组成密钥。

我意识到这是非常专业的信息，但已经停滞了一个多星期，所以我非常渴望找到解决方案，以便我可以继续。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T21:08:28.897

我不知道标准，但我会假设您读出`EF Card_Certificate`、恢复证书内容并从中提取密钥标识符。

假设您拥有根证书（在此处发布：http: [//dtc.jrc.it/erca_of_doc/EC_PK.zip](http://dtc.jrc.it/erca_of_doc/EC_PK.zip)），您将需要：

1.  阅读 EF CA_Certificate
2.  遵循附录 11 第 3.3.3 节中的算法
3.  从证书内容中提取 CA 公钥
4.  读取 EF Card_Certificate
5.  遵循附录 11 第 3.3.3 节中的算法
6.  密钥标识符现在应该是已恢复证书内容的 20-27 字节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-30T18:41:03.113

我相信您首先必须从国家CA获得证书。然后，您可以执行以下算法（从附录 11 第 4 节简化）：

1.  选择并读取卡证书（EF_CERTIFICATE）
2.  发出管理安全环境命令以选择根 CA 公钥
3.  颁发带有国家 CA 证书的验证证书
4.  发出管理安全环境命令以选择国家 CA 公钥
5.  使用您的证书颁发验证证书
6.  发出管理安全环境命令以选择您的公钥
7.  发出内部验证命令。验证响应。
8.  发出获取挑战命令
9.  发出外部身份验证命令
10.  计算会话密钥
11.  选择文件 EF_IDENTIFICATION
12.  使用安全消息执行读取二进制命令（您需要会话密钥来计算校验和并解密结果）。

# c# - 使用 LINQ 解析 XML 流

> ID：10704649
> 
> 赞同：0
> 
> 时间：2012-05-22T15:00:12.003
> 
> 标签：c#, xml-parsing, linq-to-xml

我发现了很多关于这个主题的例子和问题，但我尝试过的结果都是空白的。

我需要从 xml 中取出第一个“列表”元素，我只需要 DisplayName 和 Address 信息。

![示例图像](../Images/cc43f5516182677796b7a18f35a26857.png)

```
var listings = from c in xdoc.Elements("listing") select c; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:08:18.847

您在查询中缺少命名空间。节点的名称不是`listing`命名空间+`listing`

所以需要获取`wp`元素的命名空间或者使用本地名称属性：

```
var listings  = from c in xdoc.Descendants()
                where c.Name.LocalName == "listing"
                select c; 
```

或者您需要获取命名空间并将其添加到查询中

```
XNamespace ns = // namespace name here
var listings  = from c in xdoc.Descendants(ns + "listing") select c; 
```

`listing`将被定义为 的一些变体`IEnumerable<XElement>`。确切的类型将根据您使用的查询而有所不同，但重要的部分是它将派生自`IEnumerable<>`.

另一个问题是你对`Elements()`方法的使用。 `Elements()`只会搜索由定义的节点的子节点`xdoc`。 `Descendants()`还将查看子节点和所有其他子节点的子节点。

* * *

**更新 1 - 添加了有关从 XML 获取特定节点的更多详细信息**

获取地址和显示名称基本上是相同的过程，实际上您可以将其添加到原始查询或使用不同的查询（这完全取决于您以后要如何使用它 - 您是否需要其他元素`wp:listing`或只是`displayname`和`address`？_

如果您可能需要其他人，那么将其作为不同的查询似乎是合乎逻辑的，这样您以后可以查询您的结果。可读性也发挥了作用，因为在我看来，将多个查询嵌套在一起会使阅读变得困难。

获取地址是最难的部分。你需要决定你想要它如何......你想要一个`XElement`所有地址部分作为子节点吗？或者你想构造一个新对象？或者你只需​​要一个连接的字符串？

但一般查询将是这样的：

```
var result = from listing in listings
             select new
             {
                 Name = listing.Element(ns + "displayname").Value,
                 Address = listing.Element(ns + "address")
             }; 
```

这将为您提供一个定义为匿名类型的 with，该类型由 Name 属性（作为 String）和 Address 属性（作为 XElement）组成`IEnumerable<'a'>`。`a`如果你想要别的东西，你必须`Address = listing.Element(ns + "address")`用适当的代码行替换。

如果您只需要另一个匿名类型，那么您需要在该行中放置一个嵌套查询：

```
Address = from part in listing.Elements(ns + "address")
          select new
          {
              FullStreet = part.Element(ns + "fullstreet").Value,
              HouseNumber = part.Element(ns + "house").Value,
              Street = part.Element(ns + "street").Value,
              StreetType = part.Element(ns + "streettype").Value,
              // continue for all Elements you need/want
          }; 
```

或者您可以创建一个`Address`类并在查询中调用构造函数或工厂方法并传递 XElement 或地址部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:11:47.523

尝试使用`Descendants`而不是`Elements`

```
 var listings = from c in xdoc.Descendants("listing") select c; 
```

# c++ - 访问内存时出现奇怪的崩溃

> ID：10704650
> 
> 赞同：-1
> 
> 时间：2012-05-22T15:00:12.600
> 
> 标签：c++, memory, crash

两周前我得到了这个运行良好的程序，我没有改变它现在崩溃的任何部分。

例如，拿这个片段：（假设`is`是有效的`istream`并且包含`<tag>`）

```
std::string Str;
char c;
for ( ; is >> c; )
{
    std::cout << c << std::flush;
    Str += c;
} 
```

输出： `<` 然后崩溃。

我正在使用 Windows 和 mingGW，崩溃是一个窗口，说我的程序出现错误，Windows 正在尝试修复它...

但这还不是全部，它`Str = c;`在初始化时或在初始化时崩溃：`std::string Str ("op");`

在我发现这个错误 30 分钟后，我在一行上得到了另一个（在初始错误之前）：

`osstr.write((char *) Word, 16);`

哪里`osstr`是有效的 ostringstream 并且 Word 是填充的`unsigned char *`

编辑：

问题可能不在代码中。因为对字符串构造函数的简单调用会崩溃。

`std::string Str ("")`作品

`std::string Str ("str");`碰撞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T08:11:02.760

对，抱歉信息不完整，但我无法给你完整的代码。

问题来自远在上述代码没有崩溃之前的缓冲区溢出。

# asp.net-mvc-3 - 任何人都可以解释 CA1822 对控制器操作的目的和解决方案吗？

> ID：10704654
> 
> 赞同：13
> 
> 时间：2012-05-22T15:00:27.533
> 
> 标签：asp.net-mvc-3, code-analysis

> 错误 CA1822：Microsoft.Performance：从未使用过“SomeController.AnAction(string, string)”的“this”参数（或 Visual Basic 中的“Me”）。将成员标记为静态（或在 Visual Basic 中为 Shared）或在方法主体或至少一个属性访问器中使用“this”/“Me”（如果适用）。

当通过 URL 请求时，静态操作会产生 404 未找到。在关闭代码分析的情况下，该操作按预期工作。这有什么意义，什么是适当的补救措施？

**请注意**，操作的返回类型是 PartialViewResult，如果返回类型是 ActionResult，代码分析似乎不会抱怨这一点。

```
 [HttpPost]
    public PartialViewResult BlankEditorRow(string formId, Common.Entities.Common.ObjTypeEnum objType)
    {
        if (objType == Common.Entities.Common.ObjTypeEnum.Regular)
            return new AjaxPartialViewResult("_RowEditor", new ProcedureEntryEntity()) { UpdateValidationForFormId = formId };
        else
            return new AjaxPartialViewResult("_TemplateRowEditor", new ProcedureEntryEntity()) { UpdateValidationForFormId = formId };
    } 
```

**更新：**看起来将返回类型更改为 ActionResult 可以解决错误，并且 PartialViewResult 是一个 ActionResult 所以它应该可以工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-30T18:30:14.213

我怀疑在*不使用任何实例成员调用*的情况下更改返回类型真的可以解决问题。我怀疑为了更改返回类型，您将返回语句更改为访问实例成员的内容。

现在我不知道 MVC 中的路由处理是否*会让*你将方法标记为静态，但值得研究。尽管警告是根据性能给出的，但我会从*意图*和可读性的角度来考虑它。

通常，方法或属性成为实例成员（而不是静态成员）有两个原因：

*   它需要访问另一个实例成员，因为它的行为方式取决于对象的状态
*   它需要根据调用它的实例的实际类型进行多态行为，以便可以覆盖该行为

如果这两种情况都不是，那么可以将该方法设为静态，这*表明*没有预期的多态性并且不需要实例状态。静态成员有效地宣传它所依赖的唯一状态是类型本身（和参数）的状态，并且它不会表现出多态性。除此之外，这意味着您也可以在完全不创建实例的情况下对其进行*测试。*

当然，如果 MVC 的基础结构*要求*它是一个实例方法，那么您应该只取消警告，并用注释来表明这一事实。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-24T16:26:18.467

我认为 CA 只是没有考虑到这是 MVC 应用程序中的控制器操作。我会压制。

# c - 原始套接字：接收器打印垃圾值

> ID：10704657
> 
> 赞同：0
> 
> 时间：2012-05-22T15:00:42.880
> 
> 标签：c, sockets, raw-sockets

我正在尝试使用发送器和使用原始套接字的接收器程序跨字符数组发送。我能够获得在接收端发送的正确字节数，但打印出来的值是垃圾。有人可以帮我吗？

发射机：

```
int create_raw_socket(char *dev) 
{   
struct sockaddr_ll sll;
struct ifreq ifr;
int fd, ifi, rb;

bzero(&sll, sizeof(sll)); 
    bzero(&ifr, sizeof(ifr));

fd = socket(PF_PACKET, SOCK_RAW, htons(ETH_P_ALL));

assert(fd != -1);

strncpy((char *)ifr.ifr_name, dev, IFNAMSIZ);
ifi = ioctl(fd, SIOCGIFINDEX, &ifr);
assert(ifi != -1);
sll.sll_protocol = htons(ETH_P_ALL);
sll.sll_family = AF_PACKET;
sll.sll_ifindex = ifr.ifr_ifindex;
rb = bind(fd, (struct sockaddr *)&sll,sizeof(sll));
assert(rb != -1);

return fd;  
 }

int SendPacket(char *dev ,unsigned char *send_packet, int packet_len) 
{
   int num_sent= 0;
   int sockaddress = create_raw_socket(dev);

   if((num_sent = write(sockaddress, &send_packet, packet_len)) != packet_len)
     { 

         close(sockaddress);
          return 0;
     } 
   else
     { 
        close(sockaddress);
         return 1; 
     }

  }

int main(int argc, char**argv)
{
   int x,fd,s; 

    char *send_packet="HELLO";

   int len = sizeof(send_packet);

   while(1)
   {

   if(!SendPacket((argv[1]), send_packet, len))
     perror("Error sending packet");
   else
     printf("Packet sent successfully with payload : %s\n" ,send_packet);
   }
    return 0; 
 } 
```

接收者 ：

```
int main(int argc, char **argv)
{
 struct sockaddr addr;
 int sock_fd, fromlen,s;
 char buf[PACKET_LENGTH];
 char *dev = argv[1];

 while(1)
 {

   fromlen=sizeof(addr);
   sock_fd = create_raw_socket(dev);   /* Creating the raw socket */
   int x= recvfrom(sock_fd,&buf,sizeof(buf),0,&addr,&fromlen);
   printf("\n Number of bytes of data received is %d \n",x);

   printf("\nPayload  Received from client... is %s \n", buf);

   close(sock_fd);

 }
 return 0;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:11:59.987

改变

```
write(sockaddress, &send_packet, packet_len) 
```

到

```
write(sockaddress, send_packet, packet_len) 
```

`send_packet`已经是要发送的缓冲区的地址，如果你取这个地址的地址（更准确地说是保存地址的变量的地址），你会为缓冲区读取错误的内存

同样对于`recvfrom`：

```
recvfrom(sock_fd, buf, sizeof(buf), 0, &addr, &fromlen) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:26:27.463

你有几个问题：

1.  这条线

    ```
    if((num_sent = write(sockaddress, &send_packet, packet_len)) != packet_len) 
    ```

    应该说只是`send_packet`而不是`&send_packet`。 `send_packet`是一个指向所需数据包数据的指针，因此无需获取其地址——您不想将该指针的文字地址写入数据包，这根本行不通。

2.  这是错误的：

    ```
    char *send_packet="HELLO";
    int len = sizeof(send_packet); 
    ```

    `sizeof(send_packet)`将始终是系统上指针的大小，通常为 4 或 8 个字节。您真的想声明`send_packet`为数组类型（例如`char send_packet[] = ...`），或者用于`strlen`在运行时计算其长度（例如`int len = strlen(send_packet) + 1;`）。在您的情况下，您发送的数据太少（4 个字节）或太多的数据（8 个字节），这两者都是有问题的。

3.  您`printf`在客户端中的代码假定它接收到的数据是空终止的，但不一定如此。您应该在打印数据之前手动终止数据（或使用任何其他字符串函数，就此而言），或者告诉`printf`要打印多少数据的限制。我建议像这样终止它：

    ```
    char buf[PACKET_LENGTH + 1];  // +1 for null terminator
    int x = recvfrom(sock_fd,buf,PACKET_LENGTH,0,&addr,&fromlen);
    if(x >= 0)
        buf[x] = 0; 
    ```

4.  `const`您的代码的正确性 很差。`SendPacket`应采用 a`const char*`而不是`char*`参数，并且`send_packet`应声明为`char[]`或 as `const char*`。从字符串文字到的转换`char*`已被弃用，应在所有新的 C 代码中避免。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:07:17.060

使用 printf 打印缓冲区将打印一个字符串，直到到达字符串字符的 en。如果您看到原始字符串后跟垃圾字符，这可能是原因。

您可能应该在 recvfrom 返回的最后一个字节之后引入 0，否则您将打印内存中 recvfrom 没有覆盖的任何值。它甚至可以尝试访问缓冲区之外的内存。

尝试添加类似：

```
int x= recvfrom(sock_fd,&buf,sizeof(buf) - 1,0,&addr,&fromlen);
buf[x - 1] = 0; 
```

注意：这会更改读取内容的最大大小，这只是如何执行此操作的示例。

# r - 用 R 中没有循环的已定义字符串列表替换非 ascii 字符

> ID：10704661
> 
> 赞同：6
> 
> 时间：2012-05-22T15:00:48.280
> 
> 标签：r, replace, special-characters, non-ascii-characters

我想用对应的 ascii 替换非 ascii 字符（目前只有西班牙语）。如果我有“á”，我想用“a”替换它，依此类推。

我构建了这个函数（工作正常），但我不想使用循环（包括像 sapply 这样的内部循环）。

```
latin2ascii<-function(x) {
if(!is.character(x)) stop ("input must be a character object")
require(stringr)
mapL<-c("á","é","í","ó","ú","Á","É","Í","Ó","Ú","ñ","Ñ","ü","Ü")
mapA<-c("a","e","i","o","u","A","E","I","O","U","n","N","u","U")
for(y in 1:length(mapL)) {
  x<-str_replace_all(x,mapL[y],mapA[y])
  }
x
} 
```

有没有优雅的方法来解决它？任何帮助、建议或修改表示赞赏

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T15:47:22.307

`gsubfn()`在同名的包中对于这种事情真的很好：

```
library(gsubfn)

# Create a named list, in which:
#   - the names are the strings to be looked up
#   - the values are the replacement strings
mapL <- c("á","é","í","ó","ú","Á","É","Í","Ó","Ú","ñ","Ñ","ü","Ü")
mapA <- c("a","e","i","o","u","A","E","I","O","U","n","N","u","U")

# ll <- setNames(as.list(mapA), mapL) # An alternative to the 2 lines below
ll <- as.list(mapA)
names(ll) <- mapL

# Try it out
string <- "ÍÓáÚ"
gsubfn("[áéíóúÁÉÍÓÚñÑüÜ]", ll, string)
# [1] "IOaU" 
```

*编辑：*

G. Grothendieck 指出，基数 R 也有一个功能：

```
A <- paste(mapA, collapse="")
L <- paste(mapL, collapse="")
chartr(L, A, "ÍÓáÚ")
# [1] "IOaU" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T16:10:45.017

我喜欢 Josh 的版本，但我想我可能会添加另一个“矢量化”解决方案。它返回一个无重音字符串的向量。它也只依赖于`base`函数。

```
x=c('íÁuÚ','uíÚÁ')

mapL<-c("á","é","í","ó","ú","Á","É","Í","Ó","Ú","ñ","Ñ","ü","Ü")
mapA<-c("a","e","i","o","u","A","E","I","O","U","n","N","u","U")
split=strsplit(x,split='')
m=lapply(split,match,mapL)
mapply(function(split,m) paste(ifelse(is.na(m),split,mapA[m]),collapse='') , split, m)
# "iAuU" "uiUA" 
```

# extjs - Sencha Touch Sync 商店

> ID：10704662
> 
> 赞同：1
> 
> 时间：2012-05-22T15:00:53.870
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我有两个存储：localstorage 和服务器上的 json，我正在尝试将数据从 json 下载到本地。请看看有什么问题：

**/store/Notes.js**

```
Ext.define("NotesApp.store.Notes", {
    extend: "Ext.data.Store",
    requires: "Ext.data.proxy.LocalStorage",
    config: {
        storeId: 'Notes',
        model: "NotesApp.model.Note",
        proxy: {
            type: 'localstorage',
            id: 'notes-app-store'
        },
        sorters: [{
            property: 'dateCreated',
            direction: 'DESC'
        }],
        grouper: {
            sortProperty: "dateCreated",
            direction: "DESC",
            groupFn: function (record) {

                if (record && record.data.dateCreated) {
                    return record.data.dateCreated.toDateString();
                } else {
                    return '';
                }
            }
        }
    }
}); 
```

**/store/Online.js**

> Ext.define("NotesApp.store.Online", { 扩展: "Ext.data.Store", config: {
> 
> ```
>  storeId: 'Online',
>        proxy: {
>            type: 'jsonp',
>            url: 'http://server.com/made/qa.php',
>            reader: {
>                type: 'json'
>                //rootProperty: 'results'
>            }
>        },
>        autoLoad: false,
>        listeners: {
>            load: function() {   
>                 console.log("updating");
>                // Clear proxy from offline store
>                Ext.getStore('Notes').proxy.clear();
>                console.log("updating1");
>                // Loop through records and fill the offline store
>                this.each(function(record) {
>                          console.log("updating2");
>                          Ext.getStore('Notes').add(record.data);
> 
>                });
> 
>                // Sync the offline store
>                Ext.getStore('Notes').sync();
>                console.log("updating3");
>                // Remove data from online store
>                this.removeAll();
>                 console.log("updated");
>            }
> 
>        },
>        fields: [
>                 {
>                 name: 'id'
>                 },
>                 {
>                 name: 'date_created'
>                 },
>                 {
>                 name: 'question'
>                 },
>                 {
>                 name: 'answer'
>                 },
>                 {
>                 name: 'type'                    
>                 },
>                 {
>                 name: 'author'
>                 }
>                 ]
>        } }); 
> ```

当我需要更新时，我打电话`Ext.getStore('Online').load();`

但是控制台在“更新”后没有显示任何其他内容。

我想知道出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:25:57.133

改用`Ext.getStore('Notes').getProxy().clear()`有效

# c++ - pyqt QTableView打印（4行c++代码翻译成python）

> ID：10704664
> 
> 赞同：0
> 
> 时间：2012-05-22T15:01:02.107
> 
> 标签：c++, python, qt, pyqt

我有一个用 C++ 编写的 Qt 代码。我想把它翻译成python代码，但我在4行有一个问题：所有代码都是：

```
void TableView::print(QPainter* painter, const QRect& area)
{
    const int rows = model()->rowCount();
    const int cols = model()->columnCount();

    // calculate the total width/height table would need without scaling
    double totalWidth = 0.0;
    for (int c = 0; c < cols; ++c)
    {
        totalWidth += columnWidth(c);
    }
    double totalHeight = 0.0;
    for (int r = 0; r < rows; ++r)
    {
        totalHeight += rowHeight(r);
    }

    // calculate proper scale factors
    const double scaleX = area.width() / totalWidth;
    const double scaleY = area.height() / totalHeight;
    painter->scale(scaleX, scaleY);

    // paint cells
    for (int r = 0; r < rows; ++r)
    {
        for (int c = 0; c <; cols; ++c)
        {
            QModelIndex idx = model()->index(r, c);
            QStyleOptionViewItem option = viewOptions();
            option.rect = visualRect(idx);
            itemDelegate()->paint(painter, option, idx);
        }
    }
}

// printer usage
QPainter painter(&printer);
tableView->print(&painter, printer.pageRect());

// test on pixmap
QPixmap pixmap(320, 240);
QPainter painter(&pixmap);
tableView->print(&painter, pixmap.rect());
pixmap.save("table.png", "PNG"); 
```

但问题在这里：

```
for (int c = 0; c < cols; ++c)
{
    QModelIndex idx = model()->index(r, c);
    QStyleOptionViewItem option = viewOptions();
    option.rect = visualRect(idx);
    itemDelegate()->paint(painter, option, idx);
} 
```

请帮我 。太感谢了 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T00:35:40.997

C++ 到 Python 的代码是：

```
def printTable(self,printer,painter,area):
    model = self.model
    myTableView = self.view
    printer = painter #self.myprinter
    rows = model.rowCount();
    columns = model.columnCount();
    totalWidth = 0.0;
    totalPageHeight = 0.0;
    totalHeight = 0.0;
    for c in range(columns):
        totalWidth += myTableView.columnWidth(c)

    for p in range(45):
        totalPageHeight += myTableView.rowHeight(p);

    for r in range(rows):
        totalHeight += myTableView.rowHeight(r);

    xscale = area.width() / totalWidth;
    yscale = area.height() / totalHeight;
    pscale = area.height() / totalPageHeight;
    painter.scale(xscale, pscale);
    painter.translate(area.x() + xscale, area.y() + yscale);

    x=0
    #QStyleOptionViewItem option;

    for r in range(rows):
        ++x
        for c in range(columns):
            idx = model.index(r,c);
            option = myTableView.viewOptions();
            option.rect = myTableView.visualRect(idx);
            if r % 2 == 0:
                brush= QtGui.QBrush(QtGui.QColor(220, 220, 220), QtCore.Qt.SolidPattern);
                painter.fillRect(option.rect, brush);
            myTableView.itemDelegate().paint(painter, option, idx);

        if (x == 45):
            ok = printer.newPage();
            x=0;
            painter.translate(0, -1350); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:14:18.070

如果你能解释这个问题，那就太好了。

让我们来看看...

```
for (int c = 0; c < cols; ++c)
{
    QModelIndex idx = model()->index(r, c);
    QStyleOptionViewItem option = viewOptions();
    option.rect = visualRect(idx);
    itemDelegate()->paint(painter, option, idx);
} 
```

一个简单的翻译是：

```
for c in range(cols):
    idx = model.index(r, c)
    option = self.viewOptions()
    option.rect = self.visualRect(idx)
    self.itemDelegate().paint(painter, option, idx) 
```

不确定`option.rect = ...`（尚未测试）。你哪里有问题？

# asp.net - 网站似乎使用了不正确的 .Net 版本

> ID：10704665
> 
> 赞同：1
> 
> 时间：2012-05-22T15:01:04.287
> 
> 标签：asp.net, .net, asp.net-ajax

在某些 ASP.Net Ajax 回调中，并且仅在某些服务器上，我收到错误

> 错误：无法获取属性“异步”的值：对象为空或未定义

在我看来，这是[根据 Microsoft](http://connect.microsoft.com/VisualStudio/feedback/details/260892/fix-for-webform-callbackcomplete)应该在 .Net 3.5 SP1 中修复的多重回调错误，这是通过检查在故障服务器上生成的 WebForm_CallbackComplete 的版本而产生的。这意味着站点没有使用 SP1，但它*已*安装在服务器上。我将如何验证网站是否正在使用 SP1，如果不使用它需要做什么来升级它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:04:55.267

@Ben .....这是一个 IE 问题，而不是 .Net .....

这是描述这种情况的一个很好的链接： [Stackoverflow answer IE 9 ...](https://stackoverflow.com/questions/5787245/ie9-javascript-error-script5007-unable-to-get-value-of-the-property-ui-obje)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T20:11:28.093

然后有些地方不对劲，因为我的 APS.NET 选项卡下的 IIS 应用程序有 1、2 和 4。在 Windows Microsoft.NET Framework 中，您会找到各种版本的 AspNetRegIIS.exe。

# jquery - jquery ajax调用中的奇怪行为

> ID：10704667
> 
> 赞同：0
> 
> 时间：2012-05-22T15:01:05.877
> 
> 标签：jquery

我的行为很奇怪，下面是对我页面的 jquery ajax 调用。

实际上，当我的页面正在加载时，它有两个下拉列表，它从下面调用两个下拉列表的 ajax 请求，因此两次调用同一页面。

```
 //alert("Test");
    var serviceReq = "http://localhost:2853/jsonproxy/jsonprxy.aspx"; 
    $.ajax({
        url: serviceReq,
        //type: "POST",
        contentType: "application/json; charset=utf-8",
        dataType: "jsonp",
        jsonpCallback: "airportXML",
        cache: true,
        success: function(data, textStatus, jqXHR) {
            var xmlDoc = $.parseXML(data);
            //alert("data" + data);
            x = xmlDoc.documentElement.childNodes;
            for (i = 0; i < x.length; i++) {
                document.write(x[i].nodeName);                        
                document.write("<br />");
            }

            //alert(oData);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert(textStatus + "---" + errorThrown);
        }
    }); 
```

问题是它永远不会成功，所以我永远不会得到这个 //alert("data" + data); 它总是出错，说“parsererror：airportxml 不是函数”，我可以保证返回的响应是完美的 JSON。

如果我评论这一行 jsonpCallback: "airportXML", Jquery give default callback ie jquery12121212_2323232 并且一切正常，那么奇怪的行为就会出现，但是我不希望这样，因为我希望对此有缓存调用

更奇怪的事情是，如果我在此调用之前放置 alert (//alert("Test");) 并且一切对我来说都很完美，而无需评论 jsonpCallback: "airportXML" 并且我得到了成功警报。

我认为我的电话没有得到充分的时间来完成。

请推荐！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:11:03.173

我认为要解决上述问题，我需要使用

`async: false,`为我的第一个电话，以便我的下一个电话完成。

请就此提出建议。

编辑： JSNOP 跨域调用是否允许 sysncronous 调用？

谢谢。

# php - 资源 ID #4 PHP MYSQL

> ID：10704670
> 
> 赞同：-1
> 
> 时间：2012-05-22T15:01:22.233
> 
> 标签：php, mysql

```
 $result = mysql_query("SELECT indvsum.sum1 + indvsum.sum2
    FROM (SELECT SUM(Cash) AS sum1,
                 SUM(Bank) AS sum2
          FROM players) indvsum");

    echo $result; 
```

出于某种原因，这将返回资源 ID #4。

如何获得 sum1 + sum2 返回的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:03:45.360

这是预期的行为。

请查看手册以获取有关如何获取行的示例：

[mysql_query](http://php.net/manual/en/function.mysql-query.php)

这是签名：

```
resource mysql_query ( string $query [, resource $link_identifier = NULL ] ) 
```

为了获取您应该使用的行

[mysql_fetch_array](http://www.php.net/manual/en/function.mysql-fetch-array.php)

或者

[mysql_fetch_assoc](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:04:23.247

因为那是 mysql_query 函数的标准输出。它返回与该查询相关的标识符。要获取选定的行，请使用 mysql_fetch_array($result) 或 mysql_fetch_row($result)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:06:10.140

资源 id #4 被返回，因为**`$result`**它是一个数组。

举个例子：

```
$q_example = "SELECT indvsum.sum1 + indvsum.sum2 AS `aSUM`
                  FROM (SELECT SUM(Cash) AS sum1, SUM(Bank) AS sum2 FROM players) indvsum";
$rsexample = mysql_query($q_example, $DB) or die(mysql_error());
$row_rsexample = mysql_fetch_assoc($rsexample);

echo $row_rsexample['aSUM']; 
```

...应该得到你正在寻找的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:05:11.523

你为什么不做

```
SELECT SUM(Cash) AS sum1,
       SUM(Bank) AS sum2
FROM players; 
```

在 php 中分配这两个值，然后添加它们。

或者

利用`mysql_fetch_row`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-23T15:04:46.073

利用`mysql_fetch_array`

```
$result = mysql_query("SELECT indvsum.sum1 + indvsum.sum2
FROM (SELECT SUM(Cash) AS sum1,
             SUM(Bank) AS sum2
      FROM players) indvsum");

$arr = mysql_fetch_array($result);

print_r($arr); // echo $result; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-26T14:11:41.053

```
$values = mysql_fetch_array($result);                      
var_dump($values); 
```

# java - 如何将按钮添加到表格单元格以使按钮成为单元格的一部分？就像 Winderbuilder 的 Properties 视图

> ID：10704671
> 
> 赞同：0
> 
> 时间：2012-05-22T15:01:28.200
> 
> 标签：java, cell

这是 Windowbuilder 的用户界面： [http ://www.java-forums.org/blogs/eclipse/attachments/2900d1328496793-using-windowbuilder-design-gui-eclipse-properties-pane.png](http://www.java-forums.org/blogs/eclipse/attachments/2900d1328496793-using-windowbuilder-design-gui-eclipse-properties-pane.png)

Properties 视图位于 UI 的左下方，您可以看到一个带有“dialog15”文本的单元格和一个按钮在其右侧。

现在我想在我的表格中创建这样的单元格：用户可以直接向单元格输入文本，或者单击按钮在新打开的窗口中选择现有文本......但我不知道如何启动它。谁能帮我一把？有教程吗？

顺便说一句，我正在使用 SWT。我找到了一些使用 SWING 的示例，但没有找到任何使用 SWT 的好教程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T05:41:16.877

我认为您正在 Jface 表格查看器中寻找 CellEditor / Table Editor 概念。

[jface 示例片段](http://wiki.eclipse.org/JFaceSnippets)

# paypal - 使用贝宝购物车销售 pdf

> ID：10704679
> 
> 赞同：0
> 
> 时间：2012-05-22T15:01:48.077
> 
> 标签：paypal

有人可以提供一个清晰的步骤列表，我需要采取哪些步骤才能使用贝宝购物车销售 pdf（可下载）？前提是我设置了企业帐户。pdf 将托管在我的服务器上。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:08:45.337

获取 Paypal API，按照列出的步骤进行操作。（它们很简单，您也可以找到很多教程。）成功的交易会给您一个交易 ID，在 pdf 下载页面上使用该 ID。如果有效，则允许用户下载，否则抛出错误。

# regex - 用于查找第 5 个字符为数字的行的 Grep 模式

> ID：10704681
> 
> 赞同：0
> 
> 时间：2012-05-22T15:01:53.363
> 
> 标签：regex, grep

我要在文件中查找第五个字符是数字的行。也就是说，在数字集 {0123456789} 中。我制作了一个文件，其中包含：

```
asdf1
asdf2 
```

.. 依此类推，直到 0。我用特殊字符和其他符号制作了更多案例，以确保我也没有抓住这些行。

然而，有一件事让我很感兴趣。制作线时：

```
SSSSS3 
```

或者

```
TTTTTS7 
```

也就是说，如果每个 S 是一个空格，而 T 是一个制表符，那么当第五个字符是空格/制表符而不是数字时，也会检索该行。

有人可以解释为什么会这样吗？我正在使用的模式是

```
'....[0-9](.)*' 
```

如果我没记错的话，一个'。代表任何字符，对吧？超过 4 个制表符或空格怎么会算作少于 5 个 '.'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:05:29.623

您缺少行首锚点：

```
^....[0-9] 
```

没有它，`egrep`执行正则表达式*搜索*而不是正则表达式*匹配*，就好像您输入了

```
.*....[0-9] 
```

尽管不同之处在于`.*`不会导致捕获诸如`-o`.

（请注意，`(.)*`末尾的 也是无用的。`.*`隐式附加到 RE 的末尾，除非您放入行尾锚，`$`.）

# javascript - 整个滚动后的jQuery回调函数

> ID：10704690
> 
> 赞同：0
> 
> 时间：2012-05-22T15:02:10.590
> 
> 标签：javascript, jquery, callback

我将一些函数绑定到 jquery 的“滚动”事件。有了这个：

```
$window.bind('scroll', function(){ 
        fn1(...);
        afterScroll(); // function which should fired after whole scrolling.            
}) 
```

问题是，我希望在所有滚动迭代之后触发“afterScroll()”函数。但我认为当用户滚动一次时，事件函数将被触发几次（我用一些警报对此进行了测试） afterScroll() 应该只是在滚动完成后添加一个简短的动画。

例如：[http ://activatedrinks.com/](http://activatedrinks.com/)

有人出主意吗？谢谢

问候，扬尼克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:06:54.687

很难说用户何时完成滚动，并且没有这样的事件。您必须确定用户何时“完成”您自己的滚动。一些用户可能滚动很慢，但仍会认为它是单次滚动。就像是..

```
var scrolltime = false;
$window.scroll(function () {
   fn1(...);
   if (scrolltime) {
      clearTimeout(scrolltime);
   }
   //You consider 500 MS between scrolls to be "done" with scrolling.
   scrolltime = setTimeout(afterScroll, 500);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:07:01.607

你需要去[抖动](http://benalman.com/projects/jquery-throttle-debounce-plugin/)回调到`afterScroll`

基本上 debounce 会丢弃除最后一个函数之外的所有重复调用，您需要做的就是设置一个阈值来告诉它“重复”是什么

这是节流/去抖动功能的[来源](https://raw.github.com/cowboy/jquery-throttle-debounce/v1.1/jquery.ba-throttle-debounce.js)。非常好用的库。我通常将它包含在我的项目中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:06:35.673

如果我猜对了，只需在最后设置超时，如果滚动继续，请清除超时。

```
setTimeout(1000, function(){ afterScroll(); }); 
```

# yahoo-finance - 在 Google 或 Yahoo Finance API 上查询特定条件下的任何股票列表

> ID：10704692
> 
> 赞同：0
> 
> 时间：2012-05-22T15:02:19.037
> 
> 标签：yahoo-finance, google-finance, google-finance-api

在 Google 和 Yahoo 金融 API 中，有没有办法查询符合特定条件的股票代码列表？

例如，获得 10 个最有价值的股票代码？我知道我可以检索向 API 提供我想要查询的具体符号的信息，但是是否可以获得符合某些条件的符号列表？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:32:00.757

我很确定您必须提供一个符号才能在 yahoo Finance 中获取股票数据。你可以看看谷歌股票如何与萤火虫一起工作，看看如何在从雅虎获取数据之前过滤掉某些股票

# javascript - 是否可以将 javascript 事件和 asp.net 事件添加到在服务器上运行的控件？

> ID：10704695
> 
> 赞同：0
> 
> 时间：2012-05-22T15:02:26.563
> 
> 标签：javascript, asp.net, postback

我想要一个在服务器上运行的按钮，但在回发之前它应该运行一个或多个 javascript 函数。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:07:49.150

```
function runSomeStuff() {
    callYourCode();
    callSomethingElse();
    __doPostBack('btnSave', "Some String To Post Back");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:07:11.897

是的，这是可能的。

OnClientClick="return func1();"

记住你的函数 func1() 应该返回 bool true/false。如果它返回 false，则不会有回发。

# netbeans-platform - netbeans rcp 安装共享模块

> ID：10704699
> 
> 赞同：1
> 
> 时间：2012-05-22T15:02:41.140
> 
> 标签：netbeans-platform

我们已经迁移了 Netbeans RCP 平台的遗留产品，一切进展顺利。我们的产品分为两个程序。一个用于创建数据操作项目，另一个用于执行数据操作。

我目前正在查看我们的安装，并希望将公共依赖项移动到一个公共位置，而不是将它们复制到单独的应用程序文件夹的安装文件夹下。

我们正在使用 maven 来处理依赖项。

这是我们当前的模块结构

*   父项目
    *   应用
        *   应用程序 A
            *   应用程序 A（nbm-应用程序）
            *   模块 A1
            *   模块 A2
        *   应用程序 B

            *   应用程序 B (nbm-应用程序)
            *   模块 B1
            *   模块 B2
    *   共享模块

        *   模块 S1

有没有办法为共享模块指定一个公共安装目录？

像这样的东西？

C:\Program Files\Product Suite\Application A
C:\Program Files\Product Suite\Application B
C:\Program Files\Product Suite\Shared

并且只安装一次共享模块。

我们不使用 Netbeans 安装程序解决遗留问题

我们使用 InstallAnywhere 获取 nbm-application zip 文件并将它们解压缩到安装位置。

提前感谢您的任何帮助。

# android - Messenger Service可以用于跨应用IPC吗？

> ID：10704700
> 
> 赞同：2
> 
> 时间：2012-05-22T15:02:44.497
> 
> 标签：android, process, ipc

我有三个应用程序，其中两个应用程序需要连接到第三个应用程序发布的服务。该服务应该通过 GPRS 发送/接收数据并将其传递给两个应用程序。我已在第三个应用程序中将此服务实现为 Messenger 服务。在 android 文档中提到，Messenger 服务可用于两个进程之间但在同一个应用程序中的通信。但是我的问题是，是否可以使用 Messenger 服务在属于两个不同应用程序的两个进程之间进行通信？如果是，有人可以向我展示一些示例代码，演示客户端如何绑定到此类服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T14:56:11.093

答案是肯定的。我不确定您是否可以显式引用另一个包中定义的服务类，但您绝对可以通过隐式意图引用该服务。

可以在[此处](https://thenewcircle.com/s/post/1340/Deep_Dive_Into_Binder_Presentation.htm#slide-8)找到该技术的良好而简洁的代码示例。这张特殊的幻灯片谈到了使用 Messenger 进行 IPC，但整个演示文稿值得一看 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T12:51:50.943

根据 android 文档，Messenger 服务可用于两个进程之间的通信，但它不限制它在同一个应用程序中。进程可以在同一个应用程序或不同的应用程序中。

如果我们希望请求在进入处理程序队列中的消息并被一一处理时按顺序处理，则应该使用 Messenger。

# php - 意外的 T_STRING，期待 T_FUNCTION

> ID：10704705
> 
> 赞同：0
> 
> 时间：2012-05-22T15:02:54.587
> 
> 标签：php, mysql, codeigniter

刚刚学习如何使用 CodeIgniter 使用 php 和 mysql。遇到那个错误。

我试图检查我的数据库的登录尝试，它们存储在哪里。以下是我的登录模型中的相关功能：

```
public function verify_user($email, $password)
    {
        $q = $this
        ->db
        ->where('email_address', $email)
        ->where('password', $password)
        ->limit(1)
        ->get('users');

            if ($q->num_rows > 0)
                return $q->row();
            }
            add_login_attempt($email);
            return false;
        }

        public function add_login_attempt($email)
        {
            $current_attempts = get_login_attempts($email);

            if ($current_attempts > 2)
            {
                lock_account($email);
            }
            else
            {
                $updated_attempts = $current_attempts + 1;
                $data = array('login_attempts' => $updated_attempts);
                $this->db->where('email_address', $email);
                $this->db->update('crm', $data);
            }

        }

        function reset_login_attempts($email)
        {

        }

        function lock_account($email)
        {

        }

        public function get_login_attempts($email)
        {
            $this->db->select('login_attempts');
            $this->db->from('crm');
            $this->db->where('email_address', $email);
            $login_attempts = $this->db->get();

            return $login_attempts;
        }
} 
```

使用正确的凭据登录没有问题。当输入错误的密码时，会遇到该错误。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T15:05:02.210

你有一个语法错误：

```
if ($q->num_rows > 0)
    return $q->row();
} 
```

应该：

```
if ($q->num_rows > 0) {
    return $q->row();
} 
```

你忘了`{`

# hibernate - SLSB中的休眠会话线程安全？

> ID：10704709
> 
> 赞同：1
> 
> 时间：2012-05-22T15:03:14.677
> 
> 标签：hibernate, concurrency, java-ee-6

在无状态 EJB 3.1 (BeanManagedTransaction) 中管理休眠会话是否会使 Java EE 6 环境中的会话线程安全？

如果是这样，那么如何管理并发访问，以便每个线程并行运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:48:36.003

不，我无法想象这应该如何工作。

会话对象不是线程安全的，会话实例返回的对象也不是。例如，如果两个线程使用一个会话实例来选择实体，并且都选择同一个数据库实体，那么一个会话实例使实体 pojo 的同一个实例对两个线程都可用。对这个单一 pojo 实例的并发访问将失败。

不同的线程肯定需要不同的 Session 实例。

# c# - 两个 dispose 实现之间的区别？

> ID：10704710
> 
> 赞同：5
> 
> 时间：2012-05-22T15:03:19.393
> 
> 标签：c#, memory-leaks, delegates, event-handling, dispose

这两种实现有区别吗？

1：

```
public class SMSManager : ManagerBase
{
    private EventHandler<SheetButtonClickEventArgs> _buttonClickevent; 

    public SMSManager(DataBlock smsDataBlock, DataBlock telephonesDataBlock) :
        base(smsDataBlock)
    {
        _buttonClickevent = new EventHandler<SheetButtonClickEventArgs>(OnButtonClick);
        SheetEvents.ButtonClick += _buttonClickevent;

    }

    public override void Dispose()
    {
        base.Dispose();
        if (_buttonClickevent != null)
        SheetEvents.ButtonClick -= _buttonClickevent;
    }
} 
```

2：

```
public class SMSManager : ManagerBase
{
    public SMSManager(DataBlock smsDataBlock, DataBlock telephonesDataBlock) :
        base(smsDataBlock)
    {
        SheetEvents.ButtonClick += new EventHandler<SheetButtonClickEventArgs>(OnButtonClick);   
    }

    public override void Dispose()
    {
        base.Dispose();
        SheetEvents.ButtonClick -= new EventHandler<SheetButtonClickEventArgs>(OnButtonClick);
    }
} 
```

在内存泄漏方面，第一个似乎比第二个更正确。但它真的正确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:14:23.220

总而言之，第二段代码是正确且安全的（即使没有注册处理程序）。

考虑这个示例应用程序：

```
namespace ConsoleApplication61
{
    class Program
    {
        static void Main(string[] args)
        {
            var f = new Foo();
            f.MyEvent += new EventHandler(Handler);
            f.Trigger();
            f.MyEvent -= new EventHandler(Handler);
            f.Trigger();
            Console.Read();
        }

        static void Handler(object sender, EventArgs e)
        {
            Console.WriteLine("handled");
        }
    }

    class Foo
    {
        public event EventHandler MyEvent;
        public void Trigger()
        {
            if (MyEvent != null)
                MyEvent(null, null);
        }
    }
} 
```

此示例打印“已处理”一次。

因此，在您的示例中，它们在功能上是相同的，并且都可以根据需要工作。删除尚未添加的处理程序也是一个安全的操作，它只是找不到要删除的内容并且什么也不做。

正如评论中所提供的，马克的回答更详细：

[使用委托的新实例取消注册事件](https://stackoverflow.com/questions/714098/unregister-events-with-new-instance-of-the-delegate/714126#714126)

* * *

**具有匿名方法的事件处理程序**

值得注意的是，不能保证 lambda 表达式形式的事件处理程序基于实例和方法签名强制执行唯一性。如果您需要取消订阅匿名方法，则需要将其提升为方法或保留对匿名方法的引用以供以后使用：

```
Func<object, EventArgs> meth = (s, e) => DoSomething();

myEvent += meth;
myEvent -= meth; 
```

Jon Skeet 详细回答了这个问题，并且可能比我做得更好:-)

[如何删除 lambda 事件处理程序](https://stackoverflow.com/questions/1362204/c-how-to-remove-a-lambda-event-handler)

* * *

**轻微的重构**

我将重构为以下内容：

```
public class SMSManager : ManagerBase
{
    public SMSManager(DataBlock smsDataBlock, DataBlock telephonesDataBlock) 
        : base(smsDataBlock)
    {
        SheetEvents.ButtonClick += OnButtonClick;   
    }

    public override void Dispose()
    {
        SheetEvents.ButtonClick -= OnButtonClick;
        base.Dispose();
    }
} 
```

# php - 转换 unicode(?) 字符串

> ID：10704713
> 
> 赞同：0
> 
> 时间：2012-05-22T15:03:31.293
> 
> 标签：php, character-encoding, google-bigquery

我有一个 txt 文件，我用 fopen 打开它以供阅读。然后我尝试使用回显屏幕上的行

```
<xmp>... contents ... </xmp> 
```

其中一行内容如下：

```
"aut\xf3k\xf6lcs\xf6nz\xe9s budapest kauci\xf3 n\xe9lk\xfcl" 
```

有人能告诉我如何正确解码吗？

```
#!/usr/bin/php -q
<?php

$read_handle    = fopen("somefile.txt", "r");
$write_handle   = fopen("write.csv", "w");

if ($read_handle) {
    while (($buffer = fgets($read_handle, 4096)) !== false) {

            // Some modifications to the buffer here, converting it to CSV format
            @fwrite($write_handle, $buffer."\n");

        }

    }
    if (!feof($read_handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    @fclose($read_handle);
    @fclose($write_handle);
}

?> 
```

该脚本在命令行上运行，然后当我“跟踪”生成的 CSV 时，它会显示上述编码。当我将 CSV 导入 MySQL 时，它显示了相同的结果。在 OpenOffice 中打开 CSV 时类似。

txt 文件是从 Google BigQuery 导出的，使用以下命令

```
bq -q --format=pretty query "SELECT QUERY HERE" > somefile.txt 
```

您可能会想，为什么不直接让 BigQuery 命令行工具输出一个 CSV 文件，但那是因为它会触发系统中的一些 bug，这些 bug 也与此编码有关......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:08:11.633

这听起来像是 BigQuery CLI 中的一个错误。默认情况下，字符串在输入时为 UTF-8，在输出时为 UTF-8。但是，在客户端中组合 Unicode 和非 Unicode 字符串似乎存在打印问题...

要仔细检查这是否是客户端问题，您可以传递标志“--apilog=”并检查查询的消息请求/响应。如果响应正确但客户端打印的结果错误，那么这肯定是客户端问题。

如果您有一些示例数据可以上传和查询以重现此问题，请在[http://code.google.com/p/google-bigquery-tools/issues/list](http://code.google.com/p/google-bigquery-tools/issues/list)打开一个问题，以便我们确保修复你的具体问题。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T01:30:02.283

请注意，使用 BigQuery 命令行工具，您可以从查询创建新表，然后将该查询导出为 CSV。

```
# Run Query:
bq query --destination_table=mydataset.baby_table "SELECT name,count FROM mydataset.babynames WHERE gender = 'M' ORDER BY count DESC LIMIT 6"

# Extract data to CSV:
bq extract mydataset.baby_table gs://mybucket/baby_table.csv 
```

# jquery - 迭代 div 中的 div 和特定类型的 css

> ID：10704714
> 
> 赞同：0
> 
> 时间：2012-05-22T15:03:34.573
> 
> 标签：jquery

是否可以遍历 div 中包含的 div 和某种类型的 css 类？

因此，遍历这个 jSfiddle 中的所有 div，这些 div 位于 div 'outerDiv' 中并且类型为 css - 'testCss'

```
<div id="outerDiv">
    <div class="testCss">test1</div>
    <div class="testCss">test2</div>
    <div class="testCss">test3</div>
    <div class="testCss">test4</div>
    <div class="testCss2">ignoreThis</div>
</div>​ 
```

[http://jsfiddle.net/Ya9ww/2/](http://jsfiddle.net/Ya9ww/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:05:07.013

是你一直要求的吗？

```
$("#outerDiv div.testCss") ... 
```

**演示：http:** [//jsfiddle.net/Ya9ww/3/](http://jsfiddle.net/Ya9ww/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:05:20.937

```
$('#outerDiv div.testCss]').each(function() {

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:10:19.493

这很好让您“迭代”所有的 div，就像您在问题中所说的那样。这不是设置颜色的好方法，但我只是想展示一下`.each()`

```
$('#outerDiv .testCss').each(function(){
   $(this).css('color','red');
});​ 
```

**演示** [http://jsfiddle.net/Ya9ww/9/](http://jsfiddle.net/Ya9ww/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:14:03.110

和所有其他人一样 - 我建议你：

```
$('#outerDiv > div.testCss]').each(function() {

}); 
```

我必须说的一件事 - 使用 ">" 确保您没有迭代嵌套的 div，例如：

```
<div id="outerDiv">
    <div class="testCss">
      <div class="testCss">IgnoreThis</div>
    </div>
</div>​ 
```

# java - 使用 Java 对数百万个 int/string 对进行排序

> ID：10704721
> 
> 赞同：12
> 
> 时间：2012-05-22T15:03:57.490
> 
> 标签：java, sorting

我在一个文本文件中有 50,000,000 个（整数，字符串）对。整数是以毫秒为单位的时间，因此是 13 位长（例如 1337698339089）。

文本文件中的条目如下所示：

```
1337698339089|blaasdasd
1337698339089|asdasdas
1337698338089|kasda 
```

可以有相同的条目。

我想对整数上的条目进行排序（按升序），保留任何重复的整数并保留 (integer, string) 对。我采取的方法会导致内存错误，因此我正在寻找替代方法。

我的方法是这样的（使用一些伪代码）：

```
// declare TreeMap to do the sorting
TreeMap<Double, String> sorted = new TreeMap<Double, String>();

// loop through entries in text file, and put each in the treemap:
for each entry (integer, string) in the text file:

   Random rand = new Random();
   double inc = 0.0;

   while (sorted.get(integer + inc) != null) {
       inc = rand.nextDouble();
   }

   sorted.put(integer + inc, string); 
```

我在这里使用随机数来确保可以在树形图中输入重复的整数（通过将它们增加 0 和 1 之间的两倍）。

```
// to print the sorted entries:
for (Double d : sorted.KeySet()) {
    System.out.println(Math.round(d) + "|" + sorted.get(d));
} 
```

这种方法有效，但会分解 50,000,000 个条目（我认为是因为树形图变得太大；或者可能是因为 while 循环运行时间过长）。

我想知道更有经验的程序员会采取什么方法。

非常感谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-22T15:14:40.603

如果您有足够的内存，您应该可以使用列表来执行此操作。我会为条目创建一个单独的类：

```
class Foo : Comparable<Foo> {
    private final long time;
    private final String text;

    // Constructor etc
} 
```

在内存方面，您需要能够存储 5000 万个实例以及对它们的引用。在 32 位 JVM 上，这将是：

*   每个对象 8 个字节的开销 (IIRC)
*   8个字节`time`
*   4 个字节用于`text`字段
*   字符串约 54 字节（8 字节开销 + 三个`int`字段 IIRC +`char[]`数组引用 + 10 字符数组约 32 字节）
*   4 个字节用于数组中的引用或`ArrayList`

因此，每个实例大约有 80 个字节 - 比如说 100 个要四舍五入。存储其中的 50,000,000 个需要 5,000,000,000 字节，也就是 5GB，这比我认为 32 位 JVM 可以应付的要多。

因此，要在内存中完成所有这些操作，您需要一台 64 位机器和 64 位 JVM，然后由于更大的引用等，开销可能会有所增加。可行，但不是非常令人愉快。

然而，其中很大一部分是由于字符串。如果你真的想提高效率，你*可以*创建一个巨大的 char 数组，然后将偏移量存储在`Foo`. 读取文本数据时读入数组，排序后用它写出数据。更复杂，更丑陋，但内存效率更高。

或者，您可以在内存中执行此操作*-*我敢肯定，如果您四处搜索，您会发现很多有关通过文件系统进行排序的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:15:59.480

我可能会考虑使用数据库（如 H2；这很方便，因为您可以将其直接拉入您的 Java 项目）并按照您想要的方式设置索引。数据库已经解决了处理大量数据和组织数据的问题。然后您可以执行 SQL 查询以按顺序获取结果并将它们写回。

结果集会将数据分块流式传输给您；不要尝试将所有内容加载到单个列表中。

虽然 H2 确实支持内存；在这种情况下，我会将其配置为使用磁盘，除非您有大量 RAM 和 64 位 Java。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:12:57.947

为什么使用 a`double`来存储 a `long`？

A`Map<Long, String>`不能有重复的键。一个会覆盖另一个。

我怀疑您是否可以将所有这些都放入记忆中。那是 0.5 GB 仅用于存储长整数，更多用于存储字符串。使用 32 位 JVM 可能无法做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-22T15:18:36.790

你给 JVM 更多内存了吗？尝试使用 -Xmx1024M 命令行选项运行它。而且 treeMap 显得不必要的复杂，你可以使用内置的 Java 命令

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-22T15:34:27.813

您的问题看起来有两部分：

1.  **算法：**我建议使用一些内置的 java 排序算法。在 google 上很容易找到参考资料，例如[this](http://www.digizol.com/2008/07/java-sorting-comparator-vs-comparable.html)。
2.  **JVM：**您的问题的根源听起来可能没有足够的内存分配给您的 java 虚拟机。我建议增加最大大小，因为您正在处理的信息量下降。

您正在寻找的 JVM 参数应该是：

*   **-Xms**指定初始 Java 堆大小和

*   **-Xmx**最大 Java 堆大小。

参考：[http ://www.rgagnon.com/javadetails/java-0131.html](http://www.rgagnon.com/javadetails/java-0131.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T15:19:56.787

抛出了什么错误？你能成功地将所有数据加载到内存中吗？我建议你试试 Java Comparator 类。也许我会尝试创建一个自定义对象来表示这对：

```
class Entry{
    long i;
    String s;
} 
```

然后创建一个自定义比较器

```
class IComp implements Comparator<Entry>{
    public int compare(Entry e1, Entry e2){
      if(e1.i < e2.i) return -1;
      //complete the rest

    }
} 
```

然后将所有对象放入一个数组 Entry[] 条目中，并创建一个比较器 IComp icomp 使用 Arrays.sort(entry, icomp)

由于您将创建 5000 万个对象，因此您需要确保有足够的堆空间。

如果您有大量重复的字符串，并且这些字符串是不可变的；您可以创建一个 Set 来存储字符串，并回收它们以在您的条目中创建更轻的对象

Entry.s = set.get()...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T04:33:53.630

我很想通过对数据块进行排序并将它们写入不同的文件并对这些文件应用合并排序来解决这个问题。这是 [工作演示](http://www.codeodor.com/index.cfm/2007/5/14/Re-Sorting-really-BIG-files---the-Java-source-code/1208)，可能对您的场景有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-27T11:06:01.910

我不确定您是否要在完成排序后使用所有值。但是 5000 万这个数字给了我一个暗示，你有可能只是在排序之后取最高的 X 值并用它们做一些事情。

在这种情况下：只需使用最小堆，每次遇到大于堆顶的数字时，从堆中删除最小并添加新数字。这样，您不必将所有数字都保存在内存中，只需将其中的 X 个保存在内存中。

# orchardcms - Orchard CMS 一个小部件，用于几层

> ID：10704733
> 
> 赞同：0
> 
> 时间：2012-05-22T15:04:45.880
> 
> 标签：orchardcms

我有高级菜单小部件和两层主页和普通内容页面。是否可以将一个小部件放置到两层，或者重用小部件的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:15:32.147

不，这是不可能的，您需要在每个图层中复制一个小部件，或者您需要定义一个使用规则的图层，该规则是每个图层规则的“或”组合。

# asp.net - IIS7 集成模式下的 HttpWorkerRequest.GetPreloadedEntityBody

> ID：10704743
> 
> 赞同：1
> 
> 时间：2012-05-22T15:05:11.730
> 
> 标签：asp.net, iis-7, httphandler

我正在尝试构建一个 HttpHandler (.NET Framework 4) 来处理大文件的上传。这个想法是获取[HttpWorkerRequest](http://msdn.microsoft.com/en-us/library/system.web.httpworkerrequest.aspx)并读取正文流。我使用*HttpWorkerRequest。[GetPreloadedEntityBody](http://msdn.microsoft.com/en-us/library/system.web.httpworkerrequest.getpreloadedentitybody.aspx)*检索收到的 HTTP 正文的第一个块。

这是我获取预加载实体的方法：

```
IServiceProvider provider = (IServiceProvider)context;
HttpWorkerRequest wr = (HttpWorkerRequest)provider.GetService(typeof(HttpWorkerRequest));
byte[] entityBodyBytes = wr.GetPreloadedEntityBody(); 
```

当我在本地 IIS（windows xp 下的 5.1）或 Visual Studio Web 服务器下运行我的网站时，这很有效，但是当我在 IIS 7（集成模式）下运行它时，*GetPreloadedEntityBody*方法不断返回一个空字节数组。

*关于为什么GetPreloadedEntityBody*方法的返回字节数组在 IIS 7 上为空的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T21:14:53.850

我不是这方面的专家，但我认为这是因为在你问的时候身体还没有加载。在调用 GetPreloadedEntityBody() 之前尝试检查 GetPreloadedEntityBodyLength() > 0。如果它为零，那么您将不得不直接跳入您的文件读取循环。

# php - $_GET / $_REQUEST 与字符串不同？

> ID：10704747
> 
> 赞同：2
> 
> 时间：2012-05-22T15:05:23.473
> 
> 标签：php

我正在尝试使用这个库[http://code.google.com/p/php-tail/](http://code.google.com/p/php-tail/)

它在工作时是一个很棒的工具，但我坚持使用一些配置。

目前我正在跟踪的文件是在构建类时设置的：

```
$tail = new PHPTail("example.log"); 
```

这很好用，也可以

```
$log_file = "example.log";
$tail = new PHPTail($log_file); 
```

什么不起作用（使用 URL localhost/tail.php?file=example

```
$log_file = $_GET['file'].".log";
$tail = new PHPTail($log_file); 
```

也没有

```
$log_file = $_REQUEST['file'].".log";
$tail = new PHPTail($log_file); 
```

即使页面的标题设置了正确的日志路径，但脚本不会运行。我没有看到任何 PHP、JS 或 AJAX 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:17:40.503

只需检查您返回的字符串 man ...当您甚至不提供输出时，您怎么能说它是 $GET 或 $REQUEST ！

如果是任何东西，那绝对是您传递请求的方式！

# android - 为什么每当我从同一位置启动我的应用程序时位置会改变

> ID：10704749
> 
> 赞同：0
> 
> 时间：2012-05-22T15:05:25.750
> 
> 标签：android, google-maps

嘿，在使用谷歌地图时，任何人都可以告诉我为什么有时会发生这种情况，有时我会得到我当前的位置，有时会发生不同的情况，比如离我当前位置 900 米的地方？？作为初学者，所以不明白为什么会这样。我会非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:02:39.623

需要一些代码来解释您如何设置它，以及您所处的环境（室内、室外静止、移动等）

Android 的位置提供者基本上是 GPS 或网络（手机信号塔），有时是 wifi 点。

您可以请求使用多种提供商类型中的一种，当位置发生变化时，系统会告诉您哪个提供商正在为您提供信息，以及准确性如何。

您还可以要求 Android 通过给定一组标准来为您提供“最佳”提供商，但这有很多取决于设备的问题，当您认为应该获得 GPS 时，您可能最终会使用网络，所以它是最好自己专门管理它们，不要让 android/device 为你决定。

您还可以在获得更新之前指定最小频率和地理围栏（您移动了多远），如果您正在移动，这也会影响准确性/电力使用。

所有这些因素都必须考虑在内，一般来说，如果您只使用 GPS 并且您是静止的，那么您可以立即进行一些不稳定的修复，直到准确度稳定下来，之后它应该会逐渐变得更好，直到达到峰值，然后你会看到准确性和修复反弹一点。

另一方面，如果您正在开车，并且地形正在发生变化（山丘、建筑物等），那么您需要检查提供者的准确性并对使用哪个做出一些最佳猜测等。

如果你在里面，那么信号会降级、反弹并做各种有趣的事情，但解决办法还是使用你能得到的最准确的信号。

如果您让谷歌地图黑盒位置信息，那么很可能是环境或设备“最佳”提供商故障。

希望这有助于解释一些事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:12:22.553

首先，您需要先了解如何返回 GPS 位置：通过您的网络，因此当前位置和边距的差异主要取决于网络覆盖范围。因此可能会产生滞后 bij 缺乏连接。

此外，gps 位置是通过您的网络设备发送的，但即使优化了网络覆盖范围，您当前的位置和指示的位置之间可能仍然存在很小的差距。这与连接和服务器/gps 状态中的各种元素有关。

# winapi - 如何枚举 \GLOBAL 下的所有文件？？\

> ID：10704751
> 
> 赞同：3
> 
> 时间：2012-05-22T15:05:40.343
> 
> 标签：winapi, device-driver

我有一堆设备文件，可以通过`\\.\name_of_file`使用`CreateFile`.

我可以使用[WinObj](http://technet.microsoft.com/en-us/sysinternals/bb896657.aspx)查看这些文件的列表，但我想做的是以编程方式遍历它们。很多谷歌搜索似乎暗示我可以使用对象管理器或 NT 命名空间，但我找不到其中任何一个的 API，也找不到 WinObj 的来源……

任何人都可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:36:58.030

[蜿蜒穿过对象管理器](http://www.osronline.com/article.cfm?article=381)可能是您正在寻找的。[Osronline](http://www.osronline.com/)很酷。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T21:02:39.607

执行此操作的 API 已记录在案**，但不保证在未来版本的 Windows 中有效**。考虑到这一点，请看以下内容： [NtOpenDirectoryObject](http://msdn.microsoft.com/en-us/library/bb470234%28v=vs.85%29)，[NtQueryDirectoryObject](http://msdn.microsoft.com/en-us/library/bb470238%28v=vs.85%29)

# jquery - 在 jQuery UI 日期选择器中将标题移动到底部

> ID：10704755
> 
> 赞同：0
> 
> 时间：2012-05-22T15:06:02.027
> 
> 标签：jquery, jquery-ui

就像标题说的那样，出于美观的目的，我想将标题（上一个、下一个、当前月份）移到底部。我是个笨蛋，有办法在设置中设置它，还是我必须用 hacky 绝对定位来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:45:57.003

没有内置的方法可以做到这一点。使用该`beforeShow`选项将不起作用，因为当它触发日期选择器的 HTML 时，尚未创建。datepicker 小部件应该触发一个`create`事件，但不会（它在事件文档中被标记为一个错误 - [http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)）。

就我个人而言，我认为最干净的方法是`focus`通过`input[type=text]`. 不一定是理想的，但这不会让人觉得太hacky并且有效。

```
$('input')
    .datepicker()
    .on('focus', function() {
        $('.ui-datepicker-header').insertAfter('.ui-datepicker-calendar');
    }); 
```

**现场示例**- [http://jsfiddle.net/5gWrS/](http://jsfiddle.net/5gWrS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:18:45.463

There is the list of all the options for the jqueryui datepicker on the bottom of this page:

[http://jqueryui.com/demos/datepicker/](http://jqueryui.com/demos/datepicker/)

I can not find any option for moving the header.

I think you will have to go with hacky code.

A short code similar to the one below should move the datepicker header at the end of it's parent element, so it should be displayed below the calendar. You should execute the code while opening the datepicker overlay:

```
jQuery('.ui-datepicker-header').each(function() { $(this).parent().append($(this)) }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:17:07.070

在我的头顶上有几种方法可以做到这一点：

*   扩展 datepicker 类并添加您自己的 HTML

*   使用该`beforeShow`选项更改 DOM。删除标题并将其附加到选择器的底部。

祝你好运

# applescript - 使用 Applescript 复制文件夹组

> ID：10704760
> 
> 赞同：0
> 
> 时间：2012-05-22T15:06:13.450
> 
> 标签：applescript

我一直在为我的工作从事这个项目，其中涉及将选定的信息从计算机备份到我们的一台服务器。到目前为止，我已经发布了几个问题并得到了很多宝贵的帮助，所以感谢大家！我遇到的当前错误是尝试复制涉及多个错误的选择时。如果我尝试复制一个文件夹，它就可以正常工作，但多个文件夹就不太好用了。代码如下

```
display dialog "Please enter your augnet username" default answer "username"
set username to (text returned of result)

set server to "smb://orgs.augsburg.edu"

try
    mount volume server
on error
    display dialog "Either you are already connected, or there was a problem reaching the server. Please disconnect and try again."
end try

delay 3

tell application "Finder"
    set backup to make new folder at folder "ORGS:Information Technology:www:kb_images:Migration Testing:" with properties {name:username}
end tell

set theSelection to choose folder with prompt "Please select what you would like to transfer" with multiple selections allowed

tell application "Finder" to duplicate folder theSelection to backup 
```

任何人都可以给我任何涉及多个文件夹选择的帮助，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:33:39.773

该`choose folder … with multiple selections allowed`命令将返回指向文件夹的*别名对象列表（当然，除非取消）。*只需使用循环遍历该列表`repeat`：

```
set selectedFolders to choose folder with prompt "Yadda" with multiple selections allowed
repeat with selectedFolder in selectedFolders
    -- do something with the folder
end repeat 
```

一般来说，当不确定命令返回什么时，只需执行它并查看 AppleScript 编辑器结果窗口中的输出。在您的情况下，它看起来像这样：

![AppleScript 编辑器命令和输出](../Images/e2d99e14cb46f107e4036843e0b26733.png)

– 它告诉你所有你需要知道的：返回的数据是一个列表（它用大括号`{`和括起来`}`）并包含由它们的 HFS 路径表示的*别名对象。*至于循环等基础知识，[Applescript 语言指南](https://developer.apple.com/library/mac/#documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_control_statements.html#//apple_ref/doc/uid/TP40000983-CH6g-127362)（可通过 AppleScript 编辑器的帮助菜单访问）包含您需要的所有详细信息。

最后，我建议使用*System Events*而不是 Finder 进行复制操作，因为它更快并且在后台运行。

# vba - vba更好的方法将数组中的所有值设置为相同的东西

> ID：10704764
> 
> 赞同：5
> 
> 时间：2012-05-22T15:06:32.863
> 
> 标签：vba, excel

这是个人好奇的问题。

在 VBA 中，如果我有一个大小为 2 的数组：

```
Dim r(1) as Variant 
```

我希望数组中的两个值都是-1。我可以做这个：

```
r(0)=-1
r(1)=-1 
```

或者我可以使用循环遍历两者并将它们设置为-1。

所以我的问题是，有什么方法可以将数组中的所有值设置为相同的值而无需迭代？

或者，有什么办法我可以做类似的事情：

```
r = array(-1,-1) 
```

这可能是一个非常愚蠢的问题，但我似乎无法找到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T20:21:33.020

我不太擅长画图。但这应该让您清楚与变体数组相关的概念。

![变体与变体数组](../Images/0507e753055be0c64d59b167b8824dd8.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T15:15:01.240

是的，你可以做到。但是在声明数组时你必须小心

例子

```
Option Explicit

Sub Sample()
    Dim r As Variant '<~~

    r = Array(-1, -1)

    Debug.Print r(0)
    Debug.Print r(1)
End Sub 
```

**跟进**

请参阅 Excel 帮助文件 :) 数组函数返回一个`Variant`包含一个`array`. 您不能将一个数组直接分配给另一个数组。要将数组分配给另一个数组，您必须使用此方法。

```
Option Explicit

Sub Sample()
    Dim r(1) As Variant 
    Dim s As Variant
    Dim i As Long

    s = Array(-1, -1)

    For i = LBound(r) To UBound(r)
       r(i) = s(i)
    Next

    Debug.Print r(0)
    Debug.Print r(1)
End Sub 
```

# c# - 如何获取多个标签的内部文本？

> ID：10704770
> 
> 赞同：3
> 
> 时间：2012-05-22T15:06:44.193
> 
> 标签：c#, html-agility-pack

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:14:24.807

看起来你的问题是`header.ParentNode.SelectSingleNode(".//a[contains(@href, '#')]")`陈述。它会将您带回到父`div`元素，然后找到`a`与条件匹配的第一个元素（始终是同一个元素）。您已经拥有该`a`节点，因此您可以通过其属性检查它的属性，而不是进行另一个选择。但是，当您可以只进行一次选择以首先缩小范围时，进行第二次选择是愚蠢的，例如：

```
HtmlNodeCollection headers = _markup.DocumentNode.SelectNodes("//div[contains(@id, 'infor')]/a[contains(@href, '#')]");
if (headers != null)
    {
    string genres = "";
    foreach (HtmlNode header in headers) // i not sure what happens here. 
        {
        genres += header.InnerText + ", ";
        }
    return genres;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:20:11.003

我想，一点 Linq 和使用 Descendants 会让你更轻松。

```
var genreNode = _markup.DocumentNode.Descendants("div").Where(n => n.Id.Equals("genre")).FirstOrDefault();
if (genreNode != null)
{
    // this pulls all <a> nodes under the genre div and pops their inner text into an array
    // then joins that array using the ", " as separator.
    return string.Join(", ", genreNode.Descendants("a")
        .Where(n => n.GetAttributeValue("href", string.Empty).Equals("#"))
        .Select(n => n.InnerText).ToArray());
} 
```

# jquery - 多个 AJAX 请求冻结浏览器

> ID：10704772
> 
> 赞同：-1
> 
> 时间：2012-05-22T15:06:54.267
> 
> 标签：jquery, html, ajax, cors

在页面加载时，我提出了两个 AJAX 请求：一个是从 Youtube 频道提取最新视频，另一个是从博客中提取最新帖子。两个脚本都能正常工作。

无论出于何种原因，我都无法在任何浏览器（Chrome、Firefox、Safari 和 Opera）中对其进行测试。请求是否太大？我在使用 Chrome 时遇到了 CORS 支持的问题（至少我认为是这样），所以博客请求在那里不起作用并且完全抵消了视频请求（它不起作用）。

这是我在 Chrome 的 Javascript 开发控制台中遇到的错误：

> XMLHttpRequest 无法加载[http://devingraham.blogspot.com/rss.xml](http://devingraham.blogspot.com/rss.xml)。Access-Control-Allow-Origin 不允许 Origin null。

如果我改变...

```
var tmp = $(this).find("content:first").text(); 
```

...只是找到“标题：第一个”，它在 Safari 中呈现良好而不会冻结。如果我将它保留在内容并加载页面，我可以看到帖子加载得很好，但是页面冻结并且不会加载视频。所以也许是太多了？我知道我要发布的帖子很长，但它会引起任何问题似乎很愚蠢。那么你有什么想法吗？

这是脚本：

```
<script type="text/javascript" charset="utf-8">

    $(function() {
          $.ajax({
            type: "GET",
            url: "http://gdata.youtube.com/feeds/base/users/devinsupertramp/uploads?orderby=updated&alt=rss&client=ytapi-youtube-rss-redirect&v=2",
            dataType: "xml",
            success: parseVideo
          });
          $.ajax({
            type: "GET",
            url: "http://devingraham.blogspot.com/rss.xml",
            dataType: "xml",
            success: parseBlog
          });
    });

    function parseVideo(xml) {
        $(xml).find("item:first").each(
            function() {
                var tmp = $(this).find("link:first").text();
                tmp = tmp.replace("http://www.youtube.com/watch?v=", "");
                tmp = tmp.replace("&feature=youtube_gdata", "");
                tmp2 = "http://www.youtube.com/embed/" + tmp + "?autoplay=1&controls=0&rel=0&showinfo=0&autohide=1";
                var iframe = $("#ytplayer");
                $(iframe).attr('src', tmp2);
            }
        );
    }

    function parseBlog(xml) {
        $(xml).find("entry:first").each(
            function() {
                var tmp = $(this).find("content:first").text();
                var post = $("#blog");
                post.append(tmp);
            }
        );
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:53:54.437

默认情况下，由于同源策略，您无法发出跨域 AJAX 请求。

您可以解决此问题，但需要[其他域上的站点合作](http://www.w3.org/TR/access-control/)才能明确允许此类请求。

请参阅：[规避同源策略的方法](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)

# jqgrid - jqgrid自定义格式化程序按钮单击事件不起作用

> ID：10704774
> 
> 赞同：1
> 
> 时间：2012-05-22T15:06:59.110
> 
> 标签：jqgrid, jqgrid-asp.net, jqgrid-formatter

我已经动态构建了一个 jqgrid，我无法调用按钮的 onclick 函数。

我的代码：

```
function buildButtons(cellvalue, options, rowObject) {
            var optionsRowId = options.rowId;
            var editDelButtons = "<input style=\"height:22px;width:40px;\" type=\"button\" value=\"Edit\" onclick=\"javascript:testRow('" + optionsRowId + "')\" />";
            return editDelButtons;

        }

function testRow(rowID)
{
  alert(rowID);
 } 
```

}

当我单击 jqgrid 每一行中的按钮时，我总是得到的错误是“函数未定义”

我的函数写在 customFormatter 函数的正下方。

请尽快帮助我，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:12:14.137

您必须将功能置于`testRow`功能之外`.ready()`。

例如

```
$(function(){

    function buildButtons(cellvalue, options, rowObject) {
        var optionsRowId = options.rowId;
        var editDelButtons = "<input style=\"height:22px;width:40px;\" type=\"button\" value=\"Edit\" onclick=\"javascript:testRow('" + optionsRowId + "')\" />";

        return editDelButtons;
    }

})

function testRow(rowID)
{
    alert(rowID);
} 
```

# php - 从其他页面获取内容并使用 URL 参数

> ID：10704779
> 
> 赞同：2
> 
> 时间：2012-05-22T15:07:14.663
> 
> 标签：php, javascript, dynamic, url-parameters

所以这是我在网络上的第一个真正的编码问题，因为通常我会尝试自己寻找东西，但是他的时间，我真的被困住了。

要查看我到目前为止所拥有的：[请参阅此网页](http://hiremartie.com/wizapptest/wizard.php)

* * *

**我想要达到的目标：**

我目前工作的公司希望我创建一个“向导”，通过选择您的情况并扩展它来解决与 WiFi 相关的问题。最后，它需要在 Joomla 支持的网站中实现，所以我想办法是将所有内容加载到一个页面中。

* * *

**我是如何接近它的**

我首先去寻找一种将其他页面加载到一个主页中的方法。我通过使用 JavaScript 实现了这一点（[在这个网站上找到](http://frinity.blogspot.com/2008/06/load-remote-content-into-div-element.html)）

在弄清楚这一点之后，我开始创建我的“跟进”页面，一切都很顺利，直到我来到一个通过抓取 URL 参数来过滤其内容的页面。

对于对工具提示功能感兴趣的人，请参阅 [this page][3]

* * *

**有什么问题**

我使用 If Else 循环过滤掉可能的选项，如果没有找到这些选项，页面应该给我以下“Het ziet er naar uit dat er iets fout is gegaan”或英文，“看起来有些东西出错”。由于这是我收到的消息，实际上确实出了问题。在一遍又一遍地查看我的代码之后，我认为这可能是因为它没有抓取的 URL 参数。

我想过要一个静态页面链接（只需将按钮链接到一个独特的页面），但我做了一些计算，为此，我需要大约 70 多个页面，这感觉像是浪费。

* * *

**编码**

到目前为止，这是我的代码：

**我的主页**

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>EnGenius WiFi Wizard</title>
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script language="javascript" type="text/javascript" src="js/jquery.js"></script>
    <script language="javascript" type="text/javascript" src="js/script.js"></script>

    </head>

    <body>
    <script type="text/javascript">
    function loadContent(elementSelector, sourceUrl) {
    $(""+elementSelector+"").load(""+sourceUrl+"");
    }
    </script>
<div id="content">
  <h1>De WiFi Wizard</h1>
    <h3>Snel en gemakkelijk een draadloze oplossing</h3>

  <div id="btnholder" style="margin-top:15px;">
            <a href="javascript:loadContent('#content', 'speed.php');"><div         id="button">Mijn internet is te langzaam</div></a>
            <a href="javascript:loadContent('#content', 'router.php');"><img         src="images/tip.png" style="float:left; margin-left:3px;" alt="WiFi tip" width="15"         height="15" onmouseover="tooltip.show('Internet snelheid word ook wel aangeduid met het         woord Bandbreete', 250);"
    onmouseout="tooltip.hide();" />
            <div id="button" style="margin-left:10px;">Ik heb een router nodig,         Maar weet niet welke</div></a><img src="images/tip.png" style="float:left; margin-        left:3px;" alt="WiFi tip" width="15" height="15" onmouseover="tooltip.show('Een router is         een apparaat wat een netwerk met het internet verbind', 250);"
    onmouseout="tooltip.hide();" />
  </div> 
    <h3>Wat is Wifi eigenlijk?</h3><br />

    <h4>WiFi is een verzameling van standaarden voor draadloze netwerken.

    Wat houdt dit nou precies in?
    Heel makkelijk gezegd: Internetten zonder lastige lange kabels! 
    Je kunt bv met jouw laptop lekker op de bank zitten en genieten van internet.<br />        <br />

    Als je thuis een draadloos netwerk wilt dan heb je een product nodig waar dus de         standaard/naam ‘802.11’ op staat.<br />
    Helaas zijn we in Nederland een behoorlijk bepakt (woon)gebied. Hierdoor kun je         bijvoorbeeld storing hebben op jouw (technische) producten die je thuis gebruikt.<br /><br         />

    Ook met WiFi kunnen er situaties voorkomen waarbij je geen optimaal gebruik kunt         maken van de oplossingen die worden aangeboden.<br /><br />
    Via deze website kom je op de hoogte wat nou al die termen eigenlijk betekenen en
    welke oplossingen er zijn voor bepaalde situaties, kortom je wordt een echte WiFi         kenner!<br />
    <br />
    </h4>       
</div>

    </body>
    </html> 
```

* * *

**我的第二页内容**

```
 <h1>De WiFi Wizard</h1>
            <h3>Dus u heeft een probleem met de snelheid van uw internet? Dat gaan we oplossen!</h3>
            <h3 style="font-size:10pt; color:#666666;">Wat is de afstand tussen uw computer en uw router?</h3>

            <div id="btnholder" style="margin-top:15px;">
            <a href="javascript:loadContent('#content', 'detail.php?prob=010');"><div id="button">0-10 Meter</div></a>
            <a href="javascript:loadContent('#content', 'detail.php?prob=1030');"><div id="button" style="margin-left:10px;">10-30 Meter</div></a>
            <a href="javascript:loadContent('#content', 'detail.php?prob=30');"><div id="button" style="margin-top:10px; margin-left:90px;">Meer dan 30 Meter</div></a>
            </div> 
            <br />
            <h3>Waarom is afstand zo belangrijk?</h3>
            <br />

            <h4>Een WiFi signaal reist door de lucht, en kan worden verstoord door veel verschillende dingen zoals, muren, plafonds, andere apparaten, en andere WiFi signalen.</h4>
            <h4>Daarnaast verliest een signaal na verloop van tijd zelf ook sterkte, net als met geluid dat je over een grotere afstand steeds slechter hoort. </h4>
            <h4>Stel je voor dat je het signaal sterker kan maken, door een ander apparaat te gebruiken. Dat kan, omdat wij  altijd onderdelen van hoge kwaliteit gebruiken, kunnen wij ervoor zorgen dat uw WiFi signaal een beter bereik heeft, en u dus een snellere verbinding krijgt.<br />
            <br />
            </h4> 
```

* * *

**我的 URL 参数页面**

```
 <h1>De WiFi Wizard</h1>
            <?php   

            $prob = $_GET["prob"]; 

            if ($prob == 010)
            {
            echo "<h3 style='font-size:10pt; color:#666666;'>Nu we de aftand weten moeten we uitvinden hoeveel mensen er gebruik maken van het netwerk</h3>";
            } 

            if ($prob == 1030){ 

            echo "<h3 style='font-size:10pt; color:#666666;'>Nu we de aftand weten moeten we uitvinden hoeveel muren en/of plafonds er zich tussen de computer en de router bevindenk</h3>";
            }

            if ($prob == 30){ 

            echo "<h3 style='font-size:10pt; color:#666666;'>Nu we de aftand weten moeten we uitvinden hoeveel mensen er gebruik maken van het netwerk</h3>";
            }

            else{
            echo "<h3 style='font-size:10pt; color:#666666;'>Het ziet er naar uit dat er iets fout is gegaan</h3>";
            }                   

            ?>

            <div id="btnholder" style="margin-top:15px;">
            <?php   

            $prob = $_GET["prob"]; 

            if ($prob == 010)
            {
            echo "<a href='javascript:loadContent('#content', 'users.php?amnt=15');'><div id='button'>1-5 gebruikers</div></a>
            <a href='javascript:loadContent('#content', 'users.php?amnt=5');'><div id='button'>Meer dan 5 gebruikers</div></a>";
            } 

            if ($prob == 1030){ 

            echo "<a href='javascript:loadContent('#content', 'pen.php?amnt=none');'><div id='button'>Geen plafonds of muren</div></a>
            <a href='javascript:loadContent('#content', 'pen.php?amnt=1');'><div id='button'>1 Muur of Plafond</div></a>
            <a href='javascript:loadContent('#content', 'pen.php?amnt=2');'><div id='button'>2 Muren of Plafonds</div></a>
            <a href='javascript:loadContent('#content', 'pen.php?amnt=more');'><div id='button'>Meer dan 2 muren of plafonds</div></a>";
            }

            if ($prob == 30){ 

            echo "<a href='javascript:loadContent('#content', 'users.php?amnt=15');'><div id='button'>1-5 gebruikers</div></a>
            <a href='javascript:loadContent('#content', 'users.php?amnt=5');'><div id='button'>Meer dan 5 gebruikers</div></a>";
            }

            else{
            echo "-";
            }                   

            ?>

            </div> 
            <br />  
            <?php   

            $prob = $_GET["prob"]; 

            if ($prob == 010)
            {
            echo "<h3>Wat Maakt het aantal gebruikers uit?</h3>
            <br />

            <h4>Het aantal gebruikers bepaalt de hoeveelheid data die er word gebruikt binnen een netwerk. Hoe meer gebruikers er op een netwerk zitten, des te meer data word er gebruikt.<br />
            <br />Als het netwerk dit niet aankan, betekent het dat u een onstabiel, en traag netwerk krijgt, waardoor u niet optimaal van uw internet kunt genieten.</h4>";
            } 

            if ($prob == 1030){ 

            echo "<h3>Wat Maakt het aantal muren of plafonds uit?</h3>
            <br />

            <h4>Waneer een WiFi signaal door muren of plafonds heen reist, neemt het in sterkte af. Dus hoe meer obstakels er tussen uw router, en uw computer staan, des te zwakker het signaal.<br />
            <br />Door middel van de juiste onderdelen, denk bijvoorbeeld aan antenna's, kun je een sterker signaal creëren dat zich verder kan verspreiden.</h4>";
            }

            if ($prob == 30){ 

            echo "<h3>Wat Maakt het aantal gebruikers uit?</h3>
            <br />

            <h4>Het aantal gebruikers bepaalt de hoeveelheid data die er word gebruikt binnen een netwerk. Hoe meer gebruikers er op een netwerk zitten, des te meer data word er gebruikt.<br />
            <br />Als het netwerk dit niet aankan, betekent het dat u een onstabiel, en traag netwerk krijgt, waardoor u niet optimaal van uw internet kunt genieten.</h4>";
            }

            else{
            echo "-";
            }                   

            ?> 
```

* * *

对不起，如果我的代码不清楚，我需要习惯网站上的整个粘贴代码，但至少我尝试过。

* * *

所以对于我们中间的**TL;DR**人来说。简而言之：

我需要过滤带有url参数的php页面，但它似乎无法抓取参数，因为URL没有直接改变。

要查看我到目前为止所拥有的：[请参阅此网页](http://hiremartie.com/wizapptest/wizard.php)

**提前致谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:23:03.903

您应该在要比较的值周围加上引号。例如，`010`将被解释为八进制。

```
if ($prob == '010') {
    ...
} else if ($prob == '1030') {
    ...
} 
```

等等。

编辑：另外，正如 Noah 所提到的，没有“prob”参数在 URL 中传递，只有“id”。所以你会分配`$prob = $_GET['id']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:22:48.727

看起来附加到 AJAX 请求的参数与 PHP 代码正在寻找的参数不同。

在您的向导主页上，如果您点击“我的互联网太慢”（谷歌翻译的第一个按钮）。如果您随后点击三个按钮中的任何一个，我就会看到您描述的错误页面。正在请求的 url 是`/detail.php?id=010`，但您的 PHP 代码段说脚本正在寻找`prob`GET 参数。

尝试调整发送到`prob`的参数或 PHP 脚本正在寻找的参数`id`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T16:13:12.610

除了[Noah Freitas](https://stackoverflow.com/users/1370576/noah-freitas)和[Dan](https://stackoverflow.com/users/1383336/dan)已经强调的几点之外，我建议您使用 PHP[开关](http://php.net/manual/en/control-structures.switch.php)来遍历所有可能的值，它的更简洁和默认选项允许您在未找到任何内容时返回错误值。

[此外，请使用isset()](http://php.net/manual/en/function.isset.php)检查您的变量，不要假设它们存在，否则：

*   调试脚本的时间太长；
*   不知道是否正在传递任何东西；
*   可能会收到一个 php 通知*( `Notice: Undefined variable`, 或`Notice: Undefined index`)* ;
*   ETC..

**基于您的代码的 PHP 示例**

```
<?php   

// check if variable is present to use it or pass empty
$prob = (isset($_GET["id"])) ? ($_GET["id"]) : (''); 

// switch by all possible values
switch ($prob) {

  case "010":
    echo "bla bla bla";
    break;

  case "1030":
    echo "bla bla bla";
    break;

  case "30":
    echo "bla bla bla";
    break;

  default:
    // This case matches anything that wasn't matched by the other cases
    // output error, or something...
    echo "-";
    break;

}

?> 
```

与您的脚本相关，您不需要使用这么多双引号：

```
<script type="text/javascript">
function loadContent(elementSelector, sourceUrl) {
  $(elementSelector).load(sourceUrl);
}
</script> 
```

# html - 可定制的导航/故障排除

> ID：10704789
> 
> 赞同：0
> 
> 时间：2012-05-22T15:07:50.460
> 
> 标签：html, navigation, stylesheet, zurb-foundation

在 HTML5 和一般编码方面，我是一个完整的初学者......我一直在使用 Zurb Foundation 进行原型设计，并使用以下代码进行导航。它的工作原理是在尺寸缩小时（例如缩小浏览器或在移动设备上打开）按钮而不是文本出现。

唯一的问题是，我希望导航与左上角放置的徽标在同一行中排列，并且布局彼此水平。现在，导航元素作为简单的链接文本堆叠在一起。这是样式表可编辑的特征吗？关于从哪里开始或自定义导航需要什么代码的任何建议？移动版 ul 类是不是基本上把我的代码弄乱了？（删除它不会在全尺寸版本中产生任何差异......）非常感谢！到目前为止，搜索并没有产生太多...

```
<div class="eight columns">
    <div id="navigation">
        <ul class="hide-on-phones">
            <li><a href="#">Home</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">For Sale</a></li>
            <li><a href="#">Contact or Visit Us</a></li>
        </ul>
        <ul class="show-on-phones">
            <li><a href="#" class="large black button">Home</a></li>
            <li><a href="#" class="large black button">Services</a></li>
            <li><a href="#" class="large black button">For Sale</a></li>
            <li><a href="#" class="large black button">Contact or Visit Us</a></li>
        </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:54:31.410

问题是样式“黑色大按钮”。当您处于“移动”分辨率时，此样式旨在扩展全屏宽度。您可以通过添加几行 CSS 来创建自己的类似按钮的元素。我在 jsFiddle 为您设置了一个演示，展示了它是如何工作的。只需在 jsFiddle 上使用分隔线并缩小显示，直到它到达“移动”断点。

链接：http: [//jsfiddle.net/fumUp/1/](http://jsfiddle.net/fumUp/1/)

```
Code:
    <!-- the inline style below should be moved to your CSS file -->
    <style>
        .mobile-nav a
        {
            border-radius:5px;
            background-color:#000;    
            padding:5px 10px;
        }
        .mobile-nav li
        {
            float:left;
            padding:5px;
        }
    </style>
    <!-- /Inline style -->
    <div class="row"><div class="eight columns">
            <div id="navigation">
                <ul class="hide-on-phones">
                 <li><a href="#">Home</a></li>
                 <li><a href="#">Services</a></li>
                 <li><a href="#">For Sale</a></li>
                 <li><a href="#">Contact or Visit Us</a></li>
                 </ul>
                <ul class="mobile-nav show-on-phones">
                 <li><a href="#" class="simple-radius">Home</a></li>
                 <li><a href="#" class="simple-radius">Services</a></li>
                 <li><a href="#" class="simple-radius">For Sale</a></li>
                 <li><a href="#" class="simple-radius">Contact or Visit Us</a></li>
                </ul>
                </div>
            </div>
    </div>​​​​​ 
```

# html - HTML/CSS：重叠文本周围的公共边框

> ID：10704790
> 
> 赞同：0
> 
> 时间：2012-05-22T15:07:53.627
> 
> 标签：html, css, styles, position, border

如何为此编码？

![在此处输入图像描述](../Images/416128aeb807c122244a7a04f47f7bd1.png)

当我们有这个时：
![在此处输入图像描述](../Images/70440a03e11550ac4efe89b59f941ffd.png)

作为

```
<html>
    <head>
        <style>             
            h2
            {
                letter-spacing:4pt;
                font-size:40pt;
                color:blue;
                text-align:center;
                position:absolute;
                top:0px;
            }
            h3
            {
                letter-spacing:4pt;
                font-size:40pt;
                color:blue;
                text-align:center;
                position: absolute;
                top:20px;
                left:20px;
            }
        </style>
    </head>

    <body>
        <h2>All right, Mate?</h2>
        <h3>All right, Mate?</h3>
    </body>
</html>
</html> 
```

...不更改原始功能/标签。
只添加（或修改）一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:08:34.797

将其包裹在一个 div 中并设置一个边框。

尝试将您的 html 更改为：

```
<div>
    <span id="h2">All right, Mate?</span>
    <span id="h3">All right, Mate?</span>
</div>​ 
```

而你的CSS：

```
div {
    padding : 5px;
    border: 3px solid red;
    height: 70px;
    width: 440px;
}
div span {
    width: 420px;
    display: block;
    letter-spacing:4pt;
    font-size:40pt;
    color:blue;
    position: relative;
}
div span#h2
{
    top:0px;
}
div span#h3
{
    top:-50px;
    left:20px;
}​ 
```

小提琴：http: [//jsfiddle.net/maniator/PJT9V/](http://jsfiddle.net/maniator/PJT9V/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T15:14:36.167

您可以将它们都放在一个包装器中，或者您可以尝试一个`text-shadow`解决方案 - 像这样[http://dabblet.com/gist/2769678](http://dabblet.com/gist/2769678)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T17:52:32.230

您可以将两者都放入一个带有`position`set to的包装器中，`relative`并定义一个固定的`width`and`height`到它。

**HTML**

```
<div class="wrapper">
    <h2>All righ, Mate?</h2>
    <h3>All right, Mate?</h3>
</div>​ 
```

**CSS**

```
.wrapper 
{
    border: 3px solid #ff0000;
    position: relative;
    width: 448px;
    height: 89px;
}    
h2
{
    letter-spacing:4pt;
    font-size:40pt;
    color:blue;
    text-align:center;
    position:absolute;
    top:0px;
}
h3
{
    letter-spacing:4pt;
    font-size:40pt;
    color:blue;
    text-align:center;
    position: absolute;
    top:20px;
    left:20px;
}​ 
```

必须定义 a`height`因为两个元素都`position`设置为它自己的。 另外，请注意，定义父级的to将影响子级的位置，因为它们的位置将相对于父级的位置计算。如果您不想要这种行为，只需从规则中删除 。`absolute``height`
`position``relative``position: relative``.wrapper`

**[活生生的例子](http://jsfiddle.net/qEyn3/4/)**

希望能帮助到你。

# javascript - 在多个项目上同时运行时，在 jQuery on 函数中保持值一致

> ID：10704791
> 
> 赞同：0
> 
> 时间：2012-05-22T15:07:54.190
> 
> 标签：javascript, jquery

我正在编写一个模块，其中包含用户可以选择回答的多个问题。每个人都有自己的提交按钮，可以将数据发布到我的应用程序，显示结果，然后删除表单。我能够让这件作品完美地工作，但如果我添加一个允许用户一次提交所有表单的按钮，它会正确提交表单数据，但结果会附加到最后一个问题（项目正在获取正确的数据） . 这是我正在使用的 javascript/jQuery 代码：

```
// setup the save answer click handler
$(document).on('click', '.saveAnswer', function(event){
    event.preventDefault();

    // get the form
    form = $(this).closest('form');

    $.ajax({
        async:true,
        type: 'POST',
        url: form.attr('action'),
        data: form.serialize(),
        success: function(data){
            // append the text to the bottom of the answers
            form.closest('.question').find('.answers').append('<li>' + data + '</li>').hide().slideDown(500);

            form.slideUp(500,function(){
                form.remove();
            });
        }
    });

});

// setup the save all answer click handler
$(document).on('click', '.saveAll', function(){
    $('.saveAnswer').trigger('click');
}); 
```

如果我将`async`值更改为 false，那么它可以正常工作，但没有任何动画可以工作，并且页面似乎会冻结一秒钟，直到提交所有答案。

经过一些调试后，我发现`form`每次运行该函数时都会覆盖该变量。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:13:41.100

`form`是一个全局（或至少是更高范围）变量，这意味着对处理程序的每次调用都会践踏旧值，并且`success`/`error`回调都共享相同的值。

使其成为本地 ( `var form = $(....);`)，以便处理程序的每次调用都有自己的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:26:35.753

以防万一您不想更改变量的范围，可以使用闭包来存储表单变量，如下所示

```
form = $(this).closest('form');
$.ajax({
        .....
        success:(function (formClosure) {
            return function(data){ 
            // for this function formClosure will be local variable, 
            // so changing form variable doesn't take effect
            formClosure.closest('.question').find('.answers').append('<li>' + data + '</li>').hide().slideDown(500);

            formClosure.slideUp(500,function(){
                form.remove();
            });
          };
        })(form)
    }); 
```

# java - Java应用程序中的填充

> ID：10704792
> 
> 赞同：0
> 
> 时间：2012-05-22T15:08:00.407
> 
> 标签：java, alignment, padding

在 HTML 和 CSS 中，如果输入 type=text，如果我们使用 padding-left:10px; 例如，文本将被写入距左边框 10px 的位置，我该如何在 java 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:13:11.463

在 Swing 中，您可以创建一个空边框。这是将此类填充添加到文本字段的代码示例：

```
import javax.swing.BorderFactory;
import javax.swing.JFrame;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;
import javax.swing.border.Border;

public class Main {
    private JFrame frame;
    private JTextField t;

    protected void initUI() {
        frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        t = new JTextField();
        Border padding = BorderFactory.createEmptyBorder(0, 10, 0, 0);
        if (t.getBorder() != null) {
            t.setBorder(BorderFactory.createCompoundBorder(t.getBorder(), padding));
        } else {
            t.setBorder(padding);
        }
        frame.add(t);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Main().initUI();
            }
        });
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:10:41.173

对于控制台输出，您可以`System.out.printf`像这样获得左填充：

```
System.out.printf("%10s%s%n", "", someStr); 
```

# c# - 如何将长数组转换为字节数组？

> ID：10704796
> 
> 赞同：3
> 
> 时间：2012-05-22T15:08:15.770
> 
> 标签：c#, arrays

数据来自程序外部，因为长数组必须转换为字节数组。如何有效地做到这一点？同样，有没有办法选择转换类型为 Little Endian 或 Big Endian。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:20:12.827

您可以这样做将`long`数组转换为`byte`数组：

```
bool isLittleEndian = true;
byte[] data = new byte[longData.Length * 8];
int offset = 0;
foreach (long value in longData) {
  byte[] buffer = BitConverter.GetBytes(value);
  if (BitConverter.IsLittleEndian != isLittleEndian) {
    Array.Reverse(buffer);
  }
  buffer.CopyTo(data, offset);
  offset += 8;
} 
```

这通常足够有效。如果您需要它更快，您应该在不安全的代码块中使用指针。

# asp.net-mvc-4 - 使用强类型模型在 MVC4 中制作 HTML 表格

> ID：10704802
> 
> 赞同：0
> 
> 时间：2012-05-22T15:08:46.753
> 
> 标签：asp.net-mvc-4, html-table

我正在尝试使用从数据库中提取的数据制作一个 HTML 表...

这是我的模型...

```
public class PopulationModels
{
    public List<PopulationModel> Populations { set; get; }
} 
```

这只是一个列表......

```
public class PopulationModel
{
    public string populationID { set; get; }

    public string PopName { set; get; }

    public string Description { set; get; }

    public string PopulationType { set; get; }

    public Boolean isActive { set; get; }

    //public List<XSLTACOData> patients { set; get; }
} 
```

我像这样将这个模型传递给我的视图......

```
IEnumerable<PopulationModels> PopModel = DataRepo.Get(userName);
return View(PopModel); 
```

我尝试通过以下方式显示列表...

```
@foreach (var item in Model) {
<tr>
    <td class="rowControl hidden">
        @*<a href="#makeRowEditable" class="makeRowEditable">Edit</a>*@ |
        @*<a href="#deleteRow" class="deleteRow">Delete</a>*@
        @Html.DispalyFor(modelItem => item.Populations)
    </td>
</tr>
} 
```

但是我很难弄清楚如何访问我的模型的各个元素......

例如

```
@Html.DispalyFor(modelItem => item.Populations) 
```

上面的代码行，我想获取每个单独的 populationModel 并为每个字段映射一个列...但我似乎无法访问各个种群...我在这里错过了一个合乎逻辑的步骤（我显然是，但是哪一步？）

更新：添加更多视图：我现在正在制作一张桌子，但我这样做的方式似乎违反直觉......

这是我的模型...

```
 @model IEnumerable<FocusedReadMissionsRedux.Models.PopulationModels> 
```

这是我创建表的方式（我计划在我能够获得一种可靠的方式来访问我的数据时立即使用 jqGrid 的 tableToGrid 功能......

```
<table border="2">
<thead>
  <tr>
  <th>
    Population Name
  </th>
   <th>
    Population Description
  </th>
  </tr>
</thead>
@foreach(var item in Model){
foreach (var pop in item.Populations)
{
<tr>
    <td class="rowControl hidden">
        @Html.DisplayFor(modelItem => pop.PopName)
        @Html.ActionLink(pop.PopName,"","")
    </td>
    <td>
        @Html.DisplayFor(modelItem => pop.Description)
        @Html.Display(pop.Description)
    </td>
</tr>
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:07:15.853

由于您没有发布视图的完整代码：您应该在视图中定义要绑定的对象类型，如下所示：

```
@model IEnumerable<PopulationModels> 
```

然后，您可以使用 foreach 循环遍历它并使用以下方法绑定到当前项目：

```
@Html.DisplayFor(x => x.Popname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T13:45:31.620

首先.. 一个好的命名约定是重命名您的

```
PopulationModels 
```

至

```
PopulationList 
```

这让其他在你身后的程序员了解模型的目的。

引入你的模型：

```
@model Models.PopulationList 
```

然后，我们可以使用 foreach 或 for 循环遍历模型列表：

```
<table>
    <thead>
        <tr>
            <th>Population Name</th>
            <th>Population Description</th>
        </tr>
    </thead>
    <tbody>
    @foreach(Population pop in PopulationList)
    {
       <tr>
          <td>@Html.DisplayFor(model => pop.PopName)</td>
          <td>@Html.DisplayFor(model => pop.PopDesc)</td>
       </tr>
    }
    </tbody>
 </table> 
```

您只需要一个 foreach 循环，因为您正在迭代模型列表中的模型。

我希望这对将来的参考有所帮助！

# android - Android 开发 - 为多种屏幕尺寸设计用户界面

> ID：10704805
> 
> 赞同：1
> 
> 时间：2012-05-22T15:08:52.647
> 
> 标签：android, android-layout, android-ui

我正在开发一个私人 android 应用程序，该应用程序将涉及使用各种图形图像。应用程序中的每个活动都会有一个图片序列。该应用程序将为安卓平板电脑开发。

我的问题是如何使图像针对可变屏幕尺寸进行调整？我只需要将所有参数作为密度像素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:11:17.180

[您使用此处](http://developer.android.com/guide/topics/resources/providing-resources.html)找到的不同文件夹类型，例如`layout-sw720dp`，对于您将使用的 10 英寸屏幕，同样适用于您的图像所在的可绘制文件夹，使用`drawable-xhdpi`

# oracle - 获取模式中所有表的计数

> ID：10704808
> 
> 赞同：40
> 
> 时间：2012-05-22T15:09:04.620
> 
> 标签：oracle, plsql

我正在尝试获取架构中所有表的记录数。我在编写 PL/SQL 时遇到问题。这是我到目前为止所做的，但我遇到了错误。请提出任何更改：

```
DECLARE
v_owner varchar2(40);
v_table_name varchar2(40);

cursor get_tables is
select distinct table_name,user
from user_tables
where lower(user) = 'SCHEMA_NAME';

begin

open get_tables;
fetch get_tables into v_table_name,v_owner;

    INSERT INTO STATS_TABLE(TABLE_NAME,SCHEMA_NAME,RECORD_COUNT,CREATED)
    SELECT v_table_name,v_owner,COUNT(*),TO_DATE(SYSDATE,'DD-MON-YY') FROM         v_table_name;

CLOSE get_tables;

END; 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-22T15:24:24.150

这可以通过一条语句和一些 XML 魔法来完成：

```
select table_name, 
       to_number(extractvalue(xmltype(dbms_xmlgen.getxml('select count(*) c from '||owner||'.'||table_name)),'/ROWSET/ROW/C')) as count
from all_tables
where owner = 'FOOBAR' 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-22T15:22:24.620

这应该这样做：

```
declare
    v_count integer;
begin

    for r in (select table_name, owner from all_tables
              where owner = 'SCHEMA_NAME') 
    loop
        execute immediate 'select count(*) from ' || r.table_name 
            into v_count;
        INSERT INTO STATS_TABLE(TABLE_NAME,SCHEMA_NAME,RECORD_COUNT,CREATED)
        VALUES (r.table_name,r.owner,v_count,SYSDATE);
    end loop;

end; 
```

我从您的代码中删除了各种错误。

**注意：**为了其他读者的利益，Oracle 不提供名为 的表`STATS_TABLE`，您需要创建它。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-05-12T17:59:09.447

```
select owner, table_name, num_rows, sample_size, last_analyzed from all_tables; 
```

这是检索行数的最快方法，但有一些重要的警告：

1.  如果在 11g 及更高版本中使用`ESTIMATE_PERCENT => DBMS_STATS.AUTO_SAMPLE_SIZE`（默认）或在早期版本中使用`ESTIMATE_PERCENT => 100`. 有关AUTO_SAMPLE_SIZE 算法在 11g 中如何工作的说明，请参阅[这篇文章。](https://blogs.oracle.com/optimizer/entry/how_does_auto_sample_size)
2.  结果生成于`LAST_ANALYZED`，当前结果可能不同。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-30T09:43:16.377

如果您想要 Oracle 的简单 SQL（例如，没有 XmlGen 的 XE），请执行简单的 2 步：

```
select ('(SELECT ''' || table_name || ''' as Tablename,COUNT(*) FROM "' || table_name || '") UNION') from USER_TABLES; 
```

复制整个结果并将最后一个 UNION 替换为分号 (';')。然后作为第二步执行生成的 SQL。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-18T02:51:45.900

获取模式中所有表的计数并按 desc 排序

```
select 'with tmp(table_name, row_number) as (' from dual 
union all 
select 'select '''||table_name||''',count(*) from '||table_name||' union  ' from USER_TABLES 
union all
select 'select '''',0 from dual) select table_name,row_number from tmp order by row_number desc ;' from dual; 
```

复制整个结果并执行

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-22T15:38:21.680

您必须使用立即执行（动态 sql）。

```
DECLARE 
v_owner varchar2(40); 
v_table_name varchar2(40); 
cursor get_tables is 
select distinct table_name,user 
from user_tables 
where lower(user) = 'schema_name'; 
begin 
open get_tables; 
loop
    fetch get_tables into v_table_name,v_owner; 
    EXIT WHEN get_tables%NOTFOUND;
    execute immediate 'INSERT INTO STATS_TABLE(TABLE_NAME,SCHEMA_NAME,RECORD_COUNT,CREATED) 
    SELECT ''' || v_table_name || ''' , ''' || v_owner ||''',COUNT(*),TO_DATE(SYSDATE,''DD-MON-YY'')     FROM ' || v_table_name; 
end loop;
CLOSE get_tables; 
END; 
```

# php - 致命错误：无法在写入上下文中使用函数返回值

> ID：10704809
> 
> 赞同：-2
> 
> 时间：2012-05-22T15:09:14.600
> 
> 标签：php, mysql, syntax-error, fatal-error

我花了一些时间在 Internet 上搜索并使用我的代码，但我仍然无法弄清楚为什么我会收到此错误消息。这是我的代码的摘录：

```
 } else {
        if (!empty($errors) && nexus_error($nexus)==false) {
            $message = "There were" . count($errors) . " errors in the form.";
        } if (!empty($errors) && nexus_error($nexus)) {
            $message = "There were" . count($errors) . " errors in the form.";
            $message .= "A user with the username" . $nexus . " already exists in the database."; 
        } if (empty($errors) && nexus_error($nexus)) { //***this line causes the error
            $message = "A user with the username" . $nexus . " already exists in the database."; 
        }
    } 
```

顺便说一下，函数 nexus_error 定义如下：

```
function nexus_error($sel_nexus) {
    global $connection;
    $query = "SELECT * FROM person WHERE nexus={$sel_nexus}";
    $result_set = mysql_query($query, $connection);
    confirm_query($result_set);
    if (count(mysql_fetch_array($result_set)) != 0) {
        return true;    // bad
    } else {
        return false;  
    }
} 
```

任何帮助都会很棒。谢谢你的时间 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:12:17.620

```
if (count(mysql_fetch_array($result_set)) != 0) 
```

你不能`count()`一个函数返回的值。您应该先将其存储在变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:15:56.853

正如萨米所说，有问题的行是`if (count(mysql_fetch_array($result_set)) != 0) {`

计算返回的结果数量的正确方法是 `mysql_num_rows()`而不是计算，您的行可能只是这样：

```
if (mysql_num_rows($result_set) != 0) { 
```

此外，您的代码目前效率低下，因为如果它过滤到最后一条语句（即 2 个不必要的查询），`nexus_error($nexus)` *可以在同一个变量上调用 3 次，请考虑像这样进行重构：*`if`

```
$nexusError = nexus_error($nexus);
 } else {
    if (!empty($errors) && $nexusError ==false) {
        $message = "There were" . count($errors) . " errors in the form.";
    } if (!empty($errors) && $nexusError) {
        $message = "There were" . count($errors) . " errors in the form.";
        $message .= "A user with the username" . $nexus . " already exists in the database."; 
    } if (empty($errors) && $nexusError) { //***this line causes the error
        $message = "A user with the username" . $nexus . " already exists in the database."; 
    }
} 
```

# ios - 在应用程序包中包含大量图像时性能会受到影响

> ID：10704810
> 
> 赞同：2
> 
> 时间：2012-05-22T15:09:16.300
> 
> 标签：ios, xcode, performance, compilation

我正在制作一个包含大约 4000 张图像的应用程序。这需要很长时间来编译和运行，因为捆绑包中有太多图像。有什么方法可以让这更快，比如编译静态或动态库，或者其他什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:13:40.197

实际上需要这么长时间才能在运行之前在设备上安装一个如此大的应用程序。编译时间不应受到应用程序包中有多少资源的影响。真的没有办法解决它，除非你完全改变你的设计并将图像托管在远程服务器上，我猜这会破坏目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:52:35.517

在某些情况下，您可能会考虑如何以编程方式完成绘图。

您当然不希望二进制文件中的所有这些图像（好吧，如果它们每个只有几个像素，那将不是问题）。

您可能会考虑将 pngcrushed 图像的整体二进制文件作为数据读取——按需逐个图像，就像您处理图像文件一样。这将很少实施。当然，这不会显着帮助传输时间，但它可以减少 pngcrushing 和其他资源处理步骤所花费的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:14:19.410

一种解决方案是不使用应用程序构建图像。只需在没有任何媒体的情况下构建您的应用程序，然后首先从启动屏幕开始下载所有媒体。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:13:03.653

如何以及何时加载图像？我可能错了，但我认为编译到包中的文件数量不应该对加载时间产生太大影响。你在启动时加载它们吗？

# lync - 是否可以从网页打开新的 Lync 对话？

> ID：10704811
> 
> 赞同：5
> 
> 时间：2012-05-22T15:09:19.107
> 
> 标签：lync

我想在用户 Lync 客户端中打开一个新对话，其中包含预先确定的消息文本，但消息的收件人由用户选择，此过程从用户单击网站上的链接开始。

那可能吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T10:56:42.680

这里的部分问题是，如果不知道要与谁开始对话，您就无法打开对话窗口，如果这有意义的话。

从网页上，您可以执行各种不同的操作来与某人启动 IM，例如，Lync 有一个外壳扩展程序，因此您可以启动该过程`im:<sip:user@domain.com>`，它会打开一个与该用户的新对话窗口。但是，无法提供默认消息文本。

我假设，鉴于您假设 Lync 客户端可用，这是针对您可以控制的内部环境？如果是这种情况，如果您可以提前找到收件人的地址（参见第一句），那么您可以编写一个非常小的控制台应用程序，它将 SIP 地址作为参数，并开始一个新的对话，发送默认消息. 然后，您可以从您的网页调用它。您必须处理控制台应用程序等的部署，但它会让您到达您需要的地方。

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/hh378611.aspx)是开始对话的演练，尽管您不需要全部内容，因为您不需要处理接收消息。

# c# - 比较两个哈希集

> ID：10704812
> 
> 赞同：2
> 
> 时间：2012-05-22T15:09:23.943
> 
> 标签：c#

我有两个哈希集从两个不同的文本文件加载数据。两个文本文件的内容如下所示：

```
name/12441431252132
name1/323244231244142
name2/32423452524234 
```

我的代码当前加载这两个文件并确保我只有来自 textFile2 的唯一结果：

```
HashSet<string> txt1 = new HashSet<string>(File.ReadLines("textFile1.txt"));
HashSet<string> txt2 = new HashSet<string>(File.ReadLines("textFile2.txt"));

txt2.ExceptWith(txt1); 
```

我的问题是，如果整行匹配，它只会根据标准删除行。我想根据名称删除它。例如，如果 name2 在 textFile1 中，则永远不应包含它，即使 / 之后的 id 不同。

我将如何做到这一点？

如果我的解释不好，请告诉我，我会努力改进它 - 请原谅我的英语！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:15:43.767

您可以添加一些字符串拆分来分隔名称和其余内容 - 该方法有点“肮脏”，因此在实际代码中我可能会使用 foreach 循环并引入专用类：

```
var content = File.ReadLines("textFile1.txt").Select(line => 
{
    var parts = line.Split('/');
    return new 
    { 
        Name = parts[0],
        Content = parts[1]
    };
});

HashSet<string> names = new HashSet<string>(content.Select(c=> c.Name));
HashSet<string> txt2 = new HashSet<string>(File.ReadLines("textFile2.txt"));
var uniques = txt2.Where(line => !names.Contains(line.Split('/')[0])); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:20:10.503

如果按 拆分`/`，则可以构建一个包含出现在第一个集合中的名称的 HashSet，然后选择第二个集合中名称未出现在第一个集合中的项目。

```
var nameValues1=
    File
     .ReadLines(fileName)
     .Select(line=>line.Split('/'))
     .Select(parts=>new {name=parts[0],value=parts[1]});
var nameValues2=
    File
     .ReadLines(fileName2)
     .Select(line=>line.Split('/'))
     .Select(parts=>new {name=parts[0],value=parts[1]});
var names1=new HashSet<string>(nameValues1.Select(nv=>nv.name);
var result=
    nameValues2
     .Where(nv=>!names1.Contains(nv.name))
     .Select(nv=>string.Format("{0}/{1}",nv.name,nv.value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:30:01.973

您确定 a`HashSet`仍然是最佳选择吗？这是使用 a 的不同方法`Dictionary<String, String>`：

```
var lines1 = System.IO.File.ReadLines(path1);
var lines2 = System.IO.File.ReadLines(path2);
var allItems = new Dictionary<String, String>();
foreach (var line in lines1.Concat(lines2))
{
    String[] tokens = line.Split('/');
    if (tokens.Length == 2)
    {
        String name = tokens[0];
        String number = tokens[1];
        if (!allItems.ContainsKey(name))
            allItems.Add(name, number);
    }
} 
```

# objective-c - 使用 RestKit 下载和保存大文件

> ID：10704814
> 
> 赞同：0
> 
> 时间：2012-05-22T15:09:29.437
> 
> 标签：objective-c, file, download, save, restkit

我正在使用 RestKit 在我的应用程序中下载多个文件。只要文件不是太大，一切都像魅力一样。不幸的是，我尝试下载一个大视频文件（大约 230 MB）并得到一个`memory warning`应用程序崩溃。

我从以下行开始下载

```
[[RKClient sharedClient] get:[NSString stringWithFormat:@"/%@", listItem.filename] delegate:self]; 
```

在委托方法中，我将其本地保存在`appDirectory/Library/Caches/`

```
- (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response
{
    NSURL * url = [NSURL fileURLWithPath:[cacheDirectory stringByAppendingPathComponent:response.URL.lastPathComponent]];

    [[response body] writeToURL:url atomically:YES];
} 
```

我检查了 Instruments 中的应用程序是否存在内存泄漏，并看到它在出现`Live Bytes`之前一直在`*Overall Allocations*`上升。虽然没有泄漏。`Low Memory Alerts``100 MB`

删除负责保存文件的行 ( `[[response body] writeToURL:url atomically:YES];`) 并没有改变任何东西，所以我猜问题出在 RestKit 的某个地方。

在研究时，我偶然发现了一种允许直接下载文件的[方法，`ASIHTTPRequest`](http://allseeing-i.com/ASIHTTPRequest/How-to-use#downloading_the_response_directly_to_a_file)并认为类似的方法可以解决问题，但不确定。

**RestKit 中是否有可能直接下载我错过的？**

或者

**有没有更好的方法来使用我应该知道的 RestKit 下载文件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T15:31:14.983

我遇到了同样的问题，不幸的是，除了修改本地 RestKit 副本之外，我认为没有其他办法。问题出在`- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data`，正好在`[_body appendData:data];`。如您所见，RestKit 将响应的主体保存在内存中，并在从服务器发送字节时附加字节。这就是您收到内存不足警告的原因。我的解决方案是向 RKRequest 添加一个属性并将数据直接写入文件系统，具体取决于请求是否为大文件请求：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
if ([_request dontKeepBytesInMemory]) {
    if ([[_request delegate] respondsToSelector:@selector(request:didReceivedData:totalBytesExectedToReceive:)]) {
        [[_request delegate] request:_request didReceivedData:data totalBytesExectedToReceive:_httpURLResponse.expectedContentLength];
    }
} else {
    [_body appendData:data];
    if ([[_request delegate] respondsToSelector:@selector(request:didReceivedData:totalBytesReceived:totalBytesExectedToReceive:)]) {
        [[_request delegate] request:_request didReceivedData:[data length] totalBytesReceived:[_body length] totalBytesExectedToReceive:_httpURLResponse.expectedContentLength];
    }
} 
```

}

我还需要在协议中添加额外的 RKRequest 委托方法，这样我就可以单独处理大响应。原始委托方法定义了`totalBytesReceived`简单的`[_body length]`.，但如果您直接将字节写入文件系统，您只需检查当前文件大小以跟踪下载状态。如果您正在寻找一种将字节直接保存到文件系统的好方法，请查看 NSFileHandle 类 - 它支持文件偏移量，因此您可以将任何 NSData 扔给它，它会自动为您附加它。

# java - Runnable 的实现是否应该允许在同一实例上并发调用 run()？

> ID：10704815
> 
> 赞同：1
> 
> 时间：2012-05-22T15:09:30.203
> 
> 标签：java, multithreading, concurrency, software-design, runnable

如果*我*`java.lang.Runnable`有一个`run`实现. 例子：*`Runnable`*

 *```
Runnable r = new MyRunnable();

//start thread 1
new Thread(r).start();

//start thread 2
new Thread(r).start(); 
```

如果`run`方法完全“自包含”（即不依赖任何私有实例成员），这并不是真正的问题，因为线程之间没有共享变量，因此您`Runnable`永远不会得到“损坏”的内部状态。但我认为在大多数情况下，您`Runnable` *将*有一些私有实例成员在其中进行操作`run`，那么该怎么办？

举个例子，我的`MyRunnable`班级有一个私有`mode`字段。主要目的是彻底停止该`run`方法（通过设置`mode`为`STOPPED`），但它也有其他用途。

```
public static class MyRunnable implements Runnable
{
    enum Mode { RUNNING, PAUSED, STOPPED, FASTFORWARDING, REWINDING; }

    private volatile Mode mode;

    @Override
    public void run() 
    {
        mode = Mode.RUNNING;
        while (mode != Mode.STOPPED)
        {
            //do stuff. possibly other changes to the mode.
        }
    }

    public void setMode(Mode mode)
    {
        this.mode = mode;
    }

    public Mode getMode()
    {
        return mode;
    }
} 
```

如您所见，如果我为*同一个*实例并发执行多个线程`MyRunnable`（如前所示），对 的任何更改都`mode`可能以不同的方式影响并发运行的线程。例如，如果一个线程将 设置`mode`为`STOPPED`，则另一个线程可能会`mode`在每个其他线程看到它被设置为 之前将其更改为其他值`STOPPED`。这可以很容易地阻止线程退出 while 循环。

**那么我如何设计一个`Runnable`“同时可用”的？**甚至可能吗？不值得吗？我可以使用C# 的[ThreadStatic](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx)属性（我认为在这种情况下会很完美）吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T15:14:12.017

`MyRunnable`在这种情况下构造您的多个实例而不是保护它们免受多次使用更为常见：

```
//start thread 1
new Thread(new MyRunnable()).start();
//start thread 2
new Thread(new MyRunnable()).start(); 
```

让多个线程工作的全部目的是实现良好的并行计算。如果线程需要锁定公共资源（如工作队列等），那么很好，但编写你`Runnable`的 s 以使它们“同时可用”不应该作为理所当然的事情 - 应该有充分的理由这样做。

> 甚至可能吗？

当然这是可能的。线程之间一直共享资源。但是，在您使用`Mode mode`变量的情况下，这应该通过您的`Runnable`类的多个实例来完成。

如果多个线程正在调用公共代码，您可能会考虑使用一种模式`ThreadLocal`来存储每个线程的信息。但是将字段存储在您的多个实例中`MyRunnable`将比将一个`MyRunnable`实例`mode`存储在`ThreadLocal`.

> 不值得吗？

如果按照原则去做，那肯定是*不*值得的。同样，分叉线程的全部意义在于让它们与其他线程尽可能分开以利用多个处理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T15:20:16.323

与您将任何其他方法或类设计为线程安全的方式相同。Runnable 在本质上没有什么不同。

C# ThreadStatic 等效于[ThreadLocalVariable](http://java.dzone.com/articles/java-thread-local-%E2%80%93-how-use)，但是这是否是适当的解决方案是任何人的猜测，因为我们无法知道您希望您的班级遵循什么行为。

如果您想有效地让每个线程运行都有一个独立的 Runnable 执行（关于状态），那么拥有不同的实例会更有意义（并且更简单）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:13:59.167

一般来说，这是不值得的。

无论如何，创建您的新实例的成本`Runnable`不能太高。如果是这样，您必须查看如何排除初始化成本高昂的部分并确保它们是线程安全的。

当然，您也可以使用[`ThreadLocal`](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)变量，这总体上非常有用，但在这种情况下可能不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T15:21:16.600

好吧，我不能说我对 Java 中的 MP 有很多经验，所以我不会尝试谈论常见用法，但是在阅读了[Runnable](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runnable.html)和[Thread](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html)文档之后，听起来 Runnable 的目的正是它的名字暗示：一个可运行的对象。具体来说，文档提到在您不希望实现 Thread 但需要类似概念的情况下使用 Runnable。我实际上认为这使得 Runnable 非常适合封装并行或并发算法的类。当然，没有什么暗示您不应该或不能专门设计 Runnable 以实现并发性。当然，这本身（取决于任务）远不止一个 SO 问题可以解决的问题。

编辑：我应该澄清一下，我提到在 Runnable 中封装并行或并发算法，但我的意思是在 Runnable 中封装任务也可能有意义，然后让调用者确定是否为该任务分配并行资源例如，通过在并发线程中调用它。我的意思是，正如文档所暗示的那样，如果您可以想象一个正在运行的对象（在任何情况下），那么 Runnable 可能是一个不错的选择！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-22T15:24:20.217

我认为 OP 的问题是在某些情况下，当 Runnable 资源繁重时，有没有办法避免重新创建这些 Runnable？

我的经验是，您始终可以创建轻量级 Runnables 来引用重量级资源（例如巨大的数组等）。避免在多个线程上调用相同的 Runnable，但在我看来，为每个线程创建不同的 Runnable 是一种更好的做法。*

# ios - 对于Notification Push，Real iPhone设备在App首次加载时不显示Approval Alert

> ID：10704816
> 
> 赞同：0
> 
> 时间：2012-05-22T15:09:34.717
> 
> 标签：ios, push-notification

我是iOS开发的新手。

我有一个喜欢接收通知推送的应用程序，我生成了证书，将我的 iPhone 注册为设备，创建了一个应用程序 ID，并生成了配置文件。到目前为止，我可以在我的 iPhone（iOS 5.0.1，我的 iPhone 是 JeailBreaked）中构建/调试。然后在我的 AppDelegate didFinishLaunchingWithOptions 中，添加以下代码：

[[UIApplication sharedApplication] registerForRemoteNotificationTypes: UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeSound];

有了这段代码，我希望当应用程序第一次加载时，它可以弹出一个警报来促进 Approve/DisApprove 接收通知推送。但是什么都没有弹出。

我不太确定配置文件。可能我需要做点什么吗？还是我错过了什么？

谢谢大家，

本鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:25:39.633

您是否正在使用团队配置文件？通知不适用于这些，您必须将其设置为该应用标识符的特定配置文件。检查委托方法

```
– application:didFailToRegisterForRemoteNotificationsWithError: 
```

[此处](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIApplicationDelegate_Protocol/Reference/Reference.html)描述了有关它为什么不起作用的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:15:13.600

我已经解决了。我需要创建一个新的配置文件。并从 xCode Orginazer 中删除旧的，并导入新的。

# asp.net - (ASP.Net) google oauth2 在哈希后返回令牌而不是在查询字符串中

> ID：10704817
> 
> 赞同：3
> 
> 时间：2012-05-22T15:09:36.233
> 
> 标签：asp.net, oauth, google-api

我有一个项目需要 ASP.Net 应用程序才能使用谷歌凭据，因此授权在 oauth 2.0 中。

我已经形成了对谷歌 API 授权的有效请求，但响应（以及带有它的令牌）在哈希字符“#”之后返回。有点像：

[示例 http 链接：] myredirecturi.com/oauthcallback#token=thetokenvalue...

我所期待的是它是查询字符串的格式，即在问号“？”之后：

[示例 http 链接：] myredirecturi.com/oauthcallback?token=thetokenvalue...

我遇到问题的原因是我无法在服务器端 ASP.net 中引用令牌。

要调用这个请求，基本上我正在做的是对 google 的 url 执行 Response.redirect，但似乎我认为我需要对它的客户端响应。

所以，我的问题是，如何让谷歌在查询字符串中做出响应？

如果有帮助，这就是我大部分工作的基础：[https ://developers.google.com/accounts/docs/OAuth2Login](https://developers.google.com/accounts/docs/OAuth2Login)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T15:14:52.797

在您的身份验证请求 URL 中，您是否在设置`response_type=token`？这将导致服务器在片段中返回访问令牌。这是此处描述的客户端流程：[https ://developers.google.com/accounts/docs/OAuth2UserAgent](https://developers.google.com/accounts/docs/OAuth2UserAgent)

如果您在 Web 服务器中执行 OAuth（听起来确实如此），您应该使用此处描述的 Web 服务器流程：[https](https://developers.google.com/accounts/docs/OAuth2WebServer) ://developers.google.com/accounts/docs/OAuth2WebServer - 您指定`response_type=code`哪个将生成一个授权代码，您可以在后续请求中交换刷新令牌和访问令牌。

# javascript - 如何使用 jQuery 创建动画加载栏？

> ID：10704826
> 
> 赞同：0
> 
> 时间：2012-05-22T15:10:22.617
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [Jquery::Ajax 驱动的进度条？](https://stackoverflow.com/questions/4503658/jquery-ajax-powered-progress-bar)

我需要创建某种倒计时

**请求在 Html**

```
count = Math.floor((futureDate-today)/1000);

if(count > 0) //move Loading bar by percent 
```

我怎样才能拥有与电池动画相同的代码加载栏？

[就像这个演示一样](http://showcase.webdesignpla.net/supercharged/) *，这是我用来递减计数器的[演示代码：](http://jsfiddle.net/NfLAB/1/)*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:29:20.710

您还需要一个开始日期才能获得电池百分比。检查这个小提琴：http: [//jsfiddle.net/uhGjz/](http://jsfiddle.net/uhGjz/)

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>MyBattery</title>
  <style type='text/css'>
#bat {
    width:100px;
    height: 30px;
    border: 1px solid;
    position: relative;
}
#fill {
    height: 100%;
    background-color: red;
    width: 0%;
}
  </style>
  <script type='text/javascript' src='http://code.jquery.com/jquery-1.7.1.js'></script>
  <script type='text/javascript'>
$(function(){
var now = new Date();
var today = now.getTime();
var pastDate = Date.parse("Tue, 1 Jan 2012 00:00:00 GMT");
var futureDate = Date.parse("Tue, 1 Aug 2012 00:00:00 GMT");
var count = Math.floor((today-pastDate)/(futureDate-pastDate)*100);

if(count > 0) { //move Loading bar by percent 
    $('#fill').animate({
       width: count+"%"
    }, 1000);
}

}); 
</script>
</head>
<body>
  <div id="bat"><div id="fill"></div></div>
  <!-- Your own content! -->
</body>
</html> 
```

# php - 从 zend 调用 db2 存储过程

> ID：10704829
> 
> 赞同：2
> 
> 时间：2012-05-22T15:10:26.263
> 
> 标签：php, zend-framework, stored-procedures, db2, zend-db

我最近开始使用 db2 的存储过程（一天前），我设法创建了非常简单的 SP，当我在 iAccess Navigator 中对其进行测试时，它运行良好。现在我试图从我的模型中调用 SP，但我得到了错误，我不确定如何获取返回变量。这是一些代码

这是我的SP

```
drop procedure schema.test_ac ;
CREATE PROCEDURE schema.test_ac (IN a int, in b int, out c int)
LANGUAGE SQL
BEGIN
    set c=b+a;
END; 
```

这是php代码

```
public function storePro(){
    $queryStr = "call test_ac (1,1,?)";

        $stmt = $this->db->query($queryStr);
        print_r($stmt->fetchAll());
} 
```

任何帮助都会很好谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:12:47.877

Zend_Db 在处理 DB2 存储过程时可能会出现问题。我会尝试在 ZF 2.0 中解决这个问题。但是，今天您可以使用基本的 ibm_db2 驱动程序函数成功运行您的示例。我在 v7.1 IBM i 系统上对此进行了测试：

```
// get actual db2 resource from ZF object
$dbConn = $this->db->getConnection();

if (!$dbConn) {
    die("could not get connection");
}

$queryStr = "call test_ac (?, ?, ?)";

$stmt = db2_prepare($dbConn, $queryStr);

if (!$stmt) {
    die ("Could not prepare statement. " . db2_stmt_error());
}

// set values to be bound. All three variables must be created.
$in1 = 1;
$in2 = 2;
$out1 = 0; // irrelevant but must provide

db2_bind_param($stmt, 1, "in1", DB2_PARAM_IN);
db2_bind_param($stmt, 2, "in2", DB2_PARAM_IN);
db2_bind_param($stmt, 3, "out1", DB2_PARAM_OUT);

$result = db2_execute($stmt);

if ($result) {
    // success!
    echo "value of output var: $out1";

} else {

    die("Execute failed: " . db2_stmt_error($stmt));
} 
```

# tomcat - Tomcat 和多个域/应用程序

> ID：10704833
> 
> 赞同：47
> 
> 时间：2012-05-22T15:11:02.457
> 
> 标签：tomcat

目前我在端口 80 上运行单个 WAR 应用程序的单个 tomcat。域名*www.foo.org*指向此服务器 ip。

在端口 80 上为不同的客户端添加*www.bar.org域的过程是什么？*

谢谢

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-12-13T21:46:50.123

从一开始，您的*conf/server.xml*中有一个“主机”记录`localhost`

```
<Host name="localhost"  appBase="webapps" unpackWARs="true" autoDeploy="true">
      <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
               prefix="localhost_access_log." suffix=".txt"
               pattern="%h %l %u %t &quot;%r&quot; %s %b" />
</Host> 
```

现在您可以添加另一个“主机”记录，例如

```
 <Host name="anotherclient.com"  appBase="anotherclient" unpackWARs="true" autoDeploy="true">

       <Valve className="org.apache.catalina.valves.AccessLogValve" directory="logs"
           prefix="anotherclient_access_log." suffix=".txt"
           pattern="%h %l %u %t &quot;%r&quot; %s %b" />
  </Host> 
```

`name="anotherclient.com"`新客户端的域在哪里，并且`appBase="anotherclient"`是它的 Web 应用程序根目录名称（您部署战争的位置）；它是相对于 tomcat 主目录的。

重新启动 tomcat 后将接受更改。

前往任何其他域（未在 中列出`server.xml`）但指向您服务器的 IP 地址的请求将被传递给默认应用程序，它在`Engine`元素中指定

```
<Engine name="Catalina" defaultHost="localhost"> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T15:45:38.547

在其默认配置中，Tomcat 接受对任何主机名的请求并将它们全部发送到 conf/server.xml 中定义的“localhost”<Host>。如果您没有更改它，那么您所要做的就是确保为两个主机名都设置了 DNS 记录以指向您的服务器。

如果您想为每个主机名设置一组不同的 webapp，那么您必须在 conf/server.xml 中定义第二个 <Host> 并为其使用适当的主机名。（请注意，您将始终必须拥有一个“默认”主机，所有请求都不匹配任何明确定义的主机）。

您可以在此处阅读 <Host> 的文档：http: [//tomcat.apache.org/tomcat-7.0-doc/config/host.html](http://tomcat.apache.org/tomcat-7.0-doc/config/host.html)（适用于 Tomcat 7.0.x。您没有提及您的版本，所以我给了您是最新版本文档的链接）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-22T15:26:13.953

通常你有一个不同于 80 的端口（比如 8080 或 7001 或任何你想要的）上的 tomcat（或其他应用程序服务器）。之后，您在端口 80 上放置一个 Web 服务器（如 apache http 服务器）并配置一个或多个连接器以指向具有不同地址的不同应用程序服务器上的不同端口。

对于 Apache http + tomcat，您可以查看此链接：

[http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)

# arduino - Arduino - 无法刻录草图

> ID：10704836
> 
> 赞同：4
> 
> 时间：2012-05-22T15:11:10.193
> 
> 标签：arduino

我是 Arduino 世界的新手。当我尝试在 Arduino IDE 中上传草图时发现一个奇怪的问题。它给了我以下错误：

```
avrdude: initialization failed, rc=-1
         Double check connections and try again, or use -F to override
         this check.

avrdude: stk500v2_command(): unknown status 0x01
avrdude: stk500v2_disable(): failed to leave programming mode 
```

我在 Duemilanove 和 Mega 2560 中都遇到了这个错误。

但是，当我使用编程器烧录引导加载程序，然后尝试上传草图时，它第一次工作。如果我尝试再次上传相同的草图，则会引发上述错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:56:23.493

我会尝试重新安装 arduino IDE，因为它可能已损坏或过时。检查您是否在菜单上选择了正确的型号和串行端口。也可以访问 arduino 的网站 ( [arduino.cc](http://arduino.cc) )，应该有一个联系链接。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T01:28:17.197

我记得我有这个问题。所以基本上它是说Arduino没有连接（即使它在物理上可能是连接的）。基本上确保计算机能看到 Arduino，因此请确保您的 COM 端口检测到 Arduino 并正确安装驱动程序。对我来说，它被插入 USB 端口，但它首先通过 USB 集线器（所以基本上是 Arduino -> USB 集线器 -> 计算机）。我解决它的方法是将 Arduino 直接插入计算机，使其进入 Arduino -> 计算机。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T07:53:01.657

我能够通过更改保险丝设置来解决问题。更改保险丝设置后，我现在可以多次烧写草图。

# javascript - 使用 || 运营商通知

> ID：10704849
> 
> 赞同：6
> 
> 时间：2012-05-22T15:12:04.623
> 
> 标签：javascript, netbeans, use-strict

Javascript代码：

```
var a = (b) ? b : 40; 
```

它正在工作，只是 NetBeans 说：“使用 || 运算符（列 [? 所在的位置]）”。我没有找到任何解释。

它是什么？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T15:13:54.097

如果您只是测试真实性，`b`那么您可以这样做：

```
var a = b || 40; 
```

…它更短并且（可以说）更明显。在 JavaScript 中，`||`是一个短路运算符。如果为真则返回左侧，否则返回右侧。（即它不返回布尔值，除非输入是布尔值）。

如果您想查看是否`b`实际定义，那么您最好使用：

```
var a = (typeof b !== "undefined") ? b : 40; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-22T15:14:15.027

管道是`or`声明。`var a = b || 40`表示如果 b 是非假值，则令 a=b，否则为 40。

# php - 如何使用图像卷积函数创建强烈的模糊

> ID：10704852
> 
> 赞同：3
> 
> 时间：2012-05-22T15:12:20.637
> 
> 标签：php, image, filter, blur, convolution

我正在尝试使用 PHP 函数图像卷积创建一个非常模糊的图像。该图像用作滑块中图像后面的背景。

我试过使用图像过滤器，但高斯模糊和选择性模糊非常轻，你不能改变模糊。

这是我目前用来创建模糊的代码，但它并没有真正模糊图像。

```
 $matrix = array( array(5, 5, 5), array(0, 0, 0), array(5, 5, 5));
    for($i = 1; $i<=20; $i++) {
        imageconvolution($image, $matrix, 30, 0);
     } 
```

我需要一个更好的矩阵数组公式来创建更强的模糊。

# solr - 新的 Solr 核心数据

> ID：10704854
> 
> 赞同：0
> 
> 时间：2012-05-22T15:12:24.313
> 
> 标签：solr

我有一个现有的 solr 核心，其中包含有关石油信息的数据。它运行良好。

今天早上，我在同一个容器中创建了一个新的 solr 核心，该容器与关于水的信息有关。

两个核心现在都运行良好，它们各自的模式文件、配置文件等。但是，当我在 Firefox 中转到新创建的石油核心时，水数据不知何故已经在其中。就像两个内核共享相同的 %SOLR_HOME%/data。

在 Solr 中，当我创建一个新核心时，我如何确保它不会与另一个现有核心共享数据？我基本上想做与此相反的[事情](https://stackoverflow.com/questions/2502393/how-do-i-create-a-solr-core-with-the-data-from-an-existing-one)。

**编辑**我创建水核心的方式是复制石油核心并重命名目录以及重命名模式文件以及复制石油战争并将其重命名为水，以便Tomcat可以为水构建一个新的网络目录。不确定这是否有任何限制，但以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:29:52.960

因为您复制了整个石油核心目录，包括数据/索引目录（如果您遵循默认文件夹命名约定）。该索引文件夹包含来自油芯的所有数据。因此，在这种情况下，如果您复制一个核心以重用作为另一个核心的起点，我建议您在复制后删除新核心数据目录中的所有文件夹。这将保留所有其他设置，但清除数据，因为索引（和其他文件夹）将在核心启动时创建。

# linux - 如何在 Linux 中创建历史甘特图？

> ID：10704856
> 
> 赞同：5
> 
> 时间：2012-05-22T15:12:33.443
> 
> 标签：linux, charts, tex, gantt-chart

我需要创建一个日期为 19 世纪的甘特时间线。任何人都可以推荐一个可以处理这个问题的程序吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T21:39:00.610

由于您使用[tex](/questions/tagged/tex "显示标记为“tex”的问题")[`gantt.sty`](http://www.martin-kumm.de/tex/gantt.sty)对其进行了标记，因此这是此页面中使用的一种方法： [A LaTeX package for drawing gantt plots using `pgf`/`tikz`](http://www.martin-kumm.de/tex_gantt_package.php)。

![在此处输入图像描述](../Images/c7a38acf97b050f9c797e095f092e559.png)

```
\documentclass{article}

\usepackage{gantt}
\usepackage{pdflscape}

\begin{document}
  \begin{landscape}
  \scalebox{0.8}{
  \begin{gantt}[xunitlength=0.5cm,fontsize=\small,titlefontsize=\small,drawledgerline=true]{10}{48}
    \begin{ganttitle}
      \titleelement{2009}{7}
      \numtitle{2010}{1}{2012}{12}
      \titleelement{2013}{5}
    \end{ganttitle}
    \begin{ganttitle}
      \numtitle{6}{1}{12}{1}
      \numtitle{1}{1}{12}{1}
      \numtitle{1}{1}{12}{1}
      \numtitle{1}{1}{12}{1}
      \numtitle{1}{1}{5}{1}
    \end{ganttitle}
    \ganttbar{task 1}{2}{17}
    \ganttgroup{a group of tasks}{6}{18}
    \ganttbar{task 2}{5}{10}
    \ganttbar[pattern=crosshatch,color=blue]{task 3}{15}{3}
    \ganttbar{task 4}{20}{3}
    \ganttcon{15}{4}{20}{6}
    \ganttbar{task 5}{15}{5}
    \ganttbarcon[color=red]{task 6}{20}{5}
    \ganttbarcon{task 7}{30}{5}
  \end{gantt}
  }
  \end{landscape}
\end{document} 
```

类似的方法[`pstricks`](http://ctan.org/pkg/pstricks)由 提供[`pst-gantt`](http://www.ctan.org/pkg/pst-gantt)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T11:20:59.317

![在此处输入图像描述](../Images/b52586ca98c21677f12c02829205931b.png) **甘特图**

我很久以前一直在使用 GanttChart，它非常适合简单的项目调度（如果这是你想要的）。它仍然处于活动状态并得到维护。它基于 Java，也可以在 Linux 上运行。

项目网页为：[GanttProject.biz](http://www.ganttproject.biz/)

以及最新版本的下载页面[（截至撰写时为 2.5.2）](https://code.google.com/p/ganttproject/downloads/list?can=2&q=label:Praha%20label:release&colspec=Filename%20Summary%20Uploaded%20ReleaseDate%20Size%20DownloadCount)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-22T15:18:01.953

Openproj can help you. But depends what you want, it doesn't work because it's prepared for Windows. Another simple program that you can use is called "Planner". That it's just for Linux.

# java - 如何在 NetBeans 7.1.1 中为日志消息创建代码模板

> ID：10704857
> 
> 赞同：0
> 
> 时间：2012-05-22T15:12:39.113
> 
> 标签：java, templates, netbeans

如何在 NetBeans 7.1.1 中为此创建代码模板：

```
public static void someMethodName(String arg1, Integer arg2) {
    LOG.debug("someMethodName{}, {}", new Object[]{arg1, arg2});
...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:22:54.213

像下面这样的东西应该可以工作:)

```
public static ${ret default="void"} ${mname default="someMethodName"}(${Type1 default="String"} ${var1 default="arg1"}, ${Type2 default="Integer"} ${var2 default="arg2"}) {
    LOG.debug("${mname}{}, {}", new Object[] {${var1}, ${var2}});
    ${cursor}
} 
```

但是您可能希望能够指定参数的数量。不幸的是，如下所示：

```
public static ${ret default="void"} ${mname default="someMethodName"}(${args default=""}) {
    LOG.debug("${mname}{}, {}", new Object[] {${args}});
    ${cursor}
} 
```

不起作用，因为它还会在 LOG 行中包含类型名称：

```
public static void someMethodName(String arg1, int arg2) {
    LOG.debug("someMethodName{}, {}", new Object[]{String arg1, int arg2});

} 
```

我想到的一个解决方法是使用第一个解决方案并为不同数量的方法参数（例如 Psm1、Psm2、...）提供不同的代码模板。

# dataset - 常用词构建基本句子的数据集

> ID：10704858
> 
> 赞同：0
> 
> 时间：2012-05-22T15:12:41.967
> 
> 标签：dataset, nlp, linguistics

所以我正在制作一个“冰箱磁铁”互动，我试图找出一个有效的数据集，让用户可以拖动单词。

我正在使用这个数据集.. 但它不是那么好

[http://en.wikipedia.org/wiki/Most_common_words_in_English](http://en.wikipedia.org/wiki/Most_common_words_in_English)

以及在哪里可以找到一组更有效的单词的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T18:08:45.920

您可以自己执行此操作的一种方法是下载文本语料库，然后运行一个脚本来计算出现的每个单词的数量。然后选择一些值*N*并将每个计数除以*N*（向下舍入）。对于每个单词，为每个除数做一个磁铁。您应该根据最后想要多少磁铁来选择*N。*

这样做的好处是磁铁的分布与单词的分布相匹配。例如，如果“the”出现 1000 次，“man”出现 320 次，“walks”出现 150 次，“skips”出现 2 次，你选择*N*为 100，那么你最终将制作 10 个“the”磁铁， 3个“人”，1个“走路”，0个“跳过”。

您可能还想采用计数的对数来尝试减少偏斜。由于单词分布是[Zipfian](http://en.wikipedia.org/wiki/Zipfian_distribution)，因此您最终可能会为每个“行走”获得数千个“the”磁铁）。

最后，这种方法的好处是您可以在特定域上运行它来为该域创建一个单词磁铁集。例如，如果您想制作听起来像新闻故事的单词磁铁，那么在新闻故事语料库上运行它。如果您想制作听起来像童话故事的文字磁铁，那么请在童话语料库上运行它。

如果你真的想变得花哨，你可以使用[TF-IDF](http://en.wikipedia.org/wiki/Tf%2aidf)之类的东西来挑选最能代表该领域的词，然后将它们与常见的虚词混合。

# android - 在 MainActivity 中激活 SQLiteHandler

> ID：10704861
> 
> 赞同：1
> 
> 时间：2012-05-22T15:13:04.707
> 
> 标签：android, sqlite

我编写了一个 SqliteHandler 类来创建、更新和处理我的应用程序将使用的数据库的所有查询。我现在的问题是如何真正确保在 MainActivity 的 onCreate() 方法中正确调用 SQLiteHandler 并运行代码来创建/升级数据库。我已经按照[开发指南](http://developer.android.com/guide/topics/data/data-storage.html#db)`@Override`中的建议使用了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:19:35.403

根据[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)的文档：

> [...] 这个类负责打开数据库（如果存在），**如果不存在则创建它**，并根据需要进行升级。事务用于确保数据库始终处于合理状态。

您无需担心创建或更新自己。

使用 SQLiteOpenHelper 的子类时会自动完成。

第一次调用 getWritableDatabase 方法时，它将检查数据库是否存在并在需要时创建它。

# .net - C# 确保有效的枚举值 - 面向未来的方法

> ID：10704863
> 
> 赞同：8
> 
> 时间：2012-05-22T15:13:06.667
> 
> 标签：.net, c#-4.0, compiler-construction, enums

我正在使用基于枚举值的简单 switch 语句编写一些代码。我突然想到，在未来的某个时候，开发人员可能会添加一个新值，所以我包含了一个默认方法来在运行时捕获它并抛出异常。但是我意识到每次我输入这样的逻辑时我都应该这样做，而且我只会在运行时而不是编译时看到这样的问题。
我想知道是否可以添加一些代码来让编译器告诉开发人员在更新枚举值的情况下他们需要更新某些方法——而不仅仅是向枚举本身添加注释？

例如（下面的示例纯粹是理论上的；我从开发生命周期中选择了状态，以确保它是大多数人熟悉的东西）。

```
public enum DevelopmentStatusEnum
{
    Development
    //, QA //this may be added at some point in the future (or any other status could be)
    , SIT
    , UAT
    , Production
}

    public class Example
    {
        public void ExampleMethod(DevelopmentStatusEnum status)
        {
            switch (status)
            {
                case DevelopmentStatusEnum.Development: DoSomething(); break;
                case DevelopmentStatusEnum.SIT: DoSomething(); break;
                case DevelopmentStatusEnum.UAT: DoSomething(); break;
                case DevelopmentStatusEnum.Production: DoSomething(); break;
                default: throw new StupidProgrammerException(); //I'd like the compiler to ensure that this line never runs, even if a programmer edits the values available to the enum, alerting the program to add a new case statement for the new enum value
            }
        }
        public void DoSomething() { }
    }
    public class StupidProgrammerException: InvalidOperationException { } 
```

这有点学术，但我认为它有助于使我的应用程序健壮。以前有没有人尝试过这个/对如何实现这个有任何好主意？

提前致谢，

JB

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-01T15:04:29.573

在这种情况下，我会尽量不使用枚举，而是使用具有公共静态只读字段的类，这些字段是类的实例。例如，查看 .Net 框架对颜色的作用。有一个 Color 类，您可以使用 Color.Black、Color.Blue 等对象。它们不是常量，但提供几乎所有相同的好处。此外，它们还有其他常量没有的好处。请参阅 C# 版本 3 语言规范，其中也对此进行了一些讨论。

但这个想法是你没有案例陈述。您向每个“枚举”成员添加足够的其他属性，以便方法（DoSomething 或其他）可以正确处理它。当另一个开发人员想要添加另一个成员对象时，他需要提供所需的属性。我的例子：我需要一个“枚举”来表示用户可以在系统中执行的不同操作。需要检查这些操作的权限、记录等。我还需要父操作和子操作（重命名某些内容是编辑它的“一部分”等）、用于将操作分组在一起以进行过滤的抽象操作以及特殊操作“全部”和“无”（无未定义）。每个人还需要数据库中的 ID 和文本。如果有人发明了一种新型动作，我希望它仍然有效。

```
 public class Action
  {
    protected Action(bool Abstract, Action Parent, int ID, string Name, bool Undefined)
    { /* snip */ }
    protected Action(bool Abstract, Action Parent, int ID, string Name)
      : this(Abstract, Parent, ID, Name, false)
    { }
    //----------------------------------------------------------------------------------------
    public static readonly Action All = new Action(true, null, 0, "All");
    public static readonly Action None = new Action(false, All, 6, "(Undefined)", true);
    public static readonly Action Modifying = new Action(true, All, 1, "Modifying");
    public static readonly Action Creating = new Action(false, Modifying, 2, "Creating");
    public static readonly Action Deleting = new Action(false, Modifying, 3, "Deleting");
    public static readonly Action Editing = new Action(false, Modifying, 4, "Editing");
    public static readonly Action Exporting = new Action(false, All, 5, "Exporting");
    public static readonly Action Renaming = new Action(false, Editing, 7, "Renaming");
    /* snip */
    //----------------------------------------------------------------------------------------
    /* template for new entries:
    public static readonly Action  = new Action(false, All, , "");
    */
  } 
```

还有更多动作。并且在其他类中还有许多对动作进行操作的方法。只要每个操作都提供所需的信息，它们都会继续工作。添加操作的开发人员被迫提供信息。如果当前的属性不足以满足未来的某些“特殊”动作，那么以后必须添加更多属性。请注意，构造函数是受保护的，因此只有类本身可以创建操作。我在主构造函数中省略了很多代码，用于检查重复的 ID 和名称以及许多其他内容。您现在可以像这样使用它：

```
Log.LogAction(Action.Renaming); 
```

LogAction 方法中没有 case 语句。它使用动作的属性。

你的枚举是什么？

问候

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-03T10:08:21.380

我找到了一个使用普通枚举的“解决方案”。这是原始的，也许可以通过更好的设计来改进：

```
bool allCasesHandled;

switch (myEnumValue)
{
    case MyEnum.Value1:
        allCasesHandled = true;
        break;

    //default:
    //  allCasesHandled = true;
    //  break;
}
System.Diagnostics.Debug.WriteLine(allCasesHandled); 
```

如果您尝试编译它，您将收到错误“使用未分配的变量”。

维护起来有点麻烦，但对于简单的情况，它可能很有用，尤其是在意味着要失败的行上添加注释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T19:39:30.240

我可能错了，但我不认为编译器会提供这样的警告。您可以通过一些单元测试来捕获此类问题，这些单元测试使用所有可能的枚举值调用上述方法（为此使用[Enum.GetValues()](http://msdn.microsoft.com/en-us/library/system.enum.getvalues.aspx)）。每次，开发人员添加一个枚举成员并忘记修改所有 switch 语句，至少一个单元测试将失败并出现“StupidProgrammerException”（顺便说一句：我会抛出 ArgumentOutOfRangeException）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T15:59:33.260

我认为您可以为 StyleCop 编写规则并在 PostBuild 事件中运行它们，它们可以在 Build 窗口中输出警告。不久前我们开始尝试这样做，为忽略方法的返回值添加警告，但一直没有完成它。最后我研究了一下，你需要分析 IL，这并不总是很有趣。当然，我想这取决于你对乐趣的定义。

# c# - 为什么这段代码告诉我找不到类型或命名空间？

> ID：10704865
> 
> 赞同：0
> 
> 时间：2012-05-22T15:13:15.510
> 
> 标签：c#, reflection

给定以下代码：

```
var property = typeof(TEntity).GetProperty("Id");
var temp = (property.PropertyType)id; 
```

VS 在第二行加下划线“属性”并告诉我找不到类型或命名空间。为什么？我已经尝试过`using System.Reflection`在顶部使用和不使用并得到相同的结果。

我可以通过使用来解决它`Convert.ChangeType(id, property.PropertyType)`，但我很好奇 C# 规范如何使之前的代码无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:17:27.480

您正在尝试通过仅在执行时才知道的东西进行*投射。*C# 不能那样工作。强制转换的类型部分不是“计算为`Type`引用的表达式” - 它*是类型或类型参数的名称*。

目前尚不清楚您要在这里实现什么，但是您将无法通过这样的铸造来做到这一点。你期望的编译时类型`temp`是什么？您是否知道这`var`只是编译时类型推断，而不是动态类型？

如果您可以向我们提供有关您想要实现的目标的更多信息，我们可能会为您提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:17:35.353

它需要括号之间的类型（不是类型变量`System.Type`而是实际类型），但这种类型 ( `property.PropertyType`) 不存在。为了证明这一点，将此添加到您的代码中：

```
public class property
{
    public class PropertyType
    {

    }
} 
```

现在，编译器会满意，但这可能不是您想要做的。

# c# - MVC 减少重复代码

> ID：10704866
> 
> 赞同：8
> 
> 时间：2012-05-22T15:13:27.577
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, reflection, razor

我刚刚开始使用并爱上了 MVC 设计模式。

我对它唯一的不满是它似乎产生了很多重复的代码。例如。

我在一个项目中有一个标准的 MVC 应用程序和我的数据库（模型），在另一个项目中与我的控制器/视图/视图模型分开，在另一个项目中又与我的测试方法分开。一切都很好。

模型：现在，我的数据库项目中有一堆不错的 EF4 类，我必须在我的实际项目中使用 ViewModels 来访问我的数据。这里没问题。

控制器：但是，我拥有的每个控制器基本上都在做同样的事情。它从 ViewModel 获取和设置数据，因此虽然每个控制器都不同，因为它只获取不同的数据，但它们本质上都以相同的方式完成相同的工作。（我目前有 9 个，但这很容易爆炸到超过 50 个）。

例如：

```
public class Dummy1Controller : Controller
{
    private MyProj.Data.Entities _entities = new Data.Entities();
    private MyProj.Data.Entities2 _coreEntities = new Data.Entities2();

    //GET: /Customers/
    public ActionResult Index()
    {
        if (_entities.table1.Count() == 0) return View();

        var pastObj = _entities.table1.First();
        return View(new Table1ViewModel()
        {
            Id = pastObj.Id,
            FirstName = pastObj.FirstName,
            LastName = pastObj.LastName,
            .
            .
            .
            .
        });
    }
}

public class Dummy2Controller : Controller
{
    private MyProj.Data.Entities _entities = new Data.Entities();
    private MyProj.Data.Entities2 _coreEntities = new Data.Entities2();

    //GET: /Vehicles/
    public ActionResult Index()
    {
        if (_entities.table2.Count() == 0) return View();

        var pastObj = _entities.table2.First();
        return View(new Table1ViewModel()
        {
            RegNo = pastObj.RegNo,
            Make = pastObj.Make,
            Model = pastObj.Model,
            .
            .
            .
            .
        });
    }
}

public class Dummy3Controller : Controller
{
    private MyProj.Data.Entities _entities = new Data.Entities();
    private MyProj.Data.Entities2 _coreEntities = new Data.Entities2();

    //GET: /Invoices/
    public ActionResult Index()
    {
        if (_entities.table3.Count() == 0) return View();

        var pastObj = _entities.table3.First();
        return View(new Table1ViewModel()
        {
            InvNo = pastObj.InvNo,
            Amount = pastObj.Amount,
            Tax = pastObj.Tax,
            .
            .
            .
            .
        });
    }
} 
```

视图：从控制器生成的每个视图都很好用。执行，唯一改变的是数据（带有标签和文本框的字段）。再一次，他们都做同样的工作（但使用不同的数据集）。

```
@model MyProject.Web.ViewModels.Table1ViewModel

@{
    ViewBag.Title = "Index";
}

<link href="@Url.Content("~/Content/CSS/GenericDetailStyles.css")" rel="stylesheet" type="text/css" />

<section id="content">
    <div id="table">
        <div>
            <h2>Customer</h2>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.Id)</div>
            <div class="right">@Html.TextBoxFor(model => model.Id)</div>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.FirstName)</div>
            <div class="right">@Html.TextBoxFor(model => model.FirstName)</div>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.LastName)</div>
            <div class="right">@Html.TextBoxFor(model => model.LastName)</div>
        </div>
        .
        .
        .
        .
    </div>
</section>

@{Html.RenderAction("Index", "FooterPartial");}

--------------------------------------------------------------------------------------

@model MyProject.Web.ViewModels.Table2ViewModel

@{
    ViewBag.Title = "Index";
}

<link href="@Url.Content("~/Content/CSS/GenericDetailStyles.css")" rel="stylesheet" type="text/css" />

<section id="content">
    <div id="table">
        <div>
            <h2>Vehicle</h2>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.RegNo)</div>
            <div class="right">@Html.TextBoxFor(model => model.RegNo)</div>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.Make)</div>
            <div class="right">@Html.TextBoxFor(model => model.Make)</div>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.PatientID)</div>
            <div class="right">@Html.TextBoxFor(model => model.Model)</div>
        </div>
        .
        .
        .
        .
    </div>
</section>

@{Html.RenderAction("Index", "FooterPartial");}

--------------------------------------------------------------------------------------

@model MyProject.Web.ViewModels.Table3ViewModel

@{
    ViewBag.Title = "Index";
}

<link href="@Url.Content("~/Content/CSS/GenericDetailStyles.css")" rel="stylesheet" type="text/css" />

<section id="content">
    <div id="table">
        <div>
            <h2>Invoice</h2>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.InvNo)</div>
            <div class="right">@Html.TextBoxFor(model => model.InvNo)</div>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.Amount)</div>
            <div class="right">@Html.TextBoxFor(model => model.Amount)</div>
        </div>
        <div class="row">
            <div class="left">@Html.LabelFor(x=>x.Tax)</div>
            <div class="right">@Html.TextBoxFor(model => model.Tax)</div>
        </div>
        .
        .
        .
        .
    </div>
</section>

@{Html.RenderAction("Index", "FooterPartial");} 
```

问题：我想制作一个控制器，并使其动态化。这样它就可以从不同的视图模型中读取数据。（为什么有 9 或 50 个控制器基本上做同样的工作）

然后我想对视图做同样的事情。这样就可以动态生成不同的字段。（为什么有 9 或 50 个视图都在做同样的工作）。如果视图基于控制器，则视图应该能够根据其属性进行更改。

基本上我想做的就是找到一种方法来告诉控制器从视图模型 X 或 VM - Y 或 VM - Z 等读取，它应该能够生成属性，检索相关数据，并将其传递给视图，收到后，将生成带有标签和文本框的字段。

我想我想知道是否有任何方法可以使用反射来做到这一点。由于视图模型是具有简单属性的基本类。可以潜在地创建一个基本控制器类，该类具有读取指定视图模型对象、获取其属性、还读取关联表并将该表中的字段与类中的属性匹配的方法。最后可以从表中传入记录来显示。然后可以使用某种剃须刀、c# 或 javascript 基于此自动生成视图。

任何关于这是否可能的教导都将受到欢迎。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T15:14:48.480

您可以使用**[AutoMapper](http://automapper.codeplex.com/)**删除在模型/实体之间复制值的所有代码。

此外，考虑使用布局、数据注释属性和模板（使用 Html.DisplayFor 和 Html.EditorFor）来缩小视图。

[http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-1-introduction.html)

您可以研究创建通用基础控制器类的可能性，该类将采用模型和实体的类型，并将包含用于 CRUD 操作的通用逻辑，但这可能是一个过分的步骤，并且会阻碍您以后的开发。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T15:17:22.327

我认为一个动态控制器可能会走得太远——当你把所有东西都变成通用的，然后你的一个视图需要比简单的数据库映射更复杂的东西时会发生什么——你扩展你的“通用视图控制器”来处理有了这个？可能会在[这里结束。](http://www.thedailywtf.com)

您也许应该看看 Automapper 以消除处理视图模型的一些重复性。

[http://automapper.codeplex.com/](http://automapper.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:18:14.890

您可以为对象或您的基类生成一个 EditFor/Model 模板，无论它是什么，然后只制作一个视图，该视图将接受您的模型、它的元数据（在 mvc metadataproviders 的帮助下），并根据动态构建字段.
[这篇文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-4-custom-object-templates.html)涵盖了它可以在 mvc2 中完成的方法，但你也可以轻松地将这种技术应用于 mvc 3。
我在我正在处理的项目中使用这样的模板，我有几十个不同的实体，都共享相同的外观和感觉。在我自己的 Metadataprovider 的帮助下，这也有助于我获取字段的顺序以及它们是否应该在每个视图中可见，我构建了一个视图来准确显示我的所有实体

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-22T21:40:38.757

我同意这里的其他人的观点，即使用一个动态控制器来处理应用程序中的所有模型和视图太过分了。还有其他方法可以减少控制器中的代码量。这里的其他答案提到了 AutoMapper，这是一个很棒的工具。AutoMapper 的发明者 Jimmy Bogard[在这里也有一个很棒的视频，](http://www.viddler.com/v/b568679c)其中包括您可以做的其他事情来减少控制器中的代码量。

就视图而言，您已经可以使用 EditorTemplates 拥有一个处理所有控制器的视图。您可以创建一个自定义的 EditorTemplate，它将使用反射来检查模型并相应地呈现输入字段。这一切都使用“模型元数据”，[Brad Wilson 在这里有一篇很好的文章](http://bradwilson.typepad.com/blog/2009/10/aspnet-mvc-2-templates-part-2-modelmetadata.html)。

# wpf - 如何在 MyButton.Click 事件之前执行 MyButton.Command.Open？

> ID：10704867
> 
> 赞同：3
> 
> 时间：2012-05-22T15:13:28.777
> 
> 标签：wpf, events, button, command

按钮可以使用`Command.Open`属性和`Click`事件。但是`Button.Click`事件在之前执行`Button.Command.Open`。由于我的`Button.Click`事件代码和`Button.Command.Open`代码是相互连接的，所以我需要`Button.Command.Open`先执行，然后再`Button.Click`执行事件。这怎么可能？有什么解决办法吗？

谢谢和抱歉，因为我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:33:53.003

听起来你需要找到一个在事件之前触发的`click`事件，比如`PreviewMouseDown`事件，然后在那里调用你的 Open 实现。

# visual-studio - 添加具有额外 CSPROJ“发布”和“调试”构建配置的新项目

> ID：10704882
> 
> 赞同：1
> 
> 时间：2012-05-22T15:14:18.887
> 
> 标签：visual-studio, msbuild, msdeploy

我们的 Visual Studio 2010 解决方案通常包含 40 到 60 个项目。在这些解决方案中，我们有许多自定义构建配置，例如 Release_Staging、Release_QA、Release_Production 等。这些都通过 XML 转换（例如 Web.Release_Staging.config）管理 web.config 中的大量自定义配置选项。这一切都很好！

我们的问题是当我们向解决方案添加一个新项目时。当我们这样做时，这些“自定义”构建配置都不会被创建；只有默认的“调试”和“发布”配置。

**有没有办法编辑一些 csproj 模板或强制完全“刷新”以将所有现有的构建配置复制到这个新的 csproj 文件中？**

也许是一些自定义命令行脚本或 PowerShell 魔法？我们总是不得不手动编辑 csproj 以添加 8 个左右的自定义构建配置，因为一次添加 10 到 20 个项目似乎是最快的事情。

这是构建的问题，因为我们在 msbuild 中使用了 Microsoft 的打包和部署 /T:Package 选项。我们的构建脚本使用特定的配置

```
msbuild BlogWebsite.csproj /T:Package /P:Configuration=%Configuration% 
```

例如，由于构建配置被指定为“Release_Staging”，这会在编译期间引发错误并停止构建，因为新项目的 csproj 文件中没有指定新的构建配置。

是的，我已经手动编辑了解决方案的构建配置管理器。但是这些设置似乎并没有“坚持”并且很容易被覆盖。更不用说必须为所有 50 多个项目编辑每个构建配置（其中 7 ro 8 个）。那是要管理的 8 * 50 或 400 个项目配置。

现在，添加新的构建配置不再是问题，因为这在构建配置管理器中很容易。我所说的是将一个新项目添加到已经具有许多自定义构建配置的现有解决方案中。

提前致谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-02-27T21:26:06.350

我必须从现有项目配置中获取节点。在我最喜欢的文本编辑器中打开了所有 *.csproj 文件，并将丢失的块添加到每个没有它的项目中。您可以使用在 Visual Studio 中打开的解决方案来编辑​​它们。

我的配置看起来像。

```
 <PropertyGroup Condition="'$(Configuration)|$(Platform)' == 'StagingQA|AnyCPU'">
    <OutputPath>bin\StagingQA\</OutputPath>
    <DefineConstants>TRACE;StagingQA</DefineConstants>
    <Optimize>true</Optimize>
    <DebugType>pdbonly</DebugType>
    <PlatformTarget>AnyCPU</PlatformTarget>
    <ErrorReport>prompt</ErrorReport>
    <CodeAnalysisRuleSet>MinimumRecommendedRules.ruleset</CodeAnalysisRuleSet>
  </PropertyGroup> 
```

编辑完每一个后，保存它们并返回到 Visual Studio。它会要求你重新加载项目，这样做。

作为最后一步，不要忘记转到 Confituration Manager（右键单击解决方案以获取它）。从这里您必须选择您的特定配置并更新每个项目以使用新方法。

![修复损坏的项目配置。](../Images/e329db6f85007f63e23a4783485cee08.png)

它是一个手动项目，但它解决了这个问题。我发现每次添加新项目时都必须手动执行此操作。

# java - 评估字符串中的数学表达式

> ID：10704885
> 
> 赞同：0
> 
> 时间：2012-05-22T15:14:21.643
> 
> 标签：java, android, math, evaluate

我正在开发一个 Android 应用程序，我得到一个带有我必须计算的数学表达式的字符串，我这样做是为了将字母转换为我需要的数字，但评估这个的最佳方法是什么？

没什么太复杂的，公式是这样的： `((A * 2 + B * 3 + C * 5) / 10) + D`

编辑：刚刚发现那个人，非常简单的 API，就像一个魅力 [http://code.google.com/p/symja/wiki/MathExpressionParser](http://code.google.com/p/symja/wiki/MathExpressionParser)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:17:50.237

你想要某种数学[解析器](http://en.wikipedia.org/wiki/Parser)。

自己动手很有趣，或者谷歌上有很多点击：https: [//www.google.co.uk/#hl=en&gs_nf=1&cp=16&gs_id=7&xhr=t&q=java+math+parser](https://www.google.co.uk/#hl=en&gs_nf=1&cp=16&gs_id=7&xhr=t&q=java+math+parser)

# java - Java执行命令行程序'find'返回错误

> ID：10704889
> 
> 赞同：5
> 
> 时间：2012-05-22T15:14:30.520
> 
> 标签：java, bash, find

以下从终端工作没问题

```
find testDir -type f -exec md5sum {} \; 
```

where`testDir`是包含一些文件（例如 file1、file2 和 file3）的目录。

但是，我在 Java 中使用以下内容时出现错误

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec("find testDir -type f -exec md5sum {} \\;"); 
```

错误是

```
find: missing argument to `-exec' 
```

我相信我正确地转义了字符。我尝试了几种不同的格式，但我无法让它工作。

**更新**@jtahlborn 完美地回答了这个问题。但是命令现在略有改变，在计算 md5sum 之前对目录中的每个文件进行排序，如下所示（我已经接受了原始问题的优秀答案，所以如果他们能想出格式，我会买啤酒为此。我已经尝试了我能想到的所有组合，但没有成功。）

> “查找 testDir -type f -exec md5sum {} + | awk {print $1} | sort | md5sum ;”

**新更新**

对于管道，你需要一个 shell，所以我最终得到了这个，它工作得很好，你仍然可以获得输出。

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec(new String[] 
{
    "sh", "-l", "-c", "find " + directory.getPath() + " -type f -exec md5sum {} + | awk '{print $1}' | sort | md5sum"
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:18:19.503

使用对 exec 的多参数调用（否则您可能会被转义规则咬住）。此外，由于您不是从 shell 脚本调用，因此您不需要转义分号：

```
Process pr = rt.exec(new String[]{"find", "testDir", "-type", "f", "-exec", "md5sum", "{}", ";"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:50:37.090

对于管道之类的东西，您需要一个 Runtime.exec 所没有的 shell。

```
Runtime rt = Runtime.getRuntime();
Process pr = rt.exec(new String[] 
{
    "sh", "-l", "-c", "find " + directory.getPath() + " -type f -exec md5sum {} + | awk '{print $1}' | sort | md5sum"
}); 
```

# ios - 如何使用分段控件定义整数？

> ID：10704892
> 
> 赞同：-1
> 
> 时间：2012-05-22T15:14:38.540
> 
> 标签：ios, objective-c, xcode, c-preprocessor

我定义了三个数字：

```
#define kBallSpeedX = 4;
#define kBallSpeedY = 3;
#define kCpuSpeed = 3.25; 
```

但是我希望在选择分段控制器的其他部分时改变这些数字。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T15:37:10.370

首先，您不要像这样定义宏 - 它应该是：

```
#define kBallSpeedX 4
#define kBallSpeedY 3
#define kCpuSpeed 3.25 
```

其次，您不应该真正使用宏 - 使用实际变量（如果合适，将它们设为 const ），例如

```
double kBallSpeedX = 4.0;
double kBallSpeedY = 3.0;
const double kCpuSpeed = 3.25; 
```

然后，您可以根据需要修改 kBallSpeedX、kBallSpeedY。

# symfony - 例外类型“标量”但在 Symfony2 下出现“PeristentCollection”错误

> ID：10704895
> 
> 赞同：0
> 
> 时间：2012-05-22T15:14:45.183
> 
> 标签：symfony, doctrine-orm

> 表单的客户端数据应该是标量类型，但它是类 Doctrine\ORM\PersistentCollection 的一个实例。您可以通过将“data_class”选项设置为“Doctrine\ORM\PersistentCollection”或添加将 Doctrine\ORM\PersistentCollection 转换为标量的客户端转换器来避免此错误。

这是我在使用集合使用表单时得到的结果，

我已将相关文件放在 Gist 下，我删除了所有不必要的代码：[https ://gist.github.com/2769672](https://gist.github.com/2769672)

我正在处理一个`TeamType`表单，（类`Team`），我有 2 个集合字段“ `Conditions`”和“ `Links`”

这个问题发生在我运行 composer.phar 更新之后（我使用 Symfony 2.1）。

我不明白的是为什么我得到这个虽然我有“ `data_class`”选项

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:40:07.457

这已在[https://github.com/symfony/symfony/pull/4374中修复](https://github.com/symfony/symfony/pull/4374)

# .htaccess - 为不同的 REQUEST_URI 获取相同的 REQUEST_FILENAME

> ID：10704901
> 
> 赞同：1
> 
> 时间：2012-05-22T15:15:00.253
> 
> 标签：.htaccess, mod-rewrite

mod_rewrite 有一个奇怪的问题。

URI like`/news`将正确匹配，因为`news.php`存在。但是，`/news/1900-01-01/title`将匹配，就好像它是`/news`！

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}.php -f
RewriteCond %{REQUEST_URI} !/$ #workaround for URIs ending in a slash passing the previous check
RewriteRule ^(.*)$ debug.php?page=$1.php&req_filename=%{REQUEST_FILENAME}&req_uri=%{REQUEST_URI} [L] 
```

如果使用`/news`它运行会产生预期的结果：

```
page=/news.php
req_filename=/home/domain/public_html/news
req_uri=/news 
```

如果运行`/news/1900-01-01/title`它会产生：

```
page=/news/1900-01-01/title.php
req_filename=/home/domain/public_html/news
req_uri=/news/1900-01-01/title 
```

为什么`%{REQUEST_FILENAME}`两者都一样？

我已经对新闻项目有了解决办法；移到`RewriteRule ^news/([0-9]{4}-[0-9]{2}-[0-9]{2})/([a-zA-Z0-9\-]+)$ news-item.php?date=$1&title=$2 [L]`此代码段上方。但是，我想了解 2 个唯一 URI 如何解析为同一个不存在的（脚本添加 .php）文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:52:02.767

Apache 尝试找到最低的“真实”目录，然后处理与该目录对应的指令（例如 .htaccess 或其他特定于目录的指令）。在您的情况下，我认为 URI 不对应于任何真实目录。Apache 然后使用内容协商，如果设置了 Multiviews（我怀疑在你的情况下），那么它会根据文件名找到最佳匹配。既然你有一个 news.php，那就是它的匹配项。如果您想了解更多信息，可以查找解释关键字 Content Negotiation 和 Multivews 的页面。

# sql-server - 在 sql server 报告服务中使用 xml

> ID：10704903
> 
> 赞同：1
> 
> 时间：2012-05-22T15:15:02.677
> 
> 标签：sql-server, xml, reporting-services

可以使用一些帮助来尝试处理 sql server 报告服务中的 xml：

我们允许用户创建自己的自定义表单并接受不同的输入类型，包括文本和单选（简单文本响应）、复选框、列表和多选（多个文本响应）和表格（复杂、矩阵文本响应）。这些表格有多个问题和许多不同类型的输入。

由于用户可以创建任意数量的列和行，因此表格响应一直是个问题。我将所有这些存储在一个 xml 字段中。从 .net 方面来看，我认为我很好，可以很好地在 html 中显示所有内容。我现在正试图在报告服务中使用这些数据，但发现自己陷入了困境。

如何在报告服务中显示以下数据，以便将其格式化为相对易于理解的表格格式？如果以不同的方式格式化我的 xml 会更容易，我也对此持开放态度。

数据库xml：

```
<answers type="table">
  <rows>
    <row>
      <cell>Answer A</cell>
      <cell>Answer B</cell>
      <cell>Answer C</cell>
      <cell>Answer D</cell>
      <cell>Answer E</cell>
    </row>
    <row>
      <cell>Answer F</cell>
      <cell>Answer G</cell>
      <cell>Answer H</cell>
      <cell>Answer I</cell>
      <cell>Answer J</cell>
    </row>
  </rows>
</answers> 
```

作为参考，如果有帮助，下面是其他输入类型的示例（存储在同一 xml 字段中）：

```
<answers type="multiselect">
  <answer>Option 3</answer>
  <answer>Option 4</answer>
</answers> 
```

表格所需的格式（粗略地说，因为可以有任意数量的列或行）：

```
Column 1 | Column 2 | Column 3 | Column 4 | Column 5
Answer A | Answer B | Answer C | Answer D | Answer E
Answer F | Answer G | Answer H | Answer I | Answer J 
```

谢谢你。

# javascript - Android 手机上的锚点

> ID：10704907
> 
> 赞同：0
> 
> 时间：2012-05-22T15:15:09.020
> 
> 标签：javascript, android, html, css

android 上的“返回顶部”按钮出现问题。这适用于所有浏览器、IOS、Mac 和 Windows，但不适用于 Android（冰淇淋）。该按钮正在出现，但并未停留在其固定位置。

CSS：

```
#TopButton {
    display: block;
    position: fixed;
    color: #b5b5b5;
    left: 55%;
    bottom: 8%;
} 
```

JavaScript：

```
<script type="text/javascript">
$(document).ready(function(){
    $("#TopButton").hide();
    $(function () {
        $(window).scroll(function () {
            if ($(this).scrollTop() > 100) {
                $('#TopButton').fadeIn();
            } else {
                $('#TopButton').fadeOut();
            }
        });

        // scroll body to 0px on click
        $('#TopButton').click(function () {
            $('body,html').animate({
                scrollTop: 0
            }, 800);
            return false;
        });
    });

});
</script> 
```

有没有人遇到过这个问题？

# c# - 非只读DataGridView，但离开后不在datagridview中显示输入，只显示编程输入

> ID：10704912
> 
> 赞同：0
> 
> 时间：2012-05-22T15:15:29.727
> 
> 标签：c#, winforms, datagridview

在我的 DataGridView 中，用户可以输入数据。当对应对象列表的属性之一在事件的帮助下发生更改时，DataGridView 会自动更改其内容。

现在我想为 DataGridView 提供以下行为：当用户插入数据，然后离开单元格时，应该验证输入。如果验证给出肯定的结果，则将输入保存到对象中。然后 datagridview 应该以正确的格式（例如日期）显示输入值。

我可以做到这一点：对象列表和 datagridview 之间的事件可以管理它。

问题是：如果验证给出否定结果，则应恢复先前的单元格值。

我尝试使用 DataGridView.CellValidating 事件，但这不起作用。我该怎么办？

已解决：我使用了 e.Cancel。这并没有真正做到我认为的承诺。当我使用 DataGridView1.CancelEdit() 时，它就像我想要的那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:28:48.843

我使用了 e.Cancel。这并没有真正做到我认为的承诺。当我使用 DataGridView1.CancelEdit() 时，它就像我想要的那样工作。

# ruby-on-rails - 当查询结果按 has_many :through 关联排序时，应该使用哪些索引

> ID：10704913
> 
> 赞同：0
> 
> 时间：2012-05-22T15:15:34.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3

问题可能很长，但问题其实很简单。我有 3 个模型：列表、外观和电影。一个 List 通过一个 Appearance 有很多 Movies，它们应该按照 joins 模型的属性等级排序。那么我应该使用哪些索引呢？这是我的模型目前的样子：

```
# Models
class Movie < ActiveRecord::Base  
  has_many :appearances, :dependent => :destroy
  has_many :lists, :through => :appearances
end

class Appearance < ActiveRecord::Base
  belongs_to :list
  belongs_to :movie
end

class List < ActiveRecord::Base
  has_many :appearances, :dependent => :destroy
  has_many :movies, :through => :appearances

  def self.find_complete(id)
    List.includes({:appearances => :movie}).where("appearances.rank IS NOT NULL").order("appearances.rank ASC").find(id)
  end
end 
```

这是我已经拥有的索引。我需要一个复合索引吗？还是只是按排名的索引？

```
# Tables
class CreateAppearances < ActiveRecord::Migration
  def change
    create_table :appearances do |t|
      t.integer :list_id, :null => false
      t.integer :movie_id, :null => false
      t.integer :rank
    end
    add_index :appearances, :list_id
    add_index :appearances, :movie_id
  end
end 
```

最后，有没有办法重构 find_complete List 方法？就像使用 default_scope 一样？不要忘记排名可能为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:18:36.110

ActiveRecord 正在执行两个查询。

```
SELECT DISTINCT `lists`.id
FROM `lists` LEFT OUTER JOIN `appearances` ON `appearances`.`list_id` = `lists`.`id`
             LEFT OUTER JOIN `movies` ON `movies`.`id` = `appearances`.`movie_id`
WHERE `lists`.`id` = 1 AND (appearances.rank IS NOT NULL)
ORDER BY appearances.rank ASC LIMIT 1 
```

和

```
SELECT `lists`.`id` AS t0_r0, `lists`.`name` AS t0_r1, `lists`.`created_at` AS t0_r2, `lists`.`updated_at` AS t0_r3, `appearances`.`id` AS t1_r0, `appearances`.`list_id` AS t1_r1, `appearances`.`movie_id` AS t1_r2, `appearances`.`rank` AS t1_r3, `appearances`.`created_at` AS t1_r4, `appearances`.`updated_at` AS t1_r5, `movies`.`id` AS t2_r0, `movies`.`name` AS t2_r1, `movies`.`created_at` AS t2_r2, `movies`.`updated_at` AS t2_r3
FROM `lists` LEFT OUTER JOIN `appearances` ON `appearances`.`list_id` = `lists`.`id`
             LEFT OUTER JOIN `movies` ON `movies`.`id` = `appearances`.`movie_id`
WHERE `lists`.`id` = 1 AND `lists`.`id` IN (1) AND (appearances.rank IS NOT NULL)
ORDER BY appearances.rank ASC 
```

在这两种情况下，您都需要一个同时包含lists.id 和appearances.rank 的索引。一些数据库会在多个表上创建索引。我也不知道您的数据库是否足够聪明，可以在外观.list_id 和外观.rank 上使用索引，但值得一试。

```
add_index :appearances, [:list_id, :rank] 
```

如果这没有帮助，至少索引：rank，所以数据库可能能够避免排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:29:25.177

您必须查看 Rails 将为您的特定用例输出哪些查询。

我最好的猜测是在外键列上添加索引，然后在应用程序完成并加载数据后**使用分析器**来查看特定查询是否表现不佳，然后修复它们！

永远不要尝试超越您的数据库，只需测量和修复 - 其他任何事情很可能会花费您更多的性能而不是节省的性能。

考虑到 Rails3 Arel 将如何延迟执行以便实际需要哪些索引在很大程度上取决于如何使用该关联以及如何遍历它，您在这里提出的问题是过早优化和一些猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:42:13.740

重新检查您的关联。如果

> *一个列表通过一个外观有很多电影*

```
class List < ActiveRecord::Base
 has_many :appearances, :dependent => :destroy
 has_many :movies, :through => :appearances
end

class Appearance < ActiveRecord::Base
 belongs_to :list, :foreign_key => list_id
 has_many :movies
end

class Movie < ActiveRecord::Base  
 belongs_to :appearance, :foreign_key => appearance_id, :dependent => :destroy  
end 
```

至于 find_complete 方法，我不明白为什么要把它变成一个范围。可能必须做得更短一些，因为你已经在 List 模型中并且看起来很奇怪调用 List.includes.... 本身。

看不到该 movie_id 索引的需要

```
class CreateAppearances < ActiveRecord::Migration
  def change
    create_table :appearances do |t|
      t.integer :list_id, :null => false
      t.integer :movie_id, :null => false
      t.integer :rank
    end
  add_index :appearances, :list_id
 end
end 
```

并且还需要为您的电影表创建一个外观 ID 索引。

我希望我没有遗漏任何东西

# jboss - 用 Weld 监听对话超时

> ID：10704914
> 
> 赞同：0
> 
> 时间：2012-05-22T15:15:41.567
> 
> 标签：jboss, jboss-weld

我知道接缝是可能的，因为当对话超时时会触发一个事件。Weld 是否有解决方法，以便我可以听到对话超时？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T14:22:13.180

Weld 是 Seam 3 的核心。所以应该没有问题，因为您已经知道如何在 Seam 中进行操作。

# ios - iOS 上的 OpenCV - GPU 使用情况？

> ID：10704916
> 
> 赞同：10
> 
> 时间：2012-05-22T15:15:45.590
> 
> 标签：ios, opencv, gpu

我正在尝试开发一个 iOS 应用程序，它可以对来自相机的视频执行实时效果，就像 iPad 上的 Photobooth。我熟悉 OpenCV 的 API，但如果大多数处理是在 CPU 上完成而不是在 GPU 上完成，我会担心 iOS 上的性能。像[GPUImage](https://github.com/BradLarson/GPUImage)这样的库最有可能做到这一点，但我宁愿继续使用我熟悉的东西。那么，有谁知道为 iOS 编译的 OpenCV 是否使用 GPU？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-22T15:29:39.560

OpenCV 使用 Cuda 作为它的 GPU，它只支持 NVidia 显卡。有一个openCV的GPU功能到OpenCL的实验端口，将来很可能会支持OpenCL——至少在iPad上（它的GPU可以运行OpenCL）

您可以在 iPhone 和 iPad 上使用 OpenGL ES2.0 中的着色器

# git - 将开发分支中的修改移动到新的 git-flow 功能分支中？

> ID：10704922
> 
> 赞同：11
> 
> 时间：2012-05-22T15:15:54.123
> 
> 标签：git, git-flow

我正在为我的项目使用 git-flow，并在开发分支中开始了一组相当复杂的更改，这似乎比我最初预期的要花更长的时间。

我希望我在功能分支中完成了这项工作，因为我想制作一个带有其他更改的新版本。如何将这些未提交的更改移动到新的 git-flow 功能分支中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-22T22:35:49.707

**如果你没有提交**

如果你只是有一个肮脏的工作副本，就像你即将开始一个新功能一样：

```
git flow feature start awesomeness
git commit -va 
```

**如果你*确实*做了一些提交**

如果开发中有应该在您的功能分支中的提交，则上述步骤是相同的​​。此外，尽管您（可能 - 这不是必需的）想要将您的开发分支重置回您开始为您的功能分支提交更改之前的位置，您可以这样做：

```
git flow feature start awesomeness
git commit -va
git checkout develop
git reset origin/develop --hard 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:43:40.723

这是一种方法：

```
git checkout where-you-should-have-made-your-feature-branch
git branch feature-branch
git checkout feature-branch
foreach commit in commits-that-should-have-been-on-your-feature-branch:
    # do this for each commit in chronological order
    git cherry-pick commit 
```

现在这取决于您是否已经将开发分支推送到公共存储库。如果一切仍然是私有的，并且您想重写历史记录：

```
git checkout develop-branch
foreach commit in commits-that-should-have-been-on-your-feature-branch:
    # do this for each commit in reverse chronological order
    git rebase --onto commit~1 commit develop-branch 
```

如果您不想重写历史记录：

```
git checkout develop-branch
foreach commit in commits-that-should-have-been-on-your-feature-branch:
    # do this for each commit in reverse chronological order
    git revert commit 
```

那应该这样做。

# django - Django - 如何从模型中选择特定列？

> ID：10704926
> 
> 赞同：35
> 
> 时间：2012-05-22T15:16:08.637
> 
> 标签：django

我在 SO 周围闻了一下，找不到这个，但我确信它就在某个地方。为这个潜在的双重职位道歉！

如果我有这个代码：

```
return Story.objects.filter(user=request.user.id).order_by('-create_date') 
```

并说故事有，嗯，一个“描述”字段，我*只*想要那个描述字段，不需要数据库用我的结果发回任何其他东西，我如何将查询限制在*那个*范围内？

也就是说，我如何生成这个 SQL：

```
select description from story where user_id = x order by create_date desc 
```

（其中 x 是 request.user.id 值，当然）

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-22T15:25:06.947

使用`values()`或`values_list()`。

如果你使用`values()`，你最终会得到一个字典列表（技术上是 a `ValuesQuerySet`）

```
instance = MyModel.objects.values('description')[0]
description = instance['description'] 
```

如果你使用`values_list()`，你最终会得到一个元组列表

```
instance = MyModel.objects.values_list('description')[0]
description = instance[0] 
```

或者，如果您只是在这种情况下获得一个值，您可以使用`flat=True`kwarg with`values_list`来获得一个简单的值列表

```
description = MyModel.objects.values_list('description', flat=True)[0] 
```

见[官方文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T15:26:24.093

使用[唯一的方法](https://docs.djangoproject.com/en/dev/ref/models/querysets/#only)。请阅读文档

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-18T20:16:45.797

正如文档所说，如果您的查询集将只产生一个对象，建议您应该使用 get() 而不是 filter。根据您提供的名称，我假设 user_id 对于每个用户都是不同的。EDIT1：我刚刚注意到 orderby 条款。因此，如果 user_id 不同或带有 pk，我建议使用此代码。

```
 description = story.objects.filter('description').get(user_id=x) 
```

# jquery - jquery 选择名称以 x 或 y 开头的输入

> ID：10704928
> 
> 赞同：3
> 
> 时间：2012-05-22T15:16:27.590
> 
> 标签：jquery, asp.net

对于包含/排除问题，我有一个页面，`radiobuttonlists`其 ID 以“inc”或“exc”开头。我可以选择所有包含按钮`$('input[name^="inc"]')`和所有排除`$('input[name^="exc"]')`。由于我将两种类型的按钮绑定到相同的功能，我想结合我的选择语句来获取两组元素。

我试过`$('input[name^="inc|exc"]')`了，但这并没有选择任何东西。我通过查看长度测试它没有发现任何东西，它是零。我尝试了其他几种方法，但它们都没有匹配。

总结问题，使用jquery，我需要找到名称以“inc”或“exc”开头的所有输入

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T15:17:04.797

```
$('input[name^=inc], input[name^=exc]'); 
```

# android - 我的活动加载时出现 NullPointerException

> ID：10704930
> 
> 赞同：-3
> 
> 时间：2012-05-22T15:16:31.877
> 
> 标签：android, exception, layout, android-activity, nullpointerexception

我从屏幕“A”开始。在屏幕 A 中，我导航到屏幕“B”，它将方向从纵向更改为横向。如果我现在按下后退按钮，则会出现此异常。

它甚至没有达到 OnCreate 代码

```
E/AndroidRuntime(518): FATAL EXCEPTION: main    
E/AndroidRuntime(518): java.lang.RuntimeException: Unable to start activity ComponentInfo{be.coenen/be.coenen.TimeregistrationCardActivity}: java.lang.NullPointerException    
E/AndroidRuntime(518):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)    
E/AndroidRuntime(518):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)    
E/AndroidRuntime(518):  at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3815)    
E/AndroidRuntime(518):  at android.app.ActivityThread.access$2400(ActivityThread.java:125)    
E/AndroidRuntime(518):  at android.app.ActivityThread$H.      handleMessage(ActivityThread.java:2037)    
E/AndroidRuntime(518):  at android.os.Handler.dispatchMessage(Handler.java:99)    
E/AndroidRuntime(518):  at android.os.Looper.loop(Looper.java:123)    
E/AndroidRuntime(518):  at android.app.ActivityThread.main(ActivityThread.java:4627)    
E/AndroidRuntime(518):  at java.lang.reflect.Method.invokeNative(Native Method)    
E/AndroidRuntime(518):  at java.lang.reflect.Method.invoke(Method.java:521)    
E/AndroidRuntime(518):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)    
E/AndroidRuntime(518):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)    
E/AndroidRuntime(518):  at dalvik.system.NativeStart.main(Native Method)    
E/AndroidRuntime(518): Caused by: java.lang.NullPointerException    
E/AndroidRuntime(518): at be.coenen.TimeregistrationCardActivity.onCreateDialog(TimeregistrationCardActivity.java:314)    
E/AndroidRuntime(518):  at android.app.Activity.onCreateDialog(Activity.java:2472)    
E/AndroidRuntime(518):  at android.app.Activity.createDialog(Activity.java:881)    
E/AndroidRuntime(518):  at android.app.Activity.restoreManagedDialogs(Activity.java:870)    
E/AndroidRuntime(518):  at android.app.Activity.performRestoreInstanceState(Activity.java:816)    
E/AndroidRuntime(518):  at android.app.Instrumentation.callActivityOnRestoreInstanceState(Instrumentation.java:1096)    
E/AndroidRuntime(518):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2641) 
```

` OnCreate 屏幕 A：

```
public class TimeregistrationOverviewActivity extends Activity {
/** Called when the activity is first created. */
private Context context;
private ArrayList<TimeregistrationOverview> listTimeRegOverView;
private TimeregistrationOverviewAdapter listViewAdapter;
private ListView listView;
private String emp, dateTimeRegistration;
private TextView txtDateDisplay;
private Button btnPickDate, btnInterventionRapport;
private int intYear, intMonth, intDay, arrayCount;
private Intent i = new Intent();
final Calendar c = Calendar.getInstance();
final int DATE_DIALOG_ID = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    try{

    super.onCreate(savedInstanceState);
    context = getApplicationContext();
    setContentView(R.layout.main);

    listView = (ListView) findViewById(R.id.android_TOlist1);
    txtDateDisplay = (TextView) findViewById(R.id.TOdateDisplay);
    btnPickDate = (Button) findViewById(R.id.TObtnDatum);
    btnPickDate.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            showDialog(DATE_DIALOG_ID);
        }
    });

    intYear = c.get(Calendar.YEAR);
    intMonth = c.get(Calendar.MONTH);
    intDay = c.get(Calendar.DAY_OF_MONTH);
    // Get Employee ID
    i = getIntent();
    emp = i.getExtras().getString("Employee");
    if (!(i.getExtras().getString("Date") == null)) {
        dateTimeRegistration = i.getExtras().getString("Date");

    }

    // display the current date
    updateDisplay();

    // gegevens ophalen/updaten
    new DownloadData().execute(LogInActivity.SERVICE_URI
            + "GetTimeregistrationOverview?Date=" + dateTimeRegistration
            + "&Employee=" + emp);
} catch (Exception e) {
    ShowError();
}
} 
```

OnCreate 屏幕 B：

```
public class TimeregistrationCardActivity extends Activity {
/** Called when the activity is first created. */
private TimeregistratrationCard timeRegistrationCard;
private Intent intent = new Intent();
private int id, minute, hour, minuteNow, hourNow;
private TextView date, customerName, description, taskDocNo, activity,
        externalInfo, internalInfo, percentageComplete, project, startTime,
        stopTime;
private CheckBox coaching;
private String employeeNo, dateTimeregistration;
private ProgressDialog m_ProgressDialog;
private Calendar c = Calendar.getInstance();

static final int TIME_DIALOG_ID = 0, TIME_DIALOG_ID2 = 1,
        DATE_DIALOG_ID = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.timeregistrationcard);

    m_ProgressDialog = ProgressDialog.show(
            TimeregistrationCardActivity.this, "", getResources()
                    .getString(R.string.ProgressDialog), true);

    date = (TextView) findViewById(R.id.TRKtxtDatum);
    customerName = (TextView) findViewById(R.id.TRKtxtKlantNaam);
    description = (TextView) findViewById(R.id.TRKtxtDescription);
    taskDocNo = (TextView) findViewById(R.id.TRKtxtTaskDocNo);
    activity = (TextView) findViewById(R.id.TRKtxtActivity);
    coaching = (CheckBox) findViewById(R.id.TRKchkCoaching);
    externalInfo = (TextView) findViewById(R.id.TRKtxtExternalInformation);
    internalInfo = (TextView) findViewById(R.id.TRKtxtInternalInformation);
    percentageComplete = (TextView) findViewById(R.id.TRKtxtPercentageComplete);
    project = (TextView) findViewById(R.id.TRKtxtProject);
    startTime = (TextView) findViewById(R.id.TRKtxtStartTime);
    stopTime = (TextView) findViewById(R.id.TRKtxtStopTime);

    intent = getIntent();
    id = intent.getExtras().getInt("ID");
    employeeNo = intent.getExtras().getString("Emp");
    dateTimeregistration = intent.getExtras().getString("Date");
    new DownloadData().execute(LogInActivity.SERVICE_URI
            + "GetTimeregistrationCard?ID=" + id);

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T15:24:09.570

看看你的代码中的这一行，返回活动时有什么 null

```
E/AndroidRuntime(518): Caused by: java.lang.NullPointerException

E/AndroidRuntime(518): at be.coenen.TimeregistrationCardActivity.onCreateDialog(TimeregistrationCardActivity.java:314) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:08:31.797

使用`onConfigurationChanged`以下代码在您的两个活动中使用方法

```
public void onConfigurationChanged(Configuration newConfig) 
{
    super.onConfigurationChanged(newConfig);

    // Checks the orientation of the screen
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) 
    {
        Toast.makeText(this, "landscape", Toast.LENGTH_SHORT).show();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        Toast.makeText(this, "portrait", Toast.LENGTH_SHORT).show();
    }
} 
```

而不是`Toast`只需使用启动要打开的活动的活动。我的意思是，在屏幕 A 的`onConfigurationChanged`方法中，它从纵向改变横向意味着，只需启动屏幕 A 而不是`Toast`那里。

不要忘记在您的活动清单文件中添加以下代码 -

```
<activity android:name=".your Activity name"  // Your activity name.
      android:configChanges="orientation|keyboardHidden"
      android:label="@string/app_name"> 
```

希望这对您有所帮助。

# java - 在现代处理器上使用按位运算真的比常规数学更快吗？

> ID：10704931
> 
> 赞同：3
> 
> 时间：2012-05-22T15:16:49.680
> 
> 标签：java, c#, bit-manipulation, operator-keyword, bit-shift

我已经看到多个来源（一些在这里，以及关于按位运算的维基百科文章）说使用位移来计算比正常的乘法/除法/加法更快。但是，他们还提到，这仅适用于较旧的处理器，并且大多数现代处理器已经做到了，因此速度几乎相等。

该声明的有效性如何？在 Java 或 C# 中仅使用常规数学操作数是否安全？真的有必要使用位移来代替那些操作数吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-22T15:18:36.210

You just leave this to the compiler. Good compilers know about the hardware that they are targetting. If the compiler knows that bitwise operations are faster, then it can emit code to do it that way. You should always write the human readable code in the most clear fashion, the fashion that correctly expresses the operation being performed. Let the compiler do the rest.

As for whether or not it is still true that bitwise operations can be faster than arithmetic, I believe that they are. Certainly many modern C++ compilers will emit code that uses bitwise operations for arithmetic.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:23:18.663

我不确定在当今的体系结构和编译器上使用按位运算和使用简单运算符之间的差异有多大（我的猜测是......在大多数问题上几乎没有）。

我的直觉是，您现在编写的大多数代码实际上并不是 CPU 操作的瓶颈，而是数据库访问、I/O、网络（是的，我在这里是多余的）。

例如，JVM 的编译器已经针对运行代码的架构优化了许多操作，将这种必要性从开发人员那里抽象出来（这就是它的用途）。

我想说的最后一点是……可读性很重要。不管一些按位运算爱好者会争论什么，大多数开发人员通常在代码中间的按位运算的可读性要差*得多，而不是简单地使用标准数学。*

理解代码的成本以及在需要更改代码时引入错误的可能性增加，恕我直言，风险远远超过收益。编写高效的代码很重要，但它仍然必须是人类可读的。

免责声明：在某些领域，数学运算的数量*可能*会成为一个因素，但这肯定不是常态。

# autofac - Autofac 中 Ninject When 子句的等价物是什么？

> ID：10704933
> 
> 赞同：0
> 
> 时间：2012-05-22T15:17:02.147
> 
> 标签：autofac

假设我们有一个有两个构造函数的类，第一个是空的（默认），第二个是构造函数参数。

```
class Test : ITest {
     Public Test () {}
     public Test (string parameter) { do something; } 
```

在 NInject 中，它可以使用：

```
Bind<ITest>().To<Test>();

Bind<ITest>().To<Test>()
            .When(ctx => IsTrue())
            .WithConstructorArgument("parameter", request => GetParameter()); 
```

对于条件构造函数的使用非常简洁。

我想知道 Autofac 中的等价物是什么？

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:07:20.333

您可以注册一个执行条件逻辑的委托。例如：

```
builder.Register(context => IsTrue() ? firstService : theOtherService); 
```

# c# - WPF Application.Startup 属性（不是 StartupUri）

> ID：10704936
> 
> 赞同：1
> 
> 时间：2012-05-22T15:17:07.633
> 
> 标签：c#, wpf, vb.net, app.xaml

[MSDN 页面](http://msdn.microsoft.com/en-us/library/system.windows.application.aspx)`System.Windows.Application`列出了一个名为`StartupUri`. 但是， [此 MSDN 示例](http://msdn.microsoft.com/en-us/library/ms748948#Opening_a_Window)使用`Startup`.

在哪里`Startup`定义？我在 MSDN 文档中找不到它。

这对某些人来说可能很明显，我刚刚进入 C#/WPF 世界。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:20:36.167

`Startup`是 Application 类上的一个事件。有关更多详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.windows.application.startup.aspx)。

# javascript - 原型和非原型方法？

> ID：10704938
> 
> 赞同：5
> 
> 时间：2012-05-22T15:17:09.270
> 
> 标签：javascript, object

我想知道，JavaScript 中的原型方法和非原型方法有什么区别？任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T15:19:25.710

A non-prototyped method will take up memory in every instance of the class.

It will also (assuming it's declared in the scope of the class constructor) have access to any other private variables (or methods) declared in that scope.

For example, this will create an instance of the function per object, and that function can access `myVar`:

```
function MyObject() {
     var myVar;
     this.func = function() { ... };
}; 
```

and in this case there's only one instance of the function shared between every instance of the object, but it will not have access to `myVar`:

```
function MyObject() {
     var myVar;
};

MyObject.prototype.func = function() { ... }; 
```

# vb.net - Word 文档 Fields.Update 通过互操作不会触发自定义代码

> ID：10704939
> 
> 赞同：0
> 
> 时间：2012-05-22T15:17:10.853
> 
> 标签：vb.net, ms-word, interop, field

我正在尝试使用 VB.Net Windows 表单应用程序中的 CustomDocumentProperties 打开 Word 模板并更新其字段。这适用于常规字段内容，但我希望 UpdateFields 事件触发 Word 模板中的自定义代码。

这是我在 Word 模板中的内容：

```
Public Sub UpdateFields()
  'do some things with the CustomDocProperties
End Sub 
```

这是来自应用程序的代码：

```
Dim wordApp = New Word.Application
wordApp.Documents.Open(pathToTemplate)
wordApp.ActiveDocument.CustomDocumentProperties("Initials").Value = "JD"
wordApp.ActiveDocument.Fields.Update() 
```

当我更新 Word 本身中的字段时会触发 UpdateFields 方法，但是当我通过互操作执行此操作时不会发生这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:56:27.003

使用以下行调用自定义方法： `wordApp.Run("InsertSignature", "JD")`

# python - 通过 Python 字典的顺序循环给出问题

> ID：10704946
> 
> 赞同：-1
> 
> 时间：2012-05-22T15:17:25.777
> 
> 标签：python, associative-array

> **可能重复：**
> [python 以什么顺序显示字典键？](https://stackoverflow.com/questions/4458169/in-what-order-does-python-display-dictionary-keys)

我试图回答这个非常奇怪的 Python 问题（在 SO 上，但看起来作者删除了它）。这让我大吃一惊，我似乎无法合理地解释自己是什么原因导致了这种令人困惑的现象。我有一个 Python 字典（关联数组），我初始化如下。

```
d = {"word1": 1, "word2": 2, "word3": 3} 
```

并使用 for..in 构造循环遍历它，在该构造中我打印由空格分隔的“d”键。 **预期输出**：word1 word2 word3
**实际输出**：word1 word3 word2

然后我尝试将“d”打印为

```
打印 d
```

输出

```
{'word1'：1，'word3'：3，'word2'：2}
```

我正在扫描在线 Python 文档、SO 上的现有调查问卷、博客，但完全找不到原因。我在这里错过了什么吗？此外，请所有对这个问题投反对票的人请详细说明原因。

干杯。:-)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T15:19:16.650

Python `dict` does not guarantee any particular ordering of its keys.

[`collections.OrderedDict`](http://docs.python.org/library/collections.html#collections.OrderedDict) preserves the insertion order of its keys.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-22T15:18:31.313

The keys in a Python dictionary are not sorted.

```
for key in sorted(d):
    print key, 
```

prints `word1 word2 word3` as expected.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-22T15:28:19.180

从文档中：

> 最好将字典视为一组无序的键：值对，并要求键是唯一的（在一个字典中）。一对大括号创建一个空字典：{}。在大括号内放置一个逗号分隔的键：值对列表，将初始键：值对添加到字典中；这也是在输出上编写字典的方式。
> 
> 字典上的主要操作是存储带有某个键的值并提取给定键的值。也可以使用 del 删除键：值对。如果您使用已在使用的密钥进行存储，则与该密钥关联的旧值将被遗忘。使用不存在的键提取值是错误的。
> 
> 字典对象的 keys() 方法以任意顺序返回字典中使用的所有键的列表（如果要对其进行排序，只需对其应用 sorted() 函数）。要检查单个键是否在字典中，请使用 in 关键字。

[http://docs.python.org/tutorial/datastructures.html](http://docs.python.org/tutorial/datastructures.html)

最后一段说明了一切。

# c# - MonoMac 应用程序中的 JSON.NET 不允许我构建 mac 应用程序包

> ID：10704954
> 
> 赞同：1
> 
> 时间：2012-05-22T15:17:47.247
> 
> 标签：c#, .net, json, mono, monomac

我正在尝试构建一个使用 JSON.NET 库的 MonoMac 应用程序，但每当我尝试生成应用程序安装程序时，我都会看到以下错误：

```
Merging Mono into app bundle
    /Applications/Development/MonoDevelop.app/Contents/MacOS/lib/monodevelop/AddIns/MonoDevelop.MonoMac/mmp -o "/tmp/monomac-build-634732855752481110" -n "OfficeDropSync" -a  "/Users/mauricio/projects/mono/winclient/ODWSyncApplication/OfficeDrop.Sync.Business/bin/Release/OfficeDrop.Sync.Business.dll" -a "/Users/mauricio/projects/mono/winclient/ODWSyncApplication/OfficeDrop.Sync.Common/bin/Release/OfficeDrop.Sync.Common.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Xml.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Core.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Xml.Linq.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/System.Drawing.dll" -a "/Library/Frameworks/Mono.framework/Versions/2.10.9/lib/mono/4.0/Mono.Data.Sqlite.dll" -a "/Users/mauricio/projects/mono/winclient/thirdparty/log4net.dll" -a "/Users/mauricio/projects/mono/winclient/thirdparty/monomac/src/MonoMac.dll" "/Users/mauricio/projects/mono/winclient/ODWSyncApplication/OfficeDrop.Sync.Mac/bin/Release/OfficeDropSync.exe"
Could not link assemblies: Mono.Cecil.ResolutionException: Failed to resolve System.Void Newtonsoft.Json.JsonObjectAttribute::.ctor(Newtonsoft.Json.MemberSerialization)
  at Mono.Linker.Steps.MarkStep.MarkMethod (Mono.Cecil.MethodReference reference) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkCustomAttribute (Mono.Cecil.CustomAttribute ca) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkCustomAttributes (ICustomAttributeProvider provider) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkType (Mono.Cecil.TypeReference reference) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkType (Mono.Cecil.TypeReference reference) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkField (Mono.Cecil.FieldReference reference) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkFields (Mono.Cecil.TypeDefinition type) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.ApplyPreserveInfo (Mono.Cecil.TypeDefinition type) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.MarkType (Mono.Cecil.TypeReference reference) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.InitializeType (Mono.Cecil.TypeDefinition type) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.InitializeAssembly (Mono.Cecil.AssemblyDefinition assembly) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.Initialize () [0x00000] in <filename unknown>:0 
  at Mono.Linker.Steps.MarkStep.Process (Mono.Linker.LinkContext context) [0x00000] in <filename unknown>:0 
  at Mono.Linker.Pipeline.Process (Mono.Linker.LinkContext context) [0x00000] in <filename unknown>:0 
  at MonoMac.Tuner.Linker.Run (Mono.Linker.Pipeline pipeline, Mono.Linker.LinkContext context) [0x00000] in <filename unknown>:0 Failed to link /Users/mauricio/projects/mono/winclient/ODWSyncApplication/OfficeDrop.Sync.Mac/bin/Release/OfficeDropSync.exe

mmp exited with code 1 
```

有没有人见过这个？有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T17:58:30.073

> 有没有人见过这个？

是的。当符号无法解析时会发生这种情况。

在您的情况下，您的`mmp`命令行似乎没有对 json 程序集的任何*直接*引用。然而，一些程序集引用了它。`ResolutionException`当处理后者以及`mmp`解析器无法找到引用的程序集时会发生这种情况。

> 有没有办法解决这个问题？

手动添加对程序集的引用（这将确保包含它）*或*确保它（缺少的 json 库）可以通过`mmp`.

# c# - IDisposable 的接口继承？

> ID：10704958
> 
> 赞同：7
> 
> 时间：2012-05-22T15:17:57.447
> 
> 标签：c#, inheritance

我有以下继承层次结构：

```
public interface IRepository<T> : IDisposable
{
    void Add(T model);
    void Update(T model);

    int GetCount();

    T GetById(int id);
    ICollection<T> GetAll();
}

public interface IAddressRepository : IRepository<Address>
{
} 
```

而这段代码：

```
var adrs = new Address[]{
    new Address{Name="Office"}
};

using (IAddressRepository adrr = new AddressRepository())
    foreach (var a in adrs)
        adrr.Add(a); 
```

但是，此代码无法编译。它给了我这个错误信息：

```
Error   43  
'Interfaces.IAddressRepository': type used in a using statement must be
 implicitly convertible to 'System.IDisposable' 
```

但是，父级`IAddressRepository`继承自`IDisposable`.

这里发生了什么？如何使代码编译？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-22T15:25:37.987

我的猜测是你犯了一个错误——或者你没有重新编译包含`IRepository<T>`接口的程序集，因为你继承了它`IDisposable`，或者你引用了它的错误副本，或者你引用了其他的`IAddressRepository`。

尝试进行清理，然后重新构建所有，并检查您的参考路径。如果项目在同一个解决方案中，请确保您引用的是包含`IRepository<T>`/`IAddressRepository`而不是 DLL 的项目。

还要确保`AddressRepository` *实际实现* `IAddressRepository`. 它可能只是报告错误的错误。

编辑：所以解决方案似乎是包含`AddressRepository`的父类的程序集没有编译。这导致调试器抱怨`AddressRepository`没有实现`IDisposable`，而不是（更明智的）“由于其保护级别而无法访问”错误编译类本身。我的猜测是你也有这个错误，但首先解决了这个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:29:34.090

为我工作：

```
using System;

public class Address {}

public interface IRepository<T> : IDisposable
{
    void Add(T model);
    void Update(T model);
}

public interface IAddressRepository : IRepository<Address>
{
}

class Program
{
    public static void Main()
    {
        using (var repo = GetRepository())
        {
        }
    }

    private static IAddressRepository GetRepository()
    {
        // TODO: Implement :)
        return null;
    }
} 
```

我怀疑你可能有两个`IAddressRepository`接口。你确定是`Interfaces.IAddressRepository`那个延伸`IRepository<T>`，那个延伸`IDisposable`？

# html - CSS Dropdown issue with IE 7

> ID：10704965
> 
> 赞同：0
> 
> 时间：2012-05-22T15:18:12.490
> 
> 标签：html, css, wordpress, internet-explorer, internet-explorer-7

I have recently built this site with through wordpress and seem to be having some alignment issues with Internet Explorer 7.

Basically they appaering about 20 or so pixel's to the right and wondered what way to fix this? This has had me stumped for a while now and I feel like I am slowly running out of idea's.

Here is the link:

[http://alleanza.co.uk](http://alleanza.co.uk)

Is a screenshot needed? If so I ca post the one from the client later tonight, but It is only IE 7!?

The PHP and Html Structure I have for the list's is this:

```
<ul id="nav" class="clearfloat">
<li style="padding:10px 10px 0px 10px; height:20px; display:block;"><a href="http://www.alleanza.co.uk">Alleanza</a></li>
<div id="navoption"><ul><?php wp_list_pages('title_li='); ?></li></ul></div>
</ul> 
```

Is that the correct structure? All help is appreciated..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:28:34.070

您在顶级`ul`菜单项中嵌套了一个 div，这可能是破坏您在 IE7 中的设计的原因，令人惊讶的是它甚至可以在其他浏览器中使用：

```
<ul class="clearfloat" id="nav">
    <li>Alleanza</li>
    <div id="navoption"> <ul> ... </ul> </div>
</ul> 
```

列表项必须嵌套在您的菜单列表中。

因此，将该 div 包装在一个列表项中，它应该可以工作：

```
<ul id="nav" class="clearfloat">
    <li style="padding:10px 10px 0px 10px; height:20px; display:block;"><a href="http://www.alleanza.co.uk">Alleanza</a></li>
    <li><div id="navoption"><ul><?php wp_list_pages('title_li='); ?></li></ul></div></li>
</ul> 
```

**注意：**注意到您使用的是 wordpress，您实际上可以在菜单的“自定义链接”选项中创建该“Alleanza”链接，因此您无需对其进行硬编码。

文档：[http ://codex.wordpress.org/Appearance_Menus_Screen](http://codex.wordpress.org/Appearance_Menus_Screen)

# c# - 禁用 LogoutRequest 的签名

> ID：10704969
> 
> 赞同：0
> 
> 时间：2012-05-22T15:18:22.640
> 
> 标签：c#, wif, saml-2.0

我目前正在开发一个小型 ASP.NET 项目，该项目涉及针对第 3 方身份提供者对用户进行身份验证。当前登录有效，注销无效。

我正在使用[WIF SAML 2.0 扩展](http://blogs.msdn.com/b/card/archive/2011/05/16/announcing-the-wif-extension-for-saml-2-0-protocol-community-technology-preview.aspx)来处理 SAML 协议。

第 3 方 IdP*不需要*来自服务提供商的签名 LogoutRequest。但是，默认情况下，WIF SAML 扩展要求我签署此类请求。

**问题：**

*   有没有办法禁用 LogoutRequests 的签名？

另一个库 OpenAM 在其[扩展的服务提供者元数据](https://wikis.forgerock.org/confluence/display/openam/SAMLv2+IDP+Proxy+Part+2.+Using+an+IDP+Finder+and+LOAs)中有一个有趣的属性：

```
<Attribute name="wantLogoutRequestSigned">
        <Value>false</Value>
</Attribute> 
```

WIF 中是否有类似的属性可用？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:03:00.733

因此，假设这是 SP-Init SLO，并且您使用 POST 或 Redirect 绑定将 LogoutRequest 发送到 IDP，SLO 配置文件表明您*必须*对请求进行数字签名。参见第 4.4.3.1 节，第 1223-1224 行：

“如果使用 HTTP POST 或重定向绑定，则必须对消息进行签名。”

不确定 WIF 是否允许您为 SLO 生成不合规消息。我猜 OpenAM 设置仅用于测试目的（或 SOAP 绑定），而 WIF 没有类似的选项。

我知道我没有直接回答你的问题，但无论如何 HTH - Ian

# c# - How to have a two-way binding with an ObservableCollection of EF objects

> ID：10704977
> 
> 赞同：1
> 
> 时间：2012-05-22T15:18:40.517
> 
> 标签：c#, wpf, binding, two-way-binding

I made a datagrid that has for source a ObservableCollection of Entity framework objects. The Datagrid fills well. When I edit a row I don't see the model change with the debugger or in the database when I save with a save button.

Here's my XAML code.

```
<Window.DataContext>
    <ViewModels:BicycleViewModelCollection />
</Window.DataContext>
 <DataGrid AutoGenerateColumns="True" ColumnWidth="*" ItemsSource="{Binding Bicycles, Mode=TwoWay}" SelectionUnit="FullRow"/> 
```

ViewModelCollection

```
/// <summary>
/// Collection of BicycleViewModel
/// </summary>
public class BicycleViewModelCollection
{
    /// <summary>
    /// Initializes a new instance of the <see cref="BicycleViewModelCollection"/> class.
    /// </summary>
    public BicycleViewModelCollection()
    {
        var bicycleShop = new BicycleShop();
        bicycleShop.Bicycles.Load();
        this.Bicycles = bicycleShop.Bicycles.Local;
    }

    /// <summary>
    /// Gets or sets the bicycles.
    /// </summary>
    /// <value>
    /// The bicycles.
    /// </value>
    public ObservableCollection<Xav.Entity.Models.Bicycle> Bicycles { get; set; }
} 
```

Note that I use the Local property. I don't know if this is evil or not.

# c++ - Reading INI file in c++

> ID：10704979
> 
> 赞同：1
> 
> 时间：2012-05-22T15:18:46.010
> 
> 标签：c++, ini

I have no idea how to do this please help me out:-

earlier i used to take the server ip address from a .txt file so it was easy to read the ip address from the txt file

```
#include ".mySocket.h"
#include "myLog.h"
#include "myException.h"
#include "myHostInfo.h"

myLog winLog;
void readServerConfig(string&);
void checkFileExistence(const string&);

int main()
{
    // Initialize the winsock library
    myTcpSocket::initialize();

    // get client's information (assume neither the name nor the address is given)
    winLog << endl;
    winLog << "Retrieve the localHost [CLIENT] name and address:" << endl;
    myHostInfo clientInfo;
    string clientName = clientInfo.getHostName();
    string clientIPAddress = clientInfo.getHostIPAddress();
    cout << "Name: " << clientName << endl;
    cout << "Address: " << clientIPAddress << endl;
    winLog << " ==> Name: " << clientName << endl;
    winLog << " ==> Address: " << clientIPAddress << endl;

    // get server's IP address and name
    string serverIPAddress = "";
    readServerConfig(serverIPAddress);
    winLog << endl;
    winLog << "Retrieve the remoteHost [SERVER] name and address:" << endl;
    winLog << " ==> the given address is " << serverIPAddress << endl;

    myHostInfo serverInfo(serverIPAddress,ADDRESS);
    string serverName = serverInfo.getHostName();
    cout << "Name: " << serverName << endl;
    cout << "Address: " << serverIPAddress << endl;
    winLog << " ==> Name: " << serverName << endl;
    winLog << " ==> Address: " << serverIPAddress << endl;

    // create the socket for client
    myTcpSocket myClient(PORTNUM);
    cout << myClient;
    winLog << "client configuation: " << endl;
    winLog << myClient;

    // connect to the server.
    cout   << "connecting to the server [" << serverName << "] ... " << endl;
    winLog << "connecting to the server [" << serverName << "] ... " << endl;
    myClient.connectToServer(serverIPAddress,ADDRESS);

    int recvBytes = 0;
    while (1)
    {
        // send message to server
        char messageToServer[MAX_MSG_LEN+1];
        memset(messageToServer,0,sizeof(messageToServer));
        cout << "[SEND] ";
        cin.getline(messageToServer,MAX_MSG_LEN);

        winLog << "[SEND] " << messageToServer << endl;
        myClient.sendMessage(string(messageToServer));

        if ( !string(messageToServer).compare("Quit") || !string(messageToServer).compare("quit") ) 
            break;

        // receive message from server
        string messageFromServer = "";
        recvBytes = myClient.recieveMessage(messageFromServer);
        if ( recvBytes == -99 ) 
            break;

        cout   << "[RECV:" << serverName << "]: " << messageFromServer << endl;
        winLog << "[RECV:" << serverName << "]: " << messageFromServer << endl;

    }

    return 1;
}

//from the following code i read the ip address from the txt file but now how to read from INI file
**void readServerConfig(string& serverIPAddr)
{
    string serverConfigFile = "serverConfig.txt";
    checkFileExistence(serverConfigFile);
    ifstream serverConfig(serverConfigFile.c_str());

    // read server's IP address
    getline(serverConfig,serverIPAddr);
    serverConfig.close();
}**

void checkFileExistence(const string& fileName)
{
    ifstream file(fileName.c_str());
    if (!file) 
    {
        cout << "Cannot continue:" << fileName << " does NOT exist!" << endl;
        exit(1);
    }
    file.close();
} 
```

But now i have to take read the server ip address from the INI file,Now the problem is how to read the INI file to get the ip address

My INI file reader and writer

```
#include "iostream"
#include "IniWriter.h"
#include "IniReader.h"
int main(int argc, char * argv[])
{
    CIniWriter iniWriter(".\\Logger.ini");
    iniWriter.WriteString("Setting", "ServerIp", "192.168.15.168");
    iniWriter.WriteString("Setting", "MultiCastIp", "239.255.42.42");
    iniWriter.WriteString("Setting", "Name", "jianxx");   
    iniWriter.WriteInteger("Setting", "Age", 27); 
    iniWriter.WriteFloat("Setting", "Height", 1.82f); 
    iniWriter.WriteBoolean("Setting", "Marriage", false);  
    CIniReader iniReader(".\\Logger.ini");
    char *szName = iniReader.ReadString("Setting", "Name", "");   
    int iAge = iniReader.ReadInteger("Setting", "Age", 25); 
    float fltHieght = iniReader.ReadFloat("Setting", "Height", 1.80f); 
    bool bMarriage = iniReader.ReadBoolean("Setting", "Marriage", true); 
    char *szName1 = iniReader.ReadString("Setting", "MultiCastIp", ""); 

    std::cout<<"Name:"<<szName<<std::endl
        <<"Age:"<<iAge<<std::endl 
        <<"Height:"<<fltHieght<<std::endl 
        <<"Marriage:"<<bMarriage<<std::endl
      **<<"MultiCastIp:"<<szName1<<std::endl;//i want to read this ip**
    while(1);
    delete szName;  
    return 1;   
} 
```

**Please help me out,i have no idea how to write the following function to obtain the ip address**

```
void readServerConfig(string& serverIPAddr)
{
    //Please guide how to write this function
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:24:41.263

请记住，当您需要做之前数百万程序员已经完成的事情时，通常有一种方法可以轻松完成，而无需重新发明轮子。

在这种情况下，我会使用[GetPrivateProfileString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724353%28v=vs.85%29.aspx)。实际上，我可能会忘记 INI 文件而只使用注册表，但它就是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:40:05.963

看来您已经严重混淆了您要问的内容。我从您的问题中得到的是，您想将 IP 地址字符串解析为 IP 地址，而不是从您已经完成的 INI 文件中读取它。

你不需要。操作系统为您完成。使用`gethostbyname`是简单的答案。

如果这是家庭作业或其他事情，并且您必须填写该签名，那么首先您会被搞砸，因为它不会返回任何东西......您必须设置一些愚蠢的全局来返回值或其他东西。但是，您可以使用`sscanf`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-22T15:44:05.533

这段代码看起来很糟糕，而且当你在 ini 文件中添加越来越多的配置选项时，它不会变得更漂亮。您应该使用 boost 库查看这个[不错的替代方案。](https://stackoverflow.com/questions/4509062/boostprogram-options-how-to-handle-sections-in-ini-file)

# c++ - 为线程设置新优先级时不允许操作

> ID：10704983
> 
> 赞同：7
> 
> 时间：2012-05-22T15:18:53.263
> 
> 标签：c++, pthreads

我创建了两个线程。默认情况下，他们有一个优先级，我可以使用 pthread_getschedparam 看到，然后`0`我尝试分别提高他们的优先级。但是当我尝试这样做时，我得到了一个错误`2``3`

```
 error setting priority for T1: (1), Operation not permitted
     error setting priority for T2: (1), Operation not permitted 
```

我已经`SCHED_RR`为他们使用了调度策略

```
 int sched = SCHED_RR; 
```

然后执行此操作：-

```
 if (pthread_setschedparam(t1, sched, &t1_param) != 0) 
  {
     std::cout << "error setting priority for T1: (" << errno << "), " << 
     strerror(errno) << std::endl;
  } 
```

我无法修改线程优先级的原因是什么，因为优先级在 SCHED_RR 的限制范围`1`内`99`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-22T16:03:26.207

免责声明：我不是 Linux 安全方面的专家，以下建议可能会危及或损坏您的计算机。

在最近的 Linux 版本中，有一个资源限制 ，`RLIMIT_RTPRIO`它指定了您可以使用的最大实时优先级。您可以从外壳检查：

```
> ulimit -r
0 
```

在我的 Ubuntu 版本（可能还有你的版本）上，硬限制也为零，所以你不能简单地使用`ulimit`或`setrlimit`提高它。提高硬限制的一种方法是添加一行`/etc/security/limits.conf`这样（替换`<username>`为您的用户名）：

```
<username> hard rtprio 99 
```

然后您应该能够使用`ulimit`（从外壳程序）或`setrlimit`（从您的程序）将软限制设置为您需要的优先级；或者，您可以通过添加第二行来自动设置它`limits.conf`，替换`hard`为`soft`.

```
> ulimit -Hr # show hard limit
99
> ulimit -r
0
> ulimit -Sr 1 # set soft limit
> ulimit -r
1 
```

小心运行具有实时优先级的程序；如果它开始行为不端，它可能会杀死系统。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-22T15:33:42.227

请参阅[这篇文章](http://www.linuxjournal.com/article/3910)以获得解释。

默认情况下，Linux 中的用户任务具有调度策略`SCHED_OTHER`。为了将其更改为实时策略（即`SCHED_RR`，正如您尝试做的那样），您需要成为 root。您可以尝试以 root 身份运行您的程序来验证这一点。

（还要注意这篇文章有点过时了——Linux 2.2。你可能想研究一下这个行为是否在较新的内核中发生了变化）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-22T15:31:00.850

你可以试试`SCHED_BATCH`吗？

以上可能不需要root权限

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-13T14:34:39.833

如果您是 root 并且在 rlimits 内工作，此调用失败的另一个原因是 cgroups，请参阅：[https ://unix.stackexchange.com/a/511261/232485](https://unix.stackexchange.com/a/511261/232485)

# asp.net - How to display the complete control tree every postback

> ID：10704984
> 
> 赞同：0
> 
> 时间：2012-05-22T15:18:56.963
> 
> 标签：asp.net, .net-4.0, viewstate

I'm receiving a very standard Viewstate error in a very specific scenario in one of current projects.

> Sys.WebForms.PageRequestManagerServerErrorException: Failed to load viewstate. The control tree into which viewstate is being loaded must match the control tree that was used to save viewstate during the previous request. For example, when adding controls dynamically, the controls added during a post-back must match the type and position of the controls added during the initial request.

My issue, is that this is a customer driven forms designer, and all controls are dynamic, there is also a lot of skip logic on the form, so most controls are not visible at any given time, and it appears to be the toggling of this visibility that is causing the issue. Only in one very specific pattern however. As I am not having any luck re-creating the issue on a simpler form, or tracking down the specific control that is not being re-rendered correctly. Then I thought a sure way to figure this out would be to display the entire control tree at the bottom of the page every postback. then I can compare the tree before and after the error, and see what is changing. But I'm not sure how to do this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:25:07.863

刚找到，Page标签中的Trace属性就是我需要的。

```
<%@ Page Trace="true" %> 
```

[http://msdn.microsoft.com/en-US/library/kthye016%28v=vs.80%29](http://msdn.microsoft.com/en-US/library/kthye016%28v=vs.80%29)

# tridion - 使用 2 个模板的动态组件链接

> ID：10704985
> 
> 赞同：8
> 
> 时间：2012-05-22T15:19:03.607
> 
> 标签：tridion

假设我有一个使用集合模式的组件，并且该组件与两个相反的组件模板一起使用，例如：

组件：产品 A

模板一：产品营销

模板二：产品支持

通过动态组件链接，我希望能够使用组件的 tcm uri 指定指向内容所在位置的超链接（使用 dreamweaver 模板，即`<a href="tcm:11-xxxx">Link text</a>`）

问题是，如果生成的链接指向我正在处理的网站的错误部分，即指向产品营销部分中的产品支持的链接，反之亦然。

我已经尝试设置模板的链接优先级......都设置为高......但 Tridion 似乎使用发布的最后一个模板来决定链接应该去哪里。

另外，如果我将其中一个模板设置为中等，另一个设置为高，它只会使用具有最高优先级的模板获取指向内容的链接（即所有链接到产品支持，即使在产品营销部分）

有谁知道如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-22T15:30:15.677

您的问题与已发布的组件演示文稿的上下文有关。SDL Tridion 按如下方式解决目标 CP 的优先级（如果有多个匹配项，则仅移动到下一步）：

1.  找到优先级最高的 CP（你有 2 个优先级高）
2.  通过查看当前的结构组 (SG)、子 SG、同级 SG 等，找到最接近当前页面的那个。（您似乎也有 2 个）
3.  最后的后备方案是它链接到最近发布的一个（这就是你所看到的）

这通常是由于您有一个实际上不在页面上的动态组件演示 (DCP)，或者由于某种原因在您的链接代码中未设置页面 ID，因此它无法计算当前的位置CP，因此必须从上面跳过步骤 (2)。

这可能无法帮助您解决问题，但它确实解释了您所看到的。所以我可以提供更多帮助，请解释您正在发布的内容（它是 DCP 吗？），并可能查看发布的代码并检查是否已将页面 URI 添加到链接代码中（并确保它不是 tcm :0-0-0)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-22T15:38:23.430

除了 Chris 评论之外，您还可以使用 tridion:excludetemplateuri 属性来精确控制您可以链接到哪个组件模板，具体取决于您的营销或支持需求。

在 DWT .. 你可以使用这样的东西。

```
<a tridion:href="tcm:8-299" tridion:excludetemplateuri="tcm:8-420-32">linkText</a> 
```

这是[供参考的链接](http://sdllivecontent.sdl.com/LiveContent/web/pub.xql?action=home&pub=SDL_Tridion_2011_SPONE&lang=en-US#addHistory=true&filename=creatingDreamweaverTemplate_11.xml&docid=idheading-359728360&inner_id=&tid=&query=&scope=&resource=&eventType=lcContent.loadDocidheading-359728360&url=http://sdllivecontent.sdl.com:80/LiveContent/web/search.xql?c=t&pub=SDL_Tridion_2011_SPONE&lang=en-US&action=search&query=dream%2520weaver%2520link&scope=&min=10&max=0&sort=&chunk=10&sid=lcSearch.runSearch1337700702406)

# c# - 在 EF 4.3 中保存多对多关系

> ID：10704986
> 
> 赞同：1
> 
> 时间：2012-05-22T15:19:04.953
> 
> 标签：c#, entity-framework-4, entity

我在保存多对多关系时遇到问题。当我运行代码时，我的映射表“dbo.UserTown”没有保存任何数据，知道为什么吗？

我已经编写了我的函数来保存带有城镇列表的用户

```
 public void Save(User user)
    {
        context.User.Add(user);
        context.SaveChanges();
    } 
```

我的课是这样的：

```
public class User
{
    public long UserId { get; set; }
    public String Nickname { get; set; }
    [InverseProperty("Residents")]
    public virtual ICollection<Town> Residencies { get; set; }
} 
```

和

```
public class Town
{
    public long TownId { get; set; }
    public String Name { get; set; }
    public virtual ICollection<User> Residents { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T15:25:21.060

你需要有映射类

```
public class User
{
  public long UserId { get; set; }
  public String Nickname { get; set; }
  public virtual ICollection<TownResidents> TownResidents { get; set; }
}

public class Town
{
  public long TownId { get; set; }
  public String Name { get; set; }
  public virtual ICollection<TownResidents> TownResidents { get; set; }
}

public class TownResidents
{
  public long TownId { get; set; }
  public long UserId { get; set; }

  public virtual Town { get; set; } 
  public virtual User { get; set; } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:47:08.620

您不必创建新实体来处理多对多关系。首先删除`[InverseProperty("Residents")]`. 这是多余的。没有它，您的模型很好。

`[InverseProperty("Entity")]`如果您的实体之间存在多个“对多”关系，则需要。

我想您的问题在于您如何将相关数据添加到实体中。我认为这篇[文章](http://vincentlauzon.wordpress.com/2011/04/15/entity-framework-4-1-many-to-many-relationships-5/)会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T13:38:25.030

斯坦奇，但我第二天发现：我已采取措施解决问题：

1.  新鲜的咖啡杯 :)
2.  清除所有兑现vs（清除所有项目），确定关闭Visual Studio
3.  删除数据库
4.  打开 VS 并运行项目 => 这一步创建了数据库
5.  重要提示：没有更改我的代码
6.  第二次运行项目以将虚拟数据播种到系统中
7.  我的表已填充。

真正的头条...

# c# - FieldObject 中的 Crystal Reports 垂直对齐

> ID：10704988
> 
> 赞同：0
> 
> 时间：2012-05-22T15:19:13.423
> 
> 标签：c#, crystal-reports, .net

我有一个包含 Crystal Report 的 WinForms C# 应用程序。在其中，我有多个 FieldObjects，其行数各不相同。我希望它们水平和垂直居中。我可以通过将 HorAlignment 属性设置为 crHorCenterAlign 将它们水平居中，但我找不到将其设置为垂直居中的方法。我还没有设法在网上找到答案，所以我的问题是：

**如何将 FieldObject 的文本设置为垂直居中显示**，就像使用设置为 crHorCenterAlign 的 HorAlignment 将其水平居中一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:52:49.510

对于垂直居中，使用水平对齐属性。

不幸的是，没有一种简单的方法可以将文本对象水平居中（在任何模式下）。过去，我使用公式代替文本对象作为字段标题。我尝试调整公式的大小（旋转对齐）以修复“最坏”的情况并希望获得最好的结果：

```
//insert a CRLF after the first space
Replace({TABLE.FIELD}, " ", " " + Chr(10) + Chr(13), 1, 1) 
```

不要忘记，您还需要交换字段的高度和宽度属性的值。

# facebook - Facebook Graph API 返回不一致的结果 - 我错过了什么？

> ID：10704991
> 
> 赞同：0
> 
> 时间：2012-05-22T15:19:22.860
> 
> 标签：facebook, facebook-graph-api

我有一个非常简单的场景。我正在使用[Facebook API Explorer](http://developers.facebook.com/tools/explorer)。我有两个随机的用户个人资料，他们的墙上有公开帖子：

1.  [http://www.facebook.com/Arjun](http://www.facebook.com/Arjun) (facebook user.id = 7901103)
2.  [http://www.facebook.com/bashiru.myakasai](http://www.facebook.com/bashiru.myakasai) (facebook user.id=100001044928063)

我正在尝试使用 fql 访问这些用户的状态/链接。当我尝试

```
fql?q=SELECT link_id FROM link WHERE owner = 7901103 
```

我收到大约 250 行数据。但是当我尝试对另一个用户 ID 进行相同操作时

```
fql?q=SELECT link_id FROM link WHERE owner= 100001044928063 
```

我收到 [] （一个空的数据集！）

我在这里做错了什么？当两个配置文件都是公开的并且他们的所有帖子都是公开的时，为什么我不能从链接/流表中获取公开帖子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T16:29:52.203

我认为这回答了我的问题：[Facebook Graph API 返回 'false' 即使 post 是 public](https://stackoverflow.com/questions/7021099/facebook-graph-api-returns-false-even-though-post-is-public)。第一个个人资料是真正公开的（互联网和 Facebook 用户可以访问），第二个个人资料不是真正公开的（仅登录用户可以访问）

# f# - Is there any other idiomatic ways to pass state information?

> ID：10704993
> 
> 赞同：3
> 
> 时间：2012-05-22T15:19:26.997
> 
> 标签：f#

I have a need to process a sequence of historical tick data of millisecond timeframe. The ability is required to filter in opening ticks of certain timespans (hourly, minute, etc.). The sequence may have gaps greater, than the span, so the first tick after such gap must be picked as opening one, otherwise the opening tick is one that is closest to pass of calendar beginning of correspondent timespan.

The first thing that comes to my mind is the following **stateful** filtering function `opensTimespan:Timespan->(Timestamp->bool)` that captures timespanId of each gap-opening or interval-opening tick into a closure for passing between invocations:

```
let opensTimespan (interval: Timespan)=
    let lastTakenId = ref -1L  // Timestamps are positive
    fun (tickAt: Timestamp) -> 
        let tickId = tickAt / interval in
            if tickId <> !lastTakenId then lastTakenId := tickId; true
            else false 
```

and can be applied like this:

```
let hourlyTicks = readTicks @"EURUSD-history.zip" "EURUSD-2012-04.csv"
                  |> Seq.filter (opensTimespan HOUR) |> Seq.toList 
```

This works fine, but `opensTimespan` having the side effect is definitely not idiomatic.

One alternative may be using the fact that the decision upon a tick is opening one or not requires just the pair of timestamps of the self and the previous one to come up with the following **stateless** filtering function `opensTimespanF:Timespan->Timestamp*Timestamp->bool`:

```
let opensTimespanF interval (ticksPair: Timestamp*Timestamp) =
    fst ticksPair/ interval <> snd ticksPair/ interval 
```

that can be applied as:

```
let hourlyTicks= 
    seq {
        yield 0L;
        yield! readTicks @"EURUSD-history.zip" "EURUSD-2012-04.csv"
    }
    |> Seq.pairwise |> Seq.filter (opensTimespanF HOUR)
    |> Seq.map snd
    |> Seq.toList 
```

This approach being pure functional produces equivalent results with only a slight (~11%) performance penalty.

What other way(s) of approaching this task in pure functional manner I may be missing?

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-22T16:25:19.913

就像 Tomas 的解决方案（实际上，我使用他作为我的起点，评论和所有），除了使用[Seq.scan](http://msdn.microsoft.com/en-us/library/ee340364.aspx)允许您避免`List.rev`并按需产生结果（例如，我们可以处理无限滴答流）。

```
let hourlyTicks = 
  readTicks @"EURUSD-history.zip" "EURUSD-2012-04.csv" 
  |> Seq.scan (fun (lastTakenId,_) tickAt ->
      // Similar to the body of your stateful function - 'lastTakenId' is the last state
      // and 'tickAt' is the current value.
      let tickId = tickAt / HOUR 
      if tickId <> lastTakenId then  
        // We return new state for 'lastTakenId' and yield current 
        // element to the "scan stream"
        (tickId, Some(tickAt))
      else 
        // Here, we skip element, so we return the original tick id and 
        // yield None to the "scan stream"
        (lastTakenId, None) ) (-1L, None) // Initial state: -1 and None

  //yield all the snd elements of the "scan stream" where Option.isSome
  |> Seq.choose snd 
```

（免责声明：我没有对此进行测试，因为我没有在您的问题中假设所有依赖项）。

**更新以回应评论**

我想知道您看到的性能损失是否是由于对累加器中的值进行装箱/拆箱。我很想知道以下是否显示出改进：

```
open System
open System.Collections.Generic
let hourlyTicks3 = 
  readTicks @"EURUSD-history.zip" "EURUSD-2012-04.csv" 
  |> Seq.scan (fun (kvp:KeyValuePair<_,_>) tickAt ->
      let lastTakenId = kvp.Key
      // Similar to the body of your stateful function - 'lastTakenId' is the last state
      // and 'tickAt' is the current value.
      let tickId = tickAt / HOUR 
      if tickId <> lastTakenId then  
        // We return new state for 'lastTakenId' and yield current 
        // element to the "scan stream"
        KeyValuePair<_,_>(tickId, Nullable<_>(tickAt))
      else 
        // Here, we skip element, so we return the original tick id and 
        // yield "null" to the "scan stream"
        KeyValuePair<_,_>(lastTakenId, Nullable<_>()) ) (KeyValuePair<_,_>(-1L, Nullable<_>())) // Initial state: -1 and "null"
  //yield all Values of KeyValuePair.Value elements of the "scan stream" where Nullable.HasValue
  |> Seq.filter (fun kvp -> kvp.Value.HasValue)
  |> Seq.map (fun kvp -> kvp.Value.Value) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-22T16:01:28.847

一个纯粹的功能解决方案是使用该`fold`功能。该`fold`函数用于处理序列（或列表）并累积一些状态。在您的示例中，状态是`lastTakenId`您想要返回的元素列表，因此您可以使用 state 类型`Timestamp * (Timestamp list)`：

```
let hourlyTicks = 
  readTicks @"EURUSD-history.zip" "EURUSD-2012-04.csv" 
  |> Seq.fold (fun (lastTakenId, res) tickAt ->
      // Similar to the body of your stateful function - 'lastTakenId' is the last
      // state and 'tickAt' is the current value. The 'res' list stores 
      // all returned elements
      let tickId = tickAt / HOUR 
      if tickId <> lastTakenId then  
        // We return new state for 'lastTakenId' and append current element to result
        (tickId, tickAt::res)
      else 
        // Here, we skip element, so we return the original state and original list
        (lastTakenId, res) ) (-1L, []) // Initial state: -1 and empty list of results

  // Take the second part of the state (the result list) and
  // reverse it, because it was accumulated in the opposite order
  |> snd |> List.rev 
```

另外，我不完全确定您的其他纯解决方案 - 我认为它与第一个解决方案不完全相同（但我没有要测试的数据），因为您只比较两个相邻的元素（所以，也许，在第一个中，您可以跳过多个项目？）

# asp.net-mvc - fluent security unit testing

> ID：10704995
> 
> 赞同：2
> 
> 时间：2012-05-22T15:19:28.257
> 
> 标签：asp.net-mvc, unit-testing, authentication, authorization, fluent-security

I have been writing some tests on my Fluent Security configuration off late. Though I can write tests verifying if a controller action method has a particular policy applied e.g.

```
expectations.Expect<HomeController>(x=>x.Index()).Has<IgnorePolicy>(); 
```

However, what I am looking for is, if I can write role specific tests.

e.g If I have given Admin Role access only to Index() of HomeController, I want to test something like

```
expectations.Expect<HomeController>(x=>x.Index()).Has<RequireRolePolicy>().For("Admin"); 
```

I do not find any examples on net, or any extensions in FLuentSecurity.TestHelper that can help me do this. any thoughts?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T13:10:55.210

Has 扩展有一个带谓词的重载：

```
expectations.Expect<HomeController>(x => x.Index())
    .Has<RequireRolePolicy>(policy => policy.RolesRequired.Contains("Admin")); 
```

如您所见，RequireRolePolicy 公开了您可以测试的 RolesRequired 属性。

如果您发现自己要检查一组特定的角色，我建议您创建一个自定义策略，然后只检查该策略。在 github 上的示例应用程序中有一个示例（AdministratorPolicy）：[https ://github.com/kristofferahl/FluentSecurity/blob/master/FluentSecurity.SampleApplication/AdministratorPolicy.cs](https://github.com/kristofferahl/FluentSecurity/blob/master/FluentSecurity.SampleApplication/AdministratorPolicy.cs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T15:48:24.063

虽然我得到了这项工作，但发现 Fluent Security 存在严重限制。它无法区分具有相同名称的两个动作方法！

例如

```
public ActionResult Edit(int id){} 
```

和

```
[HttpPost]
public ActionResult Edit(SomeCommand command){} 
```

如果我想在编辑（获取）和编辑（发布）时向管理员用户授予访客访问权限，我无法通过 Fluent Security 执行此操作，因为它将这两种方法标识为一种方法。我不会推荐这个库，因为这是一个严重的限制！

# javascript - inside cloned div bound action with jquery

> ID：10704998
> 
> 赞同：0
> 
> 时间：2012-05-22T15:19:37.163
> 
> 标签：javascript, jquery, css, lightbox

My index page have some records where each record have one or more images associated with it.

Under record description there are list of image thumbs. where I have onclick events binded to js function which clone that image in different height inside div showImage.

That's all fine.

Now I need to open that cloned image inside showImage div id in fullscreen mode using lightbox. Here's the code I'm having right now (it works but without fullscreen implementation)

```
<script type="text/javascript">
    function onPopUp() {
        var imageObject = $("img.details").first();
        var clonedObj = $(imageObject).clone();
        clonedObj.height("250px").width("300px");
        clonedObj.appendTo($("div#showImage"));

        $(".details").click(function (event) {
            //clone the clicked image
            var clone = $(this).clone();
            clone.height("250px").width("300px");
            //place it in the placeholder
            $('div#showImage').html(clone);
        });
    } 
```

Backend code is asp.net mvc3 but I think that's not important here. For example purposes you can show me using html and css. Thanks

**Update: That action that I want to bind onclick to cloned image inside showImage div can be alert message, for simplicity.**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T16:14:59.023

你想拥有`Event click`一个在 之后创建的元素`DOM`，在这种情况下你想使用：

```
$('#cloned').bind('click', function() {
  alert('User clicked on "cloned element."');
}); 
```

[在这里，您可以获得更多信息。](http://api.jquery.com/bind/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T18:08:47.347

以下解决方案是成功的。完成了我的任务。我必须在元素渲染后绑定点击事件，所以我使用以下方法实现了这一点：

```
$("#showImage").live("click", function (event) {
    alert('User clicked on "cloned element."');
}); 
```

.live 将在窗口上添加一个事件处理程序并检查单击事件，然后检查目标，如果匹配则触发事件。

这样，在 DOM 上随时添加的任何元素都将触发此处理程序。

非常感谢@Seb，他为我指明了正确的方向。