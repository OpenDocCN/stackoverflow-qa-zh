# StackOverflow 问答 10171000-10171999

# zend-framework - Zend 表单验证器 foreach

> ID：10171001
> 
> 赞同：0
> 
> 时间：2012-04-16T08:40:18.477
> 
> 标签：zend-framework, zend-form, zend-validate

早晨，

我对 Zend Form Validator 有一个奇怪的问题。当我想输出错误消息时，我看到：ArrayArray.

我的代码：

```
<?php

// Load sms request form
$smsRequestForm = new Application_Form_Sms_Request();

// Form posted?
if ($this->getRequest()->getMethod() != 'POST') {
    // Show the form
    $this->view->showForm = true;            
    $this->view->smsRequestForm = $smsRequestForm;
} elseif (!$smsRequestForm->isValid($_POST)) {
    // Show the form and output the validation errors
    $this->view->showForm = true;            
    $this->view->smsRequestForm = $smsRequestForm;

    // Loop through the error messages
    foreach($smsRequestForm->getMessages() as $message)
    {
        echo $message;
    }
} else {

} 
```

我已经阅读了文档并了解到 echo $message; 应该以纯文本形式输出错误消息。

做 foreach($smsRequestForm->getMessages() as $key => $message); 不能解决我的问题。

有谁知道我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:54:34.897

你在这里弄错了，`getMessages()`返回一个像这样的数组，例如：

```
array(2) {
  ["username"] => array(2) {
    ["stringLengthTooShort"] => string(33) "'' is less than 3 characters long"
    ["alphaStringEmpty"] => string(21) "'' is an empty string"
  }
  ["password"] => array(1) {
    [0] => string(7) "Message"
  }
} 
```

因此，您需要对其进行迭代以获取每个字段错误，如下所示：

```
foreach($form->getMessages() as $fields)
{
    foreach ($fields as $error) {
        echo $error;
    }
} 
```

[手册中的](http://framework.zend.com/manual/en/zend.form.quickstart.html#zend.form.quickstart.errorstatus)更多信息：

> **getMessages()**返回元素名称/消息的关联数组（其中消息是错误代码/错误消息对的关联数组）。

我猜你在手册中读到的是如何使用`$messages = $element->getMessages();`. 为单个元素返回的错误消息是错误代码/错误消息对的关联数组。

# c# - WPF中如何改变AreaSeries的背景

> ID：10171003
> 
> 赞同：2
> 
> 时间：2012-04-16T08:40:27.930
> 
> 标签：c#, wpf, xaml, charts

我在 WPF 中的 chartingToolkit:AreaSeries 遇到了一个奇怪的问题：

这是我用来构建图表的代码：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chartingToolkit="clr-namespace:System.Windows.Controls.DataVisualization.Charting;assembly=System.Windows.Controls.DataVisualization.Toolkit"
    xmlns:datavis="clr-namespace:System.Windows.Controls.DataVisualization;assembly=System.Windows.Controls.DataVisualization.Toolkit"
    xmlns:chartingprimitives="clr-namespace:System.Windows.Controls.DataVisualization.Charting.Primitives;assembly=System.Windows.Controls.DataVisualization.Toolkit"
    x:Class="leartWPF.ButtonTest"
    x:Name="Window"
    Title="ButtonTest"
    Width="640" Height="480">

    <Grid x:Name="LayoutRoot">
        <chartingToolkit:Chart Margin="56,91,50,72" Title="Chart Title" DataContext="{Binding ElementName=Window, Mode=OneWay}">
                <chartingToolkit:Chart.Template>
                    <ControlTemplate TargetType="{x:Type chartingToolkit:Chart}">
                        <Border Background="{TemplateBinding Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Padding="{TemplateBinding Padding}">
                            <Grid>
                                <chartingprimitives:EdgePanel Name="ChartArea" Style="{TemplateBinding ChartAreaStyle}" Grid.Row="1" Margin="0">
                                    <Grid Panel.ZIndex="-1" Style="{TemplateBinding PlotAreaStyle}" />
                                    <Border Panel.ZIndex="10" BorderBrush="#FF919191" BorderThickness="1" />
                                </chartingprimitives:EdgePanel>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </chartingToolkit:Chart.Template>

                <chartingToolkit:LineSeries
                    ItemsSource="{Binding Path=Data}"
                    IndependentValuePath="Date"
                    DependentValuePath="Value"/>
                <chartingToolkit:AreaSeries
                    ItemsSource="{Binding Path=Data}"
                    IndependentValueBinding="{Binding Date}"
                    DependentValueBinding="{Binding Value}">
                    <chartingToolkit:AreaSeries.Background>
                        <RadialGradientBrush Center="0.075,0.015" GradientOrigin="-0.1,-0.1" RadiusY="0.9" RadiusX="1.05">
                        <GradientStop Color="#FFB5D2ED" Offset="1"/>
                        <GradientStop Color="#FF1E4C78"/>
                    </RadialGradientBrush>
                    </chartingToolkit:AreaSeries.Background>
                </chartingToolkit:AreaSeries>
        </chartingToolkit:Chart>
    </Grid>
</Window> 
```

#FFB5D2ED 和 #FF1E4C78 都是蓝色。

![#FFB5D2ED 和 #FF1E4C78 都是蓝色](../Images/657fa427900a6bdc25ff3be15eb55c8f.png)

这是实际图表的样子：

![错误颜色图表](../Images/b5a92c75e4a3058ba0283bf3f2ca6439.png)

为什么我会得到这个，我该如何改变颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T05:05:18.143

我希望这可以帮助你：

```
 <ch:Chart Margin="56,21,50,72" Title="MyChart" DataContext="{Binding ElementName=Window, Mode=OneWay}" >
                    <ch:Chart.Palette>
                        <datavis:ResourceDictionaryCollection>
                            <ResourceDictionary>
                                <Style x:Key="DataPointStyle" TargetType="Control">
                                    <Setter Property="Background" Value="Blue"/>
                                </Style>
                            </ResourceDictionary>
                            <ResourceDictionary>
                                <Style x:Key="DataPointStyle" TargetType="Control">
                                    <Setter Property="Background" Value="Green"/>
                                </Style>
                            </ResourceDictionary>
                            <ResourceDictionary>
                                <Style x:Key="DataPointStyle" TargetType="Control">
                                    <Setter Property="Background" Value="Red"/>
                                </Style>
                            </ResourceDictionary>
                        </datavis:ResourceDictionaryCollection>
                    </ch:Chart.Palette>

                    <ch:AreaSeries Name="PersonnelArea" ItemsSource="{Binding Path=Key}" IndependentValueBinding="{Binding Key}" DependentValueBinding="{Binding Value}"/>

                    <ch:AreaSeries Name="DefaultArea" ItemsSource="{Binding Path=Key}" IndependentValueBinding="{Binding Key}" DependentValueBinding="{Binding Value}" />
                </ch:Chart> 
```

# javascript - 如何从.data（）中的函数获取元素的变量

> ID：10171004
> 
> 赞同：0
> 
> 时间：2012-04-16T08:40:33.060
> 
> 标签：javascript, jquery

```
var el = $('#someElement');

el.data('f', function() {
  console.log(this); // return an object to the window
}); 
```

所以我想要从函数内部返回一个像“el”这样的对象的东西。

原因是该元素将被复制，我不知道该函数应用于哪个元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:44:12.427

你可以这样做（如果我理解正确，我不确定）

```
var el = $('#someElement');
var clone = el.clone();
el.data('f', function() {
  console.log(clone); // return an object to the window
}); 
```

# actionscript-3 - AS3 MotionTween 名称

> ID：10171007
> 
> 赞同：0
> 
> 时间：2012-04-16T08:40:42.373
> 
> 标签：actionscript-3, tween, motion

我正在尝试在 AS3 中获取动画的名称。

我有许多在 MOTION_FINISH 上调用通用函数的补间。

mainContent3X = new Tween(MainContent3, "x", Strong.easeOut, MainContent3.x, 1750, 1, true);

我需要得到号码/姓名才能知道该怎么做。

我试过以下没有运气：

跟踪（事件.currentTarget.toString（））；跟踪（事件.currentTarget.name）；

在谷歌上找不到任何东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:20:52.527

如果要检索对目标对象的引用，可以这样做：

```
function motionFinish(e:TweenEvent):void{
    var tween : Tween = e.target  as Tween;
    var target : Object = tween.obj;
    //do nasty stuff with the tween's target
} 
```

请参阅：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)

# android - Android：如何将点击事件传播到 LinearLayout 孩子并更改其可绘制对象

> ID：10171009
> 
> 赞同：27
> 
> 时间：2012-04-16T08:40:47.627
> 
> 标签：android, onclick, android-linearlayout

我想创建一个类似于 ImageButton 的线性布局。

```
<LinearLayout
    android:id="@+id/container"
    style="?WidgetHomeIconContainer">            

    <ImageView
        android:id="@+id/icon"
        style="?WidgetHomeIcon" />

    <TextView
        android:id="@+id/title"
        style="?WidgetHomeLabel"             
        android:text="@string/title"
        android:textAppearance="?attr/TextHomeLabel" />
</LinearLayout> 
```

在 ImageView、TextView 和 LinearLayout 的样式中，我为所有状态设置了一个选择器。

现在：

*   当我单击 ImageView 时（我也使用 ImageButton 进行了尝试）-它的行为正确并且图像根据选择器 xml 进行了更改。
*   当我单击 LinearLayout - 单击线性布局，但 ImageView 和 TextView 不会改变它的可绘制/外观

所以我想做以下事情。当我单击父 LinearLayout 时，我需要将它的所有子项更改为按下状态。

我尝试将以下代码添加到 LinearLayout onClickListener 以传播点击：

```
@Override
public void onClick(View v)
{
    LinearLayout l = (LinearLayout) v;
    for(int i = 0; i < l.getChildCount(); i++)
    {
        l.getChildAt(i).setClickable(true);
        l.getChildAt(i).performClick();
    }
} 
```

但它仍然是一样的。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-16T08:59:42.110

放

```
android:duplicateParentState="true" 
```

in your ImageView and TextView..[then the views get its drawable state (focused, pressed, etc.) from its direct parent rather than from itself.](http://developer.android.com/reference/android/view/View.html#attr_android%3aduplicateParentState)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-05-27T18:14:20.743

Not only make for every child:

```
android:duplicateParentState="true" 
```

But also additionally:

```
android:clickable="false" 
```

This will prevent unexpected behaviour (or solution simply not working) if **clickable child views** are used.

[SO Source](https://stackoverflow.com/a/31578111/5719764)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T07:59:12.323

After having the same problem some months later, I found this solution:

```
private void setOnClickListeners() {
    super.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            onClick(v);
        }
    });
    for (int index = 0; index < super.getChildCount(); index++) {
        View view = super.getChildAt(index);
        view.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                onClick(v);
            }
        });
    }
}

protected void onClick(View v) {
    // something to do here...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-17T17:16:49.510

In my case, no one of the other solutions works!

I finally had to use `OnTouchListener` as explained [here](https://stackoverflow.com/a/50375336/2835520), capturing the event when the user clicks in the parent view, and removing all childs `OnClickListener`.

So the idea is, **delegate the click behavior to the parent, and notify the child** that is really clicked, if you want to propagate the event. *¡¡That's what we are looking for!!*

Then, we need to check which child has been clicked. You can find a reference [here](https://stackoverflow.com/a/50369796/2835520) to know how it´s done. But the idea is basiclly getting the area of the child, and asking for who contains the clicked coordinates, to perform his action *(or not)*.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-21T19:49:53.217

At first, my child view failed to get click from parent. After investigating, what I need to do to make it work are:

1.  remove click listener on child view
2.  adding click listener on parent view

So, I don't need to add these on every children.

```
android:duplicateParentState="true"
android:clickable="false" 
```

I only add `duplicateParentState` to one of my child view.

My child view is now listening to parent click event.

# java - 两个分隔符之间的子字符串

> ID：10171015
> 
> 赞同：2
> 
> 时间：2012-04-16T08:41:01.363
> 
> 标签：java, split, substring

我有一个字符串：“这是一个应该使用的 URL [http://www.google.com/MyDoc.pdf ”](http://www.google.com/MyDoc.pdf)

我只需要提取从 http 开始并以 pdf 结尾的 URL：http: [//www.google.com/MyDoc.pdf](http://www.google.com/MyDoc.pdf)

```
String sLeftDelimiter = "http://";
String[] tempURL = sValueFromAddAtt.split(sLeftDelimiter );
String sRequiredURL = sLeftDelimiter + tempURL[1]; 
```

这给了我“应该使用的http://www.google.com/MyDoc.pdf”的输出

在这方面需要帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T08:57:30.900

这类问题就是正则表达式的目的：

```
Pattern findUrl = Pattern.compile("\\bhttp.*?\\.pdf\\b");
Matcher matcher = findUrl.matcher("This is a URL http://www.google.com/MyDoc.pdf which should be used");
while (matcher.find()) {
  System.out.println(matcher.group());
} 
```

正则表达式解释：

*   `\b`在“http”之前有一个单词边界（即 xhttp 不匹配）
*   `http`字符串“http”（注意这也匹配“https”和“httpsomething”）
*   `.*?`任何字符 ( `.`) 任意次数 ( `*`)，但尽量使用最少的字符 ( `?`)
*   `\.pdf`文字字符串“.pdf”
*   `\b`在“.pdf”之后有一个单词边界（即 .pdfoo 不匹配）

如果您只想匹配 http 和 https，请尝试使用它而不是`http`在您的字符串中：

*   `https?\:`- 这匹配字符串 http，然后是可选的“s”（由`?`s 后的 s 表示），然后是冒号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:51:58.827

尝试这个

```
String StringName="This is a URL http://www.google.com/MyDoc.pdf which should be used";

StringName=StringName.substring(StringName.indexOf("http:"),StringName.indexOf("which")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T08:43:13.933

为什么不使用String 类的**startsWith("http://")**和**endsWith(".pdf")方法。**

两种方法都返回**布尔**值，如果两者都返回**true**，那么您的条件成功，否则您的条件失败。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:05:25.397

您可以`Regular Expression`在这里使用电源。首先你必须`Url`在原始字符串中找到然后删除其他部分。

以下代码显示了我的建议：

```
 String regex = "\\b(http|ftp|file)://[-a-zA-Z0-9+&@#/%?=~_|!:,.;]*[-a-zA-Z0-9+&@#/%=~_|]";
    String str = "This is a URL http://www.google.com/MyDoc.pdf which should be used";

    String[] splited = str.split(regex);

    for(String current_part : splited)
    {
        str = str.replace(current_part, "");
    }

    System.out.println(str); 
```

此片段代码可以检索具有任何模式的任何字符串中的任何 url。`https`您不能在上面的正则表达式中添加自定义协议，例如协议部分。

希望我的回答对你有帮助；）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-07T17:48:10.523

您可以将 String.replaceAll 与捕获组和反向引用一起使用，以获得非常简洁的解决方案：

```
String input = "This is a URL http://www.google.com/MyDoc.pdf which should be used";
System.out.println(input.replaceAll(".*(http.*?\\.pdf).*", "$1")); 
```

这是正则表达式的细分：[https ://regexr.com/3qmus](https://regexr.com/3qmus)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-28T23:40:53.363

```
public static String getStringBetweenStrings(String aString, String aPattern1, String aPattern2) {
    String ret = null;
    int pos1,pos2;

    pos1 = aString.indexOf(aPattern1) + aPattern1.length();
    pos2 = aString.indexOf(aPattern2);

    if ((pos1>0) && (pos2>0) && (pos2 > pos1)) {
        return aString.substring(pos1, pos2);
    }

    return ret;
} 
```

# c# - “无法使用已与其底层 RCW 分离的 COM 对象”？

> ID：10171017
> 
> 赞同：3
> 
> 时间：2012-04-16T08:41:09.130
> 
> 标签：c#

我正在做单元测试。

我的解决方案中有 2 个项目 1 是库项目，1 是测试项目。图书馆项目有一些 com 组件。测试项目是测试库项目中的功能。这些库函数正在使用这些 com 对象。

第一个单元测试成功执行，但是当我尝试按顺序执行 2 个单元测试时，在第二个单元测试中，当我尝试访问这些 com 对象时，我收到错误“无法使用已与其底层 RCW 分离的 COM 对象”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:54:30.640

这意味着有人使用[`Marshal.ReleaseComObject`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.releasecomobject.aspx)不正确，或者更糟糕的是，使用[`Marshal.FinalReleaseComObject`](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.finalreleasecomobject.aspx). 第一个单元测试通过这种相关的副作用影响第二个单元测试，可能是在拆卸方法中。解决此问题的第一步是准确找出导致*该*异常的对象/访问/位置。

发生这种情况是因为在已释放 COM 对象（COM ref-count 设置为 0）的 RCW 上调用方法，这意味着`ReleaseComObject`已调用太多次或`FinalReleaseComObject`根本没有调用。

如果您*拥有*一个 RCW 对象（已将其“带入 CLR”），并且它的生命周期已到，`ReleaseComObject`则可以（将变量设置`null`为也可以避免再次使用它）。使用`FinalReleaseComObject`通常*永远不会好*，因为它不可能正确地跟踪生命周期。诀窍是要记住，*单个 RCW 对象*表示COM 对象已“带入 CLR”并具有内部（非 COM）计数器的*一次或多次。*

在*许多情况下*，GC 将在其终结器运行时正确处理 RCW 清理。并且当时 RCW 不是强可达的，因此*无法*生成异常。*在需要严格控制*COM 生命周期的情况下，使用显式`ReleaseComObject`[仅] 是必需的/有用的（考虑 COM 对象的“共享” ）。在处理 Microsoft Office 产品的加载项开发时，这很重要:)*`Dispose`*

 *.NET 和 COM 互操作性中还有其他详细信息（在我的回答中）[：从 .NET 客户端释放 COM](https://stackoverflow.com/questions/9709141/net-and-com-interoperability-release-com-from-net-client/9709506#9709506)和一篇反文章[ReleaseComObject 被认为是危险的](http://blogs.msdn.com/b/visualstudio/archive/2010/03/01/marshal-releasecomobject-considered-dangerous.aspx)

快乐编码。*

# php - 如何使用 PHP(DOM) 将嵌套标签作为字符串而不是实际的嵌套标签？

> ID：10171019
> 
> 赞同：0
> 
> 时间：2012-04-16T08:41:09.567
> 
> 标签：php, dom

考虑xml

```
<data>
 <node1>
        some text some text <nested-node>nest node content</nested-node> some text
 </node1>
</data> 
```

想要访问`<node1>`标签（我可以做），但我想获得如下内容......

```
some text some text &lt;nested-node&gt;nest node content &lt;/nested-node&gt; 
some text 
```

请帮助我如何实现这一目标？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:55:12.263

问题是您顶部的 XML 格式不正确。

您不能在文本序列中使用标签。解析器删除这些元素。

[XML 转义](http://xmmssc-www.star.le.ac.uk/SAS/xmmsas_20070308_1802/doc/param/node24.html)

[转义字符列表](https://stackoverflow.com/questions/1091945/where-can-i-get-a-list-of-the-xml-document-escape-characters)

有了这个：

```
$xml = new SimpleXMLElement(file_get_contents('xmltest.xml'));
var_dump($xml->node1); 
```

您可以读取节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:51:24.180

我很好奇这个问题。真的不可能做OP想要的吗？@Stony 指出，格式错误的 XML 使这成为不可能，如果 XML 函数不能以 OP 想要的方式处理格式错误的 XML，我不会感到惊讶。

这是 XML 中嵌套元素的示例：[http ://www.featureblend.com/xml-nesting.html](http://www.featureblend.com/xml-nesting.html)

如果你像这样形成你的 XML：

```
<data>
  <master_node>
    <nested1>First nested node text.</nested1>
    <nested2>Second nested node text.</nested2>
    <nested3>Third nested node text.</nested3>
  </master_node>
</data> 
```

您可以获得所有文本内容：

```
$xml = new SimpleXMLElement(file_get_contents('xmltest.xml'));
var_dump($xml->master_node); 
```

也许与 JavaScript 或纯 PHP 类似的东西是可能的。只需将文件加载到变量中并使用正则表达式或字符串搜索函数对其进行解析。用正则表达式解析 XML，是的，我知道，这就像用正则表达式解析 HTML，一个很大的禁忌......

# unix - Unix - 将本地 IP 关联到 pts？

> ID：10171020
> 
> 赞同：0
> 
> 时间：2012-04-16T08:41:26.360
> 
> 标签：unix, ip, pts

3 ppl (ABC) 使用相同的用户名 (foobar) 通过 SSH（putty 或 Unix 控制台）连接到本地服务器 (S1)。有没有办法将他们自己的 IP 与他们创建的 pts 相关联？

例如，一个命令女巫显示：

```
S1:/root# ls -l /dev/pts
crw------- 1 foobar   tty  136, 0 16 apr 10:34 0 <-> 192.168.0.A
crw------- 1 foobar   tty  136, 2 16 apr 10:22 2 <-> 192.168.0.B
crw------- 1 foobar   tty  136, 3 16 apr 09:26 3 <-> 192.168.0.A
crw------- 1 foobar   tty  136, 5 16 apr 09:26 5 <-> 192.168.0.C 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:29:17.760

“who”命令显示 pts-s 和主机名之间的关联（如果没有主机名，则为 ip-s）。您可以使用“主机”命令将主机名更改为 IP（如果这是您的要求）。

# sql - Visual Basic .Net - 数据库查询

> ID：10171021
> 
> 赞同：0
> 
> 时间：2012-04-16T08:41:28.240
> 
> 标签：sql, database, vb.net

是否可以使用任何操作在数据库中创建新表。我设计的应用程序是基于 DateTimePicker 的。当用户第一次选择三月或四月时，是否可以创建一个表“三月”、“四月”等等。这样特定月份的记录将在该特定表中更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:47:49.627

使用类似的查询

```
SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = 'TheSchema' AND  TABLE_NAME = 'TheTable' 
```

查找表是否存在。如果它不存在，您可以触发类似于以下内容的查询：

```
CREATE TABLE "table_name"
("column 1" "data_type_for_column_1",
"column 2" "data_type_for_column_2",
... ) 
```

用于创建表。然后你知道你创建了哪个表。只需触发相关`INSERT`查询。

请注意，以上所有`SQL`查询都需要使用`SqlCommand`object 触发。

# c++ - 从另一个窗体 C++/CLI 引用 TabControl

> ID：10171023
> 
> 赞同：0
> 
> 时间：2012-04-16T08:41:54.813
> 
> 标签：c++, winforms, reference, c++-cli

我正在尝试将此选项卡式浏览器从 Visual Basic 转换为 C++。我正在尝试从 Form1.h 中引用选项卡控件。这是 Form1.h 上的代码：

```
 private: System::Void Form1_Load(System::Object^  sender, System::EventArgs^  e) {
             String^ title = String::Concat("TabPage ",(tabControl1->TabCount + 1).ToString());
             tab^ newtab = gcnew tab;
             newtab->Show();
             newtab->TopLevel = false;
             newtab->Dock = System::Windows::Forms::DockStyle::Fill;
             TabPage^ myTabPage = gcnew TabPage(title);
             myTabPage->Controls->Add(newtab);
             tabControl1->TabPages->Add(myTabPage);

         } 
```

试图创建另一个选项卡的第二个表单上的代码是这样的：

```
private: System::Void newTabToolStripMenuItem_Click(System::Object^  sender, System::EventArgs^  e) {

         tab^ newtab = gcnew tab;
         newtab->Show();
         newtab->TopLevel = false;
         newtab->Dock = System::Windows::Forms::DockStyle::Fill;
         TabPage^ myTabPage = gcnew TabPage();
         myTabPage->Controls->Add(newtab);
         tabControl1->TabPages->Add(myTabPage);
     } 
```

在 Visual Basic 中，只需添加 Form1。像这样开始......：

```
//Original
tabControl1.TabPages.Add(myTabPage);
//New
Form1.tabControl1.TabPages.Add(myTabPage); 
```

我怎么能在 C++ 中做同样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T19:27:29.427

Visual Basic 提供项目中每个类的默认实例。当您说 时`Form1.tabControl1`，您实际上是在获取 Form1 的特定全局实例，并访问其上的 tabControl1 字段。

添加一种将 Form1 的实例发送到第二个表单的方法，并使用它代替`Form1`. 像将 Form1 的实例传递给其构造函数中的第二个表单这样简单的事情可能会成功。

# iphone - 如何在目标 c 中使用 WCF

> ID：10171024
> 
> 赞同：0
> 
> 时间：2012-04-16T08:41:54.887
> 
> 标签：iphone, objective-c, wcf, ios5, wsdl

我正在尝试通过目标 c 使用 WCF“/www.xxxxx.net/xxxx.svc”，并按照以下链接 [在 iPhone 上使用 Objective-C 使用 WCF Web 服务中](https://stackoverflow.com/questions/982622/consume-wcf-web-service-using-objective-c-on-iphone/988884#988884)的步骤进行操作，

我收到以下错误

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Body>
    <s:Fault>
      <faultcode xmlns:a="http://schemas.microsoft.com/ws/2005/05/addressing/none">a:ActionNotSupported</faultcode>
      <faultstring xml:lang="en-US">The message with Action 'http://tempuri.org/IService1/GetMembers' cannot be processed at the receiver, due to a ContractFilter mismatch at the EndpointDispatcher. This may be because of either a contract mismatch (mismatched Actions between sender and receiver) or a binding/security mismatch between the sender and the receiver.  Check that sender and receiver have the same contract and the same binding (including security requirements, e.g. Message, Transport, None).</faultstring>
    </s:Fault>
  </s:Body>
</s:Envelope> 
```

请在这方面帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:00:44.233

不清楚您是否按原样复制 ObjectiveC 代码。问题可能是您引用的 SO 答案中的代码硬编码了一个*无效*字符串，该字符串是要发送到 WCF 服务的肥皂 XML。如果您按原样复制代码，则需要发送对您的服务有效的soap XML。

如果您为 WCF 服务捕获了 soap XML 并且它不工作，那么问题仍然是格式不正确的 soap 消息。在任何一种情况下，我都会首先从成功调用 WCF 服务中捕获消息，以确定正确的 soap XML 应该是什么样子，并将其与您正在创建的 soap XML 进行比较，以了解问题所在。

如果可能，请考虑将 webHttpBinding 添加到您的 WCF 服务，以便您可以为您的消息使用更简单的 XML。查看 webHttpBinding 上的这[四个部分的演练](http://www.robbagby.com/rest/rest-in-wcf-part-i-rest-overview/)，了解它需要什么。

# regex - 正则表达式 Perl 期间报价

> ID：10171027
> 
> 赞同：2
> 
> 时间：2012-04-16T08:42:04.313
> 
> 标签：regex, perl, match, period

在 Perl 中使用正则表达式尝试 N+1 次后：我有以下问题：我需要检索这个：

```
 232310..1.3      3213   2.4  "$250 For My jacket" (2012) 
```

我正在尝试通过以下方式检索它：

```
if ( $line=~m/^\s+(\d+|\.+)\s+(\d+)\s+(\d+|\.+)\s+(\^"&(\w*|\s*|\D*)"$)\s*\((\d+)\s*/){
        $ID=$1;
        $Amount=$2;
        $Size=$3;
        $Item=$4;
        $Year=$5; 
```

这没用

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T08:44:40.783

`(\d+|\.+)`表示一个或多个数字或一个或多个句点。但是你想要的是`([\d.]+)`这意味着一个或多个数字或句点。

捕获大小和项目也存在类似的问题。此外，您错误地使用了开始锚点 ( `^`) 和结束锚点 ( `$`)。

你可以试试：

```
^\s+([\d.]+)\s+(\d+)\s+([\d.]+)\s+"([^"]+)"\s*\((\d+)\s* 
```

[看见](http://www.rubular.com/r/cShJtqDaag)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-17T12:35:32.343

如果引用了所有第 4 行条目，则 codaddict 的解决方案很好。另一种方法是使用 CSV 解析器（您可能需要先从 CPAN 安装），例如：

```
#!/usr/bin/env perl

use strict;
use warnings;

use Text::CSV_XS;

my $csvr = new Text::CSV_XS({
  sep_char => ' ',
  eol => $/
});

my $csvw = new Text::CSV_XS({
  sep_char => ',',
  eol => $/
});

$csvw->print( *STDOUT, [ qw(ID Amount Size Item Year) ]);

while (my $row = $csvr->getline(*ARGV))
{
  $csvw->print( *STDOUT, [ grep { /./ } @$row ] );
} 
```

}

当给定输入时

```
232310..1.3      3213   2.4  "$250 For My jacket" (2012) 
```

这将产生：

```
232310..1.3,3213,2.4,"$250 For My jacket",(2012) 
```

进一步的步骤是使用`DBD::CSV`，它允许您对输入文件执行 SQL 查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-17T12:01:42.713

与 codaddict 的修复相同，但展示了如何使正则表达式更具可读性 - 'x' 选项对于更长的正则表达式和多个捕获变量非常有用。

（我会将此作为评论发布，但对于有限的格式选项）

```
my ( $id, $amount, $size, $item, $year ) = $line =~ m{
    ^
    \s+
    ([\d.]+)        # field 1, e.g. 232310..1.3
    \s+
    (\d+)           # field 2, e.g. 3213
    \s+
    ([\d.]+)        # field 3, e.g. 2.4
    \s+
    "([^"]+)"       # field 4, e.g. "$250 For My jacket"
    \s*
    \((\d+)\)       # field 5, e.g. (2012)
    \s*
}x or die "Line does not match!";  # always check that a regex actually succeeded! 
```

# mercurial - 阻止访问网络服务器中的某些文件 - mercurial/ssh

> ID：10171030
> 
> 赞同：0
> 
> 时间：2012-04-16T08:42:22.827
> 
> 标签：mercurial, ssh, mercurial-server

我有一个使用 mercurial repo 维护代码的 centos 服务器。为了允许新人向 mercurial 提交代码，我创建了一个新用户，将他们添加到 webdev 组，他们可以通过以下方式推送/拉取代码

```
hg pull ssh://name@server.com. 
```

但是，有些文件（配置文件）我不希望新用户访问。Mercurial 已被要求不要跟踪这些文件，因此访问它们的唯一方法是通过 ssh 进入系统并查看文件。我不希望新用户能够做到这一点。

本质上，我希望我的新开发人员仅通过 hg 拉/推文件，并禁止 ssh-ing 直接进入系统。最好的方法是什么？我可以在不提供对文件的 ssh 访问权限的情况下提供对 repo 的 hg 访问权限吗？

（或者我解决问题的方法有缺陷？）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:55:57.883

`command`通过利用文件中可用的选项，这可以很容易地完成`.ssh\authorized_keys`。当您在该文件中授予他们的密钥访问权限时，您可以在他们的密钥前面添加一个“command=....”参数，这是他们可以运行的唯一命令。

Mercurial 附带了一个方便的脚本来执行此操作。里面有说明：

[https://www.mercurial-scm.org/repo/hg/file/tip/contrib/hg-ssh](https://www.mercurial-scm.org/repo/hg/file/tip/contrib/hg-ssh)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T11:16:19.647

就授权层而言（类似于[Git 的 Gitolite](http://sitaramc.github.com/gitolite/)），您拥有**[mercurial-server](http://www.lshift.net/mercurial-server.html)**（不要与[Mercurial 轻量级 Web 服务器`hgserve`](https://www.mercurial-scm.org/wiki/hgserve)混淆）

> `mercurial-server`让您的开发人员使用 SSH 公钥身份验证对集中式 Mercurial 存储库进行远程读/写访问；它提供了方便和细粒度的密钥管理和访问控制。

在此处查看其[存储库](http://hg.opensource.lshift.net/mercurial-server/summary)。

它基于与[Ry4an](https://stackoverflow.com/users/8992/ry4an)在[他的回答](https://stackoverflow.com/a/10178362/6309)中提到的脚本相同的[SSH 强制命令机制](http://oreilly.com/catalog/sshtdg/chapter/ch08.html#22858)（他的回答 +1，因为它已经与 Mercurial 打包）。 请参阅.
[`refreshauth.py`](http://hg.opensource.lshift.net/mercurial-server/file/b271be84da5e/src/mercurialserver/refreshauth.py#l14)

# mysql - SQL查询：将时间差异从2个不同的表插入到第三个表

> ID：10171032
> 
> 赞同：-2
> 
> 时间：2012-04-16T08:42:47.880
> 
> 标签：mysql, sql, database, insert-update

```
INSERT INTO order_time( link, time )
SELECT link, CAST
(
( 
(
   SELECT FIRST (t.time AS dtime)
   FROM delivery_time t, quantity q
   WHERE t.link = q.link
) - 
(
    SELECT FIRST (orderTime)
    FROM delivery_time t, menu m, quantity q
    WHERE t.link = q.link
    AND t.menuId = m.menuId
)
) AS time( 0 )
)
FROM quantity where 1 
```

我收到错误消息。

数量包括（链接，数量）；链接是唯一的和 int

order_time：（链接，时间）；链接是唯一的和 int，时间是数据类型时间

交付时间：（链接，菜单ID，时间）；对于 menuId(int)，有不同的时间（数据类型时间），对于 menuId 的一组不同的时间，有链接；所以 menuId 和时间组合是独一无二的：

```
menuId    time    link
1       12:00:00   1
1       12:10:00   1
1       14:00:00   2
1       14:10:00   2
1       14:20:00   2
2       12:00:00   3
2       12:10:00   3
2       12:20:00   3
2       14:00:00   4
2       14:10:00   4
2       15:00:00   5 
```

& menu: (menuId, orderTime); menuId 是唯一的，orderTime 是数据类型时间。

我的需要是：创建一个表 order_time (link,time) ，其中链接是唯一的并且取自数量。这里的时间是对应于delivery_time和orderTime中该链接的第一个时间实例与菜单表的时间差，该菜单表对应于delivery_time表中的menuId。

```
ERROR:MySQL said: Documentation
#1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(t.time AS dtime)
   FROM delivery_time t, quantity q
   WHERE t.link = q.link' at line 6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:10:25.397

尝试这个：

```
INSERT INTO order_time( link, time )
SELECT link, CAST
    (
        ( 
            (
            SELECT MIN(t.time)
            FROM delivery_time t
                INNER JOIN quantity q ON
                    t.link = q.link
            ) - 
            (
            SELECT MIN(orderTime)
            FROM delivery_time t
                INNER JOIN menu m ON
                    t.menuId = m.menuId
                INNER JOIN quantity q ON
                    t.link = q.link
            )
        ) AS time(0)
    )
FROM quantity
where 1 = 1 
```

# jquery - jQuery 委托和加载事件

> ID：10171040
> 
> 赞同：0
> 
> 时间：2012-04-16T08:43:55.433
> 
> 标签：jquery, events, delegates

我知道您不能将 load 事件与委托函数一起使用，但是我想知道是否有黑客可以产生类似的效果？我想使用“data-role='table'”属性来识别所有需要 AJAX 加载的表并初始化请求。

```
<script type="text/javascript">
$(document).delegate( "table[data-role='table']", "load", function(e) {
    //load AJAX Table
});
</script>

<table data-role="table" class="table-striped">
    ...
</table> 
```

该代码也可以在[jsfiddle上找到](http://jsfiddle.net/leviputna/hAzGT/7/)

**注意：**我需要使用委托，因为可能会在运行时添加其他表（在 $(document).ready 之后）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:19:01.483

只是我脑海中的一个建议，但是像这样的东西呢：

```
$(function() { // document.ready shortcut
    $("[data-role=table]").each(function(x, item) { // for each element which has this attribute.
         // identify which actual table this is (using .index() perhaps, or by id or classname)
         // call ajax to get stuff
         // load it into the relevant place
    }); 
} 
```

更多的是一个概念，而不是一个可行的解决方案。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:37:21.727

Webkit 会抛出一些 DOM 突变事件，但我认为这些甚至已经贬值了。

它现在有点老了，但 .livequery (http://docs.jquery.com/Plugins/livequery) 仍然是我所知道的最佳选择。您可以使用：

```
$("[data-roll=table]").livequery(function() {
     ...
}); 
```

每当将与您的选择器匹配的新元素添加到页面时，都应该触发该回调。

# c# - ASP.NET Response.Write 在两个不同的页面上

> ID：10171041
> 
> 赞同：0
> 
> 时间：2012-04-16T08:44:03.957
> 
> 标签：c#, asp.net, html

您好想知道如何在来自不同服务器的页面上显示某个页面的响应写入。

前任。

```
 Server1.HelloWorld.aspx has Response.Write("HELLO WORLD");

    Server2.Default.aspx gets the response from Page1.aspx 
and display it without using server sided code.. 
```

这可能吗，因为我知道这对于图像是可能的。

预先感谢您的帮助！

更新：我只需要来自页面的文本响应......类似于“DONE”“PENDING”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:57:04.587

根据有多少内容和什么样的内容，我会说只使用 AJAX 或 iframe。这样您就不需要任何服务器端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:57:14.740

您可以使用 AJAX 对`GET`需要从中下载响应的相关页面发出请求，这是使用 jQuery 的基本示例：

```
$.ajax({
    url: "http://server/HelloWorld.aspx"
    success: function(response) {
        alert(response);
    }
}); 
```

查看[jQuery.get()](http://api.jquery.com/jQuery.get/)以获得更多选项，例如错误处理等。

# javascript - django-cms 菜单 url 不起作用

> ID：10171042
> 
> 赞同：0
> 
> 时间：2012-04-16T08:44:12.170
> 
> 标签：javascript, django, menu, django-cms

我已经安装了 django-cms。我做了一个可折叠的菜单。有一些类别和子类别（孩子等）..这里没问题。

但是当我点击一个主要类别时，虽然它的 URL 似乎正确，但它没有转到 URL。没有子/子类别的类别正确打开并转到 URL。但是如果一个类别有子类别，当我点击类别名称，只是它下降并且出现子/子类别标题。

我认为这可能与 Javascript 代码有关（可能与 onclick 有关）。但这可能是 django-cms 的某些设置，因此我想问一下。

有没有人有同样的问题？如果有人可以提供帮助，我会很高兴。

一些细节使它更清楚：

现在我有一个左侧菜单，看起来像：

*   家
*   宠物

*   小狗

*   特里

*   猫

*   配件

*   衣领
*   圆角

*   接触

现在我有了这个。当我单击联系人时，我会转到联系人的 URL/页面。这里没问题。但是当我点击“宠物”时，只有猫、狗和其他子类别会下降，我无法进入宠物页面/网址，但我也有一个宠物页面，当鼠标在其上时，其 URL 似乎正确。

我想做的是：当我点击宠物时，我想去宠物页面/URL，因为它在我去的页面上有一些子类别，我想查看它的子类别。我的意思是当我点击并转到宠物页面时（我现在不能）我还想看到子类别（狗，猫，）在宠物页面的菜单栏上像上面一样。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:46:16.567

不允许评论，所以我写一个答案......

这可能是一个js问题。如果有子页面，Django-cms 还会链接到顶级页面。（直到您添加重定向）。

您是否尝试右键单击“宠物”链接并选择“在新选项卡/窗口中打开链接”？

如果这没有帮助 - 你的 js 是什么样的？

# php - php 编码被加密

> ID：10171045
> 
> 赞同：-1
> 
> 时间：2012-04-16T08:44:23.890
> 
> 标签：php, html, dreamweaver

最近被委托接手一个php网站的程序更新任务。有趣的是，当我用dreamweaver 和Notepad++ 打开.php 文件时，我意识到代码被加密了，就像md5 一样。

实际上，这是如何做到的，同时又不影响它们在 Apache 环境中的功能呢？有什么方法可以让我们将代码恢复为正常的 php 和 html 演示文稿？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:19:43.920

大概是这样的：

```
eval(base64_decode('gobbledigoog...')); 
```

在这种情况下，只需替换`eval`by `echo`：

```
echo base64_decode('gobbledigoog...'); 
```

这很可能会导致 more `eval('gobbledigoog')`，因为代码可能会被递归编码多次。在这种情况下，请继续执行上述操作，直到获得真正的代码。

玩得开心。

# data-binding - 重新绑定模型中的属性，emberjs

> ID：10171046
> 
> 赞同：1
> 
> 时间：2012-04-16T08:44:26.447
> 
> 标签：data-binding, ember.js

我刚刚开始使用 ember.js。我的应用程序中有两个模型。一个保存数据，一个保存用户编辑的数据。我使用单向绑定来绑定它们。

```
App.ViewModel = Ember.Object.create({
  title:'title',
  text:'text',
)};

App.EditModel = Ember.Object.create({
  titleBinding: Ember.Binding.oneWay('App.ViewModel.title'),
  textBinding: Ember.Binding.oneWay('App.ViewModel.text'),
)}; 
```

我让用户在 EditModel 模型中编辑数据。但是，如果用户放弃更改，我希望能够将值设置回编辑前的状态，即。ViewModel 中的值。

有没有办法重新绑定这些属性？或者手动增加 ViewModel 中属性的更改事件，以便更新 EditModel？或任何其他方法来解决我的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:12:57.960

您可以创建一个自定义 Mixin 来处理模型的重置，请参阅[http://jsfiddle.net/pangratz666/CjB4S/](http://jsfiddle.net/pangratz666/CjB4S/)

```
App.Editable = Ember.Mixin.create({
    startEditing: function() {
        var propertyNames = this.get('propertyNames');
        var props = this.getProperties.apply(this, propertyNames);
        this.set('origProps', props);
    },
    reset: function() {
        var props = this.get('origProps');
        Ember.setProperties(this, props);
    }
});

App.myModel = Ember.Object.create(App.Editable, {
    propertyNames: ['title', 'text'],
    title: 'le title',
    text: 'le text'
}); 
```

稍后在视图中，`startEditing`当您想要拍摄当前值的快照以及`reset`想要重置为值的先前快照时，您只需调用 。

# android - 为每个企业部署具有不同配置的 Android 应用程序

> ID：10171049
> 
> 赞同：0
> 
> 时间：2012-04-16T08:44:41.923
> 
> 标签：android, configuration, installation, enterprise

我正在构建一个 Android 应用程序来配合我公司的服务器。服务器用于企业，驻留在客户内部网络中。每个客户显然都有分配给服务器的不同 IP 地址。这是一个现成的产品，这意味着我们不会为每个客户构建它。客户端需要服务器 IP 才能连接并开始工作。

目前客户端向用户询问服务器IP，但用户通常不知道。

我正在寻找一种简单的方法来为每个客户配置不同的服务器 IP 地址的客户端。

我们正在从客户内部 Web 服务器（没有市场）部署客户端。有没有办法让客户端知道它是从哪里下载的？比我能用这个IP吗？有没有办法让客户端知道用于启动安装过程的 apk 名称？比我可以重命名 apk 名称以包含服务器 IP。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:01:24.413

从您的问题来看，客户似乎将始终在其本地网络上使用该应用程序。在我的脑海中，你可以：

*   使用 mDNS 查找您的服务器。
*   要求您的客户添加 DNS 条目，以便`yourappname.customer.com`解析到正确的地址。通过 DHCP 的域查找，您应该能够解析`yourappname`并附加正确的域。
*   要求您的客户在他们的 DHCP 响应中添加一个字段（可能比客户想要的更多的工作）。
*   访问您的网站，让它查看它来自的 IP 地址并确定它是哪个客户——这需要您知道客户服务器的 IP 地址。

# javascript - 尝试调试 JavaScript 和 jQuery - 去哪里用这个......？

> ID：10171056
> 
> 赞同：1
> 
> 时间：2012-04-16T08:45:24.620
> 
> 标签：javascript, jquery, debugging, google-chrome, google-chrome-devtools

我们公司的网站有一个 JavaScript 问题，我正在拼命尝试解决，但真的很挣扎。我的 JS 技能足以用 jQuery 之类的东西构建网站，但我对调试并不那么精通 - 所以非常感谢任何帮助。

页面上的所有 JS 组件（例如 jQuery Datepicker）看似随机地停止工作。在错误控制台打开的情况下强制重新加载页面时，这些错误大约有 60% 的时间发生 - 它似乎没有任何模式。一旦发生这种情况，修复站点的唯一方法是清除缓存并重新加载。

控制台输出以下内容：

```
Uncaught TypeError: Object #<Object> has no method 'each'
Uncaught TypeError: Object #<Object> has no method 'not'
Uncaught TypeError: Object #<Object> has no method 'each' 
```

**然而**：这只是一个例子。其他时候我会得到完全不同的错误。例如，提交这个问题几分钟后，我又试了一次，得到了这个：

```
Uncaught TypeError: Cannot call method 'apply' of undefined 
```

再次从 jquery.min.js 抛出 - 打印精美，第 1453 行（第三行向下）：

```
 if (g.call(k) === "[object Array]")
     if (!u)
         e.push.apply(e, k); 
```

**我将 Chrome 设置为中断所有未处理的异常**，这是它捕获的另一个异常 - 在缩小的 jQuery 库的第 3 行。下面显示的是漂亮的印刷版本：

```
try {
    b.call(c.documentElement, "[test!='']:sizzle")
    } catch (f) {
        e = !0
    } 
```

实际的错误行开始`b.call[...]`。这适用于 jquery.min.js 的第 1904 行。

*   我正在使用最新的 jQuery
*   这只是最近才开始发生 - 在没有改变之后！
*   错误看似随机发生
*   通常（但有时），*我的*脚本不会抛出任何错误 - 例如 script.js - 通常它们是从缩小的库中抛出的。每次都不同。
*   这似乎发生在所有浏览器中，但在 Chrome 中比在 Firefox 中更常见

任何想法从哪里开始？不幸的是，这是一个内部公司网站，因此提供访问权限很棘手，因为我们处理整个网站的敏感数据。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:55:48.373

在我看来，您的页面很大，并且浏览器尝试在 DOM 完全加载之前执行 js 代码……可能是因为您使用的是内联 javascript 代码。

这可以解释随机错误以及强制重新加载时出现错误的事实。

我建议您将 JS[代码放在 dom 就绪事件中](http://api.jquery.com/ready/)，以便可以毫无问题地执行 js 代码。

希望这可以帮助 ：）

# jquery - 自动调整内容大小 - 一页网站

> ID：10171058
> 
> 赞同：2
> 
> 时间：2012-04-16T08:45:27.763
> 
> 标签：jquery, browser, resize

我最近遇到了这些网站：http: [//community.saucony.com/kinvara3/](http://community.saucony.com/kinvara3/)和[http://www.tokiolab.it](http://www.tokiolab.it)

如果您查看网站，它们都是一页，但内容的缩放就像它们都是单页一样。

我认为内容如何自动适应浏览器的分辨率（调整大小时）很好，即使它是一个单页网站。

这是一种新技术吗？编写这样的插件很难还是它们已经存在？

希望可以有人帮帮我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T14:33:56.580

让网站适应各种屏幕尺寸，就像 Dominic 节目一样，是一整本书，而不是快速解决方案。

听起来您只是希望有多个堆叠的部分，每个部分都是屏幕的高度。是对的吗？

仅此一点并不难：

设置 body 和 html 元素的宽度和高度以最大化页面。我知道，你也必须设置 html 元素很奇怪，但这就是生活。

```
html, body {
    width:100%;
    height:100%;
} 
```

在您的标记中定义您的部分。

```
<section>...</section>
<section>...</section>
<section>...</section> 
```

并调整您的部分大小以适应加载和调整页面大小。就像是：

```
function draw() {
    var width = $(document).width();
    var height = $(document).height();

    $("section").width(width).height(height);
}

$(document).resize(draw);
$(draw); 
```

如果您还需要滚动到哪些部分，定义什么是固定的，什么是随页面滚动的，进入和退出动画等......这变得更加复杂。我不知道有一个简单的插件可以为您完成。最接近的可能是 impress.js (http://bartaz.github.com/impress.js/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:51:53.507

您正在查看的原则是响应式设计，有关它的文章很多。

一本好书是[http://www.abookapart.com/products/responsive-web-design](http://www.abookapart.com/products/responsive-web-design)

文章：[http ://www.alistapart.com/articles/responsive-web-design/](http://www.alistapart.com/articles/responsive-web-design/)

此外，如果您想改造某些功能，您可以使用媒体查询

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T08:53:20.943

正如 Val 所说，与滚动效果有关，而不是页面大小。

这两个例子看起来都像 Scrollorama 页面 (http://johnpolacek.github.com/scrollorama/)

另一个不错的是[http://www.nikebetterworld.com/product](http://www.nikebetterworld.com/product)。

# xcode4.3 - lldb奇怪的错误

> ID：10171065
> 
> 赞同：21
> 
> 时间：2012-04-16T08:45:58.847
> 
> 标签：xcode4.3, lldb

我正在使用 xCode 4.3.1，一旦我想使用 lldb，我几乎没有得到任何调试信息，而是得到了以下结果，它是一个简单的 NSMutableDictionary 属性：

```
(lldb) po _keywordCache
error: instance method 'delegate' has incompatible result types in different translation units ('objc_object *' vs. 'id')
error: instance method 'delegate' has incompatible result types in different translation units ('objc_object *' vs. 'id')
note: instance method 'delegate' also declared here
note: declared here with type 'id'
note: instance method 'delegate' also declared here
note: declared here with type 'id'
error: 2 errors parsing expression 
```

切换到 gdb 总能得到正确的结果。
任何人的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-19T15:12:05.730

在我的例子中，问题的根源是这里有问题的属性，“委托”在实例变量和属性声明中被声明为一个稍微不同的类型。在我的例子中，实例变量类型是`id`，属性声明是`id<SomeProtocol>`.

我将把它作为一个错误报告给 Apple，因为它不应该导致检查变量失败。解决方法是确保实例变量和属性声明将“委托”描述为完全相同的类型。希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-23T18:14:13.790

我知道这已经很晚了，但是在 Xcode 6 上遇到了这个问题，需要执行一个 Clean Build Folder（在选择 clean 时按住选项）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-03T12:26:05.960

从昨天开始，我在 Xcode 7.3 (7D1002) 中遇到了同样的问题。在它工作好几个星期之前。在我的情况下，现在甚至一个简单的“po someString”也不起作用：
    错误：实例方法'URLEncodedString'在不同的翻译单元中具有不兼容的结果类型（'void *'与'NSString *'）
    错误：实例方法'URLDecodedString'在不同的翻译单元中具有不兼容的结果类型（'void *' vs. 'NSString *'）
    注意：实例方法 'URLEncodedString' 也在此处声明
    注意：实例方法 'URLDecodedString' 也在此处声明
    错误：解析表达式时出现 2 个错误

我尝试过的事情：

*   退出并重新启动 Xcode7 和模拟器（它们都运行了好几天没有重新启动）
*   Xcode:Product->Clean and (hold the option key) Clean build folder
*   删除 ~/Library/Preferences/com.apple.dt.Xcode.plist
*   删除~/Library/Developer/Xcode/DerivedData/*
*   删除~/Library/Developer/Xcode/iOS DeviceSupport/*
*   安装最新的 OS X El Capitan 更新 10.11.4

但这一切都无济于事。在调试器中仍然不能 p 和 po 字符串。

我的 Mac 上还有一个旧的 Xcode 6（在安装 Xcode 7 之前重命名并收起，然后放回 /Applications）。这仍然有效，我可以在调试器中输入“po someString”并将字符串打印到调试日志中。但是 Xcode 7 没有……</p>

我在这里找到了局部变量的解决方法（即使这个问题不同）：http:
[//lists.apple.com/archives/xcode-users/2014/May/msg00088.html](http://lists.apple.com/archives/xcode-users/2014/May/msg00088.html)
ctrl-click on variable in local variables list and选择“打印描述”<br> 打印一些字符串的描述：
    ipad

这有一点帮助，但不能打印更复杂的命令。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-02T20:51:53.167

我也有这个错误，但对我来说，代码实际上并没有错。我所做的只是单击控制台中“切换全局断点状态”按钮右侧的按钮。

![它是蓝色箭头形状的按钮。](../Images/3f11703f7b1d475a10ac04f13871f555.png)
它是蓝色的箭头形按钮。

# cookies - 不存在路径的 Cookie 适合本地存储吗？

> ID：10171066
> 
> 赞同：2
> 
> 时间：2012-04-16T08:46:00.547
> 
> 标签：cookies

在 RIA 中，您通常希望在选项卡和重新加载之间保持一些简单的状态，但从不将其发送到服务器。仍然存在 IE7（不支持本地存储）—— 不存在路径的 cookie 怎么样？它们可以通过 JavaScript 访问，因为它们位于正确的域中，但除非我们使用它的路径进行调用，否则它们永远不会通过网络发送。

有什么注意事项吗？这样的 cookie 应该可以从客户端和服务器上设置，对吧？

（我发现 ppl 询问本地存储与 cookie，其中 cookie 的主要缺点是它们被发送到服务器——“您通过发送每个 HTTP 标头中的所有数据来浪费带宽。”[本地存储与 Cookie](https://stackoverflow.com/questions/3220660/local-storage-vs-cookies)）

# unix - unix 中的文件创建时间

> ID：10171069
> 
> 赞同：3
> 
> 时间：2012-04-16T08:46:07.350
> 
> 标签：unix

anybvody 可以告诉我为什么 unix 不存储文件创建时间吗？它存储修改时间，更改时间和访问时间而不是创建时间，对它来说是一个很大的负担吗？有什么具体原因吗？

还是通过使用某种语言（任何编程语言）和一些系统调用，我们可以如何获得文件创建时间？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:58:34.070

我相信这样的信息是 inode 存储的责任，因此是文件系统本身的限制。快速搜索一下，发现 ext4 文件系统在其 inode 中为该文件属性添加了存储。

[ext4 时间戳](http://computer-forensics.sans.org/blog/2011/03/14/digital-forensics-understanding-ext4-part-2-timestamps)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T10:13:12.897

Unix 不存储创建时间的主要原因是这个信息是有争议的，因为对于文件创建日期应该设置什么没有标准定义。

有些人希望这个创建时间代表数据的创建时间（例如：拍摄 jpeg 照片），因此在从备份复制或恢复文件时保留。另一方面，其他一些人更喜欢这个创建时间是创建文件系统对象（例如：inode）的时间。

前者完成后，通常出现在文件中（例如：EXIF）。

后者是最近的文件系统提供的：

*   UFS2 / st_birthtime
*   ZFS/crtime
*   ext4/crtime
*   btrfs / 时间
*   高频+ / ?

请注意，没有协议命名用于存储此创建时间的字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:12:49.507

正如[WhiteboardDev](https://stackoverflow.com/a/10171211/2998)所指出的，许多现代文件系统*确实*存储了文件创建时间，但它不是标准的，因此访问细节的方法会有所不同。

至于它的具体原因，基本上是历史原因。在 70 年代首次定义这些 API 时，存储太多元数据确实*是一种负担。*（值得注意的是，当前的文件系统并不总是更新“最后访问时间”，因为*那*是负担......）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T09:13:06.193

stat 将返回修改更改 st_ctime 一旦文件被修改或它的所有者更改它的出处更改，所以所有的赌注都在内容上 dos/nt 在这方面是不可靠的，因为你可以完全丢弃文件，在命令中将其全部重写shell 和创建时间**不会改变**

与 unix 中的文件关联的元数据不保证原始创建时间，但保留最新版本的创建时间。如果您需要对文件进行版本控制，则应在外部或内部明确版本

字段 st_ctime 通过写入或设置 inode 信息（即所有者、组、链接计数、模式等）来更改。

```
 struct stat {
           dev_t     st_dev;     /* ID of device containing file */
           ino_t     st_ino;     /* inode number */
           mode_t    st_mode;    /* protection */
           nlink_t   st_nlink;   /* number of hard links */
           uid_t     st_uid;     /* user ID of owner */
           gid_t     st_gid;     /* group ID of owner */
           dev_t     st_rdev;    /* device ID (if special file) */
           off_t     st_size;    /* total size, in bytes */
           blksize_t st_blksize; /* blocksize for file system I/O */
           blkcnt_t  st_blocks;  /* number of 512B blocks allocated */
           time_t    st_atime;   /* time of last access */
           time_t    st_mtime;   /* time of last modification */
           time_t    st_ctime;   /* time of last status change */
       }; 
```

# android - 如何清除按钮单击中的通知

> ID：10171070
> 
> 赞同：9
> 
> 时间：2012-04-16T08:46:10.120
> 
> 标签：android

在我的项目中，我有通知选项。
我可以通过单击按钮删除此通知吗？使用代码单击此通知时，我可以取消通知

```
 checkin_notification.flags = Notification.FLAG_AUTO_CANCEL; 
```

但我在我的应用程序中我想在显示通知后清除它。它应该在按钮单击中。

提前致谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-16T08:49:56.553

要`clear all`通知您的应用程序，您可以这样做，

```
NotificationManager notificationManager = (NotificationManager) 
                                 getSystemService(Context.
                                                        NOTIFICATION_SERVICE);
notificationManager.cancelAll(); 
```

要清除`particular`通知，您可以这样做，

```
notificationManager.cancel(notification_id); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T08:48:57.020

onButton 点击​​只写....

```
mNotificationManager.cancel(SIMPLE_NOTFICATION_ID); 
```

你可以在这里看到[http://saigeethamn.blogspot.in/2009/09/android-developer-tutorial-for.html](http://saigeethamn.blogspot.in/2009/09/android-developer-tutorial-for.html)并检查它....

为了清楚起见......`mNotificationManager.cancelAll();`

# c - 根据变量的地址，变量存储在哪里（数据段或堆或BSS）？

> ID：10171073
> 
> 赞同：3
> 
> 时间：2012-04-16T08:46:25.533
> 
> 标签：c, linux, macos, process, heap-memory

[与静态变量存储在哪里（数据段或堆或 BSS）](https://stackoverflow.com/questions/2516902/where-are-static-variables-stored-data-segment-or-heap-or-bss)有点相似？，但不是同一个。

现在我得到了另一个进程的变量地址，例如：0x10fb90，这个变量存储在哪里（数据段或堆或 BSS），我可以仅从进程的 pid 和变量的地址获取位置吗？

我正在使用 obj-c 和 c 在 osx 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:59:01.447

您有 2 个选项。

## 1.使用[`objdump`](http://linux.die.net/man/1/objdump)

就像是

```
objdump -x a.out | grep YOUR_VARIABLE_ADDRESS 
```

## 2.使用gcc的map选项生成[map文件](https://stackoverflow.com/questions/2068632/understanding-linker-map-file-ms-visual-studio-2005)

在 gcc 中编译类似的东西

```
$ gcc -o foo.exe -Wl,-Map,foo.map foo.c 
```

现在

```
$ grep YOUR_VARIABLE_ADDRESS foo.map 
```

如果您提供的所有地址都退出，这两种方法都将显示您的变量的位置。

**PS**：我添加的链接`map file`显示了一个由 Visual Studio 链接器生成的示例地图文件，但在各种链接器生成的大多数地图文件格式中，格式通常相似

# titanium - 钛应用程序中的 YouTube 集成？

> ID：10171079
> 
> 赞同：0
> 
> 时间：2012-04-16T08:46:47.550
> 
> 标签：titanium, appcelerator

在我的应用程序中，我想集成 YouTube 来显示视频。我想检索视频缩略图的标题。我想在自定义列表视图中显示缩略图和视频标题。

有教程或代码示例吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T11:03:12.520

[NYSenate 应用程序](https://docs.google.com/document/pub?id=1-SBFGbnwLRSSG_oluaGsLw6FarO-QmnxzLxtgIap708)应该会有所帮助。

# java - 无法捕获 SAXParseException

> ID：10171083
> 
> 赞同：1
> 
> 时间：2012-04-16T08:47:20.467
> 
> 标签：java, rdf, jena

嗨，我正在使用 jena 读取 som rdf 文件：

```
 InputStream in = FileManager.get().open(adress);
    model.read(in, adress); 
```

第二行有时会抛出 SAXParseException 的问题：

```
org.xml.sax.SAXParseException: Element or attribute do not match QName production: QName::=(NCName':')?NCName. 
com.hp.hpl.jena.shared.JenaException: org.xml.sax.SAXParseException: Element or attribute do not match QName production: QName::=(NCName':')?NCName. 
    at com.hp.hpl.jena.rdf.model.impl.RDFDefaultErrorHandler.fatalError(RDFDefaultErrorHandler.java:45)
    at com.hp.hpl.jena.rdf.arp.impl.ARPSaxErrorHandler.fatalError(ARPSaxErrorHandler.java:35)
    at com.hp.hpl.jena.rdf.arp.impl.XMLHandler.warning(XMLHandler.java:225)
    at com.hp.hpl.jena.rdf.arp.impl.XMLHandler.fatalError(XMLHandler.java:255)
    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLEntityScanner.scanQName(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)
    at org.apache.xerces.parsers.DTDConfiguration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at com.hp.hpl.jena.rdf.arp.impl.RDFXMLParser.parse(RDFXMLParser.java:142)
    at com.hp.hpl.jena.rdf.arp.JenaReader.read(JenaReader.java:158)
    at com.hp.hpl.jena.rdf.arp.JenaReader.read(JenaReader.java:145)
    at com.hp.hpl.jena.rdf.arp.JenaReader.read(JenaReader.java:215)
    at com.hp.hpl.jena.rdf.model.impl.ModelCom.read(ModelCom.java:197) 
```

所以我想做一些尝试捕获块。问题是当我这样做时，编译器返回：

> 异常 org.xml.sax.SAXParseException 永远不会在相应的 try 语句的主体中抛出

那么我怎么能聊到这个异常呢？我知道我可以只捕获异常，但我不能确定问题发生在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T08:55:03.307

SAXParserException 是一个“检查异常”，这意味着如果方法签名抛出，则强制声明它。显然，您调用的方法没有声明它，因此您无法捕获它。

看起来 Jena 实际上是将该异常包装在“未经检查的异常”中（即扩展 RuntimeException 的异常）。这个例外其实是`JenaException`。因此，您可以为 a 添加一个 try/catch `JenaException`，然后使用它`getCause()`来查找 Jena 遇到的原始错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T08:57:14.233

您应该捕获 JenaException 而不是 SAXParseException。然后尝试找出可能是 SAXParseException 的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T21:54:48.837

如果您希望处理 RDF XML 输入的问题，有一种更直接的方法是使用Jena 阅读器的[错误处理程序接口。](http://incubator.apache.org/jena/documentation/io/sax.html#error-handler)

# javascript - Dojo 等效于 jquery 的 .data() 方法

> ID：10171088
> 
> 赞同：2
> 
> 时间：2012-04-16T08:47:37.077
> 
> 标签：javascript, jquery, dojo

简单的问题：

是否有与 jQuery 的 .data() 功能等效的 Dojo？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-16T03:21:31.657

要访问*数据*DOM 属性，请使用[dojo/dom-attr](https://dojotoolkit.org/reference-guide/1.10/dojo/dom-attr.html)：

```
require(["dojo/dom-attr"], function(domAttr){
    result = domAttr.set("myNode", "data-myattribute", "myValue");
}); 
```

对于真正的存储接口，请使用[dojo/store](https://dojotoolkit.org/reference-guide/1.10/dojo/store.html#dojo-store)：

```
require(["dojo/store/Memory", "dojo/store/Observable"], function(Memory, Observable){
    var store = Observable(new Memory({ data: someData }));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:22:39.910

```
dojo.attr(node, attr, value); 
```

[http://dojotoolkit.org/reference-guide/1.7/dojo/attr.html](http://dojotoolkit.org/reference-guide/1.7/dojo/attr.html)

# c++ - 如何使用“alt + key”在菜单栏中创建不同的快捷方式？

> ID：10171091
> 
> 赞同：0
> 
> 时间：2012-04-16T08:47:51.200
> 
> 标签：c++

如何在 C++ 中编写程序，我可以使用 alt 创建快捷键，默认情况下我们在 windows 中的方式..eg alt+f 用于文件，alt+e 用于编辑？如何自己编写代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:27:31.827

Windows 编程的最佳信息来源是 MSDN。棘手的部分是知道你要找的东西叫什么。在这种情况下，MS 将这些称为[“加速器”](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646337%28v=vs.85%29.aspx)。

# asp.net - asp.net浏览器崩溃事件

> ID：10171092
> 
> 赞同：0
> 
> 时间：2012-04-16T08:48:01.683
> 
> 标签：asp.net, events, browser, crash

我想对 asp.net 中的浏览器崩溃事件执行操作。如果浏览器崩溃，我想销毁添加到购物车中的项目并恢复到应用程序和数据库的原始状态。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:28:48.997

遗憾的是，由于多种因素，这是不可能的。

1）网络是无状态的，也就是说网络服务器不知道网络浏览器，除了它请求了一些东西。处理完请求后，它无法与浏览器通信。

2）浏览器有同样的问题。一旦它向服务器询问内容并得到它，就是这样。如果用户关闭他们的浏览器，或者让他们的会话超时，或者如果浏览器崩溃，服务器不知道它，浏览器也不会告诉它。

3）如果浏览器崩溃，它就崩溃了，所以它不能在任何地方发送任何信息，因为它不再工作了。

您可以挂钩 session_end 事件，该事件将在用户会话结束时触发（当用户在一段时间内没有请求任何内容时会话结束，默认为 20 分钟），但是没有办法告诉会议为什么结束。用户的浏览器可能已经崩溃，他们可能已经关闭了浏览器，或者他们可能已经厌倦并去了另一个站点。

通常我不会在用户签出之前更新应用程序状态，所以购物篮是我唯一需要删除的东西。为此，我在我的购物车表上设置了一个日期时间列，并在每次更新购物车时更新它。然后，我每天在数据库上运行一个计划任务，删除所有比我保留篮子时间长的篮子。

# java - jFrame关于组合框

> ID：10171102
> 
> 赞同：0
> 
> 时间：2012-04-16T08:48:58.030
> 
> 标签：java, swing, jframe, jcombobox

正如我在标题中提到的那样，我想问一个关于组合框的问题。我想制作 2 个组合框，其中一个包含出发城市，另一个包含到达城市。

例如：

我们的目的地有纽约、巴黎和迪拜。因此，当我在出发时选择纽约时，我不想在其他组合框中看到纽约（作为到达）。我该怎么做？

```
JComboBox Departure = new JComboBox();
Departure.setBounds(31, 58, 28, 20);
contentPane.add(Departure);

JComboBox Arrival = new JComboBox();
Arrival.setBounds(114, 58, 28, 20);
contentPane.add(Arrival);` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:03:27.700

你可以用这个

```
 for(int i = 0; i < Departure.getItemCount(); i++){
      if(Departure.getItemAt(i).equals(Departure.getSelectedItem())){
         Arrival.removeItemAt(i):

   }
} 
```

# xpath - 仅从“a href”中提取链接

> ID：10171104
> 
> 赞同：1
> 
> 时间：2012-04-16T08:49:23.227
> 
> 标签：xpath

`xmllint sample.xml --xpath "//a[text()='some value']/@href"`

输出：

`href="http://some.address"`

如何只输出没有属性名称的链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:59:56.353

`xmllint sample.xml --xpath "string(//a[text()='some value']/@href)"`

# javascript - 如何在循环内将元素传递给jQuery post

> ID：10171106
> 
> 赞同：4
> 
> 时间：2012-04-16T08:49:27.143
> 
> 标签：javascript, jquery, post, loops

我有以下代码：

```
for (_field in _fields) {
    $.post(
        '/api/fields',
        { id: _field.id },
        function(data, _field) {
            alert(data);
        } (data, _fields[_field)
    );
} 
```

我必须将`_fields[_field]`元素传递给从 jQuery 返回数据的函数，因为在循环期间丢失了对正确对象的引用。问题是在定义`post`函数应该有一个`_field`参数时，您还必须为数据指定一个参数，否则数据将被覆盖`_field`。

当前数据返回为`undefined`因为我没有在循环内定义数据对象。我也试过传入`null`，但这也只是返回`null`。我正在寻找一种在不覆盖从 post 函数返回的数据的情况下传递元素的方法。

有什么方法可以解决这个问题，或者是否有替代 jQuery 方法可以满足需要？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T08:52:49.640

你想要一个函数工厂函数——一个创建函数的函数：

```
for (_fieldName in _fields) {
    $.post('/api/fields',
    {
        // Unrelated, but I think this bit is wrong; shouldn't it be
        // `id: _fields[_fieldName].id` ? You're trying to use `.id` on
        // a string -- see below for a full update
        id: _fieldName.id
    },
    makeHandler(_fields[_fieldName])
    );
}
function makeHandler(field) {
    return function(data) {
        // Use `data` and `field` here
    };
} 
```

请注意，在我们传入的对象初始化程序中`$.post`，我们*调用* `makeHandler`它运行并返回我们将传入的函数`$.post`。然后在完成时调用该函数`$.post`，并且可以访问提供它的`data`参数`$.post`以及 的`field`参数`makeHandler`，因为它是调用上下文的闭包`makeHandler`，其中包括`field`参数。更多：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)

* * *

请注意，在上面的代码中，我将您的变量更改`_field`为`_fieldName`更清晰：`for..in`循环中的变量是一个字符串，一个属性的*名称*。另请参阅评论，我认为您试图`.id`在错误的地方使用。这就是我认为你真正想要的：

```
for (_fieldName in _fields) {
    _field = _fields[_fieldName];
    $.post('/api/fields',
    {
        id: _field.id
    },
    makeHandler(_field)
    );
}
function makeHandler(field) {
    return function(data) {
        // Use `data` and `field` here
    };
} 
```

另请注意，如果`_fields`是一个数组，则不应`for..in`在没有保护措施的情况下使用它。更多：[*神话和现实`for..in`*](http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html)

# c# - 在滚动条上的 WPF TreeView 中拖放

> ID：10171107
> 
> 赞同：9
> 
> 时间：2012-04-16T08:49:28.550
> 
> 标签：c#, wpf, drag-and-drop, treeview, behavior

我们在我们的应用程序和窗口中使用 MVVM 模式，我们有两个`TreeView`s 允许从第一个拖动项目并将其放在第二个树上。为了避免代码落后，我们使用行为来绑定 ViewModel 的拖放。

[该行为的实现与此示例](http://code.google.com/p/vixendisplayvisualizer/source/browse/trunk/DisplayPreviewModule/Behaviors/DragSourceBehaviour.cs?spec=svn61&r=61)非常相似，并且像魅力一样工作，只有一个错误。

场景是一棵比显示它的窗口大的树，因此它有一个垂直滚动条。When an item is selected and the user wants to scroll, the program starts drag and drop (which prevents the actual scrolling and therefore isn't what we want).

这并不奇怪，因为滚动条包含在`TreeView`控件中。但是我无法安全地确定鼠标是否在滚动条上。

它们由使用边框、面板等的`TreeViewItems`主题来表示，所以简单`InputHitTest`并不像人们想象的那么简单。

有没有人遇到过同样的问题？

如果需要更多代码覆盖问题，我可以粘贴 .xaml 中的一些行。

* * *

**编辑**

结合 Nikolays 链接，我使用一种`IsMouseOverScrollbar`方法解决了问题，如果将来有人遇到此问题，则必须按以下方式更改上面的代码：

```
private static void PreviewMouseMove(object sender, MouseEventArgs e)
{
    if (e.LeftButton != MouseButtonState.Pressed || startPoint == null)
        return;

    if (!HasMouseMovedFarEnough(e))
        return;

   if (IsMouseOverScrollbar(sender, e.GetPosition(sender as IInputElement)))
   {
       startPoint = null;
       return;
   }

   var dependencyObject = (FrameworkElement)sender;
   var dataContext = dependencyObject.GetValue(FrameworkElement.DataContextProperty);
   var dragSource = GetDragSource(dependencyObject);

   if (dragSource.GetDragEffects(dataContext) == DragDropEffects.None)
        return;

   DragDrop.DoDragDrop(
            dependencyObject, dragSource.GetData(dataContext), dragSource.GetDragEffects(dataContext));
}

    private static bool IsMouseOverScrollbar(object sender, Point mousePosition)
    {
        if (sender is Visual)
        {
            HitTestResult hit = VisualTreeHelper.HitTest(sender as Visual, mousePosition);

            if (hit == null) return false;

            DependencyObject dObj = hit.VisualHit;
            while(dObj != null)
            {
                if (dObj is ScrollBar) return true;

                if ((dObj is Visual) || (dObj is Visual3D)) dObj = VisualTreeHelper.GetParent(dObj);
                else dObj = LogicalTreeHelper.GetParent(dObj);
            }
        }

        return false;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:01:32.297

看看[Josh Smith 对 ListView 的拖放行为的这种实现](http://www.codeproject.com/Articles/17266/Drag-and-Drop-Items-in-a-WPF-ListView)。它有处理滚动条和其他一些不明显的 DnD 问题的代码（如拖动阈值、精确的鼠标坐标等）。这种行为也可以很容易地用于 TreeViews。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-11T12:42:36.100

我有同样的问题。我通过将 TreeView 放在 ScrollViewer 中解决了这个问题。

```
<ScrollViewer Grid.Column="0">
  <TreeView BorderThickness="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" MouseMove="DeviceTree_OnMouseMove" PreviewMouseLeftButtonDown="DeviceTree_OnPreviewMouseLeftButtonDown" Name="DeviceTree" ItemsSource="{Binding Devices}"/>
</ScrollViewer> 
```

# ruby-on-rails - ruby/rails 中的日期范围

> ID：10171111
> 
> 赞同：4
> 
> 时间：2012-04-16T08:50:28.563
> 
> 标签：ruby-on-rails, ruby

我想在 Rails 种子中获取从到到的日期范围。

当我尝试生成日期范围 ((Date.today - 10)..Date.today) 时发生异常。

异常消息：**范围值错误**

但在 Rails 控制台中一切正常。

我认为 ActiveSupport 是合理的（我的调试器告诉我）。

拉尔斯 3.1.3

这是怎么回事？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T09:22:41.787

您可以通过拆分两条边并检查它们的类来了解发生了什么，如下所示：

```
Date.today.class #  => Date 
(Date.today - 10).class # => Date 
((Date.today - 10)..Date.today).each {|d| puts d.class} # => 10 Date works for me 
```

您遇到的错误是这样的：

```
('a'..10) # => ArgumentError: bad value for range 
```

你能发布你的范围的2个边缘的类吗？

```
(Date.today - 10).class => ?
Date.today.class       => ? 
```

您是否覆盖了 Rails 环境中的任何类？它适用`irb`吗？

PS：因为你在rails中你可以使用`10.days.ago`，但你需要使用它，`to_date`因为它是`ActiveSupport::TimeWithZone`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T09:02:11.563

```
begin
  ((Date.today - 10)..Date.today).each { |date| puts date }
rescue
  $! # => #<NameError: uninitialized constant Date>
end

require 'date'
((Date.today - 10)..Date.today).each { |date| puts date }
# >> 2012-04-06
# >> 2012-04-07
# >> 2012-04-08
# >> 2012-04-09
# >> 2012-04-10
# >> 2012-04-11
# >> 2012-04-12
# >> 2012-04-13
# >> 2012-04-14
# >> 2012-04-15
# >> 2012-04-16 
```

# perl - 如何在没有 GUI 的情况下运行代码

> ID：10171116
> 
> 赞同：1
> 
> 时间：2012-04-16T08:50:48.690
> 
> 标签：perl, tk

我手里有一个相当长的 perltk 代码，我想以批处理模式运行模拟（不使用 GUI）。例如，我想使用“myprog.pl -b”之类的脚本来运行它，而不是在 GUI 中设置所有参数并单击按钮。

我当前的方法是使用单独的 XML 文件进行配置和函数“after”，这意味着 GUI 将弹出并开始模拟，然后在一段时间后退出。它现在正在工作，但我有一个问题：有没有更好的方法解决这个问题？是否可以在后台显示 GUI（所以我们不会看到它）而不是弹出窗口？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:32:04.687

*   更改程序，使其可从图形界面和命令行界面访问。将其真正的功能分解为子程序。
*   [在xvfb](http://enwp.org/xvfb)中运行程序，以便主显示屏上不显示任何窗口。
*   将窗口管理器配置为始终以最小化和/或 0x0 大小启动此程序的实例。

# java - 在 Wicket 1.4.10 中使用 DatePicker 类需要什么？

> ID：10171119
> 
> 赞同：1
> 
> 时间：2012-04-16T08:51:03.597
> 
> 标签：java, datepicker, wicket

我使用 Netbeans 7.1、Wicket 1.4.10 和 Wicket 扩展 1.4.10。

我想使用 datePicker，但 Netbeans 无法将 DatePicker 识别为一个类。我已经搜索了图书馆，但找不到它。我是否需要添加一些额外的库才能使用 datePicker 组件？如果是这样，我需要以某种方式安装它吗？我现在使用的扩展只是使用工具库管理器添加的。这是正确的方式/安装吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T08:53:29.697

您应该将 wicket-datetime 依赖项添加到您的项目中。

```
 ...
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-datetime</artifactId>
        <version>${wicket.version}</version>
    </dependency>
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T08:54:13.330

如果项目即将启动，使用 Apache Maven 会容易得多。这是有关[如何创建 Wicket 原型](http://wicket.apache.org/start/quickstart.html)的页面。然后，只需从 NetBeans 打开它。如果仍然需要，请`wicket-datetime`按照@magomi 的解释添加依赖项。

# c# - 无法打开物理文件“”。操作系统错误 32：“32（无法检索此错误的文本。原因：15105）”

> ID：10171121
> 
> 赞同：-1
> 
> 时间：2012-04-16T08:51:25.300
> 
> 标签：c#, sql, sql-server

我有错误（如下）并且无法修复，是否有人可以就此提供建议。我有一个注册页面，应该将用户的详细信息保存到数据库中。代码如下所示。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:05:18.427

检查 GetConnectionString 是否返回您想要的。

注意：在指示错误发生的位置时，有关抛出异常的行的详细信息将比 catch 语句更有帮助

# java - 使用 maven 构建后未找到来自 src/main/resources 的资源

> ID：10171122
> 
> 赞同：60
> 
> 时间：2012-04-16T08:51:30.293
> 
> 标签：java, maven, maven-2

您好，我在我的 java 应用程序中使用来自 src/main/resources 的配置文件。我在我的课堂上读它是这样的：

```
new BufferedReader(new FileReader(new File("src/main/resources/config.txt"))); 
```

所以现在我正在使用 maven 构建它`mvn assembly:assembly`。这是我的 pom.xml 中的一点：

```
<plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <finalName>TestSuite</finalName>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <mainClass>com.some.package.Test</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin> 
```

所以当我运行我的应用程序时，我得到了这个错误：

```
src\main\resources\config.txt (The system cannot find the path specified) 
```

但是当我右键单击我组装好的罐子时，我可以在里面看到它，有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-04-16T08:58:38.163

来自的资源`src/main/resources`将被放在类路径的根目录中，因此您需要将资源获取为：

```
new BufferedReader(new InputStreamReader(getClass().getResourceAsStream("/config.txt"))); 
```

您可以通过查看 maven 生成的 JAR/WAR 文件进行验证，您可以`config.txt`在存档的根目录中找到该文件。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-16T08:54:46.277

FileReader 从文件系统上的文件中读取。

也许您打算使用这样的东西从类路径加载文件

```
// this will look in src/main/resources before building and myjar.jar! after building.
InputStream is = MyClass.class.getClassloader()
                     .getResourceAsStream("config.txt"); 
```

或者您可以在读取之前从 jar 中提取文件。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-16T08:55:21.790

您放入 src/main/resources 的资源将在构建过程中复制到可以使用以下命令访问的目标/类：

```
...this.getClass().getResourceAsStream("/config.txt"); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-04T07:26:18.557

一旦我们构建 jar 将在*BOOT-INF/classes*或*target/classes*文件夹下拥有资源文件，该文件夹位于类路径中，使用以下方法并将*src/main/resources*下的文件作为方法调用***getAbsolutePath("certs /uat_staging_private.ppk")***，即使我们可以将此方法放置在 Utility 类中，调用的 Thread 实例将被带到加载 ClassLoader 以从类路径中获取资源。

```
 public String getAbsolutePath(String fileName) throws IOException {
      return Thread.currentThread().getContextClassLoader().getResource(fileName).getFile();
  } 
```

[![在此处输入图像描述](../Images/d6cdd7e769ad6b4b898d15fa1908d2c3.png)](https://i.stack.imgur.com/W6e8G.png) [![在此处输入图像描述](../Images/39a9b7698f3b9f0ba660bacd84c65609.png)](https://i.stack.imgur.com/LloCU.png)

我们可以将以下标记添加到 pom.xml 中的标记以包含这些资源文件以构建目标/类文件夹

```
<resources>
        <resource>
            <directory>src/main/resources</directory>
            <includes>
                <include>**/*.properties</include>
                <include>**/*.ppk</include>
            </includes>
        </resource>
</resources> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T08:59:20.237

我认为程序集插件将文件放在类路径上。JAR 中的位置与您在磁盘上看到的位置不同。解压缩生成的 JAR 并查看文件所在的位置。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-10-25T17:46:55.927

`src/main/resources/`您可以直接替换为`classpath:`

因此，对于您的示例，您将替换此行：

```
new BufferedReader(new FileReader(new File("src/main/resources/config.txt"))); 
```

通过这一行：

```
new BufferedReader(new FileReader(new File("classpath:config.txt"))); 
```

# php - nodejs TCP/IP中\r\n\r\n的字符是什么

> ID：10171127
> 
> 赞同：0
> 
> 时间：2012-04-16T08:52:15.643
> 
> 标签：php, javascript, node.js, tcp, tcpclient

当我在节点 js 中使用 TCP 服务器向客户端发送数据时遇到问题。这是我的代码

```
var net = require('net');

var server = net.createServer(function (socket) {
    // We have a connection - a socket object is assigned to the connection automatically
    console.log('CONNECTED: ' + socket.remoteAddress +':'+ socket.remotePort);

    socket.on('data', function(data) {    
        var datas = JSON.parse(data);
        console.log('DATA ' + socket.remoteAddress + ': ' + data);    
        //socket.write("kenapa ya / HTTP/1.0\r\n\r\n");
    }).on('connect', function() {
        // Manually write an HTTP request.
        var data = {
        "name" : "test",
        "args" : {
            "data":[{
                "a":1
            }]
            }
        };
        socket.setEncoding("utf8");
        socket.write(JSON.stringify(data) + "\r\n\r\n");

    }).on('end', function() {
        console.log('DONE');
    });

});

server.listen(1337, '127.0.0.1');
console.log("server is listen on 1337"); 
```

实际上该代码在我的客户端套接字中工作，但是当我尝试`socket.write(JSON.stringify(data));`没有`\r\n\r\n`来自服务器的太长响应并且我无法从服务器获取消息时。

有谁知道发生了什么？这段代码有什么作用`\r\n\r\n`？我正在使用 php 创建套接字客户端。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:59:54.827

CRNL 两次是 HTTP 标头和正文之间的分隔符。请参阅 HTTP [RFC](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4)。

# android - 无法在android中找到明确的活动类

> ID：10171130
> 
> 赞同：0
> 
> 时间：2012-04-16T08:52:35.837
> 
> 标签：android, android-activity

我有一个包含几个包的 android 项目。在这种情况下，包的结构是 com.siva.restorative 是包含我要运行的活动的包。

我的活动在我的清单中声明为

```
 <activity android:theme="@style/YtdTheme" android:name="com.siva.restorativecare.RestorativeCare">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

mainScreen 活动显示正常，因为它位于 com.WAPP 包中。但是当我尝试运行 setLocationActivity 时，我得到了无法找到明确的类错误。这是我拥有意图参数的方式：

```
Intent i = new Intent(this,SecondActivity.class); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:58:11.440

我想首先您应该将清单中的操作字符串更改为：

```
<action android:name="com.siva.restorativecare.RestorativeCare" /> 
```

然后开始运行您的活动：

```
Intent i = new Intent("com.siva.restorativecare.RestorativeCare");
startActivity(i); 
```

# sql - Django raw sql 生成一个我无法迭代的查询集 - 已关闭

> ID：10171131
> 
> 赞同：-1
> 
> 时间：2012-04-16T08:52:41.933
> 
> 标签：sql, django, django-queryset

我有一个返回两行的 sql 选择查询：

```
SELECT contacts_patientcontact.contact_id, patient_firstname, recent_mailouts
FROM contacts_patientcontact
INNER JOIN patients_patientcore
ON contacts_patientcontact.patient_id = patients_patientcore.patient_id
LEFT JOIN   (SELECT contact_id, COUNT(*) as recent_mailouts
    FROM contacts_communicationinstance
    WHERE communication_type = 'questionnaire mailout'
    GROUP BY contact_id) mail_outs
ON contacts_patientcontact.contact_id = mail_outs.contact_id
WHERE contact_date BETWEEN '2012/03/05' AND '2012/03/12'
AND contact_type = 'Postal Questionnaire'
AND patient_dead != 1
AND consent_withdrawn IS NULL
AND lost_follow_up != 1
AND (key = 'A' OR key = 'C')
AND     (recent_mailouts < 1 
OR recent_mailouts IS NULL); 
```

但是，当我使用 raw 方法将它添加到 django 中时，查询集似乎不是可迭代的。

```
def weekly_questionnaire_mailout_query(monday):
    """
    Returns a query set of PatientContact objects for patients
    due a mailout in the week following the parameter 'monday'.
    """
    nxt_monday = monday + datetime.timedelta(weeks=1)
    nxt_monday_str = nxt_monday.strftime('%Y/%m/%d')
    monday_str = monday.strftime('%Y/%m/%d')
    contacts = PatientContact.objects.raw("""
        SELECT contacts_patientcontact.contact_id
        FROM contacts_patientcontact
        INNER JOIN patients_patientcore
        ON contacts_patientcontact.patient_id = patients_patientcore.patient_id
        LEFT JOIN    (SELECT contact_id, COUNT(*) as recent_mailouts
                FROM contacts_communicationinstance
                WHERE communication_type = 'questionnaire mailout'
                GROUP BY contact_id) mail_outs
        ON contacts_patientcontact.contact_id = mail_outs.contact_id
        WHERE contact_date BETWEEN '%s' AND '%s'
        AND contact_type = 'Postal Questionnaire'
        AND patient_dead != 1
        AND consent_withdrawn IS NULL
        AND lost_follow_up != 1
        AND (cora = 'A' OR cora = 'C')
        AND     (recent_mailouts < 1 
            OR recent_mailouts IS NULL);   
        """  % (monday_str, nxt_monday_str)
    )
    return contacts

contacts = weekly_questionnaire_mailout_query(monday)
for contact in contacts:
    patients.add(contact.patient_id) 
```

永远不会到达最后一行。（我检查了日期是否正确，并在下面包含了 PatientContact 模型）。

```
class PatientContact(models.Model):
    contact_id = models.AutoField(primary_key=True)
    patient_id = models.ForeignKey(PatientCore, db_column="patient_id",
                               verbose_name="patient")
    # additional fields.. 
```

我对此感到不知所措-我的（pydevd）调试器没有显示查询集中的项目，而是显示了 RawQuerySet 对象。相同的函数（具有相同的参数）正在返回一个 djangotables2 处理良好的对象（生成我期望从 sql 输出中得到的表）。

编辑

这很尴尬 - 毕竟是日期 - 我实际上并没有运行相同的 SQL 查询（我以为我上周检查并重新检查了它们）。向任何为此花费时间的人道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:14:32.620

这是一个错误。我运行了错误的代码。

解决方法是更加小心！

# android - 我在哪里可以获得 Xperia Active 的设备配置文件，以便我可以在 Flash Builder 中使用它？

> ID：10171136
> 
> 赞同：0
> 
> 时间：2012-04-16T08:53:01.150
> 
> 标签：android, flash-builder, device, profile, sony

我在哪里可以获得 Xperia Active 的设备配置文件，以便我可以在 Flash Builder 中模拟它？谁能指点我在哪里可以下载？我不确定这个问题是否应该在这里，但我还是抓住了机会，因为它仍然与编程有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T13:49:33.353

我想我知道了，我只是自己制作了个人资料。不管怎么说，还是要谢谢你。

# xcode4 - 如何在设备上运行 ipad phone gap 应用程序并将其发送给其他人

> ID：10171140
> 
> 赞同：-1
> 
> 时间：2012-04-16T08:53:15.523
> 
> 标签：xcode4, cordova

我有一个 ipad 电话间隙应用程序，我希望该应用程序也应该在我的客户端设备上运行，如何像我们通过临时分发和发送 ipa 文件一样正常执行此操作，但这是一个 phonegap 应用程序，所以如何发送它并在任何设备上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:13:32.967

您可以使用 Test flight (http://testflightapp.com) 分发企业 ad-hocs，或者您可以使用 phonegap build (http://build.phonegap.com) 然后将生成的二维码发送给您的客户，所以他们可以安装构建。

# .net - 与 2008 年 Win Forms Designer 问题

> ID：10171144
> 
> 赞同：2
> 
> 时间：2012-04-16T08:53:35.000
> 
> 标签：.net, winforms, visual-studio-2008, version-control, c#-3.0

*免责声明 - 我使用的工具是：*

*   视觉工作室 2008
*   C#/.Net（3.5 版）
*   一组外部控件

*附加免责声明：我不是在寻求有关外部控件集的帮助，只是如果有人遇到过类似的情况，或者他们对如何解决此问题有任何建议*

大家好，

在过去的几周里，我一直在用 C# 构建一个模型程序，在需要额外功能时使用外部控件库（如果有帮助，我会命名额外的控件）。

与我从事的所有项目（个人或工作）一样，我在添加任何代码或对 UI 进行任何更改后签入 - 显然，我也包含提交评论。

UI 由 3 个面板组成，每个面板有 1 个或多个组。每个组对它们都有 1 个或多个控制权。当用户浏览 UI 时，我禁用并隐藏了不相关的控件。这是我在程序的模型/演示版本中采用的方法，当它从这个阶段（预开发/UI 设计）进入下一阶段（实际开发）时，我将重新实现它逻辑和小的 UI 改进）

在过去的几周里，我遇到了一个问题。如果我在 Visual Studio 中打开了代码库和设计器视图，并且我对代码库进行了更改（无论大小），当我切换回设计器视图时，我会收到以下错误：

> 设计器加载程序没有提供根组件，但没有说明原因。此错误的实例（一）
> 1\. 没有可用于此错误的堆栈跟踪或错误行信息

由于这种情况最近才发生（在过去一周内），我认为它与我添加或删除的控件之一有关。

旁注：老板让我完全重新设计 UI，但他决定在手前做一个 CTRL-A、CRTL-X，我不确定撤消命令是否正确完成。我做到了，就在他“测试”用户界面之前签入，并在我认为撤消命令未正确完成时签出——当老板开始移动东西或玩代码时，我学会了这样做每当他过来检查进度。

我找到了一个临时解决方案，但这有点烦人。临时解决方案采用以下形式：

1.  关闭设计器视图
2.  重新打开设计器视图

瞧，它有效。但我必须记住每次更改代码库时都要这样做——如果设计器视图已经打开。

有没有人对我可以做些什么来解决这个问题有任何有用的建议（设计师问题，而不是老板采取“积极的 UI 设计方法”）？

# google-maps-api-3 - 我可以通过 GE 插件添加/切换 Google 地图吗？

> ID：10171146
> 
> 赞同：0
> 
> 时间：2012-04-16T08:53:44.750
> 
> 标签：google-maps-api-3, google-earth-plugin

是否可以通过 Google 地球插件添加和切换 Google 地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:14:33.153

Check out this utility library that allows you to combine Google Earth and Maps: [http://google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/googleearth/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T22:58:09.133

看看这个页面，这是你想要的吗？

[http://earth-api-samples.googlecode.com/svn/trunk/demos/mapsapi/index.html](http://earth-api-samples.googlecode.com/svn/trunk/demos/mapsapi/index.html)

# svn - Jenkins - 关注 SVN 分支

> ID：10171150
> 
> 赞同：3
> 
> 时间：2012-04-16T08:54:16.917
> 
> 标签：svn, branch, jenkins, apache-pig

有没有办法让詹金斯在 SVN 项目的所有分支中寻找变化，就像它对 Git 所做的那样？

Apache Pig Piggybank 是一组由社区贡献的类，并将扩展添加到特定版本的 Apache Pig。Pig 本身是通过 Maven 发布的，因此获得它的特定版本从来都不是问题。另一方面，Piggybank 没有版本控制，但是每个版本的 Pig 都有其依赖的分支。

我想让 Jenkins 监视，然后为 Pig SVN 存储库中的所有分支构建。我真的宁愿不必关注 Piggybank 的新版本，并为每个分支添加一个 Jenkins 工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:21:07.007

这是@Lars回答的一些详细说明：

创建触发器作业（我们称之为*Trigger*），它将检查每个分支到其工作区中的不同目录（顺便说一下，您可以使用`--depth=empty`选项在工作区中手动创建这些目录，然后 Subversion 插件仍会检测到更改，但不会如果您有很多分支，请检查代码以节省空间）。

然后，您可以在*Trigger*作为构建步骤调用的脚本中使用`SNV_REVISION_n`（其中`n`1、2 等；请参阅[Subversion Plugin Documentation](https://wiki.jenkins-ci.org/display/JENKINS/Subversion+Plugin) ）来检查哪个（或多个）分支确实发生了变化（当然，您需要存储结果，将在下一个*触发器*构建中使用）。

 **然后您只创建一个将分支名称作为参数的作业（我们称之为*Worker ）。**触发器*将使用 wget 或 curl 使用适当的参数（例如分支名称）通过 http调用*Worker 。*

或者，您可以为每个分支创建一个*Trigger*作业，并使用[Parameterized Trigger Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Parameterized+Trigger+Plugin)调用*Worker*。缺点是您需要为每个分支创建一个*触发器*，并且您将拥有更多的 SVN 轮询（除非您使用[SVN push](http://jenkins-ci.org/node/212)）。另一方面，您不需要编写 检查哪个分支已更改的脚本，并且您可以使用[Blame Subversion 插件](https://wiki.jenkins-ci.org/display/JENKINS/BlameSubversion)将变更集从*触发器*传播到*Worker*（并且仅与该分支相关的更改）。

 ****Worker*将手动更新/签出作为参数传递给它的分支（`svn co`等）并构建。

这样一来，您只有一项工作可以完成实际的繁重工作（这意味着更容易维护、更少错误等）

我在我们的构建系统中使用了这种方法。由于我们一次没有超过 2 个活动分支，因此我使用触发器每个分支的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:33:31.203

您可以将多个存储库位置添加到单个项目并将它们签出到不同的目录。不过，您仍然必须手动添加所有分支。*****

# iphone - 如何更改 UIActivityIndi catorView 以设置自定义图像？

> ID：10171152
> 
> 赞同：2
> 
> 时间：2012-04-16T08:54:25.690
> 
> 标签：iphone, objective-c, image, customization, uiactivityindicatorview

好吧，我正在寻找一种方法来更改我的微调器图像并使用自定义图像

有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-15T10:27:13.257

我创建了[UIActivityIndi​​catorView](https://github.com/cncool/CDActivityIndicatorView)的子类，允许您设置自定义图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:00:11.340

您可以简单地使用 a`UIImageView`并添加一个无限期旋转视图层的动画。您可以使用 CoreAnimation 实现此目的。那里有很多教程。

如果您希望启动和停止动画，您可以创建一个简单的子类`UIImageView`来添加和删除所述动画。

这是动画的链接：[基本关键帧动画（旋转）](https://stackoverflow.com/questions/1031177/basic-keyframe-animation-rotation)

# android - Android下的SQLite：在空数据库上插入/替换约束失败

> ID：10171153
> 
> 赞同：0
> 
> 时间：2012-04-16T08:54:26.813
> 
> 标签：android, sqlite

我遇到了问题，在一个完全空的数据库/表上，我的关键约束似乎失败了，我不知道为什么。我已经用 adb 导出了数据库并用 sqliteman 打开它；它仍然是空的。

这是我的代码：

```
public class DatabaseAdapterSystem extends SQLiteOpenHelper {

    private Context context;
    private static final int    DATABASE_VERSION = 20;
    private static final String DATABASE_NAME    = "databaseSystem";

    public DatabaseAdapterSystem(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        this.context = context;
    }

    @Override
    public void onOpen(SQLiteDatabase db) {
        Log.d(getClass().getSimpleName(), "isReadOnly: " + db.isReadOnly());
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
            db.beginTransaction();
            db.execSQL(
                "CREATE TABLE \"accounts\" (" +
                    "\"userId\" INTEGER PRIMARY KEY NOT NULL, " +
                    "\"nickname\" TEXT NOT NULL, " +
                    "\"password\" TEXT NOT NULL, " +
                    "\"profileImageFileName\" TEXT NOT NULL " +
                ")"
            );
            db.setTransactionSuccessful();
        }
        finally {
            db.endTransaction();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // Until yet no need
    }

    // -------------------------------------------------------------------------

    public synchronized BackendAccountList getAccounts() {
        Log.d(getClass().getSimpleName(), "DatabaseAdapterSystem::getAccounts has been called");

        BackendAccountList result = new BackendAccountList();
        SQLiteDatabase db = null;
        Cursor resultSet = null;

        try {
            db = this.getReadableDatabase();

            resultSet = db.query(
                    "accounts", 
                    new String[] {"userId", "nickname", "password", "profileImageFileName"}, // Columns
                    null,                                                           // Selection
                    null,                                                           // SelectionArgs
                    null,                                                           // GroupBy
                    null,                                                           // Having
                    "userId asc"
                    );

            if (resultSet != null) {
                int colUserId = resultSet.getColumnIndex("userId");
                int colNickname = resultSet.getColumnIndex("nickname");
                int colPassword = resultSet.getColumnIndex("password");
                int colProfileImageFileName = resultSet.getColumnIndex("profileImageFileName");

                if (resultSet.moveToFirst()) {
                    do {
                        result.add(new BackendAccount(
                                    resultSet.getInt(colUserId),
                                    resultSet.getString(colNickname),
                                    resultSet.getString(colPassword),
                                    resultSet.getString(colProfileImageFileName)
                                ));
                    } while (resultSet.moveToNext());
                }
            }
        }
        finally {
            if (resultSet != null) {
                resultSet.close();
            }
            if (db != null) {
                db.close();
            }
        }
        return result;
    }

    public synchronized BackendAccountList putAccount(BackendAccount account) {
        Log.d(getClass().getSimpleName(), "DatabaseAdapterSystem::putAccount has been called");

        BackendAccountList result = new BackendAccountList();
        SQLiteDatabase db = null;

        try {
            db = this.getWritableDatabase();
            ContentValues cv = new ContentValues();
            cv.put("userId", account.getUserId());
            cv.put("nickname", account.getUsername());
            cv.put("password", account.getPassword());
            cv.put("profileImageFileName", account.getProfileImage());
            db.insertOrThrow("accounts", null, cv);
        }
        catch (Exception e) {
            e.printStackTrace();
        }
        finally {
            if (db != null) {
                db.close();
            }
        }
        return result;
    }
} 
```

加载应用程序后，将调用 getAccounts 并返回 BackendAccounts 列表。通信成功后，可能会调用 putAccount 将新帐户存储到数据库中。

我已经尝试过使用replaceOrThrow，但即使在约束上也失败了（错误19）

// 编辑：堆栈跟踪

```
04-16 10:47:05.910: W/System.err(13130): android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
04-16 10:47:05.910: W/System.err(13130):    at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
04-16 10:47:05.910: W/System.err(13130):    at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:66)
04-16 10:47:05.910: W/System.err(13130):    at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1426)
04-16 10:47:05.910: W/System.err(13130):    at android.database.sqlite.SQLiteDatabase.insertOrThrow(SQLiteDatabase.java:1308)
04-16 10:47:05.910: W/System.err(13130):    at com.jappy.service.DatabaseAdapterSystem.putAccount(DatabaseAdapterSystem.java:183)
04-16 10:47:05.910: W/System.err(13130):    at com.jappy.service.JappyService$1.handleMessage(JappyService.java:60)
04-16 10:47:05.910: W/System.err(13130):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-16 10:47:05.910: W/System.err(13130):    at android.os.Looper.loop(Looper.java:123)
04-16 10:47:05.920: W/System.err(13130):    at android.app.ActivityThread.main(ActivityThread.java:4363)
04-16 10:47:05.920: W/System.err(13130):    at java.lang.reflect.Method.invokeNative(Native Method)
04-16 10:47:05.920: W/System.err(13130):    at java.lang.reflect.Method.invoke(Method.java:521)
04-16 10:47:05.920: W/System.err(13130):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-16 10:47:05.920: W/System.err(13130):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-16 10:47:05.920: W/System.err(13130):    at dalvik.system.NativeStart.main(Native Method) 
```

// 编辑其中一列包含 NULL (profileImageFilename)。这就是 sqlite 抛出此消息的原因。问题解决了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T16:01:50.983

`SQLiteConstraintException`如果违反其中一个约束，则抛出An 。在您的情况下，所有四个字段都被限制为非`null`. 因此，错误是由于尝试将`null`值插入其中一个字段而引起的。添加一些日志以找出它是哪一个。

# c# - 在 MP3 中通过网络流式传输音频

> ID：10171156
> 
> 赞同：0
> 
> 时间：2012-04-16T08:54:36.203
> 
> 标签：c#

我的问题很简单，

我想这样做：

[http://www.codeproject.com/Articles/19854/Sending-and-playing-microphone-audio-over-network](http://www.codeproject.com/Articles/19854/Sending-and-playing-microphone-audio-over-network)

但是使用另一个编解码器，在 MP3 中。

它可以使用免费的 SDK/工具...？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:07:19.627

我可能会使用 NAudio 库并使用套接字发送缓冲区（这应该很容易，因为它们都是字节数组）。

我不能花太多钱，因为 NAudio 和套接字是 2 个完整的主题。但我可以提供链接：

**南音频**

*   [您可能需要 + 下载的任何信息都可以在这里找到](http://naudio.codeplex.com/documentation)
*   [这个用户的视频是一个很好的系列，解释了 NAudio](http://www.youtube.com/user/GiawaVideos?feature=watch)

**套接字**- 对我来说非常难的主题，所以我会提供更多链接

*   [http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspxhttp://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7695/Asynchronous- Socket-Programming-in-C-Part-I.htm](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.aspxhttp://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7695/Asynchronous-Socket-Programming-in-C-Part-I.htm)
*   [http://www.csharp-examples.net/socket-send-receive/](http://www.csharp-examples.net/socket-send-receive/)
*   [http://www.codeproject.com/Articles/5252/Sockets-in-C](http://www.codeproject.com/Articles/5252/Sockets-in-C)
*   [http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/](http://www.developerfusion.com/article/3918/socket-programming-in-c-part-1/)
*   [http://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7695/Asynchronous-Socket-Programming-in-C-Part-I.htm](http://www.codeguru.com/csharp/csharp/cs_misc/sampleprograms/article.php/c7695/Asynchronous-Socket-Programming-in-C-Part-I.htm)
*   [http://csharp.net-informations.com/communications/csharp-socket-programming.htm](http://csharp.net-informations.com/communications/csharp-socket-programming.htm)

不要忘记使用谷歌！一旦你有了基本的了解，请阅读我的第一句话（带有缓冲区），它会很清楚。

PS NAudio 可能需要另一个 .dll 来处理 mp3，不确定，但应该不难找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:00:45.853

[VLC 媒体播放器](http://www.videolan.org/)可以以各种不同的格式进行流式传输，包括[Icecast](http://www.icecast.org/)。我自己没有使用过它们，但它看起来是一个不错的起点。

# iphone - UIButton的动画

> ID：10171157
> 
> 赞同：0
> 
> 时间：2012-04-16T08:54:37.843
> 
> 标签：iphone, animation, uibutton, block

我想创建一个 UIButton 在按下后在屏幕上随机移动。我想将动画与块一起使用。这是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:07:13.643

试试这个，这是一个简单的例子，它将使您的按钮向右移动 50 px，然后再返回（不要忘记在 IB 中链接 myButton）-

。H -

```
@property (nonatomic, retain) IBOutlet UIButton *myButton; 
```

.m -

```
@synthesize myButton;

-(IBAction)myButtonPressed {

    CGPoint oldCentre = myButton.center;
    CGPoint newCentre = myButton.center;
    newCentre=CGPointMake(newCentre.x + 50.0, newCentre.y);

    [UIView animateWithDuration:0.3
                      delay:0.0
                    options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                 animations:^{
                     myButton.center = newCentre;
                 }
                 completion:^(BOOL finished){

                     [UIView animateWithDuration:0.3
                                           delay:0.0
                                         options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction)
                                      animations:^{
                                          myButton.center = oldCentre;
                                      }
                                      completion:nil
                      ];
                 }
     ];

} 
```

您可以在块中放置您喜欢的任何动画。

您可能想考虑摆脱 UIViewAnimationOptionAllowUserInteraction 位，因为如果用户在动画期间一直触摸按钮，可能会产生一些有趣的结果......

# tridion - 如何在 JavaScript 代码中检索当前登录用户的 TCM URI？

> ID：10171158
> 
> 赞同：6
> 
> 时间：2012-04-16T08:54:38.197
> 
> 标签：tridion

如何将当前登录用户的 TCM URI 检索到 Tridion？

我正在 Tridion 2011 上开发一个 GUI 扩展，需要检查一个组件是否已被检出给当前登录的用户。我计划将当前登录用户的 TCM URI 与`component.getLockedById()`.

我很确定在查看 Tridion 的 JavaScript 文件时，我看到了如何在某处检索当前登录用户的用户名。

**编辑**
我至少找到了一种检索用户名的方法：

```
var username = Tridion.ContentManager.UserSettings.getInstance().getUserName(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:14:31.050

我没有机会对此进行测试，但值得通过 SDL Tridion 2011 Powertools 项目进行查看。在以下位置有一个实用程序文件：

[http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Shared/Scripts/utils.js](http://code.google.com/p/tridion-2011-power-tools/source/browse/trunk/PowerTools.Editor/PowerTools/Client/Shared/Scripts/utils.js)

这可能会帮助你。我认为您可能正在寻找的线路是

```
this._userSettings = Tridion.UI.UserSettings.getJsonUserSettings(true); 
```

我相信这是一段标准的 UI 代码，而不是自定义的 PowerTools 函数

# javascript - 如何从javascript访问在代码隐藏中声明的数组

> ID：10171161
> 
> 赞同：1
> 
> 时间：2012-04-16T08:54:48.343
> 
> 标签：javascript, asp.net, code-behind

我有如下代码

```
Public cs As ClientScriptManager

Public Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

    cs = Page.ClientScript

    cs.RegisterArrayDeclaration("activArray", """asd"",""ert"",""sdt""")

End Sub

//"text/javascript"

function doInit() {

        alert(activArray.length)
} 
```

运行这些代码时，它显示错误 **Microsoft JScript runtime error: 'activArray' is undefined**

请帮我解决这个错误。谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-19T09:15:05.507

只需使用`\`转义数组字符串，如：

```
cs.RegisterArrayDeclaration("activArray", "\"asd\","\"ert\","\"sdt\"") 
```

# vb.net - 如何使用 LINQ 从每组分组数据中返回第一项（在 VB.Net 中）

> ID：10171162
> 
> 赞同：1
> 
> 时间：2012-04-16T08:54:53.973
> 
> 标签：vb.net, linq, group-by

给定一个具有“AccountNo”和“ExpiryDate”属性的简单 DTO (AccountExpiry) 以及由此创建的相同列表：

```
 New AccountExpiry(123, New Date(2012, 4, 1))
    New AccountExpiry(123, New Date(2012, 4, 2))
    New AccountExpiry(123, New Date(2012, 4, 3))

    New AccountExpiry(124, New Date(2012, 4, 2))
    New AccountExpiry(124, New Date(2012, 4, 3))
    New AccountExpiry(124, New Date(2012, 4, 4)) 
```

如何使用 LINQ 检索每个帐户的最新条目

我感觉这将涉及 GroupBy 和 FirstOrDefault。

这好像是...

```
From Item In Source Group By Item.AccountNo Into Group 
```

...应该返回适​​当分组的所有数据，但尚不清楚我如何将 .FirstOrDefault 应用于每个组。

我敢肯定，对于以前做过这件事的任何人来说，这都是一个简单的问题，但目前我还不清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:12:34.577

一种方法是这样的：

首先将项目分组，然后获取每个组的最近日期，然后选择具有最近日期的项目。

```
Module Module1

    Class AccountExpiry
        Public Property AccountNo As Int32
        Public Property ExpiryDate As DateTime
        Public Sub New(accountNo As Int32, expiryDate As DateTime)
            Me.AccountNo = accountNo
            Me.ExpiryDate = expiryDate
        End Sub
    End Class

    Sub Main()

        Dim list = {New AccountExpiry(123, New Date(2012, 4, 1)),
                    New AccountExpiry(123, New Date(2012, 4, 2)),
                    New AccountExpiry(123, New Date(2012, 4, 3)),
                    New AccountExpiry(124, New Date(2012, 4, 2)),
                    New AccountExpiry(124, New Date(2012, 4, 3)),
                    New AccountExpiry(124, New Date(2012, 4, 4))}

        Dim grouped = From ae In list
                      Group ae By ae.AccountNo Into Group

        Dim newest = From g In grouped
                     Let maxDate = g.Group.Max(Function(e) e.ExpiryDate)
                     Select g.Group.Single(Function(e) e.ExpiryDate = maxDate)

        For Each x In newest
            Console.WriteLine(String.Format("{0} : {1}", x.AccountNo, x.ExpiryDate))
        Next

        Console.ReadKey()
    End Sub

End Module 
```

请注意，如果在-group中不是唯一的，`Single()`则会失败。例如，您也可以使用，但这取决于您。`ExpiryDate``AccountNo``First()`

# html - 在打印输出之前删除 html 标签

> ID：10171173
> 
> 赞同：0
> 
> 时间：2012-04-16T08:55:37.563
> 
> 标签：html, jquery-templates

我正在使用 Jquery 模板打印一个字符串数组。存储在数组中的内容之一是“测试”形式。当它们被打印到网页时，我不希望它显示 html 标签。相反，我只希望他们打印测试。那么如何删除这些 html 标签并打印相关数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:58:35.033

使用打印样式表隐藏您不想打印的元素：

在 HTML 页面中：

```
<link rel="stylesheet" href="print.css" media="print" /> 
```

打印.css

```
#myElement {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:05:49.173

使用 jQuery 剥离 HTML 标签很容易：

```
var clean = $('<div><p>Hello</p> <span>World</span></div>').text();
console.log(clean); // logs "Hello World" 
```

# sql - 如何控制 NHibernate 的日期时间格式？

> ID：10171175
> 
> 赞同：0
> 
> 时间：2012-04-16T08:55:45.443
> 
> 标签：sql, nhibernate, datetime

我在使用 NHibernate 时遇到问题，在服务器上运行的语句在尝试使用`DateTime`参数时失败。

参数被传递为`'2012-04-15 19:52:55.7230000'`，但它的精度太高，无法转换为`datetime`：

```
exec sp_executesql N'
    INSERT INTO [People].[NameChanges]
     (
        Revision, 
        MadeAtDateTime,
        MadeAtOffset,
        MadeBy,
        Title,
        Forename,
        Surname,
        Person,
        ID
    ) 
    VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)',
    N'@p0 int,
      @p1 datetime,
      @p2 bigint,
      @p3 nvarchar(4000),
      @p4 nvarchar(4000),
      @p5 nvarchar(4000),
      @p6 nvarchar(4000),
      @p7 bigint,
      @p8 uniqueidentifier',

     @p0=0,
     @p1='2012-04-15 19:52:55.7230000',
     @p2=36000000000,
     @p3=N'',
     @p4=N'Mr',
     @p5=N'Ezra',
     @p6=N'Awesomesauce',
     @p7=1969929945,
     @p8='4D045A70-A474-4D36-8841-DDB16BBB147D' 
```

> 消息 8114，第 16 级，状态 5，第 0 行
> 
> 将数据类型 varchar 转换为日期时间时出错。

为了确认问题，我运行了以下语句：

```
declare @DateTime datetime = '2012-04-15 19:52:55.7230000' 
```

并收到消息：

> 消息 241，第 16 级，状态 1，第 1 行
> 
> 从字符串转换日期和/或时间时转换失败。

我在 SQL 2008 Express 数据库上运行，但我需要架构与 SQL 2005 兼容，因此这排除了切换到`datetime2`数据类型的选项作为一种简单的解决方法。

感觉格式化比 NHibernate 更多地是 SQL ADO.NET 驱动程序的一部分，但是我对 NHibernate 如何生成语句以更精确地询问我需要去哪里将格式更改为数据库可以解析的内容知之甚少.

理想情况下，我想使用 ISO 8601 或继续使用 ANSI SQL 格式以避免任何与文化相关的问题。

我能做些什么来纠正这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:18:23.957

NHibernate 的`DateTime`值格式由其内部类型系统通过`IType`接口控制。

在我的场景中，NHibernate 决定可序列化类型`DateTime`为`DbTimestamp`. 此类型包含比 SQL Server 数据类型中本机可用的更高程度的精度`datetime`，因此在尝试将字符串转换为`datetime`.

解决方案是显式设置自定义类型以使用 NHibernate 的`Type.DateTime`类型，它只包括到秒的时间，并且适合该`datetime`类型。

# java - 需要 Spring 事务的帮助以进行巨大的日期操作

> ID：10171179
> 
> 赞同：0
> 
> 时间：2012-04-16T08:56:05.363
> 
> 标签：java, spring, spring-mvc

请建议我解决这个问题。

我正在使用 org.springframework.orm.hibernate3.HibernateTransactionManager 作为服务的事务管理器。并像这样将代码包装在此事务中

```
TransactionStatus transactionDefinition = new DefaultTransactionDefinition();
DefaultTransactionDefinition transactionStatus = transactionManager.getTransaction(transactionDefinition);

//DaoCalls

transactionManager.commit(transactionStatus); 
```

Dao 调用是对数据库表进行大量 CRUD（删除、更新、插入）操作。

问题是这个表被锁定了更长的时间。并且所有这些 Dao 调用都应该在单个事务中完成。

任何人都可以建议我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:13:23.880

我只看到几个选项：

*   **优化**查询
*   如果可以的话，**并行**运行一些查询（使用 java.utils.concurrent 中的 Executors）
*   根据您的要求尝试**减少锁定**（例如使用读取或写入修复进行**补偿）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:18:53.940

我会考虑在数据库上编写一个存储过程来执行复杂的操作。这样，您可以更好地控制正在执行的锁定和查询，并且由于操作发生在数据库本身上，您没有将数据移入和移出休眠的开销。

# php - 如何在同一服务器的不同端口上运行不同的 Web 应用程序？

> ID：10171182
> 
> 赞同：1
> 
> 时间：2012-04-16T08:56:33.113
> 
> 标签：php, apache, ports

我想在同一台服务器上的不同端口上运行不同的 Web 应用程序，我有一个在 Linux 机器上运行的 apache php 服务器。我怎样才能做到这一点？当我谷歌时，我偶然发现了“tomcat”，这是什么？我是菜鸟，所以如果这是一个愚蠢的问题，请原谅。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T08:59:32.587

查看 apache 手册中的 VirtualHost 指令。它会解释一切。

需要记住的一件事（它第一次让我失望了）——如果你使用虚拟主机，你也必须为默认页面定义一个虚拟主机。

暂时不用担心Tomcat。如果您不知道它是什么，那么您还不需要它。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T09:08:25.337

**第 1 步：安装 Tomcat 文件**

下载 Tomcat 4.1 或 5.5，并将其解压缩到适当的目录中。我通常将它放在 /usr/local 中，因此它最终位于一个名为 /usr/local/apache-tomcat-5.5.17 的目录中（5.5.17 是撰写本文时的当前版本），并创建一个名为 / 的符号链接usr/local/tomcat 到那个目录。当更高版本出来时，我可以解压缩它们并重新链接，留下旧版本以防万一出现问题（这种情况很少发生，但我很偏执）。

**第 2 步：为每个实例创建目录**

对于您要运行的每个 Tomcat 实例，您需要一个目录，该目录将是 CATALINA_BASE。例如，您可以将它们设为 /var/tomcat/serverA 和 /var/tomcat/serverB。

在每个目录中，您需要以下子目录：conf、logs、temp、webapps 和 work。

将 server.xml 和 web.xml 文件放在 conf 目录中。您可以从放置 tomcat 安装文件的目录的 conf 目录中获取这些文件，当然您应该稍微收紧一下 server.xml。

webapps 目录是放置要在特定 Tomcat 实例上运行的 Web 应用程序的位置。

我喜欢在每个实例上安装 Tomcat 管理器 webapp，这样我就可以使用 webapps，看看有多少活动会话。有关配置 Tomcat 管理器 webapp 的说明，请参阅我的说明。

# java - 如何将包含 < 字符的字符串属性注入 Spring bean？

> ID：10171183
> 
> 赞同：12
> 
> 时间：2012-04-16T08:56:45.300
> 
> 标签：java, spring

我的 DAO 有以下 bean 定义-

```
<bean id="userDao" class="UserDao">
<property name="dataSource" ref="dataSource" />
<property name="queryPurgeInvalidReferrals" value="delete from reference where date < ?" />
</bean> 
```

我收到错误消息 - 与元素类型“property”关联的属性“value”的值不得包含“<”字符。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T08:59:48.470

由于 Spring config 是一个 XML 文件，所以需要`<`根据 XML 语法进行转义：

```
<property name="queryPurgeInvalidReferrals" 
    value="delete from reference where date &lt; ?" /> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-16T09:01:48.810

试试这个：

```
<property name="queryPurgeInvalidReferrals">
    <value><![CDATA[delete from reference where date < ?]]></value>
</property> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:01:00.393

像使用 unicode

```
<property name="queryPurgeInvalidReferrals" value="delete from reference where date &#x3c; ?" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:03:58.393

在您的值字符串**<**必须替换为`&lt;`

```
value="delete from reference where date < ?" 
```

# html - 有哪些方法可以为您的 HTML5 应用程序获得更多的本地存储空间（超过标准的 5M 限制左右）？

> ID：10171184
> 
> 赞同：3
> 
> 时间：2012-04-16T08:56:46.543
> 
> 标签：html

网络上充斥着关于上述问题的浏览器特异性细节的矛盾指针，这就是为什么我更愿意获得一些专家建议的原因。目前我不关心非 webkit 浏览器。但我对这个主题研究得越多，就越能证实它目前是不可能的，我发现。因此，我将不胜感激任何见解，提示或任何东西。我也想知道事情会如何随着时间的流逝而变化。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:34:56.780

[草案中](http://dev.w3.org/html5/webstorage/#user-tracking)的一段关于提高 localStorage 限制的内容如下：

> **访问本地存储区域的站点特定白名单用户**
> 代理可以允许站点以不受限制的方式访问会话存储区域，但需要用户授权访问本地存储区域。
> -- [http://dev.w3.org/html5/webstorage/#user-tracking](http://dev.w3.org/html5/webstorage/#user-tracking)

我建议您在您打算支持的浏览器中自行[测试。](http://arty.name/localstorage.html)

我在 Chromium 中的结果是大约 2600k 个字符的硬性限制。

编辑：有一些关于[localStorage 值的最大大小是多少的信息？](https://stackoverflow.com/questions/2989284/max-size-of-localstorage-values).

> 实际上 Opera 没有 5MB 的限制。当应用程序需要更多时，它会增加限制。用户甚至可以为域选择“无限存储”。

我还发现[https://groups.google.com/a/chromium.org/group/chromium-discuss/msg/45153a251b4f441b](https://groups.google.com/a/chromium.org/group/chromium-discuss/msg/45153a251b4f441b)指出 Chromium 应用程序可以使用无限存储*空间*。

# javascript - jScrollPane 不工作

> ID：10171187
> 
> 赞同：0
> 
> 时间：2012-04-16T08:57:04.767
> 
> 标签：javascript, jquery, html, jquery-plugins, jquery-jscrollpane

我正在使用 jQuery jscrollpane 插件[http://jscrollpane.kelvinluck.com/](http://jscrollpane.kelvinluck.com/)在我的应用程序中设置一些功能。问题是它根本不显示 jscrollpane。

HTML：

```
<div class="boxcontent" id="dummy">
    <p>
        abcdefghijklmnopqrstuvwxyzkdksflajsdfkljasdlfkjas
    </p>
</div> 
```

CSS：

```
#dummy {
    width: 100%;
    height: 200px;
    overflow: auto;
}
.horizontal-only {
    height: auto;
    max-height: 200px;
} 
```

JavaScript：

```
$("#dummy").jScrollPane(); 
```

我包含了 jScrollPane 下载部分中显示的所有要求。但它没有显示任何东西。

谁能告诉我错误？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:50:04.453

在元素附加到 DOM 之前调用插件启动。使用 DOM 就绪回调来解决这个问题：

```
$(document).ready(function() {
    $(".dummy").jScrollPane();
}); 
```

这是一个工作[jsFiddle](http://jsfiddle.net/Rq7b2/1/)，根据原始小提琴进行编辑。

# c# - 缓存集合并过滤它而不修改 ASP.NET 中的原始缓存集合

> ID：10171188
> 
> 赞同：5
> 
> 时间：2012-04-16T08:57:09.403
> 
> 标签：c#, asp.net, asp.net-mvc, caching, collections

我想在 asp.net mvc 中缓存一个数据集合并过滤这个集合而不更改缓存的集合。

是否有可能做到这一点？

因为现在，当我获得缓存集合时，我会得到对它的引用，并且该集合的过滤数据会更改缓存集合。

有人知道吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T16:48:34.297

只需将缓存列表中的项目复制到新列表即可。实例将相同，但不会触及原始（缓存）列表。像这样的东西：

```
 List<[CLASS]> collectionCached; //assuming this this your cached list
    List<[CLASS]> collectionWorking = new List<[CLASS]>();
    collectionWorking.AddRange(collectionCached); 
```

这将允许您在不触及原始（缓存）列表的情况下过滤掉您想要的任何实例。

编辑：

在 OP 进一步澄清后，似乎有必要复制实体本身。复制参考对象背后的基本思想称为“克隆”。这会制作原始实体的副本，并允许您更改副本而不更改原始实例。SO 有一些很好的链接，这里有一个讨论克隆和 LINQ 的概念。

[如何在 c# 中使用 linq/lambda 获取数据副本而不是引用？](https://stackoverflow.com/questions/8724421/how-to-get-a-copy-of-data-instead-of-a-reference-using-linq-lambda-in-c)

这应该让你走上正确的轨道。如果您还有其他问题，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-18T17:29:41.370

缓存完整列表，然后使用 Linq 过滤集合。

```
var list = GetFromCache();
var filtered = list.Where(x => x.Name.Contains("rob")); 
```

编辑：

当您获得此过滤列表时，您是否更改了列表中包含的对象？是的，这也将反映在缓存列表中的同一实例上。但在这一点上，这听起来并不是要缓存的好数据。通常缓存的数据不会改变，或者你可以在一段时间内看不到变化。如果数据准确性更重要，请不要缓存。

但是，如果您要更改列表中项目的状态，您也许可以简单地获得您想要的东西：

```
var filtered = list.Where(x => x.Name.Contains("rob")).Select(x => x.MemberwiseClone()).Cast<YourObjType>(); 
```

这使用了做浅拷贝的[MemberwiseClone ；](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx)如果这还不够好，您需要在保留副本的方法上做一些工作。它返回 Object，因此我使用 Cast 扩展方法将其恢复为列表中最初的对象类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T01:17:11.187

Malcolm Frexner 所说的是一种很好的干净方式来解决您的问题，但可以使用 AutoMapper 大大简化。

假设您有一个要从中提取 DTO 对象的适配器（或者如果您不使用 WCF，如果您直接从数据库中提取它，则同样的概念适用）

```
public class AccountServiceAdapter
{
     private List<Accounts> _accounts
     {
          get
          {
               if(HttpContext.Current.Cache["accounts"] == null)
                    HttpContext.Current.Cache["accounts"] = default(List<Accounts>());
               return (List<Accounts>)HttpContext.Current.Cache["accounts"];
          }
          set
          {
               HttpContext.Current.Cache["accounts"] = value;
          }
     }

     public List<AccountViewModel> FetchAccounts()
     {
          if(_accounts == default(List<Accounts>))
          {
               //Do Fetch From Service or Persistence and set _accounts
          }

          return _accounts.Select(x => x.ConvertToViewModel()).ToList();
     }
} 
```

好吧，这就是您可能已经编写的缓存部分。下一点是您可以获得一些乐趣的地方。我不会解释 AutoMapper 的所有映射乐趣，因为有十亿个链接可以做到这一点，但我会给你一些片段让你继续。

[https://github.com/AutoMapper/AutoMapper/wiki/Projection](https://github.com/AutoMapper/AutoMapper/wiki/Projection)

在使用 NuGet 添加对 AutoMapper 的引用后，您需要创建一个 ProjectionManager 类。

```
public static class ProjectionManager
{
     ProjectionManager()
     {
          //The mapping exercise is AS SIMPLE as this if all you are doing is
          //using the exact same property names, it'll autowire
          //If you use different projections you can create complex maps see the link
          //above.
          Mapper.CreateMap<Account,AccountViewModel>();
          Mapper.CreateMap<AccountViewModel,Account>();
     }

     //Make yourself some handy extension methods for syntactic sugar
     public static AccountViewModel ConvertToViewModel(this Account x)
     {
          return Mapper.Map<Account,AccountViewModel>(x);
     }

     //Make yourself some handy extension methods for syntactic sugar
     public static Account ConvertFromViewModel(this AccountViewModel x)
     {
          return Mapper.Map<AccountViewModel,Account>(x);
     }
} 
```

完成所有这些之后，您的缓存现在变得非常简单，启动时您可以将数据转换为具有所有简洁功能（如验证、显示名称等）的视图模型，而不必弄乱您的实体对象或 DTO 对象您的 WCF 服务！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-06T22:02:42.720

当我直接在视图中使用我的域模型时，我遇到了这个问题。只要将所有显示的数据放入专用的 ViewModel 中，就可以轻松解决问题。

**领域模型**

```
public class PersonInfo
{
     public int Age {get;set;}
     public string Name {get;set;}
} 
```

**视图模型**

```
public class PersonViewModel
{
     public PersonInfo PersonData {get;set;}
     public bool Visible {get;set;}
} 
```

现在，您可以将 PersonInfo 存储在缓存中，而无需为所有用户存储“可见”属性。

如果你有对象列表，它会变得有点困难，但这种模式适用于那里。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-16T09:09:18.260

这应该有效：

```
IEnumerable<T> things = GetThings();

Cache["ThingCache"] = things;

T aThing = ((IEnumerable)Cache["ThingCache"]).First();

//Cache["ThingCache"] should still contain the original collection. 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-05T13:24:52.620

我终于解决了我的问题，方法是在我的每个对象中创建一个 Clone() 方法，并在我从缓存中检索到它之后在我的主对象上调用 Clone() 方法。

我的主要对象是帐户类型，其中包含自己的域列表，其中包含产品列表等...

这是 Account 对象中的 Clone 方法：

```
 public Account Clone()
    {
        // Copy all properties of the object in a new object account
        var account = (Account)this.MemberwiseClone();

        var domainsList = new List<Domain>();
        foreach (var d in this.Domains)
        {
            domainsList.Add(d.Clone());
        }

        account.Domains = domainsList;

        return account;
    } 
```

正如你所看到的，我使用 MemberwiseClone() 复制简单属性，然后在所有复杂对象上再次调用 Clone。克隆，这是我在所有复杂对象中创建的自定义方法。

现在它工作正常......

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-06-27T11:49:17.830

最简单的方法是在将对象放入缓存之前将它们序列化为 json，然后在将它们从缓存中取出时反序列化。这样你就不必对你的类做任何改变，比如实现 iclonable 或类似的。

```
Cache.Set(key, JsonConvert.SerializeObject(objectToCache), policy); 
```

接着

```
var cachedObject = (string)Cache[ComposeKey(key, domain)];
return JsonConvert.DeserializeObject<T>(cachedObject); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-27T15:03:33.913

这是我处理缓存中毒时的首选代码：

```
 var list_from_cache = HttpContext.Current.Cache["females"] as List<Females>;                
    var females = new List<Females>();
    females.AddRange(list_from_cache.Select(n => Cloner(n))); //clone all objects
   //now we can change the objects as much as we want without changing the cache
    females[0].Height=160; 
```

克隆器的代码，把它放在某个地方：（记得把 [Serializable] 放在你的克隆类上）

```
public static T Cloner<T>(T source) where T : class
{
    if (!typeof(T).IsSerializable)
    {
        throw new ArgumentException("The type must be serializable.", "source");
    }

    // Don't serialize a null object, simply return the default for that object
    if (Object.ReferenceEquals(source, null))
    {
        return default(T);
    }

    IFormatter formatter = new BinaryFormatter();
    Stream stream = new MemoryStream();
    using (stream)
    {
        formatter.Serialize(stream, source);
        stream.Seek(0, SeekOrigin.Begin);
        //return    (T)formatter.Deserialize(stream);
        var clone = formatter.Deserialize(stream) as T;
        return clone;

    }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-09-18T23:15:04.310

这可以使用 System.Collections.Immutable 解决。

您正在寻找 ImmutableList。

在此处获取 nuget-package：[https](https://www.nuget.org/packages/System.Collections.Immutable/) ://www.nuget.org/packages/System.Collections.Immutable/ 或：Install-Package System.Collections.Immutable

# regex - 使用 TextInput 的 IP 地址掩码

> ID：10171189
> 
> 赞同：5
> 
> 时间：2012-04-16T08:57:11.653
> 
> 标签：regex, qt, validation, ip, qml

我正在尝试`TextInput`为 IP 地址创建一个，并且我需要控制范围 ( `0-255`)。

我使用了`regExp`验证器，也使用了一个`inputMask`，`"000.000.000.000;0"`但这取消了验证器。

如何使用输入掩码创建 IP 验证器？

```
TextInput
{
  id: myLineEdit
  anchors.fill: parent
  cursorVisible: true
  focus: true

  validator:RegExpValidator
  {
    regExp:/^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\.){3}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$/
  }

  inputMask:  "000.000.000.000;0"
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-13T22:43:11.293

跳过输入掩码。

您应该为 IPv4 和 IPv6 定义不同的组件。

# ruby-on-rails - 在 Rails 3.2 中具有管理员访问权限的预启动（即将推出）页面

> ID：10171199
> 
> 赞同：0
> 
> 时间：2012-04-16T08:57:42.213
> 
> 标签：ruby-on-rails, authentication

我需要在我的 Rails 3.2 项目中添加一个带有电子邮件集合的“即将推出”预启动页面。

到目前为止，如果用户登录，我所看到的所有 gem 都不允许我绕过预启动页面。（在特定页面上登录）

我想为授权用户提供一个 100% 的工作网站，但为其他所有人呈现一个“即将推出”页面。实现这一目标的最佳方法是什么？

PS我尝试使用ActiveAdmin附带的Devise，但被它的助手卡住了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:19:41.090

试试这个：[https ://github.com/RailsApps/rails-prelaunch-signup](https://github.com/RailsApps/rails-prelaunch-signup)

# php - $_POST 变量在 php Titanium 中不起作用

> ID：10171202
> 
> 赞同：0
> 
> 时间：2012-04-16T08:58:03.693
> 
> 标签：php, javascript, android, post, titanium-mobile

我正在尝试在 JS 文件和 PHP 文件之间传递数据，但 PHP 中的变量`$_POST`不起作用，因此我无法在应用程序中进化！

JS代码：

```
var params = String(input.value);
    var xhr = Titanium.Network.createHTTPClient();
    xhr.open('GET','http://10.0.2.2/jobfinder/teste_demo_grafica/Resources/teste.php');
    xhr.send(params);
    xhr.onload = function(){

    var response = this.responseText;
    alert(response);
    if (response != null)
    {
        alert("voltou ao js e funca");
    }
    else
    {
        alert("-.-");
    }
    };

    xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

    xhr.onerror = function(e){alert('Transmission error: ' + e.error);};

}); 
```

现在是php代码：

```
<?php

// Connect to the database(host, username, password)
$con = mysql_connect('localhost','root','');

if (!$con)
{
    return ("Failed to make connection.");
    exit;
}

// Select the database. Enter the name of your database (not the same as the table name)
$db = mysql_select_db('jobfinder');
if (!$db)
{
    echo "Failed to select db.";
    exit;
}
$pesquisa= $_POST[params];
echo "pesquisa";
$sql = "SELECT * FROM oferta WHERE titulo like '%$pesquisa%'";  
$query = mysql_query($sql); 

if (mysql_num_rows($query) > 0)
{

    $row = mysql_fetch_array($query);
    $response = array(
        'titulo' => $row['titulo'],
        'oferta' => $row['descricao_oferta']
    );
    json_encode($response);
    echo $response['titulo'];

}
else
{

    // Else the username and/or password was invalid! Create an array, json_encode it and echo it out
    $response =  array(
        'message' => 'Não existem ofertas para esta pesquisa'
    );
    json_encode($response);

}
echo "php mode off";
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:02:17.390

猜测一下，您的 JavaScript 正在通过 GET 发送数据：

```
xhr.open('GET','http://10.0.2.2/jobfinder/teste_demo_grafica/Resources/teste.php'); 
```

但是您的 PHP 正在寻找 POST。将 POST 更改为 GET，它可能会起作用。或相反亦然

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:01:46.490

我现在有解决方案！如果我们看到这部分代码：

```
var params = String(input.value);
 ** var xhr = Titanium.Network.createHTTPClient();
    xhr.open('GET','http://10.0.2.2/jobfinder/teste_demo_grafica/Resources/teste.php');
    xhr.send(params);
    xhr.onload = function(){**

    var response = this.responseText;
    alert(response);
    if (response != null)
    {
        alert("voltou ao js e funca");
    }
    else
    {
        alert("-.-");
    }
    };

    xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");

    xhr.onerror = function(e){alert('Transmission error: ' + e.error);};

}); 
```

** 之间的 codw 是问题......所以我喜欢这样：

```
var url = "http://10.0.2.2/jobfinder/tessssssste/Resources/teste.php";//bug do titanium resolvido 
    var params = "?params=" + input.value;
    var encodedURI = encodeURI(url + params);

    var xhr = Titanium.Network.createHTTPClient();
    xhr.open("GET", encodedURI);
    xhr.send();

    xhr.onload = function(){ 
```

现在它对每个人都有效！！！！

# php - 用于生成用户友好的相对时间戳的 PHP 库

> ID：10171203
> 
> 赞同：10
> 
> 时间：2012-04-16T08:58:05.350
> 
> 标签：php, date, time

我正在寻找一个 PHP**库**，它可以生成用户友好的时间表示 - 例如时间戳为`time() - 2 * 3600`.

有几个现有问题的答案和博客文章（[1](https://stackoverflow.com/questions/2690504/php-producing-relative-date-time-from-timestamps)、[2](https://stackoverflow.com/questions/670161/how-to-create-a-friendly-date-format-for-example-submitted-2-days-ago)、[3](http://snipt.net/pkarl/pkarlcom-contextualtime/)），但都只包含代码片段 - 不是我可以安装和升级的库。

[Django 有一个](https://docs.djangoproject.com/en/dev/ref/contrib/humanize/)，Python 也有一个[独立的库](http://pypi.python.org/pypi/py-pretty/1)，Javascript 也有几个（[1、2、3](https://stackoverflow.com/questions/7641791/javascript-library-for-human-friendly-relative-date-formatting) [）](http://timeago.yarp.com/) —— [PHP](https://github.com/azer/relative-date)库在哪里？

* * *

一个库应该有以下内容：

*   文件
*   梨可安装
*   定期发布
*   （可选）翻译

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-17T11:46:50.433

由于似乎没有任何库，我自己制作了一个并将其包含在 PEAR 中：

**Date_HumanDiff** , [http://pear.php.net/package/Date_HumanDiff](http://pear.php.net/package/Date_HumanDiff)

代码位于[http://github.com/pear/Date_HumanDiff](http://github.com/pear/Date_HumanDiff)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:04:38.967

我知道[Kohana](http://kohanaframework.org/)有一个，你可以很容易地移植它。

该函数被调用`fuzzy_span()`。

见[http://kohanaframework.org/3.3/guide-api/Date#fuzzy_span](http://kohanaframework.org/3.3/guide-api/Date#fuzzy_span)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:07:12.340

Kohana Date 类`fuzzy_span()`为此提供了方法。但它无法回复您确切的值，例如“10 分钟”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:13:41.137

试试这个代码：

```
$current_date_time_get_updated_on_date_format = '';

function get_updated_on_date_format($dt_updated, $prefix = 'Updated ', $at = 'at ') {
    global $current_date_time_get_updated_on_date_format;

    if ($current_date_time_get_updated_on_date_format == '') {
        $current_date_time_get_updated_on_date_format = now();
    }

    $i_second_now         = strtotime($current_date_time_get_updated_on_date_format);
    $i_second_dt_updated  = strtotime($dt_updated);
    $i_second_diff        = $i_second_now - $i_second_dt_updated;
    $s_return_date_format = '';

    if ($i_second_diff < 0) {
        // Developers Uploading Time, Time Zone Gap Patch
        $s_return_date_format = $prefix . $at . date('g:ia \o\n F jS, Y', strtotime($dt_updated));
    } else if ($i_second_diff < 60) {
        $s_return_date_format = $prefix . $i_second_diff . ' seconds ago ';
    } elseif ($i_second_diff < (60 * 60)) {
        $s_return_date_format = $prefix . round(($i_second_diff / 60), 0) . ' minitues ago ';
    } elseif ($i_second_diff < (60 * 60 * 24)) {
        $s_return_date_format = $prefix . round(($i_second_diff / (60 * 60)), 0) . ' hours ago ';
    } else {
        $s_return_date_format = $prefix . $at . date('g:ia \o\n F jS, Y', strtotime($dt_updated));
    }

    return $s_return_date_format;

}

function now() {
    // it should extract database time in this format 'YYYY-MM-DD HH:MM:SS'
    return mysql_now_value;
} 
```

# c# - UserControl 上的奇怪行为绑定 DataContext 和 IsEnabled-Property

> ID：10171204
> 
> 赞同：0
> 
> 时间：2012-04-16T08:58:05.517
> 
> 标签：c#, wpf, binding, user-controls

我有一个奇怪的用户控件绑定`DataContext`和`IsEnabled`属性行为。

在我的页面中，我使用这样的 UserControl：

```
<httpsPort:HttpsPort DataContext="{Binding Path=Https}"
    IsEnabled="{Binding CurrentServiceState, Converter={StaticResource ServiceStateIsConfigableConverter}}" /> 
```

还有一个像这样的按钮：

```
<Button Content="start service"
    IsEnabled="{Binding CurrentServiceState, Converter={StaticResource ServiceStateIsConfigableConverter}}"
    Command="{Binding CmdConfigureService}" [...] /> 
```

解释：

转换器将 currentServiceState-Enum 转换为 bool。我的 Button 的行为符合我的预期（En/DisAbled）。

问题：我的按钮正确启用/禁用，但我的用户控件中的控件没有。

DataContext (HTTPS) 实际上不为空：

```
private HttpsPortViewModel _https;
    public HttpsPortViewModel Https
    {
        get
        {
            if (_https == null)
            {
                _https = new HttpsPortViewModel();
            }
            return _https;
        }
        set
        {
            _https = value;
            NotifyPropertyChanged(() => Https);
        }
    } 
```

我曾尝试在我的 UserControls 绑定上使用 FallbackValue=False，但随后 UserControl 甚至被禁用...

任何人都可以解释这些行为吗？非常感谢。

**更新：**

我的解决方法：

```
<Grid IsEnabled="{Binding CurrentServiceState, Converter={StaticResource ServiceStateIsConfigableConverter}}">
    <httpsPort:HttpsPort DataContext="{Binding Path=Https}" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:56:09.873

你不应该绑定你自己的`DataContext`. 任何绑定操作都使用`DataContext`，所以绑定 your`DataContext`是一个循环操作。即使这有效，也无法保证您的绑定的创建顺序，因此您的`IsEnabled`属性可能会在您`DataContext`绑定到其新值之前被绑定。

相反，您应该指定属性的完整路径。例如：

```
<httpsPort:HttpsPort IsEnabled="{Binding Https.CurrentServiceState, Converter={StaticResource ServiceStateIsConfigableConverter}}" /> 
```

# jquery - JQuery 隐藏功能在 Safari 中不起作用

> ID：10171208
> 
> 赞同：1
> 
> 时间：2012-04-16T08:58:23.820
> 
> 标签：jquery, safari

我创建了以下代码来显示和隐藏 div。这一次显示一个 div 并隐藏其他 div。这适用于除 Safari 之外的所有浏览器。

HTML

```
<div class="buttons">
    <a class="button" id="showdiv1">Div 1</a>
    <a class="button" id="showdiv2">Div 2</a>
    <a class="button" id="showdiv3">Div 3</a>
    <a class="button" id="showdiv4">Div 4</a>
</div>
<div id="div1">1</div>
<div id="div2" style="display:none;">2</div>
<div id="div3" style="display:none;">3</div>
<div id="div4" style="display:none;">4</div> 
```

jQuery

```
$('#showdiv1').click( function () {
    $('div[id^=div]').hide();
    $('#div1').show();
});
$('#showdiv2').click( function () {
    $('div[id^=div]').hide();
    $('#div2').show();
});
$('#showdiv3').click( function () {
    $('div[id^=div]').hide();
    $('#div3').show();
});
$('#showdiv4').click( function () {
    $('div[id^=div]').hide();
    $('#div4').show();
});​ 
```

我是一个绝对的初学者，并认为 Jquery 将是显示多个 div 的最优雅的解决方案，它是！Safari除外！

任何帮助都将得到很好的接受！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:03:26.670

我认为 Safari 的问题是因为它不会在没有属性`click`的元素上引发事件。`a``href`

此外，您的代码可以简化。试试这个：

```
<div class="buttons">
    <a class="button" id="showdiv1" href="#div1">Div 1</a>
    <a class="button" id="showdiv2" href="#div2">Div 2</a>
    <a class="button" id="showdiv3" href="#div3">Div 3</a>
    <a class="button" id="showdiv4" href="#div4">Div 4</a>
</div>
<div id="div1" class="child">1</div>
<div id="div2" class="child" style="display:none;">2</div>
<div id="div3" class="child" style="display:none;">3</div>
<div id="div4" class="child" style="display:none;">4</div> 
```

jQuery

```
$(".button").click(function(e) {
    e.preventDefault();
    $(".child").hide();
    $($(this).attr("href")).show();
}); 
```

请注意使用类将元素组合在一起，这样您就不会有太多的代码重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T14:53:50.580

您在问题中引用的代码末尾有一个无效字符。在决赛之后是一个 U+200B 字符`;`。如果我实际上复制并粘贴您的代码，它会在我尝试过的每个浏览器中失败：http: [//jsbin.com/ojezin](http://jsbin.com/ojezin)首先在此端构建测试用例时（请参阅我对问题的评论），我以为我以某种方式介绍了那个角色，所以我就把它删了。但后来我开始思考，又做了一次复制和粘贴，瞧，角色就在那里。

# javascript - 在java脚本中转换为gmt日期的函数

> ID：10171214
> 
> 赞同：1
> 
> 时间：2012-04-16T08:58:38.563
> 
> 标签：javascript, date, date-conversion

我有一个出发日期 = 日期字符串（2012 年 4 月 16 日）、时间字符串（05:00）和**时区（亚洲/迪拜）** 和 arraivalDate = 日期字符串（2012 年 4 月 16 日）、时间字符串（02:00） ，和**时区（美国/纽约）**

现在我需要比较上述日期，即

```
if (departureDate > arraivalDate) {
    // do something
} 
```

这种比较的目的是检查到达时间是否在出发时间之前。javascript中有什么功能可以做到这一点吗？请提供整个功能..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:02:17.787

查看[Date 对象](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)文档。

有一种[`getTime`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTime)方法可以让您根据通用时间获取与指定日期的时间相对应的数值。这意味着该`getTime`方法返回的值是自 1970 年 1 月 1 日 00:00:00 UTC 以来的毫秒数。

这意味着您可以执行以下操作：

```
if (departureDate.getTime() > arrivalDate.getTime()) {
    // Do something
} 
```

前提是您通过以下方式声明日期：

```
var departureDate = new Date(Date.UTC(year, month, day, hour, minute, second))
    arrivalDate = new Date(Date.UTC(year, month, day, hour, minute, second)) 
```

这样它就尊重时区。不过，您需要指定 UTC 日期。Javascript 没有比这更好的处理时区的内置方法。正如我的第一句话所述，请查看有关 Date 对象的文档。

编辑：在聊天中与您交谈后，这是我认为您想要的：

根据你有以下几点：

```
var orgti = document.getElementById('orginTimeZone').value; 
var desct = document.getElementById('descTimeZone').value;
var selfwDepDate = document.forms[0].fwDepartureDate.value; 
var selfwDepTime = document.forms[0].fwDepartureTime.value; 
var selfwArrDate = document.forms[0].fwArrivalDate.value; 
var selfwArrTime = document.forms[0].fwArrivalTime.value; 
```

您可以这样做来比较两个日期：

```
var departureDate = new Date( Date.UTC( selfwDepDate + selfwDepTime ) ) // This creates a date with what you got
var arrivalDate = new Date( Date.UTC( selfwArrDate + selfwArrTime ) ) // This too

// Now the tricky part: you substract the timezone, so that you get the same referential for both dates
departureDate = departureDate.getTime() - ( orgit * 3600000 ) // Multiplying by 3600000 to transform hours into milliseconds since "getTime" returns milliseconds
arrivalDate = arrivalDate.getTime() - ( desct * 3600000 ) // Same

// Now, you've got two timestamps based on dates with the same referential. You can use:
if ( departureDate > arrivalDate ) {
    // Do something
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:39:45.237

如前所述，您仍然需要使用 getTime 来提取实际秒数进行比较。如果您有数字偏移量，您可以在比较之前将它们简单地添加到您的日期中。

```
// Assuming departure is in +4 TZ (Asia/Duabai) and arrival is in -4 TZ (America/New_York)
var departureMsec = departureDate.getTime() + (+4 * 3600 * 1000)
var arrivalMsec = arrivalDate.getTime() + (-4 * 3600 * 1000)
if (departureMsec > arrivalMsec) {
    // Do something
} 
```

如果您没有偏移量，事情会变得更加复杂，因为输入中的数字或时区不限于某些常见的子集。我不知道是否有带有处理 JavaScript 代码的 tzdata 版本，所以我会为您提供如何手动操作的指示。如果您使用有限数量的区域并且它们都没有夏令时，那么您可以简单地将偏移量放入哈希中：

```
var offsets={
    "Asia/Dubai": +4,
    "America/New_York": -4,
} 
```

并使用那里的数据。如果您需要任意数量的区域，最好的办法是将 tzdata 解析为这样的哈希，并为每个可能的日期手动处理正确的日光调整，这会变得越来越难，因为随着法律的改变，您将拥有支持旧日期的旧转换和新日期的新转换。如果您详细说明您的需求，我可以添加更多详细信息。

# sql - SQL 使用 CMD 将 .sql 文件中的数据插入到表中

> ID：10171216
> 
> 赞同：4
> 
> 时间：2012-04-16T08:58:49.480
> 
> 标签：sql, sql-server, file, insert, cmd

我想将 .sql 文件中的数据插入到我的 SQL 表中。而这一切都与 CMD。

我的文件包含该行：

```
INSERT INTO MYTABLE
VALUES (1, 2, 25, 'AK00008GP005L', '2008-04-19 11:31:00', '000', 1, 239.97, NULL, 'GH783MF', NULL, NULL); 
```

有可能的？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T09:27:04.943

您可以使用[`SQLCMD`](http://msdn.microsoft.com/en-us/library/ms162773%28v=sql.105%29.aspx)（如 Sibster 建议的那样）。假设包含查询的文件被调用`insert.sql`，那么最简单形式的命令（使用 NT 身份验证）将类似于：

```
sqlcmd -S <servername> -E -d <dbname - TRY> -i insert.sql 
```

要使用 SQL 身份验证：

```
sqlcmd -S <servername> -U <username> -P <password> -d <dbname - TRY> -i insert.sql 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:17:05.353

使用 microsoft 的[sqlcmd](http://msdn.microsoft.com/en-us/library/ms162773.aspx)工具。

[这里](http://msdn.microsoft.com/en-us/library/ms170572.aspx)有一个例子

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-09T14:59:08.567

尝试这个：

1.  打开命令提示符窗口。

2.  类型：`sqlcmd -S myServer\instanceName -i C:\myScript.sql`

3.  按 ENTER。

# java - 重用字符串缓冲区

> ID：10171223
> 
> 赞同：2
> 
> 时间：2012-04-16T08:59:03.803
> 
> 标签：java, performance, jdk1.6, jdk1.5, stringbuffer

我知道 concat、StringBuffer 和 StringBuilder 之间的区别。我知道 StringBuffer.toString 后备数组存在内存问题，它会导致内存爆炸。我什至知道 JDK Sun 优化包括为初始容量分配 2 的幂。

但我仍然想知道重用 StringBuffer（在 toString() 中使用）的最佳方法，或者重用 StringBuffer 是否相关。考虑到内存和速度性能，哪一个更好？

```
public String toString2() {
  StringBuffer sb = new StringBuffer(<size>) 
  ... several .append(stuff) ...
  sb.trimToSize()
  return sb.toString()
} 
```

或者

```
private StringBuffer sb = new StringBuffer(<size>) 
public String toString2() {
  sb.delete()
  sb.setLength(1024)
  sb.trimToSize() 
  ... several .append(stuff) ...
  return sb.toString()
} 
```

为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:02:06.920

我想说第一个示例绝对更清晰、更易于阅读且更安全——这几乎总是胜过性能微优化问题。**如果**您确实有性能问题，**并且**您可以证明（通过具体测量）它是由这段代码引起的，**并且**您还可以通过测量证明在您的本地环境中，第二个示例明显更快，那么 - 和**只有这样**- 你有充分的理由使用它。

否则，您的问题没有一般性的答案。如果人们声称第二个示例平均快了*n* %，如果它在您的机器上没有任何区别（或者因为不同的环境，或者因为很少调用实际的代码片段，那么它会对您有什么帮助？在您的应用程序中）？

然而，我个人的直觉是，在现代 JVM 上（阅读：至少在 JDK6 上，但可能已经在 J​​DK5 上），第一个示例实际上可能更快，因为巧妙的 GC 技巧使得短期对象的分配/释放非常便宜的。特别是如果您使用 a`StringBuilder`而不是`StringBuffer`，它没有同步开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:09:38.027

1.  使用`StringBuilder`-- 的一种非同步变体，`StringBuffer`它可以直接为您提供开箱即用的性能提升。
2.  无需调用`trimToSize`- 您只是强制`StringBuilder`创建一个新的 char 数组。
3.  `StringBuilder`由于 JVM 针对短期对象的分配进行了高度优化，因此通过重用 a 可以节省非常非常少的费用。
4.  `StringBuilder`仅当您无法在单个表达式中表达您的字符串时才使用而不是简单的连接表达式 - 例如，您正在迭代某些内容。使用 .concatenation 编译成基本相同的代码`StringBuilder`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:04:05.493

如果性能是一个问题，我根本不会使用 StringBuffer 。

如果你不能确定只有一个线程会调用 toString()，我每次都会创建一个 StringBuilder。

您遇到的另一个问题是不同的数据类型会产生大量垃圾，例如`int`，或者`double`这会减少您可能获得的任何好处。

我不会回收 StringBuilder，我只会让事情变得简单。如果您真的需要最大性能，我会使用不同的解决方案，例如带有不会产生垃圾的库的直接 ByteBuffer。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:11:21.853

尝试两者的性能测试。与所有性能问题一样，它取决于上下文以及方法的调用方式。

几点注意事项：

*   `StringBuilder`不是线程安全的，但在您的第一个示例中，线程安全不是问题，因为您的方法没有使用字段。这使得`StringBuilder`比`StringBuffer`.
*   您的第二种方法不是线程安全的，因此如果您有多个线程调用该方法，那么两个线程都将使用 safe `StringBuffer`，因此您最终会得到一个包含来自两个调用的元素的字符串。
*   如果您保留`StringBuffer`周围（第二个示例），则取决于您使用该方法的频率，您实际上可能会保留更多内存，因为垃圾收集器不会收集 使用的内存`StringBuffer`，而这些内存可能会被其他对象使用。

# android - 如何获取我的 InputMethodService

> ID：10171225
> 
> 赞同：3
> 
> 时间：2012-04-16T08:59:09.490
> 
> 标签：android, ime

我的应用程序有 2 部分。一个 InputMethodService 和一个 Activity。我所做的是单击活动中的 Button 以查看所有可用的 InputMethods，但我在列表中看不到我的 InputMethod。

但之后我可以从设置中看到它>>>语言和键盘

这是相关代码

```
InputMethodManager inputManager = (InputMethodManager) getSystemService (Context.INPUT_METHOD_SERVICE);
                    inputManager.showInputMethodPicker(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T09:51:44.293

这可能会有所帮助：

```
InputMethodManager imeManager = (InputMethodManager) getApplicationContext().getSystemService(INPUT_METHOD_SERVICE); 
List<InputMethodInfo> lst = imeManager.getEnabledInputMethodList();
for (InputMethodInfo info : lst) {
   System.out.println(info.getId() + " " + info.loadLabel(getPackageManager()).toString());
} 
```

# java - Apache common 中的 XMLConfiguration 是否支持 CDATA？

> ID：10171229
> 
> 赞同：1
> 
> 时间：2012-04-16T08:59:25.060
> 
> 标签：java, apache, cdata, xml-configuration

我正在使用配置 1.6。

我有一个 xml 文件，比如

```
<property>
    <name>sql</name>
    <value><![CDATA[select a, b from c]]></value>
</property> 
```

我希望将“select a, b from c”作为一个完整的字符串，但我将“select a”和“b from c”作为列表。

你可能会建议我用逗号加入字符串，但我项目中的其他地方取决于这个属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:03:57.127

像这样更改 PropertiesConfiguration 对象的属性：

```
AbstractConfiguration.setListDelimiter(0); 
```

将分隔符设置为 0 将完全禁用值拆分。

那应该行得通。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:58:32.013

使用 commons 配置 1.9 建议使用：

```
 config = new XMLConfiguration();
    config.setListDelimiter((char) 0);
    config.setDelimiterParsingDisabled(true);
    config.setAttributeSplittingDisabled(true);
    config.load(resource); 
```

# objective-c - FMDatabase：留下失败的插入是否安全（违反了唯一的 PK 密钥）？

> ID：10171236
> 
> 赞同：0
> 
> 时间：2012-04-16T08:59:49.403
> 
> 标签：objective-c, ios, sqlite, fmdb

目前，开发一个需要在服务器之间同步其数据的应用程序。该应用程序大量使用 SQLite，因此我们转向原始 sqlite 并决定使用 FMDatabase。我们的表是非规范化的并且没有键，因为我们不管理数据状态，只是收集数据并发送它。我们在某个时间间隔更新表（从服务器获取并插入新内容），但向服务器发送数据更为常见。

来自服务器的数据以带有 id 值（char 类型 GUID 值）的完整记录的形式出现，因此我们为表创建了 PK 键以包含这些 id 列。问题是，从服务器获取数据时，我只需要插入新记录，目前，我正在使用这些 id 值进行插入。由于 id 列上的唯一 PK 约束，一些记录被插入（新）和一些失败。对我来说，这很好，只是在控制台中惹恼消息（违反唯一键）并且不确定它是否会影响性能等。我可以在插入新记录之前循环记录，找到现有记录并只插入真正的新记录，但我认为这是一种浪费。

另外，我可以制作显式的内部 int id（PK 索引更快），但我们的表与 FK 无关，所以它是多余的。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:10:54.837

[INSERT 语句](http://www.sqlite.org/lang_insert.html)带有可选的[ON CONFLICT 子句](http://www.sqlite.org/lang_conflict.html)，因此如果您想抑制警告，只需使用 INSERT OR IGNORE 并且重复的 PK 将被忽略。

# openlayers - OpenLayers 特征数组为空

> ID：10171238
> 
> 赞同：3
> 
> 时间：2012-04-16T08:59:54.357
> 
> 标签：openlayers

我有一张显示带有一些标记的 KML 矢量图层的地图。当您单击标记时，它会弹出一个信息框。我希望能够根据传入页面的参数自动弹出一个信息框。我想我需要通过使用 getFeaturesByAttribute() 来查找名称来做到这一点，但是 features 数组似乎总是为空。（虽然我使用 FireBug 时可以看到内容）

我需要做什么才能获取数组中的项目？

代码：

```
function init()
{
        var options = {
            projection: new OpenLayers.Projection("EPSG:900913"),
            displayProjection: new OpenLayers.Projection("EPSG:4326"),
            units: "m",
        };
        map = new OpenLayers.Map('map', options);
        var mapnik = new OpenLayers.Layer.OSM("OpenStreetMap");
        var gmap = new OpenLayers.Layer.Google("Google", {sphericalMercator:true});
        var gsat = new OpenLayers.Layer.Google(
            "Google Satellite",
            {type: google.maps.MapTypeId.SATELLITE, numZoomLevels: 22}
        );

        groups = new OpenLayers.Layer.Vector("Groups", {
            projection: map.displayProjection,
            strategies: [new OpenLayers.Strategy.Fixed()],
            protocol: new OpenLayers.Protocol.HTTP({
                url: "http://maps.google.co.uk/maps/ms?msa=0&msid=210450558816094618535.0004bd79ceb30e9acb9da&output=kml",
                format: new OpenLayers.Format.KML({
                    extractStyles: true,
                    extractAttributes: true
                })
            })
        });

        map.addLayers([mapnik, gmap, gsat, groups]);

        select = new OpenLayers.Control.SelectFeature(groups);

        groups.events.on({
            "featureselected": onFeatureSelect,
            "featureunselected": onFeatureUnselect
        });

        map.addControl(select);
        select.activate();   

        map.addControl(new OpenLayers.Control.LayerSwitcher());

        var center = new OpenLayers.LonLat(-2.58789,51.52283).transform(map.displayProjection, map.projection);
        var zoom = 12
        map.setCenter(center, zoom);

        alert(groups.features.length);   // is always 0

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:29:08.910

我认为这个问题是因为 HTTP 调用异步发生以填充层的功能。因此，您在 HTTP 调用返回之前点击 alert(groups.features.length) ，因此该图层没有功能，因此 groups.features.length 正确为 0。如果您想以这种方式查看功能数量，您需要将函数附加到将在 HTTP 事件返回后调用的[图层 loadend 事件](http://dev.openlayers.org/docs/files/OpenLayers/Layer-js.html#OpenLayers.Layer.events)，您将能够询问所有功能。

# playframework-2.0 - 从空对象上绑定：RuntimeException：java.lang.reflect.InvocationTargetException

> ID：10171239
> 
> 赞同：5
> 
> 时间：2012-04-16T08:59:54.583
> 
> 标签：playframework-2.0

我正在继续学习 Play 2.0，并且正在处理**登录表单**。基本上与 Zentasks 提供的示例项目类似的形式......

我的问题是在数据库中找不到用户时的错误消息，错误发生在以下行：

```
Form<Login> loginForm = form(Login.class).bindFromRequest(); 
```

我的模型看起来像：

```
@Entity
public class Person extends Model {

@Constraints.Required
public String password;

@Constraints.Required
public String email;

// -- Queries

public static Model.Finder<String, Person> find = new Model.Finder(String.class, Person.class);

/**
 * Authenticate a User.
 */
public static Person authenticate(String email, String password) {
Logger.info("email: " + email + " and password is:" + password);
    return find.where().eq("email", email).eq("password", password).findUnique();
}

/**
 * Retrieve all users.
 */
public static List<Person> findAll() {
return find.all();
}

// --

} 
```

我的控制器看起来像：

```
/**
 * Handle login form submission.
 */
public static Result authenticate() {
play.Logger.info("Entering authenticated method...");

Form<Login> loginForm = form(Login.class).bindFromRequest(); //ERROR OCCURS HERE

if (loginForm.hasErrors()) {
    return badRequest(views.html.login.render(loginForm));
} else {
    session("email", loginForm.get().email);
    return redirect(routes.LandingPage.index());
}
} 
```

我在 Application.java 中的登录类：

```
public static class Login {

public String email;
public String password;

public String validate() {
    Logger.info("Entering validation in class login... " + email + "   " + password);
    if (Person.authenticate(email, password) == null) {
    return "Invalid user or password";
    }
    return null;
}
} 
```

顺便说一句，我使用 mySql 作为我的数据库。而且我有一个有效的用户，代码工作得很好......

**更新 17-04-2012**

如果您在 Play2.0 中遇到过奇怪的事情，请仔细调试。我来自 PHP，我尝试使用 sysouts 进行调试！但这不行。运行**play debug run**并按 F6 直到你知道哪里出错了！

就我而言，我正在记录一些尚未保存在数据库中的东西，实际上它还不存在！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:56:35.913

这是一个错字（**静态**部分）吗？

```
public static class Login {
} 
```

如果不是这可能是原因。AFAIK Form 类必须是 POJO。

# c++ - 为什么我不能使用模板类的父类变量？

> ID：10171242
> 
> 赞同：6
> 
> 时间：2012-04-16T09:00:06.807
> 
> 标签：c++, templates, inheritance

啊

```
template <typename T>
class A
{
    public:
    int a;
} 
```

bh

```
template <typename T>
class B : public A<T>
{
   public:
   int f();
}

template <typename T>
int B<T>::f()
{
    int t;
    t = this->a; //Okay
    t = a //Error
    return 0;
} 
```

为什么我不使用时会发生错误`this->`？

我可以`this->`用某种方法省略吗？

（我修正了一些错误）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-16T09:19:10.953

模板实例化有两个阶段（“两阶段名称查找”）。

在第一阶段，所有非依赖名称都被解析（查找）。在第二阶段，从属名称被解析。

依赖名称是依赖于模板参数的名称，例如：

```
template <typename T>
void foo() {
    x = 0;    // <- Non-dependent, nothing in that refers to "T".
              //    Thus looked up in phase 1, therefore, an 'x' must be
              //    visible.

    T::x = 0; // <- Dependent, because it depends on "T".
              //    Looked up in phase 2, which is when it must be visible.
} 
```

现在，你写：

```
t = this->a; //Okay
t = a //Error 
```

这正是我所描述的。在好的术语中，`t`在阶段 2 中查找，因为`this`取决于模板参数。

在第 1 阶段查找错误的术语，因为该名称中的任何内容都不依赖于模板参数。但是在阶段 1， no`a`​​是可见的，因为编译器无法在阶段 1 内省基类模板，因为模板可以被特化并且在实例化点，它可以远离主模板声明，另一个没有 no的特化`a`可能可见。

例子：

```
 template <typename T>
    struct Base {
    };

    template <typename T>
    struct Derived : Base<T> {
        void foo() {
            this->a = 0; // As is valid. `this->a` is looked up in phase 2.
        }
    };

    template <> struct Base<int> {
        int a;            
    };

    int main () 
    {
            // The following declarations trigger phase 2 lookup.

            Derived<int>   di;  // valid, because a later specialized
                                // Base<int> is used and all symbols
                                // are resolved.

            Derived<float> df;  // not valid
    } 
```

顺便说一句，我曾经写过这个->在我的低频博客中*[不仅是风格问题。](http://phresnel.org/blog/2009/04/this-is-not-only-a-matter-of-style/)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:31:16.453

`B`是一个模板，因此它的名称是非依赖的，因此必须在定义模板时查找，而不是在实例化模板时查找。但是，在定义模板时，依赖名称是未知的（可能存在`A`迄今为止尚未看到的基类模板的特化），编译器无法将非限定名称解析为基类。您可以通过`this->`限定将名称带入当前范围，方法是在其前面加上`A<T>::`或`using`声明：

```
template <typename T>
class B : public A<T>
{
   public:
   using A<T>::a;
   int f();
}; 
```

`// Error`另请注意，您在类声明和标有注释的行之后缺少分号。

# jquery - Jquery 如何获取当前 url 并更改查询参数

> ID：10171245
> 
> 赞同：0
> 
> 时间：2012-04-16T09:00:35.690
> 
> 标签：jquery

当前网址

```
 http://www.example.com/search/?accommodation=1&venue=&seating=2&min=&max=&feature_list=7|8|9 
```

在 jquery 中有没有办法我如何获取我的 url，它是上面的那个......并且 feature_list 参数将其值**(7|8|9)更改为****8|9|10**之类的东西？

我不需要更改 URL 标头，我只想将此输出链接到 HREF ..

这就是我想从当前 URL 实现的目标。

```
<a href="http://www.example.com/search/?accommodation=1&venue=&seating=2&min=&max=&feature_list=8|9|10">Link</a> 
```

我将其用作过滤系统...

这是一个动态网址，所以 7|8|9 一直在变化...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:03:32.643

```
var url = window.location.href.replace('7|8|9', '8|9|10'),
    $link = $('<a href="'+ url +'">Link</a>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:25:38.547

也许不是最好的解决方案，但是..

```
var urla = window.location.search.replace('?','').split('&');

$.each(urla, function(j,v)
{
  v=v.split('=');

  if(v[0]=='feature_list')
  {
    var ft=parseInt(v[1].replace(/.*\|/, ''));
    var fts=[];

    for(var i=ft-1; i<ft+2; i++)
      fts.push(i);

    urla[j]=v[0]+'='+(fts.join(','));
  }  
});

urla = '?'+urla.join('&');
$link = $('<a/>',{'href':urla}).text('Link'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:24:55.133

```
 query = 'feature_list'    
  query = query.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
        var expr = "[\\?&]"+query+"=([^&#]*)";
        var regex = new RegExp( expr );
        var results = regex.exec( window.location.href );
        if( results !== null ) {
            return  results[1];
            return   decodeURIComponent(results[1].replace(/\+/g, " "));
        } else {
            return   false;
        } 
```

我找到的这个函数将返回顶部给出的某个参数的值

然后使用 elclanrs 解决方案并做了

```
 url = window.location.href.replace(ans, '8|9|10'),
 window.location.href = url; 
```

# python - 单个网格行中的两行文本

> ID：10171249
> 
> 赞同：0
> 
> 时间：2012-04-16T09:00:57.293
> 
> 标签：python, text, grid, tkinter, row

有谁知道是否可以`grid`在 TKinter 中使用将两行文本放在一行中？

如果我使字体足够小，我可以将文本分成两行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:15:29.833

```
>>> import Tkinter as tk
>>> root = tk.Tk()
>>> tk.Label(master=root, text="Line1\nLine2").grid(row=0)
>>> root.mainloop() 
```

为我工作并制作了这样的图像：

![根窗口](../Images/fc835acd024d0ee94223d4040e52d309.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:01:16.303

您可以将多个项目放在一个单元格中，但这是非常不寻常的，可能会有令人惊讶的行为，并且有更好的方法来实现相同的效果。

例如，网格是不可见的，因此您可以拥有任意多的行来实现您可以想象的任何外观。此外，“项目”的定义非常宽松——您可以创建一个框架，并在该框架中放置两个标签，该框架可以使用网格在单行中显示两行文本的外观网格行。您还可以使用文本小部件，它可以让您放置任意多行的文本。

# ios - 检查下载的 mp4 文件是否正确下载以播放。- iphone sdk

> ID：10171250
> 
> 赞同：2
> 
> 时间：2012-04-16T09:00:59.280
> 
> 标签：ios, ios4, video, download, mp4

我已经开发了从服务器下载 mp4 视频的代码。它有时确实可以正常工作，但有时下载的视频不正确，因此无法播放。有时下载的视频只有 2kb，这是不正确的，或者可能没有正确下载。那么有什么方法可以检查下载的 mp4 文件是否正确？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:22:56.883

我不是 iPhone 开发人员，但我建议对下载的文件计算校验和，并将其与可以从下载文件的位置请求的校验和进行比较。

检查例如[从 NSData 计算 iPhone 上的校验和以](https://stackoverflow.com/questions/1028742/compute-a-checksum-on-the-iphone-from-nsdata)获取校验和示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-06T19:21:41.603

`AVAssetExportSession`在用于缓存从服务器流式传输的视频时，我遇到了类似的问题。我通过使用[isPlayable](https://developer.apple.com/documentation/avfoundation/avasset/1385974-isplayable) on解决了这个问题`AVAsset`。如果属性返回`false`，我将删除缓存的视频并将其从服务器流式传输。希望这能解决您的问题。

# ivy - 如何使用本地文件夹作为 ivy 存储库？

> ID：10171254
> 
> 赞同：0
> 
> 时间：2012-04-16T09:01:12.753
> 
> 标签：ivy

如果我的项目 lib 文件夹中已经有 jars，并且我想将该文件夹用作我的存储库，而不是将其下载并安装到我的 iv2/local 文件夹中，该怎么办。

现在它第一次将 jars 从 maven 下载到我的本地存储库。在存储库中找不到一些 jar，但我将它们放在 lib 文件夹中，并且会撒谎从那里检索它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:54:07.107

您需要创建一个在[链](https://ant.apache.org/ivy/history/latest-milestone/resolver/chain.html)[`ivysettings.xml`](https://ant.apache.org/ivy/history/latest-milestone/settings.html)中定义两个[解析器](https://ant.apache.org/ivy/history/latest-milestone/settings/resolvers.html)的位置：

*   [文件系统解析器](https://ant.apache.org/ivy/history/latest-milestone/resolver/filesystem.html)
*   [Maven 存储库解析器](https://ant.apache.org/ivy/history/latest-milestone/resolver/ibiblio.html)

这可能看起来像这样（来自[链解析器](https://ant.apache.org/ivy/history/latest-milestone/resolver/chain.html)的示例：

```
<ivysettings>
    <resolvers>

          <chain name="test">
            <filesystem name="1">
              <ivy pattern="${ivy.settings.dir}/lib/[organisation]/[module]/ivys/ivy-[revision].xml"/>
              <artifact pattern="${ivy.settings.dir}/lib/[organisation]/[module]/[type]s/[artifact]-[revision].[ext]"/>
            </filesystem>
            <ibiblio name="maven2" m2compatible="true"/>
          </chain>  
    </resolvers>

</ivysettings> 
```

`${ivy.settings.dir}`是您的 ivysettings.xml 所在的文件夹。

要在您的文件中包含/设置 ivysettings.xml，您`build.xml`需要使用[设置任务](https://ant.apache.org/ivy/history/latest-milestone/use/settings.html)：

```
<ivy:settings /> 
```

或者

```
<ivy:settings file="path_to_file/ivysettings.xml" /> 
```

# android - 从图库视图中选择多个图像

> ID：10171256
> 
> 赞同：6
> 
> 时间：2012-04-16T09:01:28.983
> 
> 标签：android, android-gallery, custom-adapter

我想创建一个画廊视图，我想在其中使用橙色矩形框选择多个图像。

它应该如下所示：

![画廊视图](../Images/b42e353ba7f9e66597f4f7c5b71941e4.png)

屏幕看起来像[http://i.imgur.com/qAO0Q.jpg](https://i.imgur.com/qAO0Q.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T14:12:48.833

## 您设计中的问题：

通过在两侧拖动拇指进行选择将是一个额外的头痛。首先，在进行选择时处理滚动。其次，处理触摸/拖动并决定是否在选择中包含项目。

## **设计变更：**

让我建议一种更简单的方法来扩展您的选择矩形**：**

我假设选择从长按任何项目开始。橙色选择矩形出现在这个*初始*项目上。然后，对任何相邻项目的单击应该包括放置在被点击的项目和包含被点击的项目之间的所有*项目*。这将使选择处理变得更加简单，错误更少。

## **执行：**

现在这个设计应该不会太难实现。扩展 Gallery 小部件并让成员指示选择是否正在进行以及选择的范围是什么（`startIndex`和`endIndex`）。覆盖该方法并从到项目`onDraw`绘制选择矩形。`startIndex``endIndex`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:05:03.980

然后，您可以为您的 GalleryView 定义一个自定义适配器，使用 ImageView 和 CheckBox 定义一个行 XML 布局文件，并在自定义适配器类中扩展此 XML 布局。仅供参考，您将通过扩展类来定义自定义适配器`BaseAdapter`类。

检查此示例：[Android 自定义图片库，在网格中带有复选框以选择多个](http://vikaskanani.wordpress.com/2011/07/20/android-custom-image-gallery-with-checkbox-in-grid-to-select-multiple/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T13:49:39.257

你可以做什么：

*   为幻灯片中的所有图像提供 ids
*   使用javascript设置
*   图像的 onclick 事件 在 onclick 事件上启用边框

添加到 img 标签

```
<IMG id=”1” namespace=”clicked” onclick="TriggerEvent(this)"></IMG> 
```

创建更改所选 id 的命名空间的脚本触发事件。

包括 css 以启用边框：

```
.clicked{
border-style:solid;
border-width:3px;} 
```

# hibernate - 与实体中的多对多关系

> ID：10171261
> 
> 赞同：0
> 
> 时间：2012-04-16T09:01:34.303
> 
> 标签：hibernate

我有一个名为 provider 的休眠实体，如下所示，

```
@Entity
@Table
public class Provider {

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private long id;

    @Column
    private String name;    

    @Column
    private String type;    

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }   

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
} 
```

它包含基于类型的不同类型的提供程序，

*   对于学生提供者 - 类型是 st
*   对于课程提供者 - 类型是 cp

在这里，我需要在学生提供者和课程提供者之间建立多对多关系。为此，我创建了一个新实体，如下所示，

```
public class StudentToCourseProvider {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;

    @ManyToOne
    @JoinColumn(name = "student_id")
    private Provider studentProvider;

    @ManyToOne
    @JoinColumn(name = "course_id")
    private List<Provider> courseProvider;

    public Provider getStudentProvider() {
        return studentProvider;
    }

    public void setClinicalProvider(Provider studentProvider) {
        this.studentProvider = studentProvider;
    }

    public Provider getCourseProvider() {
        return courseProvider;
    }

    public void setCourseProvider(Provider courseProvider) {
        this.courseProvider = courseProvider;
    }

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }
} 
```

我需要创建没有 id（主键）的**StudentToCourseProvider**实体。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:19:06.290

一种可能的方法是使用继承：

```
@Entity 
@Inheritence(strategy = InheritenceType.SINGLE_TABLE)
@DiscriminatorColumn(name = "type")
public abstract class Provider { ... }

@Entity
@Discriminator("st")
public class StudentProvider extends Provider {
    @ManyToMany
    private List<CourseProvider> courseProviders = ...;
}

@Entity
@Discriminator("cp")
public class CourseProvider extends Provider {
    @ManyToMany(mappedBy = "courseProviders")
    private List<StudentProvider> studentProviders = ...;
} 
```

在这种情况下，您从类中删除`type`字段`Provider`并将其变成鉴别器。如果您预定义了一组可能的类型，则此方法有效。

或者，您可以在代码中创建单个多对多关系`Provider`并强制执行您的约束。如果您有一组不确定的可能类型，这将起作用。请注意，在这种情况下，您应该注意关系的方向性。

# vim - 如何撤消 ViM 中的 Cs Cx？

> ID：10171262
> 
> 赞同：3
> 
> 时间：2012-04-16T09:01:36.990
> 
> 标签：vim, emacs, vi

有时我会忘记自己在 ViM 中，然后按 Cs Cx，即 Emacs 中的 Save and Exit。

这在 ViM 中具有写入`^X`和冻结的效果。

有谁知道在这种情况下如何撤消或返回 ViM，以便我可以保存更改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T09:06:07.307

如果没有进行不同的配置，Cs 会向您的终端发送停止信号。要“停止”，请使用 Cq [。请参阅新手 bash 技巧](http://tldp.org/LDP/LG/issue14/bashtip.html)手册中的此条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:04:16.797

`CTRL + q`. 在控制台`CTRL s`中是滚动锁定，恢复是`CTRL + q`.

# c# - 如何将 ComboBox.SelectedIndex 添加为 FK

> ID：10171270
> 
> 赞同：0
> 
> 时间：2012-04-16T09:02:08.890
> 
> 标签：c#, .net, .net-3.5, entity-framework-4.1, foreign-keys

我有一个包含 ComboBox 的表单，其中包含有关城市的数据。我想将 FK cityid 插入到我的 Employee 表中。那么我该如何添加呢？

我正在做以下事情，但它会给我一个错误：

```
Payroll.Entities.City p = (Payroll.Entities.City) cmbCity.SelectedIndex; 
```

如何在员工表中分配城市 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:08:57.667

```
var city = db.Cities.Single(c => c.Id == Int32.Parse(cmbCity.SelectedValue));
employee.City = city; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:54:03.500

如果将 Cities 加载到组合框中，则`SelectedItem`应该可以：

```
Payroll.Entities.City p = (Payroll.Entities.City) cmbCity.SelectedItem; 
```

但是，如果您只是将部分城市数据加载到组合框中，那么这样的事情应该可以工作：

```
var p = db.Cities.Single(c => c.Name == cmbCity.SelectedValue);
//or
//var p = db.Cities.Single(c => c.Name == cmbCity.Text); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-16T09:08:31.717

假设 EntityObj 是您的实体对象。

```
Payroll.Entities.Employee objEmp = new Payroll.Entities.Employee();
objEmp.cityid = int.Parse(cmbCity.SelectedValue);
EntityObj.AddToEmployee(objEmp);
EntityObj.SaveChanges(); 
```

# html - 如何在图库中的浮动图像上创建悬停边框/轮廓？

> ID：10171272
> 
> 赞同：1
> 
> 时间：2012-04-16T09:02:15.220
> 
> 标签：html, css, gallery

如果这是一个相当基本的问题，请原谅。我在谷歌和其他地方搜索过，还没有找到适合我的解决方案。

我正在生成一个带有以下标记的图片库。

```
<div class="gallery">
  <a class="galleryimg">
    <img>
  </a>
  ....
</div> 
```

根据`.galleryimg`图库中的图像数量重复。它也向左浮动。

我想创建一个`:hover`勾勒所选图像的效果。我尝试过使用边框（弄乱布局）、轮廓（原则上听起来很完美）和插入框阴影（呈现在图像下方）。

大纲非常接近我想要实现的目标。但是右侧和底部轮廓被漂浮在其上方的相邻图像所遮蔽。

所以我的问题是：如何在链接图像库上创建悬停边框/轮廓效果？

我真的很感激其他人如何解决这个问题的任何想法。谢谢！！

**编辑**

图像相邻，中间没有空白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:04:33.603

嗨，您可以像这样使用简单的css技巧

**css**

```
#example-one a img, #example-one a           { border: none; overflow: hidden; float: left; }
#example-one a:hover                         { border: 3px solid black; }
#example-one a img{width:100px;height:50px;}
#example-one a:hover img                     { margin: -3px;}​ 
```

现场演示[http://jsfiddle.net/rohitazad/QkT7d/3/](http://jsfiddle.net/rohitazad/QkT7d/3/)

有关此的更多信息，请单击此处[http://css-tricks.com/examples/InnerBorderImages/#](http://css-tricks.com/examples/InnerBorderImages/#)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:17:50.477

看一下这个：

[http://jsfiddle.net/hMNZE/](http://jsfiddle.net/hMNZE/)

可能是想要的效果。您将体验到图像的细微变化，因为它使自身变小以允许边框。但请告诉我。这只是一个快速修复。

- -编辑 - -

[http://jsfiddle.net/hMNZE/2/](http://jsfiddle.net/hMNZE/2/)

是使用负边距的第二个版本，这看起来不错，但图像重叠了一点。

查看链接：[http ://css-tricks.com/examples/InnerBorderImages/](http://css-tricks.com/examples/InnerBorderImages/)

---编辑2---

[http://jsfiddle.net/hMNZE/3/](http://jsfiddle.net/hMNZE/3/)是最好的

---编辑3---

```
.gallery {
    width:100%;
    height:100%;
    padding:10px;
}

.galleryimg {
    float:left
}

.galleryimg img {
    z-index:-10;
}

.galleryimg img:hover {
    margin:-2px;
    border:2px solid blue;
    z-index:9999;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T10:18:18.763

嗨，您可以通过**CSS3** * *box-shadow* * 属性轻松完成此操作：-

```
box-shadow: inset 0px 0px 0px 3px rgba(000,000,000,0.9); 
```

查看演示以获得更好的理解：- [http://jsbin.com/upedel/5/edit](http://jsbin.com/upedel/5/edit)

**更新的答案**

请查看更新后的演示：- [http://jsbin.com/upedel/10/edit](http://jsbin.com/upedel/10/edit)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:18:24.237

如果您使用的是**box-shadow**并且它位于另一张图片下方，则如下所示：

```
.gallery img:hover{
 padding:0;
 box-shaow:0 0 0 2px red;
 z-index:1;
}
.gallery img{position:relative;} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T09:04:23.470

如果您使用`box-sizing`属性（自 支持`IE8`），您可以添加边框`:hover`而不会弄乱布局

```
.galleryimg {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    width : 100px;
    float : left;
}

.galleryimg:hover {
    border  : 3px gray solid;
} 
```

有关此属性的更多信息，请参阅[http://paulirish.com/2012/box-sizing-border-box-ftw/](http://paulirish.com/2012/box-sizing-border-box-ftw/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T09:04:41.670

[http://jsfiddle.net/Vvr7C/](http://jsfiddle.net/Vvr7C/) 诀窍是在 .gallery 上添加填充，这样您就可以在画廊边缘的图像上看到轮廓：

```
.gallery {padding:2px}
.galleryimg:hover img {outline: red solid 2px}​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T09:27:53.710

如果上面回答了您的问题，那就太好了。如果没有，听起来您可能需要在图像和周围的其他对象之间留出一些边距。你说它是模糊的。它可能只需要 2px 左右的边距就可以让它变得模糊。

# c++ - 在 C/C++ 中调试：调用空函数的成本

> ID：10171279
> 
> 赞同：2
> 
> 时间：2012-04-16T09:02:39.213
> 
> 标签：c++, c, debugging

实现调试的一种正常过程是使用

```
#ifdef DEBUG

...debugging tests...

#endif 
```

有时，代码的某些部分需要一种典型的“检查”算法，因此通常希望将其包装在一个函数中，这样代码仅在定义了 DEBUG 标志时才被调用。让该函数称为 myDebug();

我看到了两种自然的方法：每次调用 myDebug() 时都添加 ifdef，如下所示：

```
#ifdef DEBUG

myDebug();

#endif 
```

或者 myDebug 定义为：

```
void myDebug()
{
#ifdef DEBUG

...code...

#endif
} 
```

基本上，第一个避免了函数调用，而第二个避免了将代码与很多#ifdef/#endif。

是否有任何“标准”约定可以选择两者之一，或者我不知道的另一种方式？从“造型”的角度来看，是否值得选择第二个？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T09:04:14.370

我会选择3号：

```
#ifdef DEBUG
#define myDebug(x) myDebug(x)
#else
#define myDebug(x) {}
#endif 
```

这样，`#ifdef`代码中的任何地方都没有讨厌的 s，并且对于非调试版本，不会生成任何代码。

# macos - 如何从 OSX 的命令行启动 GUI Emacs？

> ID：10171280
> 
> 赞同：94
> 
> 时间：2012-04-16T09:02:43.163
> 
> 标签：macos, emacs, command-line

如何从 OSX 的命令行启动 GUI Emacs？

我已经从[http://emacsformacosx.com/](http://emacsformacosx.com/)下载并安装了 Emacs 。

我会接受满足以下所有条件的答案：

1.  emacs 窗口在我的终端窗口*前面打开。*
2.  键入“emacs”会启动一个 GUI Emacs 窗口。在该窗口中查找文件将默认在我启动 Emacs 的目录中查找。
3.  当 foo.txt 存在时键入“emacs foo.txt”会启动一个加载了 foo.txt 的 GUI Emacs 窗口。
4.  *当 foo.txt不*存在时键入“emacs foo.txt”会启动一个 GUI Emacs 窗口，其中包含一个名为“foo.txt”的空文本缓冲区。在该缓冲区中执行 ^X^S 会将 foo.txt 保存在我启动 Emacs 的目录中。

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2013-05-29T09:20:00.210

调用以下脚本“emacs”并将其放在您的`PATH`某个地方：

```
#!/bin/sh
/Applications/Emacs.app/Contents/MacOS/Emacs "$@" 
```

这涵盖了#2、#3 和#4。

对于 #1，将其放在 .emacs 文件中的某个位置：

```
(x-focus-frame nil) 
```

emacsformacosx.com[站点](http://emacsformacosx.com)现在有一个[How-To 页面](http://emacsformacosx.com/tips)，这是顶部代码段的来源。那里有更多关于运行`emacsclient`和连接 Emacs的信息`git mergetool`。

* * *

## 回答 #2

> 赞同：71
> 
> 时间：2012-04-16T17:31:27.530

在您的 shell 中，将命令“emacs”别名为指向 OSX emacs 应用程序

在我的 shell（运行默认 bash）中，我有以下内容（在我的 .bashrc 中）

```
alias emacs='open -a /Applications/Emacs.app $1' 
```

然后，在命令行输入 emacs 启动 emacs 应用程序。

但是，我建议您打开一份 emacs 副本并保持其正常运行。如果是这种情况，并且您想将文件加载到现有的 emacs 副本中，则可以通过在 .bashrc 中放置以下内容来使用 emacsclient：

```
alias ec='/Applications/Emacs.app/Contents/MacOS/bin/emacsclient' 
```

然后将以下内容添加到您的 .emacs 文件中以启动 emacs 服务器（它接收 emacsclient 调用）

```
;;========================================
;; start the emacsserver that listens to emacsclient
(server-start) 
```

然后你可以输入

```
ec .bashrc 
```

将 .bashrc 的副本加载到现有的 emacs 会话中！

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-25T18:17:07.247

通过在后台启动 Emacs，这改进了[David Caldwell 的回答](https://stackoverflow.com/a/16810036/109618)：

```
#!/bin/sh
$(/Applications/Emacs.app/Contents/MacOS/Emacs "$@") & 
```

如另一个答案所述，这涵盖了#2、#3 和#4。对于 #1，将其放在 .emacs 文件中的某个位置：`(x-focus-frame nil)`.

请注意，以下内容对我**不起作用**——它不会在命令行上指定的目录中启动 Emacs（例如`emacs .`）

```
# NOT RECOMMENDED
#!/bin/sh
/Applications/Emacs.app/Contents/MacOS/Emacs "$@" & 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-08T22:50:15.650

我假设你要么：

*   登录时启动 emacs 守护进程
*   在您的 .emacs 中有 (server-start)
*   不要介意运行大量单独的 emacs 副本

如果是这样，那么我认为这满足了最初的四个标准，再加上一个：

> 1.  emacs 窗口在我的终端窗口前面打开。

它将始终向前景打开（使用 x-focus-frame）。

> 2.  键入“emacs”会启动一个 GUI Emacs 窗口。在该窗口中查找文件将默认在我启动 Emacs 的目录中查找。

它将以 dired 模式打开现有的 emacs 窗口。

> 3.  当 foo.txt 存在时键入“emacs foo.txt”会启动一个加载了 foo.txt 的 GUI Emacs 窗口。

如果 emacs 已经在运行并且有服务器，那么它将在现有窗口中打开并进入前台。

> 4.  当 foo.txt 不存在时键入“emacs foo.txt”会启动一个 GUI Emacs 窗口，其中包含一个名为“foo.txt”的空文本缓冲区。在该缓冲区中执行 ^X^S 会将 foo.txt 保存在我启动 Emacs 的目录中。

正确的。

**一个额外的：**

输入命令后控制立即返回到终端会话。

~/bin/emacs

```
#!/bin/bash
EMACSPATH=/Applications/Emacs.app/Contents/MacOS

# Check if an emacs server is available 
# (by checking to see if it will evaluate a lisp statement)

if ! (${EMACSPATH}/bin/emacsclient --eval "t"  2> /dev/null > /dev/null )
then
    # There is no server available so,
    # Start Emacs.app detached from the terminal 
    # and change Emac's directory to PWD

    nohup ${EMACSPATH}/Emacs --chdir "${PWD}" "${@}" 2>&1 > /dev/null &
else
    # The emacs server is available so use emacsclient

    if [ -z "${@}" ]
    then
        # There are no arguments, so
        # tell emacs to open a new window

        ${EMACSPATH}/bin/emacsclient --eval "(list-directory \"${PWD}\")"
    else    
        # There are arguments, so
        # tell emacs to open them

        ${EMACSPATH}/bin/emacsclient --no-wait "${@}"
    fi

    # Bring emacs to the foreground

    ${EMACSPATH}/bin/emacsclient --eval "(x-focus-frame nil)"
fi 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-05-05T03:41:39.773

在 Mountain Lion 上，我使用的是 Yamamoto Mitsuharu 的端口[https://github.com/railwaycat/emacs-mac-port](https://github.com/railwaycat/emacs-mac-port)，别名如下：

```
alias emacs=/Applications/Emacs.app/Contents/MacOS/Emacs 
```

它满足您的所有标准。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-02-17T13:58:50.313

刚刚根据本指南使用自制软件包管理器构建了 emacs： [http://www.emacswiki.org/emacs/EmacsForMacOS](http://www.emacswiki.org/emacs/EmacsForMacOS) 使用 brew install --cocoa emacs 之后应该启动 .app 版本以获取 gui，在我的情况下是/usr/local/Cellar/emacs/24.3/Emacs.app/Contents/MacOS/Emacs

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-03-27T00:38:24.610

进一步改进大卫詹姆斯的回应，以下对我有用：

[根据从http://www.emacswiki.org/emacs/EmacsForMacOS#toc20](http://www.emacswiki.org/emacs/EmacsForMacOS#toc20)找到的终端打开文件的说明

```
open -a /Applications/Emacs.app <file-name> 
```

将此与 David Jame 的响应相结合，我创建了以下*emax* bash 脚本并将其放置在我的路径中*~/bin*

```
#!/bin/bash
(open -a /Applications/Emacs.app "$@") & 
```

**警告**：为了让 emacs 在*Dired by name*模式下打开当前目录，您需要使用

```
emax . 
```

环境：

*   OS X 优胜美地版本 10.10.2
*   2014-11-13 的 GNU Emacs 24.4.2 (x86_64-apple-darwin14.0.0, NS apple-appkit-1343.14)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2018-04-05T08:10:39.457

# 简单的解决方案...

此处发布了许多非常复杂的解决此问题的方法。这是公平的，因为它看起来不平凡。

但是，这个解决方案对我来说非常有效。

```
ec() {
  emacsclient -n $@ 2> /dev/null
  if [[ $? == 1 ]]; then
    open -a Emacs.app  -- $@
  fi
} 
```

# 用法

```
ec file [...] 
```

# 让我们解开正在发生的事情：

1.  将所有`ec`参数传递给 emacsclient 并且不要 ( `-n`) 在继续之前等待 emacs。
    1.  如果 Emacs 已经在运行，那么我们就完成了，您正在编辑。
2.  当没有 emacs 运行时，吞下 emacsclient 发布的错误消息。( `2> /dev/null`)
3.  手动处理退出代码`1`( `[[ $? == 1 ]]`)
    1.  打开 Emacs.app 并将文件参数传递给它（路径将被正确打开。）
    2.  你已经完成了，Emacs 已经打开了你的文件。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-22T16:13:33.867

这里的其他答案对我来说不太适用。特别是，在我的机器上，bash 脚本

```
#!/bin/sh
/Applications/Emacs.app/Contents/MacOS/Emacs "$@" 
```

总是在主目录中打开 emacs。要让它在当前工作目录中打开，我必须这样做

```
#!/bin/sh
/Applications/Emacs.app/Contents/MacOS/Emacs "$PWD/$@" 
```

反而。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-20T17:21:54.607

按照以下步骤编译 Emacs：

```
./configure --with-x --prefix=/usr
make
sudo make install 
```

你完成了！下载和安装 XQuartz 可能会有所帮助，但这只是我的意见。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-12-04T03:34:55.047

这是我在 osx 上打开 emacs/emacsclient 的脚本。

```
#!/bin/bash

# Ensure (server-start) is added in your emacs init script.

EMACS=/Applications/MacPorts/Emacs.app/Contents/MacOS/Emacs
EMACSCLIENT=/Applications/Macports/Emacs.app/\
Contents/MacOS/bin/emacsclient

# test if client already exsit.
$EMACSCLIENT -e "(frames-on-display-list)" &>/dev/null

# use emacsclient to connect existing server.
if [ $? -eq 0 ]; then
    $EMACSCLIENT -n "$@"
# open emacs.app instead.
else
    `$EMACS "$@"` &
fi 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-12-25T22:09:44.653

在以上所有使用“open”时 - 确保使用“--args”选项

不要这样做：

```
alias emacs='open -a /Applications/Emacs.app $1' 
```

取而代之的是：

```
alias emacs='open -a /Applications/Emacs.app --args $1' 
```

该`--args`选项可防止“打开”使用用于 Emacs 的各种选项。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-09-11T23:55:37.217

[最佳答案](https://stackoverflow.com/a/16810036/803801)很好，但我希望 emacs 进程在后台运行，这样我仍然可以使用我的 shell。[这个答案](https://stackoverflow.com/a/26565655/803801)似乎做了我想要的，但没有在正确的目录中启动 emacs，这意味着需要绝对路径（或者 hack 附加`pwd`到在所有情况下都不起作用的路径）。此外，简单地使用`&`意味着如果我杀死终端，emacs 也会被杀死。

我决定使用`screen`bash 函数，以下解决方案适用于我安装的 macOS 10.15.6 和 emacs 26.2 `brew`：

```
function emacs() {
    screen -d -m /Applications/Emacs.app/Contents/MacOS/Emacs "$@"
} 
```

对于`-d -m`命令行标志的含义，它们一起使用时具有特殊的含义，因此本质上可以认为是一个命令行标志。解释在手册页中：

> 以“分离”模式启动屏幕。这会创建一个新会话，但不会附加到它。这对于系统启动脚本很有用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-01-24T10:40:59.350

```
open_emacs() {
    num=$(ps aux | grep -E "[E]macs-x86_64-10_14 --|[e]macs --" | wc -l)
    if [ $num -eq 0 ]; then
        echo "## starting emacs"
        # Run in a subshell to remove notifications and close STDOUT and STDERR:
        (&>/dev/null emacsclient -t -q &)
    fi
}

alias e="open_emacs" 
```

* * *

`(&>/dev/null emacsclient -t -q &)`如果 emacs 守护程序不在后台运行，以下行将启动它。

*   `E`macOS 可能已经定义了以(ex: )开头的应用程序名称`Emacs-x86_64-10_14.app`，基于此您可以检查守护程序是否在`emacs`后台运行。

# python - Python 中的 ICMP 跟踪路由

> ID：10171289
> 
> 赞同：0
> 
> 时间：2012-04-16T09:03:29.030
> 
> 标签：python, sockets, networking, icmp

我正在尝试在 Python 中实现基于 ICMP 的 Traceroute。

我找到了一个非常有用的指南（[https://blogs.oracle.com/ksplice/entry/learning_by_doing_writing_your](https://blogs.oracle.com/ksplice/entry/learning_by_doing_writing_your)），它允许我创建一个基于 UDP 的 Traceroute（下面的代码），所以只需要修改。我尝试将发送套接字更改为 ICMP，但是没有异常我无法运行任何东西。

注意 - 下面的代码有效，但是这是一个 UDP 跟踪路由（发送一个 UDP 数据包并接收一个 ICMP 数据包），我需要我的程序发送一个 ICMP 数据包并接收一个 ICMP 数据包。本质上，UDP 套接字需要更改为 ICMP 套接字。

我想这不是最常见的尝试和实现的事情，并且在网上研究如何做到这一点时遇到了麻烦。如果有人可以提供一些见解，将不胜感激:-)

```
#!/usr/bin/python

    import socket

    def main(dest_name):
        dest_addr = socket.gethostbyname(dest_name)
        port = 33434
        max_hops = 30
        icmp = socket.getprotobyname('icmp')
        udp = socket.getprotobyname('udp')
        ttl = 1
        while True:
            recv_socket = socket.socket(socket.AF_INET, socket.SOCK_RAW, icmp)
            send_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM, udp)
            send_socket.setsockopt(socket.SOL_IP, socket.IP_TTL, ttl)
            recv_socket.bind(("", port))
            send_socket.sendto("", (dest_name, port))
            curr_addr = None
            curr_name = None
            try:
                _, curr_addr = recv_socket.recvfrom(512)
                curr_addr = curr_addr[0]
                try:
                    curr_name = socket.gethostbyaddr(curr_addr)[0]
                except socket.error:
                    curr_name = curr_addr
            except socket.error:
                pass
            finally:
                send_socket.close()
                recv_socket.close()

            if curr_addr is not None:
                curr_host = "%s (%s)" % (curr_name, curr_addr)
            else:
                curr_host = "*"
            print "%d\t%s" % (ttl, curr_host)

            ttl += 1
            if curr_addr == dest_addr or ttl &gt; max_hops:
                break

    if __name__ == "__main__":
        main('google.com') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:17:55.230

我认为 udp 是你最好的方法

由于 RFC 791，traceroute 在发送 icmp 数据包时无效，导致原作者 Van Jacobson 使用 udp 重新实现。查看此页面上的脚注以进一步澄清[http://www.inetdaemon.com/tutorials/troubleshooting/tools/traceroute/definition.shtml](http://www.inetdaemon.com/tutorials/troubleshooting/tools/traceroute/definition.shtml)

如果你还坚持发送icmp，试试这个库

[http://code.activestate.com/recipes/409689-icmplib-library-for-creating-and-reading-icmp-pack/](http://code.activestate.com/recipes/409689-icmplib-library-for-creating-and-reading-icmp-pack/)

# php - Symfony 1.4 中的配置邮件程序 - 如何在管理面板中，而不是 factory.yml？

> ID：10171293
> 
> 赞同：1
> 
> 时间：2012-04-16T09:03:33.730
> 
> 标签：php, symfony1, symfony-1.4

如何在 Symfony 的管理面板中配置电子邮件？默认我必须在文件 factory.yml 中设置：

```
mailer:
  class: sfMailer
  param:
    logging:           %SF_LOGGING_ENABLED%
    charset:           %SF_CHARSET%
    delivery_strategy: realtime
    transport:
      class: Swift_SmtpTransport
      param:
        host:       localhost
        port:       25
        encryption: ~
        username:   ~
        password:   ~ 
```

我想在管理面板中设置主机、端口、加密、用户名和密码，并将其保存在我的数据库中。那么，如果我发送邮件，如何从数据库中获取这些数据？

```
 $message = $this->getMailer()->compose(
      array('jobeet@example.com' => 'Jobeet Bot'),
      $affiliate->getEmail(),
      'Jobeet affiliate token',
      <<<EOF
Your Jobeet affiliate account has been activated.

Your token is {$affiliate->getToken()}.

The Jobeet Bot.
EOF
    );

    $this->getMailer()->send($message); 
```

我可以从数据库中获取这些数据:) 但我不知道如何写入 getMailer()。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:22:16.943

[配置邮件程序时会](http://trac.symfony-project.org/browser/tags/RELEASE_1_4_17/lib/mailer/sfMailer.class.php#L152)触发一个事件。

```
$dispatcher->notify(new sfEvent($this, 'mailer.configure')); 
```

因此，您可以在此事件上[添加一个侦听](http://symfony.com/blog/using-the-symfony-event-system)器，检索邮件程序对象，然后重新配置它。

或者，如本片段所述，您可以手动构建对邮件程序的调用并定义如何设置配置（并获得在任务中使用 getMailer 的优势）：[http ://snippets.symfony-project.org/snippet /377](http://snippets.symfony-project.org/snippet/377)

# java - 反编译 JAVA DLL

> ID：10171295
> 
> 赞同：0
> 
> 时间：2012-04-16T09:03:49.743
> 
> 标签：java, dll, decompiler

我收到了一个带有我下载的应用程序的 java dll 文件。这个 DLL 文件是用 Java 编写的，现在我想反编译它。

下面是我如何调用这个包含 jar 的 dll：

```
new JarInputStream(getClass().getResourceAsStream("jarjava.dll")); 
```

有没有办法反编译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:08:11.747

Java 源文件被编译为 .class 文件。据我所知，没有将 java 代码编译为 DLL 的标准方法。

这里可能发生了什么：

*   这是针对 JNI API 编写的 C 代码，用于与（或来自）Java 代码交互；
*   这是由某些工具（自动）转换为 C 代码，然后编译为 DLL 的 Java 代码。
*   这是一个有人重命名为 DLL 的 JAR 文件。在这种情况下，将其重命名，解压缩 JAR，然后使用 Java 反编译器反编译 JAR。

如果不了解此 DLL 的来源，您将无能为力。尝试使用 C 反编译器，但可能不会走得太远。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:07:56.833

您可以阅读机器代码并自己将其翻译回 C 语言。这并不容易，因为将代码编译为本机的全部意义（可能是唯一一点）就是让反编译变得更加困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T11:41:10.900

问题解决了。

这是我是如何做到的：

阅读文件：

```
JarInputStream input = new JarInputStream(getClass().getResourceAsStream("/myjar.dll")); 
```

为每个条目编写一个新文件：

```
JarEntry entry;
while ((entry = input.getNextJarEntry()) != null)
{
    // Write file
} 
```

# android - 安卓通知

> ID：10171297
> 
> 赞同：0
> 
> 时间：2012-04-16T09:03:57.510
> 
> 标签：android, android-intent

我创建了一个通知应用程序。通知即将到来。我想通过单击通知进入一个新活动。我不知道该怎么做。请给我帮助。谢谢！

我有 2 个通知类 1\. Notification_2Activity

```
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
       DatePicker dp = (DatePicker) findViewById(R.id.datePicker1);
        TimePicker tp = (TimePicker) findViewById(R.id.timePicker1);
     int month = dp.getMonth();
        int year = dp.getYear();
        int dayofmonth= dp.getDayOfMonth();

        int hourofday=tp.getCurrentHour();
        int minute=tp.getCurrentMinute();
        EditText e = (EditText) findViewById(R.id.editText1);
      e.setText("montho="+(month+1)+" year="+year+" day="+dayofmonth+" hour"+hourofday+" minute="+minute);
 Calendar cal = Calendar.getInstance();       //for using this you need to import java.util.Calendar;

        // add minutes to the calendar object
        cal.set(Calendar.MONTH,month);

        cal.set(Calendar.YEAR,year);                
        cal.set(Calendar.DAY_OF_MONTH, dayofmonth);
        cal.set(Calendar.HOUR_OF_DAY, hourofday);
        cal.set(Calendar.MINUTE, minute);

        Intent alarmintent = new Intent(getApplicationContext(), AlarmReceiver.class);
        alarmintent.putExtra("title","Title of our Notification");
        alarmintent.putExtra("note","Description of our  Notification");
        PendingIntent sender = PendingIntent.getBroadcast(getApplicationContext(), HELLO_ID,
                alarmintent,PendingIntent.FLAG_UPDATE_CURRENT|  Intent.FILL_IN_DATA);

        AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
        am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), sender); 
```

这是我的第二类 Alarmreceiver.java

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

    NotificationManager manger = (NotificationManager)     
            context.getSystemService(Context.NOTIFICATION_SERVICE);
            Notification notification = new Notification(R.drawable.ic_launcher, "Combi Note",
             System.currentTimeMillis());
            PendingIntent contentIntent = PendingIntent.getActivity(context, 
            NOTIFICATION_ID, 
            new Intent(context, NotifyMessage.class), 0);

                    Bundle extras=intent.getExtras();
                    String title=extras.getString("title");
            //here we get the title and description of our Notification
                        //
                    String note=extras.getString("note");
                    notification.setLatestEventInfo(context, note, title, contentIntent);
                    notification.flags = Notification.FLAG_INSISTENT;
                    notification.defaults |= Notification.DEFAULT_SOUND;
            //here we set the default sound for our 
            //notification

                    // The PendingIntent to launch our activity if the user selects this notification
                    manger.notify(NOTIFICATION_ID++, notification);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:14:36.633

```
Intent notificationIntent = new Intent(this, youractivity.class);
PendingIntent contentIntent = PendingIntent
                                   .getActivity(this, 0, notificationIntent, 0); 
```

在清单文件中添加您的活动名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-24T08:03:35.860

`pendingIntent`在您的通知中添加一个并在本地广播。

```
Intent resultIntent = new Intent(this, ResultActivity.class);
TaskStackBuilder stackBuilder = TaskStackBuilder.create(this);
// Adds the back stack
stackBuilder.addParentStack(ResultActivity.class);
// Adds the Intent to the top of the stack
stackBuilder.addNextIntent(resultIntent);
// Gets a PendingIntent containing the entire back stack
PendingIntent resultPendingIntent =
        stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT);
...
NotificationCompat.Builder builder = new NotificationCompat.Builder(this);
builder.setContentIntent(resultPendingIntent);
NotificationManager mNotificationManager =
    (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
mNotificationManager.notify(id, builder.build()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:20:40.047

我在我的情况下使用它：

```
public void createNotificationToClient(Context context, String payload)
    NotificationManager notificationManager = (NotificationManager) context
                    .getSystemService(Context.NOTIFICATION_SERVICE);
    Notification notification = new Notification(R.drawable.icon,
                    "title", System.currentTimeMillis());
            // Hide the notification after its selected
     notification.flags |= Notification.FLAG_AUTO_CANCEL;
       Intent intent = new Intent(context, yourActivity.class);
       intent.putExtra("payload", payload);

       intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
       PendingIntent pendingIntent = PendingIntent.getActivity(context, 0,
                        intent, 0);
       notification.setLatestEventInfo(context, "title", payload,
                         pendingIntent);
       notificationManager.notify(0, notification);
} 
```

# datagridview - 如何在 yii 的 dataprovider 中显示记录？

> ID：10171299
> 
> 赞同：1
> 
> 时间：2012-04-16T09:03:58.680
> 
> 标签：datagridview, yii, dataprovider

我想在 dataprovider 中使用这个查询

```
select user.username ,company_user.* from user left join company_user on company_user.user_id=user.id where company_user.company_id=".$id 
```

如何在 CActiveDataProvider 中编写

请帮助我提前谢谢...

我有 3 个表
**company_user** ->id,company_id,user_id,first_name,last_name
**company** ->id,name_of_company
**user** ->id,username,password

我想要来自**company_user**的所有记录+ 来自用户的**用户名**

提前致谢...：）

我想在 CGridView 中列出

在我的用户模型中，我写了这种类型的关系

```
public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'company_user'          =>array(self::HAS_ONE,'CompanyUser','user_id','select' =>array('first_name','status'),
                                            'with'=>array('company'=>array(self::BELONGS_TO, 'Company', 'company_id','joinType' => 'INNER JOIN')),
                                    ),
            'company_user_rel_only' =>array(self::HAS_ONE,'CompanyUser','user_id','select' =>array('first_name', 'last_name')),

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T17:10:49.023

使用 Yii，您应该使用模型方法，这样应该可以：

```
$criteria = new CDbCriteria;
$criteria->with = 'user';
$criteria->compare('company_id', $id); //if error due to similar column name change it to t.company_id
$dataProvider =  new CActiveDataProvider('CompanyUser', array(
                     'criteria' => $criteria,
                 )); 
```

我假设 CompanyUser 和 User 之间的关系名称是 user，如果不是，将 with 属性更改为正确的名称。此外，这将提供 CompanyUser 类型的对象，如果您想访问用户属性，请使用 **->user->username访问它们**

# java - 无法从 type:java.lang.String 和 value:adf.currentDate 创建类型的对象：oracle.jbo.domain.Date

> ID：10171300
> 
> 赞同：0
> 
> 时间：2012-04-16T09:04:00.203
> 
> 标签：java, jsf, jdeveloper, oracle-adf

我将 Hire Date 的默认值设置为`adf.currentDate`并收到以下错误：

> JBO-25009：无法从 type:java.lang.String 和 value:adf.currentDate 创建类型的对象：oracle.jbo.domain.Date

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:58:56.500

问题是因为视图对象中的属性是字符串，并且您编写了它的默认值 adf.currentDate 返回 oracle.jbo.domain.Date 类型所以您应该将属性的数据类型更改为 oracle.jbo.domain.Date 或将表达式更改为通过 adf.currentDate.toString 返回字符串

您可以从下面的链接中阅读更多关于 ADF 中日期类的信息 [http://mahmoudoracle.blogspot.com/2012/03/date-classes-conversion-in-adf.html](http://mahmoudoracle.blogspot.com/2012/03/date-classes-conversion-in-adf.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-25T04:47:53.193

确保您已将`Default Value`类型选择为`Expression`not as `Literal`，并且属性的数据类型应该`Date`是`adf.currentDate`，如果是，`adf.currentDateTime`则数据类型应该是`TimeStamp`。

# javascript - jQuery focusout 事件不会在表格元素上触发

> ID：10171313
> 
> 赞同：2
> 
> 时间：2012-04-16T09:04:37.340
> 
> 标签：javascript, html, javascript-events, jquery

我正在尝试使表格支持多行选择（目前只是 CTRL + mouseclick 组合）。一切正常，但是当我在表格区域外单击时，行不会取消选择。不幸的是，我发现 focusout 事件根本不会触发。这是我的代码：

```
 $(".library tbody tr").live('click', function (event) {
        event.preventDefault();

        if (event.ctrlKey) {
            $(this).toggleClass('selected-row');
        } else {
            $(".library tbody tr").removeClass("selected-row");
            $(this).addClass("selected-row");
        }
    });

    $("table.library").live('click', function () {
        $(".library").addClass("focused");
    });

    $("table.library").live('focusout', function () {
        $(this).removeClass("focused");
    }); 
```

有没有其他人处理过这个问题？先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-01T08:42:31.820

如果您使用 tabindex 作为表格主体或表格元素，表格元素也可以获得焦点

```
$('#tableId tbody').attr("tabindex", 1); 
```

在此之后，当您单击表格时，它将获得焦点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:35:04.093

'focusout' 事件仅在焦点离开*可以*首先聚焦的元素时触发，例如输入元素。据我所知，表格元素无法获得焦点。您需要以其他方式处理选定行的取消选择，Lollero 在他对您的问题的评论中提到了一种可能的解决方案。

# c++ - boost mpl积分型累加

> ID：10171314
> 
> 赞同：2
> 
> 时间：2012-04-16T09:04:38.200
> 
> 标签：c++, boost, boost-mpl

如何添加数字？

```
typedef boost::mpl::vector<
    boost::mpl::int_<1>, boost::mpl::int_<2>,
    boost::mpl::int_<3>, boost::mpl::int_<4>,
    boost::mpl::int_<5>, boost::mpl::int_<6> > ints;
typedef boost::mpl::accumulate<ints, boost::mpl::int_<0>, ????? >::type sum; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T11:39:57.580

**编辑：**我错了，你可以`mpl::plus`直接使用，使用[占位符表达式](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/placeholder-expression.html)。这简化了整个符号：

```
typedef mpl::accumulate<ints, mpl::int_<0>, mpl::plus<mpl::_1, mpl::_2>  >::type sum; 
```

当然，也可以使用[元函数类](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/metafunction-class.html)获得相同的效果（添加是一种矫枉过正，但对于更复杂的东西可能是合理的）：

```
struct plus_mpl
{
    template <class T1, class T2>
    struct apply
    {
       typedef typename mpl::plus<T1,T2>::type type;
    };
};

typedef mpl::accumulate<ints, mpl::int_<0>, plus_mpl >::type sum; 
```

# android - 关于图库小部件的一些问题

> ID：10171317
> 
> 赞同：1
> 
> 时间：2012-04-16T09:04:50.673
> 
> 标签：android, android-layout, gallery, android-gallery

1.我希望我的图库小部件可以同时显示6张图片，并且布局是2*3矩阵，当我滑动屏幕时，小部件显示另外6张图片，这个功能如何编码？

2.我想在图库小部件下添加一些点来显示图库正在显示的页面，有小工具可以实现此功能吗？

3.我知道在res/drawable中加载pitcures很热，但是如果我的pitcures在数据库中，如何加载它们？

4.我想添加一些按钮来设置图库小部件显示不同类别的图像，如何编码？

谢谢你的回答！！

# scala - Scala 保护模式与或匹配

> ID：10171319
> 
> 赞同：5
> 
> 时间：2012-04-16T09:05:01.437
> 
> 标签：scala, pattern-matching

我想做一个看起来像这样的模式匹配：

```
 sinceOp match {
        case  None |Some(lastUpdate) if lastUpdate<= update.time => 
```

可悲的是，这不起作用。有任何想法吗 ？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-16T09:27:33.983

您还可以测试相反的条件：

```
sinceOp match {
  case Some(lastUpdate) if lastUpdate > update.time => //...
  case _ => //...
} 
```

第二种情况涵盖了两者`None`以及最后一次更新较小的情况。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:31:54.117

或者你可以用函数链替换模式匹配

```
sinceOp.filterNot(_ <= update.time).getOrElse(println("if None")) 
```

# ruby-on-rails-3 - 无法使用 Firefox 运行 rspec 测试

> ID：10171322
> 
> 赞同：0
> 
> 时间：2012-04-16T09:05:09.993
> 
> 标签：ruby-on-rails-3, firefox, rspec, capybara

有以下错误的任何想法？我无法在 Firefox 上运行我的 rspec 测试。

Selenium::WebDriver::Error::WebDriverError: 找不到 Firefox 二进制文件 (os=macosx)。确保已安装 Firefox 或使用 Selenium::WebDriver::Firefox::Binary.path= 手动设置路径

```
宝石文件
宝石“水豚”，：git =>“git://github.com/jnicklas/capybara.git”
宝石“水豚萤火虫”

```

```
水豚.rb
需要“水豚/萤火虫”
Selenium::WebDriver::Firefox::Profile.firebug_version = '1.8.4'

```

```
spec_helper.rb
Capybara.current_driver = :selenium_with_firebug if example.metadata[:firebug]

```

我发现一个[gist](https://gist.github.com/1031029)错误对修复这个错误没有多大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:19:58.917

愚蠢的错误，我没有在这个配置后重新加载终端。

# windows-phone-7 - 如何将 LG c-900 Windows 手机从 7.0 更新到 7.5？

> ID：10171325
> 
> 赞同：0
> 
> 时间：2012-04-16T09:05:42.730
> 
> 标签：windows-phone-7

我们有 LG c-900 AT&T windows phone 7.How 将其更新到 7.5？在 zune 中，我得到了 7.0.7392.0 更新可用。如何在我的手机中更新 7.5？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T11:00:49.160

我有一台带有 v7.5 的 LG c-900。只需打开 Zune 并将其与手机连接，它将自动开始升级到 7.5。

如果您的手机具有早期版本的 v7，您将在 Zune 中的 UPDATE IN PROGRESS 下看到的第一条消息将显示 7.0.7392.0。当该版本的所有步骤都完成后，另一个更新将开始，没有描述。在大约第 4 次更新时，您将看到消息，您将获得 Windows Phone 7.5 的主要更新。

如果没有，请手动尝试。

我希望这可以帮助你。

# java - JUnit 测试中的 HSQLDB 主键违规错误

> ID：10171328
> 
> 赞同：6
> 
> 时间：2012-04-16T09:05:50.993
> 
> 标签：java, jakarta-ee, junit, eclipselink, hsqldb

我们有一个使用 JUnit、OpenEJB、Eclipselink 和 HSQLDB 的测试框架。到目前为止一切正常，测试服务层轻而易举。然而，现在，在对表进行大规模导入（使用服务层、实体管理器）或例如在服务方法中将实体多次持久化到列表时，我们遇到了问题。

这是奇怪的部分：我们的测试似乎只有在使用 Maven 从命令行在足够快的工作站上运行时才会中断。当我通过 Eclipse IDE 运行测试时，一切都很好，但有时也会随机失败。我们怀疑这可能与测试运行的速度有关，听起来很奇怪。例外很简单，因为它基本上告诉我们我们正在尝试添加一个具有现有 ID 的实体。我们多次检查了我们的测试数据和 hsqldb 数据库。没有我们正在尝试使用的带有 id 的预先存在的行。仍然 hsqldb 在某些时候抛出主键异常。从我们的日志中我们可以看到冲突的 ID 并不总是相同的，它可能是 300015 或 300008。

我们在这里束手无策。它可能与 HSQLDB 的事务或其他导致过时数据有关吗？

我们正在使用 HSQLDB 2.2.8、Eclipselink 2.3.0 和 OpenEJB 4.0.0-beta2。

我们尝试添加实体的关系映射如下：

```
@OneToMany(mappedBy = "invoice", cascade = CascadeType.PERSIST)
private List<InvoiceBalance> getInvoiceBalanceHistory() {
    if (invoiceBalanceHistory == null) {
        this.invoiceBalanceHistory = new ArrayList<InvoiceBalance>();
    }
    return invoiceBalanceHistory;
} 
```

根本的例外是：

```
Caused by: java.sql.SQLIntegrityConstraintViolationException: integrity constraint violation: unique constraint or index violation; SYS_PK_10492 table: INVOICEBALANCE
at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
at org.hsqldb.jdbc.JDBCPreparedStatement.fetchResult(Unknown Source)
at org.hsqldb.jdbc.JDBCPreparedStatement.executeUpdate(Unknown Source)
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
at org.apache.commons.dbcp.DelegatingPreparedStatement.executeUpdate(DelegatingPreparedStatement.java:105)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:831)
... 82 more
Caused by: org.hsqldb.HsqlException: integrity constraint violation: unique constraint or   index violation; SYS_PK_10492 table: INVOICEBALANCE
at org.hsqldb.error.Error.error(Unknown Source)
at org.hsqldb.Constraint.getException(Unknown Source)
at org.hsqldb.index.IndexAVLMemory.insert(Unknown Source)
at org.hsqldb.persist.RowStoreAVL.indexRow(Unknown Source)
at org.hsqldb.TransactionManager2PL.addInsertAction(Unknown Source)
at org.hsqldb.Session.addInsertAction(Unknown Source)
at org.hsqldb.Table.insertSingleRow(Unknown Source)
at org.hsqldb.StatementDML.insertSingleRow(Unknown Source)
at org.hsqldb.StatementInsert.getResult(Unknown Source)
at org.hsqldb.StatementDMQL.execute(Unknown Source)
at org.hsqldb.Session.executeCompiledStatement(Unknown Source)
at org.hsqldb.Session.execute(Unknown Source) 
```

编辑：

我将主键生成策略从 GenerationType.AUTO（默认情况下似乎使用 TABLE 策略）更改为 IDENTITY。在此之后，我们的质量持续存在似乎不会失败。我仍然不知道为什么 HSQLDB 与 TABLE 策略“不同步”。我不想仅仅因为我们的测试框架有问题就改变我们的 jpa 实体 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:02:07.933

很可能，您在将大量行导入`MEMORY`表时内存不足。

您应该增加内存分配或将此特定表定义为`CACHED`表。

更新：`CACHED`表可以在持久性数据库中使用，而不是在全内存数据库中：

```
CREATE CACHED TABLE mytable ... 
```

或对于现有表：

```
SET TABLE mytable TYPE CACHED 
```

更新：

如果这不是由 OOM 引起的，正如更改生成策略所证实的那样，那么生成策略似乎可能不会在某些时候增加生成的主键值。身份策略依赖于数据库来创建生成的值，效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-13T19:04:10.873

您的 allocationSize 可能会在相对快速的平台上或偶尔定义瓶颈。即，当默认为 GenerationType.AUTO 时，表 EclipseLink 的默认设置将缓存 ID 到分配的值。然后它将查找生成器以确认其最后分配的值。如果在下一组 ID 被缓存之前在 allocationSize 的边缘进行查找，那么您可能会遇到竞争条件，其中 eclipse 链接在更新缓存之前两次分配缓存中的最后一个 id 并尝试将两者用于插入并且两个插入都失败并回滚。如果可以，您应该检查是否在您的分配缓存应该增加时发生这种情况，但也许这种检查可能会改变行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-10T14:51:58.873

对于`integrity constraint violation: unique constraint or index violation` 如果您是调试器狂，您可以在调试模式下重建 hsqldb 并在已`org.hsqldb.index.IndexAVLMemory#insert`为变量`compare`分配断点条件的行设置断点`compare == 0`。

错误的行（例如重复的行）将是作为参数传递的行。

# java - 一次只有一个应用程序实例

> ID：10171329
> 
> 赞同：0
> 
> 时间：2012-04-16T09:05:51.707
> 
> 标签：java

我的朋友在面试中被问到以下问题：

1.  您将如何确保一次只有一个应用程序实例（如 tomcat）在运行？

2.  当应用程序的另一个实例启动时，应显示一条错误消息，说明一个实例已在运行

3.  当应用程序异常终止时，我们应该能够启动应用程序。

我对上述问题的回答涉及端口。有没有人对上述问题有“更深入”的了解？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T09:18:51.513

我建议您使用“PID 文件”。

例如，您可以在启动应用程序时创建一个 PID 文件（例如，在 下`/var/run/mypgm.pid`）。在该 pid 文件中，您存储应用程序的 PID（进程 ID）。当您关闭应用程序（清理）时，您会删除该 PID 文件。

现在，当您第二次启动应用程序时，您检查该 PID 文件是否存在。如果文件存在，您有两个选择：

*   您的应用程序仍在运行
*   您的应用程序崩溃了，pid 文件仍然存在。

现在您可以解析该 PID 文件以检查是否仍有进程使用该 PID 运行。如果是这样，您将显示错误消息。如果没有，您只需删除 PID 文件并启动您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:53:54.440

[java.nio.channels.FileLock](http://docs.oracle.com/javase/1.5.0/docs/api/index.html?java/nio/channels/FileLock.html)可以帮助您匹配所有三个点（包括异常终止情况）。

例子在[这里](http://www.java2s.com/Code/Java/File-Input-Output/DemonstratesfilelockingandsimplefilereadandwriteoperationsusingjavaniochannelsFileChannel.htm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:14:51.667

检查应用程序已经运行的场景的几种可能性，我相信还有更多：

1.  检查是否没有其他同名进程正在运行（如果存在同名应用程序的问题，但不太可能）
2.  使用文件作为锁（但如果崩溃可能会导致问题）

一旦检测到实例正在运行，如果实例已经在运行，则显示一条消息是微不足道的（只需显示消息并退出）

编辑：如果您的应用程序崩溃后另一个进程收到相同的 PID，使用 PID 文件的@ortang 仍然会导致问题。在这种情况下，除非您手动删除文件，否则您的应用程序将无法启动。

# java - 以 AM/PM 格式显示时间

> ID：10171330
> 
> 赞同：1
> 
> 时间：2012-04-16T09:05:53.590
> 
> 标签：java, time

我编写了这段代码来显示当前时间，但我的问题是它不以 am 或 pm 格式显示时间，它只显示例如 12:00。没有上午或下午

```
 java.util.Calendar thetime = java.util.Calendar.getInstance();
    int h = thetime.get(java.util.Calendar.HOUR_OF_DAY);
    int m = thetime.get(java.util.Calendar.MINUTE);

    System.out.println("the current time is"+ h +":"+m); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T09:15:06.383

尝试添加：

```
int a_p = thetime.get(java.util.Calendar.AM_PM);
String am_pm;
if(a_p==0)
    am_pm = "AM";
else
    am_pm = "PM"; 
```

然后`am_pm`在输出的末尾添加。

无论如何，您应该更喜欢 SimpleDateFormat，请尝试在[此处查看](https://docs.oracle.com/javase/tutorial/i18n/format/simpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T09:09:23.690

您应该使用[SimpleDateFormat](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

```
String time = new SimpleDateFormat("h:mm a").format(new Date()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:09:53.327

您可以手动进行，例如

```
String ampm = h > 12 ? "PM" : "AM";
// now print the variable ampm 
```

甚至更好地使用 SimpleDateFormat。请参考此类的 javadoc 以了解如何配置它。第一次需要 5 分钟，但可以节省您的时间。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T09:12:38.677

当您的 servlet 打印出唯一的值时，您最好使用 DateFormat 来设置如何打印这些值。

举个例子：

```
DateFormat.getDateInstance(DateFormat.SHORT, <put your locale here>); 
```

有关详细信息，请参阅[此处的 DateFormat 类](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T09:15:33.070

使用**calendar.get(Calendar.AM_PM)**

如果当前时间在 PM，它将返回整数值 1，否则返回 0，表示 AM。通过这个[链接](http://www.roseindia.net/java/example/java/util/CurrentTime.shtml)..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T09:08:31.980

使用 DateFormatter 以字符串格式显示时间。[这里](http://www.exampledepot.com/egs/java.text/parsedate.html)

# c++ - 图论的 C++ 库列表

> ID：10171331
> 
> 赞同：11
> 
> 时间：2012-04-16T09:06:01.883
> 
> 标签：c++, graph-theory, subgraph, isomorphism

我将开始一个关于自动机和图论的科学项目，我正在寻找一个支持以下功能的图形库：

*   有向/无向图
*   图同构测试（即图 g1 与 g2 同构吗？）
*   子图同构测试（即图 g1 是否与 g2 的子图同构？）
*   图表搜索、访问等
*   可能，非常快，因为我需要进行一些认真的计算

我知道[Boost Graph Library](http://www.boost.org/doc/libs/1_48_0/libs/graph/)，但据我从其文档中了解，它缺乏子图测试。

所以，我的问题是：请问哪个是最好的 c++ 图形库？他们不必为我需要的每个功能提供支持，我知道肯定有可能没有现有的库完全适合我的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:15:43.527

您可以使用 iGraph： http: [//igraph.sourceforge.net/](http://igraph.sourceforge.net/)这是一个 C 库，应该满足您的需求。

还有~~[http://ubietylab.net/ubigraph/](http://ubietylab.net/ubigraph/)~~，这里有一个相关的 SO 帖子：[https](https://stackoverflow.com/questions/2751826/which-c-graph-library-should-i-use) ://stackoverflow.com/questions/2751826/which-c-graph-library-should-i-use 。

我没用过 ubigraph 所以不能评论，我主要用 networkX 和 iGraph

**更新**

似乎 ubigraph 现在已经死了，所以目前只维护 igraph

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-11T12:50:03.977

您可以使用 Cliquer 库[http://users.tkk.fi/pat/cliquer.html](http://users.tkk.fi/pat/cliquer.html)进行与查找派系相关的所有计算。

# android - 访问 Android 崩溃报告

> ID：10171336
> 
> 赞同：2
> 
> 时间：2012-04-16T09:06:18.420
> 
> 标签：android, logging, crash, google-play, feedback

我只是在 Sports Tracker 崩溃时使用它，当我按下“报告”按钮报告崩溃时，我得到了一个简单的输入字段，要求对崩溃进行评论。

但是，按“预览”将使我了解崩溃日志正在发送哪些数据。数据量实际上是巨大的，包括日期/时间、设备名称/版本、系统日志、堆栈跟踪等各种可用的数据。

从 logcat 我可以看到这是`com.google.android.feedback`活动。

**问题**是，这是 Sports Tracker 开发者自己实现的，还是每个 Android 用户在手机上安装的默认崩溃报告？换句话说，我的所有应用程序（=我编写并发布到 Play 商店的应用程序）是否已经具有此功能，还是我可以/应该自己实现的功能**？

我通过 android 的内置崩溃报告服务收到了一些崩溃报告，但它并没有真正给我任何有用的数据（除了堆栈跟踪）。还是仅仅是开发人员仪表板上的崩溃报告还远未完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:02:19.770

我不知道这个特殊的反馈活动。我目前正在使用 ACRA 系统，它真的很容易使用并给我有用的错误报告。让我们看看它的错误报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:16:20.290

我确信他们必须使用其中之一。

ACRA 和 ZUbhium 一样很棒，它带有静音崩溃报告和应用支持台。因此，每当应用程序崩溃时，它都会捕获更有意义的数据并对其进行分析。

您可以将 Zubhium 作为后端添加到 ACRA 并查看高级崩溃报告或使用 ZubhiumSDK。两者都做得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-10T23:56:49.610

实际上，TestPoke 是一个 beta 测试平台，可让您查看您的 android 应用程序陷入的所有崩溃，即使当此类事情发生时它们会通过它的 Android 应用程序通知您。

[http://www.testpoke.com](http://www.testpoke.com)

# etl - 将 excel 文件作为资源导入 Talend

> ID：10171337
> 
> 赞同：1
> 
> 时间：2012-04-16T09:06:31.280
> 
> 标签：etl, talend

我是 Talend 的新手。我有一个带有标题行和过滤器的 excel 文件。我的工作将此文件复制到工作目录 ( `tFile_copy`) 中，然后用从数据库中选择的数据填充该文件。然后它通过邮件发送结果文件。

一切正常，但我想将我的“模板”excel 文件存储到我的 Talend 项目中，以便将其放入 svn 并在几个月后另一个人再次需要这份工作时轻松找到它。

“导入项目”菜单不允许 .xls 文件。有没有将资源文件导入 Talend 项目的简洁方法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:09:09.207

使用您的模板 excel 创建元数据。元数据可以导入或导出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T15:01:04.337

您是否探索过 CONTEXT 功能来解决这个问题？[http://www.talendforge.org/tutorials/tutorial.php?idTuto=34](http://www.talendforge.org/tutorials/tutorial.php?idTuto=34)

# c# - 如何按列名对 Datagridview 中的数据进行排序

> ID：10171340
> 
> 赞同：0
> 
> 时间：2012-04-16T09:06:35.627
> 
> 标签：c#, winforms

我有 LINQ 查询：

```
var product_view = from productallinfo in QProductAllInfo select productallinfo; 
```

然后我将数据加载到表中

```
MainCatalog_Table.DataSource = product_view.Distinct(); 
```

接下来我想按列名对数据进行排序，例如“ProductName”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:01:27.063

为什么不在将其绑定到 DataSource 之前对其进行排序，如下所示：

```
var product_view = from productallinfo in QProductAllInfo 
                   orderby productallinfo.ProductName
                   select productallinfo; 
```

然后你将它绑定到你的数据源......

# python - GAE 的 webapp2 i18n 无法识别 django 模板 {% trans %} 标签

> ID：10171343
> 
> 赞同：2
> 
> 时间：2012-04-16T09:06:49.990
> 
> 标签：python, django, google-app-engine, internationalization, webapp2

我正在尝试将 i18n 功能添加到我正在处理的一个小测试项目中。我正在使用 webapp2_extras i18n 库。我有 locale 文件夹，其中包含使用 babel 命令行创建的编译翻译 .mo 文件。该应用程序本身只是一个简单的 django 模板和一个带有一个处理程序的 main.py。当我在 main 中使用 gettext 方法时，我确实得到了翻译后的文本，但是模板内用 {% trans %} 标签包裹的字符串没有被翻译。这是处理程序：

```
class MainHandler(webapp2.RequestHandler):
def get(self):

    locale = self.request.GET.get('locale', 'en_US')
    i18n.get_i18n().set_locale(locale)

    message = i18n.gettext('Hello, world!')

    self.response.out.write(template.render("templates/index.html")) 
```

在“消息”中，字符串被翻译，但在模板内部，用 {% trans %} 包裹的相同字符串不是。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T06:29:11.473

可以使用自定义请求处理程序，通过谷歌应用引擎启用 django 的 i18n trans 标签。但更好的是使用 jinja2 就像这里所说的那样，那么解决方案是官方的。你应该从 webapp2_extras 导入 jinja2，然后你的 i18n 就可以工作了，jinja2 的翻译标签看起来像`{% trans %}`and `{ % endtrans %}`。

如果您必须使用 django，这里有一个旧帖子的链接，它提供了一个自定义请求处理程序，如果您必须使用 django 模板，您可以使用该处理程序：http: [//blog.yjl.im/2009/02/using-django-i18n -in-google-app-engine.html](http://blog.yjl.im/2009/02/using-django-i18n-in-google-app-engine.html)

但我们建议您使用 jinja2。你试过了吗？

# php - 使用 PHP 添加 LDAP 属性

> ID：10171345
> 
> 赞同：0
> 
> 时间：2012-04-16T09:07:04.803
> 
> 标签：php, ldap

无法弄清楚向 LDAP 条目添加附加属性的正确语法是什么。验证时我得到这个数组：

```
 Array
(
    [0] => Array
        (
            [cn] => Array
                (
                    [0] => Vit Kos
                )

            [shortname] => Array
                (
                    [0] => vit.kos
                )

            [uid] => Array
                (
                    [0] => vit.kos
                )

            [mail] => Array
                (
                    [0] => vit.kos@email.com
                )

            [objectclass] => Array
                (
                    [0] => top
                    [1] => person
                    [2] => organizationalPerson
                    [3] => inetOrgPerson
                    [4] => dominoPerson
                )

            [givenname] => Array
                (
                    [0] => Vit
                )

            [userpassword] => Array
                (
                    [0] => password here
                )

            [sn] => Array
                (
                    [0] => Kos
                )

            [localadmin] => Array
                (
                    [0] => CN=#SysHQAdmin
                )

            [mailaddress] => Array
                (
                    [0] => Vit.Kos@email.com
                )

            [maildomain] => Array
                (
                    [0] => EMAIL
                )           

            [dn] => CN=Vit Kos,OU=###,O=EMAIL
        )

) 
```

需要获得一个额外的属性成员才能像

```
Array (
        [uid] => Array
            (
                [0] => vit.kos
            )

        [mail] => Array
            (
                [0] => vit.kos@email.com
            )
       [member] => Array
            (
                [0] => MEMBER HERE
            )
) 
```

以前从未使用过 LDAP，所以这让我很困惑。感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:29:29.530

要将数据分配给您在上面检索到的目录项，您将使用 执行“修改”操作[`ldap_modify()`](http://php.net/manual/en/function.ldap-modify.php)。这是假设您的数据库的架构允许`member`在该对象上调用一个属性 - 它可能不会，您不能简单地在您喜欢的时候向任何对象添加属性。

首先，您需要创建属于该`member`属性的一个或多个条目，并将它们存储在一个数组中：

```
$member = array (
  0 => "This is some data",
  1 => "This is some more data"
); 
```

为了告诉目录我们要修改哪个对象，我们需要它的 DN。我们可以从您之前的搜索/列表/读取操作的结果中得到这个 - 您显示的数组已经检索到（我假设它存储在一个名为 的变量中`$array`）：

```
$dn = $array[0]['dn']; 
```

现在我们有了执行修改操作所需的所有信息（我假设您连接/绑定的 LDAP 资源保存在一个名为 的变量中`$ds`）：

```
$result = ldap_modify($ds, $dn, array('member'=>$member)); 
```

在此之后，`$result`将是一个布尔值，指示操作是否成功。如果不成功，您可以通过调用以下命令获得一条错误消息来解释原因：

```
$error = ldap_error($ds); 
```

# php - PHP 中最奇怪的函数

> ID：10171349
> 
> 赞同：1
> 
> 时间：2012-04-16T09:07:31.653
> 
> 标签：php, arrays, usort

好吧，我正在尝试一些应该非常简单的东西。

这里是：

```
usort($newarr, "cmp");

function cmp($a, $b)
{ return 0; } 
```

问题很简单：它不会通过给出这个警告信息对数组进行排序

```
Warning: usort() expects parameter 2 to be a valid callback, function 'cmp' not found or invalid function name 
```

* * *

我在这里阅读了这个答案[PHP usort won't sort](https://stackoverflow.com/questions/6419818/php-usort-wont-sort)

但这对我来说没有任何意义，我没有像答案 1 中解释的那样的课程（而且我什至不需要任何课程，我尝试使用 $this，this，insted of "myclass"但它根本不起作用）：

```
usort($items, array("MyClass", "compare_method")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:12:04.520

更改脚本流程，当您尝试对数组进行排序时，您的数组`cmp`尚不存在。所以，这应该工作：

```
function cmp($a, $b)
{ return 0; }

usort($newarr, "cmp"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:17:57.697

从您随问题发布的信息中，无法具体说明为什么它对您不起作用。

代码通常可以工作，完全没问题（[Demo](http://codepad.org/2Udi2FBm)）：

```
<?php
$newarr = array();

if (!function_exists('cmp')) echo "cmp() not defined yet.\n";
usort($newarr, "cmp");

function cmp($a, $b)
{ return 0; } 
```

我建议您在问题中添加更多信息，以便更好地说明实际问题所在的位置。

*   您使用的是哪个 PHP 版本？
*   你使用命名空间吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:10:46.310

使用[匿名函数](http://php.net/manual/functions.anonymous.php)（或`create_function`）创建一个像你一样的匿名函数`cmp`，然后将它传递给`usort`.

例子：

```
usort($newarr, function($a, $b) {
    return 0;
}); 
```

# iphone - 手指画在横向模式下不起作用

> ID：10171350
> 
> 赞同：2
> 
> 时间：2012-04-16T09:07:41.227
> 
> 标签：iphone, ios5, draw, quartz-graphics

我已经坚持了几天了，尝试了几件事，但仍然坚持下去。希望我能理解问题所在以及可能的解决方案，这让我现在有点抓狂。我提前感谢任何提供帮助的人。

**上下文**：我正在为黑板做一个演示（这意味着还不是一个应用程序，只是一个概念证明）。由于“防止垃圾邮件”的原因，StackOverflow 不允许我在问题中发布图片，因此我正在尝试链接我的 Dropbox 帐户以显示图片。请看这个：

[https://www.dropbox.com/gallery/5189052/1/so?h=8573b1](https://www.dropbox.com/gallery/5189052/1/so?h=8573b1)

您可以在图 1 中以纵向模式看到黑板。

**问题**：我实际上有两个问题。

首先是绘图似乎在纵向模式下效果很好，但是当我切换到横向模式时，绘图区域似乎没有反映不同的大小。

第二个是我似乎无法强制绘图区域的边界，尽管包含黑板的 UIImageView 具有正确的（即不与上面的条重叠）大小。这发生在纵向和横向模式中。

您可以在上一个链接的图 2 中看到这两个问题；绘图会在纵向模式下停止的位置停止，并且还会在条形图上绘制颜色和橡胶。

**代码**：下面是选择器处理触摸的代码。我还在上面链接的图 3 中附上了关于我的 nib 文件结构的照片。

```
//viewDidLoad in MyViewController.m. DrawImage is the UIImageView containing the board
- (void)viewDidLoad {
[super viewDidLoad];
drawImage = [[UIImageView alloc] initWithImage:nil];
drawImage.frame = self.view.frame;
[self.view addSubview:drawImage];

mouseMoved = 0;
colorCode = 1;

red = 1.0;
green = 1.0;
blue = 1.0;

}

//touchesBegan in MyViewController.m
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
        mouseSwiped = NO;

        UITouch *touch = [touches anyObject];

        if([touch tapCount] == 2) {
            drawImage.image = nil;

            return;
        }

        lastPoint = [touch locationInView:self.view];
}

//touchesMoved in MyViewController.m
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
mouseSwiped = YES;

UITouch *touch = [touches anyObject];   
CGPoint currentPoint = [touch locationInView:self.view];

UIGraphicsBeginImageContext(self.view.frame.size);
[drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 4.0);
CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);

CGContextBeginPath(UIGraphicsGetCurrentContext());
CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);

CGContextStrokePath(UIGraphicsGetCurrentContext());
drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

lastPoint = currentPoint;

mouseMoved++;

if (mouseMoved == 10) {
    mouseMoved = 0;
}

}

//touchesEnded in MyViewController.m
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

UITouch *touch = [touches anyObject];

if ([touch tapCount] == 2) {
    drawImage.image = nil;
    return;
}

if(!mouseSwiped) {
    UIGraphicsBeginImageContext(self.view.frame.size);
    [drawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
    CGContextFlush(UIGraphicsGetCurrentContext());
    drawImage.image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
}
} 
```

**我尝试**了什么：在发布之前，我尝试了一些事情。我注意到在横向模式下，坐标变化是边界而不是框架。例如，虽然 self.view.frame.width 和 height 在纵向和横向中分别保持在 320 和 480，但在横向时边界变为 480 和 320。因此，我试图将我的路径和矩形建立在边界上，但不幸的是，我开始（显然）有奇怪坐标的奇怪图纸。

我觉得我无法在绘图上强制执行正确边界的原因在于绘图区域是在主视图的框架上确定的，主视图的框架延伸到整个窗口。我试图将包含板的 UIImageView 插入到另一个视图中（具有正确的大小）并将其链接到 MyViewController.h 上定义的插座，但不幸的是，这并没有改变任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:22:21.703

在 touchesMoved: 方法中，您可以设置一个条件来检测触摸是否在包含黑板的 UIImageView 或其不同的视图上。如果它不是黑板视图，则返回它而不绘制图像。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-20T13:06:37.923

我终于按照 Apple 文档中建议的方式解决了这个问题；我创建了一个横向视图控制器，并让肖像传输到此。效果很好。

# ios - 如果游戏使用 MVC 模式（在 iOS 上），则有 3 个类：MVC，但为什么要使用额外的类 ComputerPlayer？

> ID：10171351
> 
> 赞同：0
> 
> 时间：2012-04-16T09:07:43.643
> 
> 标签：ios, model-view-controller, design-patterns

我有点困惑，在一本书中，iOS 上的游戏设计是使用 MVC 模式。所以我们有

1.  视图，由界面生成器完成，并为控件的属性/值（作为插座）和事件处理程序（作为操作）绘制连接

2.  模型，存储游戏的状态，例如剩余时间和当前玩家的得分（人类玩家）

3.  控制器，在 View 加载后运行，将 Model 的数据填充到视图中，为游戏设置 Timer，处理用户在屏幕上的点击等（事件处理程序），并为 Timer 事件实现事件处理程序.

`ComputerPlayer`所以这是有道理的，但是还有第四个类叫做提供下一个单词供人类玩家猜测。 **（更新：Model 类 100% 使用此 ComputerPlayer...Model 代码实例化了 ComputerPlayer 对象，然后对其进行调用）。**

我不太明白为什么在这个 MVC 模型中，有一个额外的类`ComputerPlayer`？为什么不让这部分成为`Model`课堂的一部分，甚至成为`Controller`课堂的一部分？

（如果与 Ruby on Rails 的 MVC 模式相比，它有点像助手。但助手主要由视图代码调用。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:23:58.063

MV* C * 模式中的**C**经常*与*不同的控制器对话。所以它不是一对一的关系。添加 ComputerPlayerController 在 MVC 模式中是完全有效的，并且值得鼓励。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T15:50:44.540

[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)更像是一种架构组织，因此每个元素（M、V、C）通常是一组（或层）类。

也许您的书只为每个课程讲一个课程，从而使事情过于简单化了。我会将其`ComputerPlayer`视为模型层的一个元素。从维基百科页面可以看到，MVC 有很多解释/实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-18T05:49:46.150

就像 Fuhrmanator 所说，ComputerPlayer 似乎被认为是模型层的一部分。但是，您也可以将其视为实用程序类。

在 MVC 中，Utility Class 不是任何层的一部分，可以被任何层访问。

# java - 从 Java 的 getRuntime().exec() 生成程序时，如何为 ps 设置 argv[0] 名称？

> ID：10171352
> 
> 赞同：2
> 
> 时间：2012-04-16T09:07:44.327
> 
> 标签：java, runtime.exec

从 java getRuntime().exec() 生成程序时如何为 ps 设置 argv[0] 名称？

```
Runtime rt = Runtime.getRuntime();
String[] cmd = {"/bin/sh", "-c", "ls > hello"};
rt.exec(cmd); 
```

我希望进程在 ps ef 输出中有另一个名称。在 C 中你可以只覆盖 argv[0] 指针，如何在 java 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:09:39.623

在 Java 中，您需要创建一个指向可执行文件的符号链接并调用它。我不相信你可以访问`argv[0]`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-16T09:35:31.600

@user1335897：ProcessBuilder 提供了比 Runtime 更大的灵活性，请尝试使用以下代码：

```
ProcessBuilder processBuilder = new ProcessBuilder(args);

    if (envMap != null) {
        processBuilder.environment().putAll(envMap);
    }

    try {
        Process process = processBuilder.start();
        process.waitFor();
    } catch (IOException ioe) {
    } catch (InterruptedException ie) {
} 
```

# visual-studio - Intellij IDEA：在 Visual Studio / C# 中重命名

> ID：10171354
> 
> 赞同：0
> 
> 时间：2012-04-16T09:07:47.567
> 
> 标签：visual-studio, ide, intellij-idea, keyboard-shortcuts

IDEA中是否有这样的功能，在重命名某些声明的变量或字段后，我可以申请重命名它的所有出现？就像在 VS 中重命名某些东西后，在单词的右下角出现一些红色的小三角形，推动它，VS 更新所有出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:08:17.153

您可以使用 `Shift + F6`就地重命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:07:52.053

是的，你可以做到。将光标设置在变量上，然后在菜单中选择 Refactor -> Rename...

Idea 将自动检测是否需要重命名其他事件。

# python - 从python中的包中导入模块，这是一个基本的问题，我想我什至找不到答案

> ID：10171357
> 
> 赞同：2
> 
> 时间：2012-04-16T09:08:10.210
> 
> 标签：python

所以我的第一个 python 程序，我从 PYPI 下载了 macholib 包，然后解压缩并使用 python install 运行安装了 setup.py，现在我正在尝试运行一个程序，我首先导入 macholib，然后当我尝试访问像 Macho 这样的方法，它给了我一个错误，说 macholib 模块没有称为 Macho 的属性。我的理解是 macholib 是一个包而不是模块或其他东西，因此我不能使用包的内容。请回答，我在这么简单的新手问题上浪费了太多时间。使用最新版本的 python 运行 mac。

代码：

```
import sys
import macholib
MachO(DivXInstaller.dmg) 
```

我试过 macholib.MachO(DivXInstaller.dmg) 和 macholib.MachO.MachO(DivXInstaller.dmg)

```
Error for python test.py 
Traceback (most recent call last):
  File "test.py", line 3, in <module>
    MachO(DivXInstaller.dmg)
NameError: name 'MachO' is not defined 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T09:52:51.057

您的代码中有这一行：

```
MachO(DivXInstaller.dmg) 
```

但是，名称 MachO 没有在任何地方定义。所以 Python 会告诉你这个错误

```
NameError: name 'MachO' is not defined 
```

如果要使用名称为 MachO 的 MachO 模块，则必须导入它：

```
from macholib import MachO 
```

这是你没有做的，这是你的错误的原因。你所做的只是

```
import macholib 
```

它为您提供了可以使用的名称“macholib”。但是，macholib 主要包含您无法访问的子模块，因此这并不是特别有用。如果不想污染命名空间，可以将 MachO 导入为

```
import machlibo.MachO 
```

这使您可以访问 MachO 模块`macholib.MachO`

你也没有定义`DivXInstaller.dmg`，所以这将是你的下一个错误。我建议您在开始编程之前先阅读 Python 教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:06:17.470

一个 import 语句定义了一个[命名空间](http://docs.python.org/tutorial/classes.html#python-scopes-and-namespaces)。因此，为了使用模块或包中定义的东西，您需要对其进行限定。在[这种情况下](http://packages.python.org/macholib/MachO.html)，模块本身是，`macholib.MachO`但您需要更深入地挖掘，实际上`class MachO`它具有相同的名称，有点令人困惑，因此您需要`import macholib.MachO`并使用`macholib.MachO.MachO`（请注意，当我尝试这样做时，我收到错误“DistributionNotFound： altgraph”，但是）。

进一步注意，它需要一个文件名作为参数，它是一个字符串。此外，您实际上是在创建一个类的实例，所以您可能的意思是

```
mlib = macholib.MachO.MachO("DivXInstaller.dmg") 
```

现在 mlib 实际上是您需要通过进一步调用来操作的对象...

或者，您可以这样做`from macholib import MachO`，甚至`from macholib.MachO import MachO`可以使用`MachO.MachO(...)`或`MachO(...)`直接使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:51:10.400

**如果您了解 Python包**与**模块**以及**import**与**from import** ，这将非常简单：

Python 模块只是一个 Python 源文件。

Python 包只是 Python 模块的目录。

1-**进口**：

```
import package1.package2.module1 
```

要访问 module1 类、函数或变量，您应该使用整个命名空间：package1.package2.modlue1.class1

您不能以这种方式导入类或函数：（错误）

```
import package1.package2.class1 
```

2-**从...进口**

而是使用“from”来导入模块的单个类、函数或变量：

```
from package1.package2.module1 import class1 
```

无需处理整个命名空间：class1.method1() 现在可以使用

请注意，您不能以这种方式导入类的方法

**示例**：

datetime 是 datetime 模块的一个类，它有一个名为 utcnow() 的方法，访问 utcnow() 可以：

```
import datetime
datetime.datetime.utcnow() 
```

或者

```
from datetime import datetime
datetime.utcnow() 
```

# osgi - 有没有基于 OSGi 规范开发的大型商业软件？

> ID：10171359
> 
> 赞同：2
> 
> 时间：2012-04-16T09:08:22.933
> 
> 标签：osgi

有没有基于 OSGi 规范开发的大型商业软件？我想看看一些例子和架构是什么样的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:42:14.653

什么是大规模？我们的企业在 Eclipse Equinox 上运行，代码行数超过 2.000.000 行，这并不罕见。（当然，非公司成员无法使用该架构）

或许 glassfish j2ee 应用服务器可以给你一个很好的例子。看[这张](http://www.slideshare.net/wwwsahoo/osgi-java-ee-in-glassfish-3553192)幻灯片...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T10:17:17.813

Eclipse 是基于 OSGi 的，我认为在一个多变的环境中没有那么多更大的代码库。除此之外，您会发现大多数 Java EE 应用程序服务器都基于 OSGi 或大力支持它。

很久以前我不得不回答这个问题......

# android - 如何从远程数据库获取错误报告？

> ID：10171361
> 
> 赞同：0
> 
> 时间：2012-04-16T09:08:28.180
> 
> 标签：android, mysql, database, http-post

我正在向远程脚本发送一个带有一堆参数的 POST 请求，该脚本处理我的参数并将其值输入数据库。

由于没有参数被写入数据库，有没有办法从远程数据库获取错误报告？就像我在 PHPAdmin 或其他数据库 IDE 中并尝试输入一些 SQL 命令一样。

远程 PHP 脚本（处理参数值）是否可以从数据库接收错误报告并将其传回给我？我问这个是因为我不是网络开发人员，我不控制脚本。我只能要求实现一些功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:14:52.393

反正我不知道从远程会话中得到错误。MySQL 有`SHOW ERRORS;`，但这仅适用于您的会话。

[`mysql_error`](http://php.net/manual/en/function.mysql-error.php)PHP 脚本可以很容易地使用或使用上述方法检查 SQL 错误。然后脚本开发人员可以将其传回。

# java - 在 android 中创建的文件在 Windows 资源管理器中看不到

> ID：10171367
> 
> 赞同：1
> 
> 时间：2012-04-16T09:08:48.987
> 
> 标签：java, android, ddms

我在安卓上工作。我的 android 应用程序成功在 SD 卡内存中创建了一个文本文件；创建的文本文件可以在 DDMS 资源管理器中看到，但在 Windows 资源管理器中看不到。这是我的代码：

```
private void initFile(String filename, char[] data, int length){

       File File = new File(Environment.getExternalStorageDirectory() + File.separator + "Download" + File.separator + filename);

       try {
           File.delete();
           File.createNewFile();

           FileOutputStream fOut = new FileOutputStream(mFile);
           OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);

           if(mFile.exists())
           {
               myOutWriter.write(data,0,length);
               myOutWriter.flush();
               myOutWriter.close();
               fOut.close();
           }

       } catch (IOException e) {
           // TODO Auto-generated catch block
           e.printStackTrace();
       }

   } 
```

注意：但是如果我重新启动 android，则可以在 windows 资源管理器中看到创建的文本文件。

你知道为什么会这样吗？为什么在 DDMS 中可以看到在 android 中创建的文件在 windows 资源管理器中看不到？

我使用真正的安卓平板电脑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:10:21.737

您必须将文件从**DDMS 文件资源管理器**拉到**Windows 文件资源管理器**。您必须在**DDMS 文件资源管理器**中选择文件，然后单击按钮从**DDMS 文件资源管理器窗口**右侧**的设备中提取文件**，并将其保存在您希望的任何文件夹中。之后，您可以在**Windows FileExplorer中看到它**

# android - 带有绑定到它们的触摸事件的按钮的可点击区域跟随滚动。[Webapp、Phonegap(Cordova)、jQuery]

> ID：10171375
> 
> 赞同：1
> 
> 时间：2012-04-16T09:09:25.367
> 
> 标签：android, jquery, cordova, android-4.0-ice-cream-sandwich

我正在使用Phonegap (Cordova 1.6.0) 参与开发针对iOS 5 和Android >=2.2 的webapp。在测试期间，我从一位在他的三星 Galaxy S2 上运行 ICS 的测试人员那里得到了结果，他说应用程序中的菜单不起作用。深入研究它我意识到，即使它在视觉上保持原位（固定位置底部菜单），问题中按钮的实际可点击区域也会跟随滚动。因此，如果您向上滚动页面“半个按钮高度”，则只有底部菜单中的上半部分按钮是可点击的。此错误仅在使用触摸事件（例如使用单击事件时工作正常）和 web 视图中出现，而不是在本机浏览器中出现。它也出现在 Nexus 运行的“香草”ICS 中不存在此问题。

有什么想法可能导致这种情况吗？

# iphone - UISlider 滑块在实现 UITouch 事件时停止滑动

> ID：10171376
> 
> 赞同：-1
> 
> 时间：2012-04-16T09:09:29.787
> 
> 标签：iphone, objective-c, ios5

我想检测`touchesBegan`和`touchesMoved`事件。`UISlider`我创建了一个自定义`UISlider`类并添加了`UITouch`方法。触摸事件工作正常，但滑块停止滑动。如果我评论触摸方法，它会再次开始滑动。我错过了什么？或者我怎样才能使滑动和触摸事件都起作用？我的实际问题是，当用户按下滑块缩略图时，我试图更改缩略图的大小。移动滑块会返回一些值，但是当滑块值长时间保持不变时，我想更改。这是一个小代码我正在尝试的是

```
 cSlider=[[CLSlider alloc]initWithFrame:CGRectMake(40,90,480,40)];

 [cSlider setMaximumTrackImage:[UIImage imageNamed:@"sliderL.png"
                                                      ] forState:UIControlStateNormal];

  [cSlider setMinimumTrackImage:[UIImage imageNamed:@"sliderR.png"]    forState:UIControlStateNormal];

 [cSlider setThumbImage:[self imageByDrawingCOnImage:[UIImage imageNamed:@"thumb.png"]:sColor] forState:UIControlStateNormal];

  [cSlider addTarget:self action:@selector(sliderValue:) forControlEvents:UIControlEventValueChanged]; 
```

我正在尝试在特定位置长按滑块时更改缩略图图像。问题再次是整个 UISlider 的 UITouch 事件或 UIGesture 触发器，而不是来自当前缩略图所在的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:14:49.597

是的，你可以从[这里](https://github.com/AalokParikh/pinch-and-uiguesture)下载一个 zip， 这说明了如何做到这一点。这不是我创建的演示，而是在某个站点上找到的，它将向您展示如何同时处理两个手势事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:20:18.267

您可以使用“值更改”事件代替触摸开始和触摸移动事件。

# javascript - 从句子中删除除三个单词之外的所有单词，并使用 jquery 在这三个句子之后添加三个点

> ID：10171386
> 
> 赞同：0
> 
> 时间：2012-04-16T09:10:24.413
> 
> 标签：javascript, jquery

我想从一个句子中删除除三个单词之外的所有单词，并使用 jquery 在这三个句子之后添加三个点。例如，如果句子是“我们定期评估我们的借款人。查看我们的评估”，因此删除“*定期借款人。查看我们的评估，查看我们的评估*”，我想这样显示“**我们评估我们的.. .** " 我试过这里是[代码](http://jsfiddle.net/sureshpattu/Rpq7b/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:51:30.737

您可以使用 css 规则`text-overflow`来实现这一点。这是一个可以用来实现所需结果的类：

```
.prevent-overflow { 
    white-space: nowrap; 
    overflow: hidden; 
    text-overflow: ellipsis
}​ 
```

这是它的作用的分解：`white-space: nowrap;`当到达元素的边缘时，停止文本表单换行到新行。`overflow:hidden`告诉文本永远不要出现在元素的边界之外，并`text-overflow: ellipsis`告诉浏览器`...`在任何被切断时放置在文本的末尾（参见[text-overflow @ MDN](https://developer.mozilla.org/en/CSS/text-overflow)）。

将其应用于具有将切断其中包含的文本的尺寸的元素。

我创建了一个[jsfiddle](http://jsfiddle.net/joshdavenport/hem6a/1/)来演示它的使用。

**注意：**[jsfiddle](http://jsfiddle.net/sureshpattu/Rpq7b/)在元素 ( )的末尾包含一个 div，`<div style="clear:both"></div>`它会阻止省略号工作（请参阅此[jsfiddle](http://jsfiddle.net/joshdavenport/hem6a/)），我建议您改为应用于`clear:both;`整个 div，或者找到另一种方法来实现其目的`<div>`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T12:18:52.643

**Javascript 仅支持前瞻而不是后瞻...但是有一些解决方法**

这将为您工作...

```
var str="How are you doing today?";

regexp = new RegExp('(' + str.match(/(\w+\s){2}\w+/g)+ ')?.*'); //fetches first 3 words and makes regural expression to lookbehind this positively
var output = str.replace(regexp, function($0, $1){     //mimicks positive lookbehind
    return $1 ? $1 + '...' : $0;
});

document.writeln(output ); 
```

**更新 - 这仅适用于“你好吗..”..所以使用下面的**

这是一个非常好的教程，用于在 javascript 中模仿负面和正面的lookbehinds，因为它不支持它......

Javascript 仅支持前瞻

[http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)

**更新 - 这适用于您的示例中的任何内容**

```
var str="We evaluate our borrowers on a periodic basis. See our evaluationsWe evaluate our borrowers on a periodic basis. See our evaluationsWe evaluate our borrowers on a periodic basis. See our evaluations";

var first_three = str.match(/(\w+\s){2}\w+/);

regexp = new RegExp('(' + first_three[0] + ')?.*'); //fetches first 3 words and makes regural expression to lookbehind this positively
var output = str.replace(regexp, function($0, $1){     //mimicks positive lookbehind
    return $1 ? $1 + '...' : $0;
});

document.writeln(output);​ 
```

和一个正在运行的 jsFiddle [http://jsfiddle.net/Rpq7b/2/](http://jsfiddle.net/Rpq7b/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:19:57.367

尝试以下功能：

```
function myfunction(val)
{
    temp = val.split(' ');

    if(val.length >= 2)
    {
         val = temp[0] + ' ' + temp[1] + ' ' + temp[2] + ' ..';
    }

    return val;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T12:35:34.917

我想这应该工作

```
 var yourText = " We evaluate our borrowers on a periodic basis", 

 result = yourText.replace(/^(.{15}[^\s]*).*/, "$1");

 alert(result); 
```

注意：使用`15`代码中的任意合适数量的

要获得省略号的东西：您可以添加`result`+`"&hellip;"`

# debugging - Eclipse Scala 解释器 (REPL) - 正确使用和调试

> ID：10171387
> 
> 赞同：8
> 
> 时间：2012-04-16T09:10:28.017
> 
> 标签：debugging, scala, eclipse-plugin, read-eval-print-loop, scala-ide

我想知道使用 Eclipse Scala 解释器（Eclipse Scala IDE）的最佳实践是什么。

假设我有一个带有断点的应用程序。是否可以以这样一种方式调试应用程序，即我可以在特定断点处执行/评估 REPL 中的表达式？如果是，我该如何实现？

让我想知道的另一件事是打开解释器 as`Run configuration`或打开它 trough有什么区别`Window -> Show view -> Scala interpreter`。

您是否知道任何其他有趣的 Eclipse Scala 解释器用例，例如`Ctrl+Shift+X`运行选定的表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T09:47:27.360

也许这是一个明显的建议，但除了在 Scala IDE 中启动 REPL 之外，您还可以在其中运行选定的表达式：只需选择表达式并按 Ctrl+Shift+X（默认热键）。

**更新**
有 Scala 解释器的综合[参考](http://scala-ide.org/docs/user/features/scalainterpreter.html)（感谢 Mirco Dotta）。
还值得一提的是，在不久的将来，Scala 解释器将得到显着增强：与 Scala[调试器的集成以及](http://scala-ide.org/docs/helium/features/scaladebugger/index.html)[工作表](http://www.assembla.com/spaces/scala-ide/tickets/1000865)概念的实现正在进行中。

# php - 解析错误：语法错误，file_exists 调用的意外 T_VARIABLE"

> ID：10171390
> 
> 赞同：-1
> 
> 时间：2012-04-16T09:10:40.333
> 
> 标签：php, syntax-error, file-exists

我正在使用以下代码来确定目录 pdf_Order_pdf/ 中是否存在文件，如果文件不存在，它将显示一个工作链接或只是锚链接，我是一个完整的 php 新手（如您所见）但是做了解非常有限。

```
<?php
if(file_exists('pdf_Order_pdf/'.$row_Recordset1["our_ref"]'.pdf')) 
    echo 'pdf_Order_pdf/'.$row_Recordset1["our_ref"]'.pdf'; 
else 
    echo '#';
?> 
```

上面的代码在以下 html 之间：

```
<a href="****code above ****">File</a> 
```

我收到以下错误

```
Parse error: syntax error, unexpected T_VARIABLE in C:\xampp\htdocs\SwiftPHP\resultsSupplier.php on line 230 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:12:07.943

之后你忘记了`.`操作员`$row_Recordset1["our_ref"]`

```
if(file_exists('pdf_Order_pdf/'.$row_Recordset1["our_ref"].'.pdf')) 
----------------------------------------------------------^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:13:17.130

```
if(file_exists('pdf_Order_pdf/'.$row_Recordset1["our_ref"].'.pdf')) 
                                                          ^dot here 
```

# paypal - paypal IPN 返回pending_reason: 单方面

> ID：10171394
> 
> 赞同：13
> 
> 时间：2012-04-16T09:11:04.623
> 
> 标签：paypal, paypal-ipn

我的 PayPal IPN 脚本运行良好。当我使用我的沙盒帐户进行测试时，会立即付款，但是当我使用客户的企业电子邮件时，我在 IPN 日志调用中显示`payment_status`为“待处理”，并显示为“单方面”。`pending_reason`

我客户的电子邮件在 PayPal 得到确认。那么谁能告诉我为什么我会遇到这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T09:17:00.693

`pending_reason=unilateral`表示收款人的电子邮件地址尚未在 PayPal 注册。有关未决原因的完整列表，请参阅[PayPal IPN 文档](https://cms.paypal.com/uk/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_IPNandPDTVariables#id091EB04C0HS)。

检查电子邮件地址是否有拼写错误，并与您的客户再次确认他们确实已经在 PayPal 注册了他们的地址（他们可能不明白这意味着什么）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-21T08:10:44.510

在 www.sandbox.paypal.com 上进行测试时，仅存在在 www.sandbox.paypal.com 中创建的帐户。因此，您不能使用**真实**帐户进行测试，因为它们不存在于沙盒站点中。您应该在 developer.paypal.com 创建帐户

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-13T07:34:31.907

我遇到了这个问题 - 我正在向 PayPal 发送我的“实时”payer_email，当我将它更改为它工作的沙箱中的企业电子邮件时。与我使用 ****-facilitator@yoursite.com 的实时电子邮件相同

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-19T03:21:30.983

仔细检查您的 Paypal 主电子邮件地址是否已得到确认。对我来说，这个错误发生在我的客户的电子邮件还没有得到确认时，最重要的是！

# npapi - 为什么npapi开发的浏览器扩展这么少？

> ID：10171399
> 
> 赞同：-1
> 
> 时间：2012-04-16T09:11:28.707
> 
> 标签：npapi

我想为一些主要的浏览器开发扩展，比如 chrome 和 firefox。使用 npapi 编写的扩展可以在不同的浏览器中工作，但是使用 npapi 开发的浏览器扩展很少。你能告诉我原因吗？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:35:41.023

您的问题混淆了扩展和插件；他们[非常](https://stackoverflow.com/questions/4120106/what-is-the-difference-between-firefox-extension-and-plugin) [不同](http://colonelpanic.net/2010/08/browser-plugins-vs-extensions-the-difference/)，并且有完全不同的目标。您不能使用 NPAPI 开发扩展，只能使用插件。您不能编写跨浏览器工作的单个扩展。

如果您问为什么很少有扩展*包含*插件，那是因为插件比扩展*更难*编写，是特定于平台的，对于扩展试图解决的绝大多数问题不是必需的，对用户来说更危险（因为他们可以在机器上运行任意代码），甚至不允许在某些浏览器（例如 Safari）的扩展中使用。

如果您根本不是指扩展，而是问为什么很少有独立的 NPAPI 插件，那么上面的大部分列表仍然适用。

# ios - 第 4 代 iPodTouch 是否显示能源使用水平？

> ID：10171400
> 
> 赞同：5
> 
> 时间：2012-04-16T09:11:33.470
> 
> 标签：ios, instruments, energy

在仪器文档中，当谈到能源使用水平时，它说：

*注意：iPhone 3GS 和第三代 iPod touch 目前支持 Energy Usage 工具。*

我想这个笔记只讨论了第 3 代，因为它写的时候是最新一代的，但是我很长一段时间以来一直试图知道第 4 代 iPod Touch 的能源使用水平，但我没有得到它（我在这个问题中询问了这个问题：[仪器不显示能源使用水平：它是空的](https://stackoverflow.com/questions/9646238/instruments-doesnt-show-energy-usage-level-it-is-empty)）所以我认为也许这个注释目前也是正确的。我认为 Note 说“IN 第三代”而不是“FROM 第三代”很奇怪。

所以问题是：第 4 代是否也显示能源使用水平？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:23:28.860

它适用于我的 iPhone 4。

我也花了一段时间来弄清楚它是如何工作的。当设备连接到电源时，您无法获得能量水平。你需要拔掉它，运行你的测试，插入它并导入收集的数据。

这种方式至少对我有用。

# mysql - 为什么mysql和sqlite之间的SELECT结果不同？

> ID：10171403
> 
> 赞同：20
> 
> 时间：2012-04-16T09:11:46.357
> 
> 标签：mysql, sql, sqlite

我以简化和扩展的方式重新提出这个[问题](https://stackoverflow.com/questions/10161153/sqlite-exists-keyword-how-to-query-the-highest-average)。

考虑这些 sql 语句：

```
create table foo (id INT, score INT);

insert into foo values (106, 4);
insert into foo values (107, 3);
insert into foo values (106, 5);
insert into foo values (107, 5);

select T1.id, avg(T1.score) avg1
from foo T1
group by T1.id
having not exists (
    select T2.id, avg(T2.score) avg2
    from foo T2
    group by T2.id
    having avg2 > avg1); 
```

使用 sqlite，`select`语句返回：

```
id          avg1      
----------  ----------
106         4.5       
107         4.0 
```

和 mysql 返回：

```
+------+--------+
| id   | avg1   |
+------+--------+
|  106 | 4.5000 |
+------+--------+ 
```

据我所知，mysql 的结果是正确的，而 sqlite 的结果是不正确的。我尝试`real`使用 sqlite 进行转换，如下所示，但它仍然返回两条记录：

```
select T1.id, cast(avg(cast(T1.score as real)) as real) avg1
from foo T1
group by T1.id
having not exists (
    select T2.id, cast(avg(cast(T2.score as real)) as real) avg2
    from foo T2
    group by T2.id
    having avg2 > avg1); 
```

为什么 sqlite 返回两条记录？

**快速更新**：

我针对最新的 sqlite 版本（3.7.11）运行了该语句，仍然得到两条记录。

**另一个更新**：

我就这个问题向 sqlite-users@sqlite.org 发送了一封电子邮件。

我自己，我一直在玩 VDBE，发现了一些有趣的东西。我拆分了每个循环的执行跟踪`not exists`（每个平均组一个）。

为了拥有三个平均组，我使用了以下语句：

```
create table foo (id VARCHAR(1), score INT);

insert into foo values ('c', 1.5);
insert into foo values ('b', 5.0);
insert into foo values ('a', 4.0);
insert into foo values ('a', 5.0);

PRAGMA vdbe_listing = 1;
PRAGMA vdbe_trace=ON;

select avg(score) avg1
from foo
group by id
having not exists (
    select avg(T2.score) avg2
    from foo T2
    group by T2.id
    having avg2 > avg1); 
```

我们清楚地看到，应该是什么`r:4.5`已经变成了`i:5`：

![在此处输入图像描述](../Images/7d277be6e9abf4bb27965c2d71dbed9d.png)

我现在想看看为什么会这样。

**最终编辑**：

所以我已经玩够了 sqlite 源代码。我现在更好地理解了这头野兽，尽管我会让[原始开发人员](http://sqlite.org/support.html)对其进行整理，因为他似乎已经这样做了：

[http://www.sqlite.org/src/info/430bb59d79](http://www.sqlite.org/src/info/430bb59d79)

有趣的是，至少对我来说，似乎较新的版本（有时在我使用的版本之后）支持插入在上述提交中添加的测试用例中使用的多条记录：

```
CREATE TABLE t34(x,y);
INSERT INTO t34 VALUES(106,4), (107,3), (106,5), (107,5); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T06:32:35.330

让我们看看这两种方式，我将使用 postgres 9.0 作为我的参考数据库

(1)

```
-- select rows from foo 

select T1.id, avg(T1.score) avg1
from foo T1
group by T1.id
-- where we don't have any rows from T2
having  not exists (
-- select rows from foo
select T2.id, avg(T2.score) avg2
from foo T2
group by T2.id
-- where the average score for any row is greater than the average for 
-- any row in T1
having avg2 > avg1);

 id  |        avg1        
-----+--------------------
 106 | 4.5000000000000000
(1 row) 
```

然后让我们移动子查询中的一些逻辑，摆脱'not'：（2）

```
-- select rows from foo 
select T1.id, avg(T1.score) avg1
from foo T1
group by T1.id
-- where we do have rows from T2
having  exists (
-- select rows from foo
select T2.id, avg(T2.score) avg2
from foo T2
group by T2.id
-- where the average score is less than or equal than the average for any row in T1
having avg2 <= avg1);
-- I think this expression will be true for all rows as we are in effect doing a
--cartesian join 
-- with the 'having' only we don't display the cartesian row set

 id  |        avg1        
-----+--------------------
 106 | 4.5000000000000000
 107 | 4.0000000000000000
(2 rows) 
```

所以你必须问自己——当你在有子句中执行这个相关的子查询时，你实际上是什么意思，如果它根据主查询中的每一行评估每一行，我们正在做一个笛卡尔连接，我不认为我们应该指责SQL引擎。

如果您希望每一行都小于最大平均值您应该说的是：

```
select T1.id, avg(T1.score) avg1 
from foo T1 group by T1.id
having avg1 not in 
(select max(avg1) from (select id,avg(score) avg1 from foo group by id)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T12:36:37.970

我试图弄乱一些查询变体。

似乎 sqlite 在嵌套**HAVING**表达式中使用先前声明的字段时出错。

在你的例子`avg1`中，第二个总是等于 5.0

看：

```
select T1.id, avg(T1.score) avg1
from foo T1
group by T1.id
having not exists (
    SELECT 1 AS col1 GROUP BY col1 HAVING avg1 = 5.0); 
```

这个不返回任何内容，但执行以下查询会返回两条记录：

```
...
having not exists (
    SELECT 1 AS col1 GROUP BY col1 HAVING avg1 <> 5.0); 
```

[我在sqlite 票务列表中](http://www.sqlite.org/src/rptview?rn=1)找不到任何类似的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T13:03:20.127

你试过这个版本吗？：

```
select T1.id, avg(T1.score) avg1
from foo T1
group by T1.id
having not exists (
    select T2.id, avg(T2.score) avg2
    from foo T2
    group by T2.id
    having avg(T2.score) > avg(T1.score)); 
```

* * *

还有这个（应该给出相同的结果）：

```
select T1.*
from
  ( select id, avg(score) avg1
    from foo 
    group by id
  ) T1
where not exists (
    select T2.id, avg(T2.score) avg2
    from foo T2
    group by T2.id
    having avg(T2.score) > avg1); 
```

* * *

查询也可以使用派生表来处理，而不是子查询 in`HAVING`子句：

```
select ta.id, ta.avg1
from 
  ( select id, avg(score) avg1
    from foo
    group by id
  ) ta
  JOIN
  ( select avg(score) avg1
    from foo 
    group by id
    order by avg1 DESC
    LIMIT 1
  ) tmp
  ON tmp.avg1 = ta.avg1 
```

# php - 将 PHP 插入到无法在线工作的 mySQL 数据库（通过 Flash 应用程序）

> ID：10171405
> 
> 赞同：0
> 
> 时间：2012-04-16T09:11:56.787
> 
> 标签：php, mysql, database, actionscript-3, flash

所以，这就是问题所在。我有一个小型 Flash 应用程序，它将一些变量发送到 php 脚本（通过 POST），然后该 php 脚本将它们发送到 mySQL 数据库。

当我离线测试我的闪存时，这工作正常，我去 phpmyadmin，并且注册表已完成。当我将 swf 上传到在线 html 时，这将停止工作。它不再在数据库中创建另一个注册表。我不知道为什么会这样。

我读了一点，发现了跨域策略，并认为这可能是问题所在。因此，我制作了一个小的 .xml 文件并将其上传到两台服务器（swf 所在的服务器和具有数据库的服务器），但它仍然无法正常工作。

这是我的 crossdomain.xml 文件（以这种方式命名）：

```
 <?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
<allow-access-from domain="*" />
</cross-domain-policy> 
```

还有 php（名为 insert.php），它与数据库位于同一台服务器上：

```
<?php

//connect to the local MySQL
$connect=mysql_connect("localhost", "DBName", "DBPass");

//select your database
mysql_select_db("DBTable");

//query the database
$query="INSERT INTO results(Nome,Email,Idade,Profissao,Pais)
VALUES
('$_POST[nome]','$_POST[email]','$_POST[idade]','$_POST[profissao]','$_POST[pais]')";

//$result=mysql_query($query);

if (!mysql_query($query,$connect))
{
    die('Error: ' . mysql_error());
    echo "InsertOk=NotOk";
}else{
    echo "InsertOk=Ok";
}

mysql_close($connect)
?> 
```

谢谢！马可·罗伯托

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:15:45.823

除了明显的安全漏洞，尝试

```
"INSERT INTO results(Nome,Email,Idade,Profissao,Pais)
VALUES
('{$_POST['nome']}','{$_POST['email']}','{$_POST['idade']}','{$_POST['profissao']}','{$_POST['pais']}')"; 
```

基本上加`{}`和`''`。

**编辑：**
没关系那部分。注意到它不相关。

我相信您必须调用自己的站点，并使用[CURL](http://php.net/manual/en/book.curl.php)将 -values 传递`$_POST`给其他域。

**[试试这个答案](https://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript?answertab=votes#tab-top)**
即使这是针对 javascript，我相信同样的规则也适用于您的 swf 文件。

# internet-explorer - 加载 iframe 后，Ext.window 未隐藏在 IE 中

> ID：10171407
> 
> 赞同：0
> 
> 时间：2012-04-16T09:12:00.500
> 
> 标签：internet-explorer, iframe, extjs, window

我有一个带有隐藏 iFrame 的 Ext.window 对象。加载 iFrame 后，如果没有错误，它会调用一个函数来隐藏窗口。

这在 FF 中非常有效，但在 IE 中却不行，您必须手动关闭它。

```
var win = new Ext.Window({
    id: "urlWindow",
    width: 500,
    height: 300,
    maximizable: true,
    modal: true,
    loadMask: true,
    title: 'Please wait...',
    html: '<iframe id="urlFrame" name="urlFrame" width="100%" height="100%" onload="loaded(this)" src="' + url + '"></iframe>',
    listeners: {
        'hide': function () {
            ...
        }
    }
});

win.show();

function loaded(fme) {
    var content = fme.contentWindow.document.body.innerHTML;
    if (content.indexOf("Error") <= 0) {
        win.hide();
    }
    return true;
} 
```

# javascript - 向服务器发布请求

> ID：10171412
> 
> 赞同：0
> 
> 时间：2012-04-16T09:12:10.207
> 
> 标签：javascript, browser, firebug, lotus-notes, xpages

我知道这很有趣也很愚蠢。但是告诉我

他们无论如何都要在 Firebug 的脚本选项卡中编写 javascript 代码，这将调用服务器端操作。

**

> 简单地说，我可以在 Firebug 脚本选项卡中编写服务器端 javacsript 代码吗？

**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:18:12.673

不，您不能在 Firebug 脚本选项卡中执行 SSJS 代码。但是您可以使用“executeOnServer”-Function 来调用服务器端操作。

有关更多详细信息，请参见此处：

[http://xpages.info/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC](http://xpages.info/XPagesHome.nsf/Entry.xsp?documentId=88065536729EA065852578CB0066ADEC)

**编辑：**

如果您已将此 CSJS 函数添加到 XPage，则可以通过在 firebug 控制台中执行此代码来调用服务器上的事件

```
executeOnServer('eventhandler1a'); 
```

这将调用`eventhandler1a`服务器上的事件。

希望这有助于
斯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:22:54.230

您应该查看 OpenNTF 上的 Medusa 项目。它现在已停产，但我认为查看来源可能对您有所帮助。

[http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Medusa](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=Medusa)

# android - 红色激光SDK中的前置摄像头和闪光灯

> ID：10171413
> 
> 赞同：3
> 
> 时间：2012-04-16T09:12:12.733
> 
> 标签：android, barcode-scanner

我想知道我们是否可以选择使用红色激光 android sdk 中的前置摄像头扫描条形码？还有怎么打开闪光灯？是否有任何文档或示例应用程序可用于上述要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T09:58:48.037

这两个功能都已添加到 Android RedLaser SDK 3.0 版本中。SDK 包中包含的 RLSample 应用程序演示了这两个功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:17:21.230

您使用的是哪个版本的 Android RedLaser SDK？尝试更新/下载最新的稳定版本。它对我很好。

# java - 使用 '。' 当使用 -D 将参数传递给 java 二进制文件时不能很好地解析

> ID：10171415
> 
> 赞同：1
> 
> 时间：2012-04-16T09:12:19.347
> 
> 标签：java, linux, hudson, jenkins

我正在使用 Jenkins CI 从`execute shell`构建步骤运行 java：

`java -jar -Dadmin.hostname=$hostname -Dschema_name=$schema myapp.jar`

我注意到虽然这两个参数`hostname`和`schema`都定义得很好并且在运行时具有非空值，但 Jenkins 以以下方式解析它：

`java -jar -Dadmin.hostname= -Dschema_name=MYDB myapp.jar`

意思`admin.hostname`值没有被解析。

我已经跟踪了这个问题，并注意到当我不在`.`参数名称中使用时，一切都会被解析好。

我想知道这可能是 Java 命令行的限制还是 Jenkins 中的错误。（我正在使用 RHEL64）

谢谢

编辑：我认为这是参数化构建 jenkins 插件的错误，因为`.`在其他构建中使用效果很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:15:51.977

也许问题在于 UNIX 上的环境变量区分大小写

```
$ echo $hostname

$ echo $HOSTNAME
myhostname 
```

使用应该没有任何问题，`.`因为可能内置的属性会使用它们。

顺便说一句：仅仅因为属性设置为空白并不意味着它没有设置。

```
System.out.println("not.set=" + System.getProperty("not.set"));
System.out.println("admin.hostname='" + System.getProperty("admin.hostname")+"'"); 
```

`-Dadmin.hostname=`打印时运行

```
not.set=null
admin.hostname='' 
```

# javascript - 如何提交表单，然后重定向到个性化的感谢页面？

> ID：10171419
> 
> 赞同：1
> 
> 时间：2012-04-16T09:12:44.267
> 
> 标签：javascript, submit

```
 $("#new_note").submit();
    window.location.href='./thankyou.php?usr_id=<?php echo $_SESSION['pid'>'; 
```

嗨，这是提交表单然后重定向到感谢页面的简单代码。它实际上做了重定向部分，但没有提交表单

我猜它在提交完成之前重定向，如何避免？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:30:25.653

如前所述，将重定向调用包装在 jQuery 的`.submit()`回调函数中。

使用`window.location.replace(URL)`类似于页面重定向操作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:18:18.170

正如@ThiefMaster 所说，您应该在服务器端重定向。

否则，使用`submit`函数的回调。它确保执行提交。

```
$('#new_note').submit(function() {
    window.location.href = // your code
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:18:55.293

我不熟悉 php，但你不能在完成后从提交处理程序本身重定向页面吗？或使用 jquery load 并在加载完成时执行重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:16:32.997

不要通过 JavaScript 重定向，而是让您提交表单的页面重定向到“感谢”页面。

# jquery - 使用 css id 为 div 设置动画

> ID：10171423
> 
> 赞同：2
> 
> 时间：2012-04-16T09:12:53.903
> 
> 标签：jquery, html, css

有没有办法使用类的样式为某个 div 设置动画？

示例（html）：

```
<div id="nice_div"></div> 
```

CSS：

```
#nice_div{
    width: 200px;
    height: 150px;
}

.animate{
    width: 300px;
    height: 250px;
} 
```

我想要实现的是这样的：

```
$("#nice_div").animate(".animate"); 
```

显然这段代码是虚构的。有没有办法实现类似的东西？哦，是的，.animate div 在 DOM 中不可用。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:23:17.677

是的，这是可能的：

```
#nice_div {
    -webkit-transition: height 1s, width 1s;
    -moz-transition: height 1s, width 1s;
    transition: height 1s, width 1s;

    width: 200px;
    height: 150px;
}

$("#nice_div").addClass(".animate"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:17:01.093

这是不可能的。该[`animate()`](http://api.jquery.com/animate)方法只接受要更改的属性映射。

可以从一个已经应用了类的隐藏元素创建一个映射，但这实现起来非常棘手，因为您无法以编程方式知道哪些样式是从您的样式表中设置的，哪些是由浏览器自动设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:19:52.357

您可以使用 jquery 添加或删除特定元素的 CSS 类

```
$('#nice_div').click(function(){
this.addClass('animate');
                              }); 
```

您也可以使用删除类

```
$('#nice_div').removeClass('animate'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:20:59.970

嘿，这是不可能的，因为 jQuery`animate()`函数具有某些属性，我们需要通过。它不直接连接到 CSS 类。

另外，如果您需要将新类添加到同一元素，您可以根据您的要求使用`addClass()`函数或函数。`css()`

您可以尝试实现这样的目标是在页面上有一个隐藏文件。访问隐藏字段中的值并连接`animate()`函数中的值。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-16T09:16:05.027

您可以尝试使用[jquery](http://api.jquery.com/animate/)

为任何元素设置动画，例如简单的图像：

```
<div id="clickme">
  Click here
</div>
<img id="book" src="book.png" alt="" width="100" height="123"
  style="position: relative; left: 10px;" /> 
```

要同时为图像的不透明度、左偏移和高度设置动画：

```
$('#clickme').click(function() {
  $('#book').animate({
    opacity: 0.25,
    left: '+=50',
    height: 'toggle'
  }, 5000, function() {
    // Animation complete.
  });
}); 
```

# magento - Magento 1.6.2 移除 Paypal 订单状态

> ID：10171425
> 
> 赞同：0
> 
> 时间：2012-04-16T09:12:58.467
> 
> 标签：magento, paypal

我正在运行 Magento 1.6.2 并想删除 Paypal 订单状态。它们根本没有被使用，它们污染了我的订单状态列表。禁用 Paypal 不起作用。

Magento 1.6.2 确实具有在管理员中管理订单状态的出色能力，但 Paypal 状态是不可移除的。

有什么方法可以将它们从数据库中硬删除，或者只是以某种方式隐藏它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T18:41:58.197

我可以告诉你，你不想删除它们，`Mage_Paypal_Model_Info`用它们来检查付款是否正在审查、欺诈、处理或完成。我建议你只处理它们。它们作为 const 存在是有目的的，即使您实际上可能没有使用它们，但它们在幕后使用。他们带来的好处多于真正带来的伤害。

```
 /**
     * Check whether the payment is in review state
     *
     * @param Mage_Payment_Model_Info $payment
     * @return bool
     */
    public static function isPaymentReviewRequired(Mage_Payment_Model_Info $payment)
    {
        $paymentStatus = $payment->getAdditionalInformation(self::PAYMENT_STATUS_GLOBAL);
        if (self::PAYMENTSTATUS_PENDING === $paymentStatus) {
            $pendingReason = $payment->getAdditionalInformation(self::PENDING_REASON_GLOBAL);
            return !in_array($pendingReason, array('authorization', 'order'));
        }
        return false;
    }

    /**
     * Check whether fraud order review detected and can be reviewed
     *
     * @param Mage_Payment_Model_Info $payment
     * @return bool
     */
    public static function isFraudReviewAllowed(Mage_Payment_Model_Info $payment)
    {
        return self::isPaymentReviewRequired($payment)
            && 1 == $payment->getAdditionalInformation(self::IS_FRAUD_GLOBAL);
    }

    /**
     * Check whether the payment is completed
     *
     * @param Mage_Payment_Model_Info $payment
     * @return bool
     */
    public static function isPaymentCompleted(Mage_Payment_Model_Info $payment)
    {
        $paymentStatus = $payment->getAdditionalInformation(self::PAYMENT_STATUS_GLOBAL);
        return self::PAYMENTSTATUS_COMPLETED === $paymentStatus;
    }

    /**
     * Check whether the payment was processed successfully
     *
     * @param Mage_Payment_Model_Info $payment
     * @return bool
     */
    public static function isPaymentSuccessful(Mage_Payment_Model_Info $payment)
    {
        $paymentStatus = $payment->getAdditionalInformation(self::PAYMENT_STATUS_GLOBAL);
        if (in_array($paymentStatus, array(
            self::PAYMENTSTATUS_COMPLETED, self::PAYMENTSTATUS_INPROGRESS, self::PAYMENTSTATUS_REFUNDED,
            self::PAYMENTSTATUS_REFUNDEDPART, self::PAYMENTSTATUS_UNREVERSED, self::PAYMENTSTATUS_PROCESSED,
        ))) {
            return true;
        }
        $pendingReason = $payment->getAdditionalInformation(self::PENDING_REASON_GLOBAL);
        return self::PAYMENTSTATUS_PENDING === $paymentStatus
            && in_array($pendingReason, array('authorization', 'order'));
    }

    /**
     * Check whether the payment was processed unsuccessfully or failed
     *
     * @param Mage_Payment_Model_Info $payment
     * @return bool
     */
    public static function isPaymentFailed(Mage_Payment_Model_Info $payment)
    {
        $paymentStatus = $payment->getAdditionalInformation(self::PAYMENT_STATUS_GLOBAL);
        return in_array($paymentStatus, array(
            self::PAYMENTSTATUS_DENIED, self::PAYMENTSTATUS_EXPIRED, self::PAYMENTSTATUS_FAILED,
            self::PAYMENTSTATUS_REVERSED, self::PAYMENTSTATUS_VOIDED,
        ));
    } 
```

进去`app/code/core/Mage/Paypal/etc/config.xml`看看就能找到这个

```
<sales>
    <order>
        <statuses>
            <pending_paypal translate="label">
                <label>Pending PayPal</label>
            </pending_paypal>
        </statuses>
    </order>
</sales> 
```

但看看 app/code/core/Mage/Sales/etc/config.xml

```
 <!-- /**
              * @depraceted after 1.4.2, statuses are saved into sales_order_status table
              */
        --> 
```

如果您使用的是 1.4.2 之后的版本，您应该查看数据库中的 sales_order_status 表，它们存在于 config.xml 中的唯一原因是为了确保向后兼容。

这是添加待处理 PayPal 状态的部分，您可以评论/删除并将其删除，但我建议您在删除之前找出此状态的使用位置，以免出现任何看不见的冲突，您可以`grep -r 'sales_order_status' *`在 app/code 和 lib/ 中使用来查找可能使用此表的任何内容以及何时使用`Pending PayPal`.

# maven - 有没有办法使用 nexus 同步存储库？

> ID：10171430
> 
> 赞同：2
> 
> 时间：2012-04-16T09:13:16.620
> 
> 标签：maven, synchronization, repository, nexus2

我正在使用nexus（2.0.2）维护一个内部maven repo。由于组织限制，它位于没有互联网连接 (INT) 的机器上。每当需要新的依赖项时，它们都会安装在连接到 Internet (EXT) 的计算机上的存储库中。然后将 EXT 存储库放在笔式驱动器上，并（经过各种安全扫描后）插入 INT。EXT 和 INT 没有以任何其他方式连接。

我想做的是将pendrive repo添加到nexus并使nexus与内部repo同步。

我知道可以使用 rsync 完成，但如果存在集成解决方案，我更喜欢它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:28:51.440

好吧，没有比您已经想出的更好的方法了。恕我直言`rsync -a --delete`，是能够为您工作的最佳解决方案，您正在谈论所有这些严重的限制。

# sql - 无法打开登录请求的数据库 MyDB。登录失败。用户“myUser”的登录失败

> ID：10171432
> 
> 赞同：1
> 
> 时间：2012-04-16T09:13:17.313
> 
> 标签：sql, sql-server-2005, sql-server-express

我有一个 SQL Server Express 数据库连接问题。

我有 WPF 应用程序，它使用 LINQ-to-SQL 连接到我的数据库。

当我在调试模式 F5 下运行应用程序时，应用程序工作正常，但是当我运行它时 CTRL+F5 我得到连接到 SQL 错误

> 无法打开登录请求的数据库 MyDB。登录失败。用户“myUser”的登录失败

我已经在谷歌中检查并尝试了所有建议的解决方案，但没有任何帮助......:(

谁能帮我？谢谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:09:07.303

这可能是由不同运行模式的不同变量初始化行为引起的。

在“开始调试”模式下，未初始化的变量设置为默认值。但是在“Start without debugging”中，变量是随机的。

例如，您有：

```
int iHowMany; 
```

在“开始调试”模式下，`iHowMany`初始化为`0`. 但是在“不调试启动”模式下， 的值`iHowMany`是随机的。

很容易找到所有未初始化的变量。VC 编译器会为使用未初始化的变量生成警告。只需浏览编译器警告列表，找到它们并初始化它们。

[（资源）](http://www.kevingao.net/programming/the-difference-between-start-with-debugging%E2%80%9D-and-%E2%80%9Cstart-without-debugging.html)

您还应该检查该问题：

[调试模式的区别](https://stackoverflow.com/questions/3360900/visual-c-difference-between-start-with-without-debugging-in-release-mode)

# eclipse - 在 Eclipse 中默认显示 CVS 注释

> ID：10171433
> 
> 赞同：4
> 
> 时间：2012-04-16T09:13:19.020
> 
> 标签：eclipse, cvs

在 Eclipse 中，您可以通过从上下文菜单中选择 Team->Show annotations... 来显示文件的 CVS 注释（哪个用户更改了哪个提交中的哪一行）。但是，我想默认为我的 CVS 项目中的所有文件启用此功能。有没有办法这样做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T13:43:07.950

在eclipse中的svn中发现了同样的问题。为了避免点击很慢，我为显示注释设置了一个热键。它不是完整的解决方案，但比每次单击要快，您想使用显示注释功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-17T12:20:00.593

简短的回答：没有。不幸的是没有。这不是偏好。

# ruby-on-rails - 如何更改设计中重定向的默认行为

> ID：10171438
> 
> 赞同：1
> 
> 时间：2012-04-16T09:13:47.397
> 
> 标签：ruby-on-rails, devise

我的路由文件中有这个：

```
 devise_scope :user do
   get "/admin", :to => "users/sessions#new"
 end 
```

我可以通过访问以形式访问歌曲`http://localhost:3000/admin`。`Sign in`当我在不提供的情况下单击时`username`，`password`它会将我重定向到`/users/sign_in`包含有关缺少用户名和密码的错误消息的路径。

我认为这是设计的默认行为。但是在唱歌错误时，我想被重定向到`/admin`而不是 default `/users/sign_id`。我怎样才能实现这种行为？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:22:24.180

```
 devise_for :users
  as :user do
    get 'admin' => 'devise/sessions#new', :as => :new_user_session
    post 'admin' => 'devise/sessions#create', :as => :user_session
  end 
```

# iphone - 完全禁用 ipad

> ID：10171441
> 
> 赞同：-4
> 
> 时间：2012-04-16T09:14:10.673
> 
> 标签：iphone

我们可以完全禁用 ipad 吗？我听说这是不可能的。我已经搜索过它，它表明无法完成上述操作，如果完成，则该应用程序将被拒绝。但仍然为了一个准确的答案，我发布了这个。谁能给我正确的答复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:16:20.097

不，如果不使 iPad 生根（从而使其保修无效）并安装大多数用户认为的恶意软件，您就无法做到这一点。（您可能有一个合理的用例——将它们借出或其他方式——我只是说，这就是大多数用户的看法。）

# video - 使用 Arduino 和多路复用器的同轴开关

> ID：10171443
> 
> 赞同：2
> 
> 时间：2012-04-16T09:14:27.490
> 
> 标签：video, arduino, integrated

嗨，也许有人可以在这里帮助我，基本上我正在尝试构建一个计算机控制的同轴开关。我正在使用常规的集成电路多路复用器来处理将哪个通道连接到输出。所以基本上我有：

```
 (8 X Coaxial Inputs)
                  I I I I I I I I 
```

微控制器----> | 多路复用器 | --------------- I（1 X 同轴输出）

这个想法是让我可以使用计算机来控制我可以观看的 8 个视频源中的哪一个。我认为因为连接是直通的，所以我不必担心衰减，但我尝试使用面包板进行示例设置，我几乎看不到图片。关于如何使它发挥作用的任何想法？

我目前正在使用带有我列出的所有组件的面包板加上一些小规格电缆（以便它们适合面包板）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:21:03.457

**软件：**

你需要安装腻子：
腻子是一个跨平台的串行客户端。
可用于ssh和串口客户端

**硬件：**

您可以使用常规继电器进行切换（不要忘记继电器线圈上的二极管）
和多路复用器，

将多路复用器数据引脚连接到 arduino 到 3 个数字 IO。
例如 mux0 = pin 2, mux1 = pin3 mux3 = pin4

**软件：**

像这样的东西

```
//assign multipex pins
const int mux0=2;
const int mux1=3;
const int mux2=4;

//global variables
int current=0;

void setup()
{
  Serial.begin(9600);
  displayMenu();
}
void loop()
{
  if(Serial.available()) //check if new byte is comming
  {
    char in = Serial.read();//read the byte
    if(in >= '0' && in <= '7')//check if it is a usable number
    {
      current = in - 48; // ASCII 0= 48 ASCII 7=55 so it is linear moved whith 48
      //write output; by reading individual bits of in and write them to te outputs
      digitalWrite(mux0,bool(current & 0b00000001));
      digitalWrite(mux1,bool(current & 0b00000010));
      digitalWrite(mux2,bool(current & b00000100));
      //update screen
      Serial.write(8); //removes last char;
      Serial.print(current)
    }
    else
      displayMenu(); //if wrong input then displayMenu
  }
}
void displayMenu()
{
  //clear output 
  for(int i=0;i<=200;i++)
    Serial.write(10); //line feed
  Serial.write(13); //carriage return

  //replace 'input x' by were the camera is placed; 
  Serial.println("0: input 0");
  Serial.println("1: input 1");
  Serial.println("2: input 2");
  Serial.println("3: input 3");
  Serial.println("4: input 4");
  Serial.println("5: input 5");
  Serial.println("6: input 6");
  Serial.println("7: input 7");
  Serial.println();
  Serial.print("current selected: ");
  Serial.print(current);
} 
```

未经测试，但应该可以工作；

**手动的：**

你打开串行终端。（putty）
连接到串口（9600）波特
类型你要选择的数字

# java - 根据其响应安排任务

> ID：10171446
> 
> 赞同：0
> 
> 时间：2012-04-16T09:14:39.380
> 
> 标签：java, spring, scheduled-tasks, quartz-scheduler

我正在尝试根据任务的响应来安排任务。任务是这样的：

```
public Date scheduledTask() {
    Date nextRun;
    // ...
    nextRun = something();
    // ...
    return nextRun;
} 
```

如何确保在到达时再次调用相同的任务`nextRun`？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T19:19:53.807

按照[这里](http://www.jroller.com/jurberg/entry/custom_scheduling_in_spring)提到的想法，那么你应该能够：

```
public class GuaranteeSchedule implements Trigger {

  private Future<?> resultForNextRun;
  private TaskScheduler scheduler;

  public void scheduledTask() {
    // 'this' is this trigger that is used by the scheduler 
    // and the method `nextExecutionTime` is automatically called by the scheduler
    resultForNextRun = scheduler.schedule(theTask, this);
    // theTask is the object that calls something()
  }

  // Implementing Trigger to add control dynamic execution time of this trigger
  @Override
  public Date nextExecutionTime(TriggerContext tc) {
    // make sure the result for the previous call is ready using the waiting feature of Future
    Object result = resultForNextRun.get();
    // Use tc or other stuff to calculate new schedule
    return new Date();
  }

} 
```

其余的，您应该遵循参考中提到的配置。我相信这将解决将触发器的下一个调用依赖于前一个结果的问题。您可能还需要小心第一次调用`scheduledTask`以确保`resultForNextRun != null`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T19:55:11.557

使用标准 Quartz 调度程序 API，这非常简单。在您的`Job`计算`nextRun`时间内并创建一个触发器，并`startAt()`定义：

```
public class ScheduledJob implements Job {

    @Override
    public void execute(JobExecutionContext context) throws JobExecutionException {
        final Date nextRun = something();

        Trigger trigger = newTrigger().
                startAt(nextRun).
                forJob(context.getJobDetail()).
                build();

        context.getScheduler().scheduleJob(trigger);
    }

} 
```

经过测试，就像一个魅力。

# paypal - Payflow Pro 不工作

> ID：10171450
> 
> 赞同：0
> 
> 时间：2012-04-16T09:14:56.507
> 
> 标签：paypal, magento-1.5, paypal-sandbox, magento

我似乎已经正确设置了一切，但是我的交易没有被放置，当我点击“放置订单”按钮时，我收到一条错误消息“处理您的订单时出错，请联系我们或稍后再试”。

我仔细检查了商家的电子邮件。正确提供合作伙伴 ID、用户、供应商和密码并启用测试模式。我的 payflow pro 帐户未激活，因此它是一个测试帐户。这是我问题的原因吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:14:21.857

这是一个正常的过程，我会联系 PayPal，因为他们拒绝付款，因为他们一方的规则，超过最大限制等。

其他选择是您可以更改发送的请求以增加错误的详细程度，但这只会进一步阐明并有助于故障排除。

请求字符串需要附加 Verbosity=Medium 以增加输出。我相信这可以通过类来完成`Mage_Paypal_Model_Payflowpro:_buildBasicRequest()`并修改`setVerbosity()`

有关信息，请参阅[PayPal 文档](https://cms.paypal.com/cms_content/US/en_US/files/developer/PP_PayflowPro_Guide.pdf)。

# sip - 从 PSTN 拨打多个来电

> ID：10171451
> 
> 赞同：0
> 
> 时间：2012-04-16T09:14:58.540
> 
> 标签：sip, voip, freeswitch

我有使用媒体网关和软交换 (YATE) 的 VoIP 测试设置。媒体网关将来自 E1 PRI 上的 PSTN 的呼入转换为 SIP INVITE，并将它们发送到软交换，软交换将 INVITE 转发给已注册的客户端。是否有可用的开源/免费工具允许我在 E1 PRI 号码上模拟来自 PSTN 的多个来电？我想要类似于 sipp 但可以同时拨打多个 E1 电话的东西。E1 PRI 有大约 24 个不同的数字。我想要一个工具，最好是使用 E1 卡从我的 PC 上同时拨打尽可能多的电话。这可能吗？

感谢任何帮助/指针。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:06:55.587

我不知道有什么工具可以与 sipp 等效，如今 ISDN 测试没有像 SIP 那样在工具上投入同样的精力。然而，你总是可以安装 Asterisk 并使用它的[应用程序网关接口](http://www.asterisk.org/docs/asterisk/trunk/applications/agi)(AGI) 来编写调用脚本，有很多 AGI 的高级语言包装器，例如[PHP](http://www.asterisk.org/docs/asterisk/trunk/applications/agi)、[Ruby](https://github.com/erichmond/ruby-agi)等。

当然，为了能够将 Asterisk 与 E1 PRI 一起使用，您需要获得[E1 PCI 卡](http://www.digium.com/en/products/digital/single-span/)，我相信您可以在 eBay 上以非常便宜的价格获得克隆（因为它仅用于测试便宜没关系，建议在生产中坚持使用带有 Asterisk 和 ISDN 的 Digium 卡）。

# plugins - 我应该为 Outlook 插件使用什么存储空间？

> ID：10171454
> 
> 赞同：7
> 
> 时间：2012-04-16T09:15:18.633
> 
> 标签：plugins, outlook, vsto, storage

如果我要使用 VSTO 部署 Outlook 插件，我应该使用什么存储系统？

是否可以使用 Outlook 的电子邮件？

**更新**

我考虑过 SQL Express ，但我认为我应该使用与 Outlook 使用的相同的东西，这样会省事

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-16T13:29:02.987

有许多选项供您考虑，下面我列出了我过去见过的所有选项。

1.  对于 Outlook 管理的存储，您可以查看使用哪个是给定文件夹（*收件箱等*）[`StorageItem`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.storageitem.aspx)中的隐藏项目。使用您可以添加[自定义用户属性](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.userproperties.add.aspx)和文件附件。*`StorageItem`*

**   您还可以创建新文件夹并使用标志将其标记为[`PR_ATTR_HIDDEN`隐藏](http://books.google.com/books?id=JG_6oJyVCsYC&pg=PT1079&lpg=PT1079&dq=outlook%20PR_ATTR_HIDDEN&source=bl&ots=kYMRGryBaQ&sig=-7y-cVzl2Ma5qf6FNewJ9j3GQnM&hl=en&sa=X&ei=7BqMT9f3KInI0QGJyvT5CQ&ved=0CFAQ6AEwBQ#v=onepage&q=outlook%20PR_ATTR_HIDDEN&f=false)。添加任何邮件项目或日记项目仅对您的加载项可见​​，因为您可以通过 API 访问隐藏文件夹 - 但不能通过 Outlook 界面。

    *   我还看到用户将信息存储在序列化为 XML 的 Outlook 日记项目中（如*[jello-dashboard](http://jello-dashboard.net/)**所做的那样*）。

    *   您可以[通过创建自定义商店`AddStore`](http://www.add-in-express.com/creating-addins-blog/2012/03/19/outlook-personal-folders-store/)来构建本地 PST。

    *   或者，您可以将数据存储在 Outlook 系统外部以供您的插件使用。外部存储可以是[本地环境路径](https://stackoverflow.com/a/10035529/175679)、本地/远程数据库或 Web 服务调用。*

# c# - HttpWebRequest 为 Windows Phone 发送带有 multipart/form-data 的文件

> ID：10171455
> 
> 赞同：0
> 
> 时间：2012-04-16T09:15:22.467
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

我已经在我的手机中创建了一个 Csv 文件（我有这个内容和这个路径）以及发布这个 csv 的 url ...

```
string path = csv.path;
string content = csv.content;
string urlPost = csv.urlPost; 
```

我想用 HttpWebRequest 发布我的文件（只有一个 csv 文件），对于 windows phone，我在 C# 中看到了很多关于 HttpWebRequest 的帖子，而且从来没有特定于 windows Phone（适用于 windows phone 的 HttpWebRequest 没有“正常”的所有方法" HttpWebRequest) 。

我已经看到了 msdn 页面 => [http://msdn.microsoft.com/en-us/library/debx8sh9.aspx](http://msdn.microsoft.com/en-us/library/debx8sh9.aspx) 以及 c# [Upload files with HTTPWebrequest (multipart/form-data)](https://stackoverflow.com/questions/566462/upload-files-with-httpwebrequest-multipart-form-data)中 HttpWebRequest 的这篇文章但我没有t 来为 windows phone 翻译示例。

我到了打电话给我的服务器（用我的网址）但是，文件永远不会传输......

另外，我不想使用 RestSharp 库。

我的实际代码=>

```
public void SentPostReport()
    {

        Uri uri = new Uri(csv.urlPost); //Url is string url 

        string boundary = "----------------------------" + DateTime.Now.Ticks.ToString("x");

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.ContentType = "multipart/form-data; boundary=" + boundary;
        request.Method = "POST";

        request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback), request);

    }

    private void GetRequestStreamCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        // End the operation
        Stream postStream = request.EndGetRequestStream(asynchronousResult);

        // My File content and path.
        string pathReportFile = csv.path;
        string CsvContent = csv.content;

        // Transmitted The File ???? 

        postStream.Close();

        // Start the asynchronous operation to get the response
        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);
    }

    private static void GetResponseCallback(IAsyncResult asynchronousResult)
    {
        HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

        // End the operation
        HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
        Stream streamResponse = response.GetResponseStream();
        StreamReader streamRead = new StreamReader(streamResponse);
        string responseString = streamRead.ReadLine();
            //DEBUG => affiche le résultat de la requête.
            Debug.WriteLine(responseString);
        // Close the stream object
        streamResponse.Close();
        streamRead.Close();

        // Release the HttpWebResponse
        response.Close();
    } 
```

我在 GetRequestStreamCallback 的函数中删除了我的代码，并替换为“// 传输文件？”

我认为这是我必须发送文件的地方，但我找不到传输此文件的解决方案。

我用这段代码进行了测试：

```
byte[] byteArray = Encoding.UTF8.GetBytes(CsvContent);
postStream.Write(byteArray, 0, byteArray.Length); 
```

和其他在不同的论坛上找到的，我每次都用我的服务器打电话很好，但文件没有传输......

你有使用 HttpWebRequest 和 Stream 在我的服务器中发送我的文件的解决方案吗？提前：谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-08T06:27:07.553

好吧，我刚刚发现这个项目，只是一个辅助类，非常简单和有用。

[MultipartHttpClient](http://multiparthttpwp7.codeplex.com/)

希望这可以帮助

# java - 如何使用 setArguments/getArguments 创建片段

> ID：10171460
> 
> 赞同：3
> 
> 时间：2012-04-16T09:15:36.560
> 
> 标签：java, android, android-fragments

我正在使用 [流行病答案中的信息在我的应用程序中创建标签](https://stackoverflow.com/a/7480080/858626)

我创建了处理标签的主类，这个类`extends TabActivity`并创建标签：

```
 Resources res = getResources();
    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;  
    Intent intent;

    intent = new Intent().setClass(this, stackA.class);    
    spec = tabHost.newTabSpec("tab1").setIndicator("Tab 1",
                      res.getDrawable(android.R.drawable.ic_menu_search))
                  .setContent(intent);
    tabHost.addTab(spec);

    intent = new Intent().setClass(this, stackB.class);
    spec = tabHost.newTabSpec("tab2").setIndicator("Tab 2",
                      res.getDrawable(android.R.drawable.ic_menu_search))
                  .setContent(intent);
    tabHost.addTab(spec);
    tabHost.setCurrentTab(0); 
```

然后为每个选项卡创建 FragmentActivity，这为在每个选项卡中创建堆栈提供了可能性。我的片段被创建：

```
protected void navigateTo(Fragment newFragment) {
    FragmentManager manager = getSupportFragmentManager();
    FragmentTransaction ft = manager.beginTransaction();
    ft.replace(R.id.content, newFragment);
    ft.addToBackStack(null);
    ft.commit();
}  

public class fragmentA extends Fragment{
    private LinearLayout ll;
    private FragmentActivity fa;

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

    fa = super.getActivity();
    ll = (LinearLayout) inflater.inflate(R.layout.fragmenta, container, false);
    Button next = (Button) ll.findViewById(R.id.button1);
    next.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            ((ActivityInTab) getActivity()).navigateTo(new fragmentB());
        }
    });
    return ll;
    }
} 
```

这是有效的。当我在选项卡 1 和片段 B（堆栈中的第一个片段是 A）时，旋转我的设备，然后它返回片段 A，这有什么问题。

Epidemian 说了一些关于方向和使用 setArguments/getArguments 的内容，但我是 android 编程的新手，所以我真的不知道该怎么做：

> 最后，如果您需要在方向变化中幸存下来，请务必使用 setArguments/getArguments 创建您的片段。如果您在片段的构造函数中设置实例变量，您将被搞砸。但幸运的是，这很容易解决：只需将所有内容保存在构造函数的 setArguments 中，然后在 onCreate 中使用 getArguments 检索这些内容以使用它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T17:56:47.353

```
int x;

Bundle args = new Bundle();

args.putString("variable", x);

FragmentManager fragmentManager = getFragmentManager();

FragmentTransaction ft = fragmentManager.beginTransaction();

Fragment fragment = Fragment.instantiate(getActivity(), MyFragment.class.getName(), args);

ft.replace(R.id.layout1, fragment);

ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);

ft.addToBackStack(null);

ft.commit(); 
```

比在片段中：

```
getArguments().getInt("variable"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T20:43:45.640

你可以用`Fragment.setRetainInstance(true)`这个。请参阅[此相关问题](https://stackoverflow.com/questions/5164126/retain-the-fragment-object-while-rotating)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-16T10:50:26.457

您可以防止`Activity`蜜蜂因方向变化而被破坏。将以下行添加到您的清单中`TabActivity`（方向更改 + 键盘可见性更改）

```
android:configChanges="keyboardHidden|orientation" 
```

[有关说明，请参见](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)此处。

setArguments/getArguments 在这里对您没有帮助。正如他所说，您可以使用它来保存实例变量并在方向更改后检索它们。但是对于上面给定的行，您不需要这样做，因为您的 Activity/Fragments 不会被破坏

# asp.net-mvc-3 - ASP.NET MVC - 有一个带有表单的确认按钮

> ID：10171464
> 
> 赞同：12
> 
> 时间：2012-04-16T09:15:43.703
> 
> 标签：asp.net-mvc-3

我的模型有一个强类型视图，我想要的是，当用户点击提交时，会弹出一个确认框，确认用户确实希望提交表单，如果他们点击取消，那么它不应该触发该`HttpPost`视图的操作，这可能吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-16T09:29:43.987

当然这是可能的。我喜欢使用一种不引人注目的方法。这是一个简化的示例：

```
jQuery(document).ready(function () {
  jQuery('[data-confirm]').click(function (e) {
    if (!confirm(jQuery(this).attr("data-confirm")))
    {
      e.preventDefault();
    }
  });
}); 
```

然后你只需要添加一个 data-confirm 属性到你的提交按钮，例如

```
<input type="submit" data-confirm="are u sure?" /> 
```

当然，您可以在链接、按钮等上使用此属性。您不仅限于提交按钮，如果您想稍后实现更精美的确认对话框，您将不得不仅在一个地方替换代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T09:23:15.753

```
 function doSubmit()
        {                                 
                if(window.confirm("ARE YOU SURE TO PERFORM THIS ACTION"))
                {                       
                    return true;
                }
                else return false;                
        } 
```

在表单的事件上调用`doSubmit()`函数，例如-`onsubmit``onsubmit="return doSubmit()`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-16T09:21:20.187

您可以为此添加一个简单的 jQuery 调用。

在您的视图末尾添加：

```
<script type="text/javascript">

    $("form").submit(function() {

        return confirm('Are you sure?');

    });

</script> 
```

或者，添加一个

```
onsubmit="return confirm('Are you sure?');" 
```

作为新的元素属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:23:31.893

我相信这可以通过使用 jquery 覆盖提交按钮来完成。[jQuery .submit()](http://api.jquery.com/submit/)

这样，当该人点击提交时，您可以显示一条消息并提交或取消它。

# c# - 在 C# 中打开文件

> ID：10171470
> 
> 赞同：0
> 
> 时间：2012-04-16T09:16:21.983
> 
> 标签：c#, asp.net

在我的 Aspx 页面中，我有两个按钮，btnGenerateReceipt 用于生成收据，btnAddNew 用于添加新收据。btnGenerateReceipt 的 OnClick 事件我正在生成并打开如下收据。

```
 protected void onGenerateReceipt(object sender, EventArgs e)
    {
          try
            {
                    byte[] document = receiptByte;
                    Response.ClearContent();
                    Response.ClearHeaders();
                    Response.Buffer = true;
                    Response.ContentType = "application/vnd.ms-word";
                    Response.AddHeader("content-disposition", "inline;filename=" + "Receipt" + ".doc");
                    Response.Charset = "";
                    Response.Cache.SetCacheability(HttpCacheability.NoCache);
                    Response.BinaryWrite(document);
                    //Response.Flush();
                }

            }
            catch (Exception ex)
            {

            }
            finally
            {
                //Response.End();
            }
        }
    } 
```

这将打开打开/保存/取消对话框，以下是我的问题，

1.  我需要word文档在没有对话框的情况下自动打开。
2.  单击 btnGenerateReceipt 按钮后，我的第二个按钮的单击功能不会触发。
3.  如何生成和打开 PDF 文件而不是 word Doc？

任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:21:08.770

服务器发送的内容由网络浏览器处理。您无法从服务器端代码控制浏览器是否默认打开、保存或询问用户，因为这是浏览器设置。

**编辑**
关于生成 PDF 的第二个问题：有很多库可以生成 PDF。但是，如果您已经准备好 Word 文件，一种解决方案是将 Word 文档打印到 PDF 打印机并发送生成的 PDF。

打印文档可以使用`ShellExecute`或`Process`带有动词的类来实现`print`，然后您可以使用 PDF-Creator 或 Bullzip 等 PDF 打印机生成 PDF 文件。

这是我要尝试的，而不是“手动”生成 PDF 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:42:30.077

> **我需要word文档在没有对话框的情况下自动打开。**

对于@Thorsten Dittmar 的答案。

> **单击 btnGenerateReceipt 按钮后，我的第二个按钮的单击功能不会触发。**

Asp.net 使用无状态连接，所以你认为你写的内容会留在内存中吗？我认为根据我的理解它不应该起作用。创建响应内容，然后将其写入响应并刷新它。

> **如何生成和打开 PDF 文件而不是 word Doc？**

要生成 pdf 参考[this](https://stackoverflow.com/search?q=generate%20pdf%20asp.net)。使用 iTextSharp 之类的库生成 pdf，然后将它们导出/保存为 pdf。

**参考：** [ASP.NET 4：在新浏览器中打开 HttpResponse？](https://stackoverflow.com/questions/4823793/asp-net-4-httpresponse-open-in-new-browser)

```
Response.AppendHeader("Content-Disposition", "inline; filename=foo.pdf"); 
```

您需要设置 Response 对象的 Content Type 并在 header 中添加 pdf 的二进制形式。有关详细信息，请参阅此帖子：参考：[从 Asp.net 页面打开 PDF 文件](http://geekswithblogs.net/azamsharp/archive/2005/09/18/54294.aspx)

```
private void ReadPdfFile()
    {
        string path = @"C:\Swift3D.pdf";
        WebClient client = new WebClient();
        Byte[] buffer =  client.DownloadData(path);

        if (buffer != null)
        {
            Response.ContentType = "application/pdf"; 
            Response.AddHeader("content-length",buffer.Length.ToString()); 
            Response.BinaryWrite(buffer); 
        }

    } 
```

参考链接：
[ASP.NET 4：HttpResponse 在新浏览器中打开？](https://stackoverflow.com/questions/4823793/asp-net-4-httpresponse-open-in-new-browser)
[检索信息后生成 pdf 文件](https://stackoverflow.com/questions/5244348/generate-pdf-file-after-retrieving-the-information)
[ASP.NET MVC：如何让浏览器打开并显示 PDF 而不是显示下载提示？](https://stackoverflow.com/questions/3724278/asp-net-mvc-how-can-i-get-the-browser-to-open-and-display-a-pdf-instead-of-disp)

# php - 读取文本文件内容

> ID：10171472
> 
> 赞同：-1
> 
> 时间：2012-04-16T09:16:33.460
> 
> 标签：php

好的，我有这个代码

```
$myFile = "testFile.txt";
$fh = fopen($myFile, 'r');
$theData = fread($fh, filesize($myFile));
fclose($fh);
echo $theData 
```

testFile.txt 内容：

```
<script type="text/javascript" src="js/jquery.js"/>
<script type="text/javascript" src="js/webdefault.js"/>
<stype type="text/css" src="css/style.css"/> 
```

不，我想逐行读取这些内容并逐行输出

如果要输出，则 html 中的输出是这样的：

```
<script type="text/javascript" src="js/jquery.js"/>
<script type="text/javascript" src="js/webdefault.js"/>
<stype type="text/css" src="css/style.css"/> 
```

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:23:45.553

这个怎么样？

```
include('testFile.txt'); 
```

也许不是最漂亮的事情，但它可能会起作用，这不会逐行阅读..

为此使用 file() 函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:23:57.900

要逐行读取文件，请使用 PHP 的核心`file()`函数。它返回数组，每个元素都是单独的一行。然后，您可以根据需要遍历数组以打印行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:24:23.437

> 不，我想逐行读取这些内容并逐行输出

如果您想逐行执行某项操作，请使用 file($filename)：

```
<?php
$lines = file($filename);
foreach($lines as $line) {
  // do something with $line.
  echo $line . "\n";
} 
```

如果您只想显示：

```
<?php
echo file_get_contents($filename); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:22:29.883

改用这个函数：

```
$theData = file_get_contents($myFile); 
```

逐行使用此拆分功能

```
$data = preg_split("/(\r|\n)/",$theData); 
```

$data 现在将是每行的数组。

# php - 在zend框架中执行查询

> ID：10171476
> 
> 赞同：0
> 
> 时间：2012-04-16T09:16:52.437
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-table

我想在 zend 框架中执行以下查询。谁能告诉我该怎么做？

```
(SELECT `msg`.`message_sender_id`, `msg`.`message_receiver_id`, `msg`.`message_content`, `msg`.`message_sent_on`, `usr`.`user_name` AS `sender_name`
 FROM `sc_message` AS `msg` INNER JOIN `sc_user` AS `usr` ON `msg`.`message_sender_id` = `usr`.`user_id` 
 WHERE `msg`.`message_id` = 3 ORDER BY `msg`.`message_sent_on`)

UNION 

(SELECT `msg_slv`.`message_slave_sender_id`, `msg_slv`.`message_slave_receiver_id`, `msg_slv`.`message_slave_content`, `msg_slv`.`message_slave_sent_on`, `usr`.`user_name` AS `sender_name`
 FROM `sc_message_slave` AS `msg_slv` INNER JOIN `sc_user` AS `usr` ON `msg_slv`.`message_slave_sender_id` = `usr`.`user_id`
 WHERE `msg_slv`.`message_id` = 3 ORDER BY `msg_slv`.`message_slave_sent_on`) 
```

我写了下面的代码

```
 $Query_1 = $this ->select()
                     ->from(array('msg' => 'sc_message'), array('msg.message_sender_id', 'msg.message_receiver_id', 'msg.message_content', 'msg.message_sent_on'))
                     ->joinInner(array('usr' => 'sc_user'), 'msg.message_sender_id = usr.user_id', array('usr.user_name as sender_name'))
                     ->where('msg.message_id = ?',$message_id)
                     ->setIntegrityCheck(false);

    $this->_name = "sc_message_slave";
    $this->_primary = "message_slave_id";
    $Query_2 = $this ->select()
                     ->from(array('msg_slv' => 'sc_message_slave'), array('msg_slv.message_slave_sender_id', 'msg_slv.message_slave_receiver_id','msg_slv.message_slave_content', 'msg_slv.message_slave_sent_on'))
                     ->joinInner(array('usr' => 'sc_user'), 'msg_slv.message_slave_sender_id = usr.user_id', array('usr.user_name as sender_name'))
                     ->where('msg_slv.message_id = ?',$message_id)
                     ->setIntegrityCheck(false); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:39:17.503

假设您正在使用一些 Zend_Db_Table 方法

```
//your code...

$unionSelect = $this->getAdapter()->select()->union(array($Query_1, $Query_2));
//no you can execute it
$rows = $this->getAdapter()->fetchAll($unionSelect); 
```

# php - 使用 Zend Framework 验证多个可选表单字段

> ID：10171477
> 
> 赞同：4
> 
> 时间：2012-04-16T09:16:53.313
> 
> 标签：php, zend-framework, zend-form, zend-validate

我正在尝试验证 Zend_Form ，它有几个可选字段，我希望至少填写其中一个。在我的情况下，我有手机、家庭和办公室电话号码，我希望至少提供其中一个。

我试图通过创建扩展 Zend_Validate_Abstract 的自定义验证器来通过验证上下文（如建议的[here ）来实现这一点。](http://framework.zend.com/manual/en/zend.form.elements.html)问题是，如果所有可选字段都为空，则它们会从 $context 表单中丢失（传递给验证器类），并且这种方式根本不会被验证。因此，如果您填写三个选项（移动、家庭、工作）中的任何一个或几个，它们都将被验证（这很好，但为此不需要自定义验证器），但如果您不填写任何一个，就会有无法强制客户填写至少一个字段（这是我的目标）。

这是我所拥有的：

## 1.我的表格

```
<?php

class Application_Form_Application extends Zend_Form {

  public function init() {
    $this->setName('application');

    // attach sub forms to main form
    $this->addSubForms(array(
      'application' => $this->application(),
      ...
    ));
  }

  private function application() {
    $application = new Zend_Form_SubForm();
    // custom phone validation
    $phone_validation = array('phone_mobile' => 'Mobile', 'phone_home' => 'Home', 'phone_work' => 'Work');
    // phone mobile
    $app['phone_mobile'] = new Zend_Form_Element_Text('phone_mobile');
    $app['phone_mobile']->setLabel('Mobile')
                        ->addFilter('StripTags')
                        ->addFilter('StringTrim')
                        ->addValidator('Regex', false, array('/^[0-9]{8}$/i'))
                        ->addValidator(new Application_Form_PhoneMobileHomeWork($phone_validation), false);
    // phone home
    $app['phone_home'] = new Zend_Form_Element_Text('phone_home');
    $app['phone_home']->setLabel('Home')
                      ->addFilter('StripTags')
                      ->addFilter('StringTrim')
                      ->addValidator('Regex', false, array('/^[0-9]{8}$/i'))
                      ->addValidator(new Application_Form_PhoneMobileHomeWork($phone_validation), false);
    // phone work
    $app['phone_work'] = new Zend_Form_Element_Text('phone_work');
    $app['phone_work']->setLabel('Work')
                      ->addFilter('StripTags')
                      ->addFilter('StringTrim')
                      ->addValidator('Regex', false, array('/^[0-9]{8}$/i'))
                      ->addValidator(new Application_Form_PhoneMobileHomeWork($phone_validation), false);
    $application->AddElements($app);
  }

}
?> 
```

## 2.自定义验证器

```
<?php

class Application_Form_PhoneMobileHomeWork extends Zend_Validate_Abstract {

  const NOT_PRESENT = 'notPresent';

  protected $_messageTemplates = array(
    self::NOT_PRESENT => 'At least one contact phone shall be provided!'
  );

  protected $_listOfFields;

  public function __construct(array $listOfFields) {
    $this->_listOfFields = $listOfFields;
    var_dump($listOfFields);exit;
  }

  public function isValid($value, $context = null) {
    var_dump($context);exit;
    ...
  }
?> 
```

验证器总是通过第一个转储（$listOfFields），但如果我删除它，isValid() 永远不会被调用，除非某些数据被输入到某些电话字段（我们想要阻止）。

当我进一步检查时，我找到了通过将空字段传递给 $context 参数来扩展 Zend_Validate 类的解决方案，但如果有人知道，我希望有一个更好的解决方案。

简而言之 - 如何验证某个表单，强制用户至少填写几个可选字段中的一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:24:11.093

如果我理解正确，您希望您的表单元素不需要，但使用自定义验证器防止它们为空（除非其中一个不为空）？然后，为了不跳过验证链，您需要防止它们为空调`setAllowEmpty(false)`用每个元素中的方法。

最后，在您的自定义验证器中，您将拥有如下内容：

```
foreach ($this->_listOfFields as $field) {
    if (isset($context[$field]) AND $context[$field])
    {
        return true;
    }
} 
```

此外，请确保您的元素不是必需的 ( `setRequired(false)`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T10:07:42.890

问题是如果填写任何字段，表单中不存在 multi_checkbox 元素，则不会对其进行验证。

一种解决方案如下：使用始终选中的隐藏选项并验证是否始终选中此选项。

# build - 构建和配置管理中文件版本编号背后的逻辑是什么？

> ID：10171480
> 
> 赞同：1
> 
> 时间：2012-04-16T09:17:03.510
> 
> 标签：build, build-process, build-automation, clearcase, clearcase-ucm

在我们的项目中，我们使用基线转换如下。

ProjName-...（对于前 Proj-2.0.1.20）

我们过去常常将我们的文件版本号更新为 2.0.1.20。

在 Clearcase UCM 中创建组件后，我们通常倾向于将某些组件保留为未构建。（由于那里没有进行任何更改）

虽然我们可以为所有组件应用基线，但我们无法在未构建时更新文件版本号。

所以基线号和文件版本号不再相同。

我的问题是：我们是否应该在文件版本和基线中遵循相同的版本号，以便更容易追溯？这是遵循的标准做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:24:18.703

基线命名约定没有标准：您可以选择任何您想要的[版本号策略。](https://stackoverflow.com/questions/3377655/code-version-change-rules/3377717#3377717)

然而，Baseline 的一个重要“特性”是：

**未修改的组件没有基线化**。

即，当您在 Stream 上设置基线时，只有自上一个基线以来进行了修改的组件才会收到新的基线。
其他（未修改）没有。

当您想要“记住”未修改的组件基线（未更改）和新修改的组件（具有新基线）时，一种最佳实践是使用复合基线。
该链接指向您之前的问题“ [UCM 中的复合基线是什么以及何时使用？](https://stackoverflow.com/questions/9613911/what-is-composite-baseline-in-ucm-and-when-it-will-be-used/9613986#9613986) ”。

# uml - 从 UML 图生成 Tomcat web.xml 配置

> ID：10171482
> 
> 赞同：0
> 
> 时间：2012-04-16T09:17:23.787
> 
> 标签：uml, web.xml, eclipse-emf, xmi

我想找到解析 UML 图的最佳方法，该图详细说明了 Web 应用程序的安全 tomcat 配置，然后生成相关文件 (web.xml)。

一开始，我有一个 Metamodel 和他用 Magic Draw 创建的实例，我必须导出它们并在一种 Java 应用程序（插件？API？）中使用它们，然后针对某些约束（OCL？）解析和验证它们最后我必须生成 Web.xml 文件。

所以，我做了一些研究，我发现我可以使用 EMF 来捕获我的模型，但是创建一个可以从 URI 远程处理我的模型然后验证它们的 java 代码的和平并不是那么清晰和方便。

请问您有什么建议/建议吗？我必须使用 EMF 吗？还是有另一个框架？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:23:32.200

来自 UML 的 web.xml？抱歉，我认为这不是一个有用的想法。手动编辑这样的东西并不需要很长时间。使这样的事情自动化所花费的努力是不值得的。我会打开一个文本编辑器，创建 web.xml，然后把节省下来的时间花在做更多有用的事情上。

但是，如果必须，我会找到一种方法将您的对象模型导出到 XML 文档中。我会将其解析为 DOM 树，遍历树，然后将我需要的元素发送到 web.xml 中。

我知道Magic Draw 能够将UML 导出为XML。看看这是否对你有帮助。

但是没有办法直接从我所知道的 Magic Draw 工具中做到这一点。您必须编写此 Java 后处理并使用导出的模型 XML 作为输入在命令行上运行它。

# javascript - 在 Jquery 中，如何让一个 div 从 A 平滑滑落到 B 以便另一个 div 在 A 中淡入淡出？

> ID：10171483
> 
> 赞同：0
> 
> 时间：2012-04-16T09:17:30.833
> 
> 标签：javascript, jquery, css

我试过这个：

```
$('#hidden_div').fadeIn(); 
```

但是我想要顺利滑下的 div 只是将自己传送到下一个位置。（我希望它顺利滑到它上面）然后这个：

```
$('#sliding_div').animate({marginTop: '+=400px'},1000);
$('#hidden_div').fadeIn(); 
```

但是我没有得到正确的效果。你怎么能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:19:57.397

```
$('#sliding_div').animate({marginTop: '+=400px', opacity:1},1000); 
```

在此之前，将 #sliding_div 不透明度设置为 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T13:27:10.143

这是一个更流畅的版本：http: [//jsfiddle.net/W8AtL/4/](http://jsfiddle.net/W8AtL/4/)

`This fixes the jump from it being marginTop.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:20:15.397

如果我理解了你想要的效果，你需要在完成`fadeIn()`后的第二个 div `animate()`。您可以使用 的`callback`参数`animate()`来执行此操作：

```
$('#sliding_div').animate(
    { marginTop: '+=400px' },
    1000,
    function() {
        $('#hidden_div').fadeIn();
    }
); 
```

# android - 计算应用程序的 CPU 使用率

> ID：10171489
> 
> 赞同：0
> 
> 时间：2012-04-16T09:18:03.590
> 
> 标签：android

我需要计算 android 设备中特定进程的 cpu 使用率。我尝试使用 top 命令找出它。问题是它与以 RTCPU 百分比显示 cpu 使用率的 android 助手完全不同。我不知道什么是RTCPU。谁能解释我？

我还想知道我使用 top 命令发现的 CPU 使用率是否正确......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-10T21:21:52.980

我还使用 top 来获取我的应用程序的 CPU 使用率。您需要知道应用程序的PID，但之后您可以从Top 的结果中查询它。在这里查看我的答案。

[使用 Top 检索 CPU](https://stackoverflow.com/questions/16726779/how-do-i-get-the-total-cpu-usage-of-an-application-from-proc-pid-stat/36462336#36462336)

# google-apps-script - 编辑行中的单元格时如何更改谷歌电子表格行颜色？

> ID：10171499
> 
> 赞同：1
> 
> 时间：2012-04-16T09:18:53.213
> 
> 标签：google-apps-script, google-sheets, colors, triggers

我已经尝试过：当单元格更改文本但无法使其正常工作[时更改行颜色的脚本。](https://stackoverflow.com/questions/3703676/google-spreadsheet-script-to-change-row-color-when-a-cell-changes-text)行的颜色不会更改为`#000000`。这是我到目前为止所拥有的：

```
function onEdit(event)
{
  var ss = event.source.getActiveSheet();
  var r = event.source.getActiveRange();

  var currentValue = r.getValue();

  if(currentValue == "dags dato")
  {
    var dd = Utilities.formatDate(new Date(), "GMT", "yyyy-MM-dd");
    r.setValue(dd);
  }
  else if(currentValue == "dialog")
  {
    setRowColor("yellow");
  }
  else if(currentValue == "besvaret")
  {
    setRowColor("yellow");
  }
  else if(currentValue == "afvist")
  {
    setRowColor("red");
  }
}

function setRowColor(color)
{
  var range = SpreadsheetApp.getActiveSheet().getDataRange();
  var statusColumnOffset = getStatusColumnOffset();

  for (var i = range.getRow(); i < range.getLastRow(); i++) {
    rowRange = range.offset(i, 0, 1);
    status = rowRange.offset(0, statusColumnOffset).getValue();

    rowRange.setBackgroundColor("#000000");

}

//Returns the offset value of the column titled "Status"
//(eg, if the 7th column is labeled "Status", this function returns 6)
function getStatusColumnOffset() {

  lastColumn = SpreadsheetApp.getActiveSheet().getLastColumn();
  var range = SpreadsheetApp.getActiveSheet().getRange(1,1,1,lastColumn);

  for (var i = 0; i < range.getLastColumn(); i++) {
    if (range.offset(0, i, 1, 1).getValue() == "Status") {
      return i;
    } 
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:28:41.537

我为自己写了更快更干净的方法，我想分享它。

```
function onEdit(e) {
    if (e) { 
        var ss = e.source.getActiveSheet();
        var r = e.source.getActiveRange(); 

        // If you want to be specific
        // do not work in first row
        // do not work in other sheets except "MySheet"
        if (r.getRow() != 1 && ss.getName() == "MySheet") {

            // E.g. status column is 2nd (B)
            status = ss.getRange(r.getRow(), 2).getValue();

            // Specify the range with which You want to highlight
            // with some reading of API you can easily modify the range selection properties
            // (e.g. to automatically select all columns)
            rowRange = ss.getRange(r.getRow(),1,1,19);

            // This changes font color
            if (status == 'YES') {
                rowRange.setFontColor("#999999");
            } else if (status == 'N/A') {
                rowRange.setFontColor("#999999");
            // DEFAULT
            } else if (status == '') { 
                rowRange.setFontColor("#000000");
            }   
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T14:58:27.837

您可以尝试使用 Logger 类检查您的代码是否有任何错误或问题，如下所示：

```
try {
    //your code
}
catch(e) {
    Logger.log(e);
} 
```

然后，您可以从脚本编辑器转到查看 -> 日志，查看每行代码是否按预期执行。此外，执行记录可能有助于查看代码是否在某一特定代码行中断。您可以[查看有关每种故障排除方法如何工作的更多详细信息](https://developers.google.com/apps-script/guide_troubleshooting)。

# iphone - 应用内购买：应用程序处于活动状态并仍显示 [环境：沙盒]

> ID：10171502
> 
> 赞同：1
> 
> 时间：2012-04-16T09:18:55.650
> 
> 标签：iphone, objective-c, ios, ipad

我的应用程序在应用程序商店上线并在应用程序购买中工作。在应用购买对话框中显示环境沙箱。我什么时候可以在应用内购买环境？任何人都可以有同样的问题..？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:25:13.060

您是否在应用程序中看到了这个，您从 App Store 或您的 Xcode 版本下载的？在第二种情况下，没关系，因为从 Xcode 构建时，您将被沙盒化。如果您从 App Store 下载它，它将处于正常模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-19T05:36:40.110

最后，我解决了这个问题。

解决方案：从设备中删除应用程序。从 App Store 重新启动设备和下载的应用程序。

出现问题，我使用相同的设备进行测试。在从应用程序下载应用程序之前

从我忘记重新启动设备。

好吧，它现在为我工作...... :)

# javascript - 什么是最好的图表/图形 js 插件？

> ID：10171505
> 
> 赞同：0
> 
> 时间：2012-04-16T09:19:03.717
> 
> 标签：javascript, data-visualization

我正在尝试找到一种在仪表板页面上显示数据的智能方法。绘制图表和图形的最佳和最灵活的资源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:22:32.853

[谷歌图表](https://developers.google.com/chart/)怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:25:57.430

尝试[可视化](http://www.filamentgroup.com/lab/update_to_jquery_visualize_accessible_charts_with_html5_from_designing_with/)。我喜欢它，因为它完全可以访问:)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T21:33:46.983

首先确定您是否要使用托管解决方案（如 google 图表），或者您想要更多控制并需要一个您想要自己托管的库。托管解决方案非常方便且集成速度相当快，但您的数据天生就暴露在外部世界中。如果您正在建立一个公司网站，这可能是“不行”。

还要考虑是否需要客户端或服务器端解决方案。如果您没有大量需要可视化的数据，我个人会选择客户端库。客户端库通常更灵活（想想：动画、调整大小等）

我用过[highcharts](http://www.highcharts.com/)。它非常强大，并且有多种类型的图表，但很难找到您需要的设置以获得您想要的确切效果。不是因为文档不好（事实并非如此），而是因为有很多选择。

# javascript - 如何防止 Richfaces popupPanel 在 JavaScript 中被移动？

> ID：10171508
> 
> 赞同：0
> 
> 时间：2012-04-16T09:19:29.073
> 
> 标签：javascript, jsf, richfaces, maximize, popuppanel

我使用rich:PopupPanel 组件来显示一些内容，我希望它们能够被用户最大化和恢复。我已经实现了组件的调整大小和定位，但问题是如何防止 popupPanel 在最大化时被移动并在其恢复时允许它。

这是我负责最大化和恢复 popupPanel 的按钮代码

```
<!-- language: lang-js -->
<a4j:commandLink id="maximizeRestoreButton" execute="@none"
    render="@none" value="Maximize"
    oncomplete="
        var comp = #{rich:component(cc.attrs.popupId)};

        if (comp.isMaximized) {
            var rv = comp.restoreValues;                    

            comp.moveTo(rv.top, rv.left);
            comp.resize(rv.width - comp.width(), rv.height - comp.height());
            comp.isMaximized = false;
        } else {
            var rv = new Object();
            rv.top = comp.getTop();
            rv.left = comp.getLeft();
            rv.width = comp.width();
            rv.height = comp.height();

            comp.moveTo(0,0);
            comp.resize(window.innerWidth - comp.width(), window.innerHeight - comp.height()); 

            comp.isMaximized = true;
            comp.restoreValues = rv;
        }

        return false;" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:00:44.540

我建议您使用 popupPanel 标签来防止弹出面板移动和调整大小，而不是使用外部 js 函数。在丰富的popupPanel 标记中设置movable=false 和resizable = false。例如

```
<rich:popupPanel resizable="false" movable="false" ...>
.....
</rich:popupPanel> 
```

# c++ - istream_iterator 行为

> ID：10171511
> 
> 赞同：0
> 
> 时间：2012-04-16T09:19:44.217
> 
> 标签：c++, stl, istream-iterator

我有两段代码。它们在单独使用时可以正常工作`main()`。

```
vector<int> v;

cout << "Enter sequance of integers "<< "(press q to quit) : ";
istream_iterator<int> start_cin(cin);
istream_iterator<int> end_of_cin;
copy(start_cin,end_of_cin,back_inserter(v));

for ( vector<int>::iterator It = v.begin();It != v.end(); It++ )
    cout << *It << "\t";
cout << endl; 
```

和

```
vector<string> vS;
cout << "Enter three strings : ";
for ( int i = 0; i < 3; i++ )
    vS.push_back(*istream_iterator<string>(cin));

ostream_iterator<string> sIt(cout,", ");
copy(vS.begin(),vS.end(),sIt);
cout << endl; 
```

当这两部分一起使用时，即

```
#include <iostream>
#include <algorithm>
#include <vector>
#include <iterator>
#include <string>
using namespace std;

int main ()
{
    // first part

    vector<int> v;

    cout << "Enter sequance of integers "<< "(press q to quit) : ";
    istream_iterator<int> start_cin(cin);
    istream_iterator<int> end_of_cin;
    copy(start_cin,end_of_cin,back_inserter(v));

    for ( vector<int>::iterator It = v.begin();It != v.end(); It++ )
        cout << *It << " \t";
    cout << endl;

    vector<string> vS;
    cout << "Enter three strings : ";
    for ( int i = 0; i < 3; i++ )
        vS.push_back(*istream_iterator<string>(cin));

    ostream_iterator<string> sIt(cout,", ");
    copy(vS.begin(),vS.end(),sIt);

    cout << endl;

    return 0;
} 
```

这里第一部分有效，但第二部分给出输出：`Enter Three Strings : , , ,`。我想知道这种行为背后的原因是什么？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:33:34.843

由于“整数”读取失败，`copy()`完成后将`cin`处于不可读状态 ( ) 。这意味着后续循环将无法读取任何内容。`!cin.good()``q``for`

添加：

```
cin.clear();
cin.ignore(); // To skip the unread "q" 
```

在`for`循环之前。

编辑：

正如[James Kanze](https://stackoverflow.com/users/649665/james-kanze)评论的那样，检查以确保`"q"`是终止的原因`copy()`：

```
...

cin.clear();
string int_read_terminator;
cin >> int_read_terminator;
if ("q" != int_read_terminator)
{
    cerr << "Integer copy() failure: " << int_read_terminator << "\n";
}
else
{
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:15:42.983

您刚刚遇到了一个问题`input_iterator`：它要求整个文件是一种类型。有几种方法可以解决这个问题；最通用的是在实际源和流之间插入一个过滤streambuf。因此，例如，当您输入仅带有 a 的单行时，流的第一部分应该终止`'q'`，例如：

```
class UntilQStreambuf : public std::streambuf
{
    std::streambuf*     mySource;
    char                myBuffer;
    bool                myIsAtStartOfLine;

protected:
    int underflow()
    {
        int                 results = mySource->sbumpc();
        if ( results == 'q' 
                && myIsAtStartOfLine
                && mySource->sgetc() == '\n' ) {
            mySource->sbumpc();     //  remove terminator line.
            results = traits_type::eof();
        }
        if ( results != traits_type::eof() ) {
            myBuffer = results;
            setg( &myBuffer, &myBuffer, &myBuffer + 1 );
        }
        return results;
    }

public:
    UntilQStreambuf( std::istream& source )
        :  mySource( source->rdbuf() )
        ,  myIsAtStartOfLine( true )
    {
    }
}; 
```

（我认为`boost::iostream`有一些支持可以使编写起来更加简单。）然后，您可以使用`streambuf`from `std::cin`（或任何地方）设置一个单独的流来读取数字：

```
std::vector<int>
getNumbers( std::istream& source )
{
    UntilQStreambuf     localSB( source );
    std::istream        src( &localSB );
    std::vector<int>    results( (std::istream_iterator<int>( src )),
                                 (std::istream_iterator<int>()) );
    if ( !src.eof() ) {
        //  Some other error occurred...
    }
    return results;
} 
```

通过使用单独的流，将不会在原始流中设置结束条件，您可以稍后继续使用它（也许使用更多相同的技术）。

# c# - 一些我似乎无法掌握的共享点概念

> ID：10171515
> 
> 赞同：4
> 
> 时间：2012-04-16T09:20:03.497
> 
> 标签：c#, asp.net, visual-studio-2010, sharepoint, sharepoint-2010

尽管我有 asp .net C# 的背景，但我真的试图了解围绕 Sharepoint 2010 的不同概念和开发技术，老实说，我真的很挣扎。作为最后的手段 - 我在这里发帖的风险是被标记为你会说我可以通过自己的研究发现的问题（但我已经在这个问题上几天了，现在相信我）。所以我有几个问题，毫无疑问，任何精通 Sharepoint 的人都可以帮助我找到答案。

**Sharepoint 的发展阶段：**

我知道在 asp .net C#（以及任何其他典型的网页设计平台）中，我们有“设计阶段”，作为开发人员，我们将设计网站及其内容（现在将 CMS 放在一边）然后您有一个“查看阶段”，最终用户查看该网站 - 非常简单。但是对于 Sharepoint，我完全不知道如何查看生命周期可能经历的阶段。我很困惑，因为我已经配置并设置了我的 Sharepoint Web 应用程序和网站集。很好，这似乎是管理方面的事情 - 但现在开发是如何完成的？我已按照指南将母版页和 css 分配给网站集以进行品牌推广，但也可以选择通过功能区管理此网站！? 我们希望最终用户看到这个功能区吗？基本上，如果有人能澄清在开发人员移交后最终用户的职责是什么，这将有助于我掌握 Sharepoint 的概念及其提供的功能。此外，如果 Sharepoint 是 CMS，这是否意味着生命周期存在第三阶段（即 Sharepoint 开发人员为管理内容的站点开发框架，用户将管理内容，另一种类型的用户将查看内容）？

**虚拟机的使用：**

我的计算机的规格现在足够高，可以通过 hyper-v 托管 VM，所以它确实如此。我目前正在使用 VM 进行 Sharepoint 开发。为什么？如果我四处阅读并发现唯一的原因是因为 Sharepoint 不能（没有繁琐的 hack）在 Windows 7 上运行（而且我可能需要一个 win 7 vm 用于日常办公室使用），那么我会理解 -但似乎虚拟机也很方便，因为我应该弄乱共享点安装我可以重新开始 - 为什么我需要？我从来没有遇到过任何其他类型的安装（除了操作系统安装），这些安装可能会出错，以至于需要完全恢复硬盘驱动器映像。究竟会出什么问题？

**在 VS 中管理 Sharepoint 内容**

同样，与标准的 asp .net C# 开发相比 - 我创建我的页面（如果我认为合适，使用母版页和/或控件）并且它们看起来很简单。使用 sharepoint - 似乎内容（保存在由 Sharepoint 安装自动创建的数据库中）映射到页面（保存在我们的目录中 - 一个 aspx 页面）。如果这是正确的 - 那么我们如何管理 aspx 页面并在 VS 中进一步开发它们？或者我们不是要修改列表等的外观吗？

非常感谢，就像我说的那样，我希望这里对问题的风格有点消极，但确实有必要帮助我继续前进。我一点也不懒惰——如果你能向我推荐一些链接，这些链接将帮助一个完全的新手掌握我上面提到的任何概念，我会很乐意阅读——但我只是设法来了针对那些已经牢牢掌握 Sharepoint 的人的各种材料。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T10:36:22.517

您确实需要阅读有关 SharePoint 的更多信息。您应该首先掌握概念，而不是研究 Web 部件以及如何自定义 SharePoint。

首先，StackOverflow 不是 SharePoint 问题的地方，因为这里有一个专门用于 SharePoint 的 StackExchange[站点](https://sharepoint.stackexchange.com/)。

然后，我认为你最好买一本关于它的书。在进入开发轨道之前先从配置轨道开始，它将帮助您了解开发细节。

一般来说，您可以使用 SharePoint 创建网站。一个站点（集合）可能由其他站点组成，并为您提供导航。在较低级别中，您有页面，您可以在其中添加由 SharePoint 管理的内容（列表）或必须在 ASP.NET 中开发的自定义 Web 部件。您可以拥有完全使用开箱即用功能构建的网站，而不涉及自定义开发。构建 Web 部件时，将程序集上传到 SharePoint，并在页面处于编辑模式时将 Web 部件添加到页面。您还拥有大量开箱即用的 Web 部件。

还有一个名为 SharePoint Designer 的产品，可帮助您自定义 SharePoint 页面。您可以浏览站点中站点和页面的完整结构并对其进行编辑。

您不会在 .NET 中打开 SharePoint 网站并从那里开始更改页面。.NET 仅用于创建自定义 Web 部件或其他可扩展组件。

这确实是一个高级概述，SharePoint 有很多内容。不要期望在几周内了解它的所有内容，我认为甚至没有人知道这一切。产品这么大...

祝你好运！！

# windows - 如何在 UAC 处于活动状态时设置 System EnvVar（Windows 脚本宿主）

> ID：10171522
> 
> 赞同：1
> 
> 时间：2012-04-16T09:20:36.950
> 
> 标签：windows, vbscript, environment-variables, uac, wsh

在启动程序之前，我必须创建一个脚本来更新系统环境变量（基于命令行参数）。

在 Windows 7 中，拒绝更新系统环境变量。我想为环境的设置执行特权提升。变种。但以普通用户身份运行程序。

怎么做？

注意：我尝试了以下解决方案：

使用 2 个脚本：

*   1个从命令行获取所有信息的主控，它调用从属脚本来更改系统环境。var.，最终启动程序
*   1 个更新系统环境的从属脚本。变种。
*   主脚本尝试使用特权提升调用从脚本，但这不起作用

我尝试了 2 种特权提升解决方案：

1.  使用“runas /User:Administrator ...”命令，但它要求输入管理员密码：失败
2.  使用 "ShellExecute ...., "runas"" 命令，但它告诉我我的脚本不是应用程序：失败

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T07:55:57.623

我找到了一种至少可以在 Windows 7 上运行的方法（不知道它是否可以在我们仍然拥有的少数 Windows XP 帽子上运行）。

我从主脚本中执行了以下操作：

```
currentDirectory = left(WScript.ScriptFullName,(Len(WScript.ScriptFullName))-(len(WScript.ScriptName)))

Set UAC = WScript.CreateObject("Shell.Application")
UAC.ShellExecute "wscript.exe", currentDirectory + "my-script.vbs /Param1:Value1 ...", "", "runas", 0 
```

my-script 正在执行 sys var env 更新。

注意：我第一次使用 ShellExecute 的经验失败了，因为我试图执行脚本。而不是“wscript.exe”，我有“my-script.vbs”作为可执行文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:08:58.360

恕我直言，禁用 UAC，这只是*** 但如果你不能（像我 8<），你可以使用

```
psexec.exe -d -u userid -p password CMD /c program_with_path 
```

您（或运行 sript 的用户）必须确认提示。

# c++ - 如何制作基于可变参数的链式索引函数？

> ID：10171525
> 
> 赞同：5
> 
> 时间：2012-04-16T09:20:44.900
> 
> 标签：c++, arrays, c++11

如果我有`a`一个内置数组或具有合适的类类型的对象`operator []`，并且它的返回类型可以自己索引，我应该如何编写一个通用函数，可以通过可变参数调用而不是分隔来索引所有这些对象括号块？换句话说，我可以表达如下：

```
a[i0][i1]...[iK] 
```

我希望能够把它写成一个函数：

```
slice( a, i0, i1, ..., iK ) 
```

因为 C++ 的规则需要`operator []`处理单个参数，这使得它与可变参数的东西不太兼容。（这个问题基于我尝试询问类似问题的 Usenet 线程；最终我自己只解决了可能嵌套的内置数组。）

第一次刺：

```
template < typename T, typename U >
constexpr
auto slice( T &&t, U &&u ) noexcept(???) -> ???
{ return ce_forward<T>(t)[ ce_forward<U>(u) ]; }

template < typename T, typename U, typename V, typename ...W >
constexpr
auto slice( T &&t, U &&u, V &&v, W... &&w ) noexcept(???) -> ???
{
    return slice( ce_forward<T>(t)[ce_forward<U>(u)], ce_forward<V>(v),
     ce_forward<W>(w)... );
} 
```

`ce_forward`功能模板是-`constexpr`标记的`std::forward`。（标准中可以标记`constexpr`的一些东西不是。）我试图找出正确的东西来放入返回类型和异常规范点。我知道的一些案例和注意事项是：

*   内置`operator []`要求一个操作数是数据指针（或衰减数组引用），另一个是枚举或整数类型。操作数可以是任意顺序。我不知道是否可以将操作数替换为具有明确（非显式？）转换为适当类型的类类型。
*   类类型可以定义`operator []`为非静态成员函数。任何这样的函数只能有一个参数（除了`this`）。
*   内置运算符不能抛出。（除非操作数可以基于 UDT 转换；所述转换是唯一可能的抛出点。）由边界错误引起的未定义行为超出了我们的权限范围。
*   最后一次索引调用是否返回左值引用、右值引用或值应该反映在`slice`.
*   如果（最终？）调用是按值调用，那么`std::is_nothrow_move_constructible<ReturnType>::value`应该对异常规范进行 OR'd。（按引用返回是`noexcept`。）
*   如果内置运算符涉及一个数组，则该步骤的返回引用应该是一个右值引用，如果该数组也是一个。（这是一种缺陷，因为与数组不同，指针会丢失其目标的左值与右值状态，因此传统的返回始终是左值引用。）
*   对于类类型索引运算符，请确保 exception-spec 和 return-type 部分引用函数体使用的相同重载（如果不止一个）。`this`请注意仅在( `const`/ `volatile`/both/neither 和/或`&`/ `&&`/neither)的限定方面不同的重载。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T00:22:09.877

根据@luc-danton 的评论和@user315052 的回答，我提出了一个解决方案。

```
#include <utility>

template < typename Base, typename ...Indices >
class indexing_result;

template < typename T >
class indexing_result<T>
{
public:
    using type = T;

    static constexpr
    bool  can_throw = false;
};

template < typename T, typename U, typename ...V >
class indexing_result<T, U, V...>
{
    using direct_type = decltype( std::declval<T>()[std::declval<U>()] );
    using   next_type = indexing_result<direct_type, V...>;

    static constexpr
    bool  direct_can_throw
     = not noexcept( std::declval<T>()[std::declval<U>()] );

public:
    using type = typename next_type::type;

    static constexpr
    bool  can_throw = direct_can_throw || next_type::can_throw;
};

template < typename T >
inline constexpr
auto  slice( T &&t ) noexcept -> T &&
{ return static_cast<T &&>(t); }

template < typename T, typename U, typename ...V >
inline constexpr
auto  slice( T &&t, U &&u, V &&...v )
  noexcept( !indexing_result<T, U, V...>::can_throw )
  -> typename indexing_result<T, U, V...>::type
{
    return slice( static_cast<T &&>(t)[static_cast<U &&>( u )],
     static_cast<V &&>(v)... );
} 
```

我提出了一个[完整的示例程序](https://gist.github.com/CTMacUser/5297353 "切片.cpp")作为 Gist。它在运行 GCC >= 4.7、CLang >= 3.2 和 Intel C++ >= 13.0 的网站编译器上工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T07:59:09.367

要获得`slice`函数的正确返回值，您可以创建一个帮助模板来计算正确的结果类型。例如：

```
template <typename T, typename U, typename... V>
struct SliceResult {
    typedef typename SliceResult<T, V...>::Type Type;
};

template <typename T, typename U>
struct SliceResult<T, U> {
    typedef typename std::underlying_type<T[U(0)]>::type Type;
}; 
```

然后该`slice`函数将返回一个`SliceResult<...>::Type`.

# objective-c - NSData 编码为 Unicode 返回 nil

> ID：10171529
> 
> 赞同：0
> 
> 时间：2012-04-16T09:21:09.250
> 
> 标签：objective-c, ios, encoding

我正在尝试将 HMAC（散列数据）转换为对 url 安全的字符串以进行身份​​验证。

我在将 sha256 散列（使用苹果加密库）生成的数据转换为小端和大端的 Unicode 时遇到问题，一个散列字符串可以大而不是小，反之亦然，适用于不同的散列字符串。对于一些散列字符串，它工作得很好。我认为这可能与超出范围的字符或其他东西有关。当我说它不起作用时，我的意思是它返回 nil。

代码如下所示：

```
NSString *mystring = [[NSString alloc] initWithData:myHash encoding:NSUnicodeEncoding 
```

Unicode 是最好用的吗？我尝试编码为 UTF8，它返回 nil 并且 ascii 没有所有字符，我得到一些“？” 数据丢失的地方。

真的，我的问题是，我如何从 NSData 从 sha256 哈希中创建一个字符串？

* * *

**解决方案：**

[https://github.com/eczarny/xmlrpc](https://github.com/eczarny/xmlrpc)

NSData+Base64.h 和 NSData+Base64.m

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:52:13.183

您首先需要从 HMAC 字节中创建一个十六进制字符串。你可以这样：

```
void bytes_to_hexstring(void *uuid, char *hex_string, size_t osize) {
    static const char hexdigits[] = "0123456789ABCDEF";
    const unsigned char* bytes = (unsigned char *)uuid;

    int i = 0;
    for (i = 0; i<osize; ++i) {
        const unsigned char c = *bytes++;
        *hex_string++ = hexdigits[(c >> 4) & 0xF];
        *hex_string++ = hexdigits[(c ) & 0xF];
    }
    *hex_string = 0;
}

char *mystring = malloc(41);
bytes_to_hexstring(myHash, mystring, 20);

something like this. 
```

# twitter-bootstrap - twitter bootstrap-modal.js - 语句结束分号

> ID：10171531
> 
> 赞同：4
> 
> 时间：2012-04-16T09:21:14.167
> 
> 标签：twitter-bootstrap

我只是想知道为什么 twitter bootstrap-modal.js 的语句结尾分号如此之少是有原因的。

当我压缩/缩小脚本时，我遇到了解释器问题。我通过 JSLint 运行脚本并且没有关于分号的警告。

这与严格模式有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:14:03.037

简单的回答，美学。长答案，因为它是有效的（根据开发人员）。您的担忧实际上是与引导程序的开发人员和 JsMin 的开发人员长期争论的一部分。目前处于僵局并引起争论，因为引导人员声称 JsMin 需要修补，而 JsMin 的开发人员声称需要修复的是他们的代码。所以你不会很快看到修复。

这是 GitHub 上关于这个问题的主题：

[https://github.com/twitter/bootstrap/issues/3057](https://github.com/twitter/bootstrap/issues/3057)

注意：Douglas Crockford 是 JsMin 的开发者

这是reddit上关于同一问题的另一个线程：

[http://www.reddit.com/r/programming/comments/sag8p/crockford_on_bootstraps_semicolon_omission/](http://www.reddit.com/r/programming/comments/sag8p/crockford_on_bootstraps_semicolon_omission/)

# doxygen - 如何在不处理的情况下制作 Doxygen 副本“*/”

> ID：10171533
> 
> 赞同：2
> 
> 时间：2012-04-16T09:21:20.423
> 
> 标签：doxygen

我有个问题。

我有一个`mainpage`Doxygen 文档，在其中，结束注释分隔符“*/”在注释中，这就是 Doxygen 停止生成页面的地方，因为它认为这是它的结尾。如何在不处理的情况下让 Doxygen 复制它？

它看起来像这样：

```
/**
@mainpage
The end comment delimiter in Doxygen is */
... bla bla bla...
**/ 
```

在这里我应该提到我已经尝试过`@code`and `@verbatim`，但是那些正在制作代码块，这是我不希望的。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T18:10:55.017

这也是一个 hack，但对于 HTML 和 LaTeX 输出，您可以使用

```
/**
@mainpage
The end comment delimiter in Doxygen is \endcomment
... bla bla bla...
**/ 
```

连同配置文件中的以下别名定义：

```
ALIASES = endcomment="\htmlonly&#42;/\endhtmlonly\latexonly$\ast$/\endlatexonly" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T10:04:09.060

以下似乎有效（至少对于 C#）：

```
/**
@mainpage
The end comment delimiter in Doxygen is
**/
/// */ \n
/**
... bla bla bla...
**/ 
```

`///`继续上一条评论，但由于它不是以 a 开头的，`/**`因此`*/`不被视为该评论的结尾。`\n`就是把它放在`... bla bla bla...`一个新的线上。

# 编辑

这适用于程序中构造的 doxygen 注释（如类或枚举），但不适用于该`@mainpage`部分。

# 第二次编辑

仅使用单行注释并设置`MULTILINE_CPP_IS_BRIEF`标志现在似乎适用于该`mainpage`部分

```
/// @mainpage
/// The end comment delimiter in Doxygen is */
/// ... bla bla bla... 
```

这显然意味着您需要使用`///`评论样式，至少对于主页部分，但这似乎是唯一的选择（除非`* /`是一个可行的选择：P）

# sql-server - 从同一个表中选择按时间分组的多个计数

> ID：10171537
> 
> 赞同：1
> 
> 时间：2012-04-16T09:21:38.313
> 
> 标签：sql-server, database, tsql

我有一个表记录应用程序活动。每行包含一个日期时间（“时间”）和一个“事件类型”列......（显然还有一些其他在这里不重要）

我希望能够计算每小时发生的不同 EventType 的数量。

我目前正在获取单个 EventType 的基本计数：

```
select DATEADD(hh, (DATEDIFF(hh,0,Time)),0) as 'hour', count(*) as 'apploads' 
from PlaySessionEvent
where EventType = 0
Group By DATEADD(hh,(DATEDIFF(hh,0,Time)),0)
order by hour 
```

将其扩展为在同一小时内计算多个不同 EventType 的最简单方法是什么？

：：更新

应该指定，我还没有只按 EventType 分组，因为我只想要所有可用 EventType 的子集。（即不乏味的跟踪/调试数据）此外，我希望将不同的事件类型作为列，而不是复制 DateTime 条目的附加行。

例如...

```
DateTime           EventType1        EventType2
12:12:12 12/12/12  45                22 
```

为不准确的初始问题道歉！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:27:28.663

```
select EventType, DATEADD(hh, (DATEDIFF(hh,0,Time)),0) as 'hour', count(*) as 'apploads'  
from PlaySessionEvent 
where EventType = 0 
Group By DATEADD(hh,(DATEDIFF(hh,0,Time)),0), EventType
order by hour 
```

编辑：

已更改问题的新解决方案：

```
select DATEADD(hh, (DATEDIFF(hh,0,Time)),0) as 'hour', count(*) as 'apploads', 
sum(case when EventType = 1 then 1 else 0 end) EventType1,
sum(case when EventType = 2 then 1 else 0 end) EventType2
from PlaySessionEvent 
where EventType = 0 
group By DATEDIFF(hh,0,Time)
order by hour 
```

这是一种稍微不同的写法：

```
select DATEADD(hh, (DATEDIFF(hh,0,Time)),0) as [hour], 
       COUNT(*) [apploads], 
       COUNT(case when EventType = 1 then 1 end) EventType1,
       COUNT(case when EventType = 2 then 1 end) EventType2
from PlaySessionEvent 
where EventType = 0 
group By DATEDIFF(hh,0,Time)
order by hour 
```

# javascript - 第二次点击；jQuery

> ID：10171540
> 
> 赞同：2
> 
> 时间：2012-04-16T09:21:54.777
> 
> 标签：javascript, jquery

```
<div class="example">
 Test
</div>

$('.example').click(function(){
 $(this).css('color','red');
}); 
```

当点击上面的代码时，它将应用`.css`. 现在我需要的是应用另一段代码（比方说），在第二次点击`$(this).css('color','blue');`时替换之前的代码。`.example`

我已经搜索过这个，提问者似乎只需要`.show`/`.hide`可以替换为的事件`.toggle`，这显然不是这里的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T09:24:55.247

由于您可能有许多 class 实例`example`，因此仅使用单个变量来维护状态是不可行的，您可以做的是维护`example`自身内部每个实例的状态：

定义两个css类

```
.example { background:blue }
.example.red { background:red } 
```

然后你的点击方法：

```
$('.example').click(function(){
 $(this).toggleClass('red');
}); 
```

如果您不想定义新的 css 类，您可以使用`data()`, 来确保每个中的状态是独占的`.example`，如果您有很多实例，这很有用`.example`

```
$('.example').click(function() {
    var color = $(this).data('color');
    if(color != 'blue') {
       $(this).css('color', 'blue');
       $(this).data('color', 'blue');
    } else {
       $(this).css('color', 'red');
       $(this).data('color', 'red');
    }
}); 
```

[http://api.jquery.com/data/](http://api.jquery.com/data/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:26:05.303

像这样的东西可以在两种颜色（或样式）之间切换。

```
$('.example').click(function(){  

     if($(this).css('color') == "red")
     {
        $(this).css('color','blue');
     }
     else
     {
        $(this).css('color','red');
     }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:24:17.237

```
<div class="example">
 Test
</div> 
```

只需保持一个布尔值，你就完成了..

```
var isRed=false;
$('.example').click(function(){
 if(isRed)
 {
 $(this).css('color','blue');
 isRed=false;
 }
 else
 {
 $(this).css('color','red');
 isRed=true;
 }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:31:40.347

很多答案都定义了一个解决方案。

基本上，您应该使用两种方法。提到的其他方法要么性能不佳，要么没有语义（`data`用于这种解决方案是过分的）。以下是您可以使用的两种方法：

```
// Toggle a class 'red' defined in your stylesheet
$('.example').on('click', function() {
    $(this).toggleClass('red')
})

// Toggle the color with an "if" check
$('.example').on('click', function() {
    if (this.style.color === 'red') { // using jQuery is not required
        this.style.color === 'blue'
    }
    else {
        this.style.color === 'red'
    }
}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T09:25:28.613

使用 addClass 和 removeClass

```
.blueColor
{
background-color: blue;
}

.redColor
{
background-color: red;
} 
```

并在您的 javascript 中使用 addClass 和 removeClass 函数：

```
<script>

    $(document).ready(function(){
    $(".example").keypress(function() {
    if($(".example").val().length > 0)
    {
        $(".example").addClass("redColor");
    }
    else {
       if($(".example").val().length == 0) 
    {
    $(".example").addClass("blueColor");
    $(".example").removeClass("redColor");
    }
    }

    });
    });
    </script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T09:25:50.200

我想你需要一些关于点击事件更通用的东西，所以我建议你使用`data`方法来留下标志

```
$('.example').click(function() {
    if (!$(this).data("custom-even")) {
        // odd execution        
        $(this).data("custom-even", true)
    } else {
        // even execution
        $(this).data("custom-even", false)
    }
});​ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T09:26:03.507

```
$('.example').click(function(){
   var theExample = $(this);
   if(theExample.hasClass("clicked")){
      theExample.css('color','blue').removeClass("clicked");
   }else{
      theExample.css('color','red').addClass("clicked");
   }
}); 
```

[http://jsfiddle.net/SnDgh/](http://jsfiddle.net/SnDgh/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-16T09:26:11.280

嗨，试试这个`toggle`:)) [http://jsfiddle.net/FVXAZ/](http://jsfiddle.net/FVXAZ/)

因此，您可以在 CSS 中使用切换，并且每一次点击都会产生反之亦然的影响。:)

**代码**

```
 $(function() {
   $('.example').toggle(function() {
    $(this).css('color','red');
   }, function() {
    $(this).css('color','blue');
   });
  }); 
```

有个好男人，加油！

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-16T09:26:31.457

尝试这个：

```
$('.example').click(function(){
      if($('.example').data('isAlreadyClicked')=='true')
      {
             $(this).css('color','blue');
             $('.example').data('isAlreadyClicked','false')
      } 
      else
      {
            $(this).css('color','red');
            $('.example').data('isAlreadyClicked','true') 
      }

}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-16T09:28:07.703

使用**one**方法处理一次性事件绑定是一个不错的选择，但是此方案将停止此代码**之后**绑定的所有事件，这可能会导致不一致。

```
$('.example')
  .one('click', function(e) {
    e.stopImmediagePropagation();
  })
  .on('click', function() {
    $(this).css('color', blue');
  }); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-06-13T11:48:34.823

你可以写：

```
$('#id').toggle(function() {

  $('.css').css('color','red');}

,function() {           /////////the second click

   $('.css').css('color','blue');}
); 
```

# streaming - RTSP RTP 客户端流式传输、时间戳、live555

> ID：10171542
> 
> 赞同：4
> 
> 时间：2012-04-16T09:22:17.410
> 
> 标签：streaming, timestamp, rtsp, rtp, live555

我有一台 IP 摄像机，它位于不同的国家（*具有不同的时区*）并且应用了它自己的日期时间值（*例如：~2012-04-16 11:30:00*）然后我的PC位于。（*所以我的电脑时间例如是 ~2012-14-16 06:10:00*）

**我的目的：** 流式传输时，我需要获取在**相机**中设置的日期时间值（“11:30:00”）（*我对我的 PC 的当前本地时间不感兴趣*）。

*   **有没有办法从 RTP 的时间戳计算相机的日期时间值**？
*   还有其他方法吗？

我正在使用 Live555 库，对于帧的日期时间检索，我使用的是“演示时间”值，但这给了我 PC 的本地时间（不是我相机中设置的时间）

所以我被困在这里..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T16:32:18.700

阅读有关 RTP 数据包[布局的 RFC](http://www.networksorcery.com/enp/protocol/rtp.htm)

请注意，时间戳在 RTP 数据包中的**0x32**处。这是来自对流进行编码的相机的时间戳。

对于 CPP[实现](http://snipplr.com/view/57979/rtp-packet-handler/)，处理 RTP 数据包和包含时间戳的标头，请参阅链接。

RTP数据包处理程序的Java实现在[这里](http://snipplr.com/view/57978/rtp-packet-handler/)

# c# - 我们可以使用 C# 录制发送到扬声器的声音吗

> ID：10171547
> 
> 赞同：3
> 
> 时间：2012-04-16T09:22:29.007
> 
> 标签：c#, .net, audio, audio-recording

我有一个软件“SoundTap Streaming Audio Recorder”。

它记录发送到扬声器的任何音频，无论流是来自网络还是来自某个文件或麦克风。我可以在桌面应用程序中制作这样的应用程序吗？无论来源如何，我都可以录制发送到我的扬声器的流。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:36:55.093

[http://www.codeproject.com/Articles/31356/C-MP3-Sound-Capturing-Recording-Component](http://www.codeproject.com/Articles/31356/C-MP3-Sound-Capturing-Recording-Component)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:31:34.707

> [http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/550be4bd-22da-4e6c-99d1-1a07016d659f/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/550be4bd-22da-4e6c-99d1-1a07016d659f/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:33:52.177

是的，即使我没有相同但微笑的项目，你也可以，我的团队正在使用 NAudio。那部分还没有完成，如果是的话，我一定会寄给你示例代码。

问候红，

# vim - Vim 代码完成菜单

> ID：10171551
> 
> 赞同：3
> 
> 时间：2012-04-16T09:22:37.587
> 
> 标签：vim, autocomplete

有没有办法在不选择任何选项的情况下离开代码完成菜单？（按下后`<C-x><C-o>`）

我正在寻找`<Esc>`在 VisualStudio Intellisense 菜单中按下的等效项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:21:08.320

您可以使用`ctrl`+ `E`。有关更多信息，请参阅[文档](http://vimdoc.sourceforge.net/htmldoc/insert.html#complete_CTRL-E)。

# html - CSS。更改图像访问链接

> ID：10171554
> 
> 赞同：1
> 
> 时间：2012-04-16T09:22:42.747
> 
> 标签：html, css, hyperlink, background-image

我有一个图像超链接。我想在链接访问状态时更改图像。你能告诉我怎么做吗？最好不使用 JavaScript。

我正在尝试执行以下操作：我将两个图像都加入了单个公共图像中，这是我的代码：

```
<a href="#" class="mylink">
   <img src="common_image.jpg" width="240px" height="240px"/>
</a> 
```

还有我的风格：

```
 .mylink {
        width: 120px;
        height: 240px;
        display: block;
        overflow: hidden;
    }

    .mylink:visited img {
        margin-left: -120px;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:45:17.607

您不能通过`src`CSS 更改图像的 - 属性。如果出于某种原因，它必须是`img-element`，那么您将被 JavaScript 卡住以进行更改。

另一种选择是去掉`img`-element 并只使用带有背景的锚点。`background`-property 可以通过 CSS 来控制。

这是一个[简单的例子](http://css-tricks.com/snippets/css/basic-link-rollover-as-css-sprite/)，说明如何做到这一点`:hover`，但在你的情况下`:hover`，可以很容易地改为`:visited`改为。

如果将“已访问”图像放在名为 sprite.png 的文件中的默认图像下方，则代码将是：

```
a.mylink {
    width: 120px;
    height: 240px;
    display: block;
    overflow: hidden;
    background: url(sprite.png) no-repeat;
}

a:visited.mylink {
    background-position: 0 -240px;
} 
```

在这里看到它：http: [//jsfiddle.net/5ZzkY/](http://jsfiddle.net/5ZzkY/)（为简单起见，使用背景颜色而不是图像）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T10:52:40.227

使用 :visited 的背景图像伪选择器不起作用。主要浏览器中存在安全限制，以防止嗅探漏洞。看到[这个 StackOverflow 问题](https://stackoverflow.com/a/3842816/1458189)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:35:04.253

您可以删除图像并通过 css 控制背景

```
.mylink {
    background:url('myimagepath-01.jpg') top left no-repeat;
    width: 120px;
    height: 240px;
    display: block;
    overflow: hidden;
}

.mylink:visited {
    background:url('myimagepath-02.jpg') top left no-repeat;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:49:25.500

你可以试试这个：

HTML：

```
<a href="http://google.com" class="image">Link</a>​ 
```

CSS：

```
.image {
    background: transparent url('http://javascript.info/files/tutorial/browser/events/rollover-sprite/button.png') no-repeat top left;
    width: 186px;
    height: 52px;
    display: block;
    text-indent: -9999px;
}
.image:hover {
    background-position: 0 -52px;
}
.image:visited {
    background-position: 0 -104px;
} 
```

如果要使用精灵，则应将图像设置为 css 背景，并使用`background-position`属性移动其位置。[你可以在这个 fiddle](http://jsfiddle.net/4csmL/)中看到一个例子。

# c++ - 用户为页面中的菜单定义的 Windows 快捷方式

> ID：10171555
> 
> 赞同：0
> 
> 时间：2012-04-16T09:22:50.373
> 
> 标签：c++, visual-c++, win32gui

我必须使用具有快捷方式（键加速器）的不同菜单的 Visual Studio C++ 创建一个页面。快捷方式应该类似于我们在 Windows 记事本中的方式，例如（alt + f 用于文件，alt + e 用于编辑）等。我想知道如何为页面中的菜单项实现我自己的 alt+key 快捷方式。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T22:01:11.513

首先，您需要在资源文件 (*.rc) 中定义一个 ACCELERATORS 资源。[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380610%28v=vs.85%29.aspx)给出了加速表的这个例子。

```
1 ACCELERATORS
{
    "^C",  IDDCLEAR         ; control C
    "K",   IDDCLEAR         ; shift K
    "k",   IDDELLIPSE, ALT  ; alt k
    98,    IDDRECT, ASCII   ; b
    66,    IDDSTAR, ASCII   ; B (shift b)
    "g",   IDDRECT          ; g
    "G",   IDDSTAR          ; G (shift G)
    VK_F1, IDDCLEAR, VIRTKEY                ; F1
    VK_F1, IDDSTAR, CONTROL, VIRTKEY        ; control F1
    VK_F1, IDDELLIPSE, SHIFT, VIRTKEY       ; shift F1
    VK_F1, IDDRECT, ALT, VIRTKEY            ; alt F1
    VK_F2, IDDCLEAR, ALT, SHIFT, VIRTKEY    ; alt shift F2
    VK_F2, IDDSTAR, CONTROL, SHIFT, VIRTKEY ; ctrl shift F2
    VK_F2, IDDRECT, ALT, CONTROL, VIRTKEY   ; alt control F2
} 
```

您将编译资源文件（使用 RC，Microsoft 资源编译器）并将生成的 *.res 文件与您的应用程序链接。

接下来，在您的`WinMain`, 中，使用您的资源表的标识符调用`LoadAccelerators`（有关语法，请参见[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646370%28v=vs.85%29.aspx)），以便应用程序可以访问它。对于上表，您可以执行

```
HACCEL hAccel = LoadAccelerators(hInstance, 1); 
```

其中`hInstance`是`HINSTANCE`您的应用程序的，并且`1`是表的标识符。

最后，在您的消息循环中调用`TranslateAccelerator`（同样，参见[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646373%28v=vs.85%29.aspx)的语法） after `GetMessage`，以便能够处理加速器消息。同样，在这个例子中，你可以做

```
TranslateAccelerator(hwnd, hAccel, &msg); 
```

哪里`hwnd`是`HWND`你的主窗口，`msg`是`MSG`为你的主窗口定义的结构。

如果您正确执行所有这些操作，您的应用程序应在加速器事件发生时通过 WM_COMMAND 接收消息，并且`wParam`消息的字段将包含触发的键事件的标识符（`IDD*`示例表中的常量）。

# c# - 窗口服务 OnStop 没有被调用

> ID：10171558
> 
> 赞同：0
> 
> 时间：2012-04-16T09:23:00.967
> 
> 标签：c#, multithreading, windows-services

我有一个 C# Windows 服务。当我尝试停止时，它进入停止状态，当我在 onStop 方法中放置断点时，它不会被击中。无法调试问题所在。我在整个服务中添加了异常处理以及未处理的异常处理，但我没有收到任何错误。将 canStop 设置为 true 并使用 RequestAdditionalTime() 的服务一切正常。

我还在 app.config 中设置了 legacyUnhandledExceptionPolicy enabled="true"。对我来说，它看起来像是一些线程/资源问题，阻止服务控制管理器调用 OnStop 方法。或者服务可能已经处于损坏状态并且服务控制管理器无法停止它。它只是将状态从停止更改为停止。

当我尝试通过将代码附加到服务 exe 进行调试时，尝试停止服务时没有任何反应。onstop 方法没有被调用。

在 Onstart 方法中启动一个线程，该线程每 30 秒进行一次轮询。假设 onStop 方法被调用，那么它将中止这个线程。这就是该服务的开发方式。

如果存在一些线程问题或我在 OnStart 方法中的线程阻塞了服务控制管理器可用的资源，是否有一些免费工具可用于调试？

OnStop 方法中的代码：

```
try
{
    RequestAdditionalTime(10*60*1000);
    IntPtr handle = this.ServiceHandle;
    KServiceStatus.currentState = (int) State.SERVICE_START_PENDING;
    SetServiceStatus(handle, ref KServiceStatus);

    RequestAdditionalTime(30000);

    if ((onStartThread == null) ||
         ((onStartThread.ThreadState &
          (ThreadState.Unstarted | ThreadState.Stopped)) != 0))
    {
        onStartThread = new Thread(new ThreadStart(KWindowsServiceHandler.OnStart));
        onStartThread.Start();
    }

    KServiceStatus.currentState = (int) State.SERVICE_RUNNING;
    SetServiceStatus(handle, ref KServiceStatus);
 } 
```

OnStartThread 继续运行直到服务运行。它需要进行轮询。如果 onStop 方法被调用（没有被调用）将中止这个 OnStartThread。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:29:38.400

尝试`Debugger.Break();`在要中断执行的地方使用。或通过菜单附加到 Windows 服务进程`Debug > Attach to process`并在 Visual Studio 中设置断点。

更新：如果调试器没有附加到进程，你可以这样做

```
if (!Debugger.IsAttached)
    Debugger.Launch(); 
```

为什么不使用`System.Threading.Timer`每 30 秒轮询一次呢？

```
protected override void OnStart(string[] args)
{
    const int period = 30 * 1000;
    Timer timer = new Timer(TimerCallback, null, 0, period);
}

private void TimerCallback(object state)
{
    // Polling goes here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T17:58:49.773

主要问题是找出问题所在。所以继续注释和取消注释代码的不同部分并找到真正的问题。OnStartthread 启动一个进程（它启动一个 exe）所以我只在我的 Windows 服务中保留了这段代码并删除了所有内容，我能够重现这个问题。所以我所做的是在启动进程后让 OnStartthread 休眠 1 秒。（更合适的是启动进程并捕获不同的事件以了解进程的状态以及何时准备好移动）它就像魔术一样工作。这以某种方式解决了我面临的问题。

当此睡眠不存在时，进程将启动，但我无法在 OnStop 方法上打断点，因为进程（exe）已启动，但它需要更多资源才能完全启动并保持一致并将 thread.sleep 给exe 完全启动所需的资源。

```
 //the code is in OnStartThread 
```

someProcess.start(); 线程.睡眠（1000）；

# dynamics-crm-2011 - 如何在 CRM 2011 插件中阅读电子邮件正文

> ID：10171559
> 
> 赞同：2
> 
> 时间：2012-04-16T09:23:04.417
> 
> 标签：dynamics-crm-2011, crm, dynamics-crm-online

我创建了一个插件来读取电子邮件的正文（描述）。但是当我尝试从插件中读取某些内容时，它给了我错误。它给了我 NullReferenceException。我已经在创建新电子邮件活动（创建后）时注册了插件。电子邮件实体中的主题字段是单行文本，但电子邮件正文（描述）是多行文本。我能够阅读主题但无法阅读电子邮件正文。下面是我正在使用的代码：

```
var body = email_entity["description"]; 
```

我猜电子邮件正文以字符串数组的形式存储数据。当我使用下面的代码但没有将值分配给任何变量时，我没有收到任何错误。

```
var body = email_entity["description"];
string[] desc = (string[])body; 
```

现在，如果我使用 desc[0] 设置变量中的值，它会抛出相同的 NullreferenceException。

我不知道如何从插件中的多行文本字段中读取值。我在上面尝试过，但没有用。

有谁知道我错过了什么或做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T14:24:52.947

多行文本字段是字符串，而不是字符串数组。在行中：

```
var body = email_entity["description"]; 
```

body 是字符串类型。换行符在该字符串中。如果您想将该[字符串转换为每个换行符的字符串数组](https://stackoverflow.com/questions/1547476/easiest-way-to-split-a-string-on-newlines-in-net)，请尝试：

```
List<string> bodyLines = email_entity["description"].Split(new string[] { "\r\n", "\n" }, StringSplitOptions.None); 
```

# mysql - MySQL 插入重复键更新 PK AI

> ID：10171565
> 
> 赞同：2
> 
> 时间：2012-04-16T09:23:27.463
> 
> 标签：mysql, insert, duplicates, auto-increment

我有这种结构的测试表：

```
CREATE TABLE IF NOT EXISTS `test` (
  `id_pc` int(11) NOT NULL AUTO_INCREMENT,
  `id_vendor` int(11) NOT NULL,
  `id_product` int(11) NOT NULL,
  `test` int(11) NOT NULL,
  PRIMARY KEY (`id_pc`),
  UNIQUE KEY `id_vendor` (`id_vendor`,`id_product`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

如您所见，UQ 密钥设置在与 PK 不同的 2 列上，即 AI。

简单测试查询：

```
INSERT INTO test(id_vendor, id_product, test) 
VALUES (1,1,1) ON DUPLICATE KEY UPDATE test = 1; 
```

每次我运行查询时，它都会增加 AUTO_INCREMENT 值（所以没有插入，只有更新）。这是正常行为还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:54:55.540

让我们从另一个角度来看这个主题：除非您告诉它（例如，通过或查询） ，否则MySQL 不会*重置表的 AUTO_INCREMENT 值。*在您的情况下，它显然需要使用一个值，以便它可以在确定它是重复之前组成插入。`ALTER TABLE``TRUNCATE TABLE`

还：

*   如果存在重复键，则更改不属于任何键的列的值将无济于事。
*   通过 AUTO_INCREMENT 获得的值应该是没有意义的。如果您担心差距，则说明您使用了错误的工具来完成这项工作。

# java - 从 40 亿中找到缺失的数字（再次）

> ID：10171570
> 
> 赞同：1
> 
> 时间：2012-04-16T09:23:37.630
> 
> 标签：java, algorithm, optimization, bit-manipulation

似乎一个被问**了很多次**的问题就是要在 40 亿个数字中检测出一个缺失的数字。
推荐的方法似乎是使用位集（当内存限制是问题的一部分时）。
一个示例帖子是：[find-an-integer-not-among-four-billion-given-ones](https://stackoverflow.com/questions/7153659/find-an-integer-not-among-four-billion-given-ones)，我也可以在 SO 中链接到更多。

我的问题如下： bitset 方法似乎隐含地假设数字**是非**负数。作为我链接到的帖子中的一个例子，Java中有这个代码片段：

```
int radix = 8; 
byte[] bitfield = new byte[0xffffffff/radix]; 
void F() throws FileNotFoundException{ 
    Scanner in = new Scanner(new FileReader("a.txt")); 
    while(in.hasNextInt()){ 
        int n = in.nextInt(); 
        bitfield[n/radix] |= (1 << (n%radix)); 
    } 

    for(int i = 0; i< bitfield.lenght; i++){ 
        for(int j =0; j<radix; j++){ 
            if( (bitfield[i] & (1<<j)) == 0) System.out.print(i*radix+j); 
        } 
    } 
} 
```

但是在 Java 中，所有的整数都是有符号的。结果，发布的代码将因负数而中断。这`int n = in.nextInt();`可能会返回负数。

所以我想不知何故我的困惑是关于这种问题/练习的两个部分：
1）可以使用位集来表示负数吗？如何？
2）问题的解决方案是否与特定的编程语言有关？例如，在有无符号数字的 C++ 中，我想人们可以接受范围是非负数的假设。

有人可以帮我理解这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:35:21.797

尝试

```
long n = in.nextInt() & 0xFFFFFFFFL; 
bitfield[(int) (n/radix)] |= (1 << (n%radix)); 
```

或使用

```
final int bits = 3; 

bitfield[(int) (n >>> bits)] |= (1 << (n & ((1 << bits) -1))); 
```

之后

```
System.out.print((int) (i*radix+j)); 
```

您可能会发现使用 and `int[]`or`long[]`比使用 a 稍快`byte[]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:30:53.863

那么有一个明显的解决方案：由于我们知道每个数字都有一个特定的范围 [a, b) 您可以将下边界添加到所有数字以获得有保证的正数。

现在这不适用于任意长的数字，但这通常不是问题

# jquery - ajax更新列表后没有更新jquery样式

> ID：10171571
> 
> 赞同：1
> 
> 时间：2012-04-16T09:23:42.667
> 
> 标签：jquery, jquery-mobile, wicket, wicket-1.5

我正在使用检票口更新列表。列表将被更新（发出 ajax 请求，发送响应并更新列表）。到目前为止，一切正常。

更新列表后，我调用 javascript/jquery 方法 $('ul').listview('refresh') 来（重新）添加所有必要的 jquery 样式。但这不会发生。（更新的）列表将无样式显示。

有什么想法，我错过了什么？

html部分：

```
...
<ul id="sitzungenList" wicket:id="sitzungenListContainer" data-role="listview" data-divider-theme="b" data-inset="true">
    <li wicket:id="sitzungen" data-theme="c">
        <a href="#page2" data-transition="slide">
            <span wicket:id="sitzungName">[Sitzung]</span>
        </a>
    </li>
</ul>
... 
```

java部分（列表的初始化）：

```
...
final WebMarkupContainer sitzungenListContainer = new WebMarkupContainer("sitzungenListContainer");
        sitzungenListContainer.setOutputMarkupId(true);
        sitzungenForm.add(sitzungenListContainer);
        final ListView<Meeting> sitzungenList = new ListView<Meeting>("sitzungen", meetingsService.getAll(Meeting.class)) {
            @Override
            protected void populateItem(ListItem<Meeting> listItem) {
                listItem.add(new Label("sitzungName", listItem.getModelObject().getName()));
            }
        };
        sitzungenListContainer.add(sitzungenList);
... 
```

最后是列表的更新（在 AjaxButton 的 onSubmit 方法中）：

```
...
sitzungenList.setList(meetingsService.getMeetings(sitzungenSearchParam));
target.add(sitzungenListContainer);
target.appendJavaScript("$('ul').listview('refresh')");
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:00:07.667

使用 Wicket 的 AJAX 功能，您可以*替换*`<ul>`标记及其子项的完整 DOM 节点。因此 JQuery 不能将其识别`<ul>`为列表视图。根据[this question的答案，](https://stackoverflow.com/questions/5650157/changing-ul-to-ul-data-role-listview)您需要调用listview构造函数而不是刷新：

```
target.appendJavaScript("$('ul').listview()"); 
```

# android - 以编程方式配对两个蓝牙设备

> ID：10171574
> 
> 赞同：2
> 
> 时间：2012-04-16T09:23:53.720
> 
> 标签：android

我正在做一个蓝牙项目，我想在 Android 中以编程方式配对两个蓝牙设备。我在 Android 中使用默认 api。它正在寻找设备。但不返回 Action_found 意图。在检查 action_found 意图的条件时，它返回 false。但在 logcat 中，它显示找到的设备地址。这是我尝试过的示例代码。

```
package com.qburst.android.settingsmanager.view;

import java.util.ArrayList;
import java.util.Set;

import android.app.Activity;
import android.bluetooth.BluetoothAdapter;
import android.bluetooth.BluetoothDevice;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.Toast;

public class Bluetooth extends Activity {
    protected static final int REQUEST_ENABLE_BT = 1;
    private View mBluetooth;
    private Button mOnButton;
    private Button mActiveDevices;
    private Button mDiscoverable;
     public ArrayAdapter<String> mArrayAdapter;
     public BluetoothAdapter mBluetoothAdapter;
     ArrayList<String> devices = new ArrayList<String>();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

    setContentView(R.layout.bluetooth);
    mOnButton = (Button) findViewById(R.id.on_button);
    mActiveDevices = (Button) findViewById(R.id.active_devices);
    mDiscoverable = (Button) findViewById(R.id.discoverable_button);
    mArrayAdapter = new ArrayAdapter<String>(this, R.layout.main);
    IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
    registerReceiver(mReceiver, filter);

    mOnButton.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
              mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();
              if (mBluetoothAdapter == null) {
                  // Device does not support Bluetooth
              }
              if (!mBluetoothAdapter.isEnabled()) {
                    Intent enableBtIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
                    startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
                }
        }
    });

    mActiveDevices.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

             Set<BluetoothDevice> pairedDevices = mBluetoothAdapter.getBondedDevices();
             System.out.println("checking paired devices");
          // If there are paired devices
          if (pairedDevices.size() > 0) {
              System.out.println(" paired devices");
              // Loop through paired devices
              for (BluetoothDevice device : pairedDevices) {
                  // Add the name and address to an array adapter to show in a ListView
                  mArrayAdapter.add(device.getName() + "\n" + device.getAddress());

              }
          }else {
              mBluetoothAdapter.startDiscovery();
          }
        }
    });

    mDiscoverable.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
             Intent discoverableIntent = new
                     Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
                     discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
                     startActivity(discoverableIntent);
          }
    });
    }

     public void onActivityResult(int requestCode, int resultCode, Intent data) {

            switch (requestCode) {

            case REQUEST_ENABLE_BT:
                // When the request to enable Bluetooth returns
                if (resultCode == Activity.RESULT_OK) {
                    Toast.makeText(this, "Bluetooth enebled", Toast.LENGTH_SHORT).show();

                } else {
                    // User did not enable Bluetooth or an error occurred

                    Toast.makeText(this, "Bluetooth not enebled", Toast.LENGTH_SHORT).show();
                    finish();
                }
            }
        }

     private final BroadcastReceiver mReceiver = new BroadcastReceiver() {

            public void onReceive(Context context, Intent intent) {
                String action = intent.getAction();
                BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                devices.add(device.getName());
                   devices.add(device.getAddress());
                   System.out.println(devices);
                // When discovery finds a device
                Log.i("receiver","Inside receiver");

                if (BluetoothDevice.ACTION_FOUND.equals(action)) {
                    System.out.println("device found");
                    Toast.makeText(getBaseContext(), "No device found",Toast.LENGTH_LONG);
                    // Get the BluetoothDevice object from the Intent
                    //BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
                    // Add the name and address to an array adapter to show in a ListView
                   System.out.println(device.getName());
                   devices.add(device.getName());
                   devices.add(device.getAddress());
                   mArrayAdapter.add(device.getName() + "\n" + device.getAddress());
                   System.out.println(devices);
                }
            }
        };

        // Register the BroadcastReceiver

        // Don't forget to unregister during onDestroy
        @Override
        protected void onDestroy() {

            super.onDestroy();
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-19T12:50:57.873

您应该将正确的操作添加到 mReceiver 的过滤器中！您应该添加：**filter.addAction(BluetoothDevice.ACTION_FOUND);**

BluetoothDevice.ACTION_FOUND 不在过滤器中，因此永远不会收到！

所以改变这些行：

```
IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
registerReceiver(mReceiver, filter); 
```

对此：

```
IntentFilter filter = new IntentFilter(BluetoothAdapter.ACTION_DISCOVERY_FINISHED);
filter.addAction(BluetoothDevice.ACTION_FOUND);
registerReceiver(mReceiver, filter); 
```

让我知道它是否有效！

# ios - 分享一个 Apple 个人 Dev。与团队成员的帐户

> ID：10171577
> 
> 赞同：2
> 
> 时间：2012-04-16T09:24:08.600
> 
> 标签：ios

我正在尝试与我的开发人员团队的其他团队成员共享我的个人 Apple 开发人员帐户。我们作为业余爱好者进行开发，因此没有机会获得公司开发帐户。

这样做的唯一方法似乎是在其他开发者的 MacBook 之间共享个人帐户的私钥。由于 Apple 并不打算这样做，因此这对我们来说并不是一个真正的选择。

有没有其他方法可以让所有团队成员在他们的 iPad 上调试他们的代码，而无需共享私钥？

其他团队成员不必访问 App-Store 的东西。我的问题仅与其他设备上的调试有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:48:54.737

不可以。无法将其他开发者添加到个人开发者帐户。如果获得公司帐户是不可能的，唯一的其他解决方案是让每个团队成员获得（并支付）他们自己的个人开发者帐户。

# java - 了解复杂java项目中运行的方法和类

> ID：10171579
> 
> 赞同：0
> 
> 时间：2012-04-16T09:24:15.083
> 
> 标签：java, eclipse

我目前正在使用一个复杂的开源 java 项目，它有 10 个包，每个包至少有 7 个类（eclipse 是我正在使用的 IDE）。这是一个具有多种用途/应用程序的项目。我只使用该项目的 1 次使用，所以我不需要大多数其他类。我能够运行它并给我它所说的输出。我正在尝试编辑代码或插入 java 计算，以便获得更好的输出。但是由于 java 项目对我来说太复杂了，所以我不知道在为我想要的用途运行项目时正在使用的特定类/方法。当一个项目正在运行时，我如何知道类/方法的流程，以便我知道变量的流程，以便我知道在哪里插入不同的计算或算法。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:32:01.793

只有 10 个小包装？这是您正在使用的一个非常简单的项目。但无论如何，试试这个：让你的过程（调用项目方法的代码）在无限循环中重复，并且已经`jvisualvm`启动并连接到你的 JVM。那是随 JDK 一起分发的 Java 分析器。它将为您提供所采用的所有代码路径的概要。只是，它将让您了解实时 JVM（许多线程）的全部复杂性。你必须在周围找到自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:28:46.293

使用调试器并逐步执行代码以观察变量的变化。

如果您想要更多肮脏的方法，也可以添加一些 System.out 行。

可能值得快速浏览一下

[http://www.vogella.com/articles/EclipseDebugging/article.html](http://www.vogella.com/articles/EclipseDebugging/article.html)

# c++ - 我如何打印这个二维数组？

> ID：10171584
> 
> 赞同：-2
> 
> 时间：2012-04-16T09:24:21.043
> 
> 标签：c++

我想使用函数创建第二个数组；用户将输入尺寸（x，y），函数将打印它；在第一行中必须出现数字 1,2,3...x，在第一列中必须出现字符 a,b,c,d,e....y（y 以数字形式给出）。

例如，如果用户输入 x=5 y=7 它将打印：

```
 1 2 3 4 5 
a _ _ _ _ _
b _ _ _ _ _
c _ _ _ _ _
d _ _ _ _ _
f _ _ _ _ _
h _ _ _ _ _
i _ _ _ _ _ 
```

我写了一些代码，但我不知道如何处理这些字母。

```
void function(int x,int y)
{ 
    char th[x][y];

    for (int i = 1; i < x; i++)
    { 
       for (int j = 1; j < y; j++)
       {
          if(i==1 )
          {
            for (int k = 1; k < x; k++)
            {
               th[i][j]=k;
            }
          }
          else if(j==1)
          {
            th[i][j]='a';
          }
          else
          {
            th[i][j]='_';
          }
          std:: cout << th[i][j] <<'\t';
       }

       cout << std::endl;
    }  
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:30:24.533

使用字符代码表示和 'b' == 'a' + 1 （等等）这一事实。

如果你有一个从零开始的索引 I，并且你想将它转换为字母，它真的就像打印 'a' + I 一样简单。如果你想要大写，打印 'A' + I。

另请注意，您可以真正简化这些循环。没有理由嵌套三个循环。第一行需要一个 for 循环（生成数字列标题），然后是其余行的双重嵌套 for 循环。类似于以下（完全未经测试）的代码：

```
// print header
std::cout << ' ';
for (int i = 0; i != x; ++i)
  std::cout << ' ' << i;
std::cout << '\n';

// print body
for (int j = 0; j != y; ++j)
{
  // column leader
  std::cout << char('a' + j);

  // column body
  for (int i = 0; i != x; ++i)
    std::cout << " _";
  std::cout << "\n";
} 
```

根据您希望在单元格中保存数据的愿望，您需要为它们分配空间。如果您有 X 列 X 行，则需要 X*Y 单元格。您可以使用 X*j+i 对它们进行索引，其中 i,j 是您要访问的列、行。就像是：

```
std::vector<int> cells(x * y);

// inside the loop, in place of printing " _", use:
std::cout << ' ' << cells(x * j + i); 
```

如果您想为“空”值保留下划线，您需要选择一些整数来表示一个 nil 值（零、负、INT_MAX 等）并用它填充向量。然后放入 if 条件，如果单元格值为 nil 值则打印下划线，否则直接打印单元格值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:26:54.350

您需要动态分配数组并在完成后释放内存：

```
char** th = new char*[x];
for ( int i = 0 ; i < x ; i++ )
   th[i] = new char[y];

//rest of the code

for ( int i = 0 ; i < x ; i++ )
   delete[] th[i];
delete[] th; 
```

我必须建议您也研究一下`std::vector`，它可能更适合您实际在做的事情。

# android - Android：所有屏幕的小部件大小

> ID：10171593
> 
> 赞同：1
> 
> 时间：2012-04-16T09:24:48.343
> 
> 标签：android, widget, size

如何为所有 android 设备创建尺寸合适的小部件？我在 Galaxy Nexus 上的小部件在中心，但在 Galaxy Note 上是固定的或不在中心 :-( 如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T12:19:34.657

> 怎样才能解决这个问题？

问题大概在于您用于应用小部件的布局。您需要考虑到应用小部件的大小会因设备而略有不同，并相应地设计您的布局（例如，`fill_parent`用于根元素的宽度和高度）。

# ms-access - Access数据库中子数据表属性对性能的影响

> ID：10171596
> 
> 赞同：0
> 
> 时间：2012-04-16T09:24:57.663
> 
> 标签：ms-access, ms-access-2003

我已经读过，如果表中的子数据表属性是自动的，那么性能会降低。你能告诉我原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T12:05:56.967

> 此自动分配的属性由数据表视图中显示的表单和子表单继承。显然，这不是一个好主意，并且可能会对从早期版本导入的应用程序产生意想不到的后果。更糟糕的是，加载具有多个子表单的表单时存在严重的性能问题，其中 Access 正在计算并从多个相关表中收集数据。

-- [http://allenbrowne.com/bug-09.html](http://allenbrowne.com/bug-09.html)

# php - 使用 cron 作业和 php 从服务器下载文本文件

> ID：10171598
> 
> 赞同：0
> 
> 时间：2012-04-16T09:24:59.973
> 
> 标签：php, cron

我正在寻找一个脚本，您可以从一台服务器自动下载文件并使用 php 和 cron 作业上传到数据库。谁能指出我正确的方向？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:40:14.150

您可以使用`ftp`和 php 该功能：[http ://www.php.net/manual/en/book.ftp.php](http://www.php.net/manual/en/book.ftp.php)

**概念证明**

```
$remoteUrl = "http://balabla/abc.pdf" ; // to remote file
$localTemp = "temp" ; // Temp directory 
$file = 'somefile.txt';
$ftpServer = "";
$ftpUsername = "";
$ftpPassword = "" ;
$serverPath = 'data/upload/'; // this most exist on your the server you are uploading to

//Get Remote FIle 
$localFile = $localTemp . DIRECTORY_SEPARATOR . basename($remoteUrl);
file_put_contents($fileName, file_get_contents($remoteUrl));

//Upload The File 

$connID = ftp_connect($ftpServer);
$loginID = ftp_login($connID, $ftpUsername, $ftpPassword);

if(!$connID || !$loginID)
{
    die("Can't Connect to FTP");
}

ftp_chdir($connID, $serverPath); //Change Directory 

if (ftp_put($connID, $localFile, basename($localFile), FTP_BINARY )) {
    echo "successfully uploaded $localFile\n";
} else {
    echo "There was a problem while uploading $localFile\n";
}

// close the connection
ftp_close($connID); 
```

我希望它有帮助

# javascript - 多级 jQuery 选项卡：二级链接未打开关联的选项卡部分

> ID：10171600
> 
> 赞同：0
> 
> 时间：2012-04-16T09:25:15.687
> 
> 标签：javascript, jquery

我正在尝试在页面上组合一个多级 jQuery 选项卡式导航系统。

即链接1 | 链接 2

如果将鼠标悬停在“链接 2”上，将显示以下内容：

链接 1 | 链接 2 链接 2 的链接 1 | 链接 2 的链接 2

单击“链接 2 的链接 1”或“链接 2 的链接 2”将带您进入页面的选项卡部分；请注意，这不会导致新的页面请求，因为这些链接中的任何一个的内容之前都被隐藏了，因为当前选择的选项卡是“链接 1”，所以此时才变得可见。

代码如下（注意：为简洁起见进行了简化）：

```
<span id="form" class="tabs">
<div>        
 <ul>            
 <li><a href="#blog">Blog</a></li>            
 <li><a href="#links">Links</a>
   <ul id="links-tabs-list">                             
   <li><a href="#links_add">Add</a></li>
   <li><a href="#links_manage">Manage</a></li>
   </ul>
  </li>
  <li><a href="#images">Images</a></li>
  <li><a href="#more">More..</a></li>
 </ul>
</div>

<div id="blog"> // content goes here..  </div>
<div id="links">
    <div id="links_add"> // content goes here </div>
    <div id="links_manage"> // content goes here </div>           
 </div>
 <div id="images">  // content goes here.. </div>
 <div id="more"> // content goes here.. </div>
</span> 
```

jQuery 选项卡是使用 $('.tabs').tabs() 设置的，并且工作正常。此外，CSS 还可以正常使用“链接”部分的“添加”和“管理”链接，仅在“链接”悬停时显示。但是，当它悬停时，单击“添加”或“管理”不会显示“links_add”或“links_manage”id div。但是，单击任何其他顶级选项卡链接（例如“图像”或“更多”）会导致显示正确的选项卡部分。希望有人可以让我知道我需要做什么才能单击任何辅助选项卡级别的链接以打开相关的选项卡内容部分。

希望我已经清楚了！任何帮助深表感谢。

**更新**

抱歉，假设调查解决方案不需要 CSS。这是选项卡，请记住我知道（并且目前没有打扰）第二个选项卡级别的悬停位置）：

```
.tabs ul { list-style-type: none; padding-left: 0; width: 100%; }
.tabs ul li { display: inline; }
.tabs ul li.final { margin-right: 0px; }
.tabs .ui-tabs-selected a, .tabs .ui-tabs-selected a:hover { cursor: text; text-decoration: none; }
.tabs ul li, .tabs ul li a { color: #DEDEDE; margin-right: 8px; }
.tabs ul li a { text-decoration: none; }
.tabs ul li a:hover { color: #e07979; }
.tabs .ui-tabs-selected a, .tabs .ui-tabs-selected a:hover{ color: #C24B4B; }
.tabs ul li ul { display: none; }
.tabs ul li:hover ul, .tabs ul li.hover ul { position: absolute; display: inline; left: 0; width: 100%; margin: 0; padding: 0; }
.tabs ul li:hover li, .tabs ul li.hover li { float: left; }
.tabs ul  li:hover li a, .tabs ul  li.hover li a { color: #000; }
.tabs ul  li li a:hover { color: #357; }
.ui-tabs-hide { display: none; } 
```

至于 JS，我没有使用自定义 jQuery 选项卡实现，所以我使用的唯一（相关）JS 是：

```
$(function (){

   $('.tabs').tabs();$('.tabs').tabs();

}); 
```

如果还有什么需要的，请告诉我，如果有，请提前道歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:40:02.470

你这样做是错的！jquery不直接支持多级选项卡，这是诀窍：

```
<span id="form" class="tabs">
<div>        
 <ul>            
 <li><a href="#blog">Blog</a></li>            
 <li><a href="#links">Links</a>   
  </li>
  <li><a href="#images">Images</a></li>
  <li><a href="#more">More..</a></li>
 </ul>
</div>

<div id="blog"> // content goes here..  </div>
<div id="links" class="tabs">
    <ul id="links-tabs-list">                             
   <li><a href="#links_add">Add</a></li>
   <li><a href="#links_manage">Manage</a></li>
   </ul>
    <div id="links_add"> // content goes here </div>
    <div id="links_manage"> // content goes here </div>           
 </div>
 <div id="images">  // content goes here.. </div>
 <div id="more"> // content goes here.. </div>
</span> 
```

# java - 配置 Tomcat 以支持 SSL 或 https

> ID：10171602
> 
> 赞同：2
> 
> 时间：2012-04-16T09:25:27.563
> 
> 标签：java, tomcat, https

我正在制作 Tomcat 以支持 https 连接。我已经通过此[链接](http://www.mkyong.com/tomcat/how-to-configure-tomcat-to-support-ssl-or-https/)并在我的系统中进行了配置。它对我来说很好。但是当我尝试重复相同的过程（用于配置新系统以支持 https）并输入[https时在另一个系统的浏览器中输入：//localhost:8443](https://localhost:8443)我得到“网页不可用”。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:04:31.750

在第二台机器上配置 Internet 代理的任何机会？在 Windows 环境中，如果配置了 Internet 代理，则有一个复选框可以选中，这样本地地址就不会通过代理解析。

# xmpp - 设置为成员的 pubsub 隶属关系在 openfire 中不起作用

> ID：10171605
> 
> 赞同：0
> 
> 时间：2012-04-16T09:25:36.237
> 
> 标签：xmpp, publish-subscribe, openfire

我一直在尝试在“openfire”上为我的 pubsub 节点创建一个白名单，但还没有成功。一切都进行得很好，直到我通过从属请求添加成员，这将指定 JID 的从属关系设置为“成员”。服务器接受请求而没有错误。但是，当我请求 pubsub 节点的从属关系时，它会返回“outcast”而不是“member”。以下是我的请求和回复：设置从属请求：

```
<body rid='2568800008' xmlns='http://jabber.org/protocol/httpbind' sid='6215ff3c'><iq to='pubsub.***.***.2.1' type='set' xmlns='jabber:client' id='1735:sendIQ'><pubsub xmlns='http://jabber.org/protocol/pubsub#owner'><affiliations node='hello_pubsub_7'><affiliation jid='arash@***.***.2.1' affiliation='member'/></affiliations></pubsub></iq></body> 
```

设置从属关系响应：

```
<body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns="jabber:client" type="result" id="1735:sendIQ" from="pubsub.***.***.2.1" to="ubuntu@***.***.2.1/6215ff3c"/></body> 
```

获取关联请求：

```
<body rid='2568800013' xmlns='http://jabber.org/protocol/httpbind' sid='6215ff3c'><iq to='pubsub.***.***.2.1' type='get' xmlns='jabber:client' id='1736:sendIQ'><pubsub xmlns='http://jabber.org/protocol/pubsub#owner'><affiliations node='hello_pubsub_7'/></pubsub></iq></body> 
```

获得隶属关系响应：

```
<body xmlns='http://jabber.org/protocol/httpbind'><iq xmlns="jabber:client" type="result" id="1736:sendIQ" from="pubsub.***.***.2.1" to="ubuntu@***.***.2.1/6215ff3c"><pubsub xmlns="http://jabber.org/protocol/pubsub#owner"><affiliations node="hello_pubsub_7"><affiliation jid="ubuntu@***.***.2.1" affiliation="owner"/><affiliation jid="arash@***.***.2.1" affiliation="outcast"/></affiliations></pubsub></iq></body> 
```

只是“仅发布”和“会员”不起作用。“发布者”、“所有者”和“弃儿”都可以。不确定这是错误还是我的代码中缺少某些内容。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T15:04:23.700

看起来您可以先查看[文档](http://www.igniterealtime.org/builds/openfire/docs/latest/documentation/javadoc/org/jivesoftware/openfire/pubsub/NodeAffiliate.Affiliation.html)来节省一些调试；）

仅支持发布者、所有者和弃儿从属关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T19:29:06.033

它既不是错误也不是您的代码中缺少的东西。

Openfire 的实现基于旧版本的规范，它不支持该特定从属关系。

# c# - 偷看的 MSMQ 消息的 message.ID 不知何故丢失了

> ID：10171607
> 
> 赞同：2
> 
> 时间：2012-04-16T09:25:41.870
> 
> 标签：c#, .net, msmq

我有一些旧代码，使用`BeginPeek`/从 MSMQ 偷看消息`EndPeek`。偷看后直接比较成功的消息ID：

```
if (message.Id != _lastMessageID) { // ... } 
```

稍后将代码`message.Id`传递给`ReceiveById`方法。这在大多数情况下都有效，但是偶尔会在这个位置抛出异常：

> System.InvalidOperationException：收到消息时未检索到属性标签

所以有时不知何故`message.Id`似乎在此期间迷路了。有人知道这样的行为吗？或者有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T20:53:58.960

我过去遇到过这个问题。问题在于我的代码调用 BeginPeek 两次，这导致 PeekCompleted 事件被抛出两次，每次都带有相同的消息。检查消息 ID 以查看您的应用是否已在较早的时间点收到产生错误的消息。作为 PeekComplete 事件处理程序中的第一步，我必须打印出消息 ID 才能捕捉到这一点。如果已经对 Begin Peek 进行了调用并且尚未返回，则必须非常小心不要调用 BeginPeek。

# .net - 序列化相关实体

> ID：10171616
> 
> 赞同：0
> 
> 时间：2012-04-16T09:26:14.270
> 
> 标签：.net, web-services, entity-framework, asmx

我正在使用 Entity Framework 4 通过 XML Web 服务序列化对象。对象上的标量属性可以很好地序列化，并且我有一个 0 或 1 属性也可以序列化。

但是，我有一个属性，输出中省略了该属性。它是一对多的（我的对象有一个列表），但 Sections 导航属性甚至不包含在输出中。我在我的 linq 查询中包含该属性，调试显示该`Sections`属性中的项目确实正在加载，只是没有序列化。这是我的代码：

```
dim item = Db.Surveys.Include("SurveySections").FirstOrDefault(Function(u) u.SurveyID = surveyId) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T08:25:15.793

我通过创建一个额外的属性来解决这个问题，该属性的作用类似于 EF 属性的额外 getter/setter。

# sql-server-2008 - SQL 触发器抛出错误

> ID：10171617
> 
> 赞同：1
> 
> 时间：2012-04-16T09:26:22.977
> 
> 标签：sql-server-2008, email, triggers, alert, procedure

```
ALTER TRIGGER [dbo].[AlertMail_tr]
ON 
[dbo].[MethodToLog_tbl]
AFTER INSERT 
AS      
BEGIN
DECLARE @LogId int
SET @LogId = (SELECT LogDataId FROM inserted)
if(SELECT Failure_flag FROM inserted)=1
begin
        exec [DB].[dbo].SendMail_prc
        @Command='EXEC CheckNew.dbo.FailureMail_prc @LogId'
        ,@MailPriority=1
        ,@MailRecipients='abc@xyz.com'
        ,@Subject='Alert-Failure'

end
END 
```

我收到此错误：

> 必须声明标量变量@LogId。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:28:30.223

```
@Command='EXEC CheckNew.dbo.FailureMail_prc @LogId='+cast ( @LogId as nvarchar(100)) 
```

或者

```
@Command='EXEC CheckNew.dbo.FailureMail_prc '+cast ( @LogId as nvarchar(100)) 
```

还 ，

在 执行字符串查询**之前**输入一个*值。*`@LogId`

 **## 编辑

```
declare @tmp nvarchar(max)
set @tmp='EXEC CheckNew.dbo.FailureMail_prc '+cast (@LogId as nvarchar(100))

 exec [DB].[dbo].SendMail_prc
        @Command=@tmp
        ,@MailPriority=1
        ,@MailRecipients='abc@xyz.com'
        ,@Subject='Alert-Failure' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:44:04.867

您的 @LogId 变量在 EXEC 命令的范围内不存在。它只看到它里面的东西，所以只要它是一致的，这条线`DECLARE @LogId int`是不存在的。

您需要传递带有变量值的字符串。

```
declare @aux varchar(100)
set @aux ='EXEC CheckNew.dbo.FailureMail_prc '+cast ( @LogId as varchar(10)) 

        exec [DB].[dbo].SendMail_prc
        @Command=@aux
        ,@MailPriority=1
        ,@MailRecipients='abc@xyz.com'
        ,@Subject='Alert-Failure' 
```

当然，根据需要更正长度**

# python - 通过 matplotlib 中的一个因子更改绘图比例

> ID：10171618
> 
> 赞同：38
> 
> 时间：2012-04-16T09:26:26.853
> 
> 标签：python, plot, matplotlib

我正在用python创建一个情节。有没有办法按一个因子重新缩放轴？`yscale`and`xscale`命令只允许我关闭对数刻度。

*编辑：*
例如。如果我有一个`x`比例从 1 nm 到 50 nm 的图，则 x 比例范围从 1x10^(-9) 到 50x10^(-9)，我希望它从 1 变为 50。因此，我想要绘图函数将放置在绘图上的 x 值除以 10^(-9)

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2013-07-23T17:17:07.220

正如您所注意到的，`xscale`并且`yscale`不支持简单的线性重新缩放（不幸的是）。作为 Hooked 答案的替代方案，您可以像这样欺骗标签，而不是弄乱数据：

```
ticks = ticker.FuncFormatter(lambda x, pos: '{0:g}'.format(x*scale))
ax.xaxis.set_major_formatter(ticks) 
```

显示 x 和 y 缩放的完整示例：

```
import numpy as np
import pylab as plt
import matplotlib.ticker as ticker

# Generate data
x = np.linspace(0, 1e-9)
y = 1e3*np.sin(2*np.pi*x/1e-9) # one period, 1k amplitude

# setup figures
fig = plt.figure()
ax1 = fig.add_subplot(121)
ax2 = fig.add_subplot(122)
# plot two identical plots
ax1.plot(x, y)
ax2.plot(x, y)

# Change only ax2
scale_x = 1e-9
scale_y = 1e3
ticks_x = ticker.FuncFormatter(lambda x, pos: '{0:g}'.format(x/scale_x))
ax2.xaxis.set_major_formatter(ticks_x)

ticks_y = ticker.FuncFormatter(lambda x, pos: '{0:g}'.format(x/scale_y))
ax2.yaxis.set_major_formatter(ticks_y)

ax1.set_xlabel("meters")
ax1.set_ylabel('volt')
ax2.set_xlabel("nanometers")
ax2.set_ylabel('kilovolt')

plt.show() 
```

最后我有一张照片的学分：

[![左：ax1 无缩放，右：ax2 y 轴缩放为千，x 轴缩放为纳米](../Images/ce9fda2603540d884273af180b20eb35.png)](https://i.stack.imgur.com/IdZsD.png)

请注意，如果您`text.usetex: true`像我一样拥有，您可能希望将标签括在 中，如下所示`$`：`'${0:g}$'`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-16T14:04:12.430

为什么不改变刻度，而不是改变单位呢？制作一个单独`X`的 x 值数组，其单位为 nm。这样，当您绘制数据时，它已经是正确的格式！只需确保添加 a`xlabel`来指示单位（无论如何*都应该这样做）。*

```
from pylab import *

# Generate random test data in your range
N = 200
epsilon = 10**(-9.0)
X = epsilon*(50*random(N) + 1)
Y = random(N)

# X2 now has the "units" of nanometers by scaling X
X2 = (1/epsilon) * X

subplot(121)
scatter(X,Y)
xlim(epsilon,50*epsilon)
xlabel("meters")

subplot(122)
scatter(X2,Y)
xlim(1, 50)
xlabel("nanometers")

show() 
```

![在此处输入图像描述](../Images/54924aeb6196a3b49be59fd61d246bd6.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-16T09:45:06.283

要设置 x 轴的范围，您可以使用`set_xlim(left, right)`，[这里是文档](https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xlim.html)

更新：

看起来您想要一个相同的图，但只更改“刻度值”，您可以通过获取刻度值然后将它们更改为您想要的任何值来做到这一点。因此，根据您的需要，它将是这样的：

```
ticks = your_plot.get_xticks()*10**9
your_plot.set_xticklabels(ticks) 
```

# sharepoint-2010 - Sharepoint 2010 的实时身份验证

> ID：10171623
> 
> 赞同：0
> 
> 时间：2012-04-16T09:26:46.313
> 
> 标签：sharepoint-2010, localhost, claims-based-identity, liveid

是否可以对内部 SharePoint 2010 站点使用实时 ID 身份验证。SharePoint 网站未在我们的网络中公开。意味着在身份验证之后可以重定向到 localhost sharepoint /site 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:55:16.717

是的。

[Codeplex 解决方案](http://spwla.codeplex.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T16:06:21.307

检查这里，源代码也可用： [http ://sharepoint-live-authentication.shetabtech.com/](http://sharepoint-live-authentication.shetabtech.com/)

适用于 SharePoint 2010 和 2013 的 Live ID 和 OpenID 可信身份提供程序和基于声明的身份验证。

它允许您和您的成员使用任何 OpenID 提供程序或 Windows Live ID 登录到您的 SharePoint 站点。您可以通过 SharePoint 标准访问页面和控件在用户登录您的站点之前和之后管理成员的访问权限。

# silverlight - UserControl 的资源作为 UserControl 的 DataContext？

> ID：10171630
> 
> 赞同：0
> 
> 时间：2012-04-16T09:27:24.453
> 
> 标签：silverlight, data-binding, binding, mvvm, datacontext

是否可以将 UserControl 的资源（或其资源之一）作为 UserControl 的 DataContext？

我试图将 DataGrid 的 CellTemplate 中的按钮命令属性绑定到我的 ViewModel 中的属性。

如果它使用 ListBox 而不是 DataGrid 这对我有用，如下所示，

```
 <ListBox.ItemTemplate>
    <DataTemplate>       
       <HyperlinkButton Content="{Binding DESCRIPTION}"                                                             
        Command="{Binding DataContext.SelectSingleBackCommand, ElementName=LayoutRoot}"/>
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

但是，如果我使用 DataGrid 而不是 ListBox，即使我单击了按钮也没有效果！

```
<data:DataGrid x:Name="RadGridSearchResults" ItemsSource="{Binding SearchResults}"  AutoGenerateColumns="False" IsReadOnly="True">
    <data:DataGrid.Columns>     
        <data:DataGridTemplateColumn Header="Just Header" CanUserSort="True" SortMemberPath="DESCRIPTION">
            <data:DataGridTemplateColumn.CellTemplate>
                <DataTemplate>                                        
                    <Button Margin="5"  Content="{Binding DESCRIPTION}" Command="{Binding DataContext.SelectSingleBackCommand,ElementName=LayoutRoot}"/>
                </DataTemplate>
            </data:DataGridTemplateColumn.CellTemplate>
        </data:DataGridTemplateColumn>
    </data:DataGrid.Columns>
</data:DataGrid> 
```

然后我认为DataGrid中可能有另一个LayoutRoot（Data Grid是一个简单的sl4网格。）并将LayoutRoot的名称更改为LayoutRootMain。没门。

注意：然后我删除了 <UserControl.DataContext> 部分，

所以我决定将我的 ViewModel 传递到 <UserConrol.Resources> 部分，如下所示

```
<UserConrol.Resources>
    <modelview:SelectReceiversViewModel x:Key="MainDataContextResource" x:Name="MainDataContextResource"/>
</UserControl.Resources> 
```

但是如何将 UserControl 的 DataContext 属性绑定到这个资源，我试过了；

```
<UserControl...   DataContext="{Binding RelativeSource={RelativeSource Self},Path=Resources}" 
```

或者

```
 <UserControl...  DataContext="{Binding ElementName=MainDataContextResource}" 
```

谢谢！

# dbus - 编译错误 dbus-ping-pong

> ID：10171641
> 
> 赞同：0
> 
> 时间：2012-04-16T09:28:30.790
> 
> 标签：dbus

我已经从[http://cgit.collabora.com/git/user/alban/dbus-ping-pong.git/tree/下载了文件](http://cgit.collabora.com/git/user/alban/dbus-ping-pong.git/tree/)

我正在尝试使用命令编译它

```
gcc pkg-config --libs --cflags dbus-1 dbus-glib-1-2 glib-2.0 -o dbus-ping-pong dbus-ping-pong.c 
```

但我收到以下链接器错误

```
/tmp/ccmJkxXb.o: In function g_once_init_enter': dbus-ping-pong.c:(.text+0x22): undefined reference tog_once_init_enter_impl'
/tmp/ccmJkxXb.o: In function dbus_glib_marshal_echo_srv__BOOLEAN__STRING_POINTER_POINTER': dbus-ping-pong.c:(.text+0x52): undefined reference tog_return_if_fail_warning'
dbus-ping-pong.c:(.text+0x79): undefined reference to g_return_if_fail_warning' dbus-ping-pong.c:(.text+0x9d): undefined reference tog_value_peek_pointer' dbus-ping-pong.c:(.text+0xac): undefined reference to g_value_peek_pointer' dbus-ping-pong.c:(.text+0x109): undefined reference tog_value_set_boolean' /tmp/ccmJkxXb.o: In function echo_ping_class_intern_init': dbus-ping-pong.c:(.text+0x122): undefined reference tog_type_class_peek_parent' /tmp/ccmJkxXb.o: In function echo_ping_get_type': dbus-ping-pong.c:(.text+0x162): undefined reference tog_intern_static_string' dbus-ping-pong.c:(.text+0x192): undefined reference to g_type_register_static_simple' dbus-ping-pong.c:(.text+0x1a8): undefined reference tog_once_init_leave' /tmp/ccmJkxXb.o: In function echo_ping_class_init': dbus-ping-pong.c:(.text+0x1cd): undefined reference tog_type_class_add_private' dbus-ping-pong.c:(.text+0x1e2): undefined reference to dbus_g_object_type_install_info' /tmp/ccmJkxXb.o: In functionecho_ping_init': dbus-ping-pong.c:(.text+0x1fe): undefined reference to g_type_instance_get_private' /tmp/ccmJkxXb.o: In functionecho_ping': dbus-ping-pong.c:(.text+0x21d): undefined reference to g_strdup' /tmp/ccmJkxXb.o: In functionclient': dbus-ping-pong.c:(.text+0x265): undefined reference to dbus_g_proxy_new_for_name' dbus-ping-pong.c:(.text+0x2c3): undefined reference todbus_g_proxy_call' dbus-ping-pong.c:(.text+0x2d1): undefined reference to dbus_g_error_quark' dbus-ping-pong.c:(.text+0x2f1): undefined reference todbus_g_error_get_name' dbus-ping-pong.c:(.text+0x305): undefined reference to g_printerr' dbus-ping-pong.c:(.text+0x31d): undefined reference tog_printerr' dbus-ping-pong.c:(.text+0x328): undefined reference to g_error_free' dbus-ping-pong.c:(.text+0x358): undefined reference tog_print' dbus-ping-pong.c:(.text+0x363): undefined reference to g_free' /tmp/ccmJkxXb.o: In functionmain': dbus-ping-pong.c:(.text+0x38f): undefined reference to g_type_init' dbus-ping-pong.c:(.text+0x3a3): undefined reference todbus_g_bus_get' dbus-ping-pong.c:(.text+0x3c7): undefined reference to g_object_new' dbus-ping-pong.c:(.text+0x3df): undefined reference tog_type_check_instance_cast' dbus-ping-pong.c:(.text+0x3f9): undefined reference to dbus_g_connection_register_g_object' dbus-ping-pong.c:(.text+0x406): undefined reference todbus_g_connection_get_connection' dbus-ping-pong.c:(.text+0x426): undefined reference to dbus_bus_request_name' dbus-ping-pong.c:(.text+0x43a): undefined reference tog_main_loop_new' dbus-ping-pong.c:(.text+0x44a): undefined reference to `g_main_loop_run' 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T11:25:05.303

gcc -o dbus-ping-pong dbus-ping-pong.c `pkg-config --libs --cflags dbus-1 dbus-glib-1 glib-2.0`

以下评论最能说明问题（从某个论坛复制）

“以正确的顺序列出库非常重要。当 gcc 扫描命令行时，它会提取到目前为止所需的内容。每次看到一个对象时，它都会将其添加到程序中。每次看到一个库时，它仅拉入此时需要的对象。您应该始终在对象之后列出库“

pkg-config 程序用于检索有关系统中已安装库的信息。它通常用于编译和链接一个或多个库。

如果你只给 pkg-config --libs --cflags dbus-1 dbus-glib-1 glib-2.0 在命令行上没有任何单引号或双引号，它会扩展为 -pthread -I/usr/include/dbus-1.0 -I /usr/lib/i386-linux-gnu/dbus-1.0/include -I/usr/include/glib-2.0 -I/usr/lib/i386-linux-gnu/glib-2.0/include -pthread -ldbus-glib -1 -ldbus-1 -lpthread -lgobject-2.0 -lgthread-2.0 -lrt -lglib-2.0 所以它具有目标文件之后提到的所有包含和依赖库

# svn - 向 Atlassian OnDemand/Crucible 添加 SVN 提交后挂钩

> ID：10171642
> 
> 赞同：2
> 
> 时间：2012-04-16T09:28:34.943
> 
> 标签：svn, jira, hook, jira-ondemand

我想添加一个发送电子邮件的提交后挂钩脚本 - 我将此作为指南[http://www.petefreitag.com/item/244.cfm](http://www.petefreitag.com/item/244.cfm)。

我们将 Atlassian OnDemand 与集成的 Crucible SVN 目录一起使用。

我是否认为我只需要在我们的 SVN 存储库中建立“钩子”目录的位置？有人可以建议我如何做到这一点吗？

非常感谢帮助，SVN 菜鸟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T08:51:49.357

你是对的。问题是您不必在存储库中找到 hooks 文件夹，您必须在创建存储库的文件系统中找到 hooks 文件夹。( [http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html) )

不幸的是，您无权访问文件系统，这意味着您将无法安装这些挂钩。

以下是 Atlassian 关于此主题的官方声明：

> 自定义挂钩：否 需要 JIRA 问题密钥的预提交挂钩可用。[由于此处列出的原因 ( https://studio.atlassian.com/browse/JST-1444](https://studio.atlassian.com/browse/JST-1444) ) ，目前无法使用自定义挂钩。如果您对将来希望看到的钩子有任何建议，请在此处请求该功能（[https://studio.atlassian.com/secure/CreateIssue.jspa?pid=10073&issuetype=4](https://studio.atlassian.com/secure/CreateIssue.jspa?pid=10073&issuetype=4)）。但是，可以根据请求启用 pre-revprop-change 挂钩（仅用于编辑提交消息）。请参阅 JST-2779 ( [https://studio.atlassian.com/browse/JST-2779](https://studio.atlassian.com/browse/JST-2779) )。

来源：[https ://confluence.atlassian.com/display/AOD/Restricted+Functions+in+Atlassian+OnDemand](https://confluence.atlassian.com/display/AOD/Restricted+Functions+in+Atlassian+OnDemand)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T12:42:23.290

如果您对要添加挂钩的路径运行“ [svn info](http://svnbook.red-bean.com/en/1.1/re13.html) ”命令，您将看到根的位置（它将被标记为 Repository Root）。在此文件夹中，您会找到另一个名为“hooks”的文件夹。

问候

曼德

在线运营, WANdisco

# report - 比较 Cognos RS 中的年份 - 外部联接不起作用

> ID：10171643
> 
> 赞同：1
> 
> 时间：2012-04-16T09:28:37.050
> 
> 标签：report, cognos

我想创建一个交叉表，其中 y 轴上有月份，x 轴上是上一年和当年。

```
 2011  |  2012
Shop_1  |  Jan  |  123   |  456
           Feb  |  789   |  1011
           ...  |  ...   |  ...
           Dez  |  234   |  454  (for the current year, the future months are either filled with predicted numbers or NULL)
----------------------------------
Shop_2  |  Jan  |  264   |  23409
           ...  |  ...   |  ...
           Dez  |  234   |  454 
```

数据源是关系型的，所以我每年创建两个查询项，在 SQL 中会是这样的：

```
SELECT 
shop, month, numberOfOrders 
FROM myFactTable 
INNER JOIN Dim_date ...
INNER JOIN Dim_shop ...
WHERE Dim_date.year = 2012 
```

然后我用 3 个连接加入这 2 个查询。

*   year2012query.Shop `=`year2011query.Shop
*   year2012query.Month `=`year2011query.Month
*   year2012query.Year `>`year2011query.Year

并将两边的基数设置为 0..n，使其成为`outer join`. 我已经尝试过任何其他可能性的基数，但没有任何效果。问题是，我只能得到截至 4 月的月份，即当前月份。所以这`OUTER JOIN`不起作用。

所以我在想，我的 Framework Manager 模型中的基数可能会起作用。这是一个星型模式，基数总是

```
Dimension Table <--> Fact Table
1..1                 1..n 
```

将此更改为

```
Dimension Table <--> Fact Table
1..1                 0..n 
```

只是产生了报告性能变得不可接受的效果，结果很奇怪：

```
 2011  |  2012
           Apr  |        |
           May  |        |
           Jun  |        |
           ...  |        |
           Dez  |        |
----------------------------------
Shop_1  |  Jan  |  123   |  456
           Feb  |  789   |  1011
           Mar  |  123   |  123
           Apr  |  234   |  454  
----------------------------------
Shop_2  |  Jan  |  264   |  23409
           Feb  |  7123  |  1011
           Mar  |  1223  |  123
           Apr  |  3445  |  454 
```

我怎样才能实现，显示完整的去年？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T11:38:57.977

我能够自己解决它。FM 模型中的基数保持不变

```
Dimension (1..1) <--> (1..n) Fact 
```

我的错误是在加入当前和过去一年的查询时选择了当年的月份。

# c# - ComboBox 像一个按钮？

> ID：10171645
> 
> 赞同：2
> 
> 时间：2012-04-16T09:28:45.617
> 
> 标签：c#, winforms

我见过看起来像底部右侧带有小箭头的按钮的组合框，表明它是一个带有多个选项的下拉菜单。这是怎么做到的？我可以更改组合框的属性吗？谢谢！

编辑：我在 Visual Studio 2010 中使用 Windows 窗体

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T09:45:42.943

这被称为`SplitButton`，在.NET 中，您可以将其用于工具栏，但不能用于普通的 WinForms。

但是，有一些替代方案，例如：

1.  [这个在 Codeproject](http://www.codeproject.com/Articles/18447/SplitButton-a-NET-WinForm-control-Part-1)
2.  [CodeProject 上的另一个](http://www.codeproject.com/Articles/15627/SplitButton-an-XP-style-dropdown-split-button)
3.  [这里还有一个](http://wyday.com/splitbutton/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:45:02.283

```
this.comboBox1.DropDownStyle = System.Windows.Forms.ComboBoxStyle.DropDownList;
this.comboBox1.FlatStyle = System.Windows.Forms.FlatStyle.Popup;
this.comboBox1.FormattingEnabled = true;
this.comboBox1.Items.AddRange(new object[] 
{
    "Item 1",
    "Item 2",
    "Item 3",
    "Item 4",
    "Item 5"
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:35:33.187

`ComboBox.DropDownStyle = ComboBoxStyle.DropDownList`试试这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-05T23:31:05.663

我知道 OP 询问了`SplitButton`有关 WinForms 的问题，但帖子标题中没有提到 WinForms，因此寻找拆分按钮以与其他技术一起使用的人可能会在这里结束。

如果您正在 WPF 中寻找拆分按钮，那么您可以使用[WPF 扩展工具包中](https://wpftoolkit.codeplex.com/)[免费提供](https://wpftoolkit.codeplex.com/wikipage?title=SplitButton)的拆分按钮。

这是我如何在 WPF 应用程序中使用它的小屏幕截图。

![在此处输入图像描述](../Images/62dfea8a0ac7ab4de2809e271952fa53.png)

# android - 如何创建动态消息对话框以及如何在图片上应用

> ID：10171653
> 
> 赞同：0
> 
> 时间：2012-04-16T09:29:16.090
> 
> 标签：android, android-layout, android-dialog

我的问题是如何创建一个看起来像给定图片的消息对话框

![消息对话框](../Images/18fa83e48fa97425faf5d870c096936f.png)

我想在位图图片中应用此消息对话框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T04:57:25.773

你可以这样做......

布局 msgbox1:-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:layout_gravity="center_vertical|center_horizontal">
<ImageView android:id="@+id/ImageView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/image1" android:layout_gravity="center_vertical|center_horizontal"></ImageView>
</LinearLayout> 
```

布局 msgbox2:-

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content" android:layout_gravity="center_vertical|center_horizontal">
<ImageView android:id="@+id/ImageView01" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/image1" android:layout_gravity="center_vertical|center_horizontal"></ImageView>
</LinearLayout> 
```

Java代码：-

```
private static final int MsgBox1 = 0,MsgBox2 = 1; //Declaration done on top 
```

.

```
protected Dialog onCreateDialog(int id) 
{
     dialog = new Dialog(tagame.this,android.R.style.Theme_Light_Panel);
     switch(id) {
        case MsgBox1:
            dialog.setContentView(R.layout.msgbox1);
        break; 
        case MsgBox2:
            dialog.setContentView(R.layout.msgbox2);
        break; 

    }
      return dialog;
} 
```

要显示 message1 框，您可以使用...

```
showDialog(MsgBox1); 
```

对于隐藏消息框...

```
removeDialog(MsgBox1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:40:54.707

您可以通过创建自定义对话框来做到这一点。Step1.在res中的String文件中创建样式

```
<style name="myQuitDialog" parent="android:Theme.Dialog"> 
   <item name="android:gravity">center_horizontal</item>

    </style> 
```

第2步。在布局中创建 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/layout_quit"
              android:orientation="horizontal"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:background="@drawable/image which u want to show"
 >

</RelativeLayout> 
```

第三步。在src中编写自定义对话框的代码

```
class Custom_Dialog extends Dialog {

        protected Custom_Dialog(Context context, int theme) {
            super(context, theme);
            // TODO Auto-generated constructor stub
        }

    }
private void show_alert() {
        final Custom_Dialog alertbox = new Custom_Dialog(this, R.style.myQuitDialog);
        Window window = alertbox.getWindow();
        window.setBackgroundDrawableResource(android.R.color.transparent);
        window.requestFeature(window.FEATURE_NO_TITLE);

        alertbox.show(); 
        alertbox.setCancelable(true);
        alertbox.setCanceledOnTouchOutside(true);

                 alertbox.dismiss();
            }

    } 
```

通过这种方式，您可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:55:13.440

设置时间间隔并动态更改位图。

编辑详细答案：

你可以像这样使用 imageView。 `imageView.postDelayed (Runnable action, long delayMillis)`

为了利用上述方法，

您必须创建一个`Runnable`可以处理您的`BitMap`值更改的方法。并`Thread.sleep(time)`在`Runnable`.

通常这种方法`ImageView`将值放在后面`delayMillis`。所以更好的是你必须在立即初始化 imageView 后调用这个方法。并根据您的`delayMillis`意愿实现该价值。（在您的情况下，应该非常少）。

因此，根据该`Thread.sleep(time)`方法，您的位图将动态更改。

我的第一个建议：（设置时间`interval`并动态更改`bitmap`）

我建议在设置`Timer`中设置一个`Activity`并根据`Timer`设置，只需`BitMap`向您提供值以`ImageView`动态更改它。

希望你理解并觉得有用。

# .net - 在不同的 TFS 分支上工作时丢失 EF 代码优先迁移？

> ID：10171658
> 
> 赞同：35
> 
> 时间：2012-04-16T09:29:34.973
> 
> 标签：.net, entity-framework, coldfusion, ef-code-first, entity-framework-migrations

我们正在使用 TFS，并且我们的 Dev 有不同的分支。

1.  在分支 A 中，我们进行了迁移以更改列大小

2.  在分支 B 中，我们进行了迁移以添加新表。这个分支不知道分支A的修改！！

3.  两个修改都合并到主分支。

当我更新数据库时，它会进行 2 次迁移，但最后告诉我有待处理的更改。如果我进行添加迁移，它会创建与第一次迁移相同的内容（在分支 A 中）。

> 无法更新数据库以匹配当前模型，因为存在待处理的更改并且自动迁移已禁用。将挂起的模型更改写入基于代码的迁移或启用自动迁移。将 DbMigrationsConfiguration.AutomaticMigrationsEnabled 设置为 true 以启用自动迁移。您可以使用 Add-Migration 命令将挂起的模型更改写入基于代码的迁移。

是否因为我上次迁移的属性 Target de IMigrationMetadata 的内容中缺少某些内容，因为它不知道第一次迁移？

是否可以在不同的 TFS 分支中处理迁移？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-01T06:50:40.107

EF 迁移步骤包含一个元数据文件，该文件具有模型签名，该签名是迁移步骤的结果。合并时的问题是在分支 B 中完成的迁移的签名不包括在分支 A 中的迁移中完成的内容。只要迁移在分支中，这是正确的。合并时会出错。

为了解决这个问题，您必须重新生成后者迁移的元数据

```
add-migration MyMigrationName 
```

`add-migration`在没有参数的现有迁移上运行`-force`将仅重新生成元数据。

[我在EF 迁移和](http://coding.abel.nu/2012/02/ef-migrations-and-a-merge-conflict/)我的博客上的合并冲突帖子中写了一个合并场景的深入演练。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-08T14:20:23.953

作为对 Anders Abel 答案的补充，对于那些在尝试重新生成最后一个迁移元数据时遇到问题的人，这会导致 EF 创建一个附加了 1 的单独迁移。

您必须包含完整的日期/时间戳。

例如

如果您之前迁移的文件名是**201701011322_MakeChangesToPotatoTable**

然后，您必须在“添加迁移”命令中正确包含全名。

IE

```
Add-Migration 201701011322_MakeChangesToPotatoTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-02T21:08:14.033

使用 EF 内核，模型的当前状态保存在 ***ModelSnapshot.cs 中。它通常被合并，所以你没有任何事情可做......除非有冲突。

# .net - 我们如何停止在垃圾邮件文件夹中发送邮件（发送超过 30000 封邮件）

> ID：10171660
> 
> 赞同：-4
> 
> 时间：2012-04-16T09:29:35.487
> 
> 标签：.net, email, spam

我正在使用 System.Net.Mail 命名空间在我的网站中发送邮件，但是这些邮件是在垃圾邮件文件夹中接收的，我不想将它们接收到垃圾邮件文件夹中。我应该怎么做才能阻止它们进入垃圾邮件文件夹，我想将它们接收到收件箱中。

注意：- 发送 30000 封电子邮件后，邮件是垃圾邮件。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:32:12.670

您无法控制其他客户端 PC 上的垃圾邮件过滤器。如果这是可能的，垃圾邮件过滤器将毫无用处，我们将被淹没在垃圾邮件的海洋中。

为了阻止它进入垃圾邮件过滤器，我会停止发送垃圾邮件。

在相关说明中：

[.NET System.Net.Mail 消息总是在内部服务器上被标记为垃圾邮件](https://stackoverflow.com/questions/2907644/net-system-net-mail-messages-are-always-being-flagged-junk-on-internal-server)

# iphone - 等待函数返回值

> ID：10171663
> 
> 赞同：-1
> 
> 时间：2012-04-16T09:29:42.893
> 
> 标签：iphone, objective-c

在我的应用程序中，我需要调用一个函数，该函数又调用许多函数。问题是我调用了这个`getweather`函数，它开始了`startprocess`，然后这个过程完成了。该`processCompleted`方法由 调用，`rssparser`并且该值在方法结束时可用`processCompleted`。

```
-(void) getWeather: (NSDictionary *) dictionary {
    _rssParser = [[BlogRssParser alloc]init];
    self.rssParser.address = addressInterestedIn;
    self.rssParser.delegate = self;
    [[self rssParser]startProcess];
}

//Delegate method for blog parser will get fired when the process is completed

-(void)processCompleted
{
    NSLog(@"the rssItems array is %@", [[[self rssParser]rssItems] description]);
    int woeid = [[[[self rssParser] rssItems] objectAtIndex:0] intValue];
    // get weather update from yahoo
    NSLog(@"temperature option %d", [[[NSUserDefaults standardUserDefaults] objectForKey:@"temperature"] intValue]);
    SCYahooWeatherParser *parser = [[SCYahooWeatherParser alloc] initWithWOEID:woeid weatherUnit: [[[NSUserDefaults standardUserDefaults] objectForKey:@"temperature"] intValue]];
    //parse the returned xml from yahoo
    SCWeather *result = [parser parse];
    [parser release];
    NSLog(@"the conditionDataDict is %@", [result.conditionDataDict description]);
} 
```

我如何获取`processCompleted`方法返回的值，因为我已经调用了`getWeather`函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:35:17.670

在 Objective c 中，就像在任何结构化语言中一样，当您调用一个返回值的函数时

```
NSInteger x = [self yourFunction];
[self somethingElse:x]; 
```

直到函数返回一个值，下一条指令才会执行。换句话说，somethingElse 在 yourFunction 结束并返回 x 值之前不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:35:56.790

您可以使用以下方法，并将 waitUntilDone 传递为 Yes。它将等待您的功能完成-

```
performSelectorOnMainThread:withObject:waitUntilDone: 
```

还有更多可用的方法，您可以参考 NSObject 类 - [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:41:59.023

如果在主线程中调用您的函数链，您的应用程序应自动等待进程结束，然后再继续执行下一个操作。然后，你不需要做任何事情来实现你的目标。

请注意，如果您的进程非常繁重，您的应用程序将一直冻结到最后。这是一个很好的自定义执行进程，可以在另一个线程中阻止您的应用程序。

# android - 如何在自身完成后重复 AsyncTask

> ID：10171669
> 
> 赞同：0
> 
> 时间：2012-04-16T09:30:11.910
> 
> 标签：android, android-asynctask

我正在使用类扩展 Asynctask 来从 web 服务下载数据。为了防止数据丢失和请求超时，我尝试重复异步任务并每 100 行读取一次数据。但是循环错误并且永远不会运行任务：

**重复任务的功能：**

```
public void executeCustomer(String vSpvId){
    String vURL;
    int vloop = 1;

    while(notStop){
       vURL = Routines.URL_CUSTOMER + "?vloop=" + String.ValueOf(vLoop) + "&vsupvid=" + vSpvId;
       Log.d(TAG, vURL);
       vCustomerAsyncTask = new CustomerAsyncTask();
       vCustomerAsyncTask.execute(vURL);
    vloop++;
    }
} 
```

**下载数据的任务：**

```
private class CustomerAsyncTask extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {
        showProgressBar(Routines.WAIT);
    }

    @Override
    protected String doInBackground(String... vURL) {
        String vASPXText = Routines.getASPXText(vURL[0]);
        return vASPXText;
    }

    @Override
    protected void onPostExecute(String vASPXResult) {
        super.onPostExecute(vASPXResult);

        try{
            if((vASPXResult.length() == 0)||(vASPXResult.contains("masalah"))){
                vDialogBox.dismiss();
                Toast.makeText(getApplicationContext(), Routines.DATABASE_ERROR, Toast.LENGTH_SHORT).show();
                throw new NullPointerException(Routines.DATABASE_ERROR);                
            }
        }catch(NullPointerException e){
            e.printStackTrace();
            Log.w(TAG, Routines.DATABASE_ERROR);
            vDialogBox.dismiss();
            showDialogBox(Routines.WARNING, Routines.DATABASE_ERROR);
            return;
        }
        vDialogBox.dismiss();

        notStop = parsingCustomer(vASPXResult);
    }
} 
```

**解析数据的函数：**

```
private boolean parsingCustomer(String vASPXResult){    
    try{
        Log.d(TAG, vASPXResult);
        if(vASPXResult.indexOf("C@`") == 0){
            // function to parse data
            // return true to read next data from webservice
            return = true;
        }else if (vASPXResult.indexOf("F@`") == 0){
            // function to parse data
            // return false to stop read data from webservice
            return = false;
        }
    }catch (StringIndexOutOfBoundsException e) {
        e.printStackTrace();
        Log.e(TAG, Routines.DATABASE_ERROR);
        showDialogBox(Routines.WARNING, Routines.DATABASE_ERROR);
    }   
} 
```

我的问题是如何在完成下载第一个数据时重复 asynctask，然后自行重复执行下一个 URL 参数。当我签入 logcat 时，循环始终运行，但任务从未完成。那么，如何使它可以运行但重复异步任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:33:12.927

保留一个静态计数器并调用 AsyncTAsk

像这样

```
if(counter<desiredCount){

 vURL = Routines.URL_CUSTOMER + "?vloop=" + String.ValueOf(vLoop) + "&vsupvid=" + vSpvId;
       Log.d(TAG, vURL);
       vCustomerAsyncTask = new CustomerAsyncTask();
       vCustomerAsyncTask.execute(vURL);
} 
```

在 AsyncTask 的`post excecute`.. 你目前所做的可能行不通，因为你在另一个 AsyncTask 完成之前就开始了一个 AsyncTask ......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:41:12.427

我们不能执行 AsyncTask 两次或更多次。所以，每次我们只在本地创建实例。比如`new MyTask().execute(url).`避免异步任务实例的全局声明。[另一件事是我们可以使用Loader](http://developer.android.com/guide/topics/fundamentals/loaders.html)类多次执行异步任务，它也具有向后兼容性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:41:41.700

用于再次调用它，就像回归形式 `name.excuteTask()'

# android - Android - 实现自定义计时器/时钟

> ID：10171670
> 
> 赞同：1
> 
> 时间：2012-04-16T09:30:13.400
> 
> 标签：android, timer, android-asynctask, clock

我有一个 android 应用程序，用户按下开始按钮并启动一些收集数据的功能。我有一个自定义的 EditText，它显示了所有这个过程所花费的时间，并且每秒更新一次，直到用户按下停止。我使用如下所示的 AsyncTask 实现了这一点：

```
 protected class RecTimer extends AsyncTask<Context, Integer, String> 
    {
                @Override
                protected String doInBackground( Context... params ) 
                {
                         int sec=00;
                     int min=00;
                     int hours=00;
                     timerdata=timer.split(":");
                     hours=Integer.parseInt(timerdata[0]);
                     min=Integer.parseInt(timerdata[1]);
                     sec=Integer.parseInt(timerdata[2]);

                        while(Recording==true) 
                        {
                            try{

                                        Thread.sleep( 1000 );
                                        publishProgress( sec , min , hours );
                                        sec++;

                                        if(sec==60){

                                            min++;
                                            sec=0;

                                            if(min==60){
                                                hours++;
                                                min=0;
                                            }
                                        }
                                } catch( Exception e ){
                                        Log.i("makemachine", e.getMessage() );
                                }
                        }
                        return "COMPLETE!";
                }

                @Override
                protected void onPreExecute() 
                {
                        Log.i( "makemachine", "onPreExecute()" );
                        super.onPreExecute();                   
                }

                @Override
                protected void onProgressUpdate(Integer... values) 
                {
                        super.onProgressUpdate(values);
                        //Log.i( "makemachine", "onProgressUpdate(): " +  String.valueOf( values[0] ) );

                        String format = String.format("%%0%dd", 2);
                        String Sec = String.format(format, values[0]);
                        String Min = String.format(format, values[1]);
                        String Hours = String.format(format, values[2]);

                        ((EditText) findViewById(R.id.duration1)).setText(Hours + ":"+ Min + ":" + Sec);

                }

                @Override
                protected void onPostExecute( String result ) 
                {      
                        super.onPostExecute(result);
                        Log.i( "makemachine", "onPostExecute(): " + result );

               }          
        } 
```

起初它似乎工作得很好，但现在我发现如果应用程序处于空闲状态并且失焦，计时器可能并不总是很好。我的意思是我离开设备 15 分钟，然后看到在我的“时钟”中只有 5 分钟过去了。由于视图重新聚焦，一切似乎都再次正常工作。

首先为什么会发生这种情况？AsyncTask 不应该总是在后台执行吗？我应该使用其他更好的方法来实现这一点吗？

提前感谢大家！

编辑：感谢 TrackRuler 我这样实现它：

私人可运行计时器=新可运行（）{

```
 public void run() {
           long current = SystemClock.uptimeMillis();
               String format = String.format("%%0%dd", 2);
               timerdata=timer.split(":");
               sec++;

               if(sec==60){

                   min++;
                   sec=0;

                   if(min==60){
                       hours++;
                       min=0;
                   }
               }

               String Sec = String.format(format, sec);
               String Min = String.format(format, min);
               String Hours = String.format(format, hours);

               ((EditText) findViewById(R.id.duration1)).setText(Hours + ":"+ Min + ":" + Sec);

                   TimerHandler.postAtTime(this,
                          current +  1000);
                    }                       
            }; 
```

从我的主代码中，我从处理程序中调用它： TimerHandler.post(Timer);

它现在可以工作了。我只是想知道在更新 Runnable 中的视图时是否有问题（？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:37:56.193

基本上 AsyncTask 将在 while 完成时结束。它不会等待您的睡眠电话。

您可能必须实现`Runnable`接口并在“可运行”中执行您需要的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:23:49.000

我已经实现的是这样的，

```
protected class RecTimer extends AsyncTask<Context, Integer, String> 
    {
                @Override
                protected String doInBackground( Context... params ) 
                {
                   //ToDO........
                     new Thread(new Timer(CurrentActivity.this)).start();
                   //ToDO........
                }

                @Override
                protected void onPreExecute() 
                {
                   //ToDO........     
                }

                @Override
                protected void onProgressUpdate(Integer... values) 
                {
                    //ToDO........   
                }

                @Override
                protected void onPostExecute( String result ) 
                {      
                    //ToDO........
               }          
        } 
```

我认为这对数据库更新更好。但是对于 UI 更新，检查它是否影响 UI 线程。现在这对你有用，等待大师回答这个问题。以及我会尽力帮助你...

# ruby-on-rails - 如何访问默认的 Rails sqlite db？

> ID：10171673
> 
> 赞同：59
> 
> 时间：2012-04-16T09:30:27.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, aptana

我想在使用 Rails 开发时查看我的数据库中的数据（实际上在所有 3 个开发、测试和生产中）。我没有碰过配置，所以应该很容易，但我找不到任何可用的信息。

我不知道连接字符串可能是什么或在哪里输入它，因为 Aptana (v.3) 似乎缺少我从 Eclipse 知道的良好的旧数据源浏览器视图。有人能指出我正确的方向吗？

编辑：我正在使用 linux - Mint 12

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-16T09:51:15.913

您忽略了提及您正在使用的操作系统。

一种方法是`sqlite3`在终端中使用该命令。

```
sqlite3 db/development.sqlite3 
```

但是，对于检查行之类的事情，最好使用 rails 控制台。

```
rails c
> User.all # Where user is your model. 
```

**注意：**不要直接通过 sqlite3 更改您的数据库架构，如果您来自不同的 Web 堆栈背景，您可能会习惯这样做。这是因为下次运行迁移时，状态将与 rails 预期的不同。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2012-04-16T10:21:06.883

Rails 3 提供了一个通用命令来访问正确的数据库客户端，并为您当前的环境传入正确数据库的名称。该命令`rails dbconsole`可以缩短为`rails db`

```
$ rails db
SQLite version 3.6.12
Enter ".help" for instructions
Enter SQL statements terminated with a ";"
sqlite> 
```

这个命令并没有提供比 Gazler 的答案更多的东西，事实上他使用控制台的建议是很好的建议，但是这种方法的好处是，如果您的数据库在其他环境中不同，它将使用正确的客户端。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-07-25T16:55:17.947

采用

```
SQLite> .tables 
```

这将为您提供所选数据库中存在的所有表的列表

@@激活控制台

```
SQLite> rails dbconsole 
```

@@显示表格

```
SQLite>.tables 
```

@@ 显示表中的所有行

```
SQLite> select * from posts 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-08-30T07:54:17.640

有一个很棒的应用程序可以浏览 sqlite3 数据库。[SQLite 数据库浏览器](http://sqlitebrowser.org/)。

PS您提到您正在使用Aptana studio。我也用这个 IDE 开始了我的 RoR 学习，但后来发现了[Sublime Text](http://www.sublimetext.com/)，从此再也不想使用其他任何东西，我建议你检查一下。

干杯

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-08-08T04:58:51.890

为了查看数据库上的数据，我使用了一个名为 DB Browser for SQLite 的 SQLite 客户端，[这里是链接](https://sqlitebrowser.org/dl/)

这个应用程序也有一个 Linux 版本。应用程序目录上应该有一个`sqlite`扩展名的数据库文件`db`。在 DB Browser 上，选择 Open Database 选项并选择该文件，您应该能够查看数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-01T16:34:54.967

如果您使用`activeadmin`.

只需添加 gem [activeadmin-sqlpage](https://github.com/oklas/activeadmin-sqlpage)：

```
gem 'activeadmin-sqlpage' 
```

并创建 activeadmin 页面：

```
# file app/admin/sql.rb
ActiveAdmin::SqlPage::register 
```

重新启动您的服务器。然后转到管理面板并导航菜单`SQL`。输入任何 sql 命令并按`Ctrl+Enter`或`Submit`按钮。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-27T04:28:27.783

打开终端并输入此命令。这将打开一个 Rails 控制台来查询数据库。

```
rails c 
```

要获取所有模型的列表，您可以使用以下命令

```
ActiveRecord::Base.connection.tables 
```

> 例如：["schema_migrations", "ar_internal_metadata", "categories", "items"]

从模型列表中，您可以获得第一条、最后一条或所有记录。

```
Category.all 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-07-28T11:37:33.590

如果您使用的是 RubyMine IDE，则可以从那里访问 sqllite 数据源。您可以使用 GUI 在数据库中运行查询或编辑数据。

# tfs - TFS 中的级联分支或：如何分支到分支？

> ID：10171676
> 
> 赞同：0
> 
> 时间：2012-04-16T09:30:36.847
> 
> 标签：tfs, branch, branching-and-merging

为了使引用的程序集可用于 TFSBUILD 流程，我们为这些程序设置了一个单独的团队项目。我们将程序集分支到每个团队项目中，并使用需要它们的解决方案（以下称为***目标***）。据我所知，这是一种通常的做法

现在我们已经到了这种平原不起作用的地步。假设目标本身是分支的，TFS 将不允许我们在这里创建我们的程序集的分支。

虽然我可以以某种方式看到分支内的分支可能存在问题，但我真的想知道为什么不支持类似的操作。我们不是唯一有这种要求的人，不是吗？

我想到的第一件事是：将程序集分支到目标分支范围之外的某个地方。

```
Target
    |__Br1
    |__Br2
    |__Assemblies 
```

然而，如果分支需要相同程序集的不同版本（如 `Br1:NHibernate 2.1`, `Br2:NHibernate 3.2`），就像产品更新经常做的那样，这也会导致一些丑陋的事情。最终，为了完成这项工作，我必须将`NH2.1`其视为不同的产品......`NH3.2`

有没有人知道一种模式，它使我们能够像我们尝试的那样进行分支，但取得更多的成功和更少的痛苦？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T12:54:35.967

处理这个问题总是有两种方法：

1.  分支内的文件夹（这是建议的最佳方法，您可以在项目文件中使用 -tags 来引用每个分支内程序集的特定位置。这意味着，每个分支都有自己的程序集副本。
2.  Team-Project 中的文件夹（如您所做的那样） - 您也可以使用，但您不能在不同的分支中处理不同的 3rd-party-tool-versions。

所以我知道，解决方案对你来说不会是无痛的，但在我看来，可能性是有限的。我们在我们的项目中使用第一个变体，但它也取决于您的分支策略。

# c++ - 在 C++ 中排序 OpenCv 轮廓

> ID：10171677
> 
> 赞同：1
> 
> 时间：2012-04-16T09:30:44.740
> 
> 标签：c++, sorting, opencv, contour

我用 findContours 从二进制图像中找到了轮廓，将它们放在二维向量中。这就是我所做的：

```
vector<vector<Point>> contours;
findContours(image,contours,CV_RETR_EXTERNAL,CV_CHAIN_APPROX_NONE); 
```

现在我想将它们从大到小排序：我该如何处理？谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:07:27.727

看来您必须使用[cvContourArea](http://www710.univ-lyon1.fr/~bouakaz/OpenCV-0.9.5/docs/ref/OpenCVRef_StructAnalysis.htm#decl_cvContourArea)来计算每个轮廓的面积，然后使用任何[排序算法](http://en.wikipedia.org/wiki/Sorting_algorithm)对它们进行排序。

祝你好运！

# ant - 如何为项目的所有 build.xml 文件制作 Ant 属性文件

> ID：10171680
> 
> 赞同：0
> 
> 时间：2012-04-16T09:31:01.897
> 
> 标签：ant, build

我想为所有项目的所有 build.xml 文件保存全局设置

在我的项目中，每个项目都有自己的 build.xml 文件和一个全局 build.xml 来调用所有文件

文件目录路径正在更改，而项目移动另一个地方。

所以我想制作一个包含所有路径设置的文件

请添加一些好的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:39:47.440

您可以使用

```
${basedir} 
```

财产。
此属性包含从中调用 build.xml 的目录。

# java - 提取括号之间的单词

> ID：10171683
> 
> 赞同：0
> 
> 时间：2012-04-16T09:31:13.657
> 
> 标签：java, regex, string, extract

我正在尝试解决一个相当简单的问题，但不能完全弄清楚如何正确使用正则表达式。我想从（括号）之间的文本文件中提取任何单词。这是我正在进行的尝试。任何朝着正确方向的推动都将不胜感激！

```
public class Reader {

    public static void main(String[] args) {
        List<String> matchList = new ArrayList<String>();
        Pattern regex = Pattern.compile("\\{([^}]*)\\}");

        try{
            BufferedReader bufferedReader = new BufferedReader(new FileReader("test2.txt"));

            while(bufferedReader.readLine()!=null)
            {
                String parseMe = bufferedReader.readLine();

                Matcher regexMatcher = regex.matcher(parseMe);

                while (regexMatcher.find()) 
                {
                    matchList.add(regexMatcher.group());
                } 
            }
            System.out.println(matchList);
        }catch(IOException e){};
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:38:19.690

您正在跳过每一行。每行读一次。

```
String parseMe;
while((parseMe = bufferedReader.readLine()) != null) {
    Matcher regexMatcher = regex.matcher(parseMe); 
```

我会删除 try/catch 块，因为它没有做任何有用的事情。你可以用 main`thorws IOException`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:38:40.493

正则表达式字符串应该（至少）是`"[({\\[].*?[\\]})]"`外部方括号是正则表达式语法 - 您正在定义要查找的*字符类*。它并不完美，在 Java 正则表达式中不可能有一个完全正确的解决方案（你不能考虑嵌套括号）。但是有一个开始:) 顺便说一句，您可能会发现使用 Eclipse Find 试验正则表达式很有用。它甚至有一个很棒的内容辅助。

# salesforce - 通过 sftp 在 Salesforce 和另一台服务器之间上传/下载文件

> ID：10171687
> 
> 赞同：1
> 
> 时间：2012-04-16T09:31:36.593
> 
> 标签：salesforce, sftp, apex-code, visualforce

我是销售人员应用程序的新手。我正在使用 Apex。我的要求是通过 sftp 在 salesforce 和我们的服务器之间上传/下载文件。Salesforce 是否有任何 sftp 客户端，或者我该怎么做？任何想法/链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:58:17.963

Salesforce 仅支持 http(s) 进行连接，不支持 sftp。

# php - 在 n 层架构中插入 ACL/ACE 的最佳位置（和时间）

> ID：10171689
> 
> 赞同：1
> 
> 时间：2012-04-16T09:31:41.040
> 
> 标签：php, security, acl, n-tier-architecture, event-driven-design

由于我们需要在可扩展的 Web 架构中分离所有流程，特别是在事件驱动设计（同步和异步作业）中，我想知道插入 ACE 的最佳位置（也是最佳时间）在哪里。

我的第一个“幼稚”举措是将它们插入到创建相关对象的同一服务方法中。

它会是这样的：

```
class AlbumManager
{
    public function createAlbum(Album $album)
    {        
        $this->albumRepository->save($album);

        $this->permissionManager->grantPrivileges($album->getUser(), $album, MaskBuilder::MASK_OWNER);

        $event = new AlbumEvent($album);
        $this->dispatcher->dispatch(AlbumEvents::CREATE, $event);
    }
} 
```

但是，那是正确的地方吗？由于其他东西是在委托同步或异步工作的事件侦听器中处理的（离线队列），为什么不对 ACE 做同样的事情呢？

通常，在应用程序中，您始终确定需要立即完成的操作，以及可以（必须）离线完成的操作（队列）。

安全的东西在哪里？;-)

谢谢再见。

本杰明。

# python - 如何避免使用 python 编码的 oom 杀手

> ID：10171690
> 
> 赞同：0
> 
> 时间：2012-04-16T09:31:41.440
> 
> 标签：python, out-of-memory

我用python写了一个爬虫编码，但是经常导致oomkiller，oomkiller让linux死机，我无法通过ssh连接到os。我还写了一个脚本来保护内存，如果内存
使用超过80% [memusage = (MemTotal - MeMFree - Buffers - Cached)/MeMTotal]，重启爬虫。但这似乎行不通。所以我的问题是如何避免 oom Killer，即使 oom Killer 发生，有什么方法可以避免冻结整个操作系统？

当 oom-killer 发生时，屏幕会打印以下信息，谁能向我解释这些信息？

```
ve:okB present:16256kB Pages_scanned:173280531 all_unreclaimable? yes
[9132.468227] lowmem_reserve[]: 0  829  829  829
[9132.468403]Normal free:3628kB  min:3648kB  low:4568kB  high:5472kB  active:614280kB  inactive:22508kB  present:849376kB  pages_scanned:1415839762 all_unreclaimable? yes
[9132.468713] lowmem_reserve[]: 0  0  0  0
[9132.468883]DMA: 0.4kB  1.8kB  1*16kB  1,32kB  0*64kB  0*128kB  1*256kB  0*512kB  1*1024kB  1*2048kB  0*4096kB = 3384kB
[9132.469286]Normal:7.4kB 5*8kB 0*16kB 1*32kB 1*64kB 1*128kB 1*256kB 0*512kB 1*1024kB 1*2048kB 0*4096kB = 3620kB
[9132.469674]Swap cache:add 0, delete 0, find 0/0, race 0+0
[9132.469825]Frees swap = 0kB
[9132.469905]Total swap = 0kB
[9132.469986]Free swap:        0kB
[9132.472289]218112 pages of RAM
[9132.472386]0 pages of HIGHMEM
[9132.472469]44668 reserved pages
[9132.472553]5732 pages shared
[9132.472634]0 pages swap cached
[9132.472760]0 pages dirty
[9132.472837]0 pages writeback
[9132.472919]874 pages mapped
[9132.472999]3343 pages slab
[9132.473082]392 pages pagetables 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:46:09.810

据我了解，您没有交换分区或禁用它，请尝试添加交换。没有交换，它无法从内存中驱逐脏页，系统可能会冻结。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:41:10.617

OOM 杀手对我来说是 unix 中最奇怪的部分之一，似乎从来没有使用所有内存来追踪进程。

解决方案是不要让你的 python 进程消耗太多内存。您可以通过安装更多内存来暂时缓解此问题。

但是，长期的解决方案是编写爬虫，这样它就不会吃掉所有的内存。

在没有看到您的代码的情况下，我们只能猜测所有内存的去向。

# jquery - 使用 jQuery TreeView 插件时如何触发链接？

> ID：10171694
> 
> 赞同：0
> 
> 时间：2012-04-16T09:31:59.493
> 
> 标签：jquery, hyperlink, treeview

我有一个使用 jQuery 树视图插件创建树视图的 JSP 页面。现在我想让单个文件可选择，这意味着我想在单击文件时打开一个 url。我尝试了几个示例，但没有一个有效。这是一个示例 html 页面：

```
<ul id="browser" class="filetree">
    <li><span class="folder">Folder 1</span>
        <ul>
            <li><span class="file">Item 1.1</span></li>
        </ul>
    </li>
    <li><span class="folder">Folder 2</span>
        <ul>
            <li><span class="folder">Subfolder 2.1</span>
                <ul id="folder21">
                    <li><span class="file">File 2.1.1</span></li>
                    <li><span class="file">File 2.1.2</span></li>
                </ul>
            </li>
            <li><span class="file">File 2.2</span></li>
        </ul>
    </li>
    <li class="closed"><span class="folder">Folder 3 (closed at start)</span>
        <ul>
            <li><span class="file">File 3.1</span></li>
        </ul>
    </li>
    <li><span class="file">File 4</span></li>
</ul> 
```

JavaScript：

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#browser").treeview({
            toggle: function() {
                console.log("%s was toggled.", $(this).find(">span").text());
                alert("do something");
            }
        });

        // fourth example
        $("#black, #gray").treeview({
            control: "#treecontrol",
            persist: "cookie",
            //cookieId: "treeview-black"
        });
    });
</script> 
```

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:04:40.153

Hiya**演示**在这里:) [http://jsfiddle.net/yeMy9/1/](http://jsfiddle.net/yeMy9/1/) **&&** [http://jsfiddle.net/yeMy9/2/](http://jsfiddle.net/yeMy9/2/)（仅在您单击项目而不是文件夹时触发。或 [http://jsfiddle.net/ yeMy9/3/](http://jsfiddle.net/yeMy9/3/)

现在，当您单击文件夹内的项目（如 Item 1.1 等）时，我已发出警报……您可以使用条件语句来决定将其转发到何处。

干杯，我相信这会有所帮助！

**jQuery代码**

```
 $(document).ready(function(){
        $("#browser").treeview({
            toggle: function() {
                console.log("%s was toggled.", $(this).find(">span").text());
                alert("do something");

            }
        });

      $("li span").click(function(){
          alert(' Forward the url when clicked => ' + $(this).text());
          //Now forward to the link according to the text() i.e. based
          // on Item 1.1 & 2.2 etc...
      });

        // fourth example
        $("#black, #gray").treeview({
            control: "#treecontrol",
            persist: "cookie",
            //cookieId: "treeview-black"
        });
    });​ 
```

**HTML**

```
<ul id="browser" class="filetree">
    <li><span class="folder">Folder 1</span>
        <ul>
            <li><span class="file">Item 1.1</span></li>
        </ul>
    </li>
    <li><span class="folder">Folder 2</span>
        <ul>
            <li><span class="folder">Subfolder 2.1</span>
                <ul id="folder21">
                    <li><span class="file">File 2.1.1</span></li>
                    <li><span class="file">File 2.1.2</span></li>
                </ul>
            </li>
            <li><span class="file">File 2.2</span></li>
        </ul>
    </li>
    <li class="closed"><span class="folder">Folder 3 (closed at start)</span>
        <ul>
            <li><span class="file">File 3.1</span></li>
        </ul>
    </li>
    <li><span class="file">File 4</span></li>
</ul>​ 
```

# c# - 如何制作一个派生方法，它采用与 C# 中的覆盖函数不同的参数？

> ID：10171697
> 
> 赞同：1
> 
> 时间：2012-04-16T09:32:07.373
> 
> 标签：c#

我有一堂课，是这样的：

```
class BaseClass
{
  protected int X;
  virtual void ChangeParameters(int NewX)
  {
    this.X = newX;
  }
}

class DerivedClass1 : BaseClass
{
  private int a;
  private int b;
}

class DerivedClass2 : BaseClass
{
  private int a;
} 
```

当我想在派生类中覆盖 ChangeParameters() 函数时，问题就来了，因为它们中的每一个都可以有不同数量的参数。

那么问题来了——我怎样才能创建一个虚函数，它可以在派生类中改变参数数量？

PS。我不想使用 params 关键字，因为我更希望类的用户确切地知道他必须传递给函数的参数数量。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:33:54.770

你不能。如果是`override`，则签名**必须**完全匹配。如果你想要不同的参数，它听起来不像`override`- 毕竟......调用者如何调用它，只知道基本类型？（替代校长等）

```
BaseClass obj = GetSomeConcreteObject(); // actually a DerievedClass2
obj.ChangeParameters({what would go here?}); 
```

在我看来，这些只是独立的方法。您*可以*有一个`virtual`采用数组（带或不带`params`）的方法，但随后您需要接受调用者可以提供任何大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:34:26.690

那是不可能的。

根据定义，覆盖必须保持与原始方法相同的名称和参数集（也称为签名）。

如果您使用不同的参数，运行时应该如何将您的“覆盖”绑定到超类上的方法调用？想象一下这是可能的：

```
class A
{
    virtual void Foo(int i) { Console.WriteLine(i); }
}

class B : A
{
    override void Foo(int i, int j) { Console.WriteLine(i + j); }
}

// somewhere else

void DoSomething(A a)
{
    a.Foo(1);
}

// later

DoSomething(new B()); // how will b.Foo get called inside DoSomething? 
```

如果你改变参数，你得到的只是过载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:48:04.050

有趣的技巧也可以使用可选参数来完成，如下所示：

```
public class Base
{
     public virtual void DoSomething(string param="Hello", string param1 = "Bye") 
     {

    Console.WriteLine(string.Format("prm: {0}, prm1: {1}", param, param1));
     }
}

public class Derived  : Base
{
    public override void  DoSomething(string param="Ciao", string param1="Ciao")
    {
          Console.WriteLine(string.Format("prm: {0}, prm1: {1}", param, param1));
    }
} 
```

所以你可以在如下代码中使用：

```
Base a = new Derived();
a.DoSomething(); 
```

输出是：

```
prm: Hello, prm1: Bye 
```

但你现在可以这样：

```
Base a = new Derived();
a.DoSomething("Ciao"); 
```

并像这样输出：

```
prm: Ciao, prm1: Bye //!! 
```

# .htaccess - htaccess 基于 url 的重定向

> ID：10171698
> 
> 赞同：2
> 
> 时间：2012-04-16T09:32:08.183
> 
> 标签：.htaccess, redirect

如何编写基于的htaccess规则

```
http://mysite.com/http://google.com    -> http://google.com

http://mysite.com/http://facebook.com  -> http://facebook.com 
```

应该使用 302 重定向到该 url（主文件 index.php 除外），所以实际的引用者将被隐藏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:27:15.937

将此代码放在 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+(https?://[^\s]+) [NC]
RewriteRule ^ %1 [R,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:44:05.790

如果我假设您的所有链接都以协议开头，那么以下内容将起作用：-

```
RewriteEngine On
RewriteBase /

RewriteRule ^(https?)://(.*)$      $1://$2 [NC,L,R=302] 
```

# jakarta-ee - 网页.xml。用户认证成功后立即调用过滤器或侦听器

> ID：10171699
> 
> 赞同：0
> 
> 时间：2012-04-16T09:32:12.657
> 
> 标签：jakarta-ee

我有一个 Java EE facelets web 应用程序，具有基于表单的身份验证。

我需要在用户成功验证后立即调用过滤器或侦听器。我目前添加了一个过滤器，但它总是被调用（在用户进行身份验证的 http 请求中，以及之后在用户仍然通过身份验证的每个其他 http 请求中）。

如何告诉应用程序服务器仅在用户成功通过身份验证的 http 请求时调用我的过滤器？

```
 <filter>
    <filter-name>successfullLoginFilter</filter-name>
    <filter-class>com.example.SuccessfullLoginFilter</filter-class>
  </filter>

  <filter-mapping>
    <filter-name>successfullLoginFilter</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <login-config>
    <auth-method>FORM</auth-method>
    <form-login-config>
      <form-login-page>/authentication.jsp</form-login-page>
      <form-error-page>/login.failed</form-error-page>
    </form-login-config>
  </login-config> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T11:46:40.683

需要做两件事： 1\. 在调用其他过滤器之后编写代码。这样，它会在响应后做出反应。2\. 你有一个 /* 的 url-pattern 暗示它会一直被调用。如果您有用于身份验证的 url 模式，那么它只会在与该模式一致的 url 之后被调用。如果您有一个成功登录的新模式，那么它会更容易，因为您可以将其用作 url-pattern 定义。

# ios - 如何在IOS中获取加速度计数据？

> ID：10171704
> 
> 赞同：11
> 
> 时间：2012-04-16T09:32:32.610
> 
> 标签：ios, accelerometer, uiaccelerometer

我正在使用该`UIAccelerotmeterDelegate`方法[`accelerometer:didAccelerate:`](https://developer.apple.com/documentation/uikit/uiaccelerometerdelegate/1620653-accelerometer)，但最近该方法在 iOS 5.0 中已被弃用。那么获取加速度计数据的替代方法是什么？文档没有提到我们应该使用的替代方案。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-16T09:46:35.957

您应该使用[Core Motion 框架](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CoreMotion_Reference/_index.html)（在 iOS 4.0 中引入）作为替代。创建一个实例`CMMotionManager`并告诉它`startAccelerometerUpdatesToQueue:withHandler:`，传递给它一个`NSOperationQueue`和一个块，当有新的加速度计数据可用时，它将在指定的队列上执行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-16T09:45:29.833

UIAccelerometer 和 UIAccelerometerDelegate 似乎被 CoreMotion 框架取代了。

你可以在这里找到答案：

[为什么加速计：didAccelerate：在 IOS5 中已弃用？](https://stackoverflow.com/questions/6742531/why-is-accelerometerdidaccelerate-deprecated-in-ios5)

我希望它有帮助。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-14T23:59:47.870

[这是我从这个](http://www.ioscreator.com/tutorials/read-values-of-the-accelerometer)链接中为 CoreMotion 找到的一个有用的示例代码。

```
 @interface ViewController ()

    @property (nonatomic, strong) CMMotionManager *motionManager; 
    @property (nonatomic, strong) IBOutlet UILabel *xAxis; 
    @property (nonatomic, strong) IBOutlet UILabel *yAxis; 
    @property (nonatomic, strong) IBOutlet UILabel *zAxis; 

    @end

    @implementation ViewController
    - (void)viewDidLoad 
    { 
      [super viewDidLoad];

      self.motionManager = [[CMMotionManager alloc] init]; 
      self.motionManager.accelerometerUpdateInterval = 1;

      if ([self.motionManager isAccelerometerAvailable]) 
      { 
        NSOperationQueue *queue = [[NSOperationQueue alloc] init];
        [self.motionManager startAccelerometerUpdatesToQueue:queue withHandler:^(CMAccelerometerData *accelerometerData, NSError *error) {
            dispatch_async(dispatch_get_main_queue(), ^{ 
              self.xAxis.text = [NSString stringWithFormat:@"%.2f",accelerometerData.acceleration.x]; 
              self.yAxis.text = [NSString stringWithFormat:@"%.2f",accelerometerData.acceleration.y]; 
              self.zAxis.text = [NSString stringWithFormat:@"%.2f",accelerometerData.acceleration.z];
            });
          }]; 
      } else 
      NSLog(@"not active"); 
    }
@end 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-16T09:48:12.757

将其替换为`CoreMotion`。请参阅[运动事件](https://developer.apple.com/library/ios/documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/motion_event_basics/motion_event_basics.html#//apple_ref/doc/uid/TP40009541-CH6-SW14)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-27T10:17:33.777

首先将 CoreMotion 框架添加到项目中。然后：

```
#import <CoreMotion/CoreMotion.h>

@property (strong, nonatomic) CMMotionManager *motionManager;

- (void)viewDidLoad {
    _motionManager = [CMMotionManager new];
    _motionManager.accelerometerUpdateInterval = 0.01;       // 0.01 = 1s/100 = 100Hz
    if ([_motionManager isAccelerometerAvailable])
    {
        NSOperationQueue *queue = [NSOperationQueue new];
        [_motionManager startAccelerometerUpdatesToQueue:queue withHandler:^(CMAccelerometerData *accelerometerData, NSError *error){
             NSLog(@"X = %0.4f, Y = %.04f, Z = %.04f",
                   accelerometerData.acceleration.x,
                   accelerometerData.acceleration.y,
                   accelerometerData.acceleration.z);
         }];
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-01T13:07:56.863

我正在为 Swift 5.x 回答这个问题。

`@available(iOS, introduced: 2.0, deprecated: 13.0, message: "UIAcceleration has been replaced by the CoreMotion framework") public protocol UIAccelerometerDelegate : NSObjectProtocol { }`

> 仅添加 CoreMotion 框架。不符合 UIAccelerometerDelegate。

```
import CoreMotion 
```

如果要显示动画或创建游戏，可以从以下代码开始。

```
self.motionManager = CMMotionManager()
self.motionManager?.startAccelerometerUpdates()
if motionManager.isAccelerometerAvailable {          
  motionManager.startAccelerometerUpdates(to: .main) { (data, error) in
    if let myData = data {
        let x =  String(format: "%.3f",myData.acceleration.x)
        let y =  String(format: "%.3f",myData.acceleration.y)
        let z =  String(format: "%.3f",myData.acceleration.z)
    DispatchQueue.main.async { 
          var rect = self.anyObject.frame
         let movetoX = rect.origin.x + CGFloat(myData.acceleration.x * stepMoveFactor)
         let movetoY = rect.origin.y - CGFloat(myData.acceleration.y * stepMoveFactor)
         if ( movetoX > 0 && movetoX < SCREEN_WIDTH ) {
            rect.origin.x += CGFloat(myData.acceleration.x * stepMoveFactor)
         }
         if ( movetoY > 1 && movetoY < maxY ) {
           rect.origin.y -= CGFloat(myData.acceleration.y * stepMoveFactor) }
         }
    }
  }
} 
```

> 如果需要，请使用 UIView.animate。此方法启动一组动画以在视图上执行。Animations 参数中的块对象包含用于为一个或多个视图的属性设置动画的代码。

[迅捷](/questions/tagged/swift "显示标记为“迅速”的问题") [ios](/questions/tagged/ios "显示标记为“ios”的问题")

# javascript - JQuery 通过更改属性更改元素的预定义样式在 ie 中不起作用

> ID：10171706
> 
> 赞同：1
> 
> 时间：2012-04-16T09:32:50.643
> 
> 标签：javascript, jquery, css, internet-explorer, css-selectors

我的 css 中有一些基于元素属性的预定义样式。如果我将属性的值更新为也具有预定义样式的新内容，则该样式将应用于 FF 和 Chrome，但不适用于 IE。请参阅示例并在输入字段中输入。

JS：

```
$('input').on('keypress', function(){
    var l = parseInt($(this).attr('level'), 10) + 1;
    $(this).attr('level', l);
}); 
```

CSS：

```
input[level="0"]{background:red;}
input[level="1"]{background:blue;}
input[level="2"]{background:green;}
input[level="3"]{background:black;} 
```

[http://jsfiddle.net/ce6S4/](http://jsfiddle.net/ce6S4/)

任何帮助表示赞赏，谢谢。

编辑：适用于 IE 9 但不适用于 <= 8

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T09:45:16.937

这是一个IE错误。请注意，当您调整窗口大小时，元素会正确呈现。

通过设置类名触发回流：

```
this.className = this.className; // Or .addClass(' '); 
```

## 演示：http: [//jsfiddle.net/ce6S4/6/](http://jsfiddle.net/ce6S4/6/)

```
$('input').on('keypress', function(){
    var l = parseInt($(this).attr('level'), 10) + 1;
    $(this).attr('level', l).addClass(' ');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:38:45.237

[http://jsfiddle.net/ce6S4/3/](http://jsfiddle.net/ce6S4/3/)

尝试这个

```
 $('input').on('keydown', function(){
         var l = parseInt($(this).attr('level'), 10) + 1;
    alert(l); //can be removed.
         $(this).attr('level', l.toString()).hide().show().focus();

});​ 
```

# jquery - Flex Slider - 如何为两个滑块添加相同的控件

> ID：10171709
> 
> 赞同：6
> 
> 时间：2012-04-16T09:32:58.730
> 
> 标签：jquery, wordpress, jquery-plugins, flexslider

我在一个项目中使用[Flex slide](http://www.woothemes.com/flexslider/) r。我需要使用相同的控件控制一页上的两个滑块。

一部分是显示图像的主滑块，第二部分是文本（在这种情况下，它将取自 WP 中的“the_excerpt”）。

基本上，这是我用来在一页上调用两张幻灯片的代码：

```
 $(window).load(function() {
    $('#main-slider').flexslider({
      animation: 'slide',
      controlsContainer: '.flex-container'
    });

    $('#secondary-slider').flexslider();
  }); 
```

现在，我需要将它们“连接”到相同的控件，所以当我单击箭头时，它会滑动/淡出它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-02-07T02:34:39.893

对于 Flexslider 2，您可以使用`sync: "selector"`选项。只需设置其中一个滑块' `controlNav: false`。

```
$(window).load(function() {
    $('#main-slider').flexslider({
        animation: 'slide',
        controlNav: true,
        sync: '#secondary-slider'
    });

    $('#secondary-slider').flexslider({
        controlNav: false
    });
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-16T17:13:15.750

您可以通过放弃 controlsContainer 设置并创建自己的导航来完成您想要做的事情，然后将其链接到两个滑块。这是一个关于如何的想法（请注意它未经测试）

您的标记看起来像这样。注意链接上的 rel 属性——我们将在下面使用它们。另请注意，值从 0 开始 - 这与幻灯片的值匹配（例如，第一张幻灯片是 0，第二张是 1 等）。

```
<a rel="0" class="slide_thumb" href="#">slide link 1</a>
<a rel="1" class="slide_thumb" href="#">slide link 2</a>
<a rel="2" class="slide_thumb" href="#">slide link 3</a>
<a rel="3" class="slide_thumb" href="#">slide link 3</a>

<div id="main-slider" class="flexslider">
<ul class="slides">
    <li>
        <img src="image1.jpg" />
    </li>
    <li>
        <img src="image2.jpg" />
    </li>
    <li>
        <img src="image3.jpg" />
    </li>
    <li>
        <img src="image4.jpg" />
    </li>
</ul>
</div>

<div id="secondary-slider" class="flexslider">
<ul class="slides">
    <li>
        <p>Text 1</p>
    </li>
    <li>
        <p>Text 2</p>
    </li>
    <li>
        <p>Text 3</p>
    </li>
    <li>
        <p>Text 4</p>
    </li>
</ul> 
```

然后你设置了对 flexslider 的调用

```
<script type="text/javascript" charset="utf-8">
jQuery(document).ready(function($) {

$('#main-slider').flexslider({
    animation: "slide",
    slideToStart: 0,
    start: function(slider) {
        $('a.slide_thumb').click(function() {
            $('.flexslider').show();
            var slideTo = $(this).attr("rel")//Grab rel value from link;
            var slideToInt = parseInt(slideTo)//Make sure that this value is an integer;
            if (slider.currentSlide != slideToInt) {
                slider.flexAnimate(slideToInt)//move the slider to the correct slide (Unless the slider is also already showing the slide we want);
            }
        });
    }

});

$('#secondary-slider').flexslider({
    animation: "slide",
    slideToStart: 0,
    start: function(slider) {
        $('a.slide_thumb').click(function() {
            $('.flexslider').show();
            var slideTo = $(this).attr("rel")//Grab rel value from link;
            var slideToInt = parseInt(slideTo)//Make sure that this value is an integer;
            if (slider.currentSlide != slideToInt) {
                slider.flexAnimate(slideToInt)//move the slider to the correct slide (Unless the slider is also already showing the slide we want);
            }
        });
    }

});

});
</script> 
```

基本上，两个滑块都由同一组导航链接控制。认为这应该让您朝着正确的方向前进，但如果您需要任何解释，请大声喊叫。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-20T21:12:45.370

所以，我一直有同样的问题，这可能是一个真正的拖累......但我已经找到了一个简单的快速解决方案。这将适用于父母 flexslider 控制的 1 个孩子或 100 个孩子。适用于所有动作。希望我能说服他们解决这个问题并允许一个 jquery 对象数组用于同步方法。

```
<div id="main-slider" class="flexslider">
  <ul class="slides">
    <li><img src="image1.jpg" /></li>
    <li><img src="image2.jpg" /></li>
    <li><img src="image3.jpg" /></li>
    <li><img src="image4.jpg" /></li>
  </ul>
</div>

<div class="flexslider_children">
  <ul class="slides">
    <li><p>Text 1</p></li>
    <li><p>Text 2</p></li>
    <li><p>Text 3</p></li>
    <li><p>Text 4</p></li>
  </ul>
</div>

<div class="flexslider_children">
  <ul class="slides">
    <li><p>Text 1</p></li>
    <li><p>Text 2</p></li>
    <li><p>Text 3</p></li>
    <li><p>Text 4</p></li>
  </ul>
</div> 
```

然后为您的 javascript 运行它。

```
/** 
* Create the children flexsliders. Must be array of jquery objects with the
* flexslider data. Easiest way is to place selector group in a var.
*/
var children_slides = $('.flexslider_children').flexslider({
  'slideshow': false, // Remove the animations
  'controlNav' : false // Remove the controls
}); 

/** 
* Set up the main flexslider
*/
$('.flexslider').flexslider({
  'pauseOnHover' : true,
  'animationSpeed': 2000,
  'slideshowSpeed': 5000,
  'initDelay': 3000,
  // Call the update_children_slides which itterates through all children slides 
  'before' : function(slider){ // Hijack the flexslider
    update_children_slides(slider.animatingTo);
  }   
}); 

/** 
* Method that updates children slides
* fortunately, since all the children are not animating,
* they will only update if the main flexslider updates. 
*/
function update_children_slides (slide_number){
  // Iterate through the children slides but not past the max
  for (i=0;i<children_slides.length;i++) {
    // Run the animate method on the child slide
    $(children_slides[i]).data('flexslider').flexAnimate(slide_number);
  }   
} 
```

希望这可以帮助！！请注意我添加了这个，因为它与我试图做的非常相似，似乎我不是唯一一个希望在 flexslider 中使用多个同步的人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-18T07:39:57.353

我想确认 MrBandersnatch 的解决方案有效。我将在下面发布我对他的代码所做的修改，以展示他工作的变体。

```
/** 
* Create the children flexsliders. Must be array of jquery objects with the
* flexslider data. Easiest way is to place selector group in a var.
*/
var children_slides = $('.flexslider_children').flexslider({
    slideshow: false, // Remove the animations
    controlNav : false, // Remove the controls
    animationSpeed: 1200,
    itemWidth: 175,
    itemMargin: 20,
    animation: 'linear',
    easing: 'swing',
    animationLoop: false,
    minItems: getGridSize(), // use function to pull in initial value
    maxItems: getGridSize()
}); 

/** 
* Set up the main flexslider
*/
$('#flexslider_index_band_1').flexslider({
    pauseOnHover : true,
    animationSpeed: 1200,
    slideshow: false,
    initDelay: 3000,
    directionNav: true,
    animation: 'linear',
    easing: 'swing',
    animationLoop: false,
    controlsContainer: '.paginated_nav',
    directionNav: true,
    prevText: '',
    nextText: '',
    itemWidth: 175,
    itemMargin: 20,
    sync: '#flexslider_index_band_2',
    minItems: getGridSize(), // use function to pull in initial value
    maxItems: getGridSize(), // use function to pull in initial value
    // Call the update_children_slides which itterates through all children slides 
    before : function(slider){ // Hijack the flexslider
        update_children_slides(slider.animatingTo);
    }   
}); 

/** 
* Method that updates children slides
* fortunately, since all the children are not animating,
* they will only update if the main flexslider updates. 
*/
function update_children_slides (slide_number){
    // Iterate through the children slides but not past the max
    for (i=0;i<children_slides.length;i++) {
    // Run the animate method on the child slide
    $(children_slides[i]).data('flexslider').flexAnimate(slide_number);
    }   
} 
```

});

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-20T18:41:28.127

我发现的一种解决方案是创建您自己的自定义横幅导航。放置它并根据您的喜好设置样式。唯一重要的是有一种针对它的方法。在此示例中，我使用了*slider-next*和*slider-prev* ID 。

```
<ul>
  <li><a id="slider-next" href="#">Next</a></li>
  <li><a id="slider-prev" href="#">Prev</a></li>
</ul> 
```

现在，创建两个 flexer 滑块并将它们放置在您想要的 css 中。我将标题我的主要横幅 .flexslider 和我的标题 .captions。

```
<div class="flexslider">
  <ul class="slides">
    <li><img src="/assets/images/banner-example.png" width="893" height="377"></li>
    <li><img src="/assets/images/banner-example-2.png" width="893" height="377" /></li>
    <li><img src="/assets/images/banner-example-3.png" width="893" height="377" /></li>
    <li><img src="/assets/images/banner-example-4.png" width="893" height="377" /></li>
  </ul>
</div>
<!-- Some other place in the code -->
<div class="captions">
  <ul id="info" class="slides">
    <li>
      <h2>Example Banner 1</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <a href="read-more">Read More</a>
    </li>
    <li>
      <h2>Example Banner 2</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <a href="read-more">Read More</a>
    </li>
    <li>
      <h2>Example Banner 3</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <a href="read-more">Read More</a>
    </li>
    <li>
      <h2>Example Banner 4</h2>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
      <a href="read-more">Read More</a>
    </li>
  </ul>
</div> 
```

现在让简单的魔法让它发挥作用。在您的 javascript 文件中激活两张幻灯片，并在 css 中隐藏横幅和标题的导航控件。这样，您的自定义导航将是唯一可见的控件。然后，只需创建一个函数即可在单击时触发滑块和标题的控制导航。下面的例子。.trigger jQuery 函数就是这里的魔法。在此处查看其文档：http: [//api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
//Load slider after .ready()
$(window).load(function(){

    //Activate Both Banner and Caption slides
    $('.flexslider').flexslider({
        controlNav: false,
    });

    $('.captions').flexslider({
        controlNav: false,
    });

    //Sink Control Navs
    $('#slider-next').click(function(){
        $('.flexslider .flex-next').trigger('click');
        $('.captions .flex-next').trigger('click');
    });

    $('#slider-prev').click(function(){
        $('.flexslider .flex-prev').trigger('click');
        $('.captions .flex-prev').trigger('click');
    })
}); 
```

# ruby - 在 Ruby 中使用“+”文件 IO 模式替换文件中的一行

> ID：10171714
> 
> 赞同：4
> 
> 时间：2012-04-16T09:33:24.267
> 
> 标签：ruby, file, file-io

Ruby初学者在这里！

我知道 Ruby 的 File.open 方法具有某些模式，例如 r,w,a,r+,w+,a+ 和免费的 b。我完全理解 r,w 和 a 模式的使用。但我似乎无法理解如何使用带有“+”符号的那些。谁能提供一些链接，其中有示例以及使用它的解释？

它可以用来读取一行并用等量的内容编辑/替换它吗？如果是这样，那怎么办？

样本数据文件：a.txt

```
aaa
bbb
ccc
ddd 
```

演示.rb

```
file = File.open "a.txt","r+"
file.each do |line|
  line = line.chomp
  if(line=="bbb")then
  file.puts "big"
  end
end
file.close 
```

我正在尝试用“big”替换“bbb”，但我得到了这个：- 在记事本++中

```
aaa
bbb
big

ddd 
```

在记事本中

```
aaa
bbb
bigddd 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T11:18:46.873

从另一个答案中抢夺了这个文档，所以不是我的，解决方案是我的

```
r  Read-only mode. The file pointer is placed at the beginning of the file. This is the default mode. 
r+ Read-write mode. The file pointer will be at the beginning of the file. 
w  Write-only mode. Overwrites the file if the file exists. If the file does not exist, creates a new file for writing. 
w+ Read-write mode. Overwrites the existing file if the file exists. If the file does not exist, creates a new file for reading and writing.
a  Write-only mode. The file pointer is at the end of the file if the file exists. That is, the file is in the append mode. If the file does not exist, it creates a new file for writing. 
a+ Read and write mode. The file pointer is at the end of the file if the file exists. The file opens in the append mode. If the file does not exist, it creates a new file for reading and writing. 
```

编辑：这里是您的示例的解决方案，大多数情况下，整个字符串被 gsubbed 并写回文件，但也可以在不重写整个文件的情况下替换“infile”您应该谨慎替换为相同长度的字符串.

```
File.open('a.txt', 'r+') do |file|
  file.each_line do |line|
    if (line=~/bbb/)
      file.seek(-line.length-3, IO::SEEK_CUR)
      file.write 'big'
    end
  end
end 

=>
aaa
big
ccc
ddd 
```

这是一种更传统的方式，虽然比大多数其他解决方案更简洁

```
File.open(filename = "a.txt", "r+") { |file| file << File.read(filename).gsub(/bbb/,"big") } 
```

EDIT2：我现在意识到这还可以更短

```
File.write(f = "a.txt", File.read(f).gsub(/bbb/,"big")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T13:47:26.160

> 因此，您正在将整个文件读入一个变量，然后执行替换，并将变量的内容写回文件。我对吗？我正在寻找一些内联的东西

这就是这样做的方法。您可以交替使用`IO#readlines`将所有行读入`Array`然后处理它们。

这已经得到了回答：

[如何在文件文本中搜索模式并将其替换为给定值](https://stackoverflow.com/questions/1274605/ruby-search-file-text-for-a-pattern-and-replace-it-with-a-given-value)

如果您担心性能或内存使用情况，请使用正确的工具来完成正确的工作。开启`*nix`（或 Windows 上的 cygwin）：

```
sed -i -e "s/bbb/big/g" a.txt 
```

会做你想做的事。

# cucumber - 在哪里正确抽象 Cucumber 步骤数据？

> ID：10171717
> 
> 赞同：3
> 
> 时间：2012-04-16T09:33:33.457
> 
> 标签：cucumber, bdd

我需要编写一个类来执行有关可能会或可能不会添加到仓库中同一容器中的项目的规则，并且我想在实现之前将要求转换为 Cucumber。

每个项目都有几个属性，例如“项目系列”（例如：电子产品、书籍）、“项目状态”（例如：主要库存、故障库存）和“批次”（例如：1050、1051）。

我可以想到几种为此编写 Cucumber 测试的策略，我想知道哪个是推荐的策略：

首先，您可以枚举每个产品的所有属性：

```
Given I have a tote containing:
  | sku    | client  | family  | status | batch | weight |
  | 100000 | Foo     | garment | main   | 1234  |     10 | 
When I add the item:
  | sku    | client  | family  | status | batch | weight |
  | 200000 | Bar     | garment | main   | 1234  |     10 |
Then I should be told there is a Client conflict 
```

其次，您可以硬编码一个基本产品，并尝试指定与其不同的最小属性：

```
Given I have a tote containing an item that's client "Foo"
When I add an item that's client "Bar"
Then I should be told there is a Client conflict 
```

这假定步骤定义包含基本属性，并在步骤中提到属性时覆盖它们。

最后，您可以进一步进行抽象：

```
Given I have a tote containing an item
And I add an item with a different client
Then I should be told there's a client conflict 
```

这里有关于正确方法的任何指导吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T15:46:54.380

提到的第一个选项是最灵活和可重用的选项。使用第一种方法，您基本上可以涵盖您可能需要的任何情况，但有一些缺点，您将在下面阅读。

第二和第三个选项更容易阅读，这也是编写测试时的一个重要因素。此外，似乎专注于实际测试的内容，即“Foo”和“Bar”似乎在该场景/功能中产生的关键区别。这也是编写测试时的首选。

一般来说，恕我直言，编写 Cucumber 测试就像将自己置于岩石和坚硬的地方之间。我注意到开发人员倾向于重用和过度重用黄瓜步骤，从而创建难以理解和维护的场景。第二种方法需要在定义步骤方面做更多的工作，但是场景更清晰，更容易阅读......但是它需要更多的时间来编写场景，并且它会产生一个大的步骤定义库，这可能很难维护。

[如果你真的想要 Cucumber 作为 bdd，](http://37signals.com/svn/posts/3159-testing-like-the-tsa)那么我最倾向于选择第二个选项。只需确保您将使用`FactoryGirl`或类似的东西来创建通用对象并一次只覆盖您需要的东西。

我希望你觉得这很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T16:38:39.187

[The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)的答案将是您团队中的非技术成员最容易阅读的答案。与 QA 负责人和项目经理坐下来，问他们同样的问题。我遇到了类似的问题，并从您的第一个建议开始。然后我觉得它太详细了，跳到了#3。然后我和项目经理坐下来，发现当我创建数据时我不需要任何细节，但是当我们更改数据时（在我们的例子中更新发票上的行项目值），我们想看看那些值在步骤中。

[The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book) “When Cucumbers Go Bad”中的第 6 章对指导正确的细节水平非常有帮助。我真的认为你应该读一读，尤其是关于提出一种无处不在的语言的部分。我认为这将帮助您为您的组织确定正确的详细程度。

如果你想使用第一个测试，我的问题是，“你打算多久更改一次这些值？” 如果答案是“不太”或“从不”，那么您应该考虑它们是否会增加或降低测试的可读性。

PS 我仍在阅读[The Cucumber Book](http://pragprog.com/book/hwcuc/the-cucumber-book)，但到目前为止它非常有帮助，例如，按照 socjopata 的建议将我指向 FactoryGirl。

# validation - 对于日期比较的警告消息，语法上最正确的句子是什么？

> ID：10171719
> 
> 赞同：0
> 
> 时间：2012-04-16T09:33:51.913
> 
> 标签：validation, date, grammar

这些表达中哪一个是最正确或最常见的？

*   起始日期不能大于截止日期
*   起始日期不能大于截止日期
*   起始日期不能晚于截止日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:16:10.040

也许验证消息应该是 -'From' Date cannot be later than 'To' Date

# android - 我正在尝试在此列表视图中添加图像

> ID：10171722
> 
> 赞同：3
> 
> 时间：2012-04-16T09:33:59.183
> 
> 标签：android, android-listview

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.offers);
    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    String xml = XMLfunctions.getX## Heading ##ML();
    Document doc = XMLfunctions.XMLfromString(xml);
    int numResults = XMLfunctions.numResults(doc);
    if((numResults <= 0))
    {
        Toast.makeText(OffersActivity.this, "Geen resultaten gevonden", Toast.LENGTH_LONG).show();  
        finish();
    }
    ImageView newImg = (ImageView) findViewById(R.id.thumbimage);
    NodeList nodes = doc.getElementsByTagName("result");
    for (int i = 0; i < nodes.getLength(); i++)
    {
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element)nodes.item(i);
        map.put("id", XMLfunctions.getValue(e, "id"));
        map.put("name", "" + XMLfunctions.getValue(e, "name"));
        map.put("Score", "" + XMLfunctions.getValue(e, "score"));
        map.put("thumbnail", "" + XMLfunctions.getValue(e, "thumbimg"));
        mylist.add(map);
    }
    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.listitems, 
            new String[] { "name", "Score",  "thumbnail"}, 
            new int[] { R.id.item_title, R.id.item_subtitle, R.id.thumbimage });
    setListAdapter(adapter);
} 
```

我有要显示的图像的地址

```
map.put("thumbnail", "" + XMLfunctions.getValue(e, "thumbimg")); 
```

我也得到了它们。实际上它们来自实时xml。我想把它们放在图像视图中。请帮忙！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:50:47.277

您需要在后台下载图像，然后将它们设置在正确的 ImageViews 中。

默认情况下，适配器不会为您提供所有功能，因此您必须自己进行一些额外的编码。

看看这个 StackOverflow 答案：[在 ListView 中延迟加载图像，](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview/3068012#3068012)你就会明白我的意思了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:32:13.103

有一个名为 LazyListview 的列表视图。我认为这肯定会对您有所帮助。此惰性列表将帮助您在后台下载图像。当您打开列表活动时，您将看到下载图像后加载的默认图像将一一设置，从而制作出很棒的用户界面。

我认为这段[代码](https://github.com/thest1/LazyList)会对你有很大帮助.... :-)

# android - 如何为一个 html 网站和一个 Android 网站提供相同的 URL？

> ID：10171723
> 
> 赞同：-1
> 
> 时间：2012-04-16T09:33:59.697
> 
> 标签：android, web-hosting

我已经托管了一个基于 html 的网站，但现在我正在设计一个 Android 网站，我也可以使用相同的 URL 托管该网站

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:40:05.143

我会让主页包含一个 php 脚本，它可以检测客户端是否来自移动设备。像[这样](http://mobiforge.com/developing/story/lightweight-device-detection-php)

然后将该移动用户重定向到您网站的移动版本，该版本可以存储在服务器上的另一个文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:38:28.883

你可以。您必须有一个单独的页面来确定设备冲浪的类型并将它们从那里重定向到特定的网站。

# math - 数学 - 点的聚类

> ID：10171725
> 
> 赞同：1
> 
> 时间：2012-04-16T09:34:20.480
> 
> 标签：math, geometry

大家好，这是一个非常简单的问题，但我的头脑有点空虚，我似乎无法在互联网上找到任何令人满意的结果。

给定二维点 (x,y) 的集合，我如何确定它们组合在一起的紧密程度。

谢谢

我想一个例子会有所帮助..我试图测量瞄准目标时的“摆动”，所以我有射手瞄准的每一点，我想看看他们是否稳定或他们是否移动了分配。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T09:44:37.277

这取决于您对“紧密分组”的定义。一种可能性是[样本方差](http://en.wikipedia.org/wiki/Sample_variance)或相应的[标准差](http://en.wikipedia.org/wiki/Standard_deviation)。粗略地说，这为您提供了距中心点的“平均”距离（可以定义为已知点，也可以简单地定义为数据集的平均值）。

对于一组二维点，这可以定义为：

```
stddev = sqrt(var) = sqrt(1/N * SUM { (x - x0)^2 + (y - y0)^2 }) 
```

样本均值在哪里`(x0,y0)`（即所有点的平均值）。

该度量对异常值的敏感度将低于例如边界框度量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:41:56.827

一种简单的方法是计算包含所有点的边界框并从中计算面积，然后将面积值除以点数，得出每面积值的点数。根据您的需要，这可能就足够了，但可能相当不准确。

# orchardcms - Orchard CMS 自定义会员

> ID：10171727
> 
> 赞同：5
> 
> 时间：2012-04-16T09:34:33.133
> 
> 标签：orchardcms

将自定义会员提供商与 Orchard 集成的首选方式是什么？

我看过一些关于实现新的 IMembershipService 和 IUserService（来自 Orchard.Users）的帖子，然后还有其他模块，例如 OpenAuthentication，它们似乎做得*更多*（但仍然使用 UserPart？？）。

我们已经编写了一个 ASP.NET Membership 提供程序，可以按原样集成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-16T11:21:50.830

`IMembershipService`如果您根本不想使用默认的*Orchard.Users*模块，自定义实现是一种方法。当您仍想进行表单身份验证时很有用，但只需将身份验证数据存储在其他地方，而不是*UserPart*中。

如果您想创建一个完全自定义的身份验证方案，它会覆盖基于表单的默认方案（用户名 + 密码），请覆盖`IAuthenticationService`.

所以，一般来说：

*   `IMembershipProvider`是关于身份验证数据管理（创建/检索用户）
*   `IAuthenticationProvider`是关于执行身份验证（登录/注销/获取当前用户等）

根据您的需要，您可以覆盖其中一个或两个。

常见的身份验证模块，如 OpenAuth 模块，为现有的默认身份验证选项添加了额外的身份验证选项，而无需实际替换它，IIRC。

# c++ - 如何使用 Doxygen 更改派生类中的函数描述？

> ID：10171737
> 
> 赞同：1
> 
> 时间：2012-04-16T09:35:18.293
> 
> 标签：c++, doxygen

我有两节课：

```
class A {
public:
  /** Brief description
   * Grand description
   */
  virtual void func() {
    // Do something.
  }
};

class B: public A {
  // How to re-describe func() here?
}; 
```

我在 Doxygen 配置中打开了描述继承，这很好。但是我想将派生类中的描述更改为在基类中实现的一些函数，*而不*重新实现这些函数。

当然，我可以执行以下操作：

```
class B: public A {
public:
  /** My new description.
   * ...
   */
  virtual void func() {
    A::func();
  }
}; 
```

但对我来说似乎“丑陋” - 编写不必要的代码只是为了添加一些评论。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-17T18:00:58.143

如果你真的想你也可以使用预处理器技巧：

```
class B: public A {
  public:

#ifdef ONLY_FOR_DOXYGEN
    /** Beautiful docs */
    virtual void func();
#endif
}; 
```

连同这些设置：

```
ENABLE_PREPROCESSING   = YES
MACRO_EXPANSION        = YES
EXPAND_ONLY_PREDEF     = YES
PREDEFINED             = ONLY_FOR_DOXYGEN 
```

这样只有 doxygen 才能看到额外的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T11:49:25.827

这可能不是您想听到的，但似乎 doxygen 无法为不在代码中的实体发明文档，并且相同函数应该具有相同文档的想法似乎是明智的。

我能想到的最好的方法是在您的`A`文档中放置一个部分，以达到以下效果：

```
/** Brief
 * \par For Class A
 *  Class A details...
 * \par For Class B
 *  Class B details...
 */ 
```

这应该为两者放置相同的文档，读者可以选择相关部分吗？

这意味着它们仍然必须具有相同的简短描述。

# android - 模拟器没有在 Eclipse 上运行我的应用程序。为什么？

> ID：10171738
> 
> 赞同：0
> 
> 时间：2012-04-16T09:35:20.290
> 
> 标签：android, eclipse, android-emulator, galaxy

我想模拟 Galaxy Note 来测试我的应用程序。我在 Eclipse 中使用 1280 x 800 屏幕尺寸和 320 抽象 LCD 密度、android 4.0.3、Android 虚拟机。所以它就像一个Note设备......

我的问题是当我运行我的应用程序时，它没有在 Note 模拟器上运行，它只是启动一个新的，它好像与它不兼容，但这很奇怪，因为我的应用程序构建目标是 2.3，所以它应该在安卓 4.0.3 上运行

问题是什么 ？有没有更好的方式在 Galaxy Note 中发短信？（我没有设备，不能借...）

谢谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-18T08:56:37.233

检查您的“运行配置”。**在目标选项卡**上，将其设置为手动或自动模式检查作为您想要的首选设备模拟器。

如果您右键单击项目，然后单击“运行方式”，最后单击“运行配置...”，则可以访问运行配置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-18T15:10:48.013

如果您已经在 android 2.3 上创建了模拟器，这是正常的，因为 Eclipse 会在您的项目的目标级别 2.3 的模拟器上安装应用程序。将您的构建目标更改为 4.0.3，我认为它会没问题。

# javascript - 如何使用 SubjectAltName 生成 CRMF 请求？

> ID：10171740
> 
> 赞同：1
> 
> 时间：2012-04-16T09:35:30.350
> 
> 标签：javascript, cryptography, x509, pki

我必须生成一个 CRMF 请求，然后由颁发证书的 CA 处理，如果请求正常的话。必须验证的一件事是请求中的*SubjectAltName 。*

填充*SubjectAltName*字段并不简单。JavaScript 中的[generateCRMFRequest](https://developer.mozilla.org/en/JavaScript_crypto/generateCRMFRequest)函数似乎不能这样做，文档中没有对 X509 扩展的引用。

*   有人可以推荐一种在 JS 中处理这个问题的方法吗？
*   是否有另一种使用现有自由软件生成此类请求的方法？

# sql - 如何将此原始 SQL 转换为 Arel 查询？

> ID：10171746
> 
> 赞同：1
> 
> 时间：2012-04-16T09:35:54.353
> 
> 标签：sql, ruby-on-rails, activerecord, arel

在 Rails(3.2) 应用程序中，我在模型上有一个类方法，如下所示：

```
def import(level, max = 10)
  db = ActiveRecord::Base.connection
  result = db.execute("SELECT word FROM levels WHERE level == #{level} AND word NOT IN (SELECT entry FROM words) limit #{max};"); 
```

它一次只导入 10 个新单词（创建 10 条记录），这些单词还没有作为 Word 记录存在。

架构看起来像这样：

```
create_table "levels", :force => true do |t|
  t.string  "word"
  t.integer "level"
end

create_table "words", :force => true do |t|
  t.string  "entry"
  t.integer "level",      :default => 0
  t.text    "definition"
  t.string  "thesaurus",  :default => "none"
end 
```

我是一个 SQL 菜鸟。与rails dbconsole（sqlite3，我也在服务器上使用sqlite3）混在一起，我以某种方式想出了上面的原始sql查询。我知道我可以对 Arel 做同样的事情。我应该如何使用 ActiveRecord 构造查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:23:20.473

@Gazler 的解决方案看起来很有效，但我将提供一种`MetaWhere`更简洁的语法替代方案：

```
Level.where(:level => level, :word.not_in => Word.pluck(:entry)).limit(max) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:55:29.267

以下（未经测试）应该可以工作。它在子查询中使用[pluck](http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pluck)。

```
Level.where(:level => level).where("word NOT IN (?)", Word.pluck(:entry)).limit(max) 
```

# php - 保存多个附件并检索它们

> ID：10171751
> 
> 赞同：0
> 
> 时间：2012-04-16T09:37:02.657
> 
> 标签：php, javascript, upload, phpmyadmin

我有一个简单的 html 表单，它发送一封电子邮件，带有多个附件（最多 5 个）。我正在 phpadmin 中保存电子邮件、地址。现在我也想保存多个附件。如何保存多个附件，然后检索然后返回到其他页面。

我正在使用 phpmailer 发送电子邮件和附件，发送附件的循环是：

```
 $MyUploads = array();
  foreach(array_keys($_FILES['attach']['name']) as $key) 
{  
$filesize = $_FILES['attach']['size'][$key];
$extention = pathinfo ($_FILES['attach']['name'][$key] ,PATHINFO_EXTENSION );
$name=$_FILES['attach']['name'][$key];
    $filePath = $Location . $name;
    $tmpName = $_FILES['attach']['tmp_name'][$key];

if(move_uploaded_file($tmpName, $filePath))
    {$MyUploads[] = $Location;}
     else
    {$MyUploads[]='';}
     print_r($MyUploads);

$source = $_FILES['attach']['tmp_name'][$key];
$filename = $_FILES['attach']['name'][$key];
$mail->AddAttachment($source, $filename);

} 
```

将这些文件位置插入数据库的查询是

```
$insert = "INSERT INTO upload (name, type, size, file1, file2, file3, file4, file5,
    created) VALUES  
            ( 
            '".$name."',  
            '".$extention."',  
            '".$filesize."',  
            '".$MyUploads[0]."',  
            '".$MyUploads[1]."',  
            '".$MyUploads[2]."',  
            '".$MyUploads[3]."',
    '".$MyUploads[4]."' ,
    now() 
            )"; 
      $result = $dbLink->query($insert); 
```

请现在我如何在另一个 php 页面上检索这些文件。请我是一个初学者所以任何toturial。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:30:31.410

This has been answered here multiple times .. please see

[multi image upload wrong quantity on file-upload](https://stackoverflow.com/questions/10170277/multi-image-upload-wrong-quantity-on-file-upload/10170975#10170975)

[limiting the checking condition while uploading swf files](https://stackoverflow.com/questions/10151960/limiting-the-checking-condition-while-uploading-swf-files/10152156#10152156)

**EDIT 1**

What i think your table should be like

```
CREATE TABLE IF NOT EXISTS `upload` (
  `uploadID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uploadExt` varchar(10) NOT NULL,
  `uploadSize` varchar(50) NOT NULL,
  `uploadPath` varchar(200) NOT NULL,
  `uploadName` varchar(100) NOT NULL,
  PRIMARY KEY (`uploadID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

How to Insert

```
$mysql = new mysqli("localhost","root","","test");
$sql = "INSERT INTO `upload` (
`uploadID` ,
`uploadExt` ,
`uploadSize` ,
`uploadPath` ,
`uploadName`
)
VALUES (
NULL ,  '%s',  '%s',  '%s',  '%s');"

foreach($image_you_have_uploaded as $valid) /// Am sure you know what this is 
{
    //Make sure you mysql_real_escape_string everthing 
    $mysql->query(sprintf($sql,$extention,$filesize,$filePath,$name));
} 
```

How to get the images

```
$sql = "SELECT * FROM upload WHERE uploadName = '%s'" ;
$result = $mysql->query(sprintf($sql,mysql_real_escape_string($name)));

var_dump($result->fetch_assoc())// Output Result 
```

Thank you.

# c++ - 如何阅读 C++ 中的 bash 标准错误？

> ID：10171753
> 
> 赞同：0
> 
> 时间：2012-04-16T09:37:11.297
> 
> 标签：c++, error-handling, popen, stderr

是否可以读取 C++ 中错误的 bash 函数生成的标准错误？例如，如果我使用 popen 函数，我可以用 cerr 读取标准错误并处理它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:47:23.913

我猜你正在寻找[`dup`](http://www.manpagez.com/man/2/dup/)允许复制打开的文件描述符（其中之一是`stderr`）。

# javascript - 更改时加载Web资源[js，css，图像]的最佳方法是什么

> ID：10171755
> 
> 赞同：1
> 
> 时间：2012-04-16T09:37:31.697
> 
> 标签：javascript, html, css, optimization, web

我面临一个关于资源浏览器缓存的问题。有几个javascript文件，css文件不断变化，虽然时间不固定。

当我在服务器上更新这些文件时，不会加载新文件，需要清除浏览器缓存才能加载新文件。

有没有办法，服务器或浏览器设置告诉浏览器，在加载资源时，如果服务器文件有任何更改，则从服务器加载，否则使用存储在浏览器缓存中的现有文件。

* * *

我正在寻找一个需要一些基于浏览器/基于服务器的配置的解决方案，而不是我每次进行更新时都需要手动执行的操作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:39:38.823

只需将 ?[Some unique/random number] 放在 url 的末尾，每次都会获取文件。

例如

[http://abc.com/css/mystyles.css](http://abc.com/css/mystyles.css)

让它像

[http://abc.com/css/mystyles.css?123163](http://abc.com/css/mystyles.css?123163)

时间刻度可能是最好的选择之一，而不是随机数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:52:47.910

> 有没有办法，服务器或浏览器设置告诉浏览器，在加载资源时，如果服务器文件有任何更改，则从服务器加载，否则使用存储在浏览器缓存中的现有文件。

要实现上述目的，您可以[配置 ETags](http://developer.yahoo.com/performance/rules.html#etags)。但这不会像缓存文件那样避免 http 请求访问服务器的成本。

**更新**

从[你的评论](https://stackoverflow.com/questions/10171755/what-is-the-best-way-to-load-web-resources-js-css-images-when-changed#comment13051578_10171956)中你可以做这样的事情

```
<?
function get_filename_with_version($fname)
{
    return "?filename=" . $fname; // Generate the hash of the content and append it here as a query string
}
?>

<link rel="stylesheet" href="resrc.php<?php echo get_filename_with_version('a.css');?>" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T20:50:46.610

仅使用查询字符串来破坏缓存并不能 100% 保证：例如，某些代理服务器会删除从您的 html 链接的文件上的任何查询字符串。

更好的方法是修改 uri 或文件名。我在 apache 中使用重写规则，例如：

my.app.com/12345/js/file.js

指向：

htdocs/js/file.js

在文件系统中。

然后，我的应用程序会根据源代码管理更新修订号，但您可以在 html 中手动执行此操作。使用此解决方案并设置一个远期过期（http 1.0）和 max-age（http 1.1）标头，我可以通过新的 uri 获得永久客户端缓存的好处，并且文件在同一位置的开发容易文件系统。

史蒂夫·苏德斯（Steve Souders）关于未来的头球：

[http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/](http://www.stevesouders.com/blog/2008/08/23/revving-filenames-dont-use-querystring/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-16T09:41:35.507

将您的网站设计成客户端只需要获取外部 JavaScript 和 CSS 一次是一种很好的做法。

将外部资源设置为未来 1 年到期。为每个文件名附加一个版本号，因此不要使用“stylesheet.css”，而是使用“stylesheet-1.2.4.css”，然后当您想要更新客户端的 CSS 时，增加版本号。

增加版本号会强制客户端下载更新的文件，因为它被视为完全独立的资源。

如果您不想要此解决方案，请执行以下操作：

```
<link rel="stylesheet" type="text/css" href="/stylesheet.css?foo=<?php echo rand(); ?>"/> 
```

或者

```
 <link rel="stylesheet" type="text/css" href="/stylesheet.css?foo="Math.floor(Math.random()*1000)> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-16T09:43:13.617

> 有没有办法，服务器或浏览器设置告诉浏览器，在加载资源时，如果服务器文件有任何更改，则从服务器加载，否则使用存储在浏览器缓存中的现有文件。

尝试使用 cookie 来检查。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-16T10:21:45.283

如果您使用 PHP，则可以使用此解决方案：

```
//Just add the timestamp as parameter to your filename.
<link rel="stylesheet" type="text/css" href="css/stylesheet.css?<?php echo time(); ?> />
<script type="text/javascript" src="scripts/script.js?<?php echo time(); ?>"></script>
<img src="image.png?<?php echo time(); ?>" /> 
```

# udp - 如何使用 netty 构建可靠的 UDP？

> ID：10171758
> 
> 赞同：0
> 
> 时间：2012-04-16T09:37:58.943
> 
> 标签：udp, netty

如何使用 netty 构建可靠的 UDP？

修改netty的源码？还是用netty作为底层，在应用层实现reliable？

谢谢！最好的祝福！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T17:36:25.837

这取决于您的应用程序的设计。与修改 Netty UDP 传输源添加这些东西相比，构建一个瘦应用层（使用带有序列号的简单数据帧、带有接收序列号的确认帧和可选的计时器处理程序来实现重传）要容易得多。

这种方法可能会遇到一些问题，例如，发送更大的帧，感谢 IP 帧，您已经处理了应用程序 PDU 碎片，稍后您可能必须继续向层添加更多内容。仅当 TCP 或 SCTP（Netty 4.X 支持 SCTP）不能用于此目的时，我才会这样做。

# javascript - 如何使用 jQuery 从使用 Ajax 获取的内容中提取 HTML

> ID：10171760
> 
> 赞同：0
> 
> 时间：2012-04-16T09:38:14.283
> 
> 标签：javascript, jquery, ajax

我有一个页面，其中有几个 Option 元素的 Value 指向外部页面。我的目标是使用 Ajax 提取所选选项的值并使用它从外部页面加载内容。例如，当用户选择 Volleyball 时，我将获取 'volleyball.html' 值，使用 Ajax 检索该页面并将其#catalog 内容加载到当前页面中。这是我的代码：

```
$("select").change(function(){
var selectedURL=$("option:selected",this).val();
if(selectedURL!=="Select One"){
    $("#center").html("<p class='processing'></p>");    
    $.get(selectedURL,function(data){
    var extractedContent=$("#catalog",data);
    console.log(extractedContent); //Firebug says extractedContent is '[]'
    $("#center").html(extractedContent); //Nothing is inserted inside div#content
    },"html");
} 
```

我不擅长 jQuery，并且从这里的几篇文章中得到了混合和匹配的代码，可以从上面推导出来。现在我不确定出了什么问题，但没有加载任何内容 - 应该保存提取内容的#center div 块是空的。

有人可以帮我找出我上面的代码有什么问题吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:17:43.447

该`load()`方法非常适合：

```
$('select').change(function () {
    var selectedURL = $('option:selected', this).val();

    if (selectedURL !== 'Select One') {
        $('#center').html('<p class="processing"></p>').load(selectedURL + ' #catalog');
    }
}); 
```

它可以只接受一个 URL，*也*可以接受一个 URL 后跟一个选择器，该选择器只会将匹配元素 ( `#catalog`) 的内容加载到调用它的元素 ( `#center`) 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:43:57.560

```
$("select").change(function(){
    var selectedURL=$("option:selected",this).val();
    if(selectedURL!=="Select One"){
        $("#center").html("<p class='processing'></p>");    
        $.get(selectedURL,function(data){
            $("#center").html($(data).find("#catalog"));
        },"html");
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T09:57:17.457

你不能`$('#catalog', data)`就这样使用。要提取内容，您可以创建一个 jQuery 对象，并分配返回的 HTML，然后从那里提取：

```
var extractedContent = $('<div />').html(data).find('#catalog').html();
console.log(extractedContent);
$("#center").html(extractedContent); 
```

# c++ - Qt。对“_time32”的未定义引用

> ID：10171761
> 
> 赞同：1
> 
> 时间：2012-04-16T09:38:14.917
> 
> 标签：c++, qt, compilation, include, linker-errors

我用静态 OpenSSL 编译了静态 Qt，现在在编译我的项目时出现以下错误：

`undefined reference to '_time32'`

`undefined reference to '_gmtime32'`

`undefined reference to '_localtime32'`

我想我应该在 .pro 文件中添加一些内容。有任何想法吗？

*（编译器：TDM-GCC，操作系统：win32）*

**已解决（见下文）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T13:53:16.550

**解决方案。**

我用 TDM-GCC 编译了 Qt 和我的项目，但 MSYS 使用了另一个 MinGW（编译 OpenSSL）。为了解决这个问题，我`C:\msys\etc\fstab`使用以下行添加了文件：

`c:/qt/mingw32 /mingw`

Qt、openSSL 和我的项目已经编译成功。

# ios - 如何让 UISwitch 或 UITextField 响应 UITapGestureRecognizer 而无需分别切换/进入编辑模式？

> ID：10171763
> 
> 赞同：0
> 
> 时间：2012-04-16T09:38:25.847
> 
> 标签：ios, uitextfield, uigesturerecognizer, uiswitch, uitapgesturerecognizer

我有一个自定义 UIViewController，我的所有 ViewController 都继承自它。在这个控制器上，我有一个 UITapGestureRecognizer。我还有一个名为 inHelpMode 的布尔属性。

这个想法是，当视图处于帮助模式时，点击一个控件会弹出一个弹出窗口，其中包含有关控件功能的信息。

这适用于大多数控件，但有两个值得注意的例外：UISwitch 和 UITextField。

第一个切换，第二个进入编辑模式。

当我进入帮助模式时，我尝试在这些控件上将启用设置为 NO，这会阻止控件响应，但也会阻止显示弹出窗口。将 Controller 设置为 UItextField 的委托并覆盖 textFieldShouldBeginEditing 时也会发生同样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:53:47.727

进入编辑模式时，尝试将 UISwitch 和 UITextField 的 userInteractionEnabled 设置为 NO。离开帮助模式时不要忘记将其设置回 YES。如果这可行，那么一定是因为即使启用设置为 NO，这两个控件仍会进行一些触摸处理。通过将 userInteractionEnabled 设置为 NO，您将在 UIView 级别禁用它们，因此希望这会导致点击手势被它们忽略。

# logging - 记录 JBoss 登录

> ID：10171764
> 
> 赞同：2
> 
> 时间：2012-04-16T09:38:26.587
> 
> 标签：logging, login, jboss

有没有办法记录基于 JBoss 表单的登录？我想创建登录到我的 Web 应用程序的人员的统计信息，但到目前为止，我无法向 JBoss 登录操作添加功能或过程。

**编辑：** 我目前正在使用 JBoss 5.1，如果可能的话，我想保留当前的登录过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T03:24:54.460

访问日志文件应包含经过身份验证的用户的用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:25:22.650

我不确定您使用的是哪个版本的 jboss，所以这是针对 5.x 的。

您可以编写一个`login-module`which did logging for you，所以您的 login-config.xml 有点像这样：

```
 <application-policy name="my-policy">
<authentication>
    <login-module code="org.whatever.MyLoginModule" flag="required" />
</authentication>
</application-policy> 
```

有关如何编写登录模块的更多信息，请参见[此处](http://goo.gl/hvpDi)和[此处。](http://goo.gl/C2cMo)

# jquery - 使用 is(:hover) 在 IE 中的 jQuery 挑战？

> ID：10171767
> 
> 赞同：1
> 
> 时间：2012-04-16T09:38:40.587
> 
> 标签：jquery, internet-explorer, hover

我为一个问题苦苦挣扎了好几天，找不到答案。

我有一点鼠标悬停的东西，它在所有浏览器中都可以正常工作，但在 IE7、IE8 或 IE9 中却没有（*惊喜）。*

目的是 div 在鼠标悬停在菜单点上时出现，并在离开菜单或 div 时消失。我猜我已经将问题隔离到以下行： **if ($('#top-navigation').is(':hover') || $('#header').is(':hover') | | $('#menu a').is(':hover')) {** 由于 IE 中的行为，我很确定这就是麻烦所在。

```
$(document).ready( function() {
    $mypage = $("body").attr("class");
    $("#"+$mypage).show();
    $("#menu a:contains('"+$mypage+"')").parent().addClass("current");

    $("#menu a").hover(function() {
        $(".transparent").hide();

        $("#menu li").removeClass("current");
        $(this).parent().addClass("current");

        $element = "#" + $(this).text();
        $($element).show();
    });

    function hide_popup(){
        if ($('#top-navigation').is(':hover') || $('#header').is(':hover') || $('#menu a').is(':hover')) {
            return false;
        }else{
            $("#menu li").removeClass("current");
            $(".transparent").hide();

            $mypage = $("body").attr("class");
            $("#"+$mypage).show();
            $("#menu a:contains('"+$mypage+"')").parent().addClass("current");
        }
    };
    $("body").mouseover(function() {
        window.setTimeout( hide_popup, 2000 );
    });
}); 
```

我很高兴得到任何帮助！干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T10:44:02.937

好的，我想出了一个解决方案：

```
function hide_popup(){
    $("#top").hover(function () {
        return false;
    },function () {
        $("#menu li").removeClass("current");
              $(".transparent").hide();

        $mypage = $("body").attr("class");
        $("#"+$mypage).show();
        $("#menu a:contains('"+$mypage+"')").parent().addClass("current");
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:05:04.323

IE 在 CSS 中的动态伪类及其对应的 JavaScript 事件中一直存在臭名昭著的问题。您可以做的最好的事情是跟踪鼠标移动并仅在鼠标进入目标元素区域时触发您的代码例程。换句话说，您应该将 mouseover 事件与 screenX 和 screenY 事件属性结合使用。

# php - PHP如何加入数组中的记录

> ID：10171769
> 
> 赞同：-2
> 
> 时间：2012-04-16T09:38:45.540
> 
> 标签：php, arrays

嗨，有什么方法可以连接到值相同的记录？

喜欢

```
[12]=> Array (
 [ID] => 127078
 [row1] => 
 [post] => N16 7UJ
)

[13]=> Array (
 [ID] => 127078
 [row1] => something
 [post] =>
) 
```

像那样做

```
[12]=> Array (
 [ID] => 127078
 [row1] => something
 [post] => N16 7UJ
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:42:07.910

你有很多选择，比如`array_replace` `array_merge` `foreach` `while` `Iterator`

但我更喜欢`array_replace`，因为您可以轻松选择哪个阵列正在替换哪个阵列

价值观

```
$array[12] = array("ID"=>127078,"row1"=>"","post"=>"N16 7UJ");
$array[13] = array("ID"=>127078,"row1"=>"something","post"=>"");
var_dump($array[12]); 
```

示例`array_replace`（[http://www.php.net/manual/en/function.array-replace.php](http://www.php.net/manual/en/function.array-replace.php)）

```
$array[13] = array_filter($array[13]); //Filter Replacement
$array[12]= array_replace($array[12],$array[13]); 
```

示例`array_merge`（[http://php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)）

```
//$array[12] = array_filter($array[12]); //Optinal 
$array[13] = array_filter($array[13]); //Filter Spaces
$array[12]= array_merge($array[12],$array[13]);
var_dump($array[12]); 
```

输出

```
array
  'ID' => int 127078
  'row1' => string 'something' (length=9)
  'post' => string 'N16 7UJ' (length=7) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:09:51.510

这里取这个函数

```
<?php

$array = array(
                12 => array (
                 "ID" => '127078',
                 "row1" => '',
                 "post" => 'N16 7UJ',
                ),

                13 => array (
                 "ID" => '127078',
                 "row1" => 'something',
                 "post" => '',
                )

            );
function mergedup($array,$matcher){
    if(!function_exists('remove_element')){
        function remove_element($arr,$element){
            $ret_arr = array();
            foreach($arr as $val){
                if($val !== $element){
                    array_push($ret_arr,$val);
                }
            }
            return $ret_arr;    
        }
    }
    $array = remove_element($array,array());
    $return_array = array();

    while(isset($array[0])){
        $temp = $array[0];
        $array = remove_element($array,$temp);
        $array_temp = array();
        foreach($array as $vals){
            if($temp[$matcher]==$vals[$matcher]){
                array_push($array_temp,$vals);
                foreach($temp as $key => $val){
                    if(empty($temp[$key])){
                        $temp[$key] = $vals[$key];
                    }
                }
            }
        }
        foreach($array_temp as $vals){
            $array = remove_element($array,$vals);
        }
        array_push($return_array,$temp);
    }

    return $return_array;
}

var_dump(mergedup($array,"ID"));
?> 
```

经过测试和工作

# postgresql - 使用 lower() 时 /" 或附近的语法错误

> ID：10171771
> 
> 赞同：0
> 
> 时间：2012-04-16T09:39:09.750
> 
> 标签：postgresql

我正在从表中检索以下 sql 语句，然后使用绑定变量替换其中的值。运行该语句时出现语法错误。它似乎是由于 lower() 函数而发生的，但是我相信我正确使用了它。我已经尝试通过 psql 手动运行该语句，并且它适用于我提供的值。有人对此有任何想法吗？我曾尝试将 ' 换成 $$ 但这没有效果。

**陈述**

```
SELECT column_name 
FROM information_schema.columns 
WHERE table_name=lower(':1') 
  and column_name=lower(':2') 
```

**具有替换值的预期基本语句**

```
SELECT column_name 
FROM information_schema.columns 
WHERE table_name=lower('MyTableName') 
  and column_name=lower('MyColumnName') 
```

**由 postgresql 运行的语句**

```
SELECT column_name 
FROM information_schema.columns 
WHERE table_name=lower('((E'RWOL_TMA_ROADWORKS'))') 
and column_name=lower('((E'TPHS_CWAY_RESTRICT_TYPE'))') 
```

**C#中的错误**

```
ERROR: 42601: syntax error at or near \"MyTableName\" 
```

**PostgreSQL 日志文件中的错误**

```
2012-04-16 11:36:15 BST ERROR:  syntax error at or near "RWOL_TMA_ROADWORKS" at character 80
2012-04-16 11:36:15 BST STATEMENT:  SELECT column_name FROM information_schema.columns WHERE table_name=lower('((E'RWOL_TMA_ROADWORKS'))') and column_name=lower('((E'TPHS_CWAY_RESTRICT_TYPE'))') 
```

编辑：检索和实现代码是用 C# 编写的。我使用数据库连接基类和 npgsql 提供程序工厂来建立连接、运行查询和检索数据。此方法适用于使用此方法绑定变量等的所有其他查询，除了我尝试使用 lower() 函数的查询。

编辑：我尝试完全删除引号以让绑定代理处理引用值，这提供了相同的语法错误。

编辑：现在已启用日志记录并添加了 postgresql 正在运行的实际语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:57:27.020

`:1`也许您不应该在and周围使用引号`:2`。大多数支持绑定变量的 API 都会为您正确引用该值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:58:44.853

我认为这不是`lower()`函数的问题，而是绑定变量处理问题。

正如@Adrian 建议的那样，尽量不要在绑定变量周围使用引号。而且您还应该查阅您的数据库日志，您将在那里看到有关正在发生的事情的更多信息。

**编辑：**使用：

```
SHOW data_directory;
SHOW log_directory; 
```

`SQL`语句查找您的 DATA 目录和日志位置的位置，如果日志路径是相对的，那么它将相对于 DATA 目录。

去那里找到最近修改的文件，检查内容。您应该会看到默认 PostgreSQL 配置的错误消息。

在中间件/工厂级别上启用调试对您也有好处。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:59:40.797

我认为 vyegorov 走在正确的道路上 - 你的占位符有些有趣。

我认为您的第二个示例不是替换后的实际查询，因为它不包含任何错误。它是从哪里来的，为什么不提供实际的查询——你在 PostgreSQL 中打开了语句记录吗？

另外，我怀疑语法错误——转义的双引号是怎么回事？它们实际上是双引号而不是双引号吗？

1.  您确定需要在占位符周围加上单引号吗？通常，司机会为您管理。

2.  你确定你没有在任何地方双引号吗？

获取实际的 SQL 并查看引用，我怀疑问题会很明显。

更新：现在有 SQL

这是已发布声明中的错误：

```
lower('((E'RWOL_TMA_ROADWORKS'))') 
```

您在这里有两个级别的报价。删除您添加的那些，我们应该得到类似的结果：

```
lower((E'RWOL_TMA_ROADWORKS')) 
```

忽略重复的有效括号（E'...' 是 c 样式转义字符串的语法 - google 围绕 standard_conforming_strings）。

# facebook-graph-api - 如何列出用户在我的 Opengraph 集成应用程序上阅读的文章

> ID：10171772
> 
> 赞同：0
> 
> 时间：2012-04-16T09:39:13.607
> 
> 标签：facebook-graph-api, action, facebook-opengraph

我有一个新闻应用程序，它集成了 Opengraph 并批准了阅读和观看等操作。

我想列出访问用户的朋友在我的应用程序上阅读、观看的所有文章、视频等。

我该怎么做呢？类似于雅虎在他们的新闻页面中所做的事情，我使用该应用程序的朋友列表显示在顶部，并且悬停在他们阅读的文章上。华盛顿邮报也这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:57:51.823

使用活动提要插件：[https ://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/)

如果您不想使用插件，则必须在自己的站点上处理所有日志记录和构建查询——这就是华盛顿邮报所做的。

# php - MySQL 到 Redis 在一个巨大的表上，如何加快速度？

> ID：10171773
> 
> 赞同：1
> 
> 时间：2012-04-16T09:39:15.820
> 
> 标签：php, mysql, redis

当我尝试从 mysql 表中获取大量数据到 redis 数据库时，我遇到了一些问题。无论如何，一段时间后我收到错误“MySQL 服务器已消失”，我不知道为什么..

编辑：

或者，当我使用中断循环的注释代码时，它只是在未完成时“完成”。

这是我使用的 php 代码（由 php-cli 运行）：

```
<?php
require 'Predis/Autoloader.php';
Predis\Autoloader::register();

mysql_connect('localhost', 'root', 'notcorrect') or die(mysql_error());
mysql_select_db('database_that_i_use') or die(mysql_error());
$redis = new Predis\Client();

//starting on 0 but had to edit this when it crashed :(
for($i = 3410000; $i<999999999999; $i += 50000) {
        echo "Query from $i to  " . ($i + 50000) . ", please wait...\n";
        $query = mysql_unbuffered_query('SELECT * FROM table LIMIT ' . $i . ', 50000')or die(mysql_error());
        // This was code I used before, but for some reason it got valid when it wasn't supposed to. 
        /*if(mysql_num_rows($query) == 0) {
                echo "Script finished!\n";
                break;
        }*/
        while($r = mysql_fetch_assoc($query)) {
                $a = array('campaign_id' => $r['campaign_id'],
                           'criteria_id' => $r['criteria_id'],
                           'date_added' => $r['date_added'],
                );

                $redis->hmset($r['user_id'], $a);
                unset($a);
                usleep(10);
        }
        echo "Query completed for 50000 rows..\n";
        sleep(2);
}

unset($redis);
?> 
```

我的问题是如何更好地做到这一点，我真的不知道它为什么会崩溃。我的服务器很旧而且速度很慢，可能无法处理这么大量的数据？在我们切换到实际生产之前，这只是一个测试服务器。

值得注意的是，脚本可能运行了半个小时，并且可能是限制语句在数量变高时使它变得非常慢？那么有没有更简单的方法来做到这一点？我今天需要传输所有数据！:)

提前致谢。

编辑：运行示例：

```
Query from 3410000 to  3460000, please wait...
Query completed for 50000 rows..
Query from 3460000 to  3510000, please wait...
Query completed for 50000 rows..
Query from 3510000 to  3560000, please wait...
Query completed for 50000 rows..
Query from 3560000 to  3610000, please wait...
MySQL server has gone away 
```

编辑：

该表由约 500 万行数据组成，约为 500 万行。800 MB 大小。但是我以后需要为更大的桌子做类似的事情..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T17:01:59.657

首先，您可能想要使用另一种脚本语言。Perl、Python、Ruby，任何东西都比 PHP 更好地运行这种脚本。

我无法评论 mysql 连接丢失的原因，但为了获得更好的性能，您需要尝试尽可能多地消除 mysql 服务器和 redis 服务器的往返。

它的意思是：

*   您不应该使用无缓冲的查询，而是使用缓冲的查询（前提是查询中使用了 LIMIT）

或者

*   您不应该使用 LIMIT 对 mysql 查询进行迭代，因为您会得到二次复杂度，而它应该只是线性的。我不知道它是否可以在 PHP 中避免。

*   您应该管道发送到 Redis 的命令

这是使用 Predis 进行管道化的示例： [https ://github.com/nrk/predis/blob/v0.7/examples/PipelineContext.php](https://github.com/nrk/predis/blob/v0.7/examples/PipelineContext.php)

实际上，如果我真的必须为此使用 PHP，我会将 mysql 数据导出到一个文本文件中（例如使用“select into outfile”），然后读取该文件并使用流水线将数据推送到 Redis。

# python - 不应访问相同的网址

> ID：10171775
> 
> 赞同：0
> 
> 时间：2012-04-16T09:39:20.587
> 
> 标签：python, urllib, web-crawler

我是 python 新手，我正在开发一个网络爬虫，下面是从给定 url 获取链接的程序，但问题是我不希望它访问已经访问过的相同 url。请帮我。

```
import re
import urllib.request
import sqlite3
db = sqlite3.connect('test2.db')
db.row_factory = sqlite3.Row
db.execute('drop table if exists test')
db.execute('create table test(id INTEGER PRIMARY KEY,url text)')
#linksList = []
#module to vsit the given url and get the all links in that page
def get_links(urlparse):
        try:
            if urlparse.find('.msi') ==-1: #check whether the url contains .msi extensions
                htmlSource = urllib.request.urlopen(urlparse).read().decode("iso-8859-1")  
                #parsing htmlSource and finding all anchor tags
                linksList = re.findall('<a href=(.*?)>.*?</a>',htmlSource) #returns href and other attributes of a tag
                for link in linksList: 
                    start_quote = link.find('"') # setting start point in the link 
                    end_quote = link.find('"', start_quote + 1) #setting end point in the link
                    url = link[start_quote + 1:end_quote] # get the string between start_quote and end_quote
                    def concate(url): #since few href may return only /contact or /about so concatenating its baseurl
                        if url.find('http://'):
                            url = (urlparse) + url
                            return url
                        else:
                            return url
                    url_after_concate = concate(url)
#                    linksList.append(url_after_concate)
                    try:
                        if url_after_concate.find('.tar.bz') == -1: # skipping links which containts link to some softwares or downloads page
                            db.execute('insert or ignore into test(url) values (?)', [url_after_concate])
                    except:
                        print("insertion failed")
            else:
                return True
        except:
            print("failed")
get_links('http://www.python.org')     
cursor = db.execute('select * from test')
for row in cursor: # retrieve the links stored in database
    print (row['id'],row['url'])
    urlparse = row['url']
#    print(linksList)
#    if urlparse in linksList == -1:
    try:
        get_links(urlparse) # again parse the link from database
    except:
        print ("url error") 
```

请建议我如何解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:42:33.127

您应该有一个“访问过”页面的列表。当您请求下一个 url 时，您可以检查列表是否已经包含该 url，如果是，则跳过它。我不是 python 程序员所以这里有一些 peusdo-code

```
Create listOfVisitedUrls
...
Start Loop
Get nextUrl
If nextUrl IsNotIn listOfVisitedUrls Then
    Request nextUrl
    Add nextUrl to listOfVisitedUrls
End If
Loop 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:57:23.400

您可以使用以下代码：

```
import re
from urllib import urlopen

# Since few href may return only /contact or /about, concatenate to baseurl.
def concat(url, baseurl): 
    if url.find('http://'):
        url = baseurl + url
        return url
    else:
        return url

def get_links(baseurl):
    resulting_urls = set()
    try:
        # Check whether the url contains .msi extensions.
        if baseurl.find('.msi') == -1:
            # Parse htmlSource and find all anchor tags.
            htmlSource = urlopen(baseurl).read()
            htmlSource = htmlSource.decode("iso-8859-1")

            # Returns href and other attributes of a tag.
            linksList = re.findall('<a href=(.*?)>.*?</a>',htmlSource)

            for link in linksList:
                # Setting start and end points in the link.
                start_quote = link.find('"')
                end_quote = link.find('"', start_quote + 1)

                # Get the string between start_quote and end_quote.
                url = link[start_quote + 1:end_quote]

                url_after_concat = concat(url, baseurl)
                resulting_urls.add(url_after_concat)

        else:
            return True

    except:
        print("failed")

    return resulting_urls

get_links('http://www.python.org') 
```

它将为您返回一个`set()`包含唯一 URL 的`baseurl`; 对于`http://www.python.org'，你应该得到：

```
set([u'http://www.python.org/download/',
 u'http://docs.python.org/',
 u'http://www.python.org#left-hand-navigation',
 u'http://wiki.python.org/moin/PyQt',
 u'http://wiki.python.org/moin/DatabaseProgramming/',
 u'http://roundup.sourceforge.net/',
 u'http://www.python.org/ftp/python/3.2.3/Python-3.2.3.tar.bz2',
 u'http://www.python.org/about/website',
 u'http://www.python.org/about/quotes',
 u'http://www.python.org/community/jobs/',
 u'http://www.python.org/psf/donations/',
 u'http://www.python.org/about/help/',
 u'http://wiki.python.org/moin/CgiScripts',
 u'http://www.zope.org/',
 u'http://www.pygame.org/news.html',
 u'http://pypi.python.org/pypi',
 u'http://wiki.python.org/moin/Python2orPython3',
 u'http://www.python.org/download/releases/2.7.3/',
 u'http://www.python.org/ftp/python/3.2.3/python-3.2.3.msi',
 u'http://www.python.org/community/',
 u'http://www.python.org/ftp/python/2.7.3/Python-2.7.3.tar.bz2',
 u'http://wiki.python.org/moin/WebProgramming',
 u'http://www.openbookproject.net/pybiblio/',
 u'http://twistedmatrix.com/trac/',
 u'http://wiki.python.org/moin/IntegratedDevelopmentEnvironments',
 u'http://www.pentangle.net/python/handbook/',
 u'http://wiki.python.org/moin/TkInter',
 u'http://www.vrplumber.com/py3d.py',
 u'http://sourceforge.net/projects/mysql-python',
 u'http://wiki.python.org/moin/GuiProgramming',
 u'http://www.python.org/about/',
 u'http://www.edgewall.com/trac/',
 u'http://osl.iu.edu/~lums/swc/',
 u'http://www.python.org/community/merchandise/',
 u"http://www.python.org'/psf/",
 u'http://wiki.python.org/moin/WxPython',
 u'http://docs.python.org/3.2/',
 u'http://www.python.org#content-body',
 u'http://www.python.org/getit/',
 u'http://www.python.org/news/',
 u'http://www.python.org/search',
 u'http://www.python.org/community/sigs/current/edu-sig',
 u'http://www.python.org/about/legal',
 u'http://www.timparkin.co.uk/',
 u'http://www.python.org/about/apps',
 u'http://www.turbogears.org/',
 u'http://www.egenix.com/files/python/mxODBC.html',
 u'http://docs.python.org/devguide/',
 u'http://docs.python.org/howto/sockets.html',
 u'http://www.djangoproject.com/',
 u'http://buildbot.net/trac',
 u'http://www.python.org/psf/',
 u'http://www.python.org/doc/',
 u'http://wiki.python.org/moin/Languages',
 u'http://www.xs4all.com/',
 u'http://www.python.org/',
 u'http://wiki.python.org/moin/NumericAndScientific',
 u'http://www.python.org/channews.rdf',
 u'http://www.alobbs.com/pykyra',
 u'http://wiki.python.org/moin/PythonXml',
 u'http://wiki.python.org/moin/PyGtk',
 u'http://www.python.org/ftp/python/2.7.3/python-2.7.3.msi',
 u'http://www.python.org/download/releases/3.2.3/',
 u'http://www.python.org/3kpoll']) 
```

希望有帮助。

# coldfusion - 如何强制将 MS Word 下载到特定位置

> ID：10171781
> 
> 赞同：0
> 
> 时间：2012-04-16T09:39:48.323
> 
> 标签：coldfusion, coldfusion-9

我使用下面的代码将 MS Word 文件下载到默认下载文件夹。但我需要将文档下载到特定位置。我怎样才能做到这一点？

**代码：**

```
<cfcontent type="application/msword">
<cfheader name="content-Disposition" value="attachment;filename=Simple_run.doc"> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T09:43:25.483

您只能将文件分派给客户端。决定如何处理正在发送的文件是用户代理的工作。一些浏览器会提示用户输入位置，其他浏览器会默认为下载目录。这不能由服务器决定。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-16T09:43:10.303

你不能。目的地由浏览器和系统首选项控制，而不是网页。您可以设置文件名，仅此而已。这也不是错误或疏忽，而是故意防止网站欺骗用户覆盖系统文件。

请注意，如果您也控制客户端计算机（例如在 Intranet 中），您还有更多选择。最简单的方法是使用自定义 mime 类型，然后编写一个小程序来处理实际文件系统复制到目标文件夹。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T08:17:39.540

您可以使用此代码将 MS Word 文档保存到特定位置。

我将通知电子邮件内容作为文档。快乐编码。

```
<cfsavecontent variable="whatever">
    <cfinclude template="noticeEmail.cfm">
</cfsavecontent>   
<cffile action="WRITE" file="#WordFilePath#.doc" output="#whatever#"> 
```

# php - CakePHP Acl 自动检查

> ID：10171783
> 
> 赞同：4
> 
> 时间：2012-04-16T09:40:04.143
> 
> 标签：php, cakephp, cakephp-2.0, acl, cakephp-2.1

我是 CakePHP 框架的新手。我对 CakePHP 没有足够的了解。所以我的问题是：ACL 是自动工作还是我需要手动检查？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T11:40:46.213

我在我最新的带有 ACL 的 CakePHP 1.3 项目的 AppController 中有这个，在 CakePHP 2.1 中应该非常相似。

```
function beforeFilter() {
    // ACL Check
    if($this->name != 'Pages' && !$this->Acl->check(array('model' => 'User', 'foreign_key' => $this->Session->read('Auth.User.id')), $this->name . '/' . $this->params['action'])) {
        CakeLog::write('auth', 'ACL DENY: ' . $this->Session->read('Auth.User.name') . ' tried to access ' . $this->name . '/' . $this->params['action'] . '.');
        $this->render('/pages/forbidden');
        exit; // Make sure we halt here, otherwise the forbidden message is just shown above the content.
    }
} 
```

除了“Pages”控制器之外，所有控制器/操作都经过 ACL 检查，如果用户无权访问，则提供“pages/forbidden”视图并将日志条目写入 auth.log 文件（可选，但我当时更喜欢这个）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:46:56.807

如果您配置正确，AclComponent 会自动检查用户是否有权访问操作。

资料来源：我对 CakePHP 1.3 的体验

# java - 后端进程 VS 定时任务

> ID：10171793
> 
> 赞同：0
> 
> 时间：2012-04-16T09:40:40.813
> 
> 标签：java, monitoring, scheduled-tasks, backend

我有许多 24/7 运行的后端进程（java 应用程序）。为了监控这些后端（即检查进程是否没有响应并通过 SMS/EMAIL 通知），我编写了另一个应用程序。

旧的后端现在以固定的时间间隔记录心跳，这个新的应用程序检查他们是否定期这样做，并在必要时通知。

现在，我们有两个选择

*   要么将其作为计划任务运行，该任务将在每（比如说）15 分钟后运行并在完成其工作后停止，要么
*   将其作为另一个后端进程运行，睡眠时间为 15 分钟。

我们现在可以预见的问题是，如果这个监控应用程序进入无响应状态怎么办？所以，我的问题是这两种情况有什么区别还是两者都一样？哪种选择更适合我的情况？

*请注意，这是一个特定情况，与[this](https://stackoverflow.com/questions/390307/windows-service-vs-scheduled-task)或[this不同](https://stackoverflow.com/questions/767490/windows-service-or-scheduled-task-which-one-do-we-prefer)*

**环境：** Java，托管在 LINUX 服务器上

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:32:00.843

计划任务是指由系统调度程序触发，还是作为现有后端进程中的计划线程？

要捕获意外终止或无响应状态，您最好运行一个单独的进程而不是线程。但是，调度线程将使您与拥有进程的交互更紧密，并且 IPC 开销更少。

我会同时实施。在每个后端进程中维护本地状态的记录，每个进程中的计划任务触发一个线程来更新该节点的当前状态。此更新可能相当频繁，因为它比与单独的进程通信更便宜。

使用您单独的“监控应用程序”进程定期收集有关所有后端进程的信息。这应该不那么频繁地发生 - 进程是否一直在运行，或者由 cron 作业调度是无关紧要的，因为状态保存在每个后端进程中。如果其中一个后端变得无响应，此监控应用程序将能够确定没有响应并执行一些有意义的探测以确定问题所在。然后，该组件将通知您的 SMS/Email 实用程序发送报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:52:40.263

我会选择一个后端进程，因为它可以保持状态查看来自 terracotta [http://terracotta.org/products/quartz-scheduler的石英调度程序](http://terracotta.org/products/quartz-scheduler)

它将对瞬态条件具有弹性，您只需要提供一个简单的包装，因此如果您在quartz.properties 文件中获得正确的线程内容，则监视器应用程序应该是健壮的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-24T06:59:34.557

您可以使用 nagios 核心作为核心并使用 Naptor 来监控您的应用程序。它易于设置并嵌入到您的应用程序开发中。

您可以在此链接查看： [https ://github.com/agunghakase/Naptor/tree/ver1.0.0](https://github.com/agunghakase/Naptor/tree/ver1.0.0)

# php - PHP，使用 Ajax 更改 DIV

> ID：10171794
> 
> 赞同：0
> 
> 时间：2012-04-16T09:40:44.753
> 
> 标签：php, jquery, html, ajax, flash

我有一个 index.php(Main)、query.php 和 charts.php。

chart.php 需要一个文件（“charts.xml”），因为在 charts.php 内部有一些 javascript 代码并使用 AC_FL_RunContent() 来显示需要 charts.XML 的 Flash 图表

调用时可以使用 query.php 生成charts.XML

我的主要问题是。在 index.php 中调用 AJAX 调用时，我无法正确显示 chart.php，但我可以正确调用 query.php。Flash 图表不会显示，但是当我测试运行 charts.php 时它运行良好，Flash 图表显示正确。

有什么我想念的吗？

# cakephp-2.0 - 如何在 CakePHP 2 中使用 fetch？

> ID：10171797
> 
> 赞同：2
> 
> 时间：2012-04-16T09:41:04.737
> 
> 标签：cakephp-2.0

如何在 CakePHP 2 中使用 fetch？

连接的默认操作使用

```
 echo $ this-> fetch ('content'); 
```

以及如何使用 fetch include leftmenu.ctp？

所以不要得到

```
 echo $ this-> fetch ('leftmenu'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:56:06.817

你应该使用 leftmenu 作为一个元素。在 Elements 文件夹中放置 ctp 文件并像这样包含它：

```
echo $this->element('leftmenu'); 
```

# extjs - extjs 组合框中的验证器功能 IE6 不起作用

> ID：10171806
> 
> 赞同：0
> 
> 时间：2012-04-16T09:41:28.220
> 
> 标签：extjs, extjs3, extjs-mvc

我正在使用此代码来验证 IE6 中的组合框，这不起作用。

在 Firefox 和 Chrome 中它的工作。请建议我一些方法来验证 IE6 中的组合框。

代码：

```
xtype: 'combo',
            fieldLabel: 'Label',
            anchor: '100%',
            allowBlank: false,
            displayField: 'value',
            store: 'level1Store',
            lazyInit: false,
            mode: 'local',
            forceSelection: true,
            disableKeyFilter: true,
            editable: true,
            selectOnFocus: true,
            triggerAction: 'all',
            valueField: 'key',
            name: 1,
            ref: 'combo1',
            id: 'field1',
            validator: function(value){
                var temp = 0;
                for(var i=0;i<value.length;i++){
                    if(value[i]=="?"){
                        temp = temp + 1;
                    }
                }
                if(temp >3){
                    return false;
                }else{
                    return true;
                }
            }
        } 
```

谢谢

拉吉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T05:03:45.510

```
validator: function(value){
            var arr = value.split("?");
            if(arr.length >4) {
                return false;
            }else {
                return true;
            }
        } 
```

这工作正常。

# c++ - 将 std::pair 迭代器转换为 boost::iterator_range

> ID：10171807
> 
> 赞同：9
> 
> 时间：2012-04-16T09:41:33.820
> 
> 标签：c++, boost, iterator, boost-range

我有一个`std::multimap`，我想创建一个`boost::iterator_range`from `equal_range`。我在文档中发现没有简单的方法，所以我尝试了以下方法：

```
typedef std::multimap<int, std::string> Map;
Map map;
...
boost::iterator_range<Map::iterator> r(map.equal_range(2)); 
```

令人惊讶的是，它可以工作（使用 GCC 4.1.2）。我很好奇它是如何工作的。我发现`iterator_range`构造函数没有重载可以做到这一点，并且`multimap::iterator_range`显然没有重载会返回 Boost 范围。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-16T09:59:31.857

`iterator_range_core.hpp`：

```
//! Constructor from a Range
template< class Range >
iterator_range( const Range& r ) :
    m_Begin( impl::adl_begin( r ) ), m_End( impl::adl_end( r ) )
{} 
```

`impl::adl_begin`带你去`boost::begin`。看看`begin.hpp`我们看到（在其他*巫术*中）：

```
template< typename Iterator >
inline Iterator range_begin( const std::pair<Iterator,Iterator>& p )
{
    return p.first;
} 
```

例如，如何将类型“适应”到范围中，请看[这里](http://www.boost.org/doc/libs/1_49_0/libs/range/doc/html/range/reference/extending/method_2.html)（他们`pair`用作示例）。

# css - jQuery mobile button stretching too far

> ID：10171814
> 
> 赞同：0
> 
> 时间：2012-04-16T09:41:59.147
> 
> 标签：css, button, jquery-mobile, sizing

For some reason the button under the text fields seems to get wider than the textboxes the more I resize the browser window. Any ideas why?

**SCRN :**

![enter image description here](../Images/2c7f7d7e080dead45008c6b752d97073.png)

**HTML :**

```
 <!DOCTYPE html>
    <html>
    <head>
        <title>Title</title>
        <script src="scripts/ajax.js"></script>
        <link rel="stylesheet" href="css/custom.css" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
<div data-role='page' id='confirmDetails' data-add-back-btn='true' data-theme='a'>
<div data-role='header' data-position='fixed'><h1>Confirm Details</h1></div>
<div class='ui-body ui-body-e'><p><strong>Please recheck your details to make sure they are correct, then press confirm.</strong></p></div>
<div data-role='content'>
<div><label>Name</label><input type='text' value='Some factor name' disabled /></div>
<div><label>VAT No</label><input id='txtFVATNo' type='text' value='121212121' placeholder='vat no' /></div>
<div><label>Email</label><input id='txtFEmail' type='email' value='a@b.com' autocapitalize='none' placeholder='email address' /></div>
<div><label>Name</label><input id='txtFContactName' type='text' value='Muhammad' autocapitalize='words' placeholder='contact name' /></div>
<input type='submit' id='btnConfirm' value='Everything Correct - Confirm!' data-icon='check' data-iconpos='right' /></div>
</div>
    </body>
    </html> 
```

EDIT:

Setting custom css for the #confirmButton to width 97% didnt work,

This didnt work either :

```
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box; 
```

Here is the CSS for the button :

```
webkit-appearance: none;
-webkit-box-align: center;
-webkit-rtl-ordering: logical;
-webkit-user-select: text;
background-attachment: scroll;
background-clip: border-box;
background-color: rgba(255, 255, 255, 0);
background-image: none;
background-origin: padding-box;
border-bottom-color: black;
border-bottom-style: none;
border-bottom-width: 0px;
border-left-color: black;
border-left-style: none;
border-left-width: 0px;
border-right-color: black;
border-right-style: none;
border-right-width: 0px;
border-top-color: black;
border-top-style: none;
border-top-width: 0px;
box-sizing: border-box;
color: black;
cursor: pointer;
display: block;
filter: none;
font-family: Helvetica, Arial, sans-serif;
font-size: 1px;
font-style: normal;
font-variant: normal;
font-weight: normal;
height: 39px;
left: 0px;
letter-spacing: normal;
line-height: normal;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 0px;
margin-top: 0px;
opacity: 0.10000000149011612;
padding-bottom: 1px;
padding-left: 6px;
padding-right: 6px;
padding-top: 1px;
position: absolute;
text-align: center;
text-decoration: none;
text-indent: -9999px;
text-shadow: none;
text-transform: none;
top: 0px;
white-space: pre;
width: 391px;
word-spacing: 0px;
z-index: 2; 
```

SCREENSHOT (for my head hurts) :

![enter image description here](../Images/6b1e32df05bfa654be52bf0190906efa.png)

**SOLUTION :**

This works with latest 1.1.0 release.

```
input.ui-input-text, textarea.ui-input-text {
    width: 100% !important;       /* used to be width: 97%; */
    /* add box sizing so padding is included in width */
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:57:10.047

In `jquery.mobile-1.1.0.min.css` there is a conflicting combination of widths, padding and margin between `input.ui-input-text, textarea.ui-input-text` and `.ui-btn`, which is why they appear differently.

Change the css to the following:

```
.ui-btn {
    ....
    margin: 0.5em 0;   /* used to be margin: 0.5em 5px; */
    ....
}

input.ui-input-text, textarea.ui-input-text {
    ....
    width: 100% !important;       /* used to be width: 97%; */
    /* add box sizing so padding is included in width */
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    ....
} 
```

This should resolve your issues: [http://jsfiddle.net/RVgnC/5/](http://jsfiddle.net/RVgnC/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T09:50:29.323

Do not use "width:100%" if your CSS button have "padding-left / padding-right",

please try change to "width:97%" or 95% or else.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:57:58.477

For older versions you can postprocess the width via javascript. But you have to change the padding to 'px' to subtract it from $('.ui-content').outerWidth();

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T14:17:34.267

If you put it in a table you can apply the

[http://www.w3.org/TR/REC-CSS2/tables.html#width-layout](http://www.w3.org/TR/REC-CSS2/tables.html#width-layout)

property -> `<table style="table-layout:fixed">`

That will prevent any from streching past their set widths! that includes jQuery buttons inside them ;)

# php - 一种最小化我的 sql 查询的方法

> ID：10171817
> 
> 赞同：0
> 
> 时间：2012-04-16T09:42:11.987
> 
> 标签：php, mysql, wordpress

我想尽可能减少 sql 查询，以节省服务器上的一些负载。提交表单时，我有这个 mysql 查询，

```
$updateglobal_products_data = array(
                        'products_type' => tep_db_prepare_input($HTTP_POST_VARS['products_type']),
                        'global_category_id' => tep_db_prepare_input($HTTP_POST_VARS['global_categories']),
                        'display_product' => tep_db_prepare_input($HTTP_POST_VARS['display_product']),
                        'products_description' => tep_db_prepare_input(strip_tags($HTTP_POST_VARS['products_description'][1])),
                        'products_name' => tep_db_prepare_input(stripslashes($HTTP_POST_VARS['products_name'][1])),
                        'products_image' => $products_image->filename,
                        'products_last_modified' => tep_db_prepare_input($gcurrent_datetime),
                        'products_quantity' => (int)tep_db_prepare_input($HTTP_POST_VARS['products_quantity']),
                        'products_model' => tep_db_prepare_input($HTTP_POST_VARS['products_model']),
                        'products_price' => $products_price,
                        'products_date_available' => $products_date_available,
                        'products_weight' => (float)tep_db_prepare_input($HTTP_POST_VARS['products_weight']),
                        'products_status' => tep_db_prepare_input($HTTP_POST_VARS['products_status']),
                        'products_tax_class_id' => tep_db_prepare_input($HTTP_POST_VARS['products_tax_class_id']),
                        'manufacturers_id' => (int)tep_db_prepare_input($HTTP_POST_VARS['manufacturers_id']));

$sql_data_array = array('products_quantity' => (int)tep_db_prepare_input($HTTP_POST_VARS['products_quantity']),
                        'products_type' => tep_db_prepare_input($HTTP_POST_VARS['products_type']),
                        'img_display' => tep_db_prepare_input($HTTP_POST_VARS['image_display']),
                        'products_model' => tep_db_prepare_input($HTTP_POST_VARS['products_model']),
                        'products_price' => tep_db_prepare_input($HTTP_POST_VARS['products_price']),
                        'products_date_available' => $products_date_available,
                        'products_weight' => (float)tep_db_prepare_input($HTTP_POST_VARS['products_weight']),
                        'products_status' => tep_db_prepare_input($HTTP_POST_VARS['products_status']),
                        'products_tax_class_id' => tep_db_prepare_input($HTTP_POST_VARS['products_tax_class_id']),
                        'manufacturers_id' => (int)tep_db_prepare_input($HTTP_POST_VARS['manufacturers_id']));

$update_sql_data = array('products_last_modified' => 'now()');
$sql_data_array = array_merge($sql_data_array, $update_sql_data);

  $wpdb->update( TABLE_PRODUCTS, $sql_data_array, array( 'products_id' => $products_id ));
  $wpdb->update( TABLE_GLOBAL_PRODUCTS, $updateglobal_products_data, array( 'blog_id' => $blog_id, 'products_id' => $products_id ));

  $delete_rps = "DELETE from " . TABLE_RELATED_PRODUCTS . " where products_id = '" . $products_id . "'";
  $wpdb->query("DELETE from " . TABLE_RELATED_PRODUCTS . " where products_id = '" . $products_id . "'");

  if(mysql_query($delete_rps)) {
    foreach($insert_rp_ids1 as $id){ 
    $rps_each2 = array('products_id' => $products_id, 'related_products_ids' => $id);
    $wpdb->insert(TABLE_RELATED_PRODUCTS, $rps_each2);
    }
  }

$wpdb->query("DELETE from " . TABLE_RELATED_PRODUCTS . " where related_products_ids = '" . $products_id . "'");

foreach($insert_rp_ids1 as $rp_ids)
 {

$result_rp = mysql_query("SELECT related_products_ids, products_id FROM ".TABLE_RELATED_PRODUCTS." where products_id = '" . $rp_ids ."'");
 if(!mysql_num_rows($result_rp))
   {
     $rps_each2 = array('products_id' => $rp_ids, 'related_products_ids' => $products_id);
     $wpdb->insert(TABLE_RELATED_PRODUCTS, $rps_each2);

   }
 } 
```

有没有办法最小化这些 sql 查询？或者我的代码还可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:53:20.780

一般来说，这段代码有点难以理解。评论在哪里？似乎您正在执行涉及多个表的多项操作，但具体是什么并不明显。

一些想法：

您在 $insert_rp_ids1 上循环了两次 - 您可以合并这些循环吗？最好有不同的 INSERT、UPDATE 和 DELETE 部分，清楚地标有 IMO 注释。

仅当删除成功时才插入。为什么不插入任何一种方式？

此外，您的一些变量名称有点不透明。$rps_each2 和 $insert_rp_ids1 到底是什么？像 $listOfProductIDsToInsert 这样的名称更具描述性，因此将来更易于维护，尤其是在其他人必须处理此代码时。

你的缩进有点好笑。假设这不是复制/粘贴错误，这对使代码可读很重要，因此需要修复。

除此之外，您的 SQL 看起来非常紧凑和高效。

# php - 获取所有使用权重的标签

> ID：10171819
> 
> 赞同：0
> 
> 时间：2012-04-16T09:42:29.260
> 
> 标签：php, mysql, tags

我正在使用 Toxi mysql 架构[http://forge.mysql.com/wiki/TagSchema#Toxi](http://forge.mysql.com/wiki/TagSchema#Toxi)（三个表，多对多关系）创建一个带有 php 和 mysql 的自定义标签系统。

我看过很多例子如何检索最常用的标签等。例如

```
SELECT tag_text, COUNT(*) as num_items
FROM Item2Tag i2t
INNER JOIN Tags t ON i2t.tag_id = t.tag_id
GROUP BY tag_text; 
```

但是我需要检索系统中的所有标签（而不仅仅是使用的标签），每个标签都有使用权重，并且尚未使用的标签的权重为零。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:46:03.240

试试下面的查询，我会得到`Tags`表中的所有标签

```
SELECT tag_text, COUNT(i2t.tag_id) as num_items
FROM Tags t
LEFT JOIN Item2Tag i2t ON i2t.tag_id = t.tag_id
GROUP BY tag_text; 
```

# android - 防止后退按钮取消 DialogFragment

> ID：10171822
> 
> 赞同：55
> 
> 时间：2012-04-16T09:42:37.567
> 
> 标签：android, android-asynctask, progressdialog, fragment, back-button

我有一个可以创建和弹出 DialogFragment 的 Fragment，但是当我点击后退按钮时，即使我明确调用 setCancelable(false); 也会关闭对话框；有什么办法让我的 DialogFragment 对后退按钮不敏感？

```
public class LoadingDialogFragment extends DialogFragment
{
    String title;
    String msg;

    public LoadingDialogFragment()
    {
        this.title = "Loading...";
        this.msg = "Please wait...";
    }
    public LoadingDialogFragment(String title, String msg)
    {
        this.title = title;
        this.msg = msg;
    }

    @Override
    public Dialog onCreateDialog(final Bundle savedInstanceState)
    {
        final ProgressDialog dialog = new ProgressDialog(getActivity());

        dialog.setTitle(title);
        dialog.setMessage(msg);
        dialog.setIndeterminate(true);
        dialog.setCanceledOnTouchOutside(false);
        dialog.setCancelable(false);

        return dialog;
    }

} 
```

我从 AsyncTask 创建 DialogFragment：

```
private class GpsTask extends AsyncTask<String, Integer, Integer>
{
    //ProgressDialog dialog;
    @Override
    protected void onPreExecute()
    {
        FragmentTransaction ft = getSupportFragmentManager().beginTransaction();
        DialogFragment newFragment = new LoadingDialogFragment("Gathering Location", "Acquiring GPS lock...");
        ft.addToBackStack(null);
        newFragment.show(ft, "dialog");
    }

    @Override
    protected Integer doInBackground(String... params)
    {
        //acquire a GPS lock and grab a few position updates
    }

    @Override
    protected void onProgressUpdate(Integer... input) { }

    @Override
    protected void onPostExecute(Integer result)
    {
        getSupportFragmentManager().popBackStackImmediate();
    }
} 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-04-16T09:47:43.437

怎么用[`setCancelable`](http://developer.android.com/reference/android/app/DialogFragment.html#setCancelable%28boolean%29)？你试过了吗？

**从文档：**

> 控制显示的 Dialog 是否可取消。使用这个而不是直接调用Dialog.setCancelable(boolean)，因为DialogFragment需要基于这个改变它的行为

**对于自定义 DialogFragment**

添加`isCancelable = false`于`onCreateDialog`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-02T10:35:46.723

```
 DialogFragment newFragment = YourFragment.newInstance();
                newFragment.setCancelable(false);
                newFragment.show(fragmentTransaction, "dialog"); 
```

在 .Show() 片段之前添加 setCancelable(false)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-16T09:55:39.940

我完全不确定这是否适用于 FragmentDialogs，但如果 setCancelable 对您不起作用，则可能值得看看这篇文章：[Android：按下后退按钮时提示用户保存更改](https://stackoverflow.com/questions/2459848/android-prompt-user-to-save-changes-when-back-button-is-pressed)

它解释了如何检测被按下的后退按钮。所以也许你可以按下按钮，它会阻止对话框关闭？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-14T15:05:55.637

`onCreateDialog`与`onCreateView`：

> 实现应覆盖此类并实现 onCreateView(LayoutInflater, ViewGroup, Bundle) 以提供对话框的内容。或者，他们可以覆盖 onCreateDialog(Bundle) 以创建具有自己内容的完全自定义对话框，例如 AlertDialog。

使用时重要`onCreateDialog`：

> 覆盖以构建您自己的自定义对话框容器。这通常用于显示 AlertDialog 而不是通用 Dialog；这样做时，不需要实现 onCreateView(LayoutInflater, ViewGroup, Bundle)，**因为**AlertDialog 会处理自己的内容。

示例`Dialog`（在本例中为`AlertDialog`）：

```
public static class MyAlertDialogFragment extends DialogFragment {

    public static MyAlertDialogFragment newInstance(int title) {
        MyAlertDialogFragment frag = new MyAlertDialogFragment();
        Bundle args = new Bundle();
        args.putInt("title", title);
        frag.setArguments(args);
        return frag;
    }

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {
        int title = getArguments().getInt("title");

        return new AlertDialog.Builder(getActivity())
                .setIcon(R.drawable.alert_dialog_icon)
                .setTitle(title)
                .setCanceble(false)
                .setPositiveButton(R.string.alert_dialog_ok,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ((FragmentAlertDialog)getActivity()).doPositiveClick();
                        }
                    }
                )
                .setNegativeButton(R.string.alert_dialog_cancel,
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int whichButton) {
                            ((FragmentAlertDialog)getActivity()).doNegativeClick();
                        }
                    }
                )
                .create();
    }
} 
```

该属性`setCanceble(boolean)`说明您是否可以`Dialog`通过后按退出。无需在任何地方捕获 KEYCODE_BACK。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-10-13T11:38:20.997

它可能会帮助你。

```
newFragment.setCancelable(false); 
```

在创建 DialogFragment 对象时或在自定义 DialogFragment 的构造函数中进行类似的更改，如下面的示例所示。

```
public static CustomClearHourDialog newInstance(Bundle args, IDialogListener listener)
        {
            CustomClearHourDialog clearHourDialog = new CustomClearHourDialog();            
            CustomClearHourDialog.listener = listener;
            clearHourDialog.setCancelable(false);
            return clearHourDialog;
        } 
```

# sql - 将 XML 数据分解为 SQL 行时保留元素顺序

> ID：10171823
> 
> 赞同：5
> 
> 时间：2012-04-16T09:42:49.770
> 
> 标签：sql, sql-server-2005, xquery

在 SQL Server 视图中将 XML 分解为行时，如何返回元素序列？

样本输入：

```
<ol>
  <li>Smith</li>
  <li>Jones</li>
  <li>Brown</li>
</ol> 
```

期望的输出：

```
Sequence  Name
--------  -----------
    1     Smith
    2     Jones
    3     Brown 
```

现有视图：

```
CREATE VIEW OrderedList
AS
SELECT [Sequence] = CAST(NULL AS int)   -- TODO: Get ordinal position
       [Name] = b.b.value('.', 'nvarchar(max)')
FROM
(
    SELECT a = CAST('<ol><li>Smith</li><li>Jones</li><li>Brown</li></ol>' AS xml)
) a
CROSS APPLY a.a.nodes('/ol/li') b (b) 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T12:04:17.887

您可以`row_number()`在 xml 节点上使用。

```
CREATE VIEW OrderedList
AS
SELECT [Sequence] = ROW_NUMBER() OVER(ORDER BY b.b),
       [Name] = b.b.value('.', 'nvarchar(max)')
FROM
(
    SELECT a = CAST('<ol><li>Smith</li><li>Jones</li><li>Brown</li></ol>' AS xml)
) a
CROSS APPLY a.a.nodes('/ol/li') b (b) 
```

参考：Adam Machanic[使用 DENSE_RANK 唯一标识 XML 节点。](http://sqlblog.com/blogs/adam_machanic/archive/2009/08/03/uniquely-identifying-xml-nodes-with-dense-rank.aspx)

# eclipse - eclipse rcp开发中的控制台视图？

> ID：10171825
> 
> 赞同：0
> 
> 时间：2012-04-16T09:42:58.633
> 
> 标签：eclipse, swt, eclipse-rcp, jface

我想使用 eclipse rcp 技术实现一个像 eclipse 控制台这样的应用程序。我可以运行我的 java 程序并在控制台中显示输出的单个应用程序。

问题是我想实现像 Eclipse 控制台这样的“终止”按钮，我可以在其中按下它并终止程序。我发现eclipse的控制台插件好像没有提供这个功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T14:49:23.010

我认为，您可以尝试在您的 plugin.xml 中定义自己的命令，这将在控制台视图中提供一个按钮：

```
<menuContribution allPopups="false"     locationURI="toolbar:ConsoleViewID">
<command commandId="your.plugin.id.terminatecommand"
            icon="platform:/plugin/your.plugin.id/images/red_rectangle.png"
            label="%Terminate"
            style="push">
        </command>
    </menuContribution>

    <extension point="org.eclipse.ui.commands">
<command
            defaultHandler="your.plugin.id.TerminateCommandHanler"
            id="your.plugin.id.terminatecommand"
            name="RefreshSelectedCommand">
        </command>
</extension> 
```

在命令处理程序中，您可以这样做：

```
PlatformUI.getWorkbench().close(); 
```

或者

```
IWorkbenchConfigurer#emergencyClose(); 
```

希望能帮助到你

# c# - javascript .click() 在 chrome 驱动程序中不起作用

> ID：10171826
> 
> 赞同：1
> 
> 时间：2012-04-16T09:43:04.710
> 
> 标签：c#, javascript, jquery, google-chrome, webdriver

这是我的代码：

```
String script = "document.getElementById('"+Sendcontrol+"').click();";
((IJavaScriptExecutor)driver).ExecuteScript(script); 
```

但它显示

> 脚本执行失败。没有“点击”方法

那么，我该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:01:31.717

尝试`onclick()`，而不是`click()`.

[document.getElementById](https://developer.mozilla.org/en/DOM/document.getElementById)方法返回[DOM Element](https://developer.mozilla.org/en/DOM/element)，它没有`"click"`您尝试调用的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-16T09:53:19.273

错误是不言自明的。在 chrome 中，并非每个任意元素都有方法`click`。

# php - 如果您在 Web 服务器将文件提供给网站访问者时删除 PHP 中的文件会发生什么

> ID：10171829
> 
> 赞同：3
> 
> 时间：2012-04-16T09:43:08.343
> 
> 标签：php, filesystems, unlink

```
unlink("cache/data.xml"); 
```

我觉得这可能会在服务器可能正在读取并将其提供给访问者时产生错误。

如何安全地删除文件，以便脚本将继续等待，直到来自 Web 服务器的读取锁定被释放（如果有），然后继续删除文件或它如何在那里工作？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T09:54:09.130

这将取决于运行它的特定系统，但 UNIX`unlink`函数的手册页（PHP`unlink`函数很可能在内部依赖）这样说：

> 该`unlink()`函数从其目录中删除由 path 命名的链接，并减少链接所引用文件的链接计数。如果该减量将文件的链接计数减少到零，并且没有进程打开该文件，则与该文件关联的所有资源都将被回收。如果一个或多个进程在删除最后一个链接时打开了文件，则删除链接，但文件的删除会延迟，直到所有对它的引用都已关闭。

换句话说，读取文件的进程可以继续这样做，即使文件正在被删除。

# apache-flex - 地图列表的 Flex 反序列化问题

> ID：10171835
> 
> 赞同：0
> 
> 时间：2012-04-16T09:43:29.810
> 
> 标签：apache-flex, flex4, flex4.5, blazeds, flex-mobile

我在使用 BlazeDS 到 Flex 移动反序列化时遇到问题，因此我尝试`List<Map<String, Object>>`在每个地图中发回具有不同对象的地图列表，但是当我在 flex 代码中收到此列表时：

```
hastalarim  = event.result as ArrayCollection; 
```

但是当我在 flex 代码中调试它时，我看到该列表中有 7 个相同对象的实例（插入到服务器端的第一个对象）。

这是我在服务器端的方法：

```
public List<Map<String, Object>> getHastalarim(String personelId, String servisId) {

        List hastalar =  karDAO.getHastalarim(personelId,servisId);

        Map<String, Object> mp = new HashMap<String, Object>();
        List<Map<String, Object>> lst = new ArrayList<Map<String,Object>>();

        for (int i = 0; i < hastalar.size(); i++) {
            Object[] obj = (Object[]) hastalar.get(i);

            mp.clear();

            mp.put("hastaId", (String) obj[0]);
            mp.put("adi",(String) obj[1]);
            mp.put("soyadi", (String) obj[2]);
            mp.put("tckimlikNo", (String) obj[3]);
            mp.put("yasi", (Integer) obj[4]);
            mp.put("vizitTar", obj[5].toString());          
            mp.put("vizitId", (String) obj[6]);
            mp.put("cinsiyeti", (String) obj[7]);
            mp.put("resim", getHastaResim((String) obj[3]));

            lst.add(mp);

            }
            return lst;
} 
```

这里有什么问题？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:48:30.513

```
 for (int i = 0; i < hastalar.size(); i++) {
            Object[] obj = (Object[]) hastalar.get(i);

            Map<String, Object> mp = new HashMap<String, Object>();

            mp.put("hastaId", (String) obj[0]);
            mp.put("adi",(String) obj[1]);
            mp.put("soyadi", (String) obj[2]);
            mp.put("tckimlikNo", (String) obj[3]);
            mp.put("yasi", (Integer) obj[4]);
            mp.put("vizitTar", obj[5].toString());          
            mp.put("vizitId", (String) obj[6]);
            mp.put("cinsiyeti", (String) obj[7]);
            mp.put("resim", getHastaResim((String) obj[3]));

            lst.add(mp);

            }
            return lst;
       } 
```

创建导致问题的地图的多个实例。

# ajax - 组合框不显示来自 ext.data.arraystore 的数据

> ID：10171836
> 
> 赞同：0
> 
> 时间：2012-04-16T09:43:38.827
> 
> 标签：ajax, extjs, autocomplete

我使用 Ext.form.combobox 执行自动完成搜索，我的数据存储在数组存储中：ext.data.arraystore，实际上数组存储中的数据是通过 ajax 请求加载的，这是我的数组存储代码：

```
var ds = new Ext.data.ArrayStore({
    fields: ['description','lat','lng'],
    data: xmlarray
}); 
```

其中 xmlarray 是使用 ajax 请求从 php 服务器加载的数据数组

这是我的组合框代码：

```
 var timePanel = {
        xtype: 'panel',
        border: false,
        width: 600,
        bodyPadding: 10,
        layout: 'anchor',

        items: [{
        xtype:'combo' ,
        displayField:'displayValue',
        valueField: 'id',
        store: ds,
        mode: 'local',
        typeAhead: true,
        triggerAction: 'all',
        hideTrigger:false,
        lazyRender: true,
        emptyText: 'select a city',
        forceSelection: false,
        typeAhead: true,
        selectOnFocus: true,
        enableKeyEvents:true,

         listConfig: {
            loadingText: 'Searching...',
            emptyText: 'No matching posts found.',

            // Custom rendering template for each item
            getInnerTpl: function() {
                return '<div class="search-item">' +
                    '<h3><span>{[Ext.Date.format(values.lastPost, "M j, Y")]}<br />by {author}</span>{title}</h3>' +
                    '{excerpt}' +
                '</div>';
            }
        },
          pageSize: 10,
          //listeners:  {select: this.GeocoderRequest};

            }

            ]
    }; 
```

我的主要问题是组合框向我显示了一组空的选择行，而每个选择行都应该显示我的数据中的一个名称，但它是空的。我的 arrastore 或组合框配置有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:52:15.347

```
fields: ['description','lat','lng'],

...

displayField:'displayValue',
valueField: 'id', 
```

商店中没有名为 displayValue 的字段，因此组合框无法找到它正在寻找的值。valueField 也是如此。

# kdb - KDB/Q 内存消耗

> ID：10171837
> 
> 赞同：10
> 
> 时间：2012-04-16T09:43:50.163
> 
> 标签：kdb

我有一个 KDB/Q 数据库，每天有大约 200 万条记录，消耗大约 2G 内存。在一天结束时，它会运行一些报告内容，在表之间进行连接并将结果输出到磁盘上的文件中。在计算期间，内存使用量增长到~15G。我的问题是，一旦此操作完成，内存就永远不会被释放，直到数据库重新启动它才会消耗所有 15G 内存。

我想告诉 KDB 从内存中卸载一些表（但不要删除它们），但我不想重新启动数据库，因为其他一些应用程序仍在连接到它。

有没有办法告诉 KDB 从内存中卸载一些东西？

**编辑：**

如果有人觉得这很有趣，我建议看看[`.Q.gc[]`](http://code.kx.com/q/ref/dotq/#qgc-garbage-collect)KDB 2.5+，看起来很有希望。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-18T11:10:36.043

以下是我的研究总结：

*   KDB 之前的版本。2.5 根据需要分配 64MB 内存块并且从不释放它们。它可以重用它们。
*   最近的 KDB 版本允许[`.Q.gc[]`](http://code.kx.com/q/ref/dotq/#qgc-garbage-collect)按需调用垃圾收集器（KDB 使用 ref.counting btw.）
*   当您调用一些分配大量内存的内存密集型计算（在我的情况下约为 20gB）并且您希望在计算完成后释放内存时，这尤其有用。
*   您总是可以考虑将内存密集型脚本放入单独的 Q 进程中，以便在脚本完成后释放内存

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T18:29:34.573

这可能很明显，但除了检查您的 q 版本的垃圾收集模式之外，请确保您实际上已经摆脱了正在使用内存的内存中数据。如果您可以摆脱整个表（例如，这是一个参与计算的临时表），只需从根命名空间中删除它

```
delete table from`. 
```

如果没有，您可以删除其所有行

```
delete from`table 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-18T03:22:36.203

对于将来尝试此操作的任何人，最简单的方法是：

1.  启动一个新的 KDB 进程。
2.  从该过程查询中选择所需的最小有限数据子集。
3.  从该过程执行任何连接/计算/写入文件。（允许原件进行处理请求）
4.  关闭进程，释放所有内存。

正如上面的海报所提到的，较新版本的 KDB 可以更好地释放内存，但并不完美。

我们公司网站上有一篇很好的文章详细介绍了 KDB+ 内存管理： [http ://timestored.com/kdbGuides/memoryManagement](http://timestored.com/kdbGuides/memoryManagement)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-27T00:02:50.720

[http://code.kx.com/q4m3/12_Workspace_Organization/#125-expunging-from-a-context](http://code.kx.com/q4m3/12_Workspace_Organization/#125-expunging-from-a-context)

我使用了一些不同的命令。只要您的表在删除之前存储在磁盘上，就可以了。

这是创建表之前的会话。

```
q).Q.w[]
used| 290192
heap| 67108864
peak| 67108864
wmax| 0
mmap| 0
mphy| 8589934592
syms| 629
symw| 20704 
```

此命令创建表，然后将其保存到磁盘。

```
q)t:([]10000?"ab"; 10000?5)
q)save `t
`:t 
```

该表仍在内存中

```
q).Q.w[]
used| 437808
heap| 67108864
peak| 67108864
wmax| 0
mmap| 0
mphy| 8589934592
syms| 629
symw| 20704 
```

让我们从内存中删除变量并进行垃圾收集。

```
q)delete t from `.
`.
q).Q.gc[]
0 
```

现在，已使用的内存已减少到与会话开始类似的数量。

```
q).Q.w[]
used| 290208
heap| 67108864
peak| 67108864
wmax| 0
mmap| 0
mphy| 8589934592
syms| 630
symw| 20730
q)\v
`symbol$() 
```

# android - 如何防止名称缓存并在发现时检测蓝牙名称更改

> ID：10171843
> 
> 赞同：1
> 
> 时间：2012-04-16T09:44:21.387
> 
> 标签：android, caching, bluetooth, names

我正在编写一个从蓝牙设备接收信息的 Android 应用程序。我们的客户建议蓝牙设备（他们生产的）将根据某些条件更改其名称 - 最简单的示例，它的名称有时是“xxx-ON”，有时是“xxx-OFF”。我的应用程序只是应该寻找这个 BT 发射器（我使用 BluetoothAdapter.startDiscovery() ）并根据它找到的名称做不同的事情。我没有与蓝牙设备配对（尽管我认为它可能是可能的，该应用程序最终应该可以与多个 Android 设备和多个 BT 发射器一起使用，所以我不确定这是否是一个好主意）。

我的代码可以很好地检测 BT 设备并找到它们的名称。此外，如果设备关闭，我可以在下次搜索时检测到它不存在。但似乎如果它在那里并且它改变了名称，我会选择旧名称 - 大概它被缓存在某个地方。即使蓝牙设备关闭，我们注意到，下次我检测到它时，我仍然会看到旧名称。

我在 Google Code: [here](http://code.google.com/p/android/issues/detail?id=3081)中发现了这个问题，但我什至不清楚如何使用给定的解决方法（“尝试连接”）。有没有人这样做并且有运气？可以分享代码吗？

有没有一种简单的方法可以删除缓存的名称并再次搜索，这样我总能找到最新的名称？即使是一种非简单的方法也很好（我正在为有根设备编写）。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T15:30:53.340

我会建议“fetchUuidsWithSdp()”。其意义在于，与类似的 getUuids() 方法不同，fetchUuidsWithSdp 会导致设备更新有关远程设备的缓存信息。我相信这包括远程名称以及 SPD。

请注意，我提到的两种方法在 4.0.3 之前都是隐藏的，因此您的代码看起来像这样：

```
public static void startServiceDiscovery( BluetoothDevice device ) {
    // Need to use reflection prior to API 15
    Class cl = null;
    try {
        cl = Class.forName("android.bluetooth.BluetoothDevice");
    } catch( ClassNotFoundException exc ) {
        Log.e(CTAG, "android.bluetooth.BluetoothDevice not found." );
    }
    if (null != cl) {
        Class[] param = {};
        Method method = null;
        try {
            method = cl.getMethod("fetchUuidsWithSdp", param);
        } catch( NoSuchMethodException exc ) {
            Log.e(CTAG, "fetchUuidsWithSdp not found." );
        }
        if (null != method) {
            Object[] args = {};
            try {
                method.invoke(device, args);
            } catch (Exception exc) {
                Log.e(CTAG, "Failed to invoke fetchUuidsWithSdp method." );
            }               
        }
    }
} 
```

然后，您需要侦听 BluetoothDevice.ACTION_NAME_CHANGED 意图，并从中提取 BluetoothDevice.EXTRA_NAME。

让我知道这是否有帮助。

# python - 树的广度优先遍历，Python

> ID：10171844
> 
> 赞同：4
> 
> 时间：2012-04-16T09:44:27.167
> 
> 标签：python, recursion, tree, breadth-first-search

我想出了一棵树的深度优先遍历。

```
def _dfs(tree, res):
    if tree:
        res += [tree.key]
        _dfs(tree.left, res)
        _dfs(tree.right, res)
    return res 
```

我似乎找不到广度优先搜索的解决方案。是否必须使用队列或堆栈？

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-16T10:01:44.413

你可以使用双端队列。这是 Magnus Lie Hetland 的 bfs 的经典实现（使用 FIFO 队列）。

```
from collections import deque

def bfs(G, s):
    P, Q = {s: None}, deque([s]) 
    while Q:
        u = Q.popleft() 
        for v in G[u]:
            if v in P: continue 
            P[v] = u 
            Q.append(v)
    return P 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T09:47:04.147

是的，您必须使用队列来保存您已检查但尚未递归到的节点。

从队列中的根节点开始，然后重复[弹出一个节点并为它的每个子节点，执行您需要的任何操作（`res += [tree.key]`）并将其推入队列]。

# json - iTunes API：获取应用程序的 100x100 像素图标

> ID：10171848
> 
> 赞同：4
> 
> 时间：2012-04-16T09:45:00.917
> 
> 标签：json, app-store

我正在使用 iTunes API 来获取有关 App Store 中应用程序的一些信息。

阅读[文档](http://www.apple.com/itunes/affiliates/resources/documentation/itunes-store-web-service-search-api.html)时，我看到从 JSON 请求中获取的“artworkUrl100”参数会给我一个 100x100 的应用程序图标。

我注意到这并不总是有效，有时它包含一个最大图标的 url。

有没有办法确定这个图标（100x100 px）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T11:05:19.297

你可以这样做。假设这是您的链接： [http ://a223.phobos.apple.com/us/r1000/049/Purple/e0/ed/59/mzi.qaoavtgs.png](http://a223.phobos.apple.com/us/r1000/049/Purple/e0/ed/59/mzi.qaoavtgs.png)

（来自“artworkUrl512”）。

您只需在*.png*之前添加*.100x100-75*就像这样 [http://a223.phobos.apple.com/us/r1000/049/Purple/e0/ed/59/mzi.qaoavtgs](http://a223.phobos.apple.com/us/r1000/049/Purple/e0/ed/59/mzi.qaoavtgs) **.100x100-75** .png

 ***ju 还可以通过添加不同的值（如 0.150x150-75）来调整您需要的图标大小。唯一的问题是这个*-75*部分取决于图标大小。对于较小的图标，它也可以是*-50* ，对于中等大小的图标，它也可以是*-65 。*我仍然没有弄清楚。

希望这对您有所帮助。

编辑：您不必担心 .jpg 或 .jpeg。您可以用 .png 替换所有内容，它会起作用。***

# java - Java：replaceAll 不适用于反斜杠？

> ID：10171852
> 
> 赞同：1
> 
> 时间：2012-04-16T09:45:13.303
> 
> 标签：java, regex, replaceall

我正在尝试用反斜杠将字符串的开头替换为其他内容。由于某些奇怪的原因，replaceAll 函数不喜欢反斜杠。

```
String jarPath = "\\\\xyz\\abc\\wtf\\lame\\";
jarPath = jarPath.replaceAll("\\\\xyz\\abc", "z:"); 
```

我应该怎么做才能解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:49:07.617

您需要将每个反斜杠（再次）加倍，因为 replaceAll() 使用的 Pattern 类将其视为特殊字符：

```
String jarPath = "\\\\xyz\\abc\\wtf\\lame\\";
jarPath = jarPath.replaceAll("\\\\\\\\xyz\\\\abc", "z:"); 
```

Java 字符串将反斜杠视为转义字符，因此 replaceAll 看到的是：`\\\\xyz\\abc`。但 replaceAll 也将反斜杠视为转义字符，因此正则表达式变为字符：`\` `\` `x` `y` `z` `\` `a` `b` `c`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-16T09:49:35.267

它不喜欢它，因为它`\`是类 C 语言中的转义字符（即使在这个论坛上作为转义字符），这使得它成为文件分隔符的糟糕选择，但这是他们在 MS-DOS 中引入的一个变化......

你遇到的问题是你已经转义了`\`两次，所以`\\host\path`变成`\\\\host\\path`了字符串，但是对于正则表达式必须再次转义：P`\\\\\\\\host\\\\path`

如果您可以使用正斜杠，这会简单得多

```
String jarPath = "//xyz/abc/wtf/lame/";
jarPath = jarPath.replaceAll("//xyz/abc", "z:"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T09:49:05.400

replaceAll() 使用正则表达式，它使用反斜杠作为转义字符。此外，Java String 语法还使用反斜杠作为转义字符。这意味着您需要将所有反斜杠加倍才能获得所需的内容：

```
String jarPath = "\\\\xyz\\abc\\wtf\\lame\\";
jarPath = jarPath.replaceAll("\\\\\\\\xyz\\\\abc", "z:"); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-16T09:50:52.793

`replaceAll`期望一个正则表达式作为其输入字符串，然后在每个实例中匹配和替换。反斜杠是正则表达式中的特殊转义字符，为了匹配它，您需要另一个反斜杠来转义它。因此，要将字符串与 匹配`"\"`，您需要一个带有 '"\"` 的正则表达式。

要匹配字符串`"\\\\xyz\\abc"`，您需要正则表达式（请注意每个 source`"\\\\\\\\xyz\\\\abc"`的额外内容）：`\``\`

```
String jarPath = "\\\\xyz\\abc\\wtf\\lame\\";
jarPath = jarPath.replaceAll("\\\\\\\\xyz\\\\abc", "z:"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-16T09:49:13.437

```
jarPath = jarPath.replaceAll("\\\\\\\\xyz\\\\abc", "z:"); 
```

对于字符串中的每个 '\'，您应该在`replaceAll`方法中输入 '\\'。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-16T09:53:14.977

replaceAll 方法使用正则表达式，这意味着您必须转义斜杠。在您的情况下，使用 String.replace 可能是有意义的：

```
String jarPath = "\\\\xyz\\abc\\wtf\\lame\\";
jarPath = jarPath.replace("\\\\xyz\\abc", "z:"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T09:51:25.273

您可以在用例中使用 replace 方法而不是 replaceAll 。如果我没记错的话，它不使用正则表达式。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-16T09:51:28.187

您也可以使用`replace()`将从中删除`\\\\xyz\\abc`的方法`String`

```
String jarPath = "\\\\xyz\\abc\\wtf\\lame\\";
jarPath = jarPath.replace("\\\\xyz\\abc", "z:"); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-13T18:23:48.533

刚遇到类似的问题。

如果您在 replaceAll 函数的第二部分使用反斜杠（），反斜杠将消失，为避免这种情况，您可以使用 Matcher 类。

```
String assetPath="\Media Database\otherfolder\anotherdeepfolder\finalfolder";

String assetRemovedPath=assetPath.replaceAll("\\\\Media Database(.*)", Matcher.quoteReplacement("\\Media Database\\_ExpiredAssets")+"$1");

system.out.println("ModifiedPath:"+assetRemovedPath); 
```

印刷：

```
\Media Database\_ExpiredAssets\otherfolder\anotherdeepfolder\finalfolder 
```

希望能帮助到你！

# javascript - 通过 li click 在 href 上触发 click 事件

> ID：10171855
> 
> 赞同：1
> 
> 时间：2012-04-16T09:45:22.550
> 
> 标签：javascript, jquery, html, triggers

希望通过使用这个小提琴很容易理解：

[http://jsfiddle.net/xQ9Nz/13/](http://jsfiddle.net/xQ9Nz/13/)

它确实“存在” $("a.editarLocal",this)，但它不会触发点击事件。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:52:40.010

当您的意思是“触发点击”时，您希望链接正常工作吗？你不能。

一种解决方法是在使用重定向的链接上注册一个点击事件`window.location`。

例如：

```
// Your code somewhere in the onclick of another element
$('#the-link').click()

// Then, register a click event
$('#the-link').on('click', function() {
    window.location.href = this.href
 }) 
```

编辑：哎呀，看起来评论者在我提交答案时说过。@David Hedlund：创建你的答案，我会删除我的:)

# java - 为什么要使用 session.beginTransaction & transaction.commit

> ID：10171856
> 
> 赞同：2
> 
> 时间：2012-04-16T09:45:23.423
> 
> 标签：java, hibernate, session, transactions

休眠：如果将任何瞬态对象添加到休眠会话中，为什么当我关闭会话时休眠不能持久保存它（在其脏检查之后）。

有没有这样的选择。此外，如果存在这样的选项，那么为什么我们要开始交易并说它要提交。(session.beginTransaction())

一旦我们说 session.close()，transaction.commit() 的哪些功能也可以完成，对吗？请任何人向我解释这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:49:47.543

[事务划分](http://en.wikipedia.org/wiki/Database_transaction)对于正确使用 RDBMS 至关重要，这就是您需要使用 Hibernate 启动和提交事务的原因。

关于您的问题，您不能在关闭会话时隐式关闭事务，但有一种常见做法是在关闭事务后立即关闭会话。[Hibernate 以上下文会话](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/architecture.html#architecture-current-session)的形式为这种模式提供了特殊的支持。

一些框架（Spring、EJB 等）通过消除以编程方式开始和提交事务的需要而走得更远——它们提供声明性事务方法，允许您以声明方式将方法标记为事务性方法。也就是说，当您输入此类方法时，它们会打开上下文会话（如果需要）并开始事务，并在您从它返回时提交事务并关闭会话（如果需要）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T10:53:52.867

session.beginTransaction 用于启动一个事务，该事务可能包含一个或多个粗操作，如 INSERT、SELECT、DELETE 等。而 transaction.commit() 用于提交事务期间发生的所有更改，以便数据库在之后保持一致状态操作。

# c# - 数据行过滤值到数据表

> ID：10171859
> 
> 赞同：0
> 
> 时间：2012-04-16T09:45:25.817
> 
> 标签：c#, asp.net, datarow

我想将数据行过滤器值插入数据表，但它返回以下错误“该行已经属于另一个表。” 请帮我解决这个错误..

这是我的部分代码：

```
 for (int j = 0; j < ListBox1.Items.Count; j++)
                {
                    DataView DV = new DataView();
                    DV = DS1.DefaultView;
                    DV.RowFilter = "fldemployee='" + ListBox1.Items[j].Text + "' and fldassigndate = '04-07-2012'";
                    if (DV.Count > 0)
                    {
                        DataTable table = DV.ToTable("sp_getallattendancesetup");
                        DataRow row = table.Rows[0];
                        DT.Rows.Add(row);

                    }

                }

                GridView1.DataSource = DT;
                GridView1.DataBind(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:49:59.337

您可以使用`ImportRow`

```
DT.Rows.ImportRow(row); 
```

> 来自 msdn 的信息：调用 NewRow 会使用现有表架构向表中添加一行，但使用该行的默认值，并将 DataRowState 设置为已添加。调用 ImportRow 会保留现有的 DataRowState 以及行中的其他值。如果作为参数传递的 DataRow 处于分离状态，则将其忽略，并且不会引发异常。
> 
> 新行将添加到数据表的末尾。
> 
> 如果新行违反约束，则不会将其添加到数据表中。
> 
> 您可以使用 DataTable.Rows.Find 和 DataTable.Rows.IndexOf 来获取新行的索引。有关详细信息，请参阅 DataRowCollection 和行。

参考[这里](http://msdn.microsoft.com/en-us/library/system.data.datatable.importrow.aspx)

# android - 位置 3G 权限

> ID：10171861
> 
> 赞同：0
> 
> 时间：2012-04-16T09:45:29.933
> 
> 标签：android, location

这两个权限有什么区别？

```
Allows an application to access coarse
Allows an application to access fine 
```

根据android的文档，允许应用程序访问粗略用于wifi并允许应用程序访问良好的GPS但用于3G定位，我应该使用哪个？

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:49:56.330

3G是从`NETWORK_PROVIDER`，需要权限“粗”，根据[手册](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

> 为了从 NETWORK_PROVIDER 或 GPS_PROVIDER 接收位置更新，您必须分别通过声明 ACCESS_COARSE_LOCATION 或 ACCESS_FINE_LOCATION 权限来请求用户权限

（注意这里的“分别”这个词:)）

# c# - 查找并为设备分配唯一的 IP 地址

> ID：10171862
> 
> 赞同：0
> 
> 时间：2012-04-16T09:45:39.967
> 
> 标签：c#, ip

我需要为我们将通过它连接到系统的设备分配一个唯一的 IP 地址（本地）。USB。我将通过告诉设备它的 IP 是什么来通过 RS232 进行实际分配（不要问！）。

我想以某种方式找到一个相对于本地 PC 的可用地址，以便告诉设备使用哪个。有没有办法在 C# 中枚举或查找可用地址？我不想简单地使用固定的，以防可能与其他设备发生冲突。

我在这里进行了搜索，有很多人想要找到当前 IP 或现有设备的 IP，但我找不到太多关于生成可用的唯一设备的信息。

谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:31:06.727

Assigning static IP addresses (even if you ping them) is a bad idea. What happens if the IP address you've assigned is to a device that happens to be offline right now?

Use DHCP if you can, and consider prompting the user if you can not retrieve an IP address from DHCP as to what it should be assigned to.

I am not ware of a native C# library for DHCP client's, but using pinvoke will get you what you're after. Example code (not tested) here, [http://www.ianatkinson.net/computing/dhcpcsharp.htm](http://www.ianatkinson.net/computing/dhcpcsharp.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-16T09:49:54.027

好吧，不是很复杂或任何东西，但你为什么不尝试 ping ips，从最低的开始，然后选择第一个没有响应的？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:57:24.790

来自[http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol](http://en.wikipedia.org/wiki/Dynamic_Host_Configuration_Protocol)

> 动态主机配置协议 (DHCP) 是 Internet 协议 (IP) 网络上的主机的网络配置协议。连接到 IP 网络的计算机必须先进行配置，然后才能与其他主机通信。所需的最基本信息是 IP 地址、默认路由和路由前缀。DHCP 消除了网络管理员的手动任务。它还提供连接到网络的设备的中央数据库，并消除重复的资源分配。除了 IP 地址，DHCP 还提供其他配置信息，特别是本地域名服务器 (DNS)、网络引导服务器或其他服务主机的 IP 地址。DHCP 用于 IPv4 和 IPv6。虽然两个版本的目的大致相同，IPv4 和 IPv6 协议的细节有很大不同，它们可以被视为单独的协议。 [1] 不使用 DHCP 进行地址配置的主机仍然可以使用它来获取其他配置信息。或者，IPv6 主机可以使用无状态地址自动配置。IPv4 主机可以使用链路本地寻址来实现有限的本地连接。

# ruby - Detect USB device attachment/detachment and send email

> ID：10171864
> 
> 赞同：1
> 
> 时间：2012-04-16T09:45:45.400
> 
> 标签：ruby, linux, bash

I want to write a simple script that will send email to a specific address as soon as a USB device is plugged into a system or unplugged. Would someone please provide me a code snippet for this? I want to run it on different flavors of Linux where Ruby will be installed already.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:01:19.340

You could add a new udev rule as follows. Create a file `/etc/udev/rules.d/99-my-custom-rule`, whose contents looks as follows:

```
SUBSYSTEM=="usb", ACTION=="add", RUN+="usb_notify_admin add %b"
SUBSYSTEM=="usb", ACTION=="remove", RUN+="usb_notify_admin remove %b" 
```

Then put a script `usb_notify_admin` somewhere in the PATH:

```
#!/bin/sh
echo $@ | mail -s "USB Notify Script" admin@example.com 
```

Details:

*   Writing udev rules: [http://www.reactivated.net/writing_udev_rules.html](http://www.reactivated.net/writing_udev_rules.html)
*   mail man page: [http://linux.die.net/man/1/mail](http://linux.die.net/man/1/mail)

# grails - Errors running grails application

> ID：10171865
> 
> 赞同：3
> 
> 时间：2012-04-16T09:45:48.733
> 
> 标签：grails

I am new on Grails. I have installed grails version 2.0.3\. Whenever i run my app it gives same errors. I am unable to find reason behind this. I am giving complete stacktrace below:

```
| Packaging Grails application.....
[Fatal Error] plugin-list-grailsCentral.xml:14058:53: XML document structures must start and end within the same entity.

| Running Grails application
| Error 2012-04-16 13:58:58,923 [pool-6-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
Message: Error creating bean with name 'transactionManagerPostProcessor': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
   Line | Method
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'transactionManager': Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'sessionFactory': Cannot resolve reference to bean 'hibernateProperties' while setting bean property 'hibernateProperties'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'hibernateProperties': Cannot resolve reference to bean 'dialectDetector' while setting bean property 'properties' with key [hibernate.dialect]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread
Caused by BeanCreationException: Error creating bean with name 'dialectDetector': Invocation of init method failed; nested exception is org.springframework.jdbc.support.MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread
Caused by MetaDataAccessException: Error while extracting DatabaseMetaData; nested exception is org.apache.commons.dbcp.SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
->> 303 | innerRun in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread
Caused by SQLNestedException: Cannot create PoolableConnectionFactory (Access denied for user 'root'@'localhost' (using password: NO))
->> 1549 | createPoolableConnectionFactory in org.apache.commons.dbcp.BasicDataSource
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|   303 | innerRun in java.util.concurrent.FutureTask$Sync
|   138 | run . .  in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run . .  in     ''
^   680 | run      in java.lang.Thread
Caused by SQLException: Access denied for user 'root'@'localhost' (using password: NO)
->> 946 | createSQLException in com.mysql.jdbc.SQLError
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   2985 | checkErrorPacket in com.mysql.jdbc.MysqlIO
|   885 | checkErrorPacket in     ''
|   3421 | secureAuth411 in     ''
|   1247 | doHandshake in     ''
|   2775 | createNewIO in com.mysql.jdbc.Connection
|   1555 | <init> . in     ''
|   285 | connect  in com.mysql.jdbc.NonRegisteringDriver
|    38 | createConnection in org.apache.commons.dbcp.DriverConnectionFactory
|   582 | makeObject in org.apache.commons.dbcp.PoolableConnectionFactory
|   1556 | validateConnectionFactory in org.apache.commons.dbcp.BasicDataSource
|   1545 | createPoolableConnectionFactory in     ''
|   1388 | createDataSource in     ''
|   1044 | getConnection in     ''
|   303 | innerRun in java.util.concurrent.FutureTask$Sync
|   138 | run      in java.util.concurrent.FutureTask
|   886 | runTask  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run      in     ''
^   680 | run . .  in java.lang.Thread 
```

Kindly help me that which is causing this. Thanks in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T09:49:49.367

Stacktrace says that `Access denied for user 'root'@'localhost'`.

Make sure that you have running MySQL instance on `localhost`, that have user `root` without password (because stacktrace says that you didn't specify any). You can check it by calling:

```
> mysql -u root --password='' -D %YOU DATABASE NAME% 
```

More about data source config: [http://grails.org/doc/latest/guide/conf.html#dataSource](http://grails.org/doc/latest/guide/conf.html#dataSource)

# php - 检测用户是否在子域上，然后使用 PHP 添加变量？

> ID：10171866
> 
> 赞同：5
> 
> 时间：2012-04-16T09:45:54.550
> 
> 标签：php, variables, subdomain, detection

我想知道如何创建一个 PHP IF 语句来检测用户是否正在加载/在某个 URL 上。就我而言，它是：

```
www.design.mywebsite.com 
```

IF 语句需要覆盖整个子域，例如，还必须检测 URL：

```
www.design.mywebsite.com/filename.php 
```

建立 IF 语句后，我想添加一个 PHP 变量。所以它可能会帮助其他人，让我们称之为：

```
$myvariable = "Hey there! You're on my subdomain"; 
```

**所以总结一下：** 最终的代码应该是这样的......

```
<?php
  if //Code to detect subdomain// {
    $myvariable = "Hey there! You're on my subdomain";
  }
?> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-16T10:17:28.627

一个简单的解决方案是

```
$host = "baba.stackoverflow.com"; // Your Sub domain

if ($_SERVER['HTTP_HOST'] == $host) {
    echo "Hello baba Sub Domain";
} else {
    echo "not baba domain";
} 
```

你也可以使用 `parse_url` [http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)如果你有`URL`

```
$url = "http://baba.stackoverflow.com/questions/10171866/detect-if-a-user-is-on-a-subdomain-and-then-add-a-variable-using-php";
$info = parse_url($url);
if ($info['host'] == $host) {
    echo "Hello baba Sub Domain";
} else {
    echo "not baba domain";
} 
```

请替换`$url`为`$_GET`;

# jquery - 为什么这个拖放模拟不起作用？

> ID：10171876
> 
> 赞同：0
> 
> 时间：2012-04-16T09:47:01.413
> 
> 标签：jquery, drag-and-drop

html 和 csss 应该如下所示：当然还有对最新 jquery 库 [jsfiddle 链接](http://jsfiddle.net/algaly/bsJZQ/11/light/) **问题的引用，为什么 mousemove 事件不会关闭？**

```
<style>
#ball{
  position : absolute;
  padding : 0px;
  top:0px;
}​
</style>
<img id="ball" src="http://javascript.info/files/tutorial/browser/events/ball.gif"/>
<div id="debug"></div>​

<script>
        var xp = 0,
            yp = 0;
   > when mouse is down we start listen to mousemove
        $(document).on("mousedown", "#ball", function(e) {
            $(document).on("mousemove", this, function(e) {
                mouseX = e.pageX - 20;
                mouseY = e.pageY - 20;
                xp += (mouseX - xp) / 22;
                yp += (mouseY - yp) / 22;
                $("#ball").css({
                    left: xp,
                    top: yp
                });
    > when mouse is up we stop listen to mouse move
            }).on("mouseup", "#ball", function(e) {
                $(document).off("mousemove",this, function(e) {
                });
            })
        })​
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T22:03:58.027

```
var xp = 0,
    yp = 0;
var dragging = false;
$("#ball").on("mousedown", function(e) {
    dragging = true;
    $(document).on("mousemove", this, function(e) {
        if(dragging) {
            mouseX = e.pageX - 20;
            mouseY = e.pageY - 20;
            xp += (mouseX - xp) / 12;
            yp += (mouseY - yp) / 12;
             $("#ball").css({
                left: xp,
                top: yp
            });
        }
    });
    $(document).on("mouseup", function(e) {
        dragging = false;
        $(document).off("mousemove",this, function(e) {
            alert(e.pageX)
        });
    });

}); 
```

# java - 当限制设置为 20 时，Facebook Graph API 会响应任何数据

> ID：10171879
> 
> 赞同：3
> 
> 时间：2012-04-16T09:47:13.787
> 
> 标签：java, facebook-graph-api

我在 Facebook Graph API 资源管理器中查询数据：

```
access_token="SECRET"
GET https://graph.facebook.com/me/home?limit=20&until=1334555920&fields=id 
```

结果：

```
{
  "data": [
  ]
} 
```

我很震惊，因为我的“家”上有很多饲料。

然后我尝试将限制设置为 100，然后我得到了一个提要列表。

这里发生了什么？“limit”参数会影响graph api的结果吗？

* * *

我尝试将限制增加到 25 并再次查询，有一个提要。

那么“限制”和“直到”之间的关系是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T10:23:58.963

Facebook 的 API 有时会因为您尝试访问的数据而有点奇怪，而且这个问题有几个部分。

**限制**

在返回数据时应用限制，但*在*生成权限和访问控制之前，这在去年的这篇博文中进行了解释：[Graph API 中的限制](http://developers.facebook.com/blog/post/478/)。

**权限**

更重要的是，即使您给自己一个拥有所有 FB 权限的令牌，您仍然无法访问您创建的所有内容。假设您在朋友的提要上发布了一些内容，但他们的提要未设置为公开隐私。使用您的令牌对该朋友的提要进行的任何查询都将永远不会返回数据（或者至少一年前是这种情况）。

**API 本身**

去年我在使用 Graph API 时发现的最棒的错误之一是它处理分页的方式。Graph API 允许三个过滤器：limit、offset 和 since/until。在某处 Facebook 建议（并且正确地如此）您尽可能仅使用开始/截止日期进行分页。忽略关于为什么要在理论基础上与偏移量相比的争论，在实际情况下，以下查询会随着时间的推移而退化：

```
// This obviously isn't valid as written, but you the params change as described
limit=fixed-value&offset=programmatic-increase&since=some-fixed-date-here 
```

原因：日期范围和偏移量彼此之间表现不佳。例如，假设我进行了以下初始查询：

```
// My example query
limit=20&since=1334555920

--> {#1,#2, ... #20} 
```

自然，您会想要分页更多数据。结果将是这样的（我不记得确切的模式，但顶部`n`会重复，结果列表会被截断`n/2`或类似的东西）：

```
// My example query
limit=20&since=1334555920&offset=20

---> {#10, #11 ... #25} 
```

我从来不知道为什么会这样，但最终查询会逐渐减少，什么也不返回，你只会得到大约 50-100 个唯一值。但是，如果您只使用日期进行分页，则只要数据允许，您就可以继续。

这是一个警告，这是一个错误，这是不久前的。这里的主要教训是，如果不修改我的查询以使结果完全相同，我永远不会发现这个错误（基于帖子#10-30 的特定日期范围与限制 = 20，偏移量 = 10 相比）但是结果完全不同。

# cakephp - 在我的应用控制器中包含 cakephp 插件输出

> ID：10171880
> 
> 赞同：0
> 
> 时间：2012-04-16T09:47:20.883
> 
> 标签：cakephp

我刚刚开始使用 CakePHP，并且对插件和组件的概念有疑问。

主要问题是如何将他们的观点包含在我自己的应用程序中。例如，在 cakephp 网站上，有一个插件教程，但他们从未提及如何将它包含在我自己的应用程序的输出中。

我想创建一个出现在我网站的每个页面上的登录栏。您知道，每页顶部都会显示用户名密码或欢迎 Fred Flintstone。

似乎插件最适合这个，因为它可以包含在我创建的每个控制器中。但是，正如我所提到的，我不知道如何在我的应用程序视图中包含插件视图。

李

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T10:13:24.907

在这种情况下，您将创建一个元素：

/app/View/Elements/login_bar.ctp

```
echo $this->Form->create('User'); 
echo $this->Form->inputs(array('username', 'password'));
echo $this->Form->end('login'); 
```

并将其包含在您的视图（或布局）中：

```
echo $this->Element('login_bar'); 
```

见：[http ://book.cakephp.org/2.0/en/views.html#elements](http://book.cakephp.org/2.0/en/views.html#elements)

# visual-studio-2010 - 阶段级审批的 SharePoint 2010 审批工作流自定义？

> ID：10171884
> 
> 赞同：0
> 
> 时间：2012-04-16T09:47:35.987
> 
> 标签：visual-studio-2010, sharepoint

问候！！！

我有以下情况，你能帮我实现这个吗？使用 OOO 审批工作流程，我需要分两个（或三个）阶段审批文档/列表项。让我解释一下，每当我创建/上传文档时，如果第一阶段的其中一个批准文件，它将进入第一阶段批准者（至少 2 个批准者），它应该进入第二阶段批准。

SharePoint 2010 可以使用“添加新阶段”按钮添加审批者级别。但问题是，只有当第一阶段的所有批准者都批准该文件时，这才有效，然后它才会进入第二阶段进行批准。就我而言，如果第一阶段的任何人批准，它应该流向第二阶段以获得批准。我尝试使用 SPD 2010 自定义工作流程，但无法实现。你能帮帮我吗？如果您需要更多信息，请与我们联系。

谢谢，皇家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:42:00.940

您必须在串行批准和并行批准之间进行选择。默认情况下选择串行批准，但如果您选择并行，则其中任何一个都可以批准。

# apache - 使用.htaccess 重定向？

> ID：10171888
> 
> 赞同：0
> 
> 时间：2012-04-16T09:48:08.467
> 
> 标签：apache, .htaccess, url, redirect

目前，我的网站可以使用`www`和不使用`www`，即：

`http://oshirowanen.com`和`http://www.oshirowanen.com`

但是，我似乎因为 SEO 的目的而受到重复的惩罚。是否可以将所有没有 www 的网页 url 重定向到网页的等效 www 版本？

例如

```
http://oshirowanen.com should go to http://www.oshirowanen.com
http://oshirowanen.com/page1 should go to http://www.oshirowanen.com/page1
http://oshirowanen.com/page2 should go to http://www.oshirowanen.com/page2
http://oshirowanen.com/page3 should go to http://www.oshirowanen.com/page3 
```

等等？

这是我的 .htaccess 文件

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^(.*)$ /index.php?/$1 [L]
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:51:58.820

是的，有可能 - 将以下内容添加到您的`.htaccess`文件中：

```
RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

# c# - JSON RPC序列化c#中的对象列表

> ID：10171892
> 
> 赞同：0
> 
> 时间：2012-04-16T09:48:24.667
> 
> 标签：c#, silverlight, windows-phone, json-rpc

首先是有关该项目的一些信息；这是我创建的一个类：

```
 public class SendOverview
{
    public string id   { get; set;}

    public string method { get; set;}

    public SendOV Params {get; set;}

}

public class SendOV
{
    public string overviewID { get; set; }

    public string overviewType { get; set; }

    public string AORParams { get; set; }

    public SentDatas arrOptions { get; set; }

}
public class SentDatas
{
    public string columnInfo { get; set; }

    public string orderInfo { get; set; }

} 
```

一个非常简单的类，我想通过在这里创建一个对象来序列化整个事情（所以，SendOverview 类）：

```
 SendOverview test1 = new SendOverview();
        test1.id = "1";
        test1.method = "getOverviewInfo";

        SendOV testOV = new SendOV();
        testOV.AORParams = null;
        testOV.overviewID = tempDID;
        testOV.overviewType = "Stock Items";

        SentDatas col1 = new SentDatas();
        col1.columnInfo = "1;100;1;1#";
        col1.orderInfo = "1;0;0#"; 
```

现在，一旦我尝试将 col1 数据添加到 testOV 的 arrOptions 中，我就会得到一个 nullreference 异常，这会阻止我的工作取得任何进展。我尝试了很多，但无济于事。

```
testOV.arrOptions[0] = col1; 
```

给了我例外；任何帮助都非常感谢..

（我知道我必须在某处创建一个 List[] xx = new List[MAX] 但我无法实现它。）

免费问题：

发送 json 字符串时：{\"id\":\"1\",\"method\":\"getOverviewInfo\",\"Params\":{\"overviewID\":\"0000004297\", \"overviewType\":\"Stock Items\",\"AORParams\":null,\"arrOptions\":{\"columnInfo\":\"1;100;1;1#\",\"orderInfo \":\"1;0;0#\"}}}"

所有命名参数都应该只有值，而不是命名参数；调整：

{\"id\":\"1\",\"method\":\"getOverviewInfo\",\"Params\":{"0000004297\","Stock Items",null,{\"columnInfo\" :\"1;100;1;1#\",\"orderInfo\":\"1;0;0#\"}}}"

我应该添加哪个 JSON 属性来获得这种效果？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:57:50.840

我不完全确定我是否了解您所追求的目标，但请查看以下内容，看看我是否走在正确的轨道上。

像这样更新您的课程：

```
public class SendOV
{
    public string overviewID { get; set; }

    public string overviewType { get; set; }

    public string AORParams { get; set; }

    public List<SentDatas> arrOptions { get; set; }
} 
```

然后将您的创建代码更新为：

```
SendOverview test1 = new SendOverview();
test1.id = "1";
test1.method = "getOverviewInfo";

SendOV testOV = new SendOV();
testOV.AORParams = null;
testOV.overviewID = tempDID;
testOV.overviewType = "Stock Items";

List<SentDatas> sentDatasList = new List<SentDatas>();

SentDatas col1 = new SentDatas();
col1.columnInfo = "1;100;1;1#";
col1.orderInfo = "1;0;0#";

sentDatasList.Add(col1);

testOV.arrOptions = sentDatasList; 
```

# java - java轻量级调试器

> ID：10171896
> 
> 赞同：5
> 
> 时间：2012-04-16T09:48:34.443
> 
> 标签：java, linux, debugging

我正在寻找一个轻量级的 java 调试器——在 IDE 或独立的、命令行或 gui 中。我正在使用 ant 和 vim，并且我尝试过 eclim，但 eclipse 在我的笔记本电脑上运行速度太慢，无法选择。

之前问过类似的问题，大家普遍表示不喜欢命令行的，喜欢eclipse和IntelliJ的。

只是想知道是否有任何改变。

编辑：打算尝试 jdb 和 jswat。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-16T09:55:05.290

好吧，对于命令行，总是有[`jdb`](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/jdb.html). 但我是[JSwat](https://github.com/nlfiedler/jswat)的粉丝；当您不使用 IDE 时，它是一个不错的 GUI 工具。

# android - 构建android源代码

> ID：10171897
> 
> 赞同：1
> 
> 时间：2012-04-16T09:48:40.477
> 
> 标签：android, c++, android-intent

我从 source.android.com 下载了 android 源代码并按照说明在 MAC OS X 上设置构建环境，一切都很好，除非我运行 make 它给了我以下错误

```
============================================
PLATFORM_VERSION_CODENAME=REL
PLATFORM_VERSION=4.0.1
TARGET_PRODUCT=full
TARGET_BUILD_VARIANT=eng
TARGET_BUILD_TYPE=release
TARGET_BUILD_APPS=
TARGET_ARCH=arm
TARGET_ARCH_VARIANT=armv7-a
HOST_ARCH=x86
HOST_OS=darwin
HOST_BUILD_TYPE=release
BUILD_ID=ITL41D
============================================
host C++: aapt <= frameworks/base/tools/aapt/AaptAssets.cpp
frameworks/base/tools/aapt/AaptAssets.cpp:2161:38: warning: unused parameter 'bundle' [-Wunused-parameter]
AaptAssets::slurpResourceZip(Bundle* bundle, const char* filename)
                                     ^
In file included from frameworks/base/tools/aapt/AaptAssets.cpp:5:
In file included from frameworks/base/tools/aapt/AaptAssets.h:10:
In file included from frameworks/base/include/utils/AssetManager.h:25:
frameworks/base/include/utils/KeyedVector.h:193:17: error: use of undeclared identifier 'indexOfKey'
    ssize_t i = indexOfKey(key);
                ^
                this->
frameworks/base/tools/aapt/AaptAssets.h:446:46: note: in instantiation of member function 'android::DefaultKeyedVector<android::String8, android::sp<AaptSymbols> >::valueFor' requested here
        sp<AaptSymbols> sym = mNestedSymbols.valueFor(name);
                                             ^
frameworks/base/include/utils/KeyedVector.h:66:29: note: must qualify identifier to find this declaration in dependent base class
            ssize_t         indexOfKey(const KEY& key) const;
                            ^
1 warning and 1 error generated.
make: *** [out/host/darwin-x86/obj/EXECUTABLES/aapt_intermediates/AaptAssets.o] Error 1 
```

我刚开始使用android所以没有任何线索，任何小的帮助也将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-18T04:55:48.987

我终于弄清楚了问题所在。frameworks/base/include/utils/KeyedVector.h:193的源代码有错误

一些成员函数需要范围解析运算符“this->”才能在 MAC OS X Lion 上使用 xcode 4.3.x 和 gcc 版本 4.9.2 (Debian 4.9.2-10) 构建 android 源代码。没有范围解析运算符编译器将无法识别函数的存在。

打开 frameworks/base/include/utils/KeyedVector.h

将第 193 行更改为：

```
ssize_t i = indexOfKey(key); 
```

到

```
ssize_t i = this->indexOfKey(key); 
```

和 Android 4.0.1 编译。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-13T15:38:17.927

只是为了扩展皮特的答案，以防有人真的想知道：

indexOfKey 在 DefaultKeyVector 的父类 KeyedVector 中定义。对于类模板，函数调用在编译时解决，而不是在运行时解决。发生错误是因为在调用 indexOfKey 时，编译器不知道该模板函数可能位于何处。下面是基类和派生类的样子：

```
template <typename KEY, typename VALUE>
class KeyedVector
{
...
    ssize_t indexOfKey(const KEY& key) const;
...

template <typename KEY, typename VALUE>
class DefaultKeyedVector : public KeyedVector<KEY, VALUE>
{
... 
```

还有令人讨厌的电话：

```
template<typename KEY, typename VALUE> inline
const VALUE& DefaultKeyedVector<KEY,VALUE>::valueFor(const KEY& key) const {
    ssize_t i = indexOfKey(key);
... 
```

最有可能的是，使用较旧的 MacOS SDK 编译器（或其他编译器）可以工作，因为它可能只是猜测该函数存在于某个基类中，而不是失败。但是，这不是标准行为。

来自这个[clang 条目](http://clang.llvm.org/compatibility.html#dep_lookup_bases)和[C++ FAQ](http://womble.decadent.org.uk/c++/template-faq.html#base-lookup)的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T13:17:39.800

要在较新的 GCC 版本上构建 ICS，您必须应用这些补丁：

[https://groups.google.com/forum/#!msg/android-building/2EwtWQTqjdI/fbZlzXErscwJ](https://groups.google.com/forum/#!msg/android-building/2EwtWQTqjdI/fbZlzXErscwJ)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-13T08:12:31.850

在 MAC OS X 10.8.4 上使用 make -j Browser 构建 Android 4.0.3 浏览器时，我多次遇到过这个问题。我对 Android 4.2.1 没有任何问题。所以我的解决方案是

`make CC=gcc CXX=g++ -j Browser`

希望能帮助到你

# jquery - JQuery 中的淡入或淡出

> ID：10171899
> 
> 赞同：0
> 
> 时间：2012-04-16T09:48:46.640
> 
> 标签：jquery, html

我想淡化 div 的文本更改，我做了一个小功能，但它不起作用。它改变了价值，但没有褪色。

```
$(function(){   
    $('.jqTransformSelectWrapper').find('ul').find('a').click(function(){
        var cityVal= $('.jqTransformSelectWrapper').find('ul').find('.selected').text();
        var capCity= cityVal.toLowerCase();

        if(capCity == "first"){
            $('#flightPrice').text('1').fadeOut('slow');            
        }
    })
}) 
```

//html

```
<a index="1" href="#" class="selected">first</a>

<span id="flightPrice">val</span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T09:52:51.320

您想将文本包装在一个跨度中，然后将其淡出：

```
<div class="button"><span>TEXT!</span></div> 
```

并且您不想使用`fadeOut`，因为这会改变按钮的大小，因为文本将在`fadeOut`结束后消失并且不再占用空间。而是为不透明度设置动画：

```
$(".button").click(function(){
    $(this).find("span").animate({opacity:0},function(){
        $(this).text("new text")
            .animate({opacity:1});  
    })
}); 
```

[http://jsfiddle.net/8Dtr6/](http://jsfiddle.net/8Dtr6/)

编辑：稍微更正，只要你立即淡入它似乎不是使用问题，`fadeIn`并且`fadeOut`至少在 chrome 中是这样。我希望在较小的浏览器中可能会看到轻微的闪烁，但可能是错误的。

使用队列来避免回调可能会更干净一些：

```
$(".button").click(function(){
    $(this).find("span")
        .animate({opacity:0})
        .queue(function(){
             $(this).text("new text"); 
             $(this).dequeue()
        })
        .animate({opacity:1});  
}); 
```

[http://jsfiddle.net/8Dtr6/2](http://jsfiddle.net/8Dtr6/2)

# android - 位置服务 Android 的更新间隔

> ID：10171901
> 
> 赞同：0
> 
> 时间：2012-04-16T09:48:50.110
> 
> 标签：android, service, locationlistener

我正在编写一个位置服务，带有一个更新间隔来将位置更新发送到服务器。但我试图通过用户输入（`AlertDialog`）更新服务中的这个间隔变量。硬编码时它工作得很好。

我正在使用此代码从服务的`AlertDialog`类中获取间隔变量`onCreate()`。

```
public void onCreate() {
    super.onCreate();

    final boolean tr=true;
      new Thread(new Runnable() {
              public void run() {

                while (tr) {

                    //check your static variable here
                    updateInterval=ShowCurInterval.loadCurInterval(getApplicationContext());//ShowCur Interval is the Alert Dialog calss
                    Log.d(" INTERVAL ","Interval "+ updateInterval);
                  try {
                    Thread.sleep(10000);
                  } catch (InterruptedException e) {
                    e.printStackTrace();
                  }

                }
              }}
               ).start();

      startLocationListener(updateInterval);
} 
```

而且我还可以在 Log 中看到新的 updateInterval 值（从警报对话框中添加）。但`requestLocationUpdates()`仍使用预定义的 updateInterval 值。

这是 startLocationListener() 方法：

```
public void startLocationListener(int updateInterval) {
    LocationManager locManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    locManager.removeUpdates(locListener);
    locManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, updateInterval, updateDistance, locListener);
    Log.d(getClass().getSimpleName(), "Loclistener started, Updatetime: " + updateInterval);
    Toast.makeText(getApplicationContext(), "UPDATE INTERVAL"+updateInterval,Toast.LENGTH_SHORT );
    preInterval = updateInterval;
} 
```

有没有人有任何建议我如何更新这个变量？

@binW 编辑部分有例外：

```
 Handler mhandler = new Handler ();
       mhandler.postDelayed( new Runnable(){

          public void run(){
              Looper.prepare();

              updateInterval=SingletonManager.getInstance().loadCurInterval(getApplicationContext());
              SingletonManager.getInstance().saveCurInterval(getApplicationContext(), updateInterval);
              startLocationListener(updateInterval); 
              Log.d(" INTERVAL ","Interval "+ updateInterval);
              //startChecking();

          }
       }, 2000); 
```

例外：

```
04-17 03:18:55.250: E/AndroidRuntime(2146): java.lang.RuntimeException: Only one Looper may be created per thread 
```

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T13:22:34.303

您在 onCreate() 中调用 startLocationListener()，而不是在为获取 updateInterval 的新值而创建的线程中。但是调用 startLocationListener(updateInterval); 在新线程执行之前执行，因此您获得 updateInterval 的旧值。我相信您应该将代码更改为以下内容：

```
public Handler handler;
public void onCreate() {
    super.onCreate();

    handler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            startLocationListener(updateInterval);
        }
    };

    final boolean tr=true;
      new Thread(new Runnable() {
         public void run() {
             while (tr) {
                //check your static variable here
                updateInterval=ShowCurInterval.loadCurInterval(getApplicationContext());//ShowCur Interval is the Alert Dialog calss
                handler.sendEmptyMessage(1);
                Log.d(" INTERVAL ","Interval "+ updateInterval);
                try {
                    Thread.sleep(10000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }

                }
              }}
        ).start();
} 
```

# ios - 滑动 UITableView 时调用什么函数

> ID：10171904
> 
> 赞同：0
> 
> 时间：2012-04-16T09:49:03.223
> 
> 标签：ios, uitableview

我创建了一个 UITableView 并将其设置为可编辑。我想知道当我在单元格上滑动时调用了哪个函数。因为我想在删除按钮出现之前做一些事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:56:25.083

`tableView:willBeginEditingRowAtIndexPath:`据我所知，此方法称为

# java - nhttp 没有显示正确的状态

> ID：10171915
> 
> 赞同：-2
> 
> 时间：2012-04-16T09:49:47.100
> 
> 标签：java, lotus-notes, lotus-domino

很多时候，我们的 Domino http 让我很紧张。

由于各种原因，请告诉正确的解决方案...

1.  我开始了我的多米诺骨牌和笔记。一段时间后，我重新启动了我的多米诺骨牌服务器。现在我的 nhttp 没有在我的服务器上启动。它告诉 http 已经在运行。但是我检查了我的任务管理器，发现80端口被nhttp占用了。在我结束该过程后，它再次重新启动。为什么会这样？

2.  Some of java programs run on server. When the JVM may crashed. That time I have no choice except restarting the server. Pleae tell is their any way to restart JVM. or Kill the nhttp.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:30:06.537

确保 IIS 服务未启动，HTTP 任务将占用并保留端口 80。

# php - 尽管在 php.ini 中启用了 ssl，但无法使用 codeigniter 和 gmail 发送邮件

> ID：10171920
> 
> 赞同：0
> 
> 时间：2012-04-16T09:49:56.330
> 
> 标签：php, codeigniter, gmail

我知道这个问题已经发布，但我找不到我的问题的答案。我正在使用 codeigniter 通过 gmail 服务器发送电子邮件。这是用于此任务的一段代码：

```
$config['protocol'] = 'smtp';
$config['smtp_host'] = 'ssl://smtp.googlemail.com';
$config['mail_path'] = 'ssl://smtp.googlemail.com';
$config['smtp_user'] = 'my-email@gmail.com';
$config['smtp_pass'] = '******';
$config['smtp_port'] = '465';
$config['smtp_timeout'] = '30';
$config['mailtype'] = 'text';
$config['charset'] = 'utf-8';
$config['validate'] = TRUE;
$config['crlf'] = '\r\n';
$config['newline'] = '\n\n';

$this->load->library('email',$config);
$this->email->from('my-email@gmail.com');
$this->email->to('another-email');
$this->email->subject('Validation');

$message = "some message";

$this->email->message($message);

$this->email->send(); 
```

我`$this->email->print_debugger()`用来显示错误。以下是我收到的消息：

```
The following SMTP error was encountered: 13 Unable to find the socket transport "ssl" -
did you forget to enable it when you configured PHP?
Unable to send data: AUTH LOGIN
Failed to send AUTH LOGIN command. Error: 
Unable to send data: MAIL FROM:
from: 
The following SMTP error was encountered: 
Unable to send data: RCPT TO:
to: 
The following SMTP error was encountered: 
Unable to send data: DATA
data: 
The following SMTP error was encountered: ... 
```

当然，我在我的 php.ini 文件中取消了与 SSL 对应的行的注释...

有什么想法吗 ？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T13:21:12.913

NetTuts 上有一个关于这个主题的很好的教程。这是它的链接：http: [//net.tutsplus.com/articles/news/codeigniter-from-scratch-day-3/](http://net.tutsplus.com/articles/news/codeigniter-from-scratch-day-3/)

源代码可下载。

# xslt - 带有子字符串的 xsl 副本

> ID：10171924
> 
> 赞同：3
> 
> 时间：2012-04-16T09:50:18.373
> 
> 标签：xslt, xslt-1.0

我从这篇[文章中获取的 xsl 中有这个功能](https://stackoverflow.com/questions/3309746/how-to-convert-newline-into-br-with-xslt)

用“换行符”替换“cr”

这就是我所说的：

```
<xsl:variable name="breakText">
     <xsl:call-template name="insertBreaks"> 
          <xsl:with-param name="subject" select="PublicProfile/AboutMe"/> 
         </xsl:call-template>
    </xsl:variable> 
```

我正在像文章链接一样在文本上“阅读更多”单击文章短开头的第一个 div（长文章的 550 个字符）显示文本，就像我没有使用“insertBreaks”功能一样

```
<xsl:copy-of select="substring($breakText,0,550)"/> 
```

但是这行长描述工作正常：

```
<xsl:copy-of select="$breakText"/> 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T09:53:15.757

你想用`xsl:value-of`不`xsl:copy-of`。`xsl:copy-of`返回所选标签的元素及其所有值。`xsl:value-of`返回与所选标签关联的文本。由于您正在尝试获取子字符串，因此您需要文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T12:19:40.213

问题中提到的解决方案恰好是我的。

*它不是*用“换行符”而是用`<br />` *元素*替换换行符。一个元素是一个节点——而不是一个字符串。

因此，`$breakText`在这个问题中定义的是临时树（在 XSLT 2.0 中）或 XSLT 1.0 中的 RTF（结果树片段）——*而不是*字符串。

**问题是**（不管使用零作为索引的附带小错误）：

```
substring($breakText,0,550) 
```

**是一个字符串（从 的*字符串值*计算`$breakText`），因此根本不能包含任何`<br/>`元素或任何节点**

**请记住**：元素或树的字符串值是其所有文本节点后代的值的串联。

**另一方面**：

```
<xsl:copy-of select="$breakText"/> 
```

复制临时树（在 XSLT 2.0 中）或生成 RTF 的序列化（在 XSLT 1.0 中）。

更简单地说，`xsl:copy-of` *保留*结构，`string()`或者任何到字符串的转换都只会产生一个字符串——而字符串没有结构（所有节点都消失了）。

# jquery - onkeypress 事件未触发

> ID：10171926
> 
> 赞同：1
> 
> 时间：2012-04-16T09:50:30.677
> 
> 标签：jquery, html

我已经编写了一个代码来处理鼠标和键盘事件。但是该`onkeypress`事件在 Firefox、IE 等中没有触发。我也尝试过使用`keydown`事件，但这不起作用。`li`元素的 HTML 代码是：

```
print "<li class=\"ui-menu-item \" id=\"toli$i\"  value=\"'$name','$email'\" role=\"menuitem\"><a class=\"ui-corner-all\" href=\"#\"  onkeypress=\"keyhandle('$name','$email');\" onclick=\"fillto('toli$i','$name','$email');\">$ename $ediv $email></a></li>";
    }
    elsif($field eq "cc"){

 print "<li class=\"ui-menu-item \" id=\"toli\" role=\"menuitem\"><a class=\"ui-corner-all\" href=\"#\" onkeypress=\"keyhandle('$name','$email');\" onclick=\"fillcc('$name','$email');\">$ename $ediv $email></a></li>";
}
elsif($field eq "bcc"){

 print "<li class=\"ui-menu-item \" id=\"toli\" role=\"menuitem\"><a class=\"ui-corner-all\" href=\"#\" onkeypress=\"keyhandle('$name','$email');\" onclick=\"fillbcc('$name','$email');\">$ename $ediv $email></a></li>";
}
}
print "</ul>"; 
```

javascript函数是

```
<script language="javascript">
function keyhandle(id,name,email){

alert (id);
 }
</script> 
```

事件`onclick`正在触发，但`onkeypress`没有触发。谁能建议这是为什么？

提供给浏览器的代码是

```
<div id="displayto" class="display ui-widget"><ul class="ui-autocomplete ui-menu ui-widget-content ui-corner-all " style="width: 550px; max-height: 200px;" aria-activedescendant="ui-active-menuitem" role="listbox"><li class="ui-menu-item " id="toli1" value="'AMAL SMITHA S','amal_smitha@vssc.gov.in'" role="menuitem"><a class="ui-corner-all" href="#" onkeypress="keyhandle('AMAL SMITHA S','amal_smitha@vssc.gov.in');" onclick="fillto('toli1','AMAL SMITHA S','amal_smitha@vssc.gov.in');">"AMAL SMITHA S" (COM) &lt; amal_smitha@vssc.gov.in&gt;</a></li></ul></div> 
```

我试过代码

```
 $(document).ready(){
        $("#displayto").keypress(function(){
            alert('a');
    });
} 
```

但它也不起作用。我给每个人一个连续的 id

*   物品。我想通过按键函数传递这个顺序 ID。这个 id 值用于在“向下”箭头按下时获取下一个 id 值，在向上箭头按下时获取上一个值。如果按下回车键，则调用 fillto() 函数。此代码用于自动完成功能。有没有其他方法可以做到这一点？请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T19:59:41.457

这可能有点太晚了，但现在我正在处理同样的问题并且可能找到了解决方案。

我的情况是：

```
<span onclick="javascript: /* some javascript to select element */ " onkeypress="javascript: /* call function to process key event */">...</span> 
```

我在某处发现要使元素能够捕获关键事件，它需要是可*聚焦*的。默认情况下，所有输入元素都应该是可聚焦的，也许其他一些元素也是可聚焦的，因浏览器而异。

但是，您可以使元素具有焦点，在我的例子中，我使用*tabindex*属性来实现这一点。像这样：

```
<span tabindex="" onclick="javascript: /* some javascript to select element */ " onkeypress="javascript: /* call function to process key event */">...</span> 
```

这在 Firefox 中有效，但在 Chrome 中无效。只有当我将一些值放入 tabindex 属性时，该事件才会被实际触发并执行 onkeypress="" 中的 javascript。

所以现在我得到了这样的结果：

```
<span tabindex="0" onclick="javascript: /* some javascript to select element */ " onkeypress="javascript: /* call function to process key event */">...</span> 
```

编辑：我忘了补充一点，你实际上需要关注元素。我通过调用 focus() 在 onclick="" 中做到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T20:31:27.267

你可以使用 jQuery 吗？如果可以的话，尝试这样的事情，我认为可能会更好：

```
$(document).ready(){
    $("#displayto").keypress(function(){
        alert('a');
    });
}//end of document ready 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T14:58:17.553

可能事件是在输入之前加载的，这就是为什么不工作，试试现场，

```
$(document).ready(){

        $('input').live('keypress', function (e) {
           if ( e.keyCode == 9 ){
               alert( 'Tab pressed' );
            }else
              alert("another key pressed");
        });
} 
```

如果您不使用输入标签，请尝试使用您正在使用的标签，例如 div 的 id

# java - 并发：在 Web 应用程序中处理多个提交

> ID：10171927
> 
> 赞同：4
> 
> 时间：2012-04-16T09:50:46.023
> 
> 标签：java, web-applications, concurrency

这是我朋友最近的一个面试问题：

**您将如何处理用户在屏幕上输入一些数据并假设其中有 5 个*在相同时间单击提交按钮的情况****？**

（同一时间，面试官坚称它们是纳秒级的）

我的回答只是使处理请求的方法同步，并且在给定时间只有一个请求可以获取该方法的锁。

但看起来面试官一直坚持有一个“更好的方法”来处理它。

在数据库级别处理锁定的另一种方法，但我认为它不是“更好”。

有没有其他方法。这似乎是一个相当普遍的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T09:58:49.647

如果你只有一张网卡，你一次只能有一个请求下来。;)

他可能正在寻找的答案是

*   使 servlet 无状态，以便它们可以同时执行。
*   使用允许线程安全并发访问的组件，例如 Atomic* 或 Concurrent*
*   仅在绝对必须使用的地方使用锁。

我更喜欢做的是让服务如此之快，它可以在下一个请求到来之前做出响应。;) 虽然我不需要担心 Java EE 或数据库的开销。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-16T09:56:34.013

他们同时点击是否重要，例如他们是否都在更新数据库上的同一条记录？

同步方法不会削减它，特别是如果它是一个分布在多个 JVM 中的 webapp。同步方法也可能会阻塞，但是其他线程会在第一次完成后触发，并且您会丢失写入。

因此，在数据库级别锁定似乎是这里的选项，即如果记录已更新，则向第一次更新后服务的用户报告错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:53:40.563

您不必担心这一点，因为 Web 服务器会在隔离线程中启动每个请求并对其进行管理。

但是如果你有一些共享资源，比如一些用于记录的文件，那么你需要实现并发并在请求和请求间对其进行线程锁定

# cruisecontrol.net - 无法使用 CruiseControl.Net 查看嵌入在电子邮件中的 FxCop 报告

> ID：10171932
> 
> 赞同：1
> 
> 时间：2012-04-16T09:51:16.187
> 
> 标签：cruisecontrol.net, fxcop

我已经在我的机器上安装了 Cruise Control 1.5 并尝试配置自动构建。一切正常。应用程序正在构建，我收到一封电子邮件，但我没有看到构建电子邮件中嵌入的 FXCop 结果。我错过了什么？

## ccnet.config 文件

```
<cruisecontrol xmlns:cb="urn:ccnet.config.builder">
    <project name="SampleProject">
        <webURL>http://localhost/ccnet</webURL>
        <workingDirectory>E:\\NewProject\\DevBuilds</workingDirectory>
        <artifactDirectory>E:\\NewProject\\DevBuilds\Artifacts</artifactDirectory>
        <modificationDelaySeconds>600</modificationDelaySeconds>
        <category>Dev Build</category>
        <sourcecontrol type="svn">
            <trunkUrl>https://mycompany.com/svn/trunk/MyApplication</trunkUrl>
            <workingDirectory>E:\\NewProject\\DevBuilds\SourceCode</workingDirectory>
            <autoGetSource>false</autoGetSource>
            <executable>C:\Program Files\Subversion\bin\svn.exe</executable>
            <username>username</username>
            <password>password</password>
        </sourcecontrol>
        <initialState>Started</initialState>
        <startupMode>UseInitialState</startupMode>

        <triggers>
            <intervalTrigger seconds="3600" buildCondition="IfModificationExists" />
        </triggers>
        <state type="state" directory="E:\\NewProject\\DevBuilds" />
        <labeller type="iterationlabeller">
            <prefix>1.0</prefix>
            <duration>1</duration>
            <releaseStartDate>2012/04/11</releaseStartDate>
            <separator>.</separator>
        </labeller>
        <tasks>
            <nant>
                <executable>E:\NewProject\Installables\nant\bin\nant.exe</executable>
                <baseDirectory>E:\\NewProject\\Build Files</baseDirectory>
                <buildFile>Build.xml</buildFile>
                <targetList>
                    <target>Run</target>
                </targetList>
                <buildTimeoutSeconds>5000</buildTimeoutSeconds>
            </nant>
        </tasks>
        <publishers>
            <merge>
                <files>
                    <file>E:\NewProject\DevBuilds\FxCopOutput\FxCop-results.xml</file>
                </files>
            </merge>
            <xmllogger logDir="E:\\NewProject\\DevBuilds\Artifacts\\buildlogs" />
            <email from="Checkins@symphonysv.com" mailhost="smtp.gmail.com" includeDetails="true" useSSL="false">
                <users>
                    <user name="dev1" group="buildmaster" address="myname@gmail.com"/>
                </users>
                <groups>
                    <group name="buildmaster">
                        <notifications>
                            <notificationType>Always</notificationType>
                        </notifications>
                    </group>
                </groups>
            </email>
        </publishers>
    </project>
</cruisecontrol> 
```

* * *

## 构建.xml

```
<?xml version="1.0"?>
<project name="Test" default="Run" basedir=".">

    <property name="BuildNumber" value="1.0.0.0"/> 
    <property name="SourceControlURL" value="https://mycompany.com/svn/trunk/MyApplication/"/>
    <property name="BuildFile" value=".\Build.xml"/> 
    <property name="TagBuild" value="false"/> 
    <property name="BuildType" value="Release"/>
    <property name="BuildTargetDir" value="E:\NewProject\DevBuilds\Executables"/> 
    <property name="BuildWorkDir" value="E:\NewProject\DevBuilds\SourceCode"/> 
    <property name="MSBUILD" value="C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319"/> 
    <property name="FxCopOutPutDirectory" value="E:\NewProject\DevBuilds\FxCopOutput" />
    <property name="FxCopInputDirectory" value="E:\NewProject\DevBuilds" />

    <target name="Run" description="Starting ThinkPets Build">

        <call target="GetLatestCode"/>
        <call target="BuildCode"/>
        <call target="BuildASPWebSite"/>
        <call target="runFxCop"/>

    </target>

    <target name="GetLatestCode">
        <echo message="Updating Code From SVN to ${BuildWorkDir}"/>
        <exec program="svn.exe">
            <arg line="checkout ${SourceControlURL} ${BuildWorkDir} -q"/>
        </exec>
    </target>

    <target name="BuildCode">
        <echo message="Building VS10 Projects Web" />
        <exec program="${MSBUILD}\msbuild.exe" failonerror="true">
            <arg line=" &quot;${BuildWorkDir}\Application.sln&quot; /t:Rebuild /p:Configuration=Release /V:q"/>
        </exec>
    </target>

    <target name="BuildASPWebSite">
        <echo message="Building ASP Web Site" />
        <exec program="${MSBUILD}\aspnet_compiler.exe" failonerror="true">
            <arg line=" -v / -p &quot;${BuildWorkDir}\MyDir&quot; -f -c &quot;${BuildTargetDir}&quot; "/>
        </exec>
    </target>

    <target name="runFxCop" depends="BuildCode">
        <exec program="C:\Program Files\Microsoft FxCop 1.36\FxCopCmd.exe" failonerror="false"> 
            <arg line="/p:${FxCopInputDirectory}\SampleProject.FxCop /o:${FxCopOutPutDirectory}\FxCop-results.xml"/>  
        </exec>
    </target>

</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T16:44:14.873

您错过了几点：

1.  您需要添加`<includeDetails>true</includeDetails>`到您的电子邮件发布者块。这将为您提供 HTML 电子邮件。
2.  为了将您的 XML 构建结果转换为 HTML，您需要在`<xslFiles>`您的电子邮件发布者块中添加一个部分。该块的元素指向`[CCNET_INSTALL_DIR]\server\xsl`.

因此，要包括在 CCNET webdasboard 中出现的 FxCop 摘要，这是您的电子邮件发布者块：

```
<email from="Checkins@symphonysv.com" mailhost="smtp.gmail.com" includeDetails="true" useSSL="false">
  <users>
    <user name="dev1" group="buildmaster" address="myname@gmail.com"/>
  </users>
  <groups>
    <group name="buildmaster">
      <notifications>
        <notificationType>Always</notificationType>
      </notifications>
    </group>
  </groups>
  <includeDetails>true</includeDetails>
  <xslFiles>
    <file>xsl\fxcop-summary_1_36.xsl</file>
  </xslFiles>
</email> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-18T12:39:12.903

感谢主席抽出宝贵时间。我认为我的错误是我没有在我的机器上托管“ccnet”应用程序，导致无法找到发布者的 xsls。当我在托管“ccnet”应用程序的服务器机器上使用相同的设置和配置文件时，我能够在电子邮件中看到 FxCop 摘要。如果有错误，请纠正我的理解。

# jquery - Jquery 数据表 - 从 INNER JOIN 进行服务器端处理的下拉过滤器

> ID：10171933
> 
> 赞同：1
> 
> 时间：2012-04-16T09:51:18.543
> 
> 标签：jquery, jquery-plugins, datatables, jquery-datatables

**我用 $acolumns 和 $bcolumns 修改了服务器端处理脚本。这是因为我对 SQL 查询使用了“LEFT OUTER JOIN”，并使用“To and from date filter”来过滤表的列之一。为此，我修改了 $sWhere 和 $sQuery。这一切都很好，但我无法用字段中的值填充表中的过滤器。**

对此的任何帮助/指导将不胜感激。

**Javascript：**

* * *

```
var $oTable;
var asInitVals = new Array();
var aSelected = [];

$(document).ready(function() {
        var $oTable= $("#example").dataTable( {
        "oLanguage": {
            "sSearch": "Search:"
        },
        "sDom":"lfrtip", // default is lfrtip, where the f is the filter
        "bProcessing": true,
        "bServerSide": true,
        "bFilter": true,
        "bSearchable": true,
        "sAjaxSource": "scripts/server_processing.php",
        "aoColumns": [
            { "sName": "catname", "sTitle": "Division"} ,
            { "sName": "cname", "sTitle": "Course"} ,
            { "sName": "status", "sTitle": "Code"} ,
            { "sName": "mname","sTitle": "Module"} ,
            { "sName": "searchdateadded", "sTitle": "Created"},
            ],
        "fnRowCallback": function( nRow, aData, iDisplayIndex ) {
            if ( jQuery.inArray(aData.DT_RowId, aSelected) !== -1 ) {
                $(nRow).addClass('row_selected');
            }
        },
        //"sDom": '<"clear"fl>t<"clear"><"bottom"ip><"clear">',
        "iDisplayLength": 20,       
        "bJQueryUI": true,
        "sPaginationType": "full_numbers",
        "fnServerParams": function (aoData, fnCallback) {
               aoData.push( { "name": "min", "value":  $('#min').val() } );
               aoData.push( { "name": "max", "value":  $('#max').val() } );
        }
        }).columnFilter({aoColumns:[
                { type:"select"},
                { type:"select"},
                { type:"select"},
                { type:"select"},
                { type:"select"}
                ]}
            );  

// Implements the jQuery UI Datepicker widget on the date controls
$('#min, #max').daterangepicker({
    dateFormat: 'yymmdd',
     onClose: function(event) {
        $oTable.fnDraw();
    }
    //showOn: 'button', 
    //buttonImage: '../images/calendar.jpg', 
    //buttonImageOnly: true
}).change(function() {
    $oTable.fnDraw();
});        

//Button to clear the filter
$('#clear').click(function(){ 
   $('#min').val('') ;
   $('#max').val('') ;
   $oTable.fnDraw('');
}); 

/* Add event listeners to the two range filtering inputs */
$('#min').keyup( function() { $oTable.fnDraw(); });
$('#min').change( function() { $oTable.fnDraw(); });

/* Add event listeners to the two range filtering inputs */
$('#max').keyup( function() { $oTable.fnDraw(); });
$('#max').change( function() { $oTable.fnDraw(); });

$('input[type=text]').addClass("idleField");  

$('input[type=text]').focus(function() {  
            $(this).removeClass("idleField").addClass("focusField");  
            if (this.value == this.defaultValue){  
            }  
            if(this.value != this.defaultValue){  
                this.select();  
            }  
        });  
$('input[type=text]').focusout(function() {  
            $(this).removeClass("focusField").addClass("idleField");  
});

/* Click event handler */
$('#example tbody tr').live('click', function () {
        var id = this.id;
        var index = jQuery.inArray(id, aSelected);

        if ( index === -1 ) {
            aSelected.push( id );
        } else {
            aSelected.splice( index, 1 );
        }

        $(this).toggleClass('row_selected');
    } );
} ); 
```

* * *

**我的Serverside处理如下：**

* * *

```
<?php
    /*
     * Script:    DataTables server-side script for PHP and MySQL
     * Copyright: 2010 - Allan Jardine
     * License:   GPL v2 or BSD (3-point)
     */

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * Easy set variables
     */

    /* Array of database columns which should be read and sent back to DataTables. Use a space where
     * you want to insert a non-database field (for example a counter or static image)
     */
    $aColumns = array('catname','cname', 'short', 'mname', 'searchdateadded');
    $bColumns = array('cc.name','c.fullname', 'c.shortname', 'm.name', 'cm.added');

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "id";

    /* DB table to use */
    $sTable = "mdl_course_modules";

    /* Database connection information */
    $gaSql['user']       = "user";
    $gaSql['password']   = "password";
    $gaSql['db']         = "db";
    $gaSql['server']     = "localhost";

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * If you just want to use the basic configuration for DataTables with PHP server-side, there is
     * no need to edit below this line
     */

    /* 
     * MySQL connection
     */
    $gaSql['link'] =  mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) or
        die( 'Could not open connection to server' );

    mysql_select_db( $gaSql['db'], $gaSql['link'] ) or 
        die( 'Could not select database '. $gaSql['db'] );

    /* 
     * Paging
     */
    $sLimit = "";
    if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".mysql_real_escape_string( $_GET['iDisplayStart'] ).", ".
            mysql_real_escape_string( $_GET['iDisplayLength'] );
    }

    /*
     * Ordering
     */
    if ( isset( $_GET['iSortCol_0'] ) )
    {
        $sOrder = "ORDER BY  ";
        for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
        {
            if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
            {
                $sOrder .= $aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."
                    ".mysql_real_escape_string( $_GET['sSortDir_'.$i] ) .", ";
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

    /* 
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */
    $sWhere = "";
    if ( $_GET['sSearch'] != "" )
    {
        $sWhere = "AND (";
        for ( $i=0 ; $i<count($bColumns) ; $i++ )
        {
            $sWhere .= $bColumns[$i]." LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }
        $sWhere = substr_replace( $sWhere, "", -3 );
        $sWhere .= ') ';
    }

    /* Individual column filtering */
    for ( $i=0 ; $i<count($bColumns) ; $i++ )
    {
        if ( $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
        {
            if ( $sWhere == "" )
            {
                $sWhere = " AND ";
            }
            else
            {
                $sWhere .= " AND ";
            }
            $sWhere .= $bColumns[$i]." LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%'";
        }
    }

    if(isset($_GET['min']) && isset($_GET['max']) && $_GET['min'] != '' && $_GET['max'] != ''){
    $sWhere = "AND FROM_UNIXTIME(cm.added, '%Y%m%d') BETWEEN '$_GET[min]' AND '$_GET[max]'";
    }

    /*
     * SQL queries
     * Get data to display
     */
    $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS ".str_replace(" , ", " ", "c.fullname AS cname, c.shortname AS short, m.name AS mname, cc.name AS catname, FROM_UNIXTIME(cm.added, '%Y - %M %D') AS dateadded, 
        FROM_UNIXTIME(cm.added, '%d %M - %Y') AS searchdateadded")."
        FROM mdl_course_modules cm 
        LEFT OUTER JOIN mdl_modules m  on cm.module=m.id 
        LEFT OUTER JOIN mdl_course c  on cm.course=c.id 
        LEFT OUTER JOIN mdl_course_categories cc  on c.category=cc.id
        WHERE c.category != 0 $sWhere
        $sOrder
        $sLimit
    ";

    $rResult = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    /* Data set length after filtering */
    $sQuery = "
        SELECT FOUND_ROWS()
    ";
    $rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
    $iFilteredTotal = $aResultFilterTotal[0];

    /* Total data set length */
    $sQuery = "
        SELECT COUNT(".$sIndexColumn.")
        FROM   $sTable
    ";
    $rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultTotal = mysql_fetch_array($rResultTotal);
    $iTotal = $aResultTotal[0];

    /*
     * Output
     */
    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $iTotal,
        "iTotalDisplayRecords" => $iFilteredTotal,
        "aaData" => array()
    );

    while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            if ( $aColumns[$i] == "version" )
            {
                /* Special output formatting for 'version' column */
                $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
            }
            else if ( $aColumns[$i] != ' ' )
            {
                /* General output */
                $row[] = $aRow[ $aColumns[$i] ];
            }
        }
        $output['aaData'][] = $row;
    }

    echo json_encode( $output );
?> 
```

# api - Instagram API 响应代码 400（错误请求）

> ID：10171935
> 
> 赞同：5
> 
> 时间：2012-04-16T09:51:25.043
> 
> 标签：api, instagram

我已经通过帖子发送了这个 URL：

```
https://api.instagram.com/v1/users/XXX/relationship?action=unfollow&access_token=YYY 
```

XXX 是一个有效的用户 ID，我已经检查过很多次了。令牌（YYY）也是正确的。

这是回应：

```
{"meta":{"error_type":"APIInvalidParametersError","code":400,"error_message":"please supply action=approve,ignore,follow,block,unblock,unfollow"}} 
```

我试过 action=follow 和 action=unfollow。有可能，这是一个错误吗？我在哪里可以举报？

Instagram API 文档：http: [//instagram.com/developer/endpoints/relationships/](http://instagram.com/developer/endpoints/relationships/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-18T10:50:06.793

问题是您没有将操作作为 postdata 发送。我昨天遇到了确切的问题。

access_token 应该在 url 中发送，但是 action=follow 应该在请求的 postdata 中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T14:17:45.660

```
NSString *initialURL = [NSString stringWithFormat:@"https://api.instagram.com/v1/users/USER_ID/relationship?access_token=ACCESS TOKEN"];
NSURL *url=[NSURL URLWithString:initialURL];

NSString *key = [NSString stringWithFormat:@"action=follow"];
NSData *mastData = [key dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES];
NSString *mastLength = [NSString stringWithFormat:@"%d",[mastData length]];

NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
[request setURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:mastLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:mastData];
NSURLConnection *con=[[NSURLConnection alloc]initWithRequest:request delegate:self];
[con start]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-22T21:04:37.797

还要确保在进行身份验证时使用正确的范围。

添加`scope=like+comments+relationships`该身份验证 URL。

# go - 需要帮助了解为什么 select{} 不会永远阻塞

> ID：10171941
> 
> 赞同：5
> 
> 时间：2012-04-16T09:51:51.043
> 
> 标签：go, channel

我正在练习使用通道来实现队列。具体来说，我正在尝试使用通道的大小来限制同时运行的 goroutine 的数量。也就是说，我编写了以下代码：

```
package main

import "fmt"
import "time"
import "math/rand"

func runTask (t string, ch *chan bool) {
        start := time.Now()
        fmt.Println("starting task", t)
        time.Sleep(time.Millisecond * time.Duration(rand.Int31n(1500))) // fake processing time
        fmt.Println("done running task", t, "in", time.Since(start))
        <- *ch
}

func main() {
        numWorkers := 3
        files := []string{"a", "b", "c", "d", "e", "f", "g", "h", "i", "j"}

        activeWorkers := make(chan bool, numWorkers)

        for _, f := range files {
                activeWorkers <- true
                fmt.Printf("activeWorkers is %d long.\n", len(activeWorkers))
                go runTask(f, &activeWorkers)
        }
        select{}
} 
```

现在，代码崩溃了：

```
throw: all goroutines are asleep - deadlock! 
```

我的期望是对 select 的调用将永远阻塞，并让 goroutine 终止而不会出现死锁。

所以我有一个双重问题：为什么不选择永远阻塞，并且在 for 循环之后没有抛出 time.Sleep() 调用，我怎样才能避免死锁？

干杯，

-mtw

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:58:16.360

Arlen Cuss 已经写了一个很好的答案。我只是想为您的工作队列建议另一种设计。除了限制通道可以缓冲的条目数量之外，您还可以只生成有限数量的工作 goroutine，这感觉更自然。像这样的东西：

```
package main

import "fmt"
import "time"
import "math/rand"

func runTask(t string) string {
    start := time.Now()
    fmt.Println("starting task", t)
    time.Sleep(time.Millisecond * time.Duration(rand.Int31n(1500))) // fake processing time
    fmt.Println("done running task", t, "in", time.Since(start))
    return t
}

func worker(in chan string, out chan string) {
    for t := range in {
        out <- runTask(t)
    }
}

func main() {
    numWorkers := 3

    // spawn workers
    in, out := make(chan string), make(chan string)
    for i := 0; i < numWorkers; i++ {
        go worker(in, out)
    }

    files := []string{"a", "b", "c", "d", "e", "f", "g", "h", "i", "j"}

    // schedule tasks
    go func() {
        for _, f := range files {
            in <- f
        }
    }()

    // get results
    for _ = range files {
        <-out
    }
} 
```

如果您只想等到所有任务都执行完毕，您也可以使用[sync.WaitGroup](http://golang.org/pkg/sync/#WaitGroup)`out` ，但使用通道的好处是您可以稍后聚合结果。例如，如果每个任务都返回该文件中的字数，那么最后的循环可能用于汇总所有单个字数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T10:25:45.077

首先，您不需要传递指向通道的指针；通道，如地图和其他，[**是引用**](http://golang.org/doc/faq#references)，这意味着基础数据不会被复制，只是指向实际数据的指针。如果你*需要*一个指向 a本身的指针，你就会知道何时到来。 [](http://golang.org/doc/faq#references) ***`chan`***

 ***发生崩溃是因为程序进入了每个 goroutine 都被阻塞的状态。这*应该*是不可能的；如果每个 goroutine 都被阻塞了，那么就没有可能的进程来唤醒另一个 goroutine（因此您的程序将被挂起）。

主要的 goroutine 结束了`select {}`——不等待任何人，只是挂起。一旦最后一个`runTask`goroutine 完成，就只剩下主 goroutine 了，它不等待任何人。

您需要添加一些方法来了解每个 goroutine 何时完成；也许另一个频道可以接收完成事件。

这有点丑陋，但可能是一些灵感。

```
package main

import "fmt"
import "time"
import "math/rand"

func runTask(t string, ch chan bool, finishedCh chan bool) {
    start := time.Now()
    fmt.Println("starting task", t)
    time.Sleep(time.Millisecond * time.Duration(rand.Int31n(1500))) // fake processing time
    fmt.Println("done running task", t, "in", time.Since(start))
    <-ch
    finishedCh <- true
}

func main() {
    numWorkers := 3
    files := []string{"a", "b", "c", "d", "e", "f", "g", "h", "i", "j"}

    activeWorkers := make(chan bool, numWorkers)
    finishedWorkers := make(chan bool)
    done := make(chan bool)

    go func() {
        remaining := len(files)
        for remaining > 0 {
            <-finishedWorkers
            remaining -= 1
        }

        done <- true
    }()

    for _, f := range files {
        activeWorkers <- true
        fmt.Printf("activeWorkers is %d long.\n", len(activeWorkers))
        go runTask(f, activeWorkers, finishedWorkers)
    }

    <-done
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T21:38:25.377

tux21b 已经发布了一个更惯用的解决方案，但我想以不同的方式回答您的问题。select{} 确实会永远阻塞，是的。当所有 goroutine 都被阻塞时，就会发生死锁。如果你所有其他的 goroutine 都完成了，那么你只剩下阻塞的 main goroutine，这是一个死锁。

通常，您希望在所有其他 goroutine 都完成后在您的主 goroutine 中执行某些操作，或者通过使用它们的结果，或者只是清理，为此您将执行 tux21b 建议的操作。如果你真的只是想让 main 完成并让其余的 goroutine 完成它们的工作，请将其放在`defer runtime.Goexit()`main 函数的顶部。这将导致它退出而不退出程序。***

# jquery - jQuery自动完成仅在按下“Enter”时显示“无结果”

> ID：10171944
> 
> 赞同：0
> 
> 时间：2012-04-16T09:52:06.983
> 
> 标签：jquery, autocomplete

```
 $('#term').catcomplete({
    delay: 0,
    minLength: 2,
    source: function(request, response){
      $.post('/search/super_search', {'term': $('#term').val()}, function(data){
        if (data.length > 0) {
          response(data);
        } else  {
          response([{label: 'No Results', category:"", href:""}, {label: 'Please try your search again.', category: "", href: ""}])
        }
      });
    }
} 
```

我目前有上面的代码。只有`No results`当没有结果被发回时才会导致。但是，我需要做的是仅`No results`在没有结果且用户按下回车时才返回。

编辑：我正在研究从源方法访问事件。有没有办法让我在源方法中访问它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T09:57:18.283

您可以将字符串“无结果”或类似的内容存储在回调函数中的变量中，他没有结果，并在用户按下回车时检查该字符串，并且什么都不发回而不是“无结果”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T11:42:32.303

您的答案的几个部分：

1.  我看不到通过该`source`选项执行此操作的任何方法，因为`source`它与任何事件无关。

2.  然而，该`search`选项是与`autocompletesearch`事件相关联的，它的回调函数可以在`event`和`ui`对象中传递以进行检查。但是有一个问题：根据我的测试和搜索，它忽略了大多数“元”按键事件（例如`shift`, `enter`, `return`）。

这使您有两个选择：

1.  让您的远程脚本测试以查看`term`字符串中的最后一个字符是否为换行符。这可能会或可能不会起作用，具体取决于浏览器是否捕获`13`按键并将其传递。

2.  让外部事件处理程序`keypress`在单独的函数中侦听，并设置一个标志，以允许自动完成的`search`选项。就像是：

    ```
    var getResults = false;

    $("#term").keypress(function(event) {
        getResults = (event.which == 13);
    });

      $('#term').catcomplete({
        delay: 0,
        minLength: 2,
        search: function(event, ui) {
              return getResults;
        },
        source: function(request, response){
          $.post('/search/super_search', {'term': $('#term').val()}, function(data){
            if (data.length > 0) {
              response(data);
            } else  {
              response([{label: 'No Results', category:"", href:""}, {label: 'Please try your search again.', category: "", href: ""}])
            }
          });
        } 
    ```

现在，我个人在使用这种方法时遇到了麻烦。但我认为这与我的测试环境有关，而不是实际逻辑。可能有一种方法可以进一步简化这一点，但基本思想是`search`选项的回调返回 true 或 false 并基于此触发自动完成，再加上`enter`不作为事件触发的限制，因此必须在其他地方捕获它。

让我知道这是否有效。

# networking - ICMP 错误消息和生成它们的 IP 数据包之间的相关性

> ID：10171948
> 
> 赞同：1
> 
> 时间：2012-04-16T09:52:31.870
> 
> 标签：networking, ip, packet, icmp, ttl

我需要发送一堆我确定会触发 ICMP TTL 过期错误消息的 IP 数据包。如何准确地将每条错误消息与生成它的数据包相关联？ICMP 标头中的哪个字段用于此目的？

我是否应该在原始 IP 标头中使用一些自定义 ID 号，以便我可以知道哪个错误消息对应于哪个数据包？如果是这样，哪个领域最适合这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T21:31:57.250

ICMP TTL Expired 消息的正文必须包含原始数据包的 IP 标头（包括源端口/目标端口）和原始标头之外的 64 位。

根据时间和标头信息，您可以得出哪个数据包触发了 TTL 过期消息。

我在下面包含一个由 NTP 数据包触发的示例...

有关详细信息，请参阅[RFC 792](https://www.rfc-editor.org/rfc/rfc792)（第 5 页）。

* * *

## ICMP TTL 过期消息

```
Ethernet II, Src: JuniperN_c3:a0:00 (b0:c6:9a:c3:a0:00), Dst: 78:2b:cb:37:4c:7a (78:2b:cb:37:4c:7a)
    Destination: 78:2b:cb:37:4c:7a (78:2b:cb:37:4c:7a)
        Address: 78:2b:cb:37:4c:7a (78:2b:cb:37:4c:7a)
        .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
        .... ..0\. .... .... .... .... = LG bit: Globally unique address (factory default)
    Source: JuniperN_c3:a0:00 (b0:c6:9a:c3:a0:00)
        Address: JuniperN_c3:a0:00 (b0:c6:9a:c3:a0:00)
        .... ...0 .... .... .... .... = IG bit: Individual address (unicast)
        .... ..0\. .... .... .... .... = LG bit: Globally unique address (factory default)
    Type: IP (0x0800)
Internet Protocol, Src: 172.25.116.254 (172.25.116.254), Dst: 172.25.116.10 (172.25.116.10)
    Version: 4
    Header length: 20 bytes
    Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
        0000 00.. = Differentiated Services Codepoint: Default (0x00)
        .... ..0\. = ECN-Capable Transport (ECT): 0
        .... ...0 = ECN-CE: 0
    Total Length: 56
    Identification: 0x86d7 (34519)
    Flags: 0x02 (Don't Fragment)
        0.. = Reserved bit: Not Set
        .1\. = Don't fragment: Set
        ..0 = More fragments: Not Set
    Fragment offset: 0
    Time to live: 255
    Protocol: ICMP (0x01)
    Header checksum: 0xb3b1 [correct]
        [Good: True]
        [Bad : False]
    Source: 172.25.116.254 (172.25.116.254)
    Destination: 172.25.116.10 (172.25.116.10)
Internet Control Message Protocol
    Type: 11 (Time-to-live exceeded)
    Code: 0 (Time to live exceeded in transit)
    Checksum: 0x4613 [correct]
    Internet Protocol, Src: 172.25.116.10 (172.25.116.10), Dst: 172.25.0.11 (172.25.0.11)
        Version: 4
        Header length: 20 bytes
        Differentiated Services Field: 0x00 (DSCP 0x00: Default; ECN: 0x00)
            0000 00.. = Differentiated Services Codepoint: Default (0x00)
            .... ..0\. = ECN-Capable Transport (ECT): 0
            .... ...0 = ECN-CE: 0
        Total Length: 36
        Identification: 0x0001 (1)
        Flags: 0x00
            0.. = Reserved bit: Not Set
            .0\. = Don't fragment: Not Set
            ..0 = More fragments: Not Set
        Fragment offset: 0
        Time to live: 0
            [Expert Info (Note/Sequence): "Time To Live" only 0]
                [Message: "Time To Live" only 0]
                [Severity level: Note]
                [Group: Sequence]
        Protocol: UDP (0x11)
        Header checksum: 0xee80 [correct]
            [Good: True]
            [Bad : False]
        Source: 172.25.116.10 (172.25.116.10)
        Destination: 172.25.0.11 (172.25.0.11)
    User Datagram Protocol, Src Port: telindus (1728), Dst Port: ntp (123)
        Source port: telindus (1728)
        Destination port: ntp (123)
        Length: 16
        Checksum: 0xa7a1 [unchecked, not all data available]
            [Good Checksum: False]
            [Bad Checksum: False] 
```

# sql - SQL 查询以检索具有所需列值的单行数据

> ID：10171949
> 
> 赞同：5
> 
> 时间：2012-04-16T09:52:35.097
> 
> 标签：sql, sql-server, sql-server-2008, group-by, duplicate-removal

我有一个包含以下数据数据的数据库表

```
 S_Acc_RowID   BU_Customer_Segment        PBU

 1111-00      PSG SMB       -1
 1111-00      SMB           -1
 1111-00      EB Seg         1
 1111-01      PSG SMB        1 
 1111-01      SMB           -1
 1111-01      EB data       -1
 1111-02      PSG Seg       -1
 1111-02      Unattended    -1
 1111-02      Channels      -1 
```

* * *

---------------- 像 700 万行

现在我想为条件所在的每个 Acc ID 提取单行

```
1) if the **Acc ID** is having 'EB --' in **CustSeg** then select that **CustSeg** value
2) if **Acc Id** is not having any 'EB -- ' in CustSeg then select **CustSeg** where **PBU** = 1
3) if the both above failed take any one value of the **CustSeg** 
```

**我想要的最终数据应该是**

```
 S_Acc_RowID    BU_Customer_Segment   

   1111-00      EB seg
   1111-01      EB Data
   1111-02      (any one of three[PSG seg/ UNattended/channels]) 
```

我正在使用以下查询

```
select 
distinct(A.[S_Acc_RowID]) as [Account_RowID],
[EB Customer Segment] =
case
  when LEFT(A.[BU_Customer_Segment],2) = 'EB' then A.[BU_Customer_Segment]
     when LEFT(A.[BU_Customer_Segment],2) != 'EB' then 
          (select B.[BU_Customer_Segment] from 
               dbo.[SiebelAccount Extract] B
               where A.[S_Acc_RowID]=B.[S_Acc_RowID]
               and [PBU] = 1)
 else A.[BU_Customer_Segment]
 end, 
 A.[S_Acc_AMID2#] as [AMID Level 2(Acc)],
 A.[S_Acc_Login_P] as [Sales Team(Acc)], 
 A.[S_Acc_Org_P] as [Country_det],
 A.[Customer AMID Level 2 Name(ACC)] 

 from dbo.[SiebelAccount Extract] A 
```

**但它正在返回这样的数据**

```
S_Acc_RowID    BU_Customer_Segment   

   1111-00      EB seg
   1111-01      PSG SMB
   1111-01      EB Data
   1111-02      null 
```

**我不想为 ID 1111-01 显示两行 ..我只想要 EB 的一行**

请在这件事上给予我帮助 ..

提前致谢..

干杯，
哈里什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-16T10:18:06.923

在 Oracle 上，我尝试了以下方法，如果您转换 oracle 特定的分析函数，它应该可以工作，我还对示例数据进行了一些更改以获得更好的示例：

```
 WITH t AS (
    SELECT '1111-00' AS acc_id, 'PSG SMB' AS cust_seg, -1 AS pbu FROM dual UNION ALL
    SELECT '1111-00' AS acc_id, 'SMB'     AS cust_seg, -1 AS pbu FROM dual UNION ALL
    SELECT '1111-00' AS acc_id, 'EB Seg'  AS cust_seg,  1 AS pbu FROM dual UNION ALL
    SELECT '1111-01' AS acc_id, 'PSG SMB' AS cust_seg,  1 AS pbu FROM dual UNION ALL
    SELECT '1111-01' AS acc_id, 'SMB'     AS cust_seg, -1 AS pbu FROM dual UNION ALL
    SELECT '1111-01' AS acc_id, 'Ex data' AS cust_seg, -1 AS pbu FROM dual UNION ALL
    SELECT '1111-02' AS acc_id, 'PSG Seg' AS cust_seg, -1 AS pbu FROM dual UNION ALL
    SELECT '1111-02' AS acc_id, 'Unatten' AS cust_seg, -1 AS pbu FROM dual UNION ALL
    SELECT '1111-02' AS acc_id, 'Channels'AS cust_seg, -1 AS pbu FROM dual )
    --
    SELECT acc_id,
           cust_seg
      FROM (SELECT t.*,
                   row_number() OVER(PARTITION BY acc_id ORDER BY CASE WHEN cust_seg LIKE '%EB%' THEN 1 WHEN pbu = 1 THEN 2 ELSE 3 END ) rnk
              FROM t
             ORDER BY acc_id, CASE WHEN cust_seg LIKE '%EB%' THEN 1 WHEN pbu = 1 THEN 2 ELSE 3 END)
     WHERE rnk = 1 ;

Result :

    ACC_ID                CUST_SEG
    --------------------- ------------------------
    1111-00               EB Seg
    1111-01               PSG SMB
    1111-02               PSG Seg 
```

**SQL Server 版本**

```
 SELECT  *
    FROM    (
              SELECT  *
                      , rn = ROW_NUMBER() OVER (PARTITION BY S_Acc_RowID ORDER BY CASE WHEN LEFT(a.BU_Customer_Segment, 2) = 'EB' THEN 1 WHEN a.PBU = 1 THEN 2 ELSE 3 END)          
              FROM    [SiebelAccount Extract] a
            ) q
    WHERE   rn = 1 
```

和测试数据

```
;WITH [SiebelAccount Extract] (S_Acc_RowID, BU_Customer_Segment, PBU) AS (
  SELECT * FROM (VALUES 
     ('1111-00', 'PSG SMB',  -1)
     , ('1111-00', 'SMB',      -1)
     , ('1111-00', 'EB Seg',    1)
     , ('1111-01', 'PSG SMB',   1)
     , ('1111-01', 'SMB',      -1)
     , ('1111-01', 'EB data',  -1)
     , ('1111-02', 'PSG Seg',  -1)
     , ('1111-02', 'Unattended', -1)
     , ('1111-02', 'Channels', -1)
  ) a (b, c, d)
)
SELECT  *
FROM    (
          SELECT  *
                  , rn = ROW_NUMBER() OVER (PARTITION BY S_Acc_RowID ORDER BY CASE WHEN LEFT(a.BU_Customer_Segment, 2) = 'EB' THEN 1 WHEN a.PBU = 1 THEN 2 ELSE 3 END)          
          FROM    [SiebelAccount Extract] a
        ) q
WHERE   rn = 1 
```

# visual-studio-2008 - Windows 7 Visual C++ 2008 奇怪的段错误和空指针行为

> ID：10171950
> 
> 赞同：0
> 
> 时间：2012-04-16T09:52:36.220
> 
> 标签：visual-studio-2008, visual-c++, windows-7, transactions, segmentation-fault

当我们的开发机器升级到 Windows 7 时，一些奇怪的事情开始发生。当我们的程序（visual c++ 2008，一些猫头鹰到 mfc 适配器，sql server 2008r2）访问例如空指针时，它不会按预期崩溃，但它会继续运行，只是关闭实际窗口。可能是个好主意，但这会使数据库事务处理成为一场噩梦。如果程序中发生隐藏崩溃，则具有未提交更改的已启动事务将保持打开状态，并且用户可以继续使用该程序。当下一个事务正常提交时，前半部分已完成事务中“挂起”的更改也会被保存。这绝对不是故意的，会导致数据损坏。

在 Windows 7 之前，我们并不关心这一点，崩溃就是崩溃。程序已关闭，所有正在运行的事务都已回滚。

我们可以做些什么来切换回旧的行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T10:13:06.390

您可以拥有自己的未处理异常例程来捕获段错误/访问冲突。

```
// global scope
    bool in_region_of_interest(_EXCEPTION_POINTERS *ep) {
        // TODO: Check if you aren't breaking some 3rd party functionality by exiting now.
        return ep && ep->ExceptionRecord; // Pretty much a stub.
    }
    static const bool  feelin_gentle = false; // Do we care for semi-clean exits?
    static const DWORD min_virt_rng  = 0x1000; // max virtual address that 'indicates' null ptr access.
    LONG WINAPI my_unh_exc_hndlr(_EXCEPTION_POINTERS *excPtrs)
    {
        if (in_region_of_interest(excPtrs)) {
           DWORD code = excPtrs->ExceptionRecord->ExceptionCode;
           if (EXCEPTION_ACCESS_VIOLATION == code && // If fingers burn in fire.
              min_virt_rng > excPtrs->ExceptionRecord->ExceptionInformation[1]) { // If it was a *(void*)0 that we accessed.
              if (feelin_gentle)
                 ExitProcess(code);
              else
                 TerminateProcess(GetCurrentProcess(), code);
           }
        }
        return EXCEPTION_CONTINUE_SEARCH; // Give control to the next filter.
    }

// ... somewhere in the beginning of main()
    SetUnhandledExceptionFilter(my_unh_exc_hndlr); 
```

您不应该总是崩溃的原因是某些依赖项可能取决于能够处理段错误。您应该使用一种机制来动态地打开或关闭此功能，具体取决于您预期崩溃的位置。除非你真的确定它不会被破坏，否则最好忽略除地址为 0 或附近的无效访问之外的所有内容。如果 0x1000 从我的屁股中取出，我会取一个值，因为我不希望对象中有任何偏移量比我的程序中的大。

额外信息： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363082 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363082(v=vs.85).aspx)

# image - KCFinder + TinyMCE 集成

> ID：10171954
> 
> 赞同：6
> 
> 时间：2012-04-16T09:52:45.240
> 
> 标签：image, tinymce, file-management

看来我将 KCFinder 集成到 TinyMCE 非常成功。唯一的问题是当文件管理器弹出并且我想选择一张图片时，它的菜单上既没有选择也没有选择缩略图（右键单击图片时会出现菜单）。请提供一点帮助。

这是KCFinder的[截图](http://dl.dropbox.com/u/53622932/stackoverflow_tinymce_kcfinder_no_select.png)

# javascript - Ease Out Cubic - 函数参数解释

> ID：10171966
> 
> 赞同：15
> 
> 时间：2012-04-16T09:53:22.047
> 
> 标签：javascript, algorithm, math, animation

在这个很棒的[网页上](http://gizma.com/easing/#cub2)，我找到了一个缓动算法列表，可以为我的网页添加漂亮的视觉吸引力。

尽管如此，我发现那里简要提到了函数参数（见下文），但该算法的行为并不如我所愿。能否请我解释一下应该在下面提到的函数的参数中输入哪些值/范围？

*参数列表：*

*   **t：当前时间**- 这里应该是值 0...1，还是当前帧的实数？
*   **b：起始值**- 我假设，被移动对象的起始 X 或 Y 坐标
*   **c：值的变化**- 这里可以一直是所有帧的第 1 位吗？
*   **d: 持续时间**- 总共有多少帧？

```

`Math.easeOutCubic = function (t, b, c, d) {
    t /= d;
    t--;
    return c*(t*t*t + 1) + b;
};` 

应该将这些值增量添加到从函数获得的最后一个值，还是应该将它们添加到初始 0 位置？

            回答 #1

赞同：15

时间：2012-04-16T09:59:34.120

你是对的，`d`是持续时间，`t`是当前时间。因此，`t`应该是从`0`到`d`。

`c`是一个总变化，应该等于`end value`- `start value`。

*   因为`t = 0`我们有`c*(-1 + 1) + b`或`b`
*   因为`t = d`我们有`c*(0 + 1) + b`或`b + c`

任何 fps 的功能都是相同的，取决于您更新位置和调用该功能的频率。

```

# wordpress - Wordpress 自定义帖子 - 回读到页面

> ID：10171972
> 
> 赞同：1
> 
> 时间：2012-04-16T09:53:40.770
> 
> 标签：wordpress

我创建了一个名为“茶”的自定义帖子类型，它是默认的帖子布局。“32”的值被输入到所见即所得编辑器中。

我正在查看数据，我想回显 the_content(); 进入一个隐藏的领域。然后根据该字段的值创建一个数字计数器。

目前我只是得到“0”的价值

我的代码如下：

```
<div class="tea-count">
<?php
$args = array( 'post_type' => 'tea');
$loop = new WP_Query( $args );
 while ( $loop->have_posts() ) : $loop->the_post();
  echo '
   <div id="counter">
    <input type="text" name="counter-value" value="the_content();" />
   </div>';
?>
<?php endwhile; ?>
</div> 
```

如何获取值以读取 32，而不是 0？

该金额将根据用户输入的内容而变化。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:36:06.003

您可能需要使用 get_the_content()，因为 the_content() 具有用于打印到屏幕的内置函数，并且您已经在`echo`.

此外，您可能需要将单引号更改为双引号，反之亦然，或者更好地连接字符串。

这可能有效：

```
while ( $loop->have_posts() ) : $loop->the_post();
  $content = get_the_content();
  echo '
   <div id="counter">
    <input type="text" name="counter-value" value="' . $content . '" />
   </div>'; 
```

# objective-c - 将表格添加到 UITextView，最好的方法是什么？

> ID：10171974
> 
> 赞同：4
> 
> 时间：2012-04-16T09:53:52.543
> 
> 标签：objective-c, ios, uitextview

我一直在研究 UITextView 及其随附库 Core Text 的支持功能。在 MacOSX 下，您有 NSTextTable，它只允许您将表格添加到您的文本中。遗憾的是，iOS 不支持此类。现在我的问题是在 iOS 下支持此功能的最佳方法是什么？

只想制作一个有五列的简单表格。如果我理解正确，我可以通过为 NSAttributedString 创建自定义属性来做一些事情。只有我不确定最好的方法是什么？目标是我可以创建一个包含一个可以导出到 RTF 的表格的文本文档。对于后者，我需要编写自己的 RTF 导出器类，这应该不是什么大问题。因为 RTF 格式在 Internet 上有很好的记录。我的主要问题是如何让表格显示在我的文本视图中。

或者我应该只使用 UIWebView 吗？

# memcached - 将 Memcached 与 YII 的查询构建器一起使用

> ID：10171976
> 
> 赞同：0
> 
> 时间：2012-04-16T09:53:55.077
> 
> 标签：memcached, yii

我在我的应用程序中使用 [YII 的查询生成器](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)进行 SELECT 查询。如何与 memcached 一起使用？

问候，
阿比吉特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:41:36.547

在配置中：

```
 ......
'components'=>array(
    ......
    'cache'=>array(
        'class'=>'system.caching.CMemCache',
        'servers'=>array(
            array('host'=>'server1', 'port'=>11211, 'weight'=>60),
        ),
    ),
),
); 
```

并有这样的查询：

```
$rows = Yii::app()->db->cache(1000, $dependency)->createCommand($sql)->queryAll(); 
```

或者对于 ActiveRecord：

```
$posts = Post::model()->with('comments')->findAll(); 
```

有一个很好的教程：[http ://www.yiiframework.com/doc/guide/1.1/en/caching.overview](http://www.yiiframework.com/doc/guide/1.1/en/caching.overview)

# ruby - 检查是否已经定义了常量

> ID：10171978
> 
> 赞同：85
> 
> 时间：2012-04-16T09:53:57.320
> 
> 标签：ruby, constants

这是一个简单的，我希望。在以下示例中，如何检查是否已定义常量？

```
#this works
var = var||1
puts var
var = var||2
puts var

#this doesn't
CONST = CONST||1
puts CONST
CONST = CONST||2
puts CONST

=> 1
   1
   uninitialized constant CONST (NameError) 
```

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-04-16T10:01:27.030

```
CONST = 2 unless defined? CONST 
```

有关出色操作员的更多信息，请参见[此处](http://ruby-doc.com/docs/ProgrammingRuby/html/tut_expressions.html#UG)`defined?`。

^(*PS而且在未来我猜你会想要`var ||= 1`而不是`var = var||1`.*)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-08-03T08:39:01.967

[常量定义？API](http://apidock.com/ruby/Module/const_defined%3F)

```
pry> User.const_defined?("PER_PAGE")
=> true
pry> User.const_defined?("PER_PAGE123")
=> false 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-05-01T13:08:34.293

```
CONST ||= :default_value 
```

以上在 ruby​​ 1.9.3 上对我有用，但在 1.8 上失败了……现在 1.8 已经很古老了。

# c - 如何充分利用堆栈跟踪（来自内核或核心转储）？

> ID：10171984
> 
> 赞同：18
> 
> 时间：2012-04-16T09:54:14.990
> 
> 标签：c, gcc, stack-trace

如果你的内核模块崩溃时幸运的话，你会得到一个带有大量信息的日志的 oops，例如寄存器中的值等。其中一个信息是堆栈跟踪（核心转储也是如此，但我最初要求这个内核模块）。举个例子：

```
[<f97ade02>] ? skink_free_devices+0x32/0xb0 [skin_kernel]
[<f97aba45>] ? cleanup_module+0x1e5/0x550 [skin_kernel]
[<c017d0e7>] ? __stop_machine+0x57/0x70
[<c016dec0>] ? __try_stop_module+0x0/0x30
[<c016f069>] ? sys_delete_module+0x149/0x210
[<c0102f24>] ? sysenter_do_call+0x12/0x16 
```

我的猜测是，`+<number1>/<number2>`这与发生错误的函数的偏移量有关。也就是说，通过检查这个数字，也许查看汇编输出，我应该能够找出发生此错误的行（更好的是指令）。那是对的吗？

我的问题是，这两个数字到底是多少？你如何利用它们？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-16T10:10:08.543

```
skink_free_devices+0x32/0xb0 
```

这意味着违规指令是`0x32`从函数开始的字节，总共`skink_free_devices()`是`0xB0`字节长。

如果您在启用的情况下编译您的内核，那么您可以使用该工具或我们的好旧`-g`工具获取控件跳转的函数内部的行号`addr2line``gdb`

像这样的东西

```
$ addr2line -e ./vmlinux 0xc01cf0d1
/mnt/linux-2.5.26/include/asm/bitops.h:244
or
$ gdb ./vmlinux
...
(gdb) l *0xc01cf0d1
0xc01cf0d1 is in read_chan (include/asm/bitops.h:244).
(...)
244     return ((1UL << (nr & 31)) & (((const volatile unsigned int *) addr)[nr >> 5])) != 0;
(...) 
```

因此，只需提供您要检查的地址，`addr2line`或者`gdb`他们会告诉您源文件中存在违规函数的行号 有关完整详细信息，请参阅[本文](http://ds9a.nl/symoops.html)

**编辑：** `vmlinux`是用于调试的内核的未压缩版本，`/lib/modules/$(uname -r)/build/vmlinux`如果您从源代码构建内核，通常可以找到@。`vmlinuz`您发现的`/boot`是压缩内核，在调试中可能没有那么有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T00:35:07.243

对于 Emacs 用户，[这里](https://github.com/mgalgs/kernel-stack-trace-mode)是一个主要模式，可以在堆栈跟踪中轻松跳转（`addr2line`内部使用）。

免责声明：我写的:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-07T18:15:25.163

反刍这个你需要使用的[答案](https://serverfault.com/a/901534/500287)`faddr2line`

就我而言，我有以下截断的呼叫跟踪：

```
[  246.790938][   T35] Call trace:
[  246.794075][   T35]  __switch_to+0x10c/0x180
[  246.798348][   T35]  __schedule+0x278/0x6e0
[  246.802531][   T35]  schedule+0x44/0xd0
[  246.806368][   T35]  rpm_resume+0xf4/0x628
[  246.810463][   T35]  __pm_runtime_resume+0x94/0xc0
[  246.815257][   T35]  macb_open+0x30/0x2b8
[  246.819265][   T35]  __dev_open+0x10c/0x188 
```

并在[主线 linux 内核](https://github.com/torvalds/linux.git)中运行以下命令：

```
./scripts/faddr2line vmlinux macb_open+0x30/0x2b8 
```

给出输出

```
macb_open+0x30/0x2b8:
pm_runtime_get_sync at include/linux/pm_runtime.h:386
(inlined by) macb_open at drivers/net/ethernet/cadence/macb_main.c:2726 
```

# linux - 在linux中通过cmd提示访问gmail账号

> ID：10171986
> 
> 赞同：2
> 
> 时间：2012-04-16T09:54:22.323
> 
> 标签：linux

我想通过 cmd 提示符登录到 Gmail。请提供解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T10:00:33.960

您可以尝试`mutt`电子邮件客户端。

[教程](http://crunchbanglinux.org/wiki/howto/howto_setup_mutt_with_gmail_imap)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T18:47:13.060

您可以使用链接来完成。进入网页后，您必须告诉它使用简单版本，但它可以工作。我自己做过这个。他们是 sup 和 mutt，但链接是最简单的方法。

# ruby - Redmine：用户配置文件视图中的错误 [mysql]

> ID：10171987
> 
> 赞同：0
> 
> 时间：2012-04-16T09:54:27.057
> 
> 标签：ruby, redmine

我最近从 Trav 0.12 迁移到 Redmine 1.4.0。将数据从 Rrac 迁移到 Redmine 后，出现此错误：

```
Processing UsersController#show (for xx.xxx.xx.xxx at 2012-04-16 12:45:36) [GET]

Parameters: {"id"=>"4", "action"=>"show", "controller"=>"users"}

NoMethodError (undefined method `<=>' for nil:NilClass):
  lib/redmine/activity/fetcher.rb:80:in `events'
  lib/redmine/activity/fetcher.rb:80:in `sort!'
  lib/redmine/activity/fetcher.rb:80:in `events'
  app/controllers/users_controller.rb:68:in `show'
  thin (1.3.1) lib/thin/connection.rb:80:in `pre_process'
  thin (1.3.1) lib/thin/connection.rb:78:in `catch'
  thin (1.3.1) lib/thin/connection.rb:78:in `pre_process'
  thin (1.3.1) lib/thin/connection.rb:53:in `process'
  thin (1.3.1) lib/thin/connection.rb:38:in `receive_data'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run_machine'
  eventmachine (0.12.10) lib/eventmachine.rb:256:in `run'
  thin (1.3.1) lib/thin/backends/base.rb:61:in `start'
  thin (1.3.1) lib/thin/server.rb:159:in `start'
  thin (1.3.1) lib/thin/controllers/controller.rb:86:in `start'
  thin (1.3.1) lib/thin/runner.rb:185:in `send'
  thin (1.3.1) lib/thin/runner.rb:185:in `run_command'
  thin (1.3.1) lib/thin/runner.rb:151:in `run!'
  thin (1.3.1) bin/thin:6
  /usr/bin/thin:23:in `load'
  /usr/bin/thin:23

Rendering /mnt/storage/redmine/public/500.html (500 Internal Server Error) 
```

我是红宝石新手，有人可以帮助我吗？

**注意**：[这里](https://stackoverflow.com/questions/9096950/redmine-error-in-user-profile-view)描述的问题非常相似。在我的情况下，我使用 MySQL 数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T12:36:09.330

migrate_from_trac.rake 的补丁

```
class ::Time
    class << self
      alias :real_at :at
      alias :real_now :now
      # Fixing import for trac 0.12
      def at(time)
        d = nil
        if time > 10000000000 then
            d = real_at(time / 1000000, time % 1000000)
        else
            d = real_at(time) 
        end
        d
      end
      def now
        real_now - @fake_diff.to_i
      end
      def fake(time)
        time = 0 if time.nil?
        @fake_diff = real_now - time
        res = yield
        @fake_diff = 0
       res
      end
    end
  end 
```

# ruby-on-rails-3 - 永远不会调用 ActiveRecord 模型的属性设置器

> ID：10171989
> 
> 赞同：1
> 
> 时间：2012-04-16T09:54:28.127
> 
> 标签：ruby-on-rails-3

我只是想在设置值时覆盖属性“parent_id”的设置器来做一些其他的事情。

但是 setter 永远不会被调用。（该值可以被怀疑检索，所以它显然是由rails以另一种方式设置的）

如何实现我的目标？

```
class Category < ActiveRecord::Base
  acts_as_tree
  has_and_belongs_to_many :photos

  def parent_id=(value)
    puts "-----> This is never called"
    write_attribute(:parent_id, value)
  end

  def parent_id
    puts "------> This is called as suspected"
    read_attribute(:parent_id)
  end
end 
```

我是 ruby​​ 和 rails 的新手，我很困惑那些需要我几个小时才能完成简单事情的事情......

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T10:22:54.543

根据 的[来源](https://github.com/rails/acts_as_tree/blob/master/lib/active_record/acts/tree.rb)，请`acts_as_tree`尝试覆盖`parent=`，我认为`ActiveRecord`使用提供给的符号创建的魔术方法`belongs_to`。无论如何，我不知道你的用例，但考虑使用[Active Record 的过滤方法](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)而不是覆盖`ActiveRecord`方法。

# expect - 如何在expect中显示expect_out(buffer)的内容

> ID：10171991
> 
> 赞同：2
> 
> 时间：2012-04-16T09:54:34.783
> 
> 标签：expect

我正在使用简单的期望脚本，它等待“hi”并在缓冲区中显示内容。该脚本无法打印脚本的内容。我已经尝试了所有 4 种不同的方式（那些被注释的方式）来显示 expect_out（缓冲区）。建议以下脚本中的任何更改/修改

```
#!/bin/sh
#!/usr/bin/expect

expect "hi\r"

#puts "$expect_out(buffer)"
#send_user "$expect_out(buffer)\n"
#send "you typed <$expect_out(buffer)\r>"
#send "but I only expected <$expect_out(buffer)\r>" 
```

提示如下错误“ can't read "expect_out(0,string)": no such variable while execution "puts "$expect_out(0,string)"" (file "./oreilly.exp" line 7)"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T14:21:53.430

调试期望脚本时，放在脚本`exp_internal 1`的顶部。

`\n`期待的时候，你不应该期待`\r`

要查看 expect_out 中的内容，请使用这个方便的 Tcl 命令：`parray expect_out`

# asp.net-mvc - 通过迭代访问它后的 Ienumerable null

> ID：10171993
> 
> 赞同：1
> 
> 时间：2012-04-16T09:54:37.003
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我将 IEnumerable 传递给未绑定到 ajax 后调用的视图。

我在我的视图中构造了一个迭代来访问一些属性：

```
@model IEnumerable<MvcNPCA.Models.T_Contact_Medium>

@using (Ajax.BeginForm("Edit", new { medid = ViewBag.medid, cid = ViewBag.cid, parentdiv = ViewBag.parentdiv }, new AjaxOptions { UpdateTargetId = @ViewBag.parentdiv }))
    {

    for (int count = 0; count < Model.Count(); count++)
           {
                @Html.HiddenFor(model => model.ElementAt(count).T_Contact_MediumID)
                @Html.HiddenFor(model => model.ElementAt(count).MediumGegeven)
           }
    <table>
    <tr>
        <th>
            Contact
        </th>
        ...
    </tr>

@foreach (var item in Model)
{
    if (item.T_Contact_MediumID == ViewBag.medid)
    {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Contact.Contactid)
        </td>
        <td>
            @Html.EditorFor(modelItem => item.MediumGegeven)
        </td>
    </tr>
    }
    else
    {

    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Contact.Contactid)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MediumGegeven)
        </td>
    </tr>
    }
}

</table>
    <input type="submit" value="Save" />
    } 
```

但是在我的控制器中没有模型绑定：

```
 [HttpPost]
    public ActionResult Edit(IEnumerable<T_Contact_Medium> t_contact_medium, int medid, int cid, string parentdiv)
    {
        if (ModelState.IsValid)
        {
            _service.UpdateMedium(_service.GetMediumByID(medid));

            ViewBag.cid = cid;
            ViewBag.parentdiv = parentdiv;
            ViewBag.MediumId = new SelectList(_MediumEnumService.GetAll(), "MediumId", "Medium1");
            var tcrmodel = _service.GetMediumByContactID(cid);

            return PartialView("Index",tcrmodel);
        }

        ViewBag.MediumId = new SelectList(_MediumEnumService.GetAll(), "MediumId", "Medium1");
        return PartialView(t_contact_medium);
    } 
```

我想我的控制器部分是对的。
关于我可能忽略的任何想法？

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

我遇到的问题有很多可能的解决方案。就我而言，我想从 IEnumerable 构建一个具有一个可编辑行的表。
因此，我可以只发送单个实体，而不是将完整的 IEnumerable 模型传递给控制器​​。
我这样做的方式是仅通过模型访问可编辑实体。

像这样：

```
@{var count = 0;}

@foreach (var item in Model)
{
    if (item.T_Contact_MediumID == ViewBag.medid)
    {

        @Html.HiddenFor(model => model.ElementAt(count).T_Contact_MediumID)
        @Html.HiddenFor(model => model.ElementAt(count).MediumId)
        @Html.HiddenFor(model => model.ElementAt(count).ContactId)

    <tr>
        <td>
            @Html.DisplayFor(model => model.ElementAt(count).Contact.Voornaam)
        </td>
        <td>
            @Html.DisplayFor(model => model.ElementAt(count).Medium.Medium1)
        </td>
        <td>
            @Html.EditorFor(model => model.ElementAt(count).MediumGegeven)
        </td>s
        <td>
            @Html.EditorFor(model => model.ElementAt(count).Login)
            @*Html.CheckBoxFor(modelItem => item.Login*@
        </td>
        <td>
            @Html.DisplayFor(model => model.ElementAt(count).Gebruikernaam)
        </td>
        <td>
            <input type="submit" value="opslagen" />
        </td>
    </tr>
    }
    else
    {   

    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Contact.Voornaam)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Medium.Medium1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.MediumGegeven)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Login)
            @*Html.CheckBoxFor(modelItem => item.Login*@
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Gebruikernaam)
        </td>
        <td>
            @Ajax.ActionLink("Edit", "Edit", new { medid = item.T_Contact_MediumID, cid = ViewBag.cid, parentdiv = ViewBag.parentdiv }, new AjaxOptions { UpdateTargetId = ViewBag.parentdiv }) |
            @Html.ActionLink("Details", "Details", new { id = item.T_Contact_MediumID }) |
            @Html.ActionLink("Delete", "Delete", new { id = item.T_Contact_MediumID })
        </td>
    </tr>

    } 
```

我知道要在控制器上序列化 IEnumerable，一种方法是将您的 ienumerable 包装在自定义视图模型中。

# asp.net - Nuget packages.config 网站项目

> ID：10171994
> 
> 赞同：0
> 
> 时间：2012-04-16T09:54:44.413
> 
> 标签：asp.net, nuget

我正在将 Nuget 与 asp.net 网站项目一起使用，并且我已经安装了一些创建了 packages.config 的包。我正在使用 git 并忽略了 packages 文件夹。当有人克隆项目时，他们如何从 packages.config 安装包？我似乎无法在网站项目中找到一种简单的方法。非常感谢

# php - 如何在 php 页面中获取 ruby 文件结果？

> ID：10171996
> 
> 赞同：1
> 
> 时间：2012-04-16T09:54:55.040
> 
> 标签：php, ruby

首先，我想告诉你，我对 Ruby 一个字都不知道。

但我有一个从网上下载的 ruby​​ 文件。

但是那个文件会给我一些我在我的 php 页面上需要的答案。

那么有什么办法，我们可以将参数传递给 ruby​​ 文件，然后脚本将运行，并且我可以将输出返回到我的 php 页面。

或者我必须在 php 中转换那个 ruby​​ 文件（我也不知道它是否可能）

以及如何将值传递给 ruby​​ 文件并在我的服务器上运行该文件并将结果发送到我的 php 页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-16T09:59:46.580

首先，您必须安装 ruby​​。最简单的方法可能是使用操作系统的包管理器来安装“stock”ruby（在 ubuntu 中类似于`sudo apt-get install ruby`）。然而，如今的 ruby​​ 社区倾向于使用[RVM](http://beginrescueend.com/)之类的工具，这些工具可以让您轻松安装和使用多个 ruby​​。对于您的情况，这是一种矫枉过正（恕我直言）。

然后，您必须安装 ruby​​ 脚本所需的所有 gem（依赖项）。你可以通过阅读源代码来解决这个问题。通常，所有依赖项将以`require 'xxx'`. 通常，其中的名称`require`是宝石的名称。所以，如果你看到`require 'nokogiri'`了，你就知道你必须跑了`gem install 'nokogiri'`。如果这不起作用 - 那么所需的模块要么与 ruby​​ 捆绑在一起（例如 ruby​​ 1.9 bundles`rubygems`和`json`），要么实际的 gem 名称不同。谷歌是你的朋友。

然后你可以从 PHP 调用这个脚本。我相信您可以[`system()`](http://php.net/manual/en/function.system.php)为此使用 call 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-16T10:36:23.463

php.net/manual/en/function.shell-exec.php 您可以执行命令并获取输出，但这需要安装 ruby​​ .. 尝试使用 json 或 XML 代替 ruby​​ 文件..