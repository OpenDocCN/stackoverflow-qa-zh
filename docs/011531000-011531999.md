# StackOverflow 问答 11531000-11531999

# c# - 将数据传递给用户控件的 ajax 的非 MVC 替代方案

> ID：11531000
> 
> 赞同：0
> 
> 时间：2012-07-17T21:15:53.207
> 
> 标签：c#, asp.net, ajax, postback

我陷入了巨大的困境。

长话短说，我正在从事一个大项目，并且正在学习 ASP.NET、C#，以及我所从事的一切。

我项目的元素由用户控件组成。我的思路是我可以创建许多用户控件，每个控件都为我正在构建的项目的“组件”执行一个功能。到目前为止，我一直在使用客户端脚本将 ajax 调用回发到每个用户控件上的代码隐藏。AJAX 运行良好，因为它允许我将数据（我需要来自客户端的数据）传递给我的用户控件，然后我可以返回一些内容以执行操作。

我一直在使用一种生成查询字符串的方法来创建回调“动作”，以确定在将回发发送到代码隐藏端时需要什么方法来处理什么数据。

我现在的问题是我需要在一个页面上开始使用许多用户控件——所以现在每当任何控件执行回发时，所有控件都会经历页面加载。我以为我的回调解决方案可以解决这个问题，但事实并非如此。特别是当我将自定义注册控件放入另一个用户控件时。

我已经进行了大量研究，并看到了各种解决此问题的方法，其中最好的方法是`[WebMethod]`控制器。然而，我正在从事的项目是 NON-MVC。

我还尝试使用 UpdatePanel 控件来最小化对整个页面的回发，但收效甚微。

我可以使用什么作为替代品？我觉得我的选择已经不多了，或者这里缺少一些非常基本的东西。

**TL;DR -- 我需要一种非 MVC 方法将数据传递给可以区分多个控件的用户控件。不能使用页面方法（或页面）。手动 ajax 调用不起作用。无法进行完整的回发**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:37:39.927

看一眼：

[updatepanel 与页面方法](https://stackoverflow.com/q/9555203/1268570)

基于此：

> 我现在的问题是我需要在一个页面上开始使用许多用户控件——所以现在每当任何控件执行回发时，所有控件都会经历页面加载。

这听起来很简单，但您是否尝试`if(!this.IsPostBack)`在加载事件中使用？

不，避免这种情况的唯一方法是使用*PageMethods*或创建脚本服务来处理 AJAX 请求（使用`ScriptService attribute or WCF REST services`.

请注意，即使你使用 evil `UpdatePanel`，也绝对会执行所有页面生命周期，这意味着必须在每个帖子中发送整个*页面视图*`UpdatePanel`状态，使用控件的唯一好处是你可以获得*部分渲染*，就是这样，服务器端的性能根本没有改变。

所以你可以使用*PageMethods*或*Script Services*。但是有一个问题，如果您开始使用它们，您会注意到一个令人难以置信的性能变化，您的应用程序将更加响应（RIA 应用程序），但问题是您将无法使用 ASP.Net 服务器的好处`GridView`,等控件`Repeater`。换句话说，您需要更改大多数视图控件（这是使用 MVC 应用程序时遵循的方法）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:55:45.643

您可以在您的 aspx 页面上创建静态方法并用 [WebMethod] 标记它。然后，您可以使用用户用户控件标记中的 jQuery ajax 调用该方法。看看这个[博客](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

# java - 使用 Java 中的属性的用户配置文件

> ID：11531001
> 
> 赞同：1
> 
> 时间：2012-07-17T21:16:07.443
> 
> 标签：java, properties, profile

我正在用 Java 制作一个数学游戏，我想为用户创建一个创建本地帐户（或登录到现有帐户）的能力，该帐户将具有唯一的属性文件。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:29:05.180

你有几个选项可以研究。Java 附带了必要的库，您可以使用这些库创建、打开、读取和写入文件。使用[File](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/File.html)类，您可以创建一个帐户文件，例如“User1.properties”，并以易于解析的格式保存信息。如果您想更进一步，可以考虑使用 XML 或 JSON，它们是用于以这种方式保存信息的常用格式。这里有一些有用的链接可以帮助您入门。

[在 Java 中使用文件](http://docs.oracle.com/javase/tutorial/essential/io/)

[在 Java 中使用 XML](http://java.sun.com/xml/tutorial_intro.html)

[在 Java 中使用 JSON](http://www.mkyong.com/tutorials/java-json-tutorials/)

您可以使用的另一种选择是以与网站类似的方式使用数据库。您使用的数据库类型取决于您，尽管 MySQL 是一种常用数据库的示例。[再一次，这里有一个链接可以帮助您开始使用 Java 中的 MySQL](http://dev.mysql.com/usingmysql/java/)。

无论您使用什么，您都需要使用提供的用户名和密码（或您希望系统使用的任何登录凭据组合），并将它们与存储在文件或数据库中的用户名和密码进行比较。

# maven - 独立于 IDE 的主构建，用于 JEE6 项目中的持续集成

> ID：11531004
> 
> 赞同：0
> 
> 时间：2012-07-17T21:16:26.423
> 
> 标签：maven, ant, ide, continuous-integration, java-ee-6

**精简版：**

在 JEE6 应用程序的上下文中：在专用构建服务器（用于 CI / 集成测试）中设置独立于 IDE 的主构建过程的最佳方法是什么，同时仍在开发人员工作站上使用 IDE？哪种 Java IDE 更适合这种方法？

**长版**：

我们正在构建一个**JSF2/PrimeFaces/EJB3.1 JEE6**应用程序以部署在**JBoss**应用程序服务器上。我们需要使用**Ant脚本在专用机器中生成****EAR**、**WAR**和**JAR**工件，并以 CI 方式（可能使用[Jenkins](http://jenkins-ci.org/)）进行集成测试。

 **团队还需要使用 Java IDE（只有一种，不用担心）。因此，开发人员将使用他们自己的本地安装的 IDE 为自己的测试和开发生成本地工件。但是，我希望构建服务器上的主构建脚本独立于任何 IDE。如果团队使用的 IDE 不能接受并与外部提供的**Ant**脚本紧密集成，这可能会导致主要**Ant**构建脚本不同并且必须独立维护和发展的情况。因此，理想情况下，我希望开发人员的 IDE 和构建服务器都使用***相同的手工构建脚本。***在这样的设置下，如果开发者看到需要修改**Ant**脚本，修改通过**git** / **svn**到达 CI 服务器并用于后续构建。我强调“手工制作”，因为例如在 NetBeans 的情况下，我不想使用从 IDE 自动创建的**Ant**构建脚本。请参阅在这种方法中必须处理的令人难以置信的细节（我宁愿避免），[在这里](http://weblogs.java.net/blog/fabriziogiudici/archive/2006/11/setting_up_netb.html?force=537)。

因此，我想知道您认为哪些主要的 Java IDE（Eclipse、Netbeans、IntelliJ IDEA 等？）更适合接受外部提供的 Ant 脚本作为“项目定义”并与之紧密集成（在自动完成和调试、添加库等）。[这篇 SO 文章](https://stackoverflow.com/questions/81567/how-do-you-handle-different-java-ides-and-svn)中的讨论似乎是相关的，但与我的团队不会使用两个不同的 IDE 的情况并不完全相同。最后，我知道**Maven**可能会提供一种解决方案，因为 NetBeans 可以使用基于 Maven 的项目，其中**Maven** *pom.xml* **是**项目文件，并且不必处理其他特定于 IDE 的工件，但是有足够的**Maven**网络上的 FUD（我不引用消息来源，因为我不想转移讨论）我觉得在没有任何重大事先接触的情况下将它用于一项重大任务时会感到不舒服。**

# asp.net - 在运行时将 ascx 文件编译成 DLL

> ID：11531006
> 
> 赞同：0
> 
> 时间：2012-07-17T21:16:44.293
> 
> 标签：asp.net, .net, ascx, aspnet-compiler, csharpcodeprovider

在我们的 ASP.NET 应用程序中，我们允许其他开发人员编写 asp.net 代码，我们将他们的代码编译到内存中的 dll 中。

作为其中的一部分，我们希望能够在**运行时**将 ASCX 控件编译​​成 DLL，然后再将它们加载到 Aspx Pages 中。

我已经知道如何从路径加载 Ascx 控件（在我的情况下不起作用，ascx 文件内容很可能在 DB 中），只要我有 Control 对象，我就可以将它添加到 Page 控件层次结构.

所以对我来说关键是如何将运行时生成的 ascx 文件编译**成**DLL（内存中），这样当它们被请求时，我就可以将它们添加到 Aspx 页面中。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:23:08.703

我认为你应该从[ParseControl](http://msdn.microsoft.com/en-us/library/bb559279.aspx)开始。[在这里，](http://www.codeproject.com/Articles/14147/ParseControl-during-runtime-with-a-custom-control)您将在 codeproject.com 上找到示例项目。

# javascript - 有没有办法使用 joomla 为图像添加描述！模态挤压箱？

> ID：11531008
> 
> 赞同：0
> 
> 时间：2012-07-17T21:16:45.717
> 
> 标签：javascript, joomla, mootools, modal-dialog, squeezebox

我正在使用 Joomla 模态窗口挤压框。我希望能够在图像弹出窗口下方添加一些文本，例如在 www.pathgate.org 图像上。

在文章中调用模态窗口时，有什么方法可以添加它吗？

例如点击这里查看

我在想可能有类似的东西：描述：'lorem ipsum doler sat amet'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:46:18.243

像这样的东西

`<a class="modal" href="images/powered_by.png" title="text" rel="{handler:'img_ext'}">test</a>`

```
window.addEvent('load', function() {
  SqueezeBox.handlers.img_ext = function(elm) {
    var url = elm.href;
    this.image = new Image();
    var events = {
       loaded: function() {
       var win = {x: window.getWidth() - this.options.marginImage.x, y: window.getHeight() - this.options.marginImage.y};
       var size = {x: this.image.width, y: this.image.height};
       for (var i = 0; i < 2; i++)
        if (size.x > win.x) {
          size.y *= win.x / size.x;
          size.x = win.x;
        } else if (size.y > win.y) {
        size.x *= win.y / size.y;
        size.y = win.y;
       }
    size = {x: parseInt(size.x), y: parseInt(size.y)};
    if (window.webkit419) this.image = new Element('img', {'src': this.image.src});
    else $(this.image);
    this.image.setProperties({
        'width': size.x,
        'height': size.y});
    size.y += 50;
    var title = new Element('div',{text:elm.title});
    var wrapper = new Element('div');
    wrapper.adopt([this.image,title]);
    this.applyContent(wrapper, size);
    }.bind(this),
    failed: this.onError.bind(this)
    };
    (function() {
       this.src = url;
    }).delay(10, this.image);
    this.image.onload = events.loaded;
    this.image.onerror = this.image.onabort = events.failed;
    };
SqueezeBox.parsers.img_ext=function(preset) {
return (preset || this.url.test(/\.(jpg|jpeg|png|gif|bmp)$/i)) ? $(this.element) : false;
};
}); 
```

# java - 在 JTable 中的鼠标悬停时创建信息面板？工具提示可能不够

> ID：11531010
> 
> 赞同：4
> 
> 时间：2012-07-17T21:16:59.807
> 
> 标签：java, swing, user-interface, jtable, tooltip

我想在使用**Java Swing将鼠标悬停在****JTable**单元上时显示一个信息框，因此有多个部分

 **1.  如何在表格单元格中捕获鼠标悬停事件？我必须能够设置单元格内容，然后获取数据。
2.  如何在将鼠标悬停在该单元格上时显示带有动态服务器数据的面板/框？
3.  如何缓存信息面板/框，这样我就不必在每次鼠标悬停时查询服务器？

例子：

在表格单元格中，我输入：94903。 Tab 键或输入后，单元格设置为数字。鼠标悬停时，它会显示一个包含姓名、地址、电话号码、电子邮件等的框。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T23:55:24.730

您可以使用 HTML 格式化工具提示文本，这将允许您向工具提示提供复杂的信息结构，而无需或花费编写自己的解决方案。唯一的问题是工具提示将被自动丢弃。

如果这仍然不适合，您可以尝试：

```
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.event.*;
import javax.swing.JPopupMenu;
import javax.swing.JTable;
import javax.swing.Timer;

public class TestTable {

    private Timer showTimer;
    private Timer disposeTimer;
    private JTable table;
    private Point hintCell;
    private MyPopup popup; // Inherites from JPopupMenu

    public TestTable() {

        showTimer = new Timer(1500, new ShowPopupActionHandler());
        showTimer.setRepeats(false);
        showTimer.setCoalesce(true);

        disposeTimer = new Timer(5000, new DisposePopupActionHandler());
        disposeTimer.setRepeats(false);
        disposeTimer.setCoalesce(true);

        table.addMouseMotionListener(new MouseMotionAdapter() {

            @Override
            public void mouseMoved(MouseEvent e) {

                Point p = e.getPoint();
                int row = table.rowAtPoint(p);
                int col = table.columnAtPoint(p);

                if ((row > -1 && row < table.getRowCount()) && (col > -1 && col < table.getColumnCount())) {

                    if (hintCell == null || (hintCell.x != col || hintCell.y != row)) {

                        hintCell = new Point(col, row);
                        Object value = table.getValueAt(row, col);
                        // Depending on how the data is stored, you may need to load more data
                        // here...
                        // You will probably want to maintain a reference to the object hint data

                        showTimer.restart();

                    }

                }

            }
        });

    }

    protected MyPopup getHintPopup() {

        if (popup == null) {

            // Construct the popup...

        }

        return popup;

    }

    public class ShowPopupActionHandler implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {

            if (hintCell != null) {

                disposeTimer.stop(); // don't want it going off while we're setting up

                MyPopup popup = getHintPopup();
                popup.setVisible(false);

                // You might want to check that the object hint data is update and valid...
                Rectangle bounds = table.getCellRect(hintCell.y, hintCell.x, true);
                int x = bounds.x;
                int y = bounds.y + bounds.height;

                popup.show(table, x, y);

                disposeTimer.start();

            }

        }
    }

    public class DisposePopupActionHandler implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {

            MyPopup popup = getHintPopup();
            popup.setVisible(false);

        }
    }
} 
```

Now, I've not constructed the popup, I'd use the popup menu from Bob Sinclar's answer as well

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:24:41.810

[这是让鼠标悬停工作的好方法，](http://www.devx.com/tips/Tip/17285)我会先这样做，然后在您悬停时输出一些文本进行检查。

[这显示了一种出现弹出菜单的方法](http://www.devdaily.com/blog/post/jfc-swing/put-jpopupmenu-on-jtable-jtable-header)

关于缓存，我可能会将最后 10 个值存储在内存中，并在每次 ping 新入口点时从服务器发出请求，即您在本地没有它。然后可能每分钟更新最后 10 个命中，以防他们的信息发生变化。

[另一个有用的鼠标悬停指南](http://www.palantir.com/2007/05/jtable-mouseover-editing/)**

# c# - 在 ASP.Net MVC3 中使用 OpenID，我从哪里获取用户数据？

> ID：11531013
> 
> 赞同：10
> 
> 时间：2012-07-17T21:17:08.400
> 
> 标签：c#, asp.net-mvc-3, openid, dotnetopenauth, steam

我意识到 OpenID 有点像庞然大物，或者比典型的注册表单更复杂，但我觉得我在这里遗漏了一些东西。

根据这个[问题](https://stackoverflow.com/questions/6164847/if-openid-what-user-data-do-i-still-need-to-save)，我应该保存我的提供者给我的唯一标识符密钥。

> 提供商将为您提供每个用户的唯一 ID - 您需要保存此 ID。这是您将刚刚登录的用户与数据库中的记录相匹配的方式。

在[我的代码（取自 MVC 部分）](http://www.dotnetopenauth.net/developers/help/programmatic-openid-relying-party/)`LogOn()`中，此唯一 ID 在操作方法中的开关内给出：

```
public ActionResult LogOn()
{
    var openid = new OpenIdRelyingParty();
    IAuthenticationResponse response = openid.GetResponse();

    if (response != null)
    {
        switch (response.Status)
        {
            case AuthenticationStatus.Authenticated:
                FormsAuthentication.RedirectFromLoginPage(
                    response.ClaimedIdentifier, false);  // <-------- ID HERE! "response.ClaimedIdentifier"
                break;
            case AuthenticationStatus.Canceled:
                ModelState.AddModelError("loginIdentifier",
                    "Login was cancelled at the provider");
                break;
            case AuthenticationStatus.Failed:
                ModelState.AddModelError("loginIdentifier",
                    "Login failed using the provided OpenID identifier");
                break;
        }
    }

    return View();
}

[HttpPost]
public ActionResult LogOn(string loginIdentifier)
{
    if (!Identifier.IsValid(loginIdentifier))
    {
        ModelState.AddModelError("loginIdentifier",
                    "The specified login identifier is invalid");
        return View();
    }
    else
    {
        var openid = new OpenIdRelyingParty();
        IAuthenticationRequest request = openid.CreateRequest(Identifier.Parse(loginIdentifier));

        // Require some additional data
        request.AddExtension(new ClaimsRequest
        {
            BirthDate = DemandLevel.NoRequest,
            Email = DemandLevel.Require,
            FullName = DemandLevel.Require
        });

        return request.RedirectingResponse.AsActionResult();
    }
} 
```

我是否将此标识符用于`FormsAuthentication.SetAuthCookie(IDHERE, true);`？

如果我还想保存用户信息，例如电子邮件、姓名、昵称或其他信息，该怎么办？如何从依赖方获取此数据集合？如果此过程取决于我使用的提供商，我使用的是 Steam OpenID 提供商：

[http://steamcommunity.com/openid](http://steamcommunity.com/openid) [http://steamcommunity.com/dev](http://steamcommunity.com/dev)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-03T14:52:15.660

当您成功登录后，您可以对收到的数据做任何您想做的事情：唯一标识符以及您请求的声明。

1.  将收集的数据存储在数据库记录中。
2.  将其保存在 cookie 中（将其作为令牌发送到您的服务（如果有）或在您的 RP（依赖方）中使用）。
3.  将它与通用成员提供程序或简单的 Sql 提供程序一起使用。

以下是您应该如何在控制器中执行第二个操作：

```
 [AcceptVerbs(HttpVerbs.Post), ValidateInput(false)]
    public ActionResult LogOnPostAssertion(string openid_openidAuthData)
    {
        IAuthenticationResponse response;
        if (!string.IsNullOrEmpty(openid_openidAuthData))
        {
            var auth = new Uri(openid_openidAuthData);
            var headers = new WebHeaderCollection();
            foreach (string header in Request.Headers)
            {
                headers[header] = Request.Headers[header];
            }

            // Always say it's a GET since the payload is all in the URL, even the large ones.
            HttpRequestInfo clientResponseInfo = new HttpRequestInfo("GET", auth, auth.PathAndQuery, headers, null);
            response = this.RelyingParty.GetResponse(clientResponseInfo);
        }
        else
        {
            response = this.RelyingParty.GetResponse();
        }
        if (response != null)
        {
            switch (response.Status)
            {
                case AuthenticationStatus.Authenticated:
                    var token = RelyingPartyLogic.User.ProcessUserLogin(response);
                    this.FormsAuth.SignIn(token.ClaimedIdentifier, false);
                    string returnUrl = Request.Form["returnUrl"];
                    if (!String.IsNullOrEmpty(returnUrl))
                    {
                        return Redirect(returnUrl);
                    }
                    else
                    {
                        return RedirectToAction("Index", "Home");
                    }
                case AuthenticationStatus.Canceled:
                    ModelState.AddModelError("OpenID", "It looks like you canceled login at your OpenID Provider.");
                    break;
                case AuthenticationStatus.Failed:
                    ModelState.AddModelError("OpenID", response.Exception.Message);
                    break;
            }
        } 
```

关于您可以如何处理收到的数据的其他提示：通过在您的依赖方数据库（您的应用程序）的 UserLogin 表中创建用户登录记录。下次他访问您的应用程序时，您将能够验证用户的身份验证和状态。您还可以第一次将他重定向到特定页面，以收集 OPenID 提供者未提供的更具体的数据（例如：年龄或性别）。您可以跟踪所有用户登录（OpenID (steam)、google、liveID）并将它们链接到用户。这将允许您的唯一用户使用他想要的任何身份验证提供程序登录。

对于使用 Open ID 身份验证器的完整示例，您可以查看 MVC2 项目[1](http://visualstudiogallery.msdn.microsoft.com/81153747-70d7-477b-b85a-0374e7edabef)的 OpenId， 我从中提取了前面的示例。

# android - 获取当前 Fragment

> ID：11531021
> 
> 赞同：1
> 
> 时间：2012-07-17T21:17:50.737
> 
> 标签：android, android-fragments

在 DialogFragment 我有一个侦听器，我在其中使用如下回调：

```
OnDoneListener caller = (OnDoneListener)getActivity(); 
caller.done(); 
```

但是，我不想在 FragmentActivity 中实现 OnDoneListener，而是在 Fragment 中实现它。因此，我正在寻找类似的东西：

```
OnDoneListener caller = (OnDoneListener)getFragmentManager().getFragment(); //made up 
```

我找到了 findFragmentById() 或 findFragmentByTag() 但我希望它更通用......或者我怎样才能获得 Id 或 Tag？我可以从容器或父母那里得到它吗？

**编辑：** 只是为了说清楚。我的 DialogFragment 应该尽可能地重复使用。因此我不想要任何硬编码的 ID 和标签。我只想参考需要实现 OnDoneListener 的父（调用）片段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T18:52:36.403

我自己找到了解决方案：

调用者片段：

```
mCalledFragment = new CalledFragment();
mCalledFragment.setTargetFragment(this, 0); 
```

调用片段：

```
CallerFragment caller = (CallerFragment)getTargetFragment();
caller.callback(); 
```

# django - 如何让 Django 在 Mac OS X 服务器上使用更新的 python？

> ID：11531025
> 
> 赞同：0
> 
> 时间：2012-07-17T21:18:08.917
> 
> 标签：django, python-2.7, osx-server

我在我的 Mac OS X 服务器上使用 Django。到目前为止，一切都很好。我一直在使用 python 2.6.1 并且一切正常。我将 Python 升级到 2.7.3 版。正如预期的那样，在终端中调用 python 会调出 2.7.3 版本。使用 {% debug %) 检查 Django 表明 Django 仍在使用原始的 python 2.6.1 解释器。

在此系统上，/usr/local/bin 包含指向 ../../../Library/Frameworks/Python.framework/Versions/2.7/bin/python 的符号链接

在 /usr/bin 中，我找到了 python 解释器，并从该目录中调用 ./python 使 python 2.6.1 运行。

我的 $PATH 是 /Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/ usr/local/mysql/bin:/usr/local/bin

我相信必须在 python 2.7.3 安装上进行了更改。

什么被认为是使用相同 Python 获取命令行和 Django 的最佳方式？我正在考虑将框架版本移动到 /usr/bin 并将框架中的符号链接放置到移动的新版本。系统上还有一个 /Library/Python 目录，其中包含版本 2.3、2.5 和 2.6 的站点包。在 /Library/Python/2.6/site-packages 中有主要的好东西 django、mercurial 和 south。

如今，人们把东西放在哪里？我的意思是，我知道我可以四处移动，但我想预测 Django 项目的发展方向，以便未来的升级能够顺利进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:21:21.977

针对更新的 Python 安装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:20:20.483

考虑将您的应用程序放在`virtualenv`容器中并在创建它时指定 Python 的版本 - 根据：[使用不同的 Python 版本和 virtualenv](https://stackoverflow.com/questions/1534210/use-different-python-version-with-virtualenv)

# backbone.js - 从子视图backbone.js 渲染父视图

> ID：11531028
> 
> 赞同：2
> 
> 时间：2012-07-17T21:18:55.533
> 
> 标签：backbone.js, backbone-events, backbone-views

我有一个主视图和一个模态窗口，它是父视图的子视图。

模态由一个通过 ajax 提交的表单组成。

提交表单后如何从子视图呈现父视图？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T21:39:03.063

父视图可以绑定到子视图上的通知，以了解何时提交表单。然后它可以渲染自己：

在父视图上：

```
// Parent initialize
this.childView.on('formSubmitted', this.render, this);

// Parent removal
this.childView.off('formSubmitted', this.render, this); 
```

在子视图上：

```
// After form is submitted
this.trigger('formSubmitted'); 
```

子进程会触发一个“formSubmitted”事件，并且会调用父进程的渲染函数。

# java - Java多线程删除同一组表

> ID：11531031
> 
> 赞同：2
> 
> 时间：2012-07-17T21:19:14.330
> 
> 标签：java, sql-server, multithreading, sql-delete

我必须清理数据库（几个具有给定条件的表，其中条件的列总是相同的）例如

```
delete from table1 where date < given_date1 and id = given_id
delete from table2 where date < given_date2 and id = given_id 
```

其中 given_id 和 givendate 关系在逐个表和逐个 id 上各不相同。

实际的删除条件并不总是 where date < givendate ，我只是写了一个例子，所以说一个 id 有 300 天的数据，而另一个 500 天的数据， where 条件允许删除 oldes 10 天的数据 where 10 是一个变量，基于用户输入，因此在一次迭代中，所有节点都通过删除最旧的 10 天数据进行处理，因此查询每个 id 的更改，但事实是它将位于同一组表上

早些时候该脚本被编写为 sql 脚本并执行其操作但需要时间，现在我已经实现了一个多线程 Java 应用程序，其中新代码看起来像

```
for(i=0; i < idcount ; i++)
{
   //launch new thread and against that thread call
   delete(date,currentid);
}

function delete(date,id)
{
    delete from table1 where date < given_date and id = given_id
    delete from table2 where date < given_date and id = given_id

} 
```

在实现这个之后，我发现了 sql 表上的死锁，这是通过索引表来解决的，但它仍然不像它应该的那样快，如果我有 500 个线程，它们都会一个接一个地启动，并且显然在相同的集合上运行桌子。并且 sql 实际上并没有在每个表上并行执行？

当我监控我的 java.exe 和 sqlserver.exe 时，它​​根本不忙吗？我希望它应该是。

谁能告诉我在同一组表上实现多线程删除的最佳方法是什么，这样我就可以启动线程并并行删除并消耗可用资源

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:30:16.757

如果所有操作都在给定 id 上删除，那么我只需对每个表执行一次删除所有 id 即可。

例如

```
delete from table1 where date < given_date and id in (given_id1, given_id2 ..... ) 
```

如果有很多 given_ids，首先将它们插入到临时表中，然后通过将表连接到临时表中来执行每个删除操作

此外，如果尝试使用多个线程，那么只有在您对线程中的表进行操作时才能真正预期改进，因此数据库中不会出现争用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:28:16.677

忽略您创建的问题...

为什么不使用`IN`语句？

```
delete from table1 where date < given_date and id IN (id1, id2, id3, ...) 
```

**基于澄清更新：** 根据评论中的解释，我的猜测是您没有良好的索引，并且每条`delete`语句都会导致表扫描。每次表扫描都会锁定表，因此数据库一次只能处理一条语句。索引`date`和`id`列以及语句`where`子句中使用的任何其他列`delete`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:25:46.940

以我个人的经验，我开设了一个课程来管理我的查询以及与数据库的通信。我使用线程池来管理我的线程，并让线程调用我的静态数据库管理器。管理器中应该有一个同步的方法来获取`lock()`数据库连接。然后线程将能够访问数据库，并且它们的操作不会相互冲突。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T21:31:19.920

如果您不关心在一个事务单元中制作所有命令，那么将删除放在它自己的事务中（小一个）。

# excel - Joomla 文章导出到 excel

> ID：11531035
> 
> 赞同：0
> 
> 时间：2012-07-17T21:19:18.863
> 
> 标签：excel, joomla

关于我们正在努力实现的目标的更多信息。

我们有用 PHP 编写的报告，它将在屏幕上创建一个表格，然后如果他们选择 Excel 单选按钮并重新运行报告，它将通过在输出表格标题之前输出以下标题将表格输出到 Excel（“Content-类型：应用程序/x-msexcel"); header("过期时间：0"); header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); header("内容配置：附件；文件名=discussion.xls");

当我们尝试在 Joomla 文章中重现相同的报告时，报告工作正常，但是当我们尝试将报告输出到 Excel 时，它确实创建了一个 excel 文件，但似乎输出了整个页面内容，而不仅仅是报告中的表格（希望这是有道理的）

[您可以在http://commculturecommunity.cloudaccess.net](http://commculturecommunity.cloudaccess.net)上看到链接，如果您选择 test1，它将创建 Excel 输出，但是当您打开它时，您可以看到测试数据，但也可以看到页面的其余内容。

任何帮助将非常感激。

谢谢理查德

==================================================== ===============================

我们在 Joomla 中创建了一篇文章，并将此代码（使用 sourcerer）嵌入到文章中。

```
{source}
<?php
$filename ="excelreport.xls";
$contents ="testdata1 \t testdata2 \t testdata3 \t \n";
header('Content-type: application/ms-excel');
header('Content-Disposition: attachment; filename='.$filename);
echo $contents;
?>
{/source} 
```

当我们转到该页面时，会下载一个 Excel 文件，但是当我们在 Excel 中打开它时，它包含了整个表单，而不仅仅是上面创建的测试数据。

任何帮助将不胜感激

谢谢理查德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:39:19.583

您需要使用[phpExcel](http://phpexcel.codeplex.com/)创建包含文章内容的 excel 文件

# sql - SQL 变量参数

> ID：11531036
> 
> 赞同：0
> 
> 时间：2012-07-17T21:19:27.113
> 
> 标签：sql, sql-server-2005, stored-procedures

我需要将数据合并到表的不同列中。我需要使用存储过程来合并这些数据。我有 a(i = 1 to x)、b、c 和 d 作为参数

a(i = 1 to x) 参数取决于用户输入...

我需要检查的另一件事是

```
if a(y) = b
then update b and c to table 1
else delete data from table 1 and update values a(y) to b into 4 different tables
Here y is some value in between 1 to x 
```

我应该做多个数据连接还是使用一个数据连接并在sql中做所有事情？解决这个问题的最佳方法是什么...

如果第二个选项请样品将是一个很大的帮助...只是 sql 方面会很棒！！！

# windows - 使用日期 VB.NET 的 RowFilter

> ID：11531040
> 
> 赞同：0
> 
> 时间：2012-07-17T21:19:33.573
> 
> 标签：windows, vb.net, date, datagridview, filter

我的 DGV 中有这个日期：

```
14/06/2012
15/07/2012
16/07/2012
17/07/2012 
```

我将过滤器设置为：`([supplier_invoice_date] >= '13/07/2012') AND ([supplier_invoice_date] <= '17/07/2012')`

过滤器返回此*（所有日期）*：

```
14/06/2012
15/07/2012
16/07/2012
17/07/2012 
```

**另一个测试：**

筛选：`([supplier_invoice_date] >= '15/07/2012') AND ([supplier_invoice_date] <= '17/07/2012')`

结果：

```
 15/07/2012
    16/07/2012
    17/07/2012 
```

筛选：`([supplier_invoice_date] < '17/06/2012')`

结果：

```
14/06/2012
15/07/2012
16/07/2012 
```

我认为只需要几天而不需要几个月。

这是我的代码：

```
Dim dt As New DataTable
Dim suppliersinvoices_data_query As String = ("DATE_FORMAT(MIN(supplier_invoice_date), '%d/%m/%Y') AS supplier_invoice_date, ...")
Dim invoice_objDataAdapter As New MySqlDataAdapter(suppliersinvoices_data_query, objConn)
invoice_objDataAdapter.Fill(dt)

Dim MyFilter As New DataView(dt)
MyFilter.RowFilter = "([supplier_invoice_date] >= '13/07/2012') AND ([supplier_invoice_date] <= '17/07/2012')"
invoicesresults_datagrid_search_supplierinvoice.DataSource = MyFilter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:58:49.340

看起来您正在将日期转换为字符串以格式化它们。尽量避免这种情况，让网格使用它从数据源获取的日期值。

如果要格式化 DataGridView 控件的日期，可以这样尝试：

```
dgv1.Columns("YourDateColumn").DefaultCellStyle.Format = "dd/MM/yyyy" 
```

然后您可以使用真实日期来过滤数据：

```
MyFilter.Filter = String.Format("[supplier_invoice_date] > '{0}'", _
                                New DateTime(2012, 7, 1)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:03:02.347

这是`DataView.RowFilter`语法`for`日期：

```
dataView.RowFilter = "supplier_invoice_date >= #2012-07-13#" 
```

但你也可以使用`Linq-To-DataSet`. 我假设该字段的实际数据类型是`String`而不是`Date`，因此您需要`Date`先将其解析为：

```
Dim startDate = New Date(2012, 7, 13)
Dim endDate =   New Date(2012, 7, 17)
Dim invoiceDate As Date
Dim filtered = From row In dt.AsEnumerable()
    Where Date.TryParse(row.Field(Of String)("supplier_invoice_date"), invoiceDate) _
    AndAlso invoiceDate >= startDate AndAlso invoiceDate <= endDate
Dim tblFiltered As DataTable = filtered.CopyToDataTable() 
```

# json - 将 Chrome 扩展程序迁移到 Firefox

> ID：11531041
> 
> 赞同：5
> 
> 时间：2012-07-17T21:19:35.513
> 
> 标签：json, google-chrome-extension, firefox-addon, xul

我有一个带有 manifest.json 文件的 chrome 扩展，基本上包含以下内容：

```
"content_scripts": [
{
  "matches": ["*://mail.google.com/mail/*"],
  "js": ["safegmailbootstrap.js","cryptojs/rollups/aes.js", "javascrypt/aes.js", "javascrypt/md5.js", "javascrypt/aesprng.js", "javascrypt/jscrypt.js", "javascrypt/entropy.js"]
} 
```

我正在尝试构建一个 firefox 扩展，我已经创建了所有结构，但仍然无法使其在 firefox 中工作。

我想我在 /chrome/content 中写错了 XUL 文件。

我试过这样写：

```
<?xml version="1.0"?>
<overlay id="sample" xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">
<script src="safegmailbootstrap.js" />
<script src="cryptojs/rollups/aes.js" />
<script src="javascrypt/aes.js" />
<script src="javascrypt/md5.js" />
<script src="javascrypt/aesprng.js" />
<script src="javascrypt/jscrypt.js" />
<script src="javascrypt/entropy.js" />
</overlay> 
```

我不知道哪个类似于 json chrome 文件“匹配”到 firefox 扩展。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-18T02:35:19.703

您可能会发现使用插件 SDK 会更容易：

[https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/page-mod.html](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/packages/addon-kit/page-mod.html)

[https://addons.mozilla.org/en-US/developers/builder](https://addons.mozilla.org/en-US/developers/builder)

# ruby-on-rails - Postgres 日期/时间字段值超出范围

> ID：11531042
> 
> 赞同：4
> 
> 时间：2012-07-17T21:19:39.330
> 
> 标签：ruby-on-rails, postgresql

我在 mac lion 上运行 postgres 9 ......在 rails 3.2.3 web 应用程序上。

我正在表中查询一个名为 errors_rates_last_updated_at 的条目，该条目目前还不存在。因此，当我在 rails 控制台中键入以下内容时：

```
a = Settings.errors_rate_last_updated_at 
```

我得到 a = 0000-01-01 00:00:00 -0800 。很公平。

然后当我用这个日期查询模型时，

```
 Error.where('most_recent_notice_at > ?', a) 
```

我收到此错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR:  date/time field value out of range: "0000-01-01 08:00:00.000000" 
```

有人可以帮我弄清楚发生了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T23:49:13.543

Rails 正在使用在 Pg 上无效的 MySQL 主义。不允许使用零时间戳。

```
regress=# SELECT CAST('0000-01-01 08:00:00.000000' AS date);
ERROR:  date/time field value out of range: "0000-01-01 08:00:00.000000"
LINE 1: SELECT CAST('0000-01-01 08:00:00.000000' AS date); 
```

要了解更多关于您是如何达到这一点的，您需要启用查询日志记录（在 PostgreSQL 或 rails 中）并找出导致异常的查询。

# cloud-foundry - Micro Cloud Foundry VM 缺少 eth0

> ID：11531045
> 
> 赞同：0
> 
> 时间：2012-07-17T21:19:45.943
> 
> 标签：cloud-foundry

我正在尝试让 Micro Cloud Foundry 在 Windows 7 64 位和 VMware 工作站 7.1.4 下工作。出于某种原因，VM 开始时没有 eth0，只有 lo，因此我从来没有获得网络连接。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:34:37.613

您是否有任何其他同时运行的虚拟机可能正在使用相同的虚拟适配器？您是否还检查了 VM 上的网络设置，以确保选择了一个物理接口来桥接虚拟适配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T04:59:01.620

作为删除 VM 并重新从头开始并放弃所有工作的替代方法，您还可以重命名包含 VM 映像的文件夹。从重命名的文件夹重新启动 VM 时，VMWare 会询问您是“复制”还是“移动”了此 VM。选择“我已移动”选项，然后 VMware 将为您重新创建以太网适配器配置，然后您就可以开始了

# asp.net-mvc - 我的 bin 部署的 MVC4 应用程序中的区域路由有什么问题？

> ID：11531046
> 
> 赞同：5
> 
> 时间：2012-07-17T21:19:59.530
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-mvc-4, asp.net-mvc-areas

我刚刚将 MVC4 .NET 4.0 应用程序部署到我的 Web 主机，用于“实时”部署测试。非区域路线运行良好，例如我的

```
@Html.ActionLink("Register as a Client", "Register", "Account", new { registrationType = "Client"}, null) 
```

链接工作正常，链接打开正确的页面。但是，通过链接到基于区域的操作，如下所示：

```
@Html.ActionLink("Authors", "Index", "Home", new { Area = "Author", registrationType = "Author" }, null) 
```

实际呈现给浏览器的链接缺少动作和控制器，即

```
http://mylivedomain.com/?Area=Author&registrationType=Author 
```

可能值得注意的是，MVC4 的 css 捆绑功能在部署后不起作用，我回滚到使用经典样式链接到单个样式表。

可能相关：我的问题：[为什么我的 MVC4 应用程序中未修改的模板代码试图注册区域两次？](https://stackoverflow.com/q/11535369/8741)

**刚加入：**从默认路由的区域路由映射中删除默认操作解决了这个问题。在 VS2012 模板代码中没有默认的控制器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T06:25:21.167

在您的情况下，因为您在查询字符串中指定了区域，所以应该应用来自 Global.asax.cs 的路由。我相信你有这样的东西：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ).DataTokens.Add("area","Author");
    } 
```

**此代码使 Home/Index 成为默认路由并跳过 url 中的 Home/Index**。如果您在其他内容上更改控制器 =“Home”，例如控制器 =“Home2”，您将显示 Home/Index 的完整链接和新的默认路由 Home2/Index。如果您指定了区域中的默认路线，则类似地适用于这些路线。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T14:38:11.203

尝试在您所在区域的操作方法中检查 this.ControllerContext.RouteData.DataTokens["area"]。

我遇到过类似问题的情况，其中区域名称只是一个空字符串。

在 action 方法中设置 DataToken 可能会为您提供快速修复，但它不能回答为什么 MVC 不设置区域名称的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T08:44:37.787

在您的 global.asax.cs 中确保您的`Application_Start`:

```
AreaRegistration.RegisterAllAreas(); 
```

在每个区域中，您应该有 AreaRegistration.cs 如下所示：

```
public class testAreaRegistration : AreaRegistration
{
    public override string AreaName
    {
        get
        {
            return "test";
        }
    }

    public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "test_default",
            "test/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-17T11:06:42.823

使用@Html.ActionLink

使用这种格式

```
@Html.ActionLink("Authors", "Index", "Home", new { Area = "Author", registrationType = "Author" }, new{}) 
```

解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T21:45:14.770

您是否碰巧在您的任何区域从 MvcContrib 继承 PortableAreaRegistration？

我们曾经有完全相同的症状（在本地工作，而不是在服务器上工作），直到我们从 Portable Areas 中删除了所有 PortableAreaRegistration 并恢复为使用简单的 AreaRegistration 因为 MVC4 可以注册一个便携式区域而无需任何额外的库。

# r - 在 R 中创建连续热图

> ID：11531059
> 
> 赞同：12
> 
> 时间：2012-07-17T21:21:04.680
> 
> 标签：r, map, ggplot2, continuous, heat

我有一系列 x 和 y 坐标，每个坐标都有一个距离。我想创建一个热图，将 x 和 y 范围内每个点的平均距离显示为热图。由于点在网格状形状中彼此间隔不均匀，因此该方法将需要某种平滑函数来对数据进行聚类并计算附近每个点的平均值，然后用颜色表示该平均值。

到目前为止，使用`ggplot2`，我只能找到和 之类的方法`stat_density2d`，`geom_tile`它们仅适用于显示点密度和表示均匀间隔的点（据我所知）。

理想情况下，它将遵循与此图像相同的原则： ![在此处输入图像描述](../Images/06809d1d977d527a74309779852a3e9a.png)

其中颜色是基于附近的给定点分配的，即使点的密度和位置不均匀。

我不想像这张图片一样以矩阵形式创建热图：![在此处输入图像描述](../Images/7133e99c458222c01b6bac2ac4dc0905.png)

其中表格是彩色编码的。相反，我想使用非均匀分布的 x 和 y 坐标创建一个连续的热图，实际上，它显示了数据被分成无限多个矩形的限制。这可能不是该函数使用的实际方法，但它提供了关于我正在寻找的内容的一般概念。

以下是一些示例数据：

```
data=data.frame(x=c(1,1,2,2,3,4,5,6,7,7,8,9),
  y=c(2,4,5,1,3,8,4,8,1,1,6,9),
  distance=c(66,84,93,76,104,29,70,19,60,50,46,36)) 
```

如何制作以距离作为覆盖整个数字范围的色标的热图，就像提供的第一个链接中的图一样？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T11:34:44.877

为了生成具有不规则间隔坐标的连续地图，您首先需要对规则网格进行内插（此处使用`interp`package 的函数`akima`）：

```
require(akima)
data <- data.frame(x=c(1,1,2,2,3,4,5,6,7,7,8,9),
                   y=c(2,4,5,1,3,8,4,8,1,1,6,9),
                   distance=c(66,84,93,76,104,29,70,19,60,50,46,36))
resolution <- 0.1 # you can increase the resolution by decreasing this number (warning: the resulting dataframe size increase very quickly)
a <- interp(x=data$x, y=data$y, z=data$distance, 
            xo=seq(min(data$x),max(data$x),by=resolution), 
            yo=seq(min(data$y),max(data$y),by=resolution), duplicate="mean")
image(a) #you can of course modify the color palette and the color categories. See ?image for more explanation 
```

![在此处输入图像描述](../Images/7e34cc108b9c2df89680d3c54e02e406.png)

或者，对于绘图本身，您可以使用函数`filled.contour`：

```
filled.contour(a, color.palette=heat.colors) 
```

![在此处输入图像描述](../Images/5e592fc5b4c139d6f3eda46ab58ce38c.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:30:59.260

这里有一个用户编写的函数，它使用 ggplot2 生成热图：

[http://www.r-bloggers.com/ggheat-a-ggplot2-style-heatmap-function/](http://www.r-bloggers.com/ggheat-a-ggplot2-style-heatmap-function/)

他们的示例图片：

![例子](../Images/088f039511167b3c45d7888aa6c30675.png)

如果您想要的是您的示例中的地形图，则有很多工具（只需在“地形图”下搜索即可。

最后，是等数图，它只是表明如果你想要一些平滑，你需要明确你想要做什么：http: [//dsparks.wordpress.com/2011/10/24/isarithmic-maps -公众意见数据/](http://dsparks.wordpress.com/2011/10/24/isarithmic-maps-of-public-opinion-data/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-29T18:25:12.157

使用`akima::interp`@plannapus 建议的解决方案，您可以将其转换为`ggplot2`热图。

这个 ggplot2 解决方案的优点是您可以轻松地添加初始点`geom_point()`或密度曲线`geom_density2d()`（尽管这里的密度对于您拥有的 12 个点将不可靠）。

```
library(akima)
library(tidyverse)
data <- data.frame(x=c(1,1,2,2,3,4,5,6,7,7,8,9),
                   y=c(2,4,5,1,3,8,4,8,1,1,6,9),
                   distance=c(66,84,93,76,104,29,70,19,60,50,46,36))
resolution <- 0.1 # you can increase the resolution by decreasing this number (warning: the resulting dataframe size increase very quickly)
a <- interp(x=data$x, y=data$y, z=data$distance, 
            xo=seq(min(data$x),max(data$x),by=resolution), 
            yo=seq(min(data$y),max(data$y),by=resolution), duplicate="mean")

res <- a$z %>% 
  magrittr::set_colnames(a$y) %>% 
  as_tibble() %>% 
  mutate(x=a$x) %>% 
  gather(y, z, -x, convert=TRUE)

res %>% 
  ggplot(aes(x, y)) +
  geom_tile(aes(fill=z)) +
  geom_point(data=data) +
  scale_fill_viridis_c() 
```

![](../Images/513f6fb16ac4c28b1ed9358d9fe047d8.png)

^(由[reprex 包](https://reprex.tidyverse.org)（v0.3.0.9001）于 2020 年 1 月 29 日创建)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-18T01:18:57.857

```
ggplot2::ggfluctuation(data, type="colour") 
```

I can't give out all this data but the `head` is below in the `dput` structure.

```
structure(list(X1 = 236:241, HomeTeam = structure(c(8L, 19L, 
37L, 4L, 6L, 15L), .Label = c("Arizona Cardinals", "Atlanta Falcons", 
"Baltimore Ravens", "Buffalo Bills", "Carolina Panthers", "Chicago Bears", 
"Cincinnati Bengals", "Cleveland Browns", "Dallas Cowboys", "Denver Broncos", 
"Detroit Lions", "Green Bay Packers", "Houston Oilers", "Houston Texans", 
"Indianapolis Colts", "Jacksonville Jaguars", "Kansas City Chiefs", 
"Los Angeles Raiders", "Los Angeles Rams", "Miami Dolphins", 
"Minnesota Vikings", "New England Patriots", "New Orleans Saints", 
"New York Giants", "New York Jets", "Oakland Raiders", "Philadelphia Eagles", 
"Phoenix Cardinals", "Pittsburgh Steelers", "San Diego Chargers", 
"San Francisco 49ers", "Seattle Seahawks", "St. Louis Rams", 
"Tampa Bay Buccaneers", "Tennessee Oilers", "Tennessee Titans", 
"Washington Redskins"), class = "factor"), AwayTeam = structure(c(9L, 
28L, 11L, 20L, 21L, 22L), .Label = c("Arizona Cardinals", "Atlanta Falcons", 
"Baltimore Ravens", "Buffalo Bills", "Carolina Panthers", "Chicago Bears", 
"Cincinnati Bengals", "Cleveland Browns", "Dallas Cowboys", "Denver Broncos", 
"Detroit Lions", "Green Bay Packers", "Houston Oilers", "Houston Texans", 
"Indianapolis Colts", "Jacksonville Jaguars", "Kansas City Chiefs", 
"Los Angeles Raiders", "Los Angeles Rams", "Miami Dolphins", 
"Minnesota Vikings", "New England Patriots", "New Orleans Saints", 
"New York Giants", "New York Jets", "Oakland Raiders", "Philadelphia Eagles", 
"Phoenix Cardinals", "Pittsburgh Steelers", "San Diego Chargers", 
"San Francisco 49ers", "Seattle Seahawks", "St. Louis Rams", 
"Tampa Bay Buccaneers", "Tennessee Oilers", "Tennessee Titans", 
"Washington Redskins"), class = "factor"), Date = structure(c(45L, 
45L, 45L, 45L, 45L, 45L), .Label = c("1990-09-09", "1990-09-10", 
"1990-09-16", "1990-09-17", "1990-09-23", "1990-09-24", "1990-09-30", 
"1990-10-01", "1990-10-07", "1990-10-08", "1990-10-14", "1990-10-15", 
"1990-10-18", "1990-10-21", "1990-10-22", "1990-10-28", "1990-10-29", 
"1990-11-04", "1990-11-05", "1990-11-11", "1990-11-12", "1990-11-18", 
"1990-11-19", "1990-11-22", "1990-11-25", "1990-11-26", "1990-12-02", 
"1990-12-03", "1990-12-09", "1990-12-10", "1990-12-15", "1990-12-16", 
"1990-12-17", "1990-12-22", "1990-12-23", "1990-12-29", "1990-12-30", 
"1990-12-31", "1991-01-05", "1991-01-06", "1991-01-12", "1991-01-13", 
"1991-01-20", "1991-01-27", "1991-09-01", "1991-09-02", "1991-09-08", 
"1991-09-09", "1991-09-15", "1991-09-16", "1991-09-22", "1991-09-23", 
"1991-09-29", "1991-09-30", "1991-10-06", "1991-10-07", "1991-10-13", 
"1991-10-14", "1991-10-17", "1991-10-20", "1991-10-21", "1991-10-27", 
"1991-10-28", "1991-11-03", "1991-11-04", "1991-11-10", "1991-11-11", 
"1991-11-17", "1991-11-18", "1991-11-24", "1991-11-25", "1991-11-28", 
"1991-12-01", "1991-12-02", "1991-12-08", "1991-12-09", "1991-12-14", 
"1991-12-15", "1991-12-16", "1991-12-21", "1991-12-22", "1991-12-23", 
"1991-12-28", "1991-12-29", "1992-01-04", "1992-01-05", "1992-01-12", 
"1992-01-26", "1992-09-06", "1992-09-07", "1992-09-13", "1992-09-14", 
"1992-09-20", "1992-09-21", "1992-09-27", "1992-09-28", "1992-10-04", 
"1992-10-05", "1992-10-11", "1992-10-12", "1992-10-15", "1992-10-18", 
"1992-10-19", "1992-10-25", "1992-10-26", "1992-11-01", "1992-11-02", 
"1992-11-08", "1992-11-09", "1992-11-15", "1992-11-16", "1992-11-22", 
"1992-11-23", "1992-11-26", "1992-11-29", "1992-11-30", "1992-12-03", 
"1992-12-06", "1992-12-07", "1992-12-12", "1992-12-13", "1992-12-14", 
"1992-12-19", "1992-12-20", "1992-12-21", "1992-12-26", "1992-12-27", 
"1992-12-28", "1993-01-02", "1993-01-03", "1993-01-09", "1993-01-10", 
"1993-01-17", "1993-01-31", "1993-09-05", "1993-09-06", "1993-09-12", 
"1993-09-13", "1993-09-19", "1993-09-20", "1993-09-26", "1993-09-27", 
"1993-10-03", "1993-10-04", "1993-10-10", "1993-10-11", "1993-10-14", 
"1993-10-17", "1993-10-18", "1993-10-24", "1993-10-25", "1993-10-31", 
"1993-11-01", "1993-11-07", "1993-11-08", "1993-11-14", "1993-11-15", 
"1993-11-21", "1993-11-22", "1993-11-25", "1993-11-28", "1993-11-29", 
"1993-12-05", "1993-12-06", "1993-12-11", "1993-12-12", "1993-12-13", 
"1993-12-18", "1993-12-19", "1993-12-20", "1993-12-25", "1993-12-26", 
"1993-12-27", "1993-12-31", "1994-01-02", "1994-01-03", "1994-01-08", 
"1994-01-09", "1994-01-15", "1994-01-16", "1994-01-23", "1994-01-30", 
"1994-09-04", "1994-09-05", "1994-09-11", "1994-09-12", "1994-09-18", 
"1994-09-19", "1994-09-25", "1994-09-26", "1994-10-02", "1994-10-03", 
"1994-10-09", "1994-10-10", "1994-10-13", "1994-10-16", "1994-10-17", 
"1994-10-20", "1994-10-23", "1994-10-24", "1994-10-30", "1994-10-31", 
"1994-11-06", "1994-11-07", "1994-11-13", "1994-11-14", "1994-11-20", 
"1994-11-21", "1994-11-24", "1994-11-27", "1994-11-28", "1994-12-01", 
"1994-12-04", "1994-12-05", "1994-12-10", "1994-12-11", "1994-12-12", 
"1994-12-17", "1994-12-18", "1994-12-19", "1994-12-24", "1994-12-25", 
"1994-12-26", "1994-12-31", "1995-01-01", "1995-01-07", "1995-01-08", 
"1995-01-15", "1995-01-29", "1995-09-03", "1995-09-04", "1995-09-10", 
"1995-09-11", "1995-09-17", "1995-09-18", "1995-09-24", "1995-09-25", 
"1995-10-01", "1995-10-02", "1995-10-08", "1995-10-09", "1995-10-12", 
"1995-10-15", "1995-10-16", "1995-10-19", "1995-10-22", "1995-10-23", 
"1995-10-29", "1995-10-30", "1995-11-05", "1995-11-06", "1995-11-12", 
"1995-11-13", "1995-11-19", "1995-11-20", "1995-11-23", "1995-11-26", 
"1995-11-27", "1995-11-30", "1995-12-03", "1995-12-04", "1995-12-09", 
"1995-12-10", "1995-12-11", "1995-12-16", "1995-12-17", "1995-12-18", 
"1995-12-23", "1995-12-24", "1995-12-25", "1995-12-30", "1995-12-31", 
"1996-01-06", "1996-01-07", "1996-01-14", "1996-01-28", "1996-09-01", 
"1996-09-02", "1996-09-08", "1996-09-09", "1996-09-15", "1996-09-16", 
"1996-09-22", "1996-09-23", "1996-09-29", "1996-09-30", "1996-10-06", 
"1996-10-07", "1996-10-13", "1996-10-14", "1996-10-17", "1996-10-20", 
"1996-10-21", "1996-10-27", "1996-10-28", "1996-11-03", "1996-11-04", 
"1996-11-10", "1996-11-11", "1996-11-17", "1996-11-18", "1996-11-24", 
"1996-11-25", "1996-11-28", "1996-12-01", "1996-12-02", "1996-12-05", 
"1996-12-08", "1996-12-09", "1996-12-14", "1996-12-15", "1996-12-16", 
"1996-12-21", "1996-12-22", "1996-12-23", "1996-12-28", "1996-12-29", 
"1997-01-04", "1997-01-05", "1997-01-12", "1997-01-26", "1997-08-31", 
"1997-09-01", "1997-09-07", "1997-09-08", "1997-09-14", "1997-09-15", 
"1997-09-21", "1997-09-22", "1997-09-28", "1997-09-29", "1997-10-05", 
"1997-10-06", "1997-10-12", "1997-10-13", "1997-10-16", "1997-10-19", 
"1997-10-20", "1997-10-26", "1997-10-27", "1997-11-02", "1997-11-03", 
"1997-11-09", "1997-11-10", "1997-11-16", "1997-11-17", "1997-11-23", 
"1997-11-24", "1997-11-27", "1997-11-30", "1997-12-01", "1997-12-04", 
"1997-12-07", "1997-12-08", "1997-12-13", "1997-12-14", "1997-12-15", 
"1997-12-20", "1997-12-21", "1997-12-22", "1997-12-27", "1997-12-28", 
"1998-01-03", "1998-01-04", "1998-01-11", "1998-01-25", "1998-09-06", 
"1998-09-07", "1998-09-13", "1998-09-14", "1998-09-20", "1998-09-21", 
"1998-09-27", "1998-09-28", "1998-10-04", "1998-10-05", "1998-10-11", 
"1998-10-12", "1998-10-15", "1998-10-18", "1998-10-19", "1998-10-25", 
"1998-10-26", "1998-11-01", "1998-11-02", "1998-11-08", "1998-11-09", 
"1998-11-15", "1998-11-16", "1998-11-22", "1998-11-23", "1998-11-26", 
"1998-11-29", "1998-11-30", "1998-12-03", "1998-12-06", "1998-12-07", 
"1998-12-13", "1998-12-14", "1998-12-19", "1998-12-20", "1998-12-21", 
"1998-12-26", "1998-12-27", "1998-12-28", "1999-01-02", "1999-01-03", 
"1999-01-09", "1999-01-10", "1999-01-17", "1999-01-31", "1999-09-12", 
"1999-09-13", "1999-09-19", "1999-09-20", "1999-09-26", "1999-09-27", 
"1999-10-03", "1999-10-04", "1999-10-10", "1999-10-11", "1999-10-17", 
"1999-10-18", "1999-10-21", "1999-10-24", "1999-10-25", "1999-10-31", 
"1999-11-01", "1999-11-07", "1999-11-08", "1999-11-14", "1999-11-15", 
"1999-11-21", "1999-11-22", "1999-11-25", "1999-11-28", "1999-11-29", 
"1999-12-02", "1999-12-05", "1999-12-06", "1999-12-09", "1999-12-12", 
"1999-12-13", "1999-12-18", "1999-12-19", "1999-12-20", "1999-12-24", 
"1999-12-25", "1999-12-26", "1999-12-27", "2000-01-02", "2000-01-03", 
"2000-01-08", "2000-01-09", "2000-01-15", "2000-01-16", "2000-01-23", 
"2000-01-30", "2000-09-03", "2000-09-04", "2000-09-10", "2000-09-11", 
"2000-09-17", "2000-09-18", "2000-09-24", "2000-09-25", "2000-10-01", 
"2000-10-02", "2000-10-08", "2000-10-09", "2000-10-15", "2000-10-16", 
"2000-10-19", "2000-10-22", "2000-10-23", "2000-10-29", "2000-10-30", 
"2000-11-05", "2000-11-06", "2000-11-12", "2000-11-13", "2000-11-19", 
"2000-11-20", "2000-11-23", "2000-11-26", "2000-11-27", "2000-11-30", 
"2000-12-03", "2000-12-04", "2000-12-10", "2000-12-11", "2000-12-16", 
"2000-12-17", "2000-12-18", "2000-12-23", "2000-12-24", "2000-12-25", 
"2000-12-30", "2000-12-31", "2001-01-06", "2001-01-07", "2001-01-14", 
"2001-01-28", "2001-09-09", "2001-09-10", "2001-09-23", "2001-09-24", 
"2001-09-30", "2001-10-01", "2001-10-07", "2001-10-08", "2001-10-14", 
"2001-10-15", "2001-10-18", "2001-10-21", "2001-10-22", "2001-10-25", 
"2001-10-28", "2001-10-29", "2001-11-04", "2001-11-05", "2001-11-11", 
"2001-11-12", "2001-11-18", "2001-11-19", "2001-11-22", "2001-11-25", 
"2001-11-26", "2001-11-29", "2001-12-02", "2001-12-03", "2001-12-09", 
"2001-12-10", "2001-12-15", "2001-12-16", "2001-12-17", "2001-12-22", 
"2001-12-23", "2001-12-29", "2001-12-30", "2002-01-06", "2002-01-07", 
"2002-01-12", "2002-01-13", "2002-01-19", "2002-01-20", "2002-01-27", 
"2002-02-03", "2002-09-05", "2002-09-08", "2002-09-09", "2002-09-15", 
"2002-09-16", "2002-09-22", "2002-09-23", "2002-09-29", "2002-09-30", 
"2002-10-06", "2002-10-07", "2002-10-13", "2002-10-14", "2002-10-20", 
"2002-10-21", "2002-10-27", "2002-10-28", "2002-11-03", "2002-11-04", 
"2002-11-10", "2002-11-11", "2002-11-17", "2002-11-18", "2002-11-24", 
"2002-11-25", "2002-11-28", "2002-12-01", "2002-12-02", "2002-12-08", 
"2002-12-09", "2002-12-15", "2002-12-16", "2002-12-21", "2002-12-22", 
"2002-12-23", "2002-12-28", "2002-12-29", "2002-12-30", "2003-01-04", 
"2003-01-05", "2003-01-11", "2003-01-12", "2003-01-19", "2003-01-26", 
"2003-09-04", "2003-09-07", "2003-09-08", "2003-09-14", "2003-09-15", 
"2003-09-21", "2003-09-22", "2003-09-28", "2003-09-29", "2003-10-05", 
"2003-10-06", "2003-10-12", "2003-10-13", "2003-10-19", "2003-10-20", 
"2003-10-26", "2003-10-27", "2003-11-02", "2003-11-03", "2003-11-09", 
"2003-11-10", "2003-11-16", "2003-11-17", "2003-11-23", "2003-11-24", 
"2003-11-27", "2003-11-30", "2003-12-01", "2003-12-07", "2003-12-08", 
"2003-12-14", "2003-12-15", "2003-12-20", "2003-12-21", "2003-12-22", 
"2003-12-27", "2003-12-28", "2004-01-03", "2004-01-04", "2004-01-10", 
"2004-01-11", "2004-01-18", "2004-02-01", "2004-09-09", "2004-09-11", 
"2004-09-12", "2004-09-13", "2004-09-19", "2004-09-20", "2004-09-26", 
"2004-09-27", "2004-10-03", "2004-10-04", "2004-10-10", "2004-10-11", 
"2004-10-17", "2004-10-18", "2004-10-24", "2004-10-25", "2004-10-31", 
"2004-11-01", "2004-11-07", "2004-11-08", "2004-11-14", "2004-11-15", 
"2004-11-21", "2004-11-22", "2004-11-25", "2004-11-28", "2004-11-29", 
"2004-12-05", "2004-12-06", "2004-12-12", "2004-12-13", "2004-12-18", 
"2004-12-19", "2004-12-20", "2004-12-24", "2004-12-25", "2004-12-26", 
"2004-12-27", "2005-01-02", "2005-01-08", "2005-01-09", "2005-01-15", 
"2005-01-16", "2005-01-23", "2005-02-06", "2005-09-08", "2005-09-11", 
"2005-09-12", "2005-09-18", "2005-09-19", "2005-09-25", "2005-09-26", 
"2005-10-02", "2005-10-03", "2005-10-09", "2005-10-10", "2005-10-16", 
"2005-10-17", "2005-10-21", "2005-10-23", "2005-10-24", "2005-10-30", 
"2005-10-31", "2005-11-06", "2005-11-07", "2005-11-13", "2005-11-14", 
"2005-11-20", "2005-11-21", "2005-11-24", "2005-11-27", "2005-11-28", 
"2005-12-04", "2005-12-05", "2005-12-11", "2005-12-12", "2005-12-17", 
"2005-12-18", "2005-12-19", "2005-12-24", "2005-12-25", "2005-12-26", 
"2005-12-31", "2006-01-01", "2006-01-07", "2006-01-08", "2006-01-14", 
"2006-01-15", "2006-01-22", "2006-02-05", "2006-09-07", "2006-09-10", 
"2006-09-11", "2006-09-17", "2006-09-18", "2006-09-24", "2006-09-25", 
"2006-10-01", "2006-10-02", "2006-10-08", "2006-10-09", "2006-10-15", 
"2006-10-16", "2006-10-22", "2006-10-23", "2006-10-29", "2006-10-30", 
"2006-11-05", "2006-11-06", "2006-11-12", "2006-11-13", "2006-11-19", 
"2006-11-20", "2006-11-23", "2006-11-26", "2006-11-27", "2006-11-30", 
"2006-12-03", "2006-12-04", "2006-12-07", "2006-12-10", "2006-12-11", 
"2006-12-14", "2006-12-16", "2006-12-17", "2006-12-18", "2006-12-21", 
"2006-12-23", "2006-12-24", "2006-12-25", "2006-12-30", "2006-12-31", 
"2007-01-06", "2007-01-07", "2007-01-13", "2007-01-14", "2007-01-21", 
"2007-02-04", "2007-09-06", "2007-09-09", "2007-09-10", "2007-09-16", 
"2007-09-17", "2007-09-23", "2007-09-24", "2007-09-30", "2007-10-01", 
"2007-10-07", "2007-10-08", "2007-10-14", "2007-10-15", "2007-10-21", 
"2007-10-22", "2007-10-28", "2007-10-29", "2007-11-04", "2007-11-05", 
"2007-11-11", "2007-11-12", "2007-11-18", "2007-11-19", "2007-11-22", 
"2007-11-25", "2007-11-26", "2007-11-29", "2007-12-02", "2007-12-03", 
"2007-12-06", "2007-12-09", "2007-12-10", "2007-12-13", "2007-12-15", 
"2007-12-16", "2007-12-17", "2007-12-20", "2007-12-22", "2007-12-23", 
"2007-12-24", "2007-12-29", "2007-12-30", "2008-01-05", "2008-01-06", 
"2008-01-12", "2008-01-13", "2008-01-20", "2008-02-03", "2008-09-04", 
"2008-09-07", "2008-09-08", "2008-09-14", "2008-09-15", "2008-09-21", 
"2008-09-22", "2008-09-28", "2008-09-29", "2008-10-05", "2008-10-06", 
"2008-10-12", "2008-10-13", "2008-10-19", "2008-10-20", "2008-10-26", 
"2008-10-27", "2008-11-02", "2008-11-03", "2008-11-06", "2008-11-09", 
"2008-11-10", "2008-11-13", "2008-11-16", "2008-11-17", "2008-11-20", 
"2008-11-23", "2008-11-24", "2008-11-27", "2008-11-30", "2008-12-01", 
"2008-12-04", "2008-12-07", "2008-12-08", "2008-12-11", "2008-12-14", 
"2008-12-15", "2008-12-18", "2008-12-20", "2008-12-21", "2008-12-22", 
"2008-12-28", "2009-01-03", "2009-01-04", "2009-01-10", "2009-01-11", 
"2009-01-18", "2009-02-01", "2009-09-10", "2009-09-13", "2009-09-14", 
"2009-09-20", "2009-09-21", "2009-09-27", "2009-09-28", "2009-10-04", 
"2009-10-05", "2009-10-11", "2009-10-12", "2009-10-18", "2009-10-19", 
"2009-10-25", "2009-10-26", "2009-11-01", "2009-11-02", "2009-11-08", 
"2009-11-09", "2009-11-12", "2009-11-15", "2009-11-16", "2009-11-19", 
"2009-11-22", "2009-11-23", "2009-11-26", "2009-11-29", "2009-11-30", 
"2009-12-03", "2009-12-06", "2009-12-07", "2009-12-10", "2009-12-13", 
"2009-12-14", "2009-12-17", "2009-12-19", "2009-12-20", "2009-12-21", 
"2009-12-25", "2009-12-27", "2009-12-28", "2010-01-03", "2010-01-09", 
"2010-01-10", "2010-01-16", "2010-01-17", "2010-01-24", "2010-02-07", 
"2010-09-09", "2010-09-12", "2010-09-13", "2010-09-19", "2010-09-20", 
"2010-09-26", "2010-09-27", "2010-10-03", "2010-10-04", "2010-10-10", 
"2010-10-11", "2010-10-17", "2010-10-18", "2010-10-24", "2010-10-25", 
"2010-10-31", "2010-11-01", "2010-11-07", "2010-11-08", "2010-11-11", 
"2010-11-14", "2010-11-15", "2010-11-18", "2010-11-21", "2010-11-22", 
"2010-11-25", "2010-11-28", "2010-11-29", "2010-12-02", "2010-12-05", 
"2010-12-06", "2010-12-09", "2010-12-12", "2010-12-13", "2010-12-16", 
"2010-12-19", "2010-12-20", "2010-12-23", "2010-12-25", "2010-12-26", 
"2010-12-27", "2010-12-28", "2011-01-02", "2011-01-08", "2011-01-09", 
"2011-01-15", "2011-01-16", "2011-01-23", "2011-02-06"), class = "factor"), 
    Season = c(1991, 1991, 1991, 1991, 1991, 1991), HomeRecord = structure(c(1L, 
    1L, 17L, 17L, 17L, 1L), .Label = c("(0-1-0)", "(0-10-0)", 
    "(0-11-0)", "(0-12-0)", "(0-13-0)", "(0-14-0)", "(0-15-0)", 
    "(0-16-0)", "(0-2-0)", "(0-3-0)", "(0-4-0)", "(0-5-0)", "(0-6-0)", 
    "(0-7-0)", "(0-8-0)", "(0-9-0)", "(1-0-0)", "(1-1-0)", "(1-10-0)", 
    "(1-10-1)", "(1-11-0)", "(1-11-1)", "(1-12-0)", "(1-13-0)", 
    "(1-14-0)", "(1-15-0)", "(1-2-0)", "(1-3-0)", "(1-4-0)", 
    "(1-5-0)", "(1-6-0)", "(1-7-0)", "(1-8-0)", "(1-8-1)", "(1-9-0)", 
    "(1-9-1)", "(10-0-0)", "(10-1-0)", "(10-2-0)", "(10-3-0)", 
    "(10-4-0)", "(10-5-0)", "(10-5-1)", "(10-6-0)", "(10-6-1)", 
    "(10-7-0)", "(10-7-1)", "(10-8-0)", "(11-0-0)", "(11-1-0)", 
    "(11-2-0)", "(11-3-0)", "(11-4-0)", "(11-5-0)", "(11-5-1)", 
    "(11-6-0)", "(11-6-1)", "(11-7-0)", "(11-7-1)", "(11-8-0)", 
    "(12-0-0)", "(12-1-0)", "(12-2-0)", "(12-3-0)", "(12-4-0)", 
    "(12-5-0)", "(12-6-0)", "(12-7-0)", "(12-8-0)", "(13-0-0)", 
    "(13-1-0)", "(13-2-0)", "(13-3-0)", "(13-4-0)", "(13-5-0)", 
    "(13-6-0)", "(14-0-0)", "(14-1-0)", "(14-2-0)", "(14-3-0)", 
    "(14-4-0)", "(14-5-0)", "(14-6-0)", "(15-0-0)", "(15-1-0)", 
    "(15-2-0)", "(15-3-0)", "(15-4-0)", "(15-5-0)", "(16-0-0)", 
    "(16-1-0)", "(16-2-0)", "(16-3-0)", "(16-4-0)", "(17-0-0)", 
    "(17-2-0)", "(18-0-0)", "(18-1-0)", "(2-0-0)", "(2-1-0)", 
    "(2-10-0)", "(2-11-0)", "(2-11-1)", "(2-12-0)", "(2-13-0)", 
    "(2-14-0)", "(2-2-0)", "(2-3-0)", "(2-4-0)", "(2-5-0)", "(2-6-0)", 
    "(2-7-0)", "(2-8-0)", "(2-9-0)", "(3-0-0)", "(3-1-0)", "(3-10-0)", 
    "(3-11-0)", "(3-11-1)", "(3-12-0)", "(3-13-0)", "(3-2-0)", 
    "(3-3-0)", "(3-4-0)", "(3-5-0)", "(3-6-0)", "(3-7-0)", "(3-8-0)", 
    "(3-9-0)", "(4-0-0)", "(4-1-0)", "(4-10-0)", "(4-11-0)", 
    "(4-11-1)", "(4-12-0)", "(4-2-0)", "(4-3-0)", "(4-4-0)", 
    "(4-5-0)", "(4-6-0)", "(4-6-1)", "(4-7-0)", "(4-7-1)", "(4-8-0)", 
    "(4-8-1)", "(4-9-0)", "(5-0-0)", "(5-1-0)", "(5-10-0)", "(5-11-0)", 
    "(5-2-0)", "(5-3-0)", "(5-3-1)", "(5-4-0)", "(5-4-1)", "(5-5-0)", 
    "(5-5-1)", "(5-6-0)", "(5-6-1)", "(5-7-0)", "(5-8-0)", "(5-8-1)", 
    "(5-9-0)", "(6-0-0)", "(6-1-0)", "(6-10-0)", "(6-2-0)", "(6-3-0)", 
    "(6-3-1)", "(6-4-0)", "(6-4-1)", "(6-5-0)", "(6-5-1)", "(6-6-0)", 
    "(6-6-1)", "(6-7-0)", "(6-7-1)", "(6-8-0)", "(6-8-1)", "(6-9-0)", 
    "(6-9-1)", "(7-0-0)", "(7-1-0)", "(7-2-0)", "(7-3-0)", "(7-3-1)", 
    "(7-4-0)", "(7-4-1)", "(7-5-0)", "(7-5-1)", "(7-6-0)", "(7-6-1)", 
    "(7-7-0)", "(7-7-1)", "(7-8-0)", "(7-9-0)", "(8-0-0)", "(8-1-0)", 
    "(8-10-0)", "(8-2-0)", "(8-3-0)", "(8-3-1)", "(8-4-0)", "(8-4-1)", 
    "(8-5-0)", "(8-5-1)", "(8-6-0)", "(8-6-1)", "(8-7-0)", "(8-7-1)", 
    "(8-8-0)", "(8-9-0)", "(9-0-0)", "(9-1-0)", "(9-2-0)", "(9-3-0)", 
    "(9-4-0)", "(9-5-0)", "(9-5-1)", "(9-6-0)", "(9-6-1)", "(9-7-0)", 
    "(9-8-0)", "(9-9-0)"), class = "factor"), AwayRecord = structure(c(17L, 
    17L, 1L, 1L, 1L, 17L), .Label = c("(0-1-0)", "(0-10-0)", 
    "(0-11-0)", "(0-12-0)", "(0-13-0)", "(0-14-0)", "(0-15-0)", 
    "(0-16-0)", "(0-2-0)", "(0-3-0)", "(0-4-0)", "(0-5-0)", "(0-6-0)", 
    "(0-7-0)", "(0-8-0)", "(0-9-0)", "(1-0-0)", "(1-1-0)", "(1-10-0)", 
    "(1-10-1)", "(1-11-0)", "(1-11-1)", "(1-12-0)", "(1-13-0)", 
    "(1-14-0)", "(1-15-0)", "(1-2-0)", "(1-3-0)", "(1-4-0)", 
    "(1-5-0)", "(1-6-0)", "(1-7-0)", "(1-8-0)", "(1-8-1)", "(1-9-0)", 
    "(1-9-1)", "(10-0-0)", "(10-1-0)", "(10-2-0)", "(10-3-0)", 
    "(10-4-0)", "(10-5-0)", "(10-5-1)", "(10-6-0)", "(10-6-1)", 
    "(10-7-0)", "(10-7-1)", "(10-8-0)", "(11-0-0)", "(11-1-0)", 
    "(11-2-0)", "(11-3-0)", "(11-4-0)", "(11-5-0)", "(11-5-1)", 
    "(11-6-0)", "(11-6-1)", "(11-7-0)", "(11-7-1)", "(11-8-0)", 
    "(12-0-0)", "(12-1-0)", "(12-2-0)", "(12-3-0)", "(12-4-0)", 
    "(12-5-0)", "(12-6-0)", "(12-7-0)", "(12-8-0)", "(13-0-0)", 
    "(13-1-0)", "(13-2-0)", "(13-3-0)", "(13-4-0)", "(13-5-0)", 
    "(13-6-0)", "(14-0-0)", "(14-1-0)", "(14-2-0)", "(14-3-0)", 
    "(14-4-0)", "(14-5-0)", "(14-6-0)", "(15-0-0)", "(15-1-0)", 
    "(15-2-0)", "(15-3-0)", "(15-4-0)", "(15-5-0)", "(16-0-0)", 
    "(16-1-0)", "(16-2-0)", "(16-3-0)", "(16-4-0)", "(17-0-0)", 
    "(17-2-0)", "(18-0-0)", "(18-1-0)", "(2-0-0)", "(2-1-0)", 
    "(2-10-0)", "(2-11-0)", "(2-11-1)", "(2-12-0)", "(2-13-0)", 
    "(2-14-0)", "(2-2-0)", "(2-3-0)", "(2-4-0)", "(2-5-0)", "(2-6-0)", 
    "(2-7-0)", "(2-8-0)", "(2-9-0)", "(3-0-0)", "(3-1-0)", "(3-10-0)", 
    "(3-11-0)", "(3-11-1)", "(3-12-0)", "(3-13-0)", "(3-2-0)", 
    "(3-3-0)", "(3-4-0)", "(3-5-0)", "(3-6-0)", "(3-7-0)", "(3-8-0)", 
    "(3-9-0)", "(4-0-0)", "(4-1-0)", "(4-10-0)", "(4-11-0)", 
    "(4-11-1)", "(4-12-0)", "(4-2-0)", "(4-3-0)", "(4-4-0)", 
    "(4-5-0)", "(4-6-0)", "(4-6-1)", "(4-7-0)", "(4-7-1)", "(4-8-0)", 
    "(4-8-1)", "(4-9-0)", "(5-0-0)", "(5-1-0)", "(5-10-0)", "(5-11-0)", 
    "(5-2-0)", "(5-3-0)", "(5-3-1)", "(5-4-0)", "(5-4-1)", "(5-5-0)", 
    "(5-5-1)", "(5-6-0)", "(5-6-1)", "(5-7-0)", "(5-8-0)", "(5-8-1)", 
    "(5-9-0)", "(6-0-0)", "(6-1-0)", "(6-10-0)", "(6-2-0)", "(6-3-0)", 
    "(6-3-1)", "(6-4-0)", "(6-4-1)", "(6-5-0)", "(6-5-1)", "(6-6-0)", 
    "(6-6-1)", "(6-7-0)", "(6-7-1)", "(6-8-0)", "(6-8-1)", "(6-9-0)", 
    "(6-9-1)", "(7-0-0)", "(7-1-0)", "(7-2-0)", "(7-3-0)", "(7-3-1)", 
    "(7-4-0)", "(7-4-1)", "(7-5-0)", "(7-5-1)", "(7-6-0)", "(7-6-1)", 
    "(7-7-0)", "(7-7-1)", "(7-8-0)", "(7-9-0)", "(8-0-0)", "(8-1-0)", 
    "(8-10-0)", "(8-2-0)", "(8-3-0)", "(8-3-1)", "(8-4-0)", "(8-4-1)", 
    "(8-5-0)", "(8-5-1)", "(8-6-0)", "(8-6-1)", "(8-7-0)", "(8-7-1)", 
    "(8-8-0)", "(8-9-0)", "(9-0-0)", "(9-1-0)", "(9-2-0)", "(9-3-0)", 
    "(9-4-0)", "(9-5-0)", "(9-5-1)", "(9-6-0)", "(9-6-1)", "(9-7-0)", 
    "(9-8-0)", "(9-9-0)"), class = "factor"), HomeFinal = c(14L, 
    14L, 45L, 35L, 10L, 7L), AwayFinal = c(26L, 24L, 0L, 31L, 
    6L, 16L), HomeLast = c(4, 4, 5, 5, 0, 7), AwayLast = c(6, 
    4, 0, 1, 6, 6), Winner = c("Away", "Away", "Home", "Home", 
    "Home", "Away")), .Names = c("X1", "HomeTeam", "AwayTeam", 
"Date", "Season", "HomeRecord", "AwayRecord", "HomeFinal", "AwayFinal", 
"HomeLast", "AwayLast", "Winner"), row.names = c(NA, 6L), class = "data.frame") 
```

Then you would do.

```
ggfluctuation(table(gamesWide$HomeLast, gamesWide$AwayLast), type="colour") + labs(x="Away", y="Home") + opts(title="Distribution of Last Digit of Score") 
```

To get ![enter image description here](../Images/700a0c0617fe48c46e6edc220ac8fc0c.png)

Of course, that image was generated using the full dataset. This should be further extensible to data that isn't so symmetric and rectangular.

# jsp - jsp、servlet中管理bean的设计模式

> ID：11531060
> 
> 赞同：0
> 
> 时间：2012-07-17T21:21:08.217
> 
> 标签：jsp, design-patterns, servlets

我参与了一个 jsp/servlet 应用程序。应用程序存储会话或请求中所需的对象。但是，可以将同一对象注入到多个位置的会话或请求中。换句话说，而不是写

```
HomeBean homeBean = (HomeBean) request.getSession(false).getAttribute("homeBean"); 
```

我会写

```
HomeBean homeBean = BeanStore.getHomeBean(); 
```

我是过度思考还是过度设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:31:13.320

[在spring](/questions/tagged/spring "显示标记为“春天”的问题")或[cdi](/questions/tagged/cdi "显示标记为“cdi”的问题")等一些框架中，您可以将会话甚至某些会话属性直接注入您的业务组件，例如：

```
@Inject
private HomeBean homeBean; 
```

此外，无需使用 HTTP 会话访问代码污染您的代码，只需获取一次对象并在需要的地方传递它。它将使阅读和测试更容易。

请注意，`BeanStore.getHomeBean()`如果您真的不想`HttpSession`直接通过，您真的很难正确编写。Servlet 过滤器`ThreadLocal`，我来了！更不用说我觉得这样的静态“工厂”非常难看。

* * *

旁注，在：

```
request.getSession(false).getAttribute("homeBean") 
```

`request.getSession(false)`会经常回来`null`，留给你讨厌`NullPointerException`。在这种情况下，首选`true`或根本没有参数。

# ruby-on-rails - 如何在 ruby 中使用 sort_by 按字母顺序对数组进行排序？

> ID：11531061
> 
> 赞同：29
> 
> 时间：2012-07-17T21:21:07.743
> 
> 标签：ruby-on-rails, ruby, arrays, sorting, enumerable

我有一系列会员资格。每个成员都是一个组。我需要按组名对这个成员资格数组进行排序。我尝试了很多不同的方法，最新的方法是这样的：

```
@memberships.sort_by! { |m| m.group.name } 
```

但是，这不是按名称排序的。它似乎是随机排序数组。

*   成员属于_to :group
*   组 has_many :memberships

@memberships 等于：

```
[
  {
  id: 2141,
  user_id: 491,
  group_id: 271,
  member_type: "member",
    group: {
      id: 271,
      name: "Derek's",
      privacy: "open",
      bio_image_url: "/bio_images/medium/missing.png?1340285189",
      member_count: 1,
      upcoming_checkins_count: 0
    }
  },
  {
  id: 2201,
  user_id: 221,
  group_id: 291,
  member_type: "member",
    group: {
      id: 291,
      name: "Rounded Developement",
      privacy: "closed",
      bio_image_url: "/groups/medium/291/bioimage.jpg?1340736175",
      member_count: 7,
      upcoming_checkins_count: 0
   }
}
] 
```

注意：这确实有效--> @memberships.sort_by！{ |米| m.group.id }

它将根据 group.id 对数组进行排序，所以它可能与按字母顺序排序有关？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-17T21:46:11.710

哇，在为此苦苦挣扎了很长时间后，我意识到我的问题很简单。我是按 group.name 排序的，但有些组名是大写的，有些是小写的，这一切都被抛弃了。将所有内容都转换为小写字母效果很好。

```
@memberships.sort_by!{ |m| m.group.name.downcase } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T21:24:17.697

排序方法是一种选择吗？

```
ary.sort{ |a,b| a[:group][:name] <=> b[:group][:name] } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:27:30.220

我看不出你的代码是如何工作的。我无法使用访问数组中的哈希值`m.group.name`

这是一个有效的语法

```
@memberships.sort_by!{ |m| m[:group][:name] } 
```

# java - Powershell：使用 Process 对象捕获标准输出和错误

> ID：11531068
> 
> 赞同：22
> 
> 时间：2012-07-17T21:21:38.613
> 
> 标签：java, windows, powershell

我想从 PowerShell 启动一个 Java 程序并在控制台上打印结果。

我已按照此问题的说明进行操作： [使用 Start-Process 捕获标准输出和错误](https://stackoverflow.com/questions/8761888/powershell-capturing-standard-out-and-error-with-start-process)

但对我来说，这并没有像我预期的那样工作。我做错了什么？

这是脚本：

```
$psi = New-object System.Diagnostics.ProcessStartInfo
$psi.CreateNoWindow = $true
$psi.UseShellExecute = $false
$psi.RedirectStandardOutput = $true
$psi.RedirectStandardError = $true
$psi.FileName = 'java.exe'
$psi.Arguments = @("-jar","tools\compiler.jar","--compilation_level",   "ADVANCED_OPTIMIZATIONS", "--js", $BuildFile, "--js_output_file", $BuildMinFile)
$process = New-Object System.Diagnostics.Process
$process.StartInfo = $psi
$process.Start() | Out-Null
$process.WaitForExit()
$output = $process.StandardOutput.ReadToEnd()
$output 
```

该`$output`变量始终为空（当然控制台上不会打印任何内容）。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-18T20:32:11.607

该`RedirectStandardError`属性的文档建议最好在`WaitForExit()`调用之后进行`ReadToEnd()`调用。以下对我来说是正确的：

```
$psi = New-object System.Diagnostics.ProcessStartInfo 
$psi.CreateNoWindow = $true 
$psi.UseShellExecute = $false 
$psi.RedirectStandardOutput = $true 
$psi.RedirectStandardError = $true 
$psi.FileName = 'ipconfig.exe' 
$psi.Arguments = @("/a") 
$process = New-Object System.Diagnostics.Process 
$process.StartInfo = $psi 
[void]$process.Start()
$output = $process.StandardOutput.ReadToEnd() 
$process.WaitForExit() 
$output 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-12-27T21:25:02.533

小的变化，以便您可以在需要时选择性地打印输出。就好像您只是在寻找错误或警告消息一样，顺便说一下，基思用您的回复保存了我的培根……

```
$psi = New-object System.Diagnostics.ProcessStartInfo 
$psi.CreateNoWindow = $true 
$psi.UseShellExecute = $false 
$psi.RedirectStandardOutput = $true 
$psi.RedirectStandardError = $true 
$psi.FileName = 'robocopy' 
$psi.Arguments = @("$HomeDirectory $NewHomeDirectory /MIR /XF desktop.ini /XD VDI /R:0 /W:0 /s /v /np") 
$process = New-Object System.Diagnostics.Process 
$process.StartInfo = $psi 
[void]$process.Start()
do
{
   $process.StandardOutput.ReadLine()
}
while (!$process.HasExited) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-10-03T14:43:30.720

这是对保罗答案的修改，希望它能解决截断的输出。我使用失败进行了测试，但没有看到截断。

```
function Start-ProcessWithOutput
{
    param ([string]$Path,[string[]]$ArgumentList)
    $Output = New-Object -TypeName System.Text.StringBuilder
    $Error = New-Object -TypeName System.Text.StringBuilder
    $psi = New-object System.Diagnostics.ProcessStartInfo 
    $psi.CreateNoWindow = $true 
    $psi.UseShellExecute = $false 
    $psi.RedirectStandardOutput = $true 
    $psi.RedirectStandardError = $true 
    $psi.FileName = $Path
    if ($ArgumentList.Count -gt 0)
    {
        $psi.Arguments = $ArgumentList
    }
    $process = New-Object System.Diagnostics.Process 
    $process.StartInfo = $psi 
    [void]$process.Start()
    do
    {

       if (!$process.StandardOutput.EndOfStream)
       {
           [void]$Output.AppendLine($process.StandardOutput.ReadLine())
       }
       if (!$process.StandardError.EndOfStream)
       {
           [void]$Error.AppendLine($process.StandardError.ReadLine())
       }
       Start-Sleep -Milliseconds 10
    } while (!$process.HasExited)

    #read remainder
    while (!$process.StandardOutput.EndOfStream)
    {
        #write-verbose 'read remaining output'
        [void]$Output.AppendLine($process.StandardOutput.ReadLine())
    }
    while (!$process.StandardError.EndOfStream)
    {
        #write-verbose 'read remaining error'
        [void]$Error.AppendLine($process.StandardError.ReadLine())
    }

    return @{ExitCode = $process.ExitCode; Output = $Output.ToString(); Error = $Error.ToString(); ExitTime=$process.ExitTime}
}

$p = Start-ProcessWithOutput "C:\Program Files\7-Zip\7z.exe" -ArgumentList "x","-y","-oE:\PowershellModules",$NewModules.FullName -verbose
$p.ExitCode
$p.Output
$p.Error 
```

10ms 的睡眠是为了避免在没有东西读的时候旋转 cpu。

# file - 我从 chrome://cache 恢复了一个文件，如何读取它？

> ID：11531069
> 
> 赞同：14
> 
> 时间：2012-07-17T21:21:45.227
> 
> 标签：file, google-chrome

这是它显示的数据：

```
http://krill.larvit.se/resihop_dev/style.css
HTTP/1.1 200 OK
Date: Tue, 17 Jul 2012 20:36:17 GMT
Server: Apache/2.2.16 (Debian)
Last-Modified: Mon, 16 Jul 2012 23:33:42 GMT
ETag: "3003d8-92f-4c4fadc326180"
Accept-Ranges: bytes
Vary: Accept-Encoding
Content-Encoding: gzip
Content-Length: 871
Content-Type: text/css
00000000:  4a  01  00  00  03  08  00  00  68  fc  1b  c8  a2  23  2e  00  J.......h....#..
00000010:  c4  c4  1c  c8  a2  23  2e  00  0f  01  00  00  48  54  54  50  .....#......HTTP
00000020:  2f  31  2e  31  20  32  30  30  20  4f  4b  00  44  61  74  65  /1.1 200 OK.Date
00000030:  3a  20  54  75  65  2c  20  31  37  20  4a  75  6c  20  32  30  : Tue, 17 Jul 20
00000040:  31  32  20  32  30  3a  33  36  3a  31  37  20  47  4d  54  00  12 20:36:17 GMT.
00000050:  53  65  72  76  65  72  3a  20  41  70  61  63  68  65  2f  32  Server: Apache/2
00000060:  2e  32  2e  31  36  20  28  44  65  62  69  61  6e  29  00  4c  .2.16 (Debian).L
00000070:  61  73  74  2d  4d  6f  64  69  66  69  65  64  3a  20  4d  6f  ast-Modified: Mo
00000080:  6e  2c  20  31  36  20  4a  75  6c  20  32  30  31  32  20  32  n, 16 Jul 2012 2
00000090:  33  3a  33  33  3a  34  32  20  47  4d  54  00  45  54  61  67  3:33:42 GMT.ETag
000000a0:  3a  20  22  33  30  30  33  64  38  2d  39  32  66  2d  34  63  : "3003d8-92f-4c
000000b0:  34  66  61  64  63  33  32  36  31  38  30  22  00  41  63  63  4fadc326180".Acc
000000c0:  65  70  74  2d  52  61  6e  67  65  73  3a  20  62  79  74  65  ept-Ranges: byte
000000d0:  73  00  56  61  72  79  3a  20  41  63  63  65  70  74  2d  45  s.Vary: Accept-E
000000e0:  6e  63  6f  64  69  6e  67  00  43  6f  6e  74  65  6e  74  2d  ncoding.Content-
000000f0:  45  6e  63  6f  64  69  6e  67  3a  20  67  7a  69  70  00  43  Encoding: gzip.C
00000100:  6f  6e  74  65  6e  74  2d  4c  65  6e  67  74  68  3a  20  38  ontent-Length: 8
00000110:  37  31  00  43  6f  6e  74  65  6e  74  2d  54  79  70  65  3a  71.Content-Type:
00000120:  20  74  65  78  74  2f  63  73  73  00  00  00  1c  75  7f  de   text/css....u..
00000130:  67  1f  5e  3e  ea  80  b1  88  00  f0  37  0c  0b  00  00  00  g.^>......7.....
00000140:  33  31  2e  32  34  2e  36  37  2e  36  37  00  50  00          31.24.67.67.P.
00000000:  1f  8b  08  00  00  00  00  00  00  03  8d  55  db  4e  e3  30  ...........U.N.0
00000010:  10  7d  6e  be  c2  6a  b5  62  41  04  28  2d  2c  4d  df  10  .}n..j.bA.(-,M..
00000020:  ec  6f  ac  a6  89  93  78  71  ec  c8  76  81  6e  c5  77  ed  .o....xq..v.n.w.
00000030:  fb  7e  d9  8e  6f  49  1a  0a  42  55  a5  d8  99  cb  99  33  .~..oI..BU.....3
00000040:  67  26  97  67  1b  d0  2c  27  1c  76  72  6b  ce  2e  93  59  g&.g..,'.vrk...Y
00000050:  2e  85  01  26  a8  da  27  93  17  56  98  3a  23  f3  ab  ab  ...&..'..V.:#...
00000060:  6f  eb  64  d2  4a  cd  0c  93  22  23  b0  d1  92  6f  0d  c5  o.d.J..."#...o..
00000070:  cb  9a  b2  aa  36  9d  8d  7c  a6  aa  e4  f2  25  23  35  2b  ....6..|....%#5+
00000080:  0a  2a  d6  c9  5b  92  cc  38  2d  0d  f9  5a  3c  6b  9a  91  .*..[..8-..Z<k..
00000090:  2b  7c  ba  3c  c3  10  4c  54  c4  d4  94  6c  2b  be  23  da  +|.<..LT...l+.#.
000000a0:  6c  cb  92  80  71  37  1b  69  8c  6c  88  2c  dd  a9  81  16  l...q7.i.l.,....
000000b0:  c1  f7  68  ae  5d  06  6f  93  91  d4  1d  3b  24  2d  42  69  ..h.].o....;$-Bi
000000c0:  40  55  4c  b8  4c  f6  1e  fd  7f  e5  20  9e  41  5b  9c  2d  @UL.L..... .A[.-
000000d0:  14  36  b3  c7  31  aa  f0  a0  06  e7  ab  ec  fb  de  2b  55  .6..1.........+U
000000e0:  d1  be  7d  45  fb  82  e9  16  d9  cd  c8  86  cb  fc  c9  82  ..}E............
000000f0:  82  fc  a9  52  72  2b  8a  34  97  5c  aa  8c  bc  d4  ec  73  ...Rr+.4.\.....s
00000100:  2e  75  ae  24  e7  7d  f2  e5  62  e1  62  1f  65  30  a4  f7  .u.$.}..b.b.e0..
00000110:  d9  8d  6c  63  8d  97  67  0f  54  b3  4a  20  4f  0d  15  db  ..lc..g.T.J O...
00000120:  fd  07  ee  91  33  ef  ef  83  4d  42  2d  1d  2f  f6  ec  c8  ....3...MB-./...
00000130:  19  d0  38  28  ac  2f  e9  10  30  a2  b0  a9  09  67  98  9d  ..8(./..0....g..
00000140:  33  6d  52  6d  76  9c  a6  66  d7  d2  8c  08  29  e8  80  30  3mRmv..f....)..0
00000150:  26  38  b3  17  6f  d1  27  db  d0  52  2a  6a  1b  64  45  4a  &8..o.'..R*j.dEJ
00000160:  05  56  39  fd  f7  97  4c  87  81  b3  92  29  8c  9b  d7  8c  .V9...L....)....
00000170:  17  47  1d  bc  f5  46  16  3b  7b  5f  e2  7d  5a  42  c3  38  .G...F.;{_.}ZB.8
00000180:  76  68  ca  b7  39  2b  80  54  0a  44  41  a7  e7  06  6a  d9  vh..9+.T.DA...j.
00000190:  c0  39  b6  a1  00  01  e7  a0  18  f0  73  0d  42  a7  9a  2a  .9........s.B..*
000001a0:  56  ae  83  bb  66  7f  10  fd  dc  b7  c4  62  4e  bb  46  fe  V...f......bN.F.
000001b0:  70  77  87  5a  03  07  c7  36  7e  32  5b  dc  df  ac  56  77  pw.Z...6~2[...Vw
000001c0:  b6  4f  f4  d5  a4  05  cd  a5  02  df  11  4f  06  9a  27  90  .O.........O..'.
000001d0:  d5  56  09  fb  23  46  48  35  55  91  a5  f7  42  f4  b3  34  .V..#FH5U...B..4
000001e0:  bf  09  d4  fb  f7  a4  9e  ef  0f  80  33  51  63  35  66  1d  ..........3Qc5f.
000001f0:  51  d9  f2  77  4e  08  0a  a3  a7  51  0f  73  ec  38  8a  84  Q..wN....Q.s.8..
00000200:  15  64  f6  b8  b2  bf  58  fe  4b  28  56  48  d5  00  1f  aa  .d....X.K(VH....
00000210:  e4  ce  8a  84  74  04  a4  03  31  a2  1a  b9  04  8c  8f  6a  ....t...1......j
00000220:  bc  f0  4f  07  92  c0  da  14  ff  7e  02  bf  e1  35  f5  af  ..O......~...5..
00000230:  2f  2a  56  9e  9c  3a  e7  e0  e0  65  14  8b  8d  38  63  b5  /*V..:...e...8c.
00000240:  bd  11  81  03  ad  2b  ca  91  be  67  1a  a7  23  5d  06  0f  .....+...g..#]..
00000250:  c4  84  56  26  b5  28  2c  2c  7b  d0  e3  6d  70  d8  cb  24  ..V&.(,,{..mp..$
00000260:  58  8d  15  dd  89  f9  0b  24  1e  45  d6  4f  1a  6d  42  ae  X......$.E.O.mB.
00000270:  90  89  35  55  b7  be  46  ab  06  97  05  e0  c9  b6  dd  7b  ..5U..F........{
00000280:  58  c1  0c  f7  79  f0  f2  ba  b8  f5  4e  61  42  17  37  73  X...y.....NaB.7s
00000290:  7b  7c  ef  e6  d9  1b  91  ec  b5  9e  73  0a  a8  17  07  e2  {|........s.....
000002a0:  48  c2  c1  9e  0d  ad  8f  ad  11  d0  d0  fd  48  3e  1b  c9  H...........H>..
000002b0:  0b  ff  b6  a1  5a  43  45  7b  e7  77  ad  35  ac  a1  a4  9f  ....ZCE{.w.5....
000002c0:  23  32  bb  7d  b8  5b  de  2f  3f  9d  a3  e0  f4  d5  61  72  #2.}.[./?.....ar
000002d0:  e6  83  0c  ab  55  27  f8  30  ef  f3  c1  6c  77  10  e3  aa  ....U'.0...lw...
000002e0:  cd  65  83  0b  c9  68  ab  a3  f8  fc  91  94  6e  dc  98  5c  .e...h......n..\
000002f0:  8d  76  68  fc  38  cc  1e  1f  1e  7f  fe  5c  1e  4b  6e  61  .vh.8......\.Kna
00000300:  c6  e0  5e  81  0d  42  89  cb  67  e1  74  fd  b1  02  e3  8a  ..^..B..g.t.....
00000310:  ee  30  a1  bd  c3  12  fe  eb  c9  58  ed  7d  b2  d1  17  b4  .0.......X.}....
00000320:  ff  c8  f5  4b  bb  37  b6  8d  7a  67  f0  51  f3  07  f5  5c  ...K.7..zg.Q...\
00000330:  d0  d7  16  17  f1  a8  ac  f1  97  c6  a2  cd  d1  03  f5  66  ...............f
00000340:  57  46  f0  bf  68  45  75  8a  cd  4f  15  6d  29  98  f5  78  WF..hEu..O.m)..x
00000350:  29  5e  5f  7b  02  8f  e4  73  78  8f  6e  b6  b7  e4  3f  49  )^_{...sx.n...?I
00000360:  7b  1f  b2  2f  09  00  00                                      {../... 
```

# javascript - IE8 的 Nth-of-type 替代方案

> ID：11531070
> 
> 赞同：6
> 
> 时间：2012-07-17T21:21:50.817
> 
> 标签：javascript, jquery, css, internet-explorer-8, jquery-selectors

我有一排产品div。需要在每第四个项目之后添加一个清晰的 div。4到一排。

我现在正在使用`jQuery('.product:nth-of-type(4n+2)').after("<div class='clear'></div>");`，但不支持IE8。由于我们使用的是 jQuery，因此在这种情况下，selectivizrs 修复将不起作用。

我也试过

```
 addDynamicRow = function() {
            var divs = $(".product-section > .product");
            for(var i = 0; i < divs.length; i+=4) {
              divs.slice(i, i+4).wrapAll("<div class='row'></div>");
            }  

            $('.row').after("<div class='clear'></div>")   
        }

        addDynamicRow(); 
```

但这也会抓取其他产品部分包装器中的所有产品 div，并将它们分成四个一组，无论它们在哪里。

任何人都知道一个工作循环？我一直没能找到解决办法。

谢谢！

**2013 年 1 月 15 日更新：** jQuery 1.9 现在在所有浏览器中支持以下 CSS3 选择器，一直到 IE6：:nth-last-child, :nth-of-type, :nth-last-of-type, :第一个类型、:last-of-type、:only-of-type、:target、:root 和 :lang。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T21:51:12.737

最终在 IE 条件语句中使用[https://github.com/keithclark/JQuery-Extended-Selectors 。](https://github.com/keithclark/JQuery-Extended-Selectors)它现在正在工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T10:59:49.947

[JQuery 扩展选择器](https://github.com/keithclark/JQuery-Extended-Selectors)

它将解决您的问题，它有助于所有 css3 选择器类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:26:36.320

该[`.filter`方法](http://api.jquery.com/filter/)可能被滥用来解决缺少的 jQuery 的 CSS3 支持：

```
jQuery('.product').filter(function(i){return i%4==2;}) 
```

尽管这模拟了`nth-child`, 不是`nth-of-type`, 并且仅在当前一组选定的元素中而不是基于它们的 DOM 位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T21:33:04.350

如果您乐于使用 javascript 解决方案，那么我所知道的最好的解决方案是[Selectivz](http://selectivizr.com/)。它为大量高级 CSS 选择器添加了对 IE 的支持。

它使用几个库中的任何一个来执行此操作，包括 jQuery。然而值得注意的是，他们的主页`nth-of-type`提到与 jQuery 结合使用时不受支持。不过，它确实适用于 MooTools、Prototype 和其他库。我不知道为什么它特别与 jQuery 有问题。

如果这对您不起作用，一个名为[IE9.js](http://code.google.com/p/ie7-js/)的旧脚本可能会对您有所帮助。这是一个很大的 hack，它试图将一大堆缺失的功能添加到旧版本的 IE 中，包括`nth-of-type`和其他 CSS 选择器。它还试图修复一大堆 IE 错误。

这些库中的任何一个都可能适合您，并允许您使用高级 CSS 选择器而不必担心旧版本的 IE。给他们一个机会。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-28T10:21:59.427

如果您不想加载完整的选择器库，请查看：[https ://gist.github.com/oliverbenns/6740630](https://gist.github.com/oliverbenns/6740630)

# regex - 如何按长度对一系列行进行排序？

> ID：11531073
> 
> 赞同：39
> 
> 时间：2012-07-17T21:21:56.277
> 
> 标签：regex, sorting, vim

通常我只想`#include`按长度对源文件和头文件顶部的所有 's 进行排序。

`vim`允许我以与`:{range} sort u`.

在`vim`中，如何按行的长度对一系列行进行排序？这样较短的行后面跟着较长的行。

在互联网上搜索，我发现了这个：

```
:% s/.*/\=printf("%03d", len(submatch(0)))."|".submatch(0)/ | sor n | %s/..../ 
```

但这只能对整个文件进行排序，无论如何对我来说都是黑魔法。我试图弄清楚如何在第 4 行到第 18 行等范围内进行相同的排序，如`:4,18 s/...`你有什么想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-17T22:35:15.787

### 使用 awk 过滤视觉选择

在 vim 中执行此操作的一种方法是在排序之前使用 awk 的 length() 函数过滤视觉选择。例如：

```
:'<,'> ! awk '{ print length(), $0 | "sort -n | cut -d\\  -f2-" }' 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-17T22:19:53.193

一种方式，既不优雅也不高效，但它有效：

将以下功能添加到您的`vimrc`文件中。它在每行的开头插入其字符数，按数字排序并删除数字。

```
function! SortLines() range
    execute a:firstline . "," . a:lastline . 's/^\(.*\)$/\=strdisplaywidth( submatch(0) ) . " " . submatch(0)/'
    execute a:firstline . "," . a:lastline . 'sort n'
    execute a:firstline . "," . a:lastline . 's/^\d\+\s//'
endfunction 
```

用一系列数字调用它，比如

```
:4,18call SortLines() 
```

或在可视模式下使用`V`，例如：

```
:'<,'>call SortLines() 
```

**编辑**：操作，现在我意识到这个解决方案与你的非常相似。很好，只是这`%`意味着完整的缓冲区，`:4,18`或者`:'<,:'>`选择特定的行。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-11T09:20:11.260

我编写了[AdvancedSorters 插件](http://www.vim.org/scripts/script.php?script_id=4958)来处理这些复杂的排序要求。

就像在@Birei 的回答中一样，这个插件提供了扩展命令，每行评估一个表达式，将该数字放在该行的前面，进行数字排序，然后再次删除临时数字。专业化按字符数和行的显示宽度处理常见排序，因此您可以使用：

```
:SortByWidth 
```

# php - 图片上传权限被拒绝

> ID：11531077
> 
> 赞同：0
> 
> 时间：2012-07-17T21:22:13.907
> 
> 标签：php, file-upload, permissions, file-permissions, image-uploading

我正在尝试从用户接收图像，然后将其上传到我的 Amazon S3 帐户，但我`Warning: move_uploaded_file(/items) [function.move-uploaded-file]: failed to open stream: Permission denied`从 Zend Framework 收到错误消息。我通过 FTP 将文件夹的权限设置为 777，但仍然出现错误。这是产生错误的代码，如果它有影响的话。我会假设接收时会出现错误。我怎样才能摆脱这个错误？

```
$upload = new Zend_File_Transfer();
        $upload->addValidator('ImageSize', false, array('minwidth'  => 100,
                                                  'maxwidth'  => 1000,
                                                  'minheight' => 100,
                                                  'maxheight' => 1000), 'image')
         ->addValidator('Extension', false, 'jpg')
         ->addValidator('Count', false, array('min'=>0, 'max'=>2));

if($upload->isUploaded('image')){ //Pic was uploaded
                if($upload->isValid('image')){ //Pic is valid
                    echo "Pic provided is valid.";
                    $upload->addFilter('Rename',array('target'=>"/items/{$item_id}_nla.jpg",'overwrite'=>true));
                    $upload->receive();
                    $pic = "/items/{$item_id}_nla.jpg";
                    $s3->putObject("media.completeset.com/images/items/{$item_id}_nla.jpg", $pic,
                                    array(Zend_Service_Amazon_S3::S3_ACL_HEADER => Zend_Service_Amazon_S3::S3_ACL_PUBLIC_READ,
                                          Zend_Service_Amazon_S3::S3_CONTENT_TYPE_HEADER => "image/jpeg"));
                    echo "Pic is uploaded.";
                }
                echo "Pic is invalid.";
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:27:35.363

更改目录，使其成为绝对目录：

```
$projectRootDirectory = "/var/www/myproject";
// ...
$upload->addFilter('Rename',array('target'=> $projectRootDirectory."/items/{$item_id}_nla.jpg",'overwrite'=>true));
// ...
$pic = $projectRootDirectory."/items/{$item_id}_nla.jpg"; 
```

`/`如果您已经在项目根目录中，或者删除第一个。

# ruby-on-rails - 是否可以在 RubyMine 中运行单个 Steak 测试？

> ID：11531079
> 
> 赞同：0
> 
> 时间：2012-07-17T21:22:29.763
> 
> 标签：ruby-on-rails, rubymine, acceptance-testing

我最近从 TextMate 迁移到 RubyMine 并且到目前为止非常喜欢它。我注意到的一件事是 RubyMine 没有像 TextMate 那样的 Steak 插件，它允许运行单个场景。

有没有办法在 RubyMine 中做同样的事情，或者每次我想运行一个 Steak 测试时，我都会坚持运行完整的验收测试文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:36:55.610

Steak 是 rspec 的扩展。要在 rspec 中运行单个测试，您可以指定`--tag`

```
describe 'run this test', :focus => true do
  # this one will run
end

describe 'but not this one' do
  # wont get run
end

$ rspec --tag focus my_spec_file.rb 
```

（注：我从未使用过红宝石）

# android - 获取 Google 日历条目、Google API Java 客户端时出现错误的 startMin/startMax

> ID：11531081
> 
> 赞同：1
> 
> 时间：2012-07-17T21:23:04.653
> 
> 标签：android, google-calendar-api, google-api-java-client

我正在执行相同的查询以两种不同的方式获取日历事件。奇怪的是，一种方式有效，另一种方式无效，即使一切几乎完全相同。使用 timeMin，Google 的 API Explorer 上的 timeMax 在第二种方法发送的时间返回错误请求。

不仅如此，Google Calendar API 文档还说该字段应该是 start-min 和 start-max，而客户端和 API Explorer 说该字段应该是 timeMin 和 timeMax。

这是方法 1 的有效代码：

```
void setPeriod() {
    Date nowDate = new Date();
    startTime = new DateTime(nowDate);
    Time t = new Time();
    t.setToNow();
    t.hour = 23;
    t.minute = 59;
    nowDate.setTime(t.toMillis(false));
    endTime = new DateTime(nowDate);
}

new AsyncTask<Void, Void, Void>() {
@Override
protected Void doInBackground(Void... params) {
    try {
    Events evlist = g.getClient().events().list(calendarIds.get(cal)).setTimeMin(startTime).setTimeMax(endTime).execute();
    if (evlist.getItems() != null) {
        //Parse the events
    ...
}.execute(); 
```

方法二：

```
new AsyncTask<Void, Void, List<Event>>() {
    @Override
protected List<Event> doInBackground(Void... arg0) {
    Date nowDate = new Date();
    DateTime startTime = new DateTime(nowDate);
    Time t = new Time();
    t.setToNow();
    t.hour = 23;
    t.minute = 59;
    nowDate.setTime(t.toMillis(true));
    DateTime endTime = new DateTime(nowDate);
    Calendar client = com.google.api.services.calendar.Calendar
                .builder(transport, jsonFactory)
                .setApplicationName("Wayk by Senti")
                .setHttpRequestInitializer(
                    new HttpRequestInitializer() {
                        public void initialize(HttpRequest request)
                                        throws IOException {
                                    request.getHeaders()
                                            .setAuthorization(
                                                    GoogleHeaders
                                                            .getGoogleLoginValue(authToken));
                                }
                            })
                    .setJsonHttpRequestInitializer(
                            new JsonHttpRequestInitializer() {

                                public void initialize(
                                        JsonHttpRequest request)
                                        throws IOException {
                                    CalendarRequest calendarRequest = (CalendarRequest) request;
                                    calendarRequest
                                            .setKey(CalendarClientCredentials.KEY);
                                }
                            }).build();
            try {
                List<Event> events = new ArrayList<Event>();
                for (int i = currentCal; i < enables.size(); i++) {
                    if (enables.get(i)) {
                        AiLog.v("Getting events");
                        AiLog.v("AuthToken: " + authToken);
                        AiLog.v("CalendarID: " + calendarIds.get(i));
                        AiLog.v("Calendar name: " + calendarNames.get(i));
                        AiLog.v("Calendar account: " + account);
                        Calendar.Events.List eventReq = client.events()
                                .list(calendarIds.get(i)).setTimeMin(startTime).setTimeMax(endTime).execute();//Bad request here 
```

请注意，两者的客户端完全相同。第二种方法中的客户端成功抓取了该帐户的日历列表。我已经验证日历 ID 是正确的，这给我留下了来自 startMin 和 startMax 的错误。

任何帮助表示赞赏。

干杯，Z

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-19T22:11:38.883

弄清楚了。

您*必须*使用`DateTime`接受 a 的构造函数`TimeZone`。

IE

```
DateTime startTime = new DateTime(new Date(), TimeZone.getDefault()); 
```

希望这可以节省其他人我试图解决这个问题的 16 个小时。真的很糟糕的文档。

# mysql - 没有要加载的文件——mysql (LoadError)——ruby gems

> ID：11531082
> 
> 赞同：0
> 
> 时间：2012-07-17T21:23:06.177
> 
> 标签：mysql, ruby, cucumber

我是 ruby​​ 的新手，尝试通过 Ruby 连接 mysql servcer for cucumber 并在运行 cukes 时出现以下错误。错误：没有要加载的文件--mysql（LoadError）

但是安装了 mysql gem，这是我的 gem 列表，并且在 ruby​​_home\bin 路径下还有 libmysql.dll

*   可寻址 (2.2.8)
*   建设者（3.0.0）
*   捆绑器 (1.1.4)
*   子进程（0.3.3）
*   黄瓜 (1.2.1)
*   diff-lcs (1.1.3)
*   ffi (1.0.11, 1.0.9 x86-mingw
*   小黄瓜（2.11.1 x86-mingw32）
*   无头（0.2.2）
*   json (1.7.3)
*   libwebsocket (0.1.4)
*   迷你测试（1.6.0）
*   multi_json (1.3.6)
*   mysql (2.8.1 x86-mingw32)
*   mysql2 (0.3.11 x86-mingw32)
*   网络 ldap (0.3.1)
*   耙子 (0.8.7)
*   rdoc (2.5.8)
*   rspec (2.10.0)
*   rspec 核心 (2.10.1)
*   rspec-expectations (2.10.0)
*   rspec 模拟 (2.10.1)
*   rubygems 更新 (1.8.24)
*   rubyzip (0.9.9)
*   硒网络驱动程序（2.24.0）
*   标题化 (1.2.1)
*   水网驱动程序（0.6.1）

知道发生了什么...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T11:24:27.530

你在运行什么版本的 Ruby？如果您运行的是 1.8，则需要在“require 'mysql'之前添加“require 'rubygems'”。如果没有，请尝试以非显式方式要求 gem。像这样：

```
require_relative "rubygems"    
require_relative "mysql" 
```

如果您想对其进行快速测试，请使用以下代码..：

```
require "rubygems"   

require "mysql"

     begin

     # connect to the MySQL server

     db = Mysql.real_connect("localhost", "username", "password")

     # get server version string and display it

     puts "Server version: " + db.get_server_info

   rescue Mysql::Error => e

     puts "Error code: #{e.errno}"

     puts "Error message: #{e.error}"

     puts "Error SQLSTATE: #{e.sqlstate}" if e.respond_to?("sqlstate")

   ensure

     # disconnect from server

     db.close if db

   end 
```

如果一切顺利，您应该会看到您的 mysql 版本。

# git - 奇怪的 Git 行尾问题

> ID：11531084
> 
> 赞同：1
> 
> 时间：2012-07-17T21:23:13.173
> 
> 标签：git, text, github, newline

我正在与其他一些人合作编辑一些 CSV 文件，这些文件存储在 Github 的存储库中。我们有使用 Windows、OS X 和 Linux 的协作者，因此为了处理行尾和本地 Git 设置的差异，我添加了一个 .gitattributes 文件，其中包含以下内容：

```
* text=auto 
```

人们使用 Excel 编辑这些 CSV 文件，然后保存并提交。有时在提交时文件似乎根本没有行尾；行以回车符 (\r) 结束。然后 Github 将这些文件视为一大行，并认为整个文件已被删除并替换为一大行。这是此类提交的示例：

[https://github.com/weecology/neonetods/commit/7e10cb2913ca2e214c49944b4856519cab9bad96](https://github.com/weecology/neonetods/commit/7e10cb2913ca2e214c49944b4856519cab9bad96)

如果您要签出该文件，您会看到每一行都以 \r 结尾。在 Mac 和 Windows 上简单地在 Excel 中编辑和保存文件后，现在有两个人发生了这种情况。

这会导致不应该发生冲突的冲突，并使跟踪每个文件的出处变得困难。有谁知道这是怎么发生的或者我们如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:05:58.747

这个人：

[git 和 CR 与 LF（但不是 CRLF）](https://stackoverflow.com/questions/10491564/git-and-cr-vs-lf-but-not-crlf?rq=1)

有类似的问题。解决方案是使用过滤器，这很不方便，因为每个人都必须将过滤器定义添加到 .git/config，但它应该可以解决问题。

花了很长时间才弄清楚要使用的合适的过滤器，但是：

```
clean = LC_CTYPE=C awk '{printf(\"%s\\n\", $0)}' | LC_CTYPE=C tr '\\r' '\\n' 
```

...最终对每个人都有效。它将 \r\n 替换为 \n（这样 \r\n 不会变为 \n\n），然后将 \r 替换为 \n，并处理在 Mac 上使用 tr 时导致的一些奇怪的字符编码问题.

# sql - 是否可以在 SQL 中执行此操作（根据每个用户的不同条件对行求和）

> ID：11531087
> 
> 赞同：3
> 
> 时间：2012-07-17T21:23:17.400
> 
> 标签：sql, postgresql

我有一个如下所示的 SQL 表：

```
CREATE TABLE diet_watch (
  entry_date date NOT NULL,
  user_id    int default 1,
  weight     double precision NOT NULL
);

INSERT INTO diet_watch VALUES ('2001-01-01', 1, 128.2);
INSERT INTO diet_watch VALUES ('2001-01-02', 1, 121.2);
INSERT INTO diet_watch VALUES ('2001-01-03', 1, 100.6);
INSERT INTO diet_watch VALUES ('2001-01-04', 1, 303.7);
INSERT INTO diet_watch VALUES ('2001-01-05', 1, 121.0);
INSERT INTO diet_watch VALUES ('2001-01-01', 2, 121.0);
INSERT INTO diet_watch VALUES ('2001-01-06', 2, 128.0);
INSERT INTO diet_watch VALUES ('2001-01-07', 2, 138.0);
INSERT INTO diet_watch VALUES ('2001-01-01', 3, 128.2);
INSERT INTO diet_watch VALUES ('2001-01-02', 3, 125.5);
INSERT INTO diet_watch VALUES ('2001-01-03', 3, 112.8);
INSERT INTO diet_watch VALUES ('2001-01-06', 3, 111.2); 
```

我还有这张表：

```
CREATE TABLE summing_period (
    user_id INT NOT NULL, 
    start_date DATE NOT NULL, 
    end_date DATE NOT NULL); 

insert into summing_period VALUES (1, '2001-01-01', '2001-01-03'); 
insert into summing_period VALUES (2, '2001-01-02', '2001-01-06'); 
insert into summing_period VALUES (3, '2001-01-03', '2001-01-06'); 
```

我想编写一个返回 DISTINCT ROWS 的查询，其中包含以下列：

*   **user_id** _
***   表 summing_period 中指定日期之间表**中权重**的总和（对于 user_id）`diet_watch`**

 **所以根据表求和周期的数据查询的结果应该是：

```
1,350.0
2,128.0
3,224.0 
```

不幸的是，这一次，我已经达到了我的 SQLfu 的极限——我什至不知道如何开始编写 SQL。理想情况下，解决方案应该是 ANSI SQL（即 db 不可知论）。但是，由于我正在开发 PostgreSQL 8.4 后端，如果解决方案以 db 为中心，它至少必须在 PG 上运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T21:34:23.127

```
SELECT
    sp.user_id, SUM(dw.weight)
FROM
    summing_period sp,
    diet_watch dw
WHERE
    dw.user_id = sp.user_id AND
    dw.entry_date >= sp.start_date AND
    dw.entry_date <= sp.end_date
GROUP BY
    sp.user_id 
```

此查询所做的是将每一`diet_watch`行连接到`summing_period`与其匹配`user_id`且日期在`summing_period`' 范围内的行。

然后`SELECT`询问`SUM`每个不同的权重`user_id`（作为 的结果`GROUP BY user_id`）。**

# c# - 表格在客户端桌面区域内移动

> ID：11531088
> 
> 赞同：2
> 
> 时间：2012-07-17T21:23:19.927
> 
> 标签：c#, winforms

我的目标是防止用户通过鼠标移动表单时部分或全部隐藏我的表单。例如，如果我的桌面分辨率为 1024x768，则以下将是表单位置属性坐标的“x/y”最小/最大值：0、1024 - form.width、0、768 - form.height。

我使用一些本机 APi 来完成所有这些并且一切正常，但我经常注意到我的表单刷新（闪烁）不好（我正在管理所有 form_move 事件）。
似乎`SuspendLayout`方法不能正常工作，否则表单移动事件不会触发每个更改的像素，但可能不止一个（请参阅下面的代码以了解我的意思）。

我的代码如下所示：

```
private void Form1_Move(object sender, EventArgs e)
{
    this.SuspendLayout();

    // Desktop Resolution (API utility)
    int x = Desktop.GetXResolution();
    int y = Desktop.GetYResolution();

    // Taskbar Info (API utility)
    Taskbar tb = new Taskbar();
    int minX = 0;
    int maxX = x - this.Width;
    int minY = 0;
    int maxY = y - this.Height;
    if (!tb.AutoHide)
    {
        if (tb.Position != TaskbarPosition.Unknown && !tb.Size.IsEmpty)
        {
            if (tb.Position == TaskbarPosition.Top) minY += tb.Size.Height;
            switch (tb.Position)
            {
                case TaskbarPosition.Top: minY = tb.Size.Height; break;
                case TaskbarPosition.Bottom: maxY -= tb.Size.Height; break;
                case TaskbarPosition.Left: minX = tb.Size.Width; break;
                case TaskbarPosition.Right: maxX -= tb.Size.Width; break;
            }
        }
    }

    // Restore X Position
    if (this.Location.X < minX) this.Location = new Point(minX, this.Location.Y);
    if (this.Location.X > maxX) this.Location = new Point(maxX, this.Location.Y);

    // Restore Y Poistion
    if (this.Location.Y < minY) this.Location = new Point(this.Location.X, minY);
    if (this.Location.Y > maxY) this.Location = new Point(this.Location.X, maxY);

    this.ResumeLayout(false);
} 
```

正如我已经说过的，当我恢复 Location 属性时，我的 winForm 通常会闪烁。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:51:39.117

`Move`移动完成后发生。表单已移动，然后您将其移回。无论如何它都会闪烁。

相反，首先要防止它移动：

```
private const int WM_MOVING = 0x216;

private void WriteTheRect(IntPtr dest, Rectangle rect) {
    System.Runtime.InteropServices.Marshal.WriteInt32(dest, 0, rect.Left);
    System.Runtime.InteropServices.Marshal.WriteInt32(dest, 4, rect.Top);
    System.Runtime.InteropServices.Marshal.WriteInt32(dest, 8, rect.Right);
    System.Runtime.InteropServices.Marshal.WriteInt32(dest, 12, rect.Bottom);
}

protected override void WndProc(ref Message m) {
    if (m.Msg == WM_MOVING)
    {
        // RECT structure pointed to by lParam: left, top, right, bottom

        Rectangle r = Rectangle.FromLTRB(System.Runtime.InteropServices.Marshal.ReadInt32(m.LParam, 0),
                                         System.Runtime.InteropServices.Marshal.ReadInt32(m.LParam, 4),
                                         System.Runtime.InteropServices.Marshal.ReadInt32(m.LParam, 8),
                                         System.Runtime.InteropServices.Marshal.ReadInt32(m.LParam, 12)
                                         );

        Rectangle allowed = Rectangle.FromLTRB(0, 0, 1600, 900);

        if (r.Left <= allowed.Left || r.Top <= allowed.Top || r.Right >= allowed.Right || r.Bottom >= allowed.Bottom)
        {
            int offset_x = r.Left < allowed.Left ? (allowed.Left - r.Left) : (r.Right > allowed.Right ? (allowed.Right - r.Right) : (0));
            int offset_y = r.Top < allowed.Top ? (allowed.Top - r.Top) : (r.Bottom > allowed.Bottom ? (allowed.Bottom - r.Bottom) : (0));

            r.Offset(offset_x, offset_y);

            WriteTheRect(m.LParam, r);
        }
    }
    base.WndProc(ref m);
} 
```

显然，用您实际所需的界限替换常量。

# javascript - 在 JS 中使用 RequireJS/AMD 可以提高多少速度？

> ID：11531091
> 
> 赞同：26
> 
> 时间：2012-07-17T21:23:23.053
> 
> 标签：javascript, performance, asynchronous, requirejs, amd

在大型网站上，requireJS 实际上快了多少？

有没有人对使用异步加载与不使用异步加载的大型网站的速度进行过任何测试？

例如，使用带有大量视图（> 100）的 Backbone，最好是简单地使用一个视图对象来一次加载所有视图然后始终可用，还是应该根据需要异步加载它们？

此外，对于移动设备与桌面设备的这些注意事项是否有任何区别？我听说您想限制移动设备上的请求*数量*而不是大小。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-07-19T14:33:54.290

我不相信**require.js的目的是***在生产*中异步加载所有脚本。在*开发过程*中，每个脚本的异步加载都很方便，因为您可以对项目进行更改并重新加载，而无需“编译”步骤。但是在*生产*中，您应该使用[r.js 优化器](https://github.com/jrburke/r.js/)[将所有源文件组合](http://requirejs.org/docs/optimization.html#wholeproject)成一个或多个更大的模块。如果您的大型 web 应用程序可以将模块子集的加载推迟到稍后时间（例如，在特定用户操作之后），这些模块可以单独优化并在生产中异步加载。

关于加载单个大 JS 文件与加载多个小文件的速度，一般来说：

> “减少 HTTP 请求”已成为提高前端性能的普遍准则，这在当今的移动浏览器世界中更为相关（通常在比宽带连接慢一个数量级的网络上运行）。 [[参考]](http://calendar.perfplanet.com/2011/beyond-bandwidth-ui-performance/)

但还有其他考虑因素，例如：

*   **移动缓存**：[iPhone 限制了它们缓存的文件的大小，](http://headjs.com/)因此每次可能都需要下载大文件，从而使许多小文件更好。
*   **CDN 用法**：如果您使用像**jQuery**这样的常见 3rd 方库，最好不要将它包含在一个大的单个 JS 文件中，而是从 CDN 加载它，因为您网站的用户可能已经在另一个网站的缓存中拥有它（[参考](http://encosia.com/3-reasons-why-you-should-let-google-host-jquery-for-you/)）。*有关更多信息，请参阅下面的更新*
*   **延迟评估**：AMD 模块可以延迟解析和评估，允许在应用程序加载时下载，同时将 parse+eval 的成本推迟到需要模块时。请参阅[这篇](http://calendar.perfplanet.com/2011/lazy-evaluation-of-commonjs-modules/)文章以及它引用的一系列其他较早的文章。
*   **目标浏览器**：浏览器限制每个主机名的并发下载数量。例如，IE 7 只会同时从给定主机下载两个文件。其他限制为 4 个，其他限制为 6 个。[[参考]](http://www.stevesouders.com/blog/2009/05/12/sharding-dominant-domains/)

最后，[这是 Steve Souders 的一篇好文章](http://www.stevesouders.com/blog/2010/12/06/evolution-of-script-loading/)，总结了一堆脚本加载技术。

**更新：**关于CDN 的使用：Steve Souders[发布了关于](http://www.stevesouders.com/blog/2013/03/18/http-archive-jquery/)将 CDN 用于 3rd 方库（例如 jQuery）的详细分析，其中确定了许多注意事项、优缺点。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-27T10:27:32.663

这个问题现在有点老了，但我想我可以补充一下我的想法。

我完全同意[rharper](https://stackoverflow.com/a/11563110/320399)使用 r.js 将所有代码组合起来进行生产，但也有拆分功能的情况。

对于单页应用程序，我认为将所有内容放在一起是有意义的。对于具有页面交互的大型更传统的基于页面的网站，这可能非常麻烦，并导致为许多用户加载大量不必要的代码。

我用过几次的方法是

*   定义核心模块（所有页面都需要它们才能正常运行），这将被合并到一个文件中。
*   创建一个了解 DOM 依赖关系和模块路径的模块加载器
*   on doc.ready 循环遍历特定页面所需的增强功能所需的模块加载器和异步加载模块。

这里的优点是您可以降低初始页面权重，并且由于在页面加载后异步加载其他脚本，因此感知性能应该更快。也就是说，以这种方式加载的所有功能都应该作为渐进增强（即表单上的ajax）来完成，以便在加载缓慢或错误的情况下，基本功能仍然可用。

# tomcat - jboss和tomcat访问日志参数设置

> ID：11531092
> 
> 赞同：0
> 
> 时间：2012-07-17T21:23:33.507
> 
> 标签：tomcat, jboss, localhost, server.xml, access-log

在我们的`$JBOSS_HOME/server/<PROFILE = default >/deploy/jbossweb.sar/server.xml`: THIS 中，我们定义了如何写入访问日志文件的日志模式。

```
 <Valve className="org.apache.catalina.valves.AccessLogValve" resolveHosts="false" directory="${jboss.server.log.dir}" pattern="combined" suffix=".log" prefix="localhost_access_log."/> 
```

别名“combined”为您提供以下属性。此属性集中的属性顺序和数量正是 localhost_access_log 文件的编写方式：

```
combined - %h %l %u %t "%r" %s %b "%{Referer}i" "%{User-Agent}i" 
```

我检查了该别名模式中的每个变量的含义：

[http://docs.jboss.org/jbossweb/latest/api/org/apache/catalina/valves/AccessLogValve.html](http://docs.jboss.org/jbossweb/latest/api/org/apache/catalina/valves/AccessLogValve.html)

基于该模板，这就是我们应该得到的：

```
128.117.140.183 - bob [04/Nov/2008:14:40:46 -0700] "GET /manager/html HTTP/1.1" 200 13022 "http://localhost:8080/"

"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3" 325

where %u = bob 
```

相反，这就是我们最终得到的

```
128.117.140.183 - - [04/Nov/2008:14:40:46 -0700] "GET /manager/html HTTP/1.1" 200 13022 "http://localhost:8080/"

"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.3) Gecko/2008092417 Firefox/3.0.3" 325 
```

关于可能导致这种情况的任何想法？

请注意，我正在查看从 RIGHT Jboss PROFILE 创建的 RIGHT 访问日志（在本例中为 / 默认）。

为什么 jboss 不提供用户名 (%u) ？它是否以某种方式被覆盖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T17:47:12.217

%u 仅在用户已通过身份验证时才会显示。您如何验证用户身份？

# mysql - 大表上的 MySQL 性能问题 - 我如何有效地缓存结果？

> ID：11531106
> 
> 赞同：2
> 
> 时间：2012-07-17T21:24:45.720
> 
> 标签：mysql, database, performance, database-design

我有一个 MySQL 表来存储 >2MM 行和 8 列的用户统计信息以及用户 ID 上的索引。当用户访问他的个人资料时，会从数据库中检索到很多这些信息，导致 - 最坏的情况 -`SELECT`有时会与其他表连接几十个查询。它类似于 SO 上的配置文件，它也必须提取大量数据。

一些像获取用户分数的查询需要一个`COUNT`和其他性能消耗 MySQL 函数。因此，仅对个人资料页面的查询最多可能需要 10-20 秒。

现在我的问题：

1.  像 SO 这样的网站如何快速获取如此多的信息？
2.  我需要缓存层吗？
3.  我是否应该预先计算消耗 MySQL 性能的分数等？
4.  我应该使用一张写优化表和一张读优化表吗？如果是这样，我怎么能像在 SO 上那样检索实时数据？
5.  我应该离开 MySQL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:37:52.143

> > 像 SO 这样的网站如何快速获取如此多的信息？

它们给你一种提取“这么多”数据的错觉，但实际上它们一次只得到一个数据块。基本上，您需要一个查询来获取结果的 COUNT，并需要另一个查询来获取该结果集中任何页面的数据。结果集未缓存。查询的参数可能会被缓存。但最好以查询参数随每个页面请求一起提供的方式实现。

> > 我需要缓存层吗？

或许。但没有必要实现这一点。缓存对于存储以前获取的页面可能很有用，并且相同的页面被整个社区使用，而不是一个用户。

> > 我是否应该预先计算消耗 MySQL 性能的分数等？

与此用例无关。

> > 我应该使用一张写优化表和一张读优化表吗？如果是这样，我怎么能像在 SO 上那样检索实时数据？

不需要。

> > 我应该离开 MySQL 吗？

不需要。

有关此概念的更多详细信息，请查找分页 Ajax 网格

# android - 如何在android中的imageview中获取图像的x和y坐标？

> ID：11531109
> 
> 赞同：1
> 
> 时间：2012-07-17T21:25:05.927
> 
> 标签：android, image, imageview, coordinates

我陷入了这个问题。我有一个`imageView`并且我想只在图像内获得我的触摸位置。当我触摸超出图像时，我必须显示`x=0`和`y=0`。在这个应用程序中，我必须知道调整图像大小、缩放和旋转图像，这些功能是固定的，但我对图像的坐标只有图像内部有问题。

这是一个链接，我的意思是[链接](http://imageshack.us/photo/my-images/836/exampledz.png/)

这是我试图解决的同一个问题：[How to get Coordinates X,Y of Image after Zoom and Pan](https://stackoverflow.com/questions/9093429/android-how-to-get-coordinates-x-y-of-image-after-zoom-and-pan?s=d0f1ef64-d0d7-497b-aae8-824fe8027177#new-answer)

非常感谢。

翁德雷

这是我的代码：

```
public class Sample extends Activity{
        static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    Matrix matrix = new Matrix();
    Matrix savedMatrix = new Matrix();

    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;

    int[] location = new int[2];

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        final ImageView image = (ImageView) findViewById(R.id.mapView);

        final Bitmap icon = BitmapFactory.decodeResource(this.getResources(),
                R.drawable.mapa);
        image.setImageBitmap(icon);

        image.setOnTouchListener(new View.OnTouchListener()
        {

            public boolean onTouch(View v, MotionEvent event)
            {
                final ImageView view = (ImageView) v;

                switch (event.getAction() & MotionEvent.ACTION_MASK)
                {
                case MotionEvent.ACTION_DOWN:
                    savedMatrix.set(matrix);
                    start.set(event.getX(), event.getY());
                    mode = DRAG;
                    RectF r = new RectF();
                    matrix.mapRect(r);

                    break;
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG)
                    {
                        matrix.set(savedMatrix);
                        matrix.postTranslate(event.getX() - start.x,
                                event.getY() - start.y);
                    } else if (mode == ZOOM)
                    {
                        float newDist = spacing(event);
                        if (newDist > 10f)
                        {
                            matrix.set(savedMatrix);
                            float scale = newDist / oldDist;
                            matrix.postScale(scale, scale, mid.x, mid.y);
                        }
                    }
                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    if (oldDist > 10f)
                    {
                        savedMatrix.set(matrix);
                        midPoint(mid, event);
                        mode = ZOOM;
                    }
                    break;

                }

                // Perform the transformation
                view.setImageMatrix(matrix);
                return true;
            }
        });
    }

    private float spacing(MotionEvent event)
    {
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private void midPoint(PointF point, MotionEvent event)
    {
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    } 
```

main.xml 看起来像：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_gravity="right"
        android:adjustViewBounds="true"
        android:scaleType="matrix" >
    </ImageView>

</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:39:00.533

我真的不明白你在问什么，但无论如何我都会尝试回答。听起来您想使用 getRawX() 和 getRawY() 来获取屏幕上的触摸位置，而不是视图上的触摸位置。您可能还必须为 imageView 之外的任何内容覆盖 onTouchEvent 方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T21:30:05.833

看看

[http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent(android.view.MotionEvent) )

和

[http://developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)

# windows - MFC 按钮未显示为最顶部

> ID：11531110
> 
> 赞同：0
> 
> 时间：2012-07-17T21:25:08.670
> 
> 标签：windows, mfc

我有一个按钮向量，我想出现在两个对话框中。一些在我的当前窗口中，一个在当前窗口的父级中。我希望它们出现在最上面。

因此，对于当前窗口，它可以正常工作。对于父窗口，我设置了父窗口，按钮被正确定位，但它出现在另一个按钮后面。

我已经在设置 ​​SWP_NOZORDER：

```
std::vector<CGdipButtonEx*> m_trashIcons;
...
m_trashButtons[i]->SetWindowPos(nullptr,x,y,25,25,SWP_NOZORDER ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:32:31.137

要将按钮设置为显示在其他按钮上方，您需要将.`HWND_TOP`作为第一个参数传递`hwndInsertAfter`。

```
m_trashButtons[i]->SetWindowPos(HWND_TOP,x,y,25,25,SWP_SHOWWINDOW); 
```

不要过去`SWP_NOZORDER`。Z 顺序是窗口彼此重叠的顺序（z 轴）。那是你想要设置的东西，所以说“请不要z-order”是完全错误的事情。

根据文档：

> SWP_NOZORDER 0x0004 保留当前 Z 顺序（忽略 hWndInsertAfter 参数）。

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:38:41.373

窗口是分层的。如果您有两个对话框，它们都有控件，则上层对话框中的所有控件都将出现在下层对话框中的控件之上，即使下层对话框中的控件被标记为最顶层而上层对话框中的控件没有吨。

# objective-c - UIViewController 和 UITableViewCell 逻辑相同，如何维护一份源码？

> ID：11531113
> 
> 赞同：2
> 
> 时间：2012-07-17T21:25:21.040
> 
> 标签：objective-c, refactoring

正如标题所说，我在 UIViewController 和 UITableViewCell 之间共享相同的逻辑，它们将一些信息发送到服务器并进行一些计算。

我遇到的问题是，随着时间的推移，复制的代码会变大，但我不知道如何分解它，因为这些类是不同的对象，每个函数都调用实例变量。

哪个是重新分解代码的好方法，所以我不必每次都更改相同的代码两次？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:29:44.750

重构重复代码的最简单方法是从公共部分中创建一个方法。一个重要的问题是放在哪里。当对象相关时，可以将公共代码放在它们的共同祖先中；当它们不相关时，您可能会考虑创建一个仅包含类方法的辅助类，或者使用您的方法体定义一个 C 风格的独立函数。

如果对象不相关并且您需要使用它们的实例变量，则可能有机会提取公共对象。将复制代码所需的所有公共实例变量连同使用这些变量的代码一起移动到新的公共对象中。如果您从中提取公共部分的原始类中也需要变量，请根据需要添加 getter 和 setter。为提取的类创建一个 ivar，并使用其属性代替实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:59:25.977

您应该为服务器交互创建一个单独的类，如果涉及大量工作，甚至可以创建一个单独的类来处理来自服务器的数据。

根据 Apple 鼓励用于 iOS 开发的[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)设计模式，*视图*（例如 UITableViewCell）不应该做诸如向服务器发出请求和处理结果之类的事情。相反，您的*控制器*应该做这些事情并向您的视图提供必要的信息（即*模型）。*

例如，您可能有一个带有和`Server`等方法的类。它可以有一个随附的协议，其中包含一种方法，例如当您从服务器接收信息时。然后，您的视图控制器可以实例化一个对象并将自己设置为委托，然后在委托方法中进行必要的计算。在它向单元格提供一些信息后，您将该信息存储在某处，然后调用以更新单元格。`connect``sendData``ServerDelegate``server:didReceiveData:``Server``[tableView reloadRowsAtIndexPaths:...]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:57:26.840

在大多数情况下，最好将任何逻辑从`UITableViewCell`inclusive移出`UIViewController`。Cell 应该只负责显示数据。

# facebook - 用户未登录时如何使用 PHP SDK 持久化 signed_request？

> ID：11531114
> 
> 赞同：0
> 
> 时间：2012-07-17T21:25:23.443
> 
> 标签：facebook, facebook-php-sdk

我有一个不需要用户授权应用程序的应用程序选项卡。当标签首次加载时，我可以像这样访问签名请求：`$signed_request = $facebook->getSignedRequest();`

然后，该应用程序对服务器进行各种 AJAX 调用。对于每个 AJAX 调用，signed_request 不会被持久化。我希望 signed_request 在这些 AJAX 调用期间可用，这样我就可以再做`$signed_request = $facebook->getSignedRequest();`一次。

我读过当用户登录时，JS SDK 和 PHP SDK 通过 cookie 共享 signed_request。是否有一个我可以在初始页面加载期间设置的 cookie，它将在 AJAX 调用期间保持 signed_request，以便可以通过 PHP SDK 访问它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:29:19.577

> 对于每个 AJAX 调用，signed_request 不会被持久化。我希望在这些 AJAX 调用期间可以使用 signed_request，以便我可以执行 $signed_request = $facebook->getSignedRequest(); 再次。

你为什么不把它作为参数添加到你的 AJAX 调用中……？

你知道参数名称，你知道值——所以只要把它和你发送的其他数据一起放在那里。

# java - 获取列表的大小正在使我的程序崩溃

> ID：11531115
> 
> 赞同：0
> 
> 时间：2012-07-17T21:25:28.617
> 
> 标签：java, android, list, arraylist

它只是一个单行文件。

当我用其他东西（比如将它附加到一串空格）调用 .size() 时，它会吐出一些东西，那么为什么当我单独调用该函数时它会崩溃呢？

```
int pos =0;
List<List<String>> mine = new ArrayList<List<String>>();
while((nextLine = csvReader.readLine()) != null) {
    mine.add(pos,new ArrayList <String>());
    for (String token : nextLine.split(",")) {

        //get next token and store it in the list
        mine.get(pos).add(token); 
        //Toast.makeText(MainActivity.this,mine.size() + " " + mine.get(pos).size(), Toast.LENGTH_SHORT).show();
    }

    //Toast.makeText(MainActivity.this, " " + mine.get(pos).size(), Toast.LENGTH_SHORT).show(); //doesn't crash here

    //  mine_end= mine.get(pos).size(); //crash here

    pos ++;
} 
```

这是最新的错误堆栈跟踪：

07-17 15:52:44.987：E/wpa_supplicant(29035)：正在进行的扫描操作... 07-17 15:52:46.989：E/wpa_supplicant(29035)：正在进行的扫描操作... 07-17 15:52 ：48.991：E/wpa_supplicant（29035）：正在进行的扫描操作... 07-17 15:52:49.061：E/AndroidRuntime（1249）：致命异常：主要 07-17 15:52:49.061：E/AndroidRuntime（1249 ): android.content.res.Resources$NotFoundException: 字符串资源 ID #0x1 07-17 15:52:49.061: E/AndroidRuntime(1249): at android.content.res.Resources.getText(Resources.java:221) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 android.widget.Toast.makeText(Toast.java:284) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 com. jimmyc.summer.wificollection.MainActivity.match(MainActivity.java:137) 07-17 15:52:49.061: E/AndroidRuntime(1249): at com.jimmyc.summer.wificollection.MainActivity.access$2(MainActivity.java: 91) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 com.jimmyc.summer.wificollection.MainActivity$2$1$1.run(MainActivity.java:383) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 android。 os.Handler.handleCallback(Handler.java:587) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 android.os.Handler.dispatchMessage(Handler.java:92) 07-17 15:52: 49.061: E/AndroidRuntime(1249): 在 android.os.Looper.loop(Looper.java:130) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 android.app.ActivityThread.main(ActivityThread .java:3691) 07-17 15:52:49.061: E/AndroidRuntime(1249): at java.lang.reflect.Method.invokeNative(Native Method) 07-17 15:52:49.061: E/AndroidRuntime(1249) : 在 java.lang.reflect.Method.invoke(Method.java:507) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java：907) 07-17 15:52:49.061: E/AndroidRuntime(1249): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665) 07-17 15:52:49.061: E/AndroidRuntime( 1249): 在 dalvik.system.NativeStart.main(Native Method) 07-17 15:52:49.071: E/(306): Dumpstate > /data/log/dumpstate_app_error

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:29:53.137

很可能`mine.get(pos)`正在返回`null`，因此`NullPointerException`发生了 a 。确保您已初始化`pos`列表中的每个位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:37:36.773

这个错误是完全不相关的。我想我不应该使用 Toast 消息进行调试。在这种情况下，它影响了时间并让我相信 .size() 导致了错误。

# mongodb - 如何重新索引默认的 Mongo 索引？

> ID：11531120
> 
> 赞同：1
> 
> 时间：2012-07-17T21:25:58.390
> 
> 标签：mongodb, indexing, mongodb-indexes

好吧，我正在修复一个拥有 1 亿条记录的 MongoDB 集合。以前的开发人员用真正错误的东西覆盖了默认的_id。现在，当我修复它时，如何重新生成 _id 索引？除了 mongoRestore，还有什么更快的方法吗？

* * *

这是我的更新程序：

1）将数据库从原始数据库复制到另一个数据库。

2）删除所有记录的_id。

3）为所有记录重新生成_id（这就是我不知道该怎么做）

4）使用新的_id将集合复制回原始数据库（或者另一种方式是从新的/临时数据库中制作mongoDump，然后将文件发送到原始数据库，MongoRestore即（然后每条记录将具有新的_id。那方法可行，但似乎更慢。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:46:30.317

首次插入文档时，默认的 MongoDB '_id' 值由客户端的 MongoDB 驱动程序生成。它是使用当前时间、运行客户端的机器的主机名、客户端的进程 ID 以及用于区分同一进程的多个操作的递增值生成的。

有关详细信息，请参阅[http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification](http://www.mongodb.org/display/DOCS/Object+IDs#ObjectIDs-BSONObjectIDSpecification)

因此，除非您碰巧将我上面提到的所有信息作为条目存储在文档中，否则您无法重建原始默认 MongoDB '_id' 值。

此外，“_id”字段是不可变的——不能更改。我不确定之前的开发人员是如何覆盖 _id 字段的——我最好的猜测是他获取了文档，更改了 _id 字段的值，删除了旧的，然后插入了新的。

如果在执行 'mongodump' 之后，除了 '_id' 字段之外的文档内容没有改变，那么获取数据的最快方法是恢复该转储文件。

如果您的文档内容已更改，并且您希望保留这些更改，那么您需要执行与之前开发人员相反的操作：获取集合中的每个文档，使用您的本地驱动程序的工具创建一个新的ObjectID，删除旧文档并将数据保存为具有新_id的新文档。

# node.js - 在 Nodejs 中添加重复的 HTTP 响应标头

> ID：11531121
> 
> 赞同：0
> 
> 时间：2012-07-17T21:26:11.767
> 
> 标签：node.js, http-headers, httpresponse

我正在寻找在 Nodejs 的 http 响应中添加重复的 HTTP 标头，例如：

```
HTTP/1.1 206 Partial Content
Content-Length: 1234567
Content-Type: video/ogg
Content-type: multipart/byteranges; boundary=THIS_STRING_SEPARATES 
```

我使用的是 Nodejs 提供的 http 模块，当我发送响应头时，我只能定义一个“Content-Type”头：

```
var header = {};
header['Content-Type'] = "video/ogg"; 
```

或者

```
header['Content-Type'] = "multipart/byteranges; boundary=THIS_STRING_SEPARATES"; 
```

是否可以在响应中同时包含“Content-Type”？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T16:57:40.227

目前，这是 Node.js 本身的一个[未解决问题](https://github.com/joyent/node/issues/2750)。您可以通过使用一个带有逗号分隔值的 Content-Type、[使用这个 patch](https://raw.github.com/jolira/node-subversion-hub/master/lib/http-patch.js)或者如果可能的话，实现一个`X-Content-Type`标头来规避这种情况。多个`X-`标头值当前连接为一个。

# git - git diff master..foo 没有输出，但 foo 没有合并

> ID：11531126
> 
> 赞同：2
> 
> 时间：2012-07-17T21:26:39.583
> 
> 标签：git

如果一个分支没有完全合并，git diff 不应该给出一些输出吗？如何解释以下行为：

```
$ git branch
foo
* master

$ git diff master..foo

$ git br -d foo
error: The branch 'foo' is not fully merged.
If you are sure you want to delete it, run 'git branch -D foo'. 
```

那么如何才能知道 foo 中做了哪些我还没有合并到 master 中的工作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:36:10.670

```
git log master..foo 
```

将显示所有在 foo 中但不在 master 中的提交。

Git diff 本身只会显示实际跟踪文件的差异，这与历史记录不同。例如， foo 可能包含一些后来被反转的更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:24:29.263

两个分支可能不同但包含完全相同的内容。这是因为可能存在其他差异，例如不同的提交消息、时间戳、作者等，所有这些都有助于 git 用来确定提交是否等效的 SHA1 哈希。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:20:56.760

您想使用`git log`or ( `git rev-list`if scripting) 而不是 diff 来查看实际提交。

然而，话虽这么说，你的 diff 命令应该向你展示差异，除非你在 master 中做了与 foo 完全相同的工作，因为 2.x 之间的共同提交。

您可以通过以下方式快速查看所有分支如何链接

```
git --log --one-line --decorate --all 
```

或者

```
gitk --all 
```

`--all`否则，只需通过`foo master`在上面的示例中替换为来指定您想要查看的历史记录。

一旦您

```
git merge foo 
```

你将能够

```
git branch -d foo 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T23:33:47.323

您可能正在寻找[`git show-branch`command](http://www.kernel.org/pub/software/scm/git/docs/git-show-branch.html)。

`git show-branch master foo`将列出*foo*上所有不在*master上的提交，以及**master*上所有不在*foo*上的提交。

输出格式一开始可能有点混乱，因此值得阅读[手册页的输出部分](http://www.kernel.org/pub/software/scm/git/docs/git-show-branch.html#_output)。

# ruby-on-rails - 是否可以根据当前语言环境在 Rails 中进行验证

> ID：11531127
> 
> 赞同：1
> 
> 时间：2012-07-17T21:26:56.027
> 
> 标签：ruby-on-rails, ruby, validation, internationalization

我正在开发一个双语 Rails 应用程序。我有一个模型`Application`，它代表某个课程的申请人（如果有人想参加，他/她填写申请表，并保存到数据库中）。问题是，表格在英语和克罗地亚语中看起来应该有点不同（这是两种语言）。为此，我通常必须使用表格，但差异非常小，所以我不想这样做。

因此，这意味着我必须根据申请人是提交克罗地亚语表格还是英文表格进行不同的验证。有没有办法我可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:12:54.933

您可以使用`if`or`unless`选项进行验证

```
validates :something, presence: true, if: ->(){ language == "en" } 
```

`language`可以是模型中定义的虚拟属性，您可以在表单参数中传递

# c# - .Net 中的计时器和循环是否准确？

> ID：11531128
> 
> 赞同：2
> 
> 时间：2012-07-17T21:26:58.163
> 
> 标签：c#, .net, loops, timer

在开发程序计算555定时器IC产生的脉冲的频率和脉冲宽度时，通过PC并行端口到达PC。我注意到每次运行代码时都会显示不同的值，因此我开始测试循环和计时器的准确性。我已经运行了以下代码并指出它们不准确（我可能错了，如果我错了，请纠正我！）：

**对于计时器：**

```
 int sec = 0;
    private void button2_Click(object sender, EventArgs e)
    {
        sec = DateTime.Now.Second;
        i = 0;
        timer1.Enabled = true;
    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        if (sec == DateTime.Now.Second)
        {
            i++;
        }
        else
        {
            timer1.Enabled = false;
            MessageBox.Show(i.ToString(),"Timer Output");
        }
    } 
```

**输出：** 应该相同，但是：

![在此处输入图像描述](../Images/adcfe9f9bfc112d002641f48ef1ab536.png) ![在此处输入图像描述](../Images/dab84077e775fcad5bf8c5353ede07c8.png) ![在此处输入图像描述](../Images/5af527f15adf48c5b94c9ad4f35ca997.png)

**对于循环：**

```
 private void button1_Click(object sender, EventArgs e)
    {
        i = 0;
        CheckForIllegalCrossThreadCalls = false;
        Thread t1 = new Thread(LoopTest);
        t1.Start();
    }

    void LoopTest()
    {
        System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();
        sw.Start();
        this.Cursor = Cursors.WaitCursor;
        while (true)
        {
            if (sw.ElapsedMilliseconds != 1000)
            {
                i++;
            }
            else
            {
                break;
            }
        }
        sw.Stop();
        this.Cursor = Cursors.Default;
        MessageBox.Show(i.ToString(), "Loop Output");
    } 
```

**输出：** 应该相同，但是：

![在此处输入图像描述](../Images/cbcca1ff477d5ddf56d1a61b75784a3c.png) ![在此处输入图像描述](../Images/875d5040148776264f667d255ec8dde4.png) ![在此处输入图像描述](../Images/11f58f581263e28358c356351b197953.png)

> 我应该怎么做才能使循环和计时器准确，有什么办法吗？或者我必须去复杂的C代码和DOS？

我认为这是在这个问题中得到错误值的基本原因：[Count Parallel port input frequency - C#](https://stackoverflow.com/questions/11499113/count-parallel-port-input-frequency-c-sharp)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T21:32:57.720

1）不要`DateTime.Now`用于性能测量，使用`StopWatch`.

2）“ `OUTPUT: Should be same, but ..`”

他们为什么要这样做？您正在非 RTOS（实时操作系统）上运行托管/JIT 代码。如果操作系统愿意，您的代码可以随时被退回。是什么让你相信在这种环境中运行相同的代码 N 次应该总是在如此小的程度上产生相同的结果？

3) Windows 上的定时器的分辨率约为 15 毫秒。对于非常准确的计时，最好的选择是支持它的系统（CPU）上的 HighPerformanceTimer API。你甚至没有向我们展示计时器的时间间隔。

您在这里没有考虑许多变量，并且您的预测基于错误的假设。您甚至测量此代码多少次？您是否考虑了第一次编译所需的时间？你在发布模式下运行吗？通过VS？有很多任务在后台运行吗？我可以继续。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-18T08:44:18.523

一个仔细的实现允许在大多数 Windows 平台上测量时间段，精确到几微秒。请注意以下事实：

1.  Windows 不是实时操作系统：这无关紧要！

2.  利用进程/线程优先级：[SetPriorityClass](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686219%28v=vs.85%29.aspx)最高`REALTIME_PRIORITY_CLASS`和[SetThreadPriority](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686277%28v=vs.85%29.aspx)最高`THREAD_PRIORITY_TIME_CRITICAL`. 确保有安全的代码，因为这些优先级可以在调用线程忙时锁定系统。（Process.PriorityClass 和 Thread.Priority 不太能够将优先级提高到所需的级别。）

3.  可能通过[多媒体定时器](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743612%28v=vs.85%29.aspx)增加系统中断周期和时间更新间隔。（有各种[.NET 项目](http://www.codeproject.com/Articles/98346/Microsecond-and-Millisecond-NET-Timer)封装了这些多媒体计时器功能。）

4.  在多核系统上，核的选择也会影响精度。强制等待计时器事件的线程在处理器 0 上等待是有利的。SetThreadAffinityMask函数允许将[线程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686247%28v=vs.85%29.aspx)绑定到特定的 cpu。（对于 .Net 应用程序，请参阅[Thread.ProcessorAffinity](https://stackoverflow.com/questions/2510593/how-can-i-set-processor-affinity-in-net)。）

5.  使用[QueryPerformanceCounter](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644904%28v=vs.85%29.aspx)和[QueryPerformanceFrequency](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx)作为高频时间测量的资源。（对于 .Net 应用程序，请参阅：[创建 QueryPerfCounter 包装类](http://msdn.microsoft.com/en-us/library/ff650674.aspx#scalenethowto09_topic1)）

6.  确保校准了性能计数器频率的值。由偏移和一些热漂移返回的值`QueryPerformanceFrequency`偏离观察值。这可能/将引入许多我们/秒的错误。请参阅[Windows 时间戳项目](http://www.windowstimestamp.com/description)以了解如何进行此类校准。

并且：是的，您可能需要进行一些硬编码。但是在windows平台上可以观察到微秒级的计时非常可靠。

注意：Windows 不是实时操作系统。但是 Windows 上可用的计时器非常精确。他们完全按照他们应该做的事情去做，并且以非常高的准确性去做。有很多关于 Windows 计时器及其准确性的抱怨的事实是，它们的行为很大程度上取决于底层硬件。这也是文档有很多缺陷的原因。强烈建议对硬件进行诊断，以便找到各个时间服务功能。不幸的是，这会导致任何程序都有一些额外的代码行与平台无关。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-17T21:34:20.873

首先，您不知道调用 button2_click 时的当前时间有多远。因此，显示 MessageBox 时剩下多少秒基本上是随机的——这就是您所看到的。

其次，一个循环在一段时间内获得多少 CPU 周期与准确性无关。

任何给定线程获得多少周期取决于系统中发生的其他事情。如果系统决定一大堆周期需要转到另一个进程，那么您的线程将“饿死”一段时间。

也许你可以详细说明你真正想做的事情，有人可以提供一些建议。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T23:15:05.533

Ed 的回答是正确的：Windows 上的计时器不准确。好吧，肯定不够准确，无法测量硬件生成的信号。

但是，如果我必须测量频率和脉冲宽度，我会取一百个左右的样本并取平均值。也许像这样：

```
private StopWatch _Sw = new StopWatch();
private List<TimeSpan> _Samples = new List<TimeSpan>();
private Timer _Timer = new Timer(TimerTick, TimeSpan.FromSeconds(1));
private const int RequiredSamples = 100;

private void StartSampling()
{
    // You can change this next line to PriorityClass.RealTime if you're careful.
    System.Diagnostics.Process.GetCurrentProcess().BasePriority 
                              = PriorityClass.High;
    _Samples.Capacity = RequiredSamples;
    _Timer.Start();
    _Sw.Start();
    Hook555Timer(On555Pulse);
}

private void On555Pulse(object sender, EventArgs e)
{
    _Sample.Add(_Sw.Elapsed);
}

private void TimerTick(object sender, EventArgs e)
{
    if (_Samples.Count > RequiredSamples)
    {
        System.Diagnostics.Process.GetCurrentProcess().BasePriority 
                                    = PriorityClass.Normal;
        _Timer.Stop();
        _Sw.Stop();
        UnHook555Timer(On555Pulse);

        // You can now use the time between each TimeSpan 
        // in _Samples to determine statistics about your timer.
        // Eg: Min / Max duration, average and median duration.
        var durations = _Samples
                .Zip(_Samples.Skip(1), 
                    (a,b) => new { First = a, Second = b } )
                .Select(pair => pair.Second.Subtract(pair.First));
        var minTime = durations.Min(ts => ts.TotalMilliseconds);
        var maxTime = durations.Max(ts => ts.TotalMilliseconds);
        var averageTime = durations.Average(ts => ts.TotalMilliseconds);
        // I don't think LINQ has a Median() aggregate out of the box.
        // Some comment about "an exercise for the reader" goes here.
        var medianTime = durations.Median(ts => ts.TotalMilliseconds);

        var frequency = _Samples.Last()
                                 .Subtract(_Samples.First())
                                      .TotalSeconds / _Samples.Count;
    }
} 
```

（注意：用记事本编写的代码，如果不进一步修改就不可能工作）

我的精度现在由`StopWatch`而不是由确定`Timer`（请注意，在您的系统上`Stopwatch`可能不会比 a 更精确`Timer`，请检查`Frequency`and`IsHighResolution`属性）。而且我在采样期间提高了进程的优先级，以尽量减少其他进程抢占我的进程。

但即便如此，由于 Windows 不是 RTOS，您能做的最好的事情就是采集大量样本并使用一些统计数据来获得答案的近似值。

# javascript - 向对象原型添加命名空间方法

> ID：11531130
> 
> 赞同：0
> 
> 时间：2012-07-17T21:27:24.677
> 
> 标签：javascript

我正在尝试将命名空间方法添加到 javascript 中的对象原型。

我希望能够做到的是：

```
var myObj = {}
myObj.namespace('nested.objects.are.created.if.not.present') 
```

但我迷路了。做一个泛型函数似乎很容易，但不将它添加到原型中。

这是我所拥有的：

```
Object.prototype.namespace = function(ns_string) {
    var parts = ns_string.split('.');
    var parent = this;
    var i;
    var length = parts.length
    for (i = 0; i < length; i++) {
        // Create a property if it doesnt exist
        if (typeof parent[parts[i]] === "undefined") {
            parent[parts[i]] = {};
        }
        parent = parent[parts[i]];
    }
} 
```

似乎每次都没有正确设置 parent 的值。我确定它是我缺少的一些非常基本的东西，但我不确定它是什么。

提前致谢。

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:42:03.863

好吧，首先，正如 Onkelborg 所说，这不是一个好主意（我什至会说这是一个非常糟糕的主意）。向核心对象的原型添加属性只是自找麻烦。假设您添加了此方法，并且您网站上的一些代码（可能是您的，可能来自库）执行以下操作：

```
for (var key in {foo: 'bar'}) {
    // How many times will this iterate?
} 
```

该循环*应该*只迭代一次，将 'foo' 作为键。但实际上它会循环两次，因为您的“命名空间”属性将显示为属性。

话虽如此，如果你真的想这样做，你的基本代码应该可以工作。唯一可能弄乱的值`parent`是 if`this`是关闭的，并且要发生这种情况，您必须使用不同的“this”、使用`foo.namespace.call(bar)`或类似的东西来调用该方法。

如果您不使用`call`（或它的兄弟，`apply`）一切都应该工作。

# javascript - 如何从网站上的所有单个页面标题中删除不需要的混乱？

> ID：11531132
> 
> 赞同：1
> 
> 时间：2012-07-17T21:27:26.663
> 
> 标签：javascript, greasemonkey

我正在使用的论坛首先具有站点的长名称，然后是标题中线程的页面名称。所以，我只能在浏览器选项卡中看到线程名称的前 2 个字符。

我使用了这个[“更改页面标题”脚本](http://userscripts.org/scripts/show/24034)，但它一次只更改一个页面的标题。如何删除所有页面标题栏上的 superlongwebsitename？

我想更改它，因此当我进入网站上的*任何*页面时，它只显示线程名称（上述脚本需要每个单独页面的条目）。

对于这样的 HTML：

```
<meta name="description" content="superlongsitename / threadname" />
<title>superlongsitename / threadname</title> 
```

我希望脚本在给定站点的所有页面中查找并删除“superlongsitename”。

我试过这个：

```
newString = str.replace("Tarantula&nbsp;- Sekiz Bacakli Güzeller /", ) 
```

但它没有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:29:51.487

该站点使用 unicode 字符，有时需要在[正则表达式](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)中进行特殊处理。但是，幸运的是，该站点方便地将所有杂乱无章的内容放在斜线字符 ( `/`) 之前。

因此，您可以使用正则表达式`/^[^\/]+\/\s*/`来捕捉它。

这是一个修复标题的**完整脚本**：

```
// ==UserScript==
// @name        _Tarantula, smarter, less cluttered title.
// @namespace   tarantula.gen
// @include     http://www.tarantula.gen.tr/forum/*
// @include     https://www.tarantula.gen.tr/forum/*
// ==/UserScript==

//--- Delete everything before the first slash (/).
var newTitle    = document.title.replace (/^[^\/]+\/\s*/, "");
document.title  = newTitle; 
```

# sql-server - 如何在 sql server 中将数据库表结构转换为 XML 文件？

> ID：11531136
> 
> 赞同：3
> 
> 时间：2012-07-17T21:27:35.277
> 
> 标签：sql-server, sql-server-2008, tsql

如何将表架构转换为 XML 格式？格式如下。

```
<Tables>
  <Table>
    <Name>courses</Name>
    <Schema>dbo</Schema>
    <Columns>
      <Column>
        <Name>id</Name>
        <DataType>int</DataType>
     </Column>
     <Column>
       <Name>page_name</Name>
       <DataType>nvarchar</DataType>
       <Length>50</Length>
     </Column>
    </Columns>
  </Table>
  <Table>
    <Name>course_details</Name>
    <Schema>dbo</Schema>
    .....
    .....
  </Table>
</Tables> 
```

我能够分别生成列和表的结构。但我想合并两者。这怎么可能？我的 SQL 脚本

**对于表：**

```
SELECT
Distinct
TABLE_NAME as Name,
TABLE_SCHEMA as [Schema]
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA='dbo'
ORDER BY TABLE_NAME ASC
For XML PATH ('Table'),
Root('Tables') 
```

**对于列：**

```
SELECT
Column_Name as Name,
DATA_TYPE as DataType,
CHARACTER_MAXIMUM_LENGTH as [Length]
FROM INFORMATION_SCHEMA.COLUMNS
For XML PATH ('Column'),
Root('Columns') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T17:15:16.327

相同的查询，但看起来更好：

```
SELECT TABLE_NAME as '@Name',        
(
    SELECT Column_Name as '@Name',
            DATA_TYPE as '@DataType',
            case data_type 
                when 'nvarchar' 
                then CHARACTER_MAXIMUM_LENGTH 
                when 'varchar'  
                then CHARACTER_MAXIMUM_LENGTH
                else null 
            end  as '@Length',
            IS_NULLABLE AS '@IsNullable'

    FROM INFORMATION_SCHEMA.COLUMNS 
    where INFORMATION_SCHEMA.COLUMNS.TABLE_NAME = 
        INFORMATION_SCHEMA.TABLES.TABLE_NAME
    order by INFORMATION_SCHEMA.COLUMNS.ORDINAL_POSITION
    For XML PATH ('Column'), type
)

FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA='dbo'
ORDER BY TABLE_NAME ASC  
For XML PATH ('Table'),Root('Tables') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T15:14:28.203

您需要使用FOR XML PATH的**TYPE**
参数。 像这样：

```
SELECT  TABLE_NAME      as name,
        TABLE_SCHEMA    as [schema],
        (
            SELECT Column_Name as Name,
                    DATA_TYPE as DataType,
                    CHARACTER_MAXIMUM_LENGTH as [Length]
            FROM INFORMATION_SCHEMA.COLUMNS
            For XML PATH ('Column'),root('columns'), type
        )
FROM INFORMATION_SCHEMA.TABLES
WHERE TABLE_SCHEMA='dbo'
ORDER BY TABLE_NAME ASC
For XML PATH ('Table'),Root('Tables') 
```

# c# - 在 VS 2010 中创建 com 类包装器

> ID：11531138
> 
> 赞同：-1
> 
> 时间：2012-07-17T21:27:58.580
> 
> 标签：c#, visual-studio-2010

在 VS 2010 中开发时，有没有办法可以创建一个 com 类包装器？如果是这样，我如何添加对 COM 类型库的引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:33:07.627

如果您只想要一个通用的编组包装器（例如，没有逻辑，只是编组类型），这里有 2 种方法：

1.  右键单击您的项目，单击“添加引用”，选择最左侧的“COM”部分，然后搜索您要导入的库。
2.  使用[TLBIMP.EXE](http://msdn.microsoft.com/en-us/library/tt0cf3sx%28v=vs.100%29.aspx)创建一个包装类并将其添加到您的项目中。

# javascript - Chrome 扩展程序 sendMessage

> ID：11531139
> 
> 赞同：4
> 
> 时间：2012-07-17T21:28:02.823
> 
> 标签：javascript, google-chrome, google-chrome-extension, sendmessage

这里的文档看起来很糟糕：[http ://code.google.com/chrome/extensions/messaging.html](http://code.google.com/chrome/extensions/messaging.html)

我想要我的内容脚本，如果页面上有一个文本区域，只是显示一个 pageIcon。

我的 content.js（使用 jquery）这样做：

```
$('textarea').each(function() {
    chrome.extension.sendMessage({greeting: "hello"}, function(response) {
       console.log(response);
    });
}); 
```

然后我的 background.js 有这个：

```
chrome.extension.onMessage.addListener(

    function(request, sender, sendResponse) {
        chrome.pageAction.show(sender.tab.id);
    } 
}); 
```

这应该非常简单。如果有文本区域，则显示图标。

我已经尝试了示例代码的各种变体，但没有任何效果。我得到的只是：

> 端口错误：无法建立连接。接收端不存在。

在控制台中。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-17T18:41:32.463

我认为您在后台脚本中有一个额外的大括号。

```
chrome.extension.onMessage.addListener(

    function(request, sender, sendResponse) {
        chrome.pageAction.show(sender.tab.id);
    } 
}); 
```

应该

```
chrome.extension.onMessage.addListener(

    function(request, sender, sendResponse) {
        chrome.pageAction.show(sender.tab.id);
    } 
); 
```

# jquery-ui-tabs - Ajax.BeginForm 将 Json 数据传回 Jq UI 选项卡

> ID：11531143
> 
> 赞同：1
> 
> 时间：2012-07-17T21:28:27.850
> 
> 标签：jquery-ui-tabs, ajax.beginform

我试图让 Ajax.BeginForm 调用一个函数，然后将其传递回序列中的最终选项卡并从那里附加一个表。

这将是基本的局部视图......

```
<script type="text/javascript">
    $(function () {
        $("#searchPatient").tabs();
    });
    function switchToResultTab(data) {
        $('a[href="#retTable"]').click();
        debugger;
        $("#list").setGridParam({
            datatype: 'jsonstring',
            datastr: data,
            caption: 'Patient Search Result'
        }).trigger("reloadGrid");
    };

    function failToTab(data) {
        alert("");
        $("list").setGridParam({
        datatype:'jsonstring',
        caption: 'Patient Search Result',
        datastr:data
        }).trigger("reloadGrid");
    };
</script>
<div id="searchPatient" style="display:inline; float:inherit; width:100%">
    <ul>
        <li><a href="#searchByMRN">Search By MRN</a></li>
        <li><a href="#searchByDemographics">Search By Demo</a></li>
        <li><a href="#retTable">Return Table</a></li>
    </ul>
    @Html.Partial("_SearchByMRN")
    @Html.Partial("_SearchByDemographic")
    @Html.Partial("_RetTable")

</div> 
```

这就是我异步调用函数的方式......此时一切正常......

```
@using(Ajax.BeginForm("SearchByDemographic",
                            "SearchPatients",
                            null,
                            new AjaxOptions{
                                HttpMethod = "POST",
                                InsertionMode = InsertionMode.Replace,
                                LoadingElementId = Url.Content("~/Images/ajax-loader.gif"),
                                UpdateTargetId = "retTable",
                                OnSuccess = "switchToResultTab(data)",
                                OnFailure = "FailToTab"
                            }, 
                                new{
                                    id = "formSearchByMRN"
                                }
                            )
              ) 
```

完成此操作后，我希望调用 onSuccess... 中列出的 switchToResultTab 函数...该函数位于已调用 .tabs() jquery 方法的部分脚本中。唯一的问题是我从来没有进入过那个功能？我从来没有点击过调试器，所以这告诉我正在发生一些事情，我从来没有调用过那个函数......我做错了什么？

**更新：我正在调试这个东西，我试图弄清楚发生了什么** 好的，所以我一直在调试这个东西，似乎我的 jquery 函数永远不会激活。看来我的表单正在执行实际提交而不是 ajax 提交。到目前为止，这是我可以推测的。我完全不知道为什么会这样。 **继续** **更新：尝试了一些不同的事情** 次要更新...在与 Ajax.BeginForm 苦苦挣扎之后，我回到了我尝试过且真实的 Html.BeginForm 方法并编写了自己的 jquery 函数...

```
$('#searchByDemographics').submit(function () {//#formSearchByMRN, 
    if ($(this).valid()) {
        $.ajax({
            url: this.action,
            type: this.method,
            data: $(this).serialize(),
            success: function (result) {
                $('#retTable').html(result);
                switchToResultTab(result);
            }
        });
    }
    return false;
}); 
```

在这两种情况下，当我走到这一步时，似乎不知何故我的 Jquery 库已不再加载...它必须以某种方式与我已加载的其中一个 jquery 库发生冲突...也许我在最后一个选项卡上加载了 jqgrid 的事实导致某种冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T11:50:41.943

在您的`AjaxOptions`中，尝试替换：

```
OnSuccess = "switchToResultTab(data)" 
```

和：

```
OnSuccess = "switchToResultTab" 
```

还要确保您已将`jquery.unobtrusive-ajax.js`脚本包含在您的页面中，否则`Ajax.BeginForm`将像普通形式一样：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

# google-apps-script - .setValue() 和 .setText() 中字符串编码行为的 createHidden() 和 createTextBox() 问题

> ID：11531145
> 
> 赞同：2
> 
> 时间：2012-07-17T21:28:57.473
> 
> 标签：google-apps-script

我发现我认为是`createHidden().setValue()`. 我正在使用隐藏框将信息传递给处理函数。当字符串中有一个 & 时，编码完成，而不是预期 - 由我。

```
var test = '[[12060,"Crédit R&D à recevoir"]]';
var hidden = app.createHidden().setId('z').setName('z').setValue(test); 
```

当我读回数据时

```
[[12060,&quot;Crédit R&amp;D à recevoir&quot;]] 
```

它基本上会在以后引起问题`Utilities.jsonParse()`。

现在没有 &

```
var test = '[[12060,"Crédit RD à recevoir"]]';
var hidden = app.createHidden().setId('z').setName('z').setValue(test); 
```

当我读回数据时，这就是我所期望的 - 意味着没有编码：

```
[[12060,"Crédit RD à recevoir"]] 
```

现在，如果我做同样的`app.createTextBox().setText(test);`事情，即使使用 &，我也没有任何编码导致问题。我将返回`[[12060,"Crédit R&D à recevoir"]]`& 未编码。

这是我不知道的错误或功能/行为`createHidden.setValue()`吗？

谢谢，如果有人能为我澄清这个让我放松了一个小时的谜团！

**更新**：我向谷歌报告了这个问题，它正式是一个错误 - 请参阅[问题 1576](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1576)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T00:25:45.900

Google 接受了这个问题作为要修复的新错误 - 请参阅[问题 1576](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1576)。所以同时，我们应该使用`createTextBox().setText()`没有HTML编码问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T04:18:34.420

请参阅[问题 1115](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1115)。它说它是在今年三月修复的。你可以在那里报告你的发现

# c# - C# 比较 URL 文件和本地文件

> ID：11531146
> 
> 赞同：0
> 
> 时间：2012-07-17T21:28:58.817
> 
> 标签：c#, file, url, compare, filecompare

**大家好，我是 C# 新手，我不知道如何执行以下代码

我需要编写一个代码来验证来自服务器（URL）的 30 个文件和来自客户端（文件夹）的 30 个文件

然后逐字节比较它们，如果客户端（文件夹）文件被更改/更改/删除，然后下载服务器文件……就是这样……你能帮我吗？我使用了这段代码，但没有用...URI 不支持错误**

我的代码在这里：[http ://codeupload.com/6192](http://codeupload.com/6192)

如果您有任何其他可能对我有帮助的好主意，请在此处发布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:34:12.017

要逐字节比较它们，您必须下载对象。如果您不想在不从服务器下载文件的情况下比较它们，则必须使用服务器端脚本。例如，创建一个简单的 php 脚本，为文件创建 MD5 哈希值（文件名在 url 中提供），下载 MD5 文件并将其与本地文件的 MD5 哈希值进行比较。如果它们不同，请下载真实文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:44:13.443

`WebClient.DownloadData`您应该使用方法 (http://msdn.microsoft.com/en-us/library/ms144188.aspx)下载每个文件。

然后您将获得一个字节数组，您必须将其与本地文件字节数组进行比较（使用`File.ReadAllBytes()`- [http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)）

# ios - UITableViewCell 中的较大图像？

> ID：11531148
> 
> 赞同：1
> 
> 时间：2012-07-17T21:29:05.690
> 
> 标签：ios, uitableview

在我的应用程序中，我有一个表格，其单元格包括标题、副标题、图像和披露指示符。一切都相当沼泽标准，所以一个通用`UITableViewCell initWithStyle:UITableViewCellStyleSubtitle`的伎俩。除了图像非常小，小到几乎无法使用的地步。（我用这些来显示照片缩略图，你甚至无法分辨照片是什么！）

我已经尝试实现`- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath`并设置更大的尺寸，这确实使单元格更高；但是它不会影响图像的大小。

有没有办法让标准`UITableViewCell`更高和更大的图像，或者我需要制作一个自定义子类`UITableViewCell`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:39:03.293

您应该能够遍历每个单元格的子视图`-cellForRowAtIndexPath:`并重置 imageView 的大小。

在`-cellForRowAtIndexPath:`

```
for(UIView* view in cell.subviews) {
    if([view isKindOfClass:[UIImageView class]]) {
        [view setFrame:yourNewBiggerFrame];
    }
} 
```

如果将其与 结合使用`-heightForRowAtIndexPath:`，您应该能够调整单元格及其图像视图的大小。

编辑：

正如**H2CO3**指出的那样，上述方法有点冗长且不必要。`imageView`简单地使用单元格的属性并更改*其*框架会更清洁且更具前瞻性。所以你得到：

```
[cell.imageView setFrame:yourNewBiggerFrame]; 
```

比循环遍历所有单元格的子视图要干净得多！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:41:41.900

```
[cell.imageView setFrame:yourFrameHere]; 
```

我想目前，由于单元格样式，图像的大小与单元格的大小成正比。这就是为什么当您使单元格变大时 imageView 会变大的原因。希望这可以帮助。

干杯!

# pentaho - 在 Pentaho 报表设计器中使用查询指定 API 中的数据源

> ID：11531149
> 
> 赞同：1
> 
> 时间：2012-07-17T21:29:10.917
> 
> 标签：pentaho, pentaho-report-designer

我是 Pentaho 报告的新手。我有一个关于指定 DataSource 的问题。有没有办法使用 Java 中的 API 指定数据源，并通过报表设计器在 .prpt 文件中指定查询？我希望能够在设计器中创建报告并使用测试数据源进行预览。但是我想在通过我的 web 应用程序部署时指定不同的连接/数据源。因此，我想从设计器中覆盖的唯一一件事是使用哪个连接，但使用报表设计器中指定的相同查询。

# regex - 为什么这个匹配过去'不是逗号'？

> ID：11531151
> 
> 赞同：1
> 
> 时间：2012-07-17T21:29:40.653
> 
> 标签：regex

我有一个字符串，如下所示：

```
"1132","Fredricks, Ben","Boulder,         CO","x755593" 
```

我有以下我认为不应该匹配的正则表达式：

```
^"\d+",".*?","[^,]+" 
```

但它匹配整个字符串。这不应该`[^,]+`意味着，我认为“匹配所有不是逗号的东西，直到引号......导致匹配失败？它遇到了一个我认为会使其不匹配的逗号。

我想我的问题是......为什么这样匹配？我试图在第三组引号中找到没有逗号的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:33:59.180

`?`in`.*?`只会使匹配不*贪心*。没有它，模式将尽可能多地捕获，同时仍然匹配其余部分。添加它可能是为了避免在 a 中出现该模式匹配，`"`但它并不能*阻止*它。如果您查看捕获的字符串（如果您匹配`"(\d+)"`等，则`$1`包含匹配项），您会发现您的`.*?`匹配项比您预期的要多得多（多个字段）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:36:54.743

### 改用区间表达式

如果您只是尝试捕获记录的前三个字段，则以下内容将起作用：

```
^"\d+"(,"[^"]+?"){2} 
```

例如：

```
$ echo '"1132","Fredricks, Ben","Boulder,         CO","x755593"' | 
    pcregrep --only-matching '^"\d+"(,"[^"]+?"){2}'
"1132","Fredricks, Ben","Boulder,         CO" 
```

# maven - 使用 maven-bundle-plugin 的所有资源

> ID：11531152
> 
> 赞同：4
> 
> 时间：2012-07-17T21:29:41.180
> 
> 标签：maven, osgi, maven-bundle-plugin

作为能够快速过渡到 OSGi 的临时措施，我需要创建一个包含所有库的单个 jar。我所做的是将所有 jar 库放在 src/main/resources 中，以便它们最终位于创建的 jar 的根目录中。我遇到的问题是告诉 maven-bundle-plugin 导出 jar 中的所有包。所以基本上，我想将我所有的库暴露给其他 OSGi 包

这是我在 POM 中尝试的第一件事

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <configuration>
                <instructions>
                    <Export-Package>*</Export-Package>
                    <Bundle-Name>${project.artifactId}</Bundle-Name>
                    <Bundle-Version>${project.version}</Bundle-Version>
                </instructions>
            </configuration>
        </plugin>
    </plugins>
</build>` 
```

我试图导出所有的东西。但似乎唯一像这样导出的是两个 osgi 依赖项，而不是资源中的 jars

我有一百多个库，所以我试图找到一种自动填充`<Export-Package>`指令的方法，而不是手动添加每个库的包。不知何故，eclipse在插件开发环境中做到了，但我需要使用maven来做到这一点。捆绑插件可以做到这一点吗？如果罐子被添加到`<Bundle-ClassPath>`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-22T19:05:06.127

您必须将 jars 作为依赖项添加到 pom.xml 中，然后在**<build>**标记中为 maven-bundle-plugin 使用以下公式：

```
<plugin>
    <groupId>org.apache.felix</groupId>
    <artifactId>maven-bundle-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
        <manifestLocation>META-INF</manifestLocation>
        <instructions>
            <Bundle-SymbolicName>${project.artifactId}</Bundle-SymbolicName>
            <Bundle-Version>${project.version}</Bundle-Version>
            <Export-Package>*</Export-Package>
            <Bundle-Activator>your.activator.package.Activator</Bundle-Activator>
            <Embed-Dependency>*;scope=compile|runtime</Embed-Dependency>
            <Embed-Directory>target/dependency</Embed-Directory>
            <Embed-StripGroup>true</Embed-StripGroup>
            <Embed-Transitive>true</Embed-Transitive>
        </instructions>
    </configuration>
</plugin>

<plugin>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
        <execution>
            <id>copy-dependencies</id>
            <phase>package</phase>
            <goals>
                <goal>copy-dependencies</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

还要添加以下内容以使一切都与 m2e 一起工作：

请参阅：[m2e 不支持 maven-dependency-plugin（目标“copy-dependencies”、“unpack”）](https://stackoverflow.com/questions/8706017/maven-dependency-plugin-goals-copy-dependencies-unpack-is-not-supported-b)

```
<pluginManagement>
    <plugins>
        <!-- Ignore/Execute plugin execution -->
    <plugin>
            <groupId>org.eclipse.m2e</groupId>
            <artifactId>lifecycle-mapping</artifactId>
            <version>1.0.0</version>
            <configuration>
                <lifecycleMappingMetadata>
                    <pluginExecutions>
                        <!-- copy-dependency plugin -->
                        <pluginExecution>
                <pluginExecutionFilter>
                                <groupId>org.apache.maven.plugins</groupId>
                                <artifactId>maven-dependency-plugin</artifactId>
                                <versionRange>[1.0.0,)</versionRange>
                                <goals>
                                    <goal>copy-dependencies</goal>
                                </goals>
                            </pluginExecutionFilter>
                            <action>
                                <ignore />
                            </action>
                        </pluginExecution>
                    </pluginExecutions>
                </lifecycleMappingMetadata>
            </configuration>
        </plugin>
    </plugins>
</pluginManagement> 
```

还要添加以下内容以使其与 Eclipse PDE 一起使用（取自[Apache Felix 网站](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html#ApacheFelixMavenBundlePlugin%28BND%29-Eclipse/PDEintegration)）：

```
<profiles>
    <profile>
        <activation>
            <property>
                <name>m2e.version</name>
            </property>
        </activation>
        <properties>
            <osgi-version-qualifier>qualifier</osgi-version-qualifier>
        </properties>
        <build>
            <pluginManagement>
                <plugins>
                    <plugin>
                        <groupId>org.apache.felix</groupId>
                        <artifactId>maven-bundle-plugin</artifactId>
                        <configuration>
                            <!-- PDE does not honour custom manifest location -->
                            <manifestLocation>META-INF</manifestLocation>
                        </configuration>
                    </plugin>
                </plugins>
            </pluginManagement>
        </build>
    </profile>
</profiles> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:16:03.707

根据 bundle 插件的[文档](http://felix.apache.org/site/apache-felix-maven-bundle-plugin-bnd.html)，您可以使用`{local-packages}`，这将扩展到项目中的所有包。

**然而，这是一个非常糟糕的主意！**想一想，你是说你的包中的所有东西都应该是公开可见的 API。这意味着你必须维护所有这些包，确保你仔细地改进它们并使用正确的版本等。基本上你不是模块化的。

任何 OSGi 包的理想状态应该是**导出尽可能少的包**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T18:13:31.550

我认为这是不可能的。jar 需要单独位于 maven 存储库中，才能通过将它们作为依赖项添加到库项目中来创建“库项目”；否则罐子不会在类路径中。这样做的一个很好的参考是[这个页面](https://cwiki.apache.org/confluence/display/UIMA/Building+Eclipse+Plugins+with+maven-bundle-plugin+and+friends)

# mysql - 用户定义的数据收集帮助 ColdFusion

> ID：11531155
> 
> 赞同：0
> 
> 时间：2012-07-17T21:30:03.473
> 
> 标签：mysql, coldfusion, cfwheels

我试图找出完成数据收集的最佳方法。

这是我需要完成的工作：

我正在使用 ColdFusion 和 MySQL 构建一个 CRM 来收集数据。

数据因每个用户而异。

用户示例：

```
User 1: Collecting :: First Name, Last Name, Phone 1, Phone 2, Address
User 2: Collecting :: First Name, Middle Name, Last Name, Phone 1, City, State, Zipcode, Address
User 3: Collecting :: Bank Name, User Accounts, Business Name,  Address of Bank 
```

总结一下将它存储在 MySQL 中并允许简单的 CRUD（创建、检索、更新、删除）的最佳方法是什么。我怎样才能让用户定义他们的数据。更不用说速度，通过用户交互每次查询拉数千条记录。搜索数据等...

任何示例或答案都值得赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:22:13.960

根据您的示例数据，用户 1 和 2 是实际用户，并将存储在用户表中，该表将包含所有这些字段，但并非所有字段都是必需的。用户 3 并不是真正的用户，它是一个组织，最好将其存储在另一个表中。

老实说，我认为你在这里伸展得太远了。似乎您在问如何在不定义对象的情况下存储对象，这实际上并不适合数据库系统。你所走的道路危险地接近于[内部平台效应](http://thedailywtf.com/Articles/The_Inner-Platform_Effect.aspx)。提供更适合您客户需求的有用结构。如果他们不得不花费数小时来定制您的软件来为他们工作，他们最终会选择更容易使用的劣质软件。

# google-chrome - 为 Firefox 使用 lesscss 和浏览器 hack

> ID：11531157
> 
> 赞同：5
> 
> 时间：2012-07-17T21:30:14.580
> 
> 标签：google-chrome, firefox, escaping, less

我正在将一个 css 文件手动转换为 less ，并且我正在尝试找到一种方法来执行特定于浏览器的 css。我尝试使用站点上提到的 ~"" 来逃避它，但它似乎不适用于整个代码块。

对于 IE，这些工作：

```
padding: ~"5px\9"; /* IE8 and below */ 
*padding:4px;  /* IE7 and below */ 
_padding:2px;  /* IE6 */ 
```

对于 Chrome，这有效：

```
/* This will apply the styling only to Chrome and Safari */
@media screen and (-webkit-min-device-pixel-ratio:0) {
  #mySelector {
    color: red;
  }
} 
```

然而，火狐呢？我如何逃避类似的事情：

```
/* This will apply the styling only to Firefox */
@-moz-document url-prefix() {
  #mySelector {
    color: red;
  }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-18T14:03:11.230

根据其他黑客的评论和可用性，我创建了一个解决方法。

如前所述，它确实使用 WinLess.org 编译器 (http://winless.org/online-less-compiler) 进行编译。

它不使用 DotLess 进行编译，所以我刚刚扭转了黑客攻击。代替：

```
#mySelector {
    color: red;
}
/* This will apply the styling only to Firefox */
@-moz-document url-prefix() {
  #mySelector {
    color: green;
  }
} 
```

我已经做了：

```
/* FF needs green*/
#mySelector {
   color: green;
    /*IEs need red*/
    color: ~"red\9";
}
@media screen and (-webkit-min-device-pixel-ratio:0) { 
    #mySelector {
    /*Chrome needs red*/
       color: red;
    }
} 
```

# jquery - 第一次后，JQuery Slide 切换不适用于动态绘制的数据（通过 ajax）

> ID：11531159
> 
> 赞同：0
> 
> 时间：2012-07-17T21:30:44.063
> 
> 标签：jquery, ajax

我有一个基于类别的问题列表，一旦用户单击类别链接，就需要打开/关闭这些问题。类别和问题是通过 ajax 获得的。第一次它工作正常，但是当我单击其他选项卡并返回时，它不再工作了。

这是我的代码：滑动切换附加到触发器，显示类别和问题附加到类`disp`。任何帮助，将不胜感激。滑块快速打开和关闭。

```
jQuery(function() {

        $(".trigger1").live("click",function(){

        var str = $(this).find("span.imgplus").text();
        if (str.indexOf("+") >= 0)
            $(this).find("span.imgplus").html("-&nbsp;");
        if (str.indexOf("-") >= 0)
            $(this).find("span.imgplus").html("+&nbsp;");

        $(this).next("div.dispnone").slideToggle("slow");

        });
     });

$(".disp").click(function(){

            var inputData = {
            usrid:$('#usrid').val(),buddyId:$('#qstbuddyid').val()};
             var qStr = ''; 

             $.getJSON("questions.json", inputData, function(response){

               var qlist = response.questModel.addQuestions;
                 var str = '';
                $.each(qlist,function(key,value){

                str += '<div class="trigger1" ><span class="imgplus" style="color:#FBBE16;font-weight:bold;cursor:pointer">+ &nbsp;</span><span style="color:#FBBE16;font-weight:bold;cursor:pointer">'+key+'</span><br/><p>&nbsp;</p></div>';
                     str+= '<div class="dispnone" style="padding-left:6px;padding-top:6px">';
                    for(var i=0; i<value.length;i++){
                        var chk= '';
                        if((value[i].isAdded)=='Y')
                            {
                                chk = "checked"
                            }

                     str += '<input style="cursor:pointer" type="checkbox" class="chkd" id="'+value[i].questId+'" '+chk+' /><span style="margin-left:2px" id="'+value[i].questId+'span1">'+value[i].questDesc+'</span><span class="dispnone" id="'+value[i].questId+'span2">'+value[i].questCategory+'</span><br/>';

               }
               str+= '</div>';

              }); 

               $("#qadd").empty();
               $("#qadd").html(str);
               }); 
```

这是我的 HTML：

```
 <div id="questions"  style="background: none repeat scroll 0 0 #FFFFFF;
         border: 2px solid #F1B717;
            font-family: Arial,Helvetica,sans-serif;
              font-size: 12px;
            margin-bottom: 2%;
             margin-left: 2%;
            text-align: left;
            width: 96%;
             z-index: 2;">

         <div class="subnav2" id="linklist">
         <ul class="menu">
        <li><a href="#qadd" class="disp">Add Questions</a></li>
        <li><a href="#qcreate" class="disp">Create  Question</a></li>
        <li><a href="#qtemplate" class="disp">Template</a></li>
          </ul>
          </div>
    <div  class="questiondata">
     <div id = "listquestions" class="dispshow">

    <c:forEach items="${questModel.questionsByCategory}" var="item" varStatus="loop">
     <div class="Addedquestion">
    <div class="Q">
     Q${loop.count}.</div>

        <div class="pquestion">
           ${item.questDesc}<span id="comm_<c:out value='${item.questId}'/>" style="display:none">${item.questComments}</span> 
          <a href="#"><img  class="deletequest" id="del_<c:out value='${item.questId}'/>" 
             src="${context_path}/assets/images/deletequestion.png" title="Delete this question" name="delquest" width="12" height="12"/>
          </a></div>
               </div>
           </c:forEach>
              <br>

           </div> <!-- end of listQuestions -->

                <div id = "addcreatetemplate" class="dispnone">

                 <div  id ="qadd" class="dispnone">

                          <c:forEach items="${questModel.addQuestionsByCategory}"      

<br><div class="trigger1"><div id="sign" style="float:left" class="plus">+</div>&nbsp;<div style="float:left">&nbsp;${entry.key}</div> <br> </div>

                                      <div class="hide-container"><br>
                                      <c:forEach items="${entry.value}" var="item" 
                                      varStatus="loop">
                                     <c:set var="sel" value=""/> 
                                     <c:if test="${item.isAdded eq 'Y'}">
                                     <c:set var="sel" value="checked"/>  
                                    </c:if>  

                                     <input class="chkd" type="checkbox" id = "${item.questId}" <c:out value="${sel}"/> /> 

                                      &nbsp;&nbsp;&nbsp;<span id = "${item.questId}span1"  name="${item.questDesc}">${item.questDesc}</span> 
                                    <span id = "${item.questId}span2" name="${item.questDesc}" style="display:none">${entry.key}</span>
                                <br/>
                                </c:forEach>

                                </div>    

                             </c:forEach>
               </div> <!-- end of qadd -->

               <div id = "qcreate" class="dispnone">  developed in future.</div>

             <div id ="qtemplate" class="dispnone"> developed in future.</div>

         </div> <!-- addcreate template -->
         </div> <!-- question data -->
         </div> <!-- questions --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:28:28.903

使用[`.live()`](http://api.jquery.com/live/)or[`.on()`](http://api.jquery.com/on/)方法代替[`.click()`](http://api.jquery.com/click/).

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

# c# - sqldeveloper中的oracle查询快，asp.net中的慢

> ID：11531164
> 
> 赞同：0
> 
> 时间：2012-07-17T21:31:01.233
> 
> 标签：c#, asp.net, sql, oracle

我想执行以下查询并将其放在我的 asp.net 应用程序中的 gridview 上

```
select *
from INDICATORS, places, places_sales
where places_sales.id = places.id
and 
INDICATORS.line  in (select line from lines) 
```

行表有 28000 条记录和 INDICATORS 18000 条

此查询在 oracle sql developer 中执行 6 秒，但在我的 asp.net 应用程序中（使用 oracle dataacess 作为连接器）大约需要 20 分钟

有没有办法优化我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:44:24.603

您可以做几件事来加快速度。

首先，places 或 places_sales 与 INDICATORS 之间是否存在连接？

如果有，你应该添加它，你可能得到一个笛卡尔。

现在，对于优化部分，请尝试以下操作：

```
SELECT *
  FROM indicators, places, places_sales
 WHERE places_sales.id = places.id
       AND EXISTS
               (SELECT ''
                  FROM lines l
                 WHERE l.line = indicators.line) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:39:22.713

我的建议是让您将 GridView 与分页一起使用

请参阅链接以了解有关 GridView 分页的更多信息[http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx](http://msdn.microsoft.com/en-us/library/5aw1xfh3.aspx)

一个很好的例子可以在这里找到[http://www.dotnetcurry.com/ShowArticle.aspx?ID=339](http://www.dotnetcurry.com/ShowArticle.aspx?ID=339)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:48:28.777

我建议为表放置索引并创建**索引**，以便查询更加流畅。
使用类型**CLUSTERED** [看起来这](http://msdn.microsoft.com/en-us/library/ms188783.aspx)

我真的是一个超过 60000 行的表，并且索引对其进行排序

# c++ - paintEvent中的Qt QPainter消除了用paintGL绘制的图形

> ID：11531165
> 
> 赞同：2
> 
> 时间：2012-07-17T21:31:11.323
> 
> 标签：c++, qt, opengl, graphics, qglwidget

我有以下代码

```
void QMyWidget::paintEvent(QPaintEvent *event)
{

    updateGL(); // This calls for initializeGL and then paintGL and draws a nice openGL 3D scene

    QPainter painter(this); 
    // Draw something with QPainter..
} 
```

问题是该`QPainter`行多次调用 initializeGL 和 paintGL 并最终在我的 OpenGL 渲染场景上创建了一个空白/灰色区域。如果我尝试用 绘制类似 a`drawText`的`QPainter`内容，则会显示文本，但文本的背景是完全覆盖我的 OpenGL 绘制场景的灰色矩形。

这有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T15:54:43.620

已解决：多通道渲染已停用，因此场景被多次渲染

# android - 使用 Android 浏览器从 HTML 渲染 SVG

> ID：11531197
> 
> 赞同：0
> 
> 时间：2012-07-17T21:34:12.267
> 
> 标签：android, html, ios, safari, svg

我一直在寻找，并没有真正找到渲染 SVG 的好解决方案。具体来说，我正在尝试在不使用库的情况下在 Android 浏览器中呈现 SVG（即仅使用`<object type="image/svg+xml" data="images/logo.svg"></object>`或类似的东西）

这是否可以在所有浏览器（iOS Safari、Android、WP7）中实现？在这一点上，我特别指的是移动浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:49:11.987

改用这个。它适用于所有浏览器。

```
<iframe id="logo" src="images/logo.svg" type="image/svg+xml" frameborder="0" onload="Init()" />; 
```

它将允许您从 html 页面访问 javascript 函数或 logo.svg 的 DOM 元素。

```
logo = document.getElementById("chart");
logo.contentWindow.RenderChart(chart1Data, r); //javascript function in logo.svg 
```

这将适用于所有浏览器。

# mysql - Wordpress - 需要查询三个不同的自定义值并为每个值找到一个结果最大值

> ID：11531201
> 
> 赞同：0
> 
> 时间：2012-07-17T21:34:20.233
> 
> 标签：mysql, sql, wordpress

我正在为一个客户在这个网站上工作，我正在尝试根据客户的请求修改当前的 SQL 查询。目前，它查找自定义字段“主页”值为“是”的前三个帖子，按日期降序排序。

```
query_posts('showposts=3&meta_key=homepage&meta_value=yes&cat=-6&cat=-10&cat=-16&orderby=date&order=DESC'); 
```

现在要求的是，有三个帖子摘录容器需要用一个帖子填充。容器一，柱子价值一，容器二，价值二和容器三价值三。

所以我需要通过三个不同的自定义字段进行搜索，并为每个字段找到一个结果。任何人都可以提供任何见解吗？如果可能的话，我想仍然使用 query_posts 函数。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:15:53.193

*根据所有评论进行*编辑**

 *您所做的就是使用带有参数的 query_posts 遍历循环，并根据计数器将不同的 html 应用于每次迭代。所以;

```
<?php query_posts('showposts=3&meta_key=homepage&meta_value=yes&cat=-6&cat=-10&cat=-16‌​&amp;orderby=date&order=DESC'); ?>

<? $counter = 1; ?>

<?php while ( have_posts() ) : the_post(); ?>

     <div class="container-<?php echo $counter; ?>">

         <?php the_content(); ?>

     </div>

     <?php $counter++; ?>

<?php endwhile; ?> 
```

生成以下内容；

```
<div class="container-1"> Content from post 1</div>
<div class="container-2"> Content from post 2</div>
<div class="container-3"> Content from post 3</div> 
```

所以你可以通过 CSS 做任何你喜欢的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T15:13:19.387

我已经完成了最暴力的方法，并为每个元值调用了一个查询。

```
 <?php query_posts('showposts=1&meta_key=homepage_location&meta_value=1&cat=-6&cat=-10&cat=-16&orderby=date&order=DESC'); ?>

        <?php rewind_posts(); ?>
        <?php query_posts('showposts=1&meta_key=homepage_location&meta_value=2&cat=-6&cat=-10&cat=-16&orderby=date&order=DESC'); ?>

        <?php rewind_posts(); ?>
        <?php query_posts('showposts=1&meta_key=homepage_location&meta_value=3&cat=-6&cat=-10&cat=-16&orderby=date&order=DESC'); ?>

        <?php rewind_posts(); ?> 
```*

# java - 需要帮助将计时器方法放在 JToggleButton 后面

> ID：11531210
> 
> 赞同：0
> 
> 时间：2012-07-17T21:34:47.767
> 
> 标签：java, swing, timer, jtogglebutton

我在这方面有点挣扎。在 Google 上进行研究后，我创建了以下计时器例程，该例程在调用时运行良好

```
// play move method
public static void playMove() {
    int delay = 1200; // delay for 1 sec.
    int period = 1200; // repeat every sec.

    final Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        private int count = history.getGameIndex();

        public void run() {
            count++;
            if (count >= history.getTotalMoves() + 1) {
                timer.cancel();
                timer.purge();
                return;
            }
            history.next();
        }
    }, delay, period);
} 
```

但是，问题是我不知道如何将此代码集成到 JToggleButton 中，这是它的正确位置，以便当我单击播放时它会播放一个动作，而当我单击停止时会停止（或暂停）例程。这是我的 JToggleButton 代码：

```
ImageIcon playIcon = new ImageIcon(
        JBoard.class.getResource("/images/menu/play.png"));

btnPlayMove = new JToggleButton(playIcon);
btnPlayMove.setToolTipText("Play");
btnPlayMove.setContentAreaFilled(true);
btnPlayMove.setMargin(new Insets(2, 2, 2, 2));

btnPlayMove.addItemListener(new ItemListener() {
    public void itemStateChanged(ItemEvent ie) {
        if (isConnected()) {
            showMessage("Engine disabled during network play...");
            return;
        } else if (btnPlayMove.isSelected()) {
            // play
            playMove();
            ImageIcon playIcon = new ImageIcon(JBoard.class
                    .getResource("/images/menu/play.png"));
            btnPlayMove.setIcon(playIcon);
        } else {
            // stop
            ImageIcon stop = new ImageIcon(JBoard.class
                    .getResource("/images/menu/stop.png"));
            btnPlayMove.setIcon(stop);

        }
    }
});
buttonPanel.add(btnPlayMove); 
```

我对Java相当陌生，如果有人可以提供帮助，那就太好了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:09:44.467

您可以利用 javax.swing.Timer

```
Timer timer = new Timer(1200, new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {
        count++;
        if (count >= history.getTotalMoves() + 1) {
            timer.cancel();
            timer.purge();
            return;
        }
        history.next();
    }
});

timer.setRepeats(true);
timer.setCoalesce(true);
timer.setInitialDelay(1200); 
```

然后在您的按钮代码中，您只需调用`timer.start()`或`timer.stop()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:05:01.920

我建议您将 playMovie 方法设为非静态并将 History 声明为全局变量并包含在您的 swing 类中：

```
History history = new History(); // assuming this with no-args

public void playMove() {
         int delay = 1200; // delay for 1 sec.
         // etc.
         // etc.
} 
```

此外，如果其 TimerTask 线程仍在运行，您将需要以编程方式停止 playMove()。

# sql - TSQL - 解析 XML 帮助，搜索特定值

> ID：11531211
> 
> 赞同：0
> 
> 时间：2012-07-17T21:34:50.140
> 
> 标签：sql, xml, tsql, xml-parsing

任何人都可以帮助我使用正确的 TSQL 来解析以下 xml。假设我想为 name 元素找到值为“y”的项目，但我想获取“value”元素的值，在下面的示例中为“2”。

```
Declare @XML xml

set @XML ='
<Test>
<items>
<item>
<name>x</name>
<value>1</value>
</item>
<item>
<name>y</name>
<value>2</value>
</item>
</items>
</Test>'

--i am stuck here
selecct @XML.value('Test/items/....") 
```

通过搜索“y”，结果将是“2”。

这可能吗？

有人可以帮助语法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:41:15.790

试试这个

```
 select @xml.value('((test/items/item)[2]/value)[1]', 'nvarchar(max)') 
```

分解：

```
(test/items/item)[2]  -- find the second instance of an item tag under a test tag

((test/items/item)[2]/value)[1] -- then find the first instance of a value tag under that 
```

值函数不能给出任何表达式，即使在理论上可以返回多个值。如果有疑问，请像这样将括号括起来`(some-expression-here)[1]`。

要查找与给定名称对应的值：

```
 select @xml.value('((test/items/item)[name="y"][1]/value)[1]', 'nvarchar(max)') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:39:19.393

为此，您可能需要使用 XQuery（设计用于查询 XML 数据）。TSQL 支持它的一个子集：

[http://msdn.microsoft.com/en-us/library/ms189075%28SQL.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms189075%28SQL.90%29.aspx)

# c++ - 使用 Boost Graph 库查找所有路径

> ID：11531222
> 
> 赞同：3
> 
> 时间：2012-07-17T21:36:07.410
> 
> 标签：c++, boost, graph, boost-graph

我有一个 DAG，我需要能够在一个区域内找到一定长度的所有可能路径。例如，我想找到包含至少 3 个但不超过 7 个顶点的所有路径。我的第一个想法是找到一个找到所有路径的算法，然后将它们清除掉。

任何人都可以提供建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-21T00:06:44.110

枚举所有长度为 K 的路径通常是 O(2^K)，所以我认为上面不枚举所有可能路径的建议是好的。例如：

![图表](../Images/9cbb191901b6c6dea59e147cf5a81acf.png)

假设这个图中的所有边都是从左到右的（所以这是一个 DAG）。然后从最左边到最右边的节点有 2^3 条路径（即 2^3 条长度为 6 的路径），因为对于 3 个“钻石”中的每一个，您可以选择采用上面或下面的路径（所以我们正在查看三个二元选择的所有排列）。您可以按照模式扩展图形（通过添加菱形），对于 K 个菱形，将有 2^K 个长度为 2K 的路径。

因此，您可能只想枚举您必须访问的路径（特别是如果它们像您的示例中那样很短）。

我认为上述使用广度优先搜索的建议适用于枚举所有路径，但对于较大的情况，空间需求将是 2^K（当查找长度为 K 或更短的所有路径时）；我这样说是因为你必须记住所有长度为 n-1 的路径才能找到所有长度为 n 的路径。深度优先搜索（或者更确切地说是它的修改版本）也可以：

```
DFS(int maxLen, Node node):
    list<Node> path
    path.add(node)
    DFS_Helper(maxLen, path)

DFS_Helper(int maxLen, list<Node> path):
    print(path)
    if (path.size() >= maxLen)
        return
    set<Node> targets = graph.getNodesPointedToBy(path.last())
    for Node target in targets:
        path.append(target)
        DFS(maxLen, path)
        path.removeLastNode() 
```

空间使用量为 O(|V|)（V 中的任何顶点，顶点集可以出现在最多一个递归调用的“目标”集中，因为该图是非循环的）。请注意，这仍然会有 O(2^k) 运行时（如上所述，这是不可避免的），我猜由于这种提升不会有现成的算法供您执行此操作（这就是我包含一些伪代码的原因以上）。这不包括下限，但应该不会太糟糕而不能包括在内。

编辑：我最初认为 DFS 的空间使用量是 O(K)，其中 K 是最大路径长度。这是不正确的并且低于实际空间使用量，因为我忽略了在对 DFS_Helper 的每个递归调用中包含“目标”集使用的空间。空间使用量仍然明显低于 BFS。

# javascript - extjs sortable 不按大小写和日期排序

> ID：11531228
> 
> 赞同：0
> 
> 时间：2012-07-17T21:36:48.343
> 
> 标签：javascript, extjs2

我有一个 extjs 网格，它有一个电子邮件字段，其中包含以大写和小写开头的电子邮件。该字段未按应有的方式排序。

另外，我有一个格式为 2012 年 6 月 14 日上午 11:00 的日期字段。

我不确定如何对日期列进行升序/降序排序。

我的意思是网格确实对数据进行了排序，但它没有正确排序

这是我的代码：

```
var init_groupView = function() {
    userStore = new Ext.data.Store({
        url: 'scripts/users_getAllUsers.cgi',
        reader: new Ext.data.JsonReader({
            root: 'users',
            totalProperty: 'usersCount',
            id: 'user_id',
                 fields: [ 'fullname','email','login_time']
        })
}); 
```

这是我的列的排序方式。

```
columns: [
            {header: "Full Name", width: 150, height:16, sortable: true, dataIndex: 'fullname'},
            {header: "E-Mail", width: 200, height:16, sortable: true, dataIndex: 'email'},
            {header: "Last Login", width: 150, height:16, sortable: true, dataIndex: 'login_time'}

] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:26:15.693

您需要在字段上设置类型，以便它知道如何对值进行排序：

[http://docs.sencha.com/ext-js/2-3/#!/api/Ext.data.Field-cfg-type](http://docs.sencha.com/ext-js/2-3/#!/api/Ext.data.Field-cfg-type)

您可能还需要设置 dateFormat 配置。

# python - 从 twitter 搜索 api 到 txt 的 Python 输出

> ID：11531234
> 
> 赞同：0
> 
> 时间：2012-07-17T21:37:04.483
> 
> 标签：python, twitter

我找不到将 twitter 搜索 api 的输出保存在 txt 中的方法。我使用的编程语言是 Python，我是初学者。可以smn帮助我。谢谢。

> ```
> import urllib
> import json
> 
> search = urllib.urlopen("http://search.twitter.com/search.json?q="+"android&rpp=100")
> 
> dict = json.loads(search.read())
> for result in dict["results"]:
>    print  "#", result["text"],"\n" 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:14:24.457

如何重定向输出`mypythonscript.py > /where/to/save.txt`

或者只是将其保存在 python 中（使用您的代码）：

```
#!/usr/bin/env python
import urllib
import json
import codecs

search = urllib.urlopen("http://search.twitter.com/search.json?q="+"android&rpp=100")

with codecs.open('/tmp/fap.txt', 'a+', 'utf8') as f:
    dict = json.loads(search.read())
    for result in dict["results"]:
        f.write('# %s\n' % result["text"]) 
```

# android - cvc-elt.1：找不到元素“LinearLayout”的声明

> ID：11531235
> 
> 赞同：0
> 
> 时间：2012-07-17T21:37:10.997
> 
> 标签：android, xml, netbeans, android-linearlayout

我正在使用 xml 为使用 Netbeans (7.1) 的 Android 应用程序定义我的 UI。我的 main.xml 看起来像这样......

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Layout01"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="10dp"
    android:paddingRight="10dp"
    >

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/to (phone #)"
        />

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/date"
        />

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="@string/subject"
        />

    <EditText
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:gravity="top"
        android:hint="@string/event description"
        />

    <Button
        android:layout_width="100dp"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:text="@string/send"
        />   

</LinearLayout> 
```

当我尝试验证我的 xml（文件）时，我收到“cvc-elt.1：找不到元素'LinearLayout'的声明”。此外，我的 Java 类 (MainActivity) 现在显示一个错误，表明它找不到 R.Layout.main 类。我已经在互联网上搜索了很多地方，但没有运气。有人可以帮忙吗？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:51:34.523

我已经在 Eclipse 中测试了该文件，它没有任何问题。（另一种解决方案是切换到 Eclipse！）这意味着您的项目在 Netbeans 中没有正确设置。您需要告诉 netbeans Android SDK 在您的机器上的位置。这应该是一个项目设置和/或将其重新创建为一个 Android 项目。如果它已经是一个 Android 项目，请检查 SDK 的项目设置。因为它找不到 Android SDK，它无法解析布局的 xml 架构。这就是问题所在，你的布局没有问题。当您修复告诉 Netbeans 关于 Android SDK 的配置时，请不要介意 R 问题。

下面是问题和解决方法：

见：[http ://binarywasteland.com/2011/07/install-netbeans-android-sdk/](http://binarywasteland.com/2011/07/install-netbeans-android-sdk/)

> 更新
> 
> 已经确定人们无法让 NetBeans 和 Android SDK 组合工作，这是因为没有提到一个关键问题。当我们下载 Android SDK 时，我们需要将 SDK 添加到一个没有空格的目录中。完成此操作后，我们需要将该目录添加到路径下的系统变量中。为此，我们需要单击开始菜单，导航到计算机，右键单击它并选择属性。然后，您需要单击屏幕右侧的高级系统设置。然后您将看到以下屏幕：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:49:50.443

> 当我尝试验证我的 xml（文件）时，我收到“cvc-elt.1：找不到元素'LinearLayout'的声明”

你是如何尝试验证它的？此错误通常意味着模式验证器（可能是 Xerces）由于某种原因与调用验证器的方式有关，因此无权访问模式。

# spring - 使用 Spring IoC 将依赖项注入 Restlet ServerResource

> ID：11531237
> 
> 赞同：1
> 
> 时间：2012-07-17T21:37:14.707
> 
> 标签：spring, dependencies, inversion-of-control, code-injection, restlet

我正在使用 Spring / Hibernate / Restlet / Jetty 构建一个 REST 服务，我正在努力完成我认为是一项简单的任务：

**我需要将 DAO 实现（即 UserDao）注入到 ServerResource（在本例中为 UserServerResource）。**

我正在使用 SpringRouter bean 在 Spring XML 配置中建立到该资源的路由：

```
<bean name="restlet-user-server-resource"
      class="project.server.rest.UserServerResource" 
      scope="prototype" />

<bean name="restlet-api-server-application"
      class="org.restlet.Application">
        <property name="inboundRoot">
        <bean class="org.restlet.ext.spring.SpringRouter">
            <constructor-arg ref="restlet-api-server-application" />
            <property name="attachments">
            <map>
                <entry key="/user/{userId}"
                       value-ref="restlet-user-server-resource" />
            </map>
            </property>
        </bean>
    </property>
</bean> 
```

而且我尝试将 DAO 作为@Autowired 和 bean 属性注入（在“restlet-user-server-resource”bean p:userDao-ref="user-dao" 中）。

UserDao 指定为：

```
<bean name="user-dao,userDao"
      parent="dao-tx-template">

    <property name="target">
        <bean class="project.server.data.dao.UserDao"
              p:sessionFactory-ref="session-factory" />
    </property>
</bean> 
```

应该注意的是，getBean('user-dao') 按预期工作并返回完全准备好的 UserDao 实例。

我试过以下：

1.  当直接使用 Spring 上下文中的 getBean 需要 restlet-user-server-resource bean 时，内部 userDao 为空。
2.  当 Restlet 直接实例化 UserServerResource 类时（因此，为 SpringRouter 提供了字符串而不是 ref），内部 userDao 为空。
3.  当 Spring 如上所述实例化 bean 时，内部 userDao 为空。

**此外，在 (1) 和 (3) 中，Restlet 都会发出错误：**在映射中找到未知对象。只允许使用 Restlet 的实例以及 org.restlet.resource.Resource 和 ServerResource 的子类。

添加当前的 UserServerResource 实现（这没什么，只是基础设施设置的模拟）：

```
package project.server.rest;

import org.restlet.resource.ResourceException;
import org.restlet.resource.ServerResource;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Configurable;

import project.server.data.dao.UserDao;
import project.server.data.entities.User;
import project.server.rest.interfaces.UserResource;

@Configurable
public class UserServerResource 
extends ServerResource 
implements UserResource 
{
    private int userId;

    @Autowired
    private UserDao userDao;

    @Override
    public void doInit() throws ResourceException
    {
        String userIdString = (String)this.getRequestAttributes().get("userId");
        this.userId = Integer.parseInt(userIdString);
    }

    @Override
    public User represent() 
    {
        System.out.println(this.userDao);

        User user = new User();
        user.setId(this.userId);
        user.setUserName("Something");
        user.setEmailAddress("some@address.com");
        return (user);
    }

    public void setUserDao(UserDao dao)
    {
        this.userDao = dao;
    }

    public UserDao getUserDao()
    {
        return (this.userDao);
    }
} 
```

我希望我提供了尽可能多的信息。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T11:34:14.060

好的，我做了一些绝望的谷歌搜索，再次找到了 Restlet 的 Spring 扩展手册页，但现在，没有错过重要的一点，最终解决了我的难题。这是解决方案：

```
<bean name="restlet-user-server-resource"
      class="project.server.rest.UserServerResource" 
      scope="prototype" 
      p:userDao-ref="user-dao" />

<bean name="restlet-api-server-application"
      class="org.restlet.Application">
        <property name="inboundRoot">
        <bean class="org.restlet.ext.spring.SpringRouter">
            <constructor-arg ref="restlet-api-server-application" />
            <property name="attachments">
            <map>
                <entry key="/user/{userId}">
                    <bean class="org.restlet.ext.spring.SpringFinder">
                        <lookup-method name="create" bean="restlet-user-server-resource" />
                    </bean>
                </entry>
            </map>
            </property>
        </bean>
    </property>
</bean> 
```

**重要的一点是带有 create 方法的 SpringFinder bean，用于查找和实例化 Spring bean，而不是直接引用。**

# javascript - 嵌套 XML 数据和 ExtJS 模型关联

> ID：11531241
> 
> 赞同：3
> 
> 时间：2012-07-17T21:37:34.610
> 
> 标签：javascript, xml, extjs, nested, associations

我正在尝试将 XML 数据映射到 ExtJS 中的一系列模型。我能够从顶层模型中提取数据，但是，与它的关联无法检索到必要的数据。

这是我所有的模型：

```
Ext.define('app.model.ProductType', {
    extend: 'Ext.data.Model',
    idProperty: 'id',
    fields: [{
        name: 'id',
        mapping: 'id',
        type: 'int'
    }, {
        name: 'name',
        mapping: 'name',
        type: 'string'
    }, {
        name: 'sometag',
        mapping: 'sometag',
        type: 'string'
    }],
    associations: [{
        type: 'hasMany',
        model: 'app.model.Address',
        name: 'addresses',
        autoLoad: true,
        reader: {
            type: 'xml',
            record: 'address',
            root: 'addressList'
        }
    }, {
        type: 'hasMany',
        model: 'app.model.PhoneContact',
        name: 'contacts',
        autoLoad: true,
        reader: {
            type: 'xml',
            record: 'phoneContact',
            root: 'phoneContactList'
        }
    }, {
        type: 'hasOne',
        model: 'app.model.OneToOne',
        name: 'oneToOne',
        autoLoad: true,
        reader: {
            type: 'xml',
            record: 'oneToOne'
        }
    }],
    proxy: {
        type: 'ajax',
        url: 'data/example.xml',
        reader: {
            type: 'xml',
            record: 'ProductType',
            root: 'ProductResultSet'
        }
    }
}); 
```

地址：

```
Ext.define('app.model.Address', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'city',
        mapping: 'city',
        type: 'string'
    }, {
        name: 'street',
        mapping: 'street',
        type: 'string'
    }],
    associations: [{
        type: 'belongsTo',
        model: 'app.model.ProductType'
    }]
}); 
```

电话联系方式：

```
Ext.define('app.model.PhoneContact', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'primary',
        mapping: 'primary',
        type: 'string'
    }, {
        name: 'cell',
        mapping: 'cell',
        type: 'string'
    }],
    associations: [{
        type: 'belongsTo',
        model: 'app.model.ProductType'
    }]
}); 
```

一对一：

```
Ext.define('app.model.OneToOne', {
    extend: 'Ext.data.Model',
    fields: [{
        name: 'first',
        mapping: 'firstfield',
        type: 'string'
    }, {
        name: 'second',
        mapping: 'secondfield',
        type: 'string'
    }],
    associations: [{
        type: 'belongsTo',
        model: 'app.model.ProductType'
    }]
}); 
```

这是我的 app.js

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'app',
    autoCreateViewport: false,
    requires: ['app.model.ProductType', 'app.model.Address', 'app.model.PhoneContact', 'app.model.OneToOne', 'app.store.ProductTypeStore'],
    launch: function () {
        app.model.ProductType.load(55, {
            scope: this,
            callback: function (record, operation) {
                console.log('Record Addresses:');
                console.log(record.addresses());
            }
        });

        var s = app.store.ProductTypeStore.create();
        s.on('load', this.wiggidy, this);
        s.load();
    },
    wiggidy: function (store, records, success, eOpts) {
        var rec = store.getAt(0);
        console.log('Associated Data:');
        console.log(rec.getAssociatedData());
    }
}); 
```

最后，example.xml

```
<ProductResultSet>
<ProductType>
    <id>55</id>
    <name>Product Name</name>
    <sometag>asdf</sometag>
    <addressList>
        <address>
            <street>12345 a</street>
            <city>myCity</city>
        </address>
        <address>
            <street>234567 b</street>
            <city>Denver</city>
        </address>
    </addressList>
    <phoneContactList>
        <phoneContact>
            <primary>234</primary>
            <cell>4667</cell>
        </phoneContact>
        <phoneContact>
            <primary>5467</primary>
            <cell>87904</cell>
        </phoneContact>
    </phoneContactList>
    <oneToOne>
        <firstField>value</firstField>
        <secondField>value</secondField>
    </oneToOne>
</ProductType>
</ProductResultSet> 
```

控制台为 RecordAddresses 输出吐出“Uncaught TypeError: Cannot call method 'indexOf' of undefined”，然后我得到一个对象，该对象填充了关联数据输出的 0 个对象的数组。

我完全被这个难住了。我到处搜索，它把我带到了这么远。为什么记录没有加载该 xml 文件中的嵌套数据？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T06:18:41.267

为什么在 hasMany 关系中设置 autoLoad=true ？

您正在尝试使用嵌套数据，然后您告诉它按需加载数据，并想知道为什么没有嵌套数据:)

您还缺少嵌套加载所需的关联键。

这是您的代码的一个工作示例：

[http://jsfiddle.net/el_chief/668Fg/5/](http://jsfiddle.net/el_chief/668Fg/5/)

以后遵守我的“规则”，一切都会好起来的：

[http://extjs-tutorials.blogspot.ca/2012/05/extjs-hasmany-relationships-rules.html](http://extjs-tutorials.blogspot.ca/2012/05/extjs-hasmany-relationships-rules.html)

# android-actionbar - ActionBar 添加微调器未连接到选项卡内容分页

> ID：11531243
> 
> 赞同：0
> 
> 时间：2012-07-17T21:37:51.090
> 
> 标签：android-actionbar, actionbarsherlock

我正在使用 ActionBarSherlock 和 ViewPager 使用片段进行选项卡内容切换（滑动）。

[http://img9.imageshack.us/img9/1040/device20120717232738.png](http://img9.imageshack.us/img9/1040/device20120717232738.png)

我需要的是在 ActionBar 中有两个未连接到选项卡切换的微调器控件。所以不同的控件（所以两个微调器）有自己的 onClick 逻辑。在我的图像上，两个操作按钮（EUR 和 KUPOVNI）应该是微调器。

使用 ActionBar 的自定义视图执行此操作是否正确？

# c - 使用 readdir_r 读取目录

> ID：11531245
> 
> 赞同：3
> 
> 时间：2012-07-17T21:37:54.867
> 
> 标签：c, readdir

我一直在检查和解决这个程序，但没有成功，希望你能帮助我。

这个想法是读取存储在其中的目录`c_Localpath`并将读取的目录复制到`c_namesLocal`以返回它们。

我在实施中做错了吗？程序在 上中断`strcpy`，我不知道为什么。

```
DIR* ptr_dir = opendir(c_Localpath);

char** c_namesLocal = calloc(1, 256);

    size_t numElements = 0;
    int returnCode =0;
    struct dirent ptr_PrevDirEntry;
    struct dirent* ptr_DirEntry = NULL;
    returnCode = readdir_r(ptr_dir, &ptr_PrevDirEntry,
            &ptr_DirEntry);

    while ((returnCode ==0) && (ptr_DirEntry != NULL)) {
        char* name = c_namesLocal[numElements];
        strcpy(name, ptr_DirEntry->d_name);
        ptr_PrevDirEntry = *ptr_DirEntry;
        returnCode = readdir_r(ptr_dir, &ptr_PrevDirEntry,
                &ptr_DirEntry);
        numElements++;
        c_namesLocal = realloc(c_namesLocal, 256 * numElements);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-27T06:48:29.473

抱歉，2年后才回复。但我想帮助其他想知道答案的人。我一直致力于实现，`readdir_r`因此我修改了您的代码以使其工作。我不能说整个代码都可以工作，但是可以肯定的是，您可以在您提到的指定目录中获得下一个文件条目。因此，您可以将这些条目保存到其他 var 中，并可以做任何您想做的事情。

请看下文。

```
DIR* ptr_dir = opendir(c_Localpath);
size_t numElements = 0;
int returnCode =0;
struct dirent *ptr_PrevDirEntry = NULL;
struct dirent *ptr_DirEntry = NULL;
int len_entry;
char *c_namesLocal = NULL;

len_entry = offsetof(struct dirent, d_name) + fpathconf(dirfd(ptr_dir), _PC_NAME_MAX) + 1;
ptr_PrevDirEntry = malloc(len_entry);

if(!ptr_PrevDirEntry)
        exit(0);

for(;;){
        readdir_r(ptr_dir, ptr_PrevDirEntry, &ptr_DirEntry);
        if(!ptr_DirEntry)
            break;
        else
        {
                 if((strcmp(ptr_DirEntry->d_name, ".") != 0) && (strcmp(ptr_DirEntry->d_name, "..") != 0)) // skip "." and ".." file listings
                 {
                    //Perform copying or do whatever you want with the file entry read from the dir "c_Localpath"
                    //Increase numElements to 1 and keep on increasing by 1 on every iteration
                    numElements++;
                    //realloc everytime you find next entry
                    c_namesLocal = realloc(c_namesLocal, 256 * numElements);
                    //copy the next file name in the c_namesLocal[0], c_namesLocal[1] and so on.
                    strcpy(c_namesLocal[numElements - 1], ptr_DirEntry->d_name);
                 }
        }
 }

 //free "ptr_PrevDirEntry" before returning and take care of "c_namesLocal" as well. 
```

上面的代码是不言自明的。我希望它对你有帮助。干杯:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:02:40.837

这是一个空指针异常，`c_namesLocal`实际上指向一个序列 256/sizeof(char*) char * 指针都被 calloc 设置为空，所以`c_namesLocal[numElements] == 0`. 您必须为每个条目分配内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-30T10:08:03.927

在这段代码中：

```
char* name = c_namesLocal[numElements];
strcpy(name, ptr_DirEntry->d_name); 
```

`name`以 NULL 开头。您初始化了一个指针*向量*，但单个指针本身仍指向 NULL。您应该为以下内容分配内存`d_name`：

```
// You no longer need '*name'
c_namesLocal[numElements] = strdup(ptr_DirEntry->d_name); 
```

那么添加支票将是谨慎的：

```
if (NULL == (c_namesLocal[numElements] = strdup(ptr_DirEntry->d_name)))
{
    // signal out of memory and return
} 
```

当您重新分配指针向量时进行相同的检查。

# java - 我可以从 Eclipse 调试器中的 void 方法“强制返回”吗？

> ID：11531249
> 
> 赞同：11
> 
> 时间：2012-07-17T21:38:34.260
> 
> 标签：java, eclipse, debugging

在 Eclipse 中调试时，只需执行强制返回（我之前使用非 void 方法做过），就可以避免 void 函数的副作用。

但是，当我尝试从 void 方法返回时，上下文菜单项总是被禁用。具体来说，我尝试在调试时进入显示窗格，输入一个我想返回的值，右键单击并选择“强制返回”。显然，一个 void 方法不应该返回任何东西，所以我可以理解为什么这个菜单项被禁用。

有谁知道这样做的方法，还是 Java 的某些功能禁止我这样做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-17T21:45:18.777

是的，您可以这样做，不要使用变量显示中的上下文菜单，而是右键单击您的代码，您将在上下文菜单中看到“强制返回”。

# ruby-on-rails - 预计 nil 不会成为新记录

> ID：11531250
> 
> 赞同：0
> 
> 时间：2012-07-17T21:38:34.677
> 
> 标签：ruby-on-rails, testing, rspec

你好社区我正在做一个简单的应用程序，用户可以注册（作为新用户），所以我试图用我的用户控制器创建一个新用户：

```
class UserController < ApplicationController

def create

    @users = User.new
    if @users.save
      flash[:notice] = 'new user was successfully created.'
      redirect_to posts_path
    else
      render :action => :new
    end
  end

  def new
    @user = User.new
  end
end 
```

这是我的 rspec 测试 user_controller_spec：

```
require 'spec/spec_helper'

describe UserController do

    it "create new user" do
        get :create
        assigns[:users].should_not be_new_record
    end
end 
```

当我测试它时，它显示此错误：

失败：

1) UserController 创建新用户

```
 Failure/Error: assigns[:users].should_not be_new_record

   expected nil not to be a new record
 # ./spec/controllers/user_controller_spec.rb:7 
```

在 0.15482 秒内完成 1 个示例，1 个失败

最后这是我的模型

```
class User < ActiveRecord::Base

  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable

  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me
  # attr_accessible :title, :body

  has_many :cars
  validates_presence_of  :email

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:02:45.423

该记录未保存，因为它无效。您有一个验证，可以防止在没有电子邮件地址的情况下创建记录。

此外，您的创建操作无法从表单中获取输入。

```
def create
  @users = User.new(params[:user]) # the params[:user] is the part you are missing
  if @users.save
    redirect_to posts_path, :notice => 'new user was successfully created.'
  else
    render :action => :new
  end
end 
```

然后，在您的测试中，确保您分配了一个电子邮件地址。

```
get :create, :user => { :email => 'foo@example.com' }
assigns[:users].should_not be_new_record 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T03:53:56.530

一个问题是：

```
get :create 
```

Rails 的资源路由不会将 GET 请求路由到 create 操作，因为 create 操作是有副作用的。

要测试您需要执行的创建操作：

```
post :create, "with" => { "some" => "params" } 
```

在测试控制器时，tail 是个好主意`log/test.log`；它会告诉你测试请求被路由到哪里，如果在任何地方。

# jquery - 将多个参数传递给自动完成返回方法

> ID：11531261
> 
> 赞同：2
> 
> 时间：2012-07-17T21:39:14.820
> 
> 标签：jquery, asp.net-mvc-3, .net

我需要一些帮助。我在 MVC3 中使用剃刀视图。我有一个具有自动完成功能的搜索栏，它运行良好。现在根据要求。我需要在搜索文本框旁边创建一个单选按钮，并根据选择的单选按钮值，我需要从不同的表中获取自动完成文本。这是因为，我的索引页面视图有 3 个不同的 webgrid 列表。因此，搜索应该基于用户打算搜索的内容，通过将参数中的选项指定为单选按钮。

我在这里有我的常规 jQuery 代码：

```
$(document).ready(function () {
    $(":input[data-autocomplete]").each(function () {
        $(this).autocomplete({ source: $(this).attr("data-autocomplete") });
    })
})* 
```

我修改了上面的传递第二个参数： -

```
$(document).ready(function () {

    var radioval = $("#form0").find("input[type=radio]").attr("value");
    $(":input[data-autocomplete]").each(function (request) {
        var srctxt = $(this).attr("value");
        $(this).autocomplete({
            source: "/Facility/FindNames/?term = " + $(this).attr("value") + "&stype = " + radioval
        });
    })
}) 
```

我的意图是传递第二个参数搜索类型，它是一个单选按钮组，然后在下面的控制器中根据传递的值更改查询以从不同的表中进行选择。

--控制器方法

```
 public JsonResult FindNames(string term, string stype)
    {

        string radioValue = null;

        var result = _service.GetAllFacility()
                    .Where(r => r.FacilityName.Contains(term))
                    .Take(10)
                    .Select(r => new { label = r.FacilityName });

        return Json(result, JsonRequestBehavior.AllowGet);
    } 
```

但是 stype 的值始终为 null。使用萤火虫我可以看到它确实有价值。有人可以告诉我我的代码有什么问题吗？实现这种搜索功能的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:46:29.893

您可以`source` `function`按以下方式处理以传递多个参数

```
var radioval = $("#form0").find("input[type=radio]").attr("value");
$(":input[data-autocomplete]").each(function() {

     $this = $(this);
     var srctxt = $this.val();
     $this.autocomplete({
          source: function (request, response) {
             $.getJSON('/Facility/FindNames/',
             {
                stype: radioval,
                term: srctxt
             }, response);
          }
     });
}) 
```

# switch-statement - 为什么在类型开关中不允许掉线？

> ID：11531264
> 
> 赞同：33
> 
> 时间：2012-07-17T21:39:32.817
> 
> 标签：switch-statement, go

我想知道为什么 golang 中的类型 switch 语句中不允许失败。

根据[规范](http://golang.org/ref/spec)：“类型开关中不允许使用“fallthrough”语句。”，这并没有解释为什么不允许它。

附加的代码是为了模拟一种可能的场景，即类型 switch 语句中的失败可能有用。

**注意！**此代码不起作用，它会产生错误：“cannot fallthrough in type switch”。我只是想知道在类型切换中不允许使用 fallthrough 语句的可能原因是什么。

```
//A type switch question
package main

import "fmt"

//Why isn't fallthrough in type switch allowed?
func main() {
    //Empty interface
    var x interface{}

    x = //A int, float64, bool or string value

    switch i := x.(type) {
    case int:
        fmt.Println(i + 1)
    case float64:
        fmt.Println(i + 2.0)
    case bool:
        fallthrough
    case string:
        fmt.Printf("%v", i)
    default:
        fmt.Println("Unknown type. Sorry!")
    }
} 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-07-17T21:45:36.627

你希望`fallthrough`如何工作？在这种类型切换中，`i`变量的类型取决于调用的特定情况。所以在`case bool`变量`i`中输入为`bool`. 但在`case string`它的输入为`string`. 所以要么你要求`i`神奇地改变它的类型，这是不可能的，要么你要求它被一个新变量所遮蔽`i string`，这将没有价值，因为它的值来自`x`哪个不是，事实上，一个`string`。

* * *

这是一个尝试说明问题的示例：

```
switch i := x.(type) {
case int:
    // i is an int
    fmt.Printf("%T\n", i); // prints "int"
case bool:
    // i is a bool
    fmt.Printf("%T\n", i); // prints "bool"
    fallthrough
case string:
    fmt.Printf("%T\n", i);
    // What does that type? It should type "string", but if
    // the type was bool and we hit the fallthrough, what would it do then?
} 
```

唯一可能的解决方案是将`fallthrough`cause 后面的 case 表达式保留`i`为`interface{}`，但这将是一个令人困惑和错误的定义。

如果您真的需要这种行为，您已经可以使用现有功能完成此操作：

```
switch i := x.(type) {
case bool, string:
    if b, ok := i.(bool); ok {
        // b is a bool
    }
    // i is an interface{} that contains either a bool or a string
} 
```

# mysql - 使用 XML 和 XSD 创建填充数据库

> ID：11531266
> 
> 赞同：5
> 
> 时间：2012-07-17T21:39:41.677
> 
> 标签：mysql, xml, database, csv, xsd

我不确定这是否可能，但我想我会问，看看我能不能得到任何信息。

正如标题所示，我有一个包含数千行的 XML 文件。我也有其关联的 XSD 架构文件。

我想知道，我是否可以在不手动指定 XPath 的情况下将这些数据转换为 MySQL 数据库？

例如，Java 或 Python 或任何程序是否可以基于 XSD 分析 XML 结构、提取表列并用数据填充它？

我尝试使用 PHPMyAdmin 导入我的 XML 文件，但它不起作用并说存在问题，我认为这与它无法创建列有关。据我所知，它可以更好地处理 CSV 文件，因此这是 2 阶段转换的另一种选择。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-11T18:21:22.373

尝试[使用 XMLPipeDB](http://sourceforge.net/projects/xmlpipedb/)从 XSD 文件构建关系数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T01:05:42.930

使用[XMLImport](http://msdn.microsoft.com/en-us/library/office/aa203727#odc_xmllists--final_topic4)将带有 XSD 的 XML 加载到 Excel 中，保存为 CSV 或格式化为所需的 XML 格式，例如[Wordpress](http://www.hobbub.com/vba-vb-vsto/creating-a-wordpress-import-file-with-excel/)，然后导入 MySQL。

# css - 为什么这个标签不垂直居中？

> ID：11531267
> 
> 赞同：0
> 
> 时间：2012-07-17T21:39:44.617
> 
> 标签：css, html

小提琴：http: [//jsfiddle.net/pMZ5T/](http://jsfiddle.net/pMZ5T/)

HTML：

```
<div id="arrowcont">
    <img width="30px" height="30px" src="check.jpg" style="float:left;" />
    <div id="verticalcenter">Full Guide</div>
</div>
<br>
<br> 
```

CSS：

```
#arrowcont {
    height: 40px;
    width: 275px;
    border: 1px solid black;
    vertical - align: middle;
    background - position: 0 50 % ;
}

#verticalcenter {
    vertical - align: middle;
    background - position: 0 50 % ;
}​ 
```

我想将这两个垂直居中，以便它们彼此相邻时看起来更好。该图像实际上是它旁边的复选标记。

我知道这个问题被问了很多，实际上我什至在过去问过这个问题，但我在另一个问题中使用了该方法，但我仍然无法垂直居中。有人看到我哪里出错了吗？我正在尝试背景位置标签和垂直中间标签，但都没有奏效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:47:39.410

这有效：http: [//jsfiddle.net/GyVSt/](http://jsfiddle.net/GyVSt/)

我做了什么：

1.  改为`#arrowcont`（`display: table-cell`将允许`vertical-align`）
2.  已从`float: left`_`img`
3.  `display: inline-block`为`img`and添加`#verticalcenter`（将`img`and`#verticalcenter`并排放置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:43:06.130

`vertical-align: middle`只能应用于表格单元格元素，您可以使用`display: table-cell`，但这会破坏您的布局。

# core-data - 保存 NS(Mutable)Array 的核心数据失败

> ID：11531269
> 
> 赞同：1
> 
> 时间：2012-07-17T21:39:50.450
> 
> 标签：core-data, nsarray, nsmanagedobject

我在使用 Core Data 时遇到问题。我有两个实体（文章和制造商）（一个包含一个可转换属性，它是另一个实体的数组）。在我尝试将数组添加到 NSManagedObject 之前，一切正常。这是一些代码：

```
@implementation HASArticleInitializer

- (void)initialize:(NSArray *)initArray {
    //Alloc and init some local variables
    NSMutableArray *articleEntitiesArray = [NSMutableArray alloc] init];
    for (NSInteger pageIndex = 1; pageIndex <= pageCount; pageIndex++) {

        //Parsing the website

        //For-loop for every object on every page
        for (NSInteger object = 0; object < [articleNumbersOnOnePageArray count]; object++) {
            //Doing other string manipulation and parsing stuff

            NSManagedObject *newArticleEntry = [NSEntityDescription insertNewObjectForEntityForName:@"Article"inManagedObjectContext:context];

            [newArticleEntry setValue:[NSString stringWithFormat:@"%@_%@", manufacturerNumber, articleNumber] forKey:@"number"];
            [newArticleEntry setValue:articleTextComplete forKey:@"text"];
            [newArticleEntry setValue:articleStatus forKey:@"status"];
            [newArticleEntry setValue:manufacturerName forKey:@"manufacturerName"];
            [newArticleEntry setValue:manufacturerNumber forKey:@"manufacturerID"];

            [articleEntitiesArray addObject:newArticleEntry];
        }
    }

    NSManagedObject *newManufacturerEntry = [NSEntityDescription insertNewObjectForEntityForName:@"Manufacturer" inManagedObjectContext:context];

    //Encoding the NSArray and setting the entity attribute to Binary Data doesn't work neither
    //NSData *arrayData = [NSKeyedArchiver archivedDataWithRootObject:articleEntitiesArray];

    [newManufacturerEntry setValue:manufacturerName forKey:@"name"];
    [newManufacturerEntry setValue:manufacturerNumber forKey:@"manufacturerID"];
    [newManufacturerEntry setValue:manufacturerCount forKey:@"count"];
    [newManufacturerEntry setValue:articleEntitiesArray forKey:@"articles"];
    NSLog(@"%@", articleEntitiesArray);
}

@end 
```

我尝试了所有我认为可以或无济于事的方法，我真的花了好几天的时间，但是当`- (IBAction)saveAction:(id)sender`调用 AppDelegate 的方法时，我总是收到以下错误：

```
[15836:a057] -[NSManagedObject encodeWithCoder:]: unrecognized selector sent to instance 0x1001896e0
[15836:a057] An uncaught exception was raised
[15836:a057] -[NSManagedObject encodeWithCoder:]: unrecognized selector sent to instance 0x1001896e0
[15836:a057] (
0   CoreFoundation                      0x00007fff8dc94716 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff8bfe6470 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff8dd2ad5a -[NSObject(NSObject) doesNotRecognizeSelector:] + 186
3   CoreFoundation                      0x00007fff8dc82c3e ___forwarding___ + 414
4   CoreFoundation                      0x00007fff8dc82a28 _CF_forwarding_prep_0 + 232
5   Foundation                          0x00007fff86931401 _encodeObject + 1163
6   Foundation                          0x00007fff869323cc -[NSKeyedArchiver _encodeArrayOfObjects:forKey:] + 410
7   Foundation                          0x00007fff869320c9 -[NSArray(NSArray) encodeWithCoder:] + 473
8   Foundation                          0x00007fff86931401 _encodeObject + 1163
9   Foundation                          0x00007fff869358f9 +[NSKeyedArchiver archivedDataWithRootObject:] + 182
10  iLoadPix                            0x0000000100003c21 -[HASArticleInitializer initialize:] + 3793
11  Foundation                          0x00007fff86926842 __NSThread__main__ + 1345
12  libsystem_c.dylib                   0x00007fff88553782 _pthread_start + 327
13  libsystem_c.dylib                   0x00007fff885401c1 thread_start + 13 
```

核心数据模型： [实体 1](http://imgur.com/lxAE9,p29CM#1) [实体 2](http://imgur.com/lxAE9,p29CM#0)

正如我所说，如果我不保存数组，一切正常，NSLog 也是正确的。如果重要的话，我会使用 NSThreads（但我不这么认为，因为其他一切都很好）:-(

请帮我！提前非常感谢！:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:50:53.697

可转换的属性是通过键控归档/取消归档来归档的......但是 NSManagedObject 并非旨在以这种方式归档。（它没有实现`NSCoding`协议。）

为了解决这个问题，您可以将托管对象转换为字典表示，但最自然的事情似乎是使用两个实体之间的核心数据关系。你没有在这里建立关系是有原因的吗？

# excel - Excel中的复制粘贴表单选项按钮

> ID：11531274
> 
> 赞同：0
> 
> 时间：2012-07-17T21:40:30.957
> 
> 标签：excel

我正在尝试使用 Excel 2007 选项按钮。我有一组是和否，所以我首先创建了一个框架并在其中放置了两个选项按钮。看起来很棒，效果很好。我用同样的东西创建了另一个组，首先是一个框架，并在其中放置了两个选项按钮。两者都是相互排斥的群体，并且工作出色。我有 100 行，需要 100 个这样的组。如果我复制粘贴整个组（框架加上两个选项按钮），选项按钮编号保持不变。因此，我无法为每个按钮分配不同的宏。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:45:14.937

右键单击要更改其宏的控件并选择`Assign Macro...`

然后从宏列表中选择您想要的任何宏名称或记录一个新名称。它是由你决定。

每个按钮都在 Excel 中单独识别，从技术上讲，它们具有不同的 ID。虽然它确实复制了形状的名称，但 Excel 显然意识到它们并不相同。Excel 可以方便地分配与复制对象相同的宏。它还方便地建议使用名称来指示对象的名称。

Excel 重复选项按钮的名称是因为它可以安全地这样做，因为它们各自位于不同的组中。如果您分别创建了所有按钮，它们将具有不同的名称。您可能会注意到这些组具有不同的名称，即使它们是复制的。事实上，如果要将选项按钮移出组，Excel 会分配新名称。

您不需要让 Excel 指示您的宏名称，Excel 用来识别对象的名称只是一个指南。使用您喜欢的任何宏名称，Excel 将按照您的规则运行。

# python - 如何修复此 IOError：[Errno 套接字错误] [Errno 11004]？

> ID：11531275
> 
> 赞同：0
> 
> 时间：2012-07-17T21:40:34.827
> 
> 标签：python, python-3.x, urllib, ioerror

这个简单的**Python 3**脚本：

```
import urllib.request

host = "scholar.google.com"
link = "/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0"
url = "http://" + host + link
filename = "cite0.bib"
print(url)
urllib.request.urlretrieve("http://scholar.google.com" + url, filename) 
```

引发此异常：

```
Traceback (most recent call last):
  File "C:/Users/ricardo/Desktop/Google-Scholar/BibTex/test2.py", line 8, in <module>
    urllib.request.urlretrieve("http://scholar.google.com" + url, filename)
  File "C:\Python32\lib\urllib\request.py", line 150, in urlretrieve
    return _urlopener.retrieve(url, filename, reporthook, data)
  File "C:\Python32\lib\urllib\request.py", line 1569, in retrieve
    fp = self.open(url, data)
  File "C:\Python32\lib\urllib\request.py", line 1541, in open
    raise IOError('socket error', msg).with_traceback(sys.exc_info()[2])
  File "C:\Python32\lib\urllib\request.py", line 1537, in open
    return getattr(self, name)(url)
  File "C:\Python32\lib\urllib\request.py", line 1715, in open_http
    return self._open_generic_http(http.client.HTTPConnection, url, data)
  File "C:\Python32\lib\urllib\request.py", line 1695, in _open_generic_http
    http_conn.request("GET", selector, headers=headers)
  File "C:\Python32\lib\http\client.py", line 967, in request
    self._send_request(method, url, body, headers)
  File "C:\Python32\lib\http\client.py", line 1005, in _send_request
    self.endheaders(body)
  File "C:\Python32\lib\http\client.py", line 963, in endheaders
    self._send_output(message_body)
  File "C:\Python32\lib\http\client.py", line 808, in _send_output
    self.send(msg)
  File "C:\Python32\lib\http\client.py", line 746, in send
    self.connect()
  File "C:\Python32\lib\http\client.py", line 724, in connect
    self.timeout, self.source_address)
  File "C:\Python32\lib\socket.py", line 386, in create_connection
    for res in getaddrinfo(host, port, 0, SOCK_STREAM):
IOError: [Errno socket error] [Errno 11004] getaddrinfo failed 
```

`print`我可以很好地打开语句产生的 url ：

> [http://scholar.google.com/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0](http://scholar.google.com/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0)

这是什么原因造成的？我尝试更改`http://`为`http:///`（三个斜杠），但引发了相同的异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:03:20.273

这是你的问题：

```
urllib.request.urlretrieve("http://scholar.google.com" + url, filename) 
```

您要添加该`http://scholar.google.com`部分两次（`url` *已经*开始`http://scholar.google.com`）。因此`urillib`认为您正在请求一个页面`scholar.google.comhttp`——不用说，这个域不存在。这正是你的错误所说的。

只是要求`url`很明显。

方便的提示以便将来更快地找到这种东西：添加`print`调试语句时，请务必打印*您正在调试的命令中使用的实际值。*`print`如果您的语句*还*连接了基本 URL，您将在大约两秒钟内找到它。

# xml - 从 clob 列中提取 xml 时出错

> ID：11531277
> 
> 赞同：1
> 
> 时间：2012-07-17T21:40:43.853
> 
> 标签：xml, oracle11g

我在包含 xml 数据的表中有一个 Clob 列。我尝试通过编写查询来提取数据：

```
select XMLTYPE.createxml(e.cdxml_index).extract('//page/fragment/text()') from chemical_structures e where e.primary_key=20; 
```

我得到的错误信息是：

错误报告：SQL 错误：ORA-31020：不允许操作，原因：出于安全原因，服务器端不允许通过 XDB 存储库进行 ftp 和 http 访问 ORA-06512：在“SYS.XMLTYPE”，第 5 行 31020。 00000 - “不允许该操作，原因：%s” *原因：不允许尝试的操作 *操作：查看原因并更改为有效操作。

clob列中的数据如下：

```
(CLOB) <?xml version="1.0"  ?>
<!DOCTYPE CDXML SYSTEM "http://www.***.com/xml/cdxml.dtd" >
<CDXML
 <page
 id="12"
 BoundingBox="0 0 540 719.75"
><fragment
 id="9"
 BoundingBox="91.5 111.75 104.01 123.21"
><n
id="8"
p="94.94 117.6"
Z="2"
Element="35"
NumHydrogens="0"
Charge="-1"
AS="N"
><t
id="7"
p="91.5 121.5"
BoundingBox="91.5 111.75 104.01 123.21"
><s font="3" size="10" face="96">Br-</s></t></n></fragment></page></CDXML> 
```

我在一个与 xml 中的 DOCTYPE 声明有关的论坛上阅读。

任何人都可以提出一种我可以使它工作的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-20T15:07:57.193

我找到了解决方法。

我不得不禁用 xml dtd 验证，但是在尝试了各种讨论板上提到的一些事情之后，这并没有奏效。

最后我决定忽略 xml 中的 doctype 声明。为此，我使用了 REGEXP_REPLACE 方法。

以下查询给了我我正在寻找的东西：

```
select extract(XMLTYPE(REGEXP_REPLACE(e.cdxml_index, '<!DOCTYPE CDXML SYSTEM "http://***/xml/cdxml.dtd" >', '')),'//page/fragment/n') from chemical_structures e where e.primary_key=20; 
```

我得到以下输出：

```
<n
id="8"
p="94.94 117.6"
Z="2"
Element="35"
NumHydrogens="0"
Charge="-1"
AS="N"
><t
id="7"
p="91.5 121.5"
BoundingBox="91.5 111.75 104.01 123.21"
><s font="3" size="10" face="96">Br-</s></t></n> 
```

# asp.net-mvc-3 - 我的数据库文件在哪里？

> ID：11531279
> 
> 赞同：0
> 
> 时间：2012-07-17T21:40:59.980
> 
> 标签：asp.net-mvc-3, entity-framework-4.1, nunit, connection-string

我在 App_Data/ASPNETDB.MDF 下有一个带有本地数据库的 MVC3 Web 应用程序。我还有一个用于运行 NUnit 的集成测试项目。它有一些从数据库中读取的测试。我将连接字符串从 MVC 项目的 web.config 复制到测试项目的 app.config。这两个项目都使用实体框架代码优先。

我的网站运行良好。我的测试运行良好。但两个项目的数据不同。Ergo ...他们使用不同的数据库，对吗？

```
<head scratch="true">
    <puzzledLook />
</head> 
```

我的问题

1.  它们真的是不同的数据库吗？
2.  测试项目的数据库文件在哪里？我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:52:05.557

测试运行会创建一个测试文件夹。您的数据库文件是否标记为复制到输出目录？在那种情况下你能不加吗

```
Assembly.GetExecutingAssembly().Location 
```

你的任何单元测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:02:29.867

我认为上面的答案是正确的，尽管我会使用 Environment.GetCommandLineArgs()[0]

我的测试项目的一个例子是 c:\program files\microsoft visual studio 9.0\common7\ide\

我好像记得AppData文件夹被复制到exe的位置，这样它运行的时候就可以找到数据了

导致该问题的原因是单元测试由名为 VSTestHost.exe 的单独可执行文件运行

# c++ - QPixmap 图像文件未出现在 QGraphicsScene 上

> ID：11531280
> 
> 赞同：0
> 
> 时间：2012-07-17T21:41:02.683
> 
> 标签：c++, qt, qt4, qgraphicsscene, qpixmap

`Qt`通过修改[图表场景示例](http://doc.qt.nokia.com/4.7-snapshot/graphicsview-diagramscene.html)，我希望我的窗口在用户单击所描述的区域时显示覆盖对象`GraphicalScene`（原始示例显示代替`QPolygon`）。在下面的代码中，我使用`QPixmap`. 但是，单击该区域时不会出现任何内容。`mousePressEvent`通过点击的合理位置。感谢你的帮助。

图场景.cpp：

```
#include <iostream>
#include <QtGui>
#include <QPixmap>

#include "pkg/diagramscene.h"
#include "pkg/arrow.h"

DiagramScene::DiagramScene(QMenu *itemMenu, QObject *parent)
    : QGraphicsScene(parent)
{
    myItemMenu = itemMenu;
    myMode = MoveItem;
    myItemType = DiagramOverlayPixmapItem::Overlay;
}

void DiagramScene::mousePressEvent(QGraphicsSceneMouseEvent *mouseEvent)
{
    if (mouseEvent->button() != Qt::LeftButton) return;
    DiagramOverlayPixmapItem *item;
    switch (this->myMode) {
        case InsertItem: {
            const std::string tmpImgPathBase = "~/images/";
            std::string overlayObj = tmpImgPathBase + "overlayObj.png";
            QPixmap *img = new QPixmap(QString(overlayObj.c_str()));

            item = new DiagramOverlayPixmapItem(myItemType, myItemMenu, img);
            item->setPos(mouseEvent->scenePos());
            this->addPixmap(item->pixmap());  // QGraphicsScene::addPixmap.
            this->update();     // Expecting these parts would do the work..
        }
            break;
        default:
            ;
    }
    QGraphicsScene::mousePressEvent(mouseEvent);
} 
```

图OverlayPixmapItem.cpp：

```
#include <iostream>
#include <QtGui>    
#include "pkg/arrow.h"
#include "pkg/diagramOverlayPixmapItem.h"

DiagramOverlayPixmapItem::DiagramOverlayPixmapItem(DiagramType diagramType, QMenu *contextMenu, QPixmap *img, QGraphicsItem *parent, QGraphicsScene *scene)
    : QGraphicsPixmapItem(*img, parent)
{
    myDiagramType = diagramType;
    myContextMenu = contextMenu;
    setFlag(QGraphicsItem::ItemIsMovable, true);
    setFlag(QGraphicsItem::ItemIsSelectable, true);
    setFlag(QGraphicsItem::ItemSendsGeometryChanges, true);
}

void DiagramOverlayPixmapItem::contextMenuEvent(QGraphicsSceneContextMenuEvent *event)
{
    scene()->clearSelection();
    setSelected(true);
    myContextMenu->exec(event->screenPos());
}

QVariant DiagramOverlayPixmapItem::itemChange(GraphicsItemChange change,
                                              const QVariant &value)
{
    if (change == QGraphicsItem::ItemPositionChange) {
        foreach (Arrow *arrow, arrows) {
            arrow->updatePosition();
        }
    }
    return value;
} 
```

[这个线程](https://stackoverflow.com/questions/8766584/displayin-an-image-in-a-qgraphicsscene)是相似的（虽然它在`python`）但没有给我一个想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:41:34.597

**`"~"`不是有效路径。这是一个[外壳扩展](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_04.html)。**将其替换为：

```
QDir::homePath() 
```

它返回一个`QString`当前用户的主目录。[文档](http://qt-project.org/doc/qdir.html#homePath)说：

> 在非 Windows 操作系统下，使用 HOME 环境变量（如果存在） [...]

* * *

顺便说一句，你为什么使用`std::string`？您应该`QString`在 Qt 应用程序中使用。

您还可以通过以下方式使用`QDir`路径构建机制：

```
QDir tmpImgPathBase = QDir::home(); //home() returns a QDir, homePath() a QString
tmoImgPathBase.cd("images"); //navigate to relative directory
QString overlayObj = tmoImgPathBase.filePath("overlayObj.png"); //file in direct.
QPixmap *img = new QPixmap(overlayObj); 
```

请注意，您也不应该在 C++ 中过度使用指针。pixmap 不需要是一个指针（你永远不会在这里删除它，这会导致内存泄漏！）：

```
QPixmap img = QPixmap(overlayObj);
item = new DiagramOverlayPixmapItem(myItemType, myItemMenu, img); 
```

和

```
// I removed the asterisk at both the argument img and the
// forwarding to the constructor of QGraphicsPixmapItem.
DiagramOverlayPixmapItem::DiagramOverlayPixmapItem(DiagramType diagramType, QMenu *contextMenu, QPixmap img, QGraphicsItem *parent, QGraphicsScene *scene)
    : QGraphicsPixmapItem(img, parent)
{
    ...
} 
```

# perl - 用于管道脚本和命令的 Perl Shell Wrapper

> ID：11531286
> 
> 赞同：1
> 
> 时间：2012-07-17T21:41:29.613
> 
> 标签：perl, shell, command, bioinformatics, pipeline

我正在从事一个生物信息学项目，该项目涉及将不同的脚本和输入参数连接在一起，以分析下一代测序 Illumina 数据。我需要有关包装脚本的帮助。回想一下，*包装器*是嵌入系统命令或实用程序的 shell 脚本，它接受一组参数并将其传递给该命令。将脚本包裹在复杂的命令行周围可以简化调用它。

这是代码的最小表示：

```
#!/usr/bin/perl
use strict; use warnings;

my $barcode_file= shift;
unless($barcode_file){
    die "missing barcode file location, aborting.\n";
}

my $raw_data_location = '/data/local/samples/';
my $components_location= '~/read_cleanup/';
my $tmp_dir= '/tmp/';

open (FILEIN, $barcode_file) or die "couldn't open $barcode_file for read: $!\n";

while(<FILEIN>){
# input file format (tab delimited):
# Sample_Name    barcode    enzyme    size    paired    seq_file

    /^$/ and next; chomp;

    my ($sample, $barcode, $enzyme, $size, $pe, $seq_file)= split;

    $raw_file_data = "${raw_data_location}$seq_file"; #/data/local/samples/301.fq for instance

    # final output file
    my $final_output_file = "${tmp_dir}${sample}_reconciled_ends.fq"; # /tmp/D1_reconciled_ends.fq for instance

    # if the sample is paired ( 1 - paired, 0 - unpaired)
    if ($pe) {
        my $pipe_cmd= "${components_location}script01.pl $raw_data_file $barcode | ${components_location}script02.pl $enzyme | ${components_location}script03.pl  $size > $final_output_file";
    }
    system($pipe_cmd);

# at this point, $final_output_file should be saved in the
# tmp folder and contain the paired fastq data output

}
close (FILEIN); 
```

基本上，包装器读取barcode.txt 文件并遍历文件的每一行（样本名称）。对于每个样本名称，它会为管道运行中的每个脚本生成输入参数。如果样本是配对数据，那么我们会进行管道运行。管道方案是这样的：

```
# the input parameters are "fed" into the script and the output is piped
# as STDIN to the next script.
script01.pl [input parameters] | script02.pl [input parameters] | script03.pl [input parameters] > file.txt 
```

`system($piped_cmd)`在终端中执行管道运行。

当我尝试从终端运行包装脚本时，这就是我遇到麻烦的地方：

`./wrapper_example.pl barcode.txt`

它返回以下错误消息：

`sh: 1: /home/user/read_cleanup/script01.pl: not found`

有谁知道出了什么问题或如何解决这个问题？谢谢。非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T01:27:42.403

好吧，`system()`语法是`system("$command","$args1","$args2")`OR `system(@command)`where `@command=("$command","$arg1","$arg2")`。我宁愿使用反引号来运行整个命令链，例如-

```
if ($pe) {
    `perl ${components_location}script01.pl $raw_data_file $barcode | perl ${components_location}script02.pl $enzyme | perl ${components_location}script03.pl  $size > $final_output_file`;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:30:46.670

最有可能的是，/home/user/read_cleanup/script01.pl 不是可执行文件，或者它的 shebang（以 开头的第一行`#!`）指向错误的 Perl。如果没有更多细节，很难进一步排除故障。

# java - Java/JavaScript 日期：这是真的吗？

> ID：11531291
> 
> 赞同：10
> 
> 时间：2012-07-17T21:41:46.067
> 
> 标签：java, javascript, date

因此，假设用户在与应用程序服务器不同的时区从他的浏览器运行我的 Web 应用程序。`date.getTime()`我使用 JavaScript 的方法在客户端序列化日期。我通过 Json 发送生成的毫秒数，然后通过调用在服务器端创建一个 Java Date 对象`new Date(millisecondsFromJS)`。我将它存储在 MySql 上，检索它，通过调用 Java 再次对其进行序列化，`date.getTime()`并通过 Json 再次将其发送给客户端。

如果我用这些毫秒创建一个 JavaScript Date 对象，它会产生原始日期吗？我已经成功完成了这个过程，但是客户端和服务器目前在同一个时区。如果时区不同，我不确定日期是否会在此过程中损坏。

据我了解，使用 getTime() 返回一个与时区无关的瞬间。例如，如果用户捕获 2012 年 7 月 17 日下午 4:39 CDT，服务器可能会将其存储为 2012 年 7 月 17 日晚上 11:39 CEST，但是一旦服务器将其转换为自 GMT 以来的毫秒数并且客户端创建一个从这些毫秒开始，它将成功地重建原始的 2012 年 7 月 17 日 CDT 下午 4:39。这是真的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T22:14:27.133

[在 Dropbox 的扩展经验教训](http://eranki.tumblr.com/post/27076431887/scaling-lessons-learned-at-dropbox-part-1)文章第 1 部分中有一些很好的建议：

> **内部保持 UTC 格式**！服务器时间，数据库中的东西等。这将节省很多麻烦，而不仅仅是夏令时。有些软件甚至不能正确处理非 UTC 时间，所以不要这样做！我们将墙上的时钟设置为 UTC。当您想向用户显示时间时，请在最后一秒进行时区转换。

* * *

将 unix 时间毫秒数发送到服务器，您就知道用户选择了哪个时间点。然后以 UTC 处理服务器上的所有内容并将毫秒整数返回给客户端。

客户端/JavaScript：

```
var date = new Date();
var clientMilliseconds = date.getTime();
// send clientMilliseconds to server 
```

服务器/Java：

```
Date date = new Date(clientMilliseconds);
// store the date, then get it back
long serverMilliseconds = date.getTime();
// send serverMilliseconds back to client 
```

客户端/JavaScript：

```
var date = new Date(serverMilliseconds);
// If receiving the error "Invalid Date", serverMilliseconds
// needs to be converted to an Integer. Consider:
// parseInt: parseInt(serverMilliseconds, 10)
// unary +:  (+serverMilliseconds) 
```

在此过程中，`date`服务器和客户端上的对象都将反映各自的时区，因此如果您同时查看两者，它们可能看起来不同，但如果您使用相同的时区将它们转换回 UTC，它们就不是了。

* * *

所以回答你的问题：

> 如果我用这些毫秒创建一个 JavaScript Date 对象，它会产生原始日期吗？

是的。

Java 的[`Date(long date)`构造函数](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#Date%28long%29)和[`getTime()`方法](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime%28%29)以 unix 时间毫秒运行。JavaScript[`getTime()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date/getTime)和[`Date`构造函数](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)也是如此。[除了协调世界时](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)(GMT/UTC)之外，不应涉及其他时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:47:36.653

有一些问题

*   客户在不同的时区。如果您使用 等，这不是真正的问题`.getTime()`，`.valueOf()`因为根据 UTC，它们自 epoch 以来使用 ms。
*   真正的问题是客户的时钟可能会出现偏差。例如，如果有人为了避免注册某些程序而及时设置了他们的计算机，这将导致客户端生成错误的时间戳
*   它们也可能有少量的偏斜，只是因为时钟这样不准确

您可以通过从服务器发送时间戳然后将其与客户端生成的时间戳进行比较来解决此问题，以获得偏度偏移量。然后，您将此偏斜偏移应用于`new Date.getTime()`您在客户端生成的所有 s。尽管如果客户在使用您的页面时更改其系统时间，这将不起作用。

# embedded - 嵌入式设备中的 ext2/ext3

> ID：11531294
> 
> 赞同：1
> 
> 时间：2012-07-17T21:42:02.673
> 
> 标签：embedded, ext3, ext2

我希望能够在嵌入式设备中使用 ext2 或 ext3 文件系统，而不必使用 Linux。我计划安装一个带有 SATA 硬盘驱动器的嵌入式处理器。我在 Kernel.org 上找到了源代码，但我不确定如何使用它。理想情况下，我想要一些可以调用的函数来写入/读取文件等。是否有任何关于此的文档或有人做过类似的事情。

谢谢

乔恩

# java - Jackson objectMapping 未获取 JSON 数据

> ID：11531298
> 
> 赞同：2
> 
> 时间：2012-07-17T21:42:26.177
> 
> 标签：java, json, recursion, jackson

我正在使用 Jackson objectMapper 来解析 JSON 字符串。我将 JSON 分配给了某个对象 RuleModel，其中

JSON是

```
"{'ruleId': 1000000,
Formula': {
    'ruleAggregates': 'foo',
    'fields': ['foo', 'foo'],
    'Children':[{ 
        'Formula':
             {'ruleAggregates': 'a',
              'fields': ['1', '2'],
              'Children': []}},
      { 'Formula':
              {'ruleAggregates': 'b',
               'fields': ['3', '4'],
               'Children': []}},
         {}
     ]}}", 
```

而java模型是

```
RuleModel{
private long ruleId;
private Formula formula;
} 
```

公式是

```
Formula{
private String ruleAggregates
private List<String> fields;
private List<FormulaModel> Children;
} 
```

我可以获取 ruleId 值和第一个 ruleAggregates 的 ruleAggregates 值，但是当我尝试进入 Children 时，它会获取 Formulas 而不是里面的值所以当我从孩子中获取任何值时我会得到空值

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-19T05:09:23.943

以下是从原始问题反序列化 JSON 的示例（在必要时进行了更正以确保有效性）。此示例还演示了如何配置 Jackson 以允许使用单引号 JSON 元素。

从最初的问题来看，我不明白尝试反序列化 JSON 的具体问题在哪里。对于简单的数据绑定，请注意 Java 属性名称必须与 JSON 元素名称匹配，并且 Java 数据结构必须与 JSON 数据结构匹配。

**输入.json**

```
{
    'ruleId': 1000000,
    'Formula': 
    {
        'ruleAggregates': 'foo',
        'fields': ['foo', 'foo'],
        'Children':
        [
            { 
                'Formula':
                {
                    'ruleAggregates': 'a',
                    'fields': ['1', '2'],
                    'Children': []
                }
            },
            {
                'Formula':
                {
                    'ruleAggregates': 'b',
                    'fields': ['3', '4'],
                    'Children': []
                }
            },
            {}
        ]
    }
} 
```

**Java 对象模型**

```
import com.fasterxml.jackson.annotation.JsonProperty;

class RuleModel
{
  private long ruleId;
  @JsonProperty("Formula") private Formula formula;
}

class Formula
{
  private String ruleAggregates;
  private List<String> fields;
  private List<FormulaModel> Children;
}

class FormulaModel
{
  @JsonProperty("Formula") private Formula formula;
} 
```

**JacksonFoo.java**

```
import java.io.File;
import java.util.List;

import com.fasterxml.jackson.annotation.PropertyAccessor;
import com.fasterxml.jackson.annotation.JsonAutoDetect.Visibility;
import com.fasterxml.jackson.core.JsonParser;
import com.fasterxml.jackson.databind.ObjectMapper;

public class JacksonFoo
{
  public static void main(String[] args) throws Exception
  {
    ObjectMapper mapper = new ObjectMapper();
    mapper.configure(JsonParser.Feature.ALLOW_SINGLE_QUOTES, true);
    mapper.setVisibility(PropertyAccessor.FIELD, Visibility.ANY);

    RuleModel model = mapper.readValue(new File("input.json"), RuleModel.class);
    System.out.println(mapper.writeValueAsString(model));
  }
} 
```

**输出：**

```
{
    "ruleId": 1000000,
    "Formula": {
        "ruleAggregates": "foo",
        "fields": [
            "foo",
            "foo"
        ],
        "Children": [
            {
                "Formula": {
                    "ruleAggregates": "a",
                    "fields": [
                        "1",
                        "2"
                    ],
                    "Children": []
                }
            },
            {
                "Formula": {
                    "ruleAggregates": "b",
                    "fields": [
                        "3",
                        "4"
                    ],
                    "Children": []
                }
            },
            {
                "Formula": null
            }
        ]
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:08:09.273

Childeren 以大写 C 开头，jackson 如果我没记错的话，jackson 的默认行为是驼峰式。换句话说，杰克逊搜索“childeren”。您可以使用此字段注释覆盖属性名称。

```
@JsonProperty("Children")
private List<FormulaModel> Children; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:20:25.223

在 JSON 中：字段名称使用双引号；以小写开头的字段名称；

在 Java 中：为字段添加 getter 和 setter 方法；实现 java.io.Serializable 可能会有所帮助；

您还可以使用在线 json 验证器工具，例如[http://jsonlint.com/](http://jsonlint.com/)

# javascript - 进度条中的 html 会话超时

> ID：11531299
> 
> 赞同：0
> 
> 时间：2012-07-17T21:42:34.503
> 
> 标签：javascript, html

在获取正确的代码以在我的 html 页面的进度栏中显示会话超时倒计时时，我遇到了一些困难。

任何人都可以帮助我做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:02:13.657

我在互联网上搜索并找到了[一个](http://www.daniweb.com/web-development/php/threads/124500/session-time-out-in-php)关于如何做到这一点的示例。这是一个简单的例子 -`$inactive`变量是会话到期时间，例如`600`秒）：

```
function start_onload(){
    var expire_time = new Date().getTime() + 1000*<?php echo $inactive; ?>;
    countdown_session_timeout();
    function countdown_session_timeout() {
        var current_time = new Date().getTime();
        var remaining = Math.floor((expire_time - current_time)/1000);
        var timeout_message = document.getElementById('timeout_message');
        if (remaining>0) {
            timeout_message.innerHTML = 'Session will expire in '+ Math.floor(remaining/60) + ' min. ' + (remaining%60) + ' sec.';
            setTimeout(countdown_session_timeout, 1000);
        } else {
            timeout_message.innerHTML = 'Session expired.';
        }
} 
```

}

这里的PHP 脚本：http: [//pastebin.com/Dik0hyYd](http://pastebin.com/Dik0hyYd) （这些会话仅作为示例。）

# coffeescript - 将咖啡脚本类拆分为单独的文件时，是否需要遵循特殊规则？

> ID：11531300
> 
> 赞同：0
> 
> 时间：2012-07-17T21:42:39.217
> 
> 标签：coffeescript

我试图通过将所有类拉到单独的文件中来更改一些其他工作代码。这适用于大多数类，除了它读取的部分`class window.Timeline`。错误消息读取`ReferenceError: window is not defined`

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T03:32:40.817

听起来您的包含该类的文件没有加载到窗口上下文中。它是否有可能在另一个类的上下文中加载？[您可以在jsFiddle](http://jsfiddle.net)中发布一些 cod 示例吗？

将咖啡脚本符号导出到父上下文时，我通常遵循的模式是

```
exports = exports ? this
class MyClass
    someField: false
exports.MyClass = MyClass 
```

如果您使用的是现代浏览器并且知道如何访问调试控制台，您可以将

```
console.log this 
```

在引发引用错误的文件末尾。这将允许您查看`this`上下文是什么，这可能有助于您进行故障排除。

# c++ - 依赖类的 C++ 继承和实例化

> ID：11531302
> 
> 赞同：0
> 
> 时间：2012-07-17T21:42:52.870
> 
> 标签：c++, inheritance, nested-class

我正在尝试使用敏捷库扩展现有应用程序。该库迫使我创建一个具体的接口类，`InterfaceToA`以连接到我的应用程序。然而，在我的应用程序中，实例化这个对象的最自然的地方（没有主要的重构）是在另一个类的`ClassA`实现中。我真的需要接口类来访问所有`ClassA`数据和成员函数（继承自）。所以像：

```
// Class declarations
class ClassA {
  public:
     double thing1;
     double thing2;
     f( double arg1, double arg2 );
     ff()
};

class InterfaceToA : public ClassA {
  public:
     g( double arg1, double arg2 );
};

// Class implementations
double ClassA::f( double arg1, double arg2 ){
    InterfaceToA interface;
    return interface.g(arg1,arg2);
}

double ClassA::ff(){
    return 1;
}

double InterfaceToA::g( double arg1, double arg2 ){
    return (arg1 + thing1) - (arg2 + thing2) + ff();
}

//Main function
int main(){
    ClassA myClassA;

    myClassA.thing1 = 1;
    myClassA.thing2 = 3;

    double output;

    output = myClassA.f(5,1);

    std::cout << str(output) << std::endl;

    return 0;
} 
```

在这种情况下，预期`output`将是`3`, `(5+1) - (1+3) + 1 = 3`。这在 C++ 中是否可行，我一直在尝试使用继承和嵌套类来考虑这一点，但我完全可以弄清楚如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:50:59.677

我能够弄清楚。我需要传递对`ClassA`into的引用`InterfaceToA::g`。最终的可编译代码如下

```
#include<iostream>

// Class declarations
class ClassA {
  public:
    double thing1;
    double thing2;
    double f( double arg1, double arg2 );
    double ff();
};

class InterfaceToA : public ClassA {
  public:
    double g( ClassA &myClass, double arg1, double arg2 );
};

// Class implementations
double ClassA::f( double arg1, double arg2 ){
    InterfaceToA interface;
    return interface.g(*this,arg1,arg2);
}

double ClassA::ff(){
   return 1;
}

double InterfaceToA::g( ClassA & myClass, double arg1, double arg2 ){
    return (arg1 + myClass.thing1) - (arg2 + myClass.thing2) + myClass.ff();
}

//Main function
int main(){
    ClassA myClassA;

    myClassA.thing1 = 1;
    myClassA.thing2 = 3;

    double output;

    output = myClassA.f(5,1);

    std::cout << output << std::endl;

    return 0;
} 
```

# ruby-on-rails-3.2 - 未定义 _other_node in nil:NilClass 错误 Neo4j with rails

> ID：11531308
> 
> 赞同：1
> 
> 时间：2012-07-17T21:43:36.697
> 
> 标签：ruby-on-rails-3.2, neo4j

我正在使用带有 Rails 3.2.1 的 Neo4j 2.0.1。我收到一个看起来非常基本的错误，但我似乎无法解决它。我将不胜感激任何帮助！

这是我的代码片段：

```
rels1 = identity1.rels(:outgoing,:friends)
if !rels1.nil? and rels1.count > 0
  friendships12 = rels1.to_other(identity2)
end 
```

其中 identity1 和 identity2 是 Neo4j::Rails::Model 子类的对象。

我得到的错误是在“friendships12 = ....”这一行上，它说

```
"undefined method `_other_node' for nil:NilClass" 
```

我究竟做错了什么？最初我尝试了明显的：

```
friendships12 = identity1.rels(:outgoing,:friends).to_other(identity2) 
```

这是基于 neo4j 的 rails 指南（http://neo4j.rubyforge.org/guides/basic.html，请参阅“查找两个节点之间的关系”）。但这给了我同样的错误，这就是我如上所述尝试的原因。但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:42:14.857

我遇到了同样的错误，我不知道原因。我通过使用 select 并寻找结束节点来解决它。

```
identity1.rels(:outgoing, :friends).select{|r| r.end_node == identity2}.first 
```

此外，请确保在创建关系后保存节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:12:10.877

你试过做'puts rels1'吗？

如果身份和关系之间存在一对多关系[我猜是]，那么执行 identity1.rels 将返回一个数组。您可以通过执行 'puts rels1' 检查是否发生这种情况，如果 rels1 是一个数组，那么您需要执行 rels1.first 以获取关系对象，然后对其执行 to_other。

编辑：我浏览了[http://neo4j.rubyforge.org/guides/basic.html](http://neo4j.rubyforge.org/guides/basic.html)并注意到了这一点：

```
node1.rels # => an *Enumerable* of all incoming and outgoing relationship of any type 
```

这意味着你需要做类似的事情

```
identity1.rels(:outgoing,:friends).to_other(identity2) do |x|
# Your code that works with relation object x, here
end 
```

本质上，您正在遍历每个关系对象。

阅读此 [http://ruby.bastardsbook.com/chapters/enumerables/] 了解更多信息。

# php - 在 PHP 中访问多维数组中的信息时遇到问题

> ID：11531309
> 
> 赞同：0
> 
> 时间：2012-07-17T21:43:39.550
> 
> 标签：php, arrays, multidimensional-array, rss

我正在尝试解析 RSS 提要中最新的 3 篇新闻文章。之后，它应该创建描述的“预览”，然后显示标题和预览。我让它显示第一篇文章 3 次...

```
<?php
$doc = new DOMDocument();
$doc->load('http://info.arkmediainc.com/CMS/UI/Modules/BizBlogger/rss.aspx?tabid=575593&moduleid=1167800&maxcount=25&t=16c4c7582db87da06664437e98a74210');
$arrFeeds = array();
foreach ($doc->getElementsByTagName('item') as $node) {
    $itemRSS = array ( 
        'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
        'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
        'description' => $node->getElementsByTagName('description')->item(0)->nodeValue,
        'pubDate' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue
    );
    array_push($arrFeeds, $itemRSS);
}
$itemRSS = array_slice($itemRSS, 0, 3); // This cuts it down to 3 articles.

for ($i = 0; $i < 3; $i++) 
{
    $title = $itemRSS['title'];
    $description = substr($itemRSS['description'],0,100);
    echo("<h2>".$title."</h2>");
    echo("<br />".$description."<br />");
}
?> 
```

我还通过使用 foreach 循环让它“工作”（显示前 3 个）......

```
/*
foreach($itemRSS as $ira)
{
    $title = $itemRSS['title'];
    $description = substr($itemRSS['description'],0,100);
    echo("<h2>".$title."</h2>");
    echo("<br />".$description."<br />");
}
*/ 
```

它被注释掉了，因为它对我来说意义不大。

请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:03:43.480

当您使用 foreach 时，它接受两个（在您的情况下，但可以有 3 个）可能的“参数”。要遍历的数组和存储每个元素的变量。这个例子：

```
$numbers = array('one', 'two');
foreach($numbers as $number) {
    echo "\nNew Iteration\n";
    var_dump($numbers);
    var_dump($number);
} 
```

[将输出](http://codepad.viper-7.com/Quhh48)：

```
New Iteration
array(2) {
  [0] => string(3) "one"
  [1] => string(3) "two"
}
string(3) "one"

New Iteration
array(2) {
  [0] => string(3) "one"
  [1] => string(3) "two"
}
string(3) "two" 
```

迭代器从不修改数组。它只是设置`$number`为数组中每个元素的值，直到没有更多元素为止。同样的原理也适用于`for`循环。下面的代码[将产生与上面相同的结果](http://codepad.viper-7.com/ooFmOB)。

```
$numbers = array('one', 'two');
for($i = 0; $i < count($numbers); $i++) {
    echo "\nNew Iteration\n";
    var_dump($numbers);
    var_dump($numbers[$i]);
} 
```

使用多维数组时也是如此。无论您选择`for`还是`foreach`，您都必须访问数组中的每个元素。所以你的代码看起来像这样：

```
foreach($rssItems as $rssItem)
{
    $title = $rssItem['title'];
    $description = substr($rssItem['description'],0,100);
    echo("<h2>".$title."</h2>");
    echo("<br />".$description."<br />");
} 
```

我选择使用 foreach 是因为我发现让 PHP 处理迭代要容易得多。另外，该`foreach`行用英语正确阅读。对于`$rssItems`别名中的每个项目，它为`$rssItem`. 注意复数和单数的区别。为每个`foreach`项目运行它的块，`$rssItems`并且对于每次迭代，变量`$rssItem`将包含循环打开时的当前值`$rssItems`。

想要更多使用理由`foreach`？如果您也需要使用键，foreach 将为您提供散列（数组）中每个元素的键和值。

```
$words = array('hola' => 'hello', 'adios' => 'goodbye', 'gracias' => 'thank you');
foreach($words as $spanishWord => $englishTranslation) {
    echo $spanishWord . " in English is " . $englishTranslation . "\n";
} 
```

Foreach 还允许您使用[SPL](http://php.net/manual/en/book.spl.php)编写扩展或实现迭代器的类。包含集合的类可以作为一个类发挥作用，但可以迭代。例如：

```
class PhotoAlbum implements IteratorAggregate {
    private $pictures = array();

    public function __construct($pictures) {
        $this->pictures = $pictures;
    }

    public function addPicture($picture) {
        $this->pictures[] = $picture;
    }

    public function share($friend) {
        // etc..
    }

    public function getIterator() {
        return new ArrayIterator($this->pictures);
    }
}

$album = new PhotoAlbum($picturesArrayFromDB);
foreach($album as $picture) {
    echo $picture;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T21:48:16.850

您已将 rss 项推送到 中`$arrFeeds`，现在您可以通过索引访问这些项，例如`$arrFeeds[0]`将是第一个 rss 项。

```
for ($i = 0; $i < 3; $i++) 
{
  $title = $arrFeeds[$i]['title'];
  $description = substr($arrFeeds[$i]['description'],0,100);
  echo("<h2>".$title."</h2>");
  echo("<br />".$description."<br />");
} 
```

**但以下更好：** with `foreach`：

```
$theFirstThreeArticles = array_slice($arrFeeds, 0, 3); // This cuts it down to 3 articles.

foreach($theFirstThreeArticles as $ira)
{
  $title = $ira['title'];
  $description = substr($ira['description'],0,100);
  echo("<h2>".$title."</h2>");
  echo("<br />".$description."<br />");
} 
```

# perl - 不包括括号的字符串匹配

> ID：11531310
> 
> 赞同：0
> 
> 时间：2012-07-17T21:43:56.317
> 
> 标签：perl, brackets

以下两个字符串完全相同，但我无法使用正则表达式匹配？有人可以帮助我吗？

```
$x="Enzyme(s)"; $y="Enzyme(s)";

if ($x =~ /^$y$/){print "String Matches"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-02T09:33:57.033

使用[quotemeta](http://perldoc.perl.org/functions/quotemeta.html)：

```
my $x="Enzyme(s)";
my $y="Enzyme(s)";
$y = quotemeta($y);
if ($x =~ /^$y$/){print "String Matches"}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:21:00.823

匹配字符串中的括号 $y 被解释为分组或捕获。它们需要被“转义”，以便它们可以被视为普通字符。

在分配 $y 之后添加以下代码。

```
$y =~ s/\(/\\(/g;  # escape left parens
$y =~ s/\)/\\)/g;  # escape right parens 
```

“s”代表“替代”。
“g”代表“全局”替换。即，替换字符串中的所有匹配项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-02T09:54:42.027

您应该使用`quotemeta`已经提到的 M42，或者为了避免额外的代码行和 $y 变量的永久更改，您可以`\Q...\E`在正则表达式中使用禁用范围内的所有模式元字符：

```
my $x="Enzyme(s)";
my $y="Enzyme(s)";
if ($x =~ /^\Q$y\E$/){print "String Matches"}; 
```

# c++ - 更改类中的向量值时出错

> ID：11531311
> 
> 赞同：0
> 
> 时间：2012-07-17T21:44:12.210
> 
> 标签：c++, class, variables, vector, double

我正在尝试使用类的函数更改向量中的值，该向量是类中的变量。当我编译时，我得到以下指向“check[c] = cval;”的错误 线：

*   错误 C3867：“acc::check”：函数调用缺少参数列表；使用 '&acc::check' 创建指向成员的指针

*   错误 C2109：下标需要数组或指针类型

注意：我已经在程序的其他地方将 C 初始化为 0。它可能会引发错误，因为我给地址一个变量而不是整数，但是当我用整数替换变量时，我仍然得到相同的错误。

```
 #include <iostream>
    #include <fstream>
    #include <string>
    #include <vector>
    #include <cstring>

    using namespace std;

    class acc
    {
    public:
        void add_Cval(double cval);

    private:
        vector<double> check(); //vector of all checks
        int c;                  //loop marker for cvals
    };

    void acc::add_Cval(double cval)
    {
        check[c] = cval;
        c++;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T21:46:08.620

`vector<double> check();`不是你想的那样。您刚刚声明了一个名为的函数，该函数`check`返回一个`vector<double>`. 像这样去掉括号`vector<double> check;`。

此外，你是空的，如果你想这样做（或使用） `vector<double>`，你需要给它一些空间，在构造函数中分配空间（使用“初始化列表”，因为它们就是这样）：`check[c] = cval;``check.push_back(cval);`

例子：

```
acc(int vecsize) : check(vecsize), c(0) {} 
```

您可能还想`check[c]`在为它分配任何东西之前确保它是向量中的有效位置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T21:45:18.147

`check`是一个方法，而不是一个数据成员，所以你需要调用它 - `check()`.

```
void acc::add_Cval(double cval)
{
    check()[c] = cval;
    c++;
} 
```

或使其成为数据成员：

```
class acc
{
public:
    void add_Cval(double cval);

private:
    vector<double> check; //vector of all checks
    int c;                  //loop marker for cvals
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T21:47:52.700

编译器正在寻找一个调用的函数，该函数`check()`返回一个 double 类型的向量。

```
private:
    vector<double> check(); // A private function that returns a vector of type <double> 
```

需要是：

```
private:
    vector<double> check;  // A private data member 
```

# java - 如何在自己的java编写程序中控制另一个程序？

> ID：11531318
> 
> 赞同：0
> 
> 时间：2012-07-17T21:44:35.900
> 
> 标签：java, eclipse, controls, save

我想用 Eclipse 用 Ja​​va 语言问你一些简单的问题，因为我学习 C# 语言大约 2 年，大约几天我开始直接学习这种语言（Java），现在我所做的只是编写一个简单的程序，比如我现在正在做的一个，它就像一个主密码程序，它获取您的 facebook、gmail 和 hotmail 的 ID 和密码，然后提示您输入自己的简短名称和密码，这将节省您的时间并使其更容易让您登录任何需要登录的站点，因此避免使用键盘记录器（间谍软件）....命令或将字符串变量传递到 msn messenger 程序窗口中的文本框，这是我尝试将变量（如输入 ID）传递到信使中的用户名文本框的行，对于传递输入也是如此……

**我希望你也告诉我的事情：我如何制作一个不会像原始密码一样重复第一次输入的保存文件，我的意思是下一次使用只会让你输入你的 ID 和主密码，我该怎么做控制程序不仅仅是粘贴字符串。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:38:31.897

用于`java.awt.Robot`查找 MSN Messenger 窗口并输入。

# ruby-on-rails - 嵌套资源与/和/或 CanCan？

> ID：11531320
> 
> 赞同：0
> 
> 时间：2012-07-17T21:44:49.020
> 
> 标签：ruby-on-rails, cancan, nested-resources

我正在使用带有 CanCan gem 的 Rails 3。模型`Users`和`Networks`是一个 `has_many :through => Roles`。这部分工作正常。

目前我正在使用 CanCan，以便在 /networks 页面上，如果用户有权访问它，它只会显示一个网络。这也很好用。

我知道 CanCan 可以与嵌套资源结合使用，但是 /users/1/networks 的路由是多余的吗？可选的？鼓励？RESTful？导轨-y？有什么特别的理由吗？我只希望用户能够看到他们有权访问的网络，但如果我已经将网络索引用作过滤器，我不确定嵌套资源是否是更合适的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T01:24:34.980

对我来说，路线应该在使用您的应用程序的人的上下文中有意义。如果您以可以 CRUD 路由的管理员身份登录，我希望通过 /networks 完成此操作，因为您所做的与路由相关的所有事情都将发生在这里。

```
/networks            #list all networks
/networks/new        #add network
/networks/1          #show network
/networks/1/edit     #edit network 
```

然而，从用户的角度来看，他们能够将自己添加/删除到新网络或查看他们所在的网络是有意义的。

```
/users/1/networks         #show networks user is in
/users/1/networks/add     #add self to network
/users/1/networks/delete  #remove self from network 
```

# ruby - Windows7 x64 Ruby 1.8.7 fork gem 1.0.0 错误

> ID：11531321
> 
> 赞同：0
> 
> 时间：2012-07-17T21:44:53.187
> 
> 标签：ruby, winapi, rubygems, windows-7-x64

我正在尝试使用 Fork gem（版本 1.0.0）创建一个子进程。

我的基本代码框架是：

```
child = Fork.new do |child|
   ## something something something
   ##        loop loop loop
   ## something something something
end
child.execute
child.wait 
```

这遵循我相信的示例代码，但它总是返回一个非常违反直觉的错误：

```
C:/Ruby187/lib/ruby/gems/1.8/gems/fork-1.0.0/lib/fork.rb:237:in `fork': fork() f
unction is unimplemented on this machine (NotImplementedError)
    from C:/Ruby187/lib/ruby/gems/1.8/gems/fork-1.0.0/lib/fork.rb:237:in `ex
ecute' 
```

我确实安装了正确的宝石：

```
*** LOCAL GEMS ***

addressable (2.2.8)
childprocess (0.3.3)
ffi (1.0.11)
fork (1.0.0)
libwebsocket (0.1.4)
multi_json (1.3.6)
mysql2 (0.3.11 x86-mingw32)
net-sftp (2.0.5)
net-ssh (2.5.2)
net-ssh-gateway (1.1.0)
rdiscount (1.6.8)
rubyzip (0.9.9)
selenium-webdriver (2.24.0) 
```

我试图使用类的未来/调用方法组合，但这似乎对我也不起作用。我安装并重新安装了几次以确保这不是环境问题。

我也尝试使用 win32-process gem，但这需要我可以理解的现有二进制文件，称为子进程。我真的不想求助于cygwin，但这可能是解决它的唯一方法。

您对这颗宝石有何体验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:43:37.883

您不能在 Windows 中“分叉”本身，但您可以使用 ruby​​ 的系统调用之一调用其他方法：[http](http://en.wikibooks.org/wiki/Ruby_Programming/Running_Multiple_Processes) ://en.wikibooks.org/wiki/Ruby_Programming/Running_Multiple_Processes或 win32-process 或其他一些 gem ，或者直接winapi。

# iphone - iOS：禁用tapku图书馆日历中的过去日期

> ID：11531322
> 
> 赞同：0
> 
> 时间：2012-07-17T21:44:53.310
> 
> 标签：iphone, ios, calendar, tapku

我正在寻找如何禁用tapku 日历中过去的日期。例如，我想禁用当前日期之前的所有日期。有没有参考？

问候，若昂保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:54:27.813

我不知道任何官方文档，但我假设您应该修改用作日历视图数据源的数组，可能`- (void)viewDidAppear`在您的实现中。

例如，假设您有一个事件的 NSArray，每个数组对象都包含该事件日期的 NSDictionary。您应该在视图加载时遍历数组，将每个项目与当前日期进行比较，可以使用类似的方法找到： `CFGregorianDate currentDate = CFAbsoluteTimeGetGregorianDate(CFAbsoluteTimeGetCurrent(), CFTimeZoneCopySystem());`- 此处链接：[如何在 Cocoa 中获取当前日期](https://stackoverflow.com/questions/1070354/how-do-i-get-the-current-date-in-cocoa)（第二个答案）

您可以将修改保存到新数组，或者只更改旧数组，只要它是可变的。从那里，您需要做的就是将该新数组弹出到您的: `- (NSArray*)calendarMonthView:(TKCalendarMonthView *)monthView marksFromDate:(NSDate *)startDate toDate:(NSDate *)lastDate`方法中，Tapku 将负责其余的工作！

# haskell - 在函数 Haskell 中定义变量

> ID：11531328
> 
> 赞同：16
> 
> 时间：2012-07-17T21:45:17.053
> 
> 标签：haskell

我是 Haskell 的新手，实际上我 10 分钟前才开始。我试图弄清楚如何在函数中定义变量。可以说我有这个功能

```
foo :: Int -> Int
foo a = 
    b = a * 2
    b
-- Yes, I know, it doesn't do anything interesting 
```

当我运行它时，`GHCi`我得到一个语法错误！如何在函数中定义变量？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-17T22:17:52.810

有两种方法可以做到这一点：

```
foo a = b where b = a * 2
foo a = let b = a * 2 in b 
```

在大多数情况下，它们之间的选择是一种审美而非技术选择。更准确地说，`where`只能附加到定义，而`let ... in ...`可以在允许表达式的任何地方使用。两者都`where`引入`let`块，在这两种情况下都可以方便地使用多个内部变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T21:55:56.433

忽略技术正确性，答案是“有点”。

我认为最好将变量视为评估给定值的零参数的函数。

```
module Main where
import System.IO

foo :: Integer -> Integer
foo a =
  b where
    b = a * 2

main = do
  putStrLn $ show $ foo 10 
```

# bash - 从 bash 中的变量解释命令替换

> ID：11531332
> 
> 赞同：1
> 
> 时间：2012-07-17T21:45:25.883
> 
> 标签：bash, environment-variables, command-substitution

对于 FOO 的以下值：

```
$ FOO='echo `echo hello`'
$ $FOO
`echo hello` 
```

我怎样才能得到预期的输出：

```
hello 
```

基本上，我如何解释变量内容中的命令替换？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T21:55:15.677

回答给定的问题，

```
eval $FOO 
```

但是您可能以错误的方式解决了真正的问题。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-18T04:57:48.483

尝试这个

```
$ FOO="echo `echo hello`"
$ $FOO 
```

只需将**单引号**替换为**双引号即可**。

# powershell - New-PSDrive 以交互方式工作，但不能在 PowerShell 脚本中工作

> ID：11531337
> 
> 赞同：0
> 
> 时间：2012-07-17T21:46:01.670
> 
> 标签：powershell, cruisecontrol.net

我正在尝试使用 New-PSDrive 安装共享，然后从中读取项目。

```
function NRLFind ([object[]]$Releases) {
    $relvols = @{}

    New-PSDrive -Name NRL -PSProvider FileSystem -Root "\\FileServer\shareName" 
    foreach ($dir in $(Get-Item NRL:\* | where {$_.PsIsContainer})) {
        foreach($release in $Releases) {
            if ($d = get-item $($dir.FullName + '\' + $release.glob) -ErrorAction:SilentlyContinue) { 
              if(! $relvols[$release.name] -or $relvols[$release.name].LastWriteTime -lt $d.LastWriteTime) {
                $relvols[$release.name] = $d
              }
            }
        }
    }
    $relvols
} 
```

它在 New-PSDrive 线上爆炸，出现错误：New-PSDrive : Drive root "\FileServer\shareName" 不存在或不是文件夹。

有趣的是，New-PSDrive 命令在交互运行时有效，但在 PS 脚本中无效。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T06:48:45.937

确保运行脚本的用户有权访问共享。

# jquery - 远程验证功能

> ID：11531342
> 
> 赞同：0
> 
> 时间：2012-07-17T21:46:26.850
> 
> 标签：jquery

我不断得到一个未定义的 val 被传递，并且不知道为什么在表单字段中放置了一些东西。

```
$('#addNewUserForm input[name="username"]').rules('add', {
    remote: {
        type: 'post',
        url: 'addnewuser/is_username_available',
        data: {
            'username': function() { return $('#username').val(); }
        },
        dataType: 'json'
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:58:28.220

Since you're using `[name="username"]` in your selector, I'll assume that input does not have an ID = "username", which is what you're referencing with `$('#username')`. Without an ID, should be able to reference the current selector using `$(this)`:

```
$('#addNewUserForm input[name="username"]').rules('add', {
    remote: {
        type: 'post',
        url: 'addnewuser/is_username_available',
        data: {
            // referencing the current selector
            'username': function() { return $(this).val(); }         },
        dataType: 'json'
    }
});
```

# ssh - 按主机子网的 ssh-config

> ID：11531344
> 
> 赞同：23
> 
> 时间：2012-07-17T21:46:37.953
> 
> 标签：ssh

所以我的 10.10.10.x 子网上有一大堆机器，它们基本上都以相同的方式配置。我将它们与我的 10.10.11.x 子网上的机器区分开来，这些机器用于不同的目的。

我希望能够输入“ssh 10.x”连接到 10\. 网络上的机器，输入“ssh 11.x”连接到 11 网络上的机器。

我知道我可以设置单个机器以允许访问完整的 ip，或者在我的 ~/.ssh/config 中像这样的速记版本：

```
Host 10.10.10.11 10.11
HostName 10.10.10.11
User root 
```

对于我的网络上的许多主机来说，这可能会变得非常重复，所以我的问题是，有没有办法将其指定为整个子网的模式，例如：

```
Host 10.10.10.x
User root

Host 10.x
HostName 10.10.10.x
User root 
```

谢谢

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2014-02-28T08:53:16.447

此行将提供所需的功能：

```
Host 192.168.1.*
IdentityFile KeyFile 
```

如果您尝试连接 ip 在此子网中的服务器，您将能够建立 ssh 连接。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-10T07:58:43.383

从`ssh_config(5)`手册页：

```
 A pattern consists of zero or more non-whitespace characters, ‘*’ (a
 wildcard that matches zero or more characters), or ‘?’ (a wildcard that
 matches exactly one character).  For example, to specify a set of decla‐
 rations for any host in the “.co.uk” set of domains, the following pat‐
 tern could be used:

       Host *.co.uk

 The following pattern would match any host in the 192.168.0.[0-9] network
 range:

       Host 192.168.0.?

 A pattern-list is a comma-separated list of patterns.  Patterns within
 pattern-lists may be negated by preceding them with an exclamation mark
 (‘!’).  For example, to allow a key to be used from anywhere within an
 organisation except from the “dialup” pool, the following entry (in
 authorized_keys) could be used:

       from="!*.dialup.example.com,*.example.com" 
```

所以你可以使用`host 10.*`

# c++ - 聚合对象应使用“...”进行初始化

> ID：11531345
> 
> 赞同：1
> 
> 时间：2012-07-17T21:47:07.287
> 
> 标签：c++, visual-c++

我正在尝试用 C++ 编写一个代码，它允许您输入一些文本，它将打开一个附加了变量 s_input 的网站。但是，我收到此错误：

> 'system' : 无法将参数 1 从 'std::string' 转换为 'const char *'

我得到你看到的最后一行的错误。

```
cin >> s_input;
transform(s_input.begin(), s_input.end(), s_input.begin(), tolower);
s_input = "start http://website.com/" + s_input + "/0/7/0";
system(s_input); 
```

我是 C++ 新手，这更像是一个学习程序。所以请展示尽可能多的示例！谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T21:48:02.433

如果`s_input`是`std::string`（我打赌它是）：

```
system(s_input.c_str()); 
```

正如错误消息明确指出的那样，该函数`system`采用`const char*`as 参数。

# java - 对等方重置 Google Drive SDK 连接

> ID：11531346
> 
> 赞同：1
> 
> 时间：2012-07-17T21:47:10.867
> 
> 标签：java, android, ssl, google-drive-api

我正在使用以下代码将公共共享图像从 google drive 加载到 android 应用程序，但有时我得到：

```
javax.net.ssl.SSLException: Read error: ssl=0x1d9ed0: I/O error during system call, Connection reset by peer 
```

为什么谷歌驱动器在我下载图像之前关闭连接？这是随机发生的，但经常发生。有人遇到这样的问题吗？

```
public static InputStream getStream(String url)
{

    InputStream is = null;
    try
    {
        is = new URL(url).openConnection().getInputStream();
    } catch (MalformedURLException e)
    {
        L.e(e.toString());
    } catch (IOException e)
    {
        L.e(e.toString());
    }

    return is;
} 
```

对于位图加载，我使用简单的代码：

```
BitmapFactory.decodeStream(stream, null, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:30:08.950

您可能会受到以下因素的影响： 您从文件元数据中获得的 URL 是短暂的。如果您要保存该 URL 以供以后使用，它将无法正常工作，因为该 URL 可能会失效。

为此，您必须每次都获取图像元数据以获取新的 downloadURL。

我们正在努力在未来提供不可过期的 URL。

# ruby-on-rails - 设置字符串等于 Rails 正则表达式找到的匹配项

> ID：11531347
> 
> 赞同：3
> 
> 时间：2012-07-17T21:47:14.533
> 
> 标签：ruby-on-rails, regex, string

我正在尝试从四方 URL 中提取 user_id，如下所示：

```
 https://foursquare.com/user/99999999 
```

以下正则表达式正是我需要的（一系列以行尾终止的数字）：

```
\d+$ 
```

但是，我不确定如何将字符串设置为等于匹配的字符。我知道 sub 和 gsub，但是这些方法将匹配的字符串替换为其他内容。

我正在寻找一种方法来专门提取与我的正则表达式匹配的字符串部分（如果存在）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T21:52:42.900

我喜欢使用 match() 的返回：

任何包含在正则表达式中的捕获 () 中的内容都会分配给匹配结果数组

```
"https://foursquare.com/user/99999999".match(/(\d+)\z/)[1] #=> "99999999" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-17T21:50:01.153

```
>> "https://foursquare.com/user/99999999"[/(\d+)\z/, 1]
=> "99999999"

>> "https://foursquare.com/user/99999999" =~ /(\d+)\z/
=> 28
>> $1
=> "99999999"

>> "https://foursquare.com/user/99999999".split('/').last
=> "99999999" 
```

有很多方法。`String#[]`虽然我个人喜欢

# php - 与动态行和列协调表的问题

> ID：11531349
> 
> 赞同：0
> 
> 时间：2012-07-17T21:47:32.763
> 
> 标签：php, mysql, sql

请容忍我 - 这可能有点令人困惑。

我正在使用 SQL 检索两组数据。这是带有查询的代码。我正在使用 Zend 框架。

```
$assignments = $db->fetchAll("SELECT id,name,class FROM assignments");
foreach($assignments as $a) {
    $assignmentID = $a['id'];
    $studentData = $db->fetchAll(
        "SELECT student,assignment,status,assignmentID FROM student_assignments WHERE assignmentID='$assignmentID'"
    );

    echo "<th>".$a['name']."</th>";

    foreach($studentData as $s) {
        $bottom .= "<tr><td>" . $s['student'] . " " . $s['assignmentID'] 
                   . " ".$s['status'] . "</td></tr>";
        $i++;
    }
}
echo "</tr>$bottom;"; 
```

以下是 HTML 中的输出：

```
|Assignment on 07/07/2012|  |Assignment on 07/12/2012|   |Assignment on 07/15/2012|
117 1 Y
332 1 N
36 1 N
420 1 N
332 1 Y
326 2 N
212 2 N
461 2 N
117 2 N
212 2 N
212 3 N
326 3 N
117 3 Y
420 3 Y 
```

现在顶部工作得很好——它动态地显示了数据库中的每个分配。但我一直在试图找出一种方法来让适当的数据显示在这些列下，但没有效果。这是我最接近让它看起来有点正确的方法。

本质上，中间有“2”和“3”的数据应该分别进入第二列和第三列。但这并没有发生，因为所有数据都存储在 $bottom 变量中，而不是每个分配的数据。

有没有人有什么建议？这让我发疯，我觉得解决方案正盯着我看。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:45:10.707

首先，您要遍历您的每个学生作业，然后将作业表左连接到它，这样您就可以知道与之相关的作业的名称。

```
$students = $db->fetchAll('SELECT sa.student,sa.assignment,sa.status,sa.assignmentID,a.name
                           FROM student_assignments AS sa
                           LEFT JOIN assignments AS a ON sa.assignmentID=a.id'); 
```

然后根据结果，您可以构建一个数组来重新组合具有相同分配的每个人：

```
$columns = Array();
foreach($students as $s) {
    $row = '<tr><td>'.$s['student'].' '.$s['assignmentID'].' '.$s['status'].'</td></tr>';
    array_push($columns[$s['name']], $row);
} 
```

然后使用这个数组，你终于可以打印你的内容了：

```
foreach ($columns as $key=>$value) {
    echo '<th>'.$key.'</th>';
    foreach ($value as $v) {
        echo $v;
    }
} 
```

当然这可以更紧凑（减少为嵌套循环），我无法完全测试它，但它应该在你的过程中帮助你；）

# sql-server - 如何回滚存储过程中的事务？

> ID：11531352
> 
> 赞同：14
> 
> 时间：2012-07-17T21:47:48.630
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2

查看 SQL Server 联机丛书，Microsoft 似乎有一种（不正确的）[方法来处理存储过程中的嵌套事务](http://msdn.microsoft.com/en-us/library/ms189336%28v=sql.105%29.aspx)：

> ## 嵌套事务
> 
> 显式事务可以嵌套。这主要是为了支持存储过程中的事务，这些事务既可以从已经在事务中的进程调用，也可以从没有活动事务的进程调用。

该示例继续显示启动自己的事务的存储过程*（“无论执行它的任何进程的事务模式如何，该过程都会强制执行其事务。”）*：

```
CREATE PROCEDURE TransProc @PriKey INT, @CharCol CHAR(3) AS
   BEGIN TRANSACTION InProc
      ...
   COMMIT TRANSACTION InProc; 
```

然后可以在不运行事务的情况下调用此过程：

```
EXECUTE TransProc 3,'bbb'; 
```

或**使用**显式事务：

```
BEGIN TRANSACTION OutOfProc;

EXEC TransProc 1, 'aaa';

COMMIT TRANSACTION OutOfProc 
```

他们没有解决的是当存储产品时会发生什么：

*   失败并出现错误，但让事务继续运行
*   失败并出现错误，但不会让事务继续运行
*   遇到错误，但在事务打开的情况下继续执行
*   遇到错误，但在事务回滚的情况下继续执行

没有：

*   `SET XACT_ABORT ON`
*   @@TRANCOUNT

规范示例中的任何位置。

如果我不知道更好，我会认为这条线：

> 以下示例显示了嵌套事务的预期用途。

实际上应该阅读

> 以下示例显示了如何不使用嵌套事务。

除非有人能对这个 BOL 示例做出正面或反面？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-11-01T05:28:49.870

您需要对事务使用 try catch 块。因此，如果您在 catch 块中遇到错误，那么您可以回滚您的事务。

请参阅下面的 sql server 代码。

```
BEGIN TRANSACTION;

BEGIN TRY
    -- Some code
    COMMIT TRANSACTION;
END TRY
BEGIN CATCH

    ROLLBACK TRANSACTION;
END CATCH; 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-02-06T12:50:08.637

```
CREATE PROCEDURE [usp_my_procedure_name]
AS
BEGIN
  SET NOCOUNT ON;
  DECLARE @trancount int;
  SET @trancount = @@trancount;
  BEGIN TRY
    IF @trancount = 0
      BEGIN TRANSACTION
      ELSE
        SAVE TRANSACTION usp_my_procedure_name;

    -- Do the actual work here

    lbexit:
      IF @trancount = 0
      COMMIT;
  END TRY
  BEGIN CATCH
    DECLARE @error int,
            @message varchar(4000),
            @xstate int;

    SELECT
      @error = ERROR_NUMBER(),
      @message = ERROR_MESSAGE(),
      @xstate = XACT_STATE();

    IF @xstate = -1
      ROLLBACK;
    IF @xstate = 1 AND @trancount = 0
      ROLLBACK
    IF @xstate = 1 AND @trancount > 0
      ROLLBACK TRANSACTION usp_my_procedure_name;

    RAISERROR ('usp_my_procedure_name: %d: %s', 16, 1, @error, @message);
  END CATCH
END 
```

# objective-c - 在 Xcode 中查看 NSData 内容

> ID：11531353
> 
> 赞同：27
> 
> 时间：2012-07-17T21:47:50.113
> 
> 标签：objective-c, xcode

我正在运行 Xcode，我想转储一个 NSData*。有问题的变量是缓冲区。有没有办法通过 UI 或 GDB 调试器来做到这一点？

![这是我在运行时看到的](../Images/d8b0486779d12d125f617586b245c8c5.png)

**编辑**

我已将笔记移至答案中。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-12-03T22:52:12.607

从来没有人正确回答过这个问题。2年后，我认为是时候了：）

假设您的代码中有

```
NSData* myData; 
```

然后在 lldb 中键入

```
me read `[myData bytes]` -c`[myData length]` 
```

如果转储的格式不符合您的喜好，您可以添加“-t”例如

```
me read `[myData bytes]` -c`[myData length]` -t int 
```

如需更多帮助，请键入

```
help me read 
```

在 lldb 中

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-17T05:45:22.263

从 Xcode 5 (lldb) 开始，您可以使用以下内容：

```
po (NSString *)[[NSString alloc] initWithData:buffer encoding:4] 
```

请注意，这假设您的 NSData 实例是用 编码的`NSUTF8StringEncoding`，但您可以在标头或文档中查找其他值。

因此，如果您正在调试包含在 中的 JSON 请求之类的内容`NSURLSessionDataTask`，则请求数据位于 中`task.originalRequest.httpBody`，您可以在调试器中使用

```
po (NSString *)[[NSString alloc] initWithData:task.originalRequest.HTTPBody encoding:4] 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-10-28T03:34:29.323

在 lldb 中，以下工作可让您检查 NSData 对象的内容：

您可以获取字节的**地址**以用于各种调试器命令，如下所示：

```
p (void *)[buffer bytes] 
```

你会看到这样的东西：

```
(void *) $32 = 0x0b5e11f0 
```

如果你知道底层数据是一个**字符串**，你可以这样做：

```
p (char *)[buffer bytes] 
```

调试器将输出：

```
(char *) $33 = 0x0b5e11f0 "This is the string in your NSData, for example." 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-31T07:55:37.457

在 Swift 中，这应该可以解决问题：

```
po String(data:buffer!, encoding: NSUTF8StringEncoding) 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-07-17T22:06:05.397

右键单击`buffer`并单击`Print description of "buffer"`。

控制台应该说

```
Printing description of buffer:
<your data here ...> 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-13T14:45:26.633

不幸的是，到目前为止，这些建议都没有解决实际上能够快速显示NSData 内部*数据的问题。*

我写了一个简单的方法，它按照我需要的方式工作。从 GDB 窗口，我可以输入，`print [Util dumpData:theData]`我会得到很好的格式化输出。

```
+(void) dumpData:(NSData *)data
{
    unsigned char* bytes = (unsigned char*) [data bytes];

    for(int i=0;i< [data length];i++)
    {
        NSString* op = [NSString stringWithFormat:@"%d:%X",i,bytes[i],nil];
        NSLog(@"%@", op);
    }
} 
```

*NsLog 输出*

0:24
1:0
2:4
3:0
4:0
5:0

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-17T22:27:38.080

您的数据实例为*空*。

否则它不仅会显示地址。`-[NSData description]`包括数据内容的打印输出。字节分成四组，并以十六进制打印，并带有前导 0 占位符：

```
char arr[] = {0x1, 0x2, 0xA, 0x4, 0xF};
NSData * dat = [NSData dataWithBytes:arr length:5];
NSLog(@"%@", dat); 
```

> 2012-07-17 22:24:48.973 PrintDat[61264:403] <01020a04 0f>

在调试器的命令行中使用`po dat`会得到相同的结果，包括地址：

> (NSData *) $1 = 0x00007f98da500180 <01020a04 0f>

安树建议的上下文菜单路径也使用了这种`description`方法。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-17T22:36:05.850

我想我现在有了。

右键单击那里显示的列表中的 NSData，然后单击“显示“x”的内存”。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-17T22:40:01.727

我将其发布为[对此](https://stackoverflow.com/questions/11513283/how-to-print-out-a-propertys-contents-using-xcode-debugger/11513877#11513877)相关问题的回答：

放置断点后，运行，程序在断点处停止，将光标悬停在要查看的变量/值上，如下所示：

![在此处输入图像描述](../Images/7f5c1ba39629f0c0ecad8421882629f7.png)

您还可以放置一个`NSLog(@"%@", yourLabel.text);`来查看该标签/其他对象类型的内容。

另一种选择是在控制台中运行 GDB，如下所示：

```
gdb
attach <your process name> 
```

然后使用`po`(print-object) 命令查看变量的值，如下所示：

```
po variableName 
```

要查看原始类型（`int`、`float`、`long`、`double`、`char`等）的值，您可以`print`在控制台中运行 GDB 时使用该命令，如下所示：

```
print yourPrimitiveVariable 
```

希望这可以帮助！

编辑：

使用该命令，您可以使用属性名称 ( ) 或 ivar 名称 (可能)`po`打印出对象的值。我在这里演示：`self.myProperty``_myProperty`

![在此处输入图像描述](../Images/7d15166700b4ab87cfeb70114d6250fe.png)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-05-17T20:17:51.833

Xcode 11.4（可能更早）支持在可视化调试器中检查 (NS)Data 的原始字节。在分配数据后设置断点，将鼠标悬停在符号上直到出现弹出窗口，然后单击眼睛或信息图标。灵活地滚动以防止弹出窗口通过移动到微小目标之外而关闭。

使用 Swift 进行测试，但可能也适用于 C 系列语言。

（注意：眼睛图标产生下面的输出，格式很好，但是，呃......似乎缺少最后一列字节？）

[![Xcode 数据视图](../Images/09f821794bf18c13cbfa103132648901.png)](https://i.stack.imgur.com/gnFR9.jpg)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-08-02T16:45:29.040

对我来说最简单的方法（仅在本地开发期间！）是转换为未使用的`NSString`实例。然后值会立即显示在调试器中。完成后，我会删除这些代码行。

从这个[旧线程](https://stackoverflow.com/a/2467856/680920)

```
NSString* newStr = [[NSString alloc] initWithData:theData encoding:NSUTF8StringEncoding]; 
```

![在此处输入图像描述](../Images/92639a67f90d38436ff7e355f045c345.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-23T09:33:21.697

对于`Swift`代码，我正在执行以下操作：

当我的程序在断点处停止时，我使用“添加表达式”选项并输入我的实例`[UInt8](data)`在哪里：`data``Data`

[![在此处输入图像描述](../Images/b3878bf0a6fa43254af6843c7c911b09.png)](https://i.stack.imgur.com/OCtsf.png)

之后我可以看到`data`内容：

[![在此处输入图像描述](../Images/8a765cbacd4a60dce3e788b94ac6023f.png)](https://i.stack.imgur.com/Xd2jx.png)

# sharepoint - 在 SharePoint 门户中创建动态 TFS 查询

> ID：11531362
> 
> 赞同：1
> 
> 时间：2012-07-17T21:48:20.750
> 
> 标签：sharepoint, backlog

我们最近将我们的项目转移到 TFS 2010 以进行 CM 控制和问题跟踪。在大多数情况下，我们对此举感到满意。但是，我们发现我们需要一种方法来允许用户（尤其是我们的帮助台）针对我们的 Product Backlog 编写动态查询。可以很好地显示未完成的`Query Results Web Part`工作项和最近的问题等信息，但我们的用户需要能够查询可以从支持呼叫到支持呼叫更改的特定信息。有没有办法让用户在 TFS 中创建自定义的动态查询？如果没有，是否有任何与 SharePoint 集成的第三方工具允许这样做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:33:04.417

TFS 2010 有一个基于 Web 的用户界面，称为 Web 访问。用户可以使用 te app 的查询部分从那里创建和查看自己的查询；他们还可以通过标题中包含的单词搜索工作项

默认情况下，TFS 2010 创建的 SharePoint 网站的左上角通常有一个指向它的链接。如果链接不存在，您可以直接访问它的（默认）URL：[http://address-of-your-TFS-server:8080/tfs/web]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:40:34.577

我决定使用`Page Viewer Web Part`将实际查询表单从 Team Web Access 嵌入到项目门户。这样做时一切似乎都很好。唯一的缺点是每次离开页面时都会出现“唠叨对话框”。

# javascript - javascript/jquery 向 url 添加斜杠（如果不存在）

> ID：11531363
> 
> 赞同：50
> 
> 时间：2012-07-17T21:48:23.757
> 
> 标签：javascript, jquery, validation

我正在制作一个小型 Web 应用程序，用户在其中输入一个服务器 URL，它通过 AJAX 请求从中提取大量数据。

由于用户必须手动输入 URL，人们通常会忘记尾部斜杠，即使它是必需的（因为一些数据附加到输入的 url）。我需要一种方法来检查斜线是否存在，如果不存在，请添加它。

这似乎是一个 jQuery 将有一个单行的问题，有谁知道如何做到这一点，或者我应该为它编写一个 JS 函数吗？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-07-17T21:54:22.837

```
var lastChar = url.substr(-1); // Selects the last character
if (lastChar != '/') {         // If the last character is not a slash
   url = url + '/';            // Append a slash to it.
} 
```

临时变量名可以省略，直接嵌入到断言中：

```
if (url.substr(-1) != '/') url += '/'; 
```

由于目标是使用单行更改 url，因此也可以使用以下解决方案：

```
url = url.replace(/\/?$/, '/'); 
```

*   如果尾部斜杠存在，则将其替换为`/`.
*   如果尾部斜杠不存在，则将 a`/`附加到末尾（准确地说：尾部锚点替换为`/`）。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2016-03-22T08:54:57.073

```
url += url.endsWith("/") ? "" : "/" 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-07-16T16:54:26.677

我添加到正则表达式解决方案以适应查询字符串：

[http://jsfiddle.net/hRheW/8/](http://jsfiddle.net/hRheW/8/)

```
url.replace(/\/?(\?|#|$)/, '/$1') 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-11-08T22:48:17.857

这也有效：

```
url = url.replace(/\/$|$/, '/'); 
```

例子：

```
let urlWithoutSlash = 'https://www.example.com/path';
urlWithoutSlash = urlWithoutSlash.replace(/\/$|$/, '/');
console.log(urlWithoutSlash);

let urlWithSlash = 'https://www.example.com/path/';
urlWithSlash = urlWithoutSlash.replace(/\/$|$/, '/');
console.log(urlWithSlash); 
```

输出：

```
https://www.example.com/path/
https://www.example.com/path/ 
```

它用尾部斜杠替换尾部斜杠或没有尾部斜杠。因此，如果存在斜线，则将其替换为一个（基本上将其留在那里）；如果不存在，则添加尾部斜杠。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-07-17T21:56:40.380

您可以执行以下操作：

```
var url = 'http://stackoverflow.com';

if (!url.match(/\/$/)) {
    url += '/';
} 
```

这是证明：http: [//jsfiddle.net/matthewbj/FyLnH/](http://jsfiddle.net/matthewbj/FyLnH/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-10-27T09:47:59.773

这个`URL`类非常棒——它帮助我们改变路径并处理查询参数和片段标识符

```
function addTrailingSlash(u) {
    const url = new URL(u);
    url.pathname += url.pathname.endsWith("/") ? "" : "/";
    return url.toString();
}

addTrailingSlash('http://example.com/slug?page=2');
// result: "http://example.com/slug/?page=2" 
```

`URL`您可以在[MDN](https://developer.mozilla.org/en-US/docs/Web/API/URL)上阅读更多信息

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-28T08:49:26.097

在找到这个问题及其答案之前，我创建了自己的方法。我把它贴在这里，因为我没有看到类似的东西。

```
function addSlashToUrl() {
    //If there is no trailing shash after the path in the url add it
    if (window.location.pathname.endsWith('/') === false) {
        var url = window.location.protocol + '//' + 
                window.location.host + 
                window.location.pathname + '/' + 
                window.location.search;

        window.history.replaceState(null, document.title, url);
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-05T19:12:47.543

并非每个 URL 都可以在末尾用斜杠完成。至少有几个条件不允许：

*   最后一个现有斜杠之后的字符串类似于`index.html`.
*   有参数：`/page?foo=1&bar=2`.
*   有片段链接：`/page#tomato`。

如果上述情况都不存在，我已经编写了一个添加斜线的函数。还有两个附加功能可用于检查添加斜杠的可能性和将 URL 分成几部分。最后一个不是我的，我已经给出了原始链接的链接。

```
const SLASH = '/';

function appendSlashToUrlIfIsPossible(url) {
  var resultingUrl = url;
  var slashAppendingPossible = slashAppendingIsPossible(url);

  if (slashAppendingPossible) {
    resultingUrl += SLASH;
  }

  return resultingUrl;
}

function slashAppendingIsPossible(url) {
  // Slash is possible to add to the end of url in following cases:
  //  - There is no slash standing as last symbol of URL.
  //  - There is no file extension (or there is no dot inside part called file name).
  //  - There are no parameters (even empty ones — single ? at the end of URL).
  //  - There is no link to a fragment (even empty one — single # mark at the end of URL).
  var slashAppendingPossible = false;

  var parsedUrl = parseUrl(url);

  // Checking for slash absence.
  var path = parsedUrl.path;
  var lastCharacterInPath = path.substr(-1);
  var noSlashInPathEnd = lastCharacterInPath !== SLASH;

  // Check for extension absence.
  const FILE_EXTENSION_REGEXP = /\.[^.]*$/;
  var noFileExtension = !FILE_EXTENSION_REGEXP.test(parsedUrl.file);

  // Check for parameters absence.
  var noParameters = parsedUrl.query.length === 0;
  // Check for link to fragment absence.
  var noLinkToFragment = parsedUrl.hash.length === 0;

  // All checks above cannot guarantee that there is no '?' or '#' symbol at the end of URL.
  // It is required to be checked manually.
  var NO_SLASH_HASH_OR_QUESTION_MARK_AT_STRING_END_REGEXP = /[^\/#?]$/;
  var noStopCharactersAtTheEndOfRelativePath = NO_SLASH_HASH_OR_QUESTION_MARK_AT_STRING_END_REGEXP.test(parsedUrl.relative);

  slashAppendingPossible = noSlashInPathEnd && noFileExtension && noParameters && noLinkToFragment && noStopCharactersAtTheEndOfRelativePath;

  return slashAppendingPossible;
}

// parseUrl function is based on following one:
// http://james.padolsey.com/javascript/parsing-urls-with-the-dom/.
function parseUrl(url) {
  var a = document.createElement('a');
  a.href = url;

  const DEFAULT_STRING = '';

  var getParametersAndValues = function (a) {
    var parametersAndValues = {};

    const QUESTION_MARK_IN_STRING_START_REGEXP = /^\?/;
    const PARAMETERS_DELIMITER = '&';
    const PARAMETER_VALUE_DELIMITER = '=';
    var parametersAndValuesStrings = a.search.replace(QUESTION_MARK_IN_STRING_START_REGEXP, DEFAULT_STRING).split(PARAMETERS_DELIMITER);
    var parametersAmount = parametersAndValuesStrings.length;

    for (let index = 0; index < parametersAmount; index++) {
      if (!parametersAndValuesStrings[index]) {
        continue;
      }

      let parameterAndValue = parametersAndValuesStrings[index].split(PARAMETER_VALUE_DELIMITER);
      let parameter = parameterAndValue[0];
      let value = parameterAndValue[1];

      parametersAndValues[parameter] = value;
    }

    return parametersAndValues;
  };

  const PROTOCOL_DELIMITER = ':';
  const SYMBOLS_AFTER_LAST_SLASH_AT_STRING_END_REGEXP = /\/([^\/?#]+)$/i;
  // Stub for the case when regexp match method returns null.
  const REGEXP_MATCH_STUB = [null, DEFAULT_STRING];
  const URL_FRAGMENT_MARK = '#';
  const NOT_SLASH_AT_STRING_START_REGEXP = /^([^\/])/;
  // Replace methods uses '$1' to place first capturing group.
  // In NOT_SLASH_AT_STRING_START_REGEXP regular expression that is the first
  // symbol in case something else, but not '/' has taken first position.
  const ORIGINAL_STRING_PREPENDED_BY_SLASH = '/$1';
  const URL_RELATIVE_PART_REGEXP = /tps?:\/\/[^\/]+(.+)/;
  const SLASH_AT_STRING_START_REGEXP = /^\//;
  const PATH_SEGMENTS_DELIMITER = '/';

  return {
    source: url,
    protocol: a.protocol.replace(PROTOCOL_DELIMITER, DEFAULT_STRING),
    host: a.hostname,
    port: a.port,
    query: a.search,
    parameters: getParametersAndValues(a),
    file: (a.pathname.match(SYMBOLS_AFTER_LAST_SLASH_AT_STRING_END_REGEXP) || REGEXP_MATCH_STUB)[1],
    hash: a.hash.replace(URL_FRAGMENT_MARK, DEFAULT_STRING),
    path: a.pathname.replace(NOT_SLASH_AT_STRING_START_REGEXP, ORIGINAL_STRING_PREPENDED_BY_SLASH),
    relative: (a.href.match(URL_RELATIVE_PART_REGEXP) || REGEXP_MATCH_STUB)[1],
    segments: a.pathname.replace(SLASH_AT_STRING_START_REGEXP, DEFAULT_STRING).split(PATH_SEGMENTS_DELIMITER)
  };
}
```

也可能存在无法添加斜线的几种情况。如果你知道一些，请评论我的答案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-01T09:32:05.660

对于那些使用不同输入的人：例如[http://example.com](http://example.com)或[http://example.com/eee](http://example.com/eee)。在第二种情况下，它不应添加尾部斜杠。

有使用 .href 的序列化选项，它只会在域（主机）之后添加斜杠。

在 NodeJs 中，

```
You would use the url module like this: 
const url = require ('url');
let jojo = url.parse('http://google.com')
console.log(jojo); 
```

在纯 JS 中，你会使用

```
var url = document.getElementsByTagName('a')[0];
var myURL = "http://stackoverflow.com";
console.log(myURL.href); 
```

# joomla1.5 - 数据库中的 Virtuemart 购物车字符串结构

> ID：11531366
> 
> 赞同：0
> 
> 时间：2012-07-17T21:48:28.443
> 
> 标签：joomla1.5, joomla-extensions, virtuemart

我正在使用 Joomla 的扩展 Virtuemart 1.1.9 和 joomla 1.5 来创建我的购物车。在另一个组件的帮助下，我可以将带有产品 ID 和数量的纯文本文件上传到服务器。通过以下例程，我可以将负载合并到购物车中。

这种方法的问题是，当我继续下订单时，产品价格不会乘以订购的数量来获得订单的总数。

有任何想法吗？

这是代码

```
DECLARE done INT DEFAULT 0;
declare producto, cantidad, cliente, carga, categoria int;
declare cantidadreg, cuenta, i int default 0;
declare cadena text default "";
declare varcarga int default 0;

declare cur1 cursor for select jos_vm_product.product_id, cant_producto, id_cliente, datos_cargas_vm.id_carga, category_id
from datos_cargas_vm inner join cargas_vm on datos_cargas_vm.id_carga=cargas_vm.id_carga
inner join jos_vm_product on datos_cargas_vm.id_producto=jos_vm_product.product_sku
inner join jos_vm_product_category_xref on jos_vm_product.product_id = jos_vm_product_category_xref.product_id
where estado_carga='P'
order by datos_cargas_vm.id_carga, jos_vm_product.product_id;

declare continue handler for not found set done = true;

open cur1;

read_loop: LOOP
    fetch cur1 into producto, cantidad, cliente, carga, categoria;

    if done then
        leave read_loop;
    end if;

    if varcarga!=carga then
        select count(*) into cantidadreg from datos_cargas_vm inner join cargas_vm on datos_cargas_vm.id_carga=cargas_vm.id_carga
        inner join jos_vm_product on datos_cargas_vm.id_producto=jos_vm_product.product_sku
        inner join jos_vm_product_category_xref on jos_vm_product.product_id = jos_vm_product_category_xref.product_id
        where estado_carga='P' and datos_cargas_vm.id_carga=carga;

        set varcarga:=carga;
        set cadena:=concat("a:",cast(cantidadreg+1 as char),":{s:3:\"idx\";i:",cast(cantidadreg as char),";");
        set i:=0;
    end if;

    set cadena:=concat(cadena,"i:",cast(i as char),";a:5:{s:8:\"quantity\";i:",cast(cantidad as char),
        ";s:10:\"product_id\";s:5:\"",cast(producto as char),"\";s:9:\"parent_id\";i:",cast(producto as char),
        ";s:11:\"category_id\";i:",cast(categoria as char),";s:11:\"description\";s:0:\"\";}");
    set i:=i+1;

    if i=cantidadreg then
        set cadena:=concat(cadena,"}");
        -- select cantidadreg,cadena;

        select count(*) into cantidadreg from jos_vm_cart where user_id = cliente;

        if cantidadreg=0 then
            insert into jos_vm_cart(user_id,cart_content) values(cliente,cadena);
        else
            update jos_vm_cart set cart_content=cadena where user_id=cliente;
        end if;
        update cargas_vm set estado_carga='C' where id_carga=carga;
    end if;
END LOOP;

close cur1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T22:17:19.370

如果您要绕过所有的 drugmart 逻辑来加载购物车，您可能必须模拟它并在加载的同时进行数学运算。

# macos - 从终端创建 Mac OS 键盘快捷键

> ID：11531367
> 
> 赞同：0
> 
> 时间：2012-07-17T21:48:33.217
> 
> 标签：macos, shell, terminal, applescript

是否可以在不使用 AppleScript 的情况下从终端为所选应用程序的菜单项创建 Mac OS 键盘快捷键？

**解决方案在这里描述：** [Programmatically add keyboard shortcut to Mac System Preferences](https://stackoverflow.com/questions/7219134/programmatically-add-keyboard-shortcut-to-mac-system-preferences)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:30:53.293

您可以用 AppleScript 编写它，然后使用终端在 osascript 中执行它。

# c++ - 试图理解指针和双指针

> ID：11531371
> 
> 赞同：1
> 
> 时间：2012-07-17T21:49:32.853
> 
> 标签：c++, pointers, dereference

我正在尝试在 C++ 中实现一个简单的链表。我可以创建节点，它们似乎可以正确链接自己。我的问题涉及 listIterate() 函数，但我在此处附上了整个代码以备不时之需。

```
#include <iostream>
using namespace std;

//Wrapper class which allows for easy list management
class LinkedList {

    //Basic node struct
    struct node {
        int data;
        node *link; 
    }; 

    node *head; //Pointer to the head (also referred to as root) node, or the first node created.
    node *current; //Pointer to the /latest/ node, or the node currently being operated on.
    node *tail; //Pointer to the tail node, or the last node in the list. 

public:

    //Default constructor. Creates an empty list.
    LinkedList() {
        head = NULL;
        current = NULL;
        tail = NULL;
        cout << "*** Linked list created. Head is NULL. ***\n";
    }

    //Default destructor. Use to remove the entire list from memory.
    ~LinkedList() {
        while(head != NULL) {
            node *n = head->link;
            delete head;
            head = n;
        }
    }

    /*
    appendNode() 
    Appends a new node to the end of the linked list. Set the end flag to true to set the last node to      null, ending the list.
    */
    void appendNode(int i) {

        //If there are no nodes in the list, create a new node and point head to this new node.
        if (head == NULL) {
            node *n = new node;
            n->data = i;
            n->link = NULL;
            head = n;

            //head node initialized, and since it is ALSO the current and tail node (at this point), we must update our pointers
            current = n;
            tail = n;
            cout << "New node with data (" << i << ") created. \n---\n"; 

        } else {

        //If there are nodes in the list, create a new node with inputted value.
        node *n = new node;
        n->data = i;
        cout << "New node with data (" << i << ") created. \n"; 

        //Now, link the previous node to this node.
        current->link = n;
        cout << "Node with value (" << current->data << ") linked to this node with     value (" << i << ").  \n---\n";     

        //Finally, set our "current" pointer to this newly created node.
        current = n;
        }
    }

    /*
    listIterate()
    Iterates through the entire list and prints every element.
    */
    void listIterate() {

        //cursor
        node *p;

        //Start by printing the head of the list.
        cout << "Head - Value: (" << head->data << ") | Linked to: (" << head->link     << ") \n";

        p = head->link;
        cout << *p;

    }

}; 

int main() {

    LinkedList List;
    List.appendNode(0);
    List.appendNode(10);
    List.appendNode(20);
    List.appendNode(30);
    List.listIterate(); 
```

}

**现在，**我将参考这个方法，listIterate()。

```
void listIterate() {

        //cursor
        node *p;

        //Start by printing the head of the list.
        cout << "Head - Value: (" << head->data << ") | Linked to: (" << head->link << ") \n";

        p = head->link; 
        cout << *p;

    } 
```

该命令`cout << *p;`引发错误，我相信这就是原因：此时， p 指向`head->link`，这是另一个指向我的头节点的链接字段的指针。`head->link`现在，我明白如果我在程序中取消引用 p ，因为它指向一个变量 ，所以不会有实际值。

对我来说，如果我取消引用 p 两次 ( `**p`)，它应该跟随指针两次 ( `p`-> `head->link`-> 链表中第二个节点的值 ( `10`)。但是，取消引用 p 两次会引发此错误。

```
LinkedListADT.cc:89: 错误: '** p' 中的'operator*' 不匹配</pre>

谁能帮我理解为什么会这样？这是非法操作吗？它是否以我不熟悉的另一种方式执行？

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T21:54:40.467

`cout << *p`试图打印一个`node`对象。由于没有为节点对象定义打印操作（即没有`operator<<`为输出流定义），因此尝试打印它会失败。您可能正在寻找的是：

```
cout << p->data; 
```

对于您的第二点，该声明可以分解为：

```
**p == *(*p) 
```

所以第一个星号取消引用`p`，返回一个`node`. 第二颗星试图取消引用该操作的结果，但由于节点是 a`struct`而不是指针，编译器会抱怨。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:54:55.050

您的节点类缺少一个`operator *`，因此类型的构造`**p`when `p`is 在`node *`语义上是错误的。要查看重载`operator *`示例，请查看实现智能指针的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:02:21.330

`**p`不会“跟随指针两次”。该操作只是尝试取消引用`p`两次。

`p` is a `pointer` to a `node`. The first dereference (`*p`) will evaluate to the node that was pointed to by `p`. The second dereference (`**p`) will cause an error, because a `node` is a `struct` and not a `pointer` and has no overloaded `operator*` defined.

If you wish to dereference the pointer to the next node:

`*(p->link)`

# ios - 制作拉出式托盘 - (iOS)

> ID：11531373
> 
> 赞同：0
> 
> 时间：2012-07-17T21:49:41.453
> 
> 标签：ios, xcode, uiimage, uibutton, tray

我正在制作一个 iPad 应用程序，基本上，我想制作一个从我的应用程序底部拉出的托盘，我想在屏幕底部有一个小标签，如果你拉它，它会带来向上图像，图像的高度将与您将按钮拉到的高度相匹配。这有点像通知中心的工作方式，除了选项卡始终可见。

所以我的问题是，当它在屏幕上垂直移动时，如何让图像跟随标签？我认为使用`UIButton`选项卡和`UIImage`托盘是有意义的，并且我有一些用于使按钮移动的代码，但是如何使一个对象跟随另一个对象？

谢谢你的帮助，-卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:59:41.543

我不会为选项卡使用按钮——只是一个普通的旧视图。

要使您的图像跟随选项卡（无论您如何实现它们中的任何一个），只需将它们一起设置动画即可。也就是说，如果您创建一个将按钮中心移动到用户触摸的 Y 坐标的动画，您可以同时将图像垂直移动相同的量。然后这两个对象将看起来粘在一起，因为它们一起移动。

# matlab - 删除 regstats 函数的零列

> ID：11531374
> 
> 赞同：1
> 
> 时间：2012-07-17T21:49:55.940
> 
> 标签：matlab

我正在使用 regstats() 函数 Matlab 统计工具箱和循环对相当大的数据集执行线性回归分析（y=xb，用给定的 [nx1] 向量 y 和 [nxm] 矩阵 x 求解 b）通过一系列矩阵/向量对。问题是如果有全为零的列，regstats 会返回 NaN，因为它无法执行回归。我的所有 x 矩阵中都有零列，但它们并不总是出现在相同的列号中。由于我的 x 矩阵中的每一列都代表一个真实世界的变量，因此我不能简单地删除零列并运行回归。我需要删除零，记住哪些列已被删除，运行回归，然后将 0 值合并到适当位置的 b 向量结果中。这样，我的所有结果都以相同的顺序表示相同数量的变量，在回归中未包含该特定变量的地方为零。我用一小组测试数据手动完成了这项工作，但现在我需要为大约 800 个回归对运行它，所以我需要一些方法来自动搜索和替换零列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:57:33.910

```
IZEROS = find(all(M==0)); 
```

`IZEROS`将是全为零的列的索引列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:57:58.913

```
allzero = all(x == 0, 1);
goodcols = find(~allzero);

b = zeros(m,1);
b(goodcols) = % solution to problem, taking into account only goodcols 
```

# django - Django表单提交，但不会保存到数据库

> ID：11531375
> 
> 赞同：0
> 
> 时间：2012-07-17T21:49:58.137
> 
> 标签：django, django-models, django-forms, django-views, mysql-python

我使用的是 ModelForm，但没有使用 Django 的身份验证系统。我也在尝试设置一个随机密码，但已经注释掉了那个位，因为我不确定它是否会导致问题。

目前，以下将返回“成功”，但不会保存到数据库中。

```
def registration(request):
if request.POST:
    data = request.POST.copy()
    data['date_joined'] = datetime.date.today()
    data['last_login'] = datetime.datetime.now()
    form = UserForm(data)
    if form.is_valid():
        try:
            User.objects.get(username=form.cleaned_data['username'])
        except User.DoesNotExist:
            #ran_pw = User.objects.make_random_password(length=12)
            #user.set_password(ran_pw)
            user = User()
            user.username = form.cleaned_data['username']
            user.first_name = form.cleaned_data['first_name']
            user.m_init = form.cleaned_data['m_init']
            user.last_name = form.cleaned_data['last_name']
            user.institution = form.cleaned_data['institution']
            user.department = form.cleaned_data['department']
            user.phone = form.cleaned_data['phone']
            user.email = form.cleaned_data['email']
            user.save()
            return HttpResponse('success')
    else:
        return HttpResponse(form.errors)
else:
    form = UserForm()
    return HttpResponse(form.non_field_errors) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:58:09.663

大概当用户已经存在于数据库中时会发生这种情况。那是因为您仅在用户不存在时才实际设置数据。将所有字段设置代码移回一个缩进级别。

实际上，您根本不应该手动设置字段 - 使用 ModelForm 的全部意义在于您这样做`form = UserForm(data, instance=user)`，然后如果表单有效，您只需这样做`form.save()`。

# mysql - MySQL - 使用标签制作（简单？）搜索引擎

> ID：11531377
> 
> 赞同：1
> 
> 时间：2012-07-17T21:50:14.980
> 
> 标签：mysql, search, tags, storage, solution

我即将为我们未来的网站制作一个（简单的？）搜索引擎，我想要一些关于问题的建议。

网站上的内容将有标签连接到它们，但我不知道如何以正确的方式存储它们。为简单起见，1 个标题带有多个标签。我有两个解决方案，我想从你那里得到更好的解决方案，或者说另一种解决方案；）

1.  将标题存储在一个表中，将标签存储在另一个表中。然后每个标签都有一个titleId。当用户搜索某物时，数据库会在两个表中搜索并同时返回结果。+ 更少的数据存储。- 在多个表中搜索

2.  将标题存储在一个表中，将标签存储在另一个表中。虽然每个标题都有一个与标题同名的标签。这样，数据库只需在一个表中进行搜索。

    *   只需要在一张表中搜索。- 更多数据要存储。

我说“性能就是一切”，但你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T21:57:26.120

您想要做的是使用多对多关系。可行的方法是您将使用连接表。这是我的设置方式

```
create table page (
  id int(11) not null auto_increment,
  title varchar(128)
  ...
) engine = innodb;

create table tag (
  id int(11) not null auto_increment,
  tag_name varchar(128)
) engine = innodb;

create table page_tag (
 id int(11) not null auto_increment,
 tag_id int(11) not null,
 page_id int(11) not null,
 foreign key(tag_id) references tag(id),
 foreign key(page_id) references page(id),
 unique key(tag_id, page_id)
) engine=innodb; 
```

确保对这些使用 innodb 表来强制引用完整性。如果您需要全文搜索，请添加一个基本上复制您的标记表的附加 myISAM 表。page_tag 中的唯一键可防止其中的重复条目，并使该表上的连接更快。

我还说你应该选择#2。这样你每次都在搜索一个表，这可能更容易处理。

# sql - '6/1/2012' < '6/1/2012 0:00:00.000' = 真？

> ID：11531380
> 
> 赞同：3
> 
> 时间：2012-07-17T21:50:26.450
> 
> 标签：sql, sql-server

当我在 SQL-Server 2008 中运行此代码时，

```
select case when '6/1/2012' < '6/1/2012' then 1 else 0 end 
```

我得到0。

如果我跑，

```
select case when '6/1/2012 0:00:00.000' < '6/1/2012' then 1 else 0 end 
```

我也得到0。

**但是**，如果我跑

```
select case when '6/1/2012' < '6/1/2012 0:00:00.000' then 1 else 0 end 
```

我得到1。

为什么是这样？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T21:52:54.980

我的猜测是：

1.  您正在比较两个字符串（查询中没有任何内容表明它们应该作为日期进行比较）。
2.  如果两个字符串除了一个额外的字符之外都相等，则较长的字符串是“更大的”。

您可能期望您的数据库自动检测日期，但这将涉及解析您提供的**每个**字符串，以防它是一个日期，这会损害性能并且也可能令人困惑（如果某些东西被转换为日期并且您不是故意的让它成为）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T21:54:02.900

您必须将它们转换为`datetime`将它们作为`datetime`值进行比较。这返回`0`：

```
select case when cast('6/1/2012' as datetime) < cast('6/1/2012 0:00:00.000' as datetime) then 1 else 0 end 
```

# node.js - 403 / 禁止使用 NodeJS / Express 访问网站图标

> ID：11531381
> 
> 赞同：2
> 
> 时间：2012-07-17T21:50:38.173
> 
> 标签：node.js, express, favicon, http-status-code-403, locomotivejs

我目前正在测试[LocomotiveJS](http://www.locomotivejs.org)并有一个非常简单的“hello world”应用程序

我以为我已经设置了连接网站图标中间件，但是当我访问任何路由（例如“/”）时，我在控制台中得到以下信息：

```
127.0.0.1 - - [Tue, 17 Jul 2012 21:41:25 GMT] "GET / HTTP/1.1" 200 1491 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11"
Error: Forbidden
    at SendStream.error (/Users/alex/Desktop/LocoTest/node_modules/express/node_modules/send/lib/send.js:142:16)
    at SendStream.pipe (/Users/alex/Desktop/LocoTest/node_modules/express/node_modules/send/lib/send.js:307:52)
    at Object.static (/Users/alex/Desktop/LocoTest/node_modules/express/node_modules/connect/lib/middleware/static.js:78:8)
    at next (/usr/local/lib/node_modules/locomotive/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at pass (/usr/local/lib/node_modules/locomotive/node_modules/express/lib/router/index.js:219:24)
    at Router._dispatch (/usr/local/lib/node_modules/locomotive/node_modules/express/lib/router/index.js:280:5)
    at Object.middleware [as handle] (/usr/local/lib/node_modules/locomotive/node_modules/express/lib/router/index.js:45:10)
    at next (/usr/local/lib/node_modules/locomotive/node_modules/express/node_modules/connect/lib/http.js:204:15)
    at multipart (/Users/alex/Desktop/LocoTest/node_modules/express/node_modules/connect/lib/middleware/multipart.js:52:61)
    at module.exports (/Users/alex/Desktop/LocoTest/node_modules/express/node_modules/connect/lib/middleware/bodyParser.js:57:9)
127.0.0.1 - - [Tue, 17 Jul 2012 21:41:25 GMT] "GET /favicon.ico HTTP/1.1" 403 - "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_4) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1132.57 Safari/536.11" 
```

知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:17:32.480

看起来发送中间件[认为这个请求是恶意](https://github.com/ritch/send/blob/master/lib/send.js#L307)的，因为它不是根并且包含“..”。我不确定为什么`/favicon.ico`会导致 isMalicious 返回`true`。我建议调试`isMalicious`并检查`this._root`and `this.path`。可能是中间件中的一些错误，`send`或者`favicon`您的代码没有配置它们。除非您发布一些代码，否则无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T20:15:04.557

What version of Express and Connect were pulled in as dependencies? I encountered a bug with express@3.0.0beta6, which I think has been fixed in beta7 (though I haven't confirmed that myself). I'm running on express@3.0.0beta4, which I know works, and you can revert to that by doing:

```
$ npm uninstall express
$ npm install express@3.0.0beta4 
```

The master branch of Locomotive is using the Express 3.x betas, which have generally been pretty solid. I'm looking forward to that being stable, and pushing out new releases.

# actionscript-3 - Flash AS3：一键多用？

> ID：11531388
> 
> 赞同：3
> 
> 时间：2012-07-17T21:51:18.427
> 
> 标签：actionscript-3, flash

等等：如果我按“空格”键，库存打开。但是如果我再次按“空格”，库存应该关闭。我应该用什么来做这种事情？我可以打开它，但不能关闭。谢谢，抱歉不好英文（PS：我用的是flashdevelop+flixel）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:13:54.627

是的，这是完全可能的。

```
var isInventOpen:Boolean = false;
function openCloseInvent(e:KeyboardEvent):void
{
    if(e.keyCode == Keyboard.SPACE && isInventOpen == false)
    {
         //Open Inventory
         isInventOpen = true;
    }

    if(e.keyCode == Keyboard.SPACE && isInventOpen == true)
    {
         //Close Inventory
         isInventOpen = false;
    }
} 
```

更多关于 KeyCodes 的信息可以在这里找到：[KeyCodes](http://www.dakmm.com/?p=272 "键码")，如果你需要的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:13:04.247

你应该给自己一个布尔值，像这样：

```
var menuOpen:Boolean = false;
function yourEventHandler(e:KeyboardEvent):void {
    if (menuOpen) {
        menuOpen = false;
        //close your menu here
    } else {
        menuOpen = true;
        //open menu here
    }
} 
```

# ruby-on-rails - Rails：对来自不同模型的对象进行排序

> ID：11531389
> 
> 赞同：1
> 
> 时间：2012-07-17T21:51:20.357
> 
> 标签：ruby-on-rails, sorting

我用两种不同的模型填充了一个哈希。然后我尝试像这样对它们进行排序：

```
@search_results = User.find(:all, :conditions => ['name LIKE ?', "%#{params[:query]}%"])
@search_results += Book.find(:all, :conditions => ['title LIKE ?', "%#{params[:query]}%"])
@search_results.sort! { |a,b| a.impressions_count <=> b.impressions_count } 
```

这会引发以下错误：

```
comparison of User with Book failed 
```

用户和图书都有一个基于整数的印象数。为什么我不能通过这个属性排序？我还有什么其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:01:22.463

我最近遇到了类似的问题并最终编写了一些自定义 sql，因为所有其他方式都返回了一个数组。很确定使用 sort 方法不是一个好主意，因为在 SQL 中排序总是比 ruby​​ 更有效，尤其是当数据集变大时

```
 @combined_results = User.find_by_sql(["SELECT title, id, impressions_count, NULL as some_attribute_of_book
                                         FROM user
                                         WHERE title LIKE ?
                                         UNION SELECT title, id, impressions_count, some_attribute_of_book FROM book 
                                         WHERE title LIKE ?
                                         ORDER BY impressions_count", params[:query], params[:query]]) 
```

以上是完全未经测试的代码，更多的是一个例子

# hibernate - 使用 spring3 和 hibernate4 jsps 以原始 html 和 jsp 代码显示

> ID：11531394
> 
> 赞同：0
> 
> 时间：2012-07-17T21:51:54.163
> 
> 标签：hibernate, spring-mvc, tomcat7

长时间阅读第一次打字机。我一直在尝试在tomcat7上设置一个简单的spring3和hibernate4 maven驱动的webapp。我的所有注释都运行良好，我的页面正在加载，并且控制器逻辑运行良好。

出于某种原因，我的 jsp 页面开始在我的 Web 浏览器中显示为原始代码。事实证明，如果我将第`<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>` 一个放在 jsp 中的`<html>`标签之前，他们就会这样做。

jsps 也没有在 wtp 工作目录中显示为已编译的代码。我在eclipse中这样做。是的，我尝试 mvn 打包它并将它放在一个真正的 tomcat 7 实例上。一样。

代码实际上在这里

```
https://github.com/rbeltran/spring-mvc-petclinic 
```

我正在尝试设置一个简单的 spring-mvc petclinic 来针对 grails 中的相同事物对其进行性能测试。我现在只是启用添加/查看所有者。

如果有人知道为什么我要获取原始 jsp/html 代码以及为什么在页面正确显示时模型无法解析，请告诉我。还应该注意的是，当原始 jsp 代码通过时，内容类型以纯文本形式通过，而当页面看起来不错时，则以 text/html 形式传递。

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
  <display-name>spring-mvc-petclinic</display-name>
  <welcome-file-list>
    <welcome-file>/views/hello.jsp</welcome-file>
  </welcome-file-list>

    <servlet>
        <servlet-name>appServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>appServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <context-param>
        <param-name>log4jConfigLocation</param-name>
        <param-value>/WEB-INF/log4j.properties</param-value>
    </context-param>    
    <listener>
        <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>
    </listener>

</web-app> 
```

我想我的 appServlet-servlet.xml 太大，无法粘贴到这里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:56:36.683

好的，我通过重新启动逐行浏览了我的配置 xml 文件，结果发现我的 web.xml 中有一行是问题所在。我想在 vmware 打人。我改变了这个：

```
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

对此：

```
<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

现在我的 jsps 完美显示，我的模型变量也显示出来了。

# python - scipy曲线拟合矩阵

> ID：11531397
> 
> 赞同：4
> 
> 时间：2012-07-17T21:52:05.053
> 
> 标签：python, scipy

我需要使用 scipy 的`curve_fit`函数进行简单的曲线拟合。但是，我的数据是矩阵的形式。我可以在 numpy 中轻松做到这一点，但我想看看适合 scipy 的好处。

问题：

AX = B --> 给定 A，求 X 的最小二乘误差。

```
from scipy.optimize import curve_fit
def getXval():
    a = 4; b = 3, c = 1;
    f0 = a*pow(b, 2)*c
    f1 = a*b/c
    return [f0, f1]

def fit(x, a0, a1):
    res = a0*x[0] + a1*x[1]
    return [res]

x = getXval()
y = [0.15]
popt, pcov = curve_fit(fit, x, y) 
```

但是，这是行不通的。有人可以指出这里发生了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:44:44.710

您的代码有一些问题。
1）使用 numpy 数组而不是 Python 列表
2）您缺少 y 的值。

这对我有用：

```
from scipy.optimize import curve_fit
import numpy as np
def getXval():
    a = 4; b = 3; c = 1;
    f0 = a*pow(b, 2)*c
    f1 = a*b/c
    return np.array([f0, f1])

def fit(x, a0, a1):
    res = a0*x[0] + a1*x[1]
    return np.array([res])

x = getXval()
y = np.array([0.15, 0.34])
popt, pcov = curve_fit(fit, x, y)
print popt, pcov 
```

# c# - 超时后如何给 WCF 服务更多的时间来完成它？

> ID：11531400
> 
> 赞同：0
> 
> 时间：2012-07-17T21:52:11.747
> 
> 标签：c#, wcf, c#-4.0

我们有一个长期运行的异步 WCF 服务操作，它从我们服务中的不同组件中获取日志文件。现在，一切正常，但我们还想实现一个“很高兴”的功能。

如果异步服务花费的时间太长，WCF 将超时，但如果我们的某个组件行为不端，则发出其日志文件的时间可能比我们为超时期限分配的时间长。如果发生这种情况，如果客户端应用程序告诉用户获取日志文件需要一段时间并询问用户是否要继续等待，那就太好了。如果用户说是，是否有某种方法可以在超时时的状态下恢复操作并重置超时计时器？

这个伪代码显示了我们的想法：

```
public void GetServiceLogFiles(Action<Object> callback)
{
    try
    {
        var gotLogFilesDelegate = (result) =>
            { var answer = WcfService.EndGetLogFiles(result);
              callback(answer); };
        WcfService.BeginGetLogFiles(gotLogFilesDelegate, null);
    }
    catch(TimeoutException)
    {
        var dialog = new Dialog("The service is taking a while to get the log files. Would you like to keep on waiting for it to finish?");
        if(dialog.response = Dialog.YES)
            Magic_happens_here_and_lets_the_Wcf_Service_continue_working_on_Get_Log_Files();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T00:36:37.810

有一种方法可以设置超时值。看一下 System.ServiceModel.Channels.Binding，它具有以下属性：

```
ReceiveTimeout
OpenTimeout
SendTimeout
CloseTimeout 
```

这些可以在创建服务代理时设置。

```
public static class MyWcfServiceProxyFactory
{
    public static MyWcfService CreateMyWcfService(string endpointUrl) 
    {

        EndpointAddress endpointAddress = new EndpointAddress(endpointUrl);
        CustomBinding customBinding = new CustomBinding();

        TimeSpan timeout = new TimeSpan(0, 5, 0);

        customBinding.ReceiveTimeout = timeout;
        customBinding.OpenTimeout = timeout;
        customBinding.SendTimeout = timeout;
        customBinding.CloseTimeout = timeout;

        ChannelFactory<MyWcfService> channelFactory = new ChannelFactory<MyWcfService>(customBinding, endpointAddress);

        return channelFactory.CreateChannel();
    }
} 
```

如果在配置中创建绑定，则可以使用相同的设置。

```
<bindings>
    <basicHttpBinding>
        <binding name="MyWcfService"  
        receiveTimeout="0:05:00"
        openTimeout="0:05:00"
        sendTimeout="0:05:00"
        closeTimeout="0:05:00"> 
```

我不认为事后可以更改超时，因此您必须创建 2 个通道，一个具有“正常”超时，一个具有延长超时。如果正常一次超时，重试尝试可以使用延长超时的通道。

# ruby-on-rails - 使用 Rails 和 Postgresql 处理“文本”字段中的空字符

> ID：11531405
> 
> 赞同：5
> 
> 时间：2012-07-17T21:52:28.510
> 
> 标签：ruby-on-rails, utf

我最近对我的 rails 应用程序上的各种输入进行了一轮测试，我发现了如何处理传入请求中的空字符的问题。我的应用程序由 Postgresql 8.4 数据库支持。事实证明，Postgresql 不支持在标准的“文本”或“varchar”字段中存储空字符。但是，当我尝试通过 rails 存储一个包含空字符的字符串时，默认行为似乎是在空字符之后截断字符串。我认为这是一个问题，因为在截断发生之前验证了字符串。可以通过插入空字符来绕过对长度之类的验证，因为 ruby​​ 可以很好地处理它们，并且截断只发生在插入时。

我试图找出处理这些输入的最佳方法。对我来说理想的行为是在处理无效的 UTF-8 字节时抛出异常。现在，我能想到的唯一选择是显式检查每个输入字符串中的空字符。我宁愿有一个通用的方法，但我不知道从哪里开始寻找。修补 postgresql 适配器来检查这个是一种选择吗？还是有一些我一直缺少的标准方法？

# java - Amazon S3 java android简历上传？

> ID：11531406
> 
> 赞同：1
> 
> 时间：2012-07-17T21:52:32.660
> 
> 标签：java, amazon-s3

使用我在此处找到的代码[S3 文件上传代码示例](http://docs.amazonwebservices.com/AmazonS3/latest/dev/llJavaUploadFile.html)，我想知道如何添加暂停上传，以及如何再次恢复下载。对于初学者来说，uploadRequest.setFileOffset(long argument) 似乎设置了我正在上传的文件的偏移量。这个对吗。因此，如果我说 setFileOffset(2000) 文件将从文件开头的 2000 个字节开始上传？其次，我将如何允许用户暂停上传？S3Client 中的 abortMultipartUpload 可能不允许我们再次恢复下载？是否有任何人可以共享暂停和恢复文件上传的示例代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-06T18:34:24.477

我认为你在正确的轨道上，但我发现这个特定的 android 代码似乎完全符合你的要求。

[https://github.com/jgilfelt/android-simpl3r](https://github.com/jgilfelt/android-simpl3r)

# objective-c - 重新定位 MKMapView 的 userLocationView？

> ID：11531408
> 
> 赞同：0
> 
> 时间：2012-07-17T21:52:49.943
> 
> 标签：objective-c, ios, mapkit

我正在制作一个在森林中有一系列小径的应用程序。GPS会不时关闭几十米，所以我正在尝试编写一些代码，将userLocationView“捕捉”到轨迹（用户可能所在的位置）。

我有一些代码可以扫描附近的小径，确定用户的可能位置，并为其获取 CLLocationCoordinate2D。

现在我需要将该位置应用到 userLocationView。我认为这会起作用，但似乎没有：

```
userLocationAnnotation.coordinate = myDerivedCoordinate; 
```

我意识到我可能可以创建自己的注释，但如果可能的话，我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:53:21.583

`MapView`直接从 获取用户位置`CLLocationManager`，并且没有记录的方法来拦截此交互。这样做会比添加您自己的注释更多工作，并且会导致应用被拒绝。此外，重新定义系统提供的正确信息也没有任何意义。这就是为什么`mapView.userLocation`a`MKUserLocation`具有只读位置属性的原因。

因此，您必须大致创建自己的：

*   放`mapView.showsUserLocation = false;`
*   创建并启动位置管理器

    `self.locationManager = [CLLocationManager new]; self.locationManager.delegate = self; [self.locationManager startUpdatingLocation];`

*   添加/替换您自己的蓝点注释来自`locationManager:didUpdateToLocation:fromLocation:`.`CLLocationManagerDelegate`

您可以使用 UIKit-Artwork-Extractor 获得蓝点图形（可能还有脉动的圆圈）。对于脉动效果，将不同的帧添加到`MKAnnotationView`a中，或者取一个圆圈并与 a一起使用作为属性。`UIImageView``UIView animateWithDuration``CGAffineTransformMakeScale``view.transform`

# wpf - TreeView two way binding failing at lower levels

> ID：11531413
> 
> 赞同：0
> 
> 时间：2012-07-17T21:53:52.843
> 
> 标签：wpf, treeview

Ok I have a custom TreeListView that inherits from TreeView and has some columns.

I have custom objects in my application with two text properties; KeyValue and Description. I'm trying to bind textboxes in the columns to these properties which works great on the initial load, however not so good when I want to change them. It works exactly as it's supposed to (changing the values on the base objects) for top level items, but for anything below that, it doesn't change the underlying values when I change the textbox value. I'm pretty new to WPF so sorry if this is basic but I have searched quite a while and can't find an answer that seems to work for me.

The XAML for the TreeListView is:

```
<r:TreeListView Name="TLV_Main" Margin="0,0,0,41" ItemsSource="{Binding Keynotes}" Style="{StaticResource TLV_Standard}">
    <r:TreeListView.Columns>
        <GridViewColumn Header="Key" >
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=KeyValue, Mode=TwoWay}" ContextMenu="{StaticResource Ctx_All}" ></TextBox>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
        <GridViewColumn Header="Description" Width="{Binding ElementName=TLV_Main, Path=ActualWidth, Converter={StaticResource DescriptionColumnConverter}}">
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=Description, Mode=TwoWay}" TextWrapping="Wrap"></TextBox>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
        <GridViewColumn Width="30">
            <GridViewColumn.Header>
                <Image Source="pack://application:,,,/Resources/Icon_Comment.png" SnapsToDevicePixels="False" Stretch="None"></Image>
            </GridViewColumn.Header>
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <Image Source="pack://application:,,,/Resources/Icon_Comment.png" SnapsToDevicePixels="False" Stretch="None" Visibility="{Binding Converter={StaticResource BoolToVisibility}, Path=HasActiveComments}" MouseLeftButtonUp="CommentClick"></Image>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
        <GridViewColumn Width="30">
            <GridViewColumn.Header>
                <Image Source="pack://application:,,,/Resources/Icon_Link.png" SnapsToDevicePixels="False" Stretch="None"></Image>
            </GridViewColumn.Header>
            <GridViewColumn.CellTemplate>
                <DataTemplate>
                    <Image Source="pack://application:,,,/Resources/Icon_Link.png" SnapsToDevicePixels="False" Stretch="None" Visibility="{Binding Converter={StaticResource BoolToVisibility}, Path=HasLinks}" MouseLeftButtonUp="LinkClick"></Image>
                </DataTemplate>
            </GridViewColumn.CellTemplate>
        </GridViewColumn>
    </r:TreeListView.Columns>
    <r:TreeListView.ItemTemplate>
        <HierarchicalDataTemplate ItemsSource="{Binding ChildNotes}">
        </HierarchicalDataTemplate>
    </r:TreeListView.ItemTemplate>
</r:TreeListView> 
```

Can anyone see why this wouldn't work right?

# ruby-on-rails - rails: redirect_to not working right

> ID：11531414
> 
> 赞同：-1
> 
> 时间：2012-07-17T21:53:54.910
> 
> 标签：ruby-on-rails, ajax

I have some javascript that displays some data from my database on my webpage. I also have a button that when the user clicks it some logic occurs in the controllers and then I want to have the data displayed changed. However, at the momment when they click the button nothing happens (page is not reloaded). Could you guys help me set that up? Here is what I have so far:

controller:

```
class QtlsController < ApplicationController
 require 'json'
 require 'uri'
 $rollback = nil
 def index
   logger.debug "\nrollback is: #{$rollback}\n"
   render "index"
 end
 def rollback
   $rollback = params[:version].gsub(/"/,'')
   redirect_to :action => :index
 end
end 
```

view:

```
 <%- if $rollback.nil? %>
     generates one type of table
  <%- else %>
     generates another type of table
  <%- end %>
  ...some other logic and buttons etc...
  jQuery(function() {
            jQuery( "#rollback").button();
            jQuery( "#rollback").click(function() {
                    var version = getSelectedText('version_selector');
                    jQuery.ajax({
                            type: "POST",
                            headers: {
                                    'X-Transaction': 'POST Example',
                                    'X-CSRF-Token': jQuery('meta[name="csrftoken"]').attr('content')
                            },
                            url: "/qtls/rollback",
                            data: {version: JSON.stringify(version) },
                            dataType: 'json',
                            sucess: function() { alert("Success! Rollbacked"); }
                    });
            }); 
```

Here is what is in log files when I go to the page and when I click the rollback button:

```
 Started GET "/qtls" for 10.64.229.59 at Tue Jul 17 16:48:52 -0500 2012
 Processing by QtlsController#index as HTML
 rollback is: 
 ROLLBACK IS NIL!!!
   Qtl Load (2.0ms)  SELECT `qtls`.* FROM `qtls` 
   Rendered qtls/index.html.erb within layouts/application (404.8ms)
   Rendered shared/_user_nav.html.erb (1.3ms)
   Rendered shared/_nav.html.erb (1.3ms)
   Rendered shared/_footer.html.erb (0.6ms)
 Completed 200 OK in 544ms (Views: 540.9ms | ActiveRecord: 2.0ms)
 Started POST "/qtls/rollback" for 10.64.229.59 at Tue Jul 17 16:48:57 -0500 2012
 Processing by QtlsController#rollback as JSON
   Parameters: {"version"=>"\"test1\""}
 Redirected to http://10.10.136.244:4000/qtls
 Completed 302 Found in 3ms (ActiveRecord: 0.0ms)
 Started GET "/qtls" for 10.64.229.59 at Tue Jul 17 16:48:58 -0500 2012
 Processing by QtlsController#index as JSON
 rollback is: test1
   Rendered qtls/index.html.erb within layouts/application (37.7ms)
   Rendered shared/_user_nav.html.erb (3.3ms)
   Rendered shared/_nav.html.erb (4.3ms)
   Rendered shared/_footer.html.erb (2.0ms)
 Completed 200 OK in 99ms (Views: 97.4ms | ActiveRecord: 0.0ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:01:25.513

`$rollback`使用像!这样的全局变量是一种非常糟糕的风格。

如果您想存储用户数据，请使用您的会话对象。

使用 jquery-rails gem 在您的视图中与 jQuery 集成，然后`:remote => :true`在您的表单中使用，以便 rails 可以处理表单提交。

# json - mvc3 安全漏洞中的 kendoui 网格，我该如何解决？

> ID：11531416
> 
> 赞同：2
> 
> 时间：2012-07-17T21:54:21.043
> 
> 标签：json, asp.net-mvc-3, security, kendo-ui

kendoUI 网格使用 HttpGet 请求在 AJAX 请求期间更新数据。(http://www.kendoui.c​​om/documentation/asp-net-mvc/helpers/grid/ajax-binding.aspx) 服务器返回一个Json结果，为了让它工作，我们需要使用以下代码：

```
return Json(Result, JsonRequestBehavior.AllowGet); 
```

这可以很好地完成工作，但它是一个安全漏洞（这就是微软让我们把“AllowGet”放在那里的原因）。

返回 Json 的安全方法是在 HttpPost 中，但 kendoui 网格不允许这样做。

我想使用 kendoui 网格。有没有办法使用 HttpGet，返回 Json，并安全地执行它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T10:19:25.970

如果您使用的是 Kendo Grid 的 MVC 包装器，则不会发生这种情况。由于这种 ASP.NET MVC 行为，网格被配置为发出 POST 请求。确保你已经包括在内`kendo.aspnetmvc.min.js`。更多信息可以在[文档](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/introduction)中找到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:04:30.090

kendo 数据源在使用 ajax 时默认使用 GET，但可以通过定义要发布的传输设置来使用 POST。

这是[Telerik kendo CRUD 示例](https://github.com/telerik/kendo-examples-asp-net/blob/master/grid-wcf-crud/Default.aspx)中使用 post 的代码的缩短版本。

```
<script>
    $(function () {
        $("#grid").kendoGrid({
            toolbar: ["create", "save", "cancel"],
            dataSource: {
                schema: {
                    model: {
                        id: "ProductID",
                        fields: {
                            ProductID: { editable: false, nullable: true },
                            ProductName: { validation: { required: true } },
                            UnitPrice: { type: "number", validation: { required: true } }
                        }
                    }
                },
                transport: {
                    create: {
                        url: "Products.svc/Create", 
                        contentType: "application/json; charset=utf-8", 
                        type: "POST" 
                    },
                    read: {
                        url: "Products.svc/Read",
                        contentType: "application/json; charset=utf-8",
                        type: "POST"
                    },
                    parameterMap: function(data, operation) {
                        if (operation != "read") {
                            return JSON.stringify({ products: data.models })
                        }
                    }
                }
            }
        });
    });
</script> 
```

# scala - 使用抽象类型的自我注释

> ID：11531421
> 
> 赞同：0
> 
> 时间：2012-07-17T21:54:28.467
> 
> 标签：scala, abstract-type

我想用抽象类型定义一个抽象递归数据结构。像这样的东西：

```
case class ParentA( name : String, children : List[ParentA] ) extends Parent {
    type PARENT = ParentA
}

case class ParentB( name : String, children : List[ParentB] ) extends Parent {
    type PARENT = ParentB
}

sealed abstract class Parent {
    // we'd like to Define Parent as a PARENT
    // something like: 
    // this : PARENT =>

    type PARENT <: Parent

    val name : String

    val children : List[PARENT]

    def findParent(name:String) : Option[PARENT] = {
        if( name == this.name ) {
            Some(this) // ouch
        } else {
            // re-ouch
            children.flatMap( f => f.findParent(name) )
        }
    }
}

val a2a : ParentA = ParentA("a",List(ParentA("a1",Nil),ParentA("a2",List(ParentA("a2a",Nil))))).findParent("a2a").get 
```

当然这不会编译，因为编译器无法猜测 Parent.this 是 PARENT 。

```
error: type mismatch;
found   : Parent.this.type (with underlying type this.Parent)
required: Parent.this.PARENT
        Some(this) 
```

并且

```
error: type mismatch;
found   : List[Parent.this.PARENT#PARENT]
required: Option[Parent.this.PARENT]
        children.flatMap( f => f.findParent(name) ) 
```

我可以通过在这里和那里进行转换来解决它，但最好能够告诉编译器 Parent 是 PARENT。或者也许我错过了一些东西:)

# 编辑 - 泛型

我忘了提到泛型不是一种选择。这个例子实际上是一个更微妙问题的简化版本。使用泛型将导致程序的二次增长。这是一个链接，解释了为什么泛型并不总是可行的替代方案：[Scala：抽象类型与泛型](https://stackoverflow.com/questions/1154571/scala-abstract-types-vs-generics)。

基本上我最好使用抽象类型 - 甚至既不使用抽象类型也不使用泛型 - 和强制转换。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T22:20:26.143

与@Debilski 提到的想法相同，但没有额外的类型参数：

```
case class ParentA(name: String, children: List[ParentA]) extends Parent[ParentA]

case class ParentB(name: String, children: List[ParentB]) extends Parent[ParentB]

sealed abstract class Parent[P <: Parent[P]] { this: P =>

  def name: String

  def children: List[P]

  def findParent(name: String): Option[P] =
    if (name == this.name) Some(this)
    else children.flatMap(_.findParent(name)).headOption
} 
```

顺便说一句，抽象成员使用`def`s 而不是`val`s。它们在子类中实现它们时允许更大的灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:12:40.440

*仅供参考。[sschaef](https://stackoverflow.com/a/11531681/200266)有更好的方法来做到这一点。*

这使用 Scala CRTP 和自类型进行编译。

```
case class ParentA(name : String, children : List[ParentA]) extends Parent[ParentA]

case class ParentB(name : String, children : List[ParentB]) extends Parent[ParentB]

sealed abstract class Parent[T] { this : T =>
    type PARENT = Parent[T] with T

    val name : String

    val children : List[PARENT]

    def findParent(name:String) : Option[PARENT] = {
        if( name == this.name ) {
            Some(this)
        } else {
            children.flatMap( f => f.findParent(name) ).headOption
        }
    }
}
val a2a : ParentA = ParentA("a",List(ParentA("a1",Nil),ParentA("a2",List(ParentA("a2a",Nil))))).findParent("a2a").get 
```

# javascript - AJAX文件上传到php，什么都没有发送？

> ID：11531422
> 
> 赞同：0
> 
> 时间：2012-07-17T21:54:30.740
> 
> 标签：javascript, html

我的网站上有一个输入，允许用户选择要上传的文件

```
<input type="file" name="file" id="file" /> 
```

在我的页面末尾，我有一个调用 javascript 函数的按钮。该函数需要检查用户是否指定了要上传的文件，如果是，则上传文件（php）并获取文件名。

如何从 javascript 访问文件输入表单？即我怎样才能获得'post' 文件信息来调用'upload_file.php'。

附言。我宁愿不使用 JQuery

编辑-我已经尝试过了，但它似乎不起作用

```
function uploadFile(){
    var files = document.getElementById('file');
    var file = files.files[0];

    var xmlhttp=new XMLHttpRequest();
    xmlhttp.onreadystatechange=function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200){
        alert(xmlhttp.responseText);
        }
    }
    xmlhttp.open("POST","uploadfile.php",true);
    xmlhttp.setRequestHeader("Content-type", "multipart/form-data")
    var formData = new FormData();
    formData.append("thefile", file);
    xmlhttp.send(formData);
} 
```

php:

```
<?php

echo "Upload: " . $_FILES["thefile"]["name"] . "<br />";
echo "Type: " . $_FILES["thefile"]["type"] . "<br />";
echo "Size: " . ($_FILES["thefile"]["size"] / 1024) . " Kb<br />";
echo "Temp file: " . $_FILES["thefile"]["tmp_name"] . "<br />";

?> 
```

给我一个警告说文件名是空白的，类型是空白的，大小是 0 等等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T21:58:44.723

它可以通过 DOM 访问，就像任何其他元素一样。唯一的限制是出于安全原因您不能更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:00:49.437

[http://www.simonerodriguez.com/ajax-form-submit-example/](http://www.simonerodriguez.com/ajax-form-submit-example/)

检查此链接以获取 ajax 帖子。您可以像普通表格一样简单地发布它，不需要额外的努力。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:01:06.383

你考虑过 HTML5 File API 吗？

相关的 StackOverFlow：

[html 5 文件上传](https://stackoverflow.com/questions/4162102/html-5-file-upload)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T22:07:19.043

我认为你需要这样的东西：http: [//jsfiddle.net/kHQLp/4/](http://jsfiddle.net/kHQLp/4/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T22:14:23.757

通过 AJAX 执行此操作可以实现以下问题（IE 除外）。

1）IE是不可能的。如果有人找到了方法，请给我大喊。我所做的只是以正常方式提交表单并返回更新的页面。

2）对于 FF（如果我没记错的话 Opera 和 Safari）下面的代码片段有效

```
var fileTag = document.getElementById('id for input element');
var file = fileTag.files[0];

// You can check the type here by checking the string file.type

var data = file.getAsBinary(); // Or getAsText() 
```

3）对于 Chrome 使用此代码

```
var fileTag = document.getElementById('id for input element');
var file = fileTag.files[0];
var reader = new FileReader();
reader.onload = function() { /* Use reader.result as it has loaded */  };
reader.onerror = function(e) { /*  and error occurred - handle it */ };
reader.readAsText(file); // I think there is also a function readAsBinary. 
```

当您获得文件的内容后，您可以使用 AJAX 发布它

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-29T20:01:39.240

通过替换解决了我的问题：

```
 xmlhttp.setRequestHeader("Content-type", "multipart/form-data") 
```

和

```
 xmlhttp.setRequestHeader("enctype", "multipart/form-data") 
```

# wcf - 如何在 WCF LOB 适配器中将 null 作为存储过程参数传递

> ID：11531423
> 
> 赞同：1
> 
> 时间：2012-07-17T21:54:32.173
> 
> 标签：wcf, biztalk

参数字段之一需要作为 null 传递，使用 WCF lob SQL 适配器，如何将 null 传递给存储过程参数？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T06:41:42.903

假设您已通过 Add Generated Items / Consume WCF Adapter Service 将架构添加到您的 PROC，对于可为空的 proc 字段，Proc Request 架构应如下所示：

```
<xs:element minOccurs="0" maxOccurs="1" name="MyParam" nillable="true" type="xs:int" /> 
```

在您的地图中，使用[nil 值 functoid](http://msdn.microsoft.com/en-us/library/bb728021.aspx)进行映射，或者如果您使用的是 XSLT，那么您可以像这样进行映射：

```
<ns0:MyProc>
  <ns0:MyParam>
    <xsl:attribute name="xsi:nil">
      <xsl:value-of select="'true'" />
    </xsl:attribute>
  </ns0:MyParam>
</ns0:MyProc> 
```

# android - 如何在 android 的 tablelayout 中将两个孩子放入一个单元格中？

> ID：11531426
> 
> 赞同：0
> 
> 时间：2012-07-17T21:54:58.290
> 
> 标签：android, tablelayout

在我的表格布局中，如何将两个孩子放在一个单元格中？甚至是可能的，似乎在互联网上找不到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:01:02.010

将两个孩子包裹在一个布局中。这将导致单元格中有一个孩子，其中有两个孩子。

```
<TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <RelativeLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >
                <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />
            </RelativeLayout>

        </TableRow> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T21:59:32.797

只需将两个`View`s合二为一，`LinearLayout`并使其成为单元格。

所以层次结构是这样的：

```
- table
  - row
    - view
    - view
    - layout
      - child view
      - child view
    - view
  - row
  ... 
```

然后两个孩子将显示为一个单元格（在我上面的示例中，4 个单元格中的第 3 个）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T21:59:41.593

是的，你可以把它们包在一个`LinearLayout`

# c# - c# 代码中的自动回发，同时保留多个文本框和下拉列表值

> ID：11531428
> 
> 赞同：-1
> 
> 时间：2012-07-17T21:55:07.727
> 
> 标签：c#, asp.net

我有几个`textboxes`，`dropdownlists`在我的表格上。当用户提交表单时，我想在表单上保留其中的几个值，但我还想让它们在表单提交后几秒钟内不可见，以便用户知道表单已提交。我很确定您需要执行 an`autopostback`来更改 and 的可见性 `textboxes`，`dropdownlists`但我不想执行 an，`autopostback`因为我会丢失我想要保留的字段。有什么选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:30:02.833

您能否扩大您的问题，更多地说明您正在处理的内容，现在它非常模棱两可。

至于使文本框/下拉列表“不可见”，您可以通过 Javascript 完成此操作：

```
<input type=text id=text1>
<input type=button value=hide onclick=hide()>
<input type=button value=show onclick=show()>
<script type=text/javascript>
function hide(){
document.getElementById('text1').style.visibility='hidden';
}
function show(){
document.getElementById('text1').style.visibility='visible';
}
</script> 
```

* * *

网页是无状态的。Microsoft 在 ASP.NET 1.0 中引入了 ViewState 来适应这种情况。我所说的无状态是指客户端（用户的计算机）和服务器（承载客户端正在查看的网页）之间没有一致的连接。ViewState 是一种媒介，旨在帮助在回发期间在表单控件上架起保留值。

如果您使用的是 ASP.NET MVC，您将丢失框中的数据。ASP.NET MVC 不使用 ViewState（谢天谢地）。这就是为什么建议使用 ASP.NET MVC 使用 AJAX 与服务器通信的原因。如果您想对此了解更多，请查看： [asp.net c# MVC: How do I live without ViewState?](https://stackoverflow.com/questions/2230519/asp-net-c-sharp-mvc-how-do-i-live-without-viewstate)

如果您使用的是常规网站/Web 应用程序项目，如果您启用视图状态（默认情况下启用），您的数据将保持不变。

要禁用/启用视图状态，请参阅以下 ASPX 标头：

```
<%@ Page Language="C#" EnableViewState="false" %>
<%@ Page Language="C#" EnableViewState="true" %> 
```

视图状态：http : [//msdn.microsoft.com/en-us/library/ms972976.aspx](http://msdn.microsoft.com/en-us/library/ms972976.aspx)

# c - 返回错误顺序的字符串二叉树

> ID：11531429
> 
> 赞同：0
> 
> 时间：2012-07-17T21:55:10.183
> 
> 标签：c, pointers, binary-tree

我对 C 语言相当陌生，并且一直在学习 K&R 的《The C Programming Language》一书。在对二叉树进行了练习之后，我想为 char*、long 和 double 制作二叉树的标头。

下面的代码中有一个函数让我很伤心——它应该用存储在树中的值以字典顺序填充一个字符指针数组，但是它在某个地方有一个错误。这是字符串树头 btree.h 的代码：

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    /************** TYPES **************/
    typedef struct ctree 
    {
        char *name;
        ctree *left;
        ctree *right;
    }; 
    /************** Globals **************/

    static int c_inc = 0;

    /************** Function Prototypes **************/

    ctree *add_to_c_tree  (ctree *cnode, char *name);
    void print_c_tree     (ctree  *cnode);
    ctree *c_tree_alloc   (void);
    void   c_tree_free    (ctree  *cnode);
    void  return_c_tree   (ctree  *cnode, char **array);

    /************** Function Definitions **************/

    /* add_to_c_tree() : Adds a new node to a *character binary tree */
    ctree *add_to_c_tree (ctree *cnode, char *name){

        /* If the node is null, allocate memory for it, 
         * copy the name and set the internal nodes to null*/
        if(cnode == NULL){
            cnode = c_tree_alloc();
            cnode->name = strdup(name); 
            cnode->left = cnode->right = NULL;
        }
        /* If initialised then add to the left node if it is lexographically
        * less that the node above it else add it to the right node */
        else{
            if(strcmp(name, cnode->name) < 0)
                cnode->left  = add_to_c_tree(cnode->left,name);
            else if(strcmp(name, cnode->name) > 0)
                cnode->right = add_to_c_tree(cnode->right,name);

        }

        return cnode;
    }
    /* print_c_tree() : Print out binary tree */
    void print_c_tree(ctree *cnode){
        if (cnode != NULL) { 
            print_c_tree(cnode->left); 
            printf("%s\n",cnode->name); 
            print_c_tree(cnode->right);
        }
    }
    /* return_c_tree() : return array of strings containing all values in binary tree */
    void  return_c_tree   (ctree *cnode, char **array){

        if (cnode != NULL) { 
            return_c_tree (cnode->left,array+c_inc);
            c_tree_free(cnode->left); 
            *(array+c_inc++) = strdup(cnode->name);
            // printf("arr+%d:%s\n", c_inc-1,*(array+(c_inc-1)));
            return_c_tree (cnode->right,array+c_inc); 
            c_tree_free(cnode->right);
        }
    }
    /* c_tree_alloc() : Allocates space for a tree node */
    ctree *c_tree_alloc(void){
        return (ctree *) malloc(sizeof(ctree));
    }
    /* c_tree_free() : Free's Memory */
    void c_tree_free  (ctree *cnode){
        free(cnode);
    } 
```

我一直在用 bt.c 测试：

```
 #include "btree.h"

    int main(void){

        ctree *node = NULL; char *arr[100];

        node = add_to_c_tree(node, "foo");
        node = add_to_c_tree(node, "yoo");
        node = add_to_c_tree(node, "doo");
        node = add_to_c_tree(node, "woo");
        node = add_to_c_tree(node, "aoo");
        node = add_to_c_tree(node, "boo");
        node = add_to_c_tree(node, "coo");

        print_c_tree(node);

        return_c_tree(node,arr);
        for (int i = 0; i < 7; ++i)
        {
            printf("%d:%s  ..\n",i, arr[i]);
        }
        return 0;
    } 
```

这个问题的原因是我遇到了 return_c_tree() 函数的问题，该函数旨在模仿 K&R 的 print_c_tree() 函数的行为，除了递归调用自身直到 NULL ptr 并打印出节点的名称按字典顺序，这意味着将它们的名称添加到字符 ptrs 数组中并释放节点内存。

然而，我在上面运行时得到的输出是：

```
 aoo
    boo
    coo
    doo
    foo
    woo
    yoo
    0:aoo  ..
    1:(null)  ..
    2:boo  ..
    3:doo  ..
    4:foo  ..
    5:coo  ..
    6:(null)  .. 
```

这表明打印功能工作正常，但返回功能显然不是。令人困惑的是，如果在 return_c_tree() 中对 printf() 的调用未注释，则结果如下：

```
 aoo
    boo
    coo
    doo
    foo
    woo
    yoo
    arr+0:aoo
    arr+1:boo
    arr+2:coo
    arr+3:doo
    arr+4:foo
    arr+5:woo
    arr+6:yoo
    0:aoo  ..
    1:(null)  ..
    2:boo  ..
    3:doo  ..
    4:foo  ..
    5:coo  ..
    6:(null)  .. 
```

这意味着它实际上确实以正确的顺序添加了字符串。我也尝试过不使用 c_inc 变量 -> 即只是在将数组传递给正确的节点之前递增数组，该节点从 return_c_tree() 中的 printf 产生相同的结果，但与 main 不同：

```
 arr+-1:aoo
    arr+-1:boo
    arr+-1:coo
    arr+-1:doo
    arr+-1:foo
    arr+-1:woo
    arr+-1:yoo
    0:foo  ..
    1:yoo  ..
    2:coo  ..
    3:(null)  ..
    4:(null)  ..
    5:(null)  ..
    6:(null)  .. 
```

我很困惑，所以如果有人可以提供帮助，我将不胜感激。我确定我只是在错误的地方增加它，但我不知道在哪里。

我以为我终于理解了指针，但显然没有。

最佳P

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:35:44.813

您的问题是如何处理`array`递归调用时指向的指针。这将修复您的`return_c_tree`功能：

```
void  return_c_tree   (ctree *cnode, char **array)
{

  if (cnode != NULL) { 
    return_c_tree (cnode->left,array); // <--- CHANGED 2ND PARAM
    c_tree_free(cnode->left); 
    *(array+c_inc++) = strdup(cnode->name);
    return_c_tree (cnode->right,array); // <--- AGAIN, CHANGED 2ND PARAM
    c_tree_free(cnode->right);
  }
} 
```

您正在使用全局变量`c_inc`来跟踪数组的当前索引。但是，当您递归调用时`return_c_tree`，您传入了`array+c_inc`，但您没有抵消 c_inc 来解释这一点。`c_inc`基本上，你每次都重复计算。

虽然这解决了您的特定问题，但您的代码还有一些其他问题。

1.  一般来说，使用全局变量是自找麻烦。没必要在这里做。`c_inc`作为参数传递给`return_c_tree`.

2.  此外，将全局变量与递归混合起来特别容易出现问题。您确实希望递归例程将其状态保留在堆栈上。

3.  正如评论者指出的那样，您的所有代码都`btree.h`应该在`btree.c`. 头文件的重点是定义接口，而不是代码。

4.  （*这更具风格*）您的`return_c_tree`函数实际上是两个不同的函数：将树的元素（按顺序）复制到数组中，并释放树使用的内存。这两个操作在概念上是不同的：有时您想要做一个而不是两个。将两者混合使用可能有令人信服的性能（或其他）原因，但要等到你有一些确凿的证据。

# google-apps-script - 在脚本中使用 e.parameter 时遇到问题

> ID：11531432
> 
> 赞同：0
> 
> 时间：2012-07-17T21:55:19.583
> 
> 标签：google-apps-script, google-apps

我有一个作为 Web 应用程序服务发布的脚本，我正在尝试在其中构建搜索功能。scipt 旨在允许用户在名为**searchBox**的文本框中输入一个术语，单击搜索并显示包含该术语的电子表格的行。

```
function searchClickHandler(e) {
  var app = UiApp.getActiveApplication();
  var searchResultPanel = app.getElementById('searchResultPanel');
  var searchResultPane = app.getElementById('searchResultPane');
  var searchCloseButton = app.getElementById('searchCloseButton');
  var searchTerm = e.parameter.searchBox;
  if (searchTerm.toString().length == 6) {
    var searchList = ArrayLib.filterByText(dataValues, 1, searchTerm.toString());
    var searchTrim = new Array();
    for (var i = 0; i < searchList.length; i++) {
      var searchTrim1 = searchList[i].slice(1, 6);
      var searchTrim2 = searchList[i].slice(8, 10);
      var searchTrim3 = searchList[i].slice(17, 19);
      searchTrim.push(searchTrim1.concat(searchTrim2,searchTrim3));
    }
  } 
```

如果低于此值，还有其他一些其他内容，然后处理程序应该显示结果，但**e.parameter.searchBox**返回未定义。如果我手动设置**searchTerm**脚本运行良好。

我在同一个脚本的另一个处理程序中成功使用**了 e.parameter**，所以我对此感到茫然。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:18:46.690

您显示的代码与帮助并不真正相关......您在创建“searchBox”时是否给它起了名字，还是它的ID？

e.parameter 使用小部件的**名称**作为参考。

编辑（以下评论）：在 GUI 构建器中，尝试按名称（对于小部件或面板的 ID）添加每个 callbackElement，并用逗号分隔，如下所示：

![在此处输入图像描述](../Images/bd1633ebfc14e74e217b61c37e506d40.png)

# maven - 在 src 编译之后和打包之前调用 maven exec 插件

> ID：11531438
> 
> 赞同：4
> 
> 时间：2012-07-17T21:56:05.750
> 
> 标签：maven, plugins, exec, maven-assembly-plugin

我想使用 ASM 修改类。我想使用 Exec 插件（或这里的人们建议的任何其他替代方案），在编译完成后修改类，但在它被 jarred（打包）之前。关于如何使用 maven 做到这一点的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T07:16:26.990

欢迎来到堆栈溢出。

ASM 似乎不存在插件，但据我了解，更好的解决方案是开发一个插件，它可以满足您的需求。开发插件非常容易。

把它绑定到编译阶段，就OK了。

如果你真的不想开发插件，你应该这样做：

```
 <plugin>
        <artifactId>maven-exec-plugin</artifactId>
        <version>???</version>
        <executions>
            <execution>
                <!-- The name you want, no really matter -->
                <id>asm-compile</id>
                <configuration>
                    ...
                </configuration>
                <!-- The phase you want to bind to -->
                <phase>compile</phase>
                <goals>
                    <goal>compile</goal>
                </goals>
            </execution>
            <execution> 
```

# r - 使用标准模式在 R 中生成数字序列

> ID：11531439
> 
> 赞同：9
> 
> 时间：2012-07-17T21:56:08.803
> 
> 标签：r, sequences

我正在做一个项目，我需要在 R 中输入许多“T 分数”表。这些表用于将原始测试分数转换为标准化值。它们通常遵循一种特定的模式，但不是一种简单的模式。例如，一种模式是：

```
34,36,39,42,44,47,50,52,55,58,60,63,66,68,
71,74,76,79,82,84,87,90,92,95,98,100,103,106 
```

我更喜欢使用一个简单的函数来填写这些，而不是手动输入它们。我知道 seq() 函数可以创建一个简单的序列，例如：

```
R> seq(1,10,2)
[1] 1 3 5 7 9 
```

有没有办法根据特定模式创建更复杂的序列？例如，上述数据可以这样完成：

```
c(34,seq(36:106,c(3,3,2)) # The pattern goes 36,39,42,44,47,50,52 (+3,+3,+2) 
```

...但是，这会导致错误。我认为应该有一个函数可以做到这一点，但我所有的 Google-fu 都让我回到了原来的 seq()。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T22:01:23.640

这可以使用`cumsum`（累积和）函数来完成，并且`rep`：

```
> 31 + cumsum(rep(c(3, 2, 3), 9))
 [1]  34  36  39  42  44  47  50  52  55  58  60  63  66  68  71  74  76  79  82
[20]  84  87  90  92  95  98 100 103 
```

确保序列在正确的位置停止：

```
> (31 + cumsum(rep(c(3, 2, 3), 10)))[1:28]
 [1]  34  36  39  42  44  47  50  52  55  58  60  63  66  68  71  74  76  79  82
[20]  84  87  90  92  95  98 100 103 106 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-17T22:07:50.200

这是一个在大多数情况下应该可以工作的自定义函数。它使用序列的累积和 ( `cumsum()`) 和整数除法来计算所需序列的长度。

```
cseq <- function(from, to, by){
  times <- (to-from) %/% sum(by)
  x <- cumsum(c(from, rep(by, times+1)))
  x[x<=to]
} 
```

试试看：

```
> cseq(36, 106, c(3,3,2))
 [1]  36  39  42  44  47  50  52  55  58  60  63  66  68  71  74  76  79  82  84  87  90  92  95  98
[25] 100 103 106

> cseq(36, 109, c(3,3,2))
 [1]  36  39  42  44  47  50  52  55  58  60  63  66  68  71  74  76  79  82  84  87  90  92  95  98
[25] 100 103 106 108 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-17T23:00:52.023

这是一个非迭代解决方案，以防您需要序列的特定元素

```
f <- function(x){
 d <- (x) %/% 3
 r <- x %% 3
 31 + d*8 + c(0,3,5)[r+1]
}

> f(1:10)
 [1] 34 36 39 42 44 47 50 52 55 58 
```

# phantomjs - 抓取 CasperJS 或 PhantomJS 中的资源内容

> ID：11531448
> 
> 赞同：20
> 
> 时间：2012-07-17T21:57:16.860
> 
> 标签：phantomjs, casperjs

我看到 CasperJS 有一个“下载”功能和一个“收到资源”回调，但我没有在回调中看到资源的内容，我不想将资源下载到文件系统。

我想获取资源的内容，以便我可以在我的脚本中使用它。CasperJS 或 PhantomJS 有可能吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-05T21:14:56.843

在过去的几天里，这个问题一直困扰着我。代理解决方案在我的环境中不是很干净，所以我发现 phantomjs 的 QTNetworking 核心在缓存资源时将资源放在哪里。

长话短说，这是我的要点。您需要 cache.js 和 mimetype.js 文件： [https ://gist.github.com/bshamric/4717583](https://gist.github.com/bshamric/4717583)

```
//for this to work, you have to call phantomjs with the cache enabled:
//usage:  phantomjs --disk-cache=true test.js

var page = require('webpage').create();
var fs = require('fs');
var cache = require('./cache');
var mimetype = require('./mimetype');

//this is the path that QTNetwork classes uses for caching files for it's http client
//the path should be the one that has 16 folders labeled 0,1,2,3,...,F
cache.cachePath = '/Users/brandon/Library/Caches/Ofi Labs/PhantomJS/data7/';

var url = 'http://google.com';
page.viewportSize = { width: 1300, height: 768 };

//when the resource is received, go ahead and include a reference to it in the cache object
page.onResourceReceived = function(response) {
  //I only cache images, but you can change this
    if(response.contentType.indexOf('image') >= 0)
    {
        cache.includeResource(response);
    }
};

//when the page is done loading, go through each cachedResource and do something with it, 
//I'm just saving them to a file
page.onLoadFinished = function(status) {
    for(index in cache.cachedResources) {
        var file = cache.cachedResources[index].cacheFileNoPath;
        var ext = mimetype.ext[cache.cachedResources[index].mimetype];
        var finalFile = file.replace("."+cache.cacheExtension,"."+ext);
        fs.write('saved/'+finalFile,cache.cachedResources[index].getContents(),'b');
    }
};

page.open(url, function () {
    page.render('saved/google.pdf');
    phantom.exit();
}); 
```

然后当你调用 phantomjs 时，只需确保启用了缓存：

phantomjs --disk-cache=true test.js

一些注意事项：我写这篇文章的目的是在不使用代理或拍摄低分辨率快照的情况下获取页面上的图像。QT 对某些文本文件资源使用压缩，如果您将其用于文本文件，您将不得不处理解压缩。此外，我运行了一个快速测试以提取 html 资源，但它没有从结果中解析出 http 标头。但是，这对我很有用，希望其他人会发现它，如果您对特定内容类型有问题，请修改它。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-24T21:34:46.513

我发现直到 phantomjs 成熟一点，根据问题 158 [http://code.google.com/p/phantomjs/issues/detail?id=158](http://code.google.com/p/phantomjs/issues/detail?id=158)这对他们来说有点头疼。

所以你还是想做吗？[我选择了更高一点来完成此任务，并在https://github.com/allfro/pymiproxy](https://github.com/allfro/pymiproxy)上获取了 PyMiProxy ，下载、安装、设置、获取他们的示例代码并在 proxy.py

```
from miproxy.proxy import RequestInterceptorPlugin, ResponseInterceptorPlugin, AsyncMitmProxy
from mimetools import Message
from StringIO import StringIO

class DebugInterceptor(RequestInterceptorPlugin, ResponseInterceptorPlugin):

        def do_request(self, data):
            data = data.replace('Accept-Encoding: gzip\r\n', 'Accept-Encoding:\r\n', 1);
            return data

        def do_response(self, data):
            #print '<< %s' % repr(data[:100])
            request_line, headers_alone = data.split('\r\n', 1)
            headers = Message(StringIO(headers_alone))
            print "Content type: %s" %(headers['content-type'])
            if headers['content-type'] == 'text/x-comma-separated-values':
                f = open('data.csv', 'w')
                f.write(data)
            print ''
            return data

if __name__ == '__main__':
    proxy = AsyncMitmProxy()
    proxy.register_interceptor(DebugInterceptor)
    try:
        proxy.serve_forever()
    except KeyboardInterrupt:
        proxy.server_close() 
```

然后我点燃它

```
python proxy.py 
```

接下来我使用指定的代理执行 phantomjs...

```
phantomjs --ignore-ssl-errors=yes --cookies-file=cookies.txt --proxy=127.0.0.1:8080 --web-security=no myfile.js 
```

您可能想要打开您的安全性等，这对我来说是不必要的，因为我只抓取一个来源。您现在应该看到一堆文本流经您的代理控制台，如果它落在 mime 类型为“text/x-comma-separated-values”的东西上，它将保存为 data.csv。这也将保存所有标题和所有内容，但是如果您已经走到这一步，我相信您可以弄清楚如何将它们弹出。

另一个细节，我发现我必须禁用 gzip 编码，我可以使用 zlib 并从我自己的 apache 网络服务器解压缩 gzip 中的数据，但如果它来自 IIS 或这样的解压缩会出错，我'我不确定那部分。

所以我的电力公司不会为我提供 API？美好的！我们努力做到这一点！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-24T17:07:59.373

没有意识到我可以像这样从文档对象中获取源代码：

```
casper.start(url, function() {
    var js = this.evaluate(function() {
        return document; 
    }); 
    this.echo(js.all[0].outerHTML); 
}); 
```

更多信息[在这里](http://techslides.com/grabbing-html-source-code-with-phantomjs-or-casperjs/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-18T05:05:58.113

您可以使用`Casper.debugHTML()`打印出 HTML 资源的内容：

```
var casper = require('casper').create();

casper.start('http://google.com/', function() {
    this.debugHTML();
});

casper.run(); 
```

您还可以使用以下方法将 HTML 内容存储在 var 中`casper.getPageContent()`：[http](http://casperjs.org/api.html#casper.getPageContent) ://casperjs.org/api.html#casper.getPageContent （在最新的 master 中可用）

# java - 使用字符串解析值

> ID：11531451
> 
> 赞同：0
> 
> 时间：2012-07-17T21:57:51.290
> 
> 标签：java, regex

我正在使用 BufferedReader 读取文件，并且正在尝试使用正则表达式解析出字符串。我要解析的字符串如下所示，

```
<test>123</test> 
```

并且，该字符串之前和结尾应该有文本。而且，我只想解析这个字符串的值（例如，在这种情况下，我想从读取的字符串中获取“123”）。

我拥有的正则表达式非常简单，看起来像

```
<test>? 
```

我想这是错误的，因为它不起作用。:)

有人可以告诉我如何使用正则表达式从字符串中解析这样的值吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:01:50.400

您尚未指定语言，但这应该可以：

```
/<test>([^<]+)<\/test>/ 
```

您要查找的字符串将在第一个捕获的组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:03:16.743

目前尚不清楚您使用的是什么技术。无论如何，匹配测试节点的模式是：

```
<test>(\d*)</test>     //only digits, empty string is mathced

<test>([a-zA-Z0-9\s]*)</test>     //a more general character class 
```

[演示](http://regexr.com?31idq)

# asp.net-mvc - 需要带有 AJAX 分页/排序的 MVC 3 Grid 和不显眼的 javascript

> ID：11531456
> 
> 赞同：0
> 
> 时间：2012-07-17T21:58:33.657
> 
> 标签：asp.net-mvc, grid, unobtrusive-javascript

我对 MVC 3 相当陌生，并且正在寻找一个允许排序和分页的网格组件，但也将使用渐进增强，以便提供完全基于 AJAX 的排序和分页。

理想情况下，我希望生成的标记非常干净且可自定义，页面上嵌入的 JS 最少

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T07:29:27.843

看看[http://datatables.net/](http://datatables.net/) 开发了各种 nuget 包和 codeplex 项目，可以轻松地将它们与 asp.net mvc 集成，例如：[http ://datatablesmvc.codeplex.com/](http://datatablesmvc.codeplex.com/)

# ruby-on-rails - activerecord新手；获取所有性别男性/女性的个人资料？

> ID：11531457
> 
> 赞同：0
> 
> 时间：2012-07-17T21:58:35.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, relation

我试图让所有性别为男性或女性的@participants。我刚刚浮出水面，现在正在挖掘更多的可能性，但发现很难完成这个查询。

*   用户 (user_id) has_profile
*   个人资料属于用户
*   参与者 (participant_id) 属于_to 用户、个人资料

我试图让所有具有参与者 ID 的参与者在个人资料（ user_id ）中的性别 = 'male' 或 'female'

让@participants_male 填满结果的最佳最短方法是什么？

我不知道如何摆脱与 where 语句的关系，任何人都可以帮助我朝着正确的方向前进吗？谢谢！

```
@participants_male = Participant.where( 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:07:57.517

[关于活动记录查询](http://guides.rubyonrails.org/active_record_querying.html)的 rails 指南是一个很好的资源。您的查询将如下所示：

```
@males = Participant.joins(:profiles).where('profiles.gender = "male"') 
```

或者你可以使用`includes`而不是`joins`

```
@males = Participant.includes(:profiles).where('profiles.gender = "male"') 
```

查看[包含与连接](https://stackoverflow.com/questions/1208636/rails-include-vs-joins)，看看哪个适合您的特定情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:12:25.963

性别是用户表中的一列？如果是这样的话：

```
@participants_male = Participant.includes(:users).where("users.gender = 'male'") 
```

**编辑**- 如果性别在配置文件表中：

```
@participants_male = Participant.includes(:profiles).where("profiles.gender = 'male'") 
```

我还建议检查[此](http://railscasts.com/episodes/181-include-vs-joins?view=asciicast)`joins`railscast 以了解and之间的区别`includes`，以便您可以决定哪种情况更好。

# javascript - SPA 和 node.js 服务器的身份验证

> ID：11531459
> 
> 赞同：4
> 
> 时间：2012-07-17T21:58:45.053
> 
> 标签：javascript, node.js, authentication, express

我有一个基于 express 构建的非常简单的 node.js 应用程序，它一直在使用会话内存存储处理身份验证。基本上，用户通过以下方式登录：

```
app.post('/sessions', function(req, res) {
            // check username/password and if valid set authenticated to true
        if (authenticated){
            req.session.user = req.body.username;
                } ...
}); 
```

然后在来自浏览器的每次调用中，调用一个 requiresLogin 中间件函数，该函数检查会话上的用户属性是否已设置。

我现在正在将应用程序转换为基本上只提供可能会或可能不会在浏览器中使用的服务，因此我正在考虑更改系统，以便将发布到 /getToken（而不是/sessions) 将返回与用户帐户关联的临时随机令牌，然后可以在一段时间内使用该令牌来访问服务。然后，使用该服务需要在每个调用中包含一个有效的令牌。（我认为这比每次都传递用户名/密码要好，这样密码就不必在调用获取令牌后存储在客户端计算机的内存中？）

这样的系统是否基本上与上述当前系统一样安全，或者是否有更标准/更安全的方法来处理这个问题？处理此类事情的标准方法是什么？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-26T15:24:49.390

您正在寻找的东西称为 HMAC，这里有一篇很棒的文章[可以](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)获取有关如何为您的服务实施的想法。

至于基于会话的安全性是否比公钥/私钥对更安全，这一点引起了广泛的争论，并且实际上取决于实现/应用程序。在您的情况下，由于您希望在面向公众的 API 上按请求进行身份验证，因此 HMAC 是要走的路。

# javascript - Three.js - 形状和内孔的问题

> ID：11531462
> 
> 赞同：2
> 
> 时间：2012-07-17T21:59:21.287
> 
> 标签：javascript, three.js

我有一个问题，我怎样才能获得一种像圆环但平方的“开环”？我尝试使用形状加上路径作为孔：

```
var arcShape = new THREE.Shape();   
arcShape.moveTo( 40, 0 );   
arcShape.arc( 0, 0, 40, 0, 2*Math.PI, false );  

var holePath = new THREE.Path();
holePath.moveTo( 30,0 )
holePath.arc( 0, 0, 30, 0, 2*Math.PI, true ); 
```

直到现在，制作一个网格：

```
new THREE.Mesh( arcShape.extrude({ amount: 5, bevelEnabled: false }), MATERIAL ); 
```

它有效，但如何制作中间环？我的意思是：

```
 var arcShape = new THREE.Shape();  
 arcShape.moveTo( 40, 0 );  
 arcShape.arc( 0, 0, 40, 0, Math.PI, false );   

 var holePath = new THREE.Path();
 holePath.moveTo( 30,0 );
 holePath.arc( 0, 0, 30, 0, Math.PI, true ); 
```

它有效，但它仍然是终端部分之间的微妙面孔……有没有办法让它完全打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T00:08:48.223

与其从第一方开始，不如尝试更改 Torus 几何构造函数中的参数：

```
// Torus geometry parameters:
//     radius of entire torus,
//     diameter of tube (should be less than total radius), 
//     segments around radius, 
//     segments around torus ("sides")
var torusGeom = new THREE.TorusGeometry( 25, 10, 4, 4 ); 
```

# php - PHP DateTime / DateInterval 对象差异返回奇怪的结果

> ID：11531469
> 
> 赞同：1
> 
> 时间：2012-07-17T21:59:43.450
> 
> 标签：php, datetime, date

我有以下[PHP 日期时间对象](http://www.php.net/manual/en/class.dateinterval.php)给出奇怪的结果：

```
<?php
$date = new DateTime("2013-01-01");
$date2 = new DateTime("2011-01-01");

$interval = $date2->diff($date);
echo $interval->m;
?> 
```

*   使用月份 (m) 时，返回 0。不正确。
*   当我将间隔切换为年（y）时，它返回 2，这是正确的。
*   当我切换到天 (d) 时，它返回 0，不正确。
*   当我使用“天”切换到天时，它返回 731，这是正确的

我不确定为什么某些间隔有效而其他间隔无效。有什么想法或者这是预期的吗？如果可能的话 - 我想继续使用 DateTime 来发现这种差异，但对其他必要的手段持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T22:05:41.040

看，`$interval`是一个对象，而不是一些原始值。在您的示例中，此间隔*由*两年、零个月和零天组成。当您查询其属性时，它不会自动转换为“以月为单位的间隔，以天为单位的间隔”等：它只是返回它们的值。这是非常正确的：例如，您是否应该考虑每月间隔 29 天？

唯一的例外是`$days`属性（不是`$d`！），它实际上具有该间隔内的天数计算值。[它在文档](http://ua2.php.net/manual/en/class.dateinterval.php)中有很好的描述：

> *$days* DateTime::diff() 计算中开始日期和结束日期之间的
> *总天数*

# python - 如何通过不关闭 python 中的文件对象来导致错误或不需要的行为？（代码示例请）

> ID：11531470
> 
> 赞同：0
> 
> 时间：2012-07-17T21:59:43.360
> 
> 标签：python, file, exception, runtime-error

> **可能重复：**
> [文件对象在引用计数为零时是否自动关闭？](https://stackoverflow.com/questions/1834556/does-a-file-object-automatically-close-when-its-reference-count-hits-zero)

我读到需要关闭文件对象，但有人实际上可以提供一个非常简单的示例（代码示例），其中错误是由不关闭文件对象引起的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:01:57.063

如果您将数据写入文件并且最后您的输出文件不包含您写入的所有数据，您可能会观察到这种情况，因为该文件未正确关闭（并且其缓冲区已刷新）。

这是关于这个问题的一个相当新的例子 [Python not writing full string to file](https://stackoverflow.com/questions/11398471/python-not-writing-full-string-to-file)。

请注意，这个问题并不是 Python 独有的，你也可能在其他语言中遇到这个问题（例如，我在 C 语言中遇到过不止一次）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:31:21.953

如果您无法关闭文件，您是否在问 Python 是否会引发错误？那么答案是“不”。

如果您询问是否可能丢失数据，答案是“是”。

以此类推，如果您将钥匙留在点火装置中，警察会给您开罚单吗？不会。这种做法是否会增加您“丢失”汽车的几率？是的。

**编辑：**

好的，你问的是一个例子，而不是聪明的评论。这是一个示例，虽然有点做作，因为这样做比研究缓冲区大小的极端情况更容易。

**好的：**

```
fh = open("erase_me.txt", "w")
fh.write("Hello there!")
fh.close()

# Writes "Hello there!" to 'erase_me.txt'
# tcsh-13: cat erase_me.txt
# Hello there!tcsh-14: 
```

**坏的：**

```
import os
fh = open("erase_me.txt", "w")
fh.write("Hello there!")

# Whoops!  Something bad happened and my program bombed!
os._exit(1)

fh.close()

# tcsh-19: cat erase_me.txt
# tcsh-20: ll erase_me.txt 
# -rw-r--r-- 1 me us 0 Jul 17 15:41 erase_me.txt
# (Notice file length = 0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:01:44.373

在某些操作系统上，将大量数据写入文件而不关闭它会导致 libc 将其删除时不会刷新数据，从而导致文件被截断。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T22:04:33.403

我还要补充一点，如果您在长时间运行的进程中不关闭打开的文件，您最终可能会达到每个进程允许打开的最大文件数，在 Linux 系统中，可以使用命令检查默认限制`ulimit -aH`。

注意：我所说的限制是每个进程的文件描述符限制，其中包括物理文件、套接字......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T22:03:31.023

从技术上讲没有错误，但它会一直留在内存中，直到垃圾收集器关闭文件，这可能会对其他进程产生负面影响。您应该始终明确关闭文件描述符。

> 在处理文件对象时，最好使用 with 关键字。这样做的好处是文件在其套件完成后正确关闭，即使在途中引发异常也是如此。它也比编写等效的 try-finally 块短得多：

[与 一起](http://docs.python.org/whatsnew/2.6.html#pep-343-the-with-statement)使用：

```
with open('test.txt', 'rb') as f:
     buf = f.readlines() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T22:20:08.420

您可能不会收到任何错误，在微不足道的情况下会出现异常，并且您的文件可能包含所有内容，但在现实世界的程序中很容易出现灾难性错误。

python 的原则之一是“应该阻止但不禁止不良行为”，所以我建议始终专注于在“finally”块中关闭文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T22:42:56.603

假设您正在处理目录中的一堆文件。不关闭它们会占用大量内存，甚至可能导致程序耗尽文件描述符或其他资源。

我们希望 CPython 在没有对剩余文件的引用时关闭文件，但不能保证这种行为，如果有人试图在不使用引用计数的 Python 实现（如 Jython）上使用您的模块，他们可能会遇到奇怪的情况错误或垃圾收集时间过长

# asp.net - 使用基于 Visual Studio 目标的负载模式来实现每秒一致的请求

> ID：11531471
> 
> 赞同：2
> 
> 时间：2012-07-17T21:59:44.223
> 
> 标签：asp.net, visual-studio-2010, load-testing, stress-testing

我正在使用 Visual Studio 2010 测试 ASP .NET Web 服务。我希望能够为请求/秒设置一个相当低的目标（比如 20）并以良好的精度实现它（比如 +/- 2%）。我正在使用 ASP.NET Apps v4.0.30319 类别中的性能计数器“请求/秒”。

我的 WebTest 持续时间变化很大，负载测试保持不同数量的用户。当我查看结果图时，RPS 介于 0 和 60 之间，并且不断上升和下降。

是否有某种方法可以设置 VS 从控制器的角度发射恒定的 rps。甚至是固定测试/秒。

也许一个计数器可以让我测量每秒发起的请求而不是请求/秒，因此时间的变化不会产生影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:07:01.013

做到这一点的唯一方法是使用多个线程 -`RPS * ConnectionTimeout`如果所有请求都必须等待并且您没有使用异步 IO，则可能最多使用多个线程。

您可以作弊并使用[ThreadPool](http://msdn.microsoft.com/en-us/library/ms973903.aspx)（但请注意，它不保证 re: scheduling）。如果您使用的是 .Net 4，还有[任务并行库。](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

对于 ~20 RPS，我怀疑缺乏 ThreadPool 精度将是一个问题。当您获得更高的 RPS 时，情况将会改变。

如果你想自己动手做，请注意很难做好。一个简单的实现是让一个主工作线程为每个连接启动新线程......

```
Private ShutdownRequested As Boolean = False
Public Sub StartLoad(RPS As Integer)
    ShutdownRequested = False
    Dim MainThread As New Threading.Thread(Sub() Worker(RPS))
    MainThread.Start()
End Sub

Public Sub StopLoad()
    ShutdownRequested = True
End Sub

Private Sub Worker(RPS As Integer)
    While Not ShutdownRequested
        Threading.Thread.Sleep(CInt(1 / RPS * 1000))
        Dim Worker As New Threading.Thread(Sub() OpenAConntection())
    End While
End Sub 
```

更好的方法是使用[此处描述](https://stackoverflow.com/a/5288589/156755)的异步 IO 机制，因为它允许使用有限数量的线程进行许多连接。

[这篇文章](http://msdn.microsoft.com/en-us/magazine/dd419664.aspx)也可能对 re:threading 感兴趣

# serialization - 将键：值对反序列化为字典

> ID：11531472
> 
> 赞同：0
> 
> 时间：2012-07-17T22:00:07.063
> 
> 标签：serialization, asp.net-mvc-4, asp.net-web-api

我正在将传递给 MVC4 RC 中的 Microsoft Web API 的数据反序列化为以下类的对象：

```
public class EditorCreateEditSubmission
{
    public string action { get; set; }
    public string table { get; set; }
    public string id { get; set; }
    public Dictionary<string, string> data { get; set; }
} 
```

每当 Web API 方法获取应映射到 EditorCreateEditSubmission 的数据时，“数据”字段为空，如下所示：

![空数据](../Images/33d613c8b63a6da5b0be03015ef99cdd.png)

（Table和ID可以为空）

我的控制器方法：

```
public EditorServerResponse Post(EditorCreateEditSubmission ajaxSubmission)
{
//...Handle data
} 
```

原始标题：

```
POST http://localhost:64619/API/Species HTTP/1.1
Accept: application/json, text/javascript, */*; q=0.01
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
X-Requested-With: XMLHttpRequest
Referer: http://localhost:64619/Manage/Species
Accept-Language: en-us
Accept-Encoding: gzip, deflate
User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; WOW64; Trident/5.0)
Host: localhost:64619
Content-Length: 134
Connection: Keep-Alive
Pragma: no-cache

action=create&table=&id=&data%5Bamu%5D=1&data%5BchemicalFormula%5D=H&data%5BcommonName%5D=Hydrogen&data%5Bstatus%5D=N&data%5Bnotes%5D= 
```

更具可读性的视图：

```
action  create
table   
id  
data[amu]   1
data[chemicalFormula]   H
data[commonName]    Hydrogen
data[status]    N
data[notes] 
```

我是否需要手动创建一个类，其中包含每个可能的传入值集的获取/设置值？似乎将此数据反序列化为字典应该很简单，但我在微软 MVC4 的新 RC 版本中找到示例时遇到了一些困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T06:43:01.793

我不认为 FormUrlEncodedMediaTypeFormatter 确实可以处理这个问题。

# java - struts2 检查权限拦截器

> ID：11531474
> 
> 赞同：0
> 
> 时间：2012-07-17T22:00:25.170
> 
> 标签：java, spring, jsp, struts2, struts

在我当前的 struts2 + spring web 应用程序中，我的自定义 userSessionInterceptor 运行良好。我现在也想开始强制执行用户角色。我做了很多在线研究，似乎有很多方法可以做到，例如异常，sendRedirect

最合适的方法是什么？我已经在用户会话中保存了用户角色，并且检测和发现错误没有问题。我唯一需要决定的是当权限不正确时如何应对。

在拦截器中，我知道我可以返回“xxx”并执行“xxx”操作。但是，我想要实现的是，当用户尝试做他们没有权限的事情时，会显示一条消息。我假设我可以返回上一页并向 url 添加一个参数。

对此有什么建议吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T11:18:33.143

这是一个示例程序。

*角色拦截器.java*

```
package com.sample.common.interceptor;

import javax.servlet.http.HttpSession;

import org.apache.struts2.ServletActionContext;

import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.Interceptor;
import com.opensymphony.xwork2.util.ValueStack;

public class RoleInterceptor implements Interceptor {

    private static final long serialVersionUID = 5031826078189685536L;

    @Override
    public void init() {

    }

    @Override
    public void destroy() {

    }

    @Override
    public String intercept(ActionInvocation actionInvocation) {

        String result = null;
        try {
            ActionContext actionContext = actionInvocation
                    .getInvocationContext();

            ValueStack vStack = actionContext.getValueStack();
            HttpSession httpSession = ServletActionContext.getRequest()
                    .getSession();

            StringBuilder actionUrl = new StringBuilder(actionInvocation
                    .getProxy().getNamespace());
            actionUrl.append("/");
            actionUrl.append(actionInvocation.getProxy().getActionName());

            if (httpSession != null) {

                boolean hasPermission = true; // if the role has the permission

                if (hasPermission) {

                    result = actionInvocation.invoke();

                } else {

                    vStack.set("userMsg",
                            "You are not authorized to access this link");
                    result = "user.unauthorized";
                }
            } else {

                vStack.set("userMsg", "Please login to your account");
                result = "user.login";
            }

        } catch (Exception e) {
            e.printStackTrace();
        }

        return result;

    }

} 
```

*struts.xml*

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">
<struts>
    <package name="userRoleInterceptor">
        <interceptors>
            <interceptor name="userRole"
                class="com.sample.common.interceptor.RoleInterceptor" />
        </interceptors>
    </package>
    <package name="user" namespace="/user" extends="struts-default, json-default, userRoleInterceptor">
        <action name="user_details" method="getUserDetails"
            class="com.sample.user.web.action.User">
            <interceptor-ref name="userRole"/>
            <interceptor-ref name="store">
                <param name="operationMode">RETRIEVE</param>
            </interceptor-ref>
            <result name="success">userDetails.jsp</result>
            <result name="input">/common/error.jsp</result>
            <result name="busy" type="redirectAction" >/common/busy.jsp</result>
            <result name="error" type="redirectAction" >/common/test.jsp</result>
            <result name="user.login" type="redirectAction" >/common/login.jsp</result>
            <result name="user.unauthorized" type="redirectAction" >/common/unauthorizedUser.jsp</result>
        </action>
    </package>
</struts> 
```

# xml - Xpath 和 YQL 的问题

> ID：11531478
> 
> 赞同：1
> 
> 时间：2012-07-17T22:00:41.027
> 
> 标签：xml, xpath, yql

希望这很容易。我正在尝试使用 YQL 从 wordpress 博客的不同文章中提取“标题”图像。每篇文章都有一个不同的“标题”图像，类名略有不同（无 id）。我需要的每张图片都共享一个基本的 CSS 类，“alignright”。如果我进行如下查询，则不会返回任何内容。

```
select * from html where url="urlofblog.com/" and xpath="//img[@class='alignright']" 
```

但是，如果我更改查询以使其将类与特定图像完全匹配

```
select * from html where url="urlofblog.com/" and xpath="//img[@class='alignright size-full wp-image-3051']" 
```

我得到了有问题的图像。看起来 YQL 将 "img[@class=" 视为一个大字符串，而不是多个输入。问题是当被视为一个大字符串时，这些图像类都不匹配。这是我试图解决这种情况的方法：

1.  我研究了 YQL 的“like”参数。（没有运气找到有用的东西）
2.  试图用 xpath 找到更好的方法（直到今天我从未使用过）。那次搜索把我带到了[这里](https://stackoverflow.com/questions/597944/xpath-expression-for-regex-like-matching)。到目前为止，我仍然无法让它工作。
3.  我试过使用：img[matches(@class, '\balignright\b')]，但我不认为 YQL 支持它。

有谁知道是否有办法使用该基本 css 类获取图像？我无权更改博客上的任何内容（例如插入 ID）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:04:18.467

您可以使用 XPath 字符串函数，例如[`starts-with`](http://www.w3.org/TR/xpath/#function-starts-with)：

```
//img[starts-with(@class, 'alignright')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T18:19:33.700

在这里使用 XPath contains() 字符串函数会很好。看起来您正在尝试从 Wordpress 站点获取图像，该站点将根据需要向项目添加类。不要担心它是否以 CSS 类开头，只是 img 在 class 属性中有 CSS 类。

```
//img[contains(@class,'alignright')] 
```

# visual-studio-2010 - 为 Visual Studio 创建 Intellisense 插件

> ID：11531479
> 
> 赞同：3
> 
> 时间：2012-07-17T22:00:42.460
> 
> 标签：visual-studio-2010, intellisense

谁能给我指出一些详细介绍如何在 Visual Studio 中创建自定义智能感知支持的文章？我想创建一个智能感知，它将从不同的数据源中提取数据。

# css - 如何使带有文本的内联 div 成为完美的正方形

> ID：11531482
> 
> 赞同：0
> 
> 时间：2012-07-17T22:00:53.527
> 
> 标签：css

我有代码：

```
<div>C</div><div>A</div>

div{
            border: 4px solid Brown;
display: inline;
} 
```

[http://jsfiddle.net/TKQzT/](http://jsfiddle.net/TKQzT/)

所以我最终得到了两个带有字母的矩形。

我希望它们改为显示为正方形。所以目前它们是比宽度高的矩形。

有谁知道如何设计它们以使它们成为完美的正方形？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:03:52.410

您必须将显示设置为`inline-block`，以便您可以指定明确的宽度和高度：

```
div {
    display: inline-block;
    width: 1.25em;
    height: 1.25em;
    line-height: 1.25em;
} 
```

这是小提琴：http: [//jsfiddle.net/TKQzT/13/](http://jsfiddle.net/TKQzT/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:03:25.300

由于字母高于宽度，您必须手动设置框的高度/高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:04:47.203

如果不给它们相等的宽度和高度，这将是不准确的，但请尝试：

```
div {
  border: 4px solid Brown;
  display: inline;
  padding:2px 5px;
  margin:1px
} 
```

如果您使用的只是这样您可以并排`inline`排列' ，那么我建议使用's not 。这样你就可以给他们一个明确的and 。`div``float``div``inline``width``height`

```
div {
  border: 4px solid Brown;
  padding:2px 5px;
  margin:1px; 
  float:left
} 
```

在此处查看演示：http: [//jsbin.com/ojumay/edit#html,live](http://jsbin.com/ojumay/edit#html,live)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T22:06:46.237

我知道的更好的方法是固定高度和宽度，同时使用内联块显示来做到这一点。

试试这个 ：

```
div{
    display: inline-block;
    height: 1em;
    width: 1em;
    border: 4px solid Brown;
    line-height: 1em;
    text-align:center
}
​ 
```

# c# - HttpRequestHeader 内容编码问题

> ID：11531489
> 
> 赞同：3
> 
> 时间：2012-07-17T22:01:33.507
> 
> 标签：c#, encoding, webclient

我正在使用下面的代码片段将 HTTP 响应下载到本地文件。有时我在 url 中的内容是多语言的（中文、日文、泰文数据等）。我正在使用 ContentEncoding 标头来指定我的内容采用 UTF-8 编码，但这对以 ASCII 生成的本地输出文件没有影响。因此，多语言数据被破坏。有什么帮助吗？

```
using (var webClient = new WebClient())
        {
            webClient.Credentials = CredentialCache.DefaultCredentials;
            webClient.Headers.Add(HttpRequestHeader.UserAgent, "Mozilla/4.0");
            webClient.Headers.Add(HttpRequestHeader.ContentEncoding, "utf-8");

            webClient.DownloadFile(url, @"c:\temp\tempfile.htm");
        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-18T02:28:39.270

标`ContentEncoding`头不用于指定字符集。客户端使用它来说明它支持哪种编码（压缩）。

客户端无法告诉服务器要发送什么字符集。服务器发送它的数据和一些标头字段，说明正在使用什么字符集。通常它在`ContentType`标题中，看起来像：`text/html; charset=UTF-8`.

当您使用`WebClient`时，您希望将该`Encoding`属性设置为备用，以便如果服务器无法识别字符集，则将使用您的默认值。例如：

```
WebClient client = new WebClient();
client.Encoding = Encoding.UTF8;
string s = client.DownloadString(DownloadUrl); 
```

有关更多信息，请参阅[http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=800 。](http://www.informit.com/guides/content.aspx?g=dotnet&seqNum=800)

# symfony - PHPunit、Symfony2 和 AWS 开发工具包 - 无法加载 APC 或 xcache

> ID：11531497
> 
> 赞同：3
> 
> 时间：2012-07-17T22:02:12.547
> 
> 标签：symfony, phpunit, apc, xcache

我的 phpunit 功能测试遇到了障碍。AWS SDK 需要 APC，由于某种原因，我无法让 phpunit 加载扩展。我不确定我哪里出错了。CLI 使用与 MAMP 相同的 ini 文件

```
Gregs-MacBook-Pro:HvH-PHP greg$ php --ini
Configuration File (php.ini) Path: /Applications/MAMP/bin/php/php5.3.6/conf
Loaded Configuration File:         /Applications/MAMP/bin/php/php5.3.6/conf/php.ini
Scan for additional .ini files in: (none)
Additional .ini files parsed:      (none)
Gregs-MacBook-Pro:HvH-PHP greg$ 
```

我也尝试将ini文件添加到`app/phpunit.xml.dist`

```
<php>
    <ini name="mamp" value="/Applications/MAMP/bin/php/php5.3.6/conf/php.ini"/>
    <server name="KERNEL_DIR" value="app/" />
</php> 
```

**CLI 中的错误消息**

```
PHP Fatal error:  Call to undefined function apc_fetch() in /vendor/aws-sdk-for-php/lib/cachecore/cacheapc.class.php on line 58 
```

**编辑：根据评论进行更多测试** 在 CLI 中，我可以运行测试脚本`apc_fetch();`并且它可以成功运行。

运行`php -m`还将 APC 显示为已安装的模块

关于我还应该尝试什么的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:26:53.993

我可以向您提出 2 个解决方案：

1.  创建`/Applications/MAMP/bin/php/php5.3.6/conf/php.ini`to的符号链接`/private/etc/php.ini`

2.  修改`phpunit`执行文件并追加`-c /Applications/MAMP/bin/php/php5.3.6/conf/`到 php run 命令。另外 - 检查是否使用了正确的 php 二进制文件。如果不是 - 首先更改到正确的路径并检查问题是否已解决

# java - 使用 Web 服务开发带有服务器的 android 应用程序

> ID：11531499
> 
> 赞同：0
> 
> 时间：2012-07-17T22:02:21.717
> 
> 标签：java, android, web-services

我正在开发客户端/服务器应用程序（客户端是一个向服务器发送数据的 Android 应用程序）。我正在使用 Java 开发服务器。我已经使用 SQL Navigator 5.5“使用 NetBeans”连接了服务器应用程序。想用Json做中间件，不知道怎么用！什么最合适，XML 还是 Json？我需要使用 HTTP 吗？如果是这样，如何（因为我希望能够保护应用程序）？

服务器应该响应的另一件事是Android应用程序通过发送“经度和纬度”，Android应该“地理编码”并以地图“位置”的形式显示。另外，我**需要**更多地了解应该在应用程序上运行的 Web 服务的概念。

这是服务器代码：（服务器应该从客户端获取的值是“long 和 lat”） /* * 要更改此模板，请选择 Tools | 模板 * 并在编辑器中打开模板。*/

```
package pkg;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.Statement;
import javax.jws.WebService;
import javax.jws.WebMethod;
import javax.jws.WebParam;

@WebService(serviceName = "lbsws")
public class lbsws {

    /** This is a sample web service operation */
    @WebMethod(operationName = "hello")
    public String hello(@WebParam(name = "name") String longg) {

        String result=null;
        try
        {

        Connection con = dbConnection.getdbConnection("system","lbs","orcll", "localhost");
        Statement st = con.createStatement(); 

        String lat ="10";

        String query="select longg,lat,abs(("+longg+"-longg))/abs(("+lat+"-lat)) as function1 from lbs where abs(("+longg+"-longg))/abs(("+lat+"-lat)) = ("+
        "select min(abs(("+longg+"-longg))/abs(("+lat+"-lat))) from lbs)";

        ResultSet rs = st.executeQuery(query);
        while(rs.next())
        {
            result = rs.getFloat("longg")+","+ rs.getFloat("lat")+"-"+ rs.getFloat("function1");
        }
        }
        catch(Exception e)
        {
            System.out.println(e.toString());
        }
        return result;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:19:23.137

一些东西：

1) JSON 支持传输层。不要再想了。

2) 使用 JSON Web 服务。在基于 Java 的系统中使用 HttpClient。只是为了获得响应，您可以根据需要将 JSON 转换为对象。但是调用网络服务是通过 HttpClient

3) 创建 JSON 服务。那么你可以使用泽西岛。有几个选择。我建议在 Tomcat 服务器上进行开发。它更快，而且不像 Java EE 服务器那样上/下。除了泽西岛，还有其他一些不错的选择。

但主要是先写最简单的东西，然后让它端到端工作。这就是你想要做的。

只需生成一个返回系统时间的服务并通过 JSON 将其发回，在客户端使用它并显示。然后重新评估泽西与其他任何东西。但是让一些东西端到端运行。

所以第一步是编写一个 JSON Web 服务并在浏览器中测试它。现在不要担心客户端。只需让服务运行并使用浏览器调用它。顺便说一句，有理由使用 RESTful JSON Web 服务。它是构建 Web 服务的好方法。

永远不要同时解决两个问题。忘记连接到数据库，直到您使用已存根的数据启动并运行服务。

# c# - EF 4.1 将复杂类型嵌套到单个字段

> ID：11531500
> 
> 赞同：0
> 
> 时间：2012-07-17T22:02:27.757
> 
> 标签：c#, entity-framework-4.1

我似乎找不到答案，但我想做的是采用嵌套的复杂类型并将其展平到仅使用 id 的父表中。

代码如下：

```
public class Address
{
    public virtual string Street1 { get; set; }
    public virtual string Street2 { get; set; }
    public virtual string City { get; set; }
    public virtual string ZipCode { get; set; }
    public virtual int Id { get; set; }
    public virtual Region Region { get; set; }
}

public class Region
{
    public virtual int Id { get; set; }
    public virtual string Code { get; set; }
} 
```

表结构定义如下：

```
CREATE TABLE [ClientManagement].[Addresses]
(
    [Id]            INT IDENTITY(1,1)   NOT NULL,
    [Street1]       [NVARCHAR](100),
    [Street2]       [NVARCHAR](100),
    [City]          [NVARCHAR](100),
    [ZipCode]       [NVARCHAR](15),
    [RegionId]      [INT]
) 
```

有什么方法可以使用 EF 4.1 来定义这种关系？

谢谢你，德里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:39:17.680

尝试这个：

```
[ComplexType]
public class Region
{
    [Column("RegionId")]
    public virtual int Id { get; set; }
    [NotMapped]
    public virtual string Code { get; set; }
} 
```

或者这个`OnModelCreating`：

```
modelBuilder.ComplexType<Region>().Ignore(r => r.Code);
modelBuilder.ComplexType<Region>().Property(r => r.Id).HasColumnName("RegionId"); 
```

# java - StringBuffer Append Space (" ") 改为追加“null”

> ID：11531506
> 
> 赞同：0
> 
> 时间：2012-07-17T22:02:55.190
> 
> 标签：java, android

基本上我要做的是取一个字符串，并替换里面字母表中的每个字母，但保留任何空格而不将它们转换为“空”字符串，这是我打开这个问题的主要原因。

如果我使用下面的函数并传递字符串“ab”，而不是得到“ALPHA BETA”，我得到“ALPHAnullBETA”。

我已经尝试了所有可能的方法来检查当前迭代的单个字符是否为空格，但似乎没有任何效果。所有这些场景都给出了 false ，就好像它是一个常规字符一样。

```
public String charConvert(String s) {

    Map<String, String> t = new HashMap<String, String>(); // Associative array
    t.put("a", "ALPHA");
    t.put("b", "BETA");
    t.put("c", "GAMA");
    // So on...

    StringBuffer sb = new StringBuffer(0);
    s = s.toLowerCase(); // This is my full string

    for (int i = 0; i < s.length(); i++) {
        char c = s.charAt(i);

        String st = String.valueOf(c);
        if (st.compareTo(" ") == 1) {
            // This is the problematic condition
            // The script should just append a space in this case, but nothing seems to invoke this scenario
        } else {
            sb.append(st);
        }

    }

    s = sb.toString();

    return s;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:07:02.807

`compareTo()`如果字符串相等，将返回 0。它返回一个正数，第一个字符串“大于”第二个。

但实际上没有必要比较字符串。你可以这样做：

```
char c = s.charAt(i);

if(c == ' ') {
    // do something
} else {
    sb.append(c);
} 
```

甚至更适合您的用例：

```
String st = s.substring(i,i+1);
if(t.contains(st)) {
    sb.append(t.get(st));
} else {
    sb.append(st);
} 
```

为了获得更清晰的代码，您的 Map 应该从`Character`to`String`而不是`<String,String>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:05:38.680

`String.compareTo()`如果字符串相等，则返回 0，而不是 1。请[在此处阅读](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)

请注意，对于这种情况，您不需要将 char 转换为字符串，您可以这样做

```
if(c == ' ') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:10:06.450

采用

```
 Character.isWhitespace(c) 
```

这解决了这个问题。最佳实践。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T22:07:04.797

首先，`s`这个例子是什么？很难遵循代码。然后，您的 compareTo 似乎关闭：

```
if (st.compareTo(" ") == 1) 
```

应该

```
if (st.compareTo(" ") == 0) 
```

因为 0 表示“相等”（在 compareTo 上[阅读）](http://www.javapractices.com/topic/TopicAction.do?Id=10)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T22:07:28.667

从 compareTo 文档中：`The result is a negative integer if this String object lexicographically precedes the argument string. The result is a positive integer if this String object lexicographically follows the argument string. The result is zero if the strings are equal;`

你有错误的条件`if (st.compareTo(" ") == 1) {`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T22:08:56.893

如果源字符串在测试字符串之前，则 String 的 compareTo 方法返回 -1，如果相等则返回 0，如果源字符串在后面，则返回 1。您的代码检查 1，它应该检查 0。

# javascript - 是否可以判断一个函数是否处于严格模式？

> ID：11531511
> 
> 赞同：0
> 
> 时间：2012-07-17T22:03:19.930
> 
> 标签：javascript

我的问题可能听起来很奇怪，但有没有办法通过从另一个函数调用来了解一个函数是否处于严格模式？

```
function a(){
    "use strict";
    // Body
}

function b(){
// Body
}

function isStrict(fn){

    fn.call();
}

isStrict(a); // true
isStrict(b); // false 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:07:10.057

当一个函数受严格模式影响时，`"use strict";`被前置。所以，下面的检查就可以了：

```
function isStrict(fn) {
    return typeof fn == 'function' &&
        /^function[^(]*\([^)]*\)\s*\{\s*(["'])use strict\1/.test(fn.toString())
        || (function(){ return this === undefined;})();
} 
```

我使用 RegExp 来查找`"use strict"`函数主体开头的模式。

为了检测全局严格模式（这也会影响一个函数），我会[测试其中一个功能](http://kangax.github.com/es5-compat-table/strict-mode/)以查看严格模式是否处于活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:11:52.803

`isStrict`您可以为您设置严格的每个函数添加一个属性。

```
function a() {
    "use strict";
}
a.isStrict = true;

// ...
if ( a.isStrict ) { } 
```

# objective-c - 使用 NSFetchRequest / Core Data 获取不同/唯一的对象

> ID：11531513
> 
> 赞同：1
> 
> 时间：2012-07-17T22:03:24.563
> 
> 标签：objective-c, core-data, nsfetchrequest

我了解如何使用`NSFetchRequest`with从 Core Data 获取唯一数据`setReturnsDistinctResults:YES`。但是，当我将唯一性定义为超过 1 个数据值时，我无法弄清楚如何做到这一点。

例如，如果我有一个通过 Core Data 加载的对象，定义如下：

```
People {
  String First,
  String Last
} 
```

*对我来说，在 First或*Last上定义唯一性似乎很容易，但在两者上都没有。

此外，结果需要作为此 People 对象的实例返回，以便我可以操作它们。我只是想知道是否有一个唯一的名字“John Doe”我需要返回完整的对象。想象一下上面的对象 People 有更多字段（地址、电话号码等），但为了我们的目的，我们将唯一性定义为这些字段的 AND。

例子：

```
John, Doe, 123 Street
Jane, Doe, 123 Street
John, Doe, 456 Street 
```

我想要的是 Jane Doe 的对象和 John Doe 的对象。鉴于我还没有定义如何在这两者之间进行选择，我接受它可能是。

所以我想要一些类似的东西：

```
Array of Peoples { JohnDoeObject, JaneDoeObject } 
```

有人可以帮助解释如何做到这一点吗？

谢谢！

# node.js - RESTful 后端和 socket.io 同步

> ID：11531516
> 
> 赞同：9
> 
> 时间：2012-07-17T22:03:45.360
> 
> 标签：node.js, rest, websocket, socket.io

今天，我有了以下设置的想法。与和一起创建`nodejs`服务器。使用 express，我将创建一个连接到 mongo 的 RESTful API。BackboneJS 或类似的东西会将客户端连接到该 REST API。 现在，每次 mongodb（即我感兴趣的数据）发生变化时，socket.io 都会向客户端触发一个事件，该事件将携带一个对已更改数据的进程。然后，客户端将触发对 REST 的适当 AJAX 请求，以在需要的地方获取新数据。`express``socket.io`

因此，socket.io 连接的行为类似于同步触发器。它会在整个访问期间都在那里，也可以以这种方式管理会话。所有有效负载都将通过 http 发送。

优点：

*   用于 Web 以外的其他客户端的 REST API
*   Auth 可以完全通过 socket.io 完成。仅与 REST 请求一起发送令牌。
*   使用 REST 的好处。
*   也可以很好地与 Redis 等发布/订阅服务一起使用

缺点：

*   比使用纯 socket.io 更大的开销。

你怎么看，有什么我没有想到的重大缺点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T04:09:46.377

我同意@CharlieKey，您应该发送更新的数据而不是重新请求。

这正是 Tower 正在做的事情：

*   保存一些数据：[https ://github.com/viatropos/tower/blob/development/src/tower/model/persistence.coffee#L77](https://github.com/viatropos/tower/blob/development/src/tower/model/persistence.coffee#L77)
*   插入mongodb（光标是查询/持久性抽象）：[https ://github.com/viatropos/tower/blob/development/src/tower/model/cursor/persistence.coffee#L29](https://github.com/viatropos/tower/blob/development/src/tower/model/cursor/persistence.coffee#L29)
*   通知套接字：[https ://github.com/viatropos/tower/blob/development/src/tower/model/cursor/persistence.coffee#L68](https://github.com/viatropos/tower/blob/development/src/tower/model/cursor/persistence.coffee#L68)
*   向客户端发出更新的记录：[https ://github.com/viatropos/tower/blob/development/src/tower/server/net/connection.coffee#L62](https://github.com/viatropos/tower/blob/development/src/tower/server/net/connection.coffee#L62)

使用套接字作为 Ajax 重新请求的触发器的缺点是每个连接的客户端都必须获取数据，因此如果有 100 个人在您的站点上，那么每次数据更改时都会有 100 个 HTTP 请求 - 您可以重用套接字连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T03:53:48.507

我认为使用 socket.io 事件推送更新的数据比重新请求最新的数据要好。更好的是，您只能推送修改后的数据，从而减少通过线路发送的数据量。总的来说，虽然是一个有趣的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T08:43:18.197

我会研究[Now.js](https://github.com/Flotype/now)，因为它几乎完全符合您的需要。

它创建了一个在客户端和服务器之间共享的命名空间。服务器可以直接调用客户端上的函数，反之亦然。

也就是说，如果您坚持当前的基础架构决定使用 MongoDB 和 Node.js，否则就会有[CouchDB](http://couchdb.apache.org/)，它是一个完整的 Web 服务器和文档数据库，内置了复杂的复制机制。

# excel - 在 Excel 2010 中将条件拆分为两列

> ID：11531526
> 
> 赞同：0
> 
> 时间：2012-07-17T22:04:49.360
> 
> 标签：excel

有谁知道我如何拆分托管在一个单元格中的 IF 语句？示例 一个单元格包含：IF Condition1 THEN Action1 所以我想：第一个单元格：IF Condition1 第二个单元格：THEN Action1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:30:43.707

对于 B4 中的 IF...THEN... 条件：

在 C4 中：

```
=LEFT(B4,LEN(B4)-SEARCH("THEN",B4)-1) 
```

在 D4 中：

```
=MID(B4,SEARCH("THEN",B4),500) 
```

# javascript - jQuery 和动态加载、格式错误的 HTML

> ID：11531527
> 
> 赞同：0
> 
> 时间：2012-07-17T22:04:55.500
> 
> 标签：javascript, jquery, html, css, html-parsing

我正在制作一个动态加载新闻提要的 WebApp（想想一个 Pulse News WebApp），但我遇到的问题是，如果一篇文章的 HTML 格式不正确（通常放错位置或缺少结束标签），它会破坏我的整个布局。

所以，我的问题是：有没有办法让我经济地“修复”HTML，或者以某种方式存储它而不是隐藏在隐藏元素中，这样它就不会“破坏”我的其余代码？

**演示：**
全屏： http: [//jsfiddle.net/SO_AMK/4pFcm/embedded/result/](http://jsfiddle.net/SO_AMK/4pFcm/embedded/result/)
正常：http: [//jsfiddle.net/SO_AMK/4pFcm/](http://jsfiddle.net/SO_AMK/4pFcm/)

（突出显示有问题的示例文章，它缺少`</i>`标签）

请注意，这不是整个应用程序，而是静态部分。实际的应用程序会生成所有 HTML。

PS 在旁注中，是否有人知道为什么当您单击文章署名或旁边的文章署名（标题下方）时，它会滚动该提要的图块？

有任何想法吗？

先感谢您。

# python - Python 线程、MatPlotLib 和循环

> ID：11531531
> 
> 赞同：0
> 
> 时间：2012-07-17T22:05:09.353
> 
> 标签：python, matplotlib, python-multithreading

我在循环中有一个重复的图形调用。因为后端需要继续运行，所以我将绘图拆分到另一个线程中（使用交互模式会锁定图形，因为后端正在使用对 C++ 的子进程调用）。但是，当后端再次出现图形时，这似乎会导致问题。虽然它继续运行，但在第一次之后绘图失败。只要代码正在运行，我就需要它能够继续打开添加的窗口，这样用户就可以离开并稍后再回来，并且仍然可以打开所有图表。如何根据需要调出尽可能多的窗口，并在底层代码完成时将它们保留在那里（窗口喜欢关闭所有 CMD 窗口，第二个代码停止执行）？

```
import subprocess
import threading
from matplotlib import pyplot as mpl
...
for x in data:
...
   if condition:
...
      class Graph(threading.Thread):
          def __init__(self,X,Y,min_tilt, min_energy):
              self.X = X
              self.Y = Y
              self.min_tilt = min_tilt
              self.min_energy = min_energy
              threading.Thread.__init__(self)

          def run(self):
              X = self.X
              Y = self.Y
              dx = (X.max()-X.min())/30.0
              x = np.arange(X.min(),X.max()+dx,dx)
              y = quad(x,fit)
              fig = mpl.figure()
              ax = fig.add_subplot(1,1,1)
              ax.grid(True)
              ax.plot(x, y, 'g')
              ax.scatter(X, Y, c='b')
              ax.scatter(self.min_tilt, self.min_energy, c='r')
              mpl.show()
     thread = Graph(X,Y,min_tilt,min_energy)
     thread.start()
 ....
   subprocess.Popen(file) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T06:57:35.607

听起来像一个复杂的设置，只是为了以非阻塞方式运行你的图。交互模式不切芥末吗？

```
import matplotlib.pyplot as plt

plt.interactive(True)

# complex code which produces multiple figures goes here...

# ... and might do something like 
fig1 = plt.figure()
plt.plot(range(10))
plt.draw()

# ... or this
fig2 = plt.figure()
plt.polar(range(10))
plt.draw()

# once everything is done, we can put in a blocking call
# which will terminate when the last window is closed by the user
plt.show(block=True) 
```

# c# - 有效登录 ASP.NET 时重定向 URI 错误

> ID：11531532
> 
> 赞同：0
> 
> 时间：2012-07-17T22:05:09.970
> 
> 标签：c#, asp.net, iis, login

我试图使用一个用 ASP.NET 编码并在 IIS 和 SQL Server 2008 上运行的软件。

我已经安装了它，包括数据库等。

当我开始使用脚本（安装在运行 IIS 的本地机器上）并登录到软件时，我遇到了错误。当我使用有效的登录名时，它会给我一个错误

```
Redirect URI cannot contain newline characters.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ArgumentException: Redirect URI cannot contain newline characters.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[ArgumentException: Redirect URI cannot contain newline characters.]
   System.Web.HttpResponse.Redirect(String url, Boolean endResponse, Boolean permanent) +11327996
   PirTickets.Account.Login.LoginButton_Click(Object sender, EventArgs e) +1158
   System.Web.UI.WebControls.Button.RaisePostBackEvent(String eventArgument) +154
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3691 
```

但是，当我输入无效登录时，它会给我一条无效的消息。我知道与数据库的连接没问题，因为它正在从数据库获取的其他地方输出文本。

下面是 Login.ASPX 代码：

```
 <%@ Page Title="Log In" Language="C#" MasterPageFile="~/Master/MasterPage.master" AutoEventWireup="true"
    CodeBehind="Login.aspx.cs" Inherits="PirTickets.Account.Login" EnableViewStateMac="false" ViewStateEncryptionMode="Never"  %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="Head">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="ContentPlaceHolder1">
    <h2>
        Log In
    </h2>
    <p>

        Customers and Trade users log in
        <a href="../Custlogin.aspx">here</a>

    </p>

            <span class="failureNotification">
                <asp:Literal ID="FailureText" runat="server"></asp:Literal>
            </span>
            <div class="accountInfo">
                <fieldset class="login">
                    <legend>Account Information</legend>
                    <p>
                        <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Username:</asp:Label>
                        <asp:TextBox ID="UserName" runat="server" CssClass="textEntry" EnableViewState="False"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" ControlToValidate="UserName" 
                             CssClass="failureNotification" ErrorMessage="User Name is required." ToolTip="User Name is required." 
                            >*</asp:RequiredFieldValidator>
                    </p>
                    <p>
                        <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                        <asp:TextBox ID="Password" runat="server" CssClass="passwordEntry" TextMode="Password" EnableViewState="False"></asp:TextBox>
                        <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" ControlToValidate="Password" 
                             CssClass="failureNotification" ErrorMessage="Password is required." ToolTip="Password is required." 
                            >*</asp:RequiredFieldValidator>
                    </p>
                    <p>

                        <asp:CheckBox ID="chkRememberMe" runat="server" Text="Remember Me" 
                            TextAlign="Left" />

                    </p>
                </fieldset>
                <p class="submitButton">
                    <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" 
                         onclick="LoginButton_Click"/>
                </p>
            </div>

</asp:Content> 
```

任何人都可以解决这个问题吗？如果需要任何其他信息，请询问，我将编辑此问题，

干杯

# c# - 在 JavaScript 中使用类名访问 html 元素

> ID：11531539
> 
> 赞同：0
> 
> 时间：2012-07-17T22:05:41.437
> 
> 标签：c#, javascript, asp.net-mvc, jquery, partial-views

有没有办法在 JavaScript 中访问特定类名下的 html 元素？

她的就是我目前所拥有的：

部分的：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<IEnumerable<Student.Models.vwStudent>>" %>

<table>
        <tr>
            <th>
                Student ID
            </th>           
            <th>
                Past Due Amount
            </th>
            <th>
                Past Due Days
            </th>            
        </tr>

        <% if (Model != null)
           foreach (var item in Model) { %>

        <tr>
            <td class="StudentInv">
                <%=Html.TextBox("StudentID",item.StudentID) %>
            </td>

            <td class="StudentInv">
                <%=Html.TextBox("PastDueAmount",item.PastDueAmount) %>
            </td>
            <td class="StudentInv">
                <%=Html.TextBox("PastDueDays",item.PastDueDays) %>
            </td>            
        </tr>

    <% } %> 
```

掌握：

```
<div>
<% using(Html.BeginForm("SaveStudentInvoice", "StudentInvoice")) %>
<% { %>
<div>
<% Html.RenderPartial("DisplayStudentInvoiceList"); %>
</div>
<% } %>
<br/>
<input type="button" id="Submit" name="Submit" value="Submit" />
</div> 
```

JavaScript：

```
$('#Submit').click(function () {

    var link = '/StudentInvoice/SaveStudentInvoice';
    $.ajax({
        type: 'POST',
        url: link,
        data: { SaveStudent: $(".StudentInv").val()
        },
        dataType: 'json',
        success: function (result) {
            alert("Success")
        },
        error: function (result) {
            alert("Failed")
        }
    });
}); 
```

控制器：

```
[HttpPost()]
public ActionResult SaveStudentInvoice(string SaveStudent)
{
    /// Parse SaveStudent String and rerform some Action

        return View();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:07:35.933

你`jQuery` 应该是

```
$(".StudentInv input") 
```

选择`input`类为 的节点内的对象`StudentInv`。

**更新**使用列表

请注意，由于您的查询返回多个节点，因此 `$.val()`仅返回第一项的值。[您可以通过执行http://jsfiddle.net/Qs4JC/2/](http://jsfiddle.net/Qs4JC/2/)来遍历它们中的每一个

```
var values = [];
$(".StudentInv input").each(function(){
   values.push($(this).val());
});
// values is populated here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:09:55.970

请像这样使用Jquery `$('.StudentInv :input');`

奖金：http: [//jsfiddle.net/Qs4JC/1/](http://jsfiddle.net/Qs4JC/1/)

# php - 在共享 Web 服务器上安装 PDFTK

> ID：11531542
> 
> 赞同：5
> 
> 时间：2012-07-17T22:06:15.343
> 
> 标签：php, linux, pdftk

我的网站使用某种 Linux（我不知道确切的种类）和 Apache 托管在 Total Choice Hosting 上。我没有命令行访问权限 - 我只能通过 PHP 中的 exec() 或通过 CRON 作业运行命令行程序。

我可以在这样的系统上安装和使用 PDFTK 吗？

如果是这样，我到底该怎么做？我必须将哪些文件复制到哪里？我是否必须从源代码重建 PDFTK，或者某处是否有可执行版本？

因为（据我了解）PDFTK 基于 iText，它是用 Java 编写的。也许我最好使用原始的 iText 包？

或者有没有更好的方法来做我想做的事情（基本上是将PDF文件（空白表格）与FDF文件（字段值）合并并展平为一个新的PDF文件（完整的表格）并将其下载到用户）？是否有一些本机 PHP 或 Python 或 Perl 代码来执行此操作？

谢谢 - 罗文

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T22:20:27.670

快速浏览一下就会发现 PDFTK 源代码是 C++，看起来他们使用 GCJ 将一些 3rd 方 Java 代码编译为本机代码。如果您找到与您的操作系统和架构相匹配的 PDFTK 预构建版本，您应该能够将二进制文件上传到您的系统并使用 exec 从 PHP 运行它。[安装页面](http://www.pdflabs.com/docs/install-pdftk/)上有一些可用的构建。

有一些原生 PHP 库可用于创建和操作 PDF。查看[TCPDF](http://www.tcpdf.org/)、[Zend_Pdf](http://framework.zend.com/manual/en/zend.pdf.html)和[FPDF](http://www.fpdf.org/)以查看其中是否可用。每个人都应该支持您想做的事情，这只是选择正确的解决方案的问题。

使用 PDFTK 可能是最快的选项，因为它是编译代码，但它是最不便携的选项，因为它需要服务器安装该软件，PHP 解决方案可以与您的代码一起分发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T19:42:00.363

如果您在共享主机上，则无法安装 PDFtk，因为您无权访问 root 来安装任何东西。您需要有一个预先安装了它的主机。我使用 bluehost.com 但正常运行时间不是最好的。它现在可以工作，但是一旦我的网站完成，我将转移到另一个主机。我有几次中断，持续了一天多。

# ios - 在 iOS 上的音频播放器或 VOIP 应用程序中从背景显示一些 UI

> ID：11531544
> 
> 赞同：4
> 
> 时间：2012-07-17T22:06:18.883
> 
> 标签：ios, voip, iphone-privateapi

我知道音频播放器和 Voip 应用程序可以在 iOS 的后台运行。

有没有办法从后台显示 UI（LocalNotifications 除外）？我的意思是全屏用户界面。

使用私有 API 或其他技巧的方法是可以接受的。该应用程序将使用企业证书进行签名，并且不会被 AppStore 部署/审查。

仅适用于越狱 iOS 设备的方法是不可接受的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T16:20:22.230

查看此文档并搜索“实现长时间运行的后台任务”基本上您需要注册您的应用程序以在后台运行，而不是被暂停并收听通知。

来自文档：“一个应用程序使用其 Info.plist 文件声明对服务的支持。将 UIBackgroundModes 键添加到您的 Info.plist 文件”和“.....values 让系统知道您的应用程序应该在适当的时间来响应相关事件。”

[http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html#//apple_ref/doc/uid/TP40007072-CH4-SW20)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T21:55:15.577

Victor，您是否尝试过一些技巧，例如为您的应用程序定义自定义 URL？

Springboard 可以在解析自定义 URL 时启动应用程序；如果它们在背景中，它们将成为前景。

您必须在键 CFBundleURLTypes 中为您的应用程序的 info.plist 创建一个 URL 类型，例如“mySpecialURLType”。您的应用程序委托还必须实现**handleOpenURL:**和**openURL:sourceApplication:annotation:**。

如果你（在你的后台任务中）请求一个像“mySpecialURLType://”这样的 URL，理论上 SpringBoard 会启动你的应用程序。

我不知道它是否有效，但值得一试......

最好的！

# jquery - 如果指定了 mailto 附件参数，为什么 IE 不使用 /a（附件）参数打开 Outlook？

> ID：11531547
> 
> 赞同：1
> 
> 时间：2012-07-17T22:06:37.097
> 
> 标签：jquery, internet-explorer, outlook, attachment, mailto

如果我可以保证客户端机器使用 Outlook 并且浏览器是 IE9+，有没有办法构造 mailto 以便调用 Outlook 之类的命令包含 /a 以便它将使用 mailto 的附件参数？

所以说mailto看起来像

```
function emailFile() {
    var contentArea = "This is the text";
    var subject = "This is the subject";
    var href = 'mailto:?subject=' + subject + '&body=' + contentArea + '&attachment="e:/large.jpg"' ;
    location.href = href;
} 
```

为什么没有使用 Outlook 期望的 /a 参数从 jQuery 代码打开命令行 Outlook？网络上有很多关于 mailto 附件的问题，我知道肯定有问题，但是 Outlook 命令行提供了一个开关，那么为什么在这种情况下不使用该开关呢？

或者如果它确实有效，那么先决条件是什么，我做错了什么？

# php - 解析错误：语法错误，第 55 行 C:\xampp\htdocs\ci_bc\application\controllers\user.php 中的意外 T_IF

> ID：11531548
> 
> 赞同：-1
> 
> 时间：2012-07-17T22:06:41.863
> 
> 标签：php, if-statement, social-networking

我正在创建一个社交网站并尝试创建一个仅允许 18 岁及以上注册到该网站的功能。但我收到此错误：解析错误：语法错误，第 55 行 C:\xampp\htdocs\ci_bc\application\controllers\user.php 中的意外 T_IF ......有什么想法吗？

```
function registration(){

//sets up captcha for regitration form
$vals = array(
    'img_path' => './captcha/', //Captcha image directory
    'img_url' => base_url().'captcha', //local save directory
    'img_width' => '275', // width of image
    'img_height' => '50', // height of image
    'expiration' => '7200' //Expiration of captcha set to 2 hours
);

$data['month'] = array(
    '1' => 'January',
    '2' => 'Febuary',
    '3' => 'March',
    '4' => 'April',
    '5' => 'May',
    '6' => 'June',
    '7' => 'July',
    '8' => 'August',
    '9' => 'Septemeber',
    '10' => 'October',
    '11' => 'November',
    '12' => 'December'
);
$excluded_days = array();
for($x = 1; $x <= 31; ++$x)
    (
    if(!in_array($x, $excluded_days))
    (
        $days[$x] = $x;
    )
)
$excluded_years = array();
for($x =date('Y')-18; $x >= data('Y')-100; --$x)
{
    $years[$x] = $x;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:08:41.820

您在`for`循环中使用了普通括号而不是大括号。分别更改它们 from`(`和`)`to`{`和`}`。

对于`if`嵌套的 if 语句和实际上任何[控制结构](http://php.net/manual/en/language.control-structures.php)也是如此。

```
for($x = 1; $x <= 31; ++$x)
    { // <----- curly
    if(!in_array($x, $excluded_days))
    { // <----- curly
        $days[$x] = $x;
    } // <----- curly
} // <----- curly 
```

# ios - dSYM 中未包含 iOS 静态库调试符号

> ID：11531560
> 
> 赞同：16
> 
> 时间：2012-07-17T22:07:16.433
> 
> 标签：ios, debugging, linker, static-libraries

我正在开发一系列共享通用代码库的 iOS 应用程序。我已将通用代码库开发为静态库，并希望它的调试符号包含在主应用程序的 .dSYM 文件中。我的理解是这是可能的，但我还没有让它工作。

自己项目中的通用代码库，以静态库为目标。该项目被拖入主应用程序的项目中。在主应用程序目标的构建阶段中，我将静态库添加为目标依赖项，并在 Link Binary With Libraries 下添加。该项目根据需要构建和运行。

现在，如果我从主项目生成存档，我可以在 Finder 中查看该存档，它包含一个 .dSYM 文件，可用于符号化崩溃日志。但是，.dSYM 仅包含主应用程序的符号，而不包含静态库的符号。为了过度确认这一点，我运行了以下命令：

`dwarfdump /path/to/app.dSYM`

并且输出（大部分）不包含静态库中的任何符号。我发现的唯一例外是我的主要项目的 AppDelegate 是静态库中对象的子类，并且 .dSYM 中有该超类的条目。但是，其他类都不存在。

在静态库项目的目标构建设置中，我设置了以下内容：

*   在复制期间去除调试符号：否
*   带链接产品：否
*   生成调试符号：是
*   默认隐藏的符号：否

如果有人可以提供一些指导，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T09:36:24.000

静态库符号*确实*出现在应用程序的 dSYM 文件中，而 dwarfdump 会显示这一点。

```
 dwarfdump -a path/to/app.dSYM >dsymAsText.txt 
```

那应该向您显示lib的符号。

但是，如果您（就像我最近一直在寻找）要生成一个符号表以仅与您的静态库一起使用，我得出的结论是它将毫无用处；一旦它被编译到一个新的应用程序中，这些符号和地址都会改变，你将有一个完全不同的偏移量（如果我错了，请有人纠正我）。

我不完全确定有办法绕过那部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:01:11.153

不确定您是否找到答案，但几天前我遇到了完全相同的问题。我通过执行以下操作使其工作：

1.  创建一个工作区来保存您的主要项目和公共代码库（静态库）。确保项目是兄弟姐妹而不是父/子。
2.  添加目标依赖并链接公共代码库
3.  确保在通用代码库中包含调试符号
4.  配置工作区设置以在共享目录中构建所有项目（我相信这是关键）
5.  如果您收到有关无法找到标头的投诉，您可能必须在构建设置中修改用户标头搜索路径或使用源代码树功能。

# python - 在 wxpython 中滚动多个面板时出现问题

> ID：11531567
> 
> 赞同：0
> 
> 时间：2012-07-17T22:07:51.867
> 
> 标签：python, wxpython, wxwidgets

我希望能够拥有一组保持相同大小的垂直面板，但我希望有一个垂直滚动条允许我在窗口中滚动。现在我正在使用 wx.ScrolledPanel 并向其中添加面板并将它们放入 sizer 但屏幕上没有真正显示

```
import wx
import  wx.lib.scrolledpanel as scrolled
class josh(wx.Frame):
def __init__(self, parent, id):   
    wx.Frame.__init__(self, wx.GetApp().TopWindow, title='Title',size=(800,600))
    arr= ['Q1.......','Q2.......','Q3.......','Q4.......','Q5.......','Q6.......','Q7..............','Q8..........']
    scroll=scrolled.ScrolledPanel(self, -1)
    #scroll.SetScrollbars(1,1,1,1) 
    panelList = []
    commentList = []
    count = 1
    sizer = wx.BoxSizer(wx.VERTICAL)

    for p in arr: 
        panelList.append(wx.Panel(scroll ,-1, size = (800,100), style=wx.SUNKEN_BORDER))
        sizer.Add(panelList[count-1], 1, wx.EXPAND)
        wx.StaticText(panelList[count-1], -1, str(count), (5, 50), wx.DefaultSize) 
        commentList.append( wx.TextCtrl(panelList[count-1], style=wx.TE_MULTILINE,pos=(500, 20),size = (200,50)))
        count+=1

    self.SetAutoLayout(True)
    self.SetSizer(sizer)
    scroll.SetupScrolling()
if __name__=='__main__':
app=wx.App(False)
frame=josh(parent=None,id=-1)
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:16:36.610

您将每个面板作为滚动小部件的子小部件。但是您将每个面板添加到sizer，然后错误地将Frame的sizer设置为名为“sizer”的sizer。

这是一种不匹配，几乎总是会产生糟糕的视觉效果。

您应该设置 scrolled.SetSizer(sizer) 或创建一个新的 sizer，比如将其称为 framesizer，然后将滚动添加到它。THEN self.SetSizer(framesizer) where self 如果 josh() 框架。

此外，除非子小部件比 ScrolledPanel 大，否则 ScrolledPanel 不会显示它的滚动条。

```
# Broken down here to show sizer child-parent hiearchy 
# AND widget child-parent hiearchy need to be congruent

import wx
import wx.lib.scrolledpanel
scrolled = wx.lib.scrolledpanel #i use reload(...) in pyslices.py

class Panel(wx.Panel):
    def __init__(self, parent, color='black'):
        wx.Panel.__init__(self, parent, size=(800,100))

        # several "Panels" sized added together 
        # are bigger than ScrolledPanel size

        self.SetMinSize( (800, 100) )
        self.SetBackgroundColour( color )

        widget1 = wx.TextCtrl(self, style=wx.TE_MULTILINE)
        widget2 = wx.TextCtrl(self, style=wx.TE_MULTILINE)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add( widget1, 1, wx.ALL | wx.EXPAND, 15 )
        sizer.Add( widget2, 1, wx.ALL | wx.EXPAND, 15 )

        self.SetSizer( sizer )

class BigPanel(wx.Panel):
    def __init__(self, parent):

        # at least one child widget or aggregate width 
        # of several child widgets has to be wider than 
        # ScrolledPanel to show its horizontal scroll bar

        # at least one child widget or aggregate height
        # of more then one child widget has to be "taller" than
        # the height of the ScrolledPanel for it to show
        # its vertical scroll bar

        # -------------------------------------V---V
        wx.Panel.__init__(self, parent, size=(800,800))
        # -------------------------------------^---^

        panel0 = Panel(self, 'black')
        panel1 = Panel(self, 'red')
        panel2 = Panel(self, 'green')
        panel3 = Panel(self, 'blue')
        panel4 = Panel(self, 'white')
        panel5 = Panel(self, 'purple')

        sizer = wx.BoxSizer(wx.VERTICAL)

        sizer.Add( panel0, 1, wx.ALL | wx.EXPAND, 15 )
        sizer.Add( panel1, 1, wx.ALL | wx.EXPAND, 15 )
        sizer.Add( panel2, 1, wx.ALL | wx.EXPAND, 15 )
        sizer.Add( panel3, 1, wx.ALL | wx.EXPAND, 15 )
        sizer.Add( panel4, 1, wx.ALL | wx.EXPAND, 15 )
        sizer.Add( panel5, 1, wx.ALL | wx.EXPAND, 15 )

        self.SetSizer( sizer )

class ScrolledPanel(scrolled.ScrolledPanel):
    def __init__(self, parent):
        # ---------------------------------------------------V---V
        scrolled.ScrolledPanel.__init__(self, parent, size=(400,400))
        # ---------------------------------------------------^---^

        bigpanel = BigPanel(self)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add( bigpanel, 1, wx.ALL | wx.EXPAND, 15 )

        self.SetSizer( sizer )
        self.SetAutoLayout(1)
        self.SetupScrolling()

class Frame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, parent = wx.GetApp().GetTopWindow(),
            title = 'Trouble with scrolling through several panels in wxpython',
            size = (500,400))

        scroll = ScrolledPanel(self)

        sizer = wx.BoxSizer(wx.VERTICAL)
        sizer.Add( scroll, 1, wx.ALL | wx.EXPAND, 15 )
        self.SetSizer( sizer )

if __name__ == '__main__':
    app = wx.GetApp()
    if not app: app = wx.App(0)
    frame = Frame()
    frame.Show()
    if not app.IsMainLoopRunning():
        app.MainLoop() 
```

# wpf - 在没有 ValidatesOnDataErrors 的情况下访问 IDataErrorInfo

> ID：11531568
> 
> 赞同：0
> 
> 时间：2012-07-17T22:07:54.467
> 
> 标签：wpf, validation, mvvm, idataerrorinfo

我有一个 Datagrid 我想提供一些数据验证，但我需要避免通常在单元格处于无效状态时发生的锁定机制。有没有办法在不使用网格锁定 ValidatesOnDataErrors 的情况下绑定到模型上的 IDataErrorInfo 错误？

具体来说，我想在不锁定网格的情况下显示错误的工具提示和装饰器。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T16:11:30.153

事实证明，这可以通过仅在 DataGridTemplateColumn 的 CellTemplate 上使用验证来实现。

如：

```
 <DataGridTemplateColumn Header="Destination Column">
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <ComboBox IsEditable="True"
                                      IsTextSearchCaseSensitive="{Binding ElementName=caseSensitiveSearch, Path=IsChecked}"
                                      ItemsSource="{Binding AllSuggestedNames}"
                                      TextSearch.TextPath="SuggestedName"
                                      Text="{Binding ColumnMapping.DestinationColumnName, UpdateSourceTrigger=PropertyChanged}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Style="{StaticResource TextBlockValidationStyle}"
                                       Text="{Binding ColumnMapping.DestinationColumnName, 
                                                ValidatesOnDataErrors=True, 
                                                NotifyOnValidationError=True, 
                                                UpdateSourceTrigger=PropertyChanged}"
                                       Validation.ErrorTemplate="{StaticResource validationTemplate}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn> 
```

# database - 如何在“Time.now”减去 x 小时的时间范围内显示数据库记录？

> ID：11531573
> 
> 赞同：0
> 
> 时间：2012-07-17T22:08:14.257
> 
> 标签：database, ruby-on-rails-3, range, conditional-statements

我使用带有哈希条件和时间范围从“Time.now”到-24 小时的查询。

```
@time_range = @time_now..(@time_now - 24*3600)
Model.all(:conditions => { :created_at => (@time_range) }) 
```

目前，所有超过 24 小时前创建的数据库记录都不会显示。显示小于 24 小时“旧”的所有记录。

我的目标是用来自数据库列“duration”的变量替换常量值 24。此列包含从 24 到 1 的整数值 - 取决于在表单中创建数据库记录的方式。

所以我需要访问这个“持续时间”列。但我不知道如何在控制器中做到这一点，因为我没有可用的模型实例。所以我不能说例如：

```
Model.duration*3600 
```

或者：

```
:duration*3600 
```

非常感谢任何提示。

[PS：这个问题和另一个](https://stackoverflow.com/questions/5284696/how-can-i-search-date-range-in-rails-with-variable-date)类似。不幸的是，我在那里找不到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:53:46.310

那个回答比你想象的要简单一些。Rails 有一种用于计算时间的内置方法系统。

如果你想回去一天，你只需要做 1.day.from_now 或者你甚至可以做 2.day.from_now

这会将数据作为时间戳返回。

```
1.day.from_now.beginning_of_day

1.month.from_now.beginning_of_month

1.month.from_now

1.day.from_now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:44:12.263

此代码可能更符合您的要求。不完全是您在谈论的内容，但我认为它是围绕您所评论的相同想法构建的。希望它可以提供帮助。

```
def self.days_from_now(d)
    self.where("due_date >= ? AND due_date <= ? ", d.day.from_now.beginning_of_day, d.day.from_now.end_of_day)
end 
```

# android - 在运行时加载语言 - 由服务器推送

> ID：11531574
> 
> 赞同：0
> 
> 时间：2012-07-17T22:08:17.907
> 
> 标签：android, android-layout, android-intent

我正在寻找一种可以在运行时（仅）更改应用程序语言的方法。我的应用程序与服务器通信，并且有各种指令从服务器推送到应用程序。现在，当服务器推送它时，需要在运行时更改应用程序的语言。无论手机上运行的语言是什么，应用程序都应更改为服务器推送的语言。我有所有这些语言的 string.xml。

谢谢， SKU

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:23:19.860

要更改从服务器检索的包含的语言，只需将标头“Accept-Language”添加到您的请求中，其值为 。

> String languge = 可以是法语“an”英语的“fr”
> 
> request.addHeader("接受语言", languge);

# c# - 基于位置的动态右键单击菜单 C#

> ID：11531576
> 
> 赞同：2
> 
> 时间：2012-07-17T22:08:39.577
> 
> 标签：c#, .net-4.0

好的，所以我想做的是有一个菜单，可以根据文件位置执行某些操作。因此，如果一个文件在我的应用程序使用的文件夹中，我希望移动到文档，如果文件在该位置，则移动到 [程序文件夹]。这个上下文菜单可以通过资源管理器。

有人对如何做到这一点有任何想法吗？

至少作为一个基础，我认为我必须使用上下文菜单并且我可以动态添加项目......或者至少我认为我必须这样做。

[编辑：2012 年 7 月 20 日 10:17] - 也许我的问题措辞不当。我想做的是让我的程序与资源管理器更加集成，因此当用户右键单击文件时会出现某些操作，这取决于文件是否与我正在开发的程序相关联。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:39:55.363

要将项目添加到资源管理器上下文菜单，您需要使用 shell 扩展。这是编写 shell 扩展的指南：

[http://www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens](http://www.codeproject.com/Articles/830/The-Complete-Idiot-s-Guide-to-Writing-Shell-Extens)

第 VI 部分描述了添加到“发送至”菜单，这听起来像是您正在寻找的内容。

# iphone - iPhone应用程序下载的NSURL连接在完成之前终止

> ID：11531577
> 
> 赞同：1
> 
> 时间：2012-07-17T22:08:39.700
> 
> 标签：iphone, xcode, download, nsurlconnection

我有这段代码可以从服务器下载 mp3。一切都设置了表格视图解析播客，mp3 的链接是 _entry.articleURL。几分钟后，iPhone 断开了连接，我只下载了一小部分 mp3。有什么想法可能导致这种情况吗？

```
-(void)didSelectRowAtIndexPath 
{     RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

             self.nameit = entry.articleTitle;
             NSURL *url = [NSURL URLWithString:entry.articleUrl];    
             NSURLRequest *theRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringLocalCacheData timeoutInterval:60];
             __block NSURLConnection *connection = [NSURLConnection connectionWithRequest:theRequest delegate:self];

             UIApplication *application = [UIApplication sharedApplication]; //Get the shared application instance

             __block UIBackgroundTaskIdentifier background_task; //Create a task object

             background_task = [application beginBackgroundTaskWithExpirationHandler: ^ {
                 // This code gets called when your app has been running in the background too long and the OS decides to kill it
                 // You might want to cancel your connection in this case, that way you won't receive delegate methods any longer.
                 [connection cancel];
                 [application endBackgroundTask: background_task]; //Tell the system that we are done with the tasks
                 background_task = UIBackgroundTaskInvalid; //Set the task to be invalid

                 //System will be shutting down the app at any point in time now
             }];

             self.backgroundTaskIdentifier = background_task;
             if (connection) {
                 receivedData = [[NSMutableData data] retain];
                 self.thetable = tableView;
                 self.thepath = indexPath;
             }
             else {
                 UIAlertView *cancelled = [[UIAlertView alloc] initWithTitle:@"Download Failed" message:@"Please check your network settings, and then retry the download." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
                 [cancelled show];
                 [cancelled release];
             }
}

- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
progress.hidden = NO;
downloadInProgress = YES;
RSSEntry *entry = [_allEntries objectAtIndex:thepath.row];

self.nameit = entry.articleTitle;
downloadlabel.text = [NSString stringWithFormat:@"%@", nameit];
[thebar addSubview:downloadlabel];
[receivedData setLength:0];
expectedBytes = [response expectedContentLength];
}

- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
[receivedData appendData:data];
float progressive = (float)[receivedData length] / (float)expectedBytes;
[progress setProgress:progressive];

}

- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
[connection release];
UIAlertView *connectionfailed = [[UIAlertView alloc] initWithTitle:@"Download Failed" message:@"Please check your network settings, and then retry the download." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil];
[connectionfailed show];
[connectionfailed release];
progress.hidden = YES;
downloadInProgress = NO;
[downloadlabel removeFromSuperview];
[thetable deselectRowAtIndexPath:thepath animated:YES]; 
[[UIApplication sharedApplication] endBackgroundTask:self.backgroundTaskIdentifier];
self.backgroundTaskIdentifier = UIBackgroundTaskInvalid;
[connection release];

}

- (NSCachedURLResponse *) connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse {
return nil;
}

- (void) connectionDidFinishLoading:(NSURLConnection *)connection {
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfPath = [documentsDirectory stringByAppendingPathComponent:[nameit stringByAppendingString:@".mp3"]];
NSLog(@"Succeeded! Received %d bytes of data",[receivedData length]);
[UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
[receivedData writeToFile:pdfPath atomically:YES];
progress.hidden = YES;
downloadInProgress = NO;
[downloadlabel removeFromSuperview];

[thetable deselectRowAtIndexPath:thepath animated:YES]; 

[[UIApplication sharedApplication] endBackgroundTask:self.backgroundTaskIdentifier];
self.backgroundTaskIdentifier = UIBackgroundTaskInvalid;
} 
```

问题是似乎 connectionDidFinishLoading 不断被调用，即使不完整。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:19:21.337

不确定您为什么要使用 beginBackgroundTaskWithExpirationHandler 来完成这项工作 - 它的目的是完成一项完全不同的任务（在您的应用程序移动到后台后做一些工作。您在前台使用它很可能是您的原因问题。

我建议你做的是在 github 等上寻找一个示例并发 NSOperation 演示项目，并使用它们来执行你的异步 NSURLConnections。

此外，您正在回调的视图中更新 GUI 元素。请记住，您必须在主线程上使用 UIKit。如果您需要更新某些内容，只需使用一个块并将其分派到主队列来进行更新。

# iphone - 我如何在 iPad 和 iPhone 之间设置不同的 CSS 样式

> ID：11531580
> 
> 赞同：5
> 
> 时间：2012-07-17T22:08:47.667
> 
> 标签：iphone, html, css, ios, ipad

我有一个嵌入式 HTML 文件，用于我的 iOS 应用程序中的帮助页面，但希望在 iPad 和 iPhone 上以不同方式显示时对某些内容进行不同的样式设置。读了一堆我已经了解了@media 语法，除了我的一生，我无法让它正常工作。鉴于下面显示的 HTML 文件，为什么它总是只显示 iPad 样式的背景（粉红色）而不是根据设备进行调整？

```
<head>
    <title>Help</title>

<meta name="viewport" content="width=device-width">
    <style type="text/css">
        h1 {text-align: center; font-family: "Tahoma", Geneva, sans-serif; font-size:30px; color:#ffdd00;font-weight:bold; text-shadow: rgba(0, 0, 0, 1) 2px 2px;}

        /* iphone - GREEN */
        @media only screen and (max-device-width : 480px) {
            body {background-color:#009900;}
        }

        /* ipad  - PINK */
        @media only screen and (max-device-width : 1024px) {
            body {background-color:#ff8888;} 
        }
    </style>
</head>
<body>
    <br>
    <h1> I Need Some Help!</h1>
</body> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-17T22:15:42.717

`C`in`CSS`代表“级联” 。您的 iPad 样式正在覆盖您的 iPhone 样式。尝试像这样切换它们：

```
/* ipad  - PINK */
@media only screen and (max-device-width : 1024px) {
    body {background-color:#ff8888;} 
}

/* iphone - GREEN */
@media only screen and (max-device-width : 480px) {
    body {background-color:#009900;}
} 
```

iPhone 的视口有多宽？480像素？

在您的代码中，您首先检查设备宽度是否<=480。这将返回 true，因此应用了封闭的样式。*然后*，您的代码检查设备宽度是否 <=1024。480 确实小于 1024，所以应用了封闭的样式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T22:11:39.357

最好不要单独使用该`max-device-width`属性。将它与其他属性一起使用，例如`min-device-width`准确定位设备。

有时会令人困惑，但为了更好地理解，W3C 指定的基本属性是`device-width`设备屏幕的宽度（不是浏览器宽度）

`min`和`max`是表示“大于或等于”和“小于或等于”约束的前缀。此语法用于避免可能与 HTML 和 XML 冲突的“<”和“>”字符。

换句话说，`device-width`查询并将设备宽度作为一个数字返回，但使用 min 和 max 不会返回表示设备最小和最大宽度的两个固定数字，而是允许您检查是否`device-width`小于或大于您选择的值。

因此，在您的情况下，这两组都将适用于 iPhone，因为订单意味着 iPhone 设备宽度将始终小于 1024 和 480。

尽管切换集合的顺序可以作为@JezenThomas 的解决方案，但我建议您尝试这些 Hardboiled CSS 媒体查询：

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:17:52.287

您可以尝试以下方法：

```
@media only screen and (min-device-width:481px) and (max-device-width : 1024px) {
        body {background-color:#ff8888;
} 
```

# javascript - 需要帮助在验证器中添加值

> ID：11531583
> 
> 赞同：2
> 
> 时间：2012-07-17T22:09:13.393
> 
> 标签：javascript, validation

我在表单中有一个部分，我需要验证器检查一个输入的值与其他两个输入的总和。我不知道如何正确编写 javascript 语法，因此如果措辞不正确，我深表歉意。

```
<form id="RSVP-form">

<label> Number of Guests </label>
<input type="number" name="ppl-number" required="required" size="4" maxlength="2" />

<label> Chicken Marsala </label>
<input type="range" name="chicken" min="0" max="10" value="0" />

<label> Steak and Salmon </label>
<input type="range" name="steak" min="0" max="10" value="0" />

<button type="submit">Submit RSVP</button>

</form> 
```

我需要编写一个脚本来确认 value("ppl-number") = value("chicken"+"steak")。不知道该怎么做？我查看了几个示例，但在多次尝试后似乎无法让脚本正常运行。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:20:55.657

只需将事件侦听器附加到提交事件并比较数字即可。不要忘记，即使您可以将输入类型指定为数字，您也会得到一个字符串，并且需要先将其解析为数字，然后才能进行数学运算。

```
document.getElementById("RSVP-form").addEventListener("submit", function (e) {
    var form = this,
        amountChicken = parseInt(form.elements.["chicken"].value, 10),
        amountSteak = parseInt(form.elements.["steak"].value, 10),
        peopleCount = parseInt(form.elements.["ppl-number"].value, 10);

    if (amountChicken + amountSteak !=== peopleCount) {
        alert("Portions and people don't match!");
        return false;
    };
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:42:33.900

使用这样的东西：

```
<script>
function validatecount()
{
    var chicken_count = document.getElementById("chicken").value;
    var steak_count = document.getElementById("steak").value;
    var total = document.getElementById("ppl-number").value;
    var sum = parseInt(chicken_count) + parseInt(steak_count);
    alert(sum);
    alert(total);
    if (sum == total)
    {
    document.RSVP-form.submit();
    } else {
        alert("Error Message!");
    }
}
</script>
<form id="RSVP-form">

    <label> Number of Guests </label>
    <input type="number" name="ppl-number" id="ppl-number"
           required="required" size="4" maxlength="2" />

    <label> Chicken Marsala </label>
    <input type="range" name="chicken" id="chicken" min="0" max="10" value="0" />

    <label> Steak and Salmon </label>
    <input type="range" name="steak" id="steak" min="0" max="10" value="0" />

    <button type="submit" onclick="validatecount()">Submit RSVP</button>

</form> 
```

# z3 - Z3和coq的区别

> ID：11531589
> 
> 赞同：45
> 
> 时间：2012-07-17T22:10:08.063
> 
> 标签：z3, coq, theorem-proving

我想知道是否有人可以告诉我Z3和coq之间的区别？在我看来，coq 是一个证明助手，因为它要求用户填写证明步骤，而 Z3 没有这个要求。但似乎 coq 也有类似于 Z3 的自动战术？又或者 coq 的证明搜索能力没有 Z3 强大？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-07-17T23:03:32.253

Coq 是一个交互式定理证明器（又名证明助手）。它提供了一种语言来编写数学定义、算法和定理。它还提供了一个用于生成机器检查校样的环境。Coq 已被用于形式化数学定理，并提供编程语言的语义。今天，我们可以在 POPL 找到许多使用 Coq 的论文。一些人声称，在未来，像 Coq 这样的系统将被数学家广泛使用。这篇[文章](http://www.cl.cam.ac.uk/~jrh13/papers/notices.pdf)对数学中的形式证明有一个令人信服的论据。最近，[Georges Gonthier](http://research.microsoft.com/en-us/people/gonthier/) 使用 Coq 创建了四色定理的可调查证明。Coq 的可信核心很小，并且提供了很高的保证。

Z3 是[SMT](http://en.wikipedia.org/wiki/Satisfiability_Modulo_Theories)（可满足性模理论）求解器。它的语言是许多排序的一阶逻辑+理论，例如算术、位向量、数据类型、数组等。这种语言不像 Coq 中使用的那样具有表达力。Z3 也不支持像 Coq 这样的证明管理。Z3主要用于软件测试和验证。它还可用于解决约束、规划问题、谜题等。为可满足的公式寻找模型（即解决方案）非常重要。[本文](http://dl.acm.org/citation.cfm?id=1995394)介绍了 Microsoft 和其他地方的许多 Z3 应用程序。Z3 本质上是一个自动定理证明器。在 Z3 中，策略用于指定[特定领域的策略](http://research.microsoft.com/en-us/um/people/leonardo/strategy.pdf). 也就是说，针对特定应用领域中的问题的定制求解器。Z3 可以生成可以独立检查的证明/证书。然而，证明生成并不是 Z3 项目的主要关注点。此外，许多模块不支持证明生成，并且在用户请求生成证明时必须禁用。Z3 也被集成在[Isabelle](http://isabelle.in.tum.de/)等证明助手中，一些正在努力将 Z3 集成到 Coq 中。这个想法是两全其美：非常富有表现力的语言和非常好的自动化。Z3 也可以被视为一个可以嵌入到更大应用程序中的逻辑推理引擎。实际上，到目前为止，每个 Z3 应用程序都是如此。最终用户不直接使用 Z3。它隐藏在 Isabelle、[Pex](http://research.microsoft.com/en-us/projects/pex/)等工具中，[VCC](http://research.microsoft.com/en-us/projects/vcc/)等。Z3 的[新 Python 前端](http://rise4fun.com/z3py/tutorial)试图改变这一点。

# magento - Magento - Mage_Core_Model_Abstract load() $field 参数的用途

> ID：11531590
> 
> 赞同：2
> 
> 时间：2012-07-17T22:10:08.093
> 
> 标签：magento

第二个参数的目的是什么`Mage_Core_Model_Abstract` `load()`

即 $field 参数。

我查看了方法和`Mage_Core_Model_Resource_Db_Abstract`它的加载方法，它也得到了`Mage_Core_Model_Abstract` `load()`调用。

我只是不清楚发生了什么。

有人可以解释一下吗

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-18T03:11:23.573

如果提供，与 $field 参数同名的列将是过滤器（where）。如果不是，则资源模型将使用在资源模型定义中设置的主键列。

# perl - cgi数字猜谜游戏——将值存储在一个可读可写的文件中

> ID：11531601
> 
> 赞同：2
> 
> 时间：2012-07-17T22:11:48.653
> 
> 标签：perl, cgi

我正在为一个猜数游戏编写一个 cgi 脚本，我想将目标值存储在一个可读和可写的文件中。我不知道该怎么做，但我相信我可以使用 system() 调用和某种类型的表达式来从该文件中提取值。我需要帮助确定该解决方案；我已经有以下内容：

```
#!/usr/bin/perl -w
use CGI qw(:standard);
print header, start_html("Guessing Game"), h2("Guessing game"), "\n";

//need some type of system call to store value if one does not exist 
//or read it if it does (random value generated below)

srand( time() ^ ($$ + ($$ << 15)) );
my $target = int(rand 100) + 1; 

if ( !param() ) {
    print hr, "\n", start_form;
    print p("Try to guess a number between 1 and 100: ", textfield("guess")), "\n";
    print end_form, "\n", hr;
} else {
    print hr, "\n", start_form;
    my $guess = param("guess");
    if ($guess > $target) {
        print p ("$guess is too high; try again: ", textfield("guess")), "\n";
    } elsif ($guess < $target) {
        print p ("$guess is too low; try again: ", textfield("guess")), "\n";
    } else {
        print p ("You got it: $guess!");
        //erase value from file
    }
print end_form, "\n", hr;
}
print end_html, "\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:40:12.410

虽然当然可以将值存储在纯文本文件中，但您确实需要牢记 Web 类型环境面临的并发问题。第一个问题是您需要每个用户的会话 ID，它通常在隐藏字段或 cookie 中来回传递。该会话 ID 需要与此平面文件中的目标编号一起存储，以便您可以识别哪个幻数对应于哪个会话。在一段时间不活动后，您需要删除该号码。这是很多工作，甚至还没有开始解决同时出现多个点击的问题。您将不得不处理文件锁定等问题。

更明智的方法是简单地将幻数作为隐藏字段或在 cookie 中来回传递。不过，隐藏字段会容易得多。然后使用[Crypt::Rijndael](http://search.cpan.org/perldoc?Crypt%3a%3aRijndael)等模块在传递之前对幻数进行加密，并在接收时解密。...如果这看起来比您真正需要的安全性要高得多，您可以提出自己的策略，例如 base64 编码或类似的东西；重量更轻，但对于普通观众来说已经足够了。

这避免了跟踪用户会话的需要；每个用户都以嵌入在猜测表单中的隐藏字段的形式拥有自己的会话。

**更新：** 如果未指定驱动程序，[CGI::Session默认将会话信息存储在平面文件中。](http://search.cpan.org/perldoc?CGI%3a%3aSession)这抽象出并发和会话管理的细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:39:49.487

使用[open](http://perldoc.perl.org/functions/open.html)打开文件。

```
use strict;

# Get number
open(my $infh, '<', '/path/to/file') or die "Cannot open: $!";
my $number = <$infh>;
close($infh);
chomp($number); # removes newline, just in case

# Save number
open(my $outfh, '>', '/path/to/file') or die "Cannot open: $!";
print $outfh $number;
close($outfh); 
```

# google-maps-api-3 - 错误消息：提供的密钥不是有效的 Google API 密钥，或者未授权此站点上的 Google Maps Javascript API v3

> ID：11531607
> 
> 赞同：0
> 
> 时间：2012-07-17T22:12:39.573
> 
> 标签：google-maps-api-3

我是一个新手——我相信这很明显。
我在论坛上找到了同样问题的人，但没有解决。
我今天拿到了钥匙。我设置了一个允许的推荐人 (star.pathsofgrowth.org/star) 我复制了 map-simple.html 的代码并添加了我的 API 密钥并更改了经度、纬度坐标。该文件是[http://pathsofgrowth.org/Maps/PhoenixMeditationMap.html](http://pathsofgrowth.org/Maps/PhoenixMeditationMap.html)。
地图开始显示，然后被覆盖并显示上面的消息（以及更多关于获取密钥的信息）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:12:36.260

URL (pathsofgrowth.org) 与您在问题中引用的引荐来源 (star.pathsofgrowth.org) 不匹配，因此不允许。引用者需要使用通配符，包括一个 final`/*`以匹配最终指定文件夹中的任何文件/文件夹。

要匹配[http://pathsofgrowth.org/Maps/PhoenixMeditationMap.html](http://pathsofgrowth.org/Maps/PhoenixMeditationMap.html)的 URL，您的推荐人需要是

```
pathsofgrowth.org/* 
```

如果您*还*可以使用星号或 www 等子域访问地图，则还需要将其*添加*到允许的引荐来源列表中：

```
*.pathsofgrowth.org/* 
```

您可以根据需要深入到层次结构，但不要以单个文件结束。它需要是一个文件夹规范：

```
pathsofgrowth.org/Maps/* 
```

执行验证的 Javascript 区分大小写，因此如果您运行的 Windows 网络服务器在提供 URL 时不区分大小写，您还需要满足最常见的替换（所有小写开头）。

# javascript - 了解 javascript 对象

> ID：11531608
> 
> 赞同：1
> 
> 时间：2012-07-17T22:12:43.187
> 
> 标签：javascript

我有一个我认为非常基本的 javascript 问题，出于某种愚蠢的原因，我正在努力解决这个问题。

如果你想象下面的对象。如何从“init”函数内部调用一个函数？

```
TC.design = {

        init : function(){
            //How would I run the loadPage function here? 
        },
        loadPage : function(){

        }
} 
```

我试过 this.loadPage(); 我希望它可以工作，但它返回未定义。

我显然没有在这里掌握一些基本的东西，希望有人能解释一下。

**编辑：** 现在解决了...

感谢**Joseph Silber**和**Rocket**，我意识到了我的错误......

问题是由于对 javascript .call() 函数的误解而出现的。我打电话`init`给`TC.design.init.call()`我现在理解是不正确的。我很抱歉....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:17:02.477

这行不通吗？

```
TC.design = {
        init : function(){
            TC.design.loadPage();
        },
        loadPage : function(){
           alert('Booga')
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:21:43.700

`this.loadPage`应该可以正常工作，除非您更改`this`.

例如：

```
setTimeout(function(){
    TC.design.init();
}, 1000); 
```

这将正常工作。当`init`被调用时，`this`是`TC.design`。

```
setTimeout(TC.design.init, 1000); 
```

这行不通。现在，`this`将在`window`里面`init`。因此，`this.loadPage`不会工作。

所以，要小心你如何调用`TC.design.init`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T00:35:33.633

在你的`init`函数中，`this`指的是`TG.design`对象；`this.loadPage()`应该可以工作，但是您必须`init`正确调用该函数才能调用它。

这是一些示例代码：

```
var TC = {
    design: {
        init: function() {
            this.loadPage();
        },
        loadPage: function() {
            conosle.log('Works');
        }
    }
};

TC.design.init();​ 
```

这是小提琴：http: [//jsfiddle.net/85AWT/](http://jsfiddle.net/85AWT/)

# javascript - 需要帮助理解 Javascript 中的（词法）变量范围

> ID：11531610
> 
> 赞同：3
> 
> 时间：2012-07-17T22:12:46.547
> 
> 标签：javascript, scope, lexical

我有一个使用 NodeJS 执行的 .js 文件。这是我的文件的内容：

```
var ctry = "America";

function outer(msg) {
    console.log(msg + " " + ctry) ;
    var ctry = "Canada" ;
}
outer("God Bless"); 
```

当我运行这个文件时，我希望看到“God Bless America”，但相反，我看到了“God Bless undefined”。

如果我注释掉内部 var ctry = 行，我得到“上帝保佑美国”，如果我将内部 var ctry = 行移到 console.log 上方，我得到“上帝保佑加拿大”。最后两种情况看起来合乎逻辑，但为什么在 console.log 之后的 var ctry 的定义会导致 ctry 在上面的代码中被设置为 underfined？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:14:53.070

局部变量的范围（`ctry`在您的情况下）是声明它的*整个*函数（也就是说，就好像变量是在函数顶部声明的）。您上面的代码在语义上与：

```
function outer(msg) {
    var ctry ;
    console.log(msg + " " + ctry) ;
    ctry = "Canada" ;
} 
```

现在应该清楚为什么要进入`undefined`输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:17:11.227

当你说`var ctry`在函数内部时（只要它在函数内部，在哪里都没有关系），那么发生的情况是`ctry`在函数内部进行的任何调用（同样，在哪里都无关紧要）将引用内部变量，而不是全球的。问题是，JS 解释器只看到一个变量的定义，但在执行该行之前不会用值（加拿大）初始化它，所以`console.log`它还没有定义。

# android - Android 中的 Tesseract 错误

> ID：11531613
> 
> 赞同：-1
> 
> 时间：2012-07-17T22:12:54.377
> 
> 标签：android, tesseract

我正在按照本教程将 tesseract 包含在我的 android 应用程序中。以下是我的活动代码：

```
package com.MyApp;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import com.googlecode.tesseract.android.TessBaseAPI;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.res.AssetManager;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Matrix;
import android.media.ExifInterface;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.provider.MediaStore.Images.Media;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class OCRExample extends Activity {
    protected Button _button;
    protected ImageView _image;
    protected TextView _field;
    protected String _path;
    protected boolean _taken;

    protected static final String PHOTO_TAKEN = "photo_taken";
    private static final int TAKE_PHOTO_CODE = 1;
    public static final String PACKAGE_NAME = "com.datumdroid.android.ocr.simple";
    public static final String DATA_PATH = Environment
            .getExternalStorageDirectory().toString() + "/SimpleAndroidOCR/";
    public static final String lang = "eng";

    private static final String TAG = "SimpleAndroidOCR.java";

    @Override
    public void onCreate(Bundle savedInstanceState) {       
        String[] paths = new String[] { DATA_PATH, DATA_PATH + "tessdata/" };
        for (String path : paths) {
            File dir = new File(path);
            if (!dir.exists()) {
                if (!dir.mkdirs()) {
                    Log.v(TAG, "ERROR: Creation of directory " + path + " on sdcard failed");
                    return;
                } else {
                    Log.v(TAG, "Created directory " + path + " on sdcard");
                }
            }

        }       

        if (!(new File(DATA_PATH + "tessdata/" + lang + ".traineddata")).exists()) {
            try {
                AssetManager assetManager = getAssets();
                InputStream in = assetManager.open("tessdata/eng.traineddata");
                //GZIPInputStream gin = new GZIPInputStream(in);
                OutputStream out = new FileOutputStream(DATA_PATH
                        + "tessdata/eng.traineddata");

                // Transfer bytes from in to out
                byte[] buf = new byte[1024];
                int len;
                //while ((lenf = gin.read(buff)) > 0) {
                while ((len = in.read(buf)) > 0) {
                    out.write(buf, 0, len);
                }
                in.close();
                //gin.close();
                out.close();

                Log.v(TAG, "Copied " + lang + " traineddata");
            } catch (IOException e) {
                Log.e(TAG, "Was unable to copy " + lang + " traineddata " + e.toString());
            }
        }       
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.ocrexample);

        _image = ( ImageView ) findViewById( R.id.image );
        _field = ( TextView ) findViewById( R.id.field );
        _button = ( Button ) findViewById( R.id.button );        
         _path = DATA_PATH + "/ocr.jpg";    
    }

    public void takepic(View v){    
            startCameraActivity();      
    }

    protected void startCameraActivity()
    {
        File file = new File(_path);
        Uri outputFileUri = Uri.fromFile(file);

        final Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
        intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri);

        startActivityForResult(intent, 0);
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) 
    {   
        Log.i(TAG, "resultCode: " + resultCode);

        if (resultCode == -1) {
            onPhotoTaken();
        } else {
            Log.v(TAG, "User cancelled");
        }
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        outState.putBoolean(OCRExample.PHOTO_TAKEN, _taken);
    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        Log.i(TAG, "onRestoreInstanceState()");
        if (savedInstanceState.getBoolean(OCRExample.PHOTO_TAKEN)) {
            onPhotoTaken();
        }
    }

    protected void onPhotoTaken() {
        _taken = true;

        BitmapFactory.Options options = new BitmapFactory.Options();
        options.inSampleSize = 4;

        Bitmap bitmap = BitmapFactory.decodeFile(_path, options);

        try {
            ExifInterface exif = new ExifInterface(_path);
            int exifOrientation = exif.getAttributeInt(
                    ExifInterface.TAG_ORIENTATION,
                    ExifInterface.ORIENTATION_NORMAL);

            Log.v(TAG, "Orient: " + exifOrientation);

            int rotate = 0;

            switch (exifOrientation) {
            case ExifInterface.ORIENTATION_ROTATE_90:
                rotate = 90;
                break;
            case ExifInterface.ORIENTATION_ROTATE_180:
                rotate = 180;
                break;
            case ExifInterface.ORIENTATION_ROTATE_270:
                rotate = 270;
                break;
            }

            Log.v(TAG, "Rotation: " + rotate);

            if (rotate != 0) {

                // Getting width & height of the given image.
                int w = bitmap.getWidth();
                int h = bitmap.getHeight();

                // Setting pre rotate
                Matrix mtx = new Matrix();
                mtx.preRotate(rotate);

                // Rotating Bitmap
                bitmap = Bitmap.createBitmap(bitmap, 0, 0, w, h, mtx, false);
            }

            // Convert to ARGB_8888, required by tess
            bitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);

        } catch (IOException e) {
            Log.e(TAG, "Couldn't correct orientation: " + e.toString());
        }

        // _image.setImageBitmap( bitmap );

        Log.v(TAG, "Before baseApi");

        TessBaseAPI baseApi = new TessBaseAPI();
        baseApi.setDebug(true);
        baseApi.init(DATA_PATH, lang);
        baseApi.setImage(bitmap);

        String recognizedText = baseApi.getUTF8Text();

        baseApi.end();

        _field.setText(recognizedText);     // Cycle done.
    }   
} 
```

我收到以下错误：

```
07-17 14:22:49.124: E/AndroidRuntime(15702): FATAL EXCEPTION: main
07-17 14:22:49.124: E/AndroidRuntime(15702): java.lang.ExceptionInInitializerError
07-17 14:22:49.124: E/AndroidRuntime(15702):    at com.MyApp.OCRExample.onPhotoTaken(OCRExample.java:210)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at com.MyApp.OCRExample.onActivityResult(OCRExample.java:134)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.app.Activity.dispatchActivityResult(Activity.java:4723)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.app.ActivityThread.deliverResults(ActivityThread.java:3175)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:3222)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.app.ActivityThread.access$1100(ActivityThread.java:134)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1263)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.os.Handler.dispatchMessage(Handler.java:99)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.os.Looper.loop(Looper.java:137)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at android.app.ActivityThread.main(ActivityThread.java:4697)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at java.lang.reflect.Method.invokeNative(Native Method)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at java.lang.reflect.Method.invoke(Method.java:511)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at dalvik.system.NativeStart.main(Native Method)
07-17 14:22:49.124: E/AndroidRuntime(15702): Caused by: java.lang.UnsatisfiedLinkError: Couldn't load lept: findLibrary returned null
07-17 14:22:49.124: E/AndroidRuntime(15702):    at java.lang.Runtime.loadLibrary(Runtime.java:365)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at java.lang.System.loadLibrary(System.java:535)
07-17 14:22:49.124: E/AndroidRuntime(15702):    at com.googlecode.tesseract.android.TessBaseAPI.<clinit>(TessBaseAPI.java:47) 
```

我的项目缺少什么？我的代码中的第 210 行（发生错误的地方）是这样的：

```
TessBaseAPI baseApi = new TessBaseAPI(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T20:36:52.547

错误消息说明了您需要的所有内容，找不到 leptonica（特别是 liblept.so），请确保您在运行时有该库可用（检查正确导入的库项目）

# python - 如何修复 ValueError：读取已关闭文件异常？

> ID：11531617
> 
> 赞同：9
> 
> 时间：2012-07-17T22:13:17.093
> 
> 标签：python, python-3.x, urllib

这个简单的**Python 3**脚本：

```
import urllib.request

host = "scholar.google.com"
link = "/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0"
url = "http://" + host + link
filename = "cite0.bib"
print(url)
urllib.request.urlretrieve(url, filename) 
```

引发此异常：

```
Traceback (most recent call last):
  File "C:\Users\ricardo\Desktop\Google-Scholar\BibTex\test2.py", line 8, in <module>
    urllib.request.urlretrieve(url, filename)
  File "C:\Python32\lib\urllib\request.py", line 150, in urlretrieve
    return _urlopener.retrieve(url, filename, reporthook, data)
  File "C:\Python32\lib\urllib\request.py", line 1597, in retrieve
    block = fp.read(bs)
ValueError: read of closed file 
```

我认为这可能是一个临时问题，所以我添加了一些简单的异常处理，如下所示：

```
import random
import time
import urllib.request

host = "scholar.google.com"
link = "/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0"
url = "http://" + host + link
filename = "cite0.bib"
print(url)
while True:
    try:
        print("Downloading...")
        time.sleep(random.randint(0, 5))
        urllib.request.urlretrieve(url, filename)
        break
    except ValueError:
        pass 
```

但这只是`Downloading...`无限打印。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:56:46.293

您的 URL 返回 403 代码错误，显然[urllib.request.urlretrieve](http://docs.python.org/dev/library/urllib.request.html#urllib.request.urlretrieve)并不擅长检测所有 HTTP 错误，因为它正在使用[`urllib.request.FancyURLopener`](http://docs.python.org/dev/library/urllib.request.html#urllib.request.FancyURLopener)并且最新尝试通过返回`urlinfo`而不是引发错误来吞下错误。

关于修复，如果您仍想使用[urlretrieve](http://docs.python.org/dev/library/urllib.request.html#urllib.request.urlretrieve)，您可以像这样覆盖 FancyURLopener（包含的代码也显示错误）：

```
import urllib.request
from urllib.request import FancyURLopener

class FixFancyURLOpener(FancyURLopener):

    def http_error_default(self, url, fp, errcode, errmsg, headers):
        if errcode == 403:
            raise ValueError("403")
        return super(FixFancyURLOpener, self).http_error_default(
            url, fp, errcode, errmsg, headers
        )

# Monkey Patch
urllib.request.FancyURLopener = FixFancyURLOpener

url = "http://scholar.google.com/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0"
urllib.request.urlretrieve(url, "cite0.bib") 
```

否则，这是**我建议**您可以[`urllib.request.urlopen`](http://docs.python.org/dev/library/urllib.request.html#urllib.request.urlopen)这样使用的：

```
fp = urllib.request.urlopen('http://scholar.google.com/scholar.bib?q=info:K7uZdMSvdQ0J:scholar.google.com/&output=citation&hl=en&as_sdt=1,14&ct=citation&cd=0')
with open("citi0.bib", "w") as fo:
    fo.write(fp.read()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-21T14:19:12.390

如果您在托管云基础设施或托管安全服务上运行您的应用程序，请检查可能来自它们的限制。发生在我身上。云提供商有时会在可访问站点上设置白名单。

# java - VMWare API 获取事件

> ID：11531625
> 
> 赞同：1
> 
> 时间：2012-07-17T22:14:16.837
> 
> 标签：java, api, groovy, vmware, soapui

我需要从 Groovy 中的虚拟机获取事件。我发现[这个](http://communities.vmware.com/docs/DOC-10010)java 类显然列出了事件并允许我过滤它们，但它变得太复杂了，我认为这不是我真正需要的。我正在查看的是 CLI 调用的 java/groovy 版本：

```
$vc_events = Get-VIEvent -Server $vm | where {$_.CreatedTime -gt $lastEventTime -and $_.EventTypeId -like "com.SomepPlugin.event.*"} 
```

我发现的类的问题是我使用 Groovy 的 SoapUI 不喜欢在其 groovy 脚本中使用导入的 jar。即使 jar 文件位于适当的扩展文件夹中，它总是无法识别我尝试在 groovy 脚本中导入的类和包。我将不得不编写一个类似于上面链接中的 Groovy 类以使其工作，并且我想保持简单。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T19:40:43.487

[您可以针对doublecloud-proxy](http://www.doublecloud.org/doublecloud-proxy/)运行 PowerCLI 命令（甚至是 GUI 操作），它会为您生成 java。

# java - 如何为 Rhino / Java 6 脚本引擎模拟 DOM

> ID：11531630
> 
> 赞同：3
> 
> 时间：2012-07-17T22:14:29.330
> 
> 标签：java, javascript, dom

使用 Rhino / Java 6 的脚本引擎时：

```
ScriptEngine engine = manager.getEngineByName("JavaScript"); 
```

我的问题是当我评估一些脚本（通常是为浏览器环境编写的）时，脚本引擎崩溃，因为“窗口”没有定义，我完全理解，因为 DOM 是创建浏览器浏览器的东西。

但是，模拟/模拟 DOM 环境（例如“窗口”对象）的最佳方法是什么。

这可以在 Java 中完成（例如在 ScriptEngine / Java 中启用某些东西）还是我必须包含某种模拟 DOM 的 JavaScript？

目前为 Rhino/Java 6 脚本引擎模拟这个的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:16:28.827

DOM 是一个***巨大***的环境。浏览器中所有内容的完整模拟可能不可用。但是，请查看[将浏览器带到服务器](http://ejohn.org/blog/bringing-the-browser-to-the-server/)。如果这已得到维护，它可能足以满足您的目的。

# linux - Linux 删除超过 1 年的文件夹和超过 3 个文件

> ID：11531631
> 
> 赞同：4
> 
> 时间：2012-07-17T22:14:49.940
> 
> 标签：linux, ant, ssh, find, archive

我正在编写一个 ant 脚本来清理存档文件夹

以下是我需要清理的方法：我需要删除超过一定天数的文件夹，并且其中包含 3 个以上的文件。因此，例如，如果一个文件夹已有 300 天的历史，但只有 3 个文件，那么它将不会被删除。

我知道我可以 ssh 进入存档并`find -mtime +365 -exec rm -rf {} ;\`删除超过 1 年的文件，但我不知道如何计算至少 3 个文件

我也知道这`find -type f | wc -l`将列出文件的数量，但这在脚本方面并没有真正的帮助

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T17:45:28.220

ANT[选择](http://ant.apache.org/manual/Types/selectors.html)器使您能够自定义要删除的文件集。

尝试以下操作：

```
<target name="purge">

    <tstamp>
        <format property="touch.time" pattern="MM/dd/yyyy hh:mm aa" offset="-300" unit="day"/>
    </tstamp>

    <delete>
        <fileset dir="${src.dir}">
            <date datetime="${touch.time}" when="before"/>

            <scriptselector language="javascript"><![CDATA[
                if (file.getParentFile().list().length > 3) {
                    self.setSelected(true);
                }
                else {
                    self.setSelected(false);
                }
            ]]> </scriptselector>
        </fileset>
    </delete>
</target> 
```

# c# - 具有选定值和自动完成的组合框

> ID：11531633
> 
> 赞同：0
> 
> 时间：2012-07-17T22:14:53.600
> 
> 标签：c#, winforms, autocomplete, combobox, selectedvalue

有 1 个用于产品的数据网格视图和 1 个用于类别的组合框，我已将组合框选定值设置为 CategoryID。

当我在组合框中键入类别名称的第一个字母并按 Enter 时，名称在组合框内完成，但 datagridview 中的相关字段在我单击组合外部之前不会改变。

请问有没有办法让按Enter键在datagridview中执行更改，这样我就可以直接在保存按钮单击时保存修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T00:03:55.447

这样，gridview 可以通过调用从任何来源填充`FillGrid()`

```
 private void FilterComboBox_SelectedIndexChanged(object sender, EventArgs e)
    {
        string selText = FilterComboBox.SelectedValue.ToString();         
        FillGrid(selText);
    }

   private void FillGrid(string filterValue = "0")
   {
        //GetDefaultValues(if filtervalue = 0)
        //else GetValues(based On Selected category)
        //Bind Values to Grid
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T11:41:54.353

我可以在组合自动完成上按“Enter”键同时更新 Product bindingsource 中的 categoryID，方法是使用下一个事件：cboCategories_ **SelectedValueChanged**，如下所示：

```
 private void cboCategories_SelectedValueChanged(object sender, EventArgs e)
{
    int val = Convert.ToInt32(cboCategories.SelectedValue);
    ModifGrid(val);
}
private void ModifGrid(int ModifiedValue)
{
    if (Convert.ToInt32(productBindingSource.Count)>0)
    {
        ((Product)productBindingSource.Current).CategoryID = ModifiedValue;
    }
} 
```

单击 bindingsourceNavigator 中的保存按钮后，更改将持久保存到数据库中。

# mysql - 如何从同一张表MySQL中的选择中删除

> ID：11531634
> 
> 赞同：0
> 
> 时间：2012-07-17T22:14:56.307
> 
> 标签：mysql, sql

嗨，我有一个相当复杂的查询，我在 SQLite 中使用了很长时间。它是这样开始的：

```
delete FROM 
   verbal_sets 
WHERE verbal_sets.verbal_set_id IN( 
   SELECT 
       F.verbal_set_id 
   FROM verbal_sets AS F WHERE Exists( 
       SELECT 
         knowledge_id, phrase_id,first_entity_text, second_entity_text,verbal_relation_text, Count(verbal_set_id) 
       FROM
        (...) 
```

我现在正在创建同一软件的 MySQL 支持版本，但 MySQl 不喜欢这个查询。它返回错误：

```
[Err] 1093 - You can't specify target table 'verbal_sets' for update in FROM clause 
```

我对 MySQL 的细节没有经验。谁能指出我必须用这个查询做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-04T11:23:30.550

我希望这能帮到您，

```
delete FROM 
   verbal_sets 
WHERE verbal_set_id IN( 
   SELECT * 
    From( 
       SELECT knowledge_id, 
              phrase_id,
              first_entity_text, 
              second_entity_text, 
              verbal_relation_text, 
              Count(verbal_set_id) 
       FROM  verbal_sets
       ) as c
) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-17T22:24:02.333

只需跳过几行：

```
DELETE FROM 
   verbal_sets 
WHERE Exists( 
       SELECT 
         knowledge_id, phrase_id,first_entity_text, second_entity_text,verbal_relation_text, Count(verbal_set_id) 
       FROM 
```

# debugging - 元素间距调试

> ID：11531635
> 
> 赞同：0
> 
> 时间：2012-07-17T22:15:10.417
> 
> 标签：debugging, matlab

在计算 y 方向而不是 x 方向的像素之间的距离时，我遇到了一个愚蠢的错误。这应该更清楚：

```
% Distance matrix
for pxRow = 1:h % fixed pixel row
  for pxCol = 1:w % fixed pixel column   

    for r = 1:h % row of distant pixel
      for c = 1:w % column of distant pixel

        Rx(c,r) = sqrt((r-pxRow)^2);   % get distance to each pixel x direction
        Ry(c,r) = sqrt((c-pxCol)^2);   % get distance to each pixel y direction

      end
    end

    Rix(i) = {Rnx};
    Riy(i) = {Rny};
    i = i+1;
  end
end

Rix = reshape(Rix, w, h);
Riy = reshape(Riy, w, h); 
```

在哪里

```
Rix = 

NaN   1.000   0.500   0.333
NaN   1.000   0.500   0.333 
NaN   1.000   0.500   0.333 
```

这是正确的，但是

```
Riy = 

NaN   NaN   NaN   NaN
1.000 1.000 1.000 1.000 
1.000 1.000 1.000 1.000 
```

这是不正确的，因为我希望 Riy 只是 Rix 的轮换。

这里的错误在哪里？

提前致谢。

# objective-c - 检测拖动进入 UIView 的时间

> ID：11531636
> 
> 赞同：0
> 
> 时间：2012-07-17T22:15:16.610
> 
> 标签：objective-c, ios, uiview, drag, uitouch

我想识别用户何时将手指放在一个`UIView`，拖动到另一个`UIView`，然后释放。这些视图可以在同一个超级视图中的任意位置，并且可以有任意数量。

这似乎应该是一项简单的任务，但看起来 Apple 让它变得比必要的更难。所有的`touchesMoved`, `touchDragEnter`, 等等仅适用于源自相关视图的触摸。我已经看到涉及在超级视图中拦截触摸的解决方案，但是我在超级视图中有许多不需要此功能的子视图，因此我想尽可能避免在超级视图中拦截触摸。

是否有任何相当简单的方法来检测从其他地方拖入的触摸`UIView`？

# mysql - 数据库设计中的引擎

> ID：11531642
> 
> 赞同：0
> 
> 时间：2012-07-17T22:16:00.217
> 
> 标签：mysql

我正在尝试创建一个 innodb 数据库：

```
mysql> CREATE DATABASE imdb () ENGINE=InnoDB;
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that 
corresponds to your MySQL server version for the right syntax to use near '() 
ENGINE=InnoDB' at line 1 
```

[来自http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html](http://dev.mysql.com/doc/refman/5.5/en/myisam-storage-engine.html)的上述命令有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:19:32.930

只能为表指定数据库引擎，不能为数据库指定

[http://dev.mysql.com/doc/refman/5.5/en/create-database.html](http://dev.mysql.com/doc/refman/5.5/en/create-database.html)

所以当你创建数据库时——你没有指定它，当你创建一个表时——你指定了。

[http://dev.mysql.com/doc/refman/5.5/en/create-table.html](http://dev.mysql.com/doc/refman/5.5/en/create-table.html)

PS：在您提供链接的页面上是

```
CREATE TABLE t (i INT) ENGINE = MYISAM;
       ^----- table, not database 
```

# android - 没有 UI 的 Fragment 的用例是什么？

> ID：11531648
> 
> 赞同：49
> 
> 时间：2012-07-17T22:16:43.473
> 
> 标签：android, android-fragments

[Android 开发人员指南有一个关于Fragments](http://developer.android.com/guide/components/fragments.html)使用的不错的部分。使用 Fragments 的一种方法是没有 UI。有一些引用将其用作后台处理的手段，但是 Fragments 为该领域带来了哪些优势？我会选择在哪里使用 Fragment over Threads、AsyncTasks、Handlers 等进行后台处理？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-17T22:31:51.467

实例可以通过`Fragment`设备配置更改（如屏幕旋转）持续存在。因为`Activity`当配置更改发生时，an 将被销毁并重新创建，所以很难设计一个跟踪线程或`AsyncTask`. 另一方面，系统负责在配置更改的另一端（可以这么说）将持久性重新附加`Fragment`到正确的位置。`Activity`您仍然会使用线程或`AsyncTask`，只是现在才`Fragment`持有它。

它可能还有其他用途，但这是我能想到的。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-09-01T01:16:10.390

我有一大块相当复杂的代码来处理各种社交网络的登录 - facebook、google、twitter。这是我需要在不同活动中重复使用的代码，因为用户可以从应用程序的不同位置登录。它不属于基本活动类，因为您只能从一个类继承，而我将该继承用于其他不相关的功能。

无 ui 片段非常适合我的情况，片段非常适合需要，因为我需要生命周期回调，例如（facebook 在这方面臭名昭著，需要例如 onActivityResult 等）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-09-19T23:54:08.000

我同意格雷格·恩尼斯的观点。

我现在正在开发一个必须执行一系列 RESTful api 调用的应用程序。在大多数情况下，这些只是在一个活动中完成。但是我只是使用了一个无头片段来处理两个不同的活动，每个活动都需要进行相同的多次调用序列，当然，还要处理序列中任何地方的错误。通过将序列集中在一个片段中，我可以避免重复大量代码。

我们有另一个 api 调用，它返回了很多数据，这些数据现在都在 UI 线程上解析并且花费了太长时间。在后端 api 的未来版本中，服务器端将分页数据，我们的应用程序将需要进行一系列 api 调用才能获得完整的结果。我认为对于保留的无​​头片段来说，这将是一个很好的应用程序。发起活动可以启动无头片段和调用序列。如果第一次调用没有错误，该活动可以启动下一个活动，以显示初始结果，而片段只是不断地向服务器询问下一页数据。api 调用已经在后台线程上完成。我很确定保留的片段必须在自己的工作线程上运行。

[在了解片段的 setRetainInstance(boolean)](https://stackoverflow.com/questions/11182180/understanding-fragments-setretaininstanceboolean)中有更多关于保留片段的信息

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-04T05:51:28.800

这些也称为**无头片段**。[你可以在这里](http://luboganev.github.io/blog/headless-fragments/)阅读更多

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-12-04T07:20:45.227

**Headless Fragments 的一个非常有用的特性**

> Headless Fragments 有一个非常有用的特性——它们可以由 FragmentManager 在配置更改时保留。由于它们没有任何与之相关的 UI，因此例如当用户旋转设备时，它们不必被销毁和重新构建。为了激活这种行为，只需在初始化时设置片段的保留标志。这可以在 Fragment 的 onCreate 方法中完成。

* * *

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setRetainInstance(true);
} 
```

参考 - [https://luboganev.github.io/blog/headless-fragments/](https://luboganev.github.io/blog/headless-fragments/)

# c# - 数据绑定 ListView 的 ItemTemplate 中动态生成的列

> ID：11531650
> 
> 赞同：0
> 
> 时间：2012-07-17T22:16:55.130
> 
> 标签：c#, asp.net, listview, sqldatasource, itemtemplate

我的 ASP.NET Web 应用程序中有一个页面，它本质上是一个生成临时报告的工具。用户在众多标准中设置值，然后提交这些值以检索结果集。获取结果所需的 SQL 在运行时生成；在代码中，我使用 SQL 创建一个 SqlDataSource，然后将其绑定到 ListView。到目前为止，一切都运行良好。

然后，我无法弄清楚如何为 ListView 动态生成列。问题在于我在编译时不知道列的编号/名称，因为它们取决于动态生成的 SQL 的输出。我认为这将是一个非常简单的小练习，但我似乎找不到一个简化的例子来说明如何做到这一点。

我现有的代码几乎是无关紧要的，因为我基本上要求的是基础示例。我什至不确定我的方法是否正确——即，在标记中使用 ListView 并尝试在运行时在代码中操作其模板。这里有一些片段，但是......

这是我生成 SQL 的方法，仅供参考：

```
 public static string GetReportSQL(HttpContext c = null)
    {
        if (c.Equals(null)) c = HttpContext.Current;

        string report_id = c.Request.Params["report_id"].ToString();
        string select_list = null;
        string where_list = null;
        string field = null;
        string criteria_value = null;

        POST.App_Objects.Report report = new POST.App_Objects.Report();
        POST.App_Objects.Report report_fields = new POST.App_Objects.Report();
        DataSet rds = report.GetReport_Summary_ByID(Int32.Parse(report_id));
        DataSet rfds = report_fields.GetReportFields(Int32.Parse(report_id));

        foreach (DataRow f in rfds.Tables[0].Rows)
        {
            field = f["report_field_name"].ToString();

            if (!String.IsNullOrEmpty(c.Request["show_field__" + field]))
            {
                select_list += (!String.IsNullOrEmpty(select_list) ? ", " : null) + field + " AS '" + f["report_field_title"].ToString() + "'";
            }
            if (!String.IsNullOrEmpty(c.Request["criteria_value__" + field]))
            {
                criteria_value = c.Request["criteria_value__" + field].ToString();
                where_list += (!String.IsNullOrEmpty(where_list) ? " AND " : null) + field;

                switch (f["report_field_filter_type"].ToString())
                {
                    case FILTER_TYPE_SEARCH_TERM:
                        where_list += " LIKE '%" + criteria_value + "%'";
                        break;
                    case FILTER_TYPE_TEXT_LIST:
                        break;
                    case FILTER_TYPE_MULTIPLE_SELECT:
                        where_list += " IN ('" + criteria_value.Replace(",", "','") + "')";
                        break;
                }
            }
        }
        string sql = "SELECT " + select_list + " FROM " + rds.Tables[0].Rows[0]["report_definition_source"].ToString() + " WHERE " + where_list;
        return sql;
    } 
```

这是我的 ListView 控件的 Init 方法，它根据上面的 SQL 生成代码将它与 SqlDataSource 相关联：

```
 public void ReportResultListView_Init(object sender, ListViewEditEventArgs e)
    {
        ListView rlv = (ListView)ReportFormView.FindControl("ReportResultListView");
        SqlDataSource rds = new SqlDataSource(
            ConfigurationManager.ConnectionStrings["POST"].ConnectionString.ToString(),
            GetReportSQL(HttpContext.Current)
        );
        rlv.DataSource = rds;
        ListViewDataItem lvdi = new ListViewDataItem(0,0);
        rlv.Items.Add(lvdi);
        rlv.DataBind();
    } 
```

最后，这是我获得相关 ListView 的标记片段（位于 FormView 内，仅供参考）：

```
 <asp:ListView
        ID="ReportResultListView"
        OnInit="ReportResultListView_Init"
        runat="server">
        <ItemTemplate>
            <li><%# Eval("Organization Code").ToString() %></li>
        </ItemTemplate>
        <EmptyDataTemplate>
            Nothing.
        </EmptyDataTemplate>
    </asp:ListView> 
```

我有一个活页夹（“组织代码”）只是为了测试——我知道无论如何都会出现特定的列。澄清一下，我要在运行时指定要输出的字段，它们的名称是不同查询的结果......

我当然知道这是可能的，我只是没有看到适合我需要的示例。如果我对 .NET 不是那么陌生，我想这将是相当明显的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:14:27.500

迈克尔，给一个机会`GridView`。像这样在你的 ASPX 中创建它：

```
<asp:gridview id="gvReportResults" autogeneratecolumns="True" runat="server" ></asp:gridview> 
```

而且，在您的代码隐藏处：

```
gvReportResults.DataSource = rds;
gvReportResults.DataBind(); 
```

我不确定这是否足以解决您的问题，但这是一个好的开始。

问候

# mysql - 如果元素存在于两个数组之间，则斜体

> ID：11531651
> 
> 赞同：0
> 
> 时间：2012-07-17T22:17:00.853
> 
> 标签：mysql, arrays, comparison, intersection

我是这里的 MySQL 初学者。我正在寻找一个类似于实际的行和列板的表格，从 A1 到 C22（我也将这些坐标称为）。MySQL 脚本的结果类似于如下所示的排列（我实际上想在此处绘制一个表格，每个孔占据一个单元格以进行说明，但可以这样做）：

> *A1 A2 A3 A4 A5 A6 A7 A8 A9 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19 A20 A21 A22*
> 
> B1 B2 B3 B4 B5 B6 B7 B8 B9 B10 B11 B12 B13 B14 B15 B16 B17 B18 B19 B20 B21 B22
> 
> *C1 C2 C3 C4 C5 C6 C7 C8 C9 C10 C11 C12 C13 C14 C15 C16 C17 C18 C19 C20 C21 C22*

在实际数据库中，存在A1到A22和C1到C22的数据，因此必须如上表所示以斜体形式显示。我试图创建一个包含 A1 到 C22 的数组（我将其称为 $arr），并将该数组与包含 A1 到 A22 和 C1 到 C22 的数据库的另一个数组进行比较（我将其称为 $result）。我用了`array_intersect`在 $arr 的元素和数据库中的数组之间找到一个交集。如果存在，则 $arr 中的该元素必须以斜体显示。

这就是我的脚本的运行方式。我知道这是垃圾，但我试过了..

```
<?php
$con = mysql_connect("localhost","root","1234");

mysql_select_db("inhouse_collection", $con) or die (mysql_error());

$result = mysql_query("SELECT * from ft7 ORDER BY SUBSTRING(Plate_Loc, 1, 1) ,SUBSTRING(Plate_Loc, 2)+0"); 

$arr=array("A1","A2","A3","A4","A5","A6","A7","A8","A9","A10","A11","A12","A13","A14","A15","A16","A17","A18","A19","A20","A21","A22","B1","B2","B3","B4","B5","B6","B7","B8","B9","B10","B11","B12","B13","B14","B15","B16","B17","B18","B19","B20","B21","B22","C1","C2","C3","C4","C5","C6","C7","C8","C9","C10","C11","C12","C13","C14","C15","C16","C17","C18","C19","C20","C21","C22");

echo "<table border='1'>";

echo "<tr>"; 

$z= 0;

for( $i=0; $arr[$z++]; $i = ($i+1)) {
    if( array_intersect( $arr[$z-1], $result(Plate_Loc)) {
        echo "<td><i>". $arr[$z-1] ."</i></td>";
    }
    else
        echo "<td>" . $arr[$z-1] . "</td>";

    if($i == 21) 
        echo "</tr><tr>"; 
}

echo "</tr>";

echo "</table>";
?>
</div>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:36:03.533

首先将所有数据提取到数组中，然后用于`isset()`判断该键是否存在于数组中

```
/* Fetch all data in to an array */
$result = mysql_query("SELECT Plate_Loc from ft7 ORDER BY SUBSTRING(Plate_Loc, 1, 1) ,SUBSTRING(Plate_Loc, 2)+0"); 
$list = array();
while($row = mysql_fetch_assoc($result))
{
    $list[$row['Plate_Loc']] = TRUE;
}

echo "<table>";

/* loop trough all rows */
foreach(array('A','B','C') as $row_char)
{
    echo "<tr>";

    /* loop trough all columns */
    foreach(range(1, 22) as $col_nr)
    {
        /* check if this cell was in database */
        if(isset($list[$row_char . $col_nr]))
        {
            echo "<td><i>{$row_char}{$col_nr}</i></td>";
        }
        else
        {
            echo "<td>{$row_char}{$col_nr}</td>";
        }
    }

    echo "</tr>";
}

echo "</table>"; 
```

# jquery - 动画到位置不起作用

> ID：11531654
> 
> 赞同：0
> 
> 时间：2012-07-17T22:17:08.810
> 
> 标签：jquery

[http://jsfiddle.net/jX7An/3/](http://jsfiddle.net/jX7An/3/)

我有可以在上面的 jsfiddle 上看到的代码。由于某种原因，我无法让它动画化。谁能看到我做错了什么？

谢谢。

- 编辑 - 为了扩展，我正在寻找一些可以复制并飞离页面的东西（只是试图让它“飞”到此刻）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:19:57.080

```
$(this)
    .clone()
    .appendTo('body') // you must add the clone to the document
    .css({'position' : 'absolute', 'background-color' : '#F00'})
    .animate({opacity: 0.4}, 100 ).delay(100)
    .animate({opacity: 0.1, marginLeft: 100, marginTop: 500, width: 50, height: 50}, 100); 
```

您必须将`clone()`元素添加到文档中。

JSFiddle：http: [//jsfiddle.net/jX7An/8/](http://jsfiddle.net/jX7An/8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:18:56.993

您没有将克隆添加到正文中。

请参阅[http://jsfiddle.net/jX7An/10/](http://jsfiddle.net/jX7An/10/)。

# android - WAIT_FOR_CONCURRENT_GC 阻塞是什么意思？

> ID：11531657
> 
> 赞同：22
> 
> 时间：2012-07-17T22:17:21.727
> 
> 标签：android, garbage-collection, dalvik, blocked

我刚刚在我的 android 手机上进行了从 ICS (4.0.4) 到 JB (4.1) 的自动更新，当我运行我的应用程序时它引入了多个垃圾收集调用：

```
WAIT_FOR_CONCURRENT_GC blocked 30ms 
```

我在我的应用程序中流式传输视频，这些被阻止的 GC 调用几乎使我的延迟加倍，它们是什么意思？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-18T20:05:00.623

在几种情况下会发出该消息：

*   当用户代码显式调用 gc() 并且 gc 已经在进行中时。
*   当代码尝试进行分配但实际上内存中没有空间来容纳请求时，并且 gc 已经在进行中。

无论哪种情况，为了满足请求，第一步都是等待另一个线程中发生的热垃圾收集操作。一旦完成，线程就可以转移到更直接地要求它做的事情（这可能会导致进一步的垃圾收集）。

您可以在 platform/dalvik/vm/alloc 中找到显着的来源，尤其是 Heap.cpp 和 Alloc.cpp。

综上所述，我无法告诉您为什么您在 JB 中看到的停顿比在 ICS 中更多。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-31T16:28:11.137

这次我们没有在 JB 之前登录。您的应用程序的线程总是必须阻塞等待任何并发 GC 完成才能进行收集，但 JB 是第一个您可以看到它们何时执行以及您可以看到它们必须等待多长时间的版本。

# performance - 禁用 Apache Derby 的缓存

> ID：11531666
> 
> 赞同：0
> 
> 时间：2012-07-17T22:18:47.800
> 
> 标签：performance, caching, derby

我需要使用 Derby DB 进行一些性能测试。我想做几次测试运行，但是，除了第一次运行之外，所有运行都只需要几毫秒。我假设，Derby 的一些（查询结果）缓存服务于第一个查询之后的所有查询。

当然，这不是我想要的。我希望 Derby 一次又一次地执行语句，而不是缓存查询结果。

如何禁用 Derby 中的所有缓存以获得正确的性能测试结果？

亲切的问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:36:59.640

Derby 不缓存查询结果。它缓存语句执行计划；它缓存了数据库表中的一些页面；但它不会缓存查询结果。

我不知道您为什么认为禁用 Derby 中的所有缓存对于获得适当的性能结果是必要的。

# jquery - 为表格第一列的每个单元格分配边框

> ID：11531683
> 
> 赞同：0
> 
> 时间：2012-07-17T22:20:34.350
> 
> 标签：jquery

这是为表格中第一列的单元格分配边框的正确方法吗？

```
$(gridContentTable).find("tbody tr td[cellIndex=" + (frozenColCount - 1) + "]").css("border-right", freezeColStyle); 
```

编辑：更多信息：

这适用于标题中的第一个单元格：

```
$(tableHeaderCol).eq((frozenColCount - 1)).css("border-right", freezeColStyle); 
```

我用这个定义变量：

```
function getGridInfo() {
    gridHeaderTable = grid.find(".t-grid-header table");
    gridContentTable = grid.find(".t-grid-content table");
    tableHeaderGroupCol = $(gridHeaderTable).find("colGroup col");
    tableHeaderCol = $(gridHeaderTable).find("tbody tr th");
    tableContentGroupCol = $(gridContentTable).find("colGroup col");
    totalColCount = $(tableHeaderGroupCol).length;
} 
```

只有标题应用了 CSS，表格的内容没有。这最终将完成第一列中每一行的第一个单元格。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:24:06.443

```
$(gridContentTable).find("tbody tr td:nth-child(" + (frozenColCount - 1) + ")").css("border-right", freezeColStyle); 
```

":eq" 给出集合中的第 n 个元素。":nth-child" 给出集合中的每个第 n 个孩子。

[http://jsfiddle.net/5BmGU/](http://jsfiddle.net/5BmGU/)

# c# - 在 directx 着色器中设置定向照明

> ID：11531684
> 
> 赞同：0
> 
> 时间：2012-07-17T22:20:37.193
> 
> 标签：c#, directx, shader

试图学习着色器并让一个死的简单定向光源工作，但我只是变黑了。如果我返回 input.Col 一切都很好，所以我知道这与这些正常的计算有关，但完全不知道出了什么问题？我正在努力理解着色器，特别是从哪里获取/设置 matWorld 或者它应该是什么（我尝试将它设置为 Identity 矩阵），或者它是否是自己神奇地设置的东西。worldViewProj 我从代码设置

```
float4 vecLightDir = normalize(float4(1.0f, 1.0f, 1.0f,0.0f));
float4x4 worldViewProj : WORLDVIEWPROJECTION;
float4x4 matWorld : WORLD;

struct VS_IN
{
    float4 Pos : POSITION;
    float4 Col : COLOR0;
    float3 Norm : NORMAL;
};

struct PS_IN
{
    float4 Pos : POSITION;
    float4 Col : COLOR0;
    float3 Light: TEXCOORD0;
    float3 Norm : TEXCOORD1;
};

PS_IN VS( VS_IN input )
{
    PS_IN Out = (PS_IN)0; 
    Out.Pos = mul(input.Pos, worldViewProj);
    Out.Light = normalize(vecLightDir); 
    Out.Norm = -normalize(mul(input.Norm, matWorld));
    Out.Col = input.Col;
    return Out;
}

float4 PS(PS_IN input) : COLOR
{
    float4 result=input.Col *(dot(input.Norm,input.Light));

    return result;
}

technique TVertexAndPixelShader
{
    pass P0
    {
        // shaders
        VertexShader = compile vs_2_0 VS();
        PixelShader  = compile ps_2_0 PS();
    }  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T14:35:26.223

那么你有几个问题......

1）首先，像素着色器对整个三角形的光和法线向量进行线性插值。这意味着当您的矢量到达灯光着色器时，它们不再被标准化。

2）为什么要在顶点组件中通过顶点着色器传递光向量？为什么不将其作为常量发送到像素着色器，从而绕过任何插值问题？

# regex - 所有带有空格的字母表中所有字母的正则表达式，除此之外

> ID：11531686
> 
> 赞同：1
> 
> 时间：2012-07-17T22:20:55.437
> 
> 标签：regex, spaces, letters

我正在尝试使用 jQuery 制作名称字段过滤器，并且尝试了很多正则表达式，但没有一个可以完全正常工作。

我所需要的只是将名称字段设置为名称字段 - 仅此而已，例如 Adam Jeremy Smith。所以不可能输入 $ 或 / 或 _ 或 ~ 或 0-9 或其他任何东西？这该怎么做？

我认为应该是：

`/[^\\p{L}]+([^0-9])+$/`

是的，它只有在你输入“Adam Je4”时才有效，但如果你继续写“Adam Je4remy”，它就不起作用并且验证不正确？

如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T22:29:55.737

如果您将 name 定义为`something that consists of 1 or more words, separated by spaces, where each word consists of one or more letters, and starts with uppercase`，它的写法类似于...

```
/^[A-Z][a-z]+(\s+[A-Z][a-z]+)*$/ 
```

但它实际上要复杂得多，看 - 它不仅仅是关于字母（`\p{L}`在你的例子中；顺便说一句，JS 不支持属性 unicode 类，你必须使用插件（例如[这个](http://xregexp.com/plugins/#unicode)）来实现这样的功能）。

例如，你会允许在你的名字中使用撇号吗？如果是这样，如何使用它们（可能没有名字有两个撇号接近，像这样 - `I''van Ivanov`？连字符呢？不同的大写规则呢：例如，你会认为[brian d foy](https://stackoverflow.com/users/8817/brian-d-foy)是一个真实的名字吗？等等......

关键是您必须平衡您*实际*期望看到的内容与您的正则表达式的复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T22:30:10.500

严格限制这样的名称格式是不好的做法，因为它没有考虑到各种情况——名字中带有撇号和破折号的人，来自欧洲/亚洲国家的人使用额外的字符，等等。

有关更多信息，请参阅本文：[http ://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/](http://www.kalzumeus.com/2010/06/17/falsehoods-programmers-believe-about-names/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:26:26.557

答案是：/^[Az\s]+$/

# asp.net-mvc-3 - 模型中的 mvc3 httpcontext

> ID：11531690
> 
> 赞同：0
> 
> 时间：2012-07-17T22:22:13.740
> 
> 标签：asp.net-mvc-3, httpcontext

我目前在我的模型中引用 HttpContext。这是好习惯吗？我应该只传递我需要的信息吗？

例如，在我的模型代码中：

```
public void function()
{
 string param = HttpContext.Current.Request.QueryString["param"];
 if(param == "myexpectations") { ...}
}

Should be changed to:

public void function(string param) //avoid hard reference this way??
{
 if(param == "myexpectations") { ...}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:27:52.930

`HttpContext`在您的模型中引用不是一个好习惯。您不希望模型和`HttpContext`. 除其他外，这将使您的模型非常难以测试。我肯定会选择你的第二个选择。

如果您在操作方法中检索查询字符串值，则无需使用`HttpContext.Current.Request.QueryString`. 您可以允许 ASP.NET 的绑定机制将查询字符串值绑定到您的操作方法中的参数。例如，如果这是您的 URI：

```
http://localhost/Home/TestQueryString?param=ThisIsATestValue 
```

假设您的路由设置正确，您可以像这样创建控制器和操作，MVC 会将查询字符串值绑定`"ThisIsATestValue"`到参数`param`。

```
public class HomeController : Controller
{
    public ActionResult TestQueryString(string param)
    {
        string fromHttpContext = HttpContext.Current.Request.QueryString["param"];

        // result will be set to true
        bool result = param == fromHttpContext;
        return new EmptyResult();
    }
} 
```

# ubuntu - 补丁：补丁输入中只发现垃圾

> ID：11531693
> 
> 赞同：19
> 
> 时间：2012-07-17T22:22:39.937
> 
> 标签：ubuntu, diff, patch

我用命令生成了一个 diff.txt 文件（从 ~ 执行）：

```
diff -r /full/path/to/directory/A /full/path/to/directory/B > diff.txt 
```

生成的差异文件看起来不错。

现在我跑（总是从〜）

```
patch -p0 <diff.txt 
```

或者我也试过：

```
patch <diff.txt 
```

我希望它将更改应用于 /full/path/to/directory/A 中的文件，以便在操作后它们与 /full/path/to/directory/B 中的文件相同

但它只说： ***在补丁输入中只发现垃圾。

我错过了什么？

编辑：这是整个差异文件：

```
diff /media/DATA/lavoro/eclipse_workspace/ODK Collect/src/net/xxx/collect/android/activities/FormEntryActivity.java /media/DATA/lavoro/xxx/backups/odk src embedded maps/net/xxx/collect/android/activities/FormEntryActivity.java
21a22,27
> 
> import com.google.android.maps.GeoPoint;
> import com.google.android.maps.MapActivity;
> import com.google.android.maps.MapView;
> import com.google.android.maps.MyLocationOverlay;
> 
36a43
> import net.xxx.collect.android.widgets.GeoPointWidget;
50a58,60
> import android.location.Location;
> import android.location.LocationListener;
> import android.location.LocationManager;
86a97
> import java.util.List;
96,97c107,108
< public class FormEntryActivity extends Activity implements AnimationListener, FormLoaderListener,
<         FormSavedListener, AdvanceToNextListener, OnGestureListener {
---
> public class FormEntryActivity extends MapActivity implements AnimationListener, FormLoaderListener,
>         FormSavedListener, AdvanceToNextListener, OnGestureListener, LocationListener  {
115a127,133
>     
>     // Release:
>     private static final String GMAPS_API_KEY="0SH1_CwvF7Nn4_kT8NcGTc8vMCjrqIdpXOjSqcA";
> 
>     // Debug:
>     //private static final String GMAPS_API_KEY="0SH1_CwvF7Nm8oPeWuNskdKCKKWZ1VlGx6mqTfg";
> 
162a181,190
>     
>     private MapView mMapView;
>     private boolean mGPSOn = false;
>     private boolean mNetworkOn = false;
>     private MyLocationOverlay mLocationOverlay;
>     private LocationManager mLocationManager;
>     private Location mLocation;
>     private GeoPoint mGeoPoint;
>     
>     private boolean flingEnabled=true;
171a200
>       Log.d(t, "onCreate "+(savedInstanceState==null?"":" with savedInstanceState"));
207a237,240
>                 Log.d(t, "savedInstanceState "+(newForm?"seems":"does not seem")+" to be a new form");
>             }
>             else {
>               Log.d(t, "savedInstanceState does not have a newForm key");
223a257
>           Log.d(t,"Last non configuration instance is a FormLoaderTask");
225a260
>           Log.d(t,"Last non configuration instance is a SaveToDiskTask");
227a263
>           Log.d(t,"Last non configuration instance is null");
228a265
>               Log.d(t,"  and the form is not new");
298a336,360
>         
>         
>         mLocationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
>         List<String> providers = mLocationManager.getProviders(true);        
>         for (String provider : providers) {
>             if (provider.equalsIgnoreCase(LocationManager.GPS_PROVIDER)) {
>                 mGPSOn = true;
>             }
>             if (provider.equalsIgnoreCase(LocationManager.NETWORK_PROVIDER)) {
>                 mNetworkOn = true;
>             }
>         }
>         if (!mGPSOn && !mNetworkOn) {
>             Toast.makeText(getBaseContext(), getString(R.string.provider_disabled_error),
>                 Toast.LENGTH_SHORT).show();
>             //finish();
>         }
>         
>     }
>     
>     public void enableFling() {
>       flingEnabled=true;
>     }
>     public void disableFling() {
>       flingEnabled=false;
300d361
< 
303a365
>       Log.d(t,"onSavedInstanceState");
312a375
>       Log.d(t,"onActivityResult "+requestCode+" "+resultCode+" "+intent.getAction());
457a521
>       Log.d(t,"refreshCurrentView");
610a675
>       Log.d(t,"onRetainNonConfigurationInstance");
612,613c677,680
<         if (mFormLoaderTask != null && mFormLoaderTask.getStatus() != AsyncTask.Status.FINISHED)
<             return mFormLoaderTask;
---
>         if (mFormLoaderTask != null && mFormLoaderTask.getStatus() != AsyncTask.Status.FINISHED){
>           Log.d(t,"  returning mFormLoaderTask");
>             
>           return mFormLoaderTask;
614a682,683
>         }
>           
616,618c685,689
<         if (mSaveToDiskTask != null && mSaveToDiskTask.getStatus() != AsyncTask.Status.FINISHED)
<             return mSaveToDiskTask;
< 
---
>         if (mSaveToDiskTask != null && mSaveToDiskTask.getStatus() != AsyncTask.Status.FINISHED) {
>           Log.d(t,"  returning mSaveToDisk");
>         
>           return mSaveToDiskTask;
>         }
620a692
>           Log.d(t,   "  just saving answers. No need to pass mFormController");
622a695
>         Log.d(t,"  returning null");
772c845
<     private void showNextView() {
---
>     public void showNextView() {
1316a1390,1391
>         mLocationManager.removeUpdates(this);
>         if (mLocationOverlay!=null) mLocationOverlay.disableMyLocation();
1322a1398
>       Log.d(t,"nResume");
1323a1400,1407
>         if (mLocationOverlay!=null) mLocationOverlay.enableMyLocation();
>         if (mGPSOn) {
>             mLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, this);
>         }
>         if (mNetworkOn) {
>             mLocationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this);
>         }
>         
1337a1422,1426
>         
>         
>         
> 
>         
1367a1457,1477
>       Log.d(t,"---- onDestroy ----");
>       boolean problem=false;
>       if (mFormLoaderTask != null && mFormLoaderTask.getStatus() != AsyncTask.Status.FINISHED){
>           Log.d(t,"  I wish I could retain mFormLoaderTask");
>             problem=true;
>         }
>       else if (mSaveToDiskTask != null && mSaveToDiskTask.getStatus() != AsyncTask.Status.FINISHED) {
>           Log.d(t,"  I wish I could retain mSaveToDisk");
>           problem=true;
>         }
>       else if (mFormController != null && currentPromptIsQuestion()) {
>           Log.d(t,   "  I wish I had the opportunity to save answers");
>           problem=true;
>         }
>       
>       if (!problem) Log.d(t,"  everything seems ok");
>         
>         
>         
>       
>       
1369c1479
<             mFormLoaderTask.setFormLoaderListener(null);
---
>           mFormLoaderTask.setFormLoaderListener(null);
1373a1484
>               Log.d(t,"  Cancelling and destroying form loader task");
1376a1488,1489
>             else Log.d(t,"  Not cancelling form loader task because it's not done");
>             
1382a1496
>               Log.d(t,"  Cancelling save to disk task");
1394a1509,1512
>         if (mCurrentView!=null && mCurrentView instanceof ODKView)
>           for (QuestionWidget qw : ((ODKView) mCurrentView).getWidgets()) {
>               qw.onInAnimationDone();
>             }
1607c1725,1726
<         if (Math.abs(e1.getX() - e2.getX()) > 60 && Math.abs(e1.getY() - e2.getY()) < 60) {
---
>         if (!flingEnabled) return false;
>       if (Math.abs(e1.getX() - e2.getX()) > 60 && Math.abs(e1.getY() - e2.getY()) < 60) {
1631c1750
<         // We don't wnat that, so cancel it.
---
>         // We don't want that, so cancel it.
1645a1765,1842
> 
> 
>   @Override
>   protected boolean isRouteDisplayed() {
>       // TODO Auto-generated method stub
>       return false;
>   }
>   
>   public MapView getMapView() {
>       if (mMapView==null) {
>           Log.d("FormEntryActivity", "Creating MapView");
>           mMapView=new MapView(this, GMAPS_API_KEY);
>           mMapView.setBuiltInZoomControls(true);
>           mMapView.setSatellite(false);
>           mMapView.getController().setZoom(16);
>           createLocationOverlay();
>       }
>       return mMapView;
>   }
>   public MyLocationOverlay getLocationOverlay() {
>       return mLocationOverlay;
>   }
>   
>   public void createLocationOverlay() {
>       Log.d("FormEntryActivity", "createLocationOverlay");
>       mLocationOverlay=new MyLocationOverlay(this,mMapView);
>         mMapView.getOverlays().add(mLocationOverlay);
>         mLocationOverlay.enableMyLocation();
>   }
> 
> 
>   @Override
>   public void onLocationChanged(Location location) {
>         if (true) {
>           Log.d("FormEntryActivity", "onLocationChanged");
>             mLocation = location;
>             if (mLocation != null) {
>                
>                 mGeoPoint =
>                     new GeoPoint((int) (mLocation.getLatitude() * 1E6),
>                             (int) (mLocation.getLongitude() * 1E6));
>                 if (mCurrentView!=null && mCurrentView instanceof ODKView)
>                   for (QuestionWidget qw : ((ODKView) mCurrentView).getWidgets()) {
>                       if (qw instanceof GeoPointWidget) {
>                           ((GeoPointWidget)qw).onLocationChanged();
>                       }
>                   }
>                 
>             }
>         }
>     }
>   public GeoPoint getGeoPoint() {
>       return mGeoPoint;
>   }
>   public Location getLocation() {
>       return mLocation;
>   }
> 
> 
>   @Override
>   public void onProviderDisabled(String provider) {
>       // TODO Auto-generated method stub
>       
>   }
> 
> 
>   @Override
>   public void onProviderEnabled(String provider) {
>       // TODO Auto-generated method stub
>       
>   }
> 
> 
>   @Override
>   public void onStatusChanged(String provider, int status, Bundle extras) {
>       // TODO Auto-generated method stub
>       
>   }
diff -r /media/DATA/lavoro/eclipse_workspace/ODK Collect/src/net/xxx/collect/android/widgets/GeoPointWidget.java /media/DATA/lavoro/xxx/backups/odk src embedded maps/net/xxx/collect/android/widgets/GeoPointWidget.java
19a20,24
> 
> import com.google.android.maps.GeoPoint;
> import com.google.android.maps.MapView;
> import com.google.android.maps.Overlay;
> 
27a33
> import android.location.Location;
31a38
> import android.view.ViewGroup;
34a42
> import android.widget.RelativeLayout;
37a46
> import java.util.List;
47a57
>     private Button mAcceptButton;
55c65,73
< 
---
>     
>     private MapView mMapView;
>     private FormEntryActivity mFEA;
>     private TextView mLocationStatus;
>    
>     private RelativeLayout mMapContainerLayout;
>     
>     private LinearLayout.LayoutParams lp;
>     RelativeLayout.LayoutParams rlp;
59c77,79
< 
---
>         
>         
>         
113c133
<         if (mAppearance != null && mAppearance.equalsIgnoreCase("maps")) {
---
>         if (mAppearance == null || mAppearance.equalsIgnoreCase("maps")) {
133,141c153
<                 Intent i = null;
<                 if (mUseMaps) {
<                     i = new Intent(getContext(), GeoPointMapActivity.class);
<                 } else {
<                     i = new Intent(getContext(), GeoPointActivity.class);
<                 }
<                 ((Activity) getContext()).startActivityForResult(i,
<                     FormEntryActivity.LOCATION_CAPTURE);
<                 mWaitingForData = true;
---
>                 launchMap();
148,149c160,186
< 
<         addView(mGetLocationButton);
---
>         mFEA=(FormEntryActivity)context;
>         //addView(mGetLocationButton);
>         Log.d("GeoPointWidget","Adding ViewMap in constructor");
>         
>         setUpMapContainer();
>     }
>     
>     protected void setUpMapContainer() {
>       lp=new LinearLayout.LayoutParams(LinearLayout.LayoutParams.MATCH_PARENT, LinearLayout.LayoutParams.MATCH_PARENT);
>       lp.setMargins(0, 0, 0, 0);
>       
>       rlp=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
>       rlp.setMargins(0, 0, 0, 0);
>       
>       mMapContainerLayout=new RelativeLayout(mFEA);
>       mMapContainerLayout.setLayoutParams(lp);
>       
>       this.addView(mMapContainerLayout);
>     }
>     
>     @Override
>     protected void addQuestionText(FormEntryPrompt p) {
>       return;
>     }
>     
>     private void launchMap() {
>       Intent i = null;
151c188,190
<             addView(mViewButton);
---
>             i = new Intent(getContext(), GeoPointMapActivity.class);
>         } else {
>             i = new Intent(getContext(), GeoPointActivity.class);
153c192,270
<         addView(mAnswerDisplay);
---
>         ((Activity) getContext()).startActivityForResult(i,
>             FormEntryActivity.LOCATION_CAPTURE);
>         mWaitingForData = true;
>     }
>     @Override
>     public void onInAnimationDone() {
>       addMapView();
>     }
>     
>     protected void addMapView() {
>       if (mUseMaps) {
>             //addView(mViewButton);
>           mMapView=(mFEA).getMapView();
>           if (mMapView.getParent()!=null) {
>               ((ViewGroup)(mMapView.getParent())).removeView(mMapView);
>               
>           }
>           
>           mMapView.setLayoutParams(rlp);
>           mMapContainerLayout.addView(mMapView);
>           
>           View mapButtons=View.inflate(mFEA, R.layout.map_buttons_layout, null);
>           mMapContainerLayout.addView(mapButtons);
>           
>           mLocationStatus=(TextView)findViewById(R.id.location_status);
>           
>           
>           
>           /*
>           this.setLayoutParams(lp);
>           LinearLayout p=this;
>           while (p!=null) {
>               if (p.getParent()!=null && p.getParent() instanceof LinearLayout) {
>                   p.setLayoutParams(lp);
>                   p.invalidate();
>                   p=(LinearLayout)(p.getParent());
>                   
>               } 
>               else {
>                   break;
>               }
>           }
>           if (p.getParent()!=null && p.getParent() instanceof RelativeLayout) {
>               RelativeLayout r=(RelativeLayout)(p.getParent());
>               RelativeLayout.LayoutParams lpr=new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, RelativeLayout.LayoutParams.MATCH_PARENT);
>               lpr.setMargins(0,0,0,0);
>               p.setLayoutParams(lpr);
>               r.invalidate();
>           }
>           */
>           mMapView.setClickable(true);
>           mMapView.setBuiltInZoomControls(true);
>           mMapView.displayZoomControls(false);
>           mMapView.setSatellite(false);
>           mMapView.getController().setZoom(24);
>           List<Overlay> overlays=mMapView.getOverlays();
>           if (overlays.size()==0) {
>               Log.d("GeoPointWidget","Creating Location Overlay (from constructor)");
>               mFEA.createLocationOverlay();
>           }
>           mMapView.invalidate();
>           
>           mAcceptButton=(Button)findViewById(R.id.accept_location);
>           //mAcceptButton.setEnabled(false);
>           mAcceptButton.setText(R.string.cancel_location);
>           mAcceptButton.setOnClickListener(new View.OnClickListener() {
>                 @Override
>                 public void onClick(View v) {
>                   acceptOrSkip();
>                 }
>             });
>           
>           
>           if (mFEA.getGeoPoint()!=null) onLocationChanged();
>           
>           mFEA.disableFling();
>         }
>        //addView(mAnswerDisplay);
>       
155d271
< 
163a280,284
>     
>     private void acceptOrSkip() {
>       mFEA.enableFling();
>       mFEA.showNextView();
>     }
269a391,414
>     }
>     private String truncateFloat(float f) {
>         return new DecimalFormat("#.##").format(f);
>     }
>     public void onLocationChanged() {
>        //We need the mLocationStatus text view
>       if (mMapView==null) return;
>       if (mLocationStatus!=null) 
>           mLocationStatus.setText(getContext().getString(R.string.location_provider_accuracy,
>                  mFEA.getLocation().getProvider(), truncateFloat(mFEA.getLocation().getAccuracy())));
>       if (mAcceptButton!=null) mAcceptButton.setText(R.string.accept_location);
>       Log.d("GeoPointWidget","onLocationChanged. Overlays: "+(mMapView.getOverlays().size()));
>         GeoPoint gp=mFEA.getGeoPoint();
>       if (gp!=null) mMapView.getController().animateTo(mFEA.getGeoPoint());
>       List<Overlay> overlays=mMapView.getOverlays();
>       if (overlays.size()==0) {
>           Log.d("GeoPointWidget","Creating Location Overlay");
>           mFEA.createLocationOverlay();
>       }
>       Location location=mFEA.getLocation();
>       if (location!=null) {
>           setBinaryData(location.getLatitude() + " " + location.getLongitude() + " "
>           + location.getAltitude() + " " + location.getAccuracy(), false);
>       }
diff -r /media/DATA/lavoro/eclipse_workspace/ODK Collect/src/net/xxx/collect/android/widgets/ImageWidget.java /media/DATA/lavoro/xxx/backups/odk src embedded maps/net/xxx/collect/android/widgets/ImageWidget.java
330c330,335
<         if (mBinaryName==null) {
---
>         
>     }
>     
>     @Override
>     public void onInAnimationDone() {
>       if (mBinaryName==null) {
diff -r /media/DATA/lavoro/eclipse_workspace/ODK Collect/src/net/xxx/collect/android/widgets/QuestionWidget.java /media/DATA/lavoro/xxx/backups/odk src embedded maps/net/xxx/collect/android/widgets/QuestionWidget.java
147a148,151
>     
>     public void onInAnimationDone() {
>       
>     } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-31T16:00:01.720

使用“diff -ruN path1 path2”生成差异，使用“patch -p{N} < patchfile”应用补丁，其中 N 确定要从差异中的文件中剥离的路径前缀。只需查看补丁并分析“差异”行，看看应该去掉什么。（见：[人补丁](http://linux.die.net/man/1/patch)）。在应用补丁之前，一定要使用“patch --dry-run -p0 < patchfile”来确保一切都至少是合理的。

*编辑：*`diff`注意使用 normal 、unified diff ( `-u`) 和 context diff ( )生成的补丁的不同内容`-c`，您会看到文件名根本不包含在“正常”差异中。“diff”命令存在，但要修补的文件名不存在。（另请注意，实际的 'diff' 输出会因平台、程序和程序而有所不同，并且`patch`必须进行一些插值以确定补丁格式，甚至尝试猜测您是否给它错误选项）。

```
$ diff -r -u a b
diff -r -u a/dir/file1 b/dir/file1
--- a/dir/file1 2012-08-02 18:27:30.050247358 -0700
+++ b/dir/file1 2012-08-02 18:27:27.190198620 -0700
@@ -1 +1 @@
-contents A
+contents B

$ diff -r -c a b
diff -r -c a/dir/file1 b/dir/file1
*** a/dir/file1 2012-08-02 18:27:30.050247358 -0700
--- b/dir/file1 2012-08-02 18:27:27.190198620 -0700
***************
*** 1 ****
! contents A
--- 1 ----
! contents B

$ diff -r  a b
diff -r a/dir/file1 b/dir/file1
1c1
< contents A
---
> contents B 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-02-12T09:55:29.930

我在做的时候遇到了这个问题：

```
patch <file_patch> <file_destination> 
```

代替：

```
patch <file_destination> <file_patch> 
```

# powershell - Powershell - 在使用 get-adcomputer 时过滤 OU

> ID：11531694
> 
> 赞同：6
> 
> 时间：2012-07-17T22:23:05.523
> 
> 标签：powershell, active-directory, filtering, ou

我正在尝试创建一个脚本，该脚本根据计算机可能具有的特定属性生成计算机列表。例如，我正在尝试列出 Windows XP 计算机和 Windows 7 计算机，将它们的名称放入 .csv 文件中并输出每个计算机的最终计数。

到目前为止，这是我的代码

```
import-module ActiveDirectory
$computers = get-adcomputer -Filter 'ObjectClass -eq "Computer"' -properties "OperatingSystem"
$i = 0
$j = 0
Foreach ($computer in $computers) {
    if ($computer.operatingSystem -like "Windows 7*") {
        $i++
        '"{0}","{1}","{2}"' -f $computer.Name, $computer.OperatingSystem, "$computer.DistinguishedName" | Out-file -append C:\users\admin\desktop\test.txt
        }
    elseif ($computer.OperatingSystem -like "Windows XP*") {
        $j++
        '"{0}","{1}","{2}"' -f $computer.Name, $computer.OperatingSystem, "$computer.DistinguishedName" | Out-file -append C:\users\admin\desktop\test.txt
        }
    else {
        $_
        }

}
write-host "$i Win 7"
write-host "$j Win xp"
$k = $i+$j
write-host "$k Total" 
```

样本输出：

```
104 Win 7
86 Win xp
190 Total 
```

该脚本有效，但是我想通过能够说出不查看哪个 OU 来使它变得更好，但我无法弄清楚。

如果有人对如何做到这一点有任何见解，或者只是为了使上面的代码更好，我很想听听。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T07:25:09.570

该`-like`运算符似乎不适用于 DistinguishedName 的通配符。所以明显的操作`Get-ADComputer -Filter {(DistinguishedName -notlike "*OU=evil,*")}`是行不通的。

最简单的解决方法是将所有计算机放在一个集合中，然后对其进行过滤以满足您的需求。像这样，

```
# All the computers from the evil OU:
$evilOU = $computers| ? {$_.DistinguishedName -like "*ou=evil,*"}
# All the computers but the ones from the evil OU:
$goodOU = $computers| ? {$_.DistinguishedName -notlike "*ou=evil,*"} 
```

**附录**

要组合匹配规则，请使用`-and` `-or`和`-like`。记得使用`*`通配符`? (where-object)`

```
# All the computers save the ones from evil and wicked OU:
$goodOU = $computers| ? {
  $_.DistinguishedName -notlike "*ou=evil,*" -and $_.DistinguishedName -notlike "*ou=wicked,*" 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-09T21:15:35.413

虽然在收集了所有计算机之后进行过滤并没有什么问题，但将数据限制到一个 OU 的更有效方法是在 GET-ADCOMPUTER cmdlt 中使用 -searchbase 开关。我还注意到您正在过滤您的对象类型以指定计算机，这有点多余，因为 get-adcomputer cmdlt 已经过滤掉了其他对象类型。

我已经获取了您的代码并对其进行了一些修复。

```
import-module ActiveDirectory
$computers = get-adcomputer -Filter * -properties "OperatingSystem" -SearchBase "OU=evil,OU=workstations,DC=cs,DC=domain,DC=net"
$i = 0
$j = 0
Foreach ($computer in $computers) {
    if ($computer.operatingSystem -like "Windows 7*") {
        $i++
        '"{0}","{1}","{2}"' -f $computer.Name, $computer.OperatingSystem, "$($computer.DistinguishedName)" | Out-file -append C:\users\admin\desktop\test.txt
        }
    elseif ($computer.OperatingSystem -like "Windows XP*") {
        $j++
        '"{0}","{1}","{2}"' -f $computer.Name, $computer.OperatingSystem, "$($computer.DistinguishedName)" | Out-file -append C:\users\admin\desktop\test.txt
        }
    else {
        $_
        }

}
write-host "$i Win 7"
write-host "$j Win xp"
$k = $i+$j
write-host "$k Total" 
```

上面的示例应该与您之前的脚本功能相同，除了它将枚举邪恶 OU 中的所有具有 Windows 7 或 xp 的计算机。它位于 ds.Domain.Net 域上的工作站 OU 内。

您可能还注意到，您的专有名称在每列的末尾附加了“.DistinguishedName”，这是因为您的 $computer.DistinguishedName 表达式在引用时没有被完全评估，通过以下更改轻松解决：

```
"$computer.DistinguishedName" 
```

至

```
"$($computer.DistinguishedName)" 
```

"$(<...>)" 语法告诉 powershell 在将输出转换为字符串之前评估括号内的完整表达式。

# c++ - 尽管链接到带有导 出符号的 .lib 文件，但从托管 C++ 链接到非托管 C++ 时出现链接错误

> ID：11531695
> 
> 赞同：1
> 
> 时间：2012-07-17T22:23:06.567
> 
> 标签：c++, visual-studio-2010, visual-c++, c++-cli

尽管关注了有关从 C++/CLI 包装器 dll 使用和链接到非托管 C++ 代码的各种帖子，但我无法解决这些链接问题。

```
1>MyClassAdapter.obj : error LNK2028: unresolved token (0A00000A) "public: __thiscall MyClass::~MyClass(void)" (??1MyClass@@$$FQAE@XZ) referenced in function "public: void * __thiscall MyClass::`scalar deleting destructor'(unsigned int)" (??_GMyClass@@$$FQAEPAXI@Z)
1>MyClassAdapter.obj : error LNK2028: unresolved token (0A00000B) "public: __thiscall MyClass::MyClass(void)" (??0MyClass@@$$FQAE@XZ) referenced in function "public: __clrcall WrapperLayer::MyClassAdaptor::MyClassAdaptor(void)" (??0MyClassAdaptor@WrapperLayer@@$$FQ$AAM@XZ)
1>MyClassAdapter.obj : error LNK2019: unresolved external symbol "public: __thiscall MyClass::MyClass(void)" (??0MyClass@@$$FQAE@XZ) referenced in function "public: __clrcall WrapperLayer::MyClassAdaptor::MyClassAdaptor(void)" (??0MyClassAdaptor@WrapperLayer@@$$FQ$AAM@XZ)
1>MyClassAdapter.obj : error LNK2019: unresolved external symbol "public: __thiscall MyClass::~MyClass(void)" (??1MyClass@@$$FQAE@XZ) referenced in function "public: void * __thiscall MyClass::`scalar deleting destructor'(unsigned int)" (??_GMyClass@@$$FQAEPAXI@Z) 
```

我有一个带有简单类的非托管本机 C++ dll，相应地导出/导入符号

```
// MyClass.h
#ifdef _EXPORTING
   #define DLL_PUBLIC __declspec(dllexport)
#else
   #define DLL_PUBLIC __declspec(dllimport)
#endif

class DLL_PUBLIC MyClass { . . . }; 
```

我可以看到构建后生成的 .dll 和 .lib 链接器文件。

然后我有托管的 C++/CLI 包装器项目（也是一个 dll），它链接到 Linker->Input->Additional Dependencies 设置中的 MyClass.lib。在包装器项目中还包含来自 MyClass 的 .h 文件，我可以看到 sln 可以看到 MyClass.h 文件。

```
// MyClassAdaptor.h

#include "MyClass.h"

namespace WrapperLayer
{
    public ref class MyClassAdaptor 
    { 
      . . . 
    private:
        MyClass* _myclass;  
    }; 
} 
```

什么可能会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T07:50:35.227

几点：

*   对 DLL 使用 Dependency Walker 并检查这些符号是否实际上在 DLL 中。
*   确保您使用的是正确的 lib 文件 - 32 位 LIB 不能用于 64 位构建。
*   确保用于构建类的 .CPP 文件实际上是非托管的（或 DLL 本身作为一个整体是非托管的）。

# windows-phone-7 - 如何将联系人与对象关联

> ID：11531696
> 
> 赞同：0
> 
> 时间：2012-07-17T22:23:22.227
> 
> 标签：windows-phone-7

我有一个应该从联系人创建的模型*人。*如果用户打开一个人的视图，应该有一个按钮，可以在我获得联系信息的地址簿中打开此联系人。

*是否可以在我的模型Person*中保存指向联系人的指针？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T13:32:17.833

也许你想看看这篇文章： http: [//www.windowsphonegeek.com/articles/How-to-choose-a-Contact-and-get-Contact-details-in-a-WP7-app](http://www.windowsphonegeek.com/articles/How-to-choose-a-Contact-and-get-Contact-details-in-a-WP7-app)

作者解释了如何从电话通讯录中获取联系数据！

如果你想从通讯录中打开联系方式页面，恐怕这是不可能的。

# android - 在多个资源文件夹中重复使用相同的布局

> ID：11531697
> 
> 赞同：0
> 
> 时间：2012-07-17T22:23:26.067
> 
> 标签：android

我一直在尝试在多个资源文件夹中重用相同的布局，但没有成功。首先，我尝试按照此处的说明进行操作：[https](https://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters) ://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters并添加如下资源文件：

```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources> 
```

我收到两个 LINT 警告。第一个是`Attribute is missing the Android namespace prefix`。如果我通过添加一个来解决这个问题`xmlns:android="http://schemas.android.com/apk/res/android"`，那么我仍然会得到`Unexpected text found in layout file: "@layout/layout_file"`. 当我尝试使用以下两个例外进行充气时，它会爆炸：

```
android.view.InflateException: Binary XML file line #2: Error inflating class resources
Caused by: java.lang.ClassNotFoundException: android.view.resources 
```

我正在使用 API 15 和支持库。包含/合并技巧似乎不适用于片段，因为它也会因不同的异常而爆炸。

有没有人设法让它工作？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:32:35.960

我让它工作了。我的错误是将别名放在“布局”文件夹中——它们应该放在“值”文件夹中。那并重命名 name 属性修复了所有错误！

# oop - 使用这个参考？

> ID：11531699
> 
> 赞同：0
> 
> 时间：2012-07-17T22:23:37.433
> 
> 标签：oop, composition, design-patterns

有可能获得比普通 OO 模式更丑陋的 OO 行为吗？

我的 cclass 包含接收器的实例（调用命令），但我的接收器还包含对其执行的命令列表，因此我在命令和接收器之间有循环组合/聚合关系？但这似乎不正常，因为命令模式通常包含接收器的实例，有时接收器包含执行的命令列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:28:15.733

[如果您考虑Class Diagram](http://en.wikipedia.org/wiki/Class_diagram)，它只是循环的。当你做 OOP 时，类图通常没有任何意义，因为你可以让一个类做很多不同的事情。[这就是为什么在做 OOP 时使用Object Diagrams](http://en.wikipedia.org/wiki/Object_diagram)更有用。

当您为每个命令创建一个命令对象（和类）而不是重用一些通用的

```
class Command
{
    receiver;
    parameters;
} 
```

到处

# javascript - 使用 jquery validate() 同时有一个提交处理程序

> ID：11531702
> 
> 赞同：0
> 
> 时间：2012-07-17T22:23:43.673
> 
> 标签：javascript, jquery

当我的用户提交属于我的 .submit() 处理程序的一部分的表单时，我进行 ajax 调用并返回一些 JSON。

我现在也在尝试在此表单上附加一些验证。

我使用下面的代码得到的结果是我确实收到了“必填字段”错误消息，但无论如何都会提交表单。

```
// attaching some validation to our form.
$("#myForm").validate();

// submit our form and do stuff
$("#myForm").submit( function(){

// I have an ajax request I need to make here, not relevant for the example.

});

<form id="myForm">

Foo: <input type="text" name="foo" id="foo" class="required" />

</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T22:26:33.780

您可以提供自定义处理程序（来自文档）： [http ://docs.jquery.com/Plugins/Validation/validate#options](http://docs.jquery.com/Plugins/Validation/validate#options)

```
$(".selector").validate({
   submitHandler: function(form) {
     $(form).ajaxSubmit();
   }
}) 
```

您还可以使用返回布尔值的 .valid() 函数。

```
$("#myForm").submit( function(e){
    if($("#myForm").valid() {
        .... do stuff
    } else {
        e.preventDefault();
    }
}); 
```

# wcf - WCF 命名管道和 Azure Web 角色

> ID：11531706
> 
> 赞同：2
> 
> 时间：2012-07-17T22:24:45.380
> 
> 标签：wcf, azure, named-pipes

为了这个，我花了太长时间把头撞在墙上。

运行 Azure SDK 1.7 / Visual Studio 2010 Ultimate。我似乎无法在 IIS/WAS 托管的命名管道上运行 WCF 服务。在计算模拟器中连接到我的服务的任何尝试都会产生

**在本地计算机上找不到管道端点“net.pipe://localhost/services/MyService.svc”**

我打算发布我的代码，但事实证明这篇文章中的示例代码[http://blogs.msdn.com/b/tomholl/archive/2011/06/28/hosting-services-with-was-and -iis-on-windows-azure.aspx](http://blogs.msdn.com/b/tomholl/archive/2011/06/28/hosting-services-with-was-and-iis-on-windows-azure.aspx)给了我完全相同的错误。所有代码都可以在该站点上找到。

据我所知，powershell 任务正在成功执行。（好吧，好吧，我不得不在启动任务中将 ExecutionPolicy 从 Unrestricted 更改为 RemoteSigned，但之后它运行得很好。） NetPipeActivator 服务正在运行，当我调用 Get-WebApplication 时，我在协议中看到 net.pipe列表：

```
PS C:\> $WebRoleSite = (get-website "*webrole*").Name
PS C:\> Get-WebApplication -Site $WebRoleSite

Name             Application pool   Protocols    Physical Path
----             ----------------   ---------    -------------
WcfService1      4a16b147-f9ac-41d9 http,net.pip c:\Code\WasInAzure\WcfService1
                 -9543-0577da64fb9a e 
```

还有什么可能发生的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T22:44:28.123

我解决了。呸！

我的问题是我从根网站中托管我的 WCF 服务，而不是子应用程序。我必须将以下行添加到 powershell 脚本以在主网站上启用命名管道：

```
Set-ItemProperty "IIS:/Sites/$WebRoleSite" -Name EnabledProtocols 'http,net.pipe' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-01T22:35:18.897

我在使用这个示例代码时也遇到了这个错误。就我而言，我在尝试复制云服务时收到错误，但解决方案中的原始云服务项目没有。

最终的关键区别在于[ServiceConfiguration.csfg 文件](https://msdn.microsoft.com/en-us/library/azure/ee758710.aspx)中 ServiceConfiguration 元素的 osFamily 属性。

在示例中，它设置为“2：”

```
<ServiceConfiguration serviceName="WasInAzure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="2" osVersion="*" schemaVersion="2015-04.2.6"> 
```

在较新的项目中，它设置为“4：”

```
<ServiceConfiguration serviceName="WasInAzure" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceConfiguration" osFamily="4" osVersion="*" schemaVersion="2015-04.2.6"> 
```

操作系统的更改会破坏 PowerShell 脚本。这是 RoleStart.ps1 的更新版本，它应该适用于 Server 2012 R2 (osFamily 4)：

```
write-host "Begin RoleStart.ps1"
import-module WebAdministration 

# Starting the listener service 
install-windowsfeature -name AS-Named-Pipes
$listenerService = Get-WmiObject win32_service -filter "name='NetPipeActivator'"
$listenerService.ChangeStartMode("Manual")
$listenerService.StartService()

# Enable net.pipe bindings
$WebRoleSite = (Get-WebSite "*webrole*").Name
Get-WebApplication -Site $WebRoleSite | Foreach-Object { $site = "IIS:/Sites/$WebRoleSite" + $_.path; Set-ItemProperty $site -Name enabledProtocols 'http,net.pipe'}
New-ItemProperty "IIS:/Sites/$WebRoleSite" -name bindings -value @{protocol="net.pipe";bindingInformation="*"}

write-host "End RoleStart.ps1" 
```

变更摘要：

*   添加`install-windowsfeature -name AS-NamedPipes`，因为不存在 NetPipesActivator 服务。

*   更新`EnabledProtocols`为`enabledProtocols`. 那个花了一些搜索。我终于找到[了一篇博客文章的评论](http://sorin.serbans.net/blog/2012/03/quick-how-to-create-an-application-in-iis7-with-powershell/313/)，让我走上了正确的道路。

# php - 在 Zend Framework 中检查数组和打印值

> ID：11531709
> 
> 赞同：0
> 
> 时间：2012-07-17T22:25:28.750
> 
> 标签：php, mongodb, zend-framework, database

我在一篇文章中添加了许多缩略图，这是 Zend 框架的新内容，所以我不确定打印这个数组的编码风格。

我在 MongoDB 中的数组如下所示：

```
"thmbs": [
    {
        "src": "examp.com/img/product1.jpg",
        "caption": "Top View"
    },
    {
        "src": "examp.com/img/product2.jpg",
        "caption": "Side View"
    },
] 
```

首先，我想检查数组以查看它是否包含任何内容，然后打印替代文本的图像和标题。这是正确的方向吗？

```
 <?php if ($this->thmbs) {
          foreach($this->thmbs->src as $val){?>
              <img id="lead-image" src="<?= $this->thmbs->src ?>"  alt="<?= $this->thmbs->caption?>"/>
       <?php }} ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:09:39.080

我对 MongoDB 不太熟悉，但如果它以 JSON 格式为您提供输出，只需使用`json_decode()`. 例如：

```
<?php

   $this->thmbs = json_decode($db_output, true);
   if($this->thmbs){
      foreach( $this->thmbs as $thmb ){
         echo "<img id='lead-image' src='". $thmb->src ."' alt='". $thmb->caption ."' />";
      }
   }

?> 
```

# c# - Kinect Avateer 脚在地平面下方剪裁

> ID：11531710
> 
> 赞同：1
> 
> 时间：2012-07-17T22:25:34.270
> 
> 标签：c#, kinect, xna-4.0, fbx

所以我试图将一个 Kinect 驱动的模型放在一个已知的地平面上，这样他的脚就不会低于地面。我正在使用 Kinect SDK 示例设置、Dude.FBX 模型，并使用 SkeletonJointsSensorOffsetCorrection 类根据 Kinect 传感器地板平面将模型从地板上移开。这很好用，让我可以跳跃，这非常重要。但是，当我弯曲膝盖蹲下一点时，模型会应用约束过滤器来防止关节弯曲过度。这意味着臀部适当地向下移动，但模型的腿不像我的那样一直弯曲，所以脚夹在地板上（因为它们必须去某个地方。）

我想要做的是在所有其他过滤器运行后改变模型脚/膝盖的位置和旋转，以便它们不会穿过地平面。但是，我坚持两点：

1.  我如何询问模型（不是 Kinect 骨架）的脚是否低于某个 Y？
2.  如何将脚移动到 0 并旋转膝关节和髋关节以使其更自然（再次，在模型上，而不是在 Kinect 骨架上）？

Kinect 骨架是正确的。它看到一切都在正确的地方。但是该模型以我想在事后调整的方式解释该信息。我只是不知道最好的方法。有任何想法吗？

感谢大家。

# c++ - 如何在 C++ 中编译具有大量数据的向量？

> ID：11531714
> 
> 赞同：0
> 
> 时间：2012-07-17T22:25:55.437
> 
> 标签：c++, arrays, vector

我正在编写一个 C++ 程序来检查加泰罗尼亚语中是否存在某些单词，所以我有一个带有加泰罗尼亚语词典的向量：

```
const vector<string> dict={"aaron","ababol","abac","abaca","abacallanada","abacallanava","abacas","abacial", ... ,"zum-zum","zur","zuric","zwitterio"}; 
```

问题是字典有 107776 个条目，所以当我尝试编译文件时：

```
g++ -Wall file.cc -std=c++0x -o file.exe 
```

它在一段时间内什么都不做，然后 Windows 说它没有响应并关闭它。

我该如何编译它？有没有更好的方法来存储这种类型的数据（数组，...）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T22:50:52.037

对于老式的内置数组，您可能会更幸运：

```
char const * const dict[] = {"aaron",...}; 
```

这将生成大量字符串文字和指向它们的指针数组，这对编译器来说不应该是太大的压力。这也不会使用不必要的内存，在运行时几乎没有工作。

或者，`std::array<char const *>`应该同样高效，具有更多的 C++ 外观和感觉。

您的版本还必须生成大量代码来`initializer_list`从它们构建一个，从每个构建一个字符串，并将每个字符串添加到向量中。它还需要两倍于每个字符串文字需要复制到运行时分配的内存中的内存，然后所有这些指针需要存储在另一个运行时分配的数组中。

缺点是每次从字典中读取时，您最终可能会构建一个临时字符串。如果这是一个问题，那么一系列`std::string`可能是一个合理的折衷方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T22:30:24.027

将其存储在外部文件中，并按需加载。这是最好的解决方案，否则我想您应该将向量拆分为多个向量，并可能将它们放入单独的 cpp 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:31:28.323

将字典存储在文本文件中，每行一个单词。然后将此代码添加到您的程序中：

```
{ 
  std::string inputFileName;
  std::ifstream inputFile(inputFileName);
  std::string word;
  while( std::getline(inputFile, word) )
    dict.push_back(word);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T22:44:11.573

是否可以使用其他答案中的方法从文件中仅加载一组字典，即从文件中仅加载“a”字`a.dic`。还是您需要一次访问整个字典？

# django - Django - 转到 HTML 中的#id 标签

> ID：11531715
> 
> 赞同：4
> 
> 时间：2012-07-17T22:26:08.047
> 
> 标签：django, django-views, django-urls

从views.py，有没有办法让它进入HTML 中的id 标签？

例如，

我的html： `<body> <div id="lotofstuff"> content </div> <div id="pictures"> content </div> </body>`

在特殊情况下，我希望响应转到[http://www.url.com#pictures](http://www.url.com#pictures)，所以它转到页面中间。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T22:48:29.867

Without redirecting I would set a variable in your view and pass it to your template.

```
gotodiv = False
if somecase:
    gotodiv = 'pictures' 
```

Then, in your template, have some simple javascript to go to the div.

```
{% if gotodiv %}
<script> window.location.hash = '#{{gotodiv}}'; </script>
{% endif %} 
```

No extra hits on your webserver or django app.

*Edited to make location.hash dynamic.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:39:56.653

我不知道从一个角度来看这是否可能（也许是的），但我能想象的最简单的方法是使用来自模板的重定向，所以你可能有：

```
YourView:
 [...]
 if condition1:
  context.update('center_in_the_middle':True)
 else:
  context.update('center_in_the_middle':False)
[...] 
```

然后在模板中：template0.html

```
{% if center_in_the_middle %}
  [redirect to URL1]
{% else %}
  [redirect to URL2]
{% endif %} 
```

希望能帮助到你！

# c++ - 提高 ASIO 并发性

> ID：11531720
> 
> 赞同：4
> 
> 时间：2012-07-17T22:26:28.017
> 
> 标签：c++, boost, concurrency, boost-asio

我正在学习使用 Boost ASIO。这是从与 Boost ASIO 文档一起给出的[聊天示例](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/example/chat/chat_client.cpp)中复制的一些代码，

```
typedef std::deque<chat_message> chat_message_queue;

class chat_client
{
    public:
        chat_client(boost::asio::io_service& io_service,
                tcp::resolver::iterator endpoint_iterator)
            : io_service_(io_service),
            socket_(io_service)
    {
        boost::asio::async_connect(socket_, endpoint_iterator,
                boost::bind(&chat_client::handle_connect, this,
                    boost::asio::placeholders::error));
    }

        void write(const chat_message& msg)
        {
            io_service_.post(boost::bind(&chat_client::do_write, this, msg));
        }

        void close()
        {
            io_service_.post(boost::bind(&chat_client::do_close, this));
        }

    private:

        void handle_connect(const boost::system::error_code& error)
        {
            //Implementation
        }

        void handle_read_header(const boost::system::error_code& error)
        {
            //Implementation
        }

        void handle_read_body(const boost::system::error_code& error)
        {
            //Implementation
        }

        void do_write(chat_message msg)
        {
            bool write_in_progress = !write_msgs_.empty();
            write_msgs_.push_back(msg);
            if (!write_in_progress)
            {
                boost::asio::async_write(socket_,
                        boost::asio::buffer(write_msgs_.front().data(),
                            write_msgs_.front().length()),
                        boost::bind(&chat_client::handle_write, this,
                            boost::asio::placeholders::error));
            }
        }

        void handle_write(const boost::system::error_code& error)
        {
            //Implementation
        }

        void do_close()
        {
            socket_.close();
        }

    private:
        boost::asio::io_service& io_service_;
        tcp::socket socket_;
        chat_message read_msg_;
        chat_message_queue write_msgs_;
}; 
```

1.  写入是异步的，并且不使用成员变量`write_msgs_`和`read_msgs_`. 这里不应该存在并发问题吗？

2.  `post`从运行的线程调用是否安全`io_service::run?`呢`dispatch`？从未运行的线程中进行相同的调用怎么样`io_service::run`？

3.  在`doSend()`，为什么他们将消息推送到`write_msgs_`而不是直接发送？同样在同一个函数中，他们为什么要检查是否`write_msgs_`为空，只有在不是时才继续发送？是否`write_msgs_.empty() = false`意味着正在写入？如何？

4.  如果`do_write()`仅在一个线程中调用，那么为什么我需要一个队列来维护一系列发送？不会`io_service`完成手头的任务然后执行调用的异步操作`do_write`吗？在上面提到的示例中使用 a`dispatch`而不是会有所不同吗？`post`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-18T08:23:21.763

1.  尽管写入是异步的，但这里没有多线程：`do_write()`在一个线程中调用。当然，在调用完成处理程序之前，正在发送的缓冲区必须是活动的并且不变。

2.  从任何线程调用 post() 和 dispatch() 都是安全的。[阅读io_service 文档](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/io_service.html)的“线程安全”部分。

3.  如果`async_write`正在进行中，并且您`async_write`再次调用同一个套接字，则发送数据的顺序是未定义的。换句话说，数据将被弄乱。解决此问题的最简单方法是创建一个消息队列：每次`async_write`完成时，发出另一个`async_write`. （顺便说一句，这同样适用于`async_read`。）为什么`write_msgs_.empty() = false`意味着正在写入？因为只要 as`write_msgs_`不为空，`handle_write`（前一个的完成处理程序`async_write`）就会发出另一个`async_write`. `write_msgs_`此循环在为空时中断。

4.  请阅读[文档中有关 async_write 的内容](http://www.boost.org/doc/libs/1_50_0/doc/html/boost_asio/reference/async_write/overload1.html)：

    > 此操作通过对流的 async_write_some 函数的零次或多次调用来实现，称为**组合操作**。程序必须确保流不执行其他写入操作（例如 async_write、流的 async_write_some 函数或执行写入的任何其他组合操作），直到此操作完成。

至于`dispatch`vs `post`- 据我所知，在上面的示例中它们是可以互换的。如果我们不希望被发布的仿函数被同步调用，那么使用 post 是必不可少的。

# java - Grails：堆栈红色区域的无效访问

> ID：11531724
> 
> 赞同：0
> 
> 时间：2012-07-17T22:26:51.893
> 
> 标签：java, macos, grails, jvm, red-zone

我在 OS X (10.7.4) 上运行 Grails 2.0.4 应用程序。该应用程序启动时没有任何问题，但是当我尝试在浏览器中访问主页时，出现堆栈红色区域错误：

```
Invalid access of stack red zone 0x1139b10c0 rip=0x112e50b70
Bus error: 10 
```

并且服务器关闭。

该应用程序使用这些插件：

*   代码覆盖率 (1.2.5)
*   密码 (0.17)
*   休眠 (2.0.4)
*   jQuery (1.7.1)
*   邮件 (1.0)
*   插件配置（0.1.5）
*   石英2 (0.2.2)
*   验证码 (0.5.2)
*   参考代码（0.3.0）
*   资源 (1.1.5)
*   弹簧缓存（1.3.1）
*   svn (1.0.1)
*   雄猫 (2.0.4)
*   webxml (1.4.1)，和
*   yui-minify-resources (0.1.5)

有没有人碰巧有任何提示，Grailswise，如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:55:04.997

有一些针对此错误的点击（例如[此处](https://stackoverflow.com/questions/1501770/invalid-access-of-stack-red-zone-from-java-vm)和[此处](https://stackoverflow.com/questions/6560889/invalid-memory-access-of-location-in-java)）。大多数情况下，它们围绕序列化 JSON 对象创建未报告为堆栈溢出的堆栈溢出错误。如果您正在做类似的事情，这可能是一个不错的起点。检查您正在序列化的任何字符串以确保它们是有效的 JSON：

```
JSONArray.fromObject(jsonString) 
```

另一个建议增加 Java 堆栈大小 ( `-Xss1024k`)。如果你的 JSON 字符串看起来没问题，或者你没有做任何与 JSON 相关的事情，你可以试试这个看看它是否只是一个空间问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:39:20.607

该错误是否产生了核心转储？如果是，请谷歌搜索核心转储分析器。这里有一些关于核心 dumo 工具[的好点子 分析 java 核心转储的工具](https://stackoverflow.com/questions/951095/tool-for-analyzing-java-core-dump)

# ajax - 多个更新面板

> ID：11531725
> 
> 赞同：1
> 
> 时间：2012-07-17T22:26:58.970
> 
> 标签：ajax, updatepanel, dopostback

我刚刚开始使用stackoverflow，至少作为作家......我很感激你在我遇到的关于AJAX的一些问题上的帮助。首先，我之前在工作中实现了 AJAX，但仅在基本的东西上实现，例如由 button_onclick 刷新的 UpdatePanel。但现在我需要实现多个 UpdatePanel，它们通过多种方式刷新。

我已经简化了我的 HTML 代码，但基本上它看起来像：

```
<script type="text/javascript">
    function mostrarDatosSolicitante() {
        var nroDoc = document.getElementById('<%=txtDocumento.ClientID%>').value;

        if (nroDoc != "") {
            __doPostBack('<%=up1.ClientID%>', '');
        }
    }        
</script>
<table>
    <tr>
        <td>
            <b>Documento </b>
        </td>
        <td>
            <asp:TextBox runat="server" id="txtDoc" 
                         onblur="mostrarDatosSolicitante()"/>                    
        </td>
        <td>
            <asp:Button runat="server" id="btnConfirmar" 
                        Text="Confirmar" />
        </td>
    </tr>            
</table>
<asp:ScriptManager ID="ScriptManager1" runat="server" 
                   EnablePartialRendering="True" />
    <asp:UpdatePanel ID="up1" runat="server" 
                     OnLoad="refreshUP1" UpdateMode="Conditional">            
        <ContentTemplate>

            <!--some stuff-->

        </ContentTemplate>
    </asp:UpdatePanel>
    <asp:UpdatePanel ID="up2" runat="server" 
                     OnLoad="refreshUP2" UpdateMode="Conditional">
        <Triggers>
            <asp:AsyncPostBackTrigger ControlID="btnConfirmar" />
        </Triggers>
        <ContentTemplate>  

                <!--some stuff 2-->

            <asp:UpdatePanel ID="up3" runat="server" 
                             OnLoad="refreshUP3" UpdateMode="Conditional">
                <Triggers>
                    <asp:AsyncPostBackTrigger ControlID="ddlTipoConvInt" />
                </Triggers>
                <ContentTemplate>

                    <!--some stuff 3-->

                </ContentTemplate>
            </asp:UpdatePanel>

        </ContentTemplate>
    </asp:UpdatePanel>
</div> 
```

我背后的代码看起来像：

```
protected void refreshUP1(object sender, EventArgs e)
{
    //do something
}
protected void refreshUP2(object sender, EventArgs e)
{
    //do something
}
protected void refreshUP3(object sender, EventArgs e)
{
    //do something
} 
```

我需要解决的问题是当我离开文本框时，javascript 被触发刷新更新面板 up1 触发方法“refreshUP1”。但在我的情况下，所有更新面板都在刷新，至少方法“refreshUP2”和“refreshUP3”运行，导致不希望的行为......

任何方法都将受到欢迎！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:22:44.997

这是由`OnLoad`事件引起的。

你必须明白，无论 Postback 是 Async，页面上的所有控件都会被加载并经历一个生命周期。基本上，与 UpdatePanel 的区别在于 AsyncPostBack 的页面上仅返回其内容。

您可以查看此以获取更多信息： [ASP.NET 中的异步和同步回发](https://stackoverflow.com/questions/2278891/asynchronous-and-synchronous-postback-in-asp-net)

要做你想做的事，你不应该将`refreshUP`潜艇链接到`OnLoad`事件。我经常使用的解决方案是将它们中的每一个链接到我设置为`AsyncPostBackTrigger`.

# css - 在不使用 CSS 的情况下模拟 position:absolute 和更高的 z-index？

> ID：11531727
> 
> 赞同：0
> 
> 时间：2012-07-17T22:27:09.670
> 
> 标签：css, html

我创建了一个代码生成器，它使用户可以轻松地将图像嵌入到网站中。但是，该网站会从粘贴在输入框中的任何代码中删除所有 CSS 样式属性和 JavaScript。

这意味着我必须在页面上生成的图像下方或上方显示我的徽标。我希望我的徽标显示在图像顶部（最好在左上角）。使用 CSS 可以将其设置为样式`position:absolute`并`z-index:2`生成该效果。但由于禁用的 CSS，我不能这样做。

有没有什么奇怪的方法可以让我的标志覆盖在我的媒体上而不使用 CSS 或 JavaScript（所以只是 HTML）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:29:04.570

简而言之：没有。

除了选择从上到下的顺序（这与您的 html 结构中的顺序相同）之外，您不能以您想要的方式定位没有 css 的 html 元素。所以叠加是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:29:37.203

没有 CSS，标记将简单地流动。没有 CSS，你无法做到这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:46:15.293

如果你想有点疯狂，你可以使用 PHP 的 GD Image library 将你的 logo 合并到顶部。去年我为一位客户做了类似的事情，他想要一个头像制作器，将图像层合并成一张最终图片供人们下载。最终结果非常棒。

[http://php.about.com/od/advancedphp/ss/gd_library.htm](http://php.about.com/od/advancedphp/ss/gd_library.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T22:59:29.740

表格背景允许您将图像叠加在一起。以下示例将图像偏移 10 个像素：

```
<html><body>
<table background='image_one.png'><tr><td width='10'></td>
<td><img src='image_two.png'></td>
</tr></table>
</body></html> 
```

# c# - 共享本地图像或视频文件

> ID：11531728
> 
> 赞同：0
> 
> 时间：2012-07-17T22:27:19.273
> 
> 标签：c#, windows-phone-7

我知道有一些简单的方法可以使用 WP7 的 ShareLinkTask 和 ShareStatusTask 共享链接或社交网络状态，甚至可以使用 SendSMSTask 和 SendEmailTask​​ 发送短信和电子邮件，但是有没有办法从用户手机共享图像或视频？我已经研究过但没有发现这个实现，但如果可能的话肯定想将此功能添加到我的应用程序中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T07:46:39.170

您无法使用标准共享 API 共享图像或视频。你需要自己做。

# c# - 在 C# 中实现此类的最佳方法是什么

> ID：11531731
> 
> 赞同：1
> 
> 时间：2012-07-17T22:27:42.360
> 
> 标签：c#, .net

`foo`我有一个包含 20 个成员的类（我们称之为）。该类有一个方法 `public foo Rotate(double angle)`。

此方法将调用对象旋转一定角度并创建一个新`foo`对象。新对象的 10 个成员始终与调用对象相同。

实现此类的最佳方法是什么，这样我就不必在每次调用 Rotate 方法时重新计算所有 20 个成员？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:45:22.687

假设您可以在类之外更改类属性，我认为您最好的解决方案是[复制构造函数](http://msdn.microsoft.com/en-us/library/ms173116%28v=vs.80%29.aspx)。

这实质上意味着您在类中定义一个构造函数，该构造函数将同一类的对象作为参数，然后将对象的所有属性复制到一个新对象中。

由于您所做的只是分配值，因此效率没有问题（假设值是原语）。

然后，一旦您初始化了新对象，将 10 个不同的属性设置为它们的旋转对应物。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:49:20.100

You can use [`MemberwiseClone`](http://msdn.microsoft.com/en-us/library/system.object.memberwiseclone.aspx) to do a shallow copy of all your fields:

```
public class Foo
{
   public Foo Rotate(int angle)
   {
       var newInstance = (Foo)this.MemberwiseClone();
       // do other stuff...
       return newInstance; 
   }
} 
```

If the 20 fields are value types then you should be set. If they are not then you are probably safer using a copy constructor.

# java - 谁能告诉我为什么eclipse不喜欢这个java数组初始化？

> ID：11531734
> 
> 赞同：0
> 
> 时间：2012-07-17T22:28:10.940
> 
> 标签：java, eclipse

我是使用 eclipse 的新手，我完全不明白为什么它不喜欢我的 for 循环的第一行

```
public Practice(int n) {
    this.n=n;
    for(int i=0; i<n; i++){
        (int j=0; j<n; j++) {
            this.decay=new double[i][j];
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T22:29:45.247

您缺少`for`第二个循环的关键字。更正：

```
public Practice(int n) {
    this.n=n;
    for(int i=0; i<n; i++){
        for(int j=0; j<n; j++) {
            this.decay=new double[i][j];
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-17T22:29:11.787

您使用的是括号而不是花括号。

编辑 - 对不起，没有看你格式化它的方式。

# c# - 部署 c# 应用程序，但由于日期格式而在 beta 测试中崩溃

> ID：11531735
> 
> 赞同：3
> 
> 时间：2012-07-17T22:28:21.220
> 
> 标签：c#, .net, datetime, deployment, datetime-format

我想知道是否有人有在全球部署应用程序的经验以及他们如何处理应用程序中的日期格式？

例如，我在英国，日期格式是`DD/MM/YYYY`，但我的应用程序在美国的客户中崩溃，因为日期格式是`MM/DD/YYYY`.

日期以文本形式保存到配置文件中，并在应用程序中调用和使用。但是，英国、欧洲和澳大利亚的客户没有任何问题，但美国和加拿大的客户有。

我假设 .Net 会处理日期并且我使用`DateTime.Parse(strDateFromFile)`它并且它崩溃了。即`"12/31/2010"`失败但`"31/12/2010"`没关系。

我可以在.Net 中做些什么来确保正确解析本地日期格式。

我尝试将字符串转换为已知格式并再次转换回来，但似乎也是一个问题：

```
 static public string DateToString(DateTime dtDate)
    {
        string strDay = dtDate.Day.ToString();
        string strMonth = String.Format("{0:MMMM}", dtDate).ToString();
        string strYear = dtDate.Year.ToString();
        string strDate = string.Format("{0}-{1}-{2}", strDay, strMonth, strYear);

        return strDate;
    }

    static public DateTime StringToDate(string strDate)
    {
        DateTime dtDate = new DateTime();

        try
        {
            dtDate = DateTime.Parse(strDate);
        }
        catch (Exception ex)
        {
            Logger.Log.Error(MethodBase.GetCurrentMethod().ToString(), ex);
            System.Windows.Forms.MessageBox.Show(string.Format("DEBUG INFO:  Date Format: {0}\r\n{1}", strDate, ex.Message));
        }
    } 
```

由于我在整个申请过程中都使用了日期，因此我将不胜感激地接受有关如何处理申请中日期的任何建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:41:59.597

执行 DateTime.Parse 时需要传入当前文化：

`DateTime dt = DateTime.Parse("1/1/2000", Thread.CurrentThread.CurrentUICulture);`

至于为当前线程设置文化，我不确定这是否会根据用户的设置自动发生，或者它是否默认为开发期间使用的文化。

另请注意，对于数字和日期时间（可能还有其他）的 ToString 调用，您将需要使用相同的技巧。如果它成为一个大问题，您可能会考虑使用 ReSharper，它会警告使用特定于文化的 ToStrings。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:54:16.240

如果您接受用户输入，则不会尝试设置文化信息，您只需要知道他们输入内容时会发生什么。换句话说，你需要知道他们的文化信息是什么，并相应地处理它。

System.Globalization 命名空间提供了完成此任务所需的大部分内容。例如，如果我的应用程序在我自己的机器上运行时执行此操作（我在美国）：

```
DateTimeFormatInfo dtfi = CultureInfo.CurrentCulture.DateTimeFormat;
string dateTimeFormatPattern = dtfi.FullDateTimePattern; 
```

我得到这个字符串：

> dddd, MMMM dd, yyyy h:mm:ss tt

或使用 ShortDatePattern：

```
CultureInfo.CurrentCulture.ShortDatePattern = M/d/yyyy 
```

您可以使用此信息来了解用户的期望，并相应地对其进行解析。

检查这个问题/答案：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/cb19f31c-6d30-4cd9-8644-80ce3ecde52f/](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/cb19f31c-6d30-4cd9-8644-80ce3ecde52f/)

但我认为@Eric_Andres 的答案可能更接近您正在寻找的内容......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:08:23.027

我有在不同国家（加拿大、美国）使用的设置文件，但随后它们被检索到我的系统（我在澳大利亚）以找出一些东西。当您查看（2011 年 1 月 10 日）是 10 月 1 日或 1 月 10 日时，事情开始变得非常奇怪。这取决于它的来源，所以我在我的设置文件中远离了人类可读的日期。相反，我使用`DateTime.Now.ToBinary`并存储了很长的时间，无论我在哪里加载它，它总是会正确显示。

对于 Logging，我总是选择一种我喜欢的格式，并在我的 Formatting 中使用它。

`yyyyMMdd HH:mm:ss.ffff`这样，您就不会受到任何区域设置等的摆布。日志记录确实是为了让您能够追踪问题，所以我真的不在乎客户是否正在尝试阅读它。

如果您还与远程系统协调其他系统，请考虑使用 UTC 而不是本地时间来记录您的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T23:00:53.947

如果您需要配置或日志或发送的任何文件，请选择一种日期格式并为其创建手动解析器。 `Split`,`string`读数字`Substring()`,`int.Parse()`他们...

# c# - 参数化查询和 NULL DateTime 值

> ID：11531738
> 
> 赞同：2
> 
> 时间：2012-07-17T22:28:30.167
> 
> 标签：c#, sql, ms-access, ms-access-2007

我正在开发一个程序，该程序从访问数据库中提取字符串字段，将名称（名字和姓氏）与日期分开，然后将名称与日期分开保存在不同的访问数据库中。

除了某些日期值为空之外，我已经完成了所有工作，因此我需要对 SQL 进行参数化，但我无法弄清楚如何使参数化工作。

我已经为变量输入了虚拟值，并将它们添加到表中就好了。我已经删除了下面代码片段中的其他变量，因为它们都是那里的重复。os 是一个包含结构数据的列表。

```
string sqlcmd = "INSERT INTO signatures VALUES ('" + os.QASignature + "', 'QADate = @QADATE'";
System.Data.OleDb.OleDbCommand SQLCommand = new System.Data.OleDb.OleDbCommand(sqlcmd, Connection);
using (SQLCommand)
{
    SQLCommand.Parameters.Add("@QADATE", System.Data.OleDb.OleDbType.Date).Value = os.QADate;
    SQLDataReader = SQLCommand.ExecuteReader();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T22:36:45.907

像下面这样的东西应该是你想要的：

```
string sqlcmd = "INSERT INTO signatures (QASignature, QADate) VALUES (?, ?)";
using (System.Data.OleDb.OleDbCommand SQLCommand = new System.Data.OleDb.OleDbCommand(sqlcmd, Connection))
{
    SQLCommand.Parameters.Add(new OleDbParameter() { Name = "QASignature", Value = os.QASignature, DbType = DbType.String});
    SQLCommand.Parameters.Add(new OleDbParameter() { Name = "QADATE", Value = os.QADate, DbType = DbType.DateTime});
    SQLCommand.ExecuteNonQuery(); //Use ExecuteReader or ExecuteScalar when you want to return something
} 
```

如果 os.QADate 可以为空（`DateTime?`或`System.Nullable<DateTime>`），那么您将执行以下操作：

```
if(os.QADate == null) //Could easily be os.QADate == DateTime.MinValue too, for example
{
    SQLCommand.Parameters.Add(new OleDbParameter() { Name = "@QADATE", Value = DBNull.Value, DbType = DbType.DateTime});
}
else{
    SQLCommand.Parameters.Add(new OleDbParameter() { Name = "@QADATE", Value = os.QADate, DbType = DbType.DateTime});
} 
```

请注意，您不应该像在原始示例中那样混合字符串连接和参数 - 它是一个或另一个！实际上，它应该*只是*参数化以防止 SQL 注入，并获得其他好处（例如更容易键入，并且在某些 RDBMS 中，参数化查询性能更好）。

另请注意，OleDBCommand 不会从命名参数中受益——参数必须按照它们在 SQL 中出现的顺序添加到查询中。这就是 SQL Query 包含两个问号的原因——它们只是占位符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:32:22.480

您需要“转换”`null`为[`DBNull.Value`](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx). 实现这一点的一种方法，假设 QADate 是一个可为空的 DateTime（所以 DateTime？）可能是：

```
... .Value = os.QADate ?? DBNull.Value; 
```

?? 是[空合并运算符](http://msdn.microsoft.com/en-us/library/ms173224.aspx)。

编辑：您实际上可能需要强制转换以确保两个操作数属于同一类型：

```
... .Value = (object)os.QADate ?? DBNull.Value; 
```

另外，你为什么不使用 QASignature 的参数？您为什么要“内联”该值？我不知道 QASignature 会包含什么，但这会使您容易受到[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)的攻击。

最后，为什么要使用[ExecuteReader()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader.aspx)进行插入？为什么不使用[ExecuteNonQuery()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:37:19.213

DateTime 不能为 null，如果该值未初始化，则为 DateTime.MinValue。您需要针对这种情况进行测试，并将参数也用于字符串值。

```
using System.Data.OleDb;
....

string sqlcmd = "INSERT INTO signatures VALUES (@QASignature, @QADATE)"; 
using(OleDbCommand SQLCommand = new OleDbCommand(sqlcmd, Connection))
{ 
    SQLCommand.Parameters.AddWithValue("@QASignature",  os.QASignature);
    SQLCommand.Parameters.Add("@QADATE", OleDbType.Date).Value = 
               (os.QADate == DateTime.MinValue 
               ? (object)DBNull.Value
               : (object)os.QADate); 
    SQLDataReader = SQLCommand.ExecuteNonQuery(); 
} 
```

顺便说一句，插入语句通常由`ExecuteNonQuery`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T22:33:26.633

使用[DBNull.Value](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)：

```
SQLCommand.Parameters.Add("@QADATE", 
                          System.Data.OleDb.OleDbType.Date).Value = DBNull.Value; 
```

附带说明一下，使用[OleDbParameterCollection.AddWithValue 会](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbparametercollection.addwithvalue.aspx)自动推断数据类型并允许您缩短代码：

```
SQLCommand.Parameters.AddWithValue("@QADATE", DBNull.Value); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T22:35:30.220

考虑使用[Nullable(of T)](http://msdn.microsoft.com/en-us/library/b3h38hb0.aspx)结构。然后，只有在源对象中实际存在变量时才能设置它。否则，该值将设置为 Null 并将其自身很好地传递给 SQL 参数。许多旧的 TableAdapter 类和较新的 EntityFramework 对象也可以使用 Nullable (of T) 结构。

# c# - 将枚举值与本地化字符串资源链接

> ID：11531739
> 
> 赞同：7
> 
> 时间：2012-07-17T22:28:32.447
> 
> 标签：c#, .net, enums, encapsulation

相关： [从枚举属性中获取枚举](https://stackoverflow.com/questions/2787506/cast-string-to-enum-with-enum-attribute)

我想要绑定枚举的最可维护的方式，并且它将本地化​​字符串值关联到某些东西。

如果我将枚举和类放在同一个文件中，我会觉得有点安全，但我必须假设有更好的方法。我也考虑过让枚举名称与资源字符串名称相同，但恐怕我不能总是在这里强制执行。

```
using CR = AcmeCorp.Properties.Resources;

public enum SourceFilterOption
{
    LastNumberOccurences,
    LastNumberWeeks,
    DateRange
    // if you add to this you must update FilterOptions.GetString
}

public class FilterOptions
{
    public Dictionary<SourceFilterOption, String> GetEnumWithResourceString()
    {
        var dict = new Dictionary<SourceFilterOption, String>();
        foreach (SourceFilterOption filter in Enum.GetValues(typeof(SourceFilterOption)))
        {
            dict.Add(filter, GetString(filter));
        }
        return dict;
    }

    public String GetString(SourceFilterOption option)
    {
        switch (option)
        {
            case SourceFilterOption.LastNumberOccurences:
                return CR.LAST_NUMBER_OF_OCCURANCES;
            case SourceFilterOption.LastNumberWeeks:
                return CR.LAST_NUMBER_OF_WEEKS;
            case SourceFilterOption.DateRange:
            default:
                return CR.DATE_RANGE;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-17T22:32:33.753

您可以将 DescriptionAttribute 添加到每个枚举值。

```
public enum SourceFilterOption
{
    [Description("LAST_NUMBER_OF_OCCURANCES")]
    LastNumberOccurences,
    ...
} 
```

需要时提取描述（资源密钥）。

```
FieldInfo fi = value.GetType().GetField(value.ToString());
DescriptionAttribute[] attributes = (DescriptionAttribute[])fi.GetCustomAttributes(typeof(DescriptionAttribute),     
if (attributes.Length > 0)
{
    return attributes[0].Description;
}
else
{
    return value.ToString();
} 
```

[http://geekswithblogs.net/paulwhitblog/archive/2008/03/31/use-the-descriptionattribute-with-an-enum-to-display-status-messages.aspx](http://geekswithblogs.net/paulwhitblog/archive/2008/03/31/use-the-descriptionattribute-with-an-enum-to-display-status-messages.aspx)

编辑：回复评论（@Tergiver）。在我的示例中使用（现有的）DescriptionAttribute 是为了快速完成工作。您最好实现自己的自定义属性，而不是使用其目的之外的属性。像这样的东西：

```
[AttributeUsage(AttributeTargets.Field, AllowMultiple = false, Inheritable = false)]
public class EnumResourceKeyAttribute : Attribute
{
 public string ResourceKey { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T13:28:14.107

如果有人没有正确更新它，你可能会立即崩溃。

```
public String GetString(SourceFilterOption option)
{
    switch (option)
    {
        case SourceFilterOption.LastNumberOccurences:
            return CR.LAST_NUMBER_OF_OCCURANCES;
        case SourceFilterOption.LastNumberWeeks:
            return CR.LAST_NUMBER_OF_WEEKS;
        case SourceFilterOption.DateRange:
            return CR.DATE_RANGE;
        default:
            throw new Exception("SourceFilterOption " + option + " was not found");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-26T06:45:25.097

我通过以下方式映射到资源： 1\. 使用 ctor 定义一个类 StringDescription 获取 2 个参数（资源类型及其名称）

```
[AttributeUsage(AttributeTargets.Field, AllowMultiple = false)]
class StringDescriptionAttribute : Attribute
{
    private string _name;
    public StringDescriptionAttribute(string name)
    {
        _name = name;
    }

    public StringDescriptionAttribute(Type resourseType, string name)
    {
            _name = new ResourceManager(resourseType).GetString(name);

    }
    public string Name { get { return _name; } }
} 
```

2.  为任一文化创建资源文件（例如 WebTexts.resx 和 Webtexts.ru.resx）。让我们成为红色，绿色等颜色......

3.  定义枚举：

    枚举颜色{ [StringDescription(typeof(WebTexts),"Red")] Red=1 , [StringDescription(typeof(WebTexts), "Green")] Green = 2, [StringDescription(typeof(WebTexts), "Blue")] Blue = 3, [StringDescription("带有疯狂黑眼圈的 Antracit")] AntracitWithMadDarkCircles

    }

4.  定义一个通过反射获取资源描述的静态方法

    公共静态字符串 GetStringDescription(Enum en) {

    ```
     var enumValueName = Enum.GetName(en.GetType(),en);

        FieldInfo fi = en.GetType().GetField(enumValueName);

        var attr = (StringDescriptionAttribute)fi.GetCustomAttribute(typeof(StringDescriptionAttribute));

        return attr != null ? attr.Name : "";
    } 
    ```

5.  吃 ：

    颜色颜色；col = 颜色.红色; Thread.CurrentThread.CurrentUICulture = new System.Globalization.CultureInfo("en-US");

    ```
     var ListOfColors = typeof(Colour).GetEnumValues().Cast<Colour>().Select(p => new { Id = p, Decr = GetStringDescription(p) }).ToList();

        foreach (var listentry in ListOfColors)
            Debug.WriteLine(listentry.Id + " " + listentry.Decr); 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-24T07:08:12.297

有一种最简单的方法可以根据资源文件中的文化获取枚举描述值

我的枚举

```
 public enum DiagnosisType
    {
        [Description("Nothing")]
        NOTHING = 0,
        [Description("Advice")]
        ADVICE = 1,
        [Description("Prescription")]
        PRESCRIPTION = 2,
        [Description("Referral")]
        REFERRAL = 3 
```

}

我已经使资源文件和密钥与枚举描述值相同

[Resoucefile和Enum Key and Value Image，点击查看resouce文件图片](https://i.stack.imgur.com/3TG92.png)

```
 public static string GetEnumDisplayNameValue(Enum enumvalue)
    {
        var name = enumvalue.ToString();
        var culture = Thread.CurrentThread.CurrentUICulture;
        var converted = YourProjectNamespace.Resources.Resource.ResourceManager.GetString(name, culture);
        return converted;
    } 
```

在视图上调用此方法

```
 <label class="custom-control-label" for="othercare">YourNameSpace.Yourextenstionclassname.GetEnumDisplayNameValue(EnumHelperClass.DiagnosisType.NOTHING )</label> 
```

它将字符串accordig返回到您的文化

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-23T23:58:42.467

我必须在 WPF 中使用它，这是我实现它的方式

首先你需要定义一个属性

```
public class LocalizedDescriptionAttribute : DescriptionAttribute
{
    private readonly string _resourceKey;
    private readonly ResourceManager _resource;
    public LocalizedDescriptionAttribute(string resourceKey, Type resourceType)
    {
        _resource = new ResourceManager(resourceType);
        _resourceKey = resourceKey;
    }

    public override string Description
    {
        get
        {
            string displayName = _resource.GetString(_resourceKey);

            return string.IsNullOrEmpty(displayName)
                ? string.Format("[[{0}]]", _resourceKey)
                : displayName;
        }
    }
} 
```

您可以像这样使用该属性

```
public enum OrderType
{
    [LocalizedDescription("DineIn", typeof(Properties.Resources))]
    DineIn = 1,
    [LocalizedDescription("Takeaway", typeof(Properties.Resources))]
    Takeaway = 2
} 
```

然后定义一个转换器

```
public class EnumToDescriptionConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo language)
    {
        var enumValue = value as Enum;

        return enumValue == null ? DependencyProperty.UnsetValue : enumValue.GetDescriptionFromEnumValue();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo language)
    {
        return value;
    }
} 
```

然后在你的 XAML

```
<cr:EnumToDescriptionConverter x:Key="EnumToDescriptionConverter" />

<TextBlock Text="{Binding Converter={StaticResource EnumToDescriptionConverter}}"/> 
```

# python - 如何编写加密单元测试？

> ID：11531741
> 
> 赞同：2
> 
> 时间：2012-07-17T22:28:35.067
> 
> 标签：python, unit-testing, encryption

我已经为 编写了一些抽象`Crypto.Cipher.AES.encrypt/decrypt`，我想为它编写单元测试。编写单元测试`decrypt`很容易，但是有没有合理的方法来测试加密本身是否发生？例如，有没有办法查看一个字节串并知道*是的，那是一块 AES 加密数据*？如果不是（也许这会泄露太多信息），我有什么选择来测试我的`encrypt`函数是否具有合理的输出？

```
def encrypt(plaintext):
    """Return 'plaintext' AES encrypted."""
    initialization_vector = Random.new().read(AES.block_size)
    cipher = AES.new(settings.secret, AES.MODE_CFB, initialization_vector)
    return initialization_vector + cipher.encrypt(bytes(plaintext.encode('utf-8')))

def decrypt(crypt):
    """Return 'crypt' AES decrypted."""
    initialization_vector, crypt = crypt[:AES.block_size], crypt[AES.block_size:]
    cipher = AES.new(settings.secret, AES.MODE_CFB, initialization_vector)
    return cipher.decrypt(crypt)

# … this is a method of a unittest.TestCase subclass:
def test_decrypt(self):
    """Test that a message can be decrypted."""
    crypt = utils.encrypt("abcdefg")
    decrypt = utils.decrypt(crypt)
    self.assertEqual("abcdefg", decrypt)

def test_encrypt(self):
    """Test that a message can be encrypted. … if you can"""
    crypt = utils.encrypt("abcdefg")
    self.assertSomethingmumblemumble(crypt) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-17T22:53:13.517

伪随机排列的整个想法——和分组密码就是这样——是它看起来是随机的。你可以运行测试来检查随机性，但我很确定这对于 JUnit 测试来说有点太多了。所以我会接受 sr2222 的建议，并简单地通过解密进行测试。

您可以通过使用原始块解密并测试那里的内容来测试模式和填充。您还可以测试加密后事物是否相等（块加密本身对于纯文本和密文具有 1:1 的关系）或加密是否不同。您可能还可以测试加密数据的大小是否正确。

然而，加密本身不能在没有解密的情况下进行测试，这首先是它背后的想法：你无法获得关于明文或密钥的信息——任何看起来不随机的东西都会违背这些概念。

[编辑] 测试加密的最佳方法可能是针对[官方测试向量](http://csrc.nist.gov/archive/aes/rijndael/wsdindex.html)对其进行测试，如果这些还不够或不可用，请针对（输出）已知的良好实现（例如经过验证的 openssl）或参考实现进行测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:16:29.080

不要测试结果。模拟您的密码和随机提供程序并测试它们是否使用正确的参数调用以及中间结果是否在它们之间正确传递

# windows-phone-7 - 查询和使用深色口音/主题色

> ID：11531745
> 
> 赞同：1
> 
> 时间：2012-07-17T22:29:08.793
> 
> 标签：windows-phone-7

如果您查看手机短信，它会在聊天对话中显示 2 种颜色。一种颜色是您选择的强调色，另一种（您的信息）是该强调色的较暗版本。当我正在编写自己的聊天应用程序并尝试使用与操作系统相同的颜色时，我想找出那个深色强调色的资源名称是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:31:56.443

查看这篇 MSDN 文章： http: [//msdn.microsoft.com/en-us/library/ff769552](http://msdn.microsoft.com/en-us/library/ff769552(v=vs.92).aspx) (v=vs.92).aspx 。我不是积极的，但我认为你正在寻找`PhoneContrastForegroundBrush`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:55:57.273

这是获得深色强调色的方法：

```
 Color accent = (Color)Resources["PhoneAccentColor"];
        Color darkAccent = Color.FromArgb(accent.A, (byte)(accent.R / 1.5), (byte)(accent.G / 1.5), (byte)(accent.B / 1.5)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T05:47:20.320

它被称为`PhoneContrastBackgroundBrush`。它代表一种颜色，有助于对比分配`PhoneBackgroundBrush`.

# mongodb - MongoDB 的 fsync 是做什么用的？

> ID：11531757
> 
> 赞同：6
> 
> 时间：2012-07-17T22:30:07.047
> 
> 标签：mongodb, mongodb-query

我已经使用 MongoDB 一段时间了，看到它`fsync`等待数据刷新到磁盘。好的，所以我认为这是数据安全的解决方案。

它运行良好，需要比 SQL 替代方案更长的时间。然后我看到我可以放`syncdelay`to `0`，然后速度又回来了，但我想未来有很多并发请求会怎么样。所以我`fsync`从更新和插入中删除了选项，并删除了`syncdelay`配置选项。

为了测试数据是否正在写入，我在更新后快速检查了 Rockmongo，数据确实在那里，超级快！

所以真的，`fsync`如果它使写入变慢并且没有它写入发生并且无论如何都快，那是为了什么呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-17T22:35:14.610

根据 Mongo 文档：

> 的主要用途`fsync`是刷新和锁定数据库以进行备份。

还

> 该`fsync`操作在运行时会阻止所有其他写入操作。

阻塞似乎是原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:41:17.477

`fsync`从技术上讲，它是一个强制将所有数据刷新到磁盘的管理命令。你不应该在你的代码中使用它，至少通常不是。它用于锁定数据库以进行备份等。

MongoDB 中的数据安全来自复制/分片/日志，而不是强制写入。这样就违背了事情的目的。

Java 驱动程序在类中包装了这个“写入和同步”概念`WriteConcern`，我从来没有真正喜欢过它。您不必决定数据的哪一部分或多或少重要，而只需信任该工具即可完成其工作。

此外，如果您设置`syncdelay`为零，请确保关闭日记功能。看到[这个](http://www.mongodb.org/display/DOCS/--syncdelay)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:40:03.287

正如其他答案所说，该`fsync`命令强制刷新，通常在您锁定数据文件以获取时间点快照之前使用。

有一个“fsync”[写关注选项](http://www.mongodb.org/display/DOCS/getLastError+Command#getLastErrorCommand-%7B%7Bfsync%7D%7D)，`getLastError`它将等待返回所有挂起的数据已刷新到磁盘。但是，您通常不会使用它，“j”选项（一旦发生日志就会返回）返回速度要快得多，并且仍然可以确保持久写入。您可以通过更新/插入命令作为您选择的驱动程序中的安全选项，让它自动`getLastError`为您运行命令。

# mysql - 如何选择 2 列的唯一组合并将结果插入到具有 auto_increment 功能的第三个表中

> ID：11531761
> 
> 赞同：0
> 
> 时间：2012-07-17T22:30:40.270
> 
> 标签：mysql, distinct

我有一个名为 pat_authors 的表，有 2 列 - last_name, first_initials 我想选择两列的不同组合。以下命令用于检索正确的信息：

```
select distinct last_name, first_initials from pat_authors; 
```

但是，我想检索相同的信息，然后将其插入另一个名为 unique_authors 的表中，其中 unique_authors 有 3 列 - authorID、last_name、first_initials。

我已经尝试了很多代码变体，我快疯了。以下是我认为最接近正确的两次尝试：

```
select distinct author_last_name, author_initials into uniqueauthors from pat_authors; 
```

这给了我一个错误-`1327:undeclared variable: uniqueauthors`

我也试过

```
insert into uniqueauthors select distinct author_last_name, author_initials from pat_authors; 
```

这给了我`Error Code: 1136\. Column count doesn't match value count at row 1.`在这里我认为我会没事的，因为我的`authorID`专栏是`NOT NULL AUTO_INCREMENT`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:38:11.890

它不起作用的原因是该`INSERT`语句不知道从`SELECT`. 您需要明确指定要`INSERT`进入的列：

```
INSERT INTO uniqueauthors (last_name, first_initials)
SELECT DISTINCT author_last_name, author_initials
FROM pat_authors 
```

或者，您可以隐含列规范。但是，如果这样做，则需要确保表定义中有相同数量的列（按匹配顺序），`SELECT`因为表定义中有列（甚至包括自动递增列）。你怎么还能让列自动递增？您可以简单地指定`NULL`为中的第一列`SELECT`：

```
INSERT INTO uniqueauthors 
SELECT DISTINCT NULL, author_last_name, author_initials 
FROM pat_authors 
```

**有用的提示：**每当您尝试将`NULL`值插入到自动递增的列中时，它只会插入自动递增的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T22:39:32.223

如果您不使用所有列，则需要指定要使用的列

```
insert into uniqueauthors(last_name, first_initials) select distinct author_last_name, author_initials from pat_authors; 
```

或者只是为所有列设置一个值

```
insert into uniqueauthors select null, author_last_name, author_initials from pat_authors GROUP BY author_last_name, author_initials; 
```

# matlab - matlab多个x轴一个在另一个下面

> ID：11531762
> 
> 赞同：8
> 
> 时间：2012-07-17T22:30:41.093
> 
> 标签：matlab, axis

我正在尝试创建一个 matlab 图，其中多个 x 轴一个在另一个之下，一个 y 轴。

我查看了 Mathworks 文件交换，只有多个 y 轴的建议/脚本。我想[为 R 实现类似这个问题的](https://stackoverflow.com/questions/8443820/r-multiple-x-axis-with-annotations)东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-05T15:25:57.493

如果您只需要第二个轴来显示不同的比例，这是一个示例解决方案（Jeff_K 的解决方案，但更有效）：

```
first_axis = gca;
sqz = 0.12; %// distance to squeeze the first plot
set(first_axis, 'Position', get(first_axis, 'Position') + [0 sqz 0 -sqz ]);
ax2 = axes('Position', get(first_axis, 'Position') .* [1 1 1 0.001] - [0 sqz 0 0],'Color','none');
scale_factor = 42; %// change this to your satisfaction
xlim(get(first_axis, 'XLim') * scale_factor);
set(ax2, 'XScale', get(first_axis, 'XScale')); %// make logarithmic if first axis is too 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-14T06:39:20.273

如果您实际上不需要在辅助轴上绘制数据，而只是使用它们来显示比例（如您链接到的示例），您只需在适当的位置，并将高度设置得非常小：

```
ax2 = axes('Position',[0.1 0.1 0.8 0.001],'Color','none') 
```

然后适当地设置刻度标签。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T04:27:33.443

您需要为此使用补丁功能。在这里查看更多详细信息：http: [//www.mathworks.com/matlabcentral/fileexchange/26550-myplotyy](http://www.mathworks.com/matlabcentral/fileexchange/26550-myplotyy)

# javascript - onChange 用下拉标题而不是值替换 img src

> ID：11531768
> 
> 赞同：0
> 
> 时间：2012-07-17T22:31:03.420
> 
> 标签：javascript, image, onchange

我有一组单选按钮，单击时会起作用，它将根据单击更改图像。

现在我想根据下拉框选择更改图像。这是我的脚本的一部分。使用“标题”不合适吗？

**另外，我在一个函数中有一个函数感觉不对……我只是想弄清楚`.change(function () {`如果它已经被触发了，我是否还需要这个部分`select's onchange`？我尝试了有无，但它仍然没有替换图像。

```
<script type="text/javascript">
    function doCalc(){
    var roomX = $('#room_str').val();
    var otherroomX = $('#other_room').val();
    var qtyX = $('#qty_str').val();
    // etc. etc..
    // below is code that pertains to what i'm trying to do 

    var imgFldr2 = '/wp-content/uploads/2012/07/';
    var imagename = $('#laserlite_color option:selected').attr('title');
    $('#valance-colors-placeholder img').attr('src', imgFldr2 + imagename); 
    });
    // more code 
```

和下拉框...

```
<select name="laserlite_color" id="laserlite_color" onchange="doCalc();">
    <option value="Gold 301" title="Gold-301.jpg">Gold</option>
    <option value="Chrome 303" title="Chrome-301.jpg">Chrome</option>
    <option value="Light Oak 304" title="Light-Oak-304.jpg">Light Oak</option>
    <option value="Dark Walnut 302" title="Dark-Walnut-302.jpg">Dark Walnut</option>
    <option value="White 307" title="White-307.jpg">White</option>
    <option value="Silk 630" title="Silk-630.jpg">Silk</option>
    <option value="Lilac 688" title="Lilac-688.jpg">Lilac</option>
    <option value="Blush 672" title="Blush-672.jpg">Blush</option>
    <option value="Sage 655" title="Sage-655.jpg">Sage</option>
    <option value="Denim 641" title="Denim-641.jpg">Denim</option>
    <option value="Black Satin 684" title="Black-Satin-684.jpg">Black Satin</option>
</select><br>

<div id="valance-colors-placeholder"><img src="/wp-content/uploads/2012/07/Gold-301.jpg"></div> 
```

编辑：我已经用下面尼克的部分代码更新了我的代码。我只是想在这个网站上解释一下，我记得程序员说过要使用`alert('whatever variable you need to see returned here');`，这有助于查看代码的哪些部分是正常工作的，哪些部分不能正常工作。谢谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:52:52.480

是的，您在这里所做的是在每次有人更改选择时添加一个 onchange 事件处理程序。除此之外，事件处理程序不会做你认为应该做的事情，因为“this”不是你认为的那样。当您尝试根据“this.title”设置图像时，这可能是未定义的或空字符串，因为“this”指的是选择标签，而不是选定的选项。

除此之外，我建议在 html 中删除 select 上的 onchange 属性，让 jQuery 在你的脚本标签中做它擅长的事情：

```
$().ready(function() {
    $('#laserlite_color').change(function () {
        var roomX = $('#room_str').val();
        // ... the rest of what you're doing in doCalc ...
        var imgFldr2 = '/wp-content/uploads/2012/07/';
        var filename = $('#laserlite_color option:selected').attr('title');
        $('#valance-colors-placeholder img').attr('src', imgFldr2 + filename);
    });
}); 
```

至于（ab）使用title属性，你可能会认为选项的值和文件名之间应该有严格的关系。如果是这种情况，那么您可以在 select 标记上使用 jQuery 的 val()。幸运的是，从值到图像文件似乎存在一对一的映射。试试这个文件名行，而不是：

```
var filename = $('#laserlite_color').val().replace(' ', '-') + '.jpg'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:00:25.513

测试这个：

**HLML**

```
<select name="laserlite_color" id="laserlite_color"  onchange="doCalc(this);"> 
```

**Javascript**

```
function doCalc(selectobj) {
        var value1 = selectobj[selectobj.selectedIndex].value
        var text1 = selectobj[selectobj.selectedIndex].text
       //your code
       //your code
       //your code
         $('#valance-colors-placeholder img').attr('src', imgFldr + value1);
    } 
```

需要发送事件的值以在您的 JavaScript 函数中捕获它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:17:37.843

您引用的`select`标题不存在并且返回空字符串。它是具有标题属性的选项。如果未调用 onchange，您可能需要将其放入`$(document).ready(...)`

```
$('#laserlite_color').change(function () {
      var title = this.options[this.selectedIndex].title;
      $('#valance-colors-placeholder img').attr('src', imgFldr+title); 
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-23T12:49:06.763

**这是您应该在 html 部分中添加的选择选项**

```
<select name="number" id="course" style="width:158px;" onchange="getImage(this)">
                    <option value="" disabled selected>Select your option</option>
                   <option value= 1 > Image1 </option>
                    <option value= 2 > Image2 </option>
                    </select> 
```

**为显示图像创建单独的 css**

```
<img id="imgt" style="width:750px; height: 475px;"/></div> 
```

**这是脚本**

```
 <script type="text/javascript">
            function getImage(v) {
                var num = v.value;                
                if (num == 1) {
                    document.getElementById("imgt").setAttribute("src", "images/image1.png");
                }
                else  (num == 2) {
                    document.getElementById("imgt").setAttribute("src", "images/image2.png");
                }
                }
        </script> 
```

# asp.net-mvc - 在 MVC 创建视图上保存多对多关系数据

> ID：11531769
> 
> 赞同：35
> 
> 时间：2012-07-17T22:31:03.013
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, razor, many-to-many

我在保存创建视图的结果时遇到了多对多关系的一些问题。

我想为一个新的用户个人资料创建一个页面，该页面有一个清单，可以让他们选择课程（多对多关系）。我的视图从`Courses`数据库中获取记录并用复选框显示它们。

一旦用户发布数据，我想更新我的`userprofile`模型，以及`courses`多对多关系。这就是我缺少的代码！

我是 MVC 的新手，我一直在研究，但我还做不到。

我正在关注这个例子： [http ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an- asp-net-mvc-应用程序](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/updating-related-data-with-the-entity-framework-in-an-asp-net-mvc-application)

这是模型：

```
public class UserProfile
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Courses>  usercourses { get; set; }
}

public class Courses
{
    public int CourseID { get; set; }
    public string CourseDescripcion { get; set; }
    public virtual ICollection<UserProfile> UserProfiles { get; set; }
}

public class UserProfileDBContext : DbContext
{
    public DbSet<UserProfile> UserProfiles { get; set; }
    public DbSet<Courses> usrCourses{ get; set; }
} 
```

我还添加了一个 ViewModel：

```
namespace Mysolution.ViewModels
{
    public class AssignedCourseData
    {
        public int CourseID { get; set; }
        public string CourseDescription { get; set; }
        public bool Assigned { get; set; }
    }
} 
```

这是`create`填充课程复选框的控制器：

```
public ActionResult Create()
{
    PopulateCoursesData();
    return View();
}

private void PopulateCoursesData()
{
    var CoursesData = db.usrCourses;
    var viewModel = new List<AssignedCourseData>();
    foreach (var item in CoursesData)
    {
        viewModel.Add(new AssignedCourseData {
            CourseID = item.CourseID,
            CourseDescription  = item.CourseDescription,
            Assigned = false });
    }
    ViewBag.CoursePopulate = viewModel;
} 
```

这是视图

```
@{
    int cnt = 0;
    List<MySolution.ViewModels.AssignedCourseData> courses = ViewBag.CoursePopulate;

    foreach (var course in courses)
    {
        <input type="checkbox" name="selectedCourse" value="@course.CourseID" /> 
        @course.CourseDescription
    }
} 
```

这是获取数据的控制器（以及我想要保存它的位置）。它作为`string[] selectedCourse`复选框的参数：

```
[HttpPost]
public ActionResult Create(UserProfile userprofile, string[] selectedCourse)
{
    if (ModelState.IsValid)
    {
        db.UserProfiles.Add(userprofile);

        //TO DO: Save data from many to many (this is what I can't do!)

        db.SaveChanges();
    }

    return View(userprofile);
} 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-07-21T16:34:16.707

**编辑**：我用代码在 3 篇博客文章中写了这个

*   [第 1 部分](http://codenodes.wordpress.com/2013/01/13/saving-many-to-many-data-in-mvc4-and-ef-4-1-code-first-part-1/ "MVC4 多对多第 1 部分")设置解决方案并创建新用户
*   [第 2 部分](http://codenodes.wordpress.com/2013/01/17/saving-many-to-many-data-in-mvc4-and-ef-4-1-code-first-part-2/ "MVC4 多对多第 2 部分")添加课程并将其与用户个人资料一起保存
*   [第 3 部分](http://codenodes.wordpress.com/2013/04/13/saving-many-to-many-data-in-mvc4-and-ef-4-1-code-first-part-3/)允许编辑和删除用户及其课程

Github 来源： [https ://github.com/cbruen1/mvc4-many-to-many](https://github.com/cbruen1/mvc4-many-to-many)

* * *

例如，我认为您在某些命名中已经偏离了惯例，所以我在我认为合适的地方进行了更改。在我看来，将课程作为 UserProfile 的一部分发回的最佳方式是让它们由编辑器模板呈现，我将进一步解释。

以下是我将如何实现所有这些：

（感谢@Slauma 在保存新课程时指出了一个错误）。

*   在您的模型中，您的“课程”类是单个实体，通常命名为 Course，而类 Course 的集合将命名为 Courses。
*   而不是在 ViewBag 中使用 AssignedCourseData 使用视图模型
*   在创建新用户时实现这一点 - 即，为包含将与 UserProfileViewModel 一起回发的 AssignedCourseData 视图模型的 Userprofile 有一个标准的 Create 视图。

从 DB 开始，将 UserProfile 集合保持原样，并将 Course 集合命名为 Courses：

```
public DbSet<UserProfile> UserProfiles { get; set; }
public DbSet<Course> Courses { get; set; } 
```

在 DbContext 类中重写 OnModelCreating 方法。这是您映射 UserProfile 和 Course 之间的多对多关系的方式：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Entity<UserProfile>()
        .HasMany(up => up.Courses)
        .WithMany(course => course.UserProfiles)
        .Map(mc =>
        {
            mc.ToTable("T_UserProfile_Course");
            mc.MapLeftKey("UserProfileID");
            mc.MapRightKey("CourseID");
        }
    );

    base.OnModelCreating(modelBuilder);
} 
```

我还将在同一个命名空间中添加一个模拟初始化器类，它将为您提供一些课程，这意味着您不必在每次模型更改时手动添加它们：

```
public class MockInitializer : DropCreateDatabaseAlways<MVC4PartialViewsContext>
{
    protected override void Seed(MVC4PartialViewsContext context)
    {
        base.Seed(context);

        var course1 = new Course { CourseID = 1, CourseDescripcion = "Bird Watching" };
        var course2 = new Course { CourseID = 2, CourseDescripcion = "Basket weaving for beginners" };
        var course3 = new Course { CourseID = 3, CourseDescripcion = "Photography 101" };

        context.Courses.Add(course1);
        context.Courses.Add(course2);
        context.Courses.Add(course3);
    }
} 
```

将此行添加到 Application_Start() Global.asax 以启动它：

```
Database.SetInitializer(new MockInitializer()); 
```

所以这是模型：

```
public class UserProfile
{
    public UserProfile()
    {
        Courses = new List<Course>();
    }
    public int UserProfileID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Course> Courses { get; set; }
}

public class Course
{
    public int CourseID { get; set; }
    public string CourseDescripcion { get; set; }
    public virtual ICollection<UserProfile> UserProfiles { get; set; }
} 
```

现在在控制器中创建 2 个新的操作结果以创建新的用户配置文件：

```
public ActionResult CreateUserProfile()
{
    var userProfileViewModel = new UserProfileViewModel { Courses = PopulateCourseData() };

    return View(userProfileViewModel);
}

[HttpPost]
public ActionResult CreateUserProfile(UserProfileViewModel userProfileViewModel)
{
    if (ModelState.IsValid)
    {
        var userProfile = new UserProfile { Name = userProfileViewModel.Name };

        AddOrUpdateCourses(userProfile, userProfileViewModel.Courses);
        db.UserProfiles.Add(userProfile);
        db.SaveChanges();

        return RedirectToAction("Index");
    }

    return View(userProfileViewModel);
} 
```

这是您的 PopulateCourseData 类似于您拥有它的方式，只是没有放入 ViewBag - 它现在是 UserProfileViewModel 上的一个属性：

```
private ICollection<AssignedCourseData> PopulateCourseData()
{
    var courses = db.Courses;
    var assignedCourses = new List<AssignedCourseData>();

    foreach (var item in courses)
    {
        assignedCourses.Add(new AssignedCourseData
        {
            CourseID = item.CourseID,
            CourseDescription = item.CourseDescripcion,
            Assigned = false
        });
    }

    return assignedCourses;
} 
```

创建一个编辑器模板 - 如果您还没有一个名为 EditorTemplates 的新文件夹，请在您的 Views\Shared 文件夹中创建一个新文件夹。添加一个名为 AssignedCourseData 的新局部视图并粘贴下面的代码。这是正确呈现和命名所有复选框的魔力 - 您不需要 for 每个循环，因为编辑器模板将创建集合中传递的所有项目：

```
@model AssignedCourseData
@using MySolution.ViewModels

<fieldset>
    @Html.HiddenFor(model => model.CourseID)    
    @Html.CheckBoxFor(model => model.Assigned)
    @Html.DisplayFor(model => model.CourseDescription)
</fieldset> 
```

在您的视图模型文件夹中创建一个用户配置文件视图模型 - 这具有一组 AssignedCourseData 对象：

```
public class UserProfileViewModel
{
    public int UserProfileID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<AssignedCourseData> Courses { get; set; }
} 
```

添加一个名为 CreateUserprofile.cshtml 的新视图来创建用户配置文件 - 您可以右键单击已添加的 CreateUserProfile 控制器方法并选择“添加视图”：

```
@model UserProfileViewModel
@using MySolution.ViewModels

@using (Html.BeginForm("CreateUserProfile", "Course", FormMethod.Post))
{
    @Html.ValidationSummary(true)

    <fieldset>

        @Html.DisplayFor(model => model.Name)
        @Html.EditorFor(model => model.Name)

        // Render the check boxes using the Editor Template
        @Html.EditorFor(x => x.Courses)

    </fieldset>

    <p>
        <input type="submit" value="Create" />
    </p>    
} 
```

这将正确呈现字段名称，以便在表单回发到控制器时它们是用户配置文件视图模型的一部分。这些字段将被命名为：

```
<fieldset>
    <input data-val="true" data-val-number="The field CourseID must be a number." data-val-required="The CourseID field is required." id="Courses_0__CourseID" name="Courses[0].CourseID" type="hidden" value="1" />    
    <input data-val="true" data-val-required="The Assigned field is required." id="Courses_0__Assigned" name="Courses[0].Assigned" type="checkbox" value="true" /><input name="Courses[0].Assigned" type="hidden" value="false" />
    Bird Watching 
</fieldset> 
```

除了分别用 1 和 2 索引之外，其他字段的命名方式类似。最后，这里介绍了在发回表单时如何将课程保存到新的用户配置文件中。将此方法添加到您的控制器 - 当表单回发时，从 CreateUserProfile 操作结果调用此方法：

```
private void AddOrUpdateCourses(UserProfile userProfile, IEnumerable<AssignedCourseData> assignedCourses)
{
    foreach (var assignedCourse in assignedCourses)
    {
        if (assignedCourse.Assigned)
        {
            var course = new Course { CourseID = assignedCourse.CourseID }; 
            db.Courses.Attach(course); 
            userProfile.Courses.Add(course); 
        }
    }
} 
```

一旦课程成为用户配置文件的一部分，EF 就会处理这些关联。它将为在 OnModelCreating 中创建的 T_UserProfile_Course 表中选择的每个课程添加一条记录。这是 CreateUserProfile 操作结果方法，显示回发的课程：

![发回控制器的课程复选框](../Images/05798f8b463926fc07748273820bb7d1.png)

我选择了 2 门课程，您可以看到这些课程已添加到新的用户配置文件对象中：

![添加到新用户配置文件对象的课程](../Images/27c9d47d669bff2d3539affff45b36cd.png)

# java - 如何以编程方式将值反编译为源文字？

> ID：11531775
> 
> 赞同：1
> 
> 时间：2012-07-17T22:31:29.300
> 
> 标签：java, decompiler, dex2jar

我正忙于一个简单的 Android 反编译器。我想做一个漂亮的反编译视图。我使用 dex2jar。

假设我有一个字段声明：`public byte[] test = new byte[2];` 随着`FieldVisitor` 我得到：

```
 public as modifier
 byte[] as type
 test as name
 and an Object as value <-- 
```

如果您有像`byte[2]`, 这样的对象，是否有可能获得`new byte[2]` **`literal`**支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:50:16.460

编码：

```
public class Foo {
    public byte[] bar = new byte[3];
} 
```

编译为相同：

```
class Foo2 {
    public byte[] bar;

    public Foo2() {
        this.bar = new byte[3];
    }
} 
```

这里没有“文字”，字段初始化程序和初始化程序块只是被添加到每个构造函数的代码之前（我认为是源代码顺序）——您要查找的信息不会被保留。您必须查看那些构造函数的反编译代码并以某种方式对其进行分析，但这将是模棱两可的。

此构造函数的操作码是：

```
0:  aload_0
1:  invokespecial   #1; //Method java/lang/Object."<init>":()V
4:  aload_0
5:  iconst_3
6:  newarray byte
8:  putfield    #2; //Field bar:[B
11: return 
```

索引 4 到 8 对应于行`this.bar = new byte[3];`。它们的大致意思是：

1.  将`this`引用压入堆栈。
2.  将整数压`3`入堆栈。
3.  弹出`3`堆栈顶部的整数（the），创建该长度的字节数组，将数组压入堆栈。
4.  将堆栈顶部的值（字节数组）设置为堆栈顶部倒数`bar`第二个对象的字段#2（即 ）的值（`this`）。（另外，将这两个从堆栈中弹出。）

这并不能很好地映射到原始 Java 源代码；如您所见，对应于“new byte[3]”的部分被插入到实现“this.bar = ...”的部分中间，即使对于像这样简单的表达式，事情也会发生混乱。从字节码重构语句可能不会是微不足道的——它们没有明确分隔，当你从堆栈中弹出所有内容时，语句就结束了。

# php - 仅使用来自 gdocs 的 zend gdata 检索电子表格的特定列

> ID：11531777
> 
> 赞同：0
> 
> 时间：2012-07-17T22:31:51.790
> 
> 标签：php, zend-framework, gdata, google-spreadsheet-api, google-docs

我正在处理来自 gdocs 的相对较大的电子表格，并通过 zend 库访问它们。我在任何给定时间只需要某些列，因此为了节省内存，使用基于列表的提要仅检索这些特定列而不是整个电子表格会很有帮助。我使用的基本查询是根据 zend 文档

```
$query = new Zend_Gdata_Spreadsheets_ListQuery();
$query->setSpreadsheetKey($spreadsheetKey);
$query->setWorksheetId($worksheetId); 
$listFeed = $spreadsheetService->getListFeed($query); 
```

我有机会通过发送结构化查询，`$query->setSpreadsheetQuery('name=someName');`但据我所知，这仅适用于限制返回的行数而不是列数。有没有办法以某种方式使用它来获取特定的列？或者，仅获取电子表格的某些先前指定的行以便仅检索电子表格的块并在当时稀化一个块将是有帮助的。无论哪种方式，我都需要避免在任何给定时间将整个电子表格放在内存中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T00:57:11.430

我设法使用基于单元的提要解决了这个问题。基本上我所做的是首先获取特定列标题的列号，如下所示

```
$query = new Zend_Gdata_Spreadsheets_CellQuery();
$query->setSpreadsheetKey($spreadsheetkey);
$query->setWorksheetId($wworksheetkey);
$query->setMinRow(1);
$query->setMaxRow(1);
$headerFeed = $spreadsheetService->getCellFeed($query);

foreach($headerFeed as $cellEntry){
    if(strcasecmp($cellEntry->cell->getText(), $column) ==  0){
        $colNr = $cellEntry->cell->getColumn();
        break;
    }
} 
```

这将为我提供该列的列号`$column`。然后，我将继续获取给定列号的特定行范围，以便我可以逐块读取整个列，而无需将整个电子表格（或列）放在内存中。这可以作为

```
$query->setMinCol($colNr);
$query->setMaxCol($colNr);
$query->setMinRow($startingRow);
$query->setMaxRow($endingRow);

$columnFeed = $spreadsheetService->getCellFeed($query);
foreach($columnFeed as $cellEntry){
    $result[$cellEntry->cell->getRow()] = $cellEntry->cell->getText();
} 
```

通过更改`$startingRow`，`$endingRow`我可以遍历该列。但是，必须小心选择这些，因为如果它们“越界”，google api 将返回一个 http 400 代码。单元格中不必有值，但它们必须存在（向下滚动电子表格，您看到的最后一行编号应该是两个值的最大值）。我认为默认情况下会创建一个包含 100（空）行的电子表格。

这可能不是最优雅或最快的解决方案，但它对我有用。

# android - 如何禁用 Android WebView 上的“保存密码”对话框？

> ID：11531778
> 
> 赞同：26
> 
> 时间：2012-07-17T22:31:52.583
> 
> 标签：android, android-webview, password-protection

我想知道如何防止 Android WebView 表单要求从 html 表单中保存“密码数据”？

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-17T22:54:16.450

试试这个：

`.getSettings()`使用并设置此方法获取 webview 设置`setSavePassword(false)`

`public void setSavePassword (boolean save)`

[http://developer.android.com/reference/android/webkit/WebSettings.html#setSaveFormData(boolean)](http://developer.android.com/reference/android/webkit/WebSettings.html#setSaveFormData(boolean))

对于那些使用 API 级别 18 的人，请参阅下面的 Kirk Hammet 的回答。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-14T13:56:37.160

@Nikola Despotoski 的答案在他发布答案时是正确的，但是**自 API 18 以来，此方法已被弃用**，并且根据[文档](http://developer.android.com/reference/android/webkit/WebSettings.html#getSavePassword%28%29)：

> 未来版本将不支持在 WebView 中保存密码

这意味着默认情况下在 android 4.4 及更高版本中 - 默认为“false”，并且此方法将不再存在。

如果你想确保你兼容所有不同的 API 级别，你应该写：

```
 if (Build.VERSION.SDK_INT <= 18) {
        mWebView.getSettings().setSavePassword(false);
    } else {
        // do nothing. because as google mentioned in the documentation -
        // "Saving passwords in WebView will not be supported in future versions"
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-10T23:22:44.563

这是像我这样需要看到它的人的代码片段，因为它应该输入

```
 WebView webView = (WebView) findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);
    webView.getSettings().setSavePassword(false); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-20T17:06:53.983

它并没有你想象的那么贬值，我不得不删除版本检查，因为我在华为 5.01 设备上收到提示并禁用 FormData ......

```
 webview.getSettings().setSavePassword(false);
    webview.getSettings().setSaveFormData(false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-21T09:05:56.860

我具备以上所有条件，并在运行高于 18 的华为 Ascend P7 上使用了该应用程序。但由于某种原因，我仍然看到一个确认框，上面写着“你想让浏览器记住这个密码吗？”

这个弹出窗口的原因可能是什么。我试过下面的代码。

```
_viewSettings.setSavePassword(false);  
if (Build.VERSION.SDK_INT <= 18) {  
    _viewSettings.setSavePassword(false);  
}  
_view.loadUrl(url); 
```

注意：以上内容不会在三星设备上显示任何保存消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-26T16:21:19.937

如果它在 WebView 中......只需将 autocomplete="off" 属性添加到表单中？

# sql - 如何查询一年中的 GROUP BY Month

> ID：11531785
> 
> 赞同：58
> 
> 时间：2012-07-17T22:32:27.823
> 
> 标签：sql, oracle

我正在使用 Oracle SQL Developer。我基本上有一个包含列的图片表：

[DATE_CREATED(日期)，NUM_of_PICTURES(int)]

如果我选择 *，我会得到类似的输出：

```
01-May-12    12
02-May-12    15
03-May-12    09
...
...
01-Jun-12    20
...
etc. 
```

我正在尝试将这些图片总和汇总为每月而不是每天。

我试过做类似的事情：

```
select Month(DATE_CREATED), sum(Num_of_Pictures))
from pictures_table
group by Month(DATE_CREATED); 
```

这会输出一个错误：

```
ORA-00904: "MONTH": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error at Line: 5 Column: 9 
```

我的月份功能有误吗？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-07-17T23:53:47.803

我倾向于将年份包括在输出中。单程：

```
select to_char(DATE_CREATED, 'YYYY-MM'), sum(Num_of_Pictures)
from pictures_table
group by to_char(DATE_CREATED, 'YYYY-MM')
order by 1 
```

另一种方式（更标准的 SQL）：

```
select extract(year from date_created) as yr, extract(month from date_created) as mon,
       sum(Num_of_Pictures)
from pictures_table
group by extract(year from date_created), extract(month from date_created)
order by yr, mon; 
```

请记住 order by，因为您可能希望这些按顺序排列，并且无法保证在 group by 之后返回行的顺序。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-17T22:37:53.347

对于甲骨文：

```
select EXTRACT(month from DATE_CREATED), sum(Num_of_Pictures)
from pictures_table
group by EXTRACT(month from DATE_CREATED); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-15T05:39:07.947

我在 MSSQL 中这样做

获取月度数据：

```
 SELECT YEAR(DATE_CREATED) [Year], MONTH(DATE_CREATED) [Month], 
     DATENAME(MONTH,DATE_CREATED) [Month Name], SUM(Num_of_Pictures) [Pictures Count]
    FROM pictures_table
    GROUP BY YEAR(DATE_CREATED), MONTH(DATE_CREATED), 
     DATENAME(MONTH, DATE_CREATED)
    ORDER BY 1,2 
```

使用 PIVOT 获取月度数据：

```
SELECT *
FROM (SELECT YEAR(DATE_CREATED) [Year], 
       DATENAME(MONTH, DATE_CREATED) [Month], 
       SUM(Num_of_Pictures) [Pictures Count]
      FROM pictures_table
      GROUP BY YEAR(DATE_CREATED), 
      DATENAME(MONTH, DATE_CREATED)) AS MontlySalesData
PIVOT( SUM([Pictures Count])   
    FOR Month IN ([January],[February],[March],[April],[May],
    [June],[July],[August],[September],[October],[November],
    [December])) AS MNamePivot 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-05-15T16:30:11.997

对于 MS SQL，您可以这样做。

```
 select  CAST(DATEPART(MONTH, DateTyme) as VARCHAR) +'/'+ 
CAST(DATEPART(YEAR, DateTyme) as VARCHAR) as 'Date' from #temp
    group by Name, CAST(DATEPART(MONTH, DateTyme) as VARCHAR) +'/'+
 CAST(DATEPART(YEAR, DateTyme) as VARCHAR) 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2016-02-11T11:46:40.740

您可以使用：

```
 select FK_Items,Sum(PoiQuantity) Quantity  from PurchaseOrderItems POI
    left join PurchaseOrder PO ON po.ID_PurchaseOrder=poi.FK_PurchaseOrder
    group by FK_Items,DATEPART(MONTH, TransDate) 
```

# php - 使用 wamp 服务器进行 php 上传会导致访问被拒绝

> ID：11531789
> 
> 赞同：0
> 
> 时间：2012-07-17T22:32:44.130
> 
> 标签：php, upload, wamp

我对网络编码非常陌生（大约一周左右！），但我取得了长足的进步。我遇到了一个我不确定是否会成为大问题的问题。

我正在建立一个网站来展示我的摄影作品（www.MattTilghman.com --- 非常多的工作正在进行中）。手动上传文件并相应地编辑所有 html 文件将非常烦人且耗时，因此我决定编写一个 PHP 脚本来帮助我简化流程。

这个 PHP 文件还没有上线，我先在本地进行所有测试。现在它完全按照我的要求做（虽然它还没有完成，所以你可能会在代码中看到一些悬而未决的问题）。

基本上现在，当我选择文件名时，它会将它们从原始文件夹移动到我指定的文件夹，该文件夹位于 wamp/www/htdocs 等的某个位置。然后它编辑 html 文件以添加指向的代码这张图片，低看，新的 html 文件完全按照我的意愿进行，并且可以很好地显示图像。

但是，如果我导航到 wamp 服务器目录中的图像副本，任何程序都无法打开它们。我猜 html 显示它们很好，但所有其他程序都给我一个“拒绝访问”错误。我该如何避免这种情况？我需要在 PHP 文件中设置某种访问权限吗？一旦我将文件移动到网上，这些都会成为问题吗？

正如我所说，我只做了一个星期左右，所以要温柔。我是一个快速学习者，但尽管如此，如果答案尽可能明确，我们将不胜感激。

非常感谢，如果你们还需要什么，请告诉我。哦，顺便说一句，如果这很重要，我正在使用 aptana studio 3。

代码：

```
<?php 

$PicName = str_replace("-T.png","",$_FILES["fileT"]["name"]);
$PicIDL = $PicName . "-L"; //PicIDL is the ID for the "large" div
$PicTitle = $_POST["pictitle"];  //PicTitle has spaces instead of hyphens
$PicCaption = $_POST["piccaption"];
$PicKeywords = $_POST["pickeywords"];

$fileName = $_POST["location"] . "-Photos.html"; //this is the galley to edit the html of

// upload and get filename and stuff for thumbnail
$fileNameLocT = "images/" . $_POST["location"] . "/" . $_FILES["fileT"]["name"];
move_uploaded_file($_FILES["fileT"]["tmp_name"],$fileNameLocT);

// upload and get filename and stuff for large image
$fileNameLocL = "images/" . $_POST["location"] . "/" . $_FILES["fileL"]["name"];
move_uploaded_file($_FILES["fileL"]["tmp_name"],$fileNameLocL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T01:03:39.840

一旦我将文件移动到网上，这些都会成为问题吗？

最好的办法是上传并尝试。我相信您是说通过网页，它显示正常，但如果您使用 Windows 资源管理器导航，则无法查看图像。

当您将代码放到网上时，您使用的是 Windows 托管服务还是 linux 托管服务 - 一旦您上传，这也可能会导致差异。

出于兴趣，我也将摄影作为一种爱好，并研究了一些将我的照片放到网上的解决方案。尽管我以 IT 为生并且做过一些 PHP/Mysql 开发，但我认为 wordpress 照片博客是一个更好的选择——你看过那些吗？我理解如果你真的想学习如何编码，那么走更艰难的道路很有趣，但如果这只是达到目的的一种手段，你可能会发现你可以得到你想要的。像[这样](http://www.tripwiremagazine.com/2012/07/wordpress-portfolio-themes.html)的东西，[这个](http://designwoop.com/2012/01/25-best-wordpress-photography-themes/)或[这个](http://vandelaydesign.com/blog/wordpress/wp-photography-themes/)可能会给你一些想法。

# php - 如何自动化浏览任务？

> ID：11531790
> 
> 赞同：1
> 
> 时间：2012-07-17T22:32:50.467
> 
> 标签：php, python, perl, curl, selenium

几个星期以来，我一直在尝试自动化浏览任务。任务很简单：**登录、点击链接、输入变量并提交、注销**。我需要创建一个执行此操作的网站（某种更简单的界面） 请记住该网站正在使用 Servlet，并且我无权访问网站代码。起初我尝试了 CURL，但由于页面中有一些 Ajax 元素，因此 curl 无法显示该内容。我尝试了 .NET Webdriver、JUnit、Selenium 等。但在渲染 ajax 元素时都失败了。我已经尝试过 perl 和 python mechanize，虽然 perl 不起作用，但我能够使用 python 获取动态内容。问题不在于我有以 Javascript 开头的 Javascript 执行链接：而且我认为我不能使用 Mechanize 调用函数。有人知道这个任务是否可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:05:17.820

Perl 模块[`WWW::Mechanize`](http://p3rl.org/WWW%3a%3aMechanize)是自动化 Web 浏览任务（如下载、上传、表单提交、身份验证、简单浏览、屏幕抓取等）最流行的方式。

如果网站包含 Javascript，处理它们的流行 Perl 模块是使用[`WWW::Mechanize::Firefox`](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFirefox).

到目前为止，“几乎”任何类型的网站，包括 JavaScript 和 Ajax 等技术以及使用 SSL 安全性和/或通过代理服务器访问，都可以通过属于[`LWP::UserAgent`](http://p3rl.org/LWP%3a%3aUserAgent)and`WWW::Mechanize`或的 Perl 模块方法的组合来处理`WWW::Mechanize::Firefox`。网络上提供了大量示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:36:09.533

使用 casperjs 的示例：

```
var casper = require('casper').create({
   verbose: true,
   logLevel: 'debug'
});
casper.start(
   'http://example.com',
   function() {
       this.evaluate( function() {
           return $('#someElementId div').length; // This runs as if it was on the page
       });
       this.fill(
           '#formId',
           {
               email: 'username@example.com',
               password: 'password123'
           },
           true
       ); // This submits login form
   }
); 
```

Casperjs 存储 cookie，因此对更深页面的请求不会失败。

有关提交表单的详细信息，请参见[fill](http://casperjs.org/api.html#casper.fill) ()。

查看[evaluate](http://casperjs.org/api.html#casper.evaluate) () 来运行js，就好像它是在你正在测试的页面上执行的一样。

如果您想测试 AJAX 操作 - 没问题。它们将像页面在浏览器中运行一样运行，您可以在 DOM 中看到结果。您可以使用 evaluate() 手动启动它们。

# wpf - Expression Blend 在 TextDecorations 的 MultiBinding 上崩溃

> ID：11531792
> 
> 赞同：1
> 
> 时间：2012-07-17T22:32:55.330
> 
> 标签：wpf, xaml, binding, expression-blend, multibinding

xml:

```
<TextBlock Text="SampleText">
    <TextBlock.TextDecorations>
        <MultiBinding Converter="{StaticResource sampleMultiValueConverter}">
            <Binding/>
            <Binding/>
        </MultiBinding>
    </TextBlock.TextDecorations>
</TextBlock> 
```

转换器：

```
public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
{
    return TextDecorations.Underline;
} 
```

在 vs2010 中，一切正常，并在设计器中显示带下划线的文本，就像在运行应用程序中一样。当我在我现在工作的项目中做到这一点时，Blend 显示异常：[http ://s19.postimage.org/3wdr4htc3/Blend_Error.png](http://s19.postimage.org/3wdr4htc3/Blend_Error.png)

我已经制作了一个示例项目来演示这种行为[http://goo.gl/lnZ1T](http://goo.gl/lnZ1T)但是对于这个项目，Blend 只显示错误，而不是异常。

我做错了什么还是Blend的问题？有解决方法吗？

# iphone - 如何从导航栏创建下拉菜单（iOS）

> ID：11531796
> 
> 赞同：2
> 
> 时间：2012-07-17T22:33:24.453
> 
> 标签：iphone, ios, drop-down-menu

我正在尝试从导航栏创建一个下拉菜单。像这样的东西：

[http://pttrns.com/320x480/screens/popovers/Readability_News-01.PNG.image](http://pttrns.com/320x480/screens/popovers/Readability_News-01.PNG.image)

可读性只是执行此类操作的应用程序之一。

我怎样才能做出类似的东西？那是一个uitableview吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:14:59.717

这应该让您在 iphone 中进行弹出窗口。[http://www.cocoacontrols.com/platforms/ios/controls/wepopover](http://www.cocoacontrols.com/platforms/ios/controls/wepopover)

它与可读性不完全一样，但我想你可以把它弄乱，让它看起来更接近你想要的样子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:20:27.290

是的，你也可以这样做！这更符合 OSX 表。你会做如下：

*   创建一个覆盖视图 - 一个关闭了 userInteraction 的清晰 UIView - 以防止用户在您的应用程序中点击其他地方（或者您可以在此视图中使用点击来关闭工作表。将此视图作为子视图添加到您的视图或视图中。窗户。

*   使用另一个视图创建“工作表”。在上面的例子中，它看起来是一个表格视图，但你可以做任何你想要的视图。您可以将此视图的框架设置为 0 高度，将其添加到视图（或窗口）。然后使用具有真实高度的新框架进行动画处理，以使“工作表”从屏幕顶部“下拉”。

*   然后，这个新添加的视图由您的主视图类管理。

*   当您想关闭它时，您可以将帧动画返回到高度为 0，从其父视图中删除该视图，从其父视图中删除覆盖视图，然后您就完成了！

# jquery - 如何在服务器端修改 CORS 请求（来自 IE8 或 IE9） - 以启用 Spring 绑定

> ID：11531805
> 
> 赞同：2
> 
> 时间：2012-07-17T22:33:57.013
> 
> 标签：jquery, spring, internet-explorer-9, cors

客户端使用 IE8 或 IE9 向我使用 Spring 3.1 的域发出 CORS 请求 - 就像这样。

```
if ($.browser.msie && window.XDomainRequest) 
{
    var xdr = new XDomainRequest();
    xdr.open("post", "http://example.com/corstest/testPost");
    xdr.onload = function() {
         var dom = new ActiveXObject("Microsoft.XMLDOM");
         dom.async = false;
         dom.loadXML(xdr.responseText);
         $("#corsdiv").html(xdr.responseText);
       };
    xdr.send("param1=abc");
    return false;                       
} 
else 
{
    $.ajax({
        url: "http://example.com/corstest/testPost",
        type: "POST",
        data: "param1=abc",
        success: function( data ) {
                $("#corsdiv").html(data);
            },
    });
    return false;
} 
```

在服务器上，在控制器中：

```
@RequestMapping(value = "/testPost", method = RequestMethod.POST)
public @ResponseBody String testPost(@RequestParam Map<String,String> body, Model model, HttpServletRequest request)
{
    logger.info("Content-type: " + request.getContentType() + ";" + request.getContentLength() + ";" + request.getParameter("param1"));
    logger.info("body:" + body.toString() );
    return "Success";
} 
```

给出以下输出：

```
For IE9:
INFO : Content-type: null;10;null
INFO : body:{}

For Firefox:
INFO : Content-type: application/x-www-form-urlencoded; charset=UTF-8;10;abc
INFO : body:{param1=abc} 
```

我知道对于 IE8/9 CORS 请求，请求的 Content-Type 标头仅支持 text/plain。（参考： http: [//blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)）据我了解，这就是Spring不绑定请求的原因IE8/IE9 - 因为它期望 application/x-www-form-urlencoded 作为 Content-Type。

我使用过滤器拦截传入的请求，并将所有请求的 ContentType 设置为“application/x-www-form-urlencoded; charset=UTF-8”（现在用于测试目的）。

[参考使用 servlet filter 修改请求参数](https://stackoverflow.com/questions/1413129/modify-request-parameter-with-servlet-filter)，我将 HttpServletRequest 包装在 HttpServletRequestWrapper 中，它覆盖了 getContentType、getCharacterEncoding、getHeader、getHeaderNames 和 getHeaders 方法，并将其传递给 Filter 上的 chain.doFilter() 方法。

我得到的输出是：

```
For IE9:
INFO : Content-type application/x-www-form-urlencoded; charset=UTF-8;10;null
INFO : body:{}

For Firefox:
INFO : Content-type: application/x-www-form-urlencoded; charset=UTF-8;10;abc
INFO : body:{param1=abc} 
```

绑定不生效。

我的问题是：

1.  是否可以使用这种方法让 spring 绑定来自 IE8/9 CORS 请求的数据。如果是 - 我做错了什么？
2.  如果不是 - 为什么，我还有哪些其他选择才能完成这项工作？

更新：

在进一步调查中，我发现 Spring 使用 request.getParameterMap() 在 WebRequestDatabinder 中绑定请求数据——我没有在 HttpServletRequestWrapper 中覆盖它。

以下是在将 FORM 后的数据填充到 servlet 容器设置的参数之前必须满足的条件（[http://java.boot.by/wcd-guide/ch01s02.html](http://java.boot.by/wcd-guide/ch01s02.html)）：

1.  该请求是 HTTP 或 HTTPS 请求。
2.  HTTP 方法是 POST。
3.  内容类型为 application/x-www-form-urlencoded。
4.  servlet 已对请求对象的任何“getParameter”系列方法进行了初始调用。

由于 servlet 容器将 content-Type 视为 text/plain，因此它不会将请求正文解析为 Parameter Map。Spring 找到一个空的 Parameter Map，因此不绑定数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:51:54.630

我不认为 Spring 提供了开箱即用的解决方案。您可以按照[这个要点](https://gist.github.com/2232095)创建一个过滤器。

# uitableview - UITableView 的滚动性能不佳，其中包含具有滚动启用 = NO 的 UITextView 的单元格

> ID：11531810
> 
> 赞同：4
> 
> 时间：2012-07-17T22:34:23.213
> 
> 标签：uitableview, scroll, uitextview

我有一个表格视图，其单元格包含 UITextView。我想禁用文本视图的滚动，但是当我设置它（scrollEnabled = NO）时，表格的滚动行为太可怕了——而不是平滑滚动，它是跳跃和生涩的。我原以为在表格视图单元格的 UITextview 中关闭滚动会提高整体表格滚动性能（如果有的话）。

有谁知道我在这里可能会忽略什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T21:04:47.933

好的 - 对于任何有兴趣的人。我发现将 uitextview 的内容大小设置为与其文本大小相同可以解决问题（尽管我仍然对为什么将 scrollEnabled 设置为 NO 会产生如此奇怪的效果感到困惑——就像它从动画中丢帧一样）。无论如何，这实际上是告诉视图它不必滚动，因为一切都是可见的。

感谢任何处理此查询的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T00:45:57.923

听起来很奇怪，这会损害表格视图的滚动性能。你在哪里打电话`scrollEnable=NO`？再次检查这是否是您所做的唯一更改..

无论如何，如果您不想进行任何用户交互，请尝试使用`textView.userInteractionEnabled = NO`

# asp.net - Application_MapRequestHandler 有时真的很慢

> ID：11531812
> 
> 赞同：3
> 
> 时间：2012-07-17T22:34:43.607
> 
> 标签：asp.net, asp.net-mvc-3, iis-7

有时我们会看到一个通常需要 30 毫秒、超过 5000 毫秒的页面，并且大部分时间都花在了 asp.net 管道步骤 Application_PostResolveRequestCache 和 Application_MapRequestHandler 之间的某个地方。我们在 iis 7 中混合使用了 webform/mvc3，但这个问题似乎只发生在老式的 webform 页面（ashx、asmx、aspx）上。任何指针将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:59:46.630

可能会在 PostResolveRequestCache 上中断，看看发生了什么。可能是缓存中的压缩导致问题。

# ruby - 您如何在 Sinatra 中指定摘要身份验证？

> ID：11531815
> 
> 赞同：3
> 
> 时间：2012-07-17T22:34:58.887
> 
> 标签：ruby, authentication, rspec, sinatra, digest-authentication

我设置了一个摘要身份验证，就像 sinatrarb 网站上的示例一样。

```
#config.ru
require './main'

app = Rack::Auth::Digest::MD5.new(Sinatra::Application) do |username|
  {'foo' => 'bar'}[username]
end
app.realm = 'Protected Area'
app.opaque = 'secretkey'

run app 
```

我想知道是否有人知道如何或可以将我指向一个指南。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T02:48:38.903

[Sinatra FAQ](http://www.sinatrarb.com/faq.html#test_http_auth)有一个使用 Test::Unit 和 Basic Auth 的示例。我从未将 RSpec 与 Sinatra 一起使用，但从 Test::Unit 转换示例应该很容易。

即使该示例使用 Basic Auth，Digest Auth 也可以以相同的方式进行测试。唯一的区别是您需要使用 Rack::Test 的[digest_authorize](http://rdoc.info/github/brynary/rack-test/master/Rack/Test/Session#digest_authorize-instance_method)方法。例如，FAQ 中的最后一个测试会变成这样：

```
def test_with_proper_credentials
  digest_authorize 'admin', 'admin'
  get '/protected'
  assert_equal 200, last_response.status
  assert_equal "You're welcome", last_response.body
end 
```

# qt - 跟踪 QScrollBar 的中心

> ID：11531817
> 
> 赞同：0
> 
> 时间：2012-07-17T22:35:07.543
> 
> 标签：qt, pyqt, pyqt4, pyside

我无法找到 QScrollBar 滑块的正确中心（我需要在其上粘贴一个文本小部件以显示滑块的位置）。我尝试通过将滑块的位置除以文档宽度来规范化滑块的位置，然后将其缩放为宽度（）。但这并不准确，因为没有考虑到滚动条的装饰和按钮。因此，标签在您拖动时会飘走，不会粘在中心。下面是我当前的代码，它需要以某种方式考虑 QScrollBar 的按钮、框架等，以找到滚动区域的正确开始和结束位置。有人可以帮忙吗？

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

class PageScroller(QScrollBar):
    '''Set the total number of pages.'''
    def __init__(self, parent=None):
        super(PageScroller, self).__init__(parent)

        self.pageIndicator = QLabel('|', parent)
        self.valueChanged.connect(self.updateSlider)
        self.setOrientation(Qt.Orientation.Horizontal)
        self.setPageStep(1)

    def updateSlider(self, event):
        scrollAreaWidth = self.maximum() - self.minimum() + self.pageStep()
        sliderPos = (self.sliderPosition() + self.pageStep()/2.0) / float(scrollAreaWidth) * self.width()
        indicatorPos = QPoint(sliderPos - self.pageIndicator.width()/2, -self.pageIndicator.height())
        self.pageIndicator.move(self.mapToParent(indicatorPos))

        self.update()

if __name__ == '__main__':

    app = QApplication(sys.argv)
    #app.setStyle('plastique') # tyhis makes the sliding more obvious
    mainWindow = QWidget()
    layout = QVBoxLayout(mainWindow)
    s = PageScroller(mainWindow)
    layout.addWidget(s)
    mainWindow.resize(400, 100)
    mainWindow.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:30:57.117

就像您发现的那样，正确映射滑块部分的像素范围，同时考虑平台之间的各种样式差异，这将是非常困难的。太多的因素（左右额外的按钮，滑块大小本身，......）

这真的很晦涩难懂，需要费一番功夫才能找到，但实际上需要查询 QScrollBar 的 SubControl。你能得到的是滚动句柄的 QRect ：

```
def resizeEvent(self, event):
    super(PageScroller, self).resizeEvent(event)
    self.updateSlider()

def updateSlider(self, val=None):
    opt = QStyleOptionSlider()
    self.initStyleOption(opt)
    style = self.style()
    handle = style.subControlRect(style.CC_ScrollBar, opt, 
                                    style.SC_ScrollBarSlider)
    sliderPos = handle.center()
    sliderPos.setY(-self.pageIndicator.height())
    self.pageIndicator.move(self.mapToParent(sliderPos)) 
```

1.  您首先必须创建一个空的[QStyleOptionSlider](http://www.pyside.org/docs/pyside/PySide/QtGui/QStyleOptionSlider.html)，并使用 PageScroller 的当前状态填充它。
2.  然后您必须从 PageScroller 中获取样式，并使用[subControlRect](http://www.pyside.org/docs/pyside/PySide/QtGui/QStyle.html#PySide.QtGui.PySide.QtGui.QStyle.subControlRect)来查询[`ComplexControl ScrollBar`](http://www.pyside.org/docs/pyside/PySide/QtGui/QStyle.html#PySide.QtGui.PySide.QtGui.QStyle.ComplexControl)类型的子控件，以获取[`SubControl ScrollBarSlider`](http://www.pyside.org/docs/pyside/PySide/QtGui/QStyle.html#PySide.QtGui.PySide.QtGui.QStyle.SubControl)类型。它使用 opts 向您返回滑块的[QRect](http://www.pyside.org/docs/pyside/PySide/QtCore/QRect.html)
3.  然后您可以正常映射并移动 pageIndicator

我添加了一个`resizeEvent`也可以在第一次显示时以及在小部件的任何调整大小期间正确放置指示器。

# javascript - 弹出 div 区域以在页面的中途打开

> ID：11531821
> 
> 赞同：0
> 
> 时间：2012-07-17T22:35:35.513
> 
> 标签：javascript, html, css

我正在使用我不久前上网的一些代码，在单击链接时会打开一个毯子 div，它会使下面的页面变黑，并打开一个小弹出窗口，其中有一个 YouTube 视频。

它工作正常，但它将弹出窗口垂直放置在页面的中心，这意味着您必须向下滚动才能看到弹出窗口。如何让弹出窗口始终靠近顶部而不是中途打开？

我试图在这里把它放在一个 jsFiddle 中：http: [//jsfiddle.net/xdH7k/3/](http://jsfiddle.net/xdH7k/3/)

有人可以为我指出如何调整弹出窗口位置的正确方向吗？我不确定它是 CSS 还是 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:39:14.470

您可能想查看 JQuery 和 JQuery UI。JQuery UI 有一个模态对话框弹出，它在屏幕的可视区域中垂直和水平居中。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:42:04.867

您可以更改此行：

```
popUpDiv_height=blanket_height/2-150;//150 is half popup's height 
```

类似于：

```
popUpDiv_height=20;//150 is half popup's height 
```

这将删除从顶部垂直居中的 div 并将其与顶部隔开 20 像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T22:45:21.533

[http://jsfiddle.net/xdH7k/6/embedded/result/](http://jsfiddle.net/xdH7k/6/embedded/result/)

您需要更改声明`popUpDiv.style.top`。我在这里的演示中将其设置为 10px，而不是`<div>`高度

# javascript - 强制在 JS 中向上移动范围链

> ID：11531822
> 
> 赞同：2
> 
> 时间：2012-07-17T22:35:37.567
> 
> 标签：javascript, scope-chain

有没有办法在 Javascript中引用[作用域链上的下一个对象？](http://ringojs.org/wiki/Modules_and_Scopes/)

因此，例如：

```
var a = 12;
function run() {
  var a = 34;
  alert( a ); //replace "a" with something like "parent.a" so it shows 12 instead of 34
}
run(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:39:36.897

不，没有。Javascript 并没有真正暴露作用域链（令我懊恼的是；我希望能够编写一个将变量添加到本地作用域的函数，但可惜我不能）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:43:32.900

最简洁的答案是不。JS 有闭包可以让你“保存”作用域状态，但这不一样。你可以在这里阅读：[JavaScript 闭包是如何工作的？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:57:16.400

您可以使用这个技巧，将内部`a`变量作为伪静态属性分配给`run`函数：

```
var a = 12;
function run() {
  run.a = 34; //or arguments.callee.a = 34
  alert( a );
}
run(); //=> 12 
```

如果第一个`a`是浏览器中的全局变量，这也是一种可能：

```
var a = 12;
function run() {
  var a = 34; //or arguments.callee.a = 34
  alert( window.a ); //global variables are a property of window
}
run(); //=> 12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-18T02:03:35.497

其他答案是正确的，但您应该知道 ECMA-262 明确指出“范围”对象（即[lexical environment](http://es5.github.com/#x10.2)）不能被脚本直接引用或修改。唯一的例外是全局变量是全局（与浏览器中的窗口同义）对象的属性。

> 词法环境和环境记录值纯粹是规范机制，不需要对应于 ECMAScript 实现的任何特定工件。ECMAScript 程序不可能直接访问或操作这些值。
> 
> [ECMA5 §10.2](http://es5.github.com/#x10.2)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-20T16:25:13.833

也许它有帮助，至少你可以在上下文的内部范围内插入一个后门：

```
function Foo() {
    var a = 123; // much private
    this.b = 456; // much public
    this.eval = function(code) { return eval(code) } // backdoor to inner scope
}
foo = new Foo()
console.log("foo.eval(\"a\": ", foo.eval("a")) // 123
console.log("foo.eval(\"b\": ", foo.eval("b")) // ReferenceError: b is not defined
console.log("foo.eval(\"this.b\": ", foo.eval("this.b")) // 456
console.log("foo.a:", foo.a) // undefined
console.log("foo.b", foo.b) // 456 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-28T18:22:38.200

我认为您正在寻找的解决方案是：

```
var a = 12;
function run() {

   var a = 34;
   alert(window.a); 

  /*accesses the global window object to which any variable 
      in the global scope gets binded*/
}
run(); 
```

# javascript - 用于构建流程图应用程序的 Javascript 库

> ID：11531826
> 
> 赞同：3
> 
> 时间：2012-07-17T22:35:53.677
> 
> 标签：javascript, d3.js

我需要实现一个具有拖放功能的 Web 界面，用户需要通过添加块作为矩形和多边形以 1:1 和 1:n 关系彼此连接来创建流程图。单个对象需要有一个文本字段，用户可以在其中添加描述，并且他必须能够通过向连接添加描述来将对象与另一个对象连接起来。

我试图了解我必须使用哪个框架/库。我已经看到[JSPlumb](http://jsplumb.org/jquery/demo.html)似乎对我的工作很有帮助，但我也发现[D3](http://d3js.org)非常漂亮，即使它似乎与数据而不是 UI 创建有关。D3 会是我工作的好选择吗？

# jquery - jQuery Mobile 方法静默失败

> ID：11531831
> 
> 赞同：0
> 
> 时间：2012-07-17T22:36:14.197
> 
> 标签：jquery, jquery-mobile, telerik

我正在使用 jQuery Mobile Framework 编写移动应用程序，但遇到了一个没有任何意义的问题。我的页面底部有以下功能：

```
$(document).ready(function () {
        alert('binding');
        $("li.item, li.altitem").bind("dblclick", function () {
        alert('here');
        var id = $(this).attr("id").replace("item_", "");
        window.radopen("/review-detail.aspx?id=" + id, "ReviewDetailWindow");                    
    });
}); 
```

本质上，这个函数所做的是当页面加载时，它会循环遍历所有带有“item”或“altitem”类的 <li> 标记，并添加一个打开模式对话框的双击事件。当我第一次双击（最终双击）其中一个列表项时，此功能效果很好，但随后的双击将被忽略。我没有看到任何 JavaScript 错误发生，所以我不完全确定发生了什么或从哪里开始。这似乎也是一个跨浏览器问题

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T14:26:17.293

我不完全确定为什么，但我现在已经开始工作了。显然我不应该使用 $(document).ready() 方法调用，因为移动框架没有正式支持它。更新（和功能）的 JS 是：

```
$(document).on("click", "li.item, li.altitem", function () {
    var id = $(this).attr("id").replace("item_", "");
    var win = radopen("/review-detail.aspx?id=" + id, "ReviewDetailWindow");                
    win.center();
}); 
```

# php - 使用 PHPUnit 在 PHP 中测试 REST API 控制器

> ID：11531832
> 
> 赞同：1
> 
> 时间：2012-07-17T22:36:39.003
> 
> 标签：php, unit-testing, tdd, phpunit

我有一个非常小的测试套件，用于测试 REST API 上的 CRUD 操作。我的控制器根据 API 提供的信息显示表单、表格等。我的测试类创建一个新的[Buzz](https://github.com/kriswallsmith/Buzz/)对象并向 API 服务器发出请求。

不幸的是，这很糟糕，因为如果我更新或删除某些内容，它会在 API 中被删除。这是一个非常糟糕的测试实践。当使用这样的外部数据源时，如何对我的应用程序进行单元测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:40:35.187

查看 PHPUnit 文档中的测试替身和存根：

[http://www.phpunit.de/manual/current/en/test-doubles.html](http://www.phpunit.de/manual/current/en/test-doubles.html)

您可以使用它们来替换 API 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-12T18:25:37.963

> 不幸的是，这很糟糕，因为如果我更新或删除某些内容，它会在 API 中被删除。这是一个非常糟糕的测试实践。当使用这样的外部数据源时，如何对我的应用程序进行单元测试？

创建一些虚假的、可擦除的数据。事实上，您甚至不应该在生产数据库/服务器上运行 PHPUnit 测试。

# wpf - 特定视觉风格的新 wpf 主题

> ID：11531837
> 
> 赞同：1
> 
> 时间：2012-07-17T22:37:51.760
> 
> 标签：wpf, styles, microsoft-metro, themes

我想知道是否可以为不同的视觉样式添加默认的 wpf 主题（我可以使用第 3 方视觉样式，因为我的系统已修补）。

例如，`PresentationFramework.Aero`自动用于 aero，`PresentationFramework.Luna`自动用于 XP luna 主题，所以我想知道我是否可以制作一个新组件，例如`PresentationFramework.Metro`用于名为`Metro.msstyles`.

这行得通吗？我该怎么做呢？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:10:56.323

从理论上讲，它应该工作...

[我认为主题程序集是根据GetCurrentThemeName](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773365%28v=vs.85%29.aspx)返回的主题信息选择的。例如，对于具有正常颜色的 Aero，它返回：

```
pszThemeFileName = "Aero"
pszColorBuff = "NormalColor"
pszSizeBuff = "NormalSize" 
```

但是我不确定此函数是否适用于所有主题（IIRC，它不适用于 Windows XP 中的 Zune 主题），因此请确保它在开始创建主题程序集之前返回 Metro 的预期值。如果它确实有效，您只需使用包含所有标准控件样式的 XAML 字典创建一个程序集。

# java - 如何在 Android 中创建交互式地图

> ID：11531845
> 
> 赞同：8
> 
> 时间：2012-07-17T22:38:32.863
> 
> 标签：java, android, google-maps, opengl-es, android-webview

我需要我的应用程序的一部分来制作由大约 10 座建筑物组成的正方形区域的交互式地图。您必须能够单击建筑物并接收有关它的一些信息。我知道有几种方法可以解决这个问题，但我希望有这方面背景的人能给我一些建议。

以下是我可以考虑实现这一目标的一些方法。

## 谷歌地图

我已经实现了 Google Maps API，它工作得很好，但并没有真正达到我想要的效果。谷歌地图需要互联网连接，让您可以访问整个地图。我需要将它锁定在一个区域中。

## 网页浏览量

这似乎是一个很好的选择。我确信我可以制作一个简单的图像地图，当您单击某个建筑物时，它会为您提供更多信息。唯一的问题是您还需要互联网连接。

## OpenGL？

我从来没有真正对此进行过深入研究，但我听说实施起来很困难而且很痛苦。它可以在本地运行，但值得吗？

还有其他方法可以开发交互式地图吗？需要记住的是，我还想有一天将其移植到 iOS（如果有人也有这方面的经验）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-08T17:13:51.463

如果您想要完全控制并且习惯使用 html 和 javascript，我强烈建议您使用开源[OpenLayers](http://openlayers.org/)库。您可以创建一个 html 页面，将其保存在资产中并在设备上本地运行。您可以创建自己的一组地图图块，甚至使用单个 jpeg 文件，然后在其上“映射”您想要的建筑物，然后使用简单但广泛的 OpenLayers API 来允许建筑物选择和信息显示。它甚至内置了用于平移和缩放的多点触控功能。在移动设备上和非移动设备上都很好用。

[您可以在此处](http://openlayers.org/dev/examples/)查看示例列表。对任何示例进行简单的查看源代码将使您非常清楚地了解它们在做什么。您还可以查看[此示例](http://openlayers.org/dev/examples/georss-flickr.html)，该示例在地图区域上绘制了一堆图像缩略图，并能够单击以获取更多详细信息。此示例使用在线提要，但您可以轻松使用本地提要.. 甚至是[从应用程序传递到 webview 的提要](https://stackoverflow.com/a/6218438/525541)。

附言。除了在我的项目中积极使用 OpenLayers 之外，我与 OpenLayers 没有任何关系。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T20:15:51.300

从一开始就可能需要 10 页来回答您的问题。

1.  我们先看这里：[https ://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

2.  在您能够使用 MapView 之后，您只需要创建您的 ItemizedOverlay 类。

用教程中的 HelloItemizedOverlay 替换这个类。

```
public class GooglerMapItemizedOverlay extends ItemizedOverlay {

    private ArrayList<OverlayItem> mOverlayItems = new ArrayList<OverlayItem>();
    private Context mContext;
    private Paint rectPaint, textPaint;

    public GooglerMapItemizedOverlay(Drawable defaultMarker, Context context) {
        super(boundCenterBottom(defaultMarker));

        mContext = context;
        populate(); 
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlayItems.get(i);
    }

    public void addOverlayItem(OverlayItem overlay) {
        mOverlayItems.add(overlay);
        populate();
    }

    @Override
    public int size() {
        return mOverlayItems.size();
    }

    public void clear(){
        mOverlayItems.clear();
        populate(); 
    }

    @Override
    protected boolean onTap(int index) {
        // information goes here
      OverlayItem item = mOverlayItems.get(index);
      AlertDialog.Builder dialog = new AlertDialog.Builder(mContext);
      dialog.setTitle(item.getTitle());
      dialog.setMessage(item.getSnippet());
      dialog.show();
      return true;
    }
} 
```

* * *

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-07T09:25:39.353

**谷歌地图**

*   会有你想要的效果（自定义位置，不能移动，不能放大缩小）
*   但不允许离线内容

这是如何做到的（我做到了并且有效）：

1.  您以要限制该区域的 GPS 坐标为中心
2.  您调整缩放级别以限制区域
3.  您禁用多点触控事件以防止放大或缩小
4.  您禁用拖动以防止四处移动
5.  你处理点击`ItimizedOverlays`你创建来处理动作

对于这些步骤中的每一个，StackOverflow 上都有很好的答案。

*   1&2：[https ://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MapView)
*   3：[Android和GoogleMaps：禁用mapView拖动](https://stackoverflow.com/questions/6802796/android-and-googlemaps-disable-the-mapview-dragging)
*   4：[https ://developers.google.com/maps/documentation/android/hello-mapview](https://developers.google.com/maps/documentation/android/hello-mapview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T09:01:34.087

如果您需要始终显示相同的地图，您可以将地图显示为布局背景（制作地图图像）并处理触摸位置以显示某些建筑物的弹出窗口。

或使用评论中所述的 webview 并处理 touch x,y 以映射建筑物的位置。

# f# - 开始使用 F# windows 应用程序，我找不到工作示例或教程

> ID：11531848
> 
> 赞同：3
> 
> 时间：2012-07-17T22:39:11.703
> 
> 标签：f#

我已经离开编程游戏有一段时间了，我认为将一个用于从 sql server 上的多个数据库收集数据的简单实用程序应用程序放在一起会很有趣。

这是我设想的一个非常简单的应用程序，它将连接到一个 sql 服务器、一个设置查询的地方，该查询将用命名参数（数据库名称、小部件等）填充一个列表，以及一个要输入的部分我的文本带有将被替换的令牌。

在此之下，我希望有一个在查询运行时自行更新的网格，即使它们还没有全部完成。这对我来说似乎是进入 F# 的一种巧妙方法，因为我正要在 C# 中构建一个应用程序来执行此操作，所以我挖了进去，但是今天花了六个小时之后我无处可去。有没有人可以推荐的非常基本的教程以及开箱即用的构建和运行示例的好网站？

这是我今天所做的但没有用的：从 MSDN 下载 VS2012 Ultimate RC。
前往在线画廊并安装了六个不同的示例项目。打开每个示例项目并点击运行，但实际上没有一个项目运行。

那里的信息太少了，我无法判断这是否是由于样本过时而导致的预期行为，或者我的环境是否不正确（即使我今天只是从头开始安装它）。

如果我能找到世界上最简单的应用程序，它可以连接到冒险作品并在网格中加载记录列表，我将远远领先于我现在的位置，我现在的位置被卡住了。如果这是此类问题的错误位置，我欢迎就我应该问的地方提出建议，如果这只是一个愚蠢的想法，并且永远不应该尝试使用 F# 和 fsharpx 之类的东西，我也会欢迎该反馈并会然后尝试弄清楚如何在 C# 中执行此操作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-18T08:44:46.630

您在 F# 中的基本 GUI 应用程序只是：

```
open System.Windows

[<System.STAThread>]
do
  Application().Run(Window()) |> ignore 
```

您需要参考`PresentationCore`、`PresentationFramework`和。`System.Xaml``WindowsBase`

然后只是将 GUI 控件添加到窗口并通过事件将它们连接起来的情况。为了获得流畅的用户体验，我建议使用异步工作流，`MailboxProcessor`因为它们使 UI 线程和后台工作人员之间的并发变得非常容易。我在这里写了一篇关于使用 WPF 和 SQL Server 编写 GUI 应用程序的文章[（](http://fsharpnews.blogspot.co.uk/2011/10/using-sql-server-compact-edition.html)注意：付费专区）。

# android - Android VideoView 错误（1,16）并显示黑屏

> ID：11531852
> 
> 赞同：5
> 
> 时间：2012-07-17T22:39:25.650
> 
> 标签：android, mp4, android-videoview, android-mediaplayer

我有一个带有 VideoView 的应用程序，它正在从内部存储（我的包`files`目录）播放一个 mp4 文件

在*某些*三星 Epic Touch 4g (Galaxy SII) 设备上，而不是正在显示的视频，屏幕是全黑的。我的应用程序中的其他所有内容都正常运行并响应，因此设备根本没有“冻结”它只是在屏幕上显示黑色而不是视频。

要开始我的视频，我使用 onPreparedListener 回调来调用 start()：

```
mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer arg0) {
        mVideoView.start();
    }
}); 
```

我将视频设置为通过此通话播放：

```
//file is the reference to my video File object. 
//I am positive that it is correct
mVideoView.setVideoPath(file.getAbsolutePath()); 
```

我有一个这样的 onErrorListener 集：

```
mVideoView.setOnErrorListener(new OnErrorListener(){
    @Override
    public boolean onError(MediaPlayer arg0, int arg1, int arg2) {  
        Log.i(myTag, "MP ERROR: "+ arg1 + " - " + arg2);
        /* I have also tried this here, no luck this way either
        mVideoView.setVideoPath(file.getAbsolutePath());
        return true;
        */
        return false;
    }       
}); 
```

经过仔细检查，我意识到我的 onErrorListener 根本没有收到回调。

当屏幕上一片漆黑时，日志一遍又一遍地收到这些消息的垃圾邮件：

```
V/PlayerDriver(2579): HandleInformationalEvent: PVMFInfoProcessingFailure
V/PlayerDriver(2579): HandleInformationalEvent: type=16 UNHANDLED
E/MFC_DEC_APP(2579): SsbSipMfcDecExe] IOCTL_MFC_DEC_EXE failed(ret : -2001)
E/PVMFOMXVideoDecNode(2579): Ln 1652 OMX_EventError nData1 -2147479541 nData2 0 
```

和（有时下一行被上面 4 行的垃圾邮件散布在其中。但其他时候，在上述 4 的垃圾邮件的几次迭代之后，这两行自己会被垃圾邮件。）

```
W/MediaPlayer(30537): info/warning (1, 16)
I/MediaPlayer(30537): Info (1,16) 
```

我不认为这是我的视频 (AVC MP4) 的编码问题，因为完全相同的视频可以在*某些*Epic Touch 4g 设备上正常工作（甚至某些在相同版本的操作系统上）。而且我过去在此设备上使用过完全相同的视频，当设备升级到操作系统版本 2.3.6 时，这些问题开始发生。

任何人都可以对我看到的 OMX/MFC 错误有所了解吗？或者有没有其他人对 VideoView 只显示黑屏而不是视频有问题？最后，还有其他一些方法可以让我开始准备/播放我的视频文件，这可能不会导致这些错误和黑屏吗？

**编辑：**我在[这个文件](https://github.com/android/platform_external_opencore/blob/master/pvmi/pvmf/include/pvmf_return_codes.h)中发现警告 #16 是：

```
/*
Notification that a processing failure occurred (not fatal error)
*/
const PVMFStatus PVMFInfoProcessingFailure = 16; 
```

这应该是一个非致命错误。我想它没有崩溃，所以它不是“致命的”，但无论发生什么都导致我的视​​频无法正确显示。

**编辑 2：**视频开始时来自设备的更多日志。这些都出现在上述垃圾邮件之前：

```
D/PowerManagerService(2677): acquireWakeLock flags=0xa tag=KEEP_SCREEN_ON_FLAG uid=1000 pid=2677   myUID=1000 myPID=2677 myTID=23672
I/ALSAModule(2579): Initialized ALSA PLAYBACK device hifi
W/AudioFlinger(2579): write blocked for 99 msecs, 318 delayed writes, thread 0x61a00
I/libfimc(2677): bool SecFimc::create(SecFimc::FIMC_DEV, fimc_overlay_mode, unsigned int):: Fimc reserved memory =0x57da0000
E/Surface(6585): Surface::init token -2 identity 3401
E/action=%s(2677): com.android.music.musicservicecommand
D/AudioService(2677): musicservicecommand
E/MediaPlayer-JNI(6585): setDataSource: outside path in JNI is ?x@
I/WindowManager(2677):   CREATE SURFACE Surface(name=SurfaceView, identity=3401, mNativeSurface=0) IN SESSION android.view.SurfaceSession@40825e90: pid=6585 format=4 flags=0x200 / Window{40bbc478 SurfaceView paused=false}
D/MediaPlayerService(2579): getPlayerType. Ln=935
D/MediaPlayerService(2579): createPlayer. type=1
D/MediaPlayerService(2579):  create PVPlayer
V/PlayerDriver(2579): PVSuspensionState struct constructor
V/PVPlayer(2579): PVPlayer constructor
V/PVPlayer(2579): construct PlayerDriver
V/PlayerDriver(2579): constructor
V/PlayerDriver(2579): OpenCore hardware module not found
V/PlayerDriver(2579): start player thread
V/PlayerDriver(2579): startPlayerThread
V/PlayerDriver(2579): InitializeForThread
V/PlayerDriver(2579): OMX_MasterInit
V/PlayerDriver(2579): OsclScheduler::Init
V/PlayerDriver(2579): CreatePlayer
D/(2579): SISO TEST registering PVMFRecognizerPluginFactory
D/(2579): SISO TEST registering PVMFRecognizerPluginFactory success
V/PlayerDriver(2579): AddToScheduler
V/PlayerDriver(2579): PendForExec
V/PlayerDriver(2579): OsclActiveScheduler::Current
V/PlayerDriver(2579): StartScheduler
V/PVPlayer(2579): send PLAYER_SETUP
V/PlayerDriver(2579): Send player code: 2
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_SETUP status=PVMFSuccess
V/PVPlayer(2579): setVideoSurface(0x46b0d0)
V/PVPlayer(2579): setVideoSurface(0x2d8cd0)
V/PVPlayer(2579): prepareAsync
D/ViewRoot(3990): handleAppVisibility:TN_USA_U1_SPR
V/PlayerDriver(2579): Send player code: 3
V/PlayerDriver(2579): handleSetDataSource
V/PlayerDriver(2579): handleSetDataSource- scanning for extension
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_SET_DATA_SOURCE status=PVMFSuccess
V/PVPlayer(2579): run_init s=0, cancelled=0
V/PlayerDriver(2579): Send player code: 6
V/PlayerDriver(2579): release string is 2.3.6 len 5
V/PlayerDriver(2579): HandleInformationalEvent: PVMFInfoDurationAvailable
V/PlayerDriver(2579): .... with duration = 168483 ms
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_INIT status=PVMFSuccess
V/PlayerDriver(2579): dongju PlayerCommand::PLAYER_INIT enter
V/PlayerDriver(2579): File EXT is : .mp4
E/PlayerDriver(2579): PlayerDriver::it is a not Protected file
V/PlayerDriver(2579): PlayerCommand::PLAYER_INIT exit
V/PVPlayer(2579): run_set_video_surface s=0, cancelled=0
V/PlayerDriver(2579): Send player code: 4
W/PlayerDriver(2579): Using generic video MIO
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_SET_VIDEO_SURFACE status=PVMFSuccess
V/PVPlayer(2579): run_set_audio_output s=0, cancelled=0
V/PlayerDriver(2579): Send player code: 5
V/PlayerDriver(2579): Create realtime output
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_SET_AUDIO_SINK status=PVMFSuccess
V/PVPlayer(2579): run_prepare s=0, cancelled=0
V/PlayerDriver(2579): Send player code: 7
V/PlayerDriver(2579): disable natpkt - 0
I/MFC_DEC_APP(2579): [SsbSipMfcDecOpen] MFC Library Ver 1.00
I/MFC_DEC_APP(2579): [SsbSipMfcDecOpen] handle(61) 
V/PlayerDriver(2579): HandleInformationalEvent: UNKNOWN PVMFStatus
V/PlayerDriver(2579): HandleInformationalEvent: type=44 UNHANDLED
W/MediaPlayer(6585): info/warning (1, 44)
I/MediaPlayer(6585): Info (1,44)
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_PREPARE status=PVMFSuccess
V/PlayerDriver(2579): PLAYER_PREPARE complete mDownloadContextData=0x0, mDataReadyReceived=0
D/MediaPlayer(6585): getMetadata
V/PVPlayer(2579): setLooping(0)
V/PVPlayer(2579): check_for_live_streaming s=0, cancelled=0
V/PlayerDriver(2579): Send player code: 12
V/PVPlayer(2579): setLooping(0)
V/PlayerDriver(2579): Send player code: 12
E/PVPlayer(2579): isDrmfile playing 0
E/PVPlayer(2579): OPLBlocked = 0
E/MediaPlayerService(2579): MediaPlayerService::mIsAnyDrmVideoPlaying : 0
E/MediaPlayerService(2579): MediaPlayerService::mpCheckOPLBlocked : 0
V/PVPlayer(2579): start
E/AudioPolicyManager(2579): getParamFromPolicy
D/AudioPolicyManager(2579): mCurDevice is 2
V/AudioPolicyManager(2579): getDeviceForStrategy() strategy 0, device 2
V/AudioPolicyManager(2579): getNewDevice() selected device 2
I/FmRadioController(2677): Jni player_SetVolume :7 
I/FmRadioController(2677): ---Jni player_SetVolume---
V/PlayerDriver(2579): Send player code: 8
V/PlayerDriver(2579): dongju handleStart
E/PlayerDriver(2579): PlayerDriver::handleTvOut state=[1]
E/PlayerDriver(2579): PlayerDriver::it is not a DRM file.So don't suspend TVOUT
V/PlayerDriver(2579): CommandCompleted
V/PlayerDriver(2579): Completed command PLAYER_START status=PVMFSuccess 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T23:16:48.000

我曾经遇到过类似的问题，当我的回调出现错误时，我通过重新加载活动来克服它。起初它工作，但后来它一直失败，这导致活动的无限重启循环。然后我决定在这种情况下放一张图片而不是视频（这真的没那么重要）。

我猜这是值得一试的......如果你没有得到任何回调到你的 onErrorListener，只需在活动激活 5 秒后运行它，以测试它是否解决了你的问题。

这是我为重新加载活动而编写的代码：

```
public void reload(String boolExtra) {
    Intent intent = getIntent();
    overridePendingTransition(0, 0);
    intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
    finish();

    overridePendingTransition(0, 0);
    startActivity(intent);
} 
```

我可以建议的另一种方法 - 使用编解码器。我知道它在其他设备上运行良好，但你永远无法知道这个特定 Android 版本附带的这个特定设备的编解码器是否有错误。尝试改变它的尺寸。

祝你好运:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T09:08:41.513

```
File filepath = new File(Environment.getExternalStorageDirectory()+"/Video/"+"abc_video.mp4");

Uri path = Uri.fromFile(filepath);

Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(path, "video/*");
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

用它来运行你的视频，我相信你的问题会得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T19:38:12.853

既然您已经说过重新启动活动有时会起作用，我敢打赌它是一个多线程事件触发器，通常发生在您的 onPrepared() 侦听器触发之前，但并非总是在特定手机导致您出现问题的情况下发生。我不知道您何时真正准备要播放的视频，但我猜它在 onCreate() 中。如果是这样，我建议尝试以下机制：

在您的 Activity 类中，创建一个布尔成员，如下所示：

```
protected boolean bMyVideoIsReady = false; 
```

一旦你有了它，修改你的监听器：

```
 mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer arg0) {
            if (MyActivity.this.bMyVideoIsReady)
                mVideoView.start();
            else
                MyActivity.this.bMyVideoIsReady = true;
        }
    }); 
```

完成这些修改后，将以下内容添加到您的活动的 onResume() 中：

```
@Override
protected void onResume() {
    super.onResume();
    if (bMyVideoIsReady) 
        mVideoView.start();
    else
        bMyVideoIsReady = true;
} 
```

这将完成的是，如果您的视频在 Activity 准备好开始播放之前加载，您的侦听器将简单地将布尔标志设置为 TRUE，然后 onResume() 将看到该标志已设置并开始播放您的视频。如果 onResume() 在视频完成加载之前被调用，那么它会简单地设置标志，现在你的听众会看到它并在那个时候开始播放视频。这样，您的视频将不会在 Activity 准备好之前开始播放，并希望它可以防止您目睹的这种奇怪行为。

# shell - 将完整的 shell 脚本程序更改为 awk

> ID：11531862
> 
> 赞同：-6
> 
> 时间：2012-07-17T22:40:25.240
> 
> 标签：shell, awk

我正在使用一个在内部调用 awk 脚本的 shell 脚本程序……但我计划将整个脚本更改为 awk，因为我遇到了一些问题……我只想知道 shell 中有一些我会的命令想知道它们是否可以在 awk 中完成。

1) ls, cd, zcat .. 如果我能做到，我该怎么做.. 请大家对此提出一些建议。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T01:19:20.790

Shell commands and external utilities such as those you list can be performed by the AWK `system()` function. You may not need `cd` and `ls` depending on what you're doing. Something like `zcat` can be called with `system()` and the output read using `getline`.

```
cmd = "zcat filename"
while ((cmd | getline) > 0 {
    # do something with the data
}
close(cmd) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T01:17:24.327

Welcome to StackOverflow. This is a programming resource. The questions that get the best answers tend to include source code, input data, expected results and actual results. You will get better answers if you TRY to do things, fail, then come here with specific questions.

That said, you can find out what commands are available within awk by running `man awk` from your shell. In general, you should keep in mind that `ls` and `zcat` and anything in /bin or /usr/bin are also not "built-in" to your shell, but are external programs that can be called from an interactive command line or a script in most languages. To be clear: `ls` and `zcat` are not part of awk, and are also not part of /bin/sh.

There are also different versions of awk, with different behaviours and different commands available. You will get the best documentation from your own system, since we don't know what tools you're using.

So ... for this question, show us your shell script, show us your attempt to make it an awk script, ask questions about specific problems you're having. Without seeing your code, we have no way of knowing whether what you want to do is even possible in shell, let alone awk.

# ios - IOS：MKPinAnnotationView 动画放置不起作用

> ID：11531866
> 
> 赞同：0
> 
> 时间：2012-07-17T22:41:15.860
> 
> 标签：ios, uiview, mkmapview, mkpinannotationview

我有这段代码可以删除并在我的地图中添加一个新图钉：

```
- (IBAction)setLocation:(id)sender{

    NSMutableArray *toRemove = [NSMutableArray arrayWithCapacity:1];
    for (id annotation in map.annotations)
        if (annotation != map.userLocation)
            [toRemove addObject:annotation];
    [map removeAnnotations:toRemove];

    MKPointAnnotation *annotationPoint = [[[MKPointAnnotation alloc] init]autorelease];
    annotationPoint.coordinate = map.userLocation.coordinate;
    annotationPoint.title = @"Position";
    [map addAnnotation:annotationPoint];

    MKPinAnnotationView *pinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotationPoint reuseIdentifier:@"Pin"] autorelease];
    pinView.pinColor = MKPinAnnotationColorRed;
    pinView.canShowCallout = YES;
    //pinView.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    pinView.animatesDrop = TRUE;

} 
```

但我设置了我的 pin 它不做动画但我设置了 animatesDrop = true，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:44:47.263

看来您没有将 pinView 添加到地图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:21:28.637

我认为这可能会有所帮助。我相信您可以尝试使用[MKMapViewDelegate](http://developer.apple.com/library/ios/#DOCUMENTATION/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intf/MKMapViewDelegate)（Apple 文档，查看 MapCallouts 示例项目）方法：

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
{
    MKPinAnnotationView* customPinView = [[[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:nil] autorelease];

// alter properties of the customPinView

    return customPinView; // if you return nil... then the MKPinAnnotation default will be dropped.
} 
```

确保`<MKMapViewDelegate>`在标头中添加协议

# html - 表格宽度超过容器宽度

> ID：11531867
> 
> 赞同：3
> 
> 时间：2012-07-17T22:41:16.663
> 
> 标签：html, css, html-table

我正在开发一个生成 HTML 表格的报告应用程序，该表格可以多行高多列长（有时 40 或更多）。

问题是，这些表中的许多都超出了它们包含的 div，而且看起来很丑。出于某种原因，包含的 div 不会拉伸到表格的大小。

所以，这是我的问题：是否可以使用 CSS 将包含元素拉伸到表格的宽度？

这是[最基本](http://jsfiddle.net/Qn5KH/1/)的问题。

 `* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:46:25.743

给你的容器一个浮动，强制它拉伸到内容的宽度：

```
div{
    border:2px solid #F00;
    padding:10px;   
    float: left; 
} 
```

[小提琴](http://jsfiddle.net/Qn5KH/3/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-24T18:30:54.497

只需投入`<div style="overfow:auto"><table>`并快乐编码

```
div{
    border:2px solid #F00;
    padding:10px;    
}
table{
    border:2px solid #00F;    
}
td, th{
    border:1px solid #00F;
    padding:4px;    
}
```

```
<div style="overflow: auto">
    <table>
        <tr>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
            <th>Lorem</th>
            <th>Ipsum</th>
            <th>Dolor</th>
            <th>Sit</th>
            <th>Amet</th>
        </tr>
        <tr>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
            <td>Lorem</td>
            <td>Ipsum</td>
            <td>Dolor</td>
            <td>Sit</td>
            <td>Amet</td>
        </tr>
    </table>
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T16:20:21.890

考虑另一种方法——在表格类中将表格布局设置为固定：

```
table-layout:auto; 
```

来自另一个[Stackoverflow 问题的想法](https://stackoverflow.com/questions/17969877/force-html-tables-to-not-exceed-their-containers-size)`

# java - 如何将变量从java文件传递到xml文件中查询的IN子句

> ID：11531871
> 
> 赞同：-2
> 
> 时间：2012-07-17T22:41:37.567
> 
> 标签：java, xml

例如，

在java文件中，

```
String[] arrayTest= {"a", "b", "c"};
String strTest = "";
for (String test: arrayTest) {
    strTest = strTest + ", " + test;
}
strTest = strTest.substring(1); 
```

在 xml 文件中，将变量传递给 IN 子句，如：

```
Where test in (#strTest#) 
```

但它没有用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-17T22:48:25.327

Do you mean you are storing this SQL query in an XML file with some other XML data? You could use StringBuilder and a for loop to build up the required SQL query as a String.

# javascript - 更改 ID 中的类

> ID：11531873
> 
> 赞同：2
> 
> 时间：2012-07-17T22:41:43.840
> 
> 标签：javascript, jquery

这是类名为“ **assistance_wrap** ”的示例 div。

```
<div class="assistance_wrap">
<div class="top"></div>
<div class="header highlight">Types of assistance offered at this event:</div>
<div class="nearby_header highlight">This event is currently full, but there are other ways you can</div>
</div> 
```

我已经克隆了这个 div，每个克隆的版本都有一个唯一的 ID。

```
<div id="assistance_wrap_315" class="assistance_wrap">
<div class="top"></div>
<div class="header highlight">Types of assistance offered at this event:</div>
<div class="nearby_header highlight">This event is currently full, but there are other ways you can</div>

<div id="assistance_wrap_316" class="assistance_wrap">
<div class="top"></div>
<div class="header highlight">Types of assistance offered at this event:</div>
<div class="nearby_header highlight">This event is currently full, but there are other ways you can</div> 
```

在我的 JS 中，我将名称**new_info**分配给具有类“assistance_wrap”的示例 div 的副本，并为其分配唯一的 Id 并显示在我的页面上。现在我想更改类**near_header 中的文本突出显示**谁的父 div id 是 **assistance_wrap_316**我应该怎么做？

这是我尝试过的。日志的输出基本上是 id 为**assistant_wrap_316**的 div 的整个文本。

```
console.log(new_info.find('#assistance_wrap_'+ event_data.eventId , '.nearby_header highlight').text()); 
```

假设 event_data.eventId 的值为 316

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T22:44:43.470

你应该删除`","`：

```
console.log($('#assistance_wrap_'+ event_data.eventId + ' .nearby_header').text()); 
```

或使用`find()`方法：

```
console.log($('#assistance_wrap_'+ event_data.eventId).find('.nearby_header').text()); 
```

# twitter-bootstrap - 已开发网站的 Twitter 引导程序的简易性

> ID：11531878
> 
> 赞同：-2
> 
> 时间：2012-07-17T22:42:16.793
> 
> 标签：twitter-bootstrap

我有一个在 Rails 中构建的网站，但在不同的浏览器中却分崩离析。Twitter Bootstrap 是我可以用来让它工作的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:45:39.910

是的，这是让网站在不同浏览器上看起来不错的绝佳方式。

JQuery 是让您的网站在不同浏览器上进行良好交互的绝佳方式。

下一次，我建议问一个更关注代码的问题，并告诉我们你已经尝试过什么。Stack Overflow 上的人们想知道您在来这里之前已经尝试过自己解决问题。

# macos - 无法在 Mac 上的 MonoDevelop 3.0.3.4 中使用 TeamAddins 连接到 TFS 服务器

> ID：11531883
> 
> 赞同：1
> 
> 时间：2012-07-17T22:43:01.687
> 
> 标签：macos, tfs, monodevelop

我正在尝试通过 TeamAddins 3.0 插件使用 MonoDevelop 3.0.3.4 从 Mac 连接到 TFS 服务器。

当我尝试通过 Team -> Team Source Explorer -> Add Repository... 添加我的 TFS 存储库并输入我的 TFS 详细信息时，我在 Source Control 窗格中收到：

错误：名称解析失败

错误：名称解析失败

错误：名称解析失败

当我尝试签出（通过版本控制 -> 签出 -> TeamFoundationServer）并输入我的服务器信息时，我收到以下异常：

System.NullReferenceException：对象引用未设置为 TeamAddins.VersionControl.TFS.TFSRepository.createNewWorkspace () [0x00000] 处的对象实例：TeamAddins.VersionControl.TFS.TFSRepository.Checkout（文件路径路径，MonoDevelop.VersionControl。修订版本，布尔递归，IProgressMonitor 监视器）[0x00000] 在：0 在 MonoDevelop.VersionControl.CheckoutWorker.Run () [0x00006] 在 /Users/builder/data/lanes/monodevelop-mac-monodevelop-3.0.3-branch/ 57eb8135/source/monodevelop/main/src/addins/VersionControl/MonoDevelop.VersionControl/MonoDevelop.VersionControl/CheckoutCommand.cs:55 在 MonoDevelop.VersionControl.Task.BackgroundWorker（System.Object 状态）[0x00000] 在 /Users/builder/数据/通道/monodevelop-mac-monodevelop-3.0.3-branch/57eb8135/source/monodevelop/main/src/addins/VersionControl/MonoDevelop。版本控制/MonoDevelop.VersionControl/Task.cs:49

任何帮助将非常感激。我尝试连接的 TFS 服务器在其他 IDE 上工作正常，如果这有什么不同，它会通过 http 提供其内容。

# objective-c - 使用带有子类的父类

> ID：11531884
> 
> 赞同：0
> 
> 时间：2012-07-17T22:43:15.297
> 
> 标签：objective-c

我一直在做一些阅读，有点困惑，让我解释一下。

**我的情况：**

ClassA.h 有一些数组，ClassA.m 有一些使用这些数组的方法。我也有 ClassB、ClassC、ClassD...，它们有自己的数组，以及使用这些数组的自己的方法。到目前为止，我只是将代码复制并粘贴到每个类中。

**我想做的事：**

我做了一些阅读，发现我想创建一个父类，其中包含所有方法，然后在我的类中使用这些方法：

```
//parentClass.m
@implementation parentClass

+ (void)commonMethod:(id)sender{

...

}

@end

//classA.m

@implementation classA

- (void)someMethod{
    [parentsClass commonMethod];
}

@end

//classB.m

@implementation classB

- (void)someMethod{
    [parentClass commonMethod];
}

@end 
```

**问题：**

所以我将方法移到了 parentClass.m，将数组移到了 parentClass.h。我的问题是当我尝试构建和运行时，我会收到类似`Instance variable <someArray> accessed in class method`. 我不知道该怎么办。解决这个问题的唯一方法是`@interface`在`.h`文件中声明我的数组吗？

* * *

编辑：我想使用这种技术在父类中使用方法的原因是因为我想调用这样的方法：

`[commonClass commonMethod];`

并且不必每次都声明父类的实例。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T22:49:59.767

不管继承如何，如果你想访问实例变量，比如你的数组，你必须使用*实例*方法（而不是*类方法）。*实例方法由`-`方法签名前的（减号）表示，而类方法使用`+`.

# git - 对于持续集成、git 项目管理和客户管理，我有哪些选择

> ID：11531891
> 
> 赞同：0
> 
> 时间：2012-07-17T22:43:45.813
> 
> 标签：git, continuous-integration, project-management, bug-tracking

目前在我的工作中，我们使用 basecamp 来管理客户项目，他们可以在其中跟踪特定项目的工作。我们最近开始使用 git 来管理我们的代码库。所以在很多方面，大本营已经不够用了。我正在寻找可以让我们管理代码库和项目的选项。

由于我们项目的性质和其他各种原因，我们不能使用 github 或在线托管解决方案，而必须使用我们自己的服务器。私人托管的 github 太贵了。

所以我正在寻找的功能如下：

*   大本营拥有的大部分或许多东西。客户应该能够登录并查看项目的更新。以及在项目本身上发布内容。比如在项目中提出的变更。

*   Git 项目管理。这主要只能由我们看到，而不是客户，但可能两者兼而有之。但是当客户提交错误或其他帖子时，我们可以在内部将其绑定到项目并提交或提交以讨论该问题。然后，我们可以跟踪问题并就问题更新客户。因此，当代码被修复时，客户端会收到状态更新通知。

*   持续集成。我希望能够以一种可以运行测试的方式管理代码（如果有的话）（并非我们所有的项目都使用测试）。当我们推送到生产分支时，它会自动使用新代码更新实时站点（尽管我知道我可以使用 git 中的提交挂钩来完成此操作）。

*   可选的，但我想要特定项目的某种 wiki 或注释，只有我们可以看到它，而不是客户。例如更改某些代码的原因或通常我们需要记录的任何内容。

我看过 ruby​​mine，但我们不使用 ruby​​，而且我们都不太熟悉它。因此，如果出现问题，将不值得花时间修复它。我查看了带有 git 扩展的 trac 并且看起来很有希望。

我见过的另一个看起来不错的产品是 You Track 和相关产品。我们只有大约 4 名开发人员，所以我仍然需要看看成本是多少。

我不是在问哪个更好。我只是想看看有哪些选择，这样我就可以确定什么时候适合我们的情况。我们主要使用 .Net/C#、PHP、JavaScript、Node.JS。如果系统可以在 windows 上运行，那将是一个巨大的优势（当前服务器是 windows 服务器），但我试图让我们一个 linux 服务器来运行它。所以任何一个选项都是有效的。

所以任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:04:52.423

由于您的团队很小，因此您有资格获得JetBrains 提供的[YouTrack](http://www.jetbrains.com/youtrack/)和[TeamCity](http://www.jetbrains.com/teamcity/)（用于持续集成）的免费许可。

我没有尝试过 YouTrack，但 TeamCity 是一款了不起的产品，恕我直言，我敢打赌两者都集成得很好。我们的 TeamCity 部署在 Windows 上，主要用于构建 .NET 项目以及自动部署它们。但它有大量不同技术的构建运行器。另外，与我使用过的其他一些（例如 CruiseControl.NET）相比，它具有一些非常重要的优势，这些优势是：

*   用于并行构建的多个构建代理（免费版中最多 3 个）
*   几乎所有东西都可以直接通过 UI 进行配置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:22:37.907

IBM 为您提供了一个开箱即用的完整解决方案——
从需求到源代码控制再到构建自动化和交付。

请参阅[http://jazz.net/](http://jazz.net/)上的**[Rational Team Concert (4.0)](https://jazz.net/products/rational-team-concert/)** （作为评论的一部分，您可以免费获得 10 个许可证）。

IDE 基于 Eclipse 构建，在 Windows 和 Linux 上运行良好，
最近我什至能够在 Mac 上安装服务器
（所有 3 个平台都有官方客户端）。

# javascript - jQuery 查找列类

> ID：11531894
> 
> 赞同：0
> 
> 时间：2012-07-17T22:44:20.240
> 
> 标签：javascript, jquery

请在下面查看我的代码：

```
 <div class="grid_6 box a col1 row1" style="left: 231px; top: 380px; position: absolute; "></div>
     <div class="grid_6 box a col2 row1" style="left: 471px; top: 380px; position: absolute; "></div>
     <div class="grid_6 box a col3 row1" style="left: 711px; top: 380px; position: absolute; "></div>
     <div class="grid_6 box a col4 row1" style="left: 951px; top: 380px; position: absolute; "></div>
     <div class="grid_6 box b col1 row2" style="left: 231px; top: 540px; position: absolute; "></div>
     <div class="grid_6 box b col2 row2" style="left: 471px; top: 540px; position: absolute; "></div>
     <div class="grid_6 box b col3 row2" style="left: 711px; top: 540px; position: absolute; "></div>
     <div class="grid_6 box b col4 row2" style="left: 951px; top: 540px; position: absolute; "></div> 
```

我需要制作一个 jquery 脚本，它会找出我点击了哪一列和哪一行。

这可以轻松完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T22:50:37.973

假设您的点击处理程序位于`div`...

```
var col_row = this.className.match(/col(\d+)\s+row(\d+)/); 
```

该列将位于 index `1`，行将位于 index `2`。

```
var col = col_row[1],
    row = col_row[2]; 
```

* * *

FWIW，你冷在Firefox中这样做......

```
var [_, col, row] = this.className.match(/col(\d+)\s+row(\d+)/) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:02:53.287

我在这个地址发布了关于 jsfiddle 的解决方案：http: [//jsfiddle.net/6GBPF/3/](http://jsfiddle.net/6GBPF/3/)

如您所见，代码非常简单，并且使用了一些基本的正则表达式。 `(^|[^\w])row([0-9]+)`基本意思是：取字符串后面的一个或多个数字的序列，`row`前面有一个不是单词字符或字符串开头的字符（在本例中为类属性），这样 row[0-9]+ 类甚至可以在属性的开头。从`match`函数的数组结果中，最后一个元素就是您要查找的元素。该列的工作方式相同。

```
$(document).ready(function(){
    $('.grid6').on('click', function(){
        var $div = $(this),
            rowMatch = $div.attr('class').match("(^|[^\w])row([0-9]+)"),
            row = rowMatch[rowMatch.length -1], 
            colMatch = $div.attr('class').match("(^|[^\w])col([0-9]+)"),
            col = colMatch[colMatch.length -1];
        alert("row: " + row + " - col: " + col);
    });
}); 
```

鉴于我不知道您是否生成正在处理的标记并且不能确定类属性将始终具有相同的类，因此即使在您具有类属性的情况下，正则表达式也适用this：（`not_a_row1 row2`正则表达式采用第二个（右一个）），按顺序排列。

发布的另一个解决方案 ( `var col_row = this.className.match(/col(\d+)\s+row(\d+)/);`) 假设类属性将始终具有该精确结构。即使不那么谨慎，如果您可以确定这一点，那也是一个非常简洁和富有表现力的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:52:33.767

我建议使用`data-`属性，因为它会更容易获得你想要的确切数据。但是，为了让你上课：

```
$('DIV').click(function(evnt){
    alert($(this).attr('class'));
});​ 
```

# grails - 如何使模板从控制器附加到特定视图

> ID：11531895
> 
> 赞同：0
> 
> 时间：2012-07-17T22:44:32.127
> 
> 标签：grails

我的问题是，我有一个页面说并包含一个表单，该表单在我的控制器`view.gsp`中调用一个动作说在提交时。现在我想做的是，当详细信息已成功保存在数据库中时，我想回到那个页面（）或者更确切地说是呆在那里，使用远程调用或提交。`save``MyController.groovy``view.gsp`

我怎么做？

另外，主要是，我想在失败时附加一条文字，“您的详细信息已成功保存”或“请再次输入详细信息”。我可以这样做创建一个模板，然后从`MyController`? 如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:25:45.313

所以你要使用相同的表单和操作来创建（保存）和编辑（更新）？

根据保存是否成功，您`save`在某个时间点的操作将`redirect`或特定视图。`render`因为无论是否保存，您总是希望渲染相同的视图，所以我会这样做：

```
def save = {
    def propertyInstance 
    //you need to do this since you are both saving and updating in the same action
    if(params.id) {
        propertyInstance = Property.get(params.id)
        propertyInstance.properties = params
    } else {
        propertyInstance = new Property(params)
    }

    if (propertyInstance.save(flush: true)) {
        flash.message="Property ${propertyInstance?.id} : ${propertyInstance?.address} has been added successfully"
    }
    else {
        flash.message = "Please enter details again"
    }
    render(view: "view", model: [propertyInstance: propertyInstance])
} 
```

然后在你的`view.gsp`你可以显示你在`flash.message`这样的设置：

```
 <g:if test="${flash.message}">
     <div class="message">${flash.message}</div>
 </g:if> 
```

**编辑**

如果您想使用模板（`_addressMessage.gsp`例如调用）来显示具有某种格式的消息（例如单独行中的地址部分），您可以`view.gsp`在您希望消息显示的任何位置执行类似的操作：

```
<g:if test="${propertyInstance.address}">
    <g:render template="addressMessage" model="[propertyInstance: propertyInstance]" />
</g:if>
<g:else>
    Please enter details again.
</g:else> 
```

我将其包括在内`<g:if...`，因为我认为如果没有地址，您不想显示此内容。

# sql - 如何在 SSRS 中导出没有标题的 csv

> ID：11531896
> 
> 赞同：5
> 
> 时间：2012-07-17T22:44:34.703
> 
> 标签：sql, reporting-services

有什么方法可以关闭**仅在一份**SSRS 报告上导出 CSV 的标题？

我正在使用 Report Builder 3，并从报告中删除了标题，但是当导出为 CSV 时，它们又回来了。我找不到任何地方可以关闭它们。

我见过[这个问题](https://stackoverflow.com/questions/7880275/ssrs-2005-export-to-csv-i-dont-want-the-header)，但它似乎涵盖了服务器上的所有报告，我只需要关闭几个标题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-19T16:00:31.073

无论您如何实现这一点（自定义程序集、自定义渲染扩展），您都需要修改服务器上的一些配置文件，除非您发送带有 URL 的 deviceinfo 参数，或者以编程方式从外部应用程序渲染报告。

更简单的方法是在服务器范围内，您可以单独使用当前的 CSV 扩展，并且非常容易实现。对你（和我）来说幸运的是，这几乎不需要任何代码就可以完成。

由于这是 CSV 扩展的 deviceinfo 参数之一，因此您只需将以下代码行添加到 RSReportServer.config 文件中。您正在使用当前的 CSV 文件在此处添加另一个扩展名。

```
<Extension Name="CSV (No Header)" Type="Microsoft.ReportingServices.Rendering.DataRenderer.CsvReport,Microsoft.ReportingServices.DataRendering">
    <OverrideNames>
       <Name Language="en-us"> CSV No Header</Name>
    </OverrideNames>
    <Configuration>
       <DeviceInfo>
          <NoHeader>true</NoHeader>
       </DeviceInfo>
    </Configuration>
</Extension> 
```

将其放在已经存在的 CSV 扩展代码行下方的行中，或 Render 元素内的任何位置。

这将允许您使用该新扩展名订阅报告或使用下拉菜单导出报告，因为 sql server 报告服务在填充下拉菜单时会查询该 xml 文件。

如果您确实使用按钮并实例化 Reportexecutionservice，则无论如何您都必须触摸配置文件才能使用 .dll。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-20T08:02:50.920

您无法对开箱即用的数据驱动订阅执行任何操作。可能可以编写一个自定义订阅扩展来做到这一点。对于直接从报表生成器导出，您也无法做任何事情，除非您做了一些聪明的事情，例如添加一个看起来像按钮的独立文本框，然后将一个操作与其关联，该操作创建一个 URL 供您使用 URL Access 打开/呈现报表。您可以在此处查看一些信息：http: [//msdn.microsoft.com/en-us/library/ms155046.aspx](http://msdn.microsoft.com/en-us/library/ms155046.aspx)。

通过 URL 访问，您可以传入 CSV 设备信息，在您的情况下为 NoHeader=true，根据[http://msdn.microsoft.com/en-us/library/ms15536 ​​5.aspx](http://msdn.microsoft.com/en-us/library/ms155365.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-26T12:22:01.667

添加这个：

```
<Extension Name="CSV (No Header)" Type="Microsoft.ReportingServices.Rendering.DataRenderer.CsvReport,Microsoft.ReportingServices.DataRendering">
<OverrideNames>
   <Name Language="en-us"> CSV No Header</Name>
</OverrideNames>
<Configuration>
   <DeviceInfo>
      <NoHeader>true</NoHeader>
   </DeviceInfo>
</Configuration>
</Extension> 
```

到这里的配置文件：C:\Program Files\Microsoft SQL Server{INSTANCE}\Reporting Services\ReportServer\rsreportserver.config（在该部分）

将在导出选项的下拉列表中创建另一个选项，但仍将使用 CSV 格式 (Microsoft.ReportingServices.DataRenderer)，因此用户仍然可以为每个报告选择他们想要的格式。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-28T21:10:08.460

对于那些寻找仅使用 URL 访问的导出选项的人，正如@Stacia 所建议的那样，您可以请求一个不带标题选项的 CSV 导出，只需在您的请求中包含这个：**rc:NoHeader**（命名空间是 rc:not rs:)

示例 URL：[http://localhost/ReportServer/?ReportName&rs:Command=Render&rs:Format=CSV&rc:NoHeader=true](http://localhost/ReportServer/?ReportName&rs:Command=Render&rs:Format=CSV&rc:NoHeader=true)

# android - ListView中的Android setText导致空指针

> ID：11531908
> 
> 赞同：1
> 
> 时间：2012-07-17T22:46:12.577
> 
> 标签：android, settext

这是我的问题，我正在尝试从 ListView 中设置文本。问题是，我会收到一个错误，因为（根据我的日志）我的主要活动的 setContentView 与我想从另一个 .xml （contactList.xml）设置文本的 TextView 不匹配

工作活动（主要）

```
 @Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.jobs);
    vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
    TextView assigned = (TextView) findViewById(R.id.assigned);

    new ParseJobs().execute(); 
```

ParseJobs() 方法

```
 @Override
    protected void onPostExecute(Void result) {
        super.onPostExecute(result);

        if (ACKNOWLEDGED.contains("False")) {

            /** Updating parsed JSON data into ListView */
            ListAdapter adapter = new SimpleAdapter(Jobs.this, contactList, R.layout.list_item, new String[] { job, pays, ready_at }, new int[] { R.id.job1, R.id.pays1, R.id.ready_at1 });
            setListAdapter(adapter);        

            //TextView readyORdue = (TextView) findViewById(R.id.readyORdue);
            //readyORdue.setText("Ready At:");
        }

        if (ACKNOWLEDGED.contains("True")) {

            /** Updating parsed JSON data into ListView */
            ListAdapter adapter = new SimpleAdapter(Jobs.this, contactList, R.layout.list_item, new String[] { job, pays, due_by }, new int[] { R.id.job1, R.id.pays1, R.id.due_by1 });
            setListAdapter(adapter);    

            //TextView readyORdue = (TextView) findViewById(R.id.readyORdue);
            //readyORdue.setText("Due By:");
        }

        VerifyDriver.dismiss();

    }
} 
```

请注意，在我的 ParseJobs 方法中，我正在尝试更新 TextView “readyORdue”，但我会收到错误消息，因为 TextView 属于 SimpleAdapter contactList.xml

所以我的问题是，我将如何从我的contactList XML 布局中设置文本视图？

这是我的日志：

```
 07-17 15:55:16.703: W/dalvikvm(4387): threadid=1: thread exiting with uncaught exception (group=0x40015578)
 07-17 15:55:16.703: E/AndroidRuntime(4387): FATAL EXCEPTION: main
 07-17 15:55:16.703: E/AndroidRuntime(4387): java.lang.NullPointerException
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at com.jetdelivery.mobile.Jobs$ParseJobs.onPostExecute(Jobs.java:287)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at com.jetdelivery.mobile.Jobs$ParseJobs.onPostExecute(Jobs.java:1)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at android.os.AsyncTask.finish(AsyncTask.java:417)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at android.os.AsyncTask.access$300(AsyncTask.java:127)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:429)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at android.os.Handler.dispatchMessage(Handler.java:99)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at android.os.Looper.loop(Looper.java:130)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at android.app.ActivityThread.main(ActivityThread.java:3687)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at java.lang.reflect.Method.invokeNative(Native Method)
 07-17 15:55:16.703: E/AndroidRuntime(4387):    at java.lang.reflect.Method.invoke(Method.java:507)
07-17 15:55:16.703: E/AndroidRuntime(4387):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
07-17 15:55:16.703: E/AndroidRuntime(4387):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
07-17 15:55:16.703: E/AndroidRuntime(4387):     at dalvik.system.NativeStart.main(Native Method) 
```

第 287 行是“readyORdue.setText("Ready At:");"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:09:57.903

setListAdapter 与 ListActivity 相关，而 ListActivity 有她自己的布局内容，所以......你不能在 ListActivity 中设置内容视图 你可以做的是创建自己的布局，其中包含列表和 TextView readyORdue & TextView 分配，只有一件事为什么你使用两个 if ？你可以设置 if(firstCondition) { .. }else ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:12:57.057

这些是同一个班吗？如果是这样，我会`readyORdue`在你的`MainActivity`. 如果可以避免的话，你的线程不应该定义用户界面对象；这就是为什么你有`onCreate()`。

```
public class MainActivity {
    private TextView readyORDue;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.jobs);
        vib = (Vibrator) getSystemService(Context.VIBRATOR_SERVICE);
        TextView assigned = (TextView) findViewById(R.id.assigned);

        readyORDue = (TextView) findViewById(R.id.readyORdue);

        new ParseJobs().execute();
    }
} 
```

然后在你的解析器中

```
protected void onPostExecute(Void result) {
    super.onPostExecute(result);
    if (ACKNOWLEDGED.contains("False")) {

        /** Updating parsed JSON data into ListView */
        ListAdapter adapter = new SimpleAdapter(Jobs.this, contactList, R.layout.list_item, new String[] { job, pays, ready_at }, new int[] { R.id.job1, R.id.pays1, R.id.ready_at1 });
        setListAdapter(adapter);        

        readyORdue.setText("Ready At:");
    }

    if (ACKNOWLEDGED.contains("True")) {

        /** Updating parsed JSON data into ListView */
        ListAdapter adapter = new SimpleAdapter(Jobs.this, contactList, R.layout.list_item, new String[] { job, pays, due_by }, new int[] { R.id.job1, R.id.pays1, R.id.due_by1 });
        setListAdapter(adapter);    

        readyORdue.setText("Due By:");
    }

    VerifyDriver.dismiss();

} 
```

注意：您可能必须使用[`runOnUiThread`](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)setText() 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:14:21.930

如果您想按照您的描述使用另一个布局文件“contactList.xml”，首先您需要对其进行膨胀。

```
LayoutInflater inflater = (LayoutInflater)context.getSystemService (Context.LAYOUT_INFLATER_SERVICE); 
View contactList= inflater.inflate(R.layout.contactList, false); 
```

现在

```
TextView readyORdue = (TextView)contactList.findViewById(R.id.readyORdue); 
```

will give you needed TextView, add this view to some container in your R.layout.jobs to make it visible.

# jsf - 输入文本在 bean 变量中没有改变

> ID：11531910
> 
> 赞同：1
> 
> 时间：2012-07-17T22:46:17.103
> 
> 标签：jsf, jsf-2, primefaces, icefaces

当我在浏览器中输入数据时，它应该假设在 bean 中设置变量参数。但由于某种原因它没有设置。在某一时刻它确实有效，但又不再有效。

## XHMTL

```
<p:panel header="Previous Summary" toggleable="true"
                toggleSpeed="500"
                style="border: 1px solid white; background-color: #F0F8FF; text-align: left;">
                <ice:form>
                    <ice:inputRichText id="editor_prevsummary"
                        value="#{statusReport.prevSummaryStr}" width="1200" height="200"
                        rendered="#{statusReport.renderPrevSummTextIn}"
                        onchange="this.form.submit()"  />

                    <ice:outputText value="#{statusReport.prevSummaryStr}"
                        rendered="#{!statusReport.renderPrevSummTextIn}" escape="false"></ice:outputText>
                    <br />
                    <ice:commandButton action="#{statusReport.editPrevSummary()}"
                        value="Edit" partialSubmit="true" />
                    <ice:commandButton action="#{statusReport.updatePrevSumm()}"
                        partialSubmit="true" value="Update"  />
                </ice:form>
            </p:panel> 
```

## 豆价值

```
 public String getExecSummaryStr() {

        return execSummaryStr;
    }

    public void setExecSummaryStr(String execSummary) {

        this.execSummaryStr = execSummary;
    } 
```

我得到了同样的东西，即使我改为 inputText 或任何东西。不知道为什么会发生这种情况以及我应该从哪里开始诊断问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T00:10:21.220

您的问题是因为您在同一表单中使用相同的变量`<ice:inputRichText>`和内部。`<ice:outputText>`提交表单时，框架会将两个组件的值设置为`#{statusReport.prevSummaryStr}`，从而导致您的站点出现奇怪的行为。

编辑：

一个可能的解决方案可能是将`<ice:outputText>`表单移出并从您的 commandButton 呈现。另一种解决方案可能是使用 javascript 来更新其值。您可以执行以下操作：

```
<ice:inputRichText id="editor_prevsummary"
    value="#{statusReport.prevSummaryStr}" width="1200" height="200"
    rendered="#{statusReport.renderPrevSummTextIn}"
    onchange="document.getElementById('divText').innerHTML = this.value"  />
<div id="divText">

</div> 
```

# javascript - What is my obsolete Facebook API call?

> ID：11531913
> 
> 赞同：5
> 
> 时间：2012-07-17T22:46:58.053
> 
> 标签：javascript, api, facebook-javascript-sdk, obsolete

I recently got a notice that I'm using one or more obsolete calls which will impact the website shortly. The problem is that I can't find any useful documentation to determine which call is obsolete and every call that I'm making seems to still be ok.

Can anybody tell me which one of these calls is obsolete?

```
FB.init
FB.Event.subscribe  // auth.login, auth.logout
FB.getLoginStatus
FB.api
FB.login
FB.logout 
```

> As announced in the Facebook Developer blog, Facebook is in the process of removing methods from the Javascript SDK that are not officially supported. Your app "MY APP" (MY APP NUMBER) has been identified as using such methods, and we are informing you about this now so that you can make the necessary changes to avoid your application being affected when we first make these methods into empty stubs, and subsequently when we remove them.

Thanks! Brett

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T04:24:04.717

对于这封电子邮件的含糊之处，我深表歉意，但我可以向您保证，如果您使用这些方法，那么您是安全的。

收到此电子邮件的常见原因是

*   使用使用这种方法的第三方组件（许多 Flash SDK 都这样做）
*   使用这种方法的扩展程序浏览您网站的用户
*   有人从你那里复制粘贴代码，继承你的 appId
*   有人在他们的 appId 中有错字，所以它与你的匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T22:52:24.360

问：你看过这里吗：

*   [http://developers.facebook.com/docs/reference/oldjavascript/](http://developers.facebook.com/docs/reference/oldjavascript/)

    或在这里：

*   [http://developers.facebook.com/roadmap/](http://developers.facebook.com/roadmap/)

问：你能告诉我们这个“通知”的具体内容吗？

附录：

*   [“Facebook 开发者博客”](http://developers.facebook.com/blog/archive#2012)

*   您对[“Operation Developer Love”](http://developers.facebook.com/blog/post/2012/07/11/platform-updates--operation-developer-love/)条目感兴趣。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-19T06:12:09.267

我想......你确定你有什么App ID吗？（完成的应用程序）您不能在其他应用程序上使用此应用程序 ID。检查它： [https ://developers.facebook.com/apps](https://developers.facebook.com/apps)

# mysql - Mysql 日期和时间字段以及 GMT 偏移量

> ID：11531915
> 
> 赞同：1
> 
> 时间：2012-07-17T22:47:59.753
> 
> 标签：mysql, datetime, date, time, utc

我有 3 个字段。

```
1\. Date (as DATE)
2\. Time (as TIME)
3\. GMT Offset (as TIME) 
```

我需要将 3 个字段加在一起以检索要使用的最终 DATETIME 字段。

i) 当 GMT 偏移将日期带入新的一天时，我该如何做到这一点并应对重叠的日子？

ii) 将日期和时间存储为单个 DATETIME 字段是否更有效？如果是这样，那么 GMT 偏移量呢？将其保留为 TIME 字段，或者其他内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T22:59:00.997

我的意见是最好将前两个字段存储为`DATATIME`( `MyDateTime`) 字段。然后，这是一个使用问题

`SELECT TIMESTAMPADD(HOUR,GMT_Offset,MyDateTime)`把它放在一起。

当然，如果您愿意，您可以将它们全部放入一个表达式中：

```
SELECT TIMESTAMPADD(HOUR,GMT_Offset,TIMESTAMP(MyDate,MyTime)) 
```

我假设`MyDate`并且`MyTime`已经在格林威治标准时间。

# python - 如何可视化 RRD 文件的内容

> ID：11531916
> 
> 赞同：-1
> 
> 时间：2012-07-17T22:48:16.010
> 
> 标签：python, rrdtool

我有一个使用 python + rrdtool lib 创建的 rrd 文件。

如何查看此文件的内容？除了从 rrdtool API 获取数据之外，还有其他方法吗？

有RRD编辑器吗？

我最近开始使用这种文件，所以我不知道如何可视化它。

在此先感谢您的帮助。苏米特·普罗希特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:27:05.377

`rrdtool info <file.rrd>`将为您概述文件中`rrdtool dump <file.rrd>`的内容，并以 xml 格式为您提供全部内容。

# c# - How to retrieve exact url in a asp.net web application which uses the UIP application block?

> ID：11531919
> 
> 赞同：0
> 
> 时间：2012-07-17T22:48:31.773
> 
> 标签：c#, asp.net, debugging, url, application-blocks

The incoming URL in this application has some URL parms but when I put a breakpoint on the base page, all I see is the internally UIP mapped URL which loses the parm information.

So, for UIP based applications what is the method to retrieve the original URL?

I tried `Request.Url.AbsoluteUri` but it just gives the ../index.aspx url instead of the non-templated url which is incoming.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:47:55.247

请尝试使用属性[Request.Url.OriginalString;](http://msdn.microsoft.com/en-us/library/system.uri.originalstring.aspx)

该属性获取传递给 Uri 构造函数的原始 URI 字符串。

# google-chrome - Chrome behaves differently when pressing reload v pressing enter in URL field

> ID：11531923
> 
> 赞同：3
> 
> 时间：2012-07-17T22:49:15.970
> 
> 标签：google-chrome, browser

Was just trying to cobble a quick site together as a favour for my sister. It's based on a template she bought and I've just quickly bunged her copy/pictures in, so I'm aware the markup is far from perfect. That said, I can't see how it would be causing the following issue...

The template uses a jQuery plugin called jScrollPane to make the content sections scrollable. Sometimes however, in Chrome (v20) this doesn't work - it doesn't let you scroll all the way down.

What's really odd though, is the pattern I've found that seems to effect whether it works or not. Try the following

*   Go to [http://mattandkate2012.co.uk](http://mattandkate2012.co.uk) in Google Chrome - click 'Ceremony' - can you scroll down far enough to see the map? I can't.
*   Press the reload icon, click 'Ceremony' - can you scroll down? I can't.
*   Select the URL in the browser URL bar, press enter - can you scroll down? I can now!

Does everyone else get the same results as above, and do you have any idea why pressing enter in the URL bar has a different effect to the reload button?

This functionality works fine in Firefox and even IE!

Thanks

Pete

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T10:31:22.557

From a very quick look I guess it's because the section contains an image and you aren't re-initialising jScrollPane once the image loads. See:

[http://jscrollpane.kelvinluck.com/image.html](http://jscrollpane.kelvinluck.com/image.html)

The difference between refreshing and pressing enter in the location bar is that the cached image is shown when you press enter in the location bar...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:33:15.467

我建议将调用移至块`$('.content').jScrollPane({showArrows: true});`内`$(document).ready`- 如果您在文档准备好之前调用它，通常图像或其他元素不会加载，因此容器的高度将是错误的。

# eclipse - Remove java exception breakpoints when debugging Liferay in eclipse

> ID：11531925
> 
> 赞同：14
> 
> 时间：2012-07-17T22:49:22.687
> 
> 标签：eclipse, tomcat, liferay, xdebug, liferay-ide

By debugging of Liferay Portal, that is tomcat application, eclipse make usual stop at `ThreadPoolExecutor$Worker.run() line: 912` although I don't set a breakpoint at this class. The `ThreadPoolExecutor` isn't a class of my application, I think that belongs to tomcat. My Question is: what is wrong here, and why eclipse stopt here? And is it possible to set such "external breakpoints" in eclipse to ignore?

![enter image description here](../Images/42cf924be5b5c066c184e66e9dd4581b.png)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-18T05:03:18.920

您可以通过打开标记视图并删除 Java 异常断点来立即解决此问题。

![带有 Java 异常断点的标记视图](../Images/5273d515ff5388ac220c5221dbdb2607.png)

但是，要永久删除此类断点，您必须转到 Java Debug 选项并取消选中“Suspend execution on uncaught exceptions”选项。那么这种类型的断点以后就不会再添加了。

![Eclipse 中的 Java 调试选项](../Images/8de8726a05ef215f5dfa1e6b78e22acb.png)

# mysql - Best Database System for Searching by Multiple Tags

> ID：11531926
> 
> 赞同：0
> 
> 时间：2012-07-17T22:49:29.493
> 
> 标签：mysql, database, node.js, database-design, couchdb

I have dealt with tags systems before in MySql for a simple blog with a `Tag` table, a `TagMap` table and a `Post` table, but in my mind this is a very convoluted way of storing tags and relating them to posts. The query for getting posts by tag was equally convoluted.

Now that I am doing a project in Node.js, I am looking for a new way to store my data and a new database system. I have looked into CouchDB, but it seems to have [problems](https://stackoverflow.com/questions/1485594/couchdb-multiple-tags) searching for multiple tags and the concept of views seems too complicated for what I am trying to accomplish.

Is there a database system, preferably one that has a library/client out for node.js, that is efficient and that makes the whole tagging-ordeal seem intuitive?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:49:34.357

在这种情况下，我认为您不会比关系数据库做得更好。

如果您需要标签同义词，请在[此处](https://stackoverflow.com/a/11455753/533120)查看一些想法（但请注意，由于 MySQL 查询优化器的缺陷，应将 EXISTS 重写为另一个 JOIN）。没有同义词，这个模型可以进一步简化。

重要的一点是，使用诸如[集群](http://use-the-index-luke.com/sql/clustering/index-organized-clustered-index)和[覆盖](http://use-the-index-luke.com/sql/clustering/index-only-scan-covering-index)之类的技术应该为除了绝对大量的数据和并发用户之外的任何事物提供充足的性能。人们似乎犯的一个错误是在标签映射表中使用代理键，这会破坏集群。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T02:29:07.907

Redis 集在这里可能会很好地工作：创建一个由标签或标签 ID 组成的帖子 ID 键控的集合，以及一个由帖子 ID 组成的标签（或标签 ID）键控的集合。然后就可以使用redis内置的集合交集和并集操作符，基于多个标签进行快速搜索。

# javascript - How can I get all the unique elements from a list that auto-grows to POST?

> ID：11531927
> 
> 赞同：2
> 
> 时间：2012-07-17T22:49:37.623
> 
> 标签：javascript, jquery, python, html, pyramid

I created a list that auto-grows as new content is added. It's a simple example for me to learn with that allows people to add their siblings and their age (here it is: [http://jsfiddle.net/j08691/bhamU](http://jsfiddle.net/j08691/bhamU)). I added a submit button to the code and am sending it to a url to be processed.

**Html:**

```
<form>
<div class="family">
    <input name="age" value=0>  <input name="sibling" value="name?">
    <hr />
</div>
</form> 
```

**Javascript:**

```
$("form").on('keydown',"input[name='age']:last", function() {
    $('.family:last').clone().insertAfter(".family:last");
}) 
```

The problem is, if I enter:

```
 Bob - 25 
 Cindy - 24 
 Greg - 26 
```

The results I get are:

```
 Greg - 26
 Greg - 26
 Greg - 26 
```

The number of results are always the same as the number of siblings I enter but the actual results are always the last entry repeated. (I'm using Pyramid and using the `request.POST` command to see what's being posted).

I'm wondering if this is because I'm cloning the two inputs and their names are being repeated? Is there something I should be doing to make the forms identifiable after cloning?

I am using this to get the data:

```
def submitchange(request):
    for x in request.POST:
        print x, ' = ', request.POST[x] 
```

It outputs the correct number of inputs but all items are a duplicate of the last entry.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-19T01:25:50.460

好吧，您的原始代码非常非常接近功能，我很遗憾地说接受的答案不是最佳的。我的意思是，它现在可以工作了，但是想象一下你决定添加删除和重新排序项目的能力——你需要在每次操作之后在表单中重新编号元素，这会增加很多复杂性客户端。

然后，在服务器上，您需要以某种方式在 POST 中找到所有“name_1”、“name_2”、...“name_n”参数......我不确定如何以一种不是的方式执行此操作。 .. 错误... 没有吸引力。也许您需要在表单中传递一个包含总行数的隐藏变量？那会稍微简化一下事情。

无论如何，这里是真正的忍者如何做到这一点：

1.  提交表单时，如果表单中存在多个同名控件，则将它们全部发送到服务器。HTTP 规范仅[明确地](http://www.w3.org/TR/REC-html40/interact/forms.html#checkbox)为复选框指定了这一点，但如果您阅读规范的其余部分，它也隐含地允许其他控件这样做。无论如何，每个浏览器都会为多个控件发送多个名称-值对 - 您可以使用 Firebug 或仅通过将表单方法更改为 GET 来验证这一点 - URL 看起来像`?name=John+Smith&name=Joann+Smith&name=Bob+Smith`. 这些元素也保证按照它们在表单中出现的顺序发送。Pyramid 的`deform`表单库在很大程度上依赖于这一事实（通过[peppercorn](http://docs.pylonsproject.org/projects/peppercorn/en/latest/?awesome)库，但这绝不是您的任务所必需的）。

2.  Pyramid 请求的 POST 和 GET 属性可能看起来像字典，但实际上它们是[MultiDict](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/interfaces.html?highlight=multidict#pyramid.interfaces.IMultiDict)类的实例 - 这是一个类似字典的东西，可以包含给定键的多个值。

当您访问 request.POST['param_name'] 时，MultiDict 返回添加到列表中的最后一个“标量”值 - 如果在表单中遇到多个值，它会自动返回一个列表，但这也是容易出错，因为如果只有一个元素，该值要么是一个标量，要么会神奇地变成一个包含多个元素的列表。

因此，如果您知道应该为表单中的给定键传递多个值，则可以使用 `getall(key)`方法检索它们。在您的示例中：

```
def submitchange(request):
    for x in request.POST:
        print x, ' = ', request.POST.getall(x) 
```

应该就是这样！

此外，这里有一篇来自 Chris McDonough 的精彩文章，详细解释了所有内容：[Peppercorn: A Simpleer Way to Decode Form Submission Data](http://www.plope.com/peppercorn) - 如果您决定再进一步，而不是在服务器上获取两个列表：

```
name = ["a", "b", "c"]
age = ["10, "20, "30"] 
```

有一个*记录*列表：

```
[
{'name': 'a',
 'age': 10
},
{'name': 'b',
 'age': 20
},
{'name': 'c',
 'age': 30
},

] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:55:30.617

那是因为它们具有相似的属性，您应该在克隆后`name`更改它们的属性。`name`尝试这个：

```
<form>
<div class="family">
    <input name="age_1" value=0>  <input name="sibling1" value="name?">
    <hr />
</div>
</form> 
```

```
$("form").on('blur',"input[name^='age']:last", function() {
    var name = parseInt(this.name.slice(-1), 10)
    $('.family:last').clone().insertAfter(".family:last");
    $('.family:last').find('input[name^="age"]').attr('name', 'age_'+(name+1)).val("")
}) 
```

[演示](http://jsfiddle.net/bhamU/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T23:17:16.340

> 我想知道这是否是因为我正在克隆两个输入并且它们的名称被重复？克隆后我应该做些什么来使表格可识别？

是的你应该。

```
var i = 1;
$("form").on('keydown',"input[name='age']:last", function() {
    var a = $('.family:last').clone();
    a.insertAfter(".family:last");
    i++;
    $($('.family:last input')[0]).attr('name', 'age'+i);
    $($('.family:last input')[1]).attr('name', 'sibling'+i);

})
    ​ 
```

# html - How to make tabs fixed size in twitter bootstrap

> ID：11531928
> 
> 赞同：2
> 
> 时间：2012-07-17T22:49:47.543
> 
> 标签：html, css, twitter-bootstrap

What's the best way to fix the width and height of left tabs in twitter bootstrap to use it as a fixed size navigation bar? Questions are better illustrated in the code below.

```
 <div class="tabbable tabs-left">
        <ul class="nav nav-tabs">
          <li class="nav-header">Questions</li>
          <li class=""><a data-toggle="tab" href="#lA">------ Question 1 -------</a></li>
          <li class="active"><a data-toggle="tab" href="#lB">------ Question 2 ------</a></li>
        </ul>
        <div class="tab-content">
          <div id="lA" class="tab-pane">
            <p>How do I fix the width of this section as to avoid using the --------</p>
          </div>
          <div id="lB" class="tab-pane active">
            <p>Can I fix the height as well?</p>
          </div>
        </div>
      </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:37:25.253

我对 Bootstrap 不是很熟悉，但由于没有其他人回答，这里是...

由于您突出显示的两个元素都有 ID，为什么不能只给它们特定的宽度/高度？

```
#1A {
    width: 300px;
}

#1B {
    height: 30px;
} 
```

正如我所说，我不熟悉 Bootstrap，所以我可能会误解你的问题，但这对我来说似乎是一个简单的解决方案。

# html - 让主列包裹一个漂浮在侧列中的超大元素？

> ID：11531933
> 
> 赞同：0
> 
> 时间：2012-07-17T22:50:32.700
> 
> 标签：html, css

所以我有这个小提琴来展示我想要实现的目标：http: [//jsfiddle.net/vbqmq/28/](http://jsfiddle.net/vbqmq/28/)

我有一个两列布局，但我希望主要内容中的一些元素溢出到侧栏上，并使主要内容文本环绕部分保留在主要内容块中的元素。

小提琴显示了所需的布局，除了内容没有包装侧边栏溢出。

我没有附加到 HTML 中的当前排序。如果我需要将其放入 中`container`，那很好，但如果我这样做，则旁边仍需要保持在`cross-column`块下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:12:11.550

## 原始解决方案

假设您的溢出是一个集合`width`并且`height`（作为您的示例），那么伪元素在这里可能很有用。[见小提琴](http://jsfiddle.net/vbqmq/37/)。

```
#content:before {
    content: '';
    display: block;
    float: right;
    width: 50px;
    height: 100px;
} 
```

## 更灵活的解决方案

我知道在维度上获得灵活性的唯一方法是将项目移动到内容区域。[看到这个小提琴](http://jsfiddle.net/vbqmq/41/)。所以这个html：

```
<div id="wrapper">
  <div id="main">
    <div id="container">
      <div id="content">    
        <div id="cross-columns"></div>    
        <div id="aside"></div>
        <p>Main content follows</p>
      </div>
    </div>
  </div>
</div> 
```

对原始 CSS 进行一些边距调整：

```
#cross-columns{
    margin: -10px -160px 0 0;
}

#aside{
    margin-right: -160px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:29:43.243

我仍然不能 100% 确定你在问什么，但我知道这个小 jquery 插件会将文本环绕在任何非常酷的形状上。

```
http://baconforme.com/ 
```

# c# - await AsyncMethod() 与 await await Task.Factory.StartNew （异步方法）

> ID：11531934
> 
> 赞同：9
> 
> 时间：2012-07-17T22:50:35.243
> 
> 标签：c#, asynchronous, task, async-await

给定以下方法：

```
public async Task<MyObject> DoSomethingAsync() {
    // do some work
    await OpenSomeFileAsync();
    return new MyObject();
} 
```

有没有区别：

```
public async void SomeEventHandler(EventArgs args) {
    var myObject = await await Task.Factory.StartNew<Task<MyObject>>( DoSomethingAsync);
    // do something with myObject
} 
```

和：

```
public async void SomeEventHandler(EventArgs args) {
    var myObject = await DoSomethingAsync();
    // do something with myObject
} 
```

我在想 DoSomethingAsync 的“做一些工作”部分会在第一种情况下立即发生在新任务中，但老实说，我并不完全了解 Tasks、async 和 await 是如何工作的，而且我很漂亮当然，我只是为自己把事情复杂化了。

编辑：

这个问题来自于查看这个 Metro 示例： [http ://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782](http://code.msdn.microsoft.com/windowsapps/Sharing-Content-Target-App-e2689782)

特别是在 MainPage.xaml.cs 中，他们有这个：

```
var unused = Task.Factory.StartNew(async () => { // some work... });
// unused is of type Task<TResult> 
```

我试图在不使用匿名异步函数的情况下对其进行返工，我开始想，为什么不写一个异步方法并等待它，而不是调用 StartNew 并提交一个异步函数呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-18T00:05:21.573

大多数情况下，添加另一个`Task`没有用，但在某些情况下，它可以。

不同之处在于，如果您在 UI 线程（或类似的线程）上并`DoSomethingAsync()`直接执行，它的第一部分 ( `// do some work`) 也将在 UI 线程上执行，该方法的任何延续部分也将执行（除非它们使用`ConfigureAwait()`）。另一方面，如果您启动另一个`Task`，则第一部分和任何后续部分都`DoSomethingAsync()`将在`ThreadPool`.

如果`DoSomethingAsync()`编写正确，添加另一个`Task`不应该给您带来任何好处（并且会给您带来更多开销的缺点），但我可以想象在某些情况下它会有所作为。

此外，您可以编写而不是使用`Task.Factory.StartNew()`and 两个`await`s：

```
await Task.Run(DoSomethingAsync); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:58:52.020

是的，有一个区别：在第一种形式中，你有一个额外的任务级别，它绝对不会带来任何有用的东西。

第一种形式基本上等价于：

```
Task<Task<MyObject>> task1 = Task.Factory.StartNew<Task<MyObject>>( DoSomethingAsync);
Task<MyObject>> task2 = await task1;
var myObject = await task2; 
```

所以它真的没有意义：你正在创建一个任务，只是......创建另一个任务。

# javascript - 如何在 Ajax 中使用 sharethis

> ID：11531942
> 
> 赞同：0
> 
> 时间：2012-07-17T22:51:34.097
> 
> 标签：javascript, jquery, ajax, javascript-events, sharethis

每次成功的 http 请求后，我都会添加新按钮。

```
//Remove events and items
$('#sthoverbuttons-chicklets span').remove(); 
```

然后，我通过将对象传递给 stwidget 来添加带有新事件的新项目。

请参阅此处的 sharethis 文档：http: [//support.sharethis.com/customer/portal/articles/475079-share-properties-and-sharing-custom-information#Dynamic_Specification_through_JavaScript](http://support.sharethis.com/customer/portal/articles/475079-share-properties-and-sharing-custom-information#Dynamic_Specification_through_JavaScript)

```
//Finish with share buttons
wyrAjax.sharethis.finishAddingShareButton();

wyrAjax.sharethis = {
//Grab the current share height so we can keep it this height when we remove all the items
    shareThisHeight:null,
    init:function () {

        //If the height has not been set set it
        if(wyrAjax.sharethis.shareThisHeight===null){
            wyrAjax.sharethis.shareThisHeight = $('#sthoverbuttons').outerHeight();
        }

        //Set up elements so that we can use them as ID's
        $('.sthoverbuttons-chicklets').attr('id', 'sthoverbuttons-chicklets');
        if (!$('#shareLoading').length) {
            $('#sthoverbuttonsMain').append('<div id="shareLoading"><img src="/img/loading.gif" style="position: absolute; top: 50%;left: 37%"></div>');
        }
    },
    shareTypes:function(){
        var array = [];
        array[0]={
            "service":"facebook"
        };
        array[1]={
            "service":"twitter"
        };
        array[2]={
            "service":"delicious"
        };
        array[3]={
            "service":"googleplus"
        };
        array[4]={
            "service":"reddit"
        };
        array[5]={
            "service":"tumblr"
        };
        array[6]={
            "service":"stumbleupon"
        };
        array[7]={
            "service":"digg"
        };
        array[8]={
            "service":"sharethis"
        };
        return array;
    },
    startGettingShareButton:function () {
        //First we run a quick check to see if the elemnts have ID's
        wyrAjax.sharethis.init();

        //Now lets fade out and clean up all the shares so we can add new shares in.
        $('#sthoverbuttons-chicklets').hide();

        $('#sthoverbuttonsMain').height(wyrAjax.sharethis.shareThisHeight);
        wyrAjax.sharethis.addLoadingToShare();
    },
    addLoadingToShare:function () {
        $('#shareLoading').show();
        $('#sthoverbuttons-chicklets span').off().remove();
    },
    finishAddingShareButton:function () {
        $('#shareLoading').hide();
        var shareItems = wyrAjax.sharethis.shareTypes();
        $.each(shareItems,function(key, value){
            wyrAjax.sharethis.addShareThisButton(value);
        });
        $('.sthoverbuttons-chicklets').show();
    },
    addShareThisButton:function (object) {
        stWidget.addEntry({
            "service":object.service,
            "element":document.getElementById('sthoverbuttons-chicklets'),
            "url":"http://www.wouldyourathers.co.uk/question/" + wyrAjax.questionDetails.id,
            "title":"Would You Rather | " + wyrAjax.questionDetails.q1,
            "type":"large",
            "text":"Would You Rather " + wyrAjax.questionDetails.q1 + " or " + wyrAjax.questionDetails.q2,
            "summary":wyrAjax.questionDetails.q1 + " or " + wyrAjax.questionDetails.q2
        });
    }
}; 
```

当我单击其中一个新添加的按钮时，它将转到例如 twitter 的共享功能，但由于某种原因它也会显示 Facebook 的共享。

我相信我想在重新添加它们之前删除跨度上的所有事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T22:48:17.727

所以我遇到的问题是 sharethis 不希望您删除共享项目。Sharethis`stWidget.addEntry`不希望您添加新的 dom 项目，它希望您替换页面上已经存在的当前共享按钮。

考虑到这一点，我编辑了代码以将 ID 添加到已共享的所有按钮：

```
 //Give all share buttons ID's
 var shareItems = wyrAjax.sharethis.shareTypes();
 $.each(shareItems,function(key, value){
   $('.st_'+value.service+'_large').attr('id','st_'+value.service+'_large');
 }); 
```

然后我使用 Sharethis`addEntry`来替换现有的按钮。

```
wyrAjax.sharethis = {
    //Grab the current share height so we can keep it this height when we remove all the items
    shareThisHeight:null,
    init:function () {

        //If the height has not been set set it
        if(wyrAjax.sharethis.shareThisHeight===null){
            wyrAjax.sharethis.shareThisHeight = $('#sthoverbuttons').outerHeight();
        }

        //Set up elements so that we can use them as ID's
        $('.sthoverbuttons-chicklets').attr('id', 'sthoverbuttons-chicklets');
        if (!$('#shareLoading').length) {

            //Give all share buttons ID's
            var shareItems = wyrAjax.sharethis.shareTypes();
            $.each(shareItems,function(key, value){
                $('.st_'+value.service+'_large').attr('id','st_'+value.service+'_large');
            });

            $('#sthoverbuttonsMain').append('<div id="shareLoading"><img src="/img/loading.gif" style="position: absolute; top: 50%;left: 37%"></div>');
        }
    },
    shareTypes:function(){
        var array = [];
        array[0]={
            "service":"facebook"
        };
        array[1]={
            "service":"twitter"
        };
        array[2]={
            "service":"delicious"
        };
        array[3]={
            "service":"googleplus"
        };
        array[4]={
            "service":"reddit"
        };
        array[5]={
            "service":"tumblr"
        };
        array[6]={
            "service":"stumbleupon"
        };
        array[7]={
            "service":"digg"
        };
        array[8]={
            "service":"sharethis"
        };
        return array;
    },
    startGettingShareButton:function () {
        //First we run a quick check to see if the elemnts have ID's
        wyrAjax.sharethis.init();

        //Now lets fade out and clean up all the shares so we can add new shares in.
        $('#sthoverbuttons-chicklets').hide();

        $('#sthoverbuttonsMain').height(wyrAjax.sharethis.shareThisHeight);
        wyrAjax.sharethis.addLoadingToShare();
    },
    addLoadingToShare:function () {
        $('#shareLoading').show();
    },
    finishAddingShareButton:function () {
        //Remove the loading.gif
        $('#shareLoading').hide();

        //grab array of different share types
        var shareItems = wyrAjax.sharethis.shareTypes();

        //Loop through 
        $.each(shareItems,function(key, value){
            wyrAjax.sharethis.addShareThisButton(value);
            $('#st_'+value.service+'_large > span:first-child').remove();
        });
        $('.sthoverbuttons-chicklets').show();
    },
    addShareThisButton:function (object) {
        stWidget.addEntry({
            "service":object.service,
            "element":document.getElementById('st_'+object.service+'_large'),
            "url":"http://www.wouldyourathers.co.uk/question/" + wyrAjax.questionDetails.id,
            "title":"Would You Rather | " + wyrAjax.questionDetails.q1,
            "type":"large",
            "text":"Would You Rather " + wyrAjax.questionDetails.q1 + " or " + wyrAjax.questionDetails.q2,
            "summary":wyrAjax.questionDetails.q1 + " or " + wyrAjax.questionDetails.q2
        });
    }
}; 
```

希望有人能发现这很有帮助。

# iphone - iOS - 以圆形排列子视图

> ID：11531945
> 
> 赞同：5
> 
> 时间：2012-07-17T22:52:35.310
> 
> 标签：iphone, objective-c, ios, cocoa, ipad

我的应用中有很多视图。我想将它们排列成圆形，并根据存在的视图数量改变它们的中心。

因此，如果有 3 个视图，它们看起来像一个三角形，但仍会形成一个圆圈。如果有 4 个，它看起来像一个正方形，但仍然是一个圆形，依此类推......

简而言之，所有视图的中心都位于一个假想的圆圈上。

有什么建议么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-17T23:05:24.060

这是我在一个项目中使用的代码，希望对您有所帮助。

```
// you must set both of these
CGPoint centerOfCircle;
float radius;

int count = 0;
float angleStep = 2.0f * M_PI / [arrayOfViews count];

for (UIView *view in arrayOfViews) {
    float xPos = cosf(angleStep * count) * radius;
    float yPos = sinf(angleStep * count) * radius;
    view.center = CGPointMake(centerOfCircle.x + xPos, centerOfCircle.y +yPos);
    count++;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-11-16T01:28:08.750

这是公认答案的 Swift 3 版本，作为带有偏移参数的 UIView 扩展：

```
public extension UIView {
  public func distributeSubviewsInACircle(xOffset: CGFloat, yOffset: CGFloat) {
      let center = CGPoint(x: self.bounds.size.width / 2, y: self.bounds.size.height / 2)
      let radius: CGFloat = self.bounds.size.width / 2
      let angleStep: CGFloat = 2 * CGFloat(Double.pi) / CGFloat(self.subviews.count)
      var count = 0
      for subview in self.subviews {
          let xPos = center.x + CGFloat(cosf(Float(angleStep) * Float(count))) * (radius - xOffset)
          let yPos = center.y + CGFloat(sinf(Float(angleStep) * Float(count))) * (radius - yOffset)
          subview.center = CGPoint(x: xPos, y: yPos)
          count += 1
      }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-17T22:56:46.607

您可以将圆的度数（360 度或 2π 弧度）除以您拥有的视图数量，然后根据角度和与中心的距离调整它们的中心。

以下是我使用的一些功能：

```
// These calculate the x and y offset from the center by using the angle in radians
#define LengthDir_X(__Length__,__Direction__) (cos(__Direction__)*__Length__)
#define LengthDir_Y(__Length__,__Direction__) (sin(__Direction__)*__Length__)

// I use this to convert degrees to radians and back if I have to
#define DegToRad(__ANGLE__) (((__ANGLE__) * 2.0 * M_PI) / 360.0)
#define RadToDeg(__ANGLE__) (((__ANGLE__) * 360) / (2.0 * M_PI)) 
```

# java - 验证 Jar 中的 Java 类

> ID：11531949
> 
> 赞同：1
> 
> 时间：2012-07-17T22:53:02.893
> 
> 标签：java, jar, jvm, .class-file

jar 中的 Java 类文件可以轻松替换和修改。例如，以下命令可用于替换 jar 中已编译的类文件：

```
jar uf JarFile.jar com\something\Class.class 
```

如果类文件被替换为没有依赖关系被破坏的文件，那么代码仍然能够执行。不在 jar 中的类文件也会发生同样的情况。

有什么方法可以验证一组类文件（无论是否在 jar 中）以查看它们的所有依赖项是否存在并且没有损坏？

我不想阻止类文件被修改，而是能够验证更改是否有效（关于依赖项）。编译器在编译时会进行这种检查（依赖检查），但是一旦编译了类，如何验证类文件本身呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:00:19.053

您可能会考虑[密封](http://docs.oracle.com/javase/tutorial/deployment/jar/sealman.html)和[签署](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)JAR。

更新：

显然，我的第一次猜测错过了目标。

如果他们不是，你打算怎么做？如果他们是第 3 方，我会说除了向错误数据库报告下载错误之外，您别无选择。

如果您的意思是“我想确保他们所有的 3rd 方 JAR 依赖项都是正确的”，那么您遇到的问题要大得多。我知道的大多数下载（例如 Spring）都使用 Maven 提供依赖项。这是你能做的最好的。

如果您的意思是要检查自己的依赖项，我会说测试会揭示您所犯的任何错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-18T00:00:28.753

你不能。

至少：不是。问题是java仅在需要时才在运行时加载类。所以最终从 jar 文件中删除一个类可能没问题，只要没有执行引用该类的代码，事情就会非常顺利地运行。

考虑这个例子：

```
class A{ public static void main( String args[] ){ out.println( "hello" ); } }
class B{} 
```

编译这个，把它放在一个罐子里，从中删除 B.class，那里没问题 :)

现在您可能认为您可以浏览每个 .class 文件，检查它引用的类并查看文件是否都在那里。这不仅是痛苦的，也是不完整的。您永远不会完全捕获加载了反射的文件，因为它们的类名可能只是在运行时构建的。

我的建议：不要去那里。如果有人删除了类文件，那是他们自己的错。您能做的最好的事情是（但前提是这真的让您担心）尝试`ClassNotFoundException`在运行时捕获 s（查看 thread.setUncaughtExceptionHandler）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-18T03:26:02.057

只需加载类就可以确保这一点。

# hibernate - @OneToMany @JoinTable 和更新操作的休眠问题

> ID：11531952
> 
> 赞同：0
> 
> 时间：2012-07-17T22:53:17.737
> 
> 标签：hibernate, jpa, orm, hibernate-mapping, jointable

我遇到了一个有点奇怪的问题；我有以下 JPA 映射：

```
@Entity
public class Location {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(name = "LOCATION_ID")
  private Long id;

  @OneToMany( cascade = { CascadeType.ALL }, fetch = FetchType.EAGER )
  @JoinTable( joinColumns = { @JoinColumn( name = "LOCATION_ID" ) },
  inverseJoinColumns = { @JoinColumn( name = "ATTRIBUTE_ID"  ) } )
  private Set<Attribute> attributes; 
```

和：

```
@Entity
public class Attribute implements IAttributeSupport {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(name = "ATTRIBUTE_ID")
  private Long id;

  @Column(nullable = false) private String name;
  @Column(nullable = false) private String value;
  ... 
```

我正在做一个简单的测试：

*   坚持一个具有一些属性的位置
*   更改这些属性之一的名称
*   将位置合并回来（使用更改后的属性）

我的期望（考虑到传播）是合并位置只会传播到属性，属性会得到更新。这种情况（广泛）发生 - 已更改的 Attribute 的值确实已更新，但随后在已存在映射的 Join Table 中尝试新的 INSERT。由于这个新的和不必要的插入，失败（如预期的那样）是：

`Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1-1' for key 'PRIMARY'`

现在，罪魁祸首似乎是方式`hashCode`并`equals`已实现 - 似乎，当 Hibernate 持久化属性集时，集合持久化器检查是否需要插入每个条目（每个属性）：

`if ( collection.needsInserting( entry, i, elementType ) )`

因此，由于其中一个属性的名称确实发生了变化，现在这被认为需要插入（这并不正确 - 不需要插入，只需更新） - 因此在连接表中插入操作。我当然可以将 id 用于 equals 和 hashcode，但这不是 Hibernate 推荐的方式，我也不想这样做。我是否在映射中遗漏了可能导致此问题的某些内容？这是一个非常标准的映射 - 简单的一对多和简单的合并操作 - 有什么建议可以让它工作吗？

任何帮助表示赞赏。

谢谢。

欧根。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:16:54.153

第一点：在 OneToMany 中，您实际上并不需要`JoinTable`，因为子实体会将 ManyToOne 关系返回给父实体。我会把它拿出来。

您可能会遗漏一些注释。在父类上，添加注解`mappedBy`以`@OneToMany`指示子类的哪个成员持有与父类的关联。在你的情况下，它可能是

```
@OneToMany(fetch = FetchType.EAGER, mappedBy = "location") 
```

此外，有时 Hibernate 不能很好地使用标准 JPA 级联注释（我正在处理同样的问题，并从直接 JPA 移动到 Hibernate 级联注释）。完整的补充最终将是：

```
@Cascade(value = { org.hibernate.annotations.CascadeType.ALL, 
        org.hibernate.annotations.CascadeType.DELETE_ORPHAN })
@OneToMany(fetch = FetchType.EAGER, mappedBy = "location")
private Set<Attribute> attributes; 
```

然后在子项中，您需要对父项进行引用：

```
@ManyToOne
@JoinColumn(name = "location_id")
private Location location; 
```

然后级联应该正常工作。

# php - PHP MySQL找到不匹配的记录

> ID：11531953
> 
> 赞同：-1
> 
> 时间：2012-07-17T22:53:20.530
> 
> 标签：php, mysql

看起来很简单。我有 2 个表：MBR 和 MBR_new。我需要在 MBR 中找到在 MBR_new 中没有匹配电子邮件记录的每条记录。

```
$result = $db->query("
SELECT a.NICK
FROM MBR as a
LEFT JOIN   
MBR_new as b
ON b.email = a.EMAIL
WHERE b.email IS NULL;
");

while ($obj = $result->fetch_object()) {

    echo "No e-mail found for user $obj->NICK<br />";
} 
```

这没有给我任何错误，但似乎进入了无限循环。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:05:18.170

可能不是无限循环，而是两次嵌入式表扫描，因为您没有`email`在 MBR_new 表中索引连接列。您是否尝试使用测试条目很少的表进行查询？

如果您没有此类索引，则使用 a`NOT IN(subquery)`将为 MBR_new 表中的现有电子邮件创建一个临时且紧凑的唯一索引。

此外，您在 MBR_new 中是否有多次具有相同电子邮件地址的电子邮件（这可能会导致连接爆炸。

还要注意`email`表 b 列的数据类型：它在您的安装中是否可索引（取决于您的表存储格式：它是具有合理限制的 VARCHAR(n) 吗？它与表 a 中的类型相同吗？）

您希望在结果集中看到多少次相同的 EMAIL 地址？如果只是一次，则将“DISTINCT”添加到您的选择中，以便查询优化器立即知道它可以跳到表 a 中的下一个不同的电子邮件，并且一旦找到匹配项就忽略对表 b 的进一步扫描.

还要注意：表 A 和 B 中是否有空邮件条目？首先生成一个包含与唯一 ID 关联的电子邮件地址的表，然后仅在表 A 和 B 中使用此 ID 不是安全的吗？（字符串的外部连接真的很慢）。

# objective-c - XCode 部署错误：“NSInvalidArgumentException”，找不到名为“MainStoryboard”的情节提要

> ID：11531955
> 
> 赞同：14
> 
> 时间：2012-07-17T22:53:23.790
> 
> 标签：objective-c, xcode4, storyboard, nsbundle

就像之前的许多“NSBundle 中缺少 MainStoryboard”问题一样，我得到了相同的提示，但没有发现命名问题，也没有发现故事板是否存在于 XCode 喜欢的区域内。

所有的指针都指向同一个文件，我已经将我的 .plist 更改了 5 次，以使其能够响应在 Build Stages 中找到的相同调用。现在我已经厌倦了这种废话，因为我只想编程，而不是调试编译器的错误。

它发生在瞬间，现在我已经一天半没有一个可以工作的界面了。我应该如何进行？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-07-18T17:41:39.427

我在 XCode 4.3.3 中遇到了以下类似的错误：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“找不到名为“MainStoryboard”的情节提要

我通过执行以下操作来修复它：

1.  确保您`-info.plist`有**基于主故事板文件的名称**=`MainStoryboard`
2.  在 Xcode 中右键单击您的故事板文件，然后选择**删除**，然后选择**仅引用**
3.  右键单击您的项目并选择**将文件添加到 [您的项目]**
4.  导航到故事板文件，`en.lproj`在您的项目目录的文件夹中找到并添加它
5.  清理，重新编译并运行，您应该会发现它有效。

从这篇 SO 帖子中得到了这个想法：[XCode 4.2 MainStoryBoard Not Found](https://stackoverflow.com/questions/9113329/xcode-4-2-mainstoryboard-not-found)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T21:26:39.163

就像对像我这样的其他初学者的参考，通读所有关于缺少故事板的 SO 问题：

不要将“.storyboard”放在 plist 文件中文件名的末尾。它应该如下所示：

主故事板文件基础名称：MainStoryBoard

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-19T14:28:30.907

当您创建一个新的 *.storyboard 文件时，Xcode（最新版本）不会自动将它添加到您的构建资源中。要解决此问题，您必须在“复制捆绑资源”下添加文件。

选择 Xcode 项目图标并导航到：Targets > Build Phases > Copy Bundle Resources

单击底部的 + 按钮以添加情节提要文件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-01-07T15:41:23.697

清洁我的 Projekt 后，我​​每次都会遇到这个问题......

我的解决方案是：移动 Main.Storyboard 介绍垃圾。

然后“添加文件”选择您的 soryboard，将 Main.stpryboard 从垃圾箱中移动到您的桌面后。

而且，瞧。错误消失了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T00:52:24.693

考虑到没有太多关于您的问题的信息，我最好的选择是转到包信息，看看主故事板是否设置为您的主故事板。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-26T20:23:18.260

从 iOS 9 开始，仅使用“Main”作为情节提要名称，对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-22T07:30:57.290

Ralph Willgoss 的步骤对我不起作用。我设法通过复制所有`viewcontrollers`in `storyboard`，删除它（`Move to Trash`， not `Remove Reference`），创建一个`rightclicking the project folder and clicking New File, selecting Storyboard`与我删除的名称相同的新文件（ ），然后将复制的内容粘贴到其中来解决它。

# python-2.7 - 使用 Python 的 Mechanize 模块验证 br.submit()

> ID：11531958
> 
> 赞同：2
> 
> 时间：2012-07-17T22:53:45.197
> 
> 标签：python-2.7, mechanize, mechanize-python

只是尝试使用 mechanize 登录网站。当我打印“br.form”时，我可以看到我的凭据输入到我的表单中。但我不知道如何正确提交表单。

我使用“br.submit()”并尝试通过打印 br.title() 来验证它是否已进入下一页，但出现的标题是用于登录屏幕，而不是登录后屏幕。

```
import mechanize
from time import sleep
def reportDownload():

    # Prompt for login credentials
    print("We require your credentials.")
    Username = raw_input("Please enter your username. ")
    Password = raw_input("Please input your password. ").encode('base64')

    URL = "https://login.xxxxxxxxx.com/"    
    br = mechanize.Browser()
    br.open(URL)    
    br.select_form(nr=0)

    br['username'] = Username
    br['pw'] = Password.decode('base64')

    print br.form       
    # Login 
    br.submit() 

    # print page title to confirm proper login
    print br.title()

reportDownload() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T07:14:18.560

这可能会让您更好地了解正在发生的事情。

```
response = br.submit()
print response.read() 
```

一般来说，在机械化中启用调试可能会有所帮助：

```
br.set_debug_http(True)
br.set_debug_responses(True) 
```

# r - 如何使用 ggplot2 + directlabels 为标签使用自定义名称

> ID：11531960
> 
> 赞同：3
> 
> 时间：2012-07-17T22:53:54.290
> 
> 标签：r, ggplot2

我在绘图中使用带有 directlabels 包的 ggplot2 `geom_line()`，我希望其中一个标签读取“XM”。但是，在我的`data.frame()`“XM”中，列名被重命名为“XM”，我找不到有关如何为`direct.label`函数提供自定义标签名称的文档，也找不到帮助阅读源代码。（directabels 似乎不尊重在 ggplot 比例中设置的标签名称，这是我尝试的第一件事。）

示例代码：

```
library("scales")
library("reshape2")
library("ggplot2")
library("directlabels")

data = data.frame(
  C = c(1.2, 1.4, 0.3, -2.0, 0.5),
  I = c(1.2, 1.5, -1.3, -3.8, 1.8),
  G = c(0.2, 0.3, 0.3, 0.2, 0.2),
  "X-M" = c(2.9, -0.7, 0.3, -2.8, 1.5) +
          c(-2.7, 0.2, 0.4, 3.6, -2.4),
  year = c("2006", "2007", "2008", "2009", "2010"))

p <- ggplot(data = melt(data), aes(year, value, color = variable)) +
  geom_line(aes(group = variable)) +
  scale_color_hue(breaks = c("C", "I", "G", "X.M"),
                  labels = c("C", "I", "G", "X-M"))  # directlabels doesn't
                                                     # use this

# Compare:
p

# with:
direct.label(p, list(last.points, hjust = -0.25)) 
```

生成的图表可以在[这里](https://imgur.com/a/BWWIZ)看到。带有直接标签的那个使用“XM”而不是“XM”。提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:02:32.707

该包`directlabels`似乎从数据中的列名中获取标签。

这意味着您必须确保您的标签在开始时在数据中是正确的。为此，您必须`check.names=FALSE`在创建时设置`data.frame`：

```
data = data.frame(
  C = c(1.2, 1.4, 0.3, -2.0, 0.5),
  I = c(1.2, 1.5, -1.3, -3.8, 1.8),
  G = c(0.2, 0.3, 0.3, 0.2, 0.2),
  "X-M" = c(2.9, -0.7, 0.3, -2.8, 1.5) +
    c(-2.7, 0.2, 0.4, 3.6, -2.4),
  year = c("2006", "2007", "2008", "2009", "2010"),
  check.names=FALSE)

data
     C    I   G  X-M year
1  1.2  1.2 0.2  0.2 2006
2  1.4  1.5 0.3 -0.5 2007
3  0.3 -1.3 0.3  0.7 2008
4 -2.0 -3.8 0.2  0.8 2009
5  0.5  1.8 0.2 -0.9 2010 
```

现在绘制：

```
p <- ggplot(data = melt(data), aes(year, value, color = variable)) +
  geom_line(aes(group = variable)) 
direct.label(p, list(last.points, hjust = -0.25)) 
```

![在此处输入图像描述](../Images/16d61e653fab40497bc061bca2138b7e.png)

# html - 为什么写所有标签来分配一种样式比使用通用选择器（*）更好？

> ID：11531964
> 
> 赞同：5
> 
> 时间：2012-07-17T22:54:24.563
> 
> 标签：html, css, css-selectors

> **可能重复：**
> [为什么 CSS 重置不使用“*”来覆盖所有元素？](https://stackoverflow.com/questions/6880002/why-dont-css-resets-use-to-cover-all-elements)

我正在做一个具有轻量级 HTML 的页面。

我见过大师说通用选择器是一件坏事，最好这样使用（来自： http: [//meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)）：

```
html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
} 
```

使用通用选择器：

```
* {
    margin: 0;
    padding: 0;
    border: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
} 
```

为什么通用选择器是一件坏事？

考虑到页面加载的性能，我更喜欢通用选择器。还有其他我没有考虑的事情吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-17T23:05:28.553

*   ***通用选择器*****的优先级低于其他定义的规则..**

    一个原因是*通用选择器*的优先级非常低，不能“覆盖”由更具体的*选择器*定义的值，请参见下面的示例。

    即使我们想将所有元素*的背景颜色**“重置”*到选择器，使用*div*更合适，并且将被使用，即使稍后声明也是如此。*`blue`*`*`**

 **```
    div {背景颜色：红色}
    * {背景颜色：蓝色}
```

* * *

*   **使用*通用选择器*不会授予您您可能想要的控制权..**

    使用*通用选择器*不会提供对哪些确切元素将实际设置属性的任何控制，从/向显式列表中删除/添加元素比编写 CSS**不**重置某些项目更容易。

* * *

*   **使用*通用选择器*显然很慢**

    `*`您提到了加载页面所需的时间，如果您写一个字符 ( ) 而不是更多（使用替代和推荐的重置），确保下载所需资源会更快，但下载内容并不是全部页面的渲染速度。

    *正如 Mozilla 开发者网络关于通用选择器*所写的那样：

    > 注意：不鼓励作者使用通用选择器，因为它是网页性能方面最昂贵的 CSS 选择器。

    您可以通过以下链接了解更多关于选择器的昂贵性：

    *   **[developer.mozilla.org - 通用选择器 - MDN](https://developer.mozilla.org/en/CSS/Universal_selectors)**
    *   **[stevesouders.com - 简化 CSS 选择器](http://www.stevesouders.com/blog/2009/06/18/simplifying-css-selectors/)**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-17T22:59:25.383

无法控制确切重置哪些元素 - 文档中使用的每个元素现在必须明确设置其边距和填充，以及可能包含在重置中的任何其他属性，例如边框和轮廓。

告别从父元素到子元素的 CSS 规则继承——通用选择器每次都胜出。因此不仅每个元素都必须在重置后定义，而且子元素现在不能继承每个元素的属性，因此它们也必须显式定义。这需要的代码量甚至可能抵消最小 CSS 重置所节省的大小！

根据通用声明，浏览器必须遍历页面上的每个元素并应用通用规则：元素、它们的子级和曾曾孙级都一样，有人声称这可能对资源和页面加载时间（这一点对于现代浏览器是有争议的。）

Internet Explorer 版本（包括 6）会出现星号 HTML 选择器错误：应该失败的选择器不会。后代选择器，例如 * html，不应该匹配任何元素，因为 html 元素是最顶层的父元素，因此它不能是任何其他元素的后代。但是，Internet Explorer 版本 5.5 和 6 会忽略此选择器开头的通用选择器。

当通用选择器与元素类型选择器直接相邻时，Internet Explorer 版本 6 和 7 会将组合解释为后代选择器，而不是应有的失败。在 Internet Explorer 6 和 7 中，此选择器还将选择一些不合适的 SGML 元素，例如 doctype 声明和注释。**

# ruby-on-rails - 使用 Twitter-Bootstrap-Rails 在 Rails 3.2.6 中部署到生产环境

> ID：11531967
> 
> 赞同：5
> 
> 时间：2012-07-17T22:54:56.567
> 
> 标签：ruby-on-rails, ruby, deployment, capistrano, twitter-bootstrap-rails

嘿伙计们，我在尝试将我的 rails 3.2.6 应用程序部署到生产环境时遇到了一些问题，部署似乎一直很好，直到它开始预编译资产这是我得到的错误：

```
command finished in 1740ms
  * executing "cd /home/deployer/apps/stealthygecko/releases/20120717222341 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile"
servers: ["xx.xxx.xxx.xxx"]
[xx.xxx.xxx.xxx] executing command
 ** [out :: xx.xxx.xxx.xxx] rake aborted!
 ** [out :: xx.xxx.xxx.xxx] no such file to load -- addressable/uri
 ** [out :: xx.xxx.xxx.xxx] 
 ** [out :: xx.xxx.xxx.xxx] (See full trace by running task with --trace)
command finished in 3131ms
*** [deploy:update_code] rolling back
* executing "rm -rf /home/deployer/apps/stealthygecko/releases/20120717222341; true"
servers: ["xx.xxx.xxx.xxx"]
[xx.xxx.xxx.xxx] executing command
command finished in 786ms
failed: "rvm_path=$HOME/.rvm/ $HOME/.rvm/bin/rvm-shell 'ruby-1.9.2@stealthygecko_rewrite' -c 'cd /home/deployer/apps/stealthygecko/releases/20120717222341 && bundle exec rake RAILS_ENV=production RAILS_GROUPS=assets assets:precompile'" 
```

我试过设置“config.assets.compile = false”看看这是否有帮助，但我仍然得到同样的错误。

这是我的部署脚本：

```
server  "xx.xxx.xxx.xxx", :web, :app, :db, primary: true                                                                                                                                                    
depend :remote, :gem, "bundler", ">=1.1.3"                                                                                                                                                                  
depend :remote, :gem, "rake", ">=0.9.2.2"                                                                                                                                                                   

set :application, "stealthygecko"                                                                                                                                                                           
set :user, :"deployer"                                                                                                                                                                                      
set :deploy_to, "/home/#{user}/apps/#{application}"                                                                                                                                                         
set :deploy_via, :remote_cache                                                                                                                                                                              
set :use_sudo, false                                                                                                                                                                                        

set :scm, :git                                                                                                                                                                                              
set :repository, "git@github.com:StealthyGecko/stealthygecko.git"                                                                                                                                           
set :branch, "master"                                                                                                                                                                                       

default_run_options[:pty] = true                                                                                                                                                                            
set :ssh_options, {:forward_agent => true}                                                                                                                                                                  

set :ruby_version, "ruby-1.9.2"                                                                                                                                                                             
set :gemset_name, "stealthygecko_rewrite"                                                                                                                                                                   
set :rvm_ruby_gemset, "#{ruby_version}@#{gemset_name}"                                                                                                                                                      
set :bundle_without, [:darwin, :development, :test]                                                                                                                                                         

require "rvm/capistrano"                                                                                                                                                                                    
load 'deploy/assets'                                                                                                                                                                                        
set :rvm_ruby_string, "#{rvm_ruby_gemset}"                          # Select the gemset                                                                                                                     
set :rvm_type, :user                                                # RVM install is in the deploying user's home directory                                                                                 
#                                                                                                                                                                                                           
before "deploy:assets:precompile", "bundle:install"                                                                                                                                                         
after "deploy", "deploy:cleanup" # keep only the last 5 releases                                                                                                                                            

namespace :deploy do                                                                                                                                                                                        
  %w[start stop restart].each do |command|                                                                                                                                                                  
    desc "#{command} unicorn server"                                                                                                                                                                        
    task command, roles: :app, except: {no_release: true} do                                                                                                                                                
      run "cd #{deploy_to}/current && /etc/init.d/unicorn_stealthygecko restart"                                                                                                                            

    end                                                                                                                                                                                                     
  end                                                                                                                                                                                                       

  task :setup_config, roles: :app do                                                                                                                                                                        
    puts "Symlinking nginx and unicorn configs"                                                                                                                                                             
    sudo "ln -nfs #{current_path}/config/nginx.conf /etc/nginx/sites-enabled/#{application}"                                                                                                                
    sudo "ln -nfs #{current_path}/config/unicorn_init.sh /etc/init.d/unicorn_#{application}"                                                                                                                
    run "mkdir -p #{shared_path}/config"                                                                                                                                                                    
    put File.read("config/database.example.yml"), "#{shared_path}/config/database.yml"
    puts "Now edit the config files in #{shared_path}."                                                                                                                                                     
  end                                                                                                                                                                                                       
  after "deploy:setup", "deploy:setup_config"                                                                                                                                                               

  task :symlink_config, roles: :app do                                                                                                                                                                      
    puts "Symlinking database yml"                                                                                                                                                                          
    run "ln -nfs #{shared_path}/config/database.yml #{release_path}/config/database.yml"                                                                                                                    
    puts "Database Symlink done!"                                                                                                                                                                           
  end                                                                                                                                                                                                       
  after "deploy:finalize_update", "deploy:symlink_config"                                                                                                                                                   

  desc "Make sure local git is in sync with remote."                                                                                                                                                        
  task :check_revision, roles: :web do                                                                                                                                                                      
    unless `git rev-parse HEAD` == `git rev-parse origin/master`                                                                                                                                            
      puts "WARNING: HEAD is not the same as origin/master"                                                                                                                                                 
      puts "Run `git push` to sync changes."                                                                                                                                                                
      exit                                                                                                                                                                                                  
    end                                                                                                                                                                                                     
  end                                                                                                                                                                                                       
  before "deploy", "deploy:check_revision"                                                                                                                                                                  
end 
```

抱歉，如果它是从我读过的各种教程拼凑而成的，有点混乱。这是我的 Gemfile：

```
source 'http://rubygems.org'                                                                                                                                                                                

gem 'rake'                                                                                                                                                                                                  
gem 'rails', '3.2.6'                                                                                                                                                                                        
gem 'mysql2'                                                                                                                                                                                                
gem 'bcrypt-ruby', '~> 3.0.0'                                                                                                                                                                               
gem 'gravtastic'                                                                                                                                                                                            
gem "friendly_id"                                                                                                                                                                                           
gem "rinku", '~>1.2.2', :require => 'rails_rinku'                                                                                                                                                           
gem "videawesome"                                                                                                                                                                                           
gem "will_paginate", "~>3.0.3"                                                                                                                                                                              
gem "tweet-button"                                                                                                                                                                                          
gem "bitly"                                                                                                                                                                                                 
gem "sanitize"                                                                                                                                                                                              
gem "newrelic_rpm"                                                                                                                                                                                          
gem 'capistrano'                                                                                                                                                                                            
gem 'rvm-capistrano'                                                                                                                                                                                        
gem "unicorn", "~> 4.2.1"                                                                                                                                                                                   
gem "twitter", "2.2.2"                                                                                                                                                                                      
gem 'instagram', :git => 'git://github.com/StealthyGecko/instagram-ruby-gem-lee.git'                                                                                                                        

group :assets do                                                                                                                                                                                            
  gem 'coffee-script'                                                                                                                                                                                       
  gem 'jquery-rails'                                                                                                                                                                                          
  gem 'uglifier'                                                                                                                                                                                            
  gem 'therubyracer'                                                                                                                                                                                        
  gem 'execjs'                                                                                                                                                                                              
  gem 'twitter-bootstrap-rails'                                                                                                                                                                             
end                                                                                                                                                                                                         

gem 'rspec-rails', :group => [:test, :development]                                                                                                                                                          
group :test do                                                                                                                                                                                              
  gem 'sqlite3'                                                                                                                                                                                             
  gem 'guard-rspec'                                                                                                                                                                                         
  gem 'capybara'                                                                                                                                                                                            
  gem 'launchy'                                                                                                                                                                                             
  gem 'shoulda', '3.0.0.beta2'                                                                                                                                                                              
  gem 'factory_girl_rails'                                                                                                                                                                                  
  gem 'ruby-debug19', :require => 'ruby-debug'                                                                                                                                                              
  gem 'turn', :require => false                                                                                                                                                                             
end 
```

我知道这有点远，但如果有人能发现我哪里出错了，或者如果有人遇到这个问题并设法解决它，请告诉我，因为我一直在努力解决这个问题现在几个小时。

* * *

当它失败时，它似乎说“没有要加载的文件--addressable/uri”但是我不确定它在哪里使用以及为什么它被用于编译资产

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:29:57.160

显然修复了以下内容：[http ://www.kudelabs.com/2012/03/28/rails-3-2-cap-deploy-with-assets](http://www.kudelabs.com/2012/03/28/rails-3-2-cap-deploy-with-assets)

* * *

UPDATE2：查看你的 cap 脚本后，你有`before "deploy:assets:precompile", "bundle:install"`

尝试删除它并添加：`require 'bundler/capistrano'`

删除`load 'deploy/assets'`并将其放入您的 Capfile。

* * *

更新：查看[rails generate rspec:install 后返回 'Could not find addressable-2.2.8 in any sources'](https://stackoverflow.com/questions/10669499/rails-generate-rspecinstall-returns-could-not-find-addressable-2-2-8-in-any-of)和[http://addressable.rubyforge.org/api/](http://addressable.rubyforge.org/api/)。

检查您的 Gemfile.lock

```
Using addressable (X.X.X) 
```

这可能应该是对 Gemfile 中的其中一个 gem 的依赖项。否则，您可以尝试手动添加。

我有...

```
...
# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'therubyracer', :platforms => :ruby
  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
end
... 
```

在我的 Gemfile.lock

```
...
addressable (2.2.8)
... 
```

* * *

```
$ cat Capfile 
```

您需要取消注释加载“部署/资产”

```
load 'deploy'
# Uncomment if you are using Rails' asset pipeline
load 'deploy/assets'
Dir['vendor/gems/*/recipes/*.rb','vendor/plugins/*/recipes/*.rb'].each { |plugin| load(plugin) }
load 'config/deploy' # remove this line to skip loading any of the default tasks 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:24:45.387

您是否尝试过在本地预编译资产？

尝试运行

```
$ RAILS_ENV=prodution bundle exec rake assets:precompile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T19:26:04.103

我还必须从我的 Capfile 中取消注释以下 2 行以使资产完全部署，否则字体不会部署：

```
require 'capistrano/rails/assets'
require 'capistrano/rails/migrations' 
```

# c++ - Why does the implicit "lambda to function pointer conversion" forbid the "by reference" capture of static members?

> ID：11531974
> 
> 赞同：6
> 
> 时间：2012-07-17T22:55:47.493
> 
> 标签：c++, lambda, c++11

The C++11 standard says (or at least, the version I have - not the final one) :

> The closure type for a lambda-expression with **no lambda-capture** has a public non-virtual non-explicit const conversion function to pointer to function having the same parameter and return types as the closure type’s function call operator.

I understand why it is not possible to get a function pointer from a stateful lambda since a function pointer cannot hold any data by itself.

But when the captured objects are just a static members /static variable, there is no such limitation since the references to the captured objects can be hardwired in the function itself.

```
struct A {
    static int count = 0;
    void foo() {
         static int bar = 0;
         auto fun = [&]()->void {
             count++;
             bar++;
         };
         void(*ptrFun)();
         ptrFun = fun; // forbidden by the quoted wording
    }
}; 
```

Why isn't it always possible to convert a lambda to a function pointer as soon as the former is stateless ? Am I missing something or does the committee forgot this specific point ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-17T23:17:59.493

`A::count` does not need to be captured at all. Only `this` and local variables need to be captured. Variables with static storage duration (e.g., static data members, namespace-scope variables, or function-local static variables) do not need to be captured because they are "unique." There is exactly one instance of each such variable, so a reference to the object does not need to be captured.

If you remove the default capture from your lambda (i.e., change `[&]` to `[]`) and define `count`, it should compile without error. (I've verified that both Visual C++ 2012 RC and g++ 4.5.1 accept the code; the only change I had to make was to move the inline initialization of `count`, since neither of those compilers supports that C++11 feature yet.)

# git - 并发开发生命周期环境的 Git 存储库结构和工作流程

> ID：11531976
> 
> 赞同：1
> 
> 时间：2012-07-17T22:56:31.033
> 
> 标签：git, workflow

我希望我的代码的几个不同版本，在其开发生命周期的不同阶段，都受到版本控制并始终同时存在于网络上。版本通常被命名为*development*、*staging*和*live*，其结构如下图所示。

```
Sitename
  |--Development
  |--Live
  `--Staging 
```

*   是创建三个独立的存储库还是创建一个永久签出三个分支的存储库更好？
*   每个工作流程各自的优缺点是什么？
*   作为 Git 新手，如何实现首选工作流程？

* * *

## 附录

我更喜欢创建一个存储库，但这意味着在其中创建存储库`Sitename`并在其中包含三个工作目录，但是我的理解是 Git 不支持嵌套的工作目录。我知道一个名为的贡献解决方案，`git-new-workdir`但已读到使用此工作流程的新用户可能会遭受比收益更多的后果，因此我对替代方案感兴趣。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T23:06:56.933

保留一个存储库。想出一个分支机构的约定。通常是这样的：

**master**：代表在服务器上运行的代码以及您的用户体验

**staging**：（可选）表示部署到临时服务器的代码以及您选择的 beta 测试人员使用的代码。

**release-candidate 或 RC**：已单独测试并与其他功能一起测试并已通过的所有功能。这可以随时合并到 master 和/或 staging 中。

**集成或开发**：集成过去和现在（完整和不完整）的所有功能，以获得关于现在失败的反馈。

**功能或任务**：（通常命名为票号）包含一个功能 - 最好从一个共同点开始，作为迭代中的其他功能。

我推荐这个工作流程来管理它们：[http ://dymitruk.com/blog/2012/02/05/branch-per-feature/](http://dymitruk.com/blog/2012/02/05/branch-per-feature/)

没有什么是一成不变的，只要确保你有条理和一致，并做对你的团队有意义的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T12:20:28.023

不确定您是否可以使用 git post check-in 挂钩来实现这一点。我会看一个真正的构建服务器解决方案（例如 TeamCity、FinalBuilder）。构建服务器在三个不同的分支上监视您的存储库，然后将它们部署到您想要的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T15:37:38.453

这是一个老问题，但仍然有很多观点，所以我认为它值得一个正确的答案。当我问这个问题时，我对 SVN 很熟悉，但对 Git 很陌生，但三年后的现在，我觉得有资格回答这个问题。

这个问题最相关的部分是：

> 是创建三个独立的存储库还是创建一个永久签出三个分支的存储库更好？

如果必须在这两个选项之间进行选择，那将是后者，但正确的答案*不是！*为不同的环境创建不同的存储库与为不同的环境创建不同的分支一样不正确。

使用 Git 的正确方法是一个项目只有一个存储库。可以根据需要多次克隆存储库。正如不同的用户可以签出不同版本的代码一样，不同的环境也可以从他们的存储库副本中签出不同版本的代码。不同的环境可能只是代码的不同用户。

# php - PHP preg_replace：修改特定类的div内的文本

> ID：11531978
> 
> 赞同：0
> 
> 时间：2012-07-17T22:56:32.413
> 
> 标签：php, regex, preg-replace

我很难为以下场景编写正则表达式：

该字符串`$description`包含一些文本，以及其中某处的嵌入视频。

我需要修改现有`preg_replace()`调用以替换元素内的所有`<div class="brightcove-player">`内容，但我需要以某种方式`videoPlayer`从内部获取 ID 值。

我知道人们会推荐 DOMdoc，但我真的只需要修改`regex`代码中现有的。

请参见下面的示例：

```
$description = '
    <p>Intro text.</p>
    <div class="brightcove-player" style="margin-bottom:8px;margin-top:8px;">
    <object id="time_brightcove_g161jf8dj271jd72jd82kf" class="BrightcoveExperience">
    <param name="bgcolor" value="#000000" />
    <param name="width" value="405" />
    <param name="height" value="228" />
    <param name="@videoPlayer" value="1234567890"/>
    <param name="isVid" value="true" />
    <param name="wmode" value="transparent"/>
    <param name="videoSmoothing" value="true"/>
    </object>
    </div>
    <p>End text.</p>
';

$output = '<p>Intro text.</p><div class="brightcove-player" style="margin-bottom:8px;margin-top:8px;"><a href="brightcove://1234567890">Watch this video<a></div><p>End text.</p>'; 
```

# php - 错误对象和数组

> ID：11531979
> 
> 赞同：2
> 
> 时间：2012-07-17T22:56:39.000
> 
> 标签：php, php-5.3

我有这个代码

```
$myvar = is_object($somevar) ? $somevar->value : is_array($somevar) ? $somevar['value'] : ''; 
```

问题是有时我会收到此错误

```
PHP Error: Cannot use object of type \mypath\method as array in /var/www/htdocs/website/app/resources/tmp/cache/templates/template_view.html.php on line 988 
```

第 988 行是我包含的上述行。我已经在检查它的对象或数组，那为什么会出现这个错误呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T23:01:03.080

它与优先级或 PHP 评估表达式的方式有关。用括号分组解决了这个问题：

```
$myvar = is_object($somevar) ? $somevar->value : (is_array($somevar) ? $somevar['value'] : ''); 
```

请参阅此处的注释：[http ://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary](http://www.php.net/manual/en/language.operators.comparison.php#language.operators.comparison.ternary)

> ### 笔记：
> 
> 建议您避免“堆叠”三元表达式。在单个语句中使用多个三元运算符时 PHP 的行为并不明显：

> ### Example #3 不明显的三元行为
> 
> ```
> <?php
> // on first glance, the following appears to output 'true'
> echo (true?'true':false?'t':'f');
> 
> // however, the actual output of the above is 't'
> // this is because ternary expressions are evaluated from left to right
> 
> // the following is a more obvious version of the same code as above
> echo ((true ? 'true' : false) ? 't' : 'f');
> 
> // here, you can see that the first expression is evaluated to 'true', which
> // in turn evaluates to (bool)true, thus returning the true branch of the
> // second ternary expression.
> ?> 
> ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-17T23:01:36.463

您需要在第二个三元组周围放置括号：

```
$myvar = is_object($somevar) ? $somevar->value : (is_array($somevar) ? $somevar['value'] : ''); 
```

这一定与[运算符优先级](http://php.net/manual/en/language.operators.precedence.php)有关，尽管我还不确定为什么。

*意见：*带或不带括号的三进制很难阅读恕我直言。我会坚持使用扩展形式：

```
$myvar = '';

if(is_object($somevar)) {
    $myvar = $somevar->value;
} elseif(is_array($somevar)) {
    $myvar = $somevar['value'];
} 
```

# html - 如何阻止 Visual Web 开发人员将 div 的属性复制到其结束标记？

> ID：11531987
> 
> 赞同：0
> 
> 时间：2012-07-17T22:57:40.187
> 
> 标签：html, visual-studio-2010, visual-web-developer-2010

当我

> 右键 -> 环绕 -> html -> div

我在单词 div 之后键入的所有内容都被 VWD 复制到其结束标记。我该如何阻止它？（为什么要这样做？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T14:49:50.640

好的。已知错误：

[http://connect.microsoft.com/VisualStudio/feedback/details/582524/asp-net-surround-with-problem-in-html-source-code](http://connect.microsoft.com/VisualStudio/feedback/details/582524/asp-net-surround-with-problem-in-html-source-code)

但可以`divc`改用。

# java - 可以在java中为变量分配不同的类型吗？

> ID：11531988
> 
> 赞同：2
> 
> 时间：2012-07-17T22:57:52.110
> 
> 标签：java

我想知道在 Java 中是否有可能有一个可能是不同类型的变量？具体来说，我有两个不同类的不同对象，它们都是表。所以假设我们有：

```
TableTypeA t1;
TableTypeB t2; 
```

假设这两个类都有一个名为 getSelectedRow() 的方法，我是否可以创建第三个变量以便我可以执行以下操作：

```
SomeType t3;
t3 = t1; 
t3.getSelectedRow();

t3 = t2;
t3.getSelectedRow(); 
```

TableTypeA 和 TableTypeB 没有扩展同一个类，它们最接近的公共超类没有 getSelectedRow() 方法。看看它们的功能有多相似，其中一个可能应该扩展另一个，或者它们的类应该已经合并在一起，但是假设这样的结构变化不是一种选择，我建议可以做吗？

谢谢。

编辑：我想我会为这些添加一个界面，非常感谢您的所有快速回复！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T23:00:02.550

如果这些类实现了一个具有 的接口，那是`getSelectedRow()`肯定的。

从重新组织类层次结构的意义上说，这种变化不是结构性/组织性的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-17T23:02:10.413

有可能，如果`TableTypeA`并且`TableTypeB`两者都实现了一个名为（而不是从基类派生）的*接口。*`SomeType`例如：

```
interface SomeType {
    Row getSelectedRow();
}

class TableTypeA implements SomeType {
    Row getSelectedRow() {
        // ...
    }
}

class TableTypeB implements SomeType {
    Row getSelectedRow() {
        // ...
    }
} 
```

如果没有，那么不，你必须通过[反射](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/package-summary.html)去。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-17T23:04:27.560

> ...但是假设这样的结构性变化不是一种选择，我建议可以这样做吗？

如果不更改所涉及的类型，就不可能做到这一点。您能希望的最好的结果是使用`instanceof`类型转换编写一些丑陋的代码，并将其隐藏在方法中。反射是一种替代方案，但它更丑陋且更昂贵（IMO）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T23:01:44.990

可以使用接口：

```
public interface Table {
    Row getSelectedRow();
}

public class TableTypeA implements Table {
    Row getSelectedRow() {    // Must be defined

    }
}

public class TableTypeB implements Table {
    Row getSelectedRow() {    // Must be defined

    }
} 
```

无需更改类的体系结构，就可以使用`instanceof`运算符和类型转换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-17T23:48:35.697

如果您*需要*这种行为并且您*不能*更改超类/实现接口，那么您所能做的就是创建包装类。

```
interface Table{ Row getSelectedRow(); }

class WrapperA extends TableTypeA implements Table{
  // copy all constructors and forward to super()
}

class WrapperB extends TableTypeB implements Table{
  // same
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-17T23:03:07.883

仅当它们共享一个接口时。这不像 JavaScript。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-17T23:03:34.513

不，Java 不支持[鸭子类型](http://en.wikipedia.org/wiki/Duck_typing)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-18T01:17:28.490

If you don't control the original classes, Adapters can come in handy [http://en.wikipedia.org/wiki/Adapter_pattern](http://en.wikipedia.org/wiki/Adapter_pattern)

```
public interface TableAdapter {
    Row getSelectedRow();
}

public class TableTypeAAdapter implements TableAdapter {
    private TableTypeA tableTypeA;
    public TableTypeAAdapter(TableTypeA tableTypeA) {
        this.tableTypeA = tableTypeA;
    }

    public Row getSelectedRow() {
        tableTypeA.getSelectedRow();
    }
} 
```

And a similar class for TableTypeB

Then:

```
TableAdapter table = new TableTypeAAdapter(tableTypeA);
table.getSelectedRow();

table = new TableTypeBAdapter(tableTypeB);
table.getSelectedRow(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-07-17T23:02:04.517

没有通用接口或超类，不，不是直接的方式。编译器将抱怨分配并请求显式转换。显式强制转换会导致`ClassCastException`.

另一种方法是使用反射。

# c++ - “我的 SFINAE 怎么了”redux：条件模板类成员？

> ID：11531989
> 
> 赞同：4
> 
> 时间：2012-07-17T22:58:00.863
> 
> 标签：c++, c++11, template-meta-programming, sfinae, typetraits

我是编写模板元编程代码的新手（而不是仅仅阅读它）。所以我遇到了一些菜鸟问题。[这篇名为“我的 SFINAE 发生了什么？”](http://www.velocityreviews.com/forums/t743535-what-happened-to-my-sfinae.html)的非 SO 帖子很好地总结了其中之一。，我将 C++11 化为：

*（注意：我给方法不同的名称只是为了帮助我在这个“思想实验”示例中进行错误诊断。请参阅[@R.MartinhoFernandes](https://stackoverflow.com/a/11532326/211160)关于为什么在实践中不会为非重载选择这种方法的注释。）*

```
#include <type_traits>

using namespace std;

template <typename T>
struct Foo {
    typename enable_if<is_pointer<T>::value, void>::type
    valid_if_pointer(T) const { }

    typename disable_if<is_pointer<T>::value, void>::type
    valid_if_not_pointer(T) const { }
};

int main(int argc, char * argv[])
{
    int someInt = 1020;
    Foo<int*>().valid_if_pointer(&someInt);    
    Foo<int>().valid_if_not_pointer(304);

    return 0;
} 
```

@Alf 说 SFINAE 发生的事情是“它一开始就不存在”，并给出了编译的建议，但模板化的是函数而不是类。这在某些情况下可能是正确的，但并非全部。 *（例如：我专门尝试编写一个容器，该容器可以容纳可能是或可能不是可复制构造的类型，我需要基于此打开和关闭方法。）*

作为一种解决方法，我试了一下......这似乎工作正常。

```
#include <type_traits>

using namespace std;

template <typename T>
struct FooPointerBase {
    void valid_if_pointer(T) const { }
};

template <typename T>
struct FooNonPointerBase {
    void valid_if_not_pointer(T) const { }
};

template <typename T>
struct Foo : public conditional<
    is_pointer<T>::value, 
    FooPointerBase<T>,
    FooNonPointerBase<T> >::type {
};

int main(int argc, char * argv[])
{
    int someInt = 1020;
#if DEMONSTRATE_ERROR_CASES
    Foo<int*>().valid_if_not_pointer(&someInt);
    Foo<int>().valid_if_pointer(304);
#else
    Foo<int*>().valid_if_pointer(&someInt);
    Foo<int>().valid_if_not_pointer(304);
#endif
    return 0;
} 
```

但是，如果这没有被破坏*（是吗？）*，它肯定没有遵循一个很好的通用方法来基于嗅探特征的类型来打开和关闭模板类中的方法。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-17T23:02:05.190

首先，C++11[没有继承 boost 的`disable_if`](https://stackoverflow.com/questions/3111045/where-is-disable-if-in-c0x). 因此，如果您要转换 boost 代码，则需要使用`enable_if`否定条件*（或重新定义您自己的`disable_if`构造）*。

其次，要让 SFINAE 进入并应用到方法层面，这些方法本身必须是模板。然而，您的测试必须针对这些模板的参数进行......所以类似的代码`enable_if<is_pointer<T>`将无法工作。您可以通过使某些模板参数（假设 X）默认等于 T 来解决这个问题，然后抛出一个静态断言，即调用者没有明确地将其专门化为其他东西。

这意味着不要写：

```
template <typename T>
struct Foo {
    typename enable_if<is_pointer<T>::value, void>::type
    valid_if_pointer(T) const { /* ... */ }

    typename disable_if<is_pointer<T>::value, void>::type
    valid_if_not_pointer(T) const { /* ... */ }
}; 
```

...你会写：

```
template <typename T>
struct Foo {
    template <typename X=T>
    typename enable_if<is_pointer<X>::value, void>::type
    valid_if_pointer(T) const {
        static_assert(is_same<X,T>::value, "can't explicitly specialize");
        /* ... */
    }

    template <typename X=T>    
    typename enable_if<not is_pointer<X>::value, void>::type
    valid_if_not_pointer(T) const {
        static_assert(is_same<X,T>::value, "can't explicitly specialize");
        /* ... */
    }
}; 
```

两者现在都是模板，并且`enable_if`使用模板参数 X，而不是用于整个类的 T。它特别是关于在为重载解析创建候选集时发生的替换——在您的初始版本中，在重载解析期间没有发生模板替换。

请注意，静态断言是为了保留原始问题的意图，并防止有人能够编译如下内容：

```
Foo<int>().valid_if_pointer<int*>(someInt); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-17T23:34:51.353

在我看来，你不希望 SFINAE 出现在这里。SFINAE 有助于*在不同的模板化重载之间进行选择*。基本上，您使用它来帮助编译器在 和 之间进行`template <typename Pointer> void f(Pointer);`选择`template <typename NotPointer> void f(NotPointer);`。

这不是你想要的。在这里，您有两个名称不同的函数，而不是两个相同的重载。编译器已经可以在 和 之间`template <typename Pointer> void f(Pointer);`进行选择`template <typename NotPointer> void g(NotPointer);`。

我将举一个例子来解释为什么我认为 SFINAE 不仅没有必要，而且在这里是不可取的。

```
Foo<int> not_pointer;
Foo<int*> pointer;

not_pointer.valid_if_pointer(); // #1
not_pointer.valid_if_not_pointer(); // #2
pointer.valid_if_pointer(); // #3
pointer.valid_if_not_pointer(); // #4 
```

现在，假设您设法与 SFINAE 一起工作。尝试编译这段代码将在第 1 行和第 4 行产生错误。这些错误将类似于“找不到成员”或类似的内容。它甚至可能将该函数列为重载决议中的废弃候选者。

现在，假设您没有使用 SFINAE 执行此操作，而是使用了`static_assert`。像这样：

```
template <typename T>
struct Foo {
    void valid_if_pointer(T) const {
        static_assert(std::is_pointer<T>::value, "valid_if_pointer only works for pointers");
        // blah blah implementation
    }

    void valid_if_not_pointer(T) const {
        static_assert(!std::is_pointer<T>::value, "valid_if_not_pointer only works for non-pointers");
        // blah blah implementation
    }
}; 
```

有了这个，你会在同一行得到错误。但是你会得到*非常简短和有用的错误*。多年来，人们一直在向编译器作者提出一些问题。它现在就在你家门口:)

你得到了同样的东西：两种情况下的错误，除了没有 SFINAE 你会得到一个更好的错误。

另请注意，如果您根本不使用`static_assert`并且函数的实现仅在分别给定指针或非指针时才有效，您仍然会在适当的行上遇到错误，除了可能更糟糕的行。

**TL;DR ：除非您有两个***具有相同名称*的实际模板函数，否则最好使用`static_assert`而不是 SFINAE。

# .net - 有没有办法确定客户端是否在 .NET 中收到了 HTTP 响应？

> ID：11531990
> 
> 赞同：2
> 
> 时间：2012-07-17T22:58:12.867
> 
> 标签：.net, http, httpcontext, httplistener

我正在使用 HttpListener 和 HttpContexts，并且我知道在编写响应时您可以确定它是否正确*发送*，但是您如何判断客户端是否*收到了*它？

我想你可以在服务器和客户端之间建立某种消息确认系统，但我想知道是否有什么东西可以透明地为我做这件事。

使用 WCF 对类似问题的回答是指 ReliableSessions，但我不确定将 WCF 安装到我的应用程序中是否值得。我对 WCF 不是很熟悉，但在我看来，它不是针对传统的 Web 服务器请求/响应模型量身定制的，而是更适合分布式系统类型的东西（这更像是我通过查看文档获得的直觉可靠的会话，所以如果我错了，请纠正我）。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T23:01:22.490

“我想你可以在服务器和客户端之间建立某种消息确认系统”。恐怕你*不得不*这样做。AFAIK HTTP 中没有“本机”确认方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-17T23:05:05.947

在服务器上，您可以调用 Response.Flush 它将所有当前缓冲的数据（和标头）同步发送到客户端。调用完成后，您知道数据已移交给 TCP 堆栈。

ASP.NET 不提供确保刷新 TCP 缓冲区的方法。即使它确实存在，也可能存在客户端收到响应但网络吞下确认的模棱两可的情况。

这是将军问题，无法解决。

此时，您需要提供有关您意图的详细信息，因为正如我所说，没有完美的解决方案。

# php - 兰德函数产生不均匀的结果

> ID：11531992
> 
> 赞同：1
> 
> 时间：2012-07-17T22:58:28.790
> 
> 标签：php, random, wamp

在我的程序中，$integers[0]->occurrences 的平均值应该是 20000。为什么它总是大于 20000，即使在使用 srand() 之后也是如此？

```
<?php 
        define('NUM_OF_INTS',49);    
        define('DRAWS',1000000);

            class number
            {
               public $occurences;
               public $value;

               function number()                     
               {
                   $occurences=0;
                   $value=0;
               }
            }

            $integers = array();

            //srand(time(0));
            //initialising loop
            for($i=0;$i<=NUM_OF_INTS;$i++)
            {    
                $integers[$i] = new number(); 
                $integers[$i]->value = $i;

            }
            for($i=0;$i<DRAWS;$i++)
            {                  
                $integers[rand(0,NUM_OF_INTS)]->occurences++;               
            }

            foreach($integers as $int)
                printf("%5d %5d  <br/>",$int->value,$int->occurences);
        ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T23:18:52.327

你说你正在使用 WAMP。

PHP`rand()`在 Windows 上不是很随机（它只生成 15 位随机性），因此它无法在 50 个 bin 之间足够均匀地分配其随机数。

特别是 bin 0 将收到 656 / 32768 个随机数，大约为 0.0200195

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T23:37:05.730

您是否尝试过使用 PHP 的 mt_rand 作为生成器？它比 rand 更擅长获得均匀分布。

您还可以生成两个随机数并将它们连接起来以获得长的。

例如

```
//desired length of 16
rand16digits = str_pad(mt_rand(0,99999999), 8 , "0").mt_rand(10000000,99999999); 
```

# android - 谷歌安卓地图在晚上？

> ID：11531993
> 
> 赞同：1
> 
> 时间：2012-07-17T22:58:50.943
> 
> 标签：android, google-maps, map

![在此处输入图像描述](../Images/aadd717809c6a81e4a8d34a340f42ab9.png)

大家好，我的项目需要夜间模式地图。但除了卫星和街景之外，我找不到任何其他谷歌地图类型。我发现[大路](https://play.google.com/store/apps/details?id=com.bigroad.ttb.android&hl=en)可以做到这一点。有人可以帮我想出一个解决方案吗？

# android - 跨 API 通知

> ID：11531999
> 
> 赞同：0
> 
> 时间：2012-07-17T22:59:45.683
> 
> 标签：android, notifications

所以这或多或少是我最后一个问题的延续[Link to last post](https://stackoverflow.com/questions/11530830/compilation-error-using-pendingintent)

我一直在编写代码，我的一个朋友建议我使用 Notifiction.Builder，所以我已经弄清楚了。我想知道我或其他人将如何进行状态通知“跨 API” 我的意思是 Builder 在 API 11+ 上工作，但下面的任何内容都是不行的。是否有任何已知的解决方法/修复此问题，或者我需要编写两个不同版本的代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T01:14:25.637

有许多不同的方法可以使用已弃用的方法来实现多个 api 支持，其中最常提到的是反射。就个人而言，我利用类加载器来解决通知问题。我创建了一个带有基本包装方法的基本抽象类，用于处理创建通知所需的不同数据，如下所示：

```
public abstract class NotificationWrapper {

public NotificationWrapper(Context context) {

}

public abstract void createNotification(int resid, CharSequence ticker);

public abstract void setTitle(CharSequence title);

public abstract void setText(CharSequence text);

public abstract void setIntent(PendingIntent intent);

public abstract void setFlags(int... flags);

public abstract void setDefaults(int defaults);

public abstract Notification getNotification();
} 
```

您当然可以添加和删除方法，具体取决于您自定义通知的程度。然后您可以将其扩展到三个单独的类：一个用于 API <11，一个用于 API >=11，一个用于 Jelly Bean 及以上。在每个类中，您只需将这些方法调用中继到当前 API 版本的适当可用方法（即 pre-11 中继到 Notification 方法，post-11 中继到 Notification.Builder 方法，Jelly Bean 与 post-11 相同，除了它使用 build() 而不是 getNotification())。然后，当需要创建通知时，您可以使用 SDK 版本的条件和多态性的优点来加载正确的子类并使用其包装器方法构建通知：

```
NotificationWrapper wrapper = null;
int ver = VERSION.SDK_INT;
if (ver >= 16) {
    wrapper = new NotificationWrapJB(context);
} else if (ver >= 11) {
    wrapper = new NotificationWrapHC(context);
} else {
    wrapper = new NotificationWrapPreHC(context);
}
wrapper.createNotification(resId, tickerText);
//etc.... 
```

同样，这只是处理这个问题的众多方法之一，但我喜欢它，因为它感觉更有条理。

如果您不熟悉用于不同 SDK 版本的方法，请阅读 Android 文档[Notification](http://developer.android.com/reference/android/app/Notification.html)和[Notification.Builder](http://developer.android.com/reference/android/app/Notification.Builder.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-18T08:21:37.310

我认为您正在寻找[Support Library](http://developer.android.com/tools/extras/support-library.html)中的[NotificationCompat](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)。如果您正在寻找 Jelly Bean 附带的全新通知，您可以使用Jake Wharton 的[NotificationCompat2](https://github.com/JakeWharton/NotificationCompat2)（制作 ActionBarSherlock 的那个）。