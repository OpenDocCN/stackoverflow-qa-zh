# StackOverflow 问答 11177000-11177999

# php - 连接到本地 MySQL 服务器时出现“连接被拒绝”错误？

> ID：11177000
> 
> 赞同：6
> 
> 时间：2012-06-24T11:18:17.630
> 
> 标签：php, mysql, localhost

我有这个错误：

```
Warning: mysql_connect(): [2002] Connection refused (trying to connect via tcp://127.0.0.1:3306) 
```

我看到了一个类似的问题，我通过更改`localhost`为尝试了解决方案`127.0.0.1`，但它仍然无法正常工作。我正在使用 Mac OS X Lion。请任何帮助将不胜感激

这是我用来连接的 PHP 代码：

```
<?php
    require("constants.php");
    // open database
    $connect = mysql_connect(DB_SERVER,DB_USER,DB_PASS) or die('error connecting: ' . mysql_error());
    // select database
    mysql_select_db(DB_NAME) or die('error selecting db: ' . mysql_error());
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:31:35.103

如果对端口 3306 上的连接开放，请尝试确保您的防火墙。

该命令应该是`ipfw set enable 3306`，但如果您愿意，您可以阅读更多关于实际[设置防火墙权限的](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/ipfw.8.html)信息。

另一件事可能是确保 MySQL 正在侦听端口 3306，编辑[my.ini](http://opensourcedba.wordpress.com/2011/01/12/mysql-basics-part-3-%E2%80%93-your-my-cnf-or-my-ini-file/)文件并设置

```
[client]
port=3306 
```

然后重启 MySQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:35:16.737

我以前也遇到过这个问题。您可以通过在配置中注释掉“skip-networking”来修复它。（my.ini 或 my.cnf，Linux 上是 /etc/mysql/my.cnf，Mac 不确定）

-- 编辑
另外，您可以尝试在终端中输入“netstat”，以确保 mysql 已在此处列出（应该类似于 127.0.0.1:mysql 或 127.0.0.1:3306）。如果未列出，则 MySQL 要么尚未启动，要么无法绑定。

# java - 在 Eclipse 项目资源管理器中隐藏不需要的文件

> ID：11177001
> 
> 赞同：0
> 
> 时间：2012-06-24T11:18:22.663
> 
> 标签：java, eclipse, eclipse-plugin

我正在尝试使用 plugin.xml 中的以下插件代码从 eclipse 项目资源管理器中隐藏一些文件 *.abc。但是当我运行应用程序时，这会在项目资源管理器工具栏下拉“过滤器...”视图中创建新条目，但默认情况下未选中。应用程序出现时如何默认检查它？

```
<extension point="org.eclipse.ui.navigator.navigatorContent">
  <commonFilter
    description="Hides *.abc resources"
    id="com.xyz.commonFilter.hideabc"
    name="*.abc resources"
    activeByDefault="true">
    <filterExpression>
        <and>
            <adapt type="org.eclipse.core.resources.IResource">
                <test property="org.eclipse.core.resources.name" value="*.abc"/>
            </adapt>
        </and>
    </filterExpression>
</commonFilter>
</extension>
<extension point="org.eclipse.ui.navigator.viewer">
<viewerContentBinding
      viewerId="org.eclipse.ui.navigator.ProjectExplorer">
      <includes>
        <contentExtension pattern="com.xyz.commonFilter.hideabc"/> 
      </includes>
</viewerContentBinding>
</extension> 
```

谢谢，托尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:25:14.017

从您的问题中不确定您是在编写插件还是只是想以 eclipse 用户身份隐藏文件。

作为 Eclipse 用户，您可以通过以下步骤隐藏文件：

1.  右键单击包资源管理器或导航器中的项目并打开其属性
2.  展开“资源”并切换到“资源过滤器”
3.  使用“添加过滤器...”创建一个新过滤器以隐藏 *.abc 文件，它们将从视图中消失

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T04:47:04.880

您已经将其定义为`activeByDefault="true"`. 我建议使用新的工作区（或使用“干净”标志）启动应用程序以查看效果，因为我想您需要进行一些迭代才能实现它，因此您的运行时工作区不会*再将*其设置为活动状态。

# .net - 在不安装的情况下使用 Async V3

> ID：11177002
> 
> 赞同：2
> 
> 时间：2012-06-24T11:18:22.887
> 
> 标签：.net, visual-studio-2010, visual-studio, async-ctp, async-await

我在我的机器上安装 VS-SP1 和 Async CTP V3 时遇到问题。由于某种原因，它会导致我在该机器上运行的任何 .NET 应用程序崩溃。（幸好我正在使用虚拟机，我可以回滚）。

我已将更新 csc.exe 文件复制到我的 Windows 目录中的 .NET Framework 4 目录中。

当我从命令行使用 msbuild 构建我的项目时，一切都构建并运行良好。

当我在 VS2010 中编译同一个项目时，我得到 async 关键字未知的编译时错误。

我不在乎 VS 没有突出显示 async 和 await 的语法，但它确实让我感到困扰，我必须从命令行构建项目。

1.  为什么命令行 csc 可以工作，但在使用 VS 时却不行？

2.  如何更改 VS 以正确编译异步代码（无需安装 Async CTP 本身）？

谢谢，

我愿意。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T07:28:55.597

VS2012 和 Async 目标包是最佳选择，原因如下：

1.  语法与 C#5 中的相同，使升级到 C#5 更容易。Async CTP 有足够的差异（TaskEx 代替 Task 类，TaskAsync 代替 Task 后缀，令牌参数等），这使得升级很麻烦。不难，就是麻烦
2.  等待/异步行为更好，更接近 C#5。在 Async CTP 中，循环内部发生的异常将导致整个循环静默失败。有关受此影响的方案，请参阅[重试任务。](https://stackoverflow.com/questions/10490307/retry-a-task-multiple-times-based-on-user-input-in-case-of-an-exception-in-task/10494424#10494424)
3.  没有安装问题。Async CTP 和 VS 2010 SP1 必须按特定顺序安装以避免出现问题。
4.  您可以期望 MS 对目标包提供某种支持，而您可以期望 Async 包没有。

一个小*警告*是，在具有 VS2010 + Async CTP 的机器上安装 VS2012 会破坏 Async CTP。您将无法再使用 VS2010 版本来编译 Async 代码。

作为异步行为很重要的示例，请考虑以下重试任务的非常简单的方法。当函数使用 Async CTP 编译时，如果发生异常，它会静默**失败**（如应用程序静默终止）：

```
private static async Task<T> Retry<T>(Func<T> func, int retryCount)
{
    while (true)
    {
        try
        {
            var result = await Task.Run(func);
            return result;
        }
        catch
        {
            if (retryCount == 0)
                throw;
            retryCount--;
        }
    }
} 
```

也就是说，我已经使用 Async CTP 一年多了，唯一的问题是添加 Visual Studio 2010 SP1 后的安装顺序。如果您弄错了顺序，Asycn CTP 将无法安装，您必须删除 SP1 并以正确的顺序重新安装所有内容。

不过，我会尽快转移到 2012 年和目标包（即整个团队都准备好切换），以避免多个代码版本和烦人的异常行为。

# java - 制作模态 JInternalFrame

> ID：11177003
> 
> 赞同：2
> 
> 时间：2012-06-24T11:18:28.020
> 
> 标签：java, swing, modal-dialog, jinternalframe

我需要在 MDI JFrame 中从用户那里获取大量数据（文件选择、文本、日期等）。
我需要一个`JInternalFrame`模态的输入表单。
如何制作`JInternalFrame`模态？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T11:57:00.280

根据我的经验，我从未设法制作`JInternalFrame`模态并且不认为这是开箱即用的。

请参阅[这篇](http://webbyit.blogspot.no/2011/03/managing-jinternalframes-within.html)`JInternalFrame`关于使它们模态化的扩展的精彩文章（*感谢 Steve Webb*）。

# android - 如何在gridview中实现imageview

> ID：11177007
> 
> 赞同：-1
> 
> 时间：2012-06-24T11:19:22.767
> 
> 标签：android, gridview

我有两个 int 图像数组，我已经在网格视图中实现了它。我想在单击网格上的项目时从另一个数组设置图像？我尝试通过在全局范围内创建 imageview 的对象，但它越来越逼近。

```
package com.sachin.majum;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;
import java.util.Random;
import android.R.integer;
import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.AdapterView.OnItemClickListener;
public class select extends Activity {
ImageView im = new ImageView(getApplicationContext());
int blank [] =                  {R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launche r,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher,R.drawable.ic_launcher};
int image []={R.drawable.dc,R.drawable.dd,R.drawable.kkr,R.drawable.mi,R.drawable.rcb,R.drawable.rr,R.drawable.dc,R.drawable.dd,R.drawable.kkr,R.drawable.mi,R.drawable.rcb,R.drawable.rr};
protected void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
 setContentView(R.layout.select);
 Random random =  new Random();
 List intlist = new ArrayList();
 for(int i=0;i<image.length;i++)
 {
     intlist.add(image[i]);
 }
 Collections.shuffle(intlist,random);
 for(int i=0;i<intlist.size();i++)
 {
     image[i]=(Integer) intlist.get(i);
 }
 GridView grid = (GridView)findViewById(R.id.gv);
 grid.setAdapter(new MyAdapter());
 grid.setOnItemClickListener(new OnItemClickListener() {
 public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
im.setImageResource(image[position]);
     }
 });

}

class MyAdapter extends BaseAdapter{

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return blank.length;
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    im.setImageResource(blank[position]);
    im.setLayoutParams(new GridView.LayoutParams(60,60));
    return im;
}

}
} 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:24:45.677

您需要为 Gridview 的每个单元格创建一个 ImageView。我已调整您的 getView 以反映此更改：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    if(convertView == null){
      convertView = new ImageView( select.this );
    }

    ((ImageView)convertView).setImageResource(blank[position]);
    ((ImageView)convertView).setLayoutParams(new GridView.LayoutParams(60,60));
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:51:43.210

更改您的`onClickListener`代码。

```
grid.setOnItemClickListener(new OnItemClickListener() {
     public void onItemClick(AdapterView<?> parent, View v, int position, long id) {
         ImageView iV = (ImageView)v;
         iV.setImageResource(image[position]);
     }
}); 
```

并删除此声明，您不需要它。

```
ImageView im = new ImageView(getApplicationContext()); 
```

# c# - Vb.Net Windows 应用程序到 C#

> ID：11177008
> 
> 赞同：1
> 
> 时间：2012-06-24T11:19:55.773
> 
> 标签：c#, vb.net, winforms

> **可能重复：**
> [将 VB.NET Winforms 应用程序移植到 C#](https://stackoverflow.com/questions/335270/porting-vb-net-winforms-application-to-c-sharp)

有没有办法将 vb.net winforms 应用程序转换为 c# ？就代码和 .vb（表单）文件而言。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:29:36.250

[SharpDevelop](http://www.icsharpcode.net/)是一个 IDE，它可以将整个**Visual Studio**项目从 VB.NET 转换为 C#（反之亦然）。

上次我使用它时，它有一些小的限制（例如 VB.NET 中的可选参数），但总体上做得很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T11:21:45.307

[http://www.developerfusion.com/tools/convert/vb-to-csharp/](http://www.developerfusion.com/tools/convert/vb-to-csharp/)

这个可行，但当然并不完美。您应该检查转换后的文件并手动纠正最终的错误。

# android - 如何使用 DPI 缩放因子 (float) 设置边距 (int)

> ID：11177009
> 
> 赞同：1
> 
> 时间：2012-06-24T11:20:10.377
> 
> 标签：android, compatibility, resolution, fragmentation

我的 Android 应用在 480x800 像素分辨率下看起来很棒，但它在 240x400 像素的 LDPI 屏幕上中断。我知道我可以在活动中获得屏幕的缩放因子，使用它会根据屏幕分辨率`getResources().getDisplayMetrics().density`给出确切的值。`float`

在我的应用程序中，我在其中使用了`RelativeLayout`和`ImageView`s，并使用 设置了图像的边距`setMargins()`，因为此方法使用像素`int`作为其顶部、左侧、底部和右侧的值，**如何使用我得到的 DPI 因子设置这些值？**（这是一个浮动）。我们有`Math.floor()`，但我使用像素将图像定位在非常特定的位置，并且方法返回的 DPI 因子在小数位处具有非常具体的值，无法忽略，因此转换为`int`对我不起作用。

**更新**

另外，我`lp.setMargins(100,200,0,0);`用来设置边距，我将对其进行哪些修改以使用从设备收到的 DPI 因子？

PS我知道它更像是一个数学问题而不是编程，但我的数学很差，对不起。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T12:01:38.407

看起来我问这个问题而不是摆弄自己还为时过早，但也注意到我根本不是第一个面对这个问题的人。

所以，这是我找到的解决方案。

我在我的 Activity 类中创建了以下方法。

```
private int px(float dips)
{
    float DP = getResources().getDisplayMetrics().density;
    return Math.round(dips * DP);
} 
```

这会将给定`dp`值转换为适当的像素。您可以将方法中使用的变量设置为全局变量，并在您的方法中而不是`DP`在方法中对其进行初始化，以使方法快速执行。`onCreate()``px()`

用法：

```
lp.setMargins(px(100),px(200), 0, 0); 
```

或者，如果您不`px()`只是为此而创建并且具有`DP`全局性。

```
lp.setMargins(100 * Math.round(DP), 200 * Math.round(DP), 0, 0); 
```

但是，使用方法使它看起来更加干净和可读。:-)

# javascript - 当用户在移动 Safari 上离开页面时暂停声音

> ID：11177010
> 
> 赞同：2
> 
> 时间：2012-06-24T11:20:17.977
> 
> 标签：javascript, iphone, html, mobile-safari

我正在应用程序的后台播放音频，但我想在用户最小化或 Safari 进入后台时停止。

我已经试过了`working element.onfocus`。

我也尝试过使用`window.requestAnimFrame`，但效果并不理想。

我不知道如何停止音频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:24:36.010

您可能会成功处理safari 进入后台时触发的`pageshow`和事件。`pagehide`

但是，当您在 Safari 中切换标签时，我不知道有任何事件。

这里还有一个小型库，可以为您完成大部分工作：[https ://github.com/zynga/jukebox](https://github.com/zynga/jukebox)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T13:32:29.510

作为对您和 Mageek 评论的回答，您应该使用 jQuery 检查 onfocus 事件和 onblur 事件（可能）：

```
$(window).focus(function() { 
//enable sound
}); 

$(window).blur(function() { 
//disable sound
}); 
```

这可能会奏效，但尚未对其进行测试。

# c# - 使用 WebRequest 在 C# 中使用 Yahoo PlaceFinder JSON

> ID：11177016
> 
> 赞同：1
> 
> 时间：2012-06-24T11:21:05.293
> 
> 标签：c#, json, httpwebrequest, yahoo, jsonserializer

我想我会在这里发布这个问题，而不是一个问题，而是与社区分享我在 StackOverflow 上找不到答案后编写的一些代码。如果有人想看一下代码并改进它，那会很好，但不是必需的。我省略了一些代码（try-catch 块和错误处理），以使其更容易使用概念和代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:21:07.163

所以，让我们从我需要解决的问题开始。我希望能够允许某人输入城市、州、邮政编码组合的部分或全部，并使用[雅虎的 PlaceFinder API](http://developer.yahoo.com/geo/placefinder/)来确定它的确切位置。没什么花哨的，只是一种从邮政编码解析城市和州的简单方法，反之亦然。

这个过程包括：

1.  接收输入（城市/州/邮编）服务器端
2.  使用适当的参数构造一个 URL（我想接收 JSON 格式的响应）
3.  向 PlaceFinder 服务发出 HTTP GET 请求。
4.  以某种方式使用 JSON 响应，这将为我提供 C# 中的对象模型，以便轻松处理响应数据。

让我们从您要导入的命名空间开始：

```
using System.Net; // for HttpWebRequest
using System.Text; // for utf8 encoding
using System.Web.Script.Serialization; // for json parsing
using System.IO; // for datastream 
```

接下来，我们来看看构造请求：

```
string parameters = String.Empty;
UTF8Encoding utf8 = new UTF8Encoding(); // yahoo docs state utf-8 encoding
string unparsedLocation = "Beverly Hills, CA 90210"; // contrived example

parameters += "line2=" + Url.Encode(unparsedLocation); // yahoo docs say to url encode
parameters += "&flags=J"; // J = want the response formatted in json
parameters += "&appid=[your-app-id-here]"; // using your appID obtained from Yahoo
parameters = utf8.GetString(utf8.GetBytes(parameters));
WebRequest request = WebRequest.Create(@"http://where.yahooapis.com/geocode?" + parameters);
request.Method = "GET"; 
```

接下来，我们想要获取响应并将其放入一个易于使用的对象模型中：

```
WebResponse response = request.GetResponse();
// Check the status. If it's not OK then don't bother with trying to parse the result
if (((HttpWebResponse)response).StatusCode == HttpStatusCode.OK)
{
    // Get the stream containing content returned by the server.
    Stream dataStream = response.GetResponseStream();
    // Open the stream using a StreamReader.
    StreamReader reader = new StreamReader(dataStream);
    // Read the content.
    string responseFromServer = reader.ReadToEnd();

    JavaScriptSerializer jss = new JavaScriptSerializer();
    YahooResponse yr = jss.Deserialize<YahooResponse>(responseFromServer);

    // You may not want such strict checking; if not, remove the "NO ERROR" check
    if (yr.ResultSet.Error == 0 && yr.ResultSet.ErrorMessage.ToUpper() == "NO ERROR" && yr.ResultSet.Found > 0)
    {
        // inside here is where you can do whatever you need to.
        // ex. 1 - get the first result
        Result result = yr.ResultSet.results[0];

        // ex. 2 - loop through results
        foreach (Result r in yr.ResultSet.results)
        {
            // add values to a List<T> or something useful
        }
    }
}

// always do this as a matter of good practice
response.Close(); 
```

但是等等，还有最后一个重要的部分丢失了。什么是' `YahooResponse`'对象？类定义是什么样的？这是我想出的：

```
namespace PlaceFinder
{
    public class YahooResponse
    {
        public ResultSet ResultSet { get; set; }
    }

    public class ResultSet
    {
        public string version { get; set; }
        public int Error { get; set; }
        public string ErrorMessage { get; set; }
        public string Locale { get; set; }
        public int Quality { get; set; }
        public int Found { get; set; }
        public Result[] results { get; set; }
    }

    public class Result
    {
        public int quality { get; set; }
        public string latitude { get; set; }
        public string longitude { get; set; }
        public string offsetlat { get; set; }
        public string offsetlon { get; set; }
        public int radius { get; set; }
        public string name { get; set; }
        public string line1 { get; set; }
        public string line2 { get; set; }
        public string line3 { get; set; }
        public string line4 { get; set; }
        public string house { get; set; }
        public string street { get; set; }
        public string xstreet { get; set; }
        public string unittype { get; set; }
        public string unit { get; set; }
        public string postal { get; set; }
        public string neighborhood { get; set; }
        public string city { get; set; }
        public string county { get; set; }
        public string state { get; set; }
        public string country { get; set; }
        public string countrycode { get; set; }
        public string statecode { get; set; }
        public string countycode { get; set; }
        public string uzip { get; set; }
        public string hash { get; set; }
        public long woeid { get; set; }
        public int woetype { get; set; }
    }
} 
```

在此处阅读有关 PlaceFinder 服务的更多信息：http: [//developer.yahoo.com/geo/placefinder/guide/](http://developer.yahoo.com/geo/placefinder/guide/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T21:43:52.283

Fortunately someone wrote a wrapper for this available on GIT. Here's the LINK: [https://github.com/danludwig/NGeo](https://github.com/danludwig/NGeo). It's also availabe via NuGet. Came in very handy for me!

# python - Python：套接字和线程？

> ID：11177018
> 
> 赞同：13
> 
> 时间：2012-06-24T11:21:37.413
> 
> 标签：python, multithreading, sockets

我有一个设计问题：

我有两个线程，一个心跳/控制线程和一个消息处理线程。

两者都共享同一个套接字，但是 messageHandler 线程只发送消息而从不接收。心跳线程发送和接收（接收消息并对心跳做出反应）。

问题是我不确定这是否安全。我自己没有实现任何机制来查看是否正在使用套接字。**那么通过python共享套接字是否自动线程安全？**

另外，如果不是，我将它们放在单独的线程中的原因是因为心跳比消息处理更重要。这意味着如果它被消息淹没，它仍然需要做一个心跳。因此，如果我必须实现一个螺栓，是否可以优先考虑我的心跳/控制线程是否需要发送心跳？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-09-27T02:49:47.580

代替使用第三个线程的更好方法是使用`threading.Lock()`来保护套接字资源，因为这消除了对第三个线程的需要。与使用第三个线程相比，您的开销和延迟更少。

```
import threading

lock = threading.Lock()

def sendfunction(sock, data):
    with lock:
        sock.send(data) 
```

您可以从任一线程调用它，但一次只允许一个线程调用`sock.send`. 当一个线程到达已经被另一个线程锁定的锁时，它将休眠，直到另一个线程释放锁，然后它将获取锁并重复该过程。

*threading 模块包含`Lock`、`RLock`和`Condition`，它们在处理多个线程时都非常有用，您会发现非常值得花时间熟悉它们及其用法。*

您可以通过在处理每条消息之前检查当前时间与上次发送心跳的时间来将心跳合并到消息处理中，这样可以防止消息泛滥导致无法发送心跳。问题是如果您的消息处理代码没有运行，那么就不会发送心跳。您可以通过让您的消息处理代码每隔一段时间获取一条虚拟消息以允许它检查它是否需要发送心跳并忽略虚拟消息来缓解这种情况。

您应该尽量少用线程（针对单个线程），但是在您的情况下，线程可能没问题，因为它大部分时间都在睡觉。但是，您不应该使用守护线程，因为它们没有正确关闭。尽管在您的情况下可能不存在损坏，但如果它没有正确关闭，它仍然可能会引发某种看起来很糟糕的故障（错误消息）。

*我不同意多套接字方法，因为我认为它实际上会使情况复杂化。您会发现许多类型的网络服务/应用程序将心跳和消息合并到单个套接字字节流中。*

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-24T11:59:19.627

不幸的是，多线程共享的套接字不是线程安全的。想想缓冲两个线程在没有锁的情况下操作。

正常的实现方式是使用两个socket，就像ftp一样。cmd socket和msg socket。

如果您想通过一个套接字实现这一点，您可以将不同类型的 msgs 放入不同的队列中，并使用第三个线程消耗队列并通过唯一的套接字发送它们。

这样就可以控制心跳消息优先于数据消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:28:26.787

我不知道如何在 Python 级别进行优先级排序。

所以我建议使用 2 个进程，而不是线程，并在操作系统级别进行优先级排序。在 Unix 上，您可以使用 os.nice() 来做到这一点。

你需要使用 2 个套接字，你的共享问题将同时得到解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T11:39:15.277

如果两个线程都是客户端线程，最好打开两个客户端套接字，一个用于检测信号，另一个用于通信。

# windows-8 - WinRT 是否能够运行 Win 7 和 8 桌面应用程序？

> ID：11177022
> 
> 赞同：3
> 
> 时间：2012-06-24T11:22:36.087
> 
> 标签：windows-8, windows-runtime

我阅读了很多关于它的不同意见，但是 WinRT 是像 Win 7 和 8 这样的实际桌面操作系统吗？您能否运行功能齐全的桌面应用程序和游戏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T12:55:06.290

WinRT 不是桌面或操作系统，它是一个 API。就像传统的winapi一样。它与 winapi 根本不同，它是基于 COM 而不是基于 C 的，并且它不公开所有底层操作系统功能。并在一个强大的沙箱中运行，以防止使用恶意软件喜欢使用的那种 api。粗略地说，您需要在平板电脑上安全运行应用程序并让电池持续使用一段时间。

您仍然可以在完整版的 Windows 8 上运行传统的 winapi 桌面应用程序，但不能在即将推出的带有 ARM 处理器的平板电脑版本上运行。创建 Metro 风格应用程序需要使用 WinRT。在 CLR 4.5 版中有一个可用的语言投影，它需要使用“.NET for Metro apps”平台目标。它是常规 .NET Framework 的大幅精简版本，不兼容 WinRT 的类和/或方法已被删除。并且添加了 WinRT 特定类，尤其是用于实现 UI 的类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:38:49.303

不，它们需要用 Metro 写成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-14T13:51:56.637

ARM 处理器上的 Windows (Windows RT) 将仅支持系统随附的应用程序（包括某些 Office 15 桌面应用程序），通过 Windows Update 提供，或通过 Windows 应用商店获得的 Metro 应用程序。ARM 上的 Windows 将不支持运行、模拟或移植现有 x86/64 桌面应用程序以确保 ARM 上可用应用程序的质量

看[这里](http://en.wikipedia.org/wiki/Windows_8#Software_compatibility)

# qunit - 将 QUnit 与 JSTestDriver 适配器 (QUnitAdapter.js) 一起使用时版本不匹配

> ID：11177025
> 
> 赞同：0
> 
> 时间：2012-06-24T11:23:03.613
> 
> 标签：qunit, js-test-driver

我正在尝试使用 jsTestDriver 运行用 QUnit 编写的单元测试。我收到“ReferenceError：未定义相等”。查看源码可知适配器（Qunit->jsTestDriver）QUnitAdapter.js支持equals方法：

> [window.equals = function(a, b, msg) {...}](http://code.google.com/p/js-test-driver/source/search?q=QUnitAdapter%20equals&origq=QUnitAdapter%20equals&btnG=Search%20Trunk)

而 Qunit 不支持 equals （[去年重命名为 equal](http://docs.jquery.com/index.php?title=QUnit&diff=21001&oldid=20777)）。

我在这里错过了什么吗？

ps 我正在使用集成到 WebStorm 4 中的 jsTestDriver。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-30T01:24:06.233

我假设您使用的是 JsTestDriver 网站上的 QUnitAdapter。目前，该站点上的适配器仅支持 QUnit 功能的一小部分，因此您应该使用[此处](https://github.com/exnor/QUnit-to-JsTestDriver-adapter)找到的更新和成熟的 QUnitAdapter 。我写了一篇文章，展示了如何将 QUnit、Requirejs 和代码覆盖与 JSTD 集成：[js-test-driver+qunit+coverage+requirejs](http://pseudobry.com/js-test-driver-qunit-coverage-requirejs/)。希望能帮助到你。

# java - 用tomcat 6运行jsp文件

> ID：11177031
> 
> 赞同：0
> 
> 时间：2012-06-24T11:23:48.707
> 
> 标签：java, eclipse, tomcat, servlets

我创建`dynamic web project`并添加了 2 个项目：

1.  `index.jsp`像这样的页面：

    ```
    <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Insert title here</title>
    </head>
    <body>
            <form action="GrettingServlet" method="POST">
            First Name: <input type="text" name="firstName" size="20"><br>
            Last Name: <input type="text" name="lastName" size="20">
            <br><br>
            <input type="submit" value="Submit">
    </form> 

    </body>
    </html> 
    ```

2.  在这样的*默认包* `servlet`中（称为`GrettingServlet.java`）：

    ```
    import java.io.IOException;
    import java.io.PrintWriter;

    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class GrettingServlet extends HttpServlet {
        private static final long serialVersionUID = 1L;

        public GrettingServlet() {
            super();
        }

        protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            // TODO Auto-generated method stub
        }

        protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();
            String firstName = request.getParameter("firstName").toString();
            String lastName = request.getParameter("lastName").toString();

            out.println("<html>");
            out.println("<head>");
            out.println("<title>Servlet GreetingServlet</title>");
            out.println("</head>");
            out.println("<body>");
            out.println("<p>Welcome " + firstName + " " + lastName + "</p>");
            out.println("</body>");
            out.println("</html>");

            out.close();
        }

    } 
    ```

我安装了`tomcat6`，所以我有`Apache Software Foundation`文件夹。最后我想创建`war`这个项目的文件，所以我选择了项目`Export>War file`，在`Destination`文本中我选择了`webapps`路径中的文件夹`C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0\webapps`。该项目称为`MyFirstServlet`. 为了查看`index.jsp`服务器上的表单，我在浏览器中编写，`http://localhost:8080/MyFirstServlet/`但我收到了消息

```
HTTP Status 404 - /MyFirstServlet/

type Status report

message /MyFirstServlet/

description The requested resource (/MyFirstServlet/) is not available.

Apache Tomcat/6.0.35 
```

servlet 映射是这样的：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>MyFirstServlet</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description>new</description>
    <display-name>GrettingServlet</display-name>
    <servlet-name>GrettingServlet</servlet-name>
    <servlet-class>GrettingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GrettingServlet</servlet-name>
    <url-pattern>/GrettingServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

我检查了tomcat并打开了`service status : started`

可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:32:23.010

从给定的示例中，您应该将 Web 应用程序作为 MyFirstServlet.war 部署到 Tomcat 中（或作为展开的目录 - 这没有区别）并将 GrettingServlet 映射到*应用程序根目录*- 如果您希望 servlet 处理根：

你`/WEB-INF/web.xml`应该有这些：

```
<servlet>
    <servlet-name>GrettingServlet</servlet-name>
    <servlet-class>your.package.GrettingServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>GrettingServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

**注意错字：** “Gretting”（在 servlet 和映射中）与“Greeting”（在 JSP 形式中）

通过您的设置，您应该将浏览器指向`http://localhost:8080/MyFirstServlet/GrettingServlet`以访问 servlet。

如果您的想法是让 JSP 页面来处理根，那么您应该浏览到其中一个`http://localhost:8080/MyFirstServlet/<yourJSPName>.jsp`或将 JSP 称为`index.jsp`或`default.jsp`（请参阅`<welcome-file-list/>`您的 参考资料部分`web.xml`）。在这种情况下，我猜您的想法是显示一个 JSP，然后发布到 servlet，因此请确保您的 servlet 规范和映射是正确`web.xml`的（servlet 映射和 JSP 表单`action`属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:42:43.370

只需使用以下内容修改您的 web.xml，它应该可以工作

```
<servlet>
  <servlet-name>GrettingServlet</servlet-name>
  <servlet-class>GrettingServlet</servlet-class>
</servlet>
<servlet-mapping>
  <servlet-name>GrettingServlet</servlet-name>
  <url-pattern>/GreetingServlet</url-pattern>
</servlet-mapping> 
```

**更新** 这里是整个 WEB.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>MyFirstServlet</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
  <servlet>
    <description>new</description>
    <display-name>GrettingServlet</display-name>
    <servlet-name>GrettingServlet</servlet-name>
    <servlet-class>GrettingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>GrettingServlet</servlet-name>
    <url-pattern>/GreetingServlet</url-pattern>
  </servlet-mapping>
</web-app> 
```

# java - 使用 java.awt.color 设置背景颜色

> ID：11177033
> 
> 赞同：1
> 
> 时间：2012-06-24T11:24:48.910
> 
> 标签：java, swing

这是我在 Eclipse 上的第一个 Swing 项目，我无法设置组件的背景颜色。我已经尝试使用此代码：

```
B_Send.setBackground(new java.awt.color(0,0,255)); 
```

返回错误：

> java.awt.color 无法解析为类型

谁能解释错误以及为什么代码不起作用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T11:26:29.470

不是`java.awt.color`，而是`java.awt.Color`。

是的，这些小事意义重大，而且 Java 编译器非常挑剔。欢迎来到编程的世界。

# jquery - jquery点击多次执行

> ID：11177036
> 
> 赞同：1
> 
> 时间：2012-06-24T11:25:11.417
> 
> 标签：jquery, setinterval

我的问题是正确*切换*某些按钮的状态。我使用**jquery 点击**事件。而且我很抱歉发了这么长的帖子，但我不知道问题出在哪里，也不想不小心错过它。我搜索了类似的问题，但似乎没有一个能解决我的问题。

我开始渲染一个*div*，其中包含我今天想做的一些任务。我希望能够将它们切换为完成与否。

```
{
    $('#currentDiv').hide();
    rewriteDivFromScratch();
    $('#eachday').show();
} 
```

rewriteDivFromScratch将按钮 div 添加到**HTML的****位置**：

 **```
<div id="eachday"> .. </div>
    <div id="button-0" class="button"> <button class="btn btn-mini"> .. </button> </div>
    ..
    <div id="button-7" class="button"> <button class="btn btn-mini"> .. </button> </div> 
```

```
function rewriteDivFromScratch() {
    el = $("#eachday");

    // get the HTML divs from Handlebars templating compilation
    // they're OK, I checked with inspector

    // This renderes nicely, no problem here.
    el.html(html);
} 
```

我为按钮添加了一个**单击事件**，以在与上述相同的文件中切换：

```
$('.btn-mini').click( function(e) {
    e.preventDefault();
    var el = $(e.currentTarget);  // the <button />
    el.toggleClass('btn-inverse');
} 
```

而且我**没有切换**效果..

现在，我想这是因为在 $(..).click**执行时没有****.btn-mini**类。这就是为什么我像这样添加一个**setInterval**：

 ****```
var intervalId; // it's global in my js file
function rewriteDivFromScratch() {
    ...
    // This renderes nicely, no problem here.
    el.html(html);
    intervalId = setInterval(check); // this fires only once, so seems OK
} 
```

```
var check = function() {
    $('.btn-mini').click( function(e) {
        e.preventDefault();
        var el = $(e.currentTarget);  // the <button />

        if (el.length)
            clearInterval(intervalId);
        else
            return;

        // It executes this toggle more than **15** times per
        // click on button.. Now, why is that?
        el.toggleClass('btn-inverse');
    }
}; 
```

正如我在上面最后一条评论中所说，我的问题是该部分被执行多次，而不是每次刷新的固定次数，以便找到模式或其他东西。

上面的 js 代码在一个单独的“app.js”中，我只是像任何其他脚本一样将它包含在我的 index.html 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:36:04.637

只需将 jquery 的“live”用于“委托事件”，只要将新按钮插入文档中，它也将起作用：

```
$('.button').live('click', function(){
  //button clicked
}); 
```

请参阅[http://api.jquery.com/live/](http://api.jquery.com/live/)以进一步了解“live”的工作原理。******

# c# - 如何定义命名空间范围的 C# 别名？

> ID：11177039
> 
> 赞同：5
> 
> 时间：2012-06-24T11:25:31.450
> 
> 标签：c#, .net, alias

可以像这样在 C# 中定义别名

```
using kvp = System.Collections.Generic.KeyValuePair<string, string>;

var pair = new kvp("key", "value"); 
```

微软也定义了别名：

```
 int i;
        Int32 i2; 
```

我们如何定义命名空间中可用的别名？这是可配置的吗？

* * *

这个问题专门关于别名......所以......不希望使用继承作为代理。在许多情况下，我对此感到满意……但当您想要最好的描述性名称和速记版本时，情况就不是这样了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T12:13:04.993

我不认为你所要求的真的是可能的。这是一种解决方法：包含一个名为 kvp 的类型，它是您的类型的副本`KeyValuePair<string, string>`并隐式转换为您的类型。

```
public struct kvp
{
    public string Key { get; private set; }
    public string Value { get; private set; }

    public kvp(string key, string value)
        : this()
    {
        Key = key;
        Value = value;
    }
    public override string ToString()
    {
        return ((KeyValuePair<string, string>)this).ToString();
    }

    public static implicit operator KeyValuePair<string, string>(kvp k)
    {
        return new KeyValuePair<string, string>(k.Key, k.Value);
    }
    public static implicit operator kvp(KeyValuePair<string, string> k)
    {
        return new kvp(k.Key, k.Value);
    }
} 
```

这具有您可以使用`kvp`而不是 的`KeyValuePair<string, string>`效果，在大多数情况下不会产生意外影响。

如果您希望 typedef 的类型是一个未密封的类，您可以通过创建一个扩展它的类来做（非常接近）您想要的事情，其中​​所有基类的构造函数都被镜像和扩展`base(...)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T12:24:50.417

您明确要求提供别名而不是解决方法。因此，我唯一的答案是：没有办法做到这一点。

您作为示例提供的`using`别名是每个文件。C# 没有允许跨文件别名的构造。

# javascript - 如何使用滑动、缩放和裁剪在 jquery 中操作图像的大小或位置？

> ID：11177044
> 
> 赞同：0
> 
> 时间：2012-06-24T11:26:14.793
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

我想模仿 Facebook 的横幅图片上传裁剪功能。目前，他们允许用户上传横幅，但在保存之前，他们可以将其向上或向下滑动，直到显示他们想要的图像部分。

我想这样做，但也允许从左到右缩放和滑动。我将轴结果存储在数据库中，并使用溢出隐藏 css 设置来隐藏横幅 div 之外的图像部分。

是否有一个流行的插件可以做到这一点，它轻巧且易于使用？还是有一些我可以遵循的教程，以便我自己推出？

亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-08T01:07:11.930

对于任何觉得它有用的人，您都可以使用[jQuery Guillotine](http://github.com/matiasgagliano/guillotine)来实现。它类似于 Facebook 的方法，另外它处理缩放和旋转。

检查[演示](http://matiasgagliano.github.io/guillotine)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:08:01.370

看看下面的链接，它们可能对你有用，或者至少给你一些关于如何扮演你自己的角色的想法：

*   [http://www.dimin.net/software/panojs/](http://www.dimin.net/software/panojs/)
*   [http://codecanyon.net/item/smooth-zoom-pan-jquery-image-viewer/511142?ref=lvraa](http://codecanyon.net/item/smooth-zoom-pan-jquery-image-viewer/511142?ref=lvraa)

我建议在用户提交图像后对图像进行一些服务器端操作。这样，当您只需要一小部分时，您就不会存储/加载非常大的图像。此外，每次加载图像进行显示时，都不需要逻辑来裁剪/缩放图像。

# python - python表达式的原理呢？

> ID：11177046
> 
> 赞同：0
> 
> 时间：2012-06-24T11:26:59.407
> 
> 标签：python

```
lambda x : '%x' % x 
```

函数是十进制转十六进制，原理是什么？我是python新手，在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:31:38.547

在字符串格式表示法中，'%x' 是十六进制输出的占位符。

该函数接受一个值并将其格式化为十六进制字符串。

它不是“十进制到十六进制”，而是“以十六进制表示法返回（无论你给出什么）作为字符串”。

例如，

```
print '%x' % 0b11111111   # -> 'ff'  (from binary)
print '%x' % 0377         # -> 'ff'  (from octal)
print '%x' % 255          # -> 'ff'  (from decimal)
print '%x' % 0xff         # -> 'ff'  (from hex) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:30:16.987

```
a = 255

#use a hexadecimal format string to display the value of a - prints ff
print "%x" % a 

#create a function that takes a value and returns its hexadecimal representation
tohex = lambda x : '%x' % x

#call the function - prints ff
print tohex(255) 
```

# iphone - 如何将 plist 上传到 iPhone SDK 上的 Godaddy 服务器？

> ID：11177048
> 
> 赞同：-1
> 
> 时间：2012-06-24T11:27:10.487
> 
> 标签：iphone, file-upload, sdk, upload

在我的代码中，程序将创建一个简单的 .plist 文件。我有一个从 godaddy 购买的 ftp 服务器。我知道为了将内容上传到该服务器，我需要一个用户名和密码。我看到的所有教程都没有放置用户名和密码的地方！所以基本上，我需要知道如何将一个简单的 .plist 上传到我的 Godaddy 服务器。

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-06-26T00:29:14.300

您可以通过 Go Daddy 帐户或 FTP 上传文件。

使用您的 GoDaddy 帐户上传文件：

1.  登录您的客户经理。
2.  单击虚拟主机。
3.  在您要使用的主机帐户旁边，单击启动。
4.  在主机控制中心的内容部分，单击 FTP 文件管理器图标。
5.  使用目录树导航到您要上传文件的文件夹。
6.  在菜单栏中，单击上传。注意：您一次最多可以上传 20MB。单击浏览并选择要上传的文件。您可以选择多个文件。
7.  单击上传。

# uml - 以面向对象的方式实现通用数据模型？

> ID：11177049
> 
> 赞同：0
> 
> 时间：2012-06-24T11:27:35.927
> 
> 标签：uml, ooad

我有一个从 LEN SILVESTON 的书中取出的 UDM（通用数据模型），我想在 C Sharp 中将其实现为面向对象的设计，以对 PARTIES、PERSONS 和 ORGANIZATIONS 进行建模。

虽然从逻辑模型 SUPERTYPES 和 SUBTYPES 移动很容易通过类层次结构完成，但我不确定如何处理关系。关系世界（物理数据库）世界中的多对多关系通常会在单独的关联表中实现。我有一种感觉，遵循这种范式并在面向对象的世界中将 MM 关系实现为一个单独的“关联”类可能不是要走的路……。或者是吗？

另外，是否有人知道是否有任何文章以面向对象的方式实现这些 UDM？

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:46:56.753

> 我有一种感觉，遵循这种范式并将 MM 关系实现为面向对象世界中的一个单独的“关联”类可能不是要走的路。

你的感觉是对的，在面向对象的世界中，你不必有一个单独的关联类来模拟多对多的关系。实现这一点的最常见方法是在关联的每一侧使用集合，从而产生多对多关联。看看下面的多对多关系的 C# 示例：

```
class A {
    List<B> bs;
}

class B {
    List<A> as;
} 
```

# groovy - 如何使用 groupby 在 Groovy 中为映射值选择对象字段

> ID：11177050
> 
> 赞同：2
> 
> 时间：2012-06-24T11:27:51.560
> 
> 标签：groovy

我有一个人员列表，其中包含带有 getName() 和 getYearOfBirth() 方法的 Person 对象。我正在使用 groupBy 对 Person 对象进行分组。我正在使用 groupBy 对 Person 对象进行分组，但我只想将名称放入地图中，因为 Person 将来会有很多附加字段。岁月将是关键。

```
 class Person {
        String name
        int yearOfBirth
    }       

    def people = [ 
        new Person(name:"Tom", yearOfBirth:1985),
        new Person(name:"Abigail", yearOfBirth:1987),
        new Person(name:"Joyce", yearOfBirth:1984),
        new Person(name:"James", yearOfBirth:1987),
        new Person(name:"Scott", yearOfBirth:1985),
        new Person(name:"Ruth", yearOfBirth:1984)
    ]           

    //people.groupBy(_.year) mapValues (_ map (_.name))  how to map here? 
```

这是[Scala 应用程序的直接端口](https://stackoverflow.com/questions/9541838/how-to-select-a-object-field-for-map-value-in-scala-using-groupby)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:02:06.007

一种解决方案是：

```
def nameInYear = people.groupBy { it.yearOfBirth }
                       .collectEntries { [ (it.key):it.value.name ] }
assert nameInYear[ 1984 ] == [ 'Joyce', 'Ruth' ] 
```

因此，按他们的出生年份对他们进行分组以获得 YEAR->ListOfPeople 地图 然后，对于这些分组中的每一个，收集 YEAR->ListOfNames 的地图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T22:04:18.990

另一个更重要的解决方案是：

```
def namesByYear = [:].withDefault { [] } 
people.each { namesByYear[it.yearOfBirth] << it.name }

assert namesByYear[1985] == ['Tom', 'Scott'] 
```

可以使用 将同一件事转换为一个表达式[`inject`](http://groovy.codehaus.org/groovy-jdk/java/util/Collection.html#inject%28U,%20groovy.lang.Closure%29)，尽管我认为它变得不那么可读：

```
def namesByYear = people.inject([:].withDefault { [] }) { map, p ->
    map[p.yearOfBirth] << p.name
    map
} 
```

# php - 使用 mysqli_escape_string 错误

> ID：11177052
> 
> 赞同：2
> 
> 时间：2012-06-24T11:27:58.580
> 
> 标签：php, mysqli

为什么我在使用这个 mysqli_real_escape_string() 时一直收到这个错误？

```
mysqli_real_escape_string() expects exactly 2 parameters, 1 given in C:\xampp\htdocs\beatbeast\reg.php on line 6 
```

我已经通过了连接，以及需要清理的字符串，但我怎么会一直收到这个错误？

这是我的代码

```
<?php
    class Db_DatabaseUtilities{

        public static function registerAccount($conn,$username,$password,$email){
            if(!isset($conn)){
                    echo"XDDDDDDDDD";
            }
            $username = mysqli_real_escape_string($conn,$username);
            $email =mysqli_real_escape_string($conn,$username);
            $password = mysqli_real_escape_string($conn,$password);
            $hashedpass = crypt($password,$username);

            $sql = "INSERT INTO accounts ('username','password','email') VALUES('{$username}','{$hashedpass}','{$email}')";
            Db_DatabaseUtilities::perform_query($conn, $sql);
        }

        public static function perform_query($conn,$sql){
            $result_set = $conn->query($sql);
            if(!$result_set){
                die("Die Database Query Failed");
            }else{
                return $result_set;
            }
        }       
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:41:46.413

第一：如果这是您的真实代码，那么您将转义`$username`两次，而`$email`根本没有转义：

```
$username = mysqli_real_escape_string($conn,$username);
$email =mysqli_real_escape_string($conn,$username);//should probably be $email as second param 
```

你有两个问题的选择：

1.  您的数据库连接不正确...*检查您的连接并确保它具有编码*集。
2.  您的输入数据错误...*您的参数之一可能不是有效的字符串*

我看不到任何其他选择...祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:29:48.110

检查第 6 行`reg.php`。

`string mysqli_real_escape_string ( mysqli $link , string $escapestr )`

您需要将 mysqli 连接作为第一个参数传递。

# rvm - 使用 capistrano 部署会忽略组设置

> ID：11177054
> 
> 赞同：7
> 
> 时间：2012-06-24T11:28:02.450
> 
> 标签：rvm, capistrano, chmod, rvm-capistrano

在我的部署文件中，我将组设置为 www-data：

```
set :user,            "root"
set :group,           "www-data" 
```

所以在使用 cap:setup 时，我希望 capistrano 使用 root:www-data chown 文件夹

但所有文件夹和文件都是 root:root。

这个问题可能来自哪里的任何想法？

信息：我正在使用系统范围的 rvm。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T23:55:03.350

至于我的理解，您应该手动进行，设置的作用是使用用户登录，而不是设置目录的权限。

我没有找到 capistrano 的组设置，也许你使用了一些扩展？

你可以做些什么来改变它：

```
after "deploy:setup", :setup_group
task :setup_group do
  run "chown -R :#{group} #{deploy_to} && chmod -R g+s #{deploy_to}"
end 
```

但首先你不应该使用**root**进行部署，正如@Julian 在评论中提到的更好的做法是使用单独的用户来完成这个任务并将他的组设置为适当的组，那么它就不需要上述任务并且会自动工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T21:24:12.963

只是插话：*在 Capistrano 源代码中没有提到 :group*。我想这是一个货物崇拜的选择。:user 选项仅用于 SSH 连接。

至于您的问题，Capistrano 创建的目录和文件是使用默认权限创建的，它绝不会`chown`以任何方式创建它们；如果您正在部署，`root`那么它们将属于`root:root`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T00:55:43.193

比解决问题更好的是首先没有它：

1.  首先，创建另一个用户来部署（[正如 Julien 建议的那样](https://stackoverflow.com/q/11177054/341929#comment14671201_11177054)）。
    说我们叫他`deployer`。
2.  然后使用他进行 SSH 连接
    `set :user, 'deployer'`
3.  最后，我们不想被使用`sudo`，所以通过添加
    `set :use_sudo, false`
    到您的`deploy.rb`.

# php - Gmail oauth imap php 实现

> ID：11177060
> 
> 赞同：2
> 
> 时间：2012-06-24T11:28:30.900
> 
> 标签：php, api, oauth, gmail, imap

请问Guyz，是否有任何简单的php“不涉及zend”示例说明如何将oauth与imap一起使用来完全控制gmail，似乎oauth2.0尚未通过imap实现。所有文档目前都使用 zend，但是我使用简单的 php 开发我的应用程序。我至少可以有一个逐步的算法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-25T01:48:47.603

是的，是的，是的。必须花费 8 个小时来尝试提出一个解决方案，该解决方案允许我使用 oauth 从“简单”php 访问 Gmail（作为一个较大的电子邮件应用程序的一部分，该应用程序大部分时间都与非 Gmail 流行服务器通信）。

笔记：

*   [如果您使用https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)启用 Google 的“不太安全”模式，许多简单的 imap_open to gmail 解决方案都可以工作 ……当然，这意味着您的 gmail 不太安全。

*   vivOAuthIMAP 将在任一模式下工作：如果启用“不太安全”，则“正常”登录，如果禁用不太安全，则 Oauth 登录。

*   要使 VivOAuthIMAP 正常工作，请务必启用 php_curl

*很多几乎对我来说不太有效的解决方案（在简单的 php 中工作）。以下是一些几乎可以产生有用信息的网站：

*   [http://codeload.github.com/google/google-api-php-client/zip/master](http://codeload.github.com/google/google-api-php-client/zip/master) - 示例工作，我能够使用 idtoken.php 获取访问令牌，但它没有工作和 ...

*   http://code.google.com/p/google-mail-oauth2-tools/wiki/PhpSampleCode - 当我剪切/粘贴由 idtoken 生成的访问令牌（从上面）时，我登录失败。我确实想知道我做错了什么

*   http://www.phpclasses.org/browse/download/zip/package/7700/name/oauth-api-2014-12-22.zip——不太好用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T13:39:28.827

实现了一个简单的库。
删除邮件功能尚未添加。但是你可以看看它是否满足你的需要。
试试例子。 [https://github.com/vmuthal/VivOAuthIMAP](https://github.com/vmuthal/VivOAuthIMAP)

# android - android dalvik vm 是否使用逃逸分析优化？

> ID：11177062
> 
> 赞同：8
> 
> 时间：2012-06-24T11:28:52.353
> 
> 标签：android, dalvik, escape-analysis

关于 dalvik 逃逸分析的任何想法？或者何时以及是否计划添加？

我认为逃逸分析是 GC 语言中非常重要的特性，以避免每次调用方法时都产生对象，目前我在类中预分配一个对象并在方法开始时将其重置，所以我避免分配（我正在写android 的 3D 游戏......在 java 中），但我发现这种方法很丑陋，并且内存被预分配的对象占用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:22:44.470

> 关于 dalvik 逃逸分析的任何想法？

[Dalvik 项目的部分](https://github.com/android/platform_dalvik/blob/master/dx/src/com/android/dx/ssa/EscapeAnalysis.java)源[代码`dx`](https://github.com/android/platform_dalvik/blob/master/dx/src/com/android/dx/ssa/EscapeAnalysis.java)执行一些有限的逃逸分析。这是否真的在生产中使用，我不能说，而且这个话题似乎也很少出现。

> 或者何时以及是否计划添加？

谷歌在关于 Android 功能的前瞻性陈述方面没有做太多。

# iphone - 如何使用 iOS 可达性

> ID：11177066
> 
> 赞同：36
> 
> 时间：2012-06-24T11:29:26.740
> 
> 标签：iphone, objective-c, ios, nsurlconnection, reachability

我正在开发一个使用网络的 iPhone 应用程序。iPhone 通过 HTTP 请求与我的服务器通信，应该可以在 WiFi 和 3G 上运行。
我目前用来`NSURLConnection initWithRequest`向我的服务器发送异步请求并获得响应（但我很快就会开始使用`ASIHTTPRequest`库）

我明白，对于这种应用程序（需要互联网连接的应用程序），我应该（必须？）使用可达性。

在网上搜索并查看 Apple 的 Reachability 示例代码后，我仍然不明白一些基本的东西：

**可达性的主要目的是什么？**

在苹果的示例中，它们检测主机、WiFi 和 3G 的网络问题，并向用户显示适当的消息。
这是可达性的主要目的，向用户显示消息吗？还是我需要将它用于其他更实际的场景？例如，如果`NSURLConnaction`请求失败，我是否需要以某种方式使用可达性来重新发送请求？

**什么是可达性的正确使用？**

**应用启动时只使用一个**实例，然后监听网络变化是否很常见？或者我应该在每次网络请求之前检查自己的可达性状态吗？
它足够使用`reachabilityWithHostName`还是我还需要`reachabilityForLocalWiFi`and `reachabilityForInternetConnection`？

**还有一件事**，我知道苹果可以拒绝使用网络但不使用可达性的应用程序。
我应该实施哪些“**必须**”做的方法？
只通知用户当前没有互联网就足够了吗？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-24T11:43:02.817

`Reachability`是一个网络助手实用程序类，用于获取有关连接状态的各种信息

> 可达性的主要目的是什么？

可达性用于查询网络状态，并注册您的侦听器以在连接更改时获得通知。

> 这是可达性的主要目的，向用户显示消息吗？

不，它的主要用途是测试是否有 Internet 连接，或者在连接更改时收到通知

> 例如，如果`NSURLConnection`请求失败，我是否需要以某种方式使用可达性来重新发送请求？

是的，你可以使用它。例如，我通常在我的项目中所做的是将所有已发出的请求保存到远程服务器。

假设我要下载 10 个文件。当任何文件由于没有 Internet 连接而导致下载过程失败时，我会将它们保存到一系列失败的下载中。

然后，当 Reachability 通知我 Internet 连接已恢复时，我遍历此数组并再次开始下载过程。

> 什么是可达性的正确使用？

这取决于您的模式和需求。

> 应用启动时只使用一个实例，然后监听网络变化是否很常见？

是的，这就是我所做的。在我的项目中，我只有一个下载管理器类的实例，而这个类有唯一一个活动的可达性实例。

> 或者我应该在每次网络请求之前检查自己的可达性状态吗？

您可以在没有多个可达性类实例的情况下做到这一点。我通常做的是在我的下载管理器中有一个方法，告诉我是否有连接使用可达性。

> 它足够使用`reachabilityWithHostName`还是我还需要 `reachabilityForLocalWiFi`and `reachabilityForInternetConnection`？

我不确定这个，但我通常做的是测试所有手段的连接性。我不区分 3G 或 WiFi，但在某些实现中，此信息（WiFi 或 3G）可能有用。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-24T11:43:50.450

[Reachability](https://developer.apple.com/library/ios/samplecode/Reachability/Introduction/Intro.html)是 Apple 制作的一个示例项目。人们将其用作 SystemConfiguration 框架上的 API。正如您已经看到的，有一些方法可以检查主机是否可访问等。

我使用 Reachabilty 项目的方式是，我使用类方法创建了一个类，如果我从中请求数据的主机可用，则该类方法返回一个布尔值。如果是，则该方法返回`YES`，如果不是，则返回`NO`（显然）。

现在，在我使用连接的应用程序中，您需要/应该检查是否可以按照 Apple 文档所述启动连接。我有一个简单`if`的然后显示一个适当的警报消息，该请求目前无法完成。

如果第一次无法执行请求，则不要求您自动重试。这样做的主要目的是让您的应用程序远离崩溃，同时给用户一个无法完成的消息。

我自己不使用通知，但那是因为我对监视是否可以进行连接不感兴趣。这是您必须根据您的应用程序需求来决定的事情。

您不必强制使用 Reachablitiy 类中的所有方法，使用其中之一就足够了。它记录了不同方法提供的内容以及何时在头文件中使用它们。

记得包含`SystemConfiguration`框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-24T19:04:08.920

可达性是对互联网是否可达的最佳猜测。它会告诉您是否可以通过 WiFi 访问，或者您是否只能通过移动数据访问。不能保证它是正确的。如果它说您有 WiFi 连接，则该连接可能会在一秒钟后丢失。确定访问 URL 是否有效的唯一方法是进行访问并查看会发生什么。在某些情况下，当 Reachability 说它不起作用时，访问会起作用，反之亦然。

以下是我使用 Reachibility 的目的：由于没有 Internet 连接而导致下载失败后，我将在 Reachability 检测到更改时开始重试（实际上是几秒钟后；在 Reachability 说 WiFi 恢复后，URL 访问通常会立即失败）。在不允许移动数据的地方下载失败后，检查移动数据是否可用，然后要求用户允许使用移动数据。

# c# - 数据表和 LINQ 父/子关系

> ID：11177074
> 
> 赞同：1
> 
> 时间：2012-06-24T11:30:07.260
> 
> 标签：c#, linq, datatable

得到带有 Id、parentId、描述的数据表。它是一种关系表结构。

我希望能够将参数传递给一个函数，该函数是树视图中项目的当前选定 ID。我想返回一个包含所有相关子行的数据表，关系的顶部是 parentId 为空......等等

我想做这个 LINQ

欢迎任何帮助。

```
enter code here var kids = ( from p in dt.AsEnumerable()
                     where p.Field<Int32?>( "ParentId" ) == parentId
                     select new
                     {
                         parent = p,
                         child = from c in dt.AsEnumerable()
                                 where c.Field<Int32?>( "ParentId" ) == p.Field<Int32>( "Id" )
                                 select new
                                 {
                                     child = c
                                 }
                     } ).ToList(); 
```

以下是我正在使用的数据，我无法让它按预期工作。也许我们不是在谈论相同的最终结果，或者我错过了一些可怕的东西。

这是我拥有的代码，当我为 parentId 传递 57 的值时，我在子项中得到 2 行。

QuotationItemId=58 和 71

我也希望得到 QuotationItemId 59, 60, 55 ,56, 61

```
 var lookup = dt.AsEnumerable().ToLookup( p => p.Field<int?>( "ParentId" ) );
        var children = lookup[parentId].ToList(); 
```

![数据转储](../Images/b1a00359acd2da2fd0701d2032b70181.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T11:53:14.797

这是你可以做的：

```
var lookup =
    dt
        .AsEnumerable()
        .ToLookup(p => p.Field<int?>("ParentId")); 
```

现在，如果您想要根元素，请执行以下操作：

```
var roots = lookup[null]; 
```

如果你想要任何孩子，给定`parentId`，你这样做：

```
var children = lookup[parentId]; 
```

很简单吧？

* * *

这是基于您的编辑的一些代码。

我使用匿名类型定义了我的项目列表：

```
var items = new []
{
    new { QuotationItemId = 54, ParentId = (int?)null, Description = "0000", },
    new { QuotationItemId = 55, ParentId = (int?)60, Description = "Product 55", },
    new { QuotationItemId = 56, ParentId = (int?)60, Description = "Product 56", },
    new { QuotationItemId = 57, ParentId = (int?)54, Description = "Category 57", },
    new { QuotationItemId = 58, ParentId = (int?)57, Description = "Sub Category 58", },
    new { QuotationItemId = 59, ParentId = (int?)58, Description = "Product 59", },
    new { QuotationItemId = 60, ParentId = (int?)58, Description = "Standard Ratel", },
    new { QuotationItemId = 61, ParentId = (int?)60, Description = "Product 61", },
    new { QuotationItemId = 62, ParentId = (int?)null, Description = "Stage 62", },
    new { QuotationItemId = 63, ParentId = (int?)62, Description = "Product 63", },
    new { QuotationItemId = 64, ParentId = (int?)62, Description = "Product 64", },
    new { QuotationItemId = 65, ParentId = (int?)62, Description = "Category 65", },
    new { QuotationItemId = 66, ParentId = (int?)65, Description = "Sub Category66", },
    new { QuotationItemId = 67, ParentId = (int?)66, Description = "Product 67", },
    new { QuotationItemId = 68, ParentId = (int?)66, Description = "Standard Rate 2", },
    new { QuotationItemId = 69, ParentId = (int?)68, Description = "Product 69", },
    new { QuotationItemId = 71, ParentId = (int?)57, Description = "Sub Category 71", },
    new { QuotationItemId = 72, ParentId = (int?)54, Description = "Category 72", },
    new { QuotationItemId = 73, ParentId = (int?)72, Description = "Sub Category73", },
    new { QuotationItemId = 74, ParentId = (int?)73, Description = "Product 74", },
    new { QuotationItemId = 75, ParentId = (int?)73, Description = "Product 75", },
    new { QuotationItemId = 77, ParentId = (int?)null, Description = "qqqqqqqqqq", },
    new { QuotationItemId = 78, ParentId = (int?)null, Description = "zzzzzz", },
    new { QuotationItemId = 79, ParentId = (int?)null, Description = "Test 12345", },
    new { QuotationItemId = 80, ParentId = (int?)null, Description = "456", },
    new { QuotationItemId = 81, ParentId = (int?)null, Description = "tttt", },
    new { QuotationItemId = 82, ParentId = (int?)null, Description = "reddddy777", },
    new { QuotationItemId = 83, ParentId = (int?)null, Description = "bbbbbbbbbbbb", },
    new { QuotationItemId = 84, ParentId = (int?)null, Description = "nnnnnnnnnnnnn", },
}; 
```

而且，使用 LINQPad，查找工作如下：

```
var lookup = items.ToLookup(x => x.ParentId);

lookup[58].Dump();
lookup[60].Dump(); 
```

![来自 LINQPad 的屏幕转储](../Images/e90cda2562274db541234be8228e5d8f.png)

您应该注意，它不会一直递归下去。

如果你想一直递归，那么你需要定义一个递归函数。尝试这个：

```
Func<IEnumerable<Quotation>, IEnumerable<Quotation>> recurse = null;
recurse = qs =>
{
    return
        qs
            .Concat(
                from q in qs
                from q2 in recurse(lookup[q.QuotationItemId])
                select q2);
};

recurse(lookup[57]).Dump(); 
```

这给了你：

![LINQPad 图像转储](../Images/b2eda9cae2d2ba23085b768ac81a30a3.png)

这是我认为你所期待的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T11:43:58.223

您可以简单地选择它们：

```
var kids = from p in db.Items
           where p.parentId == parentId
           select p 
```

然后您将拥有：`kids.Items`作为列表。所以你可以通过一个简单的`foreach`循环来检索孩子，如下所示：

```
foreach(Item item in kids.Items) 
```

希望能帮助到你。

# android - 在两个片段之间传递数据

> ID：11177076
> 
> 赞同：2
> 
> 时间：2012-06-24T11:30:29.847
> 
> 标签：android, android-fragments, actionbarsherlock, android-actionbar

我有两个片段，在单独的类中声明 - AFragment 和 BFragment。我的 MainActivity 看起来有点像这样：

```
public class MainActivity extends SherlockFragmentActivity implements ActionBar.TabListener 
{       
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    getSupportActionBar().setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    ActionBar.Tab firstTab = getSupportActionBar().newTab().setText("Fragment A");           
    ActionBar.Tab secondTab = getSupportActionBar().newTab().setText("Fragment B");

    SherlockFragment firstFragment = new AFragment();
    SherlockFragment secondFragment = new BFragment();

    firstTab.setTabListener(this);
    secondTab.setTabListener(this);

    getSupportActionBar().addTab(firstTab);
    getSupportActionBar().addTab(secondTab);
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
    switch (tab.getPosition())
    {
    case 0:
        ft.replace(R.id.fragment_container, new AFragment());
        break;
    case 1:
        ft.replace(R.id.fragment_container, new BFragment());
        break;
    }
    Toast.makeText(this, tab.getText(), Toast.LENGTH_LONG).show();      
    }
    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
    }
} 
```

我的问题是，我如何在我的两个片段之间传递一个变量——比如一个整数？例如，我在第一个片段中按下一个按钮，一个特定的整数将出现在第二个片段的 TextView 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:00:13.503

片段意味着可以重复使用......也就是说，两个片段不应该**直接**在彼此之间传递数据。相反，您应该在 Activity 中定义一个[回调方法。](http://developer.android.com/guide/components/fragments.html#EventCallbacks)如果需要，这将确保您可以在应用程序的其他地方（以及您制作的其他应用程序）中重复使用您的片段。

# ruby-on-rails - 如果用户未经授权，如何使用设计发送 CORS 标头（401 响应）

> ID：11177079
> 
> 赞同：18
> 
> 时间：2012-06-24T11:31:22.603
> 
> 标签：ruby-on-rails, rest, devise, cross-domain, cors

我正在开发一个应用程序，其中服务器和使用 api 的客户端位于不同的域下，所以我想使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing "CORS")。为此，我必须在服务器响应中设置相应的 http 标头：

```
def cors_set_access_control_headers
  headers['Access-Control-Allow-Origin'] = 'http://localhost'
  headers['Access-Control-Allow-Methods'] = 'POST, GET, OPTIONS'
  headers['Access-Control-Allow-Headers'] = '*, X-Requested-With, X-Prototype-Version, X-CSRF-Token, Content-Type'
  headers['Access-Control-Max-Age'] = "1728000"
end 
```

此方法用作`before_filter`in `ApplicationController`。

对于某些资源，用户必须经过身份验证和授权。请求是通过 XHR/Ajax 完成的。因此，如果用户未通过身份验证，[Devise](https://github.com/plataformatec/devise)将向客户端发送 401 响应，而不是重定向到登录页面。但是设置 CORS 标头的过滤器不用于该响应。因此 401 响应不会发送到客户端。我想在客户端捕获并使用 401 响应。

目前，我正在使用一种解决方法，即不使用 Devise 身份验证方法，而是使用自定义身份验证片段：

```
def authenticate_cors_user
  if request.xhr? && !user_signed_in?
    error = { :error => "You must be logged in." }
    render params[:format].to_sym => error, :status => 401
  end
end 
```

这也设置为`before_filter`in `ApplicationController`。这样，设置 CORS 标头的过滤器就会被触发，并且一切正常。

我更喜欢使用 Devise 的默认行为，但 CORS 标头必须在 401 响应中设置。这个怎么做？我必须为此配置[warden](https://github.com/hassox/warden)吗？

**如何为 Devise 生成的 401 响应设置 CORS 标头而不是创建我自己的响应？**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-16T21:44:15.623

我成功地使用了 rack-cors gem [https://github.com/cyu/rack-cors并在](https://github.com/cyu/rack-cors)[我的博客](http://mark.nadigs.net/2012/10/16/rails-and-cross-origin-resource-sharing-cors/)上概述了我的经验。

Punchline：指定中间件顺序，以便 cors 处理程序在warden 之前：

```
config.middleware.insert_before Warden::Manager, Rack::Cors 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:03:16.700

我们通常不喜欢 CORS 标头。我们更喜欢使用 HAProxy 来重定向。

使用 HAProxy，您可以将所有到达 website.com/api/ 的请求设置为在内部重定向到您的 rails 机器。

```
frontend main *:80
  acl api      path_beg  -i /api
  acl app      path_beg  -i /app
backend app_backend
  reqrep    ^([^\ ]*)\ /app/(.*)  \1\ /\2
  balance   roundrobin
  server    app_files smartphoneapp.localhost:8000
backend api_backend
  reqrep    ^([^\ ]*)\ /api/(.*)  \1\ /\2
  balance   roundrobin
  server    app_api localhost:3000 
```

# php - ajax 代码定义错误或不响应

> ID：11177083
> 
> 赞同：2
> 
> 时间：2012-06-24T11:32:15.147
> 
> 标签：php, javascript, ajax

我是ajax的新手。从 wook 的博客学习基础知识。
我使用下面的代码使用 ajax 插入到我的数据库中。
但是该代码除了“稍等一下”之外不打印任何内容。

JsFiddle[链接](http://jsfiddle.net/abelkbil/VwFa8/) Ajax 代码如下：-

```
/* ---------------------------- */
/* XMLHTTPRequest Enable */
/* ---------------------------- */

function createObject() {
var request_type;
var browser = navigator.appName;
if (browser == "Microsoft Internet Explorer") {
    request_type = new ActiveXObject("Microsoft.XMLHTTP");
}
else {
    request_type = new XMLHttpRequest();
}
return request_type;
}

var http = createObject();

function insertReply() {
if (http.readyState == 4) {
    var response = http.responseText;
    // else if login is ok show a message: "Site added+ site URL".
    document.getElementById('insert_response').innerHTML = 'User added:' + response;
}
}

/* -------------------------- */
/* INSERT */
/* -------------------------- */
/* Required: var nocache is a random number to add to request. This value solve an Internet          Explorer cache issue */
var nocache = 0;

 function insert() {
// Optional: Show a waiting message in the layer with ID login_response
document.getElementById('insert_response').innerHTML = "Just a second...";
// Required: verify that all fileds is not empty. Use encodeURI() to solve some issues about   character encoding.

var username = encodeURI(document.getElementById('Username').value);
var name = encodeURI(document.getElementById('Name').value);
var password = encodeURI(document.getElementById('Password').value);
document.getElementById('insert_response').innerHTML = 'h ' + username + ' ' + name;
// Set te random number to add to URL request
nocache = Math.random();

// Pass the login variables like URL variable
http.open('get', 'insert.php?name=' + name + '&username=' + username + '&password=' + password);
http.onreadystatechange = insertReply;
http.send(null);
}​ 
```

插入db的php代码是::--

```
 if(isset($_GET['name']) && isset($_GET['username'])&& isset($_GET['password'])){

 $name= $_GET['name'];
 $username= $_GET['username'];
  $password= $_GET['password'];
  $sql = "INSERT INTO `vidyasims`.`user_accounts` (`UserID`, `UserName`, `Name`, `Password`)   VALUES (NULL, '. $username. ','. $name. ', '. $password. ');";
 $insertSite= mysql_query($sql) or die(mysql_error());

  //If is set URL variables and insert is ok, show the site name -->
 echo $username;
} else { 
 echo 'Error! Please fill all fileds!'; 
```

欢迎支持。提前致谢。

注意 - 上面的代码没有向 db 添加新用户！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:56:16.210

您缺少 html 表单输入的 ID，并且无法使用 document.getElementById() 快速修复它们的值：

```
<td><input type="text" id="Name" name='Name' value='' ><br></td>
                 <td><input type="text" id="Username" name='UserName' value=''></td>
                 <td><input type="password" id="Password" name='Password'></td> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-17T03:51:39.720

为什么你不使用这样的 jQuery Ajax，我认为这是你工作的非常简单和容易的方法：

**jQuery 代码**

```
 <script language="javascript">
  $(document).ready(function(){
  $("#myHtmlButtonID").bind("click",function(){
       $('#insert_response').html("Just a second...");
       var username = $('#Username').val();
       var name = $('#Name').val();
       var password = $('#Password').val();
       /* add some validation if needed here */
       $.ajax({
                 url: "yourPHPpage.php",
                 data: {
                       name: name,
                       username:username,
                       password: password
                       },
                type: "get",
                success: function(txt){
                      $('#insert_response').html('User added:' + response);
                      },
                error: function(xhr){
                      $('#insert_response').html('Error: - '+xhr.status+ ' '+ xhr.statusText);  
                      }
               });
     });
});
</script> 
```

# mysql - MySql Query Speed Confusion BETWEEN 或许多索引查询

> ID：11177085
> 
> 赞同：2
> 
> 时间：2012-06-24T11:32:26.020
> 
> 标签：mysql, indexing, comparison

我有一种情况，我必须从表中选择一些行....

表有点如下......

```
 id           Name          Age

        0011         name1          45
        0012         name2          67
        .
        . 
        .
        .
        0020         name10         100
        .
        .
        .
        .

         // id is a primary key varchar(4).......
         // name is varchar.....
         // age is int....... 
```

现在我需要得到一个范围内的值，比如`0011 - 0020`or `0020 - 0030`.....我可以生成这个特定范围的开始和结束，我希望你不要考虑......

但我的疑问是

```
 Should I execute 10 SELECT queries based on the index values ? 
```

例如：-

```
 for(i=0;i<10;i++)
           {
                    //SQL Query to SELECT row WHERE id = '0011' LIMIT 0,1 
                    // next time it id to select would be '0012'
            } 
```

***或者***

```
 Should I include a single Query to SELECT ROWS using AND, OR , BETWEEN..etc..with limit 10..??? 
```

哪个更快……？？？

我在第一种情况下感到困惑，一次**只选择一行，**并且**在每个查询中没有太多操作**（其中**10 次请求是恶棍**），而在第二种情况下，只使用**一个**查询，但我相信使用比较运算符在 varchar 主键上提供了开销............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:42:24.277

真正的成本是解析和执行多个查询，而不是获得比您现在需要或现在可能需要的更多的数据。

鉴于您似乎正在分页，例如一次获得十个，您应该立即选择一个完整的页面，中间有一个。

`>= Start and <= End`有时查询优化器可能会比做得更好`between start and end`，但除此之外我看不到问题，除非您的表非常宽（一行中有很多数据）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:28:53.733

可以做sql查询返回一个表的结果 SELECT COUNT(*) FROM table，例如： 1000 并获取页数 $pages=ceil(1000/10);

```
for ($i=0;$i<=$pages:$i++) {
$start=10*$i;
$sql="SELECT MIN(id), MAX(id) FROM TABLE WHERE LIMIT ".$start.",10";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:50:48.190

单个查询是从数据库比较中获取数据的更快方法，使用 for 循环与其他查询比较它们需要很长时间，因为每个查询都有自己的单独执行时间，现在取决于您选择的方式

# java - 当同步方法被锁定时访问类的非同步方法

> ID：11177087
> 
> 赞同：3
> 
> 时间：2012-06-24T11:32:57.737
> 
> 标签：java, multithreading, synchronized

我在一个类中有一个同步方法和一个非同步方法，并且我有一个线程在同步方法上获得锁。

我的问题是：在这种情况下，其他线程可以访问类的非同步方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:36:56.493

是的。如果未声明该方法，其他线程仍可访问该方法`synchronized`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T13:09:51.813

是的，其他线程可以访问非同步方法，但请记住其他线程无法访问您的其他同步方法，因为每个对象而不是每个方法只有一个锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:04:50.700

同步方法只是使用当前实例作为监视器（锁）的同步块的语法快捷方式：

```
public synchronized void abc() {
    //something to do
} 
```

相当于

```
public void abc() {
    synchronized(this) {
        //something to do
    }
} 
```

要运行同步块，线程必须首先获取相应的监视器，在这种情况下`this`，这保证了不能超过一个线程可以同时运行该块。

现在，`this`用作监视器的事实并不能保证同步块之外的任何内容。换句话说，如果您的对象包含非同步方法，它们可以由多个线程同时运行，因为它们不需要正在运行的线程获取`this`监视器。

# jquery - 悬停效果jquery

> ID：11177088
> 
> 赞同：0
> 
> 时间：2012-06-24T11:33:05.677
> 
> 标签：jquery, html, css

我有以下无序列表，我想在不悬停时隐藏并在悬停时显示。

```
<ul class="viewer">
<li><a href=".html">Menu</a></li>
<div>
<ul>
<li><a href=".html">1</a></li>
<li><a href=".html">2</a></li>
<li><a href=".html">3</a></li>
<li><a href=".html">4</a></li>
<li><a href=".html">5</a></li>
</ul>
</div> 
```

CSS如下

```
div ul li {visibility: hidden;} 
```

如您所见，我已将列表项包装在 div 中并将可见性设置为隐藏。

现在根据 jQuery 中的悬停方法，您应该能够在非常简单的基础上将列表项的可见性设置为可见，只需通过

```
$('ul li')

.hover

(function()
{
.css("visibility","visible");
}

),

(function()
{
.css("visibility","hidden");

}); 
```

让我有点不确定的是 $('ul li'). 而且，是否可以像我所做的那样在悬停效果中添加 CSS 功能？我不确定是否应该像我所做的那样将 css 添加到函数中。所有提示都表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:35:01.910

你不需要 jQuery 甚至 JavaScript，只需要使用 CSS 伪类`:hover`。想象一个没有启用 JavaScript 的用户......

```
ul li{
  // style of your list
  visibility: hidden;
}

ul li:hover{
  // style of your list when hovered
  visibility: visible;
} 
```

此外，您不需要将列表包装到`div`此处，除非您有充分的理由这样做，否则不要包装元素。它会减慢您的网站在浏览器中的呈现速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:37:46.683

您也可以尝试使用 hide() 命令。

```
this.hide(); 
```

或者

```
this.show(); 
```

那应该工作^^

要使您自己的脚本正常工作，您应该更改以下内容：

```
.css("visibility","visible"); 
```

进入这个：

```
this.css("visibility","visible"); 
```

# html - Yandex 不关心规范链接标签吗？

> ID：11177090
> 
> 赞同：1
> 
> 时间：2012-06-24T11:33:20.137
> 
> 标签：html, search-engine, google-search, canonical-link

在电子邮件通讯和 Twitter 中，我分享我的主页链接，如下所示： [http ://www.example.com/?utm_source=email&utm_campaign=june](http://www.example.com/?utm_source=email&utm_campaign=june)

为了不创建重复的内容，我将“链接规范”标签放入我的网页中。谷歌很好地解决了它。谷歌将“utm 标记”结果发送到 SERP 的最后一页或不显示它们。

但即使在 SERP 的第一页中，Yandex 也会显示“utm 标记”结果。并一遍又一遍地抓取这些页面。那么 Yandex 不考虑“规范”吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:29:31.650

如果您的站点页面地址包含不影响内容的动态参数（例如会话标识符、用户、引用者等），您可以使用[“Clean-param”指令](http://help.yandex.com/webmaster/?id=1113851#1113859)来描述它们。

要排除`http://www.example.com/?utm_source=email&utm_campaign=june`尝试添加以下行`robots.txt`

```
User-agent: Yandex
Disallow:
Clean-param: utm_source&utm_campaign / 
```

有关更多信息，请查看[文档](http://help.yandex.com/webmaster/?id=1113851#1113859)。

# iphone - 我应该如何将我的 Objective-C 静态库提供给其他人使用？

> ID：11177093
> 
> 赞同：0
> 
> 时间：2012-06-24T11:33:47.780
> 
> 标签：iphone, objective-c, xcode, ipad, static-libraries

我在 XCode 4.3.3 中创建了一个静态库，并将与我的朋友分享。

那么我应该只给他们 libMyLibrary.a 文件或其他任何东西吗？

我还注意到，当我在自己的项目中使用我的静态库时，我必须指定`user header path`指向我的库项目的源文件夹。

那么我也应该给他们 .h 文件吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:52:39.050

您需要提供的最低限度是二进制 ( `libSomeLibrary.a`) 和所有“公共”头文件。您决定哪些标头是公共的，哪些是私有的，为了使用您的类和函数，他们需要将这些标头包含到他们的代码中。

他们需要将`.a`文件和所有`.h`文件添加到他们的项目中，并且他们还需要知道您的库使用哪些框架，以便他们可以链接这些框架。

Xcode 中有一个简洁的功能，您可以在其中向您的项目添加另一个项目并将其设置为依赖项。然后，您的外部项目将首先构建内部项目并链接到它。如果你想分享完整的代码，那么我推荐这种方法。

# opencv - 在opencv中学习后保存KNN分类器

> ID：11177101
> 
> 赞同：6
> 
> 时间：2012-06-24T11:35:19.140
> 
> 标签：opencv

我使用了 OpenCV KNN 分类器，在训练之后我需要保存分类器以便能够在测试阶段使用。我发现这`knn.save()`在 OpenCV 中没有实现。应该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-30T07:15:06.517

在 k-NN 中，因为没有训练，所以没有实现保存和写入。train 方法的作用是只存储所有样本。所以没有“模型”被推断出来，那么除了所有的样本之外什么都不能保存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-27T11:25:13.290

在opencv 3.0中，实现了knn->save("train.yml"),,,

虽然我无法让加载功能正常工作，但您可以使用 FIleStorage 轻松地从文件中读取模型，如上所述，在 knn 中，模型基本上就是特征，所以您总是只需将 Mat 特征存储到文件中，然后再加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T16:14:14.593

太长的评论，所以我在这里发布。***这不是一个完整的解决方案，所以任何知道该怎么做的人：请分享一个更好的答案***

我看过但找不到任何直接的实现。但是，我发现[这个人](http://www.aishack.in/2010/10/k-nearest-neighbors-in-opencv/)（他的博客上有很多好东西）想出了如何阅读[这些经过训练的巨大分类器集，](http://yann.lecun.com/exdb/mnist/)其中包括 K 最近邻。

您也许可以使用他的方法来实现 CvKNearest 的读写。

顺便说一句，如果我对 c++ 的理解是正确的，`save`并且`read`已经为您实现了，那么只有`write`并且`read`实际上需要实现。

* * *

例如`CvBoost::save`：

（升压.cpp）`CvBoost::save`

--> (inner_functions.cpp)`CvStatModel::save`

--> (boost.cpp)`CvBoost::write`

* * *

以同样的方式，您需要添加此功能：

（最近的.cpp）`CvBoost::write`

* * *

抱歉，我找不到更具体的东西。我希望这有帮助。

# c# - 如何在类中存储效果参数？

> ID：11177103
> 
> 赞同：0
> 
> 时间：2012-06-24T11:35:23.287
> 
> 标签：c#, xna, shader, effect

如何`Effect`在类中存储参数？我现在第三天陷入这个问题，我想我会慢慢发疯。

我尝试创建一个名为的类`EffectParameter`，以便我可以动态存储/设置每个对象着色器的参数值。

我尝试存储`ParameterValue`in Object 类型

```
Object ParameterData; 
```

但是我遇到了一个问题，我需要从这门课中阅读……这就是一切都在山下的地方。

该方法`effect.Parameters["parametername"].SetValue()` 只接受几种类型。而且我无法将对象传递给此方法。

所以我尝试投射这个对象。

```
public T ReadData<T>()
{
    return (T)(object)this.ParameterDataVal;
} 
```

但是有了这个我的问题是当我设置它时我需要知道这个对象的具体类型（`Float`等`Texture2D`）

而且我不能使用类型变量来确定这个对象的类型。我尝试使用`(typevariable)(object)this.ParameterDataVal;` 但它只是给了我错误。

我很生气，所以我在网上搜索了动态类型的解决方案。但我没有找到解决我的问题的方法。

然后我意识到也许我在做一件简单的事情。所以我决定用一个`EffectParameter`来存储我的数据。

但是后来我又遇到了另一个问题，当我尝试将此数据设置为效果时……所以我尝试使用一种方法将此参数赋予效果，但我仍然收到错误消息“它是只读的。”。

所以我不能将我的添加`EffectParameter`到集合中。我尝试了很多方法。但没有成功。

我完全迷失了。我不知道还能做什么。

有人遇到过这个问题，或者有人可以为我提供一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T20:48:06.117

解决方案的类：

```
 public class ObjectShader
    {

        public Effect effect;

        public System.Drawing.Image TextureImage;

        public string ShaderName;

        string TechniqueName;

            public ObjectShader(string name,Effect ef)
            {
                this.ShaderName = name;
                this.effect = ef;

            }

            public void SetValue(string name, System.Drawing.Image val)
            {
                this.TextureImage = val;

            }

            public void SetValue(string name,float val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, float[] val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, string val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, Matrix val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, Matrix[] val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, Vector2 val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, Vector2[] val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, Vector3 val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, Vector3[] val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

            public void SetValue(string name, int val)
            {
                this.effect.Parameters[name].SetValue(val);

            }
            public void SetValue(string name, int[] val)
            {
                this.effect.Parameters[name].SetValue(val);

            }

    }
} 
```

# erlang - 我可以在 Erlang 中制作自己的 Guards 吗？

> ID：11177109
> 
> 赞同：10
> 
> 时间：2012-06-24T11:36:08.157
> 
> 标签：erlang, guard

我在网上看到了这段代码：

```
is_char(Ch) ->         
    if Ch < 0 -> false;  
       Ch > 255 -> false;
       true -> true      
    end.

is_string(Str) ->            
    case is_list(Str) of           
    false -> false;           
    true -> lists:all(is_char, Str)
    end. 
```

它是我一直梦寐以求的 Guard，它检查输入是否为字符串——但是，我不允许在 erlang 中使用它，这是为什么呢？有解决办法吗？

我希望能够写出类似的东西：

```
Fun(Str) when is_string(Str) -> Str;
Fun(Int) when is_integer(Int) -> io:format("~w", [Int]). 
```

甚至更好地在消息上使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T11:54:13.737

不允许在警卫中使用用户定义的函数。这是因为守卫中的函数必须没有副作用（例如`io:format`在你的函数中使用）。在守卫中，您仅限于以下内容：

*   用于型式测试的 BIF ( `is_atom`, `is_constant`, `is_float`, `is_integer`, `is_list`, `is_number`, `is_pid`, `is_port`, `is_reference`, `is_tuple`, `is_binary`, `is_function`, `is_record`),
*   布尔运算符 ( `not`, `and`, `or`, `andalso`, `orelse`, `,`, `;`),
*   关系运算符 ( `>`, `>=`, `<`, `=<`, `=:=`, `==`, `=/=`, `/=`),
*   算术运算符 ( `+`, `-`, `*`, `div`, `rem`),
*   位运算符 ( `band`, `bor`, `bxor`, `bnot`, `bsl`, `bsr`),
*   其他无副作用的 BIF ( `abs/1`, `element/2`, `hd/1`, `length/1`, `node/1,2`, `round/1`, `size/1`, `tl/1`, `trunc/1`, `self/0`)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T01:22:09.140

不允许在守卫中使用用户定义函数的另一个原因是守卫中的错误处理方式与“正常”函数中的处理方式不同。在守卫中，错误不会**产生**异常，它只会导致守卫本身失败。

守卫不是真正的表达式，而是*测试*。

# xpath - 从 xml 元素标签中提取值

> ID：11177113
> 
> 赞同：0
> 
> 时间：2012-06-24T11:36:34.380
> 
> 标签：xpath, xquery

我有以下 xquery 表达式用于从 XML 数据库返回特定 CD 的标题

```
String queryString =
                "declare variable $docName as xs:string external;"  + sep +    
                "for $cd in doc($docName)/*/"+"CD[1]"+"/TITLE"+        
                " return $cd/text()";
     XQPreparedExpression expr = conn.prepareExpression(queryString);
     expr.bindString(new QName("docName"), filename,
              conn.createAtomicType(XQItemType.XQBASETYPE_STRING));
     XQResultSequence rs = expr.executeQuery();
     while(rs.next()){
         System.out.println(rs.getObject());
     } 
```

我从此查询获得的输出具有以下格式

```
[#text: 1999 Grammy Nominees] 
```

问题是，如何改进查询以使输出摆脱那个“#text：”的东西，并且只产生 -1999 格莱美提名 -。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:53:34.417

做

```
String queryString =
                "declare variable $docName as xs:string external;"  + sep +    
                "for $cd in doc($docName)/*/"+"CD[1]"+"/TITLE"+        
                " return string($cd)";

XQResultSequence rs = expr.executeQuery();
     while(rs.next()){
         System.out.println(rs.getAtomicValue());
     } 
```

做你想做的事？

# iphone - iPhone 到其他使用 WIFI 的设备

> ID：11177115
> 
> 赞同：1
> 
> 时间：2012-06-24T11:36:49.997
> 
> 标签：iphone, ios, wifi, rfid

我想构建一个 iPhone 应用程序，根据某个无线设备的存在，通过 MAC 地址验证，记录手机的位置。

我已经研究了将蓝牙用于无线设备的可能性，但我不想经历 MFI 程序的痛苦。

我正在为此使用WIFI。iPhone 应用程序会通过建立 TCP/IP 连接并检查设备的 MAC 地址来定期检查硬件是否存在。

我读了一些关于 WIFI RFID 标签的信息，这些标签会定期发布它们的 MAC 地址。iPhone 应用程序是否能够通过使用 adhoc 连接以编程方式连接到这样的设备？

如果 WIFI RFID 不是一个选项，而我最终构建了这样一个可以通过 WIFI 连接的设备，那么问题是一样的，iPhone 应用程序可以与这样的设备建立对等连接吗？

# less - Play 2.0.2-RC2：更少的编译器不适合我（Twitter Bootstrap）

> ID：11177118
> 
> 赞同：2
> 
> 时间：2012-06-24T11:36:59.203
> 
> 标签：less, playframework-2.0

# 目标

我的目标是通过我的 Play 2.x scala 项目让 Twitter Bootstrap 物有所值。因为我不能让它工作，所以我决定开始一个空项目，看看我是否能掌握“少”的窍门。现在这就是我被卡住的地方，因为我似乎无法“少”编译/做任何事情！

## 空项目中的简单复制

*   下载[http://www.playframework.org/download](http://www.playframework.org/download) play-2.0.2-RC2.zip 并将其解压缩到我的 debian linux 机器上。[（为什么play-2.0.2-RC2？因为那里的'less'版本与这里](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/less$20doesnt$20work/play-framework/PjBzAQm65Sw/tSeZkq7yKeMJ)提到的最新的twitter bootstrap兼容。）
*   创建了一个新的播放项目`play new zzz`（zzz=测试项目的名称）。
*   去`zzz/public/stylesheets`添加一个名为的文件`q.less`（它的内容是这个页面上的第一个例子[http://lesscss.org/](http://lesscss.org/)，简单的变量名使用）。
*   因为我每次都在测试很多，所以每次输入：`play clean-all`在每个新的 test/Build.scala/etc 文件更改之前的命令行中。
*   开始`play`并输入：
    *   `reload`（真的不知道为什么）
    *   `compile`（根据：[http](http://www.playframework.org/documentation/2.0.1/AssetsLess) ://www.playframework.org/documentation/2.0.1/AssetsLess ）
    *   （*） 见下文
    *   我 ctrl+d'ed 退出游戏并输入：`find . -name *.css`它并没有在任何地方显示我的 'q.css'。

### 情节变厚了

现在，在阅读了[谷歌群组上的一条消息](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/nilanjan$20play$20compile/play-framework/Qtb3XTn2nJ8/6ZxsXQe3IA8J)后，我发现了两件事：

1.  他暗示 Build.scala 中的 less 编译器只构建某些文件。这对我的空“zzz”测试项目来说不是问题（因为它没有部分 twitter bootstrap less 文件），但我还是添加了这些行来测试：`lessEntryPoints <<= baseDirectory(_ / "app" / "assets" / "stylesheets" ** "q.less")`.
    *   注意：如果我`play-less-entry-points`在游戏控制台中输入，我会得到两个空行，只是说明 '[info]' ...仅此而已。有什么问题吗？
2.  他（和其他人）提到了播放命令`play-copy-assets`和`copy-resources`. 我在“（*）”的上述复制步骤中输入了这些命令。结果相同，没有css文件。

## 编辑：我的“目标”目录列表

我的目标目录列表在测试上述内容之后，在我用`play clean-all`命令行中的“重置”它之前看起来像这样：

```
cache  classes  classes_managed  src_managed 
```

它没有提到的“resource_managed”目录。是否有日志/详细模式我可以查看是否调用了较少的编译器。也许我的测试文件中的语法错误较少？我只是不知道了:)。

## 也许相关，但对我的问题不重要？

也许相关并且可以帮助我理解它......但是：[官方“网站”](https://github.com/playframework/Play20/wiki/Tips)提到在行中使用双“**” `lessEntryPoints`。[在 stackoverflow 上这里](https://stackoverflow.com/questions/10436815/how-to-use-twitter-bootstrap-2-with-play-framework-2-0)使用一个 '*' 而[google 组上的消息](https://groups.google.com/forum/?fromgroups#!searchin/play-framework/nilanjan$20play$20compile/play-framework/Qtb3XTn2nJ8/6ZxsXQe3IA8J)甚至没有使用它。这是如何运作的？

# 我的问题

我想了解我在这里做错了什么。有了这些知识，我确信我能够将 twitter 引导到我的游戏项目中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T12:48:20.733

请确保您的 *.less 文件位于“ **app** /assets/...”文件夹下，而不是“公共”文件夹下。

仅编译位于“app”（和“conf”）文件夹下的文件。

# c# - 如何动态添加删除父控件

> ID：11177124
> 
> 赞同：3
> 
> 时间：2012-06-24T11:37:54.250
> 
> 标签：c#, wpf

我有以下控件：

```
<UserControl >

   <!--<ScrollViewer >-->
       <Viewbox >
           <Canvas/>
       </Viewbox>
   <!--</ScrollViewer>-->

</UserControl> 
```

我想动态添加和删除`ScrollViewer`作为我的`ViewBox`父母（例如，当我点击 a 时`Button`）：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    // Here add or remove ScrollViewer
} 
```

我能怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:03:24.827

假设你`UserControl`的名字是`userControl`：

```
private void Button_Click(object sender, RoutedEventArgs e)
{
    var scrollViewer = userControl.Content as ScrollViewer;
    if (scrollViewer != null)
    {
        var content = scrollViewer.Content;
        scrollViewer.Content = null;
        userControl.Content = content;
    }
    else
    {
        var content = userControl.Content;
        userControl.Content = null;
        userControl.Content = new ScrollViewer { Content = content };
    }
} 
```

为什么设置`Content`to `null`，您可能想知道？因为 WPF 不会让你让一个元素同时成为两个元素的子元素，如果你尝试这样做（例如，只说`userControl.Content = scrollViewer.Content;`），它会立即引发异常。

# oop - 为什么使用类类型时，OCAML 对象中未绑定的类型变量不出现？

> ID：11177125
> 
> 赞同：7
> 
> 时间：2012-06-24T11:37:54.630
> 
> 标签：oop, ocaml

我想了解 OCAML 对象这种行为的原因。假设我有一个类`A`调用另一个类的对象的方法`B`。从原理上讲，A#f 调用 B#g 和 B#h。OOP 中的常规做法是我想避免将 B 用作固定的具体类，而是只为 B 声明一个接口。在 OCAML 中执行此操作的最佳方法是什么？我尝试了几个选项，但我不太明白为什么其中一些有效而另一些无效。以下是代码示例。

版本 1：

```
 # class classA = object
    method f b = b#g + b#h 
   end ;;
 Error: Some type variables are unbound in this type:
     class a : object method f : < g : int; h : int; .. > -> int end
   The method f has type (< g : int; h : int; .. > as 'a) -> int where 'a
   is unbound 
```

这种行为是众所周知的：OCAML 正确推断出`b`具有开放对象类型`<g:int;h:int;..>`，但随后抱怨我的类没有声明任何类型变量。所以似乎*需要*`classA`有类型变量；然后我明确地介绍了一个类型变量。

 *版本 2：

```
 # class ['a] classA2 = object
   method f (b:'a) = b#g + b#h
   end ;;
 class ['a] classA2 :
   object constraint 'a = < g : int; h : int; .. > method f : 'a -> int end 
```

这可行，但该类现在是具有类型约束的显式多态性，如 OCAML 所示。类类型包含类型变量也令人困惑，`'a`但我仍然可以说`let x = new classA2`没有为`'a`. 为什么会这样？

另一个缺点`classA2`是显式类型约束`(b:'a)`包含类型变量。毕竟，我知道它`b`必须符合一个固定的接口而不是一个未知的类型`'a`。我希望 OCAML 验证这个接口确实是正确的。

所以在版本 3 中，我首先将接口声明`classB`为类类型，然后声明它`b`必须是这种类型：

```
 # class type classB = object method g:int method h:int end;;
 class type classB = object method g : int method h : int end
 # class classA3 = object method f (b:classB) = b#g + b#h end;;
 class classA3 : object method f : classB -> int end 
```

这也有效，但我的困惑仍然存在：为什么不再`classA3`需要显式多态性？

问题总结：

*   为什么即使使用类型变量声明也可以在`new classA2`不指定类型的情况下使用？`'a``classA2``'a`
*   为什么`classA3`接受类型约束`(b:classB)`并且不再需要绑定类型变量？
*   的功能是否存在某种微妙的`classA2`差异`classA3`，如果是，如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T12:25:47.097

这会有点复杂，所以请坚持。首先，让我添加一个`classA4`变体，它恰好是您真正需要的。

```
class classA4 = object
  method f : 'a. (#classB as 'a) -> int = fun b -> b#g + b#h
end 
```

类`classA2`，`classA3`和`classA4`都是微妙的不同，区别在于OCaml如何对待类型多态和对象多态。让我们假设两个类`b1`和`b2`实现了该`classB`类型。

就*对象*多态而言，这意味着`b1`可以`classB`使用强制语法将类型表达式强制转换为类型`(new b1 :> classB)`。这种类型强制丢弃了类型信息（你不再知道对象是 type `b1`），所以它必须是显式的。

就*类型*多态而言，这意味着`b1`可以使用类型来代替任何具有约束`#classB`（或`< g : int ; h : int ; .. >`）的类型变量。这不会丢弃任何类型信息（因为类型变量被实际类型替换），因此它由类型推断算法执行。

方法`f`需要`classA3`一个 type 参数`classB`，这意味着强制类型转换：

```
let b = new b1 
let a = new classA3
a # f b (* Type error, expected classB, found b1 *)
a # f (b :> classB) (* Ok ! *) 
```

这也意味着（只要你强制），任何类的实现`classB`都可以使用。

Method `f`of`classA2`需要一个与 constraint 匹配的类型的参数`#classB`，但 OCaml 要求这种类型不应该是未绑定的，因此它是在类级别绑定的。这意味着 的每个实例都`classA2`将接受实现的**单个**任意类型的参数`classB`（并且该类型将被类型推断）。

```
let b1 = new b1 and b2 = new b2
let a  = new classA2 
a # f b1 (* 'a' is type-inferred to be 'b1 classA2' *)
a # f b2 (* Type error, because b1 != b2  *) 
```

重要的是要注意`classA3`等价于`classB classA2`，这就是它不需要绑定类型变量的原因，也是它严格不如 表达性的原因`classA2`。

`f`使用语法为方法`classA4`提供了显式类型，该`'a.`语法在方法级别而不是类级别绑定类型变量。它实际上是一个通用量词，这意味着«可以为任何`'a`实现的类型调用此方法`#classB`»：

```
let b1 = new b1 and b2 = new b2
let a  = new classA4
a # f b1 (* 'a is chosen to be b1 for this call *)
a # f b2 (* 'a is chosen to be b2 for this call *) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T13:48:23.610

有一个比 Victor 稍微简单的解决方案：您不需要`class2`对类型进行参数化，只需使用类 type `classB`：

```
class classA2bis = object
  method f (b: classB) = b#g + b#h
end ;; 
```

Victor 的解决方案 ( `f : 'a . (#classB as 'a) -> int`) 适用于任何作为`classB`. 两者都具有同样的表现力：正如他解释的那样，使用 Victor 的解决方案，使用的类在调用站点被实例化：`a#f b`将适用于任何`b`大于的类型`classB`，通过隐式多态实例化。使用此解决方案，参数必须是确切的 type `classB`，因此如果`b`有更大的 type: ，则必须显式强制它`a#f (b :> classB)`。

因此，两种解决方案都做出了不同的复杂性妥协：使用 Victor 的解决方案，方法定义使用复杂的多态类型，并且调用站点是轻量级的。使用这种同样富有表现力的解决方案，定义更简单，但调用站点必须使用显式强制。由于只有一个定义站点和几个调用站点，因此通常首选在定义方面具有更高的复杂性，这由所谓的专家库设计人员完成。在实践中，您会在野外发现这两种风格，因此了解它们很重要。

一个历史性的评论，回应您在对 Victor 的回复的评论中所说的话：通过显式强制和显式普遍量化的类型变量进行子类型化*并不是*OCaml 的最新添加。查看`Changes`OCaml 发行版的文件；对象系统可以追溯到 OCaml 1.00（大约从 1995 年开始），子类型（带有显式强制转换）从那时起就出现了，并且在 2002 年发布的 OCaml 3.05 中添加了多态方法和结构字段。

**编辑**：评论提示的评论。您也可以使用对象类型注释而不是类类型编写以下内容：

```
class classA2bis = object
  method f (b: < g : int; h : int >) = b#g + b#h
end ;; 
```

我只使用`classB`了您的示例中已经定义的内容，因此使用结构注释并没有多大用处。在这种情况下（类类型用作类型，而不是定义另一个类类型）两者是等价的。它们没有透露*任何*关于作为参数的对象的*实现；*`b`鉴于 OCaml 的对象系统使用结构类型，任何具有这两种方法和正确类型的对象都可以声称适合这种类型注释（可能通过显式子类型步骤）；它可能是由其他人定义的，绝对没有参考您自己的类定义。

在 ocaml 对象系统中，对象类型和类类型之间存在相对细微的区别，我不太了解——我不使用面向对象的编程。如果您愿意，可以在[参考手册](http://caml.inria.fr/pub/docs/manual-ocaml/manual005.html)或[U3 书中](http://caml.inria.fr/pub/docs/u3-ocaml/ocaml-objects.html)了解详细信息。

**编辑 2**：请注意，`#classB as 'a`并且*通常*`classB`不具有同等的表达能力：当您想要表达类型的不同出现之间的共享时，第一个更复杂的公式很有用。例如，是与 . 非常不同的类型。它严格来说更通用，因为它严格保留了有关返回类型的更多信息。但是，在您的情况下，这两种类型都是等价的，因为类类型只出现一次，因此没有潜在的共享。*`'a . (#foo as 'a) -> 'a``foo -> foo`**

# java - jTextPane、NetBeans 中的 text/html

> ID：11177126
> 
> 赞同：2
> 
> 时间：2012-06-24T11:37:57.750
> 
> 标签：java, swing, netbeans, hyperlink, jtextpane

我今天开始使用 NetBeans，一切都很顺利，直到我遇到了这个问题。

我正在尝试使我的 jTextPane 格式化我在其中的任何 HTML。我尝试更改代码中的内容类型，`jTextPane1.setContentType("text/html");`但无济于事。我也尝试将设计窗口中的属性更改为相关值，但也没有运气。

经过一番谷歌搜索，我看到 Netbeans 之前有一个错误，无法正确启用 text/html 内容，但已经解决了几个版本。

有什么想法可以在窗格中启用 html 吗？甚至只是让超链接工作的另一种方式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T12:33:09.727

我将 JEditorPane 用于完全相同的目的。只需将 ContentType 设置为“text/html”，就像你已经做的那样，你就可以开始了。

要包含一些预定义的样式表，我使用以下代码：

```
editorPane.setContentType("text/html");
HTMLEditorKit kit = new HTMLEditorKit();
editorPane.setEditorKit(kit);
File cssfile = new File("src/Assets/code.css");

StyleSheet styleSheet = kit.getStyleSheet();
styleSheet.importStyleSheet(cssfile.toURI().toURL());

editorPane.setText("<html><head></head><body><pre></pre></body></html>"); 
```

您可以使用 setEditable(false) 以便无法更改 HTML。

刚刚使用 Netbeans 7.2 beta 进行了尝试，它与 JTextPane 的工作方式相同。

这里有更多关于它的文档：http: [//docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#recap](http://docs.oracle.com/javase/tutorial/uiswing/components/editorpane.html#recap)

# ios - UITableView 数据源

> ID：11177128
> 
> 赞同：0
> 
> 时间：2012-06-24T11:38:40.773
> 
> 标签：ios, uitableview, datasource

我有一个表格视图和一个数组源。当我在 viewDidLoad 方法中初始化数组时，tableview 会显示数组中的数据。当我从 Internet 上的 XML 数据的 URL 填充数组时，该表给出了错误。因为它首先运行 numberOfRowsInSection 函数但数组还没有准备好。如何在初始化从 Internet 加载数据的数组后运行表方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:45:11.473

您首先从 0 返回 0 `numberOfRowsInSection`，直到您的数组被填充，当数组被正确填充时，您调用`[tableView reloadData];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T11:45:28.363

数据返回给您后，请`reloadData`在桌子上调用。它将通过再次调用数据源方法来响应。

# javascript - 通过javascript查找元素时出错

> ID：11177132
> 
> 赞同：0
> 
> 时间：2012-06-24T11:39:31.737
> 
> 标签：javascript, dom

`<div id="bannersize"></div>`除非我在 javascript 之前编写，否则此脚本找不到“bannersize” 。

错误信息：

> 错误“未捕获的 TypeError：无法将属性 'innerHTML' 设置为 null”

我的代码片段：

```
<script> 
function dropbox(menu){
    this.tmpmenu = document.getElementById(menu);
    this.tmpmenu.innerHTML = 'Hello'+this.tmpmenu;
}
bannersize = new dropbox('bannersize'); 
</script>
<div id="bannersize"></div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:41:44.180

它找不到它，因为在执行代码时该元素不在 DOM 中。一旦浏览器看到`</script>`结束标记，就会执行脚本块。您的代码在元素之前，因此当它运行时，HTML 解析器将不会遇到您正在寻找的具有“id”的元素。

将您的代码放在元素*之后*，或者在文档的“加载”事件处理程序中运行它。

# java - Java 窗口为空

> ID：11177135
> 
> 赞同：2
> 
> 时间：2012-06-24T11:40:08.403
> 
> 标签：java, swing

我有一个奇怪的问题。我创建了这个窗口，但它是空白的，直到我最小化它并再次最大化它。这是个常见的问题吗？这是我的代码（对不起，因为代码很长......我只删除了动作监听器，我担心我可以删除错误）。

```
public class Gui_preferences extends JFrame{
private static final long serialVersionUID = -2375617814937747645L;
private JTextField savingPathField;
private JTextField schoolField;
private JTextField classStageField;
private JFormattedTextField classdurationField;
private FunctionsSchedule fkSchedule;
JFormattedTextField schoolbeginningformattedTextField;
boolean firstopening;
JLabel notClosingLabel;
private JTextField formsFolderNameField;
private JTextField subjectsFolderNameField;

public Gui_preferences(boolean first, FunctionsSchedule fktSchedule) {
    this.fkSchedule = fktSchedule;
    setPreferredSize(new Dimension(650, 420));
    setSize(650, 420);
    setResizable(false);
    setAlwaysOnTop(true);
    setLocationRelativeTo(null);
    setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    setVisible(true);

    JScrollPane scrollPane = new JScrollPane();
    getContentPane().add(scrollPane, BorderLayout.CENTER);

    JPanel panel = new JPanel();
    panel.setPreferredSize(new Dimension(500, 420));
    panel.setMinimumSize(new Dimension(500, 420));
    scrollPane.setViewportView(panel);
    panel.setLayout(new MigLayout("", "[][][grow][][][]", "[11.00][][12.00][][16.00][][17.00][][18.00][][16.00][24.00][15.00][24.00][15.00][][19.00][]"));

    JLabel savingPathLabel = new JLabel("New label");
    panel.add(savingPathLabel, "cell 0 1");

    savingPathField = new JTextField();
    savingPathField.setEditable(false);
    panel.add(savingPathField, "cell 2 1,growx");
    savingPathField.setColumns(10);

    JButton newSavingPath = new JButton("New button");
    panel.add(newSavingPath, "cell 4 1");

    JLabel school = new JLabel("New label");
    panel.add(school, "cell 0 3");

    schoolField = new JTextField();
    schoolField.addFocusListener(new FocusAdapter() {
    panel.add(schoolField, "cell 2 3,growx");
    schoolField.setColumns(10);

    JLabel classStage = new JLabel("New label");
    panel.add(classStage, "cell 0 5");
    classStageField = new JTextField();
    panel.add(classStageField, "cell 2 5,growx");
    classStageField.setColumns(10);

    JLabel classduration = new JLabel("New label");
    panel.add(classduration, "cell 0 9");

    classdurationField = new JFormattedTextField(createFormatter("###"));
    panel.add(classdurationField, "cell 2 9,growx");
    classdurationField.setColumns(10);

    JLabel schoolbeginning = new JLabel("New label");
    panel.add(schoolbeginning, "cell 0 7");

    schoolbeginningformattedTextField = new JFormattedTextField(createFormatter("##:##"));
    panel.add(schoolbeginningformattedTextField, "cell 2 7,growx");

    JLabel TrayIcon = new JLabel("New label");
    panel.add(TrayIcon, "cell 0 11");

    JCheckBox TrayIconCheckBox = new JCheckBox("New check box");
    panel.add(TrayIconCheckBox, "cell 2 11");

    JLabel otherFolderName = new JLabel("New label");
    panel.add(otherFolderName, "cell 0 13");

    formsFolderNameField = new JTextField();
    panel.add(formsFolderNameField, "cell 2 13,growx");
    formsFolderNameField.setColumns(10);

    JLabel subjectsFolderName = new JLabel("New label");
    panel.add(subjectsFolderName, "cell 0 15");

    subjectsFolderNameField = new JTextField();
    panel.add(subjectsFolderNameField, "cell 2 15,growx");
    subjectsFolderNameField.setColumns(10);

    notClosingLabel = new JLabel("New label");
    notClosingLabel.setFont(new Font("Tahoma", Font.PLAIN, 13));
    panel.add(notClosingLabel, "cell 2 17");

    //own code
    firstopening = first;
    //Labels & Co get the names
    savingPathLabel.setText(NonserData.exprs.getString("saving_Path")+": ");
    school.setText(NonserData.exprs.getString("school")+": ");
    classStage.setText(NonserData.exprs.getString("classStage")+": ");
    classduration.setText(NonserData.exprs.getString("classduration")+": ");
    TrayIcon.setText(NonserData.exprs.getString("TrayIcon")+": ");
    schoolbeginning.setText(NonserData.exprs.getString("schoolbeginning")+": ");
    TrayIconCheckBox.setText(NonserData.exprs.getString("enabled"));
    newSavingPath.setText(NonserData.exprs.getString("choose"));
    otherFolderName.setText(NonserData.GUI.getString("forms_folder_name")+": ");
    subjectsFolderName.setText(NonserData.GUI.getString("subject_Folder_name")+": ");

    //Checkbox activation/deactivation
    TrayIconCheckBox.setSelected(SerData.trayIconenabled);

    notClosingLabel.setEnabled(false);
    if(first)
    {
        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);
        notClosingLabel.setEnabled(true);
        notClosingLabel.setText(NonserData.GUI.getString("not_cosing_before_filled"));
    }
    if(!first)
    {
        notClosingLabel.setVisible(false);
        notClosingLabel.setEnabled(false);
    }
    fillTextBoxes();
    repaint();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T11:45:24.930

`setVisible(true);`一旦所有组件都添加到表单中，您就应该调用而不是之前。另外，在最后删除多余的`repaint()`调用。

**编辑**添加了安德鲁的评论。请注意，`pack()`或`validate()`应该在之前调用`setVisible(true)`以获取可靠布局的 GUI。**谢谢@安德鲁汤普森**

# iphone - 我在 XCode 中的项目产品在哪里？

> ID：11177136
> 
> 赞同：0
> 
> 时间：2012-06-24T11:40:09.260
> 
> 标签：iphone, objective-c, xcode, ipad

我已经在 XCode 4.3.3 的工作区中设置了一个应用程序项目和一个静态项目，没问题。

但是，我发现我所有的产品都是红色的。我明白这`red`意味着我没有这些产品，对吧？

但我仍然可以运行它们并测试它们。

这是屏幕截图：

![在此处输入图像描述](../Images/e0018f2aa81f70d19121fa4d8f41ee18.png)

问题出在哪里？他们在哪里？为什么他们在`red`我还在运行他们的时候？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:45:25.483

产品仅在您为设备构建时显示。如果您只是为模拟器构建，那么它们将保持红色。

但是，您可以导航到构建文件夹：

文件 -> 项目设置 -> 高级... ->（单击工作表底部的 2 个箭头链接）

# assembly - 为什么 32 位寄存器上的 x86-64 指令会将完整 64 位寄存器的上部归零？

> ID：11177137
> 
> 赞同：155
> 
> 时间：2012-06-24T11:40:16.040
> 
> 标签：assembly, x86, x86-64, cpu-registers, zero-extension

在[x86-64 Tour of Intel Manuals](http://x86asm.net/articles/x86-64-tour-of-intel-manuals/)中，我阅读了

> 也许最令人惊讶的事实是，诸如`MOV EAX, EBX`自动将寄存器的高 32 位归零之类的指令`RAX`。

同一来源引用的英特尔文档（3.4.1.1 General-Purpose Registers in 64-Bit Mode in manual Basic Architecture）告诉我们：

> *   64 位操作数在目标通用寄存器中生成 64 位结果。
> *   32 位操作数生成 32 位结果，在目标通用寄存器中零扩展为 64 位结果。
> *   8 位和 16 位操作数生成 8 位或 16 位结果。目标通用寄存器的高 56 位或 48 位（分别）不会被操作修改。如果 8 位或 16 位操作的结果用于 64 位地址计算，则将寄存器显式符号扩展为完整的 64 位。

在 x86-32 和 x86-64 汇编中，16 位指令如

```
mov ax, bx 
```

不要表现出这种eax的高位字归零的“奇怪”行为。

因此：引入这种行为的原因是什么？乍一看似乎不合逻辑（但原因可能是我习惯了 x86-32 汇编的怪癖）。

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-06-24T11:53:08.200

我不是 AMD 或为他们说话，但我会以同样的方式做到这一点。因为将高半部分归零不会产生对先前值的依赖，所以 CPU 将不得不等待。如果不这样做，寄存器重命名机制基本上会被打败[。](https://en.wikipedia.org/wiki/Register_renaming)

这样，您可以在 64 位模式下使用 32 位值编写快速代码，而不必一直显式地破坏依赖关系。如果没有这种行为，64 位模式下的每条 32 位指令都必须等待之前发生的事情，即使几乎永远不会使用高位部分。（制作`int`64 位会浪费缓存占用空间和内存带宽；[x86-64 最有效地支持 32 位和 64 位操作数大小](https://stackoverflow.com/questions/38303333/the-advantages-of-using-32bit-registers-instructions-in-x86-64)）

8 位和 16 位操作数大小的行为很奇怪。依赖疯狂是现在避免使用 16 位指令的原因之一。x86-64 从 8086 的 8 位和 386 的 16 位继承了这一点，并决定让 8 位和 16 位寄存器在 64 位模式下的工作方式与在 32 位模式下的工作方式相同。

* * *

另请参阅[为什么 GCC 不使用部分寄存器？](https://stackoverflow.com/questions/41573502/why-doesnt-gcc-use-partial-registers)有关实际 CPU 如何处理对 8 位和 16 位部分寄存器的写入（以及随后读取完整寄存器）的实际细节。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-24T11:50:14.067

它只是节省了指令和指令集的空间。您可以使用现有（32 位）指令将小的立即数移动到 64 位寄存器。

它还使您不必为 8 个字节的值编码`MOV RAX, 42`，什么时候`MOV EAX, 42`可以重用。

这种优化对于 8 位和 16 位操作并不那么重要（因为它们更小），并且更改那里的规则也会破坏旧代码。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-03-31T19:20:08.923

如果不将零扩展到 64 位，则意味着读取的指令`rax`对其`rax`操作数（写入`eax`的指令和`rax`之前写入的指令）有 2 个依赖项，这将导致[部分寄存器停顿](https://stackoverflow.com/questions/49867597/what-is-a-partial-flag-stall/65914478#65914478)，开始得到当有 3 种可能的宽度时会很棘手，因此它会有所帮助`rax`并`eax`写入完整的寄存器，这意味着 64 位指令集不会引入任何新的部分重命名层。

```
mov rdx, 1
mov rax, 6
imul rax, rdx
mov rbx, rax
mov eax, 7 //retires before add rax, 6
mov rdx, rax // has to wait for both imul rax, rdx and mov eax, 7 to finish before dispatch to the execution units, even though the higher order bits are identical anyway 
```

非零扩展的唯一好处是确保包含 的高阶位`rax`，例如，如果它最初包含 0xffffffffffffffff，则结果将是 0xffffffff00000007，但 ISA 几乎没有理由以这样的代价做出此保证，并且更有可能实际上需要更多零扩展的好处，因此它节省了额外的代码行`mov rax, 0`。通过保证它总是零扩展到 64 位，编译器可以在考虑到这个公理的同时在 中工作`mov rdx, rax`，`rax`只需要等待它的单个依赖项，这意味着它可以更快地开始执行并退出，从而释放执行单元。此外，它还允许更有效的零习语，如`xor eax, eax`零`rax`，而不需要 REX 字节。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-04-26T18:59:33.537

从硬件的角度来看，更新半个寄存器的能力总是有些昂贵，但在最初的 8088 上，允许手写汇编代码将 8088 视为具有两个非堆栈相关的 16 位寄存器和八个 8 位寄存器，六个非堆栈相关的 16 位寄存器和零个 8 位寄存器，或 16 位和 8 位寄存器的其他中间组合。这样的用处值得付出额外的代价。

当 80386 添加 32 位寄存器时，没有提供仅访问寄存器上半部分的工具，但类似这样的指令`ROR ESI,16`将足够快，以便能够在 ESI 中保存两个 16 位值和在它们之间切换。

随着向 x64 架构的迁移，增加的寄存器集和其他架构增强减少了程序员将最大量的信息压缩到每个寄存器中的需要。此外，寄存器重命名增加了进行部分寄存器更新的成本。如果代码要执行以下操作：

```
 mov rax,[whatever]
    mov [something],rax
    mov rax,[somethingElse]
    mov [yetAnother],rax 
```

寄存器重命名和相关逻辑可以让 CPU 记录加载的值`[whatever]`需要写入的事实，`something`然后——只要最后两个地址不同——允许加载`somethingElse`和存储到`yetAnother`无需等待实际读取数据即可进行处理`whatever`。但是，如果第三条指令是`mov eax,[somethingElse`，并且它被指定为不影响高位，则第四条指令在第一次加载完成之前无法存储 RAX，即使允许加载`EAX`也很困难，因为处理器必须跟踪这样一个事实，即虽然下半部分可用，但上半部分不可用。

# php - MySQL SELECT 具有相同列值的数据库条目

> ID：11177138
> 
> 赞同：-1
> 
> 时间：2012-06-24T11:40:17.427
> 
> 标签：php, mysql

我有闲置的数据库表'table_name'：

```
+----+---------+--------------+
| ID | user_id | meta_key1    |
+----+---------+--------------+
|  1 |       1 |    d         |
|  2 |       1 |    f         |
|  3 |       1 |    c         | 
|  4 |       2 |    g         | 
|  5 |       3 |    1         |
|  6 |       3 |    2         |
|  7 |       4 |    4         | 
|  8 |       4 |    5         | 
|  9 |       4 |    5         |
| 10 |       4 |    5         |
+----+---------+--------------+ 
```

我想从 user_id = '1' 的所有条目中选择 *。

我现在使用的代码只返回第一个值：

```
$query = mysql_query("SELECT * FROM table_name WHERE user_id='1'");
$row = mysql_fetch_assoc($query);

while($row){
    return $row["meta_key1"];
} 
```

结果始终是 table_name 中 user_id='(given_id)' 的第一个条目：

```
d 
```

虽然我想要这个结果：

```
d
f
c 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T11:41:56.010

您需要不断地在循环中获取一行以获取结果中的每一行，类似于以下内容：

```
while( $row = mysql_fetch_assoc($query)){
    echo $row["meta_key1"];
} 
```

既然你在做`return $row['meta_key1']`，只要第一行被提取，函数就会返回一个值。因此，如果您在函数中使用它，则需要构建一个数组来获取所有值：

```
$return = array();
while( $row = mysql_fetch_assoc($query)){
    $return[] = $row["meta_key1"];
}
return $return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:43:02.403

将您的代码更改为：

```
while($row = mysql_fetch_assoc($query);){
    echo $row["meta_key1"];
} 
```

目前，您只调用`mysql_fetch_assoc`一次。每次需要下一行时都需要调用它。

# php - 如何检索被朋友标记为一张相册的facebook照片

> ID：11177144
> 
> 赞同：0
> 
> 时间：2012-06-24T11:41:08.890
> 
> 标签：php, facebook

我正在尝试使用 php 从 facebook 检索每个相册。我有 user_photos 和 friends_photos 权限。我设法检索所有相册及其照片，但我无法检索任何被朋友标记的照片。

我对 Facebook 应用程序很陌生。谁能告诉我如何检索所有标记的照片？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T11:52:35.220

您最好的解决方案可能是 fql。

```
SELECT pid FROM photo_tag WHERE subject=$uid 
```

会给你一个标签是一个人的照片列表。所以你需要说“给我这些人”然后“给我他们被标记的照片”然后“给我相册（如果你有权限的话）。现在你可以使用多查询选项在一个查询中做到这一点（http://developers.facebook.com/docs/reference/fql/）

运行 FLQ 的最简单方法是使用 facebook PHP SDK：

```
$result = $facebook->api(array( 
    'query' => "SELECT pid FROM photo_tag WHERE subject=$uid",  
    'method' => 'fql.query')); 
```

但是您也可以使用图形运行

```
'https://api.facebook.com/method/fql.query?query=' . urlencode("SELECT pid FROM photo_tag WHERE subject=$uid")   (remembering to add the other parameters) 
```

# javascript - Javascript中的空填充字符串

> ID：11177153
> 
> 赞同：1
> 
> 时间：2012-06-24T11:42:26.757
> 
> 标签：javascript

所以我正在尝试在 JavaScript 中实现 NT 和 Lan Manager 哈希（是的，我不知道它的最佳语言选择！）但它用于一个简单的静态网页，其中不可能回发 - 所以没有 PHP 或 . NET 或 Java。

我遇到的问题是协议的第一部分，基本上你必须确保密码是 14 个字符，如果超过 14 个你需要修剪（简单），但是如果它低于 14，你需要空填充密码字符串使其达到十四个字符。

JavaScript 中一个空值如何填充一个字符串？

请注意，我不是在问如何在 Javascript 中对字符串进行零填充。

（还有一个额外的问题，如果有人知道 JS 中有任何预制的 NT 或 LM 哈希库，我真的很感激你的提醒！）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T11:50:36.963

```
function nullpad( str, len ) {
    if( str.length >= len ) {
        return str;
    }

    return str + Array( len-str.length + 1 ).join("\x00");
}

nullpad( "", 15 ).length
//15

nullpad( "asd", 15 ).length
//15 
```

# php - CakePHP 在 Controller::redirect 中传递参数

> ID：11177154
> 
> 赞同：4
> 
> 时间：2012-06-24T11:42:29.790
> 
> 标签：php, cakephp, redirect, cakephp-2.0

在进行重定向的控制器操作中，我使用了这个：

```
$this->redirect(array('controller' => 'tools', 'action' => 'index')); 
```

或这个

```
$this->redirect('/tools/index'); 
```

当我通过重定向传递数据时，我使用这个：

```
$this->redirect('tools/index/?myArgument=12'); 
```

但我找不到如何通过“this-redirect-array”表示法传递“myargument”。
我不想使用它，因为一些路由问题：

```
$this->redirect(array('controller' => 'tools', 'action' => 'index', "myArgument")); 
```

我需要这样的东西：

```
$this->redirect(array('controller' => 'tools', 'action' => 'index', "?myArgument=12")); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-25T15:22:21.050

Cake 确实支持使用问号的查询参数，如下所示：

```
$this->redirect(array(
    'controller' => 'tools', 'action' => 'index', '?' => array(
        'myArgument' => 12
    )
)); 
```

[http://book.cakephp.org/2.0/en/development/routing.html#reverse-routing](http://book.cakephp.org/2.0/en/development/routing.html#reverse-routing)

但就像des说的那样做会更好：

```
$this->redirect(array(
    'controller' => 'tools', 'action' => 'index', 'myArgument' => 12
)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T11:48:25.037

这应该有效：

```
$this->redirect(array('controller' => 'tools', 'action' => 'index', 'myArgument' => 12)); 
```

看看[CakePHP Cookbook - Controller::redirect](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aredirect)

[访问请求参数](http://book.cakephp.org/2.0/en/controllers/request-response.html#accessing-request-parameters)：

```
$this->request['myArgument'];
$this->request->myArgument;
$this->request->params['myArgument']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-20T03:05:56.157

使用它来重定向：

```
$this->redirect(array('controller' => 'tools', 'action' => 'index', 'myArgument' => 12)); 
```

和 Router::connectNamed() 到 router.php 以将分隔符从“：”更改为“=”：

```
Router::connectNamed(
    array('myArgument' => array('action' => 'index', 'controller' => 'tools')), array('default' => false, 'greedy' => false, 'separator' => '=') 
```

);

# java - 我需要删除零，java

> ID：11177156
> 
> 赞同：0
> 
> 时间：2012-06-24T11:42:33.143
> 
> 标签：java, binary, decimal

我有这个源代码：（这是我的作业）。创建一个程序，将数字从十进制转换为二进制。我马上就好。

```
package binek;

import java.io.BufferedReader; 
import java.io.IOException;        
import java.io.InputStreamReader;

public class Binek {
    public static void main(String[] args) {
         String cislo;  
         int vypocet=1;
         int zbytek=1;
         int a=0;

         BufferedReader in;
         in = new BufferedReader(new InputStreamReader(System.in));
         try{ cislo = in.readLine(); }
         catch(IOException e) {cislo="";} 
         int dec=Integer.valueOf(cislo); 
         int[] pole = new int[10];
         vypocet=dec/2;
         zbytek=dec%2;
         pole[0]=zbytek;

         while(vypocet!=0){
             a++;
             zbytek=vypocet%2;
             vypocet=vypocet/2;

             pole[a]=zbytek;
         }

         for (int i = 9; i < pole.length; --i)
         {
            System.out.print (pole[i]);
         } // here is the field with unnecessary zeros
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T11:55:12.350

你的循环是错误的：你从数组的末尾开始检查数组索引是否小于数组长度——它总是小于那个。所以你得到一个 ArrayIndexOutOfBoundsException。这是修正后的循环，去掉了前导零：

```
boolean leadingZeros = true;
for (int i = pole.length; i > 0; i--) {
  if (leadingZeros && pole[i-1] == 0) continue; else leadingZeros = false;
  System.out.print(pole[i-1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:00:52.337

我建议你使用[Integer.toBinaryString(int)](http://download.oracle.com/javase/1.5.0/docs/api/java/lang/Integer.html#toBinaryString%28int%29)和 convert 方法会是这样的

```
public void convertToBinary(int decimal){
   System.out.println("Decimal value is " + decimal);
   System.out.println("Binary value is " + Integer.toBinaryString(decimal)); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:12:43.563

```
for(i=polelength-1;i>=0;i--){

    if(pole[i] != 0) break;           
}

for(;i>=0;i--)
    System.out.print(pole[i]); 
```

# ruby-on-rails - 如何将带有新行的字符串转换为 HTML 列表？

> ID：11177164
> 
> 赞同：1
> 
> 时间：2012-06-24T11:43:34.197
> 
> 标签：ruby-on-rails

我有一个多行的字符串。例子：

```
string = "line1\nline2\nline3" 
```

我需要在我的页面上以 HTML 无序列表的形式打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:34:55.413

您可以使用@LeonidLukin 建议的String#each_line 或@jcubic 建议的String#split + Array#join。与 jcubic 的解决方案相比，我更喜欢以下解决方案，因为他的代码最后会创建一个空行项目：

```
<ul>
  <% string.each_line do |line| %>
    <li><%= line.chomp %></li>
  <% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T09:23:44.513

谢谢大家！我是这样做的：

```
<ul>
<%
   string = "line1\nline2\nline3"
   lines = string.split("\n")
   lines.each do |line|
%>
  <li><%= line %></li>
<% end %>
</ul> 
```

但现在我想尝试使用`String.html#method-i-each_lin`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T12:06:01.350

与 split+join 的答案相同，只有您可以使用 gsub：

```
"<ul><li>"+"line1\nline2\nline3".gsub("\n", "</li><li>")+"</li></ul>" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T11:50:17.100

在 Ruby 中，我会这样做：

```
"<ul><li>" + ("line1\nline2\nline3".split("\n").join("</li><li>")) + "</li></ul>" 
```

# maven-2 - Maven Deployment on Multiple Containers

> ID：11177171
> 
> 赞同：0
> 
> 时间：2012-06-24T11:44:37.673
> 
> 标签：maven-2, junit, glassfish

I would like to know how I define multiple containers in Maven, one for development and debugging and one for production. For instance:

1.  Embedded Glassfish with JUnit dependencies
2.  Deploying on Glassfish Server with no tests (no auto deploy is required, I just make a manual copy to the domain).

So when I shall run the JUnit tests, I would do something like:

```
mvn test -P junit 
```

And for build a package to deploy

```
mvn package -P webapp 
```

I am writing example with the -P switch, since I have come up with this pom.xml so far:

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>se.while</groupId>
    <artifactId>project</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>project Maven Webapp</name>
    <url>http://maven.apache.org</url>

    <profiles>
        <profile>
            <id>junit</id>
            <dependencies>
                <dependency>
                    <groupId>junit</groupId>
                    <artifactId>junit</artifactId>
                    <version>4.8.1</version>
                    <scope>test</scope>
                </dependency>               
                <dependency>
                    <groupId>org.glassfish.main.extras</groupId>
                    <artifactId>glassfish-embedded-all</artifactId>
                    <version>3.1.2</version>
                    <scope>provided</scope>
                </dependency>
            </dependencies>
        </profile>
        <profile>
            <id>webapp</id>
            <dependencies>
                <dependency>
                    <groupId>org.eclipse.persistence</groupId>
                    <artifactId>javax.persistence</artifactId>
                    <version>2.0.0</version>
                </dependency>
                <dependency>
                    <groupId>org.eclipse.persistence</groupId>
                    <artifactId>eclipselink</artifactId>
                    <version>2.3.2</version>
                </dependency>
                <dependency>
                    <groupId>javax.faces</groupId>
                    <artifactId>jsf-api</artifactId>
                    <version>2.1</version>
                    <scope>provided</scope>
                </dependency>
                <dependency>
                    <groupId>org.glassfish</groupId>
                    <artifactId>javax.ejb</artifactId>
                    <version>3.1</version>
                    <scope>provided</scope>
                </dependency>
                <dependency>
                    <groupId>org.primefaces</groupId>
                    <artifactId>primefaces</artifactId>
                    <version>3.3.1</version>
                </dependency>
            </dependencies>

        </profile>
    </profiles>

    <dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.jboss.arquillian</groupId>
                <artifactId>arquillian-bom</artifactId>
                <version>1.0.1.Final</version>
                <scope>import</scope>
                <type>pom</type>
            </dependency>
        </dependencies>
    </dependencyManagement>

    <repositories>
        <repository>
            <id>EclipseLink Repo</id>
            <url>http://www.eclipse.org/downloads/download.php?r=1&amp;nf=1&amp;file=/rt/eclipselink/maven.repo</url>
            <!-- use this for javax.persistence <snapshots> <enabled>true</enabled></snapshots> -->
        </repository>

        <repository>
            <id>prime-repo</id>
            <name>PrimeFaces Maven Repository</name>
            <url>http://repository.primefaces.org</url>
            <layout>default</layout>
        </repository>
    </repositories>

    <build>
        <finalName>project</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

I have now 2 problems (at least):

1.  The tests seems to working with the "mvn test -P junit" but when I do "mvn package -P webapp" Maven seems to run the tests again (with no container I assume nor the junit dependency).
2.  The Eclipse IDE lint checker does indicate errors in source code depending on activated profile. For instance, if I active the webapp profile, all the test classes will be error marked.

Can you please guide me?

Best regards

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:55:35.843

add to this

```
<plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12</version>
        <configuration>
          <skipTests>${skip.junit.tests}</skipTests>
        </configuration>
      </plugin> 
```

to **webapp** profile add

```
<properties>
   <skip.junit.tests>true</skip.junit.tests>
</properties> 
```

to **junit** profile add

```
<properties>
   <skip.junit.tests>false</skip.junit.tests>
</properties> 
```

# c - 以独立于平台的方式在 C 中使用线程和套接字

> ID：11177175
> 
> 赞同：5
> 
> 时间：2012-06-24T11:45:23.313
> 
> 标签：c, multithreading, sockets

我需要编写一个使用线程和套接字的程序。对于不同的平台（Linux、Windows、Mac），最好的方法是什么。

我知道 POSIX，但 Win 上没有 POSIX。

是否有任何库以独立于平台的方式处理它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T12:37:27.733

如果你真的想要 C（不是 C++），我建议在非 Windows 平台上使用标准的 POSIX 线程，在 Windows 上使用[pthreads-win32](http://sources.redhat.com/pthreads-win32/)。它支持 32 位和 64 位，MSVC 和 MinGW。它的当前版本（2.9.1）仅在一个月前发布，因此该项目正在积极维护中。[在 github](https://github.com/GerHobbelt/pthread-win32)上还有一个fork，在 MSVC2010 项目中有一些修复。

如果 C++ 也是一个选项，我会选择 boost，因为它是标准 c++ 发展的地方（`std::thread`c++11 中的设计是从 等演变而来`boost::thread`）

对于您问题的网络部分，`boost::asio`如果 C++ 适合您，那么它是最佳选择，否则在 C 中看不到任何可比性。特别是Windows 上的`boost::asio`支持`I/O Completion Ports (IOCP)`，这对性能至关重要。`boost::asio`需要一些时间来学习，但在我个人看来，花每一分钟阅读文档（这很棒）和使用示例都是值得的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:01:00.733

您可以尝试使用[Qt](http://qt-project.org/downloads) (C++) 作为包装器，它具有用于线程和网络的跨平台库；除非你的项目必须是 100% C.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:02:10.500

您可以使用**boost** (C++)：[asio](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio.html) - 用于异步输入输出，[threads](http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html) - 用于平台独立线程

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T13:20:59.403

新的 C 标准 C11 带有线程支持。AFAIK 目前还没有 C11，但是有线程部分的实现（包装器）。在 POSIX 系统上，您可以在 pthread 上使用我在[P99](http://p99.gforge.inria.fr/p99-html/group__threads.html)中的包装器，这应该为您提供 Linux 和 Mac。在 Windows 系统上，至少有来自 Dinkumware 的参考实现，它产生了标准中定义的 API。

使用 C11 将为您提供“面向未来”的统一线程 API。

对于socket，我的印象是BSD的socket接口在windows中也是比较直接的提供，但是我没有在那个平台上编程的经验。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T12:10:12.903

在 codeproject 上有一个称为 XP 线程的 C++ 类。 [http://www.codeproject.com/Articles/15983/Cross-Platform-Threads](http://www.codeproject.com/Articles/15983/Cross-Platform-Threads)
您需要将 ifdef 从 mach 更改为 ifndef win32/64

我将它用于我的 OpenArena 瞄准机器人，教程包括修改后的 XP-Threads 类： [http ://aimbots.net/tutorials/19992-audio-killspam.html](http://aimbots.net/tutorials/19992-audio-killspam.html)

您需要做的就是对它进行去“分类”以便在 C 中使用。

你可以在这里看到最终结果，顺便说一句:)
[http://www.youtube.com/watch?v=nyJ8aM52ykE](http://www.youtube.com/watch?v=nyJ8aM52ykE)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-24T12:13:08.060

对于 Windows，您可以使用 Win32 的 CreateThread API： http: [//msdn.microsoft.com/en-us/library/kdzttdcb (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/kdzttdcb(v=vs.71).aspx)

# windows-phone-7 - WP7 - 根据查询字符串进行不同的数据绑定

> ID：11177176
> 
> 赞同：0
> 
> 时间：2012-06-24T11:45:24.553
> 
> 标签：windows-phone-7

我有一个包含一些项目列表的全景页面。当用户单击它们中的每一个时，它会转到一个包含更多信息（图像、文本块等）的页面。您在全景图上单击的任何项目的页面格式都相同，但信息不同。

做这个的最好方式是什么？我正在考虑拥有一个页面，并根据用户在全景图上单击的项目加载相同的页面但具有不同的 ItemViewModel 绑定。

那可能吗？还是我必须为全景页面的每个项目创建单独的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:02:27.127

无论如何，我在另一个页面上找到了解决方案。这是以防其他人搜索相同的东西

[http://windowsphonegeek.com/articles/Windows-Phone-MVVM-Master---Details-Navigation-in-5-minutes](http://windowsphonegeek.com/articles/Windows-Phone-MVVM-Master---Details-Navigation-in-5-minutes)

# javascript - 使用浏览器的后退按钮返回显示上一个值

> ID：11177189
> 
> 赞同：1
> 
> 时间：2012-06-24T11:47:12.393
> 
> 标签：javascript, html, refresh, salesforce

我正在 salesforce 中开发一个 Web 应用程序。我在浏览器的后退按钮中遇到问题。

当我单击提交按钮时，我有一个网页，该按钮将提交重定向到第二页，同时我在提交过程中更新该记录。在第二页之后，当我单击浏览器的后退按钮时，该按钮重定向到上一页并且仍然显示以前的值。但值在数据库中更新。

之后，当使用“ctrl+f5”刷新该页面时，现在显示的是实际更新的值。

在这种情况下应该怎么做。请任何人帮助我。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:54:43.923

另请参阅[此处](https://stackoverflow.com/questions/2530/how-do-you-disable-browser-autocomplete-on-web-form-field-input-tag)的讨论，其中讨论了禁用表单自动完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:26:02.397

在您返回的 html 中添加此元标记

```
 <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE"> 
```

这不会让浏览器缓存页面，用户点击后退按钮会得到过期页面，用户需要刷新页面才能看到它。

# javascript - 使用 CSS 将表情符号文本替换为图像

> ID：11177192
> 
> 赞同：4
> 
> 时间：2012-06-24T11:47:46.370
> 
> 标签：javascript, css

我想知道是否有一种方法可以使用纯 CSS 将文本替换为 span 对象？

例如：

```
This is a :) sample text 
```

上面示例中的 :) 将替换为

```
This is a <span class="emot-smile"></span> sample text 
```

或类似的隐藏文本本身并添加跨度的东西。

:before 和 :after 选择器是我可以使用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:49:44.957

不，这在纯 CSS 中是不可能的。

CSS用于样式。对于页面上内容的动态更改，您必须使用 Javascript。对于这个微笑：

```
var str = "This is a :) sample text";
str = str.replace(":)", "<span class='emot-smile'>replaced span</span>");

document.write( str );​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T11:49:59.490

不，CSS 不能包装你的内容和修改 DOM 树。

# c - c中的BODMAS计算

> ID：11177196
> 
> 赞同：-3
> 
> 时间：2012-06-24T11:47:58.717
> 
> 标签：c

嗨，我正在尝试用 C 语言编写代码来解决基于 BODMAS 规则的数学方程，有什么建议吗？例如：程序应该给出输出：(8+8)/2+4=12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:35:25.477

```
#include <stdio.h>

int calc(char *exp_str){
    FILE *fp;
    int ret;
    fp=fopen("calc_aux.c","w");
    fprintf(fp, "int main(){ return %s; }", exp_str);
    fclose(fp);
    system("gcc calc_aux.c -o calc_aux.exe");
    ret=system("calc_aux.exe");
    remove("calc_aux.c");
    remove("calc_aux.exe");
    return ret;
}

int main(){
    char exp[]="(8+8)/2+4";
    printf("%s=%d\n", exp, calc(exp));
}
//result:(8+8)/2+4=12 
```

# c# - C# 类/方法修饰符

> ID：11177200
> 
> 赞同：1
> 
> 时间：2012-06-24T11:49:15.147
> 
> 标签：c#, class, methods, modifier

我正在尝试使用类/方法修饰符制作电子表格。电子表格本身可以位于[此处](https://docs.google.com/spreadsheet/ccc?key=0AiXMCtUsCCDodFFXTE1rRnl1cHdIT1FFSUZMTDNuNkE)，尽管我有一些问题：

1）正如我所读，方法也可以`sealed`，但是这样做的目的是什么？保护方法不被覆盖？

2）字段也必须`abstract`在`abstract`课堂上吗？

3)`virtual`方法可以在定义的对象/类中有主体吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T11:57:28.847

1.  `sealed`方法[防止进一步覆盖](https://stackoverflow.com/questions/4152049/sealed-method-in-c-sharp)继承链。`sealed`方法也需要有 override 关键字。

2.  字段不能`abstract`。字段是类级别的变量。你不能覆盖它。属性和方法可以是`abstract`，但不是必须的。

3.  `virtual`和方法的区别在于`abstract`虚方法有一个实现。您可以在派生类中覆盖该实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T11:58:29.547

1：是的，正是这样；阻止虚拟方法在子类中再次被覆盖

2：字段永远不是抽象的；领域**是**实施；在抽象类中没有什么*必须*是抽象的

3：是的，因为虚拟修饰符与抽象修饰符不同。两者都代表一个虚拟方法 - 区别*完全*在于基类中是否有实现

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T11:57:36.383

1.  是的
2.  不 - 没有抽象字段之类的东西，该类是抽象的，这意味着它不能被实例化，但在其上定义的字段是派生非抽象类布局的一部分。
3.  是的

# iphone - navigationController.navigationBarHidden 和 navigationController.navigationBar.hidden 有什么区别？

> ID：11177201
> 
> 赞同：7
> 
> 时间：2012-06-24T11:49:20.357
> 
> 标签：iphone, ios, uinavigationbar, navigationbar

我发现很难

```
navigationController.navigationBarHidden = NO; 
```

和

```
navigationController.navigationBar.hidden = NO; 
```

不是一回事。事实上，如果我使用第一种语法来隐藏导航栏，那么我无法使用第二种语法来显示它：它根本不会做任何事情。此外，显示/隐藏导航栏的第一种语法对我总是有效，而第二种语法有时有效，但并非总是如此。我无法准确确定它什么时候可以工作，什么时候不可以。

由于我一直在修复别人的代码（一个相当大的应用程序：超过 20 个 UIViewController），我不得不进行全局搜索`navigationBar.hidden`并将其替换为`navigationBarHidden`. 之后，我不得不进行全局搜索`navigationBar setHidden:`并用`navigationBarHidden`语法替换。这最终解决了这个问题。

然而，我想了解为什么提供这两种不同的选项，以及它们之间的真正区别是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T11:55:21.157

navigationBarHidden 在隐藏或显示此导航的 navBar 时应用动画，可以使用 UINavigationControllerHideShowBarDuration 设置此导航的持续时间

其中navigationBar.hidden 会直接改变`UINavigationBar`( 的子类`UIView`)的可见性状态

由于`UINavigationBar`它的子类`UIView`继承了隐藏的布尔属性，因此无法将其更改为受保护或私有

来自[苹果文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UINavigationController_Class/Reference/Reference.html)

> 导航控制器负责管理导航栏和导航工具栏的配置和显示。您绝不能直接修改这些视图。相反，您应该通过 UINavigationController 类的方法和属性来操作它们。您可以使用 navigationBarHidden 属性或 setNavigationBarHidden:animated: 方法隐藏和显示导航栏。

# asp.net - 汇编嵌入式资源

> ID：11177206
> 
> 赞同：0
> 
> 时间：2012-06-24T11:50:11.667
> 
> 标签：asp.net, .net, assemblies, scriptcontrol

如果我想使用自定义用户控件将嵌入式脚本添加到程序集中，AssemblyInfo.cs 中是否需要以下行？是否存在任何替代方案？

```
[assembly: System.Web.UI.WebResource("Modal.js", "text/javascript")] 
```

我正在开发具有 JS 的自定义 IScriptControl。控件的 CS 和 JS 都在同一个程序集中。在控件中，我有一行：

```
ScriptReference reference = new ScriptReference();
reference.Assembly = "Modal";
reference.Name = "Modal.js"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T14:32:29.300

我找到了解决方案。

```
[assembly: System.Web.UI.WebResource("Modal.js", "text/javascript")] 
```

可以写在AssemblyInfo.cs或以上的命名空间中

```
[assembly: System.Web.UI.WebResource("Modal.js", "text/javascript")]
namespace Core.Web.UI.ScriptControls
{ 
```

现在，开发人员可以更轻松地添加新控件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T12:33:47.790

您可以将脚本嵌入到包含开发人员将使用的控件的程序集中，而无需在他们自己的程序集中声明它。Microsoft 对包含其基本控件的 System.Web 程序集做了同样的事情，因此开发人员只需要引用此程序集即可。并将控件放置到 WebForm 上。

# c - 为什么C程序栈不向下增长？

> ID：11177209
> 
> 赞同：1
> 
> 时间：2012-06-24T11:50:26.143
> 
> 标签：c, stack

在 gcc (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3 和 Intel(R) Core(TM)2 Duo CPU 上运行以下程序，我想验证 c 程序堆栈向下增长，我编写以下代码：

```
 #include <stdio.h>
    #include <malloc.h>
    #include <string.h>

    static int a = 1;
    static int b;
    int c = 2;
    int d;

    void foo(void)
    {
        int *p1;
        int *p2;
        int *p3;
        int *p4;

        printf("&p1\t%p\n", &p1);
        printf("&p2\t%p\n", &p2);
        printf("&p3\t%p\n", &p3);
        printf("&p4\t%p\n", &p4);
    }

    int main()
    {
        static int e = 3;
        static int f;
        int g = 4;
        int h;

        char *str1 = "abc";
        char *str2 = "abc";
        char *str3;
        char *str4;

        printf("&\"abc\"\t%p\n", &"abc");
        printf("&str1\t%p\n", &str1);
        printf("&str2\t%p\n", &str2);
        printf("str1\t%p\n", str1);
        printf("str2\t%p\n", str2);

        printf("&str3\t%p\n", &str3);
        printf("str3\t%p\n", str3);

        str4 = (char *)malloc(strlen("abc")*sizeof(char));
        printf("&str4\t%p\n", &str4);
        printf("str4\t%p\n", str4);

        printf("&g\t%p\n", &g);
        printf("&h\t%p\n", &h);

        foo();

        return 0;
    } 
```

我得到这个结果：

```
 &"abc"  0x8048680
    &str1   0xbff1be20
    &str2   0xbff1be24
    str1    0x8048680
    str2    0x8048680
    &str3   0xbff1be28
    str3    0x8048599
    &str4   0xbff1be2c
    str4    0x950f008
    &g  0xbff1be18
    &h  0xbff1be1c
    &p1 0xbff1bde0
    &p2 0xbff1bde4
    &p3 0xbff1bde8
    &p4 0xbff1bdec 
```

我发现str1、str2、str3、str4的地址向上增长，p1、p2、p3、p4的地址也在向上增长，而不是向下增长，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T11:52:08.440

C 标准没有说明堆栈，更不用说它的增长方向了。

您观察到的任何行为都完全取决于您的特定编译器（这反过来又会受到您运行的特定平台的影响。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T11:57:29.487

您的程序不测试堆栈的方向。

```
 int *p1;
    int *p2;
    int *p3;
    int *p4; 
```

编译器可以按照它们在程序中出现的相反顺序推送自动对象。

测试堆栈方向（在某些平台上确实向上）的一个很好的检查是检查两个不同函数中自动对象的地址，一个函数调用另一个函数。

```
void f(void)
{
    int a = 0;
    g(&a);
}

void g(int *p)
{
    int a = 0;

    if (p - &a > 0) printf("stack goes upward\n");
    else  printf("stack goes downard\n");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T12:03:22.263

实际上，它确实在您的平台上向下增长，我猜是 Linux + 32 位 x86。在 x86 平台上有 2 个寄存器用于寻址堆栈，基指针 (BP) 和堆栈指针 (SP)。SP 在值被推送时自动递增，并在它们被弹出时递减。在调用函数之前，*被调用者*以相反的顺序将函数压入堆栈，第一个参数是堆栈上最顶部的参数。

但是，在函数体中，编译器发出将原始 SP 存储在 BP 中的代码，然后将 SP 递增到足以覆盖所有局部变量；这些通常以递增方向分配，并通过函数体内的 BP 指针寻址。值得注意的是，在您的情况下，局部变量没有被“推送”到堆栈上，因为它们未初始化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:13:49.503

显然，局部变量在`main`堆栈中的地址比在更高的地址`foo`，所以你的堆栈向下增长 - 不用担心:)

为了支持编译器相关变量放置的情况，请考虑在使用 GCC-LLVM 4.2.1 在 Mac OS X 上运行代码时的结果：

```
&p1     0x7fff63a5dbf8  ^
&p2     0x7fff63a5dbf0  |
&p3     0x7fff63a5dbe8  |
&p4     0x7fff63a5dbe0  | 
```

在带有 GCC 4.2.4-1ubuntu4 的 Linux 上：

```
&p1     0x7fffa1e6d7b8  ^
&p2     0x7fffa1e6d7b0  |
&p3     0x7fffa1e6d7a8  |
&p4     0x7fffa1e6d7a0  | 
```

使用 GCC 4.4.3-4ubuntu5.1 观察到相同的行为。但使用 Intel C Compiler v11.0 时，事情就发生了逆转：

```
&p1     0x7fff59a84c20  |
&p2     0x7fff59a84c28  |
&p3     0x7fff59a84c30  |
&p4     0x7fff59a84c38  v 
```

在两个编译器生成的汇编代码中可以清楚地看到差异。GCC 使用基于基指针 (EBP/RBP) 的负偏移寻址（即相对于堆栈帧顶部的寻址），而 ICC 使用基于堆栈指针 (ESP/RSP) 的正偏移寻址（即相对于堆栈底部的寻址）堆栈帧）。在这两种情况下`p1`都具有最低的绝对偏移量，`p2`具有次低的绝对偏移量，依此类推。

GCC 也可以使用基于堆栈指针的寻址，如果提供`-fomit-frame-pointer`选项（使用更高的优化级别自动打开），但至少 4.4.3 之前的 GCC 仍然保留旧的变量布局，即`p1`现在具有最高偏移量，`p2`具有次高偏移量等等。可能在较新的 GCC 版本中已经改变了。

# php - PHP 子进程是否使用相同的 Mysqli 连接池？

> ID：11177213
> 
> 赞同：3
> 
> 时间：2012-06-24T11:50:51.557
> 
> 标签：php, mysqli, database-connection, fork

这就是 PHP 文档在连接池上所说的：

> mysqli 扩展支持持久数据库连接，这是一种特殊的池连接。

和

> 每个 PHP 进程都使用自己的 Mysqli 连接池。

但是子进程（在 fork() 之后）是否共享同一个连接池？

因此，永久数据库连接是否可以避免一个孩子关闭另一个孩子的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T11:56:52.450

在官方 PHP 站点上阅读有关 mysqli 和持久连接的[这一章。](http://www.php.net/manual/en/mysqli.persistconns.php)通常，一个分叉的子进程将共享其父进程的文件描述符（套接字是），所以理论上答案是肯定的。

> 因此，永久数据库连接是否可以解决服务器消失的问题？

您将不得不尝试，此错误可能在多种情况下发生。

# android - iOS 和 Android 的背景尺寸

> ID：11177216
> 
> 赞同：0
> 
> 时间：2012-06-24T11:51:23.280
> 
> 标签：android, ios, background

我在 iOS 和 Android 设备上使用默认浏览器为移动 Web 应用程序使用 640(w) x 960(h) 背景。这是正确的尺寸吗？

如何设置我的背景以使其缩放到不同的设备宽度和高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:37:13.107

在代码中设置尺寸时不要使用 px（像素），而是使用 dp 或 dip（与密度无关的像素）。

“dp”单位相对于 160 dpi 屏幕。所以 1 dp 是 160 dpi 屏幕上的一个像素。dp 与像素的比例会随着屏幕密度的变化而变化，但不一定成正比。

使用此单元时，您的图像会根据不同设备的尺寸进行缩放。

这是一个链接：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

# javascript - 跨浏览器音频 - 将样本数组写入新缓冲区

> ID：11177220
> 
> 赞同：2
> 
> 时间：2012-06-24T11:51:43.640
> 
> 标签：javascript, audio-recording, html5-audio, soundmanager2

首先是一点背景。我已经使用网络上可用的实验性音频 api 工作了很长一段时间。在那段时间里，我接触了 Mozilla 的音频数据 API 和 Web 音频 API，用于以下列方式处理和操作音频：-

*   从音频文件中收集原始音频数据（样本数组）/创建一个简单的音频样本数组，该数组可用于表示缓冲区中包含的各个样本。
*   处理有问题的缓冲区，执行 FFT 分析并使用处理后的音频创建一个新的缓冲区（简单的样本数组），例如过滤的样本集合。
*   将生成的缓冲区写入新的音频对象。

我最近开始考虑迁移到 SoundManager2 API，它利用 flash 为不支持在浏览器中处理音频所需的某些 html5 功能的浏览器提供后备，但是，我似乎陷入了困境最后阶段。

我可以访问原始音频数据以进行操作，但 SoundManager2 似乎不允许将缓冲区写入新的音频对象，就像您在下面显示的 Moz Audio Api 示例中那样。

```
// Create input audio object
var audio = new Audio();
audio.src = 'my_audio_file.ogg';
var channels;
var rate;

// Get input data
audio.addEventListener('loadedmetadata', function() {
    var channels            = this.mozChannels;
    var rate                = this.mozSampleRate;
}, false);

// Create output audio object with input settings
var output = new Audio();
output.mozSetup(channels, rate);

// Do something as the buffer is played
audio.addEventListener('MozAudioAvailable', function(event) {
    // Process audio and write to output object
    // event.frameBuffer is an array of raw audio samples
    output.mozWriteAudio(event.frameBuffer);
}, false); 
```

谁能告诉我是否有一个类似于 SoundManager2 的库可以进行音频数据的写入和读取。或者我只是在 Soundmanager 中遗漏了一些东西，而我实际上可以执行这种类型的处理。任何建议将不胜感激。

谢谢

安德鲁

# gcc - 在 Eclipse 中使用 sourcery 支持 NEON 内在函数

> ID：11177230
> 
> 赞同：1
> 
> 时间：2012-06-24T11:53:49.870
> 
> 标签：gcc

我正在尝试使用内在函数来利用我的 cortex A8 处理器上的 NEON fpu。我让 Eclipse 与代码源交叉编译器工具链（win7、64 位）一起运行。

当我写这个时：

```
float32x4_t x; 
```

我收到此错误：

```
Type 'float32x4_t' could not be resolved 
```

有人可以解释一下我该怎么做才能完成这项工作吗？

顺便提一句。我可以编译和运行不使用 NEON 的程序。

谢谢

# javascript - 在页面更改之前运行的 Javascript 事件

> ID：11177233
> 
> 赞同：10
> 
> 时间：2012-06-24T11:54:50.963
> 
> 标签：javascript, jquery

有这样的事吗？

我知道我可以在所有链接的单击事件上挂钩我的函数，但是还有其他页面更改的情况，例如刷新或不同的脚本更改 window.location

* * *

最后，我通过从 unload 事件中通过 postMessage 发送一个字符串来做到这一点，如下所示：

```
$(window).bind('unload', function(e){
  window.parent.postMessage('unloading');
}); 
```

在父文档中：

```
$(window).bind('message', function(e){     
  if(e.originalEvent.data == 'unloading'){
    // ajax stuff here
  }
}); 
```

它似乎工作。我可能应该提到涉及到一个 iframe :)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-24T11:56:59.220

有[`beforeunload`事件](https://developer.mozilla.org/en/DOM/window.onbeforeunload)，当页面被拆除时触发（或者跟随链接，或者如果窗口正在关闭，或者刷新等）。例子：

```
window.onbeforeunload = function(event) {
    var s = "You have unsaved changes. Really leave?";

    event = event || window.event;
    if (event) {
        // This is for IE
        event.returnValue = s;
    }

    // This is for all other browsers
    return s;
} 
```

由于显而易见的原因，您可以在`beforeunload`事件处理程序中执行的操作受到非常严格的限制，并且如您所见，上面的`beforeunload`处理程序具有与普通事件处理程序不同的签名。基本上，您的代码不能做任何异步操作，不能打开新窗口，也不能取消事件。它**可以**返回一个字符串，如果是，浏览器会弹出一个窗口，询问您是否真的要离开该页面，并在该弹出窗口中包含您的字符串。

根据您对问题的评论：

> 我之前需要它，所以我可以触发一个 ajax 请求并更新一些东西......

在最初提出问题多年后，这里的方法是使用[beacon API](https://developer.mozilla.org/en-US/docs/Web/API/Beacon_API)。这使您可以向服务器发送非阻塞异步请求，*而不会*减慢浏览器拆除页面并导航到下一个页面的过程：

```
navigator.sendBeacon("/path/to/notify", optionalData); 
```

这是一个发送后忘记的方法，但是当您的页面被拆除时浏览器不会取消它（就像它执行标准的异步 ajax 请求一样）。相反，它允许该请求完成，即使您的页面已被删除。

早在 2012 年最初编写此答案时，您通常可以使用*同步*ajax 调用 ( `async: false`)，只要它不会花费太长时间。但是你现在不能可靠地做到这一点（这从来都不是一个好主意，它支撑了 UI）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T11:58:23.660

jQuery 有[卸载](http://api.jquery.com/unload/)功能：

> 当用户离开页面时，unload 事件被发送到窗口元素。这可能意味着许多事情之一。用户可以单击链接离开页面，或者在地址栏中输入新的 URL。前进和后退按钮将触发事件。关闭浏览器窗口将导致事件被触发。即使是页面重新加载也会首先创建一个卸载事件。

请注意，这应该绑定到`window`对象而不是`document`：

```
$(window).unload(function() {
    // do something
}); 
```

您还可以将处理程序绑定到`beforeunload`事件：

```
$(window).bind('beforeunload', function() {
    // do something, preferably ajax request etc
    return 'are you sure?';
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T11:57:35.280

当一个页面被重新加载时，之前的任何东西都会消失。因此，您所说的似乎是您在 DOMReady 中执行的操作或在*新*页面中“加载”，因为您无法将前一页面中的代码“推送”到新上下文中。

# python - 使用继承、实例化、*args、**kwargs 混淆代码

> ID：11177236
> 
> 赞同：3
> 
> 时间：2012-06-24T11:55:07.160
> 
> 标签：python, class

```
class Pen(object):
    def __init__(self, mean_radius = None, length = None):
        self.usage = "Is used to apply ink trails to drawing surfaces"
        self.mean_radius = mean_radius
        self.length = length

class FountainPen(Pen):
    def __init__(self, manufacturer = "Waterman", *args, **kwargs):
        Pen.__init__(self, *args, **kwargs)
        self.manufacturer = manufacturer
        self.cartridge_state =  "non-empty"

>>> instance_FP = FountainPen(5, 1)
>>> instance_FP.mean_radius
>>> print instance_FP.mean_radius
1    
>>> print instance_FP.length
None 
```

`5`在 的实例化中作为参数传递的整数会发生什么`FountainPen`？为什么`print instance_FP.mean_radius`返回`1`而不返回`5`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T12:02:02.683

您必须这样想：`*args`并`**kwargs`“吃掉”它们之前的“常规”参数留下的所有位置/关键字参数。如果你把它们放在最后，它们只会得到不符合“常规论点”的东西。

因此，当您编写`FountainPen(5,1)`时会发生这样`FountainPen.__init__`的调用：

*   `self`设置为新创建的实例；
*   `manufacturer`获取第一个参数，即 5；
*   `*args`“吃掉”所有剩余的位置参数，即 just `1`; 所以`args`现在设置为`[1]`;
*   `*kwargs`会吃掉剩下的任何关键字参数，但没有，所以它变成`{}`.

很明显，它`Pen.__init__`只是`1`作为参数调用（除了`self`），并`length`保持设置为其默认值（`None`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T12:06:16.877

[Matteo Italia](https://stackoverflow.com/a/11177278/246207)提到了什么是错误的，基本上`manufacturer`是一个立场论点。`FountainPen`您可以通过将'稍微更改`__init__`为以下内容来修复它：

```
def __init__(self, *args, manufacturer = "Waterman", **kwargs): 
```

这样做会产生`manufacturer`一个关键字参数，因此要更改它，您必须调用：

```
FountainPen(manufacturer="newval") 
```

注意：不幸的是，这种语法（在参数之后只有关键字`*args`参数）只在 Python 3 中有效。Jon Clements 有一个[解决方案](https://stackoverflow.com/a/11177313/246207)可以解决 Python 2 的这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T12:07:47.093

一个更优雅的解决方案是：

```
class FountainPen(Pen):
    def __init__(self, *args, **kwargs):
        Pen.__init__(self, *args, **kwargs)
        self.manufacturer = kwargs.get('manufacturer', 'Waterman')
        self.cartridge_state =  "non-empty"

blah = FountainPen(5, 1, manufacturer='Waterman') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T12:01:42.367

在您的代码中，将 5 分配给参数`manufacturer`，将 1 分配给`*args`.

将不带键的参数传递给函数时，您必须首先提供显式参数。其余的被传递给 *args。为避免这种情况，请在调用构造函数时提供关键字：

```
>>> instance_FP = FountainPen(mean_radius=5, length=1) 
```

# java - 取回数据时Android sqlite helper错误

> ID：11177240
> 
> 赞同：0
> 
> 时间：2012-06-24T11:55:27.397
> 
> 标签：java, android, sqlite

大家好，我正在使用 sqlite 辅助类，但我在使用 select 语句时遇到了一点问题。我想通过名称获取数据库项的 id。

我使用这个选择方法：

```
public Cursor selectShift (String name){
    SQLiteDatabase db = dbHandler.getReadableDatabase();
    Cursor c = db.query(TABLE_NAME, null, "name=" + name, null, null, null, null);
    c.moveToFirst();
    db.close();
    return c;
} 
```

当我调用它时，我使用它：

```
if(handler.selectShift(name)!=null){
      Cursor c = handler.selectShift(name);
      id = c.getInt(c.getColumnIndex("_id"));
      c.close();      
  } 
```

然后是得到这个错误：

> android.database.CursorIndexOutOfBoundsException: 请求索引 0，大小为 0

好像它不存在，但我检查了名称字符串是否正确，当我在列表视图中显示名称时，我看到了该名称，所以它存在。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:00:37.100

1 - 应该检查光标中是否有任何数据......c.getCount>0或c.moveToFirst（）或c.isAfterLast（）......

```
if(handler.selectShift(name)!=null){
      Cursor c = handler.selectShift(name);

if (c.moveToFirst()){ //<--------------
   do{  //<---------if you not need the loop you can remove that
       id = c.getInt(c.getColumnIndex("_id"));
   }while(cursor.moveToNext());
}

  c.close(); 
```

}

2-不确定，但在选择查询中查找，因为`<variable>`在 where 子句中不存在带有变量的“”

```
"SELECT COUNT(*) FROM " + tableName + " WHERE " + commentFieldName + " = '" + comment + "'"; 
```

或者`better to use parametrized statement`

```
String query = "SELECT COUNT(*) FROM " + tableName + " WHERE columnName = ?";
cursor = db.rawQuery(query, new Sring[] {comment}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:46:26.280

除非您的 name 变量已经为 sql 格式化（或不是 TEXT），否则我猜您需要一点引号。也许是这样的

```
Cursor c = db.query(TABLE_NAME, null, "name= \'" + name + "\'", null, null, null, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:12:33.217

问题似乎在这里

```
"name="  <-It should be "name = "+name 
```

以下应该工作

```
Cursor cursor= db.query(TABLE_IMAGES,null, "name" +" = ?", new String[]{name},  null, null, null); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:21:29.727

感谢您的帮助，我找到了问题所在。它在游标方法中，解决方案是：

```
public Cursor selectShift (String name){
    SQLiteDatabase db = dbHandler.getReadableDatabase();
    Cursor c = db.query(TABLE_NAME, new String[] {"_id"}, "name LIKE '"+name+"%'", null, null, null, null);
    c.moveToFirst();
    db.close();
    return c;
} 
```

# android - Android Intent 对其他类不起作用

> ID：11177249
> 
> 赞同：1
> 
> 时间：2012-06-24T11:57:30.723
> 
> 标签：android, android-intent

我有另一个类的意图，它所做的只是标记错误。我正在使用从我[提出](https://stackoverflow.com/questions/11174061/calling-an-activity-from-a-service)的问题的答案中得到的一些代码。

我的包裹名称是： `com.exercise.AndroidAlarmService`

我要调用的课程是： `.Hello`

以下是我如何称呼课程，但它不起作用。我不是 android 专家，因此将不胜感激初学者的解释。

```
Log.i("Service", "onStart() is called"); 
Intent callIntent = new Intent(Intent.ACTION_CALL); 
callIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); 
callIntent.setClassName("com.exercise.AndroidAlarmService", ".Hello");
startActivity(callIntent); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:00:13.963

采用

```
callIntent.setClassName("com.exercise.AndroidAlarmService",
                "com.exercise.AndroidAlarmService.Hello"); 
```

代替

```
callIntent.setClassName("com.exercise.AndroidAlarmService", ".Hello"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:30:45.610

`Intent intent = new Intent(Intent.ACTION_MAIN); intent.setClassName("com.exercise.AndroidAlarmService", "com.exercise.AndroidAlarmService.Hello"); startActivity(intent);`

# html - 没有初始 src 的图像不显示 css background-image: url("image.png");

> ID：11177252
> 
> 赞同：1
> 
> 时间：2012-06-24T11:57:46.333
> 
> 标签：html, css

我有一张桌子，每一行都有相同的小图像。

鉴于该表有数千行，**我不想****在 html**中设置图像的 src 、宽度和高度，而是使用类使用 css 来执行此操作。

```
.clbtn {
width: 18px; 
height: 18px;
background-image: url("image.png");
} 
```

这样做会减小页面的初始大小。

然而，虽然这在 chrome 中可以正常工作，但在 Firefox 中却不行。`$(document).ready(function(){ $(".clbtn").attr("src", "image.png");});`除了餐桌后还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:52:50.940

那是因为浏览器如何处理缺少 src 属性的图像。如果您真的需要这样做，也许最明智的做法是使用 1x1 透明 gif 对所有 img 进行 src。

# c# - CSS 模板不适用于 Login.aspx 页面

> ID：11177253
> 
> 赞同：0
> 
> 时间：2012-06-24T11:57:56.927
> 
> 标签：c#, asp.net, css, web

我已经完成了我的 ASP.NET 网站的构建。我下载了许多设计模板，将它们应用到母版页，它们在我的页面上运行良好。但是“Login.aspx”和“ChangePassword.aspx”以及“ChangePasswordSuccess.aspx”和“Register.aspx”是网站内置不应用模板！

他们不只是应用新外观，他们在默认样式下工作得很好，
任何人都可以帮我解决这个问题，我不明白这个问题。
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:06:15.660

尝试用 ~ 或 ../ 写入 css 文件的路径

前任：

```
href="~/Styles/Site.css"
href="../Styles/Site.css" 
```

# java - 如何在模拟中创建方法调用的文件夹？

> ID：11177262
> 
> 赞同：0
> 
> 时间：2012-06-24T11:59:23.327
> 
> 标签：java, testing, directory, mockito, creation

表单文档：

```
 Comparable c=mock(Comparable.class);
    when(c.compareTo(anyInt())).thenReturn(-1); 
```

我想：

```
 File tempDir=new File("test");
   Comparable c=mock(Comparable.class);
    when(c.compareTo(anyInt())).thenReturn(tempDir.mkdir()); 
```

所以将创建真正的文件夹（我将使用它的下一个私有方法）。有可能吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:00:18.153

非常不清楚您要完成什么。我完全不确定你为什么要首先做这样的事情。

正如我在评论中所说，您当前示例无法编译的原因是`File.mkdir()`返回 a`boolean`并`Comparable.compareTo(Comparable)`返回 a `int`。但是，如果您正在模拟返回 a 的方法，则可以编译`boolean`，如下所示：

```
public class Foo {
  public static void main(String[] args) {
    File file = new File("/tmp/111");
    Bar bar = mock(Bar.class);
    when(bar.isTrue()).thenReturn(file.mkdir());
  }

  public static interface Bar {
    public boolean isTrue();
  }
} 
```

也就是说，我严重怀疑这会做你想要的。该行`when(bar.isTrue()).thenReturn(file.mkdir());` *实际上调用* `file.mkdir()`. 因此，您的目录将在您创建模拟时创建。换句话说，前面的例子可以（并且应该）等价地写成：

```
public class Foo {
  public static void main(String[] args) {
    File file = new File("/tmp/111");
    Bar bar = mock(Bar.class);
    boolean dirMade = file.mkdir();
    when(bar.isTrue()).thenReturn(dirMade);
  }

  public static interface Bar {
    public boolean isTrue();
  }
} 
```

像这样编写它可以避免在实际创建目录时产生任何混淆。

# jquery - 也可以选择整周的日期选择器

> ID：11177263
> 
> 赞同：2
> 
> 时间：2012-06-24T11:59:52.440
> 
> 标签：jquery, datepicker

jQuery的日期选择器是否有可能有一个选项可以选择一天（就像它一样）但**也**可以选择整周？

我需要这两个在同一个日期选择器中......

Tnx 在广告中！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:29:43.540

查看下面的两个链接，它们都适用于 jQuery UI：

*   [使用 jQuery UI Datepicker 的星期选择器](http://www.tikalk.com/incubator/week-picker-using-jquery-ui-datepicker)
*   [使用 jQuery UI 1.7 和 jQuery UI CSS 框架的日期范围选择器](http://www.filamentgroup.com/lab/date_range_picker_using_jquery_ui_16_and_jquery_ui_css_framework/)

希望它会帮助您继续前进。

# jsp - 在同一页面上搜索和显示多个结果

> ID：11177271
> 
> 赞同：0
> 
> 时间：2012-06-24T12:01:24.187
> 
> 标签：jsp, servlets

我正在尝试设计一个jsp页面，用户在其中输入字段的名称（比如父亲的名字）并输入一个值。我想搜索数据库并返回所有可能的学生姓名，其父亲姓名与用户输入的姓名匹配。

* * *

现在，问题是我想以行明智的方式返回学生的所有姓名（很像谷歌在我们搜索任何内容时返回一组值的方式）并带有一些描述。我还想在用户输入值的同一页面中显示结果。

* * *

我应该如何使用 servlet 来实现这一点。只是对代码的一点看法会有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:21:45.980

> **我正在尝试设计一个jsp页面**

在这里，您需要有一个简单的页面，可以检查`GET`请求参数，例如：

```
http://www.example.com/?q=a+father+name&page=2&so-on-as-per-your-need 
```

现在您将需要*两个*servlet：

1.  首先，`search`包含搜索选项的servlet，就像你说的一个字段。
2.  二、`result` servlet，具有搜索显示结果的能力

> **我想搜索数据库**

将您的*DAO*方法保存在单独的类中，以使您的业务逻辑远离 servlet 或 jsp。

我认为您可以在数据库中搜索匹配值，并且正如您所说，您需要一些描述，您还需要将其存储在数据库中。

> **我也想在同一页面显示结果**

你有JSP`include`的`forward`选项，你只需要根据参数选择这些选项中的任何一个`q`，如果它`null`比servlet`forward/include`上的请求。`search`如果比对servlet的请求`q`具有任何值。`forward/include``result`

这样，您只有一个视图和两个控制器。

希望能帮助到你。

可能对您有所帮助的进一步阅读：

*   [设计模式基于 Web 的应用程序](https://stackoverflow.com/q/3541077/803285)
*   [如何避免 JSP 文件中的 Java 代码？](http://balusc.blogspot.in/2010/07/how-to-avoid-java-code-in-jsp-files.html)
*   [Servlet 和 JSP 最佳实践](http://www.oracle.com/technetwork/articles/javase/servlets-jsp-140445.html)

# vb6 - VB 6.0 内存不足错误

> ID：11177281
> 
> 赞同：3
> 
> 时间：2012-06-24T12:02:27.253
> 
> 标签：vb6

在特定系统中加载表单时，我的一个 VB 6.0 应用程序会引发错误“内存不足”，但在其他机器上工作正常。但其他 vb 6.0 应用程序在同一台机器上运行良好。

有问题的机器详细信息：安装了 Windows XP、HP 负载运行器

其他机器：Windows 2003

我尝试了很多方法来找到根本原因，但我做不到。请帮我找出根本原因..

谢谢， Gunasekaran Sambandhan

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T15:51:06.530

最后我找到了这个问题的解决方案。此特定计算机中缺少此项目的一个特定 dll (MSSTDFMT.DLL)。我已经放置并注册了 dll。现在它工作正常。

谢谢， Gunasekaran Sambandhan

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-20T13:07:13.393

想要添加我们的修复程序，因为我们花了几天时间才弄清楚发生了什么。

我们试图让一个旧的 VB6 程序在 Windows 7 上运行，我们已经让它在其他 PC 上运行，但是这个给我们带来了问题。显然我们缺少一个依赖项，而且这种误导性错误通常是由于缺少依赖项造成的。

我们缺少的特定依赖项是 FM20.DLL，我们通过安装 Microsoft ActiveX Control Pad ( [http://download.cnet.com/Microsoft-ActiveX-Control-Pad/3000-2070_4-127950.html](http://download.cnet.com/Microsoft-ActiveX-Control-Pad/3000-2070_4-127950.html) )获得

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-07T22:52:38.400

有时，如果一个或多个模块的注册搞砸了，可能会出现“[7] Out of Memory”消息。在这种情况下，取消注册然后注册 DLL 将解决问题。（刚刚在被网络推送“清理”的机器上遇到了这个问题——IT 无法告诉我他们究竟清理了什么。）

# c# - C# 接口、多态性和委托

> ID：11177284
> 
> 赞同：4
> 
> 时间：2012-06-24T12:02:42.073
> 
> 标签：c#, inheritance, delegates, polymorphism

当我结合接口和多态性时，我一团糟。

假设我有以下界面：

```
public Interface CanSayHello
{
     String SayHello();
} 
```

以下类：

```
public Class Person : CanSayHello
{
     public String SayHello() { return "Hey, I'm a person just saying hello to you";}
} 
```

最后是重要的类：

```
public Class PoshPerson: Person
{
     public String SayHello() { return "Hey, I'm too posh to say hello to you";}
} 
```

我的第一个问题是下面的代码会收集 PoshClass 或 Person Class 的方法吗？

```
public delegate String Collector();
event Collector CollectorEvent;
void GetMethod(CanSayHello c){CollectorEvent += c.SayHello;}

**GetMethod(new PoshPerson());** 
```

如果它会从 Person 类中收集方法，我想我应该将 Person 的方法声明为 virtual 并重写 PoshPerson 的方法。我真的很希望这两个方法签名是相等的。有没有可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:31:11.007

您的示例运行`Person`'s 方法。如果您更改`PoshPerson`为`PoshPerson : Person, CanSayHello`（您可能认为不会改变任何内容，因为`Person : CanSayHello`），它会运行`PoshPerson`'s 方法。

我同意@millimoose：“我会尽可能避免方法隐藏，正是因为编译时多态性不是很直观。” 我建议您更改`Person.SayHello`为`virtual`和。这样，无论您是否知道实例为、或，当前实例类型的方法都会运行。`PoshPerson.SayHello``override``CanSayHello``Person``PoshPerson`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:45:03.200

我认为你想要更多的东西：

```
public interface ITalkable
{ 
     string SayHello(); 
     string SayGoodbye();
     etc...
}

public class Person : ITalkable
{ 
     public virtual string SayHello() { return "Hey, I'm a person just saying hello to you";} 
     public virtual string SayGoodbye() { return "Hey, I'm a person just saying goodbye to you";}
} 

public class PoshPerson: Person 
{ 
     public override string SayHello() { return "Hey, I'm too posh to say hello to you";}
     public string MakePersonSayHello() { return base.SayHello(); } 

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:37:29.093

您的示例将运行 Person 的版本。请参阅此处的说明：http: [//msdn.microsoft.com/en-us/library/aa664593](http://msdn.microsoft.com/en-us/library/aa664593(v=vs.71).aspx) (v=vs.71).aspx 。如果您在派生类中重新定义方法（编译后的 PoshPerson.SayHello 就像您使用 new 重新定义它一样），并且基类实现了一个接口，那么重新定义的方法不会改变接口映射。

如果你让 PoshPerson 重新实现接口，它会调用 PoshPerson 的 SayHello。

```
public class PoshPerson : Person, CanSayHello
{
    public String SayHello() { return "Hey, I'm too posh to say hello to you";}
} 
```

或者，如果您在 Person 中将 SayHello 设为虚拟，然后在 PoshPerson 中覆盖它，它将调用 PoshPerson 的 SayHello。

# php - 已弃用：函数 session_register() 已弃用且无法修改标头信息

> ID：11177285
> 
> 赞同：3
> 
> 时间：2012-06-24T12:02:44.193
> 
> 标签：php, login

我使用 sql 创建了一个简单的登录系统

它有 4 个主要组件 index - 询问用户名并通过 checklogin - 检查凭据 logsuccess 主页 - 成功登录后的登陆页面

错误生成在帖子末尾给出

```
Index.php asks for username and pass

    <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
    <HTML>
     <HEAD>
      <TITLE>Nottingham Uni</TITLE>

      <script type="text/javascript" src="js/mootools-1.2.1-core-yc.js"></script>
      <script type="text/javascript" src="js/process.js"></script>

      <link rel="stylesheet" type="text/css" href="style.css" />
    </HEAD>

     <BODY>

    <center>
    <div id="intro">
      <p>&nbsp;</p>
      <p><img align="absmiddle" src="images/nott-uni-logo.jpg"></p>
    </div>

    <div id="status">

    <fieldset><legend align="center">Authentication</legend>

    <div id="login_response"><!-- spanner --></div>

    <form id="login" name="login" method="post" action="checklogin.php">
    <table align="center" width="300" border="0">
    <tr>
    <td width="80">Username</td><td><input id="name" type="text" name="myusername"></td>
    </tr>
    <tr>
    <td>Password</td>
    <td><input type="password" name="mypassword"></td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td><input id="submit" type="submit" name="submit" value="Login">
    </tr>
    </table>
    </form>
    </fieldset>

    </div>
    </center>
     </BODY>
    </HTML>

checklogin.php checks for the credentials

    <?php

    $link = mysql_connect('www.xxxxx.com', 'xxxxxx', 'xxxxxx');
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("brainoidultrafb", $link);

    // username and password sent from form 
    $myusername=$_POST['myusername']; 
    $mypassword=$_POST['mypassword']; 

    // To protect MySQL injection (more detail about MySQL injection)
    $myusername = stripslashes($myusername);
    $mypassword = stripslashes($mypassword);
    $myusername = mysql_real_escape_string($myusername);
    $mypassword = mysql_real_escape_string($mypassword);
    $sql="SELECT * FROM logintbl WHERE stu_email='$myusername' and password='$mypassword'";
    $result=mysql_query($sql);

    // Mysql_num_row is counting table row
    $count=mysql_num_rows($result);

    // If result matched $myusername and $mypassword, table row must be 1 row
    if($count==1){

    // Register $myusername, $mypassword and redirect to file "login_success.php"
    session_register("myusername");
    session_register("mypassword"); 
    header("location:login_success.php");
    }
    else {
    echo "Wrong Username or Password";
    }
    ?>

If its success it goes to homepage.php

logsuccess.php is below

    <?php
    session_start();
    if(!session_is_registered(myusername)){
    header("location:homepage.php");
    }
    ?>
    <html>
    <body>
    Login Successful
    </body>
    </html>

these codes are give in the following errors

    Deprecated: Function session_register() is deprecated in /home/content/58/9508458/html/pabrowser/checklogin.php on line 29

    Warning: session_register() [function.session-register]: Cannot send session cache limiter - headers already sent (output started at /home/content/58/9508458/html/pabrowser/checklogin.php:29) in /home/content/58/9508458/html/pabrowser/checklogin.php on line 29

    Deprecated: Function session_register() is deprecated in /home/content/58/9508458/html/pabrowser/checklogin.php on line 30

    Warning: Cannot modify header information - headers already sent by (output started at /home/content/58/9508458/html/pabrowser/checklogin.php:29) in /home/content/58/9508458/html/pabrowser/checklogin.php on line 31 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T12:05:40.527

而不是这样做：

```
session_register("myusername");
session_register("mypassword"); 
```

你可以简单地做：

```
session_start();
$_SESSION['username'] = 'something';
$_SESSION['password'] = 'something'; 
```

要检查是否设置了用户名，您可以执行以下操作：

```
session_start();
if(!isset($_SESSION['username'])){
    // not logged in
} 
```

请注意，我的`session_start()`检查/初始化正上方有该功能。在您的代码中，您可能希望将其添加到脚本的顶部，以防止出现[“PHP 已发送的标头”消息](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)。

另外，请不要将`mysql_*`函数用于新代码。它们不再被维护并且社区已经开始了[弃用过程](http://news.php.net/php.internals/53799)。看到[**红框**](http://uk.php.net/manual/en/function.mysql-connect.php)了吗？相反，您应该了解[准备好的语句](http://en.wikipedia.org/wiki/Prepared_statement)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://php.net/manual/en/mysqlinfo.api.choosing.php)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

关于您的代码的最后一件事。看起来您没有[正确散列](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)密码，这被认为是不好的做法。如果攻击者控制了您的数据库，您需要对数据库中的人员进行一些解释（例如，您必须告诉他们攻击者获得了他们的所有密码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T06:21:50.683

`@`您可以通过在任何不推荐使用的函数之前使用来避免此问题。喜欢`@session_register()`

# database - 防止 DBIx::Class::ResultSource 预取中的 Carp::carp 消息

> ID：11177286
> 
> 赞同：1
> 
> 时间：2012-06-24T12:02:51.327
> 
> 标签：database, perl, dbix-class

在客户端应用程序中，我有一个 DBIx::Class 模型“Todo”，它可以使用多对多关系链接到许多其他模型。我知道，由于业务逻辑，只有 1 个外国模型与它相关联。我想使用以下方法在我的查询中获取该模型：

```
my $objects = $c->model('DB')->resultset('Todo')->search($myFilter,{
    prefetch => \@relations # contains all possible relations
}); 
```

像文档状态一样 DBIx::Class::ResultSource 对此发出警告：

```
DBIx::Class::ResultSet::next(): Prefetching multiple has_many rels accountbalances_todos and accounts_todos at top level will explode the number of row objects retrievable via ->next or ->all. Use at your own risk. at /media/psf/projects/.../Controller/Todo.pm line 117 
```

谁能告诉我如何在不求助于编辑 DBIx::Class::ResultSource 本身的情况下防止此错误？我看不到其他方法可以做我想做的事情，并且想防止应用程序在日志中转储大量警告。我曾尝试摆弄@CARP_NOT 和 $Carp::Internal，但无法让 Carp 跳过此警告（关于此的文档充其量是稀疏的）

如果有人可以帮助我，那就太棒了，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:14:59.610

您可以覆盖警告信号的默认处理以捕获并忽略此特定警告：

```
$SIG{__WARN__} = sub {
  my $warn_msg = $_[0];
  if ( $warn_msg =~ m/Prefetching multiple has_many rels accountbalances_todos/ ) {
    # do nothing
  } else {
    warn $warn_msg;
  }
}; 
```

或者，如果您愿意，

```
$SIG{__WARN__} = sub {
  warn $_[0] unless $_[0] =~ m/Prefetching multiple has_many rels accountbalances_todos/
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:34:30.930

`DBIx::Class`使用模块中的`carp()`函数而`DBIx::Class::Carp`不是`Carp`. 所以`@CARP_NOT`，`$Carp::Internal`不工作。[改为使用`$SIG{__WARN__}`](https://stackoverflow.com/a/11177357/1186729)。

# python - TypeError：'datetime.datetime' 对象不可下标

> ID：11177293
> 
> 赞同：8
> 
> 时间：2012-06-24T12:04:43.863
> 
> 标签：python, pyexcelerator

```
#!/usr/bin/env python
# coding: utf-8
import MySQLdb
import os,sys
import time
import datetime
from pyExcelerator import *

def main():
    '''get datas from mysql to excel'''
    w=Workbook()
    ws=w.add_sheet('user')

    mysql_conn=MySQLdb.connect(................,charset="utf8")
    cursor=mysql_conn.cursor()

    cursor.execute("select * from students")
    results=cursor.fetchall() 
    results_count=len(results)
    cursor.close()
    mysql_conn.close()  
    a=results_count-1
    print a
    #print results

    row=0     
    for r in results:        
        r3=[(x[0:2],x[2],x[3:]) for x in r]
        w3=datetime.strptime("%Y-%m-%d %H:%M:%S") 
        [ws.write(x[0:2],i) for i in r3]

        [ws.write(w3,i) for i in r3]
        [ws.write(x[3:],i or '') for i in r3]:       
        row+=1  
    w.save('data.xls')

if __name__ == "__main__":
    main() 
```

我想从 mysql 获取数据到 excel，但 `r3=[(x[0:2],x[2],x[3:]) for x in r]`给了我 `TypeError:'datetime.datetime' object is not subscriptable`。

我不知道该怎么办，我才学3周，请帮帮我？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T12:12:48.577

`x`是一个`datetime.datetime`不能与 [] 符号一起使用的对象，如`x[0:2]`.

这意味着您的一列包含一个必须以不同方式解析的日期对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T12:35:48.083

首先，您不想使用 pyExcelerator - 它已经过时并且在 3 多年内没有更新（并且已被取代）。

您应该使用的是[http://www.python-excel.org/](http://www.python-excel.org/)上的实用程序，它提供了处理日期时间的功能。Excel 将它们存储为自某个时期以来的浮点数。有关信息[https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html) - 在“Excel 电子表格中的日期”部分下。另请参阅[https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#xldate.xldate_as_tuple-function](https://secure.simplistix.co.uk/svn/xlrd/trunk/xlrd/doc/xlrd.html#xldate.xldate_as_tuple-function)了解如何将日期的 excel 表示形式转换为标准的 python 日期时间。

如果您使用 easy_install/pip xlutils，您将获得 xlrd（读取）和 xlwt（写入）库。最高支持 2003 版文件，但 2007+（.xlsx 文件）支持即将推出测试版。

**编辑**

忘了提到[https://secure.simplistix.co.uk/svn/xlwt/trunk/xlwt/doc/xlwt.html](https://secure.simplistix.co.uk/svn/xlwt/trunk/xlwt/doc/xlwt.html)描述了 xlwt 库如何获取 a`datetime.dateime`并将其转换为 Excel 单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:12:56.940

表中的一个字段似乎包含`datetime`对象，`MySQLdb`也将它们返回为`datetime`. 您可能想先转换`datetime`为`str`。`datetime`那条线似乎通过使用切片占据了一部分。您可以使用[`datetime.strftime`](http://docs.python.org/library/datetime.html#datetime.datetime.strftime).

# ios - 如何在ios中使用RTP协议

> ID：11177297
> 
> 赞同：4
> 
> 时间：2012-06-24T12:05:24.913
> 
> 标签：ios, rtp

我想创建一个使用 RTP 协议播放视频的应用程序。

我只需要知道是否有人可以提供任何资源/网站，以及在哪里可以找到有关如何使用 RTP 协议的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:08:46.837

RFC 呢？

RTP RFC 3550： [http ://www.ietf.org/rfc/rfc3550.txt](http://www.ietf.org/rfc/rfc3550.txt)

您还应该查看用于控制 RTP 流的 RTCP 协议。

RTCP RFC 3605： [http ://www.ietf.org/rfc/rfc3605.txt](http://www.ietf.org/rfc/rfc3605.txt)

要在 C++ 中实现 RTP 服务器，您可以查看 JRTPLIB： [http: //research.edm.uhasselt.be/~jori/page/index.php?n=CS.Jrtplib](http://research.edm.uhasselt.be/~jori/page/index.php?n=CS.Jrtplib)

# - 姜戈 1.2

> ID：11177299
> 
> 赞同：0
> 
> 时间：2012-06-24T12:05:27.517
> 
> 标签：

Django 1.2 是 Django 框架的一个版本，于 2010 年 5 月发布。如果您的问题与此版本特别相关，请仅使用此标签。

# user-interface - 用于交互式项目列表的 Gtk 容器

> ID：11177301
> 
> 赞同：0
> 
> 时间：2012-06-24T12:05:40.620
> 
> 标签：user-interface, gtk, gtk3

在这里找不到合适的容器来表示屏幕上的任务列表时遇到了麻烦。

基本上，我正在寻找 Gtk 容器以便能够：

a) 创建任务列表，如“Tasque”（这绝对是可能的，因为 Tasque 是一个 Gtk 应用程序）。

![任务截图](../Images/cfbb609669cd5ae857a3de60a647af51.png)

b) 创建一个“删除/编辑”选项，当鼠标指针悬停在任务左侧时（类似于 Basecamp）。（这可能是不可能的，因为它是通过 Basecamp 中的 HTML 完成的）。

![大本营截图](../Images/44aef7efc73c5949d5af59c463bb217c.png)

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:47:31.027

对于任务列表，我会使用`Gtk.Treeview`. 至于鼠标悬停时的编辑/删除链接——除非您的 GTK 应用程序实际生成列表并将其显示为 HTML 内容，否则按照您显示的方式进行操作将非常棘手。我认为您最好使用`Gtk.Treeview`(a) 在 a 中的列表顶部有删除/编辑图标`Gtk.Toolbar`或 (b) 将删除/编辑链接按钮添加到树视图本身。

就个人而言，我不会触及树视图的样式，因为这可能最好留给用户的主题，但是，如果您必须使用自己`Gtk.CssProvider`的样式来设置树视图的样式，那么您可以随意使用。

# java - 如何在 Hibernate 中将一对多关联添加到嵌入式类型？

> ID：11177303
> 
> 赞同：3
> 
> 时间：2012-06-24T12:06:05.317
> 
> 标签：java, hibernate, one-to-many

我有一个包含组件的最后一个实例的实体：

```
@Entity
public class Customer {
  ...
  @Embedded
  public ServiceCall getLastServiceCall() {...}
  ...
}

@Embeddable
public class ServiceCall() {
  public Date getDate();
  public Status getStatus();
} 
```

嵌入是`ServiceCall`为了调用`customer.getLastServiceCall().getDate()`而不需要另一个表连接。

我想建立一对多的关联，并开始保存所有`ServiceCall`s，同时将一个嵌入客户中。

Hibernate 的[文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-component)（我正在使用的 v3.6）指出：

> 您还可以在可嵌入对象（即@OneToOne、@ManyToOne、@OneToMany 或@ManyToMany）中使用关联注释。要覆盖关联列，您可以使用@AssociationOverride。

看来我应该做的就是加入`@OneToMany`协会`LastServiceCall`。

这对我有用吗？如果没有，我的替代方案是什么？如果是，这将如何影响二级缓存，并且更新该嵌入式实例是否有限制（我可以使用不可变对象）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:19:24.220

@Embeded 类型不应该在数据库中拥有自己的身份，因此我认为您不能将 @OneToMany 添加到 ServiceCall 上的 Customer 类中。

```
 @OneToMany 
  @Embedded
  public ServiceCall getLastServiceCall() {...} 
```

但是，您可以像这样向@Embeded Service 调用元素添加关联。

```
@Entity 
pubic class HistoricalServiceCall extends ServiceCall 
{
   @Id 
   private String id; 

}

@Embeddable 
public class ServiceCall {

   @OneToMany(fetch=FetchType.LAZY)
   @JoinColumn(name="join_column_defined_on_customer_table")
   List<HistoricalServiceCall> getServiceCallHistory(); 
} 
```

**更新：**将 FetchType.LAZY 放在 getServiceCallHistory() 上是提示 JPA 提供者等到您调用 getServiceCallHistory 后再进行另一个选择以拉入该关联。

因此，使用我所描述的设置，如果您执行 customer.getLastServiceCall().getDate() 在关系变得懒惰之前它不会拉入 ServiceCallHistory。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:53:53.340

您需要的是以下内容：

*   客户实体
*   可嵌入的 ServiceCall
*   一个 HistoricalServiceCall 实体。

客户应包含一个嵌入式 ServiceCall 字段（最后一次服务调用）。

HistoricalServiceCall 实体应该有一个 ID、一个嵌入的 ServiceCall 字段（HistoricalServiceCall 的数据），如果您希望 OneToMany 是双向的，则可能还有一个与 Customer 的 ManyToOne 关联。

Customer 应该有一个与 HistoricalServiceCall 的 OneToMany 关联。

# java - 使用axis或axis2的Java Web服务？

> ID：11177308
> 
> 赞同：-1
> 
> 时间：2012-06-24T12:06:43.990
> 
> 标签：java, soap

我已经制作了 API，我想做它的网络服务。它不包含任何数据库。所以我不需要学习jdbc。但问题是轴在 ubuntu 中无法正常工作。Java2WSDL 工具无法正常工作。所以我切换到axis2。再次它非常广阔，我吓坏了。所以我的问题是我可以让轴在 ubuntu 中工作吗？请帮助我，让我知道我是否有任何其他框架可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:30:26.890

我已经使用了 Axis 1 和 2 两个框架，但大约一年前决定将我的项目转移到[spring ws](http://static.springsource.org/spring-ws/sites/2.0/)我认为你也可以尝试这个框架（仅用于 SOAP）我正在使用[restlet的 REST 服务](http://www.restlet.org/)

# sql-server - sql server中的条件分组？

> ID：11177316
> 
> 赞同：10
> 
> 时间：2012-06-24T12:08:03.167
> 
> 标签：sql-server, tsql, sql-server-2005

我有这个简单的查询：

```
SELECT YEAR(P.DateCreated)
      ,MONTH(P.DateCreated)
      ,COUNT(*) AS cnt
FROM   tbl1,
       tbl2....
GROUP BY
         MONTH(P.DateCreated)
        ,YEAR(P.DateCreated) 
```

这将发出：

![在此处输入图像描述](../Images/17f56ea2a2298270e1e57700fddda691.png)

现在我需要相同的查询，但每年**只**使用 groupby ：

所以 ：

```
SELECT YEAR(P.DateCreated)

      ,COUNT(*) AS cnt
FROM   tbl1,
       tbl2....
GROUP BY
         YEAR(P.DateCreated) 
```

我*不想*做 2 个查询。

有什么办法我可以在这里做conitional`group by`吗？

我可以将*一个替换为另一个*，但我**不能**将*一个替换为两个*...

```
GROUP BY
     CASE WHEN @timeMode='y' THEN YEAR(P.DateCreated)
          WHEN @timeMode='m' THEN MONTH(P.DateCreated), YEAR(P.DateCreated) end 
```

![在此处输入图像描述](../Images/4ede6cde63bf5a08d20a6ecd0f7449e5.png)

有什么帮助吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-24T12:12:52.700

使用两个单独的查询会更好，但可以这样做

```
GROUP BY YEAR(P.DateCreated),
       CASE 
          WHEN @timeMode='m' THEN MONTH(P.DateCreated) end 
```

因为`WHEN @timeMode <> 'm'`第二个`GROUP BY`表达式将`NULL`适用于所有行并且不影响结果。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T12:10:02.547

您可以使用一个`over`子句在一个查询中返回每年和每月的计数：

```
SELECT  distinct YEAR(P.DateCreated) as Year
,       MONTH(P.DateCreated) as Month
,       COUNT(*) over (partition by YEAR(P.DateCreated), MONTH(P.DateCreated)) 
            as MonthCount
,       COUNT(*) over (partition by YEAR(P.DateCreated)) as YearCount
FROM   YourTable P 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/c5fb1/5/0)

# c - 创建嵌套 pthread

> ID：11177317
> 
> 赞同：0
> 
> 时间：2012-06-24T12:08:31.470
> 
> 标签：c, pthreads

我很长时间没有使用 C，我不记得是否可以从另一个线程创建线程。如果我尝试，我会收到此错误：

```
sYSMALLOc: Assertion `(old_top == (((mbinptr) (((char *) &((av)->bins[((1) - 1) * 2])) - __builtin_offsetof (struct malloc_chunk, fd)))) && old_size == 0) || ((unsigned long) (old_size) >= (unsigned long)((((__builtin_offsetof (struct malloc_chunk, fd_nextsize))+((2 * (sizeof(size_t))) - 1)) & ~((2 * (sizeof(size_t))) - 1))) && ((old_top)->size & 0x1) && ((unsigned long)old_end & pagemask) == 0)' failed. 
```

中止

是否有解决方法来午餐另一个线程？我应该在属性中设置什么特别的东西才能让它工作吗？

谢谢

PS：根据大学项目的要求，我应该只使用 pthread 而不是 fork()

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:20:39.593

此错误与线程无关。这表明您已经破坏了 malloc 用于记账目的的内存，可能是通过溢出您从 malloc 获得的块中的缓冲区。

任何线程都可以创建新线程；对此没有任何限制。

# jsf - PrimeFaces 3.x 中的 UTF-8

> ID：11177319
> 
> 赞同：6
> 
> 时间：2012-06-24T12:08:43.600
> 
> 标签：jsf, jsf-2, primefaces, utf-8

我有一个非常简单的应用程序，在我的索引页面中有一个输入文本和一个转到 page2.xhtml 的按钮。

```
 <h:body>
        <h:form>
            <h:inputText value="#{mainBean.testValue}"/>
            <p:commandButton update="myoutput" value="ajax call" ajax="false"/>
            <p:separator />
            <h:commandButton action="#{mainBean.gotoPageTwo}" value="goto Page2"/>
            <br/>
            <h:outputText value="#{mainBean.testValue}" id="myoutput"/>
        </h:form>
    </h:body>
</html> 
```

我用 PrimeFaces 2.2.1 测试了这个应用程序，没有问题。但是在提交上述每个按钮后，我的 UTF-8 字符将被破坏。我测试了[过滤器](http://forum.primefaces.org/viewtopic.php?f=8&t=19925)，但它不起作用。这是 PrimeFaces 3.x 中的错误吗？任何机构都可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T12:16:39.540

`web.xml`您在 PrimeFaces 论坛上找到的答案示例不完整。`<filter-mapping>`失踪了。没有它，过滤器甚至根本不会运行。相应地添加它

```
<filter-mapping>
    <filter-name>Character Encoding Filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

当您已经使用 Servlet 3.0（Tomcat 7、Glassfish 3 等）时，另一种方法是仅使用[`@WebFilter`](http://docs.oracle.com/javaee/6/api/javax/servlet/annotation/WebFilter.html)类上的注释。不要忘记从 中删除过滤器条目`web.xml`。

```
@WebFilter("/*") 
```

有关 PrimeFaces 2.x-3.x 升级期间此字符编码问题原因的背景说明，另请参阅[通过 PrimeFaces 输入组件检索的 Unicode 输入已损坏](https://stackoverflow.com/questions/9634230/typing-chinese-with-primefaces-peditor-component)

# ruby - 无效的八进制数错误

> ID：11177320
> 
> 赞同：4
> 
> 时间：2012-06-24T12:08:44.700
> 
> 标签：ruby, api, octal

Ruby中无效的八进制数字错误，我该如何绕过它？我有一个数字，`0962833`我需要将其发送到 API，但我无法发送它，因为我收到了这个无效的八进制数字错误。

我需要解决这个问题，而不是把那个数字变成一个字符串，零不能被删除，这是必须的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T12:15:24.430

八进制数字使用数字 0 到 7。也许错误可能是数字 9 和数字中的数字 8。如果您想传递数字“962833”，请先尝试使用在线转换器将其转换为正确的八进制数。然后添加前导“0”并将其传递给您的函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T13:09:19.530

`0962833`因为前导零是八进制数，所以你不能有高于7的数字。如果你需要前导零，为什么不能把它变成一个字符串？前导零没有[数学意义](http://en.wikipedia.org/wiki/Significant_figures)，那么为什么应该有一种方法可以用数字类型来表示它们呢？

# c# - 使用 Evil Dicom 的 DICOM 图像中的 ROI 信息

> ID：11177329
> 
> 赞同：0
> 
> 时间：2012-06-24T12:10:34.643
> 
> 标签：c#, roi, medical-imaging, evil-dicom

目前我能够打开、显示和对 DICOM 图像进行一些图像处理。我也可以用鼠标画多边形。

有人可以告诉我如何使多边形的内部为 1 和外部为 0。然后我想做的是将这个“掩码”与原始图像相乘，从而创建一个感兴趣的区域。我对该投资回报率中的信息感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:08:42.253

用于`ImageMatrix(string)`创建合适的辅助对象。从此对象中，通过`Image`属性以浮点数形式访问像素数据。

接下来，您可以创建一个与像素数据具有相同尺寸和几何形状的填充矩形图像（矩形内部 1，矩形外部 0），将图像数据中的每个像素与相应的矩形像素相乘，并计算非- 合成（原始图像 x 矩形）图像中的零像素。

# python - 更改 django-admin-tools 的语言环境

> ID：11177330
> 
> 赞同：6
> 
> 时间：2012-06-24T12:10:43.280
> 
> 标签：python, django, internationalization, django-admin, django-admin-tools

在我的`settings.py`文件中，我有：

```
LANGUAGE_CODE = 'ru-RU' 
```

另外，我已经安装并使用了 django-admin-tools。但管理语言仍然是英语。我做错了什么？

PS。

```
$ cat settings.py | grep USE | grep -v USER
USE_I18N = True
USE_L10N = True
USE_TZ = True 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T13:24:13.557

您需要专门为管理应用设置语言。由于 django 不提供语言下拉菜单作为默认登录的一部分，因此您有几个选项：

1.  使用超级用户/员工凭据和正确的语言登录到您的正常（非管理员视图），然后切换到管理员 URL。

2.  更新管理模板并添加语言下拉菜单，[请参阅此片段](http://djangosnippets.org/snippets/751/)。

3.  创建一些自定义中间件来设置管理员的语言：

    ```
    from django.conf import settings
    from django.utils import translation

    class AdminLocaleMiddleware:

        def process_request(self, request):
            if request.path.startswith('/admin'):
                request.LANG = getattr(settings, 'ADMIN_LANGUAGE_CODE',
                                       settings.LANGUAGE_CODE)
                translation.activate(request.LANG)
                request.LANGUAGE_CODE = request.LANG 
    ```

    将其添加到您的[`MIDDLEWARE_CLASSES`](https://docs.djangoproject.com/en/dev/ref/settings/#middleware-classes)

    ```
    MIDDLEWARE_CLASSES = {
        # ...
        'foo.bar.AdminLocaleMiddleware',
        # ...
    } 
    ```

    为管理员设置您想要的语言`settings.py`：

    ```
    ADMIN_LANGUAGE_CODE = 'ru-RU' 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:14:58.167

检查您是否启用了翻译和本地化`settings.py`：

```
USE_I18N = True
USE_L10N = True 
```

还要检查您是否有俄语的翻译文件 ( `.mo`, `.po`)。

# css - css精灵的背景定位

> ID：11177331
> 
> 赞同：2
> 
> 时间：2012-06-24T12:11:13.863
> 
> 标签：css, sprite

css 属性是否`background-position`用于指示应在元素中的何处显示图像（[如此](http://www.w3schools.com/cssref/playit.asp?filename=playcss_background-position)）或应显示图像的哪个部分（如使用 sprite 时）？

在我的例子中，我有一个`300px`宽度的 div，我希望图像显示在该元素的右侧，所以通常我只是`center right`在我的背景声明中添加了一个，虽然现在我的图像是一种精神，所以我该如何控制我要显示的图像的坐标？在我看来，这个背景属性以两种不同的方式起作用。我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:20:32.447

如果要放置精灵元素的位置大于元素，则需要在其周围放置空白（透明）。而且你不能使用像中心这样的关键字，你需要使用像素，因为你会居中整个精灵而不是你的元素。

使用精灵就像使用背景大于背景图像的窗口一样，因此您需要定位窗口（实际上是定位背景）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:23:45.010

如果您的容器大于您要显示的背景精灵图像部分，则图像的另一部分也将显示。更好地使用 Sprite cow 生成 sprite，它将为您提供 sprite 图像不同部分的 css

[http://www.spritecow.com/](http://www.spritecow.com/)

# c# - c# 中是否有任何类型的“时间处理程序”？

> ID：11177332
> 
> 赞同：-1
> 
> 时间：2012-06-24T12:11:31.213
> 
> 标签：c#, time, timer, handler

我想要一个持续运行并不断监控时间的程序。当它是下午 15:30（仅作为示例）时，它将执行 Console.Beep()（仅作为另一个示例）。关于如何做到这一点的任何想法？是的，我搜索了互联网，我发现了一些关于时间管理的 MSDN 资料，但没有任何关于如何在特定时间持续聆听的内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:13:41.583

你可能想看看[Quartz.Net](http://quartznet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:56:41.860

我还没有测试过这段代码，但这是一个开始。该方法应该永远循环并在时间为 15:30 时发出哔哔声。

```
static void BeepWhen1530()
{
  var alarmTime = new TimeSpan(15, 30, 00);
  while (true)
  {
    var clock = DateTime.Now.TimeOfDay;
    if (clock >= alarmTime && clock < alarmTime + TimeSpan.FromMinutes(1.0))
    {
      Console.WriteLine("Alarm: BEEP!");
      Console.Beep();

      // wait for two minutes so the alarm won't go off again until tomorrow
      Thread.Sleep(TimeSpan.FromMinutes(2.0));
    }

    // wait some time so we won't consume too much cpu cycles
    Thread.Sleep(TimeSpan.FromMilliseconds(500.0));
  }
} 
```

# android - showDialog 不显示自定义对话框

> ID：11177335
> 
> 赞同：1
> 
> 时间：2012-06-24T12:12:04.093
> 
> 标签：android, dialog

我刚刚按照 android 网站的建议定义了一个对话框，但它没有在按钮单击时显示，一些代码 scracht（我没有错误）： static final int DIALOG_A = 1; 静态最终 int DIALOG_B = 2; 文本视图文本X；

```
protected Dialog onCreateDialog(int id, String text) {
    Dialog dialog = new Dialog(this);
    dialog.setContentView(decrytedText);
    Log.v("DialogTest", "  onCreateDialog(): +++ START +++");

    switch(id) 
    {
        case DIALOG_A:
            dialog.setTitle(this.getString(R.string.dialog_title_wrong_key));
            break;
        case DIALOG_B:
            dialog.setTitle(this.getString(R.string.dialog_title_ok_key));
            break;
    }
    return dialog;
}

 somebutton.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {
                    Object butts[] = (Object []) v.getTag();

                    try 
                    {
                        Log.v("DialogTest", " try");
                        String decrypted ="OK GO";
                        textX.setText(decrypted);
                        showDialog(DIALOG_A);
                    } 
                    catch (Exception e) 
                    {
                        Log.v("DialogTest", "catch");
                        textX.setText(R.string.dialog_no_wrong_key);
                        showDialog(DIALOG_B);
                    }
                }
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:15:08.053

我认为应该有这样的 onCreateDialog 签名作为[链接](http://developer.android.com/reference/android/app/Activity.html#onCreateDialog%28int%29)

```
@Override
protected Dialog onCreateDialog(int id)

// or

@Override
protected Dialog onCreateDialog(int id, Bundle args) 
```

[链接1](http://www.vogella.com/articles/AndroidDialogs/article.html)

# jquery - 如何删除锚点的跳转？

> ID：11177336
> 
> 赞同：1
> 
> 时间：2012-06-24T12:12:21.850
> 
> 标签：jquery, css, anchor

我有一个名为#anchors 的菜单（带有 ul 和 li），它们位于菜单的右侧，所以我不想在页面中跳转（信息已经在屏幕上）。我尝试了 onclick 事件，但它不起作用（我已经在我的页面上加载了 Jquery，所以我不知道为什么它不起作用。我已经阅读了这个网站上我的问题的几十页，但没有任何帮助。

如果有人有避免锚点跳跃的答案，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:14:13.230

```
$("a[href^='#']").click(function(e){
     e.preventDefault();
}); 
```

这将捕获点击事件并阻止默认的跳跃和导航动作。选择器适用于具有以“#”开头的链接的元素，例如锚点。

# java - java - 如何在Java中迭代时在List中添加元素？

> ID：11177348
> 
> 赞同：36
> 
> 时间：2012-06-24T12:13:48.167
> 
> 标签：java, collections, arraylist, loops

假设我有一个类似的列表：

```
List<String> list = new ArrayList<>();
list.add("a");
list.add("h");
list.add("f");
list.add("s"); 
```

在遍历此列表时，我想在列表末尾添加一个元素。但我不想遍历新添加的元素，因为我想迭代到列表的初始大小。

```
for (String s : list)
     /* Here I want to add new element if needed while iterating */ 
```

有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-06-24T12:21:20.387

您不能为此使用 foreach 语句。foreach 在内部使用迭代器：

> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。

（来自 ArrayList javadoc）

在 foreach 语句中，您无权访问迭代器的 add 方法，并且无论如何这仍然不是您想要的 add 类型，因为它不会在末尾追加。您需要手动遍历列表：

```
int listSize = list.size();
for(int i = 0; i < listSize; ++i)
  list.add("whatever"); 
```

请注意，这仅对允许随机访问的列表有效。您可以通过检查列表是否实现 RandomAccess 标记接口来检查此功能。ArrayList 具有随机访问权限。链表没有。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-24T12:17:16.357

遍历列表的副本并将新元素添加到原始列表中。

```
for (String s : new ArrayList<String>(list))     
{
    list.add("u");
} 
```

请参阅 [如何制作 List 类型的 ArrayList 对象的副本？](https://stackoverflow.com/questions/3410035/how-to-make-a-copy-of-arraylist-object-which-is-type-of-list)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-24T12:18:41.653

只需迭代老式方式，因为您需要显式索引处理：

```
List myList = ...
...
int length = myList.size();
for(int i = 0; i < length; i++) {
   String s = myList.get(i);
   // add items here, if you want to
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-24T12:16:36.833

您可以迭代原始列表的副本（克隆）：

```
List<String> copy = new ArrayList<String>(list);
for (String s : copy) {
    // And if you have to add an element to the list, add it to the original one:
    list.add("some element");
} 
```

请注意，在迭代列表时甚至不可能将新元素添加到列表中，因为它会导致`ConcurrentModificationException`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T12:20:34.853

为此，我将元素添加到一个新的空 tmp 列表，然后使用`addAll()`. 这可以防止不必要地复制大型源列表。

想象一下当 OP 的原始列表中有几百万个项目时会发生什么；有一段时间你会吸收两倍的内存。

除了节省资源之外，这种技术还可以防止我们不得不求助于 80 年代风格的 for 循环和使用在某些情况下可能没有吸引力的有效数组索引。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-05T20:31:02.727

为了帮助解决这个问题，我创建了一个函数来使它更容易实现。

```
public static <T> void forEachCurrent(List<T> list, Consumer<T> action) {
    final int size = list.size();
    for (int i = 0; i < size; i++) {
        action.accept(list.get(i));
    }
} 
```

例子

```
 List<String> l = new ArrayList<>();
    l.add("1");
    l.add("2");
    l.add("3");
    forEachCurrent(l, e -> {
        l.add(e + "A");
        l.add(e + "B");
        l.add(e + "C");
    });
    l.forEach(System.out::println); 
```

# javascript - 如何使用 eval 在 JavaScript 中创建 JavaScript 解释器？

> ID：11177349
> 
> 赞同：2
> 
> 时间：2012-06-24T12:14:09.937
> 
> 标签：javascript, eval, interpreter, jquery-terminal

在 JavaScript 中使用`eval`. 我得到了这个（使用 jQuery 终端）：

```
term = $('#term_demo').terminal(function(command, term) {
    if (command !== '') {
        var result = window.eval("(" + command + ")");
        if (result !== undefined) {
            term.echo(String(result));
        }
    } else {
       term.echo('');
    }
}, {
    greetings: 'Javascript Interpreter',
    name: 'js_demo',
    height: 200,
    prompt: 'js> '
}); 
```

[演示](http://terminal.jcubic.pl/#demo)

`function foo() { ... }`但是当我执行`foo`未定义我需要使用时它不起作用`foo = function() { ... }`。eval 就像在`(function() { <code> })()`. 是否有更复杂的代码也不起作用？

是否可以在不使用[js.js](https://github.com/jterrace/js.js)的情况下使用简单代码创建一个 JavaScript 解释器，它与浏览器控制台的工作方式相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:19:24.783

我创建了一个书签，它在页面中附加了一种 REPL，专为主要的五种浏览器（Chrome 1+、IE 6+、Firefox 1+、Safari 3+、Opera 9+^(不记得确切的版本)）而设计.
评估代码的核心组件发布在下面，稍作修改+注释。

```
/**
 * Evaluates some code in the global scope.
 * @param String code: Code to eval
 * @return Stringified result, prefixed with 'E:' if error.
 */
function globalEval(/*string*/ code) {
    var win = window, r, raw;
    try {
        if (win.execScript) { // eval in IE sucks, so use execScript instead
            r = win.$_$_$globalEval$_$_$ = {c:code};
            win.execScript('try{$_$_$globalEval$_$_$.r=eval($_$_$globalEval$_$_$.c);}catch(e){$_$_$globalEval$_$_$.e=e}');
            // /*Optional clean-up:*/ delete win.$_$_$globalEval$_$_$;
            if (r.e) throw r.e; // Error
            raw = r.r;
        } else {
            raw = win.eval(code);
        }
        r = '' + raw; // Stringify in the try-block
                      // It is possible that an error is thrown
                      // for example, for the following code: ({toString:1})
    } catch(err) {
        r = (err + ''); // Convert error to string
        // IE: If found, "[object" will be at index zero, which is falsy
        if (!r.indexOf('[object')) r = err.message;
        // r = 
        r = 'E:' + (raw=r);
    } finally {
        // raw = unmodified result (or Error instance)
        // FOR THIS EXAMPLE, raw is not used, and string r is returned
        return /*string*/ r;
    }
} 
```

我已经在一个表单中实现了该功能，其中包含几个控件，包括一个输入+输出文本区域。

Note: The code is evaluated in the global context. And such, any variables in `code` will be leaked to the global scope. For an interpreter, you could use an iframe to create a new scope (and modify `var win` in my function).

```
var win = frames['name_of_frame'], ... // or
var win = frame_DOM_element.contentWindow, ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:16:12.933

您在传入命令周围附加的括号会产生非法语法。你应该用一个[匿名的自执行函数](http://markdalgleish.com/2011/03/self-executing-anonymous-functions/)来包装它。

示例：http: [//jsfiddle.net/bW6Fv/1/](http://jsfiddle.net/bW6Fv/1/)

```
var command = "function foo(x){return x+x;} alert(foo(10));";

window.eval("!function(){" + command + "}()");​ 
```

## 编辑

如果您希望您的评估脚本在全球范围内可用，您必须将它们展开或显式地将值分配给全局窗口对象。

示例：http: [//jsfiddle.net/bW6Fv/2/](http://jsfiddle.net/bW6Fv/2/)

```
var command = "window.foo = function(x){return x+x;}; alert(foo(10));";

window.eval("!function(){ " + command + "}();");
window.eval("alert(foo(20));");

command = "function bar(x){return x / 2;}; alert(bar(10));";

window.eval(command);
window.eval("alert(bar(20));"); 
```

# wpf - WPF DataGrid 忽略 SortDescription

> ID：11177351
> 
> 赞同：10
> 
> 时间：2012-06-24T12:14:27.993
> 
> 标签：wpf, sorting, datagrid, collectionview

关于 WPF DataGrid（.NET 4.0 中的 System.Windows.Controls.DataGrid）的排序，我在这里遇到了一个奇怪的问题。

它的 ItemsSource 绑定到 datacontext 对象的一个​​属性：

```
<DataGrid HeadersVisibility="Column" SelectedIndex="0" MinHeight="30" ItemsSource="{Binding FahrtenView}" AutoGenerateColumns="False" x:Name="fahrtenDG"> 
```

FahrtenView 看起来像这样：

```
 public ICollectionView FahrtenView
    {
        get
        {
            var view = CollectionViewSource.GetDefaultView(_fahrten);
            view.SortDescriptions.Add(new SortDescription("Index", ListSortDirection.Ascending));
            return view;
        }
    } 
```

DataGrid 得到排序。但是，它仅在第一次分配 DataContext 时才进行排序。之后，更改 DataContext（通过在数据层次结构中选择另一个“父”对象）仍然会导致属性 FahrtenView 被评估（我可以放入一个 BP 并且调试器在那里停止）但是添加的排序描述被完全忽略，因此排序确实不再工作了。

即使在每个 DataContextChange 上调用 fahrtenDG.Items.Refresh() 也无济于事。

我很确定这是对 WPF DataGrid 进行排序时要走的路，不是吗？那么为什么它在第一次被调用时就完美地完成了它的工作，却如此顽固地拒绝工作呢？

任何的想法？我将不胜感激。

干杯，亨德里克

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T14:01:49.363

我从 DataGrid 继承来简要了解它的内容。我发现，由于某些神秘的原因，虽然第一次*调用 OnItemsSourceChanged*时，一切看起来都很好，但在每次调用*OnItemsSourceChanged*时，ItemsSource 集合视图的 SortDescription 列表**都是空**的。

出于这个原因，我添加了一个在 OnItemsSourceChanged 结束时调用的自定义*SetupSortDescription*事件。现在我在事件处理函数中添加排序描述，这就像一个魅力。

我认为这是 WPF 工具包 DataGrid 中的一个错误。

这是我重写的 OnItemsSourceChanged

```
 protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
    {
        if (SetupSortDescriptions != null && (newValue != null)) 
            SetupSortDescriptions(this, new ValueEventArgs<CollectionView>((CollectionView)newValue)); 

        base.OnItemsSourceChanged(oldValue, newValue);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-18T17:36:39.160

我对 Hendrik 的回答做了一些改进，以使用 MVVM 而不是事件。

```
 public static readonly DependencyProperty SortDescriptionsProperty = DependencyProperty.Register("SortDescriptions", typeof(List<SortDescription>), typeof(ReSolverDataGrid), new PropertyMetadata(null));

    /// <summary>
    /// Sort descriptions for when grouped LCV is being used. Due to bu*g in WCF this must be set otherwise sort is ignored.
    /// </summary>
    /// <remarks>
    /// IN YOUR XAML, THE ORDER OF BINDINGS IS IMPORTANT! MAKE SURE SortDescriptions IS SET BEFORE ITEMSSOURCE!!! 
    /// </remarks>
    public List<SortDescription> SortDescriptions
    {
        get { return (List<SortDescription>)GetValue(SortDescriptionsProperty); }
        set { SetValue(SortDescriptionsProperty, value); }
    }

    protected override void OnItemsSourceChanged(System.Collections.IEnumerable oldValue, System.Collections.IEnumerable newValue)
    {
        //Only do this if the newValue is a listcollectionview - in which case we need to have it re-populated with sort descriptions due to DG bug
        if (SortDescriptions != null && ((newValue as ListCollectionView) != null))
        {
            var listCollectionView = (ListCollectionView)newValue;
            listCollectionView.SortDescriptions.AddRange(SortDescriptions);
        }

        base.OnItemsSourceChanged(oldValue, newValue);
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-07-16T22:14:20.073

我使用来自 kat 的 interited DataGrid 为 WPF DataGrid 创建一个行为。

该行为保存初始的 SortDescriptions 并将它们应用于`ItemsSource`. 您还可以提供一个`IEnumerable<SortDescription>`在每次更改时都会引起响应的选项。

*行为*

```
public class DataGridSortBehavior : Behavior<DataGrid>
{
    public static readonly DependencyProperty SortDescriptionsProperty = DependencyProperty.Register(
        "SortDescriptions",
        typeof (IEnumerable<SortDescription>),
        typeof (DataGridSortBehavior),
        new FrameworkPropertyMetadata(null, SortDescriptionsPropertyChanged));

    /// <summary>
    ///     Storage for initial SortDescriptions
    /// </summary>
    private IEnumerable<SortDescription> _internalSortDescriptions;

    /// <summary>
    ///     Property for providing a Binding to Custom SortDescriptions
    /// </summary>
    public IEnumerable<SortDescription> SortDescriptions
    {
        get { return (IEnumerable<SortDescription>) GetValue(SortDescriptionsProperty); }
        set { SetValue(SortDescriptionsProperty, value); }
    }

    protected override void OnAttached()
    {
        var dpd = DependencyPropertyDescriptor.FromProperty(ItemsControl.ItemsSourceProperty, typeof (DataGrid));
        if (dpd != null)
        {
            dpd.AddValueChanged(AssociatedObject, OnItemsSourceChanged);
        }
    }

    protected override void OnDetaching()
    {
        var dpd = DependencyPropertyDescriptor.FromProperty(ItemsControl.ItemsSourceProperty, typeof (DataGrid));
        if (dpd != null)
        {
            dpd.RemoveValueChanged(AssociatedObject, OnItemsSourceChanged);
        }
    }

    private static void SortDescriptionsPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        if (d is DataGridSortBehavior)
        {
            ((DataGridSortBehavior) d).OnItemsSourceChanged(d, EventArgs.Empty);                
        }
    }

    public void OnItemsSourceChanged(object sender, EventArgs eventArgs)
    {
        // save description only on first call, SortDescriptions are always empty after ItemsSourceChanged
        if (_internalSortDescriptions == null)
        {
            // save initial sort descriptions
            var cv = (AssociatedObject.ItemsSource as ICollectionView);
            if (cv != null)
            {
                _internalSortDescriptions = cv.SortDescriptions.ToList();
            }
        }
        else
        {
            // do not resort first time - DataGrid works as expected this time
            var sort = SortDescriptions ?? _internalSortDescriptions;

            if (sort != null)
            {
                sort = sort.ToList();
                var collectionView = AssociatedObject.ItemsSource as ICollectionView;
                if (collectionView != null)
                {
                    using (collectionView.DeferRefresh())
                    {
                        collectionView.SortDescriptions.Clear();
                        foreach (var sorter in sort)
                        {
                            collectionView.SortDescriptions.Add(sorter);
                        }
                    }
                }
            }
        }
    }
} 
```

*带有可选 SortDescriptions 参数的 XAML*

```
<DataGrid  ItemsSource="{Binding View}" >
    <i:Interaction.Behaviors>
        <commons:DataGridSortBehavior SortDescriptions="{Binding SortDescriptions}"/>
    </i:Interaction.Behaviors>
</DataGrid> 
```

*ViewModel ICollectionView 设置*

```
View = CollectionViewSource.GetDefaultView(_collection);
View.SortDescriptions.Add(new SortDescription("Sequence", ListSortDirection.Ascending)); 
```

*可选：ViewModel 属性，用于提供可变的 SortDescriptions*

```
public IEnumerable<SortDescription> SortDescriptions
{
    get
    {
        return new List<SortDescription> {new SortDescription("Sequence", ListSortDirection.Ascending)};
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T11:07:47.233

如果您在同一个集合上调用 CollectionViewSource.GetDefaultView(..) ，您将获得相同的 collectionview 对象，这可以解释为什么添加相同的 sortdescription 结构不会触发更改。

fahrtenDG.Items.Refresh() 无法工作，因为您没有刷新绑定的集合。

CollectionViewSource.GetDefaultView(_fahrten).Refresh() 应该可以工作 - 我会保留对它的引用。

从您的解释中，我不太了解 datacontext 的更改-您是否将其更改为新对象？如果是这样，您的所有绑定都应该重新评估。它是否总是同一个集合，并且您在 listelements 上的 Index 属性会发生变化，这就是您期望发生变化的原因 - 如果是这样，您的列表元素可能需要 INotifyPropertyChanged 实现，因为如果集合没有改变，那么就不需要采取。

您的 OnItemsSourceChanged(..) 实现似乎是一个 hack :)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-18T18:47:45.963

我试图用视图模型解决这个问题——通过在 getter 中重新创建 ICollectionView 并疯狂地调用 DeferRefresh()。但是，我可以确认 Hendrik 的解决方案是唯一可靠的解决方案。我想在下面发布完整的代码，以防它对某人有所帮助。

看法

```
<controls:SortableDataGrid
    ItemsSource="{Binding InfoSorted}"
    PermanentSort="{Binding PermanentSort}"
    CanUserSortColumns="False" /> 
```

查看模型

```
public ObservableCollection<Foo> Info { get; private set; }
public ICollectionView InfoSorted { get; private set; }
public IEnumerable<SortDescription> PermanentSort { get; private set; } 
```

自定义控制

```
public class SortableDataGrid : DataGrid
    {
        public static readonly DependencyProperty PermanentSortProperty = DependencyProperty.Register(
            "PermanentSort",
            typeof(IEnumerable<SortDescription>),
            typeof(SortableDataGrid),
            new FrameworkPropertyMetadata(null));

        public IEnumerable<SortDescription> PermanentSort
        {
            get { return (IEnumerable<SortDescription>)this.GetValue(PermanentSortProperty); }
            set { this.SetValue(PermanentSortProperty, value); }
        }

        protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
        {
            var sort = this.PermanentSort;
            if (sort != null)
            {
                sort = sort.ToList();
                var collectionView = newValue as ICollectionView;
                if (collectionView != null)
                {
                    using (collectionView.DeferRefresh())
                    {
                        collectionView.SortDescriptions.Clear();
                        foreach (SortDescription sorter in sort)
                        {
                            collectionView.SortDescriptions.Add(sorter);
                        }
                    }
                }
            }

            base.OnItemsSourceChanged(oldValue, newValue);
        }
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-24T00:47:59.190

我赞同[Juergen](https://stackoverflow.com/a/31465452/2998072)使用附加行为的方法。但是，由于我在视图模型类中声明 CollectionViewSource 对象时出现了这个问题的版本，因此我发现通过添加事件处理程序更直接地解决问题，`SortDescriptions_CollectionChanged`如下面的代码所示。此代码完全在视图模型类中。

```
public CollectionViewSource FilteredOptionsView
{
    get
    {
        if (_filteredOptionsView == null)
        {
            _filteredOptionsView = new CollectionViewSource
            {
                Source = Options,
                IsLiveSortingRequested = true
            };
            SetOptionsViewSorting(_filteredOptionsView);
            _filteredOptionsView.View.Filter = o => ((ConstantOption)o).Value != null;
        }
        return _filteredOptionsView;
    }
}
private CollectionViewSource _filteredOptionsView;

protected void SetOptionsViewSorting(CollectionViewSource viewSource)
{
    // define the sorting
    viewSource.SortDescriptions.Add(_optionsViewSortDescription);
    // subscribe to an event in order to handle a bug caused by the DataGrid that may be
    // bound to the CollectionViewSource
    ((INotifyCollectionChanged)viewSource.View.SortDescriptions).CollectionChanged
                                    += SortDescriptions_CollectionChanged;
}

protected static SortDescription _optionsViewSortDescription
                    = new SortDescription("SortIndex", ListSortDirection.Ascending);

void SortDescriptions_CollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
{
    var collection = sender as SortDescriptionCollection;
    if (collection == null) return;
    // The SortDescriptions collection should always contain exactly one SortDescription.
    // However, when DataTemplate containing the DataGrid bound to the ICollectionView
    // is unloaded, the DataGrid erroneously clears the collection.
    if (collection.None())
        collection.Add(_optionsViewSortDescription);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-03T20:13:09.457

谢谢！这让我发疯！我修改了您的代码以满足我的需要。它基本上保留了排序描述，并在它们被吹走时恢复它们。这可能会帮助其他人：

```
private List<SortDescription> SortDescriptions = null;

protected override void OnItemsSourceChanged(IEnumerable oldValue, IEnumerable newValue)
{
 if (newValue is CollectionView collectionView)
  if (SortDescriptions == null)
   SortDescriptions = new List<SortDescription>(collectionView.SortDescriptions);
  else
   foreach (SortDescription sortDescription in SortDescriptions)
    collectionView.SortDescriptions.Add(sortDescription);

 base.OnItemsSourceChanged(oldValue, newValue);
} 
```

# excel - excel vba通过鼠标获取用户选择范围的范围并将其复制到剪贴板

> ID：11177355
> 
> 赞同：0
> 
> 时间：2012-06-24T12:14:50.130
> 
> 标签：excel, vba

我是 excel 宏的新手。我想将所选范围复制到剪贴板。

下面是存在一半解决方案的链接，它在弹出消息框中提供输出。

[Excel VBA通​​过鼠标获取用户选择范围的范围](https://stackoverflow.com/questions/3686787/excel-vba-get-range-of-user-selected-range-by-mouse)

就像是

```
Sub macro1()
  MsgBox Selection.Address(ReferenceStyle:=xlA1, _
                           RowAbsolute:=False, ColumnAbsolute:=False)
End Sub 
```

但是如果我想逃避弹出窗口并直接将结果复制到剪贴板？？？？

示例：如果我选择了从 B15 到 E40 和 F23 单元格的单元格，它会将消息显示为“B15：E40，F23”，并且我想复制此消息，而不是这些选定单元格的单元格内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:36:10.513

一个简单`Selection.Copy`的将所选范围放置到剪贴板:)

**跟进**

要复制所选范围的单元格地址，请执行此操作。

```
'~~> Set a reference to Microsoft Forms Object Library
Sub Sample()
    Dim strAddr As String
    Dim MyDataObj As New DataObject

    strAddr = Selection.Address

    '~~> This will put the address string in the Clipboard. To test this
    '~~> After you run this macro, press CTL - V in Notepad.      
    MyDataObj.SetText strAddr        
    MyDataObj.PutInClipboard
End Sub 
```

**更多跟进**

> 我想用正斜杠替换逗号？？？

正如我的评论中提到的，用斜线替换逗号。

```
strAddr = Selection.Address
strAddr = Replace(strAddr, ",", "/") 
```

# java - Java - 为什么原始包装类（例如整数）的值不在递归调用中维护？

> ID：11177358
> 
> 赞同：3
> 
> 时间：2012-06-24T12:15:04.837
> 
> 标签：java, recursion

我正在使用递归，我希望一个`Integer`对象在递归调用中保留其值。例如

```
public void recursiveMethod(Integer counter) {
    if (counter == 10)
        return;
    else {
        counter++;
        recursiveMethod(counter);
    }
}

public static void main(String[] args) {
    Integer c = new Integer(5);
    new TestSort().recursiveMethod(c);
    System.out.println(c); // print 5
} 
```

但是在下面的代码中（我使用的是`Counter`类而不是`Integer`包装类，该值保持不变

```
public static void main(String[] args) {
    Counter c = new Counter(5);
    new TestSort().recursiveMethod(c);
    System.out.println(c.getCount()); // print 10
}

public void recursiveMethod(Counter counter) {
    if (counter.getCount() == 10)
        return;
    else {
        counter.increaseByOne();
        recursiveMethod(counter);
    }
}

class Counter {

    int count = 0;

    public Counter(int count) {
        this.count = count;
    }

    public int getCount() {
        return this.count;
    }

    public void increaseByOne() {
        count++;
    }
} 
```

那么为什么原始包装类的行为不同。毕竟，两者都是对象，并且在递归调用中，我传递的是`Integer`对象，而不仅仅是`int`对象`Integer`还必须保持其值。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T12:23:22.713

Java 包装器类型是*不可变*的。他们的价值观永远不会改变。

`counter++`是真的`counter = counter + 1`；即创建了一个新对象。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T12:23:36.563

一些对象，如 String ， Integer 等......即使它们是对象也是不可变的......

试试这个链接......

[http://www.javaranch.com/journal/2003/04/immutable.htm](http://www.javaranch.com/journal/2003/04/immutable.htm)

我建议您执行以下操作......

```
 public void recursiveMethod(Integer counter) 
         {
            if (counter == 10)
            return counter;  // return the value
            else 
            {
                    counter++;
                    counter=recursiveMethod(counter);
             }
         }

         public static void main(String[] args) 
         {
           Integer c = new Integer(5);
           c=(Integer)new TestSort().recursiveMethod(c);
           System.out.println(c); // print 5
          } 
```

我相信你会发现使用两者的唯一区别是

使用 int 就像使用任何其他语言一样使用 java 原语，而 Integer 包含诸如`wait(), notify(),parsing,hashcode` etc 之类的方法......

# java - JAVA中的if语句

> ID：11177360
> 
> 赞同：-6
> 
> 时间：2012-06-24T12:15:17.627
> 
> 标签：java, if-statement

我的代码中有两个“if”语句，如果一个“if”语句为真，我该怎么做才能自动忽略/禁用另一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:00:28.357

```
 if(maxValY < 3)
    {
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 740,490);
        p.drawString(aw,840,490);
        p.drawString("Graph Height = ", 740,510);
        String ah = String.valueOf(y1);
        p.drawString(ah,846,510);
    } 
    else
    {   if (minValx == -1 || minValx == - 2 || minValx == - 3){
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 740,90);
        p.drawString(aw,840,90);
        p.drawString("Graph Height = ", 740,110);
        String ah = String.valueOf(y1);
        p.drawString(ah,846,110);
        }
        else{
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 50,90);
        p.drawString(aw,150,90);
        p.drawString("Graph Height = ", 50,110);
        String ah = String.valueOf(y1);
        p.drawString(ah,156,110);
        }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:50:29.263

所以你有以下内容：

```
if(condition1){
   block1;
}
if(condition2){
   block2;
}else{
   block3;
} 
```

要禁用/忽略第二个`if`，您可以使用以下`else if`语句：

```
if(condition1){
   block1;
} else if(condition2){
   block2;
}else{
   block3;
} 
```

或之后的退货声明`block1`

```
if(condition1){
   block1;
   return;
}
if(condition2){
   block2;
}else{
   block3;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:29:30.267

至少有两个答案。一种是在第一个语句的底部放置一个 return`if`语句。我不喜欢这样，因为它可能不是一个好的通用解决方案。

另一个答案是稍微重组你的代码......

首先，由于 maxValX >= 3 的情况似乎不是问题所在，我会通过反转第一个`if`条件来解决这个问题：

```
 if (maxValY >= 3) {
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 50, 90);
        p.drawString(aw, 150, 90);
        p.drawString("Graph Height = ", 50, 110);
        String ah = String.valueOf(y1);
        p.drawString(ah, 156, 110);
    } else if (maxValY < 3) {
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 740, 490);
        p.drawString(aw, 840, 490);
        p.drawString("Graph Height = ", 740, 510);
        String ah = String.valueOf(y1);
        p.drawString(ah, 846, 510);
    }
    if (minValx == -1 || minValx == -2 || minValx == -3) {
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 740, 90);
        p.drawString(aw, 840, 90);
        p.drawString("Graph Height = ", 740, 110);
        String ah = String.valueOf(y1);
        p.drawString(ah, 846, 110);
    } 
```

所以发生的一切就是我把“不重复的 if 语句问题”放在了顶部。

现在，我们有两个条件，一个处理`minValX`，一个处理`maxValY`。但是我们现在注意到每个的内容几乎相同。我们通过稍微重构代码来解决这个问题（并潜入 else...）：

```
 if (maxValY >= 3) {
        p.setColor(Color.black);
        //display the value of graph width and graph height
        aw = String.valueOf(x1);
        p.drawString("Graph Width = ", 50, 90);
        p.drawString(aw, 150, 90);
        p.drawString("Graph Height = ", 50, 110);
        String ah = String.valueOf(y1);
        p.drawString(ah, 156, 110);
    } else if (maxValY < 3) {
        q(491, 510);
    } else if (minValx == -1 || minValx == -2 || minValx == -3) {
        q(90, 110);
    } else {
        throw new RuntimeException("This cannot possibly happen ;-)");
    }
}

private void q(int loc1, int loc2) {
    p.setColor(Color.black);
    //display the value of graph width and graph height
    aw = String.valueOf(x1);
    p.drawString("Graph Width = ", 740, loc1);
    p.drawString(aw, 840, loc1);
    p.drawString("Graph Height = ", 740, loc2);
    String ah = String.valueOf(y1);
    p.drawString(ah, 846, loc2);
} 
```

然后我们注意到代码块*仍然*几乎相同。重构...

```
private void someName() {
    // ...
    if (maxValY >= 3) {
        q(50, 90, 510);
    } else if (maxValY < 3) {
        q(740, 490, 510);
    } else if (minValx == -1 || minValx == -2 || minValx == -3) {
        q(740, 90, 110);
    } else {
        throw new RuntimeException("This cannot possibly happen ;-)");
    }
    // ...
}

private void q(int base, int graphWidth, int graphHeight) {
    p.setColor(Color.black);
    //display the value of graph width and graph height
    aw = String.valueOf(x1);
    p.drawString("Graph Width = ", base, graphWidth);
    p.drawString(aw, base+100, graphWidth);
    p.drawString("Graph Height = ", base, graphHeight);
    String ah = String.valueOf(y1);
    p.drawString(ah, base+100+6, graphHeight);
} 
```

所以我们看到除了一些常量外，所有三个部分的代码基本相同。通过重构它们，我们减少了必须调试的代码量。此外，我们`if`清楚地看到了语句的结构，并将逻辑与实际工作分开，这经常产生额外的红利。

# asp.net - 在 iis 上运行的 ODBC 驱动的 ASP.NET 应用程序在特定系统上不起作用

> ID：11177366
> 
> 赞同：0
> 
> 时间：2012-06-24T12:16:57.510
> 
> 标签：asp.net, iis, odbc

我在使用 IIS、asp.net 和 ODBC 时遇到了一个奇怪的问题。我的应用程序是由 SQL 服务器通过 ODBC 驱动程序驱动的（我知道这是不好的做法，但我的整个 DAL 已经编写完毕，不会更改）。问题是，当我使用 Web 界面运行 SP 时，在生产服务器以外的任何其他计算机上它都可以正常工作，但在生产服务器上出现以下错误：

**异常消息：System.Data.Odbc.OdbcException (0x80131937)：错误 [42000] [Microsoft] [ODBC SQL Server Driver][SQL Server] 将数据类型 nvarchar 转换为 int 时出错**

显然，当我在管理工作室下运行它时，它工作正常。我认为问题出在 IIS 和 odbc 驱动程序之间，但我不确定到底在哪里。

我正在运行 .net 框架 4。

这是调用方法：

```
ODBCComm command = new ODBCComm();          
        command.Query = "SP_web_update_calls_dest @id=?,@name=? ,@ivrCode=?,@DDI=?,@destType=?,@trkGroup=?,@result=? output";
        command.AddInputParam(id);
        return AddParamsAndExecute(name, ivrCode, DDI, destType, trkGroup, command); 
```

它基本上包裹了arround：OdbcCommand.ExecuteDirect();

非常感谢，尤瓦尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:37:05.703

我相信您的第一个参数正在 ID 点中使用。我不知道为什么这会在预生产中起作用而只在生产中失败，但是试试这个......

```
ODBCComm command = new ODBCComm();           
        command.Query = "SP_web_update_calls_dest @id=?,@name=? ,@ivrCode=?,@DDI=?,@destType=?,@trkGroup=?,@result=? output"; 

        return AddParamsAndExecute(id, name, ivrCode, DDI, destType, trkGroup, command); 
```

* * *

我不知道 ODBCComm 是什么或 AddParamsAndExecute 做了什么，因为您没有包含相关代码，但是，请求*应该*如下所示：

```
 OdbcCommand Cmd = new OdbcCommand("SP_web_update_calls_dest", _Connection); 
    Cmd.CommandType = CommandType.StoredProcedure; 

    Cmd.Parameters.Add("@id", OdbcType.Int); 
    Cmd.Parameters["@id"].Value = id; 

    Cmd.Parameters.Add("@name", OdbcType.NVarChar); 
    Cmd.Parameters["@name"].Value = name;

    Cmd.Parameters.Add("@ivrCode", OdbcType.Int); 
    Cmd.Parameters["@ivrCode"].Value = ivrCode; 

    Cmd.Parameters.Add("@DDI", OdbcType.VarChar); 
    Cmd.Parameters["@DDI"].Value = DDI;

    Cmd.Parameters.Add("@destType", OdbcType.Int); 
    Cmd.Parameters["@destType"].Value = destType; 

    Cmd.Parameters.Add("@trkGroup", OdbcType.Int); 
    Cmd.Parameters["@trkGroup"].Value = trkGroup; 

    Cmd.Parameters.Add("@result", OdbcType.Int); 
    Cmd.Parameters["@result"].Direction = ParameterDirection.Output;

    Cmd.ExecuteNonQuery(); 

    int result = (int)Cmd.Parameters["@result"].Value; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T06:10:50.450

好的，我想我解决了。实际上有两个问题，我不确定是什么原因造成的。无论如何，我将 ODBC 驱动程序切换到 SQL Server Native Client 10。这基本上解决了问题，但由于某种原因，它不支持查询中的输出修饰符，所以我不得不删除它。

所以我解决了它，但仍然不知道是什么导致了问题。我猜这与不同版本的驱动程序有关。

# c# - 如何将数据源绑定到不同类型的属性？

> ID：11177372
> 
> 赞同：1
> 
> 时间：2012-06-24T12:17:46.003
> 
> 标签：c#, winforms

在以下代码中：

```
using System;
using System.Collections.Generic;
using System.Windows.Forms;

namespace BindingSourceSimpleTest
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        public class Color
        {
            public string Name { get; set; }
            public int Red { get; set; }
            public int Green { get; set; }
            public int Blue { get; set; }
        }

        public class Obj
        {
            public string Name { get; set; }
            public string Color { get; set; }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            var colors = new List<Color>();
            colors.Add(new Color { Name = "Black", Red = 0, Green = 0, Blue = 0 });
            colors.Add(new Color { Name = "Blue", Red = 0, Green = 0, Blue = 255 });
            colors.Add(new Color { Name = "Red", Red = 255, Green = 0, Blue = 0 });
            colors.Add(new Color { Name = "Magenta", Red = 255, Green = 0, Blue = 255 });
            colors.Add(new Color { Name = "Green", Red = 0, Green = 255, Blue = 0 });
            colors.Add(new Color { Name = "Cyan", Red = 0, Green = 255, Blue = 255 });
            colors.Add(new Color { Name = "Yellow", Red = 255, Green = 255, Blue = 0 });
            colors.Add(new Color { Name = "White", Red = 255, Green = 255, Blue = 255 });

            var objs = new List<Obj>();
            objs.Add(new Obj { Name = "Sun", Color = "Yellow" });
            objs.Add(new Obj { Name = "Grass", Color = "Green" });
            objs.Add(new Obj { Name = "Blood", Color = "Red" });
            objs.Add(new Obj { Name = "Sky", Color = "Blue" });
            objs.Add(new Obj { Name = "Hair", Color = "Black" });
            objs.Add(new Obj { Name = "Snow", Color = "White" });
            objs.Add(new Obj { Name = "Rose", Color = "Red" });

            listBoxObjs.DataSource = new BindingSource(objs, null);
            listBoxColors.DataSource = new BindingSource(colors, null);
            comboBoxObjColor.DataSource = new BindingSource(colors, null);

            textBoxObjName.DataBindings.Add("Text", listBoxObjs.DataSource, "Name");
            comboBoxObjColor.DataBindings.Add("SelectedItem", listBoxObjs.DataSource, "Color");
            textBoxColorName.DataBindings.Add("Text", listBoxColors.DataSource, "Name");
            textBoxColorRed.DataBindings.Add("Text", listBoxColors.DataSource, "Red");
            textBoxColorGreen.DataBindings.Add("Text", listBoxColors.DataSource, "Green");
            textBoxColorBlue.DataBindings.Add("Text", listBoxColors.DataSource, "Blue");

            listBoxObjs.DisplayMember = listBoxColors.DisplayMember = comboBoxObjColor.DisplayMember = "Name";
        }
    }
} 
```

和以下表单 UI：

[![表格1](../Images/045c0a6b294ab368d7085ac371e808ae.png)](https://i.stack.imgur.com/5kKoz.png)
[(来源: [persiangig.com](http://hamidi2.persiangig.com/image/910404_BindingSourceSimpleTest_UI.png) )]

1.  我看到太阳是黑色的！为什么？！经过深入研究后，我发现颜色列表中的项目是 Color 类型，而对象的 Color 属性是 string 类型。
2.  如何使对象的 Color 属性在组合框中正确显示？
3.  如果我解决了这个问题，更改组合框选择是否也会正确更新对象的这个属性？
4.  如果我解决这个问题，太阳会变黄吗？:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:21:58.980

看起来您在 Obj 列表中缺少对颜色对象的引用。它有一个 Color 属性，它是字符串，但与 Color 列表中的 Color 对象没有关系。

```
 public class Obj
    {
        public string Name { get; set; }
        public BindingSourceSimpleTest.Color Color { get; set; }
    } 
```

此外，您的类应该实现 INotifyPropertyChanged 接口，以便数据绑定正常工作：

```
public class Obj : INotifyPropertyChanged {
  public event PropertyChangedEventHandler PropertyChanged;

  private string name;
  private BindingSourceSimpleTest.Color color;

  protected void OnPropertyChanged(string propName) {
    if (PropertyChanged != null) {
      PropertyChanged(this, new PropertyChangedEventArgs(propName));
    }
  }

  public string Name {
    get { return name; }
    set {
      name = value;
      OnPropertyChanged("Name");
    }
  }

  public BindingSourceSimpleTest.Color Color {
    get { return color; }
    set {
      color = value;
      OnPropertyChanged("Color");
    }
  }
} 
```

# c# - 如何检测现在是否正在播放任何视频？

> ID：11177373
> 
> 赞同：2
> 
> 时间：2012-06-24T12:17:46.707
> 
> 标签：如何使用autohotkey, autoit, vbscript, c#, c, c#, c, vbscript, autoit, autohotkey

[如何使用autohotkey](/questions/tagged/autohotkey "显示标记为“自动热键”的问题")、[autoit](/questions/tagged/autoit "显示标记为“autoit”的问题")、[vbscript](/questions/tagged/vbscript "显示标记为“vbscript”的问题")、[c#](/questions/tagged/c%23 "显示标记为“c#”的问题")或[c](/questions/tagged/c "显示标记为“c”的问题")检测是否正在播放任何视频？

视频可以在任何本地播放器、基于网络的播放器或 html5 播放器中播放/流式传输。我们不知道播放器的名称，也可能播放器没有全屏显示。

PS。检测 CPU 负载可能不会总是给出正确的结果，因此它是不可接受的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T21:22:48.187

那天我在这方面做了一些工作。有一个 WIN32API（老派）获取/设置是否禁用屏幕保护程序（在 user32.dll、GetScreenSaverActive()、SetScreenSaverActive - 请参阅： http: [//www.codeproject.com/Articles/17067/Controlling-The -屏幕保护程序-带-C](http://www.codeproject.com/Articles/17067/Controlling-The-Screen-Saver-With-C)）。这是视频播放时最有可能设置的标志，但它不是 100% 可靠的，因为并非每个播放器都会实现它。它适用于大多数浏览器视频，无论是通过插件播放、本机播放还是通过 DirectX 播放。这也适用于大多数（所有？）外部播放器，例如 vlc、windvd 等。

但。

没有万无一失的、100% 确定视频播放的方法。你不能; 1\. 检查声音播放，因为用户可能正在使用 iTunes，并且并非所有视频都有声音 2\. 检查全屏（通常是更好的选择），因为视频可能正在浏览器中播放 3\. 检查 cpu/gpu 负载，因为它不是可靠，您没有其他方法可以确定 4\. 绝对确保播放器在最小化时没有清除/重置 win32 标志

另一种选择是尝试整理所有已知播放器的可能可执行名称列表（查找数据可行但耗时，尤其是在旧版本上），并检查它们是否正在运行。这不是 100% 可靠的，或者作为插件通过预加载但浏览器但当时并没有实际播放视频。

简而言之，我知道没有 100% 的方法，但有几种方法可以让你达到 90-95%。这就是知道是否有视频播放的目的？也许有一种更简单的方法可以找到您要查找的内容...

# c# - WPF WebBrowser——“DOMChanged”事件是否有替代方案？

> ID：11177374
> 
> 赞同：0
> 
> 时间：2012-06-24T12:17:53.067
> 
> 标签：c#, wpf, dom, webbrowser-control, awesomium

我已经尝试过内置的 WPF WebBrowser (.NET ActiveX Wrapper)、Awesomium.NET 和 Chromium.NET。

我不确定我是否在这里遗漏了一些东西，但我不知道是否有任何方法可以在 DOM 更改时引发事件，以便我的 C# 代码可以执行。如果可以的话，我想避免每次都有计时器检查/比较 DOM 的更改...

所以，我只是想知道我是否错过了这些控件中允许我做我想做的事情的东西，或者如果没有，是否有任何替代/方法来拥有 DOMChanged 事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:58:08.620

我不相信默认情况下使用这些控件可以做到这一点（尽管我从未使用过 Chromium.NET）。

您可以尝试做的一件事是使用 JavaScript 来检测 DOM 更改。您可以让您的应用程序注册一个回调函数并编写 JavaScript 本身。这是 Awesomium 语法的一个粗略示例：

```
myControl.CreateObject("JSCallback");
myControl.SetObjectCallback("JSCallback", "handleDOMChange", OnDOMChange);
myControl.ExecuteJavascript(
  //this is where you would write your Javascript method that would detect DOM change and have it execute this handler method
  //Here's a post with some info on this (ignore cross-browser compatibility issues since it's all running within Awesomium): http://stackoverflow.com/questions/3219758/detect-changes-in-the-dom
  function DOMChangeDetected () 
  {
    JSCallback.handleDOMChange();
  }
);

private void OnDOMChange(object sender, JSCallbackEventArgs eventArgs)
{
  //.NET event triggered from JS DOM change detection
} 
```

# objective-c - Objective C 如何从子视图调用视图控制器中的方法

> ID：11177375
> 
> 赞同：0
> 
> 时间：2012-06-24T12:18:06.183
> 
> 标签：objective-c

新手问题在这里 -

我在视图控制器 m 中有这个方法：

```
-(void) backToHP:(id<SwitchViewProtocol>) fromView{

    [(UIView *)self.currentView removeFromSuperview];
    [self.currentView clearView];
    [self.view addSubview:_hpView];
    self.currentView = nil;

    CATransition *animation = [CATransition animation];
    [animation setDuration:0.2];
    [animation setType:kCATransitionPush];
    [animation setSubtype:kCATransitionFromLeft];
    [animation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]];

    [[self.view layer] addAnimation:animation forKey:@"SwitchToView1"];
} 
```

我尝试从子类中调用它。h子类：

```
@interface SetNotificationClass : UIView < SwitchViewProtocol> {

    habitsViewController *hvc;

}

@property (nonatomic, retain) habitsViewController *hvc; 
```

子类 m：

```
@synthesize hvc;

- (IBAction)saveNotificationClick:(id)sender {
   // [self scheduleAlarm];
    [hvc backToHP:nil];
} 
```

我收到“找不到方法”错误。任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T07:02:33.523

你在哪里初始化hvc？您不会将 backToHP: 发送回零，对吗？我也可能只是将视图控制器设置为视图的委托，而不是创建一个新属性。

# c++ - 检查同一行或列中是否存在数字

> ID：11177378
> 
> 赞同：0
> 
> 时间：2012-06-24T12:19:29.200
> 
> 标签：c++, algorithm

我已经盯着这段代码看了几个小时，尝试了演练，使用自动和断点进行调试，但到目前为止还没有解决方案。Maybie 某人的新面貌会帮助我；）。

```
#include <iostream>

using namespace std;

int matrix[9][9] = {{0, 0, 6, 0, 0, 0, 1, 0, 5},
                    {0, 4, 0, 7, 0, 6, 0, 3, 9},
                    {2, 0, 0, 9, 3, 0, 6, 0, 0},
                    {7, 0, 0, 1, 8, 0, 5, 0, 4},
                    {0, 0, 4, 0, 6, 0, 9, 0, 0},
                    {1, 0, 9, 0, 5, 2, 0, 0, 3},
                    {0, 0, 1, 0, 9, 3, 0, 0, 7},
                    {6, 7, 0, 5, 0, 8, 0, 9, 0},
                    {9, 0, 8, 0, 0, 0, 4, 0, 0}};

bool check(int column  ,int row,int checkedValue) 
{
    //column check
    for(int i=0; i<9; i++) 
    {       
        if(i==row)continue;

        if(checkedValue==matrix[column][i]) return false;
    }
    //row check 
    for(int i=0; i<9; i++) 
    {   
        if(i==column) continue;
        if(checkedValue==matrix[i][row]) return false;
    }                       
        return true;
}   

int main()
{
    cout<<check(4,0,4); //Why does it output 0? There is no "4" in the 5th column and the 1st row.

    system("pause");
    return 0;
} 
```

函数 check(column,row,value) 旨在当数字在“矩阵”二维表中至少出现一次时返回 0。这个程序是一个数独求解器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:27:14.163

`if`您在语句中混合了索引。他们应该是：

```
if(checkedValue==matrix[i][column]) return false; // not matrix[column][i] 
```

和

```
if(checkedValue==matrix[row][i]) return false;    // not matrix[i][row] 
```

原因是第一个维度是行。您可以通过打印来检查这一点`matrix[2][0]`。
对于您的矩阵，您将得到 2（而不是 6）。

# android - Android 更改 countDownTimer 的时间

> ID：11177379
> 
> 赞同：1
> 
> 时间：2012-06-24T12:19:32.100
> 
> 标签：android, android-event

我的应用是问答应用，客户端/服务器，客户端是android应用，服务器是java tomcat服务器应用

我希望用户在 25 秒内回答任何问题，但我会给他时间阅读问题，该时间取决于问题的字数，例如如果问题有 10 个字，我会给他 10 秒阅读问题，然后 25 秒回答，确保在 10 秒内（25 秒内）回答问题的用户将获得比在 20 秒内回答相同问题的用户更多的分数

所以我的问题是如何动态编辑 countDownTimer 的时间

```
showHint.setText("Show Hint 2");
//here i have to edit
timeToDirectAnswer.start(); 
```

我知道有一种方法可以通过使用动态时间初始化计时器来做到这一点，但我不想这样做，因为我的应用程序依赖于工作流程并且该流程可能会交换，因此代码将非常复杂且难以编辑

也许另一种方法是让 countDownTimer 睡眠精确秒，但这样我必须建立另一个计时器来告诉用户还有多少次开始计数标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:41:29.573

```
new CountDownTimer(30000, 1000) {

     public void onTick(long millisUntilFinished) {
         mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
     }

     public void onFinish() {
         mTextField.setText("done!");
     }
  }.start(); 
```

这是构造函数定义：

```
public CountDownTimer (long millisInFuture, long countDownInterval) 
```

*自：API 级别 1*

参数

**millisInFuture** ：*从调用 start() 到倒计时完成并调用 onFinish() 的未来毫秒数。*

**countDownInterval** ：*接收 onTick(long) 回调的时间间隔。*

**编辑：**

您必须将问题放入`String`变量中，然后将此字符串与 (space) 分开`Array`，数组计数将是该问题的单词数。

然后，您将做一个方程式来计算阅读的倒计时时间：

```
time=numberOfWords*2000; 
```

那就是每个单词2秒。

# entity-framework-4.3 - OnModelCreating 和非自动迁移如何关联？

> ID：11177380
> 
> 赞同：10
> 
> 时间：2012-06-24T12:19:32.987
> 
> 标签：entity-framework-4.3, entity-framework-migrations

当我添加一个与我的数据库有一些关系的新表然后运行时，`Add-Migration`我看到在`Up`添加表及其关系的方法中生成了代码。但是，我更喜欢在方法中使用 fluent API 来定义关系`OnModelCreating`。这两种方法如何交互？例如，我可以从`Up`定义关系的方法中删除代码吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T20:12:04.593

他们每个人都有完全不同的目的：

*   `OnModelCreating`用于模型的内联 fluent-API 定义。这些定义与默认约定、数据注释和配置类一起构成了模型的完整定义。
*   显式迁移定义了必须对数据库执行哪些操作才能将其迁移到当前模型所需的形式

现在，这两者有什么关系？迁移有两个输入，用于生成迁移代码（`Up`和`Down`方法）。`__MigrationHistory`一个输入是存储在数据库表中的最后一个迁移记录。此记录包含表示数据库的序列化模型。此输入是可选的，因为第一次迁移必须在没有它的情况下工作。第二个输入是强制性的 - 它是通过执行当前程序集中的代码检索的当前模型 =>`Add-Migration`将执行您`OnModelCreating`以获取当前模型并将其与从数据库中检索的模型进行比较。比较的结果是显式迁移的内容`Up`和`Down`方法。

# css - 固定图像重叠菜单的 CSS

> ID：11177382
> 
> 赞同：0
> 
> 时间：2012-06-24T12:19:40.257
> 
> 标签：css, image, overlap

我有这张图片：

![三角形](../Images/ba51599c11d9aefa9c39037aab4232c7.png)

这是网站[http://maximearchambault.com](http://maximearchambault.com)

左边是菜单，右边是内容。

我想做的是将三角形图像放在与内容重叠的菜单旁边，使其看起来像菜单的一部分。

这里有一个例子：[http ://www.shockblast.net/marla-singer-photography/](http://www.shockblast.net/marla-singer-photography/)

当你向下滚动时，你会看到一只眼睛出现，一切都在它下面。眼睛不动。

所以我希望我的图像左对齐，与右栏中的内容重叠。

这是我的默认/style.css

```
*/

 body {
    font-size: 13px;
    font-family: 'Helvetica Neue', Arial, Helvetica, Verdana, sans-serif;
    background: #fff;
    color: #000;
    line-height: 1.3em;
    /* font-weight: 300; */
}

/* link scheme */
/* you can customize links further down the page too */
a:link { text-decoration: none; color: #000; }
a:active { text-decoration: none; color: #00cc00; }
a:visited { text-decoration: none; color: #999; }
a:hover { text-decoration: underline; }
a img { border: none; }

/* general styles */
small { font-size: 9px; }
code { font-family: monospace; }
blockquote { padding-left: 9px; }

/* headings */
h1 { font-size: 13px; margin-bottom: 1em; font-weight: bold; }
h2 { font-size: 13px; margin-bottom: 1em; font-weight: bold; }
h3 { font-size: 13px; margin-bottom: 1em; }
h4 { font-size: 13px; margin-bottom: 1em; }

/* paragraph width */
#index p { margin-bottom: 1em; }
#exhibit p, code, blockquote { width: 450px; margin-bottom: 1em; /* line-height: 1.3em; */ }

/* highlighter style - maybe you want to change colors? */
.highlight { background: #ccff00; color: #000; }

/* never adjust the margin or padding here unless you seriously know what you are doing */
/* think #index .container and #exhibit .container for only padding adjustments */
#index { width: 215px; background: #F2F2F2; /* line-height: 1.3em; */ }
#exhibit { margin: 0 0 0 215px; }

/* styling the index */
#index ul { list-style: none; margin: 0; }
#index ul.section { margin-bottom: 1em; }
#index ul.subsection {  }

/* the follow rules for index are not required */
/* they are mostly for complex customization */
/* for tag display */
#index ul#all_tags { list-style-type: none; margin-bottom: 1em; }
#index ul#all_tags li { display: inline; margin-right: 3px; }
#index ul#all_tags li a {  }

/* active section title */
#index span.active_section_title,
#index span.active_section_title a { font-weight: bold; }

/* active exhibit title parts */
li.active a:link, li a.active, li.active a:hover, li a.active, li.active a:active, li a.active, 
li.active a:visited, li a.active, li span.active, #index ul.section li.active a:link, 
#index ul.section li.active a:hover, #index ul.section li.active a:active, #index ul.section li.active a:visited
{ font-weight: bold; }

/* additional #index options */
#index ul li .password a { /* background: url(../img/locked.gif) right center no-repeat; padding-right: 18px; */ }

/* the "new" indicator */
#index ul li sup { color: #0c0; font-weight: bold; text-transform: uppercase; font-size: 8px; vertical-align: top; }
/* end styling for index */

/* links styles only for the #index region */
#index a:link {  } 
#index a:hover {  } 
#index a:active {  } 
#index a:visted {  }

/* links styles only for the #exhibit region */
#exhibit a:link {  } 
#exhibit a:hover {  } 
#exhibit a:active {  } 
#exhibit a:visted {  } 

/* this is where you adjust your paddings for #index and #exhibit together */
.container { padding: 27px 9px 25px 27px; }

/* this is where you pad them separately */
#index .container {  }
#exhibit .container {  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:30:22.503

将这些属性放在要修复的元素上：

```
 .fixedElement
  {
        position: fixed;
        z-index: 10;
        top: 20px;
        left: 20px;
  } 
```

这样，它将始终固定在左上角。即使在滚动之后

# c# - Google 结帐通知确认失败

> ID：11177384
> 
> 赞同：0
> 
> 时间：2012-06-24T12:19:52.583
> 
> 标签：c#, asp.net, google-checkout

我有一个被调用的回调 url，我可以处理它。但是 - Google 不会处理我的确认。这一切都在`EnvironmentType.Sandbox`.

在 Google 结帐“集成控制台”中，我收到以下消息：

> 我们在处理您的通知确认时遇到错误。我们得到的错误是：解析通知确认时出错。

详细信息是：他们给我发了什么：`serial-number=...`。

他们收到了什么：

```
<?xml version="1.0" encoding="utf-8"?>
<notification-acknowledgment xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" serial-number="here is the same serial number they sent me" xmlns="http://checkout.google.com/schema/2" />

<!DOCTYPE html... 
```

我正在使用的代码：

```
GCheckout.AutoGen.NotificationAcknowledgment response = new GCheckout.AutoGen.NotificationAcknowledgment();
response.serialnumber = serialNumber;
HttpContext.Current.Response.Clear();
HttpContext.Current.Response.BinaryWrite(GCheckout.Util.EncodeHelper.Serialize(response));
HttpContext.Current.Response.StatusCode = 200; 
```

这里有什么错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T02:07:37.943

[请参阅.Net 库示例](http://code.google.com/p/google-checkout-dotnet-sample-code/source/browse/examples/api25notification/Default.aspx.cs)中的此“代码隐藏”代码

如果您使用的是 aspx 文件，请删除其中的所有 HTML 内容，如同一示例的`aspx` [源代码所示](http://code.google.com/p/google-checkout-dotnet-sample-code/source/browse/examples/api25notification/Default.aspx)

`Response.End()`也将起作用，因为它阻止返回任何进一步的响应内容（实际上做同样的事情 - 阻止`aspx`发送 Web 表单（文件）中的 HTML 内容）。

您还可以考虑`ashx`为回调 url 使用通用处理程序 ( ) 而不是 aspx 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:33:33.523

似乎这个问题可以通过回答我的另一个问题来解决：[如何从头开始创建 http 响应？](https://stackoverflow.com/questions/11180847/how-can-i-create-an-http-response-from-scratch).

解决方案是添加：

```
HttpContext.Current.Response.End(); 
```

# asp.net - 确定对 IIS 施加压力的因素

> ID：11177386
> 
> 赞同：6
> 
> 时间：2012-06-24T12:20:31.637
> 
> 标签：asp.net, performance, iis

我有一台运行 IIS 7.5 和 SQL Server 2010 的专用服务器。服务器 CPU 负载通常接近 100%。SQL 服务器不会占用太多，但 w3wp 进程占用了大量 CPU（通常为 70+%）。

我想找出导致这种压力的原因： * 静态文件请求过多（可以添加 CDN） * ajax 请求过多（无论如何我都在考虑彗星/网络套接字） * 单个 asp.net 页面消耗过多的处理能力（应该很容易优化）

你会从哪里开始寻找从哪里开始优化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:40:10.687

最简单的方法是在生产环境中分析应用程序。不确定您的情况是否可行。一些选项：

*   查看日志并查看请求的持续时间。长请求可能会给系统带来负担
*   使用 Visual Studio 远程调试 w3wp 并暂停调试器 10 次以查看它停止最多的位置。那是热点
*   使用 XPerf 或 PerfView 来捕获（托管）堆栈。这对生产性能几乎没有影响

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T03:42:39.823

我找到了一种简单的方法来查看服务器上发生了什么。尽管如此，专业的方法可能是去使用分析工具。

我做了什么？在 IIS 控制台中，您可以获得所有当前工作线程的列表，如果您选择一个，您可以看到该线程正在处理什么。所以我能够看到线程正在并行处理 100 个请求，其中 70 个请求回溯到同一个 ajax 调用。

直接的解决方案是减少该呼叫的频率（从每 10 秒到每 30 秒）。下一步将是进一步优化服务器端的调用，因为我确实有其他频率相同（每 10 秒）的 ajax 调用，因为它们太快了，几乎从未出现在活动请求列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:53:13.337

可能最简单的解决方法是在服务器上安装[New Relic 。](http://newrelic.com/)我认为试用期持续 30 天，所以它应该给你足够的时间来了解这一点。它将向您展示长时间运行的 SQL 查询、.NET 方法以及您能想到的几乎所有其他内容。它使识别瓶颈变得非常容易。

* * *

顺便说一句，我建议使用 New Relic，因为听起来您的问题出在生产环境中。New Relic 并不是一个非常详细的分析器。它收集了足够的信息以提供帮助，但不会降低服务器的速度。这使得它非常适合这个目的。

但是，如果您可以在开发环境中重现该问题，则可以尝试免费的[Eqatec profiler](http://eqatec.com/Profiler/)之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T17:15:02.830

一个好的起点是启动开发工具（IE/Chrome 中的 F12）并查看网络选项卡下的时间。这将向您显示页面如何加载的瀑布式图表，并且应该帮助您识别任何可能被明智地移至 CDN 的加载速度特别慢的静态文件、发出的任何不必要的请求、花费了多少时间来获取实际页面本身等。

之后，使用性能分析器分析应用程序。像[ANTS Performance Profiler](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler)这样的好的分析器可以让您查看不同方法的执行时间/命中计数，以及正在运行哪些数据库查询以及它们花费了多长时间。新版本的 ANTS（目前在[EAP](http://help.red-gate.com/help/ANTSPerformanceProfiler/download_eap.html)中）还将按 http 请求对该活动进行分组，以便您查看特定页面是否需要优化或被点击太多次。

您还可以检查缓存是否按照您的预期工作，这样用户就不会不必要地重新请求页面。

还有一篇关于 ASP.NET 性能的好文章，您可能想在[http://aspalliance.com/1533_ASPNET_Performance_Tips.7](http://aspalliance.com/1533_ASPNET_Performance_Tips.7)阅读。

免责声明：我为制作 ANTS 的 Red Gate 工作。

# ruby-on-rails - 为多个站点创建可重用博客组件的最佳方式

> ID：11177392
> 
> 赞同：1
> 
> 时间：2012-06-24T12:21:19.750
> 
> 标签：ruby-on-rails, ruby

我有一个网站，我想在其中包含类似博客的功能。我知道那里有很多标准解决方案，但由于我对 Ruby on Rails 还是半新的，所以我想自己创建它来学习更多东西。（你们都知道制作 Post 表的方法有上百万种。）

问题是我希望我正在创建的这个组件可以重复使用，以便将来能够为我的个人博客提供动力。那么，您所有的 Ruby on Rails 专家会如何建议制作一个包含一些模型、迁移和一些标准视图的组件呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:32:27.607

[导轨引擎](http://www.stubbleblog.com/index.php/2011/04/writing-rails-engines-getting-started/)。这些是可以嵌入到主应用程序中的小型 Rub​​y on Rails 应用程序。它们可以包含应用程序的所有主要元素，包括路由、迁移、模型、控制器等。因此，小部件应用程序可以放入您的博客引擎中，以便立即启动小部件博客。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T12:32:36.700

一个 Rails 引擎。

*   [http://www.stubbleblog.com/index.php/2011/04/writing-rails-engines-getting-started/](http://www.stubbleblog.com/index.php/2011/04/writing-rails-engines-getting-started/)
*   [http://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/](http://coding.smashingmagazine.com/2011/06/23/a-guide-to-starting-your-own-rails-engine-gem/)

# php - php: $_COOKIE 设置和读取无法正常工作

> ID：11177395
> 
> 赞同：1
> 
> 时间：2012-06-24T12:21:53.400
> 
> 标签：php, cookies

您好，我在此处发布的代码有问题（这是一个非常精简的版本，因此为清楚起见，省略了许多 html 内容）。目标是：它检查 cookie 是否存在并填充它。如果全局变量 $_POST 为空，它会检查 cookie 是否存在或由于某种原因为空。如果 cookie 不存在或为空；它创造了一个。然后在 HTML 表单之前显示内容

单击表单提交后，页面会自动调用，当然 $_POST 也会被填写。因此，代码的后半部分会读取并显示 cookie 的内容。

实际上，当我调用该页面时，会创建 cookie（我用浏览器检查过），但未显示第一次读数！如果我点击提交，我会阅读 cookie 的内容，或者如果我用 F5 刷新页面，它会显示它。

但不是当我加载页面“第一次”时。

请你能帮我找出我犯错的地方吗？

```
if (!$_POST) {
    // Create Cookie
    if (!isset($_COOKIE["ID"]) || ($_COOKIE["ID"] != true)){
     $order_id = time();
         $lifetime = 600;
     setcookie("ID",$order_id,time()+$lifetime);
    }//End IF "create cookie"
     ...
     ...
     ...
     $order_id = $_COOKIE["ID"];
     echo $pag = <<< FORM
         $order_id
     <form action="page.php" method="post">
     ...
     ...
     <input type="submit">
     </form>
FORM;
} elseif  ($_POST) {
    // Read Cookie for Contract
    echo $order_id = $_COOKIE["ID"];
    echo $order_id_date = date('l jS \of F Y');
     ...
     ...
     ...
     setcookie("ID","",-50000);
} // End IF ELSEIF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:06:36.397

我找到了解决方案。这是一个转机。而不是像我创建的cookie，我使用了会话。它有效我想在这里报告代码：

```
session_start();
if (!$_POST) {
   if ((!isset($_SESSION['order_id'])) or $_SESSION['order_id'] != true ){
    $order_id_time = time(); // Assign variables
    $_SESSION['order_id'] = $order_id_time;
    }
$order_id_date = date('l jS \of F Y');
$order_id = $_SESSION['order_id'];
     ...
     ...
     ...
     echo $pag = <<< FORM
     $order_id
     <form action="page.php" method="post">
     ...
     ...
     <input type="submit">
     </form>
FORM;
} elseif  ($_POST) {
    // Read Cookie for Contract
echo $cook = "Order ID: ".$_SESSION["order_id"]."<br /><br />";
     ...
     ...
     ...
session_destroy();
} // End IF ELSEIF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:34:42.173

每次请求时，浏览器都会将 Cookie 发送到服务器。因为您仍在同一个请求中，所以尚未发送 cookie。

这就是为什么在同一个文件中（在同一个请求中）这不起作用：

```
$order_id = $_COOKIE["ID"]; // because the cookie hasn't been sent yet. 
```

它看起来也没有必要，因为变量`$order_id` 已经包含订单 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:40:33.803

如果你以这种方式设置它会更好。

```
$order_id = time();
if(isset($_COOKIE['ID']) && !empty($_COOKIE['ID'])) {
  $order_id = $_COOKIE['ID'];
} else {
  $lifetime = 600;
  setcookie('ID', $order_id, time() + $lifetime);
} 
```

因此，您始终设置您的订单 ID，然后将其替换为 cookie ID（如果存在）。

# git - git checkout 裸露在 post-receive 中的子模块

> ID：11177399
> 
> 赞同：4
> 
> 时间：2012-06-24T12:23:01.773
> 
> 标签：git, git-submodules, git-post-receive

如何在包含子模块的接收后挂钩中签出服务器上的裸存储库？

我目前将此作为接收后挂钩：

```
#!/bin/bash

# http://blog.ekynoxe.com/2011/10/22/git-post-receive-for-multiple-remote-branches-and-work-trees/
# post-receive hook that checks out development branch after a push to the bare
# repo

# paths must exist
livepath="/var/www/live"
devpath="/var/www/dev"

while read oldrev newrev ref
do
    branch=`echo $ref | cut -d/ -f3`

    #if [[ "master" == "$branch" ]]; then
    #   git --work-tree=$livepath checkout -f $branch
    #   echo 'Changes pushed live.'
    #fi
    if [[ "develop" == "$branch" ]]; then
        git --work-tree=$devpath checkout -f $branch
        echo 'Changes pushed to dev.'
    fi
done 
```

但是这样子模块不会被初始化。

我尝试为测试手册执行此操作：

```
cd /var/www/dev
git --work-tree /var/www/dev --git/dir /git/myrepo.git submodule init
git --work-tree /var/www/dev --git/dir /git/myrepo.git submodule update 
```

`submodule update`命令失败并显示以下错误消息：

```
fatal: working tree '/var/www/dev' already exists.
Clone of 'https://github.com/yiisoft/yii.git' into submodule path 'yii' failed 
```

这种行为已经（未回答）在这里受到质疑：[Git submodules with separate work_tree](https://stackoverflow.com/questions/5871438/git-submodules-with-separate-work-tree)

如果它们已经在那里，它不会重新初始化它们也会很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:06:15.923

`--work-tree`不适用于子模块（因为子模块需要另一个存储库，但它不能放入您的工作树中）。为此，您需要一个单独的克隆。

只需创建一个克隆，在你的钩子中做一个`cd`+ 。`pull`

# azure - 当不是 asp.net web 项目时如何将 asp.net 网站发布到天蓝色

> ID：11177402
> 
> 赞同：2
> 
> 时间：2012-06-24T12:23:44.367
> 
> 标签：azure, publishing, visual-studio-2012

使用 Visual Studio 2012 RC，我有许多现有的 asp.net (VB) 网站，当我在 VS 中编辑它们时，我总是简单地选择打开的网站，它们不是 Web 项目。

我现在想将其中一些发布到我的 azure 帐户，但是如果我只是右键单击解决方案并选择发布网站，我不会获得与如果它是一个 Web 项目相同的发布选项吗？我得到默认的发布选项，询问我要将编译的页面放在哪里。

如何为网站导入我的 azure 网站的发布设置？

我不想将所有网站都转换为项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:34:41.000

Windows Azure 网站允许您以不同的方式部署您的网站，包括 TFS、Git 等，但在您的情况下，看看**FTP 部署**可能会很有趣。这是因为，当右键单击一个网站时，您可以选择复制该网站：

![复制网站](../Images/6b1aa2d4782fcb40fc8a82aa91d514c2.png)

复制功能允许您将网站复制到 FTP 服务器。

![复制到 FTP](../Images/4fd05eab85117f3a347e6afef8c4abf5.png)

通过 FTP 访问您的网站的信息可以在[仪表板上](https://www.windowsazure.com/en-us/manage/services/web-sites/how-to-manage-websites/)找到。

# c# - Mysql - “order by”/子查询的实体框架性能问题

> ID：11177405
> 
> 赞同：2
> 
> 时间：2012-06-24T12:24:07.247
> 
> 标签：c#, mysql, performance, entity-framework

我有一张存储 3k 条记录的表，

我是 Entity Framework 和 ORM 的新手，但我可以理解出现问题。

当我运行这个 linq 查询时：

```
repo.GetQuery<Article>().Where(foo=>foo.Expires_date>=date
                            && foo.Istoparticle==true
                            && foo.Isfrontpage==false)
                        .OrderByDescending(foo=>foo.Date)
                        .Take(4); 
```

我在 mysql 端得到这个查询：

```
选择
`Project1`.`Id`,
`Project1`.`User_id`,
`Project1`.`Category_id`,
`Project1`.`标题`,
`Project1`.`值`,
`Project1`.`关键字`,
`Project1`.`描述`,
`Project1`.`图片`,
`Project1`.`投票`,
`Project1`.`Views`,
`Project1`.`Isvisible`,
`Project1`.`Isfrontpage`,
`Project1`.`Istoparticle`,
`Project1`.`日期`,
`Project1`.`Expires_date`,
`Project1`.`Votes_sum`
从（选择
`Extent1`.`Id`,
`Extent1`.`User_id`,
`Extent1`.`Category_id`,
`Extent1`.`标题`,
`Extent1`.`值`,
`Extent1`.`关键字`,
`Extent1`.`描述`,
`Extent1`.`图片`,
`Extent1`.`投票`,
`Extent1`.`Votes_sum`,
`Extent1`.`Views`,
`Extent1`.`Isvisible`,
`Extent1`.`Isfrontpage`,
`Extent1`.`Istoparticle`,
`Extent1`.`Expires_date`,
`Extent1`.`日期`
FROM `tcms_articles` AS `Extent1`
 WHERE `Extent1`.`Expires_date` >= '2012-06-24 13:41:47.816') AS `Project1`
 订购方式
`Project1`.`Date` DESC LIMIT 4

```

执行此查询大约需要 3.50 秒。

解释这个查询：

```
+----+-------------+------------+-------+--------- ------+--------------+----------+------+------+---- ------------+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+------------+-------+--------- ------+--------------+----------+------+------+---- ------------+
| 1 | 初级 | | 全部 | 空 | 空 | 空 | 空 | 4054 | 使用文件排序 |
| 2 | 派生 | 范围1 | 范围 | 过期日期 | 过期日期 | 8 | 空 | 4053 | 使用位置 |
+----+-------------+------------+-------+--------- ------+--------------+----------+------+------+---- ------------+
```

当我查询时：

```
SELECT *
    FROM tcms_articles
    WHERE expires_date >= '2012-06-24 13:41:47.816'
    ORDER BY date DESC
    limit 4 
```

我得到0.01秒...

再次运行解释我得到：

```
+----+-------------+---------------+-------+------ ------+------+---------+------+------+------ ----+
| 编号 | 选择类型 | 表| 类型 | 可能的键 | 关键 | key_len | 参考 | 行 | 额外 |
+----+-------------+---------------+-------+------ ------+------+---------+------+------+------ ----+
| 1 | 简单 | tcms_articles | 索引 | 过期日期 | 日期 | 8 | 空 | 11 | 使用位置 |
+----+-------------+---------------+-------+------ ------+------+---------+------+------+------ ----+
```

我不明白为什么会这样。

实体框架 4.3 MySQL 连接器网络 6.5.4.0

## 编辑 ：

tcms_articles ：

```
创建表`tcms_articles`（
  `Id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `User_id` int(10) 无符号 DEFAULT NULL，
  `Category_id` int(10) 无符号 DEFAULT NULL，
  `标题` varchar(255) 默认为空，
  `值`长文本，
  `Keywords` varchar(255) NOT NULL DEFAULT '',
  `Description` varchar(255) NOT NULL DEFAULT '',
  `图片`长文本不为空，
  `Votes` int(10) unsigned NOT NULL DEFAULT '1',
  `Votes_sum` int(10) unsigned NOT NULL DEFAULT '5',
  `Views` int(10) unsigned NOT NULL DEFAULT '0',
  `Isvisible` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `Isfrontpage` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `Istoparticle` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `Expires_date` datetime NOT NULL DEFAULT '2099-12-31 00:00:00',
  `日期`日期时间不为空，
  主键（`Id`），
  KEY `article_users` (`User_id`) 使用 BTREE，
  KEY `article_section` (`Category_id`) 使用 BTREE，
  KEY `Isvisible_index2` (`Isvisible`) 使用 BTREE，
  KEY `Istoparticle_index2` (`Istoparticle`) 使用 BTREE，
  KEY `Expires_date_index2` (`Expires_date`) 使用 BTREE，
  KEY `isfrontpage2` (`Isfrontpage`) 使用 BTREE，
  KEY `Date_index2` (`Date`) 使用 BTREE，
  约束 `tcms_articles_ibfk_1` 外键 (`Category_id`) 参考 `tcms_categories` (`Id`)
        在更新级联上删除级联，
  约束 `tcms_articles_ibfk_2` 外键 (`User_id`) 参考 `tcms_users` (`Id`)
        ON DELETE CASCADE ON UPDATE CASCADE
) 引擎=InnoDB AUTO_INCREMENT=80 默认字符集=utf8；

```

那么为什么 Linq 会产生这个查询以及如何/我可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-14T22:55:21.063

```
repo.GetQuery<Article>().Where(foo=>foo.Expires_date>=date  -- Note 1
                        && foo.Istoparticle==true
                        && foo.Isfrontpage==false)
                    .OrderByDescending(foo=>foo.Date)       -- Note 2
                    .Take(4); 
```

两个地方都用`foo.Expires_date`。

# c - C中的二维数组和指针 - 如何访问元素？

> ID：11177410
> 
> 赞同：10
> 
> 时间：2012-06-24T12:24:54.083
> 
> 标签：c, pointers

我有一个涉及指向二维数组的指针的示例。有人可以帮我理解这个例子中发生了什么吗？

```
int main()
{

    int i = 0, j=0, sum0=0, sum1=0;
    int data[4][3] = { {23,55,50},{45,38,55},{70,43,45},{34,46,60}};
    int *Ptr;
    Ptr = *data;    //Why is the indirection operator used here? 
                    // Does Ptr = 23 by this assignment?

    for (i=0; i<4; i++) {
        sum1 = 0;
        for (j = 0; j < 3; j++) {
            sum1 += data[i][j];
        }
        if (sum1 > sum0) {
                 sum0 = sum1;
                 Ptr = *(data + i);     // Seems like this statement makes Ptr
        }                               // point one row below ... what syntax
    }                                   // can you use to access columns then?
                                       // Is it possible to use pointer arithmetic
    for (i=0; i<3; i++)                 // to access elements of data[i][j] that
        printf("%d\n", Ptr[i]);          // are not at j = 0?

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-24T13:29:03.000

`data`是一个二维数组，它有 4 行，每行有 3 个元素（即 4 X 3）。

现在，`Ptr = *data;`意味着您将第一行的起始地址存储到指针变量`Ptr`中。该语句等价于`Ptr = *(data + 0)`。`Ptr = *(data + 1)`- 这意味着我们正在分配第二行的起始地址。

然后`*Ptr`or`*(Ptr + 0)`会给你指向的行的第一个元素的值。同样，`*(Ptr + 1)`将为您提供该行的第二个元素的值。

程序中的`for`循环用于确定哪一行具有其元素之和（3 个元素）的最大值。一旦控件退出该`for`循环，`Ptr`它将指向具有最大元素总和的行，并将具有总和`sum0`的值。

考虑一个数组`int a[5];`，我希望你知道`a[0]`并且`0[a]`是一样的。这是因为`a[0]`手段`*(a+0)`和`0[a]`手段`*(0 + a)`。同样的逻辑可以用于二维数组。

`data[i][j]`类似于`*(*(data + i) + j)`。我们也可以这样写`i[data][j]`。

有关详细信息，请参阅 Yashavant Kanetkar 的《理解 C 中的指针》一书。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-06-11T12:33:21.207

`Ptr = *data;``*(data+0)+0`是第一行的第一列元素的指针的缩写。添加数据的第一个 0 是行号，它是间接的并将我们带到第一行。`* (data+0)`仍然是一个地址，而不是它指向的值（对于二维数组）。所以，Ptr 现在指向第一行第一列的地址。第二个零是列号。因此，选择了第一行和第一列的内存地址。现在再次使用间接 (*) 只会给出地址持有的值。喜欢`* (*(data+0)+0)`或`**data`。

一般来说，如果 p 是指针名，i 行号和 j 列号，

1.  `(*(p+i)+j)`将给出二维数组中元素的内存地址。我是行号。j是列号，
2.  `*(*(p+i)+j)`将给出该元素的值。
3.  `*(p+i)`将访问第 i 行
4.  要访问列，请将列号添加到`*(p+i)`. 您可能必须将指针声明为`(*p)[columns]`而不仅仅是`*p`. 这样做，您将声明指向 2D 数组的指针。

使用指针算法将二维数组视为一维数组。将指针 *Ptr 初始化为第一个元素 ( `int *Ptr = *data`)，然后添加一个 no。( `Ptr + n`) 访问列。添加一个大于列号的数字只会继续计算下一行第一列的元素（如果存在）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:35:04.897

`data`是一个由 3 元素整数数组组成的数组。在期望“指向 foo 的指针”的上下文中，您可以使用“foo 数组”，它的行为类似于指向其第一个元素`*data`的指针，指向 的第一个元素的指针也是`data`如此，即（可以这么说）`{23,55,50}`。

所以，评论中第一个问题的答案：不，这不是真的`Ptr = 23`。（不可能；`Ptr`是一个`int *`，而 23 是一个`int`。）

你是正确的，`Ptr = *(data+i)`指出`Ptr`第`i`th 行`data`。更准确地说，`data`是一个由 int 的 3 元素数组组成的数组，其行为类似于指向 int 的 3 元素数组的指针；添加`i`到它会经过`i`这样的数组。

访问数组其他列的常用方法是普通数组索引。如果您参考`data[i][j]`，您将获得 column `j`of row `i`。如果您想使用显式指针算术来执行此操作，请注意`Ptr`示例代码中的（例如）是“指向整数的指针”类型，因此`Ptr+1`（例如）`Ptr`是指向任何行的元素 1。（但是，就风格而言，当您实际上不需要时，通常不应该进行显式指针运算。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T12:41:16.703

在您的示例中，循环遍历所有矩阵行以找到所有元素之和保持最大值的行。

在开始时，分配了指向第一行的指针：

```
Ptr = *data; 
```

这意味着以下情况属实：

```
(Ptr[0] == 23 && Ptr[1] == 55 && Ptr[2] == 50) 
```

请注意，**Ptr**是一个指针，因此它包含一个内存地址，因此**Ptr**不同于**23**（除非内存地址恰好是**23**，这不太可能发生）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T08:00:27.790

C 允许多维数组，将它们作为连续的位置放置在内存中，并在幕后进行更多的地址运算。考虑一个二维数组。

int arr[ 3 ][ 3 ] = {{1, 2, 3}, {4, 5, 6}, {7, 8, 9}};

编译器将二维数组视为数组数组。其中数组名是指向数组中第一个元素的指针。因此，arr 指向第一个 3 元素数组，它实际上是二维数组的第一行（即第 0 行）。类似地，(arr + 1) 指向第二个 3 元素数组（即第 1 行），依此类推。此指针的值*(arr + 1) 指的是整行。由于第 1 行是一维数组，因此 (arr + 1) 实际上是指向第 1 行第一个元素的指针。现在将此指针加 2。因此， (* (arr + 1) + 2) 是指向第 1 行中元素 2（即第三个元素）的指针。该指针的值*(* (arr + 1) + 2) 指向列中的元素第 1 行的 2。

# php - CCAvenue 与 Magento 1.6.2 的集成

> ID：11177412
> 
> 赞同：2
> 
> 时间：2012-06-24T12:24:58.600
> 
> 标签：php, magento, ccavenue

收到了来自 CCAVENUE 的模块，它在 Magento 1.6.2 上运行良好......但就在最近它开始给出未定义变量 dec 的错误。

有没有人有类似的问题？并且尝试了任何解决方法......任何帮助和建议将不胜感激。

错误

```
Notice: Undefined variable: dec in /home/maationl/public_html/app/code/core/Mage/Avenues/controllers/libfuncs.php3 
```

以及相关代码

```
<?php 
function cdec($num) { 
    for ($n = 0 ; $n < strlen($num) ; $n++) { 
        $temp = $num[$n] ; 
        $dec = $dec + $temp*pow(2 , strlen($num) - $n - 1);
    } 
    return $dec;
} 
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:16:05.473

您提到的精确错误可以通过`$dec`在使用前定义来修复。

```
<?php 
function cdec($num) { 
    $dec = 0;
    for ($n = 0 ; $n < strlen($num) ; $n++) { 
        $temp = $num[$n] ; 
        $dec = $dec + $temp*pow(2 , strlen($num) - $n - 1);
    } 
    return $dec;
} 
?> 
```

我怀疑发生的事情是您启用了错误报告，并且您现在从一直存在的插件中获取错误。

通常不建议编辑 Magento 核心中的代码或不是您自己创建的插件（为了可升级性），但是查看该路径它实际上可能不是正确的 Magento 模块。

我很高兴使用支付网关提供的插件向 Magento 添加支付提供商，这些插件充满了错误，没有经过足够好的测试，甚至没有按照 Magento 指南编写......

您可能最好编辑这个文件，记录它，并记住在升级后将该文档保留在手边。

# macos - 自动填写网站表格 mac 应用程序

> ID：11177413
> 
> 赞同：0
> 
> 时间：2012-06-24T12:25:25.957
> 
> 标签：macos, cocoa, sdk

我对 Mac SDK 还很陌生，但我可以很容易地找到基本的方法。然而，有一件事我很难过：我正在尝试制作一个应用程序，当它可用时它会自动进入网页，例如音乐会门票销售等。我已将应用程序设置为接受用户的 ID 和密码，但如何将其推送到网站并填写登录表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:37:29.993

将网站加载到一个[`WebView`](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html)并使用 JavaScript 来操作和提交表单：

```
- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script 
```

# iphone - 从 HUD 层控制另一个场景中的 Sprite

> ID：11177414
> 
> 赞同：1
> 
> 时间：2012-06-24T12:25:33.290
> 
> 标签：iphone, objective-c, ios5, cocos2d-iphone

我在scene1.m 中有一个精灵，我在HUD 层hud.m 中有一个按钮。现在 Scene1 中出现了一个按钮。

如何从 HUD 层控制 scene1 sprite。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:27:19.980

使用 cocos2d，您可以将标签分配给您的精灵（或按钮，或任何从 CCNode 派生的类），以及它的每个父级层次结构（参见 CCNode 类， setTag() ）。然后，您可以使用这些标记从代码中的任何位置检索相应的节点，使用 CCNode getChildByTag()。

# javascript - 您如何确定 angularjs $service 何时完成其工作？

> ID：11177416
> 
> 赞同：0
> 
> 时间：2012-06-24T12:25:54.347
> 
> 标签：javascript, angularjs

我正在使用`$location`我的控制器内的服务来启用深度链接。我的控制器做这样的事情：

```
$location.path("/"+param);
$("title").text(param); 
```

第二行在第一行之后完成执行至关重要。否则，浏览器内的历史记录项将显示旧 URL 的新标题，而不是旧 URL。Google.com 目前有这个错误，尝试从主页搜索，然后再搜索，然后按住浏览器中的后退按钮并按最近的历史记录项，您就会明白我的意思了。

解决此问题的一种方法是：

```
$location.path("/"+param);
setTimeout(function() {
    $("title").text(param);
}, 1); 
```

...但这对我来说不太合适。`$location`所以我的问题是，一旦单身人士完成了自己的业务，我如何强有力地推迟第二行的执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T16:51:10.273

我认为您正在寻找一种适合一般异步服务的方法（??）。在我看来，您想查看承诺/延迟实现，请参阅 [http://docs.angularjs.org/api/ng](http://docs.angularjs.org/api/ng) .$q

> “起初，为什么这种额外的复杂性值得麻烦可能并不明显。回报来自承诺和延迟 api 所做的保证。”

希望这可以帮助

- 担

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:54:14.067

[AngularJS：使用 $location](http://docs.angularjs.org/guide/dev_guide.services.%24location)

> 请注意，setter 不会立即更新 window.location。相反，$location 服务知道范围生命周期，并在范围 $digest 阶段将多个 $location 突变合并为一个对 window.location 对象的“提交”。

# iphone - 调整 UITabBarItem 的大小

> ID：11177417
> 
> 赞同：2
> 
> 时间：2012-06-24T12:26:13.207
> 
> 标签：iphone, ios, resize, uitabbar, uitabbaritem

是否可以更改 UITabBarItem 的大小？我不是在谈论 UITabBarItem 内的图像，而是 UITabBarItem 本身。

例如，如果您在 UITabBar 中有四个 UITabBarItems，那么是否可以“合并” UITabBarItem 中心的两个 UITabBarItems（这样您将在 UITabBar 中间有一个大的 UItabBarItem 和每侧的两个较小的 UITabItems )?

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:30:49.830

使用 中的任何标准函数是不可能的`UITabBar`，但是您可以使用其他一些[自定义解决方案](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)

# c++ - 重载返回类型？

> ID：11177418
> 
> 赞同：1
> 
> 时间：2012-06-24T12:26:16.790
> 
> 标签：c++

可以说我有课

```
Class rofl {
 int a;
 float b;
 rofl::rofl(int a, float b) {
  this->a = a; this->b = b;
 }
} 
```

有可能吗

```
rofl* sup = new rofl(5, 2.0f);
float hello = sup; 
```

这样变量 hello 会得到 sup.b 的值吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T12:28:31.777

是的，您可以重载*类型转换运算符*：

```
class Rofl {
public:
    operator float() const { return b; }

    ...
}; 
```

有关演示，请参阅[http://ideone.com/Y7UwV 。](http://ideone.com/Y7UwV)

但是，请参阅 Scott Meyers 的《[*更有效的 C++*](http://www.amazon.co.uk/More-Effective-Programs-Professional-Computing/dp/020163371X/) 》第 5 条，标题为“*警惕用户定义的转换操作*”。允许与复杂类型进行隐式转换通常会导致各种微妙的拼写错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:34:40.753

不，如果你说这是不可能的。在您的代码中，`sup`is not a `rofl`but a ，并且不允许`rofl*`创建 a `rofl*`to转换。`float`此外，您的问题格式不正确：`sup.b`不涉及任何内容。

也就是说，您可能不需要动态分配实例，在这种情况下，其他答案是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:30:36.507

你也可以反过来：

```
class rofl {
public:
    float operator=(float f) { b = f; return f; }

    ...
};

rofl sup(5, 2.0f);
sup = 4.0f; 
```

[demo](http://ideone.com/049ee)，基于[@Oli 的回答](https://stackoverflow.com/a/11177427/102441)

# windows - 批处理文件：FOR 循环中的 GOTO

> ID：11177419
> 
> 赞同：15
> 
> 时间：2012-06-24T12:26:20.790
> 
> 标签：windows, for-loop, batch-file, cmd, goto

我有一个带有 FOR 循环的批处理文件。在循环中，我必须等待一个进程结束，为此我使用了 IF 和 GOTO。问题是 GOTO 打破了循环。我试图找到其他解决方案，但我没有找到任何东西。怎么做到呢？

```
@echo off
for /f "tokens=*" %%a in (file.txt) do (
bla bla bla
bla bla bla
:check
tasklist /FI "IMAGENAME eq prog.exe" 2>NUL | find /I /N "prog.exe">NUL
if "%ERRORLEVEL%"=="0" (goto check)
) 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-24T12:33:36.057

在循环内部，您可以使用 a `call`to 子例程，`goto`允许使用 s。
循环不会被子`call`程序中断。

```
@echo off
for /f "tokens=*" %%a in (file.txt) do (
  bla bla bla
  bla bla bla
  call :check
)
exit /b

:check
tasklist /FI "IMAGENAME eq prog.exe" 2>NUL | find /I /N "prog.exe">NUL
if "%ERRORLEVEL%"=="0" (goto check)
exit /b 
```

# java - 为什么 ArrayList.set() 会毫无例外地留下一个方法？

> ID：11177422
> 
> 赞同：0
> 
> 时间：2012-06-24T12:27:24.473
> 
> 标签：java, android, exception, android-emulator

我目前在我的 Android 虚拟机（模拟器，Android 2.1）上开发时遇到了一个问题。与其说是解决问题，不如说是理解。我所拥有的是这种方法：

```
private void storeData(int crmValue, int crmTouch, int heartrate) {
    // Store in data or ring buffer
    waitCRM.add(crmValue);
    waitTouch.add(crmTouch);
    waitHeart.add(heartrate);
} 
```

wait*** 是用户自定义类 RingBuffer 的实例变量。这个类的 add 方法是这样的：

```
public void add(E o) {
    buffer.set(index, o);
    index++;
    if (index == capacity) {
        index = 0;
    }
    if (length < capacity) {
        length++;
    }
} 
```

在这种情况下，E 是一个 Integer，缓冲区是一个 ArrayList，容量为 60，索引为 0，因为这是第一个 add() 调用。

当然，此时 ArrayList/buffer 为空，并且 buffer.set() 可能不正确，因为这将返回当前值。实际上 buffer.add() 并没有解决问题，但这只是一个需要解决的细节。暂时不应该打扰你。

每 100 毫秒 (atFixedRate) 在 ScheduledFuture（计时器）中调用 storeData() 方法。只要计时器由于 IF 而不会调用 storeData() ，一切都会按预期工作。但是一旦第一次调用 storeData() ......

...程序在 waitCRM.add(crmValue) 期间离开方法 storeData();

...定时器被取消（其他线程恢复工作）

...并且在控制台或 LogCat 中没有发现异常或其他任何内容

鉴于没有错误消息，我花了几个小时才发现这么多。所以这是我的问题：Java/Android 如何以及在什么情况下停止线程而不显示任何错误？

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:41:52.773

对我来说，您似乎遇到了异常`add(E o)`，由于某种原因，您在 logcat 中看不到。

方法 set() 是错误的，如果您查看[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#set(int](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/ArrayList.html#set(int) , java.lang 。目的）

> 将此列表中指定位置的元素替换为指定元素。
> 
> 抛出：IndexOutOfBoundsException - 如果索引超出范围（索引 < 0 || 索引 >= size()）。

所以使用 set 你应该得到一个 IndexOutOfBoundsException 因为你还没有任何元素， index == 0, size == 0 和 index >= size == true

但是 add(int index, Object element) 应该可以工作，你说你遇到了同样的问题......

在 add 方法的代码中放置一个日志或断点，然后查看它在哪一行退出。

# r - 在后台并行会话中运行 R 脚本

> ID：11177425
> 
> 赞同：2
> 
> 时间：2012-06-24T12:28:01.640
> 
> 标签：r, parallel-processing

我有一个脚本`test.R`，它接受参数`arg1`，`arg2`并输出一个`arg1-arg2.csv`文件。

我想在 6 个并行会话（我在 6 核 CPU 上）和后台运行 test.R。我该怎么做？

我在linux上

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:12:09.280

我建议对[foreach](http://cran.r-project.org/web/packages/foreach/index.html)包使用[doParallel](http://cran.r-project.org/web/packages/doParallel/index.html)后端。foreach 包提供了一个很好的语法来编写循环并负责组合结果。doParallel 将其连接到自 R 2.14 起包含的[并行](http://stat.ethz.ch/R-manual/R-devel/library/parallel/doc/parallel.pdf)包。在其他设置（旧版本的 R、集群等）上，您可以简单地更改后端，而无需触及任何 foreach 循环。特别是 foreach 包有很好的文档，所以它真的很容易使用。

如果您要将结果写入单个文件，那么 foreach 的结果组合功能对您没有多大用处。所以人们可能会争辩说直接使用并行会更适合您的应用程序。就我个人而言，我发现 foreach 表达循环概念的方式更易于使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T14:43:30.327

您没有提供可重复的示例，所以我正在编造一个。正如你在 Linux 上一样，我也喜欢 littler，[毕竟](http://dirk.eddelbuettel.com/code/littler.html)它是为使用 R*编写脚本而编写的。*

```
#!/usr/bin/env r
#
# a simple example to install one or more packages

if (is.null(argv) | length(argv) != 2) {
    cat("Usage: myscript.r arg1 arg2\n")
    q()
}

filename <- sprintf("%s-%s.csv", argv[1], argv[2])
Sys.sleep(60)   # do some real work here instead
write.csv(matrix(rnorm(9), 3, 3), file=filename) 
```

然后你可以像我在这里一样从命令行启动它，或者从另一个（shell）脚本启动它。关键是`&`最后在后台发送它：

```
edd@max:/tmp/tempdir$ ../myscript.r a b &
[1] 19575
edd@max:/tmp/tempdir$ ../myscript.r c d &
[2] 19590
edd@max:/tmp/tempdir$ ../myscript.r e f &
[3] 19607
edd@max:/tmp/tempdir$ 
```

`[$n]`表示进程是如何在后台启动的，后面的数字是您可以用来监视或杀死的进程ID 。过了一会儿，我们得到结果：

```
edd@max:/tmp/tempdir$ 
[1]   Done                    ../myscript.r a b
[2]-  Done                    ../myscript.r c d
[3]+  Done                    ../myscript.r e f
edd@max:/tmp/tempdir$ ls -ltr
total 12
-rw-rw-r-- 1 edd edd 192 Jun 24 09:39 a-b.csv
-rw-rw-r-- 1 edd edd 193 Jun 24 09:40 c-d.csv
-rw-rw-r-- 1 edd edd 193 Jun 24 09:40 e-f.csv
edd@max:/tmp/tempdir$ 
```

您可能想阅读 Unix shell 以了解有关`&`m`fg`和`bg`background 等的更多信息。

最后，所有这一切都可以 a) 虽然选择参数略有不同，但也可以完成，`Rscript`b) 有 CRAN 包[getopt](http://cran.r-project.org/package=getopt)和[optparse](http://cran.r-project.org/package=optparse)以方便使用命令行参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T13:20:57.230

最先进的方法是使用并行包，但是当我懒惰时，我只需使用 rscript 启动 6 个批处理（cmd，假设为 Windows）文件。

您可以在 cmd 文件中设置参数

```
SET ARG1="myfile"
rscript rest.r 
```

并从中读取

```
Sys.getenv("ARG") 
```

使用 6 个批处理文件，我还可以在一批中追加多个运行，以确保内核始终处于忙碌状态。

# php - 数组插入表单

> ID：11177426
> 
> 赞同：-1
> 
> 时间：2012-06-24T12:28:16.327
> 
> 标签：php, arrays, jquery

只有编辑可以发布到数据库但价格不能发布到数据库..

那么，我如何进行查询，让表单中的第一行有字段 1 = 全名，字段 2 = 年龄.. 我可以再次使用相同的字段添加新行并将所有信息提交到数组到数据库中

```
<?php
    session_start();
    include "_config/config.php";
    //include "header.php";

    if (isset($_POST["editor"])) //&& ($_POST["price"]) && is_array($_POST["price"]) && count($_POST["price"]) > 0) 
    { 
    foreach($_POST["editor"] as $editor)
       { 
           // echo htmlspecialchars($editor, ENT_QUOTES); 
           mysql_connect($server, $db_user, $db_pass)  or die ("Database CONNECT Error (line 62)"); 
           mysql_db_query($database, "INSERT INTO arrayins VALUES   ('','$editor','$price')");

       echo "Data Successfully Added";
            echo '<br />'; 
        } 
    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:47:12.367

您可以首先确定发布的行数，然后遍历行索引并获取适当的值：

```
$num_rows = is_array($_POST["editor"]) ? count($_POST["editor"]) : 0;

for ($i = 0; $i < $num_rows; $i++) {
    $editor = $_POST["editor"][$i];
    $price = $_POST["price"][$i];

    // your SQL code here using $editor and $price
} 
```

# sql - 汇总总计 - SSRS 2008 / SQL

> ID：11177429
> 
> 赞同：0
> 
> 时间：2012-06-24T12:29:05.453
> 
> 标签：sql, reporting-services, ssrs-2008

我一般是 SSRS 2008 和 SQL 的新用户。目前我正在 Reporting Services 中创建报告，但是在实现我想要的结果时遇到了问题。这些是我当前报告中的 4 列：

```
AU    De    OP       $12

AU    De    FX       $13

EU    De    FX       $6

GBP   Bo    Cor      $8

EU    De    FX       $14

AU    De    FX       $9

GBP   De    FX       $2

..    ..    ..       .. 
```

我想要的是能够通过第 2 列和第 1 列聚合第 3 列和第 4 列。对不起，我不知道如何准确地解释它，但是像这样

```
AU    De   OP        $12

AU   De   FX        $22  ($13+ $$9)

EU   De   FX        $20  ($6 + $14)

GBP  Bo   Cor       $8

GBP  De   FX        $2

..   ..   ..        .. 
```

我将非常感谢任何人可以提供的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:56:29.487

这是一个简单的分组查询：

```
select col1, col2, sum(col4) as amount
from t
group by col1, col2 
```

您应该可以在 SSRS 中进行设置。

# javascript - Ajax 在 Struts 中与 jQuery 的集成

> ID：11177430
> 
> 赞同：-3
> 
> 时间：2012-06-24T12:29:15.593
> 
> 标签：javascript, jquery, ajax, jsp, struts2

我对 jQuery、Ajax 和 JSP Servlets 比较熟悉，但对 Struts2 很陌生。我想知道 Struts 2 中 Ajax 集成的完整参考，首选 jQuery。在stackoverflow中也有更多的问题和答案，但仍然很少有东西要知道。我需要知道的东西很少。

**(1)** Struts2 应用程序中如何使用Ajax 是否有完整的参考资料。[struts2-jquery-plugin](http://code.google.com/p/struts2-jquery-plugin/#Tags)（以及他们的展示）有许多示例代码和演示。但是我找不到如何在 Java 类中处理它。它们本身发现的所有示例都在客户端 - 仅 JSP 示例，没有演示显示操作类是如何工作的。不知道应用程序返回什么（XML/JSON 或服务器端返回什么） 他们的站点仅演示核心功能。我想知道如何处理双方；[在 Struts 框架中] 和 [如何在 JSP 中自定义更多的 struts ajax 标签]。如果有任何链接或建议，将不胜感激。

**(2)**
我阅读了 Struts 2 In Action 这本书。它有示例代码和演示。它的第 8 章解释了如何使用 Ajax（使用了 Actionsupport，另一个扩展了 Result 类......）。在互联网上，很少找到示例代码，并且它们以某种不同的方式使用（直接 PrintWriter print() 结果）。但是在 JSP 方面，已经使用了普通的 javascript。那么，根据您的最佳实践（可能是更多方式），您最喜欢使用 Ajax 的方式是什么？（这意味着，您使用[jquery 插件显示](http://code.google.com/p/struts2-jquery-plugin/#Tags)或不依赖于 Struts ajax 标签，只在 JSP 页面中使用 javascript/jQuery，以及处理 struts 类的最佳实践编写结果类还是只使用 PrintWriter 打印结果？在这里你可能会说，这取决于开发者的情况和口味，但根据行业标准会是什么？）
**如果有人反对。请发表评论，为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:36:55.403

您应该改用[这个 jquery 插件](http://code.google.com/p/struts2-jquery/)；这是 S2 项目最接近官方 jQuery 插件的东西。你链接的那个不一样。

将数据返回到 JavaScript（无论是否为 jQuery）的最常见方法是使用[JSON 插件](http://struts.apache.org/2.x/docs/json-plugin.html)或[REST 插件](http://struts.apache.org/2.x/docs/rest-plugin.html)。*手动编写响应的*理由很少。

# r - Knitting Rmd 对非英文字符的处理方式不同

> ID：11177432
> 
> 赞同：3
> 
> 时间：2012-06-24T12:29:44.533
> 
> 标签：r, knitr

我试图在下面编写可重现的示例。它是 .Rmd 和 .r 的混合体。希望你能明白为什么。

我遇到的问题是非英文字符的处理方式不同，具体取决于代码是直接在控制台中运行还是在针织为 HTML 时运行。

在下面的示例中，我创建了一个带有字符 ü 和 ö 的小型 data.frame，将其写入 csv，然后再次将其读回。

如果写入和读取都发生在块内部或外部，那么一切都很好。

但是如果写入和读取发生在不同的地方，那么就会使用不同的编码（我认为）。和字符混淆。

这意味着在读取数据时，我在编译 .Rmd 文件时需要与直接在 R 中工作时不同的编码。

据我所知，语言环境总是相同的，所以我不明白发生了什么。

有任何想法吗？

## 直接写入和读取 csv 以创建新的数据文件

```
df2 <- data.frame(Cäl1 = c(1,2), Col2 = c("ü","a")) 

write.csv(df2, file="df2.csv")

read.csv("df2.csv")

Sys.getlocale(category = "LC_ALL") 
```

## 现在尝试编织整个文档（只是运行块的行为不同）

```
```{r read_inside}

read.csv("df2.csv")

Sys.getlocale(category = "LC_ALL")

``` 
```

## 这第二个块将起作用，因为 data.frame 是在块内创建的

```
```{r write_read_inside}

df2 <- data.frame(Cäl1 = c(1,2), Col2 = c("ü","a")) 
write.csv(df2, file="df2.csv")
read.csv("df2.csv")

Sys.getlocale(category = "LC_ALL")

``` 
```

会话信息：

```
R version 2.15.0 (2012-03-30)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252    LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                            LC_TIME=English_United Kingdom.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

loaded via a namespace (and not attached):
[1] tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T14:47:27.533

所以答案是保证 UTF8 编码，例如`write.csv(..., fileEncoding = 'UTF-8')`. 根本问题实际上是 RStudio 默认使用 UTF8，但 R 默认使用 OS 的本机编码。我们可以要求 R 在 中使用 UTF8 `write.csv`，也可以要求 RStudio 使用本机编码 ( `options(encoding = 'native.enc')`)。

# ios - Xcode 4 项目的 Git 忽略文件

> ID：11177443
> 
> 赞同：20
> 
> 时间：2012-06-24T12:31:47.837
> 
> 标签：ios, xcode, git, ios5, xcode4.3

对于 Xcode 4(.3.2)，哪些文件最好在 git 中忽略？这个较旧的[问题](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects)解决了同样的问题，但我发现我的结构不同，所以我认为它是关于旧版本的 Xcode。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-24T12:36:17.690

以下是包括 Xcode 在内的几乎所有语言的 git ignore 文件：[Github - git ignore](https://github.com/github/gitignore)

对我来说，它就像一种魅力。这是Objective-C.gitignore的内容

```
# Xcode
build/*
*.pbxuser
!default.pbxuser
*.mode1v3
!default.mode1v3
*.mode2v3
!default.mode2v3
*.perspectivev3
!default.perspectivev3
*.xcworkspace
!default.xcworkspace
xcuserdata
profile
*.moved-aside
DerivedData 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-24T13:10:38.443

这就是我们使用的：

```
#xcode Noise
build/*
*.pbxuser
*.mode2v3
*.mode1v3
*.xcworkspace
xcuserdata

# OSX Noise
.DS_Store
profile
*~
*.lock
*.DS_Store
*.swp
*.out 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-13T11:39:56.727

现有的答案很好。`CocoaPods`我只是想给正在使用管理图书馆的人留个便条。除了`xcworkspace`CocoaPods 生成的，你还应该忽略`Pods/`目录：

```
Pods/* 
```

每个开发人员都应该`pod install`在自己的机器上单独做。否则，他们可能会面临许多环境问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T12:39:52.510

我一直在使用您链接的问题中的解决方案，并进行了一些更改。我认为它有一个非常好的解决方案来忽略不必要的项目文件

```
#OS junk files
[Tt]humbs.db
*.DS_Store
*.bak*

#Xcode files
#This ignores everything inside a *.xcodeproj except the project.pbxproj
*.xcodeproj/
!*.xcodeproj/project.pbxproj
*.log
xcuserdata

#Project files
[Bb]uild/

#Version control files
.svn
*.orig 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T12:34:01.170

我通常忽略以下内容

*   /ProjectPath/project.xcodeproj/xcuserdata
*   /ProjectPath/project.xcodeproj/project.xcworkspace

还有一些隐藏文件，比如

*   /ProjectPath/.DS_Store

# php - 向后台进程发送命令？

> ID：11177444
> 
> 赞同：2
> 
> 时间：2012-06-24T12:32:05.997
> 
> 标签：php, windows, process, background, exec

如何使用 PHP 向后台进程发送命令？

**我像这样开始这个过程：**

```
exec('start /D "samp-server.exe"'); 
```

**我像这样杀死进程：**

```
exec('TASKKILL /F /IM "samp-server.exe"'); 
```

**我检查，如果进程正在运行，像这样：**

```
exec('tasklist /FI "IMAGENAME eq samp-server.exe"'); 
```

但是我如何从这个后台进程向控制台发送命令，例如“退出”。

**如果您不了解 Sa-MP 服务器控制台：**

[http://www.abload.de/image.php?img=firstd0lc9.png](http://www.abload.de/image.php?img=firstd0lc9.png)

[http://www.abload.de/image.php?img=thenf3guh.png](http://www.abload.de/image.php?img=firstd0lc9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:45:11.250

使用 proc__open [http://www.php.net/manual/en/function.proc-open.php](http://www.php.net/manual/en/function.proc-open.php)因为这应该可以为您提供所需的控制。手册页中的示例。

# c# - 错误 Can't get a folder under box.net using sharpbox

> ID：11177447
> 
> 赞同：0
> 
> 时间：2012-06-24T12:32:45.297
> 
> 标签：c#, cloud, dropbox, box-api

我创建了一些代码来使用 CloudStorage 对象的 GetFolder() 方法从 box.NET 获取文件夹。但是当我运行它时，它给出了 NullReferenceExeption，我不知道是什么问题。该代码适用于 Dropbox。顺便说一句，Box.NET 凭据没有问题，因为我成功地打开了与 Box.NET 的连接。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T20:48:49.460

如果您仍在调查问题，我只需要自己调试即可。

我一直忽略这个问题，因为这个问题太小了，但请检查一下`BoxNetStorageProviderServices.cs`。

`OnNameBase`假设 url 将作为`http`而不是`https`. 然后字符串 replace 将 url 从 更改`https://www.box.com/dav/blahblah`为`httpss://www.box.com/dav/blahblah`。

在添加一点点逻辑之后，一切都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:41:15.383

你用的是哪个库？有一个 Box C# 库，Box 提供了让您使用 Box api 的基本工具： [https ://github.com/box/box-csharp-sdk](https://github.com/box/box-csharp-sdk)

如果您使用 box-api 标签标记此问题，您还将从更广泛的 Box 社区获得更多帮助。

# node.js - Node.JS 分叉的最佳方法？

> ID：11177453
> 
> 赞同：1
> 
> 时间：2012-06-24T12:34:27.790
> 
> 标签：node.js

我正在用 Node.JS 编写轨迹预测器。你可能认为用它来写一个有趣的语言，但它实际上工作得很好。现在，我希望能够从 Node.JS 中的 Web 界面启动预测器。

实际的预测器过程大约需要 5 分钟才能运行。因此，要从 Node Web 进程中生成它，我不希望 Web 进程等待子进程完成。在 Node.JS 中，允许生成和释放这样的进程的最佳分叉方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:42:26.030

使用内置`child_process`节点模块： [http ://nodejs.org/api/child_process.html](http://nodejs.org/api/child_process.html)

# php - 跨浏览器 html5 和 PHP 的 max 属性的替代品

> ID：11177456
> 
> 赞同：0
> 
> 时间：2012-06-24T12:34:45.630
> 
> 标签：php, html, max

`<input type="number" name="amount" max="6" />` HTML5 和 PHP

我在 order.php 中使用上面的代码，但在 html5 中。那么也许使用一些PHP可以解决这个问题？

这适用于：Opera 和 Chrome

不适用于：Safare、IE 和 Firefox

在 Opera 和 Chrome 中，当我超过值 6 并且我无法继续时，它会向我显示警告。

在 Safari、IE 和 Firefox 中，它不显示任何警告并继续结帐。

有没有max的替代品？它需要在上述所有浏览器中工作。

谢谢你，F4LLCON

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T12:45:44.930

我将扩展 Millimoose 所说的内容，并建议一种叫做 polyfill 的东西*来*帮助你解决这个问题。虽然 HTML5 表单很棒，但并不是每个浏览器都完全支持它们。但是人们花了很多时间编写脚本，将这个功能带到旧版浏览器中，同时在支持它的浏览器中使用默认功能！

为您提到的一个是[jQuery Tools Validator](http://www.jquerytools.org/documentation/validator/index.html)。它确实是您用例的最佳选择，因为您可以将其放入，而不必编写繁琐的验证规则。

我还建议您查看此[占位符脚本](https://github.com/mathiasbynens/jquery-placeholder)，以在您的表单中获得更多 HTML5 优点！

请记住，在使用剪切时，新功能始终集成这些类型的脚本，以使旧浏览器也能享受您的网站。

# jquery - jQuery 传递 XML Ajax

> ID：11177459
> 
> 赞同：0
> 
> 时间：2012-06-24T12:35:07.713
> 
> 标签：jquery, html, xml, parsing, loops

我有以下 jQuery

```
$.ajax({
    type: "GET",
    url: "http://f.cl.ly/items/0i1V1L1k2F440L1m2Y0G/pointdata.xml",
    dataType: "xml",
    success: parseXml
});

function parseXml(xml) {
    $(xml).find('point').each(function() {
        var lat = $(this).children('lat').text();
        var long = $(this).children('long').text();
        alert(lat + long);
    });
} 
```

试图从此 XML 文件中[读取](http://f.cl.ly/items/0i1V1L1k2F440L1m2Y0G/pointdata.xml)数据

您还可以[在此处查看实时 jsFiddle](http://jsfiddle.net/STe25/1/)

由于某种原因，没有为每个元素分配变量 lat 和 long。我究竟做错了什么？任何帮助将非常感激。提前致谢。​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:41:06.430

你的`parseXML`功能[有效](http://jsfiddle.net/eK7Kt/)

您可能违反了[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。
您不能向`ajax`其他域发送请求。

请注意，`lat + long`concats**字符串**`'1' + '2'`不是`'12'` **3**。
如果您希望结果为 3，请先解析为 int。

# c++ - ASM 中的浮点数

> ID：11177460
> 
> 赞同：2
> 
> 时间：2012-06-24T12:35:15.100
> 
> 标签：c++, assembly, floating-point, double, inline-assembly

在过去的几天里，我在玩 C++、ASM 和内联 ASM。我知道如何访问内存中的基本变量和类似的东西。现在我正在尝试在 ASM 中使用浮点数。我已经反汇编了这段代码：

```
float A = 0.058; 
```

我有这个结果：

```
 fld         dword ptr ds:[00415744h]  
 fstp        dword ptr [ebp-8] 
```

但我不明白这段代码。我在谷歌上搜索，但我没有找到任何对我有用的东西。任何人都可以向我解释 ASM 中的实数吗？谁能解释我这段代码？请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T16:22:43.860

这是编译器对您的代码所做的：

编译器将“0.058”识别为浮点文字。它分析字符串以计算它表示的值并将该值编码为双精度浮点值。然后它识别出您正在将此双精度值分配给单精度对象（浮点 A，而不是双精度 A），因此它不需要完整的双精度值。因此编译器将其转换为单精度。产生的编码可能是 0x3d6d9168，这是单精度 0.058 的常见 IEEE 754 编码。

在编译器生成的汇编代码中的某处，编译器生成了一个指令（对汇编器的指令），该指令导致该值 0x3d6d9168 存储在内存中。（这是一个复杂的过程；汇编器将值写入它生成的目标文件，作为各种数据的一部分，作为程序映像的一部分。当程序准备好执行或程序执行时，该数据将被加载到内存中首先尝试访问那部分内存。）

此外，编译器生成了 fld 指令“fld dword ptr ds:[00415744h]”。自从我使用这种形式的汇编以来已经有一段时间了，所以我可能有点偏离，但我相信指令说“使用数据段 (DS) 寄存器作为基地址，使用 0x415744 作为段内的偏移量。该组合是指向双字的指针。从那里加载四个字节到浮点堆栈。（浮点堆栈是处理器内部的一组特殊寄存器。）

fstp 指令“fstp dword ptr [ebp-8]”的意思是“将扩展基指针 (EBP) 寄存器的内容减去 8。该值是指向双字的指针。将浮点堆栈中的四个字节存储到该双字中，然后将项从浮点堆栈中弹出。”</p>

请注意，0x415744 与浮点值无关。它是存储常量值的内存地址。这两条指令从内存中的只读位置加载常量值并将其存储到 [ebp-8]，这是编译器决定将值保留在变量 A 中的内存位置。EBP 通常是用于引用堆栈中的位置，因此编译器几乎肯定会在此函数的堆栈帧中留出一些内存来保存变量的值。

我怀疑您在关闭优化的情况下编译了此代码。打开优化后，编译器可能不会费心将浮点值实际存储在分配给 A 的内存中。这是因为您没有立即对该值执行任何操作，只是将其存储在 A 中。但我们已经知道值并将其存储在其他地方，那么为什么还要复制它呢？相反，在代码中稍后的某个位置，您实际使用 A 的值时，编译器将从只读内存中加载它并直接在计算中使用它。（情况并非总是如此；您可以编写需要编译器进行一些复制的代码，因为您的代码可能会采用多个可能路径之一，具体取决于传递给它的参数或其他因素，并且编译器需要进行复制以确保将正确的数据用于所遵循的路径。但是，一般来说，您不应期望在您编写的 C 代码和编译器生成的汇编指令之间找到完全匹配。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T12:41:22.837

第一行将常量浮点值 0.058 加载到 FPU 堆栈。第二行将 FPU 堆栈的顶部复制到 CPU 堆栈，由 ebp-8 寻址。

您可以在此处阅读有关 FPU 的说明：[http](http://maven.smith.edu/~thiebaut/ArtOfAssembly/CH14/CH14-4.html) ://maven.smith.edu/~thiebaut/ArtOfAssembly/CH14/CH14-4.html或任何其他大会参考。

编辑。

dword ptr [ebp-8] 将 FPU 堆栈的顶部复制到堆栈上的 DWORD 大小的局部变量。来自汇编参考，EBP（基指针）：汇编函数将基指针设置为等于堆栈指针，然后将其自己的内部变量放在堆栈上。从那时起，函数引用其参数和变量相对于基指针而不是堆栈指针。

# c# - 解释自定义选择的 lambda 表达式

> ID：11177475
> 
> 赞同：0
> 
> 时间：2012-06-24T12:37:19.360
> 
> 标签：c#, lambda, predicates

在继续之前，我需要介绍一些背景知识：我有一个项目，它使用 nHibernate 和一些通用存储库来转发谓词并返回实体，如下所示：

```
public abstract class GenericRepository< T >
{
...
    public virtual T Single( Expression< Func< T, bool > > predicates )
    {
        // Get object from nHibernate session object
        var retObj = Session
            .Query< T >()
            .Where( predicates ).SingleOrDefault();

        return retObj;
    }
...
} 
```

然后，我可以通过这种方式获取实体：

```
var entity = Context.MyGenericEntityRepository.Single( e => e.Id == id );
// or
var entity = Context.MyGenericEntityRepository.Single( e => e.Name == name ); 
```

但是，由于项目的性质，我也有一些实体没有保存到数据库，而是保存到文件系统（文件束）。因此，我使用派生存储库，该存储库使用某种 DataAccess 类从文件系统中获取实体，如下所示：

```
public class NotGenericRepository
{
...
    // for example
    public IList<Entity> All()
    {
        return _entityDataAccess.All();
    }
...
} 
```

如前所述，第二种类型的实体没有存储在数据库中，但是，为了方便我的旅程，我使用 DataSets 和 DataTables 创建了一种内存数据库系统。因此，当解决方案第一次启动时，我有一个名为 CustomDatabase 的单例，它被初始化，在内存中创建 DataTables，添加 DataTalbes 之间的关系，并在扫描文件系统以填充表之前将它们添加到通用 DataSet。

使用它，我现在可以查询我的数据表，而不是每次都扫描文件系统树。然后我在我的 CustomDatabase 中设置了一些事件，因此每当添加/删除/更新一行时，更改都会反映到文件系统上。

所以...这就是背景，抱歉太长了...

我的问题现在相当简单，我正在寻找一种方法来以某种方式将存储库转发的 lambda 表达式转换为我的 DataAccess 类，这样我就可以分析它并相应地从我的 DataTables 中选择......

例如，对存储库的调用，例如：

```
var entity = Context.MyNotGenericEntityRepository.Single( e => e.Id == id );
// or
var entity = Context.MyNotGenericEntityRepository.Single( e => e.Name == name ); 
```

应在 DataAccess 中翻译为：

```
DataRow entityRow = CustomDatabase.Tables[ "EntityName" ].AsEnumerable().Where( e => e.Field< Guid >( "Id" ) == id);
// or
DataRow entityRow = CustomDatabase.Tables[ "EntityName" ].AsEnumerable().Where( e => e.Field< string >( "Name" ) == name); 
```

或者：

```
var entity = from myRow in CustomDatabase.Tables[ "EntityName" ].AsEnumerable()
             where myRow.Field<Guid>( "Id" ) == id
             select myRow;
// or
var entity = from myRow in CustomDatabase.Tables[ "EntityName" ].AsEnumerable()
             where myRow.Field<string>( "Name" ) == name
             select myRow; 
```

我完全不知道该怎么做，我一直在网上寻找，但问题是我真的不知道如何命名这个问题，所以到目前为止我还没有找到太多...... :(

感谢任何帮助，因为我希望有几种方法可以解决这个问题:)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:27:09.000

很难说出派生存储库类示例中跳过了什么，但它可以像覆盖（或重载）Single 以返回 All().Single(..) 一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:04:31.517

假设您的谓词表达式是您问题中的形式，您可以将表达式转换为 a `DataRow`，然后使用它来过滤与实体对应的表：

```
public static DataRow GetSingleRow<T>(Expression<Func<T, bool>> expr)
{
    var bodyExpr = ((LambdaExpression)expr).Body;
    var binExpr = (BinaryExpression)bodyExpr;
    var propExpr = (MemberExpression)binExpr.Left;
    PropertyInfo targetProperty = (PropertyInfo)propExpr.Member;
    Type targetType = targetProperty.DeclaringType;
    var valueExpr = binExpr.Right;
    string entityName = targetType.Name;

    var fieldMethod = typeof(DataRowExtensions).GetMethod("Field", new[] { typeof(DataRow), typeof(string) });
    var methodInfo = fieldMethod.MakeGenericMethod(targetProperty.PropertyType);
    var propNameExpr = Expression.Constant(targetProperty.Name);
    var rowParamExpr = Expression.Parameter(typeof(DataRow), "dr");
    var fieldInvocationExpr = Expression.Call(methodInfo, rowParamExpr, propNameExpr);

    var eqExpr = Expression.Equal(fieldInvocationExpr, valueExpr);
    Func<DataRow, bool> predicate = Expression.Lambda<Func<DataRow, bool>>(eqExpr, rowParamExpr).Compile();

    return CustomDatabase.Tables[entityName].AsEnumerable().Single(predicate);
} 
```

# java - 如何计算 Java HTTPGET 带宽使用量？

> ID：11177480
> 
> 赞同：2
> 
> 时间：2012-06-24T12:37:44.687
> 
> 标签：java, bandwidth, apache-httpclient-4.x

我有一个正在下载图片的应用程序，我正在尝试管理它正在使用的带宽。

用过的：

*   JDK 1.7
*   Apache HttpClient

我正在加载图片：

```
client = new DefaultHttpClient(cm, params);
client.getParams().setParameter(CoreConnectionPNames.SO_TIMEOUT, new Integer(15000));
client.getParams().setParameter(CoreConnectionPNames.CONNECTION_TIMEOUT, new Integer(15000));
client.getParams().setParameter(CoreConnectionPNames.TCP_NODELAY, false);

....

HttpResponse response = client.execute(httpget, new BasicHttpContext());
System.exit(0);

.... 
```

然后使用 HttpGet 方法，我正在加载[http://www.iconki.com/icons/System/16x16-Network-and-Security/earth.png](http://www.iconki.com/icons/System/16x16-Network-and-Security/earth.png)（作为示例）。

这是问题所在。

知道这个图像是 1K，我应该预计带宽使用量是 1K + 一些标头和额外的数据包。但是，即使我没有完全检索内容并在方法执行后立即退出，我仍然有 6K 带宽使用。这是否意味着每个调用的 HttpGet 方法总是有 6K 的开销？我试图循环客户端执行。

```
for (int i = 0; i < 10; i++)
{
    httpget = new HttpGet(URL); 
    setMethodeHeaders(httpget);
    response = client.execute(httpget, new BasicHttpContext());
    httpget.abort();
    Thread.sleep (1000);
    System.out.println ("Looping...");
} 
```

我得到了 60K 的使用量。这对于 10k 图像来说是巨大的。如果我得到内容长度，我就有 1K 的结果。不是6K的。

所以问题是：

*   **有没有办法跟踪真正的 HttpClient 带宽使用情况？**
*   **有没有办法减少这种开销？**

# javascript - Jquery文件未加载

> ID：11177481
> 
> 赞同：-2
> 
> 时间：2012-06-24T12:38:17.040
> 
> 标签：javascript, jquery, loading

我有点困惑......我可以在标签中的另一个 jquery 文件上方加载一个 javascript 文件，但是当它在其他 jquery 文件下方时它不会加载。

当我将它放在 jquery.min.js 文件上方时，它的加载很好，但是当它在它下方时，它无法加载。

我认为我的 jquery 文件有问题..但不确定是什么！

我的 Javascript 文件是：

```
/*      =======================================================================================================================================*/
// gallery slider
/* =======================================================================================================================================*/

  $(document).ready(function () {

            $('.project').mouseover(function ()
            {
                $(this).children('.cover').animate(
                {
                    height: "172px"
                });
                $(this).children('.title').animate(
                {
                    bottom: '-25px', height: "100px"
                });
            });

            $('.project').mouseleave(function ()
            {
                $(this).children('.cover').animate(
                {
                    height: "17px"
                });
                $(this).children('.title').animate(
                {
                    bottom: "0px", height: "20px"
                });
            });

             });

/* =======================================================================================================================================*/
// Top Contact Area
/* =======================================================================================================================================*/

$(window).load(function () {
$("#contactArea").css('height', '0px');

$(".contact-hurry a").toggle( 
            function () { 
                $(this).text('Quick Contact Hide / Close [-]')
                $("#contactArea").animate({height: "225px"}, {queue:false, duration: 500, easing: 'linear'})
                $("body").addClass("reposition-bg",{queue:false, duration: 500, easing: 'linear'})
            }, 
            function () { 
                $(this).text('Quick Contact Show / Open [+]')
                $("body").removeClass("reposition-bg",{queue:false, duration: 500, easing: 'linear'})
                $("#contactArea").animate({height: "0px"}, {queue:false, duration: 500, easing: 'linear'}) 
            } 
    ); 

});

/* =======================================================================================================================================*/
// Mega Menu    $("#contactArea").css('height', '0px');
/* =======================================================================================================================================*/

$(document).ready(function () {

function megaHoverOver(){
    $(this).find(".sub").stop().fadeTo('fast', 1).show();

    //Calculate width of all ul's
    (function($) { 
        jQuery.fn.calcSubWidth = function() {
            rowWidth = 150;
            //Calculate row
            $(this).find("ul.floating").each(function() {                   
                rowWidth += $(this).width(); 
            }); 
        };
    })(jQuery); 

    if ( $(this).find(".row").length > 0 ) { //If row exists...
        var biggestRow = 0; 
        //Calculate each row
        $(this).find(".row").each(function() {                             
            $(this).calcSubWidth();
            //Find biggest row
            if(rowWidth > biggestRow) {
                biggestRow = rowWidth;
            }
        });
        //Set width
        $(this).find(".sub").css({'width' :biggestRow});
        $(this).find(".row:last").css({'margin':'0'});

    } else { //If row does not exist...

        $(this).calcSubWidth();
        //Set Width
        $(this).find(".sub").css({'width' : rowWidth});

    }
}   
function megaHoverOut(){ 
  $(this).find(".sub").stop().fadeTo('fast', 0, function() {
      $(this).hide(); 
  });
}

var config = {    
     sensitivity: 2, // number = sensitivity threshold (must be 1 or higher)    
     interval: 100, // number = milliseconds for onMouseOver polling interval    
     over: megaHoverOver, // function = onMouseOver callback (REQUIRED)    
     timeout: 100, // number = milliseconds delay before onMouseOut    
     out: megaHoverOut // function = onMouseOut callback (REQUIRED)    
};

$("ul#topnav li .sub").css({'opacity':'0'});
$("ul#topnav li").hoverIntent(config);

jQuery(function() {
        // run the currently selected effect
        function runEffect() {
            // get effect type from 
            var selectedEffect = $( "#effectTypes" ).val();

            // most effect types need no options passed by default
            var options = {};
            // some effects have required parameters
            if ( selectedEffect === "scale" ) {
                options = { percent: 0 };
            } else if ( selectedEffect === "size" ) {
                options = { to: { width: 200, height: 60 } };
            }

            // run the effect
            $( "#effect" ).toggle( selectedEffect, options, 500 );
        };

        // set effect from select menu value
        $( "#button" ).click(function() {
            runEffect();
            return false;
        });
    });

  /* =======================================================================================================================================*/
// faqs
/* =======================================================================================================================================*/

$(document).ready(function(){
                $("#faqs tr:odd").addClass("odd");
                $("#faqs tr:not(.odd)").hide();
                $("#faqs tr:first-child").show();

                $("#faqs tr.odd").click(function(){
                    $(this).next("tr").toggle('fast');
                    $(this).find(".arrow").toggleClass("up");
                });

            }); 

   /* =======================================================================================================================================*/
// Portfolio slider
/* =======================================================================================================================================*/

/*
$(document).ready(function() {

var currentImage;
var currentIndex = -1;
var interval;
function showImage(index){
    if(index < $('#bigPic img').length){
        var indexImage = $('#bigPic img')[index]
        if(currentImage){   
            if(currentImage != indexImage ){
                $(currentImage).css('z-index',2);
                clearTimeout(myTimer);
                $(currentImage).fadeOut(250, function() {
                    myTimer = setTimeout("showNext()", 3900);
                    $(this).css({'display':'none','z-index':1})
                });
            }
        }
        $(indexImage).css({'display':'block', 'opacity':1});
        currentImage = indexImage;
        currentIndex = index;
        $('#thumbs li').removeClass('active');
        $($('#thumbs li')[index]).addClass('active');
    }
}

function showNext(){
    var len = $('#bigPic img').length;
    var next = currentIndex < (len-1) ? currentIndex + 1 : 0;
    showImage(next);
}

var myTimer;

$(document).ready(function() {
    myTimer = setTimeout("showNext()", 3000);
    showNext(); //loads first image

});

});

*/

$("#foo2").carouFredSel({
    circular: false,
    infinite: false,
    auto    : false,
    scroll  : {
        items   : "page"
    },
    prev    : { 
        button  : "#foo2_prev",
        key     : "left"
    },
    next    : { 
        button  : "#foo2_next",
        key     : "right"
    },
    pagination  : "#foo2_pag"
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:54:23.230

我不确定你的实际意思，但我试一试。

如果在使用 jquery 的脚本文件之前包含 jquery 库，那么这些将成功。使用 jquery 的脚本必须定义符号 $ 和 jQuery，并且 javascript 从上到下顺序运行文件。

这就是为什么必须先包含 jquery 的原因。

# php - 如何使用 HTML 表单运行 PHP 脚本而不重定向到新页面？

> ID：11177485
> 
> 赞同：0
> 
> 时间：2012-06-24T12:40:01.463
> 
> 标签：php

我有一个简单的 html 表单，如下所示

```
 <form action="search.php" method="get">
    <p>Company Name:
       <input type="text" name="name" />
    </p>    
    <p>
      <input type="submit" value = "Search"/>
    </p>
  </form> 
```

很简单，但是问题是我被重定向到`search.php`（与此表单页面位于同一目录中）。我希望能够在同一页面（表单下方）上显示搜索结果，而无需重定向到`search.php`. 你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:42:21.537

采用[`jQuery`](http://jquery.com)

然后您可以轻松调用*ajax*（来自 javascript 的客户端-服务器请求）（参见[文档](http://docs.jquery.com/Ajax)）

例如，如果您有一个 id 为**search-form的搜索表单和一个 id 为****search-results**的容器来显示搜索结果，那么您可以：

```
<script type="text/javascript">
function submit_search() {

    var request_data = $('#search-form').serailize();
    $.post('search.php', request_data, function(data, textStatus, jqXHR){
        $('#search-results').html(data);
        }, 'html');
    }
</script>

<form id="search-form" action="search.php" method="post" onsubmit="submit_searh();return false;">
<input type="text" name="q">
<input type="submit" value="Search!">
</form>

<div id="search-results"></div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T12:44:33.450

您可以将表单设置为在同一页面上重定向

```
<form action="yourPage.php" method="post">
<p>Company Name:
   <input type="text" name="name" />
</p>    
<p>
  <input type="submit" value = "Search"/>
</p> 
```

然后检查这个 php 页面是否已经填写了表格

```
 if(isset($_POST['a_field_of_your form']){
//treat the values of the form
} 
```

然后在页面中显示表单后的结果！

该方法暗示页面将被重新加载，如果您不希望它发生，则必须使用 Ajax 提交表单并从 Ajax 请求中获取搜索结果！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:42:59.933

您可以使用此库通过 ajax 提交表单

[阿贾克斯提交](http://jquery.malsup.com/form/)

例子：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.js"></script> 
    <script src="http://malsup.github.com/jquery.form.js"></script> 

    <script> 
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
            // bind 'myForm' (is an id of form) and provide a simple callback function 
            $('#myForm').ajaxForm(function(response) { 
                  //handle search results
                alert("Thank you for your search!"); 
            }); 
        }); 
    </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T12:43:46.173

您可以使用 AJAX 完成此操作。使用 javascript（或您用于 javascript 的任何库）并使用表单中的值向 search.php 发送 AJAX 请求。你需要自己收集这些。您还需要让 search.php 返回您可以插入页面的内容，而不是整个页面本身。

# xml - AS3 E4X 获得独立于标签大小写的标签属性

> ID：11177487
> 
> 赞同：0
> 
> 时间：2012-06-24T12:40:19.933
> 
> 标签：xml, actionscript-3, flash, air, e4x

如何独立于属性名称是否用大写字母来检索 xml 标记的属性？

目前我做类似的事情：

```
myXML = new XML(...);
if(myXML.@PROPERTYNAME.length())
    //...do something with myXML.@PROPERTYNAME...
if(myXML.@propertyname.length())
    //...do the same thing with myXML.@propertyname... 
```

但我想有一种更简单的方法来捕获独立于它们如何编写的属性？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:26:11.143

最好的解决方案是为您的 XML 设置一个标准并坚持下去，以便您的所有属性都一致地形成。如果这不是一个选项，那么您可以进行多次搜索。不是最漂亮的解决方案，但可能会完成这项工作。

将属性名称作为 a 传递`String`给以大写和小写形式搜索它并返回组合结果的方法。

```
 private function onLoaded(e:Event):void
    {
        xml = new XML(e.target.data);

        var list:XMLList = getNodesByAttribute("att");
        trace(list[1]);
    }

    private function getNodesByAttribute(attributeID:String):XMLList
    {
        var list:XMLList = (xml..@[attributeID.toLowerCase()]) + (xml..@[attributeID.toUpperCase()]);
        return list;
    } 
```

如果您的属性不仅全部为大写而且全部为小写（属性、属性和属性），那么这将变得混乱且无济于事。

也许您可以使用[正则表达式](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/RegExp.html)进一步推动这个想法，但恐怕我不擅长正则表达式（甚至不确定它是否可以在这种情况下使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T11:04:43.967

为什么不使用正则表达式：

```
const list:XMLList = xml.*.(@name.toString().search( new RegExp("hello") )!= -1); 
```

# c# - 如何将大文本文件拆分为较小的文件？

> ID：11177489
> 
> 赞同：1
> 
> 时间：2012-06-24T12:40:35.627
> 
> 标签：c#, .net, file, stream

我有一个带有一些文本的大文件，我想将其拆分为较小的文件。

在这个例子中，我做什么：

1.  我打开一个文本文件，假设其中有 10 000 行
2.  我在这里设置了一个package=300的数量，也就是说，这是小文件的限制，一旦一个小文件有300行，关闭它，打开一个新文件进行写入，例如（package2）。

3.  与步骤 2 相同。

4.  你已经知道了

这是我的函数中应该执行此操作的代码。想法（我不知道）是如何关闭并在新文件达到 300 个限制后打开一个新文件（在我们这里的例子中）。

让我告诉你我在说什么：

```
 int nr = 1;
        package=textBox1.Text;//how many lines/file (small file)
        string packnr = nr.ToString();
        string filer=package+"Pack-"+packnr+"+_"+date2+".txt";//name of small file/s
        int packtester = 0;
        int package= 300;
        StreamReader freader = new StreamReader("bigfile.txt");
        StreamWriter pak = new StreamWriter(filer);
        while ((line = freader.ReadLine()) != null)
        {
            if (packtester < package)
            {
                pak.WriteLine(line);//writing line to small file
                packtester++;//increasing the lines of small file
            }
            else if (packtester == package)//in this example, checking if the lines 
                                           //written, got to 300 
            {
                packtester = 0;
                pak.Close();//closing the file
                nr++;//nr++ -> just for file name to be Pack-2;
                packnr = nr.ToString();   
                StreamWriter pak = new StreamWriter(package + "Pack-" + packnr + "+_" + date2 + ".txt");
            }
        } 
```

我得到这个错误：

在声明之前不能使用局部变量“pak”

不能在此范围内声明名为“pak”的局部变量，因为它会给“pak”赋予不同的含义，后者已在“父或当前”范围中用于表示其他内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:05:49.087

尝试这个：

```
public void SplitFile()
{
    int nr = 1;
    int package = 300;
    DateTime date2 = DateTime.Now;
    int packtester = 0;
    using (var freader = new StreamReader("bigfile.txt"))
    {
        StreamWriter pak = null;
        try
        {
            pak = new StreamWriter(GetPackFilename(package, nr, date2), false);
            string line;

            while ((line = freader.ReadLine()) != null)
            {
                if (packtester < package)
                {
                    pak.WriteLine(line); //writing line to small file
                    packtester++; //increasing the lines of small file
                }
                else
                {
                    pak.Flush();
                    pak.Close(); //closing the file
                    packtester = 0;
                    nr++; //nr++ -> just for file name to be Pack-2;
                    pak = new StreamWriter(GetPackFilename(package, nr, date2), false);
                }
            }
        }
        finally
        {
            if(pak != null)
            {
                pak.Dispose();
            }
        }
    }
}

private string GetPackFilename(int package, int nr, DateTime date2)
{
    return string.Format("{0}Pack-{1}+_{2}.txt", package, nr, date2);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:49:49.913

当您达到 300 行时，此代码看起来会关闭流并重新打开一个新流。这段代码中到底有什么不起作用？

您要添加的一件事是最终关闭（可能带有检查，因此它不会尝试关闭已经关闭的流），以防您没有 300 行的偶数倍数。

**编辑：**

由于您的编辑，我看到了您的问题。您不需要在最后一行代码中重新声明 pak，只需将其重新初始化为另一个流写入器。（我不记得那是否是一次性的，但如果是的话，您可能应该在制作新的之前这样做）。

```
StreamWriter pak = new StreamWriter(package + "Pack-" + packnr + "+_" + date2 + ".txt"); 
```

变成

```
pak = new StreamWriter(package + "Pack-" + packnr + "+_" + date2 + ".txt"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:04:50.163

请注意，编写的代码不会编译，因为您`pak`多次定义变量。它应该可以正常工作，尽管它还有一些改进的余地。

在处理文件时，我的建议和一般规范是将代码包装在一个`using`块中，这基本上是构建在 finally 子句之上的语法糖：

```
using (var stream = File.Open("C:\hi.txt"))
{
    //write your code here. When this block is exited, stream will be disposed.
} 
```

相当于：

```
try
{
    var stream = File.Open(@"C:\hi.txt");
}
finally
{
    stream.Dispose();
} 
```

此外，在处理文件时，总是更喜欢使用非常特定的权限和模式打开文件流，而不是使用假设一些默认选项的更稀疏的构造函数。例如：

```
var stream = new StreamWriter(File.Open(@"c:\hi.txt", FileMode.CreateNew, FileAccess.ReadWrite, FileShare.Read)); 
```

例如，这将保证文件*不*应该被覆盖——相反，我们假设我们要打开的文件还不存在。

哦，我建议不要使用您执行的检查，而是使用对象的`EndOfStream`属性`StreamReader`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T12:55:49.670

[Logrotate](http://linux.die.net/man/8/logrotate)可以自动为您执行此操作。多年来，人们相信它可以处理他们有时非常大的网络服务器日志。

# c++ - QtConcurrent 试图在线程中运行一个函数

> ID：11177493
> 
> 赞同：0
> 
> 时间：2012-06-24T12:41:11.700
> 
> 标签：c++, qt, concurrency

我在其他一些包含的 .cc 中有这个功能：

```
void MakeMeshStructure(MeshStructureLayers layers,
  Handle_AIS_InteractiveContext theContext,
  Handle_TDocStd_Document aDoc,
  MyMesh & mesh, 
  int detail_vertex,
  double insulation_thickness,
  OpenMesh::VPropHandleT<MyMesh::Scalar> _max_beam_offset) 
```

在 MainWindow 中，我试图在一个线程中运行这个函数：

```
QFuture<void> future = QtConcurrent::run(MeshStructure3::MakeMeshStructure,
  layers, 
  myCadFrame->getWidget()->getContext(),
  myController->getDocument()->getOcafDoc(), 
  mesh, 
  detail_vertex, 
  toolBox->insulation_thickness_SpinBox->value(), 
  max_beam_offset_); 
```

编译器说它有太多参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:51:35.600

对于超过 5 个参数，您需要使用 Boost::bind，请参阅[Using Bound Function Arguments](http://doc-snapshot.qt-project.org/4.8/qtconcurrentrun.html#details)

# python - 如何将这个 matlab 示例写入 python

> ID：11177496
> 
> 赞同：-4
> 
> 时间：2012-06-24T12:41:24.863
> 
> 标签：python, matlab, numpy, porting

我正在尝试将其转换为 python。我真的需要 1 行的帮助。没学过matlab

```
function   [xc,yc,R,a] = circfit(x,y)
%
%   [xc yx R] = circfit(x,y)
%
%   fits a circle  in x,y plane in a more accurate
%   (less prone to ill condition )
%  procedure than circfit2 but using more memory
%  x,y are column vector where (x(i),y(i)) is a measured point
%
%  result is center point (yc,xc) and radius R
%  an optional output is the vector of coeficient a
% describing the circle's equation
%
%   x^2+y^2+a(1)*x+a(2)*y+a(3)=0
%
%  By:  Izhak bucher 25/oct /1991, 
    x=x(:); y=y(:);
   a=[x y ones(size(x))]\[-(x.^2+y.^2)]; # i just need help with this line
   xc = -.5*a(1);
   yc = -.5*a(2);
   R  =  sqrt((a(1)^2+a(2)^2)/4-a(3)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:39:33.107

您可能会发现[此参考](http://mathesaurus.sourceforge.net/matlab-numpy.html)很有用。

*   Matlab 数组从 1 开始索引；Python 数组从 0 开始

*   Python 没有 left-matrix-div 运算符，但 numpy.linalg.solve 执行相同的操作

.

```
from numpy import matrix
from numpy.linalg import solve

def circfit(xs, ys):
    a = matrix([[x,y,1.] for x,y in zip(xs, ys)])
    b = matrix([[-(x*x + y*y)] for x,y in zip(xs, ys)])
    res = solve(a,b)
    xc = -0.5 * res.item(0)
    yc = -0.5 * res.item(1)
    r = (xc*xc + yc*yc - res.item(2))**0.5
    return xc,yc,r 
```

然后

```
circfit([0,1,2],[2,1,2])   # ->  (1.0, 2.0, 1.0) as expected 
```

# java - 如何使用 Java NIO 2 访问 jar-archive 中的 zip 文件

> ID：11177497
> 
> 赞同：2
> 
> 时间：2012-06-24T12:41:28.917
> 
> 标签：java, jar, zip, java-7, nio2

我想访问一个位于 jar 存档内的 zip 文件。我认为我应该可以使用 NIO 2 的功能，但它似乎对我不起作用。有人知道如何以及是否可能吗？

我已经读到在 NIO 2 之前不先提取 zip 文件是不可能的，而且我还读到 TrueZIP 库提供了这个功能。但我想用 Java 的“本机”能力来解决这个问题。

最好的祝福，

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:51:38.853

尝试类似：

```
Path jarPath = Paths.get(...);
try (FileSystem jarFS = FileSystems.newFileSystem(jarPath, null)) {
    Path zipInJarPath = jarFS.getPath("/foo/myZip.zip");
    ...
} 
```

# algorithm - 计数和迭代序列的排列

> ID：11177500
> 
> 赞同：0
> 
> 时间：2012-06-24T12:41:50.753
> 
> 标签：algorithm, recursion, permutation

我有一个字符串和一些空格，例如字符串是“accttgagattcagt”，我有 10 个空格要插入。

您如何遍历该字符串和空格的所有组合？字符串中的字母不能重新排序，必须插入所有空格。

你怎么能计算重排的数量（不迭代它们）？

什么是合适的词？排列、组合还是其他？

（我将其想象为 1 和 0 的字符串，其中 1 由字符串使用，0 是空格。

因此，一个由 3 个字母和 2 个空格组成的短字符串将要求所有 5 位数字包含 3 个 1 和 2 个 0，例如 11100、11010、11001、10110、10101、10011、01110、01101、01011、00111？

但是在纸上制作短序列很容易，我正在努力制作一个 for 循环来做到这一点:(。创建这个序列的伪代码非常好，请计算一下它会有多长时间？

递归会更容易理解，但如果以某种方式避免递归，它会更快吗？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:02:44.667

嗯，有点伪代码，但你应该明白

```
list doThat(string, spaces){
    returnList
    spacesTemp = spaces;
    for(c = 0; c < string.length; c++){
        subString = string.getSubString(c, string.length);
        tmpString = string.insertStringAtPosition(c, createSpaceString(spacesTemp);
        retSubStringList = doThat(subString, spaces - spacesTemp);
        retCombinedList = addStringInFrontOfAllStringsInList(tmpString, retSubStringList);
        returnList.addList(retCombinedList);
        spacesTemp--;
    }
    return returnList;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:07:55.480

那是组合。

> 因此，一个由 3 个字母和 2 个空格组成的短字符串将要求所有 5 位数字包含 3 个 1 和 2 个 0，例如 11100、11010、11001、10110、10101、10011、01110、01101、01011、00111？

您将三个 '1' 放在 5 个索引之一上，顺序无关紧要。所以它的 5 比 3：

5!/((5-3)!3!) = 5*4/(2*1) = 10

[wikipedia.org](http://en.wikipedia.org/wiki/Combination)上的文章有一张图片，展示了 3 个红色和 2 个白色方块的随机序列。

这可能有用： [统计：Python 中的组合](https://stackoverflow.com/questions/3025162/statistics-combinations-in-python)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T13:11:46.243

n - 字母数 m - 空格数

## 数数

将第一个和第二个字母之间的空格数表示为 a_1，将第二个和第三个字母之间的空格数表示为 a_2，依此类推。你的问题现在可以表述为：有多少种不同的方式可以选择 a_1, a_2 ..a_n-1 ，每个数字不小于 0 并且它们的和满足 a_1 + a_2 .... + a_(n-1) = 米？这个问题的答案是 n + m over n（我的意思是牛顿符号）。

为什么会这样？将此问题可视化为连续 n + m 个空箱。如果我们用沙子填充其中的 n 个，填充的距离将满足我们对 a_1 ... a_n-1 总和的要求。

## 一代

```
def generate(s, num_spaces):
  ans = generate_aux("_" + s, num_spaces)
  return [x[1:] for x in ans]

def generate_aux(s, num_spaces) : # returns list of arrangements
  if num_spaces == 0:
    return [s]
  if s == "":
    return []
  val = []
  for i in range(0, num_spaces + 1):
    tmp = generate_aux(s[1:], num_spaces - i)
    pref = s[0] + (" " * i)
    val.extend([pref + x for x in tmp])
  return val

print generate("abc", 2) 
```

# html - 需要在设置宽度和高度的文本内显示跨度

> ID：11177503
> 
> 赞同：2
> 
> 时间：2012-06-24T12:41:55.847
> 
> 标签：html, css

我在想要在文本中显示的 css sprite 图像中有表情符号，因此我插入了带有背景定义的跨度，但由于这些跨度是内联元素，我无法定义宽度和高度。

我唯一能想到的就是让它们成为块元素并向左浮动，但我不确定这是否是最好的方法。您认为最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:03:04.010

尝试使用 css 属性和值`display: inline-block`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:52:22.370

我不认为`display: inline-block`支持足够依赖。显然我说的是 <=IE7，可能还有其他移动设备。不幸的是，它仍在使用中。然而，当人们停止支持 IE 时，就会有一个点。

我会尝试使用浮动的 div，并设置背景属性。没有一张图片。

# python - 在 Arduino 和 Mac OS X 系统之间通过 RS-232 发送十六进制数据

> ID：11177505
> 
> 赞同：0
> 
> 时间：2012-06-24T12:42:08.857
> 
> 标签：python, macos, serial-port, arduino

我正在使用*[语音识别模块 - Arduino Compatible](http://www.elechouse.com/elechouse/index.php?main_page=product_info&cPath=168_170&products_id=2151&zenid=3cvei81u5rqgti4d6l5p36n7r6)*。它说在那里使用 AccessPort，但因为我在 Mac OS X 上它不会工作。我不知道任何其他解决方案，但在我对任何其他有效的语言开放时用 Python 编写自己的解决方案。

我在这里找到了一些关于[pySerial](http://pyserial.sourceforge.net/)的解决方案，但到目前为止它似乎不起作用。

```
import serial
import struct

def C(val):
    return struct.pack('H', val)

ser = serial.Serial(port='/dev/tty.PL2303-00001004', baudrate=9600, timeout=1)
ser.nonblocking()

ser.write(C(0xaa11))
print ser.read().__repr__()
ser.close() 
```

它打开，写入两个字节并且不读取任何内容。`0xaa11`用于开始录制。[由于红色LED](http://en.wikipedia.org/wiki/Light-emitting_diode)快速闪烁，我的设备似乎处于等待模式。即使我这样做`0xaa00`，它也没有多大作用。我什至尝试将字节顺序更改为`0x00aa`，`0x11aa`等等，但我从未收到我的`0xcc`或`0xe0`错误代码。

在文档中它说以十六进制发送它，所以我的猜测是 accessport 将十六进制转换为`Short`使用两个字节的 a。`0xaa00`是一个两个字节的数字。我什至尝试将[波特率](http://en.wikipedia.org/wiki/Baud)更改为`38400`以防我之前的某个人将其设置为这个速度。

我很乐意从那个串口读取任何东西，因为到目前为止我可以写，它什么也不做，什么也不读......

截至目前，我将尝试使用交叉安装 AccessPort。如果它仍然不起作用，我将不得不找到一个 Windows 盒子。我什至可以用我的 Arduino 板编写自己的桥接器，因为我使用的驱动程序可能有问题。

以防万一，我使用的是 USB 转串行 PL2303。

### 编辑

*   我插入了输出和输入引脚来测试我的 USB 转串口。我确实阅读了我写的内容，因此驱动程序工作正常。

*   我将尝试直接使用 Arduino 进行设置并直接从那里进行测试。

*   发送`0xaa11`不同于发送`0xaa`然后`0x11`。串行似乎颠倒了字节顺序。

*   另一方面，文档没有说明位字节序，所以它也可能是问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:49:14.863

我有点解决了我的问题，虽然它毕竟很愚蠢。

这是我的最终脚本：

```
import serial
import struct
from time import sleep

def C(val):
    return struct.pack('!H', val)

ser = serial.Serial(port='/dev/tty.PL2303-00002006', baudrate=9600)

sleep(2)

ser.write(C(0xaa00))

sleep(1)
ser.write(C(0xaa36))

sleep(1)
ser.write(C(0xaa11))

sleep(1)

while True:
    print ser.readline() 
```

如果有人想使用该模块，它可以工作。它将切换到输出字而不是字节的模式，以便您可以使用 readline 读取它...

我在 struct.pack "!H" 中使用了网络字节序，它将 0xaa00 更改为 0xaa 0x00，就像它应该的那样。

但这里真正的问题不在脚本中。由于USB转串口确实有效，我认为模块没有响应任何东西很奇怪......甚至没有一个字节的错误。这个模块中的每个命令都必须返回一些东西。这就是为什么我回头查看我的电缆并检查针脚……`gnd`到`gnd`，电源到电源，然后`rxd`到`txd`，`txd`到`rxd`……虽然一切似乎都很好……我应该收到一些东西……然后我真的想。 ..如果它不应该使用交叉电缆并且应该`txd`插入`txd`和插入怎么办......显然它确实如此。`rxd``rxd`

我切换电缆，现在可以发送和接收数据。

所以任何使用该模块的人都应该检查它是否正确插入。如果它不起作用，请切换数据引脚。

# sql-server-2008 - SQL 中的交叉表（数据透视）查询

> ID：11177511
> 
> 赞同：0
> 
> 时间：2012-06-24T12:43:04.223
> 
> 标签：sql-server-2008, pivot-table

我在 SQL 中使用如下透视查询：

```
 SELECT  classification, [BSL] AS BSL, [AQ] AS AQ, [KYN] AS KYN,  ([BSL] + [AQ] + 
   [KYN]) AS CR_TTL
   FROM 
  ( 
   SELECT classification, Shed 
   FROM PunctualityMain WHERE Date >= '4/1/2012' AND Date <= '6/30/2012'   
  ) x
  PIVOT 
 ( 
  COUNT(Shed) 
  FOR Shed IN ([BSL],  [AQ],  [KYN]))  p  "> 
```

结果我在空单元格中得到 0，是否可以在结果页面中显示空值而不是 0？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:07:15.797

最简单的解决方案是使用 NULLIF 快捷方式，如下所示：

```
SELECT  classification
, NULLIF([BSL],0) AS BSL
, NULLIF([AQ],0) AS AQ
, NULLIF([KYN],0) AS KYN
, NULLIF([BSL] + [AQ] + [KYN],0) AS CR_TTL 
       FROM  
      (  
       SELECT classification, Shed  
       FROM PunctualityMain WHERE Date >= '4/1/2012' AND Date <= '6/30/2012'    
      ) x 
      PIVOT  
     (  
      COUNT(Shed)  
      FOR Shed IN ([BSL],  [AQ],  [KYN]))  p 
```

# c# - 引导顺序不正确

> ID：11177514
> 
> 赞同：2
> 
> 时间：2012-06-24T12:43:21.947
> 
> 标签：c#, mysql, hex, guid, connector-net

好的，我有一个 GUID `f5cc4100-f1b4-4af6-9e9e-224b0eb74166`，我正在使用 ADO .NET 连接器将它插入 MySQL 数据库。

我可以通过两种方式做到这一点：

1) 将字节数组馈送到 .NET 连接器

```
string query = "insert into test (pk_id) values (@id)";
using (var c = new MySqlCommand(query, conn))
{
    c.Parameters.AddWithValue("@id", new Guid("f5cc4100-f1b4-4af6-9e9e-224b0eb74166").ToByteArray());
    c.ExecuteNonQuery();
} 
```

2）依靠MySQL标准函数将十六进制转换为二进制字符串。

```
string query = "insert into test (pk_id) values (UNHEX(@id))";
using (var c = new MySqlCommand(query, conn))
{
    c.Parameters.AddWithValue("@id", "f5cc4100-f1b4-4af6-9e9e-224b0eb74166".Replace("-", "");
    c.ExecuteNonQuery();
} 
```

我面临的问题是上述两种方法以稍微不同的字符顺序插入相同的 guid。

如果我像这样选择插入的 guid：

```
string query = "select PK_id from test";
using (var c = new MySqlCommand(query, conn))
{
    using (var r = c.ExecuteReader())
    {
        while (r.Read())
        {
            var k = new Guid((byte[])r[0]);
        }
    }
} 
```

我`f5cc4100-f1b4-4af6-9e9e-224b0eb74166`来回`0041ccf5-b4f1-f64a-9e9e-224b0eb74166`。但是，如果我这样阅读：

```
string query = "select hex(PK_id) from test";
using (var c = new MySqlCommand(query, conn))
{
    using (var r = c.ExecuteReader())
    {
        while (r.Read())
        {
            var k = new Guid((string)r[0]);
        }
    }
} 
```

我得到`0041ccf5-b4f1-f64a-9e9e-224b0eb74166`和`f5cc4100-f1b4-4af6-9e9e-224b0eb74166`。

**简而言之，如果我将 GUID 作为字节数组插入，那么我需要照此读取它们并转换为字节数组以获得正确的 GUID。如果我将 GUID 作为`UNHEX`十六进制 guid 字符串插入，那么我需要使用其等效`HEX`函数从 db 中读取。**

1.  为什么上述两种方法的写作和阅读不同？

2.  在两者之间处理 GUID 的更合适的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:00:02.987

由于原始海报要求将我的评论（只是链接）作为答案发布，因此它来了：

[SO：.NET 中的 Guid 字节顺序](https://stackoverflow.com/questions/10190817/)

[MSDN：System.Guid .ToByteArray 交换前 4 个字节](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/c734755e-8102-4aba-9d0f-6c7eba8f14c5)

[SO：C#：为什么 Guid.ToString(“n”) 与从相同 guid 的字节数组生成的十六进制字符串不同？](https://stackoverflow.com/questions/3320501/)

似乎没有清楚地记录`Guid`在转换为和从`Byte[]`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T23:22:55.887

尼尔森回答了问题的一部分。至于使用哪个，没有什么是好的选择。无论哪种方式都很好。如果稍后需要在 .NET 世界之外读取 db 中的值，那么 MySQL hexing 和 unhexing 会更好。在我的测试中，与 hexing 和 unhexing 相关的性能损失很小（非常非常轻微）。如果这对您很重要，请坚持`ToByteArray()`

# visual-studio-2010 - 安装 resharper 6 后 VS 占用过多 CPU 时间

> ID：11177516
> 
> 赞同：0
> 
> 时间：2012-06-24T12:43:45.923
> 
> 标签：visual-studio-2010, resharper, resharper-6.0

我已经将 Resharper 从 5 版本升级到 6 版本。之后，当我在 VS 中输入内容时，我确实看到了“滞后”。即按下键后文本不会立即出现。我的 CPU 很慢 - 它是 Pentium U5400 但是使用 Resharper 5 我没有看到这样的滞后。我工作得很舒服。现在我看到了滞后。是因为 CPU 太慢还是这是 Resharper 错误？

如果 Resharper 6 具有在我打字时需要 CPU 时间的新功能（任何内容，甚至是评论）？它总是滞后。

当我在 VS "devenv.exe" 中输入注释时，进程占用了 70% 的 CPU。稍后我将测试 Resharper 6 如何在我的桌面 (i7-860) 上运行。

问题是为什么 Resharper 6 比 Resharper 5 占用更多的 CPU 以及为此我有哪些不错的功能？

**在输入 VS 时更新i7-860**会占用 CPU 的 10%，大约是 U5400 的 70%。所以这个问题是可取的。为什么 Resharper 6 比 Resharper 5 占用更多的 CPU？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:42:15.590

你使用 ReSharper 6.1.1 吗？如果没有，那么您应该这样做，因为它包含许多性能修复。如果您使用 ReSharper 6.1.1 并且仍然遇到延迟，请尝试禁用其他 Visual Studio 扩展和插件。如果没有 ReSharper 6.1.1 以外的扩展和插件，并且打字速度仍然很慢，请制作性能快照并将其发送到 JetBrains，如此处[所述](http://confluence.jetbrains.net/display/ReSharper/ReSharper+Profiling+Instructions)。您也可以尝试禁用 ReSharper 的打字辅助功能（转到 ReSharper | 选项 -> 环境 | 编辑器并禁用所有自动和突出显示选项，在 ReSharper | 选项 -> 代码编辑 | HTML/ASP.NET/Razor | 编辑器中重复） .

# android - 错误

> ID：11177519
> 
> 赞同：0
> 
> 时间：2012-06-24T12:44:24.770
> 
> 标签：android, eclipse, sdk, permissions

当它说我的版本 10 SDK 需要升级到 17 以上时，我正在使用 Eclipse，所以我升级到 SDK 工具版本 19 的最新版本。现在，当我转到 AndroidManifest.xml 时，它会在下面的这两行中引发错误。

```
<uses-sdk android:targetSdkVersion="3" android:minSdkVersion="4"></uses-sdk>
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

完整的 AndroidManifest.xml 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.golf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Activity1"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <activity android:name=".Activity2"></activity>
    </application>
    <uses-sdk android:targetSdkVersion="3" android:minSdkVersion="4"></uses-sdk>
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

</manifest> 
```

你能帮我吗？我究竟做错了什么？它在 v10 上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T12:51:19.250

问题是你提到的

> 使用-sdk android:targetSdkVersion android:minSdkVersion

**两次**在 manifest.xml 中。一次在应用程序标记之前，一次在之后

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.golf"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Activity1"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <activity android:name=".Activity2"></activity>
    </application>
    <uses-sdk android:targetSdkVersion="3" android:minSdkVersion="4"></uses-sdk>  <-- Remove this
    <uses-permission android:name="android.permission.INTERNET"></uses-permission>

</manifest> 
```

# sql - 如何在 oracle 中将 number(7,2) 更改为 varchar？

> ID：11177520
> 
> 赞同：2
> 
> 时间：2012-06-24T12:44:33.270
> 
> 标签：sql, oracle

我正在使用 Oracle 10g。我想将 # 附加到“sal”列中的所有值。为了首先完成这一点，我试图将“sal”列的数据类型从数字更改为 varchar，但出现以下错误 ![在此处输入图像描述](../Images/a29ed0e6e272361910b7f86d8bfca77d.png)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T12:46:59.633

您应该使用`modify` 关键字而不是您的第二个`alter` .

```
alter table
   emp
modify
(
   sal    varchar2(10)
); 
```

修改表列数据类型时，需要使用`modify`关键字。

当然，您必须处理现有的列数据。修改表列数据类型时，您可能希望导出行，重新定义表，然后重新导入数据。

在这种情况下，您需要按照以下步骤更改列数据类型：

1.  在表的末尾创建新列。
2.  运行更新以填充新表列
3.  删除旧表列
4.  将新列重命名为原始列名

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T20:31:33.340

通过附加一条字符串来获取一个完美的数字并破坏其他用户似乎不是一个聪明的主意。直接或通过视图在选择上添加字符串？

就像是：

```
SQL> create view emp_horked 
     as 
     select ename, sal, sal || '#' hash, to_char(SAL,'9999.99') || '#' sal_padded  
       from emp;

View created.

SQL> select * from emp_horked where rownum < 5;

ENAME             SAL HASH                                      SAL_PADDE
---------- ---------- ----------------------------------------- ---------
SMITH             800 800#                                        800.00#
ALLEN            1600 1600#                                      1600.00#
WARD             1250 1250#                                      1250.00#
JONES            2975 2975#                                      2975.00# 
```

[有关格式模型](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm#SQLRF00210)的更多信息`to_char`

# ubuntu - 如何在 Ubuntu 12.04 中安装 Open Modelsphere？

> ID：11177523
> 
> 赞同：1
> 
> 时间：2012-06-24T12:44:48.870
> 
> 标签：ubuntu

如何在 Ubuntu 12.04 中安装 Open Modelsphere？我需要安装哪些软件包以及我需要哪些启动脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:44:49.353

使用[此提示](http://sarithdivakar.blogspot.co.uk/2011/09/how-to-install-open-model-sphere-in.html)作为起点，我将以下项目添加到类路径列表中：

```
/usr/share/java/jgrapht0.8.jar 
```

`libjgrapht-java`（我还必须安装`openjdk-7-jre`您可能已经拥有的软件包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-19T21:04:55.213

在程序的根文件夹中创建一个包含以下内容的文件，然后执行它。前任。$vim model.sh # 放内容 $./model.sh

```
path="./lib/jgrapht-all/jgrapht-all.jar\
 ./lib/ojdbc6.jar ./modelsphere.jar ./plugins/bin/repository_functions.jar \
 ./resources.zip ./lib/jakarta-regexp-1.5/jakarta-regexp-1.5.jar \
 ./lib/velocity-1.6.1/velocity-1.6.1.jar \
 ./lib/jazzy-core/jazzy-core.jar \
 ./lib/jython-2.2.1/jython.jar \
 ./lib/velocity-1.6.1/lib/commons-collections-3.2.1.jar \
 ./lib/velocity-1.6.1/lib/commons-lang-2.4.jar \
 ./lib/lablib-checkboxtree-3.0.2.jar"
libs=".:./resources:./targets"
for x in $path
do
  if [ ! -f $x ] 
  then
     echo "File not found [$x]"
     exit 1
  else
     libs="$libs:$x"
  fi
done
java -ms64m -mx512m -ss16m -classpath "$libs" org.modelsphere.sms.Application 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-06T13:14:16.810

这是适用于版本 3.2.2 的命令行：

> java -ms64m -mx512m -ss16m -cp .:./modelsphere.jar:./resources.zip:./resources:./targets:./lib/jakarta-regexp-1.5/jakarta-regexp-1.5.jar:. /lib/jython-2.2.1/jython.jar:./lib/jgrapht-all/jgrapht-all.jar:./lib/* org.modelsphere.sms.Application

# jquery - 移除触发元素的 ID 或文本

> ID：11177525
> 
> 赞同：0
> 
> 时间：2012-06-24T12:44:56.517
> 
> 标签：jquery

有什么方法可以删除触发元素的 ID 或文本。现在在按钮上触发添加/删除选定的文本，但是如果我们点击了多个，当我第二次点击选定的按钮时，点击按钮的文本会添加到列表中，从列表中删除所有文本，但我只需要删除选定的内容。任何解决方案？

***jQuery***

```
$(document).ready(function() {

    var txt = "";
    $("#_button").children().toggle(function() {

        txt = $(this).text();
        $(this).css("background", "blue");
        $("#place").append("<td>" + txt + "</td>");

    }, function() {

        $("#place").children(this).remove();
        $(this).css("background", "red");

    });
}); 
```

***HTML***

```
<ul id="_button">
     <li id="a" value="30">a</li>
     <li id="b" value="30">b</li>
     <li id="c" value="30">c</li>
</ul>
<table>
     <tr id="place">
     </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T12:54:05.420

您可以查找正在切换的元素的文本，并且仅`td`使用选择器删除与以下代码对应的文本`:contains()`。

改变这个

```
$("#place").children(this).remove(); 
```

至

```
$("#place").children(':contains('+$(this).text()+')').remove(); 
```

**演示：http:** [//jsfiddle.net/joycse06/gptG5/1/](http://jsfiddle.net/joycse06/gptG5/1/)

阅读更多[`:contains() Selector`](http://api.jquery.com/contains-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:54:30.880

您可以使用 jquery 包含选择器来选择具有与单击的列表项匹配的文本的表格单元格：

```
txt=$(this).text();
$("#place").children(":contains("+ txt +")").remove(); 
```

我已经为它创建了一个小提琴来展示它在[这里](http://jsfiddle.net/cQWDr/)工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T12:55:56.297

像这样的东西？

```
$(document).ready(function() {
var txt="";        
$("#_button li").toggle(function(){
         txt=$(this).text();
         $(this).css("background","blue"); 
         var id = $(this).attr('id');       
         $("#place").append("<td class="+id+">"+txt+"></td>");
},function() {
    var id = $(this).attr('id');        
    $("#place").find('td.' + id).remove();
    $(this).css("background","red");
});
}); 
```

[演示](http://jsfiddle.net/ZPtqm/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:06:15.803

下面的代码将做到这一点。这是要玩的 JSFiddle：http: [//jsfiddle.net/leniel/JqZc6/](http://jsfiddle.net/leniel/JqZc6/)

```
$(document).ready(function()
{
    var txt = "";        

    $("#_button").children().toggle(function()
    {
        txt = $(this).text();

        $(this).css("background","blue");  

        $("#place").append("<td>"+txt+"</td>");

    },function()
    {
        txt = $(this).text();

        $("#place").children("td:contains('"+txt+"')").remove();

        $(this).css("background","red");
    });
}); 
```

# web-services - “类中不存在 WebService 注释：java.net.URL”客户端从 apache-tomcat-7.0.25 中的 NetBeans 7.1.2 生成

> ID：11177526
> 
> 赞同：2
> 
> 时间：2012-06-24T12:44:56.547
> 
> 标签：web-services, netbeans, tomcat7

在netbeans-jdk 1.6中生成war文件，然后部署在tomcat中。当我尝试连接到 web 服务时失败，但出现以下异常。我在类路径中缺少一些类吗？感谢任何帮助

```
A WebService annotation is not present on class: java.net.URL
        at com.sun.xml.ws.modeler.RuntimeModeler.buildRuntimeModel(RuntimeModele
r.java:218)
        at com.sun.xml.ws.client.ServiceContextBuilder.processAnnotations(Servic
eContextBuilder.java:169)
        at com.sun.xml.ws.client.ServiceContextBuilder.build(ServiceContextBuild
er.java:82)
        at com.sun.xml.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java
:117)
        at com.sun.xml.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.ja
va:50)
        at javax.xml.ws.Service.<init>(Service.java:56)
        at com.oracle.xmlns.cecityapplication_jws.providervalidation_01.bpelprov
idervalidation.ProviderValidation.<init>(ProviderValidation.java:42)
        at com.main.servlet.BiotechnicsServlet.process(BiotechnicsServlet.java:2
05)
        at com.main.servlet.BiotechnicsServlet.processRequest(BiotechnicsServlet
.java:88)
        at com.main.servlet.BiotechnicsServlet.doPost(BiotechnicsServlet.java:16
2)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:224)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:169)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
ava:98)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
927)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp
11Processor.java:987)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
AbstractProtocol.java:579)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoin
t.java:309)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

# linux - 在linux中使用字典查找和替换单词

> ID：11177529
> 
> 赞同：1
> 
> 时间：2012-06-24T12:45:34.657
> 
> 标签：linux, bash, sed, awk

我需要使用字典替换文件中的单词 AAAA：

字典.txt

```
AXF1
ZCFA
ZCCC 
```

字典大约1500字。我需要用 AXF1 替换 AAAA，然后我需要找到下一个 AAAA 并用 ZCFA 替换......知道我该怎么做吗？我发现的一切都是如何替换的：

```
AAA1:AXF1
AAA2:ZCFA
etc... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:12:02.280

就像是：

```
# Read dictionary into memory
dictionary = [line.strip() for line in open('dictionary.txt')]

# Assuming a bit of a wrap around may be required depending on num. of AAAA's
from itertools import cycle
cyclic_dictionary = cycle(dictionary)

# Read main file
other_file = open('filename').read()

# Let's replace all the AAAA's
import re
re.sub('A{4}', lambda L: next(cyclic_dictionary), other_file, flags=re.MULTILINE) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:09:55.320

这可能对您有用（GNU sed）：

```
cat <<\! >dictionary.txt
> AXF1
> ZCFA
> ZCCC
> !
cat <<\! >file.txt
> a
> b
> AAAA
> c
> AAAA
> d
> AAAA
> !
sed -e '/AAAA/{R dictionary.txt' -e ';d}' file.txt
a
b
AXF1
c
ZCFA 
d 
ZCCC 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T13:32:48.160

```
awk 'FNR == NR {list[c++] = $1; next}
{
    while (sub("AAAA", list[n++])) {
        n %= c
    }
    print
}' list.txt inputfile.txt 
```

# mysql - 如果上一列为空，则仅更新一列（下一列）

> ID：11177532
> 
> 赞同：3
> 
> 时间：2012-06-24T12:45:46.153
> 
> 标签：mysql, if-statement

我已经创建了表格并插入了如下值。

```
create table mytable (id INT, col1 INT, col2 INT, col3 INT);

insert into mytable values
(1,1,1,NULL),
(2,1,NULL,NULL); 
```

我想要做的是如果 col1 不为 null 则更新 col2，如果 col2 不为 null 则更新 col3 等等......但只有一列要更新。

考虑我想更新 id=2 的数据，那么应该只更新 col2 而不是 col2，col3，因为两者都是空的。

当我尝试使用以下查询时，**所有**列都会更新。

```
update myTable set  
      col1 = ( IF (col1 is null, 9, col1) ),
      col2 = ( IF (col2 is null, 9, col2) ),
      col3 = ( IF (col3 is null, 9, col3) ); 
```

应该怎么做才能只更新一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:09:38.270

看来您的查询是[*更新 MySql 字段的扩展（如果字段不为空，请转到下一个）*](https://stackoverflow.com/questions/11176410/update-mysql-field-if-field-is-not-empty-go-to-next-one/11177086#11177086)

您需要以相反的顺序设置列值检查。

```
update table_name set  
--      more next ( 4 to n ) columns here if required       
    col3 = ( case when ( col2 is not null and col3 is null ) then 7 else col3 end )  
    , col2 = ( case when ( col1 is not null and col2 is null ) then 8 else col2 end )  
    , col1 = ( case when ( col1 is null ) then 9 else col1 end )  
; 
```

**示例表**：

```
mysql> create table col_values ( id INT, col1 INT, col2 INT, col3 INT );
Query OK, 0 rows affected (0.06 sec)

mysql> insert into col_values values ( 1, 1, 1, NULL ), ( 2, 1, NULL, NULL ), ( 3, NULL, NULL, NULL );
Query OK, 3 rows affected (0.01 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 | NULL |
|    2 |    1 | NULL | NULL |
|    3 | NULL | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec)

mysql> update col_values set
    ->     col3 = ( case when ( col2 is not NULL and col3 is NULL ) then 7 else col3 end )
    ->     , col2 = ( case when ( col1 is not NULL and col2 is NULL ) then 8 else col2 end )
    ->     , col1 = ( case when ( col1 is NULL ) then 9 else col1 end )
    -> ;
Query OK, 3 rows affected (0.02 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 |    7 |
|    2 |    1 |    8 | NULL |
|    3 |    9 | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec) 
```

您还可以使用`if`函数作为`case`语句的替代方法。

```
mysql> truncate table col_values;
Query OK, 3 rows affected (0.01 sec)

mysql> insert into col_values values ( 1, 1, 1, NULL ), ( 2, 1, NULL, NULL ), ( 3, NULL, NULL, NULL );
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 | NULL |
|    2 |    1 | NULL | NULL |
|    3 | NULL | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec)

mysql> update col_values set
    ->     col3 = if( ( col2 is not NULL and col3 is NULL ), 7, col3 )
    ->     , col2 = if( ( col1 is not NULL and col2 is NULL ), 8, col2 )
    ->     , col1 = if( col1 is NULL, 9, col1 )
    -> ;
Query OK, 3 rows affected (0.01 sec)
Rows matched: 3  Changed: 3  Warnings: 0

mysql> select * from col_values;
+------+------+------+------+
| id   | col1 | col2 | col3 |
+------+------+------+------+
|    1 |    1 |    1 |    7 |
|    2 |    1 |    8 | NULL |
|    3 |    9 | NULL | NULL |
+------+------+------+------+
3 rows in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:55:33.770

您可以通过两种不同的方式进行操作，即串行更新方式：

```
UPDATE mytable SET col3 = 9 WHERE col2 IS NOT NULL;
UPDATE mytable SET col2 = 9 WHERE col1 IS NOT NULL; 
```

按此顺序执行此操作可防止跨所有列级联更新。

# python - python中用于列表操作的plus和append有什么区别？

> ID：11177533
> 
> 赞同：16
> 
> 时间：2012-06-24T12:45:55.687
> 
> 标签：python, list, append

> **可能重复：**
> [列表上的 Python append() 与 + 运算符，为什么这些会给出不同的结果？](https://stackoverflow.com/questions/2022031/python-append-vs-operator-on-lists-why-do-these-give-different-results)

Python中列表操作的“+”和“append”之间的实际区别是什么？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-24T12:51:33.167

有两个主要区别。第一个是`+`在含义上`extend`比 to更接近`append`：

```
>>> a = [1, 2, 3]
>>> a + 4
Traceback (most recent call last):
  File "<pyshell#13>", line 1, in <module>
    a + 4
TypeError: can only concatenate list (not "int") to list
>>> a + [4]
[1, 2, 3, 4]
>>> a.append([4])
>>> a
[1, 2, 3, [4]]
>>> a.extend([4])
>>> a
[1, 2, 3, [4], 4] 
```

另一个更突出的区别是方法就地工作：`extend`实际上就像`+=`- 事实上，它具有完全相同的行为，`+=`只是它可以接受任何可迭代的，而`+=`只能接受另一个列表。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-24T12:48:14.640

使用`list.append`修改列表 - 它的结果是`None`. 使用 + 创建一个新列表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-24T12:49:43.143

```
>>> L1 = [1,2,3]
>>> L2 = [97,98,99]
>>>
>>> # Mutate L1 by appending more values:
>>> L1.append(4)
>>> L1
[1, 2, 3, 4]
>>>
>>> # Create a new list by adding L1 and L2 together
>>> L1 + L2
[1, 2, 3, 4, 97, 98, 99]
>>> # L1 and L2 are unchanged
>>> L1
[1, 2, 3, 4]
>>> L2
[97, 98, 99]
>>>
>>> # Mutate L2 by adding new values to it:
>>> L2 += [999]
>>> L2
[97, 98, 99, 999] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T12:48:05.593

该 `+`操作将数组元素添加到原始数组。该 `array.append`操作将数组（或任何对象）插入到原始数组的末尾。

```
[1, 2, 3] + [4, 5, 6] // [1, 2, 3, 4, 5, 6]

b = [1, 2, 3]
b.append([4, 5, 6]) // [1, 2, 3, [4, 5, 6]] 
```

看看这里：[Python append() vs. + operator on lists，为什么这些会给出不同的结果？](https://stackoverflow.com/questions/2022031/python-append-vs-operator-on-lists-why-do-these-give-different-results)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T12:48:35.190

`+`是一个二元运算符，它产生一个由两个操作数列表串联产生的新列表。`append`是将单个元素附加到现有列表的实例方法。

PS你的意思是`extend`？

# url-rewriting - nginx 重写 utf-8 endcoded url

> ID：11177544
> 
> 赞同：1
> 
> 时间：2012-06-24T12:47:10.547
> 
> 标签：url-rewriting, nginx, rewrite

我正在使用 Nginx，我想用以下两个参数重写所有 url：

```
title=%E7%89%B9%E6%AE%8A 
```

和

```
from=(any datatime) 
```

到主页。

我不知道如何写规则，有没有人可以帮助我？

编辑：

我想重写网址，如：

```
http://example.com/index.php?days=30&from=20120122083408&limit=250&title=%E7%89%B9%E6%AE%8A 
```

或者

```
http://example.com/index.php?from=20120622063000&limit=20&title=%E7%89%B9%E6%AE%8A 
```

或者

```
http://example.com/index.php?from=20030422063000&title=%E7%89%B9%E6%AE%8A 
```

至

```
http://example.com 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T11:32:28.193

Nginx 不支持逻辑与运算，但我们可以使用“小技巧”：这应该可以帮助您：

```
location = /index.php {
    set $redirect "";

    # if we have get parameter "title":
    if ( $arg_title ) {
        set $redirect "Y";
    }

    # if we have get paramter "from":
    if ( $arg_from ) {
        set $redirect "${redirect}ES";
    }

    # Now in the variable $redirect should be a word "YES":
    if ( $redirect = YES ) {
        rewrite ^ / last;
    }

    ....
} 
```

PS您也可以使用302重定向，直接将用户移动到**/**。

# linux - 用于 truecrypt 的带有密码隐藏的 Linux bash shell 脚本

> ID：11177546
> 
> 赞同：1
> 
> 时间：2012-06-24T12:47:23.693
> 
> 标签：linux, bash, shell, passwords, truecrypt

我尝试创建自己的 linux bash 脚本，该脚本调用 truecrypt 进行挂载。作为选项，需要为 truecrypt 文件设置密码。我可以在 bash 脚本中执行此操作，但如果有人打开它，他们可以看到密码。该脚本稍后将自动运行。

我的问题：是否有一些安全的方法来隐藏/加密密码？

例子：

```
truecrypt --mount --password="testing" /home/username/test.tc /home/username/mount/ 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:19:16.657

使用 SHC。它使用 RC4 加密 shell 脚本，并从可以运行的 shell 脚本中生成可执行的二进制文件。

下载 SHC(http://www.datsi.fi.upm.es/~frosal/) 并安装。

使用 "truecrypt --mount --password="testing" /home/username/test.tc /home/username/mount/" 创建一个 shell 脚本并将其保存为 "yourfilename.sh"。

现在，运行命令：

shc -f 你的文件名.sh

开关“-f”指定要加密的源脚本。上述命令将创建两个文件：yourfilename.sh.xc 和 yourfilename.sh.x。

程序“shc”从您的 shell 脚本中创建 C 源代码，然后对其进行加密（yourfilename.sh.xc）。加密的 shell 脚本是：yourfilename.sh.x。运行该二进制文件并执行您的命令：

./script.sh.x

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:58:12.810

没有人能够读取密码，就没有安全的方法来存储密码。您唯一的选择是使用用户权限来限制谁可以看到它。作为一种选择，您可以使脚本仅对其中包含密码的用户可读。另一种方法是让脚本从具有类似权限集的文件中读取密码（这只是为您提供了更新脚本等的更大灵活性）。

最终，尽管任何管理员/超级用户都可以读取该文件，所以这不是您可以安全地做的事情。大多数人建议的事情是让脚本自动运行并提供一个 GUI 供用户输入密码。这些根据您的分布而有所不同，但它们通常在那里。

# c# - 在 WCF 操作合同中传递原始变量。优点和缺点？

> ID：11177549
> 
> 赞同：2
> 
> 时间：2012-06-24T12:47:44.240
> 
> 标签：c#, .net, wcf, web-services

我创建了一个简单的 WCF 服务。我正在编写一种基于某些搜索条件搜索某个实体的方法。

```
[OperationContract]
List<SiteDTO> GetList(int? siteID, string code, string name, 
    string notes, byte? status, string description, 
    int? modifiedBy, DateTime? modifiedDate, long? 
    timeStamp, int? pageNo, int? pageSize, out int? 
    totalRows, int x); 
```

我在这里有两个问题：

1.  我应该将原始变量传递给服务方法还是应该将它们全部包装在一个类中（即 SiteSearchDTO）。为什么**？**请详细说明。

2.  我的第二个问题是当我在项目中添加对服务的引用时，我会在那里生成相应的方法。但在`Reference.cs`.

```
public System.Collections.Generic.List<RPMS.Web.SiteService.SiteDTO>
    GetList(out System.Nullable<int> totalRows, 
    System.Nullable<int> siteID, string code, string name, 
    string notes, System.Nullable<byte> status, string description, 
    System.Nullable<int> modifiedBy, 
    System.Nullable<System.DateTime> modifiedDate, 
    System.Nullable<long> timeStamp, 
    System.Nullable<int> pageNo, 
    System.Nullable<int> pageSize, int x) 
```

问题是生成的方法有**int？totalRows**作为第一个参数，但在原始服务方法中，totalRows 是倒数第二个变量。**为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:31:31.890

要回答您的第一个问题，[有许多不同的意见](https://stackoverflow.com/questions/174968/how-many-parameters-are-too-many)，但是，我认为[Robert Martin 的意见是最好的](https://stackoverflow.com/a/175035/50776)：

> 函数的理想参数数量为零（niladic）。接下来是一个（单子），紧随其后的是两个（二元）。应尽可能避免使用三个参数（三元）。超过三个（多元）需要非常特殊的理由——然后无论如何都不应该使用。

但是，要回答*为什么*，这很简单。您没有[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)所有这些参数。只看列表，很明显除了可能和`pageNo`之外的所有内容都是相关的，因此它们应该封装在一个类/结构中以反映它们彼此相关，即使只是作为一个分组。`pageSize``x`

假设这些都放在一个类型中，那么你就有了一个*单*参数的函数，封装性很好，这样整体管理起来更容易。

对于您的第二个问题，我怀疑您的代理及其生成的服务/方法不同步。[svcutil.exe 工具](http://msdn.microsoft.com/en-us/library/aa347733.aspx)（生成您的代理）尊重参数的顺序。如果您的情况并非如此（这意味着您验证了您的代理代码和服务器代码没有不同步），那么您发现了一个错误（但我会先重新生成代理进行仔细检查）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:26:45.777

对于第一个问题，这取决于您的架构和技术选择

```
- The problem when you pass entity, you create dependance on your entity library, and you contraign your client to reference it, your layer become depend of entity layer.

2\. For the second question proxy class is generated by basing on meta data of your wsdl, check your wsdl of your web service. 
```

# c# - 带有错误和输出重定向的 C# .bat 文件执行

> ID：11177554
> 
> 赞同：1
> 
> 时间：2012-06-24T12:48:12.627
> 
> 标签：c#, batch-file, exe

我有一个要执行的 .bat 文件。

在那个`.bat`文件里面，最后是那个代码

```
START _file_creator.bat %some_arg_name%
ENDLOCAL
EXIT 
```

我不想在执行期间显示窗口，而且我必须等到该`.bat`文件执行的操作完成然后终止执行（在操作结束时，我看到标准文本“按任意键继续” ）。我还需要检查该文件的输出和错误，所以我正在尝试使用该代码：

```
 System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo.FileName = @"C:\m_f\_config.bat";
        proc.StartInfo.RedirectStandardError = true;
        proc.StartInfo.RedirectStandardOutput = true;
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.CreateNoWindow = true;

        proc.Start();
        proc.WaitForExit();
        output1 = proc.StandardError.ReadToEnd();
        proc.WaitForExit();
        output2 = proc.StandardOutput.ReadToEnd();
        proc.WaitForExit(); 
```

但我得到的只是错误

```
Windows can not find file "_file_creator.bat".
Make sure you typed the name correctly and try again. 
```

当然，如果我使用它运行该`.bat`文件，`proc.StartInfo.UseShellExecute = true`它工作正常，但在这种情况下，我无法设置`RedirectStandardError = true`和`RedirectStandardOutput = true`

如何解决？

## 编辑

使用该代码现在可以使用

```
 proc.StartInfo.FileName = @"C:\m_f\_config.bat";
 proc.StartInfo.WorkingDirectory = @"C:\m_f\"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:50:46.187

尝试正确设置工作目录或确保它`_file_creator.bat`位于`PATH`. 请参阅有关工作目录的[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.useshellexecute.aspx)`UseShellExecute`以及：

> [WorkingDirectory](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)属性的行为因**UseShellExecute**属性的值而异。当**UseShellExecute**为**true**时，[WorkingDirectory](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)属性指定可执行文件的位置。如果[WorkingDirectory](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)是一个空字符串，则假定当前目录包含可执行文件。
> 
> 当**UseShellExecute**为**false**时，[WorkingDirectory](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.workingdirectory.aspx)属性不用于查找可执行文件。相反，它仅由已启动的进程使用，并且仅在新进程的上下文中才有意义。当**UseShellExecute**为**false**时，[FileName](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.filename.aspx)属性必须是可执行文件的完全限定路径。

# ruby-on-rails-3.1 - 为什么 2 个具有相同密码的用户的密码哈希值不同？

> ID：11177557
> 
> 赞同：10
> 
> 时间：2012-06-24T12:48:21.413
> 
> 标签：ruby-on-rails-3.1, bcrypt

我正在使用 rails，我注意到我的 password_digest 对于 2 个用户来说是不同的，除了密码摘要之外的所有其他字段都不同。但是我对两者都使用了相同的密码“abcd”..
它最终生成了这两个**不同的**哈希值

1.  `$2a$10$QyrjMQfjgGIb4ymtdKQXI.WObnWK0/CzR6yfb6tlGJy0CsVWY0GzO`
2.  `$2a$10$dQSPyeQmZCzVUOXQ3rGtZONX6pwvnKSBRmsLnq1t1CsvdOTAMQlem`

我认为 bcrypt gem 仅根据密码字段生成哈希！我错了吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-24T13:27:54.560

您在这里看到的不仅仅是密码哈希，还有很多关于这些字符串中包含的哈希的元数据。就 bcrypt 而言，整个字符串将被视为 bcrypt 哈希。以下是它包括的内容：

$ 是 bcrypt 中的分隔符。

$ **2a** $ 是使用的 bcrypt 算法。

**10**美元是使用的成本因素。这就是为什么 bcrypt 在存储哈希方面非常受欢迎。每个散列都有与之相关的复杂性/成本，您可以将其视为计算机生成此散列所需的速度。这个数字当然是与计算机的速度相关的，所以随着这些年来计算机越来越快，生成成本为 10 的散列所花费的时间将越来越少。所以明年你将成本增加到 11，然后到 12... 13... 等等。这允许您未来的哈希值保持强大，同时保持旧哈希值仍然有效。请注意，如果不重新散列原始字符串，就无法更改散列的成本。

$QyrjMQf... 是盐和哈希的组合。这是一个 base64 编码的字符串。

前 22 个字符是盐。

剩余的字符是与 2a 算法一起使用时的哈希值、10 的成本和给定的盐。使用盐的原因是攻击者无法预先计算 bcrypt 哈希值以避免支付生成它们的成本。

实际上，这是您最初问题的答案：哈希值不同的原因是因为如果它们相同，您就会知道，无论何时您看到 bcrypt 字符串`$2a$10$QyrjMQfjgGIb4ymtdKQXI.WObnWK0/CzR6yfb6tlGJy0CsVWY0GzO`，您都会知道密码是`abcd`. 因此，您可以只扫描一个哈希数据库，并通过查找该哈希快速找到所有使用 abcd 密码的用户。

你不能用 bcrypt 做到这一点，因为`$2a$10$dQSPyeQmZCzVUOXQ3rGtZONX6pwvnKSBRmsLnq1t1CsvdOTAMQlem`is also `abcd`. 还有很多很多很多的哈希将是`bcrypt('abcd')`. 这使得扫描数据库以查找 abcd 密码几乎是不可能的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T13:28:09.567

`bcrypt`将盐存储在密码哈希中。

这些是具有两种不同盐的相同密码的两个不同哈希值。

验证密码时，bcrypt 将从哈希字段中读取盐值，然后使用该盐值重新计算哈希值。

# objective-c - 从数组中获取前 10 个最高的数字？

> ID：11177564
> 
> 赞同：1
> 
> 时间：2012-06-24T12:49:59.367
> 
> 标签：objective-c, nsmutablearray, nsmutabledictionary

我有点问题。我有一个 NSMutableDictionary，里面有 10 个 NSMutableArrays。每个数组都有 0-10 个数字，每个数字都可以是任何整数，例如 12 或 103。

我需要做的是从每个数组中获取前 10 个最高数字。问题是，我需要在字典（键）中保留它来自的数组的引用以及它形成的数组中数字的索引位置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:00:37.863

最简单的方法，就是对数组进行降序排序，然后抓取前10个索引

或者，如果它们在字典中，则迭代字典`allValues`，获取所有数组，将所有元素添加到一个公共数组中，然后对其进行排序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:15:07.703

**您必须使用“C”**逻辑按降序缩短数组。这里我将根据你的情况举一个例子......

```
// adding 20 elements in an array, suppose this is your original array (array1).
NSMutableArray *array1 = [[NSMutableArray alloc]init];

for(int i=0;i<20;i++)
{
    NSString *str = [NSString stringWithFormat:@"%d",(i*4)];
    [array1 addObject:str];
}

//make a copy of your original array 
NSMutableArray *array2 = [[NSMutableArray alloc]initWithArray:array1];

// this is the array which will get your sorting list
NSMutableArray *array3 = [[NSMutableArray alloc]init];

//declare an integer for compare as a maximum number and it to 0 initially
int max = 0;

// this is the logic to sort an array
for(int i=0;i<20;i++)
{
    for(int j=0;j<[array2 count];j++)
    {
        int f = [[array2 objectAtIndex:j] intValue];
        if(max<f)
        {
            max = f;
        }
    }

    NSString *str = [[NSNumber numberWithInt:max]stringValue];

    //max has a maximum value then add it to array3 and remove from array2 
    //for a new shorting

    [array3 addObject:str];
    [array2 removeObject:str];

    // set 0 to max again
    max = 0;
}

    //now after all procedure print the **array3**
    // and you will get all the objects in descending order,
    //you can take top **10** variables from **array3**

    NSLog(@"your sorting array %@", **array3**);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:15:37.090

听起来像是某种家庭作业:)

所以你有这个：

```
NSMutableDictionary* source = [@{
    @"1" : @[ @10, @20, @100 … ],
    @"2" : @[ @8, @42, @17 … ]
} mutableCopy]; 
```

因此，让我们从创建另一种安排开始：

```
NSMutableArray* numbers = [NSMutableArray new];
for (NSArray* array in source.allValues)
{
    for (NSNumber* number in array)
    {
        [numbers addObject: @{ @"number" : number, @"parent" : array }];
    }
} 
```

这是我们得到的：

```
@[
    @{ @"number" : @10, @"parent" : <array> },
    @{ @"number" : @20, @"parent" : <array> },
    …
] 
```

现在我们可以排序并找到您想要的数字。

```
[numbers sortUsingComparator: ^( id lhs, id rhs ){
    return [((NSDictionary*) rhs)[@"number"] compare: ((NSDictionary*) lhs)[@"number"]];
}];
NSArray* topNumbers = [numbers subarrayWithRange: NSMakeRange( 0, 10 )]; 
```

我们到了。topNumbers 包含源数组中所需的数字。

这是一种非常幼稚的方法。它可以在 CPU 时间和内存使用方面进行相当多的优化。但是，嘿，保持简单并不是一件坏事。

未解决：如果第十和第十一个数字相等怎么办？（地址在这里：[从数组中挑选出特定的数字？](https://stackoverflow.com/questions/11177585/pick-out-specific-number-from-array)）范围检查。没有测试，甚至没有编译。;)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T14:04:54.340

遍历数组，为每个元素创建一个对象/结构，由数字“键”值和元素的“路径”（数组索引）组成。对如此创建的对象/结构进行排序。（这被称为“标签排序”。）

另一种方法，如果您只需要前 N 个值（其中 N << 条目总数）是创建一个由 N 个元素组成的数组，由上述键和路径信息组成。扫描所有数组并将每个数组元素与当前存储的 N 个中的最小键进行比较。如果发现一个元素大于存储的最小元素，则替换存储的最小元素并对 N 个元素进行排序以选择新的最小存储元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T12:59:46.920

您最终想要的数据结构似乎是一个对象数组，其中每个对象在功能上类似于“索引路径”，只是它由字符串（键）和值（偏移量）组成。

假设对最高数字的实际搜索没有问题，那么我建议在找到候选数字时创建这些对象之一，以便在找到前十名后，这些对象可以用作指向数字的来源位置。

# javascript - Knockoutjs 复选框更改事件

> ID：11177565
> 
> 赞同：6
> 
> 时间：2012-06-24T12:50:06.420
> 
> 标签：javascript, mvvm, knockout.js, knockout-2.0

我有一些复选框绑定到我的模型中的数组。这很好用，当您选中一个框时，数组会相应更新。

但是，当值发生变化时，我希望在我的模型上调用一个方法来过滤给定新值的结果。我尝试连接更改事件，但这似乎具有更改之前的值而不是更改之后的值。

我已经在 jsfiddle [http://jsfiddle.net/LpKSe/](http://jsfiddle.net/LpKSe/)中说明了我的问题，这可能更有意义。

为了完整起见，我的代码在这里重复。

JS

```
function SizeModel() {
    var self = this;
    self.sizes = ko.observableArray(["small", "medium", "large"]);
    self.sizes2 = ko.observableArray(["small", "medium", "large"]);
    self.getResults = function(e) {
        alert(self.sizes());
    };
    self.getResults2 = function(e) {
        alert(self.sizes2());
    };
}

$(document).ready(function() {
    sizeModel = new SizeModel();

    ko.applyBindings(sizeModel);
});​ 
```

html

```
<h3>Size
  <input type="checkbox" value="small"  data-bind=" checked: sizes, event:{change: getResults}"/>
  <span class='headertext'>Small</span>
  <input type="checkbox"  value="medium" data-bind=" checked: sizes, event:{change: getResults}"   />
  <span class='headertext'>Medium</span>
  <input type="checkbox"  value="large" data-bind=" checked: sizes, event:{change: getResults}"  />
  <span class='headertext'>Large</span>
</h3>
<h3>Size
 <input type="checkbox" value="small"  data-bind=" checked: sizes2, event:{click: getResults2}"/>
 <span class='headertext'>Small</span>
 <input type="checkbox"  value="medium" data-bind=" checked: sizes2, event:{click: getResults2}"   />
 <span class='headertext'>Medium</span>
 <input type="checkbox"  value="large" data-bind=" checked: sizes2, event:{click: getResults2}"  />
 <span class='headertext'>Large</span>
</h3> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T12:58:29.413

您不需要更改事件。如果您订阅 observableArray，您将在它更改时收到通知，并通过更新的数组：http: [//jsfiddle.net/jearles/LpKSe/53/](http://jsfiddle.net/jearles/LpKSe/53/)

```
function SizeModel() {
    var self = this;
    self.sizes = ko.observableArray(["3", "2", "1"]);
    self.sizes.subscribe(function(updated) {
        alert(updated);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:54:36.110

在您的小提琴中，您的`data-bind`-s 中缺少逗号，这是一个固定示例：http: [//jsfiddle.net/4aau4/1/](http://jsfiddle.net/4aau4/1/)

重新解决问题 - 它可能是与 KnockoutJS 相关的问题（即它在`change`事件触发后更新 observableArray），或者类似于我前段时间坚持的问题：[在点击处理程序被调用之前检查复选框](https://stackoverflow.com/questions/8113076/checkboxes-are-being-checked-before-click-handler-is-even-called)

**编辑：**

多么艰难的星期天，我想我还没醒：）

看一下这个片段： http: [//jsfiddle.net/4aau4/2/](http://jsfiddle.net/4aau4/2/) - 看起来 DOM 已正确更新，但它`ko.observableArray`落后了。（`$('input:checked').length`表示实际检查了多少个复选框）。

# sql-server - 没有选择安装 SSIS、SSRS 和 SSAS

> ID：11177567
> 
> 赞同：0
> 
> 时间：2012-06-24T12:50:28.087
> 
> 标签：sql-server, business-intelligence, sql-server-2012

目标：
在我的计算机中安装 Developer SQL Server 2012+ 商业智能及其 SSIS、SSRS 和 SSAS。

问题：
在我的计算机中安装 SSIS、SSRS 和 SSAS 的安装选择中找不到设置或类似内容。

在进行安装之前，会显示一个选择功能的屏幕。看图片。

![在此处输入图像描述](../Images/89e9165cdff82883bccfd8e67f4fe15f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:19:31.617

您正在寻找的是 Sql Server 数据工具。请记住，数据工具有 2 个版本 - 有人称它们为数据工具 - 数据库和数据工具 - BI，因为没有更好的术语。

Data Tools - BI 是 Visual Studio 2010 的精简版，具有 ssrs ssis 和 ssas 所需的所有项目类型。

您可以在[此处](http://msdn.microsoft.com/en-us/data/hh297027)获得的数据工具 - db 通过数据工具 - （sql server 2008 中的 BIDS）提供与 sql server 的连接。

正如 Aaron 所说，由于已经安装了集成服务 (SSIS)、分析服务 (SSAS) 和报告服务 (SSRS)，因此该选择被禁用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T13:32:24.710

它在 VS 2012 的开发人员版中。您现在只需查找它，因为他们将其分离到不同的位置。在开始菜单中查找 SQL Server Data Tools 2012 并启动它；但是，如果它没有出现，则导航到您的 VS 2010 并启动它并在其中加载您的集成服务项目。这是我必须做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T01:04:48.133

您想要 2012，因为其他人在此处提供的信息是供您和其他人获取 2014 Data Tools 和 2008 BIDS ：

1.  适用于 SQL Server 2014 的 SQL Server 数据工具 (SSDT) [http://msdn.microsoft.com/en-US/jj650015](http://msdn.microsoft.com/en-US/jj650015)

2.  OLD 2008 对于你们中的一些人仍然想要它/使用 sql server 2008....

要使用 SQL Server 2008 Developer Edition 获得 BIDS，您只需搜索

```
"SQL Server Business Intelligence Development Studio" 
```

![在此处输入图像描述](../Images/c015e8216e86647ba0a5d7578de0aa34.png)

这将打开 Visual Studio 2008 Shell，然后单击 Create - Project

![在此处输入图像描述](../Images/679063b29019c2114c801f90d65a5a7c.png)

现在你有了所有的选择。它就在 Microsoft SQL Server (SSMS) 旁边

# java - 苏许可多次询问

> ID：11177570
> 
> 赞同：1
> 
> 时间：2012-06-24T12:51:02.410
> 
> 标签：java, android, eclipse, su

我想先介绍一下我的情况，我正在制作一个内核调整器，它使用 传递各种 shell 命令`Runtime.getRuntime().exec(...)`，它工作得很好，但问题是每次我运行带有 su 的 shell 命令时都会询问 su 权限。

我希望应用程序只请求一次许可，然后执行所有命令而不再次请求 su。目前我的应用程序有大约 30 行带有 su 命令的行，所以我的应用程序用户必须允许 su 访问 30 次才能使一切正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T15:03:54.513

一种可行的方法是使用 su 运行 shell 并将各种命令通过管道传输到希望生成的 root shell 进程的标准输入中。这意味着 su 只使用一次。

执行此操作的代码已在此处多次介绍，因为人们希望使用无法在 su 命令行上传递的参数运行命令，因此必须通过管道将其传递到生成的进程中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-14T13:58:20.883

我通过在异步任务中为我的根调用使用相同的接口解决了这个问题，最初我在片段中需要时单独使用方法，这导致一次又一次地询问权限。Bu 然后将其更改为一种标准的 exec 方法，并使用它每次都进行系统调用。它修复了错误。

# java - Java 构建系统选项

> ID：11177576
> 
> 赞同：3
> 
> 时间：2012-06-24T12:51:44.797
> 
> 标签：java, git, build

我目前正在以一种非常笨拙的方式构建桌面 Java 应用程序。该应用程序部署在 Windows、Mac 和 Linux 上。这是我现在的构建过程：

在 Windows 上：

*   更新本地存储库
*   启动 Eclipse
*   刷新项目
*   双击.jardesc文件生成可执行jar文件
*   将可执行 jar 提交到源代码管理
*   打开 .nsi 脚本并单击构建按钮（我安装了 NSSI 插件）以生成 .exe 安装程序
*   将安装程序上传到 ftp 服务器以发布

在 Mac 上：

*   更新本地存储库
*   在源代码管理中使用 .jar 运行 shell 脚本以生成 .dmg 文件
*   上传到ftp服务器发布

在 Linux 上：

*   更新本地存储库
*   在源代码管理中使用 .jar 运行 shell 脚本以生成 .deb 文件
*   上传到ftp服务器发布

我还想在将来的构建中包含一些额外的步骤，例如：

*   设置构建日期
*   设置 HEAD git commit-id
*   执行一些代码混淆

关于如何简化和加快此过程的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:42:37.190

如果您对拥有一个良好的构建系统是认真的，那么我建议您学习和使用[Maven](http://maven.apache.org/)，它提供：

*   基于声明性项目定义 (pom.xml) 的综合项目构建生命周期管理
*   大量的插件，我希望它们能够处理您需要的所有特定构建步骤
*   与 Eclipse 很好的集成
*   完全依赖管理（包括自动解析和下载依赖）

这不适合胆小的人（Maven 是一个复杂的野兽），但从长远来看，它是一个很好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T15:37:16.553

第一步是在没有 Eclipse 的情况下构建所有内容。

您可能还想考虑使用像[Jenkins](http://jenkins-ci.org/)这样的东西来自动化其中的一些。您仍然需要构建脚本。

解决方案可能看起来像

1.  更新存储库。
2.  Jenkins 检测到更新并构建 jar。
3.  詹金斯将罐子保存到某个位置。

然后，您可以为每个操作系统分别构建，也可以在 Jenkins 中运行。这些可以在第一次构建成功完成时自动触发。这些将分别：

1.  从以前的构建中拿起罐子。
2.  将操作系统特定的二进制文件发布到 FTP 站点。

[Ant](http://ant.apache.org/)是一个好的开始，但您可能还想查看[Apache Ivy](http://ant.apache.org/ivy/)或[Maven](http://maven.apache.org/)，因为它们将有助于管理您的构建输出和依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T12:55:20.377

你应该看看 Ant：[https ://ant.apache.org/](https://ant.apache.org/)

> Apache Ant 是一个 Java 库和命令行工具，其任务是驱动构建文件中描述的进程作为相互依赖的目标和扩展点。Ant 的主要已知用途是构建 Java 应用程序。

此外，还有一长串构建系统：[https ://en.wikipedia.org/wiki/List_of_build_automation_software](https://en.wikipedia.org/wiki/List_of_build_automation_software)

# java - 将jsp表单中的整数插入数据库表中？

> ID：11177579
> 
> 赞同：0
> 
> 时间：2012-06-24T12:52:03.583
> 
> 标签：java, jsp, jdbc, insert-statement

请参阅下面的代码...

```
//connect
//reading params from the form
String name = request.getParameter("name");
String year_prime = request.getParameter("year");
int year = Integer.parseInt(year_prime);

//inserting the params into table Students
stmt.executeUpdate("insert into students(name,year) values('"+name+"', year)");

//close connection 
```

我正在尝试获取`year`值，即 an `int`，并将其插入数据库表中。但是我收到一个错误，并且 INSERT 方法似乎只适用于`Strings`. 有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T03:04:24.083

您应该必须使用`PreapredStatement`. 从您的帖子中，我可以看到您的`VALUES()`set 值不正确。

```
stmt.executeUpdate("insert into students(name,year) values ('" + name + "'," + year ")"); 
```

使用 PreparedStatement 执行数据库操作将既简单又安全：

```
String sql="insert into students(name,year) values (?,?)";
PreparedStatement statement=cn.prepareStatement(sql);
statement.setString(1,name);
statement.setInt(2,year);
statement.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:36:39.240

使用 a`PreparedStatement`而不是常规的`Statement`. 另外，使用`executeQuery()`代替`executeUpdate()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T14:01:05.640

以下链接可能会帮助您了解基础知识以及工作示例：

1.  [http://www.tutorialspoint.com/jdbc/jdbc-statements.htm](http://www.tutorialspoint.com/jdbc/jdbc-statements.htm)
2.  [http://www.tutorialspoint.com/jdbc/statement-object-example.htm](http://www.tutorialspoint.com/jdbc/statement-object-example.htm)

虽然我不会推荐，而且在 JSP 中包含 JDBC 连接代码也不是一般做法，但为什么呢？这是适合您的[Servlet 和 Jsp 最佳实践](http://www.oracle.com/technetwork/articles/javase/servlets-jsp-140445.html)。

希望这可以帮助。

# c++ - 如何以通用方式从 std::istream 读取枚举

> ID：11177580
> 
> 赞同：3
> 
> 时间：2012-06-24T12:52:11.783
> 
> 标签：c++, templates, enums, iostream

> **可能重复：**
> [从流输入到枚举类型](https://stackoverflow.com/questions/5633784/input-from-stream-to-enum-type)

我有几个具有不同枚举的类作为类成员，我想从流中读取这些类。

以下代码显示了一个示例类：

```
 enum enSide{
    eLeft,
    eRight
  };

  enum enType{
    eConUndefined,
    eConRoom    
  };

  class MyClass{
    public:
      friend std::istream& operator>>(std::istream& in, MyClass& val) {
        in >> val.mSide >> val.mType >> val.mTargetId;        
        return in;      
      }

      MyClass(){}

    private:
      enSide mSide;
      enType mType;
      int mTargetId; 
  }; 
```

**不幸的是，这不起作用，因为无法直接读取`enum`值（>> 没有模板）。**

因此我创建了一个辅助类：

```
template<class ENUM>
class ScanTo{
  public:
    friend std::istream& operator>>(std::istream& in, ScanTo<ENUM>& eval) {
      unsigned int val;
      in >> val;
      eval.mrEnum = static_cast<ENUM>(val);
      return in;      
    }

    ScanTo(ENUM& eRef):mrEnum(eRef){}

  private:
    ENUM& mrEnum;    
}; 
```

现在我可以编写`MyClass`如下代码进行阅读：

```
friend std::istream& operator>>(std::istream& in, MyClass& val) {
  ScanTo<enSide> scanside(val.mSide);
  ScanTo<enType> scantype(val.mType);
  in >> scanside >> scantype >> val.mTargetId;        
  return in;      
} 
```

这已经离我想要的不远了，但仍然需要对辅助类进行两个间接处理，不能将其写为临时对象：

```
friend std::istream& operator>>(std::istream& in, MyClass& val) {
 in >>  ScanTo<enSide>(val.mSide)>> ScanTo<enType>(val.mType) >> val.mTargetId;        
 return in;      
} 
```

**不编译 (gcc 4.43)**，因为正如评论中指出的那样，禁止对临时对象进行非 const 引用。

> 那么问题来了：
> 
> **如果不使用上面所做的一些临时工具和模板，这是否可以更轻松地完成？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:06:13.047

我想你可以写一个辅助函数模板：

```
template <class T>
std::istream& operator >>(std::istream& is, T& t)
{
    int i;
    is >> i;
    t = (T)i;
    return is;
} 
```

这使得

```
in >> val.mSide >> val.mType >> val.mTargetId; 
```

可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:08:52.643

您最好的选择是将您的数据成员定义为`int`，并使用类型安全访问器来设置和检索它们。

```
class MyClass{
  public:
    friend std::istream& operator>>(std::istream& in, MyClass& val) {
      in >> val.mSide >> val.mType >> val.mTargetId;        
      return in;      
    }

    MyClass(){}

    enSide side () const { return static_cast<enSide>(mSide); }
    void side (enSide v) { mSide = v; }

    enType type () const { return static_cast<enType>(mType); }
    void type (enType v) { mType = v; }

    int targetId () const { return mTargetId; }
    void targetId (int v) { mTargetId = v; }

  private:
    int mSide;
    int mType;
    int mTargetId; 
}; 
```

这可以避免您想要的临时工。

# java - 为什么原语可以跳过 Java 中的“新对象”实例化？

> ID：11177583
> 
> 赞同：3
> 
> 时间：2012-06-24T12:52:31.463
> 
> 标签：java, object, primitive

例如，如果您有一个整数：

```
int i = 9; 
```

它怎么能做到这一点？我的意思是完整的语法是：

```
int i = new Integer(9); 
```

它如何跳过整个新的 Integer() 部分并且仍然有效？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T12:53:51.307

它不会跳过它，因为原语不是对象。

您的第二行代码涉及[*auto-unboxing*](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)，这是后来添加到 Java 语言中的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-24T12:53:54.980

`new Integer()`不是原始的；这是一个*盒装*的原语。
实际的原语（`int`等）不是对象，不能被实例化。

请注意，您也可以编写 `Integer x = 9`，Java 编译器将隐式插入`new Integer()`。
这称为自动装箱。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T12:54:41.207

也许你想看看[AutoBoxing](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

```
Primitive : Reference Mapping
byte : Byte
short : Short
int : Integer
long : Long
float : Float
double : Double
bool : Boolean
char : Character 
```

> 自动装箱/拆箱是基本类型与其等效对象类型之间的自动转换。例如，int 基元和 Integer 对象之间或布尔基元和布尔对象之间的转换。这是在 Java 5 中引入的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T12:55:33.123

基元和对象是两个不同的东西。如果没有原语，您将无法创建像这样的 Integer 对象（Integer在构造函数中`new Integer(9)`使用原语）。`9`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-24T13:55:04.477

如果它问为什么你的问题会更有意义

```
Integer i = 9; 
```

没有工作`new`，然后答案将是“由于 Java 5 中引入的原语的自动装箱”。所以也许这就是你真正想问的:)

# iphone - 从数组中挑选出特定的数字？

> ID：11177585
> 
> 赞同：1
> 
> 时间：2012-06-24T12:52:36.293
> 
> 标签：iphone, objective-c, ipad, nsarray

我有一堆充满数字的 NSArray。无论如何，我可以以某种方式获取一个特定的数字，特别是：

数组中第三大的数字，还是数组中的第 24 大数字？

但我不想只抓取数字，我还需要引用它在数组中的索引，如果可以在过程中保留的话。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:58:40.553

> 数组中第三大的数字，还是数组中的第 24 大数字？

创建数组的临时副本并按升序对其进行排序。
获取 index`3-1`或处的数字`24-1`。

> 我还需要引用它在数组中的索引

现在使用`indexOfObject:`or`indexOfObjectIdenticalTo:`来获取实际的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:49:48.540

`numbers`从我的答案中的排序数组开始从数组中[获取前 10 个最高数字？](https://stackoverflow.com/questions/11177564/getting-top-10-highest-numbers-from-array)：

```
NSUInteger wanted = 24 or anything;

NSUInteger count = 0;
NSNumber* previous = nil;
for (NSDictionary* entry in numbers)
{
    if ( wanted == 1 ) return entry;

    if (previous == nil)
    {
        // first entry
        previous = entry[@"number"];
        ++ count;

        continue;
    }

    // same number? skip it.
    if ( entry[@"number"] isEqualTo: previous ) continue;

    // if we get here, we found a different number we may be interested in

    ++ count;

    if ( count == wanted ) return entry;
}

// nothing found
return nil; 
```

结果是`numbers`上一个问题的数组中的一行。形式的数组`@[ @"number" : @<number>, @"parent" : <source array> ]`。

# c# - 如何在邮件内容中显示图像？

> ID：11177587
> 
> 赞同：1
> 
> 时间：2012-06-24T12:53:11.050
> 
> 标签：c#, email, webmail

我想发送包含一些图片内容的电子邮件。我想我必须将此图像作为附件附加到电子邮件中，但我的问题是**如何在邮件内容中使用附加图像？**

**发送邮件的代码**

```
WebMail.SmtpServer = "my.smtp.server";
WebMail.Send(
        clientEmail,
        subject,
        "<html><head></head><body><img src='???' /></body></html>",
        myEmail,
        null,
        new List<string> () { "path" },
        true
    ); 
```

我必须写成`src`什么？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T13:11:15.503

[在http://blog.devexperience.net/en/12/Send_an_Email_in_CSharp_with_Inline_attachments.aspx](http://blog.devexperience.net/en/12/Send_an_Email_in_CSharp_with_Inline_attachments.aspx)也是很好的示例

System.Net.Mail.Message 类：

样本 ;

```
var msg = new System.Net.Mail.Message();
msg.isHTML=true;
msg.Body ="<img src=\"cid:IMG1CONTENT\">";

Attachment mya = new Attachment("file-path-here");
mya.ContentId="IMG1CONTENT";
msg.Attachments.Add(mya); 
```

您可以找到更多详细信息@http: [//msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.attachment.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:03:50.103

要在电子邮件内容中显示图像，一种解决方案是使用绝对 URL。将图像上传到您的服务器并使用 abosoluter url 作为 src 属性值

```
<img src='http://www.yourdomain.com/youfolder/image.jpg' alt='your image desc'/> 
```

但是一些电子邮件客户端会禁用外部图像。因此，用户可能需要在提示时启用“显示图像”。

# ios - 将 2 个音轨（同时运行）导出到一个文件 m4a)

> ID：11177590
> 
> 赞同：0
> 
> 时间：2012-06-24T12:53:29.147
> 
> 标签：ios, xcode, audio, export, avfoundation

我正在 xcode 上开发一个 ios 音频应用程序，我正在尝试使用我录制的 2 个音频文件 - 它们同时播放并将其导出到一个音频文件。我所能做的就是将 2 个音频文件合并为一个，但是 2 个音频一个接一个地播放，并且不同步。有谁知道我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:18:27.057

试试 Apple 的[MixerHost](http://developer.apple.com/library/ios/#samplecode/MixerHost/Introduction/Intro.html)示例应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:21:09.987

你应该看看这个 AAC 转换 (http://atastypixel.com/blog/easy-aac-compressed-audio-conversion-on-ios/)。它超级有用。

您可能需要考虑的另一件事......组合两个音频信号就像将样本添加在一起一样简单。所以你可以做的是：

打开两个录音并为每个包含音频样本的录音获取一个数组。

创建一个 for() 循环，添加每个样本并将其放入输出数组

```
for(int i = 0; i<numberOfSamples; i++) {
   exportBuffer[i] = firstTrack[i] + secondTrack[i];
} 
```

然后将 exportBuffer 写入 m4a 文件。

此代码仅在两个文件的确切长度相同时才有效，因此请根据您的需要进行调整。如果您已到达其中一个数组的末尾，您将需要添加一个触发条件。在这种情况下，只需添加 0。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-02T14:20:55.717

/* 如果您已经保存了录制的音频文件，请执行此方法 */

```
-(void)mixAudio{
AVMutableComposition *composition = [[AVMutableComposition alloc] init];

AVMutableCompositionTrack *compositionAudioTrack = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionAudioTrack setPreferredVolume:0.8];
NSString *soundOne  =[[NSBundle mainBundle]pathForResource:@"RecordAudio1" ofType:@"wav"];
NSURL *url = [NSURL fileURLWithPath:soundOne];
AVAsset *avAsset = [AVURLAsset URLAssetWithURL:url options:nil];
NSArray *tracks = [avAsset tracksWithMediaType:AVMediaTypeAudio];
AVAssetTrack *clipAudioTrack = [tracks objectAtIndex:0];
[compositionAudioTrack insertTimeRange:CMTimeRangeMake(kCMTimeZero, avAsset.duration) ofTrack:clipAudioTrack atTime:kCMTimeZero error:nil];

AVMutableCompositionTrack *compositionAudioTrack1 = [composition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[compositionAudioTrack setPreferredVolume:0.8];
NSString *soundOne1  =[[NSBundle mainBundle]pathForResource:@"RecordAudio2" ofType:@"wav"];
NSURL *url1 = [NSURL fileURLWithPath:soundOne1];
AVAsset *avAsset1 = [AVURLAsset URLAssetWithURL:url1 options:nil];
NSArray *tracks1 = [avAsset1 tracksWithMediaType:AVMediaTypeAudio];
AVAssetTrack *clipAudioTrack1 = [tracks1 objectAtIndex:0];
[compositionAudioTrack1 insertTimeRange:CMTimeRangeMake(kCMTimeZero, avAsset1.duration) ofTrack:clipAudioTrack1 atTime: kCMTimeZero error:nil];

  AVAssetExportSession *exportSession = [AVAssetExportSession
                                           exportSessionWithAsset:composition
                                           presetName:AVAssetExportPresetAppleM4A];
    if (nil == exportSession) return NO;

NSString *soundOneNew = [documentsDirectory stringByAppendingPathComponent:@"combined10.m4a"];
//NSLog(@"Output file path - %@",soundOneNew);

// configure export session  output with all our parameters
exportSession.outputURL = [NSURL fileURLWithPath:soundOneNew]; // output path
exportSession.outputFileType = AVFileTypeAppleM4A; // output file type

// perform the export
[exportSession exportAsynchronouslyWithCompletionHandler:^{

    if (AVAssetExportSessionStatusCompleted == exportSession.status) {
        NSLog(@"AVAssetExportSessionStatusCompleted");
    } else if (AVAssetExportSessionStatusFailed == exportSession.status) {
        // a failure may happen because of an event out of your control
        // for example, an interruption like a phone call comming in
        // make sure and handle this case appropriately
        NSLog(@"AVAssetExportSessionStatusFailed");
    } else {
        NSLog(@"Export Session Status: %d", exportSession.status);
    }
}];
} 
```

# jquery - jquery ui - 悬停在父元素上应该触发在子元素上向下滑动

> ID：11177595
> 
> 赞同：0
> 
> 时间：2012-06-24T12:53:46.433
> 
> 标签：jquery, html, css, jquery-ui, jquery-hover

问题：悬停在外部 div 上方会触发预期的滑动方法，但如果鼠标在外部 div 内移动，则不是一次而是多次。我不认为这是一个冒泡问题，因为该事件绑定到父元素而不是子元素。我还通过使用 stopPropagating() 来防止事件“冒泡”；

这是html标记：

```
<div class="outer">
    <div class="inner">Lorem ipsum dol
    <div class="clear"></div></div>
</div><div class="clear"></div> 
```

和CSS：

```
.outer {
    float: left;
    width: 220px;
    height: 200px;
    background-color: #06F;
}
.inner {
    float: left;
    width: 220px;
    height: 99px;
    background-color: #0F6;
    margin-top: 100px;
} 
```

和jQuery

```
$(".outer").hover(function(e){
    e.stopPropagation();
    //$(".inner").fadeOut("slow");
    $(".inner").stop(true, true).hide("slide", {direction: "down"}, "slow");
}, function(e){
    e.stopPropagation();
    //$(".inner").fadeIn("slow");
    $(".inner").stop(true, true).show("slide", {direction: "down"}, "slow");
}); 
```

顺便说一句，注释代码工作正常。

jsfiddle 链接：http: [//jsfiddle.net/94hvS/](http://jsfiddle.net/94hvS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:11:30.950

看起来覆盖`ui-effects-wrapper`（由幻灯片动画创建）正在重置您的悬停状态。我能想到的一件事就是在这样的变量中手动记住悬停[状态](http://jsfiddle.net/liho1eye/94hvS/1/)。蹩脚，但有效。
不确定是否有更亲切的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:05:12.293

处理此问题的一种方法是使用全局布尔变量来了解您是否已经在滑动对象：

```
var sliding = false;
$(".outer").hover(function(e){
    e.stopPropagation();
    //$(".inner").fadeOut("slow");
    if(!sliding) {
        sliding = true;
        $(".inner").stop(true, true).hide("slide", {direction: "down"}, "slow", function() { sliding = false; });
    }
}, function(e){
    e.stopPropagation();
    //$(".inner").fadeIn("slow");
    if(!sliding) {
        sliding = true;
        $(".inner").stop(true, true).hide("slide", {direction: "down"}, "slow", function() { sliding = false; });
    }
}); 
```

我不确定它`function() { sliding = false; }`是否在正确的位置，但必须在动画完成时调用它。

# algorithm - Marching Cubes 算法中的等值

> ID：11177604
> 
> 赞同：2
> 
> 时间：2012-06-24T12:54:22.967
> 
> 标签：algorithm, opengl, cubes

我在这里阅读这篇文章：http: [//paulbourke.net/geometry/polygonise/](http://paulbourke.net/geometry/polygonise/)。

目前，我有一个使用单纯形噪声生成的类似于我的世界的地形，我将其划分为 16x16 块，这些块具有 32x32x128 块。现在，我想在行进立方体中使用我为 Polygonise 函数生成的噪声。但我的问题是如何计算等值？我不明白。

这里的任何人都知道更多的勺子文章。哈哈

编辑：

嘿，我在[http://paulbourke.net/geometry/polygonise/marchingsource.cpp](http://paulbourke.net/geometry/polygonise/marchingsource.cpp)上找到了这个。

sSourcePoint[] 的值为 0.5，因此它只是使对象居中，但 fResult += 0.5/(fDx*fDx + fDy*fDy + fDz*fDz) 有什么作用？天哪，我被这些代码吓到了。

```
GLfloat fSample1(GLfloat fX, GLfloat fY, GLfloat fZ)
{
        GLdouble fResult = 0.0;
        GLdouble fDx, fDy, fDz;
        fDx = fX - sSourcePoint[0].fX;
        fDy = fY - sSourcePoint[0].fY;
        fDz = fZ - sSourcePoint[0].fZ;
        fResult += 0.5/(fDx*fDx + fDy*fDy + fDz*fDz);

        fDx = fX - sSourcePoint[1].fX;
        fDy = fY - sSourcePoint[1].fY;
        fDz = fZ - sSourcePoint[1].fZ;
        fResult += 1.0/(fDx*fDx + fDy*fDy + fDz*fDz);

        fDx = fX - sSourcePoint[2].fX;
        fDy = fY - sSourcePoint[2].fY;
        fDz = fZ - sSourcePoint[2].fZ;
        fResult += 1.5/(fDx*fDx + fDy*fDy + fDz*fDz);

        return fResult;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T10:48:24.433

好吧，保罗的消息来源真的是“欺骗”的。fSample1 之前的评论说：

```
//fSample1 finds the distance of (fX, fY, fZ) from three moving points 
```

基本上，他正在创建一个所谓的“元球”对象，因此他需要将三个距离函数（距 fSourcePoint[i] 的距离）“混合”为一个。为此，他采取

```
Isovalue = 1/f[0] + 1/f[1] + 1/f[2] 
```

在哪里

```
f[i] = 1/DistFromCenterToSourcePoint[i]. 
```

效果很简单——当你远离每三个点时，等值几乎为零。越接近点 - f[i] 越小，等值越大。

该距离是通常的平方欧几里得距离

```
dist(p1, p2) = sqrt( (p1.x - p2.x)^2 + (p1.y - p2.y)^2 + (p1.z - p2.z)^2) 
```

要实现“类似 Minecraft”的等值面，您需要使用一些其他指标。看看出租车（又名曼哈顿）指标：

```
dist1(p1, p2) = abs(p1.x - p2.x) + abs(p1.y - p2.y) + abs(p1.z - p2.z) 
```

或最大度量

```
distMax(p1, p2) = max( abs(p1.x - p2.x), abs(p1.y - p2.y), abs(p1.z - p2.z) ) 
```

这些度量中的“球体”（即满足球体方程“dist = R”的集合）是立方体。

反转它们，计算总和（在 fSample1 函数中完成所有操作），通过实验选择一些典型的等值并查看结果。

# symfony - 在哪里放置实体“辅助功能”？

> ID：11177605
> 
> 赞同：2
> 
> 时间：2012-06-24T12:54:25.433
> 
> 标签：symfony

我无法理解 Symfony 2 的一个关键概念。

我正在一个网站上工作，用户可以在该网站上创建内容，然后可以使用秘密网址将其发送给其他人。类似于 www.yoursite.com/{secret-identifier-string}。

我计划这样做如下：

*   持久化用户的内容。
*   使用双向加密方法（如`mcrypt_encrypt`）创建包含内容 id 和创建时间戳（或任何其他永远不会再次更改的内容，作为额外的安全功能）的标识符字符串。
*   创建链接并将其显示给用户以将其赠送
*   每当调用 url 时，标识符字符串都会被解密。如果提供的时间戳与内容 id 行的相应值匹配，则会显示该页面。

我的问题是：

*   一般来说，您认为这是一个好的程序吗？
*   在 Symfony2 之外，我会创建像`getIdentifierString()`和这样的辅助方法`getContentPageLink()`。Symfony2中对应的代码应该放在哪里？它是否属于实体类？如果是这样，我会遇到问题，因为我正在使用服务类进行加密。该服务仅在控制器中可用。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:29:05.277

一般的想法是您创建“辅助类”而不是“辅助函数”。这些类可能依赖于其他类，在这种情况下，您将它们定义为服务。

听起来您的方法确实具有依赖关系（关于加密），因此您可以创建一个负责生成链接的新服务。在它的构造函数中，它将采用加密器，并且方法将传递给实体以生成链接/字符串。

例如，您的服务：

```
<service id="app_core.linkifier" class="App\CoreBundle\Linkifier">
    <argument type="service" id="the.id.for.encryptor"/>
</service> 
```

和类：

```
class Linkifier
{
    private $encryptor;

    public function __construct(Encryptor $encryptor)
    {
        $this->encryptor = $encryptor;
    }

    public function generateContentPageLink(Entity $the_entity)
    {
        return $this->encryptor->encrypt($the_entity);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-24T14:12:18.637

充分尊重 DI 和面向服务的设计、命名空间以及我们从中受益的所有好东西，

我仍然拒绝打字或阅读：

```
$this->mysyperfancyservice->dowhatevertheseviceissupposedtodowith($the_entity); 
```

哪里有一个简单的

```
do($the_entity); 
```

是我项目中 150 个实例所需要的全部内容，`do`参与该项目的每个人都知道哪些内容。

这就是 helper 的意义所在——可读性和简单性。只要它不依赖于其他服务。

我的解决方案是基本的 Composer 功能： `"autoload": { ... "files": [ "src/helper/functions.php" ] }`

我将数量非常有限的非常有用的函数放在`src/helper/functions.php`文件中，然后像这样将其添加到项目中。

为了使该功能在项目范围内可用，需要运行： `composer dump-autoload`

# python - GTK 应用程序中的终端小部件

> ID：11177606
> 
> 赞同：0
> 
> 时间：2012-06-24T12:54:26.347
> 
> 标签：python, linux, terminal, gtk, vte

我在我的应用程序中需要类似终端小部件的东西，但没有像 Bash 这样的外壳。我听说过VTE。要将 VTE 与我使用的 shell 连接起来：

```
Vte.Terminal.fork_command_full(0, "/home/user", ("/bin/bash",), "", 0, None, None) 
```

是否有可能将输入数据重定向到自定义函数而不是 shell？

如果 VTE 不可能，我想知道其他建议如何解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:41:09.267

你可以传递任何你想传递的命令`fork_command_full`，但是，听起来你几乎想要一个更像文本条目的东西，你允许用户输入命令，然后你的代码处理执行命令和处理它返回的数据。

为此，我将使用`subprocess.Popen`然后将命令的输出加载到`Gtk.TextView`使用文本标签中，以将 stderr 标记为红色文本。

# sql-server - 在 SQL Server 中将带符号的 int 转换为字符串 ip 地址

> ID：11177607
> 
> 赞同：4
> 
> 时间：2012-06-24T12:54:28.103
> 
> 标签：sql-server, ip-address

我正在从 SQL Server 数据库中检索已签名的 int，并且需要将其转换为“正常”外观的虚线字符串以显示给用户。

谷歌搜索，我发现了这段代码：

```
SELECT 
   dbo.IPADDRESS.IPADDRESS,
   CAST(ROUND( (cast(dbo.IPADDRESS.IPADDRESS as bigint) / 16777216 ), 0, 1) AS varchar(4)) + '.' +
   CAST((ROUND( (cast(dbo.IPADDRESS.IPADDRESS as bigint) / 65536 ), 0, 1) % 256) AS varchar(4)) + '.' +
   CAST((ROUND( (cast(dbo.IPADDRESS.IPADDRESS as bigint) / 256 ), 0, 1) % 256) AS varchar(4)) + '.' + 
   CAST((cast(dbo.IPADDRESS.IPADDRESS as bigint) % 256 ) AS varchar(4)) as IPDottedNotation
FROM  
   dbo.IPADDRESS 
```

这在某些时候有效，但在其他时候会产生古怪的输出。例如，转换 this`-1951276725`会产生 result `-116.-78.-30.-181`。

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T13:15:23.497

```
DECLARE @IPADDRESS TABLE (
  IPADDRESS INT);

INSERT INTO @IPADDRESS
VALUES      (-1139627840),
            ( 1);

SELECT 
        LTRIM(CAST(SUBSTRING(IP,4,1) AS TINYINT)) + '.' + 
        LTRIM(CAST(SUBSTRING(IP,3,1) AS TINYINT)) + '.' + 
        LTRIM(CAST(SUBSTRING(IP,2,1) AS TINYINT)) + '.' + 
        LTRIM(CAST(SUBSTRING(IP,1,1) AS TINYINT))
FROM @IPADDRESS
CROSS APPLY (SELECT CAST(IPADDRESS AS BINARY(4))) C(IP) 
```

[![在此处输入图像描述](../Images/5804f8d315d9029fcf4f413b5be0da44.png)](https://i.stack.imgur.com/IuUig.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T13:15:03.573

如果`IPADDRESS`是 bigint（有效地将 unsigned int 表示形式存储在数据库中 - 即所有值 > 0），您拥有的代码将可以工作。您可以选择更改表中的数据类型吗？

要获得您必须工作的内容，您需要在转换为 bigint 之前将您的有符号整数转换为等效的无符号整数。我不确定在 TSQL 中执行此操作的最有效方法是什么，但可能是将其转换为二进制：

```
SELECT dbo.IPADDRESS.IPADDRESS,
CAST(ROUND( (cast(cast(dbo.IPADDRESS.IPADDRESS as binary(4)) as bigint) / 16777216 ), 0, 1) AS varchar(4)) + '.' +
CAST((ROUND( (cast(cast(dbo.IPADDRESS.IPADDRESS as binary(4)) as bigint) / 65536 ), 0, 1) % 256) AS varchar(4)) + '.' +
CAST((ROUND( (cast(cast(dbo.IPADDRESS.IPADDRESS as binary(4)) as bigint) / 256 ), 0, 1) % 256) AS varchar(4)) + '.' + 
CAST((cast(cast(dbo.IPADDRESS.IPADDRESS as binary(4)) as bigint) % 256 ) AS varchar(4)) as IPDottedNotation 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-10T14:49:10.477

就像@Ed Harper 所说的那样，所选解决方案不适用于有符号整数。下面是我的解决方案，它需要更少的铸造并且没有倒置。查看下面显示的以下测试场景，其中转换后的字符串/varchar IP 应为 192.168.18.188：

```
CREATE TABLE #data
  (
     ip     NVARCHAR(45),
     before NVARCHAR(45)
  )

INSERT INTO #data
VALUES     ('converted-ip','-1139627840')

    update #data
    set ip = cast((cast(before as int) & 255) as nvarchar) + '.' +
         cast((cast(floor(convert(decimal, before)/256) as int) & 255) as nvarchar) + '.' +
         cast((cast(floor(convert(decimal, before)/65536) as int) & 255) as nvarchar) + '.' +
         cast((cast(floor(convert(decimal, before)/16777216) as int) & 255) as nvarchar)

select * from #data 
```

# objective-c - Objective-C – UILocalNotification alertBody 长度

> ID：11177611
> 
> 赞同：2
> 
> 时间：2012-06-24T12:54:48.100
> 
> 标签：objective-c, uilocalnotification

我正在寻找一些文档来找到`alertBody`a 的最大长度，`UILocalNotification`然后它将在通知中心（横幅）或弹出警报中被剪裁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-27T22:28:40.490

我没有发现任何特定的限制记录。但是，您可以试试看，通知下拉菜单显示大约 80 个字符。这是在装有 iOS 7.1 的 iPhone 5S 上。 ![通知下拉屏幕截图](../Images/826f8ce68b7b00fe7b8a8962b565d112.png) 通知中心显示更多消息。在这种情况下，大约 138 个字符开始截断。

当然，对于比例空间字体，字符数取决于这些字符的宽度，iPhone 显示文本的宽度比 iPad 小，未来版本的 iOS 可能会改变这一点。
![在此处输入图像描述](../Images/46554980f8f26c04b81bcc1424360c62.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T21:44:03.020

嗯，这并不容易。它还取决于字符宽度。我想你只需要腾出空间来支持不同的字符宽度。

# c - 数组数组和多维数组有什么区别？

> ID：11177615
> 
> 赞同：7
> 
> 时间：2012-06-24T12:55:21.347
> 
> 标签：c, language-agnostic, multidimensional-array

我在 C++ 聊天中与某人进行了与语言无关的讨论，[他说](https://chat.stackoverflow.com/rooms/10/conversation/conversation-about-multidim-arrays)数组数组和多维数组是两件事。

但据我所知，多维数组只不过是其他数组的数组，它们都具有相同的大小。他特别说

> 好吧，它们有点在 C 中，您可以在其中使用嵌套数组模拟多维，但这只是因为 C 实际上不支持多维数组

有人可以解释一下“多维数组”的规范计算机科学定义是什么以及为什么 C（或抽象定义“数组数组”）不符合该定义吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T13:08:01.643

以 .NET 数组为例，它很好地说明了这一点：

C#在以嵌套方式定义的[**锯齿状数组**](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)之间存在区别：

```
int[][] jagged = new int[3][]; 
```

每个嵌套数组可以有不同的长度：

```
jagged[0] = new int[3];
jagged[1] = new int[4]; 
```

（请注意，其中一个嵌套数组根本没有初始化，即`null`。）

相比之下，[**多维数组**](http://msdn.microsoft.com/en-us/library/2yd9wwz4)定义如下：

```
int[,] multidim = new int[3, 4]; 
```

在这里，谈论嵌套数组是没有意义的，实际上尝试访问`multidim[0]`将是编译时错误——您需要提供所有维度来访问它，即`multidim[0, 1]`.

正如上面的声明所揭示的，它们的类型也不同。

此外，它们的处理方式完全不同。例如，您可以使用 type 的对象迭代上述锯齿状数组`int[]`：

```
foreach (int[] x in jagged) … 
```

但是对多维数组的迭代是使用以下类型的项目完成的`int`：

```
foreach (int x in multidim) … 
```

**从概念上讲**，交错数组是*数组的数组*（……数组数组的数组……无限）*，`T`*而多维数组是具有集合访问模式*的数组`T`*（即索引是元组）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:03:44.720

我希望多维数组能够提供诸如“给我维数”或“给我某个列”或“给我某个子视图”之类的操作。C 数组不提供这些操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T13:08:19.640

来自维基百科：

> [多维数组](http://en.wikipedia.org/wiki/Array_data_type)
> 
> 指定元素所需的索引数称为数组类型的维度、维度或等级。（此命名法与线性代数中的维度概念相冲突，[5] 它是元素的数量。因此，在计算上下文中，具有 5 行和 4 列的数字数组（即 20 个元素）被称为具有维度 2 , 但在数学中表示一个维度为 4×5 或 20 的矩阵。此外，“秩”的计算机科学含义与其在张量代数中的含义相似，但与矩阵秩的线性代数概念不同。）
> 
> 许多语言只支持一维数组。在这些语言中，多维数组通常由 Iliffe 向量表示，即对少一维数组的引用的一维数组。特别地，二维数组将被实现为指向其行的指针向量。因此，数组 A 的第 i 行和第 j 列中的元素将通过双索引（典型符号中的 A[i][j]）访问。这种模拟多维数组的方式允许创建参差不齐或参差不齐的数组，其中每一行可能具有不同的大小——或者，通常，每个索引的有效范围取决于所有前面索引的值。
> 
> 这种多维数组的表示在 C 和 C++ 软件中非常普遍。但是，C 和 C++ 将使用线性索引公式来声明多维数组，例如通过 int A[10][20] 或 int A[m][n]，而不是传统的 int **A .[6]：第 81 页

有关支持多维数组的语言示例，请参见[此处](https://stackoverflow.com/questions/5530606/setlength-on-multidimensional-array)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T13:18:36.670

C 没有多维数组，但 C 有数组数组。

在标准中，使用了多维数组的措辞，*但*C 多维数组实际上是数组的数组。来自 Kernighan & Ritchie：

> “在 C 语言中，二维数组实际上是一维数组，每个元素都是一个数组。”

一些语言支持多维数组作为第一类类型。“Expert C Programming”一书展示了支持数组数组和多维数组的 Ada 示例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T13:19:47.780

我明白他的意思。他实际上从实现的角度来看它们有所不同，但两者实际上都**可以**说是多维数组。

“数组数组”类型使用线性索引，因为它实际上是作为一维数组实现的，尽管在语言级别它是通过多个索引引用的。例如，在 C 中：

```
int a[5][5]; 
```

实际上具有与以下相同的结构：

```
int a[25]; 
```

编译器将翻译如下访问：

```
a[i][j] 
```

到：

```
a[i * jDimensionWidth + j] 
```

其中 jDimensionWidth = 5 在上面的例子中。甚至可以像这样访问它：

```
int* b = (int*) a;
printf("%d\n",b[12] == a[2][2]); // should output 1 
```

正如他所说，“多维数组”类型是通过 Iliffe 向量实现的，其中索引不能线性化，因为地址也不是线性的，因为向量通常作为堆对象实现。这种多维数组不符合方程（对于二维数组）：

```
addr(a[i + 1]) = addr(a[i]) + (a[i].width * sizeof(a[i][j].datatype)) 
```

这是由“数组数组”类型实现的。

# php - 如何使用 php 向网站的每个用户显示图像，而不仅仅是管理员

> ID：11177623
> 
> 赞同：0
> 
> 时间：2012-06-24T12:56:07.437
> 
> 标签：php, mysql, image

我正在使用 php 和 mysql 建立一个网站。我有一个仅供管理员使用的登录名，仅此而已。管理员可以创建图像相册并将图像上传到其中。其他每个用户都不需要登录该网站。我的问题是我无法在未登录网站的情况下向用户显示图像。管理员登录网站后可以看到图像。有什么想法我做错了什么吗？任何解决方案可以接受。。

这是包含上述内容的代码：

相册.php

```
<?php
if (!logged_in()){
?>
        <ul>
          <li class="first"><a href="indexAdmin.html"><span class="style2">   <b>Α</b>ΡΧΙΚΗ</span></a></li>
          <li class="first"><a href="#"><span class="style2"><b>Μ</b>ΟΥΣΕΙΟ</span></a>
          <ul>
            <li class="second"><a href="istoriki_anadromi.html"><span>Ιστορική Αναδρομή</span></a></li>
            <li class="second"><a href="oikonomiki_zwi.html"><span>Οικονομική Ζωή</span></a></li>
            <li class="second"><a href="nautilia.html"><span>Ναυτιλία</span></a></li>
            <li class="second"><a href="ixoi.html"><span>Ήχοι της Πόλης</span></a></li>
            <li class="second"><a href="proswpikotites.html"><span>Προσωπικότητες</span></a></li>
            <li class="second"><a href="thesmoi.html"><span>Θεσμοί της Πόλης</span></a></li>
          </ul></li>

          <li class="first"><a href="#"><span class="style2"><b>Κ</b>ΕΝΤΡΟ <b>Ε</b>ΡΕΥΝΩΝ</span></a>
          <ul>
            <li class="second"><a href="progr.html"><span>Εκπαιδευτικά Προγράμματα</span></a></li>
            <li class="second"><a href="simposia.html"><span>Επιστημονικά Συμπόσια</span></a></li>
            <li class="second"><a href="imerides.html"><span>Ημερίδες</span></a></li>
            <li class="second"><a href="dialexeis.html"><span>Διαλέξεις</span></a></li>
          </ul></li>

          <li class="first"><a href="#"><span class="style2"><b>Ι</b>ΣΤΟΡΙΚΟ <b>Α</b>ΡΧΕΙΟ</span></a>
          <ul>
            <li class="second"><a href="arxeio_dimou.html"><span>Αρχείο Δήμου</span></a></li>
            <li class="second"><a href="idiwtika_arxeia.html"><span>Ιδιωτκά Αρχεία</span></a></li>
            <li class="second"><a href="albums.php"><span>Φωτογραφίες</span></a></li>
            <li class="second"><a href="video.html"><span>Βίντεο</span></a></li>
          </ul></li>

          <li class="first"><a href="contact.html"><span class="style2"><b>Ε</b>ΠΙΚΟΙΝΩΝΙΑ</span></a></li>
    </ul>
    <?php
}else{ ?>
<ul>
          <li class="first"><a href="indexAdmin.html"><span class="style2"><b>Α</b>ΡΧΙΚΗ</span></a></li>
          <li class="first"><a href="#"><span class="style2"><b>Μ</b>ΟΥΣΕΙΟ</span></a>
          <ul>
            <li class="second"><a href="istoriki_anadromi.html"><span>Ιστορική Αναδρομή</span></a></li>
            <li class="second"><a href="oikonomiki_zwi.html"><span>Οικονομική Ζωή</span></a></li>
            <li class="second"><a href="nautilia.html"><span>Ναυτιλία</span></a></li>
            <li class="second"><a href="ixoi.html"><span>Ήχοι της Πόλης</span></a></li>
            <li class="second"><a href="proswpikotites.html"><span>Προσωπικότητες</span></a></li>
            <li class="second"><a href="thesmoi.html"><span>Θεσμοί της Πόλης</span></a></li>
          </ul></li>

          <li class="first"><a href="#"><span class="style2"><b>Κ</b>ΕΝΤΡΟ <b>Ε</b>ΡΕΥΝΩΝ</span></a>
          <ul>
            <li class="second"><a href="progr.html"><span>Εκπαιδευτικά Προγράμματα</span></a></li>
            <li class="second"><a href="simposia.html"><span>Επιστημονικά Συμπόσια</span></a></li>
            <li class="second"><a href="imerides.html"><span>Ημερίδες</span></a></li>
            <li class="second"><a href="dialexeis.html"><span>Διαλέξεις</span></a></li>
          </ul></li>

          <li class="first"><a href="#"><span class="style2"><b>Ι</b>ΣΤΟΡΙΚΟ <b>Α</b>ΡΧΕΙΟ</span></a>
          <ul>
            <li class="second"><a href="arxeio_dimou.html"><span>Αρχείο Δήμου</span></a></li>
            <li class="second"><a href="idiwtika_arxeia.html"><span>Ιδιωτκά Αρχεία</span></a></li>
            <li class="second"><a href="albumsAdmin.php"><span>Φωτογραφίες</span></a></li>
            <li class="second"><a href="video.html"><span>Βίντεο</span></a></li>
          </ul></li>

          <li class="first"><a href="contact.html"><span class="style2"><b>Ε</b>ΠΙΚΟΙΝΩΝΙΑ</span></a></li>
    </ul>
    <?php }?>
  </div>
</div>
<div class="content3">
<div class="content_resize3">
  <div class="mainbar3">
    <div class="article3">
          <h2><span>Συλλογές Φωτογραφιών</span></h2>
      <div class="clr"></div>
    <table border="0" cellspacing="0" cellpadding="2" width="610">
    <tr>
     <td>
     <br />

<?php

$albums1 = get_albumsAll();

if (empty($albums1)){
echo '<p>There are no albums</p>';
}else{
foreach ($albums1 as $album) {
                echo '<table style="display:inline-table;"><tr><td><p class="links"><a href="view_album1.php', $album, '" height="100" width="100">', $album['name'], '</a> (', $album['count'], ' images)<br />
                ', $album['description'], '...<br /></p> </td></tr></table>';
            }
        }
?> 
```

view_album.php

```
<?php
include 'init.php';
if (!logged_in()) {
header('Location: albums.php');
exit();
}

if (!isset($_GET['album_id']) || empty($_GET['album_id']) ||   album_check($_GET['album_id']) == false) {
header('Location: albumsAdminAll.php');
exit();
}

$album_id = $_GET['album_id'];
$album_data = album_data($album_id, 'name', 'description');
?>
<div class="content3">
<div class="content_resize">
  <div class="mainbar3">
    <div class="article3">
      <?php echo '<h2>','<span>', $album_data['name'], '</span>', '</h2>', '<p id="description">', $album_data['description'], '</p>'; ?>
      <div class="clr"></div>
      <div class="post_content3">
        <p>

<?php
$album_id = $_GET['album_id'];
$images = get_images($album_id);

if (empty($images)) {
echo 'There are no images in this album<br /><br /><br />
        <p class="links"><a href="upload_image.php">Eισαγωγή Φωτογραφιών</a></p>';
} else {
foreach ($images as $image) {
    echo '<table style="display:inline-table;"><tr><td><a href="uploads/',   $image['album'], '/', $image['id'], '.', $image['ext'], '" height="100" width="100"><img src="uploads/thumbs/', $image['album'], '/', $image['id'], '.', $image['ext'], '" id="img" title="Uploaded ', date('D M Y / h:i ', $image['timestamp']), '" /></a> 
    <a href="delete_image.php?image_id=', $image['id'], '">[x]</a></td></tr></table>';

}echo '<br/><br/><p class="links"><a href="upload_image.php"><p class="links">Eισαγωγή Φωτογραφιών</p></a>
    <p class="links"><a href="albumsAdminAll.php">Back to Albums</a>  </p><br/>';
}

?> 
```

初始化文件

```
<?php
ob_start();
session_start();

mysql_connect('localhost','root','');
mysql_query("SET CHARACTER SET utf8");
mysql_select_db('museum');

include 'func/user.func.php';
include 'func/album.func.php';
include 'func/image.func.php';
include 'func/thumb.func.php';

 ?> 
```

相册.func.php

```
 <?php
function album_data($album_id) {
$album_id = (int)$album_id;
$args = func_get_args();
unset($args[0]);
$fields = '`'.implode('`, `', $args).'`';

$query = mysql_query("SELECT $fields FROM `albums` WHERE `album_id`=$album_id AND `user_id`=".$_SESSION['user_id']) or die(mysql_error());
$query_result = mysql_fetch_assoc($query);
foreach ($args as $field) {
    $args[$field] = $query_result[$field];

}    
return $args;
}

function album_check($album_id) {
$album_id = (int)$album_id;
$query = mysql_query("SELECT COUNT(`album_id`) FROM `albums` WHERE `album_id`=$album_id AND `user_id`=".$_SESSION['user_id']);
return (mysql_result($query, 0) == 1) ? true : false;
}

function get_albums() {
$albums = array();

$albums_query = mysql_query("
SELECT `albums`.`album_id`, `albums`.`timestamp`, `albums`.`name`, LEFT(`albums`.`description`, 50) as `description`,
COUNT(`images`.`image_id`) as `image_count`
FROM `albums`
LEFT JOIN `images`
ON `albums`.`album_id` = `images`.`album_id`
WHERE `albums`.`user_id` = ".$_SESSION['user_id']."
GROUP BY `albums`.`album_id`
") or die(mysql_error());

if(mysql_num_rows($albums_query)>0){ 
//this statement checks whether the query return more than 0 rows, if yes then it will proceeds.
// you can even check if(mysql_numrows($albums_query)==1) if it should return only one row
    while ($albums_row = mysql_fetch_assoc($albums_query)) {
        $albums[] = array(
        'id' => $albums_row['album_id'],
        'timestamp' => $albums_row['timestamp'],
        'name' => $albums_row['name'],
        'description' => $albums_row['description'],
        'count' => $albums_row['image_count']
        );
    }return $albums;
}else{     
}
}

function get_albumsAll() {
$albums2 = array();

$albums_query2= mysql_query ("
SELECT `albums`.`album_id`, `albums`.`timestamp`, `albums`.`name`, LEFT(`albums`.`description`, 50) as `description`, COUNT(`images`.`image_id`) as `image_count`
FROM `albums`
LEFT JOIN `images`
ON `albums`.`album_id` = `images`.`album_id`
GROUP BY `albums`.`album_id`
") or die(mysql_error());

if(mysql_num_rows($albums_query2)>0){ 

while ($albums_row2 = mysql_fetch_assoc($albums_query2)){
    $albums2[] = array(
        'id' => $albums_row2['album_id'],
        'timestamp' => $albums_row2['timestamp'],
        'name' => $albums_row2['name'],
        'description' => $albums_row2['description'],
        'count' => $albums_row2['image_count']
        );
}
return $albums2;
}
}

function create_album($album_name, $album_description) {
$album_name = mysql_real_escape_string(htmlentities($album_name)); 
$album_description = mysql_real_escape_string(htmlentities($album_description)); 

mysql_query("INSERT INTO `albums` VALUES ('', '".$_SESSION['user_id']."', UNIX_TIMESTAMP(), '$album_name', '$album_description')");
mkdir('uploads/'.mysql_insert_id(), 0744);
mkdir('uploads/thumbs/'.mysql_insert_id(), 0744);
}

function edit_album($album_id, $album_name, $album_description) {
$album_id = (int)$album_id;
$album_name = mysql_real_escape_string($album_name);
$album_description = mysql_real_escape_string($album_description);
mysql_query("UPDATE `albums` SET `name` = '$album_name', `description` = '$album_description' WHERE `album_id` =    '$album_id' AND `user_id` = ".$_SESSION['user_id']);
}

function delete_album($album_id) {
$album_id = (int)$album_id;

// To do: use a method to delete all files from folder and thubs folder, then the directory

mysql_query("DELETE FROM `albums` WHERE `album_id`=$album_id AND `user_id`=".$_SESSION['user_id']);
mysql_query("DELETE FROM `images` WHERE `album_id`=$album_id AND `user_id`=".$_SESSION['user_id']);
}
?> 
```

相册AdminAll.php

```
 <?php
include 'init.php';
?>

<div class="content3">
<div class="content_resize">
  <div class="mainbar3">
    <div class="article3">
      <h2><span>Άλμπουμ</span></h2>
      <div class="clr"></div>
      <div class="post_content3">
        <p>

<?php
if(!logged_in()){
header('Location: albums.php');
exit();
}else{
$albums = get_albums();

if (empty($albums)){
    echo '<p>There are no albums</p>';

}else{
    foreach ($albums as $album){
                echo '<table style="display:inline-table;"><tr><td><p class="links"><a href="view_album.php?album_id=', $album['id'], '" height="100" width="100">', $album['name'], '</a> (', $album['count'], ' images)<br />
                ', $album['description'], '...<br />
                <div class="links2"><p class="links"><a href="edit_album.php?album_id=', $album['id'], '">Επεξεργασία</a> / <a href="delete_album.php?album_id=', $album['id'], '">Διαγραφή</a></div></div>
                </p></td></tr></table>';
        }echo '<br/><br/><br/><p class="links"><a href="upload_image.php">Eισαγωγή Φωτογραφιών</p></a>';
    }echo '<p class="links"><a href="albumsAdmin.php">Back to Menu</p></a>';
}
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:01:33.450

为什么只有管理员登录时才显示图像？您是否在用户未登录时强制用户进入登录页面？如果是这种情况，那么您应该只在他们尝试访问他们能够上传/编辑图像的页面时强制/重定向他们。如果您还没有，您应该创建仅向用户显示图像的页面，并且不考虑用户是否登录我们的 not。

# vba - 在 Recordset 对象上使用 GetRows 不会返回任何行

> ID：11177629
> 
> 赞同：0
> 
> 时间：2012-06-24T12:56:47.680
> 
> 标签：vba, recordset

我正在尝试将记录集加载到数组中。我正在使用以下代码：

```
Set rst = CurrentDb.OpenRecordset("SELECT id FROM TABLE1")  
bankacid = rst.GetRows()  
rst.Close  
i = UBound(bankacid, 2)   
MsgBox i + 1 
```

这不返回任何行。如果我使用“bankacid = rst.getrows(5)”，它会起作用。

我对 VBA 很陌生，非常感谢有人指出我所缺少的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:14:36.273

最好退后一步，说出你为什么想要一个数组，毕竟，DAO recorset 比数组更实用。如果确实需要数组，请使用 ADODB。如果您只想引用字段和行，请使用 Move、MoveFirst、MoveLast、MoveNext、MovePrevious 以及字段名称（列）或序号位置（.Field(3)。

# android - 拆分安卓的最佳角色

> ID：11177631
> 
> 赞同：0
> 
> 时间：2012-06-24T12:56:57.710
> 
> 标签：android, split

我开始了一个android项目，就像聊天程序一样。像这样从我的服务器下载的数据

```
1~my name~my username~message 
```

不，我的问题是，是否有任何与 android 兼容的字符来替换上面的分隔符 (~)。恐怕，如果在其他日子，用户使用字符〜，程序会崩溃。

我使用了字符÷，但我的android无法读取它，它变成了'？'。有人遇到同样的问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:10:00.737

如果您也在服务器端使用 Java，您可以定义一个对象，`ChatMessage`然后将其发送`Socket`到[`Object Stream`](http://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html)服务器。

正如 Burak 指出的那样，您的方式是错误的方式......但是还有其他几种方式，恕我直言，对象流可能是您最简单的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:16:59.923

首先，为客户端-服务器通信创建自己的格式几乎是个坏主意，我最好的建议是尝试使用 json 或 xml。客户端和服务器端都有很多可用的库来形成/解析它们，您所要做的就是使用后端语言来返回其中一种格式。

对于python：[http ://docs.python.org/library/json.html](http://docs.python.org/library/json.html)

对于 php： http: [//php.net/manual/en/book.json.php](http://php.net/manual/en/book.json.php)

对于安卓：http: [//developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

您可以通过简单的搜索轻松找到其他语言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:21:01.760

如果您使用分隔符，它是放入您正在分隔的流中的数据的可能内容，您将遇到问题。

为了防止这种情况，您需要防止角色以可能被误解的方式出现。

1.  在输入端，检测出现并用特殊代码或转义前缀字符替换它们，或引用内容（尽管你必须处理引号字符的文字出现）

2.  如果使用转义字符，则拆分代码必须忽略转义字符后或引用序列中的任何分隔符。

3.  在输出端，您应该用编码字符的文字实例替换代码或转义序列，或删除任何引用字符。

正如其他人所提到的，有许多标准方案和功能来处理它们。

# c++ - 如何从 QThread::run() 获取用户反馈，例如 QMessageBox？

> ID：11177636
> 
> 赞同：0
> 
> 时间：2012-06-24T12:58:07.437
> 
> 标签：c++, qt, qt4, libssh

我知道在单独的线程中运行任何类型的 GUI 小部件都是不好的。对于消息，这可以通过向主线程发出信号来克服。但是如果线程需要用户输入，如何将答案返回给线程，以及该线程如何等待该答案？

我的特殊情况是一个使用来自 libssh 的 sftp 的应用程序。在连接和认证期间，用户可能需要回答一个或多个问题。但出于性能原因，所有 SSH/SFTP 的东西都必须在单独的线程中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:40:11.133

根本不可能在非 GUI 线程中使用 GUI 类。你可以做的是使用信号和槽来从一个线程到另一个线程交换信息。从您的工作线程发送信号并等待信号量，例如`QWaitCondition`. 发回消息并附上答案。

在您的情况下，您还可以使用`Qt::BlockingQueuedConnection`连接类型来停止您的工作线程，直到用户输入数据。`QInputDialog`也等到用户完成输入数据。

# android - 在 android-sdk 目录中找不到示例

> ID：11177645
> 
> 赞同：3
> 
> 时间：2012-06-24T13:00:27.323
> 
> 标签：android, android-sdk-2.3

当我转到目录时，`C:/programfiles/android/android-sdk/platform/<version>/` 我找不到示例目录。
我从eclipse打开的sdk管理器中安装了所有版本的`sdk`示例，但是当我从eclipse打开sdk时打开它时，我无法安装相同的版本
`start--> all programs--> android--> sdk`
，它显示已安装，从开始菜单打开时显示为未安装。

谁能帮我找到示例目录？我从 Eclipse 中的示例创建项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:02:38.627

`C:/Program Files (x86)/android/android-sdk/samples/`?

只是为了确定你的 Eclipse 使用的是哪个 SDK 目录，在 Eclipse 中打开：

Window -> Preferences -> Android 并打开“SDK Location”下的路径。如果您安装了它们，它们应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:38:46.773

在系统范围内搜索文件“ApiDemos.java”，它是 API Demos 示例的一部分。

如果没有找到，那么几乎没有合理的可能性：

*   样本并未实际安装

*   这些示例安装在不同用户/管理员的所有权下，因此您无法访问它们，但 eclipse 插件可以以某种方式

*   文件系统已损坏

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:05:31.663

在 Windows 7 中（很可能在 Windows XP 和 Windows Vista 中）标准路径是：

**32 位**

```
C:\Program Files\Android\android-sdk\samples 
```

**64 位**

```
C:\Program Files (x86)\Android\android-sdk\samples 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:07:56.310

如果您已经下载了示例，您可以在以下位置找到它：

```
C:\Program Files\Android\android-sdk\platforms\<android-version>\samples/ 
```

检查此详细链接：http: [//developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

如果它不存在，那么使用`SDK Manager`您可以下载所需的平台版本示例。

**编辑**

如果所有解决方案都不起作用，请在 Windows 中搜索该文件夹`samples`。你一定会找到的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T05:47:07.763

尝试`C:\Program Files\Android\android-sdk\samples\<android-version>`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-07-07T19:50:29.910

您目前可以在[https://android.googlesource.com/platform/development/+/05523fb0b48280a5364908b00768ec71edb847a2/samples在线查看它们](https://android.googlesource.com/platform/development/+/05523fb0b48280a5364908b00768ec71edb847a2/samples)

# ios - 是否可以设置某些静态 UITableView 单元格的高度，而不是在满足条件时设置所有单元格的高度？

> ID：11177647
> 
> 赞同：0
> 
> 时间：2012-06-24T13:00:29.553
> 
> 标签：ios, xcode, uitableview, static, cells

我有一个带有静态单元格的 UITableView，并且通过搜索隐藏了与搜索不匹配的单元格。有没有办法设置隐藏单元格的行高。我曾尝试使用 if 语句，但它们最终会更改 tableview 中的所有单元格而不是隐藏的单元格。

基本上我想知道当一个单元格被隐藏时，它的行高是否也可以改变

编辑抱歉，当我发布问题时，我不在我的代码中

目前，我有带有静态单元格的 UITableView 和带有搜索显示控制器的搜索栏。搜索栏的代码如下

```
@property (weak, nonatomic) IBOutlet UISearchBar *searchBar;
@property (strong, nonatomic) IBOutletCollection(UITableViewCell) NSArray *cells;
@property(nonatomic) CGFloat rowHeight;

@implementation tableViewController

@synthesize searchBar;  
@synthesize cells;  
@synthesize rowHeight;  

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
for(UITableViewCell *cell in self.cells) 
{
    UILabel *label = cell.textLabel;
    NSString *text = label.text;
   cell.hidden = searchText.length != 0 && ([text rangeOfString:searchText options:NSCaseInsensitiveSearch].location == NSNotFound);

    if (cell.hidden) {

        rowHeight = 10;

    }

       }

} 
```

这就是隐藏不匹配的单元格的原因。我遇到的问题是，当单元格被隐藏时，它们会占用显示器中的空间并节省空间并使事情看起来更好我希望将隐藏的单元格设置为 0 或 1 的高度以节省空间（10被用作一个例子，直到我可以让它工作）并让一切都对齐。当搜索栏被取消或从中单击时，它将所有行高设置回 44。此代码发生的情况是所有单元格都设置为 10，而不仅仅是隐藏的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:26:35.480

行高通过控制

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath { 
```

因此，当您隐藏一行时，无论您如何执行此操作，都可以重新加载该特定行。上面的方法可以检查单元格上的 BOOL 并使用它来确定返回的高度。

但是，还有另一种方法可以实现您想要的：

这是我如何过滤表的示例。我的表格顶部有一个标准 UISearchBar，它使用搜索文本调用此方法：（一些方法调用是我项目的一部分.. 但你应该明白）

基本上，它为 tableview 提供了不同的数据数组，然后重新加载表。如果搜索被取消，或者 searchText 为空白 - 它将获得我原来的 tableData。

```
- (void) performSearchWithText:(NSString *)searchText {
    [super performSearchWithText:searchText];
    if ([searchText length] > 0) {
        NSPredicate *predicate = [NSPredicate predicateWithFormat:@"title contains[cd] %@", searchText]; 
        NSArray *filteredArray = [[self.setListController sets] filteredArrayUsingPredicate:predicate];
        self.tableData = [NSArray arrayWithArray:filteredArray];
        [self.tableView reloadData];
    } else {
        self.tableData = [self.setListController sets];
        [self.tableView reloadData];
    }
} 
```

这对我很有效。

编辑：或............

现在，如果你想继续按照你的方式做......你可以试试这个......虽然它看起来不太有效，但你只有32个细胞，所以应该没问题。但理想情况下，您希望将数据和视图分开 - 因此您搜索数据并告诉视图进行更新。当前，您正在视图中搜索文本。

```
- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {    
    [self.hiddenCells removeAllIndexes];
    for(UITableViewCell *cell in self.cells) {
        UILabel *label = cell.textLabel;
        NSString *text = label.text;
        BOOL shouldHide = searchText.length != 0 && ([text rangeOfString:searchText options:NSCaseInsensitiveSearch].location == NSNotFound);
        if (shouldHide) {
            [self.hiddenCells addIndex:[self.tableView indexPathForCell:cell]];
       }         
    }
    [self.tableView reloadData];
}

- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    if (self.hiddenCells containsIndex:indexPath) {
        return 0.0f;
    } else {
        return 40.0f;
    }
} 
```

您还需要创建此属性：@property (nonatomic, retain) NSMutableIndexSet *hiddenCells;

# groovy - 如何从 Groovy 中的对象字段中提取新列表

> ID：11177651
> 
> 赞同：20
> 
> 时间：2012-06-24T13:01:00.830
> 
> 标签：groovy

在 Groovy 中，如何从以下内容中提取新列表：

```
 def people = [ 
           new Person(name:"Tom", yearOfBirth:1985),
           new Person(name:"Abigail", yearOfBirth:1987),
           new Person(name:"Joyce", yearOfBirth:1984),
           new Person(name:"James", yearOfBirth:1987),
           new Person(name:"Scott", yearOfBirth:1985),
           new Person(name:"Ruth", yearOfBirth:1984)
       ]  

   class Person {
       String name
       int yearOfBirth
   } 
```

使新列表如下所示：

```
 ["Tom", "Abigail", "Joyce", "James", "Scott", "Ruth"] 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-24T13:03:47.100

你可以做：

```
def names = people.name 
```

# asp.net - 每个用户的 _PageStart 是否不同？

> ID：11177652
> 
> 赞同：0
> 
> 时间：2012-06-24T13:01:05.807
> 
> 标签：asp.net, razor, asp.net-webpages

我正在探索带有 Razor 的 ASP.net Webpages 2 的可能性，并尝试使用 Windows 身份验证制作应用程序。

所以我想知道 _PageStart 是为每个用户执行还是只执行一次然后缓存？这是因为我想从数据库中获取一些信息并将这些信息存储起来以供整个应用程序使用。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:03:45.280

`_PageStart.cshtml`在每个 Razor 模板之前执行，与之相反，`_AppStart.cshtml`它只执行一次。您可以查看[以下文章](http://www.asp.net/web-pages/tutorials/working-with-pages/18-customizing-site-wide-behavior)以获得这些文件的更详细概述。

# regex - Perl正则表达式替换最后一个匹配的字符串

> ID：11177653
> 
> 赞同：3
> 
> 时间：2012-06-24T13:01:23.940
> 
> 标签：regex, perl

我有一个字符串如下：

```
$str = "/dir1/dir2/dir3/file.txt" 
```

我想从此字符串中删除**/file.txt 。**

这样**$str**就会变成。

```
$str = "/dir1/dir2/dir3" 
```

我正在使用以下正则表达式。但它正在取代一切。

```
$str =~ s/\/.*\.txt//; 
```

如何使正则表达式查找最后一个**“/”**而不是第一个。

什么是正确的正则表达式？

请注意，**file.txt**不是固定名称。它可以是**file1.txt**、**file2.txt**等任何内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T13:08:18.487

如果要从该字符串中获取路径，可以使用[File::Basename](http://search.cpan.org/perldoc?File%3a%3aBasename)。它是 Perl 版本 5 以来的核心模块。

```
perl -MFile::Basename -le '$str = "/dir2/dir3/file.txt"; print dirname($str);' 
```

以脚本形式：

```
use strict;
use warnings; # always use these
use File::Basename;

my $str = "/dir1/dir2/dir3/file.txt"; 
print dirname($str);" 
```

您的正则表达式不起作用，因为它没有锚定并且`.*`是贪婪的，所以它尽可能匹配，从`/`它遇到的第一个斜杠开始。一个有效的正则表达式看起来像这样：

```
$str =~ s#/[^/]*?\.txt$##; 
```

请注意使用非贪婪量词`*?`，它将匹配尽可能小的字符串。另请注意，我使用另一个分隔符进行替换以避免“倾斜牙签综合症”，例如`s/\/\/\///`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T13:06:37.933

非常简单的正则表达式：`s/\/[^\/]*$//`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T13:10:52.897

在这个正则表达式中

```
m/(.*)\/[^\/]*$/ 
```

第一个子匹配是您要查找的路径。

**编辑：**

如果您正在寻找替代 user1215106 的灵魂是要走的路：

```
s/\/[^\/]*$// 
```

# javascript - JavaScript 如果条件不起作用

> ID：11177658
> 
> 赞同：0
> 
> 时间：2012-06-24T13:01:58.677
> 
> 标签：javascript

我被这个if语句搞砸了，它在javascript中不起作用。我正在使用js调用php和php文件 echo 'true';

我的java脚本代码

```
 function like_add(article_id){
$.post('my/like.php', {article_id:article_id}, function(data){
    if(data == 'true'){//this part never works
        alert(data);
    }else{
    alert(data);
    }
}); 
```

}

我试图改变警报`alert('*'+data+'*');`

并且知道有一个空格* true*。我怎样才能让这个脚本工作。

整个代码

```
 function like_add(article_id){
$.post('ajax/like.php', {article_id:article_id}, function(data){

    if(data == 'true'){
        total_votes(article_id);
    }else{
    alert(data);
    }
}); 
```

} PHP 代码

```
 if(previously_liked($article_id) === true){
        echo 'You\'ve already liked this!';                 
        }else{
            add_like($article_id);
            echo 'true';
        }

function total_votes(article_id){
$.post('ajax/total_votes.php', {article_id:article_id}, function(data){
    $('#article_'+article_id).text(data); 
```

}); }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:03:36.920

好吧，您可以在测试中包含一个空格：

```
 if (data == ' true') { ... } 
```

或者您可以在数据中寻找“真”模式：

```
 if (/true/.test(data)) { ... } 
```

后者可能会更有弹性，尽管实际上最好让您的服务器返回一些更有条理且不那么模棱两可的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:07:59.757

我认为您可以执行以下操作：

1.  检查您的响应中不应包含空格。或者
2.  利用`data = data.replace(/\s/g, "");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:34:12.400

如果它是一个领先的空间困扰着你，试试

```
if (data.replace(/^\s+|\s+$/,'').toLowerCase() === 'true') 
```

# objective-c - NSJSONSerialization 中未转义的控制字符

> ID：11177661
> 
> 赞同：7
> 
> 时间：2012-06-24T13:02:39.153
> 
> 标签：objective-c, escaping, nsjsonserialization

我有这个我需要解析的JSON [http://www.progmic.com/ielts/retrive.php 。](http://www.progmic.com/ielts/retrive.php)当我使用 NSJSONSerialization 执行此操作时，出现“字符 1981 周围未转义的控制字符”错误。

我需要知道：

*   未转义的控制字符到底是什么？有清单之类的吗？
*   我该如何摆脱这个错误？最简单的方法？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-25T15:36:51.807

我添加了这个方法来从检索到的字符串中删除未转义的字符：

```
- (NSString *)stringByRemovingControlCharacters: (NSString *)inputString 
{ 
    NSCharacterSet *controlChars = [NSCharacterSet controlCharacterSet]; 
    NSRange range = [inputString rangeOfCharacterFromSet:controlChars]; 
    if (range.location != NSNotFound) { 
        NSMutableString *mutable = [NSMutableString stringWithString:inputString]; 
        while (range.location != NSNotFound) { 
            [mutable deleteCharactersInRange:range]; 
            range = [mutable rangeOfCharacterFromSet:controlChars]; 
        } 
        return mutable; 
    } 
    return inputString; 
} 
```

接收到 NSData 后，我将其转换为 NSString，调用上述方法获取一个删除了控制字符的新字符串，然后将新的 NSString 再次转换为 NSData 以进行进一步处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:18:19.817

在使用 NSJSONSerialization 之前你在做什么？检查编码，也许问题出在那儿。

我很快尝试了，它奏效了。源 JSON 有效。这是我使用漂亮的打印物将数组序列化回 JSON 时得到的：

```
[
  {
    "url2": "http://ielts.progmic.com/app/i_COFANewSouthWhales.html",
    "title": "COFA New South Whales ",
    "img": "http://ielts.progmic.com/images/uni/1340407904.jpg",
    "url": "http://ielts.progmic.com/app/COFANewSouthWhales.html",
    "desc": "The College offers nine undergraduate degrees including some double degrees associated with other UNSW faculties.",
    "img2": "http://ielts.progmic.com/images/uni/thumb/1340407904.jpg"
  },
  {
    "url2": "http://ielts.progmic.com/app/i_RoyalCollegeOfArts.html",
    "title": "Royal College Of Arts ",
    "img": "http://ielts.progmic.com/images/uni/1340542224.jpg",
    "url": "http://ielts.progmic.com/app/RoyalCollegeOfArts.html",
    "desc": "The Royal College of Art (informally the RCA) is a public research university specialised in art and design located in London, United Kingdom. It is the world's only wholly postgraduate university of art and design, offering the degrees of Master of Arts (M.A.), Master of Philosophy (M.Phil.) and Doctor of Philosophy (Ph.D.). It was founded in 1837",
    "img2": "http://ielts.progmic.com/images/uni/thumb/1340542224.jpg"
  },
  {
    "url2": "http://ielts.progmic.com/app/i_MIDDLESEXUNIVERSITY.html",
    "title": "MIDDLESEX UNIVERSITY ",
    "img": "http://ielts.progmic.com/images/uni/1340410005.jpg",
    "url": "http://ielts.progmic.com/app/MIDDLESEXUNIVERSITY.html",
    "desc": "We have a reputation for the highest quality teaching, research that makes a real difference to people’s lives and a practical, innovative approach to working with businesses to develop staff potential and provide solutions to business issues. Our expertise is wide ranging, from engineering, information, health and social sciences, to business, arts and education - and we’re national leaders in work based learning solutions.",
    "img2": "http://ielts.progmic.com/images/uni/thumb/1340410005.jpg"
  },
  {
    "url2": "http://ielts.progmic.com/app/i_UNIVERSITYOFSCOTLAND.html",
    "title": "UNIVERSITY OF SCOTLAND ",
    "img": "http://ielts.progmic.com/images/uni/1340410189.jpg",
    "url": "http://ielts.progmic.com/app/UNIVERSITYOFSCOTLAND.html",
    "desc": " Founded in 1451, Glasgow is the fourth-oldest university in the English-speaking world. Over the last five centuries and more, we’ve constantly worked to push the boundaries of what’s possible. We’ve fostered the talents of seven Nobel laureates, one Prime Minister and Scotland’s inaugural First Minister. We’ve welcomed Albert Einstein to give a lecture on the origins of the general theory of relativity. Scotland’s first female graduates completed their degrees here in 1894 and the world’s first ultrasound images of a foetus were published by Glasgow Professor Ian Donald in 1958\. In 1840 we became the first university in the UK to appoint a Professor of Engineering, and in 1957, the first in Scotland to have an electronic computer. All of this means that if you choose to work or study here, you’ll be walking in the footsteps of some of the world’s most renowned innovators, from scientist Lord Kelvin and economist Adam Smith, to the pioneer of television John Logie Baird.",
    "img2": "http://ielts.progmic.com/images/uni/thumb/1340410189.jpg"
  }
] 
```

您可以将 JSON 复制并粘贴到文件中，以各种编码保存它，然后查看您的代码发生了什么。UTF-8 应该是要走的路。

# php - 服务器如何在客户端触发事件？

> ID：11177664
> 
> 赞同：0
> 
> 时间：2012-06-24T13:03:01.507
> 
> 标签：php

服务器如何在客户端触发事件？例如，当您收到即时消息时，Gmail 中如何出现弹出窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:07:23.877

您可以使用[Ajax](https://en.wikipedia.org/wiki/Ajax_%28programming%29)或[WebSockets](https://en.wikipedia.org/wiki/WebSocket)联系服务器，可能与[长轮询](https://en.wikipedia.org/wiki/Long_polling#Long_polling)相结合以获得更快的响应时间（以保持连接打开为代价）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T13:06:19.523

您可以使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)来实现类似的效果。

AJAX 使用 Javascript 代码定期和静默地从服务器请求数据。然后，Javascript 可能会使用这些数据来执行某些操作。

# linux - 启动新编译的 linux 内核

> ID：11177670
> 
> 赞同：1
> 
> 时间：2012-06-24T13:03:38.950
> 
> 标签：linux, linux-kernel

我已经开始阅读 Essential Linux Device Drivers 这本书。我正在遵循编译和引导到新内核的过程。但是我无法启动到新编译的内核 - 我在 grub 中选择了新内核，然后..nothing...屏幕保持不变。

这是我正在采取的步骤，如书中所述（我使用的是内核 2.6.24，因为这是本书所基于的） -

*   cd /usr/src/linux-2.6.24 （我下载的内核的基本目录）
*   打扫干净
*   cp arch/x86/configs/i386_defconfig .config
*   制作 bzImage cp arch/x86/boot/bzImage /boot/vmlinuz

这本书说'你可能需要提醒你的引导加载程序新的引导映像的到来。如果您使用的是 GRUB 引导加载程序，它会自动解决这个问题。

好吧，就我而言，它并没有自动解决，因为在 GRUB 中没有选择此内核的选项。所以我通过在终端中输入 update-grub 手动完成。这也不起作用。但是，一旦我将文件名从 vmlinuz 更改为 vmlinuz-2.6.24 并输入 update-grub ，它就会被选中。所以在这本书的第 11 页上，似乎已经遗漏了很多东西......

这本书说然后重新启动机器。

不管怎样，我现在可以在 GRUB 中选择这个内核，但是正如我上面所说的，它不能正常启动，屏幕只是一片空白，永远不会改变。所以我错过了什么吗？我完全按照书中的说明进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:54:07.310

大多数自动 grub 设置都包含内核选项，用于隐藏内核尝试引导时生成的消息。例如：

```
/boot/vmlinuz-x.x.x.x-generic root=UUID=something ro quiet splash 
```

在您希望启动的内核的 grub 菜单行上，按“e”临时编辑它，并删除诸如 quiet 和 splash 之类的选项（但保留 ro）。

然后启动临时修改的行，并查看进度消息以了解启动失败的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:25:33.220

默认配置可能需要一个[initrd](http://en.wikipedia.org/wiki/Initrd)（例如，因为文件系统和根设备需要它们的驱动程序，来自模块，这是*initrd*提供的）。

你可以为你的特定硬件适当地配置你的内核（小心地启用内核，而不是模块内的基本驱动程序），或者使用一个过程来构建一个带有 initrd 的内核包。

您应该找到适合您的 linux 发行版和习惯的程序，例如类似[this](http://www.howtoforge.com/kernel_compilation_debian_etch)或[that](https://help.ubuntu.com/community/Kernel/Compile)的程序。我在 Debian 上使用：

```
time fakeroot make-kpkg -j2 --initrd --revision=3.4.2 --append-to-version=-amd64 binary 
```

# ruby-on-rails - 搜索功能失败是因为它引用了错误的控制器动作？

> ID：11177675
> 
> 赞同：0
> 
> 时间：2012-06-24T13:03:50.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3, full-text-search, sunspot

我的太阳黑子搜索功能（sunspot_rails gem）在我的索引视图中工作得很好，但是当我将它复制到我的显示视图时，我的搜索中断了......

**意见/供应商产品/show.html.erb**

```
<%= form_tag supplierproducts_path, :method => :get, :id => "supplierproducts_search" do %>
  <p>
    <%= text_field_tag :search, params[:search], placeholder: "Search by SKU, product name & EAN number..." %>
  </p>
  <div id="supplierproducts"><%= render 'supplierproducts' %></div>
<% end %> 
```

**资产/javascripts/application.js**

```
$(function () {
  $('#supplierproducts th a').live('click',
    function () {
      $.getScript(this.href);
      return false;
    }
  );

  $('#supplierproducts_search input').keyup(function () {
    $.get($("#supplierproducts_search").attr("action"), $("#supplierproducts_search").serialize(), null, 'script');
    return false;
  });
}); 
```

**意见/供应商产品/show.js.erb**

```
$('#supplierproducts').html('<%= escape_javascript(render("supplierproducts")) %>'); 
```

**意见/supplierproducts/_supplierproducts.hmtl.erb**

```
<%= hidden_field_tag :direction, params[:direction] %>
<%= hidden_field_tag :sort, params[:sort] %>
<table class="table table-bordered">
  <thead>
    <tr>
      <th><%= sortable "sku", "SKU" %></th>
      <th><%= sortable "name", "Product name" %></th>
      <th><%= sortable "stock", "Stock" %></th>
      <th><%= sortable "price", "Price" %></th>
      <th><%= sortable "ean", "EAN number" %></th>
    </tr>
  </thead>
    <% for supplierproduct in @supplier.supplierproducts %>
  <tbody>
    <tr>
      <td><%= supplierproduct.sku %></td>
      <td><%= supplierproduct.name %></td>
      <td><%= supplierproduct.stock %></td>
      <td><%= supplierproduct.price %></td>
      <td><%= supplierproduct.ean %></td>
    </tr>
  </tbody>
  <% end %>
</table> 
```

**控制器/supplierproducts_controller.rb**

```
class SupplierproductsController < ApplicationController

helper_method :sort_column, :sort_direction

  def show
    @supplier = Supplier.find(params[:id])
    @search = @supplier.supplierproducts.search do
      fulltext params[:search]
    end
    @supplierproducts = @search.results
  end
end

private

  def sort_column
    Supplierproduct.column_names.include?(params[:sort]) ? params[:sort] : "name"
  end

  def sort_direction
    %w[asc desc].include?(params[:direction]) ?  params[:direction] : "asc"
  end 
```

**模型/供应商产品.rb**

```
class Supplierproduct < ActiveRecord::Base
  attr_accessible :ean, :name, :price, :sku, :stock, :supplier_id
  belongs_to :supplier

  validates :supplier_id, presence: true

  searchable do
    text :ean, :name, :sku
  end
end 
```

访问 show.html.erb 工作得很好。日志显示：

```
Started GET "/supplierproducts/2" for 127.0.0.1 at 2012-06-24 13:44:52 +0200
Processing by SupplierproductsController#show as HTML
  Parameters: {"id"=>"2"}
  Supplier Load (0.1ms)  SELECT "suppliers".* FROM "suppliers" WHERE "suppliers"."id" = ? LIMIT 1  [["id", "2"]]
  SOLR Request (252.9ms)  [ path=#<RSolr::Client:0x007fa5880b8e68> parameters={data: fq=type%3ASupplierproduct&start=0&rows=30&q=%2A%3A%2A, method: post, params: {:wt=>:ruby}, query: wt=ruby, headers: {"Content-Type"=>"application/x-www-form-urlencoded; charset=UTF-8"}, path: select, uri: http://localhost:8982/solr/select?wt=ruby, open_timeout: , read_timeout: } ]
  Supplierproduct Load (0.2ms)  SELECT "supplierproducts".* FROM "supplierproducts" WHERE "supplierproducts"."id" IN (1)
  Supplierproduct Load (0.1ms)  SELECT "supplierproducts".* FROM "supplierproducts" WHERE "supplierproducts"."supplier_id" = 2
  Rendered supplierproducts/_supplierproducts.html.erb (2.2ms)
  Rendered supplierproducts/show.html.erb within layouts/application (3.3ms)
  Rendered layouts/_shim.html.erb (0.0ms)
  User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'zMrtTbDun2MjMHRApSthCQ' LIMIT 1
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 278ms (Views: 20.6ms | ActiveRecord: 0.6ms | Solr: 252.9ms) 
```

但是当我输入搜索时它会中断。日志显示：

```
Started GET "/supplierproducts?utf8=%E2%9C%93&search=a&direction=&sort=&_=1340538830635" for 127.0.0.1 at 2012-06-24 13:53:50 +0200
Processing by SupplierproductsController#index as JS
  Parameters: {"utf8"=>"✓", "search"=>"a", "direction"=>"", "sort"=>"", "_"=>"1340538830635"}
  Rendered supplierproducts/_supplierproducts.html.erb (2.4ms)
  Rendered supplierproducts/index.js.erb (2.9ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (undefined method `supplierproducts' for nil:NilClass):
    10:       <th><%= sortable "ean", "EAN number" %></th>
    11:     </tr>
    12:   </thead>
    13:     <% for supplierproduct in @supplier.supplierproducts %>
    14:   <tbody>
    15:     <tr>
    16:       <td><%= supplierproduct.sku %></td>
  app/views/supplierproducts/_supplierproducts.html.erb:13:in `_app_views_supplierproducts__supplierproducts_html_erb___2251600857885474606_70174444831200'
  app/views/supplierproducts/index.js.erb:1:in `_app_views_supplierproducts_index_js_erb___1613906916161905600_70174464073480'

  Rendered /Users/Computer/.rvm/gems/ruby-1.9.3-p194@myapp/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (33.3ms)
  Rendered /Users/Computer/.rvm/gems/ruby-1.9.3-p194@myapp/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.9ms)
  Rendered /Users/Computer/.rvm/gems/ruby-1.9.3-p194@myapp/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (39.7ms) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:14:08.667

从您粘贴的日志中，搜索表单看起来正在点击`index`，而不是`show`，并且该操作未设置`@supplier`。

# java - 一个文件中的两个公共类java

> ID：11177676
> 
> 赞同：17
> 
> 时间：2012-06-24T13:04:04.687
> 
> 标签：java

好的，这可能是java中的小孩问题。我们不能在一个文件中定义两个公共类。但是，在 SCJP 学习指南一书中的一个例子中，提到了这个例子：

```
public abstract class A{
    public abstract void show(String data);
}

public class B extends A{
    public void show(String data){
        System.out.println("The string data is "+data);
    }
    public static void main(String [] args){
        B b = new B();
        b.show("Some sample string data");
    }
} 
```

当我将其复制粘贴到 netbeans 中时，立即引发编译错误，我应该在单独的文件中提到公共类 A。SCJP 学习指南中的那个例子真的错了吗？同样在一些模拟测试中，我发现许多具有这种模式的问题，但在所有选项中都没有提到编译器错误。在这里发愁

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T13:05:22.813

是的，一个文件中不允许有 2 个顶级公共课程

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-08T22:48:58.673

好吧，如果一个人如此挑剔：您可以在同一个文件中使用 public 修饰符定义多个类，即使用静态嵌套（内部）类。像这样：

文件 -> Test.java

```
public class Test {

    public static class SomeNestedClass {

    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-09T19:39:36.853

是的，您可以在同一个文件中有两个类。您可以通过从两个类名中删除公共访问修饰符来拥有它们，如下所示，

```
abstract class A{
    public abstract void show(String data);
}

class B extends A{
    public void show(String data){
        System.out.println("The string data is "+data);
    }
    public static void main(String [] args){
        B b = new B();
        b.show("Some sample string data");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:37:19.033

您可以在一个文件中创建 2 个公共类，在一个包含它们的类中。

如果您不需要对容器类的任何引用，还建议为它们添加“静态”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-15T16:08:00.133

您可以将两个公共类放在一个文件中，例如在文件中`Circle.java`：

```
public class Test {
    public static void main(String args[]) {
        double cir = Circle.findCircumference(7.5);
        System.out.print("Circumference of circle=" + cir);
    }
}
public class Circle {
    public static double findCircumference(double radius) {
        return 2 * Math.PI * radius;
    }
} 
```

如果你然后运行`javac Circle.java`，你会得到一个错误：

```
Circle.java:1: error: class Test is public, should be declared in a file named Test.java
public class Test {
       ^
1 error 
```

但是，如果您使用 运行它`java Circle.java`，那么它将起作用。为什么？可能是因为 java 命令，从 java 11（见[这里](https://openjdk.java.net/jeps/330)）开始，也可以运行单个源文件程序。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-24T13:40:23.697

想象一下，您*可以*将两个公共类放在一个文件中，然后考虑编译器的工作：它必须从您的 .java 文件构建一个 .class 文件，该文件恰好代表一个类（否则 .class 结尾将没有任何意义）。

JAVA 编译器的工作方式将简单地创建一个带有文件名的 .class 文件，并在给定文件中搜索带有文件名的类——所以这取决于你的文件名，哪个类将被正确编译哪个不会。

长话短说：**不，您不能将两个公共类放在一个文件中**，因为编译器无法正确处理。

（编辑：当然可以在与您的文件同名的一个公共类中定义新类。）

# iphone - 带有特定 UITabBarController 选项卡/视图的 popToViewController

> ID：11177677
> 
> 赞同：0
> 
> 时间：2012-06-24T13:04:14.503
> 
> 标签：iphone, ios, uitabbarcontroller, poptoviewcontroller

我正在使用 popToViewController 方法弹出到视图控制器。我试图实现的是弹出到 UITabBarController 的特定索引。

```
NSArray *viewArrays = [self.navigationController viewControllers]; 
```

所以我的视图层次结构是；

```
<LoginViewController: 0x6b75850>,
<UITabBarController: 0x6ba0b50>,
<RequestViewController: 0x684fe90>,
<ApplyViewController: 0x6845790> 
```

以下代码确实会弹出到我的 UITabBarController，但由于我在我的 UITabBarController 的第三个视图上，它会弹回第三个视图

```
[[self navigationController] popToViewController:[self.navigationController.viewControllers objectAtIndex:1]  animated:YES]; 
```

我想要的是弹出到我的 UITabBarController 的第二个视图。

**编辑（答案）**

如前所述，我们不推送或弹出。因此，为了收集您的 tabBarController，您可以使用；

```
UITabBarController *myTabController = [self.navigationController.viewControllers objectAtIndex:indexOfYourTabBarControllerInYourNavigationController];
myTabController.selectedIndex = indexToGo; 
```

或者如果你在你的 tabBarController 视图之一；

```
self.tabBarController.selectedIndex = indexToGo; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:07:38.017

在 UITabBarController 中，您不会弹出和推送，如果您想转到第二个视图，则可以设置选定的索引

像这样

```
yourTabController.selectedIndex = 1; 
```

或者如果当前视图控制器是 tabBarController 的一部分

```
self.tabBarController.selectedIndex = 1; 
```

# ios - 为什么视图控制器的头文件中需要声明动作方法？

> ID：11177679
> 
> 赞同：0
> 
> 时间：2012-06-24T13:04:20.867
> 
> 标签：ios, uiviewcontroller, header-files, ibaction

我注意到，如果我在视图控制器的头文件中删除操作方法声明，该操作仍然有效，因为它是在实现文件中实现的。为什么需要在视图控制器的头文件中定义方法声明？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:05:54.960

这样您就不会从编译器收到未找到选择器的警告，

在 ARC 环境中，从 .h 文件中删除函数声明将导致错误而不是警告 ( `No visible @interface for 'YourClass' declares the selector 'YourMethod'`)

但是，如果您从 xib 连接您的方法（`UIButton`例如操作），那么您可以从接口文件中删除该函数，您将不会收到任何错误或警告

请注意，Objective-c 没有纯私有方法。

# algorithm - 您是否曾经使用非二进制信号量来解决非学术任务？

> ID：11177680
> 
> 赞同：1
> 
> 时间：2012-06-24T13:04:22.990
> 
> 标签：algorithm, data-structures

这可能很愚蠢，但我正在寻找所谓的“现实生活”软件示例，它使用计数或大于 1 的信号量。

换句话说，请不要保镖、图书馆员或厕所的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:04:02.307

我想我已经将类似的东西用于“读/写”锁。也就是说，我希望最多允许同时有 N 个读者，并且在没有活跃读者的情况下一次只允许一个作者。

因此任何读取线程都会锁定信号量并增加读取计数。如果读取计数小于 N，则锁定成功，读取器可以继续。如果没有，锁会导致读取线程 sched_yield。

如果我想锁定写作，我将计数设置为 N 以便没有更多的读者可以锁定 - 例如，当他们尝试锁定时，他们都开始睡觉。编写器线程不断尝试锁定读取信号量。每次读者发布时，作者都会再次增加 N，直到没有更多的读者。

然后写锁成功，写操作发生，读信号量被设置回零，以便读线程可以继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:13:56.397

无限计数的信号量（Win32 中的 LONG_MAX）用于实现发送者-消费者方案。这样的信号量是用 max 创建的。计数 = LONG_MAX (0xFFFFFF ...)。发送者（资源创建者）创建一些资源并释放信号量。接收者（资源消费者）等待这个信号量，当发送者释放这个信号量时恰好唤醒一次。关于其他大于 1 的值，我从未使用过它们。

# c++ - Ackermann 函数在 C++ 中无法正常工作

> ID：11177681
> 
> 赞同：4
> 
> 时间：2012-06-24T13:04:30.707
> 
> 标签：c++, ackermann

在我的阿克曼函数的家庭工作中，我解决了以下问题

```
int main()
{
    int y = ack(4,1);
    cout<<"ans is :::: "<< y;

    getch();
    return 0;
}

int ack(int m, int n)
{
    if(m == 0)
    {
        return n+1; 
    }
    else if(m > 0 && n == 0)
    {
        return ack(m-1,1);  
    }
    else if(m > 0 && n>0)
    {
        int x = ack(m,n-1);
        return ack(m-1,x);
    }
    else 
    {
        cout<< "did not worked properly";
    }   
} 
```

这个函数在 m=3 和 n = 10 的低值下效果很好但是当我给 m = 4/above 或 n = 15/above 时，这不起作用。我没有输出。程序直接退出，没有任何警告、错误或结果。

请一些人告诉我发生这种情况的原因以及我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T13:11:42.017

这个数字`(4, 15)`是如此之大，无法计算和表示。查看[数值表](http://en.wikipedia.org/wiki/Ackermann_function)。例如`(4, 2)`，比可观测宇宙中的粒子数量大几个数量级！

我有[类似的作业](https://stackoverflow.com/questions/3241954/performance-of-net-function-calling-c-f-vs-c)。关键是要向您展示某些东西可以疯狂地增长。与阿克曼函数相比，人类难以理解指数增长。

考虑大数字可以得出有趣的结论。想象一下，您正沿着一条`2^2^65536 - 3` 米长的道路行走（即`ackermann(4, 3)`）。假设平均人体大致等于`1m^3`它拥有`10^10^70` [量子态](http://www.youtube.com/watch?v=8GEebx72-qs&feature=plcp)。沿着这条路走下去，你会遇到你的分身——在量子水平上的精确分身！所以他们会有完全相同的想法，同样的伤疤，在同一个地方发痒的肘部。他们甚至会消化同样的食物。你会遇到数十亿的分身。对我来说，这真的很令人兴奋。

# android - Android的布局格式

> ID：11177683
> 
> 赞同：0
> 
> 时间：2012-06-24T13:04:52.003
> 
> 标签：android, layout, formatting

我对 Android 场景还很陌生，在为我的程序创建 UI 时遇到了麻烦。

由于我无法发布我的目标的图片，我将描述我的实际计划：

*   我的 Ui 应该分为 3 个部分。而上半部分占据了屏幕的 25%。- 中间部分占60%，底部部分占15%。
*   中间部分分为2列。第一列占 70%，第二列占 30%。
*   在顶部我只想添加一些按钮。
*   在左栏的中间（占 70%）我想添加一个 SurfaceView。
*   在右侧，我想到了一些带有按钮的面板来浏览我的应用程序。
*   底部应该是空的。

所以我首先想知道，如何完成缩放？

我想到了 LinearLayout 权重，但我想不出正确的数字。

使用 RelativeLayout 我不确定如何正确填充 SurfaceView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:43:52.780

尝试使用嵌套*的 LinearLayouts*

```
<LinearLayout ...>
    ....
    <LinearLayout...> 
```

对于重量部分，我曾经使用该属性如下

```
 <EditText
        ...
        android:layout_weight="1"
        .../>

<EditText
        ...
        android:layout_weight="2"
        ... />

<EditText
        ...
        android:layout_weight="2"
        ... /> 
```

您还需要查看[android:orientation 属性](http://developer.android.com/reference/android/widget/LinearLayout.html#attr_android%3aorientation) 。

您可能还想使用[RelativeLayout](http://developer.android.com/reference/android/widget/RelativeLayout.html)

# c++ - 在自己的标头中使用现有标头

> ID：11177684
> 
> 赞同：0
> 
> 时间：2012-06-24T13:04:51.873
> 
> 标签：c++

我正在尝试编写头文件。我可以编写简单的标题，例如 add(int x, y) return x+y; . 但是当我试图变得更复杂时，视觉工作室给出了错误。我猜错误与`<fstream>`. 它总是显示

> “错误 C2065：‘fstream’：未声明的标识符”。

我的 cpp 文件的第一行是`void get_int(fstream& stream, int offset)`（除了`#include<fstream>`）和 .h 文件的第一个定义是

```
#ifndef GET_H
#define GET_H

int get_int(fstream& stream, int offset);

#endif 
```

它是这样的。这段代码有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:29:06.673

你必须这样做：

```
#ifndef GET_H
#define GET_H

#include <fstream>

int get_int(std::fstream& stream, int offset);

#endif 
```

注意`#include <fstream>`和 添加的`std::`前缀。资格是必需的，因为所有 C++ 标准库...事物...都在该命名空间中定义。您不应该在标头中添加`using namespace std;`or `using std::fstream;`，因为这会污染全局名称空间并破坏存在的目的`namespace std`：包括您的标头在内的人不希望将内容拉入全局名称空间，这可能与其他人使用的命名冲突.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T13:16:08.193

```
#include <fstream> 
```

也必须在您的头文件中。它进入包含翻译单元，但它仍然需要查看它，因为在 .cpp 文件内部展开时，它最终位于 fstream 的#include 之上。这样，您可以确保该顺序不会影响编译，因为包含保护已到位。它不会尝试将其扩展两次。此外，`#pragma once`拯救小猫。

您的订购给出相同错误的原因是因为您的标题缺少“使用 std::goeshere”等。

**代码示例作为注释中的后续内容（防止命名空间污染）：**

```
#ifndef GET_H
#define GET_H

#include <fstream>
using std::fstream;

int get_int(fstream& stream, int offset);

#endif 
```

或（所有体面的编译器都应该支持#pragma once）

```
#pragma once

#include <fstream>
using std::fstream;

int get_int(fstream& stream, int offset); 
```

# iphone - 在我的应用程序中阅读 iphone 消息收件箱

> ID：11177685
> 
> 赞同：0
> 
> 时间：2012-06-24T13:04:57.300
> 
> 标签：iphone, objective-c

我在我的应用程序中阅读 iphone 消息收件箱时遇到问题，我使用了以下代码：

```
- (IBAction) read{

    NSString *text = @"";

    sqlite3 *database;
    if(sqlite3_open([@"/var/root/Library/SMS/sms.db" UTF8String], &database) == SQLITE_OK) {
        sqlite3_stmt *statement;

        const char *sql4 = "SELECT * from message ORDER BY rowid DESC";  // TODO: different for iOS 4.* ???
        const char *sql5 = "SELECT * from message ORDER BY rowid DESC";

        NSString *osVersion =[[UIDevice currentDevice] systemVersion];         
        if([osVersion hasPrefix:@"5"]) {
            // iOS 5.* -> tested
           sqlite3_prepare_v2(database, sql5, -1, &statement, NULL);
        } else {
            // iOS != 5.* -> untested!!!
            sqlite3_prepare_v2(database, sql4, -1, &statement, NULL);
        }

        // Use the while loop if you want more than just the most recent message
        while (sqlite3_step(statement) == SQLITE_ROW) {
            if (sqlite3_step(statement) == SQLITE_ROW) {
                char *content = (char *)sqlite3_column_text(statement, 0);
                text = [NSString stringWithCString: content encoding: NSUTF8StringEncoding];
                sqlite3_finalize(statement);
            }
        }

        sqlite3_close(database);
    }

    showsms.text=text;
    NSLog(@"test");
} 
```

但我无法访问“SMS.DB”，我在互联网上搜索过，但没有人有这样的问题，请任何人对我的问题有任何想法，写下我的代码或告诉我他的方式。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:27:59.910

应用沙盒不允许您访问该文件。即使您确实让它工作，Apple 也不会允许它进入商店。

# javascript - 相同函数的回调

> ID：11177687
> 
> 赞同：5
> 
> 时间：2012-06-24T13:05:18.503
> 
> 标签：javascript, jquery

我想多次调用一个函数，每次都为其提供不同的输入，但是我试图确保在前一个函数调用完成后触发下一个函数调用。

例如：

```
func(1,2);
func(9,3);
func(6,4);
func(5,6); 
```

我已经看到回调被编码为；

```
function1(someVariable, function() {
          function2(someOtherVariable);
        }); 
```

但这仅在调用第二个函数时有效，我尝试链接函数，但这仅允许我运行一组函数。

有没有办法可以将某种回调应用到同一个函数？

注意：：该函数只是添加了一个类。

```
func(x, y){
   $("#block").addClass("class");
    setTimeout(function(){ 
         $("#block").removeClass("class");
     },1000);
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:21:29.883

```
function func(x,y,callback) {
    console.log(x,y);
   $("#block").addClass("class");
    setTimeout(function(){ 
         $("#block").removeClass("class");
         callback();
     },1000);
};

var params = [
    [1,2],
    [9,3],
    [6,4],
    [5,6]
], i = 0;

function fn() {
    if( params[i] ) {
        func( params[i][0], params[i++][1], fn );
    }
}

fn(); 
```

只要还有参数，就会去。

小提琴：http: [//jsfiddle.net/sabithpocker/dQX6s/](http://jsfiddle.net/sabithpocker/dQX6s/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T13:15:40.063

`func`您可以使用附加参数修改函数，该参数表示函数成功时执行的回调：

```
func(x, y, finished) {
    $("#block").addClass("class");
    window.setTimeout(function() {
        $("#block").removeClass("class");
        finished();
    }, 1000);
}; 
```

然后链接调用：

```
func(1, 2, function() {
    func(9, 3, function() {
        func(6, 4, function() {
            func(5, 6, function() {
                alert('all done');
            });
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T14:32:11.253

我认为我们应该使用 jquery 中可用的 promise 模式来解决这个问题，它允许在没有复杂语法的情况下链接回调，请参阅下面的伪代码以供参考

```
function func(value1, value2) {
            var deffered = jQuery.Deferred();
            alert(value1);
            deffered.resolve();
            return deffered;
        }

jQuery.when(func(1, 2)).then(func(2, 3)).then(func(3,4)); 
```

# android - 功能齐全的android数据网格

> ID：11177697
> 
> 赞同：8
> 
> 时间：2012-06-24T13:06:18.373
> 
> 标签：android, datagrid, android-tablelayout

由于使用表格布局构建动态表格对我来说还不够。我想知道我是否可以获得这样的数据网格视图（来自[MyData](https://play.google.com/store/apps/details?id=com.portofarina.mydata&feature=search_result)应用程序）

![在此处输入图像描述](../Images/c003dcbbf6ec2543411bb47c48d66c4c.png)

特点是：

1.  支持垂直滚动
2.  支持水平滚动
3.  交互式表格单元格（例如用于插入数据）
4.  可移动的列（长按列然后向左或向右移动）
5.  对列进行排序

是否有任何开源或商业等价物？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-20T18:34:29.403

Try this. [Basic Android spreadsheet](https://github.com/dennis-sheil/android-spreadsheet). Hope this may work.

# javascript - 带有 WordPress 的 jQuery 热键 下一篇文章

> ID：11177699
> 
> 赞同：0
> 
> 时间：2012-06-24T13:06:30.343
> 
> 标签：javascript, jquery, wordpress

我正在使用 WordPress 中的热键功能在项目中创建键盘导航。虽然键盘功能可以正常工作，但由于某种原因，它只会滚动到下一个项目，而不是转到上一个项目。当我用鼠标物理单击箭头时，一切正常，但由于某种原因，使用键盘时它不起作用。

这是一个项目的链接

[http://geoffgeoff.com/dialect-skateboards-identity/](http://geoffgeoff.com/dialect-skateboards-identity/)

这是我的js代码

```
$(document).ready(function () {

    // This uses the Hotkeys jQuery plugin. See below for
    // the native jQuery alternative.
    $(document).bind('keydown', 'left', function() {
        var url = $('#left_arrow a').attr('href');
        if (url) {
            window.location = url;
        }
    });
    $(document).bind('keydown', 'right', function() {
        var url = $('#right_arrow a').attr('href');
        if (url) {
            window.location = url;
        }
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:17:48.057

您不能以这种方式分配密钥。实际上，您将这两个函数绑定到 global-keydown-event，第二个函数会覆盖第一个函数。在访问您的网站时尝试按任意键 - 每个键都会加载下一篇文章。

正确的方法是检测函数内部按下的键，然后触发点击正确的锚元素：

```
$(document).bind('keydown', function (evnt) {

    var elem = evnt.keyCode === 37 // left arrow
        ? '#left_arrow a'
        : evnt.keyCode === 39 // right arrow
        ? '#right_arrow a'
        : false;

    if ( !elem ) {
        return;
    }

    $(elem).trigger('click');

}); 
```

如果 keyCode 为 37，则按下左箭头，如果 keyCode 为 39，则按下右箭头。通过使用三元运算符，如果既没有单击左键也没有单击右键，可以将 false 分配给 elem 变量。在这种情况下，函数返回 false 并且没有任何反应。

否则，左锚或右锚的点击事件被触发。

# c# - 通过后台服务下载缩略图图像并将本地图像路径存储到数据库然后显示在列表框中

> ID：11177702
> 
> 赞同：0
> 
> 时间：2012-06-24T13:06:56.473
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我面临的情况是我在服务器上有带有缩略图的视频列表，我需要在我的 wp7 应用程序中显示为列表。

因此，我正在获取具有视频所有属性（如名称、专辑名称、videoUrl、thumbnailUrl）的视频的 Json obects 集合。这个列表我保存在数据库中。在此之后，我必须从相应的 url 下载缩略图并保存在隔离存储中，并将本地路径保存到数据库。

之后将列表从数据库绑定到列表框。

这种方法正确吗？如果是，那么我需要运行后台服务来下载图像，那么在下载了几张图像并将列表从数据库绑定到列表框并重复该过程后，我应该如何更新数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T03:33:35.130

不，这种方法可以改进。如果您的服务具有缩略图的 URI（例如：thumbnailUrl = " [http://www.gravatar.com/avatar/5a058d23828ab74e93dee0b04ed0a7a1?s=128&d=identicon&r=PG](http://www.gravatar.com/avatar/5a058d23828ab74e93dee0b04ed0a7a1?s=128&d=identicon&r=PG) "）。然后您可以在 Image 控件中使用该链接。

```
<ListBox ItemsSource="{Binding VideoInfos}">
    <ListBox.ItemTemplate> 
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding ThumbnailUrl}" Width="90"/>
                <TextBlock Text="{Binding Name}"/>
            </StackPanel> 
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

假设您有一个视图模型，其属性`VideoInfos`为 type`ObservableCollection<VideoInfo>`并且 VideoInfo 对象具有两个属性`Name`和`ThumbnailUrl`. 这两个属性都可以是字符串。从您的服务中获取您的信息并填充此集合。除非您不想在下次用户打开应用程序时再次加载它，否则无需将此信息放入数据库中。

# algorithm - 数据结构之谜

> ID：11177703
> 
> 赞同：8
> 
> 时间：2012-06-24T13:07:06.623
> 
> 标签：algorithm, puzzle

我在编码比赛中 遇到了这个`puzzle`问题[ ]。`related to data structure`

有一颗树的星球（真正的树不是树的数据结构！！）。它有数十亿甚至数万亿棵树。国王命令使用碳测年法找出所有树木的年龄中位数（以年和整数为单位）。( `Method does not matter.`) 注意：中位数是排序后的数字列表中的“中间数字”。

**限制条件：**
`1.`已知最古老的树有 2000 年的历史。
`2.`他们有一台机器，可以存储从 -infinity 到 +infinity 范围内的整数。
`3.`但是一次可以存储在内存中的这种整数的数量是 100 万个。

所以，一旦你存储了 100 万个整数来存储下一个整数，你必须删除已经存储的一个。
因此，当他们继续计算树木的年龄时，他们必须以某种方式跟踪中位数。
他们怎么能做到这一点？

**我的方法**
使用外部排序的变体对年龄进行分块排序并将它们写入文件。
应用 k 路合并[对于块]。
上述方法的问题是它需要对文件进行两次扫描。

我可以想到**另一种**使用信息的方法`The oldest tree is known to be 2000 years old.`
我们不能采用`count array`[ `as range of ages of tree is fixed`] 吗？

我想知道**有没有更好的方法？**
是否存在不需要将数据存储在文件中的任何方法？[ `where only main memory is sufficient?`]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T13:23:54.360

您可以通过仅存储 2001 个整数来做到这一点。创建一个包含不同可能年龄的数组

```
ages[2001] // [0..2000] 
```

当你数一棵树时

```
ages[thisAge]++ 
```

然后计算中位数是微不足道的。您似乎在您提到的第二种方法中遇到了这个解决方案，但是您说我想知道有没有更好的方法？

> 是否存在不需要将数据存储在文件中的任何方法？[只有主内存就足够了吗？]

我不明白你为什么问是否存在任何主内存足够的方法。2001 整数数组不适合主内存吗？

使用上述方法，您可以填充计数数组，然后通过迭代计数来计算中位数，同时保持总和。当您的总和达到树木总数的一半时，您就有了中位数。这需要遍历所有的树进行计数，再加上遍历某个数字 <=2001 的计数数组的一部分。所以这是 O(n)。相反，您可以随时使用此数组跟踪中位数，但这并不会真正改善解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T13:37:00.740

您推荐的方法（2001 年的数组）是 O(n)，每棵树有一个快速操作，所以这是最优的。

嗯，几乎是最优的。在计数过程中的某个时刻，剩余树的数量将不足以改变结果。例如，如果我数一半 + 1 棵树，并且所有树都正好有 100 年的历史，那么我就有答案：100 年。

但是，如果树木的年龄分布得很好，那么所需树木的数量将接近总数。

# ruby-on-rails - Rails 应用程序在部署到 Heroku 时崩溃，但日志声称一切正常

> ID：11177715
> 
> 赞同：0
> 
> 时间：2012-06-24T13:08:31.823
> 
> 标签：ruby-on-rails, heroku

好的，所以我将一个非常基本的应用程序部署到 Heroku。我已经按照[教程](https://devcenter.heroku.com/articles/rails3)进行了这封信。关于这个部署的一切都是教科书，但是当我在 Heroku 上打开该站点时，我收到令人沮丧的模糊消息“我们很抱歉，但出了点问题。”

当我做“heroku ps”时，它说：

```
 Process  State       Command                               
    -------  ----------  ------------------------------------  
    web.1    up for 13m  bundle exec rails server thin -p $.. 
```

当我运行“heroku 日志”时，我会收到通常的弃用消息，然后是下面的文本。但我在这些日志中没有看到任何会导致应用程序崩溃的危险信号。我错过了什么吗？

```
 2012-06-24T12:50:50+00:00 heroku[slugc]: Slug compilation started
    2012-06-24T12:51:25+00:00 heroku[api]: Release v9 created by bd@bendowney.net
    2012-06-24T12:51:25+00:00 heroku[api]: Deploy ff89ee6 by bd@bendowney.net
    2012-06-24T12:51:25+00:00 heroku[web.1]: State changed from up to bouncing
    2012-06-24T12:51:25+00:00 heroku[web.1]: State changed from bouncing to created
    2012-06-24T12:51:25+00:00 heroku[web.1]: State changed from created to starting
    2012-06-24T12:51:25+00:00 heroku[slugc]: Slug compilation finished
    2012-06-24T12:51:27+00:00 heroku[web.1]: Starting process with command `bundle exec rails server thin -p 37816 -e production`
    2012-06-24T12:51:27+00:00 heroku[web.1]: Stopping all processes with SIGTERM
    2012-06-24T12:51:28+00:00 app[web.1]: Exiting
    2012-06-24T12:51:29+00:00 heroku[web.1]: Process exited with status 0
    2012-06-24T12:51:34+00:00 app[web.1]: => Booting Thin
    2012-06-24T12:51:34+00:00 app[web.1]: => Rails 3.2.5 application starting in production on http://0.0.0.0:37816
    2012-06-24T12:51:34+00:00 app[web.1]: => Ctrl-C to shutdown server
    2012-06-24T12:51:34+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
    2012-06-24T12:51:34+00:00 app[web.1]: => Call with -d to detach
    2012-06-24T12:51:34+00:00 app[web.1]: >> Thin web server (v1.3.1 codename Triple Espresso)
    2012-06-24T12:51:34+00:00 app[web.1]: >> Maximum connections set to 1024
    2012-06-24T12:51:34+00:00 app[web.1]: >> Listening on 0.0.0.0:37816, CTRL+C to stop
    2012-06-24T12:51:35+00:00 heroku[web.1]: State changed from starting to up 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:28:04.137

您是否迁移了数据库（如果有的话）？这是我经常抓到的东西。:-)

```
heroku run rake db:migrate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:15:20.090

问题是我没有显示足够的记录。一旦我跑了`heroku logs -n 2000`（或其他一些大数字），它就向我展示了事情开始时的问题

# vba - 月和日的确切日期差异

> ID：11177717
> 
> 赞同：2
> 
> 时间：2012-06-24T13:08:50.807
> 
> 标签：vba, excel

DateDiff 计算不正确：

```
DateDiff("m", "30/06/2011", "24/06/2012") will return 12 
```

但我需要返回 11，因为真正的差异是 11 个月和 25 天

也许有人对这个问题有具体的解决方案

这对我来说是理想的：11**个月零**25**天**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:48:12.817

这是比上述定制功能更清洁的解决方案。大多数情况下，它使用内置的 DateDiff 函数，但如果它向上取整，则会调整答案。即使第一个日期晚于第二个日期，我的函数也会给您带来差异，并且可以选择添加一些文字说明。

```
Function YearsMonthsDays(Date1 As Date, _
                     Date2 As Date, _
                     Optional ShowAll As Boolean = False, _
                     Optional Grammar As Boolean = True, _
                     Optional MinusText As String = "Minus " _
                     ) As String
Dim dTempDate As Date
Dim iYears As Integer
Dim iMonths As Integer
Dim iDays As Integer
Dim sYears As String
Dim sMonths As String
Dim sDays As String
Dim sGrammar(-1 To 0) As String
Dim sMinusText As String

If Grammar = True Then
    sGrammar(0) = "s"
End If

If Date1 > Date2 Then
    dTempDate = Date1
    Date1 = Date2
    Date2 = dTempDate
    sMinusText = MinusText
End If

iYears = DateDiff("yyyy", Date1, Date2)
Date1 = DateAdd("yyyy", iYears, Date1)
If Date1 > Date2 Then
    iYears = iYears - 1
    Date1 = DateAdd("yyyy", -1, Date1)
End If

iMonths = DateDiff("M", Date1, Date2)
Date1 = DateAdd("M", iMonths, Date1)
If Date1 > Date2 Then
    iMonths = iMonths - 1
    Date1 = DateAdd("m", -1, Date1)
End If

iDays = DateDiff("d", Date1, Date2)

If ShowAll Or iYears > 0 Then
    sYears = iYears & " year" & sGrammar((iYears = 1)) & ", "
End If
If ShowAll Or iYears > 0 Or iMonths > 0 Then
    sMonths = iMonths & " month" & sGrammar((iMonths = 1)) & ", "
End If
sDays = iDays & " day" & sGrammar((iDays = 1))

YearsMonthsDays = sMinusText & sYears & sMonths & sDays
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:22:12.893

你不会用 pure 得到它`DateDiff`。如果你使用这个[定制的函数](http://www.vbaexpress.com/kb/getarticle.php?kb_id=866)，你会得到你想要的结果：

```
0 years, 1 months, 1 days 
```

你也可以用a（最后一个f）来看看这个[`DateDif`](http://www.cpearson.com/excel/datedif.aspx)函数。请注意，当结束月份的天数少于开始月份时，DateDif() 仍然会给出一些可能出乎意料的结果（即负天数）。

# java - java中的URL解码与URL解码php的结果不同

> ID：11177726
> 
> 赞同：1
> 
> 时间：2012-06-24T13:10:41.503
> 
> 标签：java, php, jakarta-ee

我在 php 中制作了简单的加密/解密方法，我正试图转移到 Java

在我的代码中，我从 url 获取值并对其进行 urldecode，然后将其传递给我的解密函数

这在 php 中给出了正确的结果，但在 java 中没有

这是我在 php 中的测试样本

```
urldecode("%9A%DC%CD%E1%DA%E2%D4%EA%C4%E6%9C%DA%D5%AD%CD%DF%E3%E4%C6%DB%A3%95%C4%DC%D2") 
```

这是我在 JAVA 中尝试做的事情

```
java.net.URLDecoder.decode("%9A%DC%CD%E1%DA%E2%D4%EA%C4%E6%9C%DA%D5%AD%CD%DF%E3%E4%C6%DB%A3%95%C4%DC%D2") 
```

我得到的结果完全不同。任何人都可以带我到我搞砸的地方吗？

谢谢

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:14:00.887

考虑改为尝试：

```
java.net.URLDecoder.decode("%9A%DC%CD%E1%DA%E2%D4%EA%C4%E6%9C%DA%D5%AD%CD%DF%E3%E4%C6%DB%A3%95%C4%DC%D2", "UTF-8") 
```

在 JAVA`java.net.URLDecoder.decode(String)`中已弃用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T14:21:42.040

当你只使用

解码（字符串 s）

已弃用，生成的字符串可能会因平台的默认编码而异。相反，使用

解码（字符串 s，字符串编码）

方法来指定编码。它使用特定的编码方案解码 application/x-www-form-urlencoded 字符串。

enc 可以是“UTF-8”、“ISO 8859-1”等......

# android - 在新项目中重用生成的 .so 共享库 Android

> ID：11177730
> 
> 赞同：-1
> 
> 时间：2012-06-24T13:11:20.760
> 
> 标签：android, android-ndk

到目前为止我所做的是：

将我的旧库（libold.so）放在 jni 文件夹中，并创建一个 Android.mk，其中包含：

```
LOCAL_PATH :=$(call my-dir) 

include $(CLEAR_VARS) 
LOCAL_MODULE := libold 
LOCAL_SRC_FILES := libold.so 
include $(PREBUILT_SHARED_LIBRARY) 
```

之后，我运行 ndk-build 并使用 libold.so 创建一个新文件夹 /libs/armeabi。

看起来不错，但是当我运行它时，它可以找到我调用的方法。解决方案是将名称包更改为我之前使用的名称。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:25:59.773

您在本机 .so 中的 JNI_OnLoad 例程针对其解析的方法设置了特定的 Java 包名称。如果您在解析本地方法的类（或多个类）上使用不同的包名称，则 VM 无法找到正确的方法，除非您的 JNI_OnLoad 知道如何区分并正确注册其本地方法。

如何更正这将取决于您首先如何注册本机，但有可能（即使有点复杂）让您的注册过程确定正在为哪个包完成加载并相应地注册方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:23:32.343

您不能在 New Project 中直接使用已编译的库。对于不同的包名称，您的 c 文件中的相应函数签名将更改。

```
 JNIEXPORT jint JNICALL Java_com_package_class(JNIEnv *d, jobject e, jstring f) { 
//inside function

    } 
```

您需要一个 jar，其中包含编译 so 文件的项目中的类，以调用 so 文件中的本机函数，以便新项目可以访问它。

# php-5.3 - 抽象方法问题

> ID：11177731
> 
> 赞同：0
> 
> 时间：2012-06-24T13:11:33.180
> 
> 标签：php-5.3

```
<?php
abstract class a{
    abstract protected function test();
    function threeDots(){
        return '...';

    }
}
class b extends a{

     protected function test(){
        echo $this->threeDots();
    }
}
$obj = new a();

   $obj->test();
?> 
```

上面的代码给出错误......但不明白为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:15:03.630

此行错误：

`$obj = new a();`

因为你不能创建抽象类的实例。也许，你想写：`$obj = new b();`？

# java - J2me 对等网络是否可行？

> ID：11177734
> 
> 赞同：0
> 
> 时间：2012-06-24T13:11:52.903
> 
> 标签：java, networking, java-me, network-programming

两个 j2me 无线设备（手机）可以使用 gprs 通过 Internet 直接相互通信吗？

我听说这些设备可以快速更改其 IP 并使用动态 NAT……这两个设备是否有可能使用它们的 ip 地址相互连接……而不使用它们之间的专用服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:09:34.580

我知道只有一家电信运营商允许手机使用固定 IP：Nextel。它基于摩托罗拉 iDEN 技术。要启用它，您必须签署特定服务。

# jquery - 带有 jQ uery 拖放的排序列表

> ID：11177735
> 
> 赞同：2
> 
> 时间：2012-06-24T13:11:53.347
> 
> 标签：jquery, drag-and-drop

我需要一个 jQuery 来订购这样的列表：

[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

`CTRL`但是我需要使用关键示例一次移动多个项目。

你知道这个脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:15:27.630

您可能想看看[http://www.myphpetc.com/2009/11/jquery-ui-multiple-draggable-plugin.html](http://www.myphpetc.com/2009/11/jquery-ui-multiple-draggable-plugin.html)

如[jQuery 拖放多个元素中所见](https://stackoverflow.com/questions/8794178/jquery-dragndrop-multiple-elements)

# perl - 在 perl 脚本中获取执行 unix 命令的值

> ID：11177737
> 
> 赞同：0
> 
> 时间：2012-06-24T13:12:12.330
> 
> 标签：perl, unix, command, execute

我正在通过 perl 脚本执行 unix 命令以获取目录的大小。

```
$path = "/dir1/di2/";
system("du -sh $path"); 
```

我怎样才能在我的 perl 脚本中得到结果。

我在用

```
$size = system("du -sh $path");
print $size 
```

但它给出 size=0;

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T13:35:41.420

您也可以使用 来执行此操作`perl`，例如[此处所示](http://www.perlmonks.org/?node_id=168974)。就像是

```
use File::Find;           
find(sub { $size += -s if -f $_ }, $path); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T13:20:23.453

Perl 语法与 Bash 非常相似。反引号您的命令，它的输出将存储在变量中。

```
 my $variable = `command`;
    print $variable; 
```

如果您的命令在多行上有输出，则可以将其分配给数组，例如：

```
 my @files = `ls -l`
    chomp @files; 
```

然后，每个输出行将存储在数组的不同元素中。

如何进行反引号可能会因您的键盘布局而异。在美国布局上，它与波浪号 (~) 的键相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T17:57:21.997

或者您可以将输出重定向到文件句柄并使用它来获取输出。

```
open (FD,"du -hs \"$path\" |");
while (<FD>) {
...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T13:14:59.293

调用`system`返回调用的状态，而不是输出。使用反引号（或`qx`运算符），例如：

```
$size = qx(du -sh $path); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T13:17:20.703

它正在返回命令状态，即成功。

相反，请执行以下操作：

```
$size = `du -sh $path` 
```

（反引号分隔命令）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-10T12:30:49.817

```
#!/bin/perl
$path = "/dir1/di2/";
print(qx(du -sh $path)); 
```

这应该工作！

# c# - XAML 控件在代码隐藏中无法识别

> ID：11177738
> 
> 赞同：3
> 
> 时间：2012-06-24T13:12:21.843
> 
> 标签：c#, xaml, microsoft-metro, winrt-xaml

我有一个奇怪的问题，即 XAML 控件在后面的代码中不可见。这是 XAML 的示例：

```
<ListView Name="lvtest" Grid.Row="2" Grid.ColumnSpan="2" Margin="0,20,0,0" 
              ItemsSource="{Binding Content}" >
    <ListView.ItemTemplate>
        <DataTemplate>     
            <StackPanel>                                
                <WebView Name="contentView" Style="{StaticResource BodyTextStyle}" />
                <TextBlock Name="testtxt" Text="{Binding}" Style="{StaticResource BodyTextStyle}" Foreground="GreenYellow"/> 
```

在后面的代码中：

`this.lvtest`被认可，但是：

`this.contentView`两者`this.testtxt`都不是。

我也试过了`x:Name`。

我显然在这里遗漏了一些明显的东西，我只是看不到什么。

编辑：

澄清一下，文本框控件将用于显示一些基于绑定的格式化文本，但我发现文本是 HTML 格式的（[这](http://msdn.microsoft.com/en-us/library/windows/apps/br211380.aspx)建议使用 WebView 控件）。据我所知，我需要`NavigateToString`使用 WebView 控件，因此不能这样绑定它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T13:17:56.227

您缺少的是 DataTemplate 中定义的元素可能会在页面上出现多次，甚至可以在运行时更改。哪一个应该与该`contentView`领域相关联？没有好的方法来回答这个问题，所以它根本不会创建一个`contentView`字段。

换句话说，您不是在定义页面包含这些元素，而是在声明一个模板，.NET 可以从中创建元素。

如果您让我们知道您尝试使用它的方式，我们或许可以建议另一种方式。

编辑：这样的事情可能对你有用：

```
<WebView Loaded="contentView_Loaded" Style="{StaticResource BodyTextStyle}" /> 
```

然后在代码中：

```
void contentView_Loaded(object sender, EventArgs e)
{
    var contentView = (WebView)sender;
    var dataContext = (YourDataType)contentView.DataContext;
    // do something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T13:17:48.660

它们是隐藏的，因为它们位于模板控件内。

来自[http://social.msdn.microsoft.com/Forums/en/wpf/thread/29ecc8ee-26ee-4331-8f97-35ff9d3e6886](http://social.msdn.microsoft.com/Forums/en/wpf/thread/29ecc8ee-26ee-4331-8f97-35ff9d3e6886)

```
<ListView  Name="listview">

    <ListView.ItemTemplate>

        <DataTemplate>

            <StackPanel Orientation="Horizontal" >

            <TextBlock Name="textYear" Text="{Binding Year}" />

                <TextBlock  Text="  " />

             <TextBlock Name="textDayOffWeek" Text="{Binding DayOfWeek}" />

                </StackPanel>

        </DataTemplate>

    </ListView.ItemTemplate>

    <s:DateTime >1/2/2007</s:DateTime>

    <s:DateTime >1/3/2008</s:DateTime>

    <s:DateTime >1/5/2007</s:DateTime>

    <s:DateTime >1/6/2006</s:DateTime>

</ListView>

    <Button Width="180" Height="30" Content="Find TextBlock in DataTemplate" Click="FindElement" />

    </StackPanel> 
```

在后面的代码中：

```
 private void FindElement(object sender, RoutedEventArgs e)

    {

        // get the current selected item

        ListViewItem item = listview.ItemContainerGenerator.ContainerFromIndex(listview.SelectedIndex) as ListViewItem;

        TextBlock textYear = null;

        if (item != null)

        {

            //get the item's template parent

            ContentPresenter templateParent = GetFrameworkElementByName<ContentPresenter>(item);

            //get the DataTemplate that TextBlock in.

            DataTemplate dataTemplate = listview.ItemTemplate;

            if (dataTemplate != null && templateParent != null)

            {

                 textYear = dataTemplate.FindName("textYear", templateParent) as TextBlock;

            }

            if (textYear != null)

            {

                MessageBox.Show(String.Format("Current item's Year is:{0}", textYear.Text));

            }

        }

    }

    private static T GetFrameworkElementByName<T>(FrameworkElement referenceElement) where T : FrameworkElement

    {

        FrameworkElement child = null;

        for (Int32 i = 0; i < VisualTreeHelper.GetChildrenCount(referenceElement); i++)

        {

            child = VisualTreeHelper.GetChild(referenceElement, i) as FrameworkElement;

            System.Diagnostics.Debug.WriteLine(child);

            if (child != null && child.GetType() == typeof(T))

            { break; }

            else if (child != null)

            {

                child = GetFrameworkElementByName<T>(child);

                if (child != null && child.GetType() == typeof(T))

                {

                    break;

                }

            }

        }

        return child as T;

    } 
```

# c# - 如何创建 UIHit YesNoNull？

> ID：11177740
> 
> 赞同：0
> 
> 时间：2012-06-24T13:12:37.353
> 
> 标签：c#, asp.net-mvc-3

我需要创建 UIHint 才能将其连接到任何类型，并且它有效：如果选中该复选框，则如果未选中该复选框，则数据可见，则应隐藏数据并将其传递为 null。

但`@Html.EditorForModel()`没有奏效。

在模型中：

```
[UIHint("_YesNoNull")]
[DisplayName("Ссылка на место проведения")]
public string VenueUrl { get; set; } 
```

_YesNoNull 控件：

```
@{
    Guid guid = Guid.NewGuid();
    var propertyName = this.ViewData.ModelMetadata.PropertyName;
}
<script type="text/javascript">
    $(function () {
        $('#@(propertyName)_checkbox').click(function () {

            var checked = $(this).attr('checked');
            if (checked != undefined) {
                $(this).val(true);
            }
            else {
                $(this).val(false);
            }
        });
    });
</script>
@Html.CheckBox("checkbox", false)
@Html.EditorForModel()//not worked 
```

源代码：

```
<div class="editor-label">
            <label for="VenueUrl">Ссылка на место проведения</label>
        </div>
        <div class="editor-field">
            <script type="text/javascript">
    $(function () {
        $('#VenueUrl_checkbox').click(function () {

            var checked = $(this).attr('checked');
            if (checked != undefined) {
                //show VenueUrl
            }
            else {
                //hide VenueUrl
            }
        });
    });
</script>
<input id="VenueUrl_checkbox" name="VenueUrl.checkbox" type="checkbox" value="true" /><input name="VenueUrl.checkbox" type="hidden" value="false" />

            <span class="field-validation-valid" data-valmsg-for="VenueUrl" data-valmsg-replace="true"></span>
</div> 
```

我想要得到的结果：

```
 <div class="editor-label">
                <label for="VenueUrl">Ссылка на место проведения</label>
            </div>
            <div class="editor-field">
                <script type="text/javascript">
        $(function () {
            $('#VenueUrl_checkbox').click(function () {

                var checked = $(this).attr('checked');
                if (checked != undefined) {
                    //show VenueUrl
                }
                else {
                    //hide VenueUrl
                }
            });
        });
    </script>
    <input id="VenueUrl_checkbox" name="VenueUrl.checkbox" type="checkbox" value="true" /><input name="VenueUrl.checkbox" type="hidden" value="false" />

<div class="editor-field">

<input class="text-box single-line" id="VenueUrl" name="VenueUrl" type="text" value=""/>

</div>
    <span class="field-validation-valid" data-valmsg-for="VenueUrl" data-valmsg-replace="true"></span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:45:53.120

代替

```
@Html.EditorForModel()//not worked 
```

利用

```
@Html.TextBox("", ViewData.TemplateInfo.FormattedModelValue) 
```

# html - Div 以 5px 边距居中 - 左、右、上和下

> ID：11177744
> 
> 赞同：1
> 
> 时间：2012-06-24T13:13:01.373
> 
> 标签：html, css

我想制作一个居中（水平和垂直）的 div。它应该随屏幕改变大小，但周围有 5 个像素的边距。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:24:30.787

```
#thediv {
    position: absolute;
    top: 10px;
    right: 10px;
    bottom: 10px;
    left: 10px;
} 
```

# c++ - Lua用户数据对象管理

> ID：11177746
> 
> 赞同：1
> 
> 时间：2012-06-24T13:13:09.977
> 
> 标签：c++, class, lua, lua-userdata

我正在尝试将 Lua 类对象推入堆栈。指向该对象的指针可以由多个函数返回。

换句话说：我需要推送用户数据值，同时仍然能够在它们上使用“==”、“~=”等，因此如果用户数据指针是相同的 C++ 对象，则它必须相同。

```
-- this should push the object onto the stack
local firstObject = GetClassObject();
firstObject:doSomething(); 
```

firstObject 将由 lua 脚本存储，稍后在代码中我将需要再次执行此操作：

```
-- the c++ class pointer has not changed here
-- so I would like to push the same userdata pointer as in the first call...
local object = GetClassObject();

-- if I would not do this the following here would fail... :C
if object == firstObject then
... 
```

我的 Push 函数基本上应该检查某处是否已经存在相同的 C++ 类指针，如果是，则推送相关的 userdata 指针（无论我如何推送它，对象应该以 1:1 的方式工作）

如果不是，它应该创建一个新的用户数据（将其推入堆栈）并将其内容设置为类对象。

这是我的代码：

```
template <typename T>
void Push( const T &tObject )
{
    lua_State *L = GetLuaState();

    // Here i need to check if such a C++ object (the same tObject)
    // already exists!
    //
    // If so i want to push the associated userdata.

    // Object didn't exist yet -> we need a new userdata
    void *pUserData = lua_newuserdata( L, sizeof( tObject ) );
    *reinterpret_cast<T*>( pUserData ) = tObject;
}

template <typename T>
void Push( const T &tObject, const char *pszTable )
{
    Push( tObject );
    lua_State *L = GetLuaState();
    luaL_getmetatable( L, pszTable );
    lua_setmetatable( L, -2 );
}

template <typename T>
T& Get( int nIndex )
{
    T *pUserData = reinterpret_cast<T*>( lua_touserdata( GetLuaState(), nIndex ) );
    if( pUserData == nullptr )
        throw std::exception( "Invalid userdata!" );

    return *pUserData;
}

template <typename T>
T& Get( int nIndex, const char *pszTable )
{
    T *pUserData = reinterpret_cast<T*>( LuaToUData( nIndex, pszTable ) );
    if( pUserData == nullptr )
        throw std::exception( "Invalid userdata!" );

    return *pUserData;
} 
```

LuaToUData 是一个自己的函数，我写它不会引发 lua 错误：

```
void* LuaToUData( int nIndex, const char *pszTable )
{
    void *pUserData = lua_touserdata( g_luaState, nIndex );
    if( pUserData != nullptr )
    {
        if( lua_getmetatable( g_luaState, nIndex ) != 0 )
        {
            lua_getfield( g_luaState, LUA_REGISTRYINDEX, pszTable );
            bool bEqual = ( lua_rawequal( g_luaState, -1, -2 ) == 1 );
            lua_pop( g_luaState, 2 );

            if( bEqual )
                return pUserData;
        }
    }

    return nullptr;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:06:25.627

没错，在 Lua 中，任何两个*相同*用户数据的实例都保证是相等的。但是，当您像这样对 C++ 类实例进行装箱时，每个装箱的实例都会被放入一个新的用户数据中，这意味着它们不能直接进行比较。

您需要做的是`__eq`为您的对象定义一个元方法。它可能看起来有点像这样：

```
int l_compare_things(lua_State* l)
{
    MyClass* a = reinterpret_cast<MyClass*>(lua_touserdata(L, 1));
    MyClass* b = reinterpret_cast<MyClass*>(lua_touserdata(L, 2));

    lua_pushboolean(L, (*a) == (*b));

    return 1;
} 
```

这假设`MyClass`有某种`operator==`覆盖。您可以将此函数设置为与用户数据项关联的元表中的 __eq 元方法`MyClass`。您似乎已经涵盖了元表处理，所以我不会在这里打扰。

现在，下一个问题：您将整个类实例装箱为 lua 完整的用户数据项。您可能不想一遍又一遍地推送相同的东西并用完所有可用的内存......如果您只是推送指针，这不是一个问题，但您没有这样做。所以......您将需要一些独特的方式来识别您的 C++ 类的每个实例。这是一个带有字符串的示例：

```
class MyClass
{
private:
    std::string _id;
public:
    MyClass(const std::string& id) : _id(id) {}

    const std::string& get_id() { return _id; }

    // setters and operator= overrides not included.
};

void l_push_thing(lua_State* L, const MyClass& thing)
{
    // try to get our instance by ID from the registry table:
    lua_getfield(L, LUA_REGISTRYINDEX, thing.id());

    // if so, return, leaving it at the top of the stack.
    if (lua_isuserdata(L, -1))
        return;

    void *ud = lua_newuserdata(L, sizeof(MyClass));                       
    *reinterpret_cast<MyClass*>(ud) = thing; 
    // set up the metatable, etc

    // duplicate the userdata reference:
    lua_pushvalue(L, -1);

    // push our new userdata into the registry. pops the duplicate from the stack
    lua_setfield(L, LUA_REGISTRYINDEX, thing.get_id());
} 
```

（注意：我没有编译或测试过这个例子。E&OE！）

这会将与某个特定`MyClass`实例关联的用户数据留在堆栈顶部。您需要采取自己的步骤来“取消注册”类实例；在这种情况下，注册表中存在对每个实例的硬引用，因此在您销毁该引用之前*不会对用户数据进行垃圾收集。*您可能会考虑在此处使用弱/临时表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:06:13.017

弱表是这样工作的吗？

```
void Push( const T &tObject )
{
    std::ostringstream o;
    o << tObject;
    std::string sIdentifier = o.str();
    const char *pszIdentifier = sIdentifier.c_str();

    lua_State *L = GetLuaState();
    luaL_getmetatable( L, "lua_userdata" );
    if( !lua_istable( L, -1 ) )
    {
        // create new weak table
        luaL_newmetatable( L, "lua_userdata" );
        lua_pushstring( L, "v" );
        lua_setfield( L, -2, "__mode" );
    }

    lua_getfield( L, -1, pszIdentifier );
    if( lua_isuserdata( L, -1 ) == TRUE )
        return lua_remove( L, -2 );

    lua_pop( L, 1 ); // didnt exist yet - getfield is nil -> need to pop that
    void *pUserData = lua_newuserdata( L, sizeof( UINT64 ) );
    *reinterpret_cast<UINT64*>( pUserData ) = UINT64( tObject );

    lua_pushvalue( L, -1 );
    lua_setfield( L, -3, pszIdentifier );
    lua_remove( L, -2 );
} 
```

# java - 如何提取大型视频文件的子部分

> ID：11177747
> 
> 赞同：0
> 
> 时间：2012-06-24T13:13:12.993
> 
> 标签：java, video, ffmpeg, xuggle, xuggler

我想根据给定的开始和结束时间从大型视频文件中提取一小部分视频。

我的互联网搜索显示许多人建议使用 Xuggle 来执行此操作，但我不熟悉这个库、它的用途或如何使用它来实现我的目标。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T01:44:28.970

尝试阅读[手册](http://ffmpeg.org/ffmpeg.html#Generic-options)！

-ss 和 -t 将从 ss 开始并复制“-t”...

```
ffmpeg -i test.mpg -r 25 -ss 00:00:10 -t 00:00:05 images%05d.png 
```

开始 10 秒 5 秒

# c# - 如何检查 ObjectResult 集合是否为空？

> ID：11177763
> 
> 赞同：1
> 
> 时间：2012-06-24T13:15:44.033
> 
> 标签：c#, collections, ienumerable, nullable, executestorequery

我有这段代码可以检查数据库中的最后一个 customer_id。

```
ObjectResult<int?> last_customer_id_collection = MainForm.eggsContext.ExecuteStoreQuery<int?>("select MAX(customer_id) from customers"); 
```

然后我得到下一个像这样需要的 id

```
new_customer_id = last_customer_id_collection.FirstOrDefault<int?>().Value + 1; 
```

它正在工作，但是在处理新的空数据库时，该语句`last_customer_id_collection.FirstOrDefault<int?>()`会引发 InvalidOperationException。

如何在不尝试捕获的情况下检查 last_customer_id_collection 是否为空？

（ps 我试图检查 if`last_customer_id_collection.Any<int?>()`或`last_customer_id_collection.Count<int?>()`DefaultIfEmpty 等，但我尝试的一切都会导致此异常）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:29:21.407

你得到一个 InvalidOperationException 因为`Nullable<T>.HasValue`会返回 false。

`.Value`如果查询返回值为空，您将需要修改代码以不调用。

```
var custId = last_customer_id_collection.FirstOrDefault<int?>();
if(custId.HasValue)
    DoStuffWithId();
else
    DoStuffWithNullResult(); 
```

演示 Nullables 可能令人困惑的行为的小示例 这将打印：

“空！”、“没有值但没有 NullReferenceException”，然后是“糟糕，InvalidOperationException”

```
List<int?> values = new List<int?>();

var test = values.FirstOrDefault();

if (test == null)
    Console.WriteLine("Null!");

if (test.HasValue)
    Console.WriteLine(test.Value);
else
    Console.WriteLine("No Value but no NullReferenceException");

try
{
    int value = test.Value;
}
catch(InvalidOperationException)
{
    Console.WriteLine("Oops, InvalidOperationException");
} 
```

# perl - 如何计算 opendir 成功或失败时间？

> ID：11177764
> 
> 赞同：2
> 
> 时间：2012-06-24T13:16:02.190
> 
> 标签：perl, timeout, opendir

我正在编写一个框架来测试[CernVM FS](http://cernvm.cern.ch/portal/filesystem)的行为。基本上，我有一项服务可以挂载通过 http 提供的远程文件系统，并在用户尝试访问配置的挂载点时立即使用自动挂载进行。

我必须编写的测试之一是检查 cvmfs 是否遵守 dns 请求的超时配置。因此，我将 dns 设置为等待 180 秒，但如果使用代理，则服务必须在 10 秒后停止以尝试挂载文件夹，如果是直接连接，则在 5 秒后尝试挂载文件夹。

我已经定义了三个测试（一个具有良好的 dns，另外两个具有睡眠 dns，有和没有代理）。所有测试都成功（因此，实际上当 dns 处于睡眠状态时它会失败），但我不知道如何检查 Perl opendir 命令在声明它无法访问该文件夹之前等待多长时间。

我该如何衡量这个时间？我知道它必须失败，但我想确保它在 10 或 5 秒后失败（取决于配置）。

我必须在 Perl 中完成，但任何建议都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:44:55.083

您可以测量发出`opendir`和返回之间的时间（成功或不成功）；就像是：

```
use Carp;
use Time::HiRes qw(gettimeofday tv_interval);
my $dir   = '.' #...whatever...'
my $start = [gettimeofday];
opendir my $dfh, $dir or carp "opendir() failed: $!\n";
my $end   = [gettimeofday];
my $delta = tv_interval $start, $end;
print "opendir() took $delta seconds\n"; 
```

# xml - ANTLR 中的空格有什么问题？

> ID：11177768
> 
> 赞同：0
> 
> 时间：2012-06-24T13:16:23.973
> 
> 标签：xml, xml-parsing, html-parsing, antlr, antlr3

我有非常简单的 XML (HTML) 解析 ANTLR 语法：

```
wiki: ggg+;

ggg: tag | text;

tag: '<' tx=TEXT { System.out.println($tx.getText()); } '>';

text: tx=TEXT { System.out.println($tx.getText()); };

CHAR: ~('<'|'>');
TEXT: CHAR+; 
```

有了这样的输入：`"<ggg> fff"`它工作正常。

但是当我开始处理空格时它失败了。例如：

*   `" <ggg> fff "`- 开始失败
*   `"<ggg> <hhh> "`- 失败后`<ggg>`
*   `"<ggg> fff "`- 工作正常
*   `"<ggg> "`- 最终失败

我不知道出了什么问题。也许有一些特殊的语法选项来处理这个问题。ANTLRWorks 给了我`NoViableAltException`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T14:04:28.803

ANTLR 的词法分析器规则尽可能匹配。只有当 2 个（或更多）规则匹配相同数量的字符时，首先定义的规则才会“获胜”。`'<'`因此，除了和之外的单个字符`'>'`被标记为`CHAR`标记，而不是`TEXT`标记，无论解析器“需要”什么（词法分析器独立于解析器运行，记住这一点！）。`'<'`除了和之外，只有两个或更多字符`'>'`被标记为（单个）`TEXT`标记。

因此，输入`" <ggg> fff "`创建以下 5 个标记：

```
type    | text
--------+-----------
CHAR    |   ' '
'<'     |   '<'
TEXT    |   'ggg'
'>'     |   '>'
TEXT    |   ' fff ' 
```

`CHAR`并且由于在您的解析器规则中没有考虑令牌，因此解析失败。

只需删除`CHAR`并执行以下操作：

```
TEXT : ~('<'|'>')+; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:20:37.730

你没有令牌来处理这个空间。词法分析器的空格与它可能遇到的任何其他字符没有什么不同。

如果空格不重要，您可以简单地使用：

```
WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+    { $channel = HIDDEN; } ; 
```

如果空格对您很重要：

```
WHITESPACE : ( '\t' | ' ' | '\r' | '\n'| '\u000C' )+
CHAR: ~('<'|'>');
TEXT: (CHAR|WHITESPACE)+; 
```

# c# - sql server中的多级递归

> ID：11177770
> 
> 赞同：1
> 
> 时间：2012-06-24T13:16:51.820
> 
> 标签：c#, sql-server, tsql

我想创建调用递归函数的存储过程，每次它都会执行更新语句。

我有一张桌子叫`document`

```
documentId   folderId
----------   --------
1222         1
1256         2
1257         3 
```

还有一张`folder`桌子：

```
folderId    parentFolder
--------    -----------
1             5
2             1
3             2 
5             null 
```

我的存储过程将删除文件夹号（1），当它被删除时，它应该将文件夹1和1的子文件夹中的所有文档移动到1的父文件夹。

怎么做？

```
CREATE FUNCTION fn_deleteSubFolderDocument
(
@folderId INT ,
@newFolderId INT
)
RETURNS NVARCHAR(100) 
AS
BEGIN
DECLARE @count2 int 
SET @count2=(SELECT COUNT(*) FROM dbo.tbl_document_folder WHERE parent_folder=@folderId)
UPDATE tbl_document SET folder_id=@newFolderId WHERE folder_id=@folderId

IF(@count2 !=0)
BEGIN
DECLARE @table TABLE(id INT IDENTITY(1,1),folderId INT,parentFolder int  )
INSERT INTO @table(folderId,parentFolder)
SELECT folder_id,parent_folder FROM dbo.tbl_document_folder WHERE parent_folder=folder_id
DECLARE @index INT =0
WHILE @index<@count2
BEGIN
SET @index=@index+1
RETURN fn_deleteSubFolderDocument((SELECT folderId FROM @table WHERE id=@index),(SELECT parentFolder FROM @table WHERE id=@index ))
END

END 

END
GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:19:56.223

我正在尝试在 SQLfiddle 中进行复制以尝试遍历您所说明的依赖关系树，因为我认为您的问题与此[SO Answer类似](https://stackoverflow.com/questions/10291945/walk-parent-child-tree-with-recursive-cte)

好的 - 这将为你走下你的树：

```
create table document
(
  [documentId] int,
  [folderId] int
)
insert into document
values
(1222, 1),
(1256, 2),
(1257, 3)

create table folder
(
  [folderId] int,
  [parentFolder] int null
)
insert into folder
values
(1, 5),
(2, 1),
(3, 2),
(5, null) 
```

这是遍历树并找到子文件夹的子文件夹的子文件夹的递归 CTE...

```
DECLARE @folderToDelete int = 1

;WITH RESULT (folders,LEVEL)
  AS
  (
  --anchor
   SELECT
      folderId [folders]
      ,0 AS LEVEL
   FROM folder AS E 
   WHERE folderId = @folderToDelete

  UNION ALL
  SELECT 
      E.folderId [folders]
      ,LEVEL +1 --switched parent/child
  FROM 
      folder AS E
      INNER JOIN RESULT AS D  
         ON 
          E.parentFolder=D.folders 
  --WHERE LEVEL < 100
  )
SELECT *
FROM RESULT OPTION (MAXRECURSION 100) 
```

我[在 SQLfiddle 上保存了一个现场示例](http://sqlfiddle.com/#!3/69049/3)

拥有这组文件夹后，应该很容易找到需要移动的所有相关文档

参考[Pinal Dave 的这篇文章，](http://blog.sqlauthority.com/2008/07/29/sql-server-sql-server-simple-example-of-recursive-cte-part-2-maxrecursion-prevent-cte-infinite-loop/)我修改了循环检测最大值的方式。如果循环在过去 100 次迭代中进行，如果没有任何最大的捕获，服务器会出错，但根据这篇文章，看起来 MAXRECURSION 可以设置为高达 32767 ......希望你的文件结构不是那么复杂！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:59:51.103

三个步骤：

1.  选择后代的树，[这里使用回车链接描述](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)递归公用表表达式
2.  更新所有文档，该文件夹包含在提供的列表中
3.  删除旧文件夹。

当然，还有一些您没有回答的未解决问题，例如如何处理子文件夹 thesevles，但使用相同的递归 CTE 技术应该很容易解决

```
--create recursive cte
with childfolders(folderID, parentFolder)
as
{
    --stop when you reach the first level
    select * from folder where parentFolderID = @oldFolderId

    --get the other levels
    select folder.folderId, folder.parentFolderId
     from folder folder inner join childFolders children on children.folderId
     = folder.parentFolderId
}

--update
update document set folderId = @newFolderId
where folderId in (select folderId from childFolders)

--delete
delete from folder where folderId= @oldFolderId 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T13:54:17.123

1.  你没有提到这种情况，如果没有父文件夹，即folder1的父ID为空怎么办？

2.  由于这是在数据库中并且您只是删除文件夹，因此只需几个更新语句就足够了

    ```
    // Update the documents parent which were in folder1   
    Update document SET folderId=@newFolderID Where folderID = @oldFolderID 

    // Update the parent in Folder table where parentid =1 
    Update folder SET parentId=@newFolderID Where parentID = @oldFolderID 

    // Update the folder in Folder table where parentid =1 
    Update folder SET folderId=@newFolderID Where folderID = @oldFolderID 
    ```

除了这些不处理没有父文件夹的文件夹。

# javascript - 滚动期间在 iphone/ipad（移动 Safari）中的 setInterval 暂停

> ID：11177774
> 
> 赞同：7
> 
> 时间：2012-06-24T13:17:21.897
> 
> 标签：javascript, iphone, ipad, setinterval

我在网站中使用 setInterval 函数，它在 IE、Chrome、Firefox 和 Safari 中运行良好。当我在 ipad/iphone (safari mobile) 上尝试时，我遇到了问题：如果我滚动屏幕，setInterval 函数会暂停，并且只有在我停止滚动时才会恢复！

有没有办法防止功能暂停？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T13:42:11.730

恐怕不，没有办法阻止这种行为。SO中有很多关于这个问题的主题（更多相关），这里有一个特别[有趣](https://stackoverflow.com/questions/9225525/how-can-i-monitor-scroll-position-while-scrolling-in-safari-on-ios)的主题。它的总结很简单：

> iOS 弹性滚动无法追踪。它没有事件监听器+滚动期间超时/间隔都不会执行。而且因为iOS5中没有requestAnimationFrame，这似乎是无法解决的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T06:10:16.837

iOS6 Safari 存在一个错误，该错误会杀死在页面滚动时创建的计时器。

kTmnh 通过在滚动完成后重新创建计时器来解决此问题

[https://gist.github.com/3798925](https://gist.github.com/3798925)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T12:54:10.267

检查@Pattishall 对此主题的答案 [iOS 6 js events function not called if has setTimeout in it](https://stackoverflow.com/questions/12855123/ios-6-js-events-function-not-called-if-has-settimeout-in-it)

# extjs4.1 - 锁定列extjs 4.1

> ID：11177779
> 
> 赞同：0
> 
> 时间：2012-06-24T13:18:02.577
> 
> 标签：extjs4.1

我正在尝试将网格放入具有锁定功能的 extjs 4.1 请参见下面的代码。

定义具有锁定特征的列时

```
 var column = {"text":"Company","sortable":true,**locked:true**,"dataIndex":"company","width":350,"filterable":false}; 
```

我收到以下错误

**未捕获的类型错误：无法读取未定义的属性“internalId”**

这是html代码：

```
<body> 

<div id ="divGrid"></div>
<script src="http://cdn.sencha.io/ext-4.1.0-gpl/ext-all.js" type="text/javascript"></script>
<script type="text/javascript">

Ext.require(['Ext.grid.*', 'Ext.data.*', 'Ext.util.*', 'Ext.state.*']);

Ext.BLANK_IMAGE_URL = 'Images/s.gif';
Ext.onReady(function () {

Ext.Loader.setConfig({ enabled: true });

    var data = {
            gridData: 
            [{ "company": "3m Co", "price": 71.72, "change": 0.02, "pctChange": 0.03, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "Alcoa Inc", "price": 29.01, "change": 0.42, "pctChange": 1.47, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "Altria Group Inc", "price": 83.81, "change": 0.28, "pctChange": 0.34, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "American Express Company", "price": 52.55, "change": 0.01, "pctChange": 0.02, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "American International Group, Inc.", "price": 64.13, "change": 0.31, "pctChange": 0.49, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "AT&T Inc.", "price": 31.61, "change": -0.48, "pctChange": -1.54, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "Boeing Co.", "price": 75.43, "change": 0.53, "pctChange": 0.71, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "Caterpillar Inc.", "price": 67.27, "change": 0.92, "pctChange": 1.39, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "Citigroup, Inc.", "price": 49.37, "change": 0.02, "pctChange": 0.04, "lastChange": "2012-04-11T21:41:43.105Z" }, { "company": "E.I. du Pont de Nemours and Company", "price": 40.48, "change": 0.51, "pctChange": 1.28, "lastChange": "2012-04-11T21:41:43.105Z"}]

    };

      var columns = [];
      var column = 
                        {"text":"Company","sortable":true,"dataIndex":"company","width":350,"filterable":false,locked:true}
                    ;

        columns.push(column);

        var fields = [];
        fields.push({ name: "company" });

       var store = Ext.create('Ext.data.Store', {
        autoLoad: true,
        fields: fields,
        data : data,
        proxy: {
            type: 'memory',
            reader: {
                type: 'json',
                root: 'gridData'
            }
        }
    });

        grid = Ext.create('Ext.grid.Panel', {
            store: store,
            selModel: Ext.create('Ext.selection.RowModel', { singleSelect: true, selectFirstRow: true }),
            columnLines: true,
            layout: 'fit', 
            renderTo:"divGrid",
            columns: columns,
            loadMask: false,
            height: 500,
            width: 500,
            dockedItems: [{
                xtype: 'pagingtoolbar',
                store: store,
                dock: 'bottom',
                displayInfo: true
            }],
            viewConfig: {
                loadMask: false,
                id: "grid",
                stripeRows: true
            }
        });

    });
 </script>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:06:24.213

问题出在“id”字段中。我删除了它，它的工作。

```
 viewConfig: {
                loadMask: false,
             //   **id: "grid",**
                stripeRows: true
            } 
```

# javascript - 将小数英里从 Google 地图转换为 int32

> ID：11177781
> 
> 赞同：0
> 
> 时间：2012-06-24T13:18:40.390
> 
> 标签：javascript, asp.net, math, substring

我有一个 Asp.net 文本框，该文本框由 javascript 使用 Google Maps Api 自动填充。文本框中的文本可以显示从 40.2 到 1,634 英里的任意英里数。

我需要从文本框中获取文本并将其放入 int 中以存储在数据库中。

所以我真的需要一些事情发生。文本始终显示为“40.2 mi”（不带引号），我需要的只是一个整数。或诠释。像“40”或“1634”。

所以我可以将它存储在我的数据库表中。我试过 Substring 和 Math.Round。但我不断收到异常。我最近的尝试是这样的：

```
 string miles = txtEstDistance.Text;
        miles.Substring(0, miles.IndexOf('.') > 0 ? miles.IndexOf('.') : miles.Length);

        int oDistanceMiles = Convert.ToInt32(miles); 
```

我得到的例外是：“输入字符串的格式不正确。” 对于这行代码：

int oDistanceMiles = Convert.ToInt32(英里);

我迷路了。.Net 4.0 C#

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:37:47.963

如果你没有点，你有一个类似的字符串`40 mi`，所以你需要使用空格。

```
miles.Substring(0, miles.IndexOf('.') > 0 ? miles.IndexOf('.') : miles.IndexOf(' ')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:38:09.063

如果您先摆脱“ mi”，然后将其余部分视为浮点数怎么办？然后您可以使用 Math.Round 舍入为整数并将其转换为 int。

如果我是对的， NumberStyles.Float 枚举将自动清理前导或尾随空格。当然也可以使用 string.Trim()

```
var miles = txtEstDistance.Text;

miles = miles.Substring(0, miles.IndexOf("mi"));

float tmpdistance;
var success = float.TryParse(miles, NumberStyles.Float, CultureInfo.InvariantCulture, out tmpdistance);

if (success)
{
    var distance = Convert.ToInt32(Math.Round(tmpdistance, 0));

    // or

    distance = (int) Math.Round(tmpdistance, 0);
}
```

# iphone - 在非开发者 iOS 设备上存储控制台输出的最简单方法

> ID：11177782
> 
> 赞同：2
> 
> 时间：2012-06-24T13:18:45.683
> 
> 标签：iphone, ios, ipad, console

我正在制作一个有自己的关卡编辑器的游戏。编辑器只是将代码输出到控制台，然后我可以从控制台复制并粘贴到我的游戏中。诸如地形点、资产位置等之类的东西。基本上是简单的文本。

我将向一位同事（不是技术人员）发布该应用程序，并且需要保存该同事将创建的关卡数据。我将这个级别信息存储在他的设备上以便我以后访问（假设他没有开发者帐户等）的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:22:36.927

指导他们下载并安装[iPhone 配置实用程序](http://www.apple.com/support/iphone/enterprise/)（不是配置器），它适用于 Windows 和 MacOS X。它会在设备插入后向您显示 iOS 控制台输出，您可以从中复制粘贴所有您想要的。

# c++ - 在从 std::array 派生的类上使用 std::tuple_size

> ID：11177783
> 
> 赞同：2
> 
> 时间：2012-06-24T13:19:01.760
> 
> 标签：c++, c++11

我的代码如下所示：

```
#include <array>

class DoubleArray: std::array<double, 16> {
public:
    void clear() {
        fill(0.0);
    }
}; 
```

现在我想使用 的大小`std::array`作为编译时间常数。如果`DoubleArray`只是一个`typedef`我`std::array`可以使用`std::tuple_size<DoubleArray>::value`但使用继承而不是我得到以下编译器错误：

```
error: incomplete type ‘std::tuple_size<DoubleArray>’ used in nested name specifier 
```

我见过[tuple_size 和一个从元组继承的类？](https://stackoverflow.com/questions/7967746/tuple-size-and-an-inhereted-class-from-tuple)但因为那只谈论 std::tuple 我不认为它可以应用。任何想法为什么这不起作用以及是否有一种简单的方法可以使它起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:25:39.270

只需调用`size()`- 对于数组，它是一个`constexpr`.

请参见此处：[http](http://en.cppreference.com/w/cpp/container/array/size) : //en.cppreference.com/w/cpp/container/array/size 或查看第 23.3.2.1.3 节定义为`constexpr size_type size() noexcept;`

# wpf - 筛选 xamDataGrid 中的对象

> ID：11177784
> 
> 赞同：0
> 
> 时间：2012-06-24T13:19:07.720
> 
> 标签：wpf, c#-4.0, infragistics, xamdatagrid

现在有一天，我使用 infragistics xamDataGrid。我的网格不包含简单的原始数据类型，它包含自定义对象（对象有 2 个属性代码和描述）。当我在网格中启用过滤器功能时，它运行良好。但我发现了一个错误。当我用相等过滤对象时，有一个对象但结果为空。请帮帮我，这是关键问题。

我在基础设施论坛上用示例项目和图像问了同样的问题，请参考这个 url 以获取示例项目并理解我的问题。请帮我。

[示例链接](http://community.infragistics.com/forums/p/70873/358585.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:38:48.503

要过滤复杂类型，您需要在对象的类中实现 IComparable 接口。[Stefan Stoyanov 在此处](http://www.infragistics.com/community/forums/p/70873/362589.aspx#362589)发布了您的示例的更新版本。

# javascript - Javascript 中的空间（2D）声音

> ID：11177791
> 
> 赞同：12
> 
> 时间：2012-06-24T13:20:06.623
> 
> 标签：javascript, audio, browser

为了我的游戏需要，我需要有 2D 声音。这意味着，发射器应位于 2D 平面上的某个位置。如何在 Javascript 中实现这种效果？我需要使用特殊的声音格式还是可以控制扬声器的音量？

我想我可以达到每个扬声器有 2 个音量的地步，但我不知道如何在 Javascript 中为相同的声音应用不同的音量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T23:50:24.813

可以在[此处](http://www.html5rocks.com/en/tutorials/webaudio/games/#toc-3d)找到准确描述此内容的文章（**包括演示**）。

为了防止链接失效，我将在下面引用最相关的部分

> 幸运的是，Web Audio API 带有内置的硬件加速定位音频功能，使用起来非常简单。

核心思想体现在下面的代码中：

```
PositionSample.prototype.changePosition = function(position) {
  // Position coordinates are in normalized canvas coordinates
  // with -0.5 < x, y < 0.5
  if (position) {
    if (!this.isPlaying) {
      this.play();
    }
    var mul = 2;
    var x = position.x / this.size.width;
    var y = -position.y / this.size.height;
    this.panner.setPosition(x * mul, y * mul, -0.5);
  } else {
    this.stop();
  }
}; 
```

上面第一个链接中的工作演示的完整源代码可以在[这里](http://www.html5rocks.com/en/tutorials/webaudio/games/samples/position/position.js)找到。

[*题外话：我认为在这里手动重写引用的文章作为自定义答案，但这似乎相对没有意义，因为文章已经足够清晰并且做双重工作似乎没有意义*]

* * *

兼容性方面，只有 Flash 和前面提到的代码的组合才能提供真正的跨浏览器定位/平移音频解决方案（因为 Flash 在某些移动设备上不可用）。理想情况下，如果可以规避这种情况，我建议不要使用音频 API，因为规范中的事情不太可能发生变化，因此可能会破坏您的代码（+ 这在移动设备上不起作用的可能性不大）。使用更高级的网络音频 api 的唯一情况是，如果您希望在游戏上至少再工作 6 到 18 个月（因为这可能是实现甚至稳定到可用点所需的时间） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T00:19:04.870

我们在工作中使用了 SoundManager2，它是一个非常简单的交钥匙解决方案和有据可查的 API。

[http://www.schillmania.com/projects/soundmanager2/](http://www.schillmania.com/projects/soundmanager2/)

例子：

```
soundManager.createSound({
 id:'mySound1',
 url:'../mpc/audio/CHINA_1.mp3'
});
soundManager.play('mySound1'); 
```

BSD 许可证：[http ://www.schillmania.com/projects/soundmanager2/license.txt](http://www.schillmania.com/projects/soundmanager2/license.txt)

# android - Android时差与joda时间

> ID：11177803
> 
> 赞同：0
> 
> 时间：2012-06-24T13:21:45.390
> 
> 标签：android, time, jodatime

我有这个简单的代码，使用 Joda-time。
工作正常，但我有一个问题。
比如它返回814分钟，按代码是什么，就可以了。
但我希望结果少于 60 分钟，而不是 814 分钟。
那么，如何转换 814 分钟以获得我想要的结果？

同样的情况也发生在小时。

谢谢你。

编码：

```
int days = Days.daysBetween(new DateTime(today), new DateTime(StartTime1)).getDays();

int hours =Hours.hoursBetween(new DateTime(today), new DateTime(StartTime1)).getHours();

int minutes = Minutes.minutesBetween(new DateTime(today),new DateTime(StartTime1)).getMinutes(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-29T09:30:13.417

我怀疑你问错了 Joda-Time 的问题。尝试查看 Period 类：

```
Period p = new Period(new DateTime(today), new DateTime(StartTime1), PeriodType.dayTime());
int days = p.getDays();
int hours = p.getHours(); 
```

即为`Period`您将时间分解为几天和几小时，正确处理夏令时（您的原始方法和手动百分比计算不这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:51:15.907

您有总分钟数，因此您需要将剩余的分钟数除以 60 分钟（假设您正在跟踪 hours 变量中的小时数）：

```
minutes = minutes % 60; 
```

# gcc - 为 ARM-EABI 编译 Linux 内核但使用 4 字节大类型对齐？

> ID：11177804
> 
> 赞同：4
> 
> 时间：2012-06-24T13:21:49.650
> 
> 标签：gcc, linux-kernel, arm, eabi

默认情况下，任何大类型（大于 4 字节）在 EABI 上都将对齐到 8 字节。这意味着如果`function(u32, u64)`调用， u32 进入，并且 u64 在and`r0`之间分割，不使用。`r2``r3``r1`

我怎样才能让编译器将它对齐到 4 字节呢？我理解这个（打破 ABI）或其他的后果，但我并不在乎。也不建议使用 OABI，因为在内核配置中启用 OABI 会禁用对 ARMv7 的支持。

使用 4 字节对齐，u32 仍将进入，`r0`但 u64 现在将在`r1`和之间拆分`r2`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T01:07:10.990

我希望这样做的正确方法是使用修改后的 EABI 定义重新编译工具链，您可能部分地从您不想使用的 OABI 中抄袭。

您可能还必须重新编写内核的一些汇编语言部分，因此最好给修改后的 ABI 一个新名称。

确实期望花费相当多的时间来理解和修复它破坏的各种东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:31:40.150

GCC 具有`aligned`可应用于类型的属性：

```
typedef long __attribute__((aligned(4))) unaligned_long; 
```

现在，您可以在需要时（小心地）使用这种类型。

# php - 使用哪种类型的联接进行计数？

> ID：11177805
> 
> 赞同：1
> 
> 时间：2012-06-24T13:21:50.593
> 
> 标签：php, mysql, zend-framework, zend-db, zend-db-table

我尝试了不同的连接类型，但不知道应该使用哪种类型。我想计算每篇文章的评论数。

```
$select = $this->_db->select()
        ->from($this->_name)
        ->joinLeft('categories', 'categories.cat_id = ' . $this->_name . '.category', array('category_name' => 'name'))
        ->joinLeft('comments', 'comments.post_id = ' . $this->_name. '.post_id', array('num_comments' => 'COUNT(*)'))
        ->group($this->_name.'.post_id')
        ->limit(3)
        ->order("pubDate DESC");
if($category_id > 0) $select->where("category = ?", $category_id);
if($last_pub_date > 0) $select->where("$this->_name.pubDate < ?", $last_pub_date); 
```

我也将这种方法用于我的 Twitter 之类的分页，因此`$last_pub_date`也是如此。看起来不错，`joinLeft()`但当然，如果文章查询没有评论，则获取计数为 1 而不是 0。我尝试使用其他连接类型，但如果没有评论，则不会提取整行或`$this->_db->order("pubDate DESC")`无法正常工作。我也尝试过使用子查询，但我不确定我是否按原样写了它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:52:07.353

左连接是正确的，但你需要使用`COUNT(comment_id)`而不是`COUNT(*)`. `COUNT(*)`将返回行数，即使没有评论也将是一。`COUNT(comment_id)`将返回非`NULL` `comment_id`值的数量，这应该是您正在寻找的。

[http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count](http://dev.mysql.com/doc/refman/5.1/en/group-by-functions.html#function_count)

# networking - 如何在 VirtualBox 上 ping ubuntu 来宾

> ID：11177809
> 
> 赞同：73
> 
> 时间：2012-06-24T13:22:08.503
> 
> 标签：networking, ubuntu, virtualbox, ping

我有一个带有 Ubuntu 的虚拟机（VirtualBox）。主机是 Windows 7。如何从主机 ping 我的 Ubuntu，反之亦然？尝试在 VM 设置中设置“桥接”连接类型但没有效果，我只是在 Ubuntu 中失去了互联网连接。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-06-24T13:33:13.240

在大多数情况下，只需将虚拟机网络适配器切换到**桥接**模式就足以让来宾机器从外部访问。

[![切换虚拟机网络适配器类型](../Images/03ce8a0f57b6608378ca4e15792a4d09.png)](https://i.stack.imgur.com/OHzlv.png)

有时，客户机可能在切换到桥接模式后（即使在重新启动客户机后）不会自动接收与主机 IP 范围匹配的 IP。这通常是由主机网络上的 DHCP 出现故障或配置不当引起的。

例如，如果主机 IP 是`192.168.1.1`来宾机器，则需要有一个格式`192.168.1.*`为仅允许最后一组数字与主机 IP 不同的 IP。

您可以使用终端（shell）并键入`ifconfig`（`ipconfig`对于 Windows 来宾）来检查分配给来宾计算机的 IP 并在需要时进行更改。

[![获取客人的机器IP](../Images/13eebd89ead4e20ad278974e3121e59c.png)](https://i.stack.imgur.com/5m6Y1.png)

如果主机和来宾 IP 不匹配，只需为来宾计算机显式设置静态 IP 即可解决问题。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-24T13:28:01.750

使用 NAT（默认）这是不可能的。桥接网络应该允许它。如果桥接对您不起作用（这可能是您的网络管理员不允许在一个物理接口上使用多个 IP 地址的情况），您可以尝试“仅主机网络”。

对于 Host-only 的配置，这里引用了 vbox 手册（非常好）。[http://www.virtualbox.org/manual/ch06.html](http://www.virtualbox.org/manual/ch06.html)：

> 对于仅主机网络，如内部网络，您可能会发现 VirtualBox 中内置的 DHCP 服务器很有用。然后可以启用此功能以管理仅主机网络中的 IP 地址，否则您将需要静态配置所有 IP 地址。
> 
> 在 VirtualBox 图形用户界面中，您可以通过“文件”->“设置”->“网络”在全局设置中配置所有这些项目，其中列出了当前正在使用的所有仅主机网络。单击网络名称，然后单击右侧的“编辑”按钮，您可以修改适配器和 DHCP 设置。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-16T18:57:13.773

如果您开始修改 VirtualBox 网络设置，请注意这一点：您可能会制作新的网络适配器（eth1、eth2），但`/etc/network/interfaces`仍然为 eth0 配置。

诊断：

```
ethtool -i eth0
Cannot get driver information: no such device 
```

找到你的接口：

```
ls /sys/class/net
eth1 eth2 lo 
```

修理它：

编辑`/etc/networking/interfaces`eth0 并将其替换为适当的接口名称（例如 eth1、eth2 等）

```
:%s/eth0/eth2/g 
```

# hbase - 与 zookeeper 相关的 hbase 错误

> ID：11177813
> 
> 赞同：3
> 
> 时间：2012-06-24T13:22:40.053
> 
> 标签：hbase, apache-zookeeper

我刚刚开始使用 hbase。我试图执行以下java程序。此代码创建一个表并向表添加一些值，但我收到以下提到的错误。

```
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.client.HTable;
import org.apache.hadoop.hbase.client.Put;
import org.apache.hadoop.hbase.util.Bytes;
import java.io.IOException;
public class PutExample {
public static void main(String[] args) throws IOException {
Configuration conf = HBaseConfiguration.create();
HTable table = new HTable(conf, "testtable");
Put put = new Put(Bytes.toBytes("row1"));
put.add(Bytes.toBytes("colfam1"), Bytes.toBytes("qual1"),
Bytes.toBytes("val1"));
put.add(Bytes.toBytes("colfam1"), Bytes.toBytes("qual2"),
Bytes.toBytes("val2"));
table.put(put);
}
} 
```

错误：

```
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:java.library.path=/home/y/lib
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:java.io.tmpdir=/tmp
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:java.compiler=<NA>
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:os.name=Linux
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:os.arch=i386
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:os.version=2.6.18-238.1.1.el5.YAHOO.20110221
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:user.name=indirav
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:user.home=/homes/indirav
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Client environment:user.dir=/homes/indirav
12/06/24 13:11:24 INFO zookeeper.ZooKeeper: Initiating client connection, connectString=zkp201.gold.ygrid.yahoo.com:2181,zkp200.gold.ygrid.yahoo.com:2181,zkp202.gold.ygrid.yahoo.com:2181 sessionTimeout=180000 watcher=hconnection
12/06/24 13:11:24 INFO zookeeper.ClientCnxn: Opening socket connection to server /67.195.222.180:2181
12/06/24 13:11:24 INFO zookeeper.RecoverableZooKeeper: The identifier of this process is 23935@inngw1003.gold.ygrid.yahoo.com
12/06/24 13:11:24 WARN client.ZooKeeperSaslClient: SecurityException: java.lang.SecurityException: /config/jaas.config (No such file or directory) occurred when trying to find JAAS configuration.
12/06/24 13:11:24 INFO client.ZooKeeperSaslClient: Client will not SASL-authenticate because the default JAAS configuration section 'Client' could not be found. If you are not using SASL, you may ignore this. On the other hand, if you expected SASL to work, please fix your JAAS configuration.
12/06/24 13:11:24 WARN zookeeper.ClientCnxn: SASL authentication failed: javax.security.auth.login.LoginException: Zookeeper client cannot authenticate using the 'Client' section of the supplied JAAS configuration: '/config/jaas.config' because of a SecurityException: java.lang.SecurityException: /config/jaas.config (No such file or directory) Will continue connection to Zookeeper server without SASL authentication, if Zookeeper server allows it.
12/06/24 13:11:24 INFO zookeeper.ClientCnxn: Socket connection established to zkp201.gold.ygrid.yahoo.com/67.195.222.180:2181, initiating session
12/06/24 13:11:24 WARN zookeeper.ClientCnxnSocket: Connected to an old server; r-o mode will be unavailable
12/06/24 13:11:24 INFO zookeeper.ClientCnxn: Session establishment complete on server zkp201.gold.ygrid.yahoo.com/67.195.222.180:2181, sessionid = 0x2349e7f54fbbd87, negotiated timeout = 40000
12/06/24 13:11:25 WARN client.HConnectionManager$HConnectionImplementation: RemoteException connecting to RS
org.apache.hadoop.ipc.RemoteException: Authentication is required
        at org.apache.hadoop.hbase.ipc.HBaseClient.call(HBaseClient.java:918)
        at org.apache.hadoop.hbase.ipc.SecureRpcEngine$Invoker.invoke(SecureRpcEngine.java:164)
        at $Proxy5.getProtocolVersion(Unknown Source)
        at org.apache.hadoop.hbase.ipc.SecureRpcEngine.getProxy(SecureRpcEngine.java:208)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:303)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:280)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.getProxy(HBaseRPC.java:332)
        at org.apache.hadoop.hbase.ipc.HBaseRPC.waitForProxy(HBaseRPC.java:236)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1278)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1235)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.getHRegionConnection(HConnectionManager.java:1222)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:918)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:814)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:782)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegionInMeta(HConnectionManager.java:915)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:818)
        at org.apache.hadoop.hbase.client.HConnectionManager$HConnectionImplementation.locateRegion(HConnectionManager.java:782)
        at org.apache.hadoop.hbase.client.HTable.finishSetup(HTable.java:249)
        at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:213)
        at org.apache.hadoop.hbase.client.HTable.<init>(HTable.java:171)
        at PutExample.main(PutExample.java:12) 
```

任何人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:43:10.717

> org.apache.hadoop.ipc.RemoteException：需要身份验证

看起来您的客户端没有写入集群的写入凭据。查看[文档](http://hadoop.apache.org/common/docs/stable/service_level_auth.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-01T23:08:02.900

您需要确保您的路径中有 HBase 配置脚本（例如，包含 hbase-site.xml 的 $HBASE_CONF 目录）并且您的配置包含正确访问 zookeeper 的信息

# internet-explorer - IE兼容模式

> ID：11177815
> 
> 赞同：0
> 
> 时间：2012-06-24T13:22:54.657
> 
> 标签：internet-explorer, internet-explorer-8, x-ua-compatible

我真的不明白这些模式是如何工作的，例如，如果我添加

`<!DOCTYPE>`使其成为`html5`文档，然后添加

`<meta http-equiv="X-UA-Compatible" content="IE=9" />`

IE 会以 IE 9 标准呈现，对吗？

但是我的问题是，如果用户没有`IE 9`但有`IE 6`，或者`7`我的页面将具有一些仅适用于的功能，`IE 9`它是否还能以某种方式工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:06:02.660

首先，您`<!DOCTYPE>`在问题中自己写的方式无效；您需要指定要使用的文档类型。如果您想使用 HTML5，则 doctype 行应如下所示：

```
<!DOCTYPE html> 
```

当你有一个可用的文档类型时，IE 将以标准模式呈现页面。如果没有 doctype，IE 将使用 Quirks 模式。Quirks 模式基本上是一种 IE5 兼容模式，其中包含许多在其他浏览器中都无法使用的非标准内容。因此，您应该始终使用文档类型。

其次：**如果可以**`X-UA-Compatible`的话，这会告诉 IE 使用特定的呈现模式。

 **很明显，旧版本的 IE 不能使用新 IE 版本的渲染模式，所以这个标签也只是出于向后兼容的原因。所以对您的问题的直接回答是“否”：IE6 将永远无法在 IE9 模式下呈现，IE7 或 IE8 也不会。

IE8 能够使用 IE7 兼容模式，而 IE9 同时具有 IE8 和 IE7 兼容模式。此标记将触发 IE 使用这些模式而不是其标准模式。

如果您的网站是为旧版本的 IE 编写的并且在新版本中无法正常工作，这可用作快速修复解决方案。如果您在每个人都被迫使用 IE 的内部网络中，这很好，但在更广泛的互联网上，您还需要支持其他浏览器，并且如果一个站点在 IE8 中运行但在 IE9 中中断，那么很有可能它也会在其他浏览器中中断。因此，我建议这`X-UA-Compatible`在现实世界中并不是那么有用。

但是，在一种情况下包含它很有用：IE 中有配置设置可以设置为自动触发向后兼容模式。因此，IE8 用户可能在不知不觉中处于 IE7 模式。

这显然是一个问题，但是指定`X-UA-Compatible`一个更高的值会迫使 IE 采用更新的渲染模式。这是一件好事。

但是，在这种情况下，您不应该指定要使用的 IE 版本——因为如果您指定`IE=9`，IE10 用户会发生什么情况？相反，您应该使用特殊情况值`edge`。这会强制 IE 使用它可用的最新呈现模式，而不管任何其他设置。在大多数情况下，这就是您想要做的。代码如下所示：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" /> 
```

希望有帮助。

哦，顺便说一句，`X-UA-Compatible`也可以在 HTTP 标头中指定，而不是在 HTML 代码里面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:38:18.563

不，它不会以某种方式起作用——那是完全不可能的。IE 6 如何在没有更新的情况下获得 IE 9 渲染引擎？

事实上，IE 7 及更早版本[甚至不*支持* `X-UA-Compatible`](http://msdn.microsoft.com/en-us/library/ie/ms533876%28v=vs.85%29.aspx)：

> **从 Windows Internet Explorer 8 开始**，该`httpEquiv`属性还支持 的值`x-ua-compatible`，它允许开发人员指定 Windows Internet Explorer 用于显示网页的文档兼容模式。为此，请将 content 属性设置为包含以下一个或多个值的逗号分隔列表的字符串值。**

# iphone - ios sdk - 获取设备设置值

> ID：11177817
> 
> 赞同：1
> 
> 时间：2012-06-24T13:23:08.197
> 
> 标签：iphone, objective-c, ios

我需要从代码（目标 C）中知道设备（特别是 iPhone）设置的值。特别是我想知道是否启用了 3G（通常是 undeg 设置 -> 常规 -> 网络）。我不想以任何方式更改设置，只是想知道它的当前值。

如果可以知道 3G 网络是否可用，那就更好了。我熟悉可达性类，但是，它不会告诉我 WWAN 网络是否是 3G。

谢谢，齐夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:44:22.237

如果是连接速度问题，而不是 3G 网络的特定能力（例如同时连接语音和数据），那么您可能可以通过计时加载您的小文件所需的时间来运行某种速度测试从网上知道大小。

希望这可以帮助，

乔纳森

# javascript - 我如何从 jquery 的 html 表中提取从时间到时间（约会时间）

> ID：11177818
> 
> 赞同：0
> 
> 时间：2012-06-24T13:23:14.600
> 
> 标签：javascript, jquery, html, css

我在拖动时隙单元时选择时隙。选择时间段后，我在文本框中输入患者姓名，然后单击选择按钮，然后患者姓名进入选定的时间段。用户可以为多个患者姓名选择多个时间段，然后单击分配按钮我必须将患者姓名与时间段（从时间到时间）插入数据库。

我在获得分配的时间段时遇到问题，即 jquery 中的从时间和到时间。

```
$("#btnAllot").click(function () {
    //how i get alloted time here.
    $('tr').each(function () {
        $(this).find('td').each(function () {
            if ($(this).hasClass('yell')) {
                alert($(this).closest('tr').find('td:eq(1)').text());

            };
        });
    });
} 
```

我在上面使用过，但只得到分钟而不是病人姓名，小时。 [在此处查看现场 jsbin 演示](http://jsbin.com/owarip/edit#preview) [查看小提琴](http://jsfiddle.net/yebJ6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:40:16.967

你只得到分钟，因为你只选择*时间槽*列值，请参阅[更新的小提琴](http://jsfiddle.net/yebJ6/2/)：

```
$("#btnAllot").click(function() {
    $('tr:gt(0)').each(function() {
        if ($(this).has("td[class='yell']")){
            var hour = $(this).find('td:eq(0)').text();
            var slot = $(this).find('td:eq(1)').text();
            var name = $(this).find('td:eq(2)').text();
            var msg = 'Hour: ' + hour + ' Slot: ' + slot + ' Name: ' + name;
            alert(msg);

        }
    });
}); 
```

# nhibernate - 自定义类型的流畅 nHibernate 配置

> ID：11177819
> 
> 赞同：1
> 
> 时间：2012-06-24T13:23:27.247
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping

我试图让 fNH 映射到自定义类型，但我遇到了困难。

我希望 fNH 通过自定义类型的接口分配其值。我还需要 nHibernate 来保留实体上的自定义类型的实例。它总是在访问属性时被实例化，不要覆盖实例，只需设置包装的值。

当我尝试下面的映射时，它会引发异常*“在类 'Entities.User 中找不到属性 'Value' 的 getter”*

想法？

**fNH 映射：**

```
Map(x =>((IBypassSecurity<string>)x.SecuredPinNumber).Value,"[PinNumber]"); 
```

**域示例：**

```
public class User
{
 public SecureField<string> SecuredPinNumber {get;private set;}
}

public class SecureField<T> : IBypassSecurity<T>
{
 public T Value { get; set; } // would apply security rules, for 'normal' use
 T IBypassSecurity<T>.Value {get;set;} // gets/sets the value directy, no security.
}

// allows nHibernate to assign the value without any security checks
public interface IBypassSecurity<T>
{
 T Value {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:19:06.357

Map() 方法是一个表达式构建器，用于将属性名称提取为字符串。因此，您的映射告诉 NH，您要映射 User 类中的属性“Value”，当然，该属性不存在。如果您想使用自定义类型，请阅读有关此内容的 NH 参考文档并在映射中使用 CustomType() 方法。

您还可以为 PinNumber 使用受保护的属性，以允许直接访问。

```
public class User
{
    protected virtual string PinNumber { get; set; }  // mapped for direct access
    public string SecuredPinNumber
    {
        get { /* get value with security checks */ }
        set { /* set value with security checks */ }
    }
} 
```

您可以阅读这篇关于使用 Fluent 映射受保护属性的[文章。](http://www.jagregory.com/writings/fluent-nhibernate-mapping-private-and-protected-properties)

# actionscript - 在 actionscript 3 的线条绘图中使用纹理

> ID：11177822
> 
> 赞同：2
> 
> 时间：2012-06-24T13:23:47.387
> 
> 标签：actionscript, drawing

我想画线，就像图形 API 一样，只是它将由给定纹理的块组装而成（“lineChunk.png”）

该块将很小，以允许在需要时通过线的路径旋转它。

目的是让用户使用 mouseMove 创建带纹理的线条。

我试图让它“手动”，但是当快速绘制时，两点之间的距离很大，因此需要使用 while 循环来缩小差距，这会显着减慢速度。

'graphics.lineBitmapStyle' 没有帮助，也没有达到这个目的。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T19:41:18.280

设置图形线型为：

```
lineBitmapStyle(bitmapData); 
```

这指定了绘制线条时用于线条笔划的位图。

[图形的 ActionScript 3.0 参考](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#lineBitmapStyle%28%29)

![线条位图样式](../Images/47c8c3e063836fba6a46713661ccfbea.png)

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Graphics;
    import flash.display.Loader;
    import flash.display.LoaderInfo;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.net.URLRequest;

    public class X extends Sprite
    {
        protected var bitmapData:BitmapData;

        protected var loader:Loader = new Loader();

        public function X()
        {
            super();

            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, completeHandler);
            loader.load(new URLRequest("lineChunk.png"));
        }

        protected function completeHandler(event:Event):void
        {
            bitmapData = Bitmap(LoaderInfo(event.target).content).bitmapData;

            var g:Graphics = graphics;
            g.lineStyle(10);
            g.lineBitmapStyle(bitmapData);

            g.moveTo(0, 0);
            g.lineTo(100, 100);
            /* ... */
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T15:20:52.130

好的，所以最好的方法是创建示例纹理的单个 Bitmap 实例，然后创建另一个空的 Bitmap 作为您的画布。

使用循环进行常规钻孔以填补2个点之间的缺失间隙，并使用Bitmap.Draw在每次转换后的单个纹理Bitmap时绘制。

它工作得很好。

# objective-c - 如何检测捏合手势与捏合手势？

> ID：11177827
> 
> 赞同：6
> 
> 时间：2012-06-24T13:24:19.413
> 
> 标签：objective-c, ios, cocoa-touch, uipinchgesturerecognizer

而不是缩放，我认为捏手势通常用于，我只想检测捏是捏还是捏，这样我就可以折叠或展开一些表格部分。我该怎么做呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-26T22:11:05.800

“缩放”属性小于 1 表示捏合手势，大于 1 表示展开手势。这发生在所有用 2 根手指捏住的情况下。

我还观察到，如果我用 5 根手指捏住（这是最小化到主页的快捷方式），则比例值每次都恰好为 1.0。但是我知道的任何 Apple 文档都不支持这一点。

您可以通过简单地将 NSLog 放入您的捏处理选择器中来试验这些值。

```
NSLog(@"Scale: %.2f | Velocity: %.2f",pinch.scale,pinch.velocity); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-24T13:35:02.527

嗯，这似乎很容易。该类[`UIPinchGestureRecognizer`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPinchGestureRecognizer_Class/Reference/Reference.html)只有*两个属性*，`scale`和`velocity`。`scale`负数意味着向内挤压，正数意味着`scale`向外挤压，这似乎是合乎逻辑的。

注意：“否定”可能具有误导性。“小”是`0.0 < scale < 1.0`，“大”是`scale > 1.0`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T20:06:10.197

您查看 scale 属性是正确的，但是它在 1 附近切换，而不是零。

```
    - (BOOL) pinchWasOutwards:(UIGestureRecognizer *)gestureRecognizer
    {
        返回gestureRecognizer.scale > 1；
    }

```

# dygraphs - Dygraph：两个 YAxis 有些系列堆叠有些不

> ID：11177831
> 
> 赞同：2
> 
> 时间：2012-06-24T13:24:44.203
> 
> 标签：dygraphs

是否可以创建一个图表，其中一些线相互堆叠（左侧 Y 轴）而其他线不堆叠（右侧 Y2 轴）？

而且我想在图表下方填充一些线条，而在同一张图表中填充其他线条。

有没有任何地方的例子？我还没有找到一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T15:47:57.247

目前这是不可能的。问题属于[这个问题](http://code.google.com/p/dygraphs/issues/detail?id=126)（“支持更多每轴选项”）。随意给这个问题加注星标（或尝试修复它！）。

# mysql - 短信/通知 MySQL 类型

> ID：11177832
> 
> 赞同：1
> 
> 时间：2012-06-24T13:24:46.433
> 
> 标签：mysql, text, varchar

我想为网站管理员制作一个简单的通知/新闻系统。

将这些消息（最多 250 个字符）存储在数据库中的最佳解决方案是什么？

VARCHAR(255) 还是文本？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:27:03.140

如果文本/消息永远不会超过 250 个字符，`VARCHAR2(255)`则更建议使用。但是，如果在以后的日期/时间，您可能会增加它，您可以稍后再做。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:27:19.600

如果它们要短，请定义一个硬上限并使用 VARCHAR()。如果您认为它们不会超过 250 个字符，请调整大小`VARCHAR(512)`，让自己有足够的空间在瞬间改变主意。（无论如何，您总是可以稍后更改列定义）。

`TEXT`和`BLOB`类型确实适用于未知/未确定/无限长度的数据。如果定义限制没有问题，则定义一个并使用`VARCHAR()`. 您将从 中的排序和索引中获得更大的灵活性`VARCHAR()`，因为`TEXT`只能使用最多`max_sort_length`字节进行排序。

如果它对您的用例很重要，则不能为`TEXT`列分配默认值。

[MySQL 文档中详细介绍了`BLOB`& `TEXT`types](http://dev.mysql.com/doc/refman/5.5/en/blob.html)中的大部分内容。

# facebook - Facebook graph api - 检查我的朋友正在使用哪些应用程序

> ID：11177833
> 
> 赞同：0
> 
> 时间：2012-06-24T13:24:55.647
> 
> 标签：facebook, facebook-graph-api

我正在尝试构建一个 facebook 应用程序，它将作为我正在使用的所有应用程序和我的朋友正在使用的应用程序的门户。

用户可以进来，如果他和他的朋友正在使用的每个应用程序都可以看到缩略图，并且能够从门户中访问该应用程序。

我一直在查看 Facebook graph api，但我无法弄清楚如何做到这一点。甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:32:33.277

不，您无法获取用户正在使用的应用程序列表，也无法在用户使用您自己以外的特定应用程序时进行检查。

# database-design - 多语言数据库设计：耦合翻译表方法

> ID：11177834
> 
> 赞同：1
> 
> 时间：2012-06-24T13:24:56.263
> 
> 标签：database-design, multilingual

几天来，我一直在研究多语言和递归数据库设计。我发现以下文章很有趣：[http](http://www.gsdesign.ro/blog/multilanguage-database-design-approach/) ://www.gsdesign.ro/blog/multilanguage-database-design-approach/并喜欢第 4 种解决方案**Coupled Translation Table Approach**。但是我很困惑，因为我不明白这个案子；`id`我看到桌子上只有一列`pages`，我想我需要`id`先在`pages`桌子上增加价值。之后，我必须选择`id`值并在`pages_translation`表格上添加数据。

问题是这样的：我怎么知道哪个页面对应的值`id`？我应该怎么办？

你能给我一些关于你正在使用的多语言和递归数据库设计方法的想法吗？

**耦合翻译表法**

表语言

*   标识（整数）
*   名称（varchar）

表页

*   标识（整数）

表 pages_translation

*   标识（整数）
*   page_id (int)
*   language_id (int)
*   标题（文字）
*   内容（文字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T20:34:44.633

我正在使用文章中提出的第一种方法。我无法完全理解第三种和第四种方法，可能是因为我不是英语母语，也可能是因为我没有足够的知识。

关于缺点以及我如何解决它们：

*   您需要根据语言构建手表正在使用的列

我不确定这实际上意味着什么......

*   难以维护。尽管这对于 2-3 种语言来说是一种简单的方法，但当您有很多列或多种语言时，它会成为真正的拖累

如果您使用 phpMyAdmin 或类似的，这是事实。不久前，我刚刚创建了一个解决方案 - 仅供受信任的人使用 - 可以帮助我或受信任的翻译人员编辑许多和任何文本字符串。它不完整，我停止开发它，因为它“有效”，我的页面需要在其他更重要的领域做很多工作。如您所见，我只能选择我想要的列而不是同时选择所有列，并且还可以从全文字段更改为小输入（长字符串或短字符串）。其他有助于解决下一个缺点的脚本。

*   很难添加新语言

我还创建了另一个脚本，帮助逐个字符串翻译页面字符串，旨在供最终用户协作。

# java - 命令行立即返回新行

> ID：11177841
> 
> 赞同：0
> 
> 时间：2012-06-24T13:25:51.520
> 
> 标签：java, command-line, user-input

我正在编写一个命令行 Java 应用程序。我有一个处理终端输入/输出的类。我想问一个简单的是/否（y/n）问题。这是我的代码：

```
public boolean yn(String prompt) {
    // ask a yes/no question
    out(prompt);
    try {
        while(true) {
            char result = (char) br.read();
            out("\n");
            if( ( (Character) Character.toLowerCase(result) ).toString().equals("y") ) {
                return true;
            } else if( ( (Character) Character.toLowerCase(result) ).toString().equals("n") ) {
                return false;
            }
            // not y or n
            out(Messages.informYN);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
    return false;
} 
```

*br*是一个 BufferedReader 设置为

```
br = new BufferedReader(new InputStreamReader(System.in)); 
```

*out*只是输出文本

```
System.out.print(text); 
```

**问题是 br.read() 第一次在没有输入时立即返回一个新行。**

我对Java相当陌生，所以请放轻松。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:41:00.997

此方法从控制台读取，直到按下 [Enter]：

```
 public final String ConsoleReadln(String promptStr) {
    StringBuffer retSb = new StringBuffer();

    try {
        System.out.print(promptStr);
        byte[] buf = new byte[1];
        System.in.skip(System.in.available());
        int i = 0;
        char c = 0;
        do {
            if ( System.in.read(buf,0,1) > 0 ) {
                i = (int) buf[0]; if (i<0) i += 0x100; c = (char) i;
                if ((c != '\n') && (c != '\r')) retSb.append(c);
            }
        }
        while ((c != '\n') && (c != '\r')) ;
    } // try
    catch (Exception ex)  {
    }
    return retSb.toString();
} 
```

# java - Xpages - 获取活动会话数 (Lotus Domino 8.5.2)

> ID：11177842
> 
> 赞同：3
> 
> 时间：2012-06-24T13:25:55.967
> 
> 标签：java, session, jsf, listener, xpages

如何获取 Xpage 中的活动会话数。我正在尝试使用托管 bean，但它只返回一个奇怪的字符串。这是简单的代码：

```
导入 javax.servlet.http.HttpSessionEvent；
导入 javax.servlet.http.HttpSessionListener；

公共类 SessionCounterListener 实现 HttpSessionListener {

  私有静态int totalActiveSessions；

  公共静态 int getTotalActiveSessions(){
    返回总活动会话数；
  }

  公共无效会话创建（HttpSessionEvent arg0）{
    总活动会话++；
    System.out.println("sessionCreated - 添加一个会话到计数器");
  }

  公共无效会话销毁（HttpSessionEvent arg0）{
    totalActiveSessions--；
    System.out.println("sessionDestroyed - 从计数器中扣除一个会话");
  }
}

```

我从[这里](http://www.mkyong.com/servlet/a-simple-httpsessionlistener-example-active-sessions-counter)得到这个。但是当我调用时`SessionCounterListener.getTotalActiveSessions()`，它只返回 0（无论是否有人登录）。

[如果你有时间，你可以在这里](https://www.dropbox.com/s/zs098ne95t4cnl1/test_java.nsf)查看我的测试数据库。

请帮我。非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T04:16:49.340

必须在应用程序中注入会话侦听器才能按需要工作。否则 sessionCreated/sessionDestroyed 方法将永远不会被调用并且总是返回 0。但是 XPage 和“传统的”JSF 之间存在一些差异。看看这里：

[http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/00a38cdf382f4893862578b80082dd15!OpenDocument](http://www.openntf.org/projects/pmt.nsf/66d9103768cc2fed85256c59006b5433/00a38cdf382f4893862578b80082dd15!OpenDocument)

或者看看[XSP Starterkit](http://www.openntf.org/internal/home.nsf/project.xsp?action=openDocument&name=XSP%20Starter%20Kit)的内部。

**编辑：**

要添加会话侦听器，请执行以下操作：

1.  切换到java视角
2.  在“Code/Java”文件夹中，创建文件夹“META-INF”
3.  在这个 META-INF 文件夹中，创建一个文件夹“services”
4.  在“服务”文件夹中创建一个名为“com.ibm.xsp.core.events.SessionListener”的文件
5.  在此文件中，添加您的类的全名：package.SessionCounterListener

现在，应该激活会话侦听器。

# kendo-ui - 如何将日期绑定到剑道日期选择器

> ID：11177844
> 
> 赞同：0
> 
> 时间：2012-06-24T13:26:01.647
> 
> 标签：kendo-ui

我正在使用 Kendodatepicker。下面是我的代码。

```
<input id="datePicker" />
$(document).ready(function(){
 $("#datePicker").kendoDatePicker({
  value: new Date(),
  min: new Date(1950, 0, 1),
  max: new Date(2049, 11, 31)
 })
}); 
```

我想把日期选择器默认选择的值作为上个月的开始日期。请给我一个想法。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:11:48.307

尝试

```
$(document).ready(function(){
 var d = new Date().setDate(-1);

 $("#datePicker").kendoDatePicker({
   value: new Date(d),
   min: new Date(1950, 0, 1),
   max: new Date(2049, 11, 31)
 })
}); 
```

或者

```
$(document).ready(function(){     
  var d = new Date().setDate(-1);

  $("#datePicker").attr('value',new Date(d));
  $("#datepicker").kendoDatePicker();
}); 
```

可能它以超短的方式工作：

```
$(document).ready(function(){     
   $("#datePicker").kendoDatePicker({
     value: new Date().setDate(-1),
     min: new Date(1950, 0, 1),
     max: new Date(2049, 11, 31)
   })
 }); 
```

玩得开心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:27:14.147

首先使用 Date() 获取当前日期，然后减去一个月，然后将其设置为该月的第一天。

> $(文档).ready(函数() {
> 
> ```
> var lastMonthStart = new Date();
> with(lastMonthStart) {
>     setMonth(getMonth()-1);
>     setDate(1);
> }
> $("#datePicker").kendoDatePicker({
>     value: lastMonthStart,
>     min: new Date(1950, 0, 1),
>     max: new Date(2049, 11, 31)
> }) }); 
> ```

应该给你上个月的开始。

# ios - 如何在 iOS 5 中启动可停止的计算任务？

> ID：11177846
> 
> 赞同：0
> 
> 时间：2012-06-24T13:26:26.527
> 
> 标签：ios, background, progress-bar

我想开始一个持续几分钟的**计算任务。**由于**随着时间的推移解越来越接近最优解**，我想给用户一个按钮来随时**停止**计算并坚持使用近似值。

但是，当我在 viewDidLoad 中开始计算时，在计算结束之前，甚至不会向用户显示带有停止按钮的视图。所以我需要某种**后台计算过程**——但我如何在 iOS 5 上做到这一点？

我还希望能够在我的视图中**更新进度条**（使用停止按钮）。

这是我在 UIViewController 子类中的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // doing some initialization

    [self startCalculation]; // do this in background for stopping capabilities?
}

- (void)startCalculation {
    // start calculation and update progress bar every 200 ms or so
} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:32:39.050

一般的答案是`startCalculation`从内部调用`NSThread`

```
//thread is a property in your corrent class
NSThread *thread = [[NSThread alloc] initWithTarget:self selector:@selector(startCalculation) object:nil]; 
```

然后停止它

```
//when you want to stop the thread
[thread cancel]; 
```

如果您想从该线程中更新进度视图，请确保从 ui 主线程调用进度更新，如下所示

```
//in your calculation function, when you want to update the progressview
- (void)startGenerationProcess {
    //Calculations

    //update progress
    dispatch_async(dispatch_get_main_queue(), ^{
          //Update progress
    });

    //More Calculations
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:33:09.020

查看[NSThread](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsthread_Class/Reference/Reference.html)类或[NSOperation](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSOperation_class/Reference/Reference.html)的文档。

# android - 如何获取活动内部的服务对象？

> ID：11177847
> 
> 赞同：6
> 
> 时间：2012-06-24T13:26:31.957
> 
> 标签：android, android-asynctask, android-service

这是我的服务代码：

```
public class DownloadService extends Service {
    LocalBroadcastManager mLocalBroadcastManager;
    ArrayList<DownloadAsyncTask> dat = new ArrayList<DownloadAsyncTask>();
    @Override
    public IBinder onBind(Intent arg0) {
        return null;
    }

    @Override
    public void onStart( Intent intent, int startId ) {
          super.onStart( intent, startId );
          Log.d("service","DownloadService started");
    }
    public void startDownload(String url, String fname, ProgressBar pBar){
        int dID = dat.size();
        Log.d("status","dat length:"+dID);
        dat.add( new DownloadAsyncTask(url,fname,pBar));
        dat.get(dID).execute();
    }

    public void cancelDownload(String fname){
        for(DownloadAsyncTask da: dat){
            if(da.getName().equals(fname)){
                da.cancel(true);
            }
        }
    }

    public DownloadAsyncTask getDownloadByName(String fname){
        for(DownloadAsyncTask da: dat){
            if(da.getName().equals(fname)){
                return da;
            }
        }
        return null;
    }
    public ArrayList<DownloadAsyncTask> getAllDownloads(){
        return dat;
    }
    public class DownloadAsyncTask extends AsyncTask<String, Integer, String>{
        ProgressBar progressBar;
        File sdCard = Environment.getExternalStorageDirectory();
        File dir = new File (sdCard.getAbsolutePath() + "/com.ms.rightel.store/");
        int percentage = 0;
        static final int DOWNLOAD_STATUS_FINISHED = 1;
        static final int DOWNLOAD_STATUS_RUNNING = 0;
        static final int DOWNLOAD_STATUS_FAILED = -1;
        static final int DOWNLOAD_STATUS_PAUSED = 2;
        int status = DOWNLOAD_STATUS_RUNNING;
        double fileSize = 0;
        String downloadUrl,fileName;

        public DownloadAsyncTask(String url, String fname, ProgressBar pBar){
            downloadUrl = url;
            fileName = fname;
            progressBar = pBar;
        }
        public String getName(){
            return fileName;
        }
        public void replaceProgressBar(ProgressBar pBar){
            progressBar = pBar;
        }

        private boolean checkDirs(){
            if(!dir.exists()){
                return dir.mkdirs();
            }
            return true;
        }
        public int getDownloadStatus(){
            return status;
        }
        private long isIncomplete(){
            File from = new File(dir,fileName+"-incomplete");
            if(from.exists()){
                Log.d("status","download is incomplete, filesize:" + from.length());
                return from.length();
            }
            return 0;
        }

        @Override
        protected String doInBackground(String... params) {
                //fileName = downloadUrl.substring(downloadUrl.lastIndexOf("/")+1);
                if(!checkDirs()){
                    return "Making directories failed!";
                }
                try {
                    byte[] buffer = new byte[500];
                    int bufferLength = 0;
                    double downloadedSize = 0;
                    URL url = new URL(downloadUrl);
                    HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
                    urlConnection.setRequestMethod("GET");
                    urlConnection.setConnectTimeout(10000);
                    urlConnection.setReadTimeout(10000);
                    //Log.d("status","ReadTimeOut: "+urlConnection.getReadTimeout() + "ConnectTimeOut: "+urlConnection.getConnectTimeout());
                    long downloaded = isIncomplete();
                    if(downloaded > 0){
                        urlConnection.setRequestProperty("Range", "bytes="+(downloaded)+"-");
                        downloadedSize = downloaded;
                        fileSize = downloaded;
                    }
                    urlConnection.setDoOutput(true);
                    urlConnection.connect();
                    fileSize += urlConnection.getContentLength();
                    FileOutputStream fos = new FileOutputStream(new File(dir,fileName+"-incomplete"),true);
                    InputStream inputStream = urlConnection.getInputStream();
                    while ( (bufferLength = inputStream.read(buffer)) > 0 ) 
                    {
                        if(isCancelled()){
                            break;
                        }
                        fos.write(buffer, 0, bufferLength);
                        downloadedSize += bufferLength;
                        percentage = (int) ((downloadedSize / fileSize) * 100);
                        publishProgress(percentage);
                        //Log.d("status","downloading: " + downloadedSize+"/"+fileSize+" ("+percentage+"%)");
                    }
                    fos.close();
                    urlConnection.disconnect();
                } catch (Exception e) {
                    Log.e("Download Failed","Error: " + e.getMessage());
                    return "Download failed";
                }
                if(isCancelled()){
                    return "Download cancelled";
                }
            return "Download complete";
        }
        @Override
        protected void onProgressUpdate(Integer... values){
            super.onProgressUpdate(values[0]);
            if(progressBar != null){
                progressBar.setProgress(values[0]);
            }else{
                Log.w("status", "ProgressBar is null, please supply one!");
            }
        }

        @Override
        protected void onPreExecute(){
            mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_STARTED"));
        }

        @Override
        protected void onPostExecute(String str){
            if(str.equals("Download complete")){
                File from = new File(dir,fileName+"-incomplete");
                File to = new File(dir,fileName);
                from.renameTo(to);
                mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_FINISHED"));
            }
            if(str.equals("Download failed")){
                mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_FAILED"));
            }
        }

        @Override
        protected void onCancelled(){
            mLocalBroadcastManager.sendBroadcast(new Intent("org.test.download.DOWNLOAD_CANCELLED"));
        }

    }

} 
```

我正在使用此服务来管理多个下载。现在我需要在不同的活动中访问这个服务对象，以便能够添加到下载或获取当前正在运行的下载列表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T18:59:13.810

好吧，我是通过使用单音来完成的。我在类中添加了一个静态变量，由`null`. 然后在`onStart`方法内部，我将类的当前实例分配给这个静态变量，然后使用静态方法返回实际对象。

```
private static DownloadService self = null;
public static DownloadService getServiceObject(){
    return self;
}
@Override
public void onStart( Intent intent, int startId ) {
   super.onStart( intent, startId );
   self = this;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:41:50.153

你可以将数据从活动传递到您的服务：

```
Intent myIntent = new Intent(MainActivity.this, DownloadService.class);
Bundle bundle = new Bundle();
bundle.putCharSequence("extraData", "DATA YOU WANT TO SEND SERVICE");
myIntent.putExtras(bundle);
pendingIntent = PendingIntent.getService(MainActivity.this, 0, myIntent, 0); 
```

并在下载服务

```
public void onStart(Intent intent, int startId) {
 // TODO Auto-generated method stub
 super.onStart(intent, startId);

 Bundle bundle = intent.getExtras();
 data = (String) bundle.getCharSequence("extraData");
 smsTextToSend = (String) bundle.getCharSequence("extraSmsText");
 ...
} 
```

以及在服务和活动之间进行通信的另一个选项使用自定义广播接收器

[请参阅此示例](http://android-coding.blogspot.in/2011/11/pass-data-from-service-to-activity.html)以使用 BroadcastReceiver 在服务和 Activity 之间进行通信：

[服务和活动之间的通信](http://androidexperinz.wordpress.com/2012/02/14/communication-between-service-and-activity-part-1/)

# css - 条件 CSS 语句

> ID：11177849
> 
> 赞同：-3
> 
> 时间：2012-06-24T13:26:39.850
> 
> 标签：css

文件/网页包含以下附加的外部级联样式表

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="css/a.css" rel="stylesheet" type="text/css" />
<link href="css/b.css" rel="stylesheet" type="text/css" />
<link href="css/c.css" rel="stylesheet" type="text/css" />
<link href="css/d.css" rel="stylesheet" type="text/css" />
</head> 
```

如果我只想在所有样式表中对 a.css 使用多个浏览器特定的条件语句，那么其他样式表（如 b.css、c.css 和 d.css）应该如何放置在 head 标记中？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:31:38.593

答案可能很简单

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<link href="css/a.css" rel="stylesheet" type="text/css" />
<!--[if IE ]>
<link href="/css/a@internetexplorer.css" rel="stylesheet" type="text/css">
<![endif]-->
<link href="/css/a@webkit.css" media="screen and (-webkit-min-device-pixel-ratio:0)" rel="stylesheet" type="text/css" />
....and so on
// Other external css files shall go below this line within the head tag
<link href="css/b.css" rel="stylesheet" type="text/css" />
<link href="css/c.css" rel="stylesheet" type="text/css" />
<link href="css/d.css" rel="stylesheet" type="text/css" />
</head> 
```

由于某些未知原因，我在本地主机上的浏览器忽略了条件注释下方的其他 css 文件，这些文件对于正确答案根本不可数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T15:42:25.533

像这样使用条件注释......

```
<!--if [browser-specific condition statement/s]>
<link href="css/a.css" rel="stylesheet" type="text/css" />
<![endif]--> 
```

根据需要注入条件。

# android - Android：光标越界异常

> ID：11177853
> 
> 赞同：1
> 
> 时间：2012-06-24T13:27:00.147
> 
> 标签：android, sqlite

我有一个程序，您可以在其中单击一个按钮，然后会弹出一个带有一堆复选框的对话框。您选择几个复选框，然后单击“确定”。我想要做的是拥有它，这样当您按下确定时，对于您检查的每个值，它将在多个数据库表中搜索包含该值的行，从这些行中获取信息，并将它们放在不同的表中。出于某种原因，我一直让这个光标超出边界异常，老实说，我不知道为什么。我尝试了一堆我在搜索时发现的东西，但我无法让它工作。

这是单击确定时发生的情况：

```
ok.setOnClickListener(new View.OnClickListener(){
    public void onClick(View v) {

        if (dumbbells.isChecked()==true){
            equip = "dumbbells";
            AddToEquipTable(equip);
        }
        if (barbell.isChecked()==true){
            equip = "Barbell";
            AddToEquipTable(equip);
        }
        if (cablemachine.isChecked()==true){
            equip = "Cable Machine";
            AddToEquipTable(equip);
        }
        if (pullupbar.isChecked()==true){
            equip = "Pull Up Bar";
            AddToEquipTable(equip);
        }
        if (legpressmachine.isChecked()==true){
            equip = "Leg Press Machine";
            AddToEquipTable(equip);
        }
        if (legextensionmachine.isChecked()==true){
            equip = "Leg Extension Machine";
            AddToEquipTable(equip);
        }
        if (hamstringcurlmachine.isChecked()==true){
            equip = "Hamstring Curl Machine";
            AddToEquipTable(equip);
        }
        if (kettlebells.isChecked()==true){
            equip = "Kettlebells";
            AddToEquipTable(equip);
        }
        if (none.isChecked()==true){
            equip = "None";
            AddToEquipTable(equip);
        }

    }
}); 
```

这是我创建的“AddToEquipTable”方法：

```
public void AddToEquipTable(String equip){

ExerciseDatabase equipment = new ExerciseDatabase(WorkMeOutActivity.this);
try {
    equipment.open();
} catch (SQLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

equipment.AddToEquipmentDBFromBiceps(equip);
equipment.AddToEquipmentDBFromChest(equip);
equipment.AddToEquipmentDBFromBack(equip);
equipment.AddToEquipmentDBFromTriceps(equip);
equipment.AddToEquipmentDBFromShoulders(equip);
equipment.AddToEquipmentDBFromLegs(equip);
equipment.AddToEquipmentDBFromCompound(equip);

equipment.close();
} 
```

这是它在我的 DB Helper Activity 中调用的方法之一。除了被调用的表名之外，它们都是相同的。

```
public String AddToEquipmentDBFromBiceps(String equip) {
    // TODO Auto-generated method stub
    String[] columns = new String[]{KEY_REPS, KEY_EXERCISE, KEY_TIMETYPE};
    ContentValues cv = new ContentValues();
    Cursor c = ourDatabase.query(DATABASE_BICEPSTABLE, columns, KEY_EQUIP + "='" + equip + "'", null, null, null, null);

    if (c == null){
        return null;
    }
    else if(c != null){

        c.moveToFirst();

        int iReps = c.getColumnIndex(KEY_REPS);
        int iExercise = c.getColumnIndex(KEY_EXERCISE);
        int iTimeType = c.getColumnIndex(KEY_TIMETYPE);

        do{

            String reps = c.getString(iReps);
            String exercise = c.getString(iExercise);
            String time = c.getString(iTimeType);

            cv.put(KEY_REPS, reps);
            cv.put(KEY_EXERCISE, exercise); 
            cv.put(KEY_TIMETYPE, time);

            ourDatabase.insert(DATABASE_CHOSEN_EQUIP_TABLE, null, cv);

            c.moveToNext();

            }while(KEY_EQUIP == equip);
        }

    return null;
} 
```

**更改条件后的错误日志如下所示：

```
06-24 09:34:42.785: E/AndroidRuntime(20592): FATAL EXCEPTION: main
06-24 09:34:42.785: E/AndroidRuntime(20592): android.database.CursorIndexOutOfBoundsException: Index 0 requested, with a size of 0
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at com.work.me.out.ExerciseDatabase.AddToEquipmentDBFromLegs(ExerciseDatabase.java:896)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at com.work.me.out.WorkMeOutActivity.AddToEquipTable(WorkMeOutActivity.java:456)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at com.work.me.out.WorkMeOutActivity$9.onClick(WorkMeOutActivity.java:395)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.view.View.performClick(View.java:2538)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.view.View$PerformClick.run(View.java:9152)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.os.Handler.handleCallback(Handler.java:587)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.os.Handler.dispatchMessage(Handler.java:92)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.os.Looper.loop(Looper.java:130)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at android.app.ActivityThread.main(ActivityThread.java:3687)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at java.lang.reflect.Method.invokeNative(Native Method)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at java.lang.reflect.Method.invoke(Method.java:507)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
06-24 09:34:42.785: E/AndroidRuntime(20592):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T13:30:52.687

可能你的情况不好，改变你的：

```
while (c.moveToNext() && KEY_EQUIP == equip); 
```

**注意：**我还建议您使用`parametrized statements`更安全、更快、更清晰的。

* * *

> CursorIndexOutOfBoundsException: 请求索引 0，大小为 0

这意味着`cursor.moveToFirst()`返回 false 并且`Cursor`为空。所以尝试添加这个片段并尝试一下。

```
else if(c != null && c.moveToFirst()) {
        int iReps = c.getColumnIndex(KEY_REPS);
        int iExercise = c.getColumnIndex(KEY_EXERCISE);
        int iTimeType = c.getColumnIndex(KEY_TIMETYPE);
        do {
            String reps = c.getString(iReps);
            String exercise = c.getString(iExercise);
            String time = c.getString(iTimeType);

            cv.put(KEY_REPS, reps);
            cv.put(KEY_EXERCISE, exercise); 
            cv.put(KEY_TIMETYPE, time);

            ourDatabase.insert(DATABASE_CHOSEN_EQUIP_TABLE, null, cv);
            } while (c.moveToNext() && KEY_EQUIP == equip);
        } 
```

尝试使用`rawQuery`类似这样的方法：

```
final String SELECT_QUERY = "SELECT " + KEY_REPS + ", " + KEY_EXERCISE + ", " + KEY_TIMETYPE + " FROM " + DATABASE_BICEPSTABLE + " WHERE " + KEY_EQUIP + " = ?";
Cursor c = db.rawQuery(SELECT_QUERY, new String[] {equip}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:53:36.177

在尝试访问任何数据（特别是行）之前，您必须确保指向光标的第一行`c.getColumnIndex(KEY_XXX)`。您在`c.moveToFirst()`没有检查结果的情况下调用了（在您的情况下应该返回 false，因为没有数据行。

```
if(c != null && c.moveToFirst()) {
    int iReps = c.getColumnIndex(KEY_REPS);
    int iExercise = c.getColumnIndex(KEY_EXERCISE);
    int iTimeType = c.getColumnIndex(KEY_TIMETYPE);

    do {
        String reps = c.getString(iReps);
        String exercise = c.getString(iExercise);
        String time = c.getString(iTimeType);

        cv.put(KEY_REPS, reps);
        cv.put(KEY_EXERCISE, exercise); 
        cv.put(KEY_TIMETYPE, time);

        ourDatabase.insert(DATABASE_CHOSEN_EQUIP_TABLE, null, cv);    
    } while(c.moveToNext() && KEY_EQUIP == equip);
} else {
    return null;
} 
```

请注意，在`do..while`这里使用循环而不是常规循环很重要，因为在它之后直接`while`调用意味着您缺少第一行游标数据！`c.moveToFirst()``c.moveToNext()`

# ios - 为 iOS 构建 Web 服务

> ID：11177855
> 
> 赞同：0
> 
> 时间：2012-06-24T13:27:03.670
> 
> 标签：ios, web-services

我想实现一个用户参与收集信息并自动在线提交的 iOS 应用程序。我需要有关如何构建 Web 服务以适应应用程序需求的建议。有人可以指出一些有关如何执行此操作的资源。有人告诉我，Node JS 将是一种简单快捷的方式来做到这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:37:55.070

你可以使用任何你喜欢的 PHP、Asp、Java 等。

我建议PHP，这是一个[简单的教程](http://davidwalsh.name/web-service-php-mysql-xml-json)

# php - php ext_skel_win32.php 文件

> ID：11177862
> 
> 赞同：0
> 
> 时间：2012-06-24T13:27:36.410
> 
> 标签：php

我正在尝试在 Windows 上编写一些简单的 php 扩展。根据教程，我需要使用 ext_skel_win32.php，但在我的 php 安装中找不到它。

我在哪里可以找到这个文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T13:33:53.440

不知道你是否应该拥有它，但你在这里：

> [http://pastebin.com/raw.php?i=Y6ubk054](http://pastebin.com/raw.php?i=Y6ubk054)

# web-services - 移动应用程序和支持网络应用程序的架构

> ID：11177868
> 
> 赞同：1
> 
> 时间：2012-06-24T13:28:12.127
> 
> 标签：web-services, mobile, architecture, amazon-web-services

抱歉，如果我的问题似乎过于笼统，我有一个移动应用程序的想法，我打算将其作为业余爱好。我从来没有从头开始构建过这样的系统，因此考虑到我只有晚上和周末来处理这个项目，架构决策变得非常重要。

据我所知，移动应用程序通常由提供类似甚至更广泛服务的网站支持。我的目标移动受众将是 android 和 ios。我的计划是拥有一个与 db 交互的服务，在更高级别上，一个 iPhone 应用程序、android 应用程序和一个功能齐全的网站将与这个通用服务/公共代码库进行对话。我正在考虑使用一个restful api，并将json传输到所有这三个平台。这听起来像是一个好方法吗？

同样从托管的角度来看，什么更具成本效益？我比 php 更熟悉 asp.net 或 java 中的编码，像 symfony 这样的 web 框架可以为我节省时间和金钱，还是只会让事情复杂化？据我所知，AWS 托管 .net 应用程序的费率更高。对于数据库，我想像foursquare那样使用mongodb，因为我将存储大量地理数据。

如果您过去经历过类似的决策过程，请随时分享您的经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:47:34.067

如果您正在尝试实现应用创意，我强烈建议您使用后端即服务 (BaaS) 提供商，例如：

*   [StackMob](https://www.stackmob.com)
*   [解析](https://www.parse.com)
*   [金维](http://www.kinvey.com/)

还有更多……这里有[一篇关于这种服务的好文章](http://readwrite.com/2012/04/17/mobile-backend-as-a-service-ec)。他们中的大多数都提供免费使用层，让您可以在完全不产生任何托管费用的情况下将您的应用程序投入生产。如果成功，那么您可以根据需要扩大规模。

# android - 蓝牙共享 - 安卓

> ID：11177882
> 
> 赞同：0
> 
> 时间：2012-06-24T13:30:31.833
> 
> 标签：android, eclipse, bluetooth, nxt, mindstorms

我在网上搜索了很长时间，以寻找 android (eclipse) 与另一个蓝牙设备的完整蓝牙通信示例。我找到了一些代码，但没有一个有效。我正在开发将与乐高头脑风暴 nxt 通信的应用程序。如果有人可以向我展示一个完整代码的清晰示例，其中包含从开始执行蓝牙通信到发送和接收简单消息（如数字）的所有步骤，我将很高兴。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:20:20.737

这是工作代码：[https ://github.com/borismus/android-nxt](https://github.com/borismus/android-nxt)

您将找到建立连接和发送数据所需的一切，我还有另一个 Mindstormer 同事发送给我的示例（一个使用 android 罗盘传感器的项目）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T07:14:43.700

sourceforge 上的 lejos 站点上有一个示例：

[http://lejos.sourceforge.net/nxt/nxj/tutorial/Android/Android.htm](http://lejos.sourceforge.net/nxt/nxj/tutorial/Android/Android.htm)

不幸的是，引用的代码必须在其他地方下载：

[https://github.com/Shawn-in-Tokyo/leJOS-Droid](https://github.com/Shawn-in-Tokyo/leJOS-Droid)

重要提示：这个例子是 fpr lejos 0.8 制作的，0.9.x 版本的 API 有一些变化，很容易适应。我让它在 leJos 0.9.1 上运行，但你也可以使用 0.8。如果你能做到，请联系我以及你是如何做到的：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T15:03:49.960

我们做了类似的事情，除了使用微控制器：

[http://code.google.com/p/projectneo/](http://code.google.com/p/projectneo/)

都是开源的，浏览一下代码：

[http://code.google.com/p/projectneo/source/browse/#svn%2FProjectNEO%2Fbranches%2Fv2](http://code.google.com/p/projectneo/source/browse/#svn%2FProjectNEO%2Fbranches%2Fv2)

看`BluetoothUtils`,和`SendService`_`SendJob``ReceiveJob`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:37:28.320

好吧，您首先需要查看 Android 开发人员指南中的一些示例示例

请参阅[蓝牙通信](http://developer.android.com/reference/android/bluetooth/package-summary.html)的开发人员页面。

我发现[这](http://www.karelbruneel.com/blog/2011/01/steering-wheel/)可以帮助您开始创建应用程序。

# c# - C#如何在通过Windows窗体上的控件迭代时获取所需的控件（ImageList）

> ID：11177893
> 
> 赞同：0
> 
> 时间：2012-06-24T13:32:27.343
> 
> 标签：c#, forms, loops, imagelist

在加载 Windows 窗体 (C#) 时，我正在尝试遍历所有控件。所以我在 public Form1() 中写代码

我的表单上有 5 个 ImageList 控件，我想根据字符串表达式选择一个 ImageList 控件。

任何人都可以帮助实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:51:23.160

ImageList 不是控件，因此您无法通过迭代表单的 Controls 集合来找到它们。假设您的意思是设置焦点，“选择”不是一个有效的操作。它在运行时不可见。

通过“组件”字段找到它们，如下所示：

```
 foreach (Component comp in this.components.Components) {
            var ilist = comp as ImageList;
            if (ilist != null) {
                // Got one, do something with it
                //...
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:38:30.603

`ImageList`是一个组件，而不是一个控件。
它不会被添加到任何集合中。

相反，您可以`Dictionary<string, ImageList>`自己制作。

# tomcat - JNDI tomcat 到 weblogic

> ID：11177898
> 
> 赞同：0
> 
> 时间：2012-06-24T13:32:59.980
> 
> 标签：tomcat, weblogic, jndi, weblogic12c

如果 Tomcat 7 的 JNDI 前缀是“java:/comp/Resources”，那么 weblogic 12c 应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:54:45.920

它应该如下所示：

```
java:/comp/env/... 
```

# ruby-on-rails - 将时间合并到日期时间以更新日期时间

> ID：11177899
> 
> 赞同：3
> 
> 时间：2012-06-24T13:33:05.847
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我需要更新 DateTime 中的时间信息。

我得到一个格式为“14”或“14:30”（例如）的字符串，所以我需要将它提供给时间解析器以获得正确的时间。然后我需要更新`self.start_at`这是一个已经有时间的日期时间，但我需要更新它。

```
self.start_at_hours = Time.parse(self.start_at_hours) # example 14:30:00
# NEED TO UPDATE self.start_at which is a datetime 
```

我正在使用该`change`方法，`self.start_at`但它只需要`hour`和`minutes`分离，我不确定我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:43:09.600

你有没有想过做这样的事情？

```
time_to_merge = Time.new
date_to_merge = Date.today
merged_datetime = DateTime.new(date_to_merge.year, date_to_merge.month,
                               date_to_merge.day, time_to_merge.hour,
                               time_to_merge.min, time_to_merge.sec) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T20:33:56.940

对于替换时间，该`.change()`方法应该有效，如下所示：

```
my_datetime = my_datetime.change(hour: my_time.hour, min: my_time.min, sec: my_time.sec) 
```

要添加时间，请尝试转换为秒，然后添加它们：

```
my_datetime += my_time.seconds_since_midnight.seconds 
```

# tastypie - Tastypie build_filters 访问 tp request.user

> ID：11177902
> 
> 赞同：1
> 
> 时间：2012-06-24T13:33:16.337
> 
> 标签：tastypie

有什么方法可以访问在美味派中在 build_filters 覆盖中发起请求的用户。

我想使用登录用户为其中一个过滤器提供上下文，例如过滤器包含 Home 一词，我想用它来查找请求用户的位置以找到他们的家庭地址。

如果构建过滤器将请求作为参数，这将很容易，因为我可以简单地调用

```
request.user.get_profile().userlocation_set.get(name_iexact=filters['location']) 
```

无论如何强制用户进入过滤器列表，或者在将参数传递给 build_filters 之前丰富获取参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-20T14:25:05.010

仍然没有一个很好的方法。我目前正在`obj_get_list`像这样覆盖，以便我可以手动将捆绑对象传递给`build_filters`：

```
def obj_get_list(self, bundle, **kwargs):
    filters = {}

    if hasattr(bundle.request, 'GET'):
        filters = bundle.request.GET.copy()

    filters.update(kwargs)
    applicable_filters = self.build_filters(filters=filters, bundle=bundle)

    try:
        objects = self.apply_filters(bundle.request, applicable_filters)
        return self.authorized_read_list(objects, bundle)
    except ValueError:
        raise BadRequest("Invalid resource lookup data provided (mismatched type).") 
```

目前有一个针对此更改的公开拉取请求：

[https://github.com/toastdriven/django-tastypie/pull/901](https://github.com/toastdriven/django-tastypie/pull/901)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T11:32:24.163

我还没有找到办法做到这一点。我通常通过将代码添加到会话可用的 apply_authorization_limits 来“作弊”。

# html - (X/)HTML: 的含义

> ID：11177905
> 
> 赞同：1
> 
> 时间：2012-06-24T13:34:07.980
> 
> 标签：html, spry

[我想知道Click Here的语义。在这种情况下，井号键的含义是什么？我刚刚在 Dreamweaver 中添加了一个 Spry 菜单栏小部件，一旦将小部件添加到页面中，我就可以在代码中看到这个符号。我熟悉在 URL 中使用井号键的结构，例如 Here。然后](#)[单击此处。](http://myhost.com/mypage#foo)在页面的其他地方。单击第二个 a 元素会将您带到页面中标记为“foo”的部分。但是，我想知道上面提到的单击此处的含义。特别是，这个构造做什么以及如何使用它？

谢谢，

约翰·戈切

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T13:35:03.660

它是一个片段标识符，就像任何其他带有 的链接一样`#`，尽管在这种情况下它标识了文档的顶部。`<a href="#">`通常用于附加了 JavaScript 的链接。

# sql - 具有可选参数的实体框架和存储过程

> ID：11177912
> 
> 赞同：2
> 
> 时间：2012-06-24T13:34:35.810
> 
> 标签：sql, entity-framework, stored-procedures, optional-parameters

有没有办法让该`Map Entity to Functions`部分忽略可选参数？

我有一个`set_X`存储过程，如果我将副本另存为`insert_X`（并删除`ID`参数，那么它工作正常。否则我会收到错误（我认为因为它在过程的 IN 和 OUT 上都映射了 ID（？））：

> 无法确定相关操作的有效排序。由于外键约束、模型要求或存储生成的值，可能存在依赖关系。

那么有什么方法可以告诉它忽略这个属性而不在我的模型实体中添加一个新的虚拟属性？

编辑：

我已经计算出，如果我添加一个新属性，例如`NewID`then 我可以将它映射到`@ID`我的存储过程的参数，而无需......但这会导致我在我的模型实体中有一个额外的属性。有什么方法可以将 EF 中的存储过程参数映射到固定值（例如`NULL`或`0`），而无需向我的实体添加新属性。

# c# - 使用 keybd_event 后键盘混乱

> ID：11177914
> 
> 赞同：-4
> 
> 时间：2012-06-24T13:34:54.250
> 
> 标签：c#, keyboard

嗨，我有 ac# 应用程序，它使用 keybd_event 虚拟模拟按键。当我运行应用程序时，所有按键都可以正常工作。但是，在我关闭应用程序后，键盘上的某些键会变得混乱，因为当我按下某个键时，默认命令不会发生。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:59:10.633

我假设您忘记释放您以编程方式“按下”的修饰键。确保使用您按下的每个键`keybd_event`的选项进行呼叫。`KEYEVENTF_KEYUP`

这是按`Ctrl`+的示例`Q`：

```
keybd_event(VK_CONTROL, 0, 0, 0);
keybd_event(VK_Q, 0, 0, 0);
keybd_event(VK_Q, 0, KEYEVENTF_KEYUP, 0);
keybd_event(VK_CONTROL, 0, KEYEVENTF_KEYUP, 0); 
```

如果您忘记了最后一行，那么您随后的所有按键操作（即使是用户手动执行的）都将被解释为`Ctrl`按键仍被按下。

# python - Python 和 Django 运行失败【python manage.py sql application】

> ID：11177915
> 
> 赞同：0
> 
> 时间：2012-06-24T13:35:01.060
> 
> 标签：python, django, django-models, python-3.x, django-admin

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "D:\PythonPack\lib\site-packages\django\core\management\__init__.py", lin
e 443, in execute_from_command_line
    utility.execute()
  File "D:\PythonPack\lib\site-packages\django\core\management\__init__.py", lin
e 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "D:\PythonPack\lib\site-packages\django\core\management\base.py", line 19
6, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "D:\PythonPack\lib\site-packages\django\core\management\base.py", line 23
2, in execute
    output = self.handle(*args, **options)
  File "D:\PythonPack\lib\site-packages\django\core\management\base.py", line 30
4, in handle
    app_output = self.handle_app(app, **options)
  File "D:\PythonPack\lib\site-packages\django\core\management\commands\sqlall.p
y", line 19, in handle_app
    return u'\n'.join(sql_all(app, self.style, connections[options.get('database
')])).encode('utf-8')
  File "D:\PythonPack\lib\site-packages\django\core\management\sql.py", line 145
, in sql_all
    return sql_create(app, style, connection) + sql_custom(app, style, connectio
n) + sql_indexes(app, style, connection)
  File "D:\PythonPack\lib\site-packages\django\core\management\sql.py", line 26,
 in sql_create
    tables = connection.introspection.table_names()
  File "D:\PythonPack\lib\site-packages\django\db\backends\__init__.py", line 89
5, in table_names
    cursor = self.connection.cursor()
  File "D:\PythonPack\lib\site-packages\django\db\backends\__init__.py", line 30
6, in cursor
    cursor = self.make_debug_cursor(self._cursor())
  File "D:\PythonPack\lib\site-packages\django\db\backends\sqlite3\base.py", lin
e 281, in _cursor
    self._sqlite_create_connection()
  File "D:\PythonPack\lib\site-packages\django\db\backends\sqlite3\base.py", lin
e 271, in _sqlite_create_connection
    self.connection = Database.connect(**kwargs)
sqlite3.OperationalError: unable to open database file 
```

我按照本教程[https://docs.djangoproject.com/en/dev/intro/tutorial01/](https://docs.djangoproject.com/en/dev/intro/tutorial01/)尝试执行命令时遇到上述错误

```
python manage.py sql polls 
```

任何人都知道可能是什么问题？十分感谢。

[**更新**]**强文本**经理=管理员

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'E:\Python\mysite\sqlitedb', # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
}

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'polls',
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:36:45.570

Sqlite3 需要数据库文件的完整路径。确保您的数据库名称不是相对路径。

应该是这样的：

```
import os
PROJECT_ROOT = os.path.dirname(os.path.realpath(__file__))
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite',
        'NAME': os.path.join(PROJECT_ROOT, 'dev.db'),
        'USER': '',
        'PASSWORD': '',
        'HOST': '',
        'PORT': '',
    }
} 
```

还要确保该文件没有太严格的权限。

# php - 页面重新加载后主干和下划线未定义

> ID：11177920
> 
> 赞同：1
> 
> 时间：2012-06-24T13:35:38.073
> 
> 标签：php, javascript, backbone.js, requirejs

我正在使用 require.js 来加载主干和我的其他脚本，但是我收到一个错误，说重新加载页面后没有定义主干。

我的标题中有以下脚本

```
//App namespace
var MYU = MYU || {};
//configuration namespace
MYU.Config = MYU.Config || {};
//views namespace
MYU.Views = MYU.Views || {};
//controllers
MYU.Controller = MYU.Controller || {};
//configuration
MYU.Config = {
    site_url:"http://localhost/myunivacity/"
};

//Require.js configuration
require.config({
    paths : {
        'backbone': 'backbone',
        'underscore':'underscore',
        'text':'require/text',
        'myu':'myu'
    },
    baseUrl : MYU.Config.site_url+"assets/js"
}); 
```

我的主脚本是通过 require.js 加载的

```
<script type="text/javascript" data-main="<?=$script ?>" src="<?=site_url() ?>assets/js/require/require.min.js"></script> 
```

$script 变量保存要在当前页面上使用的脚本的路径

在正在使用的页面中，脚本是这样的

```
require(['underscore','backbone','controllers/cart','views/cart'], //Load dependecies
    function(){
      var cart = new MYU.Views.Cart();
    }); 
```

主干未定义的原因可能是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T14:28:44.320

以正确的顺序加载 jquery、下划线和主干有点棘手。我会推荐托马斯戴维斯的方法：[https ://github.com/thomasdavis/backbonetutorials/tree/gh-pages/examples/modular-backbone](https://github.com/thomasdavis/backbonetutorials/tree/gh-pages/examples/modular-backbone)

# gdb - 在 Mips 上生成符号文件 (.sym)

> ID：11177922
> 
> 赞同：0
> 
> 时间：2012-06-24T13:35:41.750
> 
> 标签：gdb, mips, debug-symbols

是否有任何命令/实用程序可以从 MIPS 平台的可执行文件生成符号文件 (.sym)？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:48:42.543

您是否尝试使用“nm”命令行实用程序？这够好吗？尝试：nm -C

# php - 为什么下载的文件没有下载，而是显示在浏览器中？

> ID：11177926
> 
> 赞同：0
> 
> 时间：2012-06-24T13:36:12.633
> 
> 标签：php, download

我将我网站中的访问者从页面 A 重定向到页面 B。在页面 BI 中，希望用户获取下载的 PDF 文件（在页面 B 加载时下载）。我从另一篇文章中获取了代码（请参阅[此处回答的上一个问题](https://stackoverflow.com/questions/2853287/php-open-a-file-download-dialog)），我的 B 页代码如下：

```
<?php
header('Content-Disposition: attachment; filename=nature.pdf');
header('Content-type: application/pdf'); 
$fn=fopen("/wp-content/nature.pdf","r");
fpassthru($fn);
?> 
```

输出不是通过打开下载对话框，而是在浏览器中显示一些不可读的字符，如下所示（我刚刚在下面挑选了一个小示例）：

> %PDF-1.4 %���� 3 0 obj <>流 x���MK1�o�+�$zIg&�� V=T�=Xo����K��i+#V�yx3��඀ （BX�pW`

服务器：操作系统Linux；PHP版本：5.2.17

访问者 -> 浏览器：Firefox；操作系统：Windows 2000

是否可能由于客户端的旧操作系统而失败？如果没有，有人知道如何强制下载的解决方案吗？任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:41:26.957

尝试使用 Content-Length 标头：

```
ob_clean(); ob_start();
header('Content-Disposition: attachment; filename=nature.pdf');
header('Content-type: application/pdf'); 
header ("Content-Length: ".filesize("/wp-content/nature.pdf"));
readfile("/wp-content/nature.pdf");
exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:16:52.047

首次引入 Content-disposition 时，真正旧的浏览器有一个怪癖，一些真正旧的浏览器不会显示“另存为”对话框，除非它无法识别您尝试打开的文件类型。尝试将 Content-type 设置为空（或无法识别的内容），看看这是否会强制旧版浏览器弹出另存为对话框。

```
header('Content-type: '); 
```

如果可行，那么我建议在运行该行之前添加一行 PHP 以检测它们是否在旧浏览器上，因为现代浏览器将使用该标题来确定应该用什么程序打开文件。

# php - 如何构建包含周围 html 且仅匹配 3 次的正则表达式替换

> ID：11177937
> 
> 赞同：0
> 
> 时间：2012-06-24T13:37:36.700
> 
> 标签：php, regex, preg-replace, preg-match

我将以下字符串重复了很多次（大约 10 次）

```
<br />
<a href="http://www.someurl.com/someimage.jpg" target="_blank">SOME TEXT</a> 
```

现在我想匹配那段代码，并基本上将它完全从我的字符串中剥离出来。问题是图像 URL 和“某些文本”总是不同的，我只需要对字符串中此组合的前 3 个实例（包括换行符-br）重复此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:58:37.400

**用 regex 解析 HTML**是个坏主意，但如果你还是想这样做，那么使用：

*PHP代码：*

```
preg_replace('/<br\s*\/>\s*<a href="[^"]*" target="_blank">[^<]*<\/a>/', '', $str, 3); 
```

# operating-system - 如何解决逻辑地址空间和物理地址空间的计算？

> ID：11177943
> 
> 赞同：13
> 
> 时间：2012-06-24T13:38:18.417
> 
> 标签：operating-system

当逻辑地址空间为 8 页，每页 1024 字，映射到 32 帧的物理内存时，如何计算逻辑地址和物理地址的位数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-01-27T18:40:24.593

15是正确答案

我认为这是正确的逻辑地址空间大小是页数 * 页面大小 = 8 * 1024 = 2^3 * 2 ^10 = 2^13 逻辑地址的位数是 13

物理地址空间的大小为 2^5 * 2^10 = 2^15 物理地址的位数为 15

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-12-07T18:54:58.387

考虑以下房间/楼层类比：酒店的每个楼层包含 10 个房间。每个房间的门都标有01、02、03、...、10。然后你下电梯，有一块牌匾，上面写着楼层号。这家酒店共有 3 层：1、2 和 3 层。因此，可以说，为了消除房间号的歧义，您可以将楼层号连接到房间，格式如下：地板：房间。因此，1:01 不同于 2:01 或 3:01。

## 以图形方式查看：

## 1 | 01 | 02 | 03 | 04 | 05 | 06 | 07 | 08 | 09 | 10 |

## 2 | 01 | 02 | 03 | 04 | 05 | 06 | 07 | 08 | 09 | 10 |

## 3 | 01 | 02 | 03 | 04 | 05 | 06 | 07 | 08 | 09 | 10 |

楼层号可以用一位数字表示。房间号可以用两位数表示。要表示房间的唯一位置（楼层：房间连接），您需要三位数字。用框架代替地板，用页面代替房间。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-10T06:54:17.463

逻辑地址空间中有 8 个页面，`2^3 = 8`那么页面大小为 3 位
我们有 1024 个字（1 个字 = 2 个字节），`1024 * 2 = 2048 bytes`
我们可以说，`2^11 = 2048`那么就有`11 + 3 = 14-bits`一个逻辑地址中的总位数.
现在来到物理地址：
我们有 32 个帧，所以`2^5 = 32`我们`5-bits for frame + 11 bits = 16-bits`
有 16 位的物理地址。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-19T19:48:35.840

页面和框架的偏移量相同以符合设计。在问题中，偏移量为 1024，因此页面的偏移量 = 帧的偏移量 = 2^10。

为每页的每个字提供逻辑地址所需的总位数 = 3+10。

由于唯一定义每个帧需要 5 位，因此物理地址将需要 5+10 = 15 位。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T05:25:32.710

逻辑地址空间的大小是页数 * 页大小 = 8 * 1024 = 2^3 * 2 ^10 = 2^13 逻辑地址的位数是 13

物理地址空间的大小为 2^5 * 2^10 = 2^15 物理地址的位数为 15

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-10T21:54:03.177

在这里我认为根本不需要主内存信息。

给定总页数 = 8，页偏移量为 1024。

我们知道`logical address spaces is = total no of bits required to represent total no of pages + bits required to map page offset`。

因此，所需的总位数 = 3（因为总页数为 8，表示您需要 3 位）+ 10（页面偏移量为 1024，因此您需要 10 位）=**总共 13 位。**

谢谢。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-24T14:32:51.457

搜索互联网后，我可以找到问题的解决方案。

每页/帧容纳1K；我们将需要 10 位来唯一地寻址这 1024 个地址中的每一个。物理内存有 32 帧，我们需要 32 (2^5) 位来寻址每个帧，总共需要 5+10=15 位。8 个页面的逻辑地址空间需要 3 位来唯一地寻址每个页面，总共需要 13 位。

[本教程](http://garryowen.csisdmz.ul.ie/~cs4023/resources/sol11.pdf)将提供有关此问题的更多详细信息

# visual-studio-2010 - 为什么我在几乎所有东西上都得到 CXX0030（“错误：无法评估表达式”）和 CXX0017？

> ID：11177948
> 
> 赞同：1
> 
> 时间：2012-06-24T13:39:21.963
> 
> 标签：visual-studio-2010, debugging, visual-c++, symbols, evaluation

这是一个奇怪的问题......因为我很确定它直到几天前都没有问题。我正在使用 VS2010 SP1。检查我的自动或局部变量调试窗口时，我似乎无法评估它们。即使它是一个普通的布尔值、字符串甚至是数字变量

在运行时将鼠标悬停在变量上时，遇到断点后，什么都没有显示。

字符串在手表面板中显示为“0x0000000000000000”，展开时在“容量”和“大小”字段下显示 CXX0030，没有数据。

布尔变量被评估为 CXX0017（“错误：未找到符号“变量名””）

**当显示在屏幕或控制台上时，一切正常，所有正确数据都已到位！**调试目前是一场噩梦......

我可以指出这一切的原因。为什么会这样？

# android - 访问xml布局android的对象

> ID：11177952
> 
> 赞同：0
> 
> 时间：2012-06-24T13:40:32.173
> 
> 标签：android, android-layout, xml-layout

我有一个活动（`MainActivity.java`），其中内容视图是这样的

```
this.setContentView(R.layout.standalone_example); 
```

我的standalone_example.xml 是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
<com.abc.view.PageCurlView
    android:id="@+id/dcgpagecurlPageCurlView1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/page1" />
</RelativeLayout> 
```

我已经完成了一些工作，`PageCurlView.java`现在我想访问我的对象和变量，`PageCurlView.java`我`MainActivity.java`正在寻找几个小时但找不到任何答案，任何建议提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T13:46:50.680

您可以在活动中使用 findViewById() 获取对膨胀的 PageCurlView 的引用。在您的活动中的一个方法中：

```
PageCurlView mPageCurlView = (PageCurlView) findViewById(R.id.dcgpagecurlPageCurlView1); 
```

然后，您可以调用方法或访问 mPageCurlView 上的公共变量。请注意，必须先在活动中调用 setContentView()，然后才能使用 findViewById()。

# java - Admob + surfaceview 打得不好

> ID：11177953
> 
> 赞同：1
> 
> 时间：2012-06-24T13:40:41.630
> 
> 标签：java, android, emulation, admob, surfaceview

我正在运行 Admob 6.0.1 并尝试在表面视图的顶部添加广告，我可以说下面的代码适用于 Android 3.2（真实设备），也适用于 android 4 设备在模拟器中，但是，当我尝试在 pre api13 上进行测试时，例如 2.3.3 或更低版本的广告不会显示。现在这是奇怪的部分，如果我将surfaceview（在xml中）的可见性更改为不可见，广告将显示！！！这是怎么回事？？这只是模拟器有问题还是我有真正的问题？

我试图使代码尽可能简单以重现错误。我添加了一个按钮，只是为了显示表面视图确实允许其他视图更新，而不是 Admob 视图......

```
 package com.google.example.ads.fundamentals;

    import android.app.Activity;
    import android.content.Context;
    import android.graphics.Canvas;
    import android.graphics.Color;
    import android.os.Bundle;
    import android.util.AttributeSet;
    import android.util.Log;
    import android.view.SurfaceHolder;
    import android.view.SurfaceView;

    import com.google.ads.AdView;

    public class BannerSample extends Activity {
    /** The view to show the ad. */
    private AdView adView;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout);
        adView = (AdView) findViewById(R.id.adView);
    }

    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
        // Destroy the AdView.
        if (adView != null) {
            adView.destroy();
        }
        super.onDestroy();
    }

    }

    class Panel extends SurfaceView implements SurfaceHolder.Callback {
    private final TutorialThread _thread;

    public Panel(Context context, AttributeSet att) {
        super(context, att);
        getHolder().addCallback(this);
        _thread = new TutorialThread(getHolder(), this);

    }

    @Override
    public void onDraw(Canvas canvas) {

        canvas.drawColor(Color.BLUE);
        Log.d("Hello", "drawing stuff");
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
        Log.d("HELLO", "surface changed" + holder.getSurfaceFrame().width()
                + "Height: " + holder.getSurfaceFrame().height());

    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        _thread.setRunning(true);
        _thread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // simply copied from sample application LunarLander:
        // we have to tell thread to shut down & wait for it to finish, or
        // else
        // it might touch the Surface after we return and explode
        boolean retry = true;
        _thread.setRunning(false);
        while (retry) {
            try {
                _thread.join();
                retry = false;
            } catch (InterruptedException e) {
                // we will try it again and again...
            }
        }
    }
    }

    class TutorialThread extends Thread {
    private final SurfaceHolder _surfaceHolder;
    private final Panel _panel;
    private boolean _run = false;

    public TutorialThread(SurfaceHolder surfaceHolder, Panel panel) {
        _surfaceHolder = surfaceHolder;
        _panel = panel;
    }

    public void setRunning(boolean run) {
        _run = run;
    }

    @Override
    public void run() {
        Canvas c;
        while (_run) {
            c = null;
            try {
                c = _surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    _panel.onDraw(c);
                }
            } finally {
                // do this in a finally so that if an exception is thrown
                // during the above, we don't leave the Surface in an
                // inconsistent state
                if (c != null) {
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
    } 
```

和 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent" android:layout_height="match_parent">
    <com.google.example.ads.fundamentals.Panel
        android:id="@+id/mainPanel" android:layout_width="match_parent"
        android:layout_height="match_parent" android:visibility="invisible" />
    <com.google.ads.AdView android:id="@+id/adView"
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:layout_gravity="top" ads:adSize="BANNER"         ads:adUnitId="xxxxxxxxx"
        ads:loadAdOnCreate="true" ads:testDevices="TEST_EMULATOR" />

    <Button android:id="@+id/mybutton" android:layout_width="wrap_content"
        android:layout_height="wrap_content" android:layout_below="@id/adView"
        android:text="hello" />
</RelativeLayout> 
```

和清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.google.example.ads.fundamentals"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="3" android:targetSdkVersion="15" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".BannerSample"
                              android:screenOrientation="portrait"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
                  android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>

    </application>

    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
    <uses-permission android:name="android.permission.INTERNET"/>
</manifest> 
```

任何想法或帮助都会非常棒，我曾尝试在 Google Groups 上发布 admob，但我认为它迷失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T04:55:08.787

事实证明这是模拟器的问题，当代码在真实设备上运行时，它运行良好！疯狂的模拟器...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T20:07:39.843

试着把它的`AdView`外面`SurfaceView`而不是放在它上面。您可以通过将`AdView`广告对齐顶部并将其设置在其`SurfaceView`下方来做到这一点。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
    android:layout_width="match_parent" android:layout_height="match_parent">
    <com.google.example.ads.fundamentals.Panel
        android:id="@+id/mainPanel" android:layout_width="match_parent"
        android:layout_height="match_parent" android:visibility="invisible"
        android:layout_below="@+id/adView" />
   <com.google.ads.AdView android:id="@id/adView"
        android:layout_width="match_parent" android:layout_height="wrap_content"
        android:layout_gravity="top" ads:adSize="BANNER" ads:adUnitId="xxxxxxxxx"
        ads:loadAdOnCreate="true" ads:testDevices="TEST_EMULATOR"
        android:layout_alignParentTop="true" />
</RelativeLayout> 
```

# javascript - 如何完全卸载 Node.js，然后从头重新安装（Mac OS X）

> ID：11177954
> 
> 赞同：1578
> 
> 时间：2012-06-24T13:40:56.310
> 
> 标签：javascript, node.js, npm

即使我安装了 brew node 和 NVM install v0.6.19，我的节点版本始终是 v0.6.1-pre。

我的节点版本是：

```
node -v
v0.6.1-pre 
```

NVM 这么说（在我第一次在一个 bash 终端中安装一个版本的节点之后）：

```
nvm ls
v0.6.19
current:    v0.6.19 
```

但是当我重新启动 bash 时，这就是我所看到的：

```
nvm ls
v0.6.19
current:    v0.6.1-pre
default -> 0.6.19 (-> v0.6.19) 
```

那么这个幻像节点 0.6.1-pre 版本在哪里，我该如何摆脱它呢？我正在尝试通过 NPM 安装库，以便我可以处理项目。

我尝试在 NVM 之前使用 BREW 进行更新，使用`brew update`and `brew install node`. 我试过删除我的“节点”目录`/usr/local/include`和我的`/usr/local/lib`. 我已经尝试卸载 npm 并按照[这些](https://superuser.com/questions/268946/uninstall-node-js)说明重新安装它。

所有这一切都是因为我试图更新旧版本的节点来安装“zipstream”库。现在我的用户目录中有文件夹，并且节点版本仍然不是最新的，即使 NVM 说它使用的是 0.6.19。

**理想情况下，我想卸载 nodejs、npm 和 nvm，然后在我的系统上从头开始重新安装整个东西。**

* * *

## 回答 #1

> 赞同：1889
> 
> 时间：2012-06-24T14:04:58.760

显然，有一个`/Users/myusername/local`文件夹包含一个`include`with`node`和`lib`with `node`and `node_modules`。`/usr/local`我不知道如何以及为什么创建它而不是在我的文件夹中。

删除这些本地引用修复了幻影 v0.6.1-pre。如果有人有解释，我会选择它作为正确答案。

**编辑：**

您可能还需要执行其他说明：

```
sudo rm -rf /usr/local/{lib/node{,/.npm,_modules},bin,share/man}/{npm*,node*,man1/node*} 
```

这相当于（与上述相同）......

```
sudo rm -rf /usr/local/bin/npm /usr/local/share/man/man1/node* /usr/local/lib/dtrace/node.d ~/.npm ~/.node-gyp 
```

或（同上）分解...

要完全卸载 node + npm 是执行以下操作：

1.  转到**/usr/local/lib**并删除任何**节点**和**node_modules**
2.  转到**/usr/local/include**并删除任何**节点**和**node_modules**目录
3.  如果您使用**brew install node 安装**，则在终端中运行**brew uninstall node**
4.  检查您的主目录是否有任何**本地**或**lib**或**包含**文件夹，并从那里删除任何**节点**或**node_modules**
5.  转到**/usr/local/bin**并删除任何**节点**可执行文件

您可能还需要这样做：

```
sudo rm -rf /opt/local/bin/node /opt/local/include/node /opt/local/lib/node_modules
sudo rm -rf /usr/local/bin/npm /usr/local/share/man/man1/node.1 /usr/local/lib/dtrace/node.d 
```

此外，NVM 修改了 PATH 变量`$HOME/.bashrc`，必须[手动恢复](https://github.com/creationix/nvm#removal)。

然后下载**nvm**并按照说明安装节点。我相信最新版本的 node 带有**npm**，但您也可以重新安装它。

* * *

## 回答 #2

> 赞同：635
> 
> 时间：2014-11-13T22:19:48.177

# **对于 brew 用户，OSX**：

去除：

```
brew uninstall node; 
# or `brew uninstall --force node` which removes all versions
brew cleanup;
rm -f /usr/local/bin/npm /usr/local/lib/dtrace/node.d;
rm -rf ~/.npm; 
```

安装：

```
brew install node;
which node # => /usr/local/bin/node
export NODE_PATH='/usr/local/lib/node_modules' # <--- add this ~/.bashrc 
```

您可以运行`brew info node`以获取有关节点安装的更多详细信息。

* * *

# 考虑使用 NVM 代替 brew

NVM（节点版本管理器）是用于管理多个节点版本的便携式解决方案

## [https://github.com/nvm-sh/nvm](https://github.com/nvm-sh/nvm)

```
> nvm uninstall v4.1.0
> nvm install v8.1.2
> nvm use v8.1.2
> nvm list
         v4.2.0
         v5.8.0
        v6.11.0
->       v8.1.2
         system 
```

当您在具有不同节点依赖关系的不同项目之间跳转时，[您可以将其与 AVN一起使用来自动切换版本。](https://github.com/wbyoung/avn)

* * *

## 回答 #3

> 赞同：204
> 
> 时间：2014-07-07T13:40:51.407

我知道这篇文章有点过时了，但只是想分享在删除 Node.js 时在终端中对我有用的命令。

```
lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom | while read f; do  sudo rm /usr/local/${f}; done

sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.* 
```

* * *

# 更新：`23 SEP 2016`

* * *

# 如果您害怕运行这些命令...

感谢[jguix](https://gist.github.com/jguix)提供的[这个快速教程](https://gist.github.com/TonyMtz/d75101d9bdf764c890ef#gistcomment-1880118)。

**首先，创建一个中间文件：**

```
lsbom -f -l -s -pf /var/db/receipts/org.nodejs.node.pkg.bom >> ~/filelist.txt 
```

**手动查看您的文件（位于您的`Home`文件夹中）**

```
 ~/filelist.txt 
```

**然后删除文件：**

```
cat ~/filelist.txt | while read f; do sudo rm /usr/local/${f}; done

sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.* 
```

* * *

# 对于 10.10.5 及更高版本

**谢谢莱纳霍伊特[_](https://stackoverflow.com/users/852592/lenar-hoyt)**

**要点评论来源：** [gistcomment-1572198](https://gist.github.com/TonyMtz/d75101d9bdf764c890ef#gistcomment-1572198)

**原始要点：** [TonyMtz/d75101d9bdf764c890ef](https://gist.github.com/TonyMtz/d75101d9bdf764c890ef#file-gistfile1-txt)

```
lsbom -f -l -s -pf /var/db/receipts/org.nodejs.node.pkg.bom | while read f; do sudo rm /usr/local/${f}; done

sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.* 
```

* * *

## 回答 #4

> 赞同：160
> 
> 时间：2014-01-17T23:26:44.370

在 Mavericks 上，我从节点 pkg（来自 nodejs 站点）安装它，然后将其卸载，以便可以使用 brew 重新安装。我只在终端中运行 4 个命令：

1.  `sudo rm -rf /usr/local/lib/node_modules/npm/`
2.  `brew uninstall node`
3.  `brew doctor`
4.  `brew cleanup --prune-prefix`

如果还有node安装，重复第2步。毕竟ok，我安装使用`brew install node`

* * *

## 回答 #5

> 赞同：81
> 
> 时间：2020-06-13T06:16:02.030

[https://stackabuse.com/how-to-uninstall-node-js-from-mac-osx/](https://stackabuse.com/how-to-uninstall-node-js-from-mac-osx/)

在 MACOS 中运行以下命令从系统中完全删除节点

```
sudo rm -rf ~/.npm ~/.nvm ~/node_modules ~/.node-gyp ~/.npmrc ~/.node_repl_history
sudo rm -rf /usr/local/bin/npm /usr/local/bin/node-debug /usr/local/bin/node /usr/local/bin/node-gyp
sudo rm -rf /usr/local/share/man/man1/node* /usr/local/share/man/man1/npm*
sudo rm -rf /usr/local/include/node /usr/local/include/node_modules
sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /usr/local/lib/dtrace/node.d
sudo rm -rf /opt/local/include/node /opt/local/bin/node /opt/local/lib/node
sudo rm -rf /usr/local/share/doc/node
sudo rm -rf /usr/local/share/systemtap/tapset/node.stp

brew uninstall node
brew doctor
brew cleanup --prune-prefix 
```

在此之后，我将建议使用以下命令使用 nvm 安装节点（查看[https://github.com/nvm-sh/nvm](https://github.com/nvm-sh/nvm)以获取最新版本）

`curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash`

来自[https://github.com/nvm-sh/nvm](https://github.com/nvm-sh/nvm)

**为什么是非虚拟机？**
这是一个好问题，会有项目需要不同版本的node，
即A需要node版本12，而B需要node版本14。node的这个版本管理只由nvm提供。

* * *

## 回答 #6

> 赞同：76
> 
> 时间：2020-01-23T16:28:34.327

我已经总结了现有的答案，并确保 Node.js与 NPM 一起被**完全擦除**。

要复制到终端的行：

```
brew uninstall node;
which node;
sudo rm -rf /usr/local/bin/node;
sudo rm -rf /usr/local/lib/node_modules/npm/;
brew doctor;
brew cleanup --prune-prefix; 
```

* * *

## 回答 #7

> 赞同：39
> 
> 时间：2015-06-28T17:24:17.980

1.  第一的：

    ```
    lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom | while read f; do  sudo rm /usr/local/${f}; done

    sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.* 
    ```

2.  回顾一下，完全卸载 node + npm 的最佳方法（我发现）是执行以下操作：

    转到`/usr/local/lib`并删除任何节点和 node_modules

    ```
    cd /usr/local/lib

    sudo rm -rf node* 
    ```

3.  转到`/usr/local/include`并删除任何节点和 node_modules 目录

    ```
    cd /usr/local/include

    sudo rm -rf node* 
    ```

4.  如果您安装了`brew install node`，则`brew uninstall node`在您的终端中运行

    ```
    brew uninstall node 
    ```

5.  检查您的主目录是否有任何“本地”或“lib”或“包含”文件夹，并从那里删除任何“节点”或“节点模块”

    转到 /usr/local/bin 并删除任何节点可执行文件

    ```
    cd /usr/local/bin

    sudo rm -rf /usr/local/bin/npm

    ls -las 
    ```

6.  您可能还需要执行其他说明：

    ```
    sudo rm -rf /usr/local/share/man/man1/node.1

    sudo rm -rf /usr/local/lib/dtrace/node.d

    sudo rm -rf ~/.npm 
    ```

资料来源：[tonyMtz](https://gist.github.com/TonyMtz/d75101d9bdf764c890ef)

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2015-05-29T03:06:46.757

将节点降级到 0.10.36

```
 sudo npm cache clean -f
  sudo npm install -g n
  sudo n 0.10.36 
```

升级节点到稳定v

```
 sudo npm cache clean -f
  sudo npm install -g n
  sudo n stable 
```

* * *

## 回答 #9

> 赞同：29
> 
> 时间：2017-01-25T18:42:42.797

我不确定是因为我有旧版本（4.4.5），还是因为我使用了官方安装程序，但其他答案中引用的大多数文件在我的系统上并不存在。我只需要删除以下内容：

```
~/.node-gyp
~/.node_repl_history
/usr/local/bin/node
/usr/local/bin/npm
/usr/local/include/node
/usr/local/lib/dtrace/node.d
/usr/local/lib/node_modules
/usr/local/share/doc/node
/usr/local/share/man/man1/node.1
/usr/local/share/systemtap/tapset/node.stp 
```

我决定保留`~/.npm`，因为我打算用 Homebrew 重新安装 Node。

* * *

## 回答 #10

> 赞同：23
> 
> 时间：2021-04-08T10:08:29.960

# 在 macOS Big Sur 版本 11.2.3 (20D91) 上完全卸载 Nodejs

* * *

## 介绍

首先，我想说谢谢你分享这个[技巧](https://gist.github.com/tonymtz/d75101d9bdf764c890ef) [@tonymtz](https://github.com/tonymtz)。

我的系统是从官方网站安装的`macOS Big Sur version 11.2.3 (20D91)`。 `nodejs Latest Current Version: 15.14.0 (includes npm 7.7.6)`

我尝试在我的 MacBook Pro 上完全卸载，以便使用包管理器`nodejs`重新安装它：`homebrew`

```
lsbom -f -l -s -pf /var/db/receipts/org.nodejs.pkg.bom | while read f; do  sudo rm /usr/local/${f}; done 
```

但我遇到了[@JohelAlvarez](https://stackoverflow.com/users/2069262/johel-alvarez)的回答中提到的[@AhteshamShah](https://stackoverflow.com/users/10684238/ahtesham-shah)之类的[问题](https://stackoverflow.com/questions/11177954/how-do-i-completely-uninstall-node-js-and-reinstall-from-beginning-mac-os-x#answer-31102612)：

> 当触发第一个命令时：`can't open /var/db/receipts/org.nodejs.pkg.bom: No such file or directory **** Can't open /var/db/receipts/org.nodejs.pkg.bom.` – Ahtesham Shah 2019 年 6 月 20 日 5:09

我潜入了@JohelAlvarez 链接[的原始帖子](https://gist.github.com/tonymtz/d75101d9bdf764c890ef)，阅读了所有评论，我从[@e2tha-e找到了这条](https://github.com/e2tha-e)[评论](https://gist.github.com/TonyMtz/d75101d9bdf764c890ef#gistcomment-1572198)：

> @tonymtz 在我在 Yosemite 10.10.5 上安装 Node v4.0.0 时，第一行需要是 `lsbom -f -l -s -pf /var/db/receipts/org.nodejs.node.pkg.bom | while read f; do sudo rm /usr/local/${f}; done` 与否则不同的文件名`org.nodejs.pkg.bom` ，这就像一个魅力！

@e2tha-e 是对的，on `macOS Big Sur version 11.2.3 (20D91`) `nodejs Latest Current Version: 15.14.0 (includes npm 7.7.6)`从官网安装，文件名不是`org.nodejs.pkg.bom`but `org.nodejs.node.pkg.bom`。

您可以在`cd /var/db/receipts/ && ls -la`.

## 从Nodejs官网安装解决方案

使用您首选的终端，从您的系统中完全卸载 Nodejs，如下所示：

#### ***选项1***

1.  `lsbom -f -l -s -pf /var/db/receipts/org.nodejs.node.pkg.bom | while read f; do sudo rm /usr/local/${f}; done`
2.  `sudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.*`

#### ***选项 2***

转到`/var/db/receipts/`并删除任何`org.nodejs.*`

1.  `cd /var/db/receipts/ && ls -la`
2.  `sudo rm -rf org.nodejs.*`

转到`/usr/local/lib`并删除任何`node`和`node_modules`

1.  `cd /usr/local/lib && ls -la`
2.  `sudo rm -rf node*`

转到`/usr/local/include`并删除任何`node`和`node_modules`目录

1.  `cd /usr/local/include && ls -la`
2.  `sudo rm -rf node*`

检查您的`$HOME`目录是否有任何“本地”或“lib”或“包含”文件夹，并从那里删除任何“节点”或“节点模块”。

转到`/usr/local/bin`并删除任何节点可执行文件

1.  `cd /usr/local/bin && ls -la`
2.  `sudo rm -rf /usr/local/bin/npm`
3.  `sudo rm -rf /usr/local/bin/node`

您可能也需要这样做：

1.  `sudo rm -rf /usr/local/share/man/man1/node.1`
2.  `sudo rm -rf /usr/local/lib/dtrace/node.d`
3.  `sudo rm -rf ~/.npm`

`node`之后，您可以检查系统中是否仍然存在`which node`或查找系统中所有出现的节点。

* * *

## 尖端

1.  搜索节点文件所在的位置`find / -name 'node' | sed -E 's|/[^/]+$||' |sort -u`
2.  在运行其他人共享的代码之前，请先检查您的目录以确保您编写了正确的文件名。

* * *

## 回答 #11

> 赞同：16
> 
> 时间：2019-03-28T16:00:19.987

*   从 /usr/local/lib 中删除节点和/或 node_modules

    ```
    ex code:
    cd /usr/local/lib
    sudo rm -rf node
    sudo rm -rf node_modules 
    ```

*   从 /usr/local/include 中删除节点和/或 node_modules

*   从 /usr/local/bin 中删除 node、node-debug 和 node-gyp

*   从您的主目录中删除 .npmrc（这些是您的 npm 设置，如果您打算立即重新安装 Node，请不要删除它）

*   从你的主目录中删除 .npm

*   从你的主目录中删除 .node-gyp

*   从你的主目录中删除 .node_repl_history

*   从 /usr/local/share/man/man1/ 中删除节点*

*   从 /usr/local/share/man/man1/ 中删除 npm*

*   从 /usr/local/lib/dtrace/ 中删除 node.d

*   从 /usr/local/opt/local/bin/ 删除节点

*   从 /usr/local/opt/local/include/ 删除节点

*   从 /usr/local/opt/local/lib/ 中删除 node_modules

*   从 /usr/local/share/doc/ 中删除节点

*   从 /usr/local/share/systemtap/tapset/ 中删除 node.stp

* * *

## 回答 #12

> 赞同：12
> 
> 时间：2018-11-05T08:44:42.717

为我工作。

```
$node --version

v11.1.0

$nvm deactivate

$nvm uninstall v11.1.0 
```

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2019-04-17T20:06:10.260

后

```
brew uninstall node 
```

我必须知道哪个节点

```
which node 
```

然后删除它

```
rm -rf /usr/local/bin/node 
```

* * *

## 回答 #14

> 赞同：10
> 
> 时间：2019-05-11T05:57:21.413

如果你已经安装了[nvm](https://github.com/nvm-sh/nvm)然后执行以下命令

*   `nvm deactivate`- 这将从 $PATH 中删除 /.nvm/*/bin
*   `nvm list`- 列出系统中安装的所有节点版本
*   `nvm uninstall <version>`在您可以指定要卸载的所有版本。

使用`nvm`而`nvm` 不是`brew`.

这个解决方案对我有用。

附加命令

*   `which node`了解系统中安装的节点的路径。您可以 rm 此目录手动卸载节点。然后您可能需要相应地调整 PATH 文件。

* * *

## 回答 #15

> 赞同：9
> 
> 时间：2015-03-11T16:18:37.400

扩展[Dominic Tancredi 的出色答案](https://stackoverflow.com/a/11178106/2083544 "多米尼克·坦克雷迪")，我将其整合到 bash 包和独立脚本中。如果您已经在使用名为[bpkg](http://bpkg.io)的“Back Package Manager” ，您可以通过运行以下命令来安装脚本：

```
bpkg install -g brock/node-reinstall 
```

[或者您可以在 Github 上的brock/node-reinstall](http://github.com/brock/node-reinstall)中查看脚本。该脚本允许您使用 nvm 或 nave 重新安装节点，并将节点版本指定为默认值。

* * *

## 回答 #16

> 赞同：8
> 
> 时间：2015-01-09T22:02:31.480

除了主要答案之外，我还需要删除在以下位置找到的所有 npm 实例：

```
rm -rf /usr/local/share/man/man1/npm* 
```

* * *

## 回答 #17

> 赞同：7
> 
> 时间：2014-09-20T12:13:44.463

也许你需要做

```
hash -r 
```

它有助于解决符号链接的问题

```
$ node -v
$ bash: /opt/local/bin/node: No such file or directory 
```

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2013-08-14T20:26:35.690

在我的 Mac 上卸载 Node.js 时，我遇到了一个问题。我有一些奇怪的行为`npm`，即使在不得不将其全部删除之后仍然存在。

这是因为我使用 macport 完成了旧安装。所以你还必须使用端口卸载它：

```
sudo port uninstall nodejs 
```

它可能安装了许多不同版本的 Node.js，因此将它们全部卸载（一个一个）。

* * *

## 回答 #19

> 赞同：6
> 
> 时间：2018-08-24T23:52:29.977

最好的方法是下载安装程序包：Mac 上的 .pkg。首选最新的稳定版本。

这是链接：[Node.js](https://nodejs.org/en/)

这个包最终会覆盖以前的版本并相应地设置环境变量。只需运行安装程序，点击几下即可完成。

* * *

## 回答 #20

> 赞同：6
> 
> 时间：2021-12-28T13:04:38.843

**卸载 NodeJS 的步骤：**

对于带有 M1 芯片的 MacOS Monterey，请按照以下链接从系统中完全卸载 node。我尝试了多种方法，但这个方法终于奏效了。

[从 Mac M1 Monterey 卸载 NodeJS 和 NPM](https://www.positronx.io/how-to-uninstall-node-js-and-npm-from-macos/)

此外，请在最后执行以下命令以从 bin 文件夹中删除节点相关目录。

```
sudo rm -R node-sass
sudo rm -R npm
sudo rm -R npx 
```

要验证该节点是否已删除：

```
node --version 
```

它应该说找不到命令。

**安装 NodeJS 的步骤：**

使用 M1 芯片在 Mac 上启用 Rosseta 终端。 [如何启用罗塞塔终端](https://www.bigbinary.com/learn-rubyonrails-book/setting-up-mac)

使用 nvm (Node Version Manager) 在你的机器上安装 NodeJS。**为什么是非虚拟机？？**因为您可以运行多个版本的 NodeJS（您可以使用新应用程序以及旧版应用程序）。

[如何使用 nvm 安装多个版本的 NodeJS](https://github.com/nvm-sh/nvm)

```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash 
```

如果不存在，则创建一个 .zshrc 文件。

```
touch ~/.zshrc 
```

使用 nvm 安装节点。

```
nvm install node # "node" is an alias for the latest version
nvm install 14.7.0 # or 16.3.0, 12.22.1, etc 
```

要验证可用的 NodeJS 版本的数量：

```
nvm ls 
```

* * *

## 回答 #21

> 赞同：5
> 
> 时间：2016-12-09T11:00:56.850

您可以克隆[https://github.com/brock/node-reinstall](https://github.com/brock/node-reinstall)并运行存储库中给出的简单命令。之后只需重新启动系统。
这是最简单的方法，也对我有用。

* * *

## 回答 #22

> 赞同：4
> 
> 时间：2015-07-22T20:11:31.963

我从 git 存储库下载的源代码安装了 Node.js。我安装了：

```
./configure
$ make
$ sudo make install 
```

因为make文件支持它，我可以这样做：

```
$ sudo make uninstall 
```

* * *

## 回答 #23

> 赞同：4
> 
> 时间：2019-11-21T14:24:28.940

作为解释通过自制软件进行清理和安装的答案的伴侣，我发现自制软件本身提供了符号链接冲突的明确指示。

不幸的是，它会在遇到它们时一一提供这些，因此有点费力，但它似乎确实找到了所有冲突，并且是我可以使用自制软件进行全新安装的唯一方法。

本质上，该过程是：

1.  使用自制软件卸载节点
2.  清洁自制
3.  使用自制软件安装节点并记下任何标记的冲突文件
4.  删除标志冲突文件（或整个目录，如果它是“节点”目录）
5.  转到第 1 步，直到您获得全新安装

[![图解](../Images/1915829e20d00d6860561f36d18c21fc.png)](https://i.stack.imgur.com/498rO.jpg)：

这是我安装最后一步的屏幕输出 - 您可以看到它导致全新安装（最终......）：

```
computer1:DevResources user1$ brew install node
Updating Homebrew...
==> Downloading https://homebrew.bintray.com/bottles/node-13.1.0.mojave.bottle.tar.gz
Already downloaded: /Users/user1/Library/Caches/Homebrew/downloads/da904f1fdab6f6b2243a810b685e67b29a642c6e945f086e0022323a37fe85f9--node-13.1.0.mojave.bottle.tar.gz
==> Pouring node-13.1.0.mojave.bottle.tar.gz
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
Could not symlink share/systemtap/tapset/node.stp
Target /usr/local/share/systemtap/tapset/node.stp
already exists. You may want to remove it:
  rm '/usr/local/share/systemtap/tapset/node.stp'

To force the link and overwrite all conflicting files:
  brew link --overwrite node

To list all files that would be deleted:
  brew link --overwrite --dry-run node

Possible conflicting files are:
/usr/local/share/systemtap/tapset/node.stp
/usr/local/lib/dtrace/node.d
==> Caveats
Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==> Summary
  /usr/local/Cellar/node/13.1.0: 4,591 files, 54.2MB
computer1:DevResources user1$ rm '/usr/local/share/systemtap/tapset/node.stp'
computer1:DevResources user1$ brew uninstall node
Uninstalling /usr/local/Cellar/node/13.1.0... (4,591 files, 54.2MB)
computer1:DevResources user1$ brew cleanup
computer1:DevResources user1$ brew install node
Updating Homebrew...
==> Downloading https://homebrew.bintray.com/bottles/node-13.1.0.mojave.bottle.tar.gz
Already downloaded: /Users/user1/Library/Caches/Homebrew/downloads/da904f1fdab6f6b2243a810b685e67b29a642c6e945f086e0022323a37fe85f9--node-13.1.0.mojave.bottle.tar.gz
==> Pouring node-13.1.0.mojave.bottle.tar.gz
Error: The `brew link` step did not complete successfully
The formula built, but is not symlinked into /usr/local
Could not symlink lib/dtrace/node.d
Target /usr/local/lib/dtrace/node.d
already exists. You may want to remove it:
  rm '/usr/local/lib/dtrace/node.d'

To force the link and overwrite all conflicting files:
  brew link --overwrite node

To list all files that would be deleted:
  brew link --overwrite --dry-run node

Possible conflicting files are:
/usr/local/lib/dtrace/node.d
==> Caveats
Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==> Summary
  /usr/local/Cellar/node/13.1.0: 4,591 files, 54.2MB
computer1:DevResources user1$ rm '/usr/local/lib/dtrace/node.d'
computer1:DevResources user1$ 
computer1:DevResources user1$ brew uninstall node
Uninstalling /usr/local/Cellar/node/13.1.0... (4,591 files, 54.2MB)
computer1:DevResources user1$ brew cleanup
computer1:DevResources user1$ brew install node
Updating Homebrew...
==> Downloading https://homebrew.bintray.com/bottles/node-13.1.0.mojave.bottle.tar.gz
Already downloaded: /Users/user1/Library/Caches/Homebrew/downloads/da904f1fdab6f6b2243a810b685e67b29a642c6e945f086e0022323a37fe85f9--node-13.1.0.mojave.bottle.tar.gz
==> Pouring node-13.1.0.mojave.bottle.tar.gz
==> Caveats
Bash completion has been installed to:
  /usr/local/etc/bash_completion.d
==> Summary
  /usr/local/Cellar/node/13.1.0: 4,591 files, 54.2MB
computer1:DevResources user1$ node -v
v13.1.0 
```

* * *

## 回答 #24

> 赞同：4
> 
> 时间：2021-12-15T23:13:08.300

## 在 macOS Monterey 版本 12.0.1 上完成卸载 Node.js

要检查系统上安装的当前节点版本：

```
# node -v
# v14.15.0 
```

输入以下命令从系统中删除节点：

```
# cd /usr/local/include
# sudo rm -R node
# cd ../lib
# sudo rm -R node_modules
# cd ../bin
# sudo rm -R node 
```

检查该节点不再存在

```
# node -v
# -bash: node: command not found 
```

## 在 macOS Monterey 版本 12.0.1 上安装 Node.js

1.  [从官网](https://nodejs.org/en/)下载node的LTS版本

2.  双击**node-v16.13.1.pkg**安装包继续默认设置

3.  输入`node -v`您的终端以打印当前安装的 node 版本：`v16.13.1`&`npm -v`以打印您机器上安装的当前 npm 版本：`8.1.2`

* * *

## 回答 #25

> 赞同：3
> 
> 时间：2018-08-23T15:39:10.427

首先，您需要在安装新的节点版本后停用节点：（mac）。

```
nvm deactivate 
```

这已从 $PATH 中删除 /Users/user_name/.nvm/*/bin

在该节点更新后

```
node --version
v10.9.0 
```

* * *

## 回答 #26

> 赞同：3
> 
> 时间：2020-05-14T10:30:59.023

## Docker - 替代方法

Docker 是一种超快的虚拟机，可以用来运行 node 等工具（而不是直接安装在 mac-os 上）。这样做的好处如下

*   所有东西（'milions'节点文件）都安装在 docker image/container 中（它们封装在几个内部 docker 文件中）

*   您可以将带有项目的 mac 目录映射到您的 docker 容器并可以访问节点 - 但在 docker 之外，mac-os 系统甚至不知道该节点已安装。因此，您将获得某种“虚拟”控制台，其中包含可用于真实文件的可用节点命令

*   你可以很容易地通过找到它`docker ps`并杀死节点来杀死它`docker rm -f name_or_num`

*   您可以通过一个命令轻松卸载 docker 映像/容器`docker rmi ...`并获得可用空间 - 并通过运行脚本再次安装（如下）

*   您的节点被封装在 docker 中，并且无法访问整个系统 - 只能访问您映射到它的文件夹

*   您可以运行节点服务并轻松地将它们的端口映射到 mac 端口，并可以从 Web 浏览器访问它

*   您可以同时运行多个节点版本

*   以类似的方式，您可以安装其他工具，例如（同时在多个版本中）：php、数据库、redis 等 - 在 docker 内部，无需与 mac-os 进行任何交互（根本不会注意到此类软件）。例如，您可以同时运行 3 个具有不同版本的 mysql db 和 3 个具有不同 php 版本的 php 应用程序... - 所以您可以拥有许多工具但系统干净

*   团队合作：这样的环境可以很容易地克隆到其他机器上（甚至可以克隆到 windows/linux 系统 - 进行一些修改）并提供相同的 docker 级环境 - 因此您可以轻松设置和重用脚本/dockerfile，并设置环境新的团队成员以非常快的方式（他只需要安装 docker 并创建类似的文件夹结构并获取脚本的副本 - 仅此而已）。我以这种方式工作了 2 年，并与我的团队一起工作 - 我们非常高兴

## 操作说明

*   [使用例如此说明](https://stackoverflow.com/a/44346110/860099)安装 docker

*   为工作准备“特殊”目录，例如我的目录是`/Users/kamil/work`（我将进一步使用这个目录——但它可以是任意的）——这个目录将是 docker 容器和你的 mac 文件 ststem 之间的“接口”。在此目录中创建以下目录结构：

    `/Users/kamil/work/code`- 在这里你把你的项目和代码放在一起

    `/Users/kamil/work/tools`

    `/Users/kamil/work/tools/docker-data`- 在这里我们映射容器输出数据，如日志（或数据库文件，如果有人使用 db 等）

    `/Users/kamil/work/tools/docker`

    `/Users/kamil/work/tools/docker/node-cmd`- 这里我们放 docker 节点脚本

*   内部`tools`创建文件`.env`，该文件将在一处包含其他脚本中使用的全局路径

    ```
    toolspath="/Users/kamil/work/tools"
    codepath="/Users/kamil/work/code"
    workpath=/Users/kamil/work
    ```

*   内部目录`../node-cmd`创建`dockerfile`具有以下内容的文件

    ```
    # default  /var/www/html (mapped to .../code folder with projects)
    FROM node

    WORKDIR /work

    # Additional arbitrary tools (ng, gulp, bower)
    RUN npm install -g n @angular/cli bower gulp grunt

    CMD while true; do sleep 10000; done

    # below ports are arbitrary
    EXPOSE 3002 3003 3004 4200
    ```

*   innside dir`../node-cmd`创建`run-container`具有以下内容的文件（该文件应该是可执行的，例如`chmod +x run-container`） - （注意我们如何将 port-s 和目录从外部“世界”映射到内部 docker 文件系统）

    ```
    set -e
    cd -- "$(dirname "$0")" # this script dir (not set on doubleclick)
    source ../../.env
    toolsdir=$toolspath/docker-data
    workdir=$workpath

    if [ ! "$(docker ps | grep node-cmd)" ] 
    then 
      docker build -t node-cmd .
      docker rm -f node-cmd |:
      docker run -d --name node-cmd -p 4200:4200 -p 4201:4201 -p 3002:3002 -p 3003:3003 -p 3004:3004 -v $toolsdir/node-cmd/logs:/root/.npm/_logs -v $workdir:/work node-cmd
    fi
    ```

*   好的，现在您可以添加一些项目，例如`work/code/myProject`并在文件“run-cmd”之后添加（必须是可执行的）

    ```
    cd -- "$(dirname "$0")"
    ../../tools/docker/node-cmd/run-container
    docker exec -it node-cmd bash -c "cd /work/code/myProject; bash"
    ```

*   然后，如果您运行上面的脚本（通过双击），您将在项目目录中看到带有可用节点命令的控制台，例如`npm install`

*   在后台运行项目（例如一些服务）例如运行 web-server angular-cli 应用程序，您可以使用以下脚本（命名`run-front`- 必须是可执行的）-（您还必须编辑`/etc/hosts`文件以添加正确的域）

    ```
    cd -- "$(dirname "$0")"
    open "http://my-angular.local:3002"
    ../../tools/docker/node-cmd/run-container
    docker exec -it node-cmd  /bin/sh -c "cd /work/code/my-angular-project; npm start"
    cat         # for block script and wait for user ctrl+C
    ```

* * *

## 回答 #27

> 赞同：2
> 
> 时间：2015-02-09T10:36:18.493

这为我修复了[在 Mac OS X 上为 Homebrew 用户修复 npm](https://gist.github.com/DanHerbert/9520689)。而且它不需要太多的步骤。

如果您不关心原因，请转到解决方案部分。

为方便起见，以下是相关部分：

## 解决方案

此解决方案修复了尝试运行导致的错误`npm update npm -g`。完成后，您也无需使用`sudo`全局安装 npm 模块。

在开始之前，请记下所有全局安装的 npm 包。这些说明将让您删除所有这些软件包。完成后，您需要重新安装它们。

运行以下命令删除所有现有的全局 npm 模块，卸载节点和 npm，使用正确的默认值重新安装节点，配置要安装的全局 npm 模块的位置，然后将 npm 作为自己的包安装。

```
rm -rf /usr/local/lib/node_modules
brew uninstall node
brew install node --without-npm
echo prefix=~/.npm-packages >> ~/.npmrc
curl -L https://www.npmjs.com/install.sh | sh 
```

此时应正确安装 Node 和 npm。最后一步是添加`~/.npm-packages/bin`到你的`PATH`npm 和全局 npm 包是可用的。为此，将以下行添加到您的`~/.bash_profile`:

```
export PATH="$HOME/.npm-packages/bin:$PATH" 
```

现在您可以毫无问题地重新安装您需要的任何全局 npm 包。

* * *

## 回答 #28

> 赞同：2
> 
> 时间：2019-03-13T12:52:56.410

如果您无法找到节点，只需运行并且`whereis node`您可以根据需要删除列出的目录。`whereis npm``whereis nvm`

您还需要完全关闭终端并重新打开它才能使更改生效。

* * *

## 回答 #29

> 赞同：2
> 
> 时间：2019-09-21T09:08:00.300

就我而言，其他答案均无效，因为我之前已降级到 node8。因此，不是在上面做，而是对我有用：

```
which node 
```

它返回`/usr/local/bin/node@8`而不是`/usr/local/bin/node`

所以我执行了这个命令：

```
brew uninstall node@8 
```

它工作，然后从官方网站下载最新的 pkg 并安装。之后我不得不关闭我的终端并重新开始访问新版本

* * *

## 回答 #30

> 赞同：1
> 
> 时间：2020-04-01T14:06:56.797

@lfender6445[答案](https://stackoverflow.com/a/26919540/7390929)对我来说很好卸载

现在要重新安装，我在安装最后一个版本而不是最稳定的版本时遇到问题，因此要安装特定的节点版本，您应该这样做：

```
brew install node@10 // 10 is the version I want
brew link node@10 
```

* * *

## 回答 #31

> 赞同：1
> 
> 时间：2021-07-31T14:47:59.653

对于任何使用 的人`n`，当您更改节点版本时，它会自动重新安装 npm。`npm upgrade`您可以通过运行以下命令来逆转损坏：

1.  `n`（选择不同的节点版本，npm 会重新安装）
2.  `n`（这次，选择你喜欢的版本）
3.  `npm -v`（它将是旧版本的 NPM）
4.  `npm install -g npm@7.x.x`（插入适当的版本）

* * *

## 回答 #32

> 赞同：1
> 
> 时间：2021-08-24T13:05:04.793

我有同样的问题（运行 Fedora 34）。

**它是由使用 n 引起的：[https ://www.npmjs.com/package/n](https://www.npmjs.com/package/n)**

n 帮助您管理**不同版本的 node**，但它有自己的方式来做到这一点，而不是通过操作系统包管理器！

这就是为什么有这些带有节点的 unexpeted 文件夹。

**这对我有用：**

1.  重新安装节点和 npm。
2.  重新安装 n (sudo npm i -gn)
3.  sudo n prune（删除所有缓存的版本）
4.  sudo n uninstall（删除活动版本）
5.  现在您只安装了预期版本的节点（在步骤 1 中安装的那个）

* * *

## 回答 #33

> 赞同：0
> 
> 时间：2021-09-18T20:26:00.787

我正在开发一个在 Windows 上有许多依赖项的 Angular 项目，并且正在运行 Node 14.17.0。突然我升级到 Node 最新版本 16.4.2 并开始出现冲突。

我决定降级，而不是一直使用 --legacy-peer-deps。

1.  从控制面板卸载节点
2.  只需使用 Installer 再次安装 Node 14

一切又好了。

* * *

## 回答 #34

> 赞同：-8
> 
> 时间：2016-05-04T05:57:21.123

（服务器：ubuntu 14）

1.）安装nvm（节点版本管理器）[https://github.com/creationix/nvm](https://github.com/creationix/nvm)

2.) nvm 安装节点

3.) npm -v (查询 npm 版本 => 3.8.6)

4.) node -v (查询节点版本=> v6.0.0)

# jquery-mobile - 垂直滚动导致滑动

> ID：11177958
> 
> 赞同：2
> 
> 时间：2012-06-24T13:41:39.023
> 
> 标签：jquery-mobile

我有一个奇怪的问题：当我垂直滚动时，它会触发向右/向左滑动事件。

我在iOS上检查过...

滑动事件绑定到`data-role='page'`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:24:24.257

您可以尝试将 配置`horizontalDistanceThreshold`为更高的值，以在滚动时允许更多的水平移动。

# c++ - 将数据文件复制到数组中

> ID：11177961
> 
> 赞同：0
> 
> 时间：2012-06-24T13:42:39.293
> 
> 标签：c++, visual-studio-2010

我有一个学校项目。他们给了我一个需要在 10*10 的数组中的数据文件。这个数组需要是一个上三角形，这意味着对角线和对角线以下的所有值都必须为零。该数据文件是项目每个阶段所花费的时间。这意味着每个 [i][j] 代表阶段从 i 到 j 的时间。只是为了使问题更复杂，要求您找到每列的最长时间并将其添加到下一列中的最长时间。到目前为止，这是我的代码：

```
#include <iostream>
#include<iomanip>
#include <fstream>
#include <cmath>
using namespace std;

//Function prototype
int minCompletionTime (int Data[], int numTasks);

int main()
{
    //Declaring and initializing variables
    int num_Events(0), completion_Time(0);
    int startSearch(0), endSearch(0);
    const int SIZE(10);
    char datch;

    //Declaring an array to hold the duration of each composite activity
    int rows(0),duration_Data [10];

    //Declaring an input filestream and attaching it to the data file
    ifstream dataFile;
    dataFile.open("duration.dat");

    //Reading the data file and inputting it to the array. Reads until eof
    //marker is read
    while (!dataFile.eof())
    {
        //Declaring an index variable for the array

        //Reading data into elements of the array
        dataFile >> duration_Data[rows];

        //Incrementing the index variable
        rows++;

    }
    //Taking input for the number of events in the project
    cout << "Enter the number of events in the project >>> ";
    cin  >> num_Events;

    //Calling the function to calculate the minimum completion time 
    completion_Time = minCompletionTime(duration_Data, num_Events);

    //Outputting the minimum completion time
    cout << "The minimum time to complete this project is " << completion_Time
        << "." << endl;

}

int minCompletionTime (int Data[], int numTasks)
{
    int sum=0;
    //As long as the index variable is less than the number of tasks to be
    //completed, the time to complete the task stored in each cell will be 
    //added to a sum variable
    for (int Idx=0; Idx < numTasks ; Idx++)
    {
        sum += Data[Idx];
    }

    return sum;
} 
```

任何帮助将不胜感激 我的数据文件只有 6 个元素包含这些元素：9 8 0 0 7 5 我的数据应该看起来像这样才能开始执行操作。

```
0 0 0 0 0 0 0 0 0 0 
0 0 9 8 0 0 0 0 0 0 
0 0 0 0 7 0 0 0 0 0
0 0 0 0 5 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 
```

这有点令人困惑。对不起。第一列和第二列应该以相同的方式具有零值和第一行。第五行之后也应该全为零，因为它将填充来自其他数据文件的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T16:12:19.227

有几种方法可以解决这个问题。这里有2个非常幼稚的方法：

**1\. 使用 10x10 数组：**

*   从数据文件 ( `dataFile >> data[row][col]`) 中读取所有内容。
*   有 2 个嵌套循环：
    *   外部循环遍历列。
    *   内部循环遍历该特定列的行。
    *   由于您必须找到最大值并且对角线下的值为零，因此您可以偷懒并找到每列的最大值（如果它比 10x10 大很多，您可能会遇到麻烦）。但是，如果您只想遍历必要的行，我会让您弄清楚（很简单，不要过度思考）。

**2\. 仅使用 1x10 数组：**

*   用最小值初始化数组（0 或 -1 应该适合你），我们称它为`max_row`.
*   逐项读取每一行，并将其与存储在中的值进行比较，`max_row`并适当地替换。
*   完成后，只需总结`max_row`.

# android - Android XML 反编译保护

> ID：11177962
> 
> 赞同：1
> 
> 时间：2012-06-24T13:42:42.287
> 
> 标签：android, xml

也许这个问题被问了很多次，但我找不到答案。

请解释或提供一些关于如何保护我的 Android 应用程序中的 XML 文件（布局、值、动画等）不被反编译的链接？现在，我看到有些人只是在反编译 apk 文件并使用我的开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T01:02:33.483

Proguard 会混淆您的引用，使反编译代码变得更加困难（以及读取堆栈跟踪等）。

这将有助于使您的代码更难反编译，但并非不可能。

# asp.net - 将 DISTINCT 与 T-SQL 存储过程一起使用

> ID：11177963
> 
> 赞同：1
> 
> 时间：2012-06-24T13:42:44.920
> 
> 标签：asp.net, tsql, stored-procedures

我正在运行以下存储过程，并且有一个类和日期表的连接。但是，在七个测试记录中，我在结果中得到一个重复记录：

```
SELECT DISTINCT dbo.Classes.Title, dbo.Classes.ClassTime, dbo.Classes.Category, 
    dbo.Classes.SubCategory1, dbo.Classes.[Description],dbo.Classes.ContactName, 
    dbo.Classes.ContactPhone, dbo.Classes.Location, dbo.Classes.Room,
    dbo.Dates.StartDate
    FROM dbo.Classes INNER JOIN dbo.Dates ON dbo.Classes.ClassID = dbo.Dates.ClassID
    ORDER BY StartDate DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:55:42.933

这两行中的一列很可能`Date`有所不同，但输出中不会显示差异。

您可以通过从结果中删除这些列来验证这一点。

```
SELECT DISTINCT dbo.Classes.Title
       , dbo.Classes.Category
       , dbo.Classes.SubCategory1
       , dbo.Classes.[Description]
       , dbo.Classes.ContactName
       , dbo.Classes.ContactPhone
       , dbo.Classes.Location
       , dbo.Classes.Room
FROM   dbo.Classes 
       INNER JOIN dbo.Dates ON dbo.Classes.ClassID = dbo.Dates.ClassID 
```

另一方面，我建议您使用别名来提高语句的可读性。

```
SELECT DISTINCT dbo.Classes.Title
       , c.Category
       , c.SubCategory1
       , c.[Description]
       , c.ContactName
       , c.ContactPhone
       , c.Location
       , c.Room
FROM   dbo.Classes AS c
       INNER JOIN dbo.Dates AS d ON c.ClassID = d.ClassID 
```

# plsql - 运行 PL/SQL 块时出现错误 "BIND VARIABLE "A" NOT DECLARED"

> ID：11177969
> 
> 赞同：1
> 
> 时间：2012-06-24T13:44:00.383
> 
> 标签：plsql

在 Oracle 10g (pl/sql) 中运行以下代码时

```
DECLARE 
    A NUMBER;
    B NUMBER;
BEGIN:
     A:=&N;
     B:=&M;
 IF (A>B)
     DBMS_OUTPUT.PUT_LINE('THE MAXIMUM OF TWO NUMBER IS:' || TO_CHAR(A));
 ELSE 
    DBMS_OUTPUT.PUT_LINE('THE MAXIMUM OF TWO NUMBERS IS:' || TO_CHAR(B));
 END IF;
END; 
```

我收到错误“绑定变量“A”未声明”，我不知道为什么。这是什么原因造成的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:08:30.970

您的代码有几处问题。

第一个问题是后面不应该有冒号`BEGIN`。您所写的内容被 Oracle 解释为`BEGIN :A := ...`，这应该可以解释为什么您会收到有关绑定变量的错误`A`。

第二个问题是线路`IF (A>B)`。您需要`THEN`在末尾添加一个。

顺便说一句，您可以使用`GREATEST(A, B)`返回两个数字中较大的一个。

# java - 在同一页面上获取、处理和显示结果

> ID：11177971
> 
> 赞同：2
> 
> 时间：2012-06-24T13:44:27.040
> 
> 标签：java, jsp, servlets, javabeans

我有一个 jsp 页面，其中包含一个用户填写一些值的表单。现在我将这些值传递给一个 servlet，它处理它并检索一组相关的数据。现在，我能够在 servlet 页面中检索数据，但无法在我获取请求的同一 jsp 页面上显示它。

* * *

**我不想在jsp中使用java代码。我希望只使用 servlet 来做同样的事情。我不想做这样的事情**

* * *

```
<% if(rollno==null)
      // then display the form
   else 
      // process the request on the jsp page itself  
%> 
```

* * *

我想在一个 servlet 文件中处理我的所有结果，然后**通过将数据从 servlet 传递到 jsp 来**在 jsp 页面上显示结果。我在下面发布我的代码：

* * *

```
<form id="form" method="post" action="searchServlet">
Student Roll No :<br><input type="text" value="" name="rollno"><br><br>
<input type="submit" value="SHOW DETAILS" />
</form> 
```

* * *

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
            String rollno=request.getParameter("rollno");
            ResultSet rs=null;

            Class.forName("com.mysql.jdbc.Driver");  
            String url="jdbc:mysql://localhost/schooldatabase";
            Connection con = DriverManager.getConnection(url,"root","passwd");

            Statement st= (Statement) con.createStatement();
            String strquery="SELECT name,regno FROM `schooldatabase`.`student_info` WHERE rollno="+ rollno+ ";";

            if(!con.isClosed()) {
                rs=st.executeQuery(strquery);

                while(rs.next())
                {
                    out.println(rs.getString("name"));
                    out.println(rs.getString("regno"));
                }
            }

            else
            {    // The connection is closed 
            }
          }           

            catch(Exception e)
            {
                out.println(e);
            }

             finally {            
               out.close();
            }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T13:57:47.383

您不应该在 servlet 中进行演示。servlet 中不应包含**任何***这些*行。

```
response.setContentType("text/html;charset=UTF-8");
PrintWriter out = response.getWriter();

// ...
                out.println(rs.getString("name"));
                out.println(rs.getString("regno"));

// ...

            out.println(e); 
```

相反，您应该将数据存储在合理的集合中，并将其设置为请求属性，最后将请求/响应转发给 JSP，该 JSP 进而围绕所有这些数据生成正确的 HTML。像这样的东西：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    try {
        List<Student> students = studentDAO.find(request.getParameter("rollno"));
        request.setAttribute("students", students); // Will be available as ${students} in JSP
        request.getRequestDispatcher("/WEB-INF/students.jsp").forward(request, response);
    } catch (SQLException e) {
        throw new ServletException("Cannot obtain students from DB", e);
    }
} 
```

有了这个`students.jsp`

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
...
<table>
    <c:forEach items="${students}" var="student">
        <tr>
            <td>${student.name}</td>
            <td>${student.regno}</td>
        </tr>
    </c:forEach>
</table> 
```

有关更具体的示例，另请参阅此答案：[Show JDBC ResultSet in HTML in JSP page using MVC and DAO pattern](https://stackoverflow.com/questions/5003142/jsp-using-mvc-and-jdbc/5003701#5003701)

### 也可以看看：

*   [我们的 Servlets wiki 页面](https://stackoverflow.com/tags/servlets/info)- 包含几个 Hello World 示例

# blackberry - BlackBerry Java Plugin for Eclipse - .net Web 服务

> ID：11177972
> 
> 赞同：-1
> 
> 时间：2012-06-24T13:44:38.320
> 
> 标签：blackberry

我有一个接受用户名和密码的网络服务，如果登录凭据正确，它会返回用户名、状态、图像和最后已知的 gps 坐标。

至于现在，我被困在“登录”按钮中，应用程序既不继续也不抛出任何错误。模拟器没有结果，我无法将应用程序加载到我的手机上。

```
package mypackage;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.OutputStream;
import java.rmi.RemoteException;
import java.util.Hashtable;

import javacard.framework.UserException;

import javax.microedition.io.HttpConnection;
import javax.microedition.location.Location;
import javax.microedition.location.LocationProvider;

import org.kobjects.base64.Base64;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransport;
import org.xmlpull.v1.XmlPullParserException;

import net.rim.device.api.system.*;
import net.rim.device.api.ui.*;
import net.rim.device.api.ui.component.*;
import net.rim.device.api.ui.component.pane.TitleView;
import net.rim.device.api.ui.container.*;
import net.rim.device.api.ui.image.Image;

public class LoginTest extends UiApplication 
{
   public static void main(String[] args)  
   {
      //Create a new instance of the app
      //and start the app on the event thread.
      LoginTest app = new LoginTest();
      app.enterEventDispatcher();
   }

   public LoginTest()
   {
      //Display a new screen.
      pushScreen(new LoginTestScreen());
   }
}

//Create a new screen that extends MainScreen and provides
//behaviour similar to that of other apps.
final class LoginTestScreen extends MainScreen
{
   //declare variables for later use
   private InfoScreen _infoScreen;
   private ObjectChoiceField choiceField;
   private int select;
   BasicEditField username;
   PasswordEditField passwd;
   CheckboxField checkBox1;
   ButtonField loginBtn;
   Hashtable persistentHashtable;    
   PersistentObject persistentObject;
   static final long KEY = 0x9df9f961bc6d6baL;
   // private static final String URL="http://prerel.track24elms.com/Android/T24AndroidLogin.asmx";
   String strResult;

   public LoginTestScreen()
   {
      //Invoke the MainScreen constructor.
      super();

      //Add a screen title.
      setTitle("Track24ELMS");

      LabelField login = new LabelField("ELMS Login", LabelField.FIELD_HCENTER); 
      login.setFont(Font.getDefault().derive(Font.BOLD, 30));
      login.setMargin(10, 0, 20, 0); //To leave some space from top and bottom

      HorizontalFieldManager user = new HorizontalFieldManager();
      user.setMargin(0, 0, 10, 0);
      HorizontalFieldManager pass = new HorizontalFieldManager();
      pass.setMargin(0, 0, 20, 0);
      HorizontalFieldManager checkbox = new HorizontalFieldManager();
      checkbox.setMargin(0, 0, 30, 0);
      HorizontalFieldManager btns = new HorizontalFieldManager(HorizontalFieldManager.FIELD_HCENTER);

      LabelField usernameTxt = new LabelField("Username :");
      LabelField passwordTxt = new LabelField("Password :");

      username = new BasicEditField();
      passwd = new PasswordEditField();

      loginBtn = new ButtonField("Login", ButtonField.CONSUME_CLICK);
      // btn.setChangeListener(new view listener);

      //checkBox1 = new CheckboxField("Remember me", false,Field.FOCUSABLE);
      checkBox1 = new CheckboxField("Remember me",false);

      user.add(usernameTxt);
      user.add(username);
      pass.add(passwordTxt);
      pass.add(passwd);
      //checkbox.add(checkBox1);
      btns.add(loginBtn);
      add(login);
      add(user);
      add(pass);
      add(checkBox1);
      add(btns);

      // loginBtn.setChangeListener(btnlistener);
   }

   public void saveChecked() {
      persistentHashtable.put("", username.getText());
      persistentHashtable.put("", passwd.getText());
      persistentHashtable.put("BoolData", new Boolean(checkBox1.getChecked()));
      persistentObject.commit();
   }

   FieldChangeListener btnlistener = new FieldChangeListener() {

      public void fieldChanged(Field field, int context) {
         //Open a new screen
         String uname = username.getText();
         String pwd = passwd.getText();

         //If there is no input
         if (uname.length() == 0 || pwd.length()==0) {
            Dialog.alert("One of the textfield is empty!");
         } else {
            final String METHOD_NAME = "ValidateCredentials";
            final String NAMESPACE = "http://tempuri.org/";
            final String SOAP_ACTION = NAMESPACE + METHOD_NAME;
            final String URL = "http://prerel.track24elms.com/Android/T24AndroidLogin.asmx";

            SoapObject resultRequestSOAP = null;
            HttpConnection httpConn = null;
            HttpTransport httpt;
            System.out.println("The username" + uname + "password" + pwd );
            SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
            //String usernamecode = Base64.encode(username.getBytes());
            //String pwdEncodeString = Base64.encode(passwd.getBytes());
            request.addProperty("Username", "abc");//First parameter is tag name provided by web service
            request.addProperty("Password", "xyz");
            System.out.println("The request is=======" + request.toString());
            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
            envelope.bodyOut = request;
            envelope.dotNet = true;
            envelope.encodingStyle = SoapSerializationEnvelope.XSD;
            envelope.setOutputSoapObject(request);
            System.out.println("The envelope has the value++++"+ envelope.toString());

            /* URL+  Here you can add paramter so that you can run on device,simulator etc. this will work only for wifi */
            httpt = new HttpTransport(URL+ ";deviceside=true;ConnectionUID=S TCP-WiFi");
            httpt.setXmlVersionTag("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
            httpt.debug = true;
            try
            {
               System.out.println("SOAP_ACTION    ==   " + SOAP_ACTION);
               httpt.call(SOAP_ACTION, envelope);
               System.out.println("the tranport" + httpt.toString());
               resultRequestSOAP = (SoapObject) envelope.bodyIn;
               System.out.println("result    ==   " + resultRequestSOAP);            
            }
            catch (IOException e) {
               System.out.println("The exception is IO==" + e.getMessage());
            } catch (XmlPullParserException e) {
               System.out.println("The exception xml parser example==="
                     + e.getMessage());
            }
            System.out.println( resultRequestSOAP);

            UiApplication.getUiApplication().pushScreen(new InfoScreen()); //Open a new Screen
         }
      }
   };

   //To display a dialog box when a BlackBerry device user
   //closes the app, override the onClose() method.
   public boolean onClose()
   {
      if(checkBox1.equals("true"))
      {
         persistentObject = PersistentStore.getPersistentObject(KEY);

         if (persistentObject.getContents() == null) {
            persistentHashtable = new Hashtable();
            persistentObject.setContents(persistentHashtable);
         }
         else {
            persistentHashtable = (Hashtable)persistentObject.getContents();
         }

         if (persistentHashtable.containsKey("EditData")) {
            username.setText((String)persistentHashtable.get("EditData"));
         }

         if (persistentHashtable.containsKey("BoolData")) {
            Boolean booleanObject = (Boolean)persistentHashtable.get("BoolData");
            checkBox1.setChecked(booleanObject.booleanValue());
            if(booleanObject.booleanValue()==true){
               saveChecked();
            }
         }
      }
      Dialog.alert("Goodbye!");
      System.exit(0);
      return true;
   }

   //Create a menu item for BlackBerry device users to click to see more 
   //information about the city they select.

   private MenuItem _viewItem = new MenuItem("More Info", 110, 10) 
   {
      public void run() 
      {
         //Store the index of the city the BlackBerry device user selects
         select = choiceField.getSelectedIndex();

         //Display a new screen with information about the
         //city the BlackBerry device user selects
         _infoScreen = new InfoScreen();
         UiApplication.getUiApplication().pushScreen(_infoScreen);
      }
   };

   //Create a menu item for BlackBerry device users to click to close 
   //the app.
   private MenuItem _closeItem = new MenuItem("Close", 200000, 10) 
   {
      public void run()
      {
         onClose();
      }
   };

   //To add menu items to the menu of the app, 
   //override the makeMenu method.

   //Create an inner class for a new screen that displays
   //information about the city a BlackBerry device user selects.
   private class InfoScreen extends MainScreen
   {
      public InfoScreen() 
      {
         super();
         setTitle("Itinerary");

         LabelField login = new LabelField("Employee Itinerary", LabelField.FIELD_HCENTER); 

         Bitmap bitmap = Bitmap.getBitmapResource("img1.jpg");
         EditField statusMsg = new EditField("Status Message", "Update status here");
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:26:21.290

在您发布的代码中，没有设置任何内容来响应您按下的登录按钮。

首先，让我们删除这个实现的*匿名*类`FieldChangeListener`：

```
FieldChangeListener btnlistener = new FieldChangeListener() { 
  public void fieldChanged(Field field, int context) { 
```

并使它像这样：

```
private class LoginButtonListener implements FieldChangeListener {
  public void fieldChanged(Field field, int context) {
    // no change to the content of this method!
  }
} 
```

并在 for 的构造函数中`LoginTestScreen`，实例化它，并将其连接到登录按钮：

```
loginBtn = new ButtonField("Login", ButtonField.CONSUME_CLICK); 
loginBtn.setChangeListener(new LoginButtonListener()); 
```

在注释掉的代码中，您似乎很接近。只是需要多一点。试试看，然后报告！

**注意：**您*可以*使其与您最初拥有的匿名按钮侦听器类一起使用。我只是不喜欢匿名类变得那么大时的可读性，特别是因为您的`btnListener`成员被声明在与所有其他成员完全不同的地方。真正缺失的部分是对`setChangeListener`. 我只是想区分我推荐的和需要的。

# django - 人们通常使用什么主机来发布 Django 网站？

> ID：11177973
> 
> 赞同：11
> 
> 时间：2012-06-24T13:44:39.763
> 
> 标签：django, hosting

我有一个小的 Django 网站，我出于学习目的而写的，但现在我想在 Internet 上发布它。亲爱的 Stackoverflowers，您能否推荐任何方便使用的*免费*Django 提供程序？

对不起，如果这是一个愚蠢的问题。

PS 我在网上搜索过，找到了一些供应商，但我无法确定哪个好。需要你的建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T14:42:49.723

Heroku 上提供带有 postgres 的 django 应用程序的免费云托管服务。我在 20 分钟内部署了一个应用程序。

[https://devcenter.heroku.com/articles/django](https://devcenter.heroku.com/articles/django)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T13:56:15.110

我相信[Heliohost](http://www.heliohost.org/home/features/languages/python)很受欢迎，强烈推荐。我自己没有使用过它，但可能值得一试。

# java - 多层继承 - Java

> ID：11177975
> 
> 赞同：3
> 
> 时间：2012-06-24T13:44:51.783
> 
> 标签：java, oop, class, inheritance

如果**a**类扩展了**b**类，而**b**类扩展了**c**类，那么**a**是否继承自**c**和**b**？如果是这样，在两者之间发生冲突的情况下，是否存在错误或者是否会覆盖另一个错误（如果是，是哪一个）？

如果标题不合适，请重命名问题。

编辑：我所说的冲突是这样的：

```
class c {
   int foo;
   //Stuff
}
class b extends c {
   String foo;
   //Stuff
}
class a extends b {
   //Stuff
} 
```

是`a.foo`字符串还是整数？

另一个编辑：所以据我所知，这里的继承有点像 CSS - 规则设置得越接近，它的优先级就越高（例如内联样式覆盖样式表）。这是考虑这个问题的好方法，还是有很大不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T13:50:34.363

如果两者中都存在某些东西`b`，`c`则将`a`继承`b`使用的任何一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T13:46:16.000

是的，a 继承自 b 和 c。我看不出在这种情况下怎么会发生冲突，因为 b 的方法覆盖对 a 有效。您可能会想到来自多重继承冲突的[钻石问题，但那是当您有两个不同的父母，而不是两个父母，一个父母是另一个父母的时候。](http://en.wikipedia.org/wiki/Diamond_problem)

您可能会遇到接口的“软”菱形问题，其中两个方法具有相同的签名，但一个方法的规则与另一个方法的规则不匹配。由于两个接口都没有实现它们的方法，所以不存在编译问题（据我所知），只是一个逻辑问题。

**编辑** 啊，我已经看到您对*variables*的编辑，我同意 Jimpanzee 对此的回应。这当然很容易测试：

```
public class Test3 {
   public static void main(String[] args) {
      MyA myA = new MyA();
      System.out.println("foo := " + myA.foo);
   }
}

class MyC {
   public int foo = 3;
   //Stuff
}
class MyB extends MyC {
   public String foo = "foo";
   //Stuff
}

class MyA extends MyB {

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T13:58:30.490

[这个答案](https://stackoverflow.com/a/2464337/47552)有一个更好的例子，并指出做这种事情被认为是不好的做法。（例如，Eclipse 会给你一个警告。）稍微扩展你的代码：

```
class c {
   int foo = 42;
   //Stuff
}
class b extends c {
   String foo = "foostr";
   //Stuff
}
class a extends b {
   //Stuff
}
class Main{
   public static void main(String[] args){
      a mya = new a();
      System.out.println(mya.foo);
   }
} 
```

运行`java Main`打印`foostr`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T14:04:03.693

嗯，规则如下。

1.  任何子类都将继承最接近其层次结构。所以**a**将从**b**得到一切。**因为继承堆栈上的所有内容在b**之前都可用。因为**b**已经从其继承层次结构中继承了所有内容。

2.  其次，如果**b**覆盖任何东西（实例变量/方法），那么**a**将看到覆盖的版本。因此，在您的情况下**， a**将获得 String foo。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-24T14:21:53.450

在 Java 中，只有方法会被覆盖。其他一切都只是继承，只有命名空间冲突的问题，但一切仍然可以访问。在您的示例中，两个`foo`s 都可以访问`A`（我已经更正了类名以使它们符合强 Java 命名约定）：

```
class C {
  int foo;
  //Stuff
}
class B extends C {
  String foo;
  //Stuff
}
class A extends B {
  String x = ((B)this).foo;
  int i = ((C)this).foo;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-24T13:46:36.907

是的，它继承自 c 和 b。为了防止/避免冲突，Java 支持单一层次模型（不同于其他 OOP 语言，如允许多类继承模型的 C++）。

# build-automation - Sencha Touch 2 Build Unexpected token ILLEGAL

> ID：11177985
> 
> 赞同：0
> 
> 时间：2012-06-24T13:46:29.287
> 
> 标签：build-automation, sencha-touch-2, minify

我正在尝试为生产构建 Sencha Touch 2 应用程序，但出现错误。当我运行测试构建 - 'sencha app build testing' 我看到**Uncaught SyntaxError: Unexpected token ILLEGAL** in app.js （测试构建 - 所以它没有被最小化）。

错误行的内容是

```
п»їExt.define("App.controller.SomeController", 
```

正如我所见， sencha 在**Ext.define**之前插入了一些无法解释的奇怪符号。它们出现在我的任何类的每个定义之前。

我检查文件的编码 (utf-8) 和行尾 (Windows - CR-LF)

我的电脑在 Win 7 SP1 x86 上运行

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T19:40:38.873

对我来说，app.json 中的以下几行是固定的生产版本。但是测试构建仍然失败。

```
 /**
 * File / directory name matchers to ignore when copying to the builds, must be valid regular expressions
 */
"ignore": [
    "\.svn$"
], 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T10:53:37.963

看起来您的代码中有一些错误。检查开发人员工具控制台是否有任何错误，因为如果有错误，它很可能不会成功构建。小号

首先添加一个自定义面板，例如而不是整个应用程序。然后尝试构建最简单的应用程序，例如 Hello World 并检查问题是否仍然存在。

最有可能的是，构建会成功。如果是这种情况，请开始一点一点地添加，直到出现问题，这样您就可以识别出问题所在。

# c++ - 如何处理库未提供的头文件

> ID：11177989
> 
> 赞同：2
> 
> 时间：2012-06-24T13:47:01.203
> 
> 标签：c++, static-libraries, header-files

我将详细说明一个常见的假设问题。

**问题：**

我提供了一个静态库，比如`libX.a`头文件`a.h`和`b.h`. 头文件`a.h`并`b.h`包含库导出的 API。`a.h`包括`a1.h`和`b.h`包括`b1.h`。但是`a1.h`并`b1.h`没有由库的所有者提供，因为`a1.h`包含`b1.h`库私人使用的数据结构，并且所有者不想公开这些数据结构。

我必须编写一个调用库导出的 API 的应用程序。所以我必须包含`a.h`其中`b.h`包含 API 的声明。

好的。我编写我的应用程序并包含头文件`a.h`并`b.h`调用 API。但是我会得到一个编译器错误，因为编译器无法找到`a1.h`and`b1.h`内部包含的`a.h`and `b.h`。

**问题：**

1.  这个问题有解决方案吗？如果是，请认真寻求解决方案:)

2.  库所有者是否有必要公开他在库中内部使用的所有私有头文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T14:47:37.563

我将从最后一个开始。库的所有者可以隐藏包含私有信息的标题，但他必须确保公共标题不依赖于那些私有标题，即它们不能包含它们！

至于第一个问题，您可以尝试删除那些包含行。它应该可以编译，但如果没有编译，那么创建者可能在私有头文件中隐藏了一些重要的东西，这对于除他自己之外的其他人使用他的库至关重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:57:18.413

1）您可以查看该`nm`工具，请参阅[SO: how to list symbols in a so-file](https://stackoverflow.com/questions/34732/how-do-i-list-the-symbols-in-a-so-file)。也许它也适用于静态库，我不确定。

2) 库所有者可以使用[John Lakos 在大规模 C++ 软件设计](https://rads.stackoverflow.com/amzn/click/com/0201633620)中的技术来防止暴露内部结构。也许您可以使用其中的技术来创建所需的部分，`a1.h`而`b1.h`无需依赖您没有的信息。特别是在不定义其内容的情况下声明结构/类。

# php - php函数从数据库中获取html标签

> ID：11177990
> 
> 赞同：0
> 
> 时间：2012-06-24T13:47:41.227
> 
> 标签：php, mysql, function

我有一个旧数据库要维护....他们已经在数据库中存储了 html 标签，并且正在使用旧的 mysql 和 php 来获取输出...现在我正在尝试通过函数和 PDO 使用它来获取输出....没有得到正确的输出....它只是给html标签显示格式化段落...我该如何解决它，这是我的代码-->功能

```
function movie_page($name,$date){
    global $host, $dbname, $user, $pass;
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $STH = $DBH->prepare("SELECT * FROM bh_movies WHERE name = ? and re_date = ?");
    $STH->bindValue(1, "$name", PDO::PARAM_STR);
    $STH->bindValue(2, "$date", PDO::PARAM_STR);
    $STH->execute();
    $STH->setFetchMode(PDO::FETCH_ASSOC);
    return $STH;
    } 
```

输出是

```
$STH = movie_page($id,$date);
     while (($row = $STH->fetch()) !== false) {
    if ($row['actors'] !=''){
    echo '<tr>
            <td><h1><a href="movie_page.php?id='.$row['name'].'">'.$row['name'].'</a></h1></td>
            <td>'.date('d-M-Y',$row['re_date']).'</td>
            <td><a href="movie_page.php?id='.$row['name'].'">
            <img src="'.$row['small_poster'].'" title="'.$row['name'].'" alt="'.$row['name'].'" height="97" width="182"/>
            </a>
            </td>
            <td><a href="movie_page.php?id='.$row['a'].'">
            <td>'.$row['actors'].'</td>
            <td>'.$row['small_desc'].'</td>
            <td>'.$row['big_desc'].'</td>
          </tr>';

     } 
```

我在输出中得到 Html 标签......而不是像这样的格式段落

```
<font color="green"><B><u>Characters</u></B></font><br><br> <B>Sonu Dilli (KKC)</B> Emraan Hashmi<BR><BR> Sonu Dilli is a streetsmart 
```

请帮忙

***** 输入源*******

 **```
function insert_data(){
    global $host, $dbname, $user, $pass;
    $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
    $STH = $DBH->prepare("INSERT IGNORE INTO bh_movies 
    (name, bh_link, re_date,  small_poster, big_poster, small_desc, big_desc, actors) 
    value (:name, :bh_link, :re_date, :small_poster, :big_poster, :small_desc, :big_desc, :actors)");
    return $STH;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T14:15:06.247

您的数据有时会被转换为 HTML 实体。找到它被转换的点（可能使用[`htmlspecialchars()`](http://www.php.net/htmlspecialchars)）或解码来自数据库的数据（使用[`htmlspecialchars_decode()`](http://www.php.net/htmlspecialchars_decode)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-11T18:18:55.407

html_entity_decode() 从数据库中解码 HTML。**

# powershell-ise - 是什么导致了这个无用的 Powershell ISE 错误消息？

> ID：11177991
> 
> 赞同：0
> 
> 时间：2012-06-24T13:47:41.983
> 
> 标签：powershell-ise

我正在尝试将 Powershell ISE 用作控制台应用程序，但收效甚微。Comskip 是一个命令行工具，我有一个 AHK 脚本执行 Comskip 商业广告通常通过`cmd.exe`. 工作正常，但最近我开始在文件名中使用 Unicode 字符（星级），众所周知，这些字符在控制台中的显示效果不会特别好。

调查使我找到了应该支持 Unicode 的 Powershell ISE。从 ISE 运行 Comskip 被证明是相当具有挑战性的。如果手动输入所有内容，它可以正常工作，但是从另一个脚本调用它时问题就开始了。

现在有问题的部分是，如果使用调用普通 Powershell 控制台的代码一切正常。但是调用 ISE 的相同代码失败了，我不明白为什么。你们中的任何一个都可以吗？我收到的错误消息没有给出任何关于出错的明确线索。错误信息只说：

> *用法：`powershell_ise.exe`或`powershell_ise.exe fileName.ps1`*

调用 ISE 的 AHK 线路如下所示：

```
latest_file := "C:\Program\Comskip\q.ts"
Run, PowerShell_ISE.exe "C:\Program\Comskip\comskip.exe" -t --videoredo "%latest_file%" 
```

现在，如果使用 Powershell 控制台，同样的代码可以正常执行：

```
latest_file := "C:\Program\Comskip\q.ts"
Run, PowerShell.exe "C:\Program\Comskip\comskip.exe" -t --videoredo "%latest_file%" 
```

我怎么会得到这些异常？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:10:14.997

PowerShell ISE 无法像 powershell.exe 那样运行命令。原因很简单：ISE 被设计为一个交互式环境，其中 powershell.exe 被认为是用于交互式和“批处理”操作的东西，就像您尝试完成的那样。

您得到的错误是 IMO 足够的描述性：您只能运行 PowerShell_ISE（无参数）或指定 ISE 启动后将打开的 .ps1 文件。在 v3 中新增了 2 个（-No​​Profile 和 -MTA），但仍然 - 没有人将其设计为批处理工具。抱歉。

# php - 防止mysql db中的重复行，IGNORE不起作用

> ID：11177992
> 
> 赞同：0
> 
> 时间：2012-06-24T13:48:05.423
> 
> 标签：php, mysql

我试图防止将重复行插入 mysql 数据库。表名是收藏夹，我的表中有两列：company_id 和 user_id，我想防止用户尝试将同一公司作为“收藏夹”添加到数据库中两次。

这是我尝试过的：

```
$query  = "INSERT IGNORE INTO favorites (item_id, user_id) VALUES ( $item_id, $user_id )";
    mysql_query($query,$conn); 
```

但不起作用。

我还尝试“更改表”以添加主键，但是，我需要 user_id 和 item_id 作为键，因为相同的收藏项可以被多个“user_id”收藏，并且相同的“user_id”可以插入许多不同的收藏项目，以便可以“复制”数据，但我试图防止将完全相同的“user_id”和“item_id”插入两次。

我很感激这方面的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T13:59:26.353

我知道的最简单的方法是在 user_id-item_id 对上添加一个 UNIQUE 约束，这将通过以下查询来完成：

```
ALTER TABLE favorites 
ADD UNIQUE(item_id,user_id) 
```

每当您尝试插入表中已经存在的 user_id-item_id 对时，您的插入查询就会返回错误，因此您的 INSERT 查询应该被修改：

```
INSERT INTO favorites(item_id,user_id) 
     VALUES ($item_id,$user_id) 
ON DUPLICATE KEY UPDATE item_id=item_id 
```

I do not recommend using "INSERT IGNORE" because it ignores ALL errors. My query will simply set item_id=item_id (no change) whenever it detects a duplicate key, so data will not be duplicated.

I also strongly encourage you to look into using [MySQLi](http://www.php.net/manual/en/book.mysqli.php) instead of the mysql_* functions. The PHP that you posted is very susceptible to mysql injections should you forget to check those two user input variables. Even the PHP manual actively discourages those functions for the same reason.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T13:55:53.237

尝试将复合主键（from`item_id`和`user_id`）添加到表中。

如果您的表中已经有违反此约束的数据，您将收到错误消息，在这种情况下，您需要创建一个新表并将数据迁移到新表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T14:04:48.303

You can use a composite primary key of the columns like so:

```
ALTER TABLE table ADD PRIMARY KEY ( 'item_id' , 'user_id' ) 
```

This means that same user_ids and item_ids are allowed and only a combination of them needs to be unique.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T13:58:27.657

`INSERT IGNORE`仅适用于键。通常，您拥有的唯一键是表上的主键。

因此，首先搜索匹配的行，如果它们存在，则不要插入新记录。

```
$search_q = "SELECT `id` FROM `favorites` WHERE `item_id` = ";
$search_q .= mysql_real_escape_string($item_id);
$search_q .= " AND `user_id` = ";
$search_q .= mysql_real_escape_string($user_id);

$r = mysql_query($search_q);
if (!mysql_num_rows($r)) {
   # This combination doesn't exist
   $insert_q = "INSERT INTO `favorites` (`item_id`,`user_id`) VALUES (";
   $insert_q .= mysql_real_escape_string($item_id).",";
   $insert_q .= mysql_real_escape_string($user_id).")"
   mysql_query($insert_q);  
} 
```

# javascript - GWT Canvas - 如何在 KeyPress 事件期间获取 Canvas 上的鼠标位置？

> ID：11177993
> 
> 赞同：0
> 
> 时间：2012-06-24T13:48:07.903
> 
> 标签：javascript, html, gwt, canvas, html5-canvas

我有一个带有 Canvas 的 GWT 应用程序。我在画布上添加了几个事件处理程序，包括 KeyPressedHandler。

当用户按下一个键并触发 KeyPressEvent 时，我想找出鼠标在 Canvas 中的位置（类似于 MouseEvent.getX()、MouseEvent.getY() 提供的位置。但是，KeyPressEvent 和 NativeEvent 都没有提供此信息据我所知。我怎样才能得到它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T07:27:15.300

A`MouseMoveHandler`会有所帮助，但这在用户实际移动鼠标之前不会起作用......

# php - 使用 codeigniter 和 node.js 进行长轮询

> ID：11177997
> 
> 赞同：1
> 
> 时间：2012-06-24T13:49:07.107
> 
> 标签：php, jquery, codeigniter, node.js, long-polling

我处于研究新技术的位置，所以我听说过 Long polling,node.js。

我需要创建一个使用`long polling`.

在这个项目的每个页面上，我都需要使用轮询，实际上它通过 POP 检查是否有新的电子邮件。

所以我认为我需要做以下事情

1.  向服务器调用ajax请求
2.  服务器收到请求并检查是否有新的电子邮件
3.  如果有一个新的邮件服务器响应它的详细信息
4.  如果没有新的电子邮件服务器在某个时间开始休眠并再次检查，直到收到一封新电子邮件。

所以像这样

```
$(document).ready(function(){

is_there_new_mail();

function is_there_new_mail()
{

$.get(url,function(data){

if(data ==true)
{
//do some actions and call again
is_there_new_mail();
}

});

}

}); 
```

在服务器中是这样的

```
 function check_mail()
    {

    //processing and checking is there a new mail on inbox 

    return $is_mail = $this->_new_mail()?true:false;

    }

    function receiver()
    {
    if($check_mail())
    {
     //send to client..
    }
    else

    {
    //sleep sometime and call mail function
    }

} 
```

我听说这样做会在服务器上打开许多连接，如果我们使用 node.js，我们可以在一个连接中管理它。

我正在使用 Codeigniter，对 node.js 来说真的很陌生。

如何使用 codeigniter 实现 node.js，或者您能否建议我更多关于此场景的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T15:08:32.163

它不会`node`在一个连接中处理所有请求。Node 一次可以处理大量的并发连接，而​​ Apache 与 node.js 相比只能处理很少的并发连接

查看`websockets` [http://socket.io/](http://socket.io/)。

Websockets 允许客户端和服务器之间的全双工连接。HTTP 协议为每个请求打开一个连接，并在客户端收到响应后结束连接。Websockets 允许我们保持连接打开。

如果您在服务器端使用 nodejs 和 websockets，您可以使用套接字将事件推送到客户端，而不是客户端以特定间隔轮询服务器。

因此，它将使您免于长时间轮询。

在您的情况下：如果您决定使用 nodejs 和 websocket，那么您将需要找到一种方法来触发服务器中的传入电子邮件事件并通知现有套接字该事件。

**所以节点也需要轮询POP来检查邮件，有什么区别**

想象一下有 1000 个用户使用轮询登录到应用程序。每个用户将每 30 秒轮询一次服务器。所以每秒 2000 次 POP 民意调查。

使用nodejs，第二次POP poll，如果有邮件，通知sockets，客户端会处理事件。

但是您应该真正考虑项目的整体需求。 [如何决定何时使用 Node.js？](https://stackoverflow.com/questions/5062614/how-to-decide-when-to-use-nodejs)