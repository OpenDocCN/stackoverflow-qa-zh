# StackOverflow 问答 11353000-11353999

# php - 登录表单在 xampp 上工作，但在我的主机上不工作

> ID：11353005
> 
> 赞同：0
> 
> 时间：2012-07-05T21:45:07.867
> 
> 标签：php, html, forms, login

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

我的登录表单有问题。我创建了一个站点，并在 xampp localhost 上运行该站点。它通常工作正常，但是当我将文件传输到虚拟主机时，我的登录表单显示此错误：

```
Warning: mysql_num_rows() expects parameter 1 to be resource, boolean given
... on line 39 
```

我在这一行的代码是：

```
$login_check = mysql_num_rows($sql);

// If login check number is greater than 0 (meaning they do exist and are activated)
if($login_check > 0){ 
    while($row = mysql_fetch_array($sql)){ 
```

有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:52:28.490

如果您在 $login_check = mysql_num_rows($sql); 行之前提供代码，它将被清除。但我的猜测是 $sql 是您使用 mysql_connect(); 获得的 mysql 连接资源；如果连接失败，它可以是布尔值。

因此，请检查您的连接设置：mysql 登录名、密码、数据库名称...

# javascript - 如何使用 jQuery 解析这个 HTML？

> ID：11353009
> 
> 赞同：0
> 
> 时间：2012-07-05T21:45:31.830
> 
> 标签：javascript, jquery, regex

在过去的 2 个小时里试图弄清楚这一点变得疯狂。我将此 html 作为 AJAX 请求的字符串返回：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Preview</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="author" content="Connected Ventures LLC. Copyright 1999-2010." />
    <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/jquery.ui.js"></script>
    <script type="text/javascript" src="js/article.js"></script>
    <link href="/css/global.css" rel="stylesheet" type="text/css" />
    <link href="/css/article.css" rel="stylesheet" type="text/css" />
    <style type="text/css">
    html, body { background: #fff; color: #000; }
    </style>
</head>
<body class="the_article">
        <p>s</p></body>
</html> 
```

我需要在正文标签之间获取内容。我已经尝试过这个，这是在另一个关于通过 jQuery 解析 html 的 SO 问题中提出的：

```
$(ajax_response).find('body.the_article').html(); 
```

没用。即使在添加后：

```
dataType: 'html' 
```

作为ajax请求参数。然后我尝试使用正则表达式解析它：

```
ajax_response.match(/<body class="the_article">.*?<\/body>/); 
```

它只是提醒null。知道如何获取正文内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:03:07.470

您的 REGEX 失败，因为字符串是多行的，并且`.`通配符匹配除空白字符之外的所有字符，因此在开始`body`标记和正文内容之后的换行符会破坏模式。

使用`[\s\S]`代替`.`（字面意思，允许非空格和空格字符）

```
/<body class="the_article">[\s\S]*?<\/body>/ 
```

[编辑] - 响应评论，捕获不包括其标签的正文内容，将内容捕获为子组：

```
var body = response.match(/<body class="the_article">([\s\S]*?)(?=<\/body>)/);
console.log(body[1]); //body content, not including tag 
```

另请注意，我们将结束正文标记指定为前瞻，因为我们根本不需要匹配它，只需锚定它即可。（JS不支持look-behinds，缺少[像我写](http://mitya.co.uk/blog/2011/Feb/Simulating-REGEX-look-behinds-JavaScript-153)的那样的模拟，所以我们别无选择，只能捕获*开始*的body标签）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:10:16.080

您可以让 dom 为您完成工作。使用 document.write 在 iframe 中注入代码，然后访问 frame.document.body.innerHTML 属性。

# c - C中的多线程无法正常工作

> ID：11353010
> 
> 赞同：0
> 
> 时间：2012-07-05T21:45:33.063
> 
> 标签：c, linux, multithreading, synchronization, pthreads

所以我设法让我的程序运行，但由于某种原因，除非他/她之前的顾客先离开酒吧，否则没有顾客走进酒吧，我该如何解决？我尝试了一个 mutex_lock 但我可能实施错了，这是我到目前为止的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <semaphore.h>

sem_t sem;
pthread_mutex_t serve = PTHREAD_MUTEX_INITIALIZER;

void Bartender(int);
void EnterBar(int);
void OrderStart(int);
void ServeStart(int);
void ServeDone(int);
void OrderDone(int);
void DrinkBeer(int);
void LeaveBar(int);
void* Customer(void*);

void Bartender(int cid)
{
    ServeStart(cid);
    ServeDone(cid);
}

void* Customer(void* id)
{
    int cid =(int)id;
    EnterBar(cid);
    LeaveBar(cid);
    return NULL;

}

void EnterBar(int cid){
    sem_wait(&sem); //decrease semaphore
    printf("Customer %d enters the bar.\n", cid);
    int cups;

    for(cups=0;cups<(cid%3+1);cups++){
        pthread_mutex_lock(&serve);     
        OrderStart(cid);
        OrderDone(cid);
        DrinkBeer(cid);     
        pthread_mutex_unlock(&serve);
    }
}
void OrderStart(int cid)
{
    printf("Customer %d asks for beer.\n", cid);
    Bartender(cid);
}

void OrderDone(int cid)
{
    printf("Customer %d gets the beer.\n", cid);
}

void DrinkBeer(int cid)
{
    printf("Customer %d drinks the beer.\n", cid);
}

void LeaveBar(int cid)
{
    printf("Customer %d leaves the bar.\n", cid);
    sem_post( &sem ); //increase semaphore
}

void ServeStart(int cid)
{
    printf("Bartender starts to serve customer %d.\n", cid);
}

void ServeDone(int cid)
{
    printf("Bartender is done serving customer %d.\n", cid);
}

int main (int argc, char *argv[])
{
    int t;
    long rc;    
    int num_customers = atoi(argv[1]); //number of customers
    int capacity = atoi(argv[2]); //bar capacity

    if(num_customers > 0 && capacity > 0){
        rc = sem_init( &sem, 0, capacity );
        if (rc)
        {
            printf("ERROR; return code from sem_init() is %ld\n",rc);
            exit(-1);
        }
        //pthread_t threads[num_customers];
        pthread_t *threads = (pthread_t*)malloc(num_customers*sizeof(pthread_t));
        if(random() > RAND_MAX / 2)
            usleep(1);
        //rc = sem_init(&sem1,0,capacity);
        //rc = pthread_barrier_init(&barrier1, NULL, num_customers);
        for(t=0; t<num_customers;t++){
                printf("In main: creating thread %d\n", t);
            //printf("CAPACITY: %d\n", capacity);
                rc = pthread_create(&threads[t], NULL, Customer, (void* )t);
                if (rc){
                    printf("ERROR; return code from pthread_create() is %ld\n", rc);
                    exit(-1);
                }
        }
        for( t=0;t<num_customers;t++)
            pthread_join(threads[t],NULL);

        sem_destroy(&sem); //destroy semaphore
    }
    else{
            printf("ERROR: Both parameters should be a valid positive numbers.");
            exit(-1);
    }

    /* Last thing that main() should do */
    pthread_exit(NULL);
} 
```

它应该允许酒吧里的多个顾客，并在喝完啤酒后离开，而不是在顾客离开之前离开。调酒师需要一根线吗？有什么建议么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:26:57.583

```
#include <unistd.h> 
```

并修改此功能

```
void DrinkBeer(int cid)
{
    printf("Customer %d drinks the beer for 10 seconds.\n", cid);
    sleep(10);
}
void LeaveBar(int cid)
{
    printf("Customer %d leaves the bar (takes 10 sec).\n", cid);
    sem_post( &sem ); //increase semaphore
   sleep(10);
} 
```

看看它现在的行为。您需要一些睡眠功能，以便线程可以睡眠并更好地观察其他线程的工作方式。它是否可以通过这些修改发挥应有的作用？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:00:11.733

我认为这是一个正确的行为，对吧？客户 2 是酒吧的第一个，但在客户 1 之后离开。

```
[amb@localhost ~]$ ./a.out 3 2
In main: creating thread 0
In main: creating thread 1
In main: creating thread 2
Customer 2 enters the bar.
Customer 2 asks for beer.
Bartender starts to serve customer 2.
Bartender is done serving customer 2.
Customer 2 gets the beer.
Customer 2 drinks the beer for 7 seconds.
Customer 1 enters the bar.
Customer 1 asks for beer.
Bartender starts to serve customer 1.
Bartender is done serving customer 1.
Customer 1 gets the beer.
Customer 1 drinks the beer for 8 seconds.
Customer 2 asks for beer.
Bartender starts to serve customer 2.
Bartender is done serving customer 2.
Customer 2 gets the beer.
Customer 2 drinks the beer for 6 seconds.
Customer 1 asks for beer.
Bartender starts to serve customer 1.
Bartender is done serving customer 1.
Customer 1 gets the beer.
Customer 1 drinks the beer for 4 seconds.
Customer 1 leaves the bar.
Customer 0 enters the bar.
Customer 0 asks for beer.
Bartender starts to serve customer 0.
Bartender is done serving customer 0.
Customer 0 gets the beer.
Customer 0 drinks the beer for 6 seconds.
Customer 2 asks for beer.
Bartender starts to serve customer 2.
Bartender is done serving customer 2.
Customer 2 gets the beer.
Customer 2 drinks the beer for 7 seconds.
Customer 0 leaves the bar.
Customer 2 leaves the bar. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T23:59:00.217

你*没有*你认为你有的问题。我做了以下更改。

(1) //添加全局变量

```
int count = 0;
pthread_mutex_t mutCount = PTHREAD_MUTEX_INITIALIZER; 
```

(2) 添加到吧台人数并打印出来

```
void EnterBar(int cid)
{
    sem_wait(&sem); //decrease semaphore

    printf("Customer %d enters the bar.\n", cid);    

    pthread_mutex_lock(&mutCount);
    count++;
    printf("There are %i customers in the bar\n", count);
    pthread_mutex_unlock(&mutCount);

    int cups;

    for (cups = 0;cups < (cid % 3 + 1);cups++)
    {
        pthread_mutex_lock(&serve);
        OrderStart(cid);
        OrderDone(cid);
        DrinkBeer(cid);
        pthread_mutex_unlock(&serve);
    }
} 
```

(3) 当他们离开时减少酒吧里的顾客数量

```
void LeaveBar(int cid)
{
    printf("Customer %d leaves the bar.\n", cid);

    pthread_mutex_lock(&mutCount);
    count--;
    pthread_mutex_unlock(&mutCount);

    sem_post( &sem ); //increase semaphore
} 
```

(4) 主要改变睡到有价值的事情上

```
 if (random() > RAND_MAX / 2)
        usleep(100); 
```

(5) 我跑了：barthread 20 15 | grep “有”

(6) 我得到以下输出：

```
There are 1 customers in the bar
There are 2 customers in the bar
There are 1 customers in the bar
There are 3 customers in the bar
There are 4 customers in the bar
There are 5 customers in the bar
There are 6 customers in the bar
There are 7 customers in the bar
There are 6 customers in the bar
There are 6 customers in the bar
There are 5 customers in the bar
There are 5 customers in the bar
There are 5 customers in the bar
There are 6 customers in the bar
There are 4 customers in the bar
There are 4 customers in the bar
There are 5 customers in the bar
There are 6 customers in the bar
There are 7 customers in the bar
There are 8 customers in the bar 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-06T04:43:16.197

所有这些互斥锁是怎么回事？几个信号量有什么问题，一个“barAccess”，初始化为条形容量，一个“barStaff”，初始化。调酒师的数量？

```
#define slaughtered (beerCount==10)

{
  beerCount=0;
  wait(barAccess);
  do{
    wait(barStaff);
    sleep(pouringTime);
    signal(barstaff);
    sleep(drinkingTime);
    beerCount++;
  }while(!slaughtered);
  signal(barAccess);
}; 
```

如果这个酒吧有常客，你可以添加另一个 while(true) 循环，用 'sleep(soberUp);' 环绕它。在酒窖中的每个会话之后。

在营业时间内改变酒吧员工的数量也很容易。只需添加更多“barStaff”单位或偷走一些。

如果它真的很忙，您可能还想打开酒廊酒吧以增加容量 - 只是所有更多的 barAccess 单元在一个循环中。

关门时间应该很有趣。你需要说服顾客离开，不要再让他们进来。如果顾客没有在合理的时间内得到服务，也许他们应该离开。然后，您可以吸走所有的酒吧工作人员，这样顾客就无法得到服务，并聚集在所有的 barAccess 单元中，这样新顾客就无法进入。最终，今天的酒吧将是空的。当您第二天开门时，先挤进酒吧工作人员，然后挤进酒吧访问单位，然后看着急于上菜！

# jquery - 使用 jquery validate 提交，即使 valid() 返回 false

> ID：11353016
> 
> 赞同：0
> 
> 时间：2012-07-05T21:46:00.340
> 
> 标签：jquery, jquery-validate

提交处理程序出现问题并实际提交。所需的功能如下：

单击提交按钮，如果有错误，给他们一个对话框和继续的选项（是）。如果是，请在设置特定值后运行 submit()。对话框目前没有弹出，以前我在没有提交处理程序的情况下弹出它，但是 submit() 不会执行它的操作，实际上什么都不做。

谢谢您的帮助。

```
function nextDialog(form) { 
    var isValid = $('#form').valid(); 
    if (!isValid)
    {
        $('#dialog').dialog({
            resizable : false,
            width : 350,
            height : 200,
            modal : true,
            buttons : {
                "Yes" : function() {
                    $('input#foo').val('true');
                    $(this).dialog("close");
                    $('#form').submit();
                },
                "No": function() {
                    $( this ).dialog( "close" );
                    $('#form').submit();
                }
            }
        });
        return false;
    }
}
$(document).ready(function() { 
    $('.form-submit-next').click(function() {
        $('#form').validate({ 
            debug: false, 
            errorPlacement: function(error, element) {},  
            submitHandler : nextDialog
       });
    })
}); 
```

# delphi - 如何在控制面板区域和语言高级设置中读取和更改系统测量单位

> ID：11353017
> 
> 赞同：3
> 
> 时间：2012-07-05T21:46:04.963
> 
> 标签：delphi

我正在使用Delphi XE，我写了一个应用程序，它与我在日本的客户编写的另一个应用程序一起运行，问题是日本软件（测量机）不是最好的用户界面设计，机器区域高级测量设置有在启动应用程序以选择公制或英制测量单位之前进行更改。

我想知道我是否可以通过为他们翻转这个系统设置并从我的应用程序启动日语应用程序来帮助用户，我启动日语应用程序没有问题，只是如何读取和更改测量设置。

我用过

```
`  shortdateformat     := 'dd/mm/yy';

`  longdateformat      := 'dd/mm/yyyy';

`  dateseparator       := '/';`
Application.UpdateFormatSettings := False; 
```

Application.UpdateMetricSettings := false;

当我的应用程序启动时，在我的应用程序中多次使用本地系统快照，但现在我需要更改实际的实时系统值。我一直在查看 delphi 帮助和 Microsoft MSDN 库文档，但找不到与测量单位相关的任何内容以及如何访问它们。

我如何在 Delphi XE 中做到这一点。?

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:12:32.143

您可以使用[`GetLocaleInfo`](http://msdn.microsoft.com/en-us/library/dd318101%28v=vs.85%29.aspx),[`SetLocaleInfo`](http://msdn.microsoft.com/en-us/library/dd374049%28v=vs.85%29.aspx)来获取/设置测量系统或其他与语言环境相关的设置。更改为公制的示例：

```
procedure TForm1.SpeedButton1Click(Sender: TObject);
var
  LocaleID: LCID;
begin
  LocaleID := GetUserDefaultLCID;
  SetLocaleInfo(LocaleID, LOCALE_IMEASURE, '0'); // '1' for US system
  SendMessage(HWND_BROADCAST, WM_SETTINGCHANGE, 0, 0);
end; 
```

有关特定设置的更多信息，请参阅“[区域设置信息常量](http://msdn.microsoft.com/en-us/library/dd464799%28v=vs.85%29.aspx)”。

# c++ - C++ FIFO 奇怪的行为

> ID：11353026
> 
> 赞同：0
> 
> 时间：2012-07-05T21:46:27.783
> 
> 标签：c++, linux, fifo

我正在为 IPC 使用 FIFO。然而，他们执行一些奇怪的行为。至于演示，我在这里发布了一些可以编译和运行的代码。附加信息，我在 Linux Ubuntu 上，带有基本的 g++ 编译器，没什么特别的。

```
#include <iostream>
#include <sys/stat.h>
#include <stdio.h>
#include <fcntl.h>
#include <iostream>
using namespace std;

int main() {

    cout << "START" << endl;

    int fifo;
    int code;
    mkfifo("/tmp/FIFO", 666);
    if ((fifo = open("/tmp/FIFO", O_RDONLY | O_NONBLOCK)) < 0) {
        perror("open failed");
    }
    else {
        cout << "open successed" << endl;
        code = close(fifo);
        cout << "close: " << code << endl;
        if ((fifo = open("/tmp/FIFO", O_WRONLY | O_NONBLOCK)) < 0) {
            perror("reopen failed");
        }
        else {
            cout << "reopen successed" << endl;
            code = close(fifo);
            cout << "close: " << code << endl;
        }
    }

    cout << "END" << endl;
    return 0;
} 
```

我对输出的期望是这样的，因为我成功关闭了它：

```
START
open successed
close: 0
reopen successed
close: 0
END 
```

但是，我得到了这个，第二次打开失败。为什么？为什么会有这个愚蠢的错误信息？

```
START
open successed
close: 0
reopen failed: No such device or address
END 
```

我真的很想重新打开 FIFO 进行写入。而且我想知道上面的代码不起作用的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:56:59.750

从重新打开中删除 O_NONBLOCK 标志，或者如果要保留该标志，请连接到已打开以供读取的 fifo。 **这是正确的行为。**

[http://linux.die.net/man/7/fifo](http://linux.die.net/man/7/fifo)

> 进程可以在非阻塞模式下打开 FIFO。在这种情况下，即使没有人在写入端打开，只读打开也会>成功，除非另一端已经打开，否则只打开写入将失败>使用 ENXIO（没有这样的设备或地址）。

# visual-studio-2010 - 构建后事件 VS 2010“失败”，但实际上没有

> ID：11353029
> 
> 赞同：8
> 
> 时间：2012-07-05T21:46:39.917
> 
> 标签：visual-studio-2010, post-build-event

我在 VS 2010 中发生了一个相对简单的构建后事件，只有两个复制操作。

复制操作的输出显示它们已成功，并且我检查了目录并且文件复制工作正常。

VS 告诉我构建失败但没有告诉我为什么......这是确切的输出：

```
1>PostBuildEvent:
1>  Description: Copying Library to Animation-Calibrator
1>          1 file(s) copied.
1>  
1>  -------------------------------------------------------------------------------
1>     ROBOCOPY     ::     Robust File Copy for Windows                              
1>  -------------------------------------------------------------------------------
1>  
1>    Started : Thu Jul 05 14:26:34 2012
1>  
1>     Source : C:\Users\Tag\Google Drive\Projects\TGAEngine\VS2010\obj\
1>       Dest : C:\Users\Tag\Google Drive\Projects\Animation-Calibrator\lib\TGAEngine\obj\
1>  
1>      Files : *.*
1>          
1>    Options : *.* /S /COPY:DAT /R:1000000 /W:30 
1>  
1>  ------------------------------------------------------------------------------
... List of files copied, no errors
1>  
1>  ------------------------------------------------------------------------------
1>  
1>                 Total    Copied   Skipped  Mismatch    FAILED    Extras
1>      Dirs :         2         0         2         0         0         0
1>     Files :        29        29         0         0         0         1
1>     Bytes :    1.92 m    1.92 m         0         0         0       697
1>     Times :   0:00:00   0:00:00                       0:00:00   0:00:00
1>  
1>  
1>     Speed :           100824150 Bytes/sec.
1>     Speed :            5769.204 MegaBytes/min.
1>  
1>     Ended : Thu Jul 05 14:26:34 2012
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: The command "copy /y .\TGAEngine.lib .\..\..\Animation-Calibrator\lib\TGAEngine
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: robocopy /s ".\obj" ".\..\..\Animation-Calibrator\lib\TGAEngine\obj"
1>C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\Microsoft.CppCommon.targets(113,5): error MSB3073: :VCEnd" exited with code 3.
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:00.11
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

我已将其范围缩小到 robocopy 命令。
如果我做`robocopy /s source dest`VS失败。
如果我不使用参数 '/s' 它不会失败，但文件不会被复制。

有什么想法吗？

我只是不发布脚本，因为我手动运行它并且没有任何类型的错误。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T21:51:44.490

通常，如果进程成功则返回[退出状态](http://en.wikipedia.org/wiki/Exit_status)0，如果失败则返回非零。 `robocopy`似乎有一个非标准的[退出代码定义](http://ss64.com/nt/robocopy-exit.html)：1 也意味着成功；0 意味着没有文件被复制。你现在明白为什么如果你省略 VS 不会抱怨`/s`吗？

您的进程似乎以状态 3 退出。`robocopy`如果这符合您的要求，请查看 's 文档。据我了解，任何 2 或更大的值都意味着麻烦。

如果它指示错误情况，您应该自己检查退出代码，如果一切正常，则以 0 退出（下面的代码未经测试）：

```
if ERRORLEVEL 2 goto HandleError
exit 0
:HandleError
exit %ERRORLEVEL% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-30T03:29:18.027

我在[这里找到了这个](http://tutel.me/c/programming/questions/39795328/msbuild+fails+with+successful+robocopy+exit+code)

```
(robocopy /s source dest) ^& IF %ERRORLEVEL% LEQ 3 exit 0 
```

It's a shorter version of krlmlr's answer that can be run in a single command line. I deem error level 3 or below as successful as it is the exit code when it copies files (exit code 1) and there are extra files in the destination (exit code 2).

# ios - 在 NSObject 中调用方法

> ID：11353036
> 
> 赞同：1
> 
> 时间：2012-07-05T21:46:59.223
> 
> 标签：ios, xcode

我是 iPhone 应用程序开发的初学者。我正在开发一个应用程序，该应用程序使用从 RedPark 获得的扩展坞到 RS232 电缆与外部硬件进行通信。我自己编写的代码最多，但我仍然对几件事感到困惑。

我想在我的应用程序中有几个视图，每个视图都有一个按钮，当按下按钮时，它会向硬件发送不同的命令。所以我创建了一个 NSObject 来处理发送部分。我的问题是如何正确调用该 NSObject 的发送方法。通讯.h

```
@interface Communication : NSObject<RscMgrDelegate>
{
    RscMgr * rscMgr;
}
@property (nonatomic,retain)RscMgr *rscMgr;
- (void)sendRequest;
@end 
```

通讯.m

```
@synthesize rscMgr=_rscMgr;
- (void)sendRequest{
if (!_rscMgr) {
    rscMgr = [[RscMgr alloc]init];
    [rscMgr setDelegate:self];
}

UInt8 sendData[4]={0x8E,0x8E,0x05,0x80};
[rscMgr write:sendData Length:4];
NSLog(@"sending request"); 
```

}

顺便说一句，RscMgr 是 RedPark 提供的使用他们的库的 NSObject。单测.m

```
- (Communication *)communication{
if(!_communication){
    _communication=[[Communication alloc]init];
}
return _communication;
}
- (IBAction)sendData:(id)sender{
[self.communication sendRequest];
NSLog(@"Send Data");
} 
```

现在发生的是我第一次按下按钮时，它确实发送了一个命令，但之后没有。我想我只是犯了一个愚蠢的错误，因为我还在学习它。请告诉我。
谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:52:17.270

我会把 Communication 变成一个单例类，负责实例化和保存指向 RscMgr 的指针，然后你可以做这样的事情

```
Communication* comm = [Communication sharedInstance];
[comm sendRequest]; 
```

然后，您`sendRequest`将负责调用所需的任何方法`RscMgr`。请注意，`sharedInstance`您必须编写，如果您需要一个如何在 Objective C 中编写单例类的示例，请告诉我。

# filesystems - 文件系统信息 - 在这台计算机上创建的日期

> ID：11353041
> 
> 赞同：0
> 
> 时间：2012-07-05T21:47:19.990
> 
> 标签：filesystems, operating-system

不知道这属于哪个论坛。

一段时间以来，我发现除了创建和修改日期之外，没有常见的文件系统或操作系统会在文件和文件夹上存储第三个时间戳，这会阻碍并且经常令人讨厌。这是在当前计算机上通过任何方式创建/复制/存在该文件的时间戳。这似乎是少量的额外数据，可以在文件完成创建后设置为只读。

这将使卸载程序更容易，处理病毒，当您忘记保存文件时查找丢失的文件，我相信会有更多用途。

有没有尝试过？是否有理由不在未来的操作系统或文件系统中实现这一点？（无需讨论移动操作系统如何越来越多地向用户隐藏文件）

这是否已经存在，我只是不知道如何查看 Unix 系统等文件的详细信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T17:05:15.723

除了修改系统时间或以其他方式更改内核之外，您已经有一种方法可以在 POSIX: 下以任何方式更改文件时获得有保证的上限`st_ctime`，即 inode 更改时间。通过`utime()`系统调用，用户进程可以设置他们想要的任何值`st_mtime`（修改时间）和`st_atime`（访问时间），但`st_ctime`总是获取当前时间。不可能“回溯”文件的最后更改时间。

# android - 当您有多个一次性警报时使用 AlarmManager.cancel()

> ID：11353045
> 
> 赞同：0
> 
> 时间：2012-07-05T21:47:56.117
> 
> 标签：android, alarmmanager, android-alarms

因此，假设我有一个应用程序，它使用相同的方法来安排多个一次性警报，并在每个预定时间发出通知。我相当确定我为处理这个工作而创建的方法（虽然我还没有测试过），[并将它与我发现的其他示例进行比较](https://stackoverflow.com/questions/1082437/android-alarmmanager)。无论如何，困扰我的一件事是[文档中的内容](http://developer.android.com/reference/android/app/AlarmManager.html#cancel%28android.app.PendingIntent%29)。

> public void cancel（PendingIntent 操作）自：API 级别 1
> 
> 删除任何具有匹配 Intent 的警报。任何类型的任何警报，其 Intent 与此匹配（由 filterEquals(Intent) 定义）都将被取消。

由于此应用程序设计为具有多个一次性警报，我想知道我是否假设因为这些都来自由相同方法创建的相同基本意图，所以取消一个警报会取消所有警报。如果是这样，我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:45:35.867

您可以通过创建具有唯一 ID 的警报来区分警报，例如：

```
Intent intent = new Intent(this, AlarmReceiverActivity.class);
PendingIntent pi = PendingIntent.getActivity(this,UNIQUE_ID_GOES_HERE, intent, 0);
AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
am.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),pi); 
```

现在，当您想取消此警报时，您必须创建具有相同唯一 ID 的相同 PendingIntent。例如，以下只会取消您使用 PendingIntent id 1234 创建的警报。

```
Intent intent = new Intent(this, AlarmReceiverActivity.class);
PendingIntent pi = PendingIntent.getBroadcast(this, 1234, intent, 0);
AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);

am.cancel(pi); 
```

这个想法很简单。跟踪 id，然后使用它们取消各自的警报。如果您创建多个具有相同 id 的警报，则最近的警报将取消上一个警报。

最后，您可以拥有多个具有唯一 PendingIntent 的警报，但不能具有相同的 PendingIntent。

# php - 在 php 中的 HTML 解析中使用正则表达式

> ID：11353048
> 
> 赞同：0
> 
> 时间：2012-07-05T21:48:08.117
> 
> 标签：php, html, html-parsing

那么这是html代码：

```
<?

    $html ='<table cellspacing="0" cellpadding="0" class="mytable">
                                         <tr>
                                            <th class="first-td">Home <span>Live</span></th>
                                            <th>type</th>
                                            <th>Status</th>

                                          </tr>
                                                                              <tr>
                                            <td width="40%" class="first-td">text1</td>
                                            <td>info</td>
                                            <td class="status"><span class="identify">asdf2</span></td>

                                          </tr>
                                                                                <tr>
                                            <td width="40%" class="first-td">text2</td>
                                            <td>info</td>
                                            <td class="status"><span class="identify2">asdf</span></td>
    ';

    $pattern = '/<span class="identify">(.*?)<\/span>/im';
    preg_match_all($pattern, $html, $matches);
    print_r($matches);

    ?> 
```

但我想要的是取回单词 text，这是标识类的单元格中的 td。或者，如果类是识别打印 1 或者如果是识别 2 按 0，则可能更容易。

所以我想要这样的伪代码：

```
If class-identify print the td-class=first-td of that cell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:00:57.557

我可以推荐你像在这个[例子](http://cz2.php.net/manual/en/class.domxpath.php#87645)中那样使用 xpath 。

# jquery - 重置表单输入的默认行为

> ID：11353049
> 
> 赞同：0
> 
> 时间：2012-07-05T21:48:32.840
> 
> 标签：jquery, html, css

我有以下代码：

```
div.accountPage
  div.acct-form.login
    div.acct-header Log-in
    form.loginForm.login
      input(id="username", type="text", name="User", placeholder="Username", value="")
      input(id="password", type="password", name="Password", placeholder="Password", value="")
      input(id="submit", type="submit", value="Sign In") 
```

在测试期间，我输入了一些用户名和密码并点击登录。之后，文本框包含我的用户名和密码。我不知道使用哪个属性来重置它

如何重置文本以转到显示占位符的默认行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:50:18.010

也许您可以将值更改回空字符串。

```
value="" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:02:12.747

你可以用 jQuery 做到这一点：

**jQuery**

```
$(".loginForm").submit(function () {
 $(".username").val("");
 $(".password").val("");
 return false;
}); 
```

当然，您还应该添加指向 jquery 库的链接，您可以从以下位置下载它：

[http://docs.jquery.com/Downloading_jQuery](http://docs.jquery.com/Downloading_jQuery)

在您的问题中，重新加载页面可能更好地将输入值设置为空？为此，您可以使用：

```
$(document).ready(function () {
 $(".username").val("");
 $(".password").val("");
}); 
```

# html - 文本需要跨越 2 行，不能使用列表、div 或表格来实现

> ID：11353054
> 
> 赞同：0
> 
> 时间：2012-07-05T21:48:45.783
> 
> 标签：html, css

我正在尝试这样做：

![图片](../Images/9bf672f928ab610438bbaae1b925fcca.png)

看起来很简单，但无论我尝试什么，我似乎都无法让它工作。这是我对 div 所做的努力：http: [//jsfiddle.net/RPEpQ/](http://jsfiddle.net/RPEpQ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:52:37.687

只需添加一个`float:left`到`div.one`.

给你，[http://jsfiddle.net/RPEpQ/1/](http://jsfiddle.net/RPEpQ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:52:25.520

在包含数字 34 的元素上设置`float: left`。请参阅修改后的[js fiddle](http://jsfiddle.net/Meucz/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T21:55:53.220

你需要`float: left`你的`.one`元素，并且适合元素的行高是`line-height`元素的一半。`.two``.one`

[更新了小提琴](http://jsfiddle.net/RPEpQ/4/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T21:57:09.430

```
.outer {
  width: 160px;
}

.one {
  float:left;
  font-size: 40px;
  line-height:40px;
  font-weight: bold;
}

.two {
  width:120px;
  font-size: 14px;
  line-height:20px;
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T21:59:19.333

[http://jsfiddle.net/RPEpQ/6/](http://jsfiddle.net/RPEpQ/6/) 这对我有用。

```
<div class = "outer">
  <div class = "one">34</div>
  <div class = "two">times I have eaten here</div>
</div>​

.outer {
    width: 100px;
    display:inline;
}
.one {
    font-size: 40px;
    font-weight: bold;
    float:left;
}
.two {
    font-size: 14px;
    width: 5em;
    height: 3.4em;
    line-height: 1.7em;
    float:left;
    padding-left:0.5em;
}​ 
```

# c++ - MSVC 的多线程 malloc

> ID：11353056
> 
> 赞同：0
> 
> 时间：2012-07-05T21:48:55.140
> 
> 标签：c++, multithreading

> 单线程和多线程环境中的内存分配性能是任何应用程序的一个重要方面。某些分配器，例如 Solaris 操作系统中的 malloc，最适合单线程应用程序。但是，在设计针对多线程应用程序优化的分配器时，必须采用不同的方法。

这个[http://developers.sun.com/solaris/articles/multiproc/multiproc.html](http://developers.sun.com/solaris/articles/multiproc/multiproc.html)概述显示了相对于 malloc 的一些可观的性能提升。

MSVC 的 mtmalloc 等价物是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:56:12.593

我不知道 Windows 有任何用于多线程场景的默认内存分配器，但您可以在英特尔 TBB 中找到一套针对多线程优化的内存分配器：http: [//threadingbuildingblocks.org/files/documentation/a00235.html](http://threadingbuildingblocks.org/files/documentation/a00235.html)

# c++ - 使用带有 C 结构的 C++ 模板进行自省？

> ID：11353062
> 
> 赞同：2
> 
> 时间：2012-07-05T21:49:41.907
> 
> 标签：c++, c, templates, struct

我正在为一家用 C 编写其他所有东西的公司用 C++ 做一些工作（使用 C 对我来说不是一个选择:(）。它们有许多非常相似的数据结构（即，它们都有字段例如“姓名”、“地址”等。但是，无论出于何种原因，都没有一个通用的结构可以用来作为其他所有内容的基础（这使得做任何事情都很糟糕）。任何人，我都需要做一个系统范围的分析内存中的这些结构，并将其全部放入一个表中。还不错，但表必须包含所有变量的所有字段的条目，即使它们没有字段（结构 b 可能有字段“延迟”，但结构 a 没有 - 在表中，每个实例的条目 a 必须有一个“延迟”的空条目。

所以，我的问题是，有没有办法在运行时确定已传递给模板函数的结构是否具有特定字段？还是我必须编写一些为我做的黑魔法宏？（问题基本上是我不能使用模板专业化）

谢谢！如果您有任何问题，请随时提问！

这是我在想什么的片段......

```
struct A
{
  char name[256];
  int index;
  float percision;
};

struct B
{
  int index;
  char name[256];
  int latency;
};

/* More annoying similar structs... note that all of the above are defined in files that were compiled as C - not C++ */

struct Entry
{
  char name[256];
  int index;
  float percision;
  int latency;
  /* more fields that are specific to only 1 or more structure */
};

template<typename T> struct Entry gatherFrom( T *ptr )
{
  Entry entry;

  strcpy( entry.name, ptr->name, strlen( ptr->name ) );
  entry.index = ptr->index;
  /* Something like this perhaps? */
  entry.percision = type_contains_field( "percision" ) ? ptr->percision : -1;
}

int main()
{
  struct A a;
  struct B b;

  /* initialization.. */

  Entry e  = gatherFrom( a );
  Entry e2 = gatherFrom ( b );

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-17T02:00:35.843

您可以在编译时执行此操作，而无需触及原始结构的源代码：

```
#include <iostream>
#include <limits>
#include <memory.h>

struct A
{
    char name[256];
    int index;
    float percision;
};

struct B
{
    int index;
    char name[256];
    int latency;
};

struct Entry
{
    char name[256];
    int index;
    float percision;
    int latency;
    /* more fields that are specific to only 1 or more structure */
};

inline
std::ostream & operator<<(std::ostream & os, Entry const & e) {
    return os << e.name << "{" << e.index << ", " << e.percision << ", " << e.latency << "}";
}

template <typename T>
inline
void assign(T & dst, T const & src) {
    dst = src;
}

template <size_t N>
inline
void assign(char (&dst)[N], char const (&src)[N]) {
    memcpy(dst, src, N);
}

#define DEFINE_ENTRY_FIELD_COPIER(field)                            \
    template <typename T>                                           \
    inline                                                          \
    decltype(T::field, true) copy_##field(T const * t, Entry & e) { \
        assign(e.field, t->field);                                  \
        return true;                                                \
    }                                                               \
                                                                    \
    inline                                                          \
    bool copy_##field(void const *, Entry &) {                      \
            return false;                                           \
    }

DEFINE_ENTRY_FIELD_COPIER(name)
DEFINE_ENTRY_FIELD_COPIER(index)
DEFINE_ENTRY_FIELD_COPIER(percision)
DEFINE_ENTRY_FIELD_COPIER(latency)

template <typename T>
Entry gatherFrom(T const & t) {
    Entry e = {"", -1, std::numeric_limits<float>::quiet_NaN(), -1};
    copy_name(&t, e);
    copy_index(&t, e);
    copy_percision(&t, e);
    copy_latency(&t, e);
    return e;
}

int main() {
    A a = {"Foo", 12, 1.2};
    B b = {23, "Bar", 34};

    std::cout << "a = " << gatherFrom(a) << "\n";
    std::cout << "b = " << gatherFrom(b) << "\n";
} 
```

该`DEFINE_ENTRY_FIELD_COPIER()`宏为您要提取的每个字段定义了一对重载函数。一个重载 ( `copy_##field(T const * t, …)`, 变成`copy_name(T const * t, …)`,`copy_index(T const * t, …)`等) 将其返回类型定义为,如果有一个名为,的数据成员`decltype(T::field, true)`, 则解析为 type 。如果没有这样的字段, 替换失败, 但不会导致编译-time 错误，第一个重载被简单地视为它不存在（这称为[SFINAE](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)），因此调用解析为第二个重载 ，它的第一个参数完全接受任何类型并且什么都不做。`bool``T``name``index``T``copy_##field(void const * t, …)`

笔记：

1.  因为此代码在编译时解决了重载，`gatherFrom()`所以是最佳的，`gatherFrom<A>()`例如，生成的二进制代码看起来就像您手动调整它一样`A`：

    ```
    Entry handCraftedGatherFromA(A const & a) {
        Entry e;
        e.latency = -1;
        memcpy(_result.name, a.name, sizeof(a.name));
        e.index = a.index;
        e.percision = a.percision;
        return e;
    } 
    ```

    在 g++ 4.8 下，使用`-O3`,`gatherFrom<A>()`并`handCraftedGatherFromA()`生成相同的代码：

    ```
    pushq   %rbx
    movl    $256, %edx
    movq    %rsi, %rbx
    movl    $-1, 264(%rdi)
    call    _memcpy
    movss   260(%rbx), %xmm0
    movq    %rax, %rcx
    movl    256(%rbx), %eax
    movss   %xmm0, 260(%rcx)
    movl    %eax, 256(%rcx)
    movq    %rcx, %rax
    popq    %rbx
    ret 
    ```

    不幸的是， Clang 4.2 的`gatherFrom<A>()`表现不佳；它冗余地对整个条目进行零初始化。所以我猜这不全是玫瑰。

    通过使用[NRVO](http://en.wikipedia.org/wiki/Return_value_optimization)`e` ，两个版本在返回时都避免了复制。`movq %rcx, %rax`但是，我应该注意，两个版本都将通过使用输出参数而不是返回值来保存一个操作码 ( )。

2.  这些`copy_…()`函数返回一个`bool`结果，指示复制是否发生。这目前没有使用，但它可以用于，例如，定义`int Entry::validFields`为指示填充了哪些字段的位掩码。

3.  不需要宏；它只是为了[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。基本成分是使用 SFINAE。

4.  `assign()`也不需要重载。他们只是避免使用不同的几乎相同的宏来处理 char 数组。

5.  上面的代码依赖于 C++11 的 decltype 关键字。如果您使用的是较旧的编译器，它会更混乱，但仍然可能。我设法想出的最干净的解决方案如下。它符合 C++98 标准并且仍然基于 SFINAE 原则：

    ```
    template <typename C, typename F, F (C::*), typename T>
    struct EnableCopy {
        typedef T type;
    };

    #define DEFINE_ENTRY_FIELD_COPIER(field, ftype)             \
        template <typename T>                                   \
        inline                                                  \
        typename EnableCopy<T, ftype, &T::field, bool>::type    \
        copy_##field(T const * t, Entry & e) {                  \
            copy_value(e.field, t->field);                      \
            return true;                                        \
        }                                                       \
                                                                \
        inline                                                  \
        bool copy_##field(void const *, Entry &) {              \
            return false;                                       \
        }

    DEFINE_ENTRY_FIELD_COPIER(name     , char[256]);
    DEFINE_ENTRY_FIELD_COPIER(index    , int);
    DEFINE_ENTRY_FIELD_COPIER(percision, float);
    DEFINE_ENTRY_FIELD_COPIER(latency  , int); 
    ```

    您还必须放弃 C++11 的可移植性`std::numeric_limits<float>::quiet_NaN()`并使用一些技巧（`0.0f/0.0f`似乎有效）或选择另一个神奇的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:23:18.160

> 用 C 编写的所有其他内容（使用 C 对我来说不是一个选项：（）。

首先，我想引用 Linus Torvalds 对这个问题的看法：

* * *

```
From: Linus Torvalds <torvalds <at> linux-foundation.org>
Subject: Re: [RFC] Convert builin-mailinfo.c to use The Better String Library.
Newsgroups: gmane.comp.version-control.git
Date: 2007-09-06 17:50:28 GMT (2 years, 14 weeks, 16 hours and 36 minutes ago)

C++ is a horrible language. It's made more horrible by the fact that a lot 
of substandard programmers use it, to the point where it's much much 
easier to generate total and utter crap with it. Quite frankly, even if 
the choice of C were to do *nothing* but keep the C++ programmers out, 
that in itself would be a huge reason to use C. 
```

[http://harmful.cat-v.org/software/c++/linus](http://harmful.cat-v.org/software/c++/linus)

* * *

> 它们有许多非常相似的数据结构（即，它们都具有诸如“名称”、“地址”等字段。但是，无论出于何种原因，它们都没有一个通用的结构来作为其他一切的基础的（使做任何事情都变得地狱）。

他们可能有非常充分的理由。将公共字段放入单个基础结构（类）中听起来是个好主意。但是，如果您想对其中一个结构进行重大更改（替换某些字段、更改类型等），同时保持其余部分不变，这会使事情变得非常困难。OOP 肯定不是一种真正的做事方式。

> 所以，我的问题是，有没有办法在运行时确定已传递给模板函数的结构是否具有特定字段？

不，这是不可能的。在 C 和 C++ 中都没有，因为在创建二进制文件时，所有关于类型的信息都会被丢弃。C 或 C++ 中既没有反射也没有内省。好吧，从技术上讲，编译器发出的调试信息*确实*提供了此信息，但没有语言内置功能可以访问此信息。此外，这种调试信息依赖于在编译时执行的分析，而不是在运行时。C++ 有 RTTI，但这只是一个非常粗略的系统，用于识别实例关闭的类。它对类或结构成员没有帮助。

但是你为什么要在运行时这样做呢？

> Anywho，我需要对内存中的这些结构进行系统范围的分析，并将其全部放入一个表中。

你应该很高兴你必须分析 C 而不是 C++。因为 C 非常非常容易解析（不像 C++，它非常难以解析，主要是因为那些该死的模板）。尤其是结构。我只需编写一个小而简单的脚本，从 C 源代码中提取所有结构定义。然而，由于结构的大小是恒定的，它们通常包含指向动态分配数据的指针。除非您想修补分配器，否则我认为最简单的分析方法是连接到调试器并记录指针分配给结构成员的每个唯一对象的内存使用情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T14:13:36.620

是的，这一点都不难。只需将 an`A`和 an`Entry`放在一个对象中，然后将其`Entry`设为二等公民：

```
void setDefaultValues(Entry*); // You should be able to provide these.
struct Entry {
  int x;
  int y;
};
struct Indirect : public Entry { };
template<typename T> struct EntryOr : public T, Indirect
{
  setDefaultValues(this);
};

// From C code
struct A {
  int x;
}

int main()
{
  EntryOr<A> foo;
  foo.x = 5; // A::x
  std::cout << foo.x << foo.y; // Prints A::x and Entry::y
} 
```

[（关联）](http://ideone.com/mrH9j)

# wpf - 如何将窗口 B 中的元素属性绑定到窗口 A 中的滑块值

> ID：11353066
> 
> 赞同：2
> 
> 时间：2012-07-05T21:49:56.743
> 
> 标签：wpf, binding

如何将窗口 B 中的文本框值绑定到窗口 A 中滑块的值？我希望这是双向绑定，以便文本框值的手动更改反映在滑块拇指位置。表单中的元素绑定非常简单，但 Windows 之间的绑定对我来说是个谜。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:57:56.310

我将创建一个具有公共属性的类，其中包含您希望绑定到的值。

创建对象的一个​​实例并将 B 中的属性设置为该`DataContext`对象。将 A 中的属性设置为相同的对象。将两个 FrameworkElements 的对象的 Path 属性设置为您创建的公共属性的名称。在您的设置器中实现并触发 PropertyChanged 事件。`TextBox``Window``DataContext``Slider``Window``Binding``INotifyPropertyChanged`

# delphi - 为什么 TStringStream.Bytes 与从 'TStream.Read' 得到的不同

> ID：11353069
> 
> 赞同：1
> 
> 时间：2012-07-05T21:50:02.713
> 
> 标签：delphi, byte, stringstream

使用 TStringStream，`bytes`using 其`Bytes`属性与`bytes`提取的 using不同`TStream.Read`。如下所示：

1.  `bytes`提取的using`TStream.Read`代表正确的数据。
2.  使用`bytes`其`Bytes`属性包含更多数据。~~（正确的最后一个字节与错误的最后一个字节`bytes`不同`bytes`）~~

你能帮忙评论一下可能的原因吗？非常感谢您的帮助！

PS：Delphi XE，Windows 7。（似乎 Delphi 7 中的 TStringStream 没有 LoadFromFile 或 SaveToFile。）

PS：示例文件可以从 SkyDrive 下载：[REF_EncodedSample & REF_DecodedSample](http://sdrv.ms/LzLxlZ)。（Zlib 压缩的图像文件。）。

```
procedure CompareBytes_2;
var
  ss_1: TStringStream;
  ss_2: TStringStream;
  sbytes_Read: TBytes;
  sbytes_Property: TBytes;
  len_sbytes_Read: Integer;
  len_sbytes_Property: Integer;
  filename: string;
begin
  filename := 'REF_EncodedSample';  // textual data
//  filename := 'REF_DecodedSample';  // non-textual data

  ss_1 := TStringStream.Create;
  ss_1.LoadFromFile(filename);
  ss_2 := TStringStream.Create;
  ss_2.LoadFromFile(filename);

  ss_1.SaveToFile(filename+ '_CopyByStringStream_1');
  ss_2.SaveToFile(filename+ '_CopyByStringStream_2');

  len_sbytes_Read := ss_1.Size;
  SetLength(sbytes_Read, len_sbytes_Read);
  ss_1.Read(sbytes_Read[0], len_sbytes_Read);

  sbytes_Property := ss_2.Bytes;

  ShowMessage(
    BoolToStr(
      Length(sbytes_Read) = Length(sbytes_Property),
      True));

  ShowMessage(
    BoolToStr(
      sbytes_Read[len_sbytes_Read - 1] = sbytes_Property[len_sbytes_Read - 1],
      True));

  ss_1.Free;
  ss_2.Free;
end; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:12:56.797

字符串流[文档](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Classes.TBytesStream.Bytes)指出：

> Bytes 属性返回存储数据的缓冲区。使用 Size 属性查找缓冲区中的实际数据量。

据推测，缓冲区已被分配以容纳比实际需要更多的空间。只有缓冲区的第一个 Size 字节包含有效内容。

* * *

此外，对 ss_1.Read 的调用有点毫无意义，因为在调用 SetLength 后 Length(sbytes_Read) 不会改变。当从流中读取时，您将使用 ReadBuffer 而不是 Read。对于 WriteBuffer 也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T22:53:32.190

不可能`Read()`返回与属性中的字节不同的字节`Bytes`，因为从属性使用的内存中的同一对象中`Read()`读取。`TBytes``Bytes`

在 D2009+ 中，`TStringStream`更改为从 TBytesStream 派生，而 TBytesStream 又从`TMemoryStream`. 这就是为什么`TStringStream`has`LoadFromFile()`和`SaveToFile()`methods 现在可用的原因。在早期版本中，`TStringStream`直接派生自`TStream`。 `TStringStream`现在存储编码字节，不像`String`在早期版本中那样。构造`TStringStream`函数将 a`String`作为输入并`TBytes`使用指定的将其编码为 a `TEncoding`（`TEncoding.Default`如果您不指定 a ，则使用where `TEncoding`）。`DataString`属性 getter使用构造函数中指定的 将其解码`TBytes`回 a 。and方法按原样加载/保存，根本不执行任何编码/解码。`String``TEncoding``LoadFromFile()``SaveToFile()``TBytes`

因此，如果您调用`LoadFromFile()`，它将按原样将文件数据存储在流中。`TEncoding`如果该数据的编码与传递给构造函数的编码不匹配，则该`DataStream`属性将返回垃圾，但该`Bytes`属性和该`Read()`方法将正常工作。

您的问题是您没有考虑到该属性返回为其数据存储分配 `Bytes`的整个内存块。基于增量以块的形式分配内存，因此它可能分配比实际需要更多的内存，这就是它具有单独和属性的原因。该属性表示已分配内存的总大小，而该属性表示已在分配的内存中存储了多少字节。当您调用 时，该属性几乎总是大于已加载文件的大小。`TMemoryStream``TMemoryStream``Capacity``Size``Capacity``Size``LoadFromFile()``Bytes`

所以基本上，您的代码是将众所周知的“苹果”与“橙子”进行比较，这就是为什么您会得到不好的结果。`Capacity`您需要相应地修复您的代码，以说明和`Size`属性之间的差异。这两个`TBytes`变量的内容在 bytes 之前都是**相同`Size`的**。您正在比较的不止这些，这就是您的代码失败的原因。

# ruby - 如何模拟 Ruby 模块功能？

> ID：11353070
> 
> 赞同：11
> 
> 时间：2012-07-05T21:50:04.120
> 
> 标签：ruby, module, rspec, mocking

如何在我的项目中模拟自写模块的模块功能？

给定模块和功能

```
module ModuleA::ModuleB
  def self.my_function( arg )
  end
end 
```

这就是所谓的

```
ModuleA::ModuleB::my_function( with_args ) 
```

当它在我正在为其编写规范的函数中使用时，我应该如何模拟它？

* * *

将它加倍 ( `obj = double("ModuleA::ModuleB")`) 对我来说毫无意义，因为该函数是在模块上调用的，而不是在对象上调用的。

我试过把它存根（`ModuleA::ModuleB.stub(:my_function).with(arg).and_return(something)`）。显然，它没有用。`stub`没有在那里定义。

然后我用`should_receive`. 再次`NoMethodError`。

模拟模块及其功能的首选方式是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-06T00:49:08.237

鉴于您在问题中描述的模块

```
module ModuleA ; end

module ModuleA::ModuleB
  def self.my_function( arg )
  end
end 
```

和被测函数，它调用模块函数

```
def foo(arg)
  ModuleA::ModuleB.my_function(arg)
end 
```

然后你可以像这样测试`foo`调用`myfunction`：

```
describe :foo do
  it "should delegate to myfunction" do
    arg = mock 'arg'
    result = mock 'result'
    ModuleA::ModuleB.should_receive(:my_function).with(arg).and_return(result)
    foo(arg).should == result
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-06T10:12:21.137

对于 rspec 3.6，请参阅[How to mock class method in RSpec expect syntax？](https://stackoverflow.com/questions/40888068/how-to-mock-class-method-in-rspec-expect-syntax)

为避免仅链接答案，这里是 Andrey Deineko 的答案副本：

```
allow(Module)
  .to receive(:profile)
  .with("token")
  .and_return({"name" => "Hello", "id" => "14314141", "email" => "hello@me.com"}) 
```

# java - Java：接受一个字符串并返回字符以及每个字符出现的方法

> ID：11353073
> 
> 赞同：3
> 
> 时间：2012-07-05T21:50:22.790
> 
> 标签：java

我需要完成一个程序，该程序将采用一个字符串，例如：“Mass”，并返回类似于这样的输出：

M's: 1 A's: 1 S's: 2

我需要创建一个方法，它只接受一个字符串参数并返回一个名为 Pair 的对象数组。pair 对象就是我上面的输出。Pair 中的每个元素都包含一个字符和该字符的出现次数。这是对类：

```
public static class Pair
    {
        public char _char;
        public int _occurances;

        public Pair(char c)
        {
            _char = c;
            _occurances = 0;
        }

    } 
```

这是我正在研究的方法：

```
public Pair[] auditString(String input) {

    return Pairs;

} 
```

如果我要输入“Mass”并且我的方法返回一个包含此数据的对数组，如何使该方法 auditString 工作：

对数组将生成 3 个内存位置

元素 0 处的对具有字符 m 出现 1 次，元素 1 处的对具有字符 a 出现 1 次，元素 2 处的对具有字符 s 出现 2 次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:55:57.123

由于这是一个家庭作业问题，请考虑以下问题：

*   您将如何分析给定的输入字符串？显然，您必须查看每个字符来计算所需的结果。
*   您将如何跟踪分数？你可以在遇到角色的时候创建一个 Pair 对象，但是当你第二次遇到一个角色时你需要做什么呢？你如何为同一个角色再次获得 Pair 对象？或者，您也可以为每个字符创建 Pair 对象，然后找到一种方法来计算实际答案，方法是使用多次出现的 Pair 对象（即，对于同一个字符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:59:28.383

我假设这是家庭作业，所以我会尽量避免一个过于直接的答案。

我建议考虑这个问题的方法：

*   什么是字符串？即字符串是由什么组成的？字符串本质上是数组，那么如果他们要求您记录 s 数组中数字的频率，您将如何解决这个问题`int`？这个问题的解决方案在逻辑上是相同的。

*   考虑一个接一个地遍历字符串的每个“片段”。您如何利用“Pair”类，以便始终以这种方式跟踪字母频率？

*   想象一下，在您访问的每个字母中，您完全没有注意到字符串的其余部分。Pair 类（不太具体，一般来说是 Objects）的哪些特性可以让你用这么少的“知识”解决问题？

*   如果它让您感到困惑，请首先忽略“配对”对象。试着先把逻辑弄清楚。如果您能在头脑中或纸上逻辑地想出解决方案，那么 Pair 对象的使用应该会变得非常清晰。

希望能有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:16:47.293

```
public Pair[] GetLetterPairs(String str)
{
    HashMap<Character, Integer> map = new HashMap<Character, Integer>();

    str = str.toLowerCase();

    for(char c : str.toCharArray())
    {
        if(!map.containsKey(c))
            map.put(c, 1);
        else
        {
            int value = map.get(c);
            map.put(c, ++value);
        }
    }

    Pair[] pairs = new Pair[map.size()];
    int i = 0;
    for(Entry<Character, Integer> entry : map.entrySet())
    {
        pairs[i] = new Pair(entry.getKey(), entry.getValue());
        i++;
    }

    return pairs;
} 
```

# android - 添加到后台堆栈时如何维护片段状态？

> ID：11353075
> 
> 赞同：169
> 
> 时间：2012-07-05T21:50:39.927
> 
> 标签：android, android-fragments, back-stack

我编写了一个在两个片段之间切换的虚拟活动。当您从 FragmentA 转到 FragmentB 时，FragmentA 被添加到后堆栈。但是，当我返回 FragmentA（通过按回）时，会创建一个全新的 FragmentA，并且它所处的状态会丢失。我觉得我和[这个](https://stackoverflow.com/questions/11111649/savedinstancestate-when-restoring-fragment-from-back-stack)问题一样，但我已经包含了一个完整的代码示例来帮助根除这个问题：

```
public class FooActivity extends Activity {
  @Override public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    final FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(android.R.id.content, new FragmentA());
    transaction.commit();
  }

  public void nextFragment() {
    final FragmentTransaction transaction = getFragmentManager().beginTransaction();
    transaction.replace(android.R.id.content, new FragmentB());
    transaction.addToBackStack(null);
    transaction.commit();
  }

  public static class FragmentA extends Fragment {
    @Override public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
      final View main = inflater.inflate(R.layout.main, container, false);
      main.findViewById(R.id.next_fragment_button).setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
          ((FooActivity) getActivity()).nextFragment();
        }
      });
      return main;
    }

    @Override public void onSaveInstanceState(Bundle outState) {
      super.onSaveInstanceState(outState);
      // Save some state!
    }
  }

  public static class FragmentB extends Fragment {
    @Override public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
      return inflater.inflate(R.layout.b, container, false);
    }
  }
} 
```

添加了一些日志消息：

```
07-05 14:28:59.722 D/OMG     ( 1260): FooActivity.onCreate
07-05 14:28:59.742 D/OMG     ( 1260): FragmentA.onCreateView
07-05 14:28:59.742 D/OMG     ( 1260): FooActivity.onResume
<Tap Button on FragmentA>
07-05 14:29:12.842 D/OMG     ( 1260): FooActivity.nextFragment
07-05 14:29:12.852 D/OMG     ( 1260): FragmentB.onCreateView
<Tap 'Back'>
07-05 14:29:16.792 D/OMG     ( 1260): FragmentA.onCreateView 
```

它从不调用 FragmentA.onSaveInstanceState 并且在您回击时创建一个新的 FragmentA。但是，如果我在 FragmentA 上并锁定屏幕，则会调用 FragmentA.onSaveInstanceState。太奇怪了......我期望添加到后台堆栈的片段不需要重新创建是错误的吗？这是[文档](http://developer.android.com/guide/components/fragments.html#Transactions)所说的：

> 然而，如果您在删除片段时确实调用了 addToBackStack()，那么片段将停止，并且如果用户导航回来，它将恢复。

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-07-05T22:38:21.313

如果您从后台堆栈返回片段，它不会重新创建片段，而是重新使用相同的实例并从`onCreateView()`片段生命周期开始，请参阅[片段生命周期](http://developer.android.com/guide/components/fragments.html#Creating)。

所以如果你想存储状态，你应该使用实例变量而**不是**依赖`onSaveInstanceState()`.

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2014-05-08T05:40:40.673

与苹果`UINavigationController`和谷歌相比`UIViewController`，谷歌在安卓软件架构上做得并不好。而Android的文档`Fragment`也没有多大帮助。

从 FragmentA 进入 FragmentB 时，现有的 FragmentA 实例不会被销毁。当您在 FragmentB 中按 Back 并返回到 FragmentA 时，我们不会创建新的 FragmentA 实例。`onCreateView()`将调用现有的 FragmentA 实例。

**关键是我们不应该在 FragmentA 中再次膨胀视图`onCreateView()`，因为我们正在使用现有的 FragmentA 实例。我们需要保存并重用 rootView。**

以下代码运行良好。它不仅保持片段状态，还减少了 RAM 和 CPU 负载（因为我们只在必要时膨胀布局）。我不敢相信谷歌的示例代码和文档从来没有提到它，而是[总是夸大布局](https://developer.android.com/training/basics/fragments/creating.html)。

**版本 1（不要使用版本 1。使用版本 2）**

```
public class FragmentA extends Fragment {
    View _rootView;
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (_rootView == null) {
            // Inflate the layout for this fragment
            _rootView = inflater.inflate(R.layout.fragment_a, container, false);
            // Find and setup subviews
            _listView = (ListView)_rootView.findViewById(R.id.listView);
            ...
        } else {
            // Do not inflate the layout again.
            // The returned View of onCreateView will be added into the fragment.
            // However it is not allowed to be added twice even if the parent is same.
            // So we must remove _rootView from the existing parent view group
            // (it will be added back).
            ((ViewGroup)_rootView.getParent()).removeView(_rootView);
        }
        return _rootView;
    }
} 
```

------2005 年 5 月 3 日更新：--------

正如评论所提到的，有时`_rootView.getParent()`是 null in `onCreateView`，这会导致崩溃。版本 2 删除了 onDestroyView() 中的 _rootView，正如 dell116 所建议的那样。在 Android 4.0.3、4.4.4、5.1.0 上测试。

**版本 2**

```
public class FragmentA extends Fragment {
    View _rootView;
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (_rootView == null) {
            // Inflate the layout for this fragment
            _rootView = inflater.inflate(R.layout.fragment_a, container, false);
            // Find and setup subviews
            _listView = (ListView)_rootView.findViewById(R.id.listView);
            ...
        } else {
            // Do not inflate the layout again.
            // The returned View of onCreateView will be added into the fragment.
            // However it is not allowed to be added twice even if the parent is same.
            // So we must remove _rootView from the existing parent view group
            // in onDestroyView() (it will be added back).
        }
        return _rootView;
    }

    @Override
    public void onDestroyView() {
        if (_rootView.getParent() != null) {
            ((ViewGroup)_rootView.getParent()).removeView(_rootView);
        }
        super.onDestroyView();
    }
} 
```

**警告！！！**

**这是一个黑客！虽然我在我的应用程序中使用它，但您需要仔细测试和阅读评论。**

* * *

## 回答 #3

> 赞同：55
> 
> 时间：2013-09-26T08:00:48.860

我想有一种替代方法可以实现您正在寻找的东西。我并不是说它是一个完整的解决方案，但它在我的案例中起到了作用。

我所做的不是替换我刚刚添加的目标片段的片段。所以基本上你将使用`add()`方法来代替`replace()`。

我还做了什么。我隐藏我当前的片段并将其添加到后台堆栈。

因此，它在当前片段上重叠新片段而不破坏其视图。（检查它的`onDestroyView()`方法是否被调用。加上添加它`backstate`给我恢复片段的优势。

这是代码：

```
Fragment fragment=new DestinationFragment();
FragmentManager fragmentManager = getFragmentManager();
android.app.FragmentTransaction ft=fragmentManager.beginTransaction();
ft.add(R.id.content_frame, fragment);
ft.hide(SourceFragment.this);
ft.addToBackStack(SourceFragment.class.getName());
ft.commit(); 
```

AFAIK 系统仅`onCreateView()`在视图被销毁或未创建时调用。但是在这里我们通过不将其从内存中删除来保存视图。所以它不会创建新视图。

当你从目标片段返回时，它会弹出最后一个`FragmentTransaction`移除的顶部片段，这将使最顶部（SourceFragment's）的视图出现在屏幕上。

评论：正如我所说，它不是一个完整的解决方案，因为它不会删除 Source 片段的视图，因此比平时占用更多的内存。但是，还是要达到目的。此外，我们使用了一种完全不同的隐藏视图机制，而不是替换它，这是非传统的。

所以这不是你如何维护状态，而是你如何维护视图。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2019-09-03T07:08:24.643

我会建议一个非常简单的解决方案。

获取 View 引用变量并在 OnCreateView 中设置视图。检查该变量中是否已经存在视图，然后返回相同的视图。

```
 private View fragmentView;

   public View onCreateView(LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        if (fragmentView != null) {
            return fragmentView;
        }
        View view = inflater.inflate(R.layout.yourfragment, container, false);
        fragmentView = view;
        return view;
    } 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2015-04-03T20:15:56.903

我在一个包含地图的片段中遇到了这个问题，该地图有太多设置细节无法保存/重新加载。我的解决方案是基本上一直保持这个 Fragment 处于活动状态（类似于@kaushal 提到的）。

假设您有当前的 Fragment A 并希望显示 Fragment B。总结结果：

*   replace() - 移除 Fragment A 并用 Fragment B 替换它。 Fragment A 将在再次被带到前面时重新创建
*   add() - （创建并）添加一个 Fragment B 并与 Fragment A 重叠，该 Fragment A 在后台仍处于活动状态
*   remove() - 可用于移除 Fragment B 并返回到 A. Fragment B 将在稍后调用时重新创建

因此，如果您想同时“保存”两个片段，只需使用 hide()/show() 切换它们。

**优点**：保持多个片段运行的简单方法
**缺点**：您使用更多内存来保持所有片段运行。可能会遇到问题，例如显示许多大位图

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-11-16T08:27:48.177

`onSaveInstanceState()`仅在配置更改时才调用。

由于从一个片段更改为另一个片段没有配置更改，因此没有调用`onSaveInstanceState()`。什么状态没有被保存？你能具体说明吗？

如果您在 EditText 中输入一些文本，它将自动保存。任何没有任何 ID 的 UI 项都是不应保存其视图状态的项。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-10-15T06:18:11.363

> **首先**：只需使用 add 方法而不是 FragmentTransaction 类的 replace 方法，然后您必须通过 addToBackStack 方法将 secondFragment 添加到堆栈中
> 
> **第二**：在点击后你必须调用 popBackStackImmediate()

```
Fragment sourceFragment = new SourceFragment ();
final Fragment secondFragment = new SecondFragment();
final FragmentTransaction ft = getChildFragmentManager().beginTransaction();
ft.add(R.id.child_fragment_container, secondFragment );
ft.hide(sourceFragment );
ft.addToBackStack(NewsShow.class.getName());
ft.commit();

((SecondFragment)secondFragment).backFragmentInstanceClick = new SecondFragment.backFragmentNewsResult()
{
        @Override
        public void backFragmentNewsResult()
        {                                    
            getChildFragmentManager().popBackStackImmediate();                                
        }
}; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-05-06T14:40:22.177

我的问题是类似的，但我克服了我没有保持片段活着。假设您有一个包含 2 个片段的活动 - F1 和 F2。F1 最初启动并假设包含一些用户信息，然后在某些情况下 F2 弹出要求用户填写*附加属性*- 他们的电话号码。接下来，您希望该电话号码弹回 F1 并完成注册，但您意识到所有以前的用户信息都丢失了，并且您没有他们以前的数据。该片段是从头开始重新创建的，即使您将此信息保存在`onSaveInstanceState`包中，也会在`onActivityCreated`.

**解决方案：** 将所需信息保存为调用活动中的实例变量。然后将该实例变量传递到您的片段中。

```
@Override
public void onActivityCreated(@Nullable Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    Bundle args = getArguments();

    // this will be null the first time F1 is created. 
    // it will be populated once you replace fragment and provide bundle data
    if (args != null) {
        if (args.get("your_info") != null) {
            // do what you want with restored information
        }
    }
} 
```

所以继续我的例子：在我显示 F2 之前，我使用回调将用户数据保存在实例变量中。然后我启动F2，用户填写电话号码并按保存。我在活动中使用另一个回调，收集此信息并替换我的片段 F1，这一次它*有*我可以使用的捆绑数据。

```
@Override
public void onPhoneAdded(String phone) {
        //replace fragment
        F1 f1 = new F1 ();
        Bundle args = new Bundle();
        yourInfo.setPhone(phone);
        args.putSerializable("you_info", yourInfo);
        f1.setArguments(args);

        getFragmentManager().beginTransaction()
                .replace(R.id.fragmentContainer, f1).addToBackStack(null).commit();

    }
} 
```

更多关于回调的信息可以在这里找到：[https ://developer.android.com/training/basics/fragments/communicating.html](https://developer.android.com/training/basics/fragments/communicating.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-09-21T18:17:10.557

正确调用 Fragment 生命周期方法并使用 onSavedInstanceState() 可以解决问题。

即正确调用onCreate()、onCreateView()、onViewCreated() 和onSavedInstanceState() 并将Bundle 保存在onSaveInstanceState() 中并在onCreate() 方法中重新调用。

我不知道如何，但它对我有用，没有任何错误。

如果有人能解释，将不胜感激。

```
 public class DiagnosisFragment extends Fragment {
        private static final String TITLE = "TITLE";
        private String mTitle;
        private List mList = null;
        private ListAdapter adapter;
        public DiagnosisFragment(){}
        public DiagnosisFragment(List list, String title){
            mList = list;
            mTitle = title;

        }
        @Override
        public void onCreate(@Nullable Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            if(savedInstanceState != null){
                mList = savedInstanceState.getParcelableArrayList(HEALTH_ITEMS);
                mTitle = savedInstanceState.getString(TITLE);
                itemId = savedInstanceState.getInt(ID);
                mChoiceMode = savedInstanceState.getInt(CHOICE_MODE);
            }
            getActivity().setTitle(mTitle);
            adapter = (ListAdapter) new HealthAdapter(mList, getContext()).load(itemId);
        }
        @Nullable
        @Override
        public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
            return inflater.inflate(R.layout.diagnosis_fragment, container, false);
        }
        @Override
        public void onViewCreated(@NonNull View view, @Nullable Bundle savedInstanceState) {
            super.onViewCreated(view, savedInstanceState);
            ListView lv = view.findViewById(R.id.subLocationsSymptomsList);
            lv.setAdapter(adapter);
        }

        @Override
        public void onSaveInstanceState(@NonNull Bundle outState) {
            outState.putParcelableArrayList(HEALTH_ITEMS, (ArrayList) mList);
            outState.putString(TITLE, mTitle);
        }
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-19T04:40:43.947

# Kotlin 和 ViewBinding 解决方案

我正在使用FragmentTransaction`replace()`的`backstack()`方法。问题是该`backstack()`方法调用了`onCreateView`前一个片段的，这会导致片段 UI 的重新构建。这是一个解决方案：

```
private lateinit var binding: FragmentAdRelevantDetailsBinding

override fun onCreateView(
    inflater: LayoutInflater, container: ViewGroup?,savedInstanceState: Bundle?
): View {
    if (!this::binding.isInitialized)
        binding = FragmentAdRelevantDetailsBinding.inflate(layoutInflater, container, false)
    return binding.root
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-03-03T06:43:18.480

```
getSupportFragmentManager().addOnBackStackChangedListener(new FragmentManager.OnBackStackChangedListener()
    {
        @Override
        public void onBackStackChanged()
        {
            if (getSupportFragmentManager().getBackStackEntryCount() == 0)
            {
                //setToolbarTitle("Main Activity");
            }
            else
            {
                Log.e("fragment_replace11111", "replace");
            }
        }
    });

YourActivity.java
@Override
public void onBackPressed()
{
 Fragment fragment = getSupportFragmentManager().findFragmentById(R.id.Fragment_content);
  if (fragment instanceof YourFragmentName)
    {
        fragmentReplace(new HomeFragment(),"Home Fragment");
        txt_toolbar_title.setText("Your Fragment");
    }
  else{
     super.onBackPressed();
   }
 }

public void fragmentReplace(Fragment fragment, String fragment_name)
{
    try
    {
        fragmentTransaction = fragmentManager.beginTransaction();
        fragmentTransaction.replace(R.id.Fragment_content, fragment, fragment_name);
        fragmentTransaction.setCustomAnimations(R.anim.enter_from_right, R.anim.exit_to_left, R.anim.enter_from_left, R.anim.exit_to_right);
        fragmentTransaction.addToBackStack(fragment_name);
        fragmentTransaction.commitAllowingStateLoss();
    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-31T07:00:44.697

使用以下代码替换片段：

```
Fragment fragment = new AddPaymentFragment();
getSupportFragmentManager().beginTransaction().replace(R.id.frame, fragment, "Tag_AddPayment")
                .addToBackStack("Tag_AddPayment")
                .commit(); 
```

活动的 onBackPressed() 是：

```
 @Override
public void onBackPressed() {
    android.support.v4.app.FragmentManager fm = getSupportFragmentManager();
    if (fm.getBackStackEntryCount() > 1) {

        fm.popBackStack();
    } else {

        finish();

    }
    Log.e("popping BACKSTRACK===> ",""+fm.getBackStackEntryCount());

} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-09-09T03:44:24.793

在这里，因为`onSaveInstanceState`当您将片段添加到后台堆栈时，片段中不会调用。当在和之间调用恢复 start`onCreateView`和 end`onDestroyView`时backstack 中的片段生命周期。我的解决方案是创建实例变量并在. 示例代码：`onSaveInstanceState``onDestroyView``onDestroy``onCreate`

```
private boolean isDataLoading = true;
private ArrayList<String> listData;
public void onCreate(Bundle savedInstanceState){
     super.onCreate(savedInstanceState);
     isDataLoading = false;
     // init list at once when create fragment
     listData = new ArrayList();
} 
```

并检查它`onActivityCreated`：

```
public void onViewCreated(View view, @Nullable Bundle savedInstanceState) {
    super.onViewCreated(view, savedInstanceState);
    if(isDataLoading){
         fetchData();
    }else{
         //get saved instance variable listData()
    }
}

private void fetchData(){
     // do fetch data into listData
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-04-12T18:20:53.997

完美的解决方案，在堆栈中找到旧片段并在堆栈中存在时加载它。

```
/**
     * replace or add fragment to the container
     *
     * @param fragment pass android.support.v4.app.Fragment
     * @param bundle pass your extra bundle if any
     * @param popBackStack if true it will clear back stack
     * @param findInStack if true it will load old fragment if found
     */
    public void replaceFragment(Fragment fragment, @Nullable Bundle bundle, boolean popBackStack, boolean findInStack) {
        FragmentManager fm = getSupportFragmentManager();
        FragmentTransaction ft = fm.beginTransaction();
        String tag = fragment.getClass().getName();
        Fragment parentFragment;
        if (findInStack && fm.findFragmentByTag(tag) != null) {
            parentFragment = fm.findFragmentByTag(tag);
        } else {
            parentFragment = fragment;
        }
        // if user passes the @bundle in not null, then can be added to the fragment
        if (bundle != null)
            parentFragment.setArguments(bundle);
        else parentFragment.setArguments(null);
        // this is for the very first fragment not to be added into the back stack.
        if (popBackStack) {
            fm.popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE);
        } else {
            ft.addToBackStack(parentFragment.getClass().getName() + "");
        }
        ft.replace(R.id.contenedor_principal, parentFragment, tag);
        ft.commit();
        fm.executePendingTransactions();
    } 
```

像使用它一样

```
Fragment f = new YourFragment();
replaceFragment(f, null, boolean true, true); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-04-06T12:33:10.490

```
Public void replaceFragment(Fragment mFragment, int id, String tag, boolean addToStack) {
        FragmentTransaction mTransaction = getSupportFragmentManager().beginTransaction();
        mTransaction.replace(id, mFragment);
        hideKeyboard();
        if (addToStack) {
            mTransaction.addToBackStack(tag);
        }
        mTransaction.commitAllowingStateLoss();
    }
replaceFragment(new Splash_Fragment(), R.id.container, null, false); 
```

# javascript - 谷歌地图使用 AJAX 添加标记

> ID：11353087
> 
> 赞同：0
> 
> 时间：2012-07-05T21:52:14.697
> 
> 标签：javascript, google-maps

所以我读过很多关于关闭问题的文章，我假设就是这样，但我不知道如何解决它。

**问题：**基本上，我只得到 1 个标记，我假设是因为我使用了相同的“标记”变量？但我不确定，也看不到一个简单的解决方案来解决它。我敢肯定有一些显而易见的事情，我喜欢真正了解 Javascript 的人的帮助，而不是我只是在得到我需要的结果之前搞砸它。

谢谢！

```
<script>
var geocoder;
var map;
var markersArray = [];
var plocation = [];

function initialize() {
geocoder = new google.maps.Geocoder();
var latlng = new google.maps.LatLng(39.50, -98.35);
var myOptions = {
    zoom: 4,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function codeAddress() {
    //Delete Existing Markers
    clearOverlays();
    deleteOverlays();
    //Geocode and Add the New One + Results.
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
        map.setCenter(results[0].geometry.location);
        //add the center marker
        var patientslocation =results[0].geometry.location;
        addMarker(patientslocation, "Patient");
        //Zoom in on the Region.
        map.setZoom(10);
        //Call to Our API
        $.getJSON("map/search", { provider_type: "01", loc: '"'+patientslocation+'"' },function(data) {
            //Parse Results
            var htmlstring = "";
            var arraylength = data.length-1;
            console.log("Result Count (base 0): "+arraylength)
            $(data).each(function(i,val){

                //Build HTML String for Side Bar
                if (val.name){
                    htmlstring = htmlstring + "<h3>"+val.name+"</h3>";
                }
                if (val.address){
                    htmlstring = htmlstring + val.address +"<br/>";
                }
                if (val.phone){
                    htmlstring = htmlstring +val.phone +"<br/>";
                }
                //Build HTML Strings for Each Marker Hover

                //Load the Array of Markers
                plocation[i] = new google.maps.LatLng(val.lat, val.lng);
                console.log(i +" : " +plocation[i]);

                if(i === arraylength){
                    console.log("Load plocations called")
                    load_plocations();
                }
            });
            $('#prov_list').html(htmlstring);

        });

} else {
    alert("Geocode was not successful for the following reason: " + status);
}
});
}

function load_plocations(){
    $(plocation).each(function(k,v){
        console.log("Calling AddMarker: "+v)
        addMarker(v,k);
    });
}

function addMarker(location, name) {
   console.log("Adding Marker: "+location)
    marker = new google.maps.Marker({
        position: location,
        map: map
    });
    markersArray.push(marker);
}
//Clears the Markers from the map.
function clearOverlays() {
    console.log("Clearing Overlays");
    if (markersArray) {
        for (i in markersArray) {
            markersArray[i].setMap(null);
        }
    }
}

// Deletes all markers in the array by removing references to them
function deleteOverlays() {
    console.log("Deleting Overlays");
    if (markersArray) {
        for (i in markersArray) {
            markersArray[i].setMap(null);
        }
        markersArray.length = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T21:56:09.473

尝试使用*var声明**标记*：

 *```
var marker = new google.maps.Marker({ 
```

这将使它成为一个局部范围的对象，从而为每次迭代创建一个新对象。

如果没有*var*，它就会变成全局的（即，作用域为*window*对象）。我不是 100% 确定，但我认为，正如您所写，这可能会在每次迭代中覆盖相同的标记，而不是创建一个新标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:00:36.890

地理编码器受速率限制和配额限制。“即时”对多个点进行地理编码以显示网页从来都不是一个好主意，这是您在循环中尝试执行的操作，仅适用于少量标记。这是[一个示例（使用 v2 API）](http://www.geocodezip.com/example_geomulti_bad3_xml.asp)，它对通过 AJAX 传输的 xml 中的地址列表进行地理编码。

[这是一篇文章，它是](https://developers.google.com/maps/articles/geocodestrat)讨论地理编码策略的 google maps API v3 文档的一部分。

最好的解决方案是，如果提前知道这些点，对它们进行离线地理编码并存储坐标以供页面加载时使用。如果它们是由用户输入的，请使用 API 中内置的客户端地理编码器。*

# java - DSA 算法 - 数字签名

> ID：11353099
> 
> 赞同：-1
> 
> 时间：2012-07-05T21:54:17.560
> 
> 标签：java, dsa

前一天，我一直在寻找 DSA 的正确 Java 实现，而没有使用 java.secure 和任何其他 java.secure 类似的库（我已经多次使用 java.secure）。

我用谷歌搜索，继续维基，但找不到准确和清晰的描述。如果你有它的实现，请分享。这不是家庭作业——学校放暑假了，但这对我很有帮助。

我已经完成了 RSA，但 DSA 对我来说更重要。

感谢您的帮助！

DSA：[http ://en.wikipedia.org/wiki/Digital_Signature_Algorithm](http://en.wikipedia.org/wiki/Digital_Signature_Algorithm)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:01:36.963

很确定在 www.bouncycastle.org 上有一个实现

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T03:46:43.533

[我建议您从 FIPS网站](http://csrc.nist.gov/publications/fips/fips186-3/fips_186-3.pdf)查看 fips_186-3 规范。在它的附录中，您可以找到几乎所有 DSA 所需的非常详细的步骤，尽管它们是由伪代码编写的

# ruby-on-rails-3 - 弃用警告：:confirm 选项已弃用，将从 Rails 4.0 中删除。使用 ':data => { :confirm => 'Text' }' 代替

> ID：11353101
> 
> 赞同：0
> 
> 时间：2012-07-05T21:54:27.657
> 
> 标签：ruby-on-rails-3

我已将我的 rails 示例应用程序从 3.1 版升级到 3.2.6 版。不幸的是，我有以下弃用警告。

```
DEPRECATION WARNING: :confirm option is deprecated and will be removed from Rails 4.0\. Use ':data => { :confirm => 'Text' }' instead. (called from _app_views_shared__feed_item_html_erb___1282539180373198927_70193136005180 at /Users/Bart/rails_projects/sample_app/app/views/shared/_feed_item.html.erb:27) 
```

期待解决这个问题。

最好的祝福

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-06T11:38:28.763

按照此警告的读取方式，您需要编辑 shared/_feed_item.html.erb 视图的第 27 行。这是一个简单的改变

```
link_to 'Do Something', some_path, :confirm => 'Text' 
```

到

```
link_to 'Do Something', some_path, :data => { :confirm => 'Text' } 
```

或更新的 Rails 1.9 语法：

```
link_to 'Do Something', some_path, data: { confirm: 'Do you really want to do something?' } 
```

这是[Rails 提交](https://github.com/rails/rails/commit/fc092a9cba5fceec38358072e50e09250cf58840)的链接以及[Rails 团队讨论](https://github.com/rails/rails/pull/6613#issuecomment-6458648)弃用的地方。

# objective-c - OCMock - 是否需要调用“验证”来断言在模拟对象上调用了一个方法？

> ID：11353102
> 
> 赞同：0
> 
> 时间：2012-07-05T21:54:46.660
> 
> 标签：objective-c, ios, xcode, ocmock

我对 OCMockObject 上的“验证”方法的作用感到困惑，是否有必要调用它来测试是否在模拟对象上调用了方法？即使在执行测试后我实际上没有调用“验证”，如果我没有完全设置要在模拟对象上调用的方法的期望，我仍然会遇到测试失败。

例如：

在测试方法中

```
OCMockObject *mockView = [OCMockObject mockForClass:[UIView class]];
[controller setValue:mockView forKey:@"sampleView"];
[[mockView expect] setHidden:YES];
[controller processSampleView];
//do I need to call "verify" here?
//    If I don't, I still get test failures if "setHidden:YES" is not called...
[mockView verify]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T15:42:02.393

OCMock 网站上的功能描述如下：

*“如果没有调用预期的方法，验证方法将引发异常。”*

还有这个：

*“当一个方法被调用一个没有用期望或存根设置的模拟对象时，模拟对象将引发异常。这种快速失败模式可以通过创建一个“不错的”模拟来关闭：”*

所以，是的，当您调用意外方法时会引发异常。但是，上面的示例表明即使未调用 verify 也未调用预期方法时会引发异常。这似乎是不可能的，因为如果你不调用验证，OCMock 就没有代码路径。在您的情况下，异常是从哪里引发的，即异常的堆栈跟踪是什么？您是否可以在另一个调用验证的测试中重用模拟视图？**控制器**实例是否在测试之间停留？

# java - appengine jpql: java.lang.IllegalArgumentException: __key__ 过滤器值必须是 Key

> ID：11353104
> 
> 赞同：2
> 
> 时间：2012-07-05T21:54:51.453
> 
> 标签：java, google-app-engine, jpql

我在 appengine 1.7.1 上使用 JPA，并尝试通过 JPQL 执行许多特定查询。尝试在某些 Item 对象上过滤类型为 Key (categoryKey) 的属性时发现问题

物品类别

```
@Entity
public class Item extends Registro implements Serializable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key = null;
    ....
    private Key categoryKey;
    .... 
```

ItemDAO 类

```
public List<Item> searchByCriteria(SearchItemForm form) {
   Query q = getEm().createQuery("Select i from " +
       Item.class.getName() + " i Where i.categoryKey = :CAT_KEY");
   q.setParameter("CAT_KEY", form.getCategoryKey());
   return q.getResultList();
} 
```

我一直在尝试很多方法，但没有结果。

我没有在 appengine 上找到任何关于这种情况的广告：JAVA, JPQL, key attribute is not the ID on Item

我很感激任何建议

# javascript - 为什么浏览器会触发点击事件而不是表单中的提交？

> ID：11353105
> 
> 赞同：0
> 
> 时间：2012-07-05T21:54:54.903
> 
> 标签：javascript, browser

我有这个代码 [http://jsfiddle.net/2Gay9/3/](http://jsfiddle.net/2Gay9/3/)

**HTML**

```
<form action="/" method="get" onsubmit="return false";>
    test: <input type="text" value="">
    <input type="submit" value="submit">
</form> 
```

**JS**

```
jQuery('input').bind("keydown click", function(event){
    console.log(event.type);
    console.log(jQuery(this));
}); 
```

尝试在输入文本中按 RETURN 并查看控制台：

```
keydown
jQuery(input)
click
jQuery(input submit) 
```

**问题：**为什么浏览器在提交按钮上触发“点击”事件，而不是在表单中触发“提交”事件？这是项目缺陷还是规范？如何在不取消表单提交的情况下取消第二个活动？

Tks

**更新** 换句话说，我只需要将我的事件与浏览器事件区分开来。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:12:00.133

利用：

```
jQuery('input').bind("keydown click", function(event){
    event.preventDefault();
    console.log(event.type);
    console.log(jQuery(this));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:43:05.077

**解决了！**

如果我无法停止提交按钮上的点击事件，我可以仅将浏览器与用户点击区分开来。区别于我将使用**mousedown**事件而不是`browsers click`click**事件**。`users click`

 ****每次我们在输入文本中按 RETURN 时，浏览器都会触发单击当前表单中的第一个提交按钮。但这不会触发 mousedown 事件，在这种情况下是“人类独有的”。

固定版本，打印一次事件。

```
jQuery('input').bind("keydown mousedown", function(event){
    console.log(event.type);
    console.log(jQuery(this));
}); 
```

[http://jsfiddle.net/2Gay9/6/](http://jsfiddle.net/2Gay9/6/)****

# css - 将文本块与左右边距对齐

> ID：11353106
> 
> 赞同：0
> 
> 时间：2012-07-05T21:54:57.983
> 
> 标签：css

我有一段文字。我想在左侧设置 20% 的边距，在右侧设置 30% 的边距。如何使用 CSS 实现这一点？

下面是我的代码：

```
.style4 {
    float: left;
    margin-left: 20%;
    background-color: #e5e0dd;
    width: 68.1%;
    margin-right: 30%;
    border-left:30%;

    text-align: center;
    font-family: Calibri;
    font-size: small;
}

<div class="style4">
    This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.This is a test.
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:59:11.770

我认为您可能希望在这里进行填充而不是边距。

```
padding-left: 20%; padding-right: 30%; 
```

# php - 接受变量并将其用作函数

> ID：11353107
> 
> 赞同：0
> 
> 时间：2012-07-05T21:55:07.203
> 
> 标签：php, function, variables

所以，我试图把一个变量变成一个函数。

```
$go_menu=$_POST['menu'];
$go_menu();

Function potoato_chip()
{
    echo "I like Doritos!";
}

Function apples()
{
    echo "I like Fuji";
} 
```

我正在从中获取数据，`$go_menu=$_POST['menu']`但下面的所有内容`$go_menu();`都是空白的。

完整的代码[在](http://pastebin.com/7zrJAsc9)pastebin 中。感谢任何帮助！我还在学习！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:03:32.730

1.  在调用它之前确保它是可调用的：

    ```
    $go_menu = $_POST['menu'];

    if(is_callable($go_menu))
        $go_menu(); 
    ```

2.  保留一组有效值；这将解决您的“无内容”问题*和*安全问题：

    ```
    $valid_actions = array('potato_chip', 'apples');

    if(isset($_POST['menu']) && in_array($go_menu = $_POST['menu'], $valid_actions)) {
        $go_menu();
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:58:39.990

您不应该这样做：当您刚刚从 POST 中获取该值时，将变量作为函数执行是非常不安全的！特别是因为您正在创建一个管理界面。如果需要，任何恶意的人都可以在您的代码中执行其他功能。

您应该使用 if 语句或 switch 语句来控制需要发生的事情。

注意`Function`应该写成`function`PHP。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:05:35.027

首先，您的代码非常不安全。假设我编辑您的表单并将`POST`请求设置提交`$_POST['menu']`给，假设`die`。这会使您的程序崩溃。你可以想象我还能用这个做什么。正确的方法是使用`switch`：

```
switch $_POST['menu'] {
    case "menu_1":
        menu_1();
        break;
    case "menu_2":
        menu_1();
        break;
    [...]
} 
```

一般来说，我不喜欢使用变量变量或变量函数，因为很难跟踪变量的可能值。但是，如果经过适当验证，它们仍然可以使用，例如 minitech 的答案。但是，在您的情况下，由于您似乎可以调用的函数选择有限，因此我会使用`switch`.

# java - 在JAVA中获取给定日期范围（DateX和DateY）之间的所有星期一和星期四日期是一个很好的实现

> ID：11353108
> 
> 赞同：4
> 
> 时间：2012-07-05T21:55:21.330
> 
> 标签：java, date, range

我想在给定的日期范围内获得几天。什么是最佳解决方案？例如，我想获取从今天到两个月的所有星期一、星期三和星期四的日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-06-15T16:47:01.597

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:16:18.983

计算 x 和 y 之间的周数，并考虑 x 的工作日。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:16:28.370

看看[`java.util.Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)。可以获取它的一个实例，将其设置为给定日期，然后，例如，调用`get(DAY_OF_WEEK)`它。它还有一些很好的方法来获取给定年份的天数和给定年份的天数。

# perl - “捕获”从批处理中返回 Perl 脚本值的语法？

> ID：11353120
> 
> 赞同：1
> 
> 时间：2012-07-05T21:56:36.020
> 
> 标签：perl, batch-file, return

我想批量存储 perl 的返回值。我该如何做到这一点？

```
Batch Code:
FOR /F "delims=" %%I IN ('perl.exe c:\TestProp1noRefCases.pl 859') DO set lineCase=%%I 
echo !lineCase! ::Nothing is outputted

Perl Code:
use strict;
use warnings;
sub main1;

my $arg1 =shift;
main1($arg1);
exit;
sub main1
{
            #Returns 1,2,3 Depending on testNum passed
            my @gp1= (829,845,851,859,864,867);
            my @gp2= (861,863,865);
            # my @gp4= (826-828,830-839,843-844,847-850,852-854,860-862,883);
    # my @gp3= (877-882,884);
            my $val1=1;
            my $val2=2;
            my $val3=3;
            my $val4=4;

            if((grep /^$arg1$/,@gp1) || ($arg1 >=822 && $arg1<=824))
            {     
                            # print "$val1\n";
                            return $val1;

            } elsif ((grep /^$arg1$/,@gp2) || ($arg1>=855 && $arg1<=858))
            {
            #print "$val2\n";
                            return $val2;
            } elsif (($arg1==884) || ($arg1>=877 && $arg1<=882))
            {
            #print "$val3\n";
                            return $val3;
            } else
            {
                #print "$val4\n";
                            return $val4;

            }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:02:39.287

您没有退出返回值。

代替

```
main1($arg1);
exit; 
```

尝试：

```
my $result = main1($arg1);
exit $result; 
```

或者：

```
exit main1($arg1); 
```

然后`%ERRORLEVEL%`在您的批次中进行检查。

```
perl.exe c:\TestProp1noRefCases.pl 859
set lineCase=%ERRORLEVEL% 
```

编辑：注意，这只适用于小的无符号整数，就像`$val1..$val4`你的例子一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:24:06.690

您永远不会真正打印要捕获的值。改变

```
main1($arg1); 
```

至

```
print main1($arg1); 
```

# rss - 无法使用 zRSSfeed 插件从 RSS 提要中获取最新帖子

> ID：11353121
> 
> 赞同：0
> 
> 时间：2012-07-05T21:56:38.547
> 
> 标签：rss, feed, blogger

我已经包含了这个 RSS 提要：http: [//veronicalercari.blogspot.com/feeds/posts/default](http://veronicalercari.blogspot.com/feeds/posts/default)

在此页面中：http: [//verler.com/blog.html](http://verler.com/blog.html)使用 zRSSfeed 插件。

问题是它没有带来最新的帖子。它显示的最后一个是2个月前的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T20:27:49.250

这似乎不是浏览器缓存问题，我已经从许多不同的浏览器访问了该页面，并且在任何地方我都得到相同的过时提要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T15:15:29.507

这似乎是 Google Feed API 和您的 Feed 的问题。通过在 Google Feed API 中使用用于历史记录的附加选项，我们使 Feed 正常工作 - 这有点奇怪，需要进一步研究，但似乎确实有效。

zRSSFeed (1.1.8) 的最新版本现在包括一个“历史”选项。通过将此设置为“真”，将显示您的所有最新记录。

例如：

```
$(document).ready(function () {
     $('#test').rssfeed('http://veronicalercari.blogspot.com/feeds/posts/default',{
          historical: true
     });
}); 
```

[http://www.zazar.net/developers/jquery/zrssfeed/](http://www.zazar.net/developers/jquery/zrssfeed/)

# jquery - 确定是否已经在另一个选择字段中选择了值

> ID：11353125
> 
> 赞同：0
> 
> 时间：2012-07-05T21:57:11.077
> 
> 标签：jquery

所有，我有以下选择框：

```
<select class="event_selection" name="Event[]" id="Event_<?php echo $i; ?>" > 
    <option value="original">Select Event...</option> 
    <option value="1">One</option> 
    <option value="2">Two</option>
</select> 
```

我的表格上有几个。当用户从下拉列表中选择一个值时，我想确保该值尚未在具有相同类的另一个选择中选择。

是否有捷径可寻？如果是这样，你能指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:00:55.200

```
 $("select.event_selection").change(function(){
    if ($(this).val() == $("select.event_selection").not(this).val()) {
        // match found
        alert('You have already selected this value');
        $(this).val('original'); //sets this back to original        
    }
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:10:15.960

我已经做到了，因此您不能两次选择任何值：

```
var $coll = $( '.event_selection' ).on( 'change', function () {
    $coll.children().prop( 'disabled', false );
    $coll.each(function () {
        var val = this.value;
        if ( val === 'original' ) return;
        $coll.not( this ).children( '[value="' + val + '"]' ).prop( 'disabled', true );
    });
}); 
```

**现场演示：http:** [//jsfiddle.net/QVbQ6/2/](http://jsfiddle.net/QVbQ6/2/)

* * *

```
var $coll = $( '.event_selection' );

$( '#timeline_table' ).on( 'change', '.event_selection', function () {

    // my code
    $coll.children().prop( 'disabled', false );
    $coll.each(function () {
        var val = this.value;
        if ( val === 'original' ) return;
        $coll.not( this ).children( '[value="' + val + '"]' ).prop( 'disabled', true );
    });

    // your other code...

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:02:07.130

```
$(".event_selection").change(function(){
 if($(".event_selection:selected[value=" + $(this).val() + "]").length > 1) {
  // there are more than one select with this class and same value, do whatever you need
 }
}); 
```

# javascript - 使用数据发布 jQuery mobile 更改页面

> ID：11353131
> 
> 赞同：1
> 
> 时间：2012-07-05T21:57:57.423
> 
> 标签：javascript, jquery, jquery-mobile

如何在 jquery mobile 上更改页面命令后使用 Javascript 收集数据。这是我的命令：

```
var resultDate = "123121312";
$.mobile.changePage("animation.html", { transition: "slidedown", type: "post", data:resultDate}); 
```

如何在页面 animation.html 上使用 JS 收集该数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:25:31.007

```
$(document).bind("pagechange",function(e,data){
    if(data.options.data){
        alert(data.options.data);
    }
}); 
```

这应该在 pageChange 上触发，并且如果它在您想要的页面上运行（显然您需要将其缩小到该页面），那么它将具有您传入的数据变量。

您需要为您想要的页面绑定/取消绑定它，或者使用 url 变量/数据仅在您想要的页面上运行它。或者您可以检查数据变量并仅在它有效时运行，就像我正在做的那样。

# r - R：更改类的字段（插槽）值，将值分配给其他字段

> ID：11353135
> 
> 赞同：0
> 
> 时间：2012-07-05T21:58:21.677
> 
> 标签：r, reference-class

为一个字段分配一个值，我怎样才能使其他字段发生变化。

考虑以下`ReferenceClass`对象：

```
C<-setRefClass("C", 
      fields=list(a="numeric",b="numeric")
      , methods=list(
      seta = function(x){
      a<<-x
      b<<-x+10
      cat("The change took place!")
      }
      ) # end of the methods list
      ) # end of the class 
```

现在创建类的实例

```
c<-C$new() 
```

这个命令

```
c$seta(10) 
```

将导致 c$a 为 10，c$b 为 20。

所以它确实有效，但是，**我想通过命令来实现这个结果**

```
c$a<-10 
```

（即之后我希望 c$b 等于 20，如 seta() 函数逻辑中的类中定义的那样）
我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T19:06:16.813

我认为您正在寻找*访问器函数*，这些函数在`?ReferenceClasses`. 这应该有效：

```
C<-setRefClass("C", 
    fields=list(
        a=function(v) {
              if (missing(v)) return(x)
              assign('x',v,.self)                    
              b<<-v+10
              cat ('The change took place!')
            }
       ,b="numeric"
    )
    ,methods=list(
        initialize=function(...)  {
             assign('x',numeric(),.self)
            .self$initFields(...)
        } 
    )
)

c<-C$new()
c$a
# numeric(0)
c$a<-3
# The change took place!
c$b
# 13
c$a
# 3 
```

`x`它确实有一个新值现在在环境（类对象）中的副作用`c`，但它对用户是“隐藏的”，因为仅打印`c`不会`x`作为字段列出。

# wordpress - .htaccess 重定向 ~ [fake-subdomain.domain.com/*] 到 [domain.com/*]

> ID：11353139
> 
> 赞同：1
> 
> 时间：2012-07-05T21:58:44.863
> 
> 标签：wordpress, .htaccess, redirect, dns, subdomain

我一直在寻找这个好几个小时，但我不知道如何做到这一点。我需要进行以下 301 永久重定向：

当人们访问 [http://web.domain.com.br/something/](http://web.domain.com.br/something/)

他们应该被重定向到 [http://domain.com.br/something/](http://domain.com.br/something/)

在哪里（重要！），**/something/**不是真正的目录，它是来自 wordpress 多站点安装的子博客。根 .htaccess 文件还有另一条规则已经生效。他们是：

```
    重写引擎开启
    RewriteBase /
    重写规则 ^index\.php$ - [L]

    # 上传的文件
    RewriteRule ^([_0-9a-zA-Z-]+/)?files/(.+) wp-includes/ms-files.php?file=$2 [L]

    # 添加一个斜杠到 /wp-admin
    重写规则 ^([_0-9a-zA-Z-]+/)?wp-admin$ $1wp-admin/ [R=301,L]

    RewriteCond %{REQUEST_FILENAME} -f [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    重写规则 ^ - [L]
    RewriteRule ^[_0-9a-zA-Z-]+/(wp-(content|admin|includes).*) $1 [L]
    重写规则 ^[_0-9a-zA-Z-]+/(.*\.php)$ $1 [L]
    重写规则。索引.php [L]

```

我的域实际上已经有某种重定向，在我的视线之外，由控制面板上的某个人创建。他们确实创建了以下内容：

当您访问： **http ://web.domain.com.br/**

你去： **http ://domain.com.br/**

对于家庭部分，这没关系。但每当我尝试类似： **http ://web.domain.com.br/opaopa/**

我被重定向到： **http ://domain.com.br/**

并且，如果我在我的根目录中创建 /opaopa/ 目录，则重定向会将我带到那里......但是，我无法为我的 wordpress 子站点创建真正的目录，因为 apache 优先考虑它们，而不是加载“魔法"的 wordpress 多站点网络。

对不起，如果这听起来令人困惑......英语不是我的自然语言。

非常感谢您的关注。问候，G。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T15:10:18.450

```
RewriteCond %{HTTP_HOST} !^domain\.com\.br$ [NC]
RewriteRule (.*) http://domain.com.br/$1 [L,R=301] 
```

在之后添加这个`RewriteBase ...`（所以在所有其他重写规则之前）

# java - 使用 JGraphX 创建动态边缘

> ID：11353140
> 
> 赞同：1
> 
> 时间：2012-07-05T21:58:45.087
> 
> 标签：java

我正在使用 JGraphX 做一个活动图编辑器。用户应执行以下步骤以在两个节点（顶点）之间创建边：

1.  他点击一个按钮（说'我现在将创建一个边缘'），然后

2.  单击所选的源节点，

3.  用鼠标拖动，

4.  当鼠标到达要绑定的第二个节点时释放鼠标。

我知道它是通过 MouseClicked 和 MouseDragged MouseReleased 完成的，但我还没有找到正确的解决方案。

感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T03:23:19.403

`BasicGraphEditor`与 JGraphX 捆绑在`examples`包下的示例演示了此类用例的实现。`mxConnectionHandler`有关详细信息，请参阅API 参考。

# html - RoR 站点中用户提交的内部链接

> ID：11353144
> 
> 赞同：2
> 
> 时间：2012-07-05T21:59:14.183
> 
> 标签：html, ruby-on-rails, ruby

我们正在开发一个 Rails 应用程序，其中一类用户编辑和创建文章。有时这些文章包含指向网站上其他文章的链接。执行以下操作的最佳方法是什么？

*   将链接存储在数据库中
*   渲染页面上的链接

目前我们有与实际域名相关的静态链接——这显然是必须的。做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:20:15.853

如果您使用低于 3.1 的 rails 版本，您可以使用 auto_link [http://apidock.com/rails/ActionView/Helpers/TextHelper/auto_link](http://apidock.com/rails/ActionView/Helpers/TextHelper/auto_link)

或者，如果您使用的是 rails 3.1 或更高版本，则有一个 gem [http://rubygems.org/gems/rails_autolink](http://rubygems.org/gems/rails_autolink)

您可以将文本作为参数传递给 auto_link。

# python - 想要使用 Tkinter 按钮进行字符串输入，然后关闭按钮窗口并继续

> ID：11353147
> 
> 赞同：0
> 
> 时间：2012-07-05T21:59:21.927
> 
> 标签：python, button, window, tkinter

这似乎应该非常容易做到，但我正在努力。编程不是我的主要背景，所以我缺乏很多基础知识，但我正在努力学习。

我正在处理的问题是我想使用 Tkinter 按钮来显示按钮列表（目前只有一个），当按下其中一个按钮时，它将所述按钮中的文本输入到字符串变量中，关闭按钮窗口，然后继续代码。

这是我为这部分准备的内容：

```
 root = tk.Tk()

    def data(name):
       global query 
       query = name

    B = tk.Button(root, text ='LogID', command = data('LogID'))

    B.pack()
    root.mainloop()

    print query 
```

如果这看起来可能有点混乱或草率，那是因为它是。

本节之前有代码，本节之后有代码。我希望在按下按钮时关闭窗口（root.destroy（））并让代码从“查询”打印文本，所以我知道它已将值传递给它。

当我运行它时，它挂在 root.mainloop() 部分，或者似乎挂起。老实说，我并不完全理解代码中的作用，我只知道它需要它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:27:25.370

因为我看到您已经在使用全局变量，
所以我将通过一个示例来回答您的问题，说明
如何使您的应用程序成为 Tkinter.Tk（python 3 中的 tkinter.Tk）的子类。

```
import Tkinter as tk

class Application(tk.Tk):

    def __init__(self):
        tk.Tk.__init__(self)
        self.title('Hello world!')
        self.data = None

        self.helloButton = tk.Button(self, width=12, text='Hello',
                    command=lambda x='hi': self.say_hi(x))
        self.helloButton.grid(row=0, column=1, padx=8, pady=8)

    def say_hi(self, x):
        self.data = x
        self.withdraw()
        self.secondWin = tk.Toplevel(self)
        self.secondWin.grid()
        self.output = tk.Entry(self.secondWin)
        self.output.insert(0, x)
        self.output.grid()
        self.quitButton = tk.Button(self.secondWin, text='Quit', bg='tan',
                                    command=self.close_app)
        self.quitButton.grid()

    def close_app(self):
        self.destroy()

app = Application()
app.mainloop() 
```

变量 self.data 可以被类的任何方法使用；
因此，您不必使用 global 关键字。
让您的`mainloop`tkinter 应用程序“运行”并处理事件。
请注意，我没有破坏第一个窗口，而是使用该`withdraw`方法将其隐藏。
这只是您可能感兴趣的另一个选项。您可以使用`deiconify`它使其可见（更多信息[在这里](http://infohost.nmt.edu/tcc/help/pubs/tkinter/toplevel.html)）。第二个窗口是 Toplevel 小部件，您可以使用它来创建辅助窗口。

我写了一个更具教育意义的例子，可以在[这里](https://stackoverflow.com/a/10039671/1217270)找到。

# model-view-controller - 使用业务层时定义（视图）模型的最佳实践

> ID：11353150
> 
> 赞同：2
> 
> 时间：2012-07-05T21:59:33.110
> 
> 标签：model-view-controller, view, model, viewmodel, business-logic

项目设置：

MVC 项目，依赖于存储库模式来处理数据的业务层。

问题：

有时您希望业务层返回不简单的数据`List<entitytype>`。在这种情况下，您的强类型视图应该使用业务层方法的返回值（某些业务模型），还是应该始终使用 mvc 模型文件夹中的视图模型。

什么是最佳实践？如果我使用 TDD 来定义我的业务方法，我的终点将是一个模型，它实现了视图可以用来显示数据的要求，因此控制器可以简单地将其传递给视图。这很糟糕，我真的应该在 mvc 项目中使用模型作为控制器和视图之间的接口吗？

无论如何，我的 MVC 项目依赖于业务层。使用业务层的返回值模型将数据从我的控制器传递到我的视图是不是很糟糕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:16:53.643

遵循和节省时间的最佳做法是使用**AutoMapper**，这将为您节省大量时间。好的帖子是 -[在 ASP.NET MVC 应用程序中查看模型模式和 AutoMapper](http://weblogs.asp.net/shijuvarghese/archive/2010/02/01/view-model-pattern-and-automapper-in-asp-net-mvc-applications.aspx)

但是，有一些好的做法可以遵循：

*   [ASP.NET MVC 视图模型模式](https://stackoverflow.com/q/1361092/1437962)
*   [ASP.NET MVC 视图模型模式，另一个示例](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)
*   [ViewModel 最佳实践](https://stackoverflow.com/q/664205/1437962)
*   [使用 ViewModel 在 ASP.NET MVC 应用程序中管理数据和组织代码](http://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp.net-mvc-applications)

# asp.net-mvc - 测量调用 ASP.NET MVC 控制器操作的时间

> ID：11353155
> 
> 赞同：25
> 
> 时间：2012-07-05T22:00:16.183
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-5

MVC 4 应用程序的一些用户正在经历零星的缓慢。大概不是每个用户每次遇到这个问题时都会报告这个问题。

我的想法是测量每个控制器操作所花费的时间，并记录超过规定时间的操作调用的详细信息，以便于进一步分析（以排除或排除服务器/代码问题）。

有没有一种方便的方法来执行此类测量，这样我就可以避免向每个操作添加检测代码？我目前没有在这个项目中使用 IOC，并且会犹豫引入它只是为了解决这个问题。

有没有更好的方法来解决这类问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-07-05T22:12:36.997

你能创建一个全局动作过滤器吗？像这样的东西：

```
public class PerformanceTestFilter : IActionFilter
{
    private Stopwatch stopWatch = new Stopwatch();

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        stopWatch.Reset();
        stopWatch.Start();
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        stopWatch.Stop();
        var executionTime = stopWatch.ElapsedMilliseconds;
        // Do something with the executionTime
    }
} 
```

然后`GlobalFilters`在 `Application_Start()' 中将其添加到您的集合中

```
GlobalFilters.Filters.Add(new PerformanceTestFilter()); 
```

您可以从参数中获取有关正在测试的控制器的详细信息`filterContext`。

**更新**

将过滤器`GlobalFilters`直接添加到集合中将为所有操作创建一个过滤器实例。当然，这不适用于定时并发请求。要为每个操作创建一个新实例，请创建一个过滤器提供程序：

```
public class PerformanceTestFilterProvider : IFilterProvider
{
    public IEnumerable<Filter> GetFilters(ControllerContext controllerContext, ActionDescriptor actionDescriptor)
    {
        return new[] {new Filter(new PerformanceTestFilter(), FilterScope.Global, 0)};
    }
} 
```

然后不是直接添加过滤器，而是在以下位置添加过滤器提供程序`Application_Start()`：

```
FilterProviders.Providers.Add(new PerformanceTestFilterProvider()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-01-19T17:11:40.123

我通常将这个简单的代码添加到布局视图的底部：

```
<!-- Page generated in @((DateTime.UtcNow - HttpContext.Current.Timestamp.ToUniversalTime()).TotalSeconds.ToString("F4")) s --> 
```

输出类似：

```
<!-- Page generated in 0.4399 s --> 
```

这开始测量`HttpContext`创建的时间（根据[文档](https://msdn.microsoft.com/en-us/library/system.web.httpcontext.timestamp(v=vs.110).aspx)），并在写入输出之前停止，因此它应该非常准确。

它可能不适用于所有用例（如果您想测量子操作，或忽略 MVC 操作之外的时间等），但它很容易粘贴到视图中。

对于更高级的诊断，我曾经使用[Glimpse](http://getglimpse.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-26T21:49:59.987

尝试[ASP.NET 4.5 页面检测](http://weblogs.asp.net/imranbaloch/page-instrumentation-in-asp-net-4-5)

它检测页面渲染：您的应用程序的时间可能花费在控制器中，但有很多时间花费在视图渲染中。特别是如果你有很多部分和 html 助手。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T16:59:12.947

更新 - 使用 Install-Package StopWatch 安装我的 Stopwatch NuGet 包，请参阅[Profile and Time your ASP.NET MVC app all way to Azure](http://blogs.msdn.com/b/webdev/archive/2014/07/29/profile-and-time-your-asp-net-mvc-app-all-the-way-to-azure.aspx)

请参阅我的教程[在 ASP.NET MVC 4 中使用异步方法，](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4) 它有一个全局操作过滤器计时器。您可以使用 ELMAH 来记录数据。我的示例 我的示例[http://msdn.microsoft.com/en-us/library/gg416513(v=vs.98)](http://msdn.microsoft.com/en-us/library/gg416513(v=vs.98))也具有相同的定时过滤器并且更简单，但它是 Razor 之前的版本。

查找秒表属性以启用计时。

```
public class FilterConfig
{
    public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new HandleErrorAttribute());
        filters.Add(new UseStopwatchAttribute());
    }
} 
```

# nginx - 将 RewriteRule 转换为 nginx 以将 htm 文件映射到 php 文件

> ID：11353161
> 
> 赞同：0
> 
> 时间：2012-07-05T22:00:53.023
> 
> 标签：nginx

如何将以下 Apache 规则转换为我可以在 nginx conf 文件中使用的规则？

```
RewriteRule   ^/somefolder/somepage.htm   /somefolder/somepage.php?%{QUERY_STRING} [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:43:45.860

这对 nginx 来说非常简单：

把它放在*服务器*部分的任何地方：

```
rewrite ^/somefolde/somepage.htm /somefolder/somepage.php last; 
```

# java - MySQL JDBC 连接池最大大小

> ID：11353165
> 
> 赞同：2
> 
> 时间：2012-07-05T22:01:21.127
> 
> 标签：java, mysql, connection-pooling

我正在用 Java 构建一个套接字服务器。每个新的套接字连接都会启动一个新线程，该线程需要连接到 MySQL 服务器。

目前，我为每个线程都有一个新连接，但想更改为连接池，以便更有效地回收连接。

但是，此池的默认大小似乎是 5 个连接。我目前正在处理 100 多个客户端，而 5 个连接还不够。我发现的所有文档都提到了不同的服务器（Tomcat、JBoss、GlassFish 等）以及如何将值放在它们的 XML 配置文件中。

由于我没有使用任何这些，我找不到如何设置`max pool size`值。我还想避免这个项目的第三方库（例如 Apache Commons）。

Java 的 MySQL 连接器是一个例外（可在此处找到：http: [//dev.mysql.com/usingmysql/java/](http://dev.mysql.com/usingmysql/java/)）

我发现的唯一可能的参考是`env.put(JNDIPooledSource.MAX_POOL_SIZE, 500);`，但我不认为这是正确的。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:40:08.113

MySQL 连接器/J 不附带 Pooled DataSource 实现。您将需要使用 3rd 方软件，或使用容器附带的软件。我相信tomcat开箱即用地使用commons-dbcp。

c3p0 是另一种选项，它具有内置池的可直接构建的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-02T04:25:09.947

对于选择连接池库，我的建议是

**光 > 德鲁伊 > UCP > c3p0 > DBCP**

它基于我的测试，在我的本地测试环境中（docker/pool minSize=1，maxSize=8 中的 4GB mac/mysql），hikari 可以服务 1024 个线程 x 1024 次获得连接，每个线程完成的平均时间是 1 或 200 万秒，而 c3p0 只能服务 256 个线程 x 1024 次，每个线程的平均时间已经是 2100 万秒。（512 个线程失败）。

# javascript - Javascript if 语句不会触发

> ID：11353174
> 
> 赞同：-2
> 
> 时间：2012-07-05T22:02:35.347
> 
> 标签：javascript, html, conditional-statements

我一直在构建这个站点，它将根据搜索参数运行一个 API。我使用 if 语句来确定下拉值。但由于某种原因，if 语句没有运行。请问我做错了什么吗？这是代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript"></script>
<title>Testing</title>
</head>
<body>
<form name="bestbuysearch">
<select name="selection" onchange="setvalue()">
<option value="default">Select Category(Optional)</option>
<option value="abcat0100000">TV & Home Theater</option>
<option value="abcat0207000">Musical Instruments</option>
<option value="abcat0300000">Car, Marine & GPS</option>
<option value="abcat0400000">Cameras & Camcorders</option>
<option value="abcat0500000">Computers & Tablets</option>
<option value="abcat0600000">Movies & Music</option>
<option value="abcat0700000">Video Games</option>
<option value="abcat0800000">Mobile Phones</option>
<option value="abcat0900000">Appliances</option>
<option value="pcmcat142300050026">Outlet Center</option>
<option value="pcmcat242800050021">Health, Fitness & Sports</option>
<option value="pcmcat245100050028">Office</option>
<option value="pcmcat248700050021">Home</option>

</select>
<input type='text' id="item" placeholder='Search Here!' style='margin-top: 10px' size="70" maxlength=150 width="100px" />       
<input type='submit' value="Search" onclick="getstring(document.getElementById('item').value)"/> 
</form>

<script>
function setvalue(){
dropval=document.getElementsByName("selection")[0];
maindropval=dropval.value;
} 
function getstring(x){
    //link="http://api.remix.bestbuy.com/v1/products(name="+x+"*)?show=sku,name,regularPrice&apiKey=ydpyq9h9cmpmzaakbawv9mzk";
    //link2= "http://api.remix.bestbuy.com/v1/products(name=ipad|shortDescription=32gb*)?show=sku,name,shortDescription&apiKey=ydpyq9h9cmpmzaakbawv9mzk";
    link1="http://api.remix.bestbuy.com/v1/products(name="+x+"*)?show=sku,name,regularPrice,shortDescription&apiKey=ydpyq9h9cmpmzaakbawv9mzk";  
    link2="http://api.remix.bestbuy.com/v1/products(categoryPath.id="+maindropval+"&name="+x+"*)?show=sku,name,shortDescription,regularPrice,&apiKey=ydpyq9h9cmpmzaakbawv9mzk";
    if(maindropval=='default'){ 
    alert("worked");
        window.open(link1);}    
    else{
        window.open(link2);}

}
function getresult(value){
link="http://api.remix.bestbuy.com/v1/products(name="+x+"*)?show=sku,name,rating,regularPrice&apiKey=ydpyq9h9cmpmzaakbawv9mzk";
alert("step 2 completed");
}
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:13:31.587

它不起作用的原因是该变量`maindropval`仅在您更改下拉列表中的选择时设置。

要获取`"default"`变量中的值，您必须选择下拉列表中第一项以外的其他内容，然后再次更改回第一项。

设置变量的初始值：

```
var maindropval = "default"; 
```

或在页面加载后运行该函数以设置值：

```
window.onload = setvalue; 
```

（如果浏览器记住先前选择的表单值，则第二种解决方案更可取。在这种情况下，将从下拉列表的记住值设置变量。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:13:47.967

迈克和我有同样的想法。

这是一个[小提琴](http://jsfiddle.net/DVRfC/)......你的问题是maindropval的范围。

# github - 将 github zip 下载与 repo 同步合并

> ID：11353176
> 
> 赞同：3
> 
> 时间：2012-07-05T22:02:43.343
> 
> 标签：github, repository

我试图下载 cm9 源，但它似乎需要很长时间，并且会不断地重新同步。

Github 以 zip 文件的形式提供 repos，可以使用任何下载加速器下载和恢复。有什么方法可以将这些 zip 解压缩到我的 repo 文件夹中，并使 repo 命令认为它们已同步？

我无法继续使用 repo 命令的方法的原因是，每次有阵风时我的连接都会中断，并且 repo 命令在那之后就冻结了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T07:28:03.193

你可以：

1.  下载 GitHub 提出的 zip/tarball
2.  `git clone --bare`GitHub 存储库（因此无需结帐：连接不稳定*可能会更容易）*
3.  将克隆创建的`xxx.git`目录（将其重命名为' `.git`'）移动到步骤 1 中未压缩的 repo 内容中。
4.  `.git`删除移动目录中的裸属性：`git config --bool core.bare false`

如果 a`clone --bare`不起作用，那么这种方法将没有用。
并且可重启的克隆（[在 2009 年被考虑](http://git.661346.n2.nabble.com/Continue-git-clone-after-interruption-td3458217.html)，甚至[正式成为 SoC](https://git.wiki.kernel.org/index.php/SoC2009Ideas#Restartable_Clone)）还不是现实。

# java - 录制屏幕 Java 磁盘速度

> ID：11353180
> 
> 赞同：3
> 
> 时间：2012-07-05T22:02:58.377
> 
> 标签：java, performance, disk, frame-rate, awtrobot

我正在开发一个 Java 应用程序来记录屏幕。我正在使用机器人截取几张屏幕截图，将它们保存到临时文件夹中，然后使用 JpegImagesToMovie.java 将它们构建到 QuickTime 电影文件中。

我遇到的问题是，尽管我的脚本以 20fps 运行，但我只能达到 5fps 左右。我已将此跟踪到磁盘速度，因为将图像保存到磁盘需要很长时间，这会阻碍脚本的其余部分。

接下来，我修改了脚本以将图像存储在 BufferedImages 数组中，然后在录制停止后将它们写入磁盘，从而修复帧速率，但是在重新编码时，Java 将很快耗尽内存（录制几秒钟后） .

有没有人对此有任何想法或经验。我能想到的一个解决方案是，是否有一种方法可以增加 JPEG 图像的压缩率，但我不确定如何做到这一点。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T21:52:25.647

您可能要考虑的一种选择是在多个线程上进行处理。一个线程可以专门用于截屏，许多其他线程可以写入磁盘。由于写入磁盘不是 CPU 密集型操作，因此您可以让它们中的许多同时运行，每个都写入不同的文件。以下程序在我的机器上运行良好，堆大小为 512M：

```
import javax.imageio.ImageIO;
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.Date;
import java.util.Timer;
import java.util.TimerTask;
import java.util.concurrent.*;
import java.util.concurrent.atomic.AtomicInteger;

public class ImageWritingMain
{
  public static void main(String[] args) throws Exception
  {
    // a queue
    final BlockingQueue<BufferedImage> queue = 
        new LinkedBlockingQueue<BufferedImage>();

    // schedule a thread to take 20 images per second and put them in 
    // the queue
    int fps = 20;
    final ScreenShotRecorder recorder = 
        new ScreenShotRecorder(new Robot(), queue);
    Timer timer = new Timer();
    timer.scheduleAtFixedRate(recorder, 0, (1000L/fps));

    // make a directory to hold the screenshot images
    String id = new Date().toString().replace(' ', '-').replace(':', '-');
    File imageDir = new File("images-" + id);
    imageDir.mkdirs();

    // start 10 threads, and each thread reads from the queue and 
    // writes the image to a file
    int nWriterThreads = 10;
    ExecutorService threadPool = Executors.newFixedThreadPool(nWriterThreads);
    for (int i = 0; i < nWriterThreads; i++)
    {
      ImageWriter task = new ImageWriter(queue, imageDir);
      threadPool.submit(task);
    }
    System.out.println("Started all threads ..");

    // wait as long as you want the program to run (1 minute, for example) ...
    Thread.sleep(60 * 1000L);
    // .. and shutdown the threads
    System.out.println("Shutting down all threads");
    threadPool.shutdownNow();
    timer.cancel();

    if (! queue.isEmpty())
    {
      System.out.println("Writing " + queue.size() + " remaining images");
      // write the remaining images to disk in the main thread
      ImageWriter writer = new ImageWriter(queue, imageDir);
      BufferedImage img = null;
      while ((img = queue.poll()) != null)
      {
        writer.writeImageToFile(img);
      }
    }
  }
}

class ScreenShotRecorder extends TimerTask
{
  private static final Rectangle screenRect = 
      new Rectangle(Toolkit.getDefaultToolkit().getScreenSize());
  private static final AtomicInteger counter = new AtomicInteger();
  private final Robot robot;
  private final BlockingQueue<BufferedImage> imageQueue;

  ScreenShotRecorder(Robot robot, BlockingQueue<BufferedImage> imageQueue)
  {
    this.robot = robot;
    this.imageQueue = imageQueue;
  }

  @Override
  public void run()
  {
    try
    {
      BufferedImage image = robot.createScreenCapture(screenRect);
      imageQueue.put(image);
      System.out.println(Thread.currentThread() + 
          ": Took screenshot #" + counter.incrementAndGet());
    }
    catch (InterruptedException e)
    {
      System.out.println("Finishing execution of " + Thread.currentThread());
      return;
    }
    catch (Exception e)
    {
      e.printStackTrace();
    }
  }
}

class ImageWriter implements Runnable
{
  private static final AtomicInteger counter = new AtomicInteger();
  private final BlockingQueue<BufferedImage> imageQueue;
  private final File dir;

  ImageWriter(BlockingQueue<BufferedImage> imageQueue, File dir)
  {
    this.imageQueue = imageQueue;
    this.dir = dir;
  }

  @Override
  public void run()
  {
    while (true)
    {
      try
      {
        BufferedImage image = imageQueue.take();
        writeImageToFile(image);
      }
      catch (InterruptedException e)
      {
        System.out.println("Finishing execution of " + Thread.currentThread());
        return;
      }
      catch (Exception e)
      {
        e.printStackTrace();
      }
    }
  }

  public void writeImageToFile(BufferedImage image) throws IOException
  {
    File file = new File(dir, "screenshot-" + counter.incrementAndGet());
    ImageIO.write(image, "JPG", file);
    System.out.println(Thread.currentThread() + 
        ": Wrote " + file.getCanonicalPath());
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:14:23.617

毛毛虫说的。也许您可以以某种方式尝试降低 JPEGS 的分辨率以提供更多内存，但您可能不得不使用视频编解码器。您还可以尝试创建一个处理程序以仅在您移动鼠标时进行记录，或者如果您真的打算以 JPEG 格式记录，请键入。

# cruisecontrol.net - 在计划触发器中使用属性值 - Cruisecontrol.Net

> ID：11353181
> 
> 赞同：0
> 
> 时间：2012-07-05T22:02:58.693
> 
> 标签：cruisecontrol.net, ccnet-config

我正在设置 CCNet 以在特定时间间隔构建我们的项目。

当前设置是在特定时间全天进行集成构建，并在集成构建之间执行部署构建。我只想使用一个项目来跟踪修改。

下面是我包含在 ccnet.config 中的示例 xml 文件

```
<triggers>
  <parameterTrigger>
    <trigger
      type ="scheduleTrigger"
      time="15:00"
      buildCondition="IfModificationExists"> 
      <weekDays>
        <weekDay>Monday</weekDay>
        <weekDay>Tuesday</weekDay>
        <weekDay>Wednesday</weekDay>
        <weekDay>Thursday</weekDay>
        <weekDay>Friday</weekDay>
      </weekDays>
    </trigger>
    <Parameters>
      <namedValue
        name="BuildRelease"
        value="fullCI-without-deployment" />
    </Parameters>
  </parameterTrigger>
</triggers> 
```

......

```
<tasks>
  <nant>
    <executable>D:\source\Build\nant-0.85\bin\Nant.exe</executable>
    <buildFile>D:\source\Build\nantfile.build</buildFile>
    <nologo>true</nologo>
    <targetList>
      <target>"$[BuildRelease]"</target>
    </targetList>
    <buildTimeoutSeconds>4500</buildTimeoutSeconds>
  </nant>
  <modificationHistory onlyLogWhenChangesFound ="true" />
</tasks> 
```

由于某种原因，这似乎不起作用。可能我应该以不同的方式指定属性吗？如您所见，我想为部署构建添加另一个具有不同属性值的 scheduleTrigger。

感谢您的帮助桑吉夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-17T15:51:21.553

`parameters`当使用小`p`而不是大写时，我得到了预期的结果。请尝试……</p>

# c++ - Metro C++/XAML ListView 捕捉项目

> ID：11353182
> 
> 赞同：0
> 
> 时间：2012-07-05T22:03:05.027
> 
> 标签：c++, xaml, windows-runtime, windows-store-apps, winrt-xaml

我有一个看起来像这样的 ListView：

```
<ListView x:Name="MyList" ItemsSource="{Binding Path=MyItems}">
  <ListView.ItemTemplate>
    <DataTemplate>
      <StackPanel>
        <TextBlock x:Name="Title" Text="{Binding Path=TitleCategory}"/>
        <TextBlock x:Name="Body" Text="{Binding Path=BodySummary}" Style="{StaticResource BodyTextStyle}"/>
      </StackPanel>
    </DataTemplate>
  </ListView.ItemTemplate>
</ListView> 
```

我应用于该 TextBlock 的 BodyTextStyle 将宽度设置为 600 像素，并且在 FullScreenLandscape 中一切正常。但是，当我切换到 SnappedView 时，由于屏幕宽度减小，文本会被剪掉。通常我会这样设置宽度：

```
<ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Width)" Storyboard.TargetName="Body">
  <DiscreteObjectKeyFrame KeyTime="0" Value="300"/>
</ObjectAnimationUsingKeyFrames> 
```

但这会产生运行时崩溃，我假设是因为我引用的项目位于 ItemTemplate 中。当我进入 SnappedView 时，更改 ListView 中每个项目的宽度的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:51:37.223

从我在示例和模板中看到的内容来看，推荐的方法似乎是为不同的视图状态提供一个单独的 ListView 并尝试通过尝试做类似于你正在做的事情来优化它并且不得不与很多我决定放弃并做模板所做的事情。省去麻烦，为快照视图使用单独的 ListView，并在视图状态更改时简单地切换两个 ListView 的可见性。

另外我会假设您是对的，问题来自名称范围问题，模板具有单独的名称范围。

# c - gtk+ 以编程方式在包含 vte 终端的 scrolled_window 中向后滚动一行

> ID：11353184
> 
> 赞同：0
> 
> 时间：2012-07-05T22:03:11.167
> 
> 标签：c, gtk, scrolledwindow

我正在尝试设置按键功能以分配 shift+up 组合键以在 vte 终端窗口中向后滚动一行。这是我到目前为止所拥有的：

```
case GDK_Up: 
    if (event -> state & GDK_SHIFT_MASK)
    {
      GtkAdjustment *verticalAdjust;
      gdouble lower = 0;
      gdouble upper = 0;
      gdouble page_size = 0;
      gdouble step_size = 0.1;

      verticalAdjust = gtk_scrolled_window_get_vadjustment(GTK_SCROLLED_WINDOW(scrollwin[0]));
      lower = gtk_adjustment_get_lower(verticalAdjust);
      upper = gtk_adjustment_get_upper(verticalAdjust);
      page_size = gtk_adjustment_get_page_size(verticalAdjust);
      step_size = ((upper - page_size) - lower)/page_size;

      gtk_adjustment_set_value (verticalAdjust, step_size);

      gtk_scrolled_window_set_vadjustment (GTK_SCROLLED_WINDOW(scrollwin[0]), verticalAdjust);
      printf("vertAdj: %f, lower: %f, upper: %f, pg_size: %f, step_size: %f\n", gtk_adjustment_get_value(verticalAdjust), lower, upper, page_size, step_size);

      return TRUE;

    } 
```

我在文档中阅读`gtk_adjustment_set_value ()`：

请注意，对于在 GtkScrollbar 中使用的调整，允许值的有效范围从调整->下限到调整->上限-调整->页面大小。

它没有给出任何指导`gtk_scrolled_window_set_vadjustment`。

所以我想也许这个公式会给我一行的滚动步长：

```
 `step_size = ((upper - page_size) - lower)/page_size;` 
```

我错了。我尝试了一个等于 GtkAdjust 结构集的 step_increment 的步长：

```
 step_size = gtk_adjustment_get_step_increment(verticalAdjust); 
```

这只是让 step_size 在大多数情况下保持在 1.0，并且当上限达到 ~60 时向后滚动太多。

我尝试了 0.1、1、10 的 step_size，但我似乎无法理解整个调整的工作原理。

我刚刚打开了一个新的终端窗口并输入了 dmesg 然后一个 shift+up。我通过上面 printf 语句创建的输出验证了 step_size 是 1.0，upper 是 420，滚动窗口一直滚动到顶部。某些东西工作不正常，或者我没有得到任何东西。

任何指导将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:22:50.467

正如 ergosys 指出的那样，解决方案比我以前想象的要简单得多。这是我用来向上滚动的两行：

```
 vertAdj = gtk_scrolled_window_get_vadjustment(GTK_SCROLLED_WINDOW(scrollwin[page]));
    gtk_adjustment_set_value (vertAdj,gtk_adjustment_get_value(vertAdj)-1); 
```

并向下滚动：

```
 vertAdj = gtk_scrolled_window_get_vadjustment(GTK_SCROLLED_WINDOW(scrollwin[page]));
    adjValue = gtk_adjustment_get_value(vertAdj);

    upper = gtk_adjustment_get_upper(vertAdj);
    page_size = gtk_adjustment_get_page_size(vertAdj);

    if (adjValue < upper - page_size)
    {

      gtk_adjustment_set_value (vertAdj,gtk_adjustment_get_value(vertAdj)+1);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:59:35.113

啊，灯亮了！

简单地回滚你需要的一行：

```
 adjust = upper - page_size - 1;
    gtk_adjustment_set_value (verticalAdjust, adjust);
    gtk_scrolled_window_set_vadjustment (GTK_SCROLLED_WINDOW(scrollwin[0]), verticalAdjust); 
```

要回滚另一行，您需要：

```
 adjust = upper - page_size - 2;
    gtk_adjustment_set_value (verticalAdjust, adjust);
    gtk_scrolled_window_set_vadjustment (GTK_SCROLLED_WINDOW(scrollwin[0]), verticalAdjust); 
```

所以你需要在迭代之间存储一些值。据说 GtkAdjustment 应该能够帮助解决这个问题，但我永远无法弄清楚如何。或者，也许我只是误解了文档。无论如何，我只是决定用全局变量来做。

# vba - 如何在excel中使用单元格存储额外的（隐藏）信息

> ID：11353185
> 
> 赞同：6
> 
> 时间：2012-07-05T22:03:20.697
> 
> 标签：vba, excel, ms-office

我正在编写一个工作应用程序，它将一大堆不同的电子表格编译成特定工作站点的报告。我有很多工作表，每个工作表都有一大堆指标。每张工作表上的每个指标可能需要从不同的工作表编译，并且可以通过查找关键字在该工作表上找到。

另一个问题是这些电子表格上的一些措辞会定期更改以更好地反映行业标准，因此我不能只硬连线关键字来搜索。

因此，我正在寻找一种方法来存储元数据以及可以对用户隐藏的单元格，这样他们就不会意外删除它，但可以从 VBA 轻松访问，以便在需要时进行更改（我会编写一个程序来执行此操作如果需要的话）。

研究表明我可以使用注释（尽管我不确定我是否可以从 vba 访问这些，并且我希望它们被隐藏）或隐藏的工作表来反映我使用的每个工作表以及给定单元格中的信息工作表。我可能会选择后者，但这并不完美。

还有其他想法吗？

为清楚起见进行编辑：我需要一个与单个单元格关联的字符串，它将指出如何找到适当的数据。例如：“查看工作簿 1 -%- 搜索此文本”。

@Andrew 提到的 VeryHidden 属性可能是最好的方法，因为我认为没有办法将变量附加到单元格。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T00:43:33.220

我最喜欢的技巧之一是使用该`N()`功能。

`N()`将非数字转换为数字，但如果您输入文本，它始终返回 0。当我需要为自己添加单元格注释时，我将添加如下内容：

```
=..... +N("This is to calculate blah blah blah") 
```

只要将 0 添加到该值不会受到伤害，它就可以很好地工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T22:58:47.380

我过去在需要为应用程序存储数据但用户不应访问的数据时所做的是使用可见性设置为`VeryHidden`.

还可以选择创建一个 Excel 加载项 (XLA)，它可以独立于用户数据，因此可以在需要更改规则时单独更新 - 尽管可以在“更新”工作簿中使用 VBA 来替换“数据”工作簿中的整个 VBA 模块。我将不得不看看我是否能找到我为此编写的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-07-24T06:00:06.237

您可以对 Text 使用类似的技巧。

您可以使用：

```
="Display Value" & left("This is to calculate...",0) 
```

或者：

```
=CHOOSE(1,"Display Value","This is to calculate...") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-07-03T06:10:48.157

这是一个非常有趣的问题。感谢科洛菲！那么使用单元格的 ID 呢？

以乔纳斯·格莱桑的风格：

```
Public Sub WriteHiddenData(ByVal Cell As Range, ByVal Data As String)

    Cell.ID = """@" & Data & """"

End Sub

Public Function ReadHiddenData(ByVal Cell As Range) As String

    Dim Data As String
    Data = Cell.ID

    ' Check that the data is on your specific format
    Dim L%
    L = Len(Data)
    If L < 3 Then Exit Function
    If Left$(Data, 2) <> """@" Then Exit Function
    If Right$(Data, 1) <> """" Then Exit Function

    ReadHiddenData = Mid$(Data, 3, L - 3)

End Function 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-03T15:22:46.743

我遇到了这个确切的问题，并根据需要找到了几个可能的解决方案。

## 将数据保存在`Hyperlink`

您可以将数据存储在超链接中，例如链接本身或链接的工具提示中。这种方法的优点是数据与单元本身相关联，而不是与地址相关联。这意味着如果有人对单元格进行排序，则隐藏数据会随之而来。如果您愿意，您也可以捕获 HyperlinkClick 事件，但是这些超链接都没有到达任何地方，因此它可能无关紧要。

### 使用`ScreenTip`

```
' Write hidden data to a cell
Public Sub WriteData(ByVal Cell As Range, ByVal Data As String)

    Cell.Hyperlinks.Delete
    Cell.Hyperlinks.Add Cell, Address:="#", ScreenTip:=Data

    ' Set standard formatting
    With Cell.Font
        .Underline = xlUnderlineStyleNone
        .ColorIndex = xlAutomatic
    End With

End Sub

' Read hidden data from a cell
Public Function ReadData(ByVal Cell As Range) As String

    If Not CellContainsData(Cell) Then Exit Function

    ReadData = Cell.Hyperlinks(1).ScreenTip

End Function

Private Function CellContainsData(ByVal Cell As Range) As Boolean

    CellContainsData = Cell.Hyperlinks.Count > 0

End Function 
```

### 使用`Address`

这可能对您可以保存的字符串类型有一些限制，因为它们必须是有效的链接。例如，其中不能有任何空格，但您当然可以使用代码（如`\20`）来表示空格并稍后对其进行解码。

**免责声明**：我实际上并不完全确定这是做什么的，我试图找到一种方法来创建一个没有去任何地方的有效链接，这就是我想出的。它有点破坏 excel，因为您不能再使用 Excel GUI 编辑超链接，并且单击它不会触发`FollowHyperlink`事件。如果您只是设置`?Data`为地址，那么 Excel 将在下次有人单击它时将其清除。

```
' Write hidden data to a cell
Public Sub WriteData(ByVal Cell As Range, ByVal Data As String)

    Cell.Hyperlinks.Delete
    Cell.Hyperlinks.Add Cell, Address:="//?" & Data, ScreenTip:="Nothing suspicious here."

    ' Set standard formatting
    With Cell.Font
        .Underline = xlUnderlineStyleNone
        .ColorIndex = xlAutomatic
    End With

End Sub

' Read hidden data from a cell
Public Function ReadData(ByVal Cell As Range) As String

    If Not CellContainsData(Cell) Then Exit Function

    Dim Data As String
    Data = Cell.Hyperlinks(1).Address    

    ReadData = Right$(Data, Len(Data) - 3)

End Function

Private Function CellContainsData(ByVal Cell As Range) As Boolean

    If Cell.Hyperlinks.Count < 1 Then Exit Function

    Dim Data As String
    Data = Cell.Hyperlinks(1).Address

    ' Check that the cell has the correct prefix
    If Len$(Data) < 3 Then Exit Function
    If Left$(Data, 3) <> "\\?" Then Exit Function

    CellContainsData = True

End Function 
```

## 将数据保存在`Validation`

也可以在单元格的验证中存储数据。但是，如果有人对细胞进行分类，这将不起作用。

```
' Write hidden data to a cell
Public Sub WriteData(ByVal Cell As Range, ByVal Data As String)

    With Cell.Validation
        ' Remove previous validation
        .Delete

        ' Write data on a specific format so you know it was you.
        .Add xlValidateCustom, Formula1:="""@" & Data & """"

        ' Hide it as well as possible
        .InCellDropdown = False
        .ShowInput = False
        .ShowError = False
    End With

End Sub

' Read hidden data from a cell
Public Function ReadData(ByVal Cell As Range) As String

    If Not CellContainsData(Cell) Then Exit Function

    Dim Data As String
    Data = Cell.Validation.Formula1

    ReadData = Mid$(Data, 3, Len(Data) - 3)

End Function

Private Function CellContainsData(ByVal Cell As Range) As Boolean

    On Error GoTo InvalidValidation

    If Cell.Validation.Type <> xlValidateCustom Then Exit Function

    Dim Data As String
    Data = Cell.Validation.Formula1

    ' Check that the data is on your specific format
    If Left$(Data, 2) <> """@" Then Exit Function
    If Right$(Data, 1) <> """" Then Exit Function

    CellContainsData = True

InvalidValidation:
    Exit Function

End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-31T17:38:42.547

每个电子表格都应该有标签或标题，或者至少有一些描述字段。如果这是真的，那么有一个技巧可以让您在其中一个单元格中隐藏一个值，而没有人会发现。这是你如何做到的。

1.  用 输入单元格中的值`=N()`。例如：

`=N("Apple, Google, Facebook, Microsoft")`.

2.  转到`Format Cells > Custom`：输入要为标题/标签/描述显示的文本。例如：

`"Header Name"`.

如您所见，我可以在单元格中输入文本，但显示的内容有所不同。作为奖励，您可以使用以下语法从 VBA 为您的程序获取公式/文本：

`Range("A1").Formula`

希望这可以帮助。

[![在此处输入图像描述](../Images/e953fe94aafac89c74ee183395650db0.png)](https://i.stack.imgur.com/Aaj5c.jpg)

# java - 使用休眠的 JPA 2 条件查询无法离开连接

> ID：11353187
> 
> 赞同：2
> 
> 时间：2012-07-05T22:03:43.370
> 
> 标签：java, hibernate, jakarta-ee, jpa-2.0, criteria-api

在我的应用程序中，我有具有权限的角色，我曾经这样做：

```
 Query query =
        em.createQuery(
            "SELECT distinct r FROM Role r left join fetch r.permissions "
            + "where r.domain = ? " + "order by r.createdOn ").setParameter(
            1, domain);

    return query.getResultList(); 
```

但想要更好地控制延迟初始化。所以我正在尝试这个，但它不起作用，因为连接正在执行，就好像它是一个内部连接一样，没有带来一个角色及其权限，而是每行和每个权限都有一个结果。

```
public List<Role> findAll()
{
    CriteriaBuilder criteriaBuilder;
    CriteriaQuery<Role> criteriaQuery;
    Root<Role> queryRoot;
    Order createdOnDesc;
    TypedQuery<Role> typedQuery;
    List<Role> roleResultList;

    //initialize query system
    criteriaBuilder = em.getCriteriaBuilder();

    //select * from Role
    criteriaQuery = criteriaBuilder.createQuery(Role.class);
    queryRoot = criteriaQuery.from(Role.class);

    //join permissions by default "LEFT"
    //***THIS LINE IS FAILING*** ????
    queryRoot.join(Role_.permissions);

    //get query
    typedQuery = em.createQuery(criteriaQuery);

    //the steps below must be done to avoid lazy initialization exceptions
    //in case we want to access the list at a later time
    roleResultList = typedQuery.getResultList();

    for (Role role : roleResultList)
    {
        role.getPermissionsList();
    }

    return roleResultList;
} 
```

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:35:26.073

我有点不清楚你想要达到什么目标，但无论如何可能会有所帮助。

默认情况下，这是内部连接，如[API](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/From.html#join%28javax.persistence.metamodel.CollectionAttribute%29)中所述。

```
//join permissions by default "LEFT"
//***THIS LINE IS FAILING*** ????
queryRoot.join(Role_.permissions); 
```

如果您需要类似于原始 JPQL 查询的内容，可以使用[fetch](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/FetchParent.html#fetch%28javax.persistence.metamodel.PluralAttribute,%20javax.persistence.criteria.JoinType%29)来完成。如果您想改用左（外）连接，可以使用以[JoinType](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/JoinType.html)作为参数的[连接](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/From.html#join%28javax.persistence.metamodel.CollectionAttribute,%20javax.persistence.criteria.JoinType%29)方法来完成：

```
queryRoot.join(Role_.permissions, JoinType.LEFT); 
```

当需要不同的结果时，[CriteriaQuery.distinct](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaQuery.html#distinct%28boolean%29)很有用。

# javascript - JS - 如何正确使用 setTimeout()

> ID：11353194
> 
> 赞同：0
> 
> 时间：2012-07-05T22:05:35.457
> 
> 标签：javascript, node.js

所以我有这个在 setTimeout 上执行的函数，console.log 返回我命名为 time 的变量的正确值，但是当我运行代码时，该函数正在运行，没有延迟。该代码是我正在制作的游戏的服务器端。该代码应该在使用物品后逐渐恢复玩家的健康。我的问题是 settimeout 函数......当我在浏览器中使用它而不是从我的节点控制台中使用它时它也可以工作。

```
function balm(i){
    this_sql ="UPDATE game_moblist SET hp = least(max_hp, hp +"+Math.round(i/2)+") WHERE id ="+mobid;
    connection.query(this_sql, function(err, rows, fields) {
        if (err) err=null
    });
    console.log(this_sql);
    this_sql = "SELECT hp, max_hp FROM  game_moblist WHERE id ="+mobid;   //emite catch all update pointint to hp..
    connection.query(this_sql, function(err, rows, fields) {
        if (err) throw err;
        socket.emit ('updatemisc',handler,rows);//eval handler using args
        if (rows[0].hp==rows[0].max_hp){
            i=0;
            return i;
        }
    });
}
for (i=30;i>=0;i--){
   time=(31-i)*1000;
   console.log(time);
   setTimeout(balm(i),time);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T22:10:11.027

问题在这里：

```
setTimeout(balm(i),time); 
```

这样做是**调用** `balm`并将其返回值提供给`setTimeout`，这不是您想要的。您想传递`setTimeout`一个函数，该函数在调用时将`balm`使用给定`i`值调用。你这样做：

```
setTimeout(makeHandler(i),time);
function makeHandler(index) {
    return function() {
        balm(index);
    };
} 
```

这样，该`balm`函数会在稍后被调用，并使用`i`超时被*调度*时的值调用。如果没有这个`makeHandler`东西，所有`balm`实例在*运行*`i`时都会看到它们的样子（例如，它们都会看到）。这是因为在 JavaScript 中，闭包可以持久访问上下文中的变量。创建闭包时不是它们的*副本*。所以他们都看到了 的当前值。（更多：[*闭包并不复杂*](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)）*`-1`*`i`[](http://blog.niftysnippets.org/2008/02/closures-are-not-complicated.html)**

 ***（请注意，在 NodeJS（您正在使用的环境）以及 Firefox 上，您可以使用**非标准**扩展来`setTimeout`允许您将参数传递给函数；请参阅[pksunkara 的回答](https://stackoverflow.com/a/11353229/157247)。但对于任何想要这样做的人Web 上的客户端 [而不是使用 Node 的服务器端]，请注意，这**不是**标准的。）

为了说明这一点，这里有一个例子（这个例子在浏览器中运行，但对于像 NodeJS 这样的服务器端的东西也是一样的）：

```
(function() {

  // Wrong
  setTimeout(function() {
    var i;

    for (i = 0; i < 5; ++i) {
      setTimeout(function() {
        show("wrong", i);
      }, i * 50);
    }
  }, 0);

  // Right
  setTimeout(function() {
    var i;

    for (i = 0; i < 5; ++i) {
      setTimeout(makeHandler(i), i * 50);
    }

    function makeHandler(index) {
      return function() {
        show("right", index);
      };
    }
  }, 500);

  function show(marker, val) {
    display("show (" + marker + "): " + val);
  }

  function display(msg) {
    var p = document.createElement('p');
    p.innerHTML = String(msg);
    document.body.appendChild(p);
  }
})(); 
```

[现场复制](http://jsbin.com/apibuz)| [来源](http://jsbin.com/apibuz/edit)

这是输出：

```
显示（错误）：5
显示（错误）：5
显示（错误）：5
显示（错误）：5
显示（错误）：5
显示（右）：0
显示（右）：1
显示（右）：2
显示（右）：3
显示（右）：4
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T22:10:02.150

这是setTimeout的正确用法

```
setTimeout(balm, time, i); 
```

您必须传递一个函数，然后是延迟，然后是 args 到上述函数***

# java - 在 Android 应用程序之间传递字符串数据

> ID：11353195
> 
> 赞同：3
> 
> 时间：2012-07-05T22:05:36.927
> 
> 标签：java, android, broadcastreceiver

在应用程序之间传递简单数据（如字符串）的最佳方式是什么？String 是发送方应用程序中已知的一些字段，并且接收方应用程序需要。

我考虑将它存储在 MODE_WORLD_READABLE SharedPreferences 中，但我不一定知道包名称（这将存在于库中），该值可以由各种应用程序设置，因此很难查找。

我在想这两个应用程序都包含广播接收器。当接收方应用程序打开时，它会发送一个自定义 Intent 供发送方应用程序接收，以告知它已准备好接收。看到该 Intent 后，发送方应用程序然后将带有我的字符串值的另一个 Intent 发送到接收方应用程序以获取。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:54:05.457

@CommonsWare 你说的是不正确的。您可以共享数据，例如两个应用程序之间的字符串。请看这里：[两个应用程序之间的数据共享](https://stackoverflow.com/questions/5745243/data-sharing-between-two-applications)以及：http: [//developer.android.com/training/sharing/send.html](http://developer.android.com/training/sharing/send.html)

“我在想这两个应用程序都包含广播接收器。” 这不是必需的。谷歌提供了一个非常简单易用的解决方案和示例。

# jsf - 从 JSF RichFaces 上的根目录 (index.html) 重定向

> ID：11353196
> 
> 赞同：1
> 
> 时间：2012-07-05T22:05:39.060
> 
> 标签：jsf, redirect, navigation, richfaces

`admin.xhtml`当我访问时尝试重定向到页面`http://localhost:8080/CSPPortal/index.html`。根`index.html`包含

```
<html><head><meta http-equiv="Refresh" content="0; URL=pages/admin.jsf"/></head></html> 
```

**问题**是**url 不断回到**之前`login.jsf`声明的位置`index.html`。

**尝试：**`index.jsf`在根文件夹中添加一个空页面。尝试[在 SO](https://stackoverflow.com/a/5345633/1108500)`FacesServelet`上的旧答案上进行映射。尝试从. **所有的试验都失败了！！！！**任何关于哪里出了问题的建议都将不胜感激。 `*.xhtml` `<welcome-file-list>``web.xml`

 **以下是`web.xml`内容：

```
<servlet>
 <servlet-name>Faces Servlet</servlet-name>
  <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>*.faces</url-pattern>
</servlet-mapping>
<servlet-mapping>
 <servlet-name>Faces Servlet</servlet-name>
  <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<welcome-file-list>
 <welcome-file>index.html</welcome-file>
 </welcome-file-list>
</web-app> 
```

导航规则`faces-config.xml`如下，因为我还没有 admin.xhtml 的链接：

```
<navigation-rule>
 <from-view-id>/pages/login.xhtml</from-view-id>
 <navigation-case>
  <from-outcome>result</from-outcome>
  <to-view-id>/pages/result.xhtml</to-view-id>
 </navigation-case>
</navigation-rule> 
```

使用 JBoss AS 7.1、RichFaces 4.0、JSF 2.0（通过 JBoss 工具）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:24:33.353

由于 URL 是由浏览器调用的，因此您需要像这样解析 url：

```
<meta http-equiv="Refresh" content="0; URL=#{request.contextPath}/pages/admin.jsf"/> 
```

也可以看看：

*   [如何获取基本 URL？](https://stackoverflow.com/questions/6878275/how-get-the-base-url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-08T09:49:55.063

从 JSF RichFaces 上的根目录 (index.html) 重定向

1.放入xhtml文件。

```
<html>
  <head>
    <meta http-equiv="Refresh" content="0; URL=index.jsf">
  </head>
</html> 
```

2.Web.xml文件

```
<servlet-mapping>
  <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-30T08:40:19.267

externalContext 方法对我来说很好。

```
<h:body>
  #{facesContext.externalContext.response.sendRedirect('pages/admin.jsf')}
</h:body> 
```**

# java - 跨一系列依赖项构建多个 Maven 工件

> ID：11353199
> 
> 赞同：0
> 
> 时间：2012-07-05T22:05:53.637
> 
> 标签：java, maven, build

Maven 有没有办法在一系列依赖版本中多次构建和测试项目？

例如，假设我有以下库：

```
groupId        artifactId  version
com.example    library     1.0
com.example    library     1.1
com.example    library     2.0
com.example    library     2.2 
```

我的构建产生了一个 jar 工件：output.jar

我能否针对每个库版本生成以下内容：

```
groupId        artifactId  version    result
com.example    library     1.0        output_1.0.jar
com.example    library     1.1        output_1.1.jar
com.example    library     2.0        output_2.0.jar
com.example    library     2.2        output_2.2.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:26:12.657

尝试配置文件[http://maven.apache.org/guides/introduction/introduction-to-profiles.html](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)

```
<profiles>
  <profile>
    <id>version1.0</id>
    <dependencies>
       <dependency>
         <groupId>com.example</groupId>
         <artifactId>library</artifactId>
         <version>1.0</version>
       </dependency>
    </dependencies>
    <build>
      <finalName>${project.artifactId}-library-1.0.jar</finalName>
    </build>
  </profile>
  <profile>
    <id>version1.1</id>
    <dependencies>
       <dependency>
         <groupId>com.example</groupId>
         <artifactId>library</artifactId>
         <version>1.1</version>
       </dependency>
    </dependencies>
    <build>
      <finalName>${project.artifactId}-library-1.1.jar</finalName>
    </build>
  </profile>
</profiles> 
```

然后当你调用maven时，：mvn -Pversion1.1

默认情况下，您的一个配置文件可能应该处于活动状态，这样您就可以在不启用特定配置文件的情况下进行编译。

```
<activation>
  <activeByDefault>true</activeByDefault>
</activation> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T06:39:18.713

您可以使用 jenkins 或 hudson 的矩阵项目功能。见[https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project](https://wiki.jenkins-ci.org/display/JENKINS/Building+a+matrix+project)

> 多配置项目对于您的构建将执行许多类似构建步骤的情况很有用，否则您将重复步骤。

但是您不能以这种方式在本地计算机上构建项目。

# javascript - Meteor - 渲染元标签服务器端

> ID：11353200
> 
> 赞同：2
> 
> 时间：2012-07-05T22:05:55.803
> 
> 标签：javascript, html, meteor

我需要在我的页面头部有一些需要由 Facebook 解析的动态元标记，因此它们必须在服务器端生成。可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:49:28.987

我有一个类似的问题。解决方案是实现自己的服务器路由。请参阅[如何将 Facebook 的 Open Graph 集成到 Meteor 应用程序中？](https://stackoverflow.com/questions/11281405/how-to-integrate-facebooks-open-graph-in-a-meteor-application).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T19:56:53.850

我在流星上的社交分享中遇到了同样的问题。我写了这个教程：[https](https://webdevelopment7636.wordpress.com/2017/02/15/social-share-with-meteor/) ://webdevelopment7636.wordpress.com/2017/02/15/social-share-with-meteor/ 。它将向您展示如何在服务器端创建动态元标记，以便爬虫可以到达。

# php - 将数据库值与当前值进行比较并通过 AJAX 提交

> ID：11353202
> 
> 赞同：0
> 
> 时间：2012-07-05T22:06:04.817
> 
> 标签：php, ajax, codeigniter, jplayer

我有一个使用 codigniter 的 Web 应用程序，在用户在表单上提交一些信息后将其发送到 jPlayer 播放列表。

我的客户要求我对其进行改造，以记录播放列表中每个视频的观看时间。

我有这个工作点击。单击轨道时，将调用 ajax 函数，然后控制器检查时间值是否与数据库中已经存在的任何内容相比较，如果当前值较大，则提交。

我想做的是删除点击功能，这样如果观看任何视频的时间大于数据库中的值，就会自动调用 AJAX 提交。对这方面的策略有什么建议吗？我的 AJAX 查询是否应该为数据库中的每个时间值编写一个会话变量，然后根据它触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:21:56.680

创建一个包含视频 ID/名称和时间值的对象。然后，您将提取相应的视频时间值并将其设置为变量。使用`setInterval()`每 X 秒刷新一次，比较设置的时间值和经过的时间。如果超过阈值，则执行 AJAX 提交。

# ruby-on-rails - FactoryGirl 3.x has_many 通过关联

> ID：11353203
> 
> 赞同：3
> 
> 时间：2012-07-05T22:06:22.583
> 
> 标签：ruby-on-rails, testing, factory-bot

我已经看过一些旧语法的例子，但我找不到使用新的 3.x 语法的例子（一个这样的旧例子：[factory girl multiple has_many through's](https://stackoverflow.com/questions/8259074/factory-girl-multiple-has-many-throughs)）。

楷模

```
class RawPosition < ActiveRecord::Base
  has_many :position_translations
  has_many :specific_positions, through: :position_translations
end

class SpecificPosition < ActiveRecord::Base
  has_many :position_translations
  has_many :raw_positions, through: :position_translations
end

class PositionTranslation < ActiveRecord::Base
  belongs_to :raw_position
  belongs_to :specific_position
end 
```

工厂

```
factory :raw_poisition_multiple, class: RawPosition do
    raw_input "WR/QB"
    sport_type_id 5

    after_create do |a|
      #a.specific_positions.create({specific_position: "WR"})
      #a.specific_positions.create({specific_position: "QB"})
      FactoryGirl.create(:specific_position, raw_position: a)
      FactoryGirl.create(:qb_specific_position, raw_position: a)
    end
  end

factory :specific_position do
    specific_position "WR"
  end

factory :qb_specific_position do
    specific_position "QB"
end 
```

规格

```
describe "WR/QB" do
      before do
        @player.player_dict['POS'] = "WR/QB"
        FactoryGirl.create(:raw_poisition_multiple)

        @player.clean_position(@player_to_team_history)
      end
 ....
 end 
```

如果我取消注释`raw_position_multiple`工厂中的行并注释掉块`FactoryGirl`中的行`after_create`，一切正常。我只是想要使用工厂来创建关联的能力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T15:33:55.217

通过在创建关联后重新加载根模型，我能够解决类似的问题。在您的示例中，这意味着添加：

```
a.reload 
```

到你的`after_create`街区的尽头。

# python - 如何使用 Python 响应 HTTP 请求

> ID：11353206
> 
> 赞同：1
> 
> 时间：2012-07-05T22:06:31.243
> 
> 标签：python, ios, webserver, download

我正在尝试编写一个使用 Python 服务器的 iPhone 应用程序。iPhone 应用程序将向服务器发送一个 HTTP 请求，然后服务器应通过发回服务器上的文件来响应。做这个的最好方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:09:02.120

您可以使用基本的 Web 框架对将返回内容的页面进行编码。例如，您可以使用轻量级的[Flask](http://flask.pocoo.org/)，您可以编写它需要执行的 Python 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:10:59.573

您可以使用基本的 Web 框架，例如 Flask，也可以使用 python 的[httplib](http://docs.python.org/library/httplib.html)库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:14:58.407

Python 2.x：

`python -m SimpleHTTPServer`

见[http://www.garyrobinson.net/2004/03/one_line_python.html](http://www.garyrobinson.net/2004/03/one_line_python.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T22:15:35.097

如果您实际上只是提供内容（即，不进行任何计算或查找），则使用 nginx 网络服务器根据 URL 提供内容。

# php - 使用 PHP 中的 foreach 循环分离存在重复项的数组中的数据

> ID：11353211
> 
> 赞同：1
> 
> 时间：2012-07-05T22:07:21.497
> 
> 标签：php, arrays

我有一个数据库表，其中一列是选项，另一列代表该选项的选项值。例子：

```
Options:   Option Values
Color   -  Red
Color   -  Blue
Size    -  Large
Size    -  Small 
```

如何循环遍历数据到可以填充选项分组的选择框的位置，例如：

```
Color:
     Red
     Blue

Size:
     Large
     Small 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:11:29.157

循环遍历每一行，并使用 PHP 的 [] 数组运算符和您的选项名称作为多维数组的键。

```
foreach($yourRows as $data) {
  if (!isset($options[$data['option']])) {
    $options[$data['option']] = array();
  }
  $options[$data['option']][] = $data['value'];
} 
```

这将创建一个二维数组，其中第一级是关联的，以选项名称为键，每个键都包含该选项值的数字索引数组。

结果数组看起来是这样创建的：

```
$options = array(
  "color" => array("red", "blue"),
  "size"  => array("small", "large")
); 
```

然后根据需要像这样迭代选项：

```
echo '<select name="options"  multiple="multiple">';
foreach($options as $option_type => $available_options) {
  printf('<optgroup label="%s">', $option_type);
  foreach($available_options as $avail) 
    printf('<option value="%s">%s</option>', $avail, $avail);
  echo '</optgroup>';
} 
echo '</select>'; 
```

这将创建一个在 Safari 中呈现这样的选择（我选择了红色和大号）：

![在此处输入图像描述](../Images/69af5998cd34e5877e27b86e7475ce93.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:24:25.543

如果您想`<select>`为每个显示框，我会执行以下操作：-

（确保`ORDER BY 'Options'`或类似取决于您的数据库）

```
$previous_option = "";
$count = 0;
foreach($data as $row){
    if($row['options'] != $previous_option){
        if($count>0){
            echo '</select>'.$row['options'].': <select name="'.$row['options'].'">';
        } else {
            echo $row['options'].': <select name="'.$row['options'].'">';
        }
    }
    echo '<option>'.$row['value'].'</option>';
    $count++;
    $previous_option = $row['options'];
} 
```

*   `$data`=您的数据库结果。
*   `$row['options']`= 数据库列“选项”。
*   `$row['value']`= 数据库列“选项值”
*   `$previous_option`= 用于选项“分组”
*   `$count`= 用于跟踪第一次迭代

# regex - 在perl中读取引号内的字符串

> ID：11353213
> 
> 赞同：1
> 
> 时间：2012-07-05T22:07:29.183
> 
> 标签：regex, perl

这是字符串：

```
[quote="test post1"]this is a test post[/quote] 
```

我只想检索测试 post1 值

这就是我正在做的...

```
[tmp test][item-param body] [/tmp]
$str1 = $Scratch->{test};
$str1 =~ m/"(.?)"/; 
```

但它没有给出预期值：test post1

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:14:34.860

```
#!/usr/bin/perl;

my $str = '[quote="test post1"]this is a test post[/quote]';

if($str=~m/\"(.+)\"/) {
print $1;
} 
```

# ruby-on-rails - Rails 迁移不适用于 heroku，模型类报告为未初始化常量

> ID：11353214
> 
> 赞同：4
> 
> 时间：2012-07-05T22:07:41.263
> 
> 标签：ruby-on-rails, heroku, migration

我正在尝试在 heroku 上运行迁移，但我似乎找不到我的模型类无法识别的问题。

这是我的迁移：

```
class AddTestToGoals < ActiveRecord::Migration
  def change
    add_column :goals, :test, :integer, default: 0, null: false
    Goal.reset_column_information
    Goal.all.each { |g| g.update_attribute :test, Goal::PASS }
  end
end 
```

运行它使用

```
heroku run rake db:migrate 
```

我得到这个错误

```
uninitialized constant AddTestToGoals::Goal 
```

任何人都知道问题是什么？

编辑：错过之前输入的，它是无法识别的模型，而不是其中的常量。

一半的解决方法：

使用它（我在这里找到：http: [//visibletrap.blogspot.co.il/2011/10/heroku-access-railss-model-in-migration.html](http://visibletrap.blogspot.co.il/2011/10/heroku-access-railss-model-in-migration.html)）

```
class AddTestToGoals < ActiveRecord::Migration
  class Goal < ActiveRecord::Base; end
  def change
     add_column :goals, :test, :integer, default: 0, null: false
     Goal.reset_column_information
     Goal.all.each { |g| g.update_attribute :test, Goal::PASS }
  end
end 
```

heroku 不会抱怨不知道解决一半问题的目标是什么。但是，Goal::PASS 无法识别。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T20:56:45.907

老问题，但我最近遇到过类似的事情，这是由于通过设置禁用自动加载

```
config.threadsafe! 
```

在我的环境/staging.rb 文件中。可以通过以下方式替换它来修复

```
config.threadsafe! unless $rails_rake_task 
```

这应该没问题，因为 rake 任务不需要是线程安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:14:15.000

编辑：

将所有对目标的引用更改为以`::`.

```
::Goal.reset_column_information
::Goal.all.each { |g| g.update_attribute :test, ::Goal::PASS } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-24T07:56:03.187

除非我遗漏了什么，否则上述所有解决方法都已在以后的 rails 版本中被阻止。但是人们仍然可以通过执行以下操作从人为施加的约束中控制他们的项目/工作：

```
execute("INSERT INTO table_name (col_name) VALUES (your_values_here))") 
```

# c# - Selenium Webdriver 不尊重 cookie 或缓存图像

> ID：11353216
> 
> 赞同：1
> 
> 时间：2012-07-05T22:08:07.923
> 
> 标签：c#, selenium, webdriver, mstest

我正在使用 Selenium (2.24) 生成单元测试（用于 Visual Studio 单元测试框架）。在为 FireFox 使用 C# WebDriver 时，驱动程序启动的浏览器似乎没有通过 javascript 找到我的网站 cookie（我的站点中包含一个 javascript 文件，用于查找 cookie 并让我知道它们是否被发现）。此外，它不使用浏览器图像缓存，并且总是从服务器请求新图像。当我从“正常”（不是由 Selenium 启动的）FireFox 运行我的站点时，不会发生这种行为。

奇怪的是，在我的单元测试中调用下面的代码确实会返回我的 cookie（我的 JavaScript 无法找到它）

```
driver.Manage().Cookies.GetCookieNamed("MyCookie"); 
```

如何配置驱动程序以尊重我的 cookie 并使用浏览器图像缓存？此功能是测试我的网站的关键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T15:16:57.870

默认情况下，FirefoxDriver 将在每次启动 Firefox 时创建一个新的匿名配置文件。如果您希望它使用现有的配置文件，您需要告诉它。

在 Java 中，您可以这样做：

```
ProfilesIni allProfiles = new ProfilesIni();
FirefoxProfile profile = allProfiles.getProfile("MyProfile");
WebDriver driver = new FirefoxDriver(profile); 
```

我假设 C# 中有类似的东西

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:10:59.730

对于 cookie：如果 cookie 被标记为[“仅限 HTTP”](http://en.wikipedia.org/wiki/HttpOnly#HttpOnly_cookie)，则页面上的 JavaScript 将无法看到它。因此，任何在页面上使用 JavaScript 执行的代码都不会看到这个特定的 cookie。

您可以通过使用一些 HTTP 调试器（即 Fiddler）来确认它是否使用 HttpOnly 属性设置了 cookie。您还可以通过开发工具检查在页面上运行脚本或`javascript:alert(...)`在地址栏中输入是否可以看到 cookie ( `document.cookie`)

# xml - 名称目录的 XSLT 分组

> ID：11353219
> 
> 赞同：-1
> 
> 时间：2012-07-05T22:08:13.820
> 
> 标签：xml, xslt, xpath, grouping, muenchian-grouping

我正在尝试为我正在使用 XSLT 处理的项目构建姓氏目录。这就是我最终想要的样子。我希望 XSLT 通过显示人员姓氏的第一个字母的位置来获取部分搜索的索引分组，并且我希望它根据人员姓氏的第一个字母按结果中的每个部分进行分组.

请参阅下面的示例。

* * *

搜索方式：ACFGJ

一个

安德森·
安德鲁斯
·艾莉森

C

查尔斯

F

弗雷德里克斯·
弗兰克斯

G

加勒特

Ĵ

约翰逊
詹姆斯

我已经尝试了该部分的 Muenchian 分组，以使该人的姓氏的第一个首字母位于适当的字母下（即 Section A Anderson、Andrews、Allison ....J Johnson James）并且效果很好。

使用相同的代码，我尝试将其应用于生成按 ACFGJ 搜索的部分，我想根据 XML 中的数据显示该人姓氏的第一个字母。尝试代码时，我没有得到本节的任何结果。

有人可以帮忙吗？谢谢

干杯

* * *

**更新**

OP希望转换此输入文档...

```
<people>
 <person><lastname>Johnson</lastname></person>
 <person><lastname>James</lastname></person>
 <person><lastname>Charles</lastname></person>
 <person><lastname>Franks</lastname></person>
 <person><lastname>Anderson</lastname></person>
 <person><lastname>Allison</lastname></person>
 <person><lastname>Fredericks</lastname></person>
 <person><lastname>Andrews</lastname></person>
</people> 
```

... 使用 XSLT 进入上面显示的文本格式输出文档。目前尚不清楚 OP 使用的是 XSLT 1.0 还是 2.0。搜索字母作为样式表参数提供给样式表，格式为以空格分隔的大写字母列表，声明如下...

```
<xsl:param name="search-by" select="'A C F G J'" /> 
```

您可以假设这些字母已经按字母顺序排序并且仅限于大写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:40:31.897

如果您提供按参数排序的字母，则不需要 muenchian 分组。

这个 XSLT 1.0 样式表...

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="text" />
<xsl:param name="search-by" select="'A C F G J'" />

<xsl:key name="section" match="person" use="substring( lastname, 1, 1)" />

<xsl:template match="/">
Search by: <xsl:value-of select="$search-by" /><xsl:value-of select="'&#x0A;&#x0A;'" />   
  <xsl:call-template name="do-section">
    <xsl:with-param name="sections" select="$search-by" /> 
  </xsl:call-template>  
</xsl:template>

<xsl:template name="do-section">
 <xsl:param name="sections" />
 <xsl:if test="$sections != ''" > 
  <xsl:variable name="letter" select="substring($sections,1,1)" />
  <xsl:value-of select="concat( $letter, '&#x0A;&#x0A;')" />
  <xsl:for-each select="key('section',$letter)">
   <xsl:sort data-type="text" /> 
   <xsl:value-of select="concat( lastname, '&#x0A;')" />   
  </xsl:for-each>   
  <xsl:value-of select="'&#x0A;'" />   
  <xsl:call-template name="do-section">
    <xsl:with-param name="sections" select="substring($sections,3)" /> 
  </xsl:call-template>  
 </xsl:if> 
</xsl:template>  

</xsl:stylesheet> 
```

... 应用输入样式表参数 $search-by='ACFG J' 并应用于此输入文档 ...

```
<people>
 <person><lastname>Johnson</lastname></person>
 <person><lastname>James</lastname></person>
 <person><lastname>Charles</lastname></person>
 <person><lastname>Franks</lastname></person>
 <person><lastname>Anderson</lastname></person>
 <person><lastname>Allison</lastname></person>
 <person><lastname>Fredericks</lastname></person>
 <person><lastname>Andrews</lastname></person>
</people> 
```

... 生成此文本文档 ...

```
Search by: A C F G J

A

Allison
Anderson
Andrews

C

Charles

F

Franks
Fredericks

G

J

James
Johnson 
```

# php - PHP mail() -f 参数不起作用

> ID：11353221
> 
> 赞同：0
> 
> 时间：2012-07-05T22:08:54.630
> 
> 标签：php, email

我对此进行了深入研究。在这里，在 Stack Overflow，我发现如果想要退回无法投递的邮件，需要在 php mail() 函数中使用 -f 参数。以下是我的脚本（就目前而言）：

```
//Send Confirmation email. Following are the variables for the email 
// mail function best practices: http://collaborate.extension.org/wiki/Best_Practices_Using_the_PHP_mail_Function

$sendto = $email; // this is the email address collected from the foreach routine. 
$e_subject = stripslashes($subject); // Subject 
//$message = "<html>" . stripslashes($body) . "</html>";
$message = "
    <html>
    <body>
    <p>Hello " . stripslashes($fName) . ":</p>
    <div>" . stripslashes($body) . "</div>
    </body>
    </html>
    ";  
// Always set content-type when sending HTML email
$header = "MIME-Version: 1.0" . "\r\n";
$header .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";;

    // extract user domain so you can set up X-Mailer
    $u_domain=substr(strrchr($user_email, '@'), 1);
    $dom_array = explode(".",$u_domain);
    $user_domain = $dom_array[0];  
$header .= "X-Mailer: ". $user_domain ."\r\n";    
$header .= "X-Sender-IP: {$_SERVER['REMOTE_ADDR']}\r\n";
$header .= "X-Originating-IP: [".getenv("REMOTE_ADDR")."]\r\n"; 
$header .= "From: " . $user_email . "\r\n"; 
$header .= "Sender: ". $user_email . "\r\n"; 
// The "envelope sender" is the address listed in the "Return-Path:" header - and controls where the email is sent to in the event that a recipient address bounces. http://collaborate.extension.org/wiki/Best_Practices_Using_the_PHP_mail_Function
$header .= "Return-Path:" . $user_email . "\r\n";
$header .= "Reply-To:" . $user_email . "\r\n";

$bounceTo = "-f". $user_email;
// Collect variables from above and insert into the mail() function. 
mail($sendto, $e_subject, $message, $header,$bounceTo); 
```

你会注意到很多评论——我只是想弄清楚这一点。我的 mail() 发送非常好。邮件以应有的格式进入我的收件箱。但是... $bounceTo 变量 ("-f" . $user_email) 不起作用。我故意邮寄到 3 个已知的非活动地址，但我没有收到任何退回邮件。

上述代码中的所有标题设置都已到位，因为我了解到这些可能会影响反弹。我完全愿意摆脱不必要的标题并添加必要的内容。但是......在这一点上，脚本似乎一团糟——没有产生反弹。

欢迎任何建议。

非常感谢：

亭

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:12:18.977

您是否看过[http://www.php.net/manual/en/function.mail.php#107321](http://www.php.net/manual/en/function.mail.php#107321)上发布的评论。这可能会引导你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:13:26.690

[这个用 php 解释退回邮件的线程](https://stackoverflow.com/questions/1011714/bounce-email-handling-with-php)可能对你有好处。我个人从未使用过该`-f`参数来处理退回的电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T07:01:31.977

不允许在所有服务器上使用 -f 覆盖退回地址，尤其是在共享托管服务器上时，这通常是不可能的。在这种情况下，通常最好不要使用非常有限的 mail() 函数，而是使用[phpmailer](http://phpmailer.worxware.com/)或[swiftmailer](http://swiftmailer.org/)之类的 smtp 库。

顺便说一句：您不必向非活动地址发送邮件来检查您的退回地址。将它们发送到活动帐户，在消息源中查找“Return-Path”标头，这是退回地址。

# c++ - Physx 3 的几个新手问题

> ID：11353224
> 
> 赞同：1
> 
> 时间：2012-07-05T22:09:16.530
> 
> 标签：c++, 3d, physics, simulation, physx

今天，我尝试玩转 Physx 和 Physx 可视化调试器，和往常一样，新手有问题和疑问。我会尽量用我糟糕的英语技能来描述我的问题。

1）我设法创建了一个 physx 场景。添加了一个动态actor并对其进行了操作。我在 Visual Debugger 中看到它的动作。这是一个标准的 PxSphereGeometry 球。但是，当我在场景中添加第二个球时，第二个球是不可见的，但我可以看到发生了碰撞。这是代码，如果有人能指出我有什么问题，我将不胜感激：

```
PxMaterial* mMaterial;

mMaterial = mPhysics->createMaterial(0.5f, 0.5f, 0.5f); //static friction, dynamic friction, restitution

if(!mMaterial)
error("createMaterial failed!");

PxVec3 position(0, 50, 0);
PxRigidDynamic* aSphereActor =  PxCreateDynamic(*mPhysics, PxTransform(position), PxSphereGeometry(3), *mMaterial, 1.f);
PxRigidDynamic* aTrActor =  PxCreateDynamic(*mPhysics, PxTransform(PxVec3(3, 1, 1)), PxSphereGeometry(3), *mMaterial, 1.1f);

if(!aSphereActor)
error("Unable to create sphere actor");

aSphereActor->setMass(1);

aTrActor->setMass(10);

PxRigidStatic* plane = PxCreatePlane(*mPhysics, PxPlane(PxVec3(0,1,0), 0), *mMaterial);
if (!plane)
error("create shape failed!");

mScene->addActor(*plane);
mScene->addActor(*aSphereActor);
mScene->addActor(*aTrActor);

while(true)
{
mScene->simulate(1.0f / 30.0f);
if(!mScene->fetchResults(true))
error("cant fetch result");
Sleep(10);
} 
```

在这个场景中，aSphereActor 与 aTrActor 发生碰撞，但我在 Visual Debugger 中看不到 aTrActor，但碰撞完全可见。

2) Nvidia 的文档非常非常差。对于像我这样的新手来说，找到它的方式是一种折磨。所以我想知道如何导入 3d 模型并将其添加到场景中。我知道有一个适用于 3ds max、maya 等的 Physx 插件。假设我有一个用这个插件导出的模型，我如何将它导入我的应用程序并将其添加到场景中？

3) 在创建场景期间

```
sceneDesc.gravity = PxVec3(0.0f, -9.81f, 0.0f); 
```

，我应该提供什么值来获得真正的重力，我们在地球上拥有的重力

4）我可以为演员分配质量，但我不知道质量是哪个测量单位。例如，如果我设置 aSphereActor->setMass(1); aSphereActor 会是 1 公斤、克还是什么？

非常感谢大家。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:26:48.657

首先，我在这个季度做我的第一个 Physx 项目。（读作，我可能在编造这个）
1）
  你不检查 aTrActor 的创作，但我不认为这是你的问题。
  检查您的绘制/更新回调中是否有 aTrActor。
2) 不知道3)
  -9.81   m/s^2 是地球重力的加速度。   我猜 PxVec3 是相对于每个轴的重力。   因此，PxVec3(0.0, -9.81, 0.0) 没有 x 或 z 加速度和 -9.81 m/s^2 y 加速度。 4）   #3 的答案表明单位是公制的。   您可能可以将它们全部放在标准中，但 metric > 标准 imo。

只是看看日期，这可能对戴维塔没有帮助，但希望它对某人有用。

# jsf-2 - 不调用动作

> ID：11353226
> 
> 赞同：1
> 
> 时间：2012-07-05T22:09:26.513
> 
> 标签：jsf-2, glassfish-3, mojarra

在使用 JSF 2（Glassfish 3.1.1 上的 mojarra）进行的一些测试中，我遇到了我无法解释的奇怪行为。

这是我的托管 bean：

```
@ManagedBean
@RequestScoped
public class TestBean {
    private int id;

    public void hideButton() {
        id = 0;
    }

    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }
} 
```

这是我的 xhtml 页面

> ```
>  <h:form>
>        <h:inputHidden value="#{testBean.id}"/>
> 
>        <h:outputText value="#{testBean.id}"/>
> 
>        <h:commandButton value="set 1"
>                     actionListener="#{testBean.setId(1)}">
>        </h:commandButton>
> 
>        <h:commandButton value="hide button"
>                     action="#{testBean.hideButton}" rendered="#{testBean.id > 0}">
>        </h:commandButton>            
>    </h:form> 
> ```

我预计，“隐藏按钮”按钮在页面初始加载时不可见，这确实是事实。单击“set 1”按钮后，会出现“隐藏按钮”按钮，这也是意料之中的。对我来说真的无法理解的是，随后单击“隐藏按钮”按钮并没有调用 testBean.hideButton 方法并将 id 设置为 0。我已经阅读了 BalusC 的非常有用的答案（非常感谢）这里

[未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked)

并认识到，问题与“渲染”属性有关，如果我将其删除，则会调用该操作。但据我所知，必须在 UPDATE MODEL VALUES 阶段初始化类成员，并且在 INVOKE APPLICATION 阶段应将呈现的属性中提到的条件评估为 true 并调用操作。

如果我将 bean 的范围更改为 View/Session，则该示例有效。但如果我从“隐藏按钮”中删除渲染属性，它也可以正常工作

有人会解释这种行为吗？

换句话说，在什么阶段对渲染属性的表达式进行评估以决定不调用该操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T12:51:43.587

该`rendered`属性也在应用请求值阶段进行评估，此时 JSF 需要确定需要调用哪个操作。如果它评估`false`，则无法识别该操作，因此也不会被调用。

该问题是由托管 bean 范围太窄引起的。由于您的托管 bean 是请求范围的，因此它会在响应结束时被丢弃，并在任何后续请求中重新创建（所有属性都设置为默认值）。属性所依赖的模型值`rendered`只会在更新模型值阶段更新，这为时已晚。您应该将托管 bean 放在视图范围内。

除了将bean范围更改为查看范围之外，另一种方法是在`rendered`属性中检查请求参数映射值。

```
<h:form id="form">
    <h:inputHidden id="id" ... />

    <h:commandButton ... rendered="#{param['form:id'] gt 0}" />
</h:form> 
```

*（顺便说一下，您使用的`>`而不是`gt`表示您正在使用已弃用的 JSP 视图技术而不是 Facelets，我强烈建议您迁移到 Facelets）*

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:43:18.693

我自己找到了问题的原因。

UIComponentBase.processDecodes 方法（在应用请求值阶段）调用 isRendered，它返回 false，因为它在更新模型值之前。跳过组件的解码。

有一些可能的解决方法，所有这些都不是很酷，但它仍然有效

可以根据请求参数在（后）构造函数中手动设置托管 bean 中的必要值。或者使用

# c++ - 将数据从 cv::Mat 复制到 CvMat，反之亦然

> ID：11353240
> 
> 赞同：2
> 
> 时间：2012-07-05T22:11:01.867
> 
> 标签：c++, opencv

如何在 OpenCV 中将数据从 cv::Mat 复制到 CvMat，反之亦然？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-06T00:36:44.940

根据[cv::Mat 的文档](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)，`cv::Mat`有一个带有`CvMat *`参数和`operator CvMat()`成员函数的构造函数。因此，两者之间的复制可以很容易地完成，如下所示。

```
cv::Mat m;

// populate m

CvMat n = m; // cv::Mat::operator CvMat() const;

m = cv::Mat(&n); // cv::Mat::Mat(const CvMat* m, bool copyData = false);
// or
m = cv::Mat(&n, true); // to copy the data 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-15T10:18:05.437

根据opencv文档（[http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html](http://docs.opencv.org/2.4/modules/core/doc/basic_structures.html)）：

“通过转换运算符 Mat::operator CvMat() const 和 Mat::operator IplImage() 提供从 Mat 到 CvMat 或 IplImage 的反向转换。运算符不复制数据。”

# php - PHP：bin2hex 并使用不可能的数字

> ID：11353241
> 
> 赞同：1
> 
> 时间：2012-07-05T22:11:13.397
> 
> 标签：php

有一段时间没睡了，所以我可能错过了一些简单的东西。基本上，我正在取一个数字并将其转换为三个字符。最大可能性数为 256*256*256 (16777216)。我将其转换为：

```
public function s_encode($num) {
  $num = chr($num / 65536).chr($num / 256).chr($num % 256);      
  return bin2hex($num);  
} 
```

并将其转换回：

```
public function s_decode($hex) {    
  $a = pack("H*", $hex);
  $b = ord(substr($a, 1, 1));
  $c = ord(substr($a, 2, 1));
  $d = ord(substr($a, 0, 1));   
  return (($d * 65536) + ($b * 256)) + $c;
} 
```

奇怪的是，这真的有效吗？它做我想做的事，但怎么可能呢？在第一个代码中，我将其转换为三个字符，转换的第二部分是：

`chr($num / 256)`

如果数字大于 65536，这应该会导致错误，但不会。如果我使用 unpack 而不是 bin2hex，则会导致错误。bin2hex 不会。为什么以及如何 bin2hex 如此神奇？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:20:24.247

`chr()`只查看其输入的最低 8 位：

```
echo "'".chr(320)."'"; 
```

产量...

```
'@' 
```

一样...

```
echo "'".chr(64)."'"; 
```

[http://ideone.com/65Itz](http://ideone.com/65Itz)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:21:27.407

根据[php docs](http://php.net/manual/en/function.chr.php)中的评论，`chr`将采用参数模 256。即使是负整数也可以。`bin2hex`不执行该操作，并且在无效输入上失败。

# python - Python/SciPy 版本的 Excel FInv 函数

> ID：11353250
> 
> 赞同：3
> 
> 时间：2012-07-05T22:12:11.400
> 
> 标签：python, scipy, probability

希望是一个简单的。谁能指出我将计算右尾 F 概率分布的 SciPy 函数？

就像 Excel 的`=FINV(0.2, 1, 2)`结果一样`3.555555556`。谢谢，斯科特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:19:24.223

```
import scipy.stats

print scipy.stats.f.isf(0.2, 1, 2)  # => 3.5555555555555576 
```

# android - android sax 解析器仅在 TextView 中显示第一行

> ID：11353251
> 
> 赞同：0
> 
> 时间：2012-07-05T22:12:11.853
> 
> 标签：android, xml, parsing, textview, sax

我正在使用 android 和 java 进行我的第一个项目，并且经验很少。我有一个收音机播放器（激活服务的开始和停止按钮）和一些来自 xml 文件的数据，比如在 textview 中加载的艺术家标题和专辑我使用一个计时器，以便 gui 更新播放的歌曲

这一切只有在文本视图中加载歌词时才有效，它只显示 xml 标签的第一行`<LYRIC>`

这是我的主要活动：

 `````
extends  Activity implements OnClickListener{

     private static final String TAG = "ServicesDemo";
     public String myimageURL;
     private EditText Lyrics;
    private ImageView AlbumPic;
    private Button play,  stop;
    private TextView Artist, Song, Album, News, Lyric;
    private UpdateTimeTask m_updateTime;
    private Handler m_handler;
    Parser data;
    /** The delay in milliseconds between updates. */
    private final int DELAY = 20000;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Artist =(TextView)findViewById(R.id.tvArtist);
        Song  =(TextView)findViewById(R.id.tvSongTitle);
        Album =(TextView)findViewById(R.id.tvAlbum);
        play = (Button) findViewById(R.id.play);
        stop = (Button) findViewById(R.id.stop);
        Lyrics = (EditText) findViewById(R.id.tvLyrics);
        News = (TextView)findViewById(R.id.tvAnouncement);
        AlbumPic = (ImageView) findViewById(R.id.AlbumPic);

        play.setOnClickListener(this);
        stop.setOnClickListener(this);

        m_updateTime = new UpdateTimeTask();

        m_handler = new Handler();
        m_handler.post(m_updateTime);
    }

    private class UpdateTimeTask implements Runnable {
        public void run() {

            try {

                SAXParserFactory saxPF = SAXParserFactory.newInstance();
                SAXParser saxP = saxPF.newSAXParser();
                XMLReader xmlR = saxP.getXMLReader();

                URL url = new URL("http://www.mysite.com/AndroidTest.php"); 
                XMLHandler myXMLHandler = new XMLHandler();
                xmlR.setContentHandler(myXMLHandler);
                xmlR.parse(new InputSource(url.openStream()));

            } catch (Exception e) {
                System.out.println(e);
            }
            data = XMLHandler.data;

            for (int i = 0; i < data.getTitle().size(); i++) {

           Lyrics.setText(data.getLyric().get(i));
                 myimageURL = data.getPic().get(i);

            Song.setText("Title = "+data.getTitle().get(i));

            Artist.setText("Artist = "+data.getArtist().get(i));

            Album.setText("Album = "+data.getAlbum().get(i)); 

 }

 downloadFile(myimageURL );

}

Bitmap bmImg;
void downloadFile(String fileUrl) {
 URL myFileUrl = null;
 try {
    myFileUrl = new URL(fileUrl);
 } catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
 }
 try {
    HttpURLConnection conn = (HttpURLConnection) myFileUrl
          .openConnection();
    conn.setDoInput(true);
    conn.connect();
    InputStream is = conn.getInputStream();

    bmImg = BitmapFactory.decodeStream(is);
    AlbumPic.setImageBitmap(bmImg);
 } catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
 }
 m_handler.postDelayed(m_updateTime, DELAY);
 AlbumPic.clearAnimation();
}

} 
````  `**我的xml代码**

```
<?xml version="1.0"?>
<CATALOG>
<CD>
<LYRIC>Stop that train: I'm leavin' - today!
Stop that train: I'm leavin' - anyway!
Stop that train: I'm leavin'. and I said:
It won't be too long whether I'm right or wrong;
I said, it won't be too long whether I'm right or wrong.

All my good life I've been a lonely man,
Teachin' my people who don't understand;
And even though I tried my best,
I still can't find no happiness.

So I got to say:
Stop that train: I'm leavin' - oh, baby now!
Stop that train: I'm leavin' - don't care what you say!
Stop that train: I'm leavin'. and I said:
It won't be too long whether I'm right or wrong;
Said, it won't be too long whether I'm right or wrong.

Some goin' east; and-a some goin' west,
Some stand aside to try their best.
Some livin' big, but the most is livin' small:
They just can't even find no food at all.

I mean, stop it:
Stop that train: I'm leavin' - leavin', mm-hmm.
Stop that train: I'm leavin' - I don't mind!
Stop that train: I'm leavin'. and I said:
It won't be too long whether I'm right or wrong;
I said it won't be too long whether I'm right or wrong.

Stop that train: I'm leavin' - leavin'!
Stop that train: I'm leavin' - can't take it!
Stop that train: I'm leavin' - got to be better!
It won't be too long whether I'm right or wrong;
I said it won't be too long whether I'm right or wrong.</LYRIC>
<ARTIST>Bob Marley</ARTIST>
<TITLE>Stop That Train</TITLE>
<ALBUM>Talkin blues</ALBUM>
<PIC>http://www.mysite.com/Android/Radio/AlbumCovers/Bob-Marley-Talkin-blues.jpg</PIC>
</CD>
</CATALOG> 
```

我也尝试使用edittext加载歌词，但它也只显示`<LYRIC>`标签的第一行

有人可以提供一些建议如何在 textview 中显示整个文本

谢谢

我的 xmlhandler

```
public class XMLHandler extends DefaultHandler {

    String elementValue = null;
    Boolean elementOn = false;
    public static Parser data = null;

    public static Parser getXMLData() {
        return data;
    }

    public static void setXMLData(Parser data) {
        XMLHandler.data = data;
    }

    /** 
     * This will be called when the tags of the XML starts.
     **/
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        elementOn = true;

        if (localName.equals("CATALOG"))
        {
            data = new Parser();
        } else if (localName.equals("CD")) {
            /** 
             * We can get the values of attributes for eg. if the CD tag had an attribute( <CD attr= "band">Akon</CD> ) 
             * we can get the value "band". Below is an example of how to achieve this.
             * 
             * String attributeValue = attributes.getValue("attr");
             * data.setAttribute(attributeValue);
             * 
             * */
        }
    }

    /** 
     * This will be called when the tags of the XML end.
     **/
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {

        elementOn = false;

        /** 
         * Sets the values after retrieving the values from the XML tags
         * */ 
        if (localName.equalsIgnoreCase("title"))
            data.setTitle(elementValue);
        else if (localName.equalsIgnoreCase("artist"))
            data.setArtist(elementValue);
        else if (localName.equalsIgnoreCase("album"))
            data.setAlbum(elementValue);
        else if (localName.equalsIgnoreCase("lyric"))
            data.setLyric(elementValue);
        else if (localName.equalsIgnoreCase("pic"))
            data.setPic(elementValue);

    }

    /** 
     * This is called to get the tags value
     **/
    @Override
    public void characters(char[] ch, int start, int length)
            throws SAXException {

        if (elementOn) {
            elementValue = new String(ch, start, length);
            elementOn = false;
        }

    }

    public void post(Runnable mUpdate) {
        // TODO Auto-generated method stub

    }

    public void removeCallbacks(Runnable sendUpdatesToUI) {
        // TODO Auto-generated method stub

    }

    public void postDelayed(Runnable runnable, int i) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:21:32.063

我建议你检查你的 XMLHandler 对象。我怀疑你那里有问题。

如果您可以向我们展示您的 XMLHandler 类，那会更好地帮助您。

**编辑：**

我对您的处理程序进行了一些更改。我认为您在读取元素值时可能会遇到问题。改用 CharArrayWriter （我已经解决了一个相同的问题）。而且我认为您也不需要'elementOn'。如果它是不必要的变量，请不要使用它。确保在 XML 布局上定义了一个多 TextView。希望它有效:-)

```
public class XMLHandler extends DefaultHandler {

    private static final String TAG = "XMLHandler";
    private String elementValue = null;
    public static Parser data = null;

    /** The contents. */
    private CharArrayWriter contents = new CharArrayWriter();

    public static Parser getXMLData() {
        return data;
    }

    public static void setXMLData(Parser data) {
        XMLHandler.data = data;
    }

    /** 
     * This will be called when the tags of the XML starts.
     **/
    @Override
    public void startElement(String uri, String localName, String qName,
            Attributes attributes) throws SAXException {

        /**It´s a good practice to reset the CharArrayWriter when you start any element.*/
        contents.reset();

        if (localName.equals("CATALOG"))
        {
            data = new Parser();
        } else if (localName.equals("CD")) {
            /** 
             * We can get the values of attributes for eg. if the CD tag had an attribute( <CD attr= "band">Akon</CD> ) 
             * we can get the value "band". Below is an example of how to achieve this.
             * 
             * String attributeValue = attributes.getValue("attr");
             * data.setAttribute(attributeValue);
             * 
             * */
        }
    }

    /** 
     * This will be called when the tags of the XML end.
     **/
    @Override
    public void endElement(String uri, String localName, String qName)
            throws SAXException {
        /** 
         * Sets the values after retrieving the values from the XML tags
         * */ 
         String elementValue = contents.toString().trim();

        if (localName.equalsIgnoreCase("title"))
            data.setTitle(elementValue);
        else if (localName.equalsIgnoreCase("artist"))
            data.setArtist(elementValue);
        else if (localName.equalsIgnoreCase("album"))
            data.setAlbum(elementValue);
        else if (localName.equalsIgnoreCase("lyric"))
            data.setLyric(elementValue);
        else if (localName.equalsIgnoreCase("pic"))
            data.setPic(elementValue);
    }

    /** 
     * This is called to get the tags value
     **/
    @Override
    public void characters(char[] ch, int start, int length) throws SAXException {
            contents.write(ch, start, length);
    }

    @Override
    public void endDocument() throws SAXException {
        Log.i(TAG, "Catalog parse finalized with success.");
    }
} 
`````

# meteor - Meteor - 创建要下载的文件（不触发流星重启）

> ID：11353252
> 
> 赞同：2
> 
> 时间：2012-07-05T22:12:16.373
> 
> 标签：meteor

我想创建一个文件，然后使用 Meteor 提供它，但是当我在公共目录中创建/更新文件时，我不希望服务器重新启动。

用户将单击一个按钮在服务器上创建一个配置文件，我希望用户能够下载该配置文件。

有没有办法在不触发服务器重启的情况下做到这一点？

我尝试创建文件链接并创建隐藏文件，但没有任何效果。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T06:46:39.453

试试`meteor run --production`。那可能会解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T12:29:42.907

If you doesn't want to run in production mode, here is a workaround:

1.  In order to prevent reloading, you have to generate your files in a folder that is located outside of your project's repository.
2.  Then you will have your meteor app to serve the content of that folder.

Here is an example that uses the `connect` npm repository to make your local folder `/meteor/generated_files` served under the url `hostname.com/downloads/`:

```
var connect = Npm.require('connect');
var fs = Npm.require('fs');

function serveFolder(urlPath, diskPath){
    if(!fs.existsSync(diskPath))
        return false;
    RoutePolicy.declare(urlPath, 'network');
    WebApp.connectHandlers.use(urlPath, connect.static(diskPath));
    return true;
}

serveFolder('/downloads', '/meteor/generated_files/'); 
```

I [published](http://atmospherejs.com/package/static-server) the very primitive package I have that does just that.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:26:14.747

服务器重新启动是因为您在开发模式下运行它，当它在生产中运行时，它不会在内容更改时重新启动。

要在生产中运行，我知道的唯一方法是，在捆绑应用程序后，
请看这里：[http ://docs.meteor.com/#deploying](http://docs.meteor.com/#deploying)

# post - Nutch 和 Http POST 身份验证？

> ID：11353259
> 
> 赞同：1
> 
> 时间：2012-07-05T22:13:07.280
> 
> 标签：post, nutch

我被困在需要抓取具有表单帖子的网站的地步。Nutch 不支持这一点。我该如何解决这个问题，以便我可以使用 Nutch 抓取这些网站？有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T19:32:34.633

这是你们正在寻找的答案：

[http://lifelongprogrammer.blogspot.com/2014/02/part1-using-apache-http-client-to-do-http-post-form-authentication.html](http://lifelongprogrammer.blogspot.com/2014/02/part1-using-apache-http-client-to-do-http-post-form-authentication.html)

和

[https://issues.apache.org/jira/browse/NUTCH-827](https://issues.apache.org/jira/browse/NUTCH-827)

这两个链接有完整和示例代码。如果您正确执行每个步骤，那么您将能够在 Nutch 中实现基于表单的身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T12:36:14.890

1.  使用数据制作文件：需要 auth / URL 以提交表单/表单数据的 URL 的正则表达式
2.  制作自己的http协议插件修改标准协议-httpclient插件。如果发出 http 请求的 URL 需要 auth 并且还没有进行 auth，那么去表单并发送它。

这是最简单的解决方案。问题是，对于大量网站，没有一种简单的解决方案。cookie 过期/在登录期间使用 Javascript 等存在问题。通过 Nutch 的 JIRA 搜索，有很多关于此的讨论。

# c - 为什么不需要将参数传递给 qsort 比较器函数？

> ID：11353260
> 
> 赞同：1
> 
> 时间：2012-07-05T22:13:14.877
> 
> 标签：c, parameters, parameter-passing, void-pointers, qsort

下面的代码取自[这里](http://www.cplusplus.com/reference/clibrary/cstdlib/qsort/)。

```
* qsort example */
#include <stdio.h>
#include <stdlib.h>

int values[] = { 40, 10, 100, 90, 20, 25 };

int compare (const void * a, const void * b)
{
  return ( *(int*)a - *(int*)b );
}

int main ()
{
  int n;
  qsort (values, 6, sizeof(int), compare);
  for (n=0; n<6; n++)
     printf ("%d ",values[n]);
  return 0;
} 
```

我们有一个比较函数，它的签名中有参数，但是当我们在 qsort 中调用它时，没有传递任何参数。`a`函数的值是如何`b`传递给函数的？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:18:46.267

在此表达式的上下文中：

```
qsort (values, 6, sizeof(int), compare); 
```

标识函数的子表达式`compare`衰减为指向该函数的指针（而不是函数调用）。该代码实际上等效于：

```
qsort (values, 6, sizeof(int), &compare); 
```

这与将数组用作函数的参数时发生的事情完全相同（您以前可能见过也可能没见过，但被问得更频繁）：

```
void f( int * x );
int main() {
   int array[10];
   f( array );      // f( &array[0] )
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T22:16:15.293

调用 qsort 时，您将传递一个指向函数的指针，这就是您不指定任何参数的原因。

在 qsort 实现中，从“values”数组中选择值并调用“compare”函数。这就是'a'和'b'如何通过。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:15:02.627

`qsort`传递要比较的数组中任何项目的地址。例如，`&values[3]`和`&values[5]`。

由于它并不真正知道数组中项目的实际类型，因此它使用`size`参数来正确计算地址。例如，请参阅此实现：http: [//insanecoding.blogspot.ie/2007/03/quicksort.html](http://insanecoding.blogspot.ie/2007/03/quicksort.html)

# php - UPDATE JOIN，错误的数据插入

> ID：11353261
> 
> 赞同：1
> 
> 时间：2012-07-05T22:13:15.580
> 
> 标签：php, mysql, sql

所以我有这两个表，**operators_payments AS op**填充了数据，但是**op.date_paid**将为**NULL**，直到付款日期到达，当这种情况发生时，**payment_process AS pp**表用于初始化付款**（pp.date_started 是设置为 NOW())**，然后为完成付款，**op.date_paid**设置为**pp.date_started**。显示的查询用于执行此操作，一切都很好，但是当**所有**记录都**更新**时，其中一条记录并且只有一条记录以不同的时间获得**op.date_paid ，特别是****第二条**部分例如（时间设置为除一之外的所有时间：2012-07-05 17:28:14 **，**时间设置为一：2012-07-05 17:28:02 **）**。

我使用 Mysql 5.5，列具有相同的类型（TIMESTAMP）。我需要这个，因为我需要日期与 pp.date_started 中的日期完全相同。

我的问题是，为什么会发生这种情况，我该怎么做才能让这种情况受到重视？

```
UPDATE operators_payments AS op
    JOIN payment_process AS pp
        ON op.operator_id = pp.operator_id
        AND pp.type = 0
        AND pp.status = 1
SET op.date_paid = pp.date_started, pp.status = 2, pp.message=CONCAT(SUBSTRING_INDEX(message, '|', 1), '| was completed successfully!')
    WHERE op.operator_id = {$this->operator_id}
        AND op.date_paid IS NULL
        AND op.date_end <= pp.date_accounted

+---------------+-----------------------+------+-----+-------------------+----------------+
| Field         | Type                  | Null | Key | Default           | Extra          |
+---------------+-----------------------+------+-----+-------------------+----------------+
| payment       | int(10) unsigned      | NO   | PRI | NULL              | auto_increment |
| operator_id   | int(10) unsigned      | NO   | MUL | 0                 |                |
| date_paid     | timestamp             | YES  | MUL | NULL              |                |
| date_start    | timestamp             | YES  |     | NULL              |                |
| date_end      | timestamp             | YES  | MUL | NULL              |                |
| amount        | decimal(6,4) unsigned | NO   |     | 0.0000            |                |
+---------------+-----------------------+------+-----+-------------------+----------------+

+----------------+--------------+------+-----+-------------------+-----------------------------+
| Field          | Type         | Null | Key | Default           | Extra                          |
+----------------+--------------+------+-----+-------------------+-----------------------------+
| operator_id    | int(11)      | NO   | PRI | NULL              |                             |
| type           | tinyint(4)   | NO   | PRI | NULL              |                             |
| date_started   | timestamp    | YES  |     | CURRENT_TIMESTAMP | on update CURRENT_TIMESTAMP |
| date_accounted | timestamp    | YES  |     | NULL              |                             |
| amount         | decimal(6,4) | YES  |     | NULL              |                             |
| status         | tinyint(4)   | YES  | MUL | 0                 |                             |
| message        | varchar(255) | YES  |     | NULL              |                             |
+----------------+--------------+------+-----+-------------------+-----------------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:22:08.857

我`on update CURRENT TIMESTAMP`对 payment_process 上的 date_started 上的那个子句持怀疑态度......我实际上不确定它在这个查询中可以做什么，但是你正在更新这个查询中的那个表，并使用那个值。我也不喜欢一个名为的列的语义不一致，`date_started`它的值在每次更新时都会改变......但我不知道它是如何使用的。我会评估该列是否需要该子句，看看没有它是否会出现这种奇怪的行为，

# android - 无法理解此 API 的 OAuth 流程

> ID：11353262
> 
> 赞同：0
> 
> 时间：2012-07-05T22:13:21.200
> 
> 标签：android, oauth, scribe, khan-academy

谁能帮我了解可汗学院 API 的 OAuth 流程。可通过此链接访问： [https ://github.com/Khan/khan-api/wiki/Khan-Academy-API-Authentication](https://github.com/Khan/khan-api/wiki/Khan-Academy-API-Authentication)

我正在使用抄写员。

这是工作代码：

```
 OAuthService serv = new ServiceBuilder().provider(KhanApi.class)
     .apiKey("").apiSecret("")
     .build();
     Token token = new Token("", "");

     OAuthRequest req = new OAuthRequest(Verb.GET,
     "http://www.khanacademy.org/api/auth/request_token");

     serv.signRequest(token, req);

     Response resp = req.send();
     System.out.println(resp.getBody()); 
```

收到响应后，您需要将用户重定向到该页面。然后在成功登录后，浏览器将响应一个包含请求令牌的 url...

以下是我尝试过但效果不佳的两种不同的方法及其结果：

1)

```
 OAuthService serv = new ServiceBuilder().provider(KhanApi.class)
 .apiKey("***").apiSecret("***")
 .build();
 Token token = serv.getRequestToken(); 
```

结果是：

线程“主”org.scribe.exceptions.OAuthException 中的异常：响应正文不正确。无法从中提取令牌和秘密：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Login to Khan Academy</title>

        <style>
            #login-page {
                padding-top: 18px;
            }
            .providers {
                height: 100px;
            }
            .providers .provider .img-container {
                height: 80px;
            }

           .horizontal-separator .separator-text {
                background-color: white;
                margin-left: 185px;
            }
            .pw-login {
                width: 415px;
                height: auto;
                text-align: right;
            }
            .pw-login img.tree {
                float: left;
            }

        </style>

    </head>
    <body>
        <article id="login-page">
            <div id="login-inner-content">
                <form method="POST"
                    class="auth-form"
                    id="login-form"
                    action="https://khan-academy.appspot.com/login/mobileoauth">
                <h3>Login to Khan Academy</h3>
                <input type="hidden" name="oauth_map_id" value="889298340">
                <input type="hidden" name="view" value="normal">

                <ul class="providers">
                    <li class="provider action-gradient" title="Google">

            </div>
        </article>
    </body>
</html>'
    at org.scribe.extractors.TokenExtractorImpl.extract(TokenExtractorImpl.java:41)
    at org.scribe.extractors.TokenExtractorImpl.extract(TokenExtractorImpl.java:27)
    at org.scribe.oauth.OAuth10aServiceImpl.getRequestToken(OAuth10aServiceImpl.java:52)
    at com.saeid.scribe.oauth.Main.main(Main.java:117) 
```

响应是一个损坏的 html 文件的字符串。（在没有显示图像的意义上损坏......）

2）我也试过：

```
 OAuthRequest req = new OAuthRequest(Verb.GET,
            "http://www.khanacademy.org/api/auth/request_token");

    Map<String, String> parameters = generateParameters("GET",
            "http://www.khanacademy.org/api/auth/request_token");

    req.addQuerystringParameter("oauth_consumer_key", parameters.get("oauth_consumer_key"));
    req.addQuerystringParameter("oauth_nonce", parameters.get("oauth_nonce"));
    req.addQuerystringParameter("oauth_signature", parameters.get("oauth_signature"));
    req.addQuerystringParameter("oauth_signature_method", parameters.get("oauth_signature_method"));
    req.addQuerystringParameter("oauth_timestamp", parameters.get("oauth_timestamp"));
    req.addQuerystringParameter("oauth_version", parameters.get("oauth_version"));

    Response res = req.send(); 
```

结果是：

```
OAuth error. Invalid signature. Expected signature base string: GET&http%3A%2F%2Fwww.khanacademy.org%2Fapi%2Fauth%2Frequest_token&oauth_consumer_key%3D***********%26oauth_nonce%3D1341526030%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1341526030%26oauth_version%3D1.0 
```

我使用相同的基本字符串来生成签名，并且我使用消费者密钥作为 HMAC-SHA1 方法的密钥。

以下是 KhanAPI 的样子： import org.scribe.builder.api.DefaultApi10a; 导入 org.scribe.model.Token；

公共类 KhanApi 扩展 DefaultApi10a{

```
@Override
public String getAccessTokenEndpoint() {
    return "http://www.khanacademy.org/api/auth/access_token";
}

@Override
public String getAuthorizationUrl(Token arg0) {
    return "";
}

@Override
public String getRequestTokenEndpoint() {
    return "http://www.khanacademy.org/api/auth/request_token";
} 
```

}

谁能帮我？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:29:18.533

Scribe 不会添加所有必需的 OAuth 参数并为您执行签名吗？我正在查看 LinkedIn 示例，该示例基于默认的 OAuth 1.0a 流程，但我没有看到它做类似的事情。

[https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/LinkedInExample.java](https://github.com/fernandezpablo85/scribe-java/blob/master/src/test/java/org/scribe/examples/LinkedInExample.java)

如果您必须手动制定 URL 并自己签名，那么 Scribe 到底在为您做什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:02:02.487

这个 api 返回一个预期的基本字符串，这很棒。您可以在调试模式下运行 scribe 并查看您正在生成的基本字符串，如下所示：

```
 OAuthService serv = new ServiceBuilder().provider(KhanApi.class)
 .apiKey("***").apiSecret("***")
 .debug()
 .build(); 
```

# c# - 如何将内置事件重置为 null 以便可以释放视图

> ID：11353263
> 
> 赞同：0
> 
> 时间：2012-07-05T22:13:24.780
> 
> 标签：c#, wpf

问题是，在我的视图中，我正在订阅 CollectionChanged 事件，如下所示：

初始化组件（）；CollectionChanged += SomeMethod

每当 DataTemplate 重绘视图时，它总是将 SomeMethod 链接到 CollectionChanged。而且我认为由于引用旧视图没有得到 GC'd。我怀疑这可能是我漏水的原因。我需要将 SomeMethod 注册到 CollectionChanged，所以问题是.. 我怎样才能清除 CollectionChanged。UserControl 是否有清除所有事件订阅的方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:12:25.360

假设您有以下内容：

```
 public Form1()
    {
        InitializeComponent();
        collection.CollectionChanged += new NotifyCollectionChangedEventHandler(collection_CollectionChanged);
    } 
```

并且假设收集的寿命比这个表单长，那么上面的事件处理程序将阻止表单被垃圾收集。假设您每次显示时都在创建一个新表单，您可以在表单的 FormClosed 事件中取消订阅，如下所示：

```
 public Form1()
    {
        InitializeComponent();
        collection.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(collection_CollectionChanged);
        FormClosed += new FormClosedEventHandler(Form1_FormClosed);
    }

    void Form1_FormClosed(object sender, FormClosedEventArgs e)
    {
        collection.CollectionChanged -= new System.Collections.Specialized.NotifyCollectionChangedEventHandler(collection_CollectionChanged);
    } 
```

# cakephp - CakePHP 2.2.0 - AuthComponent - 与用户不同的模型 - 密码总是不正确

> ID：11353267
> 
> 赞同：1
> 
> 时间：2012-07-05T22:13:37.603
> 
> 标签：cakephp, cakephp-2.0

我在登录与使用 AuthController 的用户不同的模型时遇到问题。

它是管理员，而不是用户表。

在我的管理员模型中，我有：

```
function beforeSave(){
        if(isset($this->data['Administrator']['password'])) 
            $this->data['Administrator']['password'] = AuthController::password($this->data['Administrator']['password']); 
            return true; 
    } 
```

应用控制器：

```
public $components = array(
        'Session', 
        'Auth' => array(
            'loginAction' => array('controller' => 'administrators', 'action' => 'login'),
            'loginRedirect' => array('controller' => 'Home', 'action' => 'index'),
            'logoutRedirect' => array('controller' => 'Home', 'action' => 'index'), 
            'authError' => "You can't access that page.",
            'authorize' => array('Controller')      
        )
    );

    public function beforeFilter(){
        $this->Auth->userModel = 'Administrator';
    } 
```

在管理员控制器中：

```
 public function login(){
            if($this->request->is('post')){
                if($this->Auth->login()){
                    $this->redirect($this->Auth->redirect());
                }
                else{
                    $this->Session->setFlash('Your username/password combination was incorrect.');
                }
            }
        }

public function logout(){
        $this->redirect($this->Auth->logout());
}

public function beforeFilter(){
        parent::beforeFilter();
} 
```

并查看：

```
<?php
echo $this->Form->create('Administrator', array('controller' => 'administrators', 'action' => 'login'));
echo $this->Form->input('username');
echo $this->Form->input('password');
echo $this->Form->end('Login');
?> 
```

我调试了 $this->request->data['Administrator']['password'] 并且我得到了与数据库中相同的哈希值。

我不知道为什么它总是说用户名/密码不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:19:43.410

您可以通过在 AppController 中包含以下代码来完成此操作。

```
public $components = array(
'Auth' => array(
        'authenticate' => array(
            'Form' => array(
                'userModel' => 'Administrator',
                'fields' => array(
                    'username' => 'USER_LOGINNAME',
                    'password' => 'USER_PASSWORD'
                )
            )
        )
    )
); 
```

在 AppController beforeFilter() 方法中编写以下内容：

```
 public function beforeFilter()
{        
    if($this->Auth->user('USER_ID'))
    {
        $this->set('logged_in', true);                     
    }
    else
    { 
        $this->set('logged_in', false);
    }

    //Configure AuthComponent
    $this->Auth->userScope = array('Administrator.USER_STATUS' => '1');
    $this->Auth->loginAction = array('controller' => 'administrators', 'action' => 'login');
    $this->Auth->logoutRedirect = array('controller' => 'administrators', 'action' => 'login');
    $this->Auth->loginRedirect = array('controller' => 'administrators', 'action' => 'dashboard');        
} 
```

在您的管理员模型中：

```
public function beforeSave()
{
    if(!empty($this->data['Administrator']['USER_PASSWORD']))
    {
        $this->data['Administrator']['USER_PASSWORD'] = AuthComponent::password($this->data['Administrator']['USER_PASSWORD']);    
    }        
    return true;
} 
```

在您的管理员控制器中：

```
public function beforeFilter()
{
    parent::beforeFilter();
    $this->Auth->allow('login');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:33:48.727

是`AuthComponent::password`，不是`AuthController::password`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T22:27:49.540

```
public function login(){
            if($this->request->is('post')){
                if($this->Auth->login()){

// dont use this line /////////////////////////////////////////////////////
                    $this->redirect($this->Auth->redirect());
////////////////////////////////////////////////////////////////////////////
use this
'loginAction' => array('controller' => 'administrators', 'action' => 'login'),
//////////////////////////////////////////////////////////////////////////                
 }
                else{
                    $this->Session->setFlash('Your username/password combination was incorrect.');
                }
            }
        }

public function logout(){
        $this->redirect($this->Auth->logout());
}

public function beforeFilter(){
        parent::beforeFilter();
} 
```

# less - 减少和内联工具

> ID：11353271
> 
> 赞同：0
> 
> 时间：2012-07-05T22:14:05.767
> 
> 标签：less, minify

我正在寻找一种将网站缩小到一个文件的工具。
我找到[了内联](https://github.com/remy/inliner/)，但它也包含了我的较少客户端脚本，我希望我的较少通过编译为 css 并被包含在内。

我想内联 javascript、样式表和图像。

有什么我可以使用的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:34:20.303

快速搜索让我找到了这些选项：

*   [Node-AMS](https://github.com/kof/node-ams) - 缩小 js（使用 uglifyjs）、缩小 css（使用 yahoo 的 cssmin）、使用 base64 数据编码在 css 中内联小图像等。
*   [Bundler](https://github.com/ServiceStack/Bundler) - 编译、缩小和组合你的网站少、sass、css、coffeescript 和 js
*   [Node-minify](https://github.com/srod/node-minify) - 使用 Yui Compressor / Google Closure Compiler / UglifyJS 压缩 javascript 和 css 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:43:51.380

我推荐[奥普拉](https://github.com/jakobmattsson/opra)

* *O* *ne * *P* *age to * *R* *ule them * *A* *ll

提供为单页应用程序提供和构建 html 文件的功能。

在将文件放入 html 文件之前处理诸如连接、压缩和编译文件等繁琐的事情。

支持coffeescript和更少的开箱即用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:48:33.290

目前，我还没有找到完美的工具，也没有更多的时间去寻找。

我想我一直在寻找类似[Node-AMS](https://github.com/kof/node-ams)或[grunt](https://github.com/cowboy/grunt)的东西。Node-AMS 似乎与 grunt 非常相似，但 grunt 拥有更大的社区。

我将来可能会创建一些我需要的工具作为 grunt 插件。

# c# - Java 和 C# 中 volatile 语义背后的原因是什么

> ID：11353274
> 
> 赞同：12
> 
> 时间：2012-07-05T22:14:09.090
> 
> 标签：c#, java, multithreading, multiprocessing, volatile

C# 和 Java 都定义
* **volatile 读取具有获取语义**
* **volatile 写入具有释放语义**

**我的问题是：**

> 1.  这是定义 volatile 的唯一正确方法吗？
> 2.  如果不是，如果语义颠倒，事情会变得非常不同，也就是说
>     
>     *   易失性读取具有释放语义
>     *   易失性写入具有获取语义

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-06T00:09:18.770

语义背后的推理`volatile`植根于[Java 内存模型](http://www.cs.umd.edu/~pugh/java/memoryModel/jsr-133-faq.html)，它是根据**操作**指定的：

*   读取和写入变量
*   监视器的锁定和解锁
*   开始和加入线程

Java 内存模型为 Java 程序中可能发生的动作定义了一个称为***发生前***[的部分排序。](http://en.wikipedia.org/wiki/Partially_ordered_set)通常不能保证线程可以看到彼此动作的结果。

 *假设您有两个动作**A**和**B**。为了保证执行动作 B 的线程可以看到动作 A 的结果，A 和 B 之间必须存在先***发生***关系。如果没有，JVM 可以随意**重新排序**它们。

未正确同步的程序可能存在数据争用。当一个变量被> 1个线程读取并被> = 1个线程写入时，就会发生数据竞争，但读取和写入操作未通过happens-before排序进行排序。

因此，正确同步的程序没有数据竞争，并且程序中的所有操作都以固定的顺序发生。

所以动作一般只有**部分**排序，但也有一个**全**序：

*   锁的获取和释放
*   读取和写入**volatile**变量

这些动作是完全有序的。

> 这使得用“后续”锁定获取和易失性变量读取来描述*发生之前是明智的。*

关于你的问题：

1.  在发生之前的关系中，您有一个替代定义`volatile`
2.  颠倒顺序对上面的定义没有意义，特别是因为涉及到总顺序。

![发生之前](../Images/8b33961c9399955330ecc56ad0ac9877.png)

> 这说明了当两个线程使用公共**锁**同步时的发生前关系。线程 A 中的所有动作都**按照程序顺序规则排序**，线程 B 中的动作也是如此。因为 A 释放锁 M 并且 B**随后**获取 M，所以在释放锁之前 A 中的所有动作都**排序**在 B 中的动作之前获得锁后。**当两个线程在不同的锁上**同步时，我们不能说它们之间的动作顺序，两个线程中的动作之间没有发生之前的关系。

资料来源：[Java 并发实践](http://jcip.net/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-05T23:20:29.763

获取/释放语义的强大之处与其说是其他线程多久能看到 volatile 字段本身的新写入值，不如说是 volatile 操作在不同线程之间建立了先发生关系的方式。如果线程 A 读取一个 volatile 字段并看到另一个线程 B 中写入该字段的值，则线程 A 也可以保证看到线程 B 在执行该操作之前看到由线程 B 写入*其他*（不一定是 volatile）变量的值易失性写入。这看起来像缓存刷新，但*只是*从读取 volatile 的线程的角度来看，其他不接触 volatile 字段的线程对 B 没有排序保证，并且如果编译器/JIT 可能会看到其早期的一些非易失性写入，但不会看到其他写入如此倾向。

监视器获取/释放的相似特征在于它们诱导的先发生关系 - 一个线程在释放监视器之前执行的操作保证在另一个线程随后获取同一监视器之后可见。Volatile 为您提供与监视器同步相同的排序保证，但不会阻塞。*

# node.js - 在 Node.JS 的类中使用 Socket.IO 回调的正确方法是什么？

> ID：11353277
> 
> 赞同：3
> 
> 时间：2012-07-05T22:14:31.383
> 
> 标签：node.js, socket.io

我正在使用带有 Socket.IO 和 Express 的 Node.JS。我的目标是创建一个模块来创建自定义 Socket.IO+Express 服务器，加载我的应用程序需要的所有功能。例如，跟踪在任何给定时间连接的客户端数量。

问题是，如果可能的话，我想让服务器作为一个类工作。我已经看到其他 Node.JS 模块很好地使用类（包括 Socket.IO 本身），所以我认为它不应该与 Node 的面向模块的架构冲突。我需要它来处理类的原因是我希望能够轻松地创建服务器的多个实例。

这是我所拥有的（为简洁起见）：

**index.js**

```
var myserver = require("./myserver");
var myserver1 = myserver.createServer();
var myserver2 = myserver.createServer();

myserver1.port = 8080;
myserver2.port = 8081;

myserver1.start();
myserver2.start(); 
```

**我的服务器.js**

```
var io = require("socket.io");
var express = require("express");
var path = require("path");

function MyServer()
{
     this.port = 8080;
     this.expressServer = null;
     this.ioServer = null;

     this.clientCount = 0;
}

Server.prototype.getClientCount = function()
{
    return this.clientCount;
}

Server.prototype.start = function()
{
    this.expressServer = express.createServer();
    this.ioServer      = io.listen(this.expressServer);
    this.expressServer.listen(this.port);

    this.ioServer.sockets.on(
        "connection",
        function()
        {
            this.clientCount++;
            console.log(this.clientCount + " clients connected.");
        }
    );
}

exports.createServer = function() { return new MyServer(); }; 
```

回调里面的代码`"connection"`是不正确的，因为`this`Socket.IO的回调中的关键字是指触发事件的*客户端*`"connection"`对象，而不是`MyServer`对象。那么有没有办法`clientCount`从回调内部访问属性？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:51:42.517

`this`通过将变量复制到~~另一个~~变量（大多数人喜欢调用它，`self`但有些人更喜欢`that`）并在连接处理程序中使用它来创建正确的闭包：

```
var self=this;
this.ioServer.sockets.on(
    "connection",
    function()
    {
        self.clientCount++;
        console.log(self.clientCount + " clients connected.");
    }
); 
```

# c++ - 错误：函数声明中有两种或多种数据类型？

> ID：11353283
> 
> 赞同：2
> 
> 时间：2012-07-05T22:15:06.577
> 
> 标签：c++, if-statement, types, declaration

我的计划是制作一个简单的加法计算器，然后继续前进。请记住，这是我编码的第一天。

```
#include <iostream>
#include <string>

using namespace std;

int a;
int b;
int sum;
string ans;

class CalcClass{
public:
    int add (int a, int b) {
        cout << "Pick the numbers you want to add" << endl;
        cin >> a >> b;
        sum = a + b;
        return sum;
    }
}; 
```

添加`string ans;`（在顶部）。现在我得到一个`"error: no matching function for call to 'CalcClass::add()'"`

`calcObject`如果我已经创建并用于`calcObject.add();`调用该函数，为什么会这样说？

```
void pickFunction(){
    cout << "What Function do you want to do? \n Add, Subtract, multiply, or divide? ";
    cin >> ans;

    if (ans == "add"){
        CalcClass calcObject;
        calcObject.add();
    }

int main(){
    pickFunction();

    cout << "Your answer is : " << sum << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:18:04.567

```
CalcClass.calcObject; 
```

不是创建对象的方法。`.`运算符应用于访问对象的成员/方法。所以，创建一个像 -

```
CalcClass calcObject; 
```

如果在编译器可以看到定义之前发生对象实例化，则类的前向声明也没有用。因此，请确保编译器`CalcClass`在 pickFunction() 之前看到。话虽如此，您必须为您的程序调用`pickFunction`from main 才能执行任何有用的操作。

[从The Definitive C++ Book Guide](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)中挑选一本书并开始阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:21:48.527

`ans`需要一个类型（可能`string`），`add`需要引号（`"add"`），`CalcClass.calcObject;`需要是`CalcClass calcObject;`。

'dot' 语法 ( `x.y`) 用于访问存储在对象内部的数据或函数，而不是类（例如`calcObject.add();`，而不是`CalcClass.add();`）。

此外，正如 Mahesh 所说，`pickFunction();`需要在`main`. 这应该如下所示：

```
void pickFunction(){
    //code
}
int main() {
    pickFunction();
    //...
} 
```

# r - 如何在 ggplot2 中为构面添加通用标签？

> ID：11353287
> 
> 赞同：90
> 
> 时间：2012-07-05T22:15:36.797
> 
> 标签：r, label, facet, ggplot2

我经常有用于刻面的数值。我希望提供足够的信息来解释补充标题中的这些分面值，类似于轴标题。labeller 选项会重复很多不必要的文本，并且不能用于较长的变量标题。

有什么建议么？

默认值：

```
test<-data.frame(x=1:20, y=21:40, facet.a=rep(c(1,2),10), facet.b=rep(c(1,2), each=20))
qplot(data=test, x=x, y=y, facets=facet.b~facet.a) 
```

![在此处输入图像描述](../Images/d6f8aafb33b55812d3bad6ccc0e38b6a.png)

我想要什么：

![在此处输入图像描述](../Images/a349f3b396f62e149e40db804dacde76.png)

我在ggplot中能做的最好的事情：

```
qplot(data=test, x=x, y=y)+facet_grid(facet.b~facet.a, labeller=label_both) 
```

![在此处输入图像描述](../Images/8978f10693c95b0346c9685dc2af1633.png)

正如@Hendy 所指出的，类似于： [向 ggplot2 绘图添加辅助 y 轴 - 使其完美](https://stackoverflow.com/questions/9096671/add-a-secondary-y-axis-to-ggplot2-plots-make-it-perfect)

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-30T09:06:21.980

由于最新的内部`ggplot2`使用`gtable`，修改图形非常容易：

```
library(ggplot2)
test <- data.frame(x=1:20, y=21:40, 
                   facet.a=rep(c(1,2),10), 
                   facet.b=rep(c(1,2), each=20))
p <- qplot(data=test, x=x, y=y, facets=facet.b~facet.a)

# get gtable object
z <- ggplotGrob(p)

library(grid)
library(gtable)
# add label for right strip
z <- gtable_add_cols(z, unit(z$widths[[7]], 'cm'), 7)
z <- gtable_add_grob(z, 
                     list(rectGrob(gp = gpar(col = NA, fill = gray(0.5))),
                          textGrob("Variable 1", rot = -90, gp = gpar(col = gray(1)))),
                     4, 8, 6, name = paste(runif(2)))

# add label for top strip
z <- gtable_add_rows(z, unit(z$heights[[3]], 'cm'), 2)
z <- gtable_add_grob(z, 
                     list(rectGrob(gp = gpar(col = NA, fill = gray(0.5))),
                          textGrob("Variable 2", gp = gpar(col = gray(1)))),
                     3, 4, 3, 6, name = paste(runif(2)))

# add margins
z <- gtable_add_cols(z, unit(1/8, "line"), 7)
z <- gtable_add_rows(z, unit(1/8, "line"), 3)

# draw it
grid.newpage()
grid.draw(z) 
```

![在此处输入图像描述](../Images/4c6fdeca47704aa11565ff53c7e7625c.png)

当然，您可以编写一个自动添加条形标签的函数。的未来版本`ggplot2`可能具有此功能；不过不确定。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-29T15:36:26.630

可能有更好的方法，但您可以：

```
fac1 = factor(rep(c('a','b'),10))
fac2 = factor(rep(c('a','b'),10))
data = data.frame(x=1:10, y=1:10, fac1=fac1, fac2=fac2)
p = ggplot(data,aes(x,y)) + ggplot2::geom_point() + 
facet_grid(fac1~fac2)
p + theme(plot.margin = unit(c(1.5,1.5,0.2,0.2), "cm"))
grid::grid.text(unit(0.98,"npc"),0.5,label = 'label ar right', rot = 270) # right
grid::grid.text(unit(0.5,"npc"),unit(.98,'npc'),label = 'label at top', rot = 0)   # top 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2021-09-11T18:39:55.380

辅助轴现在是一个选项：[https ://ggplot2.tidyverse.org/reference/sec_axis.html](https://ggplot2.tidyverse.org/reference/sec_axis.html)

```
# Basic faceted plot
p <- ggplot(mtcars, aes(cyl, mpg)) +
  geom_point() +
  facet_grid(vs ~ am)

    # Create a simple secondary axis for the facets (use the appropriate scale_x function)
p + 
  scale_y_continuous(sec.axis = sec_axis(~ . , name = "SECOND Y AXIS", breaks = NULL, labels = NULL)) +
  scale_x_continuous(sec.axis = sec_axis(~ . , name = "SECOND X AXIS", breaks = NULL, labels = NULL)) 
```

[![绘图输出](../Images/5d228fdf23db9bfeb530d10c21cb2070.png)](https://i.stack.imgur.com/Tg7fr.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-21T02:24:06.010

除了 kohske 概述的方法之外，您还可以为通过更改添加的框添加边框

```
col=NA 
```

至

```
col=gray(0.5), linetype=1 
```

还有，改变

```
fill=gray(0.5) 
```

为了

```
fill=grey(0.8) 
```

和

```
gp=gpar(col=gray(1)) 
```

至

```
gp=gpar(col=gray(0)) 
```

如果您希望新条与构面标签匹配

IE

```
z <- gtable_add_grob(z, 
      list(rectGrob(gp = gpar(col = gray(0.5), linetype=1, fill = gray(0.8))),
      textGrob("Variable 1", rot = -90, gp = gpar(col = gray(0)))),
      4, 8, 6, name = paste(runif(2))) 
```

# node.js - 如何使用nodeJS TCP服务器和MongoDB实现会话？

> ID：11353288
> 
> 赞同：1
> 
> 时间：2012-07-05T22:15:49.133
> 
> 标签：node.js, mongodb

我正在为 iOS 创建一个基于 TCP 的游戏服务器，它涉及注册和登录。用户将作为一个集合存储在 MongoDB 中。登录完成后，我会生成一个唯一的会话 ID -**如何**？

我想知道节点服务器中保留的所有数据以及可以存储在数据库中的数据。会话令牌或套接字集合（如果我正在维护持久连接等）之类的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:27:31.953

Node.JS 默认没有任何会话。事实上，有一个[用于管理 MongoDB 会话的插件](https://github.com/mikkel/express-session-mongo)。

但是，尚不清楚您是否真的需要会话。如果您使用 socket.io 打开一个直接套接字，那是一个事实上的会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:23:59.787

Node.js 本身不会为您管理会话。它只是将一个 API 暴露给底层的 Unix 设施以进行 Socket 通信。HTTP 本身是一个无状态协议，也没有会话。另一方面，SSH 是一种有状态的协议，但我认为这两种协议都不适合您。

创建一个 uniuqe ID 真的很简单，你需要做的就是散列一些关于用户的数据。他们的`SHA(IP address + time + username)`. 见：[http ://nodejs.org/api/crypto.html](http://nodejs.org/api/crypto.html)

许多应用程序采用的一种方法是创建自己的协议并使用它发送消息。你将不得不处理很多案件。而且我本人从未处理过移动设备，在这些移动设备中存在严重的连接挑战和缓存要求，而这在台式机上并不是一个大问题。

为了解决这些问题，Scribd 的创始人创办了一家名为 Parse 的公司，它应该让你做事更容易。看看他们的网站：[https](https://parse.com/) ://parse.com/ 。

但是，如果您想做一些身份验证，请查看 Everyauth，它为您提供了很多。你可以在这里找到它：[https](https://github.com/bnoguchi/everyauth/) ://github.com/bnoguchi/everyauth/ 。

# linux - RRDTool GPRINT 格式化与 printf

> ID：11353289
> 
> 赞同：5
> 
> 时间：2012-07-05T22:16:06.450
> 
> 标签：linux, bash, sed, printf, rrdtool

与这个问题密切相关：[Bash printf prefix](https://stackoverflow.com/questions/11342326/bash-printf-prefix)

我有以下使用 RRDTool 生成 RRDGraph 的 Bash 脚本。

```
#!/bin/bash

now=$(date +%s)
now_formatted=$(date +%s | awk '{printf "%s\n", strftime("%c",$1)}' | sed -e 's/:/\\:/g')

# create power graph for last week
/usr/bin/rrdtool graph /var/www/power-week.png \
--start end-7d --width 543 --height 267 --end $now-1min --slope-mode \
--vertical-label "Watts" --lower-limit 0 \
--alt-autoscale-max \
--title "Power: Last week vs. week before" \
--watermark "(©) $(date +%Y) Alyn R. Tiedtke" \
--font WATERMARK:8 \
DEF:Power=/root/currentcost/ccdata.rrd:Power:AVERAGE \
DEF:Power2=/root/currentcost/ccdata.rrd:Power:AVERAGE:end=$now-7d1min:start=end-7d \
VDEF:Last=Power,LAST \
VDEF:First=Power,FIRST \
VDEF:Min=Power,MINIMUM \
VDEF:Peak=Power,MAXIMUM \
VDEF:Average=Power,AVERAGE \
CDEF:kWh=Power,1000,/,168,* \
CDEF:Cost=kWh,.1029,* \
SHIFT:Power2:604800 \
LINE1:Power2#00CF00FF:"Last Week\\n" \
HRULE:Min#58FAF4:"Min    " \
GPRINT:Power:MIN:"%6.2lf%sW" \
COMMENT:"\\n" \
LINE1:Power#005199FF:"Power  " \
AREA:Power#00519933:"" \
GPRINT:Last:"%6.2lf%sW" \
COMMENT:"\\n" \
HRULE:Average#9595FF:"Average" \
GPRINT:Power:AVERAGE:"%6.2lf%sW" \
COMMENT:"\\n" \
HRULE:Peak#ff0000:"Peak   " \
GPRINT:Power:MAX:"%6.2lf%sW" \
COMMENT:"\\n" \
GPRINT:kWh:AVERAGE:"  total    %6.2lfkWh\\n" \
GPRINT:Cost:AVERAGE:"  cost     %6.2lf £\\n" \
GPRINT:Cost:AVERAGE:"$(printf \\" cost %11s\\" £%.2lf | sed 's/\£/\£ /g')\\n" \
COMMENT:" \\n" \
GPRINT:First:"Showing from %c\\n":strftime \
GPRINT:Last:"          to %c\\n":strftime \
COMMENT:"  Created at $now_formatted" 
```

这会产生这样的图表（注意`\`图例中较低成本线上的领先）： -

![RRD 一周的功率](../Images/c8724f54c6b96ea367cc687b9fcd2c1c.png)

具体集中在以下行：-

```
GPRINT:Cost:AVERAGE:"$(printf \\" cost %11s\\" £%.2lf | sed 's/\£/\£ /g')\\n" \ 
```

这是在图例中打印出较低成本线的线。

我将 GPRINT 格式的值传递`£4.54`给 Bash 的`printf`函数，以填充到 11 个空格和一个`cost`标签前缀。然后我通过管道将`sed`其添加`£`到实际值和实际值之间。

我想知道的是，为什么`\`输出中会出现转义？`\\`如果我在 printf bash 抱怨缺少某些东西之后删除。

我将如何抑制它`\`在输出中的出现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:19:50.020

试试这条线：

```
GPRINT:Cost:AVERAGE:"$(printf ' cost %11s' £%.2lf | sed 's/\£/\£ /g')\\n" \ 
```

我将*内部* `"`标记更改为`'`标记并删除了反斜杠。

# javascript - 手写笔 (CSS) 的客户端使用

> ID：11353296
> 
> 赞同：11
> 
> 时间：2012-07-05T22:16:35.810
> 
> 标签：javascript, css, google-chrome-extension, stylus, opera-extension

这里的新人。我一直在寻找使用[Stylus](https://github.com/learnboost/stylus)（编译 CSS）客户端的好解决方案。

现在，我知道有关不使用已编译 CSS 客户端的提示，因为：

1.  如果不使用 JS，它会中断。
2.  在实时客户端环境中编译需要额外的时间。
3.  它需要在每个客户端重新编译，这不是绿色的。

但是，我的环境是为 Chrome 和 Opera 制作的扩展。它在 JS 环境中工作，并且可以离线工作，因此 1、2 或 3 都不适用。我在这里真正寻找的只是一种更有效地编写 CSS 的方法，更少的麻烦、更多的变量、嵌套和混合。

我已经尝试过 Less，它是 Less、Sass 和 Stylus 三重奏中唯一一个目前在客户端工作得很好。那么，有没有人知道 Stylus 的好解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T06:15:11.547

CSS 预处理器实际上并不意味着要在客户端运行。一些工具（即LESS）提供了一个开发时客户端（JavaScript）编译器，可以即时编译；但是，这不适用于生产。

Stylus/Sass 默认不提供这一点实际上是一件好事，我个人希望 LESS 没有；然而，与此同时，我确实意识到拥有它为那些可能更喜欢拥有一些可以在一开始就帮助他们前进的辅助轮的人打开了大门。每个人都以不同的方式学习，所以这可能只是最初可以让某些人群进入大门的功能。因此，对于开发而言，它可能没问题，但在撰写本文时，此工作流并不是生产中性能最高的事情。希望在某个时候，这些工具中的大多数有用功能将被添加到原生 CSS 中，那么这将是一个有争议的问题。

现在，我的建议是仅部署编译后的 CSS，并在开发中使用诸如 watch 或 guard 或 live-reload 或 codekit（或任何[合适的等效文件观察器](https://www.npmjs.org/search?q=filewatcher)）之类的东西，以便在编写代码时重新编译您的手写笔文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-08T17:23:30.763

此页面可能有解决方案：http: [//learnboost.github.io/stylus/try.html](http://learnboost.github.io/stylus/try.html)

它似乎正在即时编译 Stylus。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-24T23:16:49.803

[Stylus 能够在浏览器中运行](http://stylus-lang.com/try.html)

[GitHub 存储库](https://github.com/stylus/stylus/tree/client)中有一个`client`可用的分支

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T23:30:56.853

我不完全理解你的问题，但我会提供一些使用 LESS 编译 css 的经验。

早期的实现需要 javascript 在浏览器中将 LESS 文件编译成 CSS，我从未尝试过以这种方式工作，这对我来说似乎不是很好，正如你所说，如果 JS 关闭了一段时间。

我最近一直在使用应用程序将 LESS 代码编译为有效的 CSS，这解决了 JS 转换源代码的需要。

我使用的第一个应用程序是 crunch [http://crunchapp.net/](http://crunchapp.net/)，它工作得很好，但没有即时编译 css。

我现在使用的应用程序称为 simpless [http://wearekiss.com/simpless](http://wearekiss.com/simpless)，它会即时创建有效的 css，所以只要我点击了崇高文本中的保存并在浏览器中刷新，我就可以看到我的更改的CSS。

使用此工作流程，我能够解决您在上面提出的问题，当我完成开发时，我只需上传从 simpless 输出的 css 文件，该文件也被大大缩小，这也节省了需要优化的时间进一步的CSS。

我希望我已经正确理解了这个问题，如果不是道歉的话。

干杯，斯特凡

# forms-authentication - 在不同的 Web 应用程序之间使用 FormsAuthentication “无法验证数据”

> ID：11353299
> 
> 赞同：5
> 
> 时间：2012-07-05T22:16:49.230
> 
> 标签：forms-authentication, asp.net-mvc-4, machinekey

我在同一台服务器上运行了两个 .NET Web 应用程序 - **sentinel**（托管在[https://sentinel.mydomain.com/](https://sentinel.mydomain.com/)）和**fortknox**（在[http://www.mydomain.com/fortknox](http://www.mydomain.com/fortknox)）

Sentinel 是一个身份验证“门户”。FortKnox 是一个“概念证明”应用程序，它使用表单身份验证，但将 loginUrl 设置为[https://sentinel.mydomain.com/login](https://sentinel.mydomain.com/login)（以及一个特殊的 Application_EndRequest 处理程序来限定 ReturnUrl）。Sentinel 是使用 MVC 4 和 Razor 用 .NET 4.0 编写的；FortKnox 是使用 .NET 2.0 的 ASP.NET MVC 2。

我正在使用 ASP.NET FormsAuthentication 并将 cookie 域设置为，`.mydomain.com`这样设置的 cookie`sentinel.mydomain.com`将与请求一起发送到`www.mydomain.com`，反之亦然。**cookie 部分运行良好**- 两个应用程序都获得了相同的 .ASPXAUTH 加密表单票。

问题是，在我们的生产服务器上，**fortknox**无法解密**sentinel**创建的 cookie - 即使它们具有*相同的机器密钥*。即使两个应用程序都在同一个物理盒子上运行，它也不起作用。

用户点击fortknox，他们被重定向到哨兵，他们登录，cookie被设置，他们被重定向回fortknox，然后我得到“无法验证数据”：

```
Exception: Unable to validate data.
  at System.Web.Configuration.MachineKeySection.EncryptOrDecryptData(Boolean fEncrypt, Byte[] buf, Byte[] modifier, Int32 start, Int32 length, IVType ivType, Boolean useValidationSymAlgo, Boolean signData)
  at System.Web.Configuration.MachineKeySection.EncryptOrDecryptData(Boolean fEncrypt, Byte[] buf, Byte[] modifier, Int32 start, Int32 length, IVType ivType, Boolean useValidationSymAlgo)
  at System.Web.Security.FormsAuthentication.Decrypt(String encryptedTicket)
  at FortKnox.Web.MvcApplication.Application_BeginRequest() 
```

机器键是相同的 - 我已经在每个页面的标记中包含了这段（讨厌的！）代码：

```
try {
    var cookie = Request.Cookies[".ASPXAUTH"].Value;
    Response.Write("Cookie: " + cookie + Environment.NewLine);
    var ticket = FormsAuthentication.Decrypt(cookie);
    Response.Write("Ticket name: " + ticket.Name + Environment.NewLine);
} catch (Exception x) {
    Response.Write("Exception: " + x.Message + Environment.NewLine);
    Response.Write(x.StackTrace);
}
Response.Write("<hr /></pre>");
var machineConfigMachineKey = (MachineKeySection)WebConfigurationManager.OpenMachineConfiguration().SectionGroups["system.web"].Sections["machineKey"];
var webConfigMachineKey = (MachineKeySection)WebConfigurationManager.OpenWebConfiguration("").SectionGroups["system.web"].Sections["machineKey"];
Response.Write("<pre>");
Response.Write("<b>machine.config decrypt:  </b>" + machineConfigMachineKey.DecryptionKey + "<br />");
Response.Write("<b>web.config decrypt:      </b>" + webConfigMachineKey.DecryptionKey + "<br />");
Response.Write("<br />");
Response.Write("<b>machine.config validate: </b>" + machineConfigMachineKey.ValidationKey + "<br />");
Response.Write("<b>web.config validate:     </b>" + webConfigMachineKey.ValidationKey + "<br />");
Response.Write("</pre>");
Response.Write("<hr />"); 
```

并验证运行时使用的机器密钥完全相同。

尤其令人沮丧的是，这一直在我们的开发和登台服务器上工作，只是在生产中失败了。服务器之间的唯一区别是生产盒经常安装 Windows 更新，而我们的开发/暂存盒可能缺少一些更新；它们在其他方面是相同的（从相同的图像克隆并使用相同的设置脚本创建）

所以...同一台服务器；相同的机器密钥。ASP.NET 4 设置了 FormsAuthentication cookie。ASP.NET 2 应用程序无法解密它。错误只发生在某些服务器上；在其他人身上，它正在工作。在这一点上，我完全被卡住了......有什么想法吗？

**编辑**：实时服务器已经升级到最新的补丁级别。我试过申请

```
<add key="aspnet:UseLegacyEncryption" value="true" /> 
```

对于登录应用程序和 fortknox 应用程序，两者都是真假。还是没有运气...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:44:49.187

有没有可能与旧的 2010 年填充 oracle 安全补丁有关 - [http://weblogs.asp.net/scottgu/archive/2010/09/28/asp-net-security-update-now-available.aspx](http://weblogs.asp.net/scottgu/archive/2010/09/28/asp-net-security-update-now-available.aspx)？尝试设置

```
<add key="aspnet:UseLegacyEncryption" value="true" />

```

强制打补丁的服务器像打补丁之前那样工作？

（或者，你知道......修补你的服务器。你的选择。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T18:44:12.437

您是否尝试了以下所有键？[http://support.microsoft.com/kb/2425938](http://support.microsoft.com/kb/2425938)

```
<add key="aspnet:UseLegacyEncryption" value="true" />
<add key="aspnet:UseLegacyMachineKeyEncryption" value="true" />
<add key="aspnet:ScriptResourceAllowNonJsFiles" value="true" /> 
```

# sql - 获得此输出的最佳 SQL 代码

> ID：11353302
> 
> 赞同：0
> 
> 时间：2012-07-05T22:17:32.147
> 
> 标签：sql, sql-server, sqlite

简单地说，我有这些表。

```
Planning: 
  Date | Machine | Product | PlanningParts

OKParts: 
  Date | Machine | Product | OKParts

Scrap: 
  Date | Machine | Product | ScrapParts

Trials: 
  Date | Machine | Product | TrialParts

Breakdowns: 
  Date | Machine | Product | Minutes 
```

这些表可以有两个或多个相同的 [Date | 机器 | Product]，它们不是唯一的列。获得此输出的最佳 SQL 代码（SQLite 或 SQL Server）是什么？

```
Output:
  Date | Machine | Product | Planning | OKParts | ScrapParts | TrialParts | Minutes 
```

编辑：在输出中，每个 [Date,Machine,Product] 我需要一行，其余列必须是 SUM（我不会说英语，抱歉）

Eidted：示例：（我不会将表格“试用”以使其更短）

```
Planning:
     Date    | Machine | Product | PlanningParts
     1/6/12  |  Blower | A001    | 100
     2/6/12  |  Blower | A002    | 100
     2/6/12  | Assembly| B001    | 50

OKParts:
     Date   | Machine | Product  | OKParts
     1/6/12 | Blower  | A001     | 50
     1/6/12 | Blower  | A001     | 20
     1/6/12 | Blower  | A002     | 100

Scrap:
     Date   | Machine | Product  | ScrapParts | Reason
     1/6/12 | Blower  | A001     | 5          | Low Weight
     1/6/12 | Blower  | A001     | 3          | High Weight
     2/6/12 | Assembly| B001     | 4          | Bad Cut

Breakdowns
     Date   | Machine | Product  | Minutes    | Reason
     1/6/12 | Blower  | A001     | 100        | Manteinance
     1/6/12 | Blower  | A001     | 20         | Manteinance
     2/6/12 | Assembly| B001     | 100        | Quality approval

   OUTPUT:
         Date   | Machine | Product  | Planning | OKParts | ScrapParts | Breakdowns
         1/6/12 | Blower  | A001     | 100      | 70      | 8          | 120
         1/6/12 | Blower  | A002     | 100      | 100     | 0          | 0
         2/6/12 | Assembly| B001     | 50       | 0       | 4          | 100 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:38:29.910

创建一个将所有表合并为一个的 CTE，然后使用 SUM 聚合函数，将每个日期、机器、产品组的列相加。有点像这样（未测试）：

```
WITH AllParts AS (
SELECT Date, Machine, Product, PlanningParts, NULL AS OKParts, NULL AS ScrapParts, NULL AS TrialParts, NULL AS Breakdowns
FROM Planning
UNION ALL
SELECT Date, Machine, Product,NULL AS PlanningParts, OKParts, NULL AS ScrapParts, NULL AS TrialParts, NULL AS Breakdowns
FROM OKParts
UNION ALL
SELECT Date, Machine, Product,NULL AS PlanningParts, NULL AS OKParts, ScrapParts, NULL AS TrialParts, NULL AS Breakdowns
FROM Scrap
UNION ALL
SELECT Date, Machine, Product,NULL AS PlanningParts, NULL AS OKParts, NULL AS ScrapParts, TrialParts, NULL AS Breakdowns
FROM Trials
UNION ALL
SELECT Date, Machine, Product,NULL AS PlanningParts, NULL AS OKParts, NULL AS ScrapParts, TrialParts, Breakdowns
FROM BreakDowns
)
SELECT
Date, Machine, Product, SUM(OKParts) AS OKParts, SUM(ScrapParts) AS ScrapParts, SUM(TrialParts) AS TrialParts, SUM(BreakDowns) AS Breakdowns
FROM AllParts
GROUP BY Date, Machine, Product 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:07:47.343

我很想看看 UNION 之后的 SUMming 是否与 SUM 首先执行的查询一样好：

```
WITH Vals AS (
   SELECT Date, Machine, Product, 'PlanningParts' Which, Sum(PlanningParts) Value FROM Planning GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'OKParts', Sum(OKParts) FROM OKParts GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'ScrapParts', Sum(ScrapParts) FROM Scrap GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'TrialParts', Sum(TrialParts) FROM Trials GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'Minutes', Sum(Minutes) FROM Breakdowns GROUP BY Date, Machine, Product
)
SELECT *
FROM Vals
PIVOT (Max(Value) FOR Which IN (PlanningParts, OKParts, ScrapParts, TrialParts, Minutes)) P; 
```

是的，这很痛苦，但这就是你从给定的数据库设计中得到的。将这 5 个表重构为一个表，并用视图替换这些表，而不是触发器*可能*是可行的。

注意：PIVOT 适用于 SQL Server 2005 及更高版本。但你甚至不需要 PIVOT：

```
WITH Vals AS (
   SELECT Date, Machine, Product, 'PlanningParts' Which, Sum(PlanningParts) Value FROM Planning GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'OKParts', Sum(OKParts) FROM OKParts GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'ScrapParts', Sum(ScrapParts) FROM Scrap GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'TrialParts', Sum(TrialParts) FROM Trials GROUP BY Date, Machine, Product
   UNION ALL SELECT Date, Machine, Product, 'Minutes', Sum(Minutes) FROM Breakdowns GROUP BY Date, Machine, Product
)
SELECT
   Date, Machine, Product,
   Sum(CASE Which WHEN 'PlanningParts' THEN Value END) PlanningParts,
   Sum(CASE Which WHEN 'OKParts' THEN Value END) OKParts,
   Sum(CASE Which WHEN 'ScrapParts' THEN Value END) ScrapParts,
   Sum(CASE Which WHEN 'TrialParts' THEN Value END) TrialParts,
   Sum(CASE Which WHEN 'Minutes' THEN Value END) Minutes
FROM Vals; 
```

将文本`Which`值切换为整数可能会提高速度。

关于我对表中具有不同日期、机器、产品值列表的表的评论/问题，此查询将提供这样的列表。这不会很好，但它应该给你的想法。

```
WITH DistinctKeys AS ( --wishing we had this as a real table
   SELECT Date, Machine, Product FROM Planning
   UNION SELECT Date, Machine, Product FROM OKParts
   UNION SELECT Date, Machine, Product FROM Scrap
   UNION SELECT Date, Machine, Product FROM Trials
   UNION SELECT Date, Machine, Product FROM Breakdown
) -- because then we could do this:
SELECT
   K.Date, K.Machine, K.Part,
   (SELECT Sum(PlanningParts) FROM Planning X ON EXISTS (SELECT K.* INTERSECT SELECT X.Date, X.Machine, X.Product) PlanningParts
   (SELECT Sum(OKParts) FROM OKParts X ON EXISTS (SELECT K.* INTERSECT SELECT X.Date, X.Machine, X.Product) OKParts
   (SELECT Sum(ScrapParts) FROM Scrap X ON EXISTS (SELECT K.* INTERSECT SELECT X.Date, X.Machine, X.Product) Scrap
   (SELECT Sum(TrialParts) FROM Trials X ON EXISTS (SELECT K.* INTERSECT SELECT X.Date, X.Machine, X.Product) TrialParts
   (SELECT Sum(Minutes) FROM Breakdown X ON EXISTS (SELECT K.* INTERSECT SELECT X.Date, X.Machine, X.Product) Minutes
FROM
   DistinctKeys K; 
```

但坦率地说，JOIN 的性能不会像我和@jaypeagi 的答案中之前给出的 UNION 一样好。

还有一件事：不要假设查询的性能如何。甚至专家也会检查执行计划并收集真实的 IO 和 CPU 统计信息来确定这些信息。您对 NULL 降低性能的担忧可能完全没有根据。

如果您在 [Date, Machine, Product] 上的表上有良好的索引，那么您可能会从 UNION 方法中获得相当好的性能。

# java - 从匿名内部类设置外部类变量

> ID：11353303
> 
> 赞同：0
> 
> 时间：2012-07-05T22:17:45.030
> 
> 标签：java, android

嘿伙计们，我正在尝试从第三方应用程序导出数据，然后在主要活动中将生成的导出文件的路径设置为我的 textview。但它不起作用。我搜索了一遍，得出的结论是它有一些需要做匿名课，但我仍然无法修复它。任何人都可以指导我。

```
public class MyActivity extends Activity
{

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final Button btRecieve = (Button) findViewById(R.id.btRecieve);

    final Context context = this.getApplicationContext();

    final TextView tvFilePath = (TextView) findViewById(R.id.tvFilepath);
    final TextView tvFeedBack = (TextView) findViewById(R.id.tvFeedBack);

    final String pDateFrom = "2012-07-01";
    final String pDateTo = "2012-07-06";
    final String pExportType = "e5";
    final String pExportFormat = "csv";

    btRecieve.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View view) {
            TimeRecordingExport exporter = new TimeRecordingExport(pDateFrom,pDateTo,pExportType,pExportFormat,tvFilePath);
            exporter.Export(context);
            String path = exporter.getFilePath();

            tvFilePath.setText(path);

        }
    });
}
}

public class TimeRecordingExport{
   //private variables
   String mDateFrom;
   String mDateTo;
   String mExportType;
   String mExportFormat;

   private String mFilepath;                     //path to the output file
   String feedback;

   TextView mTv;

   File file;

   Context mContext;

   final String KEY_RESULT_FILE = "com.dynamicg.timerecording.FILE";

//Constructor
   public TimeRecordingExport(String pDateFrom,String pDateTo,String pExportType,String pExportFormat,TextView tv){

     //Initialize private variables
     mDateFrom = pDateFrom;
     mDateTo = pDateTo;
     mExportFormat = pExportFormat;
     mExportType = pExportType;
     mTv = tv;

   }    //End constructor

   //Export function
   public void Export(Context pContext){
       mContext = pContext;
       //create a new intent with action export
       Intent intent = new Intent("com.dynamicg.timerecording.DATA_EXPORT");

       //Add extra values or you could say parameters to this intent.
       intent.putExtra("com.dynamicg.timerecording.DATE_FROM",mDateFrom);
       intent.putExtra("com.dynamicg.timerecording.DATE_TO",mDateTo);
       intent.putExtra("com.dynamicg.timerecording.EXPORT_TYPE",mExportType);
       intent.putExtra("com.dynamicg.timerecording.EXPORT_FORMAT",mExportFormat);

       //make a broadcast reciever
       BroadcastReceiver resultReceiver = new BroadcastReceiver() {
           @Override
           public void onReceive(Context context, Intent resultIntent) {

               Bundle bundle = this.getResultExtras(true);
               TimeRecordingExport.this.mFilepath = bundle.getString(KEY_RESULT_FILE);               //Path to the created file
               //mTv.setText(mFilepath[0]);
               file = new File(mFilepath);                                                           //New Created file

               feedback = "File=["+file+"], canRead=["+file.canRead()                                //Info about the created file
                       +"], sizeKB=["+(file.length()/1024)+"]";
               //Toast.makeText(mContext, feedback, Toast.LENGTH_LONG).show();

               Toast.makeText(context, feedback, Toast.LENGTH_LONG).show();
               System.out.println(feedback);
           }
       };
       mContext.sendOrderedBroadcast(intent, null, resultReceiver, null, Activity.RESULT_OK, null, null);
   } //End function export

   public String getFilePath(){

       return mFilepath;
   }

   public String getFileInfo(){
       return feedback;
   }

}   //End of class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:05:19.687

首先，您是否尝试过为路径值输入一个测试字符串？只是为了确定这不是您的数据？其次，猜想我一直将我的小部件定义为 Activity 的类变量，而不是 onCreate 方法中的最终变量。

# css - 我怎样才能摆脱这个额外的空白？

> ID：11353309
> 
> 赞同：-1
> 
> 时间：2012-07-05T22:18:37.477
> 
> 标签：css

在我正在处理的网站的主页上，页面右侧有一堆额外的空白。我知道问题出在我的 css 中，但我不确定如何解决这个问题。这是相关的CSS：

```
/* Home Page */

#homelogo {
margin-left: -450px;
margin-right: 0px;
color: #363636;
}

#bigtext {
font-size: 45px;
margin-right: -360px;
position: relative;
bottom: 80px;
line-height: 1;
color: #FF809D;
}

#description {
position: relative;
bottom: 60px;
} 
```

你能给我的任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:21:57.083

```
 #bigtext {
      font-size: 45px;
      **margin-right: -360px;**
      position: relative;
      bottom: 80px;
      line-height: 1;
      color: #FF809D;
    } 
```

问题是你在右边创造了额外的空间，右边距为负，即它在身体的右边增加了空间

# qt - QML 项目的子列表深拷贝

> ID：11353311
> 
> 赞同：4
> 
> 时间：2012-07-05T22:18:53.250
> 
> 标签：qt, qml

我想制作一个 items 子属性的深层副本。我已经尝试过这样的事情：

```
Item {
  property variant itemsCopy

  Component.onCompleted: {
    var tmp = otherItem.children
    itemsCopy = tmp
  }
} 
```

但是当 otherItem.children 发生变化时（由于 Z 值不同而排序），`itemsCopy`也会发生变化。是否有解决方法来打破绑定或防止孩子被分类？我已经尝试过 Array s，list，没有任何效果。更改 tmp 的成员将被忽略。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T07:13:25.300

在 MartinJ 提供的示例中，所有对象都将通过引用进行复制。这是“面向对象的 JavaScript”一书中的经典深度复制功能：

```
function deepCopy(p, c) {
    var c = c || {};
    for (var i in p) {
        if (typeof p[i] === 'object') {
            c[i] = (p[i].constructor === Array) ? [] : {};
            deepCopy(p[i], c[i]);
        } else {
            c[i] = p[i];
        }
    }
    return c;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-06T06:12:22.677

你可以自己复制一份：

```
import QtQuick 1.0

Item {
  property variant itemsCopy

  Component.onCompleted: {
    var tmp = otherItem.children
    var copy = []
    for (var i = 0; i < tmp.length; ++i)
        copy[i] = tmp[i]
    itemsCopy = copy;
  }
} 
```

在 QtQuick 2.0 中，您可以使用它更容易一些`property var`：

```
import QtQuick 2.0

Item {
  property var itemsCopy: []

  Component.onCompleted: {
    var tmp = otherItem.children
    for (var i = 0; i < tmp.length; ++i) 
        itemsCopy[i] = tmp[i]
  }
} 
```

# python - 并行 python 工作者优雅失败

> ID：11353312
> 
> 赞同：1
> 
> 时间：2012-07-05T22:18:56.293
> 
> 标签：python, python-c-extension, parallel-python

在使用 pp 并行化一个非常复杂的机器学习问题时，我发现自己不得不相当广泛地依赖质量参差不齐的第三方库。特别是在不同的数据集上密集使用时，会出现大量的边缘情况崩溃。我最终将不得不解决这些问题，但在短期内，尝试修复我和他们的错误太多了——而这个库确实是最好的。

我的问题是：是否有一种既定模式可用于允许 pp 中本地工作进程正常失败？

我看到的选项是：

1.  不要使用任何本地工作进程，只使用远程工作人员 - 然后依赖套接字超时。
2.  Shell 都运行到一个辅助 python 脚本，我将它包装并作为一个单独的进程执行，然后只需使用退出代码来检查崩溃。这可能还必须与超时结合起来以防止非段错误故障情况。

我在这里错过了什么吗？我一直在查看 pp.py ，据我所知，工作进程没有退出检测。

# android - 如何将 SQLite 创建的数据上传到 MySQL 服务器？

> ID：11353315
> 
> 赞同：1
> 
> 时间：2012-07-05T22:19:26.793
> 
> 标签：android, mysql, sqlite, cordova

我目前正在通过一个使用 SQLite 将数据保存在表中的表单创建一个 android 应用程序。

我需要包含一个函数，当客户端单击“上传”该表中的数据时，该表中的数据会到达实际的表 MySQL 服务器并删除由 SQLite 创建的表。

任何人都有如何做到这一点的任何示例，如果您可以在设备具有 Internet 时自动执行该操作，那将是完美的，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T21:12:11.067

如果有开箱即用的东西可以做到这一点，我会感到非常惊讶。您需要编写一些程序来从 SQLite 中提取数据，格式化 MySQL 的插入查询并运行它们。

# haskell - Haskell 通过浏览器获取 URL

> ID：11353319
> 
> 赞同：5
> 
> 时间：2012-07-05T22:19:45.683
> 
> 标签：haskell, screen-scraping, web-scraping

我想在 Haskell 中进行一些屏幕抓取（来自 Netflix），但该站点需要 cookie 登录状态，因此大多数示例都使用浏览器自动化来要求登录的浏览器进行实际的 URL 获取，然后抓取从那个文本。

我想要（在 Ruby 中）的一个很好的例子是：[https ://gist.github.com/1425290](https://gist.github.com/1425290)

有没有什么简单的方法可以从 Haskell 中做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:01:08.380

我知道该[`HTTP`](http://hackage.haskell.org/package/HTTP)软件包`Network.Browser`支持 cookie，就像[`curl`](http://hackage.haskell.org/package/curl). 推测[`http-conduit`](http://hackage.haskell.org/package/http-conduit)'s`Network.HTTP.Conduit.Browser`之所以如此命名，是因为它也支持 cookie，尽管我对此不是 100% 有信心。

# c# - 以编程方式将随机数字放入 c# 中的所有表单文本框中

> ID：11353323
> 
> 赞同：0
> 
> 时间：2012-07-05T22:19:54.280
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, textbox

我的表格如下所示：

![在此处输入图像描述](../Images/dd15faefdc4dcef92c266aef4c809634.png)

如您所见，有一堆 texboxes。我为所有文本框创建了一些循环，以检查它们是否为空、null 或是否仅包含数字。

现在我想做的是生成随机数并将它们放入所有空文本框中（就像用户在文本框中键入数字一样）。我怎样才能达到这个结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:27:49.390

[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)将帮助您生成随机数：

```
var random = new Random();
var emptyTextBoxes = Controls.OfType<TextBox>()
                             .Where(txt => txt.Text.Length == 0);
foreach (var txt in emptyTextBoxes)
    txt.Text = random.Next(1, 1000).ToString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:24:51.247

听起来您已经有了一个可以迭代所有文本框的循环。在该循环的主体中，添加类似

```
Random rnd = new Random();

// Do you loop here

    if (string.IsNullOrEmpty(textBox.Text))
        textBox.Text = rnd.Next(10, 99).ToString(); // If you want numbers from 10 to 99

// End of your loop 
```

如果出于某种原因您总是希望在文本框中具有相同的值，您可以使用[Random(int seed)](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)构造函数为 Random 指定一个种子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:25:25.423

1.  生成一个随机数。使用 Math.Random 和另一个数学运算来实现这一点。取决于你想要什么样的数字（整数、正数、最多 100 等）
2.  循环在 Form.Controls 测试每个控件，如果它**是 Textbox**。并且，对于这些情况，将它们转换并设置像 ((Textbox)control).Text = randomNumber 这样的值

    ```
     int randomNumber;
        foreach (Control control in this.Controls)
        {
            randomNumber = //your randomMagic

            if (control is TextBox)
            {
                ((TextBox)control).Text = randomNumber;
            }
        } 
    ```

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T22:26:53.990

```
 Random r = new Random();
       foreach (var ctrl in Controls)
       {
           var txtBoxCtrl = ctrl as TextBox;
           if (txtBoxCtrl != null)
           {
               if (string.IsNullOrEmpty(txtBoxCtrl.Text))
                   txtBoxCtrl.Text = r.Next().ToString();
           }
       } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T22:34:30.737

```
private void Form1_Load(object sender, EventArgs e)
{
    Random random = new Random();
    foreach (Control c in this.Controls)
    {
        if(c.GetType().Name == "TextBox")
        {
            c.Text = random.Next().ToString();
        }
    }
} 
```

# macos - 核心服务、核心基础和核心数据有什么区别？

> ID：11353324
> 
> 赞同：-2
> 
> 时间：2012-07-05T22:19:54.683
> 
> 标签：macos

在编写 MacOS 代码时，我可以使用几个选项。核心服务、核心基础和核心数据。他们之间有什么区别？它们是纯 C++ 代码吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:25:51.457

它们都执行不同的操作，并在 C 或 Objective-C 中实现：

[核心服务](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/CoreServicesReferenceCollection/_index.html)：

> 该文档集为核心服务框架提供了 API 参考，其中包含 Carbon 应用程序使用的许多基本操作系统服务。

[核心基础](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CoreFoundation_Collection/_index.html)：

> Core Foundation 是一个框架，它提供对应用程序服务、应用程序环境和应用程序本身有用的基本软件服务。Core Foundation 还提供通用数据类型的抽象，通过 Unicode 字符串存储促进国际化，并提供一套实用程序，例如插件支持、XML 属性列表、URL 资源访问和首选项。

[核心数据](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreData_ObjC/_index.html)：

> 这个文档集合提供了 Core Data 框架的 API 参考。Core Data 为 Foundation 和 Cocoa 应用程序提供对象图管理和持久性。有关更多详细信息，请参阅“核心数据基础”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T22:26:46.457

看[苹果的图](http://developer.apple.com/library/mac/documentation/MacOSX/Conceptual/OSX_Technology_Overview/CoreServicesLayer/CoreServicesLayer.html#//apple_ref/doc/uid/TP40001067-CH270-BCICAIFJ)：

![MacOS 框架层](../Images/1bc230ae191ccab58621fd545cc51dd6.png)

您可以立即看到核心服务是 MacOS 软件生态系统中的一个层，其中包括核心基础等等。Core Foundation 是基于 C 的，因此您当然可以从 C++ 轻松调用它，但并非核心服务层中的所有框架都具有仅 C 语言的 API。

Core Data 是 Core Services 层中的另一个框架，是带有 Objective-C API 的 Core Services API 的一个很好的例子。Core Data 和 Core Foundation 做完全不同的事情——两者都不是另一个合适的替代品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:26:03.690

这些是您可以链接并在代码中使用的库。苹果在其中使用的*代码*对我们来说是故意模糊的，通常你会使用 Objective-C 来使用它们（假设它们是用 Objective-C 编写的，但是有一些 C++ 库）。您可以链接这些库和许多其他 Apple 库。有关框架的描述，请参阅[Apple 核心服务文档。](https://developer.apple.com/library/mac/navigation/#section=Frameworks&topic=Core%20Services%20Layer)有很多，而且它们种类繁多，范围太大，无法在这里描述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T22:26:34.663

实际上，它们都是完全不同的——它们是用 Objective-C 编写的，而不是 C++。无论如何，您都无法访问它们内部的代码，只能访问它们向您公开的接口，因此这实际上是无关紧要的。

Apple 开发者文档是一个很好的资源：

[核心服务](http://developer.apple.com/library/mac/#documentation/Carbon/reference/CoreServicesReferenceCollection/_index.html)

[核心数据](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)

[核心基础](https://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFDesignConcepts/CFDesignConcepts.html)

# jquery - jQuery 无法使用代码模拟列表选择更改来触发“更改”事件

> ID：11353325
> 
> 赞同：1
> 
> 时间：2012-07-05T22:20:10.760
> 
> 标签：jquery

得到了这个函数，为了简短起见，启用并填充下一个下拉列表（它调用另一个 jQuery 函数，但现在不会发布它）。它完美地工作。现在我正在尝试传递默认值并让它启用并填充以下下拉列表，而无需实际单击任何内容。

当前有效的功能：

```
$(function() {
    $(document).on('change', '.update', function() {
    formObject.run($(this));
    });
}); 
```

这里使用了“更改”事件，因为当页面加载时，除了第一个列表之外的所有列表都被禁用，因此第一个列表中的更改（任何项目的选择）将启用第二个列表，第二个列表中的稍后选择将启用第三个列表，依此类推。formObjet 是一个变量，其中包含一个执行所有“脏工作”的函数“运行”。

现在，我读到（已经浏览了几个小时！）您可以调用更改事件或触发器处理程序来模仿这种选择，但到目前为止还没有一个工作：

```
$('select[name="princ"]').change(); // DOES NOT WORK
$('select[name="princ"]').trigger('change'); // DOES NOT WORK EITHER 
```

我已经把这段代码剪断在函数之前，之后，但似乎没有任何效果。顺便说一句，'princ' 是第一个下拉列表，在页面加载时填充（不依赖于要填充的 javascript，只需 php 和 mysql）

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:32:53.137

根据您用于测试的浏览器，更改事件可能不会冒泡到文档级别： [http ://www.quirksmode.org/dom/events/change.html](http://www.quirksmode.org/dom/events/change.html)

您的示例不适用于 IE8 及以下版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T00:17:35.807

如果我误解了这个问题，请告诉我，但我想我已经处理过类似的事情。

浏览器都以不同的方式处理更改事件，并且通常不会触发，直到用户在更新该字段后单击离开该字段（通过单击页面上的其他位置并巩固他们的更改）。

我的解决方法是创建一个为我工作的函数，并让该函数在点击时运行而不是更改。为了覆盖您的基础（并且没有不必要的动态数据加载），我会这样做：

1.  创建全局变量或对象以跟踪每个下拉列表的状态（您可以存储 id、值等 - 这基本上允许您检查下拉列表。对于默认状态，创建所有变量并将其值设置为空白）
2.  创建一个在每次单击任何字段时运行的函数并传入下拉列表（通过 ID、名称或实际的 jQuery 对象）

**JavaScript 部分**

```
$(document).ready(function() {
    // Attach click function to princ
    $("select[name='princ']").click(function() {
        var value = $(this).val();  // Grab the value
        if (value != demo.globals.princ) {   // Check if the value is the old value
            demo.checkDropdown('princ', 'princ2', value);  // If it's a new value, grab the selected value and run the checkDropdown function
            demo.globals.princ = value;  // Set the global value
            $('#status').text("loading new values for princ " + value);
        } else {
            $('#status').text("princ values already loaded " + value);  // Unnecessary but used to output the status of the clicks
        }
    });
    // Attach click function to princ2
    $("select[name='princ2']").click(function() {
        var value = $(this).val();
        if (value != demo.globals.princ2) {
            demo.checkDropdown('princ2', 'princ3', value);
            demo.globals.princ2 = value;
            $('#status').text("loading new values for princ2 " + value);
        } else {
            $('#status').text("princ2 values already loaded " + value);
        }
    });
});
// Create a global object to avoid function collision
var demo = {};
// Create global variables
demo.globals = {
    princ: 0,
    princ2: 0
}
// Dropdown population function
demo.checkDropdown = function(dropDownName, nextDropDown, value) {
    // Check if it's already populated with the correct data, otherwise load it
    // You can also load dynamic data here via AJAX and update the select field
    var dropDownHtml = "<option value='1'>1</option>";
    dropDownHtml += "<option value='2'>2</option>";
    dropDownHtml += "<option value='3'>3</option>";
    $("select[name='" + nextDropDown + "']").html(dropDownHtml);
} 
```

**的HTML**

```
<body>
    <form>
        <div id="status">Page loaded</div>
        <select name="princ">
            <option value="0">Please select one</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>

        <select name="princ2">
        </select>

        <select name="princ3">
        </select>

    </form>
</body> 
```

我真的希望这可以帮助你。它比您要求的要多一点，但它是一个完整的、有效的示例，说明了如何在更改时获取下拉值。

# javascript - 桌面 HTML + CSS + JS 应用程序？这怎么可能？

> ID：11353328
> 
> 赞同：4
> 
> 时间：2012-07-05T22:20:31.510
> 
> 标签：javascript, html, css, desktop-application

我最近爱上了 Nitro ( [http://nitrotasks.com](http://nitrotasks.com) )，但让我非常好奇的是它是用 HTML、CSS 和 Javascript 编写的，然而，它被打包为一个多平台的二进制文件！这怎么可能？他们使用的是哪个工具包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:30:54.317

基于他们的 Ubuntu [Launchpad 存储库](https://code.launchpad.net/nitrotasks)，他们正在使用[Quickly](http://arstechnica.com/information-technology/2009/08/quickly-new-rails-like-rapid-development-tools-for-ubuntu/)。

对于 Chrome 和 Firefox，基于[Nitro GitHub 页面](https://github.com/stayradiated/Nitro)，他们似乎只是将其部署为浏览器插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:34:04.830

我刚刚查看了 Nitro 网站，毕竟它看起来不像是多平台二进制文件。看起来他们有一个 Linux/Ubuntu 版本，还有一个 Chrome 扩展（插件）。他们还有一个网页版和一个 Firefox 插件，目前尚不可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:10:31.910

好的，这不完全是您问题的答案，但我假设您在问是因为您考虑自己做类似的事情，在这种情况下，可能值得查看[http://appjs.org/](http://appjs.org/)，这正是这可能。请务必意识到很多可能会发生变化，只有**当且仅当**您愿意在未来适应这些变化时，您才应该使用它。

# c - 约束优化编译器以保留重复分配的标准方法是什么？

> ID：11353331
> 
> 赞同：4
> 
> 时间：2012-07-05T22:21:01.453
> 
> 标签：c, optimization, embedded

我有一些嵌入式代码将命令写入内存地址以控制外围设备，如下所示：

```
void intelStartEraseBlock(uint16_t *wordAddress) {
  *wordAddress =  0x20;  //block erase
  *wordAddress =  0xD0;  //block erase confirm
} 
```

我怀疑优化器正在跳过第一个分配。这是 volatile 的工作吗？还是有更好的解决方案...

注意：这是遗留的 api 代码，所以我不打算重构太多。我在这里寻找“本地”修复。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T22:36:45.323

这正是创建 volatile 关键字的原因。这是其[用法](http://en.wikipedia.org/wiki/Volatile_variable#In_C_and_C.2B.2B)的经典例子。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T22:40:54.303

是的，只需声明`wordAddress`为指向`volatile`数据的指针：

```
void intelStartEraseBlock(volatile uint16_t *wordAddress) {
   ...
} 
```

关键字告诉编译器`volatile`语义必须与 C 语言指定的抽象虚拟机相匹配——换句话说，每次写入`volatile`变量时，代码都必须实际写入内存，每次读取时从`volatile`变量中，代码必须实际从内存中读取。

不允许编译器优化这些读取和写入，即使它认为它们是多余的。

请注意，声明的必须是*指向的*数据`volatile`，而不是指针本身。就像`const`关键字一样，它有很大的不同。由于`wordAddress`它本身是堆栈上的一个变量，我们并不关心它的读/写实际上是否会进入堆栈内存，但我们确实关心它指向的内存（可能是某种类型的内存映射 I/O）实际上是读/写的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T22:39:42.717

除非您的操作系统提供了一些其他机制来执行此类操作，否则是的，volatile 是一个很好的解决方案。

```
void intelStartEraseBlock(volatile uint16_t *wordAddress) {
  *wordAddress =  0x20;  //block erase
  *wordAddress =  0xD0;  //block erase confirm
} 
```

# ruby-on-rails - “捆绑器：找不到命令：瘦”heroku 部署轨道

> ID：11353334
> 
> 赞同：12
> 
> 时间：2012-07-05T22:21:38.107
> 
> 标签：ruby-on-rails, heroku

所以我的应用程序在我的本地机器上完美运行，我成功地将它推送到 github 和 heroku 但是当我尝试在浏览器中打开应用程序时，我收到以下错误：

```
Application Error
An error occurred in the application and your page could not be served. Please try again in a few moments.

If you are the application owner, check your logs for details. 
```

然后我尝试跑步

```
$ heroku logs 
```

我在控制台中得到以下输出：

```
2012-07-05T21:52:11+00:00 heroku[slugc]: Slug compilation started
2012-07-05T21:52:33+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2012-07-05T21:53:33+00:00 heroku[slugc]: Slug compilation started
2012-07-05T21:53:55+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2012-07-05T21:58:45+00:00 heroku[slugc]: Slug compilation started
2012-07-05T21:59:04+00:00 heroku[slugc]: Slug compilation failed: failed to compile Ruby/rails app
2012-07-05T22:00:34+00:00 heroku[slugc]: Slug compilation started
2012-07-05T22:01:21+00:00 heroku[api]: Add shared-database:5mb add-on by aayushgopaldawra@gmail.com
2012-07-05T22:01:21+00:00 heroku[api]: Release v2 created by username@gmail.com
2012-07-05T22:01:21+00:00 heroku[api]: Add RAILS_ENV, LANG, PATH, RACK_ENV, GEM_PATH config by aayushgopaldawra@gmail.com
2012-07-05T22:01:21+00:00 heroku[api]: Release v3 created by username@gmail.com
2012-07-05T22:01:23+00:00 heroku[api]: Release v4 created by username@gmail.com
2012-07-05T22:01:23+00:00 heroku[api]: Deploy 23effb5 by username@gmail.com
2012-07-05T22:01:24+00:00 heroku[slugc]: Slug compilation finished
2012-07-05T22:01:27+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 4606`
2012-07-05T22:01:30+00:00 app[web.1]: bundler: command not found: thin
2012-07-05T22:01:30+00:00 app[web.1]: Install missing gem executables with `bundle install`
2012-07-05T22:01:31+00:00 heroku[web.1]: Process exited with status 127
2012-07-05T22:01:31+00:00 heroku[web.1]: State changed from starting to crashed
2012-07-05T22:01:31+00:00 heroku[web.1]: State changed from crashed to starting
2012-07-05T22:01:34+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 16779`
2012-07-05T22:01:35+00:00 app[web.1]: bundler: command not found: thin
2012-07-05T22:01:35+00:00 app[web.1]: Install missing gem executables with `bundle install`
2012-07-05T22:01:36+00:00 heroku[web.1]: Process exited with status 127
2012-07-05T22:01:36+00:00 heroku[web.1]: State changed from starting to crashed
2012-07-05T22:01:37+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:38+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:49+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:49+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:50+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:51+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:51+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=
2012-07-05T22:01:51+00:00 heroku[router]: Error H10 (App crashed) -> GET glowing-robot-9319.herokuapp.com/favicon.ico dyno= queue= wait= service= status=503 bytes= 
```

我不知道该怎么做，因为这是我第一次部署到heroku，我对网络部署一无所知。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-16T05:30:42.223

对我来说，问题是我在开发部分向我的 Gemfile 添加了薄，但是一旦我这样做了，heroku 就想将它用于生产，但没有在开发部分安装 gems。通过将瘦 gem 移出开发部分以供所有环境使用，我能够克服这个错误。

对于 Rails 应用程序，您的 Gemfile 可能看起来像这样：

```
source 'https://rubygems.org'

gem 'rails'
gem 'heroku'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'pg'
gem 'thin'

# more gems 
```

无论如何， Heroku[建议将 Thin](https://devcenter.heroku.com/articles/rails3#webserver)用于生产 Web 服务器。

更新 (2012-05-16)：在 Heroku 上方的 Rails 3 网络服务器链接中，现在[推荐 unicorn](https://devcenter.heroku.com/articles/rails-unicorn)。thin 仍然可以工作，但您可能需要考虑[切换到 unicorn](https://stackoverflow.com/questions/13984549/thin-vs-unicorn-on-heroku)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T04:07:19.003

您的 Gemfile 中可能缺少 gem。确保您的应用程序所需的一切都在 Gemfile 中指定，而不是在本地执行“gem install”。要验证，您可以安装[RVM](https://rvm.io//)，专门为您的应用创建一个 gemset，在您的应用目录中运行“捆绑安装”，然后查看您的应用是否在本地运行。如果它不运行，则肯定缺少 gem。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-24T15:28:37.487

看来 heroku 正试图在没有 Procfile 的情况下启动 Thin 来告诉它。如上所述，Gemfile 中未安装 Thin，因此出现错误。如上所述，将 Thin 从开发组中移除是可行的。

如果您想让 heroku 启动 Unicorn 而不是 Thin，请设置您的 config/unicorn.rb 和 Procfile，如下所示：[https ://devcenter.heroku.com/articles/rails-unicorn](https://devcenter.heroku.com/articles/rails-unicorn)

Unicorn 的 Procfile 内容在上面的链接中列出，有关 Procfile 的更多信息（只是应用程序根目录中名为“Procfile”的文件）在这里：[https ://devcenter.heroku.com/articles/procfile](https://devcenter.heroku.com/articles/procfile)

# python - Python 在退出简单脚本的“while”循环时遇到问题

> ID：11353338
> 
> 赞同：0
> 
> 时间：2012-07-05T22:22:04.620
> 
> 标签：python, list, csv, matrix, reformat

我编写了一个脚本，将制表符分隔的矩阵（带标题）重新格式化为“长格式”。请参见下面的示例。它正确执行任务，但似乎陷入了无限循环......

输入示例：

```
WHO   THING1    THING2
me    me1       me2
you   you1      you2 
```

期望的输出：

```
me    THING1    me1
me    THING2    me2
you   THING1    you1
you   THING2    you2 
```

这是代码：

```
import csv
matrix_file = open('path')
matrix_reader = csv.reader(matrix_file, delimiter="\t")

j = 1
while j:
    matrix_file.seek(0)
    rownum = 0
    for i in matrix_reader:
        rownum+=1
        if j == int(len(i)):
            j = False
        elif rownum ==1:
            header = i[j]
        else:
           print i[0], "\t",header, "\t",i[j]
    j +=1 
```

我认为这与我的退出命令（j = False）有关。有任何想法吗？

**编辑：感谢您的建议。我认为我最初的帖子中的一个错字导致了一些混乱，对此我很抱歉** 现在我采用了一个简单的解决方案：

```
valid = True
while valid:
matrix_file.seek(0)
rownum = 0
for i in matrix_reader:
    rownum+=1
    if j == int(len(i)):
        valid = False

    etc, etc, etc... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:26:16.457

你`j += 1`在`while`循环之外，所以`j`永远不会增加。如果`len(i)`不小于 2，那么您将有一个无限循环。

但正如已经观察到的，这段代码还有其他问题。这是基于您的习语的工作版本。我会做很多不同的事情，但也许你会发现看看你的代码是如何工作的很有*用*：

```
j = 1
while j:
    matrix_file.seek(0)
    rownum = 0
    for i in matrix_reader:
        rownum += 1
        if j == len(i) or j == -1:
            j = -1
        elif rownum == 1:
            header = i[j]
        else:
           print i[0], "\t", header, "\t", i[j]
    j += 1 
```

它不会按您想要的顺序打印行，但它可以正确地进行基础操作。

这就是我将如何做到的。我看到这与 Ashwini Chaudhary 发布的内容相似，但更笼统：

```
import csv
matrix_file = open('path')
matrix_reader = csv.reader(matrix_file, delimiter="\t")

headers = next(matrix_reader, '')
for row in matrix_reader:
    for header, value in zip(headers[1:], row[1:]):
        print row[0], header, value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T22:34:45.767

`j+=1`正如senderle的回答所说，在while循环之外。

**其他改进可以是：**

1.  `int(len(i))`, 只需使用`len(i)`,`len()`一如既往地返回一个 int 所以不需要`int()`围绕它
2.  使用`for rownum,i in enumerate(matrix_reader):`所以现在不需要处理额外的变量`rownum`，它会自行递增。

**编辑：**您的代码的工作版本，我认为这里不需要`while`，`for`循环就足够了。

```
import csv
matrix_file = open('data1.csv')
matrix_reader = csv.reader(matrix_file, delimiter="\t")
header=matrix_reader.next()[0].split() #now header is ['WHO', 'THING1', 'THING2']

for i in matrix_reader:
        line=i[0].split()
        print line[0], "\t",header[1], "\t",line[1]
        print line[0], "\t",header[2], "\t",line[2] 
```

# sql - SQL • 加入数组的结果

> ID：11353344
> 
> 赞同：0
> 
> 时间：2012-07-05T22:22:27.460
> 
> 标签：sql, join

晚上好，

这是我的问题：我在我的表 PROJECT 上进行选择查询以选择（目前）我唯一的测试项目。我在表上进行连接以检索与其关联的屏幕截图 SCREENSHOT。只有他会得到与截图一样多的结果！即这里 5\. 我可以返回更多数据（名称、日期排序、描述等）关联数组 urls 屏幕截图吗？或者你有一个解决方案来简化我的生活吗？因为我看到的唯一解决方案是直接在 php.ini 中处理它。

这是我的查询：

```
SELECT P.nom, datesortie, description, lien, icone, tag, S.url
FROM PROJET P

LEFT JOIN CLIENT C
ON C.idclient = P.idclient

LEFT JOIN SCREENSHOT S
ON S.idprojet = P.idprojet

ORDER BY P.nom 
```

这是返回的内容（抱歉，我的 var_dump 在线显示...我不明白为什么）：

```
array(7) { ["nom"]=> string(10) "BlackStars" ["datesortie"]=> string(10) "2012-07-02" ["description"]=> string(498) "Inspiré par Little Stars for Little Wars, Black Stars se veut être meilleur par bien des aspects. Prenez le contrôle d'une planète et partez à la conquête de l'univers en remportant chacune des batailles, en brisant chacune des planètes ennemies, en devenant le meilleur joueur. Car une fois le mode solo terminé, un mode multi-joueurs (Bluetooth ou Game Center) vous attend afin de vous mesurer au monde entier. Hissez-vous en haut du classement et devenez le maître incontesté de Black Stars. " ["lien"]=> string(69) "http://itunes.apple.com/us/app/black-stars/id512945753?l=fr&ls=1&mt=8" ["icone"]=> string(131) "http://a1775.phobos.apple.com/us/r30/Purple/v4/73/47/b7/7347b764-cff9-c52b-78da-42560a187acf/mza_1097997557772736292.170x170-75.png" ["tag"]=> string(10) "blackstars" ["url"]=> string(119) "http://a1352.phobos.apple.com/us/r30/Purple/v4/51/df/f5/51dff56b-08c6-59db-81df-80a174ec0050/mza_509496145749890361.png" }

===================================================
===================================================

array(7) { ["nom"]=> string(10) "BlackStars" ["datesortie"]=> string(10) "2012-07-02" ["description"]=> string(498) "Inspiré par Little Stars for Little Wars, Black Stars se veut être meilleur par bien des aspects. Prenez le contrôle d'une planète et partez à la conquête de l'univers en remportant chacune des batailles, en brisant chacune des planètes ennemies, en devenant le meilleur joueur. Car une fois le mode solo terminé, un mode multi-joueurs (Bluetooth ou Game Center) vous attend afin de vous mesurer au monde entier. Hissez-vous en haut du classement et devenez le maître incontesté de Black Stars. " ["lien"]=> string(69) "http://itunes.apple.com/us/app/black-stars/id512945753?l=fr&ls=1&mt=8" ["icone"]=> string(131) "http://a1775.phobos.apple.com/us/r30/Purple/v4/73/47/b7/7347b764-cff9-c52b-78da-42560a187acf/mza_1097997557772736292.170x170-75.png" ["tag"]=> string(10) "blackstars" ["url"]=> string(119) "http://a572.phobos.apple.com/us/r30/Purple/v4/db/1d/1d/db1d1d00-3a28-8b6f-d52f-342bf5893912/mza_3642427234916705950.png" }

===================================================
===================================================

array(7) { ["nom"]=> string(10) "BlackStars" ["datesortie"]=> string(10) "2012-07-02" ["description"]=> string(498) "Inspiré par Little Stars for Little Wars, Black Stars se veut être meilleur par bien des aspects. Prenez le contrôle d'une planète et partez à la conquête de l'univers en remportant chacune des batailles, en brisant chacune des planètes ennemies, en devenant le meilleur joueur. Car une fois le mode solo terminé, un mode multi-joueurs (Bluetooth ou Game Center) vous attend afin de vous mesurer au monde entier. Hissez-vous en haut du classement et devenez le maître incontesté de Black Stars. " ["lien"]=> string(69) "http://itunes.apple.com/us/app/black-stars/id512945753?l=fr&ls=1&mt=8" ["icone"]=> string(131) "http://a1775.phobos.apple.com/us/r30/Purple/v4/73/47/b7/7347b764-cff9-c52b-78da-42560a187acf/mza_1097997557772736292.170x170-75.png" ["tag"]=> string(10) "blackstars" ["url"]=> string(120) "http://a1701.phobos.apple.com/us/r30/Purple/v4/60/5f/ae/605fae3e-f00b-c3b7-0f65-ca73f6fd9864/mza_4565911160744621776.png" }

===================================================
===================================================

array(7) { ["nom"]=> string(10) "BlackStars" ["datesortie"]=> string(10) "2012-07-02" ["description"]=> string(498) "Inspiré par Little Stars for Little Wars, Black Stars se veut être meilleur par bien des aspects. Prenez le contrôle d'une planète et partez à la conquête de l'univers en remportant chacune des batailles, en brisant chacune des planètes ennemies, en devenant le meilleur joueur. Car une fois le mode solo terminé, un mode multi-joueurs (Bluetooth ou Game Center) vous attend afin de vous mesurer au monde entier. Hissez-vous en haut du classement et devenez le maître incontesté de Black Stars. " ["lien"]=> string(69) "http://itunes.apple.com/us/app/black-stars/id512945753?l=fr&ls=1&mt=8" ["icone"]=> string(131) "http://a1775.phobos.apple.com/us/r30/Purple/v4/73/47/b7/7347b764-cff9-c52b-78da-42560a187acf/mza_1097997557772736292.170x170-75.png" ["tag"]=> string(10) "blackstars" ["url"]=> string(119) "http://a193.phobos.apple.com/us/r30/Purple/v4/7c/ff/67/7cff67dc-d679-16ee-24cf-7f658c78b9c8/mza_8709328453215958742.png" }

===================================================
===================================================

array(7) { ["nom"]=> string(10) "BlackStars" ["datesortie"]=> string(10) "2012-07-02" ["description"]=> string(498) "Inspiré par Little Stars for Little Wars, Black Stars se veut être meilleur par bien des aspects. Prenez le contrôle d'une planète et partez à la conquête de l'univers en remportant chacune des batailles, en brisant chacune des planètes ennemies, en devenant le meilleur joueur. Car une fois le mode solo terminé, un mode multi-joueurs (Bluetooth ou Game Center) vous attend afin de vous mesurer au monde entier. Hissez-vous en haut du classement et devenez le maître incontesté de Black Stars. " ["lien"]=> string(69) "http://itunes.apple.com/us/app/black-stars/id512945753?l=fr&ls=1&mt=8" ["icone"]=> string(131) "http://a1775.phobos.apple.com/us/r30/Purple/v4/73/47/b7/7347b764-cff9-c52b-78da-42560a187acf/mza_1097997557772736292.170x170-75.png" ["tag"]=> string(10) "blackstars" ["url"]=> string(120) "http://a1443.phobos.apple.com/us/r30/Purple/v4/d7/13/8f/d7138f62-6398-7993-8d0b-23e0ce16dca2/mza_8316005873463209973.png" }

===================================================
=================================================== 
```

预先感谢您的帮助。亲切地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:33:00.290

根据我收集的信息，您只是不希望前 6 个字段中的所有重复信息？

通常，接受重复信息是解决问题的方法。但是，你可以拉回*两个*记录集。只要它们排列整齐，您就可以使用嵌套循环来处理它们。

```
SELECT P.nom, datesortie, description, lien, icone, tag, idproject
FROM PROJET P
LEFT JOIN CLIENT C
ON C.idclient = P.idclient
LEFT JOIN SCREENSHOT S
ON S.idprojet = P.idprojet
ORDER BY P.nom

SELECT P.idproject S.url
FROM PROJET P
INNER JOIN SCREENSHOT S
ON S.idprojet = P.idprojet
ORDER BY P.nom 
```

注意：第一个查询现在也具有该`idproject`字段，该字段也存在于第二个记录集中。第二个记录集也是按 排序的`P.nom`，即使它没有在语句中被选中；这只是确保您可以执行简单的嵌套循环。

一个简化的伪代码可能是......

```
FOR EACH nom IN recordSet1
  WHILE recordSet1.idProject = recordSet2.idProject
    Do something with the URL
    Move to next record in recordSet2
  LOOP
LOOP 
```

***我不会做的事***

另一种选择是将所有 URL 连接到一个字符串中。也许用逗号分隔以创建一个 CSV 字段。

但是，网址中逗号的存在将打破这一点。因此，您可能想要使用 XML 或其他东西；增加了生成和解析的成本。

除非重复字段的网络开销*实际上导致了问题*，否则我会坚持下去。如果它引起了问题，则两个记录集的替代方案更强大且相对简单。

# php - 使用 INSERT 将整数值插入 mysql int

> ID：11353345
> 
> 赞同：2
> 
> 时间：2012-07-05T22:22:34.027
> 
> 标签：php, mysql, insert, int

我正在尝试通过 PHP 在 MySQL 数据库中插入一条新记录，我之前已经做过一百万次了，但由于某种原因，这次我无法让它工作，这真的让我很烦恼。

将字符串插入到所有 varchar 列中效果很好，但是当我要在 int 列中插入一个值时，我收到一条错误消息，告诉我我有语法错误。

基本上，第一个查询工作得很好，但第二个查询返回错误，正如你所看到的，我已经确定它确实是我要插入的整数。

我希望有人能帮忙。我真的开始为此感到头疼：/

```
$groupId2 = 5;
$groupId = (int)$groupId2;
if(!mysqli_query($link, "INSERT INTO contestants (firstName, lastname, email) VALUES ('$firstName', '$lastName', '$email')"))
  echo "First: " . mysqli_error($link);
if(!mysqli_query($link, "INSERT INTO contestants (firstName, lastname, email, group) VALUES ('$firstName', '$lastName', '$email', '$groupId')"))
  echo "Second: " . mysqli_error($link); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T15:28:51.663

`group`是一个 mysql 关键字在它周围使用反引号

```
"INSERT INTO contestants (firstName, lastname, email, `group`) 
 VALUES ('$firstName', '$lastName', '$email', '$groupId')" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T22:27:46.967

错误是因为你用''包围了你的 int，你需要去掉你的撇号，它会工作得很好。

```
if(!mysqli_query($link, 
   "INSERT INTO contestants
   (firstName, lastname, email, group) VALUES
   ('$firstName', '$lastName', '$email', $groupId)"))
                                         ^^^^^^^^^ 
```

澄清一下，在插入数字字段时，您不需要它们。

根据 pst 这是错误的，尽管您不需要单引号这一事实仍然是正确的。

# jquery - 固定标题不会留在 IE8 中

> ID：11353346
> 
> 赞同：1
> 
> 时间：2012-07-05T22:22:36.277
> 
> 标签：jquery, internet-explorer-8, scroll, css-position

一旦用户滚动过去它在 DOM 中的位置，我就有这个代码在导航栏中滑动，它在大多数浏览器中都很好用。但是在 IE8 中，如果您使用滚动条滚动，它会滑入并立即滑出。我认为这一定是因为该类被添加然后立即删除（可能是 .headsup）类。但我不确定如何更改代码以保留此功能

```
var $win = $(window),
$nav = $('header'),
$next = $('.pingpong')
navTop = $nav.length && $nav.offset().top,
isFixed = 0;
processScroll();
$win.on('scroll', processScroll);

function processScroll() {
    var i, scrollTop = $win.scrollTop();
    if (scrollTop > navTop && !isFixed) {
        isFixed = 1;
        $nav.addClass('hfixed').animate({top: 0}, 300);
        $next.addClass('headsup');
    } else if (scrollTop < navTop && isFixed) {
        isFixed = 0;
        $nav.animate({top: -75}, 300, function(){
            $(this).removeClass('hfixed');
            $next.removeClass('headsup');
        });
    }
}​ 
```

[http://jsfiddle.net/cutcopypaste/pd83J/](http://jsfiddle.net/cutcopypaste/pd83J/)

# postgresql - 在 postgres 中，如何将索引添加到现有表？

> ID：11353347
> 
> 赞同：1
> 
> 时间：2012-07-05T22:22:38.493
> 
> 标签：postgresql, indexing

在 postgres 中，如何将索引添加到现有表？

我尝试了以下但它不起作用：

```
CREATE INDEX my_index ON my_table USING btree(a_column); 
```

然后这个：

```
CREATE INDEX my_index ON my_table USING btree(a_column); 
```

但两者都不起作用。

我正在使用 ant 进行数据库迁移。当我这样做时，`ant db-migrate-apply-postgresql`我不断收到错误

```
 [echo] ERROR:  relation "my_index" already exists 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-05T22:43:20.077

好吧，这个错误信息：

> *错误：关系“my_index”已经存在*

很清楚，不是吗。

您正在尝试使用现有索引或表的名称创建索引。您需要使用不同的名称。

# javascript - 如果只有一张幻灯片，jQuery Cycle 会隐藏上一个/下一个导航。

> ID：11353348
> 
> 赞同：1
> 
> 时间：2012-07-05T22:22:43.950
> 
> 标签：javascript, jquery, plugins

我正在使用 jQuery 循环插件来循环浏览容器中的多个 div。一切运行良好我想添加的唯一功能是，如果容器中只有一张幻灯片，我似乎无法在插件中找到选项，可以隐藏两个按钮。我目前的代码是这样的：

```
 //Goal summary page cycler
    $('#showGoal').after('<div id="nav">')
                .cycle({
                    fx: 'scrollHorz',
                    speed:300,
                    prev: '#goalPrev',
                    next: '#goalNext',
                    timeout: 0,
                    pager: '#nav',                        
                    after: onAfter, 
                    pagerAnchorBuilder: function(idx, slide) {
                        return'<a href="#"></a>';
                    }
                });

            // call back to remove buttons on first and last slide / adjust height of container
            function onAfter(curr, next, opts, fwd) {
                var index = opts.currSlide;
                $('#goalPrev')[index == 0 ? 'hide' : 'show']();
                $('#goalNext')[index == opts.slideCount - 1 ? 'hide' : 'show']();

                //get the height of the current slide
                var $ht = $(this).height();
                //animates the container's height to that of the current slide 
                $(this).parent().animate({ height: $ht });
            } 
```

我猜我可以检查索引并以这种方式删除它们，或者可能按照 if 语句的行做一些事情，例如（伪代码）：

```
 var index = this.index();
    var numOfSlides = 0;

    if ( numOfSlide < index ) {
       //hide the buttons 
   }
   else
   {
       //show the buttons
   } 
```

感谢您提供任何可能的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T16:44:07.073

插件作者推荐的方法是使用 Javascript 隐藏按钮：

[http://forum.jquery.com/topic/cycle-plugin-hide-prev-next](http://forum.jquery.com/topic/cycle-plugin-hide-prev-next)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:37:18.340

它不应该已经工作了吗？如果您只有一张幻灯片，那么您的 onAfter 函数应该会处理它。使用一张幻灯片，您的索引始终为 0。您的 opts.slideCount - 1 也将为零，因为您将有一张幻灯片减一。

编辑：

但如下所述，可能需要在页面加载后调用 onAfter，因为在处理一张幻灯片时，可能不会调用该函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-06T18:34:25.120

问题解决了，我觉得错过它就像个白痴，您必须首先将箭头的显示设置为无。

# java - Apache Procrun - 停止命令不起作用

> ID：11353351
> 
> 赞同：0
> 
> 时间：2012-07-05T22:23:29.387
> 
> 标签：java, apache, procrun

我遇到了“Apache Deamons Procrun”软件的问题。start 命令效果很好，可以启动程序。停止命令总是说“无法找到或加载主类”，除了停止命令启动的类与启动程序的类相同。停止命令所做的只是将控件放入程序正在监视的文件夹中。

procrun 是否足够聪明，可以知道如果 java 进程结束，它也会关闭？我有时也有一些问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T17:01:44.350

我怀疑您的 stop 方法具有不同的签名，或者您的类路径可能已关闭。您需要显示用于安装它的命令以及如何实现启动/停止方法。

我找到了一个保存在 Evernote 中的[链接](https://www.evernote.com/shard/s2/note/7d64c8aa-e9b8-4b3a-b6c3-0b624d5aad98/jduprey/shared#b=51cbe500-2754-45ff-8608-658f66ab1a2c&n=7d64c8aa-e9b8-4b3a-b6c3-0b624d5aad98)，该链接用于一个现已不存在的博客，可能会对您有所帮助。

# .htaccess - htaccess 重定向问题

> ID：11353352
> 
> 赞同：1
> 
> 时间：2012-07-05T22:23:38.287
> 
> 标签：.htaccess, redirect

我的 htaccess 代码似乎有一些问题，我不确定它为什么不工作，诚然我不是专家，所以任何帮助将不胜感激。

我想要实现的是：

www.example.com/job-search.html?jobid=12345

需要重定向到：

www.example.com/jobs/12345

到目前为止，我想出的 htaccess 中的代码是：

```
RewriteEngine ON
RewriteRule ^/job-search.html\?jobid=(.+) /jobs/$1 [R=301,L] 
```

然而，这对我不起作用，我不知道为什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:22:59.607

几个问题。

1.  如果您使用的是 apache 2.0 或更高版本，则 URI 的前缀（前导斜杠）会在通过重写引擎之前被删除。所以`^/`你的正则表达式中的 永远不会匹配。您需要删除前导斜杠。
2.  您无法匹配 a 中的查询字符串（**?jobid=12345**位）`RewriteRule`，您必须使用 a`RewriteCond`并匹配`%{QUERY_STRING}`变量并使用**%**反向引用。

所以你想要一些类似的东西：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} jobid=([^\&]+)
RewriteRule ^job-search\.html$ /jobs/%1 [R=301,L] 
```

# php - JQGrid showlink 样式不起作用

> ID：11353358
> 
> 赞同：0
> 
> 时间：2012-07-05T22:24:08.153
> 
> 标签：php, jqgrid, jqgrid-php, jqgrid-formatter

我正在使用 JQGrid，需要在我的专栏之一中创建一个超链接。我已经为 showlink 使用了预定义的格式化程序，并且超链接工作正常。然而，视觉效果并不好，因为它正在创建某种矩形并且具有很大的高度值（参见随附的屏幕截图）。我试图在 JQGrid css (ui.jqgrid.css) 中查找 CSS 属性来修改链接的样式，但找不到如何去做。

有人知道怎么做吗？

![JQGrid 示例](../Images/fe9d2be8e82cf9a6f3234d296d90ca19.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T04:08:38.257

我可以通过将此行添加到我的 CSS 来修复它。

```
.ui-jqgrid tr.jqgrow a { outline-style: none; border:none; vertical-align: middle; height:auto; width:100%;} 
```

# f# - 在列表框中列出目录文件并打开它们

> ID：11353363
> 
> 赞同：1
> 
> 时间：2012-07-05T22:25:10.060
> 
> 标签：f#, listbox, directory, file-listing

我必须在列表框中列出位于我的项目目录中的所有文件（因此使用相对路径）。我还需要在列表中打开选中的文件（点击或双击，都一样）。这是我的代码：

```
let list = new ListBox(Height=600, Dock=DockStyle.Right)
let dir = new DirectoryInfo(@"c:\tiles\")
list.Items.Add(dir.GetFiles()) 
```

当我启动我的项目时，我在 ListBox 中有一个“System.IO.FileInfo[]”字符串。如何解决？项目目录的正确路径字符串是什么？

关于开场问题？

PS：我必须在位图中加载 *.png 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:43:47.557

对我来说似乎是一个合理的问题。

dir.GetFiles() 返回 System.IO.FileInfo 数组（请参阅[http://msdn.microsoft.com/en-us/library/4cyf24ss](http://msdn.microsoft.com/en-us/library/4cyf24ss)）尝试枚举和使用列表中这些事物的属性。

属性列表：http: [//msdn.microsoft.com/en-us/library/system.io.fileinfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T01:02:58.383

问题在于 F# 如何处理`params`args，它与 C# 略有不同 - 这将解决问题

```
let files = dir.GetFiles()
files |> Array.iter (fun t -> list.Items.Add t |> ignore) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-06T09:24:07.887

以这种方式完成：

```
let dir = new DirectoryInfo(path)
for file in dir.GetFiles() do
  list.Items.Add(file) |> ignore 
```

# android - 每个使用 Omniture 的基于 WebKit 的浏览器都会导致站点崩溃。为什么？

> ID：11353365
> 
> 赞同：11
> 
> 时间：2012-07-05T22:25:19.930
> 
> 标签：android, webkit, android-webview, samsung-mobile, adobe-analytics

其实更准确的说法是：

> **每个**基于 WebKit 的浏览器都会在[http://m.allrecipes.com/](http://m.allrecipes.com/)上崩溃，但仅限于[三星 Continuum SCH-i400](http://www.samsung.com/us/mobile/cell-phones/SCH-I400ZKAVZW)手机。

我正在尝试实现一个基于 WebView 的浏览器，主要用于学习目的（市场上的浏览器太多了，为什么要添加一个？），我对我能以多快的速度提出一个基本的工作浏览器印象深刻。我在`Samsung Continuum`手机上的许多网站上对其进行了测试，它们都运行良好，**除了** `m.allrecipes.com`.

每当我尝试加载该网页时，都会收到以下 NullPointerException：

```
E/AndroidRuntime(3147): FATAL EXCEPTION: http10
E/AndroidRuntime(3147): java.lang.NullPointerException
E/AndroidRuntime(3147):     at android.net.http.CertificateChainValidator.doHandshakeAndValidateServerCertificates(CertificateChainValidator.java:194)
E/AndroidRuntime(3147):     at android.net.http.HttpsConnection.openConnection(HttpsConnection.java:308)
E/AndroidRuntime(3147):     at android.net.http.Connection.openHttpConnection(Connection.java:358)
E/AndroidRuntime(3147):     at android.net.http.Connection.processRequests(Connection.java:219)
E/AndroidRuntime(3147):     at android.net.http.ConnectionThread.run(ConnectionThread.java:113) 
```

无法在我的代码中找到对此的解释，我试图查看其他浏览器在此`Samsung Continuum`手机上的行为方式，访问时`m.allrecipes.com`：

结果非常有趣：Dolphin、Opera、iBrowser 等都**没有任何问题**。

但是[Free Private Browser](https://play.google.com/store/apps/details?id=com.JamesBecwar.FreePrivateBrowser)、[Voice Browser](https://play.google.com/store/apps/details?id=org.greatestapps.handfreebrowser.lite)和[Easy Browser](https://play.google.com/store/apps/details?id=easy.browser)`m.allrecipes.com`在使用**相同的堆栈跟踪**访问时都会立即崩溃。

因此，如果您可以将手放在一个`Samsung Continuum SCH-i400`单元上，这个问题很容易重现。

我知道解决这个问题的最快和最简单的方法是使用不同的浏览器或摆脱我的手机。但我希望**了解**问题的根源，因为它可能会在使用 时指出潜在的问题`WebKit`，也可能在其他手机上。

所以我的问题基本上是：

1.  有什么`m.allrecipes.com`特别之处会触发这个`WebKit+Continuum`错误？
2.  有什么`Samsung Continuum SCH-i400`特别之处以至于它只在这个网站上并且只在基于 WebKit 的浏览器上失败？
3.  WebKit 中的东西太特别了，它不喜欢`Continuum+allrecipes.com`.
4.  是否有其他网站会触发此行为？

根据@sarnold 的建议从[免费私人浏览器](https://play.google.com/store/apps/details?id=com.JamesBecwar.FreePrivateBrowser)添加日志：

```
:13.195: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans, style = 0, uniqueID = 1
:13.199: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans, style = 1, uniqueID = 2
:13.199: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Serif, style = 0, uniqueID = 3
:13.207: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Serif, style = 1, uniqueID = 4
:13.207: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Serif, style = 2, uniqueID = 5
:13.207: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Serif, style = 3, uniqueID = 6
:13.207: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans Mono, style = 0, uniqueID = 7
:13.211: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans Arabic, style = 0, uniqueID = 8
:13.211: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans Hebrew, style = 0, uniqueID = 9
:13.211: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans Thai, style = 0, uniqueID = 10
:13.211: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans, style = 0, uniqueID = 11
:13.215: D/SKIA_FONT(5973): load_system_fonts(), name = Droid Sans Fallback, style = 0, uniqueID = 12
:13.215: D/SKIA_FONT(5973): load_system_fonts(), oldSansUID = 0, newSansUID = 1
:13.215: D/SKIA_FONT(5973): load_system_fonts(), oldSansBoldUID = 0, newSansBoldUID = 2
:13.308: D/dalvikvm(5973): GC_EXTERNAL_ALLOC freed 3163 objects / 205880 bytes in 13ms
:13.566: I/Ads(5973): To get test ads on this device, call adRequest.addTestDevice("BE8FFE83C668E44B60E7CBD947D7D226");
:13.590: D/dalvikvm(5973): GC_FOR_MALLOC freed 7592 objects / 361280 bytes in 11ms
:13.597: I/Ads(5973): adRequestUrlHtml: <html><head><script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"preqs":0,"u_sd":1.375,"slotname":"a14c2366fe4baa1","u_w":349,"msid":"com.JamesBecwar.FreePrivateBrowser","cap":"m","js":"afma-sdk-a-v4.3.1","mv":"8013013.com.android.vending","isu":"BE8FFE83C668E44B60E7CBD947D7D226","cipa":0,"format":"320x50_mb","net":"wi","app_name":"28.android.com.JamesBecwar.FreePrivateBrowser","hl":"en","u_h":581,"u_audio":1});</script></head><body></body></html>
:14.211: W/webcore(5973): Can't get the viewWidth after the first layout
:14.640: I/Ads(5973): Received ad url: <"url": "http://googleads.g.doubleclick.net:80/mads/gma?preqs=0&u_sd=1.375&slotname=a14c2366fe4baa1&u_w=349&msid=com.JamesBecwar.FreePrivateBrowser&cap=m&js=afma-sdk-a-v4.3.1&mv=8013013.com.android.vending&isu=BE8FFE83C668E44B60E7CBD947D7D226&cipa=0&format=320x50_mb&net=wi&app_name=28.android.com.JamesBecwar.FreePrivateBrowser&hl=en&u_h=581&u_audio=1&u_so=p&output=html&region=mobile_app&u_tz=300&ex=1&client_sdk=1&pto=0&caps=interactiveVideo_clickTracking_sdkAdmobApiForAds&jsv=27", "afmaNotifyDt": "null">
:14.769: W/Ads(5973): IOException connecting to ad url.
:14.769: W/Ads(5973): java.net.ConnectException: googleads.g.doubleclick.net/127.0.0.1:80 - Connection refused
:14.769: W/Ads(5973):   at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:254)
:14.769: W/Ads(5973):   at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
:14.769: W/Ads(5973):   at java.net.Socket.connect(Socket.java:1074)
:14.769: W/Ads(5973):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
:14.769: W/Ads(5973):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
:14.769: W/Ads(5973):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
:14.769: W/Ads(5973):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
:14.769: W/Ads(5973):   at com.google.ads.b.run(SourceFile:280)
:14.769: W/Ads(5973):   at java.lang.Thread.run(Thread.java:1096)
:14.812: D/webviewglue(5973): nativeDestroy view: 0x324d00
:14.816: I/Ads(5973): onFailedToReceiveAd(A network error occurred.)
:15.574: D/dalvikvm(5973): GC_FOR_MALLOC freed 5178 objects / 598576 bytes in 25ms
:15.578: D/webviewglue(5973): nativeDestroy view: 0x2634a0
:17.351: I/Database(5973): sqlite returned: error code = 14, msg = cannot open file at source line 25467
:17.359: E/geolocationService(5973): Caught security exception registering for location updates from system. This should only happen in DumpRenderTree.
:41.011: D/dalvikvm(5973): GC_FOR_MALLOC freed 5959 objects / 981064 bytes in 15ms
:42.015: I/Web Console(5973): Omniture: s.t, instance: 1 at http://images.media-allrecipes.com/js/omni/ar_s_code.js?v=5:23
:42.015: I/Web Console(5973): [object Object] at http://images.media-allrecipes.com/js/omni/ar_s_code.js?v=5:24
:42.699: W/dalvikvm(5973): threadid=12: thread exiting with uncaught exception (group=0x4001d7f0)
:42.703: E/AndroidRuntime(5973): FATAL EXCEPTION: http1
:42.703: E/AndroidRuntime(5973): java.lang.NullPointerException
:42.703: E/AndroidRuntime(5973):    at android.net.http.CertificateChainValidator.doHandshakeAndValidateServerCertificates(CertificateChainValidator.java:194)
:42.703: E/AndroidRuntime(5973):    at android.net.http.HttpsConnection.openConnection(HttpsConnection.java:308)
:42.703: E/AndroidRuntime(5973):    at android.net.http.Connection.openHttpConnection(Connection.java:358)
:42.703: E/AndroidRuntime(5973):    at android.net.http.Connection.processRequests(Connection.java:219)
:42.703: E/AndroidRuntime(5973):    at android.net.http.ConnectionThread.run(ConnectionThread.java:113)
:42.773: W/dalvikvm(5973): threadid=22: thread exiting with uncaught exception (group=0x4001d7f0)
:42.781: I/Process(5973): Sending signal. PID: 5973 SIG: 9 
```

[以及来自Voice Browser](https://play.google.com/store/apps/details?id=org.greatestapps.handfreebrowser.lite)的日志：

```
:44.226: I/dalvikvm(6273): Jit: resizing JitTable from 4096 to 8192
:44.226: D/dalvikvm(6273): GC_FOR_MALLOC freed 13956 objects / 744856 bytes in 29ms
:45.730: I/Web Console(6273): Omniture: s.t, instance: 1 at http://images.media-allrecipes.com/js/omni/ar_s_code.js?v=5:23
:45.734: I/Web Console(6273): [object Object] at http://images.media-allrecipes.com/js/omni/ar_s_code.js?v=5:24
:46.707: W/dalvikvm(6273): threadid=14: thread exiting with uncaught exception (group=0x4001d7f0)
:46.718: E/AndroidRuntime(6273): FATAL EXCEPTION: http2
:46.718: E/AndroidRuntime(6273): java.lang.NullPointerException
:46.718: E/AndroidRuntime(6273):    at android.net.http.CertificateChainValidator.doHandshakeAndValidateServerCertificates(CertificateChainValidator.java:194)
:46.718: E/AndroidRuntime(6273):    at android.net.http.HttpsConnection.openConnection(HttpsConnection.java:308)
:46.718: E/AndroidRuntime(6273):    at android.net.http.Connection.openHttpConnection(Connection.java:358)
:46.718: E/AndroidRuntime(6273):    at android.net.http.Connection.processRequests(Connection.java:219)
:46.718: E/AndroidRuntime(6273):    at android.net.http.ConnectionThread.run(ConnectionThread.java:113)
:46.718: W/dalvikvm(6273): threadid=15: thread exiting with uncaught exception (group=0x4001d7f0) 
```

并从[Easy Browser](https://play.google.com/store/apps/details?id=easy.browser)：

```
:11.597: D/dalvikvm(6557): GC_FOR_MALLOC freed 10496 objects / 629992 bytes in 57ms
:11.605: D/webviewglue(6557): nativeDestroy view: 0x25c8e8
:11.609: W/IInputConnectionWrapper(6557): getCursorCapsMode on inactive InputConnection
:11.640: I/Ads(6557): adRequestUrlHtml: <html><head><script src="http://www.gstatic.com/afma/sdk-core-v40.js"></script><script>AFMA_buildAdURL({"preqs":1,"u_sd":1.375,"slotname":"a14f3f6bc126143","u_w":349,"msid":"easy.browser","cap":"m","js":"afma-sdk-a-v4.1.1","isu":"BE8FFE83C668E44B60E7CBD947D7D226","format":"320x50_mb","net":"wi","app_name":"23.android.easy.browser","hl":"en","u_h":581,"u_audio":1});</script></head><body></body></html>
:11.664: W/IInputConnectionWrapper(6557): getCursorCapsMode on inactive InputConnection
:11.730: W/IInputConnectionWrapper(6557): finishComposingText on inactive InputConnection
:11.867: W/webcore(6557): Can't get the viewWidth after the first layout
:12.051: I/Ads(6557): Received ad url: <"url": "http://googleads.g.doubleclick.net:80/mads/gma?preqs=1&u_sd=1.375&slotname=a14f3f6bc126143&u_w=349&msid=easy.browser&cap=m&js=afma-sdk-a-v4.1.1&isu=BE8FFE83C668E44B60E7CBD947D7D226&format=320x50_mb&net=wi&app_name=23.android.easy.browser&hl=en&u_h=581&u_audio=1&u_so=p&output=html&region=mobile_app&u_tz=300&ex=1&client_sdk=1&askip=1&caps=clickTracking_sdkAdmobApiForAds&jsv=27", "afmaNotifyDt": "null">
:12.086: W/Ads(6557): IOException connecting to ad url.
:12.086: W/Ads(6557): java.net.ConnectException: googleads.g.doubleclick.net/127.0.0.1:80 - Connection refused
:12.086: W/Ads(6557):   at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:254)
:12.086: W/Ads(6557):   at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:533)
:12.086: W/Ads(6557):   at java.net.Socket.connect(Socket.java:1074)
:12.086: W/Ads(6557):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
:12.086: W/Ads(6557):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
:12.086: W/Ads(6557):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
:12.086: W/Ads(6557):   at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
:12.086: W/Ads(6557):   at b.run(Unknown Source)
:12.086: W/Ads(6557):   at java.lang.Thread.run(Thread.java:1096)
:12.086: D/webviewglue(6557): nativeDestroy view: 0x382ff0
:12.086: I/Ads(6557): onFailedToReceiveAd(A network error occurred.)
:13.890: I/Web Console(6557): Omniture: s.t, instance: 1 at http://images.media-allrecipes.com/js/omni/ar_s_code.js?v=5:23
:13.894: I/Web Console(6557): [object Object] at http://images.media-allrecipes.com/js/omni/ar_s_code.js?v=5:24
:14.687: W/dalvikvm(6557): threadid=21: thread exiting with uncaught exception (group=0x4001d7f0)
:14.687: W/System.err(6557): java.lang.NullPointerException
:14.687: W/System.err(6557):    at android.net.http.CertificateChainValidator.doHandshakeAndValidateServerCertificates(CertificateChainValidator.java:194)
:14.687: W/System.err(6557):    at android.net.http.HttpsConnection.openConnection(HttpsConnection.java:308)
:14.687: W/System.err(6557):    at android.net.http.Connection.openHttpConnection(Connection.java:358)
:14.687: W/System.err(6557):    at android.net.http.Connection.processRequests(Connection.java:219)
:14.687: W/System.err(6557):    at android.net.http.ConnectionThread.run(ConnectionThread.java:113) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T23:01:40.097

顺便说一句，我认为您的 Continuum 仍在运行 Android 2.1。

> m.allrecipes.com 中有什么特别之处，以至于触发了这个 WebKit+Continuum 错误？

在 Android 2.1 模拟器中，我收到“此证书不是来自受信任的机构”对话框，但它不会崩溃。Android 2.1 可能不支持 StartCom 的根证书（如果我没看错的话，这是有问题的权威）。

[根据这个问题](http://code.google.com/p/android/issues/detail?id=21632)，StartCom 的根证书是在 Android 2.2 中添加的，在 4.0.3 模拟器中进行快速测试不会引发错误对话框。

> 三星 Continuum SCH-i400 有什么特别之处，以至于它只在这个网站上失败，而且只在基于 WebKit 的浏览器上失败？

三星可能对`android.net`软件包中的某些内容进行了调整并破坏了它，可能是专门与粗略的 SSL 证书相关的。任何将基于的浏览器都将`WebView`通过相同的代码路径运行；每个拥有自己的 HTML 渲染器的人可能不会，如果他们自己处理 SSL 证书等。

> WebKit 中的东西非常特别，以至于它不喜欢 Continuum+allrecipes.com 的组合。

基于堆栈跟踪，从技术上讲没有。您会注意到其中没有任何特定于 WebKit 的内容。这至多是一个 WebKit-on-Android 问题。而且，如上所述，它可能更适合您的三星。

> 是否有其他网站会触发此行为？

也许可以找到其他具有较小证书颁发机构证书的证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T14:23:10.490

我不太确定这是三星的问题。考虑：

使用 Android 4.0.3 的 HTC One S 加载 m.cycletrader.com 主页没有问题，但搜索时搜索结果页面崩溃。内容一闪而过，然后似乎是刷新，然后是白屏。如果我等待的时间足够长，我会收到一个无限循环重定向通知。

桌面浏览器 (Firefox 25) 使用默认用户代理字符串，加载相同的主页和搜索结果页面没有问题。

桌面浏览器 (Firefox 25) 使用 User-Agent Switcher 报告为 HTC Sensation (Android 4.0.3) 加载相同的主页没有问题，但在搜索时使搜索结果页面崩溃 - 就像实际的智能手机一样。最初是内容的闪烁，然后是白屏，浏览器没有保留源代码以进行诊断和检查。我们最初认为 javascript document.write 是罪魁祸首，但它存在并且不会对其他用户代理造成此问题。

共同点？Omniture。在搜索结果页面上禁用 Omniture，页面加载没有问题。我想知道当 Omniture 检测到某些智能手机，也许还有 Android 版本时，它是否在做一些奇怪的事情（v4.0.3 早些时候得到了一份干净的健康账单，但那是一年前的事了）。

我想深入了解这一点，以便我们可以修复 Omniture 实现中的任何问题，或者发出错误报告，以便 Omniture 注意到他们的代码正在破坏我们的网站 (m.cycletrader.com) .

# performance - 在 R - 将 For 循环更改为“apply”、“tapply”、“sapply”等

> ID：11353369
> 
> 赞同：-2
> 
> 时间：2012-07-05T22:25:38.440
> 
> 标签：performance, r, for-loop, apply

感谢您阅读此主题。我对 R 比较陌生，所以这个问题可能看起来很愚蠢。

所以，我有一个关于产品价格的数据集。它是一个 240 x 1,000 的矩阵。每列代表一个独特的产品，每一行提供特定月份 1,000 的价格信息。我正在尝试重新采样数据集并获得相同维度的新矩阵。

*   我的数据保存为“数据”

*   我想将引导结果保存在“newdata”中，这是一个空的 240x1,000 矩阵

这是我的代码：

```
for (month in 1:num.months)
{  
  for (n in 1:num.products)
  {
    newdata[month, n] <- mean(sample(data[month, ], 
                                size = num.productss,
                     replace = TRUE));
  }
 } 
```

这行得通，但 For 循环使事情变得非常缓慢。如果有人能指出我如何通过使用 apply、sapply、tapply 等来提高速度，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:46:21.647

我建议您在创建自己的采样方法之前尝试查看 R 中已有的引导函数和包。

但是，这将给出一个列表，每个元素都是从原始元素中采样的矩阵。时间包括：

```
> m = matrix(rnorm(24000),nrow=1000,ncol=24)
> nbootstrap = 100
> 
> system.time((mboot = lapply(1:nbootstrap, function(i)
+   {
+    m[sample(1:nrow(m),replace=T),]
+ })))
   user  system elapsed 
   0.27    0.00    0.26 

> m = matrix(rnorm(24000),nrow=1000,ncol=24)
> nbootstrap = 1000
> 
> system.time((mboot = lapply(1:nbootstrap, function(i)
+   {
+    m[sample(1:nrow(m),replace=T),]
+ })))
   user  system elapsed 
   1.45    0.03    1.59 

> m = matrix(rnorm(240000),nrow=1000,ncol=240)
> nbootstrap = 100
> 
> system.time((mboot = lapply(1:nbootstrap, function(i)
+   {
+    m[sample(1:nrow(m),replace=T),]
+ })))
   user  system elapsed 
   0.97    0.05    1.02 

> m = matrix(rnorm(240000),nrow=1000,ncol=240)
> nbootstrap = 1000
> 
> system.time((mboot = lapply(1:nbootstrap, function(i)
+   {
+    m[sample(1:nrow(m),replace=T),]
+ })))
   user  system elapsed 
   6.60    1.20    7.97 
```

# javascript - IE8 中的 javascript match() 错误

> ID：11353372
> 
> 赞同：0
> 
> 时间：2012-07-05T22:25:55.833
> 
> 标签：javascript, jquery

我无法弄清楚为什么 IE8 不喜欢这样：

```
//get all checked values from the checkboxes with the option_checkbox class
var values = $j('input:checkbox:checked.option_checkbox').map(function () { return this.value; }).get();
if (values.length>0){
  for (x in values){
    if(values[x].match("v")){ // <--this line causes a javascript error in IE8
      //do something here
    }
  }
} 
```

我收到此错误：“对象不支持此属性或方法”

我在想我应该做一些其他类型的验证来验证类型，因为 map() 和 get() 可能没有返回我所期望的（具有该特定复选框值的字符串）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:29:49.707

试试这个：

```
values[x].match(/v/); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:30:17.050

使用`indexOf`，它的[*速度快得可以忽略不计*](http://jsfiddle.net/wXgAc/)*：*

```
if(values[x].indexOf("v") > -1) { /* ... */ } 
```

# android - .setAdapter（适配器）；给出 NullPointerException

> ID：11353384
> 
> 赞同：0
> 
> 时间：2012-07-05T22:27:16.070
> 
> 标签：android, arrays, android-arrayadapter

我正在尝试为微调器制作适配器，但是我在 answertime.setAdapter(adapter); 上得到一个 NullPointerException 为什么是这样？我的数组在它们应该在的 strings.xml 中？这是完整的代码。

```
package lijap.app.starcraft2counters;

import java.io.File;

import android.app.Activity;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ArrayAdapter;
import android.widget.Spinner;
import android.widget.Toast;

public class Settings extends Activity implements OnItemSelectedListener {
Spinner answertime;
Spinner gametime;
Spinner missesallowed;

String[] answerseconds = { "Unlimited", "1 second", "2 seconds",
        "3 seconds", "4 seconds", "5 seconds" };

String[] gameminutes = { "Unlimited", "1 minute", "2 minutes", "3 minutes",
        "4 minutes", "5 minutes" };

String[] numberofmisses = { "Unlimited", "5", "10", "15", "20", "25" };

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    ArrayAdapter adapter = ArrayAdapter.createFromResource(this, R.array.AnswerSeconds, R.layout.custom_spinner_list);
    adapter.setDropDownViewResource(R.layout.custom_spinner);
    answertime.setAdapter(adapter);

    ArrayAdapter adapter2 = ArrayAdapter.createFromResource(this, R.array.GameMinutes, R.layout.custom_spinner_list);
    adapter.setDropDownViewResource(R.layout.custom_spinner);
    gametime.setAdapter(adapter);

    ArrayAdapter adapter3 = ArrayAdapter.createFromResource(this, R.array.NumberOfMisses, R.layout.custom_spinner_list);
    adapter.setDropDownViewResource(R.layout.custom_spinner);
    missesallowed.setAdapter(adapter);

    answertime = (Spinner) findViewById(R.id.s_answertime);
    answertime.setAdapter(adapter);
    answertime.setOnItemSelectedListener(this);

    missesallowed = (Spinner) findViewById(R.id.s_mistakenumber);
    missesallowed.setAdapter(adapter2);
    missesallowed.setOnItemSelectedListener(this);

    gametime = (Spinner) findViewById(R.id.s_gametime);
    gametime.setAdapter(adapter3);
    gametime.setOnItemSelectedListener(this);
}

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) {
    // TODO Auto-generated method stub

}

@Override
public void onNothingSelected(AdapterView<?> arg0) {
    // TODO Auto-generated method stub

} 
```

}

任何帮助表示赞赏-Lijap

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:30:40.820

你需要初始化

```
Spinner answertime;
Spinner gametime;
Spinner missesallowed; 
```

否则，以下行将为您提供`NullPointerException`：

```
answertime.setAdapter(adapter);
gametime.setAdapter(adapter);
missesallowed.setAdapter(adapter); 
```

要初始化`Spinner`s，您应该在调用后添加如下内容`setContentView`：

```
answertime = findViewById(R.id.answertime);
gametime = findViewById(R.id.gametime);
missesallowed = findViewById(R.id.missesallowed); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:31:45.037

您永远不会初始化`answertime`,`gametime`或`missesallowed`. 你需要做这样的事情，

```
answertime = findViewById(R.id.<the id for this spinner>);
gametime = findViewById(R.id.<the id for this spinner>);
missesallowed = findViewById(R.id.<the id for this spinner>); 
```

在你打电话`setAdapter()`给他们之前。

还有一个问题，

```
ArrayAdapter adapter2 = ArrayAdapter.createFromResource(this, R.array.GameMinutes, R.layout.custom_spinner_list);
adapter.setDropDownViewResource(R.layout.custom_spinner);
gametime.setAdapter(adapter); 
```

请注意，您在 reference 中构造了一些东西`adapter2`，然后修改了`adapter`，并将其设置`adapter`为微调器的适配器。那是你要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T07:22:45.600

还要确保视图可见性设置为 View.VISIBLE

# css - 在 Sass @for 循环中使用 css3 媒体查询

> ID：11353385
> 
> 赞同：2
> 
> 时间：2012-07-05T22:27:19.277
> 
> 标签：css, media-queries, sass

是否可以？

前任：

```
@for $i from 1 through 12 {
  @media screen and (min-width: #{$i * 240}) { 
    width: {$i * 240 + (20*($i-1)) } ;
  }
} 
```

但我不断得到

```
Invalid CSS after "...nd (min-width: ": expected expression (e.g. 1px, bold), was "#{$i * 240}) { ..." 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-08T04:57:25.473

您只能在 Sass 3.2 及更高版本的媒体查询中使用变量。您可以通过在终端中运行它来找到您正在使用的版本：

```
gem list | grep sass 
```

您可以通过运行安装 3.2 alpha：

```
(sudo) gem install sass --pre 
```

我假设您也希望使用像素，因此一旦安装了 3.2+，您可以将代码清理为：

```
@for $i from 1 through 12 {
  @media screen and (min-width: $i * 240px) { 
    width: $i * 240px + (20*($i - 1));
  }
} 
```

注意乘以`240px`而不是只是`240`和之间添加的空间`$i - 1`

# c# - c#合并字节数组并转换为16位整数

> ID：11353389
> 
> 赞同：2
> 
> 时间：2012-07-05T22:27:42.417
> 
> 标签：c#, bytearray

假设我有一个这样定义的字节数组：

```
byte[] byteArray = { 0x08, 0x00 }; 
```

我需要组合数组中的元素来创建：

```
0x0800 
```

然后将其转换为int：

```
2048 
```

像这样的东西：

```
 private static int GetMessageType(byte[] byteArray)
    {
        if(byteArray.Length != 2)
            throw new ArgumentOutOfRangeException("byteArray");

        throw new NotImplementedException();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:44:51.373

为什么不只使用简单的位运算符？例如

```
byte hiByte = byteArray[0];  // or as appropriate
byte lowByte = byteArray[1];
short val = (short)((hiByte << 8) | lowByte); 
```

在这种情况下，按位结果被视为 [signed] `short`（在标题之后？）并且可能导致负值，但可以通过删除强制转换来根据需要更改 ..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:30:58.633

您应该使用[`BitConverter.ToInt16`](http://msdn.microsoft.com/en-us/library/system.bitconverter.toint16.aspx)，除非您似乎需要 BigEndian 转换。所以使用 Jon Skeet 的`EndianBitConverter`：[http ://www.yoda.arachsys.com/csharp/miscutil/](http://www.yoda.arachsys.com/csharp/miscutil/)

# c# - 表单字典的Json反序列化 >

> ID：11353392
> 
> 赞同：3
> 
> 时间：2012-07-05T22:27:51.683
> 
> 标签：c#, json

我正在尝试将表单的 json 字符串反序列化为`[{"key" : "Microsoft", "value":[{"Key":"Publisher","Value":"abc"},{"Key":"UninstallString","Value":"c:\temp"}]} and so on ]`C# 对象。

它基本上是形式`Dicionary<string, Dictionary<string, string>>`。我尝试使用 Newtonsoft `JsonConvert.Deserialize`，但出现错误：

```
无法将当前 JSON 数组（例如 [1,2,3]）反序列化为类型 'System.Collections.Generic.Dictionary`2[System.String,System.Collections.Generic.Dictionary`2[System.String,System.String ]]' 因为该类型需要一个 JSON 对象（例如 {"name":"value"}）才能正确反序列化。

要修复此错误，请将 JSON 更改为 JSON 对象（例如 {"name":"value"}）或将反序列化类型更改为数组或实现集合接口的类型（例如 ICollection、IList），例如可以从 JSON 数组反序列化。JsonArrayAttribute 也可以添加到类型中以强制它从 JSON 数组反序列化。
路径''，第 1 行，位置 1。

```

还有其他替代方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T14:34:00.980

我能找到的最好方法是：

```
string json = @"[{""Key"" : ""Microsoft"", ""Value"":[{""Key"":""Publisher"",""Value"":""abc""},{""Key"":""UninstallString"",""Value"":""c:\temp""}]}]";

var list = JsonConvert.DeserializeObject< List<KeyValuePair<string,List<KeyValuePair<string, string>>>> >(json);

var dict= list.ToDictionary(
         x => x.Key, 
         x => x.Value.ToDictionary(y=>y.Key,y=>y.Value)); 
```

# php - MySQL插入空白行，无法弄清楚原因，没有错误

> ID：11353393
> 
> 赞同：0
> 
> 时间：2012-07-05T22:27:56.763
> 
> 标签：php, mysql

我的网站仅在创建帐户后才提供服务和访问权限，这仅在付款完成后才会发生。

我遇到的问题是下面的 mySQL 语句。我知道语句本身没有任何“破坏交易”的错误，因为如果我设置`$usr_name = 'bob'` 例如而不是会话变量（这是我需要的），它会被添加到数据库中，使用相同的确切 mySQL 没有问题询问。当我尝试将变量设置为下面的会话变量时，问题就出现了。当我这样做时，一个空白行被添加到数据库中。

您会认为会话变量不包含任何内容，这将是对我的问题的合乎逻辑的解释，但是，下面的代码中的 echo 从会话变量中获取其值会按应有的方式打印出所有内容，因此会话变量是正确设置。

我还想补充一点，代码大部分是正确编写的，并且在付款完成后会到达最里面的 if 语句，这是应该的。

另外，尝试将 or 添加`die(mysql_error())`到我的查询中，并且没有打印出错误。

如果有人能建议我可以做些什么来尝试解决这个问题，我将不胜感激。

```
<?php

    session_start();
    //Create mysql connect variable
    $conn = mysql_connect('myhostedresource.com', 'user', 'password');

    //kill connection if error occurs
    if(!$conn){
        die('Error: Unable to connect.' . '<br>' . mysql_error());
    }

    //connect to mysql database
    mysql_select_db("stevenash", $conn);

    // PHP 4.1
    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';

    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }

    // post back to PayPal system to validate
    $header .= "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

    // assign posted variables to local variables
    $item_name = $_POST['item_name'];
    $item_number = $_POST['item_number'];
    $payment_status = $_POST['payment_status'];
    $payment_amount = $_POST['mc_gross'];
    $payment_currency = $_POST['mc_currency'];
    $txn_id = $_POST['txn_id'];
    $receiver_email = $_POST['receiver_email'];
    $payer_email = $_POST['payer_email'];       

    $usr_email = mysql_real_escape_string($_SESSION['email']);
    $usr_compname = mysql_real_escape_string($_SESSION['compname']);
    $usr_city = mysql_real_escape_string($_SESSION['city']);
    $usr_state = mysql_real_escape_string($_SESSION['state']);
    $usr_phone = mysql_real_escape_string($_SESSION['phone']);
    $usr_password = mysql_real_escape_string($_SESSION['password']);
    $usr_first = mysql_real_escape_string($_SESSION['first']);
    $usr_last = mysql_real_escape_string($_SESSION['last']);

    $_SESSION['email'];

    if (!$fp) {
        // HTTP ERROR
    }else{
        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            if (strcmp ($res, "VERIFIED") == 0) {
                // check the payment_status is Completed
                if($payment_status == 'Completed'){
                    $txn_id_check = mysql_query("SELECT txn_id FROM log WHERE txn_id='$txn_id'");
                    //add user to database
                    if(mysql_num_rows($txn_id_check) != 1){ //payment has not been processed yet
                        //continue processing
                        if($receiver_email=='matthayzon89@gmail.com'){
                            if($payment_amount=='1.00' && $payment_currency=='USD'){
                                //add transaction id to db
                                mysql_query("INSERT INTO log (`log_id`, `txn_id`, `email`) VALUES('','$txn_id','$payer_email')", $conn);            

                                $myString = "INSERT users (`email`, `compname`, `city`, `state`, `phone`, `password`, `first`, `last`) 
                                            VALUES('".$usr_email."','".$usr_compname."','".$usr_city."','".$usr_state."','".$usr_phone."','".$usr_password."','".$usr_first."','".$usr_last."')";
                                echo $myString;     

                                mysql_query($myString,$conn);
                            }
                        }
                    }
                }
                // check that txn_id has not been previously processed
                // check that receiver_email is your Primary PayPal email
                // check that payment_amount/payment_currency are correct
                // process payment
            }
            else if (strcmp ($res, "INVALID") == 0) {
                // log for manual investigation
            }
        }
        fclose ($fp);
    }
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:47:03.150

我相信`id`第二个查询是`AUTO_INCREMENT`. 只要`AUTO_INCREMENT`有字段，就不要在查询中使用它们。另外，您将其设置`''`为不正确的。

您的查询**应该**是。

```
 mysql_query("
            INSERT INTO users 
            (`email`, `compname`, `city`, `state`, `phone`, `password`, `first`, `last`)
            VALUES(
           '$usr_email','$usr_compname','$usr_city','$usr_state',$usr_phone,
            '$usr_password','$usr_first','hello')",$conn); 
```

## 编辑 1

`$usr_phone`也不应该在引号中，因为电话号码是整数值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:55:23.177

```
mysql_query("INSERT INTO log (log_id, txn_id, email) VALUES('','$txn_id','$payer_email')", $conn);
mysql_query("INSERT INTO users (`id`, `email`, `compname`, `city`, `state`, `phone`, `password`, `first`, `last`)
             VALUES('', '$usr_email','$usr_compname','$usr_city','$usr_state','$usr_phone','$usr_password','$usr_first','hello')",$conn); 
```

在运行它之前尝试打印出你的 SQL，看看它在做什么：

```
$logSql = "INSERT INTO log (log_id, txn_id, email) VALUES('','$txn_id','$payer_email')";
echo $logSql;
// mysql_query($logSql, $conn);

$insertSql = "INSERT INTO users (`id`, `email`, `compname`, `city`, `state`, `phone`, `password`, `first`, `last`)
              VALUES('', '$usr_email','$usr_compname','$usr_city','$usr_state','$usr_phone','$usr_password','$usr_first','hello')";
echo $insertSql;
// mysql_query($insertSql, $conn); 
```

找出问题所在，并继续向后工作（添加`echo`语句），直到找到问题的根源。

# php - jQuery 变量到 PHP 会话

> ID：11353396
> 
> 赞同：0
> 
> 时间：2012-07-05T22:28:46.207
> 
> 标签：php, javascript, jquery

再会！有没有一种解决方案可以为 PHP Session 分配一个 Javascript 值？

```
var radioVal = $(this,".margin_left25").val(); 
```

* * *

```
$_SESSION['value'] = radioVal; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:31:28.587

您不能混合使用 PHP 和 JS。但是，您可以通过 AJAX 向服务器发送 POST 请求来设置此变量。

看一眼[`jQuery.post()`](http://api.jquery.com/jQuery.post/)

链接页面的修改示例：

```
$.post("test.php", { radioVal: $(this,".margin_left25").val() }, function(data) {
    alert("Data Loaded: " + data);
}); 
```

然后在`test.php`你可以做

```
session_start();
$_SESSION['value'] = $_POST['radioVal']; 
```

**替代方法（无 AJAX）**

制作一个新图像并使用您的参数将源设置为您的 URL。

例子：

```
var img = new Image();
img.src = "test.php?radioVal=" + encodeURIComponent($(this,".margin_left25").val()); 
```

显然没有图像，但它会尝试加载 URL，您的 PHP 仍将执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:33:00.707

您必须向服务器发送请求，并让 PHP 处理该请求。例如，您可以使用 Ajax 请求（在 jQuery 中）：

```
$.post("setsession.php", {"value" : $(this,".margin_left25").val();  }); 
```

并在`setsession.php`：

```
<?php
session_start();
$_SESSION['value'] = $_POST['value']; 
```

执行此操作的其他方法是提交表单等，但您*必须*通过 Ajax 或其他方式生成请求，以便在客户端 (JavaScript) 和服务器 (PHP) 之间进行任何交互。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:31:04.423

不，不是。如果您需要将其设置为会话，请通过 AJAX 将其发送到服务器，然后进行设置，这样就可以了。

# java - 如何在 Mule 中查找 Java 组件？

> ID：11353398
> 
> 赞同：0
> 
> 时间：2012-07-05T22:29:07.010
> 
> 标签：java, mule

给定一个如下所示的 Java 组件

```
<flow name="MainFlow2" doc:name="MainFlow2">
    ...
    <component class="com.service.gateway.MyService" doc:name="My Gateway"/>
    ...
</flow> 
```

我在注册自定义代理时尝试获取它

```
<custom-agent name="my-agent" class="com.monitor.MyAgent"/> 
```

通过做这个

```
 muleContext.getRegistry().lookupObjects(DefaultJavaComponent.class); 
```

看起来这些 java 组件不在注册表中，我没有得到它们。

到目前为止，我有这个解决方法

```
 // Get all flows
    for (AbstractFlowConstruct flowConstruct : muleContext.getRegistry().lookupObjects(AbstractFlowConstruct.class)) {
           if (flowConstruct instanceof AbstractPipeline) {
                 //get flow's MessageProcessor
                 List<MessageProcessor> mgs = ((AbstractPipeline) flowConstruct).getMessageProcessors();
                 for (MessageProcessor messageProcessor : mgs) {
                           if (messageProcessor instanceof DefaultJavaComponent) {
                              DefaultJavaComponent javaComp = (DefaultJavaComponent) messageProcessor;
                              //GOT IT!
                           }
                 }
            }
      } 
```

您知道如何以编程方式直接获取所有 Java 组件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T01:40:38.763

DefaultJavaComponent 是一个 Mule 包装器，用于将任何 POJO 改编为可用组件，这就是为什么您不会发现它已注册的原因。

就个人而言，对于这种高级场景，我会使用 Spring 实例化我的 POJO，将它们称为`spring-object`s in并使用任何有意义的策略（按名称？按类？）`component`查找它们。`muleContext.getRegistry()`

# c++ - 为什么异常规范没有用？

> ID：11353404
> 
> 赞同：3
> 
> 时间：2012-07-05T22:29:43.030
> 
> 标签：c++, templates, exception, exception-specification

我已经阅读了很多关于（不）`throw(X)`在函数签名中使用的论点，我认为它在 ISO C++ 中指定的方式（并在当前编译器中实现）是相当没用的。但是为什么编译器不能简单地在编译时**强制执行**异常正确性呢？

如果我编写包含`throw(A,B,C)`在其签名中的函数/方法定义，编译器在确定给定函数的实现是否异常正确时应该不会有很多问题。这意味着函数体有

*   除了;没有`throw`其他的`throw A; throw B; throw C;`
*   没有任何函数/方法调用的 throw-signatures 限制小于`throw (A,B,C)`;

，至少在`try{}catch()`捕捉其他抛出类型之外。如果编译器在不满足这些要求的情况下引发错误，则所有函数都应该是“安全的”，并且不需要运行时函数`unexpected()`。所有这些都将在编译时得到保证。

```
void fooA() throw (A){
}

void fooAB() throw (A,B){
}

void fooABC() throw (A,B,C){
}

void bar() throw (A){

    throw A();   // ok
    throw B();   // Compiler error

    fooA();      // ok
    fooAB();     // compiler error
    fooABC();    // compiler error

    try{
       throw A();   // ok
       throw B();   // ok
       throw C();   // Compiler error

       fooA();   // ok
       fooAB();  // ok
       fooABC(); // compiler error
    } catch (B){}
} 
```

`throw()`这将要求默认指定所有非 C++ 领域代码（默认情况下`extern "C"`应假定它），或者如果存在一些异常互操作性，则还应指定适当的标头（至少对于 C++）`throw`。不这样做可以与在不同的编译单元中使用具有不同函数/方法返回类型的头文件进行比较。虽然它没有产生警告或错误，但它显然是错误的 - 由于抛出的异常是签名的一部分，它们也应该匹配。

如果我们强制执行这样的约束，它将产生三个影响：

*   它将删除所有那些隐式`try{}catch`块，否则运行时检查需要，从而提高异常处理性能。
*   “异常使我们的库太大，所以我们关闭它们”的论点；会消失，因为大多数附加代码都存在于每个函数调用中那些不必要的隐式 throw/catch 指令中。如果代码被正确`throw`指定，大部分代码都不会被编译器添加。
*   这会让编程界的大多数人大发雷霆，因为似乎没有人喜欢例外。现在，由于这些实际上是可用的，我们需要学习如何使用它们。

如果我们对旧代码使用一些兼容性编译器标志，它不会破坏任何东西，但是由于新的异常代码会更快，所以不使用它编写新代码是一个很好的动机。

总结一下我的问题：为什么 ISO C++ 不需要这种强制措施？有什么强有力的理由让它不存在吗？我一直认为异常只是另一个函数的返回值，但它是自动管理的，所以你可以避免编写类似的函数

```
std::pair<int, bool> str2int(std::string s);
int str2int(std::string s, bool* ok); 
```

加上额外的变量自动销毁和通过堆栈上的多个函数传播，所以你不需要像这样的代码

```
int doThis(){

    int err=0;

    [...]

    if ((err = doThat())){
        return err;
    }

    [...]

} 
```

;如果你可以`return`只要求正确类型的功能，为什么你不能要求它`throw`呢？

为什么异常说明符不能更好？为什么它们不像我从一开始就描述的那样制作？

PS 我知道例外和模板可能存在一些问题——取决于这个问题的答案，也许我会问另一个问题——现在让我们忘记模板。

**编辑**（回应@NicolBolas）：

> 编译器可以对异常类 X 做什么样的优化，而对 Y 却做不到呢？

相比：

```
void fooA() throw (A){
}

void fooAB() throw (A,B){
}

void fooABC() throw (A,B,C){
}

void bar() throw (){

    try{
       fooA();
         // if (exception == A) goto A_catch
       fooAB();
         // if (exception == A) goto A_catch
         // if (exception == B) goto B_catch
       fooABC();
         // if (exception == A) goto A_catch
         // if (exception == B) goto B_catch
         // if (exception == C) goto C_catch
    }
    catch (A){  // :A_catch
      [...]
    }
    catch (B){  // :B_catch
      [...]
    }
    catch (C){  // :C_catch
      [...]
    }
} 
```

和：

```
void fooA(){
}

void fooAB(){
}

void fooABC(){
}

void bar(){

    try{
       fooA();
         // if (exception == A) goto A_catch;
         // if (exception == B) goto B_catch;
         // if (exception == C) goto C_catch;
         // if (exception == other) return exception;
       fooAB();
         // if (exception == A) goto A_catch;
         // if (exception == B) goto B_catch;
         // if (exception == C) goto C_catch;
         // if (exception == other) return exception;
       fooABC();
         // if (exception == A) goto A_catch;
         // if (exception == B) goto B_catch;
         // if (exception == C) goto C_catch;
         // if (exception == other) return exception;
    }
    catch (A){  // :A_catch
      [...]
    }
    catch (B){  // :B_catch
      [...]
    }
    catch (C){  // :C_catch
      [...]
    }
} 
```

在这里，我包含了一些编译器不会生成汇编级别的伪代码。如您所见，知道您可以获得哪些异常可以减少代码量。如果我们在这里有一些额外的变量要销毁，额外的代码会更长。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T23:52:51.203

作为函数签名的一部分的编译器验证异常有两个（理论上的）优点：编译器优化和编译时错误检查。

`X`就编译器而言，抛出异常的函数 class和 class有什么区别`Y`？最终……什么都没有。`X`编译器可以对它不能做的异常类做什么样的优化`Y`？除非`std::exception`是特殊的（并且`X`是从它派生的，而`Y`不是），对编译器有什么影响？

最终，编译器在优化方面唯一关心的是函数是否会抛出*任何*异常。这就是 C++11 标准委员会放弃`throw(...)`支持的原因`noexcept`，它声明该函数不会抛出任何东西。

至于编译时错误检查，Java 清楚地展示了它的工作原理。您正在编写一个函数，`foo`. 你的设计有它抛出`X`和`Y`。其他代码片段使用`foo`，并且他们抛出任何`foo`抛出的东西。但是异常规范并没有说“无论`foo`抛出什么”。它必须列出`X`并`Y`具体。

现在您返回并进行更改`foo`，使其不再抛出`X`，但现在它会抛出`Z`。突然，整个项目停止编译。您现在必须转到每个抛出任何`foo`抛出的函数，以将其异常规范更改为 match `foo`。

最终，程序员只是举手并说它会抛出任何异常。当您放弃这样的功能时，实际上是在承认该功能弊大于利。

并不是说它们*没有*用。只是它们的实际使用表明它们通常没有用。所以没有意义。

另外，请记住，C++ 的规范声明没有规范意味着将抛出任何东西，而不是什么都不会（如在 Java 中）。使用该语言的最简单方法就是这样：不检查。所以会有很多人不想使用它。

许多人不想打扰的功能有什么好处，即使是那些喜欢的人通常也会因此而感到悲伤？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:34:48.663

> 这意味着函数体有
> 
> 除了投掷A之外没有投掷；扔B；投掷 C;;
> 没有比 throw (A,B,C) 更严格的 throw 签名的函数/方法调用；

不要忘记代码可以在不同的时间在不同的机器上编译，并且只能在运行时通过动态库链接在一起。编译器可能具有被调用函数签名的*本地*版本，但它可能与运行时实际使用的版本不匹配。（我认为如果异常不完全匹配，我认为可以修改链接器以禁止链接，但这可能会带来比它解决的更多的烦恼。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:57:25.677

在某些情况下，抛出规范可能很有用，尤其是在嵌入式系统上，其中的替代方法是完全禁止异常。除此之外，如果唯一允许抛出的函数是那些明确指定的函数，那么在调用不能抛出的函数时可以消除异常处理开销。请注意，即使在使用“元数据”进行异常处理的系统中，异常处理程序必须能够理解堆栈帧这一事实排除了原本可能实现的优化。

抛出规范可能有用的另一种情况是，如果编译器允许`catch`语句指定它们应该只捕获没有通过任何非“预期”层冒泡的异常。C++ 中异常处理概念和借用它的语言的一个主要弱点是，对于由此记录的条件，没有很好的方法来区分发生在被调用例程中的异常与发生在嵌套子例程中的异常，例如直接调用例程的原因没想到。如果一个`catch`声明可以作用于前者而不捕捉后者，那将是有帮助的。

# php - 使用 PHP 和 preg_match 从多行模式中提取值

> ID：11353406
> 
> 赞同：1
> 
> 时间：2012-07-05T22:29:56.423
> 
> 标签：php, preg-match, multiline

我正在尝试使用 PHP 和 preg_match 从多行模式中提取一个值。我在传递给 preg_match($regex, $string, $the_match) 的字符串中搜索的模式：

```
Latitude:</td>
        <td class="formCell">
        40-45-40.205 N
       </tr> 
```

我知道，如果它都在一条线上，像这样：

```
Latitude:</td><td class="formCell">40-45-40.205 N</tr> 
```

那么以下内容将是有效的，它将正确提取值：

```
/Latitude:<\/td><td class="formCell">(.*?)<\/tr>/ 
```

但是，由于我正在寻找的模式有多行，因此上述正则表达式不起作用。我正在通过 file_get_contents($url) 获取我传递给 preg_match() 的初始字符串，所以我在某种程度上受远程内容的支配。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:38:31.383

使用`[\s\S]`而不是`.`.

```
/Latitude:<\/td>[\s]*<td class="formCell">([\s\S]*?)<\/tr>/ 
```

`.`是通配符，但不包括空格 - 包括换行符 - 字符。`[\s\S]`简单地说“匹配所有空格和非空格字符”。

请注意，我还允许在`</td>`.

（旁注：HTML 无效 - 在关闭表格单元格之前关闭表格行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:38:16.290

没有简单的标志。一个简单的 hack 可能是：

```
Latitude:(.*?)<\/td>(.*?)<td class="formCell">(.*?)<\/tr> 
```

然后将 dotall 标志添加到您的正则表达式中，以允许 '.'[dot] 也匹配换行符。但它可以匹配更多。它是您自己的代码还是您从第三方网站翻录 html？因为也许你在不需要的时候使用了正则表达式！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:00:21.723

我认为诀窍是`[\s]*`在 HTML 形式合法允许空白的任何地方“洒”。您不需要特殊的标志或任何东西。

```
Latitude:[\s]*<\/td>[\s]*<td[\s]*class="formCell">[\s]*([\s\S]*?)[\s]*<\/tr> 
```

请记住，html 对空格非常宽容。您需要评估您的输入并确定您可以接受的容忍度。

另一个需要注意的是，这些元素可能具有不同的属性或不同的引用样式......如果您也必须使用它，您将需要使用更多的`.`然后使用“未就绪”标志（`u`在传递它时添加在模式之后到 preg 函数）；然后，一旦您意识到 > 可以合法地出现在属性内部，也许会进行一些花哨的反向引用；-)

# php - 单击添加按钮后如何显示答案按钮？

> ID：11353410
> 
> 赞同：0
> 
> 时间：2012-07-05T22:30:42.360
> 
> 标签：php, javascript

我[在这里](http://helios.hud.ac.uk/u0867587/Mobile_app/Text16.php)有一个应用程序，用户可以在其中选择他们的选项和答案。向您解释问题的最佳方式是您是否使用应用程序本身，以便您可以看到正在发生的事情。请按照以下步骤申请。

*   步骤1：当你打开应用程序时，你会看到“打开网格”链接，点击它并选择一个选项类型，选择一个选项后，它会在底部显示答案按钮。例如，如果您选择的选项是“5”，它将显示 5 个答案按钮“A - E”，如果选择的选项是 8，它将显示 8 个答案按钮“AH”。

现在这很好。但我遇到的问题是用户是否想添加以前的选项。请看以下步骤：

*   第二步：刷新页面
*   第三步：你会在左侧看到一个绿色的加号按钮，点击它，这将打开一个模态窗口。
*   第 4 步：在搜索框中输入“AAA”，然后单击“提交”按钮，它将显示数据库中的行。
*   步骤 5：请通过单击“添加”按钮选择一行，模式窗口将关闭，如果您查看右侧的答案和选项控件，您可以看到选项类型文本框和答案数量文本框出现，但没有出现“应答”按钮。

所以我的问题是如何在用户单击“添加”按钮后显示“回答”按钮？

以下是控制单击“添加”按钮后发生的情况的函数：

```
function addwindow(numberAnswer,gridValues) { 

    if(window.console) console.log();

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 

        $('#mainNumberAnswerTxt').val(numberAnswer);
        $('#mainGridTxt').val(gridValues);
        } else { 
            $(plusbutton_clicked).closest('tr').find('input.numberAnswerTxtRow').val(numberAnswer);
            $(plusbutton_clicked).closest('tr').find('input.gridTxtRow').val(gridValues);
            }

    $.modal.close(); 
    return false;
} 
```

下面是存储答案按钮的代码（我需要调用什么才能显示答案按钮）：

```
<table id="optionAndAnswer" class="optionAndAnswer">

...

<?php
    $a = range("A","Z");
?>

<table id="answerSection">
    <tr>

<?php
    $i = 1;
    foreach($a as $key => $val){
        if($i%7 == 1) echo"<tr><td>";
        echo"<input type=\"button\" onclick=\"btnclick(this);\" value=\"$val\" id=\"answer".$val."\" name=\"answer".$val."Name\" class=\"answerBtns answers answerBtnsOff\">";      
        if($i%7 == 0) echo"</td></tr>";
        $i++;
    }
?>
    </tr>
    <tr>
<td>
<input class="answerBtns answers" name="answerTrueName"  id="answerTrue"    type="button"   value="True"    onclick="btnclick(this);"/>
<input class="answerBtns answers" name="answerFalseName" id="answerFalse"   type="button"   value="False"   onclick="btnclick(this);"/>
<input class="answerBtns answers" name="answerYesName"   id="answerYes"     type="button"   value="Yes"     onclick="btnclick(this);"/>
<input class="answerBtns answers" name="answerNoName"    id="answerNo"      type="button"   value="No"      onclick="btnclick(this);"/>
</td>
</tr>
</table>
...
</table> 
```

更新：

下面是从网格中选择选项后导入答案按钮的代码：

```
 $('.gridBtns').on('click', function()

    {

    appendAnswers(this);

});

function appendAnswers(t){
var clickedNumber = t.value;

        $(t).closest('.option').siblings('.numberAnswer').find('.answertxt').show();
        $(t).closest('.option').siblings('.numberAnswer').find('.string').hide();

         $(t).closest('.option').siblings('.answer').find('.answers').each(function(index) {
            if (!isNaN(clickedNumber) && index < clickedNumber) {
                $(t).show();
                $(t).closest('.option').siblings('.numberAnswer').find('.string').hide();

         // show but don't change the value
         $(t).closest('.option').siblings('.numberAnswer').find('.answertxt').show();

            } else {

                $(t).hide();
                $(t).removeClass('answerBtnsOn');
                $(t).addClass('answerBtnsOff');

            }

            var $this = $(t);
             var context = $this.parents('.optionAndAnswer');
             console.log($this);

        });

        prevButton = clickedNumber;

            $(t).closest('.option').siblings('.noofanswers').find('.string').hide();     
            $(t).closest('.option').siblings('.noofanswers').find('.answertxt').show();

        getButtons();

    };
});

    function getButtons()
    {
        var i;
        if (initClick == 0) {
            for (i = 65; i <= 90; i++) { // iterate over character codes for A to Z
                $("#answer" + String.fromCharCode(i)).removeClass("answerBtnsOn").addClass("answerBtnsOff");

            }

            initClick = 1;
        }
        // code above makes sure all buttons start off with class answerBtnsOff, (so all button are white).
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:08:54.043

那么，当您单击网格中的选项时会触发什么？如果具有您要查找的属性的对象的名称是根据选项类型命名的：即“选项类型 4”是“op4”，那么，不是让“以前的问题”查询填充该字段，而是它将返回的值存储为 vars，然后在您单击弹出窗口中的选项时调用填充答案的相同函数：

```
optionPicked("op" + opType); 
```

或者你怎么称呼它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:23:45.130

编辑：“this”需要作为对象传递，尝试编辑代码

像这样从onClick中拉出函数，然后像“getChoice(4);”一样调用它 当历史页面触发添加按钮时。

像这样重写：

```
function getChoice(obj){

    var clickedNumber = this.value;

    $(obj).closest('.option').siblings('.numberAnswer').find('.answertxt').show();
    $(obj).closest('.option').siblings('.numberAnswer').find('.string').hide();

     $(obj).closest('.option').siblings('.answer').find('.answers').each(function(index) {
        if (!isNaN(clickedNumber) && index < clickedNumber) {
            $(obj).show();
            $(obj).closest('.option').siblings('.numberAnswer').find('.string').hide();

     // show but don't change the value
     $(obj).closest('.option').siblings('.numberAnswer').find('.answertxt').show();

        } else {

            $(obj).hide();
            $(obj).removeClass('answerBtnsOn');
            $(obj).addClass('answerBtnsOff');

        }

        var $this = $(obj);
         var context = $this.parents('.optionAndAnswer');
         console.log($this);

    });

    getButtons();

}

$('.gridBtns').on('click', function(){

getChoice(this);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:25:04.583

只需调用与单击 .gridBtns 相同的函数即可。将该函数作为他自己的函数，并使用属性 (this) 调用它，以便它知道要使用哪些数据。我想这就是求解器。只需再次运行该功能（也许您必须对其进行一些修改才能同时使用两个按钮）

为此。制作事件监听器，一个用于 .gridBtns，一个用于 .addBtn。

当调用 .gridBtns 或 .addBtns 时，只需在 eventlistener 中运行该函数：

```
$('.gridBtns').on('click', function(){
  appendAnswers(this);
}); 
```

并将您之前使用的函数修改为：

```
function appendAnswers(t){
  //t = this you defined in the onclick event
  //rest of your code here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T22:55:56.043

我不太确定我是否完全理解你的问题，但我尝试了几次你的应用程序，我想我明白了：从数据库加载结果->用结果填充字段？

无论如何，我看到你正在使用 Jquery，所以我认为你应该能够使用 .html() 或 .append() 在 for 循环中添加每个按钮：（我假设你已经将答案按钮存储在一个数组中）。我很懒所以我通常用 ID 命名目标#ButtonHolder 是你的按钮。

```
var buttonhtml = ""; //I personally like to build the html then insert it. 
var lastchar = gridValues.charCodeAt(gridvalues.length-1);
for (i=65;i<=lastchar;i++) // 65 is the code for "A"
buttonhtml += "<input type=\"button\" onclick=\"btnclick(this);\" value=\""+String.fromCharCode(i)+"\" id=\"answer"+String.fromCharCode(i)+"\" name=\"answer"+String.fromCharCode(i)+"Name\" class=\"answerBtns answers answerBtnsOn\">";
$("#ButtonHolder").html(buttonhtml); 
```

你有没有想过不使用onclick，而是使用JQuery 来处理带有类的点击？

编辑：

```
function addwindow(questionText,textWeight,numberAnswer,gridValues) { 

    if(window.console) console.log();

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 

        if( gridValues != "True or False" && gridValues != "Yes or No" )
{
   var myNumbers = {};
   myNumbers["A-C"] = "3";
   myNumbers["A-D"] = "4";
   myNumbers["A-E"] = "5";
//...
   myNumbers["A-Z"] = "26";
   gridValues = myNumbers[gridValues];
   $('#mainNumberAnswerTxt').show();

}
else{
   $('#mainNumberAnswerTxt').hide();
}

        $('#mainTextarea').val(questionText); 
        $('#mainTxtWeight').val(textWeight);
        $('#mainNumberAnswerTxt').val(numberAnswer);
        $('#mainGridTxt').val(gridValues);
        } else { 
            $(plusbutton_clicked).closest('tr').find('input.numberAnswerTxtRow').val(numberAnswer);

$(plusbutton_clicked).closest('tr').find('input.gridTxtRow').val(gridValues);

    var lastchar = gridValues.charCodeAt(gridValues.length-1); // getting the last charcode i.e. "A-D" -> "D" -> 68
   $(".ansBtns").removeClass("answerBtnsOn").addClass("answerBtnsOff"); // reset all the buttons to off *I think this works* 
    // 65 is the code for "A" Iterating each choice and activating it:
    for (i=65;i<=lastchar;i++)
    $("#answer"+String.charCodeAt(i)).addClass("answerBtnsOn");    
        $.modal.close(); 
        return false;
    } 
```

# javascript - Javascript for...in 有时会通过不存在的属性

> ID：11353415
> 
> 赞同：1
> 
> 时间：2012-07-05T22:31:01.913
> 
> 标签：javascript

有时当我调用此对象的方法时，我收到“糟糕”错误，因为“i”指的是不存在的属性。怎么可能？

```
m.derp();
m.herp(); // Sometimes throws error 
```

方法：

```
this.movements = new Array();
this.herp = function() {
    for (var i in this.movements) {
        if (!(this.movements[i] instanceof Movement)) {
            throw new Error("Oops"); // this.movements[i] is undefined
        }
    }
}
this.derp = function() {
    var newArray = new Array();
    for (var i in this.movements) {
        if (!this.movements[i].isFinished()) {
            newArray.push(this.movements[i]);
        }
    }
    this.movements = newArray;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:34:50.933

对于数组，您不应该使用`for-in`. 它是一个通用枚举器，包括所有可枚举属性，包括通过原型继承的属性。

你应该做这个...

```
for (var i = 0; i < this.movements.length; i++) { 
```

`Array.prototype`添加到或`Object.prototype`将在使用时遇到的任何属性`for-in`。

如果您只想要数字索引，那么该`for`语句就是要使用的正确语句。*...除非在某些狭窄的情况下，如下面的 TJ Crowder 所述。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:35:13.740

通常，您不应该将`for-in`其用于数组 - 该构造更多地用于对象。使用传统`for`循环：

```
for (var i=0, len=this.movements.length; i<len; i++) //do stuff... 
```

有关为什么会这样的更多信息，请参阅[此问题](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:35:56.583

你不应该使用 for in 来迭代一个数组，因为实际上你正在迭代一个数组对象的每个属性，还有那些被继承的（我不确定是否有）。使用简单的循环：

```
for(var i = 0; i < arr.length; i++){

} 
```

# python - Python 2.6 聊天循环问题。不能同时接收和发送

> ID：11353419
> 
> 赞同：1
> 
> 时间：2012-07-05T22:31:18.933
> 
> 标签：python, linux, sockets, loops, chat

我试图制作一个控制台聊天程序，但我的循环有问题。我无法同时获得输入并接收其他人的输入。如果从一端发送了两条或更多条消息，则另一端在发送一条消息之前无法接收下一条消息。我对 python 相当陌生，并且正在寻找正确的方向。我想到了多线程，但这有点超出我的掌握。还有其他想法吗？

```
import EncMod
from socket import *

#Get User Info
Ip = raw_input('IP>>>')
Port = int(raw_input('Port>>>'))
User = raw_input('Username>>>')

#Open Socket To Server
EncCon = socket(AF_INET, SOCK_STREAM)
EncCon.connect((Ip, Port))

print '\nStarting Chat....'
print '\n<-------------------------------------------->\n\n'

#Send/Receive Loop
while 1:
   MsgOut = raw_input()
   if MsgOut: EncCon.send(MsgOut)

   MsgIn = EncCon.recv(1024)
   if MsgIn: print MsgIn

EncCon.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T02:22:49.500

问题是您的 recv() 调用会阻塞，直到收到一些数据，并且当 recv() 阻塞时，您的程序不会检查是否有来自标准输入的任何输入。传统的单线程解决方案是将套接字设置为非阻塞 I/O（通过 EncCon.setblocking(False)），然后将程序块放在 select() 中。将 EncCon 和 stdin 都传递给 select() （作为其 read-socket-set 参数的一部分），这样只要它们中的任何一个有一些数据要给你，select() 就会返回。（请注意，此方法在 Windows 下不起作用，因为 Windows 不允许 select() 阻塞 stdin :P ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:35:21.420

线程并不像您想象的那么难，掌握它是您工具箱的宝贵补充。

只需创建一个作为 Thread 子类的类并确保它具有 run() 方法。然后实例化该类并调用它的 start() 方法。

使线程停止更难正确处理。最好设置一个标志并确保在您的 while 循环中定期检查它，因此您需要阻塞 recv() 的超时时间，例如 1 秒。

```
from socket import *
from threading import Thread

#Get User Info
Ip = raw_input('IP>>>')
Port = int(raw_input('Port>>>'))
User = raw_input('Username>>>')

#Open Socket To Server
EncCon = socket(AF_INET, SOCK_STREAM)
EncCon.connect((Ip, Port))

print '\nStarting Chat....'
print '\n<-------------------------------------------->\n\n'

class ReceiveThread(Thread):

    def __init__(self, sock):
        Thread.__init__(self)
        self.sock = sock
        self.shouldstop = False

    def run(self):
        self.sock.settimeout(1)
        while not self.shouldstop:
            try:
                data = self.sock.read()
                print data
            except socket.timeout:
                continue

    def stop(self):
        self.shouldstop = True

# start receive loop:
r = ReceiveThread(EncCon).start()

#Send Loop
while 1:
    MsgOut = raw_input()
    if MsgOut: EncCon.send(MsgOut)

    if MsgOut == '.':
        r.stop()
        r.join()

EncCon.close() 
```

现在，这个程序仍然存在无法启动两个实例的原始问题，因为您不听，而是立即连接。但是，我相信，这不是你问题的主要部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:39:52.780

[Twisted 框架](http://twistedmatrix.com/trac/)可用于帮助完成此任务。下面的代码会启动一个聊天服务器，然后客户端可以连接到该服务器并根据服务器实例设置来回通信。您可以进行适当的修改以满足您的要求：

```
from twisted.internet.protocol import Factory
from twisted.protocols.basic import LineReceiver
from twisted.internet import reactor

class Chat(LineReceiver):

    def __init__(self, users):
        self.users = users
        self.name = None
        self.state = "GETNAME"

    def connectionMade(self):
        self.sendLine("What's your name?")

    def connectionLost(self, reason):
        if self.users.has_key(self.name):
            del self.users[self.name]

    def lineReceived(self, line):
        if self.state == "GETNAME":
            self.handle_GETNAME(line)
        else:
            self.handle_CHAT(line)

    def handle_GETNAME(self, name):
        if self.users.has_key(name):
            self.sendLine("Name taken, please choose another.")
            return
        self.sendLine("Welcome, %s!" % (name,))
        self.name = name
        self.users[name] = self
        self.state = "CHAT"

    def handle_CHAT(self, message):
        message = "<%s> %s" % (self.name, message)
        for name, protocol in self.users.iteritems():
            if ':' in message:
                self.exc(message.split(':')[0])
            if protocol != self:
                protocol.sendLine(message)

    def exc(self, cmd):
        print cmd
        if cmd == 'who':
            for i in self.users:
                print i

class ChatFactory(Factory):

    def __init__(self):
        self.users = {} # maps user names to Chat instances

    def buildProtocol(self, addr):
        return Chat(self.users)

reactor.listenTCP(8123, ChatFactory())
reactor.run() 
```

# c# - 使用远程处理和 Windows 服务执行 C# 应用程序

> ID：11353421
> 
> 赞同：1
> 
> 时间：2012-07-05T22:31:32.260
> 
> 标签：c#, windows-services, remoting

我正在尝试通过使用远程处理和 Windows 服务来启动应用程序（在本例中为记事本）。为了测试，我试图让记事本运行。虽然我似乎建立了连接（在任务管理器的进程下，记事本正在运行），但我没有看到窗口出现。我有一个客户端，用于通过在文本框中键入并单击按钮来发送要运行的命令，并且该服务应该能够接收该命令。我的代码有 3 个部分：

我的新服务：

```
namespace MyNewService
{
    public partial class MyNewService : ServiceBase
    {
        bool serviceOn = false;
        string command = String.Empty;

        HttpChannel ch = new HttpChannel(4002);

        public MyNewService()
        {
            InitializeComponent();

        }

        protected override void OnStart(string[] args)
        {
            ChannelServices.RegisterChannel(ch);
            RemotingConfiguration.RegisterWellKnownServiceType(typeof(Service.Test), "ServiceURI", WellKnownObjectMode.Singleton);
        }
    }
} 
```

服务：

```
namespace Service
{
    public class Test:MarshalByRefObject
    {

        public Test()
        {

        }
        public void runCommand(string command)
        {
            Process myProcess = new Process();
            myProcess.StartInfo.FileName = command;
            myProcess.Start();
        }
    }
} 
```

客户

```
namespace Client
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        Test t;
        string command;

        private void Form1_Load(object sender, EventArgs e)
        {
            System.Runtime.Remoting.RemotingConfiguration.RegisterWellKnownClientType(typeof(Test), "http://remoteComp:4002/ServiceURI");
            t = new Test();
        }

        private void button3_Click(object sender, EventArgs e)
        {
            command = textBox1.Text;
            t.runCommand(command);
        }
    }
} 
```

我编写了一个控制台应用程序来代替 Windows 服务，以测试是否显示了窗口，并且确实显示了该窗口。但是使用 Windows 服务，该进程仅在后台运行。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:44:50.243

Windows 服务不应与用户进行交互。请参阅 Daniel Brückner 对这篇[文章](https://stackoverflow.com/questions/784156/visual-feedback-from-c-sharp-service)的回复。无论如何，丹尼尔提供了 2 个链接，但文章本身强烈建议避免使用这些技术。

# javascript - 单击链接后强制浏览器将文件另存为

> ID：11353425
> 
> 赞同：54
> 
> 时间：2012-07-05T22:32:09.020
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [是否可以仅使用 JavaScript（客户端方法）在浏览器中为已识别的 MIME 类型启动下载提示？](https://stackoverflow.com/questions/7763505/force-file-download-of-recognized-mime-types-using-only-javascript-almost-figur)

有没有办法强制使用 JavaScript 例程的浏览器在单击链接后将文件另存为（“另存为”）？我需要默认情况下直接下载图像，而不是由浏览器呈现。

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-07-05T22:34:41.823

您可以像这样使用 HTML5 下载属性：

```
<a href="path/to/file" download>Click here to download</a> 
```

无论文件类型如何，这都会打开一个“另存为”对话框，而不会让您离开页面。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-05T22:40:08.707

如果您控制服务器，那么您应该设置它为您希望下载的文件发送一个 Content-Disposition: 附件标头（例如，您可以在 .htaccess 文件中执行此操作以在特定目录中生成所有 .jpeg） .

# android - android平板电脑开机时是否可以自动启动Phonegap应用程序？

> ID：11353426
> 
> 赞同：3
> 
> 时间：2012-07-05T22:32:31.370
> 
> 标签：android, cordova

我们正在向几个客户提供 android 平板电脑以展示我们构建的一些应用程序，并且我们希望创建另一个应用程序，以便在设备通电时自动启动（并且可能仅在第一次通电时）以传达我们安装了这些其他应用程序的一些图形和文本，他们应该检查一下。我可以使用 PhoneGap 来做到这一点，还是必须创建一个基于 Java 的 Android 应用程序？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T15:35:01.403

实际上是可以做到的，这个线程 [如何在启动时启动应用程序？](https://stackoverflow.com/a/6392009/1854553). 当您使用 phonegap时，Java 代码必须作为[自定义 phonegap 插件。](http://cordova.apache.org/docs/en/2.7.0/guide_plugin-development_android_index.md.html#Developing%20a%20Plugin%20on%20Android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T11:34:31.750

是的，您可以使用[Autostart 插件](https://github.com/ToniKorin/cordova-plugin-autostart)（也与 PhoneGap Build 兼容）来做到这一点。

# java - 在 Spring MVC 中从控制器调用 Jsp 页面

> ID：11353435
> 
> 赞同：4
> 
> 时间：2012-07-05T22:33:53.550
> 
> 标签：java, spring-mvc

我是 Spring MVC 的新手。我有一个捕捉异常的控制器，在捕捉到异常后我想重定向到error.jsp页面并显示异常消息（ex.getMessage（））。我不想使用 Spring 的异常处理程序，而是必须以编程方式重定向到 error.jsp。

```
@RequestMapping(value = "http/exception", method = RequestMethod.GET)
public String exception2()
{
    try{
        generateException();
    }catch(IndexOutOfBoundsException e){
        handleException();
    }
    return "";
}

private void generateException(){
    throw new IndexOutOfBoundsException();      
}

private void handleException(){

    // what should go here to redirect the page to error.jsp
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T23:15:43.420

我不确定你为什么`String`要从你的方法中返回；Spring MVC 中的标准是使用注释的方法`@RequestMapping`返回 a `ModelAndView`，即使您没有使用 Spring 的异常处理程序。据我所知，您不能在不返回`ModelAndView`某个地方的情况下将您的客户端发送到 error.jsp。如果您需要帮助理解 Spring 控制器的基本概念，我发现[本教程](http://viralpatel.net/blogs/spring-3-mvc-create-hello-world-application-spring-3-mvc/)展示了如何在 Spring MVC 中创建一个简单的“Hello World”应用程序，并且它有一个简单的 Spring 控制器的很好的示例。

如果您希望您的方法在遇到异常时返回错误页面，否则返回正常页面，我会这样做：

```
@RequestMapping(value = "http/exception", method = RequestMethod.GET)
public ModelAndView exception2()
{
    ModelAndView modelAndview;
    try {
        generateException();
        modelAndView = new ModelAndView("success.jsp");
    } catch(IndexOutOfBoundsException e) {
        modelAndView = handleException();
    }
    return modelAndView;
}

private void generateException(){
    throw new IndexOutOfBoundsException();      
}

private ModelAndView handleException(){
     return new ModelAndView("error.jsp");
} 
```

# c# - 如何在 ASP.NET 中创建文档云

> ID：11353437
> 
> 赞同：0
> 
> 时间：2012-07-05T22:34:10.620
> 
> 标签：c#, asp.net, cloud, webdav

我正在尝试在 ASP.NET C# 中创建文档云。

我的用户将他们的文档扫描并上传到我的网页，在那里我们对其进行 OCR 并将其转换为 DOC..

DOCS 显示在 Gridview 中，他们可以单击以下载。我希望他们能够单击文档并在 Word 中打开它，然后在 Word 中，他们应该能够单击 SAVE 并保存回网页.. 我注意到 Hotmail 在他们的 SkyDrive 上执行此操作（仅适用于 IE，不适用于 FireFox）。Sharepoint 也这样做。

我认为他们都使用 WebDav，但我不必更改我的整个程序以包含 WebDav，这样我就可以支持这个..

我已经运行了一个小测试，我允许对网页进行完全读/写访问，并下载了文档（即[http://www.myserver.com/test.doc](http://www.myserver.com/test.doc)） Word 会打开它，但会以只读方式打开它, 所以他们不能点击 Save.. 但是如果他们点击 Save-As 他们仍然可以将它保存回 HTTP..

有可能吗？也可以在 FireFox/chrome 中完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:57:28.417

Internet Explorer 有一个集成的 ActiveX 控件，允许它编组对关联应用程序的调用。[文档通过DOCICON.XML](http://msdn.microsoft.com/en-us/library/ms463701.aspx)文件与特定应用程序相关联。Firefox 不包含此 ActiveX 控件。这就是为什么你要实现的目标在我看来是不可能的。

**更新**：我找到[了这个](http://www.qa.downappz.com/questions/save-word-document-on-server-via-webdav-on-server-2008-and-iis-7-error-read-only.html)。

> 在身份验证方法中，我需要为我的虚拟文件夹启用集成 Windows 和基本身份验证。（我只启用了基本身份验证）
> 
> 然后该文档不是只读的，我可以保存在服务器上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T21:26:25.160

如果您可以选择，一个快速的解决方法是保留 Web 界面，但共享文档在网络上的存储位置。然后你可以改变你的gridview中的链接指向网络共享而不是http地址，即`\\fileserver\ocrout\file.docx`而不是`http://myiisserver/ocrout/file.docx`.

根据您的设置，这可能对您不起作用，但如果可以的话，它确实让生活更轻松。

如果权限是一个问题，请不要担心。让您的服务帐户完全控制所涉及的 NTFS 文件夹，您可以通过 Web 界面通过编写一点 C# 代码来管理文件夹的权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T18:32:37.143

奇怪的想法，但是你可以让客户端在 wpf 或 silverlight 中，然后当他们选择它下载的文件，保存到本地存储打开 word 等，监控更改并将文件排队等待上传？我想这会把你绑在 IE 上。或其他一些本地助手应用程序或服务的类似方法？

# ldap - PHP ldap_search() 和 CLI ldapsearch 返回不同的结果

> ID：11353438
> 
> 赞同：1
> 
> 时间：2012-07-05T22:34:11.120
> 
> 标签：ldap, ldap-query

在命令行上运行 ldapsearch 命令时，它会返回大量结果，而通过 PHP 进行的等效（或者我认为）查询什么也不返回。

ldapsearch 命令：

```
ldapsearch -Zx -H ldap://directory.host.ca -D [CREDENTIALS] -w [PASSWORD] -z 0 -l 0 - LLL -b "ou=people,dc=business,dc=ca" "(&(facultyCode=AU)(term="1380")" uid 
```

PHP 搜索：

```
//binding has already happened with the same credentials as used in the CLI command
$filter = '(&(facultyCode=AU)(term="1380"))';
$list   = ldap_search($conn,'ou=people,dc=business,dc=ca',$filter,array('uid'),0,0,0); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T09:34:42.347

检查服务器日志以确定搜索请求中传输的内容。这两个示例中的过滤器可能不等效。例如，PHP 可能会将`"`字符转换为`'`（单引号到双引号）。在编码过滤器内部，`'`并且`"`不等效。

此外，使用的 shell 示例`ldapsearch`不会编码`term="1380"`，而是`term=1380`，这与`term="1380"`. 换句话说，ldapsearch 命令是（一些 shell 可能以不同的方式转义引用的字符串）：

```
ldapsearch -Zx -H ldap://directory.host.ca \
   -D [CREDENTIALS] -w [PASSWORD] -z 0 -l 0 \
   -LLL -b "ou=people,dc=business,dc=ca" \
   '(&(facultyCode=AU)(term=1380)' uid 
```

# android - 从 AsyncTask 中的 onPostExecute 更新 textview

> ID：11353442
> 
> 赞同：0
> 
> 时间：2012-07-05T22:34:43.830
> 
> 标签：android

我有一个文本视图，我想在每次异步任务完成时更新它。

但从我目前阅读的内容来看，只有在`onPostExecute`你之前使用`setContentView()`过才能完成。但是由于我不知道任务完成时用户当前处于哪个视图，所以这对我来说听起来不是一个好的解决方案。即使我可以获得当前视图，也不会`setContentView()`重绘视图吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:42:54.360

我认为`AsyncTask`当当前用户界面需要由任务更新时，这是一个很好的选择。就您而言，我可能会尝试看看 a 是否`Service`是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:47:43.727

据我所知，并且总是使用 AsyncTask 执行繁重的任务，而不会阻塞主 UI 线程。表示用户在需要完成耗时的工作时操作一些活动。AsyncTask 完成这项工作并将结果反映在 UI 上。用户高兴。如果您不知道用户在哪里，那么 AsyncTask 可能不是正确的解决方案，您需要一个服务。它会完成工作并发送一个通知，表明某事已准备就绪。Tappi9ng 通知将使用一些数据打开活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:49:46.337

要从工作线程修改 UI 线程，必须使用 Handler 或方法 runOnUiThread(Runnable runnable)。

# c# - 如何按字符拆分中文字符串？

> ID：11353444
> 
> 赞同：3
> 
> 时间：2012-07-05T22:34:44.703
> 
> 标签：c#, string

我有一个主要包含中文字符的字符串，如下所示：

```
string sentence = "我想找到从夏洛特飞往拉斯维加斯，让站在圣路易斯"; 
```

如何按字符拆分句子？最终，我希望能够获取我的字符串，并将其写入一个文件，每个字符都在自己的行上，如下所示：

```
我
想
找
到
从
夏
洛
特
飞
往
拉
斯
维
加
斯
，
让
站
在
圣
路
易
斯 
```

我试过这样做：

```
StringBuilder s = new StringBuilder();
foreach (char character in sentence.ToCharArray())
{
    s.Append(character + '\n');
}
string output = s.ToString();

StreamWriter writer = new StreamWriter("test.txt", false, Encoding.UTF8);
writer.Write(output);
writer.Close(); 
```

...但无论出于何种原因，它不是写汉字，而是写

```
 29252242105020184228092794129315391442445825299260413251021162260416530235763314592232222317363452614126041 
```

...改为文件。然而，做

```
StreamWriter writer = new StreamWriter("text.txt", false, Encoding.UTF8);
writer.Write(sentence);
writer.Close(); 
```

...确实成功地将中文句子写入文件，所以我知道我写入文件的方式应该不是问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T22:39:50.220

我认为问题可能是 (character + '\n'); 被解释为整数。也许尝试向该行添加强制转换或像这样进行两个单独的附加：

```
s.Append(character);
s.Append('\n'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:59:08.180

```
 var sentence = "我想找到从夏洛特飞往拉斯维加斯，让站在圣路易斯";
        var chars = sentence.ToCharArray();

        using (var writer = new StreamWriter("test.txt", false, Encoding.UTF8))
        {
            foreach (var c in chars)
            {
                writer.WriteLine(c);
            }

            writer.Close();
        } 
```

对我来说很好

# python - 将 Twilio 短信正文转换为字符串 - @ 符号的编码错误

> ID：11353449
> 
> 赞同：2
> 
> 时间：2012-07-05T22:35:20.177
> 
> 标签：python, google-app-engine, python-2.7, twilio

我正在使用 Twilio 通过短信向我的 python webapp 发送电子邮件地址。但是，当我尝试转换包含电子邮件地址的短信正文时，我得到了一个例外。

```
<type 'exceptions.UnicodeEncodeError'>, UnicodeEncodeError('ascii', u'myemail\xa1gmail.com', 13, 14, 'ordinal not in range(128)'), <traceback object at 0x10cca5f8>)
Traceback (most recent call last):
  File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 570, in dispatch
    return method(*args, **kwargs)
  File "/base/data/home/apps/s~tester-sandbox/1.360113171877023968/website/sms.py", line 22, in post
    from_body = str(cgi.escape(self.request.get('Body', None))).strip()
UnicodeEncodeError: 'ascii' codec can't encode character u'\xa1' in position 13: ordinal not in range(128) 
```

我知道这是一个编码错误，在电子邮件地址中的 @ 字符上绊倒了。在谷歌搜索这个问题后，我发现了一个建议

```
sys.setdefaultencoding( "latin-1" ) 
```

但这只是用 � 符号替换了 @.... 克服这个问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T09:38:43.297

我联系了 Twilio 以了解这一点，结果证明这不是 python 问题。当用户发送他们的电子邮件地址（通过短信）时，它会发送一个 ¡ 字符（而不是 @），不幸的是它不是 ascii - 因此是例外。

来自 Twilio：

> 某些运营商尚未进行修复以允许在通过其网络发送的 SMS 消息中保留正确的格式，因此您会看到某些运营商处理的 SMS 中的 @ 符号损坏。
> 
> 一种可能的解决方法是在您的 Twilio 帐户上启用 unicode 字符编码。这样做的一个潜在缺点是您只能发送长度为 70 个字符或更少的 SMS 消息

# forms - 如何使用来自用户表单的响应格式化 Excel 中的文本框？

> ID：11353450
> 
> 赞同：0
> 
> 时间：2012-07-05T22:35:37.713
> 
> 标签：forms, excel, vba, textbox, format

我是 Excel 新手，正在尝试创建一个用户表单，用户将在其中输入一些简单问题的答案。根据给出的答案，我想格式化电子表格中常规文本框的颜色。我需要使用某种类型的功能吗？任何人都可以提供示例代码行来尝试使用吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T03:24:47.650

尝试使用**录制宏**。

![在此处输入图像描述](../Images/76f2aaa6a8d11a797352485501c28353.png)

它将创建一个新模块，您可以从那里复制/粘贴。

# javascript - bone.js 上的无限滚动/分页不起作用

> ID：11353454
> 
> 赞同：2
> 
> 时间：2012-07-05T22:36:11.457
> 
> 标签：javascript, jquery, ajax, backbone.js, underscore.js

我正在尝试使用 Backbone.js 的[分页插件](https://github.com/addyosmani/backbone.paginator)来创建一个无限滚动功能，就像在 Twitter 中一样，单击按钮/链接`#pagination a`将从后端加载下一页结果并将其附加到当前视图`PhotoListView`。

**问题：**我正在尝试在此处遵循插件的示例并[在](https://github.com/addyosmani/backbone.paginator/tree/master/examples/netflix-infinite-paging)[此处](http://addyosmani.github.com/backbone.paginator/examples/netflix-infinite-paging/index.html)获取源代码。到目前为止，我设法通过单击链接从后端获取 JSON 数据。`data``#pagination a`

当单击视图中的按钮时，如何利用backbone.js 的模型视图绑定将新视图附加`photoListItemView`到视图中？`photoListView``#pagination a``PaginationView`

我认为当调用in`this.collection.requestNextPage()`方法时，新检索到的模型将被添加到将触发事件触发器的集合中，从而导致新检索到的模型被追加？`appendRender``paginationView``photoCollection``photoListView``this.collection.bind('change', this.render, this);`

**意见**

```
PhotoListView = Backbone.View.extend({
    el: '#photo_list',

    initialize: function() {
        this.collection.bind('change', this.render, this);
        this.collection.bind('add', function() {
            console.log('added to collection');
        }, this);
    },

    render: function() {
        //$(this.el).html('');
        this.collection.each(function(photo, index) {
            if(index % 7 < 3) {
                $(this.el).append(new PhotoListItemView({ model: photo }).render().el);
            } else {
                $(this.el).append(new PhotoListQuadItemView({ model: photo }).render().el);
            }
            console.log('render');
        }, this);
        return this;
    }
});

PhotoListItemView = Backbone.View.extend({
    tagNAme: 'div',
    className: 'photo_box',

    template: _.template( $('#tpl_PhotoListItemView').html() ),

    initialize: function() {
        this.model.bind('destroy', this.close, this);
    },

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
            console.log('render item');
        return this;
    },

    close: function() {
        this.unbind();
        this.remove();
    }
});

PhotoListQuadItemView = Backbone.View.extend({
    tagNAme: 'div',
    className: 'photo_box',

    template: _.template( $('#tpl_PhotoListQuadItemView').html() ),

    initialize: function() {
        this.model.bind('destroy', this.close, this);
    },

    render: function() {
        $(this.el).html( this.template( this.model.toJSON() ) );
        return this;
    },

    close: function() {
        this.unbind();
        this.remove();
    }
});

PaginationView = Backbone.View.extend({
    el: $('#pagination'),

    events: {
        'click #pagination a': 'appendRender'
    },

    initialize: function() {
        this.render();
    },

    template: _.template( $('#tpl_pagination').html() ),

    render: function() {
        $(this.el).html( this.template() );
    },

    appendRender: function() {
        this.collection.requestNextPage()
            .done(function(data, textStatus, jqXHR) {
                // HOW DO I APPEND THE NEW DATA VIEWS?
        });
    }
}); 
```

**收藏**

```
PhotoCollection = Backbone.Paginator.requestPager.extend({
    model: Photo,

    paginator_core: {
            dataType: 'json',
            url: 'http://www.domain.com/explore/all?'
        },

    paginator_ui: {
        firstPage: 1,
        currentPage: 1,
        perPage: 7,
        totalPages: 10
    },

    server_api: {
        '$page': function() { return this.currentPage; }
    },

    parse: function (response) {
        return response;
    }

}); 
```

**路由器**

```
var AppRouter = Backbone.Router.extend({
    routes: {
        '': 'explore'
    },

    initialize: function() {

    },

    explore: function() {
        console.log('explore!');
        this.photoList = new PhotoCollection();
        this.paginationView = new PaginationView({ collection: this.photoList });
        var self = this;
        this.photoList.fetch({
            success: function() {
                self.photoListView = new PhotoListView({ collection: self.photoList });
                self.photoListView.render();

            }
        });
    }

});

var app = new AppRouter();
Backbone.history.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T02:57:14.353

正如基肖尔所说。绑定到`reset`事件，它现在可以工作了。

# node.js - Heroku 服务器上未调用 Http 服务器升级事件

> ID：11353456
> 
> 赞同：0
> 
> 时间：2012-07-05T22:36:22.097
> 
> 标签：node.js, heroku

为什么 Heroku 服务器上没有调用“升级”事件？

```
var server = new http.Server();

server.on('upgrade', function(req, socket, upgradeHead) {
    // ...
}); 
```

相反，正在调用“请求”事件。

我在本地机器上运行相同的脚本，并且通过 websocket 请求调用升级事件。

是禁止的吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:37:45.190

Heroku 尚不支持 WebSocket。请参阅：[在 Heroku 上将 Socket.IO 与 Node.js 结合使用](https://devcenter.heroku.com/articles/using-socket-io-with-node-js-on-heroku/)。

# c - K&R 1.6 数组示例不打印

> ID：11353459
> 
> 赞同：0
> 
> 时间：2012-07-05T22:36:55.353
> 
> 标签：c

我最近购买了 The C 编程语言，并且一直在慢慢地阅读文本，以确保我理解了所有内容。我遇到了这个数组示例（第 1.6 章），由于 Stack Overflow 上已经回答了许多问题，我完全理解了这个示例。

问题是当我运行程序时，什么都没有打印出来。这本书有一个习惯，有时让人觉得不聪明，所以如果这是一个菜鸟问题，我提前道歉。我向你保证，我已经寻找了很长一段时间的答案。

这是文本中的代码。我正在使用 XCode 4：

```
#include <stdio.h>
/* count digits, white space, others */
main()
{
    int c, i, nwhite, nother;
    int ndigit[10];
    nwhite = nother = 0;

    for (i = 0; i < 10; ++i)
        ndigit[i] = 0;

    while ((c = getchar()) != EOF)
        if (c >= '0' && c <= '9')
            ++ndigit[c-'0'];
        else if (c == ' ' || c == '\n' || c == '\t')
            ++nwhite;
        else
            ++nother;

    printf("digits =");

    for (i = 0; i < 10; ++i)
        printf(" %d", ndigit[i]);

    printf(", white space = %d, other = %d\n", nwhite, nother);
} 
```

为什么不运行？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:46:18.743

这一行：

```
 while ((c = getchar()) != EOF) 
```

确保您的`while`循环继续，直到`getchar()`读取导致条件为假所需的字符。因此，在您向终端输入`EOF`字符之前，它将继续进行 - 为此，您需要使用组合键`Ctrl`+ `D`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T22:47:19.590

我没有发现您的版本与本书的版本之间存在任何差异——我认为问题可能在于您*运行*程序的方式。

`getchar()`*从标准输入*中读取一个字符。这可以是终端设备、通往另一个程序的管道，甚至是网络套接字（很少见）。

当你运行这个程序时，它可能会一直呆在那里，直到你键入一些字符*然后终止输入*——如果你在新行上键入一个 Control+D 字符，大多数终端都会这样做。

更简单的方法是通过一种易于重现的机制为程序提供一些输入——文件中的管道或内容通过`echo`：

```
./a.out < /etc/passwd
echo "hello world" | ./a.out 
```

您可以使用任何程序代替`echo`- 您也可以使用`ls(1)`：

```
ls | ./a.out 
```

遗憾的是，K&R 这本书在很多方面都很出色，但它大多忽略了开发和执行环境——C 旨在用于如此庞大的机器阵列，以至于规范不包括分层目录结构，举一个简单的例子。

# sql - 转换我的内部连接 sql 语句 EXISTS

> ID：11353461
> 
> 赞同：0
> 
> 时间：2012-07-05T22:37:34.060
> 
> 标签：sql

我认为以下陈述会产生相同的结果……但事实并非如此。包含“exists”语句的第一个代码似乎并没有通过“QuizID”列限制所选值，我认为它应该......作为旁注，该列仅存在于“quizQuestions”中，但不存在于“quizAnswers”中

```
SELECT qa.QuestionNumber 
FROM QuizAnswers qa 
where exists (SELECT * 
              FROM QuizQuestions 
              WHERE QUIZID = 6) 
```

```
SELECT qa.QuestionNumber 
FROM QuizAnswers qa 
   INNER JOIN QuizQuestions IQQ 
      ON qa.QuestionNumber = IQQ.QuestionNumber
WHERE QUIZID = 6 
```

包含“内部连接”的语句包含我想要的结果集。为了获得相同的结果，我需要在 Exists 语句中包含什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:39:10.313

您的查询所做的是在表中存在具有of`EXISTS`的行时选择所有问题编号。如果有一行，它将选择所有问题编号，否则将选择无。您需要做的是使其与外部查询***相关联***，以便它依赖于每个...`QuizQuestions``QUIZID``6`*`QuestionNmber`*

 *您需要将`AND QuestionNumber = qa.QuestionNumber`其作为第二个条件放入其中`EXISTS`以使其成为相关子查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:42:54.650

这个查询

```
SELECT qa.QuestionNumber FROM QuizAnswers qa where exists ( SELECT * FROM QuizQuestions WHERE QUIZID = 6) 
```

相当于这个

```
SELECT qa.QuestionNumber FROM QuizAnswers qa 
```

如果 QuizQuestions 中有 QuizID = 6 的任何内容。请参阅 Zane 的答案以获得解决方案，具体取决于您的 SQL 实现，无论如何，使用 INNER JOIN 版本通常是一个更好的主意。*

# php - Facebook PHP api：“没有设置网址”-随机

> ID：11353463
> 
> 赞同：17
> 
> 时间：2012-07-05T22:37:47.620
> 
> 标签：php, facebook, api, sdk

**我在随机**场合收到此错误：

```
Fatal error: Uncaught CurlException: 3: No URL set!
thrown in /****/****/***/****/facebook/facebook-client/base_facebook.php on line 905 
```

我正在使用来自 GIT 存储库的最新 php sdk（今天下载！）。发生这种情况时，用户已经登录 facebook。

这种行为是在两周前突然开始的。

有什么问题？

更新：当我删除与域关联的所有 cookie 时，问题就解决了。我认为这与未正确检测到 fbm_xxxxxxx 和 fbsr_xxxxxxxx cookie 有关。但是它仍然可以在“随机”场合返回，迫使我清除与该域关联的所有 cookie。

更新：错误发生在这段代码上：

```
try {
   $user_profile = $facebook->api('/me');
 } catch (FacebookApiException $e) {
    error_log($e);
    $isfb = null;
    setcookie('fbm_'.$facebook->getAppId(), '', time()-100, '/', '.mydomain.com');
 } 
```

最终在 base_facebook.php 中调用此函数：

```
protected function makeRequest($url, $params, $ch=null) {
    if (!$ch) {
      $ch = curl_init();
    }

    $opts = self::$CURL_OPTS;
    if ($this->getFileUploadSupport()) {
      $opts[CURLOPT_POSTFIELDS] = $params;
    } else {
      $opts[CURLOPT_POSTFIELDS] = http_build_query($params, null, '&');
    }
    $opts[CURLOPT_URL] = $url;

    // disable the 'Expect: 100-continue' behaviour. This causes CURL to wait
    // for 2 seconds if the server does not support this header.
    if (isset($opts[CURLOPT_HTTPHEADER])) {
      $existing_headers = $opts[CURLOPT_HTTPHEADER];
      $existing_headers[] = 'Expect:';
      $opts[CURLOPT_HTTPHEADER] = $existing_headers;
    } else {
      $opts[CURLOPT_HTTPHEADER] = array('Expect:');
    }

    curl_setopt_array($ch, $opts);
    $result = curl_exec($ch);

    if (curl_errno($ch) == 60) { // CURLE_SSL_CACERT
      self::errorLog('Invalid or no certificate authority found, '.
                     'using bundled information');
      curl_setopt($ch, CURLOPT_CAINFO,
                  dirname(__FILE__) . '/fb_ca_chain_bundle.crt');
      $result = curl_exec($ch);
    }

    // With dual stacked DNS responses, it's possible for a server to
    // have IPv6 enabled but not have IPv6 connectivity.  If this is
    // the case, curl will try IPv4 first and if that fails, then it will
    // fall back to IPv6 and the error EHOSTUNREACH is returned by the
    // operating system.
    if ($result === false && empty($opts[CURLOPT_IPRESOLVE])) {
        $matches = array();
        $regex = '/Failed to connect to ([^:].*): Network is unreachable/';
        if (preg_match($regex, curl_error($ch), $matches)) {
          if (strlen(@inet_pton($matches[1])) === 16) {
            self::errorLog('Invalid IPv6 configuration on server, '.
                           'Please disable or get native IPv6 on your server.');
            self::$CURL_OPTS[CURLOPT_IPRESOLVE] = CURL_IPRESOLVE_V4;
            curl_setopt($ch, CURLOPT_IPRESOLVE, CURL_IPRESOLVE_V4);
            $result = curl_exec($ch);
          }
        }
    }

    if ($result === false) {
      $e = new FacebookApiException(array(
        'error_code' => curl_errno($ch),
        'error' => array(
        'message' => curl_error($ch)."\n".$opts[CURLOPT_POSTFIELDS]."<br/>".$opts[CURLOPT_URL]."\n",
        'type' => 'CurlException',
        ),
      ));
      curl_close($ch);
      throw $e;
    }
    curl_close($ch);
    return $result;
  } 
```

当我回显`$opts[CURLOPT_POSTFIELDS]`and`$opts[CURLOPT_URL]`时，postfields 和 URL 都设置正确。有可能是服务器问题吗？

更新：如果我等待一段时间（随机）并刷新页面，一切都很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-03T13:10:35.590

这与 IPv6 的问题有关。要解决此问题，您需要在 Facebook API 中包含以下行...

```
if(phpversion() >= 5.3) {
Facebook::$CURL_OPTS[CURLOPT_IPRESOLVE] = CURL_IPRESOLVE_V4;
}; 
```

请注意，此替代方案仅适用于 PHP 5.3 版本，因此您应确保在代码中包含版本检测。

（来自 Silvio Medice - [Facebook->api("/me") raises "CurlException: 3: No URL set!"](https://stackoverflow.com/questions/18693369/facebook-api-me-raises-curlexception-3-no-url-set)）

# windows - 如何避免 GUI 调整大小中的瞬时更新？

> ID：11353464
> 
> 赞同：1
> 
> 时间：2012-07-05T22:37:48.107
> 
> 标签：windows, winapi, layout, window-managers, window-resize

如果您半快速拖动窗口的顶部或左侧边框，您应该注意到窗口的另一边会振动——它被拖动，但随后会重新调整以增加大小。

当您有动态调整大小的项目时，问题会更严重 - 然后您的一堆控件开始在屏幕上滑动和调整大小，非常明显。

有什么办法可以防止这些瞬态影响？

例如，也许对消息的*特定*响应序列`WM_SIZE`可以抑制这种情况？我不知道。

（这似乎发生在我见过的每个框架中，甚至是普通的 Win32。只需打开资源管理器或其他东西并拖动其顶部或左侧边缘，您就会明白我的意思。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:55:24.627

响应`WM_WINDOWPOSCHANGING`消息并在结构的成员中设置`SWP_NOCOPYBITS`标志。`flags``WINDOWPOS`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-26T09:00:42.297

2018 年更新。SO 中经常提到的`WM_WINDOWPOSCHANGING`相关`WM_NCCALCSIZE`技巧在 XP/Vista/7 上运行良好，但对于 Win8/10 来说已经不够用了，因为 Aero 添加了一层新的调整大小问题，这些问题掩盖或恶化了旧问题。

Win8/10 问题更难解决，因为不需要的像素副本发生在 DWM.exe 中，DWM.exe 是另一个合成来自系统上所有应用程序的像素的进程。

请参阅此问答以了解正在发生的事情，一些`WM_NCCALCSIZE`用于解决 XP/Vista/7 层问题的示例代码（在 Win8/10 中仍然存在！），以及 8/10 的部分解决方案。

[如何在调整窗口大小时平滑难看的抖动/闪烁/跳跃，尤其是拖动左/上边框（Win 7-10；bg、bitblt 和 DWM）？](https://stackoverflow.com/questions/53000291/how-to-smooth-ugly-jitter-flicker-jumping-when-resizing-windows-especially-drag)

# python - 我不明白如何为每个教室搭建布景

> ID：11353473
> 
> 赞同：-4
> 
> 时间：2012-07-05T22:38:31.580
> 
> 标签：python

我这个功能的主要目的是检查教授是否同时教授两门课程。

```
def FacultyMemberOnneClass(self):
    for P in ProfessorList:
        for CL in ClassRoomList:
            for CO in CourseList:
                if CO.ProfessorId  == P.ProfessorId: 
                    Start = CO.StartTime() 
                    End = CO.EndTime() 
                    TimeRange = range(Start, End, .25) 
                    TimeRangeSet = Set(TimeRange) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:11:32.400

我有点不确定您的代码的上下文，但我认为您正在尝试创建一组 python 时间。

您应该好好看看[datetime](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CFcQFjAA&url=http://docs.python.org/library/datetime.html&ei=C3P2T_HcF6qtiQfDofzkBg&usg=AFQjCNGrx18FWluWVtjlxQl1y7-oUD_Dog "约会时间")数据类型。下面的代码假定您正在尝试创建一组类型 datetime.time 。我已经在 Python2.6 中对此进行了测试。

```
import datetime

start = datetime.datetime(2012,1,1,9,0) # 09:00 
end = datetime.datetime(2012,1,1,17) # 17:00
intervalSeconds = (end-start).seconds # seconds between start and end time.
intervalBlocks = intervalSeconds / (60*15) # 15 minute blocks between start and end time.

timeRange = [(start + datetime.timedelta(minutes=15*i)).time()
    for i in range(intervalBlocks+1)]
timeRangeSet = set(timeRange) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:56:16.133

目前尚不清楚您的输入数据是什么样的，因此我将做出一些假设。

首先，我将假设您每周有一组离散的教学时段 - 比如说，`['Monday 9am-10am', 'Monday 10am-11am', ...]`等等，并且每个课程表都包含这些教学时段的一个子集。

其次，我将假设每组时期恰好是一个完整的学期——没有部分学期——并且我们一次只考虑一个学期的课程。

第三，我将假设所有课程都是不同的——你不能让 MATH101 和 ARTMATH101 共用一个房间和一位教授——如果一位老师正在教授一门课程，他就不能（合法地）同时教授另一门课程；换句话说，“一次只能教一节课”的规则没有例外。

```
class Professor(object):
    def __init__(self, name, id):
        self.name = name
        self.id = id

class Course(object):
    def __init__(self, professor_ids, periods):
        self.professors = set(professor_ids)
        self.periods = periods  # where 'period' is an enum of all teaching periods in a week

from collections import Counter

def is_professor_double_booked(professor, all_courses):
    # find all courses taught by this professor
    pcourses = [course in all_courses if professor.id in course.professor_ids]
    # count how many times each period is booked
    period_bookings = Counter(p for course in pcourses for p in course.periods)
    # return (any period booked twice?)
    return len(period_bookings) and (period_bookings.most_common()[0][1] > 1)

def professors_who_are_double_booked(professors, courses):
    for prof in professors:
        if is_professor_double_booked(prof, courses):
            print(prof.name) 
```

# python - python - 在列表中查找不同类型的共同元素

> ID：11353476
> 
> 赞同：0
> 
> 时间：2012-07-05T22:38:47.907
> 
> 标签：python, algorithm, set

我想知道 Python 是否提供了任何方便的功能来查找不同列表中的常见元素？

假设我有两个列表，

```
[1,2,[3,4]] and [1,3,[3,4]] 
```

函数的理想输出应该是 [1,[3,4]]，一个包含公共元素的列表。困扰我的是嵌套列表[3,4]。没有它，我可以简单地做 set(list1)&set(list2) ，这个问题将完全重复，知道这个问题可能看起来很少重复[Find non-common elements in lists](https://stackoverflow.com/questions/11348347/python-find-common-elements-in-lists)。当我用上面的例子尝试同样的事情时，我收到一条错误消息：

```
TypeError: unhashable type: 'list' 
```

知道如何处理吗？提前致谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:43:44.860

```
>>> a = [1,2,[3,4]]
>>> b = [1,3,[3,4]]
>>> [x for x in a if x in b]
[1, [3, 4]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:43:49.073

IDLE 会话的以下命令和输出应该有助于解决您的问题：

```
>>> A = [1,2,[3,4]]
>>> B = [1,3,[3,4]]
>>> [a for a in A if a in B]
[1, [3, 4]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:50:17.353

在这种特殊情况下，*可以*使用以下方法使列表的成员可散列`repr`：

```
>>> a = [1,2,[3,4]]
>>> b = [1,3,[3,4]]
>>> a_set = set(repr(x) for x in a)
>>> [x for x in b if repr(x) in a_set]
[1, [3, 4]] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T22:51:51.410

您可以作弊并创建一个辅助函数（取决于您的 Python 版本）：

```
import collections

a = [1,2,[3,4]]
b = [1,3,[3,4]]

def helper(item):
    for i in item:
        if not isinstance(i, collections.Hashable):
            yield tuple(i)
        else:
            yield i

print set(helper(a)) & set(helper(b)) 
```

但我喜欢 MRAB 的回答...

# jquery - flexbox 的 slideDown 动画

> ID：11353477
> 
> 赞同：2
> 
> 时间：2012-07-05T22:39:05.007
> 
> 标签：jquery, html, css, flexbox

好的，所以我试图在 jquery 中重新创建“slideUp”和“slideDown”功能，但是当使用 flexbox 进行显示时！

```
jQuery.fn.toggleFlexbox = function() {
    var elm = $(this[0]);
    if(elm.css('display') === "none"){
        elm.css('display', '-webkit-flex');
    }else{
        elm.slideUp('fast');
    }
}; 
```

这就是我已经走了多远（目前上面的代码可以工作，但是当我们用它从“none”切换到“-webkit-flex”时不会滑动，我尝试了以下）

```
elm.animate({"display":"-webkit-flex"}, 1000); 
```

这根本无法工作，没有动画，没有错误或任何东西......

* * *

奇怪的是我这样做是因为如果我用我的所有对象（类“设置”的元素）开始页面，我想加载为显示 flex，然后隐藏它们

```
$('.settings').hide(); 
```

当我单击以向下滑动“设置”部分时，这似乎没有应用弹性框，但是我已经转到另一个页面并在行为正确时返回它......非常奇怪！

* * *

奇怪的是，我无法在提琴手中重新创建它...... [http://jsfiddle.net/FzqA7/](http://jsfiddle.net/FzqA7/) ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T14:00:48.173

如果我正确理解了您的问题（这是一个很大的问题），听起来您遇到了我前一段时间一直在努力解决的问题，即，一旦启动，只有一半的动画会起作用（一旦滑下来， slideUp 不起作用，反之亦然）。

我通过在动画的第一次迭代之后添加“return”来解决它，尽管这是一个点击事件触发器，所以结束该函数对于多个排列至关重要。

尝试：

```
 jQuery.fn.toggleFlexbox = function() {
        var elm = $(this[0]);
        if(elm.css('display') === "none"){
            elm.css('display', '-webkit-flex');
            return;
        }else{
            elm.slideUp('fast');
            return;
        }
    }; 
```

对不起，如果我完全误解了你的问题，但这有点模棱两可......

# ios - 如何检查选择了哪个 UIButton

> ID：11353481
> 
> 赞同：1
> 
> 时间：2012-07-05T22:39:25.860
> 
> 标签：ios, uibutton

我正在尝试从一堆（10）个按钮中找出哪个 UIButton 已被选中，这些按钮是可选的并且连接到相同的 IBAction 方法..但是我不确定如何执行此操作..

如果我可以在每个按钮中设置一个允许我检查何时从 IBAction 返回发送者（id）的属性，我会感到很困惑。但是给我的只是 UIButton 的基本细节。

```
<UIRoundedRectButton: 0x1c576e70; frame = (20 8; 57 57); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0x1c5931e0>> 
```

另外作为旁注，每个 UIButton 都通过 IBOutlet 连接起来。但我不确定如何使用它来检查刚刚选择了哪个 UIButton...

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:47:05.783

传递`:(id)sender`给你的`IBAction`方法。测试`sender == buttonName`10 个按钮中的每一个是否。如果为 true，则您已找到正确的按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:47:19.373

通常当你有一个动作时，它看起来像这样：

```
- (IBAction)buttonClick(id)sender; 
```

或者

```
- (IBAction)buttonClick(UIButton *)sender; 
```

如果只能`UIButtons`调用它。`sender`被点击的按钮也是如此。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:49:11.273

使用 an`IBOutletCollection`来维护您的按钮列表。当您收到来自任何按钮的消息时，您可以从数组中获取索引。

声明按钮的属性（并在 中合成它`@implementation`，然后像在单个 IB 中一样添加按钮`IBOutlet`）：

```
@property (nonatomic,strong) IBOutletCollection(UIButton) NSArray *buttons; 
```

在您的操作方法中：

```
- (IBAction)buttonAction:(id)sender
{
    // sender = button that fired the action
    NSInteger index = [self.buttons indexOfObject:sender];
    // ... do more stuff...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T22:53:32.600

您可以使用标签。当您分配按钮或将它们放置在 IB 中时，您可以为它们分别设置一个标签：1,2,3,4...等。Then , when the selector gets called (the selector should look like this: `- (IBAction) onButton:(id)sender;`) you can get the tag like this:

`UIButton *pressedButton = (UIButton *) sender;`

`NSLog(@"you pressed button %d",pressedButton.tag);`

干杯，乔治

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-08T08:49:00.837

非常简单...

```
 if([myButton isSelected])
    {
        NSLog(@"Selected!");
    } 
```

# ubuntu - 如何重新 CMake Komparator4

> ID：11353486
> 
> 赞同：1
> 
> 时间：2012-07-05T22:39:55.253
> 
> 标签：ubuntu, compilation, installation, cmake

[我从这个页面](http://kde-apps.org/content/show.php?content=116039)下载并修改了 Komparator 源代码。我所做的是将一个文件添加到`po`文件夹中。但是当我**重新 CMake**并**重新编译**程序时，更改不会生效。

我认为问题在于我没有更改任何`CMakeLists.txt`文件或其他文件。

这是问题还是什么？`CMakeLists.txt`如果有必要，我应该在文件中写什么代码？最后，`CMakeLists.txt`我应该更改什么文件？因为**每个文件夹**中都有这些文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:05:48.703

如果您只修改了现有的源文件并且没有添加、删除或重命名任何源文件，那么您可能根本不需要更改 Komparator 当前的 CMakeLists.txt 文件。

如果您已添加、删除或重命名源文件，则需要在 Komparator 的“src”子目录中的 CMakeLists.txt 文件中镜像这些更改。

之后，按照“安装”文件中的说明操作即可。

# comments - 评论未显示在管理页面中

> ID：11353488
> 
> 赞同：1
> 
> 时间：2012-07-05T22:40:07.090
> 
> 标签：comments, facebook-social-plugins, facebook-comments

我们的用户评论突然停止出现在 developers.facebook.com/tools/comments 上。我不相信我们在网站上改变了任何会导致它的东西。我们在每个有 FB 评论的页面的 head 标记中都有以下内容（我们的 appid 正确插入）。

```
<meta property="fb:app_id" content="{YOUR_APPLICATION_ID}"/> 
```

关于寻找什么来尝试解决这个问题的任何想法？

# macos - 沙盒化 OS X 助手应用程序无法打开主应用程序

> ID：11353490
> 
> 赞同：2
> 
> 时间：2012-07-05T22:40:27.517
> 
> 标签：macos, sandbox

我正在使用[此处](http://www.delitestudio.com/2011/10/25/start-dockless-apps-at-login-with-app-sandbox-enabled/)的说明创建一个嵌入式帮助应用程序，该应用程序将打开主应用程序，并将帮助应用程序注册为登录项。

帮助应用程序当前在登录时启动，但无法打开主应用程序。

系统的控制台一遍又一遍地重复以下错误大约 5 分钟，然后启动：`500px Uploader Helper: LSOpenFromURLSpec() returned -10827 for application 500px Uploader path (null).`

![来自 Console.app 的屏幕截图](../Images/1fd158b66e173a9f6c829faf746bffda.png)

辅助应用程序使用它的应用程序委托来启动主应用程序，代码如下：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    dispatch_async(dispatch_get_main_queue(), ^{
        BOOL success = [[NSWorkspace sharedWorkspace] launchApplication:@"500px Uploader"];

        if (success)
        {
            NSLog(@"YEAHHHH");
            exit(EXIT_SUCCESS);
        }
        else
        {
            NSLog(@"NOOOOO");
            exit(EXIT_FAILURE);
        }
    });
} 
```

根据[关于 SO 的其他问题](https://stackoverflow.com/questions/7311171/cocoa-sandbox-entitlement-to-launch-another-application)，这是在沙盒环境中打开应用程序的推荐方式。

我试图将启动延迟到第一个运行循环之后，但没有成功。一位同事已验证该问题与我的开发环境无关。我也尝试过使用绝对路径作为`launchApplication:`. `launchApplication:`也无法在`/Applications`.

有谁知道为什么这可能不起作用或为什么几分钟后它会开始起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:13:22.597

不知道为什么你的代码不工作（这些沙盒问题仍然是实验性的），但它看起来像我的路径问题，即 LSOpenFromURLSpec 找不到你的主应用程序。我使用以下代码从帮助应用程序启动我的主应用程序（并且它有效）：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Check if main app is already running; if yes, do nothing and terminate helper app
    BOOL alreadyRunning = NO;
    NSArray *running = [[NSWorkspace sharedWorkspace] runningApplications];
    for (NSRunningApplication *app in running) {
        if ([[app bundleIdentifier] isEqualToString:@"com.timschroeder.LaunchAtLoginApp"]) {
            alreadyRunning = YES;
        }
    }

    if (!alreadyRunning) {
        NSString *path = [[NSBundle mainBundle] bundlePath];
        NSArray *p = [path pathComponents];
        NSMutableArray *pathComponents = [NSMutableArray arrayWithArray:p];
        [pathComponents removeLastObject];
        [pathComponents removeLastObject];
        [pathComponents removeLastObject];
        [pathComponents addObject:@"MacOS"];
        [pathComponents addObject:@"LaunchAtLoginApp"];
        NSString *newPath = [NSString pathWithComponents:pathComponents];
        [[NSWorkspace sharedWorkspace] launchApplication:newPath];
    }
    [NSApp terminate:nil];
} 
```

**更新：**我在[另一个问题](https://stackoverflow.com/questions/11292058/how-to-add-a-sandboxed-app-to-the-login-items/11352406#11352406)的作者上传的[示例项目](http://ge.tt/6DntY4K/v/0?c)中看到了类似的问题，如果仅将主应用程序放在 /Applications 或 ~/Applications 文件夹中，则代码工作正常。也许这也是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T20:56:01.320

我有这个问题。这是由我自己从捆绑包中启动帮助应用程序引起的。显然，沙盒不行吗？所以：

1.  打开 App 包并单击 LoginItems 中的帮助应用程序总是会导致`LSOpenFromURLSpec() returned -10827`
2.  注销并重新登录，我的帮助应用程序可以正常启动主应用程序，没有任何问题。

这意味着测试您的帮助应用程序的唯一方法是注销并重新登录。仅运行该应用程序将始终失败。

# codeigniter - CodeIgniter Active Record 包含来自先前查询的列

> ID：11353496
> 
> 赞同：0
> 
> 时间：2012-07-05T22:40:56.987
> 
> 标签：codeigniter, codeigniter-2

我有一个需要运行 2 个查询的函数。第一个查询运行良好。第二个不是因为它包含上一个查询中的一列，该列不是来自同一个表。
第一个查询：

```
function1($id) {
    $sql = "SELECT id FROM table1 WHERE id2 = $id";

    return($this->db->query($sql));
} 
```

第二个查询：

```
function2() {
    $this->db->select('id2');
    $this->db->from('table2');
    $this->db->where('col1', '1');
    $this->db->limit($random_number, 1);

    return($this->db->get());
} 
```

调用函数：

```
function() {
    $rs1 = function($id)->result_array(); // runs ok.
    $rs2 = function2()->result_array();   // error.
} 
```

错误信息：

```
A Database Error Occurred

Error Number: 1054

Unknown column 'id' in 'field list'

SELECT `id`, `id2` FROM (`table2`) WHERE `col1` = '1' LIMIT 1, 30 
```

该列`id`甚至不在第二个查询中，但它包含在结果中。我该如何解决这个问题？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:52:30.973

尝试运行：

`$this->db->flush_cache()`前`$this->db->select('id2')`

# php - HTML表单元素在提交后消失

> ID：11353497
> 
> 赞同：0
> 
> 时间：2012-07-05T22:41:15.437
> 
> 标签：php, html, forms, loops

基本上我这里有 2 个表单，第一个是一个简单的下拉选择，您可以在其中选择所需的“部分”数量，这些“部分”中的每一个都需要一个键和一个值，所以当提交表单时，它会运行一个循环并将输入框生成到另一种形式的选定金额。这一切都很好。当提交第二个表单时，输入框消失。它确实发布了数据并且字符串似乎。

```
 <?php 
    $userkey = $_POST['key1'];
    $userval = $_POST['val1'];
    $usernum = $_POST['usernum'];
    ?>
<form action='MYPIE.PHP' method='POST'>
                HOW MANY SECTIONS?
                    <select name="usernum">
                          <option>1</option>
                          <option>2</option>
                          <option>3</option>
                          <option>4</option>
                          <option>5</option>
                          <option>6</option>
                          <option>7</option>
                          <option>8</option>
                          <option>9</option>
                    </select>
                <input type="submit" name="submitnum" value="submit" />
        </form>

    <form action='MYPIE.PHP' method='POST'>     
        <?php 
            for ($i=1; $i<$usernum+1; $i++){
                echo "<br>insert key:   <input name='key".$i."' value='hi".$i."'>   insert value:   <input name='val".$i."' value='val".$i."'>";
            }
        ?>
        </br>
        <button type="submit" value="submit" name="submit keys" />
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:44:21.747

这是因为您第二次提交表单时未存储发布数据。您可以使用包含数据的隐藏输入来解决此问题。

```
 <form action='MYPIE.PHP' method='POST'>     
    <?php 
        echo '<input type="hidden" value="' . $usernum . '" name="usernum" />'; 
        for ($i=1; $i<$usernum+1; $i++){
            echo "<br>insert key:   <input name='key".$i."' value='hi".$i."'>   insert value:   <input name='val".$i."' value='val".$i."'>";
        }
    ?>
    </br>
    <button type="submit" value="submit" name="submit keys" />
</form> 
```

该行：`<input type="hidden" value="' . $usernum . '" name="usernum" />`将在您第二次提交表单时重新发送 usernum 数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:45:03.353

`$usernum`提交第二个表格后不会留下。它只是第一种形式。要解决此问题，请在第二个表单中创建一个隐藏的表单元素。

```
<input type="hidden" name="usernum" value="<?php echo $usernum; ?>" /> 
```

这将导致该值不仅在提交第一个表单时提交，而且在第二个表单提交时也会提交，并且您的循环将显示正确数量的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:45:43.117

那是因为您丢失了已发布的内容`usernum`，请尝试；

```
<?php 
     for ($i=1; $i<$usernum+1; $i++){
           echo "<br>insert key:   <input name='key".$i."' value='hi".$i."'>   insert value:   <input name='val".$i."' value='val".$i."'>";
        }
 ?>
<input type="hidden" name="usernum" value="<?php echo $usernum; ?>"> 
```

# graphics - SVG / Canvas :: shape-rendering="crispEdges" 通过 JavaScript？

> ID：11353499
> 
> 赞同：0
> 
> 时间：2012-07-05T22:41:34.930
> 
> 标签：graphics, canvas, svg

我想关闭抗锯齿，我相信我需要为此将**形状渲染**设置为*“crispEdges”*。

我怎样才能用***JavaScript***做到这一点？

这是我需要关闭抗锯齿的代码的一部分：

```
context.strokeStyle = gradient;
context.lineWidth = 1;
context.moveTo(x + size, y + size);
context.lineTo(x + dx, y + dy);
context.stroke(); 
```

所以线条应该看起来像右边的那条，而不是左边的另一条。

![在此处输入图像描述](../Images/c98da8088f28f36431617f4482318d1e.png)

每一个帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T07:18:48.850

在 SVG 中，您可以设置“形状渲染”属性，例如：

```
someElement.style.shapeRendering = "crispEdges"; 
```

或者作为一个属性：

```
someElement.setAttribute("shape-rendering", "crispEdges"); 
```

HTML5 画布无法打开/关闭抗锯齿，Ian Hickson 在[此线程](http://lists.whatwg.org/htdig.cgi/whatwg-whatwg.org/2007-May/011263.html)中给出了一些原因。

# java - Android 使用 MediaRecorder 捕获音频。

> ID：11353500
> 
> 赞同：1
> 
> 时间：2012-07-05T22:41:49.703
> 
> 标签：java, android, audio, audio-recording, mediarecorder

我需要从麦克风捕获音频，并且在用户停止说话后应用程序需要识别用户停止说话。我有一个 Android 2.2 Froyo 设备，它有这种应用程序。由于大多数应用程序都是用 Java 编写的，我想知道如何做到这一点。我到处搜索，[MediaRecorder Api](http://developer.android.com/reference/android/media/MediaRecorder.html) ，但我找不到任何东西。

我正在使用[本](http://developer.android.com/guide/topics/media/audio-capture.html)教程，由于这是一般性问题，我不会发布任何编码。

我没有使用 ACTION_RECOGNIZE_SPEECH 意图，而是使用 google Speech-api，我记录 amr 文件并将其上传到 google Speech api，它为我提供了带有语音到文本的 json。

问题是我如何确定用户停止说话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T10:15:33.280

MediaRecorder 不能用于此，但请查看：

*   [AudioRecord](http://developer.android.com/reference/android/media/AudioRecord.html)，它可以让您捕获原始音频，然后您可以分析暂停；或者
*   [SpeechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)（自 API 级别 8 起），可让您调用已实现端点检测的语音识别器。

# python - Python IOError：无效模式：w - 我的程序无法写入外部文件

> ID：11353501
> 
> 赞同：1
> 
> 时间：2012-07-05T22:41:53.637
> 
> 标签：python, google-app-engine, io, syntax-error, jinja2

在下面的代码中，当调用过程 dupdateNumBookPg(b, fp) 时（在此行中： updateNumBookPg(geted_numBook, geted_numFinalPage) ）我收到此错误：

```
 File "C:\Users\CG\Documents\udacity\contract\main.py", line 174, in get
    updateNumBookPg(geted_numBook, geted_numFinalPage)
  File "C:\Users\CG\Documents\udacity\contract\main.py", line 62, in updateNumBookPg
    doc = open("numbookpg.txt", "w")
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\dev_appserver_import_hook.py", line 589, in __init__
    raise IOError('invalid mode: %s' % mode)
IOError: invalid mode: w
INFO     2012-07-05 22:26:54,964 dev_appserver.py:2952] "GET /your_contract?person=Raj%20Koothrappali&nacionality=Indian&profession=physicist&maritalStatus=unmarried&SSN=22222&driverLicense=%2011111&email=&witness=&owner=&contractType=House%20Rental%20Contract&address=%20New%20Delhi&numBook=44&numInitialPage=300&numFinalPage=300 HTTP/1.1" 500 - 
```

我在同一个目录中有一个 .txt 文件，我的代码可以打开并拆分它的内容，但不能在上面写更新它的内容。是什么产生了这个错误？我的 IO 语句有什么问题？

谢谢你的帮助！

```
doc = open("numbookpg.txt", "w")
doc.write(newNumBookPg)

# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

from google.appengine.ext import db

USER_RE = re.compile(r"^[a-zA-Z0-9_ -]{3,20}$")
def valid_person(person):
    return USER_RE.match(person)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

import time

import datetime

def getNumBookPg():
    doc = open("numbookpg.txt")
    numBookPg = []
    numbers = doc.read().split()
    for n in numbers:
        numBookPg.append(n)
    return numBookPg

numBookPage = getNumBookPg()

def updateNumBookPg(b, fp):
    newNumBookPg = b + ' ' + str(int(fp) + 1) + ' ' + str(int(fp) + 1)
    doc = open("numbookpg.txt", "w")
    doc.write(newNumBookPg)

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExt[todayMonth] + ' of ' + todayYear)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        numBook = numBookPage[-3]
        numInitialPage = numBookPage[-2]
        numFinalPage = numBookPage[-1]
        template_values = {"person": "",
                                       "nacionality": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "person_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "address": "",
                                       "email_error": "",
                                       "numBook": numBook,
                                       "numInitialPage": numInitialPage,
                                       "numFinalPage": numFinalPage,
                                       }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

##    def write_form(self, text_write):
##        self.response.out.write(text_write)

    def post(self):
        person_name = self.request.get("person")
        user_nacionality = self.request.get('nacionality')
        user_profession = self.request.get('profession')
        user_maritalStatus = self.request.get('maritalStatus')
        user_SSN = self.request.get('SSN')
        user_email = self.request.get('email')
        user_driverLicense = self.request.get('driverLicense')
        person_error = ""
        SSN_error = ""
        driverLicense_error = ""
        geted_email_error = ""
        address = self.request.get('address')
        contractType = self.request.get("contractType")
        owner = self.request.get("owner")
        witness = self.request.get("witness")
        numBook = self.request.get("numBook")
        numInitialPage = self.request.get("numInitialPage")
        numFinalPage = self.request.get("numFinalPage")

        if (person_name and valid_person(person_name)) and (user_SSN and valid_SSN(user_SSN)) and ((not user_email) or (user_email and valid_email(user_email))):
            a = Person(firstName = person_name,
                                   nacionality = user_nacionality,
                                   maritalStatus = user_maritalStatus,
                                   profession = user_profession,
                                   SSN = int(user_SSN),
                                   driverLicense = int(user_driverLicense)
                                   #address = user_address
                                   )
            a.put()
            self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s&numBook=%s&numInitialPage=%s&numFinalPage=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
witness, owner, contractType, address, numBook, numInitialPage, numFinalPage))

        else:
            if not person_name or not valid_person(person_name):
                person_error = "Oh no!!! this person name isn't valid!"
            if not user_SSN or not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                geted_email_error = "Oh no!!! e-mail isn't valid!"
            template_values = {"person": person_name,
                                "nacionality": user_nacionality,
                                "maritalStatus": user_maritalStatus,
                                "profession": user_profession,
                                "SSN": user_SSN,
                                "driverLicense": user_driverLicense,
                                "email": user_email,
                                "person_error": person_error,
                                "SSN_error": SSN_error,
                                "driverLicense_error": user_driverLicense,
                                "address": address,
                                "email_error": geted_email_error}
            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values))

class your_contractHandler(webapp2.RequestHandler):
    def get(self):
        geted_person_name = self.request.get('person')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_profession = self.request.get("profession")
        geted_user_maritalStatus = self.request.get("maritalStatus")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_person_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        geted_address = self.request.get('address')
        geted_owner = self.request.get("owner")
        geted_witness = self.request.get("witness")
        geted_contractType = self.request.get("contractType")
        geted_dateToday = dateToday()
        your_contract = jinja_environment.get_template('your_contract.html')
        geted_numBook = self.request.get('numBook')
        geted_numInitialPage = self.request.get('numInitialPage')
        geted_numFinalPage = self.request.get('numFinalPage')
        updateNumBookPg(geted_numBook, geted_numFinalPage)
        your_contract_values = {"person":geted_person_name,
                                "nacionality":geted_user_nacionality,
                                "maritalStatus": geted_user_maritalStatus,
                                "profession": geted_user_profession,
                                "SSN":geted_user_SSN,
                                "driverLicense":geted_user_driverLicense,
                                "address":geted_address,
                                "email":geted_user_email,
                                "contractType":geted_contractType,
                                "dateContract":geted_dateToday,
                                "numBook":geted_numBook,
                                "numInitialPage":geted_numInitialPage,
                                "numFinalPage":geted_numInitialPage,
                                }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(your_contract.render(your_contract_values))

class Person(db.Model):
    firstName = db.StringProperty(required = True)
#    lastName = db.StringProperty(required = True)
    nacionality = db.StringProperty(required = True)
    maritalStatus = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driverLicense = db.IntegerProperty(required = True)
#    address = db.PostalAdressProperty(required = True)
#    condition = db.StringProperty(required = False, choices=set(["buyer", "seller", "renter", "owner", "witness"]))

##class Acts(db.Model):
##    firstPart = db.StringProperty(required = True)
##    secondPart = db.StringProperty(required = True)
##    contractNumber = db.IntegerProperty(required = False)
##    contractDate = db.DateProperty(auto_now_add=True)
##    contractDraft = db.TextProperty(required = True)

app = webapp2.WSGIApplication([('/', MainHandler), ('/your_contract', your_contractHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:43:30.243

应用引擎不允许写入文件系统。

# android - 使用 MonoDroid 链接到“libOpenSLES”

> ID：11353502
> 
> 赞同：0
> 
> 时间：2012-07-05T22:42:20.663
> 
> 标签：android, mono, xamarin.android, openal

嗨，我正在做一个简单的链接测试，让 OpenAL/OpenSLES 在 C# 中的 MonoDroid 上工作。我应该链接到的正确库名称是什么，因为链接到“libOpenSLES”是说它找不到方法“alutInit”？

注意：我正在 Android 4.0.3 平板设备上进行测试。

这是简单的测试代码::

```
public const string DLL = "libOpenSLES";
[DllImport(DLL, EntryPoint="alutInit", ExactSpelling=true)]
public unsafe static extern void alutInit(ALint* argc, ALbyte** argv);

public unsafe void Init()
{
    alutInit((ALint*)0, (ALbyte**)0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:57:17.960

alutInit 是 ALUT 库的一部分。为什么你认为 OpenSLES 会有它？

# xslt - Saxon XQJ API 中的 DataSource 声明

> ID：11353504
> 
> 赞同：1
> 
> 时间：2012-07-05T22:42:26.533
> 
> 标签：xslt, xquery, saxon

我需要编写一个程序，以便在 java 中使用`saxon`. 我是 XQuery 和撒克逊的新手。我已经下载`saxon-xqj-8.9.0.4.jar`了 saxon9.jar 并将这两个文件添加到类路径中。以下是我的简单测试代码

```
 import net.sf.saxon.javax.xml.xquery.XQConnection;
 import net.sf.saxon.javax.xml.xquery.XQException;
 import net.sf.saxon.xqj.SaxonXQDataSource;

 public class SaxonExtJavaObject {
     public String f() {

    return "Some string";
    }

   public static void main(String[] args) throws XQException {

        SaxonXQDataSource xqds = new SaxonXQDataSource();
        XQConnection xqc = xqds.getConnection();
        System.out.println("connected");
}

} 
```

问题是它给出了以下异常

```
 Exception in thread "main" java.lang.NoSuchMethodError: net.sf.saxon.Configuration.makeSchemaAwareConfiguration(Ljava/lang/ClassLoader;Ljava/lang/String;)Lnet/sf/saxon/Configuration;
at net.sf.saxon.xqj.SaxonXQDataSource.<init>(SaxonXQDataSource.java:34)
at SaxonExtJavaObject.main(SaxonExtJavaObject.java:17) 
```

我认为问题是因为`SaxonXQDataSource xqds = new SaxonXQDataSource();`但我无法解决，有人可以帮助他们吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T08:09:54.817

JAR 文件 saxon-xqj-8.9.0.4.jar 是 Saxon 8.9.0.4 的一部分，而您的 saxon9.jar 必须来自 9.0 或更高版本。您不能混合来自不同 Saxon 版本的不同 JAR 文件。

在某个阶段，我忘记了 XQJ 代码何时被合并到主要的 Saxon JAR 文件中，因此您不再需要单独的 JAR。它最初分开的原因是它具有主 JAR 文件中不存在的依赖项（在 JDK 上）。

# xml - 是否可以解析包含句点的 XML 属性

> ID：11353505
> 
> 赞同：-1
> 
> 时间：2012-07-05T22:42:27.933
> 
> 标签：xml, actionscript-3

我正在尝试解析一些属性名称包含句点的 XML。

```
<SomeElement someattr.x="45"/> 
```

由于额外的时间段，尝试使用“ **element.@someattr.x ”语法访问它会给我带来麻烦。**有没有办法在 Actionscript 3 中访问包含句点的属性，还是我需要为我的 XML 属性选择不同的命名约定？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:49:58.443

这与在元素名称中使用破折号的处理方式相同。

使用方括号和引号引用该属性：

```
@["someattr.x"] 
```

例子：

```
package
{
    import flash.display.Sprite;

    public class X extends Sprite
    {
        protected var xml:XML = <root>
                                    <Some-Element 
                                        someattr.x="1" 
                                        someattr.y="2"
                                        someattr.z="3" />
                                </root>;

        public function X()
        {
            trace(xml["Some-Element"].@["someattr.x"]);
            trace(xml["Some-Element"].@["someattr.y"]);
            trace(xml["Some-Element"].@["someattr.z"]);
        }
    }
} 
```

输出：

> 1
> 2
> 3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:23:47.837

了解如何执行此操作。

```
xml.someElement.attribute("someattr.x") 
```

# c# - 具有一对值的字典是否矫枉过正？

> ID：11353506
> 
> 赞同：2
> 
> 时间：2012-07-05T22:42:33.370
> 
> 标签：c#, winforms, dictionary

我想将表单上选择的记录中的 int 和字符串返回给表单的调用者。

我可以用这两个成员创建一个类并将其实例传回。或者我可以使用只有一对值（一个键，一个对应值）的字典，这似乎是最简单的方法。

我想将返回的任何内容分配给 Listview 的 DataBindings 属性。

有什么理由不为此使用 Dictionary<> 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T22:43:53.993

使用`Tuple<int, string>`or怎么样`KeyValuePair<int, string>`？还是只使用匿名类型？

```
return new { Foo = "foo", Bar = "bar" }; 
```

这样（假设绑定适用于匿名类型）您可以为属性赋予有意义的名称......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:15:53.347

Dictionary 路线将为您提供未来扩展的空间，因此它是最佳路线。而且我认为你不应该关心速度，在这个特定方面，因为它并不明显。你也可以用你自己的能力初始化它，在这种情况下是 1 但谁知道将来会是什么：

> `Dictionary<keyType, valueType> dct = new Dictionary<keyType, valueType>(1)`

最好尽可能使用 .net 结构。它也比匿名类型更有效。

# c# - 序列化方法未按预期顺序调用

> ID：11353507
> 
> 赞同：0
> 
> 时间：2012-07-05T22:42:49.873
> 
> 标签：c#, serialization

我有以下设置：

```
[Serializable]
public class TickerSymbol : ISerializable
{
    public readonly string Symbol;

    public TickerSymbol(string Symbol)
    {
        this.Symbol = Symbol;
    }

    protected TickerSymbol(SerializationInfo info, StreamingContext context)
    {
        // Call Order: 3
        Symbol = info.GetString("Symbol");
    }

    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue<string>("Symbol", Symbol);
    }

    [OnDeserialized]
    public void OnDeserialized(StreamingContext context)
    {
        // Call Order: 1
        // Do something that requires the symbol to not be null
    }
}

[Serializable]
public class EquitySymbol : TickerSymbol, ISerializable
{
    public EquitySymbol(stirng Symbol)
        : base(Symbol)
    {
    }

    protected EquitySymbol(SerializationInfo info, StreamingContext context)
        : base(info, context)
    {
        // Call Order: 4
    }

    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        base.GetObjectData(info, context);
    }

    [OnDeserialized]
    public void OnDeserialized(StreamingContext context)
    {
        // Call order 2
    }
} 
```

我本来希望在各自的序列化构造函数之后调用标有 [OnDeserialized] 的方法，但看起来好像在它们的序列化构造函数之前调用它们 - 这应该如何工作？

威廉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:07:33.927

一个可能的解决方案可能是创建`Symbol`一个属性而不是一个字段。然后，可以在`Symbol`'s setter 中执行所需的操作，例如：

```
private string _symbol;

public string Symbol {
    get { return _symbol; }
    set { 
        _symbol = value;
        if (_symbol != null ) {
            // here the _symbol is right after deserialization,
            // and it is certainly not null
        }
    }
} 
```

此外，通常不建议在 .NET 中公开公共字段，因为这些字段大多被认为是*实现细节*，而不是接口构造；有关更多信息，请参阅以下资源：

[为什么没有人接受 C# 中的公共字段？](https://stackoverflow.com/questions/480627/why-wont-anyone-accept-public-fields-in-c)- 关于 StackOverflow 的精彩讨论

[CA1051：不要声明可见的实例字段](http://msdn.microsoft.com/en-us/library/ms182141.aspx "CA1051：不声明可见的实例字段") [http://msdn.microsoft.com/en-us/library/ms182141.aspx](http://msdn.microsoft.com/en-us/library/ms182141.aspx) - Microsoft 对该问题的解释

# ios - 无法将 CLLocationCoordinate2D 分配给另一个 CLLocationCoordinate2D

> ID：11353508
> 
> 赞同：0
> 
> 时间：2012-07-05T22:42:50.890
> 
> 标签：ios, mkmapview, cllocationmanager

我收到以下错误：

```
Assigning to 'CLLocationCoordinate2D *' from incompatible type 'CLLocationCoordinate2D'; take the address with & 
```

在下面的行中：

```
 locationMapViewController.centerOfMap = coordinate;

- (IBAction) btnLocateAddress
{

    if (!self.geocoder) {
        self.geocoder = [[CLGeocoder alloc] init];
    }

    [self.geocoder geocodeAddressString:self.address.text completionHandler:^(NSArray *placemarks, NSError *error) {
        if ([placemarks count] > 0) {
            CLPlacemark *placemark = [placemarks objectAtIndex:0];
            CLLocation *location = placemark.location;
            CLLocationCoordinate2D coordinate = location.coordinate;

            self.address.text = [NSString stringWithFormat:@"%f, %f", coordinate.latitude, coordinate.longitude];

            if ([placemark.areasOfInterest count] > 0) {
                NSString *areaOfInterest = [placemark.areasOfInterest objectAtIndex:0];
                 NSLog(@"Area of Interest: %@",areaOfInterest);
            }

        //lets push the new map screen
            LocationMapViewController *locationMapViewController = [[LocationMapViewController alloc] initWithNibName:@"LocationMapViewController_iPhone" bundle:nil];
            locationMapViewController.title=@"Your Property Listing";
            locationMapViewController.centerOfMap = coordinate;
            [self.navigationController pushViewController:locationMapViewController animated:YES]; 

        }
    }];

} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:49:32.150

错误告诉你一切。您正在`CLLocationCoordinate2D`为指针 ( ) 赋值（参见 NO POINTER）`CLLocationCoordinate2D *`您可以使用 & 来获取变量的地址。也称为`pointer`. 因此，您可以直接执行`locationMapViewController.centerOfMap = &coordinate;`或设置`latitude`and`longitude`值。

干杯，

乔治

# c# - 连接未初始化

> ID：11353518
> 
> 赞同：0
> 
> 时间：2012-07-05T22:43:55.017
> 
> 标签：c#, asp.net, .net

我有一个快速的问题，我的连接没有被初始化。

当我调用 create 方法时，我传入了一堆 varname，比如“ABC、XYZ 等”。

在 foreach 的第一遍中，存储过程被正确调用并且一切正常。但在第二遍时，我得到一个“Connectionstring 属性尚未初始化。

我应该将 myConn.open 和 myConn.close 移到循环之外吗？

我的代码：

```
public bool Create()
{
        bool isSuccess = true;

        ConnectionStringSettings myConnectionStringSetting = ConfigurationManager.ConnectionStrings[0];
        DbProviderFactory dbFactory = DbProviderFactories.GetFactory(myConnectionStringSetting.ProviderName);

        DbConnection myConn = dbFactory.CreateConnection();
        myConn.ConnectionString = myConnectionStringSetting.ConnectionString;

        DataTable myDataTable = new DataTable();

        string[] varNamesArray = m_variableNames.Split(',');

        foreach (string varName in varNamesArray)
        {
            string vn = varName.Trim();

            //stored procedure

            DbCommand myCommand = dbFactory.CreateCommand();
            myCommand.CommandText = "s_LockVariables";
            myCommand.CommandType = CommandType.StoredProcedure;
            myCommand.Connection = myConn;

            //variables            

            DbParameter param1 = myCommand.CreateParameter();
            param1.ParameterName = "@varName";
            param1.DbType = DbType.String;
            param1.Value = vn;
            myCommand.Parameters.Add(param1);

            DbParameter param2 = myCommand.CreateParameter();
            param2.ParameterName = "@datasetID";
            param2.DbType = DbType.Int32;
            param2.Value = m_datasetID;
            myCommand.Parameters.Add(param2);

            DbParameter param3 = myCommand.CreateParameter();
            param3.ParameterName = "@userID";
            param3.DbType = DbType.Int32;
            param3.Value = m_userID;
            myCommand.Parameters.Add(param3);

            DbParameter param4 = myCommand.CreateParameter();
            param4.ParameterName = "@currentTime";
            param4.DbType = DbType.DateTime;
            param4.Value = DateTime.Now;
            myCommand.Parameters.Add(param4);

            try
            {
                using (myConn)
                {
                    myConn.Open();
                    myCommand.ExecuteNonQuery();
                    myConn.Close();
                }
            }
            catch (Exception e)
            {
                isSuccess = false;
                throw new Exception(e.Message);
                //TODO:  catch data error

                return isSuccess;
            }
        }

        return isSuccess;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T22:46:50.353

你在这里`myConn`的`foreach`循环中处理：

```
using (myConn)
{
    myConn.Open();
    myCommand.ExecuteNonQuery();
    myConn.Close();
} 
```

我建议您更改它以在此处声明变量：

```
using (DbConnection myConn = dbFactory.CreateConnection())
{
    myConn.ConnectionString = myConnectionStringSetting.ConnectionString;
    myConn.Open();
    myCommand.Connection = myConn;
    myCommand.ExecuteNonQuery();
    // Closed automatically due to being disposed
} 
```

*或者只是在循环之外*有一个`using`语句- 您也可以对所有命令使用相同的连接，对吗？

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:48:36.283

这段代码

```
using (myConn) 
{ 
    myConn.Open(); 
    myCommand.ExecuteNonQuery(); 
    myConn.Close(); 
} 
```

在第一个循环结束时破坏 myConn var
我将尝试以这种方式更改它

```
 using(DbConnection myConn = dbFactory.CreateConnection())
    {
        myConn.ConnectionString = myConnectionStringSetting.ConnectionString;   
        DataTable myDataTable = new DataTable();   
        string[] varNamesArray = m_variableNames.Split(',');   
        foreach (string varName in varNamesArray)   
        {   
            ... 
            // the rest of your code
            ...
            // Then do not add the using statement here 
            myConn.Open(); 
            myCommand.ExecuteNonQuery(); 
            myConn.Close(); 
            ....
        }
    } 
```

另外，我将更改代码的 try/catch 部分。
如果你真的需要从这个代码中返回一个布尔值，那么

```
catch (Exception e)       
{       
    isSuccess = false;       
    // If you rethrow a new Exception here you will never reach the return statement
    // In this cases (assuming we are inside a library) I will try to save the exception
    // in a global var (GetLastError comes to mind) or log everything in a file
    return isSuccess;       
} 
```*

# ruby-on-rails - 单轨或多轨项目

> ID：11353519
> 
> 赞同：0
> 
> 时间：2012-07-05T22:43:56.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我是 Rails 开发的新手，所以这是一个非常基本的问题。我在公司网站上工作。该公司生产了几种客户可以注册的产品。产品都非常不同。我应该将每个创建为单独的 Rails 应用程序/项目吗？还是我应该将它们全部合二为一？

抱歉，如果这听起来很愚蠢，我是网络上的 MVC 新手（尽管我已经在桌面/移动设备上做了 4 年）并且仍在学习 Rails 开发的基础知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:18:47.570

我认为您需要使用单独的应用程序的唯一原因是您是否希望某些核心系统（例如您的数据库）或您的 Gemfile 可以根据特定产品的需求进行定制。仅当您对每种产品都有截然不同的特定要求时，才需要这样做。否则为每个产品构建一个具有单独数据库表和 MVC 的产品应用程序听起来像是要走的路。

# lisp - 在cygwin上安装sbcl

> ID：11353520
> 
> 赞同：3
> 
> 时间：2012-07-05T22:43:59.313
> 
> 标签：lisp, cygwin, sbcl

有人知道如何在 cygwin 上安装 SBCL 二进制文件吗？

我问，因为我认为标准说明被破坏了。看，我按照[http://www.sbcl.org/platform-table.html](http://www.sbcl.org/platform-table.html)上的说明进行操作，遇到以下问题：

*   “从源代码编译”选项需要 gnumake 并且 gnumale 不是 cygwin 包

*   其他选项导致崩溃（一些奇怪的图像文件未找到或 sbcl.exe 未找到）

因此，我的计划不是通过所有这些来战斗，而是抓住一个二进制文件。

有谁知道在哪里可以找到？

吨

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T19:52:55.463

SBCL/win32 不是 cygwin 二进制文件，上次我检查过，而是一个普通的 win32 应用程序。所以只需下载二进制文件，很可能是非官方的（因为没有足够的 win32 开发人员在 windows 端口上工作）。

从头开始构建它可能会有点问题，尤其是当您将 Cygwin 添加到组合中时。

# javascript - 函数中的 Javascript 参数

> ID：11353532
> 
> 赞同：0
> 
> 时间：2012-07-05T22:45:59.167
> 
> 标签：javascript

我在将数组作为函数的参数传递时遇到问题：

```
function test() {
   var array1 = ["1","2"];
   var show = "<p>Show: <a href=# onClick='showArray("+array1+")'>Click to show array</a></p>";
} 
```

所以我需要有一个onClick，但是当我传递一个数组并调用函数时

```
function showArray(array) { alert (array.length); } 
```

什么都不返回。为什么不工作？

编辑：

```
function test() {
    var array1 = [];
    array1[0] = {
        "type" : 0, 
        "message" : "example", 
        "from" : "path1",
        "count" : 1,
        "isChecked": false
    };
    array1[1] = {
        "type" : 2, 
        "message" : "example", 
        "from" : "path2",
        "count" : 50,
        "isChecked": false
    };

   var show = "<p>Show: <a href=# onClick='showArray(["+array1+"])'>Click to show array</a></p>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:47:55.923

您的代码不起作用，因为`show`var 的评估值如下：

```
"<p>Show: <a href=# onClick='showArray(\"1\",\"2\")'>Click to show array</a></p>" 
```

这意味着该`showArray`函数正在接收两个参数（“1”和“2”），它们都不是数组，而是字符串。

要使您的代码正常工作，请使用以下命令：

```
var show = "<p>Show: <a href=# onClick='showArray(["+array1+"])'>Click to show array</a></p>" 
```

通过这种方式，评估值将是：

```
"<p>Show: <a href=# onClick='showArray([\"1\",\"2\"])'>Click to show array</a></p>" 
```

这意味着`showArray`它将只接收一个参数：["1","2"] 数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:50:30.183

每个人都想念它：

```
var show = "<p>Show: <a href='javascript:showArray(array1)'>Click to show array</a></p>" 
```

1.  如果使用变量，则必须去掉引号。
2.  “href”属性不包含引号。
3.  建议使用`href="javascript:"`而不是`onclick`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T22:48:44.257

取出引号：

```
var show = "<p>Show: <a href=# onClick='showArray(array1)'>Click to show array</a></p>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T22:55:13.613

尝试这个：

```
<script>
var array1 = ["1","2"];
function showArray(myArray) { alert (myArray.length); } 
</script>
<p>Show: <a href='#' onClick='showArray(array1); return false;'>Click to show array</a></p>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

这是此示例的链接：http: [//jsfiddle.net/eNXx5/](http://jsfiddle.net/eNXx5/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T22:56:05.453

您的 onclick 调用`showArray`但您的函数被调用`show`。

如果你检查 DOM，你会看到 JS 正在创建什么：

```
<a href="#" onclick="showArray(1,2)">Click to show array</a> 
```

那是无效的！所以只需将其更改为

```
<a href='#' onClick='showArray(array1)'> 
```

DOM 也正是如此。这是有效的。

[**演示**](http://jsfiddle.net/BPNq6/)

# sql - 根据第一行中的值选择组中的第二行

> ID：11353534
> 
> 赞同：2
> 
> 时间：2012-07-05T22:46:28.867
> 
> 标签：sql, oracle11gr2

假设我们在这里有一个表，其中填充了以下数据：

```
acc_id1  acc_id2  acc_grp_id1  acc_parameter1  acc_parameter2
111      111111   115          1               155
111      111111   116          2               166
222      222222   216          2               167
222      222222   217          2               168
333      333333   316          3               155
334      333333   317          3               169
444      444444   416          4               151
445      444444   417          2               166 
```

每个账户都有多个 acc_id，但参数代码是固定的。我试图仅检索遵循此规则的那些帐户：如果最大（最新）acc_grp_id1 具有 param1 = 2 和 param2 = 166，则两行都应该存在。如果最大（最新）参数等于不同的代码，则仅填充最新的。

它应该是这样的：

```
acc_id1  acc_id2  acc_grp_id1  acc_parameter1  acc_parameter2
111      111111   115          1               155
111      111111   116          2               166
222      222222   217          2               168
334      333333   317          3               169
444      444444   416          4               151
445      444444   417          2               166 
```

实际输出是来自 5 个表的连接。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:18:12.010

试试这个解决方案：

```
SELECT
    a.*
FROM
    tbl a
INNER JOIN
    (
        SELECT
            bb.*
        FROM
            (
                SELECT acc_id2, MAX(acc_grp_id1) AS maxgrpid
                FROM tbl
                GROUP BY acc_id2
            ) aa
        INNER JOIN
            tbl bb ON
                aa.acc_id2 = bb.acc_id2 AND
                aa.maxgrpid = bb.acc_grp_id1
    ) b ON 
        a.acc_id2 = b.acc_id2 AND
        (
            (b.acc_parameter1 = 2 AND b.acc_parameter2 = 166) OR 
            a.acc_grp_id1 = b.acc_grp_id1
        )
ORDER BY
    a.acc_id1,
    a.acc_id2,
    a.acc_grp_id1 
```

[SQLFiddle 演示](http://sqlfiddle.com/#!4/c35fd/8/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:59:19.580

试试这个（未测试）：

```
WITH FullData AS
(
    SELECT  a.*,
            ROW_NUMBER() OVER(PARTITION BY acc_id2 ORDER BY acc_grp_id1 DESC) AS Position
      FROM  <YOUR-TABLE> a
), FilteredData AS
(
    SELECT  *
      FROM  FullData
     WHERE  Position = 1 
       AND  acc_parameter_1 = 2 
       AND  acc_parameter_2 = 166
)
SELECT  a.*
  FROM  FullData a LEFT JOIN FilteredData b
        ON  a.acc_id2 = b.acc_id2
 WHERE  (b.acc_id2 IS NULL AND a.Position = 1) -- Should be a.Position instead of b.Position
    OR  b.acc_id2 IS NOT NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T09:18:13.820

这应该工作：

```
SELECT AC.*
FROM (
  SELECT T.acc_id1,max(acc_grp_id1) maxacc_grp_id1
  FROM tbl T
  GROUP by t.acc_id1
) M
INNER JOIN tbl Last on Last.acc_id1=M.acc_id1 
  AND Last.acc_grp_id1=M.maxacc_grp_id1
INNER JOIN tbl AC on AC.acc_id1=M.acc_id1
  and ((Last.acc_parameter1 =2 and Last.acc_parameter2=166)
       OR ac.acc_grp_id1=M.maxacc_grp_id1) 
```

# rest - 在 REST API GET 方法中获取匹配结果

> ID：11353536
> 
> 赞同：0
> 
> 时间：2012-07-05T22:46:40.620
> 
> 标签：rest

我们在我们的应用平台上加入本地企业。我们的移动客户端应用程序正在查询 Google 地点 API 并获取附近地点的列表。现在客户端需要将这些地点的 ID 和 REF 发送到我们的服务器，并查看这些地点是否在我们的应用平台上。我们的服务器将在数据库中检查这些 ID 和 REF 的匹配项，结果集会将每个地点的“onboard status”作为真/假告诉客户端。

我在想我应该使用 GET 方法来实现它，因为 POST 或任何其他动词都没有描述我想要做什么。使用 GET 时，我无法将东西放入体内。那么如何在 GET 方法 URI 中传递整个 JSON 对象列表？下面的声音好吗？

GET /placestatus?placelist=[{ID:'idOfPlace1', REF:'refOfPlace1},{ID:'idOfPlace2', REF:'refOfPlace2},{ID:'idOfPlace3', REF:'refOfPlace2}]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:53:15.000

GET 对您不起作用 - 您可能会遇到 URL 长度限制。您所做的也不完全是 GET。您实际上是在传递需要处理的信息，之后您的服务器将返回一些信息。使用 POST 更安全，并且在您正在做的事情的定义和上下文中仍然有意义。

# python - 如何关闭 CherryPy 线程

> ID：11353538
> 
> 赞同：3
> 
> 时间：2012-07-05T22:46:55.220
> 
> 标签：python, multithreading, cherrypy

我有一个运行良好的简单 WSGI 应用程序，但我正在使用一些内存泄漏很大的类。它们来自一个封装的专有库，我没有源代码。如果我触摸源文件，CherryPy 会优雅地重新加载，但如果我的线程只是优雅地死掉并在几十个请求后被删除，强制垃圾收集，那就更好了。有没有办法告诉 CherryPy 中的线程池关闭一个线程并在需要时生成一个新线程？

# java - Java 1.7 CachedRowSet.populate() 将 MySQL TINYINT(1) 转换为布尔值。这可以禁用吗？

> ID：11353540
> 
> 赞同：0
> 
> 时间：2012-07-05T22:47:03.877
> 
> 标签：java, mysql

如标题所述，通过其 populate() 方法将包含 TINYINT(1) 列的 ResultSet 提供给 CachedRowSet 将将该列中的值转换为布尔值，其中 0 为 false ，以上任何值为 true 。这会丢失原始值并使对该列的 getInt() 调用引发异常。

可以禁用此行为吗？TINYINT(1) 对于硬编码类型和状态也非常有用。这是一个 1 位数字，而不是 1 为最大值的数字。真的，没有理由将其视为布尔值。

在实例化 CachedRowSetImpl 时我能做些什么来禁用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:51:05.300

在你的 SQL 中使用[cast](https://dev.mysql.com/doc/refman/5.0/en/cast-functions.html#function_cast)，所以你得到一个正常的 int：

```
select cast(tinyIntColumn as int) from someTable 
```

# actionscript-3 - 优化 AS3 线波的绘制速度。包括准备运行文件和性能分析器

> ID：11353545
> 
> 赞同：1
> 
> 时间：2012-07-05T22:47:21.600
> 
> 标签：actionscript-3

我附上了一个可以在 CS 5.5 中运行的带有 FLA 的 zip。动画包含一个性能分析器和滑块来控制各种参数。

演示： [http](http://sephardi.ehclients.com/alivetest/index.html) ://separdi.ehclients.com/alivetest/index.html 点击任意位置开始动画

文件： [https ://www.dropbox.com/s/4rcpvzo1h7br8fh/alivesource.zip](https://www.dropbox.com/s/4rcpvzo1h7br8fh/alivesource.zip)

我编写了一个程序，它逐个像素地绘制线条并以波浪状的方式对其进行动画处理，并使用置换贴图置换某些像素。

这是每个循环发生的情况：

1.  前一个循环中的显示对象和变量被清除
2.  位移图存储在位图数据对象中
3.  通过读取存储在数组中的 y 坐标，逐像素绘制一条线。它的值也可以使用相应的位移图和正弦波数据进行更改。

我有设置滑块，您可以使用它来控制绘制的线数（linecount）、每条线的宽度（canvaswidth）和每条线的分辨率（res）。

性能很差，我希望您能帮助优化它。也许我无法优化我的代码，请告诉我。

我不认为缓存为位图数据是可能的，因为线条是永久运动的

请记住，我真的很想保留 35 行和每次迭代 1 像素的分辨率

非常感谢

更新：我现在使用 drawPath 来绘制线条，而不是逐个像素地绘制。

```
/*
Click anywhere on the stage to start anim
*/

import flash.display.BitmapData;
import com.greensock.*;
import flash.display.Shape;
import uk.co.soulwire.*;
import net.hires.debug.Stats;
import uk.co.soulwire.gui.SimpleGUI;
import flash.display.MovieClip;
import flash.display.Sprite;

/*
Performance analyser and variable sliders
*/
var stats:Stats;
var gui:SimpleGUI;
var guiholder:MovieClip;
stats=new Stats();
stats.x = 1200;
stats.y = 0;
addChild(stats);
gui = new SimpleGUI(this,"Parameters","h",1000,0);
gui.show();

/*
Stores the base coordinates
*/
var c:Coordinates;
c=new Coordinates();

/*
Holds the lines
*/
var holder:MovieClip = new MovieClip  ;
addChild(holder);

/*
Generic variables
*/
var i:uint;
var j:uint;
var line:Sprite;
var lines:Array = [];
var bmd:BitmapData;
var brightness = 0;
var sinus = 0;

/**
*
Parameters used to control the animaitons and extrusions
*
**/

/*
How many pixels do we draw in each loop?
*/
var scaleFactor:Number=2
var canvasWidth:Number = 999;
var lineCount:Number = 35;
var res = 1;//Skip res-1 pixels per loop to lower the resolution

/*
Displacement map properties
*/
var extrusion:Number = 1;
var extrusiontarget:Number = .1;
var tolerance:Number = 1;
var smoothness = 10;

//Sinewave 
var lasti = 0;
var sinedirection = -1;
var sineamplitude:Number = 3;
var sinespeed = 0.5;
var sinedensity = 100;

/*
Breathing animation
*/
var inhale:Number = 2;
var exhale:Number = 2;
var beforeInhale:Number = 0;
var beforeExhale:Number = 0;

/*
Add sliders to control the above variables
*/
gui.addGroup("Pixels being drawn");
gui.addSlider("lineCount", 5, 35);
gui.addSlider("canvasWidth",30,999);
gui.addSlider("res",1,10);

gui.addGroup("Displacement Map");
gui.addSlider("smoothness", 1, 100,{callback:setBlur});
gui.addSlider("tolerance", 1, 255);
gui.addSlider("extrusiontarget", 0.1, 3);

gui.addGroup("Sinwave");
gui.addSlider("sinedirection",-1,1);
gui.addSlider("sineamplitude",0,30);
gui.addSlider("sinespeed",0,10);

gui.addGroup("Breathing");
gui.addSlider("beforeInhale",0,5);
gui.addSlider("inhale",0,5);
gui.addSlider("beforeExhale",0,5);
gui.addSlider("exhale",0,5);

/**
Loop
**/
function myEnterFrame(event:Event):void {
    /*
    Start a new iteration of line drawing, triggered when you click anywhere ons tage
    */
    drawLines();
}

function drawLines():void {

    for (i=0; i<lines.length; i++) {
        holder.removeChild(lines[i]);
        lines[i] = null;
    }
    lines = [];
    for (i=0; i<lineCount; i++) {
        drawLine(i);
    }

}

function resetBitmapData(){
    bmd = null;
    bmd = new BitmapData(canvasWidth,1000);
    bmd.draw(mc);
    mc.visible = false;
}

/**
plot the cordinates of each point absed on sin data and bmp brihgtness
**/

var targety:Number;
var myPath:GraphicsPath;
var myStroke:GraphicsStroke;
var myDrawing:Vector.<IGraphicsData > ;
var myFill:GraphicsSolidFill;
myFill= new GraphicsSolidFill();
myFill.color = 0x000000;

function drawLine(linenumber):void {
    line=new Sprite();
    holder.addChild(line);
    myPath= new GraphicsPath(new Vector.<int>(), new Vector.<Number>());
    myStroke = new GraphicsStroke(res);
    myStroke.fill = new GraphicsSolidFill(0xff0000);// solid stroke
    for (j=0; j<canvasWidth; j+=res) {
        brightness = Math.ceil(getbrightness(getcolor(j,c.coords[linenumber][j]))/tolerance) ;
        sinus= Math.sin((j + (lasti * sinespeed)) / sinedensity) * sineamplitude;
        targety=c.coords[linenumber][j]-(sinus*0)-(brightness*extrusion)-(sinus*(linenumber-15)*1);
        myPath.commands.push(2);
        myPath.data.push(j,targety);
    }
    myPath.commands.push(2);
    myPath.data.push(0,1000);
    myDrawing = new Vector.<IGraphicsData>();
    myDrawing.push(myStroke,myFill, myPath);
    line.graphics.drawGraphicsData(myDrawing);
    lines.push(line);
    lasti -=  sinedirection;
}

/*
Functions to retrieve brightness of displacement map
*/

function getcolor(xx,targety):uint {
    var pixelValue:uint = bmd.getPixel(xx,targety);
    return pixelValue;
}

function getbrightness(colour):Number {
    var R:Number = 0;
    var G:Number = 0;
    var B:Number = 0;
    R +=  colour >> 16 & 0xFF;
    G +=  colour >> 8 & 0xFF;
    B +=  colour & 0xFF;
    var br = Math.sqrt(R * R * .241 + G * G * .691 + B * B * .068);
    return br;
}

/*
Makes the displacment map "breathe"
*/

function grow():void {
    TweenLite.to(this,inhale,{extrusion:extrusiontarget,onComplete:shrink,delay:beforeInhale});
}

function shrink():void {
    TweenLite.to(this,exhale,{extrusion:0,onComplete:grow,delay:beforeExhale});
}

/*
Smoothness of displacement map
*/
var blur:BlurFilter = new BlurFilter();

function setBlur():void {
    trace("sb");
    blur.blurX = smoothness;
    blur.blurY = smoothness;
    blur.quality = BitmapFilterQuality.HIGH;
    mc.word.filters = [blur];
    //reset the bitmap data
    resetBitmapData()
}

function mouseDownHandler(e) {
    grow();
    addEventListener(Event.ENTER_FRAME,myEnterFrame);
}
stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);

//Draws lines;
setBlur();
drawLines(); 
```

旧代码：

```
/*
Click anywhere on the stage to start anim
*/

import flash.display.BitmapData;
import com.greensock.*;
import flash.display.Shape;
import uk.co.soulwire.*;
import net.hires.debug.Stats;
import uk.co.soulwire.gui.SimpleGUI;
import flash.display.MovieClip;

/*
Performance analyser and variable sliders
*/
var stats:Stats;
var gui:SimpleGUI;
var guiholder:MovieClip;
stats=new Stats();
stats.x = 1200
stats.y = 0;
addChild(stats);
gui = new SimpleGUI(this,"Parameters","h",1000,0);
gui.show();

/*
Stores the base coordinates
*/
var c:Coordinates;
c=new Coordinates();

/*
Holds the lines
*/
var holder:MovieClip=new MovieClip
addChild(holder)

/*
Generic variables
*/
var i:uint;
var j:uint;
var line:Shape;
var lines:Array = [];
var bmd:BitmapData;
var brightness = 0;
var sinus=0;

/**
*
Parameters used to control the animaitons and extrusions
*
**/

/*
How many pixels do we draw in each loop?
*/
var canvaswidth:Number = 999;
var linecount:Number=35
var res=2//Skip res-1 pixels per loop to lower the resolution

/*
Displacement map properties
*/
var extrusion:Number = 1;
var extrusiontarget:Number = .1;
var tolerance:Number = 1;
var smoothness = 10;

//Sinewave 
var lasti = 0;
var sinedirection = -1;
var sineamplitude:Number = 3;
var sinespeed = 0.5;
var sinedensity = 100;

/*
Breathing animation
*/
var inhale:Number = 2;
var exhale:Number = 2;
var beforeInhale:Number = 0;
var beforeExhale:Number = 0;

/*
Add sliders to control the above variables
*/
gui.addGroup("Pixels being drawn")
gui.addSlider("linecount", 5, 35);
gui.addSlider("canvaswidth",30,999);
gui.addSlider("res",1,10);

gui.addGroup("Displacement Map")
gui.addSlider("smoothness", 1, 100,{callback:setblur});
gui.addSlider("tolerance", 1, 255);
gui.addSlider("extrusiontarget", 0.1, 3);

gui.addGroup("Sinwave")
gui.addSlider("sinedirection",-1,1);
gui.addSlider("sineamplitude",0,30);
gui.addSlider("sinespeed",0,10);

gui.addGroup("Breathing")
gui.addSlider("beforeInhale",0,5);
gui.addSlider("inhale",0,5);
gui.addSlider("beforeExhale",0,5);
gui.addSlider("exhale",0,5);

/**
Loop
**/
function myEnterFrame(event:Event):void {
    /*
    Start a new iteration of line drawing, triggered when you click anywhere ons tage
    */
    initdraw();
}

/**
Clear the lines
Clear the bmp data
Redraw the bitmpa data
Redraw the lines
**/

function initdraw():void {
    /*
    Clear previous lines and displacement map data
    Lance drawing of 35 lines
    */
    for (i=0; i<lines.length; i++) {
        holder.removeChild(lines[i]);
        lines[i] = null;
    }
    bmd = null;
    bmd = new BitmapData(canvaswidth,400);
    bmd.draw(mc);
    lines = [];
    for (i=0; i<35; i++) {
//  for (i=0; i<c.coords.length; i++) {
        drawlines(i);
    }

}

/**
plot the cordinates of each point absed on sin data and bmp brihgtness
**/

function drawlines(linenumber):void {
    /*
    Start to draw a line
    */
    line =new Shape();
    line.graphics.lineStyle(1, 0xdddddd);
    line.graphics.beginFill(0x000000);
    line.graphics.moveTo(-1,0);
    /*
    Increase length by 1 * times resolution and 
    Adjust y values based on displacement map and sinewave data
    */
    for (j=0; j<canvaswidth; j+=res) {
        if (c.coords[linenumber][j] ==1100) {
            line.graphics.lineStyle(1, 0x000000);
        } else {
            line.graphics.lineStyle(1, 0xFFffff);
        }
        brightness = Math.ceil(getbrightness(getcolor(j,c.coords[linenumber][j]))/tolerance) ;
        sinus= Math.sin((j + (lasti * sinespeed)) / sinedensity) * sineamplitude;
        line.graphics.lineTo(j,c.coords[linenumber][j]-sinus-(brightness*extrusion));

    }
    /*
    Close the path that the line is drawing
    */

    lasti -=  sinedirection;
    line.graphics.lineTo(500,1100);
    line.graphics.lineTo(-1,1100);
    line.graphics.endFill();
    lines.push(line);
    holder.addChild(line);

}

/*
Smoothness of displacement map
*/
var blur:BlurFilter = new BlurFilter();

function setblur():void {
    trace("sb");
    blur.blurX = smoothness;
    blur.blurY = smoothness;
    blur.quality = BitmapFilterQuality.HIGH;
    mc.word.filters = [blur];
}

/*
Functions to retrieve brightness of displacement map
*/

function getcolor(xx,yy):uint {
    var pixelValue:uint = bmd.getPixel(xx,yy);
    return pixelValue;
}

function getbrightness(colour):Number {
    var R:Number = 0;
    var G:Number = 0;
    var B:Number = 0;
    R +=  colour >> 16 & 0xFF;
    G +=  colour >> 8 & 0xFF;
    B +=  colour & 0xFF;
    var br = Math.sqrt(R * R * .241 + G * G * .691 + B * B * .068);
    return br;
}

/*
Makes the displacment map stringer then weaker
*/

function grow():void {
    TweenLite.to(this,inhale,{extrusion:extrusiontarget,onComplete:shrink,delay:beforeInhale});
}

function shrink():void {
    TweenLite.to(this,exhale,{extrusion:0,onComplete:grow,delay:beforeExhale});
}

function mouseDownHandler(e){
    grow();
    addEventListener(Event.ENTER_FRAME,myEnterFrame);
}

stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler);

//Draws lines
initdraw();
setblur() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:52:50.227

一方面，您应该使用 drawPath，这样您就可以减少所需的函数调用量。由于您的点是静态的，因此它类似于您在 gpu 上构建缓冲区的方式。

*   函数调用是绘图命令将是这里最昂贵的东西，所以你应该尝试内联任何实用函数。
*   展平位图中的数据，因此它是一个更快的数组访问调用 [] 而不是 getpixel(etc)

什么是：

```
line.graphics.lineTo(500,1100);
line.graphics.lineTo(-1,1100); 
```

？？？？？？？？？对于路径绘图仪来说，这是一项相当多的工作。如果您只是显示线条，为什么要使用填充？填充是不小的cpu工作量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:43:53.973

到目前为止，在 RAM 使用方面的性能只有很小的改进，但除了调整分辨率以显着减少循环中的处理之外，还没有提出任何建议，但我会继续关注它。还更新了数组以使用向量。

```
/*
Click anywhere on the stage to start anim
*/
import flash.display.BitmapData;
import com.greensock.*;
import flash.display.Shape;
import uk.co.soulwire.*;
import net.hires.debug.Stats;
import uk.co.soulwire.gui.SimpleGUI;
import flash.display.MovieClip;
import flash.events.Event;
/*
How many pixels do we draw in each loop?
*/
var canvaswidth:Number = 999;
var linecount:Number=35;
var res=4;//Skip res-1 pixels per loop to lower the resolution

/*
Performance analyser and variable sliders
*/
var stats:Stats=new Stats();
stats.x = 1200
stats.y = 0;
addChild(stats);

var gui:SimpleGUI = new SimpleGUI(this,"Parameters","h",1000,0);
gui.show();

/*
Stores the base coordinates
*/
var c:Coordinates=new Coordinates();

/*
Holds the lines
*/
var holder:MovieClip=new MovieClip();
addChild(holder)

/*
Generic variables
*/
var lines:Vector.<Shape> = Vector.<Shape>([]);
var bmd:BitmapData=new BitmapData(999,400);
var brightness = 0;
var sinus=0;

/**
*
Parameters used to control the animaitons and extrusions
*
**/

/*
Displacement map properties
*/
var extrusion:Number = 1;
var extrusiontarget:Number = .1;
var tolerance:Number = 1;
var smoothness = 10;

//Sinewave 
var lasti = 0;
var sinedirection = -1;
var sineamplitude:Number = 3;
var sinespeed = 0.5;
var sinedensity = 100;

/*
Breathing animation
*/
var inhale:Number = 2;
var exhale:Number = 2;
var beforeInhale:Number = 0;
var beforeExhale:Number = 0;

var blur:BlurFilter = new BlurFilter();
/*
Add sliders to control the above variables
*/
gui.addGroup("Pixels being drawn")
gui.addSlider("linecount", 5, 35);
gui.addSlider("canvaswidth",30,999);
gui.addSlider("res",1,10);

gui.addGroup("Displacement Map")
gui.addSlider("smoothness", 1, 100,{callback:setblur});
gui.addSlider("tolerance", 1, 255);
gui.addSlider("extrusiontarget", 0.1, 3);

gui.addGroup("Sinwave")
gui.addSlider("sinedirection",-1,1);
gui.addSlider("sineamplitude",0,30);
gui.addSlider("sinespeed",0,10);

gui.addGroup("Breathing")
gui.addSlider("beforeInhale",0,5);
gui.addSlider("inhale",0,5);
gui.addSlider("beforeExhale",0,5);
gui.addSlider("exhale",0,5);

/**
Clear the lines
Clear the bmp data
Redraw the bitmpa data
Redraw the lines
**/
function myEnterFrame(event:Event=null):void {
    /*
    Clear previous lines and displacement map data
    Lance drawing of 35 lines
    */
    bmd.draw(mc);
    for (var i:int=0; i<linecount; i++)
        drawlines(i);
}
function createLines()
{
    for (var i:int=0; i<linecount; i++)
    {
        var line:Shape = new Shape();
        lines.push(line);
        holder.addChild(line);
    }
}
/**
plot the cordinates of each point absed on sin data and bmp brihgtness
**/
function drawlines(linenumber):void
{
    /*
    Start to draw a line
    */
    var line:Shape = lines[linenumber];
    line.graphics.clear();
    line.graphics.beginFill(0x000000);
    line.graphics.moveTo(-1,0);
    /*
    Increase length by 1 * times resolution and 
    Adjust y values based on displacement map and sinewave data
    */
    for (var j:uint=0; j<canvaswidth; j+=res)
    {
        var currentNum:int = c.coords[linenumber][j];
        if (currentNum == 1100)
            line.graphics.lineStyle(1, 0x000000);
        else
            line.graphics.lineStyle(1, 0xFFFFFF);
        brightness = Math.ceil(getbrightness(bmd.getPixel(j,currentNum))/tolerance);
        sinus = Math.sin((j + (lasti * sinespeed)) / sinedensity) * sineamplitude;
        line.graphics.lineTo(j,currentNum-sinus-(brightness*extrusion));
    }

    /*
    Close the path that the line is drawing
    */
    lasti -=  sinedirection;
    line.graphics.lineTo(500,1100);
    line.graphics.lineTo(-1,1100);
    line.graphics.endFill();
}

var colourDict:Object = {};
function getbrightness(colour):Number
{
    if(colourDict[colour])
        return colourDict[colour];

    var R:Number = 0;
    var G:Number = 0;
    var B:Number = 0;
    R +=  colour >> 16 & 0xFF;
    G +=  colour >> 8 & 0xFF;
    B +=  colour & 0xFF;
    var br = Math.sqrt(R * R * .241 + G * G * .691 + B * B * .068);
    colourDict[colour] = br;
    return br;
}

/*
Makes the displacment map stringer then weaker
*/
function grow():void
{
    TweenLite.to(this,inhale,{extrusion:extrusiontarget,onComplete:shrink,delay:beforeInhale});
}

function shrink():void
{
    TweenLite.to(this,exhale,{extrusion:0,onComplete:grow,delay:beforeExhale});
}

function mouseDownHandler(e)
{
    grow();
    addEventListener(Event.ENTER_FRAME,myEnterFrame);
}

/*
Smoothness of displacement map
*/
function setblur():void
{
    trace("sb");
    blur.blurX = smoothness;
    blur.blurY = smoothness;
    blur.quality = BitmapFilterQuality.HIGH;
    mc.word.filters = [blur];
}

//Draws lines
createLines();
myEnterFrame();
setblur();
stage.addEventListener(MouseEvent.MOUSE_DOWN, mouseDownHandler); 
```

# regex - Bash 字符串提取/操作

> ID：11353547
> 
> 赞同：4
> 
> 时间：2012-07-05T22:47:31.193
> 
> 标签：regex, string, bash, math

我有一种复杂的字符串，形式是

"xxxp+NUMyyy"

其中 xxx、NUM 和 yyy 都是可变长度的，“+”可以是数学运算符，例如“-”、“*”、“/”或“=”。

我试图找出获取用户输入的数学运算符和数字的最佳方法。

我尝试使用这样的组合：

```
 echo `expr match "tcp+111" '\([+-=*/]\)'`
    echo `expr match "tcp+111" '\(\+\-=\*/\)'` 
```

到目前为止没有任何效果。我在想最简单的方法是使用正则表达式，但也许我错了？有什么好方法可以做到这一点？

谢谢你。

示例输入：“tcjp-100”“p+1”“p+1:debug”“cp=11:v”。我忘了提一下，在操作符之前总会有字母“p”。此外，“xxx”和“yyy”不必存在，但可以存在

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T23:01:44.570

您可以使用 Bash 的正则表达式匹配功能。

```
string="xxxp+3456yyy"
pattern="[^*/+-]*([*/+-]*)([[:digit:]]+).*"    # the hyphen must come last (or first, but after ^) in the character sets

[[ $string =~ $pattern ]]
echo "${BASH_REMATCH[1]}"    # operator
echo "${BASH_REMATCH[2]}"    # number 
```

# java - 在 Java 运行时使用泛型 - (T)object - 进行强制转换会发生什么？

> ID：11353555
> 
> 赞同：4
> 
> 时间：2012-07-05T22:48:43.317
> 
> 标签：java, class, generics, compiler-construction, casting

据我了解，Java 泛型会删除泛型方法（或泛型类）中有关参数类型 T 的所有信息。这就是为什么我们不能使用

新的表达方式，例如

```
new T() 
```

instanceof 表达式，例如

```
if(obj instanceof T) 
```

在泛型方法中。

我的问题是参数类型 T 在进行强制转换时如何在泛型方法中工作。例如，我在这里有 3 个简单的类：

```
public class People {

    String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public People(String name) {
        super();
        this.name = name;
    }

    @Override
    public String toString() {
        return "People [name=" + name + "]";
    }

}

public class GenericClass<T> {

    public T getCast(People p) {
        return (T)p;
    }
}

public class App 
{
    public static void main( String[] args )
    {
        People p = new People("Kewei");

        GenericClass<Integer> genericClass = new GenericClass<Integer>();
        Object p_object = genericClass.getCast(p);

        System.out.println(p_object);
    }
} 
```

当它`(T)p`在泛型方法中执行时`getCast(People p)`。它只是将类型 T 作为对象吗？`(T)`或者它只是在编译时删除了整个转换？我读过 Bruce Eckel 的 «Thinking in Java»，从中我大致理解为：

> Java 编译器在编译时检查方法的入口/离开点，以确保泛型方法的内部一致性，并插入转换代码（在编译时）。

是正确的理解吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T01:14:32.877

您可以在脑海中想象编译器将具有泛型的代码“重写”为没有泛型的代码。

在泛型类中，T 被擦除到其上限的擦除，在这种情况下是 Object，但可能是其他东西。对 T 的强制转换成为对 T 的上限的强制转换（在这种情况下是 Object，因此它是多余的，编译器可能会跳过它）。该方法同样返回 T 的上限（即 Object）。所以没有运行时检查该方法内的强制转换是否有效。

```
public class GenericClass {

    public Object getCast(People p) {
        // In this case the cast to T is removed because T's upper bound is Object.
        // But if T's upper bound was, say, Number, then there would still be a cast
        // to the upper bound. e.g. "(Number)p", and the return type would also be Number
        return p;
    }
} 
```

在调用返回 T 的方法的地方，编译器会在 T 的实际类型中插入一个强制类型转换。在这种情况下，在 main 方法中，你有一个`GenericClass<Integer>`，所以当`getCast`返回 T 时，它被强制转换为 Integer。所以在这种情况下，运行时检查现在被“移动”到调用方法，而不是带有强制转换的方法。

```
// somewhere else
GenericClass genericClass = new GenericClass();
p_object = (Integer)genericClass.getCast(p); 
```

调用者也有可能保留一个`GenericClass<S>`引用（对于其范围内的某些类型参数 S），因此结果被强制转换为 S，而不是特定类型。然后我们将再次重复整个重写过程（即，对 S 的强制转换被重写为对其上限的强制转换，并且调用该方法的地方会将结果强制转换为它们的实际类型参数）。这意味着运行时检查可能会推迟到另一个地方，等等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-05T23:06:51.010

Java 从不强制转换任何东西。在运行时，它被简单地视为“对象”。JRE 尝试调用该对象上的方法，并且由于它们已被证明在编译它时存在，因此它可以工作。

在运行时没有**提到**T 类是什么。**无**。所以没有进行任何铸造。

# xml - 仅在一个元素为空或缺失时更改元素顺序

> ID：11353558
> 
> 赞同：1
> 
> 时间：2012-07-05T22:48:48.547
> 
> 标签：xml, xslt

我有一个几乎完成的 XML 工作流。我还有一个问题要解决，我的老板刚刚扔给我，但我很难过。源 XML 包含四个元素来显示银行的地址和营业时间：`<Address1>`、`<Address2>`和。`<Zip>``<Hours>`

当所有元素都存在并包含数据时，元素顺序应显示为 (A)：

`<Address1>123 Main St</Address1> <Hours>M-F 9:00am-5:00pm</Hours><xsl:text>` `</xsl:text><Address2>PO Box 2345</Address2> <Zip>60050</Zip>`

如果`<Address2>`缺少或为空，则元素的顺序应为（B）：

`<Address1>123 Main St</Address1> <Zip>60050</Zip> <Hours>M-F 9:00am-5:00pm</Hours>`

请注意 Zip 现在是如何移动到出现在`<Address1>`. 这就是难倒我的地方。我试过使用“选择”但没有成功。有什么建议么？

这是当前的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE xsl:stylesheet>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:strip-space elements="*"/>

<xsl:output method="xml"/>
<xsl:template match="/">

<Root>
<Story><xsl:apply-templates select="Root/Story/BK"/></Story>
</Root>
</xsl:template>

<xsl:template match="BankName | Address1 | Hours | Established | RoutingNbr | CO/CityOfficePhone | CO/CityOfficeAddress2 "><xsl:element name="{name()}"><xsl:value-of select="."/></xsl:element></xsl:template>
<xsl:template match="BK">
<xsl:apply-templates select="BankName"/><xsl:text>  </xsl:text><xsl:apply-templates select="Established"/>    <xsl:text>    </xsl:text><xsl:apply-templates select="RoutingNbr"/><xsl:text>
</xsl:text>
<xsl:apply-templates select="OfficeOfLabel"/>
<xsl:apply-templates select="Address1"/><xsl:text>  </xsl:text><xsl:apply-templates select="Hours"/>
<xsl:apply-templates select="Address2"/><xsl:apply-templates select="Zip"/>
<xsl:apply-templates select="Phone"/><xsl:apply-templates select="Fax"/><xsl:text>
</xsl:text>

</xsl:template>

<xsl:template match="Address2[string-length() != 0]"><xsl:text>
</xsl:text><Address2><xsl:value-of select="."/></Address2><xsl:text>    </xsl:text>
</xsl:template>

<xsl:template match="Zip">
<Zip><xsl:value-of select="."/></Zip><xsl:text>
</xsl:text></xsl:template>
</xsl:stylesheet> 
```

这是一些示例 XML：

```
<Root><Story><BK><BankName>Ames National Corporation</BankName><Established>Est. 1975</Established><RoutingNbr>8020-0135-0</RoutingNbr><Address1>405 5th Street</Address1><Hours>Hrs: M-F 8-5</Hours><Address2></Address2>      <Zip>50010</Zip><Fax>FAX: (515) 663-3033</Fax><Phone>(515) 232-6251</Phone><WebURL>Web: www.amesnational.com</WebURL><MultiBankLabel>Please see Multi-Bank Holding Companies section</MultiBankLabel>
</BK>
<BK><BankName>Bank of the West</BankName><Address1>525 Main</Address1><Zip>50010-6008</Zip><Fax>FAX: (515) 232-3791</Fax><Phone>(515) 232-8664</Phone><OfficeOfLabel>Office of Bank of the West, West Des Moines</OfficeOfLabel>
<EH><Employee>Michael Sondall, BM</Employee></EH>
</BK>
<BK><BankName>Bankers Trust Company</BankName><Address1>1510 Buckeye </Address1><Zip>50010</Zip><Phone>(515) 233-4424</Phone><WebURL>Web: www.bankerstrust.com</WebURL><OfficeOfLabel>Office of Bankers Trust Company, Des Moines</OfficeOfLabel>
<EH><Employee>John Russell, VP</Employee></EH>
</BK>
<BK><BankName>Exchange State Bank</BankName><RoutingNbr>0739-0950-7</RoutingNbr><Address1>823 Wheeler, Ste 32</Address1><Zip>50010</Zip><Fax>FAX: (515) 232-5068</Fax><Phone>(515) 232-5060</Phone><Email>e-Mail: ames@esb1.com</Email><OfficeOfLabel>Office of Exchange State Bank, Collins</OfficeOfLabel>
<EH><Employee>Allison Appel, VP, CPA</Employee></EH><EH><Employee>Christine Heintz, AVP</Employee></EH>
</BK>
<BK><BankName>First American Bank</BankName><Established>Est. 1956</Established><RoutingNbr>0739-0080-7</RoutingNbr><Address1>1530 S Duff Avenue, Ste 1</Address1><Hours>Hrs: M-TH 9-5 SAT 8-12</Hours><Address2>        </Address2><Zip>50010</Zip><Fax>FAX: (515) 956-3160</Fax><Phone>(515) 233-2033</Phone><WebURL>Web: </WebURL>        <OfficeOfLabel>Office of First American Bank, Fort Dodge</OfficeOfLabel>
<EH><Employee>Steve Goodhue, Reg Pres</Employee></EH>
</BK></Story</Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:21:58.990

**使用**：

```
 <xsl:apply-templates select="Address1"/>
 <xsl:apply-templates select="Zip[not(string(../Address2))]"/>
 <xsl:apply-templates select="Hours"/>
 <xsl:apply-templates select="Address2[string()]"/>
 <xsl:apply-templates select="Zip[string(../Address2)]"/>

** Edited by MHK to add "../" in two lines above 
```

**说明**：

1.  当`Address2`存在且具有非空字符串值时，上述指令序列将模板应用于: `Address1`、和`Hours`， 并在此序列中生成相应的结果——完全符合要求。`Address2``Zip`

2.  当`Address2`不存在或具有空字符串值时，上述指令序列将模板应用于:和`Address1`，并按此序列生成相应的结果——再次完全符合要求。`Zip``Hours`

# java - 使用 Gson 反序列化 RSAPublicKey

> ID：11353559
> 
> 赞同：0
> 
> 时间：2012-07-05T22:49:02.617
> 
> 标签：java, serialization, encryption, gson

我正在尝试`RSAPublicKey`使用 Gson 反序列化 a ，但它没有按我希望的那样工作。Gson 首先抱怨是因为它说`RSAPublicKey`没有无参数构造函数，所以我创建了一个`InstanceCreator`as：

```
public static class PublicKeyInstanceCreator implements InstanceCreator<RSAPublicKey> {
    public RSAPublicKey createInstance(final Type type) {
        try {
            final KeyPairGenerator keyGen = KeyPairGenerator.getInstance("RSA");
            keyGen.initialize(2048);
            final KeyPair key = keyGen.generateKeyPair();
            return (RSAPublicKey) key.getPublic();
        } catch (final NoSuchAlgorithmException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

并在创建 Gson 对象时注册

```
Gson gson = new GsonBuilder().registerTypeAdapter(RSAPublicKey.class, new PublicKeyInstanceCreator()).create(); 
```

现在 Gson 似乎运行良好，但是`RSAPublicKey`通过解析 Json 文件创建的`RSAPublicKey`对象是从`PublicKeyInstanceCreator`ie 返回的任何对象，即在反序列化过程中字段永远不会更改。如何让 Gson 正确返回我想要的对象？

# jquery - AJAX Web 应用程序 - 需要从 DOM 中删除 pageGuide.js 插件

> ID：11353561
> 
> 赞同：0
> 
> 时间：2012-07-05T22:49:18.463
> 
> 标签：jquery, ajax

我正在寻找一些关于如何从 DOM 中删除整个插件的想法。不幸的是，插件创建者并没有给我留下一个简单的方法来删除所有的事件和元素。我真的很想使用该插件，但是当我加载一个新页面（通过 AJAX）时，我需要销毁 pageGuide.js 事件和 DOM 创建的元素。

这是插件页面的链接：http: [//tracelytics.github.com/pageguide/](http://tracelytics.github.com/pageguide/)

任何帮助/想法将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:54:54.790

如果有人想在 AJAX 网络应用程序中使用它，我最终解决了这个问题。

首先，您需要搜索 pageguide.js 并将所有“.live”更改为“.bind”

接下来找到这行代码：`ns.setAttribute("type", "text/css");`

接下来在它下面添加这一行：`ns.setAttribute("class", "pageGuideStyle");`

最后在调用“init”函数之前将其添加到您的代码中：

```
$('#tlyPageGuideWrapper, .pageGuideStyle').remove();
$('.tlypageguide-open').removeClass();
$('.tlypageguide_toggle, .tlypageguide_close,#tlyPageGuide > li, #tlyPageGuideMessages, a.tlypageguide_fwd, a.tlypageguide_back, .pageGuideStyle, body.tlypageguide-open, body.tlypageguide_close').unbind(); 
```

您需要在所有页面加载之前调用此代码。我最终制作了一个全局变量并在加载函数中调用它。

谢谢，米奇

# javascript - 使用 Rails 定期轮询数据库视图更新而不刷新

> ID：11353564
> 
> 赞同：3
> 
> 时间：2012-07-05T22:49:43.827
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, polling

我们正在为所有外部服务器构建状态板。我们数据库中的每个条目都引用了操作系统、软件版本等。这些值是不断变化的，我们希望页面更新我们数据库中发生变化的特定 div。我们已经编写了一个轮询机制，每 20 秒检查一次更改，并且数据库中的条目会立即更新。但是，只有刷新页面才能看到它们。

Rails 是否有内置机制允许我们定期检查数据库并根据新更改更新视图而无需刷新页面？我应该使用 Jquery AJAX 命令吗？如果是这样，我将如何实施？

我们将 Rails 3.2.1、Ruby 1.9.2 与 jquery 和 twitter-bootstrap 结合使用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:27:18.843

我知道这是一个迟到的回复，但我偶然发现它并觉得它应该有一个答案。

您可以尝试[这个](http://railscasts.com/episodes/229-polling-for-changes)railscast，因为它使用 ajax 轮询数据库中的更改并动态更新视图

我个人正在寻找这种方法的替代方法，但它可能对任何找到它的人有用

# mysql - 是否需要将 MySQL 用户添加到 MySQL“系统”？

> ID：11353565
> 
> 赞同：1
> 
> 时间：2012-07-05T22:49:44.623
> 
> 标签：mysql, sql

是否需要将 MySQL 用户添加到 MySQL“系统”？

我正在学习 MySQL 基础知识，但这个问题刚刚出现。原因如下：

```
:~$ mysql -u johndoe
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 50
Server version: 5.5.24-0ubuntu0.12.04.1 (Ubuntu)

Copyright (c) 2000, 2011, Oracle and/or its affiliates. All rights reserved.   

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> SELECT User();
+-------------------+
| User()            |
+-------------------+
| johndoe@localhost |
+-------------------+
1 row in set (0.00 sec)

mysql> quit
Bye 
```

当然我没有设置一个名为johndoe的用户，但似乎我可以用任何用户名进入mysql。我并不是说我会看到任何数据库，因为它可能没有设置任何数据库，例如 johndoe 可以做某事。

所以我的问题最后是：这是真的还是我看错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:57:29.963

实际上，MySQL 以匿名用户 (''@localhost) 的身份连接您，因为用户“johndoe@localhost”不存在。运行“SELECT CURRENT_USER()”，你会明白我的意思，此外，如果你检查 mysql 数据库中的用户表，你会发现 host='localhost' 和 user='' 的行。

# javascript - 如何使ajax加载页面中的链接加载其他页面？

> ID：11353566
> 
> 赞同：1
> 
> 时间：2012-07-05T22:49:46.667
> 
> 标签：javascript, jquery, ajax, dynamic

问题：动态加载页面中的链接不会动态加载其他页面。

在我的索引页面上，我有如下链接：

```
<li><a class="page_one" title="page_one" href="page_one.html">Page One</a></li>
<li><a class="page_two" title="page_two" href="page_two.html">Page Two</a></li> 
```

这些使用脚本dynamicpage.js（如下）将外部页面中的内容动态加载`<div id="guts">`到索引页面上具有相同ID的div中，除非javascript关闭，否则它将简单地正常加载外部页面。

这是javascript：

```
 $(function() {

    var newHash      = "",
        $mainContent = $("#main-content"),
        $pageWrap    = $("#page-wrap"),
        $el;

    $(".dyn").delegate("a", "click", function() {
        window.location.hash = $(this).attr("href");
        return false;
    });

    $(window).bind('hashchange', function(){

        newHash = window.location.hash.substring(1);

        if (newHash) {
            $mainContent
                .find("#guts")
                .fadeOut(200, function() {
                    $mainContent.hide().load(newHash + " #guts", function() {
                        $mainContent.fadeIn(200, function() {
                            $pageWrap.animate({

                            });
                        });
                        $(".dyn a").removeClass("current");
                        $(".dyn a[href="+newHash+"]").addClass("current");
                    });
                });
        };

    });

    $(window).trigger('hashchange');

}); 
```

索引页面上的链接运行良好，但例如，如果我想从动态加载的 page_1.html 链接到 page_2.html，page_2 正在正常加载，而不是将 url 更新为 /#page_2.html

我尝试将 .delegate 更改为 .live，但这完全停止了它的工作。

谁能把我推向正确的方向？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:10:58.113

试试这个：

```
$("#main-content").delegate(".dyn a", "click", function() {
    window.location.hash = $(this).attr("href");
    return false;
}); 
```

原因如下：你的功能

```
$(".dyn").delegate("a", "click", function() {
    window.location.hash = $(this).attr("href");
    return false;
}); 
```

在匹配元素中的`click`退出元素和新元素上正确绑定处理程序。因此，如果您要向元素添加新标签，脚本将按预期工作。`<a>``.dyn``<a>``.dyn`

但是，该`$mainContent.hide().load(...`方法将 的内容替换为`$("#mai-content")`新加载的内容，这意味着您已经替换了原始内容，`$(".dyn")`因此委托函数现在正在查看已删除的`.dyn`.

将您的委托匹配移动到`$("#main-content")`，您将维护一个活动的“实时”或“委托”观察者，它将正确地将您定义的点击处理程序绑定到新`.dyn a`元素。

# mysql - Oracle SQLDeveloper 中的 MySQL 过程

> ID：11353567
> 
> 赞同：1
> 
> 时间：2012-07-05T22:49:47.417
> 
> 标签：mysql, delimiter, procedure

我是 MySQL 新手，我正在尝试创建一个过程。我连接到数据库并使用 Oracle SQLDeveloper 处理数据。

当我尝试将以下内容作为脚本执行时......

```
DELIMITER // 
CREATE PROCEDURE GetAllProducts() 
BEGIN 
SELECT * FROM products; 
END // 
DELIMITER ; 
```

我收到以下错误...

```
Error starting at line 1 in command:
DELIMITER //
Error at Command Line:1 Column:0
Error report:
SQL Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'DELIMITER //' at line 1 
```

我正在使用最新版本的 Oracle SQL Developer 以及 las MySql 版本（两者都安装了）

有人可以帮助我如何使用分隔符吗？

谢谢，狮子座

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:01:36.977

您的代码是 100% 正确的。DELIMITER 不是 MySQL 命令，该命令必须得到客户端的支持。DELIMITER 帮助客户端解析脚本中的语句。

您的过程有一个语句，因此您可以在没有 BEGIN...END 和 DELIMITERS 的情况下重写它，例如 -

```
CREATE PROCEDURE GetAllProducts() 
SELECT * FROM products; 
```

您也可以尝试其他支持 DELIMITER[的客户端：mysql - MySQL 命令行工具](http://dev.mysql.com/doc/refman/5.5/en/mysql.html)、GUI 工具 - [dbForge Studio for MySQL](http://www.devart.com/dbforge/mysql/studio/)（免费快递版）等。

# ruby-on-rails - 最新版本的 ruby 1.9.3 和 rails 3.2.6 文档，可以作为包下载

> ID：11353579
> 
> 赞同：1
> 
> 时间：2012-07-05T22:50:59.420
> 
> 标签：ruby-on-rails, ruby, documentation

我知道它可以在本地构建并针对 yard 服务器运行，但我不想在“本地运行另一台服务器”（YASL）:)

是否有将这些打包在一起并允许在不上网的情况下在本地下载和浏览它们的站点？

谢谢。

巴拉特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:31:56.423

几乎：您可以在[railsapi.com](http://railsapi.com/doc/rails-v3.2.6_ruby-v1.9.2/rdoc.zip)获得与 Ruby 1.9.2 捆绑的 Rails 3.2.6 。如果您需要最新的 1.9.3 文档，请查看最新的 1.9.3 并查看[sdoc github 页面](https://github.com/voloko/sdoc/)（railsapi.com 背后的 gem）。它描述了如何轻松构建文档并合并多个文档。

# claims-based-identity - 服务堆栈 API 和 ThinkTecture.IdentityServer

> ID：11353581
> 
> 赞同：3
> 
> 时间：2012-07-05T22:51:22.190
> 
> 标签：claims-based-identity, sts-securitytokenservice

我们的团队正在开发我们的第一个 Web api 并使用 Service Stack 来公开我们的 REST 服务。我们知道我们需要安全性，因此这些 API 端点对全世界都是不可用的。我们还知道，我们需要能够根据调用服务的用户过滤这些 API 返回的数据。这些服务将由我们的移动应用程序和我们的桌面网站使用。用户存储库位于 SQL Server 的用户表中，但不是 ASP.NET 成员资格提供程序实现的一部分。Thinktecture IdentityServer 或 IdentityModel 是保护我们的 API 和通过 OAuth 访问声明的合适选择吗？此外，是否有一些使用 REST 服务实现这些的综合示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T17:37:04.847

是的。这足以满足我们的需求:)

# ruby-on-rails - 保存模型时删除关联记录

> ID：11353582
> 
> 赞同：4
> 
> 时间：2012-07-05T22:51:22.437
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我正在运行 ActiveRecord 3.2.6。鉴于我有这些模型定义：

## 我的发票模型

```
class Invoice < ActiveRecord::Base
  has_many :items, :autosave => true, :dependent => :delete_all
  attr_accessible :recipient_email

  # This is just a simple wrapper with allows me to build multiple
  # items at once and to specify them as a Hash instead of Item.new.
  def items=(ary)
    super ary.map{|item| item.is_a?(Hash) ? items.build(item) : item}
  end
end 
```

## 我的项目模型

```
class Item < ActiveRecord::Base
  belongs_to :invoice

  attr_accessible :amount, :description, :invoice_id, :value
end 
```

我的目标是将发票项目直接保存在模型中。当新创建发票时，这没有问题。一个电话`Invoice#save!`，一切都保存下来。

```
> i = Invoice.new(:recipient_email => "foobar@example.org")
> i.items = [{amount: 10, description: "Bottles of Milk", value: 0.40},
  {amount: 1, description: "Shipping fee to Antarctica", value: 217.38}]
> i.save!
  SQL (23.5ms)  INSERT INTO "invoices" [...]
  SQL (0.3ms)  INSERT INTO "items" [...]
  SQL (0.2ms)  INSERT INTO "items" [...]
 => true 
```

但是，当我尝试更新`Invoice`已存在的项目时，它会在我保存新项目之前删除旧项目。

```
# Load invoice ID 1, with two items: ID 1 and ID 2.
> i = Invoice.find(1)

# It deletes the old items here
> i.items = [{amount: 10, description: "Less buggy objective relational mappers", value: 1337.00}]
  SQL (0.8ms)  DELETE FROM items WHERE id IN (1, 2)

# But it should delete the new items here, before inserting the new items,
# wrapping everything in a transaction.
> i.save!
  SQL (1.0ms)  INSERT INTO "items" [...]
   (192.6ms)  commit transaction 
```

我如何告诉 ActiveRecord 仅在`Invoice#save!`被调用时才删除旧项目？或者这是 ActiveRecord 中的错误？

## 编辑：我的问题 - 澄清

我不希望在`DELETE`分配项目时运行查询 ( `i.items = ...`)，但在保存包含项目的发票时 ( `invoice.save!`)。它应该将旧项目标记为删除，将新项目标记为插入，然后在`invoice.save!`. 这可能与 ActiveRecord 吗？

## 编辑2：进一步澄清

由于有些人没有正确回答问题，因此需要进一步澄清。我必须承认，这很复杂。所以这就是实际发生的事情和我想要发生的事情之间的区别。

### 我想要的是

这*不会*发生。我*希望*它发生。这完全是虚构的。将其与上面的清单进行比较以查看差异。

```
# (1) Load invoice ID 1, with two items: ID 1 and ID 2.
> i = Invoice.find(1)

# (2) Assign new items, delete the old ones. New stuff exists in memory, not in database
> i.items = [{amount: 10, description: "Less buggy objective relational mappers", value: 1337.00}]

# (3) Save everything to database. Run queries.
> i.save!
   (0.0ms) begin transactions
  SQL (0.8ms)  DELETE FROM items WHERE id IN (1, 2)
  SQL (1.0ms)  INSERT INTO "items" [...]
   (192.6ms)  commit transaction 
```

### 实际发生了什么

查询在`DELETE`点运行`(2)`。但它应该在点运行`(3)`。（与上面的列表比较）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T12:45:14.650

由于您想在分配中附加操作，我相信这应该有效：

```
 def items=(ary)
    super(ary.map{|item| item.is_a?(Hash) ? items.build(item) : item} + self.items)
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:35:21.343

它将删除旧项目，因为您将关联配置为自动保存

```
has_many :items, :autosave => true, :dependent => :delete_all 
```

删除自动保存并重试，它会工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-26T15:39:13.660

您可以使用该选项配置您的关联，`autosave: true`并使用[mark_for_destruction](https://api.rubyonrails.org/classes/ActiveRecord/AutosaveAssociation.html#method-i-mark_for_destruction)指定要销毁的每个项目`save`。

考虑到您的第二次编辑，您可以执行以下操作：

```
# (1) Load invoice ID 1, with two items: ID 1 and ID 2.
> i = Invoice.find(1)

# (2) Mark the old items to be destroyed on save. They are still in memory and in the database for now.
> i.items.each(&:mark_for_destruction)

# (3) Assign new items. New stuff exists in memory, not in database.
> i.items.build([{amount: 10, description: "Less buggy objective relational mappers", value: 1337.00}])

# (4) Delete the items which has been mark for destruction. Save everything to database. Run queries.
> i.save!
   (0.0ms) begin transactions
  SQL (0.8ms)  DELETE FROM items WHERE id IN (1, 2)
  SQL (1.0ms)  INSERT INTO "items" [...]
   (192.6ms)  commit transaction 
```

# android - aexp.intent.action 有什么特别之处吗？

> ID：11353583
> 
> 赞同：1
> 
> 时间：2012-07-05T22:51:25.453
> 
> 标签：android, plugins

我发现的每个在 android 中实现插件的例子似乎都使用“aexp.intent.action”。作为他们发明的意图字符串的前缀。

这个字符串是不是很特别，还是每个人都只是简单地复制[My Life with Android](http://mylifewithandroid.blogspot.com/2010/06/plugins.html)博客条目并以同样的方式做插件？

我只是在这里很好奇:-)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:17:17.500

> 我发现的每个在 android 中实现插件的例子似乎都使用“aexp.intent.action”。作为他们发明的意图字符串的前缀。

嗯，好的。

> 那根弦是不是很特别

不。

> 是不是每个人都只是简单地复制 My Life with Android 博客条目并以同样的方式做插件？

不。

*您看到的*每个示例显然都是“简单地使用 Android 博客条目复制 My Life 并以相同的方式执行插件”。而且，这些其他示例的作者可能没有在生产中使用该操作字符串——您希望您的插件使用*唯一的*操作字符串，以便可以将它们识别为您的主机应用程序的插件（而不是其他人的应用程序）。

生产级插件不一定使用该博客文章中的任何内容，更不用说操作字符串了。并不是说那篇博文有什么问题，但它远非在 Android 中实现插件的唯一方法。

# c# - ServiceLocator.Current.GetInstance 可以返回 null 吗？

> ID：11353585
> 
> 赞同：2
> 
> 时间：2012-07-05T22:51:34.567
> 
> 标签：c#, wpf, mvvm, nullreferenceexception, service-locator

在我们的许多观点中，我都有这段代码（或类似的）：

```
private IEventAggregator eventAggregator;

Constructor()
{
    eventAggregator = ServiceLocator.Current.GetInstance<IEventAggregator>();
    ...
} 
```

我从[这篇](http://commonservicelocator.codeplex.com/workitem/9676)文章中读到 ServiceLocator.Current 可以抛出 NullReferenceException （构造函数上的坏事）但我想知道 GetInstance<>() 方法是否可以返回 null （或其他一些不一致的对象）使得 eventAggregator 以后在其他方法中使用很危险.

***注意：我对 MVVM 和 WPF 很陌生***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:14:05.043

如果服务定位器为空，则可能存在未正确设置统一的内容。在正常情况下，恕我直言，这应该不是问题。

话虽如此，我倾向于使用稍微不同的方式来访问服务定位器。

例如，如果我有一个名为 MyClass 的类，我将使用统一依赖注入来传递服务定位器（也称为统一中的容器）。而且我倾向于使用unity的Resolve功能而不是GetInstance，但是它们是一样的。

也有人说服务定位器是一种反模式，但我不认同这种想法。 [http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)

例子

```
public MyClass(IUnityContainer container)
{
    var ea = container.Resolve<IEventAggregator>();
} 
```

# python - Django 模型日期字段中的可选年/月/日

> ID：11353586
> 
> 赞同：7
> 
> 时间：2012-07-05T22:51:39.170
> 
> 标签：python, django, datetime, date, django-models

我希望 Django 模型有一个日期字段，其中年、月和日都是可选的。示例值可以像 一样通用，也可以`2008`像`May 10, 2008`. 是否可以定义 a`DateField`以这种方式运行？还是我最好将年/月/日定义为单独的整数，像这样？

```
model Book(models.Model):
    publication_year = models.IntegerField(blank=True, null=True)
    publication_month = models.IntegerField(blank=True, null=True)
    publication_day = models.IntegerField(blank=True, null=True) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T23:07:43.927

[https://github.com/dracos/django-date-extensions](https://github.com/dracos/django-date-extensions)上的 django-date-extensions （由我专门为此目的）包含一个 ApproximateDate 对象来处理可能没有一个月或一天的日期。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:07:15.097

Django 类 DateTimeField 基于 python datetime.datetime 类，其中年、月和日是强制性的：

```
datetime.datetime(year, month, day[, hour[, minute[, second[, microsecond[, tzinfo]]]]]) 
```

取而代之的是，我将使用 Django DateTimeField 和一个布尔值，而不是定义三个整数字段，它告诉我我应该只取年份还是整个日期。

# c# - 文本框值转换为 int 数组

> ID：11353587
> 
> 赞同：2
> 
> 时间：2012-07-05T22:51:43.360
> 
> 标签：c#, winforms, visual-studio-2010, visual-studio, textbox

我的表格如下所示：

[http://content.screencast.com/users/TT13/folders/Jing/media/7689e48c-9bd6-4e22-b610-656b8d5dcaab/2012-07-06_0347.png](http://content.screencast.com/users/TT13/folders/Jing/media/7689e48c-9bd6-4e22-b610-656b8d5dcaab/2012-07-06_0347.png)

`x, y, A,B,C`是矩阵。texboxes 有权`x`被命名为`x1,...,x6`texboxes 有权`A`被命名为

```
a11,...,a16
...
a61, ... ,a66 
```

它们都是整数。我想要做的是，将这些值放入数组中，例如：

```
x=(20,...,756); 
```

和 A 成二维数组，如`a[1][1]=932`... `a[6][6]=666`。

如果是，如何？与组框？我不知道如何解决这个问题。提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:24:00.700

看到您拥有嵌入矩阵位置的名称的控件，我们可以
在这里编写没有错误检查，我假设数字始终是整数......

```
 int[] xMatrix = new int[6];
    int[,] aMatrix = new int[6,6];

    foreach (Control control in this.Controls) 
    { 
        if (control is TextBox) 
        { 
            string pos = control.Name.SubString(1);
            if(control.Name.StartsWith("a"))
            {
                int matrixPos = Convert.ToInt32(pos) ;
                int x = (matrixPos / 10) - 1;
                int y = (matrixPos % 10) - 1;
                aMatrix[x,y] = Convert.ToInt32(control.Text);
            }
            else if(control.Name.StartsWith("x")
            {
                int arrayPos = Convert.ToInt32(pos) - 1;
                xMatrix[arrayPos] =  Convert.ToInt32(control.Text);
            }
        } 
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:22:49.617

您可以通过编程方式添加它们，同时将它们存储在矩阵中，而不是使用设计器手动将文本框放置在表单上。

```
const int N = 6;

TextBox[,] _matrixATextBoxes = new TextBox[N, N];

public MyForm() // Form Constructor.
{
    InitializeComponent();
    SuspendLayout();
    int x = 50; // Horizontal position of first TextBox.
    for (int ix = 0; ix < N; ix++) {
        int y = 80; // Vertical position of first TextBox.

        for (int iy = 0; iy < N; iy++) {
            var tb = new TextBox();
            tb.Location = new Point(x, y);
            tb.Size = new Size(23, 40);
            _matrixATextBoxes[ix, iy] = tb;
            Controls.Add(tb);
            y += 30; // Vertical distance
        }
        x += 50; // Horizontal distance
    }
    ResumeLayout();
} 
```

现在您可以轻松阅读内容

```
int a[,] = new int[N, N];
for (int ix = 0; ix < N; ix++) {
    for (int iy = 0; iy < N; iy++) {
        int value;
        Int32.TryParse(matrixATextBoxes[ix, iy].Text, out value);
        a[ix, iy] = value;
    }
} 
```

（未测试。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T23:02:33.923

你可以做这样的事情（假设你有一个包装文本框的父控件）。在我的例子中，它是一个 id 为“pnlMain”的 asp:Panel 控件：

```
// Collection to hold your matrices
List<List<int>> myMatrices = new List<List<int>>();
// Iterate through all rows and columns
for (int i = 0; i <= 60; i = i + 10)
{
    var matrix = new List<int>();
    for (int j = 1; j <= 6; j++)
    {
        // Dynamically search parent control for child textboxes
        var txt = pnlMain.FindControl(string.Format("{0}{1}", i == 0 ? "x" : "a", i + j)) as TextBox;
        if (txt != null)
        {
            int value = 0;
            int.TryParse(int.Parse(txt), out value);
            matrix.Add(value);
        }
    }
    myMatrices.Add(matrix);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T23:05:32.457

由于您已经固定了文本框（也就是说，您不是动态创建它们），您可以转到表单定义并为**Tag**属性赋值。

从表单的左侧开始，它看起来像这样：

```
x.1 x.2 x.3 x.4 x.5 x.6
1.1 1.2 1.3 1.4 1.5 1.6
2.1 2.2 2.3 2.4 2.5 2.6
... 
```

然后，您将遍历所有检索它的文本框，例如：

```
 string textboxMatrix;
        int textboxValue;

        foreach (Control control in this.Controls)
        {
            if (control is TextBox)
            {
                textboxMatrix = ((TextBox)control).Tag.ToString();
                textboxValue = Convert.ToInt32(((TextBox)control).Text);

                if (textboxMatrix.StartsWith("x"))
                {
                    int xPosition = Convert.ToInt32(textboxMatrix.Split('.')[1]);

                    x[xPosition] = textboxValue;
                }
                else
                {
                    int aX = Convert.ToInt32(textboxMatrix.Split('.')[0]);
                    int aY = Convert.ToInt32(textboxMatrix.Split('.')[1]);

                    A[aX, aY] = textboxValue;
                }
            }
        } 
```

**或者**，带有名称（如您所说）：

```
 string textboxMatrix;
            int textboxValue;

            foreach (Control control in this.Controls)
            {
                if (control is TextBox)
                {
                    textboxMatrix = ((TextBox)control).Name;
                    textboxValue = Convert.ToInt32(((TextBox)control).Text);

                    if (textboxMatrix.StartsWith("x"))
                    {
                        int xPosition = Convert.ToInt32(textboxMatrix.ToCharArray()[1]);

                        x[xPosition] = textboxValue;
                    }
                    else
                    {
                        int aX = Convert.ToInt32(textboxMatrix.ToCharArray()[1]);
                        int aY = Convert.ToInt32(textboxMatrix.ToCharArray()[2]);

                        A[aX, aY] = textboxValue;
                    }
                }
            } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T23:25:45.993

你不能只手动创建数组吗？

```
int[] X = new int[] {x1.Value,x2.Value,x3.Value,x4.Value,x5.Value,x6.Value };
int[,] A = new int{ {a11.Value, a12.Value, a13.Value, a14.Value, a15.Value, a16.Value },
                    {a21.Value, a22.Value, a23.Value, a24.Value, a25.Value, a26.Value },
                    {a31.Value, a32.Value, a33.Value, a34.Value, a35.Value, a36.Value },
                    {a41.Value, a42.Value, a43.Value, a44.Value, a45.Value, a46.Value },
                    {a51.Value, a52.Value, a53.Value, a54.Value, a55.Value, a56.Value },
                    {a61.Value, a62.Value, a63.Value, a64.Value, a65.Value, a66.Value } }; 
```

虽然它没有实现任何巧妙的技巧，但它非常简单快捷。而且因为一旦你开始使用它，文本框的数量就不太可能改变，所以像这样硬编码应该没有问题。

此外，您应该使用方形数组 [,] 而不是锯齿状数组 [][] 因为锯齿状数组在每一行上可以有不同的长度，这在矩阵中是不可取的，并且将其声明为方形会更清楚。

# c# - 如何让我的 json WCF 工作

> ID：11353590
> 
> 赞同：1
> 
> 时间：2012-07-05T22:51:53.627
> 
> 标签：c#, json, wcf, .net-4.0, wcf-rest

我挣扎了很多，花了很多时间但无法让它工作，现在花了几个小时后，我能够看到元数据但无法成功调用操作。以下是步骤和代码。

1.  创建 WCF 服务库项目。

现在编码。

**服务合同和数据合同**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;

using System.Text;

namespace JsonWCFTest
{
    [ServiceContract]
    public interface IJsonService
    {
        [OperationContract]
        [WebInvoke(Method = "GET",ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare,UriTemplate = "data/{id}")]
        Product GetProduct(string id);
    }

    [DataContract(Name = "product")]
    public class Product
    {
        [DataMember(Name = "id")]
        public string Id { get; set; }
    }

} 
```

**服务。**

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;

namespace JsonWCFTest
{
    public class JsonService:IJsonService
    {
        public Product GetProduct(string id)
        {
            return new Product {Id = " you have entered " + id};
        }
    }
} 
```

网络配置

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true"/>
  </system.web>  
  <system.serviceModel>
    <serviceHostingEnvironment>
      <serviceActivations>
        <add relativeAddress="service.svc" service="JsonWCFTest.JsonService"/>
      </serviceActivations>
    </serviceHostingEnvironment>
    <services>
      <service name="JsonWCFTest.JsonService" behaviorConfiguration="jsonTestServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost" />
          </baseAddresses>
        </host>
        <endpoint address="jsonTestEndPoint" behaviorConfiguration="jsonTestEndPointBehavior" 
                  binding="webHttpBinding" contract="JsonWCFTest.IJsonService"/>        

        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>      
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="jsonTestServiceBehavior">       
          <serviceMetadata httpGetEnabled="true"/>       
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="jsonTestEndPointBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel>

<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup></configuration> 
```

当我使用这个网址时

> `http://localhost/service.svc/data/1`

它在 Internet Explorer 中给了我以下错误

> “/”应用程序中的服务器错误。无法找到该资源。说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/service.svc/data/1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:18:02.757

您正在连接到错误的地址。使用您设置的配置文件，您应该连接到

```
http://localhost/jsonTestEndPoint/data/1 
```

您需要使用`BaseAddress`++`EndpointAddress`来`FunctionAddress`获取完整的 url。

* * *

我可能有点生疏了，如果上面的地址不起作用，那么地址将是

```
http://localhost/service.svc/jsonTestEndPoint/data/1 
```

# java - 使用托管 bean 和 javascript 创建元素

> ID：11353594
> 
> 赞同：0
> 
> 时间：2012-07-05T22:52:44.363
> 
> 标签：java, javascript, jquery, jsf, jsf-2

我的问题有点复杂，我有一个托管 bean，可能是一个会话范围的 bean，现在在这个 bean 中，我检索存储在数据库中的有关某些元素（它们的宽度、高度、它们的 X、Y 坐标等）的信息，但是这些元素的编号是动态存储的，这意味着它们没有一定的编号，而且它们还可能嵌套了另一个元素。

就像存储 div 的位置和坐标，以及其中的 p 元素以及它们的信息一样，现在我想使用托管 bean 来相应地创建元素。

1-我应该使用什么？（现在我正在使用 JSF 2 Facelets 和 Javascript/jQuery）。

2-使用您推荐的工具的正确方法是什么。

我正在 JSF 页面中寻找类似的东西

这可以使用 jsf 和 javascript/jquery 来完成吗？

```
for(every i in elements.div)
{
     create a div element
    then
     for(every i in div.p )
     create a p element in that div
     width of p element = p.width
    .
    .
    .
    load all element info 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:43:31.720

您可以使用组件绑定。在您的 JSF 页面上，您引用了您的支持 bean，它提供了准备好的 JSF 树组件。

```
<p>Here comes a dynamic content</p>
<h:panelGroup binding="#{myBackingBean.generatedElements}"/> 
```

在您的支持 bean 中，您可以根据需要创建和嵌套元素

```
...
public class MyBackingBean {
...

private HtmlPanelGroup generatedElements = new HtmlPanelGroup();

public void init() {
     for (Element e : myElements) {
         // Take any element type you want
          HtmlOutputText subElement = new HtmlOutputText();
          subElement.setValue(e.getText());
          generatedElements.getChildren().add(subElement);
     }
} 
```

您还可以使用`subElement.setValueExpression`方法来构建具有由 JSF 表达式定义的动态属性的组件。例如国际化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:47:29.207

您可能想看看[https://vaadin.com/](https://vaadin.com/)，这无疑是一种不同的方法，但可能会做您真正想要的，甚至更多。

**编辑**
由于您无法更改框架（这很容易理解），请查看[How to create dynamic JSF form fields](https://stackoverflow.com/questions/3510614/how-to-create-dynamic-jsf-1-2-form-fields)。基本上所有必要的步骤都列在那里。您可以采用类似的方法来创建`<div>`和`<p>`标记而不是表单元素。

# web2py - 多个登录页面

> ID：11353595
> 
> 赞同：0
> 
> 时间：2012-07-05T22:52:47.293
> 
> 标签：web2py

我的问题是这个。我有几个网址，您可以从中实际登录。问题是，如果我点击登录并且它无效，它会将我带到一个不同的页面，该页面显然没有定义。

为了描述情况，我在 /order/login... 下有登录页面，如果有任何问题，它会不断将我重定向到 /default/login - 我不知道为什么？

另一个问题是我确实想为某人想要访问受限制的 url 时定义一个默认登录页面。

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T02:43:14.363

`auth.settings.login_url`是登录页面的 URL，默认设置为 /default/user/login。如果您的登录 URL 是 /order/login，那么假设“order”是控制器，“login”是函数，只需执行以下操作：

```
auth.settings.login_url = URL('order', 'login') 
```

如果有人随后尝试访问需要登录的 URL，他们将被重定向到该 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:06:40.183

使用 HTTP-REFERRER 获取用户所在的 URL 并重定向到它。我不知道如何在 Web2py 中做到这一点，但我希望这能为您指明正确的方向。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T12:17:52.647

答案很简单：

> auth.settings.controller = '订单'

它可以在控制器或 db.py 中定义为内联。

它也可以进入 Auth 的初始化

> 身份验证（数据库，控制器 =“订单”）

# python - 使用python函数比较列表中的行和列

> ID：11353599
> 
> 赞同：1
> 
> 时间：2012-07-05T22:53:25.043
> 
> 标签：python, list, compare, symmetry

> **可能重复：**
> [Python - 确定列表是否对称的算法](https://stackoverflow.com/questions/11228939/python-algorithm-to-determine-if-a-list-is-symmetric)

我需要帮助编写一个 Python 函数 - 对称的，它接受一个大小为 n 的列表（它是一个方阵）作为输入，它检查第一行与第一列相同，第二行与第二列相同，并且以此类推，如果元素相同则返回布尔值 True，否则返回 false。该列表可以包含整数或字符串。

```
def symmetric(my_list):

my_list = [[1, 2, 3],
           [2, 3, 4],
           [3, 4, 1]] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T22:58:17.287

这适用于 Python2

```
my_list == map(list, zip(*my_list)) 
```

`zip(*some_2d_list)`是一个相当有名的习语，当`some_2d_list`被解包和处理时，`zip`它具有转置行和列的效果

不幸的是 zip 返回一个元组列表，因此有必要将它们转换为列表。这是`map(list, ...)`什么

这可能看起来很浪费，因为相等性测试将对不在对角线上的每一对进行两次比较，但这是在 C 级别完成的，因此比使用显式循环和进行最少比较次数要快得多。

如果是家庭作业，我建议您可能应该使用嵌套循环

编辑：在 Python3 中，`map(...)`返回一个地图对象，您可以通过使用获得 Python2 行为`list(map(...))`

编辑：我认为在 Python3 中，这更好

```
all(i==j for i,*j in zip(my_list ,*my_list)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:15:08.187

```
import numpy as np
# convert the 2d list into an ndarry
x = np.array(my_list)
# test if x is identical to its transpose
isSymmetric = (x.T == x).all() 
```

`isSymmetric`然后告诉你结果。

# javascript - 将文本转换为 javascript 对象或数组

> ID：11353604
> 
> 赞同：1
> 
> 时间：2012-07-05T22:53:58.117
> 
> 标签：javascript, arrays

嗨，我有一组由 php 检索并显示在两个隐藏文本字段中的单词，如下所示：

**标题：**

```
Red Apple, Grapes, Green Apple, Orange 
```

**文件名：**

```
red_apple5, grapes1, green_apple2, orange3 
```

有没有一种方法可以将其转换为类似这样的对象或数组：

```
T = {"Red Apple" , "Grapes" , "Green Apple" , "Orange"}

S = {"red_apple5" , "grapes1" , "green_apple2" , "orange3"} 
```

我想将它们中的每一个附加到一个列表中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T22:55:41.283

```
var array = 'Red Apple, Grapes, Green Apple, Orange'.split(', '); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T22:56:56.990

您可以使用 javascript 的 split() 方法来拆分字符串：

```
var str = "Red Apple, Grapes, Green Apple, Orange";
var arr = str.split(', ');
console.log(arr) 
```

要将这些附加到列表中，您必须使用 forEach() 遍历新创建的数组，然后为每个项目创建一个新的 li。然后，您可以将 li 作为子元素附加到 ul。

```
var list = document.getElementById("#IdOfYourList")
arr.forEach(function(a) {
    var newLi = document.createElement("li")
    newLi.innerHTML = a;
    list.appendChild(newLi);
}); 
```

另请注意，IE < 8 中不支持 forEach，但可以在此处将其实现到 Array 原型中： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/forEach)

参考： [https ://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:56:50.190

使用[.split()](http://www.w3schools.com/jsref/jsref_split.asp)。

```
var str = "Red Apple, Grapes, Green Apple, Orange";
var array = str.split(", "); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T23:07:54.877

假设您要创建一个有效的对象，请使用以下代码作为参考。*注：出于说明目的进行了一些修改。*

**HTML**：

```
<div id="output"></div> 
```

**jQuery** :

```
var titles = 'Red Apple, Grapes, Green Apple, Orange'.split(', ');
var fileNames = 'red_apple5, grapes1, green_apple2, orange3'.split(', ');

var newObject = {};

for(var i=0; i < titles.length; i++){
    newObject [titles[i]] = fileNames[i];
}

$('#output').text(JSON.stringify(newObject)); 
```

演示：http: [//jsfiddle.net/GHgsT/](http://jsfiddle.net/GHgsT/)

上面的代码循环遍历`titles`数组，然后将`titles[index]`值映射为对象的属性（键），并将相应的`fileNames[index]`值映射为属性的值。

# django - 在 django 中手动添加多对多字段（M2M）？

> ID：11353606
> 
> 赞同：3
> 
> 时间：2012-07-05T22:54:10.643
> 
> 标签：django, model, m2m

我的 django 模型项目中有一个 M2M 字段。在我看来，我想使用 update() 函数更新模型实例。我知道要更新其他普通字段，我们可以传递字段字典。但是如何将 M2M 字段传递给 update() 函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T23:14:41.797

[`add()`](https://docs.djangoproject.com/en/1.2/ref/models/relations/#django.db.models.fields.related.RelatedManager.add)您可以使用函数（在您的外部）轻松地将关系添加到 ManyToManyField `update()`：

```
blog.entries.add(post_1, post_2 ...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:20:24.453

更新 manytomany 字段，您需要获取子类的实例，然后应用更新函数。

y类：

```
 b = Text Field 
```

X 类：

```
 y = ManyToMany(y) 
```

代码：

```
for y in x.y.all():
    if y: meet you condition for which row to update
       y.update(b='update') 
```

我猜 django 确实知道支持 update() 和 M2M，因为它只是创建关联表以提供支持，它无法理解关联表中的哪一行要更新。

# java - Eclipse 不喜欢 @Override 注释

> ID：11353607
> 
> 赞同：2
> 
> 时间：2012-07-05T22:54:10.723
> 
> 标签：java, eclipse, annotations, overriding

在我从头开始创建我的项目、使用 maven 依赖控制并将所有旧文件复制到一个新项目之后，我发现 Eclipse 现在对 @Override 注释发誓。它说当这个注释存在时“方法必须覆盖超类方法”，如果不存在则保持冷静。使用快速输入时，它也不会自动插入此注释。

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T22:57:06.507

更改您的 maven pom 以强制执行 Java 6 或 7。我之前遇到过这个问题，如果您使用 pom 导入项目，它默认为 Java 1.5 JDK。

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.0.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>           
    </plugins>
</build> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:57:09.347

您很可能（想要）使用`@Override`从接口继承的方法。这仅从 Java 1.6 开始有效，您的 Eclipse 项目很可能设置为源级别 1.5（或者您正在运行非常过时的 1.5 JDK，但这不太可能）

# ios - UIManagedDocument：如何在后台执行保存

> ID：11353608
> 
> 赞同：0
> 
> 时间：2012-07-05T22:54:20.440
> 
> 标签：ios, core-data, nsfetchedresultscontroller, uimanageddocument

我有一个连接到 NSFetchedResultsController 的表视图，对应的 managedObjectContext 是 self.myDatabase.managedObjectContext：

```
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                    managedObjectContext:self.myDatabase.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil]; 
```

现在，每当用户刷新页面时，我都会执行以下代码。本质上，我创建了一个新线程来加载数据，然后在 MOC 安全线程上更新/保存新数据：

```
dispatch_queue_t fetchQ = dispatch_queue_create("fetcher", NULL);
dispatch_async(fetchQ, ^{        
    NSArray *data = [MyAPI myData];   

    [document.managedObjectContext performBlock:^{
        for (NSDictionary *info in data) {
            [MyEntity createOrUpdateGivenInfo:info andManagedObjectContext:self.myDatabase.managedObjectContext];
        }
    }];
});
dispatch_release(fetchQ); 
```

这很好用：我得到了更新，并且表格视图正确显示了所有内容。唯一的问题是 UI 没有响应，大概是因为我在主线程上进行了保存/更新。所以我研究了在后台线程上执行这个修改：

```
NSManagedObjectContext *backgroundContext = [[NSManagedObjectContext alloc] init WithConcurrencyType:NSPrivateQueueConcurrencyType];
    [backgroundContext setParentContext:self.myDatabase.managedObjectContext];

    [backgroundContext performBlock:^{      
      NSArray *data = [MyAPI myData];   

      for (NSDictionary *info in data) {
            [MyEntity createOrUpdateGivenInfo:info andManagedObjectContext:backgroundContext];
        }

      [backgroundContext save:nil];

      [document.managedObjectContext performBlock:^{
        [document updateChangeCount:UIDocumentChangeDone];
      }];
    }]; 
```

然而，虽然 UI 现在可以响应了，但我在表格视图中遇到了很多麻烦：表格没有更新现有条目，而是显示了一个额外的条目（不应该存在的重复项）。我认为这可能是因为这两个上下文没有同步/合并，但是通过阅读以前的 SO 帖子，我被引导相信我只需要在 backgroundContext 上调用 save ，然后在主 MOC 上调用 updateChangeCount 。如果我重新启动应用程序，一切都会再次正常 - 直到我再次刷新。

有没有人可以帮忙。我真的开始拔头发了。

如果你能解开这个谜，我会给你啤酒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T06:44:59.083

`UIManagedDocument`为您创建两个上下文： 的根上下文`NSPrivateQueueConcurrencyType`和 的子上下文`NSMainQueueConcurrencyType`。

像你一样连接你`NSFetchedResultsController`的`document.managedObjectContext`，因为那是你的主线程的上下文。

读/写在后台线程上*自动发生。*`UIManagedDocument`照顾那个。你不必担心它。

如果您需要自己做一些繁重的工作，您可以创建另一个托管对象`NSMainQueueConcurrencyType`并将`document.managedObjectContext`其设为父对象。

我读了你的代码，看起来这就是你所做的，这应该可以工作。这正是我在我的应用程序中的做法。但我看到其他几个人报告重复条目，`NSFetchedResultsController`怀疑存在框架错误。

如果你愿意分享你的项目，我会看看。

# java - 用于模拟方法调用

> ID：11353609
> 
> 赞同：3
> 
> 时间：2012-07-05T22:54:29.490
> 
> 标签：java, mockito

我正在测试一个类并想在其中模拟一个方法调用：

```
class B{

  method A();

  String method C();

} 
```

现在，我想测试 method`A`并模拟对 method 的调用`C`，因为 method`C`从 URL 读取输入。如何使用 Mockito 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T03:58:49.793

您在这里有很多选择。

可能是最简单的 - 您可以使用 mockito spy (http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#13)，这是一个可以存根某些方法的对象，而其他人保留他们现有的行为。

或者，您可以使用模拟，然后使用静态 doCallRealMethod 方法的存根方法 A，将 when 与 thenCallRealMethod 结合使用。

但在我看来，最好的办法是重构您的类，以便从 URL 读取的部分位于单独的类中。然后为 B 类编写一个单元测试，对单独的类使用模拟。然后为从 URL 读取的类编写一个集成测试。

如果这种方法不清楚，请在此处发表评论；我会尝试详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:05:11.093

实际上，当模拟一个对象（至少使用 mockito）时，你模拟了整个对象，而不使用一些不推荐的调用，这些调用都包含在他们的文档中：

> 像往常一样，您将阅读部分模拟警告：面向对象编程通过将复杂性划分为单独的、特定的 SRPy 对象来减少复杂性。部分模拟如何适应这种范式？好吧，它只是没有......部分模拟通常意味着复杂性已转移到同一对象上的不同方法。在大多数情况下，这不是您设计应用程序的方式。

所以可能有两种解决方案：

1 - 你重新设计你的类，使methodC在你的实际classB的一个聚合类中，之后你可以注入可以在测试的classB中完全模拟的新类。作为奖励，您可以更好地分离任务，因为所有外部世界交互都应该单独封装，以在外部源更改时帮助测试和维护它（但我不具体知道您的方法 A 和 C 做了什么）

2-在您的测试类中，您可以扩展 ClassB 并覆盖 methodC，这会导致一种手动模拟并且不需要任何模拟框架，但 mockito 部分警告仍然可以保留在这里。

希望这有帮助

# types - Ocaml 类型错误

> ID：11353610
> 
> 赞同：4
> 
> 时间：2012-07-05T22:54:48.210
> 
> 标签：types, int, ocaml

我正在学习 OCaml，这是我的第一种类型语言，所以请耐心等待：

为了练习，我试图定义一个函数“除法？” 它输入两个整数并输出一个布尔值，描述“int a”是否均匀划分为“int b”。在我的第一次尝试中，我写了这样的东西：

```
let divides? a b =
if a mod b = 0 then true
else false;; 
```

这给出了类型错误：

```
if a mod b = 0 then true
  ^
Error: This expression has type 'a option
       but an expression was expected of type int 
```

所以然后我试图扭转它，我这样做了：

```
let divides? a b =
 match a mod b with
  0 -> true
 |x -> false;; 
```

这没有多大帮助： `Characters 26-27 match a mod b with ^ Error: This expression has type 'a option but an expression was expected of type int`

然后我尝试了这个：

```
let divides? (a : int) (b : int) =
 match a mod b with
 0 -> true
|x -> false;; 
```

这引发了这一点：字符 14-15：让划分？(a : int) (b : int) = ^ 错误：此模式匹配 int 类型的值，但预期的模式匹配 'a 选项类型的值。

我现在对一般的类型系统感到非常困惑和沮丧。（我的第一语言是Scheme，这是我的第二语言。）任何解释我哪里出错的帮助以及如何解决它的建议都非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-05T23:00:21.187

问题是您不能在 OCaml 的变量/函数名称中使用问号字符`?`。它实际上是这样解析你的函数声明的：

```
let divides ?a b =
   if a mod b = 0 then true
   else false 
```

请注意，问号实际上是影响 的类型`a`，而不是函数名称的一部分。

这意味着`a`是一个[可选参数](http://caml.inria.fr/pub/docs/manual-ocaml/manual006.html#htoc38)，因此它被分配了`'a option`some的类型`'a`。

尝试从名称中删除问号。

# asp.net-mvc - 这是混合 FB Connect 和 ASP 会员的好方法吗？

> ID：11353613
> 
> 赞同：0
> 
> 时间：2012-07-05T22:55:14.110
> 
> 标签：asp.net-mvc, facebook, asp.net-membership, membership-provider

我喜欢使用 asp 会员，我需要在网站上集成 FB，所以我不想混合它们。这是我打算做的事情：

```
1) Implement method that get data from user FB account (firstname, lastname, username, email)
2) When I get the data, use asp membership CreateUser() method to make user in database
3) Send user temporary password to email 
```

我计划使用来自 fb 的电子邮件作为用户名，以便用户可以使用 fb 按钮或输入他们的电子邮件和密码登录。
**问题**
- 我有时会收到`null`来自 fb 的用户电子邮件；如果电子邮件可以为空，则我不能使用它来成为会员用户。
- 这是同时使用 memership 和 fb 的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:38:32.083

> 3) 发送用户临时密码到邮箱
> 
> 我计划使用来自 fb 的电子邮件作为用户名，以便用户可以使用 fb 按钮或输入他们的电子邮件和密码登录。

我不会给他们发密码。为什么，那只是通过不安全的电子邮件媒介发送的另一条明智信息。

相反，如果他们使用 Facebook 登录我们的网站，我会为他们提供设置密码的便利。如果他们选择这样做，他们也可以使用他们的用户名和密码登录 - 如果没有，他们仍然可以通过 Facebook 登录。

我刚刚检查了我们的数据库——看起来几乎只有那些在我们网站上使用过 FB 登录*并*设置了密码的用户是那些在我们实施 FB 登录之前就已经存在帐户的用户。*在通过 FB 登录时创建*的帐户中，似乎只有少数设置了密码。他们为什么要这样做？为方便起见，他们选择使用 FB 登录来注册帐户——为什么现在通过设置另一个想要被记住的密码来削弱它……？

> 我有时会从 fb 收到用户电子邮件的 null；如果电子邮件可以为空，则我不能使用它来成为会员用户。

我听说这封*电子邮件是空*问题，但我自己还没有遇到过。显然，这源于电子邮件地址不是创建 FB 帐户的强制要求，您也可以使用您的电话号码。

但在这种情况下，您仍然拥有他们的用户名，因此您可以用*用户名*@facebook.com 替换丢失的电子邮件地址——Facebook 最近进行了设置，现在*每个*用户都有这个电子邮件地址。

> 这是同时使用 memership 和 fb 的好方法吗？

我在我们网站上的做法几乎相同。如果有人通过 FB 登录，我会检查数据库是否我们已经在 FB 用户 ID 和我们系统中的用户帐户之间建立了连接；如果是，我登录该用户帐户，如果不是，我创建一个新帐户。工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T08:01:43.843

这是我的做法（也许不是最好的方法，但它有效）：

1.  我创建标准会员表
2.  2.添加另一个表，我将用户链接到普通 ID 而不是 Guid，所以当有人想查看用户个人资料时，我不必将 guid 放在 url 中，我也有字段 DisplayName，所以多个用户可以有相同的 DisplayName

3.  C# 的使用和[OpenID](http://www.dotnetopenauth.net/)库

4.  将以下代码片段（这还没有完成，但它可以工作）添加到 Account Controller：

* * *

```
 [AllowAnonymous]
        public ActionResult LoginOpenID(string provider, string returnUrl)
        {
            using (var openid = new OpenIdRelyingParty())
            {
                var response = openid.GetResponse();

            if (response == null)
            {
                try
                {
                    var request = openid.CreateRequest(provider);

                    var fetchRequest = new FetchRequest();

                    fetchRequest.Attributes.AddRequired(WellKnownAttributes.Contact.Email);

                    fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.Alias);

                    fetchRequest.Attributes.AddRequired(WellKnownAttributes.Name.FullName);

                    request.AddExtension(fetchRequest);

                    request.AddCallbackArguments("returnUrl", returnUrl);

                    return request.RedirectingResponse.AsActionResult();

                }
                catch (ProtocolException pExp)
                {

                }
                catch (WebException Wexp)
                {

                }
                catch (ArgumentException aexp)
                {
                }
            }

            else
            {
                switch (response.Status)
                {
                    case AuthenticationStatus.Authenticated:

                        var fetch = response.GetExtension<FetchResponse>();

                        string alias = fetch.GetAttributeValue(WellKnownAttributes.Name.Alias);

                        string email = fetch.GetAttributeValue(WellKnownAttributes.Contact.Email);

                        string fullname = fetch.GetAttributeValue(WellKnownAttributes.Name.FullName);

                        if (string.IsNullOrEmpty(alias))

                            alias = response.ClaimedIdentifier;

                        if (alias.Contains("google"))
                        {
                            Random random = new Random();

                            int randomNumber = random.Next(1000000000);

                            alias = "user" + randomNumber;
                        }

                        if (string.IsNullOrEmpty(email))

                            email = response.ClaimedIdentifier;

                        //Now see if the user already exists, if not create them

                        if (email.Contains("gmail.com") && Membership.FindUsersByEmail(email).Count > 0)
                        {
                            var cookie = FormsAuthentication.GetAuthCookie(Membership.GetUserNameByEmail(email), true);

                            Response.AppendCookie(cookie);
                        }

                        else if (Membership.GetUser(response.ClaimedIdentifier) == null && Membership.FindUsersByEmail(email).Count == 0)
                        {

                            MembershipCreateStatus membershipCreateStatus;

                            string password = GetRandomString(6, 9);

                            MembershipUser user = Membership.CreateUser(response.ClaimedIdentifier.ToString(),

                                password,

                                email,

                                "This is an OpenID account. You should log in with your OpenID.",

                                GetRandomString(5, 7),

                                true,

                                out membershipCreateStatus);

                            if (membershipCreateStatus != MembershipCreateStatus.Success)
                            {

                                TempData["message"] = "Unsuccessful creation of Account. " + membershipCreateStatus.ToString();

                                return RedirectToAction("Login", "Account");

                            }

                            if (membershipCreateStatus == MembershipCreateStatus.Success)
                            {
                                user.Comment = alias;

                                Membership.UpdateUser(user);

                                using (MyContext context = new MyContext())
                                {
                                    Data.UserShortId userShortId = new Data.UserShortId { Guid = (Guid)user.ProviderUserKey, DisplayName = alias };
                                    context.UserShortIds.InsertOnSubmit(userShortId);
                                    context.SubmitChanges();
                                }
                            }
                            // Use FormsAuthentication to tell ASP.NET that the user is now logged in,  

                            // with the OpenID Claimed Identifier as their username. 

                            var cookie = FormsAuthentication.GetAuthCookie(response.ClaimedIdentifier, true);

                            Response.AppendCookie(cookie);
                        }

                        else
                        {
                            var cookie = FormsAuthentication.GetAuthCookie(response.ClaimedIdentifier, true);

                            Response.AppendCookie(cookie);
                        }

                        break;
                    case AuthenticationStatus.Canceled:

                        TempData["message"] = "Login was cancelled at the provider";

                        return RedirectToAction("Login", "Account");

                    case AuthenticationStatus.Failed:

                        TempData["message"] = "Login failed using the provided OpenID identifier";

                        return RedirectToAction("Login", "Account");
                }
            }

            if (Url.IsLocalUrl(returnUrl))
            {
                return Redirect(returnUrl);
            }

            else
            {
                return RedirectToAction("Index", "Home");
            }
        }
    }

    private static Random random = new Random(46258975);

    public static int GetRandomInteger(int min, int max)
    {
        return random.Next(min, max + 1);
    }

    public static string GetRandomString(int minLength, int maxLength)
    {
        int strLength = GetRandomInteger(minLength, maxLength);

        StringBuilder builder = new StringBuilder();
        char ch;
        for (int i = 0; i < strLength; i++)
        {
            ch = Convert.ToChar(Convert.ToInt32(Math.Floor(26 * random.NextDouble() + 65)));
            builder.Append(ch);
        }
        return builder.ToString().ToLower();
    } 
```

* * *

认证时：

```
 @using (Html.BeginForm("LoginOpenId", "Account", FormMethod.Post))
           {
                @Html.Hidden("returnUrl", Request.QueryString["ReturnUrl"])
                <p>Login using:</p>
                <input type="submit" class="login-btn facebook" name="provider" value="http://facebook-openid.appspot.com/" />
                <input type="submit" class="login-btn google" name="provider" value="https://www.google.com/accounts/o8/id" />
                <input type="submit" class="login-btn yahoo" name="provider" value="http://me.yahoo.com/" />
           } 
```

如您所见，这还没有完成，我使用非官方 FB OpenID 提供程序，但您可以编写案例以使用 OAuth 单独处理 Fb 登录。

# jquery - jQuery当前元素索引如果有类

> ID：11353619
> 
> 赞同：1
> 
> 时间：2012-07-05T22:55:26.247
> 
> 标签：jquery

所以我的代码是这样生成的（当单击 a 时，它会将活动类添加到当前类）：

```
<div>

<a href="#"></a>
<a href="#"></a>
<a href="#" class="active"></a>
<a href="#"></a>

... 

</div> 
```

如何获取活跃的标签索引？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:56:57.857

你可以使用[`.index()`](http://api.jquery.com/index/)：

`$("a.active").index()`

jsFiddle 中的示例：http: [//jsfiddle.net/dvirazulay/V25un/](http://jsfiddle.net/dvirazulay/V25un/)

# ios - 模态视图控制器与单点触控中的方向

> ID：11353620
> 
> 赞同：0
> 
> 时间：2012-07-05T22:55:28.010
> 
> 标签：ios, xamarin.ios, modalviewcontroller

我正在展示将 ModalPresentationStyle 设置为 UIModalPresentationStyle.CurrentContext 的模态 ViewController 以在背景上有父视图。真正让我感到困惑的是，当我尝试更改 iPad 方向时，模式视图的大小会正确调整，而父控制器会保持原始方向。

问题是我可以将方向更改通知转发给父控制器，还是强制它以新方向重新布局？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T17:05:49.957

您应该通知您的父控制器方向更改。这种行为在 ios5 或类似版本中发生了变化。例如：

```
NSNotificationCenter.DefaultCenter.PostNotificationName("changeOrientation", null); 
```

这是您应该在模态控制器的方向更改时从模态控制器发送的通知。父控制器应在显示模态控制器或 ViewDidAppear 方法之前订阅此通知。

```
this.orientationObserver = NSNotificationCenter.DefaultCenter.AddObserver("changeOrientation", HandleRotation); 
```

...并在隐藏模式控制器或在 ViewWillDisappear 方法中取消订阅（如果在 ViewDidAppear 中订阅）。

```
NSNotificationCenter.DefaultCenter.RemoveObserver (this.orientationObserver); 
```

这种方法的好处是在模态控制器中没有直接引用父控制器，反之亦然。

# android - 加快 PhoneGap 中的测试

> ID：11353624
> 
> 赞同：0
> 
> 时间：2012-07-05T22:55:50.253
> 
> 标签：android, eclipse, cordova

如何使用 phoneGap 和 Eclipse 在 Android 4.0.3 上加快测试速度？它运行得太慢了....运行应用程序需要一分钟，而之前启动了模拟器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:55:22.403

它会尽可能快地运行。

您的开发机器的规格是什么。

您可以调整分配给 jvm 的内存，但我怀疑这会对您有太大帮助 - 如果您想尝试：制作一个新的 AVD 并添加一个特定的属性：`Device RAM Size 1024`

如果您的机器能负担得起内存，那应该会显着提高模拟器本身的速度！

# javascript - 多个 Ajax 在一个页面上添加到购物车表单

> ID：11353639
> 
> 赞同：1
> 
> 时间：2012-07-05T22:57:19.363
> 
> 标签：javascript, jquery, ajax, ajaxform

我在一个网站上有一个页面，同一页面上有多个产品。

我正在尝试让 Ajax 添加到购物车以适用于每个产品（每个产品都有自己的形式），但如果不为每个产品编写 Jquery 函数，我无法弄清楚如何区分一种产品和另一种产品。

下面的脚本适用于页面上的一个产品，因为表单有自己的 ID，但是当一页上有 20 个产品时，这不起作用。

```
function update_cart(data, statusText, xhr, $form)
{
    if (data.success)
    {
        $("input[name=XID]").val(data.XID);
        $('.cart_total').html(data.cart_total); 
    }
    return true; 
}
var cart_form_options = {
    success: update_cart,
    dataType: 'json'
}
jQuery(document).ready(function($){
    $("#add_to_cart_submit").click(function(){

        $("#add_to_cart_form").ajaxForm(cart_form_options);
        $("#add_to_cart_form").submit(); 
    })
}); 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:12:03.340

啊……我想我已经整理好了。一点点玩就可以了。

结果代码：

```
<script type="text/javascript">
                var $j = jQuery.noConflict();
                $j(document).ready(function () {
                $j('.add_to_cart_form').submit(function() {
                    $j('.add_submit', this).val('Processing...');
                    var url = $j(this).attr('action');
                    var data = $j(this).serialize();
                    $j.post(url, data, function() {$j('.cart-wrap').load('{site_url}cart');
                        $j('.mini-cart').load('{site_url}cart');
                        $j('.add_submit').val('add to cart');
                        $j('.cart-thankyou').slideDown( 500, function() {});
                        $j('.cart-thankyou').delay(1500).slideUp(400);
                    });
                    return false;
                });
            });
            </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:02:35.443

为每个产品“添加到购物车”按钮/表单提供一个独特的属性，例如产品 ID。然后，当单击“添加到购物车”按钮时，您可以获取该属性以找出要添加的确切产品。

```
<form id="add_to_cart_form" productID="product1"> 
```

然后在js中：

```
var product = $("add_to_cart_form").attr("productID"); 
```

# python - NameError：名称“UTC”未定义

> ID：11353640
> 
> 赞同：7
> 
> 时间：2012-07-05T22:57:27.323
> 
> 标签：python, datetime

`datetime.datetime.now()`在我的本地 UTC-8 时区输出的输出。我想将其转换为带有 UTC tzinfo 的适当时间戳。

```
from datetime import datetime, tzinfo
x = datetime.now()
x = x.replace(tzinfo=UTC) 
```

^ 输出 NameError: 名称 'UTC' 未定义

`x.replace(tzinfo=<UTC>)`输出 SyntaxError: 无效的语法

`x.replace(tzinfo='UTC')`输出类型错误：tzinfo 参数必须是 None 或 tzinfo 子类，而不是类型“str”

用于完成我的示例的正确语法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T23:02:25.653

您需要使用额外的库，例如`pytz`. Python 的`datetime`模块不包括任何`tzinfo`类，包括 UTC，当然也不包括您的本地时区。

编辑：从[Python 3.2](https://docs.python.org/3.2/whatsnew/3.2.html#datetime-and-time)开始，该`datetime`模块包含一个`timezone`带有`utc`成员的对象。现在获取当前 UTC 时间的规范方法是：

```
from datetime import datetime, timezone
x = datetime.now(timezone.utc) 
```

您仍然需要另一个库，例如`pytz`其他时区。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-29T08:17:38.377

如果您要查找的只是 UTC 现在的时间，则 datetime 有一个内置函数：

```
x = datetime.utcnow() 
```

不幸的是，它不包含任何 tzinfo，但它确实为您提供了 UTC 时间。

或者，如果您确实需要 tzinfo，您可以这样做：

```
from datetime import datetime
import pytz
x = datetime.now(tz=pytz.timezone('UTC')) 
```

您可能还对时区列表感兴趣：[Python - Pytz - List of Timezones?](https://stackoverflow.com/questions/13866926/python-pytz-list-of-timezones)

# c++ - 向量序列化

> ID：11353642
> 
> 赞同：7
> 
> 时间：2012-07-05T22:57:31.003
> 
> 标签：c++, serialization, vector

我正在尝试对向量的数据进行二进制序列化。在下面的这个示例中，我序列化为一个字符串，然后反序列化回一个向量，但没有得到与我开始时相同的数据。为什么会这样？

```
vector<size_t> v;
v.push_back(1);
v.push_back(2);
v.push_back(3);

string s((char*)(&v[0]), 3 * sizeof(size_t));

vector<size_t> w(3);
strncpy((char*)(&w[0]), s.c_str(), 3 * sizeof(size_t));

for (size_t i = 0; i < w.size(); ++i) {
    cout << w[i] << endl;
} 
```

我希望得到输出

```
1  
2
3 
```

而是得到输出

```
1
0
0 
```

（在[gcc-4.5.1](http://ideone.com/bXjuM)上）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T23:13:30.493

错误在于对 的调用[`strncpy`](http://linux.die.net/man/3/strncpy)。从链接页面：

> 如果*src*的长度小于*n*， strncpy() 用空字节填充 dest 的剩余部分。

因此，在`0`找到序列化数据中的第一个字节后， 's 数据数组的其余部分将`w`用 s 填充`0`。

要解决此问题，请使用`for`循环，或`std::copy`

```
std::copy( &s[0], 
           &s[0] + v.size() * sizeof(size_t), 
           reinterpret_cast<char *>(w.data()) ); 
```

* * *

IMO，不是`std::string`用作缓冲区，而是使用`char`数组来保存序列化数据。

[ideone](http://ideone.com/7H8dy)的例子

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:13:49.220

`strncpy`是一大堆失败。它将在您的输入中提前终止，因为它`size_t`有一些零字节，它解释为 NULL 终止符，将它们保留为默认构造的 0。如果您在 BE 机器上运行此测试，则全部为 0。使用`std::copy`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T23:33:57.643

最安全的方法是循环遍历向量并将值单独存储到大小为 3*sizeof(size_t) 的 char 数组中。这样你就不会依赖向量类实现的内部结构。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T23:13:53.290

要将这个向量序列化为一个字符串，首先要将这个向量的每个元素从一个 int 转换为一个包含该数字的相同 ascii 表示的字符串，这个操作可以称为从 int 到字符串的序列化。

例如，假设一个整数是 10 位，我们可以

```
// create temporary string to hold each element
char intAsString[10 + 1]; 
```

然后将整数转换为字符串

```
sprintf(intAsString, "%d", v[0]); 
```

或者

```
itoa( v[0], intAsString, 10 /*decimal number*/ ); 
```

您还可以使用 ostringstream 和 << 运算符

如果你看一下 intAsString 和 v[0] 的内存内容，它们是非常不同的，第一个包含代表十进制数系统（基数 10）中 v[0] 的值的 ascii 字母，而 v[0] 包含数字的二进制表示（因为这是计算机存储数字的方式）。

# php - 会话变量中的数组 (Yii)

> ID：11353645
> 
> 赞同：1
> 
> 时间：2012-07-05T22:57:40.540
> 
> 标签：php, session, yii

我正在尝试完成每次用户访问某个页面时将值添加到会话变量（数组）的功能。这是我来自控制器的代码：

```
public function actionPut($id)
    {
        $session=new CHttpSession;
        $session->open();
        if (empty($session['the_variable'])) {
            $session['the_variable'] = array($id);
        }
        else {
            $session['the_variable'][] = $id;
        }
        $session->close();
        $this->render('test', array('session'=>$session));
    } 
```

但它不起作用。如果变量为空，则只存储第一次的信息。下次我访问该页面时，它不会为数组添加值。我也尝试过`push_array`功能，但没有运气。怎么了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T05:35:17.247

试试这个解决方案。

```
public function actionPut($id)
{

     $session = Yii::app()->session;
     if (!isset($session['the_variable']) || count($session['the_variable'])==0) 
     {
         $session['the_variable'] = array($id);
     }
     else {
        $myarr = $session['the_variable'];
        $myarr[] = $id;
        $session['the_variable'] = $myarr;
     }
     $this->render('test', array('session'=>$session));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T04:33:18.973

我认为您的问题是您自己开始/关闭会话。相反，你应该让 Yii 为你处理：

```
 public function actionPut($id)
    {
        $session=Yii::app()->session;

        if (empty($session['the_variable'])) {
            $session['the_variable'] = array($id);
        }
        else {
            $session['the_variable'][] = $id;
        }

        $this->render('test', array('session'=>$session));
    } 
```

另外，不要自己关闭会话，而是让 Yii 来处理。

# ruby-on-rails - ruby on rails、meta_search 和不区分大小写的 oracle

> ID：11353647
> 
> 赞同：3
> 
> 时间：2012-07-05T22:57:42.030
> 
> 标签：ruby-on-rails, ruby-on-rails-3, oracle, case-sensitive, meta-search

我在我的 Rails 项目中使用 meta_search gem。该数据库是 Oracle 数据库，“like”区分大小写。有人知道我如何创建一个新条件或其他东西来获取这样的查询：

```
UPPER(NAME) LIKE UPPER('User Firstname') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T16:45:29.057

[meta_search 方法类](http://rdoc.info:8080/github/ernie/meta_search/MetaSearch/Method)- 前两个代码示例。`:backwards_name`与其将其重写为`:incasesensitive_name`或您想要的任何内容，不如将此类文本字段添加到您的搜索表单中。

`UPPER()`内置于 Oracle AFAIR 中，因此范围可能如下所示：

```
scope :incasesensitive_name, lambda {|name| where('UPPER(name) LIKE ?', "%#{name.upcase}%")} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-21T10:22:27.360

以防万一有人需要用 ransack 执行此操作：

```
ransacker :subject_cs, :formatter => proc {|v| v.downcase }, :splat_param => true, :type => :string do
    arel_table[:subject].lower
end 
```

# objective-c - 从 @synthesize 更改为 @dynamic 以使用 RestKit 核心数据

> ID：11353654
> 
> 赞同：1
> 
> 时间：2012-07-05T22:58:26.047
> 
> 标签：objective-c, core-data, restkit

我想为 RestKit 使用 Core Data 支持，但是当我将 @synthesize 更改为 @dynamic 时，我失去了所有的 getter 和 setter，并且我在我的所有应用程序中使用它们，几乎在每个模型中。我可以做些什么来让我的应用程序重新启动并运行而无需更改所有代码？

我正在考虑自己实现所有的 getter 和 setter，但我认为这应该是一种更清洁的方法。

# dojo - 使用 dojox.mvc 将 dojo dgrid 绑定到表单

> ID：11353658
> 
> 赞同：0
> 
> 时间：2012-07-05T22:58:52.577
> 
> 标签：dojo, dgrid

我想使用 dojox.mvc 将 dgrid 绑定到 dojo 中的表单。虽然有很多关于如何将单个模型绑定到表单的示例，但没有任何内容显示如何使用网格来执行此操作。网格必须与表单共享同一个存储，当有人单击网格中的一行时，表单将被更新。我的主要问题是他们使用的存储不同：dgrid 使用 dojo.store 对象，而 mvc 使用 dojo.Stateful。dojo.store 有一个名为“data”的对象，它保存数据列表，而 dojo.Stateful 有“items”。欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:36:00.440

虽然我不是 dgrid 的专家，但我认为桥接 dgrid 的选择和 dojo/Stateful 会有所帮助。如下所示（dgrid 应与 dojo/dijit/dojox 位于同一目录中，并且 /path/to/dojotoolkit 应替换为放置 dojo/dijit/dojox/dgrid 的目录）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Test dgrid and dojox/mvc</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <link id="themeStyles" rel="stylesheet" href="/path/to/dojotoolkit/dijit/themes/claro/claro.css"/>
        <style type="text/css">
            @import "/path/to/dojotoolkit/dojo/resources/dojo.css";
            h2 {
                margin: 12px;
            }
            .heading {
                font-weight: bold;
                padding-bottom: 0.25em;
            }
            .ui-widget{
                margin: 10px;
            }
        </style>
        <script type="text/javascript" src="/path/to/dojotoolkit/dojo/dojo.js" 
            data-dojo-config="async: true, mvc: {debugBindings: 1}"></script>
        <script type="text/javascript">
            require([
                "dojo/_base/declare",
                "dojo/_base/Color",
                "dojo/parser",
                "dojo/when",
                "dojo/Stateful",
                "dgrid/List",
                "dgrid/OnDemandGrid",
                "dgrid/Selection",
                "dgrid/test/data/base",
                "dojo/domReady!"
            ], function(declare, Color, parser, when, Stateful, List, Grid, Selection){
                when(parser.parse(), function(){
                    var undef,
                        columns = {
                            col1: "Name",
                            col5: "Red",
                            col6: "Green",
                            col7: "Blue"
                        },
                        grid = new (declare([Grid, Selection]))({
                            store: smallColorStore,
                            columns: columns
                        }, "grid"),
                        Model = declare(Stateful, {
                            _colorGetter: function(){
                                return this.col5 === undef || this.col6 === undef || this.col7 === undef ? "" : new Color([this.col5, this.col6, this.col7]).toHex();
                            },
                            _colorSetter: function(value){
                                if(value){
                                    var rgb = new Color(value).toRgb();
                                    this.col5 = rgb[0];
                                    this.col6 = rgb[1];
                                    this.col7 = rgb[2];
                                }
                                return value;
                            }
                        });
                    grid.on("dgrid-select", function(event){
                        if((ctrl.model || {}).id !== undef && ctrl.model.id != event.rows[0].id){
                            save();
                        }
                        ctrl.set("model", new Model(event.rows[0].data));
                    });
                    grid.on("dgrid-deselect", function(event){
                        if((ctrl.model || {}).id !== undef && ctrl.model.id == event.rows[0].id){
                            save();
                            ctrl.set("model", new Model({col1: ""}));
                        }
                    });
                    function save(){
                        var model = ctrl.model;
                        if(model.id){
                            for(var s in columns){
                                grid.updateDirty(model.id, s, model[s]);
                            }
                        }
                        grid.save();
                    }
                    handleSaveButton = function(){
                        save();
                        grid.select(model.id);
                    };
                });
            });
        </script>
    </head>
    <body class="claro">
        <script type="dojo/require">at: "dojox/mvc/at"</script>
        <h2>A basic grid with dojox/mvc</h2>
        <div id="grid"></div>
        <span data-dojo-id="ctrl"
         data-dojo-type="dojox/mvc/ModelRefController"></span>
        <div style="padding:10px;"
         data-dojo-type="dojox/mvc/Group"
         data-dojo-props="target: at(ctrl, 'model')">
            <label for="name">Name</label>
            <input id="name" type="text"
             data-dojo-type="dijit/form/TextBox"
             data-dojo-props="value: at('rel:', 'col1')">
            <div data-dojo-type="dijit/ColorPalette"
             data-dojo-props="value: at('rel:', 'color'), palette: '7x10'"></div>
        </div>
        <input type="button" style="margin:10px;"
         data-dojo-type="dijit/form/Button"
         data-dojo-props="label: 'Save', onClick: function(){ handleSaveButton(); }">
    </body>
</html> 
```

# assembly - 存储所有寄存器而不刮任何

> ID：11353662
> 
> 赞同：2
> 
> 时间：2012-07-05T22:59:26.087
> 
> 标签：assembly, arm, css-position, fpic

我正在开发一个将引导另一个程序的程序，因此我需要保留传递给我的程序的寄存器，以便我可以在跳转到应该加载的程序之前恢复它们。这是一个裸机系统，没有操作系统，没有 MMU（存在，但目前未启用）。

这是我的代码，我想知道它是否正确，因为我没有要测试的手臂板，我必须尽快提交，

pc相关商店也确实只能使用源寄存器低寄存器（r0-r7），我认为这只是由于指令宽度有限而无法访问某些指令中的高寄存器的拇指问题。

```
reset: @ entry point, mapped in reset vector

/* Store registers for bootstrapping */
STR     R0, [PC, #128]
STR     R1, [PC, #128]
STR     R2, [PC, #128]
STR     R3, [PC, #128]
STR     R4, [PC, #128]
STR     R5, [PC, #128]
STR     R6, [PC, #128]
STR     R7, [PC, #128]

/* Following registers can't be used in pc relative load/store */
MOV     R0, R8
STR     R0, [PC, #128]
MOV     R0, R9
STR     R0, [PC, #128]
MOV     R0, R10
STR     R0, [PC, #128]
MOV     R0, R11
STR     R0, [PC, #128]
MOV     R0, R12
STR     R0, [PC, #128]
MOV     R0, SP
STR     R0, [PC, #128]
MOV     R0, LR
STR     R0, [PC, #128]
MRS     R0, CPSR
STR     R0, [PC, #128]
MRS     R0, SPSR
STR     R0, [PC, #128]
ISB     SY
B       clear_regs

saved_regs:
.rept 32
    .word 0x00000000
.endr

.align
clear_regs:
MOV     R0,  #0
MOV     R1,  #0
MOV     R2,  #0
MOV     R3,  #0
MOV     R4,  #0
MOV     R5,  #0
MOV     R6,  #0
MOV     R7,  #0
MOV     R8,  #0
MOV     R9,  #0
MOV     R10, #0
MOV     R11, #0
MOV     R12, #0
MOV     SP,  #0
MOV     LR,  #0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T23:11:08.177

在 ARM 模式（相对于 Thumb 模式）中，可以在 PC 相关存储中使用高位寄存器。如果不允许这样做，您的汇编程序会警告您。您可能还想考虑使用 STM（存储多个）指令，它允许您指定寄存器列表而不是单独执行它们。

您可能应该让汇编程序通过使用符号而不是手动指定偏移量来完成计算 PC 偏移量的“艰苦”工作。

```
reset: @ entry point, mapped in reset vector

/* Store registers for bootstrapping */
STR     R0, saved_regs
ADR     R0, saved_regs + 4

STMIA r0!, {r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11,r12,r13,r14,r15}

MRS     R1, CPSR
MRS     R2, SPSR
STMIA   R0, {r1, r2}
ISB     SY
B       clear_regs

saved_regs:
.rept 32
.word 0x00000000
.endr 
```

# unit-testing - 在 dart 中进行单元测试时，如何始终如一地设置环境？

> ID：11353667
> 
> 赞同：0
> 
> 时间：2012-07-05T22:59:57.677
> 
> 标签：unit-testing, dart

有没有办法让设置/拆卸代码在每次测试之前/之后自动运行？
与 jUnit 中可用的 @Before 注释类似的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:12:00.793

是的，您可以这样做，但只能在组测试中：

```
group('foo', () {
  setUp(() {...});
  tearDown(() {...});
  test(description, () {...});
  ...
}); 
```

欲了解更多信息，请阅读此[新闻](http://news.dartlang.org/2012/06/new-setupteardown-in-unit-test-library.html)。

# sql - 计算时间值

> ID：11353669
> 
> 赞同：0
> 
> 时间：2012-07-05T23:00:01.407
> 
> 标签：sql, datetime, excel, vba

我在 Excel 中存储了多行赛车圈速，格式如下：

> 1:32.9

这个例子意味着单圈时间是 1 分 32 秒和十分之九秒。

为了保留我的数据，我在 excel 中将值格式化为文本，并且我正在（通过一些菜鸟 excel vba 代码）将 sql azure db 上传到格式化为 nvarchar (25) 的字段中。

我想对这些值进行数学计算。主要是基本的算术函数、平均值和一些简单的统计分析。

鉴于此，处理这些数据的建议是什么？鉴于我目前有限的 sql 知识，我可以看到以下选项：

1.  以某种方式将值转换为所有秒（上面的示例将变为 92.9 秒）并存储在格式化为十进制的 sql 列中（我可以在 T-SQL 中执行此操作并构建一个视图吗？）

2.  以某种方式将值转换为时间格式的字段，但是我不清楚如果我这样做我的计算选项是什么

我可以在上传处理过程中将翻译合并到 Excel vba 或 T-sql 中，尽管如果我可以将其处理到视图定义中并从中运行我的报告，那就太好了。

对正确处理此问题的建议？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:12:18.383

我会通过 excel 公式来完成，并将值设置为不同的 excel 工作表列，然后加载到 SQL 表中。

如果这不可行，那么您可以将数据加载到表中，然后定义一个适应以下查询的视图：

```
WITH DummyData AS
(
  SELECT '1:32.9' TimeText -- This can be replaced with the table that you loaded.
)
SELECT CAST(
        DATEPART(mi, '00:' + TimeText) * 60 +
        DATEPART(ss, '00:' + TimeText)
         AS VARCHAR
        )+ '.' +
       CAST( DATEPART(ms, '00:' + TimeText) AS VARCHAR)
  FROM DummyData 
```

SQLFiddle：[http ://sqlfiddle.com/#!3/d41d8/2349/0](http://sqlfiddle.com/#!3/d41d8/2349/0)

# mysql - 从 Go 连接到 MySQL 的推荐方式是什么？

> ID：11353679
> 
> 赞同：168
> 
> 时间：2012-07-05T23:00:36.030
> 
> 标签：mysql, database, go

我正在寻找一个可靠的解决方案来从 Go 连接到 MySQL 数据库。我见过一些图书馆，但很难确定完整性和当前维护的不同状态。我没有复杂的需求，但我想知道人们在依赖什么，或者连接 MySQL 的最标准解决方案是什么。

* * *

## 回答 #1

> 赞同：266
> 
> 时间：2012-07-06T06:41:20.380

有一些驱动程序可用，但您应该只考虑那些实现[database/sql](http://golang.org/pkg/database/sql/) API 的驱动程序

*   它提供了简洁高效的语法，
*   它确保您以后可以在不更改代码的情况下更改驱动程序，除了导入和连接。

MySQL 有两个快速可靠的驱动程序：

*   [我的MySQL](http://github.com/ziutek/mymysql)
*   [Go-MySQL 驱动程序](https://github.com/Go-SQL-Driver/MySQL/)

我已经在生产中使用了它们，程序运行了几个月，连接数以百万计，没有失败。

[go-wiki 上列出了](http://code.google.com/p/go-wiki/wiki/SQLDrivers)其他 SQL 数据库驱动程序。

**使用 MyMySQL 时导入：**

```
import (
    "database/sql"
    _ "github.com/ziutek/mymysql/godrv"
) 
```

**使用 Go-MySQL-Driver 时导入：**

```
import (
    "database/sql"
    _ "github.com/go-sql-driver/mysql"
) 
```

**使用 MyMySQL 连接和关闭：**

```
con, err := sql.Open("mymysql", database+"/"+user+"/"+password)
defer con.Close()
// here you can use the connection, it will be closed when function returns 
```

**使用 Go-MySQL-Driver 连接和关闭：**

```
con, err := sql.Open("mysql", store.user+":"+store.password+"@/"+store.database)
defer con.Close() 
```

**选择一行：**

```
row := con.QueryRow("select mdpr, x, y, z from sometable where id=?", id)
cb := new(SomeThing)
err := row.Scan(&cb.Mdpr, &cb.X, &cb.Y, &cb.Z) 
```

**选择多行并构建一个带有结果的数组：**

```
rows, err := con.Query("select a, b from item where p1=? and p2=?", p1, p2)
if err != nil { /* error handling */}
items := make([]*SomeStruct, 0, 10)
var ida, idb uint
for rows.Next() {
    err = rows.Scan(&ida, &idb)
    if err != nil { /* error handling */}
    items = append(items, &SomeStruct{ida, idb})
} 
```

**插入 ：**

```
_, err = con.Exec("insert into tbl (id, mdpr, isok) values (?, ?, 1)", id, mdpr) 
```

你会看到在 Go 中使用 MySQL 是一种令人愉快的体验：我**从来没有**遇到过问题，我的服务器运行了几个月没有错误或泄漏。大多数函数仅采用可变数量的参数这一事实减轻了在许多语言中繁琐的任务。

请注意，如果将来您需要使用另一个 MySQL 驱动程序，您只需在一个 go 文件中更改两行：执行导入的行和打开连接的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-15T09:35:20.023

有几件事需要注意选择 1 行示例：

```
row := con.QueryRow("select mdpr, x, y, z from sometable where id=?",id) 
cb := new(SomeThing) 
err := row.Scan(&cb.Mdpr, &cb.X, &cb.Y, &cb.Z) 
```

此示例中缺少一个`row.Next()`。它需要调用`row.Next()`来获取返回的第一行。

图书馆也有一些不灵活，这在某种程度上试图促进数据极简主义。如果您尝试选择不是 Scan 的列，它将引发错误（不仅仅是警告）

# java - Spring Security AOP 错误

> ID：11353681
> 
> 赞同：1
> 
> 时间：2012-07-05T23:01:21.390
> 
> 标签：java, spring, jakarta-ee, spring-mvc, spring-security

我创建了一个简单的 spring 用户应用程序。我正在使用 Tomcat 进行部署。这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>ContactSync</display-name>
    <filter>
            <filter-name>springSecurityFilterChain</filter-name>
            <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
            <filter-name>springSecurityFilterChain</filter-name>
            <url-pattern>/user/*</url-pattern>
    </filter-mapping>
    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
        /WEB-INF/spring-security.xml
        </param-value>
    </context-param>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.do</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>redirect.jsp</welcome-file>
    </welcome-file-list>

    <!-- <servlet-mapping>
        <servlet-name>default</servlet-name>
        <url-pattern>/static/*</url-pattern>
    </servlet-mapping> -->
</web-app> 
```

我的 spring-security.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:security="http://www.springframework.org/schema/security"
 xsi:schemaLocation="http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/security 
   http://www.springframework.org/schema/security/spring-security-3.0.xsd">

 <!-- This is where we configure Spring-Security  -->
 <security:http auto-config="true" use-expressions="true" access-denied-page="/user/denied.do" >
        <security:intercept-url pattern="/" access="permitAll"/>
        <security:intercept-url pattern="/user/login.do" access="permitAll"/>
        <!-- Not using admin role right now -->
        <!-- <security:intercept-url pattern="/user/admin" access="hasRole('ROLE_ADMIN')"/> -->
        <security:intercept-url pattern="/user/common.do" access="hasRole('ROLE_USER')"/>

        <security:form-login
                login-page="/user/login.do" 
                authentication-failure-url="/user/login.do?error=true" 
                default-target-url="/user/common.do"/>

        <security:logout 
                invalidate-session="true" 
                logout-success-url="/user/login.do" 
                logout-url="/user/logout.do"/>

 </security:http>

 <security:authentication-manager>
  <security:authentication-provider>
    <security:user-service>
        <security:user name="abcd" password="abcd" authorities="ROLE_USER" />
    </security:user-service>
  </security:authentication-provider>
</security:authentication-manager>

</beans> 
```

我的图书馆是：

```
antlr-2.7.6.jar
antlr-runtime-3.0.1.jar
commons-collections-3.1.jar
commons-dbcp-1.4.jar
commons-logging-1.1.1.jar
commons-pool-1.5.6.jar
dom4j-1.6.1.jar
gson-2.2.1.jar
hibernate3.jar
hibernate-annotations-3.5.1-Final.jar
hibernate-commons-annotations-3.2.0.Final.jar
j2ee.jar
javassist-3.4.GA.jar
javax.persistence-2.0.2.jar
jstl-1.2.jar
jta-1.1.jar
mysql-connector-java-5.1.5.jar
org.springframework.asm-3.0.1.RELEASE-A.jar
org.springframework.beans-3.0.1.RELEASE-A.jar
org.springframework.context.support-3.0.1.RELEASE-A.jar
org.springframework.context-3.0.1.RELEASE-A.jar
org.springframework.core-3.0.1.RELEASE-A.jar
org.springframework.expression-3.0.1.RELEASE-A.jar
org.springframework.jdbc-3.0.1.RELEASE-A.jar
org.springframework.orm-3.0.1.RELEASE-A.jar
org.springframework.transaction-3.0.1.RELEASE-A.jar
org.springframework.web.servlet-3.0.1.RELEASE-A.jar
org.springframework.web-3.0.1.RELEASE-A.jar
slf4j-api-1.5.6.jar
slf4j-simple-1.5.6.jar
spring-aop-3.0.1.RELEASE-sources.jar
spring-security-acl-3.0.1.RELEASE.jar
spring-security-acl-3.0.1.RELEASE-sources.jar
spring-security-cas-client-3.0.1.RELEASE.jar
spring-security-cas-client-3.0.1.RELEASE-sources.jar
spring-security-config-3.0.1.RELEASE.jar
spring-security-config-3.0.1.RELEASE-sources.jar
spring-security-core-3.0.1.RELEASE.jar
spring-security-core-3.0.1.RELEASE-sources.jar
spring-security-ldap-3.0.1.RELEASE.jar
spring-security-ldap-3.0.1.RELEASE-sources.jar
spring-security-openid-3.0.1.RELEASE.jar
spring-security-openid-3.0.1.RELEASE-sources.jar
spring-security-samples-tutorial-3.0.1.RELEASE.war
spring-security-samples-tutorial-3.0.1.RELEASE-sources.jar
spring-security-taglibs-3.0.1.RELEASE.jar
spring-security-taglibs-3.0.1.RELEASE-sources.jar
spring-security-web-3.0.1.RELEASE.jar
spring-security-web-3.0.1.RELEASE-sources.jar
standard-1.1.2.jar
yuicompressor-2.4.8pre.jar 
```

尝试访问登录文件时出现 404 错误。但是我可以访问欢迎文件。任何人都可以帮我解决这个问题。

```
Error:

HTTP Status 404 - /Learning/WEB-INF/jsp/loginpage.jsp

type Status report

message /Learning/WEB-INF/jsp/loginpage.jsp

description The requested resource (/Learning/WEB-INF/jsp/loginpage.jsp) is not available. 
```

我的登录注销控制器：

```
package com.contact.test.web;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;

@RequestMapping("/user")
@Controller
public class LoginLogoutController{

     @RequestMapping(value = "/login.do", method = RequestMethod.GET)
     public String getLoginPage(@RequestParam(value="error", required=false) boolean error, 
       ModelMap model) {

      // Add an error message to the model if login is unsuccessful
      // The 'error' parameter is set to true based on the when the authentication has failed. 
      // We declared this under the authentication-failure-url attribute inside the spring-security.xml
      /* See below:
       <form-login 
        login-page="/user/login" 
        authentication-failure-url="/user/login?error=true" 
        default-target-url="/user/common"/>*/

      if (error == true) {
       // Assign an error message
       model.put("error", "You have entered an invalid username or password!");
      } else {
       model.put("error", "");
      }
      // This will resolve to /WEB-INF/jsp/loginpage.jsp
      return "loginpage";
     }

    /**
      * Handles and retrieves the denied JSP page. This is shown whenever a regular user
      * tries to access an admin only page.
      * 
      * @return the name of the JSP page
      */
     @RequestMapping(value = "/denied.do", method = RequestMethod.GET)
      public String getDeniedPage() {

      // This will resolve to /WEB-INF/jsp/deniedpage.jsp
      return "deniedpage";
     }
} 
```

项目结构为：

```
/Learning/WebContent
/Learning/WebContent/META-INF
/Learning/WebContent/WEB-INF
/Learning/WebContent/WEB-INF/jsp
/Learning/WebContent/WEB-INF/jsp/adminpage.jsp
/Learning/WebContent/WEB-INF/jsp/commonpage.jsp
/Learning/WebContent/WEB-INF/jsp/deniedpage.jsp
/Learning/WebContent/WEB-INF/jsp/loginpage.jsp
/Learning/WebContent/WEB-INF/jsp/userForm.jsp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:20:40.107

据我了解，您还需要将此类库放入您的构建路径：

```
asm-3.3.1.jar
aopalliance-1.0.jar
aspectjrt-1.6.12.jar
aspectjtools-1.6.12.jar
aspectjweaver-1.6.12.jar 
```

版本可能不同，我只是从我的项目中复制了库的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T07:55:00.047

你有

```
spring-aop-3.0.1.RELEASE-sources.jar 
```

它不包含任何已编译的 java 类。您需要包括：

```
spring-aop-3.0.1.RELEASE.jar 
```

与此问题无关：您还需要[spring-aop-3.0.1.RELEASE.pom.xml中提到的所有必需依赖项](http://repo1.maven.org/maven2/org/springframework/spring-aop/3.0.1.RELEASE/spring-aop-3.0.1.RELEASE.pom)

# symfony - Symfony2 Sluggable 多个分隔符

> ID：11353685
> 
> 赞同：3
> 
> 时间：2012-07-05T23:01:33.620
> 
> 标签：symfony, doctrine-orm, separator

使用 Symfony2 中的[Gedmo Sluggable](https://github.com/l3pp4rd/DoctrineExtensions/tree/master/lib/Gedmo/Sluggable)行为，我需要知道是否有办法允许斜杠 (/) 和破折号 (-) 作为单词分隔符。换句话说，一个特定的分隔符像往常一样，但不理会另一个特定的特殊字符，因此它被忽略了。我想做这样的事情作为一个蛞蝓：

```
products/some-product 
```

这允许我在 URL 中使用通过斜杠分类的 slug，并通过破折号分隔空格。但是，例如，如果分隔符是“/”，“-”也将被替换而不是单独存在。

我查看了相关的 Sluggable 类代码 ( [Urlizer](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/lib/Gedmo/Sluggable/Util/Urlizer.php) ) 并看到了很多正则表达式，但我不确定我应该在哪里覆盖以允许斜线和/或破折号不与其他所有内容一起替换。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-10T19:12:39.450

事实证明，您可以通过创建自己的扩展 Urlizer 的类来完成此操作，然后将其设置为侦听器的可调用对象，而不是 Gedmo 的类。

使用 STOF 原则扩展时，会创建一个 sluggable 侦听器作为服务，但它被设置为私有，因此您无法正常访问。所以你必须首先在你自己的配置中为这个监听器创建一个别名：

```
services:

    sluggable.listener:
        alias: stof_doctrine_extensions.listener.sluggable 
```

然后你必须创建你的类。有一个名为 setTransliterator() 的设置器，您可以使用它来调用您自己的音译器，然后您可以使用它来注入您需要修改 slugging 过程的内容。函数 postProccessText() 是你真正想要修改的， transliterate() 函数就是可调用的：

```
namespace My\Bundle\Util;

use Gedmo\Sluggable\Util\Urlizer as BaseUrlizer;

class Urlizer extends BaseUrlizer
{
    public static function transliterate($text, $separator = '-')
    {
        // copy the code from the parent here
    }

    private static function postProcessText($text, $separator)
    {
        // copy code from parent, but modify the following part:

        $text = strtolower(preg_replace('/[^A-Z^a-z^0-9^\/]+/', $separator,
                           preg_replace('/([a-z\d])([A-Z])/', '\1_\2',
                           preg_replace('/([A-Z]+)([A-Z][a-z])/', '\1_\2',
                           preg_replace('/::/', '/', $text)))));
    }
} 
```

postProcessText() 的正则表达式是您想要修改的内容。在那之后，你必须在你坚持之前让你的函数成为可调用的，你很高兴：

```
// custom transliterator
$listener = $this->get('sluggable.listener');
$listener->setTransliterator(array('My\Bundle\Util\Urlizer', 'transliterate'));
$em->flush(); 
```

# performance - 当函数参数是变量时如何提高 Fortran 内部函数调用的性能

> ID：11353686
> 
> 赞同：1
> 
> 时间：2012-07-05T23:01:38.973
> 
> 标签：performance, variables, arguments, fortran

我正在编写一个涉及大量指数函数调用的 Fortran 程序。我发现当`exp()`函数的参数是变量时，计算速度比使用常量值作为函数参数慢20倍以上。例如，在以下两个示例程序中，程序 A 比程序 B 慢得多。

```
program A
real a,b
integer i

a=1.234
do i=1,100000000
  b=exp(a)
end do
stop
end program A 
```

======================

```
program B
integer i
real b

do i=1,100000000
  b=exp(1.234)
end do
stop
end program B 
```

当使用变量作为`exp()`函数参数不可避免时，如何提高`exp()`计算效率？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T23:06:54.077

一些编译器可以在编译时评估应用于常量的内在函数。因此，在这种情况下，评估内在函数没有运行时间成本。显然，对于真正的变量，这是无法做到的，因为这些值要到运行时才能知道。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-07-02T03:28:57.973

看看你是否可以从编译器中得到一些优化报告......

英特尔的示例：

```
program A
real a,b
integer i

a=1.234
!DIR$ SIMD
do i=1,100000000
  b=exp(a)
end do

stop
end program A 
```

使用 OpenMP 的示例：

```
program A2
USE OMP_LIB
real a,b
integer i

a=1.234
!DIR$ SIMD
do i=1,100000000
  b=exp(a)
end do

stop
end program A2 
```

当然，在这个微不足道的情况下......

```
program B2
real a,c
real, DIMENSION(100000000) ::b

a=1.234
c=exp(a)
b=c
!  which is mathematically the same as
!b(1:100000000) = c
!  or
!b(:) = c

stop
end program B2 
```

我通常将这些类型的函数放入库中，然后使用 !DIR@ 或 !$OMP 对其进行编译并对其进行调整，而与主程序的优化级别无关。

```
MODULE MyFuncs
PRIVATE
PUBLIC, B2

CONTAINS
PURE SUBROUTINE B2(a,n,b)
IMPLICIT NONE
real              , INTENT(IN   ) :: a
INTEGER           , INTENT(IN   ) :: n
real, DIMENSION(n), INTENT(  OUT) :: b

c=exp(a)
!DIR$ SIMD
b=c

RETURN
END SUBROUTINE myB2

END MODULE MyFuncs

program A
IMPLICIT NONE
USE myFuncs
INTEGER            :: n=100000000
real               :: a
real, DIMENSION(n) :: b

a=1.234
CALL MyB2(a, n, b)

end program A 
```

# mysql - 这个 1 的顺序是多少？

> ID：11353688
> 
> 赞同：21
> 
> 时间：2012-07-05T23:01:40.677
> 
> 标签：mysql, sql-order-by

我在 MySQL 中有一个问题，做对了。但书的代码略有不同。

书：

```
use tennis;
select playerno, datediff(coalesce(end_date, current_date), 
begin_date) as Difference, position
from committee_members
where datediff(coalesce(end_date, current_date), begin_date) > 500
order by 1; 
```

这个 1 的顺序是什么？

我的代码也可以工作并且几乎相同，除了：

```
select playerno, datediff(coalesce(end_date, current_date) AS Data,
order by Data; 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-05T23:04:22.760

`order by 1`表示“按我选择的第一个字段排序”——即，在这种情况下，与 , 相同`order by playerno`，因为`playerno`它是列表中的第一个字段。

如果您想要官方措辞，[SQL-92 标准](http://www.contrib.andrew.cmu.edu/%7Eshadow/sql/sql1992.txt)¹是这样说的：

```
10)If ORDER BY is specified, then each <sort specification> in the
        <order by clause> shall identify a column of T.

        Case:

        a) If a <sort specification> contains a <column name>, then T
          shall contain exactly one column with that <column name> and
          the <sort specification> identifies that column.

        b) If a <sort specification> contains an <unsigned integer>,
          then the <unsigned integer> shall be greater than 0 and not
          greater than the degree of T. The <sort specification> iden-
          tifies the column of T with the ordinal position specified by
          the <unsigned integer>. 
```

在这种情况下，`b`似乎适用。

不过，较新版本的 SQL 标准已删除此功能，因此新代码通常应避免使用它。基于 SQL 的数据库服务器已经弃用它一段时间了，但为了向后兼容，大多数服务器仍然支持它。同时，他们已弃用它的事实表明他们不再认为这是他们真正需要支持的功能，因此可以随时将其删除而无需进一步警告（例如，如果他们在该部分发现错误在他们的代码中，他们可能决定修复错误的最佳方法是禁用该功能）。

* * *

^(1\. 此报价来自免费提供的草案，而不是批准的标准。虽然我确信这个草案和标准的最终文本之间至少有一些变化（更不用说标准的一个版本和另一个版本之间），但这个基本的东西似乎不太可能在草案和最终版本之间发生变化标准。)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T23:12:45.467

这被称为“ORDER BY ordinal”，基本上按该位置的列排序。按 1 排序表示按第一个选定列排序。在您的示例中，这相当于说`ORDER BY playerno`

我不建议这样做，因为不清楚它引用的是哪一列，如果列顺序发生变化，查询将返回不同的结果。

更多资源：

[快速提示：按 1 Desc 订购](http://mattberseth.com/blog/2007/05/quick_tip_order_by_1_descendin.html)

[要踢的坏习惯 : ORDER BY ordinal](https://sqlblog.org/2009/10/06/bad-habits-to-kick-order-by-ordinal)

[SQL：按顺序排列](http://www.adp-gmbh.ch/ora/sql/order_by.html)

# python - Flask 对代码更改没有反应

> ID：11353691
> 
> 赞同：3
> 
> 时间：2012-07-05T23:02:15.303
> 
> 标签：python, flask

我是 Flask 的新手，正在实现一个小型应用程序。我成功地让它在访问某个网页时显示“Hello World”，但即使我更改代码，我也无法将其更改为“Hello World Again”。为什么它仍在运行旧代码，我怎样才能让它运行新代码？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T23:04:03.917

您需要[在调试模式下运行应用程序](http://flask.pocoo.org/docs/quickstart/#debug-mode)：

```
app.debug = True
app.run() 
```

或者

```
app.run(debug=True) 
```

但请记住，仅在您的开发环境中执行此操作：

> 即使交互式调试器在分叉环境中不起作用（这使得它几乎不可能在生产服务器上使用），它仍然允许执行任意代码。**这使其成为主要的安全风险，因此绝不能在生产机器上使用。**

您也可以`use_reloader=True`在不启用调试模式的情况下使用，但这不是一个好主意，因为您在开发期间确实需要调试器。

# c# - 从 DbType 获取 sql 类型名称

> ID：11353698
> 
> 赞同：2
> 
> 时间：2012-07-05T23:02:52.907
> 
> 标签：c#, sql-server

我需要从 打印真正的数据库类型名称`DbParameter.DbType`，但是当我做这样的事情时，`DbParameter.DbType.ToString()`我会得到例如`Int32`而不是`int`，是否有命令或属性来执行此操作，或者我是否需要编写 switch 语句？

如果有人需要，这里是代码：[DbType to real SQL type string](http://www.networkozone.com/snippets/c-sharp/9/dbtype-to-real-sql-type-string)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:16:35.570

您将不得不编写自己的转换器

数据类型映射可以在这里找到[MSDN](http://msdn.microsoft.com/en-us/library/cc716729.aspx)

# javascript - Selenium IDE 1.8.1 警告框：运行测试时看不到警告框

> ID：11353702
> 
> 赞同：1
> 
> 时间：2012-07-05T23:03:23.563
> 
> 标签：javascript, selenium

我正在用 selenium 和 Junit 编写测试，并将测试导入为 Junit4 Remote control for web application，而我正在运行测试它通过了这些步骤，但我看不到警报打开，但测试通过了。

为什么我在运行测试时看不到 alet 框？？？我会感谢答案。

assertEquals("请输入有效城市", selenium.getAlert());

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T04:46:34.103

在 Selenium 下，JavaScript 警报不会弹出可见的警报对话框。Selenium 不支持在页面的 onload() 事件处理程序中生成的 JavaScript 警报。在这种情况下，将生成一个可见的对话框，并且 Selenium 将挂起，直到有人手动单击 OK。

1.  要验证您的警报，请使用：storeAlertPresent(variableName)

2.  检索在上一个操作期间生成的 JavaScript 警报的消息，如果没有警报则失败：storeAlert (variableName)

所以现在你可以断言这个存储的警报。

还有一个命令，如果你想点击取消按钮而不是确定按钮：chooseCancelOnNextConfirmation()

# php - 如何使用 cookie 跟踪重定向之间的页面数？

> ID：11353703
> 
> 赞同：0
> 
> 时间：2012-07-05T23:03:39.373
> 
> 标签：php, redirect, cookies

我在一家在线网络调查公司工作——我们的参与者是根据他们参与的研究的长度获得报酬的。~~我有点懒~~为了验证报酬是否正确，我想通过 cookie 自动跟踪它以进行比较手动计数。另外，每个参与者可能有不同的计数，所以我希望能够更准确地补偿。时间不是很有效，因为有人可以走开然后再回来。

每个调查都像这样“参与页面”.php（域1）---->重定向.php（域2）->“外部调查”（不是我的）---->“endredirect”.php（域2）- --> “感谢页面”（域 1）。

目前我记录了您离开参与页面的时间，以及您返回结束页面的时间并计算分钟数并估计您应该收到多少。

当我们的参与者返回到最后一页时，是否可以使用 cookie 查看历史记录？如果可能的话，我只想倒数到起始页。

谢谢

# ruby-on-rails-3 - Rails 如何手动创建没有表单的子对象

> ID：11353707
> 
> 赞同：1
> 
> 时间：2012-07-05T23:04:07.813
> 
> 标签：ruby-on-rails-3, polymorphic-associations

我想知道最好的实现是在不使用表单的情况下以编程方式为父母生成单个子对象。

就我而言，我有一个现有的论坛系统，我想通过评论将其绑定到我的上传系统中。我想手动创建一个子论坛对象，以在创建上传的同一创建操作中讨论所述上传。这两个模型的关系如下：

儿童论坛：

```
class Forum < ActiveRecord::Base
   ...
   belongs_to :upload
end 
```

家长上传：

```
class Upload < ActiveRecord::Base
   ...
   has_one :forum
end 
```

我在想一些事情：

```
class UploadsController < ApplicationController
  ...
  def create
    #Create the upload and a new forum + initial post to discuss the upload
    @upload = Upload.new(params[:upload])
    @forum = Forum.new(:upload_id => @upload.id, :title => @upload.name...)
    @first_post = Post.new(:forum_id => @forum.id....)    
    if @upload.save && @topic.save && @first_post.save
      redirect_to :action => "show", :id => @upload.id
    else
      redirect_to :action => "new"
    end 
  end

end 
```

这与我想要做的非常接近，但是在保存父对象之前不会生成父 ID。我可能会做类似的事情：

```
@upload.save 
@forum = Forum.new(:upload_id => @upload.id...
@forum.save.... 
```

但我认为如果它们都经过验证，只保留对象可能会更干净。我不确定，还有其他人知道更好的实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T02:40:24.257

我建议将论坛创建从控制器移动到模型。只有在上传成功创建后才会创建论坛。

```
class Upload < ActiveRecord::Base
  ...
  has_one :forum
  after_create :create_forum
  ...
  def create_forum
    Forum.create(:upload_id => self.id, :title => self.name...)
  end
end

class Forum < ActiveRecord::Base
  ...
  has_many :posts
  after_create :create_first_post
  ...
  def create_first_post
    Post.new(:forum_id => self.id)
    # or self.posts << Post.new()
  end
end 
```

# php - 使用 cURL 和 PHP 操作对象

> ID：11353712
> 
> 赞同：0
> 
> 时间：2012-07-05T23:04:35.867
> 
> 标签：php, curl

下面包括在文件中找到的数据示例`1.php`：

```
: [
    {
        "ID": "1",
        "active": "1",
        "wait": "30"
    },
    {
        "ID": "6",
        "active": "1",
        "wait": "10"
    },
    {
        "ID": "8",
        "active": "1",
        "wait": "65"
    }
]
} 
```

到目前为止，这是我的代码，而且我还没有走得太远，所以任何帮助表示赞赏。

```
<?php
$url = "1.php";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1);
$data = curl_exec ($ch);
curl_close ($ch);  

if((date("H") < 9) || (date("H") > 24)) {
    echo "Closed";
} else {
    echo ($Queue_Time: <= 10) ? $data : $Queue_Time-5;
};
$result = json_decode ($json);
$arr = array(1, 2);

?> 
```

基本上，我想显示“ID”：“1”作为名称，例如“Meat”“ID”：“2”“Cheese”等。然后显示队列等待时间，即“wait”的值下一个到名字。这家商店只在上午 10 点到下午 5 点开放，所以在这些时间之外，我只想让它在等待时间之后显示名称和“关闭”旁边。

最后，如果等待时间大于 10 分钟，那么我想从该值中减去 5 分钟。

我无法让上面的代码按预期工作，非常感谢您的帮助。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T00:10:32.077

我在尝试得到你想要的东西时采取了一些自由，所以让我知道它有多接近：

```
// Assuming we have a correctly formatted JSON array from CURL
$data = '[
    {
        "ID": "1",
        "active": "1",
        "wait": "30"
    },
    {
        "ID": "6",
        "active": "1",
        "wait": "10"
    },
    {
        "ID": "8",
        "active": "1",
        "wait": "65"
    }
]
';

// This array maps IDs to Names
$department[1] = 'Meat';
$department[2] = 'Cheese';
$department[6] = 'Fish';
$department[8] = 'Vegetables';

// Decode the JSON data
$data = json_decode($data);

// Loop through each area
foreach ($data as $counter) {
    // Check if closed
    if((date("H") < 10) || (date("H") > 17)) {
        $queue = "Closed";
    } else {
        $queue = ($counter->wait <= 10) ? $counter->wait : $counter->wait-5;
    };
    // Output name and wait time
    echo $department[$counter->ID].' '.$queue.'<br />';

} 
```

# javascript - 将鼠标悬停在表格单元格 html javascript 上时弹出窗口

> ID：11353713
> 
> 赞同：0
> 
> 时间：2012-07-05T23:04:39.703
> 
> 标签：javascript, html, css

我正在编写一个 JavaScript 应用程序，我发现了一个不错的库[qtip2](http://craigsworks.com/projects/qtip2)。我的目标是当用户将鼠标悬停在表格中的每个单元格上时，会显示不同的信息。我上面提到的那个库可以在一个小的弹出窗口中显示信息。但是，我不确定如何在其他中设置此功能以在将鼠标悬停在每个单元格上时显示每个单元格的特定内容。有人知道我该怎么做吗？

```
function showInfo()
    {
            $('#demo-mouse').qtip({
                content : 'I position myself at the current mouse position',
                position : {
                    my : 'top left',
                    target : 'mouse',
                    viewport : $(window),       //keep it on-screen at all time if possible
                    adjust : {
                        x : 10, y : 10
                    }
                },
                hide : {
                    fixed : true                // Helps to prevent the tooltip from hiding occassionaly when tracking!
                },
                style : 'ui-tooltip-shadow'
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:17:05.597

您可以`content`在要显示提示的元素中使用扩展属性并使用类：

```
$('.selector').qtip({
    content: {
        text: function(api) {
            // Retrieve content from custom attribute of the $('.selector') elements.
            return $(this).attr('data-tip');
        }
    }
}); 
```

# php - 由另一个数组值排列键

> ID：11353716
> 
> 赞同：1
> 
> 时间：2012-07-05T23:05:08.313
> 
> 标签：php, arrays, logic

我有一个包含以下内容的数组 $params：

```
Array(
  0 => "array"
  1 => "arrayName" //variable
  2 => "key1" //optional&variable ie. 0 or 'foo'
  3 => "key2" //optional&variable ie. 0 or 'foo'
  //etc.
) 
```

另外，我有一个 stdObject ，其中包含正在请求的页面的所有变量（MVC 样式）。所以，我可以在那里有一个这样的数组：

```
$std = new stdObject();
$std->arrayName->array('foo', 'bar'); 
```

现在我想要 $std 数组的第一个值。因此，我在 $params 中使用“key1”参数并将其设置为“0”，因此它将选择 $std->arrayName[0] 值（“foo”）。请注意，我没有使用“key2”参数，因为我不想选择 $std->arrayName[key1][key2]。

但是如果我需要嵌套数组的值怎么办？

```
$std = new stdObject();
$std->arrayName->array('foo', array('bar', 'fish')); 
```

我将通过将“key1”参数设置为 1 并将“key2”参数设置为 1 来请求 $std->arrayName[1][1] 值（'fish'）。所以它会选择$std->arrayName[key1][key2]。

但是如果我有 10 个相互嵌套的数组呢？极不可能，但有可能。我想选择 $std->arrayName[key1][key2][key3][..][key10] 来选择位于那里的某个值。例如：$std->arrayName[0][3][4][6][2][9]['foo']['bar][9][2];

所以我的问题是：如何通过另一个数组 ($params) 中定义的值来选择某个数组 (arrayName) 的值，该数组充当第一个数组 (arrayName) 的键。但是，键的数量（$params 中的值）是可选的。

也许这个问题并不完全可以理解，所以请随时询问更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:38:54.000

您需要循环键数组并将每个级别分配给一个变量，直到您应该获得所需的值为止。

像这样的东西（未经测试，没有错误检查）：

```
function array_value_at ($array, $keys) {
  foreach ($keys as $key) {
    $array = $array[$key];
  }
  return $array;
} 
```

# php - 如果数组在 PHP 中不为空，那么显示表格的最佳方法是什么？

> ID：11353719
> 
> 赞同：2
> 
> 时间：2012-07-05T23:05:20.453
> 
> 标签：php

如果数组不为空（并且其中有值），那么我想显示表格。
但如果它为空，那么我根本不想显示任何表格代码。

使用向页面附加页脚的 MVC 框架。

避免以下陈述的最佳方法是什么：

```
<?php 
  if ($users) {
    echo '<table id="tha_table" cellpadding="0" cellspacing="0" width="100%">
            <thead>
              <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Email</th>
             </tr>
          </thead>
         <tbody>';
  } ?> 
```

而且，不想再做一次测试来添加表格页脚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:11:09.520

我想我明白你在追求什么......我会将所有 HTML 放在一个单独的文件中，并有条件地包含它。

```
if(!empty($users)) {
  include "users_table.template";
} 
```

请注意，如果您愿意，模板文件可以包含 php。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:10:46.217

我建议您使用模板系统或任何其他工具将您的 PHP 代码与 HTML 呈现分离。

我所知道的所有模板系统都允许根据布尔值跳过一个块，因此您只需在页面模板中包含（模板的）表，并用您选择的框架用作`if`或`repeat n times`构造的任何内容包围它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T23:36:46.100

我总是使用[empty()](http://php.net/manual/en/function.empty.php)来检查数组是否为空。Empty 还会检查变量是否为空。请注意，如果未设置数组变量，则 empty() 不会引发警告，这可能是可取的，也可能不是可取的。

```
<?php

   $displayUserTable = !empty($users);

?>

<?php if($displayUserTable): ?>

<table id="tha_table" cellpadding="0" cellspacing="0" width="100%">

<thead>
<tr>
    <th>First Name</th>
    <th>Last Name</th>
    <th>Email</th>
</tr>
</thead>

<tbody>

<?php foreach($users as $user): ?>

<tr>
    <td><?php echo htmlspecialchars($user['firstName']); ?></td>
    <td><?php echo htmlspecialchars($user['lastName']); ?></td>
    <td><?php echo htmlspecialchars($user['emailAddress']); ?></td>
</tr>

<?php endforeach; ?>

</tbody>

</table>

<?php endif; ?>

<?php if($displayUserTable): ?>

    <!-- show footer here... -->

<?php endif; ?> 
```

# asp.net - 我找不到数据库

> ID：11353720
> 
> 赞同：1
> 
> 时间：2012-07-05T23:05:23.383
> 
> 标签：asp.net, database, sql-server-2008, web-config

我正在接管一个网站的维护。几乎没有文档。我希望这种问题在这里是“好的”......

现在，我正在尝试查找/查看数据库，但我找不到它。

这是 web.config 中唯一的连接字符串：

```
<connectionStrings>
    <add connectionString="Data Source=YPOC\SQLEXPRESS;Database=Marco;User ID=yyy;Password=xxx;" name="DefaultConnectionString" />
</connectionStrings> 
```

问题：

1）这些参数是否等效？

```
 a) Database=Marco

 b) AttachDbFilename=|DataDirectory|\Marco.mdf

 c) Initial Catalog=Marco 
```

2) 如果#1 的答案是“是”，那么我应该在 App_Data 文件夹中找到一个名为 Marco.mdf 的数据库文件，对吧？

3) 但#2 不正确，因为我在 App_Data 文件夹中没有看到名为 Marco 的数据库文件 ... ;-x

4) 世界上哪里是 carmen sandi ...哎呀，我的意思是 Marco.mdf ？！

* * *

相关问题：

我不得不从名为 YPOC 的生产服务器复制所有文件。在 web.config 中，我想我需要更改“Data Source=YPOC\SQLEXPRESS”...我的 SQL Server 实例名称是“SQLEXPRESS”...因此，我应该将 DS 更改为“Data Source=.\SQLEXPRESS”吗“？

* * *

在 App_Data 文件夹中，我找到了 ASPNETDB.MDF ... 在服务器资源管理器中，我尝试连接以查看表，但我收到一条错误消息：

“...无法打开，因为它是版本 661。此服务器支持版本 655 及更早版本”

我做了一些研究，似乎版本 661 意味着它需要 SQL Server 2008 R2 ...但我已经安装了 ... ;-(

* * *

我习惯了共享托管环境，其中设置了 SQL Server 数据库并且易于连接。在这里，它在一个专用的云服务器（非托管）上，我被推到了一个新的领域，我什至找不到数据库...... ;-(

任何帮助是极大的赞赏 ...

*   纳米

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:22:08.233

停止，停止，停止，停止，停止使用`User Instance`和`AttachDbFileName`胡说八道。请。如果你忘记它们的存在，你会更加清醒。我是认真的。用户实例功能已被弃用是有原因的。

获取您的 MDF 文件，您可以通过使用 Windows 资源管理器搜索找到该文件（如果您一直在使用此`user instance`功能，您可能会找到多个，我不建议确定哪个是正确的）。找到要使用的*实例*后，使用`CREATE DATABASE Marco ... FOR ATTACH_REBUILD_LOG`. 然后，您的连接字符串应该指向您的服务器（是的，`.\SQLEXPRESS`如果您在本地连接应该没问题），并且应该通过逻辑名称引用您的数据库（例如`Marco`，没有特定 MDF 文件的路径信息）。

您还需要[为 SQL Server 2008 R2 安装 Service Pack 1](http://www.microsoft.com/en-us/download/details.aspx?id=26727)。看起来您在 SQL Server 2008 R2 的 RTM 后构建中创建了一个数据库（或在 2008 年使用 SP2+）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T18:02:24.970

“但是当我不知道 SQL 服务器地址等时，如何从我的开发计算机访问这个数据库？”

*   我找到了 Marco 数据库。它位于位于非托管 Web 服务器帐户上的 SQL Server 上。访问数据库的方法是使用远程桌面连接，然后使用位于服务器（不是我的开发桌面）上的 SQL Server Management Studio。SSMS 然后找到了服务器/数据库，瞧，已连接...我的困惑是尝试直接从我的开发桌面使用 SSMS 进行连接，而不是通过 RDC 使用位于服务器上的 SSMS ...

# android - Android换行符和git

> ID：11353723
> 
> 赞同：2
> 
> 时间：2012-07-05T23:05:37.437
> 
> 标签：android, git

我即将将一个android项目放入git存储库，但我对行尾有点不确定

我的这个项目目前存在于 Windows 上，因此 autocrlf 设置为 true，但是当我进行初始提交时，我收到以下警告：

警告：LF 将被替换为 /project/file.name 中的 CRLF 该文件将在您的工作目录中具有其原始行结尾。

首先，当我在 Windows 上时，为什么某些文件是 LF :-S？这是因为 android 是基于 linux 的并且期望它们是 LF 而不是 CRLF？其次，它为什么要将它们作为 CRLF 提交？我认为它“autocrlf true”应该作为windows签出，但作为UNIX签入？

总而言之，我希望能够同时使用我的 mac、linux 和 windows 机器来处理这个项目。完成此操作的最佳程序是什么？（过去，我总是对 mac/linux 使用“autocrlf input”，对 windows 使用“autocrlf true”，但我没有遇到任何问题，但这是我要放入 GIT 的第一个 android 项目，看起来表现不同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:52:00.047

只需不要打扰`autocrlf`:[保持它为 false](https://stackoverflow.com/questions/2016673/definitive-recommendation-for-git-autocrlf-settings/2016763#2016763)。
另请参阅“[如何在不同操作系统之间使用 git core.autocrlf 进行行尾转换](https://stackoverflow.com/questions/3206843/how-line-ending-conversions-work-with-git-core-autocrlf-between-different-operat/3209806#3209806)”。

如果您使用不更改 EOL 的编辑器，则可以在跨平台完全使用 LF eol 样式。

如果您发现某些*必须*强制执行 eol 的文件，请使用[`gitattribute eol`](http://git-scm.com/docs/gitattributes#_checking-out_and_checking-in)指令。
请参阅“[使用代码分发 git 配置](https://stackoverflow.com/questions/2333424/distributing-git-configuration-with-the-code/2354278#2354278)”。

# java - 通过 Java 使用 SQLXMLBulkload

> ID：11353725
> 
> 赞同：1
> 
> 时间：2012-07-05T23:05:42.533
> 
> 标签：java, .net, sql-server, bulk-load

是否可以`SQLXMLBulkload`使用 Java 使用 SQL Server 的组件？我正在为我的 Java EE 应用程序使用 SQL Server 2005 数据库。

如果没有，那么是否有任何类似的 Java API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T14:26:12.237

最终我发现没有好的方法可以做到这一点。将 XML 持久化到关系数据库仍然是一个挑战。
对于我的项目，我最终将 XML 编组到 Java，然后在 Hiberante 的帮助下将 Java 对象持久化到 DB：
我知道性能是这种方法的一个大问题，但我还没有遇到任何性能问题。另外，这种方法给了我灵活性，例如将属性值保存在单独的列中等。

# java - 大整数（字符串，16）

> ID：11353728
> 
> 赞同：-4
> 
> 时间：2012-07-05T23:05:47.627
> 
> 标签：java, hex

这行代码返回什么

> 字符串 s = "059185556356";
> 
> BigInteger b = 新 BigInteger(s,16)

16是做什么的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:08:35.860

如[文档中所述](http://docs.oracle.com/javase/1.4.2/docs/api/java/math/BigInteger.html#BigInteger)： 16 表示该字符串将被解释为 base-16，也称为“[十六进制](http://simple.wikipedia.org/wiki/Hexadecimal)”。

例子：

```
BigInteger b = new BigInteger("12",16)  // b == 0x12 == 18 in decimal
BigInteger b = new BigInteger("0A",16)  // b == 0x0A == 10 in decimal
BigInteger b = new BigInteger("10",16)  // b == 0x10 == 16 in decimal 
```

# java - 如何编写一个 Java 程序来编译、加载和使用来自 Web 的代码

> ID：11353732
> 
> 赞同：0
> 
> 时间：2012-07-05T23:06:38.103
> 
> 标签：java, android, compilation

我正在寻找编写一个 Java 程序，它将从网上下载一个文本格式的 Java 源文件，编译它，加载它，并将其用作运行程序的一部分。我听说这是可能的，但不知道如何编写代码来实现它。如果您能指出我这样的文档的方向，一个功能齐全的示例或教程会很棒。

一旦我了解了它是如何完成的，我计划使用这些知识来构建一个 Android 应用程序，该应用程序可以使用来自网络的代码进行自我定制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:14:24.473

桌面程序可以使用 shell 脚本来下载、编译和运行 Java 程序。Android 没有编译器，添加一个编译器并非易事。最简单的方法是也制作一个服务器程序。然后，Android 程序会告诉服务器程序下载并编译 Java 源代码，然后将结果发送给 Android 程序，然后由 Android 程序使用其[ClassLoader](http://developer.android.com/reference/java/lang/ClassLoader.html)加载它。

需要注意的一点是，JDK 编译器为标准 Java 虚拟机生成字节码，而 Android 的 JVM 使用的是 Dalvik VM，因此在编译 Java 类时，不能只使用 JDK；您必须使用 Android SDK 来生成 Android ClassLoader 可以使用的兼容字节码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:35:00.037

是的，从一般意义上说，你可以做你想做的事。然而，在 Android 的特定情况下，沙盒可能会施加限制，使您尝试做的事情变得困难或不可能。要在一般情况下执行此操作，您可以使用以下方法：

1.  使用您选择的 Web 库（例如[HttpClient](http://hc.apache.org/httpclient-3.x/)或[HtmlUnit](http://htmlunit.sourceforge.net/)，或者对于简单的任务，Java 的内置`URLConnection`类也完全可以接受）在本地下载 Java 文件。

2.  用于`System.exec()`派生一个`javac`进程来为您编译下载的 Java 文件（或使用[JavaCompiler](http://docs.oracle.com/javase/6/docs/api/javax/tools/JavaCompiler.html)实现来做同样的事情）。请注意，如果下载的 Java 文件使用您系统上不存在的外部 JAR/库，这可能会有点棘手。

3.  [使用 ClassLoader 加载已编译的类](https://stackoverflow.com/questions/738393/how-to-use-urlclassloader-to-load-a-class-file)。请注意，只有当您的运行时类路径还包含您正在加载的代码所依赖的任何外部 JAR/库时，您才能使用它。

但是，几乎可以肯定，第 2 步在 Android 设备上是不可能的。相反，您需要在其他地方编译与 Android 兼容的类文件（如 Yusuf 建议的那样在服务器上），然后从您的应用程序下载并加载已编译的类文件。或者，如果您真的在寻找挑战，也许您可​​以在您的应用程序中打包一个完整的 Java 编译器，并以这种方式编译 Java 文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T04:59:43.763

您正在尝试做的事情类似于[JRuby-for-Android](http://code.google.com/p/jruby-for-android/)项目或[AIDE](https://play.google.com/store/apps/details?id=com.aide.ui)两者都构建在设备上，但仅适用于创建要在 Android 上运行的应用程序，而不是向当前正在运行的应用程序添加代码功能应用程序。虽然 JRuby-for-Android 更适合编写脚本，但它可能提供足够的功能，因为它是开源的，您可以对其进行修改以满足您的需求。

AIDE 项目似乎更像是一项成就，因为您可以在设备上用 Java 编写来构建应用程序。功能包括 Dropbox 和 git 支持。AIDE 似乎是一个闭源应用程序。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T23:47:40.017

权限将是一个问题。您无法将文件写入安装应用程序的分区。如果您将应用程序移至 SD 卡，也许可以。

另一种方法是创建一个自定义类加载器并使用它将类文件提供给运行时。我不知道你是否可以在Android上做到这一点。

脚本是一种选择吗？我相信您可以找到适用于 Android 的脚本解释器。然后您可以在解释器中下载并执行脚本。

# dotnetopenauth - DotNetOpenAuth 和 FIPS 服务器错误

> ID：11353733
> 
> 赞同：1
> 
> 时间：2012-07-05T23:06:38.460
> 
> 标签：dotnetopenauth

我目前正在使用**DotNetOpenAuth v4.1.0.12182**来执行简单的*依赖方*功能，并且能够在不添加任何 web.config 条目的情况下使其正常工作（经过 Google 和 Yahoo 测试）。但是，此站点将部署到启用了以下设置的 Web 服务器上：

1.  转到控制面板 > 管理工具 > 本地安全策略
2.  找到设置“系统加密：使用符合 FIPS 的算法...”并将其设置为已启用

如果不启用此功能，该站点可以正常工作。启用此功能后，我收到服务器错误“此实现不是 Windows 平台 FIPS 验证的加密算法的一部分”。我确实在 dotnetopenauth v4-0 beta 版本页面上找到了信息，其中提到，从 DotNetOpenAuth 4.0 版本开始，其中一项更改是“现在可以在您的 .config 文件中配置符合 FIPS 的 SHA 算法”。

***我需要什么帮助...***

我想知道我需要进行哪些配置更改才能使此 FIPS 消息/错误消失。我查看了 [http://www.dotnetopenauth.net/developers/help/configuration-options/][2]，但找不到任何关于 FIPS 相关内容的明确说明。任何帮助将不胜感激，谢谢！

***更新（2012 年 7 月 10 日）***

我提供了我重新采取的步骤，以便可以复制错误：

1.  我使用了相当全新的 Server 2008 R2 Enterprise 安装（已经安装了 VS 2010，也许还有一些更新）
2.  添加了 Web 服务器角色
3.  添加了 .NET Framework 3.5.1 功能
4.  启用本地安全策略：系统加密：使用符合 FIPS 的算法进行加密、散列和签名
5.  重新启动了服务器
6.  编译/构建 OpenIdRelyingPartyWebForms 示例并将其发布以用作本地 IIS 网站
7.  遇到一个 URI 错误，导致我必须将应用程序池设置为使用 ASP.NET v4.0
8.  遇到另一个错误，导致我不得不“强制安装 .NET 4”：[http ://devonenote.com/2010/06/could-not-load-type-system-servicemodel-activation-httpmodule/](http://devonenote.com/2010/06/could-not-load-type-system-servicemodel-activation-httpmodule/)
9.  现在“依赖方”网页终于呈现了，所以我点击了仅限会员链接，然后点击了使用 Yahoo ID 登录选项
10.  经过大约 2-3 秒的暂停处理后，我收到：

> [ **InvalidOperationException**：此实现不是 Windows 平台 FIPS 验证的加密算法的一部分。]
> System.Security.Cryptography。**SHA512**托管..ctor() +4479214
> 
> [ **TargetInvocationException** : 调用目标抛出异常。] 尝试执行 System.Security.Cryptography 时。**SHA512** .Create +11 然后 System.Security.Cryptography.CryptoConfig.CreateFromName +1195
> 
> [ **TypeInitializationException** : 'DotNetOpenAuth.OpenId.HmacShaAssociation' 的类型初始化程序引发异常。] DotNetOpenAuth.OpenId.HmacShaAssociation.TryFindBestAssociation (cs:134)

*故障排除步骤...*

1.  将配置条目（基于 Andrew 提供的链接）添加到标签下的 Framework64/v4.0.30319/Config/machine.config 中。但是，由于我还没有在任何地方添加 Security.Cryptogrophy DLL，所以我从配置中删除了这些行（那些处理 HMACSHA512 的行）。
2.  重新启动了机器
3.  浏览并单击使用 Yahoo ID 登录按钮

> [ **InvalidOperationException**：此实现不是 Windows 平台 FIPS 验证的加密算法的一部分。]
> System.Security.Cryptography。**SHA3** ​​84 托管..ctor() +4486510
> 
> [ **TargetInvocationException** : 调用目标抛出异常。] 尝试执行 System.Security.Cryptography 时。**SHA3** ​​84 .Create +11 然后 System.Security.Cryptography.CryptoConfig.CreateFromName +1195
> 
> [ **TypeInitializationException** : 'DotNetOpenAuth.OpenId.HmacShaAssociation' 的类型初始化程序引发异常。] DotNetOpenAuth.OpenId.HmacShaAssociation.TryFindBestAssociation (cs:134)

我注意到现在它抱怨的是 SHA384 而不是 SHA512，所以 SHA512 的 machine.config 条目（告诉 ASP.NET 使用 System.Core 中的 SHA512Cng 类）必须正常工作！

所以接下来我继续添加 SHA384 和 SHA256 条目，执行 iisreset，然后浏览并单击使用 Yahoo ID 登录按钮。这次我终于被重定向到 Yahoo，登录，并被发送回我的 localhost URL，但收到了这个 FIPS 错误：

> [ **InvalidOperationException**：此实现不是 Windows 平台 FIPS 验证的加密算法的一部分。] System.Security.Cryptography。**HMACSHA256** ..ctor(Byte[] key) +4491026

所以现在我继续进行以下操作：

1.  添加在 HMACSHA512 machine.config 行中，我最初取出并复制了 HMACSHA256
2.  [根据此MSDN 博客](http://blogs.msdn.com/b/shawnfa/archive/2008/12/02/cryptoconfig.aspx)，从 Andrew 对 GAC (windows\assembly) 的响应中引用的 codeplex 项目添加了 Security.Cryptography.dll 文件
3.  重新启动了机器
4.  再次浏览并单击 Yahoo 按钮，但收到相同的错误

看起来好像新的 Cryptography DLL 没有被 ASP.NET “拾取”并使用。所以，接下来我尝试了：

1.  从 GAC 中删除 DLL
2.  重新启动机器
3.  添加 Cryptography DLL 作为对 OpenIdRelyingPartyWebForms 示例的引用并重新编译并发布它，覆盖现有的 IIS 网站文件
4.  再次浏览并单击 Yahoo 按钮，但收到相同的错误

### 关于如何使用**HMACSHA256**解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T17:50:44.407

使用安德鲁的评论/链接，我能够使解决方案正常工作。但是，我从未能够使用 .NET Framework 3.5 克服 FIPS 问题。我必须升级到 .NET Framework 4.0，然后将以下内容添加到**machine.config** XML 文件的根配置元素中：

```
<mscorlib>
   <cryptographySettings>
      <cryptoNameMapping>
         <cryptoClasses>
            <cryptoClass CoreSHA512="System.Security.Cryptography.SHA512Cng, System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
            <cryptoClass CoreSHA384="System.Security.Cryptography.SHA384Cng, System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
            <cryptoClass CoreSHA256="System.Security.Cryptography.SHA256Cng, System.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089"/>
         </cryptoClasses>
         <nameEntry name="System.Security.Cryptography.SHA512" class="CoreSHA512"/>
         <nameEntry name="System.Security.Cryptography.SHA384" class="CoreSHA384"/>
         <nameEntry name="System.Security.Cryptography.SHA256" class="CoreSHA256"/>
      </cryptoNameMapping>
   </cryptographySettings>
</mscorlib> 
```

如果 XML 在上面被删除，请点击 Andrew 提供的链接，您会在**joeudwin**的帖子中找到 XML 。我删除了“TestHMACSHA512”的行，并为 384 和 256 个条目复制了“TestSHA512”的行。我**不需要**从 CodePlex 下载 Security.Cryptography.dll。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:40:07.610

您需要配置 .NET 本身以创建所需算法的 FIPS 兼容版本。请查看此[先前提交并已修复](https://github.com/DotNetOpenAuth/DotNetOpenAuth/issues/47)的问题，包括评论，以获取有关如何进行的指导。

# sorting - 使用自定义排序表达式进行 Powershell 排序

> ID：11353736
> 
> 赞同：8
> 
> 时间：2012-07-05T23:06:51.737
> 
> 标签：sorting, powershell

我有一个包含编号目录的目录：

```
Archive
 |-1
 |-2
 |-3
 |-... 
```

我需要以数字方式创建下一个目录。我目前正在做的

```
$lastArchive = ls .\Archive | sort Name | select -Last 1
$dirName = '1'
if($lastArchive) {
  $dirName = ([int]$lastArchive.Name)+1
} 
```

一旦我们达到 10，这当然会失败，通过排序规则遵循 1 而不是 9。我需要排序表达式实际上是`[int]$_.Name`- 我将如何做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-05T23:32:16.310

我认为您需要将第一行更改如下：

```
$lastArchive = ls .\Archive | 
               Sort-Object -property @{Expression={[int]$_.Name}} | 
               Select-Object -Last 1 
```

然后，您可以按数字顺序创建下一个目录，如下所示：

```
mkdir ([int]$lastArchive.Name + 1).ToString() 
```

# sql - 左联接与 4 个表 oracle

> ID：11353739
> 
> 赞同：0
> 
> 时间：2012-07-05T23:07:10.700
> 
> 标签：sql, oracle, left-join

下面的查询按小时输出数据库中所有表的“逻辑读取”。每个 snap_id 在一小时的时间范围内。

```
SELECT
    a.snap_id,
    e.begin_interval_time,
    e.end_interval_time,
    owner               as schema,
    object_name         AS table_name,
    logical_reads_delta as logical_reads_per_table
FROM
    dba_hist_seg_stat     a,
    dba_hist_seg_stat_obj b,
    dba_hist_sqlstat      c,
    dba_hist_snapshot     e
WHERE
        owner      !=  'SYS'
    and owner      !=  'SYSTEM'
    and a.snap_id   =  c.snap_id
    and c.snap_id   =  e.snap_id
    AND a.obj#      =  b.obj#
    AND a.dataobj#  =  b.dataobj#
    AND object_type = 'TABLE'
ORDER BY
    a.snap_id; 
```

输出：

```
snap_id begin_interval_time       end_interval_time         schema table_name        logical_reads_per_table
------- ------------------------- ------------------------- ------ ----------------- -----------------------
8414    06/28/2012 7:00:11.006 AM 06/28/2012 8:00:16.540 AM WV90   WVT_WVPERFORATION 50288
8414    06/28/2012 7:00:11.006 AM 06/28/2012 8:00:16.540 AM WV90   WVT_WVPERFORATION 50288
8414    06/28/2012 7:00:11.006 AM 06/28/2012 8:00:16.540 AM WV90   WVT_WVPERFORATION 50288
8415    06/28/2012 8:00:16.540 AM 06/28/2012 9:00:21.516 AM EG     USER_GROUP_LIST   105328
8415    06/28/2012 8:00:16.540 AM 06/28/2012 9:00:21.516 AM EG     USER_GROUP_LIST   105328 
```

我认为存在重复，因为每个表都有唯一的 SQL_ID（没有显示）。

我需要做一个左连接（我认为）和分组以获得我真正想要的指定输出。

我希望输出是这样的......

```
SNAP_ID | BEGIN_INTERVAL_TIME | END_INTERVAL_TIME ->>> OWNER | OBJECT_NAME | LOGICAL_READS_DELTA (logical reads in the time frame) 
```

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:25:47.950

您可以尝试使用`DISTINCT`关键字删除重复项。

```
SELECT DISTINCT 
      a.snap_id, 
      e.begin_interval_time, 
      e.end_interval_time, 
      owner as schema, 
      object_name AS table_name, 
      logical_reads_delta as logical_reads_per_table
FROM  dba_hist_seg_stat a, 
      dba_hist_seg_stat_obj b, 
      dba_hist_sqlstat c, 
      dba_hist_snapshot e
WHERE owner != 'SYS'
      and owner!= 'SYSTEM'
      and a.snap_id=c.snap_id
      and c.snap_id=e.snap_id
      AND a.obj# = b.obj#
      AND a.dataobj# = b.dataobj#
      AND object_type = 'TABLE'
ORDER BY a.snap_id;` 
```

# pointers - 在 Fortran 77 中打印变量的地址

> ID：11353740
> 
> 赞同：3
> 
> 时间：2012-07-05T23:07:12.583
> 
> 标签：pointers, printing, fortran77

如何在 Fortran 77 中打印变量的地址？例子：

```
 subroutine foo

      integer d3
c Now I want to print "Address of d3: " followed by its address. 
```

当然，C 中的等价物是

```
int d3;
printf("Address of d3: %p\n", &d3); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:29:48.160

尽管在技术上不是 Fortran 77，但大多数 fortran 编译器都提供了 LOC 函数来获取变量的地址。

见： http: [//gcc.gnu.org/onlinedocs/gfortran/LOC.html](http://gcc.gnu.org/onlinedocs/gfortran/LOC.html)

# python - 我无法通过 wx 事件调用在类和选项卡之间更新我的变量

> ID：11353742
> 
> 赞同：0
> 
> 时间：2012-07-05T23:07:20.500
> 
> 标签：python, wxpython

如果运行此代码，您将从面板 1 上的组合框中获取默认值，但在更改面板 2 上的值后，从面板 1 按钮调用的值不会反映面板 2 上值的变化。

```
 import wx

class PanelOne(wx.Panel):
    def __init__(self, parent, id):
        wx.Panel.__init__(self, parent, id)

        self.button1 = wx.Button(self, -1, label="Panel 1 Test",
            pos=wx.Point(100, 100))
        self.button1.Bind(wx.EVT_BUTTON, self.button1Click, self.button1)

    def button1Click(self,event):
        p2=PanelTwo(self, 0)
        print "Panel 1: %s" % p2.C1
        print "Panel 1: %s" % p2.C2

class PanelTwo(wx.Panel):
    def __init__(self, parent, id):
        wx.Panel.__init__(self, parent, id)

        # Default Declarations
        self.C1 = List1[0]
        self.C2 = List2[-1]

        self.combo1 = wx.ComboBox(self, -1, value=List1[0], pos=wx.Point(100, 30),
        size=wx.Size(100, 150), choices=List1, style = wx.CB_READONLY)
        self.Bind(wx.EVT_COMBOBOX, self.EvtCmb1, self.combo1)

        self.combo2 = wx.ComboBox(self, -1, value=List2[-1], pos=wx.Point(300, 30),
            size=wx.Size(100, 150), choices=List2, style = wx.CB_READONLY)
        self.Bind(wx.EVT_COMBOBOX, self.EvtCmb2, self.combo2)    

        self.button1 = wx.Button(self, -1, label="Panel 2 Test",
            pos=wx.Point(100, 100))
        self.button1.Bind(wx.EVT_BUTTON, self.button1Click, self.button1)

    def button1Click(self,event):
        print "Panel 2: %s" % self.C1
        print "Panel 2: %s" % self.C2

    def EvtCmb1(self, event):
        combo1 = (event.GetString())
        self.C1 = combo1

    def EvtCmb2(self, event):
        combo2 = (event.GetString())
        self.C2 = combo2

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Testing 123", size = (500, 400) )

        p = wx.Panel(self)
        nb = wx.Notebook(p)

        panel1 = PanelOne(nb,-1)
        panel2 = PanelTwo(nb,-1)

        nb.AddPage(panel1, "Page One")
        nb.AddPage(panel2, "Page Two")

        sizer = wx.BoxSizer()
        sizer.Add(nb, 1, wx.EXPAND)
        p.SetSizer(sizer)

#Combo1
List1 = ['Apple', 'Banana']
#Combo2
List2 = ["1", "2", "3", "4"]

app = wx.App(redirect=False)
frame = MainFrame()
frame.Show(True)
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T03:42:25.627

我发现您的代码令人困惑，但我认为我发现了问题。考虑你的`PanelOne.button1Click()`功能：

```
def button1Click(self,event):
    p2=PanelTwo(self, 0)
    print "Panel 1: %s" % p2.C1
    print "Panel 1: %s" % p2.C2 
```

您`PanelTwo`每次都在创建一个新实例，这意味着它将始终具有默认值。想想汽车的品牌和型号等类。我可以有一辆丰田凯美瑞，你可以有一辆丰田凯美瑞。它们是同一类型（类别）的汽车，但它们是不同的汽车（不同的实例）。我对*我的*凯美瑞所做的任何改变显然都不会影响*你*的，因为它们完全是不同的对象。所以按照这个类比，每次`PanelOne.button1Click()`调用，它都会购买一个新的凯美瑞（创建一个新的实例）；它没有一个已经存在的。无论其他车主如何改装他们的汽车，这辆新车都带有所有默认选项。

所以基本上，你的`panel1`实例和你的`panel2`实例根本不互相交谈，所以`panel1`对`panel2`. 你有几种方法可以解决这个问题。最简单的方法是`panel2`作为. 像这样：`init``panel1`

```
class PanelOne(wx.Panel):
    def __init__(self, parent, id, p2):
        wx.Panel.__init__(self, parent, id)

        self.p2 = p2 #store panel2 so we can check it later

        #do the rest of your setup

   def button1Click(self,event):
        print "Panel 1: %s" % self.p2.C1
        print "Panel 1: %s" % self.p2.C2

class MainFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, title="Testing 123", size = (500, 400) )

        panel2 = PanelTwo(nb,-1)
        panel1 = PanelOne(nb,-1, panel2) #panel1 needs to be able to read panel2's settings

        #do the rest of your setup 
```

这仍然不是一个很好的解决方案。通常，我会尝试使用[PubSub](http://wiki.wxpython.org/WxLibPubSub)在类之间传递信息而不会产生依赖关系（即注意即使在您的原始代码中`PanelOne`也不可能存在`PanelTwo`），但我认为这对于您的目的来说过于复杂。

# java - 如何将 .java 文件及其 mysql 数据库转换为 .exe

> ID：11353743
> 
> 赞同：0
> 
> 时间：2012-07-05T23:07:22.553
> 
> 标签：java, mysql, exe

我正在使用通过 mysql-connector-java-5.1.21 jdbc 连接的 Mysql 数据库和neatbeans IDE，我想将我笔记本电脑中的程序转换为 .exe 文件以安装在 anthor PC 的.......帮助中请 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:12:04.127

你不能那样做，你需要把 mysql 和 jre 连同那些 java 类一起拖过去。您可以实现的最好的结果是一些包含其中所有内容的启动器。

如果您希望这是一个单一的、可移植的二进制文件，最好的办法是使用一些嵌入式 SQLDB，例如 HSQLDB。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:15:18.163

我知道这样做的唯一方法是使用[Launch4j](http://launch4j.sourceforge.net/) 。

# ios - iOS推送通知未发送

> ID：11353744
> 
> 赞同：1
> 
> 时间：2012-07-05T23:07:25.250
> 
> 标签：ios, push-notification, urbanairship.com, dev-to-production

我一直在开发一个通过 UrbanAirship 提供推送通知的应用程序，它非常适合开发。问题是当我创建一个 Ad Hoc 构建时。推送通知似乎停止工作。我不确定故障发生在哪里，但它似乎不起作用。

我已经为“开发”和“生产”推送通知设置了我的应用 ID，并且在构建和发布之前添加了证书。我确信我也在为我的分发移动设备使用正确的应用程序 ID。

我不知道可能出了什么问题。有没有其他人经历过这个？

# entity-framework - 设置 EF 以使用 Castle Windsor

> ID：11353746
> 
> 赞同：0
> 
> 时间：2012-07-05T23:07:31.273
> 
> 标签：entity-framework, castle-windsor

我已经将我的项目设置为使用实体框架。这是一种数据库优先的方法。

对于 IoC，我使用的是 Castle Windsor，并且该项目设置为注入所有依赖项。我的问题是，是否需要设置 Castle 来为我的 EF 实体做同样的事情？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-28T03:58:49.183

有多种方法可以将实体框架与 Castle 结合使用。我建议您同时采用[工作单元](http://www.primaryobjects.com/CMS/Article122.aspx)和[存储库](http://www.remondo.net/repository-pattern-example-csharp/)模式。DbContext 提供了工作单元的大部分功能，而 DbSet 类似地提供了存储库所需的大部分功能。

您将遇到的主要问题是 EF 不了解模型对象的依赖注入。EF 在分配模型对象时总是使用空构造函数，这意味着我们没有机会对模型对象进行依赖注入。我们通过使用 DbContext 上的对象物化钩子解决了这个问题：

```
((IObjectContextAdapter)this).ObjectContext.ObjectMaterialized += EFObjectLoadInitializer; 
```

然后 EFObjectLoadInitializer 将内核注入模型对象（我们所有的模型对象都必须支持 IInjectKernel 接口）。注入后，内核将用于解决任何其他依赖项。它不是很干净，但运行良好，允许我们利用我们在 Windsor 中建立的其他基础设施。

# apache-flex - 当 Flex 中没有数据时，如何消除时间序列数据图表中的空白？

> ID：11353752
> 
> 赞同：1
> 
> 时间：2012-07-05T23:08:04.437
> 
> 标签：apache-flex, charts, time-series, timeserieschart

我正在使用 Flex 绘制时间序列数据图表。数据范围为 2002 年至 2009 年，但在某些时间段（即 4/2004 至 8/2005）数据不可用。以下几行显示了我用于图表的标签：

```
<mx:Canvas id="cp" backgroundColor="#ffffff" fontFamily="Verdana" fontSize="12" color="#093A89" fontWeight="bold" width="100%" height="100%" alpha="1" creationComplete="init()">
<mx:LineChart id="cChart"  showDataTips="true" paddingRight="40" paddingLeft="30" width="100%" height="85%">
    <mx:verticalAxis>
        <mx:LinearAxis id="linearAxis" baseAtZero="false" title="{parameterLabel}" minorInterval="0.5" interval="1.0"/>
    </mx:verticalAxis>
    <mx:verticalAxisRenderers>
        <mx:AxisRenderer axis="{linearAxis}" fontSize="10">
            <mx:axisStroke>
                <mx:SolidColorStroke weight="6" color="#BBCCDD" alpha="1" caps="square"/>
            </mx:axisStroke>                    
        </mx:AxisRenderer>
    </mx:verticalAxisRenderers>
    <mx:horizontalAxis>
        <mx:DateTimeAxis id="ca" minimum="{sDate}" maximum="{eDate}" title="Date" dataUnits="days" dataInterval="1" labelUnits="days"/> 
    </mx:horizontalAxis>
    <mx:horizontalAxisRenderers>
        <mx:AxisRenderer axis="{ca}" canDropLabels="true" fontSize="10" labelRotation="45">         
            <mx:axisStroke>
                <mx:SolidColorStroke weight="6" color="#BBCCDD" alpha="1" caps="square"/>
            </mx:axisStroke>                    
        </mx:AxisRenderer>              
    </mx:horizontalAxisRenderers>
    <mx:series>
        <mx:LineSeries id="l1" visible="false"/>
    </mx:series>
</mx:LineChart>
<mx:Legend id="mylgn" horizontalCenter="0" bottom="32"/>
<s:Label id="lblChart1" text="{dataType} {parameterLabel} at {streamLabel}" horizontalCenter="0" bottom="20"/>
<s:Label id="lblChart2" text="{optionalText}" horizontalCenter="0" bottom="5"/> 
```

下图说明了上述代码创建的图表： ![在此处输入图像描述](../Images/6edcf6d62d4f491b6ffa1633cf62cad9.png)

如您所见，没有数据的间隔存在间隙。有没有办法在没有数据的情况下删除/减少间隔？此类数据的最佳做法是什么？

任何想法或建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:35:55.473

这是通过您的`dataProvider`.

要在缺失样本之间显示一条水平线，您必须向数据提供者添加一个附加样本，其值等于最后一个样本。

如果您有以下时间序列数据：

```
timestamp    value
4/2004       3
8/2005       23 
```

您将在 8/2005 之前添加一个额外的样本，等于之前的值 3。

```
timestamp    value
4/2004       3
7/2005       3 <-- insert sample
8/2005       23 
```

不是在值 3 和 23 之间进行插值，而是显示一条平坦的水平线。

**样本数据模型**

```
package
{
    public class TrendData
    {
        public var timestamp:Date;
        public var value:Number;
    }
} 
```

**静态适配器实用程序**

```
package
{
    import mx.collections.ArrayList;

    public class TimeSeriesDataAdapter
    {

        public static function interpolate(data:ArrayList):ArrayList
        {
            var set:ArrayList = new ArrayList();
            var timespan:Number;

            // add first sample:
            set.addItem(data[0]);

            for (var i:uint = 1; i < data.length; i++)
            {
                // measure timestamp between current sample and last sample
                timespan = TrendData(data[i]).timestamp.time - TrendData(data[i-1]).timestamp.time;

                // if the timespan is greater than desired range (1-day), add a sample
                if(timespan >= 86400000)
                {
                    var trendData:TrendData = new TrendData();

                    // set timestamp just before sample
                    trendData.timestamp = new Date(TrendData(data[i]).timestamp.time - 1);

                    // set value to previous value
                    trendData.value = TrendData(data[i-1]).value;

                    set.addItem(trendData);
                }

                set.addItem(data[i]);
            }

            return set;
        }

    }
} 
```

**数据可视化实现**

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayList;

            [Bindable]
            [ArrayElementType("TrendData")]
            public var data:ArrayList
        ]]>
    </fx:Script>

    <mx:LineChart dataProvider="{TimeSeriesDataAdapter.interpolate(data)}" />

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T23:34:31.073

我使用 Jason 的回答来解决图表中的差距问题。但是，为了使代码适合我的应用程序，我应用了以下更改。1- 我将 ArryList 替换为 ArrayCollection 2- 我没有使用 TrendData 类 3- 由于我提交的日期是字符串，我必须先将其转换为日期 4- 我认为 7 天或更长时间是一个间隔 5- 我必须在创建过多点之前对我的 ArrayCollection 进行排序。

下面显示了我的 TimeSeriesDataAdapter.interpolate 函数版本：

```
 public static function interpolate(data:ArrayCollection):ArrayCollection
 {
      var set:ArrayCollection = new ArrayCollection();
      var timespan:Number;
      var oneDayTime:Number = 86400000; // 1000*60*60*24 = 1 day
      for (var j:uint = 1; j < data.length; j++)
      {
           // measure timestamp between current sample and last sample
           data[j].formattedDate  = DateField.stringToDate(data[j].Date,"MM/DD/YYYY");
           data[j].time  = data[j].formattedDate.time;
      }
      var dataSortField:SortField = new SortField(); 
      dataSortField.name = "time"; 
      var numericDataSort:Sort = new Sort(); 
      numericDataSort.fields = [dataSortField]; 
      data.sort = numericDataSort; 
      data.refresh(); 
      // add first sample:
      set.addItem(data[0]);
      for (var i:uint = 1; i < data.length; i++)
      {
           // measure timestamp between current sample and last sample
           timespan = data[i].time - data[i-1].time;
           // if the timespan is greater than desired range (7-days), add a sample
           if(timespan >= oneDayTime*7) 
           {
                var trendData:Object = new Object();
                var timestamp:Date = new Date();
                trendData = data[i-1];
                // set timestamp just before sample
                timestamp.time = data[i].time - 1;
                trendData.Date = DateField.dateToString(timestamp,"MM/DD/YYYY");
                set.addItem(trendData);
           }
           set.addItem(data[i]);
      }
      return set;
 } 
```

# uitableview - 配置 TableViewCell 播放音频

> ID：11353757
> 
> 赞同：0
> 
> 时间：2012-07-05T23:10:01.013
> 
> 标签：uitableview, avaudioplayer, xcode4.3

我有一个应用程序，当在视图控制器中按下按钮时，它当前会播放 5 秒的声音。我正在尝试将此设置更改为如果我有一个表格视图，则触摸特定单元格并播放声音。我不希望您选择单元格并将其推送到另一个窗口以播放声音的动作。我只是想让声音在触摸单元格时播放。

目前对于我的按钮设置，我有以下在我的视图控制器中播放声音：

在 SoundLibViewController.h

// 识别与声音文件关联的 UIButton

```
-(IBAction)CarHorn:(id)sender; 
```

@结尾

在 SoundLibViewController.m

```
-(IBAction)CarHorn:(id)sender {
    CFBundleRef mainBundle = CFBundleGetMainBundle();
    CFURLRef soundFileURLRef;
    soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"CarHorn", CFSTR ("wav"), NULL);

    UInt32 soundID;
    AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
    AudioServicesPlaySystemSound(soundID); 
} 
```

不幸的是，我在网上找不到任何帮助来指出将我的代码更改为合并 tableviewcell 的方向。

举一个我想要做的例子：你进入你的 iPhone/iPad 并在设置下选择“声音”。然后您选择“铃声”，它会将您带到声音列表。如果您按下与其播放的声音相关的单元格。这就是我想做的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:42:49.833

你需要这样的东西`UITableViewDelegate`

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
        NSString * soundName = [self.soundNames objectAtIndex: indexPath.row]; // Assuming you have an array of sound names

        CFBundleRef mainBundle = CFBundleGetMainBundle();
        CFURLRef soundFileURLRef;
        soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef)soundName, CFSTR ("wav"), NULL);

        UInt32 soundID;
        AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
        AudioServicesPlaySystemSound(soundID); 
} 
```

# jquery - 尝试使用 jquery ajax 和 jersey 作为 json 发布到 RESTful Web 服务

> ID：11353759
> 
> 赞同：3
> 
> 时间：2012-07-05T23:10:09.303
> 
> 标签：jquery, json, web-services, post, jersey

我制作了一个 RESTful Web 服务。

```
@POST
@Path("/test")
@Consumes({ MediaType.APPLICATION_JSON})
public String test(TestObject to)
{
    System.out.println(to.getTestString());
    return "SUCCESS";
} 
```

我有使用 @XmlRootElement 创建的对象

```
@XmlRootElement
public class TestObject implements Serializable {
    private static final long serialVersionUID = 1L;

    private String testString;

    public TestObject() {}

    public TestObject(String testString) {
        this.testString = testString;
    }

    public String getTestString() {
        return testString;
    }
    public void setTestString(String testString) {
        this.testString = testString;
    }
} 
```

然后我尝试使用以下 ajax 调用来调用它

```
$.ajax({
    url: 'http://localhost:8080/testPage/test/',
    type: 'POST',
    data: '{"testString":"test"}',
    dataType: 'text',
    contentType: "application/json; charset=utf-8",
    success: function(jqXHR, textStatus, errorThrown){
        alert('Success');
    },
    error: function(jqXHR, textStatus, errorThrown){
        alert("jqXHR - " + jqXHR.statusText + "\n" + 
              "textStatus - " + textStatus + "\n" + 
              "errorThrown - " + errorThrown);
    }
}); 
```

我最终得到了 textStatus 的简单“错误”。它似乎甚至没有到达我的测试服务。当我只传递一个文本/纯文本时，我要让 GET 工作，甚至 POST 工作。当我尝试传递一个 json 时，我无法让它工作。

使用[海报](https://addons.mozilla.org/en-US/firefox/addon/poster/)！Firefox 的附加组件我能够成功调用传递相同数据的服务。我添加了一些额外的日志记录来捕获服务端的请求标头，因此它似乎至少看到了请求，但它没有做任何事情。

以下是我从日志中得到的请求。第一个是失败的ajax。最下面的那个是 POSTER 成功的那个。（不是真正的代码，但我看不出有什么更好的东西可以放入）

```
INFO: 1 * Server in-bound request
1 > OPTIONS http://localhost:8080/testPage/test 
1 > Host: localhost:8080
1 > User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0.1
1 > Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
1 > Accept-Language: en-us,en;q=0.5
1 > Accept-Encoding: gzip, deflate
1 > DNT: 1
1 > Connection: keep-alive
1 > Origin: http://localhost:8081
1 > Access-Control-Request-Method: POST
1 > Access-Control-Request-Headers: content-type
1 > Pragma: no-cache
1 > Cache-Control: no-cache
1 > 

INFO: 2 * Server in-bound request
2 > POST http://localhost:8080/testPage/test
2 > Host: localhost:8080
2 > User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:13.0) Gecko/20100101 Firefox/13.0.1
2 > Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
2 > Accept-Language: en-us,en;q=0.5
2 > Accept-Encoding: gzip, deflate
2 > DNT: 1
2 > Connection: keep-alive
2 > Content-Type: application/json; charset=utf-8
2 > Content-Length: 22
2 > Cookie: JSESSIONID=bvizai6k0277
2 > Pragma: no-cache
2 > Cache-Control: no-cache
2 >
{"testString": "test"} 
```

由此看来，似乎没有将 json 传递给服务。我已经尝试如上所述写出 json，并且尝试使用 JSON.stringify 创建它，但均未成功。

有谁知道我在尝试在 jquery ajax 调用中使用 POST 将 json 发送到 RESTful Web 服务时做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T01:32:11.683

你试过`dataType: 'json'`而不是`dataType: 'text'`在你的ajax调用中吗？

# android - 指定图像叠加的屏幕位置

> ID：11353760
> 
> 赞同：0
> 
> 时间：2012-07-05T23:10:22.487
> 
> 标签：android, android-layout

在 Android 中，我知道如何叠加两个图像并为它们设置动画。问题是如何在第一个图像的特定位置覆盖第二个图像。

例如，第一个图像是带有电源开关的设备的图像，第二个图像是在动画时会发光的电源 LED。

我想知道如何在覆盖层中指定电源 LED 的位置，以便它覆盖电源开关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:34:47.427

您可以做的一件事是将两个图像都放在 a 中`FrameLayout`，并将两个图像的宽度/高度都设置为`wrap_content`. 您添加到的最后一个`FrameLayout`将在顶部。然后，您可以通过以下几种方式之一独立定位这两个图像：

1) 您可以`layout_gravity`将这两个项目的 设置为，`top|left`然后将两个图像设置为相对于 的左上角的位置。`layout_marginTop``layout_marginLeft``FrameLayout`

2）如果你想，说图像 A 上的中心图像 B，你可以将图像 A 设置为`layout_gravity top|left`, `layout_marginLeft`0, `layout_marginTop`0，然后将`layout_gravity`图像 B 设置为`center`。这种方法在各种设备上运行时更加稳健。您甚至可以使用边距相对于其居中位置偏移图像 B。

此时你应该明白了。您可以结合`layout_gravity`边距来根据需要定位图像。

一些警告：

1）这不是一种非常有效的处理方式。如果只是较大布局中的两个图像，那没什么大不了的。但是，如果您在布局中多次执行此技术，渲染性能将会受到影响。如果是这种情况，您应该考虑改为创建自定义视图。

2）您需要明确`layout_gravity`设置`FrameLayout`. 否则`FrameLayout`将忽略子视图的`layout_marginTop`and`layout_marginLeft`属性。

最后，您可以使用 来执行相同的技巧`RelativeLayout`，使用它的属性来相对于彼此定位图像。就像`FrameLayout`，添加到布局的最后一个视图显示在其他视图之上。

# java - 将 double[] 数组转换为 string[] 数组

> ID：11353768
> 
> 赞同：-1
> 
> 时间：2012-07-05T23:11:06.623
> 
> 标签：java, arrays, type-conversion

我想知道使用什么代码将 double[] 数组转换为 string[] 数组

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T23:14:22.720

您需要创建一个与原始数组大小相等的目标数组，并对其进行迭代，逐个元素转换。

例子：

```
double[] d = { 2.0, 3.1 };
String[] s = new String[d.length];

for (int i = 0; i < s.length; i++)
    s[i] = String.valueOf(d[i]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:42:54.827

如前所述，您必须迭代并将每个项目从双精度转换为字符串。

或者，也可以避免显式迭代并执行以下操作：

```
// source array
Double[] d_array = new Double[] { 1, 2, 3, 4 };

// create a string representation like [1.0, 2.0, 3.0, 4.0]
String s = Arrays.toString(d_array);

// cut off the square brackets at the beginning and at the end
s = s.substring(1, s.length - 1);

// split the string with delimiter ", " to produce an array holding strings
String[] s_array = s.split(", "); 
```

# windows - 访问设备配置空间——win内核PCI设备

> ID：11353771
> 
> 赞同：2
> 
> 时间：2012-07-05T23:11:14.593
> 
> 标签：windows, kernel, device-driver, wdk, pci

我正在编写获取 pci 设备的方法，以编程方式给定供应商 ID、设备 ID（就像 Linux 内核中的 pci_get_device 一样）。

为此，我需要获取设备对象配置。我从这里读到同样的内容：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff558707 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558707(v=vs.85).aspx)

现在为了测试这一点，我制作了假驱动程序 - 服务安装框架，它将安装我的 I/O 设备驱动程序，并且在 DriverEntry 中我可以测试这个 PCI 功能。

但是操作系统会因 irql_not_less_or_equal 崩溃，在

```
irp = IoBuildSynchronousFsdRequest(IRP_MJ_PNP,
                                       targetObject,
                                       NULL,
                                       0,
                                       NULL,
                                       &event,
>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> &ioStatusBlock); 
```

谁能告诉我这有什么问题，（我从驱动程序条目中调用它，并传递当前安装驱动程序的设备对象。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T06:22:30.710

您在 中没有有效的 PDO `DriverEntry()`。`DriverEntry`大致对应`main()`于用户空间应用程序，在驱动程序加载到内存后首先调用。`DriverEntry`主要目的是向操作系统注册驱动程序，其代码独立于实际设备。只有在操作系统调用了您的初始化回调之后（在它识别出您的设备之后），您才能拥有一个 PDO - 并且回调将在 DriverEntry 完成后调用（实际上，回调应该作为内部驱动程序注册的一部分提供给操作系统`DriverEntry()`）。

# facebook - 在 pythonforfacebook appengine 示例中始终获取 cookie=None

> ID：11353773
> 
> 赞同：1
> 
> 时间：2012-07-05T23:11:26.133
> 
> 标签：facebook, google-app-engine, python-2.5

我正在尝试执行[https://github.com/pythonforfacebook/facebook-sdk/](https://github.com/pythonforfacebook/facebook-sdk/)的 appengineexample 。但是，我的 cookie 值始终为 None。我进行了调试，发现它确实携带信息，但是在 facebook.get_user_from_cookie 中，它无法提取/解析该值。

有没有人能够执行这个例子？我正在使用 Python25。我试图在我的示例中实现类似的功能。

我需要通过 facebook 登录用户并将他们的详细信息存储在应用引擎数据存储中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T01:59:40.637

产生此问题的原因可能有多种。如果没有详细信息，我们将无法提供帮助。尝试记录一些信息将帮助我们找出错误是什么。

[https://github.com/pythonforfacebook/facebook-sdk/blob/master/facebook.py](https://github.com/pythonforfacebook/facebook-sdk/blob/master/facebook.py)

由于您使用 get_user_from_cookie 函数收到 None 。打开 facebook.py，在将产生 None 结果的行添加两个日志。然后日志可以告诉问题出在哪里。

```
def get_user_from_cookie(cookies, app_id, app_secret):
    """Parses the cookie set by the official Facebook JavaScript SDK.

    cookies should be a dictionary-like object mapping cookie names to
    cookie values.

    If the user is logged in via Facebook, we return a dictionary with
    the keys "uid" and "access_token". The former is the user's
    Facebook ID, and the latter can be used to make authenticated
    requests to the Graph API. If the user is not logged in, we
    return None.

    Download the official Facebook JavaScript SDK at
    http://github.com/facebook/connect-js/. Read more about Facebook
    authentication at http://developers.facebook.com/docs/authentication/.
    """
    cookie = cookies.get("fbsr_" + app_id, "")
    if not cookie:
        logging.info("no cookies")   # ADD LOG HERE!
        return None
    parsed_request = parse_signed_request(cookie, app_secret)
    try:
        result = get_access_token_from_code(parsed_request["code"], "",
                                          app_id, app_secret)
    except GraphAPIError:
        logging.info("get access token failed") # ADD LOG HERE!!
        return None
    result["uid"] = parsed_request["user_id"]
    return result 
```

# c# - 如何从后面的代码中关闭对话框本身？

> ID：11353774
> 
> 赞同：-2
> 
> 时间：2012-07-05T23:11:26.840
> 
> 标签：c#, dialog, code-behind, neatupload

我在 .aspx 中创建了一个对话框。此对话框用于更新某些内容并显示进度，我希望它在更新完成后自动关闭。那么，当某事完成后，我可以在不单击“确定”或“取消”按钮的情况下从 c# 代码关闭对话框吗？

我使用我公司的自制对话框类打开了这个对话框。我在此对话框中添加了一个“neatUpload”元素，以便它可以将一些文件从客户端机器上传到服务器。我想要实现的是在上传完成后关闭对话框。我不知道这是否可能。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:44:50.287

您不能从服务器端关闭客户端脚本。它不是桌面应用程序，Web 应用程序的工作方式不同。

编辑：

根据您的编辑，也许有一种方法...我想您可以在工作完成后使用 ajax 通知客户端，然后在对话框中使用 javascript 自行关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:17:23.860

这取决于您使用的对话框类型，如果是 window.alert，则只能通过单击“确定”按钮将其关闭。您将需要一个 JQuery 对话框等来实现您的目标。

# objective-c - iOS、Objective C - NSURLConnection 和异步示例、默认行为和最佳实践？

> ID：11353783
> 
> 赞同：3
> 
> 时间：2012-07-05T23:12:49.203
> 
> 标签：objective-c, ios5, nsurlconnection

我一直在使用一些处理 NSURLConnections 的应用程序。在研究最佳实践时，我注意到网上有很多例子展示了如何使用`NSOperation`和`NSOperationQueue`处理这个问题。

我还在 stackoverflow 上注意到了一些示例，这些示例显示使用`NSURLConnection`:`sendAsynchronousRequest`和的类方法将连接初始化为同步和异步`sendSynchronousRequest`。

目前我正在按如下方式进行初始化：

```
[[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

在执行此操作时，我监控了主线程和对委托方法的调用：

`connectionDidFinishLoading`, `connectionDidReceiveResponse`,`connectionDidReceiveData`和`connectionDidFailWithError`

我在 Apples 文档中阅读的所有内容和我的测试都向我证明，默认行为是异步的。

我想从更有经验的Objective C程序员那里知道什么时候其他选项将用于最佳实践，或者只是比我认为获得异步行为的最简单方法更正确？

这是我在这里发布的第一个问题，如果需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T00:31:11.600

同步是坏坏坏。尽量避免它。如果数据传输量很大，这将阻塞您的主线程，从而导致 UI 无响应。

是的，可以将同步调用分派到不同的线程上，但是您必须在主线程上访问任何 UI 元素，这很混乱。

通常我只使用您描述的委托方法 - 它很简单，并且 NSURLConnection 已经为您处理远离主线程的异步调用。您需要做的就是实现简单的委托方法！代码有点多，但你总是想异步。总是。当它完成加载时，使用您从finishedLoading 委托方法获得的信息来更新UI。

你现在也可以选择使用积木，但我不能说它们的效果如何，甚至不能说如何很好地使用它们。我确信某处有一个教程 - 委托方法很容易实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T01:14:35.090

您列出的方法是传统的异步传输方式，使用它们的应用程序在处理器（以及因此电源）使用方面将是有效的。

该`sendAsynchronousRequest`方法是一个相对较新的添加，在 iOS 5 中出现。就最佳实践而言，除了可以取消使用后者创建的请求和使用以前不能。`sendAsynchronousRequest`然而，如果你知道你不想取消你的连接，那么基于块的错误的整洁性以及可读性和更大的不可能性可以说给了它一个优势。

作为最佳实践，`sendSynchronousRequest`应始终避免。如果您在主线程上使用它，那么您将阻止用户界面。如果您在为更通用目的而创建的任何其他线程或队列上使用它，那么您将阻止它。如果您为它创建一个特殊的队列或线程，或者将其发布到一个，`NSOperationQueue`那么您将不会比普通的异步发布获得任何真正的优势，并且根据 Apple 的标准 WWDC 评论，您的应用程序的能效将降低。

对的引用`sendSynchronousRequest`可能是 iOS 5 之前的模式的残余。在您看到 a 的任何地方`sendSynchronousRequest`，a`sendAsynchronousRequest`都可以很容易地实现，从而更有效地执行。我猜它最初是包含在内的，因为有时您正在调整需要以直线流动的代码，并且因为没有块，因此没有“基本上是直线”的方式来实现异步调用。我现在真的想不出任何好的理由来使用它。

# android - Admob 需要 api-13 或更高版本 我不能在旧的 API-8 手机上部署吗？

> ID：11353784
> 
> 赞同：2
> 
> 时间：2012-07-05T23:12:55.043
> 
> 标签：android, admob

Google Admob 要求我必须使用 API-13 或更高版本编译我的项目。为了能够使用admob sdk。我的应用程序适用于 api-8 或更高版本的手机。

这是否意味着如果我使用 Api-13 或更高版本编译我的应用程序，我必须在 Api-13 之前放弃对旧手机的应用程序支持？

我的理解是，由于 admob 需要最低 api-13 才能编译，这意味着它调用了旧手机上不可用的功能，所以我很困惑，它可能无法运行我的 Api-8 到 Api- 的应用程序12，可能会崩溃？

请在这方面给我建议，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:28:56.107

> 这是否意味着如果我使用 Api-13 或更高版本编译我的应用程序，我必须在 Api-13 之前放弃对旧手机的应用程序支持？

不可以。如果您阅读[AdMob 文档](https://developers.google.com/mobile-ads-sdk/docs/android/fundamentals)，“适用于 Android 的 Google AdMob 广告 SDK 需要 Android 1.5 或更高版本的运行时（在您的 AndroidManifest.xml 中将 android:minSdkVersion 设置为至少 3）。这意味着您可以使用最新版本的 Android SDK 和您的应用程序仍将在较早的 Android 版本（最低 1.5）上运行。”

> 我的理解是，由于 admob 需要最低 api-13 才能编译，这意味着它调用了旧手机上不可用的功能

它*有条件*地“调用旧手机上不可用的功能”。这在 Android 开发中相当普遍——您用于`Build.VERSION.SDK_INT`确定您是否在较新的设备上并使用较新的 API 做一件事，但在较旧的设备上做其他事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:31:56.557

在 android 清单中，我将 mini sdk 保留为 8 。然后我使用 ADT .. 右键单击​​项目转到属性并将目标 API 设置为 13。在具有不同 API 的两个设备上进行了测试，工作正常。

# c - 如何防止优化编译器破坏无中断临界区？

> ID：11353786
> 
> 赞同：9
> 
> 时间：2012-07-05T23:13:11.243
> 
> 标签：c, optimization, embedded

我有一些禁用和启用中断的 C 宏，以便我可以定义代码的关键部分。我想确保优化器符合操作并且不会移动或删除它们。

```
#define ARM_INT_KEY_TYPE         unsigned int
#define ARM_INT_LOCK(key_)   ({ \
    asm("MRS %0,cpsr" : "=r" (key_)); \
    asm("MSR cpsr_c,#(0x1F | 0x80 | 0x40)"); \
})
#define ARM_INT_UNLOCK(key_) asm("MSR cpsr_c,%0" : : "r" (key_)) 
```

用法如下：

```
int init_i2c(p_device_i2c dev){

// Interrupts are enabled
doSomething();

ARM_INT_KEY_TYPE key;
ARM_INT_LOCK(key);

// Interrupts are disabled
pMX27_GPIO i2c_clk = (pMX27_GPIO)(GPIO_BASE_ADDR | I2C_CLK_PORT);
pMX27_GPIO i2c_sda = (pMX27_GPIO)(GPIO_BASE_ADDR | I2C_DATA_PORT);

i2c_clk->GIUS   &= ~(1 << I2C_CLK_PIN);         // I2C Signals
i2c_sda->GIUS   &= ~(1 << I2C_DATA_PIN);        // I2C Signals

ARM_INT_UNLOCK(key);
// Interrupts ON again

// Wait for stable
ARM_delay_clocks(5000);

i2c_stop(dev); 
```

该代码在优化关闭的情况下按预期工作，但我怀疑优化打开可能存在问题。

在 asm 语句中添加 volatile 会起作用吗？

```
#define ARM_INT_UNLOCK(key_) asm volatile ("MSR cpsr_c,%0" : : "r" (key_)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T23:23:53.233

是的，`asm volatile`这是编写此宏的正确方法。您可以通过在调试器上单步执行此代码并在程序集级别查看操作顺序来轻松检查行为。或者，您可以直观地检查函数的反汇编输出。

Here's some useful gcc documentation on inline asm

[http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#ss5.4](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html#ss5.4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:39:08.663

you only need volatile attribute on the key variable.

# java - 用于泽西岛的（哈希）映射的序列化器？

> ID：11353790
> 
> 赞同：6
> 
> 时间：2012-07-05T23:13:36.137
> 
> 标签：java, json, rest, jersey

我正在尝试将以下有效负载发布到基于 Jersey 的 Web 服务：

```
{
    "firstname":"Jimmy",
    "lastname":"Johns",
    "addresses":
    [
        {
            "street":"19 Mayberry Drive",
            "city":"Mayberry",
            "state":"nc",
            "postalcode":"27043",
            "country":"us",
            "addresstype":1
        }
    ],
    "data":
    {
        "eyes":"blue",
        "hair":"brown",
        "sandwich":"roast beef"
    }
} 
```

我的泽西代码：

```
@POST
public Response create( Person person )
{
    createBo( person );    <------- stopped here in debugger
    ... 
```

就在泽西打电话给我的时候停下来，我看到地址完全*被*我正在寻找的东西（上面的 JSON 中的内容）冲掉了。但是，我的数据元组不存在。*我知道 Jersey 正在为Address* es调用我的无参数构造函数，并且它的设置器被调用，但是我在夜间起床，因为 Jersey 可能会或可能不会尝试处理这些随机（“数据”）元组在我的 JSON 中。（我说“随机”是因为在不同的调用中，这些可能是“洞穴”：“深、暗”、“山”：“高、宽”等。这是我界面的一部分。）

为了充实我正在谈论的内容，请将这些 POJO 视为上述内容的上下文：

```
@XmlAccessorType( XmlAccessType.FIELD )
@XmlRootElement
public class Person implements Serializable
{
    @XmlElement
    private List< Address > addresses = new ArrayList< Address >();

    @XmlElement
    private Map< String, String > data = new HashMap< String, String >();

    ...

@XmlRootElement
public class Address implements Serializable
{
    private String  street;
    private String  city;
    private String  state;
    private String  country;
    private String  postalcode;
    private Integer addresstype;
    ... 
```

注意：我不能像做*Address*那样做随机元组，因为我实际上事先并不知道键是什么（而我将*Address*限制为*street*、*city*等）。

我需要的是某种用于 Jersey 的*HashMap*的魔法序列化程序，我似乎无法很好地解释文档以理解如何编写一个或解决这个问题，同时仍然保持我的界面的灵活性。

我将不胜感激有关如何完成此任务的任何指示。

拉斯贝特曼

PS 请注意，[Java.util.Map to JSON Object with Jersey / JAXB / Jackson](https://stackoverflow.com/questions/5794713/java-util-map-to-json-object-with-jersey-jaxb-jackson)并没有帮助，尽管它显示出很大的希望。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-06T10:47:18.577

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

如果您使用 MOXy，以下内容将起作用，并且应该与任何其他 JAXB 提供程序一起使用。这种方法使用将 转换`java.util.Map`为。`org.w3c.dom.Element``XmlAdapter`

**地图适配器**

An`XmlAdapter`允许您将一个类的实例编组为另一个类的实例（参见：[http](http://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html) ://blog.bdoughan.com/2010/07/xmladapter-jaxbs-secret-weapon.html ）。

```
package forum11353790;

import java.util.*;
import java.util.Map.Entry;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.parsers.*;
import org.w3c.dom.*;

public class MapAdapter extends XmlAdapter<Element, Map<String, String>> {

    private DocumentBuilder documentBuilder;

    public MapAdapter() throws Exception {
        documentBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    }

    @Override
    public Element marshal(Map<String, String> map) throws Exception {
        Document document = documentBuilder.newDocument();
        Element rootElement = document.createElement("data");
        document.appendChild(rootElement);
        for(Entry<String,String> entry : map.entrySet()) {
            Element childElement = document.createElement(entry.getKey());
            childElement.setTextContent(entry.getValue());
            rootElement.appendChild(childElement);
        }
        return rootElement;
    }

    @Override
    public Map<String, String> unmarshal(Element rootElement) throws Exception {
        NodeList nodeList = rootElement.getChildNodes();
        Map<String,String> map = new HashMap<String, String>(nodeList.getLength());
        for(int x=0; x<nodeList.getLength(); x++) {
            Node node = nodeList.item(x);
            if(node.getNodeType() == Node.ELEMENT_NODE) {
                map.put(node.getNodeName(), node.getTextContent());
            }
        }
        return map;
    }

} 
```

**人**

您指定字段/属性应利用`XmlAdapter`via`@XmlJavaTypeAdapter`注释。

```
package forum11353790;

import java.io.Serializable;
import java.util.*;
import javax.xml.bind.annotation.*;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlAccessorType( XmlAccessType.FIELD )
@XmlRootElement
public class Person implements Serializable {

    private String firstname;

    private String lastname;

    private List< Address > addresses = new ArrayList< Address >();

    @XmlAnyElement
    @XmlJavaTypeAdapter(MapAdapter.class)
    private Map< String, String > data = new HashMap< String, String >();

} 
```

**地址**

```
package forum11353790;

import java.io.Serializable;
import javax.xml.bind.annotation.*;

@XmlAccessorType(XmlAccessType.FIELD)
public class Address implements Serializable {

    private String  street;
    private String  city;
    private String  state;
    private String  country;
    private String  postalcode;
    private Integer addresstype;

} 
```

**jaxb.properties**

要将 MOXy 指定为您的 JAXB 提供程序，您需要包含一个`jaxb.properties`在与域模型相同的包中调用的文件，其中包含以下条目（请参阅：[http ://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as -your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html) )。

```
javax.xml.bind.context.factory=org.eclipse.persistence.jaxb.JAXBContextFactory 
```

**演示**

下面是一个独立的示例，您可以运行它来证明一切正常。

```
package forum11353790;

import java.io.FileInputStream;
import java.util.*;
import javax.xml.bind.*;
import javax.xml.transform.stream.StreamSource;
import org.eclipse.persistence.jaxb.JAXBContextProperties;

public class Demo {

    public static void main(String[] args) throws Exception {
        Map<String, Object> properties = new HashMap<String,Object>(2);
        properties.put(JAXBContextProperties.MEDIA_TYPE, "application/json");
        properties.put(JAXBContextProperties.JSON_INCLUDE_ROOT, false);
        JAXBContext jc = JAXBContext.newInstance(new Class[] {Person.class}, properties);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        StreamSource json = new StreamSource(new FileInputStream("src/forum11353790/input.json"));
        Person person = unmarshaller.unmarshal(json, Person.class).getValue();

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(person, System.out);
    }

} 
```

**输入.json/输出**

```
{
   "firstname" : "Jimmy",
   "lastname" : "Johns",
   "addresses" : [ {
      "street" : "19 Mayberry Drive",
      "city" : "Mayberry",
      "state" : "nc",
      "country" : "us",
      "postalcode" : "27043",
      "addresstype" : 1
   } ],
   "data" : {
      "sandwich" : "roast beef",
      "hair" : "brown",
      "eyes" : "blue"
   }
} 
```

**MOXy 和 JAX-RS/Jersey**

您可以通过利用该类在 JAX-RS 环境中利用 MOXy `MOXyJsonProvider`：

*   [http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html](http://blog.bdoughan.com/2012/05/moxy-as-your-jax-rs-json-provider.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T06:03:27.930

杰克逊为您提供设施。您可以通过将以下内容添加到您的`Application`类来强制它。请注意，这**可能会**禁用带`@Path`注释的类的自动定位。

```
@Override
public Set<Object> getSingletons() {
    return ImmutableSet
            .<Object> builder()
            .add(new JacksonJaxbJsonProvider(new ObjectMapper(),
                    JacksonJaxbJsonProvider.DEFAULT_ANNOTATIONS)).build();
} 
```

# javascript - Javascript - 如何检测我的弹出窗口何时访问我的网站？

> ID：11353795
> 
> 赞同：0
> 
> 时间：2012-07-05T23:13:56.257
> 
> 标签：javascript, ajax, events, extjs

我的网站向外部网站打开了一个弹出窗口，但在某些时候，弹出窗口将再次重定向到我的网站。由于安全原因，我知道在弹出窗口 URL 重定向回我的站点之前，我无法查看它。我所做的就是每秒检查一下是否可以访问 url 地址，一旦可以访问（意味着弹出窗口又回到了我的网站上），我就存储了 Url 信息并关闭了弹出窗口。这似乎是一种非常糟糕的做法......

有什么方法可以检测到返回我网站的窗口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:56:58.953

如果您可以控制弹出窗口的链接页面，那么您可以为此目的设置一个特殊页面。您需要做的就是创建一个带有一些 javascript 的页面，该页面会运行以通知您您已经完成了一个完整的循环。

弹出窗口具有的一个`window.opener`属性是引用最初创建弹出窗口的父窗口的属性。

这应该是一个很好的起点。

# ruby-on-rails-3 - Rails 3 使用 devise 和 best_in_place gem，不会更新订阅者模型

> ID：11353797
> 
> 赞同：2
> 
> 时间：2012-07-05T23:14:22.693
> 
> 标签：ruby-on-rails-3, devise, best-in-place

我有一个使用带有订阅者模型的设计的 rails 3 应用程序。我希望订阅者使用 best_in_place gem 更新他们的帐户信息，但我似乎无法让它更新数据库。它将在屏幕上更新，但不会在数据库上更新。

该错误似乎表明订阅者存在是一件坏事，但事实并非如此，因为如果该订阅者不存在，就不可能更新它。

我想要做的就是能够允许用户从显示他们详细信息的订阅者/帐户#show 页面更新他们的信息。

我的订户/帐户控制器有这个：

```
 def update
      @subscriber = Subscriber.find(current_subscriber.id)
      @subscriber.update_without_password(params[:subscriber])
    end 
```

我总是在服务器日志中得到这些结果：

```
Processing by Subscribers::AccountsController#update as JSON
Parameters: {"subscriber"=>{"firstname"=>"Aarof"}, "authenticity_token"=>"Sx6kEQy4NC56ovikMs/D9nVPGJt1q5jNCoFnNjFhDu8=", "id"=>"2"}
Subscriber Load (1.9ms)  SELECT `subscribers`.* FROM `subscribers` WHERE `subscribers`.`id` = 2 LIMIT 1
CACHE (0.0ms)  SELECT `subscribers`.* FROM `subscribers` WHERE `subscribers`.`id` = 2 LIMIT 1
(0.2ms)  BEGIN
Subscriber Exists (0.4ms)  SELECT 1 AS one FROM `subscribers` WHERE (`subscribers`.`email` = BINARY 'frostsquid@yahoo.com' AND `subscribers`.`id` != 2) LIMIT 1
(0.1ms)  ROLLBACK
Redirected to http://localhost:3000/subscribers/accounts/2
Completed 302 Found in 12ms (ActiveRecord: 2.6ms) 
```

我的显示页面如下所示：

```
%p.subscriber-account-info
  =best_in_place @subscriber, :firstname, :path => subscribers_account_path(@subscriber) 
```

我的订阅者路线如下所示：

```
 subscribers_accounts GET    /subscribers/accounts(.:format)                  subscribers/accounts#index
                            POST   /subscribers/accounts(.:format)                  subscribers/accounts#create
    new_subscribers_account GET    /subscribers/accounts/new(.:format)              subscribers/accounts#new
   edit_subscribers_account GET    /subscribers/accounts/:id/edit(.:format)         subscribers/accounts#edit
        subscribers_account GET    /subscribers/accounts/:id(.:format)              subscribers/accounts#show
                            PUT    /subscribers/accounts/:id(.:format)              subscribers/accounts#update 
```

我刚刚检查了尝试使用控制台更新订阅者的名字，并收到了订阅者存在的相同消息，并且它回滚了事务。这是因为设计中的某些东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:24:12.567

也许有点答案，但你对 JSON 有反应吗？这里是我们项目的示例代码：

```
def update
    respond_to do |format|
      resource_files_service.update(@resource_file, params[:resource_file], current_user)

      format.html { }
  format.json { respond_with_bip(@resource_file) }
end 
```

# apache - Tomcat 默认页面

> ID：11353799
> 
> 赞同：1
> 
> 时间：2012-07-05T23:14:28.163
> 
> 标签：apache, tomcat

我支持使用 IIS 和 tomcat 的第 3 方应用程序。我在 myserver:8080/mydir 安装了应用程序并运行良好

但问题是如果你只是去 myserver:8080 你会看到一个默认的 Tomcat 管理页面。我担心这可能会带来安全风险，并希望关闭、阻止或重定向此页面。

限制是我不能改变网站本身的配置方式（比如将名称更改为 ROOT 或其他），否则我会搞砸我的供应商支持。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T11:46:02.177

取消部署 ROOT 上下文，您将收到 400 响应。FWIW，我不相信 Tomcat 的 ROOT webapp 中存在任何当前已知的漏洞，但取消部署它是一个很好的做法，因为它真的没有必要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:24:09.320

您可以在 ...ROOT/index.html 文件中放置重定向，例如：

```
<head>
<meta http-equiv="refresh" content="0;url=http://www.google.com">
</head> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T23:22:32.260

您应该能够将此页面设置为仅对管理员可见。在 conf/tomcat-users.xml 的某个地方，您可以添加管理员，例如： user username="admin" password="your_pwd" roles="manager"

# drupal - 使用 entity_extract_ids($entity_type, $entity)

> ID：11353800
> 
> 赞同：0
> 
> 时间：2012-07-05T23:14:32.043
> 
> 标签：drupal, drupal-7, drupal-entities

我正在尝试使用 entity_extract_ids($entity_type, $entity) 其中：

**$entity_type** = 实体类型；例如“节点”或“用户”。

**$entity** = 从中提取值的实体。

我从来没有使用过这个函数，也不明白第二个参数（即**$entity**）应该是什么。

我很想看到一个使用这个函数的示例代码。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T10:45:05.537

This function return `array($id, $vid, $bundle);`

Example:

```
// Define $entity_type.
// Could be 'node', 'user', 'file', 'taxonomy_term' etc.
$entity_type = 'node';

// Get $entity object, in our case $node with nid = 1
$entity = node_load(1);

// print_r will give us something like:
// Array
// (
//     [0] => 1
//     [1] => 4
//     [2] => page
// )
// Where [0] is nid, [1] is vid and [2] is bundle name of a node with nid = 1
print_r(entity_extract_ids($entity_type, $entity)); 
```

It's better to use function like that:

```
list($id, $vid, $bundle) = entity_extract_ids($entity_type, $entity); 
```

# android - 方法必须覆盖超类方法

> ID：11353801
> 
> 赞同：1
> 
> 时间：2012-07-05T23:14:33.983
> 
> 标签：android, eclipse

我现在正在学习一些 android 教程，为在美国大学进行为期两周的训练营做准备。我十七岁，如果这是一个愚蠢的问题，请原谅。我做了一些研究并尝试了几件事，但我无法让它发挥作用。

我正在处理此处找到的 google 选项卡/片段示例：http: [//developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)

我的问题是在覆盖 createTabContent 时，并且 onTabChanged 我不断收到错误必须覆盖超类方法。这是我的代码：

包 matthews.zack.test；

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentTransaction;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.TabHost;
import android.widget.TextView; 
```

公共类 _testActivity 扩展 FragmentActivity {

```
ListView list;
Button save;
RadioGroup radioGroup;
RadioButton selectedType;
TabHost tabHost;
// People p = new People();
public List<People> people = new ArrayList<People>();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    onInitialize();

    if (savedInstanceState != null) {
        tabHost.setCurrentTabByTag(savedInstanceState.getString("tab"));
    }
}

private void onInitialize() {

    tabHost = (TabHost) findViewById(R.id.tabHost);
    tabHost.setup();

     * TabManager tManager = new TabManager(this, tabHost,
     * R.id.realtabcontent); tManager.addTab(
     * tabHost.newTabSpec("details").setIndicator("Details",
     * getResources().getDrawable(R.drawable.goldstar)), null, null);
     * tManager.addTab( tabHost.newTabSpec("list").setIndicator("List",
     * getResources().getDrawable(R.drawable.bluestar)), null, null);
     *

     * TabSpec spec = tabHost.newTabSpec("tab1");
     * spec.setContent(R.id.listView1); spec.setIndicator("List",
     * getResources().getDrawable(R.drawable.goldstar));
     * 
     * TabSpec spec2 = tabHost.newTabSpec("tab2");
     * spec2.setContent(R.id.details); spec2.setIndicator("Details",
     * getResources().getDrawable(R.drawable.bluestar));
     * 
     * tabHost.addTab(spec); tabHost.addTab(spec2);
     */

    PeopleAdapter adapter = new PeopleAdapter();
    list = (ListView) findViewById(R.id.listView1);
    list.setAdapter(adapter);

    radioGroup = (RadioGroup) findViewById(R.id.type);
    // radioGroup.check(R.id.coWorker);
    radioGroup
            .setOnCheckedChangeListener(new RadioGroup.OnCheckedChangeListener() {

                public void onCheckedChanged(RadioGroup group, int checkedId) {
                    // TODO Auto-generated method stub

                    if (selectedType != (RadioButton) findViewById(radioGroup
                            .getCheckedRadioButtonId())) {
                        selectedType = (RadioButton) findViewById(radioGroup
                                .getCheckedRadioButtonId());
                    }
                }
            });

    save = (Button) findViewById(R.id.button1);
    save.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {

            People p = new People();

            // TODO Auto-generated method stub
            EditText firstName = (EditText) findViewById(R.id.editText1);
            EditText lastName = (EditText) findViewById(R.id.editText2);
            p.setFirstName(firstName.getText().toString());// firstName.getText().toString());
            p.setLastName(lastName.getText().toString());// lastName.getText().toString());
            p.setType(selectedType.getText().toString());

            people.add(p);
        }
    });
}

static class PeopleHolder {
    private TextView name;
    private TextView title;
    private ImageView icon;

    PeopleHolder(View row) {
        name = (TextView) row.findViewById(R.id.name);
        title = (TextView) row.findViewById(R.id.title);
        icon = (ImageView) row.findViewById(R.id.icon);
    }

    void populateForm(People p) {
        name.setText(p.getFirstName() + " " + p.getLastName());
        title.setText(p.getType().toString());
        if (p.getType().equals("Family")) {
            icon.setImageResource(R.drawable.android);

        }

        else if (p.getType().equals("Friend")) {
            icon.setImageResource(R.drawable.xbox);
        }

        else {
            icon.setImageResource(R.drawable.yinyang);
        }
    }

}

class PeopleAdapter extends ArrayAdapter<People> {

    PeopleAdapter() {
        super(_testActivity.this, android.R.layout.simple_list_item_1,
                people);
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        PeopleHolder holder = null;
        if (row == null) {
            LayoutInflater inflater = getLayoutInflater();
            row = inflater.inflate(R.layout.row, null);
            holder = new PeopleHolder(row);
            row.setTag(holder);
        }

        else {
            holder = (PeopleHolder) row.getTag();
        }

        holder.populateForm(people.get(position));

        return (row);
    }

}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putString("tab", tabHost.getCurrentTabTag());
}

public static class TabManager implements TabHost.OnTabChangeListener {
    private final FragmentActivity activity;
    private final TabHost host;
    private final int containerID;
    private final HashMap<String, TabInfo> tabs = new HashMap<String, TabInfo>();
    TabInfo lastTab;

    static final class TabInfo {
        private final String tag;
        private final Class<?> clss;
        private final Bundle args;
        private Fragment fragment;

        TabInfo(String _tag, Class<?> clss, Bundle args) {
            this.tag = _tag;
            this.clss = clss;
            this.args = args;
        }
    }

    static class DummyTabFactory implements TabHost.TabContentFactory {
        private final Context context;

        public DummyTabFactory(Context context) {
            this.context = context;
        }

        public View createTabContent(String tag) {
            View v = new View(context);
            v.setMinimumWidth(0);
            v.setMinimumHeight(0);

            return v;
        }
    }

    public TabManager(FragmentActivity activity, TabHost host,
            int containerID) {
        this.activity = activity;
        this.host = host;
        this.containerID = containerID;
        this.host.setOnTabChangedListener(this);
    }

    public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
        tabSpec.setContent(new DummyTabFactory(activity));
        String tag = tabSpec.getTag();

        TabInfo info = new TabInfo(tag, clss, args);

        info.fragment = activity.getSupportFragmentManager()
                .findFragmentByTag(tag);

        if (info.fragment != null && !info.fragment.isDetached()) {
            FragmentTransaction ft = activity.getSupportFragmentManager()
                    .beginTransaction();
            ft.detach(info.fragment);
            ft.commit();
        }

        tabs.put(tag, info);
        host.addTab(tabSpec);
    }

    public void onTabChanged(String tabId) {
        TabInfo newTab = tabs.get(tabId);
        if (lastTab != newTab) {
            FragmentTransaction ft = activity.getSupportFragmentManager()
                    .beginTransaction();
            if (lastTab != null) {
                if (lastTab.fragment != null) {
                    ft.detach(lastTab.fragment);
                }

            }

            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment =       Fragment.instantiate(activity,
                            newTab.clss.getName(), newTab.args);
                    ft.add(containerID, newTab.fragment, newTab.tag);

                }

                else {

                    ft.attach(newTab.fragment);
                }

            }

            lastTab = newTab;
            ft.commit();
            activity.getSupportFragmentManager()
                    .executePendingTransactions();

        }

        // TODO Auto-generated method stub

    }
}

} 
```

这是日食问题，还是我犯了一个粗心的错误？我检查并仔细检查了我是否使用了正确的类，并且它们包含我试图覆盖的方法。提前致谢！

编辑：已发布完整代码。我能够编译和运行，但应用程序强制一旦启动就会关闭。请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T23:16:30.783

您可能使用的 Java 版本与示例代码的作者不同……您有两种选择：

1.  您应该能够删除`@Override`导致错误的行并毫无问题地运行您的应用程序。

2.  您可以在 Eclipse 中将 JDK 编译器的合规级别从 1.5 更改为 1.6：

    **Properties** -> **JDK Compiler -> 从****Compiler compliance level**下拉列表中选择“1.6” （Android 仅支持 1.5 和 1.6，尚不支持 1.7）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:35:19.483

如果没有看到你班级的所有代码，很难说你的问题到底是什么。

正如 Sam 所说，根据您使用的示例，您可能不需要使用 @Override。如果你的课没有“扩展”类似的东西：

```
public class MyClass extends MySuperClass{... 
```

那么你就不需要超车了。当你有一个继承方法的超类，并且你想改变它们的工作方式时，覆盖就完成了。将其视为存储在您要扩展的类中的自定义方法。如果您没有超类，则不需要覆盖方法，这可能会导致您的问题。

另一个问题可能是您没有覆盖超类中的正确方法。

但是如果没有看到所有的代码，很难给你更具体的东西。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:46:44.117

旧版本的 Java 不喜欢将 @Override 用于接口方法覆盖。那时只有超类方法才能与该注释一起使用。这是在 1.5 之后更改的，因此 1.6 和 1.7 不会为 @Override 抛出警告以覆盖接口方法。

您可以取消此警告，删除注释（这根本不会伤害您，但是如果您键入错误的方法名称或参数类型，Eclipse 不会告诉您），或者您可以更改为 1.6 或更高版本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-05T23:21:34.180

前段时间我遇到了类似的问题，通过将项目的编译级别更改为 1.6 来解决它。

去做这个：

*   右键单击项目文件夹（可以在 Eclipse 的项目资源管理器中找到，左侧）
*   特性
*   Java 编译器
*   取消选中“启用项目特定设置
*   配置工作区设置...
*   然后将编译级别从 1.5 更改为 1.6

# r - 带强制转换的自动列名标签

> ID：11353804
> 
> 赞同：9
> 
> 时间：2012-07-05T23:14:45.553
> 
> 标签：r, reshape

使用 reshape::cast 时，有没有办法设置结果列的名称？

例子：

```
library(reshape)
data(mtcars)
cast(mtcars, cyl + hp ~ .,mean)

   cyl  hp (all)
1    4  52     2
2    4  62     2
3    4  65     1
4    4  66     1
5    4  91     2 
```

而不是`(all)`，我希望能够在对 cast 的调用中设置名称。这可能吗？

我知道，我知道，好像打字`colnames(x)[3] <- "Foo"`太难了，但如果你必须经常这样做，那就太费时间了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-06T04:10:48.690

创建一个新的包装器，提供您寻求的设施（这意味着我找不到可以做到这一点的现有参数）：

```
bcast <- function(... , agg.name =NA){ res <- cast(...)
             if(!is.na(agg.name)){ names(res)[length(res)] <- agg.name } 
             res}
bcast(mtcars, cyl + hp ~ . ,  fun.aggregate= mean, agg.name="test")

#--------
#Using carb as value column.  Use the value argument to cast to override this choice
#   cyl  hp test
1    4  52    2
2    4  62    2
3    4  65    1
4    4  66    1
5    4  91    2
6    4  93    1
7    4  95    2
snipped output.... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T08:21:12.337

对于示例中的简单整形，您可以简单地`aggregate`在 base R 中使用，它可以执行您想要的操作，而无需指定列名：

```
aggregate(carb~cyl+hp, mtcars, FUN=mean)

   cyl  hp carb
1    4  52    2
2    4  62    2
3    4  65    1
4    4  66    1
5    4  91    2
..... 
```

或在所有列上：

```
aggregate(.~cyl+hp, mtcars, FUN=mean)

   cyl  hp      mpg     disp     drat       wt     qsec        vs        am     gear carb
1    4  52 30.40000  75.7000 4.930000 1.615000 18.52000 1.0000000 1.0000000 4.000000    2
2    4  62 24.40000 146.7000 3.690000 3.190000 20.00000 1.0000000 0.0000000 4.000000    2
3    4  65 33.90000  71.1000 4.220000 1.835000 19.90000 1.0000000 1.0000000 4.000000    1
4    4  66 29.85000  78.8500 4.080000 2.067500 19.18500 1.0000000 1.0000000 4.000000    1
5    4  91 26.00000 120.3000 4.430000 2.140000 16.70000 0.0000000 1.0000000 5.000000    2
 ..... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-19T23:10:17.137

`reshape::cast`无法设置默认列名，但可以设置（无论如何`reshape2::dcast`您都可以使用它，因为它更快）。使用您的示例：

```
dcast (mtcars, cyl + hp ~ "colname", mean) 
```

# javascript - 制作树时D3.js json错误

> ID：11353805
> 
> 赞同：0
> 
> 时间：2012-07-05T23:14:48.550
> 
> 标签：javascript, d3.js

我正在尝试在 D3.js 中制作自己的树，但我无法弄清楚如何制作。我查看了以下链接：

[http://bl.ocks.org/1249394#interactive_tree.css](http://bl.ocks.org/1249394#interactive_tree.css)
[d3js 树广场](https://stackoverflow.com/questions/11137238/d3js-tree-square)

甚至尝试复制它们以使某些东西起作用，以便我可以修补，但这对我不起作用。我已经在代码中添加了警报，并且在谱系和可折叠树中，代码在 d3.json 调用后立即停止工作。我也复制了 json 文件并将它们重命名以使它们相同。在谱系示例中

```
d3.json("info.json", function(json) {
  alert(json);
  var nodes = tree.nodes(json); 
  alert('hi'); 
```

所以这里第一个警报有效而第二个无效，这在两个示例中都发生了。如果有人知道原因，将不胜感激解释或修复。谢谢！！！

我发现当 d3.json("localhost...", callback) 被调用时，它返回 null。我在另一篇文章中读到有跨域限制。我不太确定这意味着什么或如何解决它

我已经在本地运行我的应用程序时从同一个目录本地尝试过它，并且我已经从我的 Xamp 服务器尝试过它。并且当调用 alert(json) 时，它仍然显示为 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:54:00.490

[d3 文档](https://github.com/mbostock/d3/wiki/Requests)对此有更多信息。基本上，您的浏览器不会从本地文件系统或原始页面不在的服务器上加载 JSON 文件。有一些方法可以解决这个问题，例如可以启动 Google Chrome`--disable-web-security`来禁用这些限制，但不建议这样做。

所有现代浏览器都有一个 Javascript 错误控制台，它将向您显示 JSON 文件未加载的确切原因。请记住，当您通过本地 Web 服务器提供页面时，您不应`localhost://`在 JSON 文件的路径中指定或类似的路径，而应仅指定相对于 HTML 文件所在目录的路径。

# facebook - Facebook“喜欢”按钮的迷你弹出窗口在我“喜欢”之前一直关闭

> ID：11353807
> 
> 赞同：0
> 
> 时间：2012-07-05T23:14:53.913
> 
> 标签：facebook, wordpress, og-meta

尝试添加一个之前工作正常的 facebook 按钮，我安装了一个 wordpress 插件，以便在时间轴上共享时显示正确的缩略图。问题是当我使用 facebooks lint/debug 工具 (http://developers.facebook.com/tools/debug) 刷新网站缩略图时，我无法真正“喜欢”该网站。

当我单击它时，弹出窗口要求我登录，这很好，但是当我单击它时，第二个弹出窗口“您可以在其中键入消息以及喜欢的内容）会自行关闭，我不知道是什么原因造成的，任何人都共享同样的经历或有任何想法可能是什么原因造成的？还是我必须等到 Facebook 抓取页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T00:58:27.540

在 Facebook 的 URL 调试工具再次刷新后，这最终在今天工作，似乎是随机的。

# xamarin.ios - 在 UIBarButton 点击 显示 UIMenuController

> ID：11353815
> 
> 赞同：1
> 
> 时间：2012-07-05T23:16:16.830
> 
> 标签：xamarin.ios

我正在尝试在工具栏按钮中显示 UIMenuController。我有下面的代码，但我不确定“SetTargetRect”方法中应该包含什么。

我应该在 SetTargetRect 方法中添加什么来显示菜单？

这段代码还缺少什么吗？

```
ToolbarItems = new UIBarButtonItem[] { 
new UIBarButtonItem ("Sort", UIBarButtonItemStyle.Bordered, (sender, e) => {
    var menu = UIMenuController.SharedMenuController;
    menu.MenuItems = new UIMenuItem[] {
        new UIMenuItem ("Current", new Selector ("SortRaceEntrants")),
        new UIMenuItem ("Movers", new Selector ("SortRaceEntrants")),
        new UIMenuItem ("Opening", new Selector ("SortRaceEntrants")),
        new UIMenuItem ("Number", new Selector ("SortRaceEntrants"))
    };
    //menu.SetTargetRect ();
    menu.SetMenuVisible (true, true);
}),
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T18:22:43.787

UIBarButtonItem 继承自 UIBarItem 和 NSObject，因此为它们找到一个框架即使不是不可能也不容易。UINavigationBar 从 UIView 继承，因此是一个视图（去图）并有一个框架等。

我所做的是指向 UIBarButtonItem 应该在该视图内的一个矩形。

例如：

```
[myMenu setTargetRect:CGRectMake(10, 10, 20, 25) 
               inView:self.navigationController.navigationBar]; 
```

这将使 UIMenuController '指向'leftBarButtonItem。相同的技术可用于工具栏。

在您的情况下，例如：

```
[menu setTargetRect:CGRectMake(0,0,40,40)
             inView:self.navigationController.toolBar]; 
```

将指向工具栏的中心，因此指向工具栏中的中心按钮

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T01:43:11.473

根据[API 文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Reference/UIMenuController_Class/UIMenuController.html)，目标 rect 定义了您想要显示菜单的区域 - iOS 将在 TargetRect 定义的区域上方或下方显示菜单。

> 当你使这个菜单可见时， UIMenuController 将它相对于屏幕上的目标矩形定位；这个矩形通常定义一个选择。菜单显示在目标矩形上方，如果没有足够的空间，则显示在其下方。菜单指针放置在目标矩形顶部或底部的中心，视情况而定。确保在使菜单可见之前设置跟踪矩形。您还负责检测、跟踪和显示选择。

和

> 此目标矩形 (targetRect) 通常是选择的边界矩形。UIMenuController 将编辑菜单定位在该矩形上方；如果那里没有足够的菜单空间，它将把它放在矩形下方。菜单的指针适当地放置在目标矩形的顶部或底部的中心。请注意，如果您将目标矩形的宽度或高度设为零，UIMenuController 会将目标区域视为用于定位的线或点（例如，插入插入符号或单个点）。
> 
> 一旦设置，目标矩形就不会跟踪视图；如果视图移动（例如在滚动视图中发生），您必须相应地更新目标矩形。

# jquery - 通过 JQuery 将 JSON 发布到 Rails

> ID：11353816
> 
> 赞同：4
> 
> 时间：2012-07-05T23:16:26.057
> 
> 标签：jquery, ruby-on-rails, json

我很难让 json 从 javascript 发布到 rails 支持的 web 服务。

这是jquery代码；

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
var jsonPost = { 
      "email":"dummy@dummy.com",
      "token":"63uO6eEfLVBFpnZswzI",
      "content": "testcontent",
      "notification_type": "2",
      "name":"testname",
}
  function callback(data){alert(data)};

jQuery.ajax({
        type: "POST",
        url: 'http://localhost:3000/api/create.json',
        data: jsonPost,
        success: callback,
        dataType: "json",
        contentType: "application/json",
        processData: false
      });

</script> 
```

在铁轨一侧：

```
def api_create
  respond_to do |format|
    format.json {
      email = params[:email]
      token = params[:token]
      auto_action = params[:auto_action] 
```

rails 端确实将请求识别为 JSON，但是在 rails 中调试时我在请求中看不到任何数据。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:20:56.037

如果您在rails中做相反的事情，您不需要将您的JSON转换为字符串吗？

```
jQuery.ajax({
    type: "POST",
    url: 'http://localhost:3000/api/create.json',
    data: JSON.stringify(jsonPost),
    success: callback,
    dataType: "json",
    contentType: "application/json",
    processData: false
  }); 
```

# php - Eclipse xdebug - 跳过 PHP-CLI 中的断点，但适用于 PHP-Apache？

> ID：11353826
> 
> 赞同：2
> 
> 时间：2012-07-05T23:17:22.173
> 
> 标签：php, eclipse, command-line-interface, xdebug, breakpoints

我正在使用 XDebug 运行 eclipse Juno 来调试 php 脚本。当我作为“网页”进行调试时一切正常，但是当我调试 CLI 脚本时，Eclipse/XDebug 会跳过我的断点。

我的 php.ini 文件对 apache2 和 cli 使用相同的 xdebug 设置：

```
xdebug.profiler_output_dir = "/tmp/xdebug/"
xdebug.profiler_enable = On
xdebug.remote_enable = On
xdebug.remote_port = "10000"
xdebug.remote_host="localhost"
xdebug.remote_handler = "dbgp"
xdebug.remote_autostart = Off
xdebug.remote_log = "/var/log/xdebug.log"
xdebug.scream = On 
```

在（尝试）调试时，我得到以下 phpinfo() 结果：

```
PHP Version => 5.3.10-1ubuntu3.2

System => Linux joomla-VirtualBox 3.2.0-26-generic-pae #41-Ubuntu SMP Thu Jun 14 16:45:14 UTC 2012 i686
Build Date => Jun 13 2012 17:19:38
Server API => Command Line Interface
Virtual Directory Support => disabled
Configuration File (php.ini) Path => /etc/php5/cli
Loaded Configuration File => /tmp/zend_debug/session150485809077526207.tmp/php.ini
Scan this dir for additional .ini files => (none)
Additional .ini files parsed => (none)
PHP API => 20090626
PHP Extension => 20090626
Zend Extension => 220090626
Zend Extension Build => API220090626,NTS
PHP Extension Build => API20090626,NTS
Debug Build => no
Thread Safety => disabled
Zend Memory Manager => enabled
Zend Multibyte Support => disabled
IPv6 Support => enabled
Registered PHP Streams => https, ftps, compress.zlib, compress.bzip2, php, file, glob, data, http, ftp, phar, zip  
Registered Stream Socket Transports => tcp, udp, unix, udg, ssl, sslv3, tls
Registered Stream Filters => zlib.*, bzip2.*, convert.iconv.*, string.rot13, string.toupper, string.tolower, string.strip_tags, convert.*, consumed, dechunk

This server is protected with the Suhosin Patch 0.9.10
Copyright (c) 2006-2007 Hardened-PHP Project
Copyright (c) 2007-2009 SektionEins GmbH

This program makes use of the Zend Scripting Language Engine:
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies

 _______________________________________________________________________

Configuration

bcmath

BCMath support => enabled

Directive => Local Value => Master Value
bcmath.scale => 0 => 0

bz2

BZip2 Support => Enabled
Stream Wrapper support => compress.bzip2://
Stream Filter support => bzip2.decompress, bzip2.compress
BZip2 Version => 1.0.6, 6-Sept-2010

calendar

Calendar support => enabled

Core

PHP Version => 5.3.10-1ubuntu3.2

Directive => Local Value => Master Value
allow_call_time_pass_reference => Off => Off
allow_url_fopen => On => On
allow_url_include => Off => Off
always_populate_raw_post_data => Off => Off
arg_separator.input => & => &
arg_separator.output => & => &
asp_tags => Off => Off
auto_append_file => no value => no value
auto_globals_jit => On => On
auto_prepend_file => no value => no value
browscap => no value => no value
default_charset => no value => no value
default_mimetype => text/html => text/html
define_syslog_variables => Off => Off
disable_classes => no value => no value
disable_functions => pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority, => pcntl_alarm,pcntl_fork,pcntl_waitpid,pcntl_wait,pcntl_wifexited,pcntl_wifstopped,pcntl_wifsignaled,pcntl_wexitstatus,pcntl_wtermsig,pcntl_wstopsig,pcntl_signal,pcntl_signal_dispatch,pcntl_get_last_error,pcntl_strerror,pcntl_sigprocmask,pcntl_sigwaitinfo,pcntl_sigtimedwait,pcntl_exec,pcntl_getpriority,pcntl_setpriority,
display_errors => STDOUT => STDOUT
display_startup_errors => Off => Off
doc_root => no value => no value
docref_ext => no value => no value
docref_root => no value => no value
enable_dl => Off => Off
error_append_string => no value => no value
error_log => no value => no value
error_prepend_string => no value => no value
error_reporting => 22527 => 22527
exit_on_timeout => Off => Off
expose_php => On => On
extension_dir => /usr/lib/php5/20090626+lfs => /usr/lib/php5/20090626+lfs
file_uploads => On => On
highlight.bg => <font style="color: #FFFFFF">#FFFFFF</font> => <font style="color: #FFFFFF">#FFFFFF</font>
highlight.comment => <font style="color: #FF8000">#FF8000</font> => <font style="color: #FF8000">#FF8000</font>
highlight.default => <font style="color: #0000BB">#0000BB</font> => <font style="color: #0000BB">#0000BB</font>
highlight.html => <font style="color: #000000">#000000</font> => <font style="color: #000000">#000000</font>
highlight.keyword => <font style="color: #007700">#007700</font> => <font style="color: #007700">#007700</font>
highlight.string => <font style="color: #DD0000">#DD0000</font> => <font style="color: #DD0000">#DD0000</font>
html_errors => Off => Off
ignore_repeated_errors => Off => Off
ignore_repeated_source => Off => Off
ignore_user_abort => Off => Off
implicit_flush => On => On
include_path => .:/var/www/test => .:/var/www/test
log_errors => On => On
log_errors_max_len => 1024 => 1024
magic_quotes_gpc => Off => Off
magic_quotes_runtime => Off => Off
magic_quotes_sybase => Off => Off
mail.add_x_header => On => On
mail.force_extra_parameters => no value => no value
mail.log => no value => no value
max_execution_time => 0 => 0
max_file_uploads => 20 => 20
max_input_nesting_level => 64 => 64
max_input_time => -1 => -1
max_input_vars => 1000 => 1000
memory_limit => 256M => 256M
open_basedir => no value => no value
output_buffering => 0 => 0
output_handler => no value => no value
post_max_size => 128M => 128M
precision => 14 => 14
realpath_cache_size => 16K => 16K
realpath_cache_ttl => 120 => 120
register_argc_argv => On => On
register_globals => Off => Off
register_long_arrays => Off => Off
report_memleaks => On => On
report_zend_debug => Off => Off
request_order => GP => GP
safe_mode => Off => Off
safe_mode_exec_dir => no value => no value
safe_mode_gid => Off => Off
safe_mode_include_dir => no value => no value
sendmail_from => no value => no value
sendmail_path => /usr/sbin/sendmail -t -i  => /usr/sbin/sendmail -t -i 
serialize_precision => 17 => 17
short_open_tag => On => On
SMTP => localhost => localhost
smtp_port => 25 => 25
sql.safe_mode => Off => Off
track_errors => Off => Off
unserialize_callback_func => no value => no value
upload_max_filesize => 20M => 20M
upload_tmp_dir => no value => no value
user_dir => no value => no value
user_ini.cache_ttl => 300 => 300
user_ini.filename => .user.ini => .user.ini
variables_order => GPCS => GPCS
xmlrpc_error_number => 0 => 0
xmlrpc_errors => Off => Off
y2k_compliance => On => On
zend.enable_gc => On => On

ctype

ctype functions => enabled

date

date/time support => enabled
"Olson" Timezone Database Version => 0.system
Timezone Database => internal
Default timezone => America/Los_Angeles

Directive => Local Value => Master Value
date.default_latitude => 31.7667 => 31.7667
date.default_longitude => 35.2333 => 35.2333
date.sunrise_zenith => 90.583333 => 90.583333
date.sunset_zenith => 90.583333 => 90.583333
date.timezone => America/Los_Angeles => America/Los_Angeles

dba

DBA support => enabled
Supported handlers => cdb cdb_make db4 inifile flatfile 

Directive => Local Value => Master Value
dba.default_handler => flatfile => flatfile

dom

DOM/XML => enabled
DOM/XML API Version => 20031129
libxml Version => 2.7.8
HTML Support => enabled
XPath Support => enabled
XPointer Support => enabled
Schema Support => enabled
RelaxNG Support => enabled

ereg

Regex Library => Bundled library enabled

exif

EXIF Support => enabled
EXIF Version => 1.4 $Id: exif.c 321634 2012-01-01 13:15:04Z felipe $
Supported EXIF Version => 0220
Supported filetypes => JPEG,TIFF

Directive => Local Value => Master Value
exif.decode_jis_intel => JIS => JIS
exif.decode_jis_motorola => JIS => JIS
exif.decode_unicode_intel => UCS-2LE => UCS-2LE
exif.decode_unicode_motorola => UCS-2BE => UCS-2BE
exif.encode_jis => no value => no value
exif.encode_unicode => ISO-8859-15 => ISO-8859-15

fileinfo

fileinfo support => enabled
version => 1.0.5-dev

filter

Input Validation and Filtering => enabled
Revision => $Revision: 321634 $

Directive => Local Value => Master Value
filter.default => unsafe_raw => unsafe_raw
filter.default_flags => no value => no value

ftp

FTP support => enabled

gettext

GetText Support => enabled

hash

hash support => enabled
Hashing Engines => md2 md4 md5 sha1 sha224 sha256 sha384 sha512 ripemd128 ripemd160 ripemd256 ripemd320 whirlpool tiger128,3 tiger160,3 tiger192,3 tiger128,4 tiger160,4 tiger192,4 snefru snefru256 gost adler32 crc32 crc32b salsa10 salsa20 haval128,3 haval160,3 haval192,3 haval224,3 haval256,3 haval128,4 haval160,4 haval192,4 haval224,4 haval256,4 haval128,5 haval160,5 haval192,5 haval224,5 haval256,5 

iconv

iconv support => enabled
iconv implementation => glibc
iconv library version => 2.15

Directive => Local Value => Master Value
iconv.input_encoding => ISO-8859-1 => ISO-8859-1
iconv.internal_encoding => ISO-8859-1 => ISO-8859-1
iconv.output_encoding => ISO-8859-1 => ISO-8859-1

json

json support => enabled
json version => 1.2.1

libxml

libXML support => active
libXML Compiled Version => 2.7.8
libXML Loaded Version => 20708
libXML streams => enabled

mbstring

Multibyte Support => enabled
Multibyte string engine => libmbfl
HTTP input encoding translation => disabled

mbstring extension makes use of "streamable kanji code filter and converter", which is distributed under the GNU Lesser General Public License version 2.1.

Multibyte (japanese) regex support => enabled
Multibyte regex (oniguruma) backtrack check => On
Multibyte regex (oniguruma) version => 4.7.1

Directive => Local Value => Master Value
mbstring.detect_order => no value => no value
mbstring.encoding_translation => Off => Off
mbstring.func_overload => 0 => 0
mbstring.http_input => pass => pass
mbstring.http_output => pass => pass
mbstring.http_output_conv_mimetypes => ^(text/|application/xhtml\+xml) => ^(text/|application/xhtml\+xml)
mbstring.internal_encoding => no value => no value
mbstring.language => neutral => neutral
mbstring.strict_detection => Off => Off
mbstring.substitute_character => no value => no value

mhash

MHASH support => Enabled
MHASH API Version => Emulated Support

openssl

OpenSSL support => enabled
OpenSSL Library Version => OpenSSL 1.0.1 14 Mar 2012
OpenSSL Header Version => OpenSSL 1.0.1 14 Mar 2012

pcntl

pcntl support => enabled

pcre

PCRE (Perl Compatible Regular Expressions) Support => enabled
PCRE Library Version => 8.12 2011-01-15

Directive => Local Value => Master Value
pcre.backtrack_limit => 1000000 => 1000000
pcre.recursion_limit => 100000 => 100000

Phar

Phar: PHP Archive support => enabled
Phar EXT version => 2.0.1
Phar API version => 1.1.1
SVN revision => $Revision: 321634 $
Phar-based phar archives => enabled
Tar-based phar archives => enabled
ZIP-based phar archives => enabled
gzip compression => enabled
bzip2 compression => enabled
Native OpenSSL support => enabled

Phar based on pear/PHP_Archive, original concept by Davey Shafik.
Phar fully realized by Gregory Beaver and Marcus Boerger.
Portions of tar implementation Copyright (c) 2003-2009 Tim Kientzle.
Directive => Local Value => Master Value
phar.cache_list => no value => no value
phar.readonly => On => On
phar.require_hash => On => On

posix

Revision => $Revision: 321634 $

Reflection

Reflection => enabled
Version => $Revision: 321634 $

session

Session Support => enabled
Registered save handlers => files user 
Registered serializer handlers => php php_binary wddx 

Directive => Local Value => Master Value
session.auto_start => Off => Off
session.bug_compat_42 => Off => Off
session.bug_compat_warn => Off => Off
session.cache_expire => 180 => 180
session.cache_limiter => nocache => nocache
session.cookie_domain => no value => no value
session.cookie_httponly => Off => Off
session.cookie_lifetime => 0 => 0
session.cookie_path => / => /
session.cookie_secure => Off => Off
session.entropy_file => no value => no value
session.entropy_length => 0 => 0
session.gc_divisor => 1000 => 1000
session.gc_maxlifetime => 1440 => 1440
session.gc_probability => 0 => 0
session.hash_bits_per_character => 5 => 5
session.hash_function => 0 => 0
session.name => PHPSESSID => PHPSESSID
session.referer_check => no value => no value
session.save_handler => files => files
session.save_path => /var/lib/php5 => /var/lib/php5
session.serialize_handler => php => php
session.use_cookies => On => On
session.use_only_cookies => On => On
session.use_trans_sid => 0 => 0

shmop

shmop support => enabled

SimpleXML

Simplexml support => enabled
Revision => $Revision: 321634 $
Schema support => enabled

soap

Soap Client => enabled
Soap Server => enabled

Directive => Local Value => Master Value
soap.wsdl_cache => 1 => 1
soap.wsdl_cache_dir => /tmp => /tmp
soap.wsdl_cache_enabled => 1 => 1
soap.wsdl_cache_limit => 5 => 5
soap.wsdl_cache_ttl => 86400 => 86400

sockets

Sockets Support => enabled

SPL

SPL support => enabled
Interfaces => Countable, OuterIterator, RecursiveIterator, SeekableIterator, SplObserver, SplSubject
Classes => AppendIterator, ArrayIterator, ArrayObject, BadFunctionCallException, BadMethodCallException, CachingIterator, DirectoryIterator, DomainException, EmptyIterator, FilesystemIterator, FilterIterator, GlobIterator, InfiniteIterator, InvalidArgumentException, IteratorIterator, LengthException, LimitIterator, LogicException, MultipleIterator, NoRewindIterator, OutOfBoundsException, OutOfRangeException, OverflowException, ParentIterator, RangeException, RecursiveArrayIterator, RecursiveCachingIterator, RecursiveDirectoryIterator, RecursiveFilterIterator, RecursiveIteratorIterator, RecursiveRegexIterator, RecursiveTreeIterator, RegexIterator, RuntimeException, SplDoublyLinkedList, SplFileInfo, SplFileObject, SplFixedArray, SplHeap, SplMinHeap, SplMaxHeap, SplObjectStorage, SplPriorityQueue, SplQueue, SplStack, SplTempFileObject, UnderflowException, UnexpectedValueException

standard

Dynamic Library Support => enabled
Path to sendmail => /usr/sbin/sendmail -t -i 

Directive => Local Value => Master Value
assert.active => 1 => 1
assert.bail => 0 => 0
assert.callback => no value => no value
assert.quiet_eval => 0 => 0
assert.warning => 1 => 1
auto_detect_line_endings => 0 => 0
default_socket_timeout => 60 => 60
from => no value => no value
safe_mode_allowed_env_vars => PHP_ => PHP_
safe_mode_protected_env_vars => LD_LIBRARY_PATH => LD_LIBRARY_PATH
url_rewriter.tags => a=href,area=href,frame=src,input=src,form=fakeentry => a=href,area=href,frame=src,input=src,form=fakeentry
user_agent => no value => no value

sysvmsg

sysvmsg support => enabled
Revision => $Revision: 321634 $

tokenizer

Tokenizer Support => enabled

wddx

WDDX Support => enabled
WDDX Session Serializer => enabled

xml

XML Support => active
XML Namespace Support => active
libxml2 Version => 2.7.8

xmlreader

XMLReader => enabled

xmlwriter

XMLWriter => enabled

zip

Zip => enabled
Extension Version => $Id: php_zip.c 321634 2012-01-01 13:15:04Z felipe $
Zip version => 1.9.1
Libzip version => 0.9.0

zlib

ZLib Support => enabled
Stream Wrapper support => compress.zlib://
Stream Filter support => zlib.inflate, zlib.deflate
Compiled Version => 1.2.1.1
Linked Version => 1.2.3.4

Directive => Local Value => Master Value
zlib.output_compression => Off => Off
zlib.output_compression_level => -1 => -1
zlib.output_handler => no value => no value

Additional Modules

Module Name
readline
sysvsem
sysvshm

Environment

Variable => Value
GNOME_KEYRING_CONTROL => /tmp/keyring-RhKbl6
XDG_SESSION_PATH => /org/freedesktop/DisplayManager/Session0
SSH_AGENT_PID => 1423
XFILESEARCHPATH => /usr/dt/app-defaults/%L/Dt
SESSION_MANAGER => local/joomla-VirtualBox:@/tmp/.ICE-unix/1316,unix/joomla-VirtualBox:/tmp/.ICE-unix/1316
GNOME_DESKTOP_SESSION_ID => this-is-deprecated
XDG_SESSION_COOKIE => ae1261c70d1ac1b039e621b500000005-1341681427.84811-994195454
GDMSESSION => ubuntu-2d
MANDATORY_PATH => /usr/share/gconf/ubuntu-2d.mandatory.path
XDG_DATA_DIRS => /usr/share/ubuntu-2d:/usr/share/gnome:/usr/local/share/:/usr/share/
PWD => /home/joomla
GIO_LAUNCHED_DESKTOP_FILE => /home/joomla/eclipse.desktop
LOGNAME => joomla
GIO_LAUNCHED_DESKTOP_FILE_PID => 4808
GPG_AGENT_INFO => /tmp/keyring-RhKbl6/gpg:0:1
NLSPATH => /usr/dt/lib/nls/msg/%L/%N.cat
SSH_AUTH_SOCK => /tmp/keyring-RhKbl6/ssh
LD_LIBRARY_PATH => /usr/bin
SHELL => /bin/bash
DBUS_SESSION_BUS_ADDRESS => unix:abstract=/tmp/dbus-oBhXTh59Tm,guid=a7bdcef1528a12b9a9b24b150000000c
PATH => /usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
XDG_CONFIG_DIRS => /etc/xdg/xdg-ubuntu-2d:/etc/xdg
XDG_CURRENT_DESKTOP => Unity
DESKTOP_SESSION => ubuntu-2d
DISPLAY => :0
UBUNTU_MENUPROXY => libappmenu.so
USER => joomla
XDEBUG_CONFIG => remote_enable=1 idekey=ECLIPSE_DBGP
HOME => /home/joomla
XAUTHORITY => /home/joomla/.Xauthority
DEFAULTS_PATH => /usr/share/gconf/ubuntu-2d.default.path
XDG_SEAT_PATH => /org/freedesktop/DisplayManager/Seat0
DBGP_COOKIE => 13417791168931
DBGP_IDEKEY => ECLIPSE_DBGP
LANG => en_US.UTF-8

PHP Variables

Variable => Value
_SERVER["GNOME_KEYRING_CONTROL"] => /tmp/keyring-RhKbl6
_SERVER["XDG_SESSION_PATH"] => /org/freedesktop/DisplayManager/Session0
_SERVER["SSH_AGENT_PID"] => 1423
_SERVER["XFILESEARCHPATH"] => /usr/dt/app-defaults/%L/Dt
_SERVER["SESSION_MANAGER"] => local/joomla-VirtualBox:@/tmp/.ICE-unix/1316,unix/joomla-VirtualBox:/tmp/.ICE-unix/1316
_SERVER["GNOME_DESKTOP_SESSION_ID"] => this-is-deprecated
_SERVER["XDG_SESSION_COOKIE"] => ae1261c70d1ac1b039e621b500000005-1341681427.84811-994195454
_SERVER["GDMSESSION"] => ubuntu-2d
_SERVER["MANDATORY_PATH"] => /usr/share/gconf/ubuntu-2d.mandatory.path
_SERVER["XDG_DATA_DIRS"] => /usr/share/ubuntu-2d:/usr/share/gnome:/usr/local/share/:/usr/share/
_SERVER["PWD"] => /home/joomla
_SERVER["GIO_LAUNCHED_DESKTOP_FILE"] => /home/joomla/eclipse.desktop
_SERVER["LOGNAME"] => joomla
_SERVER["GIO_LAUNCHED_DESKTOP_FILE_PID"] => 4808
_SERVER["GPG_AGENT_INFO"] => /tmp/keyring-RhKbl6/gpg:0:1
_SERVER["NLSPATH"] => /usr/dt/lib/nls/msg/%L/%N.cat
_SERVER["SSH_AUTH_SOCK"] => /tmp/keyring-RhKbl6/ssh
_SERVER["LD_LIBRARY_PATH"] => /usr/bin
_SERVER["SHELL"] => /bin/bash
_SERVER["DBUS_SESSION_BUS_ADDRESS"] => unix:abstract=/tmp/dbus-oBhXTh59Tm,guid=a7bdcef1528a12b9a9b24b150000000c
_SERVER["PATH"] => /usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games
_SERVER["XDG_CONFIG_DIRS"] => /etc/xdg/xdg-ubuntu-2d:/etc/xdg
_SERVER["XDG_CURRENT_DESKTOP"] => Unity
_SERVER["DESKTOP_SESSION"] => ubuntu-2d
_SERVER["DISPLAY"] => :0
_SERVER["UBUNTU_MENUPROXY"] => libappmenu.so
_SERVER["USER"] => joomla
_SERVER["XDEBUG_CONFIG"] => remote_enable=1 idekey=ECLIPSE_DBGP
_SERVER["HOME"] => /home/joomla
_SERVER["XAUTHORITY"] => /home/joomla/.Xauthority
_SERVER["DEFAULTS_PATH"] => /usr/share/gconf/ubuntu-2d.default.path
_SERVER["XDG_SEAT_PATH"] => /org/freedesktop/DisplayManager/Seat0
_SERVER["DBGP_COOKIE"] => 13417791168931
_SERVER["DBGP_IDEKEY"] => ECLIPSE_DBGP
_SERVER["LANG"] => en_US.UTF-8
_SERVER["PHP_SELF"] => /var/www/test/test.php
_SERVER["SCRIPT_NAME"] => /var/www/test/test.php
_SERVER["SCRIPT_FILENAME"] => /var/www/test/test.php
_SERVER["PATH_TRANSLATED"] => /var/www/test/test.php
_SERVER["DOCUMENT_ROOT"] => 
_SERVER["REQUEST_TIME"] => 1341779117
_SERVER["argv"] => Array
(
    [0] => /var/www/test/test.php
)

_SERVER["argc"] => 1

PHP License
This program is free software; you can redistribute it and/or modify
it under the terms of the PHP License as published by the PHP Group
and included in the distribution in the file:  LICENSE

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

If you did not receive a copy of the PHP license, or have any
questions about PHP licensing, please contact license@php.net. 
```

谢谢你的帮助！

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T01:38:12.260

虽然 danip 建议在 php.ini 中添加 xdebug 配置是正确的，但解决此问题的更简单方法是将 xdebug.ini 添加到 PHP 可执行文件信息对话框中的“PHP ini 文件（可选）”字段中。

从调试配置对话框的 PHP 脚本选项卡中，选择 Alternate PHP，然后单击“Installed PHP...”按钮，然后添加或编辑所提到的 PHP 可执行信息。

通常，CLI php 会读取 conf.d 中的 ini 文件（xdebug.ini 通常位于该位置），但不会在 PHP Eclipse (PDT) 下读取，因此是此问题的根本原因。PDT 3.1.1 尚未解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T21:23:52.930

在我的 linux 上，我指定了 php.ini 文件并将 xdebug 配置放入其中。（ xdebug 是在 php.d 文件夹中设置的，而 eclipse 没有加载它）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T09:14:28.867

今天我遇到了同样的问题。可以通过简单的检查选项来修复它：“使用系统默认的 php.ini 配置”。

[![在此处输入图像描述](../Images/eb33f218c43ca3cd8e927a2266134e62.png)](https://i.stack.imgur.com/nCvBQ.png)

# node.js - NodeJS - 我无法弄清楚的 MongooseJS 架构错误

> ID：11353829
> 
> 赞同：8
> 
> 时间：2012-07-05T23:17:41.220
> 
> 标签：node.js, mongoose

也许第二双眼睛可以看到我的架构出了什么问题

```
var UserSchema = new Schema({
        name: 
                {
                        first : {type: String}
                    ,   last : {type : String}
                }
    ,   password: {type: String}
    ,   username: {type: String}
    , role: RoleSchema
  , created_at  : {type : Date, default : Date.now}
  , modified_at  : {type : Date, default : Date.now}
})

var RoleSchema = {
        type: [String]
    ,   study_type: [String]
}

mongoose.model('User', UserSchema) 
```

错误：

```
TypeError: Invalid value for schema path `role` 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-05T23:22:04.193

嵌入式架构（角色）需要在 UserSchema 之上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T16:41:16.453

除了必须在 UserSchema 之前导入 Roles 模式之外。

在较新版本的 mongoose 中，还需要使用以下语法来超越`'TypeError: Invalid value for schema Array path`：

```
var SomeSchema = new mongoose.Schema();

  SomeSchema.add({
    key1: {
      type: String,
      required: true
    },
    key2: {
      type: String,
      required: true
    },
    key3: {
      type: String,
      required: true
    }
  });

  SomeSchema.get(function(val){
    // Remove the _id from the Violations
    delete val._id;
    return val;
  }); 
```

和家长：

```
var ParentSchema = new mongoose.Schema({
    parentKey: String,
    someArray: [SomeSchema]
})

module.exports = mongoose.model('Parent', ParentSchema) 
```

从 mongoose 3.x 切换到 4.x 时发生这种情况

# memory-leaks - 制作一个没有内存泄漏的简单 wxWidgets 程序

> ID：11353830
> 
> 赞同：1
> 
> 时间：2012-07-05T23:17:53.293
> 
> 标签：memory-leaks, wxwidgets

我正在尝试制作一个不会泄漏任何内存的基本 wxWidgets 程序（我正在 Windows 7 上开发并使用 Visual Studio 2010 并尝试使用 CRT 检查泄漏）。

我从 OpenGL 示例开始，并逐渐将其简化。在将 CRT 调用添加到我的 wxApp 对象的 OnExit 方法（我见过的*唯一提到它的地方）之后，我意识到内存到处泄漏。*

我逐渐对其进行了更多的工作，直到我创建了这个示例代码，这使得 CRT 吐出了大量的泄漏：

```
#include <wx/glcanvas.h>
#include <wx/wxprec.h>
#ifndef WX_PRECOMP
    #include <wx/wx.h>
#endif

#ifdef __WXMSW__
#include <wx/msw/msvcrt.h>
#endif
#if !defined(_INC_CRTDBG)// || !defined(_CRTDBG_MAP_ALLOC)
    #error "Debug CRT functions have not been included!"
#endif

class App : public wxApp {
    public:
        bool OnInit(void);
        int OnExit(void);
};
bool App::OnInit(void) {
    if (!wxApp::OnInit()) return false;
    return true;
}
int App::OnExit(void) {
    return wxApp::OnExit();
}

int WINAPI WinMain(HINSTANCE h_instance, HINSTANCE h_prev_instance, wxCmdLineArgType cmd_line, int cmd_show) {
    int leaks = _CrtDumpMemoryLeaks();
    if (leaks) {
        int i=0, j=6/i; //Put a breakpoint here or throw an exception
    }

    return EXIT_SUCCESS;
}

#pragma comment(lib,"wxbase29ud.lib")
#pragma comment(lib,"wxmsw29ud_gl.lib")
#pragma comment(lib,"wxmsw29ud_core.lib")
#pragma comment(lib,"wxpngd.lib")
#pragma comment(lib,"wxzlibd.lib")
#pragma comment(lib,"comctl32.lib")
#pragma comment(lib,"rpcrt4.lib") 
```

请注意，App 类没有在任何地方使用。类外的函数定义对于防止它被优化是必要的。如果类 App*不*存在，则不会发生错误。

问题是，为什么这不起作用？如何制作无泄漏的 wxWidgets 程序？我应该如何使用 _CrtDumpMemoryLeaks()？为什么没有这方面的资源——如果有，它们在哪里？我能找到的最好的是[this](http://wiki.wxwidgets.org/Avoiding_Memory_Leaks)，它只建议使用 CRT，但实际上并没有说明如何使用。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:57:45.807

这些可能不是真正的内存泄漏。当您调用`_CrtDumpMemoryLeaks()`它时，它会通过堆查找尚未释放的对象并将它们显示为泄漏。由于您在应用程序结束之前调用它，因此在堆上分配的任何内容都将显示为泄漏。

我很确定 wxWidgets 创建了一些全局对象（例如，我知道有 wxEmptyString、wxDefaultPosition 等等，我敢说还有其他确实执行了一些分配）直到应用程序结束后才会被销毁. `_CrtDumpMemoryLeaks()`在该点之后需要调用，以免显示误报。

您可以尝试让 CRT`_CrtDumpMemoryLeaks()`在程序退出时自动调用，[如 MSDN 中所述](http://msdn.microsoft.com/en-us/library/d41t22sb%28v=vs.100%29.aspx)。

[这里](https://stackoverflow.com/questions/2153776/how-to-use-crtdumpmemoryleaks)还有一个相关的问题可能会对您有所帮助。

编辑：我自己尝试过，将以下代码添加到我的 App::OnInit() 方法的顶部，我得到的唯一泄漏是一个 64 字节的泄漏，它与我的强制泄漏相匹配。所以看起来并不是所有的 wx 应用程序都是泄漏的。但是，我也使用您的代码进行了尝试，并且确实报告了泄漏。

```
_CrtSetReportMode( _CRT_ERROR, _CRTDBG_MODE_FILE );
_CrtSetReportFile( _CRT_ERROR, _CRTDBG_FILE_STDERR );

int tmpDbgFlag = _CrtSetDbgFlag(_CRTDBG_REPORT_FLAG);
tmpDbgFlag |= _CRTDBG_LEAK_CHECK_DF;
_CrtSetDbgFlag(tmpDbgFlag);

// Force a leak
malloc(64); 
```

编辑 2：您需要在`App`类定义之后包含以下行，以便 wxWidgets 使用您的 App 类作为应用程序对象（并提供它自己的 WinMain）。我猜无论它在 wxApp 中做什么都需要这条线才能正确清理自己：

```
IMPLEMENT_APP(App) 
```

编辑 3：我还发现，在您链接到的 wxWidgets 页面中，启动代码将`_CrtSetDbgFlag()`在调试模式下自动为您调用。因此，您无需自己添加代码即可进行泄漏检测。您可以通过分配一些内存而不是释放它来测试它。

# sql - 查找列的唯一组合

> ID：11353835
> 
> 赞同：1
> 
> 时间：2012-07-05T23:18:08.913
> 
> 标签：sql, sql-server

我正在尝试编写一个选择查询，但遇到了麻烦，可能是因为我不熟悉 SQL Server（通常使用`MySQL`）。

基本上我需要做的是找到两列的唯一组合的数量，一列 a`Varchar`和一列 a `Double`。

一行比另一行少，所以我一直在试图找出正确的方法来做到这一点。

基本上假装 Table.Varchar 有它：

```
Table.Varchar
--------------
apple  
orange 
```

和 Table.Float 里面有：

```
Table.Float
--------------
1   
2  
3\. 
```

我怎么能写一个返回的查询

```
QueryResult
-------------
apple1
apple2
apple3
orange1
orange2
orange3 
```

漫长的一天工作，我想我只是想太多了，到目前为止我尝试的是连接两列然后计数，但它不起作用。有什么想法可以更好地解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:26:37.967

```
Select T1.VarcharField +  CAST(T2.FloatField as Varchar(10)) as [Concat]
from Table.Varchar T1
CROSS JOIN Table.Float T2 
```

这样，您正在生成字段

所以，然后分组并使用 Count

```
select  T.Concat, count(*) from 
(Select T1.VarcharField + CAST(T2.FloatField as Varchar(10)) as [Concat]
    from Table.Varchar T1
    CROSS JOIN Table.Float T2) T
group by T.Concat order by count(*) asc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:38:36.197

这将消除重复：

```
DECLARE @Varchar TABLE(v VARCHAR(32));

DECLARE @Float TABLE(f FLOAT);

INSERT @Varchar SELECT 'apple' 
  UNION ALL SELECT 'orange' 
  UNION ALL SELECT 'apple';

INSERT @Float SELECT 1 
  UNION ALL SELECT 2 
  UNION ALL SELECT 3;

SELECT v.v + CONVERT(VARCHAR(12), f.f)
 FROM @Varchar AS v
 CROSS JOIN @Float AS f
 GROUP BY v.v, f.f; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T23:24:56.050

如果它们在同一个表中：

```
SELECT a.Field1, b.Field2
FROM [Table] a
    CROSS JOIN [Table] b 
```

或者如果它们在单独的表中：

```
SELECT a.Field1, b.Field2
FROM [Table1] a
    CROSS JOIN [Table2] b 
```

请记住，上述查询会将第一个表中的*所有记录与第二个表中的**所有*记录匹配，从而创建[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T05:13:12.257

尝试这个

可能的组合。

```
SELECT 
DISTINCT T1.VarField+CONVERT(VARCHAR(12),T2.FtField) --Get Unique Combinations
FROM Table1 T1 CROSS JOIN Table2 T2 --From all possible combinations
WHERE T1.VarField IS NOT NULL AND T2.FtField IS NOT NULL --Making code NULL Proof 
```

并获得可能的组合计数

```
SELECT Count(DISTINCT T1.VarcharField + CONVERT(VARCHAR(12), T2.FloatField))
FROM Table1 T1  
CROSS JOIN Table2 T2 
WHERE T1.VarcharField IS NOT NULL AND T2.FloatField IS NOT NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T23:27:49.320

交叉连接是一种连接，其中一个表中的每条记录与另一个表中的每条记录相结合。从表中选择不同的值并将它们连接起来。

```
select x.Varchar, y.Float
from (select distinct Varchar from theTable) x
cross join (select distinct Float from theTable) y 
```

要查找组合的数量，您不必实际返回所有组合，只需计算它们。

```
select
  (select count(distinct Varchar) from theTable) *
  (select count(distinct Float) from theTable) 
```

# ruby-on-rails - 如何正确使用 hidden_ fields 和 ruby on rails 将信息传递给控制器 ？

> ID：11353839
> 
> 赞同：0
> 
> 时间：2012-07-05T23:18:52.030
> 
> 标签：ruby-on-rails, hidden-field

我试图让用户按下一个按钮，使用 hidden_​​field 在数据库中创建一个新条目。但是，我确实想传递给数据库的一点信息并没有在那里。

视图上的表格

```
<%= form_for(current_user.rounds.build(:round_id => '201202')) do |f| %>
    <div><%= f.hidden_field :round_id %></div>
    <%= f.submit "Register", class: "btn btn-large" %>
<% end %> 
```

控制器

```
def create
    @register = current_user.rounds.build(params[:round_id])
    if @register.save
        redirect_to root_path, :flash => { :success => "Registered" }
    end
end 
```

然而，这段代码在数据库中创建了一个带有 user_id 但没有 round_id 的新条目。

有人可以告诉我我的错误在哪里吗？

谢谢

编辑：我的视图代码生成的html代码

```
<form id="new_round" class="new_round" method="post" action="/rounds" accept-charset"UTF-8">
    <div>
        <input id="round_round_id" type="hidden" value="201202" name"round[round_id]">
    </div>
    <input class"btn brn-large" type"submit" value="Register" name="commit">
</form> 
```

圆形模型

```
Class Round < ActiveRecord::Base
    attr_accessible :user_id, :round_id, :score

    belongs_to :user
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:43:59.323

问题是您正在`hidden_field`从`form_for`实例中使用。当您使用它时，传递给控制器​​的参数会有所不同。
尝试使用`hidden_field_tag "round_id"`，您将获得预期的结果。

# python - 在fabric中作为sudo执行

> ID：11353840
> 
> 赞同：5
> 
> 时间：2012-07-05T23:18:54.880
> 
> 标签：python, fabric

我有一个命令`service app start-demo`需要我`sudo service app start-demo`在命令行中输入。

我用过`sudo(service app start-demo)`，`sudo(sudo service app start-demo)`但我仍然得到

警告：sudo() 在执行 'sudo service app start-demo' 时遇到错误（返回码 1）

我在终端中将其作为命令行执行没有问题。

我不确定是否`SADeprecationWarning:`算作面料失败？

谢谢。

* * *

```
user@box:/var/lib/app$ fab kickstart
You are installing prereqs..........
### Install Prereqs for Populate ###
No hosts found. Please specify (single) host string for connection: localhost
[localhost] Login password: 

### I am starting demo ###
[localhost] sudo: sudo service app start-demo
[localhost] out: Starting demo

Fatal error: sudo() encountered an error (return code 1) while executing 'sudo service app start-demo'

Aborting.
Disconnecting from localhost... done. 
```

编码

```
def pserve():
    print '### I am starting demo ###'
    #with settings(warn_only=True):
    sudo('sudo service app start-demo')
    #sudo('service app start-demo') 
```

任何一个`sudo`命令都会失败。

* * *

`/etc/sudoers`

```
# /etc/sudoers
#
# This file MUST be edited with the 'visudo' command as root.
#
# See the man page for details on how to write a sudoers file.
#

Defaults    env_reset

# Host alias specification

# User alias specification

# Cmnd alias specification

# User privilege specification
root    ALL=(ALL) ALL

# Allow members of group sudo to execute any command after they have
# provided their password
# (Note that later entries override this, so you might need to move
# it further down)
%sudo ALL=(ALL) ALL
#
#includedir /etc/sudoers.d

# Members of the admin group may gain root privileges
%admin ALL=(ALL) NOPASSWD:ALL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T18:00:59.830

[这与faq](http://docs.fabfile.org/en/1.4.2/faq.html#init-scripts-don-t-work)中提到的这一点密切相关，但如果命令不返回 0（所有好的 unix 标准），它会快速失败，除非你告诉它只发出警告。

# ajax - Websockets (Socket.io) 和身份验证/授权

> ID：11353846
> 
> 赞同：1
> 
> 时间：2012-07-05T23:19:50.100
> 
> 标签：ajax, http, authentication, authorization, socket.io

我正在试一试socket.io，我很好奇我应该和不应该用websockets做什么。

例如，有没有一种方法来验证 websocket（也许在每条消息中都包含 id？）？假设我正在创建一个类似“谷歌文档”的应用程序，人们可以在其中创建新文档。我应该使用 AJAX 而不是 websockets 创建新文档吗？这样我就可以使用标准 HTTP 传输层来执行所有用户授权（检查会话等），然后简单地使用 websocket 事件 ping 回页面。很好奇人们如何处理这样的情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:45:56.877

我建议在您绝对不需要 Web 套接字的地方使用 AJAX。Web 套接字最终会在服务器端产生更多负载（socket.io 将处理后备以防万一 Web 套接字和闪存套接字不可用）。简而言之，在需要维护与客户端的状态/连接的地方使用 Web 套接字。

如果您希望使用 Web 套接字，使用带有 socket.io 的 cookie 将是一种允许您跟踪会话的方法。如果不马上使用 socket.io，你可以发送 req.sessionID(key) 到客户端，将会话信息存储在 Redis/Mongo 等。当尝试连接 socket.io 时，读取 cookie 值并将其发送到服务器 - 您可以在其中获取会话存储信息。如果您使用闪存插槽作为后备之一，则可能会出现问题。

希望这可以帮助。

# ruby-on-rails - 未初始化的常量 [Incident::Involf]

> ID：11353847
> 
> 赞同：1
> 
> 时间：2012-07-05T23:19:50.733
> 
> 标签：ruby-on-rails, activerecord, associations

我有一个使用 Active Admin 的 rails 应用程序。基本流程是我有一个事件模型与其他模型有关联。连接其他模型似乎很好，但特别是对于一个模型（涉及），我在创建新事件时收到错误未初始化常量 Incident::Involf。

事件模型如下所示

```
class Incident < ActiveRecord::Base
 # Relationships
 belongs_to :admin_user
 has_many :images
 has_and_belongs_to_many :incident_types
 has_and_belongs_to_many :involves
 has_and_belongs_to_many :special_considerations

 belongs_to :county
 belongs_to :location

 # Nested Attributes
 accepts_nested_attributes_for :images
 accepts_nested_attributes_for :county
 accepts_nested_attributes_for :location
 accepts_nested_attributes_for :incident_types
 accepts_nested_attributes_for :involves
 accepts_nested_attributes_for :special_considerations   
end 
```

Involve 模型如下所示

```
class Involve < ActiveRecord::Base

  # Relationships
  has_and_belongs_to_many :incidents

  # Aliases
  alias_attribute :name, :involved

end 
```

嵌套事件的活动管理模型如下所示

```
f.inputs "Vehicles Involved" do
    f.input :involves, :as => :check_boxes
 end

f.inputs "Special Considerations" do
    f.input :special_considerations, :as => :check_boxes
end 
```

如果我将 f.input :involves, :as => :check_boxes 注释掉，则特殊注意事项起作用，但如果我没有将它注释掉，我会收到此错误。

查看了数据库和关联，代码与其他人非常相似，我不确定问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T20:39:13.220

此问题已解决。

看起来像是 Involve 的复数形式或涉及是关键字的问题。

我将模型名称更改为 Incident_Involvement 并解决了问题。

# eclipse - 重启时的 Eclipse E4 模型片段 LazyStackRenderer NullPointerException

> ID：11353851
> 
> 赞同：0
> 
> 时间：2012-07-05T23:20:32.330
> 
> 标签：eclipse, model, fragment, eclipse-juno

我使用“Eclipse E4 应用程序项目”向导创建了一个插件，然后添加了第二个带有模型片段的插件，该片段为 E4 应用程序的一个 PartStack 贡献了一个部件。

为此，我遵循[http://www.vogella.com/articles/Eclipse4Modularity/article.html](http://www.vogella.com/articles/Eclipse4Modularity/article.html) ：在原始 Application.e4xmi 中设置 PartStack 的 ID，然后定义将 Part 添加到 PartStack 的 fragment.xmi。

*第一次*执行时一切正常，或使用*新工作区*执行（通过在程序参数中添加“-clearPersistedState”）。但是，当使用包含持久化 workbench.xmi 的现有工作区启动应用程序时，会出现以下错误消息：

```
!MESSAGE Problems occurred when invoking code from plug-in: "org.eclipse.e4.ui.workbench.swt".
java.lang.NullPointerException
at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.showTab(LazyStackRenderer.java:156)
at org.eclipse.e4.ui.workbench.renderers.swt.StackRenderer.showTab(StackRenderer.java:1024)
at org.eclipse.e4.ui.workbench.renderers.swt.LazyStackRenderer.postProcess(LazyStackRenderer.java:98)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:639)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.safeCreateGui(PartRenderingEngine.java:725)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.access$2(PartRenderingEngine.java:696)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$7.run(PartRenderingEngine.java:690)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.createGui(PartRenderingEngine.java:675) 
```

调试到 LazyStackRenderer.java:156 表明 getParent() 调用返回 null。

问题似乎源于重新加载持久化的 workbench.xmi，其中包括此部分（XML 小于等已删除）：

```
...children xsi:type="basic:PartStack" xmi:id="..." elementId="demo.app.mainstack" contributorURI="platform:/plugin/E4DemoApp" selectedElement="_MG5SoMbxEeGKj8gOLKAMgw"
....children xsi:type="basic:Part" xmi:id="_MG5SoMbxEeGKj8gOLKAMgw" elementId="demo.app.added_part" contributorURI="..." contributionURI="bundleclass://..." label="Added Part" 
```

请注意，PartStack 的“selectedElement”指向其单个子条目。在 E4Application.loadApplicationModel() 中加载该模型时，其中的“theApp”如下所示：

```
Window->Perspective->...->PartStackImpl->PartImpl 
```

PartImpl.eContainer 指向 PartStackImpl。好的。

PartStackImpl.selectedElement 应该反过来引用单个封闭的 PartImpl。相反，它指的是*不同*的 PartImpl，即具有正确 elementId、contributorURI 和contributionURI 的对象，但对于 eContainer 为 null。

因此，持久化的 workbench.xmi 元素可以正常加载，但 selectedElement 指针指向实际模型元素的不完整副本。稍后，LazyStackRenderer 使用不完整的“selectedElement”副本，它的父级 (eContainer) 为 null，并引发 NullPointerException。

知道如何解决这个问题或解决它吗？这是针对 RCP 和 RAP 的 Eclipse 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-27T10:31:40.320

日食-开普勒。

对我来说，我去了

**...\.metadata.plugins\org.eclipse.e4.workbench 文件夹位置。**

并删除了所有内容

**工作台.xmi**

并重新启动应用程序。

为我工作，希望对我有用。

# algorithm - 在 Haskell 中用一个元素替换子列表的智能方法

> ID：11353852
> 
> 赞同：3
> 
> 时间：2012-07-05T23:20:36.217
> 
> 标签：algorithm, list, haskell

我在 Haskell 中定义了 2 种类型 -`Trip`和`Tour`. 旅行由`direction`和`distance`组成`price`。Tour 是旅行的列表。

```
type Trip = (String, Integer, Float)
type Tour = [Trip]

trip1 :: Trip
trip1 = ("NY", 50, 100)
trip2 :: Trip
trip2 = ("Paris", 150, 100)
trip3 :: Trip
trip3 = ("London", 60, 100)
...
...
tripN :: Trip
tripN = ("Rome", 90, 100)

tour :: Tour
tour = [trip1, trip2, trip3,..., tripN] 
```

行程可能有重复。我想在这里完成的是具有一个接受一个`Tour`，**`from`**destination，**`to`**destination 和 a的函数，并且该函数将**所有**Trip 序列`Trip`替换为 the和destinations之间的，*从 之后开始*，并获取更改的。 ****`from`****`to`**`Trip`***`from`***`Tour`**

 **这是上面定义的游览的示例：

```
shortenTour :: Tour -> String -> String -> Trip -> Tour
shortenTour tour "NY" "London" ("NY-London", 260, 200) 
```

所以新巡回赛的开始应该是这样的：

```
[("NY", 50, 100), ("NY-London", 260, 200), ... , ("Rome", 90, 100)] 
```

如果这个序列 "NY" - .. - "London" 在其他任何地方遇到，`Tour`它应该用新的`Trip`..

如果在到达目的地之前有两个或多个**`from`**目的地相同（例如“纽约”）的旅行，则应采取**`to`**第一个。**`from`**例如：（`distance`and`price`没有使用，所以我用 _ 替换它们）

```
shortenTour [("DC", _, _), ("NY", _, _), ("NY", _, _), ("Sofia", _, _), ("London", _, _)] "NY" "London" ("NY-London", 260, 200) 
```

应该返回

```
[("DC", _, _), ("NY", _, _), ("NY-London", 260, 200)] 
```

我想到的所有解决方案都很长而且有点难看，但我相信有一种聪明而简短（一两行代码）的方法可以通过使用列表推导来实现这一点，但仍然无法弄清楚。因此，我们将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:31:42.297

这些天我的 Haskell 非常粗糙，但您正在寻找的是：

*   以 -- 结尾的最短前缀，`from`您可以使用 `takeWhile`;
*   最长的后缀以 开头`to`，但不包含其他`to`- 您可以使用`tails`过滤器来获得它。

然后你可以加入前缀、你的快捷方式和后缀的（尾部）来得到你想要的。**

# jquery-ui - jquery自定义对话框按钮

> ID：11353862
> 
> 赞同：1
> 
> 时间：2012-07-05T23:21:40.007
> 
> 标签：jquery-ui, jquery, jquery-ui-dialog

![在此处输入图像描述](../Images/b8828cb24fdc60d01c86d00342fa7e0e.png)我正在使用带有查询 ui 1.8.7.custom.min.js 的 jquery 对话框

我需要自定义对话框上的按钮以及它们在对话框中显示的位置。在很大程度上，我能够自定义我的对话框，但到目前为止自定义按钮及其位置一直很困难。请在下面找到屏幕截图和代码

```
HTML:

<style>
.ui-dialog, .ui-dialog-content {
 border:1px solid #cde68c;
 border-bottom:0px;
 background-color: white !important;
 color: #333;
 font: 12px/180% Arial, Helvetica, sans-serif;
}
.ui-dialog-titlebar {
 display:none;
}
#ui-dialog-title-dialog {
 color: yellow !important;
 text-shadow: none;
}
.ui-dialog-buttonpane {
 border:1px solid #cde68c;
 border-top:0px;
 margin-bottom: 1%;
}

</style>
        <div id="dialog">
            <p><span id="emailNotice"></span></p>
        </div>

Javascript:

$j(document).ready(function() {

    $j('#dialog').dialog('open');
    $j('#emailNotice').html('show some notice text abcd');  

    $j('#dialog').dialog({
        modal:true,
        autoOpen: false,
        width: 600,
        buttons: {
            "Ok": function() {
                $j(this).dialog("close");
            },
            "Cancel": function() {
                className: 'cancelButtonClass',
                $j(this).dialog("close");
            }
        }
    });
}); 
```

我希望能够定位按钮左、右、上/下等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T08:24:05.547

```
 <!-- language: lang-js -->
buttons: [
       {

            text: "Delete that",
            className: 'deleteButtonClass',
            click: function() {
                alert('foobar');                
            }
        } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:30:28.540

您始终可以为该`buttons`属性传递一个空对象。然后，您将直接在“对话框”div 中添加按钮。当然，这意味着您必须手动处理按钮单击事件。

**粗略的例子：**

```
<div id="dialog">
  <p><span id="emailNotice"></span></p>
  <button id="myButton">Submit</button>
</div> 
```

**Javascript：**

```
$j('#dialog').dialog({
    modal:true,
    autoOpen: false,
    width: 600,
    buttons: {}
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-25T10:25:30.147

在 jquery-ui-1.10.0.custom.css 中找到下面的类并删除`float: right;`

```
.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset {
float: right;
} 
```

在 jquery-ui-1.10.0.custom.css 中测试，不在 jquery-ui-1.8.7.custom.css

# c - 3D骰子生成算法

> ID：11353872
> 
> 赞同：0
> 
> 时间：2012-07-05T23:22:58.433
> 
> 标签：c, algorithm, 3d

我正在用 C 语言制作一个简单的测试应用程序，它应该生成三维骰子。我将使用 OpenGL 进行实际绘图，但我无法弄清楚如何实际生成顶点。当然，这个测试的重点是看看我的算法是否有效，但我发现了一个我无法修复的主要逻辑错误。有人可以给我指出一篇文章、网站或解释这个概念的东西吗？如果不是，虽然我更愿意自己进行实际实现，但 C 代码是可以接受的。

基本上，这是我在忘记我为算法做了什么之前所做的：

```
void calculateVertices(int sides) {
    BOOL isDone = FALSE;
    int vectorsPerSide = 3;
    VDVector3f *vertices = malloc((sizeof(VDVector3f) * (sides + 1)));
    VDVector3f *normals = malloc((sizeof(VDVector3f) * (sides + 1)));

    while (!isDone) {
        // Start by positioning the first vertex.
        vertices[0] = VDVector3fMake(0.0, 0.0, 1.0);

        for (int index = 1; index <= sides; index ++) {

        }

        // Not a match, increase the number of vectors
        vectorsPerSide ++;
    }
} 
```

基本上，它会循环直到找到匹配项。这对我来说听起来效率低下，但我不知道如何做到这一点。第一个顶点实际上将在最后从数组中删除；我打算用它来创建第一面，它本来可以用来正确定位其他面。

我的主要目标是能够将数字（如 30）传递给它，并让它自动设置顶点。我*不会*对制作单面骰子和双面骰子采取保护措施，因为我有一些特别的想法。我将在其他地方输入这些顶点。

在此先感谢您的帮助！

顺便说一句，我有一个算法可以规范化完成的顶点数组。你不必费心帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:36:58.847

我认为这不可能一概而论。例如，您如何制作公平的 5 面或 9 面骰子？我想我从来没有见过这样的事情。在维基百科上的快速搜索表明柏拉图立体可能是你所追求的。[http://en.wikipedia.org/wiki/Platonic_solid](http://en.wikipedia.org/wiki/Platonic_solid)

# .net - 从循环中调用数据访问方法时如何重用 EF 数据上下文？

> ID：11353873
> 
> 赞同：0
> 
> 时间：2012-07-05T23:23:01.863
> 
> 标签：.net, c#-4.0, entity-framework-4

给定数据访问对象和具有从循环调用的`Data`签名的此数据访问对象的方法，重用 EF 数据上下文而不是为循环中的每个调用创建它的最佳方法是什么？`public void GetEntityAttributesValues(int sessId, int entId)``foreach`

环形：

```
foreach (var ord in Data.Entities.Where(m => m.SessionId == CurrentSessionId))
    {
        Data.GetEntityAttributesValues(sid, ord.Id);
        ...
    } 
```

方法：

```
 public void GetEntityAttributesValues(int sessId, int entId)
    {
        var tsOptions = new TransactionOptions { IsolationLevel = IsolationLevel.ReadUncommitted };
        using (var scope = new TransactionScope(TransactionScopeOption.Required, tsOptions))
        {
            using (var context = new MyDataEntities(MyDataConnection))
            {
                var attVals = context.OrderAttributeValues.Where(a => a.SessionId == sessId
                    && a.OrderId == entId).ToList();
                foreach (var attVal in attVals)
                {
                    var att = Attributes.Single(a => a.Key == attVal.AttributeId);
                    AttributeValues[att.Value] = attVal.AttributeValue;
                }
                scope.Complete();
            }
        }
    } 
```

因此，每次从循环中调用此方法时，我不想在 using 块中创建新上下文，而是重用数据上下文......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:35:58.550

我认为使用数据上下文的最佳方法是同时使用 IoC 和存储库模式，在设置 IoC 类结构图（[https://github.com/webadvanced/Structuremap-MVC3](https://github.com/webadvanced/Structuremap-MVC3)）后，您可以像这样使用存储库：

```
public class DatabaseFactory : Disposable, IDatabaseFactory 
{
    private DatabaseContext _database;
    public DatabaseContext Get() {
        return _database ?? (_database = new DatabaseContext());
    }
    protected override void DisposeCore() {
        if (_database != null)
            _database.Dispose();
    }
} 
```

和

```
public class FooRepository : IFooRepository {
    private readonly DatabaseContext _database;
    private readonly IDatabaseFactory _databaseFactory;
    private readonly IDbSet<Foo> _dbset;
    public MyRepository (IDatabaseFactory databaseFactory) {
        _databaseFactory = databaseFactory;
        _database = _database ?? (_database = _databaseFactory.Get());
        _dbset = _database.Set<Foo>();
    }
    protected DatabaseContext Database {
        get { return _database; }
    }
    public virtual void Add(Foo entity) {
        _dbset.Add(entity);
    } 
```

}

# python - 如何测量生成器序列的长度（列表比较与生成器表达式）

> ID：11353874
> 
> 赞同：2
> 
> 时间：2012-07-05T23:23:02.377
> 
> 标签：python, python-2.7, generator, list-comprehension, sequences

我有一个生成*有限*序列的生成器。为了确定这个序列的长度，我尝试了这两种方法：

```
 seq_len = sum([1 for _ in euler14_seq(sv)])  # list comp 
```

和

```
 seq_len = sum(1 for _ in euler14_seq(sv))    # generator expression 
```

`sv`是序列的恒定起始值。

我曾预计列表理解会更慢，而生成器表达式会更快，但结果恰恰相反。

我认为第一个会占用更多的内存，因为它首先在内存中创建了一个完整的列表——我也认为它会更慢的部分原因。

**我的问题**：这个观察可以概括吗？这是因为第二个语句与第一个语句中涉及两个生成器吗？

我看过这些[计算生成器/迭代器中项目数量的最短方法是什么？](https://stackoverflow.com/questions/5384570/whats-the-shortest-way-to-count-the-number-of-items-in-a-generator-iterator?lq=1)，[生成器输出的长度](https://stackoverflow.com/questions/393053/length-of-generator-output)，以及 [是否有任何内置方法可以在 python 中获取可迭代的长度？](https://stackoverflow.com/questions/390852/is-there-any-built-in-way-to-get-the-length-of-an-iterable-in-python)并看到了一些其他测量序列长度的方法，但我特别好奇 list comp 与生成器表达式的比较。

PS：当我根据昨天在 SO 上提出的问题决定解决[Euler Project #14时，就出现了这个问题。](http://projecteuler.net/problem=14)

（顺便说一下，`'_'`在不需要变量值的地方使用 in 的一般感觉是什么）。

这是在 Windows 7 64 位下使用 Python 2.7.2（32 位）完成的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T23:38:37.050

在这台计算机上，生成器表达式在 100,000 到 1,000,000 之间变得更快

```
$ python -m timeit "sum(1 for x in xrange(100000))"
10 loops, best of 3: 34.8 msec per loop
$ python -m timeit "sum([1 for x in xrange(100000)])"
10 loops, best of 3: 20.8 msec per loop
$ python -m timeit "sum(1 for x in xrange(1000000))"
10 loops, best of 3: 315 msec per loop
$ python -m timeit "sum([1 for x in xrange(1000000)])"
10 loops, best of 3: 469 msec per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T23:29:57.430

以下代码块应生成长度：

```
>>> gen1 = (x for x in range(10))
>>> len(list(gen1))
10 
```

# java - 从 CSV 文件中读取数据并将其显示在 JTable 中

> ID：11353875
> 
> 赞同：5
> 
> 时间：2012-07-05T23:23:03.300
> 
> 标签：java, swing, file-io, jtable, abstracttablemodel

我正在尝试从 CSV 文件中读取数据并将其显示在 JTable 上，但我遇到了一些问题。我是菜鸟，所以请多多包涵。我已经查看并合并了来自多个来源的示例代码，但无济于事。该表显示，但它是空白的。我知道我正在读取数据，因为我可以打印它。我怀疑我的 ModelTable 设置有问题。任何帮助将不胜感激。

```
package t1data;

import java.util.*;
import java.awt.event.*;
import javax.swing.*;
import java.awt.BorderLayout;
import java.awt.*;
import javax.swing.border.EmptyBorder;
import java.io.*;
import javax.swing.table.*;

public class T1Data extends JPanel implements ActionListener {

public T1Data() {
        super(new BorderLayout(3,3));

        JTable Table = new JTable(new MyModel());        
        Table.setPreferredScrollableViewportSize(new Dimension(700, 70));
        Table.setFillsViewportHeight(true);

        JPanel ButtonOpen = new JPanel( new FlowLayout(FlowLayout.CENTER) );

        JButton OpenFile = new JButton("Open");
        JButton SaveFile = new JButton("Save");

        ButtonOpen.add(OpenFile);
        add(ButtonOpen, BorderLayout.SOUTH);

        OpenFile.addActionListener(this);
        SaveFile.addActionListener(this);

        //Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(Table);

        //Add the scroll pane to this panel.
        add(scrollPane, BorderLayout.CENTER);

        // add a nice border
        setBorder(new EmptyBorder(5,5,5,5));

    }

public void actionPerformed (ActionEvent Event) {

        JFileChooser fc = new JFileChooser();
        boolean pressed = true;

//        if (Event.getSource() == OpenFile) {
        if (pressed) {
            int ReturnVal = fc.showOpenDialog(null);
//        if (ReturnVal == JFileChooser.APPROVE_OPTION) {
            CSVFile Rd = new CSVFile();
            //ArrayList<String[]> Rs2 = new ArrayList<>();
            MyModel NewModel = new MyModel();

            File DataFile = fc.getSelectedFile();
            ArrayList<String[]> Rs2 = Rd.ReadCSVfile(DataFile);

            NewModel.AddCSVData(Rs2);
            System.out.println ("Rows: " +NewModel.getRowCount());
            System.out.println ("Cols: " +NewModel.getColumnCount());
        }              
    }

// Method for reading CSV file        
public class CSVFile {
     private ArrayList<String[]> Rs = new ArrayList<>();
     private String[] OneRow;

        public ArrayList<String[]> ReadCSVfile (File DataFile) {
            try {
            BufferedReader brd = new BufferedReader (new FileReader(DataFile));

            while (brd.readLine() != null) {
            String st = brd.readLine();
            OneRow = st.split(",|\\s|;");
            Rs.add(OneRow);
            System.out.println (Arrays.toString(OneRow));
                } // end of while
            } // end of try
            catch (Exception e) {
                String errmsg = e.getMessage();
                System.out.println ("File not found:" +errmsg);
                } // end of Catch                   
        return Rs;
        }// end of ReadFile method
    }// end of CSVFile class

    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("T1Data");        
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Create and set up the content pane.
        T1Data newContentPane = new T1Data();
        frame.setContentPane(newContentPane);

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    class MyModel extends AbstractTableModel {
        private String[] columnNames = { "1", "2", "3", "4", "5", "6"};
        private ArrayList<String[]> Data =  new ArrayList<>();

        public void AddCSVData(ArrayList<String[]> DataIn) {
            this.Data = DataIn;
            this.fireTableDataChanged();
        }

        @Override
        public int getColumnCount() {
            return columnNames.length;//length;
        }
        @Override
        public int getRowCount() {
            return Data.size();
        }
        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }
        @Override
        public Object getValueAt(int row, int col)
        {
            return Data.get(row)[col];

        }      
    }

public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
//    T1Data.createAndShowGUI();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T23:35:29.707

（我使用了您的命名约定，但您应该阅读我上面关于变量和类的 Java 命名约定的评论）。

您创建一个表传递一个新`MyModel`的构造函数：

```
JTable Table = new JTable(new MyModel()); 
```

稍后您在以下位置创建一个（单独的）新`MyModel`的`actionPerformed()`：

```
MyModel NewModel = new MyModel();
File DataFile = fc.getSelectedFile();
ArrayList<String[]> Rs2 = Rd.ReadCSVfile(DataFile);
NewModel.AddCSVData(Rs2); 
```

*问题*是，你从不打电话`table.setModel(NewModel)`。

要解决此问题，请将表变量作为*字段*存储在您的`T1Data`类中，以便您以后可以引用它：

```
private final JTable table;

...

public T1Data() {
  super(new BorderLayout(3,3));

  this.table = new JTable(new MyModel());        
  this.table.setPreferredScrollableViewportSize(new Dimension(700, 70));
  this.table.setFillsViewportHeight(true); 
```

并将模型设置为`actionPerformed()`：

```
this.table.setModel(NewModel); 
```

# regex - 如何一次批量查找和替换多个文档中的多个文本

> ID：11353878
> 
> 赞同：0
> 
> 时间：2012-07-05T23:23:23.143
> 
> 标签：regex, batch-file, replace

我有 100 个 html 页面，其中包含要翻译的各种文本。我还在word文档上准备好翻译文本。所以我要做的是找到多个不同文本的块，并用多个翻译文本块替换它们。我通常使用具有良好查找/替换功能的 Dreamweaver，但它一次只能替换 1 块文本/代码。更具体地说，例如，假设我有 3 个句子（我个人有更多，例如要替换 1000 个不同的句子）：

英文文本 1、英文文本 2 和英文文本 3。

并希望将它们分别替换为：

西班牙文 TEXT1、西班牙文 TEXT2 和西班牙文 TEXT3。

我需要在 html 文档中的任何位置找到“英语文本块”，并一次将它们替换为“西班牙语文本块”，而无需重复数千次查找/替换过程。

我希望这个问题足够清楚。我需要一个免费的 MAC 实用程序或任何人来解释我如何在 Dreamweaver 或其他地方使用正则表达式来实现这一点（不幸的是，我对此一无所知）。

非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:26:00.443

我会使用[这个程序](http://search-and-replace.en.softonic.com/mac)。它很好用，您只需选择一个文件夹，然后搜索其中的所有内容。

# input - 如何在 Linux 上制作带有实时输入的 SIMPLE 终端游戏？

> ID：11353885
> 
> 赞同：2
> 
> 时间：2012-07-05T23:23:59.023
> 
> 标签：input

我正在寻找一些简单的代码，它将在给定时刻从键盘获取任何数据，并让我检查它是否有某些按钮按下。它使用什么语言并不重要。

我正在寻找一个控制台解决方案，没有 GUI。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T23:26:53.567

听起来您正在寻找[curses](https://en.wikipedia.org/wiki/Curses_%28programming_library%29)库（您可能还会发现一个实现为“ncurses”，它可能已经安装在您的系统上）。该库为您可能在 Linux 上看到的大多数“全屏”控制台程序提供支持。

# jquery - 使用 Tabs html css 和 jquery

> ID：11353888
> 
> 赞同：0
> 
> 时间：2012-07-05T23:24:04.373
> 
> 标签：jquery, html, css

我有这个代表选项卡式界面的 html 片段，我一直在寻找如何在单击时启用选项卡选择但没有用，我什至使用 javascript 手动对其进行了编程，它有效，但我相信这不是专业的方法它，必须有一些jquery解决方案。我在 html 代码片段下方发布

```
<div class="services">
    <div class="tabs">  

    <!--Top Tabs panel-->

    <ul class="ui-tabs-nav" id="services">
        <li class="ui-state-default ui-tabs-selected ui-state-active"><a href="#ui-tabs-currency"><span>العملات</span></a></li>
        <li class="ui-state-default"><a href="#ui-tabs-weather"><span>حالة الطفس</span></a></li>
    </ul>                                         

    <!--Bottom Tabs panel-->                        

    <div id="ui-tabs-currency" class="ui-tabs-panel ui-widget-content">
        <div class="pnl">
        sdfdsfsf
        </div>                                          
    </div>

    <div id="ui-tabs-weather" class="ui-tabs-panel ui-widget-content ui-tabs-hide">
        <div class="pnl">
        hhhhhhhhhhhhh
        </div>              
    </div>

    <div class="more"></div>                

    </div> <!-- End of tabs -->                
</div> <!-- End of services --> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:32:02.840

jQuery 是 JavaScript，没有“专业”的方式来做这件事。只有最适合需要的方法。如果你的方法有效，它就有效。如果您想了解如何改进它，请考虑在[Code Review](https://codereview.stackexchange.com/)上发布代码。

如果您想了解 jQuery 的执行方式，请查看jQuery [UI Tabs 。](http://jqueryui.com/demos/tabs/)虽然，从你的班级名称来看，你可能已经在使用这个......这让我想知道你想问什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:43:07.507

您可以使用`jQuery-ui`

**HTML**

```
<div class="services">
    <div class="tabs">
        <ul>
            <li><a href="#tabs-currency">العملات</a></li>
            <li><a href="#tabs-weather">حالة الطفس</a></li>
        </ul>

        <div id="tabs-currency"><p>sdfdsfsf</p></div>

        <div id="tabs-weather"><p>hhhhhhhhhhhhh</p></div>

    </div>
</div> 
```

**JS**

```
$(function() {
    $( ".tabs" ).tabs();
});​ 
```

[***在此处查看工作演示***](http://jsfiddle.net/tYz8K/)并[***在此处参考***](http://jqueryui.com/demos/tabs/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:31:36.693

如果您正在寻找 jQuery 解决方案，那么您应该使用[jQuery UI Tabs](http://jqueryui.com/demos/tabs/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-09T06:04:53.830

我假设您特别希望该代码能够正常工作？如果不是，这真的很好用。把你的桌子放在它说的地方（可能你想删除

现在有标签

```
<div id="selector">

</div>
<div class="tabs">
    <!-- Radio button and lable for #tab-content1 -->
    <input type="radio" name="tabs" id="tab1" checked >
    <label for="tab1">
       <i class="fa fa-rocket" aria-hidden="true"></i>
<span>Projects</span>
    </label>
    <!-- Radio button and lable for #tab-content2 -->
    <input type="radio" name="tabs" id="tab2">
    <label for="tab2">
        <i class="fa fa-users" aria-hidden="true"></i><span>Flash-Mobs</span>
    </label>
    <!-- Radio button and lable for #tab-content3 -->
    <input type="radio" name="tabs" id="tab3">
    <label for="tab3">
       <i class="fa fa-heartbeat" aria-hidden="true"></i><span>Movement</span>
    </label>
    <div id="tab-content1" class="tab-content">
        <h3>Positive Action Projects</h3>
        <p><!-- Tab content here --></p>
    </div> <!-- #tab-content1 -->
    <div id="tab-content2" class="tab-content">
        <h3>Internatonal Positive Action Days</h3>
        <p><!-- Tab content here --></p>
    </div> <!-- #tab-content2 -->
    <div id="tab-content3" class="tab-content">
     <h3>Grow the Movement</h3>
        <p><!-- Tab content here --></p>
    </div> <!-- #tab-content2 -->
    </div> 
```

CSS

```
 .tabs {
    max-width: 90%;
    float: none;
    list-style: none;
    padding: 0;
    margin: 75px auto;
    border-bottom: 4px solid #ccc;
}
.tabs:after {
    content: '';
    display: table;
    clear: both;
}
.tabs input[type=radio] {
    display:none;
}
.tabs label {
    display: block;
    float: left;
    width: 33.3333%;
    color: #ccc;
    font-size: 30px;
    font-weight: normal;
    text-decoration: none;
    text-align: center;
    line-height: 2;
    cursor: pointer;
    box-shadow: inset 0 4px #ccc;
    border-bottom: 4px solid #ccc;
    -webkit-transition: all 0.5s; /* Safari 3.1 to 6.0 */
    transition: all 0.5s;
}
.tabs label span {
    display: none;
}
.tabs label i {
    padding: 5px;
    margin-right: 0;
}
.tabs label:hover {
    color: #3498db;
    box-shadow: inset 0 4px #3498db;
    border-bottom: 4px solid #3498db;
}
.tab-content {
    display: none;
    width: 100%;
    float: left;
    padding: 15px;
    box-sizing: border-box;
    background-color:#ffffff;
}

.tab-content * {
    -webkit-animation: scale 0.7s ease-in-out;
    -moz-animation: scale 0.7s ease-in-out;
    animation: scale 0.7s ease-in-out;
}
@keyframes scale {
  0% {
    transform: scale(0.9);
    opacity: 0;
    }
  50% {
    transform: scale(1.01);
    opacity: 0.5;
    }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.tabs [id^="tab"]:checked + label {
    background: #FFF;
    box-shadow: inset 0 4px #3498db;
    border-bottom: 4px solid #3498db;
    color: #3498db;
}
#tab1:checked ~ #tab-content1,
#tab2:checked ~ #tab-content2,
#tab3:checked ~ #tab-content3 {
    display: block;
}

@media (min-width: 768px) {
    .tabs i {
        padding: 5px;
        margin-right: 10px;
    }
    .tabs label span {
        display: inline-block;
    }
    .tabs {
    max-width: 750px;
    margin: 50px auto;
    }
} 
```

# hibernate - Struts2+Hibernate项目如何分包？

> ID：11353896
> 
> 赞同：0
> 
> 时间：2012-07-05T23:24:52.210
> 
> 标签：hibernate, struts2

我是 Java EE 的新手，在实习中我需要与以下人员一起工作：

*   框架：Struts2、Hibernate；
*   应用服务器：Tomcat；
*   IDE：Eclipse；
*   数据库：甲骨文；

首先，有没有包含所有这些技术的不错的教程？

其次，将项目分成包的最佳方法是什么？在一个未解释的示例中，他们将资源分为以下包：dao、domain、mapping、web。但他们根本没有解释任何一个人的特点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:48:35.947

只需尝试这两个链接，它们都会让您清楚地了解如何集成 Struts2 和 hibernate。

[http://www.mkyong.com/struts2/struts-2-hibernate-integration-example/](http://www.mkyong.com/struts2/struts-2-hibernate-integration-example/)

[http://viralpatel.net/blogs/tutorial-struts2-hibernate-example-eclipse/](http://viralpatel.net/blogs/tutorial-struts2-hibernate-example-eclipse/)

DAO 基本上是与您的数据库表映射的数据访问对象，它只包含表的每一列的 gettter/setter。域是您在将数据发送到数据库之前或从数据库获取数据之后编写业务逻辑的地方。Web 是您保存 java 脚本、jsp、css 文件的地方......

希望这会有所帮助。

# python - 如何在 Gql（谷歌查询语言）中查询数据库类中的最后一个元素？

> ID：11353902
> 
> 赞同：-1
> 
> 时间：2012-07-05T23:25:37.030
> 
> 标签：python, google-app-engine, gql, gqlquery

我在 GAE 中有这个数据库：

```
class Contract(db.Model): # I renamed "Act" as "Contract"
    book_number = db.IntegerProperty(required = True)
    initial_page = db.IntegerProperty(required = True)
    final_page = db.IntegerProperty(required = True)
    date = db.DateProperty(auto_now_add=True) 
```

我想查询这个数据库来选择这个数据库中最后添加的元素的 book_number、initial_page 和 final_page 的值，将每个值放在一个变量中。在 MySQL 中，我会这样做：

```
SELECT MAX(book_number) AS Last FROM Contracts; 
```

但是我如何在 GAE（GglQuery）中做到这一点？在哪里可以找到Gql 中的**所有命令？**（我没有在[这里](http://en.wikipedia.org/wiki/Google_App_Engine)或[这里](https://developers.google.com/appengine/docs/python/gettingstarted/usingdatastore)找到它）

我正在使用 Python 2.7 GAE。

这是我的整个代码：

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import os

import webapp2

import jinja2

jinja_environment = jinja2.Environment(autoescape=True,
    loader=jinja2.FileSystemLoader(os.path.join(os.path.dirname(__file__), 'templates')))

import re

from google.appengine.ext import db

USER_RE = re.compile(r"^[a-zA-Z0-9_ -]{3,20}$")
def valid_person(person):
    return USER_RE.match(person)

PASS_RE = re.compile(r"^.{3,20}$")
def valid_SSN(SSN):
    return PASS_RE.match(SSN)

EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
def valid_email(email):
    return EMAIL_RE.match(email)

import time

import datetime

##def getNumBookPg():
##    doc = open("numbookpg.txt")
##    numBookPg = []
##    numbers = doc.read().split()
##    for n in numbers:
##        numBookPg.append(n)
##    return numBookPg
##
##numBookPage = getNumBookPg()

##def updateNumBookPg(b, fp):
##    newNumBookPg = b + ' ' + str(int(fp) + 1) + ' ' + str(int(fp) + 1)
##    doc = open("numbookpg.txt", "w")
##    doc.write(newNumBookPg)

def dateToday():
    today = datetime.datetime.today()
    todayDay = str(today.day)
    todayMonth = str(today.month)
    monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
    todayYear = str(today.year)
    return(todayDay + ' of  ' + monthExt[todayMonth] + ' of ' + todayYear)

class MainHandler(webapp2.RequestHandler):
    def get(self):
        q = db.GqlQuery("SELECT * FROM Contract ORDER BY date DESC")
        contract = q.get() # return only the first entity
        numBook = contract.book_number
        numInitialPage = contract.initial_page
        numFinalPage = contract.final_page
        template_values = {"person": "",
                                       "nacionality": "",
                                       "SSN": "",
                                       "driverLicense": "",
                                       "email":"",
                                       "person_error": "",
                                       "SSN_error": "",
                                       "driverLicense_error": "",
                                       "address": "",
                                       "email_error": "",
                                       "numBook": numBook,
                                       "numInitialPage": numInitialPage,
                                       "numFinalPage": numFinalPage,
                                       }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(template.render(template_values))

##    def write_form(self, text_write):
##        self.response.out.write(text_write)

    def post(self):
        person_name = self.request.get("person")
        user_nacionality = self.request.get('nacionality')
        user_profession = self.request.get('profession')
        user_maritalStatus = self.request.get('maritalStatus')
        user_SSN = self.request.get('SSN')
        user_email = self.request.get('email')
        user_driverLicense = self.request.get('driverLicense')
        person_error = ""
        SSN_error = ""
        driverLicense_error = ""
        geted_email_error = ""
        address = self.request.get('address')
        contractType = self.request.get("contractType")
        owner = self.request.get("owner")
        witness = self.request.get("witness")
        numBook = self.request.get("numBook")
        numInitialPage = self.request.get("numInitialPage")
        numFinalPage = self.request.get("numFinalPage")

        if (person_name and valid_person(person_name)) and (user_SSN and valid_SSN(user_SSN)) and ((not user_email) or (user_email and valid_email(user_email))):
            a = Person(firstName = person_name,
                                   nacionality = user_nacionality,
                                   maritalStatus = user_maritalStatus,
                                   profession = user_profession,
                                   SSN = int(user_SSN),
                                   driverLicense = int(user_driverLicense)
                                   #address = user_address
                                   )
            a.put()
            self.redirect('/your_contract?person=%s&nacionality=%s&profession=%s&maritalStatus=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s&contractType=%s&address=%s&numBook=%s&numInitialPage=%s&numFinalPage=%s' % (person_name, user_nacionality, user_profession, user_maritalStatus, user_SSN, user_driverLicense, user_email,
witness, owner, contractType, address, numBook, numInitialPage, numFinalPage))

        else:
            if not person_name or not valid_person(person_name):
                person_error = "Oh no!!! this person name isn't valid!"
            if not user_SSN or not valid_SSN(user_SSN):
                SSN_error = "Oh no!!! SSN isn't valid!"
            if user_email and not valid_email(user_email):
                geted_email_error = "Oh no!!! e-mail isn't valid!"
            template_values = {"person": person_name,
                                "nacionality": user_nacionality,
                                "maritalStatus": user_maritalStatus,
                                "profession": user_profession,
                                "SSN": user_SSN,
                                "driverLicense": user_driverLicense,
                                "email": user_email,
                                "person_error": person_error,
                                "SSN_error": SSN_error,
                                "driverLicense_error": user_driverLicense,
                                "address": address,
                                "email_error": geted_email_error}
            template = jinja_environment.get_template('index.html')
            self.response.out.write(template.render(template_values))

class your_contractHandler(webapp2.RequestHandler):
    def get(self):
        geted_person_name = self.request.get('person')
        geted_user_nacionality = self.request.get("nacionality")
        geted_user_profession = self.request.get("profession")
        geted_user_maritalStatus = self.request.get("maritalStatus")
        geted_user_SSN = self.request.get('SSN')
        geted_user_email = self.request.get('email')
        geted_user_driverLicense = self.request.get('driverLicense')
        geted_person_error = ""
        geted_SSN_error = ""
        geted_driverLicense_error = ""
        geted_address = self.request.get('address')
        geted_owner = self.request.get("owner")
        geted_witness = self.request.get("witness")
        geted_contractType = self.request.get("contractType")
        geted_dateToday = dateToday()
        your_contract = jinja_environment.get_template('your_contract.html')
        geted_numBook = self.request.get('numBook')
        geted_numInitialPage = self.request.get('numInitialPage')
        geted_numFinalPage = self.request.get('numFinalPage')

        contract = Contract(book_number = geted_numBook, initial_page = geted_numInitialPage, final_page = geted_numFinalPage)
        contract.put()

        your_contract_values = {"person":geted_person_name,
                                "nacionality":geted_user_nacionality,
                                "maritalStatus": geted_user_maritalStatus,
                                "profession": geted_user_profession,
                                "SSN":geted_user_SSN,
                                "driverLicense":geted_user_driverLicense,
                                "address":geted_address,
                                "email":geted_user_email,
                                "contractType":geted_contractType,
                                "dateContract":geted_dateToday,
                                "numBook":geted_numBook,
                                "numInitialPage":geted_numInitialPage,
                                "numFinalPage":geted_numInitialPage,
                                }
        template = jinja_environment.get_template('index.html')
        self.response.out.write(your_contract.render(your_contract_values))

class Person(db.Model):
    firstName = db.StringProperty(required = True)
#    lastName = db.StringProperty(required = True)
    nacionality = db.StringProperty(required = True)
    maritalStatus = db.StringProperty(required = True)
    profession = db.StringProperty(required = True)
    SSN = db.IntegerProperty(required = True)
    driverLicense = db.IntegerProperty(required = True)
#    address = db.PostalAdressProperty(required = True)
#    condition = db.StringProperty(required = False, choices=set(["buyer", "seller", "renter", "owner", "witness"]))

class Contract(db.Model):
    book_number = db.IntegerProperty(required = True)
    initial_page = db.IntegerProperty(required = True)
    final_page = db.IntegerProperty(required = True)
    date = db.DateTimeProperty(auto_now_add=True)
#    firstPart = db.StringProperty(required = True)
#   secondPart = db.StringProperty(required = True)
#    contractDraft = db.TextProperty(required = True)

app = webapp2.WSGIApplication([('/', MainHandler), ('/your_contract', your_contractHandler)],
                              debug=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:51:25.890

gql 参考在[这里](https://developers.google.com/appengine/docs/python/datastore/gqlreference)，查询文档[在这里](https://developers.google.com/appengine/docs/python/datastore/queries)

试试这个：

```
q = db.GqlQuery("SELECT * FROM Act ORDER BY date DESC")
act = q.get() # return only the first entity
a = act.book_number
b = act.initial_page
c = act.final_page 
```

# mysql - MySQL 使用我服务器的半个核心

> ID：11353908
> 
> 赞同：1
> 
> 时间：2012-07-05T23:26:05.043
> 
> 标签：mysql, cpu, gentoo

我在 64 位 Gentoo Box 上运行 MySQL 5.1.62。

这个 MySQL 负载很重，但问题是它只使用了服务器的一半内核：

> CPU0：84.0%us，13.0%sy，0.0%ni，0.0%id，0.0%wa，0.0%hi，3.0%si，0.0%st
> 
> CPU1：62.4%us，34.7%sy，0.0%ni，3.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
> 
> CPU2：68.3%us，26.7%sy，0.0%ni，5.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
> 
> CPU3：72.3%us，3.0%sy，0.0%ni，22.8%id，2.0%wa，0.0%hi，0.0%si，0.0%st
> 
> CPU4：0.0%us，0.0%sy，0.0%ni，100.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
> 
> CPU5：0.0%us，0.0%sy，0.0%ni，100.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
> 
> CPU6：0.0%us，0.0%sy，0.0%ni，0.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st
> 
> CPU7：0.0%us，0.0%sy，0.0%ni，0.0%id，0.0%wa，0.0%hi，0.0%si，0.0%st

这是一个双四核服务器，具有：Intel(R) Xeon(R) CPU E5606 @ 2.13GHz

知道如何使用所有内核吗？

谢谢你的帮助;

盖坦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:31:28.163

主意？是的，但你不会喜欢它。

许多内核不会自动使系统更快：它运行的工作负载需要易于并行化。

我怀疑在您的情况下发生的是，您正在运行少量并发查询，每个查询都是 CPU 密集型的。碰巧的是，每个都只会使用一个核心。

要检查这是否是罪魁祸首，请手动启动 8 个并发的 CPU 密集型查询 - 您的 CPU 应该被充分使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:50:54.257

较新版本的 MySQL 或[Percona](http://www.percona.com/software/percona-server/)增强型 MySQL 服务器可能会更好地利用您的内核。不过，数据库服务器受 IO 限制是相当普遍的。

# c# - Linq 查询运行参数列表

> ID：11353909
> 
> 赞同：0
> 
> 时间：2012-07-05T23:26:08.133
> 
> 标签：c#, .net, linq

我需要创建一个 linq 查询，该查询从某个功能结果为真的数据库表中选择数据。

我正在使用`linq-to-sql`并且该功能运行良好，我可以编写一个基本查询来获取数据。

我的问题是我有一个内存中的参数列表，我基本上需要多次运行 linq 查询（每个参数列表项一次）并聚合结果。

我曾尝试将其`.Any()`用作连接，但 linq 不喜欢将非数据库结果集与数据库结果集连接起来。

一些示例代码：

```
Parameter list: // lets call it "l"
{    
 One,
 Two,
 Three
} 
```

询问

```
From w in words where funcWord(l.item) == true select w; 
```

所以我需要一个查询，它可以为 l 中的每个项目运行一次上述查询并聚合结果。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:37:42.593

多个`from`语句将通过每个组合，有点像嵌套`foreach`语句：

```
from item in list
from w in words
where funcWord(item, w.name) == true
select w; 
```

有趣的是，这被翻译成`SelectMany`类似于 Arithmomaniac 的答案的陈述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T05:20:13.943

尝试[SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)，它聚合了应用于每个成员的一对多函数的结果。

在这种情况下，成员是 的元素`list`，一对多函数是你上面的`l`依赖查询（尽管我将它重写为 lambda 函数。）

`list.SelectMany(l => words.Where(w => funcWord(l.item, w.name)));`

# java - 扩展 Hadoop 的 TableInputFormat 以使用用于分发时间戳键的前缀进行扫描

> ID：11353911
> 
> 赞同：2
> 
> 时间：2012-07-05T23:26:25.387
> 
> 标签：java, hadoop, hbase

我有一个 hbase 表，其键是带有一个字节随机前缀的时间戳，用于分发键，因此扫描不会成为热点。我正在尝试扩展`TableInputFormat`，以便可以在具有范围的表上运行单个 MapReduce，为所有 256 个可能的前缀添加前缀，以便扫描具有指定时间戳范围的所有范围。我的解决方案不起作用，因为它似乎总是扫描最后一个前缀 (127) 256 次。必须在所有扫描中共享某些内容。

我的代码如下。有任何想法吗？

```
public class PrefixedTableInputFormat extends TableInputFormat {

  @Override
  public List<InputSplit> getSplits(JobContext context)
    throws IOException {
    List<InputSplit> splits = new ArrayList<InputSplit>();
    Scan scan = getScan();
    byte startRow[] = scan.getStartRow(), stopRow[] = scan.getStopRow();
    byte prefixedStartRow[] = new byte[startRow.length+1];
    byte prefixedStopRow[] = new byte[stopRow.length+1];
    System.arraycopy(startRow, 0, prefixedStartRow, 1, startRow.length);
    System.arraycopy(stopRow, 0, prefixedStopRow, 1, stopRow.length);

    for (int prefix = -128; prefix < 128; prefix++) {
      prefixedStartRow[0] = (byte) prefix;
      prefixedStopRow[0] = (byte) prefix;
      scan.setStartRow(prefixedStartRow);
      scan.setStopRow(prefixedStopRow);
      setScan(scan);
      splits.addAll(super.getSplits(context));
    }

    return splits;
  }
} 
```

和

```
 Configuration config = HBaseConfiguration.create();
  Job job = new Job(config, "Aggregate");
  job.setJarByClass(Aggregate.class);

  Scan scan = new Scan();
  scan.setStartRow("20120630".getBytes());
  scan.setStopRow("20120701".getBytes());
  scan.setCaching(500);
  scan.setCacheBlocks(false);

  TableMapReduceUtil.initTableMapperJob(
      "event",
      scan,
      Mapper.class,
      ImmutableBytesWritable.class,
      ImmutableBytesWritable.class,
      job,
      true,
      PrefixedTableInputFormat.class);
  TableMapReduceUtil.initTableReducerJob("event", Reducer.class, job); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T23:49:43.920

您将需要在每次迭代中制作拆分的深层副本：

```
for (int prefix = -128; prefix < 128; prefix++) {
  prefixedStartRow[0] = (byte) prefix;
  prefixedStopRow[0] = (byte) prefix;
  scan.setStartRow(prefixedStartRow);
  scan.setStopRow(prefixedStopRow);
  setScan(scan);

  for (InputSplit subSplit : super.getSplits(context)) {
    splits.add((InputSplit) ReflectionUtils.copy(conf,
          (TableSplit) subSplit, new TableSplit());
  }
} 
```

# objective-c - 我将如何实现一个动画消失的启动画面？

> ID：11353914
> 
> 赞同：0
> 
> 时间：2012-07-05T23:26:59.990
> 
> 标签：objective-c, animation, storyboard, splash-screen

这是我到目前为止所拥有的：

```
@synthesize window = _window;
@synthesize tabBarController = _tabBarController;

-(void)animate
{
    [UIView animateWithDuration:1 animations:^{
        splashImage.frame = CGRectMake(0,480,320,480);
    }];
    [UIView commitAnimations];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    splashImage = [[UIImageView alloc] initWithImage:[UIImage
                                                      imageNamed:@"carolinaWolf.png"]];
    splashImage.frame = CGRectMake(0, 0, 320, 480);
    [self.tabBarController.view addSubview:splashImage];
    [self animate];
    return YES;
} 
```

我在情节提要中的初始视图是 TabBarController。我想要发生的是：在我将新内容加载到应用程序后，我想启动屏幕以在屏幕上向下和关闭动画。这在我开始使用情节提要之前有效，为什么现在不起作用？

我的 AppDelegate.h 看起来像这样：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UITabBarController *tabBarController;
@end
UIImageView *splashImage; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T03:07:33.913

您可以像这样直接添加您`splashImage`的`self.window.rootViewController`：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    UIImage *splashImage = [UIImage autoAdjustImageNamed:@"Default.png"];
    UIImageView *splashImageView = [[UIImageView alloc] initWithImage:splashImage];
    [self.window.rootViewController.view addSubview:splashImageView];
    [self.window.rootViewController.view bringSubviewToFront:splashImageView];
    [UIView animateWithDuration:1.5f
                          delay:2.0f
                        options:UIViewAnimationOptionCurveEaseInOut
                     animations:^{
                         splashImageView.alpha = .0f;
                         CGFloat x = -60.0f;
                         CGFloat y = -120.0f;
                         splashImageView.frame = CGRectMake(x,
                                                            y,
                                                            splashImageView.frame.size.width-2*x,
                                                            splashImageView.frame.size.height-2*y);
                     } completion:^(BOOL finished){
                         if (finished) {
                             [splashImageView removeFromSuperview];
                         }
                     }];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T02:06:45.893

这就是我淡出启动画面的方式：

## #pragma mark Fading Default.png 动画

```
@interface FadeDefault : UIViewController
@end
@implementation FadeDefault

- (void)viewDidLoad 
{
    [super viewDidLoad];

    UIImageView *fader = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default@2x.png"]];
    [fader setFrame:CGRectMake(0,0,320,480)];

    /*if ( IDIOM == IPAD ) /* Optional */
    {
        fader = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default-Portrait~ipad.png"]];  
        [fader setFrame:CGRectMake(0,0,768,1024)];
    }else
      {
        fader = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default@2x.png"]];
        [fader setFrame:CGRectMake(0,0,320,480)];
    }*/
    self.view = fader;
    [fader release];

    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:2.0];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDidStopSelector:@selector(imageDidFadeOut:finished:context:)];
    self.view.alpha = 0.0;
    [UIView commitAnimations];
}
- (void)imageDidFadeOut:(NSString *)animationID finished:(NSNumber *)finished context:(void *)context{
    [self.view removeFromSuperview];
}
@end 
```

## #pragma mark - 应用程序生命周期

请记住，这是一个示例，尽管我实际使用的代码并且我知道有效，但您需要保留其他`didFinishLaunchingWithOptions`代码。只需将`fader`代码添加到现有代码中即可。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    /*  custom fading Default.png animation  */
    FadeDefault * fader = [[FadeDefault alloc] init];

    [window addSubview:navigationController.view];

    [window addSubview:fader.view];
    [fader release];

    [window makeKeyAndVisible];

    return YES;
} 
```

# css - CSS 悬停效果在我不想要的时候仍然存在

> ID：11353916
> 
> 赞同：0
> 
> 时间：2012-07-05T23:27:15.487
> 
> 标签：css, hover

我有一个 div 样式为一个带有图像的圆圈，其中一些文本居中。如果不悬停，则在文本透明时显示圆圈和图像。悬停时，圆形边框开始闪烁（webkit 动画），图像的不透明度降低，文本变得可见。

在 Firefox 中编写/测试此代码时，一切正常，但在 Chrome 上，悬停效果的变化仍然存在，我不希望它们（即图像不透明度保持降低，文本保持可见。继续但是，将鼠标悬停在 div 上会使边框按预期闪烁。

我有所有正确的 webkit/moz/ms/o 过渡和动画，但我似乎无法弄清楚出了什么问题（或者这只是使用 Chrome 的缺陷之一）。

我的 div 及其所有元素的代码是：

```
<div class='players'>
    <div class='row'>
        <div class='span6'>
            <div class='matchup'>
                <p class='team'>SOMETEAMNAME</p>
                <p class='name'>SOMENAME</p>
                <img src='SOMEIMAGE'>
            </div>
        </div>
    </div>
</div> 
```

我的 CSS 代码：

```
.matchup {
    width: 250px;
    height: 250px;
    background: transparent;
    border: 1px solid #ff6600;
    border-radius: 125px;
    display: block;
    margin-left: auto;
    margin-right: auto;

    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    -ms-box-sizing: border-box;
    -o-box-sizing: border-box;
    box-sizing: border-box;

    -webkit-transition: 0.5s ease;
    -moz-transition: 0.5s ease;
    -ms-transition: 0.5s ease;
    -o-transition: 0.5s ease;
    transition: 0.5s ease;
}
.matchup img {  
    position: static;
    margin-top: -22%;
    opacity: 1;

    -webkit-transition: 0.5s ease;
    -moz-transition: 0.5s ease;
    -ms-transition: 0.5s ease;
    -o-transition: 0.5s ease;
    transition: 0.5s ease;
}
.matchup p {
    font-family: 'Lobster', cursive;
    position: relative;
    text-align: center;
    top: 50%;
    color: transparent; 

    -webkit-transition: 0.5s ease;
    -moz-transition: 0.5s ease;
    -ms-transition: 0.5s ease;
    -o-transition: 0.5s ease;
    transition: 0.5s ease;
}
.team {
    font-size: 25px;
}
.name {
    font-size: 45px;
}
.map {
    font-size: 15px;
    margin-top: -70%;
}
.matchup:hover {
    -webkit-animation: matchup-active 1s infinite;
    -moz-animation: matchup-active 1s infinite;
    -ms-animation: matchup-active 1s infinite;
    -o-animation: matchup-active 1s infinite;
    animation: matchup-active 1s infinite;

    p {
        color: #ff6600;
    }
    img {
        opacity: 0.2;
    }
}

@-webkit-keyframes matchup-active {
    0% {
        border: 1px solid #ff6600;
    }
    50% {
        border: 1px solid transparent;
    }
    100% {
        border: 1px solid #ff6600;
    }
}
@-moz-keyframes matchup-active {
    0% {
        border: 1px solid #ff6600;
    }
    50% {
        border: 1px solid transparent;
    }
    100% {
        border: 1px solid #ff6600;
    }
}
@-o-keyframes matchup-active {
    0% {
        border: 1px solid #ff6600;
    }
    50% {
        border: 1px solid transparent;
    }
    100% {
        border: 1px solid #ff6600;
    }
}
@keyframes matchup-active {
    0% {
        border: 1px solid #ff6600;
    }
    50% {
        border: 1px solid transparent;
    }
    100% {
        border: 1px solid #ff6600;
    }
} 
```

**编辑：** 用 jsfiddle 更新：http: [//jsfiddle.net/sicophrenic/qvJ94/](http://jsfiddle.net/sicophrenic/qvJ94/) 它的样式不完美（即图像和东西没有居中），但我遇到的问题出现了（在 Chrome 中并且在火狐）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:56:54.037

`.matchup`添加时`color:transparent;`

`.matchup:hover`添加时`color: #ff6600;`

`.matchup p`添加时`color: inherit;`

因为`.matchup:hover p`不是有效的选择器。

[这是一个小提琴](http://jsfiddle.net/qvJ94/1/)

# javascript - 如何在javascript中定义属性子类

> ID：11353926
> 
> 赞同：1
> 
> 时间：2012-07-05T23:28:32.517
> 
> 标签：javascript, oop, class, inheritance, object

我是 Javascript 新手，在找到正确的解决方案时遇到了一些麻烦。在定义具有属性的新子类时，这样做的正确/最佳实践是什么？我从 MDN 中提取了下面的代码，但它没有讨论如何通过继承传递属性。我需要的是一个超类和子类，它们具有在实例化期间定义的属性。超类的属性需要对所有子类可用，而子类的属性将只属于子类。有人可以指出我正确的方向吗？

```
// define the Person Class  
function Person() {}  

Person.prototype.walk = function(){  
  alert ('I am walking!');  
};  
Person.prototype.sayHello = function(){  
  alert ('hello');  
};  

// define the Student class  
function Student() {  
  // Call the parent constructor  
  Person.call(this);  
}  

// inherit Person  
Student.prototype = new Person();  

// correct the constructor pointer because it points to Person  
Student.prototype.constructor = Student;  

// replace the sayHello method  
Student.prototype.sayHello = function(){  
  alert('hi, I am a student');  
}  

// add sayGoodBye method  
Student.prototype.sayGoodBye = function(){  
   alert('goodBye');
}  

var student1 = new Student();  
student1.sayHello();  
student1.walk();  
student1.sayGoodBye();  

// check inheritance  
alert(student1 instanceof Person); // true   
alert(student1 instanceof Student); // true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:31:02.750

可以使用`this`关键字访问实例变量。您可以并且应该在构造函数中初始化实例变量：

```
function Person(name) {
    this.name = name;
}

var bob = new Person("Bob");
alert(bob.name); 
```

[jsFiddle](http://jsfiddle.net/cXLpG/)

当您创建子类时，超类的实例变量将自动可供子类使用。

# asp.net - 连接 3 个字段的RequiredFieldValidator？

> ID：11353933
> 
> 赞同：0
> 
> 时间：2012-07-05T23:30:13.207
> 
> 标签：asp.net, vb.net, requiredfieldvalidator

我是RequiredFieldValidator 的新手。我想连接三个文本框，然后验证那里总共有 10 个数字。RequiredFieldValidator 是否内置了此功能？(vb.net) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:46:26.203

`RequiredFieldValidator`仅适用于一个控件（使其成为必需）。您需要使用 a`CustomValidator`来满足您的需求。

下面是一个有用的链接：[检查 3 个文本框是否为空的最佳方法](https://stackoverflow.com/questions/9380669/best-way-to-check-if-3-textboxes-are-empty)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:52:26.800

您可以使用 CustomValidator 以更简单的方式实现这一点

```
<asp:CustomValidator
    ID="CustomValidator1"
    runat="server"
    ErrorMessage="You must fill at textbox"
    OnServerValidate="Total_ServerValidate" />

protected void Total_ServerValidate(object source, ServerValidateEventArgs args)
{
//Codehere ..........
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T01:11:50.180

您可以在这种情况下使用自定义验证器控件。例如：

```
<b>A: </b><asp:TextBox id="A" runat="server"><br />
<b>B: </b><asp:TextBox id="B" runat="server">
<b>C: </b><asp:TextBox id="C" runat="server">
<asp:Button id="Submit" Text="Submit" /><br />

<asp:CustomValidator id="AtLeastTen" runat="server"  
  ErrorMessage="10 length required" 
  Display="Dynamic"
  OnServerValidate="AtLeastTenNumbers_ServerValidate" 
   /> 
```

然后在后面的代码上：

```
Sub AtLeastTenNumbers_ServerValidate(ByVal source As Object, _
  ByVal args As System.Web.UI.WebControls.ServerValidateEventArgs) 

    If A.Text.Length + B.Text.Length + C.Text.Length > 10 Then
        args.IsValid = true 
    Else
        args.IsValid = false 
    End If 
End Sub 
```

另请注意，您可能需要代码来检查它们是否确实是数字。上面的代码只是检查长度并假设它们已经是数字。

看看自定义验证器：

*   [http://www.codeproject.com/Articles/9522/CustomValidator-dependent-on-multiple-controls](http://www.codeproject.com/Articles/9522/CustomValidator-dependent-on-multiple-controls)

# python - 在 Windows 中使用字符串文件名

> ID：11353934
> 
> 赞同：0
> 
> 时间：2012-07-05T23:30:14.813
> 
> 标签：python, windows, wkhtmltopdf

我有这行在 linux 上运行良好：

```
input_file = '%s/my_input.html' % settings.FILE_PATH
args =['wkhtmltopdf', input_file, '-']
popen = Popen(args, stdout=PIPE, stderr=PIPE) 
```

`wkhtmltopdf`在 Windows 中不能在 linux 上我完全没有问题。我认为这是与斜杠/反斜杠相关的问题，但不知道如何解决。已经尝试使用反斜杠和双反斜杠。

有什么建议么？

所有这些变体中的相同错误：

```
"C:\\tmp\\input.html"

"C:\tmp\input.html"

os.path.join("C:\\tmp", "input.html")

'%s%sinput.html' % ('C:\\tmp', os.path.sep) 
```

> /admin/salidas/pdf/ 处的 WindowsError [错误 2] El sistema no puede hallar el archivo especificado

这意味着系统找不到指定的文件。

在 Popen 线上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:37:10.250

不要将文件路径视为简单的字符串，而是使用 python 库类将它们作为路径进行操作。在这种情况下[os.path.join](http://docs.python.org/library/os.path.html)

```
input_file = os.path.join( settings.FILE_PATH, my_input.html) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:34:16.947

一般来说，在处理路径时尝试使用原始字符串.. 即，`r`在路径名之前添加一个。例如，

```
my_path = 'c:\test\bob` 
```

更好的

```
my_path = r'c:\test\bob` 
```

因为它将防止路径规范中的`\t`and`\b`被解释为违背您的兴趣。

此外，查看[os.path](http://docs.python.org/library/os.path.html)模块及其操作系统特定的功能/信息，了解在给定操作系统上使用了哪些路径分隔符 ( [os.sep )，以及](http://docs.python.org/library/os.html?highlight=os.sep#os.sep)[join()](http://docs.python.org/library/os.path.html?highlight=join#os.path.join) 函数等 - 这比直接使用字符串来指定更好/操纵路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:48:26.527

使用`os.path.sep`，它返回依赖于**操作系统**的路径分隔符（`\\`在 windows 和`/`linux 上）

```
>>> import os
>>> FILE_PATH='somepath'
>>> input_file='%s%smy_input.html' % (FILE_PATH,os.path.sep)
>>> input_file
'somepath\\my_input.html'   #on windows on linux it returns 'somepath/my_input.html' 
```

# java - jarsigner 在退出 android 应用程序时返回 java.lang.NullPointerException 错误

> ID：11353936
> 
> 赞同：1
> 
> 时间：2012-07-05T23:30:26.447
> 
> 标签：java, android, robotium, jarsigner

我想在我正在编写的脚本中获得与 re-sign.jar 相同的功能（一个简单的应用程序，允许您重新签署 android 应用程序以进行测试和调试）。

为此，我遵循以下说明：

```
Un-­‐zip the apk file
­Delete the META-­‐INF folder
Re-­‐zip the apk file
In Dos prompt /Command prompt
> jarsigner -keystore ~/.android/debug.keystore -storepass android -keypass android ApplicationToTest.apk androiddebugkey
> zipalign 4 ApplicationToTest.apk TempApplicationToTest.apk

Then rename TempApplicationToTest.apk to ApplicationToTest.apk 
```

杀死我的是当我到达“jarsigner”部分时，我得到了错误

```
jarsigner error: java.lang.NullPointerException 
```

我可以很好地运行 re-signer.jar，所以我认为我没有遗漏任何东西，并且我拥有启动的所有权限。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T21:33:40.133

嗯...想通了。当我压缩文件时，它会将文件的内容放在一个目录下。它返回 null 因为它找不到应用程序文件（清单等）。我觉得很笨。

# php - 显示投票结果代替投票区域

> ID：11353938
> 
> 赞同：1
> 
> 时间：2012-07-05T23:30:38.230
> 
> 标签：php, javascript, jquery, ajax

我试图在与投票问题相同的区域和页面中显示投票结果，而无需重新加载整个页面。我能够获得结果并在新页面中显示它们，但我不知道如何在我有问题的地方替换 html 并将其替换为带有结果的 html。

**HTML**（带有投票问题）

```
<div id="poll-area">
    <!-- Voting poll -->
    <fieldset>
        <form action="javascript:void(0);" id="pollid" name="myform" method="POST">
            <label><input type="radio" name="answer" value="left" id="option_left" />Yes</label>
            <label><input type="radio" name="answer" value="right" id="option_right" />No</label>
            <input type="submit" name="submit" id="submit" value="Vote" />
            <input type="hidden" name="id" value="pollid" />
        </form>
    </fieldset>
    <!-- End voting poll -->
</div> 
```

**处理投票的AJAX**调用：

```
var $j = jQuery.noConflict();
jQuery(document).ready(function($j) {
    $j("form").submit(function(){
        var str = $j(this).serialize();
        $j.ajax({
            url: "poll_vote.php",
            type: "POST",
            data: str,
            cache: false,

            success: function(result) {
                window.location.replace("poll_results.php");
            }
        });
        return false;
    });
}); 
```

我猜我想用 poll_results.php 中的 #poll-area 替换 #poll-area 中的 HTML 而不是 *window.location.replace("poll_results.php")*，但我确实这样做了不知道怎么做。

**投票结果的**HTML （包含在 poll_results.php 中）****

 **```
<div id="poll-area">
   <fieldset>
       <legend>Results</legend>
       <ul>
           <li>
               <span class="total-votes">Yes</span>
               <br />
               <div class="results-bar" style="width:52%;">
                 52%
               </div>
           </li>
           <li>
               <span class="total-votes">No</span>
               <div class="results-bar right-bar" style="width:48%;">
                 48%
               </div>
           </li>
           <li>
       </ul>
       <p>Total votes: 100</p>
   </fieldset>
</div> 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:38:30.797

最简单但不是最干净的：使用 innerhtml 和 getElementById()

你会得到类似的东西：

```
var div = getElementById('poll-area'); //The poll itself
div.innerHtml = getElementbyId('answers'); //The answers 
```

请注意，我使用“答案”作为 ID，因为您对答案和投票使用相同的 ID。所以你会得到一个不起作用的嵌套。为您的第一个孩子的 answers () 提供一个名为“answers”的新 ID。

如果您更了解 javascript，请使用 createElement 添加新元素。这将提高速度并且更好，但更先进一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T23:47:09.260

在**poll_results.php**的输出中，您可以删除 ID 为“poll-area”的外部 div。当它被拉入当前页面时，您不希望重复 ID。

对于您的 jQuery，这应该可以解决问题：

```
success: function(result) {
    $j("#poll-area").html(result); 
```

据我所知，当前在 poll-area div 中退出的任何内容都将被 ajax 查询的结果覆盖。（投票选项应该会消失，并且会显示结果）

*编辑（评论摘要）：* `poll_vote.php`应该输出其中包含的 HTML`poll_results.php`**

# ipad - 如何在 iPad 上验证单选按钮、选择和复选框

> ID：11353942
> 
> 赞同：0
> 
> 时间：2012-07-05T23:30:56.650
> 
> 标签：ipad, validation, jquery-mobile, jquery-validate

JSFiddle 演示问题... [http://jsfiddle.net/9Lzj6/2/](http://jsfiddle.net/9Lzj6/2/)

我正在使用 jQuery 验证插件[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation) && [https://github.com/jzaefferer/jquery-validation](https://github.com/jzaefferer/jquery-validation)来验证表单。

**JS**

```
<script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>
<script type="text/javascript">
    $("#patient_info_form").validate({
        rules: {
            "data[gender]": {required :true},
            "data[dob_month]": "required",
            "data[dob_day]": "required",
            "data[dob_year]": "required"
        }
    });
</script> 
```

**HTML**

```
<form id="patient_info_form" name="patient_info_form" action="..." method="post">

    <select name="data[dob_month]" id="data[dob_month]" required="required">
        <option value="" selected="selected"></option>
        <option value="1">January</option>
        <option value="2">February</option>
        <option value="3">March</option>
    </select>

    <select name="data[dob_day]" id="data[dob_day]" required="required">
        <option value="" selected="selected"></option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
    </select>

    <select name="data[dob_year]" id="data[dob_year]" required="required">
        <option value="" selected="selected"></option>
        <option value="2012">2012</option>
        <option value="2011">2011</option>
        <option value="2010">2010</option>
        <option value="2009">2009</option>
    </select>

    <label for="gender_male" class="button_gender male">
        <input type="radio" name="data[gender]" value="male" id="gender_male" required="required">
    </label>
    <label for="gender_female" class="button_gender female">
        <input type="radio" name="data[gender]" value="female" id="gender_female" required="required">
    </label>

</form> 
```

**iPad问题**

它在标准浏览器中完美运行（在 Chrome 中测试），但在 iPad 上根本无法运行。我对 iPad 编程是 100% 的新手，而且（对我来说很不幸）这个网站*只能*通过 iPad 访问。

我还需要对 jQuery Validation Plugin 做些什么才能让它在 iPad 上工作吗？我也尝试了 jQuery Mobile，但没有运气，但我愿意在指导下再试一次。

有人可以提供指向教程、插件或示例代码的链接，这些链接将向我展示如何验证选择、单选组（无默认设置，但需要一个选择）和复选框（无默认设置，但需要从列表中选择一个 - 不是显示在上面的示例代码中，但我也需要）？

PS 我不需要弹出窗口或错误消息。如果不满足所有要求，我只需要停止表单提交。

在此先感谢您的帮助。

# c# - CollectionView.Refresh() 通常什么时候需要？

> ID：11353944
> 
> 赞同：1
> 
> 时间：2012-07-05T23:31:02.250
> 
> 标签：c#, wpf, mvvm

我对使用 WPF 完全不熟悉，而且我正在处理的应用程序`ListCollectionView.Refresh()`每次 ListCollection 视图模型中的一个对象都会发生变化，这使得应用程序效率极低（`ListCollectionView`绑定到列表集合视图模型）。删除`Refresh()`应用程序后，应用程序运行更加顺畅，并且在 ListCollection 视图模型中发生更改时仍会更新。环顾四周后，似乎任何时候都有过滤器或重新排序，`CollectionView`都会隐式调用`Refresh()`. 那么什么时候需要`Refresh()`重新创建`CollectionView`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T01:08:57.463

如果我理解正确，你有一个`ListCollectionView`绑定到 ListCollectionViewModel （你自己的类）。只要 ListCollectionViewModel`INotifyCollectionChanged`正确实现（例如，它继承自 ObservableCollection<T>），并且集合中的项目`INotifyPropertyChange`正确实现，则无需调用 Refresh()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T11:55:17.287

CollectionView 不处理多个项目正在更改的 CollectionChanged 事件（发生异常）；`Refresh()`可以改为使用，这就是为什么您会看到带有过滤器和排序的调用。

# sql-server - 如何获取每个系列数据的 MAX 值

> ID：11353946
> 
> 赞同：0
> 
> 时间：2012-07-05T23:31:04.557
> 
> 标签：sql-server, max

我需要做的是为 column`col7`的每个不同值获取 column 的 MAX 值`col6`。下面的示例数据。`IPX`是PK。

结果应该看起来像

```
IPX col1    col2    col3    col4    col5    col6    col7
2097177 32  25  1   3   20  10011   19
2097465 32  313 15  5   246 10012   245
2097783 32  631 27  7   440 10013   439 
```

我可以将它们全部选择到临时表中并获得最大值，但我认为有查询可以得到这些结果，我只是想不通。谢谢您的帮助。

```
IPX    col1 col2    col3    col4    col5    col6    col7
2097157 32  5   0   3   4   10011   3
2097159 32  7   0   5   6   10011   5
2097161 32  9   0   7   8   10011   7
2097163 32  11  0   9   10  10011   9
2097169 32  17  0   11  12  10011   11
2097171 32  19  0   13  14  10011   13
2097173 32  21  0   15  16  10011   15
2097175 32  23  1   1   18  10011   17
2097177 32  25  1   3   20  10011   19
2097440 32  288 14  1   226 10012   225
2097442 32  290 14  3   228 10012   227
2097444 32  292 14  5   230 10012   229
2097446 32  294 14  7   232 10012   231
2097448 32  296 15  15  256 10012   255
2097456 32  304 16  15  272 10012   271
2097457 32  305 14  13  238 10012   237
2097459 32  307 14  15  240 10012   239
2097461 32  309 15  1   242 10012   241
2097463 32  311 15  3   244 10012   243
2097465 32  313 15  5   246 10012   245
2097729 32  577 25  1   402 10013   401
2097731 32  579 25  3   404 10013   403
2097733 32  581 25  5   406 10013   405
2097735 32  583 25  7   408 10013   407
2097737 32  585 25  9   410 10013   409
2097745 32  593 25  11  412 10013   411
2097747 32  595 25  13  414 10013   413
2097749 32  597 25  15  416 10013   415
2097751 32  599 26  1   418 10013   417
2097753 32  601 26  3   420 10013   419
2097760 32  608 26  5   422 10013   421
2097762 32  610 26  7   424 10013   423
2097764 32  612 26  9   426 10013   425
2097766 32  614 26  11  428 10013   427
2097768 32  616 26  13  430 10013   429
2097776 32  624 26  15  432 10013   431
2097777 32  625 27  1   434 10013   433
2097779 32  627 27  3   436 10013   435
2097781 32  629 27  5   438 10013   437
2097783 32  631 27  7   440 10013   439 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:35:13.263

试试这个：

```
WITH Data AS
(
    SELECT  *,
            ROW_NUMBER() OVER(PARTITION BY col6 ORDER BY col7 DESC) AS Position
      FROM  <YOUR-TABLE> a
)
SELECT  IPX, col1, col2, col3, col4, col5, col6, col7
  FROM  Data 
 WHERE  Position = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:48:27.597

如果您使用的是 SQL Server 2000，那么您需要执行以下操作：

```
SELECT x.IPX, x.col1, x.col2, x.col3, x.col4, x.col5, x.col6, x.col7
FROM dbo.unspecified_table_name AS x
INNER JOIN (SELECT col6, col7 = MAX(col7)
  FROM dbo.unspecified_table_name
  GROUP BY col6) AS y
ON x.col6 = y.col6
AND x.col7 = y.col7; 
```

请注意，如果出现平局，这将产生多行。

在 SQL Server 2005 中，您可以选择是否要在出现平局时显示多行。这将选择任意行：

```
;WITH x AS
(
  SELECT IPX, col1, col2, col3, col4, col5, col6, col7,
    rn = ROW_NUMBER() OVER (PARTITION BY col6 ORDER BY col7 DESC)
    FROM dbo.unspecified_table_name
)
SELECT IPX, col1, col2, col3, col4, col5, col6, col7
  FROM x
  WHERE rn = 1; 
```

如果您知道如何打破平局，您可以将条件添加到`ORDER BY`. 例如，如果您想选择 IPX 值最低的行，您可以说：

```
;WITH x AS
(
  SELECT IPX, col1, col2, col3, col4, col5, col6, col7,
    rn = ROW_NUMBER() OVER (PARTITION BY col6 ORDER BY col7 DESC, IPX)
    FROM dbo.unspecified_table_name
)
SELECT IPX, col1, col2, col3, col4, col5, col6, col7
  FROM x
  WHERE rn = 1; 
```

如果在出现平局时您想返回两行，只需更改`ROW_NUMBER()`为`RANK()`：

```
;WITH x AS
(
  SELECT IPX, col1, col2, col3, col4, col5, col6, col7,
    rn = RANK() OVER (PARTITION BY col6 ORDER BY col7 DESC)
    FROM dbo.unspecified_table_name
)
SELECT IPX, col1, col2, col3, col4, col5, col6, col7
  FROM x
  WHERE rn = 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T23:50:57.340

```
SELECT f1.col6, f1.col7
FROM tmp_DO_CLOSE_tbl f1
WHERE col7 = (
SELECT MAX(f2.col7)
FROM tmp_DO_CLOSE_tbl f2
WHERE f1.col6 =f2.col6
)
ORDER BY col6, col7 
```

我将使用上面的解决方案，因为这是我需要学习的东西。感谢您的快速回复。

# c - 矩阵乘法无法编译

> ID：11353948
> 
> 赞同：1
> 
> 时间：2012-07-05T23:31:19.320
> 
> 标签：c, visual-studio-2010, compiler-warnings

编译时遇到了一些麻烦

```
#include <stdio.h>
#include <stdlib.h>
#include <stddef.h>
#include <time.h>

int perkalianMatriks(double ** A, double ** B, double ** C, int n);
int randomMatriks(double * m, int n);

int main(int argc, char *argv[]) {
    int n_order = 0 , i, j;
    double ** A, ** B, ** C;
    time_t time1, time2;
    double diff_sec;

    randomMatriks(double * m, int n)

    A = (double **) malloc(sizeof(double) * n_order);
    B = (double **) malloc(sizeof(double) * n_order);
    C = (double **) malloc(sizeof(double) * n_order);

    for (i = 0; i < n_order; i++) {
        A[i] = (double *) calloc(sizeof(double), n_order);
        B[i] = (double *) calloc(sizeof(double), n_order);
        C[i] = (double *) calloc(sizeof(double), n_order);
    }

    printf("\nMatrix Sizes : ");
    scanf("%d", %n_order);

    time(&time1);
    perkalianMatriks(A, B, C, n_order);
    time(&time2);
    diff_sec = difftime (time2,time2);

    printf ("Total time to execute %f seconds.\n", diff_sec);
    return 0;
}

int randomMatriks(double * m, int n) {
    int i;

    for (i = 0; i < n_order; i++) {
        m[i] = (double) (rand() % 10) + 1;
    }
}

int perkalianMatriks(double ** a, double ** b, double ** c, int n) {
    int i, j, k;

    for (i = 0; i < n; i++) {
        for (j = 0; j < n; j++) {
            c[i][j]=0;          
            for (k = 0; k < n; k++)
            {
                c[i][j] += a[i][k] * b[k][j];
            }
        }
    }

    return 0;
} 
```

编译时出错

1.  sekuensial.c(16)：错误 C2143：语法错误：在 'type' 之前缺少 ')'
2.  sekuensial.c(16)：错误 C2198：“randomMatriks”：调用的参数太少
3.  sekuensial.c(16): 错误 C2059: 语法错误: ')'
4.  sekuensial.c(29): 错误 C2059: 语法错误: '%'
5.  sekuensial.c(45)：错误 C2065：'n_order'：未声明的标识符

有谁可以帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:32:24.810

你少了一个分号。而且你不能命名一个变量`double`。我想这行应该被删除，因为它是上面声明的剪切和粘贴。如果你需要调用它，你应该用真正的参数调用它。我没有看到你定义了任何适合第一个参数的东西，我猜你稍后会在你的代码中使用`n_order`第二个参数。

```
randomMatriks(double * m, int n)
              ^^^^^^            ^^^ 
```

这`scanf`是错误的，您可能想要`&`：

```
scanf("%d", %n_order);
            ^^^ 
```

变量`dif_sec`不存在。错字。

```
dif_sec = difftime (time2,time2);
^^^^^^^
printf ("Total time to execute %f seconds.\n", dif_sec);
                                               ^^^^^^^ 
```

变量`n_order`不存在。`n`相反，可能。

```
for (i = 0; i < n_order; i++) {
                ^^^^^^^ 
```

`randomMatriks`应该返回一些东西。它在没有声明的情况下脱落`return`，即使它被声明为返回一个`int`.

您有一些未使用的变量和函数参数。

```
int main(int argc, char *argv[]) {
             ^^^^        ^^^^
    int n_order = 0 , i, j;
                         ^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:40:27.793

问题是你从来没有初始化你的`C`数组，它是一个指向双精度指针的指针数组。在`perkalianMatriks`中，它是被尊重的，并且在那一点上，关于指针是什么（在你的情况下为 0xfdfdfdfd），所有的赌注都被取消了。

（我猜你可能不明白`**`类型到底是什么以及它应该如何使用？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T05:21:29.247

这不是为 * *B 等分配内存的正确方法。请参阅为双指针 (*B) 分配内存的示例，*其余指针也是如此。还要注意分号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T05:28:50.040

执行两个矩阵的乘法非常简单。

您可以在：[solvedc.com获得一个简单的线索](http://www.solvedc.com/Codes/Entry.aspx?entryId=19)

# wpf - NotificationObject 在引用重新分配时更新所有属性

> ID：11353951
> 
> 赞同：0
> 
> 时间：2012-07-05T23:31:30.553
> 
> 标签：wpf, binding

当您的视图实体派生自 NotificationObject 并且每个属性在其设置器中调用“RaiseProperty”更改时，所有属性都会在对象重新分配时调用“RaiseProperty”。或者，当您想要通知 WPF 控件属性更改时，您是否手动设置了每个属性。

前任。

1.  项目/实体从 WCF 到达。
2.  已经在可观察集合中的项目检测到到达的项目已经包含在集合中，并且应该检查已经在集合中的项目和从 WCF 到达的项目之间是否存在任何不同的属性。

我可以这样做吗？

EntityInCollection = EntityFromWCF 并让每个属性引发其事件？还是我必须这样做：

每个属性的 EntityInCollection.Property1 = EntityFromWCF.Property1... 等等。

我有一个 gridview 显示对象，并希望为更新的单元格设置动画，但我认为重新分配引用将引发所有事件，而不仅仅是两个对象之间已更改/不同的事件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T08:20:58.757

如果您要替换整个对象，则 ObservableCollection 将引发一个事件来通知此更改。UI 组件将（或应该 - 我不能保证所有控件，尤其是第 3 方控件）会自动响应和刷新。

# database-migration - 使用长时间运行的数据库迁移脚本

> ID：11353953
> 
> 赞同：4
> 
> 时间：2012-07-05T23:31:48.663
> 
> 标签：database-migration, fluent-migrator

我正在试用[FluentMigrator](http://nuget.org/packages/FluentMigrator)作为一种以最小的努力使我的数据库模式保持最新的方式。

对于我目前正在构建的版本，我需要运行一个数据库脚本来对大量现有数据行进行简单的更改（大约 2% 的 21,000,000 行需要更新）。

有太多数据需要在单个事务中更新（事务日志已满，脚本中止），所以我使用 WHILE 循环遍历表，一次更新 10,000 行，每批在一个单独的事务中。这很有效，大约需要 15 分钟才能完成。

现在我已经完成了脚本，我正在尝试将它集成到 FluentMigrator 中。

FluentMigrator 似乎在一个事务中运行单个批次的所有迁移。

如何让 FM 在单独的事务中运行每个迁移？
我可以告诉 FM 不要将事务用于特定迁移吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T22:14:42.500

目前这是不可能的。

正在进行讨论，一些工作已经在进行中。在这里查看：[https ://github.com/schambers/fluentmigrator/pull/178](https://github.com/schambers/fluentmigrator/pull/178)

但是您的用例肯定会有助于将事情推向正确的方向。
欢迎您参与讨论！

也许有人会找到一个临时的解决方法？

# operating-system - 使用 curses 库为不同的操作系统创建 GUI

> ID：11353955
> 
> 赞同：0
> 
> 时间：2012-07-05T23:32:10.377
> 
> 标签：operating-system, curses

看起来 curses 库是特定于操作系统的。鉴于此，我想知道：

1.  curses 库是否可以在非标准操作系统中使用（如 Windows、Linux、Mac OS 等...）？和，
2.  如果 curses 库不限于那些操作系统，我是否必须编写自己的库中描述的函数的实现，或者我可以简单地以类似的方式调用函数，如下所示：

    ```
    #include <stdio.h>
    ...
    printf("%s", "something"); 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T23:46:18.310

对于您的第一个问题，您可以在任何类 Unix 操作系统中使用 curses，包括 Linux 和 MacOSX。他们都提供诅咒。对于其他操作系统，您可以检查[PDCurses](http://www.projectpluto.com/win32a.htm)。也就是说，您可以使您的代码可移植。但是，我不会考虑将它用于 iOS、Android 等（尽管仍然可以这样做）。

对于你的第二个问题，一旦你使用了诅咒，你就必须坚持下去。不能使用标准 I/O。Curses 提供了自己的打印指令。而不是`printf`，你会使用`printw`. 检查[curses教程](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)中的[“Hello world”示例](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/helloworld.html)以获得一个想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:37:10.317

治愈库主要作为终端功能和应用程序之间的抽象运行。我会说是的，理论上你可以实现任何东西

您的代码片段在问题的上下文中毫无意义......诅咒在哪里使用？

您的问题也不清楚您要使用的操作系统。

如果您正在寻找快捷方式，您可以直接使用终端转义码

# javascript - PhoneGap 中的数据库条目问题。

> ID：11353958
> 
> 赞同：0
> 
> 时间：2012-07-05T23:32:28.350
> 
> 标签：javascript, database, cordova

我正在使用 PhoneGap 开发相机应用程序。

我想要完成的事情是，当我的应用程序拍照并将图片存储在应用程序目录中时，我想在数据库中插入一个条目，其中包含文件名、路径和上传的标志条目。

我很难做到这一点。而且我不确定问题出在哪里。

用于创建数据库和表然后插入条目的代码如下所示。在文件已经保存在应用程序目录中后，我调用“insertInTable”函数。

```
 function insertInTable(name, path)
{
    var db = window.openDatabase('taukydb', '1.0', 'Tauky Database', 200000);
    db.transaction(populateDB, errorCB, successCB);
    //db.transaction(successCB, errorCB, );

    //return();
}

function populateDB(tx) {
    tx.executeSql('CREATE TABLE IF NOT EXISTS taukytb (name UNIQUE, path, uploaded)');
    tx.executeSql('INSERT INTO taukytb (name, path, uploaded) VALUES (filename, filepath, 0)');

}

// Transaction success callback
function successCB() {
    alert("Hurrey!!!");

    //this is just for testing
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(queryDB, errorCB);               
}

function queryDB(tx) {
    tx.executeSql('SELECT * FROM taukytb', [], querySuccess, errorCB);
}

function querySuccess(tx, results) {
    var len = results.rows.length;
    alert(len);
}

// Transaction error callback
function errorCB1(err) {            
    alert("Error 11111 processing SQL: "+err.code);
    //console.log("Error processing SQL: "+err.code);

}

// Transaction error callback
function errorCB(err) {         
    alert("Error processing SQL: "+err.code);
    //console.log("Error processing SQL: "+err.code);

} 
```

当我运行此代码时，永远不会调用函数“succesCB”，也不会调用 errorCB。

请看看这个。我是移动开发的新手，从现在开始我就一直坚持这一点。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:14:03.843

我做了一些更改以使其正常工作。

```
tx.executeSql('INSERT INTO taukytb (name, path, uploaded) VALUES ("'+filename+'", "'+filepath+'", 0)'); 
```

`successCB`当查询执行良好时，此更改将调用。

```
function successCB() {
    alert("Hurrey!!!");

    //this is just for testing
    var db = window.openDatabase("Database", "1.0", "Cordova Demo", 200000);
    db.transaction(queryDB, errorCB);               
}

function queryDB(tx) {
    tx.executeSql('SELECT * FROM taukytb', [], querySuccess, errorCB);
} 
```

但是，此方法不会像您期望的那样工作，因为您正在创建提供该事务的第二个数据库，然后查询第一个数据库的表。

下面是完整的源示例，它在两个数据库中创建了两个具有相同表的数据库

[https://gist.github.com/3058562](https://gist.github.com/3058562)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:40:18.327

对phonegap不太了解，但是create table语句似乎缺少某些类型。

还有这一行：

```
tx.executeSql('INSERT INTO taukytb (name, path, uploaded) VALUES (filename, filepath, 0)'); 
```

什么是文件名？

# c# - LINQ：在列表中查找频率 = 1 的项目

> ID：11353959
> 
> 赞同：4
> 
> 时间：2012-07-05T23:32:28.647
> 
> 标签：c#, linq

我正在努力完成以下任务。任何建议将不胜感激！

我有一个 Person 对象列表，如下所示：

```
public class Person {
     private string firstname {get; set}
     private string lastname {get; set}
     private string zipcode {get; set;}
     private string id {get; set;}
     private int freq = 1;

     public Person(...) {...}
}

List<Person> PersonList = new List<Person>; //Gets populated with Person objects 
```

我想找到所有在他们的邮政编码中有唯一名字的人。

到目前为止，我已经尝试对（名字、姓氏、邮政编码）的所有不同组合进行频率计数，然后选择频率 = 1 的组合。但是，我会丢失有关这些人 ID 的所有信息。尽管进行了分组操作，但我需要一种方法来保留原始 Person 对象。

下面是我上面提到的频率计数，但这不是我要寻找的结果：

```
var QueryFreqAnalysis =
                        from p in PersonList
                        group p by new { p.firstName, p.lastName, p.zipcode } into g
                        select new {
                            fName = g.Key.firstname,
                            lName = g.Key.lastname,
                            zip3 = g.Key.zipcode,
                            freq = g.Sum(p => p.freq)
                        }; 
```

正如我所提到的，即使我现在可以在 g 中选择 freq = 1 的组，我也丢失了有关人员 ID 的所有信息。

我希望我已经把问题说清楚了。在此先感谢您的任何建议！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T23:35:48.877

```
from p in PersonList
// Group by name and zip
group p by new { p.firstName, p.lastName, p.zipcode } into g
// Only select those who have unique names within zipcode
where g.Count() == 1
// There is guaranteed to be one result per group: use it
let p = g.FirstOrDefault()
select new {
    fName = p.firstname,
    lName = p.lastname,
    zip3 = p.zipcode,
    id = p.id
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T00:30:10.987

我知道你可能只需要并且想要一个 linq 答案:)
但我只需要写一个非 linq 答案：

```
var dict = new Dictionary<string, Person>(PersonList.Count);

        var uniqueList = new List<Person>();

        foreach (var p in PersonList)
        {
            var key = p.firstname + p.lastname + p.zipcode;
            if (!dict.ContainsKey(key))
                dict.Add(key, p);
            else
                dict[key] = null;
        }

        foreach (var kval in dict)
        {
            if (kval.Value != null)
                uniqueList.Add(kval.Value);
        }

        return uniqueList; 
```

也可以使用哈希码。

# java - 使用 SimpleCursorAdapter 自定义 listView

> ID：11353960
> 
> 赞同：1
> 
> 时间：2012-07-05T23:32:29.833
> 
> 标签：java, android, listview, simplecursoradapter

我已经创建了`ListView`从应用程序数据库获取数据，并且当我只想在一个条目中显示一个信息（例如团队名称）时，它工作正常。

现在我正在尝试显示更多信息，例如团队名称、日期和城镇（所有数据来自 db，由 Cursor 提供）。而且我无法让它工作，Intent 正在显示 ListView 但任何条目中都没有文字......我不知道如何更清楚地解释它。

意图代码：

```
 public class Games extends Activity implements OnClickListener {

Button bNewGame;
ListView gameList;
GameDayTableAdapter db;
Cursor c;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.games);
    bNewGame = (Button) findViewById(R.id.bNewGame);
    bNewGame.setOnClickListener(this);
    gameList = (ListView) findViewById(R.id.lvGameList);
    db = new GameDayTableAdapter(this);
    db.open();
    c = db.getAll();
    startManagingCursor(c);
    setListView();
}

private void setListView() {
    // TODO Auto-generated method stub
    SimpleCursorAdapter mAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_expandable_list_item_1, c,
            new String[] { AbstractDbAdapter.TEAM_NAME, AbstractDbAdapter.GAME_DAY_HOME_GAME, AbstractDbAdapter.GAME_DAY_DATE },
            new int[] { R.id.game_entry_team, R.id.game_entry_home, R.id.game_entry_date });
    gameList.setClickable(true);
    gameList.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View v, int position, long id) {

        }
    });

    gameList.setAdapter(mAdapter);
    gameList.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bNewGame:
        Intent intent = new Intent(Games.this, NewGame.class);
        startActivity(intent);
        db.close();
        finish();
        break;
    }
} 
```

game_list_entry.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/game_entry_team"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/game_entry_home"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        />

    <Space
        android:layout_width="50dp"
        android:layout_height="match_parent" />

    <TextView
        android:id="@+id/game_entry_date"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"/>
</LinearLayout> 
```

这就是我根据一些在线可用的教程设法做到的，但不是，它不起作用，我不知道如何修复它。我发现了其他教程，人们在其中创建了 extends 的新类`SimpleCursorAdapter`，但这看起来需要做很多额外的工作，我想知道是否有更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:36:42.437

您正在将列表设置为使用框架附带的可扩展列表行视图。您需要指定您的自定义。

替换这个：

```
android.R.layout.simple_expandable_list_item_1 
```

有了这个：

```
R.layout.game_list_entry 
```

# sql - SQL：在此上下文中不允许名称 false

> ID：11353962
> 
> 赞同：5
> 
> 时间：2012-07-05T23:33:02.520
> 
> 标签：sql, sql-server-2008

在执行以下 SQL 查询时

```
alter table tablename add columnname boolean not null default false; 
```

我收到以下错误消息：

`The name "false" is not permitted in this context. Valid expressions are constants, constant expressions, and (in some contexts) variables. Column names are not permitted.`

我应该如何解决这个问题？建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T23:40:56.737

列类型应该是一个`bit`字段。

在 SQL 中，您使用`0`and`1`来设置`bit`字段。这些值在 SQL Server Management Studio 中显示为`false`或`true`，对应于`0`和`1`。

```
alter table tablename add columnname bit not null default 0; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T23:39:30.967

没有`boolean`数据类型。使用`bit`数据类型。

`false`a的`bit`值为`0`。

```
alter table tablename add columnname bit not null default 0 
```

# c++ - 使用朋友访问模板类中的私有变量

> ID：11353963
> 
> 赞同：0
> 
> 时间：2012-07-05T23:33:04.370
> 
> 标签：c++, templates

我从下面的程序中得到以下错误：

使用未声明的标识符“值”

为什么？而且，如何使用朋友类修复它？

提前致谢。

```
template <typename T>
class F2 : public F1<T>
{
public:
  F2(T o) : F1<T>(o) {}

  void fun() {
    std::cout << value << std::endl;
  }
};

template <typename T>
class F1
{
public:
    template <typename U>
    friend class F2;

    F1(T o) : value(o) {}

protected:
  T value;
};

int main()
{
    F2<int> f(3);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T23:46:21.117

C++ 标准规定所有不依赖于模板参数的名称在解析模板函数时绑定，而不是在实例化时绑定，否则在`value`可以检测到对继承的引用时。

快速的解决方法是使用`this->value`; 因为`this`依赖于模板参数，所以在实例化函数时绑定它，`value`因此允许对继承的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T23:53:38.520

这里有多个问题：

1)`F2`没有模板化，所以你使用`T`的任何地方`F2`都是不正确的

2）`F1`（基类）定义在 之后`F2`，移到`F2`下面`F1`

3) 基类与它的派生类交友。它不应该知道它的派生类。

这是您的*实际*代码吗？如果是这样，你写的错误是你的*实际*错误吗？由于一系列原因，我预计会有很多错误。

# windows - 在不使用 Visual Studio 的情况下在平板电脑上部署 Metro 应用程序

> ID：11353965
> 
> 赞同：0
> 
> 时间：2012-07-05T23:33:10.457
> 
> 标签：windows, windows-8, microsoft-metro

我一直在尝试将我的 Metro 应用程序从 win8 机器部署到平板电脑。我能够完成创建包的整个过程，在平板电脑中使用 Powershell 对其进行签名和部署。应用程序的磁贴出现在开始屏幕上，但是当我单击磁贴时，应用程序只显示启动屏幕并崩溃. 该部署不适用于我的一个示例应用程序，但即使对于某些 MSDN 示例应用程序（如 LockScreen Personalization）也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:34:16.570

您是否在目标计算机上添加了“开发人员许可证”？这可以使用 powershell 完成（但在管理员模式下）

所有信息都可以在这里找到：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974578.aspx)

很快，您需要在管理员模式下从 Powershell运行**Get-WindowsDeveloperLicense 。**

# android - CENTER_INSIDE 和 FIT_CENTER 比例类型有什么区别？

> ID：11353973
> 
> 赞同：162
> 
> 时间：2012-07-05T23:34:41.833
> 
> 标签：android, imageview, android-imageview, scaling, scaletype

我分不清 和 之间的`ImageView.ScaleType.CENTER_INSIDE`区别`ImageView.ScaleType.FIT_CENTER`。

`CENTER_INSIDE`

> 均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或小于视图的相应尺寸（减去填充）。

`FIT_CENTER`

> 计算将保持原始 src 纵横比的比例，但也将确保 src 完全适合 dst。至少一个轴（X 或 Y）将完全适合。结果以 dst 为中心。

有人可以阐明两者之间的区别吗？

* * *

## 回答 #1

> 赞同：268
> 
> 时间：2013-10-10T02:38:13.077

`CENTER_INSIDE`这是和之间区别的图形说明`FIT_CENTER`。

* * *

# 使用的图像（100 × 100）：

![Android_Robot_100.png](../Images/cac4a1bc92c7a6038f538853a36cd6a2.png)

* * *

# 小图像视图（75 × 50）：

## CENTER_INSIDE：

![CENTER_INSIDE 用于小图像视图](../Images/d8ea2d40bbb44d5601ccbd8a9734096a.png)

## FIT_CENTER：

![适合小图像视图的 FIT_CENTER](../Images/d02b133e412db4c1e5715cf3b55ea268.png)

两者都`CENTER_INSIDE`缩小`FIT_CENTER`图像。

* * *

# 大图像视图（300 × 200）：

## CENTER_INSIDE：

![CENTER_INSIDE 用于大图像视图](../Images/2547cf2be3416d8f347af69ced622ed0.png)

## FIT_CENTER：

![适合大图像视图的 FIT_CENTER](../Images/db1e502b62ee3868d4cf6fd3773fa73e.png)

`CENTER_INSIDE`不放大图像，`FIT_CENTER`可以。

* * *

[*Android 机器人是从 Google 创建和共享的作品中复制或修改的，并根据知识共享 3.0 署名许可中描述的条款使用。*]

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2012-07-05T23:47:59.243

FIT_CENTER 将确保源完全适合容器内部，并且水平轴或垂直轴都将是准确的。

CENTER_INSIDE 将使图像在容器内居中，而不是使边缘完全匹配。

因此，如果您有一个 10" x 10" 的方形框和一个 8"x8" 的图像，则 CENTER_INSIDE 将直接位于框的中间，源容器和目标容器之间为 2"。

使用 FIT_CENTER，上例中的相同图像将适合整个容器，因为边相等，并且一个轴将匹配目标。使用 FIT_CENTER，如果您有一个 5" x 10" 的框和一个 5" x 7" 的图像，图像将按比例缩放，因此其中一个轴将适合，但仍会将图像居中在目的地。

它们是相似的，但制作一个是为了使源尽可能地填充目标，而另一个只是将图像居中放置在目标内部。

希望澄清一点

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2013-06-18T13:46:16.600

如果图像大于容器，它们是相同的。如果图像较小，则容器 CENTER_INSIDE 不会放大图像，而 FIT_CENTER 会。

# ios - 在 Flash Professional CS6 中使用 adobe air 发布

> ID：11353999
> 
> 赞同：0
> 
> 时间：2012-07-05T23:37:10.643
> 
> 标签：ios, air, adobe, publishing

我正在使用 Adob​​e Flash Professional CS6 将我的应用程序发布为 iOS 应用程序。

我收到的错误是：

属性或元素在应用程序描述符文件中包含无效值。(application.iPhone.InfoAdditions)

我的文件是

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<application xmlns="http://ns.adobe.com/air/application/3.2">
  <id>com.itsgamingplus.itsgood</id>
  <filename>ItsGoodIpod</filename>
  <description/>
  <!-- To localize the description, use the following format for the description     element.<description><text xml:lang="en">English App description goes here</text><text     xml:lang="fr">French App description goes here</text><text xml:lang="ja">Japanese App      description goes here</text></description>-->
  <name>ItsGoodIpod</name>
   <!-- To localize the name, use the following format for the name element.<name><text xml:lang="en">English App name goes here</text><text xml:lang="fr">French App name goes here</text><text xml:lang="ja">Japanese App name goes here</text></name>-->
  <copyright/>
  <initialWindow>
    <content>ItsGoodIpod.swf</content>
    <systemChrome>standard</systemChrome>
    <transparent>false</transparent>
    <visible>true</visible>
    <fullScreen>true</fullScreen>
    <aspectRatio>landscape</aspectRatio>
    <renderMode>gpu</renderMode>
    <autoOrients>false</autoOrients>
   </initialWindow>
  <icon>
    <image512x512>icon1.png</image512x512>
    <image29x29>icon2.png</image29x29>
    <image57x57>icon3.png</image57x57>
  </icon>
    <iPhone>
        <InfoAdditions>
       <![CDATA[<key>UIDeviceFamily</key><Array><string>1</string></Array>]]>
    </InfoAdditions>
     <requestedDisplayResolution>standard</requestedDisplayResolution>
   </iPhone>
   <customUpdateUI>false</customUpdateUI>
  <allowBrowserInvocation>false</allowBrowserInvocation>
  <versionNumber>1.4</versionNumber>
  <supportedLanguages>en</supportedLanguages>
</application> 
```

我已经删除了 xml 文件并使 Flash Professional 生成了一个新文件，但出现了同样的错误。

任何建议都有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T16:51:56.743

问题是 Array 节点区分大小写。它必须小写，否则您将收到“无效值”错误消息。这是对的：

```
<![CDATA[<key>UIDeviceFamily</key><array><string>1</string></array>]]> 
```