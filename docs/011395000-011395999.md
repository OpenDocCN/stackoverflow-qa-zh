# StackOverflow 问答 11395000-11395999

# javascript - 可以将附加功能绑定到函数吗？

> ID：11395001
> 
> 赞同：1
> 
> 时间：2012-07-09T12:27:38.843
> 
> 标签：javascript, jquery

如果我有这样的功能：

```
 function showAlert() {
   alert("1");
 } 
```

有没有办法将附加功能绑定到页面不同部分的相同功能？

像这样：

```
 function showAlert() {
   alert("1");
   alert("2");
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:31:24.940

您可以使用调用旧函数的新函数覆盖该函数。

```
 function showAlert() {
   alert("1");
 }

showAlert = (function (original){
 return function () {
   original();
   alert("2");
 }
}(showAlert));

showAlert();

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:32:13.790

好吧，您可以简单地重新定义函数：

```
function showAlert() {
    alert("1");
}

var originalShowAlert = showAlert;

showAlert = function(){
    originalShowAlert();
    alert("2");
}

showAlert(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:42:37.923

由于函数在 JS 中被简单地视为对象，因此您可以维护一个函数数组，然后在循环中执行每个函数。这允许您将任何类型的函数添加到集合中（如果您保留索引，甚至可以在以后删除它们），而不会中断执行序列。

```
var funk = [];

funk.push(function showAlert1()
{
    alert("1");
});

funk.push(function showAlert2()
{

    alert("2");
});

funk.push(function showAlertFromMsg()
{
    alert("You passed " + this);

});

for(var i=0,len=funk.length; i<len; i++) funk[i].call("This is my message"); 
```

# sql - 在过程中创建表时出错

> ID：11395003
> 
> 赞同：0
> 
> 时间：2012-07-09T12:27:46.147
> 
> 标签：sql, oracle

我想创建一个可以在其中创建表的过程。所以我做了这个

创建或替换过程 test_proc

BEGIN 立即执行 'CREATE TABLE ABC_TABLE AS SELECT * FROM XYZ_TABLE WHERE 1=0'; 结尾;

但编译后我得到以下错误。

**在预期以下情况之一时遇到符号“BEGIN”： ( ; 使用已编译包装的外部确定性并行启用流水线将 authid 作为集群压缩顺序符号“is”替换为“BEGIN”以继续。**

谁能告诉我这样做的原因以及如何在程序中创建表。

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:31:58.140

您在 test_proc 和 BEGIN 之间缺少“AS”。所以应该是

创建或替换过程 test_proc **AS**

开始

# objective-c - 将 sqlite 查询的值分配给 Nsmutable 数组

> ID：11395006
> 
> 赞同：0
> 
> 时间：2012-07-09T12:28:09.373
> 
> 标签：objective-c, database, xcode, sqlite

我试图在 Xcode 4.3.3 上创建一个搜索引擎，一个搜索`UITableView`.

首先，我尝试创建没有动态数据库和 sqlite 连接的搜索引擎，它可以工作，并且如果在`NSMutableArray`.

现在，我不想在数组中静态预定义元素，而是想访问 sqlite 数据库并执行查询，将结果作为单元格字段。我曾尝试使用 FMDB 进行连接，但问题是我无法意识到这一点。

这是我的代码，我做错了什么？

```
//
//  FilterDemoTableViewController.m
//  Created by Elias Rahme.
//  Copyright (c) ERC.
//

#import "ViewController.h"
#import "DetailsViewController.h"
#import "Food.h"
#import "FMDatabase.h"

@implementation ViewController

@synthesize allTableData;
@synthesize filteredTableData;
@synthesize searchBar;
@synthesize isFiltered;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    searchBar.delegate = (id)self;
    NSString *path  = [[NSBundle mainBundle] pathForResource:@"SampleDB" ofType:@"sqlite"];
    FMDatabase *db  = [[FMDatabase alloc] initWithPath:path];
    [db open];
    if (![db open]) {
        NSLog(@"Could not open db.");
    }
    else{
    NSLog(@"Database is opened");
    }
    FMResultSet *fResult= [db executeQuery:@"SELECT a_id FROM Description where desc_id=1"];
    if( !fResult){

        NSLog(@"Could not execute query");
      }
    else{
        NSLog(@"Query executed");
    }
    eleData = [fResult stringForColumn:@"desc"];

  //  NSLog([fResult stringForColumn:@"desc"]);

    allTableData = [[NSMutableArray alloc] initWithObjects:
                    [[Food alloc] initWithName:@"test" andDescription:@"TEst" ], 
                    [[Food alloc] initWithName:@"Steak" andDescription:@"Medium"], 
                    [[Food alloc] initWithName:@"Salad" andDescription:@"Caesar"], 
                    [[Food alloc] initWithName:@"Salad" andDescription:@"Bean"], 
                    [[Food alloc] initWithName:@"Fruit" andDescription:@"Apple"], 
                    [[Food alloc] initWithName:@"Potato" andDescription:@"Baked"], 
                    [[Food alloc] initWithName:@"Potato" andDescription:@"Mashed"], 
                    [[Food alloc] initWithName:@"Bread" andDescription:@"White"], 
                    [[Food alloc] initWithName:@"Bread" andDescription:@"Brown"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Beef"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Chicken"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Veggie"], 
                    [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"], 
                    [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Beef"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Chicken"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Veggie"], 
                    [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"], 
                    [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Beef"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Chicken"], 
                    [[Food alloc] initWithName:@"Hot Dog" andDescription:@"Veggie"], 
                    [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"], 
                    [[Food alloc] initWithName:@"Pizza" andDescription:@"Pepperonni"], 
                    nil ];
    [db close];

}
 /*   
    NSLog(@"Data from ele.h file");

    /* Now here we have to write the code from the database to display the details */
    /*
    aElephant = [[NSMutableArray alloc] init];
    NSLog(@"Data base is entering");

    /*
     Here we have to set the path 
     We are creating the path for the datbase file in order to access
     */
/*  
    NSString *path  = [[NSBundle mainBundle] pathForResource:@"SampleDB" ofType:@"sqlite"];

    NSLog(@"No problem with the path");

    /* FMDatabase here is used to take the database path */
/*  
    FMDatabase *db  = [[FMDatabase alloc] initWithPath:path];

    /* Here we are opening the datase in order to access it */
/*  
    [db open];
    NSLog(@"Database Opened");

    /*
     Then the next step here is taking the database result using the sqlquery and then carrying that result into the resultset object   
     Resultset for Elephant: select * from Description where a_id=1; here description is the table, a_id is the id of Elephant it is
     the primary key in animals table
/*   */
/*  NSLog(@"NOt yet executing the query");
    FMResultSet *fResult= [db executeQuery:@"SELECT * FROM description"];
    NSLog(@"Did Execute the Query");
  //  NSLog(*fResult);

    //Now we have to take these results in to a loop and then repeteadly loop it in order to get all the data in a our Array Object

    while([fResult next])
    {
    /*  /* taking results from database to a string "eleData" */
    /*  eleData = [fResult stringForColumn:@"desc"];
        /* adding data from the string object to Array */
        //[aElephant addObject:eleData];
        /* Checking weather data has come or not */
    //  NSLog(@"The data is %@=",eleData);
    //}
    /* Closing the Database */
    //[db close];

- (void)viewDidUnload
{
    [self setSearchBar:nil];
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int rowCount;
    if(self.isFiltered)
        rowCount = filteredTableData.count;
    else
        rowCount = allTableData.count;

    return rowCount;
   // return [aElephant count];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

      /*
    if(isFiltered)
        eData = [filteredTableData objectAtIndex:indexPath.row];
    else
        eData = [allTableData objectAtIndex:indexPath.row];
*/
  //  NSLog(aElephant);
 /*   NSString *eData = [aElephant objectAtIndex:indexPath.row];
    cell.textLabel.text  = eData;
    return cell;*/

    Food* food;
    if(isFiltered)
        food = [filteredTableData objectAtIndex:indexPath.row];
    else
        food = [allTableData objectAtIndex:indexPath.row];

    cell.textLabel.text = food.name;
    cell.detailTextLabel.text = food.description;

    return cell;
}

#pragma mark - Table view delegate

-(void)searchBar:(UISearchBar*)searchBar textDidChange:(NSString*)text
{
    if(text.length == 0)
    {
        isFiltered = FALSE;
    }
    else
    {
        isFiltered = true;
        filteredTableData = [[NSMutableArray alloc] init];

        for (Food* food in allTableData)
        {
            NSRange nameRange = [food.name rangeOfString:text options:NSCaseInsensitiveSearch];
            NSRange descriptionRange = [food.description rangeOfString:text options:NSCaseInsensitiveSearch];
            if(nameRange.location != NSNotFound || descriptionRange.location != NSNotFound)
            {
                [filteredTableData addObject:food];
            }   
        }
    }

    [self.tableView reloadData];
}

- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{
    [self showDetailsForIndexPath:indexPath];
}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self showDetailsForIndexPath:indexPath];
}

-(void) showDetailsForIndexPath:(NSIndexPath*)indexPath
{
    [self.searchBar resignFirstResponder];
    DetailsViewController* vc = [self.storyboard instantiateViewControllerWithIdentifier:@"DetailsViewController"];
    Food* food;

    if(isFiltered)
    {
        food = [filteredTableData objectAtIndex:indexPath.row];
    }
    else
    {
        food = [allTableData objectAtIndex:indexPath.row];
    }

    vc.food = food;
    [self.navigationController pushViewController:vc animated:true];    
}

@end 
```

简而言之，`initWithName`我希望它具有来自 sqlite 数据库的值，而不是具有静态值。任何帮助将不胜感激感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:52:54.740

问题是我当时没有正确访问数据库，也没有看到发生的变化，因为当我应该在我的文档中打开 iPhone 模拟器中的本地数据库时，我正在打开本地数据库。

# javascript - Javascript 对象性能中的数据

> ID：11395009
> 
> 赞同：0
> 
> 时间：2012-07-09T12:28:24.133
> 
> 标签：javascript, facebook

我越精通 javascript，我就越想了解性能。例如，我有一个自动完成框，它会经常访问服务器以尝试自动完成用户请求。谷歌和大多数网站是如何增强他们的搜索的。现在我的问题是，如果我在 FB api 中查询朋友列表并将其存储在 javascript 对象中（+- 700 及其全名和用户 ID），**这将如何影响性能？**我无法想象这会比不断地向服务器发送请求更糟糕。将这些信息存储在本地，然后进行查询似乎更加熟练。**在 javascript 对象中存储信息的界限在哪里。** 我希望我的服务器尽可能少，并采用让客户端完成 80% 的工作而让服务器完成剩余的 20% 的理念。显然我希望客户体验流畅的应用程序。js ninjas 如何测试他们的应用程序的性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:49:51.587

就减少网络延迟而言，最有效的解决方案是检索好友列表，使用类似 localStorage API 的方式存储它，并每隔一段时间在后台更新列表。将这个大小的列表保存在内存中实际上应该不会对页面性能产生太大影响（尽管在移动设备上可能并非如此）。如果某人有成千上万的朋友，那么您*可能会*看到速度变慢，尤其是在从 localStorage 读取数据时，但我仍然对此表示怀疑。

决定在哪里画线更难；这取决于很多因素。TBH 这是您可能只有在您的产品发布后才知道的事情，并且您的用户可以向您提供有关性能的反馈，从而允许您进行微调。A/B 测试在这方面可以提供很大帮助。

# java - JSP 页面值没有被传递或填充到 setter 和 getter

> ID：11395012
> 
> 赞同：0
> 
> 时间：2012-07-09T12:28:31.390
> 
> 标签：java, jsp, struts2

它是我将数据发送到 javabean 的 jsp 页面：

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%> 
<%@taglib uri="/struts-tags" prefix="s" %>
<%@taglib uri="/struts-dojo-tags" prefix="sx" %>
<%@page session="true" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<sx:head parseContent="true" />
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Set the Leaves </title>
<script language="JavaScript" src="../Advance_Academic_ERP/css/Ck_Effect.js"></script>
<link rel="stylesheet" type="text/css" media="all"
    href="../Advance_Academic_ERP/css/jsDatePick_ltr.min.css" />
<script type="text/javascript"
    src="../Advance_Academic_ERP/css/jsDatePick.min.1.3.js"></script>
<script type="text/javascript">
window.onload = function(){
new JsDatePick({
    useMode:2,
    target:("fromDate"),
    dateFormat:"%d-%m-%Y"
    });

new JsDatePick({
    useMode:2,
    target:("toDate"),
    dateFormat:"%d-%m-%Y"
    }); 
};
</script>

<script type="text/javascript">
function display(val) {
    var o = document.getElementById('name1');
    var b = document.getElementById('leaveNo1');
    (parseInt(val) == '5' || parseInt(val)=='6')? o.style.display = 'block' : o.style.display = 'none';
    (parseInt(val) == '5' || parseInt(val)=='6')? b.style.display = 'block' : b.style.display = 'none';
    }
</script>
</head>

<body>

<s:form action="LeaveSetterAction" name="leave" validate="true">

<s:select label="Type Of Holiday/Leave*" 
            headerKey="-1" headerValue="Select Type"
            list="#{'1':'National Holidays', '2':'Weekly Holidays', '3':'Local Holidays', '4':'Situational Holidays', '5':'Seek Leaves', '6':'Personal Leaves'}" 
            name="leaveType" id="leaveType" onchange="display(this.value);"/>

    <table id="name1" style="display: none;">
      <tr>
        <td>Name</td>
        <td><input type="text" name="name" id="name"></td>
      </tr>
    </table>

    <table id="leaveNo1" style="display: none;">
      <tr>
        <td>No Of Alloted Leaves</td>
        <td><input type="text" name="leaveNo" id="leaveNo"></td>
      </tr>
    </table>

<s:textfield name="fromDate" label="From date*" key="fromDate" id="fromDate"></s:textfield>

<s:textfield name="toDate" label="To date*" key="toDate" id="toDate"></s:textfield>

<s:textfield name="difference" label="Duration" key="difference" id="difference" readonly="readonly"></s:textfield>

<s:textarea name="desc" label="Description*" key="desc" onmouseover="setDifference(this);"></s:textarea>

<s:submit align="center"></s:submit> <s:reset align="center"></s:reset>

</s:form>

</body>
</html> 
```

我应该在其中获取数据的我的 javabean 页面：

```
package abc.Model;

public class SetLeave {

    String leaveType;
    String name;
    String leaveNo;
    String fromDate;
    String toDate;
    String difference;
    String desc;

    public String getLeaveType() {
        return leaveType;
    }
    public void setLeaveType(String leaveType) {
        this.leaveType = leaveType;
    }
    public String getName() {
        System.out.println(name);
        return name;

    }
    public void setName(String name) {
        this.name = name;
    }
    public String getLeaveNo() {
        System.out.println(leaveNo);
        return leaveNo;
    }
    public void setLeaveNo(String leaveNo) {
        this.leaveNo = leaveNo;
    }
    public String getFromDate() {
        return fromDate;
    }
    public void setFromDate(String fromDate) {
        this.fromDate = fromDate;
    }
    public String getToDate() {
        return toDate;
    }
    public void setToDate(String toDate) {
        this.toDate = toDate;
    }
    public String getDifference() {
        return difference;
    }
    public void setDifference(String difference) {
        this.difference = difference;
    }
    public String getDesc() {
        return desc;
    }
    public void setDesc(String desc) {
        this.desc = desc;
    }
} 
```

我在一些获取空值的文本字段上使用 javascript 请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:40:08.670

```
<s:textfield name="difference" label="Duration" key="difference" id="difference" disabled="true"></s:textfield> 
```

在此字段中，您已禁用 =“true”，因此将发送到模型/Bean 的值显然将为空。

```
<s:textfield name="difference" label="Duration" key="difference" id="difference" disabled="true"></s:textfield>

<s:hidden name="difference"/> 
```

如果您想向您的 bean 发送值。如果您仍然收到错误，请回复。

好的，完成并回复..

```
<table id="name" style="display: none;">
<tr>
<td>Name</td>
<td><input type="text" name="name" id="name"></td>
</tr>
</table>

<table id="leaveNo" style="display: none;">
<tr>
<td>No Of Alloted Leaves</td>
<td><input type="text" name="leaveNo" id="leaveNo"></td>
</tr>
</table> 
```

**在上述两种情况下，您对表和文本字段使用相同的 id，将表的 id 更改为 name1 和 leaveNo1 并尝试。我想这是唯一的问题。**

**您的解决方案在下面的代码中粘贴并享受。**

```
<s:textfield name="difference" label="Duration" key="difference" id="difference" readonly="readonly"></s:textfield> 
```

# php - 此连接语句如何产生此结果

> ID：11395014
> 
> 赞同：1
> 
> 时间：2012-07-09T12:28:33.273
> 
> 标签：php, mysql, sql, join

嗨，我正在学习`MySQL`加入。从教程中我得到了两张桌子。

![在此处输入图像描述](../Images/6532333a13bbd7a930dee529fb69d4f4.png)

查询是

```
<?php
// Make a MySQL Connection
// Construct our join query
$query = "SELECT family.Position, food.Meal ".
 "FROM family, food ".
    "WHERE family.Position = food.Position";

$result = mysql_query($query) or die(mysql_error());

// Print out the contents of each row into a table 
while($row = mysql_fetch_array($result)){
    echo $row['Position']. " - ". $row['Meal'];
    echo "<br />";
}
?> 
```

结果是

![在此处输入图像描述](../Images/12ee996cccdf5706ff3e61c122030b09.png)

*我的问题是，这个选择逻辑是什么。*如果您从获取`family`餐桌位置开始并在食物表中搜索它，我认为结果应该是

```
Dad|steak
Dad|Tacos
Mom|Salad 
```

但结果不同。搜索的工作方式和结果集的组织方式。请帮助我了解这是如何工作的，在此先感谢您......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:05:20.537

我会重写这个查询：

```
SELECT
   family.Position, food.Meal
FROM
   family
   JOIN food USING (Position) 
```

您可以使用条件`WHERE`子句`JOIN`——MySQL 会以任何一种方式对其进行优化，但通常首选使用`ON`/ `USING`for`JOIN`条件的语法。您也可以在`NATURAL JOIN`此处使用 a，但这可能不安全。

至于您的具体问题，我不知道为什么 MySQL 以一种或另一种方式排序。我唯一可以告诉您的是，如果您不指定`ORDER BY`子句，则不应依赖结果的顺序。您应该将订单视为随机的。似乎它是按`Meal`而不是订购`Position`。我不知道为什么会这样，但即使*这样*也可能不可靠。当订单很重要时，请使用`ORDER BY`.

# r - 从R中的多个样本中寻求平均值和SD

> ID：11395016
> 
> 赞同：2
> 
> 时间：2012-07-09T12:28:37.127
> 
> 标签：r, sample, mean

我想从正态分布中生成 25 个正态样本。我希望以一种智能的方式做到这一点，我没有将所有这些样本作为单独的实体。

这是我到目前为止的那部分代码

```
data <- replicate(25, rnorm(100)) 
```

到目前为止，这就是它生成 100 个样本的 25 个样本。当提取数据的平均值和标准差时，显然这些值是针对整个数据集的。

所以我的问题是我如何分解这个并确定`mean`25`sd`个样本中的每一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:57:16.463

一个不错的替代方法`apply(x, 2, mean)`是`colMeans(x)`，但没有这样的替代方法`apply(x, 2, sd)`:( 但是您也可以使用 apply 函数一次性获得均值和标准差，让我们这样做：

```
set.seed(42)
x <- replicate(25, rnorm(100))

Stats <- t(apply(x, 2, function(x) c(Mean=mean(x), Sd=sd(x))))
Stats
              Mean        Sd
 [1,]  0.032514816 1.0413570
 [2,] -0.087483707 0.9041735
 [3,] -0.010368172 1.0170123
 [4,]  0.032936464 0.8761978
 [5,] -0.117830506 1.0199916
 [6,]  0.002363510 1.0633145
 [7,] -0.086747228 0.9755756
 [8,] -0.169291497 0.8830939
 [9,]  0.061457015 1.0377577
[10,]  0.084205039 1.1804565
[11,] -0.129164759 1.0080920
[12,]  0.039991367 0.9814254
[13,]  0.078980115 0.9719501
[14,] -0.148572682 0.9125126
[15,] -0.048566771 0.9562642
[16,]  0.006789862 1.0347380
[17,]  0.274102604 1.0212837
[18,] -0.113169899 0.9988576
[19,]  0.151418057 0.9830082
[20,] -0.164987838 0.9348188
[21,] -0.035644377 1.0214245
[22,] -0.041569005 1.0159495
[23,]  0.051384229 1.0944096
[24,]  0.073521001 0.9084400
[25,]  0.021893835 0.9438906 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:37:37.953

用于`apply`清除摘要。

```
set.seed(42)
x <- replicate(25, rnorm(100)) 
```

由于您的数据是按列排列的矩阵，因此您需要将`apply`函数转换为第二维。

```
apply(x, 2, mean)
 [1]  0.032514816 -0.087483707 -0.010368172  0.032936464
 [5] -0.117830506  0.002363510 -0.086747228 -0.169291497
 [9]  0.061457015  0.084205039 -0.129164759  0.039991367
[13]  0.078980115 -0.148572682 -0.048566771  0.006789862
[17]  0.274102604 -0.113169899  0.151418057 -0.164987838
[21] -0.035644377 -0.041569005  0.051384229  0.073521001
[25]  0.021893835

apply(x, 2, sd)
 [1] 1.0413570 0.9041735 1.0170123 0.8761978 1.0199916
 [6] 1.0633145 0.9755756 0.8830939 1.0377577 1.1804565
[11] 1.0080920 0.9814254 0.9719501 0.9125126 0.9562642
[16] 1.0347380 1.0212837 0.9988576 0.9830082 0.9348188
[21] 1.0214245 1.0159495 1.0944096 0.9084400 0.9438906 
```

# iphone - 如何以特定距离在半径内旋转精灵

> ID：11395017
> 
> 赞同：-1
> 
> 时间：2012-07-09T12:28:38.317
> 
> 标签：iphone, xcode, cocos2d-iphone

嗨朋友我正在实现 cocos2d 游戏。因为我想在给定半径内旋转具有特定距离的 ccsprite。我正在实施这个。我想顺时针旋转精灵，然后逆时针旋转一段时间。对此有何改变。

```
self.isAccelerometerEnabled = NO;
        TimerFlag = 0;
        float AngleTick = 0.1;
        currentAngle -= AngleTick;
        circleCenter.x = 280;
        circleCenter.y = 160;
        newTankFish.position = ccpAdd(ccpMult(ccpForAngle(currentAngle), 120), circleCenter);
        newTankFish.rotation = currentAngle * -180 / M_PI;
        id tankFishMove  = [CCRepeat actionWithDuration:3.0];
        id TankPowerDone = [CCCallFunc actionWithTarget:self selector:@selector(TankPowerOver)];
        [newTankFish runAction:[CCSequence actions:tankFishMove, TankPowerDone, nil]];
        [CoinProjectiles addObject:newTankFish]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:58:35.310

```
// For Clockwise Rotation

    float AngleTick = 0.1;
    //currentAngle -= AngleTick;
    currentAngle = currentAngle+AngleTick;

    circleCenter.x = 120;
    circleCenter.y = 140;
    CircleSprite.position = ccpAdd(ccpMult(ccpForAngle(currentAngle), 0), circleCenter);
    CircleSprite.rotation = currentAngle * -180 / M_PI;
    id CircleSpriteMove  = [CCRepeat actionWithDuration:0.1];
    [CircleSprite runAction:CircleSpriteMove];

// For Anti Clockwise Rotation
    float AngleTick1 = 0.1;
    currentAngle1 -= AngleTick1;
    //currentAngle = currentAngle+AngleTick;
    circleCenter1.x = 360;
    circleCenter1.y = 180;
    CircleSprite1.position = ccpAdd(ccpMult(ccpForAngle(currentAngle1), 0), circleCenter1);
    CircleSprite1.rotation = currentAngle1 * -180 / M_PI;
    id CircleSpriteMove1  = [CCRepeat actionWithDuration:0.1];
    [CircleSprite1 runAction:CircleSpriteMove1]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T13:29:48.593

如果您添加一个精灵 (B) 作为另一个精灵 (A) 的子对象，并给 B 一个 100,0 的位置，然后在其上运行 CCRotateBy 操作（360 度），您会发现它完全符合您的要求。

这适用于节点的任何子节点，它基本上使用父节点作为旋转的中心点，而位置决定了旋转的半径。

您不需要在其他答案中使用任何计算，但当然可以。这只是更多的代码。

# android - 拖放可重新排列的 ListView

> ID：11395020
> 
> 赞同：0
> 
> 时间：2012-07-09T12:28:44.210
> 
> 标签：android, listview

我正在使用以下链接制作可重新排列的列表视图 [https://github.com/bauerca/drag-sort-listview](https://github.com/bauerca/drag-sort-listview) 请让我知道如何删除右侧的处理程序并通过单击并拖动来重新排列列表视图列表项本身...我一直在尝试几种策略，但找不到解决方案...提前感谢您宝贵的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:09:10.873

由于长按开始拖动是一种非常常见的技术，我会说设置以下 xml attrs：

```
dslv:drag_start_mode="onLongPress"
dslv:drag_handle_id="@id/my_list_item" 
```

其中“my_list_item”是`android:id`列表项布局的（顶级）视图。

# javascript - Google Analytics cookie 未加载到 IF 语句中

> ID：11395022
> 
> 赞同：0
> 
> 时间：2012-07-09T12:28:46.913
> 
> 标签：javascript, google-analytics

我有以下代码：

```
var selectedLevel = true;
if (selectedLevel === true) {
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));

    try {
        var pageTracker = _gat._getTracker("UA-XXXXXXX-XX"); // <-- The ID _is_ here
        pageTracker._trackPageview();
    } catch(err) {}
} 
```

我希望看到在 FireCookie 中设置 cookie，但我什么也没看到。不过，根据我的 Firebug NET 选项卡，`ga.js`它似乎正在加载。

有没有人知道为什么 cookie 不会被设置的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:37:16.817

我怀疑因为 try/catch 块在同一个脚本中，所以获取跟踪器的行在其他脚本加载之前执行，并且由于`_gat`未定义而失败。[尝试像 Google文档](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=55488)建议的那样将它放在自己的脚本块中。

```
<script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
    try{ 
        var pageTracker = _gat._getTracker("UA-xxxxxx-x");
        pageTracker._trackPageview();
    } catch(err) {} 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T08:54:46.213

（另一种可能性）有时会发生这种情况，因为ga.js*尚未***加载**。您可以

## 添加延迟：

```
<script type="text/javascript">
    var pageTracker;

    setTimeout('startGA();', 500);
    function startGA()
    {
        pageTracker = _gat._createTracker("UA-XXXXXX-X");
        pageTracker._trackPageview(); 
    }
</script> 
```

---[来自此链接的上述代码片段的学分](http://www.charlienco.ca/updates/_gat-is-undefined-new-analytics-code)

## 或者更好的方法：

将是定义pagetracker onload

```
<script type="text/javascript">
    var pageTracker;

    $(window).load(function(){ 
        pageTracker = _gat._createTracker("UA-XXXXXX-X");       
        pageTracker._trackPageview(); 
    });
</script> 
```

## 检查是否加载了 ga.js

您也可以这样做（而不是 try catch）：

```
<script type="text/javascript"> 
    var pageTracker;

    if (typeof(_gat) == "object") { 
        pageTracker = _gat._createTracker("UA-XXXXXXX-X"); 
        pageTracker._trackPageview(); 
    } 
</script> 
```

请注意 - 我建议 var pageTracker 的声明在 try-catch 块或 if/else 语句之外。希望这可以帮助某人。

# powershell - 如何在 Powershell 脚本中调用转换所有模板

> ID：11395029
> 
> 赞同：1
> 
> 时间：2012-07-09T12:29:41.917
> 
> 标签：powershell, visual-studio-2010

我有一个代码生成工具，它位于 PowerShell 脚本文件（.ps1 文件）中，我通过包管理器控制台调用它。在代码生成自动化结束时，我需要单击解决方案资源管理器中的“转换所有模板”按钮。我想知道是否有办法通过 PowerShell 脚本来虚拟化它？

注意：我也无法通过录制宏找到相关代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:50:53.393

我找到了一个来自这里的简单解决方案：[MSDN 论坛](http://social.msdn.microsoft.com/forums/en-US/vsx/thread/40fdebb3-83ce-4794-9eb0-bc0da7c87f39/)

```
[Reflection.Assembly]::Load("EnvDTE")                                               
$DTE.ExecuteCommand("TextTransformation.TransformAllTemplates") 
```

上述代码可以通过 PS1 文件或在 NuGet 控制台中执行。正如我测试的那样，它在 VS 2010 SP1 中工作。

# c# - DDD 工厂实体值对象

> ID：11395031
> 
> 赞同：6
> 
> 时间：2012-07-09T12:29:53.107
> 
> 标签：c#, domain-driven-design, factory, onion-architecture

在我当前的项目中，我越来越多地采用 DDD / Onion 架构。我仍然不清楚的许多事情之一是应该有多少封装。用一个具体的例子更容易解释。

**例子**

```
namespace MyProject.Model
{
    public class ComplexEntity
    {
        private int _id;
        public int Id { get {return _id;} }
        public ValueObjectA ValueA {get; set;}
        public bool IsBool {get; set;}
        public ComplexEntity(ValueObjectA a, bool isBool)
        {
            // Do some validation first
            ValueA = a;
            ValueB = b;
            IsBool = isBool;
        }
    }

    public class ValueObjectA
    {
        public bool IsBoolA {get; private set;}
        public bool IsBoolB {get; private set;}
        public ValueObjectA(bool a, bool b)
        {
            IsBoolA = a;
            IsBoolB = b;
        }
    }

    public Interface IComplextEntityFactory
    {
        // Option 1
        ComplexEntity Create(
            ValueObjectA a,
            bool IsBool);

        // Option 2
        ComplexEntity Create(
            bool valueABool a,
            bool valueBBool b,
            bool isBool);
    }
} 
```

**问题**

对于一个实体的工厂，你，

1.  期望调用者为您构造值对象并使用它来初始化 ComplexEntity？
2.  基本上将 CLR 基本类型传递给工厂，然后构造构成实体的每个 ValueObject？

我倾向于选项 2，但我似乎无法找到支持它的文献。

**编辑 1**

老实说，我仍然没有更清楚。聚合根呢？

当我的实体引用其他实体时，例如下面。

1.  我应该有一个`IComplexEntityFactory`，`ILessComplexEntityFactory`？或者只是`IComplexEntityAggregateFactory`创建 LessComplexEntity 并实例化 ComplexEntity ？
2.  在 AggregateFactory 解决方案的情况下，如果传递给工厂的 LessComplexEntity 属性对应于现有的 LessComplexEntity，我该怎么办？我是否从存储库中检索和重用它？还是我向调用者返回错误？
3.  AggregateFactory 的方法签名是什么？会不会`(ValueObject a, ValueObject b)`，或者`(ValueObject value, LessCompelxEntity entity)`

    公共类 ComplexEntity { 私有只读 int _id; 公共 int Id { 获取 { 返回 _id;} }

    ```
    public ValueObject Value {get; set;}
    public LessComplexEntity Entity {get; set;}

    public ComplexEntity(int id, ValueObject value, LessComplexEntity entity)
    {
    } 
    ```

    }

    公共类 LessComplexEntity { 私有只读 int _id; public int Id { get {return _id;} } public ValueObject Value {get; set;} public LessComplexEntity（int id，ValuObject 值）{ } }

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T14:26:04.427

我会选择选项1。

*   向所有人明确表明您需要一个 ValueObjectA 来构建一个 ComplexEntity。当您在某处看到使用的方法时，更具可读性，更少头疼。

*   如果 ValueObjectA 发生变化，您只需要在一个地方（工厂的调用者）修改代码，而不是更改 Create() 的签名 + 调整工厂内的值对象创建。

*   工厂的 Create() 方法的参数越少越不冗长且可读性更强。

*   在单元测试中，它为您提供了更多选项来注入所需的 ValueObjectA。如果您将 ValueObjectA 的创建完全隐藏在工厂中，则在测试方面您无能为力。

**[编辑]**

目前尚不清楚聚合根和工厂的真正问题是什么，但您不应将检索/再水化现有对象的职责与创建对象的职责混为一谈。

我认为工厂的工作是从较小的部分*组装*一个新对象作为一般规则（无论它们是原始类型、值对象、实体......）

应向工厂提供所有这些部件，从某处*取回或再水化它们不是其职责。*你可以把它留给工厂的来电者。它将使工厂更具[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)并与更少的类（存储库等）耦合

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T14:01:45.230

我更喜欢选项#1，因为它会减少工厂方法所需的参数数量。但我的建议是仅在相关聚合需要创建策略时才使用工厂。

在您的一条评论中，您说：

> “..但是我不明白工厂的好处。它所做的只是调用 ComplexEntity 的构造函数，而不是创建构成它的所有子组件。”

工厂的工作是通过查看传递给它的数据来决定如何实例化聚合。根据我的经验，需要这样做的常见场景是使用了继承/多态性。例如，假设您有一个抽象 Account 类，它有两个子类：SavingsAccount 和 CurrentAccount。工厂的工作是在给定一些数据的情况下决定实例化哪一个。

工厂的另一个潜在好处是你的表现力。如果聚合可以以多种方式实例化（即不同的参数），那么使用工厂上的方法名称可以比重载的构造函数更好地表达。

正如我所说，我的建议是不要为每个聚合创建工厂，除非出于上述原因之一。否则，正如您所指出的，它只是调用构造函数并传递给它的相同参数的一行。

# java - 在 ListView 中显示下载图像的最高效方式？

> ID：11395032
> 
> 赞同：0
> 
> 时间：2012-07-09T12:29:56.100
> 
> 标签：java, android, performance

我目前正在使用自定义适配器在 ListView 中每行显示一个 ImageView 和两个 TextView。

在适配器的覆盖 getView 中，我有以下 ImageView 代码：

```
final ImageView img = (ImageView) view.findViewById(R.id.rowImg);

new Thread(new Runnable() {
    public void run() {
        final BitmapDrawable b = downloadAvatar(urlToDownload);
        img.post(new Runnable() {
            public void run() {
                img.setImageDrawable(b);
            }
        });
    }
}).start(); 
```

downloadAvatar 方法基本上只使用了AndroidHttpClient 和HttpGet。上述方法有效，但我的问题是如何优化它？滚动不连贯；我知道它可能会在每次进入可视区域时调用 getView() 并下载图像。有小费吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:44:40.887

请参阅下面的延迟加载列表视图的源链接和通用图像加载器示例，它可能会对您有所帮助。

[延迟加载列表视图](https://github.com/thest1/LazyList)

[Android 通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:45:40.760

这是一个选项：

内部`getView`检查您是否下载了当前图像。如果尚未下载 - 下载并将其存储在您选择的目录中。如果它存在于该目录中 - 只需加载它。

根据图像大小和数量，您还可以制作某种缓存来存储可见（可能是可见上方和下方最接近的不可见）项目所需的图像对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:36:32.760

在您的情况下，您需要执行所谓的“图像延迟加载”，一旦下载就会缓存这些图像。看看这个：[ListView 中图像的延迟加载](https://stackoverflow.com/questions/541966/android-how-do-i-do-a-lazy-load-of-images-in-listview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:36:55.500

我建议使用[`ignition-library`](https://github.com/mttkay/ignition)具有名为 的组件[`RemoteImageView`](https://github.com/mttkay/ignition/blob/master/ignition-core/ignition-core-lib/src/com/github/ignition/core/widgets/RemoteImageView.java)，它将异步加载 url 图像，并且该库还将保留这些图像的缓存，因此每次重新创建`ListView`行时都不会下载它们。

我使用它，我发现它非常有用且强大。

# php - 将网站上的活动更新发布到用户的 Facebook 墙或基于 php 的网站页面或墙

> ID：11395033
> 
> 赞同：-5
> 
> 时间：2012-07-09T12:29:58.677
> 
> 标签：php, facebook, facebook-graph-api

嗨，朋友们，我正在开发一个网站，在该网站上，我需要在他的墙上或我的网站墙或页面上显示诸如回答用户的问题之类的活动由他创建的帖子，但我不知道该怎么做。

我用谷歌搜索了很多。

并引用了这个链接

[使用 Facebook API PHP 在某人的墙上发帖](https://stackoverflow.com/questions/9133170/post-on-someones-wall-using-facebook-api-php)

[http://www.9lessons.info/2011/09/working-with-facebook-sdk-permissions.html](http://www.9lessons.info/2011/09/working-with-facebook-sdk-permissions.html)

[通过 Facebook 的 graph api 发布状态](https://stackoverflow.com/questions/2850774/posting-status-via-facebooks-graph-api)

我下载了 facebook sdk 并创建了一个应用程序，但它无法正常工作，因为我的网站没有启动。

我尝试了大多数示例，但由于我没有应用程序并且我对 fb 的了解有限，因此我受到了限制。

我想知道我是否有可能

1.  即使他没有给我任何应用程序的许可，也可以在用户墙上创建帖子。

2.  如果用户通过 fb 注册并授予我在墙上发帖的权限。如果你认为我有一个测试应用程序，如何在他的墙上发帖。

3.  如果我想用每天前十的帖子更新我的公司网站。我怎样才能把它贴在我的墙上或 fb 页面上。（我需要一个应用程序吗？）

任何帮助将不胜感激 。

因为我不确定我需要什么 php sdk、graph api、facebook-connect 等等。

那里的文档太混乱了，他们一直在改变那里的 api，所以旧的链接不起作用..

任何人都可以指导我。或链接我一个关于如何逐步实现它的详细说明，

所以我可以完成这项任务。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T11:50:40.340

1) 未经他人许可，不得在他人墙上发帖。您可以使用 FB.ui 方法提示他们，但无需他们授予权限[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

2）当您确实有一个站点和一个应用程序时，用户必须授予适当的权限，然后您可以使用此处的信息[https://developers.facebook.com/docs/reference/php/facebook-api/](https://developers.facebook.com/docs/reference/php/facebook-api/)如果你向下滚动有一个标题为“使用 Graph API 将链接发布到用户墙”的部分

3) 你如何衡量“前 10 名”？如果这些无论如何都在您的网站上，那么您应该知道显示它们需要什么 php 代码。要将它们发布到您在 FB 上的页面，您需要使用页面访问令牌并作为您的页面进行身份验证（您需要向您的帐户授予“manage_pages”权限），然后您可以发布您的页面[https://developers .facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/) 另一种方法是为页面创建一个自定义选项卡，该选项卡调用您自己的网站后端并显示其中的前 10 个帖子。可以在此处找到有关页面选项卡的信息[https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/). 现在，如果您有 php 知识，您应该能够从这些链接中弄清楚。如果您不这样做，那么恐怕您需要提出更具体的问题并阅读一些书籍或教程，否则这个问题将过于开放

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T12:25:07.853

如果您使用[JavaSriptSDK](https://developers.facebook.com/docs/reference/javascript/FB.ui/)，您可以在没有任何权限的情况下在朋友墙上发帖，但在这种情况下，您无法控制他发布的消息，除非附加到 url 的链接并配置图像和标题。

```
FB.ui(
  {
    method: 'feed',
    to:'the Facebook ID of the person you wanna send',
    name: 'Facebook Dialogs',
    link: 'http://emplido.com',
    picture: 'http://fbrell.com/f8.jpg',
    caption: 'Reference Documentation',
    description: 'Dialogs provide a simple, consistent interface for applications to interface with users.'
  },
  function(response) {
    if (response && response.post_id) {
      alert('Post was published.');
    } else {
      alert('Post was not published.');
    }
  }
); 
```

为此，您将需要一个 facebook 应用程序。确保`link`指向您的 facebook 应用程序的域，定义在`developers.facebook.com`.

# php - 带有json的CKEditor不传递内容

> ID：11395040
> 
> 赞同：1
> 
> 时间：2012-07-09T12:30:44.917
> 
> 标签：php, ajax, json, ckeditor

我正在尝试提交表单而不使用 json 离开页面。

但是，下面的方法忽略了我在CKEditor中输入的数据。

任何想法*（并随时更正我的术语）*？

```
<script type="text/javascript">

$(document).ready( function() {
    $("#addStory input[type=submit]").click(function(e) {
        e.preventDefault();
        $.post('_posteddata.php', $("#addStory").serialize(), function(result) {
            alert(result.adminList);
        }, "json");
    });
});

</script>

<form name="addStory" action="" method="post" id="addStory">
    <label for="story_story">Story: </label><textarea id="story_story" name="story_story">&lt;p&gt;&lt;/p&gt;</textarea>

    <?php
    // Include the CKEditor class.
    include("ckeditor/ckeditor.php");

    // Create a class instance.
    $CKEditor = new CKEditor();

    $CKEditor->basePath = '/ckeditor/'

    $CKEditor->replace("story_story");

    ?>

    <input type="submit" value="Submit" />

</form> 
```

_posteddata.php：

```
include 'connection.php';

function check_input($value, $quoteIt)
  {
      // Stripslashes
      if (get_magic_quotes_gpc())
      {
          $value = stripslashes($value);
      }
      // Quote if not a number
      if (is_null($value) || $value=="") {
         $value = 'NULL';
      } else if (!is_numeric($value) && $quoteIt == 1) {
         $value = "'" . mysql_real_escape_string($value) . "'";
      }

      return $value;
  }

// CKEDITOR STUFF FOR STORY_STORY
if (isset($_POST)) {
    $postArray = &$_POST;
}

foreach ( $postArray as $sForm => $value )
{

    if($sForm == "story_story") {
        $story_story = check_input($value, 1);  
    }
}

$query = "INSERT INTO story_table (story) VALUES ($story_story)";

mysql_query($query) or die(mysql_error() . $query); 

$return = array();
$return['adminList'] = "New story added with ID: " . mysql_insert_id();
header('application/json');
echo json_encode($return);

mysql_close(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:20:46.050

在这种情况下，您必须强制 CKEditor[更新 textarea 的内容](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#updateElement)

所以你的功能会是这样的：

```
$(document).ready( function() {
    $("#addStory input[type=submit]").click(function(e) {
        e.preventDefault();

        CKEDITOR.instances.story_story.updateElement(); // Update the textarea

        $.post('_posteddata.php', $("#addStory").serialize(), function(result) {
            alert(result.adminList);
        }, "json");
    });
}); 
```

# sql-server-2008-r2 - 从 CLR 触发器中提交 WebRequest

> ID：11395045
> 
> 赞同：1
> 
> 时间：2012-07-09T12:31:05.643
> 
> 标签：sql-server-2008-r2, real-time, sqlclr, data-caching

我刚刚实现了一个原型解决方案，通过将 CLR 触发器分配给表来实时更新我的​​缓存服务器，这样每当更新某个列时，从触发器调用的 URL 都会使用正确的数据更新缓存服务器。

它工作正常，代码如下：

```
[Microsoft.SqlServer.Server.SqlTrigger(Name = "AdStatusChanged", Target = "Ads", Event = "FOR UPDATE")]
public static void AdStatusChanged()
{
    SqlTriggerContext triggContext = SqlContext.TriggerContext;
    int adID = 0, adStatusID_Old = 0, adStatusID_New = 0;

if (triggContext.TriggerAction == TriggerAction.Update)
{
    using (SqlConnection conn = new SqlConnection("context connection=true"))
    {
        conn.Open();
        SqlCommand sqlComm = new SqlCommand();
        SqlPipe sqlP = SqlContext.Pipe;

        sqlComm.Connection = conn;
        sqlComm.CommandText = "SELECT AdID, AdStatusID from INSERTED";

        SqlDataReader reader = sqlComm.ExecuteReader();

        if (reader.Read())
        {
            adID = reader.GetInt32(0);
            adStatusID_New = reader.GetInt32(1);
        }

        reader.Close();

        sqlComm.CommandText = "SELECT AdID, AdStatusID from DELETED WHERE AdID = " + adID;

        reader = sqlComm.ExecuteReader();

        if (reader.Read())
        {
            adID = reader.GetInt32(0);
            adStatusID_Old = reader.GetInt32(1);
        }
    }

    if (adID == 0 || adStatusID_New == adStatusID_Old)
    {
        // Check could be more thorough !
        return;
    }

    WebResponse httpResponse = null;

    try
    {
        string apiURL = string.Format("{0}/{1}", "http://localhost:14003/Home", "UpdateAdStatus?adID=" + adID + "&adStatusID=" + adStatusID_New);

        var httpWebRequest = (HttpWebRequest)WebRequest.Create(apiURL);
        httpWebRequest.Method = "GET";

        httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();

        // check for successful response
    }
    catch (Exception ex)
    {
        Log("WebRequest from within SQL Server failed ! " + ex.Message);
    }
    finally
    {
        if (httpResponse != null)
        {
            httpResponse.Close();
        }
    }
} 
```

}

关于性能、死锁、sql 崩溃或其他可能引起关注的领域，我想对这种方法的“缺点”有一些专家/经验丰富的看法。

有没有人尝试过这个（我相信很多人必须有），结果如何？一个成功的实现，还是您恢复到其他方法或实时更新缓存？

# plugins - 如何将基于表单的操作（如“保存”）绑定到 Confluence 中 xwork 中提到的指定 Java 类

> ID：11395056
> 
> 赞同：1
> 
> 时间：2012-07-09T12:31:36.387
> 
> 标签：plugins, customization, velocity, confluence

多亏了您的帮助，我在定制方面取得了一些重大进展，并期待着同样的进步。我在“高级”选项卡中创建了自定义选项卡，现在看起来像[这样](http://imageshack.us/f/809/newpageg.png/)。我已经能够添加一个文本字段以及一个“保存”按钮。我实际上遵循了“编辑空间详细信息”选项，并采用了两个表单元素来实现输出。这就是我的虚拟机现在的样子。

```
 ##requireResource("confluence.web.resources:space-admin")
 <html>
   <head>
       <title>Freeway Project Creation</title>
      <meta name="decorator" content="atl.general" />   
   </head>

    <content tag="key">$action.space.key</content>

  <body>    

   #applyDecorator("root")
     #decoratorParam("helper" $action.helper)
     #decoratorParam("context" "space-administration")
     #decoratorParam("mode" "view-space-administration")

    #applyDecorator ("root")
     #decoratorParam ("context" "spaceadminpanel")
     #decoratorParam ("selection" "add-fpc-label-action-web-ui")
     #decoratorParam ("title" $action.getText("action.name"))
     #decoratorParam ("selectedTab" "admin")
     #decoratorParam("helper" $action.helper) 

      <div >
            <table width="95%" border=0 cellspacing=0 cellpadding=5>
              <form name="editspace" method="POST" >

        #bodytag( "TextField" "label='space-name'" "name='name'" "size=40" )
        #param ("labelwidth" "100")
        #param ("tdcolor" "f0f0f0")
        #end

            <tr>
                <td colspan="2" align="center">
                  #tag( "Submit" "name='confirm'" "value='update.name'" "theme='notable'" )
                #tag( "Submit" "name='cancel'" "value='cancel.name'" "theme='notable'" )
               </td>
             </tr>

        </form>
     </table>
  </div>

    #end
   #end    
  </body>
 </html> 
```

我想了解这种与我的 JAVA 类的交互将如何产生类似的输出。例如：我将在名称的文本框中输入名称并点击保存，在结果页面上它必须显示输入的名称。

到目前为止，我指定的 java 类看起来像这样。

```
 package com.atlassian.myorg;

 import com.atlassian.confluence.core.ConfluenceActionSupport;
 import com.atlassian.confluence.pages.AbstractPage;
 import com.atlassian.confluence.pages.actions.PageAware;
 import com.opensymphony.xwork.Action;

 /**
   * The simplest action possible
 */
 public class FreewayProjectAction extends ConfluenceActionSupport 
  {
     @Override
      public String execute() throws Exception
   {
       return Action.SUCCESS;
  }

 } 
```

所以我有3个问题：

1.  当我将鼠标悬停在“保存”按钮上时，“编辑空间详细信息”会显示以下 URL“http://localhost:1990/confluence/spaces/doeditspace.action?key=LBTEST”。我假设它的管理 Java 类是 EditSpaceDetails。那么当我们尝试保存空间的编辑操作时，该类中的 doEdit() 方法（请参见[此处）是否生效？](http://imageshack.us/f/542/decompdoedit.png/)我可以查看专门用于此编辑空间详细信息操作的映射的 xml 吗？我的假设是否正确？

2.  为了拥有我之前提到的这样一个功能，即显示在我的自定义页面中输入的名称，如上所述，我的 Java 类中需要进行哪些更改。

3.  在我刚刚自定义的页面中，有文本框，标签是 'Name' 。我应该使用不同的 xml 以便我可以提供像“项目名称”这样的自定义标签吗？

请给我同样的建议。

谢谢安吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:54:43.213

回答您的第一个问题 - 如果您查看*confluence-core/confluence/src/etc/java/xwork.xml* ，您将能够更深入地了解 xwork 操作映射、拦截器和可能的结果类型。

以下示例是您的“doeditspace.action”的相应映射：

```
<action name="doeditspace" class="com.atlassian.confluence.spaces.actions.EditSpaceAction" method="doEdit">
    <param name="RequireSecurityToken">true</param>
    <result name="error" type="velocity">/spaces/editspace.vm</result>
    <result name="input" type="velocity">/spaces/editspace.vm</result>
    <result name="cancel" type="redirect">viewspacedetails.action?key=${key}</result>
    <result name="success" type="redirect">viewspacedetails.action?key=${key}</result>
</action> 
```

*因此，如果您的执行*方法的返回值是*ActionType.SUCCESS*或“*成功*”，则请求将被重定向到*viewspacedetails*操作。

其他信息记录在 Atlassian 开发者网站中： [https ://developer.atlassian.com/display/CONFDEV/XWork-WebWork+Module](https://developer.atlassian.com/display/CONFDEV/XWork-WebWork+Module)

# python - Python - 将列表范围设置为特定值

> ID：11395057
> 
> 赞同：16
> 
> 时间：2012-07-09T12:31:39.203
> 
> 标签：python, list, python-2.7

我需要根据带有 bounds 的元组将列表的子集设置为特定值`(start,end)`。

目前我正在这样做：

```
indexes = range(bounds[0], bounds[1] + 1)
for i in indexes:
   my_list[i] = 'foo' 
```

这对我来说似乎不太好。有没有更蟒蛇的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-09T12:34:14.583

使用切片分配：

```
my_list[bounds[0]:bounds[1] + 1] = ['foo'] * ((bounds[1] + 1) - bounds[0]) 
```

或使用局部变量`+ 1`只添加一次：

```
lower, upper = bounds
upper += 1
my_list[lower:upper] = ['foo'] * (upper - lower) 
```

您可能希望将上限存储为不包含在内，以便更好地使用 python 并避免所有`+ 1`计数。

演示：

```
>>> my_list = range(10)
>>> bounds = (2, 5)
>>> my_list[bounds[0]:bounds[1] + 1] = ['foo'] * ((bounds[1] + 1) - bounds[0])
>>> my_list
[0, 1, 'foo', 'foo', 'foo', 'foo', 6, 7, 8, 9] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T12:35:41.060

```
>>> L = list("qwerty")
>>> L
['q', 'w', 'e', 'r', 't', 'y']
>>> L[2:4] = ["foo"] * (4-2)
>>> L
['q', 'w', 'foo', 'foo', 't', 'y'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:03:34.773

这是@MartijnPieters 使用的解决方案的更有效版本`itertools.repeat`

```
import itertools
lower, upper = bounds
upper += 1
my_list[lower:upper] = itertools.repeat('foo', (upper - lower)) 
```

# javascript - HTML5/JS：检查视频兼容性

> ID：11395060
> 
> 赞同：2
> 
> 时间：2012-07-09T12:31:44.783
> 
> 标签：javascript, html, html5-video

HTML5/JavaScript 是否提供检查是否`.mp4`可以检查类似视频的功能。然后我可以使用 webm 的后备，或者即使 webm 兼容性检查失败，也可以推送另一个替代方案。

是否有用于检查兼容性的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:35:56.630

我使用以下代码段：

```
/**
 * http://diveintohtml5.org/detect.html#video-formats
 */
function hasNativeMPEG4() {
      var v = document.createElement("video");

      if(!v.canPlayType) {
          return false;
      }
      // video/mp4; codecs="avc1.42E01E, mp4a.40.2"
      var result = v.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"');

      if(result == "no" || result === "") {
          return false;
      } else {
          // "maybe", "probably"
          return true;
      }
} 
```

...如果它不支持 MPEG4，则尝试提供 Flash 后备或 WebM。

# wpf - 在 UI 中使用数据模板时未触发 IDataErrorInfo 验证

> ID：11395066
> 
> 赞同：0
> 
> 时间：2012-07-09T12:31:53.797
> 
> 标签：wpf, datatemplate, idataerrorinfo

我正在尝试根据 ViewModel 公开的属性构建我的应用程序设置页面。我正在使用 .Net 4.0 和 MVVM。ViewModel 公开了“一组设置值”的单个集合。组表示相互依赖并属于域的逻辑组的属性。视图中的设置页面是使用 DataTemplate 创建的，如下所示：-

```
<DataTemplate x:Key="contentSettingGroup1">
  <TextBlock Text="{Binding Field1Description}" />
  <TextBox Text="{Binding Field1Value, Mode=TwoWay}" Grid.Column="2" />

  <TextBlock Text="{Binding Field2Description}"  />
  <TextBox Text="{Binding Field2Value, Mode=TwoWay}" Grid.Column="6" />
</DataTemplate>

<DataTemplate DataType="{x:Type vm:SettingGroup1}">
  <HeaderedContentControl Header="{Binding}" HeaderTemplate="{StaticResource titleArea}" Content="{Binding}" ContentTemplate="{StaticResource contentSettingGroup1}" />
</DataTemplate> 
```

然后我在 ViewModel 模块中有一个类来表示“设置组”，如下所示：

```
public class SettingGroup1 : INotifyPropertyChanged, IDataErrorInfo
{
    public double Field1value { get; private set; }
    public double Field2value { get; private set; }

    private double mField1;
    public double Field1value
    {
        get { return mField1; }
        set
        {
            if (mField1 != value)
            {
                mField1 = value;
                RaisePropertyChanged(() => Field1value);
            }
        }
    }

    private double mField2;
    public double Field2value
    {
        get { return mField2; }
        set
        {
            if (mField2 != value)
            {
                mField2 = value;
                RaisePropertyChanged(() => Field2value);
            }
        }
    }

    public string Error
    {
        get { return null; }
    }

    public string this[string property]
    {
        get
        {
            string errorMsg = null;
            switch (property)
            {
                case "Field1value":
                    if (Field1value < 0.0)
                    {
                        errorMsg = "The entered value of Field1 is invalid !";
                    }
                    if (Field1value < Field2value)
                    {
                        errorMsg = "The Field1 should be greater than Field2 !";
                    }
                    break;
            }
            return errorMsg;
        }
    }
} 
```

最后，viewModel 公开了这样一组设置的集合：

```
public ObservableCollection<object> Settings
        {
            get
            {
                var pageContents = new ObservableCollection<object>();
                var group1 = new SettingGroup1();
                group1.Field1.Description = "Description value 1";
                group1.Field1.Value = mValue1;
                group1.Field2.Description = "Description value 2";
                group1.Field2.Value = mValue2;
                pageContents.Add(group1);

                // add other groups of controls
                // ...
                return pageContents;
            }
        } 
```

***问题：调用了属性设置器，但无论何时更改 UI 值都不会调用数据验证***。我也尝试将 IDataErrorInfo 实现放在 ViewModel 类中，但没有一个有效。我必须使用一组设置，因为这些应用程序设置用于许多项目，我们不希望每个应用程序都有重复的 XAML。 **注意：** viewmodel 没有暴露 UI 绑定到的属性，例如 Field1Value，而是暴露一个封装的对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:39:24.753

您并没有告诉您的视图您绑定到的属性需要进行验证。在绑定中使用“ValidatesOnDataErrors = true”。

```
<TextBox Text="{Binding Field1Value, Mode=TwoWay, ValidatesOnDataErrors=True}" Grid.Column="2" /> 
```

# c# - 如何在 C# 中使用 get_IsConnectedToInternet

> ID：11395069
> 
> 赞同：1
> 
> 时间：2012-07-09T12:31:59.187
> 
> 标签：c#, .net

任何线索我们如何`get_IsConnectedToInternet`在 C# 下使用属性？

[http://msdn.microsoft.com/en-us/library/aa965311(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/aa965311(v=vs.85).aspx)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:43:42.070

这是调用的简化版本。
它告诉您是否有可用的互联网连接，而不是您是否已连接。

```
 [DllImport("wininet.dll")]
    private extern static bool InternetGetConnectedState( out int Description, int ReservedValue ) ;

    public static bool IsConnectedToInternet( )
    {
        try
        {
            int Desc;
            return InternetGetConnectedState(out Desc, 0);
        }
        catch 
        {
            return false;
        }
    } 
```

# html - 使用 onchange 事件验证文本字段？

> ID：11395070
> 
> 赞同：0
> 
> 时间：2012-07-09T12:32:00.310
> 
> 标签：html, onchange

我有一个 JSP 页面，里面有一个表单。

该表单有许多字段，包括文本字段、单选按钮等。

我有一个称为emp id 的特殊字段。这是一个文本字段。

此 emp id 的长度必须为 9 个字符。如果它小于或大于 9 个字符，那么我需要向用户发出警报消息，提示输入的 emp id 无效。

我编写了一个 javascript 方法来验证该字段的**onchange**事件触发该字段。

现在，我已将此字段设置为自动查找。因此，用户可以输入前几位数字，然后可以看到填充在 emp id 字段中的现有 emp id 列表。

这几乎就是自动查找的一般工作方式。

问题是当用户尝试从自动查找中选择 emp id 时，由于鼠标指针移出文本字段，因此会触发 onchange 事件。

这是错误的，我希望在从自动查找列表中选择值或手动输入值后触发事件。

请帮忙。

我正在使用 jquery 自动查找。

下面是我的 JSP 代码。

```
 <script>
    $(function() {

        function validateEmpId(empId) {
            empId = $.trim(empId);
            empId = empId.replace(/\s/g, "");
            if (empId.length != 9) {
                alert("Please enter a valid Emp Id.");
            }
        }

        $("#empId")
                .autocomplete(
                        {
                            source : function(request, response) {

                                $.ajax({
                                    url : "${findEmployeesByEmpIdIdUrl}"
                                            + "?t=" + getTimestamp()
                                            + "&hcAsOnDate=" + hcAsOnDate,
                                    datatype : "json",
                                    data : {
                                        dbPrismId : request.term
                                    },
                                    success : function(data) {
                                        response($.map(data, function(item) {
                                            return {
                                                label : item.dbPrismId,
                                                value : item.dbPrismId,
                                                id : item.id + "_"
                                                        + item.forecast
                                            };
                                        }));
                                    }
                                });
                            },
                            minLength : 1,
                            select : function(event, ui) {
                                var employeeId = ui.item.id;

                            },
                            open : function() {
                                $(this).removeClass("ui-corner-all").addClass(
                                        "ui-corner-top");
                            },
                            close : function() {
                                $(this).removeClass("ui-corner-top").addClass(
                                        "ui-corner-all");
                            }
                        });

    });
</script>

<form action="save" method="POST" name="employeeForm" id="employeeForm">
    <input type="text" name="empId" id="empId" maxlength="9" onchange="validateEmpId(this.value);" class="input-txt" />
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:50:52.863

尝试在您的 select 函数中执行此操作：

```
select: function(event, ui) {
    if (validateEmpId(ui.item.id)) self.location.href='?site=whatever&id=' + ui.item.id;
    else alert("Please enter a valid Emp Id.");  
}

function validateEmpId(empId) { 
    empId = $.trim(empId); 
    empId = empId.replace(/\s/g, ""); 
    if (empId.length != 9) return false;
    else return true;
} 
```

# javascript - 我们可以在javascript函数中调用类属性吗？

> ID：11395071
> 
> 赞同：-7
> 
> 时间：2012-07-09T12:32:05.813
> 
> 标签：javascript, jquery, html, css

通过使用 jquery，我想在单击输入字段后显示一个 ovwelay 窗口。并且该窗口必须有两个输入字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:47:51.917

> 该页面有一个输入字段，当我单击输入字段时，一个覆盖窗口必须带有另一个输入字段。

```
<input onclick='prompt("Another input","...");' /> 
```

# image - hadoop 上的并行图像处理

> ID：11395072
> 
> 赞同：0
> 
> 时间：2012-07-09T12:32:06.630
> 
> 标签：image, hadoop, tiles, deepzoom

我有几个巨大的 TIFF 图像（60,000x60,000 ~600MB）。使用 Hadoop，我想为每个图像创建一个瓷砖金字塔（deepzoom 格式）并将它们存储在 HDFS 上。理想情况下，我想实现每个节点只处理图像的一部分。

实现它的最佳方法是什么？在 HDFS 上存储小文件是否会产生很大的开销？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T11:57:01.897

你确定你需要hadoop吗？您的图像不是那么大。我使用了 6 年的桌面可以在 4 分钟内对更大的图像进行深度缩放：

```
$ tiffinfo huge.tif
TIFF Directory at offset 0x12d095e4 (315659748)
  Image Width: 91460 Image Length: 51866
  Tile Width: 512 Tile Length: 512
  Resolution: 10, 10 pixels/cm
  Bits/Sample: 8
  Compression Scheme: JPEG
...
$ time vips dzsave huge.tif x
real  3m40.841s
user  4m57.587s
sys   0m50.375s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:47:13.130

> 在 HDFS 上存储小文件是否会产生很大的开销？

查看 Cloudera 的这篇[文章](http://www.cloudera.com/blog/2009/02/the-small-files-problem/)。使用[HDFS federation](http://hadoop.apache.org/common/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/Federation.html)，大量文件的问题会有所缓解。

[http://www.cloudera.com/blog/2009/02/the-small-files-problem/](http://www.cloudera.com/blog/2009/02/the-small-files-problem/)

> 实现它的最佳方法是什么？

首先检查创建深度缩放格式的API是否可以应用于图像文件的一部分。如果必须一次处理完整的文件，那么 Hadoop 提供的优势并不大。默认情况下，HDFS 将文件拆分为 64 MB 的拆分，每个拆分都可以由映射器并行处理。

如果您是 Hadoop 新手，请查看基本[字数统计示例](http://hadoop.apache.org/common/docs/r0.20.1/mapred_tutorial.html)在 Hadoop 中的工作原理，并尝试根据您的要求做一些类似的事情。

# java - 什么加载了java系统类加载器？

> ID：11395074
> 
> 赞同：30
> 
> 时间：2012-07-09T12:32:07.797
> 
> 标签：java, classloader

我们知道我们可以覆盖 System[类加载器](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)：

```
java -Djava.system.class.loader=com.test.MyClassLoader xxx 
```

那么，既然`com.test.MyClassLoader`它本身就是一个类，那么它是由谁来加载的呢？

我们如何获得这个“元”类加载器的类文件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-09T13:38:21.117

`Bootstrap classloader`是 all 的父级，`classloaders`并在 JRE（rt.jar 和 i18n.jar）的 lib 目录中加载标准 JDK 类。所有 java.* 类都由 this 加载`classloader`。

`Extensions Classloader`是 Bootstrap 类加载器的直接子级。这个类加载器加载 JRE 的 lib\ext 目录中的类。

`System-Classpath classloader`是 Extensions 类加载器的直接子级。`CLASSPATH`它加载环境变量指定的类和jar

您可以尝试通过“java.system.class.loader”属性注入您的自定义类加载器（参见[ClassLoader#getSystemClassLoader](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getSystemClassLoader%28%29)）。

`Default System class loader`是 MyClassLoader 实例的父级，

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-07-09T12:38:50.403

来自 Javadoc 的[`ClassLoader.getSystemClassLoader`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getSystemClassLoader%28%29)：

> 如果在首次调用此方法时定义了系统属性“java.system.class.loader”，则该属性的值将被视为将作为系统类加载器返回的类的名称。**该类使用默认的系统类加载器加载**，并且必须定义一个公共构造函数，该构造函数采用一个 ClassLoader 类型的参数，该参数用作委托父级。

默认系统类加载器本身特定于 JVM 实现。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-08-24T23:59:43.377

## 语言：

> [§](https://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#getSystemClassLoader()) ..该属性的值被视为将作为系统类加载器返回的类的名称。该类是使用**默认的系统类加载器加载**的..

..因此，如果您的类加载器将 X 替换为系统类加载器，那么您的类加载器的父级将是 X，即默认的系统类加载器。

（X 的类型类似于[`sun.misc.Launcher$AppClassLoader`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/misc/Launcher.java#Launcher.AppClassLoader)。）

更多信息可在[docs.oracle.com - Java Launcher 如何查找类](http://docs.oracle.com/javase/7/docs/technotes/tools/findingclasses.html#skip2content)：

> Java 启动器 java 启动 Java 虚拟机。虚拟机按以下顺序搜索和加载类：
> 
> **引导类**- 组成 Java 平台的类，包括 rt.jar 中的类和其他几个重要的 jar 文件。
> 
> **扩展类**- 使用 Java 扩展机制的类。这些被捆绑为位于扩展目录中的 .jar 文件。
> 
> **用户类**- 由开发人员和第三方定义的不利用扩展机制的类。您可以使用命令行上的 -classpath 选项或使用 CLASSPATH 环境变量来识别这些类的位置。

## tsmr:

我们可以证明 X 确实是我们的父级[`Classloader`](http://docs.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html)：

```
/** run with -Djava.system.class.loader=MyCL to use this classloader */
public class MyCL extends ClassLoader {
    public MyCL(ClassLoader parent) { // this constructor must be public, else IllegalAccessException
        super(parent);
    }
} 
```

这是我们的主要代码：

```
public class Main {
    public static void main(String args[]) {
        System.out.println("getSystemClassLoader(): " + ClassLoader.getSystemClassLoader());

        ClassLoader cl = MyCL.class.getClassLoader();
        System.out.println("Classloader of MyCL: " + cl);

        Class type_of_cl = cl.getClass();
        System.out.println("..and its type: " + type_of_cl);

        ClassLoader cl_of_cl = class_of_cl.getClassLoader();
        System.out.println("Classloader of (Classloader of MyCL): " + cl_of_cl);
    }
} 
```

这是使用命令运行时的输出（在我的系统上）`java -Djava.system.class.loader=MyCL Main`（参见[Eclipse run config](https://i.stack.imgur.com/p0ohE.png)）：

> getSystemClassLoader(): MyCL@1888759 MyCL
> **的类加载器：sun.misc.Launcher$AppClassLoader@7fdcde**
> ..及其类型：sun.misc.Launcher$AppClassLoader
> 类的类加载器（MyCL 的类加载器）：null

我们可以看到`MyCL`的类加载器是[`sun.misc.Launcher$AppClassLoader`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/sun/misc/Launcher.java#249)，这是系统默认的类加载器。

（根据上面 Oracle 的其他引用中看到的语言，默认的系统类加载器也称为“**用户类**”的类加载器。为同一件事想出 2 个名称的 Oracle。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-04T14:09:46.123

一个合适的答案是：

这也澄清了最初的问题。

当你这样做时，

java -Djava.system.class.loader=com.test.MyClassLoader xxx

-D 选项用于在作为 JVM 启动的一部分加载的 java.lang.System 实例的 Properties 对象中设置系统属性。该选项仅更改内存中的属性。在下一次调用 XXX 类或其他一些类时，将再次加载作为 System 类一部分的默认属性。在这里，您已将 java.system.class.loader 属性设置为值 com.test.MyClassLoader。换句话说，您想用新的系统类加载器覆盖默认系统类加载器（也称为引导类加载器），以便调用您的类 XXX。作为 JVM 启动的一部分加载的默认系统类加载器将查找内存中的 java.system.class.loader 属性以查找覆盖系统类加载器的名称 - 如果设置（在您的情况下，

如果你写在你的 XXX 类的 main 方法中

```
 System.out.println(ClassLoader.getSystemClassLoader());
    System.out.println(MyClassLoader.class.getClassLoader()); 
```

你应该看到

```
 MyClassLoader 
```

（加载 XXX 的新系统类加载器）

```
 sun.misc.Launcher$AppClassLoader 
```

（加载新系统类加载器的默认系统类加载器）

# javascript - 从javascript中的值获取键的有效方法

> ID：11395075
> 
> 赞同：1
> 
> 时间：2012-07-09T12:32:07.797
> 
> 标签：javascript

首先，这个问题不是最有效的[方法来获取字典](https://stackoverflow.com/questions/6748226/most-efficient-method-to-get-key-for-a-value-in-a-dict)中值的键的最有效方法的副本，因为询问者询问了 python 并且还因为我想讨论下面给出的解决方案是否有意义以及是否可以这样做一个问题。

所以，让我们假设，我有以下数据结构：

```
{ 
   "one" : "1",
   "two" : "2",
   .
   .
   "hundred thousand" : "100000"
} 
```

现在，我希望能够获得针对特定值的键（假设我不会对不同的键具有相同的值）。一种解决方案是通过迭代数据来获取密钥，但是如果我们将数据结构化为：

```
 data = [
    { 
       "one" : "1",
       "two" : "2",
       .
       .
       "hundred thousand" : "100000"
    },
    { 
       "1" : "one",
       "2" : "two",
       .
       .
       "100000" : "hundred thousand"
    }
   ] 
```

所以，现在`data[0]."two"`可以用来获取两个值。但是，假设有一种情况，我知道值是 999，我想知道它的密钥，所以我会得到它的密钥，`data[1]."999"`即我将使用数据 [1] 中的反转数据。

此解决方案可能比遍历数据以找到正确的键更快。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:45:38.097

你是正确的，遍历所有键是低效的，你提出的保持反向查找散列的方法是我见过的用于解决这个问题的最常见的方法。当然，最好的解决方案是设计一个不需要执行反向查找的设计。

如果您存储少量键，并且不经常执行此查找，那么您可能对 O(n) 成本没问题（当然，在这种情况下，维护反向查找哈希也不会造成太大伤害） . 在另一个极端，如果您有数百万个键并且无法承受反向查找哈希的内存冲击，您可以使用诸如 Bloom Filters 之类的东西来帮助降低查找成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:44:16.253

您的问题没有通用解决方案，因为多个键可以具有相同的值。对于您的具体示例，如果您在谈论速度方面的效率，那么是的，您当前的反向映射解决方案是最快的方法（以存储反向映射的额外空间为代价）。

# actionscript-3 - 简单的模块加载器不起作用

> ID：11395077
> 
> 赞同：0
> 
> 时间：2012-07-09T12:32:26.800
> 
> 标签：actionscript-3, apache-flex, flex3

我正在使用 flex 中的模块加载器进行一些基本测试，但我无法让它工作。

我正在做的是以下内容：在我的主 .mxml 文件中，我在画布中添加了以下内容：

```
<mx:ModuleLoader id="tagModuleLoader" error="tagModuleLoader_errorHandler(event)" url="com/test/vincent/modules/ImageFramesModule.swf"/> 
```

在我的模块中，我有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Module xmlns:mx="http://www.adobe.com/2006/mxml" initialize="module1_initializeHandler(event)" layout="absolute" width="400" height="300">
    <mx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function module1_initializeHandler(event:FlexEvent):void
            {
                // TODO Auto-generated method stub
                trace("inside the module");
            }   
        ]]>
    </mx:Script>
    <mx:Label x="163" y="139" text="image frames"/>
</mx:Module> 
```

当我运行项目时，我总是收到以下错误：

```
Error #2035: URL niet gevonden. URL: app:/Library/WebServer/testProject/bin-debug/com/test/vincent/modules/ImageFramesModule.swf 
```

该模块是 swf 文件存在于该位置，但它仍然告诉我找不到它我必须提到，如果我运行模块 swf，即使我添加了面板或标签，我也只会得到一个空白的蓝屏管他呢。我还必须提到，我没有使用默认的“flex 4.5”sdk，而是“extension builder 3.4”sdk。

谁能告诉我为什么找不到我的 swf 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T18:05:23.210

更新您的框架，这是一个已修补的错误。;)

# facebook - Facebook 时间线墙贴无法正常工作

> ID：11395079
> 
> 赞同：1
> 
> 时间：2012-07-09T12:32:35.113
> 
> 标签：facebook, facebook-graph-api, sdk, facebook-php-sdk, facebook-wall

我使用 Facebook SDK Api [PHP] 在时间线墙上自动发布。

我创建了一个应用程序并请求了具有以下权限的 access_token：manage_pages、publish_stream、offline_access。

我现在使用 access_token 在版主所在的页面 (/PAGEID/feed) 上发布消息。

以下一切正常，并以 Facebook 页面的名称发布帖子：

```
$attachment = array(
    'access_token'      => $accessToken,
    'message'           => $description,
);

$res = $facebook->api('/PAGEID/feed', 'POST', $attachment); 
```

当我添加一些`link`+ `name`AND/OR`picture`时，它不会以墙帖的形式发布，而是以“其他人的最新消息”的形式发布，并以我自己的用户的名义发布：

```
$attachment = array(
    'access_token'      => $accessToken,
    'message'           => $description,
    'link'              => 'http://www.google.nl',
    'name'              => $description,
    'picture'           => $image,
); 
```

如何在墙上发布带有链接和图片的完整消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:09:48.520

如果我对您的理解正确，您正在尝试作为主页发布，但它显示为您发布的帖子。那是对的吗？

如果是这样，我认为您需要使用页面的访问令牌而不是您自己的访问令牌发布。查看[https://developers.facebook.com/docs/reference/api/page/](https://developers.facebook.com/docs/reference/api/page/)上名为“页面访问令牌”的部分。使用此处描述的技术获取页面的访问令牌后，您可以通过 $facebook->setAccessToken(.... access token value ...) 将其设置为 PHP SDK 使用的令牌。然后你可以发布帖子，它应该显示为由页面创建。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-26T21:05:43.593

这个问题困扰了我很久。一切似乎都设置正确，但是一旦我添加了链接，它就会以管理员而不是页面的身份发布。triangle_man 上面的答案解决了我的问题。使用 PHP sdk 时，我需要的特定代码行是：

$page_token = $facebook->api("/$page_id?fields=access_token");

# wpf - SizeToContent 调整大小的动画

> ID：11395081
> 
> 赞同：3
> 
> 时间：2012-07-09T12:32:43.993
> 
> 标签：wpf, .net-4.0, wpf-controls, sizetocontent

在 WPF 窗口中，我指定了 SizeToContent="WidthAndHeight"。我有许多面板堆叠在一起，我根据需要更改了其中的可见性（变为可见或折叠）。我的窗口会根据我设置为可见的面板自行调整大小。这里没有问题。

我的问题是调整大小，窗口会突然调整到最终大小。我想对此进行动画处理，以使调整大小平滑。我想在我的 XAML 文件中执行此操作。

有什么解决办法吗？？？PS - 我没有在窗口中设置任何 Width 或 Height 属性，我想限制自己这样做。

# r - R：删除向量中二进制元素的一部分

> ID：11395086
> 
> 赞同：2
> 
> 时间：2012-07-09T12:33:09.890
> 
> 标签：r, vector, subtraction

想象一下，你有一个像

```
a <- c(0,0,0,1,1,1) 
```

然后是另一个向量

```
b <- c(0,1,1) 
```

你将如何从向量“a”中删除“b”向量元素？

输出应如下所示：

```
a (0,0,1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:07:19.350

我最初的解释是 ttmaccer，但现在我看到你的评论，你的问题就简单多了。您只想通过 B 中的项目减少 A 中的项目数量，并且顺序无关紧要。

```
at <- table(a)
b2 <- c(b, 0, 1) #in case b contains no 1s or 0s
bt <- table(b2) - c(1,1)
abt <- at - bt
rep(0:1, abt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:59:41.463

有趣的问题：

一种天真的方法是

```
test<-gsub(paste(b,collapse="~"),"",paste(a,collapse="~"))
test<-gsub("~~","~",test)
test<-as.numeric(unlist(strsplit(test,"~"))) 
```

编辑：

例如，您可以更改采样方法

```
idx <- sample(length(a)) 
```

如果你想取一个大小为 3 的样本

```
a.sample<-a[idx[1:3]]
a.leftover<-a[-idx[1:3]] 
```

在这种情况下`b<-idx[1:3]`

# javascript - 有人可以帮助我使用 jQuery 倒计时格式吗？

> ID：11395088
> 
> 赞同：0
> 
> 时间：2012-07-09T12:33:19.153
> 
> 标签：javascript, debugging

我已经使用[http://keith-wood.name/countdown.html](http://keith-wood.name/countdown.html)插件在同一页面上进行多个倒计时。

我的锚点中有几秒钟，我通过添加当前日期来使用它们并向用户显示倒计时。

```
 jQuery("#overlay").click(function () {
                        jQuery("#popup").hide();
                    });
                    $(this).children('td:eq(2)').find('a');

                    var val = parseInt($(td).text());

                    //                $(td).text('');
                    var dt = new Date();
                    dt.setSeconds(dt.getSeconds() + val);
                    console.log(dt)
                    // var dt = dat.setSeconds(val);
                    $(td).countdown({
                        until: dt, format: 'dd-HH-MM-SS', compact: true, description: '', onTick: countdowncall
                    })

 function countdowncall() {
            $('.countdown_row.countdown_amount').each(function (n) {
                $(this).text($(this).text().replace('d', 'days'));
            });
        } 
```

问题是我想要 8days 13:17:12 所以我将 d 替换为天。我的代码尝试在每三个刻度上执行此操作，所以这是错误的方式，因为我每次需要对简单元素进行小的更改时都会调用循环。

这会产生“8daysdays”的问题。有人知道如何修复它或修改我已经编写的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:38:48.777

只有**`dHMS`**格式在该插件中有效。

从[`manual`](http://keith-wood.name/countdown.html)

> 这是以下一个或多个字符：“Y”代表年，“O”代表月，“W”代表周，“D”代表天，“H”代表小时，“M”代表分钟，“S”代表秒。必填字段使用大写字符，仅当非零时才显示相应的小写字符。

您粘贴的内容也存在语法错误。

*   `'`在 DOM 元素周围添加
*   并在使用时添加基数`parseInt`

    ```
    var val = parseInt($('td').text(),10);
    $('td').countdown({....}) 
    ```

# ruby-on-rails - 如何从所有用户的电子邮件中设置用户名？

> ID：11395094
> 
> 赞同：1
> 
> 时间：2012-07-09T12:33:29.587
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, rake-task

我想创建 rake 任务以将所有用户的用户名设置为他们电子邮件地址中“@”之前的部分，而没有用户名。因此，如果我的电子邮件是 test@email.eu，我的用户名应该变成 test。如果它不可用，请在其前面加上一个数字 (1)。

所以我有问题女巫检查用户名的唯一性。下面的代码在第二个循环后不起作用例如：当我有三封电子邮件时：test@smt.com、test@smt.pl、test@oo.com test@oo.com 的用户名将为空。

我当然对用户模型中的用户名进行了唯一性验证。

```
desc "Set username of all users wihout a username"
task set_username_of_all_users: :environment do
  users_without_username = User.where(:username => ["", nil])
  users_without_username.each do |user|
    username = user.email.split('@').first
    users = User.where(:username => username)
    if users.blank?
      user.username = username
      user.save
    else
      users.each_with_index do |u, index|
        pre = (index + 1).to_s
        u.username = username.insert(0, pre)
        u.save
      end
    end
  end
end 
```

其他想法在 Gist 中：[https ://gist.github.com/3067635#comments](https://gist.github.com/3067635#comments)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:12:14.397

您可以使用一个简单的 while 循环来检查用户名：

```
users_without_username = User.where{ :username => nil }
users_without_username.each do |user|
  email_part = user.email.split('@').first
  user.username = email_part
  prefix = 1
  while user.invalid?
    # add and increment prefix until a valid name is found
    user.username = prefix.to_s + email_part
    prefix += 1
  end
  user.save
end 
```

但是，要求用户在下次登录时输入用户名可能是更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:10:40.157

如果我理解您的代码正确，您正在更改 else 分支中现有用户的用户名？这看起来不是一个好主意。

您还应该使用真正的查找器来选择没有用户名的用户。否则，您将在选择所有用户之前加载所有用户。

我不知道它是否“符合您的要求”，但您可以在用户名中输入一个随机数，这样您就不会遇到重复的问题。

您可以使用的另一件事是 ruby​​ 的重试机制。只需让活动记录引发错误并使用更改的用户名重试即可。

```
begin
   do_something # exception raised
rescue
   # handles error
   retry  # restart from beginning
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:13:48.650

在您的查询`User.find_by_username(username)`中，您只希望提供 1 条记录。所以你不需要任何`each`. 您应该以另一种方式添加索引。

# asp.net-mvc-3 - 如何从 Amazon S3 存储桶获取图像？

> ID：11395098
> 
> 赞同：0
> 
> 时间：2012-07-09T12:33:38.260
> 
> 标签：asp.net-mvc-3, c#-4.0, amazon-s3

如何从 Amazon S3 存储桶中获取图像？我已将一些图像添加到亚马逊 S3 存储桶中，现在我想检索这些图像。我如何从存储桶中检索它并在页面上显示所有列表？我正在使用 C#，Asp.net MVC3

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-09T12:35:33.533

在 S3 管理 UI 中，您应该能够选择一个文件，它会显示 URL。然后只需在您的代码中使用该 URL。

# objective-c - OCMock：检查参数的设置语法

> ID：11395101
> 
> 赞同：0
> 
> 时间：2012-07-09T12:33:50.507
> 
> 标签：objective-c, ios, cocoa, unit-testing, ocmock

我正在尝试设置要验证的 OCMock。

我有一个协议，`TaskManagerDelegate`它包含以下方法，

```
- (void) addTasks:(NSArray * ) tasksToAdd; 
```

像这样设置我的模拟对象后，

```
id mockTaskManagerDelegate = [OCMockObject mockForProtocol:@protocol(TaskManagerDelegate)]; 
```

我像这样将对象分配给被测类，

```
taskManager.Whatever = mockTaskManagerDelegate; 
```

我在我的 taskManager 上调用了一个方法，然后想验证在 TaskManagerDelegate 上调用了 addTasks 方法，并且传递给它的数组只包含一个对象。

到目前为止，我已经使用 OCMArg 类来检测是否传入了参数，但我很难理解如何检查发送的特定类型是否发送到模拟，或者发送到模拟的对象是否通过了某些测试（有一个 .count 正好是一个例子）。我来自 C# 背景，通常会使用 Moq，您可以在其中使用 lamda 函数对发送到模拟对象的参数进行特定检查。

有谁知道如何用 OCMock 做到这一点，或者如果出于某种概念上的原因它是不可能的？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T15:46:50.397

OCMock 网站上的功能描述如下： ;-)

*“如果 Objective-C 块可用，则可以使用块检查参数，如下所示：*

```
[[mock expect] someMethod:[OCMArg checkWithBlock:^(id value) { /* return YES if value is ok */ }]]; 
```

这对你有用吗？您是否处于无法使用块的环境中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-03T12:36:18.027

我有同样的要求，所以为它创建了一个类别：

```
@implementation OCMArg (IsOfClass)

+ (id)isOfClass:(Class)aClass
{
    BOOL (^classCheck)(id) = ^BOOL(id obj) {
        return [obj isKindOfClass:aClass];
    };

    return [[OCMBlockConstraint alloc] initWithConstraintBlock:classCheck];
}

@end 
```

# java - 休眠标准问题

> ID：11395104
> 
> 赞同：0
> 
> 时间：2012-07-09T12:34:00.513
> 
> 标签：java, database, hibernate, criteria

我有下一张桌子：

```
Table table1
table1Id
field1
field2
field3

Table table2
table2Id
table2_field1
table2_field2
table2_field3
table1Id 
```

在这种方法中，我从按某些字段排序的 table1 中获取对象

```
public List<table1> getMost() {

        DetachedCriteria criteria = (DetachedCriteria) DetachedCriteria.forClass(table1.class);
        //criteria.add(Restrictions.conjunction());
        criteria.addOrder(Order.desc("field1"));

        List<table1> myList = (List<table1>) findByCriteria(criteria,
                false, 0, 10);//get first 10 elements by some criteria
        return myList;
    } 
```

然后我需要从数据库中获取按某个字段排序的对象，但是这些对象依赖于 table1 中的对象

```
public Item getTheBest(Long table1Id) {

        DetachedCriteria criteria = (DetachedCriteria) DetachedCriteria
                .forClass(Item.class);

        DetachedCriteria maxQuery = DetachedCriteria.forClass(Item.class);
        maxQuery.add(Restrictions.eq("table1Id", table1Id)).setProjection(
                Projections.max("table2_field1"));
        criteria.add(Restrictions.and(
                Restrictions.eq("table1Id", table1Id),
                Property.forName("table2_field1").eq(maxQuery)));
        List<Item> result = (List<Item>) findByCriteria(criteria, false);

        if (result.iterator().hasNext())
            return result.iterator().next();
        else
            return null;

    } 
```

我想要的是这样的方法：

```
public Item getTheBest(List<Long> table1Ids) 
```

因此该方法由上述两种方法组成，计算量较少。该方法的想法是有一个对象集合，按一个标准排序，在按此标准排序后，我们按某个字段选择项目。那么我怎么能在休眠状态下做到这一点呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:26:12.480

我从上面了解到的是你有一个有序的查询结果，你想进一步过滤它。

您可以在本机 SQL 中执行此操作，并使用 hibernate 将查询结果转换为 java 对象。下面是一个例子

SELECT FROM (SELECT t1.a, t1.b FROM table1 t1 {GROUP BY if needed} ORDER BY t1.a) subTable, table2 t2 WHERE t1.a = Something and t2.x = Something

# javascript - jQuery map 分割输入值

> ID：11395116
> 
> 赞同：0
> 
> 时间：2012-07-09T12:35:07.923
> 
> 标签：javascript, jquery

jQuery map 正在返回：`data:["1", "8", "5", ".", "9", "0"]`当输入`val`是`185.90`-**为什么要拆分值？**

编码：

```
var $cel = $.map(
  $('td:nth-child(' + (i + 2) + ') input').each(function() {
      $(this).val();
  }).val(), function(value) {
      return value;
 );

 return {

        data: $cel
  }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:37:38.827

`.val()`返回`value`第一个匹配元素的。那`value`是一个`string`，或者换句话说*，字符数组*。这就是为什么，你正在遍历`value`字符串的字符。

可能，你想要这个：

```
var $cel = $.map( $('td:nth-child('+(i+2)+') input').get(), function(elem) {
  return +elem.value;   //'+' will convert string to number
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:53:07.307

因为 map 返回一个数组。[http://api.jquery.com/jQuery.map/](http://api.jquery.com/jQuery.map/) 不是一个完整的数字。

# ajax - Yii ajax 图片上传和调整大小

> ID：11395121
> 
> 赞同：0
> 
> 时间：2012-07-09T12:35:26.473
> 
> 标签：ajax, image, upload, yii, yii-extensions

我正在寻找一个 Yii 扩展，它允许：

1.  使用 ajax 以表格形式上传图像（带有进度条）
2.  调整此上传图片的大小
3.  以相同的形式查看新调整大小的图像的结果

你知道一个好的扩展吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:33:37.883

不确定调整大小，但您应该尝试这个很棒的扩展[XUpload](http://www.yiiframework.com/extension/xupload/)，其文档为[XUpload Workflow](http://www.yiiframework.com/wiki/348/xupload-workflow/)

# java - 如何在hibernate 3中执行存储过程

> ID：11395123
> 
> 赞同：0
> 
> 时间：2012-07-09T12:35:34.977
> 
> 标签：java, hibernate, stored-procedures

我是冬眠新手。我在使用休眠注释的应用程序中使用休眠 3，我正在使用 struts 1.3 开发应用程序。

我的问题是：我用谷歌搜索了很多，但不明白如何**使用注释在休眠**中调用存储过程，我有一个简单的场景：假设我的 jsp 中有 2 个字段，比如 1) 代码 2) 名称，我创建了一个数据库中的存储过程，用于将这些记录插入表中。现在我的问题是如何执行它

```
 List<MyBean> list = sessionFactory.getCurrentSession()
                          .getNamedQuery("mySp")
                        .setParameter("code", code)
                        .setParameter("name", name) 
```

我不知道如何执行此操作的确切代码。但我想这样的事情实际上我来自 jdbc 背景，因此在使用存储过程从数据库中**选择数据时不知道如何执行此操作以及我想要的相同操作。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:14:39.690

Hibernate 提供了许多简单的方法来调用 SP，例如

1.  本机 SQL
2.  原生 SQL 中的命名查询作为注释/XML 映射文件

以下链接显示了如何实现上述各项

[http://www.mkyong.com/hibernate/how-to-call-store-procedure-in-hibernate/](http://www.mkyong.com/hibernate/how-to-call-store-procedure-in-hibernate/)

[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#sp_query](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html#sp_query)

使用休眠运行本机 SQL 查询的示例：

```
 Session session = getSession();
    SQLQuery sqlQuery = session.createSQLQuery("SELECT COUNT(id) FROM tableName WHERE external_id = :external_id");
    sqlQuery.setParameter("external_id", idValue);
    int count = ((BigInteger) sqlQuery.uniqueResult()).intValue();
    releaseSession(session); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:25:23.947

您可以使用 Hibernate 的 SQLQuery 执行存储过程，使用与对数据库调用它时相同的 SQL。例如，在 postgreSQL 中：

```
String query = "select schema.procedure_name(:param1)";
SQLQuery sqlquery = sessionFactory.getCurrentSession().createSQLQuery(query);
sqlquery.setInteger("param1", "this is first parameter");
sqlQuery.list(); 
```

希望能帮助到你。

# mysql - ActiveRecord::StatementInvalid: Mysql2::Error 在.where 方法中使用关联名称而不是外键时

> ID：11395126
> 
> 赞同：0
> 
> 时间：2012-07-09T12:35:42.117
> 
> 标签：mysql, ruby-on-rails, activerecord, ruby-on-rails-3.2

我们刚刚将 Rails 应用程序从 3.0.13 更新到 3.2.6，在使用 mysql2 的 Active Record 查询接口的 .where 方法时遇到了一个小问题。

以前的工作方式：

```
client = Client.first
User.where(:client => client) 
```

现在导致：

> ActiveRecord::StatementInvalid: Mysql2::Error: Unknown column 'users.client' in 'where 子句': SELECT `users`.* FROM `users` WHERE `users`。`client`= 1

但是当显式使用外键的列名时，它似乎工作得很好：

```
client = Client.first
User.where(:client_id => client.id)
#=> Relation of users with the given client_id 
```

关联没有改变（用户属于客户端，客户端有很多用户）。现在这似乎是每个此类协会的问题。

我们现在真的必须更改所有这些 where 查询以便它们使用 foreign_key 还是有其他方法？

导轨版本：

```
gem "rails", "~> 3.2.6" 
```

mysql2版本：

```
gem "mysql2", "~> 0.3.11" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T09:02:22.993

我们刚刚发现这个功能是由一个名为[meta_where](https://github.com/ernie/meta_where/)的 gem 提供的，它在 Rails 3.1+ 中已被弃用。有一个替代方案，[squeel](https://github.com/ernie/squeel)，不幸的是它没有提供完全相同的语法。（或者我们只是还没有发现......）现在调查......

感谢@zsquare 指出。

# scala - 案例类中的重命名和覆盖等于方法

> ID：11395127
> 
> 赞同：8
> 
> 时间：2012-07-09T12:35:43.813
> 
> 标签：scala, case-class

我想定义一个名为的特征`Ext`，它将现有`equals`方法重命名为`equalsByAttributes`并同时定义一个新`equals`方法。该特征用于扩展案例类。我目前的解决方案看起来有点hacky：

```
case class A(id: Int) extends Ext

trait Ext { p: Product =>
    // new implementation
    override def equals(obj: Any) = obj match {
        case that: AnyRef => this eq that
        case _ => false
    }

    // reimplementation of old equals implementation
    def equalsByAttributes(obj: Any) = obj match {
        case that: Product =>
            if (this.getClass.isAssignableFrom(that.getClass) || that.getClass.isAssignableFrom(this.getClass))
                p.productIterator.toList == that.productIterator.toList
            else
                false
        case _ => false
    }
} 
```

我想知道是否有一种直接引用`A`'s`equals`方法的方法，`equalsByAttributes`以便避免重新实现该方法？

## 编辑 2012-07-12

由于有一个引用超级实现的解决方案，`super.METHOD_NAME`我认为必须有类似的语法，例如`overridden.METHOD_NAME`访问将由特征扩展的基类/特征中的特定实现，因此我的`Ext`特征看起来像这样：

```
trait Ext { p: Product =>
    override def equals(obj: Any) = ...

    def equalsByAttributes(obj: Any) = overridden.equals(obj)
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T20:25:40.170

不要更改 case 类上的 equals。如果您需要这样做，请不要让您的课程成为案例课程。更改案例类方法会使代码表现出意外（即与案例类不同），这将增加维护成本，破坏假设案例类像案例类一样工作的一切，使人们的生活变得悲惨，并让很多程序员讨厌你的胆量.

换句话说，这不值得。不要那样做。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T13:49:13.723

编译器不会为已经带有 的案例类生成`equals`（和，分别） ，即继承一个或自己声明一个。[在此博客条目](http://jnordenberg.blogspot.ch/2009/04/equality-mutability-and-products.html)中阅读有关此内容的更多信息。AFAIK 你唯一能做的就是通过使用案例类扩展的[Product trait](http://www.scala-lang.org/api/current/scala/Product.html)提供的实现结构相等，就像你在.`hashCode``equals``productIterator``equalsByAttributes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T15:10:20.873

此代码将使用 Ext trait 中的方法实现：

```
case class A(id: Int) extends Ext { 
  def someEqual(x:Any) = { 
    super[Ext].equalsByAttributes(x) 
  } 
} 
```

这里的 super[X] 用于指代此类扩展的特征之一。这回答了你的第二个问题。

对于你的第一个问题：

```
trait Ext { p: A => def eql(x:Any) = p.equals(x) } 
```

# ios - 将应用程序直接安装到 /Applications/

> ID：11395129
> 
> 赞同：0
> 
> 时间：2012-07-09T12:35:44.520
> 
> 标签：ios, sms, sandbox, jailbreak

当您构建一个应用程序，并像往常一样使用 Xcode 将其安装在您的 iOS 设备上时，该应用程序将在设备上被沙盒化。

但是，我想将应用程序直接构建到 /Applications/ 中，这样应用程序就不会被沙盒化，因此我将能够访问 SMS 数据库 (var/mobile/Library/SMS/sms.db)

编辑---- 编辑器（Editors Fault）

OP 在他最初的问题中提到该应用程序将用于越狱的 iOS 设备，因此是“越狱”标签。代表我（编辑）道歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:44:06.233

对于通过 iTunes App Store 销售的应用程序，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T21:46:04.010

您可以查看[iOSOpenDev](http://www.iosopendev.com/)以获取要使用的备用工具集。

但是，如果你的手机越狱了，你可以使用 Cydia 安装**OpenSSH**。安装 SSH 并运行 SSH 守护程序后，您只需登录手机并将应用程序目录（例如**/var/mobile/Applications/*/MyAppName.app**）移动到 /Applications 即可。您可能需要更改权限`chown`或`chmod`使 MyAppName.app 及其内容与 /Applications 中的其他应用程序具有相同的所有权/权限。

```
ssh root@iphone-wifi-ip
find /var/mobile/Applications/ -name MyAppName.app
cd /var/mobile/Applications/D76328B1-42F2-4AA0-B1B4-A77796290082/
mv MyAppName.app /Applications/
chown -R mobile.staff /Applications/MyAppName.app
su mobile -c uicache 
```

显然，上面的长唯一 ID 字符串对您来说会有所不同。

另一种选择是使用[dpkg](http://www.debian.org/doc/manuals/debian-faq/ch-pkgtools.en.html)打包您的应用程序，然后从命令行将它们安装到设备上。但是，这可能比你准备的还要多。

# tridion - 我们可以限制用户仅搜索他有权访问的那些出版物吗？

> ID：11395131
> 
> 赞同：1
> 
> 时间：2012-07-09T12:35:48.920
> 
> 标签：tridion, tridion-2011

我们在 SDL Tridion 2011 中遇到了搜索功能的问题。我们创建了一个只能访问两个出版物的用户，但用户能够搜索所有出版物中的内容，并且能够以只读模式打开组件。我们有没有办法限制用户只搜索他有权访问的那些出版物？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:43:36.950

听起来您的安全模型有问题。CMS 的内部搜索引擎将只返回用户具有读取权限的结果。您可以在只读模式下打开它们的事实表明您的用户确实对这些组件具有读取权限，因此搜索引擎返回它们是很自然的。

您如何限制对这些内容的访问？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:34:57.267

如果有问题的内容在父出版物中，并且编辑对子出版物中的问题项目具有 READ 访问权限，则这是预期的。

如果内容在另一个蓝图分支中并且它没有被继承到编辑有权访问的出版物，那么它不应该出现在搜索结果中。

ñ

# android - Android Eclipse 错误：Logcat 不断收到“MPL-FIFO 错误”

> ID：11395132
> 
> 赞同：0
> 
> 时间：2012-07-09T12:35:52.770
> 
> 标签：android, eclipse, logcat, fifo

以下是不断增加的 Logcat 日志的片段：

```
07-09 20:26:30.530: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.571: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.621: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.651: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.691: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.711: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.721: D/AutoSetting(514): service - mHandler: update timezone
07-09 20:26:30.721: D/AutoSetting(514): service - getTimeZoneIDFromMCC() MCC code: 466 TimeZoneID: Asia/Taipei
07-09 20:26:30.721: D/AutoSetting(514): service - setSystemTimeZoneID() TimeZoneID is not changed, current: Asia/Taipei
07-09 20:26:30.761: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.791: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.831: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.871: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.911: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.951: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:30.991: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.031: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.071: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.111: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.151: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.191: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.211: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.251: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.291: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.311: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.351: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.391: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.431: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.471: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.511: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.551: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.592: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.612: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.652: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.692: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.712: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.752: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.792: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.812: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.852: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.892: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.932: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:31.972: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.012: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.052: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.092: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.122: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.152: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.192: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.212: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.252: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.292: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.322: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.352: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.382: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.412: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.452: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.502: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.532: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.572: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.603: I/TelephonyRegistry(272): notifyServiceState: 0 home Far EasTone (N/A) 46601  0 UMTS CSS not supported -1 -1RoamInd: -1DefRoamInd: -1EriInd: -1EriMode: -1RadioPowerSv: falseEmergOnly: false
07-09 20:26:32.613: I/TelephonyRegistry(272): notifyDataConnection: state=2 isDataConnectivityPossible=true reason=null interfaceName=rmnet0 networkType=3
07-09 20:26:32.613: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.623: D/TelephonyRegistry(272): notifyDataConnection() state=2isDataConnectivityPossible()true, reason=null
07-09 20:26:32.623: D/TelephonyRegistry(272): broadcastDataConnectionStateChanged()  state=CONNECTEDtypes=default,hipri,dun,supl, interfaceName=rmnet0, apn=internet
07-09 20:26:32.623: D/StatusBarPolicy(373): onDataConnectionStateChanged , state= 2, networkType= 3
07-09 20:26:32.623: D/StatusBarPolicy(373): mPhoneState = 0
07-09 20:26:32.623: D/StatusBarPolicy(373): onDataConnectionStateChanged , SystemProperties.get("net.gprs.data.connected")= 1
07-09 20:26:32.643: D/PendingMsgSendReceiverRegister(818): Enter sendQueuedMessage
07-09 20:26:32.653: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.663: D/AutoSetting(514): receiver - intent: android.intent.action.SERVICE_STATE
07-09 20:26:32.663: D/AutoSetting(514): receiver - flag: Service state 0
07-09 20:26:32.663: W/System.err(514): android.provider.Settings$SettingNotFoundException: monitor_my_location_enabled
07-09 20:26:32.663: W/System.err(514):  at android.provider.Settings$System.getBoolean(Settings.java:962)
07-09 20:26:32.663: W/System.err(514):  at com.htc.htclocationservice.AutoSettingReceiver.startPhoneStateMonitorServiceIfEnabled(AutoSettingReceiver.java:187)
07-09 20:26:32.663: W/System.err(514):  at com.htc.htclocationservice.AutoSettingReceiver$Process.run(AutoSettingReceiver.java:162)
07-09 20:26:32.663: D/PendingMsgSendReceiverRegister(818): New state: 0
07-09 20:26:32.663: D/PendingMsgSendReceiverRegister(818): state in service
07-09 20:26:32.663: D/PendingMsgSendReceiverRegister(818): send HANDLER_SEND_QUEUED_MSG to mWorkingHandler
07-09 20:26:32.673: D/AutoSetting(514): service - onStartCommand() action: com.htc.app.autosetting.timezoneupdate
07-09 20:26:32.683: D/AutoSetting(514): service - onStartCommand() Service state: 0
07-09 20:26:32.693: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.723: D/MobileDataStateTracker(272): replacing old mInterfaceName (rmnet0) with rmnet0 for supl
07-09 20:26:32.723: D/MobileDataStateTracker(272): replacing old mInterfaceName (rmnet0) with rmnet0 for dun
07-09 20:26:32.723: D/MobileDataStateTracker(272): replacing old mInterfaceName (rmnet0) with rmnet0 for hipri
07-09 20:26:32.733: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.743: D/PendingMsgSendReceiverRegister(818): sendQueuedMessage, cursor not null and count: 0
07-09 20:26:32.783: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.813: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.863: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.893: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.933: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:32.973: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.013: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.063: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.093: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.133: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.173: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.213: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.253: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.293: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.313: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.353: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.393: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.433: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.473: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.513: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.553: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.593: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.634: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.674: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.714: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.764: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.794: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.814: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.854: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.894: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.934: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:33.974: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.014: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.054: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.094: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.114: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.154: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.194: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.214: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.254: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.294: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.334: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.374: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.414: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.454: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.494: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.534: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.564: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.594: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.634: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.675: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.715: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.755: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.795: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.835: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.875: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.915: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.955: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:34.995: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.035: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.075: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.115: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.155: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.195: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.235: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.275: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.315: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.355: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.385: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.415: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.455: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.495: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.535: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.565: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.595: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.635: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.665: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.696: D/AutoSetting(514): service - mHandler: update timezone
07-09 20:26:35.696: D/AutoSetting(514): service - getTimeZoneIDFromMCC() MCC code: 466 TimeZoneID: Asia/Taipei
07-09 20:26:35.696: D/AutoSetting(514): service - setSystemTimeZoneID() TimeZoneID is not changed, current: Asia/Taipei
07-09 20:26:35.706: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.736: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.766: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.796: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.836: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.876: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.916: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.956: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:35.996: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.016: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.056: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.096: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.116: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.156: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.196: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.216: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.256: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.296: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.336: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.376: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.416: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.456: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.496: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.516: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.556: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.596: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.636: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.676: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.717: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.767: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.797: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.817: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.857: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.897: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.937: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:36.977: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.017: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.057: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.097: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.137: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.177: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.217: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.247: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.287: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.307: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.347: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3
07-09 20:26:37.387: E/MPL-fifo(272): device/htc/common/invensense/mlsdk/mllite/mlFIFO.c|FIFOGetAccelFloat|1672 returning 3 
```

我从日志中唯一能看出的是消息出现得非常快。这些红色日志消息之间没有任何短暂的休息。（每个间隔之间的差异小于 100 毫秒）。

以下是我触发所有这些日志消息的方式：

1.  运行 Eclipse IDE。
2.  在加载 Eclipse 时，用 USB 线将 Android plone 插入笔记本电脑。
3.  加载 Eclipse 时，通过 Android 设置将“USB 调试已连接”从关闭切换为开启。
4.  等到 Eclipse 完成。然后观看 Logcat DDMS。

这些 Logcat 消息不会影响 Android 手机，但它们会影响我电脑上的性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:41:23.417

我想到了。

导致这些 Logcat 错误日志消息的主要问题是动态壁纸。

特定的动态壁纸是地图，我认为它是 HTC Android 手机中动态壁纸的默认选择之一。应用此动态壁纸时，它将不断发送请求 GPS 位置的包。如果它无法接收包裹，它会弹出这些日志消息。

我不知道如何为此提交罚单。我只是要设置一个不同的动态壁纸。

编辑：

设置不同的动态壁纸可以解决此问题。因此，主要问题必须是地图动态壁纸。此问题未**解决**，但已提供解决方法。碰巧遇到类似问题的朋友，请检查是否是地图动态壁纸设置的。

# linux - 如何对根文件系统进行 tar 备份？

> ID：11395134
> 
> 赞同：7
> 
> 时间：2012-07-09T12:35:58.517
> 
> 标签：linux, ubuntu, disk-partitioning, rootfs

我在 SD 卡上安装了 linux，我使用这个命令来安装 rootfs

tar xpjf rootfs.tar.bz -C /mnt/rootfs/

现在，我对 rootfs 进行了一些更改，并且我想创建一个可以与上面相同的命令一起使用的备份，我尝试使用：

```
tar cpjf rootfs.tar.bz2 /mnt/rootfs
and
tar cpjf rootfs.tar.bz2 -C / mnt/rootfs
I also tried
tar cpjf rootfs.tar.bz2 /mnt/rootfs/* 
```

并尝试：

```
cd /mnt/rootfs
tar -cvpjf rootfs.tar.bz2 --exclude=/rootfs.tar.bz2 .
tar: ./rootfs.tar.bz2: file changed as we read it 
```

但我最终得到一个在文件系统之前有两个级别的存档，即 mnt/rootfs/files 我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T12:40:42.663

那是因为它从当前工作目录开始，你可以这样做：

```
cd /mnt/rootfs
tar cpjf /rootfs.tar.bz2 . 
```

这应该在 /rootfs.tar.bz2 上创建一个存档，其根目录位于 /mnt/rootfs/ 的内容中

# c# - 有没有办法使用 Texture2D 作为枚举的基础

> ID：11395136
> 
> 赞同：1
> 
> 时间：2012-07-09T12:36:11.067
> 
> 标签：c#, enums, xna

我想使用 Texture2D 作为基本枚举。类似于颜色的工作方式。IE。颜色：黑色

这不会编译，因为您不能使用 Texture2D 作为基础，我正在使用此代码来演示我想要的。

```
public class Content
{
    public Dictionary<string,Texture2D> Textures =new Dictionary<string, Texture2D>();
}

public enum Texture:Texture2D
{
    Player = Content.Textures["Player"],
    BackGround = Content.Textures["BackGround"],
    SelectedBox = Content.Textures["SelectedBox"],
    Border = Content.Textures["Border"],
    HostButton = Content.Textures["HostButton"]
} 
```

然后可以像这样使用

```
Texture2D myTexture= Content.Texture.Player; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:58:20.793

您不能将对象用作枚举的基础。您可以做的是将不同的纹理作为静态属性添加到类中：

```
public static class Texture
{
    public static Texture2D Player { get; private set; }
    public static Texture2D BackGround { get; private set; }
    ...

    static Texture()
    {
        Player = Content.Textures["Player"];
        BackGround = Content.Textures["BackGround"];
        ...
    }
} 
```

这样你就可以随心所欲地使用它们：

```
Texture2D myTexture = Texture.Player; 
```

# extjs - 复选框，动作事件

> ID：11395137
> 
> 赞同：5
> 
> 时间：2012-07-09T12:36:21.850
> 
> 标签：extjs, extjs4, extjs4.1

我需要添加一个`Check box`, 并且当用户`checks`在它上面（如更改值`check/uncheck`）打印一个`console.log`语句。到目前为止，我能够显示复选框，但无法访问其检查事件。

```
{
    xtype: 'checkboxgroup',
    columns: 1,

    listeners: {
        change: function (this, newValue, oldValue, eOpts) {
            console.log('change');
            console.log(newValue);
        }
    },
    items: [{
        boxLabel: 'Cars',
        name: 'chk1',
        inputValue: '1'
    }]
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T12:40:09.827

对于任何其他字段，[更改](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Field-event-change)事件应该可以工作。

示例：http: [//jsfiddle.net/mbbjz/2/](http://jsfiddle.net/mbbjz/2/)

# css - css下拉菜单不适用于任何浏览器

> ID：11395139
> 
> 赞同：0
> 
> 时间：2012-07-09T12:36:27.403
> 
> 标签：css, drop-down-menu, menu

我非常头疼，我的纯 CSS 下拉菜单 - 它不适用于任何浏览器。问题出在我的二级列表（子导航）上 - 当我将鼠标悬停在一级（#n）链接上时，它工作得很好并显示子导航，但是当我尝试将鼠标悬停在该列表（列表项（链接））上时它很快消失，我无法选择二级链接和导航。这是我的[**jsFiddle**。](http://jsfiddle.net/xweDA/) 我应该在我的 css 中添加什么以使其正常工作？谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:40:30.243

顶部链接与其子菜单之间不能有空白区域。尝试使用填充而不是边距。

# php - 在 MySQL 中管理删除时的唯一 ID

> ID：11395140
> 
> 赞同：0
> 
> 时间：2012-07-09T12:36:29.670
> 
> 标签：php, mysql

我的标题可能有点不对劲，但我不知道如何解释。

我目前正在制作一个照片组合，用户可以在其中从 Web 界面上传图像。完成后，会发生以下情况：

图片是通过 HTML-form -> PHP 上传的。创建一个包含以下信息的 SQL 记录：

```
ID (Autoincrement) - Image title - Image Desc - Filepath 
```

用户还可以通过 Web 界面中的另一个页面管理他们的上传。发生这种情况时，SQL 记录与文件一起被删除。但是，当用户随后添加一个新文件时，将使用下一个 ID 号，从而在数据库中留下一个空白空间，该空间位于删除记录的位置。

我知道这是因为自动增量不用于向用户显示的 ID，而是用于其他目的。但是，由于我是 ftmb 使用此信息在图像查看器中显示照片编号，我想要一个更合适的方法。我需要的本质上是一个包含整数的 MySQL 列，它将填补删除记录时产生的空白。例如：

```
1 - 2 - 3 - 4 - 5 - 6 - 7 - 8 
```

删除记录 5 后，我需要 ID 来填补空白，所以我而不是

```
1 - 2 - 3 - 4 -   - 6 - 7 - 8 
```

得到 1 - 2 - 3 - 4 - 5 - 6 - 7

有什么建议么？

谢谢你的帮助。:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:40:07.433

MySQL 没有很好的工具来自动执行此操作，但您可以通过以下方式手动执行此操作：

```
SELECT sequence_number FROM photo WHERE photo_id = 729; -- This would be 5.
DELETE FROM photo WHERE photo_id=729;
UPDATE photo SET sequence_number = sequence_number - 1 WHERE sequence_number > 5; 
```

`UPDATE`查询可以包括任何其他条件（例如，匹配`album_id`）将描述其编号是连续的图片集。

然而，话虽如此，如果你只是总是向用户显示一个序列号，那为什么还需要将它存储在数据库中呢？当您的 PHP 代码对结果进行迭代时，只需在其中添加数字即可。

```
$sequence_number = 1;
while ($row = mysql_fetch_assoc($results)) {
    // ... Display everything ...
    $sequence_number++;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T12:43:49.570

尝试：

```
SET @count = 0;
UPDATE `<table>` SET `<table>`.`<column>` = @count:= @count + 1; 
```

上面的查询将循环并遍历每一行并`<column>`使用顺序整数更新字段。

这应该可以回答您的问题，但据我了解，您对图像查看器的问题可能完全不同，与自动增量问题无关。

# java - Java中的C#委托函数实现

> ID：11395143
> 
> 赞同：0
> 
> 时间：2012-07-09T12:36:35.703
> 
> 标签：java, c#-4.0, delegates

> **可能重复：**
> [Java 委托？](https://stackoverflow.com/questions/44912/java-delegates)

什么是 Java 中 C# 的 Delegate 函数的替换。如何在 Java 中转换它。我在 C# 项目中使用 Delegate 函数需要在同一个项目的 Java 版本中实现。如何解决这个问题。请帮忙。

# jquery - 在悬停时显示内容

> ID：11395147
> 
> 赞同：1
> 
> 时间：2012-07-09T12:36:48.853
> 
> 标签：jquery, jquery-ui

我有四个具有相同宽度和高度的浮动 div。

在每个 div 之间有一个内容 div 隐藏并与浮动 div 相关。

当我将鼠标悬停在任何浮动的 div 上时，将显示相应的 div 内容，并且在 mouseout 时它将返回到其原始位置。

我如何使用 jquery 来实现这一点？

请按照以下链接获取代码示例[http://jsfiddle.net/NbVfD/22/](http://jsfiddle.net/NbVfD/22/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:41:10.107

使用以下内容：

```
$('.box').hover(
    function(){
        $(this).next('.boxTxt').show();
    },
    function(){
        $(this).next('.boxTxt').hide();
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NbVfD/23/)。

更新以上内容以包含`fadeIn()`/`fadeOut()`动画：

```
$('.box').hover(
    function(){
        $(this).next('.boxTxt').stop().fadeIn(900);
    },
    function(){
        $(this).next('.boxTxt').stop().fadeOut(900);
    });​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NbVfD/52/)。

并修改您的 HTML，以便您使用`class`而不是`id`识别您的元素，如：

> `id`= 名称 [CS]
> 
> > 此属性为元素分配名称。此名称在文档中必须是唯一的。
> 
> `class`= cdata 列表 [CS]
> 
> > 该属性将一个类名或一组类名分配给一个元素。可以为任意数量的元素分配相同的类名或名称。多个类名必须用空格字符分隔。

（引自：[http](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2) ://www.w3.org/TR/html401/struct/global.html#h-7.5.2 ）。

当然，你可以用简单的 CSS 实现同样的效果：

```
.box:hover + .boxTxt,
.boxTxt:hover {
    display: block; /* to show the element */
    width: 10em; /* aesthetics, adjust to taste... */
    height: 20em;
    background-color: #ffa;
    overflow: hidden; 
    overflow-y: scroll;
    margin-left: -10px;
}​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NbVfD/26/)。

更新了上面的内容以允许 CSS 转换（如果可用）来动画元素的显示/取消显示（为此，我还稍微更改了 HTML）：

```
#boxCon {width:100%}
.boxTxt{
    position: absolute;
    top: 1em; /* in order that there was a target area on the next .boxWrap to
                 to provide a :hover target area to mouse-over to trigger the
                 next .boxTxt to reveal */
    left: 100%;
    opacity: 0;
    z-index: 10;
    overflow: hidden;
    height: 0;
    width: 0;
    -webkit-transition: all 1s linear;
    -o-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -moz-transition: all 1s linear;
    transition: all 1s linear;}

.box{width:50px; height:50px; background-color:#000; 
}

.boxWrap:hover .boxTxt{
    opacity: 1;
    display: block;
    width: 10em;
    height: 20em;
    background-color: #ffa;
    overflow: hidden;
    overflow-y: scroll;
    -webkit-transition: all 1s linear;
    -o-transition: all 1s linear;
    -ms-transition: all 1s linear;
    -moz-transition: all 1s linear;
    transition: all 1s linear;
}

div.boxWrap {
    float: left; /* as originally assigned to .box elements */
    padding: 20px 5px; /* equal to the margins originally placed on the .box elements */
    position: relative; /* to allow for absolute positioning of the .boxTxt elements */
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/NbVfD/54/)。

参考：

*   [`fadeIn()`](http://api.jquery.com/fadeIn/).
*   [`fadeOut()`](http://api.jquery.com/fadeOut/).
*   [`hide()`](http://api.jquery.com/hide/).
*   [`hover()`](http://api.jquery.com/hover/).
*   [`next()`](http://api.jquery.com/next/).
*   [`show()`](http://api.jquery.com/show/).
*   [`stop()`](http://api.jquery.com/stop/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:40:29.763

使用 mouseenter() 和 mouseleave 函数来实现这一点。

```
<!DOCTYPE html>
<html>
<head>
  <style>
div.out {
width:40%;
height:120px;
margin:0 15px;
background-color:#D6EDFC;
float:left;
}
div.in {
width:60%;
height:60%;
background-color:#FFCC00;
margin:10px auto;
}
p {
line-height:1em;
margin:0;
padding:0;
}
</style>
  <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<div class="out overout"><p>move your mouse</p><div class="in overout"><p>move your mouse</p><p>0</p></div><p>0</p></div>

<div class="out enterleave"><p>move your mouse</p><div class="in enterleave"><p>move your mouse</p><p>0</p></div><p>0</p></div>

<script>
    var i = 0;
    $("div.overout").mouseover(function(){
      $("p:first",this).text("mouse over");
    }).mouseout(function(){
      $("p:first",this).text("mouse out");
      $("p:last",this).text(++i);
    });

    var n = 0;
    $("div.enterleave").mouseenter(function(){
      $("p:first",this).text("mouse enter");
    }).mouseleave(function(){
      $("p:first",this).text("mouse leave");
      $("p:last",this).text(++n);
    });

</script>

</body>
</html> 
```

参考网址：[http ://api.jquery.com/mouseenter/](http://api.jquery.com/mouseenter/)

（如果您认为正确，请标记为答案。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:43:37.747

请参阅工作示例：

[http://jsfiddle.net/rathoreahsan/4HvH3/](http://jsfiddle.net/rathoreahsan/4HvH3/)

**HTML**

```
<div id="boxCon">

    <div class="box" data-img="boxTxt1"></div>
    <div id="boxTxt1">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</div>

    <div class="box" data-img="boxTxt2"></div>
    <div id="boxTxt2">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</div>

</div> 
```

**查询：**

```
$("#boxCon").on("mouseover mouseout", "div.box", function () {
    $("#" + $(this).data("img")).toggle();
}); 
```

# salesforce - “相关内容”存储在哪个对象中/如何从 Apex 创建“相关内容”记录

> ID：11395148
> 
> 赞同：5
> 
> 时间：2012-07-09T12:36:50.137
> 
> 标签：salesforce, apex-code

如果您导航到帐户/联系人/自定义对象，我们确实有一个相关列表“相关内容”（如果启用了内容并将相关列表添加到页面布局中）。

我的问题是这些“相关内容”记录是否存储？在哪个对象？

使用 apex 我可以将文件上传到内容版本，但无法创建或找到存储“相关内容”信息的对象。

**更新**

尝试创建一个链接以显示在帐户的“相关内容”部分，但没有成功。出现错误“插入失败。第 0 行的第一个异常；第一个错误：FIELD_INTEGRITY_EXCEPTION，您无法通过 api 为此类实体创建链接：[LinkedEntityId]”

任何想法？

```
 ContentVersion cv = new ContentVersion(
            versionData = EncodingUtil.Base64Decode(base64BlobValue),
            Title = fileName,
            PathOnClient = '/'+fileName,
            FirstPublishLocationId = '058900000009KcL'
        );
        insert cv;

        //fetch ContentDocumentId
        cv = [Select Id,ContentDocumentId from ContentVersion where Id = :cv.Id];

        insert new ContentDocumentLink(LinkedEntityId=parentId,ContentDocumentId=cv.ContentDocumentId,ShareType='V'); 
```

** 用例 **

用例是允许用户直接从对象详细信息页面附加内容，例如说帐户将有按钮说附加内容，这将带来上传内容页面，一旦上传（我将创建 contentversion 记录 - 这很完美，没有错误）然后我需要将上传的内容与帐户相关联（从哪个请求发起），即创建“相关内容”记录（在这里我遇到了困难，试图创建 contentdocumentlink 记录但它出错了）。

该用例只需单击一下即可将内容附加到帐户或机会，而不是当前的漫长过程，即用户转到内容，先上传到那里，然后返回帐户/选项并再次搜索内容，然后将其附加到帐户/联系人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:03:24.323

如您所知，内容存储在`ContentDocument`对象中，链接存储在`ContentDocumentLink`表中。

我发现[http://workbench.developerforce.com](http://workbench.developerforce.com)对于弄清这些关系非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T21:29:20.687

请参阅用户文档中的[ContentDocumentLink 规范](http://www.salesforce.com/us/developer/docs/api/index_Left.htm#CSHID=sforce_api_objects_contentversion.htm%7CStartTopic=Content/sforce_api_objects_contentversion.htm%7CSkinName=webhelp)`LinkedEntityId`，表示：

```
ID of the linked object. Can include Chatter users, groups, records
(any that support Chatter feed tracking including custom objects),
and Salesforce CRM Content libraries. 
```

我认为基于该解释，您*只能为基于 Chatter 的对象字段创建 ContentDocumentLink ，而不是为常规 sObject 记录或自定义 sobjects*等。

# java - spring显示原始值验证错误

> ID：11395158
> 
> 赞同：0
> 
> 时间：2012-07-09T12:37:22.053
> 
> 标签：java, spring, validation

我有这个表单，我发布到 spring，我试图让它在发布更新值之前显示数据库中的原始值，同时如果存在验证错误而不是发布值，则在字段上留下错误消息。但是我所做的一切似乎都不起作用。

我的帖子操作如下所示：

```
@RequestMapping(method=RequestMethod.POST)
public String updateValues(@ModelAttribute("values") @Valid ValueList, Errors errors, RedircetAttributes redirectAttributes){

     if (errors.hasErrors()){
        return VALUES_VIEW;
     }
     //Do update stuff
     return VALUES_REDIRECT;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:46:11.073

将模型上的值覆盖为数据库中的值。在您的情况下，类似于：

```
ValueList dbValueList = someService.getValueList();
valueListInModel.setSomeProperty(dbValueList.getSomeProperty()); 
```

# mysql - 多次使用子查询

> ID：11395159
> 
> 赞同：-1
> 
> 时间：2012-07-09T12:37:22.597
> 
> 标签：mysql, if-statement, subquery, sum

我需要一些关于视图的帮助。

我有 2 个表需要“合并”在一起。

第一个表包含有关产品的信息（product-color-size），其他表包含有关 product-season-color-size niveau 的库存、已售、可用（数量）等信息。

我需要我的观点来返回可用的公关产品。相同的 product-color-size 可以多次（可以在多个季节），因此我不能只对可用的 ex 进行求和。

我的查询看起来像这样

```
SELECT
    SUM((
        SELECT
            SUM(products_details.available)
        FROM
            products_details
        WHERE
            products_details.product_id = products.id
    )) AS available
FROM
    products 
```

但是，这行不通。如果一种尺寸有 6 可用，而另一种尺寸有 -5，则查询将返回 1 可用。但是，我实际上得到了 6 个，我可以卖掉。

因此我需要做一些调整

```
SELECT
    SUM((
        SELECT
            SUM(
                IF(
                    products_details.available > 0,
                    products_details.available,
                    0
                )
            )
        FROM
            products_details
        WHERE
            products_details.product_id = products.id
    )) AS available
FROM
    products 
```

但是，这也行不通。如果大小在一个季节有 6 个可用，而在另一个季节有 -5，则查询将返回 6 个可用。但是，这两行我需要求和，因为它是同一个产品。因此它需要返回 1 可用。

所以，我想出了

```
SELECT
    SUM(
        IF(
            (
                SELECT
                    SUM(
                        IF(
                            products_details.available > 0,
                            products_details.available,
                            0
                        )
                    )
                FROM
                    products_details
                WHERE
                    products_details.product_id = products.id
            ) > 0,
            (
                SELECT
                    SUM(
                        IF(
                            products_details.available > 0,
                            products_details.available,
                            0
                        )
                    )
                FROM
                    products_details
                WHERE
                    products_details.product_id = products.id
            ),
            0
        )
    ) AS available
FROM
    products 
```

但是，这将非常（！！）慢。我可以以某种方式多次使用相同的子查询吗？所以我可以在 If 语句中使用它，如果它是肯定的，我可以在总和中使用相同的值吗？

这很复杂，但我希望有人能帮助我

/疯子

# 编辑

我才发现，我可以写

```
SELECT
    SUM((
        SELECT
            IF(
                SUM(products_details.available) > 0,
                SUM(products_details.available),
                0
            )
        FROM
            products_details
        WHERE
            products_details.product_id = products.id
    )) AS available
FROM
    products 
```

那可以正常工作

# 编辑2

我找到了一种新的、更快的方法来编写它，而且效果很好:-)

```
SELECT
    SUM(GREATEST(0,(
        SELECT
            SUM(products_details.available)
        FROM
            products_details
        WHERE
            products_details.product_id = products.id
    ))) AS available
FROM
    products
GROUP BY
    products.id 
```

这非常快 - 从大约 10 秒到略高于 1 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:45:12.487

子查询不是这项工作的正确工具。事实上，子查询在日常 SQL 查询中相当少见。更可能有用的是`JOIN`s。

```
SELECT products.*, SUM(IF(product_details.available > 0, product_details.available, 0)) AS available
FROM products
INNER JOIN product_details ON (product_details.product_id = products.id)
GROUP BY products.id 
```

这将为每个产品返回一行，其中包含`availability`该产品所有行中所有值的总和`products_details`。

# xml - 从数据库创建 XML 文件的性能问题

> ID：11395160
> 
> 赞同：0
> 
> 时间：2012-07-09T12:37:26.170
> 
> 标签：xml, vb.net, performance, filestream, xmltextwriter

我正在尝试编写一个 XML 文件，它是一个 Google 产品提要，但速度很慢。

做了相当多的谷歌搜索后，我不确定最快的方法，除了将它分成更小的文件。

我目前有大约 3500 种产品，这就是我正在做的事情。

```
Dim fs As New FileStream(HttpContext.Current.Server.MapPath("LOCATION OF FEED XML"), FileMode.Create)
Dim writer As New XmlTextWriter(fs, System.Text.Encoding.UTF8)

writer.WriteStartDocument()
   ' ==== LOAD DATABASE INTO OdbcDataReader CALLED 'd' ==== '
While d.Read
   try
        writer.WriteStartElement("item")

        writer.WriteStartElement("g:id")
        writer.WriteString(pID)
        writer.WriteEndElement()
        '==== etc 
    catch
        ignore broken ones
    end
End While

     writer.WriteEndElement()
     writer.WriteEndDocument()
     writer.Close()

 d.Dispose()
 connection.Dispose()
 connection.Close() 
```

我不熟悉`FileStream`，`MemoryStream`等等，所以不太确定这里到底发生了什么。

大概写入内存会更快，但是这样做然后保存到磁盘的过程是什么？

数据量是否会成为内存问题？

显然我正在使用 .NET 2.0 使用 VB 进行编码

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:13:43.280

性能问题似乎不是在写入，但看起来是导致性能缓慢的读取。你从哪里读取数据？数据库？那么这就是性能瓶颈所在。

# decision-tree - 自动决策表生成器

> ID：11395164
> 
> 赞同：1
> 
> 时间：2012-07-09T12:37:35.203
> 
> 标签：decision-tree

我正在寻找一种稳定、免费、易于使用的工具来生成决策表。[TestCaseGenerator](http://testcasegenerator.codeplex.com/)正是我正在寻找的，但远非稳定，如果我有数千个测试用例，它会停止生成测试用例。DecisionTableCreator 是另一个示例，但如果条件太多，则无法正常工作。我花了很长时间寻找我确信必须存在的工具（我认为没有这样的工具，TDD 就无法做到）。

10 倍，莎朗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T21:40:14.800

决策表代码生成器 CCIDE ( [http://twysf.users.sourceforge.net/](http://twysf.users.sourceforge.net/) ) 可能是您正在寻找的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-05-17T09:38:29.290

> TestCaseGenerator 正是我正在寻找的，但远非稳定，> 如果我有数千个测试用例，它会停止生成测试用例。

你需要多少箱子？我正在使用[http://decision-table.com](http://decision-table.com) - 它可以在我的低端计算机上生成 16300 个案例。我想更多的内存可以给你更多的案例。

顺便说一句，为什么需要这么多测试用例？我的意思是，15 个以上的条件可能会分成两个/树/四个测试套件，因此您的决策表会更小。查看成对测试可能会有所帮助 - 在不利用测试覆盖率降低的情况下减少测试用例数量的技术

# javascript - Chrome 扩展 - 访问 iframe 元素

> ID：11395168
> 
> 赞同：8
> 
> 时间：2012-07-09T12:37:49.827
> 
> 标签：javascript, google-chrome, iframe, google-chrome-extension

我正在使用with set to将一个附加`iframe`到页面。稍后在某些事件中，我想从框架中检索一些元素。我尝试了以下代码：`content script``src``chrome.extension.getURL(myPage)``content script`

```
var textFrame = document.getElementById('iframeId');
var text = (textFrame.contentDocument || textFrame.contentWindow.document).getElementById('someDivId'); 
```

但它会引发以下错误：

> [不安全的 JavaScript 尝试从 URL http://theInjectedPage.com/xxx/xxx/xxx](http://theInjectedPage.com/xxx/xxx/xxx)的框架访问具有 URL chrome-extension://ipkjfhkdgodpcgpjepdjhcbfcbbbcpee/TopBar.html 的框架。域、协议和端口必须匹配。

在`manifest`文件`all_frames`中设置为`true`.

请帮我解决这个问题。

* * *

**更新：**这是我的清单文件的一部分：

```
 "permissions": [
   "tabs",
   "chrome://favicon/",
   "http://*/*", 
   "https://*/*"
 ],
 "background": {
    "scripts": ["Javascript/background.js"]
  },
 "content_scripts": [
  {
    "matches": ["http://*/*"],
    "js": ["Javascript/References/jquery-1.7.min.js","Javascript/content_script.js"],
    "run_at": "document_start",
    "all_frames": true
  }
 ],
  "web_accessible_resources": ["TopBar.html","Javascript/TopBar.js","Javascript/References/jquery-1.7.min.js"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T16:33:09.440

您的权限没有任何问题，但我只是想知道为什么您从 chrome 收到此错误，即页面 TopBar.html 正在尝试访问框架？您是通过 content_script 创建 iframe 吗？你给 iframe 的 url 是什么？

您可以检查它在您打开 iframe 的每个页面中注入的此代码示例。

**清单.json**

```
{
  "name":"example",
  "description": "",
  "version": "1.0",
  "manifest_version": 2,
  "permissions": [],
  "content_scripts": [
    {
      "all_frames": true,
      "matches": ["http://*/*","https://*/*"],
      "css": [],
      "js": ["content_script.js"]
    }]
} 
```

和**content_script.js**

```
var iframe= document.createElement("iframe");
iframe.setAttribute("width", "100%");
iframe.setAttribute("height", "200px;");
iframe.setAttribute("src", "http://gamalshaban.me/blog");
document.body.appendChild(iframe); 
```

我也上传了这个示例扩展，你可以从这个[链接下载它](http://gamalshaban.me/examples/crome-extensions/content_s.zip)

# php - 为什么 TCPDF 会忽略我的内联 CSS？

> ID：11395171
> 
> 赞同：21
> 
> 时间：2012-07-09T12:38:04.070
> 
> 标签：php, css, tcpdf

我正在尝试使用 TCPDF 创建 PDF 文件。但是当我尝试将内联 CSS 插入 HTML 时，它显示的是一个空白页面！这是我的 HTML 的几行：

```
pdf->AddPage();

// set font
$pdf->SetFont('helvetica', 'B', 20);

$pdf->Write(0, 'Example of HTML Justification', '', 0, 'L', true, 0, false, false, 0);

// create some HTML content
$html = '
<div id="wrapper" style="width:900px;height:auto;margin:0 auto;">
<div id="header" style="width:900px;height:180px;border-bottom:2px solid #5a5a5a;">
<div id="img" style="width:174px;height:87px;position:relative;top:10px;left:350px;"><img src="Untitled Document_files/logoticket.png" /></div>
<div id="text" style="width:250px;position:relative;left:315px;top:20px;font-family:Arial, Helvetica, sans-serif;font-weight:bold;font-size:14px;">E-TICKET/RESERVATION VOUCHER</div>
<div id="text2" style="width:200px;position:relative;left:345px;top:40px;font-family:Arial, Helvetica, sans-serif;
font-weight:bold;font-size:12px;">Visit - www.bookings.7sisters.in</div>
</div>
<div id="mainContent">
<div id="icon" style="width:600px;
height:37px;
position:relative;
left:190px;
top:20px;">
<img src="Untitled D..... 
```

等等

我在[TCPDF 示例 39](http://www.tcpdf.org/examples/example_039.phps)中插入代码。但输出只有 TCPDF 徽标和“HTML 对齐示例”行。什么原因？或者它不支持内联 CSS？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2012-07-11T15:42:05.550

TCPDF 对 CSS 的支持非常有限。它不支持所有属性。

目前，仅支持以下 CSS 属性：

*   字体系列
*   字体大小
*   字体粗细
*   字体样式
*   颜色
*   背景颜色
*   文字装饰
*   宽度
*   高度
*   文本对齐

所以尝试删除其他属性，并判断它是否有效。

此外，[这](http://sourceforge.net/projects/tcpdf/forums)是一个与 TCPDF 相关的讨论的活跃论坛。

[TCPDF 文档](http://www.tcpdf.org/docs.php)

绝对值得尝试的 TCPDF 替代品：

# [domPDF](http://code.google.com/p/dompdf/)

**主要特征**

*   处理大多数 CSS 2.1 和一些 CSS3 属性，包括 @import、@media 和 @page 规则
*   支持外部样式表，本地或通过 http/ftp（通过 fopen-wrappers）
*   支持复杂表格，包括行和列跨度、单独和折叠的边框模型、单独的单元格样式

[domPDF 文档](http://code.google.com/p/dompdf/wiki/Introduction?tm=6)

有用的教程： http: [//kyokasuigetsu25.wordpress.com/2011/07/14/how-to-use-dompdf-with-css/](http://kyokasuigetsu25.wordpress.com/2011/07/14/how-to-use-dompdf-with-css/)

# [mPDF](http://www.mpdf1.com/mpdf/index.php)

可以在[此处](http://mpdf1.com/common/mpdf/examples/)和[此处](http://www.mpdf1.com/mpdf/examples)找到示例（PHP 和生成的 PDF） 。

[mPDF 文档](http://mpdf1.com/manual/)

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-06T12:13:59.503

在我的情况下，服务器在双引号中添加了斜杠 - tcpdf 在没有警告的情况下忽略了样式等属性。所以我通过 stripslashes 函数删除了斜杠

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-04T11:03:26.180

好吧，我发现了一个解决方法：

```
<h1>Heading<small>Text(is smaller than heading.)</small></h1> 
```

希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T08:42:37.977

我使用了您提供的代码，并使用内联 CSS 将“访问 - www.bookings.7sisters.in”的颜色更改为红色。

[在https://www.box.com/s/520e9e1f4976802696ec](https://www.box.com/s/520e9e1f4976802696ec)上查看我的示例输出

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-22T12:09:13.557

没有完全支持 CSS 的 PHP 库。即使对于较大的字符串，TCPDF 也做得非常好，性能相对较好。查看示例，例如[006](https://tcpdf.org/examples/example_006/)、[007](https://tcpdf.org/examples/example_007/)、[21](https://tcpdf.org/examples/example_021/)或[061](https://tcpdf.org/examples/example_061/)。

# php - Netbeans中的“添加为链接”？

> ID：11395173
> 
> 赞同：0
> 
> 时间：2012-07-09T12:38:11.973
> 
> 标签：php, netbeans, netbeans-7

我如何（在 Netbeans IDE 中）将文件添加为链接，或指向现有文件，有点像快捷方式？

Visual Studio 2012 可以做到这一点，如以下屏幕截图所示（在 Google 图片上找到 - 不是我的）。

![在此处输入图像描述](../Images/904826f01e92a001c05ebb4ca7d93605.png)

我想念 Netbeans 中的这个功能。一直复制我的文件不是一种选择，因为我不断改进我的 PHP 库文件，这些文件在所有其他项目中都使用。

我正在使用完整版的 Netbeans，在这种情况下，我正在做 PHP 开发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:11:44.863

我不确定 PHP 是否应该这样工作，因为它的代码没有被编译。我可能完全错了，如果我是，我相信其他人会教育我们俩。

我通常所做的是将库放在某个目录中，然后将该目录添加到 PHP 的包含路径中，方法是将其添加到 php.ini：

```
include_path = "dir to your library" 
```

然后我会确保我使用的任何类自动加载器都在查看包含路径。

也就是说，我最近离开了这个，因为一个经常更改的全局库给我带来了问题（更改会破坏某些东西和类似的问题）。

# java - 扩展 MapActivity 时 onPause() 函数不起作用

> ID：11395176
> 
> 赞同：0
> 
> 时间：2012-07-09T12:38:17.203
> 
> 标签：java, android, mapactivity

当我扩展 MapActivity 而不是 Activity 时，我无法使用 onPause()、onResume()、onRestart() 函数。当我创建受保护的 void onPause() 时，单击主页按钮时出现强制关闭错误。我尝试了 ActivityGroup，但它也不起作用。我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:08:08.033

你忘了打电话`super.onPause()`，`super.onResume()`等吗？

从文档中引用：

> 派生类必须调用该方法的超类实现。如果他们不这样做，将引发异常。

# excel - VBA 引用计数 - 对象销毁

> ID：11395180
> 
> 赞同：25
> 
> 时间：2012-07-09T12:38:40.043
> 
> 标签：excel, vba

最近我遇到了一个让我很困惑的问题；它让我很忙，我在网上找不到透明的解释。
它与 Excel 对象的破坏有关（我一直使用它，以前从未*真正*质疑过）。

导致我的问题的背景：
对于常规对象，您可以使用关键字 SET 和 NEW 实例化对象。例如：

```
Set classInstance = New className 
```

每当我们以这种方式实例化时，就会在堆内存中创建对象，并且引用计数器增加 1。
如果我不添加更多引用，以下语句将使引用计数恢复为零：

```
Set classInstance = Nothing 
```

当引用计数变为 0 时，对象被销毁并从内存中清除，“classInstance”指向 .

我读到的：
当我们使用“CREATEOBJECT”函数时，它返回一个对 COM 对象的引用。

```
Set oApp = CreateObject("Excel.Application") 
```

即使我们可以说：

```
Set oApp = nothing 
```

对象的引用计数将变为 0，oApp 将不再指向该对象。

**我的问题**：
1）为什么这种类型的对象需要在对象实际从内存中删除之前调用方法.Quit？
添加对需要 .close 方法的工作簿对象（workbooks.add 或 workbook.open）的引用时也是如此。为什么将引用计数归零时这些对象不能被自动销毁？
例如，当我们说：

```
set oRange = nothing 
```

2）有没有必要说：

```
oApp.Quit
set oApp = nothing 
```

由于应用 .Quit 时 Application 对象已从内存中清除，因此不再需要释放对象。
我能想出的唯一原因是，为什么 oApp 在退出后会设置为 Nothing，因为它可能指向未使用的内存位置（在堆上），如果重新分配该内存，以后可能会导致混乱（尽管在 VBA 中我觉得这很难想象）。我在质疑自己这个结论是否正确，我想从知道答案的人那里得到确认。
请告诉我我是否看错了。

3）他们在 VBA 中所说的“对对象的引用”（例如上面代码中的 oApp），我将它们视为 C 中的指针变量。使用此语句是否安全，或者我是否看错了？

通常不难申请 .Quit 并设置为空，但最好能收到有关该主题的一些准确信息。这样我就可以 100% 地知道我为什么要这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T13:39:19.727

好问题 ：）

Excel 控制其对象的创建。同样，它也控制着它们的毁灭。

设置`oApp = Nothing`只会破坏对象引用。它不会删除应用程序。要销毁 Excel 对象，您必须使用它的`.Quit`方法。

每当您这样做时，将删除为其相关对象`Set x = Nothing`命名的引用（指针） 。`x`这并不意味着对象本身将从内存中删除。对象是否会从内存中删除，取决于各种因素。

1.  是否有更多的引用指向同一个对象。如果有，则不会删除该对象。引用计数必须为零。
2.  该对象的析构函数的内部实现。

该`.Quit`方法被定义为优雅地删除所有 excel 已分配的内存对象，并自行关闭。

它类似于`Close`在 VB6 中调用窗体。以vb6中的一个表格为例。

```
Dim f As Form
Set f = Form1
f.Show

'
'~~> Rest of the code
'

Set f = Nothing 
```

这会破坏表格吗？:)

**跟进**

> 问题2呢？谢谢 – Kim Gysen 14 分钟前

![在此处输入图像描述](../Images/9dc80144d5a1186b670df92b509505ab.png)

它可能与此处显示的不完全一样，编译器优化可能会使事情的表现有所不同……但这是起作用的基本概念。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-30T20:00:43.697

您问题的第 2 部分非常有趣，非常值得扩展答案。

这将涵盖三个关键点：

*   对象和对象变量；
*   解雇对象时的陷阱；
*   ...以及在 Excel 2013 中对 Application 对象进行引用计数的一个重要变化。

但是，如果您想要一个简短的答案，那就是：**“并非所有对象都是平等的”。**

现在继续阅读...

有些对象是在您的 Excel 会话的“自己的”内存空间中创建的，它们的内存分配由您的会话控制；一些对象具有在对象变量被解除后存在的持久组件；有些没有：

```
`Set oDict = CreateObject("Scripting.Dictionary")
Set oWShell = CreateObject("Shell.Application")` 
```

`在这两种情况下，都会分配内存，实例化对象变量（以及它们指向方法和属性的指针的 vTable），并且它们是你的命令，直到你关闭它们：` 

```
``Set oDict = Nothing
Set oWShell = Nothing`` 
```

``而且，在被解雇时，他们没有留下任何痕迹。``

 ``但是**这个**对象是持久的：

```
`Dim oWbk as Excel.Workbook

Set oWbk = Application.Workbooks.Add` 
```

`...您已经创建了一个新的工作簿对象，如果您使用 关闭对象变量`Set oWbk = Nothing`，您将看到新的工作簿对象仍然作为可见的存在存在于用户界面中。

您实际创建的是一个 Workbook**对象**- 一个带有活动工作表和完整用户界面的工作簿窗口 - 以及一个 Workbook**对象变量**- 程序员的 COM 接口，Workbook 对象的方法和属性表 - 您可以使用命名实体“oWbk”在代码中进行操作。

取消 oWbk 对象变量会删除该框架，但 Workbook 本身仍然存在：您已经创建了一个 Workbook 对象，它是您的。

**对象不仅仅是它的对象变量**，并且解除变量不会破坏对象：它只是解除了一个接口，一个方法和属性的框架，您可以使用它来在代码中操作对象。

关闭工作簿，无论是否保存文件，都应该自动关闭对象变量并清除为属性、方法和属性的该接口分配的内存：

```
`'try this:
oWbk.Close SaveChanges:=False
' or maybe this:
Application.Workbooks(Application.Workbooks.Count).Close SaveChanges:=False` 
```

`...也就是说，您会期望这两个命令都会调用 `Set oWbk= Nothing`- 尤其是`oWbk.Close`命令 - 但是如果您尝试其中任何一个而不显式关闭 oWbk，您会发现它`oWbk`仍然作为空壳存在，并且所有调用和请求有关它的信息 (try>  `Debug.Print> TypeName(oWbk)` ) 将返回*“自动化错误”*消息。

上一个答案中的一些评论提到该`UserForm`对象 - 与 Dictionary 和 Shell 对象不同 - 是具有可见用户界面的对象。但是，此用户界面不是 Excel 用户界面中的持久新对象，如工作簿或工作表。

幸运的是，您创建的对象归您的 Excel 会话所有，您可以再次实例化一个对象变量，以获得相同的方法和属性框架，并再次控制该对象：

```
`Set oWbk = Application.Workbooks(Application.Workbooks.Count)` 
```

`...当然，假设您有某种方法可以确保您确定了正确的工作簿对象：但这根本不是您的问题。

这个答案的去向是：不是在 Excel 会话的“自己的”内存中创建的对象。

```
`Set oApp = CreateObject("Excel.Application")` 
```

`此语句将创建一个 Excel 对象，该对象与新的 Workbook 一样，具有用户界面（尽管您需要将`.Visible`属性设置为 True 才能看到它）和内存中的持久存在：再一次，该对象不仅仅是它的对象变量，并且关闭变量不会破坏对象。

与新的工作簿不同，它不是*完全*由您来指挥：它本身就是一个 Excel 会话，它分配自己的内存 - oApp 在当前会话内存中的“足迹”只是指针和名称：接口（vTable 、iDispatch 以及所有那些带有指向在 VBA 中实现操作 Excel 会话的神秘行为的结构的命名方法）都存在于这个新的 Excel 会话分配的内存块中。

以下是 Office 2010 和旧版 Excel 中发生的情况：

关闭对象变量`Set oApp = Nothing`会使该会话启动并运行，我强烈建议您使会话可见，以便您可以手动关闭它！

手动关闭该 Excel 会话，而不显式关闭 oApp 对象变量，**肯定**会使 oApp 处于“空壳”状态，并且一个冷酷无头的幽灵在哀号 *“自动化对象已与其客户端断开连接！”* 在代码库的黑暗角落。

但是，在 Office 2013 及更高版本中，`Set oApp = Nothing`完全执行您期望的引用计数并关闭会话。尝试一下：

```
`Private Sub Test()

Dim oApp As Excel.Application

Set oApp = New Excel.Application
'Set oApp = CreateObject("Excel.Application")

oApp.Visible = True

Set oApp = Nothing

End Sub` 
```

`如果另一个对象变量有引用，它不会关闭`Set oApp = Nothing`- 这不是增加引用计数器的唯一实体：GUI 中的用户活动（尝试创建新工作簿并对其进行编辑）保持会话正常运行，也。

为了您自己的娱乐，看看是否`oApp.Quit`确实关闭了 oApp 并将其设置为`Nothing`.

当然，`oApp.Quit`肯定会关闭会话...

...或者会吗？如果该会话中发生了一些事情——长时间的计算，或者你必须在应用程序对象响应来自用户界面或 VBA 的**任何**其他输入之前查看并单击的“模态”错误消息——那么`oApp.Quit`不会关闭会话。

让我们不要去那里。在所有条件相同的情况下，`oApp.Quit`肯定会在 2010 年和更早版本的 Excel 中关闭会话。

但在 Office 2013 中，从最后一个对象变量调用“退出”只会隐藏 UI：对象变量仍会响应您的代码 - 不需要活动工作簿的方法和属性仍可通过 oApp 和单独的实例访问Excel.exe 在任务管理器的进程选项卡中清晰可见。

同样，通过单击用户界面中的“关闭”按钮退出新会话会关闭会话的窗口，但如果代码中存在引用此应用程序对象的对象变量，它仍然存在，在内存中和“oApp”仍然可以得到属性和方法。

因此，引用计数器在当前版本的 Excel 中以两种方式工作：对象存在直到引用计数减少到零，并且最后一个剩余的对象变量**不会**被退出命令或 UI 操作“断开”。

尽管如此，您的会话并不“拥有”那个新的应用程序对象：如果您已经解除了最后一个对象变量并将其设置为`Nothing`，并且还有其他东西使 neww 会话保持活动状态 - 用户活动或一些内部进程 - 没有什么比Application.Workbooks() 或 Worksheets() 集合来识别其他 Excel 会话并实例化指向 Excel.Application 对象的特定实例的对象变量。

有一些方法可以使用 API 调用来获取特定会话，但它们并不像您希望的那样可靠。

...所以，总而言之，“第 2 部分”中有很多内容。```````

# iphone - 目标C将NSString转换为无符号

> ID：11395182
> 
> 赞同：4
> 
> 时间：2012-07-09T12:38:42.790
> 
> 标签：iphone, objective-c

我已经改变了我的问题。

我想将 a 转换`NSString`为`unsigned int`.

为什么？因为我想在 PayPal 中进行并行付款。

下面我给出了我想将 转换`NSString`为无符号整数的编码。

我的查询是：

```
 //optional, set shippingEnabled to TRUE if you want to display shipping
    //options to the user, default: TRUE
    [PayPal getPayPalInst].shippingEnabled = TRUE;

    //optional, set dynamicAmountUpdateEnabled to TRUE if you want to compute
    //shipping and tax based on the user's address choice, default: FALSE
    [PayPal getPayPalInst].dynamicAmountUpdateEnabled = TRUE;

    //optional, choose who pays the fee, default: FEEPAYER_EACHRECEIVER
    [PayPal getPayPalInst].feePayer = FEEPAYER_EACHRECEIVER;

    //for a payment with multiple recipients, use a PayPalAdvancedPayment object
    PayPalAdvancedPayment *payment = [[PayPalAdvancedPayment alloc] init];
    payment.paymentCurrency = @"USD";

    // A payment note applied to all recipients.
    payment.memo = @"A Note applied to all recipients";

    //receiverPaymentDetails is a list of PPReceiverPaymentDetails objects
    payment.receiverPaymentDetails = [NSMutableArray array];

    NSArray *emailArray = [NSArray arrayWithObjects:@"abc@def.com",@"def@abc.com", nil];

    for (int i = 1; i <= 2; i++) {
        PayPalReceiverPaymentDetails *details = [[PayPalReceiverPaymentDetails alloc] init];

        // Customize the payment notes for one of the three recipient.
        if (i == 2) {
            details.description = [NSString stringWithFormat:@"Component %d", i];
        }

        details.recipient = [NSString stringWithFormat:@"%@",[emailArray objectAtIndex:i-1]];

        unsigned order;

        if (i==1) {
            order = [[feeArray objectAtIndex:0] unsignedIntValue];
        }
        if (i==2) {
             order = [[amountArray objectAtIndex:0] unsignedIntValue];
        }

        //subtotal of all items for this recipient, without tax and shipping
        details.subTotal = [NSDecimalNumber decimalNumberWithMantissa:order exponent:-4 isNegative:FALSE];

        //invoiceData is a PayPalInvoiceData object which contains tax, shipping, and a list of PayPalInvoiceItem objects
        details.invoiceData = [[PayPalInvoiceData alloc] init];

        //invoiceItems is a list of PayPalInvoiceItem objects
        //NOTE: sum of totalPrice for all items must equal details.subTotal
        //NOTE: example only shows a single item, but you can have more than one
        details.invoiceData.invoiceItems = [NSMutableArray array];
        PayPalInvoiceItem *item = [[PayPalInvoiceItem alloc] init];
        item.totalPrice = details.subTotal;
        [details.invoiceData.invoiceItems addObject:item];

        [payment.receiverPaymentDetails addObject:details];
    }

    [[PayPal getPayPalInst] advancedCheckoutWithPayment:payment]; 
```

谁能告诉我如何进行这种转换？

提前致谢和问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-28T16:20:06.763

就我而言，我必须实现这样的东西（适应您的需要）：

```
NSString *myStringObject = [NSString stringWithFormat:@"%u", someObject.hash];
NSUInteger hashValue = (NSUInteger)myStringObject.longLongValue; 
```

我最初使用`myStringObject.intValue`，如下所示，但后来我的整数被“剪裁”了，因为它们在假设有符号时太大（但由于额外的位而不是太大的无符号）。使用`myStringObject.longLongValue`为我解决了这个问题。

我应该注意我的字符串最初是使用 NSUIntegers（无符号整数）创建的，所以我不必担心解析太大的整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:44:56.070

假设您的数组中有一个字符串：

```
unsigned int order = (unsigned int)[[feeArray objectAtIndex:0] intValue]; 
```

确实没有 NSString 方法可以直接转换为 unsigned int 值。但是，如果您可以保证您的值都不是带符号的整数，那么上述内容应该适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T12:45:33.800

没有转换为*无符号*整数，但有转换为有*符号*整数 ( `NSInteger`)：

```
NSInteger order = [[freeArray objectAtIndex:0] integerValue];
NSLog(@"order=%ld", order); 
```

或`int`：

```
int order = [[freeArray objectAtIndex:0] intValue];
NSLog(@"order=%d", order); 
```

# android - xmpp facebook不发送消息

> ID：11395185
> 
> 赞同：1
> 
> 时间：2012-07-09T12:38:50.633
> 
> 标签：android, facebook, xmpp

有一个可用的 Android 开源项目：Beem 项目和连接 Facebook 聊天，您可以使用以下指南。

在 Android 中实现 Facebook 聊天 API 的步骤：

首先，我们必须在现有项目中实现 MemorizingTrustManager Library 项目。

> => 为此，您必须在现有项目中复制以下三个文件
> 
> MemorizingTrustManager/src/de/duenndns/ssl/MTMDecision.java MemorizingTrustManager/src/de/duenndns/ssl/MemorizingActivity.java MemorizingTrustManager/src/de/duenndns/ssl/MemorizingTrustManager.java => 并在值/字符串中添加以下值。 xml

```
<resources>
    <string name="mtm_accept_cert">Accept Unknown Certificate?</string>
    <string name="mtm_decision_always">Always</string>
    <string name="mtm_decision_once">Once</string>
    <string name="mtm_decision_abort">Abort</string>
    <string name="mtm_notification">Certificate Verification</string>
</resources> 
```

第二步，您可以使用以下代码连接 Facebook 并使用您的 Facebook Jabber ID (username@chat.facebook.com) 登录，而不是使用 X-FACEBOOK-PLATFORM 等 SASLAuthentication

```
 public void connectToFb() throws XMPPException {

ConnectionConfiguration config = new ConnectionConfiguration("chat.facebook.com", 5222);
config.setSASLAuthenticationEnabled(true);
config.setSecurityMode(SecurityMode.required);
config.setRosterLoadedAtLogin(true);
config.setTruststorePath("/system/etc/security/cacerts.bks");
config.setTruststorePassword("changeit");
config.setTruststoreType("bks");
config.setSendPresence(false);
try {
    SSLContext sc = SSLContext.getInstance("TLS");
    sc.init(null, MemorizingTrustManager.getInstanceList(this), new java.security.SecureRandom());
    config.setCustomSSLContext(sc);
} catch (GeneralSecurityException e) {
    Log.w("TAG", "Unable to use MemorizingTrustManager", e);
}
XMPPConnection xmpp = new XMPPConnection(config);
try {
    xmpp.connect();
    xmpp.login("facebookusername", "****"); // Here you have to used only facebookusername from facebookusername@chat.facebook.com
    Roster roster = xmpp.getRoster();
    Collection<RosterEntry> entries = roster.getEntries();
    System.out.println("Connected!");
    System.out.println("\n\n" + entries.size() + " buddy(ies):");
    // shows first time onliners---->
    String temp[] = new String[50];
    int i = 0;
    for (RosterEntry entry : entries) {
        String user = entry.getUser();
        Log.i("TAG", user);
    }
} catch (XMPPException e) {
    xmpp.disconnect();
    e.printStackTrace();
}
} 
```

上面的示例运行但不发送消息。如何发送消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-21T07:14:52.940

希望这对你有用。

```
 String msg = edtMsg.getText().toString().trim(); 
    edtMsg.setText("");

    if(!msg.equals("")){
        Message msgObj = new Message("xxx@chat.facebook.com", Message.Type.chat);
        msgObj.setBody(msg);
        connection.sendPacket(msgObj);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T12:30:21.500

您必须在登录成功后设置连接。

/** * 当与 XMPP 建立连接时由设置对话框调用 * 服务器 * * @param 连接 */

```
public void setConnection(XMPPConnection connection) {

        this.connection = connection;
        if (connection != null) {
            // Add a packet listener to get messages sent to us
            PacketFilter filter = new MessageTypeFilter(Message.Type.chat);
            connection.addPacketListener(new PacketListener() {
                public void processPacket(Packet packet) {
                    Message message = (Message) packet;
                    if (message.getBody() != null) {
                        String fromName = StringUtils.parseBareAddress(message
                                .getFrom());
                        Log.i("XMPPClient", "Got text [" + message.getBody()
                                + "] from [" + fromName + "]");
                        messages.add(fromName + ":");
                        messages.add(message.getBody());
                        // Add the incoming message to the list view
                        mHandler.post(new Runnable() {
                            public void run() {
                                setListAdapter();
                            }
                        });
                    }
                }
            }, filter);
        }
    }

private void setListAdapter() {
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                R.layout.multi_line_list_item, messages);
        mList.setAdapter(adapter);
    } 
```

# mysql - MySQL 计数自

> ID：11395187
> 
> 赞同：0
> 
> 时间：2012-07-09T12:38:53.393
> 
> 标签：mysql, sql

我想知道如何用 mysql 查询解决以下问题，但真的不知道如何继续

我有 3 张桌子（我会尽量保持简单）

```
 post

       id  | content 
           |
       1   | bla, bla.. 
```

* * *

```
 comment                          |                votes
                                           |
id | post_id | comment | date              |        id | comment_id | date 
                                           |           |            |
5  |    1    |  derp   | 2012-07-06        |        1  |     5      | 2012-07-07
6  |    1    |  nherp  | 2012-07-07        |        2  |     5      | 2012-07-08
7  |    1    |  yada   | 2012-07-08        |        3  |     5      | 2012-07-09
8  |    1    |  lala   | 2012-07-09        |        4  |     6      | 2012-07-10
                                           |        5  |     6      | 2012-07-11    
                                           |        6  |     7      | 2012-07-12
                                           |        7  |     8      | 2012-07-13
                                           | 
```

它们以这种方式相互联系在一起

comment.post_id 是 post.id 的 fk

votes.comment_id 是 comment.id 的一个 fk

我试图发现的是，在每条评论之后**，整个帖子获得了多少票。**或者换句话说，在提交每条评论后，整个帖子获得了多少票。因此，对于我提出的这个示例案例，我期望的结果将是下表

```
 result

                  id | post_id | comment | date        | votes_after_submission
                     |         |         |             | 
                  5  |    1    |  derp   | 2012-07-06  |          7
                  6  |    1    |  nherp  | 2012-07-07  |          6
                  7  |    1    |  yada   | 2012-07-08  |          5
                  8  |    1    |  lala   | 2012-07-09  |          4 
```

这让我的大脑打了个结，我尝试在 COUNT 语句中使用 CASE 关键字，但实际上并不能让它解决这个问题，谁能给我一些线索，或者指出我正确的方向，或者只是扔给我一些谷歌关键字搜索，因为我没有找到关于这个问题的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:42:55.063

试试这个：：

```
select 
comment.id,
post_id, comment,
date,
count(votes.id) as no_of_vote
from comment
inner join votes on (comment.id=votes.comment_id)
group by comment.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:44:10.977

试试这个：

```
select comment.id, comment.post_id, comment.date, count(1) Votes
    from comments, votes
    where comments.id = votes.comment_id and votes.date >= comments.date
    group by comment.id, comment.post_id, comment.date, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:49:04.953

如果我正确理解您的问题和示例结果，请尝试以下操作：

```
SELECT C.id,C.post_id,C.comment,C.date, 
       (SELECT COUNT(*)
        FROM votes AS V 
        WHERE V.date > C.date 
          AND V.comment_id IN (SELECT id FROM comment AS C2 
                               WHERE C2.post_id=C.post_id)) AS votes_after_submission
FROM comment AS C
ORDER BY C.post_id, C.date 
```

我不确定它是最有效的，但它确实有效。

# json - 使用提升转换 json

> ID：11395188
> 
> 赞同：1
> 
> 时间：2012-07-09T12:38:56.707
> 
> 标签：json, scala, lift

我如何轻松地转换数据？我可以搜索我感兴趣的数据，f。前任：

```
json \\ fieldName1 \\ fieldName2 \\ fieldName3 
```

但是我怎么能这个搜索修改值？F。前任

```
json transform{
  case JField(x,y) => JField(x, z)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T03:15:33.717

如果你使用[lift-json](https://github.com/lift/lift/tree/master/framework/lift-base/lift-json/)，你会得到你想要的：

```
scala> import net.liftweb.json._
scala> import net.liftweb.json.JsonDSL._

scala> val json = 
  ("person" ->
    ("name" -> "Joe") ~
    ("age" -> 35) ~
    ("spouse" -> 
      ("person" -> 
        ("name" -> "Marilyn") ~
        ("age" -> 33)
      )
    )
  )
scala> json transform {
         case JField("name", JString(s)) => JField("NAME", JString(s.toUpperCase))
       }
res8: net.liftweb.json.JsonAST.JValue = JObject(List(JField(person,JObject(List(
JField(NAME,JString(JOE)), JField(age,JInt(35)), JField(spouse,JObject(List(
JField(person,JObject(List(JField(NAME,JString(MARILYN)), JField(age,JInt(33))))))))))))) 
```

以上代码是从链接页面复制的。

如果您不使用lift-json，您可以查看[kiama](https://code.google.com/p/kiama/)，如[this answer所示](https://stackoverflow.com/a/3900498/448141)。

# php - 模块管理器插件是否支持 zen cart 版本 1.5.0？

> ID：11395191
> 
> 赞同：0
> 
> 时间：2012-07-09T12:39:20.303
> 
> 标签：php, zen-cart, zen

我一直在尝试安装，`Module manager`但在我的网站上传模块管理器的所有文件后，`SSU(Simple SEO URL)`我没有在管理面板中获得模块管理器的选项。`Admin->Tools->Module Manager`

我从那里进行谷歌搜索，`"Module manager does not support version 1.5"`所以有任何其他安装 SSU 的选项吗？

如果模块管理器支持 zen cart 1.5.0 版，那么请帮我安装它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T20:33:58.403

Module Manager 是为 1.3.x 系列编写的，在 1.5.0 中不受支持。该模块的作者放弃了 Zen Cart，现在正在另一个平台上工作。SSU 是一个不错的插件，但也充满了错误......

考虑安装[Ceon 的 URI 映射](http://www.zen-cart.com/downloads.php?do=file&id=889)- 恕我直言，这是最好的。另一种选择是[Ultimate SEO URLs](http://www.zen-cart.com/downloads.php?do=file&id=132)，但它甚至不接近 Ceon 的模块。

您可能还想阅读有关该主题的[有趣](http://www.zen-cart.com/showthread.php?197166-SEO-URL-plugins-which-is-the-most-reliable)主题，您会发现最好避免使用 SEO URL，因为 Zen Cart 的动态 URL 已被搜索引擎很好地索引。

# jquery - 如何在同一个网页上多次使用网络用户控件？

> ID：11395196
> 
> 赞同：4
> 
> 时间：2012-07-09T12:39:32.643
> 
> 标签：jquery, asp.net, user-controls, jquery-ui-datepicker

我创建了一个用户控件来从日历中选择日期。我使用 jquery 插件来创建它。我的问题是当我将用户控件放在 aspx 页面上时，它无法正常工作。我的意思是说，如果我放两次而不是只有一个控制工作第二个给我一个错误..那么会有什么问题？

我编写的用于从文件后面的代码注册 jquery 的代码

```
 string jquery = string.Empty;
    jquery = "window.addEvent('domready', function () { new CalendarEightysix('exampleIII', { 'excludedWeekdays': [0, 6], 'toggler': 'imgClick', 'offsetY': -4 });});   ";

    Page.ClientScript.RegisterStartupScript(typeof(Page), "a key", "<script type=\"text/javascript\">" + jquery + "</script>"); 
```

用户控制代码。

```
<script src="JS/mootools-1.2.4-core.js" type="text/javascript"></script>
<script src="JS/mootools-1.2.4.4-more.js" type="text/javascript"></script>
<script src="JS/calendar.js" type="text/javascript"></script>
<link href="CSS/calendar.css" rel="stylesheet" type="text/css" />

<table cellpadding="0">
  <tr>
    <th>
      <asp:Label ID="lblHeading" runat="server" Text="Date"></asp:Label>
    </th>
    <td>
      <input id="exampleIII" name="dateIII" readonly="readonly" type="text" maxlength="10"
        style="padding-right: 15px;" />
      <img src="Images/calendar.gif" alt="" id="imgClick" />
    </td>
  </tr>
</table> 
```

关于这个的任何想法都请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:52:31.243

您的问题是肯定的，因为您的控件中没有放置动态控件 ID，或者动态 javascript 初始化。如果不更改加载多个用户控件的 ID，那么当您尝试使用 javascript 时就会发生冲突。

要制作动态 ID，您可以使用[`ClientID`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)同一控件的属性。

在代码上，您需要进行动态更改的要点是，首先您选择作为简单 html 控件的输入，在 ID 的末尾添加 Current UserControl ID，如下所示：

```
<input id="exampleIII<%=ClientID%>" name="dateIII<%=ClientID%>" readonly="readonly" 
```

和上

```
<img src="Images/calendar.gif" alt="" id="imgClick<%=ClientID%>" /> 
```

然后你将你的javascript更改为：

```
 string jquery = string.Empty;
    jquery = "window.addEvent('domready', function () { new CalendarEightysix('exampleIII"+ ClientID + "', { 'excludedWeekdays': [0, 6], 'toggler': 'imgClick"+ ClientID + "', 'offsetY': -4 });});   ";

    Page.ClientScript.RegisterStartupScript(typeof(Page), "akey"+ClientID, "<script type=\"text/javascript\">" + jquery + "</script>"); 
```

并仅加载您常用的 javascript 库，可能在母版页上，或使用`Page.ClientScript.RegisterStartupScript`

ps：使用`id="exampleIII<%=ClientID%>"`来渲染您的控件，因为`ClientID`仅由他自己就可以使用。因此，您会得到一个包含 ClientID 和 exampleIII 的最终名称。

另一种方法是制作按钮 asp.net 控件，因为使用`<%= %>`UpdatePanels 时会遇到问题。如果你让它们成为 asp.net 控件，那么你可以`ControlName.CliendID`在 javascript init 上使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:46:03.997

当一个页面中包含多个 UserControl 时，客户端出现问题的一个常见原因是使用了具有固定 ID 的 HTML 标记。当您多次包含 UserControl 时，这会导致元素具有重复的 id。

如果没有看到代码，就不可能更精确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:51:35.747

您不能`exampleIII`在您的 javascript 代码中使用此 ID。使用文本框而不是输入标签。

在那里你需要使用 asp.net `ClientID`。

更改您的控件如下：

```
<asp:TextBox ID="exampleIII" runat="server"></asp:TextBox>
<asp:LinkButton ID="imgClick" runat="server"></asp:LinkButton> 
```

像这样的东西：

```
jquery = "window.addEvent('domready', function () { new CalendarEightysix('" + exampleIII.ClientID + "', { 'excludedWeekdays': [0, 6], 'toggler': '" + imgClick.ClientID + "', 'offsetY': -4 });});   ";

Page.ClientScript.RegisterStartupScript(typeof(Page), "a key", "<script type=\"text/javascript\">" + jquery + "</script>"); 
```

参考：[客户ID](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientid.aspx)

> 当 Web 服务器控件呈现为 HTML 元素时，HTML 元素的 id 属性设置为 ClientID 属性的值。ClientID 值通常用于通过 document.getElementById 方法访问客户端脚本中的 HTML 元素。

# mysql - SELECT 中的默认值

> ID：11395197
> 
> 赞同：1
> 
> 时间：2012-07-09T12:39:33.773
> 
> 标签：mysql, sql

我从中学习 SQL：[http ://www.w3schools.com/sql/sql_select.asp](http://www.w3schools.com/sql/sql_select.asp)

```
SELECT LastName,FirstName FROM Persons 
```

这告诉我：

```
LastName   |    FirstName
Hanse      |        Ola
Svendson   |    Tove
Pettersen  |    Kari 
```

我如何在不从 DATABASE 获取数据的情况下添加自己的列？例如：

```
SELECT TEST(default: aaa), LastName,FirstName FROM Persons 
```

这应该告诉我：

```
TEST | LastName   | FirstName
aaa  | Hanse      |        Ola
aaa  | Svendson   | Tove
aaa  | Pettersen  | Kari 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T12:40:57.673

```
SELECT 'aaa' as test, LastName,FirstName FROM Persons 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:56:27.230

如果要在表中的实际字段上创建“默认”值，可以使用[Coalesce](http://msdn.microsoft.com/en-us/library/ms190349.aspx)或[IsNull](http://msdn.microsoft.com/en-us/library/ms184325.aspx)函数（请假设 Test 是实际字段）：

```
SELECT COALESCE(test, 'aaa') as Test, LastName,FirstName FROM Persons

SELECT ISNULL(test, 'aaa') as Test, LastName,FirstName FROM Persons 
```

这两个都将返回字段 Test 的实际值，如果 Test 为 Null，则返回“aaa”。

我们在从表中检索下一个主键时使用 COALESCE（我们不使用 Identity 属性来维护我们的 PK）

```
SELECT (COALESCE(MAX(PK), 0) + 1) FROM TableName 
```

这样，如果表不包含任何行，则将返回 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:43:02.397

Randy 为图像领域提供了最佳方法，但如果`test`是实际领域，您也可以这样做。

```
select case when test is null then 'aaa' else test end, LastName,FirstName 
FROM Persons; 
```

将返回`aaa`if`test`为 null else`test`的值。

# html - 列表项的溢出隐藏

> ID：11395199
> 
> 赞同：0
> 
> 时间：2012-07-09T12:39:42.320
> 
> 标签：html, css, html-lists, overflow

我有一个 UL 列表，其中包含 li 中的图像。我已将 UL 宽度指定为 400px，如果 li 项目更多，那么我希望它被隐藏，但它会在下一行出现。有什么解决办法吗？

这是我的演示 [http://jsfiddle.net/vtuRL/8/](http://jsfiddle.net/vtuRL/8/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:09:50.797

您需要为您设置一个额外`white-space: nowrap;`的`UL`-list 以防止在可用空间末尾换行。

见：http: [//jsfiddle.net/vtuRL/10/](http://jsfiddle.net/vtuRL/10/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:46:59.353

溢出隐藏只允许在 BLOCK 元素上。您不能将 UL 设置为块。但这里有一个关于它如何工作的例子：

[http://jsfiddle.net/vtuRL/9/](http://jsfiddle.net/vtuRL/9/)

刚刚添加

```
.p_gallery { float:left; width:400px; overflow:hidden; } 
```

并更改了 ul CSS

```
.p_gallery ul{ margin:20px 0 20px 24px; background-color:#ccc;  padding:0; float:left; width:1000px;} 
```

# java - 使用 Java 上传 Google List API PDF

> ID：11395200
> 
> 赞同：1
> 
> 时间：2012-07-09T12:39:46.717
> 
> 标签：java, pdf, google-docs-api, google-drive-api

我希望使用可恢复上传机制上传 PDF。但是，Web 服务器抛出 403 异常，指出：“文件必须使用可恢复上传机制上传。” 这尤其令人沮丧，因为我正在使用可恢复的上传机制。我能够将文件更改为 .txt 并且它可以有效地工作。

```
String contentType = DocumentListEntry.MediaType.fromFileName(file3.getName()).getMimeType();
System.out.println("This is break zero.");
MediaFileSource mediaFile = new MediaFileSource(file3, contentType);
System.out.println("This is break one.");
ResumableGDataFileUploader uploader =
      new ResumableGDataFileUploader.Builder(
          client, new URL("https://docs.google.com/feeds/default/private/full"), mediaFile, null /*empty meatadata*/)
          .title(mediaFile.getName())
          .chunkSize(DEFAULT_CHUNK_SIZE).executor(executor)
          .trackProgress(listener, PROGRESS_UPDATE_INTERVAL)
          .build(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T20:15:27.900

您应该将请求发送到可恢复的上传 url，即`https://docs.google.com/feeds/upload/create-session/default/private/full`.

查看可恢复上传文档了解更多详情：[https ://developers.google.com/gdata/docs/resumable_upload](https://developers.google.com/gdata/docs/resumable_upload)

# javascript - CSS和JS，让div跟随滚动

> ID：11395201
> 
> 赞同：1
> 
> 时间：2012-07-09T12:39:53.100
> 
> 标签：javascript, css, css-position

我尝试过使用固定位置，但我似乎不知道怎么`#displayside`做一定要解决这个问题。

如果这个问题太明显，请原谅我，但我刚刚开始编码，我需要帮助。

谢谢！

```
#displayside {
     width: 15%;
    /* margin-left: 25px; */
    float:right;
    text-align:center;
    padding:5px;
    margin:3px;
    background-image:url('/resources/images/htmlbg.jpeg');
   -moz-border-radius: 10px;
   -webkit-border-radius: 10px;
   border-radius: 10px; /* future proofing */
   -khtml-border-radius: 10px; /* for old Konqueror browsers */
   position: fixed; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:43:47.470

采用`position:fixed`

```
#displayside
{
 position:fixed;
} 
```

并根据您的要求设置顶部和左侧

作为

```
#displayside
    {
     position:fixed;
     left:10px;
     top:10px;
    } 
```

# java - Jasper 报告：CSV 和 PDF 问题的相同模板

> ID：11395204
> 
> 赞同：3
> 
> 时间：2012-07-09T12:39:59.000
> 
> 标签：java, jasper-reports

我有一份报告，其中 pdf 和 csv 的导出结果在某些列中有所不同，我想对两个导出都使用相同的模板。与 PDF 输出相比，CSV 会有更多或更少的列。我使用**JRCsvMetadataExporter**作为我的 CSV 导出器。所以我试图做的是为 CSV 和 PDF 创建一个单独的带，在用于 CSV 的带中，我的代码就像

```
<band height="0">
  <printWhenExpression><![CDATA[Boolean.FALSE]]></printWhenExpression>
  <textField>
      <reportElement x="0" y="0" width="119" height="0">
            <property name="net.sf.jasperreports.export.csv.column.name" value="Column_1"/>
             <propertyExpression name="net.sf.jasperreports.export.csv.data"><![CDATA[$F{COL_1}]]></propertyExpression>
       </reportElement>
   </textField>
</band> 
```

但是当我运行导出时，没有为 CSV 生成任何内容，我期待当**printWhenExpression**为 false 时，它​​不会包含在 PDF 导出中，并且 CSV 导出器将包含带中提到的列。谁能让我知道我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-18T04:42:01.360

如果 printWhenExpression 是用 Boolean.FALSE 硬编码的，那么它将永远不会出现在 PDF 和 CSV 中。尝试在 jrxml 中添加宽度和高度为 0 的元素，这将使其不会出现在 PDF 中，但它会出现在 CSV 中，因为您使用的是 JRCsvMetadataExporter

# php - file_get_contents 到一个 json 变量 - twitter 模块

> ID：11395206
> 
> 赞同：0
> 
> 时间：2012-07-09T12:40:04.287
> 
> 标签：php, javascript, json, file-upload, twitter

我对 json 非常陌生，并且已经在这个问题上工作了大约一周。

我使用 php 从帐户列表中检索推文并将它们存储到 .txt 文件中

```
$cache = dirname(__FILE__) . '/../cache/twitter-json.txt';

$data = file_get_contents('http://api.twitter.com/1/lists/statuses.json?    slug=widget&owner_screen_name=webcodepro&count=1&page=1&per_page=8&include_rts=true&include_entities=true');    

    $cachefile = fopen($cache, 'wb');
    fwrite($cachefile,utf8_encode($data));
    fclose($cachefile);

?> 
```

架构师构建前端页面的方式是我需要将 json 值（我在 .txt 文件中拥有的）存储到 .js 文件中的 json 变量中并呈现它。

编辑：所以它已更改为

```
$cache =_ _DIR__.'/cached.txt'; 
$data = file_get_contents('http://api.twitter.com/1/lists/statuses.json?    slug=widget&owner_screen_name=webcodepro&count=1&page=1&per_page=8&include_rts=true&include_entities=true'); 

file_put_contents($cache, $data); 
```

该文件出现空。你们知道可能是什么问题吗？

是否可以将 .txt 文件的内容存储到 .js 文件中的 json 变量中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:45:04.513

1.  不需要，`utf8_encode`因为 JSON 已经是 UTF-8
2.  你可以简单地使用`file_put_contents`
3.  `file_put_contents($cache, 'var myvar = '.$data.';');`

-edit-
澄清我的解决方案的代码：

```
$cache = __DIR__.'/cached.txt';
$data = file_get_contents('http://api.twitter.com/1/lists/statuses.json?slug=widget&owner_screen_name=webcodepro&count=1&page=1&per_page=8&include_rts=true&include_entities=true');
file_put_contents($cache, 'var mydata = '.$data.';'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:56:25.127

> 是否可以将 .txt 文件的内容存储到 .js 文件中的 json 变量中？

对的，这是可能的：

```
$txtFile  = '/path/to/txt-file.txt';
$jsFile   = '/path/to/js-file.js';
$jsPlate  = "var jsVariable = %s;\n";

$string   = file_get_contents($txtFile);
if (FALSE === $string) {
    throw new RuntimeException('Failed to load text-file.');
}

$json     = json_encode($string);
if (FALSE === $json) {
    throw new RuntimeException('Failed to json encode string.');
}

$jsString = sprintf($jsPlate, $json);
$result   = file_put_contents($jsFile, $jsString);
if (!$result) {
    throw new RuntimeException('Failed to save javascript-file.');
} 
```

编码清单：

*   文本文件是 UTF-8 编码的。

# asp.net-mvc - ASP.NET MVC 下拉列表值字段 xxx 必须是数字吗？

> ID：11395211
> 
> 赞同：0
> 
> 时间：2012-07-09T12:40:28.810
> 
> 标签：asp.net-mvc, drop-down-menu

模型

```
public partial class TblMusteriler { 
    public TblMusteriler() { 
       this.TblSayaclar = new HashSet<TblSayaclar>(); 
    } 
    public System.Guid sno { get; set; } 

    [Display(Name = "Müşteri No")] 
    [Required(ErrorMessage = "Müşteri numarası boş geçilemez.")] 
    public string musteri_no { get; set; } 

    [Display(Name = "Müşteri Adı")] 
    [Required(ErrorMessage = "Müşteri adı boş geçilemez.")] 
    public string musteri_adi { get; set; } 
```

控制器

```
public ActionResult SayacEkle()
{
    var musteriler = entity.TblMusteriler.Select(x => new { x.sno, x.musteri_adi });
    ViewBag.musteri_id = new SelectList(musteriler.AsEnumerable(), "sno", "musteri_adi");

    return ContextDependentView(new TblSayaclar());
} 
```

看法

```
@Html.DropDownList("sno", (SelectList)ViewBag.musteri_id, "--Müşteri Seçiniz--") 
```

HTML 输出

```
<select data-val="true" data-val-number="The field sno must be a number." data-val-required="The sno field is required." id="sno" name="sno" class="input-validation-error"><option value="">--Müşteri Seçiniz--</option> 
```

我不应该将 sno 类型更改为数字。它必须是引导类型。如何使用 guid 类型作为下拉列表中的值？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:58:42.640

如果要覆盖错误消息，可以使用可为空的 Guid 和 Required 属性：

```
[Required(ErrorMessage = "Please select a valid SNO")]
public System.Guid? sno { get; set; } 
```

如果您希望默认元数据提供程序为可空类型隐式添加 Required 属性，您可以将您的`AddImplicitRequiredAttributeForValueTypes`属性设置`Application_Start`为 false：

```
DataAnnotationsModelValidatorProvider.AddImplicitRequiredAttributeForValueTypes = false; 
```

# r - 从 R 脚本运行 bash 脚本

> ID：11395217
> 
> 赞同：19
> 
> 时间：2012-07-09T12:40:49.310
> 
> 标签：r, bash

所以我有这个程序 samtools 我想从 cmd 行使用，将一个文件转换为另一个文件。它是这样工作的：

```
bash-4.2$ samtools view filename.bam | awk '{OFS="\t"; print ">"$1"\n"$10}' - > filename.fasta 
```

因为我想自动化这个，我想通过使用 R 脚本来自动化它。我知道您可以使用 system() 来运行操作系统命令，但我无法通过尝试使其工作

```
system(samtools view filename.bam | awk '{OFS="\t"; print ">"$1"\n"$10}' - > filename.fasta) 
```

是否只是使用正则表达式来消除空格和东西，以便命令参数系统（命令）是可读的？我该怎么做呢？

编辑：

> system("samtools view filename.bam | awk '{OFS="\t"; print ">"$1"\n"$10}' -> first_batch_1.fasta") 错误：“system("samtools view filename) 中出现意外输入.bam | awk '{OFS="\"

编辑2：

> system("samtools 查看文件名.bam | awk '{OFS=\"\t\"; print \">\"$1\"\n\"$10}' -> filename.fasta")

```
awk: cmd. line:1: {OFS="    "; print ">"$1"
awk: cmd. line:1:                         ^ unterminated string
awk: cmd. line:1: {OFS="    "; print ">"$1"
awk: cmd. line:1:                         ^ syntax error
> 
```

EDIT3：获胜者是：

```
system("samtools view filename.bam | awk '{OFS=\"\\t\"; print \">\"$1\"\\n\"$10}' -> filename.fasta") 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-09T13:00:31.150

调试的方法是用来`cat`测试你的字符串是否被正确转义。所以：

1.  `x`用你的字符串创建一个对象
2.  小心转义所有特殊字符，在本例中为引号和反斜杠
3.  用于`cat(x)`检查生成的字符串。

例如：

```
x <- 'samtools view filename.bam | awk \'{OFS="\\t"; print ">"$1"\\n"$10}\' - > filename.fasta'

cat(x)
samtools view filename.bam | awk '{OFS="\t"; print ">"$1"\n"$10}' - > filename.fasta 
```

如果这给出了正确的字符串，那么你应该能够使用

```
system(x) 
```

# python - Python 中 RestAPI 的 VCloud Director Org 用户身份验证

> ID：11395224
> 
> 赞同：4
> 
> 时间：2012-07-09T12:41:22.130
> 
> 标签：python, authentication, vmware, vcloud-director-rest-api

我有用于测试的 VMware 设置。我创建了一个用户 abc/abc123 来访问 Org url “http://localhost/cloud/org/MyOrg”。我想访问 VCloud 的 RestAPI。我尝试在**firefox中使用****RestClient**插件。它工作正常。

 **现在我尝试使用 python 代码。

```
url = 'https://localhost/api/sessions/'
req = urllib2.Request(url)
base64string = base64.encodestring('%s:%s' % ('abc@MyOrg', 'abc123'))[:-1]
authheader =  "Basic %s" % base64string
req.add_header("Authorization", authheader)
req.add_header("Accept", 'application/*+xml;version=1.5')

f = urllib2.urlopen(req)
data = f.read()
print(data) 
```

这是我从 stackoverflow 获得的代码。但对于我的示例，它给出“urllib2.HTTPError：HTTP 错误 403：禁止”错误。

我也尝试过同样的 HTTP 身份验证。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-10T08:12:52.637

做了一些谷歌搜索后，我从帖子[https://stackoverflow.com/a/6348729/243031](https://stackoverflow.com/a/6348729/243031)中找到了解决方案。我更改了代码以提高可用性。我发布答案是因为如果有人有同样的错误，那么他会直接得到答案。

我的更改代码是：

```
import urllib2
import base64

# make a string with the request type in it:
method = "POST"
# create a handler. you can specify different handlers here (file uploads etc)
# but we go for the default
handler = urllib2.HTTPSHandler()
# create an openerdirector instance
opener = urllib2.build_opener(handler)
# build a request
url = 'https://localhost/api/sessions'
request = urllib2.Request(url)
# add any other information you want
base64string = base64.encodestring('%s:%s' % ('abc@MyOrg', 'abc123'))[:-1]
authheader =  "Basic %s" % base64string
request.add_header("Authorization", authheader)
request.add_header("Accept",'application/*+xml;version=1.5')

# overload the get method function with a small anonymous function...
request.get_method = lambda: method
# try it; don't forget to catch the result
try:
    connection = opener.open(request)
except urllib2.HTTPError,e:
    connection = e

# check. Substitute with appropriate HTTP code.
if connection.code == 200:
    data = connection.read()
    print "Data :", data
else:
    print "ERRROR", connection.code 
```

希望这会帮助一些想要在没有数据的情况下发送**POST**请求的人。**

# c# - 如何使用当前用户位置的纬度和经度查找 25 英里的周边区域

> ID：11395232
> 
> 赞同：-3
> 
> 时间：2012-07-09T12:41:53.593
> 
> 标签：c#, math

我发现 C# 中的 Haversine 公式有没有比这更好的方法。

```
public double HaversineDistance(LatLng pos1, LatLng pos2, DistanceUnit unit)
    {
        double R = (unit == DistanceUnit.Miles) ? 3960 : 6371;
        var lat = (pos2.Latitude - pos1.Latitude).ToRadians();
        var lng = (pos2.Longitude - pos1.Longitude).ToRadians();
        var h1 = Math.Sin(lat / 2) * Math.Sin(lat / 2) +
                      Math.Cos(pos1.Latitude.ToRadians()) * Math.Cos(pos2.Latitude.ToRadians()) *
                      Math.Sin(lng / 2) * Math.Sin(lng / 2);
        var h2 = 2 * Math.Asin(Math.Min(1, Math.Sqrt(h1)));
        return R * h2;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:18:42.907

我想这是你想用它做什么的问题。我的猜测是您正在尝试根据邮政编码计算距离，并且您想知道 pos2 是否在 pos1 的 x 距离内。

您首先需要了解的是（除非您有一些很棒的地理空间数据可供使用）所有计算通常不会考虑给定区域的海拔或任何其他地形属性，因此您的计算将不准确。此外，这些计算是“乌鸦飞”，这意味着点 x 到点 y 是一条直线，因此虽然点 y 可能位于中心点 x 的 25 英里范围内，但实际上从中心点 x 到点 y 的行程可能是 30 英里。

话虽如此，Haversine 公式是您最好的选择，除非您计算的是小距离（< ~12 英里），在这种情况下，您可以使用勾股定理，其表示为：

d = sqrt((X2 - X1)^2 + (Y2 - Y1)^2)

显然，X 和 Y 是你的坐标。这要快得多，但准确度要低得多，尤其是随着距离的增加。

Haversine 公式很慢，特别是如果您重复调用它，但我不知道有任何更快的方法可以根据此公式计算距离。

# javascript - OpenLayers 有界缩放到美国

> ID：11395236
> 
> 赞同：2
> 
> 时间：2012-07-09T12:42:21.913
> 
> 标签：javascript, openlayers

您好，我正在使用 OpenLayers，我想制作缩放地图以显示所有美国领土我已将下一个代码添加到我的 JS 文件中

```
zoomMapTo: function (x1, y1, x2, y2) {
    var bounds = new OpenLayers.Bounds(x1, y1, x1, y2);
    map.zoomToExtent(bounds,4);
} 
```

但我不知道我应该用坐标来称呼它

```
zoomMapTo(-19838714.3168264, 2146075.00656018, 19971050.5931969, 11542768.518094); 
```

或者

```
zoomMapTo(-120, 20, -70, 50); 
```

但是我去海洋中请一定要使用那个坐标？

感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T20:18:20.657

我发现我需要将其转换为`EPSG:4326`：

```
var bounds = new OpenLayers.Bounds(); 
bounds.extend(new OpenLayers.LonLat(x1, y1).transform(new OpenLayers.Projection("EPSG:4326"), appOL.mapobj.map.getProjectionObject())); 
bounds.extend(new OpenLayers.LonLat(x2, y2).transform(new OpenLayers.Projection("EPSG:4326"), appOL.mapobj.map.getProjectionObject() 
```

# matlab - 如何在 Matlab 的内置 SVM 中使用 Bhattacharyya 作为核函数？

> ID：11395238
> 
> 赞同：1
> 
> 时间：2012-07-09T12:42:23.243
> 
> 标签：matlab, image-recognition, svm

我想知道是否有办法在 Matlab 中将 Bhattacharyya 距离或内核与 SVM 一起使用？我正在使用 Matlab 中的内置 SVM 工具并将 Bhattacharyya 定义为外部内核函数，但似乎不能以这种方式使用（因为它不是合适的内核函数）。

有没有一种已知的方法可以在 Matlab 中将它与 SVM 一起使用？

如果不是，我如何才能了解更多关于默认内核函数如何工作的信息，以便我可以调整该函数以使其工作？

谢谢你。

# android - 蓝牙套接字仅返回 null。安卓蓝牙

> ID：11395247
> 
> 赞同：1
> 
> 时间：2012-07-09T12:42:46.780
> 
> 标签：android

我正在尝试使用该`connect`方法连接到套接字。我正在生成一个包含 UUID 的字符串，如下所示：

```
MY_UUID = UUID.fromString("45341da0-c9c1-11e1-9b21-0800200c9a66"); 
```

然后构造一个`BluetoothSocket`这样的：

```
BluetoothSocket tmp = null; 
```

我还想通过其 MAC 地址连接到特定设备：

```
BluetoothDevice device = BluetoothAdapter.getDefaultAdapter().getRemoteDevice("00:1B:DC:0F:EC:7E"); 
```

然后制作`bluetoothSocket`

```
try {
    tmp = device.createInsecureRfcommSocketToServiceRecord(MY_UUID);    
    } catch (IOException e) {
    Toast.makeText(getApplicationContext(), "Exception1: " + e.getMessage(), Toast.LENGTH_LONG).show();
    } 
```

只是为了测试我添加了一个断点，`tmp`在`try catch`. 但它只包含`NULL`远程设备确实支持OBEX OPP，但这只是`RFCOMM`蓝牙堆栈之上的一层，所以我认为我的设备应该支持RFCOMM进行连接。谁能告诉我为什么我的`tmp`对象设置为`null`？

无论如何，我可以在创建套接字时进行测试吗？

# javascript - 缺少：在属性 id (jquery) 之后

> ID：11395249
> 
> 赞同：1
> 
> 时间：2012-07-09T12:42:56.853
> 
> 标签：javascript, jquery, html

我在萤火虫控制台中收到此错误，无法找出原因。我的代码如下：

```
$(document).ready(function(){
    var header = $('h2#chase');
    var headerOffset = header.offset();
    header.css({
        "position" : "absolute",
        "left" : headerOffset.left+"px",
        "top" : headerOffset.top+"px"
    });

    var headerSize = {width: header.width(), height: header.height()};
    var headerBounds = {top: headerOffset.top, right: headerOffset.left + headerSize.width, bottom: headerOffset.top + headerSize.bottom, left: headerOffset.left};
    var windowBounds = {top: 0, right: $(window).width() - headerSize.width, bottom: $(window).height() - headerSize.height, left: 0};
    var maxLeft = $(window).width() - headerSize.width;
    var maxTop = $(window).height() - headerSize.height;

    var margin = 30;

    $(window).mousemove(function(e){
        headerOffset = header.offset();
        headerBounds = {top: headerOffset.top, right: headerOffset.left + headerSize.width, bottom: headerOffset.top + headerSize.height, left: headerOffset.left};
        var sides = whichSides(e.pageX, e.pageY);
        $.each(sides, function(key, value) {
            header.css({
                value.side : value.newValue+"px"
            })
        });
    });

    function whichSides(mouseX, mouseY) {
        var sides = [];
        var sideOffsets = {top: headerBounds.top - mouseY, right: mouseX - headerBounds.right, bottom: mouseY - headerBounds.bottom, left: headerBounds.left - mouseX};
        var newValues = {top: mouseY + margin, right: mouseX - margin, bottom: mouseY - margin, left: mouseX + margin};
        $.each(sideOffsets, function(key, value) {
            if (value < 30 && value >= 0) {
                sides.push({side: key, newValue: newValues[key]});
            }
        });
        return sides;
    }
}); 
```

错误萤火虫正在返回：

```
 missing : after property id (line 24, col 9)
    value.side : value.newValue+"px" 
```

**编辑：**抱歉，我似乎从今天早上早些时候写的草稿中发布了代码，我已经用真正错误的代码更新了它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:58:43.320

在这一点：

```
header.css({
    value.side : value.newValue+"px"
}) 
```

`value.side`不是位于左侧的有效构造`:`

我不确定你想要做什么，但它应该更多的是：

```
header.css({
    side : value.newValue+"px"
}) 
```

阅读您的评论后，您可以这样做：

```
var o = {}

o[value.side] = value.newValue+'px';

header.css(o); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:04:04.820

正如 Ben 所指出的，您不能在对象文字表达式的左侧（键）中包含变量。您需要单独设置它：

```
function make_pair(key, value){
    var obj = {};
    obj[key] = value;
    return obj;
}

header.css( make_pair(value.side, value.newValue+"px") ) 
```

# css - CSS 无法在 jsp、tomcat 和 servlet 中正确加载

> ID：11395252
> 
> 赞同：4
> 
> 时间：2012-07-09T12:43:06.837
> 
> 标签：css, jsp, tomcat, servlets

![我的项目目录](../Images/c9ad3b350f05a1b5cc8751e6d79fea93.png)
登录.css

```
body {
    font-family: "Trebuchet MS", Tahoma, Arial, Geneva, sans-serif, Helvetica, sans-serif;
    font-size: 13px;
    background: url(../images/bg.png) 0 64px repeat-x;
    margin: 0;
}

.wrapper {
    xmargin: 0 auto;
}

#border-top.h_green {
    background: url(../images/j_header_middle.png) repeat-x;
    height: 84px;
    xmargin: 0 auto;
}

#contentbox {
    width: 755px;
    margin: 0 auto;
    xbackground: #efefef;
    padding: 0px;
    position: relative;
}
#header-top {
    width: 960px;
    margin: 0 auto;
    xbackground: #efefef;
    padding: 0px;
    position: relative;
}

#menuheader {
    position: relative;
}

#contentbox p {
    padding: 0 0 10px 0;
}

#menubox {
    background: #fff;
    padding: 3px 10px;
    border-left: 1px solid #cccecc;
    border-right: 1px solid #cccecc;
    height: 15px;
}

#user_name {
    position: absolute;
    right: 0px;
    top: 0px;
    xbackground: url(../../../images/icons/user.png) no-repeat scroll 0 2px
        transparent;
    padding-left: 20px;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    font-size: 11px;
    font-weight: bold;
    color: #666;
}

.loginwrapper {
    width: 755px;
    margin: 0 auto;
}

.btn{ 
    background:url(../images/btn.jpg) repeat-x;
    height:28px;
    border:none;
    color:#fff;
    margin-top:20px;
}

.loginbox {
    background: url(../images/login_shadow.png) no-repeat;
    height: 310px;
    padding: 40px;
}

.rightsection {
    width: 85%;
    float: right;
    border-bottom: 1px solid #cccc;
}

.rightboxwrapper {
    float: left;
    width: 325px;
    padding-right: 30px;
    background: url(../images/loginleft.png) no-repeat center bottom;
    height: 262px;
}

.rightboxwrapper .loginheader h2 {
    color: #0588ab;
    font-size: 16px;
    font-family: trebuchet MS;
    margin: 0;
    text-align: left;
}

.loginform input {
    width: 170px;
}

.loginform input#btnsubmit {
    width: 80px !important;
    border: none;
}

.loginform {
    padding: 10px 0 0 45px;
    line-height: 35px;
    background: url(../images/lock.png) no-repeat right center;
    width: 335px;
}

.loginform td {
    color: #333333;
    font-family: trebuchet MS;
    font-size: 12px;
    padding: 0;
    margin: 0;
}

.copyright {
    width: 100%;
    text-align: right;
    padding: 5px 0px;
    font-size: 11px;;
    color: #0588ab;
    font-family: trebuchet MS;
}

.copyright p {
    padding-right: 15px !important;
} 
```

索引.jsp

```
<%@ page language="java" contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META HTTP-EQUIV="Expires" CONTENT="-1">
<title>Login Page</title>
<link rel="stylesheet" type="text/css" href="css/login.css"/>
<script src="js/jquery.js" type="text/javascript"></script>
<script src="js/jquery.validate.js" type="text/javascript"></script>
<script src="js/jquery.metadata.js" type="text/javascript"></script>

<script type="text/javascript">
$(document).ready(function() {
    $("#commentForm1").validate({meta: "validate"});
                required: 'Enter this!'
            });
</script>
<style type="text/css">
form { width: 500px; }
form label { width: 250px; }
form label.error, 
form input.submit { color: red; font-size: 20px; }
</style>
</head>
<body>
<div class="wrapper">
<!--maindiv wrapper starts-->
    <div id="border-top" class="h_green">
      <!--header starts-->
      <div id="header-top">

        <div><img width="249" height="54" style="padding:15px 0 0 0px" src="images/companylogo.png"> </div>
      </div>    
    </div>
    <div id="contentbox">
<div style="background:none;border:none;" id="menubox">
  <div id="menuheader">
    <div id="message">
      <p style="text-align:center; padding-top:10px;" class="message_text"> </p>

    </div>
    <div id="user_name">
          </div>
  </div>
  </div>
<div class="loginbox">
<div style="width:100%!important;" class="rightsection">

    <form name="loginform" action="loginServlet" method="post" id="commentForm1">

        <div class="loginwrapper">

            <div class="rightboxwrapper">

            <table cellspacing="0" cellpadding="0" border="0" align="center" class="loginform">
           <tbody><tr class="loginheader">
            <th style="color:#0588ab; font-size:12px; font-family:Helvetica; text-transform:uppercase; height:35px;"> <h2>Login</h2></th>
          </tr>
          <tr>
            <td style="color:#0588ab; font-size:12px; font-family:Helvetica; text-transform:uppercase; height:25px;">User ID </td></tr>
            <tr>

            <td style="color:#0588ab; font-size:12px; font-family:Helvetica; text-transform:uppercase; height:25px;"><input type="text" id="username" name="username" class="{validate:{required:true, messages:{required:'*'}}}"></td>
          </tr>
          <tr>
             <td style="color:#0588ab; font-size:12px; font-family:Helvetica; text-transform:uppercase; height:25px;">Password</td></tr>
            <tr>
            <td style="color:#0588ab; font-size:12px; font-family:Helvetica; text-transform:uppercase; height:25px;"><input type="password" id="password" name="password" class="{validate:{required:true, messages:{required:'*'}}}"></td>
          </tr>

          <tr>
           <td colspan="2">
         <input value="Login" class="btn"  style="width:60px;" type="submit"/>
         <input value="Reset" class="btn" style="width:60px; margin-left:10px;" type="reset"/>
         </td>

         </tr>

        </tbody></table>
            </div>
            <div class="imagewrapper">
            <img width="323px" height="262px" src="images/loginimg.png">     

            </div>
         </div> <div style="clear:both; color:fff"></div>
    </form>
</div>
<div class="cleared"></div>

</div>

 <div id="footerwrapper"><!--Div for the Footer -->
    <div class="copyright">
        <p>Copyright &copy; 2012 BitsCrafters HRM All rights reserved.</p>
    </div><!--ended Footer Div-->
 </div>   
</div>
</div>

</body>
</html> 
```

这段代码有什么问题？谁能帮我解决这个问题？出了点问题，因为当我通过 tomcat 运行它时，有时它可以工作，但有时它不起作用，某些图标和图像不显示。在浏览器中，我检查了查看源代码以检查 css 路径是否正确。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-25T15:20:23.437

遇到同样的问题，只需更正 href 路径：

```
<link rel="stylesheet" type="text/css" href="./css/login.css"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:59:17.690

代码和 CSS 乍一看是正确的，所以错误在别处。

1.  使用 Firebug 或“Ins​​pect Element”之类的工具来检查您的浏览器得到了什么。所有这些工具都有一个网络选项卡，您可以在其中查看浏览器请求的内容和获得的内容。寻找：

    1.  您是否看到所有您期望的 URL？
    2.  服务器能否提供所有这些服务（HTTP 状态 200）
    3.  检查文件的内容。它们是否包含您的期望？
2.  检查错误控制台。你有任何 CSS / JavaScript 错误吗？

3.  检查有问题的元素。它有正确的 CSS 样式吗？在 CSS 面板中，您看到正确的样式了吗？

# string - 使用两种单独的编码在 Ruby 上加载文件

> ID：11395253
> 
> 赞同：3
> 
> 时间：2012-07-09T12:43:11.880
> 
> 标签：string, encoding, encode, ruby-1.9

我有一个带有两种不同编码的大文件。“主”文件是 UTF-8，但某些字符（如`<80>`（isoxxx 中的€）或`<9F>`（isoxxx 中的ß））采用 ISO-8859-1 编码。我可以用它来替换无效字符：

```
 string.encode("iso8859-1", "utf-8", {:invalid => :replace, :replace => "-"}).encode("utf-8") 
```

问题是，我需要这个错误的编码字符，所以替换为“-”对我来说没用。如何使用 ruby​​ 修复文档中错误的编码字符？

**编辑**：我试过这个`:fallback`选项，但没有成功（没有替换）：

```
 string.encode("iso8859-1", "utf-8",
     :fallback => {"\x80" => "123"}
 ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T16:25:38.957

这是我之前代码的一个非常快的版本，与 Ruby 1.8 和 1.9 兼容。

我可以用正则表达式识别无效的 utf8 字符，我只转换它们。

```
class String

  # Regexp for invalid UTF8 chars.
  # $1 will be valid utf8 sequence;
  # $3 will be the invalid utf8 char.
  INVALID_UTF8 = Regexp.new(
    '(([\xc0-\xdf][\x80-\xbf]{1}|' +
    '[\xe0-\xef][\x80-\xbf]{2}|' +
    '[\xf0-\xf7][\x80-\xbf]{3}|' +
    '[\xf8-\xfb][\x80-\xbf]{4}|' +
    '[\xfc-\xfd][\x80-\xbf]{5})*)' +
    '([\x80-\xff]?)', nil, 'n')

  if RUBY_VERSION >= '1.9'
    # ensure each char is utf8, assuming that
    # bad characters are in the +encoding+ encoding
    def utf8_ignore!(encoding)

      # avoid bad characters errors and encoding incompatibilities
      force_encoding('ascii-8bit')

      # encode only invalid utf8 chars within string
      gsub!(INVALID_UTF8) do |s|
        $1 + $3.force_encoding(encoding).encode('utf-8').force_encoding('ascii-8bit')
      end

      # final string is in utf-8
      force_encoding('utf-8')
    end

  else
    require 'iconv'

    # ensure each char is utf8, assuming that
    # bad characters are in the +encoding+ encoding
    def utf8_ignore!(encoding)

      # encode only invalid utf8 chars within string
      gsub!(INVALID_UTF8) do |s|
        $1 + Iconv.conv('utf-8', encoding, $3)
      end

    end
  end

end

# "\xe3" = "ã" in iso-8859-1
# mix valid with invalid utf8 chars, which is in iso-8859-1
a = "ãb\xe3"

a.utf8_ignore!('iso-8859-1')

puts a   #=> ãbã 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:09:36.410

我使用了以下代码（Ruby 1.8.7）。它测试每个 char >= 128 ASCII 以检查它是否是有效 utf-8 序列的开始。如果不是，则假定为 iso8859-1 并将其转换为 utf-8。

由于您的文件很大，这个过程可能会很慢！

```
class String
  # Grants each char in the final string is utf-8-compliant.
  # based on http://php.net/manual/en/function.utf8-encode.php#39986
  def utf8
    ret = ''

    # scan the string
    # I'd use self.each_byte do |b|, but I'll need to change i
    a = self.unpack('C*')
    i = 0
    l = a.length
    while i < l
      b = a[i]
      i += 1

      # if it's ascii, don't do anything.
      if b < 0x80
        ret += b.chr
        next
      end

      # check whether it's the beginning of a valid utf-8 sequence
      m = [0xc0, 0xe0, 0xf0, 0xf8, 0xfc, 0xfe]
      n = 0
      n += 1 until n > m.length || (b & m[n]) == m[n-1]

      # if not, convert it to utf-8
      if n > m.length
        ret += [b].pack('U')
        next
      end

      # if yes, check if the rest of the sequence is utf8, too
      r = [b]
      u = false

      # n bytes matching 10bbbbbb follow?
      n.times do
        if i < l
          r << a[i]
          u = (a[i] & 0xc0) == 0x80
          i += 1
        else
          u = false
        end
        break unless u
      end

      # if not, converts it!
      ret += r.pack(u ? 'C*' : 'U*')
    end

    ret
  end

  def utf8!
    replace utf8
  end
end

# let s be the string containing your file.
s2 = s.utf8

# or
s.utf8! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:04:15.647

你在找这样的东西吗？

[http://jalada.co.uk/2011/12/07/solving-latin1-and-utf8-errors-for-good-in-ruby.html](http://jalada.co.uk/2011/12/07/solving-latin1-and-utf8-errors-for-good-in-ruby.html)

# ios - 滑动 UIViewController 以弹出 - 就像在 Readability 应用程序中一样

> ID：11395254
> 
> 赞同：4
> 
> 时间：2012-07-09T12:43:21.303
> 
> 标签：ios, uiviewcontroller

我正在尝试模拟在 Readability 应用程序中看到的滑动 UIViewController。您可以将页面向右拖动，它将当前视图从堆栈中弹出以返回父 UIViewController，并带有如图所示的滑动动画：最右侧的视图位于顶部，并且被向右拖动，显示左边的原始表。

![视图向右滑动](../Images/0d45b09a6e615847c9ea8fa9140d4b10.png)

我已经尝试了一些slidingUIViewController 解决方案，例如ECSlidingViewController，但他们尝试模拟Facebook/Path 的行为，将slidingUIViewController 部分滑动到另一个之上，这不是Readability 所做的。

我也尝试过标准的水平滚动 UIScrollView 但滚动就像页面在两侧连接，而不是在另一个视图上滑动一个视图。

有谁知道他们是怎么做到的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:06:59.137

This can be easily accomplished in few steps. I'm not going to write down all the code you need to write in order to do it, but just the steps you need to take. I will use a master-details terminology where the master view is the one from which you want to present a details view and the details view is of course the one at the top of the navigation stack.

When you want to present the detail view:

1) create an instance of the UIViewController that handles the interactions with the detailView. On iOS 5+ you can store this instance in the childrenViewControllers @property on the master's viewController. If you support a lower OS you should store the instance in an ivar.

2) set the detailView's frame to be outside the screen's bounds; add to detailView a shadow for graphical purposes. Finally add the detailView as a subview of the masterView.

3) (optional) add a pan gesture recognizer to the detailView in order to allow the user to swipe the view back and dismiss it.

4) animate the detailView in the screen's bounds. Make sure the interactions with the view below are disabled (be careful not to disable also the interactions with the detailsView!)

When you want to dismiss the detail view:

1) animate the detailView outside the screen's bounds.

2) remove it from it's superview and delete the reference to it's viewController.

3) re-enable the user interaction with the master view.

# string - 搜索字符串的内容

> ID：11395255
> 
> 赞同：0
> 
> 时间：2012-07-09T12:43:29.757
> 
> 标签：string, file, search, google-apps-script

我似乎缺少 Google 脚本中的基本字符串操作。

如何在 stringB 中搜索 stringA ？

我在文件数组 (doclist.find) 中的描述字段中搜索特定关键字。

也许还有另一种方法可以做到这一点，我尝试使用 regexp 或 underscoregs._find 但没有让它工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:55:01.040

你有没有尝试过

```
var index = stringB.indexOf(stringA); 
```

如果未找到 stringA，则返回 -1，如果找到，则返回 stringA 在 stringB 中的位置。对于所有 String 操作，JavaScript 规范都适用。 [尝试 w3schools 寻求帮助](http://www.w3schools.com/jsref/jsref_obj_string.asp)

# window - 如何使用 Radrails 查找和打印所有现有的窗口标题？

> ID：11395257
> 
> 赞同：1
> 
> 时间：2012-07-09T12:43:32.193
> 
> 标签：window, watir

我在 radrails IDE 中使用 watir。如何查找和打印所有现有的窗口标题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T18:38:35.437

我只能使用 win32ole 获取所有窗口。请注意，这只适用于 IE（我假设您正在使用它，因为问题的标签是 watir 而不是 watir-webdriver）。

以下是输出所有标题的示例：

```
require 'win32ole'
WIN32OLE.new('Shell.Application').Windows.each do |window|
    if window.path =~ /Internet Explorer/
        puts window.Document.Title
    end
end 
```

# android - 如何在按钮单击事件中调用异步任务

> ID：11395262
> 
> 赞同：5
> 
> 时间：2012-07-09T12:43:43.140
> 
> 标签：android, multithreading, android-asynctask

我正在编写这个应用程序，我从 tcp 连接获取实时图像，我需要在 ImageViev 上显示它们。

我正在做的是在按钮单击中调用 asynctask。但它似乎创建了许多后台线程。

这是按钮单击事件的代码

```
 btnLive.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        try
        {
            String name = ((Button)v).getText().toString();
            if(name.equalsIgnoreCase("Live"))
            {
                DataOutputStream dos;
                DataInputStream dis;
                String reply;

                if(config.conn.isConnected())
                {
                    dos = new DataOutputStream(config.conn.getOutputStream());
                    dos.writeBytes("STREAM-LIVE-IMAGES");                                       
                    dos.flush();
                    //dis = new DataInputStream(in);

                    in = config.conn.getInputStream();                      
                    while (true) 
                    {                               
                        new myTask().execute(in);
                    }
                }                   
            }
        }
        catch(Exception ex)
        {
            Log.d("Live Button ", "Exception " + ex.getMessage() );
        }
    }
}); 
```

这是 asyncTask 的代码

```
 class myTask extends AsyncTask<InputStream, Integer, Bitmap> {

protected Bitmap doInBackground(InputStream...in) 
{
    Bitmap bmp = null;

    try 
    {
        //Do some none UI stuff here and return a value *result                 
        byte[] rcvPacket = ReadJpegBinaryAndRemoveDelimiter(in[0]);
        bmp = BitmapFactory.decodeByteArray(rcvPacket, 0, rcvPacket.length);
        Log.d("Live Image Streaming ", "Recieved Images: " + rcvPacket.length + " " +  bmp);

    } catch (Exception e) {
        e.printStackTrace();                    
    }
    return bmp;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:46:18.950

```
while (true) {                               
 new myTask().execute(in);
} 
```

因为你`AsyncTask`在循环中执行，在你的情况下是*无限循环*，听起来不太好，你需要改变它。

您需要在循环外*执行*。你不应该，不应该这样做。

打电话

```
new myTask().execute(in); 
```

没有循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T17:59:55.143

我设法用后台线程对其进行了整理，因为 asynctask 不是我的问题的正确选择。

所以我创建了一个单独的后台线程，并在 imageview 上使用了 post runnable 方法来更新 UI。

# php - Windows 时间语言环境到 PHP 语言环境

> ID：11395274
> 
> 赞同：0
> 
> 时间：2012-07-09T12:44:20.880
> 
> 标签：php, windows, timezone

我正在开发一个 PHP 应用程序，它提供了来自 Dynamics CRM 的时间戳。每个时间戳都以 ISO8601 格式提供，因此我们得到相对于 UST 的时间。

现在，我们还得到了一个时区编号。这是必需的，因此我们可以正确显示时区。例如，我们可能在夏季得到 16:00+1，时区为 85（英国，我相信），因此将显示为 16:00 BST。

PHP 在使用 DateTime 类显示格式化的日期和时间时，需要这种格式的时区：“欧洲/伦敦”。

现在，我需要的是从 Dynamic 的“85”到 PHP 的“Europe/London”的翻译。我不知道这两个列表中的任何一个叫什么（85 看起来像是我从 DOS 时代记得的东西），而且我在任何地方都找不到任何映射表或列表。

简而言之：我们在 PHP 上拥有 - 或可以派生 - 本质上是 unix 时间戳，并从 MS Dynamics 获得“时区”编号，并且需要能够以适合时区的格式显示该时间戳，例如“16:00英国夏令时”、“格林威治标准时间 15:00”、“美国东部标准时间 11:00”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:57:06.650

这是解释代码 85 含义的表格：http: [//msdn.microsoft.com/en-us/library/aa226764 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa226764(v=sql.80).aspx)

但是您无法准确定义时区中的位置（欧盟/伦敦）。

# c# - 可以用jquery设置di v内容

> ID：11395279
> 
> 赞同：0
> 
> 时间：2012-07-09T12:44:47.367
> 
> 标签：c#, javascript, jquery, asp.net

为什么我不能将动态文本放在名为 foo 的 div 上？以下是 asp.net 代码隐藏中的方法。

```
StringBuilder script = new StringBuilder();
        script.Append("<script type='text/javascript'>");
        script.Append("                                $(document).ready(function () {");
        script.Append("                                    $('<div id=foo></div>').appendTo('body');");
        script.Append("                                    var dlg = $('#foo');");
        script.Append("                                    dlg.dialog({");
        script.Append("                                         autoOpen: true,");
        script.Append("                                         resizable: false,");
        script.Append("                                         draggable: false,");
        script.Append("                                         modal: true,");
        script.Append("                                         title: 'Información',");
        script.Append("                                         width: 400,");
        script.Append("                                         height: 200,");
        script.Append("                                         buttons: {");
        script.Append("                                            'Cerrar': function () {");
        script.Append("                                            $(this).dialog('close');");
        script.Append("                                         }");
        script.Append("                                       }");
        script.Append("                                   });");
        script.Append("     $('#foo').html(<p>"+info+"</p>);");
        script.Append("                                });");

        script.Append("</script>");

        ClientScript.RegisterStartupScript(this.GetType(), "launchModalWindow", script.ToString()); 
```

问题出在这一行：

```
script.Append("     $('#foo').html(<p>"+info+"</p>);"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T12:48:23.223

```
script.Append("$('#foo').html('<p>hola</p>');"); 
```

在 document.ready 的上下文之外。

将其向上移动一行，以便在页面准备好加载时运行它。

```
StringBuilder script = new StringBuilder();
    script.Append("<script language='javascript'>");
    script.Append("                                $(document).ready(function () {");
    script.Append("                                    $('<div id=foo></div>').appendTo('body');");
    script.Append("                                    var dlg = $('#foo');");
    script.Append("                                    dlg.dialog({");
    script.Append("                                         autoOpen: true,");
    script.Append("                                         resizable: false,");
    script.Append("                                         draggable: false,");
    script.Append("                                         modal: true,");
    script.Append("                                         title: 'Información',");
    script.Append("                                         width: 400,");
    script.Append("                                         height: 200,");
    script.Append("                                         buttons: {");
    script.Append("                                            'Cerrar': function () {");
    script.Append("                                            $(this).dialog('close');");
    script.Append("                                         }");
    script.Append("                                       }");
    script.Append("                                   });");
    script.Append("$('#foo').html('<p>hola</p>');");
    script.Append("                                });");
    script.Append("</script>"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T14:47:46.247

像这样放置动态文本：

```
script.Append("                                    $('<div id=foo class=vw1>"+ info +"</div>').appendTo('body');"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T12:48:49.497

应该是`<div id="foo">`。您缺少引号。

此外，您希望在

```
$(document).ready(function() {
    $('#foo').html('<p>hola</p>');
} 
```

# c++ - C++ 错误：“。”之前的预期主表达式 令牌

> ID：11395280
> 
> 赞同：7
> 
> 时间：2012-07-09T12:44:47.443
> 
> 标签：c++, c++11, initialization

我看了前面的问题，但我仍然不满意，因此我发布了这个。我试图编译别人编写的 C++ 代码。

```
/*
file1.h
*/
#include <stdio.h>
#include <stdlib.h>
typedef struct
{
    struct
    {   
        unsigned member1;
        unsigned  member2; 
    } str1;

    struct
    {
        unsigned member3;
        unsigned  member4; 
    } str2;

    struct
    {
        unsigned member5;
        unsigned  member6; 
    } str3;
} CONFIG_T;

/* 
file1.c
*/
CONFIG_T  cfg =
{
    .str1 = { 0x01, 0x02 },
    .str2 = { 0x03, 0x04 },
    .str3 = { 0x05, 0x06 }
}; 
```

用标准 C++11 编译，我得到以下错误。为何 '。' 分配值时已在代码中使用？

```
home $$  g++ -c -std=gnu++0x  initialze_list.cpp

initialze_list.cpp:34: error: expected primary-expression before ‘.’ token

initialze_list.cpp:35: error: expected primary-expression before ‘.’ token

initialze_list.cpp:36: error: expected primary-expression before ‘.’ token 
```

我无法理解错误的原因。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:49:09.403

您发布的是 C 代码，而不是 C++ 代码（注意 .c 文件扩展名）。但是，以下代码：

```
CONFIG_T  cfg =
{
    { 0x01, 0x02 },
    { 0x03, 0x04 },
    { 0x05, 0x06 }
}; 
```

应该可以正常工作。

您还可以在[wiki](http://en.wikipedia.org/wiki/C++11#Initializer_lists)中阅读有关 C++11 初始化列表的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:23:48.657

```
/* 
file1.c
*/
CONFIG_T  cfg =
{
  .str1 = { 0x01, 0x02 },
  .str2 = { 0x03, 0x04 },
  .str3 = { 0x05, 0x06 }
}; 
```

该代码使用称为**指定初始化程序**的 C99 功能。正如您所观察到的，该功能在 C++ 和 C++11 中不可用。

* * *

[正如此答案](https://stackoverflow.com/a/856026/1025391)中所建议的，您应该为 C 代码使用 C 编译器。您仍然可以将其链接到您的 C++ 应用程序。您可以使用`cmake`为您进行构建配置。一个简单的例子：

```
/* f1.h */
#ifndef MYHEADER
#define MYHEADER

typedef struct { int i, j; } test_t; 
extern test_t t;

#endif 
```

* * *

```
/* f1.c */
#include "f1.h"
test_t t = { .i = 5, .j = 6 }; 
```

* * *

```
/* f0.cc */
extern "C" { #include "f1.h" }
#include <iostream>

int main() {
    std::cout << t.i << " " << t.j << std::endl;
} 
```

* * *

```
# CMakeLists.txt
add_executable(my_executable f0.cc f1.c) 
```

只需`mkdir build; cd build; cmake ..; make`从您的源目录运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T14:22:23.220

指定聚合初始值设定项是 C99 的一个特性，即它是 C 语言的一个特性。它在 C++ 中不存在。

如果您坚持将其编译为 C++，则必须重写`cfg`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T08:37:02.837

谢谢大家 ...

经过所有分析后，我发现上面的代码具有 C99 功能，称为
**指定初始化程序**。

为了在 C++ 中编译此代码，我已将代码更改为正常初始化，如下所示。

===========================

```
/*
 *  initialze_list.cpp 
 */

#include <stdio.h>

typedef struct
{
    struct
{   unsigned member1;
    unsigned  member2; 
} str1;
struct
{   unsigned member3;
    unsigned  member4; 
} str2;
struct
{   unsigned member5;
    unsigned  member6; 
} str3;
} CONFIG_T;

CONFIG_T  cfg =
{
 { 0x01, 0x02 },
 { 0x03, 0x04 },
 { 0x05, 0x06 }
};
/* End of file  */ 
```

====================================

此代码正确编译，没有 C++ 中的错误。

$$ g++ -c initialze_list.cpp

$$ g++ -c -std=gnu++0x initialze_list.cpp

# entity-framework - 如何实现 IDbContextFactory 以用于实体框架数据迁移

> ID：11395283
> 
> 赞同：48
> 
> 时间：2012-07-09T12:44:56.207
> 
> 标签：entity-framework, data-migration

[如本文](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)所述，我正在尝试使用实体框架数据迁移。

但是，当我尝试执行该`Enable-Migrations`步骤时，我在包管理器控制台中收到以下错误：

```
The target context 'MyDataContext' is not constructible. Add a default constructor or provide an implementation of IDbContextFactory 
```

因此，我创建了一个`IDbContextFactory`在包含我的类的项目中实现的工厂类`DbContext`，但数据迁移似乎无法识别它。

我应该明确做些什么来指示数据迁移使用这个工厂类吗？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-07-31T20:21:58.823

当我编写上下文以获取连接字符串名称（然后使用 ninject 提供它）时，我也遇到了这个问题。

您经历的过程似乎是正确的，如果有任何帮助，这是我的课程实现的片段：

```
public class MigrationsContextFactory : IDbContextFactory<MyContext>
{
    public MyContext Create()
    {
        return new MyDBContext("connectionStringName");
    }
} 
```

这应该就是你所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-07-15T16:23:08.833

就像@Soren 指出的那样，我们可以实现，而不是使用`IDbContextFactory`, 在一些早期的**EF Core**版本（即 EF Core 2.1）上不支持`IDesignTimeDbContextFactory<TContext>`，它支持缺少的**ConnectionString**参数。

对于基于**settings.json**的方法，您可以将其与任何一个引用的接口一起使用，请查看[@Arayn 的示例](https://stackoverflow.com/a/52418717/378115)，该示例允许我们定义“ **ConnectionStrings:DefaultConnection** ”值路径

**更新 1**

根据@PaulWaldman 的评论，重新引入了对**EF Core 5**的支持`IDbContextFactory`。有关更多详细信息，请查看下面的评论。

# android - 短信检索不起作用？

> ID：11395292
> 
> 赞同：0
> 
> 时间：2012-07-09T12:45:34.673
> 
> 标签：android

我正在使用 2.1 平台。尝试从模拟器中检索所有短信。没有**编译错误**， 我的代码中没有**Logcat 错误**。我在清单文件中包含了 ReadSMS 的权限。当我运行代码时，ListView 中没有显示。在我的 XML 文件中只有一个 ListView。在那个 ListView 上，我试图从模拟器中显示所有格式的 SMS（ Number : Sms Body）。

**代码**

```
public class SMSActivity extends Activity {
/** Called when the activity is first created. */
    ListView lview;
    String Body  = "" ; 
    int Number;
    ArrayList<String> smslist=new ArrayList<String>();
    ArrayAdapter<String> itemAdapter;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.main);
    lview =(ListView)findViewById(R.id.lv);
    itemAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1,smslist);
    lview.setAdapter(itemAdapter);

    ContentResolver cr = getContentResolver();
    Cursor c = cr.query(Uri.parse("content://sms/"), new String[] { "_id", "address", "date", "body","read" },"_id = "+null, null, null);

    while(c.moveToNext()){

    Number = c.getInt(c.getColumnIndexOrThrow("address"));

   Body = c.getString(c.getColumnIndexOrThrow("body")).toString();

   smslist.add( Number + "\n" + Body);
    }
    itemAdapter.notifyDataSetChanged();
    c.close();
}
} 
```

如何解决这个问题呢 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:56:02.143

你正在做的错误是你只是提到你想阅读短信，但你忘了说你需要从哪个文件夹。例如从收件箱、发件箱等。

如果您需要从收件箱中读取短信，请使用以下内容。

```
Cursor cursor = getContentResolver().query(Uri.parse("content://sms/inbox"), null, null, null, null); 
```

您还可以使用查询列名

```
for (int i = 0; i < cursor.getColumnCount(); i++) {

    Log.i("info", cursor.getColumnName(i));
} 
```

# javascript - 使用 on{X} api 获取设备的当前位置

> ID：11395296
> 
> 赞同：4
> 
> 时间：2012-07-09T12:45:50.743
> 
> 标签：javascript, android, api, location, onx

我一直在玩 on{X} api，我正在尝试获取一些位置数据，但是尽管我尝试了很多，但我无法弄清楚如何获取 /current/ 位置。

* * *

**文档：**

*   [https://www.onx.ms/#apiPage/location](https://www.onx.ms/#apiPage/location)

这是他们的例子：

```
 // create GPS listener with update interval of 5 sec  
    // you also use CELL or PASSIVE providers here  

    var listener = device.location.createListener('GPS', 5000); 

    // register on location changed  

    listener.on('changed', function(signal) {  

    // on receiving location print it and stop the provider 

       console.info('Lat: ' + signal.location.latitude);  
       console.info('Lon:' + signal.location.longitude);  
       listener.stop();  
    });

    // start the GPS listener 

    listener.start(); 
```

* * *

但是，这似乎仅在更改位置时才有效。我将如何获得当前的位置数据（我相信一定有办法）。

我当前的代码：

```
var lat;
var lon;
listener.on('changed', function (signal) {
var lat = signal.location.latitude;
var lon = signal.location.longtitude;
listener.stop();
});
listener.start();
//the rest of my code which just sends the data back to a webserver (this bit works) 
```

但是，当我检查它们的内容时，lat 和 lon 都注册为“未定义”。（因为设备没有移动。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T11:19:42.227

因此，在玩了一段时间的 api 之后，我发现了我哪里出错了。

我需要在 AFTER 之后添加我想从位置数据访问的任何数据的定义`locListener.stop();`，尽管我不完全理解它为什么或如何工作，这是一个修复程序，以下代码对我有用。（我还添加了一些地图的东西；））

```
var loc;
var locListener = device.location.createListener('CELL', 100);

locListener.on('changed', function (signal) {
    // stop listening to location changed events after getting the current location
    locListener.stop();

    var mapUrlPattern = 'https://feeds.onx.ms/maps?wp=lat,lon';
    var mapUrl =  mapUrlPattern.replace(/lat/g, signal.location.latitude).replace(/lon/g, signal.location.longitude);

    loc = mapUrl;
});

locListener.start(); 
```

# symfony - 使用 APC 缓存的多个 Symfony2 站点

> ID：11395298
> 
> 赞同：2
> 
> 时间：2012-07-09T12:45:55.720
> 
> 标签：symfony, apc

我有两个使用 Symfony2 框架的站点，它们具有相似的文件。

这些站点都在同一台服务器上并使用 APC 缓存。

我注意到一个站点上的一些项目然后在另一个站点上使用。

任何已使用的 APC 都有不同且唯一的密钥。

是否有某种方法可以为每个站点拆分 APC 缓存或设置前缀或其他什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-28T14:44:21.953

你试过用[`ApcUniversalClassLoader()`](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php)吗？

根据[手册](http://symfony.com/doc/current/book/performance.html#use-an-autoloader-that-caches-e-g-apcuniversalclassloader)，`autoload.php`您可以使用不同的键启动 APC：

```
require __DIR__.'/../vendor/symfony/src/Symfony/Component/ClassLoader/ApcUniversalClassLoader.php';

$loader = new ApcUniversalClassLoader('your_application_key'); 
```

干杯；）

# php - 如何在 CakePhp 组件中调用回调？

> ID：11395304
> 
> 赞同：0
> 
> 时间：2012-07-09T12:46:17.640
> 
> 标签：php, cakephp

我正在使用 CakePhp 2.2，我有这个简单的控制器，名为**ProvidersController**：

```
<?php

class ProvidersController extends AppController {

    public $components = array('Session', 'Social');

    public $layout = false;         

    public function facebook(){ 
    $this->Social->auth('facebook', 'success', 'error');
    $this->render(false);
    }

    public function google(){
     $this->Social->auth('google', 'success', 'error');
     $this->render(false);
    }

    private function success(){

    }

    private function error(){

    }

}

?> 
```

而这个名为**SocialComponent**的组件：

```
<?php

class SocialComponent extends Component {

    public function auth($provider, $success, $error){

    }

}

?> 
```

如您所见，我在控制器中创建了 success() 和 error() 方法。现在我传递了这些名称，我想从组件中调用它们。

我只传递回调的名称，如何从组件中调用它们？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:08:11.180

看一下CakePHP[中 SecurityComponent 的源码](http://api20.cakephp.org/view_source/security-component#l-299)，它和 blackHoleCallback 的情况是一样的。

[`SecurityComponent::_callback()`](http://api20.cakephp.org/view_source/security-component#l-580)他们使用一个使用 PHP 的辅助函数[`call_user_func_array()`](http://de.php.net/call_user_func_array)

```
protected function _callback(Controller $controller, $method, $params = array()) {
    if (is_callable(array($controller, $method))) {
        return call_user_func_array(array(&$controller, $method), empty($params) ? null : $params);
    } else {
        return null;
    }
} 
```

您可以使用相同的模式将回调传递给您的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:04:55.833

组件的重点是跨多个控制器的可重用性 - 如果您试图使其访问特定的控制器功能，您可能应该只使用控制器方法，而不是组件。

但是-您始终可以在组件中执行逻辑并传回数据（成功或错误时），然后检查控制器中的结果，并根据这些结果访问您想要的任何方法。

由于您的“成功”或“错误”逻辑在控制器中，我假设您不希望它在组件中......即每次使用组件时都不同。在这种情况下，您真正​​希望组件做的只是执行逻辑并让您知道它是如何进行的（返回数据）。

```
//Controller
//..
public function facebook(){ 
    $results = $this->Social->auth('facebook', 'success', 'error');
    if($results['error']) $this->Social->error();
    $this->render(false);
}

private function success(){ }

private function error(){ }
//...

//Component
//...
public function auth($provider, $success, $error){
    $results = array();
    //do something
    $results['error'] = true;
    return $results;
}
//... 
```

# sdk - 非 Unicode 程序的 VIX API 语言环境错误

> ID：11395307
> 
> 赞同：3
> 
> 时间：2012-07-09T12:46:23.667
> 
> 标签：sdk, vmware, vmware-workstation, vix

我在 Windows 操作系统上使用 VIX API 1.11，但我遇到了非 Unicode 程序的语言环境问题。

当我尝试调用 VixHost_Connect() 函数连接到 VmWare Workstation Hypervisor 时，屏幕上出现错误窗口并显示以下消息：

“文件“C:\Users\\AppData\Roaming\VmWare\preferences.ini”第 2 行：

变量“pref.eula.0.appName”的值“VmWare Workstation”在编码“windows-1252”时无效。无法读取用户首选项（附件中的文件）

有人知道解决方案吗？

--

亲切的问候，亚历克斯·科莱斯尼克

![在此处输入图像描述](../Images/53ec57c55f37dccb57ac8f60020334ff.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T23:14:47.950

我也遇到过同样的问题，但我以某种方式解决了它。我刚刚在记事本中打开了“C:\Users\\AppData\Roaming\VmWare\preferences.ini”，并像下面这样更改了第一行，警告就消失了。

```
.encoding = "windows-1252" 
```

->

```
.encoding = "UTF-8" 
```

# c - 从 hex 文件中读取的 C 程序给出了意外的输出

> ID：11395308
> 
> 赞同：-1
> 
> 时间：2012-07-09T12:46:24.563
> 
> 标签：c

这个程序为什么不能正确读取 hex 文件？

```
#include <stdio.h>
#include <stdlib.h>

char *buffer;
unsigned int fileLen;
void ReadFile(char *name);

void ReadFile(char *name)
{
        FILE *file;

        file = fopen(name, "rb");
        if (!file)
        {
                fprintf(stderr, "Unable to open file %s", name);
                return;
        }

        //Getting file length
        fseek(file, 0, SEEK_END);
        fileLen=ftell(file);
        fseek(file, 0, SEEK_SET);

        //Allocating memory
        buffer=(char *)malloc(fileLen+1);
        if (!buffer)
        {
                fprintf(stderr, "Mem error!");
                                fclose(file);
                return;
        }

        fread(buffer, fileLen, 1, file);
        fclose(file);

}

int main()
{
   var32 code;
   char filename[20];
   printf("Enter the file name: ");
   scanf("%s", &filename);
   ReadFile(filename);
   printf("FIle contents: %x\n",buffer);

} 
```

如果我打印一个巨大的十六进制文件，它只会打印 5 到 6 位数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T12:50:40.710

```
printf("FIle contents: %x\n",buffer); 
```

"%x" 只打印一个十六进制值。它正在打印缓冲区的内存地址，而不是其内容。

尝试改变：

```
 fread(buffer, fileLen, 1, file);
    fclose(file); 
```

之后添加：

```
 ...
    fclose(file);
    size_t i;
    for (i = 0; i < fileLen; i++)
        printf("%02x ", buffer[i]; 
```

这将打印整个二进制内容。但是不必读取整个文件来执行此操作，您可以一次输出 1 K 的块...

**不同的实现**

```
#include <stdio.h>
#include <stdint.h>
#include <string.h>
#define BUFFER_SIZE     4096
int main(void)
{
     uint8_t  *buffer;  // Explicit 8 bit unsigned, but should equal "unsigned char"
     FILE     *file;
     char     filename[512];
     // We could also have used buffer[BUFFER_SIZE], but this shows memory alloc
     if (NULL == (buffer = malloc(BUFFER_SIZE)))
     {
          fprintf(stderr, "out of memory\n");
          return -1;
     }
     printf("Enter the file name: ");
     // Read a line terminated by LF. Max filename size is MAXPATH, or 512
     fgets(filename, 512, stdin);
     // Trim filename (Windows: CHECK we don't get \r instead of \n!)
     {
         // Being inside a { }, crlf won't be visible outside, which is good.
         char     *crlf;
         if (NULL != (crlf = strchr(filename, '\n')))
              *crlf = 0x0;
     }
     if (NULL == (file = fopen(filename, "rb")))
     {
         fprintf(stderr, "File not found: '%s'\n", filename);
         return -1;
     }
     while(!feof(file) && !ferror(file))
     {
          size_t i, n;
          if (0 == (n = (size_t)fread(buffer, sizeof(uint8_t), BUFFER_SIZE, file)))
               if (ferror(file))
                    fprintf(stderr, "Error reading from %s\n", filename);
                    // Here, n = 0, so we don't need to break: next i-cycle won't run
          for (i = 0; i < n; i++)
          {
               printf("%02x ", buffer[i]);
               if (15 == (i % 16))
                    printf("\n"); // Every 16th byte, a newline
          }
     }
     fclose(file); // file = NULL; // This ensures file won't be useable after fclose
     free(buffer); // buffer = NULL; // This ensures buffer won't be useable after free
     printf("\n");
     return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T12:50:45.143

该`printf()`语句将以`buffer`十六进制格式打印 的地址。您需要输入`printf()`每个字节`buffer`（~~并且您必须空终止`buffer`，以便调用者知道何时停止或将字节数返回`buffer`给调用者~~）并确保调用者知道有多少字节`buffer`（空终止不安全，因为读取二进制文件） .

还：

*   在取消引用之前确保`buffer`不为空（这是逐字节打印所必需的）
*   检查返回值`fread()`以确保它成功
*   记住`free()`在不再需要时缓冲
*   `malloc()`强制转换 unrequired的返回值（请参阅[Do I cast the result of malloc?](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)）
*   限制读取的字节数`scanf()`以避免缓冲区溢出：`scanf("%19s", filename);`
*   `code`是未使用的局部变量

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T12:48:30.470

如果使用十六进制表示二进制，则不能直接打印，输出将在文件中的第一个零字节处结束。

此外，如果找不到文件，您先说“无法打开文件”，然后继续说“文件内容：...”

正如其他人指出的那样，您以错误的方式打印缓冲区。

而且您不会释放缓冲区。

# php - CodeIgniter 动态方法调用

> ID：11395310
> 
> 赞同：3
> 
> 时间：2012-07-09T12:46:46.007
> 
> 标签：php, codeigniter

我有一个带有一些“过滤器”的数据库；即方法调用，并希望能够根据用户输入的内容动态调用它们。

Code Igniter 似乎不喜欢这样，有什么想法吗？它输出： 在 GetEmailCountfilter_male_count() 中：

```
<h4>A PHP Error was encountered</h4>

<p>Severity: Notice</p>
<p>Message:  Undefined property: Targeted_Email::$filter_male_count()</p>
<p>Filename: core/Model.php</p>
<p>Line Number: 51</p>

{"emailCount":null} 
```

代码：

```
 public function getEmailCount($filter){
      echo 'In GetEmailCount';
      $result = array();
      $query = $this->db->get('base_targeted_email_filters');

      foreach ($query->result() as $row){
           if($filter == $row->name){

                $test = $row->filterCountFunction . "()";
                     echo $test;
                $result['emailCount'] = $this->{$test};
           }

  return $result
  } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T13:02:44.417

foreach 循环应该是这样的：

```
$test = $row->filterCountFunction;
$this->{$test}(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:59:59.577

您可以使用[call_user_func](http://ca2.php.net/manual/en/function.call-user-func.php)来调用带参数的动态函数

```
$result['emailCount'] = call_user_func('filter_function_name',$parameters); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T12:58:48.613

下面的代码将起作用。

```
 public function getEmailCount($filter){
  echo 'In GetEmailCount';
  $result = array();
  $query = $this->db->get('base_targeted_email_filters');

  foreach ($query->result() as $row){
       if($filter == $row->name){

            $test = $row->filterCountFunction . "()";
                 echo $test;
            $result['emailCount'] = $this->$test;
       } 
```

# iphone - 如何触发uiview动画再次炒锅

> ID：11395312
> 
> 赞同：1
> 
> 时间：2012-07-09T12:46:48.857
> 
> 标签：iphone, ios, xcode, animation

我有一个动画可以在 iPad 应用程序的主菜单屏幕中使用。选择一些菜单项时，应用程序将推动新视图“导航控制器”。当我想在按下后退按钮并再次返回主菜单的那一刻再次重新启动动画时，就会出现问题。

我试图将动画代码放在这些方法中：

```
-(void) viewDidLoad  

-(void) viewDidAppear 
```

但我不能让他们工作。

我想做的是在背景中动画公司的标志。

我的代码是：

```
[UIView beginAnimations:nil context:NULL];    
[UIView setAnimationDuration:15.0];
[UIView setAnimationRepeatCount:20.0f];
[UIView setAnimationRepeatAutoreverses:YES];

CGPoint pos = large_bright.center; 
pos.x = 400.0f;
large_bright.center = pos;
CGPoint pos2 = large_dim.center; 
pos2.x = -10.0;
large_dim.center = pos2;
[UIView commitAnimations]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:52:55.580

尝试：

```
[UIView animateWithDuration:1.0 // set here how fast u want it to animate
                 animations:^{ 
                     // add your needed animation here

                 } 
                 completion:^(BOOL finished) {  
                     // do some stuff when its done if you need to
                 }    
 ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:14:29.570

you should call

*   (void)viewWillAppear:(BOOL)animated;

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-09T12:52:43.023

从 viewDidLoad 和 viewDidAppear 调用其他函数。然后在该函数中添加您的动画代码。

```
-(void) viewDidLoad
{
   [self add_animation];
}
-(void)animation
{
   //your animation code
} 
```

# objective-c - textView 未从另一个视图控制器设置（使用 Singleton 类）

> ID：11395313
> 
> 赞同：0
> 
> 时间：2012-07-09T12:46:52.960
> 
> 标签：objective-c, ipad, ios5, singleton, xcode4.3

我有一个 textViewController 类。我想从另一个视图控制器设置（基本上更新）相应的 textView 内容，我正在推送当前的 textViewController。我认为我可以做到这一点的方法是拥有一个共享的单例类并在那里有一个字符串属性来包含文本。我也一直在使用单例来存储其他一些内容，并且到目前为止它运行良好。

* * *

但是单例类中的文本变量不包含我从第二个视图控制器传递给它的内容，因此 textViewController 在弹出第二个视图控制器后，即使在重新出现后也会显示旧文本。我正在其 viewWillAppear 方法中更新 textView，该方法被调用但在 NSLogging 上显示旧文本内容。我在这里想念什么？请提出一个解决方案，现在坚持了很长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:11:11.933

## 宣言

首先，`NSString`在您的应用委托`.h`文件中声明 。它应该看起来像这样：

```
//YourAppDelegate.h

#import <UIKit/UIKit.h>

@interface YourAppDelegate : NSObject < UIApplicationDelegate >
{
    NSString *sharedString; //WE ADDED THIS
}

@property (nonatomic, retain) NSString *sharedString; //AND THIS
@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet SomeViewController *viewController;

@end 
```

现在您想要合成对象，以便为您创建访问器和修改器方法。这意味着您不必编写`setSharedString:`and`getSharedString`方法 - 我们可以通过引用它来简单地访问和改变对象。这是我们在`.m`文件中合成它的方式：

```
//YourAppDelegate.m
@synthesize sharedString; 
```

## 赋值

当您想`sharedString`从另一个类中分配一个值时，您必须首先检索您的应用程序委托的活动实例：

```
YourAppDelegate *appDelegate = (YourAppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

这里的`appDelegate`对象是您正在运行的应用程序委托实例。要访问`sharedString` `NSString`委托中的对象并分配一个值，我们会这样做：

```
appDelegate.sharedString = @"some string we want to assign"; 
```

在我们的应用程序运行期间，“**我们想要分配的一些字符串**”现在存储`sharedString`在我们的应用程序委托中。

## 检索值

您需要在某个时候检索该值。为此，我们必须再次获取应用程序委托的运行实例：

```
YourAppDelegate *appDelegate = (YourAppDelegate*)[[UIApplication sharedApplication] delegate]; 
```

一旦我们有了正在运行的实例，我们就可以访问`sharedString`存储在其中的对象：

```
NSString *retrievedString = appDelegate.sharedString; 
```

从这一点开始，`retrievedString`现在保存值“**我们要分配的某个字符串**”。

### 笔记：

> *在我提到的所有地方`YourAppDelegate`，我指的是您的应用程序委托 - 您在项目中拥有的应用程序委托。它将与您的项目名称相关（查找文件）。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:04:50.323

您的文本变量的 NSString 属性是如何定义的？是“弱”吗？

# php - YouTube PHP 视频浏览器 API：缩略图未显示并重新排序为最新？

> ID：11395314
> 
> 赞同：0
> 
> 时间：2012-07-09T12:46:54.960
> 
> 标签：php, api, youtube, playlist

您好我从播放列表创建了一个 YouTube 视频浏览器，您可以在此页面上查看当前进度。不过有几件事我需要帮助！

1.  ~~缩略图没有显示，视频在那里（悬停，你会看到标题）。~~
2.  如何按最近的优先顺序排列视频？它目前正在做相反的事情。

帮助将不胜感激！最终的外观：i.stack.imgur.com/xKpVg.png

目前的代码是：

```
<style type="text/css">
#videos{background:gray;width:299px}
#videos a:hover
</style>

<div id="videos">
<?php get_playlists(); ?>
</div>

<?php

function get_playlists(){
$data = file_get_contents("http://gdata.youtube.com/feeds/api/playlists/C82EBDAC0429B6A2?max-results=12");
$xml = simplexml_load_string($data);

foreach($xml->entry as $playlist){
    $media = $playlist->children('http://search.yahoo.com/mrss/');
    $attrs = $media->group->thumbnail[0]->attributes();
    $thumb = $attrs['url'];
    $attrs = $media->group->player->attributes();
    $video = $attrs['url'];
    $title = $media->group->title;

$url = $video;
parse_str( parse_url( $url, PHP_URL_QUERY ), $my_array_of_vars );
$vid_Id = $my_array_of_vars['v'];

$thumbnail .= '<div style="float:left; cursor:pointer;">
<a href="/tutorials/view_tutorial.php?id=' . $vid_Id . '">
<img src="' .$thumb . '" title="' . $title . '" width="74" height="42"
</a>
</div>';

    }

    print $thumbnail;
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:54:39.557

您的图像`img`标签缺少`src`属性上的 =。

```
<img src"' .$thumb . '" title="' . $title . '" width="74" height="42" 
```

应该

```
<img src="' .$thumb . '" title="' . $title . '" width="74" height="42" 
```

# c# - 在不知道后面的类的情况下获取 C# 中特定对象属性的值

> ID：11395315
> 
> 赞同：27
> 
> 时间：2012-07-09T12:46:55.430
> 
> 标签：c#, .net

我有一个“**对象**”类型的对象（.NET）。我不知道运行时它背后的“**真实类型（类）** ”，但我知道，该对象有一个属性“**字符串名称**”。如何检索“名称”的值？这可能吗？

像这样的东西：

```
object item = AnyFunction(....);
string value = item.name; 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-07-09T12:49:51.463

使用反射

```
System.Reflection.PropertyInfo pi = item.GetType().GetProperty("name");
String name = (String)(pi.GetValue(item, null)); 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-07-09T12:49:31.680

您可以使用[`dynamic`](http://msdn.microsoft.com/en-us/library/dd264736.aspx)代替`object`：

```
dynamic item = AnyFunction(....);
string value = item.name; 
```

请注意，[动态语言运行时](https://docs.microsoft.com/en-us/dotnet/framework/reflection-and-codedom/dynamic-language-runtime-overview)(DLR) 具有内置缓存机制，因此后续调用非常快。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-09T13:02:34.317

反射和动态值访问是这个问题的正确解决方案，但速度很慢。如果您想要更快的东西，那么您可以使用表达式创建动态方法：

```
 object value = GetValue();
  string propertyName = "MyProperty";

  var parameter = Expression.Parameter(typeof(object));
  var cast = Expression.Convert(parameter, value.GetType());
  var propertyGetter = Expression.Property(cast, propertyName);
  var castResult = Expression.Convert(propertyGetter, typeof(object));//for boxing

  var propertyRetriver = Expression.Lambda<Func<object, object>>(castResult, parameter).Compile();

 var retrivedPropertyValue = propertyRetriver(value); 
```

如果您缓存创建的函数，这种方式会更快。例如，在字典中，假设属性名称未更改或类型和属性名称的某种组合，则 key 将是对象的实际类型。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-09T12:52:20.740

反思可以帮助你。

```
var someObject;
var propertyName = "PropertyWhichValueYouWantToKnow";
var propertyName = someObject.GetType().GetProperty(propertyName).GetValue(someObject, null); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-28T16:03:38.853

在某些情况下，反射无法正常工作。

如果所有项目类型都相同，您可以使用字典。例如，如果您的项目是字符串：

```
Dictionary<string, string> response = JsonConvert.DeserializeObject<Dictionary<string, string>>(item); 
```

或整数：

```
Dictionary<string, int> response = JsonConvert.DeserializeObject<Dictionary<string, int>>(item); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-28T09:04:33.937

您可以使用动态而不是对象来做到这一点：

```
dynamic item = AnyFunction(....);
string value = item["name"].Value; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-29T10:10:10.687

只需对对象的所有属性尝试此操作，

```
foreach (var prop in myobject.GetType().GetProperties(BindingFlags.Public|BindingFlags.Instance))
{
   var propertyName = prop.Name;
   var propertyValue = myobject.GetType().GetProperty(propertyName).GetValue(myobject, null);

   //Debug.Print(prop.Name);
   //Debug.Print(Functions.convertNullableToString(propertyValue));

   Debug.Print(string.Format("Property Name={0} , Value={1}", prop.Name, Functions.convertNullableToString(propertyValue)));
} 
```

注意：***Functions.convertNullableToString()***是自定义函数，用于将 NULL 值转换为 string.empty。

# jquery - 我可以选择以“string_ID”结尾的元素吗？

> ID：11395317
> 
> 赞同：1
> 
> 时间：2012-07-09T12:46:58.903
> 
> 标签：jquery

在服务器端，我使用这些 IDS 生成一些 div，例如：

```
<div id="ContentPlaceBody_Example_localita_168">Hello</div>
<div id="ContentPlaceBody_Example_localita_80">my name is</div>
<div id="ContentPlaceBody_Example_localita_740">Marco</div> 
```

因此，在客户端，我想选择这些 IDS 检查 ID 的最后一部分（即固定，不能更改，`_localita_UNIQUEID`）。如 ：

```
var myID = "80";
$('# HERE THE SELECTOR I NEED _localita_'+myID).hide(); 
```

有没有快速的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:48:59.063

使用以选择器结尾：http: [//api.jquery.com/attribute-ends-with-selector/](http://api.jquery.com/attribute-ends-with-selector/)

试试这个：

```
var myID = "80";
$('div[id$="localita_'+myID + '"]').hide(); 
```

**更新：** @raina77ow 的评论让我挖掘得更多，这里有一个更好的选择。

（请参阅关于此的优秀帖子：http: [//encosia.com/11-keystrokes-that-made-my-jquery-selector-run-10x-faster/](http://encosia.com/11-keystrokes-that-made-my-jquery-selector-run-10x-faster/)）

为您需要查询的 div 指定一个类名（例如：“endswith”），然后使用此版本使其性能更好：

```
var myID = "80";
$('div.endswith[id$="localita_'+myID + '"]').hide(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:51:00.230

是的，你可以，试试这个：

```
$('div [id*=\"_Example_localita_\"+ myid]).hide(); 
```

# github-for-windows - GitHub for Windows - 没有得到任何项目文件，冻结

> ID：11395325
> 
> 赞同：1
> 
> 时间：2012-07-09T12:47:36.707
> 
> 标签：github-for-windows

我尝试从 github 克隆一个存储库，并且每次都使用项目名称创建文件夹，然后创建 .git 文件夹，然后什么也没有发生，它只是冻结了。

运行 Windows 7 32 位

我可以使用 https 下载 zip，但我想使用 git。

我已经设置了 git globals 等等。我怀疑这可能是身份验证问题，但我无法知道。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T19:22:06.957

“冻结”听起来绝对像一个**错误**。

事实上，保持 UI 响应式是 GitHub for Windows 的首要设计目标之一（*我们将优雅的 Caliburn.Micro 与 ReactiveUI 混合在一起，以提供响应式界面并允许更高的可测试性。*）

**精简版：**

发送电子邮件至 support@github.com

**长版：**

正如**[GitHub for Windows 发布博](https://github.com/blog/1127-github-for-windows)**文所述：

> 如果您发现错误，请将其提交至 support@github.com。每封电子邮件都由真人阅读

最近，**GitHubber**的 xpaulbettsx 甚至**[发了推](https://twitter.com/xpaulbettsx/status/221070164056211456)**文：

> Support@ 非常适合您想告诉 GitHub 的任何内容 - 错误、功能、高 5；除了安全之外的一切都去安全@

# javascript - 客户端 html/css/js 验证

> ID：11395326
> 
> 赞同：0
> 
> 时间：2012-07-09T12:47:38.083
> 
> 标签：javascript, jquery, html, validation

是否有任何 HTML5 功能或一些 JS 脚本可以在客户端验证 HTML、CSS 和 JS 代码？

所以我只需要将我的代码传递给函数调用，它就会返回我可以显示在网页某处的验证结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:54:52.433

HTML 5 功能？不。

JS脚本？

用 JavaScript 编写 HTML 和 CSS 验证器是*可能*的，但我不知道有人这样做过。W3C 发布了他们的[标记](http://validator.w3.org/source/)和[CSS](http://jigsaw.w3.org/css-validator/DOWNLOAD.html)验证服务的代码，因此如果您愿意花费时间和精力，您可以移植它。

[JSLint](https://github.com/douglascrockford/JSLint)和[JSHint](https://github.com/jshint/jshint/)是在 JavaScript 中 linting JavaScript 的流行工具。

# android - Android：以编程方式突出显示图像效果

> ID：11395329
> 
> 赞同：1
> 
> 时间：2012-07-09T12:47:51.157
> 
> 标签：android, image, java-2d

有没有办法在不使用单独的可绘制资源的情况下以编程方式突出显示选项卡图标图像？

我尝试使用 PorterDuffColorFilter 但它看起来不太好：

```
// apply a color mask to the icon to mark it as selected
int selectedIconMaskColor = view.getResources().getColor(R.color.tab_icon_selected);
PorterDuffColorFilter selectedIconFilter = new PorterDuffColorFilter(selectedIconMaskColor,
  PorterDuff.Mode.SRC_ATOP);
copyIconDrawable.setColorFilter(selectedIconFilter); 
```

还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:47:51.483

我最终使用了简单的图像处理类：

```
import android.graphics.Bitmap;
import android.graphics.Color;

/**
 * Image with support for filtering.
 */
public class FilteredImage {

  private Bitmap image;

  private int width;

  private int height;

  private int[] colorArray;

  /**
   * Constructor.
   * 
   * @param img the original image
   */
  public FilteredImage(Bitmap img) {
    this.image = img;
    width = img.getWidth();
    height = img.getHeight();

    colorArray = new int[width * height];
    image.getPixels(colorArray, 0, width, 0, 0, width, height);

    applyHighlightFilter();
  }

  /**
   * Get the color for a specified pixel.
   * 
   * @param x x
   * @param y y
   * @return color
   */
  public int getPixelColor(int x, int y) {
    return colorArray[y * width + x];
  }

  /**
   * Gets the image.
   * 
   * @return Returns the image.
   */
  public Bitmap getImage() {
    return image;
  }

  /**
   * Applies green highlight filter to the image.
   */
  private void applyHighlightFilter() {
    int a;
    int r;
    int g;
    int b;
    for (int x = 0; x < width; x++) {
      for (int y = 0; y < height; y++) {

        int c = getPixelColor(x, y);

        a = Color.alpha(c);
        r = Color.red(c);
        g = Color.green(c);
        b = Color.blue(c);

        r = (int) (r * 0.8);
        g = (int) (g * 1.6);
        b = (int) (b * 0.8);

        if (r > 255) {
          r = 255;
        }
        if (r < 0) {
          r = 0;
        }
        if (g > 255) {
          g = 255;
        }
        if (g < 0) {
          g = 0;
        }
        if (b > 255) {
          b = 255;
        }
        if (b < 0) {
          b = 0;
        }

        int resultColor = Color.argb(a, r, g, b);
        image.setPixel(x, y, resultColor);
      }
    }
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-10T07:18:07.947

我遇到了这段代码，它运行得很好并且执行得更快。希望这对未来的读者有所帮助。

```
public static Bitmap highlightImage(Bitmap src) {
    // create new bitmap, which will be painted and becomes result image
    Bitmap bmOut = Bitmap.createBitmap(src.getWidth() + 96, src.getHeight() + 96, Bitmap.Config.ARGB_8888);
    // setup canvas for painting
    Canvas canvas = new Canvas(bmOut);
    // setup default color
    canvas.drawColor(0, PorterDuff.Mode.CLEAR);
    // create a blur paint for capturing alpha
    Paint ptBlur = new Paint();
    ptBlur.setMaskFilter(new BlurMaskFilter(15, BlurMaskFilter.Blur.NORMAL));
    int[] offsetXY = new int[2];
    // capture alpha into a bitmap
    Bitmap bmAlpha = src.extractAlpha(ptBlur, offsetXY);
    // create a color paint
    Paint ptAlphaColor = new Paint();
    ptAlphaColor.setColor(0xFFFFFFFF);
    // paint color for captured alpha region (bitmap)
    canvas.drawBitmap(bmAlpha, offsetXY[0], offsetXY[1], ptAlphaColor);
    // free memory
    bmAlpha.recycle();

    // paint the image source
    canvas.drawBitmap(src, 0, 0, null);

    // return out final image
    return bmOut;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T13:33:10.107

我这样做了，不是最好的解决方案，但有效......

```
imageView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            imageView.setColorFilter(R.color.button_selection);
            doLater(SECOND / 3, new Run() {
                @Override
                public void run() {
                    imageView.setColorFilter(0x00000000);
                }
            });
            doClick(imageView);
        }
    }); 
```

这是为了其他一些观点......

```
view.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            view.getBackground().setColorFilter(R.color.button_selection, Mode.SRC_OVER);
            view.getBackground().invalidateSelf();
            doLater(SECOND / 3, new Run() {
                @Override
                public void run() {
                    view.getBackground().setColorFilter(0x00000000, Mode.SRC_OVER);
                    view.getBackground().invalidateSelf();
                }
            });
            doClick(view);
        }
    }); 
```

# javascript - 带背景图像的 DIV

> ID：11395332
> 
> 赞同：0
> 
> 时间：2012-07-09T12:47:59.597
> 
> 标签：javascript, asp.net

我们已将背景图像（来自网站的圆角图像）应用于 DIV 控制。然后在DIV控件中动态添加更多语句。

我们将如何增加图像的高度和宽度？

请给我们一些建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:50:29.680

尝试使用 css3

```
.div {
background: #eee;
-webkit-border-radius: 5px;
-moz-border-radius: 5px;
border-radius: 5px;
} 
```

或者你需要做各种乱七八糟的事情，比如调整背景图像的大小，或者把它们分成“角落”等等……真是头疼

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:55:20.793

使用 javascript 您可以更改背景大小。
**注意 - 这是一个 CSS3 功能。**

在样式标签内

```
.div_class_name
 {
 background:url(img_flwr.gif);
 background-size:80px 60px;
 background-repeat:no-repeat;
 } 
```

当 div 中的内容发生变化时，您可以使用以下语法来更改大小

```
document.getElementById("eleId").style.backgroundSize="60px 80px" ; 
```

# objective-c - UIButton 在 CABasicAnimaton 之后在错误的位置接收到 touchEvents

> ID：11395335
> 
> 赞同：3
> 
> 时间：2012-07-09T12:48:22.013
> 
> 标签：objective-c, ios, uibutton, touch, cabasicanimation

我想给一个按钮添加一个动画，使按钮从 A 点移到 B 点。
下面的代码可以做到。但奇怪的是，当按钮移动时，它不再检测到触摸。
如果您和我点击按钮的原始位置，它可以触发按钮事件。我的代码中是否缺少任何内容？请帮我。

```
- (IBAction)button:(id)sender
{

UIButton    *lineButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[lineButton addTarget:self   action:@selector(press:)forControlEvents:UIControlEventTouchUpInside];
[lineButton setFrame:CGRectMake(50, 50, 50, 50)];
[self.view addSubview:lineButton];
CABasicAnimation *lineAnimation;

lineAnimation = [CABasicAnimation animationWithKeyPath:@"position"];
[lineAnimation setRemovedOnCompletion:NO];
[lineAnimation setDuration:0.15];

[lineAnimation setFillMode:kCAFillModeForwards];
[lineAnimation setTimingFunction:[CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]];

CGRect rect = CGRectMake(100, 200, 50, 50);
    lineAnimation.fromValue = [NSValue valueWithCGPoint: CGPointMake(50, 50)];
    lineAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(CGRectGetMidX(rect),   CGRectGetMidY(rect))];
[lineAnimation setAutoreverses:NO];
[lineButton.layer addAnimation:lineAnimation forKey:@"line"];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T12:23:06.477

您必须在 addAnimation 方法之后将新框架和图层设置为按钮的框架/图层，例如：

```
lineButton.frame = rect
lineButton.layer.frame = rect 
```

或者您可以简单地使用动画块（更易于使用，代码看起来不错等），例如：

```
[UIView animateWithDuration:0.15 animations:^{
  lineButton.frame = CGRectMake(100, 200, 50, 50);
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:08:31.293

在您的 interfacebuilder 中正确设置按钮和 setframes 的 autoresizing 属性。如果您旋转设备或模拟器，则会自动调整帧大小。然后你会失去原来的框架。

# speech-recognition - 如何解决 HTK ERROR [+2662] FindProtoModel: no proto for ei in hSet

> ID：11395338
> 
> 赞同：1
> 
> 时间：2012-07-09T12:48:24.783
> 
> 标签：speech-recognition, htk

在更改语法并添加了一些新句子后，我正在运行 julius，在第 10 步中我收到了这个错误。

```
 AU fulllist
 Creating HMMset using trees to add unseen triphones
  ERROR [+2662]  FindProtoModel: no proto for ei in hSet
 FATAL ERROR - Terminating program C:\cygwin\HTK\htk-3.3-windows-binary\htk\HHEd.exe 
```

我该如何解决这个问题或更改语法我可以更改什么？已经添加了 fe 句子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:39:18.177

此错误意味着 HHEd 工具无法找到在上一步训练的电话“ei”的模型。您需要确保此手机具有来自步骤 1 的足够训练数据，或者您可以从手机、字典和所有列表中删除此手机。如果你用的是Voxforge英文声学模型训练教程，应该没有电话ei。也许您只需要从字典中删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T19:13:40.863

只需从完整列表中删除此音素并再次运行 HHEd。

# web-applications - 在支付网关之间迁移数据

> ID：11395340
> 
> 赞同：1
> 
> 时间：2012-07-09T12:48:27.937
> 
> 标签：web-applications, e-commerce, payment-gateway, data-migration, recurring-billing

我们正在为我们的电子商务应用程序转移支付网关提供商；因此，我们希望迁移以下信息；

*   客户合同/账单信息
*   信用卡信息
*   交易

从我们以前的网关到新的网关。是否有任何可以遵循或推荐的最佳实践或技术？

该应用程序支持经常性费用。在进行此练习时，还需要牢记 PCI 合规性。

任何输入将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T00:42:36.927

我的理解是，此过程通常由您作为支付网关的客户发起，但该过程随后由您正在迁移的两个支付网关完成。

因为它们都应该符合 PCI 标准，所以它们将能够在彼此之间安全地传输数据。

然后，您迁移到的网关将能够为您提供映射卡令牌的列表，以便您可以在令牌之间迁移。

我无法对帐单信息和交易发表评论，因为我还没有处理过这些。

# silverlight - 在 XAML 代码中编写条件语句

> ID：11395349
> 
> 赞同：13
> 
> 时间：2012-07-09T12:49:07.967
> 
> 标签：silverlight, windows-phone-7, xaml, conditional-statements

我有这个被填充的列表框，每个项目可以是男性或女性，具体取决于绑定到列表框的“SEX”属性。（可以是男性的“M”和女性的“F”）......

对于每个项目，我想根据列表项目的 SEX 属性显示男性或女性符号。

例如，如果“{Binding SEX}”等于“M”：

```
<Image Source="../Images/male48.png" Visibility="Visible" /> 
```

如果“{Binding SEX}”等于“F”：

```
<Image Source="../Images/female48.png" Visibility="Visible" /> 
```

我究竟将如何让它发挥作用？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-09T12:58:38.977

解决此问题的常用方法是创建一个值转换器，它将绑定返回的值转换为与 UI 控件的属性相关的其他值。

您可以创建一个转换器来获取性别并将其映射到图像源：

```
public class SexToSourceConverter : IValueConverter
{
  public object Convert(object value, string typeName, object parameter, string language)
  {
     string url = ((string)value == "M") ? "../Images/male48.png" :  "../Images/female48.png";
    return new BitmapImage(new Uri(url , UriKind.Relative));
  }

  public object ConvertBack(object value, string typeName, object parameter, string language)
  {
    throw new NotImplementedException();
  }
} 
```

在您的 XAML 中使用它，如下所示：

```
<Image Source="{Binding Path=Sex, Converter={StaticResource SexToSourceConverter }" /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T13:41:34.573

如果有人对这如何工作感兴趣，我已经根据**ColinE**的回答制定了解决方案。首先，您必须创建一个新类，其中包含您要添加到 XAML 代码中的条件：

```
public class MyNiceConverterName : IValueConverter {
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture) {
        // Your conditions here!
        return value_you_want_to_return; // E.g., a string, an integer and so on
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) {
        throw new NotImplementedException(); // Leave this like here, don't worry
    }
} 
```

随心所欲地调用该类（现在称为`MyNiceConverterName`）并`Convert()`使用您希望添加到 XAML 文件的条件来实现该方法。请记住将`object value`转换为您正在使用的类型（例如，`(int)value`如果它是整数）。

这几乎完成了！但还没有，首先在 XAML 中将转换器声明为资源。您可以将此代码粘贴到命名空间声明下方：

```
<Control.Resources>
    <converter:MyNiceConverterName xmlns:converter="clr-namespace:My_Namespace" x:Key="MyNiceConverterName" />
</Control.Resources> 
```

您必须声明定义类的名称空间（即，`My_Namespace`用您的类删除）并重命名`MyNiceConverterName`为您的类名。键将是定义用于引用 XAML 文档中的转换器的名称，这里我使用了相同的类名，但您可以自由更改它。

最后，是时候使用转换器了。放上这个，你就完成了：

```
{Binding variable_with_value, Converter={StaticResource MyNiceConverterName}} 
```

请记住更改`variable_with_value`为您想在绑定中使用的那个。

我希望它有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T12:54:33.147

要么使用[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)，要么使用两个[触发器](http://msdn.microsoft.com/en-us/library/system.windows.trigger.aspx)。

对于 Siverlight [，这是正确的 IValueConverter 链接](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter%28v=vs.95%29.aspx)，我不确定是否支持触发器。

# javascript - 是否可以在 Visual Studio 中突出显示某些代码行？

> ID：11395361
> 
> 赞同：0
> 
> 时间：2012-07-09T12:49:49.513
> 
> 标签：javascript, html, visual-studio-2010, visual-studio

目前我正在处理一个可能有 1000 行代码 (HTML/JS) 的文件。可以说，其中有三四行特别重要，我会不断回头来查找内容。每次我想在滚动代码时找到其中一行时，我觉得有点令人沮丧。

如果是 C# 代码，我可以在每个重要行设置一个断点，以便在滚动代码时更容易发现它们，但这是不可能的，因为这是一个 HTML 文件。

是否有某种方法可以突出显示 Visual Studio 中的某些行，以便在滚动代码时更容易找到它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:51:44.753

您可以使用书签功能。一些信息可以在[这里](http://msdn.microsoft.com/en-us/library/xc3ed5eh.aspx)找到。

一开始可能有点麻烦，但是一旦你学会了书签/取消书签/转到下一个书签的适当[快捷方式，它会让你的代码导航更容易一些。](http://www.shortcutworld.com/en/win/Visual-Studio_2010.html#link_2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:54:13.617

用命名良好的区域突出这些重要区域怎么样？

[http://msdn.microsoft.com/en-us/library/9a1ybwek(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/9a1ybwek(v=vs.71).aspx)

# c# - 如何显示具有多个子 WPF DataGrid 的记录？

> ID：11395364
> 
> 赞同：2
> 
> 时间：2012-07-09T12:49:58.677
> 
> 标签：c#, .net, wpf, datagrid

我有一个要在 DataGrid 中显示的客户对象列表。我通过后面的代码绑定了列表：

```
dataGrid.DataContext = customers; 
```

每个客户都有一个或多个电话号码。我想在客户的行/记录中列出它们。我该怎么做呢？我的 DataGrid 在 XAML 中看起来像这样：

```
<DataGrid AutoGenerateColumns="False" Height="212" IsReadOnly="True"
    HorizontalAlignment="Left" Margin="12,41,0,0" ItemsSource="{Binding}"   
    Name="dataGrid" VerticalAlignment="Top" Width="932">
  <DataGrid.Columns>
    <DataGridTextColumn Binding="{Binding Path=LastName}" Header="Porting ID"/>
    <DataGridTextColumn Binding="{Binding Path=FirstName}" Header="Operator" />
  </DataGrid.Columns>
</DataGrid> 
```

客户类是：

```
public class Customer
{
  public String LastName { get; set; }
  public String FirstName { get; set; }
  public List<Phonenumber> PhoneNumbers { get; set; }
} 
```

PhoneNumber 类是：

```
public class PhoneNumber
{
  public String AreaCode {get;set;}
  public String Number {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:08:14.033

首先请将 itemssource 设置为 customers 而不是 datacontext。现在回答您的问题：您可以使用 DataGridTemplateColumn 并绑定到您的 phonenumbers 集合。此模板列的数据模板可以是一个简单的项目控件。

编辑：

```
 <DataGridTemplateColumn Header="Phonenumbers">
                <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                        <ItemsControl ItemsSource="{Binding Phonenumbers}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="{Binding AreaCode}" Margin="0,0,5,0"/>
                                        <TextBlock Text="{Binding Number}"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </DataTemplate>
                </DataGridTemplateColumn.CellTemplate>
            </DataGridTemplateColumn> 
```

ps：如果您发布代码，我将更新模板；）

# c++ - 在 C++ 中使用 xlslib

> ID：11395367
> 
> 赞同：0
> 
> 时间：2012-07-09T12:50:08.067
> 
> 标签：c++, excel, xlslib

我正在寻找一个 C++ 库来读取/写入 Microsoft Excel 文件。我发现了几个 C/C++ API，我在 Windows 上没有成功。（在 linux 上一切正常）。最后我设法编译`xlslib`了它是一个开源的并且看起来不错。

但问题是：绝对没有文档/教程/示例，甚至没有使用这个库的工作应用程序。好吧，在你问之前，我应该说“是的”我刚刚在谷歌上搜索了很多。`(`谷歌在开玩笑 我`||`搜索错误`||`没有文档`)`

我的问题是：“如何使用 xlslib 打开电子表格并从中读取数据？”

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:54:11.087

xlslib 自述文件指出：“测试文件夹中的一些测试文件演示了用法。”

[如果您的意思是 libxls，他们在http://libxls.svn.sourceforge.net/viewvc/libxls/trunk/libxls/src/xls2csv.c?view=markup](http://libxls.svn.sourceforge.net/viewvc/libxls/trunk/libxls/src/xls2csv.c?view=markup)有一个示例（将 xls 转换为 csv 的简单程序）。

# jquery - 序列化不选择选择选项 - JSFiddle

> ID：11395368
> 
> 赞同：0
> 
> 时间：2012-07-09T12:50:10.513
> 
> 标签：jquery, serialization

我正在与下面 JSFiddle 上的序列化代码发生争执，它没有选择表单中可用的选择选项？它可以很好地接收文本输入，但是没有出现“选择”。代码不包括空字段，但选择选项永远不会为空？

[jQuery 序列化](http://jsfiddle.net/4Nmcx/173/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:07:30.217

你有选择被阻止而不是包括它试试这个

```
$('#form1').find('select,input[type="text"]').not('#url').change(function(){
    var val = "";
    var url = '/static/url/to/file.php?';
    $('form select,input[type="text"]:not("input#url")').each(function(){
        if ($.trim(this.value).length > 0 ) {
          val += ($(this).attr('name') + "" + this.value + "&");
        }  
    })
    $('#url').val(url+val);
});

$('#button').click(function(){
    window.location= $('#url').val();
}); 
```

[工作演示](http://jsfiddle.net/7AJya/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:22:52.953

您可以尝试 $('#form1').serialize() 并将字段 url 放在表单之外

# javascript - 显示和隐藏 div 的 javascript 函数

> ID：11395370
> 
> 赞同：10
> 
> 时间：2012-07-09T12:50:17.683
> 
> 标签：javascript, function, html

您好，我有以下 2 个 JavaScript 函数来打开和关闭 div。

```
<script>
    function show() {
        if(document.getElementById('benefits').style.display=='none') {
          document.getElementById('benefits').style.display='block';
        }
    }
</script>

<script>
    function close() {
        if(document.getElementById('benefits').style.display=='block') {
          document.getElementById('benefits').style.display='none';
        }
    }  
</script> 
```

这是html：

```
<div id="opener"><a href="#1" name="1" onclick=show()>click here</a></div>
<div id="benefits" style="display:none;">
   some input in here plus the close button
   <div id="upbutton"><a onclick=close()></a></div>
</div> 
```

由于某种原因，显示功能按应有的方式工作，但关闭按钮不起作用。因此，如果有人可以帮助我，我将不胜感激。非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-09T13:04:06.880

```
<script> 
    function show() { 
        if(document.getElementById('benefits').style.display=='none') { 
            document.getElementById('benefits').style.display='block'; 
        } 
        return false;
    } 
    function hide() { 
        if(document.getElementById('benefits').style.display=='block') { 
            document.getElementById('benefits').style.display='none'; 
        } 
        return false;
    }   
</script> 

 <div id="opener"><a href="#1" name="1" onclick="return show();">click here</a></div> 
    <div id="benefits" style="display:none;">some input in here plus the close button 
           <div id="upbutton"><a onclick="return hide();">click here</a></div> 
    </div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T12:58:23.867

我通常用类来做这件事，这似乎迫使浏览器重新评估所有的样式。

```
.hiddendiv {display:none;}
.visiblediv {display:block;} 
```

然后使用；

```
<script>  
function show() {  
    document.getElementById('benefits').className='visiblediv';  
}  
function close() {  
    document.getElementById('benefits').className='hiddendiv';  
}    
</script> 
```

请注意“className”的大小写，这让我大吃一惊

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T13:01:22.933

jQuery 的美将允许我们执行以下操作：

```
$(function()
{
    var benefits = $('#benefits');

    // this is the show function
    $('a[name=1]').click(function()
    { 
        benefits.show();
    });

    // this is the hide function
    $('a', benefits).click(function()
    {
        benefits.hide();
    });
}); 
```

或者，您可以使用 1 个按钮切换显示，如下所示：

```
$(function()
{
    // this is the show and hide function, all in 1!
    $('a[name=1]').click(function()
    { 
        $('#benefits').toggle();
    });
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T13:01:58.530

你需要里面的链接是可点击的，这意味着它需要一个带有一些内容的href，而且close()是window的内置函数，所以你需要更改函数的名称以避免冲突。

```
<div id="upbutton"><a href="#" onclick="close2()">click to close</a></div> 
```

此外，如果您想要一个真正的“按钮”而不是链接，您应该使用`<input type="button"/>`or `<button/>`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-09T12:55:39.957

检查这个：

点击这里

```
<div id="benefits" style="display:none;">some input in here plus the close button
       <div id="upbutton"><a onclick="close(); return false;"></a></div>
</div> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-09T13:03:46.087

例如，将关闭函数重命名为“隐藏”，它将起作用。

```
function hide() {
    if(document.getElementById('benefits').style.display=='block') {
      document.getElementById('benefits').style.display='none';
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-09T13:10:06.973

Close 似乎是某种保留字（可能是指 window.close）。将其更改为其他内容似乎可以解决问题。

[http://jsfiddle.net/c7gdL/1/](http://jsfiddle.net/c7gdL/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-23T11:29:36.607

你可以用这样的东西压缩这两者[就像 jQuery 一样]：

```
function toggleMyDiv() {
 if (document.getElementById("myDiv").style.display=="block"){
  document.getElementById("myDiv").style.display="none"
  }
 else{
  document.getElementById("myDiv").style.display="block";
 }
} 
```

..并在两个按钮中使用相同的功能 - 或者通常在页面中为这两个功能使用。

# javascript - 平台无关的 JavaScript：检查 DOM 的存在

> ID：11395373
> 
> 赞同：1
> 
> 时间：2012-07-09T12:50:27.273
> 
> 标签：javascript, object, window, cross-platform, document

对于（跨浏览器/平台）检查对象的存在（如果需要`document`，可能还有对象）的最佳和最安全（不是最短/最快）的解决方案是什么？`window`

```
(function(root, undefined) {

    var document = false;

    if(typeof root.document === "object" && root.document !== null)
        document = root.document;

    // ...

    if(document !== false)
        doMyFancyClientSideStuff();

})(this); 
```

总是`typeof window.document`在浏览器中`"object"`吗？或者是否需要某种解决方法来确保我们接收到的对象确实是 DOM 类型的对象，例如`window.document instanceof window.Document`，而不仅仅是自制对象或其他对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:28:35.823

您对“跨浏览器”的定义在这里非常重要。我实际上建议检查以下`[[Class]]`属性：

```
Object.prototype.toString.call( root.document ); 
```

这应该`[object HTMLDocument]`在现代浏览器（或`[object Undefined]`）中返回。要在此列表中也包括 IE8+，我们需要调用

```
if( "" + this.document === '[object HTMLDocument]' ) { } 
```

这将创建一个列表

*   IE8+
*   铬合金
*   火狐
*   苹果浏览器
*   Opera（我不知道，但我想是的）

`[object]`IE<8将始终返回`window.document`[[Class]]。这至少是我能想到的最准确的检查。您当然可以，也可以检查类似

```
if( 'document' in this ) { } 
```

但这并不能保证我们谈论的是一个实际的 DOM 对象，只是`document`在全局对象中调用了一个属性。

# android - 如何创建循环列表视图或在循环视图中填充值？

> ID：11395376
> 
> 赞同：1
> 
> 时间：2012-07-09T12:50:33.663
> 
> 标签：android, listview, layout, circular-buffer

> **可能重复：**
> [如何创建一个封闭的（圆形）ListView？](https://stackoverflow.com/questions/2332847/how-to-create-a-closed-circular-listview)

我对android很陌生，我想以循环格式创建一个列表视图。无论如何要这样做或创建某种循环布局？如果普通列表视图以垂直方式填充值，我希望有一个列表视图以循环格式填充值谢谢

# java - Java 中的当前日期和时间

> ID：11395378
> 
> 赞同：0
> 
> 时间：2012-07-09T12:50:41.447
> 
> 标签：java, datetime

我想要以下格式的当前日期和时间：

日期：YYYYMMDD

时间：HHMMSS

我尝试了以下

```
DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
   //get current date time with Date()
   Date date = new Date();
   System.out.println(dateFormat.format(date));

   //get current date time with Calendar()
   Calendar cal = Calendar.getInstance();
   System.out.println(new Date().getTime()); 
```

通过这种方式，我得到了所需的日期输出，但时间以这种方式 1341837848290 到来。

预期是 HHMMSS。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T12:52:05.383

利用[`format()`](http://docs.oracle.com/javase/1.6/docs/api/java/text/SimpleDateFormat.html)

```
System.out.println(new SimpleDateFormat("HH:mm:SS").format(new Date())); 
```

日期实例没有任何属性来保存自定义格式，因此您需要使用自定义格式 HH:mm:SS 将日期实例格式化为字符串（有关详细信息，请参阅[API 文档）](http://docs.oracle.com/javase/1.6/docs/api/java/text/SimpleDateFormat.html)

**看**

*   [IDEOne 演示](http://ideone.com/aqVUn)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T12:55:29.933

```
try this 

DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd");
   //get current date time with Date()
   Date date = new Date();
   System.out.println(dateFormat.format(date));

   //get current date time with Calendar()
DateFormat timeFormat = new SimpleDateFormat("HHmmss");
   Date d=new Date();
   System.out.println(timeFormat.format(d); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:02:27.833

```
DateFormat dateFormat = new SimpleDateFormat("yyyyMMdd HH:mm:SS");
    //get current date time with Date()
Date date = new Date();
System.out.println(dateFormat.format(date)); 
```

有关更多格式，请参阅 [API Doc](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T12:56:59.857

你检查了 joda-time 图书馆吗？[链接在这里](http://joda-time.sourceforge.net/)

使用 joda-time，您可以轻松地调用`new DateTime()`、调用`toString()`它并获得此输出，这可能是您想要的更多：

```
public static void main(final String[] args) {
        final DateTime d = new DateTime();
        System.out.println(d.toString());
    } 
```

输出：2012-07-09T14:54:13.366+02:00

Joda-Time 从好的方面来说非常强大。当然，这是您需要包含的额外库，如果这是不可能或不希望的，另一种方法可能会更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T12:57:03.147

我试过这个：

```
SimpleDateFormat sdf = new SimpleDateFormat("yyyyMMdd HHmmss");
Date date = Calendar.getInstance().getTime();
System.out.println(sdf.format(date)); 
```

产量：

> 20120709 145518

第一部分是日期（`20120709`），第二部分是时间（`145518`）。

看来您一直在使用错误的符号。我建议您在[这里](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)查看完整的详细信息。

# python - 如何压缩 Python 程序中新创建的文件夹？

> ID：11395381
> 
> 赞同：0
> 
> 时间：2012-07-09T12:50:46.377
> 
> 标签：python, zip

我有一个程序将所有文件放在不同的文件夹中，例如这些文件：

```
 20120809_1204567_cat_pic1.jpg
    20120810_1204567_cat_pic1.jpg 
    20120811_1204567_cat_pic1.jpg 
```

该程序以第一个数字的名称创建 3 个不同的文件夹和一个名为 cat 的子文件夹。现在我想压缩这些文件夹，但在启动程序之前我不知道每个文件夹的名称。创建这些文件夹后如何立即压缩文件夹？

```
import zipfile
import glob
import datetime
import os 
from collections import defaultdict
from shutil import copyfile

src = 'D:/Testing/src/'

for name in glob.glob('D:/Testing/src/*'):  
print name

dict_date = defaultdict(lambda : defaultdict(list))
for fil in os.listdir(src):
    if os.path.isfile(os.path.join(src, fil)):
        date, animal = fil.split('_')[0], fil.split('_')[2]
        dict_date[date][animal].append(fil)

for date in dict_date:
    for animal in dict_date[date]:
        try:
            os.makedirs(os.path.join(src, date, animal))
        except os.error:
            pass
        for fil in dict_date[date][animal]:
            copyfile(os.path.join(src, fil), os.path.join(src, date, animal, fil))

directory = src
os.chdir(directory)
files = glob.glob('*.txt')
for filename in files:
    os.unlink(filename)

files2 = glob.glob('*.png')
for filename in files2:
os.unlink(filename) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:13:06.137

每个文件夹一个 zip 文件：

```
>>> for date in dict_date:
with ZipFile(os.path.join(path, date, '{0}.zip'.format(date)), 'w') as myzip:
    for animal in dict_date[date]:
        for fil in os.listdir(os.path.join(path, date, animal)):
            if fil.endswith('.jpg'):
                myzip.write(os.path.join(path, date, animal, fil)) 
```

这应该替换从`directory = src`.

# c# - 构建自定义 Web 控件，如何检查资源文件是否已添加？

> ID：11395386
> 
> 赞同：0
> 
> 时间：2012-07-09T12:51:06.690
> 
> 标签：c#, asp.net

我正在构建自定义 Web 控件，并且正在使用 js 和 css。
Js 和 Css 文件嵌入在控件的 dll 中。
问题是，当我多次将此控件添加到页面时，资源（js 和 css 文件）再次添加时，有没有办法检查这些文件是否已添加？

请注意，此控件可以添加到任何其他容器控件（如 div）： divId.Controls.Add(myCustomControl);
所以我需要一种在页面的所有子控件中搜索 ID 的方法

谢谢。

**UPDATE1：** 我正在使用它来将 js 文件添加到容器中：

```
var plh = new PlaceHolder();
var js = new HtmlGenericControl("script");
jsID = "stacks";
js.Attributes.Add("src", Page.ClientScript.GetWebResourceUrl(typeof(MyControlClass), "MyControlCSFileName.ScriptFolder.stacks.js"));
js.Attributes.Add("type", "text/javascript");
js.EnableViewState = false;
plh.Controls.Add(js);
plh.RenderControl(writer); 
```

**UPDATE2：**
有时我在服务器上呈现控件并使用 Ajax 返回它的 html 结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:00:27.280

使用 Page.ClientScript.RegisterClientScriptInclude 注册你的 JS

示例：this.Page.ClientScript.RegisterClientScriptInclude("key", Page.ClientScript.GetWebResourceUrl(this.GetType(), "yourscript.js"));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T08:10:53.633

利用`ClientScriptManager.RegisterClientScriptBlock`

参考：[ClientScriptManager.RegisterClientScriptBlock](http://msdn.microsoft.com/en-us/library/btf44dc9.aspx)

> 客户端脚本由其密钥和类型唯一标识。具有相同键和类型的脚本被认为是重复的。页面中只能注册一个具有给定类型和密钥对的脚本。尝试注册已注册的脚本不会创建该脚本的副本。

您不需要检查重复项，因为 asp.net 只会添加一个实例。

但是，如果您想节省检查时间，它确实提供了检查脚本是否已注册的功能：`IsClientScriptBlockRegistered`.

# ruby - 我应该忽略 SCSS 吗？

> ID：11395387
> 
> 赞同：2
> 
> 时间：2012-07-09T12:51:12.693
> 
> 标签：ruby, sass

我认为自己和优秀的 CSS 作家。最近，我收到了一些用 SCSS 编写代码的请求。但是，我没有在我的环境中运行 Ruby，并且正在权衡是否应该处理该开销。是的，我知道编译 SCSS 有一些变通方法。

那么，我应该不遗余力地学习和支持 SCSS，还是应该严格地认为它是一个与我的工作无关的 Ruby gem？

此外，由于我的大部分工作都在 LAMP 环境中运行，除非我有一个运行 Rails 的客户端，否则该实用程序是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T12:55:02.710

语法并没有那么不同，并且有[在线转换器](http://cssconvert.mgwebsolutions.net/)可以为您完成工作。我会说你应该去。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:57:30.007

我认为scss比css好很多。你可以很容易地编写你的css文件。

看看 Sass 的网站，有很多例子可以让你更轻松地编写 css。当你看这些时，你也会看到。

这是链接：[Sass](http://sass-lang.com/)到网站。

我的意见：加油！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-09T13:00:01.597

我也认为自己是一个相当精通 CSS（作家？编码员？）。我已经把 SCSS 扔到了窗外，因为我没有看到好处。老实说，我真的不明白它解决了什么问题。

我将它与类似的“咖啡”组合在一起。我对这两个（不一定针对您）的回应是：

听着，我们不需要更多的抽象。学习 Javascript，学习 CSS。您可以随身携带这些技能。很快我们将只需一键式按钮来构建我们又一个博客系统，拍拍自己的后背，称自己为程序员。

不管怎样，我喜欢你的想法。我说锻炼你的 CSS 肌肉并保持体形 :)

# c#-4.0 - 根据 C# 中的模式搜索文件名并获取完整路径

> ID：11395389
> 
> 赞同：0
> 
> 时间：2012-07-09T12:51:33.600
> 
> 标签：c#-4.0

如何根据 C# 文件名中的前 6 个字母获取文件的完整路径？有任何正则表达式吗？

我有一个包含 500K+ 图像的文件夹。所有图像都根据数据库列值命名。我正在查询表并根据列值在文件夹中搜索特定文件。

如果列值为 209050，则文件夹中将有一个文件，如 209050.pdf 或 209050_12345.pdf。209050 将始终存在一个图像。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:28:33.633

```
var files = Directory.EnumerateFiles(@"C:\MyRootDir", "209050*", SearchOption.AllDirectories); 
```

这将返回一个可枚举的字符串。每个字符串将是其名称与指定模式匹配的文件的完整路径，在这种情况下，任何名称以“209050”开头的文件，与扩展名无关。这甚至会在文件夹 MyRootDir 的子目录中搜索。

如果您只想过滤`jpg`文件，请相应地更改第二个参数。

```
var files = Directory.EnumerateFiles(@"C:\MyRootDir", "209050*.jpg", SearchOption.AllDirectories); 
```

**如果您不使用 .Net Framework 4 或 4.5，则可以改用该`GetFiles`方法。**

```
var files = Directory.GetFiles(@"C:\MyRootDir", "209050*.jpg", SearchOption.AllDirectories); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:01:50.097

以下将显示以in`.jpg`开头的所有文件：`209050``C:\MyDirectory`

```
using System;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            string[] myFiles = Directory.GetFiles(@"C:\MyDirectory");

            foreach (var x in myFiles)
            {
                string[] splitName = x.Split('\\');
                string fileName = splitName[splitName.Length - 1];

                if (fileName.StartsWith("209050") && fileName.EndsWith(".jpg"))
                {
                    Console.WriteLine(x);
                }
            }

            Console.ReadLine();
        }
    }
} 
```

这是我的目录：

![我的目录](../Images/f6f01a1cb3f5f238106ed26f0023c203.png)

这是输出：

![输出](../Images/44b9a10add94461252a23216fe3ddfaa.png)

这有帮助吗？

# objective-c - 使用 NSUserDefaults 错误保存隐藏按钮状态

> ID：11395392
> 
> 赞同：0
> 
> 时间：2012-07-09T12:51:36.300
> 
> 标签：objective-c, ios, xcode, nsuserdefaults

在离开视图控制器时尝试将按钮状态保存为隐藏状态。

在IBAction下

```
 btnonce.hidden = YES; 

   NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
  [defaults setValue:Act1Button.hidden forKey:@"isHidden"]; 
```

在 ViewDidLoad 中调用它

```
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
btnonce.hidden = [userDefaults valueForKey:@"isHidden"]; 
```

我收到错误消息：ARC 不允许将“BOOL”（又名签名字符）隐式转换为 ID

如何纠正这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:54:23.577

要在 NSUserDefaults 中保存 Bool 值，请使用此代码

```
 [defaults setBool:Act1Button.hidden forKey:@"isHidden"]; 
```

检索使用这个

```
btnonce.hidden = [userDefaults boolForKey:@"isHidden"]; 
```

# regex - Perl 正则表达式 - gc 修饰符是什么意思？

> ID：11395395
> 
> 赞同：21
> 
> 时间：2012-07-09T12:51:50.417
> 
> 标签：regex, perl, modifier

我有一个匹配一些文本的正则表达式：

```
$text =~ m/$regex/gcxs 
```

现在我想知道**'gc'**修饰符是什么意思：

我已经搜索并发现**gc**的意思是**"Allow continue search after failed /g match"**。

这对我来说不是很清楚。继续搜索是什么意思？

据我了解，这意味着如果**/g**搜索失败，则从头开始匹配。但是**/g**修饰符不匹配整个字符串吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-09T13:08:12.960

`/g`修饰符用于记住“字符串中的位置”，以便您可以增量处理字符串。例如

```
my $txt = "abc3de";
while( $txt =~ /\G[a-z]/g )
{
    print "$&";
}
while( $txt =~ /\G./g )
{
    print "$&";
} 
```

因为位置在匹配失败时被重置，所以上面会输出

```
abcabc3de 
```

该`/c`标志不会重置失败匹配的位置。所以如果我们`/c`像这样添加到第一个正则表达式

```
my $txt = "abc3de";
while( $txt =~ /\G[a-z]/gc )
{
    print "$&";
}
while( $txt =~ /\G./g )
{
    print "$&";
} 
```

我们最终得到

```
abc3de 
```

示例代码：http: [//ideone.com/cC9wb](http://ideone.com/cC9wb)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:10:20.477

在 perldoc perlre [http://perldoc.perl.org/perlre.html#Modifiers](http://perldoc.perl.org/perlre.html#Modifiers)

> 全局匹配，匹配失败后保持当前位置。与 i、m、s 和 x 不同，这两个标志会影响 regex 的使用方式，而不是 regex 本身。有关 g 和 c 修饰符的进一步说明，请参阅在 perlretut 中使用 Perl 中的正则表达式。

指定的 ref 导致：

[http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl](http://perldoc.perl.org/perlretut.html#Using-regular-expressions-in-Perl)

此 URI 有一个名为“全局匹配”的小节，其中包含一个小型教程/工作示例，包括：

> 匹配失败或更改目标字符串会重置位置。如果您不希望在匹配失败后重置位置，请添加 //c ，如 /regexp/gc 。字符串中的当前位置与字符串相关联，而不是正则表达式。这意味着不同的字符串有不同的位置，它们各自的位置可以独立设置或读取。

HTH李

# iphone - 地址可达性 - 服务器和端口 - iOS 5

> ID：11395397
> 
> 赞同：4
> 
> 时间：2012-07-09T12:51:53.630
> 
> 标签：iphone, objective-c, ping, reachability

我正在尝试检查服务器是在线还是离线：我遇到连接时它有端口的问题

我目前的代码：

```
struct sockaddr_in address;
address.sin_len = sizeof(address);
address.sin_family = AF_INET;
address.sin_port = htons(25667);
address.sin_addr.s_addr = inet_addr("fr7.mooshroom.net");

Reachability *reachability = [Reachability reachabilityWithAddress:&address]; 
```

请让我知道我做错了什么。请不要将我链接到其他问题，我已经搜索过，但没有一个有我要找的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T19:32:32.807

基本上 inet_addr() 函数不会为您进行域名解析。您需要向其传递一个 IP 地址（例如 127.0.0.1）。

要将 DNS 名称解析为 IP 地址，您需要查看标准的 gethostbyname() 函数。

澄清：

```
struct hostent *host = gethostbyname("fr7.mooshroom.net");
if (host) {
    struct in_addr in;
    NSLog(@"HOST: %s" , host->h_name);
    while (*host->h_addr_list)
    {
        bcopy(*host->h_addr_list++, (char *) &in, sizeof(in));
        NSLog(@"IP: %s", inet_ntoa(in));
    }
} 
```

现在，说了这么多，你确定这会做你想做的事吗？SCNetworkReachabilityRef 的文档建议不要：

[http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html)

> “当应用程序发送到网络堆栈的数据包可以离开本地设备时，远程主机被认为是可达的。可达性并不能保证数据包会真正被主机接收。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T12:09:17.207

我现在已经修好了，我需要把这条线：并替换to
`const char *serverIPChar = [serverIP cStringUsingEncoding:NSASCIIStringEncoding];`
中的“fr7.mooshroom.net” 。不管怎么说，还是要谢谢你`inet_addr``serverIPChar`

# git - Git Push失败：拒绝更新签出的分支

> ID：11395398
> 
> 赞同：6
> 
> 时间：2012-07-09T12:51:58.417
> 
> 标签：git

> **可能重复：**
> [git push 错误'[remote denied] master -> master（分支当前已签出）'](https://stackoverflow.com/questions/2816369/git-push-error-remote-rejected-master-master-branch-is-currently-checked)

我试图将我的存储库推送到“原点”，但是当我运行“git push”时出现此错误

```
Counting objects: 5, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3/3), done.
Writing objects: 100% (4/4), 485 bytes, done.
Total 4 (delta 0), reused 0 (delta 0)
remote: error: refusing to update checked out branch: refs/heads/master
remote: error: By default, updating the current branch in a non-bare repository
remote: error: is denied, because it will make the index and work tree inconsistent
remote: error: with what you pushed, and will require 'git reset --hard' to match
remote: error: the work tree to HEAD.
remote: error: 
remote: error: You can set 'receive.denyCurrentBranch' configuration variable to
remote: error: 'ignore' or 'warn' in the remote repository to allow pushing into
remote: error: its current branch; however, this is not recommended unless you
remote: error: arranged to update its work tree to match what you pushed in some
Auto packing the repository for optimum performance.
remote: error: other way.
remote: error: 
remote: error: To squelch this message and still keep the default behaviour, set
remote: error: 'receive.denyCurrentBranch' configuration variable to 'refuse'.
/usr/local/git/libexec/git-core/git-sh-setup: Zeile 235: uname: Kommando nicht gefunden.
warning: There are too many unreachable loose objects; run 'git prune' to remove them.
To ssh://XXXX@XXXXXX.typo3server.info/html/typo3
 ! [remote rejected] master -> master (branch is currently checked out)
error: failed to push some refs to 'ssh://XXXXXXX@XXXXXX.typo3server.info/html/typo3' 
```

怎么了？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-09T13:23:01.570

您正在尝试推送到非裸仓库（即*带有*工作树的仓库，就像您的本地克隆一样），但在另一端没有做任何事情来特别说明这一点。

您看起来像是在尝试`git push`部署您的站点。以下是如何做到这一点：

1.  通过在服务器上的 repo 中运行它来忽略 git 现在给你的错误消息：

    ```
    git config receive.denyCurrentBranch ignore 
    ```

    这告诉 git “我会解决的，相信我。”

    现在，如果您推送，它将更新 repo，但索引和工作副本将保持不变。这意味着它总是看起来像您已经进行了更改以恢复您推送的所有内容。

    我们需要一种在推送发生时更新索引和工作副本的方法。听起来是时候……</p>

2.  设置一个`post-receive`钩子。`.git/hooks/post-receive`在**服务器的存储库**中添加文件：

    ```
    #!/bin/bash

    # Drop the env var given to post-receive by default, as it'll mess up our
    # attempts to use git "normally."
    export -n GIT_DIR

    # Move back to the base of the working tree.
    cd ..

    # *Drop all changes* to index and working tree.
    git reset --hard 
    ```

    请注意，这假设您只希望您的跟踪更改是实时的——<strong>您在实时站点上直接更改的任何内容都会在您下次推送时消失（未跟踪的文件除外，但您也不应该拥有这些文件）。

我在最后添加了一个`git status`，这样我就可以看到推送后的情况（因为它被传输回客户端）——这特别是我可以捕获未跟踪的文件并将它们添加到`.gitignore`，或跟踪它们。

不要忘记标记`post-receive`为可执行！

* * *

## 旁白：为什么你不应该有未跟踪的文件？

1.  回滚能力：这是用于部署实时站点。如果您希望能够真正回滚失败的部署，那么您需要所有的东西一起进行部署。

    这绝对包括核心 CMS。现在，它只在服务器上，并且没有被跟踪，所以你没有希望检测到错误。

2.  重新部署的能力：如果您的服务器的硬盘出现故障，您可以解压缩核心 CMS，再次将您的 git 存储库分层，并希望它能正常工作。

3.  能够注意到意外未跟踪的内容：如果您有几十个未跟踪的文件，并且它们都“注定”不被跟踪，那么新文件很容易潜入并迷失在噪音中。

    如果您的默认情况下`git status`是**干净的**，那么您会在它们弹出时立即注意到意外的未跟踪文件。

# php - 显示数据库中的数据而不刷新（Javascript）

> ID：11395399
> 
> 赞同：0
> 
> 时间：2012-07-09T12:51:58.577
> 
> 标签：php, javascript, jquery, sql, ajax

我正在尝试使以下代码工作，当单击以下链接时应该显示我的数据库中的数据：（不刷新页面）

```
<a id="bugatti_link" href="#" database_id="Bugatti">Bugatti</a> 
```

不幸的是，它不起作用，它没有显示任何内容，也没有给出错误。

**索引.php =**

```
<a id="bugatti_link" href="#" database_id="Bugatti">Bugatti</a>

<script>
$("#bugatti_link").click(load_ajax);

function load_ajax(e) {
    var link = $(e.target); 
    var vehicle_database_id = link.attr("database_id");
    var ajax_params = {"brand": vehicle_database_id};
    $.getJSON("query2.php", ajax_params, success_handler)
}

function success_handler(data) {
    //data variable contains whatever data the server returned from the database.
    //Do some manipulation of the html document here. No page refresh will happen.
}
</script> 
```

**查询2.php =**

```
<?php
$host = "xx";
$user = "xx";
$db   = "xx";
$pass = "xx";

$pdo = new PDO("mysql:host=" . $host . ";dbname=" . $db, $user, $pass);

$rows = array();
if(isset($_GET['brand'])) {
    $stmt = $pdo->prepare("SELECT brand FROM cars WHERE brand = ? ");
    $stmt->execute(array($_GET['brand']));
    $rows = $stmt->fetchAll(PDO::FETCH_ASSOC);
}
echo json_encode($rows);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T12:56:41.230

您将 json 数据传递给“success_handler”，但该函数中未处理数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:57:09.127

请注意将 .error 添加到您的 $.getJSON 代码中。如果请求失败，这将告诉您原因。收到了回复，但它可能有问题，这会告诉你。请参阅下面的注释，了解为什么它可能会静默失败。

此外，最好在代码周围添加一个 $(document).ready 包装器，因为它可以确保页面在运行 javascript 之前已完全加载。根据浏览器和元素的嵌套方式，它可能已准备好附加事件，也可能未准备好。无论如何，最好将其放在准备好的文档中以确保始终可靠。

```
$(document).ready( function(){
    $("#bugatti_link").click(function(e){
        e.preventDefault();
        var vehicle_database_id = $(this).attr("database_id");
        var ajax_params = {"brand": vehicle_database_id};
        $.getJSON("query2.php", ajax_params, function(data){
            //data variable contains whatever data the server returned from the database.
            //Do some manipulation of the html document here. No page refresh will happen.
        })
        .error(function(data,msg,error){
            alert( msg );
        });
    });
}) 
```

> 重要提示：从 jQuery 1.4 开始，如果 JSON 文件包含语法错误，请求通常会静默失败。因此，请避免频繁手动编辑 JSON 数据。JSON 是一种数据交换格式，其语法规则比 JavaScript 的对象文字表示法更严格。例如，在 JSON 中表示的所有字符串，无论是属性还是值，都必须用双引号括起来。有关 JSON 格式的详细信息，请参阅[http://json.org/](http://json.org/)。

# testing - 使用 Maven 运行单个测试

> ID：11395406
> 
> 赞同：1
> 
> 时间：2012-07-09T12:52:33.017
> 
> 标签：testing, maven, selenium

我想使用 maven 运行一个测试，这是我的 pom.xml ：

junit junit 4.8.1 测试 org.seleniumhq.selenium.client-drivers selenium-java-client-driver 1.0.2

```
 <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>3.0-alpha-1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet.jsp</groupId>
        <artifactId>jsp-api</artifactId>
        <version>2.2.1-b03</version>
        <scope>provided</scope>
    </dependency> 
```

WebTestAutomatisation org.apache.maven.plugins maven-war-plugin 2.0.2

```
 <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <version>1.0-beta-1</version>
  </plugin>

     <!--  Start the tomcat server and  Deploy the war -->
    <plugin>
      <groupId>org.codehaus.cargo</groupId>
      <artifactId>cargo-maven2-plugin</artifactId>
      <version>1.2.2</version>
        <configuration>

    <fork>true</fork>
        <wait>false</wait>
            <container>
 <containerId>tomcat7x</containerId>
 <type>installed</type>
  <home>${env.CATALINA_HOME}</home>
   </container>
  <!-- <executions>
  <execution>
 <id>start-container</id>
  <phase>pre-integration-test</phase>
  <goals>
  <goal>start</goal>
   <goal>deploy</goal>
  </goals>
 </execution>
 <execution>
  <id>stop-container</id>
 <phase>post-integration-test</phase>
  <goals>
   <goal>stop</goal>
  </goals>
 </execution>
 </executions> -->
</configuration> 
```

```
 <!-- Start the selenium server -->
 <plugin>
  <groupId>org.codehaus.mojo</groupId>
 <artifactId>selenium-maven-plugin</artifactId>
 <version>2.3</version>

  <executions>
     <execution>
      <id>start</id>
    <phase>pre-integration-test</phase>
  <goals>
   <goal>start-server</goal>
   </goals>
  <configuration>
   <background>true</background>
   <logOutput>true</logOutput>
  </configuration>
 </execution>
 <execution> 
```

停止集成测试后停止服务器
org.apache.maven.plugins maven-surefire-plugin 2.4.3 org.junit:com.springsource.org.junit **/functional/*Test.java

```
 <!--   Running the tests in the functional tests package
      during the integration tests phase. -->
 <id>integration-tests</id>
 <phase>integration-test</phase>
  <goals>
<goal>test</goal> 
```

false 无 **/functional/*Test.java

```
</project> 
```

我使用了这个命令：`mvn -Dtest=MyTestClass test` 我得到了这个错误：

我试过这个命令，但它运行所有测试而不是指定的 `mvn -Dit.test=MyTestClass verify`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-18T10:41:57.247

[Jute maven 插件](https://github.com/raydac/jute)允许将单个 JUnit 测试作为外部 JVM 进程执行

# blackberry - 如何限制垂直字段管理器的最后一个字段是否在黑莓中具有焦点

> ID：11395408
> 
> 赞同：-1
> 
> 时间：2012-07-09T12:52:43.583
> 
> 标签：blackberry, java-me

我有一个带有 24 个编辑字段和标签字段的 VerticalFieldManager。

我想限制滚动：当第一个 Editfield 有焦点时，滚动不应该向上，而当最后一个 Editfield 有焦点时，滚动不应该向下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:15:18.210

如下创建 VerticalFieldManager。

```
 VerticalFieldManager vfm  = new VerticalFieldManager    (VerticalFieldManager.VERTICAL_SCROLLBAR | VerticalFieldManager.USE_ALL_WIDTH); 
```

# c# - 如何处理内存堆栈过载

> ID：11395415
> 
> 赞同：1
> 
> 时间：2012-07-09T12:53:05.177
> 
> 标签：c#, image-processing, stack-overflow, emgucv

我正在尝试编写边缘检测方法。而且我使用了 emgucv Image 类。由于我需要灰度值，我已将其声明为

```
Image<Gray,float> MyImage = new Image<Gray,float>; 
```

我选择一个图像并将其像素值分配给 MyImage 作为

```
public void selectImage()
          { 
               OpenFileDialog opp = new OpenFileDialog();
              if (opp.ShowDialog() == DialogResult.OK)
              {                 
                   MyImage = new Image<Gray,float>(opp.FileName);
                  InputArray = new Image<Gray, float>(opp.FileName);
                  Convert.ToString(MyImage);
                  pictureBox1.Image = MyImage.ToBitmap();                
              }             
          } 
```

当我单击边缘检测按钮时，它会调用主递归函数

```
private void detect_edges_Click(object sender, EventArgs e)
        {          
           hueckel_operator(1, 1);
        } 
```

该运算符以 5 像素间隔重复自身。换句话说，我通过将 x 参数增加 5 并将其应用于 x 轴，并在行的末尾将 y 轴增加 5，依此类推。

在hueckel_operator中，再次计算一个非常重的公式的函数“a()”被调用了8次。这是 a() 函数

```
 public double a(int j,  int counter6,  int counter7)
            {

                for (int II = 0; II <= j ; II++)
                {
                    for (KK = 1; KK < 70; KK++)
                    {
                         x_value = input_i_x(KK); //this function brings the x coordinate
                         y_value = input_i_y(KK); // this function brings the y coordinate

                result += HueckelDisk(x_value,y_value,j) * MyImage[x_value+counter6, y_value+counter7].Intensity;
                //MyImage.Dispose();
                    }
                }                           
                return result;
            } 
```

但问题大约在坐标 (75,5) 处，它会引发堆栈溢出异常。我用性能分析调试了它，MyImage 似乎吃掉了所有的内存。您可能想查看递归函数，但由于它太大，我不能把它放在这里，而且我确信递归函数 (hueckel_operator()) 无法达到终止条件，因为我发现它被调用了多少次。我想要的是找出是否有另一种方法可以更有效地计算“结果”。

我的另一个问题是，对象 MyImage 在函数 a() 中使用了 69*j 次，这是否意味着每当调用 a() 时它都会分配 69*j 次内存空间？

在我绝望的尝试中，我已经将几乎每个变量都声明并定义为全局变量，以减少内存使用量，因为我曾想过，每当调用hueckel_operator() 和a() 时，局部变量会一遍又一遍地在堆栈中分配额外的内存，这是一个好的或必要的方法吗？

我使用了 4 个非常嵌套且繁重的函数，并且我不使用任何类。会是主要问题吗？老实说，我在这里看不到任何可以转换为课堂的东西。

我知道，我问了太多问题，但我现在真的很绝望。几周以来我一直在阅读文章，我想我需要一个开始。任何帮助，将不胜感激。

![在此处输入图像描述](../Images/e6abbcb8f57e2de9966be55e6b6471b6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:02:03.977

堆栈溢出异常与内存使用并没有太大关系 - 它来自*堆栈*使用。在你的情况下，一个递归调用。

递归只能走这么深，直到堆栈耗尽。一旦发生这种情况，您的堆栈就会溢出。

如果您*不在*无限递归中但需要更深入，则可以在创建线程时指定堆栈大小，并在其上运行递归函数：

```
var stackSize = 10000000;
var thread = new Thread(new ThreadStart(StartDetection), stackSize); 
```

但是，默认大小是 1MB - 对于大多数任务来说，这已经是相当大的了。您可能想要验证您的递归实际上不是未绑定的，或者您不能减少或删除它。

# javascript - wmuSlider 脚本适用于本地服务器，但不适用于远程服务器

> ID：11395417
> 
> 赞同：0
> 
> 时间：2012-07-09T12:53:10.073
> 
> 标签：javascript, jquery, jquery-animate, slider

我正在尝试让一个名为 wmu 滑块的 jquery 滑块工作。我已经从[https://github.com/pastawoua/wmuSlider](https://github.com/pastawoua/wmuSlider)下载了文件和演示，当我在本地打开 demo.html 时，一切正常，但是当我将它上传到我的网站时，没有任何负载，这里是网址[http://www.klossal.com/wmuSlider/demo/demo.html](http://www.klossal.com/wmuSlider/demo/demo.html)

我已经多次查看所有内容，网址都是正确的，我已经尝试修复这个问题几个小时了，但没有运气，任何帮助将不胜感激。

对不起，如果链接不适合你，这里是代码：

HTML：

```
<!DOCTYPE html>

<!-- BEGIN html -->
<!--[if lt IE 7 ]><html class="ie ie6" lang="en"><![endif]-->
<!--[if IE 7 ]><html class="ie ie7" lang="en"><![endif]-->
<!--[if IE 8 ]><html class="ie ie8" lang="en"><![endif]-->
<!--[if (gte IE 9)|!(IE)]><!--><html lang="en"><!--<![endif]-->

<!-- BEGIN head-->
<head>

<!-- Meta Tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-   
scale=1.0">

<!-- Title -->
<title>wmuSlider Demo</title>

<!-- Stylesheets -->
<link rel="stylesheet" href="css/demo.css" type="text/css" media="screen" />
<script type="text/javascript" src="modernizr.custom.min.js"></script>    
<script src="http://www.klossal.com/jquery-1.7.2.min.js"></script>
<script src="../jquery.wmuSlider.js"></script>
<script src="../jquery.wmuGallery.js"></script>
<script>
    $('.example1').wmuSlider(); 

    $('.example2').wmuSlider({
        touch: true,
        animation: 'slide'
    });   

    $('.example3').wmuSlider({
        touch: Modernizr.touch,
        animation: 'slide',
        items: 2
    });

    $('.example4').wmuGallery();
</script>
<!-- END head -->
</head>

<!-- BEGIN body -->
<body>

<!-- BEGIN .wmuSlider -->
<div class="wmuSlider example1">

    <div class="wmuSliderWrapper">
        <article>
            <img src="http://www.klossal.com/media/boundarywaters/boundry-1.jpg" />
        </article>

        <article>
            <img src="http://www.klossal.com/media/boundarywaters/boundry-2.jpg" />
        </article>

        <article>
            <img src="http://www.klossal.com/media/boundarywaters/boundry-3.jpg" />
        </article>

        <article>
            <img src="http://www.klossal.com/media/boundarywaters/boundry-4.jpg" />
        </article>

        <article>
            <img src="http://www.klossal.com/media/boundarywaters/boundry-5.jpg" />
        </article>

        <article>
            <img src="http://www.klossal.com/media/boundarywaters/boundry-6.jpg" />
        </article>
    </div>

<!-- END .wmuSlider -->
</div>

<!-- BEGIN .wmuSlider -->
<div class="wmuSlider example2">

    <div class="wmuSliderWrapper">
        <article>
            <img src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6104/6271856202_1e3ccb3deb.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6053/6268322528_818ab33f7f.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6232/6239597762_15491d4c97.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6057/6224753006_9fb962d890.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6036/6213397745_1d8f223e93.jpg" />
        </article>            
    </div>

<!-- END .wmuSlider -->
</div>

<!-- BEGIN .wmuSlider -->
<div class="wmuSlider example3">

    <div class="wmuSliderWrapper">
        <article>
            <img src="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6104/6271856202_1e3ccb3deb.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6053/6268322528_818ab33f7f.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6232/6239597762_15491d4c97.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6057/6224753006_9fb962d890.jpg" />
        </article>

        <article>
            <img src="http://farm7.static.flickr.com/6036/6213397745_1d8f223e93.jpg" />
        </article>
    </div>

<!-- END .wmuSlider -->
</div>

<!-- BEGIN .wmuGallery -->
<div class="wmuGallery example4">

    <div class="wmuSlider">        
        <div class="wmuSliderWrapper">
            <article>
                <img width="75" height="75" 
src="http://farm7.static.flickr.com/6052/6279000273_218313c876_s.jpg" data-src-
full="http://farm7.static.flickr.com/6052/6279000273_218313c876.jpg" />
            </article>

            <article>
                <img width="75" height="75" 
src="http://farm7.static.flickr.com/6104/6271856202_1e3ccb3deb_s.jpg" data-src-
full="http://farm7.static.flickr.com/6104/6271856202_1e3ccb3deb.jpg" />
            </article>

            <article>
                <img width="75" height="75" 
src="http://farm7.static.flickr.com/6053/6268322528_818ab33f7f_s.jpg" data-src-
full="http://farm7.static.flickr.com/6053/6268322528_818ab33f7f.jpg" />
            </article>

            <article>
                <img width="75" height="75" 
src="http://farm7.static.flickr.com/6232/6239597762_15491d4c97_s.jpg" data-src-
full="http://farm7.static.flickr.com/6232/6239597762_15491d4c97.jpg" />
            </article>

            <article>
                <img width="75" height="75"    
src="http://farm7.static.flickr.com/6057/6224753006_9fb962d890_s.jpg" data-src-
full="http://farm7.static.flickr.com/6057/6224753006_9fb962d890.jpg" />
            </article>

            <article>
                <img width="75" height="75" 
src="http://farm7.static.flickr.com/6036/6213397745_1d8f223e93_s.jpg" data-src-
full="http://farm7.static.flickr.com/6036/6213397745_1d8f223e93.jpg" />
            </article>
        </div>
    </div>  

<!-- END .wmuGallery -->
</div>

<!-- Scripts -->
<script type="text/javascript" src="modernizr.custom.min.js"></script>    
<script src="http://www.klossal.com/jquery-1.7.2.min.js"></script>
<script src="../jquery.wmuSlider.js"></script>
<script src="../jquery.wmuGallery.js"></script>
<script>
    $('.example1').wmuSlider(); 

    $('.example2').wmuSlider({
        touch: true,
        animation: 'slide'
    });   

    $('.example3').wmuSlider({
        touch: Modernizr.touch,
        animation: 'slide',
        items: 2
    });

    $('.example4').wmuGallery();
</script>

<!-- END body -->
</body>
<!-- END html -->
</html> 
```

有多个JS文件，所以我将链接到它们的github：

[https://github.com/pastawoua/wmuSlider/blob/master/jquery.wmuGallery.js](https://github.com/pastawoua/wmuSlider/blob/master/jquery.wmuGallery.js)

[https://github.com/pastawoua/wmuSlider/blob/master/jquery.wmuslider.js](https://github.com/pastawoua/wmuSlider/blob/master/jquery.wmuslider.js)

[https://github.com/pastawoua/wmuSlider/blob/master/demo/modernizr.custom.min.js](https://github.com/pastawoua/wmuSlider/blob/master/demo/modernizr.custom.min.js)

这是CSS：

[https://github.com/pastawoua/wmuSlider/blob/master/demo/css/demo.css](https://github.com/pastawoua/wmuSlider/blob/master/demo/css/demo.css)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T18:05:41.640

如果这还没有解决（或对于未来的搜索者），请检查从 github 下载的每个文件。当您右键单击并**Save Link As**时，看起来每个文件（包括`sprites.png`文件）都是文件的副本。`demo.html`

 **而是查看演示文件并复制/粘贴。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T15:16:03.227

大写锁定很重要！更改 `<script src="../jquery.wmuSlider.js"></script>` **为**

```
<script src="../jquery.wmuslider.js"></script> 
```

:)**

# jquery - 无限滚动 - 如何延迟 ajax 请求？

> ID：11395424
> 
> 赞同：2
> 
> 时间：2012-07-09T12:53:46.033
> 
> 标签：jquery, ajax

我有一个非常简单的脚本可以正常工作。但是，我想将新结果的附加延迟 3 秒，以避免服务器过载。因此，当您到达页面末尾时，应该显示加载图像 3 秒，然后**才**应该发出 ajax 请求。

我如何使“延迟”？

这是脚本：

```
$(window).scroll(function(){
    if($(window).scrollTop() == $(document).height() - $(window).height()){
         var lastID = $('div.row-details').last().attr("id");

         $('div#loadmoreajaxloader').show();

         $.ajax({url: "/projects.php?lastID=" + lastID,
            success: function(html){
                if(html){
                       $("#maintable").append(html);
                       $('div#loadmoreajaxloader').hide();
                 }else{
                       $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
                   }
              }
           });
      } 
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:10:24.933

for your remark: "i have tried that, it works just for the first time i hit the end of the page. and then, everything becomes a mess :( ",

can you try clearTimeout();? if you scroll condition is met again within 3 seconds, ajax call will not be made. probably solves your mess up issue.

```
var timeoutId;
    $(window).scroll(function(){
        if($(window).scrollTop() == $(document).height() - $(window).height()){
             var lastID = $('div.row-details').last().attr("id");
             clearTimeout(timeoutId);   // no problem if invalid id, there is no exception     
             $('div#loadmoreajaxloader').show();
               timeoutId = setTimeout(function() {
                    $.ajax({
                        url: "/projects.php?lastID=" + lastID,
                        success: function(html) {
                            if (html) {
                                $("#maintable").append(html);
                                $('div#loadmoreajaxloader').hide();
                            } else {
                                $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
                            }
                        }
                    });
                }, 3000);

          } 
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:18:32.690

有些解决方案不需要您在第*一次*AJAX 调用前等待 3 秒。查看[下划线的`throttle()`](http://underscorejs.org/#throttle)功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:02:48.703

将 AJAX 调用包装在传递给 的匿名函数中`setTimeout()`，如下所示：

```
setTimeout(function() {
    $.ajax({
        url: "/projects.php?lastID=" + lastID,
        success: function(html) {
            if (html) {
                $("#maintable").append(html);
                $('div#loadmoreajaxloader').hide();
            } else {
                $('div#loadmoreajaxloader').html('<center>No more posts to show.</center>');
            }
        }
    });
}, 3000); 
```

# android - 带有自定义 BaseAdapter 的 Android CursorLoaded

> ID：11395425
> 
> 赞同：3
> 
> 时间：2012-07-09T12:53:46.260
> 
> 标签：android, android-contentprovider, android-cursoradapter

我一直在寻找如何做到这一点，但我的发现很短。

我在我的应用程序中实现了一个 ContentProvider。我的片段正在使用 CursorLoader 回调来查询 ContentProvider。

SimpleCursorAdapter 通常用于呈现结果，但是，我想创建一个自定义基本适配器，以便可以在显示时使用节标题修改这些结果。

我的总体问题是如何将光标的结果传递给自定义 BaseAdapter？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:10:56.700

我要做的是创建一个从 CursorAdapter 扩展的 CustomCursorAdapter。

这是您可以使用的示例:)

```
public class ContactListCustomCursorAdapter extends CursorAdapter {

private static final String TAG = ContactListCustomCursorAdapter.class.getName();
private LayoutInflater mInflater;

public ContactListCustomCursorAdapter(Context context) {
    super(context, null, false);
    mInflater = LayoutInflater.from(context);
} 
```

在构造函数中，您可以获取 layoutInflater 以便稍后为每个视图充气。

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    contactName = cursor.getString(cursor
            .getColumnIndex(Contacts.DISPLAY_NAME));
    currentId = cursor.getLong(cursor.getColumnIndex(Contacts._ID));
    currentChar = contactName.substring(0, 1);
    ViewHolder mHolder = (ViewHolder) view.getTag();

    if (cursor.isFirst()) {
        mHolder.header.setVisibility(View.VISIBLE);
        mHolder.charHeader.setText(currentChar);
        mHolder.fistContactBackground.setVisibility(View.VISIBLE);
        mHolder.normalBackground.setVisibility(View.GONE);
    } else {
        cursor.moveToPrevious();
        previousChar = cursor.getString(
                cursor.getColumnIndex(Contacts.DISPLAY_NAME)).substring(0,
                1);
        if (collator.compare(currentChar, previousChar) != 0) {
            mHolder.header.setVisibility(View.VISIBLE);
            mHolder.charHeader.setText(currentChar);
            mHolder.fistContactBackground.setVisibility(View.VISIBLE);
            mHolder.normalBackground.setVisibility(View.GONE);
        } else {
            mHolder.header.setVisibility(View.GONE);
            mHolder.fistContactBackground.setVisibility(View.GONE);
            mHolder.normalBackground.setVisibility(View.VISIBLE);
        }
        cursor.moveToNext();
    }
} 
```

在绑定视图上，我这样做是为了知道一行是否与以前的名称不同，以及案例是否显示分隔标题。

```
@Override
public Object getItem(int position) {
} 
```

在 getItem 上，您可以返回对象或外部操作所需的内容，例如列表元素上的 clic。

```
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    View view = mInflater.inflate(R.layout.contact_row, parent, false);
    ViewHolder refHolder = new ViewHolder();
    refHolder.name = (TextView) view
            .findViewById(R.id.contact_row_name_textView);
    refHolder.setContactPhoto((ImageView) view
            .findViewById(R.id.contact_row_photo_ImageView));
    refHolder.header = (LinearLayout) view
            .findViewById(R.id.contact_row_separator);
    refHolder.charHeader = (TextView) view
            .findViewById(R.id.contact_separator_char_textview);
    refHolder.normalBackground = view.findViewById(R.id.normal_background);
    refHolder.fistContactBackground = view
            .findViewById(R.id.first_contact_background);
    view.setTag(refHolder);
    return view;
}

public static class ViewHolder implements ViewHolderInterface {
    private LinearLayout header;
    private TextView name;
    private ImageView contactPhoto;
    private TextView charHeader;
    private View normalBackground;
    private View fistContactBackground; 
} 
```

viewHolder 用于加速视图搜索，在 newView 上设置组件并将它们存储在 Tag 对象中。

在您的活动或片段上，只需在加载时设置光标。

```
 @Override
public void onLoadFinished(Loader<Cursor> arg0, Cursor currentCursor) {
    contactsAdapter.changeCursor(currentCursor);
} 
```

现在您可以过滤或任何您想要的内容，并且光标将由加载程序处理:)

问候。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-09T13:28:48.060

创建一个扩展 BaseAdapter 的新适配器。然后在您的适配器中声明一个字段`private Cursor c`并通过类构造函数将您的光标传递给该适配器。在您的适配器中实现必要的方法，仅此而已。例如，[在这里，您可以阅读如何实现自定义 BaseAdapter。](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)此外，您可以查看 AOSP 中 SimpleCursorAdapter 的实现。

# objective-c - 如何在具有相同根类的 2 个类之间共享代码？

> ID：11395426
> 
> 赞同：3
> 
> 时间：2012-07-09T12:53:46.387
> 
> 标签：objective-c, macos, cocoa, oop, inheritance

我创建了一个名为 的自定义类`RCTextField`，其目的是创建一个`NSTextField`圆角（因此`RC...`）。

这`RCTextField`继承`NSTextField`并覆盖了该`drawRect:`方法，以创建自己的圆角矩形。

现在，我想为 做同样的事情`NSSecureTextField`，即有办法让它有圆角。我不能让它继承`RCTextField`，因为它没有任何*安全*的文本实现`NSSecureTextField`。

如果我继承自`NSSecureTextField`，我将不得不`drawRect:`再次重写所有实现。

我想到的一个选项是有一个`RCBaseTextField`包含一个名为 的静态方法的类，并在和`drawRect:forNSTextField:withParams:`中调用该`drawRect:`方法。然而，这似乎有点骇人听闻，感觉在 Objective-C 中可能有更好的 OOP 方式来做到这一点。`RCTextField``RCSecureTextField`

那么，从`RCTextField`an`RCTextField`和 an之间共享圆角代码的最佳/最理智/软件工程-“esquest”方式是`RCSecureTextField`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T12:59:41.720

我发现对象组合有助于解决这种情况。将所有共享的方法移动到一个单独的类中，然后同时拥有`RCTextField`并`RCSecureTextField`满足您的助手类并适当地调用这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:02:35.630

用这个原型制作一个 C 函数：

```
void drawTextFieldRoundRect(NSTextField* instance, CGRect rect); 
```

在名为 (say) 的文件中声明`TextFieldRounded.h`并在相应的文件中定义`TextFieldRounded.m`（不包含类，仅包含此 C 函数。但将其设为 .m 以便您可以使用 Objective-C 语法）。

在此函数中，您执行自定义绘图。您可以通过参数访问“自我” `instance`。

接下来，在`RCTextField`你实现`-drawRect:`这样的：

```
#import "TextFieldRounded.h"

- (void) drawRect:(CGRect) rect
{
    drawTextFieldRoundRect(self, rect);
} 
```

（对 做同样的事情`RCSecureTextField`）

不是最优雅的，我知道...

**选项 2：**如果您只使用圆角文本字段**，**则可以在 NSTextField 上添加一个类别，并且 NSSecureTextField 应该继承“圆角”行为。但是如果你想要圆形**和**普通的文本字段，它就做不到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:06:03.940

听起来像是依赖注入的案例（注意：NSSecureTextField 继承自 NSTextField）：

```
@interface RCTextField : NSObject {
  NSTextField *textField
}
- (id) initWithTextField:(NSTextField *)_textField;

@end 
```

然后只公开你想要的任何功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T13:10:45.610

不幸的是，你不能让一个 Objective-C 继承更多的其他类的行为。我认为提供一个将由两个`drawRect:`实现调用的函数（使用面向对象的语言并不会阻止在适当的时候使用函数）是更简单的方法。

或者您可能只是忽略`NSSecureTextField`并`RCSecureTextField`继承自`RCTextField`. 然后实现类方法`cellClass`返回`NSSecureTextFieldCell`，你应该得到与`NSSecureTextField`.

```
@interface RCSecureTextField : RCTextField
@结尾

@implementation RCSecureTextField
+ (Class)cellClass { return [NSSecureTextFieldCell 类]; }
@结尾

```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-09T13:11:02.093

您可能想要子类`NSTextFieldCell`化，而不是控件。我将子类化`NSSecureTextFieldCell`并在两个控件中使用它；从绘图的角度来看，唯一的区别是`echosBullets`财产的价值。

# cocos2d-iphone - 世界->setContactListener (contactListener)? 当我写下这一行时，我的应用程序崩溃了

> ID：11395429
> 
> 赞同：1
> 
> 时间：2012-07-09T12:54:00.240
> 
> 标签：cocos2d-iphone, box2d-iphone

当我写这行时，我的应用程序崩溃了

```
world ->setContactListener (contactListener) 
```

错误信息在

```
void b2World::SetContactListener(b2ContactListener* listener)
{
    m_contactManager.m_contactListener = listener;    //EXE_BAD_ACCESS
} 
```

请帮助我，我想使用contactlistener进行碰撞检测...谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:07:52.933

如果您的程序在该行失败，则可能未设置 m_contactManager。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T20:43:54.827

你记得初始化`contactListener`吗？如果您尝试在对 的调用中使用未初始化的指针`setContactListener`，您将获得 BAD_ACCESS。确保在通话之前有这样的一行：

```
ContactListener *contactListener = new ContactListener(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-21T04:52:08.933

使用此代码

```
_contactListener = new MyContactListener();
world->SetContactListener(_contactListener); 
```

要编写此代码，请在创建 word 之后。

崩溃原因：未创建世界，但您将ContactListener 设置为世界，这样您的应用程序就崩溃了。我认为这对你有帮助...

# ruby - Ruby：在不同文件中使用的类对象

> ID：11395431
> 
> 赞同：0
> 
> 时间：2012-07-09T12:54:01.197
> 
> 标签：ruby, class, object, module

我想全局使用在主脚本中创建的对象。

例如，我在不同的文件中有不同的模块，在不同的 ruby​​ 文件中有不同的类

文件名ModA.rb

```
module A
  # ........
  # some code here
  # ........
end 
```

文件名ModB.rb

```
module B
  # ........
  # some code here
  # ........
  objReport.addReport() # getting an error "ruby uninitialized local variable or object: Main"
end 
```

FileNameClass_Report.rb

```
class Report
  def addreport()
  end
end 
```

主脚本.rb

```
require "FileNameModA"
require "FileNameModB"
require "FileNameClass_Report"

include ModuleA
include ModuleB

objReport = Report.New

objReport.addReport() # Works fine here 
```

您能否让我知道如何在 Ruby 的不同文件/模块中创建和使用对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:24:33.607

当您`require "FileNameModB"`执行模块 B 的定义以及`objReport.addReport`该上下文中不存在的定义调用时

我不确定你想通过在模块定义期间调用 addReport 来实现什么，但你可以交换一些行并让它像这样工作：

```
require "FileNameClass_Report"
$objReport = Report.New

require "FileNameModA"
require "FileNameModB" # update your file to call $objReport.addReport

include ModuleA
include ModuleB 
```

整个事情看起来像一团糟，试着重新考虑你的类/模块以避免将它们包含到全局对象中

# rest - 如何使用多个相互关联的参数构建 RESTful URI

> ID：11395439
> 
> 赞同：0
> 
> 时间：2012-07-09T12:54:21.087
> 
> 标签：rest, uri

我正在构建一个 RESTful API，用户可以在其中发出关于给定对象的查询，并为该对象附加权重。例如：

`http://host.domain.com/cars?id=100&weight=50`

（这是一个人为的简化示例，如果这没有太多的语义意义，请致歉！）

复杂之处在于用户可能需要在单个查询中组合多个对象。我想知道是否有标准的 RESTful 方式来做到这一点？例如，我想到的选项包括：

`http://host.domain.com/cars?id1=100&weight1=50&id2=200&weight2=90`

`http://host.domain.com/cars?ids=100,200&weights=50,90`

我不喜欢第二个，因为例如，权重是可选的，所以你需要允许这样的事情：

`http://host.domain.com/cars?ids=100,200&weights=,90`

第一个对我来说似乎更可取，但它似乎会变得复杂，特别是因为我已经有索引参数（例如 x1，x2），这意味着我需要有两个级别的索引（x1_1，x1_2，...）

有人知道这种事情的标准方法吗？或者谁能​​想到一个务实、明智的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:02:17.767

我不确定 Cool URI 是否涵盖了您的问题 - [http://www.w3.org/TR/cooluris/](http://www.w3.org/TR/cooluris/)

我个人的选择（没有引用支持它）是首先使用服务器配置（重定向或别名）删除查询字符串，以便基本资源显示为：

`http://host.domain.com/cars`

然后可以附加 ID 和权重列表（在 URI 的“路径信息”中），按您认为合适的方式分隔 - 分号或斜杠。我的选择是后者，因为它使 URI 更易于阅读且更易于键入。唯一会出现问题的是权重有时会被忽略，但如果 ID 是字母数字（可能是散列）并且权重始终是数字，则可以克服这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:35:50.053

我仍然不知道这是否正确，LeeGee 的建议似乎是合理的，但我最终选择了这样的东西：

`http://host.domain.com/cars?id_1=100&weight_1=50&id_2=200&weight_2=90`

它最终创建了难看的 URI，但在我看来，它们是一致的、明确的，尤其是在省略可选参数时。

# symfony - Symfony2 - 如何使用永久链接而不是 id 页面？

> ID：11395457
> 
> 赞同：0
> 
> 时间：2012-07-09T12:55:11.420
> 
> 标签：symfony

我最近创建了一个网站（按照法语教程[http://www.siteduzero.com/tutoriel-3-517569-symfony2-un-tutoriel-pour-debuter-avec-le-framework-symfony2.html](http://www.siteduzero.com/tutoriel-3-517569-symfony2-un-tutoriel-pour-debuter-avec-le-framework-symfony2.html)）。

现在一切正常，但我不知道如何创建/使用永久链接而不是使用文章 ID 来访问文章。

例如，我有这个：

[http://www.mydomain.com/article/105](http://www.mydomain.com/article/105)

改成 ：

[http://www.mydomain.com/article/my_article_title](http://www.mydomain.com/article/my_article_title)

"my_article_title" 是 id 为 105 的页面的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:27:44.760

这里有一个在 Symfony2 中使用 slugs 的解释：http: [//tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html#slugifying-the-url](http://tutorial.symblog.co.uk/docs/customising-the-view-more-with-twig.html#slugifying-the-url)

在不使标题 slug 唯一的情况下，您需要使用以下 url 格式：

[http://www.mydomain.com/article/105/my_article_title](http://www.mydomain.com/article/105/my_article_title)

# c# - 无锁技术将双重更新从一个线程传递到另一个线程

> ID：11395458
> 
> 赞同：0
> 
> 时间：2012-07-09T12:55:15.473
> 
> 标签：c#

假设我有共享`double`变量。线程`A`每秒更新数千次。在另一个线程`B`中，每次发生这种情况时，我都希望以某种方式收到有关“更新”的通知。

我试图完全避免通知，只使用`while(true)`循环，但这给我的程序[无锁计算带来了显着的减速：如何对其他线程正在改变的 N 个双数求和？](https://stackoverflow.com/questions/11392169/lock-free-calc-how-to-sum-n-double-numbers-that-are-changing-by-other-threads)可能是因为“同时你不断地从内存中加载同一个数组，这对性能来说并不是很好，因为内存带宽是有限的。”

我也尝试过使用`Monitor`class 但它也很慢，而且我看到`Monitor.TryEnter`return时延迟高达 1-2 毫秒`false`。

我现在认为我需要使用无锁技术进行通知，可能使用`SpinLock`或其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:00:00.760

使用等待句柄在线程之间进行通知

```
 System.Threading.AutoResetEvent are = new System.Threading.AutoResetEvent(false);
    double d = 0;
    public void ThreadA(object state)
    {
        while (true)
        {
            d++;
            are.Set();
        }
    }

    public void ThreadB(object state)
    {
        while (true)
        {
            are.WaitOne();
            double current = d;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:59:47.220

不要一直保持通知线程。当线程 A 更改值时，他应该通知线程 B 并继续前进。

# vim - 如何比较折叠、电力线和 mkview？

> ID：11395461
> 
> 赞同：0
> 
> 时间：2012-07-09T12:55:20.573
> 
> 标签：vim

我正在使用以下 VIM 设置进行折叠：

```
highlight Folded guibg=black guifg=#524A4D
set foldmethod=syntax 
```

我也在使用电力线插件：

```
Bundle 'Lokaltog/vim-powerline' 
```

我想保存我的折叠，所以我找到了这两行代码：

```
au BufWinLeave * silent! mkview
au BufWinEnter * silent! loadview 
```

但在那之后我的电力线状态在保存后消失了。如何比较这三件事。

我创建了截屏视频以准确显示正在发生的事情： [http ://screencast.com/t/ZnXTxdAVUZse](http://screencast.com/t/ZnXTxdAVUZse)

我认为这是 Powerline 和 mkview 之间的冲突。那么是否有机会以其他方式保存折叠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:10:25.997

[您在 Github 上创建的问题](https://github.com/Lokaltog/vim-powerline/issues/172)可能比这里的问题更有用，但我认为您的问题可能与[另一个](https://github.com/Lokaltog/vim-powerline/issues/28)问题有关。

您应该`highlight Folded guibg=black guifg=#524A4D`从您的 vimrc 中删除 并删除会话文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T22:37:28.830

我找到了答案：

```
set viewoptions-=options
augroup vimrc
    autocmd BufWritePost *
    \   if expand('%') != '' && &buftype !~ 'nofile'
    \|      mkview
    \|  endif
    autocmd BufRead *
    \   if expand('%') != '' && &buftype !~ 'nofile'
    \|      silent loadview
    \|  endif
augroup END 
```

# javascript - 使用 HTML5 拖放

> ID：11395466
> 
> 赞同：-1
> 
> 时间：2012-07-09T12:55:34.513
> 
> 标签：javascript, jquery, python, css, html

我正在研究 HTML5，我是其中的新手。

我正在开发一个执行以下操作的程序：

1.  我想在按钮上拖放文件。
2.  用户将能够看到所有拖放文件。
3.  需要有一个按钮来上传文件。
4.  上传后，应该会弹出一个进度条，上面会有取消上传和跳过（如果不想上传特定文件）按钮。

请让我知道我该怎么做。
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:57:16.233

如果你知道一点 jQuery，你可以使用 jQuery UI droppable/dragable：http: [//jqueryui.com/demos/droppable/](http://jqueryui.com/demos/droppable/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:03:48.840

[以下](http://www.html5rocks.com/en/tutorials/file/dndfiles/)是您所询问的所有内容的非常简单的示例：来自输入标签的文件、来自拖放的文件、打印文件名和显示进度条。我喜欢那个使用“新”html5 功能轻松实现的网站。

# visual-studio - Win 7 上的 VS2012 Ultimate RC 中没有 JavaScript 和 Metro 应用程序模板

> ID：11395477
> 
> 赞同：4
> 
> 时间：2012-07-09T12:56:16.747
> 
> 标签：visual-studio

嗨，我已经在 Win 7 上安装了 VS2012 Ultimate RC。但它没有显示用于 VB 和 C# 的 Metro 风格应用程序的项目模板，也没有显示 JavaScript 的项目模板。是否有必要在 Win 8 RC 上安装这个 VS，然后它才会显示 Metro 和 Javascript 的模板。或者是否有单独版本的 VS 呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T17:52:07.723

Win8 开发仅在 Win8 上支持。VS 安装在从 Vista 开始的任何 Windows 操作系统上以支持经典应用程序开发，但正如您所见，您将无法访问 Win8 应用程序样式。

由于 Win8 rc 是免费提供的，因此您可以下载它并将其安装在虚拟机上并在其上编写代码，以实现低成本的解决方法。你不需要让它成为你的主要操作系统。在 VM 中进行开发有很多好处，但这不是您所要求的，所以我将把它留在那里。

# c++ - 在阵列添加和性能问题 CPU 与 GPU 中无法更改超过 10000 的阵列大小

> ID：11395485
> 
> 赞同：1
> 
> 时间：2012-07-09T12:56:34.613
> 
> 标签：c++, arrays, parallel-processing, opencl, performance

我是 OpenCL 的新手，对数组添加有一些问题我使用下面链接中提供的代码

[http://code.google.com/p/opencl-book-sa​​mples/source/browse/#svn%2Ftrunk%2Fsrc%2FChapter_2%2FHelloWorld%253Fstate%253Dclose](http://code.google.com/p/opencl-book-samples/source/browse/#svn%2Ftrunk%2Fsrc%2FChapter_2%2FHelloWorld%253Fstate%253Dclosed)

我添加了一些部件来测量 GPU 的性能

```
clFinish(commandQueue);
        // Queue the kernel up for execution across the array
        cl_ulong start, end; cl_event  k_events;

        errNum = clEnqueueNDRangeKernel(commandQueue, kernel, 1, NULL,
                                        globalWorkSize, localWorkSize,
                                        0, NULL, &k_events);
         clGetEventProfilingInfo(k_events, CL_PROFILING_COMMAND_START,  
                            sizeof(cl_ulong), &start, NULL); 
         clWaitForEvents(1 , &k_events);

    clGetEventProfilingInfo(k_events, CL_PROFILING_COMMAND_END, 
                            sizeof(cl_ulong), &end, NULL); 
    clGetEventProfilingInfo(k_events, CL_PROFILING_COMMAND_START,  
                            sizeof(cl_ulong), &start, NULL); 

    float GPUTime = (end - start); 
```

这可以测量 CPU 时间

```
LARGE_INTEGER CPUstart, finish, freq;
QueryPerformanceFrequency(&freq);
QueryPerformanceCounter(&CPUstart);

for (int i=0;i<ARRAY_SIZE;i++){

    result[i]=a[i]+b[i];
}

QueryPerformanceCounter(&finish);
double timeCPU=(finish.QuadPart - CPUstart.QuadPart) /((double)freq.QuadPart)/1000000000.0) ; 
```

我遇到的第一个问题是**数组大小；它不能超过 10000 ；如果我这样做；它只是崩溃**。如何解决？

第二个问题是性能；**GPU/CPU 比率范围太宽；从 13% 到 210% (ish)**。为什么会发生这种情况，您能否提出修复建议？

编辑：我想出了第二个；延迟是由省电模式引起的；它将 core/mem 设置为远低于 default 。只需使用程序锁定它；并且性能稳定在 ~150-300 % (GPU/CPU)

好案例

```
GPU time :632667 nanosecs.
CPU time : 990023 nanosecs.
GPU/CPU ratio : 156.484 percent. 
```

还有一个不好的：

```
GPU time :6.83267e+006 nanosecs.
CPU time : 1.00756e+006 nanosecs.
GPU/CPU ratio : 14.7462 percent. 
```

任何想法将不胜感激。谢谢 :D

PS：CPU是酷睿i3-370M；显卡：HD5470。我在 Windows 7 上使用 VS2008

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:05:55.783

这是一个很好的答案，可以帮助您了解达到极限的原因

[C++ 中是否有最大数组长度限制？](https://stackoverflow.com/questions/216259/is-there-a-max-array-length-limit-in-c)

如果您能找到一种在代码中创建内存管理的方法，这可能有助于缓解您的一些问题。

顺便说一句，我会寻找其他操作系统，例如可能能够帮助运行您的代码的 linux 环境。Windows 充满了占用内存的服务，可能是您的问题的一个因素。或者你可以得到更好的硬件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:08:37.587

一些东西：

如果您的本地工作量没有四舍五入到您的全局工作量，您最终可能会得到一小部分剩余部分。IE：本地大小为 100，全局大小为 1050 -> 50 额外。该位 IIRC 仍会得到处理。解决该问题的方法是 a) 确保均匀舍入，或 b) 检查内核中的保护变量，如果超出范围则中止。

其次，我注意到一些奇怪的`clGetEventProfilingInfo`地方，有时它会很准确，有时它会很不准确。我最终使用`clFinish`并对`QueryPerformanceCounter`我的 CL 代码进行了基准测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T07:45:49.490

您的程序因更大的数组大小而崩溃的一个可能（也是最可能的）原因是由于`main.cpp`（原始代码中的第 274-276 行）中的以下代码：

```
float result[ARRAY_SIZE];
float a[ARRAY_SIZE];
float b[ARRAY_SIZE]; 
```

这些是自动数组，它们的空间在`main`函数的堆栈上分配。所需的总空间`3*ARRAY_SIZE*sizeof(float)`等于`12*ARRAY_SIZE`。Windows 上的默认堆栈大小为 1 MiB，这意味着`ARRAY_SIZE`最高可达 87380。这是给定默认堆栈大小的上限，并且由于堆栈也用于其他用途，因此实际值会略低一些。

您可以在 VS 项目属性的*Linker* -> *System*页面上增加堆栈大小。`malloc()`或者更好地使用或在堆上分配这些数组`new[]`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T19:12:10.123

您可以使用 clGetDeviceInfo API 调用来确定您的 OpenCL 设备的两个关键参数

CL_DEVICE_MAX_MEM_ALLOC_SIZE 和 CL_DEVICE_GLOBAL_MEM_SIZE

[http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetDeviceInfo.html](http://www.khronos.org/registry/cl/sdk/1.0/docs/man/xhtml/clGetDeviceInfo.html)

这些决定了您可以使用多少全局内存以及可以分配多少。

# c# - 如何从使用 RedirectToAction 执行的方法中返回对象？

> ID：11395487
> 
> 赞同：-1
> 
> 时间：2012-07-09T12:56:39.973
> 
> 标签：c#, asp.net-mvc, redirecttoaction

我有一个带有获取、保存和创建操作的控制器。这些操作将项目类型作为参数。这只是一个字符串，指定我们正在处理的项目类型。

每个项目类型都有一个子控制器，每个子控制器都实现了具有 Get、Save 和 Create 方法的子控制器接口 (ICildController)。

每个子控制器都根据其类型 (ItemTypeController) 命名。当我从父控制器获取项目时，我可以这样做：

```
Get(string itemType, int id)
{
    return RedirectToAction("Get", itemType, new { id });
} 
```

子控制器中的 Get 方法具有 ActionResult 返回类型（返回 Partival View），因此可以正常工作。

但是，当我保存一个项目时，所有子对象都被创建，然后返回到父对象并存储在其中，以便只能在父对象上执行保存（NHibernate 将处理级联记录）。

如何在不首先实例化所有子控制器的情况下从这些方法返回对象。例如，我希望能够调用 Save(itemType, item)

```
Save(string itemType, Item item)
{
    return RedirectToAction("Save", itemType, new { item });
} 
```

然后我们会找到合适的子控制器（itemTypeController），执行Save(item)方法，然后将item（item）返回给父控制器。

```
Save(Parent parent)
{
    IRepository<Parent> _parent;
    var item = new Parent();
    item.Id = parent.Id;
    item.Children = parent.Children.AddAll(parent.Children.Select(Save(parent.ChildType)); // save each child and add it to the parent's child collection
    return _parent.Save(item);
}

Save(Child child)
{
    IRepository<Child> _child;
    var item = new Child();
    item.Id = child.Id;
    return _child.Save(item);
} 
```

实现这一目标的最佳解决方案是什么？提前感谢您的帮助。

**编辑**

我将如何将复杂对象转换为 ViewModel。例如，包含 Child 类型的子项的 Parent 对象。

在 ParentTypeController 我们有：

```
ParentViewModel ToViewModel(Parent parent)
{
    var model = new ParentViewModel();
    model.Id = parent.Id;
    model.Children = parent.Children.Select(ToViewModel); //Use the ToViewModel method in the ChildTypeController
    return model;
} 
```

子类型控制器：

```
ChildViewModel ToViewModel(Child child)
{
    var model = new ChildViewModel();
    model.Id = child.Id;
    return model;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:12:31.837

认为您在定义正确的抽象时遇到了问题。不要将控制器用于此类行为或交互。您已经有一个存储库，所以让它完成繁重的工作。

你不应该从行动中调用行动，除非有一个非常好的理由。http 请求映射到（功能）操作。一个动作可以使用模型（在 Mvc 中）并使用返回值来创建响应。

不确定为什么您想要或需要在控制器中使用此父/子层次结构。也许你可以解释你为什么需要它。

**编辑** 尝试[AutoMapper](https://github.com/AutoMapper/AutoMapper) “.NET 中基于约定的对象-对象映射器。” 将对象图转换为其他对象图。适用于简单和复杂的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T12:59:58.260

首先，您**不**应该像现在这样使用`RedirectToAction()`一般模式。来自[MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction.aspx)：

> 向浏览器返回 HTTP 302 响应，这会导致浏览器对指定操作发出 GET 请求。

因此，对于用户对您的应用程序提出的每一个请求，您都在强迫他们实际提出**两个**！如果你想使用重载方法，你可以在你的控制器中这样做；您不需要导致浏览器重定向。

我认为一旦你摆脱了这种模式，其余的就会自然而然地出现。在我自己的项目中，我发现最好分两步执行数据库操作 - (1) 创建或更新，然后 (2) 再次从数据库请求“新鲜”对象状态。

# jquery - youtube 自定义标题的 Fancybox 未正确显示

> ID：11395488
> 
> 赞同：1
> 
> 时间：2012-07-09T12:56:40.250
> 
> 标签：jquery, css, fancybox, webforms

我正在处理具有照片和视频部分的图库部分。

我照片库的一切都很好，而且工作正常。示例：图片库 URL [http://tinyurl.com/bsqd5lp](http://tinyurl.com/bsqd5lp)

在照片库中，我使用标签`'titleFromAlt': true,`传递标题。`alt`alt 标签有自定义标题示例`<span>2012-07-02</span><br><span>Department of Tourism</span>`

我想为视频厨房做同样的事情，但我无法使用`'titleFromAlt': true,`. 我这样做的方式不好，因为当将鼠标悬停在图像上时，它会显示标题作为 HTML 代码。示例：视频库 URL [http://tinyurl.com/bsdq694](http://tinyurl.com/bsdq694)

我遇到的其他问题是视频的标题居中。我试图更改 CSS 以使标题左对齐。

```
.fancybox-title-float {
    position: absolute;
    left: 0;
    bottom: -20px;
    height: 32px;
    float:left;
} 
```

出于某种原因，即使我在显示图像后放置它，我也无法在一夜之间完成上述代码。

对此表示赞赏。

更新：

你管视频的代码

```
$(document).ready(function () {
    $(".youtube").click(function () {
        $.fancybox({
            'padding': 0,
            'autoScale': false,
            'transitionIn': 'none',
            'transitionOut': 'none',
            'title': this.title,
            'titleFromAlt': true,
            //'titlePosition': 'over',
            'width': 680,
            'height': 495,
            'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type': 'swf',
            'swf': { 'wmode': 'transparent', 'allowfullscreen': 'true' }
        });
        return false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:07:35.243

通过查看您的代码，我可以看到出现在 span 标记中的文本也出现在 title 属性中。尝试使用文本删除该属性，标题文本将不会出现。

关于第二个问题：
从 CSS class`.fancybox-title-float`中删除属性 'position: absolute;'，并从 id`#fancybox-title-float-left`中删除 'padding' 属性。应用这些更改后，您的文本将向左对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T06:58:17.797

我们忽略的一件事是，对于您的视频，您使用的是手动方法，`.click()`而不是通过常规方法将 fancybox 绑定到选择器`.fancybox()`

在这种情况下 - using `.click()`- 该`titleFromAlt`选项将不起作用，但是您仍然可以使用常规 jQuery 表达式从`alt`存储在标签中的属性中设置 fancybox 标题。`img`

所以试试这个脚本

```
$(document).ready(function () {
    $(".youtube").click(function () {
     // first, get the value from the alt attribute
        var newTitle = $(this).find("img").attr("alt"); // NEW
        $.fancybox({
            'padding': 0,
            'autoScale': false,
            'transitionIn': 'none',
            'transitionOut': 'none',
          //'title': this.title, // we will replace this line
            'title' : newTitle,  //<--- this will do the trick
          //'titleFromAlt': true,  // we don't need this anymore
          //'titlePosition': 'over', 
            'width': 680,
            'height': 495,
            'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
            'type': 'swf',
            'swf': { 'wmode': 'transparent', 'allowfullscreen': 'true' }
        });
        return false;
    });
}); 
```

...假设您在标签中有一个`alt`属性。`img`

很抱歉造成混乱和所有来回的评论。

# javascript - 提议改变 JavaScript 本身？

> ID：11395494
> 
> 赞同：11
> 
> 时间：2012-07-09T12:56:57.450
> 
> 标签：javascript

我知道这个网站：

[http://wiki.ecmascript.org/doku.php](http://wiki.ecmascript.org/doku.php)

但是，我还没有找到可以对 JavaScript 语言提出修改建议的地方。这样做是否对整个社区开放？最后，提到的网站是否提供了一份完整的提案清单。我会做一点研究。我不想建议已经提出类似建议的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:54:54.943

ECMAscript 讨论（新旧提案）：[https ://mail.mozilla.org/listinfo/es-discuss](https://mail.mozilla.org/listinfo/es-discuss)

仅针对 ECMAscript 5 的讨论（勘误表）：[https ://mail.mozilla.org/listinfo/es5-discuss](https://mail.mozilla.org/listinfo/es5-discuss)

# php - PHP比较来自Mysql的值

> ID：11395496
> 
> 赞同：1
> 
> 时间：2012-07-09T12:57:01.450
> 
> 标签：php, mysql

MySql 表如下所示：

```
 id    |        values   
  --------------------------------
    41    |    154, 256, 526, 50
    86    |    542, 586, 785, 41 
```

我想将此数据库中的值与另一个 MySql 查询的结果中的值进行比较。从另一个查询中，我得到特定用户和值的结果，例如：

```
user id: 41
values: 154,526,50 
```

如何比较这两个数据库“值”列并获得不同值的总数和不同的值？

在本例中，该 PHP 函数的结果将是：

```
total number of different values: 1
different value: 256 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T12:59:24.070

通过规范化您的数据库。将这些值保存在不同的表中并创建一个新的耦合表，将这些值连接到用户。这将大大简化您的开发。

编辑：查询将如下所示：

```
SELECT
    value
FROM
    couplings_table
WHERE
    user_id = X
AND
    value NOT IN (SELECT
                    value
                  FROM
                    couplings_table
                  WHERE
                    user_id = Y) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:01:41.733

您可以使用 array_diff：

[http://php.net/manual/en/function.array-diff.php](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:09:38.607

用“，”爆炸并使用数组差异或搜索每个项目 in_array 并使用结果。我认为 array_diff 就是为了这个。

# mysql - ssh中的Mysql客户端期望引用烦恼

> ID：11395498
> 
> 赞同：0
> 
> 时间：2012-07-09T12:57:03.350
> 
> 标签：mysql, bash, ssh, expect

我正在尝试在 bash 脚本中执行以下操作：

```
REPLICATION_USER_SETUP=$(expect -c "spawn ssh $LDAP_USER@$MASTER_IP_ADDRESS \"mysql --user=$MYSQL_USER --socket=$MYSQL_SOCKET --execute \"GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO \'$MYSQL_REPLICATION_USER\'@\'$SLAVE_IP_ADDRESS\' IDENTIFIED BY \'$MYSQL_REPLICATION_PW\';\"\";expect Password:;send $LDAP_PASS\r;interact") 
```

但是每当我尝试运行它时，我都会不断收到“关闭引号后的额外字符”。我尝试了双引号和单引号的变体，但似乎没有任何效果。谁能告诉我我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T16:37:01.657

尝试转义 sql 查询的反斜杠：

```
REPLICATION_USER_SETUP=$(expect -c "spawn ssh $LDAP_USER@$MASTER_IP_ADDRESS \"mysql --user=$MYSQL_USER --socket=$MYSQL_SOCKET --execute \\\"GRANT REPLICATION SLAVE, REPLICATION CLIENT ON *.* TO \'$MYSQL_REPLICATION_USER\'@\'$SLAVE_IP_ADDRESS\' IDENTIFIED BY \'$MYSQL_REPLICATION_PW\';\\\"\";expect Password:;send $LDAP_PASS\r;interact") 
```

# javascript - 如何在没有导航按钮的浏览器中打开 Web 应用程序

> ID：11395499
> 
> 赞同：1
> 
> 时间：2012-07-09T12:57:04.683
> 
> 标签：javascript, asp.net, ajax, internet-explorer, browser

我有一个 Web 应用程序，我想禁用后退按钮。我阅读并发现我可以在没有导航控件的情况下使用函数 window.open(...) 打开浏览器。

这是代码：

```
window.open (mywebappURL,"mywindow","status=1,toolbar=0"); 
```

我试图把它放在我的 Main.Master 页面中，但我得到了一个无限循环，并且新窗口作为我的应用程序的弹出窗口打开。

有谁知道我应该把这段代码放在哪里让我的 web 应用程序在没有导航按钮的浏览器中打开？

谢谢，英巴尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:02:19.823

在链接的 onclick() 事件上试试这个

```
function openPopup(){

  var pathname = (window.location.pathname);
  window.open(pathname+'somePopup.html','','width=800,height=450,resizable=yes,dependent,screenx=80,screeny=80,left=80,top=20,scrollbars=no'); 
  return false;
} 
```

并在 html

```
<a href=# onclick="openPopup();">click me</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:04:19.887

要直接回答您的问题，请确保您打开的窗口与最初访问的窗口的 URL 不同。所以你的访客可能会到达`www.example.com/index.html`然后打开`www.example.com/popup.html`

如果你`index.html`再次打开，新的副本会立即打开一个弹窗，它会立即打开一个弹窗，然后就是你的无限循环。

然而，正如一些人已经评论过的那样，这通常是不鼓励的。除此方法的其他缺点外，弹出窗口拦截器可能会将其解释为试图启动弹出广告，迫使您的访问者识别发生的事情并更改他们的设置。

# xcode - 如果我安装了phonegap，我以后会不会遇到Xcode的问题？

> ID：11395502
> 
> 赞同：1
> 
> 时间：2012-07-09T12:57:11.137
> 
> 标签：xcode, cordova

我是一名工程师，但我没有任何开发背景。我的老板给了我一台装有 Xcode 的 Mac Mini，看起来有人给我发了一些用于 phonegap 的源代码。

所以我的问题是，如果我安装（？）phonegap，我将来是否能够以正常方式使用Xcode，还是完全改变Xcode的不可逆过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:04:34.333

我建议您在“Phonegap Generate”下查看一下：http: [//savagelook.com/blog/portfolio/8-things-to-know-about-phonegap](http://savagelook.com/blog/portfolio/8-things-to-know-about-phonegap)

对此也有：[https ://groups.google.com/forum/?fromgroups#!topic/phonegap/VE9EiD-eIrY](https://groups.google.com/forum/?fromgroups#!topic/phonegap/VE9EiD-eIrY)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:13:51.133

不，它根本不会影响 Xcode。现在，如果您想使用它，您将能够在创建新的 Xcode 项目时选择 phonegap 应用程序类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:01:16.253

为什么那么认真，

从安装 phonegap 的那一刻起，您就可以按原样使用 xCode。

不要惊慌并享受编码。

谢谢， 吉格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:04:25.220

哦是的！如果您安装它，您将永远迷失 :D 只是开玩笑！继续！不会发生任何错误，在开始做事之前考虑看看文档......

# java - 来自 ZipEntry (java) 的 RandomAccessFile

> ID：11395508
> 
> 赞同：3
> 
> 时间：2012-07-09T12:57:49.530
> 
> 标签：java, zip

我正在寻找有关通过 RandomAccessFile 阅读 zip 档案的内容。所以，我找到了这个例子：[http](http://www.java2s.com/Code/JavaAPI/java.io/RandomAccessFilereadLine.htm) ://www.java2s.com/Code/JavaAPI/java.io/RandomAccessFilereadLine.htm 但是它对我不起作用，它告诉我没有这样的文件或目录，但是文件-路径是正确的。这个例子不正确吗？

更新：来自 docs.oracle.com：

> `RandomAccessFile(String name, String mode)`
> 
> 创建一个随机访问文件流，以读取和写入具有指定名称的文件。

在此示例中，他们尝试使用 entryName 作为“名称”参数来创建 RAF，这很奇怪

还有一个同样的例子：[http ://www.java-tips.org/java-se-tips/java.util.zip/how-to-read-files-within-a-zip-file-3 .html](http://www.java-tips.org/java-se-tips/java.util.zip/how-to-read-files-within-a-zip-file-3.html)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-20T03:27:45.927

我认为这是未经审查的代码在互联网上出现并导致问题无穷无尽的情况。

这两个示例中的代码不可能做任何有用的事情。代码可以做任何事情的唯一方法是，如果 zip 文件的内容已经被提取到包含 zip 的文件夹中。

长与短：您不能将 RAF 与 ZipEntry 一起使用，因为 ZipEntry 指的是加密流。您不能对流进行随机访问（除非您缓冲整个内容）。

我真的很有趣：

a) java-tips 文章中的代码没有遵循 Java 的正确命名约定 b) 两篇文章中的代码惊人地相似

下面是展示如何正确使用 ZipInputStream 的示例代码：http: [//java.sun.com/developer/technicalArticles/Programming/compression/](http://java.sun.com/developer/technicalArticles/Programming/compression/)

# java - twitter4j setpage（）不工作

> ID：11395509
> 
> 赞同：0
> 
> 时间：2012-07-09T12:57:51.370
> 
> 标签：java, twitter4j

我正在使用 twitter4j 版本 2.2.5。 如果我将它与and`setPage()`一起使用，它似乎不起作用。请参阅以下代码：`setSince()``setUntil()`

```
Twitter twitter = new TwitterFactory().getInstance();
twitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);
AccessToken accessToken = new AccessToken(ACCESS_TOKEN, ACCESS_TOKEN_SECRET);
twitter.setOAuthAccessToken(accessToken);
int page = 1;
while(true) {
    Query query = new Query("from:someUser");
    query.setSince("2012-01-01");
    query.setUntil("2012-07-05");
    query.setRpp(100);
    query.setPage(page++);
    QueryResult qr = twitter.search(query);
    List<twitter4j.Tweet> qrTweets = qr.getTweets();
    if(qr.getTweets().size() == 0) break;
    for(twitter4j.Tweet t : qrTweets) {
        System.out.println(t.getId() + " " + t.getText());
    }
} 
```

如果我使用`setSince()`and`setUntil()`方法，循环内的代码只会执行一次。但没有他们，`setPage()`似乎工作，我得到更多的推文结果。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:26:50.373

您的代码似乎对我有用。它只返回过去 9 天的推文，但根据您的评论，这是预期的（大约）。

您在问题中提到循环只运行一次`rpp=100`，并且您在评论中说用户的所有 80 条推文都在`rpp=40`. 我认为这表明代码按预期工作。如果用户只有 80 条推文，则循环应该只在 时运行一次`rpp=100`，并且它应该在 时执行两次并显示他们所有的推文`rpp=40`。尝试在进入 while 循环后立即显示页码，以便查看循环运行了多少次。

# sql-server-2008 - 地理编码的最佳实践？

> ID：11395510
> 
> 赞同：1
> 
> 时间：2012-07-09T12:57:55.380
> 
> 标签：sql-server-2008, google-maps-api-3, geocoding

任何人都可以权衡地理编码位置数据的最佳实践吗？

我们有数百个定期插入数据库的“位置”（并且还在增长）。

我们会偶尔使用 Javascript API 运行查询以在 Google 地图上显示这些信息。

您是否认为最好在将这些地址插入数据库时​​对其进行地理编码（即，添加 lng 和 lat 字段并填充和存储这些地址 - 地址不会被手动修改）或在我们生成我们的时调用地理编码服务地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:02:29.873

在使用它们时，存储 long/lat 值会快得多。只要您高兴，他们就不会在数据输入和地图绘制之间自行移动，然后就这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:01:31.203

我们调用地理编码 api 并在插入新记录或更新任何地址字段时存储纬度/经度。这不仅在将位置添加到地图时更快，而且还减少了对 API 的重复调用。鉴于您一天内可以拨打的电话数量是有限的（强制为每秒的电话），您不想再做任何事情了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T23:36:15.790

存储地理编码（但偶尔更新）是 Google 推荐的最佳做法。

# java - Java，假3D效果

> ID：11395519
> 
> 赞同：2
> 
> 时间：2012-07-09T12:58:36.187
> 
> 标签：java, bufferedimage, affinetransform

如何在下面的图片上使用`AffineTransform`或其他东西达到效果`AffineTransform`？或者我可以在 Java 中使用的任何其他效果/转换`BufferedImage`？

![在此处输入图像描述](../Images/05478b39b5a4a4eaebb9b104bdc851a2.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:03:50.407

你想要达到的效果叫做**Skewing**
看看**Skew**部分@http [://www.javaxt.com/javaxt-core/javaxt.io.Image/](http://www.javaxt.com/javaxt-core/javaxt.io.Image/)

首先下载javaxt api。该类`Image`有一个接受`BufferedImage`作为参数的公共构造函数，见下文

```
 javaxt.io.Image image = new javaxt.io.Image(java.awt.image.BufferedImage bufferedImage);
    int width = image.getWidth();
    int height = image.getHeight();
    image.setCorners(20, 70,              //UL
                     width-70, 0,         //UR
                     width+20, height-50, //LR
                     50, height);         //LL 
```

*setCorners 通过更新角坐标来倾斜图像。从左上角开始按顺时针顺序提供坐标。*

# glsl - 无法初始化着色器 VALIDATE_STATUS

> ID：11395520
> 
> 赞同：0
> 
> 时间：2012-07-09T12:58:36.660
> 
> 标签：glsl, webgl, three.js

是否可以以某种方式修改此片段着色器，使其不使用 oes_texture_float 扩展？因为我在应该运行 webgl 动画的机器上遇到错误。

我使用 three.js webglrenderer 和一个应用了 shadermaterial 的立方体设置了我的场景。在我的 macbook pro 上，一切正常，但在某些 Windows 机器上，我收到错误“不支持浮动纹理”（我搜索并发现这可能与 oes_texture_float 扩展有关）

所以我猜我需要改变我的片段着色器？还是我完全错过了重点？

```
<script type="x-shader/x-vertex" id="vertexshader">

    // switch on high precision floats
    #ifdef GL_ES
    precision highp float;
    #endif

    void main() {
        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
    }
</script>

<script type="x-shader/x-fragment" id="fragmentshader">

    #ifdef GL_ES
    precision mediump float;
    #endif

    #define PI 3.14159265

    uniform float time;
    uniform vec2 resolution;

    float f(float x) {
        return (sin(x * 1.50 * PI ) + 19.0);
    }

    float q(vec2 p) {
        float s = (f(p.x + 0.85)) / 2.0; 

        float c = smoothstep(0.9, 1.20, 1.0 - abs(p.y - s));  
        return c; 
    }

    vec3 aurora(vec2 p, float time) {
        vec3 c1 = q( vec2(p.x, p.y / 0.051) + vec2(time / 3.0, -0.3)) * vec3(2.90, 0.50, 0.10);     
        vec3 c2 = q( vec2(p.x, p.y / 0.051) + vec2(time, -0.2)) * vec3(1.3, .6, 0.3);   
        vec3 c3 = q( vec2(p.x, p.y / 0.051) + vec2(time / 5.0, -0.5)) * vec3(1.7, 0.4, 0.20); 

        return c1+c2+c3; 
    }

    void main( void ) {
        vec2 p = ( gl_FragCoord.xy / resolution.xy );       
        vec3 c = aurora(p, time); 
        gl_FragColor = vec4(1.0-c, c);  
    }

</script> 
```

编辑：这与浮点纹理无关，而是与我的片段着色器中的某些东西有关。Three.js 给我错误：“无法初始化着色器，VALIDATE_STATUS”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:12:26.013

*“还是我完全没有抓住重点？”* - 你确实是。着色器不关心底层纹理格式（您甚至不使用您发布的那些着色器中的任何纹理！），因此它们与您的问题没有任何关系。

它是在某处使用浮动纹理的应用程序代码，需要相应地进行更改。**但是从你的着色器根本不使用任何纹理**的事实来看（我猜你没有在其他地方明确创建浮动纹理），可能是三个.js 的内部需要在某个地方使用浮动纹理，也许作为渲染目标。因此，如果可能，您需要寻找禁用此要求的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:15:46.560

除非它是您尚未在顶点着色器中定义`projectionMatrix`,`modelViewMatrix`和的 three.js 主义。`position`

尝试添加

```
uniform mat4 projectionMatrix;
uniform mat4 modelViewMatrix;
attribute vec4 position; 
```

到第一个着色器的顶部？

# c++ - 如果不存在，为什么getline会返回空行

> ID：11395521
> 
> 赞同：0
> 
> 时间：2012-07-09T12:58:37.813
> 
> 标签：c++, string, io

我有一个包含以下行的文件：

```
5556
0   bla.dxf
1   blub.dxf
2   buzz.dxf 
```

数字和文本分别由一个单数制表符分隔，5556 之后没有空格字符。以下代码用于解析。

```
int main(int, char**){
  std::ifstream file("test.bld");
  std::string buildingName;
  file >> buildingName;
  std::cout << buildingName << std::endl;
  std::string buf;
  while(getline(file, buf)) {
    if(buf.empty()){std::cout << "String was empty"<<std::endl;}
    else std::cout << buf << std::endl;
  }
  return 0;
} 
```

当我解析文件时，我得到一个空行，尽管显然没有。输出内容如下：

```
5556
String was empty
0   bla.dxf
1   blub.dxf
2   buzz.dxf 
```

这只是一个最小的例子。整个文件和解析器更复杂，我非常想对第一个元素使用直接解析，其余部分使用 getline。我对行解析有什么误解`getline`，如何避免出现空行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:05:00.587

`operator>>(istream, string)`最多读取[但不包括](http://en.cppreference.com/w/cpp/string/basic_string/operator_ltltgtgt)提取的标记后的第一个空白字符。

要在提取令牌后跳过该行的其余部分，您可以使用

```
std::cin >> std::ws; 
```

（如果您知道只剩下一个换行符），或者

```
std::cin.ignore(std::numeric_limits<std::streamsize>::max(), '\n'); 
```

无论如何都要跳到行尾。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T13:01:19.310

我假设因为

```
file >> buildingName; 
```

不会将光标移动到下一行，而是将其留在当前行的末尾。因此，当您调用 时`getline`，您将读取一个空字符串，然后转到下一个。

# java - Groovy 泛型失败

> ID：11395527
> 
> 赞同：15
> 
> 时间：2012-07-09T12:58:55.750
> 
> 标签：java, generics, groovy

除了 groovy 比 java 更具动态性...

为什么这是 groovy 中的编译时错误（意外令牌`<`）：

```
interface A {
     <T> T getByClass(Class<T> clazz)
} 
```

我如何以时髦的方式写这个？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-09T13:03:09.937

Groovy 解析器不处理[以通用信息开头的方法签名](http://groovy.329449.n5.nabble.com/Generic-Interface-Declaration-Incompatibility-td5127005.html#a5127173)...

如果您添加 public 修饰符，它会解析：

```
interface A {
  public <T> T getByClass( Class<T> clazz )
} 
```

虽然我不相信你会在编译时获得任何类型检查来添加这个注释

# hbase - HBase Shell 挂起/冻结

> ID：11395530
> 
> 赞同：3
> 
> 时间：2012-07-09T12:59:07.103
> 
> 标签：hbase, ubuntu-12.04, cloudera, freeze, hbase-shell

我在 Ubuntu 12.04 上以[Pseudo-Distributed 模式](https://ccp.cloudera.com/display/CDH4DOC/HBase+Installation#HBaseInstallation-ConfiguringHBaseinPseudodistributedMode)安装了 HBase 0.92.1-cdh4.0.1 。
*hbase-master*、*hbase-regionserver*和*zookeeper-server*正在这台机器上运行；HDFS 在另一台机器上运行（属性*hbase.rootdir 相应*设置）。

现在我对“hbase shell”有一个问题：每当我提交一个创建表语句时

```
 create 'tbl1', {NAME => 'd', COMPRESSION => 'GZ'} 
```

外壳挂起（它不返回任何东西；永远等待），我必须用 ctrl+c 杀死它。但是该命令总是被执行，当我在“hbase shell”中提交“list”命令时，该表被列出。也可以通过默认端口 60010 访问 web-ui，并且创建的表列在用户表下。我已经清理了 HDFS 上的 hbase 目录，清理了 zookeeper 日志，更正了 hosts 文件（将 127.0.1.1 更改为 127.0.0.1）。这个问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:33:21.323

签入您的 HBASE Web UI。该特定表的“过渡中的区域”是否处于活动状态。如果是这样，那么问题可能仍然存在。等待转换完成 else 重启 Hbase Master。如果出现此问题，请在此处粘贴您的 hbase 日志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T16:06:29.460

重启服务器后问题消失！也许它与**闰秒错误**（2012 年 6 月 30 日 / 7 月 1 日）有关。一些 Java 进程在没有任何明显原因的情况下具有非常高的 CPU 负载。

# clearcase - 基线创建中断

> ID：11395543
> 
> 赞同：2
> 
> 时间：2012-07-09T13:00:10.003
> 
> 标签：clearcase, clearcase-ucm

我今天尝试创建基线，ClearCase Explorer 崩溃了（似乎是在它完成之后，但显然不是。）

我试图重新创建基线，它给了我一个错误，说有些是“in_progress”，所以它不能继续。

我删除了基线，并试图删除“in_progress”标签类型。当我删除 lbtype 时，它​​表示目录已锁定。

我执行了 lslock -all 并删除了项目和基线上的锁，现在当我执行 lslock -all 时没有列出任何内容。

我试图删除“in_progress”lbtype，它仍然说有些东西被锁定了。还有其他方法可以找出阻止它工作的原因吗？

我知道这可能会令人困惑，所以如果需要任何澄清，我愿意更新我的问题。

> “ct lslock -all”
> 
> --09-09T09:47 用户锁定项目“XXXXXXX”（锁定）
> “锁定所有用户。项目锁定以供将来更改发布。”
> 
> --09-20T09:56 用户锁定基线“XXXXXXXXX”（锁定）
> “锁定所有用户。”

（移除锁）

“ct lslock -all”什么也不显示

> “rmtype -rmall lbtype:BASELINE_in_progress@\VOB
> 
> 有 1228 个类型为“BASELINE_in_progress”的标签。
> 
> 删除标签？[否] 是
> 
> cleartool：错误：目录元素上的锁定（过时）阻止操作“删除标签”。
> 
> cleartool：错误：无法删除标签类型“BASELINE_in_progress”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:09:10.280

实际的错误信息是

```
possible stranded temporary lbtype name found: "`abaselinexxx.yyyy_in_progress`". 
```

这个想法是：

*   删除 UCM 组件所涉及的 vob(s) 中的所有 _inprogress 类型

```
$ ct rmtype -rmall lbtype:abaselinexxx.yyyy_in_progress@\\avob
有 1690 个“abaselinexxx.yyyy_in_progress”类型的标签。
删除标签？[否] 是

```

*   将基线提升为完全标记的基线：

```
ct chbl -full -nc 基线：abaselinexxx.yyyy@\apvob

```

可能阻止这些操作完成的锁是：

*   在 lbtype 上
*   在vob上（即vob本身可以被锁定）
*   在 pvob 上（可以锁定 pvob 或其管理员 pvob 之一）

* * *

几句话，来自评论：

*   `cleartool lslock -all`不会显示*过时*的文件（“过时”是一种锁定形式）：`cleartool lslock -all -obsolete`will.

*   要解锁一组锁定的文件，您可以在`for`和`cleartool find -exec`命令之间进行选择。

> ### 视窗

```
for /f "delims==" %x in ('cleartool lslock -all -obsolete -fmt "%Xn\n"') do cleartool unlock "%x" 
```

### Unix，在视图上下文中...

```
cleartool lslock -all -obsolete -fmt "%Xn\n" | xargs -i{}
cleartool unlock %x 
```

请注意， a`cleartool find`将解锁特定路径下的*所有内容。*
如果您知道该路径（以及所有 - 或最重要的 - 它的内容）被锁定，那么它可以工作：

```
ct find /path/to/a/locked/directory -exec '/usr/atria/bin/cleartool unlock  "$CLEARCASE_PN"' 
```

# ios - 未找到有效的配置文件但有匹配项

> ID：11395544
> 
> 赞同：0
> 
> 时间：2012-07-09T13:00:15.067
> 
> 标签：ios, xcode, code-signing, ios-provisioning

我刚刚向配置门户添加了一个新设备，生成了证书，mobileprovision 等。我的钥匙串中有证书，我的设备上有应用程序的配置文件，并且状态下方有一个绿色复选标记。在代码签名身份下方项目的构建状态选项卡中，调试和发布都说“当前匹配 [我的信息]”。但是，当我尝试在手机上运行该应用程序时，我得到“找不到此可执行文件的有效配置文件”。

可能相关或不相关的额外信息：该应用程序在模拟器中运行，但是当我尝试为 iPhone 构建它时，我遇到了 armv7 架构的 Mach-O 链接器问题，因为我没有链接必要的框架。所以我创建了一个新目标并添加了适当的文件。这个目标确实说我的代码签名身份匹配，并且它是我获得捆绑标识符以生成配置的地方。

我已尝试再次清洁和建造。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:22:45.930

可能的解决方案：

1.  有时，在 Xcode 中可能有两个不同的配置文件具有相同的名称，用于不同的 AppID。Windows/管理器（Shift+Cmd+2）/库/配置文件/。检查您是否使用了正确的。

2.  在 Apple Developer Portal 和 Organizer 中检查您的配置文件是否未过期。

3.  检查配置文件是否具有正确的 AppID 或通配符 AppID。检查它是否与项目的 Info-Plist 中的 Bundle ID 匹配。还要检查设备 ID。

4.  你以前用过同一台Mac吗？用于创建配置文件的证书绑定到 Mac。尝试在您的 Mac 上完全重新创建它，或从其他 Mac 获取该证书的密钥文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T00:39:57.620

我最终删除了我计算机上的所有配置文件和证书，使我在苹果上的证书无效，然后请求并创建一个新的。现在一切正常。

# web-services - Web 服务器无法连接到联合服务器

> ID：11395550
> 
> 赞同：-1
> 
> 时间：2012-07-09T13:00:35.223
> 
> 标签：web-services, webserver, msdn, adfs2.0, federated-identity

我正在尝试在 MSDN 中实现联合服务器示例。我所做的唯一更改是更改了服务器的名称，并将一台机器用作 Web 和联合服务器。

我从 MSDN 下载的声明感知应用程序有以下错误：

![在此处输入图像描述](../Images/4c414d6c7e576fe332acc52637d5e5fa.png)

# android - layout.xml 的目的是什么？

> ID：11395551
> 
> 赞同：6
> 
> 时间：2012-07-09T13:00:36.080
> 
> 标签：android, android-layout

为什么人们喜欢使用`layout.xml`s `resources`：

```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources> 
```

虽然有用于替代资源的文件夹以将特定 XML 用于特定配置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:37:45.203

这在这里称为`Layout Aliases` [链接：](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)

为避免平板电脑和电视出现相同文件的重复（以及由此导致的维护难题），您可以使用别名文件。例如，您可以定义以下布局：

并添加这两个文件：

**res/values-large/layout.xml：**

```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources> 
```

**res/values-sw600dp/layout.xml：**

```
<resources>
    <item name="main" type="layout">@layout/main_twopanes</item>
</resources> 
```

后两个文件具有相同的内容，但它们实际上并没有定义布局。他们只是将 main 设置为 main_twopanes 的别名。由于这些文件具有 large 和 sw600dp 选择器，因此无论 Android 版本如何，它们都适用于平板电脑和电视（3.2 之前的平板电脑和电视匹配 large，而 3.2 之后的将匹配 sw600dp）。

# android - 在 Android 中应用 Cartoonizer 效果

> ID：11395553
> 
> 赞同：0
> 
> 时间：2012-07-09T13:00:59.660
> 
> 标签：android, image, effect

我正在尝试使用 Android 在照片上实现卡通风格的效果，但我真的不知道从哪里开始。我应该考虑使用哪种算法来达到预期的效果。

我已经包含了一个之前和之后的镜头，向您展示我在寻找什么。

**之前** ![在此处输入图像描述](../Images/5525531b7c696f21b9723e2d7cb4d55c.png) **之后** ![在此处输入图像描述](../Images/2b4bfbb5b8e89856df465b2a7629d84b.png)

有什么想法可以实现这一目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:05:28.033

您可以通过将每个纹素近似为某种数组中最接近的颜色来实现这样的效果。这只是一个非常基本的方法，但它是一个很好的起点。

# c++ - C++，对指向的地图容器使用迭代器时出错。映射/设置迭代器不可递增

> ID：11395555
> 
> 赞同：0
> 
> 时间：2012-07-09T13:01:07.393
> 
> 标签：c++, pointers, map, iterator

尝试迭代另一个对象指向的地图时出现此错误。当我不使用指针时它可以工作。（迭代成员地图“碎片”）因此我想知道该怎么做，或者是否不可能像这样迭代地图？：

```
Board * Board::ccBoard(){

Board * newBoard = new Board();
map<Vec2, Piece>::iterator it;
for (it = newBoard->pieces.begin(); it != newBoard->pieces.end(); ++it)
    newBoard->removePiece(it->first);
return newBoard;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:14:41.610

The `removePiece()` function removes the element that `it` is referring to, invalidating `it`. An attempt is then made to increment `it` resulting in the assertion failure. From [`map::erase()`](http://en.cppreference.com/w/cpp/container/map/erase):

> References and iterators to the erased elements are invalidated.

I am unsure what the intention of the `for` loop is, it appears that it would effectively empty the `map` in which case just use [`map::clear()`](http://en.cppreference.com/w/cpp/container/map/clear):

```
newBoard->pieces.clear(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:19:49.650

要解决此问题，请去掉`++it`for 循环中的 并替换`it->first`为`it++->first`.

（这将增加迭代器并使用副本调用 erase()。）

# c++ - TypeId 未按预期打印信息

> ID：11395559
> 
> 赞同：0
> 
> 时间：2012-07-09T13:01:21.150
> 
> 标签：c++, typeid

> **可能重复：**
> [在基类中打印派生类名称](https://stackoverflow.com/questions/10894683/printing-derived-class-name-in-base-class)

我正在使用 GCC，下面的代码输出了一些意想不到的东西

```
#include <iostream>
#include <typeinfo>
using namespace std;

class B {
  public:
  B ( B * ptr) { cout<< typeid(*ptr).name()<<endl;}
};

class  D : public B {
  public:
  D() : B(this) { cout<<typeid(this).name()<<endl;}
};

int main()
{
    D d;
    return 0;
} 
```

输出：

```
1B
P1D 
```

谁能给我解释一下为什么基类不能正确地告诉派生类的类型？非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:04:20.243

两个原因：

1.  对象 ( `*ptr`) 尚未完全构造。
2.  您的类不是多态的（没有虚拟成员函数），因此不存在动态类型信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:03:19.857

那件事真的取决于编译器。msvc 为此提供了不同的 typeid 字符串。

# c++ - “QApplication app(argc, argv)”想做什么？

> ID：11395562
> 
> 赞同：9
> 
> 时间：2012-07-09T13:01:26.347
> 
> 标签：c++, qt, qml

```
#include <QtGui/QApplication>
#include <QtDeclarative>
#include "qmlapplicationviewer.h"

int main(int argc, char **argv) {
    QApplication app(argc, argv);
    QmlApplicationViewer viewer;

    viewer.setMainQmlFile("app/native/assets/main.qml");
    viewer.showFullScreen();

    return app.exec();
} 
```

我的 C++ 有点生疏了。有人可以向我解释一下“QApplication app(argc, argv)”在做什么吗？

它是否试图声明一个接受 2 个参数（argc 和 argv）并返回 QApplication 类型的变量的函数？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-09T13:03:42.997

线

```
QApplication app(argc, argv); 
```

创建一个新的类型实例`QApplication`并调用该类的构造函数。在您的示例中，变量`app`现在存储此实例。它在*某种程度上*（语义上）是这个的简写：

```
QApplication app = QApplication(argc, argv); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T13:03:19.823

这是来自 Qt Docs 的引用：

> QApplication 类管理 GUI 应用程序的控制流和主要设置。
> 
> QApplication 包含主事件循环，来自窗口系统和其他源的所有事件都在其中处理和调度。它还处理应用程序的初始化、终结，并提供会话管理。此外，QApplication 处理大部分系统范围和应用程序范围的设置。
> 
> 对于任何使用 Qt 的 GUI 应用程序，只有一个 QApplication 对象，无论应用程序在任何给定时间是否有 0、1、2 或更多窗口。对于非 GUI Qt 应用程序，请改用 QCoreApplication，因为它不依赖于 QtGui 库。
> 
> 可以通过 instance() 函数访问 QApplication 对象，该函数返回与全局 qApp 指针等效的指针。

所以，线

`QApplication app(argc, argv);`

创建 QApplication 类的实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-09T15:32:45.237

QApplication 是一个包含主事件循环的 Qt 类。

当您编写时，`QApplication app(argc, argv);` 您正在创建`app`此类的一个对象，方法是使用`argc`and调用其构造函数`argv`

当`int main(int argc, char **argv)`在运行程序时被调用，`int argc`被初始化为包含运行程序时传递的参数的数量。`char **argv`包含在执行程序时传递给程序的参数数组。

char* argv[0] 将包含（指向）程序的名称，而后续元素将指向传递的其他参数。

argc 和 argv 依次传递给 QApplication 的构造函数，以便在运行程序时可以传递 Qt 特定的参数。

有关此类参数的示例，请尝试`./yourProgramName --help`在终端窗口中运行

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T13:05:50.763

app() 不是一个函数，它是一个构造函数调用。

如果您来自 C# 或 Java 之类的，请将其想象为

```
QApplication app = new QApplication( argc, argv ); 
```

只是该应用程序将以这种方式成为指针，而如果像您的示例中那样创建它，它实际上就是对象本身。

简而言之，Qt 需要一个`QApplication`实例来运行，以便处理信号和插槽（如果您正在使用它们）并处理诸如绘画等事件

# android - android根据微调项选择更改视图

> ID：11395563
> 
> 赞同：0
> 
> 时间：2012-07-09T13:01:28.593
> 
> 标签：android, spinner

你好，我是安卓新手。是否可以根据微调器项目选择更改视图？意味着如果我从微调器中选择第一项，则显示 first.xml。如果我从微调器中选择第二个项目，则显示 second.xml。请问有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:08:40.950

这是一个很好的指南： http: [//www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/](http://www.coderzheaven.com/2011/07/18/customizing-a-spinner-in-android/)

# linux - Linux命令重启应用程序

> ID：11395565
> 
> 赞同：2
> 
> 时间：2012-07-09T13:01:39.250
> 
> 标签：linux, restart

例如 - 我有我想重新启动的进程 ID。我应该使用什么命令来重新启动此流程应用程序？我没有找到关于它的东西（

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:11:35.987

[您可以在Restart process script linux](https://stackoverflow.com/questions/4749201/restart-process-script-linux)找到非常相似的问题。

Linux没有通用的重启命令，通常你应该杀死你的进程并重新启动它。但是，如果您的进程已作为服务启动，即它包含在 /etc/init.d/ 目录中，那么您可以执行以下操作：

```
/etc/init.d/SERVICE_NAME restart 
```

或者

```
service SERVICE_NAME restart 
```

# android - 如何使用 ViewPager 延迟动态视图更改？

> ID：11395579
> 
> 赞同：1
> 
> 时间：2012-07-09T13:02:28.787
> 
> 标签：android, android-fragments, android-viewpager, handlers

这是我在这里的第一篇文章，也是我第一次尝试用英语解释一个编码问题。所以请在阅读本文时保持温和:)。

我有两个关于 ViewPager 的问题。

第一的：

如果我将片段列表传递给 PagerAdapter，它将显示列表中的第一个片段。是否可以修改它以便能够首先显示列表中的第二个、第三个...片段？因为方法 setCurrentItem(page) 将在 PagerAdapter 显示第一个片段之后显示页面。

第二：

我试图在动态 ViewChange 之间实现暂停，如下所示：

```
// pass the Fragments to pagerAdapter here which will show the first fragment

// loop for the other Fragments
handler.postDelayed(new Runnable(){
    public void run(){
       for(int i = 0; i < list.size(); i++){
            ViewPager.setCurrentItem(list.indexOf(i), true);
            // Set Pause here
       }
    }
}, 500); 
```

注释“在此处设置暂停”标记了我仍在尝试在分页之间暂停的位置。但我不知道如何解决这个问题。因为 Thread.sleep 在这里不是真正的交易。

这个想法是用 PageAdapter 显示第一个 Fragment。然后我使用 handler.postDelayed 来延迟第二个页面滑动。在此，我以恒定的延迟循环浏览所有页面。

如果有人可以帮助我找到解决方案，我会非常高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T15:43:26.590

对于您的第一个问题，您在打电话`setCurrentItem(int, false)`吗？如果您只调用 setCurrentItem(int)，如果 ViewPager 已经通过其当前适配器的第一个布局，它将为过渡设置动画。如果这不是一个解决方案，可以考虑在你的布局文件中初始化`ViewPager`with `visibility = "invisible"`（或者`setVisibility(View.INVISIBLE)`在将片段列表传递给之前调用`PagerAdapter`。）然后，在你调用之后`setCurrentItem`，你可以使用`setVisibility(View.VISIBLE)`. 我认为在 onCreate 和调用中设置 ViewPager`setCurrentItem(int, false)`应该可以防止出现任何动画，但我现在没有时间进行测试。

对于第二个问题，我认为让您感到困惑的部分是该`run`方法将在运行时阻塞整个 UI 线程，这意味着当您循环遍历项目时 UI 将无法自行更新在`ViewPager`.

本质上，您正在调用`Thread.sleep()`UI 线程。这可能并不完全清楚，因为它在 Runnable 的 run 方法中，除非您意识到您已经发布了一条消息以在 Handler 的线程上运行，如果您使用默认 Handler 在 Activity 生命周期方法中创建它，它将是 UI 线程（ ) 构造函数。相反，您希望您发布的 Runnable 在下次您想要更改 ViewPager 中的当前项目时延迟发布一条新消息。

我会做的是类似以下的事情（警告 - 我没有测试过这个）：

添加方法以连续循环的子类`Handler`（我假设您将其作为包含 ViewPager 的 Activity 上的内部类来执行此操作，因此您可以访问包含 ViewPager 的成员变量。我在代码中调用该成员变量 mPager以下）：

```
private Runnable mLoopingRunnable = new Runnable(){
    public void run() {
        int currentItem = mPager.getCurrentItem();
        int totalItems = mPager.getAdapter().getCount();
        int nextItem = (currentItem + 1) % totalItems;
        mPager.setCurrentItem(nextItem, true);
                handler.postDelayed(self, 500);
            }
        };

handler.postDelayed(mLoopingRunnable, 500); 
```

如果/当您想停止循环时（请注意，如果您想在某个时候取消它，您需要保留 Runnable 的句柄）：

```
handler.removeCallbacks(mLoopingRunnable); 
```

请注意，`setCurrentItem`如上所述更改调用的一个优点是它不会干扰用户滑动 ViewPager 以从一个视图移动到下一个视图。如果您只是像在循环中那样将 currentItem 设置为某个整数，那么当用户与寻呼机交互时，该行为会显得有些奇怪。

我猜想有一些东西可以自动处理类似于 ViewFlipper 的循环，但粗略地看一下 ViewPager API 并不太明显。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:47:59.417

您不应该通过睡眠来停止[UI 线程](http://developer.android.com/guide/components/processes-and-threads.html)，因为在此期间您希望能够与应用程序中的任何内容进行交互，如果您愿意，您可以发布另一个延迟，如第一个延迟......或链式异步任务......

我建议您使用[ViewFlipper](http://developer.android.com/reference/android/widget/ViewFlipper.html)，它可以保存片段或视图并在它们之间进行迭代，还可以使用 xml 添加一些转换，非常简单并且效果很好。

```
viewFlipper.setAnimation(AnimationUtils.loadAnimation(this,
            R.anim.push_from_right_in));
// this animations are XML in res-> anim folder
viewFlipper.showPrevious(); // go to the next fragment in order 
```

您可以在每个新动画之间设置延迟......

```
viewFlipper.startFlipping(); 
```

你也可以从 xml 中设置很多东西，比如动画之间的时间。

```
<ViewFlipper
    android:id="@+id/signup_layout_viewFlipper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/headerFragment"
    android:flipInterval="1111" > 
```

推送视图的动画：

```
<translate xmlns:android="http://schemas.android.com/apk/res/android"
android:interpolator="@android:anim/linear_interpolator"
android:duration="300"
android:fromXDelta="100%"
android:fromYDelta="0%"
android:toXDelta="0%"
android:toYDelta="0%" /> 
```

希望有帮助:)

问候

# sql - SQL，如何使用动态条件逻辑？

> ID：11395580
> 
> 赞同：2
> 
> 时间：2012-07-09T13:02:29.037
> 
> 标签：sql, sql-server, dynamic, conditional-statements

当您需要我可以使用的动态 WHERE 子句时；

```
CREATE PROCEDURE [dbo].[sp_sel_Articles]
      @articleId            INT              = NULL
    , @title            NVARCHAR(250)    = NULL
    , @accessLevelId    INT              = NULL
AS
BEGIN
     SELECT *
     FROM table_Articles Art
     WHERE
          (Art.ArticleId = @articleId OR @articleId IS NULL)
          AND (Art.Title LIKE '%' + @title + '%' OR @title IS NULL)
          AND (Art.AccessLevelId = @accessLevelId OR @accessLevelId IS NULL)
END 
```

因此，我只能通过 ArticleId 调用此过程 -**例如**-

```
EXEC [sp_sel_Articles] @articleId = 3 
```

但是，有时我需要通过 AccessLevelId 调用，有时不需要**通过 EXACT VALUE**调用。例如，我需要 MORE THAN 给定的 accesslevelId 或 LESS THAN。

当前程序**只能**通过使用处理**EXACT**值

 **```
Art.AccessLevelId = @accessLevelId 
```

也可以将**CONDITION**类型以及值提供给程序吗？在这个例子中可能看起来很奇怪，但请耐心等待：

```
CREATE PROCEDURE [dbo].[sp_sel_Articles]
          @articleId            INT              = NULL
        , @title            NVARCHAR(250)    = NULL
        , @accessLevelId    INT              = NULL
        , **@accessLevelIdCondition**
    AS
    BEGIN
         SELECT *
         FROM table_Articles Art
         WHERE
              (Art.ArticleId = @articleId OR @articleId IS NULL)
              AND (Art.Title LIKE '%' + @title + '%' OR @title IS NULL)
              AND (Art.AccessLevelId **@accessLevelIdCondition** @accessLevelId OR @accessLevelId IS NULL)
    END 
```

也许可以使用一个函数，我不知道。因为，至少有 20 个过程需要这种灵活性，所以我需要一个更好、更全局的解决方案，而不是在每个过程中都写 IF ELSE 条件。

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:12:53.953

您可能需要使用动态 SQL 来传递运算符。或者你可以传入两个值，例如

```
@MinAccessLevelID INT,
@MaxAccessLevelID INT

...
WHERE (
   (@MinAccessLevelID IS NULL AND @MaxAccessLevelID IS NULL)
   OR 
   (AccessLevelID >= @MinAccessLevelID AND AccessLevelID <= @MaxAccessLevelID)
) 
```

当您想要精确（例如只有 3）时，只需将 3 传递给两个值。当你想要任何高于 3 的值时，将 20000000000 传递给 @Max 参数，或者如果你想要低于 3 的所有值，则传递 0。

但是您会发现，随着这些排列变得更加复杂，您最好只使用动态 SQL（并且使用`optimize for ad hoc workloads`set，这对于计划缓存重用和阻止参数嗅探也会更好）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:15:14.750

申请前阅读此 www.sommarskog.se/dynamic_sql.html

```
 CREATE PROCEDURE [dbo].[sp_sel_Articles] 
              @articleId            INT              = NULL 
            , @title            NVARCHAR(250)    = NULL 
            , @accessLevelId    INT              = NULL 
            , @accessLevelIdCondition varchar(100)
        AS 
        BEGIN 
                DECLARE @SQL varchar(8000)
    SET @SQL='
         SELECT * 
         FROM table_Articles Art 
         WHERE 
              (Art.ArticleId = '+cast(@articleId as varchar(100))+' OR '+cast(@articleId as varchar(100))+'IS NULL) 
              AND (Art.Title LIKE ''%'' + @title + ''%'' OR @title IS NULL) 
              AND (Art.AccessLevelId '+@accessLevelIdCondition+ cast(@accessLevelId as varchar(100))+' OR '+cast(@accessLevelId as varchar(100))+' IS NULL) '
    EXEC(@sql)
        END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:13:50.590

您始终可以通过创建查询字符串来进行动态查询

```
execute ('select count(*) from table' ) 
```

因此，通过在存储过程中输入的参数，您还可以形成一个可以执行的查询字符串。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T13:16:26.510

您可以使用 case 语句 - 如果格式不正确，它可能看起来有点滑稽，但您可以尝试以下操作：

```
SELECT Columns FROM SomeTable
WHERE 1 = CASE
              WHEN @SomeOption = '<>' AND SomeValue >= @SomeMinParam AND SomeValue <= SomeMaxParam THEN 1
              WHEN @SomeOption '=' AND SomeValue = @SomeMinParam THEN 1
              ELSE 0
          END 
```

（尽管正如 Aaron 指出的那样 - 您传入的 <> 并没有真正反映语句中的比较运算符 - 将其更改为有意义的东西:)）

在你的情况下：

```
CREATE PROCEDURE [dbo].[sp_sel_Articles]
    @articleId            INT              = NULL,
    @title            NVARCHAR(250)    = NULL,
    @MinaccessLevelId    INT              = NULL,
    @MaxaccessLevelId     INT          = NULL,
    @accessType       varchar(5)       = '<>'
AS
BEGIN
 SELECT *
 FROM table_Articles Art
 WHERE
      (Art.ArticleId = @articleId OR @articleId IS NULL)
      AND (Art.Title LIKE '%' + @title + '%' OR @title IS NULL)
      AND 1 = CASE 
                  WHEN @accessType = '<>' AND (Art.AccessLevelId = @MinaccessLevelId OR @accessLevelId IS NULL) THEN 1
                  WHEN @accessType = '=' AND (Art.AccessLevelId >= @MinaccessLevelId OR Art.AccessLevelId <= @MaxaccessLevelId) THEN 1
                  ELSE 0
              END
END 
```

也许使用一点 @CompareAccessLevelToMin 而不是 varchar() 作为 @accessType 参数。尽管如此，仍然无法告诉您将其设置为“假”是什么意思。**

# css - 特殊字符的后备字体

> ID：11395584
> 
> 赞同：18
> 
> 时间：2012-07-09T13:02:35.010
> 
> 标签：css, fonts, font-face

我想知道在使用@font-face 时是否有可能进行后备设置，以便如果我页面上的文本包含字体中未包含的字符（例如日文字符），则仅显示这些字符基本字体和其他所有字符都保留为自定义字体？

我想象有时可能会在一个段落中混合使用两种字体。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T13:08:41.883

您所描述的是浏览器的默认行为 - 它应该自然地回退到缺少字符的基本字体。

但是，有时自定义字体使用空白字符，在这种情况下，您可以尝试使用`unicode-range`

例如：

```
@font-face {
    font-family: BBCBengali;
    src: url(fonts/BBCBengali.ttf) format("opentype");
    unicode-range: U+00-FF;
} 
```

摘自这篇有趣的文章：[Creating Custom Font Stacks with Unicode-Range](http://24ways.org/2011/creating-custom-font-stacks-with-unicode-range/)

不幸的是，存在浏览器支持问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T13:12:29.600

如果指定的字体不包含字符，CSS 会默认回退到系统字体。您还可以指定回退到哪种字体。

衬线字体示例：

```
body {
    font-family: "MyNiceFontWithoutJapanesChars", "common serif font", serif;
} 
```

只要后备字体具有您的默认字体遗漏的那些字符，您就应该没问题。

# google-app-engine - webapp2 中的 blobstore_handlers

> ID：11395586
> 
> 赞同：2
> 
> 时间：2012-07-09T13:02:37.287
> 
> 标签：google-app-engine, blobstore, webapp2

我尝试使用 webapp2 和 blobstore api 制作应用程序。我发现[webapp*不是 webapp2*](https://developers.google.com/appengine/docs/python/blobstore/overview)的 blobstore 教程。我有一个导入错误：

```
File "/home/i159/workspace/WEBOS-INT-TEST/web.py", line 4, in <module>
    from webapp2 import blobstore_handlers
ImportError: cannot import name blobstore_handlers 
```

带代码：

```
import webapp2                        

from webapp2 import blobstore_handlers 
```

我可以在哪里使用 webapp2 获取 blobstore_handlers 和其他 blobstore api？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:24:58.910

webapp2 没有任何 blobstore 处理程序。那些仍然需要从“旧”webapp 包中导入。

# java - 我想知道这个 /api/2.0.alpha1/issue/{issueKey} 在 JIRA 中调用了哪个方法

> ID：11395587
> 
> 赞同：0
> 
> 时间：2012-07-09T13:02:43.833
> 
> 标签：java, jira, jira-plugin

> 请让我知道 /api/2.0.alpha1/issue/{issueKey} 在 JIRA 参考中调用了哪种方法：http: [//docs.atlassian.com/jira/REST/4.4.3/#id2413591](http://docs.atlassian.com/jira/REST/4.4.3/#id2413591)
> 
> 我需要这个来查看这些方法是如何实现的，以及它如何以 JSON 格式检索所有问题？我想一次解决 JIRA 中的所有问题。有没有一种方法可以在不知道问题 id 的情况下为特定过滤器（请求集 ID）获取 JIRA 中的所有问题。

我的需要是我希望它们采用 JSON 格式，因此我正在尝试这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T06:18:22.307

对于 jira 开发（或任何其他 atlassian 产品），我建议您下载[atlassian-plugin-sdk](https://developer.atlassian.com/display/DOCS/Introduction+to+the+Atlassian+Plugin+SDK)。只需在某处解压缩 sdk 并运行以下命令：

```
./atlas-run-standalone --product jira --version 5.0.7 
```

使用当前 5.0.7 版本运行 jira 实例。这将调用一些 maven 魔法，您的服务器应该很快就会运行；) 要使用*4.4.3*版本，只需更改版本字符串。

启动 jira 服务器后，打开[浏览器](http://yourhost.lan:2990/jira)。默认用户名和密码是*admin*。

打开管理面板 -> [REST API 浏览器](http://yourhost.lan:2990/jira/plugins/servlet/restbrowser)。在那里你可以选择所有可用的 REST 接口，我想你需要*Alassian JIRA - Plugins - REST Plugin [http://yourhost.lan:2990/jira/rest/api/2](http://yourhost.lan:2990/jira/rest/api/2)*。（如果您使用 jira 版本 >= 5.0）

我建议你阅读[REST API 教程](https://developer.atlassian.com/display/JIRADEV/JIRA+REST+API+Tutorials)，因为测试[curl](http://curl.haxx.se/)非常方便。

要解决所有问题，只需执行以下操作：

```
curl -D- -u admin:admin -X GET -H "Content-Type: application/json" http://localhost:2990/jira/rest/api/2/search 
```

*hth*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T05:16:35.237

> 有没有一种方法可以在不知道问题 ID 的情况下获取 JIRA 中特定过滤器（请求集 ID）的所有问题

是的。您可以使用 JQL 搜索来执行此操作

```
/api/2.0.alpha1/search?jql&startAt&maxResults 
```

# ajax - Ajax 选项卡控件的 TabContainer_ActiveTabChanged 事件在每次回发时触发

> ID：11395589
> 
> 赞同：2
> 
> 时间：2012-07-09T13:02:44.630
> 
> 标签：ajax, postback, ajaxcontroltoolkit, tabcontrol

我正在使用 Ajax 选项卡控件，它在每个选项卡中都包含网格。网格有下拉列表和按钮，我想在 gridview Row 的按钮单击时触发 gridview 的 RowCommand 事件。但问题是，每当我单击按钮时，Tabcontainet_ActiveTabChanged 事件就会被触发，并且网格视图会在触发 RowCommand 事件之前再次绑定。

我不明白为什么这个事件会自动触发，即使我不是故意触发它。在这种情况下如何触发 RowCommand 事件？我尝试了更新面板和没有更新面板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T15:41:40.053

这很奇怪，但如果活动选项卡发生更改或实际 ActiveTabIndex 属性值等于 0，TabContainer 会在每次回发时触发 ActiveTabChanged 事件。我无法找出这种行为的任何原因，因此请自行承担风险使用下面的解决方案。实际上有两种解决方案：第一种是下载 AjaxControlToolkit 源，更改 TabContainer 控件的 LoadPostData 方法并使用自定义 dll：

实际方法：

```
protected override bool LoadPostData(string postDataKey, NameValueCollection postCollection)
{
    int tabIndex = ActiveTabIndex;
    bool result = base.LoadPostData(postDataKey, postCollection);
    if (ActiveTabIndex == 0 || tabIndex != ActiveTabIndex)
    {
        return true;
    }
    return result;
} 
```

只需`ActiveTabIndex == 0`从上面的代码中删除条件。

或者您可以创建自己的从 TabContainer 继承的类，覆盖该方法并使用此类而不是默认类：

```
namespace AjaxControlToolkit
{
    /// <summary>
    /// Summary description for MyTabContainer
    /// </summary>
    public class MyTabContainer : TabContainer
    {
        protected override bool LoadPostData(string postDataKey, System.Collections.Specialized.NameValueCollection postCollection)
        {
            int tabIndex = ActiveTabIndex;

            if (SupportsClientState)
            {
                string clientState = postCollection[ClientStateFieldID];
                if (!string.IsNullOrEmpty(clientState))
                {
                    LoadClientState(clientState);
                }
            }

            if (tabIndex != ActiveTabIndex)
            {
                return true;
            }
            return false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:05:19.227

对于使用 VB.NET 的任何人：

```
Namespace AjaxControlToolkit
Public Class MyTabContainer
    Inherits TabContainer

    Protected Overrides Function LoadPostData(postDataKey As String, postCollection As NameValueCollection) As Boolean
        Dim tabIndex = ActiveTabIndex

        If SupportsClientState Then
            Dim clientState = postCollection(ClientStateFieldID)
            If Not String.IsNullOrEmpty(clientState) Then
                LoadClientState(clientState)
            End If
        End If

        If tabIndex <> ActiveTabIndex Then
            Return True
        End If

        Return False
    End Function
End Class 
```

结束命名空间

Yuriy Rozhovetskiy 的道具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-01T03:48:27.397

我也无缘无故地触发了 ActiveTabChanged 事件。

我用下面的方法修复了它；将此作为 ActiveTabChanged 事件的第一行。用您的实际标签 ID 更改“tabMain”：

```
 Dim ctrl As Control = Nothing

        'get the event target name and find the control
        Dim ctrlName As String = Page.Request.Params.Get("__EVENTTARGET")
        If (Not String.IsNullOrEmpty(ctrlName)) Then
            ctrl = Page.FindControl(ctrlName)

            If ctrl IsNot Nothing Then
                If ctrl.ID <> "tabMain" Then
                    Exit Sub
                End If
            End If
        Else
            Exit Sub
        End If 
```

如果事件来自除 tabMain 之外的任何地方（在上面的示例中），请退出。

这解决了我几个小时的挫败感！

# zend-framework - Zend 框架全局文件

> ID：11395590
> 
> 赞同：0
> 
> 时间：2012-07-09T13:02:45.427
> 
> 标签：zend-framework, registry, global-variables, configuration-files

我想包含一个包含全局变量列表的文件，这些变量在我的 zend 框架应用程序中随处可访问。然而，它需要由不太熟悉 php 或编码的人轻松调整。问题是我对如何最好地解决这个问题并没有太多的线索。

有一些选项，例如使用 Zend_Registry、另一个 config.ini 文件或仅使用标准定义。

在这种情况下，最佳做法是什么？如果可能的话，一个例子会很棒:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:05:34.557

您应该使用`Zend_Registry`和配置文件。您应该将非类常量保持在最低限度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T18:15:11.000

在我的一个应用程序中，我使用了一个名为 MyApp_Constants 的类：

```
class MyApp_Constants{
 const SOME_CONSTANT1 = 1;
 const SOME_CONSTANT2 = 2;
 //...
} 
```

然后，我使用以下行在代码中的任何位置访问这些变量：

```
MyApp_Constants::SOME_CONSTANT1; 
```

使任何人都可以轻松修改这些值。

# c# - 更新大型二进制文件

> ID：11395592
> 
> 赞同：1
> 
> 时间：2012-07-09T13:02:54.567
> 
> 标签：c#, file-io, io, large-files

Thera 大量的大型二进制文件（每个 >1Gb）需要在不改变长度的情况下进行部分更新。如何尽快更新它？当我使用标准 FileStream 调用时，看起来它们在保存到磁盘之前被缓冲了。想直接在文件系统上设置某些字节。
谢谢。

# sql - mvc 4中的Linq to Sql

> ID：11395594
> 
> 赞同：0
> 
> 时间：2012-07-09T13:03:00.673
> 
> 标签：sql, linq, asp.net-mvc-4

我在使用 linq to sql 编辑 mvc4 框架中的对象时遇到一些问题。“tbBoeking”对象已由 Visual Studio 2010 生成并驻留在 .dbml 文件中。它刚刚生成，并且没有对其或数据库进行任何更改。

BoekingController.cs 中的代码：

```
//This class has been generated and resides in a .dbml file
private DataClassesDataContext db = new DataClassesDataContext();

//Display edit form
public ActionResult Edit(int id = 0)
{
    tbBoeking boeking = db.tbBoekings.Single(p => p.boeknummer == id);
    if (boeking == null)
    {
        return HttpNotFound();
    }
    return View(boeking);
}

//Process changes made in form
[HttpPost]
public ActionResult Edit(tbBoeking boeking)
{
    if (ModelState.IsValid)
    {
        db.tbBoekings.Attach(boeking, true);
        db.SubmitChanges();
        return RedirectToAction("Index");
    }
    return View(boeking);
} 
```

显示编辑表单工作正常，但是当我按下提交并调用第二个 Edit() 时出现问题：在 db.submitchanges() 上，我收到一个错误，简单地说：“未找到或更改行”。

我已经阅读了有关此错误的其他一些帖子，但它们对我没有帮助。我认为我在使用 Linq-to-sql 或并发时犯了一些基本错误。我是在错误的地方使用 Attach() 还是别的什么？

提前致谢，

枯萎病

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:09:00.827

是否填写了所有必需的信息？此外，您是否有某种可能需要更新的时间戳。如果版本控制系统到位，我听说过忽略 asUpdated 标志的代码。该错误可能非常普遍，因此检查其他一些内容会有所帮助

如果上述建议没有帮助，那么我将运行 SQL 分析器跟踪以查看正在馈送到服务器的 SQL。

# java - JNDI InitialContext 在简单的 netbeans 项目中不起作用

> ID：11395597
> 
> 赞同：1
> 
> 时间：2012-07-09T13:03:14.130
> 
> 标签：java, exception, netbeans, jndi

**警告：Java 新手**

我有一个简单的 Netbeans 项目 - 我只想了解如何与来自 php 的 DB 进行交互，我想我会尝试在我的计算机上运行一个本地项目。

很多例子都说使用 InitialContext() 对象来引用数据库资源。

遵循示例后，我得到以下异常 - 许多 Google 的东西都指向一些 .xml 文件 - 我不知道它甚至不知道它在 Netbeans 项目中的位置？我现在没有使用 Web 服务器，所以没有使用 Tomcat 或类似的东西，只是本地 Java 程序来执行此操作，我怀疑这可能是问题所在。任何人都可以对此有所了解吗？

```
Exception thrown javax.naming.NoInitialContextException: Need to specify class name in environment or system property, or as an applet parameter, or in an application resource file:  java.naming.

package learningjava;
import com.mysql.jdbc.jdbc2.optional.*;
import com.mysql.jdbc.Driver;
import java.sql.SQLException;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.naming.*;

public class LearningJava {

    public static void main(String[] args) {

       MysqlDataSource test_db = new MysqlDataSource(); 

       test_db.setServerName("localhost");
       test_db.setDatabaseName("dev");

       try {

            InitialContext test_db_context = new InitialContext();
            test_db_context.bind("jcdb/testdb", test_db);
            MysqlDataSource test_db_datasource = (MysqlDataSource)test_db_context.lookup("testdb");

       } catch (NamingException e) {

           System.out.println("Exception thrown " + e);

       }
        try {

            test_db.getConnection("root","password");

        } catch (SQLException e) {

             System.out.println("Exception thrown " + e);

        }

    }    

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:30:37.457

您可以尝试在以下内容之前添加此内容`InitialContext test_db_context = new InitialContext();`：

```
System.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.naming.java.javaURLContextFactory");
System.setProperty(Context.URL_PKG_PREFIXES, "org.apache.naming"); 
```

您应该在类路径中包含 jar 命名-common-4.1.34 和 mysql-connector-java-5.1.6

这个例子对我有用（未优化但有效！）

```
public static void main(String[] args) throws NamingException {
        // Create initial context
        System.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.naming.java.javaURLContextFactory");
        System.setProperty(Context.URL_PKG_PREFIXES, "org.apache.naming");

        InitialContext ic = new InitialContext();
        ic.createSubcontext("java:");
        ic.createSubcontext("java:comp");
        ic.createSubcontext("java:comp/env");
        ic.createSubcontext("java:comp/env/jdbc");

         MysqlConnectionPoolDataSource mysqlConnectionPoolDataSource = new MysqlConnectionPoolDataSource();
         mysqlConnectionPoolDataSource.setUser("root");
         mysqlConnectionPoolDataSource.setPassword("root");
         mysqlConnectionPoolDataSource.setURL("jdbc:mysql://localhost:3306/test_my_database");

         ic.bind("java:comp/env/jdbc/test", mysqlConnectionPoolDataSource);

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:30:41.977

一般来说，您应该了解 JNDI 应该有一个服务器。在您提供的代码片段中，当您进行查找时，您正在使用 JNDI 技术的 _CLIENT_SIDE_ 部分。应该有一个可以从本地客户端连接访问的 JNDI 服务器。一旦正确配置，对查找的调用应该发出与 JNDI 服务器的连接，并提供一种获取/绑定资源到该服务器的方法。

如何正确配置 JNDI？

通常您应该提供一个属性文件，该文件将包含此服务器的主机名、端口 + 一些特定于实现的信息。

当您使用应用程序服务器（如 JBoss 或 Web Sphere）时，通常已经提供了 JNDI 服务器。我认为这是误解的根源。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:33:55.687

通常 JNDI 用于应用程序服务器内部，这不是您的情况。

根据您的需要，您可以使用以下代码：

```
Class.forName("com.mysql.jdbc.Driver")
Connection connection = DriverManager.getConnection("jdbc:mysql://localhost/dbname", "user", "password"); 
```

此外，您还需要在[此处](http://dev.mysql.com/downloads/connector/j/)下载 MySQL 驱动程序并将相应的 JAR 文件 (mysql-connector-java-5.1.21-bin.jar) 添加到您的应用程序的类路径[中，这里描述了如何执行此操作](http://javahowto.blogspot.com/2006/06/set-classpath-in-eclipse-and-netbeans.html)。

# python - double 到 PyFloat 的转换不正确

> ID：11395600
> 
> 赞同：2
> 
> 时间：2012-07-09T13:03:23.717
> 
> 标签：python, c, swig

我正在学习 SWIG，用于在 Python 中使用 C。我写了这个函数，但我不明白，为什么包装`myfunc`返回错误的浮点/双精度值：

mfuncs.c

```
#include <stdlib.h>

float myfunc(int n) {
    float result;
    result = 100 / n;
    return result;
} 
```

mfuncs.i

```
%module mfuncs
%typemap(out) double, float "$result = PyFloat_FromDouble($1);"

extern float myfunc(int n); 
```

最后我得到 1107558400.0 而不是 33.33333。

```
>>> 导入 mfunc
>>> mfuncs.myfunc(3)
1107558400.0
>>>

```

错误在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T16:02:51.360

不需要 SWIG 类型映射 - 它是默认提供的，您只需要为“深奥”类型编写类型映射，这里提供的默认`double`/类型`float`就可以了。

这里真正的问题是您没有在编译时启用或忽略警告！**真正值得养成使用“-Wall -Wextra”或您的编译器启用最大警告并注意它们所需的任何东西的习惯。**

您的 SWIG 接口仅告诉*SWIG*该函数`myfunc`，但该接口中没有任何内容可以使您用于编译生成的 myfuncs_wrap.c 的编译器可以使用该声明。这意味着当您编译共享库时，您依赖于`myfunc`. 我的机器上的 GCC 和 -Wall 报告了这个：

> test_wrap.c:3139:3：警告：函数“myfunc”的隐式声明

隐式声明假定它返回`int`。如果没有声明，这只是 C 中的规则，就好像你写了：

```
#include <stdlib.h>

int myfunc(int n);

int main() {
  printf("%d\n", myfunc(3));   
  return 0;
} 
```

`myfunc`鉴于return a的定义，这显然是错误的（确切地说是未定义的行为）`float`。您的实现（合法地）选择为这种未定义的行为做最简单的事情，这大致是从`int`to的按位转换`float`。（它同样可以做*任何事情*，甚至在每次运行时都做一些不同的事情——这就是未定义行为的美妙之处）。

您可以通过将其更改为来修复您的 SWIG 界面：

```
%module mfuncs
%{
extern float myfunc(int n);
%}

extern float myfunc(int n); 
```

这是有效的，因为 和 之间的代码`%{`直接`%}`传递给生成的包装器，这使得编译器`myfunc`在构建包装器时知道真正的声明。

不过，在我看来，有一个更好的解决方案：仅在头文件中提供一次声明，然后您的接口文件变为：

```
%module mfuncs
%{
#include "myfunc.h"
%}

%include "myfunc.h" 
```

（显然`#include "myfunc.h"`在 myfunc.c 中）。这样，您只需编写一次声明，如果有任何不完全预期的内容，编译器将发出警告/错误，而不仅仅是采取（通常是错误的）最佳猜测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-15T03:17:47.073

您在此代码中有两个错误会阻止`myfunc(3)`返回您期望的 33.3333。Flexo 精彩地解释了包装问题。另一个问题是这条线

```
 result = 100 / n; 
```

`100`是一个 int，`n`是一个 int，除法的结果将是一个 int，然后转换为浮点数。所以`myfunc(3)`== 33。Python 2 的行为方式相同，它在 Python 3 中已进行了更改，使得两个整数的除法产生一个浮点数。

只需将该行更改为

```
 result = 100.0 / n; 
```

或做`n`一个浮动/双。

# c# - 在 ASP.NET MVC 3 中超出时，如何限制上传的文件大小并以适当的错误很好地弹出 ModelState？

> ID：11395601
> 
> 赞同：1
> 
> 时间：2012-07-09T13:03:30.780
> 
> 标签：c#, javascript, asp.net-mvc, asp.net-mvc-3, modelstate

基本上我有一个带有文件输入的页面，允许最终用户上传一些文档。

我有一个看起来像这样的控制器

```
public class MyController : Controller 
{
  [HttpPost]
  public ActionResult MyAction(MyViewModel model, HttpPostedFileBase document)
  { .. }
} 
```

我想要实现的是：当用户尝试上传大于**maxContentLength**设置的文件时，应将验证错误添加到 ModelState 中，并且应将用户返回到他提交的表单所在的页面。处理 ExceptionFilter 中的错误并重定向到自定义页面不是解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:06:11.700

您不能发送大于`maxContentLength`设置的请求。Web 服务器将在它有机会到达您的应用程序之前就终止该请求，并为您提供处理此错误的可能性。因此，如果您想处理它，您将不得不将值`maxContentLength`增加到一个相当大的数字，然后在您的控制器操作中检查`ContentLength`上传文件的值。

```
[HttpPost]
public ActionResult MyAction(MyViewModel model, HttpPostedFileBase document)
{ 
    if (document != null && document.ContentLength > MAX_ALLOWED_SIZE)
    {
        ModelState.AddModelError("document", "your file size exceeds the maximum allowed file size")
        return View(model);
    }

    ...
} 
```

但显然更清洁的解决方案是在您的视图模型中直接处理这个问题。您不需要 HttpPostedFileBase 参数。这就是视图模型的用途：

```
public class MyViewModel
{ 
    [MaxFileSize(MAX_ALLOWED_SIZE)]
    public HttpPostedFileBase Document { get; set; }

    ... some other properties and stuff
} 
```

其中 MaxFileSize 显然是您可以轻松实现的自定义属性。

现在您的 POST 操作变得更加标准：

```
[HttpPost]
public ActionResult MyAction(MyViewModel model)
{ 
    if (!ModelState.IsValid)
    {
        return View(model);
    }

    ...
} 
```

你可以看看我写的[下面的例子。](https://stackoverflow.com/a/6388927/29407)

# vb.net - 是否有一种简单的方法可以向现有的 VB.NET 方法添加方面？

> ID：11395606
> 
> 赞同：1
> 
> 时间：2012-07-09T13:03:43.530
> 
> 标签：vb.net, decorator, aop

我知道 VB.NET 有许多面向方面的框架。为了向几个方法添加一个方面，将整个框架投入使用有点繁重。VB.NET 是否提供了一种简单的方法（通过某种元编程/反射）在类/对象中的现有方法之上分层方面？

基本上，目标是拦截方法的传入消息以调用它并添加副作用或操纵请求，就像在标准 AOP 中通常所做的那样。

有没有将方面直接集成到语言中的计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:41:07.170

在这种情况下，多态不是一种选择吗？我想您会发现，在某种 AOP 框架之外，VB 无法更改现有类的功能。您可以继承和覆盖基成员，也可以使用扩展方法向现有类添加附加功能，但无法更改现有类中的现有功能。

可以创建一个模仿另一个现有库的新库，并欺骗现有代码认为您的新库是原始库，但除非绝对必要，否则这是一个坏主意。您可能只需要以标准的 OOP 方式重新思考您的设计，而不是用 AOP 术语思考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T03:42:19.873

装饰器（或代理）模式怎么样？由于它只有几个方法，那么你只需要一两个装饰器类。如果你后来发现它不仅仅是一两种方法，那么你可以考虑引入一个 AOP 工具。

这是[C#](http://www.geekdaily.net/2008/12/10/c-design-patterns-the-decorator-pattern/)中的一个示例，应该很容易转换为 VB.NET

# javascript - 将垂直滚动条添加到谷歌地图侧边栏

> ID：11395611
> 
> 赞同：0
> 
> 时间：2012-07-09T13:04:00.797
> 
> 标签：javascript, css, google-maps-api-3

我想知道是否有人可以帮助我。

下面的代码是我网页的一部分，它为谷歌地图创建了一个侧边栏。

```
// == rebuilds the sidebar to match the markers currently displayed == 
function makeSidebar() {
  var html = "";
  for (var i = 0; i < gmarkers.length; i++) {
    if (gmarkers[i].getVisible()) {
      html += '<a href="javascript:myclick(' + i + ')">' + gmarkers[i].myname + " - " + gmarkers[i].mydescription + '<\/a><br>';
    }
  }
  document.getElementById("sidebar").innerHTML = html;
} 
```

我遇到的问题是，随着地图标记列表的增长，滚动页面以查看所有条目变得越来越困难。

我想做的是创建一个垂直滚动条，以便更轻松地导航。我已经对此进行了一些阅读，我认为我说如果这是在 a`div`我可以使用`overflow`? 是正确的。但我不确定在使用 Javascript 时如何复制。

我只是想知道是否有人可以看看这个并提供一些关于我如何解决这个问题的指导。

非常感谢和亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:10:59.347

To allow a `div` to be scrolled, simple add the css property `overflow` with the value of `scroll` - you will need to provide the `height` attribute too

[example here](http://jsfiddle.net/manseuk/eEv6F/)

If your `sidebar` element was a `div` you could just apply the following :

```
#sidebar {
   overflow: scroll;
   height: 400px;
   width: 100px;
} 
```

You would need to change the `height` and `width` values as you require ....

A value of `scroll` means :

> The content is clipped and desktop browsers use scrollbars, whether or not any content is clipped. This avoids any problem with scrollbars appearing and disappearing in a dynamic environment. Printers may print overflowing content.

[Docs for the overflow property here](https://developer.mozilla.org/en/CSS/overflow)

# javascript - Chrome 扩展程序可在一段时间后重新加载和关闭选项卡

> ID：11395622
> 
> 赞同：0
> 
> 时间：2012-07-09T13:04:36.297
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在开发 google chrome 的扩展程序，它在页面加载 2 秒后重新加载选项卡一次，然后等待 30 分钟并关闭选项卡或 google chrome 窗口。我在我的 1.js 文件中尝试了这些脚本，但它们似乎都不起作用

```
 document.documentElement.style.display = 'none';
    setTimeout(function() {document.documentElement.style.display = '';}, 1000);
    chrome.tabs.reload()
    document.documentElement.style.display = 'none';
    setTimeout(function() {document.documentElement.style.display = '';}, 1000);
    chrome.tabs.remove() 
```

这是我的清单文件：

```
 {"name": "My First Extension",
    "version": "1.0",
    "manifest_version": 2,
    "description": "The first extension that I made.",
    "content_scripts": 
    [{"matches": ["http://*/*"],
    "js": ["1.js"],
    "run_at": "document_start",
    "permissions": 
    ["tabs", "http://*/*"]}]} 
```

她在 java 控制台中是这样说的：

```
 Uncaught TypeError: Cannot call method 'reload' of undefined 
```

谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:40:16.143

您确定您正在正确调用 chrome.tabs.* 方法吗？请提供一个片段。

# javascript - onkeyup 事件缓慢

> ID：11395623
> 
> 赞同：0
> 
> 时间：2012-07-09T13:04:38.537
> 
> 标签：javascript, asp.net

我有一个 aspx 页面，其中包含大约 200 个带有 onkeyup 事件的文本框，一些用户抱怨这些事件真的很慢。

所有这些 onkeyup 事件会导致这种缓慢吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:08:15.610

大概。我猜你每个 textarea 有 1 个 keyup 事件处理程序/侦听器。而是使用事件委托；`event.target`在文档上注册 keyup 侦听器并确定使用or触发它的元素`event.srcElement`。

```
document.onkeyup = function(e){
    e = e || window.event;
    var textarea = e.target || e.srcElement;    // reference to the textarea
} 
```

# c# - 使用 MVC3 破坏 RenderPartial

> ID：11395624
> 
> 赞同：0
> 
> 时间：2012-07-09T13:04:39.963
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我来到了我一周前写的一个 MVC3 项目，它已经停止工作并抛出以下错误：

`Error 10 The call is ambiguous between the following methods or properties: 'System.Web.Mvc.Html.RenderPartialExtensions.RenderPartial(System.Web.Mvc.HtmlHelper, string)' and 'System.Web.Mvc.Html.RenderPartialExtensions.RenderPartial(System.Web.Mvc.HtmlHelper, string)`'

这是什么原因？我最近没有更改项目中的任何内容以使其失败。我调用它的代码如下所示：

```
<div class="page-body">
    @if(!String.IsNullOrWhiteSpace(ViewBag.ErrorMessage)) {
        // Output error message
        Html.Raw(ViewBag.ErrorMessage);
    } else {
        // Render upload form
        Html.RenderPartial("_UploadForm");
    }
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:15:02.803

您在 Html.Raw 前面缺少 @ 符号，因为该方法返回了一个字符串，因此需要 @symbol

> **对于您从 MSDN 获取的知识：** Razor 语法@运算符在将文本呈现为 HTTP 响应之前对文本进行 HTML 编码。这会导致文本在网页中显示为常规文本，而不是被解释为 HTML 标记。

请这样使用

```
<div class="page-body">
    @if(!String.IsNullOrWhiteSpace(ViewBag.ErrorMessage)) {
        @Html.Raw(ViewBag.ErrorMessage);
    } else {
        // Render upload form
        Html.RenderPartial("_UploadForm");
    }
</div> 
```

# siri - 解决 Siri 缺少 API 的可能方法？

> ID：11395625
> 
> 赞同：6
> 
> 时间：2012-07-09T13:04:42.443
> 
> 标签：siri

我知道[Siri 没有 API](https://stackoverflow.com/a/7857377/1512009)。看起来也没有迹象表明它会很快改变。

但我迫不及待地想利用它出色的*自由语音*识别功能，所以我在想也许仍在使用它，但作为一个“黑匣子”？

例如，[这个应用程序](http://www.rememberthemilk.com/services/siri/)似乎设法让 Siri 听到和理解文本，然后将其发布在他们的网站上。知道它是如何工作的吗？

关于解决 Siri 缺少 API 的可能方法的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-10T22:32:15.073

Siri 不是一个独立的系统。所有繁重的工作都发生在位于`guzzoni.apple.com`. 如果您的目标设备查找您有权访问的 DNS 服务器（企业 wifi、家庭网络等），则可以通过代理将通信重定向到该地址，这将允许您提取所有有用的部分。为此，您可能[会对 GitHub 上的 SiriProxy 项目](https://github.com/plamoni/SiriProxy)感兴趣。

此外，如果您有兴趣进一步了解 Siri 通信的工作原理[，这里是用于对协议进行逆向工程的工具链（也在 GitHub 上）](https://github.com/applidium/Cracking-Siri)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-15T11:01:06.713

您可以将 Google 的非官方语音识别 Web 服务与类似 Maruuba、 [https](https://www.mashape.com/search?query=siri) ://www.mashape.com/search?query=siri ...

# extjs - ExtJS 4.1 TreeStore 不加载关联

> ID：11395628
> 
> 赞同：2
> 
> 时间：2012-07-09T13:04:53.883
> 
> 标签：extjs, extjs4.1

我有一个 TreeStore，它工作得很好，但是每个节点都有一些嵌套数据，所以我为它制作了一个新模型并使用了`hasMany`关联。但是现在商店不再加载任何内容。当我查看`load`事件中的记录时，它们是空的，但浏览器告诉我 Ajax 请求像以前一样交付了所有内容。

这是来自服务器的节点数据的样子：

```
{
  "路径": "KEY_518693",
  "名称": "KEY_518693",
  “数据”： [
    {
      “分支”：“KEY_518693”，
      "primnav": "ETC",
      “X”：29261，
      “Y”：96492
    },
    ...
  ],
  “孩子们”： [ ... ]，
  ...
}

```

这些是我的模型定义：

```
树节点：
{
  扩展：'Ext.data.Model'，
  要求：[
    '数据记录',
    'Ext.data.association.HasMany'
  ],
  字段：[
    {名称：'id'，类型：'string'，映射：'path'}，
    {名称：'文本'，类型：'字符串'，映射：'名称'}，
    ...
  ],
  有很多 ： {
    模型：'数据记录'，
    名称：'数据'
  }

```

```
数据记录：
{
  扩展：'Ext.data.Model',
  字段：[
    {名称：'分支'，类型：'字符串'}，
    {名称：'primnav'，类型：'string'}，
    {名称：'X'，类型：'int'}，
    {名称：'Y'，类型：'int'}
  ]
}

```

当我删除关联时，树加载没有问题。当我添加`data`到字段时，它被解析到树中，但作为“原始”对象而不是模型实例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:01:54.257

请注意，DataRecord 没有名为 treenode_id 的字段 - 因此您的 hasMany 关联不完整。有关更多信息，请参阅[文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.association.HasMany)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:56:37.480

我的方法有两个问题。

1.  关联的名称不应该是“数据”，否则根本不会加载记录。
2.  关联的primaryKey必须设置正确，在我的情况下`'branch'`是正确的

# ocean - Petrel & Ocean 2012.1 中有哪个 Open Inventor？

> ID：11395629
> 
> 赞同：2
> 
> 时间：2012-07-09T13:04:55.067
> 
> 标签：ocean, petrel, openinventor

我知道 Petrel & Ocean 2012.1 版本即将发布。因此，我想知道将使用哪个版本的 Open Inventor，以及在哪里可以找到有关它的更多信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-10T08:13:24.613

Petrel 2012.1 将基于 Open Inventor 9.0

** OIV 9.0 的完整文档

oivdoc90.vsg3d.com

** 发布说明，解释新功能：

oivdoc90.vsg3d.com/content/open-inventor-90

特别是请阅读与 .NET API 相关的部分

** 兼容性说明（特定于 .NET）

oivdoc90.vsg3d.com/node/22246#NETAPI

oivdoc90.vsg3d.com/node/18333#NETAssemblies

** Dispose 和异常的新行为

oivdoc86.vsg3d.com/content/release-notes-86#OpenInventor.NET

如果在场景图中仍引用节点，则 Dispose 方法（自 OIV 8.6 起）引发异常。为避免这种情况，您应该首先断开节点与父节点的子节点列表的连接。这个新的 Dispose 还将递归地访问场景图并在每个节点上调用 dispose。在 OIV 8.1 中并非如此（Petrel 2011）

阅读 8.1 和 9.0 之间所有版本的发行说明，了解 OIV 8.1 (Petrel 2011) 和 OIV 9.0 之间的新内容，您可能还会感兴趣

8.5（2011 年 1 月）：oivdoc90.vsg3d.com/node/18773

8.6（2011 年 6 月）：oivdoc90.vsg3d.com/node/18867

您可能还会对阅读所有版本的兼容性说明感兴趣

8.5：oivdoc90.vsg3d.com/node/18333

8.6：oivdoc90.vsg3d.com/node/18867

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T14:33:22.663

Ocean for Petrel 2012.1 将随 Open Inventor 9.0.0.0 一起提供。

如果您碰巧直接调用了任何 Open Inventor API，请务必查看 9.0 及更早版本的[Open Inventor 兼容性说明](http://oivdoc90.vsg3d.com/node/22246)，因为您的代码可能需要进行更改。

提醒一下，Open Inventor 许可证包含在 Ocean for Petrel 许可证中，但只能在 Ocean for Petrel 的上下文中使用。如果需要 Open Inventor 的独立版本，请联系 Open Inventor 供应商[VSG 。](http://vsg3d.com/)

Ocean for Petrel 2012.1 发行说明中提供了有关 Open Inventor 许可、新功能和已知问题的更多信息，该发行说明将随发行版一起分发。

# php - 向 Moodle 课程添加自定义字段

> ID：11395631
> 
> 赞同：5
> 
> 时间：2012-07-09T13:04:59.860
> 
> 标签：php, moodle

我是穆勒的新手。我需要您的建议来创建插件，该插件将在添加/编辑课程页面上添加一个自定义字段，并将输入值存储在`mdl_course`表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:04:38.950

截至目前，Moodle**不允许**您从 Web 界面向课程添加自定义字段。

[但是，Moodle Tracker ( MDL-18319](http://tracker.moodle.org/browse/MDL-18319) )中有一个适用于 v1.9 的补丁。

请注意，该补丁适用于 Moodle-1.9，如果您使用 Moodle 版本 > 1.9，直接应用它可能会损坏您的源代码

# c - 为什么在 linux 编程中使用 system() 不好？

> ID：11395633
> 
> 赞同：3
> 
> 时间：2012-07-09T13:05:06.177
> 
> 标签：c, linux, security

> **可能重复：**
> [在 Linux 中从 C、C++ 发出系统命令](https://stackoverflow.com/questions/4622693/issuing-system-commands-in-linux-from-c-c)

我在一些文字上看到在 linux 编程中使用 system() 调用不好，我想知道它的真正原因是什么？它应该消耗更多的内存，也许更多的 CPU。除了这些可能是什么原因？

例如，如果我键入`system("echo 1 > file");`而不是使用`fopen(), fwrite()`黑客在我的程序/linux 系统中可以做什么？我看到由于安全问题，不建议 system() 。但是一个人怎么能仅仅因为使用 system() 调用就破解了一个 linux 系统呢？如果有人能明确地解释使用 system() 可能会出现什么问题，我会很高兴。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:12:09.840

从字面上使用`system("echo 1 > file");`不是安全风险，只是不必要地执行另一个您不需要的流程。

当您以编程方式构建字符串然后将其与`system()`. 然后你就有了[Shell Command Injection](http://en.wikipedia.org/wiki/Code_injection#Shell_injection)的风险，你认为你正在构建一个命令，但是恶意用户通过给你精心设计的输入来破坏你的程序，导致你的命令执行你没有预料到的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T13:18:54.403

问题是您相信传递给系统的字符串不会受到可信来源的影响。假设你有这样的事情：

```
char *command = null;
//Read command from external source;
system(command); 
```

你能相信命令是安全的，而不是做一些像“rm -fr ~/*”这样讨厌的事情吗？使用 fopen 也不能保证您的安全，因为黑客可以再次传入文件名，例如 /etc/passwd 并读取您不想要的文件。编程与外部世界接口的底线。这是您对外部用户可以执行的操作进行一些验证和限制的地方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:22:25.663

[System(3)](http://linux.die.net/man/3/system)启动另一个进程并运行命令解释器（“/bin/sh -c”）来执行您的命令。如果您的程序使用 SUID 或 SGID 位运行，这可能是一个问题。shell 的行为由许多环境变量控制，其中一些可用于控制命令解释器。这种情况类似于执行 SUID 或 SGID shell 脚本。

# asp.net - 无法更改 GridView 触发的回发事件上的 ImageButton 工具提示或样式

> ID：11395634
> 
> 赞同：2
> 
> 时间：2012-07-09T13:05:07.250
> 
> 标签：asp.net, vb.net, gridview, tooltip, imagebutton

嗨，我在这里遇到了一个非常奇怪的问题。我有一个 ImageButton 和 Gridview，它们都是在运行时创建的。图像按钮是 web 表单上的一个单独控件，无论如何都没有链接到 Gridview。我想要实现的是当用户在 GridView 中完成对一行的编辑并单击更新行按钮时，我对输入的输入执行一组计算。如果在输入的数据中发现错误，然后我会显示 ImageButton，单击该按钮会显示错误消息。我用来使图像按钮可见或隐藏的功能

picCross.Style.Value = "显示：无；"

和

picCross.Style.Value = "显示：块；"

在 Page.PreRender 函数上调用。我发现我能够在 GridView 未触发的回发期间更改 ImageButton（更改按钮的工具提示，设置其样式的值），例如当用户单击 Web 表单上其他位置的按钮时. 但是，如果我尝试在 GridView 的回发事件期间对 Imagebutton 进行更改，例如当用户单击编辑行或更新行按钮/链接时。未保存更改。更奇怪的是我对标签没有这样的问题。无论是否在 Gridview 控件触发的回发期间进行了更改，我都可以更改标签的文本。

我尝试将 ImageButton 的 EnableViewState 设置为 true 和 false，但两者都没有区别。我在面板上尝试了相同的方法并且发生了同样的事情，在由 gridview 引起的回发期间我无法更改其属性。我的 GridView 有 EnableViewState = True

PS我也在运行时绑定了GridView。只有我的 GridView 的 RowUpdating 事件会触发。RowUpdated 事件不会触发。我希望尝试更改 RowUpdated 上的 ImageButton，并不是说我认为它会产生很大的不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:57:50.943

您应该在 PreInit 事件中创建动态控件（Gridview 和 ImageButtons）。如果您有母版页，则初始化事件。

# perl - 无法使用 Perl 从大小约为 2GB 的文件中读取某些单词的计数

> ID：11395636
> 
> 赞同：1
> 
> 时间：2012-07-09T13:05:23.910
> 
> 标签：perl, shell

我编写了一个 Perl 程序，它将匹配日志文件中的某些单词并将结果存储在数据库中。问题是这个程序适用于一个小文件，但不适用于文件大小~2GB。它的大小或程序需要更改吗？

```
use POSIX qw(strftime);

# load module
use DBI;

open( FILE, "/root/temp.log" ) or die "Unable to open logfile:$!\n";
$count_start   = 0;
$count_interim = 0;
$count_stop    = 0;

while (<FILE>) {
  @test = <FILE>;
  foreach $line (@test) {

    if ( $line =~ m/server start/ ) {

      #print "yes\n";
      $count_start++;
    }
    elsif ( $line =~ m/server interim-update/ ) {
      $count_stop++;
    }
    elsif ( $line =~ m/server stop/ ) {
      $count_interim++;
    }

  }
  print "$count_start\n";
  print "$count_stop\n";
  print "$count_interim\n";
  $now_string = strftime "%b %e %H:%M:%S", localtime;
  print $now_string;

  # connect
  my $dbh = DBI->connect( "DBI:Pg:dbname=postgres;host=localhost",
    "postgres", "postgres", { 'RaiseError' => 1 } );

  # execute INSERT query
  my $rows = $dbh->do(
"insert into radcount (acc,bcc,dcc) Values  ('$count_start','$count_stop','$count_interim')"
  );

  print "$rows row(s) affected\n";

  # clean up
  $dbh->disconnect();

}

close(LOG); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-09T13:12:14.080

这里有几件事-首先我建议您将文件句柄更改为三个 arg open-[在此处进行推理](http://www.modernperlbooks.com/mt/2010/04/three-arg-open-migrating-to-modern-perl.html)

```
open( my $fileHandle, '<', '/root/temp.log' ) or die "blah" ; 
```

其次，您正在将整个文件读入一个数组 - 对于一个大文件，这会吃掉很多内存。而是逐行阅读并处理它：

```
while(<$fileHandle>){
    #contents of your foreach loop
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T16:41:09.167

我对你的程序有几点意见。

*   *始终* 在程序开始时使用，并`use strict`在首次使用时声明变量`use warnings``my`

*   *始终*使用词法文件句柄和 的三参数形式`open`，并*始终*检查打开调用的状态

*   您正在使用 filehandle 打开文件`FILE`，但正在关闭`LOG`

*   您的`while`语句读取文件的第一行并将其丢弃

*   `@test = <FILE>`尝试将文件的*所有*其余部分读入数组。这就是导致您的问题的原因

*   您应该连接到数据库*一次*，并为其余代码使用相同的数据库句柄

*   您应该将`prepare`您的语句与*占位符*一起使用，并将实际值传递给`execute`

*   您正在`$count_stop`为一条`interim-update`记录和`$count_interim`一条`stop`记录递增

*   核心模块`Time::Piece`提供了一个`strftime`没有臃肿的方法`POSIX`

这是您的程序的修改以显示这些想法。我还没有设置日志文件和数据库来测试它，但它对我来说看起来不错并且可以编译。

```
use strict;
use warnings;

use Time::Piece;
use DBI;

open my $log, '<', '/root/temp.log' or die "Unable to open log file: $!";

my ($count_start, $count_interim, $count_stop) = (0, 0, 0);

while (<$log>) {

  if ( /server start/ ) {
    $count_start++;
  }
  elsif ( /server interim-update/ ) {
    $count_interim++;
  }
  elsif ( /server stop/ ) {
    $count_stop++;
  }
}

print <<END;
Start:   $count_start
Interim: $count_interim
Stop:    $count_stop
END

print localtime->strftime("%b %e %H:%M:%S"), "\n";

my $dbh = DBI->connect(
    "DBI:Pg:dbname=postgres;host=localhost", "postgres", "postgres",
    { 'RaiseError' => 1 } );

my $insert = $dbh->prepare('INSERT INTO radcount (acc, bcc, dcc) VALUES (?, ?, ?)');
my $rows = $insert->execute($count_start, $count_stop, $count_interim);

printf "%d %s affected\n", $rows, $rows == 1 ? 'row' : 'rows'; 
```

# delphi - Delphi XE2 Datasnap 会话管理 - 页面重新加载后获取会话信息

> ID：11395639
> 
> 赞同：6
> 
> 时间：2012-07-09T13:05:27.490
> 
> 标签：delphi, session, delphi-xe2, datasnap

我正在尝试确定如何使用 Delphi REST DataSnap 服务器检索会话信息。

我知道，当在同一个客户端页面上时，您可以使用 TDSSession 方法 GetThreadSession 访问当前线程会话。

但是，我想要做的是将数据存储在会话 (putData) 中，并且当用户从 page1 移动到 page2 时仍然能够检索它。目前，如果用户移动到不同的页面，会话将丢失并创建一个新的，从而丢失我之前设置的会话中的数据。

我试过玩 TDSSessionManager.SetThreadSession(sessionid) - 但我似乎无法让它工作。

我已经查看了广受好评的 Marco Cantu 白皮书，但是，它并没有为这个问题提供解决方案。

在这方面我能得到的任何帮助都会很棒——即使它只是“嘿，这个主题在第 X 本书中有所涉及”。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T12:18:51.263

TDSSessionManager.SetThreadSession(sessionid) 与 Session.sessionname 一起使用。

另外确保您的生命周期设置为会话（如 tondrej 所述）。

如果你重新连接你的客户端。一个新的会话开始。因此，您希望保持 Datasnap 连接处于打开状态。

或者您可以将生命周期设置为服务器并自己管理客户端会话。

编辑：休息服务器是无状态的。因此，您需要将您所在的页面存储在客户端上。并从服务器查询需要的页面

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-26T03:30:28.090

您必须调整客户端 JavaScript 以使用 cookie 来存储会话信息。

[请参阅JavaScript 客户端会话](http://docwiki.embarcadero.com/RADStudio/XE8/en/JavaScript_client_Sessions)的最后一部分

如果要保持服务器端对象在会话中处于活动状态，请使用会话生命周期。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:16:11.210

我相信您需要做的是将实例的[`LifeCycle`](http://docwiki.embarcadero.com/Libraries/en/Datasnap.DSServer.TDSServerClass.LifeCycle)属性设置为（有状态）。从您的问题看来，您目前正在使用（无状态）。`TDSServerClass``Session``Invocation`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-22T16:23:00.927

好吧，在 Datasnap REST（GET、POST、DELETE、PUT）中，如果您将 TDSServerClass 设置为会话，在这种情况下，REST 与调用相同，是无状态的（[http://docwiki.embarcadero.com/RADStudio /Tokyo/en/Server_Class_LifeCycle#REST_Clients](http://docwiki.embarcadero.com/RADStudio/Tokyo/en/Server_Class_LifeCycle#REST_Clients)）。没错，你给了所有类型的客户机会来使用你的数据快照服务器，例如 JSON。

您需要创建您的所有者模型以对您的 REST 服务器进行会话控制，或者寻找一些框架来执行此操作。在我的情况下，我在 lifecicle 服务器上使用自定义对象（在某些情况下也使用数据库），并在请求标头和其他信息上使用令牌，我知道是否是同一个客户端，并且我也可以控制令牌何时过期并需要重新登录，例如，我也可以在 PUT resquests 上提供更多安全性，仅在提供给客户的记录上（这只是一种情况，但还有很多其他情况......）。您需要以其他方式解决，而不是使用 TDSSession 的经典方式。

# eclipse - Eclipse IDE 无法启动

> ID：11395643
> 
> 赞同：5
> 
> 时间：2012-07-09T13:05:29.860
> 
> 标签：eclipse, ubuntu-12.04

当我使用 Eclipse Indigo IDE 处理 Android 项目时，我的计算机突然因电源故障关闭。

现在，如果我启动 Eclipse，只会出现一个空消息对话框（参见屏幕截图），并且 Eclipse 不会启动。我能做些什么？

（我使用的是 Ubuntu 12.04 LTS）

![在此处输入图像描述](../Images/6dfe72229286ca3aca7b940648dee8e0.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T15:18:10.290

Mabe 在您工作空间的**.metadata**文件夹中找到的某些文件已损坏，您是否尝试通过指定另一个工作空间来启动它？

> 您可以使用 -data 命令行参数在命令行上手动指定工作区位置。

如果您不想通过尝试解决问题而浪费大量时间，您可以将项目导入新工作区，重新安装之前安装的插件，一切都会好起来的。否则，您必须查看在旧工作区的**.metadata**文件夹中找到的**.log**文件，分析堆栈跟踪并尝试了解哪个插件已损坏并手动删除它，这可能需要很多时间，就是这样为什么我建议你第一个解决方案。关于**.metadata**文件夹，它位于**~old_workspace/.metadata**中。

 ******* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:30:32.510

1.  检查你的文件系统。断电时，可能有什么东西被破坏了。
2.  查看我的博文[When Eclipse Won't Start](http://blog.pdark.de/2012/04/13/when-eclipse-wont-start/) and [Restoreing a Corrupted Workspace in Eclipse](http://blog.pdark.de/2011/09/02/restoring-a-corrupted-workspace-in-eclipse/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-17T13:04:35.307

对我来说，.metadata 文件已损坏。由于 Eclipse 根本没有打开，因此更改工作区不是一种选择。我删除了以下目录，可以重新开始！

1.  .元数据
2.  .buildpath
3.  。项目

希望这对您也有帮助。请注意，您最终会丢失所有项目设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-17T12:03:41.077

我知道我的回复为时已晚。希望这可以帮助其他用户。

由于某种原因，我在 VMware 中的 Ubuntu 异常关闭。当我重新登录 Eclipse 时无法启动。我通过以下步骤进行了修复：

1.  删除了工作区中 .metadata 文件夹中的 .lock 文件
2.  使用带有“-clean”参数的命令行启动 Eclipse

开始很好！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T18:43:06.467

`~/workspace/.metadata/`我试图通过一个一个删除文件来找到损坏的文件，直到 Eclipse 可以启动。

损坏的文件是`~/workspace/.metadata/.plugins/org.eclipse.core.resources/.snap`

删除文件后，Eclipse 正常启动。******

# c# - 比较两个通用列表并删除重复项

> ID：11395645
> 
> 赞同：6
> 
> 时间：2012-07-09T13:05:42.617
> 
> 标签：c#, linq

我有两个通用列表，一个称为“精选”，另一个称为“过滤”。

```
List<Content> Featured = new List<Content>();
List<Content> Filtered = new List<Content>(); 
```

两者都包含“内容”项目，它们是简单的类，如下所示：

```
public class Content
{
    public long ContentID { get; set;}
    public string Title { get; set; }
    public string Url { get; set; }
    public string Image { get; set; }
    public string Teaser { get; set; }

    public Content(long contentId, string title, string url, string image, string teaser)
    {
        ContentID = contentId;
        Title = title;
        Url = url;
        Image = image;
    }
} 
```

任何出现在“已过滤”中但也出现在“精选”中的项目都需要从“已过滤”中删除。此外，这两个列表随后将合并为一个通用列表，其中“精选”项目首先出现。

我知道我可以编写几个 foreach 循环来做到这一点，但我不禁觉得必须有一个使用 LINQ 的更优雅的方法。

我正在使用 C# 4.0。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:11:48.530

您正在寻找 LINQ 方法`Union`，特别是

```
var singleList = Featured.Union(Filtered); 
```

这将返回所有`Featured`项目，然后是所有`Filtered`不是的项目`Featured`。请注意，它还将*删除列表**中*的任何重复项 - 因此，如果一个项目是`Featured`两次，它只会出现*一次*。

但是，您确实需要能够*比较*的实例`Content`才能做到这一点，方法是添加 和 的实现`Equal`或`GetHashCode`提供一个`IEqualityComparer`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T13:08:55.347

如果您定义了 IEqualityComparer，则可以使用以下`Union`方法：

```
List<Content> FeaturedAndFiltered = Featured.Union(Filtered, new MyContentComparer()); 
```

MyContentComparer 的粗略实现是：

```
public class ContentEqualityComparer : IEqualityComparer<Content>
{

    public bool Equals(Content c1, Content c2)
    {
        return (c1.ContentID == c2.ContentID);
    }

    public int GetHashCode(Content c)
    {
        return c.ContentID.GetHashCode();
    }

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T13:11:23.757

假设两个列表中的 objects presenter 是实际相同的对象，您可以执行以下操作：

```
var totalList = Featured
    .Concat(Filtered.Where(f => !Featured.Contains(f)))
    .ToList() 
```

**更新**

或者，使用 Mahmoud Gamal 提到的 except 方法：

```
var totalList = Featured
    .Concat(Filtered.Except(Featured))
    .ToList() 
```

# javascript - ajax更新后如何绑定一段javascript

> ID：11395647
> 
> 赞同：2
> 
> 时间：2012-07-09T13:05:45.970
> 
> 标签：javascript, jquery, ajax, wicket

> **可能重复：**
> [如何将函数绑定到通过 Ajax 加载的元素](https://stackoverflow.com/questions/10116170/how-to-bind-a-function-to-element-loaded-via-ajax)

在我的应用程序中，我想在某个单元格的鼠标悬停上填充信息面板并突出显示该单元格，以便用户可以看到哪个单元格。我使用了以下 js 和 css，这对于首次加载页面时存在的单元格效果很好

```
$(document).ready(function(){
    $("table1 td").hover(function(){
    $("table1 td").removeClass('highlight');
    $(this).addClass('highlight');
    });
}); 
```

并突出显示

```
.highlight{
    border-style:outset;
    border-width:5px;
    border-color:#0000ff;
} 
```

但在我的应用程序中，table1 td 由 wicket listview 生成，并在用户进行搜索时通过 Ajax 更新。在 Ajax 更新之后，这些 js 代码没有任何效果。我怎样才能让那些js代码在Ajax更新后仍然有效？我真的很感激任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:34:49.147

对不起，如果你想使用`bind`函数，你应该使用它。jQuery 不支持悬停。

```
$(selector).bind('mouseenter', function () {alert('hover'); });
$(selector).bind('mouseleave', function () {alert('hover'); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:30:00.133

Ajax 会更新你的表，所以你不应该把它写在 ready 函数中。这里有两点：

1）。写在Ajax成功函数中。

```
$.ajax(function () {
....,
....,
success: funciton () {
$("table1 td").hover(function(){
$("table1 td").removeClass('highlight');
$(this).addClass('highlight');
});
}
}); 
```

2）。使用绑定功能。

```
$("table1 td").bind('hover', function(){
$("table1 td").removeClass('highlight');
$(this).addClass('highlight');
}); 
```

# java - PHP Mysql 为什么会这样呢？安卓

> ID：11395648
> 
> 赞同：1
> 
> 时间：2012-07-09T13:05:47.780
> 
> 标签：java, php, android, mysql

所以基本上它进入并在数据库中找到一个与我输入的单词匹配的单词并吐出一个有效的回复，但它会做所有其他废话。

[http://i.imgur.com/Lh7iZ.png](http://i.imgur.com/Lh7iZ.png)

这是我的 PHP 代码

```
<?php
    // Connect to database
    mysql_connect("*****", "***", "****");
    mysql_select_db("***");

    // If something is received
    if($_POST)
    {
        if($_POST['action'] == "ask")
        {
            // Filter it to prevent SQL injections
            $text = mysql_real_escape_string($_POST['stringdata']);

            // Search it on the database
            $q = mysql_query("SELECT `reply` FROM `poka` WHERE `word` = '$text' ORDER BY RAND()");

            // Show result
            if($r = mysql_fetch_assoc($q))
                echo $r['reply'];
            else
                echo "Cannot find a reply";
        }
        elseif($_POST['action'] == "teach")
        {
            // Filter it to prevent SQL injections
            $word = mysql_real_escape_string($_POST['word']);
            $answer = mysql_real_escape_string($_POST['answer']);

            // Insert it to the database
            if( mysql_query("INSERT INTO `poka` VALUES(NULL, '$word', '$answer')") )
                echo "ok";
            else
                echo "fail";
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:10:41.820

Your hosting company is automatically adding Google(?) Analytics code to every page sent. Talk to them.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:20:28.257

如果您想明确了解，[请访问 http://www.apachefriends.org/en/index.html](http://www.apachefriends.org/en/index.html)并为自己挑选一份 XAMPP。

有了它，您可以快速设置 MYSQL 数据库的本地副本。从您当前的主机迁移您的数据库数据以复制您已有的设置。

然后在您的 PHP 中，将其更改为指向新的本地数据库（在 'localhost' 上）并查看是否得到相同的结果。

我的怀疑和其他人一样:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:12:29.183

您能否尝试以下更改，以确保您没有破坏任何字符串。

```
echo $r['reply']; 
```

至

```
echo "{$r['reply']}"; 
```

无论如何它的行为方式相同吗？

虽然，上面的答案可能是原因。

以下是[PHP 文档中有关如何在 echos 中使用数组](http://php.net/manual/en/function.echo.php)的示例：

```
// You can also use arrays
$baz = array("value" => "foo");

echo "this is {$baz['value']} !"; // this is foo ! 
```

# c - 可变参数函数中的“'*'标记之前的预期说明符限定符列表”错误

> ID：11395652
> 
> 赞同：3
> 
> 时间：2012-07-09T13:06:02.507
> 
> 标签：c, pointers, struct

我正在尝试编写一个函数，它将在 C 中配置微控制器的外围设备。为此，我使用了`va_arg`. 这是功能：

```
void init_peripheral(int ID, ...){
    va_list device;
    va_start(device, ID);
    io * temp; // No error here
            //io is a structure 
            //IO, USART, LCD are 01, 02, 03.
    (*temp).portB.set = set_portB;

    if( ID == IO ){
        io* config_io; // error:expected specifier-qualifier-list before ‘*’ token
        config_io = va_arg(device, *io);
        (*config_io).portB.set = set_portB;
        (*config_io).portB.clr = clr_portB;
        (*config_io).portB.mkin = mkin_portB;
        (*config_io).portB.mkout = mkout_portB;

        (*config_io).portC.set = set_portC;
        (*config_io).portC.clr = clr_portC;
        (*config_io).portC.mkin = mkin_portC;
        (*config_io).portC.mkout = mkout_portC;

        (*config_io).portD.set = set_portD;
        (*config_io).portD.clr = clr_portD;
        (*config_io).portD.mkin = mkin_portD;
        (*config_io).portD.mkout = mkout_portD;
    }

    else if( ID == LCD ){       
        lcd *config_lcd;
        config_lcd = va_arg(device, *lcd);
         //Set necessary params here
    }

    else if( ID == USART){
        usart *config_usart;
        config_usart = va_arg(device, *usart);
        (*config_usart).init = usart_init;
        (*config_usart).transmit = usart_transmit;
        (*config_usart).receive = usart_receive;
    }

    va_end(device);
} 
```

我没有收到该行的错误`io * temp`，但我确实收到了一个错误`io * config_io;`
Here is the `io`struct：

```
struct __io__{
    struct __port__ portB;
    struct __port__ portC;
    struct __port__ portD;
};
typedef struct __io__ io; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:34:03.550

问题实际上在下一行，与`va_arg`宏有关。您发送的是取消引用的指针而不是类型：

```
config_io = va_arg(device, *io);       // Should be io*

config_lcd = va_arg(device, *lcd);     // Should be lcd*

config_usart = va_arg(device, *usart); // Should be usart* 
```

这是[你的代码](http://ideone.com/BJAja)，它有编译问题。
这是[固定版本](http://ideone.com/dnRla)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:26:57.473

代码看起来正确。而且既然你可以声明`temp`，我看不出为什么`io_config`会突然失败。你应该尝试什么：

1.  在函数前添加`#under config_io`；也许`config_io`定义了一个宏。

2.  替换`io`为`struct __io__`只是看看是否会编译。如果它没有将变量声明移到`if()`块外；也许您的编译器版本不支持它。

3.  告诉编译器向您展示预处理的源代码（即在所有宏都被扩展之后）。也许这会给你一个提示。

# file - 获取浏览文件的绝对路径

> ID：11395654
> 
> 赞同：2
> 
> 时间：2012-07-09T13:06:05.210
> 
> 标签：file, coldfusion

我正在使用以下代码从我的系统中浏览文件：

```
<cfinput type="file" name="Document"  size="40" onChange="NAMESMALL.value = Document.value;" > 
```

和以下代码打印正在浏览的文件的路径：

```
<cfoutput>#Document#</cfoutput> 
```

我只想获取正在浏览的路径的绝对值。因为我必须在 api 中使用路径并且**不**对它执行任何操作 lyk 读取、写入上传等。请为此建议我一些解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T14:01:22.993

这不是一个冷融合问题，因为当页面加载时，提交的内容取决于浏览器。

然后这是关于如何让表单提交输入的完整路径[type=file]

在这里回答，基本上不能可靠地完成：

[如何从文件输入中获取文件的完整路径](https://stackoverflow.com/questions/4176377/how-to-get-the-full-path-of-the-file-from-a-file-input)

# .htaccess - .htaccess 特殊字符

> ID：11395661
> 
> 赞同：1
> 
> 时间：2012-07-09T13:06:21.623
> 
> 标签：.htaccess, mod-rewrite, special-characters

我想更改 url 中的字符。例如从这个

```
http://stackoverflow.com/palety-ciężkie 
```

对此：

```
http://stackoverflow.com/palety-ciezkie 
```

我想改变标志：

```
ą|a, Ą|a, ć|c, Ć|c, ę|e, Ę|e, ł|l, Ł|l, ń|n, Ń|n, ó|o, Ó|o, ś|s, Ś|s, ź|z, Ź|z, ż|z, Ż|z 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T20:52:13.220

您必须记住，尽管 URI`/abc-ą`被编码为`/abc-%C4%85`，但在通过重写引擎发送时它会被未编码。因此，您需要一个规则来转换其中的每一个：

```
RewriteRule ^(.*)ą(.*)$ /$1a$2 [R=301,L]
RewriteRule ^(.*)Ą(.*)$ /$1a$2 [R=301,L]
RewriteRule ^(.*)ć(.*)$ /$1c$2 [R=301,L]
RewriteRule ^(.*)Ć(.*)$ /$1c$2 [R=301,L]
RewriteRule ^(.*)ę(.*)$ /$1e$2 [R=301,L]
RewriteRule ^(.*)Ę(.*)$ /$1e$2 [R=301,L] 
```

等等。如果您不想重定向，而是希望在服务器内部重写 URI（例如，使浏览器的地址栏不改变），`R=301.`则从括号中删除。

另一种选择是创建一个映射文件并使用[mod_rewrite 的 RewriteMap](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritemap)，但您需要访问服务器或虚拟主机配置才能进行设置。

# hibernate - SQL查询中的Hibernate ManyToOne关联和连接表

> ID：11395662
> 
> 赞同：2
> 
> 时间：2012-07-09T13:06:22.310
> 
> 标签：hibernate, criteria, inner-join, many-to-one

我有一个关于 Hibernate ManyToOne 关联的问题。

我有一个这样映射的产品实体：

```
public class Product {
@Id
@DocumentId
@Column(name = "PRODUCT_ID", columnDefinition = "integer")
@Index(name = "PRODUCT_ID_IDX")
private Long id;

@Column(name = "SALE_PRICE")
@Index(name = "PRODUCT_PRICE_IDX")
private Double salePrice;
...
@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "CATEGORY_ID", nullable = true)
@Index(name = "PRODUCT_ID_CATEGORY_IDX")
private ProductCategory category;
} 
```

那么你怎么能看到我们与 ProductCategory 表有关系。FK 我们存储在 Product 表中。当我创建按特定类别和价格选择产品的查询时，我有下一个 SQL： `select this_.PRODUCT_ID as PRODUCT1_9_1_, this_.BUY_URL as BUY2_9_1_, this_.CATEGORY_ID as CATEGORY15_9_1_, this_.CURRENCY as CURRENCY9_1_, this_.IMAGE_URL as IMAGE4_9_1_, this_.INSTOCK as INSTOCK9_1_, this_.LONG_DESCRIPTION as LONG6_9_1_, this_.NAME as NAME9_1_, this_.RATING as RATING9_1_, this_.RETAIL_PRICE as RETAIL9_9_1_, this_.SALE_PRICE as SALE10_9_1_, this_.SHIPPING as SHIPPING9_1_, this_.SHORT_DESCRIPTION as SHORT12_9_1_, this_.UPC as UPC9_1_, this_.VIEWS as VIEWS9_1_, cat1_.CATEGORY_ID as CATEGORY1_10_0_, cat1_.NAME as NAME10_0_, cat1_.RATING as RATING10_0_, cat1_.VIEWS as VIEWS10_0_, cat1_.VISIBLE as VISIBLE10_0_ from PRODUCT this_ inner join PRODUCT_CATEGORY cat1_ on this_.CATEGORY_ID=cat1_.CATEGORY_ID where ( this_.SALE_PRICE between ? and ? and cat1_.CATEGORY_ID in ( ? ) ) order by this_.NAME asc limit ? offset ?`

我的问题是下一个：如何避免两个表的内部连接：Product 和 ProductCategory？

我的标准 DAO 代码： `criteria.createAlias("category", "cat"); criteria.add(Restrictions.conjunction() .add(Restrictions.between("salePrice", priceLow, priceHigh)) .add(Restrictions.in("cat.id", categoryIds)));`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T14:02:26.193

线

```
criteria.createAlias("category", "cat"); 
```

确切的意思是：创建与 Category 实体的内部联接。

只需使用

```
criteria.add(
    Restrictions.conjunction()
        .add(Restrictions.between("salePrice", priceLow, priceHigh))
        .add(Restrictions.in("category.id", categoryIds))); 
```

# css - 带有CSS的菜单中的透明边框

> ID：11395663
> 
> 赞同：2
> 
> 时间：2012-07-09T13:06:23.107
> 
> 标签：css, menu, border, transparent

我使用如下菜单。如何将底部边框从白色更改为透明，以便边框显示为透明边框。现在，当我设置边框透明时，整个菜单是橙色的（菜单的背景颜色）：

```
ul#nav,
ul#nav ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
ul#nav li {
    position: relative;
    float: left;
    width: 118px;
}
#nav li ul {
    position: absolute;
    left: 0;
    top: auto;
    margin-left: -999em;
    border-top: 11px transparent;
}
#nav li  li {
    width: 135px;
    z-index: 1;
}
#nav li ul ul {
    position: absolute;
    left: 100%;
    top: -.1em;
    margin-left: -999em;
}
ul#nav li a {
    display: block;
    text-decoration: none;
    text-align: left;
    background: white;
    border: none;
}
* html ul#nav li a { height: 1% }
#nav li:hover a,
#nav li.over a,
#nav li:hover li:hover a,
#nav li.over li.over a,
#nav li:hover li:hover li:hover a,
#nav li.over li.over li.over a,
#nav li:hover li a:hover,
#nav li.over li a:hover,
#nav li:hover li:hover li:hover a:hover,
#nav li.over li li a:hover,
#nav li:hover li:hover li:hover li:hover a:hover,
#nav li.over li.over li.over li.over a:hover {
    color: #ff7f00;
    background-color: white;
}
#nav li:hover li a,
#nav li.over li a,
#nav li:hover li:hover li a,
#nav li.over li.over li a,
#nav li:hover li:hover li:hover li a,
#nav li.over li.over li.over li a {
    color: white;
    background: #ff7f00;
    margin-left: -10px;
    border-bottom: 1px solid #FFFFFF;
    filter: alpha(opacity=95);
    -moz-opacity: 0.95;
    opacity: 0.95;
}
#nav li ul li a { padding: 25px 7px 7px 7px }
ul#nav li:hover ul ul,
ul#nav li:hover ul ul ul,
ul#nav li.over ul ul,
ul#nav li.over ul ul ul { margin-left: -999em }
ul#nav li:hover ul,
ul#nav li li:hover ul,
ul#nav li li li:hover ul,
u#navl li li li li:hover ul,
ul#nav li.over ul,
ul#nav li li.over ul,
ul#nav li li li.over ul { margin-left: 0 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:18:30.427

```
border-bottom:2px solid rgba(0,0,0,.5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:11:56.937

要么使用

```
border-bottom: none; 
```

或者，如果您仍想保持间隙，只需将颜色设置为`transparent`：

```
border-bottom-color: transparent; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:09:27.300

该代码在呈现时非常难以阅读。我想你已经尝试过 `border-bottom: 1px transparent; ?`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-09T13:10:15.390

Simply use

```
border-bottom: none; 
```

[Demo](http://jsbin.com/ezoqet)

# ruby-on-rails-3 - Rails 3 - Fields_for 嵌套属性未显示在表单上

> ID：11395664
> 
> 赞同：2
> 
> 时间：2012-07-09T13:06:28.330
> 
> 标签：ruby-on-rails-3, haml, simple-form

好的，这很奇怪，我基本上有以下课程：

```
class PriceProfile < ActiveRecord::Base
  has_many :prices
  has_many :price_profile_date_ranges

  attr_accessible :name, :price_profile_date_ranges_attributes
  accepts_nested_attributes_for :price_profile_date_ranges

}

class PriceProfileDateRange < ActiveRecord::Base
  attr_accessible :end_date, :price_profile_id, :start_date, :prices, :prices_attributes
  has_many :prices, :dependent=>:destroy
  belongs_to :price_profile

  accepts_nested_attributes_for :prices
}

class Price < ActiveRecord::Base
  attr_accessible :price_profile_date_range_id, :price_profile_id, :product_id, :value
  belongs_to :price_profile
  belongs_to :price_profile_date_range
  belongs_to :product
} 
```

价格配置文件定义了价格随时间变化的特定产品的定价方案。应用价格的日期范围存储在 price_profile_date_range 表中，最后价格表保存所有价格。我正在使用以下控制器和视图在此处创建表单，以便在创建日期范围时设置价格。基本上，该表格有一个开始和结束日期字段和一个网格，即它将有一个针对所有产品的文本框列表来输入价格。

这是视图：

```
.row
  .span9
    = simple_form_for(@price_profile_date_range, :class=>'well') do |f|

  .form-inputs
    = f.input :start_date, :required => true, :as => :string, :input_html =>{:class=>'datepicker'}
    = f.input :end_date, :required => true, :as => :string, :input_html =>{:class=>'datepicker'}
    = f.input :price_profile_id, :as=>:hidden
    %table.table.table-bordered.table-condensed.table-striped
      %tr
        %td
        - @products.each do |product|
          %td
            =product[:name]
          %td
            - f.fields_for(:prices) do |price_element|
              = price_element.input :value, :class=>'span1'
              = price_element.input :price_profile_id, :as=>:hidden
              = price_element.input :price_profile_date_range_id, :as=>:hidden
              = price_element.input :product_id, :as=>:hidden
  .form-actions
    = f.button :submit 
```

这不完全是最终形式 - 问题是 f.fields_for 行似乎没有执行。在控制器中，我使用一组价格初始化 @price_profile_date_range 对象。如果我进行加价检查，即使在视图中也会显示所有价格对象，但是 fields_for 根本不执行。我被困在这里真的很糟糕。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:29:22.723

尝试将其更改`-`为`=`- 听起来很傻，但也许这就是问题所在。

# java - What is the minimum configuration to run the JVM?

> ID：11395667
> 
> 赞同：4
> 
> 时间：2012-07-09T13:06:59.783
> 
> 标签：java, configuration, jvm, minimum-requirements

What is the minimum configuration to run the JVM?
The computer I work has the following settings:

`MS Windows XP Professional SP3`
`Intel Celeron 2.26GHz CPU, 959MB RAM, VIA/S3G UniChrome Pro IGP`

Using a Java-based program and I think that is causing this latency, besides having to use Internet Explorer to access the Intranet (which only allows the use of IE). So I wonder what the minimum configuration to run the JVM, so that my computer can be replaced.

From now on,
Thank you.

*Sorry for bad english*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:13:07.827

取决于什么系统和什么版本的jdk见[http://www.java.com/en/download/help/sysreq.xml](http://www.java.com/en/download/help/sysreq.xml)

适用于 Windows XP 128mb

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:11:53.333

RAM越多越好，处理器和gpu无关紧要。我的工作站有 8 GB 的 RAM，它可以运行 tomcat 服务器、数据库服务器、带有开发附加组件的 firefox（它有时可以使用大约 1 GB 的 RAM）、Eclipse 和其他一些工具。

您拥有的 RAM 越多，您可以为在 jvm 中执行的应用程序提供的内存越多（-xmx 和 -xms 选项）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:17:30.287

首先，您必须考虑要运行的 JVM 版本，对于任何其他软件，版本越高级，它“吃掉”的资源就越多，因此假设您使用 JVM 7，请考虑 Oracle 网站上的这张表

[Java 系统要求](http://www.java.com/en/download/help/sysreq.xml)

如果您有任何其他问题，请随时提出。

# jquery - 使用 if 或

> ID：11395668
> 
> 赞同：1
> 
> 时间：2012-07-09T13:07:02.607
> 
> 标签：jquery, filter

我正在尝试让产品过滤器工作，它几乎就在那里。我希望用户能够选择衬衫，然后显示所有衬衫，然后显示蓝色，显示所有蓝色衬衫，然后在他们检查粉红色时显示所有蓝色和粉红色衬衫。目前我只能让它显示所有条件是否为真，但我希望它显示任何数据集是否为真

我的小提琴在这里

[http://jsfiddle.net/ktcle/2keVN/2/](http://jsfiddle.net/ktcle/2keVN/2/)

```
$('div.tags').delegate('input[type=checkbox]', 'change', function()
{
var $lis = $('.results > li'),
    $checked = $('input:checked');

if ($checked.length)
{
    var selector = $checked.map(function ()
    {
        return '.' + $(this).attr('rel');
    }).get().join('');

    $lis.hide().filter(selector).show().addClass("show");     
}
else
{
    $lis.show().removeClass("show");
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:00:39.110

试试这个：

**编辑：**我已经修改了能够专门过滤的方法。这样，您就可以过滤绿色或粉色的衬衫和裤子。

```
$(function(){
    $('div.tags').delegate('input[type=checkbox]', 'change', function()
    {
        var $lis = $('.results > li'),
            $types = $('.filter-grp-type input:checked'),
            $colors = $('.filter-grp-color input:checked');

        if ($types.length)
        {
            var selector = $types.map(function ()
            {
                return '.' + $(this).attr('rel');
            }).get().join(', ');

            $lis.hide().filter(selector).show();     
        }
        else
        {
            $lis.show();
        }

        $lis = $lis.filter(":visible");

        if ($colors.length)
        {
            var selector = $colors.map(function ()
            {
                return '.' + $(this).attr('rel');
            }).get().join(', ');

            $lis.hide().filter(selector).show();     
        }
    });
}) 
```

当您构建“选择器”字符串时，您只是将它连接起来。然后，jQuery 将只过滤那些在您的选择器中具有所有类的项目。

我同意大卫托马斯的观点。而是使服装类型的选择相互排斥，即单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:03:47.650

我建议首先更改您的 HTML，以反映您只想选择一种服装类别（所以使用`<input type="radio" />`）：

```
 <div class="tags">
   <fieldset class="filter-grp">
    <label><input type="radio" rel="skirt" name="year" /> skirt </label><br>
    <label><input type="radio" rel="trousers" name="year" /> trousers </label><br>
    <label><input type="radio" rel="shirt" name="year" /> shirt </label><br>
    </fieldset>
  <br>
  <fieldset class="filter-grp">
    <label><input type="checkbox" rel="blue" name="type"  /> blue</label><br>
    <label><input type="checkbox" rel="pink" name="type"  /> pink</label><br>
    <label><input type="checkbox" rel="green" name="type"  /> green</label><br>
   </fieldset>
   <br>
</div>

<ul class="results">
   <li class="blue skirt"> blue skirt</li>
   <li class="pink shirt">pink shirt</li>
   <li class="pink skirt">pink skirt</li>
   <li class="blue shirt">blue shirt</li>
   <li class="blue trousers">blue trousers</li>
   <li class="green skirt">green skirt</li>
   <li class="blue shirt">blue shirt</li>
   <li class="pink trousers">pink trousers</li>
   <li class="blue trousers">blue trousers</li>
   <li class="blue skirt">blue skirt</li>
   <li class="green shirt">green shirt</li>
</ul>    ​ 
```

使用以下 jQuery：

```
$(function() {
    $('div.tags').delegate('input[type=checkbox],input[type=radio]', 'change', function() {
        var $lis = $('.results > li'),
            $category = $('input:radio:checked')
            .attr('rel'),
            $colors = $('input:checkbox:checked'),
            selectors = $colors.map(
                function(){
                    return '.' + $category + '.' + $(this).attr('rel');
                }).get().join(', ');
        if ($category.length && $colors.length) {
                        $lis
                            .hide()
                            .filter(selectors)
                            .show()
                            .addClass("show");
        }
        else {
            $lis.show().removeClass("show");
        }
    });
})​​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/2keVN/6/)。

# objective-c - 什么是 NSHeartBeatThread？

> ID：11395672
> 
> 赞同：5
> 
> 时间：2012-07-09T13:07:18.330
> 
> 标签：objective-c

我最近在 Instruments 中调试我的应用程序，其中一个线程是“NSHeartBeat”（或非常相似的东西）。我的方法中没有一个包含“heart”或“beat”这个词，所以我假设它是一个系统函数。它有什么作用？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T13:18:34.777

它动画进度指示器和默认按钮，也许其他的东西，我从来没有见过完整的列表（它没有记录）。查看[http://cocoadev.com/wiki/NSUIHeartBeat上的讨论](http://cocoadev.com/wiki/NSUIHeartBeat)

# android - 方向改变错误

> ID：11395673
> 
> 赞同：3
> 
> 时间：2012-07-09T13:07:18.637
> 
> 标签：android, android-orientation

我`setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);`在我的活动中使用。

如果我在活动之间进行更改，我的应用程序会在很短的时间内（例如大约 0.2 秒）变为横向模式。在 ladnscape 更改后，它会变回纵向，但这是一个非常烦人的错误。

为什么会这样？有没有更好的方法来限制应用程序仅使用 PORTRAIT 方向？

我不想要 0.2 秒的华丽方向变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:15:02.130

如果你希望你`Activities`一直`portrait`都在，你应该在你的每个标签中指定`android:screenOrientation:"portrait"`xml标签。`AndroidManifest.xml``<activity>`

# android - 无法从 Android 的图库中选择几张照片

> ID：11395680
> 
> 赞同：3
> 
> 时间：2012-07-09T13:07:39.433
> 
> 标签：android, cursor, gallery, uri

我正在从我的应用程序中调用默认图库应用程序来选择任何照片。下面是我从图库中获取所选图像路径的代码。除少数照片外，所有照片都可以正常工作。当我从图库中选择任何 PICASA 上传的照片时，应用程序会强制关闭。请帮我。

在 onActivityResult()....

```
 Uri selectedImage = data.getData();
            String[] filePathColumn = { MediaStore.Images.Media.DATA };
            Cursor cursor = getContentResolver().query(selectedImage, filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            String selectedPhotoPath = cursor.getString(columnIndex).trim();  <<--- NullPointerException here
            cursor.close(); 
            bitmap = BitmapFactory.decodeFile(selectedPhotoPath);
            ...... 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:26:08.947

有时会`data.getData();`返回 null，具体取决于您用于获取图片的应用程序。解决方法是在以下代码中使用上述代码`onActivityResult`：

```
/**
*Retrieves the path of the image that was chosen from the intent of getting photos from the galery
*/
Uri selectedImageUri = data.getData();

// OI FILE Manager
String filemanagerstring = selectedImageUri.getPath();

// MEDIA GALLERY
String filename = getImagePath(selectedImageUri);

String chosenPath;

if (filename != null) {

   chosenPath = filename;
} else {

   chosenPath = filemanagerstring;
} 
```

该变量`chosenPath`将具有所选图像的正确路径。方法`getImagePath()`是这样的：

```
public String getImagePath(Uri uri) {
    String selectedImagePath;
    // 1:MEDIA GALLERY --- query from MediaStore.Images.Media.DATA
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    if (cursor != null) {
        int column_index = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        cursor.moveToFirst();
        selectedImagePath = cursor.getString(column_index);
    } else {
        selectedImagePath = null;
    }

    if (selectedImagePath == null) {
        // 2:OI FILE Manager --- call method: uri.getPath()
        selectedImagePath = uri.getPath();
    }
    return selectedImagePath;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:17:55.683

请尝试以下代码

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
// TODO Auto-generated method stub
super.onActivityResult(requestCode, resultCode, data);

if (resultCode == RESULT_OK){
 Uri targetUri = data.getData();
 textTargetUri.setText(targetUri.toString());
 Bitmap bitmap;
 try {
  bitmap = BitmapFactory.decodeStream(getContentResolver().openInputStream(targetUri));
  ....
 } catch (FileNotFoundException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
}
} 
```

**或者**

请检查以下[链接](http://android-er.blogspot.in/2011/02/display-gallery-selected-image-using.html)

**或者**

[如何为我的应用从图库（SD 卡）中选择图像？](https://stackoverflow.com/questions/2507898/how-to-pick-a-image-from-gallery-sd-card-for-my-app-in-android)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-17T15:39:59.423

```
String ImagePath  = "";
private void setImageFromGallery(Intent data) {
    Uri selectedImage = data.getData();
    String[] filePathColumn = {MediaStore.Images.Media.DATA};
    Cursor cursor = this.getContentResolver().query(selectedImage, filePathColumn, null, null, null);
    if (cursor != null) {
        cursor.moveToFirst();
        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();
        Log.i("choosepath", "image" + picturePath);
        ImagePath = picturePath;
    } else {
        ImagePath = selectedImage.getPath();   // Add this line 
    }
   ImageView imgView = (ImageView) findViewById(R.id.imgView);
   imgView.setImageBitmap(BitmapFactory.decodeFile(imagePath));
    Bitmap bitmap = Utilities.rotateImage(pictureImagePath);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T09:30:19.550

当前的 Android 系统（第一个版本 -> 2.3.3 -> 甚至 4.4.2）看起来无法选择多个文件，因此您需要自定义库来执行此操作。

经过多次研究，我发现[`Custom Camera Gallery library`](https://github.com/mirrortowers/custom_camera_gallery_library/)已经可以帮助您做到这一点。

# php - 如何记住用户在网站上的登录信息

> ID：11395681
> 
> 赞同：0
> 
> 时间：2012-07-09T13:07:52.277
> 
> 标签：php, passwords, account

我正在尝试为我的网站创建用户帐户（存储偏好和数据），我想知道是否有人可以帮助我做两件事。

首先，我环顾四周，但似乎找不到任何关于为网站创建用户帐户的好资源（所有网络结果似乎都是关于计算机或服务器上的用户帐户），所以如果有人能建议一个好的资源来了解如何创建用户帐户，那将是很棒的。

其次，记住用户是否登录的最佳方式是什么？现在，我有一个数据库来存储用户的电子邮件、密码和其他数据。我想知道如何检查每个页面以查看用户是谁（在他们登录后）。我会为此使用cookie吗？

如果是这样，那将如何运作？cookie 会存储他们的用户名和密码吗？这似乎不太安全，但这是我目前能想到的唯一方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:42:27.313

我敢打赌，您可以找到一些资源来开发用户会员系统。

基本上你可以使用**session**和**cookies**。

您说得对，cookie 对于存储用户名和密码不是很安全，但是您只能存储一个带有用户 ID 的 cookie。

## 资源

[PHP 的用户成员资格| 网易+](http://net.tutsplus.com/tutorials/php/user-membership-with-php/)

[MySQL 和 PHP 用户帐户 | 皮特的网页设计博客](http://pgiammarco.blogspot.co.il/2012/06/mysql-php-user-accounts-part-1.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:49:24.763

谷歌搜索[PHP 用户管理脚本](https://www.google.co.in/search?sourceid=chrome&ie=UTF-8&q=php+user+management+scripts)得到以下结果：

*   [免费 PHP 用户管理脚本：LOG.ME.IN](http://www.webresourcesdepot.com/free-php-user-management-script-log-me-in/)
*   [回购/简单用户](https://github.com/Repox/SimpleUsers)
*   [许多在 PHP.ResourceIndex.com](http://php.resourceindex.com/Complete_Scripts/User_Management/Password_Protection/)

尽管您可能需要根据您的要求自定义每一个。

当然，您需要查看[$_SESSION](http://php.net/manual/en/reserved.variables.session.php)和[$_COOKIE](http://www.php.net/manual/en/reserved.variables.cookies.php)。

# wpf - 判断一个 3D 对象是否被另一个 3D 对象隐藏

> ID：11395683
> 
> 赞同：1
> 
> 时间：2012-07-09T13:07:58.640
> 
> 标签：wpf, 3d

我在 Viewport3D 中有一些 GeometryModel3D 球，其中一些是可见的，其中一些被蓝色立方体隐藏。（尽管下面的图像是 2d 的，让我们假设所有对象都是 3D）

我想确定哪些红球是可见的，哪些是隐藏的。

我怎样才能做到这一点 ？

![在此处输入图像描述](../Images/e685d9952c5b755cc544dfe17a52501d.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:33:22.957

这个问题也称为[Occlusion Culling](http://www.gamasutra.com/view/feature/164660/sponsored_feature_next_generation_.php)，尽管您对计算被遮挡的图元感兴趣。鉴于您的场景条件，解决此问题的蛮力方法（假设您正在使用透视投影）是以下伪代码：

```
occludedSpheresCount = 0
spheres = {Set of spheres}
cubes = {Set of cubes}
normalizedCubes = {} 

# First, build the set of normalized cubes (it means, 
# take the cubes that are free in space and transform their  
# coordinates to values between [-1, -1, -1] and [1, 1, 1], they are the same
# cubes but now the coordinates are laying in that range 
# To do that, use the 
```

```
       投影矩阵
```

```
projectionMatrix = GetProjectionMatrix(perspectiveCamera)
for each cube in cubes do 
    Rect3D boundingBox = cube.Bounds()
    Rect3D normalizedBBox = projectionMatrix.transform(boundingBox)
    cubes_normalized.add(normalizedBBox)
end for

# Now search every sphere, normalize it's bounding box
# and check if it's been occluded by some normalized cube
for each sphere in spheres do
    Rect3D sphereBBox = sphere.Bounds() 
    Rect3D normalizedSphere = projectionMatrix.transform(sphereBBox)
    for each normalizedCube in normalizedCubes do
         x0 = normalizedCube.Location.X - (normalizedCube.Location.SizeX / 2)
         y0 = normalizedCube.Location.Y - (normalizedCube.Location.SizeY / 2)
         z0 = normalizedCube.Location.Z - (normalizedCube.Location.SizeZ / 2)

         xf = normalizedCube.Location.X + (normalizedCube.Location.SizeX / 2)
         yf = normalizedCube.Location.Y + (normalizedCube.Location.SizeY / 2)

         sx0 <- normalizedSphere.Location.X - (normalizedSphere.Location.SizeX / 2)
         sy0 <- normalizedSphere.Location.X - (normalizedSphere.Location.SizeY / 2)
         sz0 <- normalizedSphere.Location.X - (normalizedSphere.Location.SizeZ / 2)

         sxf <- normalizedSphere.Location.X + (normalizedSphere.Location.SizeX / 2)
         syf <- normalizedSphere.Location.X + (normalizedSphere.Location.SizeY / 2)

         # First, let's check that the normalized-sphere is behind the 
         # normalized-cube, to do that, let's compare their z-front values
         if z0 > sz0 then  
             # Now that we know that the sphere is behind the frontface of the cube 
             # lets check if it is fully contained inside the 
             # the normalized-cube, in that case, it is occluded

             if sx0 >= x0 and sxf <= xf and sy0 >= y0 and syf >= yf then
                  occludedSpheresCount++ 
                  # Here you can even avoid rendering the sphere altogether
             end if
         end if
    end for
end for 
```

获取 projectionMatrix 的一种方法是使用以下代码（从[此处](http://social.msdn.microsoft.com/Forums/en-SG/wpf/thread/4ca4ddc7-0f25-446c-a42c-3c0b3a178a73)提取）：

```
 private static Matrix3D GetProjectionMatrix(PerspectiveCamera camera, double aspectRatio)
    { 
        // This math is identical to what you find documented for
        // D3DXMatrixPerspectiveFovRH with the exception that in
        // WPF the camera's horizontal rather the vertical
        // field-of-view is specified.
        double hFoV = MathUtils.DegreesToRadians(camera.FieldOfView);
        double zn = camera.NearPlaneDistance;
        double zf = camera.FarPlaneDistance;
        double xScale = 1 / Math.Tan(hFoV / 2);
        double yScale = aspectRatio * xScale;
        double m33 = (zf == double.PositiveInfinity) ? -1 : (zf / (zn - zf));
        double m43 = zn * m33;
        return new Matrix3D(
            xScale, 0, 0, 0,
                 0, yScale, 0, 0,
                 0, 0, m33, -1,
                 0, 0, m43, 0);
    } 
```

这种方法的唯一缺点是在以下情况下：

```
     +---------------+--------------+
     | -|- |
     | / | \ |
     | | | | |
     | \ | / |
     | -|- |  
     +---------------+--------------+

或者
          在这里拦截
                  |
                  v
     +----------+--+--------------+
     | | -|- |
     | /| | \ |
     | | | | | |
     | \| | / |
     | | -|- |  
     +----------+--+--------------+

```

`Set{ Set{ cube1, cube2}, Set{cube3, cube4}, ... }`其中两个截断立方体遮挡球体，在这种情况下，当两个或多个立方体区域截断（可以在第一个循环中完成）时，您必须构建一组归一化立方体（ ）并且争用测试会更多复杂的。不知道您的程序中是否允许这样做（多维数据集拦截）

该算法是`O(n^2)`因为是一种蛮力方法，希望这可以为您提供最终解决方案的提示，如果您正在寻找一个更有效的更通用的解决方案，请使用类似[Hierarchical Z Buffering](http://www.gamasutra.com/view/feature/131801/occlusion_culling_algorithms.php?page=2)

# string - Clojure 中字符串向量的连接

> ID：11395691
> 
> 赞同：17
> 
> 时间：2012-07-09T13:08:29.643
> 
> 标签：string, vector, clojure

我想连接存储在向量中的字符串。例如，如果我`["a" "b" "c"]`在向量中有我想得到的结果`"abc"`。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-09T13:17:35.393

您可以使用`apply`以下`str`功能：

```
(apply str ["a" "b" "c"]) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-09T13:10:56.783

您可以为此使用[clojure.string 连接](http://clojuredocs.org/clojure_core/clojure.string/join)函数

```
(clojure.string/join ["a" "b" "c"]) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-10T08:47:10.933

这是 Clojure 的 reduce 可以使用的方式之一。请注意 Clojure 的 REPL 上的会话：

```
[dsm@localhost:~]$ clj
Clojure 1.4.0
user=> (reduce str ["a" "b" "c"])
"abc"
user=> 
```

# php - Drupal 7 强制激活菜单项

> ID：11395701
> 
> 赞同：0
> 
> 时间：2012-07-09T13:09:04.423
> 
> 标签：php, menu, drupal-7

我在菜单栏中有一个链接到的页面。在此页面上有一个自定义模块。在此页面上，用户可以单击来自另一个数据库的项目。当他们单击它时，他们会转到另一个页面，其中包含更多信息。当它们位于第二页时，菜单栏中没有活动按钮。在第二页上，我还有一个自定义模块。

您如何强制菜单栏中的按钮具有 .active 类或以其他方式使其具有活动布局按钮。

我使用 Drupal 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:58:00.650

我使用上下文模块来解决这个问题。

# php - 以编程方式自动填写和提交表单

> ID：11395702
> 
> 赞同：0
> 
> 时间：2012-07-09T13:09:06.813
> 
> 标签：php, javascript

我想知道我的 PHP 脚本是否可以导航到上面有 Web 表单的网页，填写字段并单击提交而无需人工干预。

有没有办法扫描页面、提取输入文本字段并提供值？

或者有没有一个软件可以做到这一点，如果不是PHP也没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:13:11.037

curl 是您要查找的内容，请查看此链接[http://php.net/manual/en/ref.curl.php](http://php.net/manual/en/ref.curl.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:32:07.970

有几种工具可以自动测试网页，例如[Selenium](http://seleniumhq.org/)和[Windmill](http://www.getwindmill.com/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:20:45.217

听起来您可以使用 curl，除非表单上有 csrf 保护。

> php 脚本导航到上面有 Web 表单的网页，填写字段并单击提交，无需人工干预。

如果您有时间并想尝试一种边缘脚本语言：

回到那天（高中），我们编写了自动脚本来点击谷歌广告并让我们的帐户被暂停=（

Autoit 可以控制光标和键盘输入并执行重复性任务

[http://www.autoitscript.com/site/](http://www.autoitscript.com/site/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T12:18:53.917

对于 PHP，[CURL](http://php.net/manual/en/ref.curl.php)可能是您的最佳选择。

根据我的经验，Perl 的 WWW::Mechanize 更易于使用。如果您有使用 Perl 的经验，您可能希望使用它。

# c# - 按找到的最大值搜索列表和排序列表c#

> ID：11395704
> 
> 赞同：1
> 
> 时间：2012-07-09T13:09:16.430
> 
> 标签：c#, linq

我想承认我在 LINQ 方面很弱。我有数据列表。我想按给定值搜索列表拳头，然后按最大出现次数对数据进行排序，这意味着行中的最大时间。

```
 List<SearchResult> list = new List<SearchResult>() { 
            new SearchResult(){ID=1,Title="Cat"},
            new SearchResult(){ID=2,Title="dog"},
            new SearchResult(){ID=3,Title="Tiger"},
            new SearchResult(){ID=4,Title="Cat"},
            new SearchResult(){ID=5,Title="cat"},
            new SearchResult(){ID=6,Title="dog"},
        }; 
```

如果我用**“狗猫”**之类的数据搜索和排序列表，那么输出将是

```
ID=1,Title=Cat
ID=4,Title=Cat
ID=5,Title=Cat
ID=2,Title=dog
ID=6,Title=dog 
```

所有 cat 将首先出现，因为这个 cat 关键字在所有行中找到了最大时间，然后 dog 找到了最大时间。

以下数据不会出现，因为它不在搜索词中

```
ID=3,Title=Tiger 
```

寻找解决方案。谢谢

## 更新部分代码

```
 List<SearchResult> list = new List<SearchResult>() { 
            new SearchResult(){ID=1,Title="Geo Prism 1995 - ABS #16213899"},
            new SearchResult(){ID=2,Title="Excavator JCB - ECU P/N: 728/35700"},
            new SearchResult(){ID=3,Title="Geo Prism 1995 - ABS #16213899"},
            new SearchResult(){ID=4,Title="JCB Excavator - ECU P/N: 728/35700"},
            new SearchResult(){ID=5,Title="Geo Prism 1995 - ABS #16213899"},
            new SearchResult(){ID=6,Title="dog"},
        };

        var to_search = new[] { "Geo", "JCB" };
        var result = list.Where(sr => to_search.Any(ts => String.Compare(ts, sr.Title, StringComparison.OrdinalIgnoreCase) == 0))
                         .GroupBy(sr => sr.Title.ToLower())
                         .OrderByDescending(g => g.Count());

        var matched = result.SelectMany(m => m);

        var completeList = matched.Concat(list.Except(matched));

        dataGridView2.DataSource = completeList.ToList(); 
```

我尝试在其他应用程序中使用您的逻辑，但它不起作用。根据逻辑，三行首先带有 GEO 关键字，然后接下来的 2 行带有 JCB，然后是无与伦比的其余部分。我需要在你的代码中改变什么。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:18:41.567

这将过滤您的列表并将其分组`Title`，按组的大小对组进行排序。

```
List<SearchResult> list = new List<SearchResult>() { 
    new SearchResult(){ID=1,Title="Cat"},
    new SearchResult(){ID=2,Title="dog"},
    new SearchResult(){ID=3,Title="Tiger"},
    new SearchResult(){ID=4,Title="Cat"},
    new SearchResult(){ID=5,Title="cat"},
    new SearchResult(){ID=6,Title="dog"},
};

var to_search = new[] { "cat", "dog" };

var result = list.Where(sr => to_search.Any(ts => String.Compare(ts, sr.Title, StringComparison.OrdinalIgnoreCase) == 0))
                 .GroupBy(sr => sr.Title.ToLower())
                 .OrderByDescending(g => g.Count());

foreach (var group in result)
    foreach (var element in group)
        Debug.WriteLine(String.Format("ID={0},Title={1}", element.ID, element.Title)); 
```

**输出：**

```
ID=1,Title=Cat
ID=4,Title=Cat
ID=5,Title=cat
ID=2,Title=dog
ID=6,Title=dog 
```

如果您不关心实际的分组，可以使用[SelectMany](http://msdn.microsoft.com/en-us/library/bb534336.aspx)展平组列表。

（请注意，此代码将忽略 的大小写`Title`。我不知道这是您想要的还是代码中的拼写错误：您正在使用`cat`and `Cat`，并且在您的输出中它只是`Cat`，但`dog`没有大写。）

**编辑：**

要获取不匹配的项目，您可以使用[except](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var unmatched = list.Except(result.SelectMany(m => m)); // beware! contains the tiger! 
```

**编辑2：**

```
var result = list.Where(sr => to_search.Any(ts => String.Compare(ts, sr.Title, StringComparison.OrdinalIgnoreCase) == 0))
                 .GroupBy(sr => sr.Title.ToLower())
                 .OrderByDescending(g => g.Count());

var matched = result.SelectMany(m => m);

var completeList = matched.Concat(list.Except(matched));

foreach (var element in completeList)
    Debug.WriteLine(String.Format("ID={0},Title={1}", element.ID, element.Title)); 
```

**输出**

```
ID=1,Title=Cat
ID=4,Title=Cat
ID=5,Title=cat
ID=2,Title=dog
ID=6,Title=dog
ID=3,Title=Tiger 
```

**编辑 3**

```
var result = from searchResult in list
             let key_string = to_search.FirstOrDefault(ts => searchResult.Title.ToLower().Contains(ts.ToLower()))
             group searchResult by key_string into Group
             orderby Group.Count() descending
             select Group; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:17:56.953

我认为以下应该可以解决问题。

```
var searchText = "cat dog";
var searchResult = list
  .Select(i => new { 
       Item = i, 
       Count = list.Count(x => string.Compare(x.Title, i.Title, true) == 0)  // Add counter
  })
  .Where(i => searchText.Contains(i.Item.Title))
  .OrderByDescending(i => i.Count)
  .ThenBy(i => i.Item.ID)
  .ToList() 
```

**更新**

如果最后想要不匹配的数据，则需要在匿名对象中添加另一个排序属性。

```
var searchText = "cat dog";
var searchResult = list
  .Select(i => new { 
       Item = i, 
       Matched = searchText.Contains(i.Item.Title.ToUpper()),
       Count = list.Count(x => string.Compare(x.Title, i.Title, true) == 0)  // Add counter
  })
  .OrderByDescending(i => i.Matched)
  .ThenBy(i => i.Count)
  .ThenBy(i => i.Item.ID)
  .ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:21:44.033

```
IEnumerable<string> pets = new[] { "Cat", "dog", "Tiger", "Cat", "cat", "dog" };
var test = pets
    .Where(p=>p.ToUpperInvariant() == "CAT" || p.ToUpperInvariant() == "DOG")
    .GroupBy(p => p.ToUpperInvariant())
    .OrderByDescending(g => g.Count())
    .SelectMany(p => p);

foreach (string pet in test)
    Console.WriteLine(pet); 
```

# magento - 将 Magento 1.6.2 升级到 1.7.0.1

> ID：11395706
> 
> 赞同：1
> 
> 时间：2012-07-09T13:09:26.927
> 
> 标签：magento, upgrade

> **可能重复：**
> [magento 从 1.6.2 升级到 1.7.0.2 - 数据库基础会改变吗？](https://stackoverflow.com/questions/11372903/magento-upgrade-from-1-6-2-to-1-7-0-2-will-the-db-base-be-changed)

对于大多数人来说，这可能非常简单，但我正在努力将运行 1.6.2 的稳定开发商店升级到最新版本的 1.7.0.1，没有插件和很少的产品。

使用 Magento Connect 时，我选择了一个或多个软件包进行升级，每个人都给我一个错误：

“连接错误：包 community/Mage_Downloader 1.7.0.0 与：community/Mage_All_Latest 1.6.2.0 冲突”

这是可以理解的，因为那里已经安装了 Magento……但我想升级它！

现在，我四处搜索，但找不到修复的具体问题。我在这里错过了一个简单的步骤吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T16:44:41.877

单独选择 Mage_All_Latest，升级所有 Magento 核心安装。因此，如果您想升级整个核心安装，您只需要选择那个。如果您想安装特定的核心部件，请选择单个部件，而不是 Mage_All_Latest。你不需要两者。

在我升级到 1.7.0.2 时，我遇到了一些依赖警告，即使我只选择了 Mage_All_Latest 升级。如果发生这种情况，您可以按照收到的警告轻松进行单个部件的安装。

# android - Android imageview到位图

> ID：11395712
> 
> 赞同：0
> 
> 时间：2012-07-09T13:09:39.293
> 
> 标签：android, gridview, bitmap, imageview

我有一个应用程序，我在其中使用函数将颜色更改为另一种颜色。该函数仅适用于位图，但效果很好。

我想在 gridview 中实现相同的功能。因此，我将图像视图转换为位图，应用该功能，并将位图重新转换为图像视图，但没有任何反应。

```
//here i get the picture to the imageview
imageView = new ImageView(mContext);
imageView.setScaleType(ImageView.ScaleType.CENTER);
imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
imageView.setAdjustViewBounds(true);
imageView.setMaxWidth(20);
imageView.setMaxHeight(100);
imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
imageView.setPadding(10,10,10,10);       

ImageView imgv=new ImageView(mContext);
imgv.buildDrawingCache();
Bitmap bmap = imgv.getDrawingCache();
Bitmap bmap2 = imgv.getDrawingCache();

bmap=Square3.repleceIntervalColor(bmap2, 240, 255, 240, 255, 240, 255,Project.getColor());

imageView.setImageBitmap(bmap); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T13:01:36.903

问题解决了。代码只是正确的，它在错误的地方。整个代码应该在`imageView.setImageResource(mThumbIds4[position]);`.

# linux - 在 linux 上使用静态链接构建应用程序是否明智？

> ID：11395714
> 
> 赞同：0
> 
> 时间：2012-07-09T13:09:51.850
> 
> 标签：linux, gcc, g++, static-libraries, static-linking

我需要构建一个在嵌入式供应商提供的 linux 版本上运行的应用程序。根据文档，它具有 libc 版本 2.8.90。我在桌面上用 C++ 构建了一个简单的应用程序，并将二进制文件连同它所链接的库的副本一起复制到硬件中。为了消除链接到不同版本库的任何潜在冲突，我考虑尝试静态链接到库。经过一番研究，我发现了[以下问题和答案](https://stackoverflow.com/questions/725472/static-link-of-shared-library-function-in-gcc)通读后给人的印象是静态链接不是一件好事。我在这里（或到目前为止其他任何地方）找不到的是一个简单的解释，解释了为什么这似乎不受欢迎。在我看来（几乎是 linux 的新手）是一种解决我将可执行文件捆绑为单个包并在我的硬件上运行它的问题的方法，但显然这似乎被认为是一个坏主意，但有人可以解释一下为什么？？

显然我知道这会导致我的二进制文件膨胀，但我并不担心。此外，我知道许可问题，但我并不特别关心这方面的事情。这不是商业应用程序，所以我*认为*它不适用于我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:12:25.893

正如您所期望的那样，其优点是无需安装其他依赖项即可工作的单个二进制文件，并且您可以轻松地四处移动。

缺点是如果链接库有更新（例如安全修复）以及许可问题（如您所述），则需要重新编译整个应用程序的大小和需要重新编译。

权衡取舍。如果它解决了你的问题，那就去吧。

# python - mysql用户权限与fabric python regex

> ID：11395716
> 
> 赞同：0
> 
> 时间：2012-07-09T13:10:06.957
> 
> 标签：python, regex

> **可能重复：**
> [python fabric mysql 权限](https://stackoverflow.com/questions/11392721/python-fabric-mysql-privileges)

试图用fabric设置mysql用户权限。

任何想法 ？非常感谢 ！

```
run('mysql -u %s -p%s -e "grant all on %s.* to '%s\'@\'localhost' identified by 'PASSWORD'"' % (user, dbpasswd, account, account))

SyntaxError: unexpected character after line continuation character 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:26:21.210

尝试将您的线路更改为：

```
run('mysql -u %s -p%s -e "grant all on %s.* to \'%s\'@\'localhost\' identified by \'PASSWORD\'"' % (user, dbpasswd, account, account)) 
```

# extjs - Why do I get the error in extjs, "gridstore is not a constructor"?

> ID：11395725
> 
> 赞同：-1
> 
> 时间：2012-07-09T13:10:41.573
> 
> 标签：extjs, grid, row, add

I have a button with a handler. In this handler I call for this function:

```
onAddClick = function() {
gridStore = Ext.getStore('gridEdit');
var rec = new gridStore({
stopCode: '',
stopOrder: '',
stopId: ''
    }), edit = this.editing;

    edit.cancelEdit();
    this.store.insert(0, rec);
    edit.startEditByPosition({
        row: 0,
        column: 1
    });
}; 
```

When I click on the button it will give the error message: "gridStore is not a constructor". Why is this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:45:01.277

您的代码中有很多错误，首先，一旦您使用 Ext.getStore，它会返回一个具有该 id 的商店（该商店已创建）。所以gridStore（全局变量，因为你没有使用var）将指向那个商店。所以不需要new。如果要添加自定义配置，只需使用 Ext.create()。var 'rec' .. 应该是商店的记录吗？

我不知道你到底想做什么，但是：

-gridStore 是实际的存储；

- 可以通过 modelManager 或 Ext.create 和模型类创建记录。

# html - 粗体与粗体、斜体与强调：html5 匹配

> ID：11395732
> 
> 赞同：0
> 
> 时间：2012-07-09T13:10:55.240
> 
> 标签：html, semantic-markup

经过一番潜伏，我明白的是：

`<b>`应该用于没有语义重要性的标记文本，`<strong>`用于强语义重要性

`<i>`应该用于语言变化（以任何形式），`<em>`用于`<em>some damned stress emphasis!!!!</em>`（不是语言变化，而是你会更强调发音的东西）

它是否正确？你能用简单的英语写一些例子吗？！

先感谢您

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:20:44.213

您的示例基本上是正确的，尽管许多人会认为您的示例`<B>`和`<I>`标记应该在 CSS 中完成。画外音软件、盲文阅读器和其他辅助工具不会向残疾人提及粗体文本，但它们会传达重点。

# xslt - 如何从 XSLT 变量中创建的节点中求和（）值

> ID：11395738
> 
> 赞同：2
> 
> 时间：2012-07-09T13:11:10.883
> 
> 标签：xslt, xpath, sum, node-set

我无法对变量中的值求和。

XSLT 源代码

```
 <xsl:variable name="amountIn" xml:space="preserve">
 <values>
 <xsl:for-each select="ext:node-set($finData)//child::balance/@in">
 <value><xsl:value-of select="."/></value>
 </xsl:for-each>
 </values>
 </xsl:variable> 
```

XML 源：

```
 <source>
 <balance dpt="-1" diff="0,00" out="555777,00" in="555777,00" acnt="2120"/> 
 <balance dpt="-1" diff="0,00" out="777778,00" in="777778,00" acnt="2240"/> 
 <balance dpt="-1" diff="0,00" out="878787,00" in="878787,00" acnt="2380"/> 
 <balance dpt="-1" diff="0,00" out="87878787,00" in="87878787,00" acnt="2400"/>
 </source> 
```

我希望这会给我结果，但我得到的只是“NaN”

```
 <xsl:value-of select="sum(ext:node-set($amountIn)/values/value)"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:23:05.803

你得到 NAN 是因为 , 在数字中使用翻译数字将其更改为 . 应该管用！

```
 <xsl:variable name="amountIn" xml:space="preserve">
 <values>
 <xsl:for-each select="ext:node-set($finData)//child::balance/@in">
 <value><xsl:value-of select="translate(.,',','.')"/></value>
 </xsl:for-each>
 </values>
 </xsl:variable> 
```

# javascript - 使用 Javascript 将不同的图表链接在一起

> ID：11395741
> 
> 赞同：2
> 
> 时间：2012-07-09T13:11:18.500
> 
> 标签：javascript, api, charts, jqplot, pie-chart

我正在寻找一个 JavaScript 库，通过它我可以创建链接到其他图表或嵌入它们的图表。例如，假设我们有一个饼图，如果有人点击饼图的切片，就会出现另一个不同的图表。

我目前正在使用 Google Charts API 和 jqPlot，但到目前为止，当有人单击图表元素时，我还没有找到添加链接或 js 函数的方法。任何图书馆的任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:15:40.480

它们都允许事件处理

这是一个

[http://g.raphaeljs.com/piechart2.html](http://g.raphaeljs.com/piechart2.html)

# php - 在 PHP 中计算和显示剩余天数时遇到问题

> ID：11395743
> 
> 赞同：0
> 
> 时间：2012-07-09T13:11:26.733
> 
> 标签：php, datetime, date, time

我的数据库中存储了两个变量，其中包含以下数据：

```
$date_published = 2012-05-04 00:00:00; //Straight from DB datetime field
$advert_duration = 15; 
```

我想在广告发布之日起 15 天内展示广告。为此，我需要计算出时差。

我已经在网上阅读了有关计算时差的各个地方，并提出了以下代码

在我尝试计算公式时，我似乎无法计算 $now - 今天的日期、$date_published 和 $advert_duration 之间的差异。我无法得到正确的结果：

```
function days_left($date_published, $advert_duration){

    $date = new DateTime($date_published);

    $now = new DateTime();

    $days_elapsed = $date->diff($now)->format("%d");

    $days_left = $advert_duration - $days_elapsed;

    return $days_left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:41:19.497

```
function getDaysLeft( $date, $duration )
{
    // create $date and modify it by $duration
    $date = new DateTime( $date );
    $date->modify( sprintf( '+%d days', $duration ) );

    // calculate the difference
    $now = new DateTime();
    $daysElapsed = (int) $now->diff( $date )->format( '%a' );

    // set to negative value, if modified $date is before $now
    if( $date < $now )
    {
        $daysElapsed = $daysElapsed * -1;
    }
    return $daysElapsed;
}

var_dump(
    getDaysLeft( '2012-05-04 00:00:00', 15 ),
    getDaysLeft( '2012-07-04 00:00:00', 15 )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:21:02.177

如果您从数据库中获取您的广告，您可以简单地使用[日期函数](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)来计算：

```
 WHERE DATE_SUB(CURDATE(),INTERVAL 15 DAY) >= date 
```

或者您可以在 PHP 中执行此操作（您将获得一个 UNIX 时间戳）：

```
 $date = strtotime('+15 days', strtotime($date_published)); 
```

# c# - 将报告逻辑移动到 .NET 代码中：发布修复？

> ID：11395744
> 
> 赞同：3
> 
> 时间：2012-07-09T13:11:32.077
> 
> 标签：c#, .net, visual-studio-2010, reporting

目前，我们所有的报告都写在存储过程中。我们希望开始将其从 SQL 平台移开，而是将大部分逻辑集中在 .NET 代码中。原因包括使用我们的 ORM 实体、易于调试、并行处理、与业务逻辑更加统一等。

我们面临的问题是，通过将报表逻辑移动到 .NET 代码中，我们无法像在生产环境中运行脚本那样轻松地部署支持修复。发布二进制文件意味着整个企业必须停止使用我们的应用程序，这在办公时间几乎是不可能的。

一种解决方案是将每个报告分离到一个新项目中并仅发布该 DLL。问题在于我们有超过 500 份报告。维持这将是一场噩梦。

有没有人遇到过类似的事情或有任何其他解决方案来解决这个问题？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:18:02.287

为什么不使用报告服务？它就是为此而生的！您甚至可以培训业务人员（非开发人员）为您创建报告并发布。用户可以利用的功能太多了。认证/授权、订阅、导出（PDF、Excel、Word）等

如果我是你，我不会投资重建 Reporting Services。作为应用程序或“代码”的一部分，我总是不去写报告。

如果您真的非常想这样做（我完全认为您不应该这样做），那么我将开发一个单独的服务来生成您可以从主应用程序调用的报告（在单独的端点上）。当您需要更新时，在中间放置一个存储“报告请求”的队列，并且可以在重新启动后处理请求。

其他选择是动态加载程序集。让 filewatcher 监视一个文件夹，一旦有新的 dll 动态加载它。卸货更困难。您可以在不太忙时重新启动服务以从内存中删除旧报告，或者您需要创建可以卸载的单独应用程序域。

有很多选择，但同样，您将浪费时间构建和测试自定义报告框架。我会选择纯 SQL，即使你真的喜欢 C#，这样你就可以雇佣一个可以创建报告而不是开发人员的 BI 人员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:31:45.800

我非常同意@bart 的回答。我的第一反应是，这似乎是一种不必要的改造。

但是，如果您确实需要 .net 代码和声明性代码的便利性，那么为什么不使用基于 DLR 的语言，例如 Iron python？

我们已经在数据库中存储了 Iron python 并按需加载它。一旦 jitted 它与任何非基于 dlr 的代码没有什么不同，部署修复程序就是一个梦想。

# .net - 使用 .net 代码每小时执行一次存储过程

> ID：11395750
> 
> 赞同：0
> 
> 时间：2012-07-09T13:11:49.003
> 
> 标签：.net, sql, stored-procedures

如何使用 .net 代码每隔一小时执行一次存储过程？

（存储过程应每隔一小时自动执行一次）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:20:09.463

[创建 SQL Server 代理作业](http://msdn.microsoft.com/en-us/library/ms190268.aspx)

对于此类任务，.net 进程在内存方面过于昂贵。

如果您确实需要运行 .net 应用程序，请注意计划任务。Windows 任务计划程序非常适合此类任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:14:40.087

首先，您需要编写一个[Windows 服务](http://msdn.microsoft.com/en-us/library/aa984464(v=vs.71).aspx)并将其设置为每小时运行一次。

从 c# 代码调用存储过程可以[像这样](https://stackoverflow.com/questions/1260952/how-to-execute-a-stored-procedure-from-c-sharp-program)完成。

我自己没有发布任何代码，因为我在您的问题中也找不到任何代码。一点点努力就会让你走得更远

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:34:17.950

正如所评论的，最好的选择是创建一个 SQL 代理作业。从 Microsoft MSDN，创建 SQL Server 代理作业：

1.  执行 sp_add_job 以创建作业。
2.  执行 sp_add_jobstep 创建一个或多个作业步骤。
3.  执行 sp_add_schedule 以创建计划。
4.  执行 sp_attach_schedule 以将调度附加到作业。
5.  执行 sp_add_jobserver 为作业设置服务器。

[更多关于这个主题](http://technet.microsoft.com/en-us/library/ms181153%28SQL.105%29.aspx)

# dynamics-crm-2011 - CRM 2011 图表 - 如何在图例中显示所有值？

> ID：11395760
> 
> 赞同：2
> 
> 时间：2012-07-09T13:12:17.720
> 
> 标签：dynamics-crm-2011, asp.net-charts, fetchxml

使用默认的 CRM 2011 Opportunities by Sales Stage Funnel Chart，即使没有每个阶段的数据，如何让它显示图例中的所有阶段？这似乎是一个简单的问题，但我很难过。

Chart 仅显示 Fetch 检索到的数据，Fetch 不一定每个阶段都至少有一个记录。此外，漏斗图不能有多个系列。

这是我想出的，但它不能用作漏斗图。对于这种类型的数据，至少通过布局交换到雷达图是毫无价值的。

```
<visualization>
  <visualizationid>{BA88CAC2-637F-E011-8E24-00155D840900}</visualizationid>
  <name>Opportunities by Sales Stage</name>
  <primaryentitytypecode>opportunity</primaryentitytypecode>
  <datadescription>
    <datadefinition>
      <fetchcollection>
        <fetch mapping="logical" aggregate="true">
            <entity name="opportunity">
                <attribute alias="aggregate_column_1" name="opportunityid" aggregate="count" />
                <attribute groupby="true" alias="groupby_column" name="salesstagecode">
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="1" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_2" name="opportunityid" aggregate="count">
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="200000" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_3" name="opportunityid" aggregate="count">
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="200001" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_4" name="opportunityid" aggregate="count" >
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="200002" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_5" name="opportunityid" aggregate="count">
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="100000000" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_6" name="opportunityid" aggregate="count">
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="100000001" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_7" name="opportunityid" aggregate="count" >
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="100000002" />
                    </filter>
                </attribute>
                <attribute alias="aggregate_column_8" name="opportunityid" aggregate="count">
                    <filter type="or">
                        <condition attribute="salesstagecode" operator="eq" value="100000003" />
                    </filter>
                </attribute>
            </entity>
        </fetch>
      </fetchcollection>
      <categorycollection>
        <category>
          <measurecollection>
            <measure alias="aggregate_column_1" />
          </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_2" />
            </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_3" />
            </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_4" />
            </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_5" />
            </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_6" />
            </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_7" />
            </measurecollection>
            <measurecollection>
                <measure alias="aggregate_column_8" />
            </measurecollection>
        </category>
      </categorycollection>
    </datadefinition>
  </datadescription>
  <presentationdescription>
    <Chart Palette="None" PaletteCustomColors="55,118,193; 197,56,52; 149,189,66; 117,82,160; 49,171,204; 255,136,35; 97,142,206; 209,98,96; 168,203,104; 142,116,178; 93,186,215; 255,155,83">
      <Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,1" Color="55,118,193" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,200000" Color="197,56,52" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,200001" Color="149,189,66" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,200002" Color="117,82,160" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,100000000" Color="49,171,204" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,100000001" Color="255,136,35" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,100000002" Color="97,142,206" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
          <Series ChartType="Funnel" Name="o:salesstagecode,100000003" Color="209,98,96" IsValueShownAsLabel="true" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="FunnelLabelStyle=Outside, FunnelNeckHeight=0, FunnelPointGap=1, FunnelNeckWidth=5 ">
              <SmartLabelStyle Enabled="True" />
          </Series>
      </Series>
      <ChartAreas>
        <ChartArea>
          <Area3DStyle Enable3D="True" />
        </ChartArea>
      </ChartAreas>
      <Legends>
        <Legend Alignment="Center" LegendStyle="Table" Docking="right" IsEquallySpacedItems="True" Font="{0}, 11px" ShadowColor="0, 0, 0, 0" ForeColor="59, 59, 59" />
      </Legends>
      <Titles>
        <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="0, 0, 0"></Title>
      </Titles>
    </Chart>
  </presentationdescription>
  <isdefault>false</isdefault>
</visualization> 
```

有没有人有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T22:14:54.880

您的方法行不通，因为正如您所提到的，漏斗图很遗憾不允许多个系列。如果是这样，您还需要在每个属性和过滤器周围添加标签，以便过滤器工作。

我假设您的漏斗图显示了每个阶段的总和，因此您可以为每个阶段添加一个虚拟记录，并确保这些记录包含在您的视图中。在虚拟记录上，这些值为 0，因此它们不会对总和做出贡献。包含时，您只需要对 Advanced Find 有一点创意。他们。

您可以在此处查看添加虚拟记录的更高级方法[http://crmchartguy.wordpress.com/2013/01/23/include-records-with-no-value-in-charts/](http://crmchartguy.wordpress.com/2013/01/23/include-records-with-no-value-in-charts/)

如果您有一个堆积柱形图，那么您对 ​​xml 采用的方法将起作用，尽管您需要添加上述标签。你可以在这里看到一个例子[http://crmchartguy.wordpress.com/2013/03/10/aggregate-total-on-top-of-stacked-column-charts-or-bar-charts-in-ms- CRM-2011/](http://crmchartguy.wordpress.com/2013/03/10/aggregate-total-on-top-of-stacked-column-charts-or-bar-charts-in-ms-crm-2011/)

# android - 运行应用程序时在相对布局中找不到资源异常

> ID：11395768
> 
> 赞同：0
> 
> 时间：2012-07-09T13:12:32.243
> 
> 标签：android

我正在创建相对布局，它看起来很好，当时没有给出任何错误。但是当我尝试运行此应用程序时，我在运行时遇到错误，如下所述。

错误是：

```
 07-03 23:04:55.420: D/AndroidRuntime(20456): Shutting down VM
    07-03 23:04:55.430: W/dalvikvm(20456): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
    07-03 23:04:55.491: E/AndroidRuntime(20456): FATAL EXCEPTION: main
    07-03 23:04:55.491: E/AndroidRuntime(20456): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.customdialog/com.customdialog.CustomDialogExample}: android.view.InflateException: Binary XML file line #3: Error inflating class android.widget.RelativeLayout
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.os.Handler.dispatchMessage(Handler.java:99)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.os.Looper.loop(Looper.java:123)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.ActivityThread.main(ActivityThread.java:4627)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at java.lang.reflect.Method.invokeNative(Native Method)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at java.lang.reflect.Method.invoke(Method.java:521)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at dalvik.system.NativeStart.main(Native Method)
    07-03 23:04:55.491: E/AndroidRuntime(20456): Caused by: android.view.InflateException: Binary XML file line #3: Error inflating class android.widget.RelativeLayout
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.LayoutInflater.createView(LayoutInflater.java:513)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:563)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.LayoutInflater.inflate(LayoutInflater.java:385)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.Dialog.setContentView(Dialog.java:421)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at com.customdialog.CustomizeDialog.<init>(CustomizeDialog.java:24)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at com.customdialog.CustomDialogExample.onCreate(CustomDialogExample.java:16)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    ... 11 more
    07-03 23:04:55.491: E/AndroidRuntime(20456): Caused by: java.lang.reflect.InvocationTargetException
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.widget.RelativeLayout.<init>(RelativeLayout.java:170)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at java.lang.reflect.Constructor.constructNative(Native Method)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.LayoutInflater.createView(LayoutInflater.java:500)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    ... 22 more
    07-03 23:04:55.491: E/AndroidRuntime(20456): Caused by: android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x1/d=0x7f06000b a=-1 r=0x7f06000b}
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.content.res.Resources.loadDrawable(Resources.java:1681)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.View.<init>(View.java:1885)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.View.<init>(View.java:1834)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    at android.view.ViewGroup.<init>(ViewGroup.java:285)
    07-03 23:04:55.491: E/AndroidRuntime(20456):    ... 26 more 
```

这是我的 CustomDialogExample 类。

```
 public class CustomDialogExample extends Activity {
    /** Called when the activity is first created. */
        CustomizeDialog customizeDialog;
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    /** Display Custom Dialog */
    customizeDialog = new CustomizeDialog(CustomDialogExample.this);
    Log.i("Log", "show method called");
    customizeDialog.show();

    }
    } 
```

这是创建对话框的 CustomizeDialog.class。

```
public class CustomizeDialog extends Dialog{

    Button dialogButtonYes;
    Button dialogButtonNo;
    TextView textView,titleText,customtitle;
    public CustomizeDialog(Context context){
        super(context);

        requestWindowFeature(Window.FEATURE_NO_TITLE);

        /** Design the dialog in main.xml file */
        setContentView(R.layout.relative);
        dialogButtonYes = (Button) findViewById(R.id.buttonCustomDialogYes);
        dialogButtonNo = (Button) findViewById(R.id.buttonCustomDialogNo);
        textView = (TextView) findViewById(R.id.textViewCustomTitle);
        //customtitle.setText(title);
        textView.setText("ffg");
}
} 
```

而relative.xml布局xml文件为：

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@style/HeadingTheme"
    android:layout_centerHorizontal="true" >
    <TextView
        android:id="@+id/textViewCustomTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:text="ABCD"/>
    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textViewCustomTitle"
        android:orientation="horizontal"
        android:paddingBottom="1.0dip"
        android:paddingLeft="4.0dip"
        android:paddingRight="4.0dip"
        android:paddingTop="5.0dip" >
        <Button
            android:id="@+id/buttonCustomDialogYes"
            android:layout_width="0.0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:text="Yes" />
        <Button
        android:id="@+id/buttonCustomDialogNo"
           android:layout_width="0.0dp"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:text="No" />
    </LinearLayout>
</RelativeLayout> 
```

请让我知道是否有人遇到此问题以及他们试图解决此问题的解决方案

提前致谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:21:00.897

我认为这是在抱怨你的背景（`android:background`）。

```
Resource is not a drawable. 
```

尝试从您的 RelativeLayout 中删除该属性，以确保这是问题所在。如果是这样，请检查给定资源的情况。

# mfc - 单击项目时未触发 CTreeCtrl TVN_SELCHANGED

> ID：11395774
> 
> 赞同：0
> 
> 时间：2012-07-09T13:12:54.323
> 
> 标签：mfc

我在许多计算机 (000) 上安装了一个现有的 MFC 应用程序。一位用户安装了当前版本并报告了表明在树控件中选择项目时未触发 TVN_SELCHANGED 事件的症状。计算机配置（带有最新补丁的最新 Windows 7 等）没有什么奇怪的，其他一切似乎都按设计工作。

重要的是，在几天前系统重新启动之前，该应用程序运行良好。该应用程序是完全独立的（MFC 静态链接），没有运行时 DLL 或 COM 组件。

问题：任何人都可以解释为什么 TVN_SELCHANGED 事件可能不会在某些计算机配置上触发（即特定版本的 MS Office、IE 或 .NET Framework 存在、不存在、通用控件清单版本等） ?)

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:14:56.820

如果您真的认为 TVN_SELCHANGED 没有被触发，请尝试运行 Spy++ 并查看报告的内容。其他使用树视图的程序是否正常工作？

我的猜测是，像 TVN_SELCHANGED 这样基本的东西工作得很好，但应用程序中的其他东西不起作用（即开发人员代码），只是让它看起来像 sel 改变并没有发生。

# c# - 清理绳子？有没有更好的方法呢？

> ID：11395775
> 
> 赞同：27
> 
> 时间：2012-07-09T13:12:54.670
> 
> 标签：c#, asp.net, string, linq

我正在使用这种方法来清理字符串

```
public static string CleanString(string dirtyString)
{
    string removeChars = " ?&^$#@!()+-,:;<>’\'-_*";
    string result = dirtyString;

    foreach (char c in removeChars)
    {
        result = result.Replace(c.ToString(), string.Empty);
    }

    return result;
} 
```

这种方法效果很好。但是这种方法存在性能故障。每次我传递字符串时，每个字符都会进入循环，如果我有一个大字符串，那么返回对象将花费太多时间。

有没有其他更好的方法来做同样的事情？就像在 LINQ 或 JQUERY / Javascript 中一样

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-07-09T13:29:48.343

好的，考虑以下测试：

```
public class CleanString
{
    //by MSDN http://msdn.microsoft.com/en-us/library/844skk0h(v=vs.71).aspx
    public static string UseRegex(string strIn)
    {
        // Replace invalid characters with empty strings.
        return Regex.Replace(strIn, @"[^\w\.@-]", "");
    }

    // by Paolo Tedesco
    public static String UseStringBuilder(string strIn)
    {
        const string removeChars = " ?&^$#@!()+-,:;<>’\'-_*";
        // specify capacity of StringBuilder to avoid resizing
        StringBuilder sb = new StringBuilder(strIn.Length);
        foreach (char x in strIn.Where(c => !removeChars.Contains(c)))
        {
            sb.Append(x);
        }
        return sb.ToString();
    }

    // by Paolo Tedesco, but using a HashSet
    public static String UseStringBuilderWithHashSet(string strIn)
    {
        var hashSet = new HashSet<char>(" ?&^$#@!()+-,:;<>’\'-_*");
        // specify capacity of StringBuilder to avoid resizing
        StringBuilder sb = new StringBuilder(strIn.Length);
        foreach (char x in strIn.Where(c => !hashSet.Contains(c)))
        {
            sb.Append(x);
        }
        return sb.ToString();
    }

    // by SteveDog
    public static string UseStringBuilderWithHashSet2(string dirtyString)
    {
        HashSet<char> removeChars = new HashSet<char>(" ?&^$#@!()+-,:;<>’\'-_*");
        StringBuilder result = new StringBuilder(dirtyString.Length);
        foreach (char c in dirtyString)
            if (removeChars.Contains(c))
                result.Append(c);
        return result.ToString();
    }

    // original by patel.milanb
    public static string UseReplace(string dirtyString)
    {
        string removeChars = " ?&^$#@!()+-,:;<>’\'-_*";
        string result = dirtyString;

        foreach (char c in removeChars)
        {
            result = result.Replace(c.ToString(), string.Empty);
        }

        return result;
    }

    // by L.B
    public static string UseWhere(string dirtyString)
    {
        return new String(dirtyString.Where(Char.IsLetterOrDigit).ToArray());
    }
}

static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        var dirtyString = "sdfdf.dsf8908()=(=(sadfJJLef@ssyd€sdöf////fj()=/§(§&/(\"&sdfdf.dsf8908()=(=(sadfJJLef@ssyd€sdöf////fj()=/§(§&/(\"&sdfdf.dsf8908()=(=(sadfJJLef@ssyd€sdöf";
        var sw = new Stopwatch();

        var iterations = 50000;

        sw.Start();
        for (var i = 0; i < iterations; i++)
            CleanString.<SomeMethod>(dirtyString);
        sw.Stop();
        Debug.WriteLine("CleanString.<SomeMethod>: " + sw.ElapsedMilliseconds.ToString());
        sw.Reset();

        ....
        <repeat>
        ....       
    }
} 
```

* * *

**输出**

```
CleanString.UseReplace: 791
CleanString.UseStringBuilder: 2805
CleanString.UseStringBuilderWithHashSet: 521
CleanString.UseStringBuilderWithHashSet2: 331
CleanString.UseRegex: 1700
CleanString.UseWhere: 233 
```

* * *

**结论**

您使用哪种方法可能并不重要。

连续调用 50000(!) 次时，禁食 ( `UseWhere`: 233ms) 和最慢 ( `UseStringBuilder`: 2805ms) 方法之间的时间差为 2572ms。如果不经常运行该方法，您可能不需要关心它。

但是如果你这样做，使用`UseWhere`方法（由LB编写）；但也请注意，它略有不同。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-09T13:29:47.260

如果您追求的是纯粹的速度和效率，我建议您这样做：

```
public static string CleanString(string dirtyString)
{
    HashSet<char> removeChars = new HashSet<char>(" ?&^$#@!()+-,:;<>’\'-_*");
    StringBuilder result = new StringBuilder(dirtyString.Length);
    foreach (char c in dirtyString)
        if (!removeChars.Contains(c)) // prevent dirty chars
            result.Append(c);
    return result.ToString();
} 
```

RegEx 无疑是一个优雅的解决方案，但它增加了额外的开销。通过指定字符串构建器的起始长度，它只需要分配一次内存（`ToString`最后是第二次）。这将减少内存使用并提高速度，尤其是在较长的字符串上。

但是，正如 LB 所说，如果您使用它来正确编码绑定到 HTML 输出的文本，您应该使用`HttpUtility.HtmlEncode`它而不是自己做。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-09T13:16:17.950

使用正则表达式`[?&^$#@!()+-,:;<>’\'-_*]`替换为空字符串

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-09T13:30:01.787

我不知道在性能方面，使用 a`Regex`或 LINQ 是否会有所改进。
可能有用的东西是使用 a`StringBuilder`而不是`string.Replace`每次使用来创建新字符串：

```
using System.Linq;
using System.Text;

static class Program {
    static void Main(string[] args) {
        const string removeChars = " ?&^$#@!()+-,:;<>’\'-_*";
        string result = "x&y(z)";
        // specify capacity of StringBuilder to avoid resizing
        StringBuilder sb = new StringBuilder(result.Length);
        foreach (char x in result.Where(c => !removeChars.Contains(c))) {
            sb.Append(x);
        }
        result = sb.ToString();
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-19T10:03:13.107

这个速度更快！
采用：

```
string dirty=@"tfgtf$@$%gttg%$% 664%$";
string clean = dirty.Clean();

    public static string Clean(this String name)
    {
        var namearray = new Char[name.Length];

        var newIndex = 0;
        for (var index = 0; index < namearray.Length; index++)
        {
            var letter = (Int32)name[index];

            if (!((letter > 96 && letter < 123) || (letter > 64 && letter < 91) || (letter > 47 && letter < 58)))
                continue;

            namearray[newIndex] = (Char)letter;
            ++newIndex;
        }

        return new String(namearray).TrimEnd();
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-09T13:17:19.057

试试这个：http: [//msdn.microsoft.com/en-us/library/xwewhkd1.aspx](http://msdn.microsoft.com/en-us/library/xwewhkd1.aspx)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-09T13:51:30.397

也许先解释“为什么”然后再解释“是什么”会有所帮助。性能下降的原因是因为 c# 会复制并替换每次替换的字符串。根据我在 .NET 中使用 Regex 的经验，它并不总是更好 - 尽管在大多数情况下（我认为包括这个）它可能会工作得很好。

如果我真的需要性能，我通常不会让它靠运气，而只是告诉编译器我想要什么：即：创建一个具有上限字符数的字符串，然后复制你需要的所有字符。也可以用开关/案例或数组替换散列集，在这种情况下，您最终可能会得到一个跳转表或数组查找——这甚至更快。

“务实”的最佳但快速的解决方案是：

```
char[] data = new char[dirtyString.Length];
int ptr = 0;
HashSet<char> hs = new HashSet<char>() { /* all your excluded chars go here */ };
foreach (char c in dirtyString)
    if (!hs.Contains(c))
        data[ptr++] = c;
return new string(data, 0, ptr); 
```

顺便说一句：当您想要处理高代理 Unicode 字符时，此解决方案不正确 - 但可以轻松调整以包含这些字符。

-斯特凡。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-21T01:32:59.070

我在我当前的项目中使用它，它工作正常。它需要一个句子，它删除所有非字母数字字符，然后返回包含第一个字母大写的所有单词和小写其他所有单词的句子。也许我应该称它为 SentenceNormalizer。命名很难:)

```
 internal static string StringSanitizer(string whateverString)
{
    whateverString = whateverString.Trim().ToLower();
    Regex cleaner = new Regex("(?:[^a-zA-Z0-9 ])", RegexOptions.IgnoreCase | RegexOptions.CultureInvariant | RegexOptions.Compiled);
    var listOfWords = (cleaner.Replace(whateverString, string.Empty).Split(' ', StringSplitOptions.RemoveEmptyEntries)).ToList();
    string cleanString = string.Empty;
    foreach (string word in listOfWords)
    {
        cleanString += $"{word.First().ToString().ToUpper() + word.Substring(1)} ";
    }
    return cleanString;
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-21T20:05:41.793

我无法花时间对此进行酸性测试，但这条线实际上并没有按照需要清理斜线。

```
HashSet<char> removeChars = new HashSet<char>(" ?&^$#@!()+-,:;<>’\'-_*"); 
```

我必须单独添加斜杠并转义反斜杠

```
HashSet<char> removeChars = new HashSet<char>(" ?&^$#@!()+-,:;<>’'-_*");
removeChars.Add('/');
removeChars.Add('\\'); 
```

# python - bash：字符串插值

> ID：11395776
> 
> 赞同：2
> 
> 时间：2012-07-09T13:12:55.140
> 
> 标签：python, bash

我正在从 python 模块返回字符串，以便在 bash 脚本中使用。

这是我到目前为止所拥有的：

```
SCRIPT_DIR=/somepath/to/scripts/folder
cd $SCRIPT_DIR/eod

python_cmd='import sys;
            sys.path.append("/somepath/to/scripts/folder/utils"); 
            import settings as st; 
            print " ".join(st.foo())'

# Fix indentation for Python
python_cmd=${python_cmd//'            '/''}

my_array=(`python -c "$python_cmd"`) 
```

我想在上面的代码片段中使用 DRY 哲学。但是，该字符串`/somepath/to/scripts/folder`在脚本中重复出现。我想将 $SCRIPT_DIR 的定义传递给 python_cmd - 但是我尝试了（用 $SCRIPT_DIR/utils 替换 python_cmd 中的路径字符串，但失败并出现以下错误：

```
Traceback (most recent call last):
  File "<string>", line 3, in <module>
ImportError: No module named settings 
```

我究竟做错了什么？

**笔记：**

我正在运行 bash 4.1.5

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:15:52.740

根本不用费心传递字符串。不要`sys.path`在 Python 文本中进行修改，而是在 bash 脚本中修改 PYTHONPATH 环境变量。它更容易，并且无论如何都是影响导入路径的首选方式。

如何设置路径的示例：

```
SCRIPT_DIR=/somepath/to/scripts/folder
cd $SCRIPT_DIR/eod

export PYTHONPATH=$SCRIPT_DIR
python_cmd='import settings as st; 
            print " ".join(st.foo())' 
```

我还不得不说，这似乎是一种将组件粘合在一起的奇怪方法，但我没有足够的信息来推荐更好的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:18:32.880

因为python命令是用单引号括起来的，`$SCRIPT_DIR`没有展开。尝试这个：

```
python_cmd='import sys;
            sys.path.append("'$SCRIPT_DIR'");
            import settings as st; 
            print " ".join(st.foo())' 
```

也就是说，我会选择修改`PYTHONPATH`.

# c# - Upload image to c# server from iPhone

> ID：11395784
> 
> 赞同：0
> 
> 时间：2012-07-09T13:13:19.887
> 
> 标签：c#, iphone, asp.net, iis, http-post

I want to upload a image to my server form iPhone To upload image my code is

```
UIImage *image = [UIImage imageNamed:@"bg_DName.png"];
NSMutableData *imageData  = (NSData*)UIImagePNGRepresentation(image);

     NSString *string = [NSString stringWithFormat:@"http://myServer/HeritageWebServices/Service.asmx/testuploadimage"];

    [self setRequest1:[ASIFormDataRequest requestWithURL:[NSURL URLWithString:string]]];
    [request1 setPostValue:@"test" forKey:@"value1"];
    [request1 setPostValue:@"test" forKey:@"value2"];
    [request1 setPostValue:@"test" forKey:@"value3"];
    [request1 setTimeOutSeconds:20];
    [request1 setDelegate:self];
    [request1 setDidFailSelector:@selector(uploadFailed:)];
    [request1 setDidFinishSelector:@selector(uploadFinished:)];
    [request1 setPostBody:imageData];

//    NSLog(@"image %@",imageData);
   [request1 setData:imageData withFileName:@"photo.png" andContentType:@"image/png" forKey:@"photo"];
[request1 startAsynchronous]; 
```

With the above code i am not able upload image.

```
UIImage *image = [UIImage imageNamed:@"bg.png"];
    NSData *imageData  = UIImagePNGRepresentation(image);
    //NSLog(@"imageData %@",imageData);
    NSString *dt = [[imageData description] stringByTrimmingCharactersInSet:     
                    [NSCharacterSet characterSetWithCharactersInString:@"<>"]]; 
    dt = [dt stringByReplacingOccurrencesOfString:@" " withString:@""];
    NSString *string = [NSString stringWithFormat:@"http://myServer/HeritageWebServices/Service.asmx/testuploadimage?image=%@",dt];
   // NSLog(@"urlstring %@",string);
      request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:string]];
    //    
    [request startAsynchronous]; 
```

If i try like this i can upload small image but not large images.Here i am sending the image in the request parameter as string.

My c# code to receive image

```
[WebMethod]
       public byte[] testuploadimage(string image)
       {
           byte[] imageBytes;
           System.Net.HttpWebRequest httpWebRequest = (System.Net.HttpWebRequest)System.Net.WebRequest.Create("http://myServer/HeritageWebServices/Service.asmx/testuploadimage");
           httpWebRequest.Method = "POST";
           httpWebRequest.ContentType = "application/octet-stream";
           httpWebRequest.ContentLength = image.Length;

           XmlDocument login = new XmlDocument();
           XmlDeclaration dec = login.CreateXmlDeclaration("1.0", null, null);
           login.AppendChild(dec);
           XmlElement root = login.CreateElement("CreateUser");
           login.AppendChild(root);

           //try
           //{

               string actFolder = Server.MapPath("~/Images/");
               string s = image.Replace(" ", string.Empty);

               ErrLogMgr.LogErrorMessage(string.Format("{0}{1}", "testuploadimage() for the image :",
                                                      image), "testUploadimage Inputs",
                                                       ERRORSOURCE.CSASERVICE);
               string imgname = DateTime.UtcNow.ToString().Replace(" ", "").Replace("AM", "").Replace("PM", "").Replace("/", "").Replace("-", "").Replace(":", "") + ".png";
               //       string imgname = DateTime.UtcNow.ToString("yyyyMMddHHmm") + ".png";

               //  byte[] imageBytes = Convert.FromBase64String(image.Replace(" ","+"));
               imageBytes = HexStringToByteArray(s);
               MemoryStream ms = new MemoryStream(imageBytes, 0, imageBytes.Length);
               // MemoryStream ms = new MemoryStream(imageBytes);
               // Convert byte[] to Image
               //  ms.Write(imageBytes, 0, imageBytes.Length);
               ErrLogMgr.LogErrorMessage(string.Format("{0}{1}", "testuploadimage() for the image :",
                                                      image), "testUploadimage Inputs",
                                                       ERRORSOURCE.CSASERVICE);

               Image image2 = Image.FromStream(ms);
               ErrLogMgr.LogErrorMessage(string.Format("{0}{1}", "testuploadimage() for the image :",
                                                      image), "testUploadimage Inputs",
                                                       ERRORSOURCE.CSASERVICE);
               // System.Drawing.Bitmap image2 =  new System.Drawing.Bitmap(ms);
               image2.Save(actFolder + imgname);

               XmlElement root1 = login.CreateElement("uploaded");
               root1.InnerText = "true";
               root.AppendChild(root1);
               XmlElement root2 = login.CreateElement("path");
               root2.InnerText = "http://myServer/HeritageWebServices/Images/" + imgname;
               root.AppendChild(root2);

              // return login;
               return imageBytes;

          // }
           //catch (Exception ex)
           //{
           //    ErrLogMgr.LogErrorMessage(string.Format("{0}{1}", "testuploadimage() for the image :",
           //                                           image), "testUploadimage Inputs",
           //                                            ERRORSOURCE.CSASERVICE);
           //    XmlDocument cd = new XmlDocument();
           //    cd.LoadXml("<Message>" + ex + "</Message>");
           //   // return cd;
           //    return imageBytes;
           //}

       }

       private byte[] HexStringToByteArray(string hexString) 
       {
           int bytesCount = (hexString.Length) / 2;
           byte[] bytes = new byte[bytesCount];

           for (int x = 0; x < bytesCount; ++x)
           {
               bytes[x] = Convert.ToByte(hexString.Substring(x * 2, 2), 16);
           }

           return bytes;
       } 
   } 
```

For the large image exception which i am getting on server is

System.Runtime.InteropServices.ExternalException (0x80004005): A generic error occurred in GDI+. at System.Drawing.Image.Save(String filename, ImageCodecInfo encoder, EncoderParameters encoderParams) at System.Drawing.Image.Save(String filename, ImageFormat format) at System.Drawing.Image.Save(String filename) at Heritage.Service.testuploadimage(String image) –</p>

Can anybody help me.. What am i doing wrong Is the problem with my iPhone code of with my c# code. Thanx!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T00:31:39.713

0x80004005 转换为拒绝访问。因此，它看起来像是服务器端配置。

查看您尝试将图像另存为的路径的权限。还要确保 appPool 身份或最终用户具有写入权限（取决于您的 asp.net 安全配置/委托设置）。

# android - Android设置服务状态

> ID：11395786
> 
> 赞同：1
> 
> 时间：2012-07-09T13:13:28.260
> 
> 标签：android

我正在尝试以编程方式关闭 android 收音机。我正在尝试使用 ServiceState 类，但它不起作用。我添加了权限`CHANGE_NETWORK_STATE and MODIFY_PHONE_STATE`。仍然没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:21:09.003

权限`MODIFY_PHONE_STATE`是系统权限，因此，您不能在应用程序中使用它。

**编辑：**

行。我会尽力解释。以编程方式打开和关闭无线电的服务方法受 MODIFY_PHONE_STATE 权限的保护。此权限具有签名类型，因此只有具有相同签名的应用程序才能调用此方法。因此，由于您的应用程序未使用系统证书签名，因此您无法在应用程序中使用此权限。但如果没有此权限，您也无法更改收音机的状态。

# java - 在哪里初始化字段更好？

> ID：11395788
> 
> 赞同：-1
> 
> 时间：2012-07-09T13:13:32.437
> 
> 标签：java, android

在哪里初始化字段更好？在**构造函数（var.1）**或**声明（var.2）**中？

**变种。1**

```
public class UtilWebLoading {
private int data;
private Context context;

public UtilWebLoading(Context context) {
    this.context = context;
    data = 100;
}
...
} 
```

**变种。2**

```
public class UtilWebLoading {
private int data = 100;
private Context context;

public UtilWebLoading(Context context) {
    this.context = context;
}
...
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T13:14:54.927

在变量中。1 上下文已启动，而在 var. 2 它将为空！使用第一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T13:17:26.980

当我有*足够的上下文*时，我个人更喜欢初始化字段。例如，如果我有一个`List`字段，我通常会在声明时对其进行初始化（除非该类要求用户传递他们选择的实现），但如果我有一个需要传递大小的数组，我将被迫等待对于构造函数调用。

因此，在您的情况下，第二个片段*没有足够的上下文*来在声明时进行初始化`Util`，因为不`Context`存在有效成员。

# python - How to identify which port is being listened in Python's SocketServer?

> ID：11395790
> 
> 赞同：2
> 
> 时间：2012-07-09T13:13:35.690
> 
> 标签：python, port, socketserver

I have a small application that spawns a number of ports (300 to be exact). When it spawns a socket it uses:

```
# when someone connects via socketlistener, do some stuff
class SocketListener((SocketServer.BaseRequestHandler)):
      print "Do some stuff" 
```

Is there a way to tell within SocketListener what port someone connected on?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T18:12:10.313

这取决于您如何实例化继承 BaseRequestHandler 的类，但这可能会有所帮助：

```
class SocketListener((SocketServer.BaseRequestHandler)):
    def handle(self):
        print self.server.server_name, self.server.server_port 
```

# c - strcat() 输出的解释

> ID：11395797
> 
> 赞同：-4
> 
> 时间：2012-07-09T13:13:56.060
> 
> 标签：c, strcat

这是295c的问题之一

```
#include<stdio.h>   
#include<string.h>        
main()        
{        
    char *a="kammo DJ";         
    const char *b="roomies!!";       
    char *c;         
    a=(char *)malloc(strlen(a) + strlen(b));           
    c=(char *)malloc(strlen(a) + strlen(b));          
    c=strcat(a,b);                          
    printf("%s\n",a);               
} 
```

输出是 - 室友！但是为什么输出应该是kammo DJ + roomies的串联！！还告诉c的值是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:18:29.987

首先，你应该`malloc`是`strlen(a)`++ `strlen(b)`1 因为这个`'\0'`符号。你已经声明`char * a = "kammo dj"`了，所以你不能为此分配内存。当您执行`malloc`for时，它返回创建`char * a`的内存池的位置。`malloc`如果你这样做：

```
#include<stdio.h>   
#include<string.h>
#include<malloc.h>

int main()        
{        
    const char *a="kammo DJ";         
    const char *b="roomies!!";       
    char *c;
    size_t len = strlen(a) + strlen(b) + 1;
    c=(char *)malloc(len*sizeof(char));          
    strcpy(c,a);
    strcat(c,b);      
    printf("%s\n",c);
    // don't forget!
    free(c);
    return 0;

} 
```

将输出`'kammo DJroomies`（之间没有空格）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:24:01.013

这里的问题是当你这样做时

```
a=(char *)malloc(strlen(a) + strlen(b)); 
```

这意味着`a`不再指向`"kammo DJ"`。相反，它指向新分配的包含任意数据的内存。

看来数据的第一个字节`a`现在指向的恰好是 0，这实际上是`a`空字符串。这就是为什么你会得到`roomies!!`你的结果。但这只是运气。

你真正想要的代码是：

```
#include<stdio.h>   
#include<string.h>        
main()        
{        
    const char *a="kammo DJ";         
    const char *b="roomies!!";       
    char *c;         
    c=(char *)malloc(strlen(a) + strlen(b) + 1);          
    strcpy(c,a);                          
    strcat(c,b);                          
    printf("%s\n",c);               
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-09T13:16:22.817

```
a=(char *)malloc(strlen(a) + strlen(b)); 
```

您需要为终止空字符留出空间。字符串的大小是它的长度+空字符的一个字节。也`a`被声明为指向`"kammo DJ"`字符串文字。通话后，`malloc`您使指针指向其他内容。

```
c=strcat(a,b); 
```

`a`不是一个字符串，并且在 . 之后包含一个不确定的值`malloc`。

# android - Android Action Bar with Search View

> ID：11395798
> 
> 赞同：13
> 
> 时间：2012-07-09T13:14:12.710
> 
> 标签：android, actionbarsherlock

I want to do an action bar that looks like this:

![ActionBar](../Images/c66b8754220f40a987a2dcb8fdbf18b9.png)

and I am not able to do this.

I tried to use that collapse thing described [here](http://developer.android.com/guide/topics/ui/actionbar.html#ActionView), but it is not exactly what i want.

*   First of all SearchView isn't visible till user press search icon.. but I want It to be visible immediately after activity starts.
*   Secondly after SearchView appears all other action icons disappear.. But I want them to be visible all the time.
*   And it works only for android 3 and higher, I want it for android 2 and higher, so I am using ActionBarSherlock.

For example action bar in google maps looks similar to what I want.

Can somebody advise me how to achieve this?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-19T12:14:42.840

ActionbarSherlock 是一个很棒的库。最新的（4.2.0）版本具有使您在活动启动时搜索视图可见的方法**SearchView.setIconified(boolean);**

因此，如果您想让您的搜索视图始终可见，您应该使用以下代码：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {

    //Create the search view
    SearchView searchView = new SearchView(getSherlockActivity().getSupportActionBar().getThemedContext());
    searchView.setQueryHint("Search for countries…");
    searchView.setIconified(false);

    menu.add("Search")
            .setIcon(R.drawable.abs__ic_search)
            .setActionView(searchView)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-09T13:33:58.667

如果你使用 actionbarsherlock 你必须这样做

```
 @Override
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
    menu.add(0, 1, 1, R.string.ac_refresh ).setIcon(R.drawable.ic_navigation_refresh).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add(0, 2, 2, R.string.ac_settings).setIcon(R.drawable.ic_action_settings).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add(0, 3, 3, R.string.ac_favourite).setIcon(isFavouriteChannel(channel) ? R.drawable.ic_rating_important : R.drawable.ic_rating_not_important).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    menu.add(0, 4, 4,  R.string.ac_search  ).setIcon(R.drawable.ic_action_search).setActionView(R.layout.action_search)
            .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW);

    return super.onCreateOptionsMenu(menu);
} 
```

看看 setActionView(R.layout.action_search) - 这是您在 xml 文件中的文本视图。如果你希望你的其他动作图标总是出现，你应该使用`MenuItem.SHOW_AS_ACTION_ALWAYS`

# c# - PictureBox 总是抛出 NullReferenceException

> ID：11395799
> 
> 赞同：1
> 
> 时间：2012-07-09T13:14:21.080
> 
> 标签：c#, winforms, picturebox

一个应该使用 PictureBox 显示图像的简单代码不起作用（frm 是我的表单）：

```
PictureBox pb = new PictureBox();
pb.Image = new Bitmap("1.jpg");
pb.SizeMode = PictureBoxSizeMode.Zoom;
frm.Controls.Add(pb); 
```

当发生此代码的事件时，我有 NullReferenceExcpetion

错误发生在`frm.Controls.Add(pb)`

例外是：

> System.NullReferenceException：对象引用未设置为对象的实例。在 C:\Users\Алексей\Documents\Visual Studio 2010\Projects\NotepadCSharpSetup\WinFormsAgain\RealTrayForm\Test.cs:line 52 中的 Form1.HotKeyManager_HotKeyPressed(Object sender, HotKeyEventArgs e)

完整代码：

```
static void HotKeyManager_HotKeyPressed(object sender, HotKeyEventArgs e)
{
    Size ScreenSize = Screen.PrimaryScreen.Bounds.Size;

    Bitmap image = new Bitmap(ScreenSize.Width, ScreenSize.Height);
    using (Graphics g = Graphics.FromImage(image))
    {
        g.CopyFromScreen(Point.Empty, Point.Empty, ScreenSize);
    }
    Bitmap preview = new Bitmap(image.Width / 10, image.Height / 10);
    using (Graphics gr = Graphics.FromImage(preview))
    {
        gr.SmoothingMode = SmoothingMode.AntiAlias;
        gr.InterpolationMode = InterpolationMode.HighQualityBicubic;
        gr.PixelOffsetMode = PixelOffsetMode.HighQuality;
        gr.DrawImage(image, new Rectangle(0, 0, image.Width / 10, image.Height / 10));
    }
    preview.Save("1.jpg");

    Form frm = (Form)sender;
    PictureBox pb = new PictureBox();
    pb.Image = new Bitmap("1.jpg");
    pb.SizeMode = PictureBoxSizeMode.Zoom;
    frm.Controls.Add(pb);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:26:30.423

我不相信`new`关键字返回`Null`，除非你没有记忆。打赌是`sender`不是`Form`

```
Form frm = (Form)sender; 
```

我认为这条线是空的，这就是`frm.Controls.Add(pb)`失败的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:35:17.403

这一行：

```
Form frm = (Form)sender; 
```

如果发件人不是 Form 类型，实际上会导致 InvalidCastException（或类似的东西）。

铸造对象的另一种方法是：

```
Form frm = sender as Form; 
```

如果 sender 不是 Form 类型（而不是抛出异常），这实际上会将 frm 设置为 null。

我会放置一个断点并检查哪个对象实际上是空的。我的猜测是 sender 从一开始就为空，并且将其转换为 Form 什么都不做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:19:10.557

最可能的原因是位图不存在于其当前查找的位置。

确保您尝试在图片框中显示的图像具有正确的路径。

# jquery - Position element next to scrollbar

> ID：11395800
> 
> 赞同：1
> 
> 时间：2012-07-09T13:14:22.890
> 
> 标签：jquery, html, css

I want to position a element next to (and follow) the middle of the scrollbar. In other words, glue a element to the middle of the scrollbar. I guess you have to dynamically get the height and position of the scrollbar and update the elements properties with setInterval for example.

Any ideas? Thanks in advance!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:18:43.577

因为`<div id="thingy"></div>`，你可以让东西粘在滚动条的中间，而不用担心与滚动条属性有任何关系。让事情看起来像：

```
#thingy {
     position:fixed;
     top:45%;
     bottom:45%;
     height:10%;
     right:0px;
} 
```

这是假设您的元素的高度是屏幕高度的 10%，并且希望紧贴在页面左侧的滚动条上。

# javascript - 闭包模板中的逻辑运算符

> ID：11395803
> 
> 赞同：5
> 
> 时间：2012-07-09T13:14:37.810
> 
> 标签：javascript, google-closure-templates

我正在使用[Google Closure Templates](https://developers.google.com/closure/templates/) ，但无法成功编译某些模板，因为似乎无法在 if 标记内使用逻辑“**和**”和“**或**”运算符（我尝试了“ **&&** ”和“ **and** " and " **||** " and " **or** ")... 我怎样才能写出一个“复杂”的 if 语句，例如：`{if condition1 && condition2}`？

编辑：

以下简单语句引发异常：

**{如果 5 > 2 && 2 == 2}**

**“并非所有代码都采用 Soy V2 语法（发现标签 {if 5 > 2 && 2 == 2} 不在 Soy V2 语法中）”**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T13:51:29.743

根据最新版本的[docs](https://github.com/google/closure-templates/blob/3186e7624ccbe3aa01f20f0f55b3976cc2f617e1/documentation/reference/expressions.md#logical-operators-and-or-logical-operators)， use 可以使用**`and`**and**`or`**作为逻辑运算符：

```
{if $x > 1 and $y < 1}
   ...
{elseif $x < 1 or $y > 2}
   ...
{/if} 
```

# ruby-on-rails - User friendships Nesting logic in Rails 3

> ID：11395806
> 
> 赞同：0
> 
> 时间：2012-07-09T13:14:50.007
> 
> 标签：ruby-on-rails, erb

I am trying to finish my forum application. I want arrange user Friendships. I am using devise as authentication system. I want some suggestions. Shall i nest the resources in User and Friendships. This is the way Railscasts used:

```
devise_for :users
  resources :users, only: [:index, :show] 
  resources :friendships, only: [:create, :destroy] 
```

This is how i used:

```
devise_for :users

      resources :users, only: [:index, :show] do
      resources :friendships, only: [:create, :destroy]
      end 
```

My real problem is that . I want to use friendships in a way that , signed_in user can check the users list , and add a friend if he is not in the friendslist. Now i can add a friend multiple times. And also ,user can add himself as a friend.

How can i fix this links with `if/else` statements:

showing a user profile works:

```
<section>
      <h1>
        <%= @user.username %>
      </h1>

            <%= link_to "Arkadaşlarıma Ekle", friendships_path(:friend_id => @user), :method => :post,class: "btn btn-large btn-primary" %>

      </section> 
```

and herei I cant find the way to show the friend's profile. :

```
<%  for friendship in @friendships %> 
<%= link_to friendship.friend.username, '#' %>
(<%= link_to 'Sil', friendship, :method => :delete %>)
<% end %> 
```

.. rake routes:

I can understand that , I have to use correct if/elses but i am lost in nesting my resources and routing. . Thanks for explanations..

These are my edits: In my users_controller:

```
def user_is_friend?(other_user)
 current_user.friendships.find_by_friend_id(other_user.id) 
end

<% unless user_is_friend?(@user) %>
  <%= button_to "Add friend", friendships_path(:friend_id => user), :method => :post %>
<% end %> 
```

Is it correct?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:28:55.937

我会建议你，在你的用户索引视图中，当你用一个变量用户循环时（`for @users do |user|)`首先添加一个条件：

```
<% unless current_user == user %> 
```

--> 这将允许您处理除 current_user 之外的所有用户（即您自己）

然后，您可以这样定义：

```
<% user_is_friend = current_user.friendships.find_by_friend_id(user.id) %> 
```

如果用户已经在您朋友的列表中，这将是 TRUE

然后，最后一段：

```
<% if !user_is_friend %>
  <%= button_to "Add friend", friendships_path(:friend_id => user), :method => :post %>
<% end %> 
```

# c# - 使用 Moq 模拟 FormsAuthentication.SetAuthCookie

> ID：11395813
> 
> 赞同：9
> 
> 时间：2012-07-09T13:15:07.233
> 
> 标签：c#, unit-testing, asp.net-mvc-2, moq

嗨，我正在对我的 ASP.Net MVC2 项目进行一些单元测试。我正在使用 Moq 框架。在我的 LogOnController 中，

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl = "")
{
  FormsAuthenticationService FormsService = new FormsAuthenticationService();
  FormsService.SignIn(model.UserName, model.RememberMe);

 } 
```

在 FormAuthenticationService 类中，

```
public class FormsAuthenticationService : IFormsAuthenticationService
    {
        public virtual void SignIn(string userName, bool createPersistentCookie)
        {
            if (String.IsNullOrEmpty(userName)) throw new ArgumentException("Value cannot     be null or empty.", "userName");
            FormsAuthentication.SetAuthCookie(userName, createPersistentCookie);
        }
        public void SignOut()
        {
            FormsAuthentication.SignOut();
        }
    } 
```

我的问题是如何避免执行

```
FormsService.SignIn(model.UserName, model.RememberMe); 
```

这条线。或者有什么办法可以起订量

```
 FormsService.SignIn(model.UserName, model.RememberMe); 
```

**在不**更改我的 ASP.Net MVC2 项目的情况下使用 Moq 框架。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-09T14:17:52.707

像这样`IFormsAuthenticationService`作为依赖注入`LogOnController`

```
private IFormsAuthenticationService formsAuthenticationService;
public LogOnController() : this(new FormsAuthenticationService())
{
}

public LogOnController(IFormsAuthenticationService formsAuthenticationService) : this(new FormsAuthenticationService())
{
    this.formsAuthenticationService = formsAuthenticationService;
} 
```

第一个构造函数用于框架，以便`IFormsAuthenticationService`在运行时使用正确的实例。

`LogonController`现在在您的测试中，通过传递模拟创建一个使用另一个构造函数的实例，如下所示

```
var mockformsAuthenticationService = new Mock<IFormsAuthenticationService>();
//Setup your mock here 
```

更改您的操作代码以使用私有字段`formsAuthenticationService`，如下所示

```
[HttpPost]
public ActionResult LogOn(LogOnModel model, string returnUrl = "")
{
    formsAuthenticationService.SignIn(model.UserName, model.RememberMe);
} 
```

希望这可以帮助。我已经为您省略了模拟设置。如果您不确定如何设置，请告诉我。

# jquery - 为什么带有 www 和不带 www 的 url 对于 JSON 请求的行为不同

> ID：11395814
> 
> 赞同：3
> 
> 时间：2012-07-09T13:15:13.333
> 
> 标签：jquery, json, url, getjson, access-control

我正在使用 getJSON 从服务器上的文本文件中获取数据 我在 getJSON 请求中提供绝对 URL

```
var server="http://abc.com/text.json"
$.getJSON(server,function(data){
    console.log(data);
}) 
```

因此，当我使用 URL [http://abc.com/访问该站点时，我得到了正确的 JSON 值，但是当我使用 URL](http://abc.com/) [http://www.abc.com/](http://www.abc.com/)访问同一站点时，它显示错误

```
Origin http://www.abc.com is not allowed by Access-Control-Allow-Origin. 
```

两个 URL 都指向同一个页面，那么为什么 getJSON 的行为不同

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-09T13:19:22.893

基本上`http://abc.com/text.json`并且`http://www.abc.com/text.json`被浏览器识别为不同的域，即使它们指向后端中的相同资源。

因此，当您尝试从另一个域访问资源时，您会遇到使用[相同来源策略的问题。](http://en.wikipedia.org/wiki/Same_origin_policy)

如果您希望两个 URL 都能正常工作，您可以切换到使用 JSONP 方法。这与本政策无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:22:55.040

首先，让不同的域提供相同的内容是一个坏主意。这有两个原因：第一个是同源策略，它可以防止脚本访问不同的域；二是谷歌和其他搜索引擎惩罚重复内容。正如您在此处所做的那样，跨域复制内容将产生这种效果。浏览器和搜索引擎都不认为`www.example.com`和`example.com`是同一个域。

最终，您需要更正此问题，以便所有页面都来自同一个域。

同时，您只需确保脚本始终访问当前域，无论是什么：

```
var server="/text.json"
$.getJSON(server,function(data){
    console.log(data);
}); 
```

省略域意味着隐式使用当前域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:20:44.953

你的问题的根源是[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。域必须完全匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T13:33:48.603

您可以使用

```
var server = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&'); 
```

# ckeditor - Alfresco Share下的CKEditor (4.2.a)

> ID：11395816
> 
> 赞同：0
> 
> 时间：2012-07-09T13:15:15.560
> 
> 标签：ckeditor, alfresco-share

我试图让 CKEditor 在 Share ( [http://code.google.com/p/share-extras/wiki/CKEditorFormControl](http://code.google.com/p/share-extras/wiki/CKEditorFormControl) ) 下运行，在以前的版本 (4.0.d) 中它工作正常，但在最新版本中我有问题。在访问编辑表单时，它不会在内容位置显示任何内容，在日志中我有以下内容：

```
9.7.2012 14:56:59 org.apache.jsp.error500_jsp _jspService
SEVERE: javax.servlet.ServletException: Could not resolve view with name 'site/my_sample_site/skins/kama/editor.css' in servlet with name 'Spring Surf Dispatcher Servlet'
9.7.2012 14:56:59 org.apache.jsp.error500_jsp _jspService
SEVERE: javax.servlet.ServletException: Could not resolve view with name 'site/my_sample_site/contents.css' in servlet with name 'Spring Surf Dispatcher Servlet' 
```

在该页面的源代码中，正确定义了编辑器的 div，js 也包括在内。我试图在我的 share-config-custom.xml 中手动定义资源的依赖关系，它看起来有一些效果，因为该表单 div 的高度发生了变化，但它仍然是空的，并且记录了相同的异常。

```
<config>
  <forms>
    <dependencies>
      <js src="/modules/editors/ckeditor/ckeditor.js" />
      <js src="/components/editors/ckeditor/ckeditorloader.js" />
      <js src="/modules/editors/ckeditor/lang/cs.js" />
      . . .
      <js src="/modules/editors/ckeditor/skins/kama/editor.css" />
      <js src="/modules/editors/ckeditor/contents.css" />
    </dependencies>
  </forms>
</config> 
```

我添加了所有丢失的东西，它们在运行时出现，但没有任何效果。

我的问题是：为什么“某事”仍在尝试访问编辑器中站点的相对路径中的资源？我手动定义了资源，为什么它们不被接受？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T09:34:30.060

在 Alfresco 4.2.2 中，我通过在 form.js.ftl 和 form.css.ftl 文件中添加依赖项来实现它。

```
<@script type="text/javascript" src="${url.context}/res/components/editors/ckeditor/ckeditorloader.js" group="form"/>
<@script type="text/javascript" src="${url.context}/res/components/editors/ckeditor/config.js" group="form"/>
<@script type="text/javascript" src="${url.context}/res/modules/editors/ckeditor/ckeditor.js" group="form"/>
<@script type="text/javascript" src="${url.context}/res/modules/editors/ckeditor/config.js" group="form"/>
<@script type="text/javascript" src="${url.context}/res/modules/editors/ckeditor/lang/en.js" group="form"/>
<@script type="text/javascript" src="${url.context}/res/modules/editors/ckeditor/plugins/image/dialogs/image.js" group="form"/>
<@script type="text/javascript" src="${url.context}/res/modules/editors/ckeditor/plugins/styles/styles/default.js" group="form"/>

<@link href="${url.context}/res/modules/editors/ckeditor/skins/kama/editor.css" group="form"/>
<@link href="${url.context}/res/modules/editors/ckeditor/skins/kama/dialog.css" group="form"/>
<@link href="${url.context}/res/modules/editors/ckeditor/contents.css" group="form"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-26T03:24:18.023

我确实提出了一些更改，使其适用于 4.2.c，具有图像属性和属性版本！

[https://github.com/fliot/ckeditor-forms](https://github.com/fliot/ckeditor-forms)

希望他们很快就会被拉入主分支。

问候弗朗索瓦

# xml - 使用（超级）Sed 搜索和替换 .xml

> ID：11395817
> 
> 赞同：0
> 
> 时间：2012-07-09T13:15:17.340
> 
> 标签：xml, search, replace, sed

我正在尝试使用 sed 更改 .xml 文件中大段落中的字符串。

name="m_AllowDownload">假<

我试图用这条线将 False 替换为 True。

```
s/name="m_AllowDownload">False</name="m_AllowDownload">True</ old_file >new_file 
```

如果我只针对 False 之类的词，它会起作用，但是当我添加符号时它不会。有很多错误发生，所以我必须比针对它更具体。我在命令行的超级 sed 可执行文件下运行它。抱歉，我对此很陌生，任何帮助或建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:34:56.140

这是因为 shell 将您的`<`and解释`>`为重定向。为避免它，您需要`'`在 sed 命令之前和之后添加：

```
sed 's/name="m_AllowDownload">False</name="m_AllowDownload">True</' 
```

或`"`：

```
sed "s/name=\"m_AllowDownload\">False</name=\"m_AllowDownload\">True</" 
```

# c - 如何确定字符串的长度（不使用 strlen()）

> ID：11395821
> 
> 赞同：2
> 
> 时间：2012-07-09T13:15:24.063
> 
> 标签：c, strlen

```
size_t stringlength(const char *s) 
```

使用这个函数，怎么能找到一个字符串的长度呢？我不是指*使用* `strlen()`，而是创建它。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-09T13:16:39.260

循环/迭代字符串，保持计数。当你点击 时`\0`，你已经到达了你的字符串的末端。

涉及的基本概念是循环、条件（测试字符串的结尾）、维护计数器和访问字符序列中的元素。

***注意***：有更多惯用/聪明的解决方案。然而，OP 显然是 C 和编程的新手（无意冒犯，我们都是从新手开始的），所以像解决方案之一那样对它们施加*指针算术*，或者编写可能*过于简洁/紧凑*的解决方案并不是关于 OP 的需求，而是更多关于展示海报的编程技巧 :) 故意为简单易懂的解决方案提供建议为我赢得了至少一个反对票（是的，这是我什至没有提供的“*虚构代码*”。我不想准备好提供代码解决方案，但让 OP 在一些指导下弄清楚）。

**要点**：我认为答案应始终根据提问者的水平进行调整。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-09T13:20:02.593

```
size_t stringlength(const char *s) {
   size_t count = 0;
   while (*(s++) != '\0') count++;
   return count;
} 
```

令人困惑的部分可能是表达式`*(s++)`，在这里您使用`++`运算符移动指针以指向缓冲区中的下一个字符，然后使用解引用运算符`*`获取指针位置处的内容。另一种更清晰的方法是：

```
size_t stringlength(const char *s) {
   size_t count = 0;
   while (s[count] != '\0') count++;
   return count;
} 
```

另外几个参考版本（但不太清晰）是：

```
size_t stringlength(const char *s) {
   size_t count = 0;
   while (*s++) count++;
   return count;
}

size_t stringlength(const char *s) {
   const char* c = s;
   for (; *c; c++);
   return c - s;
} 
```

尽管此处所述的代码只是为您提供有关如何实现上述答案中描述的算法的想法的参考，但存在执行相同要求的更有效方法（例如，检查[glibc 实现](http://www.stdlib.net/~colmmacc/strlen.c.html)，一次检查 4 个字节)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-21T10:14:45.280

***这可能不是相关代码，但我认为值得了解。因为省时...***

```
int a[] = {1,2,3,4,5,6};

unsigned int i,j;

i = &a; //returns first address of the array say 100

j = &a+1; //returns last address of the array say 124

int size = (j-i)/sizeof(int); // (j-i) would be 24 and (24/4) would be 6

//assuming integer is of 4 bytes

printf("Size of int array a is :%d\n",size); 
```

* * *

**对于字符串::**

```
char a[] = "Hello";

unsigned int i,j;

j = &a+1; //returns last address of the array say 106

i = &a; //returns first address of the array say 100

printf("size of string a is : %d\n",(j-i)-1); // (j-i) would be 6 
```

* * *

***[如果您对 &a+1 如何返回数组的最后一个地址感到困惑，请查看此链接。](https://stackoverflow.com/questions/2989370/why-do-a1-and-a1-give-different-results-when-a-is-an-int-array)***

* * *

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T13:28:00.450

假设 s 是一个非空指针，以下函数从 s 开始遍历 s，直到找到终止零。对于每个传递的字符，`s++;`计数都会增加`count++;`。

```
size_t stringlength(const char *s) {
   size_t count = 0;
   while (*s) {
     s++;
    count++;
   }
   return count;
} 
```

# matlab - 在另一列中添加具有特定条件的一列，如matlab中excel的sumifs

> ID：11395823
> 
> 赞同：-4
> 
> 时间：2012-07-09T13:15:27.340
> 
> 标签：matlab, count, conditional-statements

> **可能重复：**
> [在另一列中添加具有特定条件的一列，如 excel 的 sumifs](https://stackoverflow.com/questions/11385732/addition-of-one-column-with-certain-condition-in-another-colum-like-sumifs-of-e)

在这里，我想计算第 2 列的数量，在第 1 列中具有相同的条件，我在这里再次指示，

A=[1 2;2 3;3 4;3 2;4 3;5 4;5 2;6 3;7 2;8 3]

现在我想在第 2 列中计算 2、3 和 4 的数量，条件是当第 1 列的范围从 0 到 3、3 到 6、6 到 9、9 到 12 时。

答案是这样的

范围 no2, no3, no4

0到3-- 2-----1--------1

3 到 6----1--------2--------1

6到9---1-----1------0

帮帮我,,,, 等待你的回复..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:30:28.157

你可能会做这样的事情：

```
for(n=1:size(A,1))
    if(A(n,1) >= 0 && A(n,1) < 3)
        % Do something
    elseif( ) % next test condition
        % Do something there.
    end 
end 
```

另一种选择是使用 for 循环遍历您的第一列，并使用 switch 语句根据该输入提取适当的操作。

更新如下：

```
for(n = 1:size(A,1))
    switch(mod(A(n,1),3))
        case 0 % this will be 0, 1, 2 in your column
            % code
        case 1
            etc...
    end
end 
```

[matlab中的模数信息](http://www.mathworks.com/help/techdoc/ref/mod.html)

[matlab中关于开关的信息](http://www.mathworks.com/help/techdoc/ref/switch.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:11:45.730

使用 MATLAB，您可以使用逻辑索引，这意味着您可以使用任意数量的条件过滤变量。例如，如果`vec`是任何向量并且您想知道有多少元素`vec`是负数，您可以执行以下操作，

```
% save the elements of vec which are negative
ind = vec < 0
% vec is a logical variable. Each element of vec lower that 0 is store as 1.
% to know how many elements of vec are smaller than 0
sum(ind)
% will tell you how many ones are there in ind, meaning the number of elements in vec which
% are smaller than 0

% Of course you can do the same all at once,
sum(vec < 0)
% and you can directly access the elements in the same way
vec(vec < 0) 
```

所以回到你的问题，你可以使用类似的东西，

```
for i = 1:3:length(A)
    %print how many 2s,3s and 4s
    fprintf('%d to %d: %d, %d, %d\n',i,i+2,sum(A(i:i+2,2)==2),sum(A(i:i+2,2)==3),sum(A(i:i+2,2)==4))
end 
```

# qt - QListView - 混合拖动模式

> ID：11395824
> 
> 赞同：0
> 
> 时间：2012-07-09T13:15:34.723
> 
> 标签：qt, drag-and-drop

我有一个 ViewMode 设置为 IconMode 的 QListView。我想实现以下 DnD 行为：

*   如果在视图内拖动列表视图项目，则仅更改项目在视图中的位置。这与将 DragDropMode 设置为 InternalMove 相同。
*   如果将列表项移出视图，则可以将其复制到另一个外部视图。在这种情况下，DragDropMode 等于 DragOnly。

如何以视图支持两种行为的方式混合这两种模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:51:35.967

您可以通过覆盖视图的[dropEvent](http://doc.qt.nokia.com/4.7-snapshot/qabstractitemview.html#dropEvent)来做到这一点，如下所示：

```
void MyListView::dropEvent( QDropEvent* e )
{
    if( e->source() != this )
    {
        // something comes from the outside
        // what to do? return?
        return;
    }
    else
    {
        // event comes from the view itself, let's do some stuff
        // for example call the base class default event
        QAbstractItemView::dropEvent(e);
    }
} 
```

我想正确的标志是`QAbstractItemView::DragDrop`这样做。

# pdf-generation - 我们如何使用 filemaker pro 导出 pdf？

> ID：11395834
> 
> 赞同：-2
> 
> 时间：2012-07-09T13:16:09.650
> 
> 标签：pdf-generation, export, filemaker

我们如何使用 filemaker pro 导出 pdf？

我想在 filemaker pro 中导出 pdf。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:33:11.053

菜单文件 -> 保存/发送记录为 -> PDF。还有一个类似的脚本步骤可以在脚本中使用。它不适用于运行时应用程序，仅适用于 FileMaker 本身。

# c# - HTML 文件到位图图像

> ID：11395836
> 
> 赞同：0
> 
> 时间：2012-07-09T13:16:12.393
> 
> 标签：c#

我正在尝试使用 C# Windows 窗体应用程序将本地 HTML 文件转换为位图图像。为此，我正在使用内存流读取 HTML 文件。但是在将内存流传递给 Bitmap 对象后，它说“参数无效”。

下面是示例代码

MemoryStream stm = new MemoryStream(data); 位图 f_Bitmap = (Bitmap)Image.FromStream(stm);

请提供如何将 HTML 文件转换为位图图像的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:19:19.940

您始终可以使用 WebBrowser 对象（[在此处](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)阅读更多内容）。

```
 public void WBCapture()
    {
        WebBrowser wb = new WebBrowser();
        wb.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(wb_DocumentCompleted);

        wb.ScrollBarsEnabled = true;
        wb.Width = 800;
        wb.Height = 600;
        wb.DocumentText = @"<b>Hello</b> <i>World</i>!!!";
        // Or you can navigate to:
        // wb.Navigate("http://mydocmentsurl.com");
    }

    void wb_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        WebBrowser wb = (WebBrowser)sender;

        using (Graphics graphics = wb.CreateGraphics())
        using (Bitmap bitmap = new Bitmap(wb.Width, wb.Height, graphics))
        {
            Rectangle bounds = new Rectangle(0, 0, bitmap.Width, bitmap.Height);
            wb.DrawToBitmap(bitmap, bounds);
            bitmap.Save(@"C:\caputre.png", ImageFormat.Png);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:31:42.677

如果要将 HTML 文件的内容保存为位图，则不能只将字节放入位图对象中。您需要使用 WebBrowser 对象并手动绘制它。[这](http://www.codeproject.com/Articles/58605/HTML-to-Image-in-C)是一篇概述它的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T13:28:09.693

我的解释是关于您收到的错误：

它引发错误的原因是您所做的只是将 HTML 文本从文件推送到流中，当 FromStream 使用数据时，它说数据的格式不是位图或不够好

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-09T13:25:22.450

只要您所说的 HTML 文件是指向图像文件的直接链接，这将起作用：

```
 var request = (HttpWebRequest) WebRequest.Create(IMAGE_URL);

            using (var stream = request.GetResponse().GetResponseStream())
            {
                using (var image = Image.FromStream(stream))
                {
                    var bitmap = new Bitmap(image);
                    //use or return bitmap, image will automatically get disposed
                }
            } 
```

将 IMAGE_URL 替换为您的网址。

如果 HTML 文件包含文本形式的 URL，那么您需要将其解析出来。

如果此文件是本地文件，您可以简单地使用 FileStream（或 FileReader）来获取本地文件的流（这类似于 WebRequest 上的 GetResponseStream。）

如果您有任何问题，请告诉我。

希望能帮助到你。

# vb.net - 在 vb.net 中生成表的有效方法

> ID：11395837
> 
> 赞同：0
> 
> 时间：2012-07-09T13:16:12.707
> 
> 标签：vb.net, html-table, data-representation

这个问题听起来可能很模糊。我正在寻找的是一种生成 html 的方法`<table></table>`。

我需要建立这个表：

![桌子](../Images/1e58582f1575a41cb22300dae637aaf1.png)

实际上顶行是标题，前两列也是标题。

对于从 (3,2) 开始的每个单元格，我执行一个“计数”查询。

现在我正在做一个非常丑陋的循环来构建一个二维数组。我有一种必须更好的感觉。在不久的将来，我必须在每个“计数”整数下方放置一个链接，该链接链接到另一个表以显示与整数相关的行。

这就是我现在的做法：我只是通过各种循环`Dictionaries(Of String,String)`来生成二维数组。为了构建数组，我使用两个变量来知道我在表中的位置：`Dim lv_TRow As Integer = 0`和`Dim lv_TCol As Integer = 0`.

一定会有更好的办法。也许将这些转换为对象或我还不知道的东西。

你能帮忙把它做得更好吗？

```
Public Function build2DArray() As String(,)
    Dim lv_Tabel(15, 4) As String

    Dim riskLevels As New Dictionary(Of String, String) ' Kan gebruikt worden in WHERE
    riskLevels.Add("Extreem", 5)
    riskLevels.Add("Hoog", 4)
    riskLevels.Add("Normaal", 3)
    riskLevels.Add("Laag", 2)
    riskLevels.Add("Gering", 1)

    Dim algStss As New Dictionary(Of String, String)
    algStss.Add("Gestart", 0)
    algStss.Add("Geanalyseerd", 0)
    algStss.Add("Opgelost", 0)

    Dim incStss As New Dictionary(Of String, String) ' Kan gebruikt worden in WHERE
    incStss.Add("Gestart", "L14_IncSts IN (1,2)")
    incStss.Add("Geanalyseerd", "L14_IncSts IN (3,4,5,6,7)")
    incStss.Add("Opgelost", "L14_IncSts IN (8)")

    Dim prmStss As New Dictionary(Of String, String) ' Kan gebruikt worden in WHERE
    prmStss.Add("Gestart", "L24_StsIdt IN (1)")
    prmStss.Add("Geanalyseerd", "L24_StsIdt IN (2,3,4,5,6)")
    prmStss.Add("Opgelost", "L24_StsIdt IN (7)")

    Dim wzgStss As New Dictionary(Of String, String) ' Kan gebruikt worden in WHERE
    wzgStss.Add("Gestart", "L38_StsIdt IN (1,2)")
    wzgStss.Add("Geanalyseerd", "L38_StsIdt IN (3,4,5,6,7)")
    wzgStss.Add("Opgelost", "L38_StsIdt IN (8,9,10,11)")

    Dim headers As New Dictionary(Of String, String) ' Kan gebruikt worden in FROM
    headers.Add("Risiconiveau", 0)
    headers.Add("Status", 0)
    headers.Add("Incident", "Inc")
    headers.Add("Probleem", "Prm")
    headers.Add("Wijziging", "Wzg")

    Dim lv_Dtb As New Database
    'lv_Dtb.ExecuteQuery("SELECT * FROM Ris")

    Dim lv_TRow As Integer = 0
    Dim lv_TCol As Integer = 0

    For Each header As KeyValuePair(Of String, String) In headers
        lv_Tabel(lv_TRow, lv_TCol) = header.Key
        lv_TCol += 1
    Next

    lv_TCol = 0
    lv_TRow = 1

    For Each riskLevel As KeyValuePair(Of String, String) In riskLevels
        lv_Tabel(lv_TRow + 1, lv_TCol) = riskLevel.Key
        lv_TCol += 1

        For Each algSts As KeyValuePair(Of String, String) In algStss
            lv_Tabel(lv_TRow, lv_TCol) = algSts.Key
            lv_TRow += 1
        Next
        lv_TRow -= 3
        lv_TCol += 1

        For Each incSts As KeyValuePair(Of String, String) In incStss
            Try
                Dim dataset As DataSet = lv_Dtb.ExecuteQuery(QryString(1, incSts.Value, riskLevel.Value))
                lv_Tabel(lv_TRow, lv_TCol) = dataset.Tables(0).Rows(0).Item(0) 'eerste query
            Catch err As SqlException
                Logger.Log(err.Message)
                lv_Tabel(lv_TRow, lv_TCol) = "err"
            End Try
            lv_TRow += 1
        Next
        lv_TRow -= 3
        lv_TCol += 1

        For Each prmSts As KeyValuePair(Of String, String) In prmStss
            Try
                Dim dataset As DataSet = lv_Dtb.ExecuteQuery(QryString(2, prmSts.Value, riskLevel.Value))
                lv_Tabel(lv_TRow, lv_TCol) = dataset.Tables(0).Rows(0).Item(0) 'eerste query
            Catch err As SqlException
                Logger.Log(err.Message)
                lv_Tabel(lv_TRow, lv_TCol) = "err"
            End Try
            lv_TRow += 1
        Next
        lv_TRow -= 3
        lv_TCol += 1

        For Each wzgSts As KeyValuePair(Of String, String) In wzgStss
            Try
                Dim dataset As DataSet = lv_Dtb.ExecuteQuery(QryString(3, wzgSts.Value, riskLevel.Value))
                lv_Tabel(lv_TRow, lv_TCol) = dataset.Tables(0).Rows(0).Item(0) 'eerste query
            Catch err As SqlException
                Logger.Log(err.Message)
                lv_Tabel(lv_TRow, lv_TCol) = "err"
            End Try
            lv_TRow += 1
        Next

        lv_TCol -= 4
    Next

    lv_Dtb.CloseConnection()

    Return lv_Tabel
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T02:15:17.470

使用数据表

```
 Dim dtb As New DataTable
 dtb.Columns.Add("Risiconiveau", GetType(String))
 dtb.Columns.Add("Status", GetType(String))
 dtb.Columns.Add("Incident", GetType(Integer))
 dtb.Columns.Add("Probleem", GetType(Integer))
 dtb.Columns.Add("Wijziging", GetType(Integer))

 dtb.Rows.Add("Extreem", "Geanalyseerd", 0, 0, 0)
 dtb.Rows.Add("Extreem", "Opgelost", 0, 0, 0)
 dtb.Rows.Add("Extreem", "Gestart", 0, 0, 0)

 For Each drw As DataRow In dtb.Rows
   If CStr(drw("Risiconiveau")) = "Extreem" And CInt(drw("Incident")) = 0 Then
     drw("Opgelost") = CInt(drw("Opgelost")) + 1
   End If

 Next drw
 dtb.Dispose() 
```

# android - 对象标题未在打开图形中更新（时间线）

> ID：11395840
> 
> 赞同：2
> 
> 时间：2012-07-09T13:16:23.513
> 
> 标签：android

我正在使用 Facebook 的 Open graph API，我创建了一个对象 - 4 小时，并且在创建对象后第一次操作它的工作正常，并在我的 Facebook 时间线上发布，比如 XYZ 在 APP NAME 上工作了 4 小时

但是当我试图将我的对象标题从 4 小时修改为任何其他值（例如 8 小时）时，它并没有反映在我的 Facebook 上，它仍然指的是旧值（4 小时）。

这是我的 4 小时对象

http://ogp.me/ns# fb: [http://ogp.me/ns/fb#healingwithfoods](http://ogp.me/ns/fb#) : [http://ogp.me/ns/fb/healingwithfoods#](http://ogp.me/ns/fb/healingwithfoods#) ">

我已经改变了样品四小时，但它没有反映在我的时间线上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T19:02:06.393

您需要在任何时间更改打开的图形对象时重新抓取它（或等待两周让 Facebook 为您完成）。这可以通过运行手动重新刮擦来实现：

```
curl -X POST \
 -F "id=OG_OBJECT_URL" \
 -F "scrape=true" \
 "https://graph.facebook.com" 
```

或通过将您的对象 URL 传递到[Open Graph Debugger](http://developers.facebook.com/tools/debug)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T09:41:29.273

## Heading ## public String request(String graphPath, Bundle params, String httpMethod)

```
 throws FileNotFoundException, MalformedURLException, IOException {
    params.putString("format", "json");
    if (isSessionValid()) {
        params.putString(TOKEN, getAccessToken());
        params.putString("scrape", "true");
    }
    String url = (graphPath != null) ? GRAPH_BASE_URL + graphPath
                                     : RESTSERVER_URL;
    return Util.openUrl(url, httpMethod, params);
} 
```

我已经找到了 android 的答案，当你在 facebook 上发布一个数据时，那个时间请求还有一个参数 pass(scrape) 并且它的值为 true

我给出了一小部分代码......上面提到过......

# sharepoint - 成功部署 wsp 后，SharePoint 计时器作业无法正常工作

> ID：11395846
> 
> 赞同：0
> 
> 时间：2012-07-09T13:16:40.147
> 
> 标签：sharepoint, deployment, wsp

**您好，我使用stsadm**命令工具和管理中心成功部署了 SharePoint Timer Job wsp ，它已在全球范围内部署。

我可以看到它**部署**在管理中心 -> 系统设置 -> 管理场解决方案中。

但我仍然无法在管理中心 -> 监控 -> 检查作业状态中看到我的计时器作业。

所以我无法为我的计时器作业设置时间表，它不起作用。

我需要其他步骤来运行我的计时器作业吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T18:52:05.883

我能想到两种可能

1.  您是否有实际将作业加载到 SharePoint 上下文中的功能的预配代码？
2.  如果您创建了供应代码，您是否激活了该功能（这并不总是自动的）

**1\. 规定代码**

预配代码将添加到功能事件接收器（在 Visual Studio 中右键单击该功能）。您应该在以下位置得到类似于代码的内容[SharePoint 2010 自定义计时器作业](http://code.msdn.microsoft.com/office/SharePoint-2010-Custom-416cd3a1)

**2.激活功能**

我相信可以在 SharePoint 中的两个范围内激活计时器作业（可能更多地使用服务）。如果您的计时器作业功能的范围为“农场”级别，请检查它是否在中央管理中处于活动状态 `http://<Central Admin URL>/_admin/ManageFarmFeatures.aspx`

如果计时器作业功能的范围为“Web 应用程序”级别，则检查它是否在中央管理中处于活动状态`http://<Central Admin URL>/_admin/WebApplicationList.aspx`，然后选择目标 Web 应用程序并单击功能区上的“管理功能”。

# multithreading - Google Chrome 扩展程序是否支持多线程编程？

> ID：11395859
> 
> 赞同：6
> 
> 时间：2012-07-09T13:17:33.397
> 
> 标签：multithreading, google-chrome, google-chrome-extension

说，我想每次在我的扩展程序中单击一个按钮时打开一个新线程，我该怎么做？

我知道各种选项卡由 chrome 任务管理器处理，该管理器将每个选项卡视为并行进程。因此，如果我的问题的答案是否定的，我们能否以某种方式利用这个任务管理器来达到同样的效果？也许使用一些隐藏的标签？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:22:03.450

这可以通过 Web Workers 来实现：http: [//www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

# asp.net-mvc - 根据数据库值更改行颜色

> ID：11395863
> 
> 赞同：3
> 
> 时间：2012-07-09T13:17:37.663
> 
> 标签：asp.net-mvc

我将任务存储在数据库中。每个任务都可以解决或打开，因此我根据状态创建了一个`isSolved`包含`true`或`false`在数据库中的列。

现在我想显示所有任务的列表，并将已解决任务的行的背景颜色设置为绿色，将未解决的任务设置为红色。但是我怎样才能在`.cshtml`文件中实现这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-09T18:39:05.343

您可以使用`@()`来在视图内进行条件检查。

```
<ul>
 @foreach(var task in Model) // Model is your list of tasks
 {
  <li class="@(task.isSolved ? "solved" : "unsolved")">@task.Description</li>
 }
<ul> 
```

**CSS**

```
li.solved
{
   color: green;
}

li.unsolved
{
  color: red;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-09T13:21:11.237

根据状态为每个元素添加一个类。假设您正在渲染`TaskVM`主 VM 中的列表（我使用`ul`标签，但它适用于任何其他标签）：

```
<ul>
 @foreach(var task in Model.Tasks)
 {
  <li class="@task.Color" >text</li>
 }
<ul> 
```

您的`TaskVM.Color`财产将类似于

```
public string Color
{
 get { return isSolved ? "Green" : "Red"; }
} 
```

当然，你有一个 CSS 规则：

```
.Green {
 background-color:#33CC00;
}
.Red {
 background-color:#FF333;
} 
```

# c++ - 为什么将返回移动到函数的末尾效率较低？

> ID：11395870
> 
> 赞同：5
> 
> 时间：2012-07-09T13:17:56.810
> 
> 标签：c++, performance, optimization

**编辑：删除 UB 后（好地方，我错过了），时间或多或少相同。将标记版主删除它。**

这两个函数是相同的，除了在两个分支的 ,`foo`内都有返回，而在末尾有一个：`if``goo``return`

```
int foo()
{
    static int x = 0;
    if ( x )
    {
        x > 2 ? x = 0 : ++x;
        return x-1;
    }
    else
    {
        x++;
        return x-1;
    }
}
int goo()
{
    static int x = 0;
    if ( x )
    {
        x > 2 ? x = 0 : ++x;
    }
    else
    {
        x++;
    }
    return x-1;
} 
```

这些数字只是为了让优化不会太费力，函数调用也不会被优化掉。在 MSVS 2010 上进行了**全面优化。**

**调用函数4000000000**次，采样 10 次，`foo`总是更快：

 ***   `foo`-平均**8830 毫秒**
*   `goo`-平均**8703 毫秒**

差异很小，但它就在那里。为什么？另外，为什么编译器不将它们优化为相同的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:21:29.350

看一下汇编输出，goo() 的第一个分支中可能会跳转到函数的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:21:42.880

我假设这是因为在 each 中返回`if`，在操作完成的那一刻，`foo`将返回计算的变量。

`goo`，即使认为它做同样的事情，除了两个返回，仍然需要检查`else`语句。这需要一些时间（非常小），但正如你所看到的，它是可测量的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-09T13:29:55.923

如果 foo 结束括号“if”和“else”将不会被执行。归来后

声明控件将直接得到函数的末尾大括号。

这就是为什么 foo 将花费更少的时间。**

# facebook - 无法为我的应用程序通过 FB OAuth

> ID：11395874
> 
> 赞同：0
> 
> 时间：2012-07-09T13:18:09.863
> 
> 标签：facebook

我们最初在 BB 应用程序上遇到了问题。每当我们使用身份验证 URL 时，我们都会卡在浏览器中：http: [//www.facebook.com/dialog/oauth? scope=publish_stream%2Coffline_access&redirect_uri=http%3A%2F%2Fwww.facebook.com%2Fconnect%2Flogin_success.html&response_type=token&display=触摸&client_id=127229817336080](http://www.facebook.com/dialog/oauth?scope=publish_stream,offline_access&redirect_uri=http://www.facebook.com/connect/login_success.html&response_type=token&display=touch&client_id=127229817336080)

有趣的是响应有什么问题，因为即使是桌面浏览器也卡住了。我们向 FB 提交了问题，但仍在寻找解决方法。任何想法/想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-23T08:58:00.210

这里没有错，我刚刚验证了你的应用程序没有问题......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T05:00:05.913

甚至我们在验证我们的 FB 应用程序时也遇到了类似的问题。身份验证窗口用于挂断，没有任何事情发生，并且症状与您所面临的相同。可能这可能不是您问题的答案，但如果您的应用程序在非标准端口上运行，则可能值得知道 FB SDK 存在此类问题。标准端口是 80 和 443。一旦我们开始在这些端口上运行我们的应用程序，错误就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T07:39:51.560

怎么了 ？我刚刚安装了具有 2 个额外权限的应用程序（以我身份发布和离线访问令牌）（请记住离线访问令牌将不可用尝试使用长时间令牌）

# ios - 放大缩小 iOS 版 phoneGap

> ID：11395876
> 
> 赞同：1
> 
> 时间：2012-07-09T13:18:24.890
> 
> 标签：ios, cordova, phonegap-plugins

我正在使用 HTML5/PhoneGap 为 iOS 开发一个学习型应用程序，但在放大缩小功能方面遇到了一些问题。据我所知，PhoneGap 在 UIwebview 内运行应用程序。所以放大缩小功能应该在PhoneGap中自动工作，但它不工作，虽然它在Safari浏览器上工作。有人可以指导我如何实现此功能。

虽然我也设置了 uiwebview mutitouch 启用。在 mainviewcontrollers webview 内完成加载..

```
[theWebView setMultipleTouchEnabled:YES]; 
```

提前致谢。请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T09:35:43.850

最后，我在我的 iOS 手机间隙应用程序中实现了 Zoom in Zoom out。

我得到的解决方案是，您需要在主视图控制器的 viewdidLoad 方法中设置 scalesPageToFit 属性。无需更改任何 HTML/js 代码

```
- (void) viewDidLoad
{
[super viewDidLoad];

self.webView.scalesPageToFit = YES;
} 
```

现在它的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T10:42:52.067

我得到了另一个替代解决方案。它需要更改 main/Root index.html 文件。添加这样的元标记

```
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1.5, user-scalable=yes"> 
```

并且无需编辑本机代码中的任何文件，如 mainviewcontroller.m 或类似的其他文件。

它比以前的解决方案工作得更好。

# tridion - Tridion 2011 SP1 - 传输服务无法传输

> ID：11395886
> 
> 赞同：5
> 
> 时间：2012-07-09T13:18:45.107
> 
> 标签：tridion, tridion-2011

当我发布时，我收到以下错误：

```
Transport service failed to transport. <Summary state="Failed" referenceId="tcm:0-122-66560"><Error>Transport failed for transaction: tcm:0-122-66560\. Error while generating transaction summary.null</Error><Processing><Context topic="Content Delivery"><IsRollbackOnFailure /></Context></Processing><Target /></Summary> 
```

cd_core.log 包含以下内容：

```
2012-07-09 13:41:07,497 DEBUG TransportService - Starting handing of a transaction
2012-07-09 13:41:07,513 INFO  TransactionProcessor - No existing transport transaction information for: tcm:0-121-66560 creating new transaction state
2012-07-09 13:41:07,513 DEBUG TransactionHeader - Writing[TransactionHeader transactionId=tcm:0-121-66560 control=COMMIT] to C:\Temp\tcm_0-121-66560.Content\t
ransaction.xml
2012-07-09 13:41:07,513 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-07-09 13:41:07,513 DEBUG InstructionEncoder - Transaction state could not be serialized to file. Serialization error.
2012-07-09 13:41:07,513 DEBUG InstructionEncoder - Transaction state could not be serialized to file. Serialization error.
2012-07-09 13:41:07,513 INFO  TransportService - Starting transport handling of transaction: tcm:0-121-66560
2012-07-09 13:41:07,513 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-07-09 13:41:07,513 INFO  TransportPoolManager - Creating a new TransportPoolConnector, because no available connectors in connection pool
2012-07-09 13:41:07,513 DEBUG TransportPoolConnector - Configuring TransportPoolConnector.
2012-07-09 13:41:07,513 DEBUG DestinationProgressWorker - Starting retrieving active transactions at destination: EkJ8TTiKBx4qU16og0f3wg==
2012-07-09 13:41:07,513 DEBUG DestinationProgressWorker - Found 0 transactions in progress and 0 waiting transactions.
2012-07-09 13:41:07,513 DEBUG TransportPoolManager - Connector is registered for reuse: Local[Location[c:\tridion\incoming]] available: 1
2012-07-09 13:41:07,513 INFO  DestinationController - Transaction fits inside current window, proceeding transaction: tcm:0-121-66560
2012-07-09 13:41:07,513 DEBUG TransactionManager - Destination is available for transport: EkJ8TTiKBx4qU16og0f3wg==
2012-07-09 13:41:07,513 DEBUG TransactionManager - All destinations are available for transport of transaction: tcm:0-121-66560
2012-07-09 13:41:07,513 DEBUG InstructionEncoder - Transaction state could not be serialized to file. Serialization error.
2012-07-09 13:41:07,513 INFO  ZipWorker - Preparing TransportPackage for id: tcm:0-121-66560
2012-07-09 13:41:07,513 DEBUG ZipWorker - Zipping Transportpackage: c:\Temp\tcm_0-121-66560.Content
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/components.xml
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/instructions.xml
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/Pages/Test Website/_XSL/Nav.xsl
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/pages.xml
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/Schemas/tcm_10-25-8
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/schemas.xml
2012-07-09 13:41:07,513 DEBUG ZipUtils - Adding tcm_0-121-66560.Content/transaction.xml
2012-07-09 13:41:07,529 DEBUG InstructionEncoder - Transaction state could not be serialized to file. Serialization error.
2012-07-09 13:41:07,529 DEBUG ZipWorker - Zipping has been completed for transaction: tcm:0-121-66560
2012-07-09 13:41:07,529 DEBUG StepPrepare - Zipping has been completed successfully for transaction: tcm:0-121-66560
2012-07-09 13:41:07,529 DEBUG DestinationControllerFactory - Returning existing destination controller.
2012-07-09 13:41:07,529 DEBUG InstructionEncoder - Transaction state could not be serialized to file. Serialization error.
2012-07-09 13:41:07,529 ERROR TransactionManager - Error while generating transaction summary.
javax.xml.bind.JAXBException: null
    at javax.xml.bind.ContextFinder.newInstance(Unknown Source) ~[na:1.6.0_26]
    at javax.xml.bind.ContextFinder.find(Unknown Source) ~[na:1.6.0_26]
    at javax.xml.bind.JAXBContext.newInstance(Unknown Source) ~[na:1.6.0_26]
    at javax.xml.bind.JAXBContext.newInstance(Unknown Source) ~[na:1.6.0_26]
    at com.tridion.util.JAXBUtil.registerContext(JAXBUtil.java:93) ~[cd_core.jar:na]
    at com.tridion.util.JAXBUtil.getContext(JAXBUtil.java:68) ~[cd_core.jar:na]
    at com.tridion.util.JAXBUtil.marshalToString(JAXBUtil.java:107) ~[cd_core.jar:na]
    at com.tridion.transport.model.transaction.context.StepPrepare.execute(StepPrepare.java:49) ~[cd_transport.jar:na]
    at com.tridion.transport.model.transaction.context.TransactionProcessor.transport(TransactionProcessor.java:63) ~[cd_transport.jar:na]
    at com.tridion.transport.TransactionManager.transport(TransactionManager.java:38) ~[cd_transport.jar:na]
    at com.tridion.transport.TransportService.handleTransaction(TransportService.java:228) [cd_transport.jar:na]
Caused by: java.lang.ClassNotFoundException: com/sun/xml/bind/v2/ContextFactory
    at java.lang.Class.forName0(Native Method) ~[na:1.6.0_26]
    at java.lang.Class.forName(Unknown Source) ~[na:1.6.0_26]
    at javax.xml.bind.ContextFinder.safeLoadClass(Unknown Source) ~[na:1.6.0_26]
    ... 11 common frames omitted 
```

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-09T13:54:50.163

检查您的 ..\Tridion\lib\ 文件夹 - 如果文件：

jaxb-api.jar

jaxb-impl.jar

在那里，删除它们，重新启动发布者和传输服务，然后重新测试。

# sql - ISDATE() 带偏移量的日期时间字符串

> ID：11395888
> 
> 赞同：2
> 
> 时间：2012-07-09T13:18:54.467
> 
> 标签：sql, sql-server-2008

我需要检查一个值是否是一个日期，但是`ISDATE()`当遇到一个值时，函数会返回 0，例如`2012-07-21 00:00:00+02:00`由于偏移量。我的问题是我不能简单地转换值，实际上`ISDATE()`是为了在查询中使用来检查值是否是转换前的日期（参见下面的示例）。

```
SELECT p.propertyid 
FROM   property p 
WHERE  CASE Isdate(p.[value]) 
         WHEN 1 THEN 
           CASE 
             WHEN Cast(p.[value] AS DATETIME) >= Cast('7/1/2012' AS DATETIME) 
           THEN 1 
             ELSE 0 
           END 
         ELSE 0 
       END = 1 
```

所以我想知道如何检查`p.[value]`示例中的是否是日期。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-07-09T13:53:18.910

SQL Server 2012 让这一切变得简单。

```
select p.propertyid from Property p 
where try_convert(datetyime,p.[enddate])  is not null 
```

# wpf - 样式化 WPF 组合框

> ID：11395889
> 
> 赞同：1
> 
> 时间：2012-07-09T13:18:55.370
> 
> 标签：wpf, xaml, combobox, styles

那是我的组合框：

```
<ComboBox Width="320" Height="35" ItemsSource="{Binding Source={StaticResource viewModel}, Path=ItemsSource, Mode=OneWay}" SelectedItem="{Binding Source={StaticResource viewModel}, Path=SelectedItem, Mode=TwoWay}" /> 
```

![在此处输入图像描述](../Images/484349e4ce24ca444420be9a4f6e9281.png)

1.  如何去除圆角？
2.  如何将背景设置为简单的白色？

是否可以使用 style 属性解决这个问题？

# c# - NHibernate 在从一个项目调用时工作，但不是从另一个项目调用

> ID：11395896
> 
> 赞同：0
> 
> 时间：2012-07-09T13:19:34.090
> 
> 标签：c#, .net, nhibernate

我正在使用 NHibernate 创建我的第一个应用程序。不幸的是，我遇到了一个我无法解决的问题：

我正在从包含 CRUD 方法和 NHibernateHelper 类的“DAL”项目访问数据库。

我编写了一个测试项目，并尝试将一个对象添加到 DB - 它运行良好。但是，当我尝试从应用程序的 ViewModel（它也在另一个项目中）调用相同的方法时，它会在下面的代码中的**configuration.BuildSessionFactory()处引发错误：**

```
private static ISessionFactory SessionFactory
    {
        get
        {
            if (_sessionFactory == null)
            {
                var configuration = new Configuration();
                configuration.Configure();
                configuration.AddAssembly(typeof(Address).Assembly);
                _sessionFactory = configuration.BuildSessionFactory();
            }
            return _sessionFactory;
        }
    } 
```

例外：

```
NHibernate.HibernateException: Could not create the driver from NHibernate.Driver.OracleDataClientDriver.
System.Reflection.TargetInvocationException: {"Exception has been thrown by the target of an invocation."}
System.NullReferenceException: {"Object reference not set to an instance of an object."} 
```

在我的测试项目中，我添加了对 Oracle.DataAccess.dll 的引用并创建了 App.config，因为没有它会引发相同的错误：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<runtime>
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <qualifyAssembly partialName="Oracle.DataAccess"
         fullName="Oracle.DataAccess,
                        Version=4.112.2.0,
                       Culture=neutral,
                       PublicKeyToken=89b483f429c47342" />
</assemblyBinding>
</runtime>
</configuration> 
```

我在包含 ViewModel 的项目中做了同样的事情，我需要从数据库中获取数据，但它没有帮助。我还为该参考将 Copy Local 设置为 True，但无济于事。

这是我的 App.config：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-configuration xmlns="urn:nhibernate-configuration-2.2">
  <session-factory>
    <property name="connection.provider">
      NHibernate.Connection.DriverConnectionProvider
    </property>
    <property name="dialect">
      NHibernate.Dialect.Oracle10gDialect
    </property>
    <property name="connection.driver_class">
      NHibernate.Driver.OracleDataClientDriver
    </property>
    <property name="connection.connection_string">
      User Id=****;
      Password=****;
      Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=
      (PROTOCOL=TCP)(HOST=localhost)(PORT=1521)))
      (CONNECT_DATA=(SERVICE_NAME=xe)));
      Pooling=true;
      Enlist=false;
      Statement Cache Size=50;
      Min Pool Size=10;
      Incr Pool Size=5;
      Decr Pool Size=2;
    </property>
    <property name="show_sql">
      true
    </property>
  </session-factory>
</hibernate-configuration> 
```

我正在使用 NHibernate v 3.3.1.4000、Oracle 11g xe 和 64 位 Windows 7（我无法选择在 32 位或 64 位上进行调试，只有一种选择：“Active (Any CPU)”）

我可以从测试项目中使用它但我不能从另一个项目中使用它的原因是什么？

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:30:58.470

您的 Web 项目或 DAL 中是否引用了驱动程序的 dll？它应该在您的 Web 项目中，将 Copy Local 设置为 true，请参阅此类似[问题](https://stackoverflow.com/questions/6141703/could-not-create-the-driver-from-nhibernate-driver-oracledataclientdriver)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T07:23:39.470

问题已经解决了。我必须将 app.config 放在主项目中，而不是放在我使用数据库的 dll 库中。我不知道放在类库中的 app.config 会被忽略。

# sql - 从视图中获取不同的值

> ID：11395897
> 
> 赞同：0
> 
> 时间：2012-07-09T13:19:37.383
> 
> 标签：sql, sql-server

我有两张桌子和一个视图。有内联查询

```
select * from View_tbl where sector = '04' 
```

但是当我为此创建存储过程时

```
create proc spTest
@sector varchar(2)
as
select * from View_tbl where sector = @sector 
```

两者都返回具有不同值的数据集。SP 也返回那些在 Main tbl 中但不在视图中的列。

请有任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:01:29.410

如果您的视图的定义发生了变化，您可能需要重新编译存储过程。

当您`select *`在存储过程中使用时，这将被编译为明确的列列表。视图定义的后续更改可能不会反映在 sp 的定义中（取决于其他一些因素和 SQL Server 的版本）。

一般来说，我尽量避免`select *`在存储过程中明确编码列列表。这避免了对重新编译的依赖。

```
create proc spTest
    @sector varchar(2)
as
    select
        col1,
        col2,
        col3
from
    View_tbl
where
    sector = @sector 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:03:32.570

我的猜测是您偶然在两个地方有 SP（检查 Master）并且它在错误的数据库中执行 SP 可能是您的 sp 的旧版本正在放置...也许完全限定您的表与数据库作为排序术语测试.

# perl - 如何为 log4perl 配置 DateFileAppender

> ID：11395901
> 
> 赞同：1
> 
> 时间：2012-07-09T13:19:50.363
> 
> 标签：perl, logging, log4perl

我知道如何配置 log4j，以便日志文件自动轮换，并将日期附加到日志文件中。？

```
log4j.appender.schedulerService.Directory = ${logdir}
log4j.appender.schedulerService.Prefix = web.log_
log4j.appender.schedulerService.Suffix = 
```

我怎样才能用 log4perl 达到同样的效果？

我为 log4Perl 尝试了相同的配置，但看起来文件名参数是强制性的。任何帮助表示赞赏。

```
Mandatory parameter 'filename' missing in call to Log::Dispatch::File::_make_handle 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:13:45.437

查看[Log::Dispatch::File::Stamped](http://search.cpan.org/~cholet/Log-Dispatch-File-Stamped-0.10/lib/Log/Dispatch/File/Stamped.pm) - 它将直接写入带日期标记的日志文件，避免实际轮换它（只要检测到日期已更改，它就会启动一个新的日志文件）。

```
log4perl.appender.Logfile=Log::Dispatch::File::Stamped
log4perl.appender.Logfile.min_level=info
log4perl.appender.Logfile.filename=foo.log
log4perl.appender.Logfile.stamp_fmt=%Y%m%d 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:12:54.670

这是一个常见问题解答：[如何在午夜自动翻转我的日志文件？](http://p3rl.org/Log%3a%3aLog4perl%3a%3aFAQ#How-can-I-roll-over-my-logfiles-automatically-at-midnight-)

* * *

子类[Log::Dispatch::FileRotate](http://p3rl.org/Log%3a%3aDispatch%3a%3aFileRotate)添加自定义文件扩展名：

```
package Log::Dispatch::FileRotate::FileExtension;
use parent 'Log::Dispatch::FileRotate';
use strictures;
use SUPER qw();
use Time::Piece qw();

sub new {
    my ($self, %p) = @_;
    $self = $self->SUPER(%p);
    $self->{extension} = $p{extension};
    return $self;
}

sub log_message {
    ### lines 177..235 from parent class go here
        warn localtime() . " $$ Rotating\n" if $self->{debug};
        my $stamp = Time::Piece->localtime->strftime($self->{extension});
        warn "$$ rename $name $stamp\n" if $self->{debug};
        rename $name, sprintf('%s.%s', $name, $stamp);
        warn localtime() . " $$ Rotating Done\n" if $self->{debug};
    ### lines 257..266 from parent class go here
}

1; 
```

* * *

用法：

```
use Log::Dispatch::FileRotate::FileExtension qw();
my $file = Log::Dispatch::FileRotate::FileExtension->new(
    name => 'file1',
    min_level => 'info',
    filename  => 'Somefile.log',
    DatePattern => 'yyyy-MM-dd',
    extension => '%F',
); 
```

# iphone - TailTruncation 不适用于 OHAttributedLable

> ID：11395903
> 
> 赞同：0
> 
> 时间：2012-07-09T13:20:03.753
> 
> 标签：iphone, word-wrap

我有 OHAttributedLable 如下

```
 lblHeaderTitle =[[OHAttributedLabel alloc]init];
    [lblHeaderTitle setBackgroundColor:[UIColor clearColor]];
    [lblHeaderTitle setFrame:CGRectMake(15, 8,(WidthForBoldText(txt1))+45, height)];

    //[lblHeaderTitle setNumberOfLines:2];
    [lblHeaderTitle setLineBreakMode:UILineBreakModeTailTruncation];
    [lblHeaderTitle setNumberOfLines:0];
    lblHeaderTitle.attributedText = attrStr; 
```

它在一行中显示所有内容，其余部分不可见

现在的问题是我无法在这个标签中换行或截断文本，任何人都可以帮我解决这个问题。我想要的是如果我的文字是

"Abcdefghijklmnopqrstuvwxyz" 然后它将显示

“Abcdefghijklmn...”或

"Abcdefghijklmn

opqrstuvwxyz"

任何事情都会奏效。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:39:19.690

```
lableName.numberOfLines = 0;

lableName.lineBreakMode = UILineBreakModeWordWrap; 
```

# jasper-reports - JasperReports：使用外部字体从 java 生成错误

> ID：11395907
> 
> 赞同：0
> 
> 时间：2012-07-09T13:20:27.747
> 
> 标签：jasper-reports, ireport

我的程序为阿拉伯字母生成错误：

```
cannot assign instance of net.sf.jasperreports.engine.base.JRBaseStaticText to field 
net.sf.jasperreports.engine.base.JRBaseParagraph.paragraphContainer of type 
net.sf.jasperreports.engine.JRParagraphContainer in instance of 
net.sf.jasperreports.engine.base.JRBaseParagraph 
```

我在用：

*   iReport 4.0.2
*   视窗
*   jasperreports-fonts-4.0.2.jar
*   jasperreports 4.0.2.jar
*   jasperreports-extensions-3.5.3

我的 .jrxml 文件是：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report1" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
    <parameter name="strTitle" class="java.lang.String"/>
    <field name="vchDhirams" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="21" splitType="Stretch">
            <staticText>
                <reportElement x="221" y="1" width="100" height="20"/>
                <textElement markup="none"/>
                <text><![CDATA[$P{strTitle}]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="35" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="37" splitType="Stretch">
            <staticText>
                <reportElement x="294" y="17" width="135" height="20"/>
                <textElement>
                    <font pdfEncoding="Identity-H" isPdfEmbedded="true"/>
                </textElement>
                <text><![CDATA[ستلام قسيمة]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="125" splitType="Stretch"/>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

我的错在哪里？请给我建议。

提前致谢。

# objective-c - Facebook要求授权已经授权的用户

> ID：11395909
> 
> 赞同：4
> 
> 时间：2012-07-09T13:20:30.570
> 
> 标签：objective-c, ios, facebook

我在 Facebook 应用程序身份验证过程中遇到问题，我的 Facebook 帐户已经授权该应用程序，但有时当我在设备上运行该应用程序时，它会打开 Facebook 应用程序并且对话框显示“您已经授权此应用程序”，这会发生使用同一个 Facebook 帐户在同一设备上多次。

`NSUserDefaults`此外，我在分配`Facebook`类对象时保存了所有需要的数据：

```
facebook = [[Facebook alloc] initWithAppId:appID andDelegate:self];

NSUserDefaults *userDefault = [NSUserDefaults standardUserDefaults];

if([userDefault objectForKey:@"FBAccessTokenKey"] && [userDefault objectForKey:@"FBExpirationDateKey"])
{
    facebook.accessToken = [userDefault objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [userDefault objectForKey:@"FBExpirationDateKey"];
} 
```

也在`fbDidLogin`和`fbDidExtendToken` `FBSessionDelegate`方法中：

```
- (void)fbDidLogin 
{
NSLog(@"fbDidLogin");
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[facebook accessToken] forKey:@"FBAccessTokenKey"];
[defaults setObject:[facebook expirationDate] forKey:@"FBExpirationDateKey"];
[defaults synchronize];
}
- (void)fbDidExtendToken:(NSString *)accessToken expiresAt:(NSDate *)expiresAt 
{
NSLog(@"token extended");
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:accessToken forKey:@"FBAccessTokenKey"];
[defaults setObject:expiresAt forKey:@"FBExpirationDateKey"];
[defaults synchronize]; 
} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T14:29:15.867

这是[旧版本 Facebook SDK 中的错误](http://developers.facebook.com/bugs/330868496993650/)，但现在已解决。

[下载最新版本的 iOS SDK](http://developers.facebook.com/ios/)，您将摆脱它。

# sql-server-2008 - 在重新编号主键列值时合并 SQL Server 2008 中的两个表

> ID：11395910
> 
> 赞同：-1
> 
> 时间：2012-07-09T13:20:33.393
> 
> 标签：sql-server-2008, merge

我有两个表`tab1`和`tab2`（具有相同的架构）驻留在不同的数据库中。这些表有一个主键列`aud_ID`，其值可以相似。

请注意主键列`aud_ID`不是标识列。

我的任务是将两个表的数据合并到第三个表中`tab3`（具有相同的架构）。这里的挑战是重新编号 的主键列值`tab3`。

1.  先将的主键列`tab1`复制到`tab3`，然后`tab2`将数据插入到`tab3`开始的最大值中`tab1.aud_id`。

    或者

2.  主键列`aud_id`从 1 开始重新编号。

知道如何实现这一目标吗？

问候，普拉尚特..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:25:18.440

如果`aud_id`值是数字（并且您不需要避免空白），您可以这样做：

```
insert into tab3 (/* Columns */)
select (aud_id *2)-1,/* Other Columns */ from tab1
union all
select (aud_id *2),/* Other Columns */ from tab2 
```

这样，您可以保证生成唯一值，而无需检查任一表。通过保持公式化，如果需要，您可以使用它来复制其他表中的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:27:07.520

假设您不需要保留任何现有`aud_ID`值：

```
INSERT dbo.tab3(aud_ID, other cols)
SELECT aud_ID = ROW_NUMBER() OVER (ORDER BY aud_ID), other cols
FROM
(
  SELECT aud_ID, other cols FROM dbo.tab1
  UNION ALL
  SELECT aud_ID, other cols FROM dbo.tab2
) AS x; 
```

# lazy-loading - 延迟加载或巨大的 CSS 精灵（9MB 大小）

> ID：11395911
> 
> 赞同：2
> 
> 时间：2012-07-09T13:20:38.227
> 
> 标签：lazy-loading, sprite, css-sprites

条件：

*   这是一个电影网站，大约有 1000 张 15kb 的图像

*   大约 70% 的图像将在页面访问时加载

*   图片的有效期很长。

我想我会选择 CSS-sprites，因为大多数图像都会被访问者以任何方式加载。但是所有图像的 CSS 精灵都是 9MB 和 15000x2000px。即使我将它分成 3 个精灵，它也是 3MB ：S

也许这么大的精灵会引起一些问题？

浏览器是否会缓存图像，即使它们是 3-9MB？

大像素尺寸对浏览器有什么问题吗？

延迟加载还是 CSS-sprite，我应该选择什么？

请给我建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:28:07.510

是的，这会导致问题：

*   由于精灵大小和尺寸，它将显着消耗CPU功率
*   如果您经常在一页上使用它，它甚至可以减少滚动和至少 DOM 操作操作
*   9MB 太大了，你有那个精灵的链接吗？

浏览器会缓存它，如果标题设置正确，那不是问题

而且您不想加载站点必需的 9MB Sprite ！！！移动的 ？！？！！

格克斯塔

# c# - 将 XML 文件读入 TreeView

> ID：11395912
> 
> 赞同：3
> 
> 时间：2012-07-09T13:20:42.970
> 
> 标签：c#, xml, treeview, visual-studio-2005

我正在尝试使用 TreeView 控件将 XML 文件加载到我的 GUI 上。但是，我正在为我的 XML 文件使用专有布局。

XML 的结构如下：

```
<ConfiguratorConfig xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <Section>
        <Class ID="Example" Name="CompanyName.Example" Assembly="Example.dll">
            <Interface>
                <Property Name="exampleProperty1" Value="exampleValue" />
                <Property Name="exampleProperty2" Value="exampleValue" />
                <Property Name="exampleProperty3" Value="exampleValue" />
            </Interface>
        </Class>
    </Section>
</ConfiguratorConfig> 
```

我希望输出的结构如下：

```
Class "Example"
    Property "exampleProperty1"
    Property "exampleProperty2"
    Property "exampleProperty3" 
```

我对使用 XML 完全陌生。过去几个小时我一直在网上搜索，但没有任何结果有帮助。有些已经接近了，但可能属性不会显示，或者节点的名称不会显示，等等。

我在 Visual Studio 2005 中用 c# 编写。感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:35:46.687

您可以使用 XmlDocument 遍历节点，您可以将此演示放在控制台应用程序的 Main 方法中：

```
 string xml = @"<ConfiguratorConfig xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"">
<Section>
    <Class ID=""Example"" Name=""CompanyName.Example"" Assembly=""Example.dll"">
        <Interface>
            <Property Name=""exampleProperty1"" Value=""exampleValue"" />
            <Property Name=""exampleProperty2"" Value=""exampleValue"" />
            <Property Name=""exampleProperty3"" Value=""exampleValue"" />
        </Interface>
    </Class>
</Section></ConfiguratorConfig>";

        XmlDocument doc = new XmlDocument();
        doc.LoadXml(xml);

        foreach (XmlNode _class in doc.SelectNodes(@"/ConfiguratorConfig/Section/Class"))
        {
            string name = _class.Attributes["ID"].Value;
            Console.WriteLine(name);

            foreach (XmlElement element in _class.SelectNodes(@"Interface/Property"))
            {
                if (element.HasAttribute("Name"))
                {
                    string nameAttributeValue = element.Attributes["Name"].Value;
                    Console.WriteLine(nameAttributeValue);
                }
            }
        } 
```

如果您使用的 .NET 版本高于 3.0，则可以使用 XDocument 类（如果可以选择，建议使用）。

```
 XDocument xdoc = XDocument.Parse(xml);
        foreach (XElement _class in xdoc.Descendants("Class"))
        {
            string name = _class.Attribute("ID").Value;
            Console.WriteLine(name);

            foreach (XElement element in _class.Descendants("Property"))
            {
                XAttribute attributeValue = element.Attribute("Name");
                if (attributeValue != null)
                {
                    string nameAttributeValue = attributeValue.Value;
                    Console.WriteLine(nameAttributeValue);
                }
            }
        } 
```

# excel - 如何保存宏的使用日志

> ID：11395919
> 
> 赞同：0
> 
> 时间：2012-07-09T13:20:58.790
> 
> 标签：excel, vba, logging

我有一个相当愚蠢的问题。我有一个宏（链接到一个按钮），它将单元格 A1:A2 从一个工作表（命名为 FP）复制到另一个工作表（日志）。每次点击宏按钮时，我都打算在日志表上复制这两个单元格。我现在面临的问题是，当我多次使用该按钮时，这些单元格会相互复制，而不是使用下一个可用行来粘贴单元格。

这就是我现在所拥有的，我尝试将 'Rowcount+1' 更改为 'RowCount+2' 但没有奏效。任何帮助表示赞赏。

```
DHRSheet.Select
 Range("A1:A2").Select
 Selection.Copy

 LogSheet.Select
 RowCount = LogSheet.UsedRange.Rows.Count
 Dim r As Integer
 r = RowCount + 1
 Dim infocell As Range
 Set infocell = Cells(r, 1)
 infocell.Select
 ActiveSheet.Paste
 infocell.Value = DHRSheet.Name & "$" & infocell.Value

 DHRSheet.Select
 ActiveWorkbook.Save 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:52:27.903

这是我使用的一个非常可靠的函数，它总是返回工作表的最后一行而不会失败：（对于您的简单使用可能过多，但我总是推荐它）

```
Public Function LastRowOfSheet(ByVal TestSheetNumber As Variant)
'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
'   Input: Sheet index # or Sheet name
'   Output: Last row of sheet.
''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    Dim intNumberOfRowsInWorksheet As Long

    intNumberOfRowsInWorksheet = Sheets(TestSheetNumber).UsedRange.Rows.Count
    intNumberOfRowsInWorksheet = intNumberOfRowsInWorksheet +     Sheets(TestSheetNumber).UsedRange.Row - 1

    LastRowOfSheet = intNumberOfRowsInWorksheet
End Function 
```

我会清理你上面的代码并使用这样的东西：

```
Sub Move2RowsToEnd()

    Dim iNextRowOfOutput As Long
    Dim iRowNumber As Long
    '- use the function to find the last row of the output sheet. we'll be pasting to the first row after.
    iNextRowOfOutput = (LastRowOfSheet("Log") + 1)

    '- you can adjust this for loop to loop through additional cells if you need to paste more than 2 rows in the future.
    For iRowNumber = 1 To 2
        '- for each row of input (2 total) set the value of the output sheet equal to it.
        Sheets("Log").Range("A" & iNextRowOfOutput).Value = Sheets("namedFP").Range("A"     & iRowNumber).Value
        iNextRowOfOutput = iNextRowOfOutput + 1
    Next iRowNumber

    '- not sure which of these you want to save (one or both)
    Sheets("namedFP").Save
    Sheets("Log").Save

End Sub 
```

只需将函数粘贴到子例程的上方或下方，如果您对“Move2RowsToEnd”代码有任何问题或疑问，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T14:36:47.273

这是你正在尝试的吗？

```
Sub Sample()
    Dim LogSheet As Worksheet, DHRSheet As Worksheet
    Dim lrow As Long

    '~~> Change this as applicable
    Set LogSheet = Sheets("Sheet1")
    Set DHRSheet = Sheets("Sheet2")

    With LogSheet
        lrow = LogSheet.Range("A" & .Rows.Count).End(xlUp).Row + 1

        DHRSheet.Range("A1:A2").Copy .Range("A" & lrow)
    End With
End Sub 
```

# caching - 内存缓存垃圾清理/清除过期

> ID：11395920
> 
> 赞同：2
> 
> 时间：2012-07-09T13:21:00.457
> 
> 标签：caching, memcached

我正在使用 memcache 来存储阻碍 MYSQL/PHP 限制的更大会话数据。然而，一件事是这些可能不会再次被请求，因此“惰性”内存缓存清除可能不起作用。

我试图确定是否有一个函数可以清除所有过期的缓存，而不必遍历所有缓存。

或者...如果memcache只会消耗这么多内存，然后根据需要清除过期的内存以腾出空间..

只是寻找处理这些缓存的最佳方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:24:44.530

> 然而，一件事是这些可能不会再次被请求，因此“惰性”内存缓存清除可能不起作用。我试图确定是否有一个函数可以清除所有过期的缓存，而不必遍历所有缓存。

我不太确定你的意思是什么。没有必要清除过期的东西。如果它过期了，它就不再重要了。您不会得到这些结果，因为它们不再有效（过期）。

> 或者...如果memcache只会消耗这么多内存，然后根据需要清除过期的内存以腾出空间..

好吧，如果您有过期的项目，它们将被覆盖，所以我不明白问题是什么。

假设您有 2 个键/值对的空间。如果你有一个过期了，一个已经使用了但没有过期，你需要保存第三个，你可以。您实际上不需要清除任何东西，因为它会删除过期的。

# r - 如何按周对 data.frame 进行子集化然后求和？

> ID：11395927
> 
> 赞同：10
> 
> 时间：2012-07-09T13:21:23.840
> 
> 标签：r, datetime, dataframe

假设我有几年的数据，如下所示

```
# load date package and set random seed
library(lubridate)
set.seed(42)

# create data.frame of dates and income
date <- seq(dmy("26-12-2010"), dmy("15-01-2011"), by = "days")
df <- data.frame(date = date, 
                 wday = wday(date),
                 wday.name = wday(date, label = TRUE, abbr = TRUE),
                 income = round(runif(21, 0, 100)),
                 week = format(date, format="%Y-%U"),
                 stringsAsFactors = FALSE)

#          date wday wday.name income    week
# 1  2010-12-26    1       Sun     91 2010-52
# 2  2010-12-27    2       Mon     94 2010-52
# 3  2010-12-28    3      Tues     29 2010-52
# 4  2010-12-29    4       Wed     83 2010-52
# 5  2010-12-30    5     Thurs     64 2010-52
# 6  2010-12-31    6       Fri     52 2010-52
# 7  2011-01-01    7       Sat     74 2011-00
# 8  2011-01-02    1       Sun     13 2011-01
# 9  2011-01-03    2       Mon     66 2011-01
# 10 2011-01-04    3      Tues     71 2011-01
# 11 2011-01-05    4       Wed     46 2011-01
# 12 2011-01-06    5     Thurs     72 2011-01
# 13 2011-01-07    6       Fri     93 2011-01
# 14 2011-01-08    7       Sat     26 2011-01
# 15 2011-01-09    1       Sun     46 2011-02
# 16 2011-01-10    2       Mon     94 2011-02
# 17 2011-01-11    3      Tues     98 2011-02
# 18 2011-01-12    4       Wed     12 2011-02
# 19 2011-01-13    5     Thurs     47 2011-02
# 20 2011-01-14    6       Fri     56 2011-02
# 21 2011-01-15    7       Sat     90 2011-02 
```

我想总结每周（周日至周六）的“收入”。目前我执行以下操作：

```
Weekending 2011-01-01 = sum(df$income[1:7]) = 487
Weekending 2011-01-08 = sum(df$income[8:14]) = 387
Weekending 2011-01-15 = sum(df$income[15:21]) = 443 
```

但是，我想要一种更强大的方法，它会自动按周求和。我不知道如何自动将数据子集为几周。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-09T13:34:26.950

首先用于`format`将日期转换为周数，然后`plyr::ddply()`计算摘要：

```
library(plyr)
df$week <- format(df$date, format="%Y-%U")
ddply(df, .(week), summarize, income=sum(income))
     week income
1 2011-52    413
2 2012-01    435
3 2012-02    379 
```

* * *

有关 的更多信息`format.date`，请参阅`?strptime`，特别是定义`%U`为周数的位。

* * *

**编辑：**

给定修改后的数据和要求，一种方法是将日期除以 7 以获得表示星期的数字。（或者更准确地说，除以一周中的秒数得到自纪元以来的周数，默认为 1970-01-01。

在代码中：

```
df$week <- as.Date("1970-01-01")+7*trunc(as.numeric(df$date)/(3600*24*7))
library(plyr)
ddply(df, .(week), summarize, income=sum(income))

        week income
1 2010-12-23    298
2 2010-12-30    392
3 2011-01-06    294
4 2011-01-13    152 
```

我没有检查星期界限是否在星期日。您必须检查这一点，并在公式中插入适当的偏移量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-13T19:37:37.027

现在使用 dplyr 很简单。此外，我建议使用`cut(breaks = "week")`而不是`format()`将日期缩短为几周。

```
library(dplyr)
df %>% group_by(week = cut(date, "week")) %>% mutate(weekly_income = sum(income)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-09T13:44:56.970

我用谷歌搜索“将工作日分组到 R 周”并遇到了[这个 SO question](https://stackoverflow.com/questions/8030812/how-can-i-group-days-into-weeks)。你提到你有多年，所以我认为我们需要跟上周数和年份，所以我在那里修改了答案`format(date, format = "%U%y")`

在使用中它看起来像这样：

```
library(plyr) #for aggregating
df <- transform(df, weeknum = format(date, format = "%y%U"))
ddply(df, "weeknum", summarize, suminc = sum(income))
#----
  weeknum suminc
1    1152    413
2    1201    435
3    1202    379 
```

查看`?strptime`所有格式缩写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-09T17:01:52.800

`rollapply`从`zoo`包中尝试：

```
rollapply(df$income, width=7, FUN = sum, by = 7)
# [1] 487 387 443 
```

或者，`period.sum`从`xts`包中使用：

```
period.sum(xts(df$income, order.by=df$date), which(df$wday %in% 7))
#            [,1]
# 2011-01-01  487
# 2011-01-08  387
# 2011-01-15  443 
```

或者，以您想要的格式获取输出：

```
data.frame(income = period.sum(xts(df$income, order.by=df$date), 
                               which(df$wday %in% 7)),
           week = df$week[which(df$wday %in% 7)])
#            income    week
# 2011-01-01    487 2011-00
# 2011-01-08    387 2011-01
# 2011-01-15    443 2011-02 
```

请注意，第一周显示为`2011-00`因为这是在您的数据中输入的方式。您也可以使用`week = df$week[which(df$wday %in% 1)]`which 将匹配您的输出。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-09T15:18:55.687

此解决方案受@Andrie 和@Chase 的影响。

```
# load plyr 
library(plyr)

# format weeks as per requirement (replace "00" with "52" and adjust corresponding year)
tmp <- list()
tmp$y <- format(df$date, format="%Y")
tmp$w <- format(df$date, format="%U")
tmp$y[tmp$w=="00"] <- as.character(as.numeric(tmp$y[tmp$w=="00"]) - 1)
tmp$w[tmp$w=="00"] <- "52"
df$week <- paste(tmp$y, tmp$w, sep = "-")

# get summary
df2 <- ddply(df, .(week), summarize, income=sum(income))

# include week ending date
tmp$week.ending <- lapply(df2$week, function(x) rev(df[df$week==x, "date"])[[1]])
df2$week.ending <- sapply(tmp$week.ending, as.character)

#      week income week.ending
# 1 2010-52    487  2011-01-01
# 2 2011-01    387  2011-01-08
# 3 2011-02    443  2011-01-15 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-01-18T06:09:15.883

df.index = df['week'] #dt变量作为索引

df.resample('W').sum() #sum 使用重采样

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-20T14:30:08.343

使用 dplyr：

```
df %>% 
  arrange(date) %>%
  mutate(week = as.numeric(date - date[1])%/%7) %>%
  group_by(week) %>%
  summarise(weekincome= sum(income)) 
```

除了 date[1]，您可以使用任何日期，从您想要开始每周学习的时间开始。

# asp.net-mvc - MVC 显示图表的最佳方式

> ID：11395931
> 
> 赞同：1
> 
> 时间：2012-07-09T13:21:36.040
> 
> 标签：asp.net-mvc, mschart

我是新手，现在我正在尝试使用 MVC 显示图表。

显示图表有两种可能性：

1.  System.Web.UI.DataVisualization.Charting.Chart
2.  System.Web.Helpers.Chart

这两种解决方案有什么不同？以及之间的优势/劣势是什么？

目前，我尝试以下代码：

控制器：

```
[HttpPost]
    public ActionResult RenderRainfallChart()
    {
        var incomeList = Income.GetList();
        List<string> xValue = new List<string>();
        List<decimal> yValue = new List<decimal>();

        foreach (var item in incomeList)
        {
            xValues.Add(item.Name);
            yValues.Add(item.Amount);
        }

        var key = new System.Web.Helpers.Chart(width: 600, height: 400)
            .AddSeries(
                legend: "IncomeLIst",
                xValue: xValue,
                yValues: yValues)
            .Write();} 
```

选择按钮后，图表将显示在新的浏览器页面上：.../Company/RenderRainfallChart

是否可以在索引站点的 div 容器中显示图表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T20:48:40.390

对于非交互式图表，您可以制作一个 GET 来获取图表的图像，然后在您的网页中简单地放置一个`<img>`指向该 URL 的那个。

您可以使用以下方式获取图表图像的字节：

```
byte[] GetBytes(Chart chart, ChartImageFormat imageFormat)
{
    using (var stream = new MemoryStream())
    {
        chart.SaveImage(stream, imageFormat);
        return stream.ToArray();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T08:12:44.340

谷歌图表 API 可能吗？它使用 JavaScript，因此您必须在页面中写入值或使用 AJAX 检索它们。

# f# - 是否有人拥有或知道 F# 中可用的持久前缀树？

> ID：11395932
> 
> 赞同：2
> 
> 时间：2012-07-09T13:21:36.197
> 
> 标签：f#, ocaml, trie, prefix-tree, persistent-data

对于我的特定应用程序，F# 的 Map 和 Set 的性能相当欠缺。似乎一个不错的前缀特里树会大大提高我的解释器的性能，尤其是在按名称查找符号方面。唯一需要注意的是，它必须对添加和查找操作非常有效（尤其是当键是字符串时），并且对于持久性是不可变的（意味着非破坏性更新）。

如果没有这样的野兽可用，OCaml 或 Haskell 的参考实现将帮助我开始使用。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T16:37:41.103

要关闭此线程（请参阅问题评论）：

[Haskell 实现](http://hackage.haskell.org/packages/archive/bytestring-trie/0.1.4/doc/html/src/Data-Trie-Internal.html#Trie)

[OCaml 实现](http://www.lri.fr/~filliatr/ftp/ocaml/ds/trie.ml.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-15T11:41:36.730

> 似乎一个不错的前缀特里树会大大提高我的解释器的性能，尤其是在按名称查找符号方面。唯一需要注意的是，它必须对添加和查找操作非常有效（尤其是当键是字符串时），并且对于持久性是不可变的（意味着非破坏性更新）。

您的限定词“高效”和“持久不变”是相互排斥的。持久性数据结构（通常）本质上非常低效，通常比命令式数据结构慢 10 倍以上。

如果您想要一个带有符号键的快速字典，那么您需要一个*符号表*。您的公共 API 使用符号作为字符串，但这些在内部通过哈希表转换为小的正整数并返回。然后可以将带有符号作为键的字典表示为由用于表示符号的整数索引的数组。

[我在这里](http://fsharpnews.blogspot.co.uk/2011/08/symbol-tables.html)发表了一篇关于符号表的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T13:44:37.623

所以，我只是从 OCaml 移植了一个。不幸的是，它在 tryFind 方面的运行速度比标准 Map 慢。我在这个线程中问为什么 -[为什么我的 Trie 查找比标准 F# Map 的慢？](https://stackoverflow.com/questions/11471746/why-is-my-trie-lookup-slower-than-that-of-the-standard-f-maps)

这是代码 -

```
[<RequireQualifiedAccess>]
module Trie

type Node<'k, 'v when 'k : comparison> =
    { TrieMap : Map<'k, Node<'k, 'v>>
      TrieKvp : ('k list * 'v) option }
    member inline x.IsEmpty = x.TrieKvp.IsNone && x.TrieMap.IsEmpty

let inline make map kvp =
    { TrieMap = map
      TrieKvp = kvp }

let inline makeEmpty () : Node<'k, 'v> = make Map.empty None

let inline isEmpty (node : Node<'k, 'v>) = node.IsEmpty

let rec tryFind (key : 'k list) node =
    match key with
    | [] ->
        match node.TrieKvp with
        | Some (_, value) -> Some value
        | None -> None
    | keyHead :: keyTail ->
        let optSubNode = Map.tryFind keyHead node.TrieMap
        match optSubNode with
        | Some subNode -> tryFind keyTail subNode
        | None -> None

let inline containsKey key node =
    (tryFind key node).IsSome

let rec addInternal (key : 'k list) value node =
    match key with
    | [] -> make node.TrieMap (Some (key, value))
    | keyHead :: keyTail ->
        let newTrie =
            match Map.tryFind keyHead node.TrieMap with
            | Some subTrie -> subTrie
            | None -> makeEmpty ()
        let newTrie2 = addInternal keyTail value newTrie
        make (Map.add keyHead newTrie2 node.TrieMap) node.TrieKvp

let inline add key value node =
    addInternal key value node

let rec addMany kvps node =
    if Seq.isEmpty kvps then node
    else
        let kvpHead = Seq.head kvps
        let kvpTail = Seq.skip 1 kvps
        let newTrie = add (fst kvpHead) (snd kvpHead) node
        addMany kvpTail newTrie

let inline ofList kvps =
    addMany kvps (makeEmpty ())

let inline ofListBy by kvps =
    let pairs = List.map by kvps
    ofList pairs

let rec foldInternal folder rev node state =
    match node.TrieKvp with
    | Some (_, value) -> folder (Map.fold (fun state key value -> foldInternal folder (key :: rev) value state) state node.TrieMap) (List.rev rev) value
    | None -> Map.fold (fun state key value -> foldInternal folder (key :: rev) value state) state node.TrieMap

let inline fold folder state node =
    foldInternal folder [] node state

let rec map (mapper : 'k list -> 'v -> 'a) (node : Node<'k, 'v>) : Node<'k, 'a> =
    match node.TrieKvp with
    | Some (key, value) -> make (Map.map (fun _ value -> map mapper value) node.TrieMap) (Some (key, mapper key value))
    | None -> make (Map.map (fun _ value -> map mapper value) node.TrieMap) None

let inline toValueList node =
    fold (fun state _ value -> value :: state) [] node

let inline singleton (key, value) =
    add key value (makeEmpty ()) 
```

# java - 如何在 jackrabbit-standalone-2.4.2.jar 中禁用 jackrabbit.log_IS_UNDEFINED

> ID：11395935
> 
> 赞同：0
> 
> 时间：2012-07-09T13:21:45.793
> 
> 标签：java, jackrabbit

我已经使用 jackrabbit-standalone-2.4.2.jar 创建了一个代码，并且我在项目目录中获得了 jackrabbit.log_IS_UNDEFINED.log 文件。这个日志文件非常大（接近 1 GB）。我想禁用它，但我不知道如何。有没有人有任何想法来处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T15:36:16.403

要删除此文件，您必须（如文件名中所述）定义要使用的记录器。

由于 jackrabbit 依赖于 slf4j，因此您应该为它正确配置一个记录器。

例如，您可以在依赖项中添加 lf4j-log4j12 实现，以及类路径中的 log4j.properties。

您还可以配置任何其他 slf4j 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T07:22:10.343

我通过从 jackrabbit-standalone.jar 中删除 logback.xml 和 slf4j.jar 并在项目的类路径中添加 slf4j.jar 和 slf4j-lo4j.jar 解决了这个问题。现在 jackrabbit.log_IS_UNDEFINED.log 不见了，我得到了想要的日志 :)

# c# - php soap客户端和c#soap服务器

> ID：11395942
> 
> 赞同：0
> 
> 时间：2012-07-09T13:22:17.443
> 
> 标签：c#, php, soap

我目前正在开展一个项目，我认为使用肥皂作为其中的一部分会是一个好主意，但我无法找到它如何以我需要的方式工作。

我有一个名为 ConsoleApp 的 C# 控制台应用程序，ConsoleApp 也将有一个 PHP Web 界面。我正在考虑做的是 PHP Web 界面以某种方式控制 ConsoleApp，所以我单击 Web 界面上的一个按钮，然后这会发送一个肥皂请求到一个肥皂服务，然后是肥皂服务，发送信息到consoleApp，并将结果返回给SoapService，然后返回给PHP。

这似乎需要分离soap服务，一个用于php接口，一个在ConsoleApp中，但这听起来不对，我想我可能误解了Soap的目的。

这怎么可能实现。感谢您的任何帮助，您可以提供

**更新** 根据要求，我想我会添加更多关于我要实现的目标的信息。

在控制台应用程序中，它充当电子邮件服务器，发送给程序然后继续发送的电子邮件，如果无法发送，它会重试几次，直到电子邮件进入失败状态。

Web 界面将提供电子邮件服务器正在做什么的状态，即有多少电子邮件传入、多少电子邮件尚未处理、多少电子邮件已发送以及多少电子邮件失败。

从网页上，您将能够关闭或重新启动电子邮件服务器，或者将其中一封失败的电子邮件放回待处理的队列中。

这个想法是，当用户将失败的电子邮件添加回队列时，它会发送控制台应用程序将接收的肥皂消息，将信息添加回队列，将事件记录在控制台应用程序日志文件中，增加一个计数器它如何跟踪需要处理的电子邮件。完成此操作后，它应该将响应发送回 Web 界面，说明电子邮件是否已成功添加回队列，或者是否由于某种原因失败。

我真的不想每隔这么多秒就轮询一次数据库，因为它们可能会处理大量电子邮件，因此轮询数据库会给 MySQL 服务器带来很大的负载我不想，这就是为什么我认为soap作为电子邮件服务器只需要在收到soap请求时才需要做某事。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:39:40.337

每个 Web 服务都需要一个客户端（在您的情况下为 PHP）和一个服务器（ConsoleApp）。即使有两个端点，它仍然是一个 Web 服务。您的 PHP 将发送一个 SOAP 请求，ConsoleApp 将接收、处理和响应一个 SOAP 响应。

因此，当有人单击网页上的按钮时，您可以使用 JavaScript 在浏览器中构建和发送 SOAP 信封。另一种方法是将值发布到将构建和发送 SOAP 的 PHP 页面。

我不得不承认，你的情况听起来很不寻常。我个人还没有听说过网页直接与控制台应用程序对话。网页通常与 Web 服务器通信，而服务器通常是发出非典型请求的服务器，例如您对 ConsoleApp 的请求。虽然这在技术上是可行的，但我认为它会比你预期的更难。

就个人而言，我会放弃 SOAP，转而采用更简单和可扩展的解决方案。假设您可以访问数据库，当用户单击按钮时，我会让 PHP 在数据库中创建一条记录。ConsoleApp 将每隔 X 秒轮询一次数据库以查找新记录。当它找到一条新记录时，它会处理它。

这样做的好处是简单（数据库访问几乎总是比 SOAP 更容易）和可扩展（如果您预计负载很重，您可以轻松运行任意数量的 ConsoleApp 来处理所有传入请求）。此外，PHP 页面和 ConsoleApp 都没有直接依赖于对方，因此每个单独的组件都不太可能导致整个系统出现故障。

# map - 无限世界生成器

> ID：11395946
> 
> 赞同：0
> 
> 时间：2012-07-09T13:22:28.753
> 
> 标签：map, 2d, chunks

我想做一个无限的二维世界生成器。我想我会创建一个代表世界某个部分的块类。我只是不知道在哪里存储块，以及如何生成新的块。

我以为我可以将块存储在向量中并记住它们的 X，Y。对于玩家，我用指向块的指针制作了 3x3 数组（他站在中心的位置）以形成向量。例如，当他向上移动时，我将上排和中排向下移动，并从向量中加载新的块。我不知道这是不是一个好主意，这是我想到的第一件事。

无论如何，我不知道如何生成块，所以它们相互匹配（水边没有沙漠，aso）。即使生成恒定维度图对我来说也很难（我真的需要无限的世界）。

前段时间我用洪水的方法生成了恒定维度的世界，所以一开始我用草填充了整个地图，然后随机制作了水、树等点，虽然我认为这在无限世界的情况下不可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T14:00:58.147

这些问题已经在 Conway's Life 的实现中得到解决。

在 hashlife 算法和数据结构的讨论中描述了一种实现无界世界并且只处理彼此不同的部分的方法。它还处理块内的高性能和跨块的良好性能。相同的块由许多块可以指向的一种描述表示。

[http://www.drdobbs.com/jvm/an-algorithm-for-compressing-space-and-t/184406478](http://www.drdobbs.com/jvm/an-algorithm-for-compressing-space-and-t/184406478)

[http://en.wikipedia.org/wiki/Hashlife](http://en.wikipedia.org/wiki/Hashlife)

[http://golly.sourceforge.net/](http://golly.sourceforge.net/)

[http://tomas.rokicki.com/hlife/](http://tomas.rokicki.com/hlife/)

[http://www-users.cs.york.ac.uk/~jowen/hashlife.html](http://www-users.cs.york.ac.uk/~jowen/hashlife.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:31:37.933

这可能不是正确的方法，但可能会给你一些想法。您可以做的是将 3x3 2D 块数组甚至 5x5 块数组存储到内存中。根据玩家的位置更新这些块以及加载哪些块。世界其他地方可以存储在一个文件中，可以读取和写入。当玩家在未启动的块或空块的 2-3 块内移动时，使用您想要的任何方法生成该块。

棘手的部分是，如果您有河流或水体、森林或任何其他类型的跨越多个块的景观，则在生成新块时您必须有一个单独的算法来处理这些问题。每次生成时可能需要测量两条线之间的交点。由土地和水，或平原和森林的交汇处创建的线，以及代表大块边缘的线。一旦你有了那个点，你可能可以找出块上那个点的哪一侧需要土地/水，并从那里随机生成它。

无论如何，这就是我在 Minecraft 中看到的情况。

# javascript - 我无法使用函数更改 javascript 的全局变量值

> ID：11395948
> 
> 赞同：0
> 
> 时间：2012-07-09T13:22:35.923
> 
> 标签：javascript

```
function just(chap_id)
{
    alert(chap_id);
    chapter_name = (document.getElementById(chap_id).name = document.getElementById((chap_id.replace( "i", "t" ))).innerHTML);
    <%= chapter_select = 1 %>
} 
```

我在一个`onclick`事件中调用了这个函数。`chapter_name`是一个全局变量。当我使用警报查看函数外的变量值时，我发现变量值没有改变。任何想法改变函数内的值

# selenium - 无法使用 selenium RC 选择 IE8 弹出窗口

> ID：11395949
> 
> 赞同：1
> 
> 时间：2012-07-09T13:22:38.680
> 
> 标签：selenium, internet-explorer-8, popup, selenium-rc

我正在尝试使用 Selenium RC 向 IE8 中的弹出窗口发送命令。

目前，我可以单击一个按钮并打开弹出窗口。

但是，*我无法选择发送命令的窗口。*

我已经对这个主题进行了大约一周的广泛研究，我相信这严格来说是一个 IE 问题。我找到了一些解决方法；一些博客已经指示用户打开一个空白窗口来“捕捉”命令。

但是，当我实现下面的代码时，会弹出一个空白窗口，单击打开弹出窗口的按钮后，会打开一个第三个窗口并加载我需要的页面。

我设定的目标不准确吗？请参阅下面的 selenium rc 命令以及页面的 html 源代码。

**Java 代码**

```
selenium.runScript("selenium.browserbot.document.getElementByID(
              'ctl00_ContentPlaceHolder1_WebGroupBox1_btnAddRequirement').target='popup'"
);

selenium.openWindow("", "popup");

///Click on Add Requirement button
selenium.click("id=ctl00_ContentPlaceHolder1_WebGroupBox1_btnAddRequirement");

try { 
  Thread.sleep(2000);
} catch (InterruptedException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
}
selenium.selectWindow("popup"); 
```

**添加要求按钮的 HTML**

```
<input id="ctl00_ContentPlaceHolder1_WebGroupBox1_btnAddRequirement" 
       type="submit" 
       style="font-family:Arial,Times New Roman,Courier New;" 
       onclick="return validateProject();
                 WebForm_DoPostBackWithOptions(new  
                  WebForm_PostBackOptions(
                             "ctl00$ContentPlaceHolder1$WebGroupBox1$btnAddRequirement", 
                             "", 
                             true, 
                             "", 
                             "", 
                             false, 
                             false
                  )
                 )
                " 
       value="Add New Requirement" 
       name="ctl00$ContentPlaceHolder1$WebGroupBox1$btnAddRequirement"
> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T13:24:15.523

在WatiN（我知道不同）中，我必须发送alt+tab 的组合并输入来处理弹出框。

# jquery - 对添加的 DOM 元素的 jQuery 悬停效果不起作用

> ID：11395954
> 
> 赞同：0
> 
> 时间：2012-07-09T13:22:57.350
> 
> 标签：jquery

嗨，我正在使用 jquery[流沙](http://razorjack.net/quicksand/)插件创建一个投资组合网站。在我拥有的每张图像上，我都在尝试使用 jQuery 创建悬停效果。效果起初有效，但在我单击附加到流沙插件的按钮后悬停效果不再起作用。我在创建一个新元素并将其插入 DOM 之前注意到这种现象，点击处理程序不会附加到它。

我怎么解决这个问题？

这是流沙插件和悬停效果的代码：

```
 $(document).ready(function() {

  var $filterType = $('#filterOptions li.active a').attr('class');
  var $holder = $('ul.ourHolder')
  var $data = $holder.clone();

  $('#filterOptions li a').click(function(e) {
    $('#filterOptions li').removeClass('active');

    var $filterType = $(this).attr('class');
    $(this).parent().addClass('active');
    if ($filterType == 'all') {
      var $filteredData = $data.find('li');
    }
    else {
      var $filteredData = $data.find('li[data-type=' + $filterType + ']');
    } 
    $holder.quicksand($filteredData, {
      duration: 800,
      easing: 'easeInOutQuad'
    });
    return false;
  });

   //hover effect
    var portfolio =  $("ul.ourHolder li");
    portfolio.on('mouseover', function(){
        $(this).children('div.full').stop().fadeTo('slow',0.5);     
    }) 
    portfolio.on('mouseout' , function(){
        $(this).children('div.full').stop().fadeOut();
    })
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:27:16.950

仅将事件处理程序绑定到代码运行时存在的元素的特定用法[`.on()`](http://api.jquery.com/on/)，并且不会影响在该代码执行后动态添加的元素。相反，您需要对 使用事件委托语法[`.on()`](http://api.jquery.com/on/)，如下所示：

```
$(document).on('mouseover', 'ul.ourHolder li', function(){
    $(this).children('div.full').stop().fadeTo('slow',0.5);     
}) 
```

理想情况下，您会`document`用选择器替换更具体但不是动态添加的元素，该元素包含您要在触发`mouseover`事件时执行回调函数的所有元素。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-09T13:27:18.733

由于 li 元素是动态添加到 DOM 的，因此使用替代版本`on`来委托悬停事件。

试试这个：

```
//hover effect
var portfolio =  $("ul.ourHolder li");
$("ul.ourHolder").on("mouseover", "li", function(){
        $(this).children('div.full').stop().fadeTo('slow',0.5);     
});

$("ul.ourHolder").on("mouseout", "li", function(){
        $(this).children('div.full').stop().fadeOut();
}); 
```

# android - 可以仅使用 onPause 杀死一个活动吗？

> ID：11395960
> 
> 赞同：2
> 
> 时间：2012-07-09T13:23:27.713
> 
> 标签：android, android-activity, activity-lifecycle

这是我从一本书中读到的：

> 活动可以在 onPause() 之后静默销毁。我们绝不应该假设调用了 onStop() 或 onDestroy()。

但是根据文档，Pause 是指部分可见，如果不调用 onStop 或 onDestory，是否可以杀死部分可见的活动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T13:27:32.747

不能保证`onStop`或`onDestroy`将被调用。在内存严重不足的情况下，`Activity`可能会销毁部分可见和失焦的部分以回收资源。但是，不能保证在这样做之前会调用两个提到的生命周期方法中的任何一个。这就是为什么保存持久状态`onPause`而不是`onStop`and很重要的原因`onDestroy`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T13:29:09.813

参考[活动生命周期](http://3.bp.blogspot.com/-fOx8h8Qugcs/TZQP8vKm6yI/AAAAAAAAAC0/uM_YAZzJriQ/s1600/04-ActivityLifecycle.png)- 如果活动被系统杀死，它可以在调用 onStop 或 onDestroy 的暂停状态下被静默杀死。

# iphone - 从 iPhone 中的一个应用程序监控其他应用程序

> ID：11395963
> 
> 赞同：0
> 
> 时间：2012-07-09T13:24:02.027
> 
> 标签：iphone

我需要创建一个将在后台运行的应用程序，并将监控用户在安装、打开和删除应用程序方面的行为。

即应用程序将在数据库中保存用户何时在 iphone 中安装/打开/删除应用程序的信息。

我想知道它是否可能，Apple 会允许这样做吗？

我试图用谷歌搜索但没有得到任何东西，我知道它是否可能，那么仅通过多问就可以了吗？

任何人都可以帮助我。

布朗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T13:34:03.253

不可能。您的应用程序只能在用户选择时运行（除了有限的任务子集，如 VoIP 等）。

您的应用对其他应用一无所知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T13:34:49.590

iOS 应用程序是沙盒的。我不会说不可能，但肯定是不允许的。您必须先找到一个安全漏洞才能授予您 root 访问权限。哦，当你这样做时通知我们；）。

**编辑：** 也许我的帖子中并不清楚，但我至少是在开玩笑。不知道为什么你想做你想做的事。我可以想象以下场景：

1) 贵公司希望监控用户在手机上所做的一切。在这种情况下，我要么 a) 锁定它们，并且只允许通过公司门户安装应用程序（iOS 中可以进行企业分发）或

b）完全忘记iOS。黑莓可能更接近你想要的，虽然我对那个平台没有经验。此外，它的未来也不确定。

2）你试图做一些非法的事情。由于iOS的锁定性质，这并不容易。看看过去几年成功的攻击有多么少 - 这是一个非常成功的平台，攻击可能会在金钱和声誉方面都付出高昂的代价。

# jsf - IllegalArgumentException：重复键（JSF）

> ID：11395965
> 
> 赞同：1
> 
> 时间：2012-07-09T13:24:12.643
> 
> 标签：jsf, richfaces, myfaces

我正在使用 Tomcat 7、Richfaces 4.2.2、MyFaces 2.1.5 和 Facelets。当我启动 Tomcat 时，出现错误：

```
An error occured while initializing MyFaces: duplicate key: class javax.faces.convert.BooleanConverter

java.lang.IllegalArgumentException: duplicate key: class javax.faces.convert.BooleanConverter
at com.google.common.base.Preconditions.checkArgument(Preconditions.java:115)
at com.google.common.collect.RegularImmutableMap.<init>(RegularImmutableMap.java:72) 
at com.google.common.collect.ImmutableMap$Builder.fromEntryList(ImmutableMap.java:221)
at com.google.common.collect.ImmutableMap$Builder.build(ImmutableMap.java:207)
at org.richfaces.javascript.ClientServiceConfigParser.parseConfig(ClientServiceConfigParser.java:53)
at org.richfaces.application.ValidatorModule.createClientScriptService(ValidatorModule.java:65)
at org.richfaces.application.ValidatorModule.configure(ValidatorModule.java:60)
at org.richfaces.application.ServicesFactoryImpl.init(ServicesFactoryImpl.java:27)
at org.richfaces.application.InitializationListener.createFactory(InitializationListener.java:139)
at org.richfaces.application.InitializationListener.onStart(InitializationListener.java:112)
at org.richfaces.application.InitializationListener.processEvent(InitializationListener.java:157)
at javax.faces.event.SystemEvent.processListener(SystemEvent.java:43)
at org.apache.myfaces.application.ApplicationImpl._traverseListenerList(ApplicationImpl.java:2105)
at org.apache.myfaces.application.ApplicationImpl.access$000(ApplicationImpl.java:118)
at org.apache.myfaces.application.ApplicationImpl$SystemListenerEntry.publish(ApplicationImpl.java:2292)
at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:537)
at org.apache.myfaces.webapp.AbstractFacesInitializer._dispatchApplicationEvent(AbstractFacesInitializer.java:248)
at org.apache.myfaces.webapp.AbstractFacesInitializer.initFaces(AbstractFacesInitializer.java:140)
at org.apache.myfaces.webapp.StartupServletContextListener.contextInitialized(StartupServletContextListener.java:111)
at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4765)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5260)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:866)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:842)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:615)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:958)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1599)
at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source) 
```

我看到了[这篇文章](https://stackoverflow.com/questions/7681582/richfaces4-startup-fails-with-java-lang-illegalargumentexception-duplicate-key)中提出的解决方案，但在这种情况下有所不同，我的类路径中没有“-source.jar”。

还有什么可能是错的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T17:42:35.393

我和你是同一条船。

从您链接到的帖子开始，我检查了我在 WEB-INF/lib 中的所有 JAR 文件，发现它们都`richfaces-components-ui-4.2.2.Final.jar`包含`richfaces-ui-validator-ui-4.2.2.Final.jar`一个文件，该文件为有问题的类（在我的情况下是 ）`META-INF/csv.xml`提供映射。`IntegerConverter`

我声明了以下 Maven 依赖项（前面列出了 RichFaces 4.2.2Final BOM）：

```
<依赖>
    <groupId>org.richfaces.ui</groupId>
    <artifactId>richfaces-components-ui</artifactId>
</依赖>
<依赖>
    <groupId>org.richfaces.core</groupId>
    <artifactId>richfaces-core-impl</artifactId>
</依赖>
<依赖>
    <groupId>org.richfaces.ui.validator</groupId>
    <artifactId>richfaces-ui-validator-ui</artifactId>
</依赖>

```

但是，它`richfaces-components-ui`是一个超集`richfaces-ui-validator-ui`（即包含它和其他一些）。

您的配置/RichFaces 组件可能不同，但答案在于您的目录中的内容（无论是从 Maven 还是以其他方式获得）……您可能在一个文件中`WEB-INF/lib`包含了多个 JAR 。`csv.xml`

确定一组最小的依赖项，错误就会消失。

# python - 在 Entry 小部件中重新绑定“全选”

> ID：11395967
> 
> 赞同：1
> 
> 时间：2012-07-09T13:24:18.800
> 
> 标签：python, tkinter, widget, tk

我的问题与[使用](https://stackoverflow.com/questions/5870561/re-binding-select-all-in-text-widget)Text 小部件的问题有关。

但是，就我而言，我想重新绑定条目小部件上的全选。

我尝试了以下允许我使用`Ctrl`+`w`选择输入字段中的所有输入的方法：

```
self.frmSearch = Frame()
self.txtSearch = Entry(self.frmSearch, bd=1, width=35)
self.txtSearch.bind('<Control-w>',lambda e: self.txtSearch.select_range(0, END)) 
```

但是，一旦我将`Ctrl`+更改`w`为`Ctrl`+ ，`a`这将不再起作用，并且不会选择任何文本。有没有人解释为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T15:30:43.460

这是因为您将绑定放在小部件而不是小部件类上，并且默认情况下，类上的绑定在小部件上的绑定之后触发。

Tkinter 处理事件的方式是首先查看一个小部件上是否有绑定，然后是一个类，然后是顶层窗口，最后是特殊类“all”。事件按顺序处理，除非您打破事件链，可以这么说。因此，您的 control-w 绑定发生了，但随后类上的绑定发生并有效地撤消了您在绑定中所做的操作。

最好的解决方案是 1) 不使用 lambda，而是使用真正的方法或函数，以及 2) 执行“return 'break'”以防止类和其他绑定触发。`bind_class`或者，如果您希望此绑定影响应用程序中的所有条目小部件，而不仅仅是特定的，请使用`'Entry'`.

您在问题中提到的问题有一个答案，该答案给出了更改类绑定的示例。

# .net - MySQL时间偏移量（范围内的范围）

> ID：11395968
> 
> 赞同：4
> 
> 时间：2012-07-09T13:24:21.067
> 
> 标签：.net, mysql, datetime, subquery

我有一个高级搜索功能，可以根据日期和时间查询记录。我想返回一个日期时间范围之间的所有记录，然后从该范围内我想将结果缩小到一个小时范围（例如 2012 年 5 月 1 日 - 2012 年 5 月 7 日，并显示下午 2 点到 7 点的记录）。

我所做的是在数据库中添加一个时间字段，然后使用 AND 语句查看时间字段。这工作得很好，直到我开始将日期时间和时间字段偏移几个小时以从不同的时区进行调整。这样做的问题是，当时间字段偏移 6 小时时，像 <=2pm<=7pm 这样的有效时间查询以 <=8pm<=1am 结束，这将返回零结果。

有一个更好的方法吗？

询问：

```
SELECT Id, Item, 
       LEFT(DAYNAME(Date - INTERVAL 0 HOUR),3) as DayofWk, 
       CONCAT('$',FORMAT(Sale,2)) AS Sale, 
       CONCAT('$',FORMAT(Retail,2)) AS Retail,
       Date, Time, Winner 
  FROM masterdata2 
 WHERE Item LIKE '%xbox%' 
   AND Date BETWEEN CONCAT('2010-6-28', ' ', '00:00:00') + INTERVAL 0 HOUR 
            AND CONCAT ('2012-7-9',' ','23:59:00') + INTERVAL 0 HOUR 
   AND time BETWEEN CONCAT ('2010-6-28',' ','00:00:00') + INTERVAL 0 HOUR 
            AND CONCAT ('2012-7-9',' ','23:59:00') + INTERVAL 0 HOUR 
   AND ( Dayofwk != 'Mon' || Dayofwk != 'Tue' || Dayofwk != 'Wed' || Dayofwk != 'Thu' || Dayofwk != 'Fri' || Dayofwk != 'Sat' || Dayofwk != 'Sun' ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T15:33:06.470

查看以下 MySQL 函数：

*   [日期（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)
*   [时间（）](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time)
*   [转换_TZ()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_convert-tz)
*   [投掷（）](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#function_cast)

使用前两个，您只能使用一个日期时间字段而不是两个，如果我理解正确的话，这两个字段包含完全相同的值？使用第三个，您可以在时区之间转换日期时间。最后一个用于强制转换为特定类型，在这种情况下类似于`CAST('22:00:00' AS TIME)`=> `January, 01 1970 22:00:00-0800`。

*   你为什么将时间与日期时间进行比较？正如您所说，您首先将结果限制为两个日历日期之间的**所有项目，然后仅限****于这些日期**两次之间的项目。这将意味着这样的事情：

```
 [...]
    AND (DATE(sold) BETWEEN CAST('2010-06-20' AS DATE) AND CAST('2012-07-20' AS DATE))
    AND (
       (TIME(sold) >= CAST('22:00:00' AS TIME))
       OR
       (TIME(sold) <= CAST('02:00:00' AS TIME))
    )
    [...] 
```

*   据我了解，如果偏移时间跨越两天（甚至中午和午夜？），您的查询将失败。我想您需要做的是检测到这一点，如果您想在当晚捕获所有项目（以及处理开始日期），则将您的最大日期增加 1（从`2012-07-09`到）。`2012-07-10`

*   如果我弄错了，您能否详细说明您的查询失败的原因？`8pm < x < 1am`是一个有效的时间跨度，那么为什么你没有得到任何结果？

如果您提供简短的`CREATE TABLE`陈述和一些示例数据，这将非常有帮助。这样，人们就可以玩弄这些查询了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T19:28:58.493

好的，让我们试试这个（我是新手，所以对我轻松一点）：

```
CREATE TABLE abc (ID INT(255) UNSIGNED ZEROFILL,sold DATETIME);
INSERT INTO abc (ID, sold) VALUES
(1,'2012-06-01 18:00:00'),
(2,'2012-06-20 23:00:00'),
(3,'2012-07-01 00:00:00'),
(4,'2012-07-10 01:00:00'),
(5,'2012-07-15 02:00:00'),
(6,'2012-07-20 12:00:00');
SELECT ID, sold
FROM abc
WHERE
(DATE(sold) BETWEEN '2012-06-20' AND '2012-07-20')
AND
(TIME(sold) BETWEEN '23:00:00' AND '02:00:00'); 
```

这将创建一个表并运行一个查询。结果应该返回#2-#5，但我返回零结果，因为在 18:00:00 和 02:00:00 之间没有这样的事情。然而，在 2:00:00 和 18:00:00 之间有数据。问题是如果我将时间偏移 + 小时，那么有时我会有 18:00:00 和 02:00:00。我该怎么做呢？

我的数据都在 EDT 中。我应该使用时区功能吗？

感谢您的帮助！！

# image - 在 HTML 解析后（使用 HTML::TreeBuilder）图像被破坏

> ID：11395978
> 
> 赞同：0
> 
> 时间：2012-07-09T13:25:15.450
> 
> 标签：image, perl, html-parsing

我使用 LWP::UserAgent 构建一个小型代理供我自己使用，然后我使用 HTML::TreeBuilder 解析 HTML

根据我所在的页面，我的代码会加载一个获取信息/更改显示的小模块，然后我再次打印我的 HTML。

一开始，我只是在我的模块中加载 HTML::TreeBuilder，在那里进行修改，然后从那里打印回 HTML，一切都很好。

现在我在调用小模块的代码中构建树，（小模块仍然修改它）并从这里打印 HTML，所有图像都得到错误（来自萤火虫）图像损坏或截断，并且不加载。

这是我使用的简化代码。

不工作的代码：

```
$info{content}=$response->content;
$info{tree} = HTML::TreeBuilder->new_from_content($info{content}) or die $!;

do module.pm #modify the tree

$info{content} = $info{tree}->as_HTML(undef,"\t");
$info{tree}->delete();

return \$info{content}; 
```

并在 module.pm

```
my $elem = $info{tree}->look_down(_tag => "img");
$elem->attr('width', '240');
$elem->attr('height', '60'); 
```

和工作代码

```
$info{content}=$response->content;

do module.pm #modify the tree

return \$info{content}; 
```

在模块中：

```
use strict;
use warnings;
use HTML::TreeBuilder; # Ensure weak references in use

my $tree = HTML::TreeBuilder->new_from_content($awproxy::process::info{content}) or die $!;

my $elem = $tree->look_down(_tag => "img");
$elem->attr('width', '240');
$elem->attr('height', '60');

$awproxy::process::info{content} = $tree->as_HTML(undef,"\t");
$tree->delete();

1; 
```

任何人都知道它可能来自哪里？

并且从两个代码返回的 HTML 完全相同

编辑：我使用的所有代码。

由 perltranshandler 调用的 main.pm

```
package awproxy::main;
use strict;
use warnings;
use Apache2::Const qw(:common);
use Apache2::RequestRec;
use Apache2::RequestIO;
use awproxy::process;

my $destdomain="domain.com";
my $desthost="www1.domain.com";
my $wwwdesthost="www.domain.com";

sub handler {
   my ($r) = @_;
   $r->handler("perl-script");
   $r->set_handlers(PerlHandler => \&proxy_handler);
   return OK;
}

sub proxy_handler {
    my($r) = @_;
    $r->status(200);
    $r->content_type("text/plain");
    my $ourhost="aw.mydomain.fr.cr";
    my $wwwourhost="awww.mydomain.fr.cr";
    my $result=awproxy::process::process($r);

    my $dest;
    my $headers_in = $r->headers_in;
    my $host=$headers_in->get("Host");
    if($host=~/^www\.a/) { # matches $wwwourhost
        $dest=$wwwdesthost;
    } else {
        $dest=$desthost;
    }

# filter headers_out as with ProxyPassReverse
   my $h=$r->headers_out();
   foreach my $k (qw(Content-Location Location URI)) {
      my $l=$h->get($k);
      if($l && ( $l=~s!(http://)$desthost!$1$ourhost! || $l=~s!(http://)$wwwdesthost!$1$wwwourhost!)) {
         $h->set($k,$l);
      }
   }
# cookie reverse modification
   for my $k ("Set-Cookie") {
      my @l=$h->get($k);
      foreach my $cookie (@l) {
         if($cookie=~s/$desthost/$ourhost/ || $cookie=~s/$wwwdesthost/$wwwourhost/ || $cookie=~s/domain=$destdomain/host=$ourhost/) {
            $h->add($k, $cookie);
         }
      }
   }

    if($result) {
        $r->print($$result);
    }
    $_=undef; # clear private data
    undef %awproxy::process::info;
   return OK;
}

1; 
```

前一个函数调用的进程

```
package awproxy::process;
use strict;
use warnings;
use Apache2::Connection; #permet de recup l'ip
use LWP::UserAgent; #pour les connexion
use APR::Table;
use DBI;
use HTML::TreeBuilder;

sub process {   
    my $desthost="www1.domain.com";
    my $wwwdesthost="www.domain.com";
    my $ourhost="aw.mydomain.fr.cr";
    my $wwwourhost="awww.mydomain.fr.cr";
    my $destdomain="aw.mydomain.fr.cr";
    my $dir="/usr/lib/perl5/awproxy/";
    our %info;

    my $r = shift;

    our $dbh=DBI->connect('DBI:mysql:XXXX', 'XXXX', 'XXXX'
               ) || die "Could not connect to database: $DBI::errstr";

    #pour recup l'ip
    my $c=$r->connection();
    my $ip=$c->remote_ip();

    # autodetect $ourhost value from input headers
    my $headers_in = $r->headers_in;
    my $host=$headers_in->get("Host");
    my $dest;
    if($host=~/^www\.a/) { # matches $wwwourhost
        $dest=$wwwdesthost;
    } else {
        $dest=$desthost;
    }

    #Pour creer la requete
    my $ua = LWP::UserAgent->new();
    $ua->agent('Mwoua/proxy');
    my $method = uc($r->method);
    my $request = HTTP::Request->new($method,"http://".$dest.$r->unparsed_uri); 

    while(my($key,$val) = each %$headers_in) {
      next if($key eq "Host"); # do not override host header
      next if($key eq "Accept-Encoding");
      $request->header($key,$val);
    }
    #on ajoute l'ip
    if(!$request->header("X-Forwarded-For"))
    {
        $request->header("X-Forwarded-For", $ip);
        $request->header("X-Forwarded-Host", $headers_in->{Host});
    }

    #on ajoute les donnees POST
    if($request->header("Content-Length")) {
        my $postdata;
        $r->read($postdata,$request->header("Content-Length"));
        $request->content($postdata);       
    }

    my $response = $ua->request($request);
    if(!$response)
    {
        $r->status(500);
        $r->print("sorry: something went wrong on the aw-side of proxy\n");
        return;
    }
    $r->content_type($response->header('Content-type'));
    my $headers_out=[];
    $response->scan(sub {
        if(lc $_[0] ne "connection") {
                $r->headers_out->add(@_);
                push(@$headers_out, \@_);
        }
    });
    #Ce dont les modules peuvent avoir besoin
    $info{setcookie}=$response->header('Set-Cookie');
    $info{content}=$response->content;  

    #On modifie les liens   
    $info{content}=~s!(http-equiv="refresh"[^>]*url=http://)$desthost!$1$ourhost!i;
    $info{content}=~s!(http-equiv="refresh"[^>]*url=http://)$wwwdesthost!$1$wwwourhost!i;
    $info{content}=~s!(<a[^>]* href="?http://)$desthost!$1$ourhost!gi;
    $info{content}=~s!(<a[^>]* href="?http://)$wwwdesthost!$1$wwwourhost!gi;
    $info{content}=~s!(<img[^>]* src="?http://)$desthost!$1$ourhost!gi;
    $info{content}=~s!(<form action="?http://)$desthost!$1$ourhost!gi;

    #$info{tree} = HTML::TreeBuilder->new_from_content($info{content}) or die $!;   

    #on regarde ou on est, et on applique les modifs
    my $include=$r->uri;

    if($info{content} =~ m!<b>Security Measure</b>! )
    {
        $include=$dir."security.pm";
    }
    else
    {
        $include =~ s/\.php$//i ;
        $include =~ s/\/$// ;
        $include=$dir.$dest.$include.'.pm';
    }
    #$info{content}=$include.$info{content};
    if(-e $include)
    {
        require $include; #same with do $include;
    }
    #$info{content} = $info{tree}->as_HTML(undef,"    ");
    $dbh->disconnect();
    undef $dbh;
    #$info{tree}->delete();
    #undef $info{tree};
    return \$info{content};
}
1; 
```

以及我目前正在测试的模块：

```
use strict;
use warnings;
use HTML::TreeBuilder; # Ensure weak references in use

my $tree = HTML::TreeBuilder->new_from_content($awproxy::process::info{content}) or die $!;

my $elem = $tree->look_down(_tag => "img");
$elem->attr('width', '240');
$elem->attr('height', '60');

$awproxy::process::info{content} = $tree->as_HTML(undef,"\t");
$tree->delete(); 
```

注意：这是工作版本，您可以使用我在开头提供的信息轻松将其更改为非工作版本（在 process.pm 中创建树并使用此创建的树或其他模块中的修改）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T17:29:45.473

问题不在于您的代理如何处理 HTML——正如你所说，两种代码形式的 HTML 是相同的——而是如何处理图像数据。在浏览器`GET`对 HTML 执行完 a 后，它将继续对组成部分（JavaScript、CSS、图像等）执行相同的操作，并且您的代理也必须正确传递这些内容。显然它没有这样做。

值得一提的是，Perl`*.pm`模块本来就是`use`​​d，`do`根本不是做很多事情的好方法。您应该决定是否希望您的模块是面向对象的，或者是一个简单的子类`Exporter`并整理东西。

`as_HTML`你也应该这样打电话

```
$tree->as_HTML('<>&', '  ') 
```

因为您*必须*至少对这些符号进行编码，并且制表符用作缩进有点神秘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:13:24.350

我明白为什么它不起作用。

在我的工作案例中，我只解析 html 页面。在我的非工作案例中，它试图解析所有被代理的东西（包括图像）。

所以为了让它工作，我添加了这个：

```
if($r->uri =~ /\.png$|\.jpg$/i) 
{
    return \$info{content};
} 
```

所以现在，它不会尝试解析图像，并且工作正常。（可能需要在正则表达式中添加一些东西，但在我的情况下只有 png 和 jpg）

编辑：对内容类型的测试应该更好，类似的东西（未测试）

```
if($r->content_type =~ /text\/html/i )
{
    return \$info{content};
} 
```

# c# - 从 C# 获取 JS 中对象文字的属性

> ID：11395979
> 
> 赞同：1
> 
> 时间：2012-07-09T13:25:17.747
> 
> 标签：c#, javascript

我目前正在尝试获取对象文字的属性值。我的 C# 程序中有一个浏览器控件，我可以使用以下命令轻松获取*全局*变量的值：

```
...
mshtml.IHTMLDocument domDoc = ((mshtml.IHTMLDocument2)_browser.Document.DomDocument)
object script = domDoc.Script;
object nameOfVariable = script.GetType().InvokeMember("nameOfVariable", BindingFlags.GetField | BindingFlags.GetProperty, null, script, null);
... 
```

另一方面，如果我在 JS 中的变量实际上是对象文字的属性：

```
var NameOfLiteral = {
    var nameOfVariable: false // EDIT: no var as jbabey pointed out
}; 
```

我可以使用前面的代码来获取包含文字的 Com 对象，但我完全不知道如何检查它以获取属性。有没有什么好的例子可以展示如何做我想做的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:35:10.633

此语法不是有效的 javascript，它应该是：

```
var NameOfLiteral = {
    nameOfVariable: false // no "var" on object properties
}; 
```

然后，您应该能够从 C# 访问该属性，如下所示：

```
object nameOfVariable = script.GetType().InvokeMember("NameOfLiteral.nameOfVariable" ...); 
```

# actionscript-3 - 通过 URL 将变量传递到嵌入在 wordpress 中的 swf 文件中。如何？

> ID：11395981
> 
> 赞同：0
> 
> 时间：2012-07-09T13:25:20.140
> 
> 标签：actionscript-3, wordpress

我有一个嵌入到 wordpress 中的 swf 文件。现在我需要通过 URL 传递值。我怎样才能做到这一点。我实际上想要获得比 SWFObject 2.0 的复杂解决方案更简单的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T14:47:43.947

您可以通过 GET ( `assets/file.swf?foo=bar`) 传递值：

```
<object type="application/x-shockwave-flash">
  <param name="movie" value="assets/file.swf?foo=bar" />
  <param name="allowScriptAcess" value="sameDomain" />
</object> 
```

然后像这样检索它们：

```
// In the root class:
trace(loaderInfo.parameters.foo); // bar 
```

# objective-c - NSImage initWithData 没有找到？

> ID：11395985
> 
> 赞同：0
> 
> 时间：2012-07-09T13:25:25.933
> 
> 标签：objective-c, xcode, macos, class, nsimage

在[NSImage 类参考](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsimage_Class/Reference/Reference.html#//apple_ref/occ/instm/NSImage/initWithData%3a)中，据说存在方法`initWithData`，但为什么 xCode 说它不存在？

我这样使用它：

```
 NSData *imgData = [[imageView image] TIFFRepresentation];
fotoImg = [NSImage initWithData:imgData]; 
```

我收到警告：

```
Class method '+initWithData:' not found (return type defaults to 'id') 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T13:30:47.113

当您应该在该类的实例上调用它时，您正在调用`initWithData`该类。做这个：`[[NSImage alloc] initWithData:imgData];`

了解成员函数和类函数（或 Obj C 术语“消息”）之间的区别非常重要。我推荐[http://www.amazon.de/Programming-Objective-C-Automatic-Reference-Developers/dp/0321811909/ref=pd_sim_sbs_eb_1/276-1733140-9413556](http://www.amazon.de/Programming-Objective-C-Automatic-Reference-Developers/dp/0321811909/ref=pd_sim_sbs_eb_1/276-1733140-9413556)。

# blackberry - 黑莓网络工程应用程序中的 BBM 集成？

> ID：11395986
> 
> 赞同：0
> 
> 时间：2012-07-09T13:25:27.667
> 
> 标签：blackberry, cordova, phonegap-plugins, blackberry-webworks, bb-messenger

我开发了一个需要在其中集成 BlackBerry Messenger (BBM) 的应用程序。我正在使用 Phonegap 插件在 Blackberry Webworks 中开发我的应用程序。按照[Blackberry Webworks 中的 BBM SDK 指南](https://developer.blackberry.com/html5/documentation/ww_services/bbm_sdk_for_ww_1878476_11.html)，在 BlackBerry webworks 中成功执行示例应用程序（不使用 phonegap 插件）。但是，当我将它与 phonegap 插件一起使用时，无法正确执行（出现空白屏幕）。对我提出的疑问是**BBM 是否支持/正常使用 Blackberry Webworks 中的 Phonegap 插件。**当我使用 phonegap 插件时，它只显示加载符号，屏幕上没有更多内容。

**我们可以在 BlackBerry WebWorks 中使用 BlackBerry Messenger(BBM) 和 PhonePlugin...**

谁能帮我解决这个问题。

提前致谢....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T15:06:12.603

BlackBerry WebWorks 平台支持 BBM SDK。但是，我不确定Phonegap等第三方应用程序是否支持BBM SDK。您需要通过 Phone Gap 确认这一点。

# java - 如何从一组 XPath 表达式生成 XML 文件？

> ID：11395990
> 
> 赞同：7
> 
> 时间：2012-07-09T13:25:50.220
> 
> 标签：java, xml, xslt, xpath, xquery

给定一组 XPath 映射，我希望能够生成一个完整的 XML 文件。

输入可以在两个映射中指定： (1) 一个列出 XPath 表达式和值；(2) 另一个定义适当的命名空间。

```
/create/article[1]/id                 => 1
/create/article[1]/description        => bar
/create/article[1]/name[1]            => foo
/create/article[1]/price[1]/amount    => 00.00
/create/article[1]/price[1]/currency  => USD
/create/article[2]/id                 => 2
/create/article[2]/description        => some name
/create/article[2]/name[1]            => some description
/create/article[2]/price[1]/amount    => 00.01
/create/article[2]/price[1]/currency  => USD 
```

对于命名空间：

```
/create               => xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/
/create/article       => xmlns:ns1='http://predic8.com/material/1/‘
/create/article/price => xmlns:ns1='http://predic8.com/common/1/‘
/create/article/id    => xmlns:ns1='http://predic8.com/material/1/' 
```

另请注意，我还要处理 XPath**属性**表达式，这一点很重要。例如：我也应该能够处理属性，例如：

```
/create/article/@type => richtext 
```

最终输出应如下所示：

```
<ns1:create xmlns:ns1='http://predic8.com/wsdl/material/ArticleService/1/'>
    <ns1:article xmlns:ns1='http://predic8.com/material/1/‘ type='richtext'>
        <name>foo</name>
        <description>bar</description>
        <ns1:price xmlns:ns1='http://predic8.com/common/1/'>
            <amount>00.00</amount>
            <currency>USD</currency>
        </ns1:price>
        <ns1:id xmlns:ns1='http://predic8.com/material/1/'>1</ns1:id>
    </ns1:article>
    <ns1:article xmlns:ns1='http://predic8.com/material/2/‘ type='richtext'>
        <name>some name</name>
        <description>some description</description>
        <ns1:price xmlns:ns1='http://predic8.com/common/2/'>
            <amount>00.01</amount>
            <currency>USD</currency>
        </ns1:price>
        <ns1:id xmlns:ns1='http://predic8.com/material/2/'>2</ns1:id>
    </ns1:article>
</ns1:create> 
```

[PS：这是对上一个问题](https://stackoverflow.com/questions/11385323)提出的更详细的问题，尽管由于一系列进一步的要求和澄清，建议我提出更广泛的问题以满足我的需求。

另请注意，我正在用 Java 实现这一点。因此，基于 Java 或基于 XSLT 的解决方案都是完全可以接受的。谢谢。

进一步说明：我真的在寻找一个**通用**的解决方案。上面显示的 XML 只是一个示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T03:44:52.540

**如果建立[在前一个问题的解决方案的](https://stackoverflow.com/a/11387570/36305)基础上，这个问题就有一个简单的解决方案：**

```
<xsl:stylesheet version="2.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
     xmlns:xs="http://www.w3.org/2001/XMLSchema"
     xmlns:my="my:my">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:key name="kNSFor" match="namespace" use="@of"/>
     <xsl:variable name="vStylesheet" select="document('')"/>

     <xsl:variable name="vPop" as="element()*">
        <item path="/create/article/@type">richtext</item>
        <item path="/create/article/@lang">en-us</item>
        <item path="/create/article[1]/id">1</item>
        <item path="/create/article[1]/description">bar</item>
        <item path="/create/article[1]/name[1]">foo</item>
        <item path="/create/article[1]/price[1]/amount">00.00</item>
        <item path="/create/article[1]/price[1]/currency">USD</item>
        <item path="/create/article[1]/price[2]/amount">11.11</item>
        <item path="/create/article[1]/price[2]/currency">AUD</item>
        <item path="/create/article[2]/id">2</item>
        <item path="/create/article[2]/description">some name</item>
        <item path="/create/article[2]/name[1]">some description</item>
        <item path="/create/article[2]/price[1]/amount">00.01</item>
        <item path="/create/article[2]/price[1]/currency">USD</item>

        <namespace of="create" prefix="ns1:"
                   url="http://predic8.com/wsdl/material/ArticleService/1/"/>
        <namespace of="article" prefix="ns1:"
                   url="xmlns:ns1='http://predic8.com/material/1/"/>
        <namespace of="@lang" prefix="xml:"
                   url="http://www.w3.org/XML/1998/namespace"/>
        <namespace of="price" prefix="ns1:"
                   url="xmlns:ns1='http://predic8.com/material/1/"/>
        <namespace of="id" prefix="ns1:"
                   url="xmlns:ns1='http://predic8.com/material/1/"/>
     </xsl:variable>

     <xsl:template match="/">
      <xsl:sequence select="my:subTree($vPop/@path/concat(.,'/',string(..)))"/>
     </xsl:template>

     <xsl:function name="my:subTree" as="node()*">
      <xsl:param name="pPaths" as="xs:string*"/>

      <xsl:for-each-group select="$pPaths" group-adjacent=
            "substring-before(substring-after(concat(., '/'), '/'), '/')">
        <xsl:if test="current-grouping-key()">
         <xsl:choose>
           <xsl:when test=
              "substring-after(current-group()[1], current-grouping-key())">

             <xsl:variable name="vLocal-name" select=
              "substring-before(concat(current-grouping-key(), '['), '[')"/>

             <xsl:variable name="vNamespace"
                           select="key('kNSFor', $vLocal-name, $vStylesheet)"/>

             <xsl:choose>
              <xsl:when test="starts-with($vLocal-name, '@')">
               <xsl:attribute name=
                 "{$vNamespace/@prefix}{substring($vLocal-name,2)}"
                    namespace="{$vNamespace/@url}">
                 <xsl:value-of select=
                  "substring(
                       substring-after(current-group(), current-grouping-key()),
                       2
                             )"/>
               </xsl:attribute>
              </xsl:when>
              <xsl:otherwise>
               <xsl:element name="{$vNamespace/@prefix}{$vLocal-name}"
                          namespace="{$vNamespace/@url}">

                    <xsl:sequence select=
                     "my:subTree(for $s in current-group()
                                  return
                                     concat('/',substring-after(substring($s, 2),'/'))
                                   )
                     "/>
                 </xsl:element>
              </xsl:otherwise>
             </xsl:choose>
           </xsl:when>
           <xsl:otherwise>
            <xsl:value-of select="current-grouping-key()"/>
           </xsl:otherwise>
         </xsl:choose>
         </xsl:if>
      </xsl:for-each-group>
     </xsl:function>
</xsl:stylesheet> 
```

**当将此转换应用于任何 XML 文档（未使用）时，将产生所需的正确结果**：

```
<ns1:create xmlns:ns1="http://predic8.com/wsdl/material/ArticleService/1/">
   <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/" type="richtext"
                xml:lang="en-us"/>
   <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
      <ns1:id>1</ns1:id>
      <description>bar</description>
      <name>foo</name>
      <ns1:price>
         <amount>00.00</amount>
         <currency>USD</currency>
      </ns1:price>
      <ns1:price>
         <amount>11.11</amount>
         <currency>AUD</currency>
      </ns1:price>
   </ns1:article>
   <ns1:article xmlns:ns1="xmlns:ns1='http://predic8.com/material/1/">
      <ns1:id>2</ns1:id>
      <description>some name</description>
      <name>some description</name>
      <ns1:price>
         <amount>00.01</amount>
         <currency>USD</currency>
      </ns1:price>
   </ns1:article>
</ns1:create> 
```

**说明**：

1.  一个合理的假设是，在整个生成的文档中，任何两个具有相同元素的元素都`local-name()`属于同一个名称空间——这涵盖了现实世界中绝大多数 XML 文档。

2.  命名空间规范遵循路径规范。nsmespace 规范具有以下形式：`<namespace of="target element's local-name" prefix="wanted prefix" url="namespace-uri"/>`

3.  在使用 生成元素之前`xsl:element`，使用由 . 创建的索引选择适当的命名空间规范`xsl:key`。根据这个命名空间规范，其`prefix`和`url`属性的值用于在`xsl:element`指令中指定完整元素名称和元素的命名空间 uri 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:03:34.660

有趣的问题。假设您输入的 XPath 表达式集满足一些合理的约束，例如，如果有一个 X/article[2]，那么（在它之前）还有一个 X/article[1]。让我们暂时将问题的名称空间部分放在一边。

让我们使用 XSLT 2.0 解决方案：我们将从表单中的输入开始

```
<paths>
<path value="1">/create/article[1]/id</path>
<path value="bar">/create/article[1]/description</path>
</paths> 
```

然后我们把它变成

```
<paths>
<path value="1"><step>create</step><step>article[1]</step><step>id</step></path>
   ...
</paths> 
```

现在我们将调用一个在第一步进行分组的函数，并在下一步递归调用自身进行分组：

```
<xsl:function name="f:group">
  <xsl:param name="paths" as="element(path)*"/>
  <xsl:param name="step" as="xs:integer"/>
  <xsl:for-each-group select="$paths" group-by="step[$step]">
    <xsl:element name="{replace(current-grouping-key(), '\[.*', '')}">
      <xsl:choose>
        <xsl:when test="count(current-group) gt 1">
           <xsl:sequence select="f:group(current-group(), $step+1)"/>
        </xsl:when>
        <xsl:otherwise>
           <xsl:value-of select="current-group()[1]/@value"/>
        </xsl:otherwise>
      </xsl:choose>
    </xsl:element>
  </xsl:for-each-group>
</xsl:function> 
```

这是未经测试的，您可能需要调整一些细节才能使其正常工作。但我认为基本方法应该有效。

问题的命名空间部分可能最好通过预处理路径列表来为每个步骤元素添加命名空间属性来解决；然后可以在 xsl:element 指令中使用 this 将元素放在正确的命名空间中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-03T12:25:05.513

我遇到了类似的情况，我必须将 Set of XPath/FQN - 值映射转换为 XML。一个通用的简单解决方案可以使用以下代码，可以针对特定要求进行增强。

```
public class XMLUtils {
static public String transformToXML(Map<String, String> pathValueMap, String delimiter)
        throws ParserConfigurationException, TransformerException {

    DocumentBuilderFactory documentFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder documentBuilder = documentFactory.newDocumentBuilder();
    Document document = documentBuilder.newDocument();

    Element rootElement = null;

    Iterator<Entry<String, String>> it = pathValueMap.entrySet().iterator();
    while (it.hasNext()) {
        Entry<String, String> pair = it.next();
        if (pair.getKey() != null && pair.getKey() != "" && rootElement == null) {
            String[] pathValuesplit = pair.getKey().split(delimiter);
            rootElement = document.createElement(pathValuesplit[0]);
            break;
        }
    }

    document.appendChild(rootElement);
    Element rootNode = rootElement;
    Iterator<Entry<String, String>> iterator = pathValueMap.entrySet().iterator();
    while (iterator.hasNext()) {
        Entry<String, String> pair = iterator.next();
        if (pair.getKey() != null && pair.getKey() != "" && rootElement != null) {
            String[] pathValuesplit = pair.getKey().split(delimiter);
            if (pathValuesplit[0].equals(rootElement.getNodeName())) {
                int i = pathValuesplit.length;

                Element parentNode = rootNode;
                int j = 1;

                while (j < i) {
                    Element child = null;

                    NodeList childNodes = parentNode.getChildNodes();
                    for (int k = 0; k < childNodes.getLength(); k++) {
                        if (childNodes.item(k).getNodeName().equals(pathValuesplit[j])
                                && childNodes.item(k) instanceof Element) {
                            child = (Element) childNodes.item(k);
                            break;
                        }
                    }

                    if (child == null) {
                        child = document.createElement(pathValuesplit[j]);
                        if (j == (i - 1)) {
                            child.appendChild(
                                    document.createTextNode(pair.getValue() == null ? "" : pair.getValue()));
                        }
                    }
                    parentNode.appendChild(child);
                    parentNode = child;
                    j++;
                }
            } else {
                // ignore any other root - add logger
                System.out.println("Data not processed for node: " + pair.getKey());
            }
        }
    }

    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();
    DOMSource domSource = new DOMSource(document);

    // to return a XMLstring in response to an API
     StringWriter writer = new StringWriter();
     StreamResult result = new StreamResult(writer);

     StreamResult resultToFile = new StreamResult(new File("C:/EclipseProgramOutputs/GeneratedXMLFromPathValue.xml"));
     transformer.transform(domSource, resultToFile);
     transformer.transform(domSource, result);

    return writer.toString();
}

public static void main(String args[])
{

    Map<String, String> pathValueMap = new HashMap<String, String>();
    String delimiter = "/";

    pathValueMap.put("create/article__1/id", "1");
    pathValueMap.put("create/article__1/description", "something");
    pathValueMap.put("create/article__1/name", "Book Name");
    pathValueMap.put("create/article__1/price/amount", "120" );
    pathValueMap.put("create/article__1/price/currency", "INR");
    pathValueMap.put("create/article__2/id", "2");
    pathValueMap.put("create/article__2/description", "something else");
    pathValueMap.put("create/article__2/name", "Book name 1");
    pathValueMap.put("create/article__2/price/amount", "2100");
    pathValueMap.put("create/article__2/price/currency", "USD");

    try {
        XMLUtils.transformToXML(pathValueMap, delimiter);
    } catch (ParserConfigurationException | TransformerException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}} 
```

输出：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<create>
    <article__1>
        <id>1</id>
    <name>Book Name</name>
    <description>something</description>
    <price>
        <currency>INR</currency>
        <amount>120</amount>
    </price>
</article__1>
<article__2>
    <description>something else</description>
    <name>Book name 1</name>
    <id>2</id>
    <price>
        <currency>USD</currency>
        <amount>2100</amount>
    </price>
</article__2> 
```

要删除 __%num ，可以在最终字符串上使用正则表达式。像：

```
resultString = resultString.replaceAll("(__[0-9][0-9])|(__[0-9])", ""); 
```

这将完成清洁工作

# c# - 在显示模式下使用所见即所得/富文本编辑器控件 (SharePoint)

> ID：11395991
> 
> 赞同：0
> 
> 时间：2012-07-09T13:25:55.797
> 
> 标签：c#, sharepoint-2010, wysiwyg, content-editor

正如标题所说，是否可以在不将显示模式设置为编辑的情况下让用户访问富文本编辑器的编辑功能（即为该特定控件提供非编辑器编辑权限）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T13:39:08.543

您需要提升他们在您希望他们拥有这些权限的特定区域的权限。我不知道有什么开箱即用的东西可以进行这种类型的自定义，因为编辑功能——就像你提到的那样——与权限紧密相关。

```
SPSecurity.RunWithElevatedPrivileges(delegate()
{
    using (SPSite site = new SPSite(web.Site.ID))
    {
       // Do things by assuming the permission of the "system account".
    }
}); 
```

[http://msdn.microsoft.com/en-us/library/aa543467.aspx](http://msdn.microsoft.com/en-us/library/aa543467.aspx)

# lotus-notes - ViewPanel：DisplayAsLink 删除总数

> ID：11395992
> 
> 赞同：0
> 
> 时间：2012-07-09T13:25:59.960
> 
> 标签：lotus-notes, xpages

我刚刚注意到在使用 xp:viewPanel 时，它显示了一个包含总计的视图。当列设置为“显示为链接”时，不会显示这些总计。

有人可以向我解释为什么会这样吗？或者解决这种行为的方法是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:44:23.530

我看到的是，当列设置为显示为链接时，类别行的列总计会消失。这就是你所看到的，对吧？
乍一看，这似乎是一个问题，但更可能是软件限制——按设计工作。
类别总计不引用特定文档，因此在某种程度上不为这些行放置链接是有意义的。在其他地方，这些行引用文档是有意义的。
但是，可能不管运行时是否应用了链接，都应该显示类别总数。这将是一个增强请求。