# StackOverflow 问答 10247000-10247999

# regex - 需要正则表达式在特殊字符之前添加字符串

> ID：10247001
> 
> 赞同：0
> 
> 时间：2012-04-20T13:15:50.470
> 
> 标签：regex

我有一条推文，我需要匹配 #regex 并添加

```
 <a href=twitter.com/#!/search/%23regex>#regex</a> 
```

我使用以下一个将锚点添加到 https

```
"(?:https?|ftps?)://[\\w/%.-]+", "<a href='$0'>$0</a>" 
```

可能对其进行一些修改可能会起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:19:20.780

目前尚不清楚您使用的是什么语言，但我会试试这个：

```
"#\\w+", "<a href='twitter.com/#!/search/%23$0'>$0</a>" 
```

这应该捕获任何`#`后跟一系列字母数字字符的序列。

# ruby-on-rails - 无法启动 Ruby (Rack) 应用程序问题

> ID：10247007
> 
> 赞同：0
> 
> 时间：2012-04-20T13:16:14.493
> 
> 标签：ruby-on-rails, apache, rvm, ubuntu-10.04, passenger

我已经为此苦苦挣扎了一段时间。我正在使用 RVM 和 Apache，这是我在部署 Rails 3 应用程序后遇到的错误。有什么我想念的吗？！

完整的错误说明如下：

Ruby (Rack) 应用程序无法启动 应用程序需要的源文件丢失。

您可能没有正确上传您的应用程序文件。请检查您的所有申请文件是否已上传。

可能未安装所需的库。请安装此应用程序所需的所有库。

有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。

错误消息：没有要加载的文件--bundler/setup

异常类：LoadError

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:52:52.153

似乎Passenger 使用的Ruby 与RVM 不同，可能是系统Ruby。您需要手动安装Passenger（将您选择的Ruby 与RVM 一起使用）并删除系统Ruby 或使用系统Ruby 安装捆绑程序。

# apache - Apache - 通过执行 php 文件访问日志

> ID：10247009
> 
> 赞同：1
> 
> 时间：2012-04-20T13:16:24.667
> 
> 标签：apache

我确实将网页的访问者重定向到另一个位置。

但我也想通过将日志数据发送到 php 文件来记录这些请求。

有没有办法从 .htaccess 调用一个 php 文件来记录这些请求？

我对新位置执行 RewriteRule。

有没有办法调用一个 php 文件（不应该将访问者定向到那里）来记录请求？

我应该在 .htaccess 中定义这些设置吗？

谢谢 ！

# java - 将对象作为参数传递

> ID：10247015
> 
> 赞同：0
> 
> 时间：2012-04-20T13:16:34.770
> 
> 标签：java, object, parameters, extends

我似乎无法让以下工作：我得到了这个方法 checkEnemyHealth() 通过更改精灵和添加杀戮等来照顾敌人的健康。但是，我需要更改特定 Playertank 对象的杀戮，所以我尝试了以下代码：

```
public void collisionOccured(GameItem collidedItem)
{
    if(collidedItem instanceof Playertank) //Botsing met player
    {
        enemyHealth = 0.0;      
    }       
    if (collidedItem instanceof Weapon) //Botsing met wapen
    {
        lowerEnemyHealth(Weapon.weaponDamage);
        System.out.println("loweredddd");
    }
    if ((collidedItem instanceof Weapon) || (collidedItem instanceof Playertank))
    {
    checkEnemyHealth((GameItem)collidedItem);
    }
}

    public void checkEnemyHealth(GameItem collidedItem)
{
    if (enemyHealth >= (2.0/3.0 * startupEnemyHealth))
    {
        this.setFrame(0); //Green Enemy
        this.setEnemyStage(0);
    }
    else if (enemyHealth < (2.0/3.0 * startupEnemyHealth) && enemyHealth >= (1.0/3.0 * startupEnemyHealth))
    {
        this.setFrame(1); //Orange Enemy
        this.setEnemyStage(1);
    }
    else if (enemyHealth < (1.0/3.0 * startupEnemyHealth) && enemyHealth > 0)
    {
        this.setFrame(2); //Red Enemy
        this.setEnemyStage(2);
    }
    else if (enemyHealth <= 0 && (getEnemyStage() != 3))
    {
        setImage("/images/death.png", 27, 33); //Dead enemy     
        enemyOnDeath();
        if (collidedItem instanceof Playertank)
        {
            ((Playertank)collidedItem).raisePlayerKills(1); 
            mygame.setKillsonDashboard(((Playertank)collidedItem).getPlayerKills());
            ((Playertank)collidedItem).raisePlayerLandmines(1);
            mygame.setLandminesonDashboard(((Playertank)collidedItem).getPlayerLandmines());
        }
        mygame.setTimer(10, 33, this);
    }
    printHealth();
    System.out.println(this.getEnemyStage());
} 
```

但是，即使实例是武器，我也需要执行 raisePlayerKills()。我似乎找不到解决方案。

更多信息：

```
Playertank.java creates the gameplayer and extends GamePlayer.java
GamePlayer.java extends MoveableGameItem.java
Enemytank.java extends MoveableGameItem.java
MoveableGameItem.java extends GameItem.java 
```

我希望它足以解决这个问题，提前谢谢 Flame

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:21:29.477

首先，我建议在调试器中遍历代码。这很可能会告诉你什么是空的。似乎碰撞的项目为空。您确定要将实例化对象传递给方法 checkEnemyHealth 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:27:51.237

这个演员没有做任何事情：`checkEnemyHealth((GameItem)collidedItem);` -- collidedItem 已经是 type `GameItem`。

这种沮丧肯定会失败：`checkEnemyHealth((Playertank)collidedItem);`因为我假设`Playertank`不是 的子类`Weapon`，反之亦然。

总体而言，您发布的确切代码无法引发 a `NullPointerException`，因为没有可以调用`checkEnemyHealth`的代码路径`null`——这是在“beforreee”之后而不是在“afterrrr”之后获得 NPE 的唯一方法。所以让我问你这个问题：你的代码抛出了什么异常？我怀疑一个`ClassCastException`：

```
((Playertank)collidedItem).raisePlayerKills(1); 
```

这是对 Playertank 的未经检查的低调。

# android - Android中的自定义视图和成员变量

> ID：10247017
> 
> 赞同：0
> 
> 时间：2012-04-20T13:16:45.227
> 
> 标签：android, android-animation, android-custom-view

我正在尝试在 Android 中创建一个动画自定义视图，但我遇到了视图对象成员变量的问题。在我运行 invalidate() 之后，变量会重新初始化。

我在名为温度计的自定义视图中得到了这个

```
private float handTarget = 40;

public void setHandTarget(float temperature) {
    Log.e(TAG, "setHandTarget!");
    handTarget = temperature;
    Log.e(TAG, "handTarget="+handTarget);
    handInitialized = true;
    invalidate();
}

@Override
protected void onDraw(Canvas canvas) {
    Log.e(TAG,"onDraw");
    drawBackground(canvas);

    float scale = (float) getWidth();       
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.scale(scale, scale);

    drawHand(canvas);

    canvas.restore();

    if (handNeedsToMove()) {
        moveHand();
    }

}
private boolean handNeedsToMove() {
    Log.e(TAG,"handNeedsToMove?? "+handPosition+" - "+handTarget);
    return Math.abs(handPosition - handTarget) > 0.01f;
} 
```

然后我在我的主要活动中有这个

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    Thermometer therm = new Thermometer(this);
    therm.setHandTarget(50);
} 
```

当我运行应用程序时，我得到

设置手目标！

手目标=50.0

绘制

手NeedsToMove？？40.0 - 40.0

但我期望得到handNeedsToMove？40.0 - 50.0。为什么handTarget 变量不变？怎么修？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:39:44.583

我假设您`Thermometer`的 main.xml 布局中有一个？

您需要访问`Thermometer`您在布局中设置的内容，如下所示：

```
Thermometer therm = (Thermometer) findViewById(R.id.thermo);
therm.setHandTarget(50); 
```

您设置为 50的`Thermometer`不是实际绘制在屏幕上的那个。

# serial-port - Ardiuno Nano 有 Serial2 端口吗？

> ID：10247018
> 
> 赞同：0
> 
> 时间：2012-04-20T13:16:45.680
> 
> 标签：serial-port, arduino

Arduino Nano 是否提供[`Serial2`类似 Arduino Mega 的接口](http://arduino.cc/en/Reference/serial)？如果是这样，Rx/Tx 是什么引脚？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:19:37.830

不，Arduino Nano 使用 ATmega168 或 ATmega368 微控制器，它们只有一个 UART。就像普通的 Arduino（Uno 或 Duemilanove）一样。

它们确实具有 I2C 和 SPI，您可以使用它们与另一个 Arduino 通信，对于某些应用程序，您可以使用[SoftwareSerial](http://arduino.cc/hu/Reference/SoftwareSerial)，它允许您在任何引脚上执行异步串行，但也会占用大量 CPU 周期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:23:30.560

谷歌说不，有**一个**串行端口，但它连接到 USB 芯片，另见[Arduino Nano 技术页面的链接](http://arduino.cc/en/Main/ArduinoBoardNano)。

# linq - 更高效的 LINQ JOIN

> ID：10247025
> 
> 赞同：0
> 
> 时间：2012-04-20T13:17:06.863
> 
> 标签：linq, join

我正在尝试将 2 个表与一对可能的关系连接起来，但我只希望“一个”列数据出现在一行中，在所有其他行中它应该为空（不管是哪一行）。所以：

```
TEACHER
---------
TeacherID
TeacherBiography
.
.
.

STUDENT
-----------
TeacherID
StudentFName
StudentLName
.
.
. 
```

示例：您想获取所有 First Name 为 'Joe' 的学生，使用 TeacherID 加入 Teacher，但限制返回的结果，以便不会在每一行都返回 Teacher 数据。原因是TeacherBiography 很大；我需要它返回，但不是在每一行。

所以一些示例输出应该如下所示：

```
------------------------------------------------
StudentFName | StudentLName | TeacherID | TeacherBiography
------------------------------------------------
'Joe'        | 'Smith'      | 1         | 'long biography for teacher 1..'  
'Joe'        | 'Jones'      | 2         | 'long biography for teacher 2..'  
'Joe'        | 'Michaels'   | 1         | null
'Joe'        | 'Rogers'     | 3         | 'long biography for teacher 3..' 
'Joe'        | 'Washington' | 1         | null
.
.
.
. 
```

因此，在 Michaels 和 Washington 的情况下，TeacherBiograph（以及所有其他教师列）为空，因为数据已在 Smith 行中返回。

我该怎么做？

-J

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:34:15.343

我认为唯一有效的方法是将`STUDENT`s 和`TEACHER`s 与`TeacherID`作为键连接，然后您可以只为一行输出此键一次，而为相同的键输出其他行`null`，如下所示：

```
var StudentsList = students.Join(  //Inner join
    Teachers,
    s => s.TeacherID,
    t => t.TeacherID,
    (teacher, teacherStudetns) => 
        new
        {
            Teacher = teacher,
            HisStudents = teacherStudetns
        }); 
```

然后你可以只输出一次密钥，例如：

```
foreach(var item in StudentsList)
{
     Console.Writline("Teach Name: {0}, His students:", item.TeacherBiography);
     foreach(var student in item.HisStudents)
     {
         Console.writeLine("---------- {0}", student.StudentName);
     }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:36:51.363

我将分两步完成此操作，而不是使您的代码复杂化以尝试一次性完成。首先，检索您关心的学生信息。一旦你有了它，你可以执行另一个查询来获取教师信息，给定不同的教师 ID 列表。

```
var students = //student query
var teacherIds = students.Select(p => p.TeacherID).Distinct();
var teachers = teacherTable.Where(p => p.Contains(teacherIds)); 
```

然后，您可以将两个结果连接到内存中。

```
var allData = from s in students
    join t in teachers on
    t.teacherID equals s.TeacherID
    select new { StudentName = s.Name, TeacherBio = t.TeacherBiography}; 
```

这将导致两次数据库命中，但您只会返回您需要的数据项。

# crystal-reports - CrystalReport 抑制页码部分为空

> ID：10247027
> 
> 赞同：-1
> 
> 时间：2012-04-20T13:17:14.727
> 
> 标签：crystal-reports

我在 Visual Studio 2010 Crystal Report Designer 中重新设计了一个报表。我有这个结构

```
Report Header
    Page Header
       Details Section
         Section1
         Section2
         Section3
         Section4
         Section5
    Page Footer
Report Footer 
```

如果为空，则每个部分都隐藏。

我的问题是，如果我将页码字段放在 PageFooter 中，则该部分永远不会为空，并且该部分显示为白页。

我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:44:47.057

请改用抑制公式。

```
RecordCount = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:29:13.283

您可以做的是将部分设置为根据公式而不是“如果为空”有条件地抑制。您的页脚中还有哪些其他字段？

# jquery - 使用 jQuery 改变页面的背景

> ID：10247028
> 
> 赞同：0
> 
> 时间：2012-04-20T13:17:18.073
> 
> 标签：jquery

如何使用 jQuery 调暗页面背景？

我的 jQuery 代码看起来像这样。

```
$(document).ready(function(){       
      $("body").fadeTo(1000, 0.33);        
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:22:51.560

如果您“暗淡”`body`页面，您将暗淡页面上的*每个*元素，因为根据定义，每个元素都是该元素的子`body`元素。特别是如果您正在使用不透明度（就像`fadeTo()`那样）。

如果您只想使`body`元素的背景图像变暗，我建议在页面内容周围包裹另一个元素并使用部分透明`.png`的作为该元素的背景图像，或者使用`rgba()`背景颜色。

1.  [JS Fiddle`background-color`概念验证](http://jsfiddle.net/davidThomas/XsamG/)。
2.  [JS Fiddle`background-image`概念验证](http://jsfiddle.net/davidThomas/XsamG/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:29:00.167

您可以创建一个覆盖主体的 div 标签，将其背景颜色设置为黑色，不透明度为 0,7，降低主体的不透明度将改变所有元素的不透明度；

```
 $('#cover').fadeIn(1000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:25:04.600

使用 jquery 插件检查这个对图像的好操作

[http://jobyj.in/adipoli/#demo](http://jobyj.in/adipoli/#demo)

# java - 添加枚举值？

> ID：10247035
> 
> 赞同：2
> 
> 时间：2012-04-20T13:17:32.877
> 
> 标签：java, enums, switch-statement

我可以从两个枚举创建一个枚举（在 switch 语句中使用的常量）吗？？？
就像是...

```
public class Test{

    public enum WorkDay {Monday, Tuesday, Wednesday, Thursday,Friday};
    public enum WeekEndDay {Sunday, Saturday};

    // it doesn't work ):
    public enum Day{WorkDay.values(),WeekEndDay.values()}; 

    public static void Action(Day d) {

        switch(d){
            case Monday:
                ...;
                break;
            case Tuesday:
                ...;
                break;
            case ...:
                ...;
                break;
            case Saturday:
                ...;
                break;
        }
    }
} 
```

任何的想法？？？我真的很想使用*switch*并分离了枚举谢谢！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T13:21:13.137

不，您可以创建一个`Day`枚举并*显式*列出每个值，也为每种类型提供一个构造函数......但我个人会使用：

```
public enum Day {
    MONDAY(true),
    TUESDAY(true),
    WEDNESDAY(true),
    THURSDAY(true),
    FRIDAY(true),
    SATURDAY(false),
    SUNDAY(false);

    private final boolean workDay;

    private Day(boolean workDay) {
        this.workDay = workDay;
    }

    public boolean isWorkDay() {
        return workDay;
    }
} 
```

然后，您*还可以*发布一个`EnumSet<Day>`工作日和另一个非工作日。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:23:41.293

您不能组合枚举，因为 WorkDay、WeekEndDay 和 Day 都是不同的类。你能做的最好的事情是：

```
public enum Day {
    Monday(false),
    Tuesday(false),
    Wednesday(false),
    Thursday(false),
    Friday(false),
    Saturday(true),
    Sunday(true);
    private boolean isWeekendDay;
    private Day(boolean isWeekendDay) {
        this.isWeekendDay = isWeekendDay;
    }
    public boolean isWeekendDay() {
        return isWeekendDay;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:41:36.317

Effective Java 有一个很好的枚举示例，可以满足您的要求。作者向您推荐策略模式。代码可以是：

```
// The strategy enum pattern
enum SomeActionDay {
    MONDAY(DayActionType.WEEKDAY), TUESDAY(DayActionType.WEEKDAY),
    WEDNESDAY(DayActionType.WEEKDAY), THURSDAY(DayActionType.WEEKDAY),
    FRIDAY(DayActionType.WEEKDAY),
    SATURDAY(DayActionType.WEEKEND), SUNDAY(DayActionType.WEEKEND);
private final DayActionType dayType;
SomeActionDay(DayActionType dayType) { this.dayType = dayType; }
return-type takeAction(parameters) {
    return dayType.takeAction(parameters);
}
// The strategy enum type
private enum DayActionType {
WEEKDAY {
return action(parameters) {
//business logic for weekday. return value
}
},
WEEKEND {
return action(parameters) {
//business logic for weekday. return value
}
};

abstract returntype action(parameters);

}
} 
```

# php - 如何使用 PHP 获取浏览器信息 + 时间戳

> ID：10247038
> 
> 赞同：-3
> 
> 时间：2012-04-20T13:17:35.733
> 
> 标签：php

我正在尝试编写一个函数，它将在用户登录时执行。它应该获取用户PC上当前的浏览器、操作系统、分辨率和时间？

是否有可能获得此类信息以及如何获得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:29:05.400

PHP 只会给服务器时间，要获取用户的电脑时间，你必须使用 javascript

```
 function getTime()
    {
    var d = new Date();
    var c_hour = d.getHours();
    var c_min = d.getMinutes();
    var c_sec = d.getSeconds();
    var t = c_hour + ":" + c_min + ":" + c_sec;
    return t;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:21:21.923

```
<?php
echo $_SERVER['HTTP_USER_AGENT'] . "\n\n";

$browser = get_browser(null, true);
print_r($browser);
?> 
```

[来源1](http://php.net/manual/en/function.get-browser.php)

$_SERVER 超级全局变量中还有其他参数可能对您有所帮助，例如时间信息。[在这里检查](http://php.net/manual/en/reserved.variables.server.php)

GetDate() 获取日期

```
<?php
$today = getdate(); <---- In correct (updated below)
print_r($today);
?> 
```

[来源2](http://php.net/manual/en/function.getdate.php)

## 更新的答案

您无法从 PHP 获取浏览器时间，因为 PHP 在服务器上运行。它对客户一无所知，完全不知道客户时间。但是您可以在 PHP 中使用 JavaScript 并破解浏览器时间，就像这样

```
echo "<script type=\\"text/javascript\\">";
    echo "localtime = new Date();";
    echo "document.location.href = '$PHP_SELF?client_time=' + localtime.getTime();";
    echo "</script>"; 
```

[有关此的更多信息，请访问 sitepoint](https://www.sitepoint.com/community/t/displaying-client-time-with-php/1677/2)

# php - 当我搜索多个结果并且即使没有找到记录时，PHP 搜索功能错误

> ID：10247044
> 
> 赞同：0
> 
> 时间：2012-04-20T13:18:05.410
> 
> 标签：php

好的，我有这个代码：

纯html（index.html）：

```
<html>
<head>
</head>
<body>
<form name="form" action="search.php" method="get">
<input type="text" name="q" />
<input type="submit" name="Submit" value="Search" />
</form>
</body>
</html> 
```

和这个搜索功能 php 文件（search.php）：

```
<?php  // Get the search variable from URL
if(!isset($_GET['q']))
die("Search Query not found"); 
$var = $_GET['q'];
$trimmed = trim($var); //trim whitespace from the stored variable

// rows to return
$limit=10;

// check for an empty string and display a message.
if ($trimmed == ""){
echo "<p>Please enter a search…&lt;/p>";
exit;
}

// check for a search parameter
if (!isset($var)){
echo "<p>We dont seem to have a search parameter!</p>";
exit;
}

//connect to your database ** EDIT REQUIRED HERE **
mysql_connect("localhost","root","");

//specify database ** EDIT REQUIRED HERE **
mysql_select_db("sakila") or die("Unable to select database");
// Build SQL Query
$query = "select * from customer where first_name like \"%$trimmed%\" or last_name like     \"%$trimmed%\" or email like \"%$trimmed%\" order by first_name DESC";

// EDIT HERE and specify your table and field names for the SQL query

$numresults=mysql_query($query);
$numrows=mysql_num_rows($numresults);

// If we have no results, offer a google search as an alternative — this is optional

if ($numrows == 0)
{
echo "<h4>Results</h4>";
echo "<p>Sorry, your search: $trimmed returned zero results</p>";

// google
echo "<p><a href=\"http://www.google.com/search?q="
. $trimmed . "\" target=\"_blank\" title=\"Look up
" . $trimmed . " on Google\">Click here</a> to try the
search on google</p>";
}

// next determine if s has been passed to script, if not use ZERO (0) to Limit the     output
if (empty($s)) {
$s=0;
}

// get results
$query .= " limit $s,$limit";
$result = mysql_query($query) or die("Couldn’t execute query");

// display what the person searched for
echo "<p>You searched for: $var </p>";

// begin to show results set
echo "Results: <br/>";
$count = 1 + $s ;

// now you can display the results returned
while ($row= mysql_fetch_array($result)) {
$f_name = $row["first_name"];
$l_name = $row["last_name"];
$email = $row["email"];

echo "$count.> $f_name $l_name $email<br/>" ;
$count++ ;
}

$currPage = (($s/$limit) + 1);

//break before paging
echo "<br />";

// next we need to do the links to other results
if ($s>=1) {

// bypass PREV link if s is 0
$prevs=($s-$limit);
print " <a href=\"$PHP_SELF?s=$prevs&q=$var\"><<
Prev 10</a>  ";
}

// calculate number of pages needing links
$pages=intval($numrows/$limit);

// $pages now contains int of pages needed unless there is a remainder from division

if ($numrows%$limit) {
// has remainder so add one page
$pages++;
}

// check to see if last page
if (!((($s+$limit)/$limit)==$pages) && $pages!=1) {

// not last page so give NEXT link
$news=$s+$limit;

echo " <a href=\"$PHP_SELF?s=$news&q=$var\">Next 10 >></a>";
}

$a = $s + ($limit) ;
if ($a > $numrows) { $a = $numrows ; }
$b = $s + 1 ;
echo "<p>Showing results $b to $a of $numrows</p>";

?> 
```

我得到了这个错误：“注意：未定义的变量：C:\xampp\htdocs\search\search.php 中的 PHP_SELF 在第 105 行”，这是第 105 行：“echo” Next 10 >>“;”，每当我用多个结果搜索它，即使没有找到记录。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:21:04.670

> “注意：未定义的变量：C:\xampp\htdocs\search\search.php 中的 PHP_SELF 第 105 行”

更改`$PHP_SELF`为`$_SERVER['PHP_SELF']`

# xcode - 在 Xcode 中的应用程序中保存屏幕截图

> ID：10247047
> 
> 赞同：-1
> 
> 时间：2012-04-20T13:18:13.207
> 
> 标签：xcode, screenshot

如何制作一个截取屏幕截图的按钮，然后将其保存在我的应用程序的画廊中（另一个视图）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:20:50.980

看看这篇文章：[如何以编程方式截取 iPhone 的截图？](https://stackoverflow.com/questions/3610604/how-to-take-a-screenshot-of-the-iphone-programmatically)

它解释了如何做你想做的事。

要制作图片库，我建议使用[Fgallery](https://github.com/gdavis/FGallery-iPhone)。

# asp.net - DataGrid TemplateColumn - 发生更改时触发事件（asp:radiobuttonlist）

> ID：10247048
> 
> 赞同：1
> 
> 时间：2012-04-20T13:18:22.130
> 
> 标签：asp.net, vb.net, datagrid

当TemplateColumn的行发生变化(asp:radiobuttonlist)时获取DataGrid的行索引

```
<asp:DataGrid ID="dgTier2" runat="server" AutoGenerateColumns="False" Width="578px" 
     Height="83px" OnItemDataBound="dgTier2_ItemDataBound">
    <asp:BoundColumn  DataField="TypeID" HeaderText="TypeID">
    </asp:BoundColumn>
    <asp:BoundColumn  DataField="Type" HeaderText="Category Type">
    </asp:BoundColumn>
     <asp:TemplateColumn HeaderText="Manual Tracking Option" >
      <ItemStyle VerticalAlign="Bottom" />
       <itemtemplate>
        <asp:radiobuttonlist id="rdbtnManual" runat="server" on RepeatDirection="Horizontal">
        <asp:listitem id="M"  runat="server" Text="Manual" Value="1" />
        <asp:listitem id="A"  runat="server" Text="NoManual" Value="0" />
     </asp:radiobuttonlist>
     </itemtemplate>
     </asp:TemplateColumn>
     </asp:DataGrid> 
```

在更改 rediobutton 选择以获取更改行的 Rowindex 之后。如果在许多行中发生了所有更改，我需要收集 Rowindexs。这是否可行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:25:07.853

我的答案..

我在 itemtemplate 列中添加了 OnSelectedIndexChanged 属性。

```
<asp:TemplateColumn HeaderText="Manual Tracking Option">
    <ItemStyle VerticalAlign="Bottom" />
    <itemtemplate>
    <asp:radiobuttonlist id="rdbtnManual" runat="server" AutoPostBack="true" OnSelectedIndexChanged="ManTracChanged" RepeatDirection="Horizontal">
    <asp:listitem id="M"  runat="server" Text="Manual" Value="1" />
    <asp:listitem id="A"  runat="server" Text="No Manual" Value="0" />
    </asp:radiobuttonlist>
    </itemtemplate>
</asp:TemplateColumn> 
```

在后面的代码中

```
 'for storing list of RowIndex which change occur  
  Private objListManTrack As New List(Of Integer) 

  Protected Sub ManTracChanged(ByVal sender As Object, ByVal e As EventArgs)
       Dim RowIndex As Integer = Nothing
       Dim rblist As RadioButtonList
       rblist = CType(sender, RadioButtonList)
       Dim modifiedgriditem As DataGridItem = CType(rblist.Parent.Parent, DataGridItem)
       RowIndex = modifiedgriditem.ItemIndex

        If Session("objListManTrack") Is Nothing Then
            objListManTrack.Add(RowIndex)
            Session("objListManTrack") = objListManTrack
        Else
            objListManTrack = Session("objListManTrack")
            objListManTrack.Add(RowIndex)
            Session("objListManTrack") = objListManTrack

        End If

End Sub 
```

在函数中，我正在制作发生变化的网格行的索引列表。

最后获得更新行的列表，然后我们可以在一个按钮单击事件中反映对 DB 的更改......

# sql - SQL Server 将 Varchar 转换为日期时间

> ID：10247050
> 
> 赞同：50
> 
> 时间：2012-04-20T13:18:23.943
> 
> 标签：sql, sql-server, datetime, formatting, varchar

我有这种日期格式：2011-09-28 18:01:00（在 varchar 中），我想将其转换为日期时间，更改为 28-09-2011 18:01:00 这种格式。我该怎么做？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-20T13:28:59.510

```
SELECT CONVERT(Datetime, '2011-09-28 18:01:00', 120) -- to convert it to Datetime

SELECT CONVERT( VARCHAR(30), @date ,105) -- italian format [28-09-2011 18:01:00]
+ ' ' + SELECT CONVERT( VARCHAR(30), @date ,108 ) -- full date [with time/minutes/sec] 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-20T13:26:21.227

像这样

```
DECLARE @date DATETIME
SET @date = '2011-09-28 18:01:00'
select convert(varchar, @date,105) + ' ' + convert(varchar, @date,108) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-20T13:26:55.190

[该](http://www.sql-server-helper.com/tips/date-formats.aspx)网站显示了几个格式选项。

例子：

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 105) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-02T05:49:58.943

您可以拥有所有不同的样式**`datetime conversion`**：

[https://www.w3schools.com/sql/func_sqlserver_convert.asp](https://www.w3schools.com/sql/func_sqlserver_convert.asp)

这具有值范围：-

```
CONVERT(data_type(length),expression,style) 
```

对于样式值，
请选择您需要的任何人，例如我需要 106。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-21T15:21:16.317

试试下面

```
select Convert(Varchar(50),yourcolumn,103) as Converted_Date from yourtbl 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-20T13:26:28.367

您可以这样做，但它将其保留为 varchar

```
declare @s varchar(50)

set @s = '2011-09-28 18:01:00'

select convert(varchar, cast(@s as datetime), 105) + RIGHT(@s, 9) 
```

或者

```
select convert(varchar(20), @s, 105) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-20T13:28:04.467

如前所述，日期时间没有格式/字符串表示格式。

您可以使用一些格式更改字符串输出。

要将您的字符串转换为日期时间：

```
declare @date nvarchar(25) 
set @date = '2011-09-28 18:01:00' 

-- To datetime datatype
SELECT CONVERT(datetime, @date) 
```

给出：

```
-----------------------
2011-09-28 18:01:00.000

(1 row(s) affected) 
```

要将其转换为您想要的字符串：

```
-- To VARCHAR of your desired format
SELECT CONVERT(VARCHAR(10), CONVERT(datetime, @date), 105) +' '+ CONVERT(VARCHAR(8), CONVERT(datetime, @date), 108) 
```

给出：

```
-------------------
28-09-2011 18:01:00

(1 row(s) affected) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-20T13:31:16.767

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 105) + ' ' + CONVERT(VARCHAR(10), GETDATE(), 108) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-06-25T08:39:18.100

我厌倦了所有不同的转换谷歌搜索，最终得到了这个在新变体上扩展的实用功能。

```
CREATE FUNCTION [dbo].[ParseDatetime] (
    @INPUT nvarchar(255),
    @FORMAT nvarchar(255)
)
RETURNS datetime

AS 
BEGIN 

DECLARE @TimePart NVARCHAR(255)
DECLARE @DatePart NVARCHAR(255)
DECLARE @DayPart NVARCHAR(255)
DECLARE @ExDayPart NVARCHAR(255)
DECLARE @MonthPart NVARCHAR(255)
DECLARE @YearPart NVARCHAR(255)
DECLARE @Date DATETIME
--DECLARE @INPUTSTRING NVARCHAR(255)
--SET @INPUTSTRING = '20-10-2019 00:00:00'

--SET @FORMAT = 'D-M-YYYY HH:MM:SS'
IF(@FORMAT = 'D-M-YYYY HH:MM:SS')
BEGIN
    SET @TimePart = RIGHT(@INPUT,LEN(@INPUT)-CHARINDEX(' ',@INPUT))
    SET @DatePart = LEFT(@INPUT,CHARINDEX(' ',@INPUT))
    SET @DayPart = LEFT(@DatePart,charindex('-',@DatePart)-1)
    SET @ExDayPart = RIGHT(@DatePart,LEN(@DatePart)-charindex('-',@DatePart)+1)
    SET @MonthPart = left(@ExDayPart ,charindex('-',@ExDayPart )-1)
    SET @YearPart = right(@ExDayPart ,LEN(@ExDayPart )-charindex('-',@ExDayPart )+1)
    SET @Date = DATEFROMPARTS(@YearPart,@MonthPart,@DayPart) 

END

IF(@FORMAT = 'YYYY-MM-DD')
BEGIN
    SET @DayPart = RIGHT(@INPUT,2)
    SET @MonthPart = RIGHT(left(@INPUT,7),2)
    SET @YearPart = LEFT(@INPUT,4)
    SET @Date = DATEFROMPARTS(@YearPart,@MonthPart,@DayPart) 

END

IF(@FORMAT = 'EXCEL_DAYS_SINCE_1900')
BEGIN
--DECLARE @INPUT NVARCHAR(255)
--SET @INPUT = ' 43554' 
    SET @Date = Dateadd(day,CAST(@INPUT AS INT),datefromparts(1900,1,1))
END

RETURN @Date
END
GO 
```

将其用作：

```
SELECT
[DateAsDate] = dbo.[ParseDateTime]([DateAsString], 'YYYY-MM-DD')
FROM [tablename] 
```

# windows - .git 文件夹是跨平台的吗？

> ID：10247052
> 
> 赞同：9
> 
> 时间：2012-04-20T13:18:31.577
> 
> 标签：windows, linux, git

如果将使用linux创建的.git文件夹复制到windows，它会工作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T13:24:37.090

是的，没关系 - 我自己就是这样工作的 - 在两台具有 Linux 和 Windows 的计算机上，`.git`目录由 Dropbox 同步，绝对没有问题 :)

顺便说一句 -`.hg`效果同样好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:54:35.973

是的，我在 Linux 上将它与[gitflow](http://nvie.com/posts/a-successful-git-branching-model/)扩展一起使用，在 Windows 上将它与 msysGit + TortoiseGit 一起使用，它`.git`很好地使用了该文件夹。

但要非常小心反向。通过将 git 文件夹从 Windows 复制到 Linux，将会有：

1.  文件中的许多 Windows 回车符
2.  文件权限更改

MsysGit 在 Windows 上可以很好地管理它，但在 Linux 上，在提交/推送之前，您必须：将[dos2unix](http://sourceforge.net/projects/dos2unix/)用于 1\. 并将`chmod 644`文件用于 2.`git status`并将`git diff`帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:38:39.243

是的，我在 Windows 和 Linux 机器上都使用了相同的 repo，它运行良好。当您在 Git Windows 中工作时，每次推送到远程 Linux 存储库时，git 都会将行结尾从 Windows 转换为 Linux 样式。

# python - 带有cookie的HTTP POST和GET在python中进行身份验证

> ID：10247054
> 
> 赞同：14
> 
> 时间：2012-04-20T13:18:37.297
> 
> 标签：python, http, authentication, post, cookies

我正在尝试创建一个使用我的 ID 和密码登录到我大学网站的 python 程序。这是登录的正式页面：[https ://webapp.pucrs.br/consulta/](https://webapp.pucrs.br/consulta/)

您可能会注意到，这两个字段名为 pr1 和 pr2。该页面使用 POST 发送数据。此外，加载页面时会下载一个 cookie，它是一个包含随机值的 JSESSIONID，据我所知，您必须返回 POST 方法的标头以验证登录名。

我写了以下代码，但是 GET 方法的返回页面显示“会话未初始化”，可能是 cookie 没有正确发送回来。

```
from urllib2 import Request, build_opener, HTTPCookieProcessor, HTTPHandler
import httplib, urllib, cookielib, Cookie, os

conn = httplib.HTTPConnection('webapp.pucrs.br')

#COOKIE FINDER
cj = cookielib.CookieJar()
opener = build_opener(HTTPCookieProcessor(cj),HTTPHandler())
req = Request('http://webapp.pucrs.br/consulta/principal.jsp')
f = opener.open(req)
html = f.read()
for cookie in cj:
    c = cookie
#FIM COOKIE FINDER

params = urllib.urlencode ({'pr1':111049631, 'pr2':<pass>})
headers = {"Content-type":"text/html",
           "Set-Cookie" : "JSESSIONID=70E78D6970373C07A81302C7CF800349"}
            # I couldn't set the value automaticaly here, the cookie object can't be converted to string, so I change this value on every session to the new cookie's value. Any solutions?

conn.request ("POST", "/consulta/servlet/consulta.aluno.ValidaAluno",params, headers) # Validation page
resp = conn.getresponse()

temp = conn.request("GET","/consulta/servlet/consulta.aluno.Publicacoes") # desired content page
resp = conn.getresponse()

print resp.read() 
```

我应该把这个 cookie 放在哪里，以便对登录进行身份验证？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-20T14:37:54.367

我会尝试使用`requests`图书馆。[文档](https://requests.readthedocs.io/en/master/)非常好，代码最终比`urllib*`

```
$ pip install requests 
```

使用自己处理 cookie 的[会话](https://requests.readthedocs.io/en/master/user/advanced/#session-objects)（参见 Piotr 的评论），结果如下所示

```
import requests
url_0 = "http://webapp.pucrs.br/consulta/principal.jsp"
url = "https://webapp.pucrs.br/consulta/servlet/consulta.aluno.ValidaAluno"
data = {"pr1": "123456789", "pr2": "1234"}

s = requests.session()
s.get(url_0)
r = s.post(url, data) 
```

它似乎工作正常，因为我收到`pr1`123456789 的“Usuario inexistente”通知和带有您的用户号码的“Sehna inválida”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T14:44:55.980

您必须使用为所有请求创建的相同“开启程序”，它将自行处理所有 cookie。

这是我最近写的东西的摘录

```
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookielib.CookieJar()))

# then for all requests

if postData:     
    pData =  urllib.urlencode(postData)
else:
    pData = None

httpReq = urllib2.Request(url, pData, self._headers)
page =  opener.open(httpReq) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-17T18:19:25.170

将 MatthieuW 的答案转换为 Python 3 给出了。

```
import urllib, http.cookiejar

opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(http.cookiejar.CookieJar()))
# then for all requests

if postData:     
    pData =  urllib.parse.urlencode(postData)
else:
    pData = None

httpReq = urllib.request.Request(url, pData)
page =  opener.open(httpReq) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-07T09:35:12.230

urllib 不好，使用请求！

```
from requests import Request, Session

url = "https://webapp.pucrs.br/consulta/principal.jsp"
s = requests.Session()

p = dict(pb1 = 'dd', pb2 = 'cc')
r = s.get(url, params = p) 
# use the cert=/path/to/certificate.pem if you need it
# elsewhere use verify = False to bypass ssl verification

c = r.cookies

# Then send back a response using those same cookies

r = requests.get(other_url, cookies = c, verify = False) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T13:24:01.600

我建议你使用[mechanize](http://wwwsearch.sourceforge.net/mechanize/)，它会自动为你处理会话/cookies/登录，此外它提供了一个类似 urllib 的 API 和例如表单填充，所以你不必弄乱正确的 POST 请求，因为它得到机械化建造。

# android - 如何在 Android 中识别 TAP（摇晃）模式？

> ID：10247058
> 
> 赞同：2
> 
> 时间：2012-04-20T13:18:46.823
> 
> 标签：android, touch, design-patterns, accelerometer

我想在 Android 设备上捕获“TAP”。例如，假设设备在用户的口袋里。*然后他从口袋外面*用特定的图案触碰了手机两次。比如说，用两个/三个手指敲击，比如“TAP -- TAP”。我想抓住这个。

我想，使用加速度计应该可以实现。现在，我可以阅读 X、Y、Z ......但我怎么能认出它是 `TAP - TAP' 呢？可能吗？

或者，还有其他方法可以实现这一目标吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:53:00.640

问题是，当用户走路时（特别是如果他的口袋松了），可能很难将常规摇晃与 TAP TAP 区分开来。它应该像用户走路或跑步时那样工作吗？

为了实现这一点，我将首先在持续时间内观察加速度计，以及在这些相同的加速度测量值上的 TAP TAP 发生率。注意到特殊动作的最好方法是建立一个模式。这是我能想到的第一个例子（非常基本）：

*   在某个加速度计轴上达到阈值（平均值 + OFFSET），可以将其视为第一次点击。
*   值在平均值附近反转。
*   达到相同的阈值 - 即在 X 毫秒之前
*   检测到的动作。

所有工作都在于能够找到正确的模式和相应的算法，知道加速度计对噪声非常敏感（尤其是在口袋中）。

# c++ - 什么是单元测试模板化 C++ 方法/类/函数的好方法？

> ID：10247061
> 
> 赞同：14
> 
> 时间：2012-04-20T13:18:50.793
> 
> 标签：c++, unit-testing, templates

我正在寻找一种在 C++ 中对我的模板化方法、类和函数进行单元测试的好方法。我有一种感觉，仅仅使用单一类型进行测试是不够的，而且仅仅复制单元测试并替换类型也不合适。

更具体地说，我正在研究一个 Matrix 类并使用 Boost 的单元测试框架。Matrix 适用于不同类型。它将主要用于基本类型，但我希望它也支持具体类型。

请注意，我这样做是出于学习目的，这就是我不使用现有矩阵实现的原因。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T13:31:23.677

Boost 测试有一个宏 BOOST_AUTO_TEST_CASE_TEMPLATE 对 boost::mpl::list 中的每种类型的模板运行测试。

```
template<typename T>
T Add(T lh, T rh)
{
   return lh + rh;
}

typedef boost::mpl::list<int, float> test_types;

BOOST_AUTO_TEST_CASE_TEMPLATE(Add_1Plus2_Is3, T, test_types)
{
    T result = Add(T(1), T(2));
    BOOST_CHECK_EQUAL(T(3), result);
} 
```

[http://www.boost.org/doc/libs/1_48_0/libs/test/doc/html/utf/user-guide/test-organization/auto-test-case-template.html](http://www.boost.org/doc/libs/1_48_0/libs/test/doc/html/utf/user-guide/test-organization/auto-test-case-template.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:32:36.107

我同意 josuegomes 和 VJovic 的观点。我认为，最大程度地减少代码重复的一种方法是使用您的单元测试逻辑创建一个模板化函数，然后使用不同类型的参数调用它。这样，您可以将所有 Matrix 单元测试逻辑放在一个地方，同时为每种所需类型调用一次模板化单元测试函数。

但是，这样做可能有点矫枉过正。我认为这取决于您的测试中的逻辑量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:25:17.967

单元测试的重点是覆盖代码的每个分支。如果使用不同类型的测试涵盖不同的分支，那么添加特定于类型的单元测试是有意义的，否则它只是复制粘贴。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:26:19.200

如果您正在对模板进行单元测试，那么您需要使用所有可能的类型对模板类进行单元测试，或者直到您认为足够为止。没有办法。

您的课程可能适用于 int，但适用于 float。

如果模板不适用于某些类型，那么您应该在代码中添加一些 static_assert。

# java - Swing：有时会跳过 JTree 或其他组件上的鼠标事件

> ID：10247065
> 
> 赞同：1
> 
> 时间：2012-04-20T13:19:04.883
> 
> 标签：java, swing, mouseevent, jpopup

我需要在我的 JTree 上显示弹出菜单，然后像这样添加了鼠标侦听器：

```
 tree.addMouseListener(new MouseAdapter(){
     public void mouseClicked(MouseEvent me){
        if (SwingUtilities.isRightMouseButton(me)){
           //.. some code to show popup menu
        }
     }
  }); 
```

但有时这个事件只是被跳过：我点击了，但`mouseClicked()`没有被调用。同样的情况发生在`JTabbedPane`：我确实右键单击某个选项卡，**有时`mouseClicked()`没有调用，但选项卡实际上已切换**。

**UPD**：这发生在大约 10% 的点击中。经常忽略它。

顺便说一句，我可以添加`ChangeListener`这样`JTabpedPane`的，并且这个事件永远不会被跳过，但我也需要处理鼠标，我完全不知道这里有什么问题。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T16:45:25.957

我想问题在于，在 10% 的点击中，您实际上并没有**点击**，而是**开始和完成了一次拖动**。这就是为什么 mouseClicked 事件不起作用的原因。

尝试监听 mousePressed 或 mouseReleased MouseAdapter 的事件（取决于您想要的行为）而不是 mouseClicked 事件。

# android - 安卓报错请解释

> ID：10247067
> 
> 赞同：0
> 
> 时间：2012-04-20T13:19:17.613
> 
> 标签：android, android-layout, android-intent, android-widget

有人可以解释下面的错误消息是什么意思吗？错误是：

```
java.lang.ClassCastException: android.widget.ImageButton cannot be cast to android.widget.TextView 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:20:30.140

你可能正在做..

```
TextView text = (TextView)findViewById(R.id.image); 
```

其中视图是一个图像按钮..

所以现在它不能将图像按钮转换为 TextView .. 将其更改为

```
ImageButton button= (ImageButton )findViewById(R.id.image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:20:57.230

您有一个 ImageButton 对象（可能来自`findViewById()`？），并且您正试图从中制作一个 TextView （“铸造”）。它可能看起来像这样

```
TextView yourView = (TextView) findViewById('yourButtonView'); 
```

你不能那样做

# mysql - 在 mysql 服务器上触发两个查询会出错

> ID：10247070
> 
> 赞同：0
> 
> 时间：2012-04-20T13:19:25.223
> 
> 标签：mysql, sql, jdbc

我通过 jdbc PreparedStatement 触发两个选择查询，
查询由分号（默认分隔符）分隔，
它给了我以下错误

**com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'select inq.preffered_date as 'dom' , inq.id from assigned_inquiries ai join inqu' 附近使用正确的语法**

**select inq.preffered_date as .........**是第二个查询开始的地方。

编辑-> 查询

```
select
    ms.next_date_of_meeting as 'dom',
    ms.inquiry_id as 'id'
from
    assigned_inquiries ai,
    meeting_status ms
where
    ai.representative_id = 1
    and (
        ai.status = 'postponed'
        or ai.status = 'remeeting'
    )
    and ai.inquiry_id = ms.inquiry_id
    and ms.next_date_of_meeting between '2012-1-1' and '2012-12-31'
    and ms.created_on = (select max(created_on) from meeting_status where inquiry_id = ms.inquiry_id);

select
    inq.preffered_date as 'dom',
    inq.id
from
    assigned_inquiries ai
    join inquiry inq on ai.inquiry_id = inq.id
where
    ai.representative_id = 1
    and ai.status = 'new'
    and inq.preffered_date between '2012-1-1' and '2012-12-31'; 
```

是否可以一次执行两个查询。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:31:39.353

您可以使用 MySQL 一次执行多个语句。但是，默认情况下禁用此功能。要启用它，请使用属性`allowMultiQueries`。有关更多信息，请参阅 JDBC 驱动程序的 MySQL 文档：http: [//dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html](http://dev.mysql.com/doc/refman/5.5/en/connector-j-reference-configuration-properties.html)

# linux - 使用系统调用的缓存污染

> ID：10247072
> 
> 赞同：4
> 
> 时间：2012-04-20T13:19:29.543
> 
> 标签：linux, memory-management, operating-system, linux-kernel

朋友们 我想研究一下操作系统造成的缓存污染对应用程序性能的影响。
为此，我编写了一个小型自定义基准程序。

```
1\. malloc an array of size = l1 data cache-size
2\. repeat ... sweep this array from start to end (hit-rate = 1.0)
3\. *** perform a system call that thrashes l1 data cache ***
4\. sweep the array once again (expected hit-rate = ~0.7 ---> 1.0) 
```

算法的第 2 步重复读取完整的数组。希望该数组将保留在缓存中，从而导致命中率为 1。

执行系统调用后，我再次尝试读取缓存。但我假设操作系统已经驱逐了一些属于用户的缓存行。

如您所见，该程序依赖系统调用从 l1 数据缓存中逐出许多用户数据行。我怎样才能做到这一点？

我假设系统调用应该与文件相关或与流相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:17:08.677

对 L1 缓存的影响因系统调用而异。一种方法是遍历几个不同的系统调用并测量每个调用的影响（包括，例如与 I/O 相关的调用，如`write()`，您可以在其中改变缓冲区的大小，从而可能对缓存产生影响）。

您可能希望避免系统调用实现为*vsyscall*（例如`gettimeofday()`），因为它们不需要切换到内核空间。见 [ [1](http://www.trilithium.com/johan/2005/08/linux-gate/) , [2](http://www.win.tue.nl/~aeb/linux/lk/lk-4.html) ]。

听起来您想隔离对 L1d 的影响，因此您可能需要注意另一件事：在您的第 2 步中，在您遍历阵列后，L1i 缓存将被填充。在您的系统调用完成后，很可能 L1d*和*L1i 都已被污染，因此您可能还会看到 i-cache 未命中的性能影响。

为了获得更好的细粒度测量，您可能可以使用硬件性能计数器，具体取决于您的体系结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-08T09:37:22.223

我正在阅读 Hennessy 和 Patterson - 线程级并行性 - 操作系统和多道程序工作负载。显示 L1-cache 活动高的示例是一些基准代码的编译。可能，您可以拥有一些可以编译的代码，然后在步骤 3 中生成该编译以修改 L1 缓存。但是，是的，L1i 也会被修改。

# urlencode - Dart 中的 urlencoding

> ID：10247073
> 
> 赞同：52
> 
> 时间：2012-04-20T13:19:36.220
> 
> 标签：urlencode, dart

Dart 中是否有进行 urlencoding 的功能？我正在使用 XMLHttpRequest 对象进行 AJAX 调用，并且我需要对 url 进行 url 编码。

我在 dartlang.org 上进行了搜索，但没有找到任何结果。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-07-01T14:44:42.233

```
var uri = 'http://example.org/api?foo=some message';
var encoded = Uri.encodeFull(uri);
assert(encoded == 'http://example.org/api?foo=some%20message');

var decoded = Uri.decodeFull(encoded);
assert(uri == decoded); 
```

[http://www.dartlang.org/docs/dart-up-and-running/contents/ch03.html#ch03-uri](http://www.dartlang.org/docs/dart-up-and-running/contents/ch03.html#ch03-uri)

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-04-20T13:33:28.637

**更新：现在**[Dart Uri 类](https://api.dartlang.org/stable/1.20.1/dart-core/Uri-class.html)中支持编码/解码 URI

Dart 的 URI 代码放置在一个名为[dart:uri](https://api.dartlang.org/stable/1.20.1/dart-core/Uri-class.html)的单独库中（因此它可以在`dart:html`和之间共享`dart:io`）。看起来它目前不包含`urlencode`函数，所以目前最好的选择可能是使用JavaScript[的](http://neil.fraser.name/news/2011/EncodeDecode.dart)Dart 实现`encodeUriComponent`。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-08-28T14:23:15.163

我编写了这个小函数来将 Map 转换为 URL 编码的字符串，这可能是您正在寻找的。

```
String encodeMap(Map data) {
  return data.keys.map((key) => "${Uri.encodeComponent(key)}=${Uri.encodeComponent(data[key])}").join("&");
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2019-04-16T14:35:06.580

```
Uri.encodeComponent(url); // To encode url
Uri.decodeComponent(encodedUrl); // To decode url 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-20T14:07:39.873

我认为还没有。查看[http://unpythonic.blogspot.com/2011/11/oauth20-and-jsonp-with-dartin-web.html](http://unpythonic.blogspot.com/2011/11/oauth20-and-jsonp-with-dartin-web.html)和 encodeComponent 方法。

注意，它也缺少一些字符，它需要扩展。Dart 真的应该内置并且易于使用。它实际上可能有它，但我没有找到它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-15T08:37:10.157

Flutter Ex中的安全 URL 编码。

```
String url  = 'http://example.org/';
String postDataKey = "requestParam="
String postData = 'hdfhghdf+fdfbjdfjjndf' 
```

在获取请求的情况下：

```
Uri.encodeComponent(url+postDataKey+postData); 
```

在发布数据请求的情况下，使用**[flutter_inappwebview](https://pub.dev/packages/flutter_inappwebview)**库

```
var data = postDataKey + Uri.encodeComponent(postData);
webViewController.postUrl(url: Uri.parse(url), postData: utf8.encode(data)); 
```

# jquery - jquery输入文本转换为图像

> ID：10247084
> 
> 赞同：0
> 
> 时间：2012-04-20T13:20:31.037
> 
> 标签：jquery, input

我有这个输入文本代码：

```
$("#text1").keyup(function() {
    $('#text2').text($('#text1').val());
});
$('#text2').draggable({
    containment: 'parent'
}); 
```

问题：如何在jquery中将其转换为图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:22:44.690

如果我正确理解了这个问题，您想将一段文本转换为图像。

使用[`<canvas>`](https://developer.mozilla.org/en/HTML/Canvas)标签呈现文本，然后调用[`toDataURL()`](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dom-canvas-todataurl)以获取图像数据的 base64 表示。

# android - android 3.1 的裁剪图像代码不起作用

> ID：10247086
> 
> 赞同：0
> 
> 时间：2012-04-20T13:20:44.587
> 
> 标签：android

这是我的裁剪代码，它在 2.2 和 2.3 上运行良好。但它不适用于 3.1。请解决这个问题。在 V2.3(HTC Wildfire S) 和 V3.1(Samsung 10.1) 上测试提前谢谢。

```
package com.androidworks;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.ActivityNotFoundException;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.util.Log;
import android.view.Gravity;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.Toast;

public class MediaStoreTest extends Activity {

protected static final int PHOTO_PICKED = 0;
private static final String TEMP_PHOTO_FILE = "tempPhoto.jpg";
private Button mBtn;
protected ImageView photo;
protected int outputX = 400;
protected int outputY = 600;
protected int aspectX = 1;
protected int aspectY = 1;
protected boolean return_data = false;
protected MediaStoreTest thiz;
protected boolean scale = true;
protected boolean faceDetection = true;
protected boolean circleCrop = false;
private final static String TAG = "MediaStoreTest";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    thiz = this;
    setContentView(R.layout.main);
    mBtn = (Button) findViewById(R.id.btnLaunch);
    photo = (ImageView) findViewById(R.id.imgPhoto);

    mBtn.setOnClickListener(new OnClickListener(){

        public void onClick(View v) {
            try {

                File picFile = new File(Environment.getExternalStorageDirectory(),"rawImge.png");
                Intent intent = new Intent("com.android.camera.action.CROP");
               intent.setDataAndType(Uri.fromFile(picFile),"image/*");

                intent.putExtra("crop", "true");
                intent.putExtra("aspectX", aspectX);
                intent.putExtra("aspectY", aspectY);
                intent.putExtra("outputX", outputX);    
                intent.putExtra("outputY", outputY);
                intent.putExtra("scale", scale);
                intent.putExtra("return-data", return_data);
                intent.putExtra(MediaStore.EXTRA_OUTPUT, getTempUri());
                intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString());
                intent.putExtra("noFaceDetection",!faceDetection); // lol, negative boolean noFaceDetection
                if (circleCrop) {
                    intent.putExtra("circleCrop", true);
                }

                startActivityForResult(intent, PHOTO_PICKED);
            } catch (ActivityNotFoundException e) {
                Toast.makeText(thiz, R.string.photoPickerNotFoundText, Toast.LENGTH_LONG).show();
            }
        }
        });

}

private Uri getTempUri() {
    return Uri.fromFile(getTempFile());
}

private File getTempFile() {
    if (isSDCARDMounted()) {

        File f = new File(Environment.getExternalStorageDirectory(),TEMP_PHOTO_FILE);
        try {
            f.createNewFile();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            Toast.makeText(thiz, R.string.fileIOIssue, Toast.LENGTH_LONG).show();
        }
        return f;
    } else {
        return null;
    }
}

private boolean isSDCARDMounted(){
    String status = Environment.getExternalStorageState();

    if (status.equals(Environment.MEDIA_MOUNTED))
        return true;
    return false;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case PHOTO_PICKED:
        if (resultCode == RESULT_OK) {
                if (data == null) {
                    Log.w(TAG, "Null data, but RESULT_OK, from image picker!");
                    Toast t = Toast.makeText(this, R.string.no_photo_picked,
                                             Toast.LENGTH_SHORT);
                    t.show();
                    return;
                }

                final Bundle extras = data.getExtras();
                if (extras != null) {
                        File tempFile = getTempFile();
                        // new logic to get the photo from a URI
                        if (data.getAction() != null) {
                            processPhotoUpdate(tempFile);
                        }                  
                }
        }
        break;
    }
}

/*
 *  processes a temp photo file from 
 */
private void processPhotoUpdate(File tempFile) {

    Log.w(TAG, "processPhotoUpdate is called");

    FileInputStream fisForResilt = null;
    Bitmap result = null;
    try {
        fisForResilt = new FileInputStream(tempFile);
         result = BitmapFactory.decodeStream(fisForResilt);
        fisForResilt.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    android.widget.LinearLayout.LayoutParams params = new android.widget.LinearLayout.LayoutParams(result.getWidth(),result.getHeight());
    params.gravity = Gravity.CENTER_HORIZONTAL | Gravity.CENTER_VERTICAL;
    photo.setLayoutParams(params);
    photo.setImageBitmap(result);

}

} 
```

我的布局看起来像这样，为此你需要在你的 sdcard “rawImage”上有一个图像。

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
 >
<TextView  
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content" 
 android:text="@string/summary"
 />
 <Button
 android:id="@+id/btnLaunch"
 android:layout_width="fill_parent"
 android:layout_height="wrap_content"
 android:text="Launch Media Gallery"
 />
 <ImageView
  android:id="@+id/imgPhoto"
 android:layout_width="400dip"
 android:layout_height="400dip"
 />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:03:14.873

裁剪意图不是公共 API 的一部分。只有一种解决方案可以保证适用于所有设备：将裁剪代码集成到您自己的应用程序中。这很容易实现，因为官方的 android 图库应用程序是开源的 :-)

如果您不想这样做，可以尝试通过手动启动并观察 logcat 来找出三星设备上的裁剪活动的名称。它应该是这样的`com.android.sec.gallery3d.app.CropImage`

# c++ - 在结构数组中初始化结构数组

> ID：10247089
> 
> 赞同：2
> 
> 时间：2012-04-20T13:20:50.477
> 
> 标签：c++, gcc, struct, object-initializers

给定以下代码：

```
struct BufferPair
{
    ByteBuffer _a;
    ByteBuffer _b;

    bool _c;
};

struct TestData
{
    MyClass _myClass;

    BufferPair _data[];
}; 
```

我正在尝试初始化一个 TestData 数组，其中我还初始化了一个 BufferPair 数组。每个 TestData 实例都有一个不同大小的 BufferPair 数组。简化示例：

```
const TestData g_Data[] = { MyClass(), { { bufOne, bufTwo, someBool }, { bufThree, bufFour, anotherBool } } }; 
```

尝试此操作时，我收到以下 gcc 错误：

```
error: too many initializers for 'BufferPair [0]'. 
```

我将如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:27:19.087

```
struct TestData
{
    MyClass _myClass;
    BufferPair _data[];
}; 
```

`_data`上面代码中的不是完整类型（它缺少数组的大小），并且在 C++ 标准中不允许将成员声明为不完整类型：

> 9.2p10
> 
> 非静态 (9.4) 数据成员不应有不完整的类型。

这似乎编译为 gcc 中语言的扩展。现在它仍然无法编译变量的定义，因为数组没有大小并且您正在尝试初始化其中的成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:26:24.350

你没有写数组的大小`BufferPair[]`——它是零，所以你不能用值填充它。

试试看`BufferPair[2]`这是否能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:31:48.697

如其他答案所述，您无法初始化没有长度的数组。做到这一点的唯一方法是在运行时使用“长度 1 技巧”（如果您使用 gcc，则使用长度 0 技巧）初始化结构。

有关如何 [使用可变长度数组成员分配结构的更多信息，请参阅这篇文章](https://stackoverflow.com/questions/7641698/allocating-struct-with-variable-length-array-member)

# properties - “self”无法在 Xcode 中检测到它的属性，它甚至不知道它本身是哪个类

> ID：10247092
> 
> 赞同：1
> 
> 时间：2012-04-20T13:21:00.430
> 
> 标签：properties, self

大家好，我有一个非常奇怪的问题。我创建了一个新的 NSObject 子类，但我不能在实现中使用“self.someproperty”。通常当我输入“self”这个词时，Xcode 会猜测我在输入什么，并在点后给我属性名称。但在这种情况下，它并没有给我一个红色错误。我已经检查了我的代码一晚，现在放弃了。所以，希望有人给我一个建议，请让我知道这可能是某个地方的一个小问题？

这是我的代码：

```
#import <Foundation/Foundation.h>

@interface FlickrPhotoCache : NSObject

+(BOOL)isInCache:(NSDictionary *)photo;

@end

#import "FlickrPhotoCache.h"

@interface FlickrPhotoCache()

@property (nonatomic, strong) NSMutableArray *photos;

@end

@implementation FlickrPhotoCache
@synthesize photos = _photos;

+(BOOL)isInCache:(NSDictionary *)photo
{
    self.photos // here I get error
}

@end 
```

提前致谢！留白

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:35:58.013

您在声明用于静态（类）方法而不是实例方法的方法时使用 +`self`仅存在于实例方法中。

采用

```
 -(BOOL)isInCache:(NSDictionary *)photo; 
```

声明将实例变量`self`用于属性时。

进而

```
-(BOOL)isInCache:(NSDictionary *)photo
{
    self.photos;
} 
```

工作得很好。

# android - 如何访问位于 Robotium 的操作栏中（在 Android 手机中）的菜单

> ID：10247093
> 
> 赞同：0
> 
> 时间：2012-04-20T13:21:02.033
> 
> 标签：android, for-loop, android-actionbar, robotium

```
|----------------------------------------------|
| **Menu1**|**Menu2**|**Menu3**                |
|----------------------------------------------|                                              |
|                                              |
|                                              |
|                                              | 
|                                              |
-----------------------------------------------|                                              | 
```

尝试了所有选项，例如 clickOnImage、ClickonImageButton、ClickonMenu、ClickonMenuItem、ClickonText 等。但这些方法都不起作用..请让我知道访问放置在 ActionBar 中的菜单的方法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:51:05.430

您可以使用：

```
getInstrumentation().invokeMenuActionSync(mActivity, R.id.menu_item_id, 0); 
```

# ruby-on-rails - 带导轨的 Spreedly 宝石

> ID：10247101
> 
> 赞同：0
> 
> 时间：2012-04-20T13:21:16.653
> 
> 标签：ruby-on-rails, spreedly

我想快速放入我的新 Rails 应用程序。因为我是新手，任何人都可以帮助我使用快速宝石吗？它说您必须为您的帐户配置 API 密钥和站点名称：

```
RSpreedly::Config.setup do |config|
  config.api_key        = "your-api-key"
  config.site_name      = "your-site-name"
end 
```

我应该把它放在哪里？我需要为此做一个初始化程序？然后我想要一个订阅系统。我应该制作一个控制器来处理订阅吗？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:30:48.493

我会把那个代码放在`config/initializers/spreedly.rb`.

在不了解您的应用程序的情况下，很难回答您的第二个问题，但我会说：是的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T20:44:09.437

它可能是特定于环境的，因此您可以在初始化程序中执行此操作

```
if Rails.env.development?
elseif Rails.env.test?
else
... 
```

或者只是在 test.rb、develoment.rb 和 production.rb 中输入不同的值

# jquery - 无法让 .Net Web 服务返回 Json

> ID：10247104
> 
> 赞同：1
> 
> 时间：2012-04-20T13:21:20.497
> 
> 标签：jquery, .net, json, web-services

我已经阅读了这里的帖子并尽我所知，但仍然无法让我的网络服务返回 json。

网络服务，.Net 4.0

```
[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.ComponentModel.ToolboxItem(false)]
// To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment     the following line. 
[System.Web.Script.Services.ScriptService]
public class JsonWS : System.Web.Services.WebService
{
[WebMethod]
[ScriptMethod(UseHttpGet = false, ResponseFormat = ResponseFormat.Json)]
public string Sum()
{
    string x = "1", y = "2";
    return x + y;
} 
```

}

这是我的 jquery 调用。

```
<script>
$(function () {
    $('#btn_test').click(function () {
        $.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "http://localhost/jsontest/JsonWS.asmx/Sum",
            dataType: "json",
            success: function (json) {
                alert(json.d);
            },
            error: function () {
                alert("Hit error fn!");
            }
        });
    });
}); 
```

此错误 b/c Web 服务正在返回...

```
<string xmlns="http://tempuri.org/">12</string> 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:26:02.307

### 描述

你得到了字符串，因为你返回了一个字符串。你应该返回一个对象。该对象将被转换为 JSON。

### 样本

```
public class MyClassName 
{
   public string x { get; set }
   public string y { get; set }
}

[WebMethod]
[ScriptMethod(UseHttpGet = false, ResponseFormat = ResponseFormat.Json)]
public MyClassName Sum()
{
    return new MyClassName { x = "1", y = "2" };
} 
```

## 更新

您也可以返回匿名类型。在这种情况下，您不需要对象`MyClassName`

```
[WebMethod]
[ScriptMethod(UseHttpGet = false, ResponseFormat = ResponseFormat.Json)]
public MyClassName Sum()
{
    return new { x = "1", y = "2" };
} 
```

### 更多信息

*   [如何在 ASP.NET 中创建 JSON Web 服务](http://williamsportwebdeveloper.com/cgi/wp/?p=494)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:20:05.287

# 更新：

无法让跨域 (jsonp) 与 Web 服务一起使用，因此切换到 .aspx 页面并使用 Response.Write() 将逻辑放入 Page_Load。奇迹般有效。

对于刚开始从事此类工作的人的警告，请注意“回调=？” 参数。另一个要注意的是，刷新和关闭您的响应对于除 Chrome 之外的所有浏览器都是可以的，因为这会向浏览器发送一个响应，表明该流已被服务器关闭。Chrome 以不同的方式处理这个问题。放手吧，你会没事的。

# sql - 如何在不运行实际查询的情况下检查 JDBC 语句的 SQL 语法？

> ID：10247106
> 
> 赞同：14
> 
> 时间：2012-04-20T13:21:26.453
> 
> 标签：sql, oracle, jdbc, syntax, verification

我有一条 SQL 语句（用于 Oracle 数据库），如果它有效，它需要很长时间才能运行。如果它无效，它会立即返回错误。

我想在不运行语句（通过 JDBC）的情况下检查语法是否有效，例如在“检查语句”按钮后面。是否有独立于供应商的方式来做到这一点？我首先想到将查询简单地定义为 PreparedStatement 似乎不会导致任何类型的编译或错误检查。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T13:25:47.813

可能为该语句发布一个解释计划会给你有用的结果。

另一个想法 - 但也许更难的是编辑查询以添加（并且 rownum < 1）或使其运行快速的东西

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T15:36:13.903

如果您正在处理 SELECT 查询，也许 JDBC [PreparedStatement#getMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/PreparedStatement.html#getMetaData%28%29)会起作用？

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T14:17:27.840

这更像是一个 hack，而不是真正的答案，但您可以运行一个始终返回一行和一列的查询：

```
SELECT ( EXISTS (SELECT 1 FROM dual)
         OR
         EXISTS (your Query here)
       ) AS result
FROM dual 
```

如果您的查询有效，这应该返回`TRUE`，如果它无效则引发错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T15:21:02.500

你可以`DBMS_SQL.PARSE`用来检查你的陈述。*警告*：它只会解析 DML 语句，但它会执行并提交 DDL 语句，例如创建表等。您可以创建一个存储过程来返回一个值或布尔值并像这样包装一个块：

```
set serveroutput on
-- Example of good SQL 
declare
  c integer;
  s varchar2(50) := 'select * from dual';
begin
  c := dbms_sql.open_cursor;
  dbms_sql.parse(c,s,1);
  dbms_sql.close_cursor(c);
  dbms_output.put_line('SQL Ok');
exception
  when others then
    dbms_sql.close_cursor(c);
    dbms_output.put_line('SQL Not Ok');
end;
/

-- Example of bad SQL
declare
  c integer;
  s varchar2(50) := 'select splat from dual';
begin
  c := dbms_sql.open_cursor;
  dbms_sql.parse(c,s,1);
  dbms_sql.close_cursor(c);
  dbms_output.put_line('SQL Ok');
exception
  when others then
    dbms_sql.close_cursor(c);
    dbms_output.put_line('SQL Not Ok');
end;
/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-21T12:04:51.163

您可以使用[Oracle 的 Pro*C 预编译器](http://docs.oracle.com/cd/B12037_01/appdev.101/a97269/pc_02prc.htm)来执行语法检查（[在此处下载](http://www.oracle.com/technetwork/topics/precomp-112010-084940.html)）。

这是一个用于预编译包含原始 Oracle SQL 语句的 C 代码的工具，但您可以“滥用”它来执行 SQL 语法检查。

1.  使用以下代码创建文件 test.pc：

    执行 SQL SELECT * FROM DUAL WERE 1=1;

2.  安装预编译器工具后运行此命令：

    proc INAME=test SQLCHECK=SYNTAX

3.  您将看到以下输出：

    文件 test.pc 第 1 行第 34 列的语法错误：文件 test.pc 中第 1 行第 34 列的错误
    EXEC SQL SELECT * FROM DUAL WERE 1=1;
    .................................1
    PCC-S-02201，在期待其中之一时遇到符号“1”以下：
    ; , for, union, connect, group, having, intersect, minus, order, start, where, with,
    符号“有”被替换为“1”继续。

将其集成到您的解决方案中应该很简单。

请注意，它还可以执行在线语义检查，验证所有使用的过程和表在特定模式中是否有效。为此，您传入 SQLCHECK=SEMANTICS USERID=youruser

# facebook - 如何延长访问令牌有效期？

> ID：10247108
> 
> 赞同：2
> 
> 时间：2012-04-20T13:21:44.087
> 
> 标签：facebook

正如我们所知，offline_access 现在已被弃用，有人可以告诉我，如果没有该权限，我们如何获得长期存在的访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:15:23.627

您可以通过将以下函数添加到 base_facebook.php 来扩展访问令牌。

// 用于扩展令牌值的扩展函数。

公共函数 getExtendedAccessToken() {

```
try {

    $access_token_response =
        $this->_oauthRequest(
            $this->getUrl('graph', '/oauth/access_token'),
            $params = array(    'client_id' => $this->getAppId(),
                                'client_secret' => $this->getApiSecret(),
                                'grant_type'=>'fb_exchange_token',
                                'fb_exchange_token'=>$this->getAccessToken(),
                          ));

} catch (FacebookApiException $e) {

  return false;
}

if (empty($access_token_response)) {
  return false;
}

$response_params = array();
parse_str($access_token_response, $response_params);
if (!isset($response_params['access_token'])) {
  return false;
}

return $response_params['access_token']; 
```

}

# solr - 将 SolrDocumentList 转换为 DocList

> ID：10247115
> 
> 赞同：1
> 
> 时间：2012-04-20T13:22:09.310
> 
> 标签：solr, solrj

有什么方法可以将 SolrDocumentList 转换为 DocList 并将其设置在 QueryResult 对象中？

或者，将 SolrDocumentList 对象添加到 QueryResult 对象的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:36:40.033

SolrPluginUtils 中有一个名为[addOrReplaceResults](http://lucene.apache.org/solr/api/org/apache/solr/util/SolrPluginUtils.html)的方法，给定 SolrQueryResponse，如果 DocList 在结果中，它会替换它。否则将其添加到响应中。

# spring - 注释参数的 Spring AOP 切入点

> ID：10247116
> 
> 赞同：20
> 
> 时间：2012-04-20T13:22:10.260
> 
> 标签：spring, aop, spring-aop, pointcut

假设我有这样的方法：

```
public void method(@CustomAnnotation("value") String argument) 
```

是否有一个切入点表达式可以选择所有带有@CustomAnnotation 注释的参数的方法？如果是这样，有没有办法可以访问“价值”参数？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-24T11:07:04.520

在选择你的论点时：

```
@Before("execution(* *(@CustomAnnotation (*)))")
public void advice() {
System.out.println("hello");
} 
```

参考：http: [//forum.springsource.org/archive/index.php/t-61308.html](http://forum.springsource.org/archive/index.php/t-61308.html)

在获取注释参数时：

```
MethodSignature signature = (MethodSignature) joinPoint.getSignature();
Method method = signature.getMethod();
Annotation[][] methodAnnotations = method.getParameterAnnotations(); 
```

将为您提供可以迭代的注释并使用 instanceof 来查找绑定的注释。我知道那很hacky，但afaik这是目前唯一支持的方式。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-10-19T09:32:58.717

匹配**1..N**注释参数**，不管它们的位置**使用

**编辑 2020-12-3**：@sgflt 的简化版本

```
@Before("execution(* *(.., @CustomAnnotation (*), ..))")
public void advice(int arg1, @CustomAnnotation("val") Object arg2) { ... } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-07-10T14:08:39.097

只是为了完成最后一个答案：

```
@Before(value="execution(* *(@CustomAnnotation (*), ..)) && args(input, ..)")
public void inspect(JoinPoint jp, Object input) {
        LOGGER.info(">>> inspecting "+input+" on "+jp.getTarget()+", "+jp.getSignature());
} 
```

将匹配一个方法，其中（一个）方法的参数用**注释** `@CustomAnnotation`，例如：

```
service.doJob(@CustomAnnotation Pojo arg0, String arg1); 
```

相比之下

```
@Before(value="execution(* *(@CustomAnnotation *, ..)) && args(input, ..)")
public void inspect(JoinPoint jp, Object input) {
            LOGGER.info(">>> inspecting "+input+" on "+jp.getTarget()+", "+jp.getSignature());
    } 
```

**这将匹配参数的类** （之一）用 注释的方法`@CustomAnnotation`，例如：

```
service.doJob(AnnotatedPojo arg0, String arg1); 
```

pojo声明如下：

```
@CustomAnnotation
public class AnnotatedPojo {
} 
```

所有的区别都在于切入点声明中的`@CustomAnnotation (*)`vs .。`@CustomAnnotation *`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-14T17:16:37.857

如果您在方法中有多个参数，您还应该使用两个点来计算任意数量的参数（零个或多个）

```
@Before("execution(* *(@CustomAnnotation (*), ..))")
public void advice() {
    System.out.println("hello");
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-12T14:15:06.503

来自 Spring 文档：

```
@Before("@annotation(myAnnotation)")
public void audit(Auditable myAnnotation) {
  AuditCode code = auditable.value();
  // ...
} 
```

这对我来说效果很好，无需操作方法签名。

注意：如果您使用命名切入点，因为切入点名称可能被重载，您必须提供匹配的（参数名称和顺序）签名。

```
@Before("goodAdvise(myAnnotation)")
public void audit(Auditable myAnnotation) {
  String value = auditable.value();
  // ...
}

@Pointcut("@annotation(myAnnotation)")
public void goodAdvise(Auditable myAnnotation) { 
  //empty
} 
```

# android - 在android上保存文件时避免因中断而丢失数据？

> ID：10247118
> 
> 赞同：17
> 
> 时间：2012-04-20T13:22:13.550
> 
> 标签：android, xml, file

我想知道其他人在 Android 上保存文件时使用什么策略来避免数据丢失。我有几个游戏应用程序，本质上，它们可能会在用户暂停时保存游戏状态/保存游戏（onPause）。

这在 99.99% 的情况下都有效，但每隔一段时间我都会收到一个保存过程出错的保存游戏示例。通常，这是一个格式错误的 XML 文件，通常在某个任意点被截断。根据我收到的错误报告，我认为问题主要发生在用户在游戏过程中被电话或类似的东西打断，然后 Android 操作系统在应用程序完成保存之前将其杀死。保存文件的代码非常简单，所以我很难看出还有什么可能导致这个问题。

这是一个严重的问题，因为它通常会导致玩家的保存进度被破坏。

我想先写入一个空文件，然后再复制到“真实”文件，但我怀疑这只会增加问题，因为它总体上需要更多时间并且仍然有被中断的风险。

有谁有安全的方式来做到这一点，Android 相对保证不会搞砸？

* * *

如此总结，到目前为止建议的选项（据我了解）：

1.  为保存过程使用服务，假设这不太可能被操作系统杀死。
2.  保存在临时文件中；验证保存后复制。
3.  游戏状态的增量保存（我实际上已经将它用于玩家日志信息）。
4.  2和3的组合。
5.  将保存移到另一个线程，因为问题可能与 ANR 杀死 [DC 的评论如下]有关。

我认为 SharedPreferences 不适用于这种结构化数据，目前，这些方法似乎都不是理想的解决方案，所以我仍然愿意接受建议。

* * *

我还没有设法测试所有这些方法，因此我没有浪费赏金，而是将其分配给我认为最有可能解决问题的答案。不过，在接受答案之前，我仍计划检查各种选项。感谢所有好的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:05:39.537

We've had occasional issues when we're doing I/O (usually writing) to persistent storage (private filesystem on internal memory) from the main thread. Usually this doesn't take much time at all, but occasionally it inexplicably takes ages (20 or 30 seconds or more). It seems that the Android filesystem implementations on some devices don't support concurrent access (see [this](http://android-developers.blogspot.de/2010/12/new-gingerbread-api-strictmode.html), so your I/O can block if another process is using the filesystem. If you are doing your I/O on the main thread, the OS can/will kill your Activity if it blocks for too long. This may be what is happening to you.

Due to this problem, I would suggest that you move all your I/O to a separate thread (not the main thread). So, for example, to save the game state, in onPause() call a method that serializes the game state to a ByteArrayOutputStream which you then hand off to a separate thread to be written eventually to the filesystem.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T19:03:37.420

这听起来像是一项服务的好工作。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-05T08:17:34.150

我认为在这种情况下，每次用户执行任何操作（不仅是在`onPause()`被调用时）都将一小部分数据（不是整个游戏状态）保存到数据库中是最好的方法。但是，这可能需要对代码进行大量修改。

折衷方案是将游戏状态拆分为更小的部分或子状态（例如 , *`round1`*, *`round2`*...,*`players`*等），并在用户执行任何操作时再次将数据存储到适当的文件中，而不是等待`onPause()`调用。这将显着降低丢失的概率，并且至少可以保证用户不会丢失整个游戏进度。此外，为避免在保存过程中断时可能出现的应用程序状态不一致，您最好先将数据保存到临时文件，并且只有在成功的情况下才简单地重命名文件，而不是复制其内容（比如说，*`round1.xml.tmp`*重命名到*`round1.xml`*）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T14:27:19.847

首先，我会尝试查看应用程序是否真的在没有通知的情况下被杀死，因为我认为情况不应该如此。应用程序可能会因为打电话之类的事情而停止，但我真的不认为 android 只是在没有任何通知的情况下杀死它。它可以决定结束它，但不能不保存状态等。

也许只是保存本身发生了错误。

一种不需要太多修改来检查的方法是使用校验和或使用其他方法来验证保存数据的完整性（大小、结束标记等）。您所要做的就是保存它，阅读并检查它（记录任何错误）并重复它直到它正确。如果你保存大量数据可能不是那么好，但对于纯粹的游戏数据来说应该没问题。

您还可以在应用程序启动和结束时设置一个状态，然后您会在下次启动时知道它上次是否正确结束以及是否需要采取额外措施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-06T14:06:25.270

如果可能的话`SharedPreferences`，用来存储你的游戏状态。只有在您调用后才会提交您的更改`commit()`。您可以在`onSaveInstanceState`回调中保存。在此处阅读[文档。](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)

# c# - LINQ - 左连接

> ID：10247121
> 
> 赞同：2
> 
> 时间：2012-04-20T13:22:34.127
> 
> 标签：c#, .net, linq, join

这是我的旧代码：

```
var destinctList = HoldingsList.DistinctBy(x => new { x.ClientName, x.ProductName }).Select(x => new { ClientName = x.ClientName, ClientProductName = x.ProductName }).ToList();

foreach (var item in destinctList)
{

    var clientAlias = (from ca in someContext.ClientAlias
                       where ca.Name == item.ClientName
                       orderby ca.CreationDate descending
                       select ca).FirstOrDefault();

    if (clientAlias != null)
    {
        destinctList.Where(x => x.ClientName == item.ClientName).ForEach(x => x.ClientID = clientAlias.ClientID);
    }

    ClientProductAlias clientProductAlias = null;

    if (clientAlias != null)
    {
        clientProductAlias = (from ca in someContext.ClientProductAlias
                              where ca.Name == item.ClientProductName
                              && ca.ClientID == clientAlias.ClientID
                              orderby ca.CreationDate descending
                              select ca).FirstOrDefault();
    }

    if (clientProductAlias != null)
    {
        destinctList.Where(x => x.ClientProductName == item.ClientProductName).ForEach(x => x.ClientProductID = clientProductAlias.ClientProductID);
    }
} 
```

这工作得很好，但花了很长时间。

现在我想让这一切都与连接一起工作。这是我到目前为止所拥有的：

```
(from list in destinctList
join ca in someContext.ClientAlias on list.ClientName equals ca.Name into list_client_join
from list_client in list_client_join.DefaultIfEmpty
join cpa in someContext.ClientProductAlias on new { ClientID = (long)list.ClientID, Name = list.ClientProductName } equals new { cpa.ClientID, cpa.Name } into j1
from j2 in j1.DefaultIfEmpty
orderby list_client.CreationDate descending
orderby j2.CreationDate descending
select new { ClientID = list_client.ClientID, 
             ClientName = list.ClientName, 
             ClientProductID = j2.ClientProductID, 
             ClientProductName = list.ClientProductName }).ToList(); 
```

这是我到目前为止得到的，但没有返回任何东西。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:22:21.733

我注意到您的 DefaultIfEmpty 语句缺少括号，而且我认为问题在于它如何处理与空数据的连接。我认为你肯定需要这个`where j1.Any()`电话，你可能还需要`where list_client_join.Any()`.

```
(from list in destinctList 
join ca in someContext.ClientAlias on list.ClientName equals ca.Name into list_client_join 
//where list_client_join.Any ()
from list_client in list_client_join.DefaultIfEmpty() 
join cpa in someContext.ClientProductAlias on new { ClientID = (long)list.ClientID, Name = list.ClientProductName } equals 
   new { cpa.ClientID, cpa.Name } into j1 
// maybe needs the following:
where j1.Any ()
from j2 in j1.DefaultIfEmpty() 
orderby list_client.CreationDate descending 
orderby j2.CreationDate descending 
select new { ClientID = list_client.ClientID,  
             ClientName = list.ClientName,  
             ClientProductID = j2.ClientProductID,  
             ClientProductName = list.ClientProductName }).ToList(); 
```

**更新：**

```
// alternate query
(from list in destinctList  
let ca = someContext.ClientAlias
            .OrderByDescending (cca => cca.CreationDate)
            .FirstOrDefault (cca => cca.Name == list.ClientName)
let cca = someContext.ClientProductAlias
            .OrderByDescending (ccpa => ccpa.CreationDate)
            .FirstOrDefault(ccpa => int.Equals(ccpa.ClientID,
                           ca == null ? -1 : ca.ClientID) && 
                          string.Equals(ccpa.Name,list.ClientProductName))
select new
{
    ClientID = ca != null ? ca.ClientID : -1,
    ClientName = list.ClientName,
    ClientProductID = cca != null ? cca.ClientProductID : -1,
    ClientProductName = list.ClientProductName 
}
).ToList(); 
```

使用数据模拟：http: [//ideone.com/XEqf4](http://ideone.com/XEqf4)

# java - Java-将缓冲图像转换为字节[]而不写入磁盘

> ID：10247123
> 
> 赞同：26
> 
> 时间：2012-04-20T13:22:37.263
> 
> 标签：java, byte, bufferedimage

我正在尝试使用 java 通过套接字发送多个图像，但我需要一种更快的方法将图像转换为字节数组，以便我可以发送它们。我尝试了以下代码，但它向我的 C:\ 驱动器写入了大约 10,000 张图像。有没有办法在不写入磁盘的情况下进行这种转换？谢谢！

```
ByteArrayOutputStream outputStream = new ByteArrayOutputStream();

                    //ImageIO.setUseCache(false);
                    ImageIO.write(bi.getImage(), "jpg", outputStream);

                    byte[] imageBytes = outputStream.toByteArray(); 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-04-20T13:26:24.860

这应该有效：

```
byte[] imageBytes = ((DataBufferByte) bufferedImage.getData().getDataBuffer()).getData(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-07T14:46:51.170

下面的代码非常快（几毫秒）

```
import com.sun.image.codec.jpeg.JPEGCodec;
import com.sun.image.codec.jpeg.JPEGImageEncoder;

public byte[] toByteArray(BufferedImage image) throws IOException {
    ByteArrayOutputStream baos = new ByteArrayOutputStream();            
    JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(baos);
    encoder.encode(image);            
    return baos.toByteArray();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-20T04:13:06.983

```
ByteArrayOutputStream baos;
ImageIO.write(bufferedImage, "png", baos);
byte[] imageBytes = baos.toByteArray(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T13:28:29.163

尝试使用：

```
ImageIO.setUseCache(false); 
```

在写作之前，也许这会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T13:28:44.537

```
BufferedImage img = ImageIO.read(new ByteArrayInputStream(bytes));
byte[] bytes = new byte[buf.capacity()];
buf.get(bytes, 0, bytes.length); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T13:26:52.243

使用 Apache Commons IO Utils [Apache Commons](http://commons.apache.org/io/download_io.cgi)

> IOUtils.copy(inputStream,outputStream);

[IO Utils API](http://commons.apache.org/io/api-1.2/org/apache/commons/io/IOUtils.html)轻松支持大缓冲区

# ruby - 如何使字符串中的所有字母大写？

> ID：10247131
> 
> 赞同：13
> 
> 时间：2012-04-20T13:23:02.983
> 
> 标签：ruby

我有一个来自 MD5 的字符串，如下所示：

```
@encrypted_str = Digest::MD5.hexdigest("1a2b3c").capitalize
=>Bf4ab447496f2d3d5a6c77c2cd12f996 
```

但是这个 .capitalize 只将第一个字母**B设为大写**

请建议我如何将这个 MD5 结果中的所有字母大写

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-20T13:26:32.103

尝试大写：

```
@encrypted_str = Digest::MD5.hexdigest("1a2b3c").upcase 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:33:05.180

您有两种方法可以做到这一点：**大写**和**大写！**

1.  **upcase**会将所有字母大写并返回字符串 -> [http://www.ruby-doc.org/core-1.9.3/String.html#method-i-upcase](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-upcase)
2.  **大写！**将做同样的保存原始对象 - > [http://www.ruby-doc.org/core-1.9.3/String.html#method-i-upcase-21](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-upcase-21)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T13:28:53.670

你正在寻找的是大写。

```
@encrypted_str = Digest::MD5.hexdigest("1a2b3c").upcase
=> "BF4AB447496F2D3D5A6C77C2CD12F996" 
```

有关字符串操作的更多信息，请参见[http://www.ruby-doc.org/core-1.9.3/String.html](http://www.ruby-doc.org/core-1.9.3/String.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T13:26:37.013

尝试

```
@encrypted_str = Digest::MD5.hexdigest("1a2b3c").upcase 
```

# javascript - 如何获取某种字体的基线高度？

> ID：10247132
> 
> 赞同：8
> 
> 时间：2012-04-20T13:23:16.360
> 
> 标签：javascript, fonts

我希望能够使用javascript在div中找到一段文本的[基线高度。](http://en.wikipedia.org/wiki/Baseline_%28typography%29)

我不能使用预定义的字体，因为我的许多用户将在他们的浏览器中使用更大的字体设置。

我怎样才能在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-23T15:17:28.007

我为此制作了一个小型 jQuery 插件。原理很简单：

在一个容器中，插入 2 个具有相同内容的内联元素，但一个样式非常小`.`，另一个样式非常大`A`。然后，由于`vertical-align:baseline`默认情况下有，因此基线如下：

```
 ^ +----+ ^
       | | +-+| | top
height | |.|A|| v
       | | +-+| 
       v +----+

=======================
baseline = top / height
======================= 
```

这是coffeescript中的插件（这里是[JS](http://coffeescript.org/#try:$%20=%20@jQuery%20?%20require%20%27jQuery%27%0A%0AdetectBaseline%20=%20%28el%20=%20%27body%27%29%20-%3E%0A%20%20$container%20=%20$%28%27%3Cdiv%20style=%22visibility:hidden;%22/%3E%27%29%0A%20%20$smallA%20%20%20%20=%20$%28%27%3Cspan%20style=%22font-size:0;%22%3EA%3C/span%3E%27%29%0A%20%20$bigA%20%20%20%20%20%20=%20$%28%27%3Cspan%20style=%22font-size:999px;%22%3EA%3C/span%3E%27%29%0A%0A%20%20$container%0A%20%20%20%20.append%28$smallA%29.append%28$bigA%29%0A%20%20%20%20.appendTo%28el%29;%0A%20%20setTimeout%20%28-%3E%20$container.remove%28%29%29,%2010%0A%0A%20%20$smallA.position%28%29.top%20/%20$bigA.height%28%29%0A%0A$.fn.baseline%20=%20-%3E%0A%20%20detectBaseline%28@get%280%29%29)）：

```
$ = @jQuery ? require 'jQuery'

detectBaseline = (el = 'body') ->
  $container = $('<div style="visibility:hidden;"/>')
  $smallA    = $('<span style="font-size:0;">A</span>')
  $bigA      = $('<span style="font-size:999px;">A</span>')

  $container
    .append($smallA).append($bigA)
    .appendTo(el);
  setTimeout (-> $container.remove()), 10

  $smallA.position().top / $bigA.height()

$.fn.baseline = ->
  detectBaseline(@get(0)) 
```

然后，用以下方法吸烟：

```
$('body').baseline()
// or whatever selector:
$('#foo').baseline() 
```

--

试试看：[http ://bl.ocks.org/3157389](http://bl.ocks.org/3157389)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-04T13:41:18.990

在 Alan Stearns ( [http://blogs.adobe.com/webplatform/2014/08/13/one-weird-trick-to-baseline-align-text/](http://blogs.adobe.com/webplatform/2014/08/13/one-weird-trick-to-baseline-align-text/) ) 发现 inline-block 元素改变了其他内联元素，我整理了一个演示，我发现它比[https://stackoverflow.com/a/11615439/67190](https://stackoverflow.com/a/11615439/67190)更准确，实际上更简单地在 JavaScript 中导出一个值：http: [//codepen.io/georgecrawford/笔/gbaJWJ](http://codepen.io/georgecrawford/pen/gbaJWJ)。希望它有用。

```
<div>
  <span class="letter">T</span>
  <span class="strut"></span>
<div> 
```

```
div {
  width: 100px;
  height: 100px;
  border: thin black solid;
}
.letter {
  font-size: 100px;
  line-height: 0px;
  background-color: #9BBCE3;
}
.strut {
  display: inline-block;
  height: 100px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-05-24T13:54:15.823

**Vanilla JS，在 Chrome、Firefox 和 Edge 上测试**不需要字体信息：****

 **```
function getBaselineHeight(el){
    let bottomY = el.getBoundingClientRect().bottom;//viewport pos of bottom of el

    let baselineLocator = document.createElement("img"); // needs to be an inline element without a baseline (so its bottom (not baseline) is used for alignment)
    el.appendChild(baselineLocator);

    baselineLocator.style.verticalAlign = 'baseline' ; // aligns bottom of baselineLocator with baseline of el
    let baseLineY = baselineLocator.getBoundingClientRect().bottom;//viewport pos of baseline
    el.removeChild(baselineLocator);

    return (bottomY - baseLineY) ;        
}

function positionLine(){
    let line = document.getElementById("line");
    let lorem = document.getElementById("lorem");
    let baselineHeight = getBaselineHeight(lorem);
    let newLinePos = lorem.getBoundingClientRect().bottom - baselineHeight ;
    line.style.top = newLinePos + "px" ;

}
```

```
#lorem{
    background-color: lightblue;
}
#line{
    position:absolute;
    left : 0 ;
    height:1px;
    width:100%
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet"/>
        <span id="lorem">Lorem ipsum dolor sit amet, consectetur adipiscing elit..</span>

        <br><br>

        <button class="btn btn-primary" onclick="positionLine();">position line on baseline</button>

        <br><br>

        <svg id="line">
            <line x1="0" y1="0" x2="100%" y2="0" style="stroke:rgb(255,0,0);stroke-width:1"></line>
        </svg> 
```**

# iphone - OpenGL ES 不会删除我在内存中的纹理

> ID：10247134
> 
> 赞同：6
> 
> 时间：2012-04-20T13:23:26.240
> 
> 标签：iphone, ios, opengl-es, memory-leaks, textures

我目前正在开发一个使用 OpenGL ES 1.0 来渲染一些基本纹理的 iOS 应用程序（iPad 和 iPhone）。我使用图集来存储和呈现我的纹理。

我的主要图集相对较大（2000x2000），但我的内部算法会加载纹理并将其大小调整为 2048x2048，因为 OpenGL ES 仅接受 2 大小纹理的功率。我可以画瓷砖，这边一切都很好。

每次尝试加载和卸载（销毁）纹理时，我都会面临严重的内存泄漏。这应该在最终版本中发生，但我需要确保我的加载和卸载都很好。在内存中，纹理占用 2048x2048x4 (RGBA) 字节 = 大约 16MB。这是一个巨大的字节数，所以你明白这个问题对我来说很烦人（iOS 在几分钟后杀死了应用程序..）

当我加载纹理时，Instruments 表明应用程序使用的总内存增加了 16MB，这是正确的（我使用“Real Memory”列）。当我需要破坏纹理以释放它使用的所有可能字节时，就会出现问题：它永远不会丢失 16MB ......并且由于我在循环中加载和卸载，内存一直被使用并且从未被释放。

这是我加载纹理的方式：

```
GLubyte *outData = malloc((_dataWidth * _dataHeight * 4) * sizeof(*outData));
GLuint _texture; // declared as un instance variable so its address never changes
glGenTextures(1, &_texture);
glBindTexture(GL_TEXTURE_2D, _texture);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, _dataWidth, _dataHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, outData);
free(outData); 
```

这是我卸载纹理的方式（这被称为，我检查过）

```
glDeleteTextures(1, &_texture); 
```

我到处使用 glGetError() 来检查是否发生错误，但它总是返回 0（即使在 glDeleteTexture 之后）。

有人有想法吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-20T14:33:37.040

确保在创建上下文的同一线程上销毁纹理。如果您在没有上下文的情况下进行任何 GL 调用，则不会出现错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:05:39.213

你试过`GL_APPLE_client_storage`扩展吗？这意味着您承诺保持传递给`glTexImage2D`活动的数据块直到`glDeleteTextures`被调用，而不是让 OpenGL 拥有纹理内存的副本。

# templates - 对后端和前端模板使用相同的树枝语法

> ID：10247135
> 
> 赞同：2
> 
> 时间：2012-04-20T13:23:28.757
> 
> 标签：templates, twig, jinja2

我最近一直想知道是否有可能使用与 Twig 具有“相同”语法的模板系统进行客户端模板，以及它与 Twig 的集成。找到[Swig](http://paularmstrong.github.com/swig/)，这似乎是“JavaScript 的 Twig”。

使用相同的语法可能有几个好处：

*   无需学习另一种语法，
*   可移植模板：同一块可用于前端和/或后端模板，具体取决于架构。
*   你给它命名...

但是，会出现一些挑战：

*   我需要一种机制来定义模板中的哪些标签/块/部分专用于前端解析。标签可以完成工作，`{% raw %}`但是...
*   针对可移植模板将代表非常精细的块以及“包含为原始”的可能性。例如：我想在`<head>`我的主 HTML 文件中收集我希望前端模板引擎可用的所有块，每个块都包含在一个`<script>`标签中。所以我需要“原始包含”这些块。

是否有人将 Twig 与 Swig 或任何其他 javascript 模板系统结合使用，其语法与 Twig 的语法有些冲突？您将如何管理/组织您的模板，以便您也可以/仅在前端轻松使用模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-30T19:32:23.820

*免责声明：这是对一个开放问题的开放答案，请记住这一点。我正在分享我的经验，因为没有简单、单一的方式来回答这个问题。*

我是一名前端 Web 开发人员，与 symfony 人员密切合作。过去，我们一起使用树枝和小胡子模板。需要 ajax 调用的任何地方都可以复制 Mustache 模板。很明显，这是一个巨大的维护开销。

我将我的答案分为两个部分，分别解决两个不同的问题；构造模板以使它们易于前端，并添加 twig 的 javascript 实现。

* * *

**模板结构**

我们朝着逻辑组织模板迈出的第一步是将它们划分为**页面级**模板、**功能**模板和**演示**模板。

**页面级**模板是为应用内容定义通用容器的模板。考虑到：

*   用户未经授权
*   用户授权
*   电子邮件

**功能**模板只是更深一步。它们是用于构建整个页面的预制件。通常它们是来自后端的数据被放入的地方。例如，考虑一个容器中的用户列表。功能模板是容器，其中包括演示模板，将数据传递给它。

**演示**模板只是没有逻辑（没有数据转换）的组件，旨在提供数据。这个组件可以嵌套。（Fe *Button*和*title*都包含在*CTA*组件中）。展示组件是我们构建块中最细的颗粒。

以这种方式组织代码花费了很多时间，但让我们能够清楚地区分必须能够前端渲染的组件和逻辑繁重的组件。

* * *

**Twig.js**

下一步是集成（如其中一个评论中所建议的）[twig.js](https://github.com/twigjs/twig.js)。

> 我想在我的主 HTML 文件中收集我希望前端模板引擎可用的所有块，每个块都包含在一个标签中。所以我需要“原始包含”这些块。

使用 twig.js，您无需担心模板可用于前端。您可以只提供 url，如果模板扩展或包含一些其他模板，则将异步加载。因此，使用 json 数据提供的 twig 模板由 javascript 呈现，并且不需要额外的模板引擎。

* * *

我从未运行过任何性能测试。虽然我可以想象 twig.js 比 mustache 慢得多，但在 twig.js 中仅渲染无逻辑组件可以大大提高性能。

如果我没有解决任何问题，请告诉我。我渴望进一步讨论这个话题。

# javascript - 滚动后获取背景图像

> ID：10247145
> 
> 赞同：0
> 
> 时间：2012-04-20T13:24:10.683
> 
> 标签：javascript, jquery, html, css, background

我需要在背景图片结束后修复我的网站背景。这是示例：http: [//jsfiddle.net/cEywp/1/](http://jsfiddle.net/cEywp/1/)

有什么建议么？谢谢。

小解释：我有标题和 1280x1024 背景图像后，标记为 100% 宽度和高度。当我向下滚动（图像结束时）时，我需要该图像变得固定，不再是绝对的。

**编辑**

我用 scrollToFixed 做到了，只是添加到图像中。;)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:30:10.477

你可以写**position:fixed**而不是**position:absolute**。

检查这个[http://jsfiddle.net/cEywp/4/](http://jsfiddle.net/cEywp/4/)

如果您提供图像`background`而不是`IMG.`

检查这个[http://jsfiddle.net/cEywp/5/](http://jsfiddle.net/cEywp/5/)

# php - 如何将数组实现为带引号的文本

> ID：10247148
> 
> 赞同：0
> 
> 时间：2012-04-20T13:24:23.427
> 
> 标签：php, arrays, email, for-loop, quotation-marks

我有一些理解困难。我在 html 中有一些复选框，如下所示：

```
<input type="checkbox" name="a[]" value="1">
<input type="checkbox" name="a[]" value="2">
<input type="checkbox" name="a[]" value="3"> 
```

我喜欢评估 a[] 的多个选择以查看选择了什么，这就是我必须使用数组的原因。

好的，现在的问题是：提交后我已经发布了该数组。

```
if (isset($_POST['submit'])) {

    $a = $_POST['a'];
} 
```

此外，我喜欢为每个选定的值设置一些消息到另一个数组中：

```
if ($a === '1'){
   $msg[] = "text1";
}
if ($a === '2'){
   $msg[] = "text2";
} and so on... 
```

现在我已将这些消息存储到数组中`$msg[]`

下一步，这是我真正的问题：

我喜欢在将要发送的邮件中显示整个选择。所以到目前为止我有：

```
$to = "a@b.cd";
$subject = "some text";
$message = "some text... 

show what was selected:

$msg

end text";... 
```

所以通常我知道我必须像使用 foreach 一样：

```
<?php if(isset($msg)):?>
    <?php foreach($msg as $m):?> 
        <p>
        <?php echo $m;?>
        </p>
    <?php endforeach;?>
<?php endif;?> 
```

使其可见。我的问题是将这个从邮件到引号中的消息中实现。

所以如果有人可以帮助我，我真的很感激。

多谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:27:25.143

只需使用字符串连接，在 PHP 中使用**.** （点）运算符。

```
$message = "some text... \n\nshow what was selected:\n\n";

foreach ($a as $b)
{
    $message .= $b . "\n";
}

$message .= "end text"; 
```

此外，您应该查看变量命名（$a 并不是真正的描述性），并且 $a 是一个数组，所以您不能这样做`if ($a === '1')`，您应该使用[`in_array()`](http://php.net/manual/en/function.in-array.php).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:28:00.603

你应该做

```
$msg = array();
foreach($a as $checked){
    $msg[$a] = "text$a";
} 
```

进而

```
<?php if(isset($msg)):?>
    <?php foreach($msg as $k => $m):?> 
        <p>
        <?php echo "$k : $m";>
        </p>
    <?php endforeach;?>
<?php endif;?> 
```

# gwt - .PNG 图像无法识别的图像文件格式 gwt 编译失败

> ID：10247153
> 
> 赞同：1
> 
> 时间：2012-04-20T13:24:54.830
> 
> 标签：gwt

我正在为 ImageResource 使用 gwt 2.1.0 ClientBundle，我有 .png 透明图像，我遇到了以下问题。

它并非始终如一地在某些机器上工作而不是在某些机器上工作

> 调用生成器 com.google.gwt.resources.rebind.context.InlineClientBundleGenerator 准备方法 getFlightFilename319 添加图像 'com.delta.acs.snapp.gates.web.client.resources.FlightImages.getFlightFilename319' [错误] 无法识别的图像文件格式 [错误] 生成器 'com.google.gwt.resources.rebind.context.InlineClientBundleGenerator' 在重新绑定 'com.delta.acs.snapp.gates.web.client.resources.FlightImages' 时引发异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:47:21.687

我相信这与机器上安装的 Java 版本有关。确保您的计算机具有 Java 1.6.0 的最新版本，最好是 1.6.0_25 或更高版本。将您的一台机器升级到较新版本的 java 并查看是否可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-29T21:04:20.907

我不明白您为什么建议更改 JRE！
仅尝试将色彩空间更改为 RGB 或 sRGB 或 RGBA。
我用 linux 做这个：

```
convert old_image.png -define png:color-type=2 new_image.png 

file old_image.png new_image.png 
old_image.png    PNG image data, 48 x 48, 1-bit grayscale, non-interlaced
new_image.png    PNG image data, 48 x 48, 8-bit/color RGB, non-interlaced 
```

现在您可以使用 new_image.png 并且无需对您的 GWT 项目进行任何其他修改即可解决此问题。

Java：11.0.8 2020-07-14 LTS
GWT：2.9.0

# image - 如何使用新的 fancybox 2.0.6 显示图像编号？

> ID：10247155
> 
> 赞同：1
> 
> 时间：2012-04-20T13:25:03.657
> 
> 标签：image, numbers, fancybox, title

假设我在画廊中有 15 张图片，我想添加一些类似“15 张中的第 1 张”的内容。在以前的版本中，我可以使用类似的东西：

```
'titlePosition': 'over'
'titleFormat': function(currentArray, currentIndex, currentOpts) { return '<span id="fancybox-title-over">Image ' +  (currentIndex + 1) + ' / ' + currentArray.length + '</span>' 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:32:16.843

你可以这样做[**DEMO**](http://jsfiddle.net/sTC8x/1/)：

```
<script type="text/javascript">
$(document).ready(function() {
 $('.fancybox').fancybox({
  prevEffect : 'fade',
  nextEffect : 'fade',
  afterLoad : function() {
   this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
  },
  helpers: {
   title: {
    type: 'inside'
   },
   thumbs: {
    width   : 50,
    height  : 50
   }
  }
 });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:35:26.810

来自[另一个问题](https://stackoverflow.com/questions/10865046/fancybox-custom-titles-for-multiple-galleries)：“[...] 对于 2.0.6 版，我们不能像在 v2.0.1 中那样使用 afterLoad 回调（这就是它使标题消失的原因）......我们将使用 beforeShow反而。”

所以：

```
 beforeShow : function() {
   this.title = 'Image ' + (this.index + 1) + ' of ' + this.group.length + (this.title ? ' - ' + this.title : '');
  } 
```

作品！

# java - 从java发送电子邮件

> ID：10247160
> 
> 赞同：0
> 
> 时间：2012-04-20T13:25:22.883
> 
> 标签：java, api, sendmail

当我使用 Java 邮件身份验证时，我在从 Java 发送电子邮件时遇到问题。我无法弄清楚我得到以下异常的方法：

```
javax.mail.AuthenticationFailedException: 530 Access denied 
```

我将在整个代码下方显示。你能告诉我我做错了什么吗？
请注意，在添加身份验证之前一切正常。另外，您知道是否可以在 2 个不同的域之间发送电子邮件（例如 gmail 到 yahoo）？

```
// LoginDemo.java

import javax.swing.*;

import java.awt.*;
import java.awt.event.*;

import java.util.Properties;

//import javax.mail.Authenticator;
import javax.mail.Message;
import javax.mail.MessagingException;
//import javax.mail.PasswordAuthentication;
import javax.mail.PasswordAuthentication;

import javax.mail.Session;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

class Popup extends JFrame 
{
    private static final long serialVersionUID = 1L;
    JLabel label;
    JPanel panel;
    Popup(){
    label = new JLabel();
    label.setText("E-mail sent...");
        panel=new JPanel();
        panel.setLayout(null);
        label.setBounds(10,5, 100, 23);
        panel.add(label);

         add(panel);

         setTitle("Sending E-mails");
    }
}

class Authenticator extends javax.mail.Authenticator {
    public PasswordAuthentication authentication;

    public Authenticator() {
        String username = "andreeav@domain.com";
        String password = "password";
        authentication = new PasswordAuthentication(username, password);
    }

    public PasswordAuthentication getPasswordAuthentication() {
        return authentication;
    }
} 
```

* * *

```
class Login extends 
JFrame implements ActionListener
{

    private static final long serialVersionUID = 1L;

    JButton Send;
        JPanel panel;
        JLabel label1,label2, label3;
        final JTextField  text1,text2;
        JTextArea text3;
        String body_mail = " Dear Lavinia  \r\n\n 55544 - Andreea Deal (PERSONAL CARE PRODUCTS DIVISION) (CA)   (55544)(V.SOAP)AP needs your \n approval with the following details: \r\n Approval Cycle#: 1 \r\n Channel   Name: Andreea Channel \r\n Advertiser:Andreea Advertiser \r\n Agency:   ANDREEA AGENCY(P) LTD (CA) \r\n Period: 04/10/2012 - 04/30/2012 \r\n Amount: 436,000.00  \r\n   Expected Annual Spend: 0.00  \r\n Last Year Total Budget: 0.00 INR \r\n Last Year Discount: Minimum = 0.00, Maximum = 0.00 \r\n Comments: To approve or reject the proposal, please do not reply to sender e-mail   address. \n Please reply with your comments to the following e-mail address accordingly:  ";

    Login()
    {

        label3 = new JLabel();
        label3.setText("Created by andreeav on April 20th 2012");

        label1 = new JLabel();
        label1.setText("To:");
        text1 = new JTextField(50);

        label2 = new JLabel();
        label2.setText("Subject:");
        text2 = new JTextField(50);

        text3 = new JTextArea(100, 100);

            text3.setText(body_mail);
        Send=new JButton("Send");

            panel=new JPanel();
            panel.setLayout(null);

            label1.setBounds(10,5, 50, 23);
        panel.add(label1);
            text1.setBounds(60, 5, 550, 23);
        panel.add(text1);
        label2.setBounds(10,33,50,23);
        panel.add(label2);
        text2.setBounds(60, 33, 550, 23);
        panel.add(text2);
            text3.setBounds(10, 61, 600, 430);
        text3.setLineWrap(true);

        label3.setBounds(10, 513, 250, 23);
            panel.add(label3);
        panel.add(text3);

        Send.setBounds(520, 513, 90, 23);

        panel.add(Send);
        add(panel);
            Send.addActionListener(this);
            setTitle("Sending E-mails");
    }

    public static boolean isValidEmailAddress(String email)
     {
     try {
     new javax.mail.internet.InternetAddress(email, true);
     } catch (javax.mail.internet.AddressException e) {
     return false;
     }
     return true;
     }

    public static  Session getSession() {
        Authenticator authenticator = new Authenticator();

        Properties properties = new Properties();
        properties.setProperty("mail.smtp.submitter", authenticator.getPasswordAuthentication().getUserName());
        properties.setProperty("mail.smtp.auth", "true");

        properties.setProperty("mail.smtp.host", "smtp.mail.yahoo.com");
        properties.setProperty("mail.smtp.port", "25");

        return Session.getInstance(properties, authenticator);
    }

    public static void SMTPSending(String from, String to, String subject, String content, String host) throws MessagingException
    {

          // Get system properties
           Properties properties = System.getProperties();  

          // Setup mail server
           properties.setProperty("mail.smtp.host", host);  

          // Get the default Session object.

          // Create a default MimeMessage object.
           MimeMessage message = new MimeMessage(getSession());  

          // Set the RFC 822 "From" header field using the
           // value of the InternetAddress.getLocalAddress method.
           message.setFrom(new InternetAddress(from)); 

          // Add the given addresses to the specified recipient type.
           message.addRecipient(Message.RecipientType.TO, new InternetAddress(to));

          // Set the "Subject" header field.
           message.setSubject(subject);  

          // Sets the given String as this part's content,
           // with a MIME type of "text/plain".
           message.setText(content,"UTF-8", "html");

          // Send message
           Transport.send(message);

    }

   public void actionPerformed(ActionEvent ae)
    {

        String value1=text1.getText();
        String value2=text2.getText();
        String value3=text3.getText();
        System.out.println(value3);

    String value4 = "To approve this " + "proposal" + ": " +
        "<a href=\"mailto:"+
        "dealapproval@domain.com" + "?subject=" +
        "Proposal" + " " +
        "55544 -Andreea Deal(55544)(V.A)AP lavi test"+
        " for Approval number " + "10700" + "." +
        " For information only." + "\">" + 
        "dealapproval@domain.com" + "</a><br>";

        //String value4 = "www.google.com";
        value3 = value3+":  "+value4;
        boolean valid = isValidEmailAddress(value1);

        if (valid == true) {
             try {

            SMTPSending("andreeav@domain.com", value1, value2, value3,"mydomain");
            } catch (MessagingException e) {

                e.printStackTrace();
            }

             Popup page =new Popup();
            //set frame size
            page.setSize(200, 100);

             //center frame on screen
             page.setLocationRelativeTo(null);

            page.setVisible(true);

       // page.dispose();
    }
        else{

            JOptionPane.showMessageDialog(this,"Invalid e-mail address!","Error",JOptionPane.ERROR_MESSAGE);
    }
}
} 
```

* * *

```
 class LoginDemo
{
    public static void main(String arg[])
    {
        try
        {

       Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
       int height = screenSize.height;
       int width = screenSize.width;

        Login frame=new Login();
        //set frame size
        frame.setSize(width/2, height/2+200);

         //center frame on screen
         frame.setLocationRelativeTo(null);

        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        }
    catch(Exception e)
        {JOptionPane.showMessageDialog(null, e.getMessage());}
    }
} 
```

* * *

```
//NextPage.java

import javax.swing.*;

class NextPage extends JFrame
{

    private static final long serialVersionUID = 1L;

    NextPage()
    {
       setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
       setTitle("Sending E-mails");
       setSize(400, 400);

    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:12:39.960

这是我在 JSP 学术项目中用于通过 Gmail 帐户发送电子邮件的代码：

```
package my_util;

import javax.mail.*;
import javax.mail.internet.*;
import java.util.*;

public class Mail
{
    private String  d_email = "myemailid@gmail.com",
                    d_password = "mypassword",
                    d_host = "smtp.gmail.com",
                    d_port  = "465";

    public boolean sendMail(String strTo, String strSubject, String strBody){

        Properties props = new Properties();
        props.put("mail.smtp.user", d_email);
        props.put("mail.smtp.host", d_host);
        props.put("mail.smtp.port", d_port);
        props.put("mail.smtp.starttls.enable","true");
        props.put("mail.smtp.auth", "true");
        props.put("mail.smtp.socketFactory.port", d_port);
        props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
        props.put("mail.smtp.socketFactory.fallback", "false");

        try
        {
            Session session = Session.getDefaultInstance(props, null);
            MimeMessage msg = new MimeMessage(session);
            msg.setText(strBody);
            msg.setSubject(strSubject);
            msg.setFrom(new InternetAddress(d_email));
            msg.addRecipient(Message.RecipientType.TO, new InternetAddress(strTo));
            msg.saveChanges();

            Transport transport = session.getTransport("smtp");
            transport.connect(d_host, d_email, d_password);
            transport.sendMessage(msg, msg.getAllRecipients());
            transport.close();
            return true;
        }
        catch (Exception mex)
        {
            mex.printStackTrace();
            return false;
        }
    }

} 
```

我希望它可以帮助你。:)

# java - 何时使用“getResourceAsStream”方法？

> ID：10247161
> 
> 赞同：5
> 
> 时间：2012-04-20T13:25:30.957
> 
> 标签：java, properties

我对使用上述方法感到困惑，因为在加载一些属性文件时，人们正在遵循不同的方法......

```
Properties prop 
 = new Properties(new FileInputStream(new File("<path of the properties file>")); 
```

很少有人在使用..

```
Properties prop 
 = new Properties(getClass().getResourceAsStream("<path of the properties file>")); 
```

什么时候用哪一个？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T13:31:15.197

`getResourceAsStream`在类路径中搜索给定的文件/资源​​，它还可以`InputStreams`从 JAR 中提供资源。

因此，如果您的属性存在于物理文件系统中的某个文件夹中（例如用户文件夹，...）`FileInputStream`，并且如果文件嵌入在您的类路径中（例如作为 JAR 中的资源），请使用`getResourceAsStream`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:35:34.137

从**文件系统**读取文件时，使用使用相对或绝对路径的 FileInputStream(File())。

当您的程序作为 jar 分发并且您需要加载该 jar 中的文件时，您需要使用 getResourceAsStream()，它将在**类路径**中搜索文件，并且路径是相对于类路径的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:31:12.357

如果您 100% 确定文件位置不会跨环境更改，则可以使用第一种方法。这意味着有一项操作可以确保在所有环境中创建这些目录路径。另一方面，您可以在不打开 jar 的情况下灵活地更新属性文件。

当您从类路径中读取时，第二种方法非常便携。但它的缺点是每次属性更新都要重新捆绑 jar 文件。

因此，它基本上取决于您的用例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-15T13:58:59.707

当您从 Jar 中读取文件时。请使用类加载器的 getResource 或 getResoureAsstream。找到以下代码片段以从 Jar 中读取文件。上述方法无法从 jar 中读取文件。

```
 InputStream in = this.getClass().getClassLoader()
            .getResourceAsStream("com/net/resources/config.properties");

    InputStream is = Thread.currentThread().getContextClassLoader()
            .getResourceAsStream("com/net/resources/config.properties");

    URL url = this.getClass().getClassLoader()
            .getResource("com/net/resources/config.properties"); 
```

# c# - 会话 ID 未存储在 cookie 中

> ID：10247164
> 
> 赞同：1
> 
> 时间：2012-04-20T13:25:45.187
> 
> 标签：c#, asp.net-mvc-3, forms-authentication

在我的 ASP.NET MVC 3 应用程序中，当我在我的登录操作中选中我的记住我框时，它应该创建一个持久 cookie，这样当我关闭浏览器并重新打开它时，我仍然应该登录：

```
FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

当我使用 Fiddler 时，我可以看到会话 ID 是这样发送的：

```
Request sent 342 bytes of Cookie data:

ASP.NET_SessionId=<Session ID>; .ASPXAUTH=<Auth String> 
```

但是当我关闭浏览器并重新打开它时，我仍然登录但请求没有发送会话 ID：

```
Request sent 298 bytes of Cookie data:

.ASPXAUTH=<Auth String> 
```

然后`Response.Write(Session.SessionID)`我输入我的操作，每次我重新打开浏览器后刷新页面时都会更改。如果我不关闭浏览器，那么每次刷新的会话 ID 都保持不变。

我正在使用`StateServer`来保存会话状态，因为我认为这可能会解决问题，因为我也经历过`InProc`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:41:57.143

That's expected behavior. The concept of setting an authorization cookie, and the concept of sessions are not the same thing. A session in ASP.NET is meant to live as long as the user has their browser open, because a session is stored in a per-session cookie.

> "...the SessionID value is stored in a non-expiring session cookie in the browser. (http://msdn.microsoft.com/en-us/library/ms178581.aspx)

Having a *persistent* session is sort of a bad idea. Remember, the normal case for Sessions is that they are stored in memory. Would you really want to save the session of users in memory who haven't logged in in a week? Any sort of "session" data you are trying to save that long should not be stored in a session, but in a persistent data store (read: database).

**Updated based on your comment**

Might I suggest you do something like this:

```
public string GetMyCompany(){
  return Session["MyCompany"] = Session["MyCompany"] ?? GetMyCompanyFromDatabase();
} 
```

# iphone - iPod Touch 4G 指南针磁力计

> ID：10247167
> 
> 赞同：0
> 
> 时间：2012-04-20T13:25:48.950
> 
> 标签：iphone, ios, ipod-touch, magnetometer

我知道无法从 iPod Touch 4G 上的 CoreLocation 框架获取磁航向读数，但可以使用 CoreMotion 框架生成磁力计读数。

我也明白我需要使用`CMMotionManager`和设置`deviceMotionUpdateInterval`来实现这一点。然后我可以开始和停止更新`- (void)startMagnetometerUpdates`和`- (void)stopMagnetometerUpdates`相应的。

现在我有了原始磁力计数据 (x,y,z)，如何使用它来实现磁航向？

我在网上看到了一些非常复杂的解释，但希望有一个类似示例的代码。

**编辑：**我的错误，不可能在 iPod Touch 4G 上获得磁力计读数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:16:34.077

iPod touch 没有磁力计（请参阅[apple-devices-with-magnetometer](https://stackoverflow.com/questions/4227272/apple-devices-with-magnetometer)），因此无论您所说的磁力计数据都不能是磁力计数据。

同样来自[CMMotionManager 类参考](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html)（我的重点）

> CMMotionManager 对象是 iOS 提供的运动服务的网关。这些服务为应用程序提供加速度计数据、旋转速率数据、磁力计数据和其他设备运动数据，例如姿态。这些类型的数据源自设备的加速度计和**（在某些型号上）**其磁力计和陀螺仪。

因此，您将无法产生磁航向。

您看到的是来自 iPod touch 所拥有的其他传感器的运动数据。

# c# - POST 上的路由约束错误

> ID：10247168
> 
> 赞同：5
> 
> 时间：2012-04-20T13:25:57.850
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing, route-constraint

当您在操作中操作数据时，您通常会收到一个 ID 作为参数，但您需要对该 ID 进行一些错误处理。您必须为每个操作执行的错误处理之一是确保 ID 大于 0（不是负数）。因此，我不想在操作中处理这个问题，而是想添加一个路由约束，所以如果它的 ID 为负数，就不会路由到该操作。

这是我的代码：

```
//route definition
        routes.MapRoute(
            "default route" ,
            "{controller}/{action}/{id}" ,
            new { id = UrlParameter.Optional },
            new { id = @"^\d+$" }
        );

//action definition (note I also tried with only [HttpPost] and with nothing same result
        [AcceptVerbs(HttpVerbs.Post | HttpVerbs.Get )]
        public ActionResult Edit( int id ) 
```

当您对操作执行**GET**时，一切正常，但是当我发布**时**，当它应该转到 404 页面时，我收到以下错误

```
 HTTP verb POST used to access path '/object/edit/-2' is not allowed.

[HttpException (0x80004005): The HTTP verb POST used to access path '/object/edit/-2' is not allowed.]
   System.Web.DefaultHttpHandler.BeginProcessRequest(HttpContext context, AsyncCallback callback, Object state) +740
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +632
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +194 
```

有任何想法吗？也许是更好的解决方案？

编辑：刚刚注意到一些有趣的事情，我最初认为错误消息是 500，但它是“找不到方法”的 405

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T01:29:15.793

我强烈建议安装[此处](http://haacked.com/archive/2008/03/13/url-routing-debugger.aspx)找到的路由调试器。它将准确地向您展示每个路由是如何解析给定 URL 的，因此您可以看到当您点击该 URL 时实际发生了什么。如果您的路线被跳过，那么您知道您的约束正在发挥作用，您可以专注于任何捕捉它的东西。如果您的路线被击中，那么这是动作和/或它所采取的动词的问题。

*旁注：我完全没有让这个调试器的 2.0.0.7 版本正常工作（早在 8 月），但文章中直接链接的那个（或 NuGet 上的 1.0.0.1 版本）工作正常。我会假设 NuGet 中的当前版本正在运行，但如果没有，请尝试旧版本。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:29:10.523

你说：

> 不允许用于访问路径“/object/edit/-2”的 HTTP 动词 POST。

但是，异常状态：

> 不允许使用用于访问路径“/profile/editlink/-2”的 HTTP 动词 POST。

编辑：

我认为这可能与您的问题有关。

然而，并不是你说的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-28T00:47:46.187

尝试删除

```
[AcceptVerbs(HttpVerbs.Post | HttpVerbs.Get )] 
```

看看它是否有效（通常你会用 [HttpPost] 来拒绝 HttpGet 等）。

# api - 在我的网站中集成 Google 日历

> ID：10247172
> 
> 赞同：0
> 
> 时间：2012-04-20T13:26:09.503
> 
> 标签：api, calendar

**任务**- 我的网站上有一个活动表格，填写表格要在 Google 日历中创建一个活动。

我下载了 Google 日历 API 代码 - “google-api-php-client-0.5.0.tar.gz”，并获得了“Web 应用程序的客户端 ID”和“简单 API 访问”的信息。请注意“简单 API 访问状态为**Inactive**，不知道为什么状态为 Inactive 并且不知道如何将其设置为“Active”。请评论它。

我在本地机器（本地主机，不在任何域 - www.mydomain.com）中安装了 Google 日历，并在 /calendar-root/examples/plus/index.php 中配置了客户端 ID、客户端密码、重定向 URL 和开发人员密钥

当我执行示例 PHP 文件时，我收到一个错误 - “redirect_uri 的参数值无效：缺少方案：insert_your_oauth2_redirect_uri” 请注意我从 localhost 运行文件，即[http://localhost:2020/gcalendar/examples/plus/index .php](http://localhost:2020/gcalendar/examples/plus/index.php)

请帮助我如何在 PHP 中从 Web 表单添加新事件以及是否可以从本地计算机运行 Google API 代码。如果您有任何 PHP 集成的参考链接，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T17:41:16.230

您的问题和更多问题的答案可以在[http://AmazeWebs.com找到](http://AmazeWebs.com)

尝试使用服务帐户，以这个演示为例：[http ://amazewebs.com/demo](http://amazewebs.com/demo)

# java - 获取纬度/经度附近的邮政编码列表

> ID：10247182
> 
> 赞同：1
> 
> 时间：2012-04-20T13:26:30.337
> 
> 标签：java, android

我有一个 android 应用程序可以找到您当前的位置，但我需要找出哪些邮政编码在当前位置的 20 英里范围内。找到这些信息的最佳方式是什么？是否有公共 API 或 Web 服务？我可以提供纬度/经度或邮政编码作为输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:31:14.627

您将不得不使用反向地理编码器，例如：

[http://www.geonames.org/](http://www.geonames.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:34:06.510

我将从使用[Haversine](http://en.wikipedia.org/wiki/Haversine_formula)公式开始。使用从中获得的结果来查找相对于该半径的邮政编码。

```
import com.google.android.maps.GeoPoint;  

public class DistanceCalculator {  

   private double Radius;  

   // R = earth's radius (mean radius = 6,371km)  
   // Constructor  
   DistanceCalculator(double R) {  
      Radius = R;  
   }  

   public double CalculationByDistance(GeoPoint StartP, GeoPoint EndP) {  
      double lat1 = StartP.getLatitudeE6()/1E6;  
      double lat2 = EndP.getLatitudeE6()/1E6;  
      double lon1 = StartP.getLongitudeE6()/1E6;  
      double lon2 = EndP.getLongitudeE6()/1E6;  
      double dLat = Math.toRadians(lat2-lat1);  
      double dLon = Math.toRadians(lon2-lon1);  
      double a = Math.sin(dLat/2) * Math.sin(dLat/2) +  
         Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) *  
         Math.sin(dLon/2) * Math.sin(dLon/2);  
      double c = 2 * Math.asin(Math.sqrt(a));  
      return Radius * c;  
   }  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:34:27.057

据我所知，没有 apis，但是您可以使用邮政编码数据库[http://zips.sourceforge.net/](http://zips.sourceforge.net/)创建您自己的数据库以使用

# java - 当我想用jena加载模型时出现异常

> ID：10247188
> 
> 赞同：2
> 
> 时间：2012-04-20T13:26:52.443
> 
> 标签：java, rdf, jena

我正在使用耶拿图书馆。当我想打开这个地址时：

```
model = FileManager.get().loadModel("http://dbpedia.org/resource/Shlomo_Breznitz"); 
```

我得到了这个例外：

```
http://dbpedia.org/resource/Shlomo_Breznitz(line 54 column 8): Element or attribute do not match QName production: QName::=(NCName':')?NCName. 
```

这是jena的一个错误，因为这个异常就发生在这里（我尝试阅读的其他rdf都可以）还是这个rdf文件有问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T16:04:56.110

这意味着从 DBPedia 返回的数据格式不正确（不幸的是，这很常见） - 将 URL 放入[W3C RDF/XML 验证器](http://www.w3.org/RDF/Validator/)也会显示此错误

目前唯一的解决方法是下载文件并在使用 Jena 解析之前自己手动修复错误

# wpf - WPF Datagrid 仅编辑单个单元格值

> ID：10247190
> 
> 赞同：1
> 
> 时间：2012-04-20T13:26:54.230
> 
> 标签：wpf, xaml, wpfdatagrid

我有一个带有 2 列的 WPF 数据网格，表示参数名和值。

我的要求只是特定参数名的一个值（单元格内容）应该是可编辑的，并且整个 Datagrid 内容应该是只读的......

我有一个保存按钮来保存值。

几天来，我一直在研究一个合适的解决方案，在许多情况下这被认为是一个常见的要求，但我还没有发现......

请任何解决方案或想法将不胜感激..

这是 XAML 和 cs：当 Datagrid 加载时，我只希望 PM2 单元格值处于编辑模式，并且所有其他 datagrid 内容应该变灰或不可编辑。

* * *

```
<Grid>
    <DataGrid ItemsSource="{Binding}"  AutoGenerateColumns="False"
                     Margin="20,57,18,19" Name="dataGrid1" 
                      Height="250" SelectionUnit="Cell" >

     <DataGrid.Columns>
     <DataGridTextColumn Binding="{Binding ParameterName}" Width="100"  Header="Parameter     Name"   IsReadOnly="True"/>

         <DataGridTextColumn Binding="{Binding Value}" Width="100"  Header="Value" />

        </DataGrid.Columns>

    </DataGrid>
    </Grid> 
```

* * *

还有我的 CS 代码

```
public partial class dgSF : Window
{

ObservableCollection<ParameterSet> pmset;

    public dgSF()
    {
        InitializeComponent();
        pmset = new ObservableCollection<ParameterSet>();

        pmset.Add(new ParameterSet() { ParameterName = "PM1", Value = 10 });

        pmset.Add(new ParameterSet() { ParameterName = "PM2", Value = 50 });

        pmset.Add(new ParameterSet() { ParameterName = "PM3", Value = 70 });

        pmset.Add(new ParameterSet() { ParameterName = "PM4", Value = 80 });

        pmset.Add(new ParameterSet() { ParameterName = "PM5", Value = 100 });

        dataGrid1.ItemsSource = pmset;
    }
}

public class ParameterSet
{

    public string ParameterName { get; set; }

    public int Value { get; set; }

} 
```

非常感谢，

阿努

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:48:34.867

使用 a并为您希望能够编辑的列`DataGridTemplateColumn`定义`CellTemplate`和。`CellEditingTemplate`对于您不想编辑的列，只需定义`CellTemplate`

```
 <DataGrid ItemsSource="{Binding}"  AutoGenerateColumns="False"
                     Margin="20,57,18,19" Name="dataGrid1" 
                      Height="250" SelectionUnit="Cell">

            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding ParameterName}" Width="100"  Header="Parameter Name" IsReadOnly="True"/>

                <DataGridTemplateColumn Header="Editable Value">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Value}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                    <DataGridTemplateColumn.CellEditingTemplate>
                        <DataTemplate>
                            <TextBox Text="{Binding Value}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellEditingTemplate>
                </DataGridTemplateColumn>

            </DataGrid.Columns>

        </DataGrid> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:39:55.660

只需向您的 ParameterSet 添加一个属性，例如。公共布尔 IsEditable {get;set;}

然后您可以在 IsEditable 上使用带有数据触发器的单元格模板来设置启用或不启用。

编辑：

```
public class ParameterSet
{
    public ParameterSet()
    {
        IsEditable = false;
    }

    public string ParameterName { get; set; }
    public int Value { get; set; }
    public bool IsEditable { get; set; }

} 
```

xml

```
 <DataGrid ItemsSource="{Binding Pmset}"  AutoGenerateColumns="False" SelectionUnit="Cell" >
        <DataGrid.Columns>
            <DataGridTextColumn Binding="{Binding ParameterName}" Width="100"  Header="Parameter     Name"   IsReadOnly="True"/>
            <DataGridTextColumn Binding="{Binding Value}" Width="100"  Header="Value" >
                <DataGridTextColumn.CellStyle>
                    <Style TargetType="DataGridCell">
                        <Setter Property="IsEnabled" Value="False"></Setter>
                        <Style.Triggers>
                            <DataTrigger Binding="{Binding IsEditable}" Value="true">
                                <Setter Property="IsEnabled" Value="True"></Setter>
                            </DataTrigger>
                        </Style.Triggers>
                    </Style>
                </DataGridTextColumn.CellStyle>
            </DataGridTextColumn>
        </DataGrid.Columns>
    </DataGrid> 
```

在 xaml 中，您只需声明每个单元格都不可编辑的样式，除了 IsEditable=true 的样式。因此可以修改 IsEditable =true 的每个参数集。

# git-submodules - 如何告诉 Travis 跳过拉入所有 git 子模块？

> ID：10247200
> 
> 赞同：27
> 
> 时间：2012-04-20T13:27:51.953
> 
> 标签：git-submodules, travis-ci

在我的项目中，我有一些 git 子模块，但是这些不是实际的构建依赖项，并且确实需要一些额外的时间才能被拉入，从字面上看，构建时间会增加一倍或三倍。

有什么方法可以告诉 Travis 跳过这个无用的步骤吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-07-04T15:08:25.400

如果有人仍然在寻找这个，在`.travis.yml`：

```
git:
  submodules: false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:02:17.210

目前没有，请向[travis-build](https://github.com/travis-ci/travis-build/issues/new)提出问题。

# bison - Bison - 如何打印解析树

> ID：10247206
> 
> 赞同：3
> 
> 时间：2012-04-20T13:28:11.063
> 
> 标签：bison

嗨，我正在研究一只小野牛，以了解它是如何工作的。野牛应该解析一个句子。句子由表达式组成，表达式由单词组成。

以下是我的代码：

```
%{
#include <stdio.h>
#include <string.h>

void yyerror(const char *str)
{
    fprintf(stderr,"error: %s\n",str);
}

int yywrap()
{
    return 1;
}

main()
{
    yyparse();
}

%}

%token ASSIGN RANGE OR AND WHITESPACE QUOTE LPAREN RPAREN NOT GREATER LESS

%union 
{
        int number;
        char *string;
}

%token <number> VALUE
%token <string> WORD

%type <string> term
%type <string> expression
%%

query:   /* empty */
    | query expression 
    {
        printf("WOrd:%s",$2);
    }
    ;

expression:
     term
    |expression term
    |expression AND term
        {
            printf("AND");
        }
    ;

term:
    WORD
    {
        $$=$1;
    }
    ; 
```

因此，当用户输入一个单词时，它应该打印出该单词。用户应该能够输入：单词，单词单词，单词和单词

我不确定如何使用 $$ 传递一个单词并从“查询表达式”规则中打印出来。我该怎么做呢？

这是我的弹性：

```
%{
#include <stdio.h>
#include <string.h>
#include "y.tab.h"
%}
%%
[0-9]+                  yylval.number=atoi(yytext);return VALUE;
[a-zA-Z][a-zA-Z]*       yylval.string=strdup(yytext);return WORD;
":"                     return ASSIGN;
"and"|"&"|"&&"          return AND; 
".."                    return RANGE;
"-"                     return NOT;
"|"                     return OR;
"\""                    return QUOTE;
">"                     return GREATER;
"<"                     return LESS;
\n                      /* ignore end of line */;
\t                      /* ignore end of line */;

%% 
```

非常感谢。莎拉

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T14:34:24.413

通常，编写解析器的目的是让您最终得到一个表示输入的数据结构。然后，您以某种方式转换结构，或者，在您的情况下，只需将其打印出来。

在每个表达式产生中，您都希望在该结构中构建一个节点，以表示您到目前为止所识别的内容。

我有点生疏，但它会是这样的：

```
query:   /* empty */
     | query expression { printNode($2); /* printf()s are in here */ }
;

expression: term { $$ = makeTermNode($1); }
          | expression OR term { $$ = makeOrNode($1, $3); }
          | expression AND term  { $$ = makeAndNode($1, $3); }
; 
```

保存节点的数据结构：

```
struct Node {
    int nodeType;          /* WORD or operator token like AND, OR */
    node* leftOperand;
    node* rightOperand;    /* will be null if the node is a term */
}

%union 
{
    int number;
    char *string;
    Node *node;
} 
```

**更新：**

自从我用 C 编码以来已经有一段时间了，所以我将不得不求助于伪代码。一旦我们完成它，这里就没有代码来回收内存。对任何其他错误表示歉意。

```
struct Node *makeTermNode(int word) {
    Node *node = malloc(sizeof struct Node);
    node->nodeType = word;
    node->rightOperand = null;
    node->leftOperand = null;
    return node;
} 
```

请注意，您的 WORD 标记仅表示扫描了某种类型的字母字符串；特定的字母序列被丢弃。（如果您想知道序列，请让您的词法分析器返回 yytext 的副本而不是 WORD 标记。）

```
struct Node *makeAndNode(struct Node* leftOperand, struct Node *rightOperand) {
    Node *node = malloc(sizeof struct Node);
    node->nodeType = AND;
    node->leftOperand = leftOperand;
    node->rightOperand = rightOperand;
    return node;
} 
```

makeOrNode() 也是如此。或者，您可以只编写 makeNodeWithOperator(int operator, struct Node* leftOperand, struct Node *rightOperand) 来处理“and”和“or”情况。

我将 printAllNodes() 更改为 printNode()。它从我们构建的表达式树结构的根开始，递归地首先访问每个子表达式的左侧，然后是右侧。它是这样的：

```
void printNode (struct Node* node) {
    switch (node->nodeType) {
    case WORD:
        printf("%i", node->nodeType);
        return;
    case AND:
    case OR:
        printf("(");
        printNode(node->leftOperand);
        printf("%i", node->nodeType);
        printfNode(node->rightOperand);
        printf(")");
        return;
    }
} 
```

# javascript - 为什么 writeln(); 不生产新线？

> ID：10247207
> 
> 赞同：3
> 
> 时间：2012-04-20T13:28:16.407
> 
> 标签：javascript, logic

```
 <script type='text/javascript'> 
  //<![CDATA[
   for(var j = 0; j < 6;) {
    document.writeln(++j);
   }
  //]]>
  </script> 
```

在上面的代码中，如果引用`The writeln() method is identical to the write() method, with the addition of writing a newline character after each statement.`

但就我而言，输出是`123456`

更新：

我会找到接受的最佳答案，但所有答案都是正确的，我相信下次有人会有同样的问题，所以我想我应该更新顶部的答案并删除作业标签，这样每个人都会受益.

不产生新行的原因是因为它实际上是在产生 '\n'

如果我没记错的话，浏览器的 '\n' 不会影响如何显示到屏幕上，但是如果您查看页面的源代码，您会看到我的输出会显示类似这样的内容

```
1
2
3
4
5
6 
```

但是如果我们想让它显示到页面上，我们必须添加`<br\>`标签，这样它就会产生 a `break-line`，所以我们会得到我们想要的相同的输出。

```
 <script type='text/javascript'> 
  //<![CDATA[
   for(var j = 0; j < 6;) {
    document.writeln(++j);
    document.writeln("<br>");
   }
  //]]>
  </script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:30:17.937

想想下面的HTML如何

```
<p>
1
2
3
4
</p> 
```

将显示在浏览器中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T13:30:38.410

在大多数情况下，浏览器不会显示`'\n'`为换行符。

这可以通过[CSS](https://developer.mozilla.org/en/CSS/white-space)或[`<pre>`标签](https://developer.mozilla.org/en/HTML/Element/pre)来改变；否则，使用`<br/>`（不是很好）或块级元素（`<div>`,`<p>`等）在文本中引入中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T13:31:15.407

`\n`仅在代码源或标签中可见`<pre></pre>`。如果要在 HTML 文档中显示输出，则必须添加`<br />`以获取新行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T13:32:39.480

不，它工作正常。这里的问题是您在不同的行上输出它，但它不会在浏览器中以这种方式显示。

要查看您的实际结果，请使用“查看源代码”或在浏览器的开发人员工具中查看 HTML。

如果您希望它显示在不同的行上，请输入一些 HTML，如下所示。

```
 <script type='text/javascript'> 
  //<![CDATA[
   for(var j = 0; j < 6;) {
    document.write(++j);
    document.writeln("<br>");
   }
  //]]>
  </script> 
```

或者使用`PRE`（又名预格式化）标签（[请参阅此处的 PRE 上的 W3 规范信息](http://www.w3.org/TR/html401/struct/text.html#h-9.3.4)），这将保留底层源代码中的换行符。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T13:32:33.703

它正在写入新行，只有浏览器不会向您显示这些行，除非您明确指示它这样做。查看在输出周围添加预格式化标签的效果：

```
var i = 0;
document.write('<pre>');
while ( i < 5 ) document.writeln(++i); 
document.write('</pre>'); 
```

验证此类输出的最佳方法是查看页面的来源，而不是页面本身。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-20T13:32:37.780

你需要使用`<br/>`它。[在此处](http://www.w3schools.com/js/js_break.asp)浏览 W3Schools 教程。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-20T13:34:11.280

如果您使用 Firebug 窥探源代码并将其复制到类似 Noteapd++ 的文件中，您会发现它确实会输出换行符。它们不会显示在浏览器中，因为 HTML 中的换行符未定义为换行符。

# javascript - d3 点击坐标是相对于页面而不是 svg - 如何翻译它们（Chrome 错误）

> ID：10247209
> 
> 赞同：30
> 
> 时间：2012-04-20T13:28:21.510
> 
> 标签：javascript, google-chrome, svg, click, d3.js

当一个事件正在播放时，d3.event.x 给出鼠标点击的 x 坐标位置，但相对于整个 HTML 文档。我尝试使用 jQuery 的 $('svg').position() 来获取 svg 的实际位置，但这会返回明显错误的值。

有没有一些简单的方法可以找到 svg 相对于我正在忽略的页面的位置？顺便说一句，我正在使用 Chrome，以防 jQuery 问题是一个晦涩的浏览器错误。

编辑：我在 Firefox 中检查了这个并且 $('svg').position() 返回了正确的坐标。？！？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-04-20T16:01:50.530

不要使用浏览器的原生事件[d3.event ，而是使用](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_event)[d3.mouse](https://github.com/mbostock/d3/wiki/Selections#wiki-d3_mouse)来获取相对于某个容器的坐标。例如：

```
var svg = d3.select("body").append("svg")
    .attr("width", 960)
    .attr("height", 500);

var rect = svg.append("rect")
    .attr("width", "100%")
    .attr("height", "100%")
    .on("mousemove", mousemove);

function mousemove(d, i) {
  console.log(d3.mouse(this));
} 
```

# javascript - Apex getter 返回错误值

> ID：10247211
> 
> 赞同：2
> 
> 时间：2012-04-20T13:28:33.287
> 
> 标签：javascript, salesforce, apex-code

我的 salesforce 页面中有 javascript 函数来验证其中一个联系人是否有未结案件。此函数调用顶点 getter 来获取值。我面临的问题是顶点吸气剂总是返回错误的布尔值。我尝试调试它，一切似乎都正常，但由于某种原因返回的布尔值是错误的。

顶点功能：

```
 public Boolean openCase{
   get{

        if (Contacts.size() > 0){
            for(cContact wContact: dicContacts.values()){
                 if(wContact.selected){                     
                     if(wContact.con.account.Number_of_open_Financial_Review_Cases__c > 1){

                        return true;
                    } 
                 }           
            }                     
    return false;
   }
   set{}

} 
```

js函数：

```
 function validateOpenCases(sendEmail){

    doIt = true;
    oc = {!openCase};   // <<== problem here
    alert(oc);
      if (oc)
      {
       doIt=confirm('blabla?');
      }
      if(doIt){
            // do stuff
      }
      else{
        // do nothing
      }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:58:14.560

您不应该直接在 JavaScript 中绑定 Apex 对象/变量（就像您拥有的那样`{!openCase};`）。我以前遇到过很多问题。而是使用[JavaScript Remoting](http://www.salesforce.com/us/developer/docs/pages/index_CSH.htm#pages_js_remoting_example.htm)或[Ajax Toolkit](http://www.salesforce.com/us/developer/docs/ajax/index_CSH.htm#sforce_api_ajax_calls.htm)。

* * *

## **更新**

另一种选择是使用隐藏的 Visualforce 输入来存储绑定的 Visualforce 值。然后你可以在你的 JavaScript 中得到这个值。

这是一个例子：

```
<apex:page controller="myController">
    <script>
        function getInputEndingWith(endsWith)
        {
            // put together a new Regular Expression to match the 
            // end of the ID because Salesforce prepends parent IDs to
            // all elements with IDs
            var r = new RegExp("(.*)"+endsWith+"$"); 

            // get all of the input elements
            var inputs = document.getElementsByTagName('input');

            // initialize a target
            var target;

            // for all of the inputs
            for (var i = 0; i < inputs.length; ++i)
            {
                // if the ID of the input matches the
                // Regular Expression (ends with)
                if (r.test(inputs[i].id))
                {
                    // set the target
                    target = inputs[i];
                    // break out of the loop because target 
                    // was found
                    break; 
                }
            }

            // return the target element
            return target;
        }

        function validateOpenCases(sendEmail)
        {
            doIt = true;
            oc = getInputEndingWith("OpenCase").value;

            alert(oc);

            if (oc === "true") {
                doIt = confirm('Are you sure?'); 
            }
            if (doIt) {
                // do stuff
            }
            else {
                // do nothing
            }
        }
    </script>

    <apex:form>
        <apex:outputpanel>
            <apex:inputhidden id="OpenCase" value="{!openCase}" />
        </apex:outputpanel>
        <input type="button" class="btn" onclick="validateOpenCases('Send');" value="Validate" />
    </apex:form>
</apex:page> 
```

# c++ - 如何连接字符串和 const char？

> ID：10247212
> 
> 赞同：21
> 
> 时间：2012-04-20T13:28:37.913
> 
> 标签：c++, string

我需要把“你好世界”放在c中。我怎样才能做到这一点 ？

```
string a = "hello ";
const char *b = "world";

const char *C; 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-20T13:29:48.333

```
string a = "hello ";
const char *b = "world";
a += b;
const char *C = a.c_str(); 
```

或不修改`a`：

```
string a = "hello ";
const char *b = "world";
string c = a + b;
const char *C = c.c_str(); 
```

*很少编辑，以匹配111111*给出的信息量。

当您已经拥有`string`s（或`const char *`s，但我建议将后者转换为前者）时，您可以将它们“相加”以形成更长的字符串。但是，如果你想附加的不仅仅是你已经拥有的字符串，你可以使用`stringstream`and it's `operator<<`，它与 's 完全一样`cout`，但不会将文本打印到标准输出（即控制台），而是打印到它的内部缓冲区您可以使用它的`.str()`方法从中获取`std::string`。

`std::string::c_str()`函数返回指向其中包含的字符串的`const char`缓冲区（即`const char *`）的指针，该字符串以空值结尾。然后，您可以将其用作任何其他`const char *`变量。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-20T13:32:03.033

如果您只需要连接，则使用`operator +`and`operator +=`函数

```
 #include <string>
 ///...
 std::string str="foo";
 std::string str2=str+" bar";
 str+="bar"; 
```

但是，如果您有很多连接要做，那么您可以使用字符串流

```
#include <sstream>
//...
std::string str1="hello";
std::stringstream ss;
ss << str1 << "foo" << ' ' << "bar" << 1234;
std::string str=ss.str(); 
```

编辑：然后您可以将字符串传递给`const char *`带有 with的 C 函数`c_str()`。

```
my_c_func(str1.c_str()); 
```

如果 C func 采用非 const char * 或需要所有权，您可以执行以下操作

```
char *cp=std::malloc(str1.size()+1);
std::copy(str1.begin(), str2.end(), cp);
cp[str1.size()]='\0'; 
```

# c# - C# Windows Forms 安装后不打开默认浏览器

> ID：10247214
> 
> 赞同：6
> 
> 时间：2012-04-20T13:28:41.490
> 
> 标签：c#, windows, winforms

我使用 MSI 安装程序安装了一个 Windows 窗体应用程序（C#、NET 3.5）。在这个应用程序中，我有一个按钮，按下该按钮会打开具有特定 URL 的浏览器。我用

```
Process.Start(url); 
```

打开浏览器。这在调试时工作正常，但在安装后它的结果并不理想。例如。

*   如果我在选择 Just Me 选项的情况下安装它，我会使用当前设置打开我的默认浏览器 (FF)。
*   如果我使用“所有人”选项安装它，当我按下按钮时，它会打开一个没有我最近设置的 IE 版本（代理、显示的工具栏等）

据我所知，此问题是由安装时与应用程序关联的用户引起的。

考虑到用户可能需要代理和个人浏览器设置，而 Just Me, Everyone 的选择应由用户决定。最好的做法是什么？

我尝试使用当前登录的用户调用 Process.Start(url)

```
ProcessStartInfo.UserName = Environment.UserName 
```

但它也需要密码，并且要求提供凭据不是一种选择。

您还有其他建议吗，我是否错误地使用了 Process.Start()，在安装过程中是否需要进行设置，有什么我遗漏的吗？

**更新：** 使用 Process Explorer 作为 data_smith 建议我注意到以下内容：

*   如果我为每个人安装应用程序，它将在 NT AUTHORITY\SYSTEM 用户下启动，因此是未配置的浏览器。
*   如果我在选择 Just Me 的情况下安装应用程序，它将在当前用户下启动

有没有办法在不要求凭据的情况下使应用程序在当前用户下启动（在 Windows 启动时），即使它是为所有人安装的？

**更新：**根据 data_smith 使用 ShellExecute 的建议以及[此处](https://stackoverflow.com/questions/1543753/start-exe-after-msi-install-but-using-current-user-privileges)和[此处](https://stackoverflow.com/questions/4147821/start-a-windows-service-and-launch-cmd)的建议，我能够解决问题并获得所需的行为。

主要问题是，当安装程序完成时，应用程序是使用 Process.Start(); 启动的。这以 NT AUTHORITY\SYSTEM 用户（用户安装程序在其下运行）启动应用程序，因此该应用程序打开的所有浏览器也将在 SYSTEM 用户下。通过使用 data_smith 的建议和上面链接的建议，我能够在当前用户下启动该过程。

计算机重新启动后，应用程序在正确的用户下启动，因为这是通过注册表项配置的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:19:05.143

我建议访问注册表以确定默认浏览器。

```
//Create a registry key to read the default browser variable
RegistryKey reader = Registry.ClassesRoot.OpenSubKey(@"http\shell\open\command");
//Determine the default browser
string DefaultBrowser = (string)reader.GetValue(""); 
```

我尝试使用此代码，发现我的注册表项以“--\”%1\“”结尾。
我不知道它为什么在那里，但我建议使用以下循环来确保密钥在正确的位置结束。

```
//If the path starts with a ", it will end with a "
if (DefaultBrowser[0] == '"')
{
    for (int count = 1; count < DefaultBrowser.Length; count++)
    {
        if (DefaultBrowser[count] == '"')
        {
           DefaultBrowser = DefaultBrowser.Remove(count + 1);
           count = DefaultBrowser.Length + 22;
        }
    }
}
//Otherwise, the path will end with a ' '
else
{
    for (int count = 0; count < DefaultBrowser.Length; count++)
    {
        if (DefaultBrowser[count] == ' ')
        {
           DefaultBrowser = DefaultBrowser.Remove(count + 1);
           count = DefaultBrowser.Length + 22;
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T15:13:58.947

```
using System.Diagnostics;
using System.Windows.Forms;

namespace WindowsFormsApplication13
{
    public partial class Form1 : Form
    {
        public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, System.EventArgs e)
    {
        // Add a link to the LinkLabel.
        LinkLabel.Link link = new LinkLabel.Link();
        link.LinkData = "http://www.dotnetperls.com/";
        linkLabel1.Links.Add(link);
    }

    private void linkLabel1_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        // Send the URL to the operating system.
        Process.Start(e.Link.LinkData as string);
    }
    }
} 
```

# php - 在 SQL 内容中包含 PHP FORM

> ID：10247215
> 
> 赞同：-1
> 
> 时间：2012-04-20T13:28:42.117
> 
> 标签：php, sql, forms, include

我使用 SQL 来存储我网站的页面，管理员可以编辑某些页面的页面内容，例如查询，联系我需要在页面内容中使用 PHP 表单

我想要的是 page.php?name=contact 从管理员可以编辑的页面名称“联系人”的 sql 中获取数据

例如数据是：

```
"Address of Company"
"Use the form below to contact us" 
```

＆在该数据下方，我想包含来自contact.php文件的内容，其中包括表单和所有验证和邮件发送功能。

我可以使用一些可以包含在 sql 数据中的短代码或函数，例如 wordpress [contact-form]，因此在访问 page.php?name=contact 时，可以在 sql 数据下方包含来自 contact.php 文件的内容。

```
"Address of Company"
"Use the form below to contact us"
[contact-form]<--- Form from contact.php or enquiry.php included below content 
```

使用此类文件的方法包括

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-04-20T13:40:23.927

您必须执行以下步骤：

1.  用于`$name = $_GET['name'];`检测当前页面。
2.  使用 . 包含您的 PHP 文件`include($name.'.php');`。
3.  使用 MySQL 函数，例如`mysql_query()`加载与当前页面相关的内容并将其显示在页面中。（这应该在contact.php 源代码中）。

Wordpress 短代码并非随处可见......它们仅适用于 Wordpress 本身。

# c# - 带有 taglib 的 C# mp3 ID 标签 - 专辑封面

> ID：10247216
> 
> 赞同：9
> 
> 时间：2012-04-20T13:28:43.033
> 
> 标签：c#, taglib, id3-tag, albumart

我正在制作自己的 mp3 标记器，到目前为止一切都很好。虽然我坚持阅读专辑封面标签。

我想知道如何在 C#.NET 图片框中显示封面，但是关于该特定标签的所有内容都让我感到困惑。

我知道我可以从这样的文件中获取标签

```
txtAlbum.Text = currentFile.Tag.Album; 
```

但我需要做的就是从文件中抓取图片并将其放入图片框中。然后我想知道如何将图片（jpg，png）写入文件并覆盖现有的。

任何帮助将不胜感激，并感谢您宝贵的时间。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T14:01:33.563

尝试这个

```
TagLib.File tagFile = TagLib.File.Create(path);
IPicture newArt = new Picture(tmpImg);
tagFile.Tag.Pictures = new IPicture[1] {newArt};
tagFile.Save(); 
```

**编辑**

```
var file = TagLib.File.Create(filename);
        if (file.Tag.Pictures.Length >= 1)
        {
            var bin = (byte[])(file.Tag.Pictures[0].Data.Data);
            PreviewPictureBox.Image = Image.FromStream(new MemoryStream(bin)).GetThumbnailImage(100, 100, null, IntPtr.Zero);
        } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-09-02T15:14:47.607

这是我针对该问题的快速而简短的解决方案：

```
var file = TagLib.File.Create(filename);
var bin = (byte[])(file.Tag.Pictures[0].Data.Data);
imageBox.Image = Image.FromStream(new MemoryStream(bin)); 
```

# java - Java - 外观问题

> ID：10247218
> 
> 赞同：0
> 
> 时间：2012-04-20T13:28:50.497
> 
> 标签：java, swing, look-and-feel

我对 java 的外观和感觉有疑问。

我在我的主要方法中使用以下代码将它设置为 Nimbus 皮肤：

```
public class Main
{
    public static void main(String[] args)
    {
        try
        {
            boolean found = false;
            for (LookAndFeelInfo info : UIManager.getInstalledLookAndFeels())
            {               
                if ("Nimbus".equals(info.getName()))
                {
                    UIManager.setLookAndFeel(info.getClassName());
                    found = true;
                    break;
                }
            }

            if (!found) UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
            UIManager.put("AuditoryCues.playList", UIManager.get("AuditoryCues.allAuditoryCues"));
        }
        catch (Exception e) {}

        Manager mngr = new Manager();
        mngr.setSize(1000, 600);
        Utils.centerWindow(mngr);
        mngr.setVisible(true);
    }
} 
```

它给了我这种窗户：

![在此处输入图像描述](../Images/a55870ca1138f67236fc5649db787bcf.png)

如您所见，JInternalFrames 已正确蒙皮，但主窗口未正确蒙皮！

我怎样才能将主题也应用到这个窗口？

谢谢。

* * *

`Manager`很简单`JFrame`，代码如下：

```
public class Manager extends JFrame
{
    public Manager()
    {
        initComponents();
    }

    private void initComponents()
    {
        setDefaultCloseOperation(3);
        setTitle("My window");
        setIconImage(ImageLoader.getIcon().getImage());

        // My components go here

        pack();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:44:01.357

*   您已阅读有关[Nimbus 外观和感觉的教程](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/nimbus.html)

*   也许您的问题是关于[在启动后更改外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html#dynamic)

*   [用SSCCE](http://sscce.org/)编辑你的问题，用`main window ???`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:49:20.617

只需在创建框架/对话框之前尝试打开这两个选项：

```
JDialog.setDefaultLookAndFeelDecorated ( true );
JFrame.setDefaultLookAndFeelDecorated ( true ); 
```

这将允许 JFrame/JDialog 从 LaF 而不是系统获得装饰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T16:27:28.670

[好吧，如果没有一个好的SSCCE](http://www.sscce.org) ，我不知道该怎么做，但是如果你想要一个总是对我有用的方法的例子，你可以看看github上的[Java-Helper 。](https://github.com/kentcdodds/Java-Helper/)具体来说，查看[这一行](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/helpers/SwingHelper.java#L291)的 SwingHelper 。我添加下面的代码是为了符合堆栈溢出的一些基本规则；）祝你好运。

```
 /**
   * Sets the look and feel to the given type (like "Nimbus") Learn more here:
   * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
   *
   * @param lookAndFeel to set (like "Nimbus")
   */
  public static void setLookAndFeel(String lookAndFeel) {
    try {
      for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
        if ((info.getName()).equals(lookAndFeel)) {
          javax.swing.UIManager.setLookAndFeel(info.getClassName());
          break;
        }
      }
    } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | javax.swing.UnsupportedLookAndFeelException ex) {
      java.util.logging.Logger.getLogger(SwingHelper.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
  } 
```

# node.js - res.send() express.js 自动重定向

> ID：10247236
> 
> 赞同：1
> 
> 时间：2012-04-20T13:29:42.303
> 
> 标签：node.js, rest, express

我正在使用 nodejs 和框架 express.js 来实现我的网站。

我在 url (/report/ *reportname* ) 上提交 POST 请求， *reportname*是一个变量。

所以我这样做：

```
app.post('/report/:id', function(req, res){ 
   var id=req.param('id');
   var bodyreportHtml;
   go.prototype.runReport(id,res);
  } 
```

问题是在`go.prototype.runReport(id,res)`
我做一个`res.send(bodyofthereport)`. 因此，当我单击表单上的提交时，它会将我重定向`/report/nameofthereport`到 pdf 报告的位置。一切正常，但我想将此网址`/report/nameofthereport`（pdf 报告）放在 iframe 中。因此，当我提交发布请求时，我希望它只刷新 iframe 并在其中打印报告（iframe 与表单位于同一页面上）。但这`res.send(bodyofthereport)`是必不可少的：它打印我的报告`/report/nameofthereport` 而我不能做，`res.redirect('/')`因为身体是`finished`

我能怎么做 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:36:33.947

如果你想要`POST`一个 iframe，你可以将 的`target`属性设置`form`为 iframe 的名称：

```
<form action='/report/ID' method='POST' target='FOO'></form>

<iframe name='FOO'></iframe> 
```

没有具体的 node.js 或 Express ！

# c# - 如何为 ASP.NET MVC3 创建全局自定义错误页面？

> ID：10247238
> 
> 赞同：2
> 
> 时间：2012-04-20T13:29:43.880
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我是 ASP.NET MVC3 的新手。如何为 MVC3 创建全局自定义错误页面？一般的想法是，当抛出异常时，它会向用户显示一条通用消息，并将异常记录到数据库中，供开发人员稍后进行调查。

在此先感谢您的帮助。

这是我最终在 global.asax.cs 中所做的事情：

```
 protected void Application_Error()
    {
        var exception = Server.GetLastError();

        Log.Error("Exception", exception);

        var httpException = exception as HttpException;
        Response.Clear();
        Server.ClearError();
        var routeData = new RouteData();
        routeData.Values["controller"] = "Error";
        routeData.Values["action"] = "General";
        routeData.Values["exception"] = exception;
        Response.StatusCode = 500;
        if (httpException != null)
        {
            Response.StatusCode = httpException.GetHttpCode();
            switch (Response.StatusCode)
            {
                case 403:
                    routeData.Values["action"] = "Http403";
                    break;
                case 404:
                    routeData.Values["action"] = "Http404";
                    break;
            }
        }

        IController errorsController = new ErrorController();
        var rc = new RequestContext(new HttpContextWrapper(Context), routeData);
        errorsController.Execute(rc);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:32:34.547

在您的`Global.asax`文件中实现该`Application_Error`方法：

```
 protected void Application_Error() { 
        HttpContext ctx = HttpContext.Current; 
        var error = ctx.Server.GetLastError();
        ctx.Response.Clear(); 
        ctx.Response.End(); 
    } 
```

跟进 Maess 的评论：

阅读本文：[asp.net mvc 3 中的错误处理](https://stackoverflow.com/questions/5995776/error-handling-in-asp-net-mvc-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:38:58.063

我在我的项目中所做的是我创建了一个`BaseController`并覆盖了`OnException`如下事件，

```
protected override void OnException(ExceptionContext filterContext)
{
    // do some logging using log4net or signal to ELMAH
    filterContext.ExceptionHandled = true;
    var exModel = new HandleErrorInfo(filterContext.Exception,  
                  filterContext.RouteData.Values["controller"].ToString(), 
                  filterContext.RouteData.Values["action"].ToString());
    View("Error", exModel).ExecuteResult(ControllerContext);
} 
```

我还删除了`HandleError`注册在`Global.asax.cs`.

`Error`注意：您应该在共享文件夹中有一个带有名称的视图。

更新：要从`Error`视图中提取错误信息，您必须将`Error`视图绑定到模型`HandleErrorInfo`。

```
@model System.Web.Mvc.HandleErrorInfo 
```

Then you can easily access the exception anywhere in the view as

```
@Model.Exception 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:32:37.417

创建一个名为 Error 的视图并将其添加到您的 Views\Shared 文件夹中。然后在您的 catch 块中，在您记录错误后，将操作重定向到错误视图。如果您想显示复杂的消息，请创建一个错误模型并将其传递给视图，或者将信息放入 ViewBag。

有关未处理异常和 HTTP 错误的信息，请参阅 Ropstah 的帖子。

# jquery-isotope - 带滑块的同位素 jQuery

> ID：10247239
> 
> 赞同：-4
> 
> 时间：2012-04-20T13:29:45.767
> 
> 标签：jquery-isotope

我是 Isotope jQuery 的新手，我想将 Isotope 与 jQuery 滑块集成。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T16:25:32.237

它适用于类名，因此当您设置滑块的范围时，可以使用 Jquery 添加类名。

像这样：滑块的最小值是 3，最大值是 8：

*   创建一个隐藏过滤器（将用作项目选择器）
*   对于值从 3 到 8 的每个元素，添加一个类似“showIt”的类，并为其他元素删除这个类。
*   在隐藏过滤器上添加数据过滤器“showIt”属性，并在其上触发。（'click'）。

这仍然是纯粹的理论，也许我完全错了。我会自己尝试（我正在一个网站上工作，有几个滑块同时工作，交叉手指！）并发布让你知道它是否有效......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T17:44:17.713

我认为通过这个问题获得清晰将有助于回答它。

我认为 Shahzad 想要页面上的 jquery 滑块元素。此滑块元素将具有值。从 0 到 x。

通过使用 Isotope 的过滤器元素，他可能想在用户将滑块移动到不同的值时使用 Isotope 效果来过滤网页上的某些项目。

会是这样吗？如果是，那将如何完成，因为我也对这个答案感兴趣。:)

# objective-c - 为什么 ARC 释放我的对象？

> ID：10247242
> 
> 赞同：0
> 
> 时间：2012-04-20T13:29:59.700
> 
> 标签：objective-c, ios, automatic-ref-counting

我有一个要存储到可变数组中的视图控制器。

```
- (void)pushViewController:(KAViewController *)viewController
{
    [self.viewControllers addObject:viewController];

    if (self.count == 0)
        [self.view addSubview:viewController.view];
    else 
        [self transitionFromView:self.currentViewController.view toView:viewController.view];
} 
```

数组（viewControllers）定义为：

```
@property (nonatomic, retain) NSMutableArray *viewControllers; 
```

该视图有一个按钮，当我单击它时，我收到以下消息：

> [KAGameInfoViewController performSelector:withObject:withObject:]：消息发送到已释放实例 0x6e6e900

我已经确认 0x6e6e900 是我的视图控制器的地址。

有什么想法吗？

**编辑**

关闭 ARC 解决问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:34:40.217

可能`self.viewControllers`是 nil 因为你忘了做：

```
self.viewControllers = [[NSMutableArray alloc] init]; 
```

任何地方。

# ios - 在 Xcode 项目中使用 GIT 的问题

> ID：10247243
> 
> 赞同：2
> 
> 时间：2012-04-20T13:30:05.300
> 
> 标签：ios, xcode, three20

我知道 git 并用它来管理我在其他项目上的许多 Repos。但是，当涉及到 xcode 项目时，我遇到了问题。

我在机器“A”上启动了一个项目——当我推到一个仓库并拉到机器“B”时，我总是收到编译错误。通常错误与未找到文件有关。字面意思是“没有这样的文件或目录”，后跟路径。

我在 mac 的 A 和 B 上使用相同版本的 Xcode。我也使用threetwenty 框架。

当我将项目压缩并通过电子邮件发送时 - 会出现相同的结果。

很多时候，xcode 无法找到并且构建失败的这些文件是媒体文件，例如图像或视频。有时我也会看到three20 框架。

我的问题是 - 我应该如何在 xcode 中设置一个项目以与 git 和/或代码共享一起玩得很好。如果您需要更多信息，请告诉我，我知道以上内容有些含糊。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:28:01.353

我总是做的第一件事是在添加项目中的任何其他文件之前设置 .gitignore 文件。为可能具有相同用户帐户名称的两台不同机器加载项目设置时可能会出现问题。您必须确保某些设置未添加到 repo 中，而其他设置则添加到 repo 中。

我通过添加以下内容来设置我的 .gitignore：

```
.DS_Store
*/.DS_Store
*.swp
*~.nib

build/

*.pbxuser
*.perspective
*.perspectivev3

*.mode1v3
*.mode2v3

Documentation/Generated
doxygenWarnings.txt
*.xcodeproj/xcuserdata/*.xcuserdatad
*.xcodeproj/project.xcworkspace/xcuserdata/*.xcuserdatad
*/*.xcodeproj/xcuserdata/*.xcuserdatad
*/*.xcodeproj/project.xcworkspace/xcuserdata/*.xcuserdatad 
```

如果您从头开始创建存储库或运行`git rm --cached <filethatshouldbeignore>`到应忽略的每个文件然后提交，请查看问题是否仍然存在。

文件中会出现问题`.pbxproj`，因此请确保也纠正了所有冲突。

对于找不到的文件，请记住将库等导入项目文件夹并从那里引用它们。苹果自己的 iOS 库应该没问题，但其他的就不行了。例如，在您的项目文件夹中，从那里复制您的图像并仅在项目文件夹中引用它们。

# jquery - 根据活动类获取数据属性的值

> ID：10247247
> 
> 赞同：1
> 
> 时间：2012-04-20T13:30:19.317
> 
> 标签：jquery, custom-data-attribute

我想获取`data-itemtype`基于数据属性的值
`ul > li class = "activeTab"`

这是我的代码。

```
<ul class="tabs">
    <li data-itemtype="1" class="activeTab"><a href="#tab1">Published</a></li>
    <li data-itemtype="0" class=""><a href="#tab2">Unpublished</a></li>
</ul> 
```

如果`class="activeTab"`在第一个`<li>`元素中，则在这种情况下获取第一个 li 元素的数据属性，即 1，因此同样适用于第二个或任意数量的 li 元素。

我试过这个

```
var itemType = $('ul.tabs').find('li.activeTab').attr('data-itemtype'); 
```

它不起作用。它显示未定义的值。

**更新：**

我正在使用标签。我想知道哪个选项卡当前处于活动状态，并且我需要 javascript 变量中的该值。

这是我的 HTML 代码。

```
<div class="widget">
    <ul class="tabs">
        <li data-itemtype="1"><a href="#tab1">Published</a></li>
        <li data-itemtype="0"><a href="#tab2">Unpublished</a></li>
    </ul>
    <div class="tab_container">
        <div id="tab1" class="tab_content">
            <div class="widget" style="margin-top:0px;">
                <div class="title"><img src="/images/icons/dark/cart3.png" alt="" class="titleIcon" /><h6>Published Items</h6></div>                          
                <p>Content</p>
            </div>
        </div>
        <div id="tab2" class="tab_content"> 
            <div class="widget" style="margin-top:0px;">
                <div class="title"><img src="/images/icons/dark/cart3.png" alt="" class="titleIcon" /><h6>Unpublished Items</h6></div>
                <p>Content</p>
            </div>
        </div>
    </div>  
    <div class="clear"></div>        
</div> 
```

正在使用的 jQuery 就是这个。

```
$.fn.contentTabs = function(){ 

        $(this).find(".tab_content").hide(); //Hide all content
        $(this).find("ul.tabs li:first").addClass("activeTab").show(); //Activate first tab
        $(this).find(".tab_content:first").show(); //Show first tab content

        $("ul.tabs li").click(function() {
            $(this).parent().parent().find("ul.tabs li").removeClass("activeTab"); //Remove any "active" class
            $(this).addClass("activeTab"); //Add "active" class to selected tab
            $(this).parent().parent().find(".tab_content").hide(); //Hide all tab content
            var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
            $(activeTab).show(); //Fade in the active content
            return false;
        });

    };
    $("div[class^='widget']").contentTabs(); //Run function on any div with class name of "Content Tabs" 
```

上面的代码对我不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:32:44.940

似乎工作正常。

我会`.data(...)`改用：

```
var itemType = $('ul.tabs').find('li.activeTab').data('itemtype');
alert(itemType); 
```

小提琴：http: [//jsfiddle.net/maniator/2GYxh/](http://jsfiddle.net/maniator/2GYxh/)

# python - 将使用 Python 从 Twitter 检索到的数据保存到文本文件中？

> ID：10247250
> 
> 赞同：0
> 
> 时间：2012-04-20T13:30:23.170
> 
> 标签：python, caching, twitter

大家好，我目前正在做一些研究，并正在利用 twitter api 来收集信息。我编写了一些代码来查询 python 中的特定推文，并希望将结果保存到文本文件中，但我的代码只返回返回的推文的最后一条推文，谁能告诉我如何纠正这个问题以及出了什么问题？以下是我在 Python 中的代码示例，仅保存最后一条推文，而不是所有返回的推文：

```
u = urllib2.urlopen('http://search.twitter.com/search.json?geocode=29.762778,-95.383056,10.0mi&page=1&rpp=10')
datares = json.load(u)
pprint.pprint(datares)
for tweet in datares['results']:
  print tweet['text']
  archive=tweet['text']
  unicodedata.normalize('NFKD', archive).encode('ascii','ignore')
  with codecs.open('HTXtweets.txt',mode='w', encoding='utf-8',errors='replace') as cache:
    cache.write(archive)
    cache.closed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:58:09.683

您在循环的每次迭代中通过结果打开文件。每次都会从头开始重新创建它。

你应该在循环之前打开它——你不需要在最后关闭它，因为这会在`with`语句完成时自动发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:57:02.873

这样做的原因是您打开文件以在每次迭代中写入。这将替换文件中的现有内容。`'a'`在打开文件时尝试使用标志（如附加）。

# sql - Sql Server 2008 - 按空格分割参数，返回记录像所有分割结果

> ID：10247254
> 
> 赞同：1
> 
> 时间：2012-04-20T13:30:52.320
> 
> 标签：sql, sql-server-2008, split

我将`@Description`参数传递给存储过程（VARCHAR）。参数可能类似于`the book`. 我想返回该列同时包含`the`和的记录`book`。

这些记录将返回：

*   `the green book`
*   `the huge orange book`

我有一个 split 函数可以`@Description`按空格分割参数，但我不知道如何将它包含在 where 子句中......我还需要忽略`@Description`参数`NULL`。

> 免责声明：如果之前有人问过这个问题，我深表歉意......我搜索了一段时间，没有找到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:38:00.573

好吧，如果你想得到一个包含参数中所有单词的结果，你可以这样做：

```
SELECT A.YourFields
FROM YourTable A
INNER JOIN (SELECT *, COUNT(*) OVER() Total FROM dbo.Split(@Description)) B
ON A.YourField LIKE '%' + B.Data + '%'
GROUP BY A.YourFields
HAVING COUNT(*) = MAX(B.Total) 
```

# css - 左侧 -> 右侧和顶部 -> 底部位置之间的 CSS 过渡

> ID：10247255
> 
> 赞同：55
> 
> 时间：2012-04-20T13:30:55.580
> 
> 标签：css, css-transitions

是否可以使用 CSS 过渡在设置的位置之间设置动画`left: 0px`，以便`right: 0px`它一直穿过屏幕？我需要从上到下完成同样的事情。我是否卡在计算屏幕宽度/对象大小？

```
#nav {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 50px;
    height: 50px;
    -webkit-transition: all 0.5s ease-out;
}

.moveto {
    top: 0px;
    right: 0px;
} 
```

然后我使用jQuery的`.addClass`

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-20T17:32:26.570

您可以为位置（上、下、左、右）设置动画，然后通过 CSS 转换减去元素的宽度或高度。

考虑：

```
$('.animate').on('click', function(){
  $(this).toggleClass("move");
})
```

```
 .animate {
        height: 100px;
        width: 100px;
        background-color: #c00;
        transition: all 1s ease;
        position: absolute;
        cursor: pointer;
        font: 13px/100px sans-serif;
        color: white;
        text-align: center;
      }

                               /* ↓ just to position things  */
      .animate.left   { left: 0;   top: 50%;  margin-top: -100px;}
      .animate.right  { right: 0;  top: 50%;  }
      .animate.top    { top: 0;    left: 50%; }
      .animate.bottom { bottom: 0; left: 50%; margin-left: -100px;}

      .animate.left.move {
        left: 100%; 
        transform: translate(-100%, 0);
      }

      .animate.right.move {
        right: 100%; 
        transform: translate(100%, 0);
      }

      .animate.top.move {
        top: 100%; 
        transform: translate(0, -100%);
      }

      .animate.bottom.move {
        bottom: 100%; 
        transform: translate(0, 100%);
      }
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
Click to animate
<div class="animate left">left</div>
<div class="animate top">top</div>
<div class="animate bottom">bottom</div>
<div class="animate right">right</div>
```

然后根据位置动画...

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-08-29T12:58:48.760

这在 Chromium 上对我有用。translate 的 % 是指它所应用的元素的边界框的大小，因此它可以完美地将元素移到右下边缘，而不必切换用于指定其位置的属性。

```
topleft {
  top: 0%;
  left: 0%;
}
bottomright {
  top: 100%;
  left: 100%;
  -webkit-transform: translate(-100%,-100%);
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-03-19T15:41:05.713

对于具有**动态宽度**的元素，可以使用`transform: translateX(-100%);`来抵消水平百分比值。这导致了两种可能的解决方案：

## 1.选项：在整个视口中移动元素：

从以下过渡：

```
transform: translateX(0); 
```

至

```
transform: translateX(calc(100vw - 100%)); 
```

```
#viewportPendulum {
  position: fixed;
  left: 0;
  top: 0;
  animation: 2s ease-in-out infinite alternate swingViewport;
  /* just for styling purposes */
  background: #c70039;
  padding: 1rem;
  color: #fff;
  font-family: sans-serif;
}

@keyframes swingViewport {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(100vw - 100%));
  }
}
```

```
<div id="viewportPendulum">Viewport</div>
```

## 2.选项：移动父容器中的元素：

从以下过渡：

```
transform: translateX(0);
left: 0; 
```

至

```
left: 100%;
transform: translateX(-100%); 
```

```
#parentPendulum {
  position: relative;
  display: inline-block;
  animation: 2s ease-in-out infinite alternate swingParent;
  /* just for styling purposes */
  background: #c70039;
  padding: 1rem;
  color: #fff;
  font-family: sans-serif;
}

@keyframes swingParent {
  from {
    transform: translateX(0);
    left: 0;
  }
  to {
    left: 100%;
    transform: translateX(-100%);
  }
}

.wrapper {
  padding: 2rem 0;
  margin: 2rem 15%;
  background: #eee;
}
```

```
<div class="wrapper">
  <div id="parentPendulum">Parent</div>
</div>
```

* * *

## [Codepen](https://codepen.io/Robbendebiene/pen/NWqzeEM)上的演示

**注意：**这种方法可以很容易地扩展到垂直定位。[在此处](https://codepen.io/Robbendebiene/pen/vYOagaw)访问示例。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-20T18:44:25.593

在更现代的浏览器（包括 IE 10+）中，您现在可以使用[`calc()`](http://caniuse.com/#feat=calc)：

```
.moveto {
  top: 0px;
  left: calc(100% - 50px);
} 
```

# javascript - 将代码添加到链接的 onclick 属性

> ID：10247256
> 
> 赞同：0
> 
> 时间：2012-04-20T13:30:56.807
> 
> 标签：javascript, jquery, onclick, google-analytics

我想在`onclick`列表的每个链接的属性中添加一个 JavaScript 代码。该代码用于谷歌分析事件跟踪。

这是列表：

```
<ol>
    <li>
        <a href="">Alberto Guardiani</a>
    </li>
    <li>
        <a href="">Antica Bottega</a>
    </li>
    <li>
        <a href="">Ash</a>
    </li>
    <li>
        <a href="">Ballin</a>
    </li>
</ol> 
```

这就是jquery附加onclick代码后的样子：

```
<ol>
    <li>
        <a href="" onclick="_gaq.push(['_setCustomVar', 2, 'Designer', 'text1', 3]);">text1</a>
    </li>
    <li>
        <a href="" onclick="_gaq.push(['_setCustomVar', 2, 'Designer', 'text2', 3]);">text2</a>
    </li>
    <li>
        <a href="" onclick="_gaq.push(['_setCustomVar', 2, 'Designer', 'text3', 3]);">text3</a>
    </li>
    <li>
        <a href="" onclick="_gaq.push(['_setCustomVar', 2, 'Designer', 'text4', 3]);">text4</a>
    </li>
</ol> 
```

我不知道 jQuery 是否可以`append`做到这一点，或者我应该如何处理这个问题。你能提出某种解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:33:53.833

```
$("ol li a").click(function() {
    _gaq.push(['_setCustomVar', 2, 'Designer', $(this).html(), 3]);
}); 
```

**编辑：**

如果它不起作用，您可能忘记检查文档是否已完全加载。

在这种情况下，您应该包装代码。

```
jQuery(document).ready(function($) {
    /* jQuery code */
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:33:56.403

使用 jQuery：

```
$('ol li a').click(function() {
    _gaq.push(); // your code here
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:33:42.333

据我了解您的问题，您可以使用`click`处理程序执行此操作。

**html**

```
<li>
    <a class="someClassName" href="">Alberto Guardiani</a>
</li> 
```

**jQuery**

```
$(".someClassName").click(function() {
     _gaq.push(['_setCustomVar', 2, 'Designer', 'text1', 3]);
}); 
```

# c# - 在最后一个方法行等待

> ID：10247258
> 
> 赞同：19
> 
> 时间：2012-04-20T13:31:01.733
> 
> 标签：c#, .net, async-await, c#-5.0

仍在学习异步等待。我遇到了类似于以下的示例：

```
public async Task MethodAsync()
{
  await Method01Async();
  await Method02Async();
} 
```

最后一次等待的目的是什么？Method02Async 是 MethodAsync 方法的最后一行。所以没有任何方法剩余 - 下面没有任何行 - 在编译器生成的回调中没有任何要调用的东西......我错过了什么吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T14:09:09.147

实际上有一个“方法剩余” - 它完成了`Task`返回的`MethodAsync`.

（的返回值）`Method02Async`被等待，`MethodAsync`直到完成才`Method02Async`完成。

如果你有：

```
public async Task MethodAsync()
{
  await Method01Async();
  Method02Async();
} 
```

然后`MethodAsync`将（异步）等待`Method01Async`完成，然后开始`Method02Async`。`MethodAsync`然后将完成，而`Method02Async`可能仍在进行中。

你拥有它的方式：

```
public async Task MethodAsync()
{
  await Method01Async();
  await Method02Async();
} 
```

意味着`MethodAsync`将（异步）等待`Method01Async`完成，然后（异步）等待`Method02Async`完成，然后才会`MethodAsync`完成。

# linux - 使用 webkitgtk 加载 html 时闪退

> ID：10247259
> 
> 赞同：2
> 
> 时间：2012-04-20T13:31:03.473
> 
> 标签：linux, flash, webkit, gtk

我使用 webkitgtk 打开一个带有一些 flash 文件的 html 页面。但是当我加载页面时它崩溃了。我的代码如下。我应该怎么办？

```
GtkWidget *main_window = gtk_window_new(GTK_WINDOW_TOPLEVEL);
gtk_window_set_default_size(GTK_WINDOW(main_window), 800, 600);

WebKitWebView *webview = WEBKIT_WEB_VIEW(webkit_web_view_new());
webkit_web_view_set_editable(WEBKIT_WEB_VIEW(webview),TRUE);
GtkWidget *scrolledWindow = gtk_scrolled_window_new(NULL, NULL);
gtk_scrolled_window_set_policy(GTK_SCROLLED_WINDOW(scrolledWindow),
GTK_POLICY_AUTOMATIC, GTK_POLICY_AUTOMATIC);
gtk_container_add(GTK_CONTAINER(scrolledWindow), GTK_WIDGET(webview));

g_signal_connect(main_window, "destroy", G_CALLBACK(destroyWindowCb), NULL);
g_signal_connect(webview, "close-web-view", G_CALLBACK(closewebviewCb), main_window);

gtk_container_add(GTK_CONTAINER(main_window), scrolledWindow);
webkit_web_view_load_uri(webview,URI_PATH);
/******************webkitsetting************************************/

WebKitWebSettings *settings1 = webkit_web_settings_new ();
g_object_set (G_OBJECT(settings1), "enable-plugins", FALSE, NULL); 
webkit_web_view_set_settings (WEBKIT_WEB_VIEW(webview), settings1);

g_signal_connect (webview, "notify::load-status", G_CALLBACK (loadStatusCb),NULL);
gtk_widget_grab_focus(GTK_WIDGET(webview));
gtk_widget_show_all(main_window);` 
```

# python - “站点包”中的“站点”实际上是什么意思？

> ID：10247264
> 
> 赞同：13
> 
> 时间：2012-04-20T13:31:14.333
> 
> 标签：python, naming, nomenclature

我一直对 . 的命名原理有点好奇`site-packages`。`site`在这种情况下是什么意思？我怀疑它的意思是“网站”，而且我从未听说过与安装位置或机器环境相关的“网站”。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T13:37:20.637

我认为它的含义与,`site`相同- 它是在本地/为此站点安装的那些元素，而不是系统提供的那些元素。`local``/usr/local/*`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T13:38:22.220

这是一个很好的问题，我不知道答案。但我确实听说过“站点”作为命名操作系统、已安装软件和/或物理计算机组合的一种方式。参见例如[http://www.pathname.com/fhs/pub/fhs-2.3.html](http://www.pathname.com/fhs/pub/fhs-2.3.html)，他们经常使用该术语。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T13:56:56.523

我一直将其理解为**on-site** -oposite to **remote**的缩写。可能是因为这些是您机器上的软件包。不过，这只是我的猜测：）

# ruby-on-rails - 使用 AJAX 进行搜索，很好！如何正确显示结果？

> ID：10247272
> 
> 赞同：0
> 
> 时间：2012-04-20T13:31:20.323
> 
> 标签：ruby-on-rails, ajax, search, ruby-on-rails-3.1

我按照[本教程](http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?view=asciicast)将 AJAX 添加到我的 Rails3.1 搜索框（一切正常）。这个搜索框在一个侧边栏中，我想在主列中显示结果。我遇到的问题是我不知道如何正确地做到这一点。

在 AJAX 之前，我有一个 search.html.haml，其中包含显示结果的代码。但是，如果我在此处添加渲染部分调用，则不会显示任何内容（我猜是因为 search.html.haml 没有被调用）

搜索.html.haml

```
=@events.count
#search=render 'search' 
```

另一方面，如果我将渲染部分调用放在 application.html.haml 中。它确实显示了结果，但在主列的实际内容下方。

应用程序.html.haml

```
 #central
        %p#notice= notice
        = yield
        #search=render 'search' 
```

我想这是一个简单的修复，但不知道该怎么做。

提前致谢！！！

_search.html.haml

```
 -@events.each do |event|
   #user_block
     #user_block_pic
      = image_tag(event.pic.url(:medium), class: 'event_block_image', :alt =>'Event Picture')
      ....more stuff 
```

搜索.js.erb

```
 $('#search').html("<%= escape_javascript( render(:partial => 'search') ) %>"); 
```

我该怎么做才能摆脱主列（#central）上的内容并在那里显示结果？

固定的！！！！工作中！！！！（因为我必须等待几个小时才能发布答案，所以我在这里做）

我不确定这是正确的编码，但对我有用。我所做的是摆脱中间文件 search.html.haml（见上文）

现在的配置是这样的：

应用程序.html.haml

```
 #central
        %p#notice= notice
        = yield 
```

_search.html.haml

```
#search
 =@events.count
 -@events.each do |event|
   ...stuff 
```

资产/javascript/search.js

```
 $(function(){ 
$("#search .pagination a").live("click", function(){   #this is for pagination
    $.getScript(this.href);
    return false;
});
$('#events_search').submit(function () {  #this is for the search form
    $.get(this.action, $(this).serialize(), null, 'script');
    return false;
  });
 }); 
```

意见/事件/search.js.erb

```
 $('#central').html("<%= escape_javascript( render(:partial => 'search') ) %>"); 
```

这对我来说可以。希望这可以帮助其他人。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:49:02.457

当您从 ajax 调用中调用搜索方法时，我猜它想要渲染`search.js.erb`或 haml，但我不使用 haml，只使用 erb。

那么你创建一个`search.js.erb`，这是我的一个例子`search.js.erb`：

```
$("#user-browser").replaceWith("<%= escape_javascript render(:partial => 'list') %>");
$("#tabs-interval").replaceWith("<%= escape_javascript render(:partial => 'tabs-interval') %>"); 
```

所以我的 erb 所做的就是使用 jquery 来查找我想要更新 html 的 div，使用呈现的部分并替换其中的 html。

我的部分在erb中看起来像这样：

文件`list.html.erb`：：

```
<div id="user-browser">
  <span>more html stuff</span>
</div> 
```

文件`tabs-interval.html.erb`：：

```
<div id="tabs-interval">
  <span>more html stuff</span>
</div> 
```

# tfs - 执行批处理文件 + 调用 Visual Studio 命令提示符

> ID：10247275
> 
> 赞同：1
> 
> 时间：2012-04-20T13:31:26.637
> 
> 标签：tfs, batch-file, command-prompt

我有一个批处理文件（见下面的代码）。因为 tf 命令必须在 Visual Studio 命令提示符下执行。我调用了视觉工作室命令。

但随后批处理文件停止执行。有人有想法吗？

```
 REM @echo off
        REM ... Change the path below. This is the path where the code will be downloaded!
        REM Z:
        REM cd Backup_TFS_Preview
        call %comspec% /k ""C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat"" x86

        REM ... Navigate to folder
        Z:
        cd Backup_TFS_Preview

        REM ... Makes folder with date today
        mkdir %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%

        REM ... Navigate to folder
        cd %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%

        REM ... Add workspace for the folder with date of today
        tf workspace /new %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4% /noprompt

        REM ... Get all items from TFS
        tf get /recursive /all /noprompt

        REM ... Navigate to folder
        cd ..

        REM ... Zip the folder
        C:\TFS_Backup_Scripts\7z.exe a %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%.zip %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%\

        REM ... Remove folder
        rmdir %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4%\ /s /q

        REM ... Delete workspace
        tf workspace /delete %Date:~-10,2%-%Date:~-7,2%-%Date:~-4,4% /noprompt

        REM ... Navigate to folder
        cd ..
        cd ..

        REM ... Delete zip files that are older then 10 days 
        forfiles -p "Z:\Backup_TFS_Preview" -s -m *.* -d -10 -c "cmd /c del /q @path" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T19:22:14.107

%comspec% /k 运行*另一个*命令提示符，然后保留 cmd.exe。在 cmd.exe 返回之前，您的批处理文件将不会继续。

即使您将 /k 替换为 /c （它不会保留 cmd.exe），它也不起作用，因为新命令提示符中的环境变量不会保留在此命令提示符中。

你只需要：

```
call %VS100COMNTOOLS%\vsvars32.bat 
```

或者

```
call %VS100COMNTOOLS%\..\..\VC\vcvarsall.bat x86 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T19:13:48.200

从 cmd 提示符执行调用时会发生什么？

还要注意 vcvars32.bat（由 vcvarsall.bat 调用）的退出代码（0 或 1），因此在运行 vcvarsall.bat 后运行：Echo %errorlevel%。如果为零，则命令成功完成。

并且您可以尝试像这样删除 dbl ""： call %comspec% /k "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\vcvarsall.bat" x86 这可能会将 cmd 语句破坏为错误由于空间未转义而导致的参数

可能在调用线之后立即测试 %errorlevel%

最后一招，将调用语句中的 /k 更改为 /c。

发布结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T13:50:40.753

我用另一种方式解决了它。我使用了 tf.exe 的完整路径。它在命令提示符下工作。

电话应答对我不起作用。

# php - 如何在 Yii 中制作 Web 服务 SOAP 1.2

> ID：10247277
> 
> 赞同：2
> 
> 时间：2012-04-20T13:31:39.730
> 
> 标签：php, web-services, soap, yii

**问题：**

我不知道 Yii 期望我如何更改肥皂版本。我正在关注本[教程](http://www.yiiframework.com/doc/guide/1.1/en/topics.webservice)。Web 服务有效，但不是 SOAP 1.2

**班上：**

```
<?php
class ABFolioController extends CController
{
    public function actions()
    {
        return array(
            'folio'=>array(
                'class'=>'CWebServiceAction',
                'serviceOptions'=>array('soapVersion'=>'1.2')
            ),
        );

    }

    /**
     * @param  string folioId
     * @param  string cNumber
     * @param  string oDRS
     * @param  string dlr
     * @param  string feeAmount
     * @param  string transactionStatus
     * @param  string captureId
     * @param  datetime captureTimestamp
     * @param  string prefix
     * @param  string oDEFRS
     * @return string the statement
     * @soap
     */
    public function sendFolio($folioId, $cNumber, $oDRS, $dlr,
            $feeAmount, $transactionStatus, $captureId, $captureTimestamp, 
            $prefix, $oDEFRS)
    {
    //

      $model = new Dlfolio();
      $model->folioId = $folioId;
      $model->cNumber = $cNumber;
      $model->oDRS = $oDRS;
      $model->dlr = $dlr;
      $model->feeAmount = $feeAmount;
      $model->transactionStatus = $transactionStatus;
      $model->captureId = $captureId;
      $model->captureTimestamp = $captureTimestamp;
      $model->prefix = $prefix;
      $model->oDEFRS = $oDEFRS;
      $yesno = $model->save();

      if ($yesno=TRUE)
      {
          //on success
          return 'Record Saved';
      }
      else
      {
          //on failure
          return $yesno;
      }

    }   
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T10:14:30.743

当我将客户端设置为 v1.2 时，我总是从服务器接收 v1.2 响应，而当我将客户端设置为 v1.1 时，我总是从服务器接收 v1.1 响应，也许它会自动检测客户端版本并覆盖服务器版本用吗？

```
$client=new SoapClient('http://hys.local/ABFolio/folio',array('soap_version'=>SOAP_1_2,'trace'=>true));
var_dump($client);
echo $client->sendFolio();
echo $client->__getLastRequest();
echo $client->__getLastResponse(); 
```

响应为 1.2

```
<env:Envelope xmlns:env="http://www.w3.org/2003/05/soap-envelope" 
```

和 1.1 客户端默认

```
$client=new SoapClient('http://hys.local/ABFolio/folio',array('soap_version'=>SOAP_1_1,'trace'=>true)); 
```

响应为 1.1

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" 
```

`EDIT:`

让我们看看 yii `framework\web\services\CWebService.php`

```
/**
 * @return array options for creating SoapServer instance
 * @see http://www.php.net/manual/en/function.soap-soapserver-construct.php
 */
protected function getOptions()
{
    $options=array();
    if($this->soapVersion==='1.1')
        $options['soap_version']=SOAP_1_1;
    else if($this->soapVersion==='1.2')
        $options['soap_version']=SOAP_1_2;
    if($this->actor!==null)
        $options['actor']=$this->actor;
    $options['encoding']=$this->encoding;
    foreach($this->classMap as $type=>$className)
    {
        $className=Yii::import($className,true);
        if(is_int($type))
            $type=$className;
        $options['classmap'][$type]=$className;
    }
    return $options;
} 
```

如果我检查此代码，我在您的代码中看不到任何错误

`EDIT:`

好的，这比怎么样？`framework\web\services\CWsdlGenerator.php`

```
/*
 * @param DOMDocument $dom Represents an entire HTML or XML document; serves as the root of the document tree
 */
private function addBindings($dom)
{
    $binding=$dom->createElement('wsdl:binding');
    $binding->setAttribute('name',$this->serviceName.'Binding');
    $binding->setAttribute('type','tns:'.$this->serviceName.'PortType');

    $soapBinding=$dom->createElement('soap:binding');
    $soapBinding->setAttribute('style','rpc');
    $soapBinding->setAttribute('transport','http://schemas.xmlsoap.org/soap/http');
    $binding->appendChild($soapBinding);

    $dom->documentElement->appendChild($binding);

    foreach($this->_operations as $name=>$doc)
        $binding->appendChild($this->createOperationElement($dom,$name));
} 
```

如我所见，传输是预定义的（您可以检查并将其替换为 12）

添加12后我的wsdl变成了这个

```
<wsdl:binding name="ABFolioControllerBinding" type="tns:ABFolioControllerPortType">    
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap12/http"/>
</wsdl:binding> 
```

可能是 yii 的错误 - 继续报告吧

但是从`http://msdn.microsoft.com/en-us/library/ms995800.aspx`我开始检查的不是传输而是命名空间

```
SOAP versioning is based on XML namespaces. SOAP 1.1 is identified by the http://schemas.xmlsoap.org/soap/envelope/ namespace while SOAP 1.2 is identified by the http://www.w3.org/2002/12/soap-envelope namespace (although this will change when it becomes a Recommendation). 
```

这就是为什么我认为一切都是正确的

`EDIT:`

这是decesion，你需要有

```
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
```

在你的xml里面`<definitions`除了

```
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
```

而不是这个：

```
<soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/> 
```

你必须放置

```
<soap12:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/> 
```

现在soapUI将我的wsdl检测为soap 1.2

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions 
xmlns="http://schemas.xmlsoap.org/wsdl/" 
xmlns:tns="urn:ABFolioControllerwsdl" 
xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" 
name="ABFolioController" 
targetNamespace="urn:ABFolioControllerwsdl">
    <wsdl:portType name="ABFolioControllerPortType"/>
    <wsdl:binding name="ABFolioControllerBinding" type="tns:ABFolioControllerPortType">
        <soap12:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    </wsdl:binding>
    <wsdl:service name="ABFolioControllerService">
        <wsdl:port name="ABFolioControllerPort" binding="tns:ABFolioControllerBinding">
            <soap:address location="http://hys.local/uk/aBFolio/folio?ws=1"/>
        </wsdl:port>
    </wsdl:service>
</definitions> 
```

您可以在 yii`addBindings`和`buildDOM`函数中的相同文件中进行的所有替换

我也认为这要困难得多，即如果你想同时支持soap和soap12绑定，那么你必须同时拥有soap和soap12绑定，但至少它已经被识别为soap12

`EDIT:`

yii 硬编码soap1.1 如果你不提供你自己的wsdl（你可以通过$wsdlUrl 提供它，就像在CWebService 的run 方法中一样）。这似乎是合法的 - 因为 php soap 服务器中的默认肥皂版本也是 1.1，如果您将版本更改为 1.2，您必须为 1.2 提供自己的 wsdl

# java - 从给定点和半径计算纬度和经度

> ID：10247279
> 
> 赞同：1
> 
> 时间：2012-04-20T13:31:52.507
> 
> 标签：java

我有纬度，经度和半径。你能帮我从给定的点（纬度和经度）和半径中找到另一个纬度和经度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:14:57.100

您将需要比点和半径更多的信息。您还需要圆中点的角度。

使用半径和角度，您必须应用[三角](http://en.wikipedia.org/wiki/Trigonometry)定律并绘制具有半径、高度和宽度的假想三角形。高度和宽度将为您提供与当前纬度和经度的距离。

例如：

```
for (int angle = 0; angle < 360; angle++){
    double x = getDistanceX(radius, angle);
    double y = getDistanceY(radius, angle);
    if (angle > 180) 
        x *= -1;
    if (angle > 90 && angle < 270)
        y *= -1;
    double newLatitude = getCalculateLatitude(latitude, x);
    double newLongitude = getCalculateLatitude(longitude, y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:37:54.033

您是否试图找出另一个纬度和经度是否在您的初始纬度和经度的某个半径范围内？如果是这样，请查看[其他 StackOverflow 帖子](https://stackoverflow.com/questions/2344165/calculate-gps-coordinates-to-form-a-radius-of-given-size)。

# wix - session.CustomActionData 修复中为空

> ID：10247283
> 
> 赞同：0
> 
> 时间：2012-04-20T13:32:04.317
> 
> 标签：wix, wix3.5

我有一个始终执行的自定义操作（没有任何条件）。此自定义操作是“延迟”的，并在全新安装或升级时正确获取值，但在修复模式下，传递的值为空。在设置日志中，该值正确显示，但在自定义操作中，该值为“”。修复中的值始终为空是否正确？

# node.js - node.js express.js 对象不是函数 call_non_function

> ID：10247287
> 
> 赞同：5
> 
> 时间：2012-04-20T13:32:26.823
> 
> 标签：node.js, express

我有这个错误：

```
TypeError: object is not a function
at Object.CALL_NON_FUNCTION (native) 
```

对于这一行：

```
var app=express(); 
```

我尝试再次安装 express/connect，但是.. 没有。

谢谢！

**编辑**

我是快递 2.5.8。

我的代码：

*错误：*

```
    var http=require('http');
    变种应用=快递（）；
    var server=http.createServer(app);

```

（我忘记了为什么我需要使用这个代码，我认为 cookie 握手有效。我已经解决了问题（hanskake cookie）编辑 manager.js，所以我不需要使用这个代码。但是理解为什么没有工作可能会很有趣（以及为什么我想使用））。

*没有错误：* `var app=express.createServer();`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T05:39:18.843

你有错误的快递版本。您只能`express()`在 v3.xx 中创建服务器 在此版本之前，express 不能作为函数调用。尝试更改代码以旧方式创建应用程序或尝试更新 express。

# spring - Spring JUnit 测试中的自动模拟实例化

> ID：10247297
> 
> 赞同：12
> 
> 时间：2012-04-20T13:32:58.357
> 
> 标签：spring, junit4, mockito

我有一个 Spring XML bean 定义，我想为其编写集成测试。XML bean 定义是一个更大的应用程序上下文的一部分，其中包含几个这样的文件，使用`<import>`. 在定义中，我引用了几个来自其他文件的 bean。

对于我的集成测试，我想独立实例化定义，并对所有其他 bean 使用 Mockito 模拟。到目前为止，我正在使用这样的东西：

*FooIntegrationTest.java*

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration
public class FooIntegrationTest {
  @Autowired private ClassUnderTest underTest;
  @Autowired private MockedClass mock;

  @Test
  public void testFoo() {
  }
} 
```

*FooIntegrationTest-context.xml*

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:c="http://www.springframework.org/schema/c"
  xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
  <import resource="part-to-test.xml" />

  <bean id="mockedClassReferencedByName" class="org.mockito.Mockito" factory-method="mock" c:classToMock="SomeMockedClass" />
  <bean class="org.mockito.Mockito" factory-method="mock" c:classToMock="OtherMockedClassReferencedByType" />
  <bean class="org.mockito.Mockito" factory-method="mock" c:classToMock="MockedClass" />
  ...
</beans> 
```

我想自动化相当乏味的模拟部分：理想情况下，我希望自动模拟在应用程序上下文中找不到的所有 bean。通过使用名称引用设置的`part-to-test.xml`用途和 bean。`@Autowired`我只使用 XML bean 定义文件，既不使用`@Configuration`类也不使用`@Component`注解。

我已经研究了如何在 中使用自定义上下文加载器`@ContextConfiguration(loader=...)`，但我还没有找到合适的扩展点。Srinockito 似乎没有解决这个问题。

是否有其他项目已经解决了这个问题？如果没有，我将在哪里扩展 Spring 以自动创建模拟？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T07:27:28.077

这是[一篇带有代码示例的简短文章](https://dzone.com/articles/automatically-inject-mocks)。一个`BeanDefinitionRegistryPostProcessor`实现为每个缺少的 bean 定义生成一个模拟对象。生成部分是用 a 完成的`MocksFactory`，这里是[这样一个工厂的例子](http://hg.randompage.org/java/src/407e78aa08a0/projects/bookmarking/backend/spring/src/test/java/org/randompage/bookmarking/backend/testUtils/MocksFactory.java)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-13T16:54:11.013

以防万一有人仍然对这个问题感兴趣，我已经扩展了 Yves Martin 提到的文章中的代码，包括继承、对@Inject 的支持等......并在这里创建了一个 Github 项目：[https ://github.com/ rinoto/spring-auto-mock](https://github.com/rinoto/spring-auto-mock)

# html - 将部分分为左右部分（如 facebook 时间线）

> ID：10247299
> 
> 赞同：3
> 
> 时间：2012-04-20T13:33:12.897
> 
> 标签：html, css

我正在尝试在这里制作类似于 facebook 时间线的东西，但由于某种原因我无法得到它。为什么我的右 div 只跟随在第一个左下方之后。我希望他们从同一个地方开始，就像 facebook 时间线一样。

我为你做了一个小提琴，所以你可以理解我的问题：http: [//jsfiddle.net/FHR3q/](http://jsfiddle.net/FHR3q/)

此外，在它们之间添加某种分隔符的最佳方法是什么，比如一条线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:37:00.927

像这样写：

```
<div class="block leftt"></div>
<div class="block right"></div>
<div class="block left"></div>
<div class="block right"></div> 
```

检查这个[http://jsfiddle.net/FHR3q/6/](http://jsfiddle.net/FHR3q/6/)

**更新**

可能您可以为此使用**nth-child**属性：

检查这个[http://jsfiddle.net/FHR3q/15/](http://jsfiddle.net/FHR3q/15/)

带分隔符[http://jsfiddle.net/FHR3q/16/](http://jsfiddle.net/FHR3q/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:38:38.927

为左右定义一个块，然后在其中嵌套更多的div，像这样

[http://jsfiddle.net/FHR3q/9/](http://jsfiddle.net/FHR3q/9/)

另外，您不需要使用 clear

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:39:05.267

如果您更改显示 html div 的顺序

```
<div class="content">
<div class="timeline">
    <div class="block left">
        <h1>Hello, my name is Steve1.</h1><br />
        <h2>Hello, my name is Steve.</h2><br />
        <h3>Hello, my name is Steve.</h3><br />
        <h4>Hello, my name is Steve.</h4><br />
        <h5>Hello, my name is Steve.</h5><br />
        <h6>Hello, my name is Steve.</h6>
    </div>
            <div class="block right">
        <h1>Hello, my name is Steve3.</h1><br />
        <h2>Hello, my name is Steve.</h2><br />
        <h3>Hello, my name is Steve.</h3><br />
        <h4>Hello, my name is Steve.</h4><br />
        <h5>Hello, my name is Steve.</h5><br />
        <h6>Hello, my name is Steve.</h6>
    </div>
    <div class="block left">
        <h1>Hello, my name is Steve2.</h1><br />
        <h2>Hello, my name is Steve.</h2><br />
        <h3>Hello, my name is Steve.</h3><br />
        <h4>Hello, my name is Steve.</h4><br />
        <h5>Hello, my name is Steve.</h5><br />
        <h6>Hello, my name is Steve.</h6>
    </div>

    <div class="block right">
        <h1>Hello, my name is Steve4.</h1><br />
        <h2>Hello, my name is Steve.</h2><br />
        <h3>Hello, my name is Steve.</h3><br />
        <h4>Hello, my name is Steve.</h4><br />
        <h5>Hello, my name is Steve.</h5><br />
        <h6>Hello, my name is Steve.</h6>
    </div>
</div> 
```

# google-maps - 谷歌地图网络服务/JavaScript API - 边界框问题

> ID：10247300
> 
> 赞同：1
> 
> 时间：2012-04-20T13:33:19.377
> 
> 标签：google-maps, geocoding

我需要为任何给定的城市获得一个像样的边界框。截至目前，我知道没有办法做到这一点，而是通过谷歌地图 API`geocode`功能。但是，也有问题。

例如，考虑一下阿布扎比。

这是代码（使用python [googlemaps](http://py-googlemaps.sourceforge.net/#googlemaps.GoogleMaps.geocode)包）：

```
>>> d = gmaps.geocode('Abu Dhabi, AE')
>>> pp.pprint(d)
{ u'Placemark': [ { u'AddressDetails': { u'Accuracy': 4,
                                         u'Country': { u'AdministrativeArea': { u'AdministrativeAreaName': u'Abu Dhabi',
                                                                                u'Locality': { u'LocalityName': u'Abu Dhabi'}},
                                                       u'CountryName': u'United Arab Emirates',
                                                       u'CountryNameCode': u'AE'}},
                    u'ExtendedData': { u'LatLonBox': { u'east': 54.8789043,
                                                       u'north': 24.7912388,
                                                       u'south': 24.1412558,
                                                       u'west': 53.8544291}},
                    u'Point': { u'coordinates': [54.3666667, 24.4666667, 0]},
                    u'address': u'Abu Dhabi - United Arab Emirates',
                    u'id': u'p1'}],
  u'Status': { u'code': 200, u'request': u'geocode'},
  u'name': u'Abu Dhabi, AE'} 
```

问题是返回`LatLonBox`的东西太大了——它的对角线长度超过 126 公里。恕我直言阿布扎比，我认为这座城市并没有那么大。

有趣的是，JavaScript API 返回两个框。假设`results`是调用`google.maps.Geocoder.geocode` “阿布扎比”的结果，我们有两个框：

*   `results[0].geometry.bounds = ((24.1776, 54.30012), (24.5413, 54.7751))`
*   `results[0].geometry.viewport = ((24.1413, 53.8544), (24.7912, 54.8789))`

正是Web 服务 API 返回的`viewport`位置。另一方面，在大小和位置方面看起来要好得多 - 下图描绘了两个框 `LatLonBox`：`bounds`![在此处输入图像描述](../Images/6e14dbdde28fd45d6b1bca40304a155a.png)

起初，我怀疑 python 包`bounds`在最终结果中省略了 ，但检查 google maps web 服务返回的 json 发现 web 服务没有返回任何`bounds`框 - 描述结果的 python 字典是返回的 json。

所以，我的问题是如何在使用 Web 服务 API 时获得一个像样的边界框？还是完全有替代 API？有没有人有任何使用非谷歌地图 API 来获取此类信息的经验？

谢谢。

**编辑**

另一个有趣的转折。虽然有些城市有巨大的边界框（或视口），但有些城市的边界框很小。例如，一个包围阿德莱德，AU 的直径只有 7km，这当然太小了： ![在此处输入图像描述](../Images/ea130950f667cf9d880fd3f4a57b9968.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-09T21:06:29.733

您可以在后端使用 MySQL 及其对空间数据的扩展。

> [信封(g)](http://dev.mysql.com/doc/refman/5.6/en/gis-general-property-functions.html#function_envelope)
> 
> 返回几何值 g 的**最小边界矩形**(MBR)。结果作为 Polygon 值返回。

我们在一个地理搜索项目中使用了 MySQL5.6，并且从未回头。只需确保您使用 MySQL 5.6 或更高版本以获得完整的 Geo 支持。

# string - 比较字符串二进制（&不是字母数字）

> ID：10247301
> 
> 赞同：4
> 
> 时间：2012-04-20T13:33:20.847
> 
> 标签：string, sorting, compare

你如何比较字符串二进制（不是字母数字）？

洪流规格：

> 键必须是字符串并按排序顺序显示（按原始字符串排序，而不是字母数字）。应该使用二进制比较来比较字符串，而不是特定于文化的“自然”比较。

所以我需要按键对字典进行排序......但我没有得到这个规范......解释......任何人？

[更新：据此： http](http://docs.oracle.com/cd/B19306_01/server.102/b14225/ch5lingsort.htm) ://docs.oracle.com/cd/B19306_01/server.102/b14225/ch5lingsort.htm

> 使用二进制排序
> 
> 一种对字符数据进行排序的方法是基于字符编码方案定义的字符的数值。这称为二元排序。二元排序是最快的排序类型。它们对英文字母产生了合理的结果，因为 ASCII 和 EBCDIC 标准将字母 A 到 Z 定义为升序数值。
> 
> 注意：在 ASCII 标准中，所有大写字母都出现在任何小写字母之前。在 EBCDIC 标准中，情况正好相反：所有小写字母都出现在任何大写字母之前。
> 
> 当存在其他语言中使用的字符时，二进制排序通常不会产生合理的结果。例如，当 Ä 在字符编码方案中的数值高于 B 时，升序 ORDER BY 查询返回字符串 ABC、ABZ、BCD、ÄBC。对于使用表意字符的亚洲语言，二进制排序通常在语言上没有意义。

所以基本上它的英语结果与按字母排序的结果相同..很好..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:39:33.300

只要您确保将字符视为字节，任何标准的排序例程都应该有效。

# python - 当 excel 单元格值为 =TODAY() 时，xlrd 检索到错误的日期

> ID：10247304
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:28.917
> 
> 标签：python, xlrd

如果单元格中的值为`=TODAY()`，则 xlrd 错误地检索文档上次保存的日期。

有谁知道我在哪里可以找到`xlrd`源代码中的相关代码以便进行编辑？任何解决方法的建议也将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:18:38.353

`xlrd`不解析和评估公式。 `xlrd`给出任何公式的最后评估值，因为这是保存在文档中的值.

如果您需要在阅读文档时评估函数，则需要使用其他工具。

如果您在 Windows 上并安装了 Excel，则可以通过 COM 对象访问 Excel：

```
import win32com.client
xl = win32com.client.Dispatch("Excel.Application")
xl.Visible = True
xl.Workbooks.Open("C:\\path\\wb.xls") # backslash required by excel 2007 and later
print xl.Cells(1,1).Value # cell "A1" of the active sheet 
```

# tfs - 签入后如何在源代码中存储新的 CHANGESET 编号？

> ID：10247305
> 
> 赞同：4
> 
> 时间：2012-04-20T13:33:30.500
> 
> 标签：tfs, changeset

在 SVN 中，您可以使用一些[关键字扩展](https://stackoverflow.com/questions/2328724/how-can-i-store-the-new-svn-revision-number-in-my-source-code-after-i-commit-t)将修订号放入源文件中。我发现这对 SQL 脚本特别有用。

使用 TFS2010，如何将变更集编号放入源文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T19:19:19.660

如果您确实必须在文件中插入当前变更集编号，您可以使用[Keyword Substitution Check-in Policy](http://logsubstpol.codeplex.com/)。

# objective-c - 如何将 css 应用于本机 ios 应用程序？

> ID：10247307
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:34.133
> 
> 标签：objective-c, css, ios5, uiviewcontroller

我正在开发一个应用程序，我需要将 css 样式表作为主题应用于背景。是否有可能通过将 css 文件拖到资源文件夹并从文档文件夹中调用它来以编程方式应用。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:58:38.333

我正在使用添加到资源文件夹中的自定义 CSS 样式表来设置`UIWebView`对象的样式。首先，我将要加载的 HTML 代码放在一个上，`NSString`并指定要使用的样式表。然后，我创建对象并使用基 URL 是应用程序包路径`UIWebView`的方法加载 HTML 字符串。`loadHTMLString:baseURL:`希望这可以帮助。

```
NSString *bodyHTML = [NSString stringWithFormat:@"<html> \n"
                         "<head> \n"
                         "<link href=\"default.css\" rel=\"stylesheet\" type=\"text/css\" /> \n"
                         "</head> \n"
                         "<body>%@</body> \n"
                         "</html>", textPost.body];

UIWebView *bodyView = [[UIWebView alloc] initWithFrame:CGRectMake(0.0, 400.0, 532.0, 10.0)];
bodyView.delegate = self;
NSString *path = [[NSBundle mainBundle] bundlePath];
NSURL *baseURL = [NSURL fileURLWithPath:path];
[bodyView loadHTMLString:bodyHTML baseURL:baseURL]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:46:56.753

您是否尝试过使用[`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/)? 它提供了一种`– loadHTMLString:baseURL:`方法，可以让你做你描述的事情。

# c# - 减少具有不同嵌套类的两个类中的代码重复

> ID：10247308
> 
> 赞同：4
> 
> 时间：2012-04-20T13:33:34.993
> 
> 标签：c#, enums, refactoring, xml-serialization

我有两个非常相似的类（这是 C#），除了它们每个都包含自己的嵌套类和枚举。

我想将它们重构为都继承自一个抽象类，但我遇到了一个问题，因为这些方法都与嵌套类类型紧密耦合。

我的第一个计划是抽出 ItemDetails 类，但它链接到 ItemType，这是一个特定于每个视图项类的枚举。此外，我不能只使用 System.Enum 作为类型，因为我需要能够将详细信息序列化为 xml 文件。

我怎样才能减少这些类中的重复？

```
public class FirstViewItem
{
    [Serializable]
    public class ItemDetails
    {
        public ItemType Type;
        public int Width;
        public string Text;
        public int DisplayOrder;
    }

    public enum ItemType
    {
        None = 0,
        A,
        B,
        C
    }

    public FirstViewItem()
    {
        // ...
    }

    public List<ItemDetails>()
    {
        // code here ...
    }
}

public class SecondViewItem
{
    [Serializable]
    public class ItemDetails
    {
        public ItemType Type;
        public int Width;
        public string Text;
        public int DisplayOrder;
    }

    public enum ItemType
    {
        None = 0,
        X,
        Y,
        X
    }

    public SecondViewItem()
    {
        // ...
    }

    public List<ItemDetails>()
    {
        // code here ...
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:36:31.553

您想要创建一个依赖于传入的项目类型枚举的泛型类：

```
public class ViewItem<T>
{
    [Serializable]
    public class ItemDetails
    {
        public T Type; // the generic type is inserted here
        public int Width;
        public string Text;
        public int DisplayOrder;
    }

    // common code that uses ItemDetails
} 
```

然后是一些项目类型：

```
public enum FirstItemType
{
    None = 0,
    A,
    B,
    C
}

public enum SecondItemType
{
    None = 0,
    X,
    Y,
    Z
} 
```

然后用法：

```
var firstViewItem = new ViewItem<FirstItemType>(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:38:37.080

衙门的回答很好。

我已经开始写这个，所以我会完成。这是一个将泛型与基类和一些继承类一起使用的示例：

```
public class BaseClass<T>
{
   public T NestedClass{get;set;}
}

public  class MainOne : BaseClass<MainOneType>
{
}

public class MainTwo : BaseClass<MainTwoType>
{
}

public class MainOneType
{
}

public class MainTwoType
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T19:35:56.610

我最终使用了来自 2 个不同答案的想法，所以我会用综合结果来回答。

```
public class BaseViewItem<T> where T : struct
{
    [Serializable]
    public class ItemDetails
    {
        public T Type;
        public int Width;
        public string Text;
        public int DisplayOrder;
    }

    public FirstViewItem()
    {
        // ...
    }

    public List<ItemDetails>()
    {
        // code here ...
    }
}

public class FirstViewItem : BaseViewItem<FirstItemType>
{
    // class-specific code...
}

public class SecondViewItem : BaseViewItem<SecondItemType>
{
    // class-specific code...
}

public enum FirstItemType
{
    None = 0, A, B, C
}

public enum SecondItemType
{
    None = 0, X, Y, Z
} 
```

# solr - Solr 异常：docID 必须 >= 0 且 < maxDoc=20

> ID：10247309
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:35.110
> 
> 标签：solr, lucene, indexing, recovery

对于多 GB 的 Solr 索引中的一些 solr 查询，我遇到了以下异常。整个索引建立在 Solr 3.5.0 之上。

这是否意味着我的索引已损坏？那么有什么办法可以恢复呢？

`HTTP Status 500 - docID must be >= 0 and < maxDoc=20 (got docID=2144084671) java.lang.IllegalArgumentException: docID must be >= 0 and < maxDoc=20 (got docID=2144084671) at org.apache.lucene.index.SegmentReader.document(SegmentReader.java:475) at org.apache.lucene.index.DirectoryReader.document(DirectoryReader.java:583) at org.apache.solr.search.SolrIndexReader.document(SolrIndexReader.java:260) at org.apache.solr.search.SolrIndexSearcher.doc(SolrIndexSearcher.java:452) at org.apache.solr.util.SolrPluginUtils.optimizePreFetchDocs(SolrPluginUtils.java:271) at org.apache.solr.handler.component.QueryComponent.doPrefetch(QueryComponent.java:478) at org.apache.solr.handler.component.QueryComponent.process(QueryComponent.java:385) at org.apache.solr.handler.component.SearchHandler.handleRequestBody(SearchHandler.java:194) at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:129) at org.apache.solr.core.SolrCore.execute(SolrCore.java:1372) at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:356) at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:252) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169) at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98) at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987) at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:307) at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) at java.lang.Thread.run(Thread.java:679)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T06:50:00.127

升级到 Solr 3.6.0 和完整的重新索引解决了这个问题。

# iphone - 如何在 Xcode 3.2.5 中为企业内部分发准备应用程序？

> ID：10247312
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:35.990
> 
> 标签：iphone, ios, ipad, distribution, in-house-distribution

我们已经购买了企业计划帐户并通过链接

[https://developer.apple.com/library/IOs/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/DistributinganApp/DistributinganApp.html](https://developer.apple.com/library/IOs/#documentation/ToolsLanguages/Conceptual/DevPortalGuide/DistributinganApp/DistributinganApp.html)

我开始知道我们可以将我们的应用程序分发给我们的员工，而无需提交给 AppStore。

借助链接中给出的程序

[https://developer.apple.com/library/IOs/#recipes/xcode_help-scheme_editor/Articles/SchemeArchive.html#//apple_ref/doc/uid/TP40010402-CH6](https://developer.apple.com/library/IOs/#recipes/xcode_help-scheme_editor/Articles/SchemeArchive.html#//apple_ref/doc/uid/TP40010402-CH6)

[https://developer.apple.com/library/IOs/#recipes/xcode_help-scheme_editor/Articles/SchemeDialog.html#//apple_ref/doc/uid/TP40010402-CH1-SW1](https://developer.apple.com/library/IOs/#recipes/xcode_help-scheme_editor/Articles/SchemeDialog.html#//apple_ref/doc/uid/TP40010402-CH1-SW1)

我试图创建存档

通过链接中给出的**产品 > 存档**，但无法打开存档应用程序的窗口。我使用的是 Xcode 3.2.5？

我无法找到方案窗口....即使单击项目...上栏和每个在这里我都无法打开第三个链接中给出的那个。没有看到给定的菜单以打开所需的屏幕。

请告诉我如何打开它以继续。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:59:30.053

我得到了解决方案

我将其更新为`Xcode 4.2`并显示了所有所需的选项。

# ruby-on-rails - Redmine 插件 - 如何使用现有的助手

> ID：10247316
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:44.987
> 
> 标签：ruby-on-rails, ruby, redmine, redmine-plugins

我为消息系统创建了一个 Redmine 插件。除了消息，用户还可以附加文件。为此，我正在尝试使用现有的 AttachmentsHelper。

这是我的示例代码

在 index.html.erb 中

```
<% if not @members.blank? %>

<% form_for :note, @note, :url => {:action => 'create', :project_id => @project.id}, :html => {:multipart => true, :id => 'note-form'} do |f| %>

  <%= f.hidden_field :p_id, :value => @project.id %>
  <p><%= f.text_area :content, :cols => 40, :rows => 6, :class => 'wiki-edit', :id => 'message_content' %></p>
  <p> <%= render :partial => 'attachments/form' %></p>
  <%= submit_tag l(:button_create) %>

<% end %>

<% end  %> 
```

在我的控制器.rb

```
class CommunicationsController < ApplicationController
unloadable
include AttachmentsHelper

def create
 #code for saving message
end

end 
```

上面的代码不起作用，我也没有收到任何错误。我错过了什么？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T09:05:27.313

你应该使用

```
helper :attachments_helper 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T17:11:24.747

在你的 redmine 插件中使用现有的助手。尝试添加

```
require File.dirname(__FILE__) + '/../../../../../app/helpers/attachments_helper' 
```

在控制器的顶部

# jquery - jQuery 数据模板中的 URL 定义

> ID：10247317
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:45.597
> 
> 标签：jquery, asp.net, html, asp.net-mvc-3

我在 jQuery 数据模板中有以下 HTML：

```
<a class="comment" style = "text-decoration:underline" href="ItemTitle/${Application.ApplicationId}/${Application.ApplicationName}/${DomainObjectId}/${DomainObjectPropertyNameFormatted}">${DomainObjectPropertyValue}</a> 
```

如上所述，模板在 ItemTitle 视图上呈现并生成一个 URL，该 URL 将所有 URL 元素附加到它。如果我在“ItemTitle”之前添加一个“/”，它将转到根 IIS 网站。我不能使用像 Html.ActionLink 这样的 html 帮助程序，因为模板仅在页面加载后才呈现。

如何让它导航到正确的 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:34:10.623

只需创建一个包含 dev url 的变量。

例如：

```
$FullURL = 'http://[some ip]/[path]'; 
```

并将其包含在您的 a href 中，例如：href="<%=FullURL%>/ItemTitle/${Application.ApplicationId}.. etc"。

当您从开发更改为生产时，只需更改 $FullURL 变量。

# java - 当我使用 ListView 设置字符串数组时，我强制关闭

> ID：10247320
> 
> 赞同：0
> 
> 时间：2012-04-20T13:33:55.680
> 
> 标签：java, android, arraylist, arrays, forceclose

我正在制作一个列表视图，我希望它显示字符串数组中的内容。这是我的扫描仪课程：

```
package com.rezoluz.planesim;

import java.util.ArrayList;

public class Scanner {

    public ArrayList<String> gameList;
    public String[] gameListFin;

    public void getFiles() {
        gameList.add("testo7r");
        gameList.add("test5or");
        gameList.add("te4stor");
        gameList.add("tes3tor");
        gameList.add("testo2r");
        gameListFin = gameList.toArray(new String[gameList.size()]);
    }

} 
```

这是我的 ShortcutListActivty 类：

```
package com.rezoluz.planesim;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ShortcutListActivity extends Activity {

    Scanner scanner = new Scanner();

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.shortcuts_list);

        scanner.getFiles();
        ListView listView = (ListView)findViewById(R.id.shortcutsList);
        listView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, scanner.gameListFin));
    }

} 
```

但是当我打开 ShortcutsListActivity 时，它会强制关闭，这里是 logcat。

```
04-20 15:29:24.343: D/AndroidRuntime(17039): Shutting down VM 04-20
 15:29:24.343: W/dalvikvm(17039): threadid=1: thread exiting with
 uncaught exception (group=0x4001d7e8) 04-20 15:29:24.478:
 E/AndroidRuntime(17039): FATAL EXCEPTION: main 04-20 15:29:24.478:
 E/AndroidRuntime(17039): java.lang.RuntimeException: Unable to start
 activity
 ComponentInfo{com.rezoluz.planesim/com.rezoluz.planesim.ShortcutListActivity}:
 java.lang.NullPointerException 04-20 15:29:24.478:
 E/AndroidRuntime(17039):   at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 android.app.ActivityThread.access$2300(ActivityThread.java:125) 04-20
 15:29:24.478: E/AndroidRuntime(17039):     at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 android.os.Handler.dispatchMessage(Handler.java:99) 04-20
 15:29:24.478: E/AndroidRuntime(17039):     at
 android.os.Looper.loop(Looper.java:123) 04-20 15:29:24.478:
 E/AndroidRuntime(17039):   at
 android.app.ActivityThread.main(ActivityThread.java:4627) 04-20
 15:29:24.478: E/AndroidRuntime(17039):     at
 java.lang.reflect.Method.invokeNative(Native Method) 04-20
 15:29:24.478: E/AndroidRuntime(17039):     at
 java.lang.reflect.Method.invoke(Method.java:521) 04-20 15:29:24.478:
 E/AndroidRuntime(17039):   at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-20
 15:29:24.478: E/AndroidRuntime(17039):     at
 dalvik.system.NativeStart.main(Native Method) 04-20 15:29:24.478:
 E/AndroidRuntime(17039): Caused by: java.lang.NullPointerException
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 com.rezoluz.planesim.Scanner.getFiles(Scanner.java:11) 04-20
 15:29:24.478: E/AndroidRuntime(17039):     at
 com.rezoluz.planesim.ShortcutListActivity.onCreate(ShortcutListActivity.java:19)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
 04-20 15:29:24.478: E/AndroidRuntime(17039):   ... 11 more 
```

我可以看到它引用了这个：`gameList.add("testo7r");`还有这个和这个，`scanner.getFiles();`但我没有看到那里的问题，请帮忙！感谢您的时间和帮助，zeokila。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:36:47.230

你忘了初始化..所以它必须是一个空指针异常......

```
public class Scanner {

    public ArrayList<String> gameList = new ArrayList<String>();
    public String[] gameListFin;

    public void getFiles() {
        gameList.add("testo7r");
        gameList.add("test5or");
        gameList.add("te4stor");
        gameList.add("tes3tor");
        gameList.add("testo2r");
        gameListFin = gameList.toArray(new String[gameList.size()]);
    }

} 
```

# c++ - 为什么运算符重载行为如此奇怪

> ID：10247327
> 
> 赞同：1
> 
> 时间：2012-04-20T13:34:17.280
> 
> 标签：c++, operator-overloading

Hello Friend 下面程序的输出很奇怪。我不明白原因。![在此处输入图像描述](../Images/5fde2354db0494819a3f5205a500a3c7.png)

```
#include <iostream>
using namespace std;

class xyz
{
    private:
    int ab, cd;
    public:
    xyz()
    {

    }
    xyz(int i, int j)
    {
        ab = i;
        cd = j;

    }
    xyz operator+(xyz);
    void show()
    {
        cout << ab << " ....  "<< cd;
    }

};
xyz xyz :: operator +(xyz ob)
{
    xyz temp;
    temp.ab = ab + temp.ab;
    temp.cd = cd + temp.cd;
    return temp;
}

int main()
{
   // xyz xy, yz;

   xyz xy(2, 3);
   xyz yz(4, 5);
    xy = xy + yz;

    xy.show();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:37:40.517

复制粘贴错误？

这

```
temp.ab = ab + temp.ab;
temp.cd = cd + temp.cd; 
```

应该

```
temp.ab = ab + ob.ab;
temp.cd = cd + ob.cd; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:37:05.017

在 中`operator+()`，`xyz temp;`未初始化并包含该位置发生的任何垃圾。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T13:37:55.380

```
xyz xyz :: operator +(xyz ob) 
```

您不使用 ob 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T13:55:18.767

临时对象刚刚创建并使用随机值初始化，并且代码只是添加到它。

```
xyz xyz :: operator +(xyz ob)
{
xyz temp;
temp.ab = ab + ob.ab;
temp.cd = cd + ob.cd;
return temp;
} 
```

输出：

6..8

# javascript - 如何将值从字段集选择选项传递到字段集复选框

> ID：10247328
> 
> 赞同：0
> 
> 时间：2012-04-20T13:34:23.377
> 
> 标签：javascript, jquery

我还是 Javascript 和 Jquery 的新手，并且在这方面遇到了一些麻烦。

我希望能够将带有选择选项的字段集（#a）中的值传递给带有复选框选项的另一个字段集（#b）。例如，字段集#a 具有默认选项 1、2、3、4、5。Fieldset #b 可以有更多选项，但至少必须包含来自 #a 的默认值。

字段集#a 的代码片段：

```
 <fieldset id="a">
        <legend><span>Default Option</span></legend>  
        <div class="fieldset_wrapper">
          <select name="form_default">
            <option value="">Select One</option>
            <%=returnValueMap.get("defaultOptionSelect")%>

          </select>
        </div>
      </fieldset> 
```

字段集#b的代码片段：

```
 <fieldset id="b">
         <legend><span>Option</span></legend>
            <div class="fieldset_wrapper">
              <div><input type="checkbox" name="select-all" id="select-all" class="checkAll"/>   All Options</div>

        <%=returnValueMap.get("optionSelect")%>

        </div>
      </fieldset> 
```

编辑，这是我尝试过的东西，但我认为我显然遗漏了一些东西。再次，我正在尝试学习这些东西

```
 $('#a option[name="form_default"]:selected').each(function(){   
                            $('#b input[type="checkbox"]').eq($(this).index()).prop('checked',true);
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:44:51.057

```
$('#a select').on('change', function(e){
  e.preventDefault()
  $('#b input[type="checkbox"][value="'+$(this).val()+'"]').prop("checked",true);  
}) 
```

小解释：

*   监视更改并在更改时调用函数`$('#a select').on('change', function(e){`
*   您在这里并不真正需要它，通常是删除默认行为，例如它可以防止更改链接上的页面：`e.preventDefault()`
*   我们在选择框中取选定的值：`$(this).val()`
*   我们使用 Type 和 Value 选择相应的复选框，例如：`#b input[type="checkbox"][value="value selected in select box"]`
*   选中复选框：`.prop("checked",true)`

可以帮助你

**编辑：**如果您想要默认选择的选项，请`b`在页面加载时转到：

```
jQuery(function($){
  $('#b input[type="checkbox"][value="'+$('#a select').val()+'"]').prop("checked",true);
}); 
```

# apache-flex - 以弹性形式在标签附近对齐星号标记？

> ID：10247331
> 
> 赞同：0
> 
> 时间：2012-04-20T13:34:37.487
> 
> 标签：apache-flex, flex3

我必须在我的应用程序中为必填字段添加 * 标记。我已经通过代码做到了这一点

```
<mx:VBox>
    <mx:Form>
        <mx:FormItem label="Name" required="true">
            <mx:TextInput id="Name" width="200" editable="true"/>
        </mx:FormItem> 
        <mx:FormItem label="priority" required="true">
            <mx:ComboBox id="priorityId" width="200" cornerRadius="4" dataProvider="{customerPriorityList}" />         
        </mx:FormItem>
    </mx:Form>
<mx:VBox> 
```

但问题是 * 标记靠近文本输入字段或组合框附近。但我只希望根据我的申请在标签附近使用 * 标记。我尽力了，但失败了。有什么办法？？？

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T11:15:55.693

试试这个

```
<mx:Form width="30%">
    <mx:HBox horizontalGap="0">
        <mx:Label text="First Name"/>
        <mx:Label width="11" color="0xFF0000" text="*"/>
        <mx:Spacer width="20"/>
        <mx:TextInput/>
    </mx:HBox>
</mx:Form> 
```

# javascript - javascript 属性不可枚举仍然由 for... in

> ID：10247332
> 
> 赞同：4
> 
> 时间：2012-04-20T13:34:39.250
> 
> 标签：javascript, enumerable

我正在编写一个小的 javascript 库：我定义了一个`Item`对象，然后添加了一个函数，`Item.prototype.addNumber`最后我将其设置为不可枚举，但是如果我尝试使用`for...in`循环记录 Item 的方法，该函数仍然会出现。这是我的代码，我做错了吗？（在 Chrome 18 和 Firefox 11 上测试）

```
function Item() {
    ...
}

Item.prototype.addString= function() {
    ...
}

Object.defineProperty(Item, "addString", { enumerable: false }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:37:07.900

您正在定义属性 on`Item`而不是 on `Item.prototype`。

```
Object.defineProperty(Item.prototype, "addString", { enumerable: false }); 
```

* * *

如果您*最初*添加`Object.defineProperty`到，那么您可以同时显式（*或隐式）*设置属性描述符......*`addString``Item.prototype`*

 **这将隐式设置`enumerable:false`，以及`false`for`configurable`和`writable`。

```
Object.defineProperty(Item.prototype, "addString", { 
    value: function() {
        ...
    }
}); 
```

或者，如果你只想`enumerable`成为`false`，你可以这样做......

```
Object.defineProperty(Item.prototype, "addString", { 
    value: function() {
        ...
    },
    configurable: true,
    writable: true
//  ,enumerable: false  // uncomment to be explicit, though not necessary
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:37:23.653

您正在`addString`直接在`Object`（不可枚举的）上定义一个属性（），在的原型上定义另一个`addString`（默认情况下可枚举） 。`Item`

A`for ( in )`迭代原型链上的属性，这就是它出现在那里的原因。**

# powershell - Powershell 查找 7 天后到期的用户

> ID：10247334
> 
> 赞同：7
> 
> 时间：2012-04-20T13:34:47.307
> 
> 标签：powershell, active-directory, pattern-matching, user-accounts

我正在尝试运行一个查询在 7 天内过期的帐户的 powershell 脚本，我目前有

> $a = (get-date).AddDays(7) ; 搜索-ADAAccount -AccountExpiring -TimeSpan "7" | 选择对象 SamAccountName,AccountExpirationDate | 排序对象 AccountExpirationDate | 导出-CSV 7_days.csv

但是，当我进行以下更改时，似乎遇到了一些麻烦，我最终得到了一个空的 CSV 文件。最终我希望帐户在 7 天内到期，而不是更多，而不是更少。

> $a = (get-date).AddDays(7) ; 搜索-ADAAccount -AccountExpiring -TimeSpan "7" | 选择对象 SamAccountName,AccountExpirationDate | 排序对象 AccountExpirationDate | Where-Object {$_.AccountExpirationDate -like $a } | 导出-CSV 7_days.csv

有人可以让我知道我做错了什么吗？我曾尝试移动 "Where-Object {$_.AccountExpirationDate -like $a } " 块，或 "-match" 而不是 "-like" ，但是这些并没有让我取得太大的成功。我哪里错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T16:43:26.950

更新：如果您传递一个字符串值，您可以获得帐户，传递一个整数将时间跨度初始化为 7 个滴答声！

```
Search-ADAccount -AccountExpiring -TimeSpan "7" 
```

其他有效选项：

```
Search-ADAccount -AccountExpiring -TimeSpan (New-TimeSpan -Days 7)
Search-ADAccount -AccountExpiring -TimeSpan ([TimeSpan]::FromDays(7)) 
```

* * *

可能是一个错误，它对我也不起作用。这是一个解决方法：

```
$NeverExpires = 9223372036854775807
$ExpringIn = (Get-Date).AddDays(7) 

Get-ADUser -Filter * -Properties accountExpires | 
Where-Object {$_.accountExpires -ne $NeverExpires  -and [datetime]::FromFileTime([int64]::Parse($_.accountExpires)) -lt $ExpringIn } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T16:46:22.827

使用的属性是`accountExpires`自 1600 年以来以 100 纳秒的数据包表示

```
PS C:\Windows\system32> Get-ADuser user1 -Properties accountExpires

accountExpires    : 129821976000000000
DistinguishedName : CN=user1 users,OU=OUTest,DC=dom,DC=fr
Enabled           : True
GivenName         : user1
Name              : user1 users
ObjectClass       : user
ObjectGUID        : b1bef798-8e36-45ff-ad11-e79f89769efc
SamAccountName    : user1
SID               : S-1-5-21-3115856885-816991240-3296679909-1146
Surname           : Users
UserPrincipalName : user1@dom.fr 
```

您可以像这样将其转换为 [dateTime]：

```
PS> [datetime](Get-ADuser user1 -Properties accountExpires).accountExpires

mardi 22 mai 0412 22:00:00 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-26T09:28:36.630

尝试以下 PowerShell 命令

```
Search-ADAccount -AccountExpiring -TimeSpan 6.00:00:00 | FT Name,ObjectClass -A 
```

[https://technet.microsoft.com/en-us/library/ee617247.aspx](https://technet.microsoft.com/en-us/library/ee617247.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-28T16:28:11.873

虽然这是一个旧线程..让我添加一个快速说明和警告..

小心询问 7 天前的帐户。7 天 2 小时不是 7 天，因此与查询不匹配（可能是您的 CSV 为空的原因）。

因此，您将始终要说超过 7 天且少于 8 天（等）的帐户来捕获第 7 天内的所有内容。ETC...

此外，
***[datetime](Get-ADuser user1 -Properties accountExpires).accountExpires***
上面的代码给了我一个错误
***，无法将值“9223372036854775807”转换为“System.DateTime”。错误：“刻度必须介于 DateTime.MinValue.Ticks 和 DateTime.MaxValue.Ticks 之间。参数名称：刻度”***

您还可以查看[http://social.technet.microsoft.com/Forums/scriptcenter/en-US/b70113b1-a043-4543-afa0-dbba5757d035/powershell-windows-2008-getaduser-accountexpirationdate-returns-wrong-result?论坛=ITCG](http://social.technet.microsoft.com/Forums/scriptcenter/en-US/b70113b1-a043-4543-afa0-dbba5757d035/powershell-windows-2008-getaduser-accountexpirationdate-returns-wrong-result?forum=ITCG)

# css - 用于触摸屏的纯 CSS 分层菜单（iPad）

> ID：10247336
> 
> 赞同：2
> 
> 时间：2012-04-20T13:35:15.167
> 
> 标签：css, ipad, menu

是否可以创建适用于桌面和触摸屏浏览器的漂亮的多级菜单？没有任何js。由于触摸屏没有`:hover`属性，为两种变体创建一个样式表让我抓狂。在桌面上的行为应该是：悬停 - 打开子菜单，点击 - 转到链接。在 iPad 上：第一次点击 - 打开子菜单，第二次点击 - 转到链接。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:08:10.460

**使用纯 CSS**，目标`:hover`AND`:active`来完成你想要的。

在您的 iPhone/iPad 上试用此网站：www.thepricklepatch.com。它并不完美，但这就是我正在做的事情来创造我想要的效果。

**编辑：** 对不起，我花了这么长时间才回复 - 这个周末正在露营，不允许使用电脑！:) 这是该站点的 CSS，被剥离以获得您想要的位。我已经为你添加了评论。这里有一些我用来样式化菜单的空规则，并且我删除了任何处理纯外观并专注于元素定位的 CSS。

```
/* NAVIGATION ************************************************************************/

nav > ul > li
{
    display: inline-block; /* sets elems to be inline but retain block-like properties, you may not need this */
    position: relative; /* resets the positioning context */
    cursor: pointer; /* sets the mouse cursor to look like a link for menus that do not have an A element */
}

nav > ul > li:hover
{
    position: relative;  /* reset positioning context */
    z-index: 2000; /* bring element top-most */
}

nav > ul > li:hover,
nav > ul > li:hover > a /* HOVERED list elems and links in the main menu */
{
}

nav > ul > li,
nav > ul > li > a /* list elems and links in the menu */
{
}

nav > ul > li > div.submenu /* only first level of submenus */
{
    display: none; /* hide the submenus by default */
}

nav > ul > li:hover > div.submenu /* Only HOVERED OVER first level of submenus */
{
    display: block; /* display the submenus when the LI is hovered over */
    position: absolute; 
    top: 100%; /* set to the bottom of the menu */
    left: -1px; /* move left 1px from left of LI element */
    z-index: 1000; /* top most */
}

nav > ul div.submenu /* All submenus */
{
}

nav > ul div.submenu > ul /* All lists of links in a submenu */
{
    background: #fff;
    padding: 2px;
    border: solid 2px #f89d57;
}

nav > ul div.submenu > ul > li, /* All list elements in any submenu */
nav > ul div.submenu > ul > li > a /* All list elements containing links in any submenu */
{
}

nav > ul div.submenu > ul > li
{
}

nav > ul div.submenu > ul > li > a
{
display: block; 
}

nav > ul div.submenu > ul > li,
nav > ul div.submenu > ul > li > a /* All links in any submenu */
{
}

nav > ul div.submenu > ul > li:hover /* All HOVERED li containing links in any submenu */
{
}

nav > ul div.submenu > ul > li:hover > a /* All links HOVERED in any submenu */
{
}

nav div.submenu > ul > li > div.submenu,
nav div.submenu > ul > li > a + div.submenu /* 2nd level of submenus and on */
{
    display: none; /* Hide by default submenus */
}

nav div.submenu > ul > li:hover div.submenu,
nav div.submenu > ul > li:hover a + div.submenu /* 2nd level submenus and on (if even used) */
{
    display: block; /* Show submenus when parent hovered */
    position: absolute; 
    top: -2px; 
    left: 75%; 
    z-index: 1000; 
}

nav li:hover
{
    position: relative; 
    z-index: 2000; 
} 
```

作为参考，这是我使用的 HTML：

```
 <nav>

        <ul>

            <li><a href="/index.aspx">Home</a></li>

            <li><a href="/shop-by.aspx">Shop By&hellip;</a>

                <div class="submenu">

                    <ul>

                        <li>Shop By Product

                            <div class="submenu">

                                <ul>

                                    <li><a href="/products.aspx?category=furniture">Furniture</a></li><li><a href="/products.aspx?category=bed-bath">Bed & Bath</a></li><li><a href="/products.aspx?category=decor-accents">Décor Accents</a></li><li><a href="/products.aspx?category=tabletops">Tabletops</a></li><li><a href="/products.aspx?category=rugs-curtains">Rugs & Curtains</a></li><li><a href="/products.aspx?category=home-office">Home Office</a></li>

                                </ul>

                            </div>

                        </li>

                        <li>Shop By Room

                            <div class="submenu">

                                <ul>

                                    <li><a href="/products.aspx?room=bathroom">Bathroom</a></li><li><a href="/products.aspx?room=bedroom">Bedroom</a></li><li><a href="/products.aspx?room=dining">Dining</a></li><li><a href="/products.aspx?room=kitchen">Kitchen</a></li><li><a href="/products.aspx?room=living-room">Living Room</a></li><li><a href="/products.aspx?room=media-office">Media & Office</a></li>

                                </ul>

                            </div>

                        </li>

                        <li>Shop By Color

                            <div class="submenu">

                                <ul>

                                    <li><a href="/products.aspx?color=black">Black</a></li><li><a href="/products.aspx?color=blue">Blue</a></li><li><a href="/products.aspx?color=brown">Brown</a></li><li><a href="/products.aspx?color=green">Green</a></li><li><a href="/products.aspx?color=orange">Orange</a></li><li><a href="/products.aspx?color=purple">Purple</a></li><li><a href="/products.aspx?color=red">Red</a></li><li><a href="/products.aspx?color=white">White</a></li><li><a href="/products.aspx?color=yellow">Yellow</a></li>

                                </ul>

                            </div>

                        </li>

                    </ul>

                </div>

            </li>

            <li><a href="/services.aspx">Services</a>

                <div class="submenu">

                    <ul>

                        <li><a href="/">Home Consultation</a></li>

                        <li><a href="/">Interior Design</a></li>

                        <li><a href="/">Floral Design</a></li>

                        <li><a href="/">Event Planning</a></li>

                    </ul>

                </div>

            </li>

            <li><a href="/galleries.aspx">Gallery</a>

                <div class="submenu">

                    <ul>

                        <li><a href="/">Rooms</a></li>

                        <li><a href="/">Floral</a></li>

                        <li><a href="/">Christmas</a></li>

                        <li><a href="/">Other Seasons</a></li>

                    </ul>

                </div>

            </li>

            <li><a href="/promotions.aspx">Promotions</a>

                <div class="submenu">

                    <ul>

                        <li><a href="/">Semi-Annual</a></li>

                        <li><a href="/">Sale</a></li>

                        <li><a href="/">Sale by Season</a></li>

                    </ul>

                </div>

            </li>

            <li><a href="/contact-us.aspx">Contact Us</a>

                <div class="submenu">

                    <ul>

                        <li><a href="/">Contact Info</a></li>

                        <li><a href="/">Comments</a></li>

                        <li><a href="/">Inquiries</a></li>

                    </ul>

                </div>

            </li>

            <li class="navWishList"><a href="/wish-list.aspx">Wish List</a></li>

        </ul>

    </nav> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:52:27.093

如果您的主菜单节点没有链接到任何地方，您可以使用 JavaScript 轻松完成此操作。您可以将其添加为可在触摸设备上使用的点击功能。

您也可以使用 :focus 和 :active 状态与兄弟选择器结合使用。这将允许菜单与键盘导航一起显示，这是一个优点，但您必须添加一些 JavaScript 以使其在您切换到子菜单链接时不会隐藏。

```
<ul>
    <li>
        <a class="menuLink" href="javascript:void(0);">Menu 1</a>
        <ul class="submenu">
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
        </ul>
    </li>
    <li>
        <a class="menuLink" href="javascript:void(0);">Menu 2</a>
        <ul class="submenu">
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
        </ul>
    </li>
    <li>
        <a class="menuLink" href="javascript:void(0);">Menu 3</a>
        <ul class="submenu">
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
        </ul>
    </li>
    <li>
        <a class="menuLink" href="javascript:void(0);">Menu 4</a>
        <ul class="submenu">
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
            <li><a href="page">Submenu Link</a></li>
        </ul>
    </li>
<ul> 
```

使用这样的 CSS：

```
.submenu { display:none; }
.menuLink:hover + .submenu,
.menuLink:focus + .submenu,
.menuLink:active + .submenu {
    display:block;
} 
```

[http://jsfiddle.net/vPM6W/](http://jsfiddle.net/vPM6W/)

# c# - 看起来 MSVS 11.0 Beta 破坏了 MSVS 10.0 安装

> ID：10247337
> 
> 赞同：14
> 
> 时间：2012-04-20T13:35:16.080
> 
> 标签：c#, .net, visual-studio-2010, msbuild, visual-studio-2012

安装 MSVS 11Beta 后，我的 MSVS 10 遇到了编译问题。现在，当我在 MSVS 10 中编译我的 C# 项目（在 MSVS 10 中创建的项目；目标框架：3.5）时，我收到错误`MSB4216`，`MSB4028`输出窗口中有以下文本：

```
1>Task "GenerateResource" skipped, due to false condition; ('%(EmbeddedResource.Type)' == 'Resx' and '%(EmbeddedResource.GenerateResource)' != 'false' and '$(GenerateResourceMSBuildRuntime)' != 'CLR2') was evaluated as ('Resx' == 'Resx' and '' != 'false' and 'CLR2' != 'CLR2').
1>Task "GenerateResource"
1>  Launching task "GenerateResource" from assembly "Microsoft.Build.Tasks.v3.5, Version=3.5.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" in an external task host with a runtime of "CLR2" and a process architecture of "x86".
1>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2199,5): error MSB4216: Could not run the "GenerateResource" task because we could not create or connect to a task host with runtime "CLR2" and architecture "x86".  Please ensure that (1) the requested runtime and/or architecture are available on the machine, and (2) that the required executable "C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NetFX 4.0 Tools\MSBuildTaskHost.exe" exists.
1>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(2217,7): error MSB4028: The "GenerateResource" task's outputs could not be retrieved from the "FilesWritten" parameter. Object does not match target type.
1>Done executing task "GenerateResource" -- FAILED. 
```

我该如何解决这些错误？

***编辑：***

1.  提到的文件“C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NetFX 4.0 Tools\MSBuildTaskHost.exe”存在。
2.  C++ 项目编译没有问题。
3.  重新安装 VS10 并不能解决问题。
4.  这是`GenerateResource`任务，必须编译 resx 文件，但会生成异常：

`<!-- But we can't use those parameters if we're targeting 3.5, since we're using the 3.5 task -->`

```
<GenerateResource
    Sources="@(EmbeddedResource)"
    UseSourcePath="$(UseSourcePath)"
    References="@(ReferencePath)"
    AdditionalInputs="$(MSBuildAllProjects)"
    NeverLockTypeAssemblies="$(GenerateResourceNeverLockTypeAssemblies)"
    StateFile="$(IntermediateOutputPath)$(MSBuildProjectFile).GenerateResource.Cache"
    StronglyTypedClassName="%(EmbeddedResource.StronglyTypedClassName)"
    StronglyTypedFileName="%(EmbeddedResource.StronglyTypedFileName)"
    StronglyTypedLanguage="%(EmbeddedResource.StronglyTypedLanguage)"
    StronglyTypedNamespace="%(EmbeddedResource.StronglyTypedNamespace)"
    StronglyTypedManifestPrefix="%(EmbeddedResource.StronglyTypedManifestPrefix)"
    PublicClass="%(EmbeddedResource.PublicClass)"
    OutputResources="@(EmbeddedResource->'$(IntermediateOutputPath)%(ManifestResourceName).resources')"
    MSBuildRuntime="$(GenerateResourceMSBuildRuntime)"
    MSBuildArchitecture="$(GenerateResourceMSBuildArchitecture)"
    Condition="'%(EmbeddedResource.Type)' == 'Resx' and '%(EmbeddedResource.GenerateResource)' != 'false' and '$(GenerateResourceMSBuildRuntime)' == 'CLR2'"> 
```

1.  我尝试[调试](http://blogs.msdn.com/b/visualstudio/archive/2010/07/06/debugging-msbuild-script-with-visual-studio.aspx)MSBuild 脚本 ( `.csproj`)。就在致命`GenerateResource`任务之前，我检查了所有*属性*和*项目*。没有“8.0A”，只有“7.0A”

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-10T16:15:06.100

有一个丑陋的方法来解决这个问题：重命名文件夹`"C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A"`。我讨厌接受这个答案。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-20T16:17:58.317

你的用户名有多长？

用户名长度为 20 个字符时似乎存在错误。如果您的用户名是 19 个字符或更少，则可以正常工作。

我在[connect](https://connect.microsoft.com/VisualStudio/feedback/details/758772/generateresource-fails-for-net-3-5-application-when-net-4-5-has-been-installed)上打开了一个问题。

**编辑：**`DisableOutOfProcTaskHost`您是否尝试按照连接问题中的建议 将环境变量设置为 true，这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T13:06:03.477

另一个可能的解决方法是将项目的目标框架更改为 .Net 4.0。这并不总是一个解决方案，但如果所有其他方法都失败了，它肯定是有可能的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:35:57.597

在 MSDN 论坛上提出了类似的问题。安装VS11后重启了吗？

[http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/7d955d96-ff73-47d3-8830-85ea321eb4ab](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/7d955d96-ff73-47d3-8830-85ea321eb4ab)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-05T17:15:54.917

在安装 VS2010 然后安装 .NET Framework 4.5 后，我的 TFS 2010 构建服务器上出现了这个问题。这允许我构建 .NET 4.5 项目，但我尝试构建的任何针对 CLR2 (.NET 2.0 -3.5) 的 VS2008 项目都会返回错误。少数几个谈论这个问题的网站上的建议都没有奏效。

1.  重新启动 - 没有解决问题
2.  在环境变量和项目文件中设置 DisableOutOfProcTaskHost = true - 没有解决问题
3.  我的构建帐户的用户名已经少于 20 个字符
4.  重命名 windows SDK 文件夹 - 不适用，因为我没有安装 VS2012 和 8.0A SDK...只是 .NET 框架 4.5。

无论如何，为了解决这个问题，我卸载了 .NET 4.5，修复了 VS2010，然后重新启动了构建服务器。现在我可以毫无问题地构建 VS2008 和 VS2010 项目。

幸运的是，我不再需要构建 .NET 4.5 项目，因为该团队决定回到 .NET 4.0。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-14T14:09:58.470

`DisableOutOfProcTaskHost = true`在环境变量中设置设置对我有用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-20T21:20:44.250

就我而言，我在尝试在 32 位 Windows 7 机器上构建解决方案时收到了该错误消息。为我解决错误的方法是右键单击项目，选择属性，然后转到构建选项卡。在这里，我将“平台目标”从“任何 CPU”更改为“x86”。高温高压

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-29T15:43:16.293

为我工作：删除有问题的文件夹的 bin 和 obj 文件夹并重新启动解决方案

# android - SharedLib 依赖@混合模式 APK

> ID：10247340
> 
> 赞同：3
> 
> 时间：2012-04-20T13:35:30.780
> 
> 标签：android, ffmpeg, android-ndk

1.  我正在构建一个混合模式的Android项目，该项目使用的是原生ffmpeg
2.  库是
    2.1。libavutil.so -> libavutil.so.51
    2.2。libavcodec.so -> libavcodec.so.54
    2.3。libavformat.so -> libavformat.so.54

3.  我的 Java 代码包括以下 JNI 部分来加载本机库：
    static {
         System.loadLibrary("avutil");
         System.loadLibrary("avcodec");
         System.loadLibrary("avformat");
    }

4.  'libavcodec.so' 依赖于 'libavutil.so.51' 而**不是 'libavutil.so'。**

5.  运行我的活动时  *System.loadLibrary("avcodec");* 除了*“无法为'libavcodec.so'加载所需的库'libavutil.so.51'（找不到库'libavutil.so.51'）”*
6.  在我的 Android.mk 上，我有以下部分将本机库添加到 APK：

    include $(CLEAR_VARS)
    LOCAL_MODULE := mylib
    LOCAL_SRC_FILES := ../../../mylib/libmylib.so
    include $(PREBUILT_SHARED_LIBRARY )

7.  用 libmylib.so.%some number% 替换 libmylib.so 会导致构建失败，并显示 [LOCAL_SRC_FILES 应指向以“.so”结尾的文件]

    考虑到上述情况，我如何才能在没有依赖项的情况下加载 libavcodec问题 ？

    *   我可以修复 libavcodec.so 依赖项以指向 libavutil.so 而不是 libavutil.so.51 吗？

    *   我可以更改 Android.mk 以便能够打包 libavutil.so.51（非 .SO 扩展名）吗？然后它可以使用'System.loadLibrary'加载吗？

        **任何帮助将不胜感激！！！**

        索芬的纳达夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T10:15:18.840

解决方法是简单地使用静态库而不是动态库，但是，这是一种临时解决方法，因为由于 LGPL 限制，SharedLibs 对于商业用途是强制性的。

# objective-c - 如果用户的 Facebook 会话有效，如何重定向到另一个视图控制器？

> ID：10247345
> 
> 赞同：0
> 
> 时间：2012-04-20T13:35:44.407
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

我正在查看用户的 Facebook 会话是否有效，然后将其重定向到某个视图控制器。

```
 if ([facebook isSessionValid]) {
   NSLog(@"session is valid");

 } 
```

我也试过：

if ([facebook isSessionValid]) {

```
[self performSegueWithIdentifier:@"SessionIsValid" sender:self]; 
```

}

并将带有标识符“SessionIsValid”的故事板segue拖到我想要重定向到的viewController`Facebook isSessionValid`

我想知道我将如何去做这件事。我在启用 ARC 的应用程序中使用 Storyboard。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:41:16.193

In your storyboard create a segue from your current viewcontroller to wherever you want the user to go if the session is valid. Then, in your code above add something like:

`[self performSegueWithIdentifier:@"SessionIsValid" sender:self];`

You set the identifier by clicking on the segue that was created in the storyboard.

# c# - 字符串未被识别为有效的 DateTime

> ID：10247346
> 
> 赞同：0
> 
> 时间：2012-04-20T13:35:45.250
> 
> 标签：c#, session, datetime, exception-handling

我想在会话（date1）中添加一个日期，如下所示：

```
Session["DateLesson"] = date1.ToString("dd.MM.yyyy"); 
```

现在从会话中我想取这个值：

```
var asd = Session["DateLesson"];
/*asd = "20.04.2012"*/
var datelesson = DateTime.Parse((string) asd); 
```

它给了我这个例外：

> FormatException 未被识别为有效的 DateTime

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:37:44.640

在大多数语言环境中，句点不是有效/标准的分隔符。您需要结合使用 DateTime.ParseExact() 和格式字符串来告诉函数如何读取它。更重要的是，如果将它读回日期时间是您的主要目标，为什么不直接将日期时间放在会话中呢？**对我来说**，这似乎更有效、更容易、更易于维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:38:20.673

为什么将您的日期保留为字符串？

您可以像这样简单地存储它：

```
Session["DateLesson"] = date1; 
```

然后像这样检索它：

```
var datelesson = (DateTime)Session["DateLesson"]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:40:09.757

```
string value = "20.04.2012";
DateTime datetime = DateTime.ParseExact(value, "dd.MM.yyyy", null); 
```

这将返回`4/20/2012 12:00:00:00 AM`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:39:40.843

不要将值保留为字符串，而是作为初始类型的对象：

```
public DateTime? DateLesson
{
    get
    {
        DateTime? dateTime = Session["DateLesson"] as DateTime?;
        if (dateTime.HasValue) // not null
        {
            // use dateTime.Value
        }
    }
    set
    {
        Session["DateLesson"] = value;
    }
} 
```

# asp.net - 使用未知数量的变量为 SqlDataSource SelectCommand 设置 SelectParameter

> ID：10247348
> 
> 赞同：0
> 
> 时间：2012-04-20T13:35:54.497
> 
> 标签：asp.net, sql-server

```
<asp:SqlDataSource ID="workHourListSqlDataSource" runat="server" ConnectionString="<%$ ConnectionStrings:PlaningSystemConnectionString %>" 
     SelectCommand="SELECT *
                    FROM Date AS t1 FULL OUTER JOIN (SELECT * FROM WorkHoursEntry WHERE (WorkerID LIKE @WorkerID)) AS t2 ON t1.PKDate = t2.WorkDay 
                    LEFT OUTER JOIN Worker AS t3 ON t2.WorkerID = t3.WorkerID 
                    LEFT OUTER JOIN (SELECT * FROM Project WHERE ProjectID IN(@Project)) AS t4 ON t2.ProjectID = t4.ProjectID"
     FilterExpression="YearMonth IN({0})">
     <FilterParameters>
        <asp:ControlParameter ControlID="yearMonthFilterLabel" Name="YearMonth" 
                    PropertyName="Text" Type="String" />
     </FilterParameters>
     <SelectParameters>
        <asp:ControlParameter ControlID="WorkerIDLabel" Name="WorkerID" 
                    PropertyName="Text" Type="String" />
        <asp:ControlParameter ControlID="projectFilterLabel" Name="Project" 
                    PropertyName="Text" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

问候，我对 @Project ControlParameter 有疑问，问题是我不知道如何传递多个值，并且 FilterParameters 方法无法按我的意愿工作。有没有办法传递几个变量？（不使用 c#）。

```
projectFilterLabel.Text = 'aaa, bbb, ccc'; 
```

基本上我想要做的是从日期表中选择所有值并将它们与项目表中的一些值连接起来并输出到 DataList。

任何帮助表示赞赏，我刚开始学习 asp.net

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T19:46:49.967

我通过在事件中为 SqlDataSource 创建带有参数的新查询（替换旧查询）来解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T08:03:13.010

在您的 asp 表单中创建一个 javascript 函数来处理报告中窗口的打开。在此函数中，将参数 (var pPassParm) 值设置为 textbox.text（隐藏在您的父表单上）并在打开窗口时传递此值（ /reportfolder/report.asx?pPassparm ）

在您的执行代码上，创建一段代码，将所有参数连接成一个字符串（ textbox.text = 'StartDate = 2012/01/01, EndDate = 2012/02/01, Surname = Jones' 等），然后再打开新的报告的表格。

参考帖子[Open a new window and pass parameters to it vb.net asp](https://stackoverflow.com/questions/10224407/open-a-new-window-and-pass-parameters-to-it-vb-net-asp)

# c# - 我应该如何从 WCF 服务解决方案访问 SQL Server？

> ID：10247351
> 
> 赞同：2
> 
> 时间：2012-04-20T13:36:01.587
> 
> 标签：c#, .net, sql-server, wcf

我有一些访问 SQL Server 2005 的现有 WCF 代码，但老实说，我开始不信任该开发人员的方法，所以我想知道应该如何正确和专业地完成这项工作。我需要能够将 SQL 语句传递给返回结果数据集的方法（在 WCF 服务内，而不是来自客户端）（传递给 WCF 中调用它的方法，而不是客户端）。我对实体框架或其他抽象层不感兴趣。我需要运行 SQL、DML，希望也能运行 DDL。

我也想知道如何管理连接。

如果您愿意，请指出您对更好替代方案的想法。我准备听了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T13:58:12.943

老实说，您不应该*从 WCF 服务**访问**SQL Server***。

您应该*从 WCF Service**访问**数据***，而不知道底层有 SQL Server。

公开一个接受 SQL 语句的 web 服务对我来说绝对是一个糟糕的主意。出于多种原因（安全性...等），您不想将数据库暴露给服务的客户端。

您可以（应该）做的是编写一个服务来返回您实际想要返回的数据。例如：

```
[DataContract]
public class Customer
{
    [DataMember]
    public string Name { get; set; }
}

[ServiceContract]
public interface IService
{
    Customer GetCustomer(int customerId);
}

[ServiceBehavior]
public class Service
{
    [OperationContract]
    public Customer GetCustomer(int customerId)
    {
        // Insert DB-related implementation of your query:
        // - you could hard-code a SQL query
        // - you could use Entity-Framework or other ORM
        //
        // First, create your connection to your database
        // Then query
        // Then close your connection
        //
        // Example with SQL connection
        // Connection string comes from server configuration (app.config or whatever)
        using (SqlConnection cn = new SqlConnection(connectionString))
        {
            Customer res = new Customer();

            // query here

            Customer.Name = XXX;    // From DB result
        }
    }
} 
```

在客户端：

```
ServiceClient proxy = new ServiceClient();
Customer myCustomer = proxy.GetCustomer(42); 
```

您真的不应该考虑重用 SQL 连接。您的数据库的连接池将为您处理此问题。创建/关闭与数据库的连接是一项轻量级的操作。为每个 web 服务调用创建一个新连接将避免很多麻烦（连接生命周期......等等）。

**尽可能使用无状态服务**，它会为你节省大量时间（并发问题，对象生命周期管理......）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-20T13:51:21.840

*   将连接字符串保存在配置文件中。
*   尽可能多地连接到数据库，[连接池](http://en.wikipedia.org/wiki/Connection_pool)将负责您不必担心它。
*   `using`在处理 sql 连接时始终使用。

    `Using (sqlConn = new SqlConnection(ConnString)) { }`

*   制作自己的 POCO 以将结果返回给客户端，您可以将它们制作成单独的程序集并在两个项目（WCF 和客户端）中共享，也可以将它们添加到 WCF 并在客户端创建代理时您将可以访问它们。

这是一个示例布局：

```
public Poco Foo(long id)
{
    try
    {
        using (SqlConnection SqlConn = new SqlConnection(ConnString))
        {
            // execute your commands and do your stuff
            return Poco;
        }
    }
    catch (Exception ex)
    {
        Logger.Log(ex.ToString());
        return null;
    }
} 
```

**更新**

这是一个如何将“DataSet”返回给客户端的示例，我不推荐这样做，但它会起作用：

```
public DataSet Foo(long id)
    {
        try
        {
            using (SqlConnection SqlConn = new SqlConnection(ConnString))
            {
                SqlCommand sqlCmd = new SqlCommand("Select * From users where userid=@id", SqlConn);
                sqlCmd.Parameters.Add("@id", SqlDbType.BigInt).Value = id;
                DataSet ds = new DataSet();
                using (SqlDataAdapter da = new SqlDataAdapter(sqlCmd))
                {
                    da.Fill(ds, "Users");
                }

                return ds;
            }
        }
        catch (Exception ex)
        {
            Logger.Log(ex.ToString);
            return null;
        }
    } 
```

# git - TortoiseGit 不允许我访问我的 /trunk D：

> ID：10247354
> 
> 赞同：0
> 
> 时间：2012-04-20T13:36:04.767
> 
> 标签：git, github, msysgit, tortoisegit, trunk

我从我的 ssh 链接克隆/提交没有问题，但如果我要求 tortoiseGit 在 shhLink/trunk 上执行此操作，我会收到 128 错误。

《致命：远端意外挂断》

知道为什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T09:18:58.150

不知何故，我的钥匙没有得到妥善处理。

我不得不手动进入腻子配置，设置我的密钥并要求 tortoiseGit 让腻子决定做什么。

# ruby-on-rails - 选择适当的 Rails 会话存储

> ID：10247355
> 
> 赞同：3
> 
> 时间：2012-04-20T13:36:15.037
> 
> 标签：ruby-on-rails, session, cookies

我目前正在使用基于 memcached 的会话存储（[https://github.com/mperham/dalli](https://github.com/mperham/dalli)）。有时 memcached 服务器不可用（“没有可用的服务器”），然后我的用户将无法再使用该应用程序。目前我怀疑基于 memcached 的会话是否是正确的决定。

由于我在会话中只存储很少的密钥，我正在考虑切换回 cookie 存储。还是我应该考虑使用 ActiveRecord 存储？有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:40:12.260

如果您在会话中存储的密钥很少，我显然认为您应该使用 Cookie 存储。

对于这种基本需求，它更容易维护。

该指南对此有一些建议： http: [//guides.rubyonrails.org/action_controller_overview.html#session](http://guides.rubyonrails.org/action_controller_overview.html#session)

# javascript - 将事件从子元素复制到不同的 div

> ID：10247356
> 
> 赞同：0
> 
> 时间：2012-04-20T13:36:15.037
> 
> 标签：javascript, jquery, events

我正在尝试将 div 内容从一个地方复制到另一个地方，为此我正在使用类似的东西：

```
$('#newDiv').html($('#oldDiv').html()); 
```

问题是某些子元素使用 bind() jquery 方法附加了事件。我还想将这些事件复制到新位置。

关于如何进行此“事件复制”的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:38:47.853

### 描述

您在复制内容的那一刻就创建了动态内容。

您需要 jQuery`.live()`或`delegate()`方法将事件绑定到动态创建的 html。

选择`.live()`或`delegate()`取决于您使用的 jQuery 版本。

> **.live()**从 jQuery 1.3 开始可用。为现在和将来匹配当前选择器的所有元素附加一个事件处理程序。
> 
> **.delegate()**从 jQuery 1.4.2 开始可用。根据一组特定的根元素，将处理程序附加到现在或将来与选择器匹配的所有元素的一个或多个事件。

查看我的示例和这个[jsFiddle 演示](http://jsfiddle.net/VzDyg/)

### 样本

```
<div id="newDiv"></div>
<div id="oldDiv"><a>click me</a></div>​

​$("a").live("click",function() {
   alert("click"); 
});​

// copy content
$('#newDiv').html($('#oldDiv').html()); 
```

​</p>

### 更多信息

*   [jQuery.live()](http://api.jquery.com/live/)
*   [jQuery.delegate()](http://api.jquery.com/delegate/)
*   [jsFiddle 演示](http://jsfiddle.net/VzDyg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:39:25.137

如果您使用 jquery Clone 方法，您可以设置一个参数来指定是否要保留事件...查看：[http ://api.jquery.com/clone/](http://api.jquery.com/clone/)

它应该做得很好。

# android - 在android中安装具有管理权限的应用程序

> ID：10247357
> 
> 赞同：0
> 
> 时间：2012-04-20T13:36:17.293
> 
> 标签：android

我们可以在android中安装一个具有管理权限的应用程序。这是很有可能的。安装应用程序后，会出现一个活动，显示“如果我们要激活管理权限？”

但我的疑问是，我希望以管理权限安装应用程序，而无需用户明确点击激活（安装应用程序时出现）。

实际上在我的应用程序中，没有活动，主类正在扩展应用程序。在它的 onCreate() 中，我提供了将其安装为管理权限应用程序的必要代码。该应用程序正在安装，它甚至被列在

选择设备管理员（设置->位置和安全->选择设备管理员）

但是，安装后默认不勾选。我可以在安装过程中默认检查吗？

希望我足够清楚。提前致谢。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:48:23.277

> 我可以在安装过程中默认检查吗？

不，对不起。

> 我希望以管理权限安装应用程序，而无需用户明确单击激活（安装应用程序时出现）。

那将是一个巨大的安全漏洞。

# oracle - 如何让 refcursor 结果/输出显示为文本？

> ID：10247363
> 
> 赞同：0
> 
> 时间：2012-04-20T13:36:44.647
> 
> 标签：oracle, stored-procedures, plsql, sys-refcursor

我正在尝试在 Oracle 中调用一个存储过程并显示调用结果，问题是它崩溃`FETCH v_cur into v_a;`并出现错误：`ORA-06504: PL/SQL: Return types of Result Set variables or query do not match.`

我猜查询的输出不匹配`v_a VARCHAR2(100)`，但我不知道该放什么。被调用的存储过程连接了几个表，并选择了属于不同表的 20 多个不同的列。所以我想要的是只查看查询的输出，而不必分别引用每个结果列。我将如何去做？

我正在使用 SQL Navigator（我猜不是那么重要）。

```
DECLARE 
  v_cur SYS_REFCURSOR;
  v_a   VARCHAR2(100);
BEGIN
   pkg_get_results.get_rows(v_cur,to_date('2012/04/12', 'yyyy/mm/dd'),to_date('2012/04/12', 'yyyy/mm/dd'), '','','','');
  LOOP
    FETCH v_cur into v_a;  -- what to put here ?
    EXIT WHEN v_cur%NOTFOUND;
    dbms_output.put_line(v_a );
  END LOOP;
  CLOSE v_cur;
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T17:25:40.983

SQL Navigator 确实有能力为您做到这一点。如何做到这一点完全取决于您的 Navigator 版本，并且可以想象（尽管我不知道）某些版本可能没有它。

说明可以在这个线程中找到：[http ://sqlnavigator.inside.quest.com/thread.jspa?threadID=2466](http://sqlnavigator.inside.quest.com/thread.jspa?threadID=2466)

顺便说一句，蟾蜍也有这种能力。

# javascript - 在 JavaScript/JQuery 中实现实时搜索的突出显示功能

> ID：10247368
> 
> 赞同：5
> 
> 时间：2012-04-20T13:36:54.490
> 
> 标签：javascript, jquery, html

我正在尝试为实时搜索实现突出显示功能。

我所做的是，发送一个带有用户寻找的令牌的 ajax 请求。我收到一个包含表格的 html 文本。

所以我想我可以使用一个简单的正则表达式，寻找用户令牌，然后用一个跨度包围它，但我收到了一些长填充`<a>`的 - 标签，所以很有可能用户输入了一些东西，我通过替换里面的东西来破坏我的 HTML一个标签。

那么如何在搜索中排除 html 标签？

哦，我正在使用 javascript 正则表达式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T23:20:43.573

您需要加载[jQuery highlight](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)插件，然后您可以执行以下操作：

```
var words = "keyword1,keyword2,keyword3";
var keywords = words.split(',');
for(var i = 0; i < keywords.length; i++) {
    $(selector).highlight($.trim(keywords[i]));
} 
```

如果您想在整个页面中突出显示，则替换`selector`为`'body'`，否则使用选择器作为所需元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T04:49:12.323

```
//These results to be highlighted
var results = [];
results[0] = 'jquery';
results[1] = 'json';
results[2] = 'Java Script';
results[3] = 'java';
results[4] = 'java Update';
results[5] = 'javelin';
results[6] = 'James';
results[7] = 'jacob';
results[8] = 'Jail';
results[9] = 'Jailor';

jQuery(document).ready(function(){
    //Search the results
    jQuery('#search').live('keyup', function(event){
        var term = jQuery(this).val();//keyword to be matched
        var htm = '';

        //Keys with codes 40 and below are special (enter, arrow keys, escape, etc.), Key code 8 is backspace.
        if(event.keyCode > 40 || event.keyCode <91  || event.keyCode == 8 ||
          event.keyCode == 20 || event.keyCode == 16 || event.keyCode == 9 ||
          event.keyCode == 37 || event.keyCode == 38 || event.keyCode == 39 ||
          event.keyCode == 40) {
            for(x in results){
                var match = results[x];
                if(match.toLowerCase().indexOf(term.toLowerCase()) != -1){
                    var o = '<b><u>'+term+'</u></b>';
                    var a = match.replace(term, o);
                    htm += '<li>'+a+'</li>';
                }
            }
            //create a orderd list for the matched results
            var output = '<ol>' + htm + '</ol>';
            if (htm.length > 0) {
                jQuery('#result').show().append(output);
            }
        }
    });
}); 
```

完整的教程可以在这里找到：[http ://www.webspeaks.in/2012/09/live-text-search-highlight-using.html](http://www.webspeaks.in/2012/09/live-text-search-highlight-using.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T08:19:59.887

不确定 jQuery 插件的效果如何，这是我想出的脚本，但没有突出显示多个标签上的文本。如果我想突出显示“我的脚本”并且 html 看起来像“我的脚本”，那么它不会被突出显示。还在做那部分。

这是到目前为止的脚本：

```
str='<img src="brown fox.jpg" title="The brown fox" />'
    +'<p>some text containing fox. And onother fox.</p>'
var word="fox";
word="(\\b"+ 
    word.replace(/([{}()[\]\\.?*+^$|=!:~-])/g, "\\$1")
        + "\\b)";
var r = new RegExp(word,"igm")
str.replace(/(>[^<]+)/igm,function(a){
    return a.replace(r,"<span class='hl'>$1</span>");
}) 
```

# sql-server - 创建架构后 SQL Server 未应用权限

> ID：10247370
> 
> 赞同：0
> 
> 时间：2012-04-20T13:36:59.227
> 
> 标签：sql-server, sql-server-2008

考虑以下;

```
USE [$(db_name)]
GO

IF SCHEMA_ID('$(schema_name)') IS NULL
    -- Must use dynamic SQL because 'CREATE SCHEMA' must be the first
    -- statement in a query batch.
    EXECUTE('CREATE SCHEMA [$(schema_name)]')

-- User already exists at this point.
GRANT SELECT, EXECUTE ON SCHEMA::[$(schema_name)] TO [$(user_name)] 
```

通过 执行时`sqlcmd.exe`，不会报错并创建模式，但不授予权限。如果我然后执行 SSMS 中的最后一行（替换`sqlcmd`变量），它会按预期工作。

SQL Server 不按我的要求做是有原因的吗？

**编辑：**应该说，它是 SQL Server 2008 (10.50.1617)。

**编辑2：**哦，上帝​​，原来部署框架正在删除并重新创建用户。感谢您的所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:41:47.280

原来有问题的数据库用户被删除，然后在部署过程中稍后重新创建。这就解释了为什么没有错误，为什么我在没有抱怨`sqlcmd.exe`之前添加的存在检查，以及为什么之后手动运行按预期工作。`GRANT``GRANT`

# linux-kernel - 将硬件连接到计算机时如何创建设备节点？

> ID：10247373
> 
> 赞同：1
> 
> 时间：2012-04-20T13:37:01.517
> 
> 标签：linux-kernel, linux-device-driver, hotplugging

我想知道当硬件连接到系统时如何创建设备节点。

### 我知道的信息：

当一个硬件连接到系统时，将设备名称与驱动程序名称进行比较，如果匹配，则调用probe。

### 我想知道的信息：

设备节点是在什么时候创建的，谁在创建它？（换句话说，我想知道 mknod 发生在哪里？）

这件事困扰了我好几个月。请以编程方式告诉我这是在哪里发生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:52:01.247

在大多数（但不是全部！）Linux 系统上，这由[Udev](http://en.wikipedia.org/wiki/Udev)处理。

它通过 netlink 套接字通知新硬件。然后它根据其配置创建设备节点。

# facebook - Facebook 的“页面消耗”指标到底是什么意思？

> ID：10247379
> 
> 赞同：1
> 
> 时间：2012-04-20T13:37:22.753
> 
> 标签：facebook, facebook-graph-api

页面消耗 - 人们点击您的任何内容而不生成故事的次数（总数）。每日、每周、每月，按消费类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:28:47.827

这是指人们点击您页面上发布的内容而没有在他们自己的提要中生成帖子的次数。

例如，我可能点击了您页面上的链接，但没有在我自己的提要中共享该链接（这样与您的内容相关的任何内容都不会出现在我的提要中）。这算作消费而不是产生故事。

# python - QObject 导数中的变量访问怪异

> ID：10247381
> 
> 赞同：7
> 
> 时间：2012-04-20T13:37:30.053
> 
> 标签：python, qt4, python-3.x, pyside

下面的代码应该打印同样的东西 3 次。为什么不呢？

```
from PySide.QtCore import QObject

class A(QObject):
    instance = 1

    @classmethod
    def test(cls):
        cls.instance  # Remove this line and it prints the right thing
        cls.instance = cls()
        print(cls.__dict__['instance'])
        print(cls.instance)
        print(type.__getattribute__(cls, 'instance'))

A.test() 
```

预期结果：

```
<__main__.A object at 0x1310c20>
<__main__.A object at 0x1310c20>
<__main__.A object at 0x1310c20> 
```

实际结果：

```
<__main__.A object at 0x2242878>
1
1 
```

QObject 背后的元类甚至没有覆盖**getattribute**，所以我怎么可能没有用“cls.instance”取回 A 实例？

更奇怪的是，在分配它之前不访问该属性（参见注释的代码行）使其工作正常。

我可以复制如下（使用 PySide 1.1.0）：

*   Windows 7 64 位，Python 2.7.1 32 位：有效
*   Windows 7 64 位，Python 2.7.3 32 位：有效
*   Windows 7 64 位、Python 3.2.3 32 位：失败
*   Ubuntu 11.10 64 位，Python 2.7.2+：有效
*   Ubuntu 11.10 64 位，Python 3.2.2：失败

**更新：**我设法在 Ubuntu 上的 Python 3.2.2 上编译 PySide 1.1.1，但它并没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T20:57:30.680

我可以在 Python 3.2.3 / PySide 1.1.0、Ubuntu 12.04 上确认这一点。在同一安装上与 PyQt4 一起使用。

这无疑是 PySide 中的一个错误。如果您还没有这样做，您应该提交错误报告。

如果我只是稍微改变一下这个例子，这个例子甚至会出现段错误：

```
from PySide.QtCore import *

class A(QObject):
    instance = []

    @classmethod
    def test(cls):
        print(cls.instance)
        cls.instance = cls()
        print(cls.__dict__['instance'])
        print("still ok")
        print(cls.instance)
        print("you won't see me")
        print(type.__getattribute__(cls, 'instance'))

A.test() 
```

# javascript - 与计算输入提示的填充字段冲突。有什么解决办法吗？

> ID：10247396
> 
> 赞同：0
> 
> 时间：2012-04-20T13:38:27.743
> 
> 标签：javascript, jquery, forms, field, hints

我有一个脚本来计算填写的字段数。效果很好。但我发现脚本只计算没有输入提示的字段。有什么解决办法吗？

[http://jsbin.com/oguzaj/4](http://jsbin.com/oguzaj/4)

计数字段的脚本：

```
$(document).ready(function () {
    (function ($) {

        $('#form_register').on('keyup change', function () {
            var number = 0;
            $(this).find('input, textarea').each(function () {
                if (this.value !== '') {
                    $('.input_count').val(number++);
                }
            });
        });

    })(jQuery);

}); 
```

输入提示的脚本：

```
(function ($) {
    $.fn.hint = function (blurClass) {
        if (!blurClass) {
            blurClass = 'blur';
        }
        return this.each(function () {
            var $input = $(this),
                title = $input.attr('title'),
                $form = $(this.form),
                $win = $(window);

            function remove() {
                if ($input.val() === title && $input.hasClass(blurClass)) {
                    $input.val('').removeClass(blurClass);
                }
            }
            if (title) {
                $input.blur(function () {
                    if (this.value === '') {
                        $input.val(title).addClass(blurClass);
                    }
                }).focus(remove).blur();
                $form.submit(remove);
                $win.unload(remove);
            }
        });
    };
})(jQuery);

$(function () {
    $('input[title!=""]').hint();
    $('textarea[title!=""]').hint();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:44:24.383

```
$(document).ready(function() {
        $('#form_register').on('keyup change', function() {
            var number = 0;
            $(this).find('input, textarea').each(function() {
                if ($(this).val() && !$(this).hasClass('blur')) {
                    $('.input_count').val(number++);
                }
            });
        });

}); 
```

**编辑：** 如果您有一个填充一个字段的按钮，则需要将其添加到按钮中。

```
$(buttonSelector).on('click', function() {
    var number = 0;
    $('#form_register').find('input, textarea').each(function() {
        if ($(this).val() && !$(this).hasClass('blur')) {
            $('.input_count').val(number++);
        }
    });
}); 
```

# validation - 页面验证

> ID：10247403
> 
> 赞同：1
> 
> 时间：2012-04-20T13:38:44.413
> 
> 标签：validation, xpages

这可能很简单我正在尝试添加基于另一个字段的验证在公式语言中：@If(Desinfect_1 = "" & Desinfect = "Désinfection de chambre" ;@Failure("Veuillez cocher départ ou levée");@成功）

在 Xpages 中，我尝试了验证表达式：

```
<xp:inputText value="#{document1.chambre}" id="chambre1">
<xp:this.rendered><![CDATA[#{javascript:getComponent ("Desinfect1").getValue() ==    "Désinfection de chambre"}]]></xp:this.rendered>
<xp:this.validators>
<xp:validateExpression
message="err">
<xp:this.expression><![CDATA[#{javascript:if (GetComponent ("Desinfect1").getValue() == "Désinfection de chambre" & GetComponent ("Chambre1").getValue() == ""){
return false;
} 
else {
return true;
}}]]></xp:this.expression>
</xp:validateExpression>
</xp:this.validators>
</xp:inputText> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:47:36.580

当您在 javascript 中执行 AND 的逻辑运算符时，您必须使用 &&

```
<xp:this.validators>
    <xp:validateExpression message="err">
        <xp:this.expression> 
            <![CDATA[#{javascript: if (getComponent("Desinfect1").getValue() == "Désinfection de chambre" && getComponent("Chambre1").getValue() == ""){ return false; } else { return true; }}]]> 
        </xp:this.expression> 
    </xp:validateExpression> 
</xp:this.validators> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:16:42.333

尝试添加一些打印输出，看看您是否获得了正确的字段值

# java - 数组列表可以像数据库一样起作用吗？

> ID：10247404
> 
> 赞同：0
> 
> 时间：2012-04-20T13:38:45.543
> 
> 标签：java

我正在做一个从 ArrayList 存储、更新、搜索和删除数据的程序。我的问题是我无法从 ArrayList 中检索数据。我是Java新手，所以请帮助我。

我想显示我在下面提到的事物列表。

```
public Subject(int id, String name, int marks){
    subId = id;
    subName = name;
    subMarks = marks;
}

public void show(){
    System.out.println("1.Insert" + "\n" + "2.Search" + "\n" + "3.Update" + "\n" + "4.Delete" + "\n" + "5.Back");
    try{
        select = Integer.parseInt(br.readLine());
    }
    catch(Exception e){
        System.out.println(e);
    }
} 
```

谢谢大家。

* * *

我的实际程序是这样的......所以请给我建议我应该怎么做才能将数据存储在 ArrayList..

```
package com.sms.data;

import com.sms.util.*;

import java.util.regex.*;
import java.io.*;
import java.util.*;

public class Subject extends Operation
{
int subId, subMarks;
String subName;
ArrayList <Subject> list = new ArrayList <Subject> ();

BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

DuplicateSubjectFoundException duplicate = new DuplicateSubjectFoundException();

NoSubjectFoundException noName = new NoSubjectFoundException();

InvalidDataException invalid = new InvalidDataException();

InvalidName inName = new InvalidName();

int select, exit = 0;
public Matcher matcher;
Subject sub;

public Subject(){
}

public Subject(int id, String name, int marks){
subId = id;
subName = name;
subMarks = marks;
}

public void display(){
System.out.println("SubjectId" + "\t" + "Name" + "\t" + "Marks");
System.out.println(subId + "\t" + subName + "\t" + subMarks);
}

public void show(){
System.out.println("1.Insert" + "\n" + "2.Search" + "\n" + "3.Update" + "\n" + "4.Delete" + "\n" + "5.Back");
try{
select = Integer.parseInt(br.readLine());
}
catch(Exception e){
System.out.println(e);
}
}

public void displayList(ArrayList <Subject> store)  
{
int id = 0, subMarks = 0;
String name = " ";
while(exit != 3)
{
try
{
this.show();
switch(select)
{
case 1: 
        try{
            System.out.println("Enter Subject ID: ");
            subId = Integer.parseInt(br.readLine());
            for(int j=0; j < list.size();j++){
                System.out.println(list.get(j));
            }

            System.out.print("Subject Marks: ");
            String marks = br.readLine();
            if(marks.equals(" ")){
                throw invalid;
            }
            else{
                subMarks = Integer.parseInt(marks);
                for(int j=0; j < list.size();j++){
                    System.out.println(list.get(j));
                }
                if(subMarks > 100)
                    throw invalid;
            }   

            System.out.println("Enter subject Name: ");
            subName = br.readLine();
            Matcher matcher = Pattern.compile("[^a-zA-Z0-9]").matcher(subName);
            while(matcher.find())
            {
                for(int j=0; j < list.size();j++){
                    System.out.println(list.get(j));
                }
                throw inName;
            }

        }
        catch(NumberFormatException e){
            System.out.println("Invald ID.");
            continue;
        }           
        catch(InvalidDataException e){
            System.out.println(invalid.print());
            continue;
        }
        catch(Exception e){
            System.out.println(inName.print());
            continue;
        }
        add(subId, subName, subMarks, list);
        break;

case 2:  //for search

case 3: //for update

case 4: //for delete

case 5: 
        exit = 3;
        break;
default: 
            System.out.println("Enter your Choice.");
            break;
}
}
catch(Exception e){
System.out.println(e);
}
}
} 

public void add(int subId, String subName, int subMarks, ArrayList<Subject> list){
    Subject sub = new Subject();
    int i =0;
    while(i < list.size()){
        list.add(i, sub);
    }   
}

public void displayArrayList(ArrayList<Subject> list){      //for update

    for(int i = 0;i < list.size(); i++){

        Subject sub = list.get(i);
        sub.display();
    } 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:49:06.033

我在您的代码中没有找到任何`ArrayList()`内容，但是如果您想从中提取数据`ArrayList()`，您可以执行以下操作。

```
ArrayList list=new ArrayList();
int[][] tmp;
for(Object tab : list){
     tmp = (int[][]) tab;
} 
```

# c - C中数组指针的奇怪行为

> ID：10247405
> 
> 赞同：4
> 
> 时间：2012-04-20T13:38:46.337
> 
> 标签：c, arrays, pointers

这是我编写的用于测试/理解数组中指针行为的代码

```
int main(void){
    int a[4];
    memset(a, 0, sizeof(a));
    printf("%x %x\n",a,&a);
}
Output of the above program on my machine:
bfeed3e8 bfeed3e8 
```

我不明白为什么值 a 和 &a 是相同的。据我了解 &a 应该给出存储 a 的内存位置的地址。这种行为的解释是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T13:40:43.897

`&a`确实给了你的地址`a`。`a`给你`a`，因为它是一个数组，它衰减到一个指向`a`.

或者学究起来，它衰减为指向`a[0]`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T13:40:25.903

在这种情况下，数组名称`a`衰减为指向其第一个元素的指针。你的意思是

```
printf("%x %x\n",a[0],&a); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T15:18:16.650

该表达式`&a`具有类型`int (*)[4]`（指向 的 4 元素数组的指针`int`）并计算为数组对象的地址；在这方面，指向数组的指针就像指向其他任何东西的指针。

奇怪的是如何`a`处理表达式。除非它是`sizeof`或一元运算符的操作数`&`，或者是用于在声明中初始化另一个数组的字符串文字，否则“N 元素数组`T`”类型的表达式将替换为 / 转换为 /“衰减”为类型的表达式`T *`（指向`T`），其值是数组中第一个元素的地址。由于数组的地址和数组中第一个元素的地址相同，因此两个表达式产生相同的*value*，但它们的*类型*不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T13:42:09.220

数组的名称也指向它所持有的内存块的开始。没什么大不了的。

这些都是等价的：

```
printf("%x\n",a);
printf("%x\n",&a);
printf("%x\n",&a[0]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T13:43:05.783

在指针上下文中，数组衰减为指针。所以`a`衰减到数组第一个字节`&a`的地址，定义为第一个字节的地址。可能您想在 printf中使用`*a`or`a[0]`而不是。`&a`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T13:43:19.357

```
int test[10]         = test is pionter as well as &test 
```

如果您想处理除 base 以外的元素，请使用 &test[4]

顺便提一句

```
&test = @test[0] = test 
```

所有指向基本元素的指针

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-20T13:44:05.270

数组名“a”指向数组的第一个元素。

为了更好地理解：

```
 *(a + 2) is same with a[2]. 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-20T13:44:47.210

在 C 语言中，数组名在这种情况下`a`被认为是一个标签，它表示数组的地址。对它应用 & 符号被解释为同样的事情。

函数指针也有类似的问题。如果`func`是指向函数的指针，您可以同时使用`func()`和调用该函数`(*func)()`。

有间接语法的情况，以特殊方式处理。

# ruby-on-rails - Rails 与旧数据库的集成

> ID：10247407
> 
> 赞同：0
> 
> 时间：2012-04-20T13:38:51.573
> 
> 标签：ruby-on-rails, activerecord

我有一个情况。我有一个旧系统，我们正在将代码替换为 Rails。所以，表格是合同的，在旧系统中它有大约 20 个字段，但在这个内置于 rails 的新软件中，我将只使用 5 个字段，一段时间后我们将删除所有其他字段。

默认情况下，rails 映射表思想 orm 的所有行。我该如何选择我想在 ActiveRecord 下映射的字段？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:43:10.083

ActiveRecord 将字段动态映射到 Ruby 方法，因此您实际上不需要排除它们，只是不要使用它们，当您删除它们时，您不会破坏任何东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:35:14.253

在我没有创建的数据库上使用 Rails 之外的 ActiveRecord 时，我使用了（hacky）解决方案。基本上，我深入研究了 ActiveRecord 代码，发现它利用类方法 ::column_names 来促进字段的映射。正如其他人所指出的那样，只需不使用您打算从数据库中删除的模型中的字段就可以了。但也有可能是 Db 的结构使用了一个不能与 ActiveRecord 配合使用的保留字。我添加了以下代码来隐藏 ActiveRecord 中的“类”字段，因为“类”是保留名称并且会引发各种错误。

```
private
def self.column_names
  orig = super
  orig.delete('class')
  return orig
end 
```

您当然可以修改它以从返回的数组中删除多个键，例如：

```
private
def self.column_names
  orig = super
  ['class', 'field_one', 'field_two'].each do |field_name|
    orig.delete(field_name)
  end
  return orig
end 
```

希望这会有所帮助，/salernost

# cocoa-touch - iOS5：有人设法用三个按钮和文本字段（UIAlertViewStylePlainTextInput）修复 UIAlertView 吗？

> ID：10247413
> 
> 赞同：4
> 
> 时间：2012-04-20T13:39:06.043
> 
> 标签：cocoa-touch, uikit, xamarin.ios, uialertview

苹果真的把这个搞砸了。我想将 a`UIAlertView`与新`UIAlertViewStylePlainTextInput`样式一起使用，并在其中包含三个按钮。结果如下所示：

![在此处输入图像描述](../Images/5d7bbf87c7cecfac64b733c3306d5cd3.png)

在 Apple 解决此问题之前，是否有人设法建立了解决方法？也许以某种方式降低按钮高度或增加警报视图的总高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T21:20:11.877

这不是一个完整的解决方案，但它可以帮助您入门。

```
UIAlertView view = new UIAlertView ("Alert", "This is an alert\n\n\n", null, "Login", "One", "Two");

UIView theTextField = new UIView (new RectangleF (12.0f, 80.0f, 260.0f, 25.0f));
UITextView txt = new UITextView (new RectangleF (0f, 0f, 260.0f, 25.0f));
txt.BackgroundColor = UIColor.White;
theTextField.AddSubview (txt);
view.AddSubview (theTextField); 

view.Show (); 
```

我观察到，当您将文本视图添加为子视图时，AlertView 会尝试变得智能。但是如果你把一个通用的 UIView 作为一个容器放进去，它会给你一些更有用的东西。

我还验证了这是 XCode 中的一个问题。

这篇[文章](https://stackoverflow.com/questions/551530/customizing-uialertview)可能会给你更多的想法。

# java - 动态添加到水平滚动视图

> ID：10247414
> 
> 赞同：7
> 
> 时间：2012-04-20T13:39:23.520
> 
> 标签：java, android, horizontalscrollview

我已经在线学习了一些教程，向您展示了如何使用多个 xml 文件创建静态水平滚动视图。

但是，我希望能够从数据库中获取内容，用内容填充新视图（来自股票 xml 布局），然后将其添加到水平滚动视图中。

是否有任何教程向您展示如何将动态视图添加到水平滚动视图？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-20T14:56:56.573

这很容易，

您的 Horizo​​ntalScrollView 必须包含像 LinearLayout 或 RelativeLayout 这样的容器，在您的活动中获取该布局的实例，并根据需要添加视图...

```
LinearLayout yourLayout = (LinearLayout)findViewById(R.id.someID); 
```

然后遍历数据库中的项目数并继续将视图添加到布局中，直到像这样结束...

```
for (int i = 0; i < yourData.size(); i++) {             
  TextView tv = new TextView(getApplicationContext());
  tv.setText(yourData.get(i));
  yourLayout.addView(tv);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T13:46:08.080

**R.layout.column**是您要添加的另一个布局。

```
<HorizontalScrollView ...>
   <LinearLayout android:id="@+id/row" ..>
      ...
   </LinearLayout>
</HorizontalScrollView>

LinearLayout featureLayout = (LinearLayout) View.inflate(YourActivity.this, R.layout.column, null);
row.addView(featureLayout); 
```

# asp.net-mvc - 给定用户名的字符串，我如何检查该用户是否为 IsInRole？

> ID：10247417
> 
> 赞同：2
> 
> 时间：2012-04-20T13:39:27.843
> 
> 标签：asp.net-mvc, asp.net-mvc-3, membership-provider, isinrole

我试图在给定用户完全“登录”到我正在构建的站点之前检查他们是否具有角色。通常我会使用以下代码：

```
User.IsInRole("CustomRole") 
```

但在这种情况下，该行总是产生“假” - 我相信这是因为要使用 User.IsInRole，用户必须已经完全登录。我试图在我的 Account 控制器的 LogOn 方法中检查这条信息，所以用户还没有登录（我认为）。

我将如何返回一个用户对象，以便我可以在下面做我想做的事情：

```
public ActionResult LogOn(LogOnModel model, string returnUrl)
{
    if (ModelState.IsValid)
    {
        if (Membership.ValidateUser(model.UserName, model.Password))
        {
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);

            // Need to identify the user because the "User" is not officially 'logged in' yet and cannot be accessed via "User.IsInRole" - am I correct in this understanding
            MembershipUser u = Membership.GetUser(model.UserName);
            if (u.IsInRole("Administrator"))

. . . . truncated 
```

上面的代码抛出以下错误：

```
'System.Web.Security.MembershipUser' does not contain a definition for 'IsInRole' and no extension method 'IsInRole' accepting a first argument of type 'System.Web.Security.MembershipUser' could be found (are you missing a using directive or an assembly reference?) 
```

MembershipUser u = Membership.GetUser(model.UserName) 显然没有返回我可以使用 IsInRole 的对象，有什么提示吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:46:32.530

你想要的是

```
var authorized = Roles.IsUserInRole(username, roleName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:45:41.653

我认为有一个重载需要角色和用户名。[MSDN](http://msdn.microsoft.com/en-us/library/bz1zy88e.aspx)

# javascript - 使用 JavaScript 动态设置选择选项

> ID：10247423
> 
> 赞同：51
> 
> 时间：2012-04-20T13:39:51.803
> 
> 标签：javascript, jquery

如何使用 Javascript 从我的 html 选择字段中动态设置选项？这是我的页面设置：

```
<form name="test">
  <table>
    <tr>
      <td class='dataleft'>Product: </td>
      <td><select name='inptProduct'></select></td>
    </tr>
  </table>
</form> 
```

我有一个数组中的所有值。这是设置`<option>`s 的位置。

```
for(var i = 0; i < productArray.length; i++) {
    console.log("<option value='" + productArray[i] + "'>" + productArray[i] + "</option>");
} 
```

PS：可以使用jQuery。

* * *

**解决方案：** 这是我一直在寻找的最终解决方案。它不会将新选项应用于选择字段。它首先删除所有，然后添加新的：

```
var optionsAsString = "";
for(var i = 0; i < productArray.length; i++) {
    optionsAsString += "<option value='" + productArray[i] + "'>" + productArray[i] + "</option>";
}
$("select[name='inptProduct']").find('option').remove().end().append($(optionsAsString)); 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-20T13:43:07.413

好吧，你几乎完成了所有工作：

```
var optionsAsString = "";
for(var i = 0; i < productArray.length; i++) {
    optionsAsString += "<option value='" + productArray[i] + "'>" + productArray[i] + "</option>";
}
$( 'select[name="inptProduct"]' ).append( optionsAsString ); 
```

**EDIT**删除了最后一个 $ 包装器，`optionsAsString`因为它`append`会自动转换字符串

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-20T13:42:12.963

```
var $inputProduct = $("select[name='inputProduct']")

$(productArray).each(function(i, v){ 
    $inputProduct.append($("<option>", { value: v, html: v }));
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-02-17T17:19:21.840

假设数组`productArray`是一个简单数组，每个元素都是选项的值，以及该选项的所需标题。

```
$( 'select[name="inptProduct"]' )
  .html( '<option>' + productArray.join( '</option><option>' ) + '</option>' ); 
```

例子：

```
productArray = ['One', 'Two', 'Three'];

// With the original code being

<select name="inptProduct">
  <option>There could be no options here</option>
  <option>Otherwise, any options here will be overwritten</option>
</select>

// Running the code above would output

<select name="inptProduct">
  <option>One</option>
  <option>Two</option>
  <option>Three</option>
</select> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-30T11:04:15.270

```
function onLoad() {

  var type = new Array("Saab","Volvo","BMW");

    var $select = $("select[name='XXXXXType']")
    alert($select);
    $(type).each(function(i, v){
        $select.append($("<option>", { value: v, html: v }));
      });

} 
```

```
<select name="XXXXXType" id="XXXXXType"></select> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-12T09:33:24.577

如果您不坚持使用纯 JavaScript 来完成这项工作，您可以使用 jQuery 轻松完成这项工作。

```
<form name="test">
  <table>
    <tr>
      <td class='dataleft'>Product: </td>
      <td><select id='inptProduct'></select></td>
    </tr>
  </table>
</form>

for (var i = 0; i < productArray.length; i++) {
    $("#inptProduct").append('<option value=' + if_you_want_set_value + '>' + productArray[i] + '</option>');
    } 
```

请注意，这里我使用了 select 标签的 id。这就是为什么我也添加了 html 部分。希望你知道如何添加 jQuery。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-10T15:51:26.883

对于不想使用 jQuery 的人来说，这是一个解决方案：

```
const select = document.getElementById('select')

const arr = ['Apple', 'Pear', 'Orange']

arr.forEach(value => {
  const option = document.createElement('option')
  option.innerHTML = value
  select.appendChild(option)
})
```

```
<select id="select"></select>
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-22T12:03:35.900

我通常这样做：

`document.getElementById("selectid").innerHTML="<option value='foo'>FOO</option>"`;

* * *

## 回答 #8

> 赞同：-5
> 
> 时间：2012-04-20T13:43:10.643

您可以为选择 id=inptProduct 设置 id 然后执行 $('#inptProduct').val(yourselectValue)

# .net - UnityDI 不会自动连接到默认构造函数

> ID：10247431
> 
> 赞同：0
> 
> 时间：2012-04-20T13:40:20.327
> 
> 标签：.net, dependency-injection, unity-container

如果下面的 SomeClass 没有空的构造函数，那么 SomeClass 可以很好地解析，但是使用空的构造函数会失败，那么使用 Unity 容器解决它的正确方法是什么？

```
IUnityContainer container = new UnityContainer();
container.Resolve<SomeClass>(); // Does not work with empty constructor

class SomeClass
{
    SomeClass()
    {
        Console.WriteLine("SomeClass created");
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:48:13.670

您的构造函数不是公开的。Unity 不寻找私有或受保护的构造函数。

# php - php, mysql 如果 $a 在数据库中

> ID：10247434
> 
> 赞同：1
> 
> 时间：2012-04-20T13:40:26.680
> 
> 标签：php, mysql, sql, arrays, foreach

如何始终打印，但是数据库中的一个名称（值）与应打印的相同名称（值）附有文本，或者值加粗？对不起我的英语不好;D

这是值

```
$a = '9.00';
$b = '10.00';
$c = '11.00';
$d = '12.00';
$e = '13.00';
$f = '14.00';
$g = '15.00';
$h = '16.00';
$i = '17.00';
$j = '18.00';

$date = '5/21/2012';
$q = mysql_query("SELECT * FROM times WHERE date='$date'");
while ($row = mysql_fetch_assoc($q)){
$time = $row['time'];
....

} 
```

怎么做？用数组？或 foreach... 帮助，请 ;D

结果将是：

`9.00 - AVAIBLE`->这个不在数据库 `10.00 - NOT AVAIBLE`中->这个在数据库中 `11.00 - NOT AVAIBLE`->这个在数据库中 `12.00 - NOT AVAIBLE`->这个在数据库中.....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:45:02.687

如果我理解，您想一直打印，`$a..$j`但如果它们出现在您的查询结果中，则将它们加粗或识别它们。

```
// Store all times in an array rather than variables...
$times = array('9.00','10.00','11.00','12.00','13.00','14.00','15.00','16.00','17.00','18.00');

// Array to hold times from the database query
$dbtimes = array();

date = '5/21/2012';
$q = mysql_query("SELECT * FROM times WHERE date='$date'");
while ($row = mysql_fetch_assoc($q)){

  // Place database times onto the array
  $dbtimes[] = $row['time'];
}

// Iterate over all the times and if the same time occurs in the databse
// array list, output it with special marks as needed.
foreach ($times as $t) {
  if (in_array($t, dbtimes)) {
     // Print bolded time $t
     echo '<strong>$t</strong>';
  }
  else {
     // Print regular time $t
     echo $t;
  }
} 
```

请注意，这*不是*`5/21/2012`MySQL日期时间类型 ( is)的有效日期格式。希望您的列是正确的日期时间类型，而不是像. 如果不是，我建议将其更改为适当的日期时间。*`2012-05-12``date``5/21/2012`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:45:33.310

```
// store all the times in an array
$mytimes = array('9.00', '10.00', ..., '18.00');

$date = '5/21/2012';
$q = mysql_query("SELECT * FROM times WHERE date='$date'");

while($row = mysql_retch_assoc($q){
    $time = $row['time'];

    // loop through the array, if the time matches the value in the database, 
    // make it bold
    foreach($mytimes as $timecheck){
        if($time == $timecheck){
            // make bold
            echo '<b>'.$timecheck.'</b><br>';
        }
        else{
            echo $timecheck.'<br>';
        }
    }
} 
```*

# ruby-on-rails - Rails 3 + Omniauth: undefined method `persisted?' for []

> ID：10247438
> 
> 赞同：1
> 
> 时间：2012-04-20T13:40:49.677
> 
> 标签：ruby-on-rails, omniauth

I am trying to user omniauth-twitter for my website, but whenever I click on twitter login, I get this error

```
undefined method `persisted?' for [] 
```

omniauth_callbacks_controller.rb file...

```
def twitter
# You need to implement the method below in your model
@user = User.find_for_twitter_oauth(request.env["omniauth.auth"], current_user)

if @user.persisted?
  flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Twitter"
  sign_in_and_redirect @user, :event => :authentication
else
  session["devise.twitter_data"] = request.env["omniauth.auth"]
  redirect_to new_user_registration_url
end
end 
```

User.rb file...

```
def self.find_for_twitter_oauth(access_token, signed_in_resource=nil)
data = access_token.extra.raw_info
if user = User.where(:email => data.email)
  user
else # Create a user with a stub password. 
  User.create!(:name => data.name, :email => data.email, :password => Devise.friendly_token[0,20]) 
end
end 
```

Any idea?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:49:35.570

```
user = User.where(:email => data.email).first() 
```

# ruby - 获取与另一个偏移的字符

> ID：10247440
> 
> 赞同：1
> 
> 时间：2012-04-20T13:40:51.317
> 
> 标签：ruby

我想做'a' + 2 ='c'，所以我写道：

```
('a'.ord + 2).chr 
```

是的，我得到'c'。

但它看起来很多余。有没有更好的直接方法呢？使用 1.9.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:52:57.193

一个*非常非常糟糕的*方法是这样的：

```
class String

  alias_method :original_plus, :+

  def +(other)
    if self.length == 1 and other.is_a?(Fixnum)
      (self.ord + other).chr
    else
      original_plus(other)
    end
  end

end

puts 'a' + 2
=> c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:35:51.627

没有一个普遍“更好”的方法来做到这一点（给定一些“更好”的随机定义；我的可能与你的不匹配）。这才是我真正的答案：**做你正在做的事**。

然而，为了好玩，你可以做这个不通过整数土地的*低效猴子补丁：*

```
class String
  alias_method :__succ,:succ
  def succ(steps=nil)
    steps ? dup.tap{ |c| steps.times{ c.succ! } } : __succ
  end
end

puts "a".succ(2) #=> "c" 
```

但是，这具有可能不受欢迎的副作用：

```
p [24,25,26,27].map{ |s| "a".succ(s) }
#=> ["y", "z", "aa", "ab"] 
```

* * *

如果您需要将许多 ASCII 字符偏移相同的偏移量：

```
p "hello".bytes.map{ |c| c+3 }.pack( "c*" ) #=> "khoor" 
```

* * *

如果您需要通过相同的偏移量计算单个字符（如“a”）ASCII 字符的多个偏移量：

```
A = "a".ord
p [1,2,3,7,20,25].map{ |n| A+n }.pack( "c*" ) #=> "bcdhuz" 
```

* * *

如果您需要计算各种字符的许多偏移量：

```
chars   = "hello"
offsets = [15,10,6,0,-11]
puts chars.bytes.zip(offsets).map{|a,b| a+b }.pack( "c*" )
#=> "world" 
```

# c# - String.Split 针对 FTP 文件

> ID：10247448
> 
> 赞同：2
> 
> 时间：2012-04-20T13:41:17.367
> 
> 标签：c#, regex, ftp, split, string-parsing

我正在从 FTP 服务器下载文件。一些文件名中有空格，但我的 RegEx 无法识别。

例子：

```
-rw-r--r-- 1 ftp ftp        8613651 Apr 15  2011 Crystal Reports User Guide.pdf 
```

代码：

```
string[] splitDownloadFile = Regex.Split(dFile, @"\s+");
string fMonth = splitDownloadFile[5];
string fDate = splitDownloadFile[6];
string fyear = splitDownloadFile[7];
string fName = splitDownloadFile[8]; 
```

是否可以将字符串 fName 设置为字符串的其余部分？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:44:35.090

您可以使用[.NET Framework](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)`string.Split()`中的方法 并指定最大拆分数。

这样最后一部分（文件名）就不会被分成单独的部分。

**编辑：代码**

```
string s = "-rw-r--r-- 1 ftp ftp        8613651 Apr 15  2011 Crystal Reports User Guide.pdf";
string[] c = {" ", "\t"};
string[] p = s.Split(c, 9, StringSplitOptions.RemoveEmptyEntries);
string name = p[8];
Console.WriteLine(name); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T13:53:13.017

捕获组使这变得容易。

```
var match = Regex.Match(dFile, @"\S+\s+\S+\s+\S+\s+\S+\s+\S+\s+(?<month>\S+)\s+(?<date>\S+)\s+(?<year>\S+)\s+(?<name>.+)");

string fName = match.Groups["name"].Value; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T13:53:15.070

如果您要使用 String.Split 方法而不是 Regex.Split，则可以使用[String.Split 方法 (Char[], Int32)](http://msdn.microsoft.com/en-us/library/c1bs0eda.aspx)重载，您可以获得所需的结果。您需要准确计算出您需要满足哪些空白字符。

就像是：

```
string test = "-rw-r--r-- 1 ftp ftp        8613651 Apr 15  2011 Crystal Reports User Guide.pdf";
string[] parts = test.Split(new[] { '\t', ' ' }, 9, StringSplitOptions.RemoveEmptyEntries); 
```

如果你真的想使用正则表达式，你可以做这样的事情来重新组合文件名：

```
string[] again = Regex.Split(test, "\\s+");
var fname = string.Join(" ", again.Skip(8).ToArray()); 
```

你需要`using System.Linq;`在你的代码顶部。但是，文件名只是原始文件名的近似值。多个连续的空格或制表符将被替换为一个空格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T13:48:18.063

顺便说一句，您可以尝试粘合/加入从第 n 个开始的所有单词：

```
string fileName = String.Join("", splitDownloadFile.Skip(7)); // if file name starts from 8th segment 
```

实际上，这只是不当使用的一种解决方法`Split()`，但您知道如何解决该问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T14:07:43.687

如果模式是一致的，不要拆分而是放入和提取命名的捕获组

```
string data = "-rw-r--r-- 1 ftp ftp        8613651 Apr 15  2011 Crystal Reports User Guide.pdf";

string pattern = @"
^                       # Beginning Anchor
(?<Permissions>[^\s]+)  # Get permissions into named capture
(?:\s+)                 # Match but don't capture space
(?<Count>\d+)
(?:\s+)
(?<Op1>[^\s]+)          # Continue with capturing valued text into named
(?:\s+)                 # captures and matching, but not capturing space which is ignored.
(?<Op2>[^\s]+)
(?:\s+)
(?<Size>[^\s]+)
(?:\s+)
(?<Month>[^\s]+)
(?:\s+)
(?<Day>[^\s]+)
(?:\s+)
(?<Year>[^\s]+)
(?:\s+)
(?<FileName>[^\r\n]+)";

// Ignore option only applies to the pattern so we can comment it.
var mtGroup = Regex.Match(data, pattern, RegexOptions.IgnorePatternWhitespace).Groups;

Console.WriteLine ("In {0} we created {1}", mtGroup["Month"].Value, mtGroup["FileName"].Value);
/* Output

In Apr we created Crystal Reports User Guide.pdf

*/ 
```

# javascript - 具有只读和多个的多个表单

> ID：10247449
> 
> 赞同：0
> 
> 时间：2012-04-20T13:41:23.163
> 
> 标签：javascript, jquery, html, css

我在页面上有动态生成的表单数量，所有字段和 css 类都设置了只读。每个表单在锚标记中都有自己的编辑按钮，单击该按钮时，我想使用 removeClass() 和 attr('readonly', false) 来显示与该编辑按钮相关的表单。但是，如果我为 func 提供类单击处理程序，这显然会显示页面上的每个表单，这不是所需的结果。

我不需要任何代码，因为我想自己解决问题，但是如果有人知道我应该查看/使用的任何文章或特别内容，请开火！！！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:54:46.433

为了引用特定的表单，您需要有一些唯一的标识符。

你可以通过几种方式做到这一点。最直接的就是在每个表单上都有一个id，每个点击处理程序都可以找到具体的id。

但是，假设按钮位于它们各自的表单内部，可以实现更通用的解决方案，就像这样。

```
<form>
  <!-- your form elements -->
  <button class="edit_button">Edit this form</button>
</form>
<form>
  <!-- your form elements -->
  <button class="edit_button">Edit this form</button>
</form>
<form>
  <!-- your form elements -->
  <button class="edit_button">Edit this form</button>
</form>
<form>
  <!-- your form elements -->
  <button class="edit_button">Edit this form</button>
</form>
.
.
. 
```

等等。

然后在您的点击处理程序中，您可以查找作为表单的点击目标（按钮）的第一个父级，并相应地执行操作。

[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:07:05.420

解决了！$('.prefRoute').delegate('.editPrefRoute', 'click' , function() { if($(this).parent().siblings('table').hasClass('selected')) { / /在这里做东西 $(this).parent().siblings('table').removeClass('selected'); } else { $(this).parent().siblings('table').attr('class ', 'selected'); //在这里做东西 } });

# linux - Debian CLI 安装到闪存驱动器

> ID：10247452
> 
> 赞同：0
> 
> 时间：2012-04-20T13:41:43.623
> 
> 标签：linux, debian, command-line-interface

我正在将 Debian linux 仅命令行安装到闪存驱动器上以实现便携性，如果您能提供它，我想要一些指导。基本安装后，我可以完美地从 U 盘启动，它会加载命令提示符。现在，我希望能够做一些特定的事情，但我不确定我需要什么包。

我希望能够同时打开几个不同的命令行（例如，如果我正在编写服务器/客户端应用程序，我可以在一个 CLI 中运行服务器，并在后续 CLI 中运行多个客户端）。我相信 Ubuntu 提供了类似的功能，使用 CTRL+ALT+F1 - CTRL+ALT+F7。有什么办法可以在我的情况下做类似的事情吗？

除此之外，我想安装一个互联网浏览器。我需要一个成熟的图形环境来处理它吗？如果没有，我需要什么？

目前我只安装了 XORG 包。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:09:36.177

1.  Debian 安装应该已经有虚拟终端 [Ctrl+Alt+Fx]。可用的终端数量通常设置在`/etc/inittab`. 但是请考虑安装“ [GNU Screen](http://www.gnu.org/software/screen/) ”并[学习如何使用它](http://devcheatsheet.com/tag/screen/)。它非常漂亮。

2.  可以使用纯文本浏览器，例如“ [ELinks](http://elinks.or.cz/) ”。或者，您可以安装和配置一个简单的[窗口管理器](http://wiki.debian.org/WindowManager)，然后安装一个浏览器，例如[iceweasel](http://packages.debian.org/squeeze/iceweasel)。当您使用它时，您还可以安装“ [xterm](http://packages.debian.org/squeeze/xterm) ”，这样您就可以从您的 X 会话中打开终端。

# svn - Submitting Plugin Update Through SVN to Wordpress Doesn't Reflect Changes

> ID：10247458
> 
> 赞同：0
> 
> 时间：2012-04-20T13:42:02.857
> 
> 标签：svn, plugins, wordpress

I released 2 days ago an update to my Wordpress plugin. Which can be viewed here: [http://wordpress.org/extend/plugins/lanoba-social/](http://wordpress.org/extend/plugins/lanoba-social/)

The version went from 1.3 to 2.0 and (now to 2.01 as a test). When I look at the subversion repository, all my changes are reflected on Wordpress' servers. [http://plugins.svn.wordpress.org/lanoba-social/trunk/](http://plugins.svn.wordpress.org/lanoba-social/trunk/)

In fact, all websites using our plugin are detecting that there are updates too (and updates are succesful).

The problem is that the description of the plugin, the changelog and installation instructions (see first link) are not reflecting the visible changes in svn (see 2nd link).

The weird thing is that the screenshots ARE displaying the new ones and I am able to rename the plugin but it stops there.

If anyone has any ideas on what I am doing wrong, I would really appreciate some help.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-14T02:51:33.447

签入新版本涉及许多步骤，我自己觉得有点繁琐。您必须执行以下操作：

*   更新 readme.txt 文件中的“稳定”版本号
*   使用该版本号在 SVN 中创建一个新的标记版本
*   更新插件主 .php 文件中的版本号，我认为这是显示的版本号

您必须使所有三个同步才能工作，如果您有一个错误，则没有错误指示，不幸的是。

如果您只更新主 .php 文件中的版本号，我认为您可以看到显示的新版本号，但存储库关于谁是当前的想法不会得到更新。这是一个陷阱，我自己也遇到了困难。

我知道这是一个老问题，您可能已经自己回答了，但认为值得添加一个答案，因为人们可能正在寻找它。

定义各个字段的来源的常见问题解答： [http ://wordpress.org/extend/plugins/about/faq/](http://wordpress.org/extend/plugins/about/faq/)

如何使用 SVN 管理插件： [http ://wordpress.org/extend/plugins/about/svn/](http://wordpress.org/extend/plugins/about/svn/)

注意：这个“使用 SVN 管理插件”文档描述了如何更新版本，并明确提到了更新 trunk/readme.txt 文件中的稳定标签。 **我强烈怀疑插件页面上显示的版本取自插件主 .php 文件，而进行更新的实际版本取自 readme.txt 稳定标记和 svn 标记版本。** 在我看来，这可能是一个错误，至少非常令人困惑，而且我认为绝对没有记录......

# ilmerge - can't get ilmerge to work

> ID：10247461
> 
> 赞同：0
> 
> 时间：2012-04-20T13:42:05.730
> 
> 标签：ilmerge

Im trying to include 1 exe and 3 dll's into a single exe file using ilmerge.

I can run the normal exe file, if the 3 dll's are in the same folder. So I know the program is working as intended.

I then use ilmerge like this:

```
ilmerge /target:winexe /out:Run.exe IncidentReportGenerator.exe 
iTextSharp.dll Newtonsoft.Json.dll RestSharp.dll  
/targetplatform:v4,C:\Windows\Microsoft.NET\Framework64\v4.0.30319 
```

This completes without errors and im left with the Run.exe (and Run.pdb). But when i now double click on Run.exe nothing happens.

In taskmng Run.exe shows up, and disaperes again after 5-6 sec. IncidentReportGenerator.exe is a console application. Double clicking this opens a console, as mentioned before.

Anyone have a idea, why this dosen't work?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:08:45.863

你用 GUI 界面试试这个[工具吗](http://ilmergertool.codeplex.com/releases)

# javascript - Sorting array of point objects in Javascript

> ID：10247467
> 
> 赞同：1
> 
> 时间：2012-04-20T13:42:36.260
> 
> 标签：javascript, jquery, sorting, jquery-ui-sortable

Hi I want to sort an array of point objects in javascript so that the array,

`[{x: 220, y: 1080}, {x: 1, y: 0}, {x: 0, y: 1080}]`

becomes

`[{x: 0, y: 1080}, {x: 1, y: 0}, {x: 220, y: 1080}]`

Thanks in advance

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T13:44:37.320

```
arr.sort(function(a,b) {
    if( a.x == b.x) return a.y-b.y;
    return a.x-b.x;
}); 
```

这是`sort`...的基本功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:44:10.697

```
var sorted = unsorted.sort(function(a,b) { return a.x - b.x }) 
```

# c++ - C++ GUI 应用程序：在 WndProc 中启动子进程（无 MFC）

> ID：10247470
> 
> 赞同：1
> 
> 时间：2012-04-20T13:42:59.077
> 
> 标签：c++, winapi, user-interface, process

我在我的 GUI 应用程序中启动子进程时遇到了问题。下面是我的 WndProc。我希望 ID_TOOLS_NEWPROCESS 案例启动一个新进程，该进程将打开对话框。当新窗口打开时，这将允许主窗口保持响应吗？

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
int wmId, wmEvent;
PAINTSTRUCT ps;
HDC hdc;

switch (message)
{
case WM_COMMAND:
    wmId    = LOWORD(wParam);
    wmEvent = HIWORD(wParam);
    // Parse the menu selections:
    switch (wmId)
    {
    case IDM_ABOUT:
        DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
        break;
    case IDM_EXIT:
        DestroyWindow(hWnd);
        break;
    case ID_TOOLS_NEWPROCESS:
        DialogBox(hInst, MAKEINTRESOURCE(IDD_NEWBOX), hWnd, NEW);
    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }
    break;
case WM_PAINT:
    hdc = BeginPaint(hWnd, &ps);
    // Draw text in the main window
    TextOut(hdc, 10, 10, L"Main Window",11);
    EndPaint(hWnd, &ps);
    break;
case WM_DESTROY:
    PostQuitMessage(0);
    break;
default:
    return DefWindowProc(hWnd, message, wParam, lParam);
}
return 0;
} 
```

我希望我已经清楚地解释了这一点，对此问题的任何帮助将不胜感激。

*   担。

**编辑：** @罗杰斯图尔特

about 使用以下内容作为其消息泵：

```
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam,         LPARAM lParam)
{

UNREFERENCED_PARAMETER(lParam);
switch (message)
{
case WM_INITDIALOG:
    return (INT_PTR)TRUE;

case WM_COMMAND:
    if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDOK)
    {
        EndDialog(hDlg, LOWORD(wParam));
        return (INT_PTR)TRUE;
    }
    break;
}
return (INT_PTR)FALSE;
} 
```

这里的麻烦是，当about框打开时，后面的主窗口是无响应的，直到about框关闭。我希望能够在主窗口仍然响应的情况下打开和控制多个对话框。

**编辑 2：** 这是我现在拥有的代码，但我仍然无法选择打开 about 框的主窗口。

关于框的消息处理程序：

```
INT_PTR CALLBACK About(HWND hDlg, UINT message, WPARAM wParam, LPARAM lParam)
{

UNREFERENCED_PARAMETER(lParam);
switch (message)
{
case WM_INITDIALOG:
    return (INT_PTR)TRUE;

case WM_ACTIVATE:
    if (0 == wParam)             // becoming inactive
        hDlgCurrent = NULL;
    else                         // becoming active
        hDlgCurrent = hDlg;
    return FALSE;

case WM_COMMAND:
    if (LOWORD(wParam) == IDOK || LOWORD(wParam) == IDOK)
    {
        EndDialog(hDlg, LOWORD(wParam));
        return (INT_PTR)TRUE;
    }
    break;
}
return (INT_PTR)FALSE;
} 
```

主消息循环：

```
 while (GetMessage(&msg, NULL, 0, 0))
     {
     if (NULL == hDlgCurrent || !IsDialogMessage(hDlgCurrent, &msg))
        {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
        }
     } 
```

@David - 你能否解释一下为什么这仍然没有返回预期的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:50:19.957

谢谢@大卫。解决方案确实是使用`CreateDialog()`而不是`DialogBox()`

我的程序现在也可以按照我的意愿运行。

-担。

# bash - How to prevent rm from reporting that a file was not found?

> ID：10247472
> 
> 赞同：190
> 
> 时间：2012-04-20T13:43:00.713
> 
> 标签：bash, rm

I am using `rm` within a BASH script to delete many files. Sometimes the files are not present, so it reports many errors. I do not need this message. I have searched the man page for a command to make `rm` quiet, but the only option I found is `-f`, which from the description, "ignore nonexistent files, never prompt", seems to be the right choice, but the name does not seem to fit, so I am concerned it might have unintended consequences.

*   Is the `-f` option the correct way to silence `rm`? Why isn't it called `-q`?
*   Does this option do anything else?

* * *

## 回答 #1

> 赞同：248
> 
> 时间：2012-04-20T16:58:13.953

的主要用途`-f`是强制删除本身不会删除的文件`rm`（作为一种特殊情况，它“删除”不存在的文件，从而抑制错误消息）。

您也可以使用重定向错误消息

```
$ rm file.txt 2> /dev/null 
```

（或您的操作系统的等效项）。`$?` 您可以在调用后立即检查文件的值，`rm`以查看文件是否实际被删除。

* * *

## 回答 #2

> 赞同：83
> 
> 时间：2012-04-20T13:45:58.953

是的，`-f`这是最合适的选择。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2013-06-12T20:47:49.570

-f 是正确的标志，但对于测试运算符，不是 rm

```
[ -f "$THEFILE" ] && rm "$THEFILE" 
```

这确保文件存在并且是常规文件（不是目录、设备节点等...）

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-10-24T16:55:04.333

`\rm -f file`永远不会报告未找到。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-20T16:51:23.080

至于`rm -f`做“其他任何事情”，它确实会在需要您确认的情况下强制（`-f`是简写）静默删除。例如，当尝试从您可写的目录中删除您不可写的文件时。`--force``rm`

* * *

## 回答 #6

> 赞同：-10
> 
> 时间：2014-05-28T17:53:22.620

我对 cshell 有同样的问题。我唯一的解决方案是在我的脚本中创建一个与“rm”之前的模式匹配的虚拟文件。

# java - Java swing GUI TrayMenu issue on Mac OS

> ID：10247474
> 
> 赞同：0
> 
> 时间：2012-04-20T13:43:05.460
> 
> 标签：java, macos, swing, popup, system-tray

I have a swing application. when i close my application. It goes to tray menu and a popup message comes that my app is running in tray menu. Menu on:

*   Windows 7/Win XP/Vista is like this
    ![enter image description here](../Images/a0344110a77b425cea59746a56444ac0.png)
*   On Mac OS it is like this.
    ![enter image description here](../Images/f6de08d3b0c251ab29d1b0effd2d5cdc.png)

**On Mac when I click on OK, it again shows my GUI.** I want the same effect as it is working on windows.

How can I change it? Or is there some other way to get the same effect? Or is there any other way to display message to user, like Skype notification bar. etc.?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T16:42:56.127

我记得这个默认的托盘弹出消息行为，没有好的方法可以改变它。您可以创建自己的通知，但很难确定托盘图标在屏幕上的位置。我很久以前尝试过，由于这些问题而放弃了托盘通知。

唯一好的选择（我认为）是确定系统工具栏在屏幕上的位置，并在它附近的一些角落显示您的自定义通知（基于 JDialog 或带有 alwaysOnTop 标记的 JWindow）。

# oracle - 获取 UTC 日期作为默认值

> ID：10247486
> 
> 赞同：3
> 
> 时间：2012-04-20T13:43:46.830
> 
> 标签：oracle

在 SQL Server 中可以创建这样的表：

```
create table test (
  [TimeStamp_test] [datetime] NOT NULL DEFAULT (getutcdate())
); 
```

我们有什么类似于`getutcdate()`in的东西`oracle`吗？

我知道使用`SELECT SYS_EXTRACT_UTC FROM DUAL`（即在插入此表时使用触发器）。

让我知道是否有其他简单的选项可用，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:38:47.557

试试这个：

```
CREATE TABLE MY_TEST
  (ID NUMBER,
   CURR_TIMESTAMP TIMESTAMP DEFAULT SYSTIMESTAMP,
   UTC_TIMESTAMP  TIMESTAMP DEFAULT SYS_EXTRACT_UTC(SYSTIMESTAMP));

INSERT INTO MY_TEST(ID) VALUES(1);

SELECT * FROM MY_TEST; 
```

分享和享受。

* * *

编辑：为了好玩，我决定尝试让它包含正确的时区。我发现只需在 TIMESTAMP WITH TIME ZONE 列中执行 SYS_EXTRACT_UTC(SYSTIMESTAMP) 就可以正确更改值的时间部分，但只保留时区。经过一番折腾后，我想出了以下几点：

```
CREATE TABLE RPJ_TEST
  (ID NUMBER,
   CURR_TIMESTAMP TIMESTAMP WITH TIME ZONE DEFAULT SYSTIMESTAMP,
   UTC_TIMESTAMP  TIMESTAMP WITH TIME ZONE
      DEFAULT TO_TIMESTAMP_TZ(TO_CHAR(SYS_EXTRACT_UTC(SYSTIMESTAMP)) || ' 00:00',
                              'DD-MON-YYYY HH:MI:SS.FF6 PM TZH:TZM')); 
```

可怕，但它*确实*获得了正确的 UTC 时间列的时区。

抵抗是没有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-04T12:42:36.343

这是使列接收 UTC 中默认时间戳的更简单方法：

```
CREATE TABLE TEST (ID NUMBER, UTC_TIMESTAMP TIMESTAMP WITH TIME ZONE DEFAULT FROM_TZ(SYS_EXTRACT_UTC(SYSTIMESTAMP), 'UTC')); 
```

# wcf - 由于缺少某些东西，如何在 IIS 7 上托管这个特定的 WCF 服务？

> ID：10247487
> 
> 赞同：0
> 
> 时间：2012-04-20T13:43:51.200
> 
> 标签：wcf, iis, iis-7, wcf-hosting

**[本文](http://www.codeproject.com/Articles/51063/Setting-up-a-Project-framework-for-a-WCF-Solution)**没有使用 VS2010 中的标准 WCF 服务库项目模板，因此显然它缺少一些可能使其更容易在 IIS 上托管的东西。

有人可以提供必要的步骤（以及您希望包含的尽可能多的细节）以将此特定的 WCF 解决方案带到它托管在 IIS 7 上的阶段吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T15:11:34.280

1.  在 C:\intepub\wwwroot\Test 创建一个文件夹
2.  上述文件夹的内容如下所示。bin 文件夹 b. .svc 文件 c. web.config 文件

现在从[文章中](http://www.codeproject.com/Articles/51063/Setting-up-a-Project-framework-for-a-WCF-Solution)，一旦您构建了服务类库项目，它将生成一个需要复制到 bin 文件夹的 .dll 文件。

现在创建一个包含以下内容的 .svc 文件：

```
<%@ServiceHost language=c# Debug="true" Service="TConvertAS.Services.TempConverter "%> 
```

现在您的 web.config 应该如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>     
  <system.web>    
    <compilation debug="true" targetFramework="4.0">
    </compilation>
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID" />    
  </system.web>
  <system.serviceModel>   
    <bindings>      
      <basicHttpBinding>
        <binding>
          <security mode="None">            
          </security>
        </binding>                  
    <services>
      <service name="TConvertAS.Services.TempConverter">
        <endpoint address="" binding="basicHttpBinding" name="Service1" contract="TConvertAS.Contracts.ITempConverter" />                        
      </service>      
    </services>    
    <behaviors>      
      <serviceBehaviors>        
        <behavior>
          <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>        
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />        
  </system.serviceModel>  
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>            
  </system.webServer>  
</configuration> 
```

完成上述操作后，只需确保您的应用程序需要配置在哪个应用程序池下运行即可。

现在只需右键单击虚拟目录下的 .svc 文件，然后单击浏览即可看到 WCF 服务页面。

**（或者）**

您可以直接将虚拟目录映射到 WCF 服务类库项目并将 svc 和 web.config 文件添加到 WCF 服务类库项目，而不是在 c:\intepub\wwwroot 下创建新文件夹。

# android - Android中的活动突然崩溃

> ID：10247489
> 
> 赞同：0
> 
> 时间：2012-04-20T13:43:57.187
> 
> 标签：android, android-listview

我正在 android 中开发一个应用程序，其中包含带有图像的列表视图、webviews、我们在日常应用程序中使用的许多常见视图。我的应用程序运行正常，但是当我运行它 3 或 4 次时，它突然从当前活动中崩溃并转到上一个活动。我不知道为什么。它没有给出任何异常或错误。我再次启动该活动 3 或 4 次，它正常工作并再次崩溃。谁能告诉我为什么会发生。可能是内存管理。

主要是它在列表视图活动中崩溃了。但是，如果它在 listview 上使用数据加载而崩溃，则必须给出异常。我还使用过线程、imagesloader、viewholder。但是找不到问题所在！

ListView 的适配器是：

```
public class SavedAdapter extends BaseAdapter {

Context context;
JSONArray jsonArraySaved;
JSONObject jsonObjectSaved;
String user_id = "", distance = "";

public SavedAdapter(Context context, JSONArray jsonArraySaved) {
    this.context = context;
    this.jsonArraySaved = jsonArraySaved;       
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return jsonArraySaved.length();
}

@Override
public JSONObject getItem(int position) {
    // TODO Auto-generated method stub
    try {
        return jsonArraySaved.getJSONObject(position);
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

public static class ViewHolder {
    public GothicBoldTextView textViewFullName, textViewDistance;
    public GothicTextView textViewHeadLine, textViewTags;
    public ImageView imageViewPhoto;        
}

@Override
public View getView(final int position, View rawView, ViewGroup parent) {
    // TODO Auto-generated method stub      
    ViewHolder viewHolder;
    if (rawView == null) {
        rawView = LayoutInflater.from(context).inflate(
                R.layout.featured_events_list_item3, null);
        viewHolder = new ViewHolder();
        viewHolder.textViewFullName = (GothicBoldTextView) rawView
                .findViewById(R.id.textViewFullName);
        viewHolder.textViewHeadLine = (GothicTextView) rawView
                .findViewById(R.id.textViewHeadLine);
        viewHolder.textViewTags = (GothicTextView) rawView
                .findViewById(R.id.textViewTags);
        viewHolder.textViewDistance = (GothicBoldTextView) rawView
                .findViewById(R.id.textViewDistance);
        viewHolder.imageViewPhoto = (ImageView) rawView
                .findViewById(R.id.imageViewPhoto);
        rawView.setTag(viewHolder);
    } else {
        viewHolder = (ViewHolder) rawView.getTag();
    }
    try {
        jsonObjectSaved = getItem(position);
        if (jsonObjectSaved.has("distance")) {
            distance = jsonObjectSaved.getString("distance");
            viewHolder.textViewDistance.setText(AccessClass
                    .getDistance(distance));
        }
        if (jsonObjectSaved.has("profile")) {
            jsonObjectSaved = jsonObjectSaved.getJSONObject("profile");
            if (jsonObjectSaved.has("firstname"))
                viewHolder.textViewFullName.setText(jsonObjectSaved
                        .getString("firstname"));
            if (jsonObjectSaved.has("lastname"))
                viewHolder.textViewFullName
                        .setText(viewHolder.textViewFullName.getText()
                                + " "
                                + jsonObjectSaved.getString("lastname"));
            if (jsonObjectSaved.has("headline"))
                viewHolder.textViewHeadLine.setText(jsonObjectSaved
                        .getString("headline"));
            if (jsonObjectSaved.has("tags")) {
                String tags = "";
                for (int i = 0; i < jsonObjectSaved.getJSONArray("tags")
                        .length(); i++) {
                    tags += jsonObjectSaved.getJSONArray("tags")
                            .getJSONObject(i).getString("name")
                            + ", ";
                }
                viewHolder.textViewTags.setText(tags.substring(0,
                        tags.length() - 2));
            }
            if (jsonObjectSaved.has("avatar_thumb")) {

                if (!jsonObjectSaved.getString("avatar_thumb").equals(
                        "/avatars/thumb/missing.png")) {
                    viewHolder.imageViewPhoto.setTag(jsonObjectSaved
                            .getString("avatar_thumb"));
                    SplashActivity.imageLoader.displayImage(context
                            .getResources().getString(R.string.domain)
                            + jsonObjectSaved.getString("avatar_thumb"),                                
                            viewHolder.imageViewPhoto);

                } else if (!jsonObjectSaved.isNull("picture_url")) {                            
                    viewHolder.imageViewPhoto.setTag(jsonObjectSaved
                            .getString("picture_url"));
                    SplashActivity.imageLoader.displayImage(
                            jsonObjectSaved.getString("picture_url"),                               
                            viewHolder.imageViewPhoto);
                }
            } else if (jsonObjectSaved.has("picture_url")
                    && !jsonObjectSaved.isNull("picture_url")) {                    
                viewHolder.imageViewPhoto.setTag(jsonObjectSaved
                        .getString("picture_url"));
                SplashActivity.imageLoader.displayImage(
                        jsonObjectSaved.getString("picture_url"),                           
                        viewHolder.imageViewPhoto);
            } else {                    
                viewHolder.imageViewPhoto.setTag("null");
                viewHolder.imageViewPhoto.setImageResource(R.drawable.photo2);
            }
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
    rawView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                Intent intent;
                intent = new Intent(context, PublicProfileActivity.class);
                intent.putExtra("public_profile_id", ""
                        + getItem(position).getString("id"));
                context.startActivity(intent);
            } catch (Exception e) {
                // TODO: handle exception
                e.printStackTrace();
            }
        }
    });
    rawView.invalidate();
    return rawView;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:13:52.153

我想你可能

```
adapter.imageLoader.clearCache();
adapter.imageLoader.stopThread();
listView.setAdapter(null); 
```

# symfony - Symfony2 的安全性？

> ID：10247496
> 
> 赞同：0
> 
> 时间：2012-04-20T13:44:19.630
> 
> 标签：symfony, symfony-security

我用 symfony2 创建了一个简单的应用程序。用户可以使用他/她的用户名和密码登录。我为登录屏幕创建了一个简单的视图，然后我检查了控制器中的用户凭据。我没有使用 symfony2 安全性。这是我的控制器代码：-

```
namespace College\UserBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;

use College\UserBundle\Entity\User;
use College\UserBundle\Entity\Usertype;
use College\UserBundle\Form\LoginForm;
use College\UserBundle\Form\RegisterForm;

class UserController extends Controller
{

public function indexAction()
{
$entity = new User();
    $form = $this->createForm(new LoginForm(), $entity);
    $request = $this->getRequest();

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        if ($form->isValid()) {
        $em = $this->getDoctrine()
              ->getEntityManager();
        $em->persist($entity);
        $userrepository = $em->getRepository('CollegeUserBundle:User');
        $auth = $userrepository->findOneBy(array('login' => $entity->getLogin(), 'password' => $entity->getPassword()));
        if($auth)
        {

            $session = $this->getRequest()->getSession();
            $session->set('user', $auth);
            $this->get('session')->setFlash('notice', 'You Have Successfully Logged In!');
            return $this->redirect($this->generateUrl('CollegeUserBundle_home'));

        }
        else
        return $this->render('CollegeUserBundle:User:loginpage.html.twig',array(
                'form' => $form->createView(), 'error' => 'Please Correct Your Login Details And Enter the Correct login and Password', ));
        }
     }

     return $this->render('CollegeUserBundle:User:loginpage.html.twig',array(
        'form' => $form->createView()
    ));
}

public function loginAction()
{
    $session = $this->get('session')->get('user');
    return $this->render('CollegeUserBundle:User:home.html.twig', array(
                 'info'      => $session,));
}

public function logoutAction()
{
     $this->get('request')->getSession()->invalidate();
     return $this->redirect($this->generateUrl('CollegeUserBundle_index'));
} 
```

## 路由.yml

```
CollegeUserBundle_index:
    pattern:  /
    defaults: { _controller: CollegeUserBundle:User:index }
    requirements:
        _method:  GET|POST

CollegeUserBundle_home:
    pattern:  /home
    defaults: { _controller: CollegeUserBundle:User:login }
    requirements:
        _method:  GET|POST

CollegeUserBundle_logout:
    pattern:  /logout
    defaults: { _controller: CollegeUserBundle:User:logout }
    requirements:
        _method:  GET 
```

## 实体（User.php）

```
 This file contains all user details including Username, Created Date, login, password and usertype. 
```

现在我想用 symfony 安全性做所有的认证和授权。我阅读了[教程](http://symfony.com/doc/current/book/security.html)，但无法理解所有内容。就像我如何使用我的同一个控制器进行身份验证，它如何使用 ADMIN_ROLE、USER_ROLE，我是否需要为这些角色创建一个表。我有很多与这个主题相关的困惑。到目前为止，我发现该教程很棒，但是我迷路了，需要可以帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:05:05.683

看看我的security.yml，我的用户如果想查看任何页面都必须登录（否则他们会重定向到登录表单）

```
firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    login:
        pattern:   ^/(login$|register|resetting) 
        anonymous: true                          
    main:
        pattern: ^/                      
        form_login:                      
            login_path: /login              
            check_path: /login_check            
            username_parameter: _login
            password_parameter: _password
        remember_me:
            key:         %secret%       
        anonymous:       false           
        provider:        main
        logout:          true            
        logout:
            path: /logout
            target: / 
```

请注意用户名和密码参数，它们必须与登录表单的用户名和密码字段名称相同。

关于角色，我创建了一个与我的用户实体具有多对多关系的角色实体（表）。所以角色实体只是一个表，其中包含我的角色及其关系表的 ID。

希望我很清楚，我可以帮助你。

# java - 是否可以使用 ArrayLists 在 Java 中同时编写队列和堆栈？

> ID：10247499
> 
> 赞同：0
> 
> 时间：2012-04-20T13:44:31.817
> 
> 标签：java, arraylist, stack, queue

是否可以使用 ArrayLists 在 Java 中同时编写队列和单独的堆栈实现？

我的任务是编写一个队列和一个堆栈作为数组列表，并且我不允许使用队列和堆栈的 Java 实现或我之前帖子中人们指出的定义的类，即我必须编写自己的方法。

我已经看到了使用数组完成此操作的示例，即给出堆栈和队列的数组实现。我想做同样的事情，但这次使用 ArrayList。

有没有人使用 Arraylist 数据类型实现队列和堆栈？还有我需要注意的问题。如果您能指出一些例子，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:56:09.997

> 还有我需要注意的问题

主要问题是解释为什么当您有许多内置实现来执行这些操作时，您为什么要开发自己的堆栈和队列。

您将遇到的另一个问题是，虽然可以使用 ArrayList 有效地实现 Stack，但 LinkedList 是 Queue 的更好选择。

> 我不知道我正在学习的java

我会尝试专注于可能有用的事情。Java 及其库是一个庞大的主题，您必须确定您必须知道什么以及如果您需要知道什么可以查找。

我建议你看看这个网站至少对所有这些产品有一个想法。[http://java-source.net/](http://java-source.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:56:47.890

正如 spidey 评论的那样，List 的 add 和 remove 方法，以及它们的动态特性，使得实现 Stacks 和 Queues 变得特别容易。由于 ArrayList 和 LinkedList 都是 Lists，因此它们都可以用作 Stack 或 Queue 的基础。这将是一个很好的思考练习，以区分为什么每个构造可能会或可能不会比另一个更好。

# web-services - 有没有提供网页截图并支持https获取图片的服务

> ID：10247503
> 
> 赞同：2
> 
> 时间：2012-04-20T13:44:39.890
> 
> 标签：web-services, https, screenshot

我正在寻找一个免费的网络服务，它可以获取并提供网站的屏幕截图。此屏幕截图将用作完全使用 https 协议提供的网站上链接的预览图像。

为了避免诸如“您正在加载不安全的内容”之类的浏览器警告，该服务必须提供 https 协议并且应该具有签名证书。

有很多提供屏幕截图的服务。查看讨论： [https](https://stackoverflow.com/questions/1342611) ://stackoverflow.com/questions/1342611列表中还提到了[https://browshot.com/](https://browshot.com/)，它支持 https，但免费版本非常有限。

# excel - 通过电子邮件发送活动工作簿的压缩版本

> ID：10247504
> 
> 赞同：3
> 
> 时间：2012-04-20T13:44:41.337
> 
> 标签：excel, vba

我想使用 Outlook 通过电子邮件发送我的工作簿的压缩副本。
如何扩展下面的宏，以便它附加一个压缩的工作簿？

```
Sub EmailWorkbook()

Dim OL As Object, EmailItem As Object
Dim Wb As Workbook

Application.ScreenUpdating = False
Set OL = CreateObject("Outlook.Application")
Set EmailItem = OL.CreateItem(olMailItem)
Set Wb = ActiveWorkbook
Wb.Save
With EmailItem
    .Subject = "COB" & Format(Range("yesterday"), "ddMMMyy")
    '.Body = ""
    .To = "somewhere@maildomain.com"
    '.Cc = ""
    '.Bcc = ""
    .Importance = olImportanceNormal
    .Attachments.Add Wb.FullName
    .Display
End With

Application.ScreenUpdating = True

Set Wb = Nothing
Set OL = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T18:30:53.817

```
Sub NewZip(sPath)
'Create empty Zip File
'Changed by keepITcool Dec-12-2005
    If Len(Dir(sPath)) > 0 Then Kill sPath
    Open sPath For Output As #1
    Print #1, Chr$(80) & Chr$(75) & Chr$(5) & Chr$(6) & String(18, 0)
    Close #1
End Sub

Function bIsBookOpen(ByRef szBookName As String) As Boolean
' Rob Bovey
    On Error Resume Next
    bIsBookOpen = Not (Application.Workbooks(szBookName) Is Nothing)
End Function

Function Split97(sStr As Variant, sdelim As String) As Variant
'Tom Ogilvy
    Split97 = Evaluate("{""" & _
                       Application.Substitute(sStr, sdelim, """,""") & """}")
End Function

Sub Zip_File_Or_Files()
    Dim strDate As String, DefPath As String, sFName As String
    Dim oApp As Object, iCtr As Long, I As Integer
    Dim FName, vArr, FileNameZip

    DefPath = Application.DefaultFilePath
    If Right(DefPath, 1) <> "\" Then
        DefPath = DefPath & "\"
    End If

    strDate = Format(Now, " dd-mmm-yy h-mm-ss")
    FileNameZip = DefPath & "MyFilesZip " & strDate & ".zip"

    'Browse to the file(s), use the Ctrl key to select more files
    FName = Application.GetOpenFilename(filefilter:="Excel Files (*.xl*), *.xl*", _
                    MultiSelect:=True, Title:="Select the files you want to zip")
    If IsArray(FName) = False Then
        'do nothing
    Else
        'Create empty Zip File
        NewZip (FileNameZip)
        Set oApp = CreateObject("Shell.Application")
        I = 0
        For iCtr = LBound(FName) To UBound(FName)
            vArr = Split97(FName(iCtr), "\")
            sFName = vArr(UBound(vArr))
            If bIsBookOpen(sFName) Then
                MsgBox "You can't zip a file that is open!" & vbLf & _
                       "Please close it and try again: " & FName(iCtr)
            Else
                'Copy the file to the compressed folder
                I = I + 1
                oApp.Namespace(FileNameZip).CopyHere FName(iCtr)

                'Keep script waiting until Compressing is done
                On Error Resume Next
                Do Until oApp.Namespace(FileNameZip).items.Count = I
                    Application.Wait (Now + TimeValue("0:00:01"))
                Loop
                On Error GoTo 0
            End If
        Next iCtr

        MsgBox "You find the zipfile here: " & FileNameZip
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-22T21:37:04.523

下载并安装[7-Zip](http://www.7-zip.org/)，然后修改现有代码，如下所示：

```
Sub EmailWorkbook()
    Dim OL As Object, EmailItem As Object
    Dim xlWbName As String, xlWbPath As String, ext As String

    'Set xlWb file name and path
    xlWbName = "ENTER FILE NAME HERE"
    xlWbPath = "C:\ENTER\FILE\FOLDER\HERE"
    ext = "ENTER FILE EXTENSION HERE"

    Set OL = CreateObject("Outlook.Application")
    Set EmailItem = OL.CreateItem(olMailItem)

    'Make sure file xlWbName.ext is closed or close it before running the next line
    Shell "C:\Program Files\7-Zip\7z.exe" & " a -tzip """ & xlWbPath & "\" & xlWbName & ".zip"" """ & xlWbPath & "\" & xlWbName & ext & """"

    With EmailItem
        .Subject = "Enter subject here"
        '.Body = ""
        .To = "somewhere@maildomain.com"
        '.Cc = ""
        '.Bcc = ""
        .Importance = olImportanceNormal
        .Attachments.Add xlWbPath & "\" & xlWbName & ".zip"
        .Display
    End With

    Set OL = Nothing
End Sub 
```

我测试了上面的代码，它成功地附加了压缩文件。

# javascript - jsTestDriver：运行测试时出现org.jvyaml.ParserException

> ID：10247507
> 
> 赞同：0
> 
> 时间：2012-04-20T13:44:45.183
> 
> 标签：javascript, exception, js-test-driver, sinon

我尝试使用 jsTestDriver 运行 javascript 测试。当我开始测试时，发生了异常。

![异常描述](../Images/221fac6e2dbd3d83553e0ac86a29da77.png)

当 jsTestDriver 的 .conf 文件在 args 中只包含一个文件路径时，不会出现该问题，例如：

```
plugin:
 - name: "coverage"
   jar: "plugins/coverage-1.3.4.b.jar"
   module: "com.google.jstestdriver.coverage.CoverageModule"
   args: "/examplepath/data/jsdevelopment/src/webhome/bp2011/js/external/jquery.js"

timeout: 60 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:16:07.043

我的问题是我用引号分割了 args 中的路径

```
args: "/examplepath/data/jsdevelopment/src/webhome/bp2011/js/external/jquery.js", "/examplepath2/data/jsdevelopment/src/webhome/bp2011/js/external/jquery.js" 
```

解决方案是：

```
args: "/examplepath/data/jsdevelopment/src/webhome/bp2011/js/external/jquery.js,/examplepath2/data/jsdevelopment/src/webhome/bp2011/js/external/jquery.js" 
```

# jquery - 如何使用 jquery 抓取并发送下拉菜单的显示文本而不是值

> ID：10247508
> 
> 赞同：1
> 
> 时间：2012-04-20T13:44:46.527
> 
> 标签：jquery

我正在使用这一点 jquery 将从我的下拉列表中选择的值放入隐藏的文本字段中。这很好用——从这个论坛上的一个人那里得到的！！！，但我的代码又遇到了一个转折，我需要做同样的事情，但这次我需要将**显示文本**发送给另一个我将创建的隐藏文件。使用此代码，我要更改什么来获取**显示文本**而不是关联值。 **例如，如果我有：**

```
<select id="firstbox">
<option value="TM">Time Warner</option>
<option value="CC">Comcast</option>
<option value="HC">Hartford Cable</option>
</select> 
```

**如何更改下面的代码以获取和发送“时代华纳”、“康卡斯特”或“哈特福德有线电视”？**

```
$(document).ready(function() {
        $("select#2135, select#4436, select#4437").change(function(){
            $("#4443").val($(this).val());
        })
        .trigger('change');
    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:46:50.623

在所选选项上使用`.text()`而不是`.val()`

```
$(this).find(":selected").text() 
```

* * *

*`ids`也应该以字母开头*

# umbraco - umbraco - 网站图片

> ID：10247513
> 
> 赞同：2
> 
> 时间：2012-04-20T13:44:51.780
> 
> 标签：umbraco, templating

我有一个具有结构的静态站点

```
index.html
-css
-img
-js 
```

简单的问题如何将 js 和 img 文件夹放入 umbraco 结构中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:17:13.813

您不会说您使用的是 Umbraco 4 还是 5。

为此，我将假设 Umbraco 4。

如果您希望 umbraco 后端中的 JS 文件可编辑，您需要将它们添加到脚本文件夹中。再次位于网站的根目录。如果您不希望它们可编辑并希望将它们保留在 js 文件夹中，只需将该文件夹复制到站点的根目录，然后更新 web.config 中的 umbracoReserverdPaths 条目以包含 js：

```
<add key="umbracoReservedPaths" value="~/umbraco,~/install/,~/fonts,~/js" /> 
```

相同的主体应用于 img 文件夹，您可以将其添加到 web.config 中的 umbracoReservedPaths：

```
<add key="umbracoReservedPaths" value="~/umbraco,~/install/,~/fonts,~/js,~/img" /> 
```

如果您想在 Umbraco 的媒体部分中编辑“/img”中的图像，您需要将它们导入媒体库。

这很简单，使用桌面媒体上传器（可以从媒体部分下载），只需上传 img 文件夹中的所有图像。

我希望这有帮助

吨

# com - Outlook 2007 - 如何将 RTF 文本插入 AppointmentItem

> ID：10247518
> 
> 赞同：2
> 
> 时间：2012-04-20T13:45:18.060
> 
> 标签：com, outlook, outlook-2007, outlook-2010

我在 Outlook 2007 中工作，我需要将 RTF 文本插入到`AppointmentItem`. 我发现一些帖子声称您可以使用这样那样的方式做到这一点，但没有显示如何做到这一点的实际代码。到目前为止我发现的最好的来源是[这里](https://stackoverflow.com/questions/555156/outlook-appointmentitem-how-do-i-programmatically-add-rtf-to-its-body)

我跟着它，但最后没有任何东西被插入到约会项目中。

以下是我所拥有的：

```
Word.Document wd = AppointmentItem.GetInspector.WordEditor as Word.Document;

// *Assume that I have all the RTF text that I want to copy set up and ready in the clipboard and is ready to be inserted(copied) into the Appointment Item.

//This doesnt seem to work
wd.Content.Select();
wd.Content.Paste();

//This also doesnt seem to work
(AppointmentItem.GetInspector.WordEditor as Word.Document).Content.Select();
(AppointmentItem.GetInspector.WordEditor as Word.Document).Content.Paste(); 
```

因此，根据我所阅读和看到的内容，这就是您假设将 RTF 插入约会项目的方式，但我仍然无法将任何内容放入`AppointmentItem`.

现在，如果我看一下这个变量，那就这么说吧：

```
(AppointmentItem.GetInspector.WordEditor as Word.Document).Content.Text; 
```

但是如果我看`AppointmentItem.Text`它仍然没有改变。

现在没有功能，`AppointmentItem.paste()`或者`AppointmentItem.text.paste()`您无权访问约会项目中的 RTF 变量。

那么谁能告诉我我错过了什么？如何将`AppointmentItem`RTF 文本粘贴到`AppointmentItem`.

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T20:29:48.833

问题是您没有指定复制和粘贴的选择。复制和粘贴的工作方式与用户进行复制和粘贴完全一样，您必须先选择所需的范围。

尝试

```
wd.Sections[1].Range.Copy();
document.Range(0, 0).PasteAndFormat(Word.WdRecoveryType.wdPasteDefault); 
```

您可以找到与此类似的一篇好文章是 Tom_Xu MSFT 在名为“[在 Outlook.MailItem 中加载 .doc 文件内容](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/02056c49-f3ac-4e46-bedf-2c6f849d7bce)”的线程中写到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-09T15:03:12.753

对于任何试图通过 Office 2010、2013 解决此问题的人：

```
string sRtfBody = "{\rtf1\ansi\ansicpg1252\deff0\deflang1033{\fonttbl{\f0\fnil\fcharset0 Century Gothic;}}\viewkind4\uc1\pard\f0\fs20 This course will help you appreciate the beauty of numbers in some ways that you may have never considered.\par}";
Outlook.AppointmentItem aiMeeting = (Outlook.AppointmentItem)this._Outlook.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olAppointmentItem);
aiMeeting.RTFBody = Encoding.ASCII.GetBytes(sRtfBody); 
```

# asp.net - 列表视图 - 使用分页突出显示所选项目 - Asp.Net

> ID：10247520
> 
> 赞同：1
> 
> 时间：2012-04-20T13:45:33.633
> 
> 标签：asp.net

我在第一列中有一个带有按钮控件的列表视图。当我单击按钮控件时，我可以看到选定的行被突出显示。当我导航到列表视图的第 2 页或第 n 页并单击按钮时，我的行没有被选中或基本上被突出显示。

感谢任何帮助。

谢谢

# spring - 如何确定实际使用了哪些 JAR？

> ID：10247521
> 
> 赞同：6
> 
> 时间：2012-04-20T13:45:35.983
> 
> 标签：spring, jakarta-ee, dependencies, websphere, classloader

我试图找出总共 83 个 JAR 中的哪些 JAR 库实际上被一组 12 个 Java EE/Spring 项目使用。所有 JAR 都在一个 EAR 之下。开发在 Eclipse 中完成，构建工具是 Ant。所有项目都在 WebSphere Application Server 6.0 上运行。

这个问题：[如何找出使用过的 JAR？](https://stackoverflow.com/questions/4734527/how-to-figure-out-used-jars)

指向这个：[如何分析Java程序中使用的是哪个jar文件？](https://stackoverflow.com/questions/950642/how-to-analyse-which-jar-file-is-used-in-a-java-program)

它建议`java`使用参数调用可执行文件`-verbose:class`，但如果这在这里有用，那么在项目在我的本地 WAS 6.0 上运行的情况下，我该怎么做？

这个问题似乎更指向了正确的方向：[如何找到类加载器加载哪些 jars 以及以什么顺序加载？](https://stackoverflow.com/questions/2179858/how-to-find-which-jars-and-in-what-order-are-loaded-by-a-classloader)

但是，我不熟悉类加载器是如何工作的，如何判断我的类加载器实例是什么（回复表明[URLClassLoader](http://java.sun.com/javase/6/docs/api/java/net/URLClassLoader.html)有一个`getURLs()`提供对 jars/目录列表的访问的方法），以及我的类加载器实例是否不是 URLClassLoader，我从那里去哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T02:02:28.833

打开详细的类加载（由 dims 建议）

查看管理控制台，您将看到一个类加载器查看器，其中显示了所需的信息。

类加载器具有用于加载类的标准层次结构。

看看这个： [http ://www-01.ibm.com/support/docview.wss?uid=swg27023549&aid=1](http://www-01.ibm.com/support/docview.wss?uid=swg27023549&aid=1)

本演示文稿很好地介绍了事物在 WebSphere 环境中的工作方式。

高温高压

芒鲁

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T17:00:32.850

对于 WebSphere 6.1，您可以使用“-verbose:dynload”选项（参见[WebSphere Application Server V6.1：Classloader Problem Determination Redbook](http://www.redbooks.ibm.com/abstracts/redp4307.html)的第 52 页）。您将在 native_stderr.log 中看到输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:55:50.377

您可以尝试使用类似[http://www.jboss.org/tattletale](http://www.jboss.org/tattletale)的内容。这可以告诉你哪些罐子没有被使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:03:13.067

这个问题的通用答案可能很棘手。由于 Java 动态加载类，一些 jars/类可能不会被加载，除非你的程序的所有功能都被执行（想想 Class.forName("foo") 作为一个简单的例子）。因此，任何类型的静态依赖分析都可能无法呈现 100% 完整的画面，您可能必须在应用程序执行时分析正在运行的应用程序，最好是点击所有代码分支。

作为粗略的第一个近似值，要查看是否有根本没有打开的 jar，您可以尝试查看应用程序运行时操作系统（Unix 上的“lsof”）报告的 webSphere 进程的打开文件列表. 如果 jar 没有被列为已打开，则很好地表明它没有被加载/使用，但反向不是必需的，因为 Websphere 可以扫描 jar 以获取注释等。

# vb.net - 从 mySQL DB 循环中为 ComboBox 项赋值

> ID：10247522
> 
> 赞同：1
> 
> 时间：2012-04-20T13:45:37.720
> 
> 标签：vb.net, combobox

因此，我能够使用正确的“clientLocations”列表填充组合框。

但是它们的 valueMember 都为 0；因此，手头的问题是将组合框项目的值正确分配给数据库列（在数据集中返回），而不仅仅是名称。

```
Private Sub updateClientLocationComboBox()
    'clear list
    comboBox_clientLocations_deviceList.Items.Clear()
    'get dataset from database
    Dim ds As DataSet = GetClientLocations(_objHost, CInt(comboBox_clients.SelectedValue))

    'force insert an "All Locations" datarow
    Dim allClientRow As DataRow = ds.Tables(0).NewRow
    allClientRow(0) = 0
    allClientRow(1) = "--All Locations--"
    ds.Tables(0).Rows.InsertAt(allClientRow, 0)

    'Check for table in dataset; if exist loop and populate comboBox
    If Not ds Is Nothing AndAlso ds.Tables.Count > 0 Then
        For Each A As DataRow In ds.Tables(0).Rows
            comboBox_clientLocations_deviceList.Items.Add(A("Name").ToString)
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:35:55.500

如果我没看错，我想你想用你的数据集来做这个：

```
If Not ds Is Nothing AndAlso ds.Tables.Count > 0 Then
    With comboBox_clientLocations_deviceList
        .DataSource = ds.Tables(0)
        .DisplayMember = "Name"
        .ValueMember = "WhateverCol(0)IsCalled"
    End With
End if 
```

然后，使用 comboBox_clientLocations_deviceList SelectedText 和 SelectedValue 属性应该可以工作。

# java - 未分配静态值并返回空值

> ID：10247525
> 
> 赞同：0
> 
> 时间：2012-04-20T13:45:47.037
> 
> 标签：java, static, junit

我有类似的东西

```
public class Toys {

public static Toy BAT = Registry.getToy("BAT");
public static Toy DOLL = Registry.getToy("DOLL");

} 
```

Registry 跟踪所有类型为 Toy 的对象。当提供密钥时，它将返回有效的玩具实例。

当我这样做时，Toys.BAT，它给了我空值，但 Registry.getToy("BAT") 用有效的玩具实例返回给我。

公共类注册表{

```
private static final HashMap<String, Toy>  _toysMap = new HashMap<String, Toy>();

public static void putToy( String toyCode, Toy toy) {
    _toysMap.put( toyCode, Toy ) ;
}

public static Toy getToy(String toyCode ) {
    return _toysMap.get( toyCode);
} 
```

}

有什么我想念的非常明显的东西吗？

另外，我同时调用 Registry.getToy("BAT") 和 Toys.getToy("BAT") ..

这是失败的 TestRegistry

导入静态 org.junit.Assert.*；

导入 org.junit.Before；导入 org.junit.Test；

公共类TestRegistry {

```
@Before
public void setUp() throws Exception {
    System.out.println(Toys.BAT);
    Registry.putToy("BAT", new Toy());
    Registry.putToy("DOLL", new Toy());
}

@Test
public void test() {
    System.out.println(Registry.getToy("BAT"));
    System.out.println(Toys.BAT);
    assertTrue(Registry.getToy("BAT") == Toys.BAT);
} 
```

}

以上印刷品

null - 注册表不包含玩具

Toy@80cac9 - Registry 现在有玩具了

null - Toys.BAT 仍然有 null 值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:52:31.930

当然，必须查看代码`Registry`才能知道问题出在哪里。

但一般来说，像这样初始化静态变量是不安全的。也许在课程的加载时间`Toys`仍然`Registry`没有正确加载所有玩具条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:48:25.820

你检查过 Bat 和 BAT 的情况吗

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T15:28:03.783

```
@Before
public void setUp() throws Exception {
    System.out.println(Toys.BAT); --> Loads class and initializes static variables
    Registry.putToy("BAT", new Toy()); --> populates Registry (HashMap)
    Registry.putToy("DOLL", new Toy()); --> populates Registry (HashMap)
} 
```

您需要在加载 Toys 类**之前初始化注册表中的值。**我同意评论者说这不是初始化这些的好方法。

# sql-server - 即使值较低，SSRS 条形图也会显示数据

> ID：10247526
> 
> 赞同：1
> 
> 时间：2012-04-20T13:45:48.367
> 
> 标签：sql-server, ssrs-2008, reporting-services

见图片： ![在此处输入图像描述](../Images/81727de8a9cccb3a4f330477411231c8.png)

橙色项总是显着低于蓝色项，但是图表上的橙色是不显示的，有没有办法不管橙色值多低，总是有一条橙色的小线，以便用户可以清楚地看到哪个数字是指橙色值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T03:56:41.460

有一种更简单、更优雅的方法可以做到这一点（至少在 SSRS 2008 R2 中）。我不确定 SSRS 2008 或 2005 中有什么可用的。

对于要显示小值的轴，

*   将`CrossAt`和`Minimum`属性设置为负数，大到足以显示在报表上。
*   将该`IntervalOffset`属性设置为相同的数字，但为正数。

这将使报表的另一个轴低于 0，因此非常低（甚至为 0）的值仍会显示少量颜色。您选择的负值和图表的最大值将决定此颜色切片的大小。

这是此技术的示例，用于显示 0% 的少量颜色：

![显示 0% 的条形图](../Images/ecf0416b424dcc2dd0027167c9ffc8fd.png)

如果您忽略该`CrossAt`属性，则条形图会远离 y 轴，留下一个间隙。您必须使用我上面提到的所有属性才能使颜色一直超过 0 到轴线。

重要提示：设计模式下的图表将无法正确显示。它将显示从 x 轴开始的负数而不是 0，但不要相信你的眼睛。当您实际预览报告时，结果将是正确的。不要让自己被设计模式预览所迷惑！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T14:29:23.557

根据对最终用户最重要的事情，我使用了几种解决方法：

1) 将数据栏增加最大值的 1% - 即字段 B + (MAX(Fields!a.value) / 100)，然后确保数据标签仅显示字段 B 的值，以便数据栏不会100% 准确，但标签会准确。

2) 在辅助轴上绘制字段 B 的数据，然后将最大值固定为最大字段 A 值的比例。

这两者都依赖于没有包含值的轴，而是从标签本身派生的值。

3) 将条形的数据标签格式化为蓝色/橙色字体或蓝色/橙色填充 - 当您需要保留轴上的值时，这是最有用的。然后，如果值太小而无法在条形图中显示（即 < 最大图表值的 1%），您可以使用条件格式仅对标签着色。

就我个人而言，我会推荐选项 3），因为如果稍后有其他开发人员出现，则可能会出现操纵数据条长度的问题！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T07:46:50.723

1) 将图表中的 MAX 值存储到变量 (nChartMaxVal)。

2）创建一个函数以放置在您的图表上，只要出现值引用：

伪代码：

```
SubstValueNegligableValue( pValue, nChartMaxVal) as Double
                If pValue < (nChartMaxVal / 10) then

                    pValue = nChartMacVal / 10    'Sets Value to 10% of MaxChartValue'

                Endif

                Return pValue 
```

3) pValue 应该是您要评估的图表值。

希望这可以指导您。

如果您使用的是存储过程，那么您可以在其中构建此逻辑并在适用的情况下返回调整后的值。我建议让 proc 返回一个标志，尽管它表示是否已进行替换，以便您可以在某处自动对您的报告进行评论，告诉查看图表的用户已经进行了替换。

有关条件格式，请参阅上面的 Davins 输入。这将有助于从真实值中指示替代值。即，可以用相同的颜色对替代值进行交叉影线以显示差异。

干杯

苹果电脑

# android - Eclipse 没有找到我的 HTC Sensation

> ID：10247530
> 
> 赞同：4
> 
> 时间：2012-04-20T13:46:02.000
> 
> 标签：android, eclipse, htc-android

### 我不再有我的感觉，所以显然这对我来说不再是问题。我决定不删除这个问题，因为它可能会帮助其他有同样问题的人。

感谢您提供的所有帮助！

* * *

我正在尝试为我的 HTC Sensation（ICS，4.0.3）编写应用程序，但 Eclipse 没有找到它。当我按下运行“[应用程序名称]”按钮时，我只收到消息“找不到兼容的目标。你想添加新的 android 虚拟设备吗？”，“Android 设备选择器”中没有显示任何设备如图所示。
我和我的朋友索尼爱立信 XPERIA X10 Mini Pro (2.1-update1) 一起尝试过，效果很好。
我尝试使用该应用程序的 2.1、2.3.3 和 4.0.3 版本，但没有一个适用于我的 Sensation。
我激活了 USB 调试、保持清醒和允许模拟位置。
我已经用谷歌搜索了几天，但我还没有找到解决方案。例如，我尝试了以下方法（在[此处](https://stackoverflow.com/questions/2236818/android-avd-manager-wont-detect-my-htc-hero-phone-as-virtual-device)找到）：

1.  确保您的项目在清单 android:debuggable="true" 中设置为可调试
2.  在 Hero 上确保它设置为远程调试
    菜单 > 设置 > 应用程序 > 开发 > USB 调试（我从[http://developer.android.com/sdk/win-usb.html](http://developer.android.com/sdk/win-usb.html)获得的接下来的三个步骤）
3.  安装 HTC 同步 (3.0)
4.  使用 USBDeview 删除设备
5.  插入设备
6.  通过运行“C:\Program Files\android-sdk-windows\platform-tools\adb.exe devices”添加检查设备，这表示服务器已过时并自动终止并重新启动它并显示我的设备已连接。
7.  还运行它以确保安全 "C:\Program Files\HTC\HTC Sync 3.0\adb.exe devices"
8.  然后在eclipse中点击调试工具栏项上的下拉菜单 > Debug Configurations... 删除所有现有配置并关闭
9.  下次调试时，它会找到 HTC Hero 并在其上运行调试

我试过“运行配置->目标->选择'手动'而不是'自动'”

我已经通过[HTC.com的 HTC Sync 安装了 Google USB 驱动程序和我的手机驱动程序](http://www.htc.com/www/help/htc-sensation/#download)

*编辑：*
**我还有一些问题：**

*   我应该使用什么版本的 Eclipse？我从 Classic 开始，但我的一个朋友建议我改用*Eclipse IDE for Java EE Developers* -version。
*   我应该在手机上使用什么连接类型？仅限充电？宏达同步？我假设它不是磁盘驱动器？
*   当我在启动 Eclipse 后第一次尝试运行项目时，它告诉我 `ensure that adb is correctly located at 'D:\Documents\Eclipse\android-sdks\platform-tools\adb.exe' and can be executed`，这是文件的目录，如果我去那里手动运行它，它可以工作，或者至少我克服了那个错误（那就是它告诉我我没有连接设备的时候）。

**一些快速信息：**

*   我在 MacBook Pro 上的 Boot Camp 中运行 Windows 8（64 位）Consumer Preview
*   我的手机是 HTC Sensation，Android 4.0.3，HTC Sense 3.6
*   面向 Web 开发人员的 Eclipse Java EE IDE，版本：Indigo Service Release 2，内部版本号：20120216-1857
*   亚行版本：1.0.29

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:38:47.703

我有同样的问题。我安装了[USB 网络共享驱动程序](http://www.htc.com/us/support/htc-sensation-4g-tmobile/software-updates)，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T11:39:40.353

我在这里写了一个答案：[HTC Sensation XE - debug in eclipse very bad performance](https://stackoverflow.com/questions/9708241/htc-sensation-xe-debug-in-eclipse-very-poor-performance/10719116#10719116)

请检查它是否适合您！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:38:10.430

我的 HTC Evo 也有类似的问题。[这篇文章](http://htcevohacks.com/htc-evo-hacks/how-to-install-android-sdk-and-adb-drivers-for-htc-evo-4g/)对我有用，它涉及在插入 USB 时将手机启动到恢复模式并从设备安装驱动程序。我意识到这是针对不同的设备，但同样的方法可能会奏效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-29T02:14:09.260

我对 Inspire 也有同样的问题。为随附的 USB 驱动程序安装 HTC Sync，然后将其卸载，因为它会在您连接手机时启动，并且因为它会启动自己的 adb，所以您最终会与它作斗争。在手机上打开USB调试，将USB连接设置为Drive。Charge 也可以，但 Drive 更好，因为 Eclipse Android Devices 视图将看到所有已安装的软件。设置完成后，您应该能够从命令行发出“adb devices”并将您的手机视为“在线”它还会与客户端的 eclipse 调用竞争，但这很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T13:50:55.163

尝试使用 adb shell 在 cmd 中连接设备，如果您没有在 $PATH 中输入 adb，请转到 Android sdk 文件夹并从那里尝试。

您还可以检查您的设备是否在 Windows 中的设备管理器中，它应该在 ADB 接口下

也许也可以尝试在 Eclipse 中运行->运行配置并将目标设置为手动。然后你应该可以安装你的设备

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-23T04:41:36.410

不知道你有没有找到解决办法。我遇到了与您确切提到的相同的问题。我尝试了谷歌搜索的所有解决方案，但没有任何效果......

然后我只需按下“恢复出厂设置”按钮（设置/存储），它就可以工作了！

所以如果你仍然有这个问题，也许你可以试试这个。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-05-11T12:26:44.177

我有 Windows 8 和 HTC 感觉，经过多次尝试和大量研究，对我有用的是在兼容模式下安装 HTC Sync 并安装 Windows 7 版本，在这样做之后，我的 Eclipse 检测到了该设备。

希望能帮助到你。

# javascript - 如何顺序调用一堆包含ajax的函数？

> ID：10247534
> 
> 赞同：1
> 
> 时间：2012-04-20T13:46:12.173
> 
> 标签：javascript, ajax

我正在开发一个包含一堆元素的窗口，每个元素都可以同时单独编辑。我使用 ajax 来引入编辑布局，然后再次使用 ajax 将其更改回显示给客户的方式。问题是，我希望在用户单击窗口范围的保存按钮时保存每个“打开以进行编辑”元素。

现在，有些人认为在图像周围使用锚标签而不是在它们上使用 onclick 函数会很有趣，所以我必须使用`eval`来调用这些函数。

这是我用于窗口范围保存按钮的代码。

```
var as = document.getElementsByClassName('link_salvare');
alert(as.length);
for(var i = 0; i < as.length; i++) {
    alert(i);
    eval(as[i].href);
}
alert('finished'); 
```

警报只是用来查看哪里出了问题，结果证明 for 结构在第一次迭代 (i=0) 后停止。我得到 as.length 为 2 （当我有 2 个“编辑”元素时）但我只得到 i=0 然后“完成”。

我尝试了异步和非异步 ajax 调用，使用异步调用我得到了上述结果，而使用同步调用我只是得到警报，并且没有保存任何元素。

我可以安排一次只编辑一个元素，但这必须等到周末之后才能获得更改单个保存功能的许可。

虽然这个特殊问题尚未解决，但我通过以下方式解决它

a) 更改 from`<a href="javascript:function"><img>`以`<img onclick="function">`避免使用 eval；

b) 更改窗口的设计，以便在任何时候都只能编辑一个元素。

我仍然不知道为什么“for”循环只经历了一次交互，但我现在没有时间调查，我能做的最好的就是希望它以后不会咬我的屁股；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:06:38.217

谈到`eval()`.... 并且说我没有看到任何其他问题.. 你谈论 ajax (XmlHttpRequest) 但你没有提供与之相关的错误或代码。

HTML

```
<a href="javascript:foo()" class="foobar">yoyo</a>
<a href="javascript:bar()" class="foobar">yoyo</a>​ 
```

Javascript

```
var elements = document.getElementsByClassName('foobar');

function foo() {
    alert('foo');
}

function bar() {
    alert('bar');
}

[].forEach.call(elements, function(element) {
    var func = element.href.split(':')[1],
        func_name = func.substring(0, func.lastIndexOf('('));
    window[func_name].call();
});​ 
```

我强烈建议您更改 HTML 源代码，而不是破解这样的解决方案。[http://jsfiddle.net/rlemon/4vgPn/2/](http://jsfiddle.net/rlemon/4vgPn/2/)

# asp.net-mvc - ASP.NET MVC DropdownlistFor 对象引用未设置为对象的实例？

> ID：10247535
> 
> 赞同：1
> 
> 时间：2012-04-20T13:46:18.457
> 
> 标签：asp.net-mvc, drop-down-menu

这是我的组合模型：

```
public class AddArticleModel
{
    public TBL_ARTICLES Article { get; set; }
    public IEnumerable<TBL_CATEGORIES> Categories { get; set; }
} 
```

以及使用模型的控制器。

```
public ActionResult AddArticle()
{
    AddArticleModel AddArticleModel = new AddArticleModel();
    AddArticleModel.Categories = entity.TBL_CATEGORIES.Select(a => a);

    return View(AddArticleModel);
} 
```

并查看：

```
@model DunyaYazilim.Models.AddArticleModel
@{
    ViewBag.Title = "AddArticle";
}
@using (Html.BeginForm((string)ViewBag.FormAction, "Home"))
{
    <fieldset>
        <legend>Add Article Form</legend>
        <ol>
            <li>
                @Html.DropDownListFor(m => m.Categories, Model.Categories.Select(c => new SelectListItem { Text = c.Name, Value = c.CategoryID.ToString() }), "-----Select Category----")
            </li>
        </ol>
        <input type="submit" value="Send" />
    </fieldset>
} 
```

并在控制器中发布方法：

```
[HttpPost]
public ActionResult AddArticle(AddArticleModel AddArticleModel)
{
   //Insert operations:
   return View(AddArticleModel);
} 
```

我的问题：当我发布表单时，出现错误：对象引用未设置为对象的实例。排队：13

```
Line 12:             <li>
Line 13:                 @Html.DropDownListFor(m => m.Categories, Model.Categories.Select(c => new SelectListItem { Text = c.Name, Value = c.CategoryID.ToString() }), "-----Select Category----")
Line 14:             </li>
Line 15:             <li> 
```

这是什么原因？

注意：这个网站上有很多例子。我尝试了很多，但我找不到错误的原因。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T13:54:57.223

我不确定您是否发布了 POST 操作的完整代码，但如果您发布了，那就错了。

当您将数据发布到服务器时，您不会发布 SelectList 的值。您只发布选定的值。如果您只是将视图显示给用户，则 SelectList 将为空。您需要在 Post 中重新填充它：

```
[HttpPost]
public ActionResult AddArticle(AddArticleModel AddArticleModel)
{
    AddArticleModel.Categories = entity.TBL_CATEGORIES.Select(a => a);

    return View(AddArticleModel);
} 
```

如果您只想返回选定的类别（看起来很奇怪），这将执行此操作：

```
[HttpPost]
public ActionResult AddArticle(AddArticleModel AddArticleModel)
{
    AddArticleModel.Categories = entity.TBL_CATEGORIES.Where(a => a.CategoryId == AddArticleModel.CategoryId);

    return View(AddArticleModel);
} 
```

这假设您的视图模型上的属性是 CategoryId，并且您的 TBL_CATEGORIES 实体上的属性也是 CategoryId。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T17:38:28.627

我解决了

我用这个：

```
<div>@Html.DropDownList("CategoryID", new SelectList(Model.Categories, "CategoryID", "Name"),"-----Select Category-----")</div> 
```

和我的控制器：

```
[HttpPost]
public ActionResult AddArticle(AddArticleModel AddArticleModel,String CategoryID)
{
    TBL_ARTICLES article = AddArticleModel.Article;
    article.CategoryID = Int32.Parse(CategoryID);
    //some code...

    return View();
} 
```

但我仍然不知道这是否是正确的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T13:53:55.293

检查条件中的 Model.Categories 是否为空。

```
@Html.DropDownListFor(m => m.Categories, Model.Categories != null ?               
       Model.Categories.Select
       (
        c => new SelectListItem 
        {
           Text = c.Name, 
           Value = c.CategoryID.ToString() 
        }) : null, "-----Select Category----") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:01:18.433

问题在于：

```
[HttpPost] 
public ActionResult AddArticle(AddArticleModel AddArticleModel) 
{ 
    //Insert operations: 
    return View(AddArticleModel); 
} 
```

提交表单时，仅发布下拉列表中的选定项目。例如，如果您有一个包含 100 个选项的下拉列表，如果您选择一个选项，则在提交表单时，只会发送该选项。因此，modelbinder 没有足够的信息来重新创建您的下拉列表。

因此，在将模型传回视图之前，您需要重新填充下拉列表：

```
[HttpPost]  
public ActionResult AddArticle(AddArticleModel AddArticleModel)  
{  
    AddArticleModel.Categories = entity.TBL_CATEGORIES.Select(a => a);  

    return View(AddArticleModel);  
} 
```

您可以使用[Fiddler2 自行检查](http://fiddler2.com/fiddler2/)。

# c# - 文本数据类型不能选择为 DISTINCT，因为它不可比较

> ID：10247536
> 
> 赞同：3
> 
> 时间：2012-04-20T13:46:18.677
> 
> 标签：c#, sql-server, linq

我遇到了一个问题，因为我正在尝试连接一个旧的第三方数据库并从中检索数据，该数据库使用现已弃用的文本字段。但是我无法更改数据库字段，因此当我尝试通过 LINQ 返回数据时会出现问题。下面的示例代码：

```
var query = from s in db.tSearches
            join c in db.tCompanies on s.CompanyGUID equals c.GUID
            join cl in db.tCompanyLocations on s.LocationGUID equals cl.GUID
            join st in db.tSearchTypes on s.SearchTypeGUID equals st.GUID
            where s.DateClosed == null                        
            select new
            {
                Id = s.GUID,
                Type = st.GUID,
                Location = cl.LocationName,
                Company = (s.Confidential) ? String.Empty : c.CompanyName,
                DateOpened = s.DateOpened,
                Notes = s.PlacementNotes,
                Closed = s.DateClosed != null
            }; 
```

在我最终尝试执行此操作之前，对此信息进行了更多过滤：

```
 return query.Select(x => new VacancySummary
        {
            Id = x.Id,
            Departments = "",
            Location = x.Location,
            Company = x.Company,
            DateOpened = x.DateOpened,
            Notes = x.Notes,
            Closed = x.Closed
        }).Distinct().Skip(skip).Take(take); 
```

并得到上面的异常。我宁愿不必先执行整个 SQL 语句并在运行 Distinct 之前返回结果，因为如果每个用户检索每个搜索的所有记录，服务器带宽会降低性能，这就是为什么只有一部分返回数据。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:11:20.863

哪些列是`text`类型？

一个想法可能是不要编写`Distinct()`它在 SQL 中执行的操作。您可以将数据查询到一组具体的对象中，然后使用 LINQ to Objects 来尝试`Distinct()`.

从您所拥有的开始，将原始查询转换为空缺摘要列表：

```
var query = (from s in db.tSearches
            join c in db.tCompanies on s.CompanyGUID equals c.GUID
            join cl in db.tCompanyLocations on s.LocationGUID equals cl.GUID
            join st in db.tSearchTypes on s.SearchTypeGUID equals st.GUID
            where s.DateClosed == null                        
            select new VacancySummary()
            {
                Id = s.GUID,
                Departments = string.Empty,
                Type = st.GUID,
                Location = cl.LocationName,
                Company = (s.Confidential) ? String.Empty : c.CompanyName,
                DateOpened = s.DateOpened,
                Notes = s.PlacementNotes,
                Closed = s.DateClosed != null
            }).ToList(); 
```

您的`query`对象现在将是 a`List<VacancySummary>`而不是`IQueryable<anonymous type>`. 您可能需要覆盖`Equals()`您的`VacancySummary`类以使 distinct 起作用，但您的回报只是变成：

```
return query.Distinct().Skip(skip).Take(take); 
```

**更新：**看起来你将不得不像[在关于同一问题的其他问题中那样处理这个问题](https://stackoverflow.com/q/9773389/74757)。

**更新 2：**听说过实体框架中的模型定义函数吗？看看[这篇文章](http://www.scip.be/index.php?Page=ArticlesNET34#MappingEntitySqlModelDefinedFunctions)。您可以创建概念函数（例如，知道如何将`text`列转换为`varchar(max)`(ie `CONVERT(varchar(max), PlacementNotes)`) 的函数）。然后，您可以创建一些代码以在您的 LINQ 查询中使用，这些代码将包含在生成的 SQL 中。不知道它是否适合你，但也许值得一试！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:09:37.713

不是 linq 用户，但在 tsql 中，我们只需将其转换为可比较的 varchar。尝试使用 ToString() 或 Expression.Convert，如有必要，如果字段很大，例如超过 8000 个字符，则截断该字段。

# sed - 如何替换sed中字符串中最右边的字符？

> ID：10247543
> 
> 赞同：2
> 
> 时间：2012-04-20T13:46:37.783
> 
> 标签：sed

我有一个目录字符串，如：

```
build_result/09_abc_WQVGA_FullTouch_15M.xyz 
```

我想在最后一个字符之前插入文件的日期`.`（以 a 为前缀`_`），所以我使用 sed 如下：

```
newname=`echo $filename | sed -n 's/\./\_'"$date"'\./p'` 
```

在`$date`sed 命令之前已经计算过了，结果是：

```
build_result/09_abc_WQVGA_FullTouch_15M_20120420.xyz 
```

但有时会有一些文件名，如：

```
build_result/09_abc_WQVGA_FullTouch_1.5M.xyz 
```

在最后一个之前有一个额外`.`的，sed 将`$date`在第一个之前插入`.`。如何让它只`$date`在最后一个之前插入`.`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:11:32.660

其他人已经介绍过`sed`，所以我建议使用您的 shell 的功能来做到这一点。
更少的开销（产生子壳..）！

```
$ file='build_result/09_abc_WQVGA_FullTouch_15M.xyz'
$ newfile="${file%.*}_$date.${file##*.}"
$ echo "$newfile"
build_result/09_abc_WQVGA_FullTouch_15M_20120420.xyz 
```

使用`sed`我会这样做：

```
sed "s/\(.*[^.]\)\./\1_$date./g" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:50:46.053

尝试：

```
sed -n 's/\(.*\)\./\1_'"$date"'./p' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:54:11.853

例如像这样：

```
date=2012-04-17
echo "demo.txt.foo" | sed -nr 's/(.*)\.([^.]*)/\1_'$date'.\2/p'
demo.txt_2012-04-17.foo 
```

如果您的日期包含斜杠，您应该为 sed 选择不同的分隔符：

```
date=2012/04/17
echo "demo.txt.foo" | sed -nr 's|(.*)\.([^.]*)|\1_'$date'.\2|p'
demo.txt_2012/04/17.foo 
```

由于 sed 尝试匹配 greedy，它会在匹配文字点之前尝试捕获尽可能多的字符。随着`[^.]*`您指定“除了贪婪匹配后面的点之外的所有内容。

`sed -r`允许您省略遮盖香蕉括号。

# php - 将包含具有单个元素的数组的数组转换为单个深度数组

> ID：10247545
> 
> 赞同：1
> 
> 时间：2012-04-20T13:46:40.253
> 
> 标签：php, arrays

我想知道是否有更好的解决方案：将包含具有单个值的数组的数组转换为深度较小的数组。IE

数组打印如下：

```
Array
(
[0] => Array
    (
        [item_1] => 5
    )

[1] => Array
    (
        [item_2] => 7
    )

[2] => Array
    (
        [item_4] => 1
    )

[3] => Array
    (
        [item_5] => 1
    )

) 
```

并且应该被转换为像这样打印：

```
Array
(
[item_1] => 5
[item_2] => 7
[item_4] => 1
[item_5] => 1
) 
```

现在我用这段代码实现了这一点：

```
$items = array(...) // retrieved from db
$counts = array();
foreach ($items as $item) {
    foreach ($item as $key => $val) {
        $counts[$key] = $val;
    }
} 
```

**有没有更好的方法将包含数组的数组项组合成一个数组？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:49:38.707

未经测试，但应该可以工作：

```
$items = array(...);
$counts = array_reduce($items,"array_merge",array()); 
```

# visual-studio-2010 - 控制台应用程序图标不会更新

> ID：10247547
> 
> 赞同：4
> 
> 时间：2012-04-20T13:46:54.913
> 
> 标签：visual-studio-2010, c#-4.0, properties, icons

我有一个使用 Visual Studio 2010 / C# 编写的控制台应用程序。
我通过属性 -> 应用程序选项卡 -> 图标和清单添加了一个图标。
我第一次从默认图标更改图标时，它可以显示 .exe 文件的新图标。但是，当我删除 first.ico 文件并返回到 Properties -> Application Tab -> Icon and manifest 并在构建 .exe 时将图标更改为不同的 .ico 文件时，它仍然保留我最初设置的旧图标至。此外，如果我在构建时从项目中删除新的 .ico 文件，则 .exe 将获得默认图标。
我不知道该项目如何仍然知道第一个 .ico 文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:12:48.370

我尝试清除 Windows 缩略图缓存，但没有奏效。 [http://www.addictivetips.com/windows-tips/clear-delete-the-thumbnail-cache-in-windows-7/](http://www.addictivetips.com/windows-tips/clear-delete-the-thumbnail-cache-in-windows-7/)

然后我尝试重建解决问题的 Windows 图标缓存。 [http://www.sevenforums.com/tutorials/49819-icon-cache-rebuild.html](http://www.sevenforums.com/tutorials/49819-icon-cache-rebuild.html)

以管理员身份打开命令提示符并输入以下命令：

taskkill /IM explorer.exe /F
CD /d %userprofile%\AppData\Local
DEL IconCache.db /a
shutdown /r /f /t 00

这将重新启动您的机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-06T12:40:42.043

你不需要重新启动电脑，在 cmd 中只需省略关机，编写 explorer.exe，它会启动并刷新图标......对我来说。谢谢。

# asp.net - ASP.NET Web 窗体升级到 MVC 并在同一个网站上托管

> ID：10247553
> 
> 赞同：0
> 
> 时间：2012-04-20T13:47:13.067
> 
> 标签：asp.net, asp.net-mvc

我们有一个企业客户，他有一个使用 ASP.NET 3.5 编写的大型 ASP.NET Web 表单。他们想通过添加新功能（大功能）来增强这个网站，这值得 8 个月的工作。

基本上，他们未来的技术策略是使用 JQUERY、HTML5 等将所有内容迁移到 MVC 4.0 中。现在，他们想使用最新的 MVC 4.0 BETA 开发这个新功能（当项目准备就绪时，MVC 4.0 将在外面）。

我的问题是无论如何我们可以在同一个网站上托管 ASP.NET 和 MVC.NET 应用程序，而不会从用户的角度注意到任何差异。例如，所有导航必须保持不变，但所有新功能都应该是（基于客户端的 json、jquery、moderniz 等）

如果有人可以在正确的方向上帮助我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:00:54.783

简短的回答是：**是的，你可以**。

长答案会更详细一点，因为有些地方真的很棘手。

*我们在我工作的公司开始了一个非常相似的项目。我要告诉你的只是我们的做法，具体取决于我们当时的特定背景和知识。也许有一些更好的方法可以做到这一点。*

我们不能只做一个“大爆炸”项目（扔掉旧的，把新的网站放在适当的位置），因为网站太大而且流量真的很高。因此，我们查找了可行的解决方案。迁移仍然存在，但您必须牢记以下几点：

**路由**

*   限制之一是支持旧版 URL。我们公司使用了 IIS 的重写模块，所以我们只是将重写规则指向 MVC 中的新页面。如果您不使用任何重写模块并且您仍想保留旧版 url（例如[http://www.server.com/Users/Login.aspx](http://www.server.com/Users/Login.aspx)），您可以通过定义自己的`IRouteHandler`. 你可以在这里阅读：[http ://www.eworldui.net/blog/post/2008/04/ASPNET-MVC---Legacy-Url-Routing.aspx](http://www.eworldui.net/blog/post/2008/04/ASPNET-MVC---Legacy-Url-Routing.aspx)

**.NET 框架**

*   我们旧的 ASP.NET 网站是围绕 3.5 框架构建的。我们不能只更新框架 4 的所有内容。我们仍然有一些库在 1.0、1.1、2.0 和 3.5 中使用。您必须更新的当然是您在 IIS 上运行的应用程序的 ApplicationPool。如果您想在同一个 Web 应用程序中运行 MVC，旧版本是 .NET 2.0，新版本应该是 .NET 4.0。我们有机会在我们的页面中没有代码。后面的所有代码都在库（.NET 2.0）中，因此影响较小（允许使用新的 4.0 框架编译代码）。我们所做的只是在 .NET 4.0 中运行 .aspx 和 .ascx 页面，将这一行放入 web.config 中：`<compilation targetFramework="4.0">`. .NET 4.0 应用程序会将 .NET 2.0 库直接加载到 .NET 4.0 运行时环境中。除非您明确要求，否则它不会使用并行执行。任何由应用程序直接加载的库（通过直接引用或 Assembly.Load）将继续直接加载到加载它的应用程序的运行时和 AppDomain。这意味着，如果重新编译应用程序以针对 .NET Framework 4 运行时运行，并且仍然具有针对 .NET 2.0 构建的依赖程序集，那么这些依赖程序也将加载到 .NET 4 运行时。有关它的更多信息：[https ://stackoverflow.com/a/6216650/261950](https://stackoverflow.com/a/6216650/261950)

**视图引擎**

*   如果您将所有 MVC 文件夹（视图、控制器等）放在网站根目录中，则不会有任何问题。如果将它放在新的子目录中（例如：~/NewWebSite/Controllers、~/NewWebSite/Views 等），则必须重新定义视图引擎，因为视图的默认搜索路径已更改，并且 mvc 运行时不会无法加载它。

我不记得我们是否遇到了其他问题，但我描述的三个是我现在能记住的主要问题。

我希望这有帮助，

托马斯

# c# - C# 接收逗号分隔文件的第一行并从列标题中创建枚举

> ID：10247554
> 
> 赞同：1
> 
> 时间：2012-04-20T13:47:17.030
> 
> 标签：c#, text

我有一个逗号分隔的文件，其中“作为文本限定符。目前我有一个枚举类，它在文件列名中进行硬编码。但是我需要更改它以动态获取文件列名并将它们放入枚举中。任何建议如何在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:52:06.363

枚举被设计为在编译时定义，而不是动态修改。虽然有一些方法可以通过反射来实现，但它并不是最有用的，因为您无法编写任何使用动态生成的值的代码。

您可能想要的是`Dictionary`其中键是列名，值是文件中该列的索引，`List`列名的一个（因此您可以通过索引找到列名），或两者兼而有之（因此您可以执行在任一方向查找）。 `Dictionary`不过，根据您的帖子，这是最有可能的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:55:44.303

[根据这篇文章Dynamic enum in C#](https://stackoverflow.com/questions/725043/dynamic-enum-in-c-sharp)的结果，可能值得重新考虑您的想法

# haskell - Haskell 并发 - forkIO 真的是不确定的吗？

> ID：10247555
> 
> 赞同：13
> 
> 时间：2012-04-20T13:47:23.623
> 
> 标签：haskell, concurrency

我正在尝试在 Haskell 中使用并发进行特定优化，其中只需要两个值中的一个，并且根据情况，创建其中一个值可能比另一个快得多。

我想我可以只用 forkIO 运行 2 个线程，然后等到一个值放入 M​​Var 中。这是我为此编写的一个简单测试：

```
import Control.Concurrent

main = do out <- newEmptyMVar
          t1 <- forkIO (makeString out)
          t2 <- forkIO (makeInt out)
          v <- takeMVar out
          killThread t1
          killThread t2
          case v of
               Left s -> putStrLn s
               Right i -> putStrLn $ show i

makeString out = do s <- return ( show (primes !! 10000))
                    putMVar out $ Left s

makeInt out = do i <- return 2
                 putMVar out $ Right i

primes = sieve [2..] 
 where sieve (x:xs) = x : (sieve $ filter ((/=0).(flip mod x)) xs) 
```

编译：

```
ghc --make -threaded Test 
```

然而，只有 Left 的情况下，尽管获得质数应该需要足够长的时间才能启动 makeInt 线程（并且 return 2 真的不应该花费那么多时间）。为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T13:56:02.493

这里的问题是懒惰。这`makeString`只是插入一个 thunk 来计算`show (primes !! 10000)`，然后由主线程评估。插入 thunk 非常快，因此在这种情况下它恰好赢得了比赛。

要强制在线程内进行评估，您可以更改`return`为`evaluate`：

```
makeString out = do s <- evaluate $ show (primes !! 10000)
                    putMVar out $ Left s 
```

在大多数情况下，这应该会导致`makeInt`赢得比赛（尽管不能保证）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-20T13:50:49.407

是的，线程确实是不确定的（在 GHC 中）。

碰巧您的特定代码的结构和优化方式使 t1 总是获胜。没有任何保证。

如果您想尝试对其进行按摩以产生不同的结果，请尝试打开优化 ( `-O2`) 和/或使用多核 ( `+RTS -N`)。

例如在我的机器上，连续两次运行：

```
$ ghc -O2 -threaded --make A.hs -rtsopts -fforce-recomp
[1 of 1] Compiling Main             ( A.hs, A.o )
Linking A.exe ...
$ ./A +RTS -N2
2
$ ./A +RTS -N2
104743 
```

正如 hammar 指出的那样，您还可以构建代码以强制在线程中进行更多工作（或切换到[使用严格的 mvars](http://hackage.haskell.org/package/strict-concurrency)）。

# knockout.js - knockout.js 绑定更新问题

> ID：10247556
> 
> 赞同：0
> 
> 时间：2012-04-20T13:47:26.737
> 
> 标签：knockout.js

下面的简单示例对表单上的字段重新排序。每次您点击一行旁边的“顶部”按钮时，它都应该将其移动到列表的顶部。这些按钮似乎以一些奇怪的方式起作用，但为了争论，我将描述一种。从底部开始单击每个按钮。您会发现 console.log 表明 field.order 始终为 1，但当您到达最后两个时 UI 并不完全匹配；它们在文本框中保持为“10”和“20”，这是错误的，但它们的顺序仍然正确切换。

这是一个 ko 错误还是我错过了什么？

注意：您应该能够将代码直接复制并粘贴到 html 文件中并运行它。

```
<html>
<head>
<script src="http://knockoutjs.com/js/knockout-2.0.0.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    function Field(name, order)
    {
        this.name = name;
        this.order = order;
    }

    function Form() {
        this.name = ko.observable("Test");
        this.fields = ko.observableArray();

        this.fields.push(new Field("field a", 10));
        this.fields.push(new Field("field b", 20));
        this.fields.push(new Field("field c", 30));
        this.fields.push(new Field("field d", 40));
        this.fields.push(new Field("field e", 50));
        this.fields.push(new Field("field f", 60));
    }

    function AppViewModel() {
        var self = this;
        self.selectedForm = ko.observable(new Form());

        reorderItems = function () {
            self.selectedForm().fields.sort(
            function (left, right) {
                return (left.order == right.order)
                    ? 0 : ((left.order < right.order) ? -1 : 1)
            });
        }

        fieldMove = function (field) {
            // find field in parent
            var fldIdx = self.selectedForm().fields().indexOf(field);

            field.order = 1;
            console.log(field.order);
            field.name = field.name + field.order;

            // re-order the items
            reorderItems();
        }
    }

    $(document).ready(function () {
        // Activates knockout.js
        ko.applyBindings(new AppViewModel());
    });
</script>
</head>
<body>
    <div class="form" data-bind="with: selectedForm">
    <!-- ko foreach: fields -->
    <div class="field">
        <span data-bind="html: name"></span>
        <input data-bind="value: order"></input>
        <button data-bind="click: fieldMove">Top</button>
    </div>
    <!-- /ko -->
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:56:57.603

我不确定您遇到问题的确切原因，但我设法通过替换标准属性`name`和`order`可观察属性来解决这个问题。

这个[工作小提琴](http://jsfiddle.net/stevegreatrex/WJVe6/)演示了解决方案

# jquery - Google Map API 如何设置新选项

> ID：10247557
> 
> 赞同：0
> 
> 时间：2012-04-20T13:47:40.093
> 
> 标签：jquery, google-maps

我以前从未使用过 Google API，也不知道我目前使用的是什么 API 版本。我在用

```
var myOptions = {
                zoom: settings.zoomLevel,
                center: new google.maps.LatLng(orig_lat, orig_lng),
                mapTypeId: google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById(settings.mapDiv),myOptions); 
```

加入`height : 200`但`myOptions` 失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T16:18:58.690

`map`使用 CSS 样式指定' ' 的 div 大小，并且每当您`map`的 ' ' ' ' ' ' ' ' 的 div 更改其大小时，在 Google 地图组件上显式触发 ' `resize`' 事件。

关于`'resize'`活动：

> 当 div 更改大小时，开发人员应在地图上触发此事件： google.maps.event.trigger(map, 'resize') 。

[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:55:13.823

您可以在 css 样式中或通过内联 css 样式指定地图容器尺寸。

# javascript - Google Maps 3：当任何标记单击相同的信息窗口时打开

> ID：10247559
> 
> 赞同：1
> 
> 时间：2012-04-20T13:47:46.897
> 
> 标签：javascript, google-maps-api-3

我的谷歌地图上有几个标记。每个都有文本，当它以信息窗口的形式单击时应显示。所有这些的代码如下。然而，问题是，当我单击地图上的任何标记时，它总是与地图放大的标记相同，并且会弹出相同标记的 infoWindow。无论我在哪里点击它总是一样的。

想知道我是否做错了什么。有人可以给我一些建议吗？

```
 function getlistings()  
   {  
     $.getJSON('list/listings.json', processlistings);  
   }  

function processlistings(data)   
{  
    listings = data;  
    markersArray = [];  
    for( i = 0; i < listings.length; i++)   
    {  
        var listing = listings[i];  
        var markerLatLng = new google.maps.LatLng(parseFloat(listing["latitude"]), parseFloat(listing["longitude"]));  
        marker = new google.maps.Marker({  
            position : markerLatLng,  
            title: listing['name'],  
            map : map  
        });  

    var infowindow = new google.maps.InfoWindow(  
        {  
          content: listing['name'],  
          position: markerLatLng  
        });  

    google.maps.event.addListener(marker, 'click', function()   
    {  
        infowindow.open(map);  

    });  

    markersArray.push(marker);  
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:57:38.787

当您遍历数据时，您将创建`InfoWindow`多次。在循环结束时，您有一个`InfoWindow`at `markerLatLng`。

单击标记时，`infowindow.open()`将调用它，它使用位于 的信息窗口`markerLatLng`。

您需要使用函数闭包，如[http://www.geocodezip.com/v3_MW_example_map1.html所示](http://www.geocodezip.com/v3_MW_example_map1.html)

```
//loop through markers, but create each with a helper function
          var point = new google.maps.LatLng(43.82589,-79.10040);
          var marker = createMarker(point,'Some stuff to display in the<br>Third Info Window')

    function createMarker(latlng, html) {
        var contentString = html;
        var marker = new google.maps.Marker({
            position: latlng,
            map: map,
            zIndex: Math.round(latlng.lat()*-100000)<<5
            });

        google.maps.event.addListener(marker, 'click', function() {
            infowindow.setContent(contentString); 
            infowindow.open(map,marker);
            });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:51:16.730

当您遍历列表时，您将覆盖 infowindow var 内容。相反，您需要更改单击以将内容设置为`this.title`

```
var infoWindow = new google.maps.InfoWindow({content: 'Loading...'});;    
function processlistings(data)   
    {  
        listings = data;  
        markersArray = [];  
        for( i = 0; i < listings.length; i++)   
        {  
            var listing = listings[i];  
            var markerLatLng = new google.maps.LatLng(parseFloat(listing["latitude"]), parseFloat(listing["longitude"]));  
            marker = new google.maps.Marker({  
                position : markerLatLng,  
                title: listing['name'],  
                map : map  
            });  

        markersArray.push(marker);  
        } 
        for (var i = 0; i < markersArray.length; i++) {
            var marker = markersArray[i];
            google.maps.event.addListener(marker, 'click', function () {
            infoWindow.setContent(this.title);
            infoWindow.open(map, this);
            });
        }
    } 
```

# ruby-on-rails - 在通往 No Rails Spec 的道路上，如何应对深度嵌套模型的测试？

> ID：10247561
> 
> 赞同：1
> 
> 时间：2012-04-20T13:47:49.333
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, rspec2

在 No Rails Specs 的道路上，我只看到了仅给出一个模型或最多 2 个关联的示例。我想知道如何应用于具有深层嵌套的应用程序。例如，以下是一个嵌套示例，

```
Survey
  has_many :questions

Question
  has_many :answers

Answer
  belongs_to :user

User
  has_many :surveys
  has_many :answers 
```

如何编写规范、存根/模拟对象来测试答案模型？

我的问题的要点是我在测试最低级别的嵌套模型时总是被抓住。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:15:53.090

我的 2 美分（因为我一直在朝着同一个目标努力）：

*   避免像瘟疫一样违反得墨忒耳法则。您的对象越深入到另一个对象的结构中，您必须存根/模拟的对象就越多。

*   OpenStruct 是你的朋友！

*   每当您需要来自深度嵌套对象的数据时，请考虑两件事：

    1.  在中间的对象上写一个方法，它将返回你想要的数据。
    2.  创建一个包装关系的对象

我发现Avdi Grimm 的*Objects on Rails一书中非常有用的一种模式是：*

```
class YourObject
  def make_related_object
    related_object_maker.call
  end

  def related_object_maker=(maker)
    @related_object_maker = maker
  end

  private
  def related_object_maker
    @related_object_maker ||= RelatedObject.public_method(:new)
  end
end 
```

这使您可以在测试中用 lambda 替换关系，这非常方便。

**编辑**

```
describe YourObject do
  let(:maker) { lambda { "some value" } }
  subject { YourObject.new }

  before(:each) do
    subject.related_object_maker = maker
  end

  its(:make_related_object) { should == "some value" }
end 
```

# awk - awk 命令从由列对定义的间隔中选择值

> ID：10247563
> 
> 赞同：3
> 
> 时间：2012-04-20T13:48:07.913
> 
> 标签：awk

我正在尝试设计一个 awk 命令来选择具有值列 2 的行，该值列在通过将行的特定列配对在一起定义的值范围内。它可用于调用不在外显子边界 50 个核苷酸内的单核苷酸多态性。该文件如下所示：

```
ID  X   start   end start   end start   end start   end  
Fal1825_c6  802 2   62  62  239 239 362 362 934  
Fal1821_c2  152 1   19  22  159 159 263 264 398  
Fal18279_c7 41  1   177 177 598                 
Fal18376_c3 367 1   251 251 421                 
Fal18748_c2 601 1   152 152 489 489 499 499 677  
Fal18748_c2 500 1   152 152 489 489 499 499 677  
Fal18792_c3 750 1   234 234 459 459 762 762 83  
Fal19487_c2 89  1   177 177 270 270 409 411 459 
```

对于该行上的任何“开始”和“结束”配对（仅由“开始”和“结束”列彼此相邻），即介于 ($3+50 和 $4-50) 或 ($5+50 和 $6-50) 或 ($7+50 和 $8-50) 之间，以此类推，考虑组件的所有起始列对。

输出如下所示：

```
ID  X   start   end start   end start   end start   end  
Fal1825_c6  802 2   62  62  239 239 362 362 934  
Fal18376_c3 367 1   251 251 421             
Fal18748_c2 601 1   152 152 489 489 499 499 677  
Fal19487_c2 89  1   177 177 270 270 409 411 459 
```

我尝试的命令看起来像这样

```
awk '{a=3; b=4; while ($a > 0) do {if ($2 > ($a + 50) && $2 < ($b + 50)){print $0} else {a+2, b+2} }' 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:57:43.973

尝试：

```
awk '{
for (i = 3; i <= NF; i += 2)
  if ($2 > $i+50 && $2 < $(i+1)-50) { print; next } 
}' FILE 
```

# vba - 在组合框中列出幻灯片标题

> ID：10247565
> 
> 赞同：1
> 
> 时间：2012-04-20T13:48:13.883
> 
> 标签：vba, powerpoint

我是 VBA 编程的新手。如何`combo box`从我的幻灯片创建一个列表 ( )？选项`value`是`slide index`，标题是幻灯片标题（或名称）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:57:27.010

像这样的东西，也许：

```
Private Sub UserForm_Activate()

    Dim oSl As Slide
    Dim sTemp As String

    For Each oSl In ActivePresentation.Slides
        If oSl.Shapes.HasTitle Then
            Me.ListBox1.AddItem oSl.Shapes.Title.TextFrame.TextRange.Text
        Else
            Me.ListBox1.AddItem CStr(oSl.SlideIndex)
        End If
    Next

End Sub 
```

# asp.net-mvc - 如何查找授权失败的原因

> ID：10247570
> 
> 赞同：0
> 
> 时间：2012-04-20T13:48:29.847
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我`AuthorizeAttribute`在我的 MVC3 应用程序中使用派生自全局授权的类。我将它用作全局过滤器`filters.Add(new CtsAuthorizeAttribute());`

现在我已经实现了一个自定义角色提供程序，并希望开始在控制器上放置更具体的授权过滤器，如下所示：

```
[CtsAuthorize(Roles = "systemadmin")]
public class CompanyController : CtsController 
```

对于基于角色的授权失败，我想重定向到消息页面（理想情况下只是修改失败页面的模型属性），但保留默认重定向到登录页面以解决基于登录的失败。如何在下面的覆盖中确定授权失败的原因？

```
protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
{
    base.HandleUnauthorizedRequest(filterContext);
} 
```

我可以复制“角色中的用户”检查，但它只是由这个过滤器执行的。我只是不知道如何从过滤器中学习这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:42:56.853

您可以通过提供的上下文参数检查用户是否经过身份验证；然后可以在本地确定角色。

# sql - 为什么此 SQL Server 查询中的行受影响为 0？

> ID：10247571
> 
> 赞同：1
> 
> 时间：2012-04-20T13:48:34.570
> 
> 标签：sql, sql-server-2008

我正在使用 SQL Server 2008。这是我想要做的。我有一个带有 marketgroupID 和 parentID 的表。每个市场组都有一个名称。我想创建这些名称的层次结构路径。

我尝试使用 WITH anchor_statement recursive_statement 选择 CTE 解决方案。它没有用。

我找到了另一种解决方案，您可以在其中创建一个新表并迭代地填写值。它不是性能最高的，它复制了大量的数据和列，但我并不在意，因为它或多或少是一个相对较小的数据库上的一次性过程。我只是在寻找一个简单的解决方案（就像我猜的每个人一样）

基本上，我成功地创建了表格并在其中复制了一些值。

```
--Create Lineage Table
Create Table Eve.dbo.invLineage(
Node int NOT NULL IDENTITY(100,1),
typeID int,
parentNode int,
marketGroupName nvarchar(100),
marketGroupID int,
Depth tinyint,
Lineage nvarchar(max)
) 
```

并将值复制到其中。

```
INSERT INTO EVE.dbo.invLineage ( typeID,marketGroupID)
SELECT [EVE].[dbo].invTypes.typeID,EVE.dbo.invTypes.marketGroupID
FROM EVE.dbo.invTypes
LEFT JOIN eve.dbo.invGroups ON EVE.dbo.invTypes.groupID= eve.dbo.invGroups.groupID
WHERE eve.dbo.invGroups.categoryID=7 AND Eve.dbo.invTypes.published=1 
```

这是我在这个阶段得到的结果的一个例子：

```
 Node   typeID   parentNode marketGroupName marketGroupID Depth Lineage
 100    377      NULL       NULL            605           NULL  NULL
 101    380      NULL       NULL            605           NULL  NULL
 102    393      NULL       NULL            126           NULL  NULL
 103    394      NULL       NULL            126           NULL  NULL
 104    399      NULL       NULL            609           NULL  NULL
 105    400      NULL       NULL            609           NULL  NULL
 106    405      NULL       NULL            604           NULL  NULL
 107    406      NULL       NULL            604           NULL  NULL 
```

所以我成功地得到了一个nodeID、一个typeID和一个marketGroupID。抱歉这里显示不好，我还在学习论坛。

现在，我想为 Lineage 表的每一行更新 parentNode。

此信息是marketGroup 表中的一列。

这是我写的请求，但返回 0 行。

```
UPDATE T SET T.parentNode=P.Node
FROM Eve.dbo.invLineage as T 
INNER JOIN eve.dbo.invMarketGroups E ON T.marketGroupID=E.marketGroupID
INNER JOIN eve.dbo.invMarketGroups B ON E.parentGroupID=B.marketGroupID
INNER JOIN Eve.dbo.invLineage P ON B.marketGroupID=P.marketGroupID 
```

前 2 个内部连接似乎工作正常，但最后一个使其返回 0 行。

另外，我正在遵循这个方便的指南：[http ://www.sqlteam.com/article/more-trees-hierarchies-in-sql](http://www.sqlteam.com/article/more-trees-hierarchies-in-sql)

如果我出于调试目的运行此选择查询，以下是我得到的一些结果：

```
SELECT * --SET T.parentNode=P.Node
FROM Eve.dbo.invLineage as T 
INNER JOIN eve.dbo.invMarketGroups E ON T.marketGroupID=E.marketGroupID
INNER JOIN eve.dbo.invMarketGroups B ON E.parentGroupID=B.marketGroupID
--INNER JOIN eve.dbo.invLineage P ON B.marketGroupID=P.marketGroupID

Node    typeID  parentNode  marketGroupName marketGroupID   Depth   Lineage marketGroupID   parentGroupID   marketGroupName description iconID  hasTypes    marketGroupID   parentGroupID   marketGroupName description iconID  hasTypes
1134    10039   NULL    NULL    760 NULL    NULL    760 9   Civilian Modules    Modules whose specifications are geared toward use on rookie ships. NULL    1   9   NULL    Ship Equipment  Everything the dedicated pilot needs to outfit their ship.  1432    0
2913    21853   NULL    NULL    760 NULL    NULL    760 9   Civilian Modules    Modules whose specifications are geared toward use on rookie ships. NULL    1   9   NULL    Ship Equipment  Everything the dedicated pilot needs to outfit their ship.  1432    0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:06:55.400

你的两个记录都有`B.marketGroupID = 9`。

但你的`eve.dbo.invLineage`桌子只有`marketGroupID IN (605, 126, 209, 604)`

因此，简而言之，您不会得到任何记录，因为`ON B.marketGroupID=P.marketGroupID`从未找到任何匹配项。

# c# - 基于类型调用 DAL 方法

> ID：10247573
> 
> 赞同：2
> 
> 时间：2012-04-20T13:48:38.767
> 
> 标签：c#, oop, generics, open-closed-principle

我正在开发一个应用程序，我需要根据调用类的泛型类型调用两种数据方法之一。例如，如果 T 是 Foo 类型，我将调用 data.GetFoo()：

```
private static List<T> GetObjectList(DateTime mostRecentProcessedReadTime)
{
    using (MesReportingDal data = new MesReportingDal())
    {
        return data.GetFoo(mostRecentProcessedReadTime);  // Notice GetFoo()
    }
} 
```

如果 T 是 Bar 类型，我将调用 data.GetBar()：

```
private static List<T> GetObjectList(DateTime mostRecentProcessedReadTime)
{
    using (MesReportingDal data = new MesReportingDal())
    {
        return data.GetBar(mostRecentProcessedReadTime);  // Notice GetBar()
    }
} 
```

在此之前，我只需要一个 DAL 方法，因为所有类型都以相同的方式检索。我现在需要调用两种方法之一，具体取决于 T 的类型。

我试图避免这样的事情：

```
private static List<T> GetObjectList(DateTime mostRecentProcessedReadTime)
{
    using (MesReportingDal data = new MesReportingDal())
    {
        if (T is Foo) { return data.GetFoo(mostRecentProcessedReadTime); }
        if (T is Bar) { return data.GetBar(mostRecentProcessedReadTime); }
    }
} 
```

这违反了 OCP。有没有一种优雅的方式来处理这个问题，所以我可以摆脱我的 if 语句？

**编辑 - 这就是类型的样子**

```
public partial class Foo1 : IDataEntity { }
public partial class Foo2 : IDataEntity { }
public partial class Bar1 : IDataEntity { }
public partial class Bar2 : IDataEntity { } 
```

这些 Foos 和 Bars 是用于 Linq-to-SQL 的 DBML 项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T13:56:15.150

我会改变`GetFoo`并`GetBar`成为`Get`，并做出`MesReportingDal`一个通用的。

所以我认为你最终会得到这样的结果：

```
private static List<T> GetObjectList(DateTime mostRecentProcessedReadTime)
{
    using (var data = new MesReportingDal<T>())
    {
        return data.Get(mostRecentProcessedReadTime);        
    }
} 
```

顺便说一句，拥有该`using`语句还需要`MesReportingDal`implements `IDisposable`，否则您将收到以下编译错误：

*'MesReportingDal'：在 using 语句中使用的类型必须隐式转换为 'System.IDisposable'*

**更新**

因此，在考虑了更多并阅读了您的反馈之后，您可以选择提取存储库接口并将创建推回工厂方法。这将允许您维护单个`data.Get(...)`调用，但基于不同的实现`T`

```
public interface IRepository<T> : IDisposable
{
    IList<T> Get(DateTime mostRecentRead);
}

public class FooRepo : IRepository<Foo>
{
    public IList<Foo> Get(DateTime mostRecentRead)
    {
        // Foo Implementation
    }
}

public class BarRepo : IRepository<Bar>
{
    public IList<Bar> Get(DateTime mostRecentRead)
    {
        // Bar Implemenation
    }
} 
```

你的工厂可能看起来像这样

```
public class RepositoryFactory
{
    public static IRepository<T> CreateRepository<T>()
    {
        IRepository<T> repo = null;
        Type forType = typeof(T);

        if (forType == typeof(Foo))
        {
            repo = new FooRepo() as IRepository<T>;
        }
        else if (forType == typeof(Bar))
        {
            repo = new BarRepo() as IRepository<T>;
        }

        return repo;
    }
} 
```

这将允许您保持初始代码块的清洁

```
private static IList<T> GetObjectList(DateTime mostRecentProcessedReadTime)
{
    using (var data = RepositoryFactory.CreateRepository<T>())
    {
        return data.Get(mostRecentProcessedReadTime);
    }
} 
```

希望有帮助。

# android - Edittext点击事件焦点

> ID：10247574
> 
> 赞同：3
> 
> 时间：2012-04-20T13:48:40.793
> 
> 标签：android

我有三个 Edittext 字段 ed1、ed2、ed3。当用户单击 ed2 / ed3 时，我打开了对话框并从该对话框中获取输入。对于第一次单击光标来到编辑文本框，并且仅在下一次单击时，我可以打开对话框以获取输入。我需要显示第一次单击的对话框。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-20T14:32:02.843

将 EditText 设置为 unFocusable。这样，第一次触摸注册为点击。

在有问题的 EditText(s) 的 XML 中添加：

```
 android:focusableInTouchMode="false" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T13:52:40.780

为什么不使用 Button 来代替.. 而是将其背景设置为默认 EditText..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:51:37.287

这就是 EditText 的行为方式。他们必须首先集中注意力才能触发`onClick`事件。

编辑：就像巴拉克指出的那样，您可以禁用“可聚焦性”，并且可以一键打开它。缺点是您将无法在 EditText 上键入（这可能适合您的用例）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T22:20:34.027

为了保持可`EditText`打字，你可以做一个小技巧。

如果只需要`Dialog`在第一次打开然后`EditText`正常使用你可以这样做：

```
public class EditTextActivity extends Activity {
    EditText et1;
    int clickCount = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
         setContentView(R.layout.main);

         et1 = (EditText) findViewById(R.id.main_et1);
         et1.setFocusableInTouchMode(false);
         setOnClickListeners();

    private void setOnClickListeners(){
         location.setOnClickListener(new View.OnClickListener() {
         @Override
         public void onClick(View v) {
            if (clickCount == 0){
                OpenDialog(); //Call the function to open the dialog created by you
                et1.setFocusableInTouchMode(true);
            }
            clickCount = 1;
        }
    });

} 
```

# php - php中的调试器

> ID：10247577
> 
> 赞同：0
> 
> 时间：2012-04-20T13:48:51.920
> 
> 标签：php

在我的 php 代码中创建断点的最佳方法是什么？我应该使用什么调试器？我正在使用带有 wamp 服务器的 Dream Weaver cs5。

我想通过添加断点来检查我的代码是否在运行时执行了某些**功能/代码。**另请提及如何使用该调试器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T13:49:47.760

看看[Xdebug](http://xdebug.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T06:35:53.837

查看[DBG ，您可以在](http://www.nusphere.com/products/php_debugger.htm)[IDE](http://www.nusphere.com/products/phped.htm) 中设置断点，您可以通过放置将调用 IDE 的 DebugBreak() 来嵌入断点，最后您可以设置调试器以触发错误或某些异常（调试器的 jit 设置）

# actionscript-3 - flex 3 和 flex 4 版本之间的 Httpservice 神秘 url 变化

> ID：10247581
> 
> 赞同：1
> 
> 时间：2012-04-20T13:49:06.850
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我有一个从 flex 3 迁移到 Flex 4 的应用程序。我没有更改代码功能中的任何内容。我使用 HTTPService 调用 struts 操作：

```
var service:HTTPService = new HTTPService();
service.url=  "someAction.do"
service.send(params); 
```

问题是当我使用由 flash builder 3 生成的 flex 3 swf 时，没有问题，动作就像我想要的那样发送到 url /someUrl

```
localhost:8080/someurl/someAction.do 
```

如果我在相同的情况下使用 flex 4 swf，在相同的战争档案中。**我唯一改变的是 swf**， url 还将包含导致问题的 swf 的路径

```
localhost:8080/someurl/path/to/swf/someAction.do 
```

有谁知道这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:27:51.867

[rootURL 属性](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/rpc/http/HTTPService.html#rootURL)的文档表明这是 Flex 4 的预期行为：

> ...，相对 URL 是根据运行此应用程序的 SWF 的位置自动计算的。...

一个可能的解决方案是使用该`rootURL`属性，尽管这还需要使用可能引入其他问题的 Flex 服务器代理。

# ef-code-first - 实体框架代码第一次连接状态检查

> ID：10247587
> 
> 赞同：0
> 
> 时间：2012-04-20T13:49:34.963
> 
> 标签：ef-code-first, database-connection

我正在尝试生成一些代码来检查我的 SQL 服务器是否可连接。并且：如果是这样，那么它应该检查数据库是否存在。让我通过代码解释一下。

这是我的主要方法：

```
private static void Main(string[] args)
        {
            Database.SetInitializer<MyDbContext>(new DropCreateDatabaseAlways<MyDbContext>());
            Console.WriteLine(CheckIfDatabaseExists("Data Source=127.0.0.1\\SQLEXPRESS2;Initial Catalog=SQLTest;Integrated Security=True;Connect Timeout=3"));
            Console.WriteLine(CheckIfDatabaseExists("Data Source=127.0.0.1\\SQLEXPRESS;Initial Catalog=SQLTest;Integrated Security=True;Connect Timeout=3"));
            Console.WriteLine(CheckIfDatabaseExists("Data Source=127.0.0.1\\SQLEXPRESS2;Initial Catalog=SQLTest;Integrated Security=True;Connect Timeout=3"));
        } 
```

您可以想象：我的本地 SQL 服务器“SQLEXPRESS”上有一个现有的数据库“SQLTest”。但是：没有像 'SQLEXPRESS2' 这样的服务器！

好的 - 更多代码。这是我的检查方法：

```
public static DatabaseExistsStatus CheckIfDatabaseExists(String connString)
        {
          try
            {

                using (var db = new MyDbContext(connString))
                {
                    bool DbExists = db.Database.Exists();
                    if (DbExists)
                    {
                        // database is existing
                        return DatabaseExistsStatus.EXISTING;
                    }
                    else
                    {
                        // config is working, but database does not exist
                        return DatabaseExistsStatus.NO_DB;
                    }
                }
            }
            catch (Exception)
            {
                // no working config
                return DatabaseExistsStatus.NO_CONNECTION;
            }
        }

        public enum DatabaseExistsStatus
        {
            EXISTING,
            NO_CONNECTION,
            NO_DB
        } 
```

启动我的应用程序会带来以下结果：

```
NO_CONNECTION
EXISTING 
NO_DB 
```

我很困惑！我期待 "NO_CONNECTION, EXISTING, NO_CONNECTION" 。

就是这样！我不知道后台发生了什么以及如何获得控制权。

那里发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T16:00:04.977

据我所知，这是我认为（至少部分）的一种预期行为（并且没有进入反射器）

看看这个关于如何初始化 DbContext 的详尽解释，[代码优先：内部 DbContext 初始化](http://blog.oneunicorn.com/2011/04/15/code-first-inside-dbcontext-initialization/)

简化了一点 -`DbContext`不会为每个重新创建东西`new DbContext`。在内部，EDM（实体数据模型）和其他一些东西（“真实”`ObjectContext`实例）被缓存为`AppDomain`.

在这种特殊情况下，第一次调用什么都不做，它无法找到服务器并且没有“可行的”替代方案 - 所以它只是出错 - 你会得到“没有连接”。

在下一次通过时，它成功并初始化了内部的一些数据（对于 AppDomain 来说是“全局的”——在大多数情况下意味着你​​的应用程序）——非常 ' `new DbContext`' 几乎什么都不做，但在第一次使用时，在你的情况下 ' `Exists`' 它不会创建 Db，但会进行一些初始化（看似）。

在最后一次通过时，它尝试打开一个连接，但失败了 - 但它已经有一个有效的连接，可以从它拥有的已经初始化的数据中重用。

唯一的问题是为什么它会在“失败”的连接尝试上“继续”并重用旧的连接尝试（因为它是一个明确的调用），我对此没有答案 - 但它看起来就是这样（它是内部实现- 还是错误？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-01T11:40:24.090

您可以使用此代码控制连接状态

```
var db = new MyDbContext(connString));
if (db.Database.Connection.State == System.Data.ConnectionState.Open)
{
    // do something
} 
```

# c - setvbuf 无法使标准输入无缓冲

> ID：10247591
> 
> 赞同：11
> 
> 时间：2012-04-20T13:49:42.047
> 
> 标签：c, buffer, stdin, getchar, unbuffered

我的主要目的是在`getchar`获得角色后立即返回，而不是等待`ENTER`密钥。我试过这个

```
int main()
{
    setvbuf(stdin,NULL,_IONBF,0);
    getchar();

    return 0;
} 
```

将其与原型进行比较`setvbuf`

```
setvbuf ( FILE * stream, char * buffer, int mode, size_t size ); 
```

它应该设置`stdin`为无缓冲模式。

但还是`getchar()`一直在等待`ENTER`

我看过类似这样的相关帖子

[在 C 中读取字符时打印](https://stackoverflow.com/questions/10228902/printing-while-reading-characters-in-c/10229044#10229044)

这是建议使`stdin`无缓冲的替代方法。但我很想知道为什么`setvbuf`方法不起作用

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T14:15:39.890

终端驱动程序在您点击返回之前不会返回任何内容，即使该`read()`操作会接受已经存在的内容。

要从终端获取逐个字符的输入，您必须将其从规范模式转换为原始模式或 cbreak 模式，这需要完全不同的操作。查看有关[“通用终端接口”](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap11.html#tag_11)的 POSIX 手册，了解如何控制终端。或者考虑使用`curses`库。

另请参阅：[规范与非规范终端输入](https://stackoverflow.com/questions/358342/canonical-vs-non-canonical-terminal-input/358381#358381)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:24:29.737

如果您在 Linux 或其他类 Unix 系统下尝试此操作，则终端会缓冲输入并仅传递整行。您可以使用 ncurses 来规避这一点：

```
#include <ncurses.h>

int main()
{
    initscr();
    getch();
    endwin();

    return 0;
} 
```

编译：

```
gcc -o main main.c -lncurses 
```

# jquery - 尽管更改了持续时间设置，jQueryrotate 速度还是太慢

> ID：10247595
> 
> 赞同：1
> 
> 时间：2012-04-20T13:49:48.340
> 
> 标签：jquery, jquery-plugins, rotation

我正在使用 jqueryrotate 插件，但在让图像以我想要的速度旋转时遇到问题。我已将持续时间降低到 1 甚至 0.01，但似乎并没有太大区别。我希望动画发生得更快。我是否遗漏了什么，我在文档中找不到关于此的任何建议？

```
$("#sanalista_words").hide();
$("#sanalista>H2").click(function() {
    if($("#sanalista_words").is(":visible")) {
        $("#sanalista_words").slideUp("slow");
        $("#sl_graph_arrow").rotate({
            duration: 1,
            angle: 180,
            animateTo:1
      });
    }
    else {
        $("#sanalista_words").slideDown("slow");
        $("#sl_graph_arrow").rotate({
            duration: 1,
            angle: 0,
            animateTo:180
      });

    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:12:37.720

你想在 1 毫秒内制作动画？？？持续时间值以毫秒为单位，持续时间：1 实际上意味着 0.001 秒，因此将该值更改为持续时间：0.001（因此变为 0.00001 秒）我猜你根本不会看到差异

# c# - CryptoStream 产生零字节数据

> ID：10247596
> 
> 赞同：0
> 
> 时间：2012-04-20T13:49:54.570
> 
> 标签：c#, cryptography

下面的代码有什么问题？`CryptoStream`产生零字节数据。

```
public void Decrypt(Stream theInput, Stream theOutput, string theKey)
{
    Rfc2898DeriveBytes pdb = new Rfc2898DeriveBytes(theKey, salt);
    RijndaelManaged RM = new RijndaelManaged();
    RM.Mode = CipherMode.ECB;

    using (CryptoStream cs = new CryptoStream(theOutput, RM.CreateDecryptor(pdb.GetBytes(32), pdb.GetBytes(16)), CryptoStreamMode.Write))
    {
        int bufferLen = 4096;
        byte[] buffer = new byte[bufferLen];
        int bytesRead;
        do
        {
            bytesRead = theInput.Read(buffer, 0, bufferLen);
            cs.Write(buffer, 0, bytesRead);
        } while (bytesRead != 0);
    }
} 
```

# reporting-services - 连续表格的页眉的 SSRS 边距

> ID：10247598
> 
> 赞同：0
> 
> 时间：2012-04-20T13:50:01.260
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

使用 SSRS 并导出为 PDF 时，如果 Tablix 对象超出一页，它当然会继续到下一页。有什么办法可以在页眉和继续 Tablix 之间插入边距？目前，Tablix 转到下一页，并直接从标题行开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:00:06.080

你的页面上已经有标题了吗？

如果没有，您可以添加一个标题并在标题属性上设置为不显示在第一个页面上（右键单击它-> 属性）

# javascript - 停止突出显示文本的 shift 单击

> ID：10247599
> 
> 赞同：11
> 
> 时间：2012-04-20T13:50:04.713
> 
> 标签：javascript, jquery, html, css

我的网页上有一个表格，上面有复选框。我有 jquery 代码，允许我移动单击以检查多行以进行编辑/删除。但是当我移动单击以选择一个范围时，该范围内的所有文本都会突出显示。

有没有办法使用 jquery 或 css 来阻止文本被突出显示？

- 编辑 -

```
 HTML code
...
<tbody>
  <tr>
    <td>
      <input type="checkbox">
    </td>
    <td>
      <div class="cam_ip">192.168.200.78</div>
    </td>
  </tr>
  <tr>
    <td>
      <input type="checkbox">
    </td>
    <td>
      <div class="cam_ip">192.168.200.250</div>
    </td>
  </tr>
</tbody> 
```

可以有 x 行。当我单击一行时，jquery 起作用，该行被标记为锚，然后当我移动单击另一行时，它被标记为锚范围，然后调用一个函数，该函数将遍历范围内的每一行，使其被选中。使用的副作用`e.shiftClick();`是范围内的所有文本都被突出显示。我需要停止这种副作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-20T13:55:55.277

CSS 版本

```
user-select: none;
-webkit-user-select: none;
-moz-user-select: none; 
```

也可能与[如何使用 CSS 禁用文本选择突出显示相关的问题？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

一年后编辑（从评论整合）：

同事指出这一点[有没有办法使 HTML 页面上的文本无法选择？](https://stackoverflow.com/questions/69430/is-there-a-way-to-make-text-unselectable-on-an-html-page)- 使用`unselectable="on"`任何你不想选择的东西

# android - Eclipse 从哪里获取更新站点列表？

> ID：10247600
> 
> 赞同：1
> 
> 时间：2012-04-20T13:50:13.523
> 
> 标签：android, eclipse

昨天我安装了 Eclipse 3.7.2 (Indigo)，我正在尝试配置它。这是 32 位 Ubuntu 系统上的 32 位版本。当我执行“检查更新”时，它返回以下错误：

*“联系软件站点”遇到了问题。无法读取位于 http://android/eclipse/content.xml 的存储库。主机名不能为空*

注意“http:”后面的**单斜杠**

它从哪里得到这个 URL，我该如何修复它？. . . 请注意，此 URL**不在**“首选项”下的“安装/更新”的“可用软件站点”部分中。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:06:45.310

转到 [Help] > [Install New Software...] > [Available Software Sites] 并在那里编辑错误的 url。

# java - 如何使用 Maven Cargo 在 Glassfish 中设置配置（JDBC 领域或 Java 邮件会话）？

> ID：10247601
> 
> 赞同：4
> 
> 时间：2012-04-20T13:50:19.127
> 
> 标签：java, maven, glassfish, cargo

我使用[Maven Cargo](http://cargo.codehaus.org/Maven2+plugin) (1.2.1) 配置和启动 Glassfish 3.1.2 进行集成测试。我能够配置数据源并启动服务器。但我还需要配置 JDBC 安全领域以及 Java 邮件会话。

*但是我不知道如何使用 maven cargo 配置安全领域和 Java 邮件会话，有人知道*吗？

一种方法可能是使用`asadmin`，但我不知道如何从货物中使用它。

到目前为止我所拥有的：

```
<plugin>
    <groupId>org.codehaus.cargo</groupId>
    <artifactId>cargo-maven2-plugin</artifactId>
    <version>1.2.1</version>
    <executions>
        <execution>
            <id>start-container</id>
            <phase>pre-integration-test</phase>
            <goals>
                <goal>start</goal>
            </goals>
        </execution>
        <execution>
            <id>stop-container</id>
            <phase>post-integration-test</phase>
            <goals>
                <goal>stop</goal>
            </goals>
        </execution>
    </executions>
    <configuration>
        <container>
            <type>installed</type>
            <containerId>glassfish3x</containerId>
            <artifactInstaller>
                <groupId>org.glassfish.main.distributions</groupId>
                <artifactId>glassfish</artifactId>
                <version>3.1.2</version>
                <type>zip</type>
            </artifactInstaller>
            <output>${project.build.directory}/glassfish/container.log</output>
            <log>${project.build.directory}/glassfish/cargo.log</log>
            <append>false</append>
            <dependencies>
                <dependency>
                    <groupId>com.oracle</groupId>
                    <artifactId>ojdbc</artifactId>
                </dependency>
            </dependencies>
        </container>
        <configuration>
            <home>${project.build.directory}/cargo/configurations/glassfish</home>
            <properties>
                <cargo.servlet.port>8082</cargo.servlet.port>
                <cargo.datasource.datasource>
                    cargo.datasource.jndi=jdbc/tecisplus|
                    cargo.datasource.type=javax.sql.DataSource|
                    cargo.datasource.driver=oracle.jdbc.OracleDriver|
                    cargo.datasource.url=${it-database.url}|
                    cargo.datasource.username=$[it-database.username}|
                    cargo.datasource.password=${it-database.password}
                </cargo.datasource.datasource>
            </properties>
            <deployables>
                <deployable>
                    <groupId>de.test</groupId>
                    <artifactId>test-ear</artifactId>
                    <type>ear</type>
                </deployable>
            </deployables>
        </configuration>
    </configuration>
</plugin> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:35:06.730

我目前使用的解决方法是有一个手写`domain.xml`文件，其中已经包含所有配置（JDBC、Realm 和 JavaMail 会话）。

然后我指示 cargo 使用它`domain.xml`而不是进行自己的配置：

```
<configuration>
    <home>${project.build.directory}/cargo/configurations/glassfish</home>
    <configfiles>
        <configfile>
            <file>${project.build.directory}/filtered-serverresources/domain.xml</file>
            <todir>cargo-domain/config</todir>
        </configfile>
    </configfiles>
    <deployables>
        <deployable>
            <groupId>de.tecis.tecisplus</groupId>
            <artifactId>tecisplus-ear</artifactId>
            <type>ear</type>
        </deployable>
    </deployables>
</configuration> 
```

这`${project.build.directory}/filtered-serverresources/domain.xml`是配置文件的一个小技巧（cargo也可以替换一些属性，但是我无法替换cargo不知道的属性。）所以我使用`maven-resource-plugin`

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-resources-plugin</artifactId>
    <!-- because maven test-resource does not support filter! -->
    <version>2.5</version>
    <configuration>
        <encoding>UTF-8</encoding>
    </configuration>
    <executions>
        <execution>
            <id>filter-glassfish-configuration-domain-file</id>
            <!-- <phase>pre-integration-test</phase> -->
            <phase>process-test-resources</phase>
            <goals>
                <goal>copy-resources</goal>
            </goals>
            <configuration>
                <outputDirectory>${project.build.directory}/filtered-serverresources</outputDirectory>
                <resources>
                    <resource>
                        <directory>src/test/serverresources</directory>
                        <filtering>true</filtering>
                        <includes>
                            <include>**/*.xml</include>
                        </includes>
                    </resource>
                </resources>
                <delimiters>
                    <delimiter>~{*}</delimiter>
                </delimiters>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

*修改后的分隔符`~{`...`}`是必要的，因为它`domain.xml`包含很多看起来像默认分隔符的序列`${...}`*

# jquery - Ajax with JQuery for Android Application with PhoneGap

> ID：10247606
> 
> 赞同：1
> 
> 时间：2012-04-20T13:50:36.673
> 
> 标签：jquery, android, ajax

我正在使用 PhoneGap 在 Android 中开发本机应用程序。我在 Visual Studio (c#) 中创建了一个 Web 服务，它将返回一个 XML 片段。所以我已将返回的 XML 值转换为 JSON，并在 Mozilla firefox 中对其进行了测试。但是当我尝试使用 AJax 和 Jquery 调用 Web 服务时。我尝试对将返回服务数据的警报消息进行编码。但是它似乎没有返回任何数据。有人可以帮我吗？谢谢

这是我的代码：

```
$.ajax({
    type: "POST",
    url: "http://10.0.2.2:49878/a.aspx?p_trxn_type=doLogin&p_phoneNumber="+phoneNumber,
    error: function (XMLHttpRequest, textStatus, errorThrown)
    { 
        alert("error");
    },
    dataType : "json",
    cache:false,
    async:false,
    success: function (ret)
    {
        try {
            var jsonObj = eval('(' + ret + ')');
            alert(jsonObj.Contacts.Contact['@phoneNumber']);
            alert(jsonObj.Contacts.Contact.LastName);
            alert(ret.Contacts.Contact['@phoneNumber'])
            alert(ret.Contacts.Contact.LastName);
        }
        catch(ex) {
            alert(ex.message);
        }
        console.log(ret);
        alert(ret.length);
        alert(ret);
        alert(typeof ret);
        alert("success");
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:43:22.143

尝试添加此代码：

```
$(document).bind("mobileinit", function(){
   $.support.cors = true;
   $.mobile.allowCrossDomainPages = true;
}); 
```

只要您的网络服务不是本地托管的，您就应该可以正常访问它，这是我[在 StackOverflow 上的问题](https://stackoverflow.com/questions/10239608/jquerymobile-running-on-android-phonegap-refuses-load-ajax)。

请务必查看[http://jquerymobile.com/test/docs/api/globalconfig.html](http://jquerymobile.com/test/docs/api/globalconfig.html)尤其是[http://jquerymobile.com/test/docs/pages/phonegap.html](http://jquerymobile.com/test/docs/pages/phonegap.html)

最后，您的错误函数通过定义为：

```
error: function (XMLHttpRequest, textStatus, errorThrown)
{ 
    alert(textStatus + " " + errorThrown);
} 
```

# android - 随机时间 WIN DEATH: 在 cocos2d-x

> ID：10247609
> 
> 赞同：1
> 
> 时间：2012-04-20T13:50:45.253
> 
> 标签：android, visual-c++, android-ndk, cocos2d-x

我用 cocos2d-x 开发了一个游戏。我试图在android下编译它。前三个场景很好 - 但是当我添加最后一个功能时，应用程序开始在随机时间和随机场景中关闭。

以下是相关日志：

```
04-18 15:30:54.404: I/DEBUG: * *
04-18 15:30:54.404: I/DEBUG: Build fingerprint: 'lge/thunderg/thunderg:2.3.3/GRI40/LG-P500-V20c.19C1E59AC2:user/ota-rel-keys,release-keys'
04-18 15:30:54.404: I/DEBUG: >>> com.mobiap.casino <<<
04-18 15:30:54.404: I/DEBUG: signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
04-18 15:30:54.404: I/DEBUG: r0 ffffffff r1 73746000 r2 00000004 r3 ffff0ff0
04-18 15:30:54.414: I/DEBUG: r4 00000000 r5 73746000 r6 afd46470 r7 00000000
04-18 15:30:54.414: I/DEBUG: r8 aca4a965 r9 00098450 10 00100000 fp 00000001
04-18 15:30:54.414: I/DEBUG: ip afd24579 sp 100ffe28 lr afd24571 pc aca652c2 cpsr 80000030
04-18 15:30:54.414: I/DEBUG: d0 400000003eaaaaab d1 3ff0000041f00000
04-18 15:30:54.424: I/DEBUG: d2 bfd3441350baf6de d3 c1493000c1323800
04-18 15:30:54.424: I/DEBUG: d4 4900000040f7b000 d5 000000000007bd80
04-18 15:30:54.424: I/DEBUG: d6 4515a00000000800 d7 40800000c48ee000
04-18 15:30:54.424: I/DEBUG: d8 0000000000000000 d9 0000000000000000
04-18 15:30:54.424: I/DEBUG: d10 0000000000000000 d11 0000000000000000
04-18 15:30:54.424: I/DEBUG: d12 0000000000000000 d13 0000000000000000
04-18 15:30:54.424: I/DEBUG: d14 0000000000000000 d15 0000000000000000
04-18 15:30:54.424: I/DEBUG: scr 80000012
04-18 15:30:54.534: I/DEBUG: #00 pc 000652c2 /system/lib/libdvm.so
04-18 15:30:54.534: I/DEBUG: #01 lr afd24571 /system/lib/libc.so
04-18 15:30:54.534: I/DEBUG: code around pc:
04-18 15:30:54.534: I/DEBUG: aca652a0 000267ab 4b09b570 0b0d1c14 0b1018c2 
04-18 15:30:54.534: I/DEBUG: aca652b0 032d0300 d20742a8 1c291a2d f7ac2204 
04-18 15:30:54.534: I/DEBUG: aca652c0 6820eaf8 60211941 46c0bd70 00000fff 
04-18 15:30:54.534: I/DEBUG: aca652d0 4b10b5f8 447b1c01 6d066818 d0162900 
04-18 15:30:54.534: I/DEBUG: aca652e0 23001c02 e00b251c 42a16ad4 1c2cd306 
04-18 15:30:54.544: I/DEBUG: code around lr:
04-18 15:30:54.544: I/DEBUG: afd24550 ffffff8c 00028e2e 0000076c 2301b510 
04-18 15:30:54.544: I/DEBUG: afd24560 fdd0f7ff 46c0bd10 1c04b510 fd36f7ed 
04-18 15:30:54.544: I/DEBUG: afd24570 20016004 bd104240 1c03b510 db0233ff 
04-18 15:30:54.544: I/DEBUG: afd24580 f7ff4240 bd10fff1 4d1bb5f0 4f1c4b1b 
04-18 15:30:54.544: I/DEBUG: afd24590 58ea447d 880359ec 88278811 1c0eb087 
04-18 15:30:54.544: I/DEBUG: stack:
04-18 15:30:54.544: I/DEBUG: 100ffde8 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffdec 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffdf0 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffdf4 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffdf8 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffdfc 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe00 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe04 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe08 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe0c 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe10 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe14 00000000 
04-18 15:30:54.544: I/DEBUG: 100ffe18 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe1c afd24587 /system/lib/libc.so
04-18 15:30:54.554: I/DEBUG: 100ffe20 df002777 
04-18 15:30:54.554: I/DEBUG: 100ffe24 e3a070ad 
04-18 15:30:54.554: I/DEBUG: #00 100ffe28 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe2c 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe30 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe34 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe38 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe3c 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe40 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe44 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe48 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe4c 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe50 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe54 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe58 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe5c 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe60 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe64 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe68 00000000 
04-18 15:30:54.554: I/DEBUG: 100ffe6c 00000000 
04-18 15:30:54.674: I/DEBUG: debuggerd committing suicide to free the zombie!
04-18 15:30:54.674: I/BootReceiver(1568): Copying /data/tombstones/tombstone_02 to DropBox (SYSTEM_TOMBSTONE)
04-18 15:30:54.704: I/DEBUG: debuggerd: Jun 27 2011 23:27:49
04-18 15:30:54.754: D/StatusBarPolicy(1649): [BRIGHTHY] 0\. mDataNetType: 2
04-18 15:30:54.754: D/StatusBarPolicy(1649): [BRIGHTHY] curNetwork=25020 curHPLMN=25020
04-18 15:30:54.834: I/ActivityManager(1568): Process com.mobiap.casino (pid 1051) has died.
04-18 15:30:54.854: E/InputDispatcher(1568): channel '407d93b0 com.mobiap.casino/com.mobiap.casino.android_casino (server)' ~ Consumer closed input channel or an error occurred. events=0x8
04-18 15:30:54.854: E/InputDispatcher(1568): channel '407d93b0 com.mobiap.casino/com.mobiap.casino.android_casino (server)' ~ Channel is unrecoverably broken and will be disposed!
04-18 15:30:54.854: I/WindowManager(1568): WIN DEATH: Window{407d93b0 com.mobiap.casino/com.mobiap.casino.android_casino paused=false}
04-18 15:30:54.904: I/WindowManager(1568): WIN DEATH: Window{407e4130 SurfaceView paused=false}
04-18 15:30:54.924: I/WindowManager(1568): Setting rotation to 0, animFlags=1
04-18 15:30:54.924: I/ActivityManager(1568): Config changed: { scale=1.0 imsi=250/20 loc=ru_RU touch=3 keys=1/1/2 nav=1/1 orien=1 layout=18 uiMode=17 seq=606} 
```

我尝试了所有版本的 ndk 和 cocos2d-x。我试图减少图形。我试图通过 ddms 查找内存泄漏，但我没有看到任何可疑之处。

难道问题的原因是 CCUserDefaults 调用？或使用`CCTextureCache::sharedTextureCache()->addImageAsync("Slots/KNOPKI_UPR/PAYT_light.png",this,callfuncO_selector(HelloWorld::LoadImageCash));`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:37:36.257

我在 cocos2dx 游戏中遇到了这个错误。最糟糕的是调试模式没有告诉我任何事情。然后我开始削减一些方法来找到我的问题的原因。我找到了这个：

```
char positionx[10]= {0};
sprintf(positionx, "X->%f",m_playerLayer->getPosition().x);
CCLOG(positionx); 
```

我的问题在于我的数组的大小`char`。我对此发表了评论，错误停止了。奇怪的是，在 Xcode 中这不是问题，只是在 Android 中。

# ruby - Ruby中的OOP开放/封闭主体？

> ID：10247614
> 
> 赞同：2
> 
> 时间：2012-04-20T13:50:51.170
> 
> 标签：ruby

经常听说 Open/Closed 原则说一个类应该是 Open for extension 和 Closed for modify 。在抽象层面听起来很棒。

但是在 Ruby OOP 领域中是否有任何真实的用例示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T13:52:55.867

Ruby 类都是开放的。没有封闭的课堂。

例子：

```
class String
  def foo
    puts "bar"
  end
end

'anything'.foo

#bar 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-17T13:29:41.523

开放/封闭原则确实适用于 Ruby。

定义说..您的类/对象应该对扩展开放但对修改关闭。这是什么意思？

这意味着你不应该去修改类来添加新的行为。您应该使用继承或组合来实现这一点。

例如

```
class Modem
  HAYES = 1
  COURRIER = 2
  ERNIE = 3
end

class Hayes
  attr_reader :modem_type

  def initialize
    @modem_type = Modem::HAYES
  end
end

class Courrier
  attr_reader :modem_type

  def initialize
    @modem_type = Modem::COURRIER
  end
end

class Ernie
  attr_reader :modem_type

  def initialize
    @modem_type = Modem::ERNIE
  end
end

class ModemLogOn

  def log_on(modem, phone_number, username, password)
    if (modem.modem_type == Modem::HAYES)
      dial_hayes(modem, phone_number, username, password)
    elsif (modem.modem_type == Modem::COURRIER)
      dial_courrier(modem, phone_number, username, password)
    elsif (modem.modem_type == Modem::ERNIE)
      dial_ernie(modem, phone_number, username, password)
    end
  end

  def dial_hayes(modem, phone_number, username, password)
    puts modem.modem_type
    # implmentation
  end

  def dial_courrier(modem, phone_number, username, password)
    puts modem.modem_type
    # implmentation
  end

  def dial_ernie(modem, phone_number, username, password)
    puts modem.modem_type
    # implementation
  end
end 
```

要支持一种新型调制解调器......你必须去修改类。

使用继承。您可以抽象出调制解调器功能。和

```
# Abstration
class Modem

  def dial
  end

  def send
  end

  def receive
  end

  def hangup
  end

end

class Hayes < Modem
  # Implements methods
end

class Courrier < Modem
  # Implements methods
end

class Ernie < Modem
  # Implements methods
end

class ModelLogON

  def log_on(modem, phone_number, username, password)
    modem.dial(phone_number, username, password)
  end

end 
```

现在支持新型调制解调器..您不必去修改源代码。您可以添加新代码以添加新类型的调制解调器。

这就是使用继承实现开/关原则的方式。该原理可以使用许多其他技术来实现。

# video - DirectShow 过滤器可提高视频的帧速率

> ID：10247616
> 
> 赞同：0
> 
> 时间：2012-04-20T13:50:59.003
> 
> 标签：video, filter, directshow, video-processing, frame-rate

我目前正在开发一个同时录制两个视频的软件。第一个的帧率为 25fps，第二个的帧率为 10fps（或者将来可能为 15fps）。之后，将这两个视频组合成一个画中画视频。问题是，画中画的 DirectShow 过滤器不支持不同帧率的视频。现在我正在寻找一个 DirectShow 过滤器，它可以产生“虚拟帧”以将第二个视频的帧速率提高到 25fps。有谁知道这样的 DirectShow 过滤器？

在此先感谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:08:08.863

试试帧率转换器

[http://msdn.microsoft.com/en-us/library/windows/desktop/ff819100(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff819100(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-26T01:11:56.987

Appleton 给出的答案是正确的。我正在扩展该答案，提供一些示例代码（在 C++/CLI 中）显示如何为手动构建的 DirectShow 图形实例化过滤器（从可用的稀疏文档中获取片段可能很耗时）。相关代码在`REDUCE_FRAME_RATE`条件编译代码中。`COM_CALL()`是我的自定义 HRESULT 检查宏。

```
// Additional include files required for DMO support

#include <ParserUIDs.h>
#include <dmodshow.h>
#include <propsys.h>
    …

static void AddDecodedVideoSampleGrabber(
      AVStreamSourceBox^ sourceBox,
      IGraphBuilder* pGraph,
      CComPtr<IBaseFilter>& pDecodedVideoSampleGrabber,
      IPin* pSourcePin,
      CComPtr<IPin>& pDecodedVideoSampleGrabberOutPin
   ) {
      HRESULT hRes;

      COM_CALL(pDecodedVideoSampleGrabber.CoCreateInstance(CLSID_SampleGrabber));
      COM_CALL(pGraph->AddFilter(pDecodedVideoSampleGrabber, L"DecodedVideoSampleGrabber"));
      CComPtr<IPin> pDecodedVideoSampleGrabberInPin(FilterTools::GetPin(pDecodedVideoSampleGrabber, "Input"));
      COM_CALL(pGraph->ConnectDirect(pSourcePin, pDecodedVideoSampleGrabberInPin, NULL));
      pDecodedVideoSampleGrabberOutPin = FilterTools::GetPin(pDecodedVideoSampleGrabber, "Output");

      auto pFrameCallbackSink = (SampleGrabberCBSink*)sourceBox->SetupSampleGrabberCallback(
         FRAME_SAMPLE_GRABBER,
         IntPtr(pDecodedVideoSampleGrabber)
      ).ToPointer();
      sourceBox->SetDecodedVideoSampleGrabber(IntPtr(pFrameCallbackSink));

   #ifdef REDUCE_FRAME_RATE
      // insert frame-reduction filter before x264 encoding  
      CComPtr<IBaseFilter> pFrameReducer;
      COM_CALL(pFrameReducer.CoCreateInstance(CLSID_DMOWrapperFilter));
      COM_CALL(pGraph->AddFilter(pFrameReducer, L"FrameReducer"));

      CComPtr<IDMOWrapperFilter> pDmoWrapper;
      COM_CALL(pFrameReducer->QueryInterface(__uuidof(IDMOWrapperFilter), (void**)&pDmoWrapper));
      COM_CALL(pDmoWrapper->Init(__uuidof(CFrameRateConvertDmo), DMOCATEGORY_VIDEO_EFFECT));
      CComPtr<IPropertyStore> pPropStore;
      COM_CALL(pFrameReducer->QueryInterface(IID_PPV_ARGS(&pPropStore)));

      PROPVARIANT var;
      PropVariantInit(&var);
      var.vt = VT_UI8;
      var.uhVal.HighPart = OUTPUT_FPS;    // Desired frame rate
      var.uhVal.LowPart = 1;
      pPropStore->SetValue(MFPKEY_CONV_OUTPUTFRAMERATE, var);
      PropVariantClear(&var);
      CComPtr<IPin>&pDmoInPin(FilterTools::GetPin(pFrameReducer, "in0"));
      COM_CALL(pGraph->ConnectDirect(pDecodedVideoSampleGrabberOutPin, pDmoInPin, NULL));
      CComPtr<IPin>&pDmoOutPin(FilterTools::GetPin(pFrameReducer, "out0"));
      pDecodedVideoSampleGrabberOutPin = pDmoOutPin;
   #endif

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:01:25.837

您需要实现自己的叠加过滤器并将其放在解码器和渲染器之间。这个过滤器应该能够接受流 -> 所以两个输入引脚。在第一个流的情况下，它将只获取帧并将图像覆盖应用到它，由第二个流生成。因此，每次您都会在叠加流中存储一张图像。另一种解决方案是使用第三方覆盖过滤器。

实现此目的的第二种方法是在 VMR9 过滤器上使用自定义的 direct3d 分配器演示器。这样，您将在 3d 环境中渲染期间混合图像。在这种情况下，第二个流实际上将实现为一个单独的图形，并且作为输出必须使用 samplegrabber 过滤器或您的自定义渲染器生成 bmp 图像。这种方式将产生更灵活的解决方案 - 您将能够在需要时交换叠加视频。

# opengl - MinGW 中的 WGL 错误

> ID：10247619
> 
> 赞同：0
> 
> 时间：2012-04-20T13:51:13.417
> 
> 标签：opengl, mingw, mesa, wgl

我在 MinGW 中遇到 wgext.h 问题。Visual Studio 的版本不工作（编译器尖叫着缺少定义）。

所以我尝试使用 mesa-dev 并用 MinGW 编译它 - 我得到了错误

```
Fatal error: glapi.h: No such file or directory 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:24:51.057

所以再次回答我的问题。

解决了！

您必须在目标文件之后链接 OpenGL32 和 GDI32（出于某些未知原因）。

所以而不是（我使用的是makefile，所以解压后看起来像）

```
g++ -lopengl32 -lgdi32 main.o -o main 
```

必须使用

```
g++ main.o -lopengl32 -lgdi32 -o main 
```

# ios - 用于在 iPhone 设备上显示持久存储内容的 GUI

> ID：10247624
> 
> 赞同：1
> 
> 时间：2012-04-20T13:51:22.363
> 
> 标签：ios, core-data, persistent-storage

我的应用程序从 CLLocation 获取数据并通过 CoreData 将其保存到数据库中。问题是我可以通过 GUI 查看数据库的内容吗？

我在 Xcode 和 Instruments 中搜索过，但到目前为止还没有运气。

（最好不要求助于命令行 sql！！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:17:35.893

在这里查看一个 sqlite db 编辑器，它是一个 firefox 插件，免费且易于使用：[https ://stackoverflow.com/a/10036813/81729](https://stackoverflow.com/a/10036813/81729)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T13:58:02.123

您可以将 UITableView 与 fetchedResultsController 一起使用，它甚至可以让您免费进行排序。

另一种方式，这不是免费的，但让您查看和编辑您的商店是**Core Data Editor**。

[http://christian-kienle.de/CoreDataEditor](http://christian-kienle.de/CoreDataEditor)

如果您想从您的设备中获取商店，您可以（通常）在 Documents 文件夹中找到它。如果是越狱，您可以使用 iExplorer 浏览您的 iPhone 文件系统。在那里找到您的应用程序文件夹、文档，并且很可能您的 sql 在那里。

# php - 如何处理具有值范围的 if else

> ID：10247627
> 
> 赞同：1
> 
> 时间：2012-04-20T13:51:26.020
> 
> 标签：php, if-statement

我想执行这个语句

```
$Data=$cash-$tax 
```

问题是不同现金范围的税收不同

如下图所示。

现金范围------------>税

5,000 - 30,000--------> 700

30,001- 60,000-------- > 1,000

60,001 - 125,000 --------> 1,600

125,001 - 250,000 ---------> 3,000

250,001 - 500,000 -------- > 5,000

500,001 - 1,000,000---------> 9,000

我可以用什么代码来解释这一点。我试过了

```
if($cash >=0 && <=30000) $tax=700;
elseif($cash >=30001 && <=60000) $tax=1000;
elseif($cash >=60001 && <=125000) $tax=1600;
elseif($cash >=125001 && <=250000) $tax=3000;
elseif($cash >=250001 && <=500000) $tax=5000;
else($cash >=500001 && <=1000000) $tax=9000;
endif 
```

这不起作用我不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:52:42.870

您需要每个项目的完整比较表达式。

你不能这样做`if (($cash > 20) && (< 50))`。`$cash`必须是每个表达式的一部分：

```
if($cash >=0 && $cash <=30000) $tax=700;
elseif($cash >=30001 && $cash <=60000) $tax=1000;
elseif($cash >=60001 && $cash <=125000) $tax=1600;
elseif($cash >=125001 && $cash <=250000) $tax=3000;
elseif($cash >=250001 && $cash <=500000) $tax=5000;
else($cash >=500001 &&$cash  <=1000000) $tax=9000;
endif 
```

如果您尝试在 Delete 查询中应用相同的逻辑，这会变得非常有趣：

```
DELETE FROM users WHERE id = 1 OR 2; 
```

我所有的用户都去哪儿了？

# java - JdbcOdbcDriver.finalize() 行中的未知 NullPointerException：96

> ID：10247629
> 
> 赞同：14
> 
> 时间：2012-04-20T13:51:34.100
> 
> 标签：java, oracle, tomcat, nullpointerexception, jndi

我正在使用以下方法通过 JNDI 加载数据源：

JDK 1.6.0_31 Tomcat 6.0.30

当我启动 Eclipse (Indigo SR 2) 调试器时，它会中断：

```
Daemon System Thread [Finalizer] (Suspended (exception NullPointerException))   
    JdbcOdbcDriver.finalize() line: 96  
    Finalizer.invokeFinalizeMethod(Object) line: not available [native method]  
    Finalizer.runFinalizer() line: 83   
    Finalizer.access$100(Finalizer) line: 14    
    Finalizer$FinalizerThread.run() line: 160 
```

我真的不知道是什么原因造成的。此外，它似乎根本不会影响我的执行。我的数据源已初始化并正常使用，我得到了我期望的所有结果。根据我的阅读，这可能与 Oracle 驱动程序问题有关？

myApp\META-INF\context.xml

```
<Resource name="jdbc/conn" auth="Container"
    type="javax.sql.DataSource" driverClassName="oracle.jdbc.driver.OracleDriver"
    url="@url@" username="user" password="@password@"
    initialSize="4" maxActive="8" 
    defaultAutoCommit="false"
    accessToUnderlyingConnectionAllowed="true"
    testOnReturn="true"
    validationQuery="select 1 from dual"
    poolPreparedStatements="false"
    connectionProperties="SetBigStringTryClob=true"
    factory="org.apache.commons.dbcp.BasicDataSourceFactory"
/> 
```

myApp\WEB-INF\web.xml

```
<resource-ref>
    <description>My DataSource</description>
    <res-ref-name>jdbc/conn</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T20:25:32.953

我最终忽略了这个异常，因为它并没有结束执行。虽然我不知道确切的原因，但它似乎并不致命。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T00:03:37.287

我会假设你错过了对初始化（）的调用。那应该将 NPE 修复为 OdbcApi。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-27T07:31:55.830

我以前认为这就是答案。我错了。

最后我想通了。我有一些由数据库支持的托管 bean。这些托管 bean 被注释了 @eager

当服务器从 Eclipse 启动应用程序时，它们被实例化并且工具进入数据库以获取数据。我在数据库 bean 的方法中抛出了一个异常（空指针异常），因此，与数据库的连接保持打开状态。

不知何故，.metadata 文件夹被破坏和损坏。我退出了 Eclipse。然后我去 Eclipse 工作区，将 .metadata 文件夹复制到我的桌面以获取安全副本，然后我在工作区中将其删除。

我重新启动了 Eclipse。没有项目。我使用 Import > File System 将它们重新导入。

我必须在项目属性和窗口>首选项下修复构建路径，我必须重置Tomcat主页。瞧，摆脱了这个超级烦人的问题。

这就是问题的原因。希望这可以帮助某人。

# oracle - oracle建表问题

> ID：10247635
> 
> 赞同：2
> 
> 时间：2012-04-20T13:51:53.053
> 
> 标签：oracle, grails

我在我的 grails 应用程序中使用活动插件。当我尝试运行我的应用程序时，我收到了这个错误。不创建表。我不明白为什么。

```
| Error 2012-04-20 18:30:24,746 [pool-6-thread-1] ERROR interceptor.CommandContext  - Error while closing command context
Message: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

### The error may involve org.activiti.engine.impl.persistence.entity.PropertyEntity.selectProperty-Inline
### The error occurred while setting parameters
### Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

    Line | Method
->>    8 | wrapException                             in org.apache.ibatis.exceptions.ExceptionFactory
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     77 | selectList                                in org.apache.ibatis.session.defaults.DefaultSqlSession
|     69 | selectList . . . . . . . . . . . . . . .  in     ''
|     40 | selectOne                                 in     ''
|    217 | selectById . . . . . . . . . . . . . . .  in org.activiti.engine.impl.db.DbSqlSession
|    629 | dbSchemaUpdate                            in     ''
|    885 | performSchemaOperationsProcessEngineBuild in     ''
|     25 | execute                                   in org.activiti.engine.impl.SchemaOperationsProcessEngineBuild
|     24 | execute . . . . . . . . . . . . . . . . . in org.activiti.engine.impl.interceptor.CommandExecutorImpl
|     42 | execute                                   in org.activiti.engine.impl.interceptor.CommandContextInterceptor
|     40 | execute . . . . . . . . . . . . . . . . . in org.activiti.spring.SpringTransactionInterceptor
|     33 | execute                                   in org.activiti.engine.impl.interceptor.LogInterceptor
|     77 | <init> . . . . . . . . . . . . . . . . .  in org.activiti.engine.impl.ProcessEngineImpl
|    271 | buildProcessEngine                        in org.activiti.engine.impl.cfg.ProcessEngineConfigurationImpl
|     60 | buildProcessEngine . . . . . . . . . . .  in org.activiti.spring.SpringProcessEngineConfiguration
|     56 | getObject                                 in org.activiti.spring.ProcessEngineFactoryBean
|     32 | getObject . . . . . . . . . . . . . . . . in     ''
|    334 | innerRun                                  in java.util.concurrent.FutureTask$Sync
|    166 | run . . . . . . . . . . . . . . . . . . . in java.util.concurrent.FutureTask
|   1110 | runWorker                                 in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . . . . . . . . . . . . . . . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run                                       in java.lang.Thread

Caused by SQLSyntaxErrorException: ORA-00942: table or view does not exist

->>   91 | newSQLException                           in oracle.jdbc.driver.SQLStateMapping
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    112 | newSQLException                           in oracle.jdbc.driver.DatabaseError
|    173 | throwSqlException . . . . . . . . . . . . in     ''
|    455 | processError                              in oracle.jdbc.driver.T4CTTIoer
|    413 | processError . . . . . . . . . . . . . .  in     ''
|   1030 | receive                                   in oracle.jdbc.driver.T4C8Oall
|    194 | doOall8 . . . . . . . . . . . . . . . . . in oracle.jdbc.driver.T4CPreparedStatement
|    785 | executeForDescribe                        in     ''
|    860 | executeMaybeDescribe . . . . . . . . . .  in     ''
|   1186 | doExecuteWithTimeout                      in oracle.jdbc.driver.OracleStatement
|   3381 | executeInternal . . . . . . . . . . . . . in oracle.jdbc.driver.OraclePreparedStatement
|   3482 | execute                                   in     ''
|   1373 | execute . . . . . . . . . . . . . . . . . in oracle.jdbc.driver.OraclePreparedStatementWrapper
|    172 | execute                                   in org.apache.commons.dbcp.DelegatingPreparedStatement
|     39 | query . . . . . . . . . . . . . . . . . . in org.apache.ibatis.executor.statement.PreparedStatementHandler
|     55 | query                                     in org.apache.ibatis.executor.statement.RoutingStatementHandler
|     41 | doQuery . . . . . . . . . . . . . . . . . in org.apache.ibatis.executor.SimpleExecutor
|    216 | queryFromDatabase                         in org.apache.ibatis.executor.BaseExecutor
|     95 | query . . . . . . . . . . . . . . . . . . in     ''
|     72 | query                                     in org.apache.ibatis.executor.CachingExecutor
|     75 | selectList . . . . . . . . . . . . . . .  in org.apache.ibatis.session.defaults.DefaultSqlSession
|     69 | selectList                                in     ''
|     40 | selectOne . . . . . . . . . . . . . . . . in     ''
|    217 | selectById                                in org.activiti.engine.impl.db.DbSqlSession
|    629 | dbSchemaUpdate . . . . . . . . . . . . .  in     ''
|    885 | performSchemaOperationsProcessEngineBuild in     ''
|     25 | execute . . . . . . . . . . . . . . . . . in org.activiti.engine.impl.SchemaOperationsProcessEngineBuild
|     24 | execute                                   in org.activiti.engine.impl.interceptor.CommandExecutorImpl
|     42 | execute . . . . . . . . . . . . . . . . . in org.activiti.engine.impl.interceptor.CommandContextInterceptor
|     40 | execute                                   in org.activiti.spring.SpringTransactionInterceptor
|     33 | execute . . . . . . . . . . . . . . . . . in org.activiti.engine.impl.interceptor.LogInterceptor
|     77 | <init>                                    in org.activiti.engine.impl.ProcessEngineImpl
|    271 | buildProcessEngine . . . . . . . . . . .  in org.activiti.engine.impl.cfg.ProcessEngineConfigurationImpl
|     60 | buildProcessEngine                        in org.activiti.spring.SpringProcessEngineConfiguration
|     56 | getObject . . . . . . . . . . . . . . . . in org.activiti.spring.ProcessEngineFactoryBean
|     32 | getObject                                 in     ''
|    334 | innerRun . . . . . . . . . . . . . . . .  in java.util.concurrent.FutureTask$Sync
|    166 | run                                       in java.util.concurrent.FutureTask
|   1110 | runWorker . . . . . . . . . . . . . . . . in java.util.concurrent.ThreadPoolExecutor
|    603 | run                                       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . . . . . . . . . . . . . . in java.lang.Thread
| Error 2012-04-20 18:30:24,927 [pool-6-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: Error creating bean with name 'processEngine': FactoryBean threw exception on object creation; nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

### The error may involve org.activiti.engine.impl.persistence.entity.PropertyEntity.selectProperty-Inline
### The error occurred while setting parameters
### Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

Message: Error creating bean with name 'processEngine': FactoryBean threw exception on object creation; nested exception is org.apache.ibatis.exceptions.PersistenceException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

### The error may involve org.activiti.engine.impl.persistence.entity.PropertyEntity.selectProperty-Inline
### The error occurred while setting parameters
### Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

    Line | Method
->>  334 | innerRun  in java.util.concurrent.FutureTask$Sync
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread

Caused by PersistenceException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

### The error may involve org.activiti.engine.impl.persistence.entity.PropertyEntity.selectProperty-Inline
### The error occurred while setting parameters
### Cause: java.sql.SQLSyntaxErrorException: ORA-00942: table or view does not exist

->>    8 | wrapException in org.apache.ibatis.exceptions.ExceptionFactory
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     77 | selectList in org.apache.ibatis.session.defaults.DefaultSqlSession
|     69 | selectList in     ''
|     40 | selectOne in     ''
|    217 | selectById in org.activiti.engine.impl.db.DbSqlSession
|    629 | dbSchemaUpdate in     ''
|    885 | performSchemaOperationsProcessEngineBuild in     ''
|     25 | execute   in org.activiti.engine.impl.SchemaOperationsProcessEngineBuild
|     24 | execute . in org.activiti.engine.impl.interceptor.CommandExecutorImpl
|     42 | execute   in org.activiti.engine.impl.interceptor.CommandContextInterceptor
|     40 | execute . in org.activiti.spring.SpringTransactionInterceptor
|     33 | execute   in org.activiti.engine.impl.interceptor.LogInterceptor
|     77 | <init> .  in org.activiti.engine.impl.ProcessEngineImpl
|    271 | buildProcessEngine in org.activiti.engine.impl.cfg.ProcessEngineConfigurationImpl
|     60 | buildProcessEngine in org.activiti.spring.SpringProcessEngineConfiguration
|     56 | getObject in org.activiti.spring.ProcessEngineFactoryBean
|     32 | getObject in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run . . . in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread

Caused by SQLSyntaxErrorException: ORA-00942: table or view does not exist

->>   91 | newSQLException in oracle.jdbc.driver.SQLStateMapping
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    112 | newSQLException in oracle.jdbc.driver.DatabaseError
|    173 | throwSqlException in     ''
|    455 | processError in oracle.jdbc.driver.T4CTTIoer
|    413 | processError in     ''
|   1030 | receive   in oracle.jdbc.driver.T4C8Oall
|    194 | doOall8 . in oracle.jdbc.driver.T4CPreparedStatement
|    785 | executeForDescribe in     ''
|    860 | executeMaybeDescribe in     ''
|   1186 | doExecuteWithTimeout in oracle.jdbc.driver.OracleStatement
|   3381 | executeInternal in oracle.jdbc.driver.OraclePreparedStatement
|   3482 | execute   in     ''
|   1373 | execute . in oracle.jdbc.driver.OraclePreparedStatementWrapper
|    172 | execute   in org.apache.commons.dbcp.DelegatingPreparedStatement
|     39 | query . . in org.apache.ibatis.executor.statement.PreparedStatementHandler
|     55 | query     in org.apache.ibatis.executor.statement.RoutingStatementHandler
|     41 | doQuery . in org.apache.ibatis.executor.SimpleExecutor
|    216 | queryFromDatabase in org.apache.ibatis.executor.BaseExecutor
|     95 | query . . in     ''
|     72 | query     in org.apache.ibatis.executor.CachingExecutor
|     75 | selectList in org.apache.ibatis.session.defaults.DefaultSqlSession
|     69 | selectList in     ''
|     40 | selectOne in     ''
|    217 | selectById in org.activiti.engine.impl.db.DbSqlSession
|    629 | dbSchemaUpdate in     ''
|    885 | performSchemaOperationsProcessEngineBuild in     ''
|     25 | execute . in org.activiti.engine.impl.SchemaOperationsProcessEngineBuild
|     24 | execute   in org.activiti.engine.impl.interceptor.CommandExecutorImpl
|     42 | execute . in org.activiti.engine.impl.interceptor.CommandContextInterceptor
|     40 | execute   in org.activiti.spring.SpringTransactionInterceptor
|     33 | execute . in org.activiti.engine.impl.interceptor.LogInterceptor
|     77 | <init>    in org.activiti.engine.impl.ProcessEngineImpl
|    271 | buildProcessEngine in org.activiti.engine.impl.cfg.ProcessEngineConfigurationImpl
|     60 | buildProcessEngine in org.activiti.spring.SpringProcessEngineConfiguration
|     56 | getObject in org.activiti.spring.ProcessEngineFactoryBean
|     32 | getObject in     ''
|    334 | innerRun  in java.util.concurrent.FutureTask$Sync
|    166 | run       in java.util.concurrent.FutureTask
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T15:43:09.147

想到此错误消息的 3 种可能性：

1.  被引用的表/视图实际上不存在。
2.  被引用的表/视图确实存在，但您无权从中选择。
3.  表/视图存在，您有权从中选择，但表/视图位于不同的模式中，并且没有使用限定名称（例如，SCHEMA.TABLE_NAME）引用，或者没有通过同义词进行别名。

该问题的修复应该相当明显：

1.  创建表/视图
2.  通过 GRANT 命令获取表/视图的权限
3.  在 SELECT 语句中创建同义词或完全限定表/视图名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T06:20:51.987

我刚刚在我的 Grails 项目中遇到了同样的症状。

我通过添加一个新的日期变量和一个不存在的格式的默认值导致了错误。

在面向对象版本失败后对我有用的日期格式是：

```
static mapping = {
    myVar defaultValue: "'01-JAN-1970'"
} 
```

您可能有一个不同的错误，但关键是 create table 语句失败，可能是由于数据库交互的某些方面有点“不走寻常路”，并且是最近添加的。

为了排除故障，我将采取以下步骤：

1) 验证您正在使用您认为的 DataSource.groovy 配置运行（例如，更改您的密码并确保您无法登录）并且您的 dbCreate 变量设置为“create”或“create-drop”作为适当的。如果有充分的理由使用更新或验证，那么要么在不同的环境中创建相同的对象并移动，要么只是适当地创建表。如果您不确定，请在新项目的一开始就使用 create-drop 来使用这些工具，然后再也不使用了。

2) 当您确认 grails 应该像上面那样创建表时，然后打开日志记录以查看重新启动期间实际发生的情况。为此，请将“logSql = true”和“formatSql” = true 添加到与用户名和密码相同级别的数据源配置中。您应该在标准输出中看到有缺陷的 create 语句。

3）如果你不能立即看到什么问题，那么直接在sqlplus中运行语句来隔离出问题的原因。这可能会指向最近的变化。

# html - 是否可以在没有 javascript 的情况下使用带有下拉链接的导航栏？

> ID：10247637
> 
> 赞同：2
> 
> 时间：2012-04-20T13:51:56.870
> 
> 标签：html, css, menu

是否可以在没有 JavaScript的情况下制作[这种风格](http://dev.visualdrugs.net/mootools/dropdown_menu.html)的导航栏？

我认为可以使用 CSS`:hover`更改列表的可见性，但我无法找到这样的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:00:36.237

你可以这样写：

```
#dropdownMenu li > ul{
    display:none;
}
#dropdownMenu > li:hover > ul{
    display:block;
} 
```

检查这个[http://jsfiddle.net/VceX4/1/](http://jsfiddle.net/VceX4/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T13:52:52.670

我假设您之所以要问，是因为您不确定要 Google 什么（即您不知道使用什么术语来查找您要查找的内容）。

我建议谷歌搜索`pure CSS drop down menu`。你会发现很多很棒的教程和代码示例。这是一个体面的：

[http://purecssmenu.com/](http://purecssmenu.com/)

# json - 使用 Jackson 从 String 反序列化 ArrayList

> ID：10247639
> 
> 赞同：6
> 
> 时间：2012-04-20T13:52:03.637
> 
> 标签：json, spring, jackson

我正在使用 Spring 的 MappingJacksonHttpMessageConverter 将 JSON 消息转换为控制器中的对象。

```
<bean id="jsonConverter"
    class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="prefixJson" value="false" />
    <property name="supportedMediaTypes" value="application/json" />
</bean>

<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="messageConverters">
        <list>
            <ref bean="jsonConverter" />
        </list>
    </property>
</bean> 
```

对于声明为 ArrayList 的字段，如果 json 消息中包含 String，则会抛出以下异常：

```
org.springframework.http.converter.HttpMessageNotReadableException: 
 Could not read JSON: Can not deserialize instance of java.util.ArrayList out of VALUE_STRING token 
```

一个例子是下面的类定义：

```
public class Product {
   private String name;
   private List<String> images;
} 
```

传入的 Json 在哪里：

```
{name:"Widget", images:"image1.jpg"} 
```

如您所见，这将产生异常，因为 image 应该是一个数组。

我想制作更宽容的自定义反序列化器。如果反序列化失败，则从 String 创建单个元素的 ArrayList。我将如何将其注入 MappingJacksonHttpMessageConverter 或 ObjectMapper？

我不希望使用注释来标记每个 ArrayList 字段，以便可以使用自定义反序列化。 **我正在寻找一种方法来覆盖默认反序列化器以执行此功能。**

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-03T20:32:00.927

查看这篇文章，描述如何使用 jackson objectMapper 的功能来完成此操作。

[https://github.com/FasterXML/jackson-dataformat-xml/issues/21](https://github.com/FasterXML/jackson-dataformat-xml/issues/21)

对我来说，添加以下内容解决了这个问题

```
jsonMapper.configure(DeserializationFeature.ACCEPT_SINGLE_VALUE_AS_ARRAY, true); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T17:48:12.603

据我所知，传入的 JSON 不包含任何数组。问题是：“图像”应该分开还是包含单个图像？假设它们是逗号分隔的：

```
public class Product {
   private String name;
   private List<String> images;

   @JsonProperty("images")
   public String getImagesAsString() {
      StringBuilder sb = new StringBuilder();
      for (String img : images) {
          if (sb.length() > 0) sb.append(',');
          sb.append(img);
      }
      return sb.toString();
   }

   public void setImagesAsString(String img) {
       this.images = Arrays.asList(img.split(","));
   }

   @JsonIgnore
   public List<String> getImages() {
       return images;
   }
} 
```

# gcc - 交叉 mingw 编译因未知伪操作而失败

> ID：10247642
> 
> 赞同：1
> 
> 时间：2012-04-20T13:52:28.220
> 
> 标签：gcc, compiler-errors, mingw, cross-compiling, x86-64

我正在尝试在 redhat 集群（x86_64 主机）上设置 cross-mingw。我没有 root 访问权限，并且可用的 mingw 二进制文件不起作用（坏 glibc 版本等）。我正在阅读本教程：

[http://sourceforge.net/apps/trac/mingw-w64/wiki/Cross%20Win32%20and%20Win64%20compiler](http://sourceforge.net/apps/trac/mingw-w64/wiki/Cross%20Win32%20and%20Win64%20compiler)

我正在从以下源 tarball 编译：

```
binutils-2.20.1.tar.bz2
gcc-4.7.0.tar.bz2
gmp-5.0.4.tar.bz2
mingw-w64-v2.0.2.tar.gz
mpc-0.9.tar.gz
mpfr-2.4.2.tar.bz2 
```

不幸的是，在解决了一些问题之后，我在 mingw-crt 编译过程中陷入了困境——教程中的步骤“构建 crt（Mingw-w64 本身）”。我正在使用 sysroot 并且有正确的 $PATH。一段时间后退出并出现以下错误，并完成一些制作食谱：

```
x86_64-w64-mingw32-ranlib lib64/libws2_32.a
x86_64-w64-mingw32-gcc -DHAVE_CONFIG_H -I. -I/home/zaluski/work/mingw-builds/mingw-w64-v2.0.2/mingw-w64-crt  -D_CRTBLD -I/var/fpwork/mingw/x86_64-w64-mingw32/include   -pipe -std=gnu99 -Wall -Wextra -Wformat -Wstrict-aliasing -Wshadow -Wpacked -Winline -Wimplicit-function-declaration -Wmissing-noreturn -Wmissing-prototypes -g -O2 -m64 -I/home/zaluski/work/mingw-builds/mingw-w64-v2.0.2/mingw-w64-crt/include -D_SYSCRT=1 -DCRTDLL=1 -c /home/zaluski/work/mingw-builds/mingw-w64-v2.0.2/mingw-w64-crt/crt/crtexe.c -o lib64/crt1.o -D__CRTDLL__ -U__MSVCRT__
{standard input}: Assembler messages:
{standard input}:713: Error: unknown pseudo-op: `.seh_handlerdata'
{standard input}:762: Error: unknown pseudo-op: `.seh_handlerdata'
make[3]: *** [lib64/crt1.o] Error 1 
```

我在谷歌中找到的只是关于检查是否使用了正确的编译器的建议。正如我所说，我有很好的 $PATH (/usr/lib64/qt-3.3/bin:/usr/kerberos/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin: /opt/bin:/usr/atria/bin:/opt/UsageModel:/home/zaluski/bin:/var/fpwork/mingw/bin) 并且日志中有x86_64-w64-mingw32-gcc。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:08:49.897

可能正在使用本机汇编器而不是交叉编译器。检查 *x86_64-w64-mingw32-as* 是否在 $PATH 中。

我会尝试使用 *x86_64-w64-mingw32-gcc -S* 标志运行失败的命令以自己发出汇编代码，然后通过将发出的程序集与 *x86_64-w64-mingw32-as* 汇编程序一起使用来比较是否发生类似错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:41:56.190

好的，我设法继续安装。我发现定义了**SEH**宏，但似乎不应该，因此条件代码失败。快速破解解决了这个问题：

```
sed 's/#ifdef __SEH__/#ifdef __SEHWORKAROUND__/' -i mingw-builds/mingw-w64-v2.0.2/mingw-w64-crt/crt/crtexe.c 
```

在这个解决方案之后，我能够成功编译 mingw-crt 并继续下一步 - “完成 GCC”。

# google-maps - 将两个图层添加到融合表中，识别多边形内的一个点

> ID：10247643
> 
> 赞同：0
> 
> 时间：2012-04-20T13:52:30.997
> 
> 标签：google-maps, google-fusion-tables

我目前有两张表，一张是[多边形图层](https://www.google.com/fusiontables/DataSource?snapid=S462626Yxwh)，另一张是事件[点](https://www.google.com/fusiontables/DataSource?snapid=S462628F9Se)列表。

我很好奇是否可以在同一张地图上显示这两个表格。我的最终目标是将它们显示在网页上，这将允许用户选择一个多边形，然后将所选多边形内的所有点显示在仪表板上，我不确定这是否可能。

谢谢，

菲尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:36:04.897

这应该很容易从网页上完成，基本上你只需要创建多个融合表图层，并将它们添加到你的地图中，这样的东西应该可以很好地工作（我确实注意到你的图层目前是私有的，如果你想要它们要从网页访问，它们必须标记为公开）：

```
//Create the map
map = new google.maps.Map(document.getElementById('map-canvas'), 
{
    zoom: 5,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}); 

//Add the first fusion table layer
var layer1 = new google.maps.FusionTablesLayer({
    query: {
    select: 'Address',
    from: **Layer1ID**
    },
    map: map
});

//Add the second fusion table layer
var layer2 = new google.maps.FusionTablesLayer({
    query: {
    select: 'Address',
    from: **Layer2ID**
    },
    map: map
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:59:59.117

回复：*“允许用户选择一个多边形，然后将所选多边形内的所有点显示在仪表板上，我不确定这是否可能。”* Fusion Table SQL API 有一个 ST_INTERSECTS 运算符，几乎可以完成此任务。但它只适用于圆形和矩形。不适用于多边形。

# html - 我可以专门为 Mac 浏览器编写 CSS 代码吗？

> ID：10247648
> 
> 赞同：4
> 
> 时间：2012-04-20T13:52:43.617
> 
> 标签：html, css, cross-browser, conditional

**网站：** [http ://clientfiles.priworks.com/lgmanagedportfolios/test/investment.html](http://clientfiles.priworks.com/lgmanagedportfolios/test/investment.html)

我在这个网页上工作了一段时间，现在试图让第一个子菜单链接的左侧与第一个父/主菜单链接的左侧对齐。

我不认为有一种合乎逻辑的方法可以做到这一点，但经过多次捏造后，我已经接近正确了。对于所有 win 浏览器和所有 Mac 浏览器（带有一些条件 CSS），该位置是一致的，但对于 Win 和 Mac 浏览器却不是，例如，在 Mac Firefox 中，文本太正确了，而在 Win Firefox 中，它是完美的。

**问题：**他们是专门为 Mac 浏览器调整填充的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T13:58:14.160

我不相信你可以用纯 css 做到这一点，但你可以用 javascript 检测操作系统，然后用它来加载不同的 css。

[http://www.quirksmode.org/js/detect.html](http://www.quirksmode.org/js/detect.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T14:05:52.220

您提到了文本大小/位置的不一致，您是否尝试过使用[Eric Meyer 的 CSS Reset](http://meyerweb.com/eric/tools/css/reset/)或[Normalize.css](http://necolas.github.com/normalize.css/)之类的东西？他们倾向于解决这样的问题。

顺便说一句，这些文本差异问题是由 Windows 和 Mac 使用不同的字体作为默认字体引起的，因此使用 CSS 使其大小和字体系列相同可能正是您所需要的，而不是在每个操作系统中使用不同的样式表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T17:55:44.020

这是您在上面的评论之一中尝试实现的正确代码

```
if (navigator.platform === 'MacIntel' || navigator.platform === 'MacPPC') {
    $('head').append('<link rel="stylesheet" type="text/css" href="mac.css" />');
}​ else {
    $('head').append('<link href="main.css" rel="stylesheet" type="text/css" />');
} 
```

你的mac没有检测到它的原因是A.你的语法错误和B.如果你留`<link href="main.css" rel="stylesheet" type="text/css" />`在head部分，那么查看你网站的源代码，那么mac浏览器仍然会读取那个css文件。在浏览器上方使用我的代码时，只有在 mac 正在浏览站点时才会给出 mac.css 文件，否则它会加载默认的 css

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T17:30:39.957

使用 CSS 重置表或规范化，它将通过剥离默认样式使所有浏览器显示**大致相同**

或者只是使用`* { padding: 0;}`将所有填充设置为 0，但是您必须为所有 css 设置填充

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-20T13:56:13.717

## 更新：

您可能希望使用 jQuery 将 CSS 动态应用到特定操作系统上的特定浏览器。您还需要脚本语言的一些帮助。

使用 $_SERVER['HTTP_USER_AGENT'] 超级全局变量来检索浏览器和操作系统类型的信息。如果 OS = LION 并且浏览器是 Safari，则设置一个标志。

仅当设置了该标志时，才在 jQuery 中使用此标志来应用 CSS。

## 老答案：

这将是 Safari 和 Chrome 的 CSS，但也会影响 Windows 平台上的相同浏览器。

Safari 和 google chrome 使用相同的引擎，称为 webkit。您可以使用定位这两个浏览器

-webkit-属性

[看看这个链接](http://dustinbrewer.com/css-hackgetting-safari-to-behave/)

这是[webkit](http://css-infos.net/properties/webkit)属性的列表，您可以使用。

一些例子

```
-webkit-animation
-webkit-animation-delay
-webkit-animation-direction 
```

不过，它们大多是高级属性，而不是基本属性。

# asp.net - 生成 BC30205 的脚本：预期语句结束。编译器错误

> ID：10247649
> 
> 赞同：1
> 
> 时间：2012-04-20T13:52:43.620
> 
> 标签：asp.net, .net

我正在尝试更改 asp.net 2.0 脚本以根据 URL 变量从数据库中动态收集值，而不是拥有多个版本的脚本，每个版本都有自己的硬编码值（这就是它的设计方式）。

错误是这样的：

```
Line 51:     Private MSG_FROM As String = "valuehere"
Line 52:     Private MSG_FROM_NAME As String = "valuehere"
Line 53:     Private MSG_SUBJECT As String = "<%# forms.FieldValue("MSG_SUBJECT", Container) %>"
Line 54:     Private MSG_BODY As String = "valuehere" 
```

问题出在第 53 行，这是我为获得数据库值而设置的此测试运行的唯一变量。如果值是硬编码的，则数据库连接很好，脚本运行正常。

谁能给我一个关于问题所在的见解？MSDN 声明我必须插入一个行终止符。我在第二个引号之后尝试了一个`/r/n`and无济于事。`Environment.NewLine`

这不是我真正理解的语言，但我希望这是我需要输入的非常基本的东西。

谢谢，本

* * *

根据回复的一些附加信息：

MSG_SUBJECT 是对具有该名称的 db 单元的调用。该值是纯文本，用于指示它将生成的电子邮件的主题行。这里的两个解决方案都让脚本运行，但误以为第一个发送电子邮件的主题为 <%# forms.FieldValue("MSG_SUBJECT", Container) %> ，第二个发送的主题为 <%# forms.FieldValue('MSG_SUBJECT', Container) %> 因此不将其识别为引用 db 表单元格，而是将其识别为变量本身。通常在代码中它会说 rivate MSG_SUBJECT As String = "您已完成的表格已附加" 并且下一个变量将出现在下面的行中，即要发送到的地址，发送自。但实际上，代码没有更多内容。整个脚本在服务器端运行。虽然我可以在发布表单页面中包含这些变量并且这会起作用，这不是我想要的解决方案，因为脚本还可以接收从使用 URL 提交到设施的 acroform 提交的 FDF 数据，因此在这种模式下，这些消息变量必须包含在服务器端脚本中。正如你所说，我真的不知道这是否可能，这只是一个赌注，因为将变量保存在数据库中比使用硬编码变量的多个脚本版本更容易管理和部署新表单. 感谢你的协助。这只是一个平局，因为将变量保存在数据库中比使用硬编码变量的多个版本的脚本更容易管理和部署新表单。感谢你的协助。这只是一个平局，因为将变量保存在数据库中比使用硬编码变量的多个版本的脚本更容易管理和部署新表单。感谢你的协助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:06:03.623

它是一个语法错误，您必须`"`像这样将字符串中的字符加倍来转义它们：

```
Private MSG_SUBJECT As String _
    = "<%# forms.FieldValue(""MSG_SUBJECT"", Container) %>" 
```

但我认为这不会解决你真正的问题。您必须`<%#`在 aspx 表单页面中而不是在代码中编写标记。你在做什么`MSG_SUBJECT`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:10:27.010

尝试改变这个：

```
 "<%# forms.FieldValue("MSG_SUBJECT", Container) %>" 
```

对此： `"<%# forms.FieldValue('MSG_SUBJECT', Container) %>"`

MSG_Subject 周围的双引号可能使它认为第一个引号是字符串的结尾。

我有一种感觉，您尝试执行此操作的方式确实行不通，因为您无法以这种方式将事物绑定到变量。<%%> 是在页面的htm端使用的，但是你的变量看起来是服务器端的？

也许显示更多您的代码。

**更新**

这可能会有所帮助：

[http://msdn.microsoft.com/en-us/library/dw70f090(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dw70f090(v=vs.100).aspx)

听上去，您需要做的就是根据某种 ID 从数据库中获取主题？然后将它分配给一个变量？

# php - 如果存在数据，如何执行更新查询，否则在 Mysql 中插入数据？

> ID：10247653
> 
> 赞同：1
> 
> 时间：2012-04-20T13:52:55.490
> 
> 标签：php, mysql, insert, insert-update

我想知道**数据是否存在，那么必须有 mysql 更新查询，否则将数据插入 mysql 表。**

我所做的是，我正在使用**fgetcsv()**函数将 .csv 文件中的数据提取到 mysql 中。然后从 csv 读取每一行并将这四个值放入四个变量中，然后触发更新查询。那么我如何检查是否其中一个数据不存在仍然更新查询正在工作（0行成功更新）所以我想识别该数据并将其**插入**到表中，如果数据存在我的**更新**查询将起作用。

我想更新或插入数据到 product_entity_price 表中。我的脚本-：

```
 if(($handle = fopen("/data/sample/items_0420.csv", "r")) !== FALSE) 
    {          
         while (($data = fgetcsv($handle, 8000, ",")) !== FALSE)      
         {
        $num = count($data);
        for ($c=0; $c < $num; $c++) 
        {             
            $temp = $data;             
            $string = implode(";", $temp);           
        }
            $pieces = explode(";", $string);               
            $col1 = $pieces[0];
            $col2 = $pieces[1];         
            $col3 = $pieces[2];               
            $col4 = $pieces[3]; 

    $query_insert = "INSERT INTO import_prices (customer_id, sku, price, website) ".             
    "VALUES($col1,'$col2',$col3,'$col4') ".             
    "ON DUPLICATE KEY UPDATE customer_id=$col1, price=$col3,website='$col4' "; 
        $result = mysql_query($query_insert);

             $query_update = "UPDATE  product_entity_price pep 
             JOIN   catalog_product cp   ON    cp.entity_id = pep.entity_id    
             AND    cp.sku LIKE '$col2'   AND   website_id = $col4 
             JOIN   customer_group cg   ON    cg.customer_group_id = pep.customer_group_id   AND   cg.customer_group_code =  $col1 
SET cpetp.value = ".$col3.";";
             mysql_query($query_update);
          }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T13:59:22.383

检查mysql命令替换：

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:58:09.950

我认为您想要的是 MySQL UPSERT，也称为[INSERT...ON DUPLICATE KEY UPDATE](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T13:58:33.233

如果您不关心如果重复并再次插入行是否会被删除，那么您可以使用[REPLACE](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

```
REPLACE into table (col1, col2) values(val1, val2) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:13:45.130

我一直发现使用两个查询最**可靠：**

```
$result = mysql_query("SELECT 1 FROM import_prices WHERE ...");
list($exists) = mysql_fetch_row($result);

if ($exists)
    $result = mysql_query("UPDATE import_prices ...");
else
    $result = mysql_query("INSERT INTO import_prices ..."); 
```

这种方法的缺点是您将始终进行两个查询而不是一个。但是这种方法适用于没有主键的表，例如关系表。

您也可以尝试只执行更新查询，然后检查`mysql_affected_rows`并插入它是否为 0，但请**注意**：如果您执行更新并且所有旧值与新值相同，`mysql_affected_rows`仍将返回 0。

# java - 如何处理在.NET / java中以不同方式实现的“本地时间到UTC转换”

> ID：10247656
> 
> 赞同：1
> 
> 时间：2012-04-20T13:52:57.583
> 
> 标签：java, .net, json, datetime, utc

**.NET Web 服务**
我有一个 .NET Web 服务，它返回 json 格式的 DateTime。Microsoft 指定的 DateTime 的 json 表示例如：
/Date(1302847200000+0200)/
这是根据[MSDN - Stand-Alone JSON Serialization](http://msdn.microsoft.com/en-us/library/bb412170.aspx)自 1970 年 1 月第一个 UTC 在 +/- 符号之前的毫秒偏移量和符号后是当地时间到 GMT 的时区偏移量。因此，对于此序列化，必须将 DateTime 值从 Web 服务的本地时间转换为 UTC。

**Android (java) 客户端**
在我的接收 Web 服务结果的 Android 应用程序中，我使用 Gson 解析 json。因为 .NET DateTime json 序列化不是标准（根据微软的说法，DateTime 没有这样的标准）gson 无法解析这种格式化的日期。我写了一个 Date TypeAdapter，它在客户端进行序列化和反序列化。

所以这似乎工作正常。在 UTC 中往返服务的日期时间交换。如果 .NET 的 DateTime 和 Java 的 Calendar 在将本地时间转换为 UTC 时间时会考虑完全相同的规则，那就太好了。

**一个例子：**瑞士自 1979 年以来就有 DST（夏令时）。Java 知道以前不存在 DST。.NET 假定它自古以来就存在。因此，当 1979 年之前的夏季日期从 .NET 转换为 UTC 并从 Java 转换回本地时间（用于演示）时，该日期在同一时区会损失一个小时。

**问题** 如何面对这个问题？我在描述的数据交换中是否有任何错误。我想了很多不同的解决方案。我可以想象正常工作的唯一方法是替换 .NET json DateTime 序列化/反序列化。这当然不是一个受欢迎的...

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:00:20.423

不要使用标准的 .NET Json 序列化程序，如果您在 Java 和 .NET 之间工作，它会给您带来太多的麻烦。正如您所发现的，Microsoft 使用了一种大多数人不使用的格式。

最好的序列化程序是[Newtonsoft 的 Json.NET](http://james.newtonking.com/pages/json-net.aspx)（[NuGet 页面](http://nuget.org/packages/Newtonsoft.Json)），它已成为 .NET 开发人员的事实标准。他们有一个很好的 DateTime 序列化/反序列化选项，易于使用。 [有关更多信息，请查看他们在 DateTime 上的博客文章](http://james.newtonking.com/archive/2009/02/20/good-date-times-with-json-net.aspx)。我倾向于使用 ISO 8601，这是他们在 Json.NET v4.5 中的默认格式。

我曾经在一个企业应用程序上工作，该应用程序通过 Json 与使用多种语言创建的许多不同产品进行通信，而 Json.NET 使产品间通信变得微不足道。

**处理瑞士日期时间的更新**

由于您指定的是通用的中欧标准时间，.NET 不知道瑞士的日期时间规则具体是什么。要与瑞士打交道，您需要为 .NET 提供瑞士规则。查看 Wikipedia，它始于 1981 年，因此创建自定义`TimeZoneInfo`看起来如下所示：

```
// UTC Time
var date1 = new DateTime(1969, 4, 20, 2, 20,00, DateTimeKind.Utc);
Console.WriteLine("Date 1: " + date1.ToString() + " - " + date1.IsDaylightSavingTime());

// CEST
var timezone = TimeZoneInfo.FindSystemTimeZoneById("Central European Standard Time");
var date2 = TimeZoneInfo.ConvertTimeFromUtc(date1, timezone);
Console.WriteLine("Date 2: " + date2.ToString() + " - " + date2.IsDaylightSavingTime() + " " + timezone.IsAmbiguousTime(date2));

// Switzerland
var cesAdjRule = timezone.GetAdjustmentRules().Single();
var switzerlandStartTransition = TimeZoneInfo.TransitionTime.CreateFloatingDateRule(
        cesAdjRule.DaylightTransitionStart.TimeOfDay,
        cesAdjRule.DaylightTransitionStart.Month, cesAdjRule.DaylightTransitionStart.Week,
        cesAdjRule.DaylightTransitionStart.DayOfWeek
);
var switzerlandAdjustmentRule = TimeZoneInfo.AdjustmentRule.CreateAdjustmentRule(
    new DateTime(1981, 1, 1),
    DateTime.MaxValue.Date,
    cesAdjRule.DaylightDelta,
    switzerlandStartTransition,
    cesAdjRule.DaylightTransitionEnd
);
TimeZoneInfo.AdjustmentRule[] adjustments = {switzerlandAdjustmentRule};

var switzerlandTimeZone = TimeZoneInfo.CreateCustomTimeZone("Switzerland",
                                                            timezone.BaseUtcOffset,
                                                            "Switzerland",
                                                            "Switzerland",
                                                            "Switzerland",
                                                            adjustments, false);

var date3 = TimeZoneInfo.ConvertTimeFromUtc(date, timezone, switzerlandTimeZone);
Console.WriteLine("Date 3: " + date3.ToString() + " - " + date3.IsDaylightSavingTime() + " " + timezone.IsAmbiguousTime(date3)); 
```

它的输出看起来像这样（至少在我的机器上）：

```
Date 1: 4/20/1969 2:20:00 AM - False
Date 2: 4/20/1969 4:20:00 AM - True - False
Date 3: 4/20/1969 3:20:00 AM - True - False 
```

如您所见， IsDaylightSavingsTime 在 上为 True `DateTime`，但`TimeZoneInfo`正确转换了我们的时间。尝试其他一些组合看起来也不错。您还可以在它认为您拥有的 CEST 和瑞士之间进行转换`TimeZoneInfo.CovertTime()`。

# c++ - 在 VC++ 2010 中传入 const 向量

> ID：10247657
> 
> 赞同：0
> 
> 时间：2012-04-20T13:52:58.487
> 
> 标签：c++, visual-studio-2010, visual-c++

我有一个使用 3rd 方库的项目，该库创建了一个需要传入以下参数的方法： `const std::vector< const Image *>` 当尝试创建一个`std::vector< Image * >`允许灵活地将项目生成到向量中的方法时，我无法将此类型传递给该方法。我假设 VC++ 2010 会通过参数类型显示该方法的意图，但它似乎需要该参数类型声明才能将其传递。这是我最终使用的编译：

```
const Image *SRImages1 = &SRImages[0];
const Image *SRImages2 = &SRImages[1];
const std::vector< const Image *> SRImageVector(&SRImages1, &SRImages2);

tungsten::vision::SuperResolution::ResultEnum r = SR.enhance( &resultImage, SRImageVector, referenceImageIndex, referenceImageROI, interlaced, asynchronous, listener); 
```

当然，这是非常严格的，我希望能够通过使用 push_back 运算符将项目动态生成到向量中。

为什么 MS VC++ 需要这个，我如何在这些限制内工作以创建我可以操作的向量？

**编辑：**从 OP 的评论中复制：

这是 .h 文件中的签名：

```
ResultEnum enhance( Image *result,
                    const std::vector<const Image*> &images,
                    unsigned int referenceImageIndex,
                    Rectangle referenceImageROI,
                    bool interlaced,
                    bool asynchronous,
                    SuperResolutionListener *listener ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T20:16:09.623

从您的评论来看，实际参数似乎是

```
const std::vector< const Image *>& 
```

换句话说，它采用了`vector`by const 引用。这意味着您可以简单地使用 构造一个非常量向量`push_back`，并将其传递给`enhance`. 例如

```
const Image *SRImages1 = &SRImages[0];
const Image *SRImages2 = &SRImages[1];
std::vector< const Image *> SRImageVector(&SRImages1, &SRImages2);  // Iteration constructor.
SRImageVector.push_pack(new Image);  // Example only - beware memory leak

tungsten::vision::SuperResolution::ResultEnum r = SR.enhance( &resultImage,
                                                              SRImageVector,
                                                              referenceImageIndex,
                                                              referenceImageROI,
                                                              interlaced,
                                                              asynchronous,
                                                              listener ); 
```

# android - 为什么后台堆栈中的零片段

> ID：10247664
> 
> 赞同：7
> 
> 时间：2012-04-20T13:53:19.907
> 
> 标签：android, android-layout, android-intent, android-emulator, android-fragments

我的简单**布局**只有一个片段占位符：

```
<FrameLayout
   android:id="@+id/fragment_placeholder"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
  /> 
```

我首先向这个占位符添加**第一个片段：**

```
fragmentTransaction.add(R.id.fragment_placeholder, firstFragment, "first"); //I did not put to backstack 
```

我有一个**第二个片段**，它替换了上面的片段**并将其放回堆栈**：

```
FragmentManager fragMgr = getSupportFragmentManager();
FragmentTransaction fragTrans = fragMgr.beginTransaction();

//initialize an fragment instance
Fragment secondFragment = initSecondFragment(); 

//replace with the fragment 
fragTrans.replace(R.id.fragment_placeholder, secondFragment, "second");

//Add transaction to back stack
fragTrans.addToBackStack(null);

//commit the transaction
fragTrans.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
fragTrans.commit();  

//The following log returns me 0 when counting the number of fragments in back stack, why?  
Log.v("nr of fragment in back stack", fragMgr.getBackStackEntryCount()+""); 
```

但我最终在后堆栈中有**0**个片段，为什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-01T21:14:08.193

在 Log 之前尝试 executePendingTransactions() 以确保它发生提交。像这样：

```
fragMgr.executePendingTransactions();
Log.v("nr of fragment in back stack", fragMgr.getBackStackEntryCount()+""); 
```

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T20:45:40.013

I'm not sure in answer ... May be need wait that fragment was added ? Try to get count by this

```
 new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                Log.v("nr of fragment in back stack", fragMgr.getBackStackEntryCount()+"");  
            }
        },50); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-06T18:07:51.420

第一个片段试试这个

```
fragmentTransaction.addToBackStack(null).add(R.id.fragment_placeholder, firstFragment, "first"); 
```

这是第二个片段

```
fragmentTransaction.addToBackStack(null).replace(R.id.fragment_placeholder, secondFragment, "second"); 
```

# c# - 通过 Internet 问题设置 TCP/IP 连接

> ID：10247666
> 
> 赞同：1
> 
> 时间：2012-04-20T13:53:26.040
> 
> 标签：c#, tcp, tcpclient

嗨，我正在尝试将我的聊天客户端连接到我的服务器，但我不断收到错误消息。我有聊天服务器，它运行在一台在互联网上发布的机器上，它有固定的 IP 地址，并且在端口 5001 上运行。当我的聊天客户端尝试连接到该服务器时，我得到了错误。引发错误的行如下

```
 ipAddr = IPAddress.Parse(txtIp.Text);
    // Start a new TCP connections to the chat server
    tcpServer = new TcpClient();
    tcpServer.Connect(ipAddr, 5001); 
```

当我在本地机器上使用本地机器 IP 运行聊天客户端和服务器时，它可以工作。请告诉我我需要更改代码，因为我的聊天服务器和客户端都可以通过互联网进行通信。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:12:26.933

如果首先通过某些计算机网络，固定 IP 可能还不够。如果它是简单的网络，您可能需要转发端口，或者如果它更复杂，可能它有自己的直接线路但关闭了端口，因此您必须通过系统内的防火墙以及可以过滤流量的可能硬件打开它们。

它可能根本不是代码问题。

同样，当您创建服务器套接字时，请尝试将其绑定到 IPAddress.Any，因为如果您将其绑定到特定设备，它也可能是问题的根源。

# c - 如果我无法获得“Content-Length”，如何使用多线程下载

> ID：10247669
> 
> 赞同：4
> 
> 时间：2012-04-20T13:53:47.413
> 
> 标签：c, http, networking

我了解到，如果我将`Range: bytes=n-m`标头发送到 HTTP 服务器，我可以下载文件的一部分。

这是否意味着只有在我知道确切的文件长度时才能使用多个线程进行下载？我感到困惑的是，如果我无法`Content-Length`事先获得，我该如何编写多线程程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:07:09.523

仅当对该文件的完整`Range`请求的响应（如果您只想检查标头，可以是 HEAD）返回一个`Accept-Ranges`响应标头的值`bytes`和一个`Content-Range`或`Content-Length`标头都包含有关内容长度的信息（和`ETag`/或`Last-Modified`以便文件可以被唯一标识）。

如果根本没有`Accept-Ranges`响应头，那么你就迷路了。这意味着服务器根本不支持它。

# iphone - 如何使用 UISearchBar 过滤 AQGridView 中的单元格

> ID：10247673
> 
> 赞同：1
> 
> 时间：2012-04-20T13:54:09.720
> 
> 标签：iphone, ios, xcode, uisearchbar, aqgridview

我在这个问题上快疯了：我正在使用 AQGridView 显示我从 SQLite 检索的数组中的一些图像，但我无法使用我放入 Detail 区域的 TitleView 的 UISearchBar 过滤网格一个拆分视图控制器。你能帮我一些逻辑段落或一个例子吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:31:37.283

解决了！

删除所有对象后重新计算数组_icons..

```
 [_icons removeAllObjects];

    searching = YES;

    NSInteger numeroElem = [subcatList getSize];

    for ( NSUInteger i = 0; i < numeroElem; i++ )
    {

    NSDictionary *itemAtIndex = (NSDictionary *)[subcatList objectAtIndex:i];
    NSString *titolo_cat = [itemAtIndex objectForKey:@"titolo"];

    NSComparisonResult result = [titolo_cat compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
    if (result == NSOrderedSame)
    {
     ETC ETC.......
     [_icons addObject: image];
    }

    }; 
```

# ios - IOS。显示带有日期的特殊字符“th”和“gmt”

> ID：10247675
> 
> 赞同：0
> 
> 时间：2012-04-20T13:54:23.330
> 
> 标签：ios, uilabel, nsdateformatter, date-formatting

我想以以下格式显示日期“DDth HH:MM:SS gmt”，但“th”和“gmt”应该更小。我怎么能做到这一点？有特殊的 unicode 字符吗？是否可以在一个 UILabel 中显示它？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:17:38.947

不可能同时使用具有不同字体的相同 UILabel。使用三个不同的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T13:33:36.033

如果您在 iOS6 或更高版本上，您应该能够使用 UILabel 的属性文本属性来设置不同的字体/颜色/大小属性以进行显示。见这里[https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/index.html#//apple_ref/occ/instp/UILabel/attributedText](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/index.html#//apple_ref/occ/instp/UILabel/attributedText)

# python - WxPython：子窗口中的多个小部件

> ID：10247678
> 
> 赞同：1
> 
> 时间：2012-04-20T13:54:31.690
> 
> 标签：python, loops, widget, wxpython, wxwidgets

我正在自学（Wx）Python并被卡住了。我想创建一个子窗口，它在我的 TestFrame 中包含一组重复出现的信息，其中包含我的大部分代码。问题是，它只在我的代码中显示一个小部件。我正在尝试按照对我来说重要的顺序来弄清楚以下内容。

**请注意，此代码是[此](https://stackoverflow.com/questions/8263513/show-another-window-wxpython)页面的扩展。*

1.  如何允许“AddBox”类中的多个小部件正确显示？
2.  当我的窗口被调整大小时，它会破坏按钮图像，就像附加的屏幕一样。我该如何解决这个问题？
3.  你如何调用/绑定这些动态创建的小部件？
4.  奖励：这里需要“OnSize”模块吗？

感谢您的帮助。如果允许/适当，如果您 PM 我，我愿意通过 Paypal 向获胜者捐款 5 美元。

```
import wx

class AddBox(wx.Window):
    def __init__(self, parent):
        wx.Window.__init__(self, parent)        

        pbox = wx.BoxSizer(wx.VERTICAL)

        controlback = wx.Button(self, label="Back")
        controlforward = wx.Button(self, label="Forward")

        pbox.AddMany([(controlback, 1, wx.ALL), (controlforward, 1, wx.ALL)])

class TestFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, -1, size=(1000, 550))

        self.Bind(wx.EVT_SIZE, self.OnSize)

        pbox0 = wx.BoxSizer(wx.VERTICAL)
        controlback0 = wx.Button(self, label="Back0")
        controlforward0 = wx.Button(self, label="Forward0")
        pbox0.AddMany([(controlback0, 1, wx.ALL), (controlforward0, 1, wx.ALL)])
        pbox2 = wx.BoxSizer(wx.VERTICAL)

        self.scrolling_window = wx.ScrolledWindow( self )
        self.scrolling_window.SetScrollRate(1,6)
        self.scrolling_window.EnableScrolling(True,True)
        self.sizer_container = wx.BoxSizer( wx.VERTICAL )
        self.sizer = wx.BoxSizer( wx.VERTICAL )
        self.sizer_container.Add(self.sizer,1,wx.CENTER,wx.EXPAND)
        self.child_windows = []
        for i in range(0,8):
            wind = AddBox(self.scrolling_window)
            self.sizer.Add(wind, 0, wx.CENTER|wx.ALL, 5)
            self.child_windows.append(wind)

        self.scrolling_window.SetSizer(self.sizer_container)
        #self.Layout() #not needed?

        pbox2.AddMany([(self.sizer_container, 1, wx.ALL)])

    def OnSize(self, event):
        self.scrolling_window.SetSize(self.GetClientSize())

if __name__=='__main__':
    app = wx.PySimpleApp()
    f = TestFrame()
    f.Show()
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:35:37.107

这里的代码非常复杂且难以理解。你几乎从不需要使用 wx.Window。事实上，在使用 wxPython 将近 6 年的时间里，我从未直接使用过它。PySimpleApp 也已被弃用。无论如何，我清理了一堆代码并在下面重新做了。我不确定这是否是您正在寻找的东西。另请注意，我将 ScrolledWindow 换成了 ScrolledPanel，因为我认为后者更易于使用：

```
import wx
import  wx.lib.scrolledpanel as scrolled

class TestFrame(wx.Frame):
    def __init__(self):
        wx.Frame.__init__(self, None, size=(1000, 550))
        panel = wx.Panel(self)

        mainSizer = wx.BoxSizer(wx.VERTICAL)
        pbox0 = wx.BoxSizer(wx.VERTICAL)
        controlback0 = wx.Button(panel, label="Back0")
        controlforward0 = wx.Button(panel, label="Forward0")
        pbox0.Add(controlback0, 0, wx.ALL)
        pbox0.Add(controlforward0, 0, wx.ALL)
        mainSizer.Add(pbox0)

        self.scrolling_window = scrolled.ScrolledPanel( panel )
        self.scrolling_window.SetAutoLayout(1)
        self.scrolling_window.SetupScrolling()
        self.sizer = wx.BoxSizer( wx.VERTICAL )
        self.child_windows = []
        for i in range(0,8):
            wind = self.addBox()
            self.sizer.Add(wind, 0, wx.CENTER|wx.ALL, 5)
        self.scrolling_window.SetSizer(self.sizer)

        mainSizer.Add(self.scrolling_window, 1, wx.EXPAND)
        panel.SetSizer(mainSizer)

    def addBox(self):
        pbox = wx.BoxSizer(wx.VERTICAL)

        controlback = wx.Button(self.scrolling_window, label="Back")
        controlforward = wx.Button(self.scrolling_window, label="Forward")

        pbox.AddMany([(controlback, 0, wx.ALL), (controlforward, 0, wx.ALL)])
        return pbox

    def OnSize(self, event):
        self.scrolling_window.SetSize(self.GetClientSize())

if __name__=='__main__':
    app = wx.App(False)
    f = TestFrame()
    f.Show()
    app.MainLoop() 
```

您还应该看看小部件检查工具。它将帮助您找出这样的布局问题：[http ://wiki.wxpython.org/Widget%20Inspection%20Tool](http://wiki.wxpython.org/Widget%20Inspection%20Tool)

编辑：我认为上面的代码处理项目＃1和2。对于＃3，请参阅我去年写的以下文章：http: [//www.blog.pythonlibrary.org/2011/09/20/wxpython-binding -多个小部件到相同的处理程序/](http://www.blog.pythonlibrary.org/2011/09/20/wxpython-binding-multiple-widgets-to-the-same-handler/)

基本上，您在循环本身中绑定，然后在事件处理程序中，您可以使用 event.GetEventObject() 返回调用小部件并设置其值或其他内容。至于你的第四个问题，我会说不，你不需要 OnSize 方法。你几乎不需要在 wxPython 中覆盖它，我的示例代码中当然也不需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:38:19.227

我现在只有 3 个答案：为每个动态创建的小部件分配一个 ID，将此 ID 存储在字典中 ({id : widget }) 并作为回调函数传递一个 lambda 函数或使用 functools.partial 传递“真实”回调的 ID。（当然你可以通过 lambda 函数直接传递小部件，但我喜欢在某处为创建的小部件提供实例，如果我需要在某个时候访问这些）

```
 def __init__(...):
    self.event_dispatch = dict()

    ...

    for id in xrange(500, 508):
        wind = AddBox(self.scrolling_window, id)
        ...
        self.event_dispatch[id] = wind
        self.scrolling_window.Bind(wx.MY_EVENT, lambda evt: self.on_event(evt, id), id=id)

def on_event(event, id):
    widget = self.event_dispatch[id]
    # do something with widget 
```

# xcode - 将资源文件添加到 xcode

> ID：10247680
> 
> 赞同：62
> 
> 时间：2012-04-20T13:54:41.807
> 
> 标签：xcode, resources

我正在尝试将一些新的资源文件添加到另一个人在另一台 Mac 上构建的项目中。我认为该项目有前人的规定。

使用右键单击->将文件添加到“MyProject”不会提供预期的结果。编译项目后，添加的文件在应用程序中不可见。

如何在我的项目中添加新资源？

PS：我正在尝试`Objective-C`在`macincloud.com`帐户中学习。

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-04-25T13:04:21.080

可能是您添加的文件未添加到项目构建中。单击您的`project`>> 并检查文件是否存在`App target`（如果需要编译），否则检查. 如果该文件在那里不存在，请将其拖到那里，它应该没问题，（根据我对您的问题的理解）。`Build Phases``Compile sources``Copy bundle resources`

**编辑**

您还可以通过单击文件并打开“文件检查器”（`View`> `Utilities`>`Show File Inspector`或`⌥</kbd> + `⌘</kbd> + `1`), and check the `Target Membership` section.``

例子：
[![例子](../Images/db6331ed91a78305599b85ab93e49e35.png)](https://i.stack.imgur.com/T82hz.png)

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-09-24T09:26:08.913

添加到`Copy bundle resources`为我工作

[![在此处输入图像描述](../Images/4b30629d829dda6835ad1f2139339ba7.png)](https://i.stack.imgur.com/tD3s8.png)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-12-10T10:14:14.190

只需将资源文件（从查找器窗口）拖到您的项目文件区域（左侧）并放入支持文件。

一旦你放下，一个对话框会提示你添加它的目标。选择所有合适的。而已。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-29T12:40:46.260

刚刚对 Xcode 版本 11.7 (11E801a) 有过类似的体验，我提到它可能会帮助其他人避免浪费一天半的时间。

除了解释如何添加资源的其他答案：

对我来说，问题是我的资源列在`Developer Assets`目标的常规选项卡下，但也列在`Build Phases/Copy Bundle Resources`. 这在模拟器甚至设备上通过 Xcode 运行良好，但是当我来到**存档**应用程序时，资源并没有被复制。从列表中删除我的资源`Developer Assets`，但保持它们`Build Phases`正常工作。

最后事实证明，我只需要该`Build Phases`部分中的资源来运行 XCode 或 Archiving ！

# javascript - FusionCharts 3.2.1 - 在很长一段时间内更大的步长/规模

> ID：10247682
> 
> 赞同：0
> 
> 时间：2012-04-20T13:54:46.533
> 
> 标签：javascript, fusioncharts

我通过调用`new FusionCharts()`具有必要属性的融合图表构造函数（）来创建图表。在小周期（1,2 个月）内一切正常......但是当我增加周期时：1,2 年，水平天数出现在其他天数之上。

有没有办法在很长一段时间内增加/参数化规模？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:32:55.923

默认情况下，图表会自动尝试管理重叠标签。但是，在 3.2.2 版本（命名为 FusionCharts XT）中，应用了更好的自动标签管理。您可以尝试更新/升级并检查新版本。

此外，你能指定你正在使用的图表类型吗？

# facebook - Facebook 在小部件中分享

> ID：10247685
> 
> 赞同：1
> 
> 时间：2012-04-20T13:55:04.427
> 
> 标签：facebook, facebook-like, facebook-apps, facebook-social-plugins, facebook-sharer

我已经读过 Facebook 共享器已被弃用，所以我想知道如何通过 js SDK（最好）在我的小部件中创建一个可以在任何域（不仅仅是应用程序域）中工作的共享按钮。

例如：
我在 myserver.com 上注册了我的应用程序
并且有人在 hisservers.com 上下载了我的小部件，我希望共享从那里工作并发布到他的墙上。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:02:48.700

您可以使用 FB.ui [Feed 对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)提示用户在他们的 Feed 上发布故事，并在函数中指定您的链接。像这样

```
function postLink() {
    var obj = {
      method: 'feed',
      link: 'http://myserver.com',
      picture: 'a_picture',
      name: 'My Server',
      description: 'Sharing MyServer from HisServer.'
    };

    function callback(response) {
      console.log(response['post_id']);
    }

    FB.ui(obj, callback);
  } 
```

当然，您还必须包含 JS SDK 的[正确初始化](https://developers.facebook.com/docs/reference/javascript/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:43:17.607

```
function postLink() {
    var obj = {
      method: 'feed',
      link: 'http://myserver.com',
      picture: 'a_picture',
      name: 'My Server',
      description: 'Sharing MyServer from HisServer.'
    };

    function callback(response) {
      console.log(response['post_id']);
    }

    FB.ui(obj, callback);
  } 
```

# linux - udev/Bash 脚本来获取 USB 信息

> ID：10247686
> 
> 赞同：0
> 
> 时间：2012-04-20T13:55:06.753
> 
> 标签：linux, bash, udev

我编写了一个 udev 规则，该规则在附加/移除 USB 驱动器时调用脚本以发送电子邮件。到目前为止它工作正常。以下是我的 udev 规则和发送电子邮件脚本：

```
SUBSYSTEM=="usb", ACTION=="add", RUN+="/u/usb_added %b"
SUBSYSTEM=="usb", ACTION=="remove", RUN+="/u/usb_removed %b" 
```

但在 sendemail 脚本中，我还想包含 USB 驱动器的详细信息（USB 大小、标签、安装位置和附件时间）。但我不知道如何获得这些信息。任何人都可以从 udev 帮助我或在 bash 中编写脚本来读取日志/消息并获取此信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T06:12:08.630

您可以使用 udevmonitor 工具获取 uevent 发出的环境变量。从这些信息中，您可以在 /sys/ 下找到块设备的位置并获取更多信息。您也可以使用 blkid 工具获取 uevent 导出的 DEVNAME 信息。

# javascript - 展平嵌套回调

> ID：10247697
> 
> 赞同：4
> 
> 时间：2012-04-20T13:55:45.347
> 
> 标签：javascript, node.js, mongodb, callback

在学习使用 Node.js 中的回调风格编程时，我遇到了令人沮丧的问题。我有一个对 MongoDB 数据库的查询。如果我传入一个函数来执行结果，它可以工作，但我宁愿将它展平并让它返回值。感谢您提供有关如何正确执行此操作的任何帮助或指导。这是我的代码：

```
var getLots = function(response){
    db.open(function(err, db){
        db.collection('lots', function(err, collection){
            collection.find(function(err, cursor){
                cursor.toArray(function(err, items){
                    response(items);
                })
            })
        })
    })
} 
```

我想要更像这样的东西：

```
lots = function(){
    console.log("Getting lots")
    return db.open(openCollection(err, db));
}

openCollection = function(err, db){
    console.log("Connected to lots");
    return (db.collection('lots',findLots(err, collection))
    );
}

findLots = function(err, collection){
    console.log("querying 2");
    return collection.find(getLots(err, cursor));
}

getLots = function(err, cursor) {
    console.log("Getting lots");
    return cursor.toArray();
} 
```

最后一组数据将通过函数调用恢复。

问题是我从 Node.js 收到一个错误，说未定义 err 或未定义集合。出于某种原因，当我嵌套回调时，正确的对象被传递下来。当我尝试采用这种扁平化风格时，它抱怨事情没有定义。我不知道如何让它传递必要的对象。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:46:49.503

您需要的是通过 npm 可用于 node 并在 Node.js wiki 上编目的众多[控制流库之一。](https://github.com/joyent/node/wiki/modules#wiki-async-flow)我的具体建议是[caolan/async](https://github.com/caolan/async)，您将使用该`async.waterfall`函数来完成这种类型的流程，其中每个异步操作都必须按顺序执行，并且每个操作都需要前一个操作的结果。

伪代码示例：

```
function getLots(db, callback) {
   db.collection("lots", callback);
}

function findLots(collection, callback) {
    collection.find(callback);
}

function toArray(cursor, callback) {
    cursor.toArray(callback);
}

async.waterfall([db.open, getLots, find, toArray], function (err, items) {
    //items is the array of results
    //Do whatever you need here
    response(items);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:31:52.690

async 是一个很好的流控制库。[Frame.js](https://github.com/bishopZ/Frame.js)提供了一些特定的优势，例如更好的调试和更好的同步函数执行安排。（虽然它目前不像 async 那样在 npm 中）

这是 Frame 中的样子：

```
Frame(function(next){
    db.open(next);
});
Frame(function(next, err, db){
    db.collection('lots', next);
});
Frame(function(next, err, collection){
    collection.find(next);
});
Frame(function(next, err, cursor){
    cursor.toArray(next);
});
Frame(function(next, err, items){
    response(items);
    next();
});
Frame.init(); 
```

# javascript - 如何检查对象是否未定义/为空

> ID：10247700
> 
> 赞同：2
> 
> 时间：2012-04-20T13:55:51.303
> 
> 标签：javascript, jquery, ajax, scope

这个问题已经出现了很多，但我不能让它工作。

我有 5 个 div，我想在最后一个使用的 div 之前隐藏 div。因此，如果用户单击 div 1 中的某处，然后单击 div 2 中的某处，则 div 1 淡出（所有这一切都在 Ajax 调用之后）

这是我的代码：

```
$(document).ready(function() {
    $("#[id^='r_form_']").bind("ajax:success", function(evt, data, status, xhr) {
        var $form = $(this);

        $(this).parent().css("background", "green");

        if($lastForm == null) {
            var $lastForm = $(this);
        };

        if(!($lastForm[0] == $form[0])) {
            $lastForm.parent().fadeOut(1500);
            var $lastForm = $(this);
        };
    });
}); 
```

如果变量`$lastForm`未定义，则分配发生 Ajax 的当前表单。

变量始终未定义。我`alert('undefined')`在循环中添加了一个，我总是得到它。为什么？

我有一种感觉，这可能是因为当 Ajax 请求返回时变量被重置。但我不是真正的专家，似乎无法找到答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:00:04.090

我认为这是因为它是在内部范围内声明的。将声明移到函数外部。每个函数都会创建一个新范围，因此它不会保存到下一次调用：

**代码：**

```
$(document).ready(function() {

    var $lastForm; //<===================
    $("#[id^='r_form_']").bind("ajax:success", function(evt, data, status, xhr) {
        var $form = $(this);

        $(this).parent().css("background", "green");

        if ($lastForm == null) {
            $lastForm = $(this);
        };

        if (!($lastForm[0] == $form[0])) {
            $lastForm.parent().fadeOut(1500);
            $lastForm = $(this);
        };
    });
});​ 
```

正如@minitech 评论的那样`#`，选择器中的：`#[id^='r_form_']`看起来它不应该在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T13:57:13.787

```
if(typeof e === 'undefined') {
    // your code here
} 
```

# java - java.lang.ClassCastException: org.jboss.jca.adapters.jdbc.jdk6.WrappedConnectionJDK6 无法转换

> ID：10247702
> 
> 赞同：6
> 
> 时间：2012-04-20T13:55:59.347
> 
> 标签：java, jboss, oracle11g, spatial, jdk1.6

应用程序版本：**JBoss 7.0.0、Oracle 11g (ojdbc6.jar) 和 JDK 6 版本**

当我尝试使用`CLOB.createTemporary`函数插入 CLOB 数据类型的值时遇到问题，出现以下异常。

```
java.lang.ClassCastException: org.jboss.jca.adapters.jdbc.jdk6.WrappedConnectionJDK6 cannot be cast to oracle.jdbc.OracleConnection
```

在多个论坛搜索后，没有找到任何解决方案。 [https://forums.oracle.com/forums/thread.jspa?threadID=279238](https://forums.oracle.com/forums/thread.jspa?threadID=279238)

部署 WAR 文件和配置 JBoss oracle 驱动程序池配置所需的基本步骤已完成。但是，仍然无法解决这个问题。

请提供解决此问题的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T09:50:19.043

我已经用下面的方法解决了我的问题。

**摘要：**类加载器不应该从服务器 lib/modules 和 web 存档（WAR 文件）中加载 Oracle 驱动程序。仅将 oracle 驱动程序保存在服务器库（JBoss 7 版本）中。

**JBoss 7：**

*   创建了一个新的 JBoss 部署描述符文件（jboss-deployment-structure.xml）

    1.  更新了jboss部署结构文件中的（ironjacamar-jdbc-1.0.3.Final.jar）iron模块
    2.  在 JBoss 7 结构中创建了 ojdbc6.jar 作为模块 更新了 jboss 部署结构文件中的 objbc 模块
    3.  例子：

        ```
        <jboss-deployment-structure> 
            <deployment>
                <dependencies>
                    <module name="org.jboss.ironjacamar.jdbcadapters" slot="main"/>
                    <module name="com.oracle.ojdbc6" slot="main"/>
                </dependencies>
            </deployment> 
        </jboss-deployment-structure> 
        ```

**Web 模块：** - 从 Web 存档（WAR 文件）中删除了 ojdbc6.jar 文件

如果您在解决过程中发现任何问题，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:08:10.427

这里发生的是 JBoss 用它自己的连接 (org.jboss.jca.adapters.jdbc.jdk6.WrappedConnectionJDK6) 包装了 oracle 连接 (oracle.jdbc.OracleConnection)。您必须调用 #getUnderlyingConnection() 来获取底层连接。

```
WrappedConnection wrapped = (WrappedConnection) conn;
CLOB clob = CLOB.createTemporary(wrapped.getUnderlyingConnection(), true, CLOB.DURATION_SESSION); 
```

但是，我问自己以下是否在您的情况下也不起作用。

```
ps.setClob(4, new StringReader(data)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T14:23:34.830

在带有 Jruby 1.7.2、JBoss 7.1 和 Oracle（oracle_enhanced 适配器）的 Rails 应用程序中遇到了类似的问题

```
Java::JavaLang::ClassCastException: oracle.jdbc.driver.T4CConnection cannot be cast to oracle.jdbc.OracleConnection 
```

这个解决方案对我有用。

我将 jboss-deployment-structure.xml 放在 rails 应用程序的 config/ 目录中，并更新了 warbler 配置以将文件包含在 war 文件中：

```
config.webinf_files += FileList["config/jboss-deployment-structure.xml"] 
```

部署后一切正常......谢谢很多。

# c# - 如何使用 Linq to Entities 对查询进行分区并仅加载几个属性？

> ID：10247709
> 
> 赞同：0
> 
> 时间：2012-04-20T13:56:20.277
> 
> 标签：c#, linq, linq-to-entities

我有以下 POCO：

```
public Ticket
{
    public int Id { get; set; }
    public int IdOwner { get; set; }
    public int IdDependency { get; set; }
    public string SerialNumber { get; set; }

    public Owner Owner { get; set; } 
    public Dependency Dependency { get; set; }
}

public Owner 
{
    public int Id { get; set; }
    public string Name { get; set; }
    // Other attributes
}

public Dependency 
{
    public int Id { get; set; }
    public string Name { get; set; }
    // Other attributes
} 
```

我想退回一张`List`只有`Owner Name`和的门票`Dependency Name`。问题是，我会写一个`where`if`Owner`在我的过滤器中我通过`OwnerId`, 和相同的`Dependency`. 查看我的过滤器：

```
public List<Ticket> SelectTickets(string SerialNumber, int IdOwner, int IdDependency)
{
    IQueryble<Ticket> query = context.Tickets.Where(t => t.SerialNumber == SerialNumber);

    if (IdOwner != 0)
    {
        query = query.Where( ?? );
    }

    if (IdDependency!= 0)
    {
        query = query.Where( ?? );
    }

    return query.ToList();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:08:42.007

这将是有道理的，如果我明白你的意思。

```
 public Ticket
        {
            public int Id { get; set; }
            public int OwnerId{ get; set; }
            public int DependencyId { get; set; }
            public string SerialNumber { get; set; }

            public Owner Owner { get; set; } 
            public Dependency Dependency { get; set; }
        }

        public Owner 
        {
            public int Id { get; set; }
            public string Name { get; set; }
            public List<Ticket> Tickets {get;set;}
        }

        public Dependency 
        {
            public int Id { get; set; }
            public string Name { get; set; }
            public List<Ticket> Tickets {get;set;}
        }
        public List<Ticket> SelectTickets(string serialNumber, int ownerId, int dependencyId)
        {
            return context.Tickets.Where(t => t.SerialNumber == serialNumber && t.OwnerId == ownerId && t.DependencyId == dependencyId).ToList();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:09:01.310

使用选择语句。

```
query = query.Select(t => new Ticket { 
    Owner = new Owner {Name = t.Owner.Name}, 
    Dependency = new Dependency  {Name = t.Dependency.Name}
}); 
return query.ToList(); 
```

但是，在这种情况下，您似乎不想返回 Ticket 而是返回一些其他对象，例如 TicketSummary

```
public class TicketSummary {
    public OwnerName {get;set;}
    public DependencyName {get;set;}
} 
```

那么你会有

```
query = query.Select(t => new TicketSummary { 
    OwnerName = t.Owner.Name, 
    DependencyName = t.Dependency.Name
}); 
return query.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:11:15.357

您可以在过滤后将生成的查询投影为您喜欢的任何格式。

用这个替换return语句对你有用还是你有更复杂的要求我不完全理解？

```
return query.Select(t => new Ticket() {
    Owner = t.Owner,
    Dependency = t.Dependency;
}.ToList(); 
```

# javascript - 带参数的 JQuery 回调 - 新手

> ID：10247710
> 
> 赞同：3
> 
> 时间：2012-04-20T13:56:36.097
> 
> 标签：javascript, jquery

[因此，在jQuery 基本页面](http://docs.jquery.com/How_jQuery_Works)的底部附近，它给出了这个例子，注意匿名是如何`function()`没有参数的。引用 JQuery 页面说

> 匿名函数只做一件事：调用 myCallBack，param1 和 param2 的值在外部范围内。

```
$.get('myhtmlpage.html', function(){
  myCallBack(param1, param2);
}); 
```

所以，我根据[这个例子试了一下](http://www.w3schools.com/jquery/tryit.asp?filename=tryjquery_ajax_get)

我的代码是这样的，类似的东西，在第 10 行，我有一个 anonymous `function(result)`，但我需要添加参数“结果”不能`function()`像 JQuery 网站建议的那样，否则它将不起作用：

```
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                var GetResults = function (result) {
                        $("div").html(result);
                    }
                $("button").click(function () {
                    $.get("demo_ajax_load.txt", function (result) {
                        GetResults(result);
                    });
                });
            });
        </script>
    </head>
    <body>
        <div>
            <h2>Let AJAX change this text</h2>
        </div>
        <button>Change Content</button>
    </body>
</html> 
```

我的问题是，为什么 JQuery 页面说它可以在`function()`没有参数的情况下工作？我必须添加`function(result)`才能使其工作？我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:01:28.753

关键在于您发布的链接的解释：

> 匿名函数只做一件事：调用 myCallBack，param1 和 param2 的值在外部范围内

这基本上是说`param1`and`param2`变量是先前定义的（外部范围）：

```
$("button").click(function () {
    var param1 = "something";
    var param2 = "something else";
    $.get('myhtmlpage.html', function(){
       myCallBack(param1, param2); // this uses the previously declared variables
    });
}); 
```

例如，在 JavaScript 中，当您调用函数时`myfunc("some text")`，可以将实际函数定义为，`function myfunc(var1) {`或者`function myfunc() {`第一个示例只是正式声明第一个参数的变量名...

```
​function myfunc() {
    alert(arguments[0]);
}

myfunc("some text");​​​​​​​​​​ 
```

未正式声明的参数 ar 可使用`arguments`数组 ...[请参阅 MDN 上的此文档](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:00:37.280

您需要已经定义了变量才能在这样的闭包中使用它们。由于该`get`函数将结果放入匿名函数的第一个参数中，`result`因此如果您想对它做任何事情，您需要将结果放在那里以捕获它。

试试这个：`result`再次删除参数，并`result="Hello World";`在代码开头添加。

# objective-c - RaptureXML 奇怪的行为

> ID：10247713
> 
> 赞同：1
> 
> 时间：2012-04-20T13:56:48.157
> 
> 标签：objective-c, ios, xml, xcode

我收到一个错误（它没有显示，只是从应用程序中崩溃，控制台上没有信息），每当我从 RXML 的 rootXML 调用 Iterate 方法时似乎就会发生这种情况：

```
-(void)valueSearch {
    //FIRST CONNECTION
    NSString *serverAddress = @"http://www.commix.com.br/clientes/grupoglobo/apple/valor.xml";
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:serverAddress] 
                                                       cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                   timeoutInterval:10];
NSError *requestError;
    NSURLResponse *urlResponse = nil;

    response = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&requestError];

    //SECOND CONNECTION - Just an encapsulated form of the first, since i use it in other parts
    // of the code
    response = [self requestWithParameters:@"valor.xml"];

    //i just uncommented both. but actually only one (connection) runs.

    //Creation of the rooXML so i can grab the info i need
    RXMLElement *rootXML = [RXMLElement elementFromXMLData:response];
    //This array is where i'll keep the info from the files.
    //it`s deallocated at the end in dealloc
    searchResult = [[NSMutableArray alloc] init];

    //This is the culprit. Atleast it seems so, since putting NSLog before and after
    //revealed so.
    [rootXML iterate:@"valor" usingBlock: ^(RXMLElement *valor) {
        NSLog(@"valor: %@", [valor child:@"nome"].text);
        [searchResult addObject:[valor child:@"nome"].text];
    }];
} 
```

问题是，当我评论`requestWithParameters`并使用正常的非封装样式（//FIRST CONNECTION）时，我没有收到错误。但是如果我使用第二个，当程序到达时`[rootXML iterate: [...]]`它会在没有警告的情况下崩溃。

使用 RaptureXML：[https ://github.com/ZaBlanc/RaptureXML](https://github.com/ZaBlanc/RaptureXML)

它也发生在代码的另一部分：

```
-(void)vehicleSearch {

    NSString *path = [[NSBundle mainBundle] pathForResource:@"idArray" ofType:@"plist"];
    NSMutableArray *idArray = [[NSMutableArray alloc] initWithContentsOfFile:path];

    NSMutableString *serverAddress = (@"http://www.commix.com.br/clientes/grupoglobo/apple/modelo.php?marc=%@",[idArray objectAtIndex:0]);
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:serverAddress] 
                                                       cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData
                                                   timeoutInterval:10];

NSError *requestError;
    NSURLResponse *urlResponse = nil;
    response = [NSURLConnection sendSynchronousRequest:request returningResponse:&urlResponse error:&requestError];

    RXMLElement *rootXML = [RXMLElement elementFromXMLData:response];
    searchResult = [[NSMutableArray alloc] init];

    [rootXML iterate:@"modelo" usingBlock: ^(RXMLElement *modelo) {
        NSLog(@"modelo: %@", [modelo child:@"nome"].text);
        [searchResult addObject:[modelo child:@"nome"].text];
    }];

    [idArray release];
} 
```

发生在同一行`[rootXML iterate:]`。

抱歉泄漏和东西，我没有经验（这就是我在这里的原因），谢谢！

编辑：实际上罪魁祸首是这条线

```
NSMutableString *serverAddress = (@"http://www.commix.com.br/clientes/grupoglobo/apple/modelo.php?marc=%@",[idArray objectAtIndex:0]); 
```

如果我直接传递参数，不带变量，它可以工作：

```
NSMutableString *serverAddress = (@"http://www.commix.com.br/clientes/grupoglobo/apple/modelo.php?marc=4"); 
```

它显示正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:03:13.063

```
response = [self requestWithParameters:@"valor.xml"]; 
```

if`response`是属性使用`self.response`，否则您将遇到内存泄漏问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T11:52:23.303

你确定这`,[idArray objectAtIndex:0]`是一个 NSString 吗？尝试使用

```
[NSString stringWithFormat:@"http://www.commix.com.br/clientes/grupoglobo/apple/modelo.php?marc=%@",[idArray objectAtIndex:0]];` 
```

甚至

```
[NSString stringWithFormat:@"http://www.commix.com.br/clientes/grupoglobo/apple/modelo.php?marc=%@",[[idArray objectAtIndex:0]stringValue]]; 
```

# java - MyClass 在两次测试之间一直被嘲笑

> ID：10247715
> 
> 赞同：7
> 
> 时间：2012-04-20T13:56:50.453
> 
> 标签：java, jmockit

我有两个测试类，MyFirstTest 和 MySecondTest。独立运行每个都可以正常工作。当我同时运行两者时（在 Eclipse 中选择包含这些文件的测试文件夹，右键单击，以 junit 运行），MySecondTest 失败，因为 MyClass 在运行它的测试时仍然被模拟。MyFirstTest 要求 MyClass 被模拟。MySecondTest 要求 MyClass 不被嘲笑。我认为tearDownMocks 是为了“模拟”课程。

```
public class MyFirstTest {
    @Before
    public void setUp() throws Exception {
        Mockit.setUpMocks(MockMyClass.class);
    }
    @After
    public void tearDown() throws Exception {
        Mockit.tearDownMocks(MockMyClass.class);
    }
    @AfterClass
    public static void tearDownAfterClass() throws Exception {
        Mockit.tearDownMocks(MockMyClass.class);
    }
    @MockClass(realClass = MyClass.class, stubs = "<clinit>")
    public static class MockMyClass {
...

public class MySecondTest { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-22T09:23:41.193

正确的方法如下所述：模拟类并将其分配给变量。然后，使用该变量，您可以销毁或清除模拟，使其不会影响任何其他测试用例。

```
MockUp<PmRequestData> mockpmreq = new MockUp<PmRequestData>() {
        @Mock
        public Map<String, KPIData> getKpiDataMap() {
            return datamap;
            }
        };
mockpmreq.tearDown(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T15:22:01.960

该`Mockit.tearDownMocks()`方法接受真正的类而不是模拟。所以，正确的代码是：

```
Mockit.tearDownMocks(MyClass.class); 
```

# php - 使用 CPanel API 从 localdomains 中删除域？

> ID：10247719
> 
> 赞同：0
> 
> 时间：2012-04-20T13:57:16.573
> 
> 标签：php, cpanel

我们正在使用 CPanel 服务器，我使用 CPanel API 开发了一个 DNS 编辑器：http: [//docs1.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/XmlApi](http://docs1.cpanel.net/twiki/bin/view/SoftwareDevelopmentKit/XmlApi)

现在我遇到的问题是，当更改安装在 CPanel 帐户上的域的 MX 记录时，该域仍将列在 /etc/localdomains 中。

有没有办法使用 cpanel API 删除该条目？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:46:13.057

域将根据 MX 记录添加到 /etc/localdomains（本地）或 /etc/remotedomains（远程），并且在修改 MX 条目时根据需要进行更新。如果您设置了远程 MX 记录，则该域名应自动从 /etc/localdomains 中删除。

# bash - 关于编写 Linux shell 脚本以安全地从终端分离程序

> ID：10247721
> 
> 赞同：10
> 
> 时间：2012-04-20T13:57:17.157
> 
> 标签：bash, shell, scripting

我正在尝试编写一个名为 的 Linux shell 脚本（最好是 bash），`detach.sh`以安全地从终端分离程序，例如：

1.  调用：`./detach.sh prog [arg1 arg2 ...]`。

2.  能够，`exec`例如。通过在你的 shell 中运行它：

    ```
    exec ./detach.sh prog [arg1 arg2 ...] 
    ```

3.  正确引用（主要是处理包含空格的参数）。

4.  丢弃输出（因为它们是不需要的）。

5.  不使用`screen`,`tmux`等（与 4 相同的原因，加上不需要额外的保姆过程）。

6.  使用（合理地）可移植的命令和程序，而不是像`start-stop-daemon`发行版那样的东西。

我想到了几种方法（`#!/bin/bash`为了简洁起见，忽略了shebang线）：

1.  `nohup`：

    ```
    nohup "$@" >& /dev/null & 
    ```

2.  `disown`：

    ```
    "$@" >& /dev/null &
    disown 
    ```

3.  `setsid`：

    ```
    setsid "$@" >& /dev/null & 
    ```

4.  使用子外壳：

    ```
    ("$@" >& /dev/null &) 
    ```

5.  `nohup`/`setsid`结合子shell：

    ```
    # Or alternatively:
    # (nohup "$@" >& /dev/null &)
    (setsid "$@" >& /dev/null &) 
    ```

`gedit`作为测试程序使用时（代入`"$@"`部分），条件1可以满足上述所有方法，但条件2可以不满足。

但是，如果将任意程序（但不是内置的 shell）附加到脚本 5，则似乎满足所有条件（至少对我`gedit`而言）。例如：

```
(setsid "$@" >& /dev/null &)
# Not just `true' because it is also a shell builtin.
/bin/true 
```

有人对上述现象的解释以及如何正确实施要求有所了解吗？

**编辑：**

对于条件 2，我的意思是程序应该与终端分离，否则照常运行。例如，对于这种情况，如果在脚本处理结束后立即退出`gedit`，则条件失败。`gedit`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-30T08:08:49.047

经过仔细调查，这些以前未被注意到的事实被揭露：

1.  如果将 a附加到脚本，则脚本 3 和 5（`setsid`仅限变体）都将满足所有条件。`/bin/true`

2.  这些脚本，如实际上 1 所修改，如果 `/bin/true`替换为`for i in {0..9999}; do :; done`.

因此我们可以得出结论：

*   （根据事实 1）

    不需要多级分离（如脚本 5 中所示），关键是使用正确的实用程序 ( `setsid`)。

*   （根据事实 2）

    bash 退出之前的适当延迟对于脚本的成功是必要的。（调用外部程序`/bin/true`会消耗一些时间，就像纯 bash 时间消费者一样`for i in {0..9999}; do :; done`。）

    我没有查看源代码，但我想一个可能的解释是`setsid`，如果没有应用适当的延迟，bash 可能会在完成配置要运行的程序的执行环境之前退出。

最后，最佳解决方案应该是

```
#!/bin/bash
setsid "$@" >& /dev/null &
sleep 0.01 
```

**编辑 1**：

[这里](https://stackoverflow.com/a/37134825/1346709)已经解释了延迟的必要性。非常感谢@wilx！

**编辑 2**：

（感谢@MateiDavid）我们似乎忘记了重定向标准输入，更好的方法是：

```
#!/bin/bash
setsid "$@" >& /dev/null < /dev/null & 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-10T09:46:33.693

我认为您需要这样做，以使控制终端在设法分叉孩子`setsid "$@" >& /dev/null & wait`之前不会消失。`setsid`

**更新**

在我看来，这既适用于命令行，也适用于以下参数`-c`：

```
(setsid tail -F /var/log/messages >& /dev/null) & disown 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-01T19:15:20.370

您正在尝试创建一个 UNIX 守护进程（即，一个没有控制终端并且是它自己的[会话](http://en.wikipedia.org/wiki/Process_group)领导者的进程）。该`setsid`命令应该为您执行此操作，但您有责任关闭您要放弃的终端上打开的所有文件描述符。这可以通过将它们重定向到`/dev/null`或使用 shell 的关闭文件描述符的语法来完成（例如，`2>&-`在`0<&-`Bash 中）。

# sql - 脚本问题 Transact-SQL

> ID：10247725
> 
> 赞同：5
> 
> 时间：2012-04-20T13:57:41.947
> 
> 标签：sql, sql-server, tsql, stored-procedures

我想从使用数据库中返回所有表名，但这只是返回一个字符

```
declare @contador int

set @contador = 1

while (@contador<=(select count(table_name) from INFORMATION_SCHEMA.TABLES))
begin
declare @tableName varchar
    set @tableName =  (select top 1 * from (select top(@contador) table_name from INFORMATION_SCHEMA.TABLES order by table_name asc) as nombre order by table_name desc)
    print @tableName
    set @contador = @contador + 1
end 
```

输出是 s s s s s

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:00:32.077

```
declare @tableName varchar(100) 
```

您需要定义@tableName 的长度，默认设置为1 个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:01:41.470

尝试 `declare @tableName varchar(100)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:02:06.977

您需要更改表名以获得字符数的值。目前，该值默认为 1。我会建议一个比您认为需要确保所有表格都适合该字段的值更大的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:02:32.570

`declare @tableName varchar`需要有一个像`varchar(50)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T14:19:58.247

T-SQL 的类型[SYSNAME](http://msdn.microsoft.com/en-us/library/ms191240.aspx)用于存储诸如表名之类的内容：

> sysname 数据类型用于存储对象名称的表列、变量和存储过程参数。sysname 的确切定义与标识符的规则有关。因此，它可能因 SQL Server 实例而异。sysname 在功能上与 nvarchar(128) 相同，只是默认情况下 sysname 不为 NULL。在 SQL Server 的早期版本中，sysname 定义为 varchar(30)。

所以尝试像这样声明你的变量：

```
DECLARE @tableName SYSNAME; 
```

`VARCHAR(100)`如果表名包含当前代码页之外的字符或超过 100 个字符，则使用声明（如其他答案中所建议）将失败。

[SQL Server标识符规则的](http://msdn.microsoft.com/en-us/library/ms175874.aspx)摘录描述了表名的形式：

> 1.  第一个字符必须是以下之一：
>     
>     
>     *   Unicode 标准 3.2 定义的字母。字母的 Unicode 定义包括从 a 到 z、从 A 到 Z 的拉丁字符，以及来自其他语言的字母字符。
>         
>         
>     *   下划线 (_)、at 符号 (@) 或数字符号 (#)。
>         
>         
>     *   标识符开头的某些符号在 SQL Server 中具有特殊含义。以 at 符号开头的常规标识符始终表示局部变量或参数，不能用作任何其他类型对象的名称。以数字符号开头的标识符表示临时表或过程。以双数字符号 (##) 开头的标识符表示全局临时对象。尽管可以使用数字符号或双数字符号字符来开始其他类型对象的名称，但我们不推荐这种做法。
>         
>         
>     *   某些 Transact-SQL 函数的名称以双 at 符号 (@@) 开头。为避免与这些函数混淆，您不应使用以@@ 开头的名称。
>         
>         
> 2.  后续字符可以包括以下内容：
>     
>     
>     *   Unicode 标准 3.2 中定义的字母。
>         
>         
>     *   来自基本拉丁文或其他国家文字的十进制数字。
>         
>         
>     *   at 符号、美元符号 ($)、数字符号或下划线。
>         
>         
> 3.  标识符不能是 Transact-SQL 保留字。SQL Server 保留保留字的大写和小写版本。
>     
>     
> 4.  不允许嵌入空格或特殊字符。
>     
>     
> 5.  不允许使用补充字符。

有关更多信息，请参阅我的答案中的文档链接。

# ruby-on-rails - Rails 路由碰撞处理

> ID：10247736
> 
> 赞同：1
> 
> 时间：2012-04-20T13:58:16.920
> 
> 标签：ruby-on-rails, ruby, routing, seo

我有一个有趣的路由情况，我在处理时遇到了一些麻烦......这是针对 rails 2.3 应用程序的，这是场景：

```
route a:
/:trans_type/:country_code/:property_types

route b:
/:trans_type/:country_code/:location 
```

这两条路线在路线中共享相同的位置，因此需要在 :location 或 :property_types 上设置 :requirement 以区分两者。

由于 :location 非常开放，因此 :property_types 是可行的方法，因为我有一个模块可以轻松编译所有现有属性类型的列表以进行正则表达式匹配。

问题：/for-sale/us/apartment-loft

由于 :property_types 是一个数组，我必须从 params 对象中解析出多个 property_types（显然是在路由器之外）。如果我有这样的情况，我不可能在路由器中针对已知的属性类型进行正则表达式匹配，因为 :property_types 可能会返回多个连字符类型。

**那么我的问题是，我是否可以获取 :property_types 字符串并专门针对 :requirements 匹配对其进行修改？如果我可以将'apartment-loft' 替换为那个匹配的'apartment' (/^\w+/)，那么我就有了一些我可以实际正则表达式匹配的东西。**

```
Here's what the two routes actually look like:

map.location ":transaction/:country_code/:property_types",
  :controller => "search",
  :action => "location",
  :requirements => { :transaction => /(for-sale|for-rent|auction|new_development)/, :country_code => /\w\w/, :property_types => /(#{prop_types})/ }

map.location ":transaction/:country_code/:location",
  :controller => "search",
  :action => "location",
  :requirements => { :transaction => /(for-sale|for-rent|auction|new_development)/, :country_code => /\w\w/} 
```

上述实现适用于具有一个 property_type 的路由，但对于具有多个连字符 property_types 的路由，我就碰壁了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:31:11.803

如果可行，我建议为这两种情况创建显式路由和控制器操作：

```
map.location ":transaction/:country_code/property-types/:property_types",
  :controller => "search",
  :action => "by_property_type",
  :requirements => { :transaction => /(for-sale|for-rent|auction|new_development)/, :country_code => /\w\w/, :property_types => /(#{prop_types})/ }

map.location ":transaction/:country_code/:location",
  :controller => "search",
  :action => "by_location",
  :requirements => { :transaction => /(for-sale|for-rent|auction|new_development)/, :country_code => /\w\w/} 
```

然后你不必担心路由器上的正则表达式匹配，你可以在控制器中做它。

# java - 具有复杂数据形式的 Spring 数据绑定（具有 List 成员的对象的哈希映射）

> ID：10247737
> 
> 赞同：0
> 
> 时间：2012-04-20T13:58:17.653
> 
> 标签：java, spring, data-binding

我一直在努力解决这个问题，我们的系统；我正在使用具有结构的复杂形式：

```
<form:hidden path="details[${detailEntry.key}].locationSites[${locStatus.index}].locationId" />
... 
```

然后我有表单对象：

```
class MyForm implements Serializable
{

    private Map<String, DetailVO> details;
      <with getters and setters>

...
} 
```

使用 DetailVO 类：

```
class DetailVO
{
...
   private List<LocationSiteVO> locationSites;
  <with getters and setters>
....
}

class LocationSiteVO 
{
...
  private boolean field1;
...
<with getters and setters>
} 
```

发生的情况是（大多数情况下）绑定在 LocationSiteVO.field1 值中不起作用。通过调试，我看到它从表单（UI）正确传递到控制器（意味着绑定 LocationSiteVO 本身），但不是在 DetailVO 级别。如果有人遇到此问题，请分享您如何解决它。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:15:03.560

我认为你的类 DetailVo 和 LocationSiteVO 也必须实现`Serializable`。如果之后，它仍然不起作用，请制作一些`Converter`.

编辑：对不起，我认为转换器在你的情况下没有用。它用于在对象已经存在时查找对象。通过 cons 您可以尝试更改路径：

> ${details[detailEntry.key].locationSites[locStatus.index].locationId}

# iphone - 可以保存和覆盖资源文件夹中的文件吗？

> ID：10247743
> 
> 赞同：0
> 
> 时间：2012-04-20T13:59:14.310
> 
> 标签：iphone, objective-c

有谁知道在将应用程序发送到 Apple 之前是否可以将文件保存并覆盖到我为资源创建的“资源”文件夹中？所以我知道如何从那里获取文件，但是当应用程序在 Iphone 上时，我不确定如何保存和覆盖例如从特定 url 到该文件夹​​的 pdf 文件。
感谢您的回答！=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:02:03.060

应用发布后，您无法在 Resource 文件夹中进行任何编辑，它是只读的，请改用 Documents/Caches/tmp。

# css - 一个div中两个水平div的流体高度

> ID：10247744
> 
> 赞同：1
> 
> 时间：2012-04-20T13:59:16.687
> 
> 标签：css, html, nested, height

我不是网页设计师..我只是一个 asp.net 程序员，我在 IE7 上遇到了困难。好吧，我设法在 IE8、IE9 和 Chrome 中工作。现在我必须让它在 IE7 中工作。

首先这是我的来源

我正在使用 DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"

和 html xmlns="http://www.w3.org/1999/xhtml" lang="ko" xml:lang="ko"

```
<style type="text/css">
    html {
    height: 100%
}
body {
    background-color: #5c87b2;
    font-size: .85em;
    font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
    color: #696969;
    border: 0;
    overflow: visible;
    height: 100%; 
    max-height: 100%;
}
</style> 
```

```
<div id="header" style="
                        display:block;
                        position:fixed;
                        height:50px; width:100%;
                        background-color:red;">
                        d

</div>
<div id="menu" style="
                        display:block;
                        position:fixed;
                        width:200px;
                        top:50px; left:0; right:auto; bottom:0;
                        background-color:blue;">
                        d

</div>
<div id="button" style="
                        display:block;
                        position:fixed;
                        width:auto; height:100px;
                        top:50px; left:200px; right:0; bottom:auto;
                        background-color:Yellow;">
                        d
</div>
<div id="content" style="
                        display:block;
                        position:fixed;
                        width:auto; height:auto;
                        top:150px; left:200px; right:0; bottom:0;
                        background-color:green;">
    <div style="
                position:relative;
                height:50%;
                min-height:50%;
                border:3px solid pink;
                ">12412
    </div>
    <div style="
                position:relative;
                height:50%;
                border:3px solid white;
                ">
                2214124
    </div>
</div> 
```

所以我有一个标题（红色），左侧菜单（蓝色），子标题（黄色），容器（绿色），我需要容器中有两个 div（粉红色，白色边框）。他们需要垂直填充容器 100%。所有外部 div 的位置都是固定的。我给了内部两个 div 的相对位置，并给了两个 50% 的高度。它在 IE8,9, Chrome 中运行良好。

我不会使用脚本。只尝试使用 css 样式。

所以你们可以给我一些帮助吗？

感谢你！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:21:53.200

在外部 #content div 上设置高度允许内部 div 像在其他浏览器中一样显示。当您正在寻找全屏面板设置时，我不确定如何使用像素值来实现这一点。从 px 更改为 % 并将定位和宽度/高度指定为流体似乎在 IE7 中达到了预期的效果。

[http://jsfiddle.net/VCztH/3/](http://jsfiddle.net/VCztH/3/)

# assembly - 装配学习资源？

> ID：10247746
> 
> 赞同：4
> 
> 时间：2012-04-20T13:59:22.437
> 
> 标签：assembly, x86, asmx

我正在寻找一种好的、简洁的、结构化的方式来开始学习 x86 ASM。我有使用 Perl、Python 和 C/C++ 的经验，并且我一直想“深入了解”可以这么说已经有一段时间了，但每次我研究它时，我都发现除了令人困惑、冲突和很大程度上之外什么都没有日期信息。我对 MASM、FASM、HLA 以及我在谷歌搜索时发现的其他一些东西感到困惑，但它们似乎都没有提供我正在寻找的东西：一个快速介绍，其中包含关于细节低级的良好信息ASM 世界。我不希望 HLA 之类的东西给你 stdout.put() 之类的东西。我希望能够看到实际的中断被调用，并了解一切是如何做的。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:09:39.067

您应该尝试 MIPS 汇编，如果您想了解汇编是如何工作的，它会更容易也更好。有一个名为 MARS 的模拟器可以在这里下载：http: [//courses.missouristate.edu/KenVollmar/Mars/download.htm](http://courses.missouristate.edu/KenVollmar/Mars/download.htm)

这可以帮助你哟： http: [//www.inf.pucrs.br/~calazans/undergrad/arq1/mips/cod-appa.pdf](http://www.inf.pucrs.br/~calazans/undergrad/arq1/mips/cod-appa.pdf)

抱歉没有正确回答您的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:33:42.763

有组装的明确圣经：组装的[艺术。](https://web.archive.org/web/20170731115151/http://www.planetpdf.com/developer/article.asp?ContentID=6633)更重要的是，它可以在线免费获得！它有点过时了，这很好，因为你可以学习基础知识，而无需潜入非常复杂的新“ features”仅对操作系统有用。[（来源：][[computer-books.us](http://www.computer-books.us/images/aoa.jpg)][）]
[![装配艺术](../Images/d313e4d1430dd1e5341812d1b0f5dcae.png)](https://i.stack.imgur.com/Zha1v.jpg)

一些提示：

*   使用 nasm，它是 unix 和 windows 世界中的“标准”编译器，它的语法与本书使用的 masm 非常相似。（这并不是说它更好，只是有更好的文档）。

*   你是对的，HLA 是学习汇编的**错误**方法。将它保存为高级语言:)

*   您可以在操作系统之上运行程序，或者使用[Virtualbox](https://www.virtualbox.org/)

*   尝试一开始就“坚持使用金属”。也就是说，没有库，除了组装之外别无其他。机器本身没有提供任何东西。

*   一旦您掌握了理论（这很重要！），您可以尝试阅读有关 bios 功能，特别是打印到屏幕的功能（它们非常简单），以便您可以在虚拟机或真实硬件上快速测试您的代码。

*   尽管没有必要，您也可以尝试学习 c，因为它们与汇编共享低级概念，并且与 c++ 相当相似。

## 参考：

一个快速的[hello world 教程](http://asm.sourceforge.net/intro/hello.html)，让您开始使用 linux。

[bios 函数](https://en.wikipedia.org/wiki/BIOS_interrupt_call)（实际上是中断调用）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T14:40:11.433

对于概念，从基础书籍开始总是好的。我会推荐 Kenneth J. Ayala 所著的“8086 微处理器：PC 编程和接口”一书。它是世界各地许多大学使用的教科书，将向您介绍该主题。

# sql-server - 从 QuickBase 导出表

> ID：10247749
> 
> 赞同：0
> 
> 时间：2012-04-20T13:59:24.643
> 
> 标签：sql-server, database, quickbase

我的任务是获取 QuickBase 中的所有表和记录，并将它们导入 MS SQL Server 中的新数据库。我是实习生，所以这对我来说是新的。我已经能够将除其中两个之外的所有表导出到 CSV 文件中，以便我可以将它们导入 SQL Server。不会导出的两个表显示 QuickBase 错误，指出报告太大并且已超出报告中的最大字节数。我的问题是有人可以为此推荐解决方法吗？此外，CSV 文件是否必须位于服务器上才能导入，而不是存储在我的机器上？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:17:14.417

当您导出为 CSV 文件时，这些文件会从浏览器下载到您的本地计算机上，而不是服务器上。如果您遇到报告太大的问题，那么上面的过滤解决方法就足够了。

另一种可能性是在这里使用 QuickBase API：

[http://www.quickbase.com/api-guide/index.html](http://www.quickbase.com/api-guide/index.html)

具体来说，API_DoQuery 是您想要使用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:41:45.433

我不是 QuickBase 专家或任何其他人，但一些闲逛表明这是 QuickBase 报告中的一个限制。一种选择是分段导出这些表：首先过滤 60 天以前的记录，然后过滤 60 天或更早的记录；或某种类似的过滤器，将表拆分为两个或多个互斥记录块。

使用导入向导导入 CSV 时，向导将为您提供导航到文件的机会。如果您在本地计算机上运行 SSMS（您应该是），那么如果该文件在您的本地计算机上，则该文件将是可访问的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-25T20:43:17.207

您可以尝试一些现有的 OpenSource ETL 工具直接执行此操作（QB->MSSQL） - 即无需登陆任何中间 CSV 文件。以 CloverETL 为例（我曾经与 QuickBase 交互）： [http ://doc.cloveretl.com/documentation/UserGuide/index.jsp?topic=/com.cloveretl.gui.docs/docs/quickbaserecordreader.html](http://doc.cloveretl.com/documentation/UserGuide/index.jsp?topic=/com.cloveretl.gui.docs/docs/quickbaserecordreader.html)

他们有一个社区版（免费）：[http ://www1.cloveretl.com/community-edition](http://www1.cloveretl.com/community-edition)

# reporting-services - SSRS 将 Tablix 拟合到导出的 pdf 页面

> ID：10247752
> 
> 赞同：9
> 
> 时间：2012-04-20T13:59:31.070
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix

我目前在 SSRS 报告中有一个矩阵。通常，矩阵会在纵向模式下固定到标准页面，但是在某些情况下，列的长度会超过一页。有没有办法让 SSRS 将报告呈现为 PDF，该矩阵会自动调整大小并缩小其所有内容，即：字体、列宽以适合页面？我不想缩小 SSRS 报告中的所有对象来修复页面，只是缩小矩阵的宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T09:25:41.190

-> 转到报告选项卡 -> 选择报告属性 -> 根据标准选择纸张尺寸“字母”和“宽度和高度”（“8.5 * 11”或“11 * 8.5”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T16:32:38.190

如果您正在处理高度，我会说这不是 tablix 配置。tablix 只会因为列而扩展。并且列会扩展，因为它们内部的文本框会扩展。

因此，您需要通过右键单击列内的文本框并选择“文本框属性”来处理每个文本框。在常规选项卡上取消选中“允许高度增加”。

奇怪的是没有宽度选项。[此](http://technet.microsoft.com/en-us/library/ff519561.aspx)链接讲述了 CanGrow 和 CanShrink 属性，但我无法使其工作。也许如果你想试一试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-02T16:14:25.963

尽管投了反对票，但纳瓦兹有正确的答案

要使其适合特定页面，尤其是对于 pdf 输出，请将大小设置为 A4。为此，我总是有三个模板，screen、pdfland 和 pdfport。我为每个模板调整页眉、页脚、标题和公司图像的大小。这很痛苦，但是您可以通过为他们创建体面的仪表板来激励您的用户放弃 pdf、印刷和纸张，以便他们掌握实时数据。这真的是我发现的让他们摆脱旧的和坏习惯的唯一体面的方法

因此，要么在报告正​​文外右键单击并选择报告属性，要么从屏幕右侧的属性窗口选项卡中选择它，然后将大小设置为字母或 A4。这并不理想，但如果您不以这种方式限制报告大小，任何动态列都将呈现在 pdf 之外并创建多个页面，这些页面需要稍后粘在一起

编辑：如果您确实需要急于调整大小，可以将报表作为代码打开，并使用替换功能来减小大小，但是手动重新定位表格通常更容易

# wpf - DatePicker 绑定到 DateTime。“字符串未被识别为有效的日期时间”

> ID：10247755
> 
> 赞同：1
> 
> 时间：2012-04-20T13:59:40.683
> 
> 标签：wpf, datepicker

（免责声明：此异常已在许多其他线程中报告过，是的，我*已经在*Google 上搜索过，试图找到解决我的问题的方法！！）

我有一个 WPF 应用程序，其中*WPF Toolkit* **DatePicker**控件绑定到 DateTime 变量：

```
<UserControl x:Class="MikesApp.View.UserControls.FXRatesUserControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:toolkit="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit">

 <toolkit:DatePicker x:Name="fxDate" VerticalAlignment="Center" 
         Text="{Binding Selected_FXRate_Date, Mode=TwoWay}" 
         Style="{DynamicResource DatePickerStyle1}" >
 </toolkit:DatePicker> 
```

每当我输入一个日期，例如 2012 年 4 月 20 日，DatePicker 控件似乎认为它实际上是英国日期格式 (dd/MM/yyyy)，并且 WPFtoolkit 源代码抛出异常“**字符串未被识别为有效的日期时间**。”

这会突然阻止 WPF 向应用程序的其他部分执行更改通知，这些部分需要知道此日期何时更改。

[VS2010异常截图](http://www.mikesknowledgebase.com/images/WPFDatePickerProblem.JPG)

我很困惑。

我的笔记本电脑设置为以 MM/dd/yyyy 格式显示日期，我特别尝试告诉我的应用使用这种美国日期格式，首先使用以下代码：

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US");

Thread.CurrentThread.CurrentCulture.DateTimeFormat.ShortDatePattern = "MMM-dd-yyyy";
Thread.CurrentThread.CurrentCulture.DateTimeFormat.LongDatePattern = "MMM-dd-yyyy  hh:mm:ss"; 
```

然后，出于绝望，使用以下代码：

```
CultureInfo ci = new CultureInfo("en-US");
ci.DateTimeFormat.SetAllDateTimePatterns(new string[] { "MM/dd/yyyy" }, 'd' );
Thread.CurrentThread.CurrentCulture = ci;
Thread.CurrentThread.CurrentUICulture = ci; 
```

但无论我尝试什么，每当我选择无法使用 dd/MMM/yyyy 解析的日期时，DatePicker 都会引发异常。

如果我查看引发异常的代码行（取自 WPF Toolkit SDK 中的 DatePicker.cs）：

```
newSelectedDate = DateTime.Parse(text, DateTimeHelper.GetDateFormat(DateTimeHelper.GetCulture(this))); 
```

..我发现“ *DateTimeHelper.GetCulture(this)* ”确实正确返回“en-US”，但*GetDateFormat*函数的日期格式错误。它以某种方式返回 dd/MMM/yyyy，而不是 MMM/dd/yyyy。

[GetDateFormat 的返回值](http://www.mikesknowledgebase.com/images/WPFDatePickerProblem2.JPG)

我真的很困惑。

我什至尝试将*GetDateFormat*函数（取自 WPFtoolkit 源代码中的以下路径）剪切到我的应用程序中，并试图让它重现“错误的日期格式”问题......但是当它在我的代码，它运行良好，并且每次都正确解析 MMM/dd/yyyy 日期。

WPFtoolkit\Calendar\Microsoft\Windows\Controls\DateTimeHelper.cs

为什么 WPFtoolkit 代码与使用它的 WPF 应用程序代码具有不同的文化？

我怎样才能让 WPFtoolkit 使用正确的 Culture ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T17:08:35.710

我知道这不是直接的答案，但以防万一它可能会有所帮助，您是否可以使用 Telerik 工具？他们的 RadDateTimePicker 具有可以设置/强制执行的 Culture 依赖属性（CultureInfo 类型）：

```
<telerik:RadDateTimePicker x:Name="fxDate" VerticalAlignment="Center" 
     Culture ="{Binding Culture}"
     Text="{Binding Selected_FXRate_Date, Mode=TwoWay}" 
     Style="{DynamicResource DatePickerStyle1}" > 
```

另外，我很确定您会说“当然不是”，但以防万一，您是否在做任何事情，例如覆盖 DatePickerStyle1 中的模板，这可能会导致 TemplateBinding 关闭？

# objective-c - 这是否可以在运行时更新 Objective-C 库？

> ID：10247756
> 
> 赞同：0
> 
> 时间：2012-04-20T13:59:41.863
> 
> 标签：objective-c

只管 Apple 政策，只谈论 Objective-C 语言，假设我的程序调用了一个`.a`库。这是否可以`.a`从互联网上获取，并运行更新版本`.a`而不是旧版本`.a`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:02:50.557

不适用于静态链接库 ( `.a`)，至少在任何情况下都是如此。您当然可以使用动态加载的库 ( `.so`)；这是正常的用例之一。看看`dlopen`,`dlclose`并`dlsym`从动态加载器 (https://developer.apple.com/library/mac/#documentation/DeveloperTools/Reference/MachOReference/Reference/reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:42:42.370

这不仅仅是 iOS，还有 OS X 应用程序（可能还有其他一般的 Unix）

静态库（.a 文件）在程序运行时无法替换，因为它们是应用程序二进制文件的一部分。应用程序二进制文件映射到进程的地址空间。如果您尝试更改其中的任何部分，您几乎肯定会最终导致应用程序崩溃。

动态库（.so 文件）理论上是可以替换的。但是，大多数应用程序在开始时或第一次需要时加载它们，然后它们成为应用程序地址空间的一部分。我听说理论上应用程序可以卸载动态库，但我从未见过在任何真正的 Cooca 应用程序中这样做过。

# c# - 使用 C# 在 Excel 中复制图表

> ID：10247757
> 
> 赞同：1
> 
> 时间：2012-04-20T13:59:46.750
> 
> 标签：c#, excel

我有一个包含模板图表的电子表格。过去我使用过复制/粘贴功能，但有时我会遇到一个错误，我将某些内容复制到剪贴板上，同时我的代码是，我想避免这种情况。所以我研究了 Duplicate 方法。下面的代码应该工作吗？该图表确实可以很好地复制。

我遇到的问题是我不确定如何在复制图表对象后获取它。在这条线上：

```
ChartObject chart = (ChartObject)o; 
```

我收到此错误：无法将类型为“System.__ComObject”的 COM 对象转换为接口类型“Microsoft.Office.Interop.Excel.ChartObject”。这是我的代码：

```
string file = @"D:\test.xlsx";

Microsoft.Office.Interop.Excel.Application app = new Microsoft.Office.Interop.Excel.Application();
app.Visible = true;
ApplicationClass temp = new ApplicationClass();

Microsoft.Office.Interop.Excel.Workbook oBook;
Microsoft.Office.Interop.Excel.Worksheet oSheet;

oBook = app.Workbooks.Open(file, 0, false, 1, "", "", true, XlPlatform.xlWindows, "\t", false, false, 0, true, true, XlCorruptLoad.xlNormalLoad);
oSheet = oBook.Worksheets["template"] as Worksheet;

object o = ((ChartObject)oSheet.ChartObjects("template")).Duplicate();
ChartObject chart = (ChartObject)o;
chart.Name = "TEST"; 
```

我可以得到 ChartObjects 的数量吗？如果我在宏中执行此操作，我可以使用这条线来获取最后一张图表

```
oSheet.ChartObjects(oSheet.ChartObjects.Count) 
```

有什么建议么？我真诚地感谢任何帮助。

谢谢，尼克

如果有人对我最终如何做到这一点感兴趣。假设您有一个名为“模板”的工作表，并且在该工作表上您还有一个名为“模板”的图表。

```
Microsoft.Office.Interop.Excel.Worksheet oTemplate = oBook.Worksheets["template"] as Worksheet;
Microsoft.Office.Interop.Excel.Worksheet oOutput = oBook.Worksheets["output"] as Worksheet;

// duplicate template chart
ChartObject chartTemplate = (ChartObject)oTemplate.ChartObjects("template");
object o = chartTemplate.Duplicate();
ChartObject chart = (ChartObject)oTemplate.ChartObjects(GetChartCount(oTemplate));

public static int GetChartCount(Microsoft.Office.Interop.Excel.Worksheet oSheet)
{
    int x = 0;
    foreach (Microsoft.Office.Interop.Excel.Shape s in oSheet.Shapes)
    {
        if (s.HasChart == MsoTriState.msoTrue)
            x++;
    }
    return x;
} 
```

也许不是最好的方法，但它确实有效。

# java - 过时的 com.ms.security 的等效安全功能是什么？

> ID：10247760
> 
> 赞同：2
> 
> 时间：2012-04-20T14:00:05.743
> 
> 标签：java, windows, security, applet

# **背景**

我偶然发现了我的一个非常过时的旧小程序（其中的一部分来自 2001 年），我真的很想把它从死里复活！小程序应该在其本机应用程序中打开一个文件（除其他外），但这不适用于最新的 Windows 版本（包括*Windows 7*），它在*Windows XP*上运行良好。

```
 try {
                if (Class.forName("com.ms.security.PolicyEngine") != null) {
                    PolicyEngine.assertPermission(PermissionID.EXEC);
                    PolicyEngine.assertPermission(PermissionID.FILEIO);
                    PolicyEngine.assertPermission(PermissionID.NETIO);
                    PolicyEngine.assertPermission(PermissionID.UI);
                    PolicyEngine.assertPermission(PermissionID.USERFILEIO);
                    PolicyEngine.assertPermission(PermissionID.CLIENTSTORE);
                } 
                else {
                } 
         } catch (Throwable e) {
         } 
```

# **问题方案**

我很确定上面的代码与它有关。是否像完全删除此代码然后重新签署小程序一样简单？或者我是否需要在签名之前使用*java.security*包重新实现它？*如果我需要用java.security*重新实现它，仅仅使用类似的东西就足够了吗：

```
 try {
                if (Class.forName("java.security.Policy") != null) {            
                    final Permissions permissions = new Permissions();
                    permissions.add( new java.security.AllPermission());
                    } 
                else {
                }                 
        } catch (Throwable e) {
        } 
```

我需要什么才能让它在**Windows 7**上运行？

该小程序使用**Java 版本 1.5.0 (J2SE 5.0)。**

.

干杯。

**更新**

这是在 Windows XP 中工作的代码，但在 Windows 7 中似乎无法执行。

```
 String command = '"' + sDir + sFileName + '"';
    Runtime myRuntime = Runtime.getRuntime();
    try {
        myRuntime.exec("rundll32 SHELL32.DLL,ShellExec_RunDLL " + command);
        gGfx.setStatusText("File opened.");
        gGfx.drawStatusBar(1);
    } catch (IOException e) {

        System.out.println("Error " + e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:30:05.130

> 是否像完全删除此代码然后重新签署小程序一样简单？

这就是这里的解决方案。

# php - htaccess 重写不适用于图像

> ID：10247768
> 
> 赞同：2
> 
> 时间：2012-04-20T14:00:32.337
> 
> 标签：php, .htaccess

Appracate 任何人都可以为此提供的帮助，

我有一个旧的 url 结构：产品/类别（类别是动态的，仅用作示例）并且我正在尝试更改为类别/产品，为此我使用了

```
RewriteRule ^(.*)/products index.php?category=$1 
```

这是可行的，但是问题是我的图像存储为图像/产品/图像，并且规则是编写我所有的图像链接，

我试过了：

```
RewriteRule ^images/products/(.*) images/products/$1 
```

只是为了重写图像，但它不能正常工作

我的 htaccess 文件如下所示：

```
RewriteRule ^images/products/(.*) images/products/$1

RewriteRule ^(.*)/products index.php?category=$1 
```

提前致谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:47:57.207

Jeroen 的回答也有效，但您也可以指定一条规则作为终点

```
RewriteRule ^images/products/(.*) images/products/$1 [L]
RewriteRule ^(.*)/products index.php?category=$1 
```

'[L]' 应该防止第二条规则被解析，因为第一条规则应该按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:17:42.787

最简单的方法是添加一条规则以不重写现有目录和文件（您的图像......）的任何路径。

您可以通过在重写规则之前添加这些规则来做到这一点：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)/products index.php?category=$1 
```

# php - 多维数组 PHP

> ID：10247775
> 
> 赞同：1
> 
> 时间：2012-04-20T14:01:00.363
> 
> 标签：php, arrays

这是我的数组：

```
Array
(
    [Soorten] => Array
    (
        [Soort] => inpandig
    )

    [Voorzieningen] => Array
    (
        [Voorziening] => Array
        (
            [0] => voorzien van verwarming
            [1] => voorzien van elektra
            [2] => voorzien van water
            [3] => met elektrische deur
        )
    )

    [Capaciteit] => 1
    (
        [Isolatievormen] => Array
        (
            [Isolatie] => volledig geïsoleerd
        )
    ) 
```

如何在 PHP 中显示它，如下所示：

```
Voorziening:
voorzien van verwarming
voorzien van elektra
voorzien van water
met elektrische deur

Isolatie:
volledig geïsoleerd 
```

等等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:11:55.307

[递归函数](http://en.wikipedia.org/wiki/Recursion_%28computer_science%29)可以解决问题：

```
$array = array(
    'Soorten' => array('Soort' => 'inpandig'), 
    'Voorzieningen' => array('Voorziening' => array('voorzien van verwarming', 'voorzien van elektra', 'voorzien van water', 'met elektrische deur')));
printArray($array);

function printArray($array)
{
    foreach($array as $key => $value)
    {
        if(is_array($value))
        {
            echo $key . "<br/>";
            printArray($value);
            echo "<br/>";
        }
        else
        {
            echo $value . "<br/>";
        }
    }
} 
```

将打印：

```
Soorten
inpandig

Voorzieningen
Voorziening
voorzien van verwarming
voorzien van elektra
voorzien van water
met elektrische deur 
```

# python - 借用和窃取引用的 Python C-API 函数

> ID：10247779
> 
> 赞同：16
> 
> 时间：2012-04-20T14:01:12.300
> 
> 标签：python, python-c-api, reference-counting

Python C-API 中的标准约定是

*   函数不会从输入参数（即对象）中窃取引用

*   返回值和输出参数（即对象）拥有一个引用

Python C-API 中的大多数函数都遵循这个约定。但是，也有一些例外。我遇到了以下情况：

**从输入参数中窃取引用的函数**

```
PyModule_AddObject 
```

**具有借用引用的返回值或输出参数的函数**

```
PyErr_Occurred
PyTuple_GetItem
PyTuple_GETITEM
PyDict_GetItem
PyDict_GetItemString
PyDict_Next 
```

任何地方都有此类功能的完整列表吗？在编写 Python 扩展模块时，这样的列表将是一个有用的参考。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T17:23:18.600

在 Python 2.7.2 C-API 文档中对单词“steal”和“borrow”的文本搜索给出了以下列表：

**从输入参数中窃取引用的函数**

```
PyCell_SET (but not PyCell_Set)
PyList_SetItem, PyList_SET_ITEM
PyModule_AddObject
PyTuple_SetItem, PyTuple_SET_ITEM 
```

**具有借用引用的返回值或输出参数的函数**

```
all PyArg_Xxx functions
PyCell_GET (but not PyCell_Get)
PyDict_GetItem
PyDict_GetItemString
PyDict_Next
PyErr_Occurred
PyEval_GetBuiltins
PyEval_GetFrame
PyEval_GetGlobals
PyEval_GetLocals
PyFile_Name
PyFunction_GetClosure
PyFunction_GetCode
PyFunction_GetDefaults
PyFunction_GetGlobals
PyFunction_GetModule
PyImport_AddModule
PyImport_GetModuleDict
PyList_GetItem, PyList_GETITEM
PyMethod_Class, PyMethod_GET_CLASS
PyMethod_Function, PyMethod_GET_FUNCTION
PyMethod_Self, PyMethod_GET_SELF
PyModule_GetDict
PyObject_Init
PyObject_InitVar
PySequence_Fast_GET_ITEM
PySys_GetObject
PyThreadState_GetDict
PyTuple_GetItem, PyTuple_GET_ITEM
PyWeakref_GetObject, PyWeakref_GET_OBJECT
Py_InitModule
Py_InitModule3
Py_InitModule4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:44:14.197

[Python-Dev 上的这个线程](http://mail.python.org/pipermail/python-dev/2012-April/118849.html)强烈建议不存在这样的列表。该线程还讨论了如何处理它。

# linux - Http Live Streaming - 在 Linux 上分割 mp3

> ID：10247789
> 
> 赞同：1
> 
> 时间：2012-04-20T14:01:45.747
> 
> 标签：linux, ffmpeg, centos, http-live-streaming

我只是想在任何 linux 发行版（最好是 CentOS）中为 HTTP Live Streaming 分段 mp3，以便将音频流式传输到 iOS 应用程序。

在 linux 分段器中，我可以在 CentOS 中编译以下内容。

1.  [http://wiki.andy-chu.com/doku.php?id=http_live_streaming](http://wiki.andy-chu.com/doku.php?id=http_live_streaming)（不确定上次更新时间）

2.  github 上的 m3u8-segmenter（几个月前更新）

3.  [https://github.com/carsonmcdonald/HTTP-Live-Video-Stream-Segmenter-and-Distributor](https://github.com/carsonmcdonald/HTTP-Live-Video-Stream-Segmenter-and-Distributor) [ruby wrappers + c] （最近更新于 2 年前，v2 分支 9 个月大）

为了准备文件进行分段，这里是生成有效 ts 文件的 ffmpeg 转换字符串：

$ ffmpeg -er 4 -i input.mp3 -f mpegts -acodec libmp3lame -ar 22050 -ab 32k -vn output.ts

每个分段器都需要各种输入开关，所有这些都非常简单，并且都因段故障而崩溃。#2 实际上做了一些分段，但每次在 56 段之后都会出错。我尝试了各种 mp3，结果相同。2 和 3 的问题队列已满，相同问题的几个月内没有任何响应。

其他人必须在没有运行 OSX 的实时生产环境中执行此操作。你的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T14:33:54.030

你应该试试 httpsegmenter @ [http://code.google.com/p/httpsegmenter/](http://code.google.com/p/httpsegmenter/) 它基于segmenter.c

我已经编译并创建了分段 mp3、aac、mp4。匹配所有编译要求可能很棘手，但之后只需“按照说明进行操作”即可。

对于此分段器，您无需使用 mp3 内容创建 mpeg-ts。只需将 mp3 作为输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T15:01:06.993

这可能不适用，但是[http://tldp.org/HOWTO/MP3-HOWTO-11.html](http://tldp.org/HOWTO/MP3-HOWTO-11.html)提到了一些要使用的服务，包括一个 Apache 模块，例如，如果 Icecast 不符合您的需求。

# bluetooth - CC2540 USB - 可发现：尚未准备好执行任务

> ID：10247790
> 
> 赞同：3
> 
> 时间：2012-04-20T14:02:01.473
> 
> 标签：bluetooth, usb, bluetooth-lowenergy, texas-instruments

我在外围模式下使用 TI CC2540 USB 加密狗，并希望使用 BTool 启用广告，但设备正在回答：

> 未准备好执行任务

我知道可以在应用程序代码中设置初始广告启用，但我想手动设置广告，有人可以帮忙吗？这是BTool的日志：

```
[1] : <Tx> - 04:52:52.802
-Type       : 0x01 (Command)
-Opcode     : 0xFE00 (GAP_DeviceInit)
-Data Length    : 0x26 (38) byte(s)
 ProfileRole    : 0x04 (Peripheral)
 MaxScanRsps    : 0x05 (5)
 IRK        : 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
 CSRK       : 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
 SignCounter    : 0x00000001 (1)

[2] : <Rx> - 04:52:52.878
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x06 (6) bytes(s)
 Event      : 0x067F (GAP_HCI_ExtentionCommandStatus)
 Status     : 0x00 (Success)
 OpCode     : 0xFE00 (GAP_DeviceInit)
 DataLength : 0x00 (0)

[3] : <Rx> - 04:52:52.950
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x2C (44) bytes(s)
 Event      : 0x0600 (GAP_DeviceInitDone)
 Status     : 0x00 (Success)
 DevAddr        : C0:FF:EE:C0:FF:EE
 DataPktLen : 0x001B (27)
 NumDataPkts    : 0x04 (4)
 IRK        : 67:76:7D:A8:78:A1:A8:61:71:BD:58:24:92:39:0E:EC
 CSRK       : 4E:EA:B7:B5:14:34:66:8C:2D:6B:29:9D:C9:1E:4F:16

[4] : <Tx> - 04:53:00.375
-Type       : 0x01 (Command)
-Opcode     : 0xFE06 (GAP_MakeDiscoverable)
-Data Length    : 0x0F (15) byte(s)
 EventType  : 0x00 (Connectable Undirect Advertisement)
 InitAddrType   : 0x00 (Public)
 InitAddrs      : 00:00:00:00:00:00
 ChannelMap : 0x07 (Channel 37
          Channel 38
          Channel 39)
 FilterPolicy   : 0x00 (Allow Scan Requests From Any, Allow 
          Connect Request From Any.)

[5] : <Rx> - 04:53:00.455
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x06 (6) bytes(s)
 Event      : 0x067F (GAP_HCI_ExtentionCommandStatus)
 Status     : 0x10 (Not Ready To Perform Task)
 OpCode     : 0xFE06 (GAP_MakeDiscoverable)
 DataLength : 0x00 (0) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:37:05.433

用这个序列是可检测的。

```
[12] : <Tx> - 08:30:57.212
-Type       : 0x01 (Command)
-Opcode     : 0xFE00 (GAP_DeviceInit)
-Data Length    : 0x26 (38) byte(s)
 ProfileRole    : 0x04 (Peripheral)
 MaxScanRsps    : 0x05 (5)
 IRK        : 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
 CSRK       : 00:00:00:00:00:00:00:00:00:00:00:00:00:00:00:00
 SignCounter    : 0x00000001 (1)
Dump(Tx):
01 00 FE 26 04 05 00 00 00 00 00 00 00 00 00 00 
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 
00 00 00 00 00 00 01 00 00 00 
```

* * *

```
[13] : <Rx> - 08:30:57.291
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x06 (6) bytes(s)
 Event      : 0x067F (GAP_HCI_ExtentionCommandStatus)
 Status     : 0x00 (Success)
 OpCode     : 0xFE00 (GAP_DeviceInit)
 DataLength : 0x00 (0)
Dump(Rx):
04 FF 06 7F 06 00 00 FE 00 
```

* * *

```
[14] : <Rx> - 08:30:57.356
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x2C (44) bytes(s)
 Event      : 0x0600 (GAP_DeviceInitDone)
 Status     : 0x00 (Success)
 DevAddr        : 00:18:30:EA:9C:1B
 DataPktLen : 0x001B (27)
 NumDataPkts    : 0x04 (4)
 IRK        : E2:7D:76:4B:9B:24:8D:EA:F8:A6:E3:82:16:C8:C5:0C
 CSRK       : EE:68:E6:8E:F6:48:43:04:C4:F0:5C:D3:D1:39:A9:9F
Dump(Rx):
04 FF 2C 00 06 00 1B 9C EA 30 18 00 1B 00 04 E2 
7D 76 4B 9B 24 8D EA F8 A6 E3 82 16 C8 C5 0C EE 
68 E6 8E F6 48 43 04 C4 F0 5C D3 D1 39 A9 9F 
```

* * *

```
[15] : <Tx> - 08:31:04.155
-Type       : 0x01 (Command)
-Opcode     : 0xFE07 (GAP_UpdateAdvertisingData)
-Data Length    : 0x05 (5) byte(s)
 AdType     : 0x01 (Advertisement data)
 DataLength : 0x03 (3)
 AdvertData : 02:01:06
Dump(Tx):
01 07 FE 05 01 03 02 01 06 
```

* * *

```
[16] : <Rx> - 08:31:04.231
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x06 (6) bytes(s)
 Event      : 0x067F (GAP_HCI_ExtentionCommandStatus)
 Status     : 0x00 (Success)
 OpCode     : 0xFE07 (GAP_UpdateAdvertisingData)
 DataLength : 0x00 (0)
Dump(Rx):
04 FF 06 7F 06 00 07 FE 00 
```

* * *

```
[17] : <Rx> - 08:31:04.296
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x04 (4) bytes(s)
 Event      : 0x0602 (GAP_AdvertDataUpdate)
 Status     : 0x00 (Success)
 AdType     : 0x01 (Advertisement data)
Dump(Rx):
04 FF 04 02 06 00 01 
```

* * *

```
[18] : <Tx> - 08:31:06.786
-Type       : 0x01 (Command)
-Opcode     : 0xFE06 (GAP_MakeDiscoverable)
-Data Length    : 0x0F (15) byte(s)
 EventType  : 0x00 (Connectable Undirect Advertisement)
 InitAddrType   : 0x00 (Public)
 InitAddrs      : 00:00:00:00:00:00
 ChannelMap : 0x07 (Channel 37
              Channel 38
              Channel 39)
 FilterPolicy   : 0x00 (Allow Scan Requests From Any, Allow 
              Connect Request From Any.)
Dump(Tx):
01 06 FE 0F 00 00 00 00 00 00 00 00 07 00 00 00 
00 00 00 
```

* * *

```
[19] : <Rx> - 08:31:06.858
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x06 (6) bytes(s)
 Event      : 0x067F (GAP_HCI_ExtentionCommandStatus)
 Status     : 0x00 (Success)
 OpCode     : 0xFE06 (GAP_MakeDiscoverable)
 DataLength : 0x00 (0)
Dump(Rx):
04 FF 06 7F 06 00 06 FE 00 
```

* * *

```
[20] : <Rx> - 08:31:06.923
-Type       : 0x04 (Event)
-EventCode  : 0xFF (HCI_LE_ExtEvent)
-Data Length    : 0x05 (5) bytes(s)
 Event      : 0x0603 (GAP_MakeDiscoverable)
 Status     : 0x00 (Success)
Dump(Rx):
04 FF 05 03 06 00 E8 01 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:37:48.577

在加密狗上使用预建的 HostTestRelease 项目并将其设置为外围模式，经过几次试验，我得到了以下成功代码：

[73] : - 02:13:30.416 -Type : 0x01 (Command) -Opcode : 0xFE07 (GAP_UpdateAdvertisingData) -Data Length : 0x05 (5) byte(s) AdType : 0x01 (Advertisement data) DataLength : 0x03 (3) AdvertData : 02:01:06 转储(Tx): 01 07 FE 05 01 03 02 01 06

* * *

[74]：-02:13:30.493-类型：0x04（事件）-事件代码：0xFF（HCI_LE_ExtEvent）-数据长度：0x06（6）字节事件：0x067F（GAP_HCI_ExtentionCommandStatus）状态：0x00（成功）操作码： 0xFE07（GAP_UpdateAdvertisingData）数据长度：0x00（0）转储（Rx）：04 FF 06 7F 06 00 07 FE 00

* * *

[75]：-02:13:30.566-类型：0x04（事件）-事件代码：0xFF（HCI_LE_ExtEvent）-数据长度：0x04（4）字节事件：0x0602（GAP_AdvertDataUpdate）状态：0x00（成功）广告类型： 0x01（广告数据）转储（Rx）：04 FF 04 02 06 00 01

* * *

[76] : - 02:14:04.382 -Type : 0x01 (Command) -Opcode : 0xFE06 (GAP_MakeDiscoverable) -Data Length : 0x0F (15) byte(s) EventType : 0x04 (Scan Response) InitAddrType : 0x00 (Public) InitAddrs : 00:00:00:00:00:00 ChannelMap : 0x07 (Channel 37 Channel 38 Channel 39) FilterPolicy : 0x00 (Allow Scan Requests from Any, Allow Connect Request from Any.) Dump(Tx): 01 06 FE 0F 04 00 00 00 00 00 00 00 07 00 00 00 00 00 00

* * *

[77]：-02:14:04.456-类型：0x04（事件）-事件代码：0xFF（HCI_LE_ExtEvent）-数据长度：0x06（6）字节事件：0x067F（GAP_HCI_ExtentionCommandStatus）状态：0x00（成功）操作码： 0xFE06（GAP_MakeDiscoverable）数据长度：0x00（0）转储（Rx）：04 FF 06 7F 06 00 06 FE 00

希望它会有用！

# c# - 如何在 C# 中修改 Http 方法？

> ID：10247794
> 
> 赞同：1
> 
> 时间：2012-04-20T14:02:05.343
> 
> 标签：c#, httpwebrequest, compact-framework, httpwebresponse

在 HttpWebRequest 中，用户可以将 Method 传递为 Post OR Get OR Put OR DELETE 等。

但是对于我们的特定项目，我需要将 HttpMethod 传递为“POST /api/login HTTP/1.0”。

但这在 .NET CF 中是不允许的。

那么任何人都可以告诉我解决方法，请用于自定义 Http 方法。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:09:53.703

.NET CF 中不允许这样做的原因是因为它很荒谬：没有与您列出的内容匹配的 HttpMethod。

我认为你错了。你的方法是`POST`，你的目标网址是`/api/login`，协议是`HTTP/1.0`。所以，你应该`HttpWebRequest`对那个 URL 做一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:07:09.840

如[手册](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.method.aspx)所述：

> Method 属性可以设置为任何 HTTP 1.1 协议动词：GET、HEAD、POST、PUT、DELETE、TRACE 或 OPTIONS。

所以只需使用`hbWebRequest.Method = "POST";`.

# c#-4.0 - 将公钥从客户端传递到服务器的最佳方法

> ID：10247796
> 
> 赞同：0
> 
> 时间：2012-04-20T14:02:07.203
> 
> 标签：c#-4.0, tcpclient, public-key, pki, tcpserver

我有一个 tcp 服务器并使用 cms/pkcs#7 来保护在客户端和服务器之间传递的消息。作为初始会话的一部分，将客户端公钥传递给服务器是正常的做法吗？作为公钥，当会话启动时，初始的 clp 命令将传递密钥以及服务器需要了解的有关客户端的其他重要细节。它是公开的，所以不需要加密，它是公开的。

客户端/服务器通信由 ssl/tls 保护。

谢谢。鲍勃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:30:06.043

您不信任 SSL/TLS 还是为什么要在安全通道内再次加密？只有当服务器将消息传递到其他节点并且它将在其他地方解密，从而创建端到端的安全性时，这才有意义。

在任何情况下，您都不应该让客户端只将公钥传递给服务器。相反，它应该将*证书*传递给服务器，服务器应该根据使用与证书中包含的公钥匹配的私钥进行的签名来验证客户端。此外，服务器将需要检查证书本身（它是否来自受信任的 CA，是否对链中的签名进行验证等）。

如果可以，您应该在 SSL/TLS 层上使用 SSL/TLS 相互身份验证（客户端证书身份验证）来完成所有这些操作。如果你不能，那么确保你设计了一个安全的应用层协议来验证客户端和它的公钥。否则可能会冒充其他客户。

# javascript - d3 中带有弯头连接器的树/树状图

> ID：10247800
> 
> 赞同：9
> 
> 时间：2012-04-20T14:02:16.003
> 
> 标签：javascript, svg, d3.js, dendrogram

我对 d3.js（和一般的 SVG）非常陌生，我想做一些简单的事情：带有角度连接器的树/树状图。

我已经从这里蚕食了 d3 示例：[http](http://mbostock.github.com/d3/ex/cluster.html) ://mbostock.github.com/d3/ex/cluster.html 我想让它更像这里的 protovis 示例：

*   [http://mbostock.github.com/protovis/ex/indent.html](http://mbostock.github.com/protovis/ex/indent.html)
*   [http://mbostock.github.com/protovis/ex/dendrogram.html](http://mbostock.github.com/protovis/ex/dendrogram.html)

我在这里开始了：http: [//jsbin.com/ugacud/2/edit#javascript,html](http://jsbin.com/ugacud/2/edit#javascript,html)，我认为这是错误的以下片段：

```
var diagonal = d3.svg.diagonal()
.projection(function(d) { return [d.y, d.x]; }); 
```

但是没有明显的替代品，我可以使用`d3.svg.line`，但我不知道如何正确集成它，理想情况下我想要一个弯头连接器....虽然我想知道我是否为此使用了错误的库，因为我见过的很多 d3 示例都是使用引力来绘制物体而不是树。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-20T16:10:47.030

`diagonal`使用 SVG 的“H”和“V”[路径命令](http://www.w3.org/TR/SVG/paths.html#PathData)，将函数替换为自定义路径生成器。

```
function elbow(d, i) {
  return "M" + d.source.y + "," + d.source.x
      + "V" + d.target.x + "H" + d.target.y;
} 
```

请注意，源和目标的坐标（*x*和*y*）是交换的。此示例以水平方向显示布局，但布局始终使用相同的坐标系：*x*是树的宽度，*y*是树的深度。因此，如果要显示右边缘具有叶（最底部）节点的树，则需要交换*x*和*y*。这就是对角线投影函数的作用，但在上面的肘部实现中，我只是对行为进行了硬编码，而不是使用可[配置函数](http://bost.ocks.org/mike/chart/)。

如：

```
svg.selectAll("path.link")
    .data(cluster.links(nodes))
  .enter().append("path")
    .attr("class", "link")
    .attr("d", elbow); 
```

还有一个工作示例：

*   [http://bl.ocks.org/d/2429963/](http://bl.ocks.org/d/2429963/)

# php - PHP：用一个 Tab 替换多个 Tab (\t)

> ID：10247801
> 
> 赞同：1
> 
> 时间：2012-04-20T14:02:18.640
> 
> 标签：php, regex

我有一个带有句子的数组。有时单词被制表符分隔，有时一个，有时不止一个。

我想我想要的很简单。我想将单词之间的制表符数量更改为 1，以将所有单词除以一个以上的制表符。

```
Example, I want to change this:
\t\t This \t\t\t\t\t is \t\t a\t test.
into this:
\t This \t is \t a \t test. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:04:11.283

```
$string = preg_replace("/\t+/", "\t", $string); 
```

# c# - WCF REST 服务 - 用每个方法上的类实例替换字符串参数？

> ID：10247803
> 
> 赞同：0
> 
> 时间：2012-04-20T14:02:35.140
> 
> 标签：c#, wcf, rest

我正在编写一个具有移动客户端的 WCF REST 服务。
移动客户端使用 OAuth 中的“authToken”来表示用户的身份。
authToken 是一个字符串参数，目前，它被传递给**（几乎）**服务中的每个方法。

我想做的是编写类似于 MVC ActionFilter 的东西 - 它为每个方法运行并执行 authToken 处理：验证令牌，查找相关帐户并*返回 Account 实例对象*- 查找失败意味着返回错误我的方法甚至没有被调用。

我发现[这](https://stackoverflow.com/questions/3045417/using-ioperationbehavior-to-supply-a-wcf-parameter) [两个](https://stackoverflow.com/questions/7512865/wcf-ioperationinvoker-invoke-how-to-add-some-kind-of-invocation-context)问题与我想做的有点相似，但看起来棘手的部分是以某种方式*引入 Account 实例*？我可以很高兴地创建实现 IOperationBehavior 接口的 [AuthOperation] 属性，但是我无法弄清楚我需要做什么才能引入我查找过的新帐户实例。

```
 public object Invoke(object instance, object[] inputs, out object[] outputs)
    {
        Account = new Account(_context);
        if (!Account.LoadByAuthToken(((string)inputs[0]).FromEncodedString()))
        {
            outputs = new object[0];
            return new ErrorResponse
                    {
                        Code = ResponseCode.Exception.ToString(),
                        DebugMessage = MyStrings.AuthToken_NotFound
                    };
        } 
```

**如何将我的 Account 实例传递给调用的方法？**

```
 object result = this._originalInvoker.Invoke(instance, IntroduceAccount(inputs,Account), out outputs); 
        return result;
    } 
```

最终我想要的是拥有

```
public MyResponse GetContacts(string authToken) 
```

暴露在服务中，但是

```
public MyResponse GetContacts(Account acct) 
```

或者

```
public MyResponse GetContacts(Account acct, string authToken) 
```

实际在服务器上实现 - 并由“操作过滤器”处理 authToken -> 帐户转换。

如果答案是“不要使用 WCF，这样做……”，我什至会很高兴，只要提出的其他任何建议也符合我的其他要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T17:03:12.140

您是否考虑过使用拦截？看看[这个](http://msdn.microsoft.com/en-us/library/ff660915(v=pandp.20).aspx)例子。还有其他拦截器实现。此[链接](https://stackoverflow.com/questions/1331851/dynamic-interception-of-calls-in-net)还有更多选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T08:17:02.730

事实证明，我真的很笨，而且（几乎）实现我的目标实际上相当简单。

在上面的 (Invoke) 方法中，您可以访问正在调用的实例......所以......

```
 var wcfAccountRequired = instance as IWcfAccountRequired;
        if (wcfAccountRequired != null)
        {
            (wcfAccountRequired).Account = Account;
        } 
```

...我只是确保（实例）正在实现特定接口并为其分配 Account 属性。如果我没有成功检索帐户，我可以只返回错误而不调用任何内容。

不完美，但简洁地解决了我的问题。

# c# - Linq：Take 的“对立面”？

> ID：10247804
> 
> 赞同：15
> 
> 时间：2012-04-20T14:02:39.947
> 
> 标签：c#, linq

使用 Linq；我该怎么做Take的“相反”？

即而不是获取前 n 个元素，例如 in

```
aCollection.Take(n) 
```

我想得到除了最后 n 个元素之外的所有东西。就像是

```
aCollection.Leave(n) 
```

（不要问为什么:-)

编辑

我想我可以这样做`aCollection.TakeWhile((x, index) => index < aCollection.Count - n)`或者以扩展的形式

```
public static IEnumerable<TSource> Leave<TSource>(this IEnumerable<TSource> source, int n) 
{ 
  return source.TakeWhile((x, index) => index < source.Count() - n); 
} 
```

但是在*Linq to SQL*或*NHibernate Linq*的情况下，如果生成的 SQL 处理它并生成类似的东西（对于 SQL Server/T-SQL），那就太好了

`SELECT TOP(SELECT COUNT(*) -@n FROM ATable) * FROM ATable`或者其他一些更聪明的 SQL 实现。

我想没有什么类似的吧？（但编辑实际上不是问题的一部分。）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T14:05:19.667

```
aCollection.Take(aCollection.Count() - n); 
```

**编辑：**就像评论中出现的一条有趣的信息一样——你可能认为`IEnumerable`'s 扩展方法`.Count()`很慢，因为它会遍历所有元素。但如果实际对象实现`ICollection`or `ICollection<T>`，它将只使用`.Count`应该是 O(1) 的属性。所以在这种情况下性能不会受到影响。

`IEnumerable.Count()` [您可以在 TypeDescriptor.net](http://typedescriptor.net/browse/members/367291-System.Linq.Enumerable.Count%5BTSource%5D%28IEnumerable%601%29)上查看源代码。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-20T14:04:57.043

我很确定没有内置的方法，但这可以通过链接`Reverse`和轻松完成`Skip`：

```
aCollection.Reverse().Skip(n).Reverse() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-20T14:06:48.647

我不相信有一个内置的功能。

`aCollection.Take(aCollection.Count - n)`

应该合适；将集合中的项目总数减去 n 应该跳过最后 n 个元素。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-01-11T19:39:04.417

遵循这一理念，并对未实现`IEnumerable`的情况进行一次枚举，您可以使用这些扩展方法：`ICollection`

```
public static IEnumerable<T> Leave<T>(this ICollection<T> src, int drop) => src.Take(src.Count - drop);

public static IEnumerable<T> Leave<T>(this IEnumerable<T> src, int drop) {
    IEnumerable<T> IEnumHelper() {
        using (var esrc = src.GetEnumerator()) {
            var buf = new Queue<T>();
            while (drop-- > 0)
                if (esrc.MoveNext())
                    buf.Enqueue(esrc.Current);
                else
                    break;

            while (esrc.MoveNext()) {
                buf.Enqueue(esrc.Current);
                yield return buf.Dequeue();
            }
        }
    }

    return (src is ICollection<T> csrc) ? csrc.Leave(drop) : IEnumHelper();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T14:15:54.490

这将比具有双重反转的解决方案更有效，因为它只创建一个列表并且只枚举列表一次。

```
public static class Extensions
{
   static IEnumerable<T> Leave<T>(this IEnumerable<T> items, int numToSkip)
   {
      var list = items.ToList();
      // Assert numToSkip <= list count.
      list.RemoveRange(list.Count - numToSkip, numToSkip);
      return List
   }
}

string alphabet = "abcdefghijklmnopqrstuvwxyz";
var chars = alphabet.Leave(10); // abcdefghijklmnop 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-05-20T16:30:32.280

目前，C#`TakeLast(n)`定义了一个从字符串末尾获取字符的方法。

见这里：[https ://msdn.microsoft.com/en-us/library/hh212114(v=vs.103).aspx](https://msdn.microsoft.com/en-us/library/hh212114(v=vs.103).aspx)

# c# - 对象数据源函数仅返回 1 个值

> ID：10247805
> 
> 赞同：1
> 
> 时间：2012-04-20T14:02:40.863
> 
> 标签：c#, asp.net, object, objectdatasource

我正在为我的 Gridview 使用 ObjectDataSource。我用来返回值的函数只是返回一个值，它是表中的最后一个值。我要进行哪些更改以返回所有值。

```
public class Employees
    {
        public int e_number;
        public string e_name;
        public string e_designation;
        private SqlConnection conn = null;
        private SqlCommand cmd = null;
        private string constring = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

        public Employees()
        {
            conn = new SqlConnection(constring);
            cmd = new SqlCommand();
        }
        public int Employee
        {
            get
            {
                return e_number;
            }
            set
            {
                e_number = value;
            }
        }

        public  string Name
        {
            get
            {
                return e_name;
            }
            set
            {
                e_name = value;
            }
        }
        public string Designation
        {
            get
            {
                return e_designation;
            }
            set
            {
                e_designation = value;
            }
        }   

        public Employees GetEmployee()
        {
            string strquery = "select [Number],[Name],[Designation] from [Users]";
            conn.Open();
            cmd.Connection = conn;
            cmd.CommandText = strquery;
             SqlDataReader objSqlDataReader = cmd.ExecuteReader();
            int counter = 0;
           // ArrayList myObj = new ArrayList();
          //  Employees objEmployees = new Employees();
            Employees emp = null;

            //if (objSqlDataReader.Read())
            while(objSqlDataReader.Read())
            {
               emp = new Employees();
               // myObj[counter] = new Employees();
              //  Employees employee = new Employees();
                emp.Employee = (int)objSqlDataReader["Number"];
                emp.Name=(string)objSqlDataReader["Name"];
                emp.Designation = (string)objSqlDataReader["Designation"];

               // objEmployees.e_number = (int)objSqlDataReader["Number"];
               // objEmployees.e_name = (string)objSqlDataReader["Name"];
                //objEmployees.e_designation = (string)objSqlDataReader["Designation"];

            }

            conn.Close();
            return emp; 

            //return objEmployees;

        }
    }
} 
```

我已经尝试了所有方法，例如制作对象数组，但我无法做到。请你告诉我要在我的代码中添加什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:07:35.360

您需要返回一份员工名单。您只返回一个，即退出循环后的最后一个实例：

```
public List<Employees> GetEmployees()
{
    ..
    List<Employees> emps = new List<Employees>();
    Employees emp = null;

    while (..)
    {
        emp = new Employees();
        ..
        emps.Add(emp);
    }

    return emps;
} 
```

# javascript - 使用 .bind() 避免 .call() 和 .apply()

> ID：10247807
> 
> 赞同：15
> 
> 时间：2012-04-20T14:02:46.993
> 
> 标签：javascript, jquery, ecmascript-5

我正在寻找一种方法来完成某项任务，也就是说，从

```
jQuery.when.apply( null, promiseArray ).done(...) 
```

到

```
when( promiseArray ).done(...) 
```

您可能知道，`.bind()`可以习惯于创建默认参数之类的东西，也可以做一些非常漂亮的事情。例如，而不是总是调用

```
var toStr = Object.prototype.toString;
// ...
toStr.call([]) // [object Array] 
```

我们可以这样做

```
var toStr = Function.prototype.call.bind( Object.prototype.toString );
toStr([]) // [object Array] 
```

这相当酷（即使有这样的性能惩罚`.bind()`，我知道并且我知道它），但我无法真正完成 jQuerys`.when`调用。如果你有一个未知数量的 Promise 对象，你通常将它们推送到一个数组中，然后能够`.when`像我上面的第一个代码片段那样将它们传递给。

到目前为止，我正在这样做：

```
var when = Function.prototype.apply.bind( $.when ); 
```

现在我们可以去

```
when( null, promiseArray ).done(...) 
```

这行得通，但我也想摆脱`null`每次都明确传递的需要。所以我尝试了

```
var when = Function.prototype.apply.bind( $.when.call.bind( null ) ); 
```

但这向我抛出：

```
"TypeError: Function.prototype.apply called on incompatible null" 
```

我想我现在坐在这里太久了，不能再思考了。感觉有一个简单的解决方案。**我不想使用任何附加功能**来解决这个问题，我绝对更喜欢使用`.bind()`.

在此处查看完整示例：http: [//jsfiddle.net/pp26L/](http://jsfiddle.net/pp26L/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T14:10:56.357

这应该有效：

```
when = Function.prototype.apply.bind( $.when, null); 
```

您只需绑定（或咖喱，如果您愿意）的第一个参数`.bind`并将其修复为`null`.

**[小提琴](http://jsfiddle.net/pp26L/3/)**。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-20T14:11:15.100

[`bind`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind)接受可变数量的参数，因此您可以部分应用方法。所以，而不是：

```
var when = Function.prototype.apply.bind( $.when ); 
```

做这个：

```
var when = Function.prototype.apply.bind( $.when , null ); 
```

并更新了 jsfiddle：http: [//jsfiddle.net/pp26L/2/](http://jsfiddle.net/pp26L/2/)

# c++ - 可移植的 C++ 多线程

> ID：10247811
> 
> 赞同：3
> 
> 时间：2012-04-20T14:03:13.047
> 
> 标签：c++, multithreading, portability

我正在用 C++ 语言编写一个使用多线程的库。由于我是在 Windows 中开发它，所以我使用“Windows.h”中的方法和数据结构（如`CreateThread`、`HANDLE WINAPI`等）。

现在我想让这段代码在 Windows 和 Linux 中都可以执行；你能建议我一些线程实现来做到这一点吗？

这个应用程序的主要要求是执行速度，所以我需要一些快速的实现。

预先感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T14:07:31.517

到目前为止，您最好的选择是使用新的 std::threads 库，它是可移植的、标准化的，并且以现代风格编写。

```
 std::thread my_thread(my_func, my_param); 
```

[http://en.cppreference.com/w/cpp/thread](http://en.cppreference.com/w/cpp/thread)

如果您无法访问 C++11（VC10 和 >gcc 4.4 应该没问题），那么 std::threads 或多或少是伟大的 boost::threads 的开发，boost 库是跨平台的，并且便携（至少它将支持主要操作系统，包括 Win32 和 linux）。

[http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html](http://www.boost.org/doc/libs/1_49_0/doc/html/thread.html)

最后，如果您正在寻找并行化算法，可能值得您查看英特尔的 TBB，这是一个现代 C++ 线程库，提供类似于 std:: 算法的并行结构

```
tbb::for_each(my_contaier.begin(), my_container.end(), my_func); 
```

[http://threadingbuildingblocks.org/](http://threadingbuildingblocks.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:07:16.147

Boost.Thread

[http://www.boost.org/libs/thread](http://www.boost.org/libs/thread)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:07:24.273

boost::thread 也是新标准 C++11 中的 std::thread 解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T14:30:27.107

作为替代方案，一个非常可移植 (*) 且相对非侵入性的库，在 g++ 上得到很好的支持，并且在 MSVC 上（使用旧版本）是[OpenMP](http://openmp.org/wp/)。

它不是标准的 C++，但 OpenMP 本身就是一个标准。它让您可以轻松地并行化循环：

```
#pragma omp parallel for
for (int i=0; i!=x; ++i) {
} 
```

它还具有任务和计时功能（以及更多），但在我看来，它的王道是上面的例子。

* * *

(*) 如果你坚持使用编译指示，它根本就不是不可移植的。

# python - 什么是查找重复对象的好pythonic方法？

> ID：10247815
> 
> 赞同：8
> 
> 时间：2012-04-20T14:03:20.110
> 
> 标签：python, sorting, python-2.x

我经常使用`sorted`和`groupby`查找可迭代项中的重复项。现在我发现它不可靠：

```
from itertools import groupby
data = 3 * ('x ',  (1,), u'x')
duplicates = [k for k, g in groupby(sorted(data)) if len(list(g)) > 1]
print duplicates
# [] printed - no duplicates found - like 9 unique values 
```

上面的代码在 Python 2.x 中失败的原因在[这里](https://stackoverflow.com/questions/10238060/python-2-x-sorted-puzzlement)解释。

**什么是查找重复项的可靠 Pythonic 方法？**

我在 SO 上寻找类似的问题/答案。其中最好的是“[在 Python 中，我如何获取一个列表并将其减少为重复项列表？](https://stackoverflow.com/questions/685671/in-python-how-do-i-take-a-list-and-reduce-it-to-a-list-of-duplicates) ”，但公认的解决方案不是 pythonic（它是程序多行... if ... add ... else ... add ... 返回结果）和其他解决方案不可靠（取决于“<”运算符的未实现传递性）或速度慢（O n*n）。

**[编辑]**关闭。接受的答案帮助我在下面更笼统的答案中总结了结论。

我喜欢使用内置类型来表示例如树结构。这就是为什么我现在害怕混合。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-20T14:06:18.247

**注意：**假设条目是可散列的

```
>>> from collections import Counter
>>> data = 3 * ('x ',  (1,), u'x')
>>> [k for k, c in Counter(data).iteritems() if c > 1]
[u'x', 'x ', (1,)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T10:16:53.160

结论：

*   如果所有项目都是可散列的并且至少是 Python 2.7，那么最好的解决方案是上面的**[collections.Counter](https://stackoverflow.com/a/10247854/448474)**。
*   如果某些项目不可散列或不存在 Python 2.7+，则`groupby(sorted(..))`在条件下解决方案非常好
    *   不结合 str 和 unicode 或
    *   不要使用名称按字母顺序排列在“str”和“unicode”之间的任何类型。（通常是“元组”或“类型”）
*   如果数据是不可散列的并且是混合类型的，则不能使用上述任何内容，然后最好使用：
    *   `Counter(map(pickled.dumps, data))`而不是`Counter(data)`最后解开它或
    *   `groupby(sorted(data, key=pickled.dumps))`如果 unpickling 是不可取的或没有 python 2.7
*   下面讨论的“[天真的解决方案](https://stackoverflow.com/a/5751556/448474)”可能比对大约少于 300 个的极少数项目进行酸洗更好。

**其他问题中的所有其他**解决方案目前**都更糟**。

笔记：

*   看起来 Counter 类可以复制并粘贴到较低的 Python 版本。
*   在整个数据中搜索每个项目的“简单[解决方案](https://stackoverflow.com/a/5751556/448474)”可用于非常少量的项目。它的优点是不需要散列数据并且不依赖于默认“<”运算符的传递性，但是对于超过 25 个可散列的项目来说，计数器更好，对于超过 300 个不可散列的“野生”项目来说，在腌制上的计数器更好项目。

我考虑过按类型对项目进行预排序或通过散列扩展它们以用于可散列项目，它目前有帮助，但它不是一个安全的解决方案，因为同样的问题会出现在“<”运算符的现场列表、元组等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T19:03:21.077

这个主题对我来说很有趣，所以我将上述解决方案与另一个线程中接受的解决方案进行了计时。

Counter 方法是这个线程非常优雅；但是，在这个线程中接受的答案[在 Python 中，我如何获取一个列表并将其减少为重复列表？](https://stackoverflow.com/questions/685671/in-python-how-do-i-take-a-list-and-reduce-it-to-a-list-of-duplicates)似乎快了大约 2 倍。

```
import random as rn
import timeit
from collections import Counter

a = [rn.randint(0,100000) for i in xrange(10000)]

def counter_way(x):
    return [k for k,v in Counter(x).iteritems() if v > 1]

def accepted_way(x): #accepted answer in the linked thread
    duplicates = set()
    found = set()
    for item in x:
        if item in found:
            duplicates.add(item)
        else:         
            found.add(item)
    return duplicates

t1 = timeit.timeit('counter_way(a)', 'from __main__ import counter_way, a', number = 100)
print "counter_way: ", t1
t2 = timeit.timeit('accepted_way(a)','from __main__ import accepted_way, a', number = 100)
print "accepted_way: ", t2 
```

结果：

```
counter_way:  1.15775845813
accepted_way:  0.531060022992 
```

我在不同的规格下尝试过这个，结果总是一样的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T07:40:06.280

但是，这两种解决方案都存在缺陷。原因是它合并了具有相同哈希值的值。因此，这取决于使用的值是否可能具有相同的哈希值。这并不是你想象的那么疯狂的评论（我之前也很惊讶），因为 Python 以特殊的方式散列了一些值。尝试：

```
from collections import Counter

def counter_way(x):
    return [k for k,v in Counter(x).iteritems() if v > 1]

def accepted_way(x): #accepted answer in the linked thread
    duplicates = set()
    found = set()
    for item in x:
        if item in found:
            duplicates.add(item)
        else:         
            found.add(item)
    return duplicates

a = ('x ',  (1,), u'x') * 2

print 'The values:', a
print 'Counter way duplicates:', counter_way(a)
print 'Accepted way duplicates:', accepted_way(a)
print '-' * 50

# Now the problematic values.
a = 2 * (0, 1, True, False, 0.0, 1.0)

print 'The values:', a
print 'Counter way duplicates:', counter_way(a)
print 'Accepted way duplicates:', accepted_way(a) 
```

根据定义，1、1.0 和 True 具有相同的哈希值，0、0.0 和 False 也类似。它在我的控制台上打印以下内容（想想最后两行——所有值实际上应该是重复的）：

```
c:\tmp\___python\hynekcer\so10247815>python d.py
The values: ('x ', (1,), u'x', 'x ', (1,), u'x')
Counter way duplicates: [u'x', 'x ', (1,)]
Accepted way duplicates: set([u'x', 'x ', (1,)])
--------------------------------------------------
The values: (0, 1, True, False, 0.0, 1.0, 0, 1, True, False, 0.0, 1.0)
Counter way duplicates: [0, 1]
Accepted way duplicates: set([False, True]) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T07:52:44.730

只是因为我很好奇，这是在 0、False、0.0 等之间产生差异的解决方案。它基于对序列进行排序，同时`my_cmp`考虑到项目的类型。当然，与上述解决方案相比，它非常慢。这是因为排序。但是比较结果！

```
import sys
import timeit
from collections import Counter

def empty(x):
    return

def counter_way(x):
    return [k for k,v in Counter(x).iteritems() if v > 1]

def accepted_way(x): #accepted answer in the linked thread
    duplicates = set()
    found = set()
    for item in x:
        if item in found:
            duplicates.add(item)
        else:         
            found.add(item)
    return duplicates

def my_cmp(a, b):
    result = cmp(a, b)
    if result == 0:
        return cmp(id(type(a)), id(type(b)))
    return result    

def duplicates_via_sort_with_types(x, my_cmp=my_cmp):

    last = '*** the value that cannot be in the sequence by definition ***'
    duplicates = []
    added = False
    for e in sorted(x, cmp=my_cmp):
        if my_cmp(e, last) == 0:
            ##print 'equal:', repr(e), repr(last), added
            if not added:
                duplicates.append(e)
                ##print 'appended:', e
                added = True
        else:
            ##print 'different:', repr(e), repr(last), added
            last = e
            added = False
    return duplicates

a = [0, 1, True, 'a string', u'a string', False, 0.0, 1.0, 2, 2.0, 1000000, 1000000.0] * 1000

print 'Counter way duplicates:', counter_way(a)
print 'Accepted way duplicates:', accepted_way(a)
print 'Via enhanced sort:', duplicates_via_sort_with_types(a) 
print '-' * 50

# ... and the timing
t3 = timeit.timeit('empty(a)','from __main__ import empty, a', number = 100)
print "empty: ", t3
t1 = timeit.timeit('counter_way(a)', 'from __main__ import counter_way, a', number = 100)
print "counter_way: ", t1
t2 = timeit.timeit('accepted_way(a)','from __main__ import accepted_way, a', number = 100)
print "accepted_way: ", t2
t4 = timeit.timeit('duplicates_via_sort_with_types(a)','from __main__ import duplicates_via_sort_with_types, a', number = 100)
print "duplicates_via_sort_with_types: ", t4 
```

它打印在我的控制台上：

```
c:\tmp\___python\hynekcer\so10247815>python e.py
Counter way duplicates: [0, 1, 2, 'a string', 1000000]
Accepted way duplicates: set([False, True, 2.0, u'a string', 1000000.0])
Via enhanced sort: [False, 0.0, 0, True, 1.0, 1, 2.0, 2, 1000000.0, 1000000, 'a string', u'a string']
--------------------------------------------------
empty:  2.11195471969e-05
counter_way:  0.76977053612
accepted_way:  0.496547434023
duplicates_via_sort_with_types:  11.2378848197 
```

# jsp - 显示标签如何工作？

> ID：10247816
> 
> 赞同：0
> 
> 时间：2012-04-20T14:03:39.230
> 
> 标签：jsp, jsp-tags, displaytag

我有一个页面，我正在其中上传一个 Excel 文件。如果它有错误，我会使用显示标签以表格格式显示这些错误。

在显示之前一切正常。但是，如果我必须对数据进行排序或导出，那么它会再次停止工作并重定向到没有任何数据的同一页面。

我猜对于每个操作（例如排序和导出）它都会访问数据库，因此在下一个请求时它没有显示任何数据，因为它没有获取文件名。

谁能解释我是对还是错？我是这个显示标签的新手。

这是我的 JSP 源代码：

```
</head>
<body>
    <form:form id="formAdd" method="post" action="locationSave.do"
        commandName="location">
        <form:hidden path="id" />
        <form:hidden path="isDeleted" />
        <form:hidden path="remarks" />
        <form:hidden path="status" />
        <form:hidden path="updatedDt" />
        <input type="hidden" value="${locationCodes}" id="codes">

        <table style="width: 1000px; border:0; cellspacing:1; cellpadding=0; class=table_border; align :center;">
        <tr>
            <td colspan="6" class ="H1">
                Location Master
            </td>
        </tr>
        <tr>
            <td colspan="6" class="H2">
                Add Location
            </td>
        </tr>       
        <tr>
                <td style="width: 16%;" class ="tdheader_left"><form:label path="code">
                        <spring:message code="label.loccode" />
                    </form:label></td>
                <td style="width: 16%;" class="tdheader_textbox"><form:input
                        path="code" accesskey="o" cssClass="input" size="7" maxlength="5"
                        id="code" /></td>

                <td style="width: 16%;" class ="tdheader_left"><form:label path="name">
                        <spring:message code="label.locname" />
                    </form:label></td>
                <td style="width: 16%;" class="tdheader_textbox"><form:input
                        path="name" accesskey="n" class="input" maxlength="20" size="25"
                        id="name" /></td>

                <td style="width: 16%;" class ="tdheader_left"><form:label path="locGrp">
                        <spring:message code="label.locGrp" />
                    </form:label></td>
                <td style="width: 16%;" class="tdheader_dropdown"><form:select accesskey="g"
                        path="locGrp.id" class="input" id="grpId">
                        <form:option value="-1" label="--- Select ---" />
                        <form:options items="${locGrp}" />
                    </form:select></td>
            </tr>
            <tr>
                <td  colspan="6" align="center" class="H1">
                <input id="save" accesskey="s" type="submit" value="Save"/> 
                <input id="reset" accesskey="r" type="reset" value="Reset" /> 
                <input type="button" accesskey="c" value="Cancel" onclick="window.location = 'location.do';" /> 
                <input type="button" id="upload_file"
                    accesskey="a" value="Upload File"
                     /></td>
            </tr>
        </table>
    </form:form>

    <div id="formUpload" style="text-align:center;display:block;">
    <form:form id="formFile" method="post" action="locationFileUpload.do" commandName="file" enctype="multipart/form-data">
        Please select a file to upload : <input type="file" name="file" />
        <input type="submit" value="upload" id="success" />
        <c:if test="${locErrorList != null}">
    <div id="uploaderror">
    Following locations could not be uploaded 
        <display:table uid="2" name="locErrorList" class="displaytag" id="locError" pagesize="10"  excludedParams="*" requestURIcontext="true" 
            defaultorder="ascending" requestURI="locationFileUpload.do" export="true" >
            <display:column property="code" sortable="true" title="Location Code" headerClass="sortable" />
            <display:column property="name" sortable="true" title="Location Name" headerClass="sortable" />
            <display:column  property="error" sortable="true" title="Reason For Failure" headerClass="sortable" />        
    </display:table>
    </div>
    </c:if>
        </form:form>

        </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T08:24:06.907

displaytag 生成的排序和分页链接与显示表格的请求中发送的请求参数相同。因此，如果您使用请求参数`foo=1`和发布表单`bar=2`，并显示一个表格作为此请求提交的结果，生成的链接将具有如下所示的 href：

```
<a href="theRequestURI?foo=1&bar=2&d-..."> 
```

因此，当您单击链接时，您将向服务器发送一个新请求，该请求应使用发送的参数来取回要显示的数据列表并使 JSP 可以访问它们。JSP 中的显示标记将重新生成表格，并使用特定于显示标记的参数（以 开头的参数`d-`）对数据进行排序并仅显示适当的页面。

# spring - 如何在 Spring 3 配置文件中指定模式验证 元素？

> ID：10247822
> 
> 赞同：0
> 
> 时间：2012-04-20T14:04:08.560
> 
> 标签：spring, jaxb

我选择在我的项目中使用 Spring Jaxb2Marshaller 来支持 JAXB，但是我无法在 element 中指定模式文件`oxm:jaxb2-marshaller`，我发现只有一个 contextPath 属性，没有关于模式的任何内容。

我必须使用旧的 Jaxb2Marshaller 配置样式（使用`beans:bean`元素）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:43:23.813

该类`Jaxb2Marshaller`有一个模式属性，试试这个代码示例。

```
<bean id="jaxbMarshaller" class="org.springframework.oxm.jaxb.Jaxb2Marshaller">
        <property name="classesToBeBound">
            <list>
                <value>my.package.ResponseObj</value>
            </list>
        </property>
        <!-- Possibly include schema for validation -->
        <property name="schema" value="classpath:schema.xsd"/>
</bean> 
```

**编辑：** 我认为您不能使用新的 OXM 应答器直接在配置文件中指定 XML 模式。在[OXM XSD](http://www.springframework.org/schema/oxm/spring-oxm-3.1.xsd)中没有 xml 元素或属性。但是您可以直接在“要绑定的类”中使用新的 @XmlSchema 注释。看看这个[文档](http://jaxb.java.net/jaxb20-ea/docs/api/javax/xml/bind/annotation/XmlSchema.html)。

# jsf-2 - 无法应用适用于丰富的自定义 css：dataTable 头类

> ID：10247833
> 
> 赞同：0
> 
> 时间：2012-04-20T14:05:06.573
> 
> 标签：jsf-2, richfaces

我正在研究带有richfaces 4的JSF 2.0示例项目。问题是richfaces皮肤未应用于组件。

我想为 Richdatatable 的 HeaderClass 使用自定义 css，但我无法证明这一点。只有内置的 css 应用于标题。即使对于 columnClasses，如果我只使用这样的单个值： columnClasses="JspContentForDataTable ，它没有显示我必须为每列执行 columnClasses="JspContentForDataTable,JspContentForDataTable,JspContentForDataTable,JspContentForDataTable" 。

网页.xml：

```
 <context-param>
        <param-name>org.richfaces.skin</param-name>
        <param-value>ruby</param-value>
    </context-param>

    <context-param>
        <param-name>org.ajax4jsf.VIEW_HANDLERS</param-name>
        <param-value>com.sun.facelets.FaceletViewHandler</param-value>
    </context-param>

    <context-param>
        <param-name>org.richfaces.CONTROL_SKINNING</param-name>
        <param-value>disable</param-value>
    </context-param>

    <context-param>
     <param-name>org.richfaces.LoadStyleStrategy</param-name>
     <param-value>None</param-value>
</context-param>

    <context-param>
        <param-name>org.jboss.jbossfaces.WAR_BUNDLES_JSF_IMPL</param-name>
        <param-value>true</param-value>
    </context-param> 
```

如果我做错了什么，请纠正。帮助我提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T18:39:35.170

您的样式未应用于元素/组件的主要原因是样式表较早加载，然后被默认样式覆盖，要在运行时包含样式，您必须使用导入样式表标签

例如：-

`<h:outputStylesheet library="css" name="style.css" />`

请记住在页面的 < **h:head>**标记中包含声明。有关在运行时加载 css 的更详细说明，请参阅此链接

[包括使用 h:outputStyleet 的 css](http://www.mkyong.com/jsf2/how-to-include-cascading-style-sheets-css-in-jsf/)

好的，我想我找到了您的解决方法，试试这个，将 css 应用于您的自定义数据表时似乎存在一些问题。

将此语句包含在您的基本文件或当前页面中。

对于您添加的任何自定义组件，包括您包含在该组件中的基本丰富标签，这会导致您作为非渲染组件出现一些问题，并且它会正常工作。

例如：- 对于您当前的自定义标签，您可能正在使用的基本丰富组件是 rich:dataTable 权限，因此请在您使用该组件的文件中添加该组件，并使用**render="false "。**

像 < **rich:dataTable rendering="false"/>**这将解决您的问题，但不确定为什么会发生这种情况，但这应该可以解决问题。

# facebook - facebook评论中的网址无法访问

> ID：10247837
> 
> 赞同：1
> 
> 时间：2012-04-20T14:05:26.583
> 
> 标签：facebook, comments

作为主题，我尝试了很多方法，例如

1.  更改应用程序域和站点 url 但它不起作用
2.  [在https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fplayshare.net23.net%2Fplaylist.php%3Fid%3D550830884](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Fplayshare.net23.net%2Fplaylist.php%3Fid%3D550830884)进行调试， 它向我展示了

    > 必须修复的严重错误 URL 被阻止：无法抓取 URL，因为它已被阻止。

3.  添加一些opengraph标签，但它不起作用

在我的代码中

```
<fb:comments
href="http://playshare.net23.net/playlist.php?id=<?php echo $fid;?>"
num_posts="3"
width="720">
</fb:comments> 
<script src="http://connect.facebook.net/en_US/all.js#appId=360914253960714&amp;xfbml=1"></script> 
```

谁有解决方案请告诉我，非常感谢

# php - HTAccess URL Rewrite 影响 GET 变量

> ID：10247841
> 
> 赞同：0
> 
> 时间：2012-04-20T14:05:36.963
> 
> 标签：php, linux, wordpress, .htaccess

我们正在使用 wordpress，我们在 .htaccess 中有以下内容：

```
# BEGIN WordPress

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

我们有一个类似[http://subdomain.example.com/select-a-card/?q=fuel](http://subdomain.example.com/select-a-card/?q=fuel)的 URL ，我们想重写它，使它变成类似[http://subdomain.example.com/fuel-卡片/](http://subdomain.example.com/fuel-card/)

我需要在 htaccess 中添加什么来执行此操作？此外，这会影响使用 GET 变量运行的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:08:12.143

没什么，只需阅读 wordpress 手册并编辑您的设置。结帐[http://codex.wordpress.org/Using_Permalinks](http://codex.wordpress.org/Using_Permalinks)

- - 编辑

这可以做到，但前提是你有某种标准的 URL 标记，你想重写。IE。如果您只想重写 select-a-card url，或者仅使用类似[http://site.com/uri/?q=something](http://site.com/uri/?q=something)的语法重写 url 。但是，如果 url 的语法差异太大，您将不得不添加很多重写。

在这种特定情况下，这样的事情应该起作用：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    # add your specifics below:
    RewriteRule ^/select-a-card/\?q=(.*) $1-card/

    RewriteRule . /index.php [L]
</IfModule> 
```

# android - 安卓。无法打开复制到 SD 卡的数据库

> ID：10247845
> 
> 赞同：0
> 
> 时间：2012-04-20T14:05:39.583
> 
> 标签：android, sqlite

如果您能帮助我，我将不胜感激。我的问题是：我的应用程序使用 2 个表创建数据库。我正在尝试备份此数据库并将其复制到 sd。这在模拟器上工作得很好，但是当涉及到真实设备时，文件被复制，但无法在任何 SQLite 浏览器中打开。

复制代码在这里

```
 try {
        File sd = Environment.getExternalStorageDirectory();
        File data = Environment.getDataDirectory();

        if (sd.canWrite()) {
            String currentDBPath = getDatabasePath("fieldworker").getAbsolutePath();
            Toast.makeText(getApplicationContext(), currentDBPath, 2).show();
            String backupDBPath = "fieldworker";
            File currentDB = new File(currentDBPath);
            File backupDB = new File(sd, backupDBPath);

            if (currentDB.exists()) {
                FileChannel src = new FileInputStream(currentDB).getChannel();
                Toast.makeText(getApplicationContext(), Long.toString(src.size()), 2).show();
                FileChannel dst = new FileOutputStream(backupDB).getChannel();
                dst.transferFrom(src, 0, src.size());
                src.close();
                dst.close();
            }
            else
            {
                Toast.makeText(getApplicationContext(), "Doesnt exist", 2).show();
            }
        }
    } catch (Exception e) {
    } 
```

创建表的代码

```
public DBSqlLiteHelper(Context context)
{
    super(context, DATABASE_NAME, null, 1);
}
@Override
public void onCreate(SQLiteDatabase db)
{
    db.execSQL(TABLE_WORKERS_CREATE);
    db.execSQL(TABLE_PERSONS_CREATE);
}
@Override
public void onUpgrade(SQLiteDatabase arg0, int arg1, int arg2) {
    // TODO Auto-generated method stub
    arg0.execSQL("DROP TABLE IF EXISTS " + TABLE_PERSONS);
    arg0.execSQL("DsROP TABLE IF EXISTS " + TABLE_WORKERS);
    onCreate(arg0);

}

 Toast.makeText(getApplicationContext(), Long.toString(src.size()) 
```

这显示了数据库的大小，这意味着文件实际上是被复制的

谢谢吉姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:29:05.217

对我来说，您的代码在模拟器和手机上都能正常执行。我敢打赌你的问题出在你的 SQLite 浏览器上。例如，SQLite Database Browser v2.0 是为 SQLite v2 设计的；Android 使用 SQLite v3 格式。尝试使用 Android SDK 中包含的 SQLite3 命令行工具打开复制的数据库。

# jsp - 我有一个 java ee 应用程序，我想从两个下拉列表中分配

> ID：10247847
> 
> 赞同：-1
> 
> 时间：2012-04-20T14:05:44.497
> 
> 标签：jsp, jakarta-ee

我有一个任务来创建一个能够为办公室分配导师的 java ee 应用程序，我有两个实体类，一个名为 Tutors.java，另一个名为 Offices.java。下拉列表填充但是当我想分配这两个值并点击提交按钮时，它会在 java bean 中的 server.allocateTutorOffice 处抛出一个空指针。我意识到问题出在服务器类上，但我不确定如何更改它来解决问题。

```
 TutorBean.java
    public void allocateTutorOffice(){
         server.allocateTutorOffice(tutor.getOfficeId(), tutor.getId());
         tutor = new Tutors();
        }

    TutorServer.java
       @Override
        public void allocateTutorOffice(Offices officeId, int Id) {

            Tutors t = manager.find(Tutors.class, Id);
            //Offices o = manager.find(Offices.class, officeId);
            e.setOfficeId(officeId);
            manager.merge(t);

        }

Staff maintence.jsp
     <c:choose>
     <c:when test="${not empty param.allocate}">
                  <fmt:parseNumber var="e" type="number" value="${param.e.id}" />
                  <fmt:parseNumber var="o" type="number" value="${param.o.id}" />
                  <c:set var="e" scope="request" value="${tutor.tutor}"/>
                  <c:set var="o" scope="request" value="${office.office}"/>
                  <jsp:setProperty name="e" property="officeId"/>
                  <% employee.allocateTutorOffice();%>

            </c:when>
 </c:choose>

  <h2> Allocate Office</h2>
     <jsp:useBean id="office" class="cmm502.cw.web.OfficesBean" scope="session"/>
        <form method="post" action="StaffMaintence.jsp">
        <table>
            <tr>
                <td>Employee Id:

                        <select>
                             <c:forEach var="e" items="${tutor.tutors}">
                            <option value="${t.id}">${t.id}</option>
                            </c:forEach>
                        </select>
                </td>

                      <td>Office Id:
                        <select>
                            <c:forEach var="o" items="${office.offices}">
                            <option value="${o.id}">${o.id}</option>
                            </c:forEach>
                        </select>

              <td>
                  <input type="hidden" name="id" value="${e.id}"/>
                  <input type="submit" name="allocate" value="allocate"/></td>
                 </tr>
                 </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:36:38.553

我认为对象“服务器”的类型是 TutorServer。请尝试通过执行 server = new TutorServer() 来实例化该对象，然后调用方法 allocateTutorOffice()。但是我觉得您正在从 bean 类调用业务功能，这不是一个好的设计。

# jquery - IE 8 在不同机器上的行为不同

> ID：10247850
> 
> 赞同：3
> 
> 时间：2012-04-20T14:05:54.237
> 
> 标签：jquery, css, html, internet-explorer-8

IE 8 在两台不同的机器上表现不同的原因是什么？

在这个网站上： [http ://www.activ-gmbh.de](http://www.activ-gmbh.de)

当您最大化其中一个幻灯片然后尝试再次最小化它时，“X”会消失，并且在一台机器上什么也没有发生。在另一台机器上，它甚至可以在 IE6 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T14:24:27.487

我有同样的问题，因为 IE8 到 IE7 的兼容模式是在 Intranet 网站上自动启用的（哦？！），所以我的 IE8 认为他是 IE7。如果这也是您的问题，请添加

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

在`head`您的 HTML 文档中。这将迫使 IE8 像 IE8 一样做出反应……谢谢 MS！

# java - Java中的映射和设置

> ID：10247852
> 
> 赞同：0
> 
> 时间：2012-04-20T14:06:04.373
> 
> 标签：java, hashmap, set, hashtable

在我当前的项目中，我需要以下类型的数据结构

```
Map<String, Map<String,Set<String>>, Set<subscriber>> 
```

据我所知，Java 不支持这种数据结构（如果我错了，请纠正我）。或者（你可以建议我“如何在 Java 中实现这种数据类型的数据结构）。

是否有任何第三方库支持上述数据结构和操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:07:41.597

地图是一个`key/value`对象，所以你不能有一个`Map<String, Map, Set>`开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T14:08:30.810

一个可能的解决方案是创建一个对象来容纳您的所有信息，然后制作一个带有键`String`和值的 Map`CustomObject`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T14:12:11.577

Java 不提供简单的“Pair”类，因此您需要编写一个包装类并在 Map 中使用它：

```
class Wrapper {
    public Map<String,Set<String>> myMap = new HashMap<String,Set<String>>();
    public Set<Subscriber> mySet = new TreeSet<Subscriber>();
}

Map <String, Wrapper> myMapOfWrappers = new HashMap<String, Wrapper>(); 
```

（`Wrapper`这里的类是一个简单的例子，你可以根据你的用例提供getter/setter等）

**编辑添加：**在我发布此内容的同时，您在问题下添加了评论。即使您接受它作为答案，您的评论说您正在寻找*两个 key*。你可能想重新考虑你是如何解决这个问题的。亚历克斯在他的例子中展示了你必须如何做到这一点。如果内容发生变化，使用可变数据作为 a 中的键`Map`会导致很多问题，而这正是他的所有代码所阻止的。实施`equals()`and`hashCode()`来防止这种情况通常并非易事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T14:20:36.793

If you really want maps to act as keys in your data structure, then I think this is what you want:

```
static Map<String,Set<String>> makeUnmodifiable(Map<String,Set<String>> m) {
  Map<String,Set<String>> map = new HashMap<String,Set<String>>();
  for (Map.Entry<String,Set<String>> entry : m.entrySet()) {
    map.add(entry.getKey(), Collections.unmodifiableSet(entry.getValue()));
  }
  return Collections.unmodifiableMap(map);
}

static class Pair {
  final String first;
  final Map<String,Set<String>> second;
  Pair(String first, Map<String,Set<String>> second) {
    this.first = first;
    this.second = second != null ? makeUnmodifiable(second) : null;
  }
  public void equals(Object o) {
    ...
  }
  public int hashCode() {
    ...
  }
}

Map<Pair,Set<Subscriber>> myMap; 
```

Note that you MUST override equals and hashCode in the custom Pair class in order for this to work properly.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T14:09:43.637

为什么不：

```
Map<String, Object[]> 
```

然后创建一个 2 长度的对象数组来保存你的`Map<String,Set<String>>`和`Set<subscriber>`

这有点骇人听闻，但这是一个解决方案

编辑：我喜欢自定义对象的想法，更好，更安全！

# c++ - C++ 将数据从 std::string 复制到 std::wstring

> ID：10247853
> 
> 赞同：1
> 
> 时间：2012-04-20T14:06:18.053
> 
> 标签：c++, windows, string, unicode, encoding

假设我有一个`std::string`，但数据以 UTF-16 编码。
我怎么能将该数据复制到 中`std::wstring`，而不是修改数据？

此外，我不能只使用`std::wstring`，因为我正在在线检索文本文件并检查`Content-Type`标题字段以确定编码。但`std::string`用于接收数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:29:41.213

```
std::wstring PackUTF16(const std::string & input)
{
    if (input.size() % 2 != 0)
        throw std::invalid_argument("input length must be even");
    std::wstring result(input.size() / 2, 0);
    for (int i = 0;  i < result.size();  ++i)
    {
        result[i] = (input[2*i+1] & 0xff) << 8 | (input[2*i] & 0xff); // for little endian
        //result[i] = (input[2*i] & 0xff) << 8 | (input[2*i+1] & 0xff); // for big endian
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:27:52.353

开始时有一个 BOM（字节顺序标记），然后您检查它以确定字节顺序。否则，最好知道字节顺序，即最低有效字节或最高有效字节排在第一位。如果您不知道字节顺序并且没有 BOM，那么您只需要尝试一种或两种并应用一些统计测试和/或涉及人工决策者 (HDM)。

假设这个 Little Endian 字节顺序，即最低有效字节在前。

然后对于每对字节，例如

```
w.push_back( (UnsignedChar( s[2*i + 1] ) << 8u) | UnsignedChar( s[2*i] ) ); 
```

其中`w`a `std::wstring`,`i`是宽字符 < 的索引`s.length()/2`,`UnsignedChar`是 a `typedef`,是保存数据的 a `unsigned char`, 8 是每个字节的位数, 即您必须假设或静态断言来自标头的是 8。`s``std::string``CHAR_BITS``<limits.h>`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T14:28:46.620

试试这个：

```
static inline std::wstring charToWide(const std::string & s_in)
{
    const char * cs = s_in.c_str();
    size_t aSize;
    if( ::mbsrtowcs_s(&aSize, NULL, 0, &cs, 0, NULL) != 0)
    {
      throw std::exception("Cannot convert string");
    }  
    std::vector<wchar_t> aBuffer(aSize);
    size_t aSizeSec;
    if (::mbstowcs_s(&aSizeSec, &aBuffer[0], aSize, cs, aSize) != 0)
    {
      throw std::exception("Cannot convert string");
    } 
    return std::wstring(&aBuffer[0], aSize - 1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:50:49.130

因此，您已将代表 UTF-16 编码字符串的一系列字节插入`std::string`. 大概您正在执行诸如反序列化表示 UTF-16 的字节之类的操作，并且用于检索要反序列化的字节的 API 指定了 std::string。我认为这不是最好的设计，但是您将处理将其转换为 wstring 的处理方式与处理将字节转换为浮点数或其他任何内容的处理方式相同；验证字节缓冲区，然后将其转换：

```
char c[] = "\0a\0b\xd8\x3d\xdc\x7f";
std::string buf(std::begin(c),std::end(c));
assert(0==buf.size()%2);
std::wstring utf16(reinterpret_cast<wchar_t const *>(buf.data()),buf.size()/sizeof(wchar_t));
// also validate that each code unit is legal, and that there are no isolated surrogates 
```

要记住的事情：

*   此转换假定 wchar_t 为 16 位，而大多数平台使用 32 位 wchar_t。
*   为了有用，您的 API 需要能够将 wchar_t 字符串视为 UTF-16，因为这是平台为 wchar_t* 指定的编码，或者因为 API 只是遵循该约定。
*   此强制转换假定数据与机器的字节序匹配。否则，您必须交换 wstring 中的每个 UTF-16 代码单元。在 UTF-16 编码方案下，如果初始字节不是 0xFF0xFE 或 0xFE0xFF 并且没有更高级别的协议，则 UTF-16 编码使用大端编码。
*   std::begin()、std::end() 和 string::data() 是 C++11

* * *

* UTF-16 实际上并不满足 C++ 语言对 wchar_t 编码的要求，但有些平台无论如何都会使用它。这会导致一些标准 API 出现问题，这些 API 应该处理代码点，但不能仅仅因为代表 UTF-16 代码单元的 wchar_t 不能代表所有平台的代码点。

* * *

这是一个不依赖于平台特定细节的实现，只需要 wchar_t 足够大以容纳 UTF-16 代码单元，并且每个 char 恰好容纳 UTF-16 代码单元的 8 位。但它实际上并没有验证 UTF-16 数据。

```
#include <string>
#include <cassert>

#include <iterator>
#include <algorithm>
#include <iostream>

enum class endian {
    big,little,unknown
};

std::wstring deserialize_utf16be(std::string const &s) {
    assert(0==s.size()%2);

    std::wstring ws;
    for(size_t i=0;i<s.size();++i)
        if(i%2)
            ws.back() = ws.back() | ((unsigned char)s[i] & 0xFF);
        else
            ws.push_back(((unsigned char)s[i]  & 0xFF) << 8);
    return ws;
}

std::wstring deserialize_utf16le(std::string const &s) {
    assert(0==s.size()%2);

    std::wstring ws;
    for(size_t i=0;i<s.size();++i)
        if(i%2)
            ws.back() = ws.back() | (((unsigned char)s[i] & 0xFF) << 8);
        else
            ws.push_back((unsigned char)s[i] & 0xFF);
    return ws;
}

std::wstring deserialize_utf16(std::string s, endian e=endian::unknown) {
    static_assert(std::numeric_limits<wchar_t>::max() >= 0xFFFF,"wchar_t must be large enough to hold UTF-16 code units");
    static_assert(CHAR_BIT>=8,"char must hold 8 bits of UTF-16 code units");
    assert(0==s.size()%2);

    if(endian::big == e)
        return deserialize_utf16be(s);
    if(endian::little == e)
        return deserialize_utf16le(s);

    if(2<=s.size() && ((unsigned char)s[0])==0xFF && ((unsigned char)s[1])==0xFE)
        return deserialize_utf16le(s.substr(2));
    if(2<=s.size() && ((unsigned char)s[0])==0xfe && ((unsigned char)s[1])==0xff)
        return deserialize_utf16be(s.substr(2));

    return deserialize_utf16be(s);
}

int main() {
    char c[] = "\xFF\xFE\x61\0b\0\x3d\xd8\x7f\xdc";
    std::string buf(std::begin(c),std::end(c)-1);
    std::wstring utf16 = deserialize_utf16(buf);
    std::cout << std::hex;
    std::copy(begin(utf16),end(utf16),std::ostream_iterator<int>(std::cout," "));
    std::cout << "\n";
} 
```

# asp.net-mvc - MVC 表面控制器和 Umbraco 当前节点

> ID：10247864
> 
> 赞同：3
> 
> 时间：2012-04-20T14:06:55.453
> 
> 标签：asp.net-mvc, umbraco

我正在尝试在表面控制器中编写一个子动作函数，该函数被宏调用以呈现 PartialView。

我需要在这个函数中访问我当前的页面属性，然后调整渲染的 PartialView。

我从 ubootstrap 上的 Jorge Lusar 代码中得到了这个，它在 HttpPost ActionResult 函数上运行良好：

```
var renderModel = (UmbracoRenderModel)ControllerContext.RouteData.DataTokens["umbraco"];
var currentPage = renderModel.CurrentNode.AsDynamic(); 
```

问题是我在**[ChildActionOnly] PartialViewResult**函数上抛出了这个错误：

```
Unable to cast object of type 'System.String' to type 'Umbraco.Cms.Web.Model.UmbracoRenderModel'.
on 'var renderModel = (UmbracoRenderModel)ControllerContext.RouteData.DataTokens["umbraco"];' 
```

DataTokens["umbraco"] 中的数据似乎在两个函数之间发生变化。如果我在每一个上**显示 DataTokens["umbraco"].ToString()**，会发生以下情况：

在**[ChildActionOnly] public PartialViewResult Init() -> "Surface"**显示。

在**[HttpPort] public HandleSubmit(myModel model) -> "Umbraco.Cms.Web.Model.UmbracoRenderModel"**上显示。

感谢您在这里的任何建议。

尼古拉斯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-06-05T16:40:35.207

我正在使用 Umbraco 6.0.4，它很简单：

```
var currentNode = Umbraco.TypedContent(UmbracoContext.PageId); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-26T09:39:45.107

当我们失去`uformpostroutevals`.

即使我试图发布这个值，通过从表单中获取它，由

`@using (Html.BeginUmbracoForm("<ActionName>", "<Controller Name>Surface"))`

我在 的所有属性中仍然有 null `UmbracoContext`，所以看起来它没有正确初始化。

**HOTFIX**：我将 CurrentNodeId 传递给我通过 Ajax 发送的每个表单：

在一般母版页中，我正在创建全局 javascript 对象：

```
<script type="text/javascript">
  var Global = {
    //..List of another variables which can be usefull of frontend
    currentNodeId: @CurrentPage.Id
  };
</script> 
```

在任何请求中，它都很容易`Global.currentNodeId`用作以下参数之一`data`：

```
var sendData = {
    currentNodeId: Global.currentNodeId,
    // another params 
};

$.ajax({
    method: 'POST',
    data: JSON.stringify(sendData),
    contentType: 'application/json; charset=utf-8',
    url: '/Umbraco/Surface/<ControllerName>Surface/<ActionName>',
    dataType: 'json',
    cache: false
}) 
```

**请注意，这只是一个热修复，而不是正确的解决方案！**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T11:31:30.517

要访问您的 currentPage，请在 Controller 中实现此构造函数

```
public class CommentSurfaceController : SurfaceController
{
    private readonly IUmbracoApplicationContext context;
    public CommentSurfaceController(IUmbracoApplicationContext context)
    {
        this.context = context;
    }
} 
```

它使用 umbracos 依赖注入，来解决 Context 依赖，并使其可供您使用。

查看 SurfaceController 上的文档 [https://github.com/umbraco/Umbraco5Docs/blob/5.1.0/Documentation/Getting-Started/Creating-a-surface-controller.md](https://github.com/umbraco/Umbraco5Docs/blob/5.1.0/Documentation/Getting-Started/Creating-a-surface-controller.md)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T22:49:29.410

虽然我更愿意找到一种更简单的方法，但我认为我找到了一个可行的解决方案。关键是区分操作方法是作为子操作（通常通过 HTTP GET）还是直接（通过 HTTP POST）调用的。

下面是一个自定义基类，它公开了一个“CurrentContent”属性，然后可以通过继承表面控制器来使用。

```
using System.Web.Mvc;
using Umbraco.Cms.Web;
using Umbraco.Cms.Web.Surface;
using Umbraco.Cms.Web.Model;

namespace Whatever
{
    public abstract class BaseSurfaceController : SurfaceController
    {
        private object m_currentContent = null;

        public dynamic CurrentContent
        {
            get
            {
                if (m_currentContent == null)
                {
                    if (Request.HttpMethod == "POST")
                    {
                        m_currentContent = GetContentForSubmitAction();
                    }
                    else
                    {
                        m_currentContent = GetContentForChildAction();
                    }
                }
                return m_currentContent;
            }
        }

        // from Lee Gunn's response
        // http://our.umbraco.org/forum/core/umbraco-5-general-discussion/29178-In-a-controller-how-do-I-get-the-current-pages-hiveId?p=2

        private object GetContentForChildAction()
        {
            ViewContext vc = ControllerContext.RouteData.DataTokens[
                    "ParentActionViewContext"] as ViewContext;
            var content = vc.ViewData.Model
                    as global::Umbraco.Cms.Web.Model.Content;
            return content.AsDynamic();
        }

        // from Nicholas Ruiz
        // http://our.umbraco.org/forum/core/umbraco-5-general-discussion/30928-Surface-Controller-and-Current-Node-Properties

        private object GetContentForSubmitAction()
        {
            UmbracoRenderModel rm =
                    ControllerContext.RouteData.DataTokens["umbraco"] as UmbracoRenderModel;
            if (rm == null)
            {
                return GetContentForChildAction();
            }
            return rm.CurrentNode.AsDynamic();
        }
    }
} 
```

尽管如此，似乎应该有一种更简单的方法来做到这一点。

布莱恩

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T15:45:49.333

```
var currentNode = Umbraco.TypedContent(UmbracoContext.PageId); 
```

或者，如果您在表面控制器中有对象

```
var currentNode = CurrentPage; 
```

（转到定义）

```
 //
 // Summary:
 //     Gets the current page.
 protected virtual IPublishedContent CurrentPage { get; } 
```

确保首先检查 null，因为在某些情况下您可以在没有解析 currentPage 上下文的情况下调用操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-14T05:16:45.663

在 Umbraco 7.2.1 中，我使用 ChildActionOnly 属性并将模型从父级传递给局部视图。

```
 [ChildActionOnly]
    public ActionResult InitializeDataJson(KBMasterModel model)
    {
        var pluginUrl = string.Concat("/App_Plugins/", KBApplicationCore.PackageManifest.FolderName);
        bool isAuthenticated = Request.IsAuthenticated;
        IMember member = null;
        if (isAuthenticated)
            member = UmbracoContext.Application.Services.MemberService.GetByUsername(User.Identity.Name);
        var data = new { CurrentNode = model.IContent, IsAuthenticated = isAuthenticated, LogedOnMember = member, PluginUrl = pluginUrl };
        var json = JsonConvert.SerializeObject(data, Formatting.None, new JsonSerializerSettings() { ReferenceLoopHandling = ReferenceLoopHandling.Ignore });
        var kbData = new TLCKBData() { InitializationJson = json };
        return PartialView(kbData);
    } 
```

现在部分视图代码：

```
@model TLCKBData
<script>
    (function () {
        var data = JSON.parse('@Html.Raw(Model.InitializationJson)');
        tlckb.init(data);
    })();
</script> 
```

以及呈现子操作的父视图：

```
@section FooterScript {
    @{Html.RenderAction("InitializeDataJson", "KBPartialSurface", new { model = Model });}
} 
```

注意：我正在使用强模型，因为我已经为我正在开发的插件路由劫持了我的所有文档类型，但是如果我正在路由劫持并且只使用 UmbracoTemplatePage 模型（在 Umbraco 中默认），那么我将更改我的子操作的参数只取 RenderModel 或 UmbracoTemplatePage。

然后我会以同样的方式将模型传递给它。

因为它是表面控制器上的子动作，所以已经在 Index 中加载的模型只是传递给子动作。这可以防止 GetContent 代码在管道中运行两次。

我这样做的原因是我需要一些基本数据来初始化我的 Angular API 层。比如它是否经过身份验证，登录成员是谁等。最终我在那里有一些标签，类别等。

我还想尽可能高效地构建插件，并且没有多余的逻辑。我认为所有信息都在主视图模型上，为什么我必须再次查找它？就在那时，我想出了如何做到这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-02-22T11:26:37.897

这是帮助我克服这个问题的东西。

在 jquery 包含后，我添加了一个自定义标题标签，如下所示。

```
 <script type="text/javascript">
        $.ajaxSetup({
            headers: { 'umbraco-page-id': '@CurrentPage.Id' }
        });
    </script> 
```

现在每个 jquery 帖子都会跨越当前的 umbraco 页面。您可以从请求标头属性访问此自定义标头。

# http - 在 Node.js HTTP 服务器上重用 TCP 连接

> ID：10247865
> 
> 赞同：6
> 
> 时间：2012-04-20T14:06:56.883
> 
> 标签：http, node.js, proxy, keep-alive

我正在使用`http.Server`默认`http`模块的对象（-> [API](http://nodejs.org/api/http.html)）。

如果客户端连接，`request`则服务器发出事件，并将`http.ServerRequest`对象传递给事件处理程序。该请求对象发出以下三个事件：

*   数据（传入数据）
*   结束（请求结束）
*   关闭（连接关闭）

我想保留客户端的初始（TCP）连接并将其重用于多个请求。客户端在发送“Connection: keep-alive”标头时支持此行为。

但是我如何使用 node.js 实现这一点？我的问题是，在第一个请求之后发出*结束*事件，就像官方 API 所说的那样：

> 每个请求只发出一次。之后，将不再在请求中发出“数据”事件。

好的，我不能使用那个请求。但是有什么方法可以在同一个 TCP 连接上工作并在其上创建一个新请求？

背景：我正在研究代理实现。如果用户访问使用[NTLM](http://www.innovation.ch/personal/ronald/ntlm.html)的网站，我必须坚持一个连接，以确保该类型身份验证所需的至少三个客户端请求不会遇到[此](http://www.benjaminathawes.com/blog/Lists/Posts/Post.aspx?ID=14)问题。

你知道我可以尝试什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:30:39.847

当我使用节点 v6.17 运行此代码时，它表明保持活动状态不起作用

```
function notifyNotKeptAlive(httpObject, eventName, httpObjectName){
    httpObject.on(eventName, function(socket){
        socket.on('close', function(){
                console.log("Yeeouch !  "+httpObjectName+" connection was not kept alive!");
        });
    });
}
var http=require('http');
var count=1;
var srv = http.createServer(function (req, res) {
    var secs;
    if ( (count%2)==1){secs=3;}
    else {secs=1;}
    console.log("Got http request #"+count+" so server waits "+secs+" seconds to respond");
    var countForThisClosure=count;
    setTimeout(function(){
        console.log("Waking up from sleep of "+secs);
        res.writeHead(200, {'Content-Type': 'text/plain'});
        if (secs===3){
            res.end('Visit #'+countForThisClosure+' costing a wait of '+secs+' seconds !!');
        } else {
            res.end('Visit #'+countForThisClosure+' costing a wait of '+secs+' seconds !!');
        }
    }, secs*1000);
    count++;
}).listen(8090);

notifyNotKeptAlive(srv, 'connection', 'http server');

for (var i=0;i<2;i++){
    var req=http.request( {'host': 'localhost', 'port':8090}, function (res) {
        res.setEncoding('utf8');
        res.on('data', function (chunk) {
            console.log('INCOMING <---' + chunk);
        });
        }
    );
    notifyNotKeptAlive(req, 'socket', 'http client');
    req.end();
} 
```

仅当我在 Epeli 提供的 http lib 源代码的第 1263 行添加了一个感叹号时，它才起作用。因此，下面的行“if (req.shouldKeepAlive){”应该改为“if (!req.shouldKeepALive){” res.on('end', function() {

```
if (req.shouldKeepAlive) {
      socket.removeListener('close', closeListener);
      socket.removeListener('error', errorListener);
      socket.emit('free');
    }
  }); 
```

此行位于从第 1113 行开始的 ClientRequest.prototype.onSocket 闭包中设置的 on 'end' 回调中。

此 http lib 源的链接是（与 Epeli 的相同）[https://github.com/joyent/node/blob/e8067cb68563e3f3ab760e3ce8d0aeb873198f36/lib/http.js#L889](https://github.com/joyent/node/blob/e8067cb68563e3f3ab760e3ce8d0aeb873198f36/lib/http.js#L889)

# c# - 关于.Net中的委托，`AsyncCallback`和`@object`的目的是什么

> ID：10247868
> 
> 赞同：3
> 
> 时间：2012-04-20T14:07:02.997
> 
> 标签：c#, .net, asynchronous, delegates

我知道在 C#（和 VB.Net）中，我可以创建一个委托，将其指向一个方法，然后使用该委托同步或异步运行我的方法。我知道该怎么做。

有时我使用委托来异步运行一个方法，有时这些方法有输入参数。为了异步运行我的方法，我调用委托`BeginInvoke`方法，提供我的输入参数，然后是“null，null”。

我提供“null, null”作为最后两个参数，尽管 Visual Studio 的智能感知建议我改为提供一个`AsyncCallback`名为 callback 的对象，后跟一个简单命名的对象`@object`，如下所示。

![图片](../Images/4150c2a658255ce0fed5e771d8466446.png)

什么是 an`AsyncCallback`以及它是如何使用的，`@object`智能感知建议的另一个名为的对象的目的是什么？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:09:47.723

`AsyncCallback`是充当回调函数的委托类型。

如果您将函数作为此参数传递，.Net 将在委托完成异步执行后调用您的回调。

第二个参数允许您将状态传递给 AsyncCallback，以便您的回调函数可以知道它来自什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:12:39.420

基本上 AsyncCallback 用于处理异步操作的结果。并且状态用于能够在异步和非异步环境之间传递对象（异步和非异步函数）

一个很好的例子是[Using an AsyncCallback Delegate to End an Asynchronous Operation](http://msdn.microsoft.com/en-us/library/ms228972.aspx)，其中进行异步调用以获取 Dns 信息（因此未定义术语操作执行和处理）

希望这可以帮助。

# spring - Spring RestTemplate Beginner：客户端发送的请求语法错误（）

> ID：10247869
> 
> 赞同：2
> 
> 时间：2012-04-20T14:07:04.067
> 
> 标签：spring, rest, resttemplate

我正在尝试访问可以使用 curl 进行测试的 Rest 资源，如果 id 的长度小于 11，例如 '12345' [https://somesite.com:7677/something/id/](https://somesite.com:7677/something/id/) { id} iam 从我的 java 代码和 curl 中得到 404 HTTP 错误，这是预期的

如果 id 的长度等于 11 并且它是无效的 id 则 iam 从 curl 和 java 获得相同的响应

但是，如果我给出 curl 已经存在的有效 id，我会得到正确的 json 响应，但是当我试图从 restTemplate 访问 Rest 资源时，它会显示如下所示的错误

> 客户端发送的请求在语法上是错误的 ()。并且此请求没有错误日志

从过去 2 天开始，我无法弄清楚，请提供您对此的想法，以便它对我真正有帮助 我的休息模板配置：

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
        <property name="messageConverters">
            <list>
                <ref bean="jsonHttpMessageConverter" />
            </list>
        </property>
    </bean> 
```

我试图访问的代码是

```
public List<Account> getAccounts(PersonNumber personNumber) {
        logger.warn("Inside getAccounts of TransferAgreement client");

        String url = "https://somesite.com:7677/something/id/12345";
        logger.warn("URL acessing "+personNumber.toString()+"  URL  "+ url);
       String a = restTemplate.getForObject(url, String.class);
       System.out.println(a);
        return null;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T13:04:32.200

假设您正在使用 Eclipse。

为 Spring 启用日志记录

*   将日志记录级别设置为 Spring 的调试或跟踪，请参阅[日志记录](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html#d0e743)
*   运行你的 java 例子
*   将日志记录输出添加到您的帖子中

我认为启用日志记录就足够了，我希望在 Spring 中出现异常。但另外，测试是否执行了请求：

*   设置代理，请参阅[how-to-trace-soap-message-in-eclipse-ide](http://www.mkyong.com/webservices/jax-ws/how-to-trace-soap-message-in-eclipse-ide/) - 不管它是 REST 还是 SOAP，它是一个 TCP/IP 监视器
*   运行你的 curl 示例
*   运行你的 java 例子
*   将这两个请求添加到您的帖子中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T21:46:15.977

你能设置你的开发环境，以便在 Spring 代码中设置调试断点吗？如果是这样，您可以在 AbstractHttpMessageConverter.write() 的最后一行设置断点。假设您可以在调试器在断点处暂停您的应用程序时评估 Java 表达式，您应该尝试获取 outputMessage.toString() 的结果，将其复制出 IDE，然后将其粘贴到文本编辑器中。这将向您显示 RestTemplate 正在发送的 JSON，因此您可以验证它是否与您通过 curl 发送的内容完全相同。

# php - CodeIgniter - 数据库结果数组，但只有一行

> ID：10247870
> 
> 赞同：3
> 
> 时间：2012-04-20T14:07:04.570
> 
> 标签：php, database, arrays, codeigniter, row

我正在寻找一种从数据库查询中返回数组的方法，但仅限于第一行。我宁愿不使用对象..

我目前的解决方案：

```
//Gather
$data = $this->db->from('view')->where('alias', $alias)->get()->result_array();

//Collect the first row only
$data = $data[0]; 
```

老实说，这很丑陋。如前所述，我宁愿不使用对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T14:10:12.203

请改用以下`row()`方法：

```
$data = $this->db->from('view')->where('alias', $alias)->get()->row(); 
```

[哦，你不想使用对象。`row_array()`然后。但考虑对象。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:10:51.900

你可以这样做：

```
$data = $this->db->from('view')->where('alias', $alias)->get()->row_array(); 
```

这与 minitech 的答案相同，只是它返回一个数组（如您所愿）而不是一个对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:15:04.670

您可以使用 row_array() 函数从单行中获取数据。将该行指定为参数。

例如，要获取结果的第一行，请执行以下操作：

```
$this->db->from('view')->where('alias', $alias)->get()->result_array(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T19:37:01.097

如果您只想将第一行作为数组获取，您也可以使用以下代码：

```
$data = $this->db->from('view')->where('alias', $alias)->get()->first_row('array'); 
```

但是如果你真的只想得到 1 个结果，总是使用 select('TOP 1 ....') 因为这个方法提高了你的查询返回时间性能。当您直接使用 get() 时，它会尝试返回整个数据，而不仅仅是第一行。然后它显示你想要的（第一行）。但是如果你使用 TOP 1 方法；这是最好的。

# bash - 从字符串中提取子字符串

> ID：10247871
> 
> 赞同：1
> 
> 时间：2012-04-20T14:07:06.070
> 
> 标签：bash, shell

我是 shell 编程的新手。

我有一个 db 连接的字符串表示形式，如下所示：

```
<user>:<password>@<host> 
```

我想从字符串中提取每个属性（用户、密码和主机）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:11:40.780

一种天真的方法是：

```
$ IFS=:@ read -a args <<< "<user>:<password>@<host>"
$ echo ${args[0]}
<user>
$ echo ${args[1]}
<password>
$ echo ${args[2]}
<host> 
```

显然，如果用户名或密码可以包含 ':' 或 '@' 字符，或者您的主机恰好是 IPv6 地址，这将不起作用；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:29:44.193

Bash 字符串操作可以按如下方式完成：

```
input="<user>:<password>@<host>"
colonPos=$(expr index "${input}" ':')
atPos=$(expr index "${input}" '@')
user=${input:0:$colonPos-1}
pass=${input:$colonPos:$atPos-$colonPos-1}
host=${input:$atPos}
echo -e "input: ${input}\nuser: ${user}\npass: ${pass}\nhost: ${host}" 
```

它也不适用于许多`:`和/或`@`，但你可以玩：

```
tmpStr="${input//[^\:]/}"
colonAmount=${#tmpStr}
tmpStr="${input//[^@]/}"
atAmount=${#tmpStr}
echo -e "colon(s) amount: ${colonAmount}\nat(s) amount: ${atAmount}" 
```

让我们尝试`if then elif else fi`使用这些`*Amount`变量在 bash 中开发您自己的解析器！

# google-sheets - Google表格中的公式，其中单元格等于一行中不为0的最后一个单元格

> ID：10247875
> 
> 赞同：0
> 
> 时间：2012-04-20T14:07:14.060
> 
> 标签：google-sheets, google-sheets-formula

您好，我正在寻找一个公式，使单元格等于一行中最后一个非 0 的数字。

我有一些指标，我正在使用 Google 表格来衡量和绘制图表。我们的主管正在输入他们上个月的指标数据。我目前有一个“仪表”列和每个月的列。我希望 Meter 字段等于导演记录信息的上个月，而不是他们在两个地方填充它，月份和仪表。我发现有些主管填写了月份并且没有更改仪表字段，所以我想让仪表字段自动等于他们输入数据的上个月。

我已经与我正在使用的工作表的这一部分共享了一张工作表，让你看看我是如何布置它的。

[https://docs.google.com/spreadsheet/ccc?key=0Ai_2YLvaQba0dHdCUVRiSTE4NWwwMGRrMHBQeE9QVkE](https://docs.google.com/spreadsheet/ccc?key=0Ai_2YLvaQba0dHdCUVRiSTE4NWwwMGRrMHBQeE9QVkE)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T01:24:52.007

我的解决方案：

```
=ArrayFormula(IF(LEN(A4:A);MMULT(C4:U*(COLUMN(C4:U4)=QUERY(VALUE(REGEXREPLACE(TRANSPOSE(SPLIT(CONCATENATE(REPT(ROW(A4:A)&CHAR(9)&COLUMN(C4:U4)&CHAR(10);(LEN(A4:A)>0)*(C4:U<>0)));CHAR(10)));"(.*)\t(.*)";{"$1","$2"}));"select max(Col2) group by Col1 label max(Col2) ''"));TRANSPOSE(SIGN(COLUMN(C4:U4))));IFERROR(1/0))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-06T03:11:13.453

这有点简单，并且总是会为您获取最后一个值：

```
=REGEXEXTRACT(SUBSTITUTE(join(";",C4:4),";0",),"^.*;(\d+|-\d+);+$") 
```

# c++ - 在 Visual Studio 2008 上使用 jsoncpp

> ID：10247878
> 
> 赞同：1
> 
> 时间：2012-04-20T14:07:24.937
> 
> 标签：c++, json, visual-studio, mfc

有人可以让我知道让 jsoncpp 库在 Visual Studio 2008 上工作的确切步骤。我对 Visual Studio 很陌生，所以不太了解如何去做，我想将 jsoncpp 用于 MFC 应用程序。我阅读了 jsoncpp 的自述文件，并在我的机器上安装了 python，但我仍然不清楚剩余的步骤。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T18:16:46.120

我最近为 jsoncpp 添加了 CMake 构建——将支持各种风格的 Visual Studio。

*   安装[CMake](http://www.cmake.org/files/v2.8/cmake-2.8.10.2-win32-x86.exe)
*   使用我的更新下载源：[https ://github.com/okigan/jsoncpp](https://github.com/okigan/jsoncpp)
*   并运行 bootstrap.bat 文件

Debug/Release 都将被构建并存储在 ./stage 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:47:32.247

不幸的是，jsoncpp README 文件没有将 Visual Studio 2008 列为受支持的版本。

但是，[vc90上的jsoncpp呢？](https://stackoverflow.com/questions/4125708/jsoncpp-on-vc90)有一个答案指出不需要使用 SCON，因为有人已经在“makefiles\vs71”目录中创建并包含了一个 Visual Studio 项目 (lib_json.vcproj)（它应该包含在您下载的 JSON 文件中）来自[http://sourceforge.net/projects/jsoncpp/](http://sourceforge.net/projects/jsoncpp/)）。

此 Visual Studio 项目适用于旧版本的 Visual Studio。但是，如果您在 Visual Studio 2008 中打开它，它应该可以很好地转换，此时您可以在 Visual Studio 2008 中构建它，然后您应该拥有项目所需的必要 .lib 文件。

# facebook - 将对象发布到 Facebook openGraph

> ID：10247883
> 
> 赞同：1
> 
> 时间：2012-04-20T14:07:41.267
> 
> 标签：facebook, facebook-opengraph

我正在尝试通过 opengraph 创建自定义对象并将其发布到 facebook 时间线。已按照开发人员 Facebook 上的教程进行操作。

我遇到了几个错误 - 第一个是如果我尝试以教程中建议的方式发布对象（使用 js SDK），我会收到以下错误消息：

**OG：(#3502) URL [http://markaprice.co.uk/2012dev/fb-ojects/dow.html](http://markaprice.co.uk/2012dev/fb-ojects/dow.html)上的对象具有 og:type 的“网站”。属性 'travel_goal' 需要 og:type 'mp-object-ns:travel_goal' 的对象**

（类型在元中正确设置）

做了一些研究，这似乎是由于同时的 http 请求，我读到的一个建议是你可以强制 openGraph 抓取页面，然后执行你的帖子以避免这个问题 -

我已经尝试过了，除了我现在遇到了一个不同的错误：

**scrape: (#803) 您请求的某些别名不存在：id=http:**

我在以下位置设置了一个非常粗略的工作示例：

[http://www.markaprice.co.uk/2012dev/fb-objects/dow.html](http://www.markaprice.co.uk/2012dev/fb-objects/dow.html)

请有人告诉我我做错了什么，因为我不确定接下来要尝试什么 - 非常感谢。

我的代码在这里：

```
// JavaScript Document
// first things first - make call to fb.init with app id to get initial authorisation 
window.fbAsyncInit = function () {
    FB.init({
        appId: 'xxxxxxxxxxxxxx',
        // App ID
        status: true,
        // check login status
        cookie: true,
        // enable cookies to allow the server to access the session
        xfbml: true // parse XFBML
    });
    // call function below
    getSocial()

};

// Load the SDK Asynchronously
(function (d) {
    var js, id = 'facebook-jssdk';
    if (d.getElementById(id)) {
        return;
    }
    js = d.createElement('script');
    js.id = id;
    js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    d.getElementsByTagName('head')[0].appendChild(js);
}(document));

function getSocial() {

    var elements = jQuery('.fb-ac-el-hd');

    // call to fb.getLoginStatus, and pass result tyo handleSessionResponse function 
    FB.getLoginStatus(handleSessionResponse);

    // bind login click to fb.login process, pass response to function, and get required permissions as parameters of fb.login method - the scope method is used to define the permissions sought
    $('#fb-login').bind('click', function () {
        FB.login(function (response) {
            handleSessionResponse(response);
        }, {
            scope: 'user_about_me, user_hometown, user_interests, user_activities, user_likes, user_birthday, user_photos, friends_likes, publish_actions'
        });

    });

    // bind logout to fb.logout, and pass response to handleSessionResponse 
    $('#logout').bind('click', function () {
        FB.logout(handleSessionResponse);

    });

    // disconnect from graphAPI completely, and revoke app authorisation - user needs to be offered the opportunity to 
    $('#fb-disconnect').bind('click', function () {
        FB.api({
            method: 'Auth.revokeAuthorization'
        }, function (response) {
            clearDisplay();
        });
    });

    // handle a session response from any of the auth related calls
    function handleSessionResponse(response) {
        console.log(response);
        // if we have a connect session run the getResponse function
        if (response.status === 'connected') {
            getResponse();
            // else run the clear display function, we no longer have auth to display the users information     
        } else {
            clearDisplay();
            return;
        }

    }

    // diagnostic - see what happens when shutting down machine etc
    FB.Event.subscribe('auth.authResponseChange', function (response) {
        console.log(response); // do something with response
    });

    function clearDisplay() {

        jQuery(elements).fadeOut();

        jQuery('#fb-login').fadeIn();

    }

    function getResponse() {

        // different, more flexible method of connection this time - fql.multiquery
        //can run multiple queries against the graphAPI to return data objects 
        FB.api({
            method: 'fql.multiquery',
            queries: {
                queryA: 'select name, first_name, pic_square, birthday, activities, movies, books, hometown_location FROM user WHERE uid=me()',
                queryB: 'select uid, page_id, type from page_fan WHERE uid=me() and page_id = "xxxxxxxxx"',
                queryC: 'select name, pic_square from user where uid in (select uid from page_fan where page_id ="xxxxxxxxxxx" and uid in (select uid2 from friend where uid1 = me()))'
            }
        }, function (response) {

            //disagnostic only - want to see the responses for now - no need for this in a live environment
            //for (var i = 0; i < response.length; i++) {
            //console.log(response[i]);
            //}

            if (!jQuery(elements).is(':visible')) {

                jQuery(elements).fadeIn();

            }

            // reference the first object returned - response[0].fql_result_set[0]
            var user = response[0].fql_result_set[0];

            var notGiven = "This Information is not provided by this user";

            var fbUname = 'Hello,' + user.first_name;

            jQuery('#fb-name').text(fbUname);

            // grab the users big pic
            var picture = user.pic_square;
            // inject it into the iterface 
            jQuery('.fb-pfl-pic').html('<img class=\"fb-pfl-img\" src="' + picture + '">');

            var likesAvios = response[1].fql_result_set[0];

            /// display appropriate result 
            if (likesAvios) {

            } else {

            }

            // friends list 
            var friendsList = $('#fb-friends-list');

            var noFriends = "At present none of your friends like Euro Miles. Why not recommend Euro Miles to them";

            var friendResults = response[2].fql_result_set;

            if (friendResults.length < 1) {

                friendsList.append(jQuery('<div class=\"fb-nf\">' + noFriends + '</div>'));

            } else {

                if (jQuery('div.frnd-grid-item').length < 1) {

                    for (i = 0; i < friendResults.length; i++) {

                        friendName = friendResults[i].name;
                        friendPic = friendResults[i].pic_square;
                        friendsList.append(jQuery('<div class=\"frnd-grid-item\"><img src=\"' + friendPic + '\"><div class=\"frnd-name\"> ' + friendName + '</div></div>'));

                    }

                }

            }

        }); // close api call

        jQuery('#fb-login').fadeOut();

    } // close function 

    jQuery('#postBtn').click(function () {

        postGoal();

    });

    function postGoal() {
        // set up the variables for the openGrapUrl
        var OG_NAMESPACE = 'mp-object-ns';
        var OG_ACTION = 'set';
        var OG_OBJECT = 'travel_goal';
        var siteURL = 'http://markaprice.co.uk/2012dev/fb-ojects/dow.html';
        var appid = '';

        var openGraphUrl = '/me/' + OG_NAMESPACE + ':' + OG_ACTION + '?' + OG_OBJECT + '=' + siteURL;

        // set up the scrape url
        var scrapeUrl = '/id=' + siteURL + '&scrape=true';

        function postFB() {
            // get the fb api to scrape the url first
            FB.api(scrapeUrl, 'post', function (response) {

                if (!response || response.error) {
                    console.log('scrape: ' + response.error.message);
                } else {
                    // once that is done, post the object out to to the api       
                    FB.api(openGraphUrl, 'post', function (response) {
                        if (!response || response.error) {
                            console.log('OG: ' + response.error.message);
                        } else {
                            console.log('Successful! Action ID: ' + response.id);
                        }
                    });
                }

            });

        } // close postFB
        var fbPost = setTimeout(postFB, 5000);

    } // closePostGoal

} // close getSocial function 
```

# wix - 解决 WixUI 背景图像缺乏透明度的最佳方法是什么？

> ID：10247889
> 
> 赞同：3
> 
> 时间：2012-04-20T14:08:07.340
> 
> 标签：wix

我正在使用带有几个自定义对话框的功能树 UI。其中之一有复选框。不能使这些复选框具有透明背景，这意味着我必须在我的背景图像中为默认背景颜色着色，以便复选框周围没有可见的框。

但是，不同版本的 Windows 有不同的默认颜色！如果我在 Windows 7 上匹配颜色，它在 XP 等上看起来很糟糕。由于背景图像是位图，我不能让它们透明。我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T16:31:05.883

来自[WiX 教程 UI 重温](http://wix.tramontana.co.hu/tutorial/user-interface-revisited/well-done)一章：

> 还有一个常见的抱怨：不，复选框不能有透明背景。如果你在背景中有一个位图，它会很丑，就像我们上面的例子一样。**唯一的解决方法是将复选框的宽度减小到实际框本身，并在其旁边放置一个额外的静态文本（这些可以设为透明）。**

这种解决方法有一个副作用，但是：为了打开和关闭复选框，您应该准确地单击框区域，而不是文本。与其他 Windows Installer UI 限制相比，这有点烦人 :-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-04T20:00:02.170

Windows 安装程序支持 32 位位图 (ARGB)，这意味着可以使位图透明以显示默认的 Windows 背景颜色。这意味着，一旦将您的（不透明）复选框放在顶部，您将不会看到文本周围的丑陋框，因为它是相同的颜色。

请注意，Windows 照片查看器和资源管理器中的缩略图预览不支持透明胶片，因此您必须构建并运行安装程序才能看到它工作 =D。

我使用 gimp 以透明方式导出到 BMP，它与 WIX 配合得很好。

# physics - 没有刚体的下落立方体

> ID：10247891
> 
> 赞同：1
> 
> 时间：2012-04-20T14:08:16.193
> 
> 标签：physics, unity3d, collision

我有一组 5x6 的立方体堆叠在一起。当立方体应该处于静止状态时，它们会非常轻微地抖动，从而产生弹跳效果。其中一些立方体会消失，上面的立方体会落入它们的位置。我知道我可以打开 Is Kinematic，或者冻结 X 和 Y，但是当我打开和关闭它们时，这会导致周围的立方体列略微倾斜。

有没有更好的方法可以让这些立方体保持在它们的列中而不会倾斜和抖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:25:32.297

尝试以下操作：

- 看看你是否使用物理材料，“金属”最适合你。

- 使箱子的重量更重

- 确保它们的碰撞框不重叠，您可以尝试将碰撞检测设置为连续，但请注意，这会使用更多的处理能力。

干杯!

# wamp - 启用 httpd-vhosts.conf 后 WAMP 服务器未运行

> ID：10247894
> 
> 赞同：12
> 
> 时间：2012-04-20T14:08:27.307
> 
> 标签：wamp, wampserver, httpd.conf

我尝试在我的 WAMP 安装上启用虚拟主机，但如果我启用 http-vhosts.conf，WAMP 服务器将不会运行，并且图标仍为橙色。

这是我的主机文件：

```
127.0.0.1       localhost
127.0.0.1       test.localhost 
```

我的 httpd.conf：

```
# Virtual hosts
Include conf/extra/httpd-vhosts.conf 
```

和我的 httpd-vhosts.conf：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
    DocumentRoot "c:/wamp/www"
    ServerName localhost
    ErrorLog "logs/localhost-error.log"
    CustomLog "logs/localhost-access.log" common
</VirtualHost>
<VirtualHost *:80>
    DocumentRoot "c:/wamp/www/test"
    ServerName test.localhost
</VirtualHost> 
```

如果我将 VirtualHosts 添加到我的 httpd.conf 中它工作正常，但我注意到如果我注释掉“包含 conf/extra/httpd-vhosts.conf”，Apache 服务器将不会运行。是什么导致了这个问题？

谢谢，

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-12T20:10:22.867

要确定发生错误的确切行，请执行以下步骤：

1.  转到开始菜单
2.  键入“命令”
3.  按回车
4.  粘贴以下内容`C:\wamp\bin\apache\apache2.2.22\bin\httpd.exe`

> 注意：您可能需要`apache2.2.22`根据本地版本的 Apache 调整路径部分。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-18T20:01:01.133

好吧，我觉得这是我的责任把这个...

我也疯狂地检查表格并做类似的事情

`Listen *:80`&`NameVirtualHost *:80`但发现这不是必需的，默认设置对我来说很好。

当我尝试放入我的虚拟主机声明时问题就开始了

```
<VirtualHost 127.0.0.1>
    DocumentRoot 'c:\wamp\www\media_weber_edu\public'
    ServerName media.weber.dev
    <Directory 'c:\wamp\www\media_weber_edu\public'>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride all
    <\Directory>
</VirtualHost> 
```

这就是问题所在

`<\Directory>`对比`</Directory>`

找到这个的巨大帮助正在运行`C:\wamp\bin\apache\apache2.2.22\bin\httpd.exe`

这给了我这样的错误

```
httpd.exe: Syntax error on line 469 of C:/wamp/bin/apache/apache2.2.22/conf/httpd.conf: Syntax error on line 42 of C:/wamp/bin/apache/apache2.2.22/conf/extra/httpd-vhosts.conf: Expected </\\Directory> but saw </VirtualHost> 
```

所以这可能不是确切的问题，但我希望这对未来的人有所帮助。所以深呼吸……把头发粘在头上……一切都会好的：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T10:56:53.003

**你只需要像这样改变它：一切都会好的。**

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost
#    DocumentRoot "c:/wamp/www"
    ServerName localhost
#    ErrorLog "logs/localhost-error.log"
#    CustomLog "logs/localhost-access.log" common
</VirtualHost>
<VirtualHost *:80>
#    DocumentRoot "c:/wamp/www/test"
#    ServerName test.localhost
</VirtualHost> 
```

**如果有人有目录错误，他可能需要修改它，如下所示：**

```
<VirtualHost 127.0.0.1>
#    DocumentRoot 'c:\wamp\www\media_weber_edu\public'
     ServerName media.weber.dev
#    <Directory 'c:\wamp\www\media_weber_edu\public'>
#        Options Indexes FollowSymLinks MultiViews
#       AllowOverride all
#    <\Directory>
</VirtualHost> 
```

注意：Apache 不允许多个`<Directory>`参数！

[![多个 <Directory> 参数错误截图：](../Images/35451349a311f84af45aeb2518250398.png)](https://i.stack.imgur.com/gm3ug.png)

# java - c和java之间的AES rijndael加密

> ID：10247896
> 
> 赞同：2
> 
> 时间：2012-04-20T14:08:32.557
> 
> 标签：java, c, cryptography, aes, mcrypt

我越来越疯狂地在 c 和 Java 之间加密/解密，但到目前为止，Java 中的加密字符串和 c 中的加密字符串看起来不一样。我已经研究过 base64 编码/解码，但是在疯狂地寻找 java 和 c 库之后，各自的 base64 结果看起来不同！我认为这是在 Java UTF16 字符串之间转换、在 java 中保存 Byte 或 AES 选项（128/256 密钥、PK5 填充或谁知道是什么）之间转换的问题，或者可能是终端的 UTF8 转换或上述的荒谬组合。到目前为止，我得到：

```
 user1@comp1:~/Desktop$ gcc AES.c /usr/lib/libmcrypt.a -lssl -lcrypto -lpthread
  user1@comp1:~/Desktop$ /usr/java/jdk1.6.0_25/bin/javac AES.java
  user1@comp1:~/Desktop$ ./a.out 
      Before encryption: test text 123
      After encryption: 49 -60 66 43 -8 66 -106 0 -14 -44 3 47 65 127 -110 117 
      After decryption: test text 123
  user1@comp1:~/Desktop$ java AES 
     Before encryption: test text 123
     After encryption: -110 21 23 59 47 120 70 -93 -54 -93 -12 -70 -91 83 -113 85 
     After decryption: test text 123 
```

我想我真的需要有人帮助我进行低级编码，下面分别是 Java 和 c 的代码：

```
import java.security.MessageDigest;
import java.util.Arrays;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;
import javax.crypto.spec.IvParameterSpec;

import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class AES {
  public static void main(String [] args) {
      try {
  String text = "test text 123";
  /*fixed here now it is 128 bits = 16 Bytes*/
  String encryptionKey = "E072EDF9534053A0";

  System.out.println("Before encryption: " + text);

  byte[] cipher = encrypt(text, encryptionKey);

  System.out.print("After encryption: ");
  for (int i=0; i<cipher.length; i++)
        System.out.print(new Integer(cipher[i])+" ");
  System.out.println("");

  String decrypted = decrypt(cipher, encryptionKey);

  System.out.println("After decryption: " + decrypted);

      } catch (Exception e) {
  e.printStackTrace();
      } 
  }

  public static byte[] encrypt(String plainText, String encryptionKey) throws Exception {
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding", "SunJCE");
      SecretKeySpec key = new SecretKeySpec(encryptionKey.getBytes("UTF-8"), "AES");
      cipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(new byte[cipher.getBlockSize()]));
      return cipher.doFinal(plainText.getBytes("UTF-8"));
  }

  public static String decrypt(byte[] cipherText, String encryptionKey) throws Exception{
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding", "SunJCE");
      SecretKeySpec key = new SecretKeySpec(encryptionKey.getBytes("UTF-8"), "AES");
      cipher.init(Cipher.DECRYPT_MODE, key,new IvParameterSpec(new byte[cipher.getBlockSize()]));
      return new String(cipher.doFinal(cipherText),"UTF-8");
  }
  } 
```

和

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <mcrypt.h>

#include <math.h>
#include <stdint.h>
#include <stdlib.h>

int main()
{
MCRYPT td, td2;
const char * plaintext = "test text 123";
int i;
char *key; /* created using mcrypt_gen_key */
char *IV;
char * block_buffer;
int blocksize;
int keysize = 16; /* 128 bits == 16 bytes */
size_t* sizet;

key = calloc(1, keysize);

/*below dirty trick to be sure the entire key has been padded with \0's */
strcpy(key, "E072EDF9534053A0");
memset(key, '\0', sizeof(key));
strcpy(key, "E072EDF9534053A0");

/*  MCRYPT mcrypt_module_open( char *algorithm, char* algorithm_directory, char* mode, char* mode_directory);
 * This function normally returns an encryption descriptor, or MCRYPT_FAILED on error. 
 */
td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
/*we need two encryption descriptors td and td2 for decryption*/
td2 = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);

blocksize = mcrypt_enc_get_block_size(td);
block_buffer = calloc(1, blocksize);
/*below to be sure the entire block_buffer has been padded with \0's */
memset(block_buffer, '\0', blocksize);

IV = malloc(mcrypt_enc_get_iv_size(td));
if ((block_buffer == NULL) || (IV == NULL)) {
fprintf(stderr, "Failed to allocate memory\n");
exit(EXIT_FAILURE);
}
for (i = 0; i < mcrypt_enc_get_iv_size(td); i++) {
IV[i] = 0;
}
/*as we can see both td and td2 get same key and IV*/
mcrypt_generic_init(td, key, keysize, IV);
mcrypt_generic_init(td2, key, keysize, IV);

memset(block_buffer, '\0', sizeof(plaintext));
strcpy(block_buffer, plaintext);

printf("Before encryption: %s\n", block_buffer);
mcrypt_generic (td, block_buffer, blocksize);

printf("After encryption: ");
for (i=0; i < blocksize; i++)
    printf("%d ", block_buffer[i]);
printf("\n");

mdecrypt_generic (td2, block_buffer, blocksize);
printf("After decryption: %s\n", block_buffer);

/* deinitialize the encryption thread */
mcrypt_generic_deinit (td);
mcrypt_generic_deinit(td2);
/* Unload the loaded module */
mcrypt_module_close(td);
mcrypt_module_close(td2);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-20T14:31:51.823

## 概括

解决所有问题后，我得到：

```
$ ./a.out
==C==
plain:   test text 123
cipher:  16 -124 41 -83 -16 -123 61 -64 -15 -74 87 28 63 30 64 78 
decrypt: test text 123

$java AES
==JAVA==
plain:   test text 123
cipher:  16 -124 41 -83 -16 -123 61 -64 -15 -74 87 28 63 30 64 78 
decrypt: test text 123 
```

请参阅下面的代码。

## 问题

1.  **密码错误：** AES 是*Rijndael-128*，这是 Java 加密使用的。但是，您的 C 代码指定*Rijndael-256*，它不是 AES。来自[Mcrypt 文档](http://mcrypt.sourceforge.net/)：

    > Rijndael [...] AES 如果在 128 位模式下使用

    请记住，当将密码称为 CIPHER-XXX 时，XXX 指的是块大小，而不是密钥长度。事实上，Rijndael-128 将接受 128、192 和 256 位的密钥。然而，AES 严格指 128 位 Rijndael。[您将在通常的地方](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)找到更多信息。

2.  **不正确的内存初始化：**您没有在 C 中正确初始化内存，这会导致消息结尾和块限制之间的字节未定义。

3.  **不正确的填充：**您`PKCS5Padding`在 java 代码中指定，但没有在 C 中适当地填充明文。PKCS5 实际上非常简单，并且在[wiki](http://en.wikipedia.org/wiki/Padding_(cryptography))上描述得很好。要使用 PKCS#5 进行填充，只需确保每个填充字节等于填充的总长度：

    ```
    ... | DD DD DD DD DD DD DD DD | DD DD DD DD 04 04 04 04 |
    ... | DD DD DD DD DD DD DD DD | DD DD DD DD DD 03 03 03 |
    ... | DD DD DD DD DD DD DD DD | DD DD DD DD DD DD 02 02 |
    etc... 
    ```

    其中 DD 是数据字节。还有其他填充方法，在[别处解释](http://www.di-mgt.com.au/cryptopad.html)。

4.  **不正确的密钥处理：**您从十六进制编码字符串中提取 Java 程序的密钥，而在 C 程序中，您直接将十六进制字符串作为密钥。您必须一致地处理您的密钥，以便两个程序提供相同的输出。

5.  **两边都有不同的初始化向量：两边**都需要相同的初始化向量。随机生成您的 IV 是正确的。然后应该将 IV 与密文一起传递，以便在另一侧进行解密。IV不应重复使用。

## 示例程序

以下内容可在[github 上找到](https://gist.github.com/2436364)

```
import java.security.MessageDigest;
import java.util.Arrays;
import javax.crypto.KeyGenerator;
import javax.crypto.SecretKey;
import javax.crypto.spec.SecretKeySpec;
import javax.crypto.spec.IvParameterSpec;

import javax.crypto.Cipher;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;

public class AES {
  /*
   * Please realise that the following IV is terrible.
   * (As easy to crack as ROT13...)
   * Real situations should use a randomly generated IV.
   */
  static String IV = "AAAAAAAAAAAAAAAA";
  /* 
   * Note null padding on the end of the plaintext.
   */
  static String plaintext = "test text 123\0\0\0"; 
  static String encryptionKey = "0123456789abcdef";
  public static void main(String [] args) {
    try {

      System.out.println("==JAVA==");
      System.out.println("plain:   " + plaintext);

      byte[] cipher = encrypt(plaintext, encryptionKey);

      System.out.print("cipher:  ");
      for (int i=0; i<cipher.length; i++){
        System.out.print(new Integer(cipher[i])+" ");
      }
      System.out.println("");

      String decrypted = decrypt(cipher, encryptionKey);

      System.out.println("decrypt: " + decrypted);

    } catch (Exception e) {
      e.printStackTrace();
    } 
  }

  public static byte[] encrypt(String plainText, String encryptionKey) throws Exception {
    Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding", "SunJCE");
    SecretKeySpec key = new SecretKeySpec(encryptionKey.getBytes("UTF-8"), "AES");
    cipher.init(Cipher.ENCRYPT_MODE, key,new IvParameterSpec(IV.getBytes("UTF-8")));
    return cipher.doFinal(plainText.getBytes("UTF-8"));
  }

  public static String decrypt(byte[] cipherText, String encryptionKey) throws Exception{
    Cipher cipher = Cipher.getInstance("AES/CBC/NoPadding", "SunJCE");
    SecretKeySpec key = new SecretKeySpec(encryptionKey.getBytes("UTF-8"), "AES");
    cipher.init(Cipher.DECRYPT_MODE, key,new IvParameterSpec(IV.getBytes("UTF-8")));
    return new String(cipher.doFinal(cipherText),"UTF-8");
  }
} 
```

和 C 文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/*
 * MCrypt API available online:
 * http://linux.die.net/man/3/mcrypt
 */
#include <mcrypt.h>

#include <math.h>
#include <stdint.h>
#include <stdlib.h>

int encrypt(
    void* buffer,
    int buffer_len, /* Because the plaintext could include null bytes*/
    char* IV, 
    char* key,
    int key_len 
){
  MCRYPT td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
  int blocksize = mcrypt_enc_get_block_size(td);
  if( buffer_len % blocksize != 0 ){return 1;}

  mcrypt_generic_init(td, key, key_len, IV);
  mcrypt_generic(td, buffer, buffer_len);
  mcrypt_generic_deinit (td);
  mcrypt_module_close(td);

  return 0;
}

int decrypt(
    void* buffer,
    int buffer_len,
    char* IV, 
    char* key,
    int key_len 
){
  MCRYPT td = mcrypt_module_open("rijndael-128", NULL, "cbc", NULL);
  int blocksize = mcrypt_enc_get_block_size(td);
  if( buffer_len % blocksize != 0 ){return 1;}

  mcrypt_generic_init(td, key, key_len, IV);
  mdecrypt_generic(td, buffer, buffer_len);
  mcrypt_generic_deinit (td);
  mcrypt_module_close(td);

  return 0;
}

void display(char* ciphertext, int len){
  int v;
  for (v=0; v<len; v++){
    printf("%d ", ciphertext[v]);
  }
  printf("\n");
}

int main()
{
  MCRYPT td, td2;
  char * plaintext = "test text 123";
  char* IV = "AAAAAAAAAAAAAAAA";
  char *key = "0123456789abcdef";
  int keysize = 16; /* 128 bits */
  char* buffer;
  int buffer_len = 16;

  buffer = calloc(1, buffer_len);
  /* 
   * Note that calloc() will null-initialise the memory. (Null padding)
   */

  strncpy(buffer, plaintext, buffer_len);

  printf("==C==\n");
  printf("plain:   %s\n", plaintext);
  encrypt(buffer, buffer_len, IV, key, keysize); 
  printf("cipher:  "); display(buffer , buffer_len);
  decrypt(buffer, buffer_len, IV, key, keysize);
  printf("decrypt: %s\n", buffer);

  return 0;
} 
```

使用最新的 Libmcrypt 和 Java 1.7 在 Linux 上进行测试。注意，因为我写的 C 很仓促，而且它充满了内存泄漏和溢出问题。（正如他们所说，练习留给读者清理它......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T15:32:18.080

除了@brice 的标志，我看不到您在Java 代码中初始化IV 的位置。您创建了一个“IvParameterSpec”，但传入了一个全零字节数组。

您的 C 代码会生成一个随机 IV，因此每次运行时都应生成不同的密文。

尝试对两种实现都使用固定的 IV，看看这是否会给您带来一致的结果。当然，当您想要进行真正的加密时，您需要再次生成随机 IV，但使用固定 IV 可能有助于您进行调试。

我还要确保两个实现都使用相同的填充（通过显式设置填充而不是让 mcrypt 选择），而不是将原始密文写入控制台，我强烈建议写入十六进制值，或者只写入每个字节作为一个数字 - 当您不必担心不可打印的字符时，调试起来会容易得多。这仅用于调试，因此看起来效率不高或不愉快都没关系。

# dapper - 衣冠楚楚，状况良好

> ID：10247899
> 
> 赞同：17
> 
> 时间：2012-04-20T14:08:51.903
> 
> 标签：dapper, sqlexception

使用 Dapper，以下抛出`Incorrect syntax near ','`.

```
const string sql = 
    "select * from ZipToZipDistance z where z.NoRouteFound = 0" +
    " and z.OriginZip in (@zips) or z.DestZip in (@zips)";
var zipStrings = zips.Select(x => x.ToString()).ToArray();
var result = connection.Query<ZipToZipDistance>(sql, 
    new { zips = zipStrings }); 
```

嗯，SQL 没有逗号。它必须与参数有关。 `OriginZip`并且`DestZip`是`varchar(10)`。 `zips`是`IEnumerable<int>`。我尝试使用`zips`作为参数而不转换为字符串。同样的错误。

看起来非常简单。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T14:21:04.943

尝试：

```
const string sql = 
const string sql = 
    "select * from ZipToZipDistance z where z.NoRouteFound = 0" +
    " and z.OriginZip in @zips or z.DestZip in @zips";
var zipStrings = zips.Select(x => x.ToString());
var result = connection.Query<ZipToZipDistance>(sql, 
    new { zips = zipStrings }); 
```

# java - 编译运行Java时如何设置TextMate使用的CLASSPATH

> ID：10247902
> 
> 赞同：0
> 
> 时间：2012-04-20T14:08:58.703
> 
> 标签：java, classpath, textmate

使用 TextMate，我可以通过按`Cmd`-在当前编辑器窗口中编译和运行 Java 类`R`（在调试简单代码时很实用）。

如何修改 TextMate 使用的 CLASSPATH 来编译和运行代码，以便可以使用外部库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:11:25.060

在 TextMate 1.5 中，在 Preferences 下，有一个 Advanced Preferences 窗格。那有三个标签；第二个是“Shell 变量”。您可以在其中设置 TextMate 将使用的 CLASSPATH。

# facebook - Facebook API：我们能单独知道点赞、帖子、分享、评论的数量吗？

> ID：10247906
> 
> 赞同：0
> 
> 时间：2012-04-20T14:09:12.100
> 
> 标签：facebook, facebook-graph-api

我们能否通过 Facebook API 了解每天的点赞数、评论数、我们帖子的分享数以及用户在我们的页面上发布的帖子数？不是所有这些的总和，而是每个单独的总和。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:42:39.133

您可以使用 FQL 查询您的应用或页面的洞察数据。请参阅[文档和可用指标列表](https://developers.facebook.com/docs/reference/fql/insights/)。

`page_fan_adds`每天都会为您提供一个页面（`application_like_adds`对于应用程序）的新粉丝。`page_like_adds`，`page_comments_adds`并且`page_wall_posts`已被弃用，因此您将不得不寻找其他一些指标来替换此信息。`page_stories`也许？

或者，您可以使用[Graph API](https://developers.facebook.com/docs/reference/api/#analytics)。

```
https://graph.facebook.com/APP_ID/insights/application_like_adds/day?access_token={ACCESS_TOKEN}&since=yesterday 
```

# biztalk - BizTalk - 为回车分隔的平面文件生成架构

> ID：10247928
> 
> 赞同：0
> 
> 时间：2012-04-20T14:10:35.887
> 
> 标签：biztalk, delimiter, biztalk-2010, flat-file

我正在尝试为一个平面文件生成模式，其内容由回车符分隔。请查看以下导入文件中的数据示例：

```
12042012  
TDF  
XYZ Industries Limited  
X9090-78900
-
3.4
-
NA
-
-
-  
-
-  
All telephone calls routed to a different no.  
tomorrow is critical. To have the  
documents ready for inspection.

12042012  
TDF  
XYZ Industries Limited
X9090-78900
-
.6
-
NA
-
-
-
-
-
Further prep re hearing/how inital costs  
estimate reached/emails to update XYZ,  
collation of docs fro tomorrow. 1735 - 1815
(-1). 
```

在上面的示例中有两条记录。每条记录由回车分隔。反过来，记录中的每个字段也由回车分隔。这一切都很好，但是当涉及到记录中的最后一个字段，即“描述”字段时，您会看到文本中有回车（因为它们是用户在源系统中输入的）。

这对我来说是个挑战，我无法使用 BizTalk Server 2010 中提供的平面文件架构向导成功生成架构，从而使“描述”字段作为单个记录出现。因为当我放置 Line Carriage delimiter 时，它总是将描述行视为单独的记录。当我去验证架构时，它总是失败。有人可以指出我在这里可能做错了什么的正确方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T20:10:42.287

您对源系统有任何控制权吗？如果是这样，您可以在记录上设置转义字符。假设对转义字符使用反斜杠，那么描述字段将包含：

> 所有电话都转接到不同的号码。\
> 明天至关重要。准备好\
> 文档以供检查。\

# svn - 当我更新依赖仓库时自动更新依赖仓库

> ID：10247930
> 
> 赞同：1
> 
> 时间：2012-04-20T14:10:49.587
> 
> 标签：svn, version-control, version, updates, svn-externals

我们在开发项目的单独存储库中有大量常见的第三方程序集。这意味着偶尔（大约每月一次），当我们的一个项目中的某些代码调用程序集文件夹中较新的程序集版本中的方法时，可能会出现问题。如果我们可以在拉取开发项目的更新时获取公用文件夹来拉取更新，它将解决问题。我已经查看了 svn externals，但它似乎只在本地副本位于您的 repo 工作副本文件夹内的情况下工作，并且不会接受任何类型的相对路径。有谁知道实现这一目标的任何其他方法？

为了清楚起见，我们有两个单独的 repos 签出如下：

1.  F:\dev\common (https://svn/common)
2.  F:\dev\mynewproject (https://svn/mynewproject)

当我为 2 拉更新时，我想自动更新 1。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T10:56:54.183

1.  Subversion externals 可以链接到外部独立的 repo-URL
2.  如果在没有 PEG-revision 的情况下使用外部组件，链接存储库中的所有更改都将自动反映在主存储库的更新中

# iphone - 如何在 MKMapView (iPhone) 上隐藏精度圈

> ID：10247932
> 
> 赞同：1
> 
> 时间：2012-04-20T14:10:53.813
> 
> 标签：iphone, ios, gps, mkmapview

我注意到我的蓝点周围有一个环`MKMapView`，似乎代表了位置的准确性。我想把这个戒指藏起来，这可能吗？如果是这样，我怎样才能达到这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:13:25.967

我认为您必须创建自己的自定义注释并使用它而不是默认注释..

# memory-management - 何时释放 GObject？

> ID：10247938
> 
> 赞同：3
> 
> 时间：2012-04-20T14:11:29.757
> 
> 标签：memory-management, glib, gobject

何时取消引用 GObject 以及何时释放它？[GObject 教程](http://developer.gnome.org/gobject/stable/howto-gobject-destruction.html)指出 GObject 应该是 unrefed**和**释放的，但是*当且仅当*它的 refcount 下降到 0时
， GObject 不应该真正释放自己吗？

 **** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T20:33:18.390

该教程描述了定制的 GObject 类应该如何以及何时释放其内部数据。`dispose`具体来说，方法和方法的区别`finalize`。

当你*创建*一个 GObject 时，你应该*只*取消引用它并且*永远不要*释放它，否则你将完全绕过引用计数系统并可能在其他地方导致崩溃。***

# c# - 使多个控件使用相同的工具提示消息（c# 客户端应用程序。）

> ID：10247940
> 
> 赞同：2
> 
> 时间：2012-04-20T14:11:39.983
> 
> 标签：c#, visual-studio-2010, tooltip, client-applications

当鼠标悬停在包含多个控件的区域上时，我希望显示相同的工具提示消息（在“myControlId 上的工具提示”字段中输入的消息）。我尝试将控件放在 Panel 和 GroupBox 内，但它仅在鼠标位于 Panel/GroupBox 的“空白”区域时有效，当然，当鼠标位于 Panel 内的控件上时不起作用/组框。

我来自网络开发世界，所以如果我以错误的方式解决这个问题，我愿意接受有关新方法的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:19:47.637

在标准 Windows 开发人员 (WindowsForms)中`tootltip`或`tooltip control`关联到单个控件。但是您可以使用 ToolTip 控件（参见示例如何：[ToolTip: Windows Forms .NET](http://www.dotnetperls.com/tooltip)）并分配给接收`mouseover`事件的所有控件。

如果你在`WPF`，故事会变得更容易，因为你有消息路由，所以通常在一个地方订阅就足够了。

希望这可以帮助。

# .net - 适合在.net中使用指针、不安全代码的要求？图像处理是否需要足够的资源来进行高端优化？

> ID：10247943
> 
> 赞同：0
> 
> 时间：2012-04-20T14:11:47.540
> 
> 标签：.net, pointers, image-processing, bitmap, unsafe

我们最近在 SO 上有几个线程（如下），其中一个常见的建议是不要使用指针。

[.net 中的固定块](https://stackoverflow.com/questions/10227577/fixed-block-in-net/10227693#comment13141490_10227693)

[在 .NET 中，使用指针作为函数参数或使用“ref”关键字有什么区别吗？](https://stackoverflow.com/questions/10229345/in-net-is-there-any-difference-between-using-pointers-as-function-parameters-or#comment13142353_10229345)

[.net 中的字符串是否被更改？有什么错误吗？](https://stackoverflow.com/questions/10230772/is-strings-in-net-get-changed-is-there-some-bug#comment13144880_10230772)

我最近需要将位图图像白色背景转换为透明。我试过了，我能想到的最优化的实现如下。

```
public unsafe Bitmap MakeWhiteAreaTransparent(Bitmap source)
{
    Bitmap bitmap = new Bitmap(source.Width, source.Height, PixelFormat.Format32bppArgb);
    BitmapData bitmapdata = source.LockBits(new Rectangle(0, 0, source.Width, source.Height), ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
    BitmapData data2 = bitmap.LockBits(new Rectangle(0, 0, bitmap.Width, bitmap.Height), ImageLockMode.WriteOnly, PixelFormat.Format32bppArgb);
    int* numPtr = (int*)bitmapdata.Scan0;
    int* numPtr2 = numPtr + (bitmapdata.Width * bitmapdata.Height);
    int* numPtr3 = (int*)data2.Scan0;
    int num = Color.FromArgb(1, Color.White).ToArgb();
    while (numPtr < numPtr2)
    {
        numPtr++;
        Color color = Color.FromArgb(numPtr[0]);
        if (((color.R < 200) || (color.G < 200)) || (color.B < 200))
        {
            numPtr3[0] = color.ToArgb();
        }
        else
        {
            numPtr3[0] = num;
        }
        numPtr3++;
    }
    source.UnlockBits(bitmapdata);
    bitmap.UnlockBits(data2);
    return bitmap;
} 
```

我想知道我在起诉指针方面是否正确，或者我应该使用字节数组和 System.Runtime.InteropServices.Marshal.Copy 而不是用指针到处乱搞？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:33:38.950

我的意见如下：您应该以应有的方式使用该语言。C# 应该与安全代码一起使用，将 unsafe 作为最后的手段，因为某些代码需要非常快并且被频繁调用。

让我举一些例子。

1.  你需要做一些缓慢的操作，但它可以在后台的某个地方运行，不是那么频繁，而且它的速度并不是真的很关键。在这种情况下，您可以只使用安全代码：尽管这种方法可能不会从您的处理器中挤出最后一点性能，但它在实现和（更重要的）维护方面的工作量要少得多。

2.  您需要加快操作速度，安全执行速度慢得令人无法接受。*你*试图改进算法，你尽了最大努力，但它仍然很慢。*和*您尝试并看到非托管实现相当快。嗯，所以 .NET 不是一个合适的平台来实现你的代码的那部分。您在本机 DLL 或平台上可用的任何东西（可能在纯 C 中）中实现代码，并通过 P/Invoke 使用它。这样，您的不安全代码将使用适当的语言进行编码，您只需通过 P/Invoke 调用该方法，或添加 C++/CLI 包装器，或在 C# 中完成互操作的任何其他方式来使用它。您获得了 (1) 托管业务逻辑和本机非常快速处理代码之间的清晰分离，(2) 更好的可维护性，因为现在您的快速数字处理或数据混洗代码处于适当的环境中。

3.  好吧，您会发现，即使是这种方法也因某种原因也行不通。那么，在这种特殊情况下，您或许应该考虑在 C# 中使用不安全的代码。但即使这样也无济于事的可能性很高。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T16:07:21.183

使用不安全的代码没有任何问题。您使用正确的工具来完成这项工作。语言中内置了对不安全代码和指针的支持，这意味着开发人员认为这是一件有用的事情——足够有用，以牺牲实现一些其他特性为代价来实现。

存在不安全代码的地方。正如您所发现的，这是访问位图图像中原始数据的最快方式。是的，有一些方法可以在安全代码中做到这一点，但它们要慢得多。不安全代码也是使用大于 2 GB 的内存缓冲区的唯一方法。

而且，是的，在某些应用程序中，您确实需要一个大小为几 GB 的对象。你可以随心所欲地反驳这一点，我会像在 80 年代嘲笑那些说“谁需要一兆字节的 RAM？”之类的话的白痴一样嘲笑你。

有人会说，如果你发现自己需要不安全的代码，你应该用 C++ 编写一个本地 DLL，然后从你的 .NET 程序中调用它。这是一个愚蠢的想法。首先，您可能没有构建本机 DLL 的工具或知识。其次，这会在您的项目中添加更多依赖项。第三，没有特别的好处。它“更安全”吗？不。

使用完成工作所需的东西。尽一切努力使用安全代码。但是，如果您在尝试了其他所有方法之后发现您需要做的事情需要不安全的代码......*使用它*！这就是为什么在平台上添加了对它的支持。

# php - 实例化COM时如何解决“无法创建COM对象`word.application'：语法无效”？

> ID：10247949
> 
> 赞同：1
> 
> 时间：2012-04-20T14:12:08.317
> 
> 标签：php, com, ms-office

我正在尝试将 word 文档转换为文本，并为此使用以下代码：

```
public function executeManoj() { 
$filename='C:\xampp\htdocs\branch.com\web\greenwich-beer-and-jazz-application-form.doc';    
$TXTfilename = $filename . ".txt";

$word = new COM("word.application") or die("Unable to instantiate Word object");
$word->Documents->Open($filename);

// the '2' parameter specifies saving in txt format
$word->Documents[1]->SaveAs($TXTfilename ,2);
$word->Documents[1]->Close(false);
$word->Quit();
$word->Release();
$word = NULL;
unset($word);

$content = file_get_contents($TXTfilename);
//unlink($TXTfilename);
exit;
} 
```

但这导致错误说

> “创建 COM 对象 `word.application' 失败：语法无效”....

我在 xammp 中设置了“允许服务与桌面交互”。

我需要在它之前安装任何软件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:19:49.957

关于[这个 PHP 错误](https://bugs.php.net/bug.php?id=48498)，它似乎`word.application`没有安装在您的机器上。尝试先安装它（不知道在哪里找到它......）。

# ruby-on-rails - 有 Ruby 消息总线 gem 吗？

> ID：10247961
> 
> 赞同：3
> 
> 时间：2012-04-20T14:12:56.197
> 
> 标签：ruby-on-rails, ruby, message-bus

我目前正在构建一个带有 rails 进程和多个工作进程的架构，这些进程需要被告知某些事件（如对象的创建）。

```
Rails
  |         API   Worker  
  +----------o------o--------o------ - - -
                        Some other
                          daemon 
```

我想做以下

```
class Article
  after_creation do
    MessageBus.send type: "article-created", id: self.id
  end
end 
```

虽然进程（API、Worker、Daemons，...）只是订阅消息总线，并在消息进入时调用一个块。

```
MessageBus.subscribe do |msg|
  if msg['type'] == 'article-created'
    # if this is my websocket daemon, I would push the article to the browser
    # if this is my indexing daemon, I would reindex the full-text search
    # if this is ... you get the deal.
  end
end 
```

目前，我正在使用本地 unix 域套接字，我将 JSON 推送到其中`UNIXSocket`并使用`EventMachine.start_unix_domain_server`. 但这只允许双向通信。我也考虑过使用 resque，但这更像是一个消息队列，而我需要总线。它依赖于redis。我很确定一定有一个 gem，它在 ruby​​ 中实现了一些消息总线，但是谷歌搜索并没有导致任何结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T21:00:15.333

最后，我使用 Eventmachine Channels 破解了一个快速自己的解决方案。

这是我的服务器。基本上，客户端连接`/tmp/messagebus.sock`并发送数据。推入套接字的所有内容都会发送给所有其他客户端。

```
require 'rubygems'
require 'eventmachine'

module Messagebus
  class Server
    attr_accessor :connections
    attr_accessor :channel

    def initialize
      @connections = []
      @channel = EventMachine::Channel.new
    end

    def start
      @signature = EventMachine.start_unix_domain_server '/tmp/messagebus.sock', Connection do |conn|
        conn.server = self
      end
    end

    def stop
      EventMachine.stop_server(@signature)

      unless wait_for_connections_and_stop
        EventMachine.add_periodic_timer(1) { wait_for_connections_and_stop }
      end
    end

    def wait_for_connections_and_stop
      if @connections.empty?
        EventMachine.stop
        true
      else
        puts "Waiting for #{@connections.size} connection(s) to finish ..."
        false
      end
    end
  end

  class Connection < EventMachine::Connection
    attr_accessor :server

    def post_init
      log "Connection opened"
    end

    def server=(server)
      @server = server

      @subscription = server.channel.subscribe do |data|
        self.log "Sending #{data}"
        self.send_data data 
      end
    end

    def receive_data(data)
      log "Received #{data}"
      server.channel.push data
    end

    def unbind
      server.channel.unsubscribe @subscription
      server.connections.delete(self)
      log "Connection closed"
    end

    def log(msg)
      puts "[#{self.object_id}] #{msg}"
    end
  end
end

EventMachine::run {
  s = Messagebus::Server.new
  s.start
  puts "New server listening"
} 
```

# php - 两个不同的 cURL：第二个 cURL 应该在第一个 cURL 完成运行后立即运行

> ID：10247962
> 
> 赞同：0
> 
> 时间：2012-04-20T14:12:56.573
> 
> 标签：php, post, curl, options, wait

我有这个：

从 CodeIgniter 运行 cURL（但我认为这并不重要）

```
 $url = "http://example.com/webservice/delete_cURL/".$id;        
    $this->curl->create($url);
    $this->curl->option('buffersize', 10);
    $this->curl->execute();     

    $url = "http://example.com/webservice/save_cURL/".$id;      
    $this->curl->create($url);
    $this->curl->option('buffersize', 10);
    $this->curl->execute(); 
```

在运行 save_cURL 之前，我需要等待 delete_cURL 完成（有些时间更长，这很正常：大文件夹）注意：cURL 运行到同一台服务器，但 URL 不同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T20:20:51.343

您可以在第一次请求后使用这些来查看是否成功

```
$this->curl->error_code;
$this->curl->error_string;
$this->curl->info; 
```

此外，您可以在调用的 url 中打印一些信息（即字符串“ACK”）并像这样评估它

```
$result = $this->curl->execute();
if ($result == "ACK") {

    // do second request
} 
```

# iphone - 检测 UITextField(iOS) 中的当前输入字符

> ID：10247967
> 
> 赞同：5
> 
> 时间：2012-04-20T14:13:16.543
> 
> 标签：iphone, ios, input, keyboard, uitextfield

我想知道用户刚刚输入的当前输入字符。比较新旧输入字符串似乎可行，但它必须是我想尝试的最后一件事。有什么建议吗？我想 iOS SDK 中有一些方法可以更好地做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T14:18:48.667

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

来自 UITextFieldDelegate 应该可以帮助你。

它不仅用于替换文本，每当用户按下键盘上的键时也需要调用它。（然后范围的长度将为 0，并且该位置将是当前插入位置）。

有关更多信息，请参阅文档：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/doc/uid/TP40006991-CH3-SW9](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/doc/uid/TP40006991-CH3-SW9)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T15:00:03.017

如果您想在*字符进入时比较**字符串*，最好使用

 *```
[textField addTarget:self action:@selector(compareInput) forControlEvents:UIControlEventEditingChanged];

-(void)compareInput
{
    if ([textField.text isEqualToString:compareString])
        NSLog(@"They're the same!");
} 
```

比代表：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

如果您实际上只是想比较字符，那么委托方法就可以了。该变量`string`包含键入的字符。

例如，当用户`foo`输入 UITextField 时，上述方法会发生这种情况：

用户类型：`f`，发生这种情况：

```
[textField addTarget:self action:@selector(compareInput) forControlEvents:UIControlEventEditingChanged]; 
```

立即调用`compareInput`，这封信`f`可通过 textField.text 获得：

```
-(void)compareInput
{
    NSLog(textField.text); //prints `f`
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSLog(textField.text); //prints nothing
    return YES;
    //after returning YES, textField.text will contain `f`
} 
```

用户类型：`o`，发生这种情况：

```
[textField addTarget:self action:@selector(compareInput) forControlEvents:UIControlEventEditingChanged]; 
```

立即调用`compareInput`，字符串`fo`可通过 textField.text 获得：

```
 -(void)compareInput
{
    NSLog(textField.text); //prints `fo`
}

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSLog(textField.text); //prints `f`
    return YES;
    //after returning YES, textField.text will contain `fo`
} 
```

我可能不是很清楚，但我希望它能给你一些见解！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-11T18:54:59.943

此方法将在 UITextField 中显示当前输入

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *letters;
    if ([textField.text isEqualToString:@""]){
        letters = string;
    }else if ([string isEqualToString:@""]){
        if ([textField.text length] > 0) {
            letters = [textField.text substringToIndex:[textField.text length] - 1];
        }
    }else{
        letters = [textField.text stringByAppendingString:string];
    }

    NSLog(@"letters %@\n", letters);

    return YES;
} 
```*

# knockout.js - KnockoutJS 和值绑定（2-way）

> ID：10247971
> 
> 赞同：0
> 
> 时间：2012-04-20T14:13:29.210
> 
> 标签：knockout.js

我有一个简单的[jsfiddle](http://jsfiddle.net/shelbyz/bytM7/)，我试图更好地理解值绑定。我有一个输入控件值绑定到我的 viewModel 上的**搜索**属性，如下所示：

```
<input data-bind="value: search" /> 
```

我的**搜索**属性定义为：

```
this.search = ko.observable(""); 
```

我还在“搜索”属性上实现了订阅，如下所示：

```
this.search.subscribe(function(newValue) {
    alert("New value is " + newValue);
    alert("New value is" + this.search);
}); 
```

我可以看到**newValue**在我键入然后选择另一个控件时发生变化，但是 viewModel 属性**搜索**始终是**undefined**。我期望使用 2 向绑定，当我键入信息时，**搜索**将具有类型值，以便我可以在使用 ajax 执行 web 服务调用的按钮中使用它，但**undefined**是我可以在该字段中获得的唯一值不设置**搜索**的默认值。

是否期望我在 subscribe 调用中更改**search的值？**我认为这可以通过双向绑定来为我完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T14:24:08.120

首先，在该`subscribe`方法中，`this`不引用视图模型，因此没有`search`可用的属性（因此`undefined`）。您可以通过在另一个变量名下保存对视图模型的引用来解决此问题，例如使用该引用进行`_self`访问。`search`

其次，您需要`search`作为函数调用才能获得它的值——在使用 Knockout 时，所有可观察值都是如此。

```
var viewModel = function() {
    var _self = this;
    this.search = ko.observable("");

    this.search.subscribe(function(newValue) {
        alert("New value is " + newValue);
        alert("New value is " + _self.search());
    });
}; 
```

[更新小提琴](http://jsfiddle.net/bytM7/2/)

# sql - 我只需要Min

> ID：10247975
> 
> 赞同：3
> 
> 时间：2012-04-20T14:14:11.827
> 
> 标签：sql, sql-server, tsql, min

我有一个查询需要为每个 ID 返回本月的最低余额。我遇到的问题是它返回多个余额而不是余额上的最小余额。我不断得到这样的结果：

```
ID      Name   Month     Year  TodayMonth   TodayYear  BalMin 
1        A      4         12     4            2012      10,000.00 
1        A      4         12     4            2012      20,000.00 
```

当我需要它返回最低余额时：

```
ID      Name   Month     Year  TodayMonth   TodayYear  BalMin 
1        A      4         12     4            2012      10,000.00 
```

这是我到目前为止所拥有的：

```
SELECT DISTINCT
     TOP (100) PERCENT History.ID, info.Name, DATEPART(mm, History.ReportDate) AS Month, DATEPART(yy,History.ReportDate) AS Year, DATEPART(mm, { fn CURDATE() }) AS TodayMonth, DATEPART(yy, { fn CURDATE() }) AS TodayYear, MIN(History.Balance) AS BalMin
    FROM         History LEFT OUTER JOIN Info ON History.ID = Info.ID
    WHERE     (DATEPART(yy, History.ReportDate) = DATEPART(yy, { fn CURDATE() })) AND (DATEPART(mm, History.ReportDate) = DATEPART(mm, 
                          { fn CURDATE() })) AND (History.Balance > 0)
    GROUP BY History.ID, History.ReportDate, Info.Name, History.Balance
    ORDER BY History.ID 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:16:20.213

您`group by`不应该包括余额（因为您正在运行 min ），并且您可能应该使用`datepart`您在选择中使用的余额（否则您不会按月分组）。也没有任何意义，`left join`因为无论如何您都在 where 子句中寻找非空记录。这可能有效：

```
SELECT History.ID,
    Info.Name,
    DATEPART(mm, History.ReportDate) AS [Month],
    DATEPART(yy, History.ReportDate) AS [Year],
    MIN(History.Balance) AS BalMin
FROM History
    JOIN Info ON History.ID = Info.ID
WHERE (DATEPART(yy, History.ReportDate) = DATEPART(yy, { fn CURDATE() }))
    AND (DATEPART(mm, History.ReportDate) = DATEPART(mm, { fn CURDATE() }))
    AND (History.Balance > 0)
GROUP BY History.ID,
    DATEPART(mm, History.ReportDate),
    DATEPART(yy, History.ReportDate),
    Info.Name
ORDER BY History.ID 
```

如您所见，我还删除了`distinct`and关键字。通常是不必要的（如果不是代码味道），我假设您是用于调试或订购视图，您[可能不应该这样做](http://blog.sqlauthority.com/2009/11/24/sql-server-interesting-observation-top-100-percent-and-order-by/)。`top``Distinct``group by``top`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:16:18.693

```
SELECT DISTINCT
     TOP (100) PERCENT History.ID, info.Name, DATEPART(mm, History.ReportDate) AS Month, DATEPART(yy,History.ReportDate) AS Year, DATEPART(mm, { fn CURDATE() }) AS TodayMonth, DATEPART(yy, { fn CURDATE() }) AS TodayYear, MIN(History.Balance) AS BalMin
    FROM         History LEFT OUTER JOIN Info ON History.ID = Info.ID
    WHERE     (DATEPART(yy, History.ReportDate) = DATEPART(yy, { fn CURDATE() })) AND (DATEPART(mm, History.ReportDate) = DATEPART(mm, 
                          { fn CURDATE() })) AND (History.Balance > 0)
    GROUP BY History.ID, DATEPART(mm, History.ReportDate), Info.Name
    ORDER BY History.ID 
```

我没有检查您的其余查询，但您的 GROUP BY 至少是问题的一部分。看一看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:33:38.420

```
SELECT  i.*, minbalance
FROM    (
        SELECT  id, MIN(balance) AS minbalance
        FROM    history
        WHERE   reportDate >= DATEADD(day, -DAY(GETDATE()), CAST(GETDATE() AS DATE))
                AND reportDate < DATEADD(month, 1, DATEADD(day, -DAY(GETDATE()), CAST(GETDATE() AS DATE)))
                AND 
        GROUP BY
                id
        ) b
JOIN    info i
ON      i.id = h.id 
```

# java - Tomcat 持久化和用户特定的会话计数器

> ID：10247977
> 
> 赞同：1
> 
> 时间：2012-04-20T14:14:17.083
> 
> 标签：java, session, tomcat, counter

我需要制作持久的和用户特定的会话计数器。我做的

```
package my.package;

import javax.servlet.http.HttpSessionListener;
import javax.servlet.http.HttpSessionEvent;
import javax.servlet.http.HttpSession;
import java.util.HashMap;

public class SessionCounter implements HttpSessionListener {

    private static HashMap activeSessions;

    public SessionCounter() {
        //How to restore session count?
        activeSessions = new HashMap();
    }

    public void sessionCreated(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        String userName = session.getAttribute("username");
        Integer count = (Integer) activeSessions.get(userName);
        if (count != null) {
            activeSessions.put(userName, Integer.valueOf(count.intValue() + 1));
        } else {
            activeSessions.put(userName, new Integer(1));
        }
    }

    public void sessionDestroyed(HttpSessionEvent se) {
        HttpSession session = se.getSession();
        String userName = session.getAttribute("username");
        Integer count = (Integer) activeSessions.get(userName);
        if (count != null && count.intValue() > 0) {
            activeSessions.put(userName, Integer.valueOf(count.intValue() - 1));
        }

    }

    public static HashMap getActiveSessions() {
        return activeSessions;
    }
} 
```

即使在重新启动 tomcat 后会话仍处于活动状态，但存储在我的 activeSessions 变量中的会话计数丢失了。重启后如何恢复会话计数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T15:24:47.453

当 Tomcat 关闭（即通过关闭脚本而不是通过终止进程）时，所有会话都将序列化并在下一次启动时恢复。

总是会重新创建 HttpSessionListener，因此您的 HashMap 会重新实例化并且信息会丢失。您将必须编写一个实现可串行化的模型，该模型保存您的数据，并在 Tomcat 关闭时将其存储到磁盘中。

# xml - 具有多个条件的 XPath

> ID：10247978
> 
> 赞同：197
> 
> 时间：2012-04-20T14:14:20.463
> 
> 标签：xml, xslt, xpath

我可以使用什么 XPath 来选择具有指定名称属性的任何类别以及具有指定值的任何子节点作者。

我尝试了以下路径的不同变体，但没有成功：

```
//quotes/category[@name='Sport' and author="James Small"] 
```

XML：

```
<?xml version="1.0" encoding="utf-8"?>
<quotes>
  <category name="Sport">
   <author>James Small<quote date="09/02/1985">Quote One</quote><quote             date="11/02/1925">Quote nine</quote></author>
  </category>
   <category name="Music">
   <author>Stephen Swann
 <quote date="04/08/1972">Quote eleven</quote></author>
  </category>
  </quotes> 
```

* * *

## 回答 #1

> 赞同：294
> 
> 时间：2012-04-20T14:26:03.853

尝试：
`//category[@name='Sport' and ./author/text()='James Small']`

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-04-20T14:30:17.253

**使用**：

```
/category[@name='Sport' and author/text()[1]='James Small'] 
```

或使用：

```
/category[@name='Sport' and author[starts-with(.,'James Small')]] 
```

尽可能避免使用`//`伪运算符是一个很好的规则，因为它的评估通常非常慢。

还：

```
./somename 
```

相当于：

```
somename 
```

所以推荐使用后者。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-20T14:26:47.997

问题不清楚，但我知道你需要选择一个具有 name 属性并且应该有指定值的子作者的类别，如果我穿坏了，请纠正我

这是一个xpath

```
//category[@name='Required value'][./author[contains(.,'Required value')]]
e.g
//category[@name='Sport'][./author[contains(.,'James Small')]] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-12-09T10:08:29.030

您可以使用 and 或在 xpath 中应用多个条件

```
//input[@class='_2zrpKA _1dBPDZ' and @type='text']

//input[@class='_2zrpKA _1dBPDZ' or @type='text'] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-05T15:37:55.617

在这里，我们也可以这样做：

`//category [@name='category name']/author[contains(text(),'authorname')]`

或者

```
//category [@name='category name']//author[contains(text(),'authorname')] 
```

要详细了解 XPATH，请访问 - [selenium xpath 详细](https://avinashpandeblogsonseleniumautomation.blogspot.com/2019/11/selenium-xpath-in-detail.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-02-23T17:10:19.340

在 XPath 中使用 and 应用多个条件，或

```
//input[@class='test' and @type='text'] 
```

//输入[@class='test' 或 @type='text']

# java - 不同格式的Java字符串到日期转换

> ID：10247979
> 
> 赞同：2
> 
> 时间：2012-04-20T14:14:28.007
> 
> 标签：java, string, date, formatting

所以我有`String trDate="20120106";`并且想要得到`Date trDate=2012-01-06`并且正在尝试使用`SimpleDateFormat`来更改模式，但首先我得到`parse`字符串然后生成日期然后尝试调用`format`它给我返回字符串但我需要日期，任何建议，这是我的代码有：

```
String trDate="20120106";    
Date tradeDate = new SimpleDateFormat("yyyymmdd", Locale.ENGLISH).parse(trDate);
String krwtrDate = new SimpleDateFormat("yyyy-mm-dd", Locale.ENGLISH).format(tradeDate);
Date krwTradeDate = new SimpleDateFormat("yyyy-mm-dd", Locale.ENGLISH).parse(krwtrDate); 
```

这是[类似的问题](https://stackoverflow.com/q/882420/164299)，但它没有回答我的问题

我只需要转换字符串，`Date format`因为我需要将它传递给另一个只需要的函数`Date object`。

如果有人能举例说明如何从格式中获取格式`date`，`yyyy-mm-dd`我将不胜感激？`string``yyyymmdd`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T14:31:42.790

---由于评论而更新了答案---

好的，所以您使用的 API 需要一个字符串，它表示格式为的日期`2012-04-20`

然后，您需要解析格式不正确的格式`Date`，然后以所需的格式再次对其进行格式化。

```
String trDate="20120106";    
Date tradeDate = new SimpleDateFormat("yyyyMMdd", Locale.ENGLISH).parse(trDate);
String krwtrDate = new SimpleDateFormat("yyyy-MM-dd", Locale.ENGLISH).format(tradeDate); 
```

另请注意，我*更改了*您的“月份”指示符，因为您在使用月份时犯了一个非常*常见的错误。*`m`由于“小时：分钟：秒”日期格式有两个常见的“名称”，它们都以`m`、 分钟和月份开头。因此，大写`M`用于几个月，而小写`m`则用于分钟。我敢打赌，这是您遇到问题的真正原因。

--- 原帖如下---

如果您的 API 需要 a `java.util.Date`，那么您就不需要做那么多了。你实际上`java.util.Date`只有两行

```
String trDate="20120106";    
Date tradeDate = new SimpleDateFormat("yyyymmdd", Locale.ENGLISH).parse(trDate); 
```

`java.util.Date`但是如果不快速回顾一下s 是 什么，这个解决方案可能没有意义。`Dates`是事物，但它们如何呈现与它们是什么是分开的。

在任何时刻，都有一个`Date`实例描述了那个时刻。应该如何呈现该`Date`实例并不一致，这在很大程度上取决于观众说什么语言，他们在哪个国家，该国家实施了什么规则（夏令时），以及他们之前的文化背景。

因此， a`Date`没有单个关联的表示。这就是为什么每个“获取 X”方法`Date`都被弃用的原因（其中 X 是日、月、小时、年等），除了从 0 日期（称为纪元）获取毫秒数。

因此，对于`Date`要正确呈现的每一个内容，您都需要将其转换`String`为特定于语言、国家、时区和文化先例的使用规则。理解这些规则并应用它们的对象是`DateFormat`.

这意味着，一旦你得到它，`Date`你就不需要重新格式化它并重新解析它以获得“正确” `Date`，因为两个日期应该是相同的（对于相同的语言环境）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T14:19:29.877

> *你能给我一个例子，说明如何`yyyy-mm-dd`从格式中的字符串中获取`yyyymmdd`格式中的日期吗*

`Date`对象没有与之关联的格式。在内部，它通常只存储一个`long`值。

如果其他一些方法负责打印日期，那么很遗憾，您无法控制结果输出的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T14:50:42.853

我很好理解吗？

您有一个仅接受 Date 作为参数的方法，并且该方法在内部使用 toString() 将 Date 转换为格式错误的字符串？

最好的方法是修改该方法并将 toString() 的使用与 SimpleDateFormat.format() 交换。

如果你不能修改那个方法，那么你可以用 OO “作弊”，即用你自己的实现替换 toString 方法，例如像这样：

```
public class MyDate {
   private static final FMT = SimpleDateFormat("yyyy-mm-dd", Locale.ENGLISH);

   MyDate(long time) {
      super(time);
   }

   String toString() {
      return FMT.format(this);
   }
} 
```

你用你的方法调用你的方法

```
xxx = myMethod(new MyDate(new SimpleDateFormat("yyyymmdd", Locale.ENGLISH).parse(trDate).getTime())); 
```

但是，如果该方法没有在内部使用 toString 而是使用错误格式的 SimpleDateFormat，那么我的提议就行不通了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-20T15:29:51.920

如果字符串日期始终采用您提到的格式，则可以使用 subString 方法提取年、月和日。

> 字符串 trDate="20120106";

使用String的subString方法提取年月日

> 字符串年份 = "2012";
> 字符串月份=“01”；
> 字符串日=“06”；

并将这些解析为整数。假设您将字符串解析为整数

> int intYear = 2012;
> int intMonth = 01;
> int intDay = 06;
> 
> 日历 calendar= new GregorianCalendar(intYear, intMonth - 1, intDay);
> 
> 日期日期 = 新日期（日历）；

# php - 如何让Multiple Forms更可靠？

> ID：10247981
> 
> 赞同：0
> 
> 时间：2012-04-20T14:14:29.750
> 
> 标签：php, javascript, jquery, forms, design-patterns

我正在为多种表格寻找一个简洁的解决方案。

看一下示例截图：

![在此处输入图像描述](../Images/ff2bc687c1364429028326c6354141cc.png)

下拉列表中有三个网络，AT&T、Verizon Wireless 和 T-Mobile。

我从下拉列表中选择了“AT&T”，然后出现“销售类型”收音机。T-Mobile 网络可能具有与“AT&T”网络**相同**的销售类型，但有两个额外的销售类型。

所有销售类型中的大多数文本框都是相同的。例如：

消费者将有 20 个字段，而企业将有 27 个字段（附加字段）。Sim-Only 将有更少的字段 - 15 个字段（一些已删除和新的字段）。

像这样和 DRY 原则的一个好的解决方案是什么？

我用过很多**$('.name').hide(); 的jQuery。$('.name').hide();** 但它变得非常混乱。例子：

```
$(".at&t_consumer_radio").click(function(){
       showSaleType("at&t_consumer");
});

function showSaleType(type) {
        if (type == "at&t_consumer") { 
          $('.name').hide(); 
          $('.name').hide(); and so on..
     } 
} 
```

填写表格后，我使用 PHP 对其进行验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T14:48:30.890

这是小提琴：http: [//jsfiddle.net/GvGoldmedal/FxEGP/](http://jsfiddle.net/GvGoldmedal/FxEGP/)

最好的办法是创建以下类标签：

.att、.verizon。、.tmobile、.consumer、.business、.sim

然后，您可以根据何时需要隐藏字段来标记字段。如果一个字段用于 verison，那么它将获得一个 verizon 类。如果一个字段是业务类型，那么它将获得业务类。还将“隐藏”类添加到任何不总是显示的字段。

```
Some Field:
<input type="text" class=" hide verizon att consumer" />

Another Field
<input type="text" class = " hide att business" /> 
```

确保标记每个字段。还要确保您的单选按钮和选择中的选项具有与类匹配的值。并为您的选择和单选按钮提供一类“选项”，如下所示：att verizon tmobile

```
<input type='radio' name='sale_type' class='option' value="business" />
<input type='radio' name='sale_type' class='option' value="consumer" />
<input type='radio' name='sale_type' class='option' value="consumer" /> 
```

.. 等等

现在对于 Jquery：

```
//selectId is the ID of your select 
// myform is the id of your form

$(".option").change(function()
{   
     // get the value of our select and option
     carrier =  $('#selectId option:selected').val();
     sale_type = $('input[name=sale_type]:checked').val();

    // Hide all fields that don't always show up.
     $(".hide").hide();

    //Show all fields that match our carrier and sale type

    $(".hide").each(function(){
        if($(this).hasClass(carrier) && $(this).hasClass(sale_type))
        {            
            $(this).show();
        }    
    });
}); 
```

你有它。Anytime a new option is selected all the fields that aren't part of the form all the time will be hidden and the ones matching your carrier and sale type will then be shown. 它几乎会立即发生，用户将无法区分。如果需要，您可以进行一些褪色以使其看起来更平滑。此外，如果一个字段对于 verizon 和 att 都是可见的，那么只需将这两个类都添加到该输入中。如果您有任何问题，请告诉我。

我会尝试让 Fiddle 准确地展示如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T14:48:48.470

隐藏所有仅针对特定选择显示的字段，例如商务或免费模拟。

像这样

```
<input type="text" class="standard" />
<input type="text" class="business" style="display:none" />
<input type="text" class="simOnly" style="display:none" />
<input type="text" class="standard" />
<input type="text" class="business simOnly" style="display:none" /> 
```

不确定我是否解释得很好。:(

如果选择了该选项，则使用 jquery 仅显示业务

```
$("#businessRadio").click(function(){          
    $('.business').show();   
}); 
```

这样您就不会显示和隐藏所有内容，而只是显示和隐藏每种销售类型的特定输入

# android - Android：Webview如何显示长文本削减为多行？

> ID：10247989
> 
> 赞同：0
> 
> 时间：2012-04-20T14:15:04.233
> 
> 标签：android, webview

我无法在我的 web 视图上显示长文本。我的 webview 宽度设置为 400dp。我想要我的长文本：ex。“呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜！！！” 以多行显示，这样用户就不必向左/向右滚动，也不必截断文本。

但是，我只得到以下结果：

![在此处输入图像描述](../Images/bffa7498a4c80f9a669e48b9da69ffc4.png)

这么长的文字怎么能多行显示呢？

我的预期结果：

```
Hello World
looooooooooooooooooooooooooooooooooooo
ooooooooooooooooooooonnnngg!!! 
```

xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
    <WebView 
        android:id="@+id/webview"
        android:layout_width="400dp"
        android:layout_height="fill_parent"
    />
</LinearLayout> 
```

爪哇

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    WebView webview = (WebView) findViewById(R.id.webview);
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setLayoutAlgorithm(LayoutAlgorithm.NARROW_COLUMNS);
    String html = "<html><head></head><body>Hello World<br>looooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooonnnggg!!!</body></html>";
    webview.loadDataWithBaseURL(
            "http://nada", html, "text/html", "utf8", "");
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T14:20:41.733

您的问题并非特定于 WebView。这就是所有浏览器在其中呈现没有空格的文本的方式。如果您希望文本换行，您将需要放入空格，或者编写一些 javascript 来处理它并以这种方式包装它，或者，在将其提供给 WebView 之前将其包装起来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-18T06:12:31.260

您不需要为此编写 Java，您可以将文本包装成 a`<div>`并在标题中使用标签

`<meta name="viewport" content=" width=device-width, initial-scale=1.0">`

这将使您的页面适合移动屏幕并自动执行文本换行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-12-05T12:31:05.623

您可以`style="overflow-wrap:break-word"`为您的标签添加一个。如果其中没有其他可接受的断点，它会中断太长的线。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T14:22:23.053

在您想要换行的地方添加**\n 。**

编辑：对于 html </br> 将起作用

# php - 使用 PHP 和 MySQL 的新帖子通知

> ID：10247994
> 
> 赞同：2
> 
> 时间：2012-04-20T14:15:23.090
> 
> 标签：php, mysql, notifications, new-operator, posts

我知道如何在 PHP 和 MySQL 中实现，但现在我有一点思考问题。

有一个论坛网站。每个用户都可以发布一个问题（如 stackoverflow）。那么，当用户返回（2 天后或其他时间）他看到（一条消息或警报...）他的线程上有新帖子时，如何做到这一点？

你懂我的意思吗？我不能将所有这些都放入数据库中，我认为这有点重服务器？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T14:26:27.300

如果我没记错的话，这就是简单机器论坛的处理方式。

每个用户都有他们点击的每个线程的记录。该记录存储该线程在单击时的最高消息 ID。

由于消息 ID 是自动递增的整数，因此任何新消息的消息 ID 都会大于之前的消息 ID。

因此，当用户查看线程列表时，SMF 会查看线程中当前最高的消息 ID 是否大于用户线程记录中存储的 ID。如果它更大，则有新记录，并且线程会获得一个“新消息”图标。否则，线程将获得“无新消息图标”。此外，如果没有线程记录，则用户从未访问过该线程，并且它会获得一个“新消息”图标。

当用户实际点击线程时，线程记录再次更新为最高的消息 ID。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T14:17:44.257

您应该`lastActiveTime`在网站上存储用户的。每次用户访问线程或页面时，为他们更新此值。下次他们返回时，对在 之后创建的所有帖子进行查询`lastActiveTime`并显示链接列表。

这意味着您只需向用户表添加一个字段，仅此而已。这个新字段包含一个简单的日期，您可以从中确定某些帖子的新鲜度。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-20T14:17:37.677

您**可以**将所有内容放入数据库中...

还能去哪里？

*魔法大陆*？^_^

只需将其全部存储在数据库中，并在每一行中添加某种时间元素。

# oracle - SQLPLUS 中的长 PL/SQL 输出

> ID：10247999
> 
> 赞同：0
> 
> 时间：2012-04-20T14:15:55.207
> 
> 标签：oracle, plsql, sqlplus

在 SQLPLUS 下执行我的脚本时遇到问题。在 SQL Developer 下它运行良好。

```
set serveroutput on size 1000000
declare
yyy varchar2(32000):='';
begin
yyy := 'XxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzz';
yyy := yyy || 'XxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzz';
yyy := yyy || 'XxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzzXxxYyyZzz';
dbms_output.put_line(yyy);
end;
/ 
```

在 SQLPLUS 下我得到错误：

```
ORA-06502: PL/SQL: numeric or value error: character to number conversion error ORA-06512: at line 1 
```

任何解决方案如何在 SQLPLUS 下强制运行具有长输出的脚本？我需要输出，因为我将结果假脱机到文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:34:25.937

您正在针对 Oracle 10g 数据库使用早于 Oracle 10g 的 Oracle 客户端

请在下面找到 ASKTOM 的报价

问题不在运行时，您显然是在针对 10.2 或更高版本的数据库使用旧客户端。数据库代码*运行良好*

当客户端从数据库中提取字符串时，您遇到了异常。

sqlplus 正在做这样的事情：

a) 调用过程/代码 - 它运行并填充 dbms_output 缓冲区，即包中的一个数组。

b) 然后 sqlplus 调用 dbms_output.GET_LINES 以获取要打印的缓冲输出。这是失败的呼叫。

欲了解更多信息，请参阅

[http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1011431134399](http://asktom.oracle.com/pls/asktom/f?p=100:11:0::::P11_QUESTION_ID:1011431134399)