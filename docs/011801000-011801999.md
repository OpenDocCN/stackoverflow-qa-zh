# StackOverflow 问答 11801000-11801999

# php - 使用 PHP 列出在 mySQL 数据库中找到的日期

> ID：11801003
> 
> 赞同：0
> 
> 时间：2012-08-03T18:06:07.637
> 
> 标签：php, mysql, date

假设这是我数据库中的表：

```
ID      | APP_TIME                  | NAME
----------------------------------------------------
1       | 2012-07-08 10:00:00       | John
2       | 2012-07-08 12:00:00       | Johnny
3       | 2012-07-09 13:00:00       | Fred
4       | 2012-07-10 09:00:00       | George
5       | 2012-07-10 10:30:00       | Eva
6       | 2012-07-10 14:00:00       | Monica
7       | 2012-07-11 12:00:00       | Helen
8       | 2012-07-11 13:00:00       | Kim 
```

然后我想在我的网站上输出：

```
07-08-2012
Time    | Name
----------------------------------------------------
10:00   | John
12:00   | Johnny

07-09-2012
Time    | Name
----------------------------------------------------
13:00   | Fred

07-10-2012
Time    | Name
----------------------------------------------------
09:00   | George
10:30   | Eva
14:00   | Monica

07-11-2012
Time    | Name
----------------------------------------------------
12:00   | Helen
13:00   | Kim 
```

我的问题不是格式化日期时间值和所有这些......对我来说，挑战是根据它们“属于”的日期列出相应的结果。

有人帮忙吗？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:27:46.740

让 MySQL 像这样为您完成艰苦的工作：

```
SELECT DATE(app_time) as `day`, TIME(app_time) as `time`, name FROM table ORDER BY `day` ASC, `time` ASC 
```

这将返回日期、一天中的时间和按日期排序的名称，然后是一天中的时间。

然后，您循环结果行并聚合到您喜欢下面示例的任何结构中（假设您已经从查询集中获得了一个结果集，`$result`并且您正在使用 mysqli）

```
$sorted_array = array();
while ($row = mysqli_fetch_object($result)) {
    $sorted_array[$row->day][] = array('time' => $row->time, 'name' => $row->name);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:16:43.713

想出了这个解决方案：

```
$today = date('%Y-%m-%d 00:00:00');
$get_dates = mysql_query("SELECT DISTINCT DATE_FORMAT(app_time, '%Y-%m-%d') AS new_date FROM reservations WHERE app_time > '$today' ORDER BY app_time ASC");
while ($row = mysql_fetch_array($get_dates)) {
    $the_date = $row['new_date'];
    $results = mysql_query("SELECT * FROM reservations WHERE app_time >= '$the_date 00:00:00' AND app_time < '$the_date 23:59:59' ORDER BY app_time ASC");
    while ($the_results = mysql_fetch_array($results))
    {
    // Do some stuff eg:
    echo $the_results['name'] . '<br />';
    }
} 
```

# visual-studio-2010 - VS 2010，编码的 UI 测试：重新运行失败的测试用例

> ID：11801006
> 
> 赞同：4
> 
> 时间：2012-08-03T18:06:24.677
> 
> 标签：visual-studio-2010, testing, automation, coded-ui-tests

我正在使用 VS2010 Premium，编码的 UI 测试。

你知道如何在运行后重新执行失败的测试用例吗？如果重新执行后测试通过，则应在结果报告中通过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T11:54:03.423

`try/catch`不是那么理想的方式，但如果抛出异常，您可以将所有代码阻塞并重新运行测试：

```
[CodedUITest]
public class CodedUITest
{
    private static int _maxTestRuns = 5;

    [TestCleanup]
    public void Cleanup()
    {
        //If the test has reached the max number of executions then it is failed.
        if (_maxTestRuns == 0)
            Assert.Fail("Test executed {0} times and it was failed", _maxTestRuns);
    }

    [TestMethod]
    public void CodedUITestMethod()
    {
        try
        {
            this.UIMap.RecordedMethod1();
        }

        catch (Exception exception)
        {
            //Call Cleanup, rerun the test and report the error.
            if (_maxTestRuns > 0)
            {
                _maxTestRuns--;
                TestContext.WriteLine(exception.Message);
                TestContext.WriteLine("Running Again...");
                this.Cleaup();
                this.CodedUITestMethod();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T09:36:02.880

你也可以概括 Schaliasos 提出的方法，我们可以像这样创建一个基类：

```
[CodedUITest]
public class _TestBase
{
    private static int _maxTestRuns;
    public Exception _currentException;

    public _TestBase()
    {
    }

    public void TryThreeTimes(Action testActions)
    {
        _maxTestRuns = 3;
        _currentException = null;
        while (_maxTestRuns > 0)
        {
            try
            {
                testActions();
            }
            catch (Exception exception)
            {
                _maxTestRuns--;
                _currentException = exception;
            }
            if (_currentException == null)
                break; // Test passed, stop retrying
        }
        if (_maxTestRuns == 0)  // If test failed three times, bubble up the exception.
        {
            throw _currentException;
        }          
    }

    /// <summary>
    ///Gets or sets the test context which provides
    ///information about and functionality for the current test run.
    ///</summary>
    public TestContext context
    {
        get
        {
            return testContextInstance;
        }
        set
        {
            testContextInstance = value;
        }
    }
    private TestContext testContextInstance;
} 
```

然后当我们编写测试时，我们可以继承上面的类并这样做：

```
[CodedUITest]
public class NewTestClass : _TestBase
{
    [TestMethod]
    public void MyTestMethod1()
    {
        TryThreeTimes(new Action(() =>
            // Assertions and Records come here
            Assert.IsTrue(false);
         }));
    }

    [TestMethod]
    public void MyTestMethod2()
    {
        TryThreeTimes(new Action(() =>
            // Assertions and Records come here.
            Assert.IsTrue(true);
         }));
    }
} 
```

我一直在考虑如何使这变得更简单，任何建议将不胜感激。如果您有许多想要经常运行的测试，这至少可以节省相当多的代码，也许对某些人来说概括函数 TryThreeTimes 是有意义的，因此其中一个参数是重新运行的次数。

# php - 如何在 PHP 中组合“and”语句和“if”语句？

> ID：11801009
> 
> 赞同：0
> 
> 时间：2012-08-03T18:06:31.213
> 
> 标签：php, if-statement, parentheses, and-operator

我正在尝试以我整理的表格为供应商和模型写一张支票

这是表格的相关部分

```
<table  width="75%">
<form action="?" method="post">
<tr>
<td colspan="6" align="center">
<font size="5"><b>Add new record</b></font>
</td>
</tr>
<tr>
<td align="right">
<b>Vendor:</b>
</td>
<td>
<select name="vendor">
<option value="ClearAccess">ClearAccess</option>
<option value="VisionNet">VisionNet</option>
<option value="Other">Other</option>
</select>
</td>
<td align="right">
<b>Model:</b>
</td>
<td>
<select name="model">
<option value="NotModel">--ClearAccess--</option>
<option value="AG10W">AG10W</option>
<option value="SR100G">SR100G</option>
<option value="SR300N">SR300N</option>
<option value="SR350N">SR350N</option>
<option value="SR500N">SR500N</option>
<option value="NotModel">--VisionNet--</option>
<option value="M404">M404</option>
<option value="M405">M405</option>
<option value="M505">M505</option>
<option value="M505n">M505N</option>
<option value="Legacy">Legacy</option>
</select>
</td> 
```

我的形式很好。我的问题是当我构建我的 if 循环时。这是我到目前为止所拥有的

```
if ($_POST['vendor']='ClearAccess') && ($_POST['model']='M404') || ($_POST['model']='M405') || ($_POST['model']='M505') || (_$POST['model']='M505N') || ($_POST['model']='Legacy')
echo "You have not selected a valid vendor/model combination" 
```

我对放置括号的位置和方式有疑问。

我还将创建一个类似于此的 if 语句

```
if ($_POST['vendor']='VisionNet') && ($_POST['model']='AG10W') || ($_POST['model']='SR100G') || ($_POST['model']='SR300N') || (_$POST['model']='SR350N') || ($_POST['model']='SR500N')|| ($_POST['model']='Legacy')
echo "You have not selected a valid vendor/model combination" 
```

我完全愿意以不同的方式做这件事。最终，我会将其转换为 java 脚本，您可以在其中选择供应商并仅获取该供应商的相关模型。因为我仍在学习 PHP，甚至还没有学习 Java 的基础知识，但我想以这种方式尝试。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:13:25.093

减少你的逻辑。从你想在一般陈述中做的事情开始。

```
A = "Vendor is VisionNet"
B = "Model is AG10W"
C = "Model is SR100G"
etc. 
```

然后把你的逻辑写成

```
if (A and (B or C)) 
```

或者

```
if ((A and B) or C) 
```

等等

然后用 PHP 等价物替换您的占位符。

在 PHP 中，如果您想查看 x 是否是多个值之一，您可以使用以下`in_array()`方法：

```
$models = array('AG10W', 'SR100G', 'SR300N', 'SR350N', 'SR500N', 'Legacy');

// if the vendor is vision net OR the model is in the list of models defined in $models, do something
if ($_POST['vendor'] == 'VisionNet' || in_array($_POST['model'], $models)) {
    // do something.
} 
```

还要考虑[运营商。](http://php.net/manual/en/language.operators.php)分配不同于比较。

请记住，逻辑只是数学的另一个子集。括号很重要，所以如果你`if`提早结束你的陈述，那就结束了。之后的一切都将成为语法错误。

我提到这一点是因为你写了这个：

```
if ($_POST['vendor'] = 'VisionNet') || ... 
```

[这是离散数学](http://math.about.com/od/discretemath/Discrete_Math.htm)教程的链接，这是一种说“逻辑数学”的奇特方式。

**此外，对于所有感兴趣的人，麻省理工学院（MIT）免费提供在线开放课程，其中之一是[计算机科学](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-042j-mathematics-for-computer-science-fall-2010/)数学，它深入讨论了离散数学。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:10:20.247

这是您的问题：

1.  使用`=`代替`==`
2.  不在声明`()`中`if`

从改变

```
if ($_POST['vendor']='ClearAccess') && ($_POST['model']='M404') || ($_POST['model']='M405') || ($_POST['model']='M505') || (_$POST['model']='M505N') || ($_POST['model']='Legacy') 
```

至 ：

```
if (($_POST['vendor']=='ClearAccess') && ($_POST['model']=='M404') || ($_POST['model']=='M405') || ($_POST['model']=='M505') || (_$POST['model']=='M505N') || ($_POST['model']=='Legacy')) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:10:20.477

首先，您需要使用`===`而不是`=`. 单个等号意味着分配，而不是比较。

其次，我认为你想做的是说“如果是这个供应商和这些模型之一，做点什么。如果是这样，试试这个：

```
 if($_POST['vendor'] === 'ClearAccess' && (*various models, using ||*))
       //dostuff 
```

这样，它将等同于`true`供应商是否与至少一个模型相同。

一个更好的方法是建立一个包含各种模型的数组，然后使用 PHP 的[`in_array()`](http://php.net/manual/en/function.in-array.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:09:27.380

您必须在 if 条件中`==`使用`=`。

所以而不是：

```
if ($_POST['vendor']='ClearAccess') && ... 
```

利用

```
if ($_POST['vendor'] == 'ClearAccess') && ... 
```

最好有这样的 if 条件：

```
if ($_POST['vendor'] == 'ClearAccess') &&
    str_replace(array('M404', 'M405', 'M505', 'M505N', 'Legacy'), '', $_POST['model']) 
         != $_POST['model']
   )
   echo "You have not selected a valid vendor/model combination" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T18:10:51.907

您应该查看 if then 语句的 php 语法[http://php.net/manual/en/control-structures.if.php](http://php.net/manual/en/control-structures.if.php)因为您的语法是错误的。您正在将您的帖子变量分配给使用 == 以外的值

> if ($_POST['vendor']=='VisionNet')
> 另外，你应该重新考虑你的 $$ 和 || 使用并决定程序中实际在说什么。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T18:14:43.737

你需要把你的（）的权利...

只是为了让您了解语法，这里是带有漂亮换行符的代码:)

```
if (
($_POST['vendor'] == 'ClearAccess' && $_POST['model'] = 'M404') || 
$_POST['model'] == 'M405' || 
$_POST['model'] == 'M505' || 
$_POST['model'] == 'M505N' ||
$_POST['model'] == 'Legacy'
) {
echo "You have not selected a valid vendor/model combination"
} 
```

并且没有换行符：

```
if (($_POST['vendor'] == 'ClearAccess' && $_POST['model'] == 'M404') || $_POST['model'] == 'M405' ||  $_POST['model'] == 'M505' || $_POST['model'] == 'M505N' || $_POST['model'] == 'Legacy') {
echo "You have not selected a valid vendor/model combination"
} 
```

你的另一个陈述也是如此。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-03T18:11:46.937

将您的 && 包裹在自己的括号中。所以下面的例子说明了如果 POST[vendor] 是 Clear Acces 并且 POST[model] 是 M404，或者 POST[model] 是 M405、M505、M505N 或 Legacy。

```
if (($_POST['vendor']=='ClearAccess') && ($_POST['model']=='M404')) || ($_POST['model']=='M405') || ($_POST['model']=='M505') || (_$POST['model']=='M505N') || ($_POST['model']=='Legacy') 
echo "You have not selected a valid vendor/model combination" 
```

# javascript - ArcGIS Javascript - 缩放以显示所有点

> ID：11801011
> 
> 赞同：13
> 
> 时间：2012-08-03T18:06:34.993
> 
> 标签：javascript, arcgis, esri, arcgis-js-api

我正在尝试添加一些功能，这些功能将根据查询返回的点放大/缩小地图。例如，假设我们放大了德克萨斯州。如果我执行查询并且服务返回位于德克萨斯州和加利福尼亚州的一些点，我希望地图然后缩小并显示加利福尼亚州和德克萨斯州。我一直在查看[ArcGIS JS API](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jsapi_start.htm)以了解如何实现它，但我无法弄清楚要使用哪些属性和/或方法来完成此操作。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-04T01:45:48.230

`FeatureSet`提供给的回调的属性`QueryTask`是一个数组。 `onComplete``features``Graphics`

javascript api 提供了`esri.graphicsExtent(graphics)`可以接受该数组`Graphics`并计算其范围的函数。计算出范围后，`map.setExtent(extent)`可用于将地图缩放到该范围。

应该注意[的是，文档](https://developers.arcgis.com/javascript/3/jsapi/esri.graphicsutils-amd.html#graphicsextent "esri.graphicsExtent(...)")指定`esri.graphicsExtent(...)`“如果范围高度和宽度为 0，则返回 null。” 如果返回的`Graphics`数组中只有一个点，就会发生这种情况，因此您需要检查它。

这是一个示例`QueryTask` `onComplete`回调，可用于将地图缩放到查询返回的点的范围：

```
function onQueryComplete(returnedPointFeatureSet){
  var featureSet = returnedPointFeatureSet || {};
  var features = featureSet.features || [];

  var extent = esri.graphicsExtent(features); 
  if(!extent && features.length == 1) {
    // esri.getExtent returns null for a single point, so we'll build the extent by hand by subtracting/adding 1 to create x and y min/max values
    var point = features[0];
    extent = new esri.geometry.Extent(point.x - 1, point.y - 1, point.x + 1, point.y + 1, point.spatialReference);
  }

  if(extent) {
    // assumes the esri map object is stored in the globally-scoped variable 'map'
    map.setExtent(extent)
  }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-21T09:20:29.700

我同意，`map.setExtent(extent, true)`是去这里的方式。另一个观察：如果我们只有一个点，值得考虑简单地使用`map.centerAndZoom(point, ZOOM_LEVEL)`而不是创建一个范围。然后，我们可以这样：

```
function onQueryComplete(returnedPointFeatureSet){
  var featureSet = returnedPointFeatureSet || {};
  var features = featureSet.features || [];

  var extent = esri.graphicsExtent(features); 
  if(!extent && features.length == 1) {
     var point = features[0];
     map.centerAndZoom(point, 12);
  } 
  else {
     map.setExtent(extent, true);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-28T13:48:48.730

以这种方式从某个点创建范围不是一个好主意。如果单位是度数，您可以获得很大的度数。相反，您可以使用 geometryEngine 在该点周围做一个缓冲区

```
function onQueryComplete(featureSet){
  if (featureSet.features.length) {
    var extent = esri.graphicsUtils.graphicsExtent(featureSet.features); 
    if(!extent && featureSet.features.length == 1 && featureSet.features[0].geometry.type == "point") {
      var point = featureSet.features[0];
      var extent = esri.geometry.geometryEngine.buffer(point.geometry, 1, "meters").getExtent();
    }
    // assumes the esri map object is stored in the globally-scoped variable 'map'
    map.setExtent(extent)
  }
} 
```

# php - 如何使用带有附件的 PEAR Mail 包使用 PHP 发送电子邮件

> ID：11801013
> 
> 赞同：5
> 
> 时间：2012-08-03T18:06:36.427
> 
> 标签：php, email, pear, mail-mime

我正在尝试使用带有附件的 PEAR 邮件包发送一封带有 PHP 的电子邮件。该电子邮件使用我从互联网上获得的代码成功发送。但是，不会发送或附加附件。我哪里错了，下面是我的代码。

```
<?php

require_once "Mail.php"; 
require_once "Mail/mime.php";

$from = "<my.name@company.com>";
$to = "<myname@gmail.com>";
$subject = "Testing email from PHP with attachment";
$body = "Testing email from PHP with attachment";
$file = "invoices/PRINV7_3.pdf";
$host = "host";
$port = "25";
$username = "username";
$password = "password";

$headers = array ('From' => $from,
  'To' => $to,
  'Subject' => $subject);

$mime = new Mail_mime();

if ($mime->addAttachment($file,'application/pdf')){
    echo "attached successfully! </br>";
} else {
    echo "Nope, failed to attache!! </br>";
}

$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$mail = $smtp->send($to, $headers, $body);

if (PEAR::isError($mail)) {
  echo("<p>" . $mail->getMessage() . "</p>");
 } else {
  echo("<p>Message successfully sent!</p>");
 }

?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T18:25:53.737

我还没有检查此代码，所以如果不工作，我很抱歉

```
include 'Mail.php';
include 'Mail/mime.php';

$text = 'Text version of email';
$html = '<html><body>HTML version of email</body></html>';
$file = '/home/richard/example.php';
$crlf = "\n";
$hdrs = array(
    'From' => 'you@yourdomain.com',
    'Subject' => 'Test mime message'
);
$host = "host";
$port = "25";
$username = "username";
$password = "password";

$mime = new Mail_mime(array('eol' => $crlf));

$mime->setTXTBody($text);
$mime->setHTMLBody($html);
$mime->addAttachment($file, 'text/plain');

$body = $mime->get();
$hdrs = $mime->headers($hdrs);

$mail = & Mail::factory('smtp',
  array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));
$mail->send('postmaster@localhost', $hdrs, $body); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:15:48.590

我相信您需要将`$mime`对象中的标题添加到您的`$headers`

```
$attachmentheaders = $mime->headers($headers); 
```

然后更改您的邮件呼叫：

```
$mail = $smtp->send($to, $attachmentheaders, $body); 
```

这是一个可能有帮助的教程：http: [//www.html-form-guide.com/email-form/php-email-form-attachment.html](http://www.html-form-guide.com/email-form/php-email-form-attachment.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-11T19:51:17.823

```
<?php
include 'Mail.php';
include 'Mail/mime.php' ;
$text = 'Text version of email';
$html = '
<html>
<body>HTML version of email</body>
</html>
';
$file = '/home/richard/example.php';
$crlf = "\n";
$hdrs = array(
'From'    => 'you@yourdomain.com',
'Subject' => 'Test mime message'
 );
$mime = new Mail_mime(array('eol' => $crlf));
$mime->setTXTBody($text);
$mime->setHTMLBody($html);
$mime->addAttachment($file, 'text/plain');
$body = $mime->get();
$hdrs = $mime->headers($hdrs);
$mail =& Mail::factory('mail');
$mail->send('postmaster@localhost', $hdrs, $body);
?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-21T17:16:36.613

这是我的一个应用程序的工作代码：

```
/**
  *  
  * @param type $recipient
  * @param type $subject
  * @param type $message
  * @param type $attachment
  *  
  * To make this mail PEAR work, I needed to do:
  * pear install mail
  * pear install Net_SMTP
  * pear install Mail_Mime
  * 
*/

public function sendmail($recipient, $subject, $message, $attachment = '') {
require_once "Mail.php";
require_once "Mail/mime.php";
$from = "Dispatcher <server@mymailserver.com>";
$host = "smtp.mymailserver.com";
$port = "587";
$username = "mailuser";
$password = "password";

$headers = array ('From' => $from, 'To' => $recipient, 'Subject' => $subject);

if ($attachment != '') {
  $crlf = "\n";
  $mime = new Mail_mime($crlf);
  $mime->setTXTBody($message);
  $mime->addAttachment($attachment, 'application/pdf');
  $body = $mime->get();
  $headers = $mime->headers($headers);
} else {
  $body = $message;
}

$smtp = Mail::factory('smtp',
  array ('host' => $host,
    'port' => $port,
    'auth' => true,
    'username' => $username,
    'password' => $password));

$smtp->send($recipient, $headers, $body);
} 
```

# android - 需要杀死并重新启动一个线程

> ID：11801014
> 
> 赞同：0
> 
> 时间：2012-08-03T18:06:48.570
> 
> 标签：android, multithreading, thread-safety

我在调用播放音频文件的方法时启动了一个线程。

代码第一次运行正常，但是当我再次调用 play 方法时，我需要启动线程，就像第一次调用它一样。我试图中断线程甚至停止它，但似乎没有任何效果。

如何正确重启线程？

这是一些帮助解释的代码。

全局变量

```
private Thread thread1; 
```

线程代码：

```
thread1 = new Thread(new Runnable() 
    {
        @Override
         public void run() 
        {
             try {
             int i=0;

             final TextView timeDuration = (TextView) findViewById(R.id.timeDisplay);
             final SeekBar seekBar = (SeekBar)findViewById(R.id.seekBar1);
             while (running)
             {
                info();
                j = 0;
                while(i>0 && running)
                {

                while(j<duration && running && (playStatus.getValue() == "TRANSITIONING" ||         playStatus.getValue() == "PLAYING"))
                {

                seekBar.setMax((int) duration);
                seekBar.setProgress(0);

                runOnUiThread(new Runnable() 
                { 
                                    public void run() 
                                    {
                                        System.out.println("PLAYBACK STATUS: "+playStatus.getValue());
                                        timeDuration.setText(""+(j+1));
                                        seekBar.setProgress(j+1);
                                            if(j==(duration-1))
                                        {
                                            setRunning(false);
                                        }

                                    }
                });
                Thread.sleep(1 * 1000);
                j++;
                if(seekBar.getProgress() == seekBar.getMax())
                {

                runOnUiThread(new Runnable() 
                    { 
                                        public void run() 
                                        {
                                            playButton.setVisibility(View.VISIBLE);
                                            pauseButton.setVisibility(View.GONE);
                                            timeDuration.setText(""+"0");
                                            seekBar.setProgress(0);
                                            flag = false;
                                            System.out.println("J VALUE 1: = "+j);
                                            duration = 0;
                                            setRunning(false); 
                                        }
                    });
                }

                }
                }

                j = 0;
                        i++;
                        Thread.sleep(1 * 1000);
                    }

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
         }
    });

    play(); 
```

此代码工作正常并播放曲目。然后它重置搜索栏并等待再次调用播放方法。

```
public void play()
{

    try 
    { 

        thread1.start();
    } 
    catch(Exception e) 
    { 
            return; 
    }

} 
```

这里是推荐给我的 setRunning 方法。

```
public void setRunning(boolean b)
{
      this.running = b;
} 
```

如果有人知道这个问题的解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:14:31.493

不应手动停止线程。您应该使用布尔值而不是`true`在`while`循环中，并`false`在您想停止时将布尔值放入 setter 中：

```
private boolean running;

@Override
public void run(){
  running = true;
  while(running) {...}
}

public void setRunning(boolean b){
  this.running = b;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:29:09.593

要重新启动播放器，您需要再次准备。

```
 public void restartAudio() {
        Log.e(TAG, "restartAudio");
        if (mp.isPlaying()) {
            mp.seekTo(0);
        }else{
            mp.stop();
            try {
                mp.prepare();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T20:21:53.403

当使用额外的布尔标志来控制线程的 while 循环时，不要忘记在其上使用 volatile 修饰符：

```
 private volatile boolean running; 
```

或放置适当的同步。

除此之外，我会考虑使用 Thread.isInterrupted() 方法而不是额外的“运行”标志： [http ://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html #isInterrupted()](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#isInterrupted())

这就是为什么： [https ://stackoverflow.com/a/3196058/1350225](https://stackoverflow.com/a/3196058/1350225)

# ruby - 使用 Ruby 与已打开且可见的网页进行交互

> ID：11801022
> 
> 赞同：0
> 
> 时间：2012-08-03T18:07:37.113
> 
> 标签：ruby, automation, screen-scraping, web-scraping, interactive

我知道像 Mechanize 这样的宝石，它可以让你打开一个网站，提供凭据，例如抓取内容。我也知道 AutoIt 及其通过 Ruby 与已打开的窗口交互的用途，但我想知道是否有更好、更像 Ruby 的东西，例如 Mechanize，但对于已经打开且可见的站点，它会简化某些站点的登录过程在我所知道的宝石中并不容易做到。我打算用它来半自动化频繁的任务，这些任务很难用机器人登录，也有更多的视觉交互。我用 Sikuli 尝试过，但虽然承诺它还不可靠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:17:00.840

尝试通过将 jquery 注入页面并为您访问的“已经在浏览器中打开”的每个频繁站点编写少量自定义登录脚本来使用 javascript 和 jquery

然后将 javascript 书签存储在您的收藏夹中。

Textmate 有一个不错的插件，用于将 javascript 转换为书签。在控制台中测试，然后将其转换并用作书签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T02:23:49.817

你正在寻找瓦提尔。它从 ruby​​ 自动化浏览器。

# python - 将 Linux 终端放在 wxPython 窗口中

> ID：11801025
> 
> 赞同：2
> 
> 时间：2012-08-03T18:07:53.187
> 
> 标签：python, wxpython

我是 wxPython 的初学者，我有两个问题：

1.  如何将 Linux 终端放入 wxPython？

2.  如何连接事件，例如，选项卡（class1、class2 等）中的组合框（或其他）的事件以在 TextControl（在 class2 中）中写入文本？

![例子](../Images/a682cbae5b194d820775477efca907db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:26:44.590

“Linux 终端”是一个文本控制台，需要与帧缓冲区或其他显示驱动程序通信，因此如果不做大量工作，您将无法将其放在窗口中。

但希望你真正想要的只是把任何像样的终端放在那里——你可以在其中运行 shell 的东西，理想情况下，它会匹配一些 TERMCAP 条目，这样它就可以做诸如诅咒之类的事情。你可以自己构建类似的东西，但这是很多工作。一个更简单的解决方案是为此使用预先存在的库之一，例如[wxTerm](http://jeremysalwen.github.com/TerminalWx/classwxTerm.html)。

# android - 设备启动后如何获取启动服务的参数？

> ID：11801033
> 
> 赞同：0
> 
> 时间：2012-08-03T18:08:42.813
> 
> 标签：android, android-service

我正在尝试在设备启动后启动服务。问题是该服务需要一些通常以这种方式获得的参数：

```
public class ServiceClass extends Service {
    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {
        searchString = (String) intent.getExtras().get(GET_SEARCHSTRING_AFTER_START);
        [...]   
        return START_STICKY;

    public  static final String GET_SEARCHSTRING_AFTER_START = "SEARCHVALUE";

    public class OnStartupStarter[...]

} 
```

但是，当设备启动时应该通过 BroadcastReceiver 启动服务时，我无法放置 searchString，因为这是由活动给出的。当服务在设备启动后启动时，服务应该以它在设备关闭之前的 searchString 开始。

*BroadcastReceiver 是服务类的子类：*

```
public static class OnStartupStarter extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {

        /* TODO: Start the service with the searchString it 
         * had before the device has been turned off...
         */
    }
} 
```

*通常服务是这样启动的：*

```
private OnCheckedChangeListener ServiceSwitchCheckedStatusChanged 
= new OnCheckedChangeListener() {
     public void onCheckedChanged(CompoundButton buttonView,
            boolean isChecked) {
        Intent s = new Intent(getBaseContext(), ServiceClass.class);

        s.putExtra(ServiceClass.GET_SEARCHSTRING_AFTER_START, <ARGUMENT>);
        if(isChecked)
            startService(s);
        else
            stopService(s);
    }
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:26:56.340

将最后一个搜索字符串保存`SharedPreference`在活动方法中，当您收到广播`onPause`时检索最后一个搜索字符串并像往常一样启动您的服务。`BootCompleted`

**活动：**

```
protected void onPause() {
    super.onPause();

    SharedPreferences pref = getSharedPreferences("my_pref", MODE_PRIVATE);
    SharedPreferences.Editor editor = pref.edit();
    editor.putString("last_search", mLastSearch);
    editor.commit();
} 
```

**广播接收器：**

```
public static class OnStartupStarter extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();

        if (action.equals(Intent.ACTION_BOOT_COMPLETED)) {
            SharedPreferences pref = context.getSharedPreferences("my_pref", MODE_PRIVATE);
            String lastSearch = pref.getString("last_search", null);
            if (lastSearch != null) {
                // TODO: Start service
            }
        }
    }
} 
```

# android - 在 Android 中展平 ExpandableListView

> ID：11801035
> 
> 赞同：1
> 
> 时间：2012-08-03T18:08:45.013
> 
> 标签：android

有没有办法在 Android 中展平 ExpandableListView？我有一个 ExpandableListView，当用户在其中搜索特定字符串时，我不想显示组，而是显示与搜索字符串匹配的所有子项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:15:34.693

我认为可能有**两种**方式：

**[1]**在您的 XML 中获取另一个列表视图（默认隐藏）用于搜索匹配结果显示，当搜索发生时，**隐藏 ExpandableListView**并**设置 Visibility = VISIBLE 另一个隐藏的简单列表视图**

但是，通过这种方式，您必须放置一些像 OK 这样的按钮，当用户看到搜索到的 List 时，按 OK 它可以看到 ExpandableListView。

**[2]**当显示搜索结果时，您可以设置**CHILD CLASS**的自定义行来设置**Left MARGIN = --10dp（或需要的东西） 。**您还必须在搜索时使用**FLAG**。并且在适配器中通过检查这个 FLAG 必须设置 textview 的左边距。

* * *

**编辑第三种方式**

* * *

**[3]**如果设置了标志，则用 SEARCHED 项填充 GROUP-LIST。取另一个 Extra Blank-List 并 **用 Blank-List 填充 Child-List**。

这样就不需要设置Left Margin。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T22:09:04.803

在适配器中，返回一个空视图。这将阻止组视图显示：

```
public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
    return new View(parentActivity);
} 
```

在 ExpandableListView 中，展开所有组：

```
int count = adapter.getGroupCount();
for (int i=0; i<count; i++)
{
    listView.expandGroup(i);
} 
```

# ruby-on-rails - rails params hash 如何对控制器方法可用

> ID：11801038
> 
> 赞同：0
> 
> 时间：2012-08-03T18:08:52.587
> 
> 标签：ruby-on-rails, hash, params

我知道 rails`params`哈希在我的控制器方法中可用，但我试图了解这是*如何*发生的。它是传递给方法的参数吗？如果是这样，我们如何访问它，因为控制器方法没有任何声明的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:24:06.230

它不是参数，它实际上只是一个“getter”函数，在[https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/http/parameters.rb中声明](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/http/parameters.rb)

所以对 params[:something] 的调用实际上是一个返回哈希的方法调用，您可以从中访问 http 参数。

# c# - 开发环境设置 - 使用 C# Web 服务和 MS SQLServer 的 iphone iOS

> ID：11801041
> 
> 赞同：0
> 
> 时间：2012-08-03T18:09:06.560
> 
> 标签：c#, ios, sql-server-2008, development-environment

设置开发环境的最佳（或最简单）方法是： - 在 MAC 中使用 Xcode 开发 iOS（iphone）应用程序 - iphone 应用程序将调用用 C#（Windows 笔记本电脑）编写的 .NET Web 服务 -数据库是 MS SQLServer 2008 R2（Windows 笔记本电脑）

我知道如果我使用 PHP/MySQL，我可以在我的 MAC 中完成所有这些操作，但我确实需要 C#/MS SQL 组合。

提前致谢。

西塔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:15:11.463

如果您无法访问专用的 Windows 开发环境，我建议您在 Mac 上安装[VMWare Fusion](http://www.vmware.com/products/fusion/overview.html)或[Parallels ，并在 VM 中进行 Windows 开发。](http://www.parallels.com/products/desktop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:14:42.927

你能不能只部署 Web 服务（在网络上？）并远程测试你的 API 调用？

或者，将机器联网，以便您可以访问开发副本，或使用 Parallels Desktop 之类的工具在您的 Mac 环境中运行 Windows。相关：[Mac 上的 Visual Studio](https://stackoverflow.com/questions/413820/visual-studio-on-a-mac)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:26:40.703

如果两台机器都启动并运行，XCODE、VS 和 SQL Server 已经安装，那么我看不出问题。

您只需要在您的 Windows 机器中配置特殊的东西，因此它非常适合 Web 服务开发。跳过您可能已经完成的步骤。

1) 安装 IIS 6 / 7 (取决于您的 windows 版本) 2) 安装 ASP.NET 3) 关闭家庭网络的防火墙，或配置一些允许入站流量到 HTTP/HTTPS 端口的权限。4) 确保您的家庭网络中有一个静态 IP 地址，或者，确保您的机器名称可从您的 Mac 解析 DNS。

您需要 IIS，因为 Visual Studio 内部 Web 服务器不允许远程连接。

现在，如果 Web 服务在 IIS 中运行，您如何调试 C# 代码？两个选项：

1）（简单）在解决方案资源管理器中，右键单击您的 Web 项目，选择属性，选择 Web，在名为“服务器”的部分中选择使用本地 IIS WebServer 并命名您的虚拟文件夹。您将能够轻松调试。

2）（中）您可以将您的 Web 应用程序发布到本地 IIS，使其运行，然后从 Visual Studio 使用调试 -> 附加到进程菜单将自己附加到 w3wp.exe。问题是，如果您有多个应用程序池，找到您的应用程序会很有趣。

# javascript - 获取一个复选框来编写一个 JavaScript cookie

> ID：11801042
> 
> 赞同：0
> 
> 时间：2012-08-03T18:09:13.153
> 
> 标签：javascript, cookies, checkbox, setcookie

我有一个带有初始屏幕的页面，用户可以在其中选择两种语言中的一种，以显示网站的其余部分。每个语言选项旁边都有一个“记住我的选择”、HTML 表单、复选框。如何让选中的复选框写入带有语言首选项的 cookie，这将在未来访问时跳过启动屏幕？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:17:00.323

可能你可以使用类似下面的东西，注意代码未经测试：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd">
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript">
  function setCookie(c_name,value,expiredays) {
        var exdate=new Date()
        exdate.setDate(exdate.getDate()+expiredays)
        document.cookie=c_name+ "=" +escape(value)+((expiredays==null) ? "" : ";expires="+exdate)
    }

    function getCookie(c_name) {
        if (document.cookie.length>0) {
            c_start=document.cookie.indexOf(c_name + "=")
            if (c_start!=-1) { 
                c_start=c_start + c_name.length+1 
                c_end=document.cookie.indexOf(";",c_start)
                if (c_end==-1) c_end=document.cookie.length
                    return unescape(document.cookie.substring(c_start,c_end))
            } 
        }
        return null
    }
onload=function(){
document.getElementById('linksNewWindow').checked = getCookie('linksNewWindow')==1? true : false;
}
function set_check(){
setCookie('linksNewWindow', document.getElementById('linksNewWindow').checked? 1 : 0, 100);
}
</script>
</head>
<body>
<div>Hi</div>
<input type="checkbox" id="linksNewWindow" onchange="set_check();">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:18:52.477

这是 javascript cookie 的一个很好的参考，[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)，我建议使用 PHP 而不是 javascript 这样做只是因为我的 cookie 和会话功能在服务器端更强大脚本。

> document.cookie
> 
> ^ 这是代表​​页面 cookie 的 js 代码。

# php - 如何从数组中获取值

> ID：11801043
> 
> 赞同：-5
> 
> 时间：2012-08-03T18:09:15.220
> 
> 标签：php, arrays

我正在尝试从长数组值中获取字符串。

例如

```
$array[1]='this is a good day. The number:1, class:math';
$array[2]='this is a bad day. The number:2, class:english';
$array[3]='this is a fine day. The number:3, class:physics'; 
```

我想从数组中取出`number:1`or`class:math`字符串。

我试过了

```
echo array_search('number:1',$array); 
```

但它什么也没给我。我想知道是否有更好的方法来做到这一点。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:15:44.117

我猜你正在寻找类似下面的东西。在数组的值内搜索针。

```
<?php
function array_search_inline($needle, $haystack) {
    foreach ($haystack as $key => $value) {
        if (strpos($value, $needle) !== false) {
            return $key;
        }
    }
    return false;
}
?> 
```

注意：`array_search`只是比较数组的值，而不是在它们内部搜索。

# jquery - 使用 jQuery 向页面上的图像等添加类属性？

> ID：11801056
> 
> 赞同：10
> 
> 时间：2012-08-03T18:10:14.700
> 
> 标签：jquery, class, attributes, add

丽来帮忙？由于我的 jQuery.noob 状态而提前道歉，但我正在画一个空白并且关于为什么这不起作用的想法。也许这里有人可以看到我看不到的东西？我肯定会很感激任何帮助。

## **问题**

这个网页上有几个我想添加类的图像（还有段落等）。他们目前没有关于他们的课程。

## **为什么我要添加一个类**

我想使用 CSS3 来定位该类并设置任何具有它的样式。更具体地说，这将是一个弹出菜单，我想调整它的不透明度并为其进入和退出设置动画。

## **我如何尝试这样做**

```
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $("document").ready(function() {
        $("img").addClass("menumain");
                   alert("Here I am!"); //This alert will go when I figure this out, I just added it to see if it pops up (it does).
    });
</script> 
```

## **我也试过这种方式（*注意：我所有的图像在文件名中都包含字符串“menumain-”*）**

```
<script type="text/javascript" src="../jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $("document").ready(function() {
        $("img[src*=menumain-]").attr({class:"menumain"});

    });
</script> 
```

## **那么当我尝试它时会发生什么？**

没有什么。我加载页面，（该警报确实弹出，我将其关闭）然后使用 firebug 和/或 Safari 开发人员工具等展开正文，并深入到页面上的图像。我看到了图像属性，但我没有看到类是在哪里添加的，更不用说定义为“menumain”，这是我想要的类。

## **为什么这让我发疯的部分原因**

我在同一页面上有另一个 jQuery 脚本，它做类似的事情。它向围绕整个页面的主 Div 添加属性，而不是 Class 属性，而是其他属性。我对那个 jQuery 函数没有任何问题，所以我不明白为什么这个函数不起作用。

## **为什么它可能不起作用**

从周日开始，我已经检查了 9 次语法，但我没有发现任何问题。不过，您知道校对语法的作用。

其次，我要定位的图像（我还将尝试在同一类中标记菜单中的文本和按钮）如下所示隐藏在 Divs 中：

```
<div id="image194" style="visibility: inherit;">
     <a name="image194anc">
          <img width="317" height="564" border="0" alt="menumain-bg-317x564"    src="images/menumain-bg-317x564.png" name="image194Img">
     </a>
</div> 
```

我假设我的目标*$("img[src* =menumain-]")* 会找到这些图像，无论它们是否在 Divs 中，但也许我错了？

## **还有一件事**

这个“网页”是由 Trivantis 的名为 Lectora 的应用程序生成的。这是一个所见即所得的创作工具，适用于创建在线培训的教学设计师（不是网络开发人员）。所以这并不是说我是在 DreamWeaver 中创建这整个东西，或者可以改变整个网页设计方法。但是我应该能够在一组页面元素上弹出一个类并使用 CSS 定位它们，不是吗？

如果您发现任何问题，请告诉我。这是页面的一个版本--> [http://bit.ly/Rijnl8](http://bit.ly/Rijnl8)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T18:15:24.223

jQuery 有一个用于添加类的内置方法。

```
<script type="text/javascript" src="../jquery-1.7.2.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("img[src*=menumain-]").addClass("menumain");

    });
</script> 
```

[http://api.jquery.com/addClass](http://api.jquery.com/addClass)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:30:17.197

您可以将想要样式的图像放入容器 div 中，然后执行

```
$('.container').addClass('yourClass'); 
```

然后在课堂上，使用

```
.yourClass img {} 
```

为这些容器中的所有图像设置样式。这是一种解决方法，但它应该可以解决您的问题！此外，在 HTML5 中，不再需要使用 inside 标签`type="text/javascript"`。`<script>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:13:01.743

只需在我构建的应用程序中执行此操作。你在做正确的事，但你做得还不够。使用 .attr 函数时添加一个值：

```
$('.category').attr('theAttributeHere','theAttributeValueHere'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:17:22.633

这似乎是你想要的[http://jsfiddle.net/dstarh/Kxfg7/1/](http://jsfiddle.net/dstarh/Kxfg7/1/)

为页面上的每个图像添加一个类

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-16T12:05:51.210

在 Lectora 11 中，您可以向任何对象添加类。选择对象 > 属性选项卡 > 外观部分 > 单击角落中的小箭头。

# django - Django模板：如何显示其键中有一个点的dict？d['key.name']

> ID：11801061
> 
> 赞同：4
> 
> 时间：2012-08-03T18:10:43.737
> 
> 标签：django, templates, filter, tags

我有一本这样的字典：

```
dict_name['keyname.with.manydots'] 
```

问题：我不能做

```
{{ dict_name.keyname.with.manydots }} 
```

我知道用 Django 的模板不可能做到这一点。但是你找到的最好的解决方法是什么？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:47:52.263

您可以编写[自定义模板过滤器](https://docs.djangoproject.com/en/dev/howto/custom-template-tags/#writing-custom-template-filters)：

```
from django import template

register = template.Library()

@register.filter
def get_key(value, arg):
    return value.get(arg, None) 
```

在你的模板中

```
{{ my_dict|get_key:"dotted.key.value" }} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T18:47:42.053

一种可能的解决方案是创建一个模板标签，其中字典作为变量，键作为参数。请记住模拟 Django 对失败的属性查找的默认行为，这不应该引发错误，因此返回一个空字符串。

```
{{ dict_name|get_value:"keyname.with.manydots" }}

@register.filter
def get_value(dict_name, key_name):
    return dict_name.get(key_name, '') 
```

# javascript - Kinetic.js – 创建网格

> ID：11801062
> 
> 赞同：0
> 
> 时间：2012-08-03T18:10:45.237
> 
> 标签：javascript, html5-canvas, kineticjs

我是 Kintetic.js 的新手，我正在尝试做一个网格。宽度为 800 像素，高度为 400 像素。我希望正方形（20x20）覆盖该区域。每个方块都有一个 1px 的边框。所以是这样的：

```
var box = new Kinetic.Rect({
  width: 20,
  height: 20,
  fill: 'transparent',
  stroke: 'rgba(0, 0, 0, 0.02)'
}); 
```

为了填充画布，我有一个像这样的糟糕 for 循环：

```
for (var i = 0; i <= this.field.getWidth(); i = i + 20) {
  for (var i2 = 0; i2 <= this.field.getHeight(); i2 = i2 + 20) {
    var cbox = box.clone({x: i, y: i2});
    this.grid.add(cbox);
  }
} 
```

**this.grid**是 Kinetic.Layer。这段代码的第一个问题是它非常慢，在网格出现之前我得到了 500 毫秒的延迟。但最糟糕的是，如果我在 cbox 上放置一个 mouseover 和 mouseout 事件来更改填充颜色，那么渲染速度真的很慢。我就是这样做的：

```
cbox.on('mouseover', function () {
  this.setFill('black');
  self.grid.draw();
});

cbox.on('mouseout', function () {
  this.setFill('transparent');
  self.grid.draw();
}); 
```

所以我的问题是如何改进代码和性能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T19:44:23.837

如何用线条制作网格并使用一个矩形来突出显示光标？在这里，我为您编写了示例：http: [//jsfiddle.net/e_aksenov/R72Xu/30/](http://jsfiddle.net/e_aksenov/R72Xu/30/)

```
var CELL_SIZE = 35,
w = 4,
h = 5,
W = w * CELL_SIZE,
H = h * CELL_SIZE;

var make_grid = function(layer) {
var back = new Kinetic.Rect({
    x: 0,
    y: 0,
    width: W,
    height: H,
    fill: "yellow"
});
layer.add(back);
for (i = 0; i < w + 1; i++) {
    var I = i * CELL_SIZE;
    var l = new Kinetic.Line({
        stroke: "black",
        points: [I, 0, I, H]
    });
    layer.add(l);
}

for (j = 0; j < h + 1; j++) {
    var J = j * CELL_SIZE;
    var l2 = new Kinetic.Line({
        stroke: "black",
        points: [0, J, W, J]
    });
    layer.add(l2);
}
    return back; //to attach mouseover listener
};

var cursor_bind = function(layer, grid_rect, rect) {

grid_rect.on('mouseover', function(e) {
    var rx = Math.floor(e.x / CELL_SIZE);
    var ry = Math.floor(e.y / CELL_SIZE);
    rect.setPosition(rx * CELL_SIZE, ry * CELL_SIZE);
    layer.draw();
});
};

var stage = new Kinetic.Stage({
container: "kinetic",
width: 800,
height: 600,
draggable: true
});

var layer = new Kinetic.Layer();

var rect = new Kinetic.Rect({
x: 0,
y: 0,
width: CELL_SIZE,
height: CELL_SIZE,
fill: "#00D2FF",
stroke: "black",
strokeWidth: 4
});

var gr = make_grid(layer);
cursor_bind(layer, gr, rect);

// add the shape to the layer
layer.add(rect);

// add the layer to the stage
stage.add(layer);​ 
```

# css - IE8 背景图像在我单击并拖动之前不显示

> ID：11801063
> 
> 赞同：1
> 
> 时间：2012-08-03T18:10:46.967
> 
> 标签：css, internet-explorer, internet-explorer-8, background-image

这是我见过的最奇怪的 IE 错误。

我通过这个设置了背景图像：

```
html {
    background: url('../res/bg_image.png') no-repeat center center fixed;
    background-size: cover;
} 
```

该图像在 Chrome 和 Firefox 中显示，但在 IE8 中不显示。

但。如果我单击并拖动屏幕上的任意位置，则会显示图像（尽管它没有完全覆盖屏幕）。在此之后，我可以单击并拖动其他任何地方，甚至突出显示文本，并且图像保持不变。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:14:02.760

IE8 不支持背景大小。那可能是你的问题。 [http://caniuse.com/#search=background-size](http://caniuse.com/#search=background-size)

# linux - Shell 脚本 - 检查参数上的数字是否唯一

> ID：11801066
> 
> 赞同：1
> 
> 时间：2012-08-03T18:10:51.620
> 
> 标签：linux, shell, testing, scripting, arguments

我正在编写一个脚本，它需要一个 3 位数字并检查它们是否唯一并生成每个数字的文件，例如，如果我运行“myscript 123”，它将生成三个文件：file1、file2 和 file3 但是如果我运行“我的脚本 121”它将生成 file1 和 file2

我需要帮助来查看参数并比较每个数字，有人可以帮帮我吗？

这是我到目前为止所写的：

```
if [ $1 -gt 99 ] && [ $1 -lt 1000 ]
then
   echo "Your three digit number: $1"
else
   echo "please restart and enter a 3-digit number"
   exit
fi 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:34:43.997

> 我最大的挑战是检查 1 美元并查看每个数字是什么，我一无所知

有几种方法可以从字符串中检索每个字符。例如，您可以借助以下方法将它们拆分为一个数组[`fold`](http://unixhelp.ed.ac.uk/CGI/man-cgi?fold)：

```
$ IN="123"
$ DIGITS=($(echo $IN | fold -w1))
$ echo ${DIGITS[0]}
1
$ echo ${DIGITS[1]}
2 
```

或者您可以使用变量子字符串提取（请参阅[文档](http://tldp.org/LDP/abs/html/string-manipulation.html)）：

```
$ IN="123"
$ echo ${IN:0:1}
1
$ echo ${IN:1:1}
2 
```

或者，您可以使用[`let`](http://ss64.com/bash/let.html)执行基本的模运算：

```
$ IN="123"
$ let A="IN % 10"  # get last digit (3rd)
$ ((IN /= 10))     # divide by 10 (which discards last digit)
$ let B="IN % 10"  # get last digit (2nd)
$ ((IN /= 10))     # divide by 10 (which discards last digit)
$ let C="IN % 10"  # get last digit (1st)
$ echo $A
3
$ echo $B
2
$ echo $C
1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:37:20.797

您可以使用模数和除法运算符来提取数字，然后进行比较。或者您可以使用“echo”、“head”和“tail”的组合来提取数字。例如：

```
digit2=$(echo $1|head -c 2|tail -c 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:46:56.050

这只会生成文件名，我从不同的角度解决这个问题。我们在这里谈论数字。因此，您最多可以创建十个文件。因此，我们不是孤立每个数字，而是查找每个数字，看看它是否存在于给定的数字中：

```
function files_for_digits {
    [[ $1 != [0-9][0-9][0-9] ]]  && 
        echo "specify a three digit number" >&2 && return 1

    typeset i
    for i in {0..9}; do
        [[ $1 == *$i* ]] && echo file$i
    done
} 
```

# git - Git：如何从“分离的 HEAD”状态返回

> ID：11801071
> 
> 赞同：290
> 
> 时间：2012-08-03T18:11:08.657
> 
> 标签：git

如果要结帐一个分支：

`git checkout 760ac7e`

例如，如何在不知道其 SHA1的情况下`b9ac70b`回到最后一个已知的头部？`b9ac70b`

* * *

## 回答 #1

> 赞同：454
> 
> 时间：2012-08-03T18:20:13.767

如果您记得之前签出了哪个分支（例如`master`），您可以简单地

```
git checkout master 
```

摆脱*分离的 HEAD*状态。

一般来说：`git checkout <branchname>`会让你摆脱困境。

如果您不记得最后一个分支名称，请尝试

```
git checkout - 
```

这也会尝试检查您上次签出的分支。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-03T18:13:22.770

用于`git reflog`查找以前签出的提交的哈希值。

一个快捷命令可以到达你最后一次签出的分支（不确定这是否可以在分离的 HEAD 和中间提交中正常工作）是`git checkout -`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-04-10T09:41:47.180

我遇到了这种极端情况，我检查了以前版本的代码，其中我的文件目录结构不同：

```
git checkout 1.87.1                                    
warning: unable to unlink web/sites/default/default.settings.php: Permission denied
... other warnings ...
Note: checking out '1.87.1'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. 
Example:

  git checkout -b <new-branch-name>

HEAD is now at 50a7153d7... Merge branch 'hotfix/1.87.1' 
```

在这种情况下，您可能需要使用 --force （当您知道返回原始分支并丢弃更改是安全的事情时）。

`git checkout master`不工作：

```
$ git checkout master
error: The following untracked working tree files would be overwritten by checkout:
web/sites/default/default.settings.php
... other files ... 
```

`git checkout master --force`（或`git checkout master -f`）工作：

```
git checkout master -f
Previous HEAD position was 50a7153d7... Merge branch 'hotfix/1.87.1'
Switched to branch 'master'
Your branch is up-to-date with 'origin/master'. 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-04-28T20:13:13.323

你可能在该`detached HEAD`州做了一些新的提交。我相信如果您按照其他答案的建议进行操作：

```
git checkout master
# or
git checkout - 
```

那么你可能会失去你的承诺！相反，您可能想要这样做：

```
# you are currently in detached HEAD state
git checkout -b commits-from-detached-head 
```

然后合并`commits-from-detached-head`到你想要的任何分支，这样你就不会丢失提交。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-21T13:13:38.513

以防万一有人和我有相同的边缘情况：我有一个名为的分支`test`，并试图创建一个名为`test/my-experimental-feature`. 这让 git 感到困惑，因为它认为我指的是一个已经存在的分支。我把它改成了`test--my-experimental-feature`，它工作得很好。

# mysql - 优化后 mySQL 运行速度慢了 5 倍？

> ID：11801073
> 
> 赞同：1
> 
> 时间：2012-08-03T18:11:11.930
> 
> 标签：mysql

我有一个 Xeon 2.0Ghz 服务器（12 核），内存为 16GB，运行 Apache 和 mySQL，用于在 InnoDB（Percona）中有大约 50,000 条记录的网站。我的查询过去大约在 0.17 到 0.25 秒内返回，然后我运行 Percona 工具 mySQL 优化器，上传新的 my.cnf 文件，突然相同的查询需要 1.20 到 1.30 秒，所以大约长了 5 倍。

我做错了什么？这是我的新旧 my.cnf 文件”

新的：

```
[mysqld]
default_storage_engine         = InnoDB

key_buffer_size                = 32M
myisam_recover                 = FORCE,BACKUP

max_allowed_packet             = 16M
max_connect_errors             = 1000000

log_bin                        = /var/lib/mysql/mysql-bin
expire_logs_days               = 14
sync_binlog                    = 1

tmp_table_size                 = 32M
max_heap_table_size            = 32M
query_cache_type               = 0
query_cache_size               = 0
max_connections                = 200
thread_cache_size              = 50
open_files_limit               = 65535
table_definition_cache         = 1024
table_open_cache               = 2048

innodb_flush_method            = O_DIRECT
innodb_log_files_in_group      = 2
innodb_log_file_size           = 256M
innodb_flush_log_at_trx_commit = 1
innodb_file_per_table          = 1
innodb_buffer_pool_size        = 12G

log_error                      = /var/lib/mysql/mysql-error.log
log_queries_not_using_indexes  = 1
slow_query_log                 = 1
slow_query_log_file            = /var/lib/mysql/mysql-slow.log 
```

老的：

```
[mysqld]
innodb_buffer_pool_size = 12000M
innodb_log_file_size = 256M
innodb_flush_method = O_DIRECT
innodb_file_per_table = 1
innodb_flush_log_at_trx_commit = 2
innodb_log_buffer_size = 16M
innodb_additional_mem_pool_size = 20M
innodb_thread_concurrency = 20

read_rnd_buffer_size=50M
query_cache_size=128M
query_cache_type=1
tmp_table_size=512M
wait_timeout=90
query_cache_limit=64M
key_buffer_size=128M
max_heap_table_size=512M
max_allowed_packet=32M
log_slow_queries
log-queries-not-using-indexes
long_query_time  = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:40:16.053

跑步一段时间后你会换吗？

您可能会尝试拒绝，`innodb_buffer_pool_size` 因为您说服务器也在运行 Apache。目前，MySQL 似乎有可能为自己耗尽所有服务器内存，而没有为操作系统和 Apache 留下任何东西。

尝试设置`innodb_buffer_pool_size`为`8G`，然后设置`innodb_log_file_size`为`2G`。

你也可以升级你`innodb_thread_concurrency`的，但由于它不是一个专用的 MySQL 服务器，默认为 8 可能没问题。这取决于你拥有的 CPU，但文档说：

> 此变量的正确值取决于环境和工作负载。您将需要尝试一系列不同的值来确定适合您的应用程序的值。推荐值是 CPU 数量加上磁盘数量的 2 倍。

因此，请尝试一下，看看什么效果最好。

此外，您的数据库是否大于您拥有的 RAM 量，或者您的整个数据库是否适合内存？

请记住，由于您在同一台服务器上运行 Apache，Apache 将希望创建一堆自己的线程并消耗所有服务器进程所需的内存，如果您正在运行像 PHP 这样的东西也会占用内存。

您将必须找到一个很好的平衡点，即 Apache 和 MySQL 都可以在同一系统上以最大容量运行，但两者都没有使用太多内存，以至于另一个必须交换。

您可以排除故障或分析性能的其他方法是检查您的慢查询日志并对慢查询运行解释。此外，您可以安装 Percona 工具包并运行`pt-query-digest`以分析您的性能。[在此处](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)阅读文档。

# ruby-on-rails - 使用 Rails 编写 RSpec 测试时，spec/requests 文件夹与 spec/controllers 应该放在什么位置？

> ID：11801078
> 
> 赞同：6
> 
> 时间：2012-08-03T18:11:32.760
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec2, rspec-rails

我对 Rails 相当陌生，并试图通过从一开始就实施测试以“正确”的方式做事。昨天我使用脚手架生成器创建了我的第一个模型/视图/控制器配置。虽然有人告诉我你真的不应该使用脚手架，但它对我了解 Rails 代码的结构很有用。

我注意到的一件事是自动生成的 RSpec 主要放在***spec/controllers 文件夹***中。然而，当我观看[这一集 Railscasts](http://railscasts.com/episodes/257-request-specs-and-capybara)时，我注意到他使用了

```
rails generate integration_test [test_name] 
```

***在spec/requests 文件夹***中放置一个测试文件的命令。然而，他编写的所有测试都与控制器交互。我试图确定的是存储这些测试的最佳实践。

什么时候应该将测试存储在 spec/requests 文件夹中，什么时候应该将测试存储在 spec/controllers 文件夹中？任何反馈将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:18:51.507

实际上，这是两种类型的测试。在控制器文件夹中，您应该创建测试来测试控制器操作，在请求文件夹中，您应该放置测试以与视图交互，这实际上将测试您的所有应用程序部分，这就是为什么它被命名为集成测试。

这里有一些关于这两种测试的文章。

[http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html](http://everydayrails.com/2012/04/07/testing-series-rspec-controllers.html)

[http://everydayrails.com/2012/04/24/testing-series-rspec-requests.html](http://everydayrails.com/2012/04/24/testing-series-rspec-requests.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:26:55.580

控制器规范测试单个控制器操作的调用。通常你不会渲染视图（尽管你可以打开它），存根很多模型代码也很常见。您与被测代码的唯一交互是调用单个控制器操作。您可以将这些视为控制器的单元测试。

另一方面，请求规范测试整个堆栈（路由、控制器、视图、模型等）。您可以执行更接近用户的操作，而不是仅仅调用单个控制器操作：访问页面、填写表单、单击按钮。通常这将跨越多个动作/控制器。例如，您可以编写一个请求规范，引导用户完成将产品添加到购物车的过程，然后完成结帐所涉及的各个步骤。

您通常使用 capybara（我认为您仍然可以使用 webrat）与您生成的页面进行交互。使用合适的水豚驱动程序，页面上的 javascript 也将被执行，例如，您可以测试您的客户端 javascript 是否使用控制器生成的 json 做正确的事情（尽管您可能需要考虑编写 javascript 规范，如果您有很多）

# regex - zshell grep 负向后看

> ID：11801081
> 
> 赞同：3
> 
> 时间：2012-08-03T18:11:36.597
> 
> 标签：regex, grep, zsh

我正在尝试使用负面的后向正则表达式，但我似乎无法让它在我的 zshell 中工作。我做错了吗？

> 回声“内特或内特” | grep "(\?<!N)a"

这应该匹配`a`in **nate**但***不是***`a`in **Nate** ...对吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T00:33:01.227

当我想到前瞻或后瞻断言时，我会想到 Perl。您将需要使用 perl-regexp 和单引号来查找`a`in `nate`：

```
echo "Nate or nate" | grep -P '(?<!N)a' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:40:17.587

它应该。但是，`grep`将打印出任何匹配的行。

如果您`grep`只想打印匹配的行的部分，您应该给它`-o`选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:30:31.970

有许多不同的正则表达式风格，但 grep 的正则表达式应该看起来像这样`"(?<!N)a"`：

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:47:49.070

首先，您想使用单引号（zsh 中的双引号会尝试扩展`!N`），您可能需要扩展正则表达式（`grep -E`）。此外，根据您的 grep 版本，它可能根本不支持 0 宽度断言，请检查您的`man 7 re_format`.

# jsp - JSP：根据 java 值更改图像

> ID：11801088
> 
> 赞同：0
> 
> 时间：2012-08-03T18:11:58.260
> 
> 标签：jsp

所以我做了一个 for 循环，当它迭代时，它将使用 ajax / jquery 来更新值，但我的问题是它将如何更新页面本身的代码

假设我有一个加载图表的图像标签：

```
<img src="http://dev-server07:8080/graphs/ChartGen?PID=<% rs.getDouble(i) %>&minutes=720&height=30&width=1200"/></div> 
```

显然不起作用，但我不太确定该怎么做才能解决它？在我的脑海中应该加载

```
<img src="http://dev-server07:8080/graphs/ChartGen?PID=962&minutes=720&height=30&width=1200"/></div> Or something like that. Is there some escaping I'm screwing up? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:15:45.597

[来自 W3C](http://www.w3.org/wiki/HTML/Elements/img)：

> src = 可能被空格包围的 URL 指定引用非交互式、可选动画的图像的 URL，该图像既不是分页的也不是脚本的。

[例如，您可以使用JavaScript Image 类](http://www.devguru.com/technologies/ecmascript/quickref/image.html)动态加载图像。

干杯

# vba - vba 格式函数错误地将数字解释为日期

> ID：11801089
> 
> 赞同：4
> 
> 时间：2012-08-03T18:11:58.623
> 
> 标签：vba, ms-access

为什么 VBA 将“093 0005”解释为日期？

在 MS Access VBA 中，以下行：Format("093 0005", "0000000000000") 返回 "0000000034090"

34090 是日期 5/1/1993 的 vba 数字等价物。

在大多数情况下，这种日期假设不会发生。例如：

Format("092 0250", "0000000000000") 返回“092 0250”，即不尝试应用格式。

Format("0930005", "0000000000000") 按预期返回“0000000930005”。

到目前为止，我想出的唯一解决方案是在入站字符串包含空格或使用 IsDate 函数时使用此函数进行编码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:33:58.337

这与 Access 本身无关。在任何 VBA 中，如果文本由 a 、 或 a 分隔，格式函数的行为将`SPACE`如下`HYPHEN`所示`DASH`。所以这

```
Debug.Print Format("093 0005", "0000000000000") 
Debug.Print Format("093/0005", "0000000000000") 
Debug.Print Format("093-0005", "0000000000000") 
```

将返回`0000000034090`

它将尝试将其转换为**日期**或**数字**，如果它是有效的日期或数字，那么它将显示它的数字等价物。如果它不是等效的日期或数字，那么它将保持原样。我认为原因是该`Format`函数无法确定值的“格式”并将其作为字符串。类似于当时的说法`Format("Blah", "0000000000000")`。但很明显，您不会期望`Format`函数将其格式化为`000000000blah`.

不幸的是，我在 MS 知识库中找不到任何文章来解释为什么 Format 函数会这样。

我过去发现解决它的唯一方法是使用该`VAL`函数将其转换为数字。所以

```
Debug.Print Format(Val("093 0005"), "0000000000000") 
```

会给你想要的结果`0000000930005`

但是，如果数字由 a`HYPHEN`或 a分隔，`DASH`则该`VAL`功能无用。为此，您将不得不使用`REPLACE`将`HYPHEN`or`DASH`替换为`SPACE`。但是我怀疑您是否会格式化具有 a`HYPHEN`或 a 的数字`DASH`。

# c#-4.0 - 在 facebook c# sdk 中为朋友显示雇主

> ID：11801093
> 
> 赞同：2
> 
> 时间：2012-08-03T18:12:15.973
> 
> 标签：c#-4.0, facebook-c#-sdk

我有这段代码，它有点工作。问题是我无法弄清楚如何向我的朋友展示每个单独的雇主。

```
namespace WebApplication1.Site
{
  public partial class WebForm1 : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {
      var accessToken = "access token";
      var client = new FacebookClient(accessToken);
      dynamic myInfo = client.Get("me/friends", new { fields = "name,id,work" });
      foreach (dynamic friend in myInfo.data)
      {
        Response.Write("Name: " + friend.name + " Employer: " + friend.work + "<br/><br/>");
      }
    }
  }
} 
```

当我尝试使用此代码时：

```
Response.Write("Name: " + friend.name + "<br/>Employer: " + friend.work.employer + "<br/><br/>"); 
```

我得到这个结果“ *'Facebook.JsonArray'不包含'employer'的定义*”

帮助！（如果重要，请使用 .net 4.5）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:59:22.987

在您的回复中，`friend.work`是一个数组，每个朋友可能有多个雇主（现在和/或未来）。Also`friend.work.employer`也是一个数组，包含每个雇主的 ID 和名称。

见这里：[https ://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends%3Ffields%3Dname%2Cid%2Cwork](https://developers.facebook.com/tools/explorer?method=GET&path=me%2Ffriends%3Ffields%3Dname%2Cid%2Cwork)

我对c#不太熟悉，但我猜你不能直接写一个数组，所以你需要`friend.work`用一个`foreach`循环来循环并将每个返回的连接`employer.name`成一个字符串。

您可能会遇到麻烦，因为并非所有朋友都配置了他们的工作历史，所以您可能有朋友没有`friend.work`。您需要在代码中处理这种可能性。

# java - 使用 @Rule 删除样板测试代码

> ID：11801095
> 
> 赞同：1
> 
> 时间：2012-08-03T18:12:35.157
> 
> 标签：java, junit, junit4

我现在正在编写测试，并且意识到它们一开始都非常相似：

```
@Test
public void testThisMemoryOperation() {
    Assert.assertEquals("Sanity check failed, shouldn't be anything in memory yet.",
            0, memoryManager.getObjectsInMemory());
    /* ... */
}

@Test
public void testThatMemoryOperation() {
    Assert.assertEquals("Sanity check failed, shouldn't be anything in memory yet.",
            0, memoryManager.getObjectsInMemory());
    /* ... */
}

@Test
public void testTheOtherMemoryOperation() {
    Assert.assertEquals("Sanity check failed, shouldn't be anything in memory yet.",
            0, memoryManager.getObjectsInMemory());
    /* ... */
} 
```

这似乎是不必要的重复。我可以在每个测试开始时用一个简单的方法调用来替换这段代码来运行健全性检查断言，但是有没有像`@Rule`我可以用来在运行某些方法之前简单地运行这个测试的本机 JUnit 注释？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:41:56.660

为什么不创建一个简单的方法然后调用它呢？就像是：

```
private void test() {
    Assert.assertEquals("Sanity check failed, shouldn't be anything in memory yet.", 0, memoryManager.getObjectsInMemory());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T10:59:36.103

如果[Verifier Rule](http://kentbeck.github.com/junit/javadoc/4.10/org/junit/rules/Verifier.html)已评估，则最接近您的规则，该规则添加了一个 check after 语句。如果您看一下制作 PreconditionRule 的[源代码](https://github.com/KentBeck/junit/blob/master/src/main/java/org/junit/rules/Verifier.java)，将会非常简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:24:47.120

为什么不将此方法放在基类中并在测试中扩展该类？它每次都会自动运行（至少使用 TestNG，但我想 JUnit 也支持继承）。

# image - 本地 html 文件中的图像未在 IE 中显示

> ID：11801096
> 
> 赞同：0
> 
> 时间：2012-08-03T18:12:39.153
> 
> 标签：image, internet-explorer, local

我一直在本地开发一个静态站点（不是本地主机，只是在浏览器中预览本地文件）并且在 Firefox 和 Chrome 中一切正常，但是 html 中的图像没有显示在 IE 中。任何版本的 IE。此外，谷歌字体没有加载。在 css 中调用的图像确实可以工作。加载页面需要很长时间，有时会超时。

我已经将它全部上传到了一个 beta 站点，从服务器上，一切都在 IE 中运行良好。

我什至把文件带回家，在我自己的电脑上查看了我家庭版 IE 上的网站，它在那里显示得很好，所以看起来这台电脑或 IE 版本有什么问题？我用的是IE9。

-- 这是控制台中的错误。它们都与@font-face 相关；即使我注释掉指向 Google 字体的链接，图像仍然不显示。

```
CSS3117: @font-face failed cross-origin request. Resource access is restricted. 
```

C6HYlRF50SGJq1XyXj04z2msoyWrDyoltQVIP7q_RGg.eot CSS3117：@font-face 跨域请求失败。资源访问受到限制。C6HYlRF50SGJq1XyXj04zzBIQ40lcwWW3vj9tFMKvqw.eot CSS3117：@font-face 跨域请求失败。资源访问受到限制。xgzbb53t8j-Mo-vYa23n5nZ2MAKAc2x4R1uOSeegc5U.eot CSS3117：@font-face 跨域请求失败。资源访问受到限制。q9w3H4aeBxj0hZ8Osfi3dzoGYR7Z3iWH66EXnaJoKgg.eot CSS3117：@font-face 跨域请求失败。资源访问受到限制。q9w3H4aeBxj0hZ8Osfi3d9P2OS6Bzu7BENq0TH5sayk.eot CSS3117：@font-face 跨域请求失败。资源访问受到限制。C6HYlRF50SGJq1XyXj04z3l4twXkwp3_u9ZoePkT564.woff CSS3117：@font-face 跨域请求失败。资源访问受到限制。C6HYlRF50SGJq1XyXj04z9Od4RnLmtUrdSQkDmC5b8k.woff CSS3117：@font-face 跨域请求失败。资源访问受到限制。q9w3H4aeBxj0hZ8Osfi3dy1dfeF-hbOdKKuBDEXxqhQ.woff CSS3117：@font-face 跨域请求失败。资源访问受到限制。xgzbb53t8j-Mo-vYa23n5nhCUOGz7vYGh680lGh-uXM.woff CSS3117：@font-face 跨域请求失败。资源访问受到限制。q9w3H4aeBxj0hZ8Osfi3d3pumDtkw9GHrrDfd7ZnWpU.woff

-- 我正在使用样板模板

图片代码：

```
<img src="img/icon-fb.png" alt="facebook" width="32" height="32"> 
```

这些图像位于站点根目录中名为“img”的文件夹中。index.html 文件位于站点的根目录中。

# android - android xdpi 文件夹，我的图像大小是多少？

> ID：11801097
> 
> 赞同：4
> 
> 时间：2012-08-03T18:12:39.357
> 
> 标签：android, resolution

我一直在阅读以下内容：http: [//developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

它是关于文件夹`res-long-land-hdpi`,`res-notlong-land-dpi`等的`res-notlong-port-ldpi`。以及它们的实际含义以及何时应该使用它们。

文章还说：

*   超大屏幕至少为 960dp x 720dp
*   大屏幕至少为 640dp x 480dp

我正在开发一种设备`1280 x 720`：`480 x 800`

我的应用程序只能在纵向模式下使用。

所以这意味着我必须将图像放入`res-long-port-hdpi`第一个设备的文件夹中，然后放入`res-notlong-port-ldpi`第二个设备的文件夹中，对吗？

然后我遇到的下一个问题是。我有一个`332 x 226`像素的图像。这在第一个 (xlarge) 设备上看起来不错。但是我必须将这个图像重新缩放到多大才能将它放在（低分辨率）`res-xx-xx-ldpi`文件夹中？

我不确定如何计算不同文件夹的新大小。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T18:15:53.680

尺寸比率应与 Android 定义的标称像素密度相匹配：

> ldpi - 120 像素/英寸；dpi 比例 = .75（4 dpi = 3 像素）
> mdpi - 160 像素/英寸；dpi 比例 = 1（1 dpi = 1 像素）
> hdpi - 240 像素/英寸；dpi 比例 = 1.5（2 dpi = 3 像素）
> xhdpi - 320 像素/英寸；dpi 比例 = 2（1 dpi = 2 像素）

因此，如果您使 xhdpi 图像的大小（以像素为单位）是 mdpi 资源的两倍，它们将是相同的 dpi，这意味着它们在各自的屏幕上将具有相同的物理尺寸。

# python - 使用参数从 subprocess.call 调用应用程序

> ID：11801098
> 
> 赞同：35
> 
> 时间：2012-08-03T18:12:41.993
> 
> 标签：python, process, python-2.6, raspberry-pi

我是 Python 的初学者，我一直在尝试调用命令行应用程序，但它失败了：

```
>>> import subprocess as s
>>> s.call("gpio -g read 17")
Traceback (most recent call last):
    File "<stdin>", line 1, in <module>
    File "/usr/lib/python2.6/subprocess.py", line 470, in call
        return Popen(*popenargs, **kwargs).wait()
    File "/usr/lib/python2.6/subprocess.py", line 623, in __init__
        errread, errwrite)
    File "/usr/lib/python2.6/subprocess.py", line 1141, in _execute_child
        raise child_exception
OSError: [Errno 2] No such file or directory 
```

但是，如果我添加`shell=True`它，一切都会开始工作。有人可以解释为什么吗？

```
>>> import subprocess as s
>>> s.call("gpio -g read 17", shell=True)
>>> 0 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-03T18:14:37.123

你没有使用通话权。查看文档中[的介绍](http://docs.python.org/library/subprocess.html#using-the-subprocess-module)或任何示例。call 的第一个参数是“args”，一个参数序列，其中 arg[0] 是要运行的程序。

所以，当你这样做时：

```
s.call("gpio -g read 17") 
```

subprocess 有两种方式可以解释这一点。它应该运行一个名为“g”的程序，参数为“p”、“i”、“o”、“”等。（记住，字符串是字符序列。）它可能会运行一个名为“gpio -g read”的程序17" 没有额外的参数。无论哪种方式，它都不会找到这样的程序。（除非你碰巧在你的 PATH 上有一个名为“g”或“gpio -g read 17”的程序，在这种情况下，它会做错事而不是给你一个错误......）

你想要的是：

```
s.call(["gpio", "-g", "read", "17"]) 
```

那么，如果您通过了，为什么这会起作用`shell=True`？因为整个字符串被传递给 shell，然后它自己解析命令行并用空格分隔。就像打电话一样`os.system("gpio -g read 17")`。

请注意，以上所有内容都过于简单化了（它忽略了 Windows，并且 shell 解析不仅仅是“用空格分隔”等等），因此您应该实际阅读文档。（另外，写`subprocess`文档的人比我写得更好。）

# java - Java EE Servlet 重写 servlet 路径

> ID：11801099
> 
> 赞同：1
> 
> 时间：2012-08-03T18:12:49.123
> 
> 标签：java, jakarta-ee, servlets, java-ee-6

我有一个简单的用户应用程序。我有一个`MainController`Servlet，它将负责应用程序中的一般交互。此 servlet 将“侦听” url 模式：**/、/index 等**（任何其他形式的索引）。我还有一个`UserController`负责登录的 Servlet，这个是从`/CheckLogin`url-pattern 中“监听”的。

我有一个 jsp 中的表单，在 url`/`中，当我提交它时，它指向 servlet `/CheckLogin`。然后`UserController`servlet 处理它，登录是否正确，它会重定向到`/`（`MainController`将负责根据用户是否登录来确定要显示的页面）。

除了第一次提交后，所有工作都完美无缺，然后表单页面有 url `/CheckLogin`。我想删除它并只显示 / （即使记录与否）。我该怎么做（纯 Java EE，而不是 Spring 或任何其他框架）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:33:13.813

我不确定这是否是您要查找的内容，但如果您执行*forward*而不是*redirect*，客户端浏览器上的 URL 将不会更新：[RequestDispatcher#forward(javax.servlet.ServletRequest, javax.servlet .ServletResponse](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#include%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)；可以在[Forward vs Redirect](http://www.javapractices.com/topic/TopicAction.do?Id=181)中找到解释。

此外，将身份验证实现为[过滤器](http://docs.oracle.com/javaee/6/api/javax/servlet/Filter.html)而不是 Servlet 可能是一个更好的主意；这样，过滤器可用于拦截您认为需要保护的任何 URL。

您没有使用 Web 框架是否有特定原因？通常，它们旨在为您处理安全和路由问题。

# android - AlertDialog 通过拦截 keydone EditText 关闭

> ID：11801113
> 
> 赞同：-1
> 
> 时间：2012-08-03T18:13:43.463
> 
> 标签：android, android-alertdialog

我有一个 AlertDialog，其中有一个 EditText 和两个典型的按钮（[Cancel] 和 [Ok]）

它工作正常，但我需要拦截 Edittext 的 keyDone，然后我必须关闭 AlertDielog。

```
 public static void  Dialogo_Observaciones(Context context) {

    AlertDialog.Builder builder = new AlertDialog.Builder(context);
    builder.setTitle("Observaciones");
    builder.setMessage("Ingrese las observaciones");

    final EditText input = new EditText(context);
    input.setInputType(InputType.TYPE_CLASS_TEXT );
    input.setImeOptions(EditorInfo.IME_ACTION_DONE);

    input.setOnEditorActionListener(new TextView.OnEditorActionListener() {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event) {
            if (actionId ==6){
            //HERE I must close the AlertDialog and others things   
            }
            return false;
        }
    });

    builder.setView(input);

    builder.setPositiveButton("Ok", new DialogInterface.OnClickListener() {

        public void onClick(DialogInterface dialog, int whichButton) {
            String Valor = input.getText().toString();
            if (Valor.equals("") ==false ){

                Variables.Observaciones = Variables.Observaciones + " " + Valor.trim();
                Variables.Observaciones = Variables.Observaciones.trim();
                dialog.cancel(); 

            }else{
                dialog.cancel();  

            }
        }
    });

    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            dialog.cancel();   

        }
    });

    builder.show();

} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:16:36.000

尝试使用

```
dialog.dimiss() 
```

而不是取消。

另外，您确定 if 语句主体中的代码会在您期望的时候运行吗？

# android - 如何访问android项目资产文件夹中的sqlite数据库？

> ID：11801119
> 
> 赞同：1
> 
> 时间：2012-08-03T18:14:11.133
> 
> 标签：android, sqlite

我需要帮助才能在 android 中使用我现有的 sqlite 数据库。

我将我的 sqlite 数据库放在“/assets/(mydatabase)”中，但无法使用它。

我正在使用以下代码。有时它显示错误“无法打开数据库”，有时显示错误如“找不到表”。当我从 ddms 中提取数据库文件并使用 sqlite 浏览器打开它时，它会删除我的表意味着我的表不再存在。

所以请帮助我了解如何在android中使用我现有的sqlite数据库来进行读取和仪式操作。

```
private SQLiteDatabase MyDataBase;
private String path="/data/data/mypackagename/mydatabase";
try{
      MyDataBase=SQLiteDatabase.openDatabase(path, null,SQLiteDatabase.OPEN_READWRITE);
      Cursor myDbCursor;
      myDbCursor=MyDataBase.rawQuery("select user,password from login_master", null);
      String username=myDbCursor.getString(0);
      String password=myDbCursor.getString(01);
      Toast.makeText(getBaseContext(), username, 10).show();
      Toast.makeText(getBaseContext(), password, 10).show();
      MyDataBase.close();
  }
  catch(SQLiteException e){
      Toast.makeText(getBaseContext(), e.getMessage(), 10).show();
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:20:48.323

不确定，但这可以帮助你

```
void checkDB() throws Exception {
    try {
        SQLiteDatabase dbe = SQLiteDatabase
                .openDatabase(
                        "/data/data/yourpackagename/databases/yourfilename.sqlite",
                        null, 0);
        Log.d("opendb", "EXIST");
        dbe.close();
    } catch (Exception e) {

        AssetManager am = getApplicationContext().getAssets();
        OutputStream os = new FileOutputStream(
                "/data/data/yourpackagename/databases/yourfilename.sqlite");
        byte[] b = new byte[100];

        int r;
        InputStream is = am.open("yourfilename.sqlite");
        while ((r = is.read(b)) != -1) {
            os.write(b, 0, r);
        }
        Log.i("DATABASE_HELPER", "Copying the database ");
        is.close();
        os.close();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:31:24.777

复制： [SQLite Android 。无法打开数据库文件](https://stackoverflow.com/questions/11671129/sqlite-android-unable-to-open-database-file)

# python - Tkinter OptionMenu 将命令添加到多个 OptionMenus

> ID：11801121
> 
> 赞同：1
> 
> 时间：2012-08-03T18:14:16.797
> 
> 标签：python, lambda, tkinter, closures, optionmenu

基本上我有一系列在循环中创建的 OptionMenus，但目前是空的：

```
option_menu = []
for ii in range(jj):
    option_menu.append([])  
    for ll in range(kk):   
        option_menu[ii].append(OptionMenu(frame,tkinter_text_var[ii][ll],'')) 
```

然后在其他地方我使用一个复选框来设置沿线的值：

```
for ii in range(jj):
    for ll in range(kk):   
        option_menu[ii][ll]["menu"].add_command(label = name_from_box.get(), command = lambda: tkinter_text_var[ii][ll].set(name_from_box.get())) 
```

这可以正确填充所有 OptionMenus，但是当我在任何 OptionMenus 中选择一个值时，它只设置 option_menu[jj][kk] （即最后一个）。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:24:12.987

这是一个涉及闭包的*非常常见的问题。*看下面的例子：

```
alist = [lambda : x for x in range(10) ]
print (alist[2]()) #9
print (alist[4]()) #9 
```

都将是 9。为什么？因为每个 lambda 函数都引用了变量`x`. `x`在循环的每次迭代中都会更改，但它们仍然引用*同一个 object*。

解决此问题的一种方法是使用默认参数。默认参数是在创建函数时评估的，而不是在调用它时评估的。

```
alist = [lambda y=x: y for x in range(10) ]
print (alist[2]()) #2
print (alist[4]()) #4 
```

（做同样事情的另一种方法涉及`functools.partial`你有时会看到的......）

我经常喜欢说——“小心闭包”。他们可能有点棘手。

# objective-c - 程序编译程序在目标 c 文件的链接处失败

> ID：11801138
> 
> 赞同：1
> 
> 时间：2012-08-03T17:22:00.410
> 
> 标签：objective-c, ubuntu

我正在尝试使用它的源代码编译一个程序，但我也做不到，而且问题似乎每次都发生在同一个文件夹中，当我检查文件时，它们都是客观的 c 语言，可能是我缺少库或程序？如果是这样，它们可能是哪一个？我尝试在网上和这里进行研究，但我发现的只是 gcc 和 g++ 上的东西，但我已经安装了这两个库以及 boost 库，这是该程序的另一个先决条件。以下是我得到的一些命令行输出：

```
 "g++"    -o "phrase-extract/pcfg-score/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi/pcfg-score" -Wl,--start-group "phrase-extract/pcfg-score/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi/pcfg_score.o" "phrase-extract/pcfg-score/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi/main.o" "phrase-extract/pcfg-score/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi/tree_scorer.o" "phrase-extract/pcfg-common/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi/libpcfg_common.a"  -Wl,-Bstatic -lboost_program_options-mt -lboost_system-mt -lboost_thread-mt -Wl,-Bdynamic -lSegFault -lrt -Wl,--end-group -g -pthread 

...failed gcc.link phrase-extract/pcfg-score/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi/pcfg-score...
...skipped <p/home/rowe/Moses/bin>moses_chart for lack of <pmoses-chart-cmd/src/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>moses_chart...
...skipped <p/home/rowe/Moses/bin>moses for lack of <pmoses-cmd/src/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>moses...
...skipped <p/home/rowe/Moses/bin>lmbrgrid for lack of <pmoses-cmd/src/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>lmbrgrid...
...skipped <p/home/rowe/Moses/bin>CreateOnDiskPt for lack of <pOnDiskPt/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>CreateOnDiskPt...
...skipped <p/home/rowe/Moses/bin>queryOnDiskPt for lack of <pOnDiskPt/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>queryOnDiskPt...
...skipped <p/home/rowe/Moses/bin>pro for lack of <pmert/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>pro...
...skipped <p/home/rowe/Moses/bin>kbmira for lack of <pmert/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>kbmira...
common.copy /home/rowe/Moses/bin/processPhraseTable
...skipped <p/home/rowe/Moses/bin>processLexicalTable for lack of <pmisc/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>processLexicalTable...
common.copy /home/rowe/Moses/bin/queryPhraseTable
...skipped <p/home/rowe/Moses/bin>queryLexicalTable for lack of <pmisc/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>queryLexicalTable...
...skipped <p/home/rowe/Moses/bin>extract-ghkm for lack of <pphrase-extract/extract-ghkm/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>extract-ghkm...
...skipped <p/home/rowe/Moses/bin>pcfg-extract for lack of <pphrase-extract/pcfg-extract/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>pcfg-extract...
...skipped <p/home/rowe/Moses/bin>pcfg-score for lack of <pphrase-extract/pcfg-score/bin/gcc-4.6/release/debug-symbols-on/link-static/threading-multi>pcfg-score...
common.copy /home/rowe/Moses/lib/libLM.a
...failed updating 12 targets...
...skipped 12 targets...
...updated 8 targets... 
```

# php - PHP + Curl：使用 enctype multipart/form-data 登录

> ID：11801142
> 
> 赞同：1
> 
> 时间：2012-08-03T18:16:00.897
> 
> 标签：php, forms, curl

我正在使用 php 和 curl，我在使用`enctype=multipart/form-data`.

远程网页中的表单：

```
<form method="post" enctype="multipart/form-data" action="/account/login" id="login">
<label for="username">Username</label><input name="username" id="username"><br>
<label for="password">Password</label><input name="password" id="password" type="password"><br>
<input type="checkbox" name="keeplogged" id="keeplogged" value="on"><label for="keeplogged">Remember me</label><br>
<input type="submit" name="submit" value="Submit" />
</form> 
```

数据（来自`post`Firefox）：

```
POSTDATA =-----------------------------24464570528145
Content-Disposition: form-data; name="username"

fakeuser
-----------------------------24464570528145
Content-Disposition: form-data; name="password"

fakepass
-----------------------------24464570528145
Content-Disposition: form-data; name="keeplogged"

on
-----------------------------24464570528145
Content-Disposition: form-data; name="submit"

Submit
-----------------------------24464570528145-- 
```

我正在尝试使用 curl 登录：

```
function login($ref)
{
// Identify the URL:
$url = 'http://www.fakeSite.com/account/login';

$dt = array();
$dt['username'] = 'fakeUser';
$dt['password'] = 'fakePass';
$dt['keeplogged'] = 'on';
$dt['submit'] = 'Submit';

$curl = curl_init();

curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_FAILONERROR, 1);
curl_setopt($curl, CURLOPT_COOKIEJAR, "/tmp/cookie.txt");
curl_setopt($curl, CURLOPT_COOKIEFILE, "/tmp/cookie.txt");
curl_setopt($curl, CURLOPT_COOKIESESSION, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_RETURNTRANSFER,1);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $dt);

$result = curl_exec($curl);

if(curl_errno($curl))//If there is any error
{
    echo 'Curl error: ' . curl_error($curl);
    exit();
}

curl_close($curl);

return $result;
} 
```

但结果什么都没有！没有结果，没有错误，什么都没有！有人知道吗？

PS：我试图传递格式类似于 Firefox 的 postfields，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:27:17.883

我在使用`enctype=multipart/form-data`（Proxmox VE）的 API 方面遇到了一些问题。

尝试`POST`使用字符串而不是数组（使用`http_build_query`）添加数据：

```
curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($dt)); 
```

# google-chrome - 升级到清单 2 我的 chrome 应用程序不再起作用

> ID：11801146
> 
> 赞同：0
> 
> 时间：2012-08-03T18:16:17.610
> 
> 标签：google-chrome, google-chrome-extension

我的 google chrome 应用程序不再有效，我升级为 oer google 到清单 2，但现在单击下面的图标时弹出气球不再打开是清单和脚本。

当清单 1 到位时，盒子没有完全打开，希望您的专家建议可以提供帮助

```
 {
  "name": "XE Currency Converter",
    "manifest_version": 2,

  "version": "2.3.2",
  "description": "An exchange rate based currency converter provided by XE.com",
  "browser_action": {
    "default_icon": "19.png",
    "popup": "popup.html"
  }
  } 
```

我的脚本

```
<style>
body {
  min-width:185px;
  overflow-x:hidden;
  background:#E2E2E2

}

img {
  margin:5px;
  vertical-align:middle;
  width:183px;
  height:81px;
}

body {

width:0px;
  height:0px;
  margin:0px;
}
</style>

<html> 
   <head> 

   </head>

   <body>

<!-- XE.com Universal Currency Converter(tm) Input Page Starts -->
<!-- Copyright (c) 2005 XE.com. Unauthorized use prohibited. -->
<!-- Input Template Version 3.10 -->
<!-- You may reformat this page section, but do not delete lines or variables that start with an asterisk -->

<FORM METHOD=POST ACTION="http://www.xe.com/ucc/convert.cgi" target="_blank">

<P><TABLE WIDTH=100% CELLPADDING=1 CELLSPACING=0 BORDER=0  BGCOLOR=#000000><TR><TD ALIGN=CENTER>
<TABLE WIDTH=100% CELLPADDING=3 CELLSPACING=1 BORDER=0>

<TR VALIGN=TOP ALIGN=CENTER>
  <TD BGCOLOR=#013c66><B>
    <FONT FACE="Arial,Helvetica">
    <FONT SIZE="+1" color="ffffff">xe.com&nbsp;
    Universal Currency Converter </FONT> <FONT SIZE="-1" color="ffffff"><SUP> &reg;</SUP></FONT>
    </FONT>
  </B></TD>
</TR>

<TR VALIGN=TOP ALIGN=Left>
  <TD VALIGN=MIDDLE ALIGN=CENTER BGCOLOR=#FFF>
  <TABLE CELLSPACING=3 CELLPADDING=2 BORDER=0 WIDTH=100%><TR>
  <TD><FONT FACE="Arial,Helvetica">
    <!XERC-UCC1-P1.1-R1>
    <div style="text-align: center;"><B>Convert this</B></div>
  </FONT></TD>
  <TD><FONT FACE="Arial,Helvetica">
    <!XERC-UCC1-P1.3-R1>
   <div style="text-align: center;">  <B>from this currency</B></div>
  </FONT></TD>
  <TD><FONT FACE="Arial,Helvetica">
    <!XERC-UCC1-P1.5-R1>
   <div style="text-align: center;">  <B></B></div>
  </FONT></TD>
    <TD><FONT FACE="Arial,Helvetica">
    <!XERC-UCC1-P1.5-R1>
   <div style="text-align: center;">  <B>into this currency.</B></div>
  </FONT></TD>

</TR>

<script type="text/javascript">
function save() {
save_options_from();
save_options_to();
}

function restore() {
restore_options_from();
restore_options_to();
}

// Saves options to localStorage.
function save_options_from() {
  var select = document.getElementById("FROM");
  var FROM = select.children[select.selectedIndex].value;
  localStorage["default_currency"] = FROM;

}

function save_options_to() {
  var select = document.getElementById("TO");
  var TO = select.children[select.selectedIndex].value;
  localStorage["default_currency_to"] = TO;

}

// Restores select box state to saved value from localStorage.
function restore_options_from() {
  var favorite = localStorage["default_currency"];
  if (!favorite) {
    return;
  }
  var select = document.getElementById("FROM");
  for (var i = 0; i < select.children.length; i++) {
    var child = select.children[i];
    if (child.value == favorite) {
      child.selected = "true";
      break;

    }
  }
}

function restore_options_to() {
  var favorite2 = localStorage["default_currency_to"];
  if (!favorite2) {
    return;
  }
  var select = document.getElementById("TO");
  for (var i = 0; i < select.children.length; i++) {
    var child = select.children[i];
    if (child.value == favorite2) {
      child.selected = "true";
      break;

    }
  }
}

</script>

<body onload="restore()">

<TR VALIGN=Top ALIGN=center>

  <TD><FONT FACE="Arial,Helvetica">
    <INPUT TYPE="text" NAME="Amount" VALUE="1" SIZE=10><BR>
    <!XERC-UCC1-P1.2-R2>
    <FONT SIZE=-1><B></B></FONT>
  </FONT></TD>

  <TD><FONT FACE="Arial,Helvetica" SIZE=-1>
    <SELECT NAME="From" SIZE=5  id ="FROM">
      <OPTION VALUE="EUR" SELECTED>Euro EUR</OPTION>
      <OPTION VALUE="USD">United States Dollars USD</OPTION>
      <OPTION VALUE="GBP">United Kingdom Pounds GBP</OPTION>
      <OPTION VALUE="CAD">Canada Dollars CAD</OPTION>
      <OPTION VALUE="AUD">Australia Dollars AUD</OPTION>
      <OPTION VALUE="JPY">Japan Yen JPY</OPTION>
      <OPTION VALUE="INR">India Rupees INR</OPTION>
      <OPTION VALUE="NZD">New Zealand Dollars NZD</OPTION>
      <OPTION VALUE="CHF">Switzerland Francs CHF</OPTION>
      <OPTION VALUE="ZAR">South Africa Rand ZAR</OPTION>
      <OPTION VALUE="EUR">-- Top Currencies: --</OPTION>
<OPTION VALUE="AED">AED - United Arab Emirates Dirham</OPTION> 
<OPTION VALUE="AFN">AFN - Afghan Afghani</OPTION>
<OPTION VALUE="ALL">ALL - Albanian Lek</OPTION>
<OPTION VALUE="AMD">AMD - Armenian Dram</OPTION>
<OPTION VALUE="ANG">ANG - Dutch Guilder</OPTION>
<OPTION VALUE="AOA">AOA - Angolan Kwanza</OPTION>
<OPTION VALUE="ARS">ARS - Argentine Peso</OPTION>
<OPTION VALUE="AUD">AUD - Australian Dollar</OPTION>
<OPTION VALUE="AWG">AWG - Aruban or Dutch Guilder</OPTION>
<OPTION VALUE="AZN">AZN - Azerbaijani New Manat</OPTION>
<OPTION VALUE="BAM">BAM - Bosnian Convertible Marka</OPTION>
<OPTION VALUE="BBD">BBD - Barbadian or Bajan Dollar</OPTION>
<OPTION VALUE="BDT">BDT - Bangladeshi Taka</OPTION>
<OPTION VALUE="BGN">BGN - Bulgarian Lev</OPTION>
<OPTION VALUE="BHD">BHD - Bahraini Dinar</OPTION>
<OPTION VALUE="BIF">BIF - Burundian Franc</OPTION>
<OPTION VALUE="BMD">BMD - Bermudian Dollar</OPTION>
<OPTION VALUE="BND">BND - Bruneian Dollar</OPTION>
<OPTION VALUE="BOB">BOB - Bolivian Boliviano</OPTION>
<OPTION VALUE="BRL">BRL - Brazilian Real</OPTION>
<OPTION VALUE="BSD">BSD - Bahamian Dollar</OPTION>
<OPTION VALUE="BTN">BTN - Bhutanese Ngultrum</OPTION>
<OPTION VALUE="BWP">BWP - Botswana Pula</OPTION>
<OPTION VALUE="BYR">BYR - Belarusian Ruble</OPTION>
<OPTION VALUE="BZD">BZD - Belizean Dollar</OPTION>
<OPTION VALUE="CAD">CAD - Canadian Dollar</OPTION>
<OPTION VALUE="CDF">CDF - Congolese Franc</OPTION>
<OPTION VALUE="CHF">CHF - Swiss Franc</OPTION>
<OPTION VALUE="CLP">CLP - Chilean Peso</OPTION>
<OPTION VALUE="CNY">CNY - Chinese Yuan Renminbi</OPTION>
<OPTION VALUE="COP">COP - Colombian Peso</OPTION>
<OPTION VALUE="CRC">CRC - Costa Rican Colon</OPTION>
<OPTION VALUE="CUC">CUC - Cuban Convertible Peso</OPTION>
<OPTION VALUE="CUP">CUP - Cuban Peso</OPTION>
<OPTION VALUE="CVE">CVE - Cape Verdean Escudo</OPTION>
<OPTION VALUE="CZK">CZK - Czech Koruna</OPTION>
<OPTION VALUE="DJF">DJF - Djiboutian Franc</OPTION>
<OPTION VALUE="DKK">DKK - Danish Krone</OPTION>
<OPTION VALUE="DOP">DOP - Dominican Peso</OPTION>
<OPTION VALUE="DZD">DZD - Algerian Dinar</OPTION>
<OPTION VALUE="EGP">EGP - Egyptian Pound</OPTION>
<OPTION VALUE="ERN">ERN - Eritrean Nakfa</OPTION>
<OPTION VALUE="ETB">ETB - Ethiopian Birr</OPTION>
<OPTION VALUE="EUR">EUR - Euro</OPTION>
<OPTION VALUE="FJD">FJD - Fijian Dollar</OPTION>
<OPTION VALUE="FKP">FKP - Falkland Island Pound</OPTION>
<OPTION VALUE="GBP">GBP - British Pound</OPTION>
<OPTION VALUE="GEL">GEL - Georgian Lari</OPTION>
<OPTION VALUE="GGP">GGP - Guernsey Pound</OPTION>
<OPTION VALUE="GHS">GHS - Ghanaian Cedi</OPTION>
<OPTION VALUE="GIP">GIP - Gibraltar Pound</OPTION>
<OPTION VALUE="GMD">GMD - Gambian Dalasi</OPTION>
<OPTION VALUE="GNF">GNF - Guinean Franc</OPTION>
<OPTION VALUE="GTQ">GTQ - Guatemalan Quetzal</OPTION>
<OPTION VALUE="GYD">GYD - Guyanese Dollar</OPTION>
<OPTION VALUE="HKD">HKD - Hong Kong Dollar</OPTION>
<OPTION VALUE="HNL">HNL - Honduran Lempira</OPTION>
<OPTION VALUE="HRK">HRK - Croatian Kuna</OPTION>
<OPTION VALUE="HTG">HTG - Haitian Gourde</OPTION>
<OPTION VALUE="HUF">HUF - Hungarian Forint</OPTION>
<OPTION VALUE="IDR">IDR - Indonesian Rupiah</OPTION>
<OPTION VALUE="ILS">ILS - Israeli Shekel</OPTION>
<OPTION VALUE="IMP">IMP - Isle of Man Pound</OPTION>
<OPTION VALUE="INR">INR - Indian Rupee</OPTION>
<OPTION VALUE="IQD">IQD - Iraqi Dinar</OPTION>
<OPTION VALUE="IRR">IRR - Iranian Rial</OPTION>
<OPTION VALUE="ISK">ISK - Icelandic Krona</OPTION>
<OPTION VALUE="JEP">JEP - Jersey Pound</OPTION>
<OPTION VALUE="JMD">JMD - Jamaican Dollar</OPTION>
<OPTION VALUE="JOD">JOD - Jordanian Dinar</OPTION>
<OPTION VALUE="JPY">JPY - Japanese Yen</OPTION>
<OPTION VALUE="KES">KES - Kenyan Shilling</OPTION>
<OPTION VALUE="KGS">KGS - Kyrgyzstani Som</OPTION>
<OPTION VALUE="KHR">KHR - Cambodian Riel</OPTION>
<OPTION VALUE="KMF">KMF - Comoran Franc</OPTION>
<OPTION VALUE="KPW">KPW - North Korean Won</OPTION>
<OPTION VALUE="KRW">KRW - South Korean Won</OPTION>
<OPTION VALUE="KWD">KWD - Kuwaiti Dinar</OPTION>
<OPTION VALUE="KYD">KYD - Caymanian Dollar</OPTION>
<OPTION VALUE="KZT">KZT - Kazakhstani Tenge</OPTION>
<OPTION VALUE="LAK">LAK - Lao or Laotian Kip</OPTION>
<OPTION VALUE="LBP">LBP - Lebanese Pound</OPTION>
<OPTION VALUE="LKR">LKR - Sri Lankan Rupee</OPTION>
<OPTION VALUE="LRD">LRD - Liberian Dollar</OPTION>
<OPTION VALUE="LSL">LSL - Basotho Loti</OPTION>
<OPTION VALUE="LTL">LTL - Lithuanian Litas</OPTION>
<OPTION VALUE="LVL">LVL - Latvian Lat</OPTION>
<OPTION VALUE="LYD">LYD - Libyan Dinar</OPTION>
<OPTION VALUE="MAD">MAD - Moroccan Dirham</OPTION>
<OPTION VALUE="MDL">MDL - Moldovan Leu</OPTION>
<OPTION VALUE="MGA">MGA - Malagasy Ariary</OPTION>
<OPTION VALUE="MKD">MKD - Macedonian Denar</OPTION>
<OPTION VALUE="MMK">MMK - Burmese Kyat</OPTION>
<OPTION VALUE="MNT">MNT - Mongolian Tughrik</OPTION>
<OPTION VALUE="MOP">MOP - Macau Pataca</OPTION>
<OPTION VALUE="MRO">MRO - Mauritanian Ouguiya</OPTION>
<OPTION VALUE="MUR">MUR - Mauritian Rupee</OPTION>
<OPTION VALUE="MVR">MVR - Maldivian Rufiyaa</OPTION>
<OPTION VALUE="MWK">MWK - Malawian Kwacha</OPTION>
<OPTION VALUE="MXN">MXN - Mexican Peso</OPTION>
<OPTION VALUE="MYR">MYR - Malaysian Ringgit</OPTION>
<OPTION VALUE="MZN">MZN - Mozambican Metical</OPTION>
<OPTION VALUE="NAD">NAD - Namibian Dollar</OPTION>
<OPTION VALUE="NGN">NGN - Nigerian Naira</OPTION>
<OPTION VALUE="NIO">NIO - Nicaraguan Cordoba</OPTION>
<OPTION VALUE="NOK">NOK - Norwegian Krone</OPTION>
<OPTION VALUE="NPR">NPR - Nepalese Rupee</OPTION>
<OPTION VALUE="NZD">NZD - New Zealand Dollar</OPTION>
<OPTION VALUE="OMR">OMR - Omani Rial</OPTION>
<OPTION VALUE="PAB">PAB - Panamanian Balboa</OPTION>
<OPTION VALUE="PEN">PEN - Peruvian Nuevo Sol</OPTION>
<OPTION VALUE="PGK">PGK - Papua New Guinean Kina</OPTION>
<OPTION VALUE="PHP">PHP - Philippine Peso</OPTION>
<OPTION VALUE="PKR">PKR - Pakistani Rupee</OPTION>
<OPTION VALUE="PLN">PLN - Polish Zloty</OPTION>
<OPTION VALUE="PYG">PYG - Paraguayan Guarani</OPTION>
<OPTION VALUE="QAR">QAR - Qatari Riyal</OPTION>
<OPTION VALUE="RON">RON - Romanian New Leu</OPTION>
<OPTION VALUE="RSD">RSD - Serbian Dinar</OPTION>
<OPTION VALUE="RUB">RUB - Russian Ruble</OPTION>
<OPTION VALUE="RWF">RWF - Rwandan Franc</OPTION>
<OPTION VALUE="SAR">SAR - Saudi or Saudi Arabian Riyal</OPTION>
<OPTION VALUE="SBD">SBD - Solomon Islander Dollar</OPTION>
<OPTION VALUE="SCR">SCR - Seychellois Rupee</OPTION>
<OPTION VALUE="SDG">SDG - Sudanese Pound</OPTION>
<OPTION VALUE="SEK">SEK - Swedish Krona</OPTION>
<OPTION VALUE="SGD">SGD - Singapore Dollar</OPTION>
<OPTION VALUE="SHP">SHP - Saint Helenian Pound</OPTION>
<OPTION VALUE="SLL">SLL - Sierra Leonean Leone</OPTION>
<OPTION VALUE="SOS">SOS - Somali Shilling</OPTION>
<OPTION VALUE="SPL">SPL - Seborgan Luigino</OPTION>
<OPTION VALUE="SRD">SRD - Surinamese Dollar</OPTION>
<OPTION VALUE="STD">STD - Sao Tomean Dobra</OPTION>
<OPTION VALUE="SVC">SVC - Salvadoran Colon</OPTION>
<OPTION VALUE="SYP">SYP - Syrian Pound</OPTION>
<OPTION VALUE="SZL">SZL - Swazi Lilangeni</OPTION>
<OPTION VALUE="THB">THB - Thai Baht</OPTION>
<OPTION VALUE="TJS">TJS - Tajikistani Somoni</OPTION>
<OPTION VALUE="TMT">TMT - Turkmenistani Manat</OPTION>
<OPTION VALUE="TND">TND - Tunisian Dinar</OPTION>
<OPTION VALUE="TOP">TOP - Tongan Pa'anga</OPTION>
<OPTION VALUE="TRY">TRY - Turkish Lira</OPTION>
<OPTION VALUE="TTD">TTD - Trinidadian Dollar</OPTION>
<OPTION VALUE="TVD">TVD - Tuvaluan Dollar</OPTION>
<OPTION VALUE="TWD">TWD - Taiwan New Dollar</OPTION>
<OPTION VALUE="TZS">TZS - Tanzanian Shilling</OPTION>
<OPTION VALUE="UAH">UAH - Ukrainian Hryvna</OPTION>
<OPTION VALUE="UGX">UGX - Ugandan Shilling</OPTION>
<OPTION VALUE="USD">USD - US Dollar</OPTION>
<OPTION VALUE="UYU">UYU - Uruguayan Peso</OPTION>
<OPTION VALUE="UZS">UZS - Uzbekistani Som</OPTION>
<OPTION VALUE="VEF">VEF - Venezuelan Bolivar Fuerte</OPTION>
<OPTION VALUE="VND">VND - Vietnamese Dong</OPTION>
<OPTION VALUE="VUV">VUV - Ni-Vanuatu Vatu</OPTION>
<OPTION VALUE="WST">WST - Samoan Tala</OPTION>
<OPTION VALUE="XAF">XAF - Central African CFA Franc BEAC</OPTION>
<OPTION VALUE="XAG">XAG - Silver Ounce</OPTION>
<OPTION VALUE="XAU">XAU - Gold Ounce</OPTION>
<OPTION VALUE="XCD">XCD - East Caribbean Dollar</OPTION>
<OPTION VALUE="XDR">XDR - IMF Special Drawing Rights</OPTION>
<OPTION VALUE="XOF">XOF - CFA Franc</OPTION>
<OPTION VALUE="XPD">XPD - Palladium Ounce</OPTION>
<OPTION VALUE="XPF">XPF - CFP Franc</OPTION>
<OPTION VALUE="XPT">XPT - Platinum Ounce</OPTION>
<OPTION VALUE="YER">YER - Yemeni Rial</OPTION>
<OPTION VALUE="ZAR">ZAR - South African Rand</OPTION>
<OPTION VALUE="ZMK">ZMK - Zambian Kwacha</OPTION>
<OPTION VALUE="ZWD">ZWD - Zimbabwean Dollar</OPTION>
    </SELECT><BR></TD>
    <!XERC-UCC1-P1.4-R2>

    <TD VALIGN=MIDDLE>
    <FONT FACE="Arial,Helvetica,sans-serif">
    <input type="button" value="&#8660" onClick="swapVar(); window.location.reload();">
    </TD>

  </FONT>
  <TD><FONT FACE="Arial,Helvetica" SIZE=-1>
    <SELECT NAME="To" SIZE=5 id ="TO">
      <OPTION VALUE="USD" SELECTED>United States Dollars USD</OPTION>
      <OPTION VALUE="EUR">Euro EUR</OPTION>
      <OPTION VALUE="GBP">United Kingdom Pounds GBP</OPTION>
      <OPTION VALUE="CAD">Canada Dollars CAD</OPTION>
      <OPTION VALUE="AUD">Australia Dollars AUD</OPTION>
      <OPTION VALUE="JPY">Japan Yen JPY</OPTION>
      <OPTION VALUE="INR">India Rupees INR</OPTION>
      <OPTION VALUE="NZD">New Zealand Dollars NZD</OPTION>
      <OPTION VALUE="CHF">Switzerland Francs CHF</OPTION>
      <OPTION VALUE="ZAR">South Africa Rand ZAR</OPTION>
      <OPTION VALUE="USD">-- Top Currencies: --</OPTION>
<OPTION VALUE="AED">AED - United Arab Emirates Dirham</OPTION>
<OPTION VALUE="AFN">AFN - Afghan Afghani</OPTION>
<OPTION VALUE="ALL">ALL - Albanian Lek</OPTION>
<OPTION VALUE="AMD">AMD - Armenian Dram</OPTION>
<OPTION VALUE="ANG">ANG - Dutch Guilder</OPTION>
<OPTION VALUE="AOA">AOA - Angolan Kwanza</OPTION>
<OPTION VALUE="ARS">ARS - Argentine Peso</OPTION>
<OPTION VALUE="AUD">AUD - Australian Dollar</OPTION>
<OPTION VALUE="AWG">AWG - Aruban or Dutch Guilder</OPTION>
<OPTION VALUE="AZN">AZN - Azerbaijani New Manat</OPTION>
<OPTION VALUE="BAM">BAM - Bosnian Convertible Marka</OPTION>
<OPTION VALUE="BBD">BBD - Barbadian or Bajan Dollar</OPTION>
<OPTION VALUE="BDT">BDT - Bangladeshi Taka</OPTION>
<OPTION VALUE="BGN">BGN - Bulgarian Lev</OPTION>
<OPTION VALUE="BHD">BHD - Bahraini Dinar</OPTION>
<OPTION VALUE="BIF">BIF - Burundian Franc</OPTION>
<OPTION VALUE="BMD">BMD - Bermudian Dollar</OPTION>
<OPTION VALUE="BND">BND - Bruneian Dollar</OPTION>
<OPTION VALUE="BOB">BOB - Bolivian Boliviano</OPTION>
<OPTION VALUE="BRL">BRL - Brazilian Real</OPTION>
<OPTION VALUE="BSD">BSD - Bahamian Dollar</OPTION>
<OPTION VALUE="BTN">BTN - Bhutanese Ngultrum</OPTION>
<OPTION VALUE="BWP">BWP - Botswana Pula</OPTION>
<OPTION VALUE="BYR">BYR - Belarusian Ruble</OPTION>
<OPTION VALUE="BZD">BZD - Belizean Dollar</OPTION>
<OPTION VALUE="CAD">CAD - Canadian Dollar</OPTION>
<OPTION VALUE="CDF">CDF - Congolese Franc</OPTION>
<OPTION VALUE="CHF">CHF - Swiss Franc</OPTION>
<OPTION VALUE="CLP">CLP - Chilean Peso</OPTION>
<OPTION VALUE="CNY">CNY - Chinese Yuan Renminbi</OPTION>
<OPTION VALUE="COP">COP - Colombian Peso</OPTION>
<OPTION VALUE="CRC">CRC - Costa Rican Colon</OPTION>
<OPTION VALUE="CUC">CUC - Cuban Convertible Peso</OPTION>
<OPTION VALUE="CUP">CUP - Cuban Peso</OPTION>
<OPTION VALUE="CVE">CVE - Cape Verdean Escudo</OPTION>
<OPTION VALUE="CZK">CZK - Czech Koruna</OPTION>
<OPTION VALUE="DJF">DJF - Djiboutian Franc</OPTION>
<OPTION VALUE="DKK">DKK - Danish Krone</OPTION>
<OPTION VALUE="DOP">DOP - Dominican Peso</OPTION>
<OPTION VALUE="DZD">DZD - Algerian Dinar</OPTION>
<OPTION VALUE="EGP">EGP - Egyptian Pound</OPTION>
<OPTION VALUE="ERN">ERN - Eritrean Nakfa</OPTION>
<OPTION VALUE="ETB">ETB - Ethiopian Birr</OPTION>
<OPTION VALUE="EUR">EUR - Euro</OPTION>
<OPTION VALUE="FJD">FJD - Fijian Dollar</OPTION>
<OPTION VALUE="FKP">FKP - Falkland Island Pound</OPTION>
<OPTION VALUE="GBP">GBP - British Pound</OPTION>
<OPTION VALUE="GEL">GEL - Georgian Lari</OPTION>
<OPTION VALUE="GGP">GGP - Guernsey Pound</OPTION>
<OPTION VALUE="GHS">GHS - Ghanaian Cedi</OPTION>
<OPTION VALUE="GIP">GIP - Gibraltar Pound</OPTION>
<OPTION VALUE="GMD">GMD - Gambian Dalasi</OPTION>
<OPTION VALUE="GNF">GNF - Guinean Franc</OPTION>
<OPTION VALUE="GTQ">GTQ - Guatemalan Quetzal</OPTION>
<OPTION VALUE="GYD">GYD - Guyanese Dollar</OPTION>
<OPTION VALUE="HKD">HKD - Hong Kong Dollar</OPTION>
<OPTION VALUE="HNL">HNL - Honduran Lempira</OPTION>
<OPTION VALUE="HRK">HRK - Croatian Kuna</OPTION>
<OPTION VALUE="HTG">HTG - Haitian Gourde</OPTION>
<OPTION VALUE="HUF">HUF - Hungarian Forint</OPTION>
<OPTION VALUE="IDR">IDR - Indonesian Rupiah</OPTION>
<OPTION VALUE="ILS">ILS - Israeli Shekel</OPTION>
<OPTION VALUE="IMP">IMP - Isle of Man Pound</OPTION>
<OPTION VALUE="INR">INR - Indian Rupee</OPTION>
<OPTION VALUE="IQD">IQD - Iraqi Dinar</OPTION>
<OPTION VALUE="IRR">IRR - Iranian Rial</OPTION>
<OPTION VALUE="ISK">ISK - Icelandic Krona</OPTION>
<OPTION VALUE="JEP">JEP - Jersey Pound</OPTION>
<OPTION VALUE="JMD">JMD - Jamaican Dollar</OPTION>
<OPTION VALUE="JOD">JOD - Jordanian Dinar</OPTION>
<OPTION VALUE="JPY">JPY - Japanese Yen</OPTION>
<OPTION VALUE="KES">KES - Kenyan Shilling</OPTION>
<OPTION VALUE="KGS">KGS - Kyrgyzstani Som</OPTION>
<OPTION VALUE="KHR">KHR - Cambodian Riel</OPTION>
<OPTION VALUE="KMF">KMF - Comoran Franc</OPTION>
<OPTION VALUE="KPW">KPW - North Korean Won</OPTION>
<OPTION VALUE="KRW">KRW - South Korean Won</OPTION>
<OPTION VALUE="KWD">KWD - Kuwaiti Dinar</OPTION>
<OPTION VALUE="KYD">KYD - Caymanian Dollar</OPTION>
<OPTION VALUE="KZT">KZT - Kazakhstani Tenge</OPTION>
<OPTION VALUE="LAK">LAK - Lao or Laotian Kip</OPTION>
<OPTION VALUE="LBP">LBP - Lebanese Pound</OPTION>
<OPTION VALUE="LKR">LKR - Sri Lankan Rupee</OPTION>
<OPTION VALUE="LRD">LRD - Liberian Dollar</OPTION>
<OPTION VALUE="LSL">LSL - Basotho Loti</OPTION>
<OPTION VALUE="LTL">LTL - Lithuanian Litas</OPTION>
<OPTION VALUE="LVL">LVL - Latvian Lat</OPTION>
<OPTION VALUE="LYD">LYD - Libyan Dinar</OPTION>
<OPTION VALUE="MAD">MAD - Moroccan Dirham</OPTION>
<OPTION VALUE="MDL">MDL - Moldovan Leu</OPTION>
<OPTION VALUE="MGA">MGA - Malagasy Ariary</OPTION>
<OPTION VALUE="MKD">MKD - Macedonian Denar</OPTION>
<OPTION VALUE="MMK">MMK - Burmese Kyat</OPTION>
<OPTION VALUE="MNT">MNT - Mongolian Tughrik</OPTION>
<OPTION VALUE="MOP">MOP - Macau Pataca</OPTION>
<OPTION VALUE="MRO">MRO - Mauritanian Ouguiya</OPTION>
<OPTION VALUE="MUR">MUR - Mauritian Rupee</OPTION>
<OPTION VALUE="MVR">MVR - Maldivian Rufiyaa</OPTION>
<OPTION VALUE="MWK">MWK - Malawian Kwacha</OPTION>
<OPTION VALUE="MXN">MXN - Mexican Peso</OPTION>
<OPTION VALUE="MYR">MYR - Malaysian Ringgit</OPTION>
<OPTION VALUE="MZN">MZN - Mozambican Metical</OPTION>
<OPTION VALUE="NAD">NAD - Namibian Dollar</OPTION>
<OPTION VALUE="NGN">NGN - Nigerian Naira</OPTION>
<OPTION VALUE="NIO">NIO - Nicaraguan Cordoba</OPTION>
<OPTION VALUE="NOK">NOK - Norwegian Krone</OPTION>
<OPTION VALUE="NPR">NPR - Nepalese Rupee</OPTION>
<OPTION VALUE="NZD">NZD - New Zealand Dollar</OPTION>
<OPTION VALUE="OMR">OMR - Omani Rial</OPTION>
<OPTION VALUE="PAB">PAB - Panamanian Balboa</OPTION>
<OPTION VALUE="PEN">PEN - Peruvian Nuevo Sol</OPTION>
<OPTION VALUE="PGK">PGK - Papua New Guinean Kina</OPTION>
<OPTION VALUE="PHP">PHP - Philippine Peso</OPTION>
<OPTION VALUE="PKR">PKR - Pakistani Rupee</OPTION>
<OPTION VALUE="PLN">PLN - Polish Zloty</OPTION>
<OPTION VALUE="PYG">PYG - Paraguayan Guarani</OPTION>
<OPTION VALUE="QAR">QAR - Qatari Riyal</OPTION>
<OPTION VALUE="RON">RON - Romanian New Leu</OPTION>
<OPTION VALUE="RSD">RSD - Serbian Dinar</OPTION>
<OPTION VALUE="RUB">RUB - Russian Ruble</OPTION>
<OPTION VALUE="RWF">RWF - Rwandan Franc</OPTION>
<OPTION VALUE="SAR">SAR - Saudi or Saudi Arabian Riyal</OPTION>
<OPTION VALUE="SBD">SBD - Solomon Islander Dollar</OPTION>
<OPTION VALUE="SCR">SCR - Seychellois Rupee</OPTION>
<OPTION VALUE="SDG">SDG - Sudanese Pound</OPTION>
<OPTION VALUE="SEK">SEK - Swedish Krona</OPTION>
<OPTION VALUE="SGD">SGD - Singapore Dollar</OPTION>
<OPTION VALUE="SHP">SHP - Saint Helenian Pound</OPTION>
<OPTION VALUE="SLL">SLL - Sierra Leonean Leone</OPTION>
<OPTION VALUE="SOS">SOS - Somali Shilling</OPTION>
<OPTION VALUE="SPL">SPL - Seborgan Luigino</OPTION>
<OPTION VALUE="SRD">SRD - Surinamese Dollar</OPTION>
<OPTION VALUE="STD">STD - Sao Tomean Dobra</OPTION>
<OPTION VALUE="SVC">SVC - Salvadoran Colon</OPTION>
<OPTION VALUE="SYP">SYP - Syrian Pound</OPTION>
<OPTION VALUE="SZL">SZL - Swazi Lilangeni</OPTION>
<OPTION VALUE="THB">THB - Thai Baht</OPTION>
<OPTION VALUE="TJS">TJS - Tajikistani Somoni</OPTION>
<OPTION VALUE="TMT">TMT - Turkmenistani Manat</OPTION>
<OPTION VALUE="TND">TND - Tunisian Dinar</OPTION>
<OPTION VALUE="TOP">TOP - Tongan Pa'anga</OPTION>
<OPTION VALUE="TRY">TRY - Turkish Lira</OPTION>
<OPTION VALUE="TTD">TTD - Trinidadian Dollar</OPTION>
<OPTION VALUE="TVD">TVD - Tuvaluan Dollar</OPTION>
<OPTION VALUE="TWD">TWD - Taiwan New Dollar</OPTION>
<OPTION VALUE="TZS">TZS - Tanzanian Shilling</OPTION>
<OPTION VALUE="UAH">UAH - Ukrainian Hryvna</OPTION>
<OPTION VALUE="UGX">UGX - Ugandan Shilling</OPTION>
<OPTION VALUE="USD">USD - US Dollar</OPTION>
<OPTION VALUE="UYU">UYU - Uruguayan Peso</OPTION>
<OPTION VALUE="UZS">UZS - Uzbekistani Som</OPTION>
<OPTION VALUE="VEF">VEF - Venezuelan Bolivar Fuerte</OPTION>
<OPTION VALUE="VND">VND - Vietnamese Dong</OPTION>
<OPTION VALUE="VUV">VUV - Ni-Vanuatu Vatu</OPTION>
<OPTION VALUE="WST">WST - Samoan Tala</OPTION>
<OPTION VALUE="XAF">XAF - Central African CFA Franc BEAC</OPTION>
<OPTION VALUE="XAG">XAG - Silver Ounce</OPTION>
<OPTION VALUE="XAU">XAU - Gold Ounce</OPTION>
<OPTION VALUE="XCD">XCD - East Caribbean Dollar</OPTION>
<OPTION VALUE="XDR">XDR - IMF Special Drawing Rights</OPTION>
<OPTION VALUE="XOF">XOF - CFA Franc</OPTION>
<OPTION VALUE="XPD">XPD - Palladium Ounce</OPTION>
<OPTION VALUE="XPF">XPF - CFP Franc</OPTION>
<OPTION VALUE="XPT">XPT - Platinum Ounce</OPTION>
<OPTION VALUE="YER">YER - Yemeni Rial</OPTION>
<OPTION VALUE="ZAR">ZAR - South African Rand</OPTION>
<OPTION VALUE="ZMK">ZMK - Zambian Kwacha</OPTION>
<OPTION VALUE="ZWD">ZWD - Zimbabwean Dollar</OPTION>
    </SELECT><BR>
    <!XERC-UCC1-P1.6-R2>

  </FONT></TD>

</TR>

<TR ALIGN=CENTER>
  <TD COLSPAN=100% ALIGN=CENTER>
  <FONT FACE="Arial,Helvetica" size=-1> <B>Scroll down to see more currencies</B></FONT>
  </TR>

<TR ALIGN=CENTER>
  <TD COLSPAN=100% ALIGN=CENTER><FONT FACE="Arial,Helvetica,sans-serif">
    <!XERC-UCC1-P3.2-R1>
    <INPUT VALUE="Perform Currency Conversion" type=submit onClick="save()">

    <input type="button" value="Set Default Conversion" onClick="set(); window.location.reload();">

<script type="text/javascript"> 
function swapVar() {

var originalDefault = localStorage['default_currency'];
localStorage['default_currency'] = localStorage['default_currency_to'];
localStorage['default_currency_to'] = originalDefault;

}
</script>

<script type="text/javascript">
    function set() {
save_options_from();
save_options_to();
}

function restore() {
restore_options_from();
restore_options_to();
}

// Saves options to localStorage.
function save_options_from() {
  var select = document.getElementById("FROM");
  var FROM = select.children[select.selectedIndex].value;
  localStorage["default_currency"] = FROM;

}

function save_options_to() {
  var select = document.getElementById("TO");
  var TO = select.children[select.selectedIndex].value;
  localStorage["default_currency_to"] = TO;

}

// Restores select box state to saved value from localStorage.
function restore_options_from() {
  var favorite = localStorage["default_currency"];
  if (!favorite) {
    return;
  }
  var select = document.getElementById("FROM");
  for (var i = 0; i < select.children.length; i++) {
    var child = select.children[i];
    if (child.value == favorite) {
      child.selected = "true";
      break;

    }
  }
}

function restore_options_to() {
  var favorite2 = localStorage["default_currency_to"];
  if (!favorite2) {
    return;
  }
  var select = document.getElementById("TO");
  for (var i = 0; i < select.children.length; i++) {
    var child = select.children[i];
    if (child.value == favorite2) {
      child.selected = "true";
      break;

    }
  }
}
</script>

  </FONT></TD>
</TR>
</TD></TR></TABLE>

<TR ALIGN=CENTER>
  <TD BGCOLOR=#feef92 ALIGN=CENTER><FONT FACE="Arial,Helvetica,sans-serif" SIZE=-1 COLOR=#808080>
    <!-- Important Section Start -->
    <!-- ALL of the contents of this section are required under the usage agreement! -->
    <FONT COLOR=#2d2d2d ><B>Universal Currency Converter</B> under license from <B>XE.com</B>. <A HREF="http://www.xe.com/legal/" style="color:#808080;" target="_blank">Terms of Use</A>
    <!-- Important Section Ends -->
  </FONT></TD>
</TR>

</TABLE>
</TD></TR></TABLE></P>

<!-- XE.com Universal Currency Converter(tm) Input Page Ends -->

   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:30:31.327

使用 manifest v. 2 时，您应该将脚本提取到单独的文件中。有关更多信息，请参阅Google 网站上的[Chrome 扩展文档](http://code.google.com/chrome/extensions/contentSecurityPolicy.html)

# c# - 永远找不到正在运行的进程

> ID：11801147
> 
> 赞同：2
> 
> 时间：2012-08-03T18:16:18.280
> 
> 标签：c#, soap, process

我正在处理 ac#/soap/php 项目，其中 php Web 界面将执行一个肥皂请求以确定控制台应用程序是否正在运行。

soap 请求调用一个函数来获取进程，然后循环确定进程名称是否包含`EmailServer`. 但是，即使我可以`EmailServer.exe`在任务管理器中看到该过程，也永远找不到。我还设置了一个断点，这样我就可以查看数组中有哪些进程，而 EmailServer 不存在。

我正在运行带有 .net framework 3.5 的 Windows 7 x64，并且我以管理员帐户登录，因此这不会是权限问题。

下面是一个屏幕截图，显示了我在任务管理器中运行的进程![在此处输入图像描述](../Images/f5bab781a4097294c33bc8fa6f0cf203.png)

下面是获取进程列表的代码

```
public bool checkIfProcessIsRunning()
        {
            Process[] processes = Process.GetProcesses();
            foreach (Process process in processes)
            {
                if (process.ProcessName.ToLower().Contains("EmailServer"))
                {
                    return true;
                }
                else
                {
                    return false;
                }
            }
            return false;
        } 
```

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T18:17:26.567

> process.ProcessName.ToLower().Contains("EmailServer")

您正在检查全小写字符串是否包含带有大写字符的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:24:34.047

改用这个：`process.ProcessName.IndexOf("EmailServer", StringComparison.OrdinalIgnoreCase) > -1`

你也可以使用

```
if(Process.GetProcessesByName("EmailServer").Count() > 0) 
```

或者干脆

```
public bool checkIfProcessIsRunning(){
    return Process.GetProcessesByName("EmailServer").Any();
} 
```

# java - 如何将新的java类添加到jar文件中的现有类

> ID：11801155
> 
> 赞同：9
> 
> 时间：2012-08-03T18:16:32.177
> 
> 标签：java, jar

我为用 java 编写的软件创建了新模块。该软件是从 jar 文件运行的。我的课程正在扩展该软件中的课程。我想编写一个插件，将新类添加到 jar 文件中。我知道如何将 jar 文件提取到目录并使用 java.util.jar 包将它们添加到 jar 文件中，但是由于要从文件中提取很多文件，是否可以在不提取文件的情况下添加新类到文件夹，以某种方式直接。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T18:19:13.990

您可以使用以下命令

```
jar uf foo.jar foo.class 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T18:17:56.217

```
jar uf jar-file input-file(s) 
```

将允许在 jar 中添加[新文件/更新](http://docs.oracle.com/javase/tutorial/deployment/jar/update.html)现有文件而无需提取。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-03T18:29:27.630

您的问题表明您希望以编程方式执行此操作，**而不是**使用命令行`jar`工具。

从文档看来，您至少需要[`JarInputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarInputStream.html)从现有的中获取 a [`JarFile`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarFile.html)，使用 迭代条目[`getNextJarEntry`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarInputStream.html#getNextJarEntry%28%29)，并使用条目写入 a ，还使用每个新文件的新对象[`JarOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarOutputStream.html)添加您自己的新文件。[`JarEntry`](http://docs.oracle.com/javase/6/docs/api/java/util/jar/JarEntry.html)

[这](http://www.java2s.com/Code/Java/File-Input-Output/CreateJarfile.htm)是以编程方式从头开始编写 jar 的示例代码，这应该很好地扩展到您的情况，不同之处在于大多数`JarEntry`对象将来自`JarInputStream`.

# java - java - 如何在不显示打印对话框的情况下打印

> ID：11801159
> 
> 赞同：2
> 
> 时间：2012-08-03T18:16:58.780
> 
> 标签：java, printing

我正在创建一个 java 应用程序，应用程序将在其中打印图片和旁边的一些文本。我在打印时有两台打印机，我会相应地选择。我不会显示打印对话框让用户选择打印机和其他东西。我的代码如下

```
PrinterJob job = PrinterJob.getPrinterJob();
boolean ok = job.printDialog(); 
```

如果我不跳过该行`boolean ok = job.printDialog();`，则在我的情况下（20,20）将在提到的位置打印文本，但如果我跳过该行，我的打印可能会在打印机上更远的位置（120、120）完成意味着我需要一个保证金设置。并给我一个设置打印机的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T18:45:37.703

您可以使用`job.print()`而不是`job.printDialog()`. 但是，如果您希望能够更改边距和其他所有内容，则需要使用java.awt.print.Paper 和 java.awt.print.PageFormat 下的`Paper`和类。`PageFormat`Paper 将允许您设置纸张的尺寸并在`PageFormat`. 然后，您可以将`setPrintable()`PrinterJob 类的方法与类型对象`Printable`和`PrintFormat`作为参数一起使用。但最重要的是，`Paper`如果您担心，该课程将允许您设置边距。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-07T16:03:56.953

因为这个答案在谷歌上是最重要的，所以这里有一个代码示例：

```
public class printWithoutDialog implements printable 
{
    public PrintService findPrintService(String printerName)
    {
        for (PrintService service : PrinterJob.lookupPrintServices())
        {
            if (service.getName().equalsIgnoreCase(printerName))
                return service;
        }

        return null;
    }

    @Override
    public int print(Graphics g, PageFormat pf, int page) throws PrinterException 
    {
        if (page > 0) { /* We have only one page, and 'page' is zero-based */
            return NO_SUCH_PAGE;
        }

        /* User (0,0) is typically outside the imageable area, so we must
        * translate by the X and Y values in the PageFormat to avoid clipping
        */
        Graphics2D g2d = (Graphics2D)g;
        g2d.translate(pf.getImageableX(), pf.getImageableY());
        /* Now we perform our rendering */

        g.setFont(new Font("Roman", 0, 8));
        g.drawString("Hello world !", 0, 10);

        return PAGE_EXISTS;
    }

    public printSomething(String printerName)
    {
        //find the printService of name printerName
        PrintService ps = findPrintService(printerName);                                    
        //create a printerJob
        PrinterJob job = PrinterJob.getPrinterJob();            
        //set the printService found (should be tested)
        job.setPrintService(ps);      
        //set the printable (an object with the print method that can be called by "job.print")
        job.setPrintable(this);                
        //call je print method of the Printable object
        job.print();
    }
} 
```

要在没有对话框的情况下使用 Java 打印，您只需向 PrinterJob 指定要设置的打印服务是什么。printService 类为您想要的打印机提供服务。此类实现可打印，因为它是在 Java 教程（带对话框）中制作的。唯一的区别在于“printSompething”功能，您可以在其中找到评论。

# python - 主页加载前的运行方法（CherryPy）

> ID：11801163
> 
> 赞同：0
> 
> 时间：2012-08-03T18:17:10.900
> 
> 标签：python, jquery, webserver, cherrypy

我在网络编程方面没有太多经验，所以我将尝试简单地解释这个问题。

这是由 CherryPy (cherrypy.quickstart(SLA_App())) 运行的类的主要方法：

```
class SLA_app(Object):
    def index(self):
       global files;
       files=[...]
       createTable.createTable(files, '20/06/2012', '03/07/2012')
       cherrypy.tree.mount(SLA_App(), '/', 
        config = { '/': { 'tools.staticdir.on' :True,
       'tools.staticdir.dir' : 'some/dir',
       'tools.staticdir.index' : 'cherry.html' } 
        })
        return open('cherry.html')
    index.exposed = True 
```

我创建了一个 CherryPy 服务器。每次加载主页时，都需要执行一个方法。该方法在某个文件中生成 HTML 代码。它在 createTable.createTable(files) 中完成。说，它创建了 insert.html 。正在加载的主页有 jquery 方法，该方法将文件的代码加载到一些文件中，最后得到包含所有内容的结果页面。

现在，每当有人进入页面时，我都希望执行该方法。问题是它只在服务器起点有效。每次人们进入页面时，它都会加载旧文件（不会调用方法）。每次加载页面时如何使其工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T07:13:11.587

您对 cherrypy.tree.mount 的调用不应在 index 方法中完成（尽管我认为这不是您唯一的问题）。

```
class SLA_app(Object):
    def index(self):
       global files;
       files=[...]
       createTable.createTable(files, '20/06/2012', '03/07/2012')

       return open('cherry.html')
    index.exposed = True

cherrypy.tree.mount(SLA_App(), '/', 
    config = { '/': { 'tools.staticdir.on' :True,
   'tools.staticdir.dir' : 'some/dir',
   'tools.staticdir.index' : 'cherry.html' } 
    }) 
```

我不确定您的 createTable 做了什么，但如果必须完成一次，也可以从该索引方法中提取它。另请注意，使用 staticdir 工具时，您的 dir 路径必须是绝对路径。请阅读文档的[这一部分](http://docs.cherrypy.org/stable/progguide/files/static.html)。

最后，您的配置似乎覆盖了 index 方法本身，因为两者都会响应 /。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:47:16.683

最后我解决了这个问题。问题是每次网络启动时，它都应该向服务器发送请求，接收答案并动态构建页面。这可以通过 Ajax 来完成。由于我使用 jQuery，$.post 方法在处理中非常有用。

对于所有新手，就像我一样，我建议阅读 David Sawyer McFarland 的“JavaScript and jQuery: The Missing Manual”。祝你好运！

# mysql - MySQL 维护需要 Cron 语法

> ID：11801164
> 
> 赞同：1
> 
> 时间：2012-08-03T18:17:17.410
> 
> 标签：mysql, cron

我正在尝试设置一个 Cron 作业来删除日期字段超过三周的 MySQL 记录，但我无法弄清楚框中的字符串是什么。这是 Cron 管理屏幕的图片。有人可以帮忙吗？ [http://i46.tinypic.com/id4nsj.jpg](http://i46.tinypic.com/id4nsj.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:16:25.500

如果您知道要运行的查询，则可以`-e`在脚本的命令行中使用 mysql 的参数。因此，您的 cron 管理工具中的“运行命令”将是：

```
mysql -u <username> -p<password> -h <name-of-mysql-server> <databasename> 
-e "<YOUR-QUERY-HERE>" 
```

删除早于某个日期的记录的查询的一般结构是：

```
DELETE FROM [table] WHERE [column] < DATE_SUB(NOW(), INTERVAL 3 WEEK); 
```

# php - crypt() 函数中输入的最大字符串是多少？

> ID：11801169
> 
> 赞同：6
> 
> 时间：2012-08-03T18:17:52.180
> 
> 标签：php, php-5.3

我想我已经达到了`crypt($string)`72 个字符的限制。这是代码：

```
<?php   
$p = '0123456789abcdefghij0123456789abcdefghij0123456789abcdefghij0123456789++';
var_dump($p);

$salt = '$2y$12$' . substr(str_replace('+', '.', 
            base64_encode(sha1(microtime(true), true))), 0, 22);
var_dump($salt);

$hash = crypt($p, $salt);
var_dump($hash);

var_dump($hash === crypt($p, $hash));
var_dump($hash === crypt($p.'a', $hash));
var_dump($hash === crypt($p.'-or-anthing else beyond this...', $hash)); 
```

输出是：

```
string(72) "0123456789abcdefghij0123456789abcdefghij0123456789abcdefghij0123456789++"
string(29) "$2y$12$nLe2d618C6YN0FQ0vODGvz"
string(60) "$2y$12$nLe2d618C6YN0FQ0vODGvutzCR5h0ngWmDSXtFdSt2dPAW5vgPd1e"
bool(true)
bool(true)
bool(true) 
```

72 char 是最大输入字符串是正常行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T20:20:02.477

是的，经过一番调查，bcrypt算法限制为72个字符。除此之外的任何内容都会被截断。

但是，作为一种为密码散列设计的散列算法，我怀疑你永远需要担心这个限制。

# php - 使用 mysql、php 和 redis 为 noob 缓 存

> ID：11801172
> 
> 赞同：0
> 
> 时间：2012-08-03T18:17:59.853
> 
> 标签：php, redis

我在下面有这个方法，可以让我计算一个类别中的产品数量。我想在我的 redis 服务器中缓存计数。我能够做到这一点，但我不确定如何破坏缓存，我的概念也不清楚。任何帮助或想法将不胜感激。

```
public static function products(){
             $prods = $this>getProducts();
             $Count = count($prods);
        if($Count){
            // save the count to redis
          $redis->saveCount($count);

        }                       

} 
```

我什么时候打 sql 数据库 ( `$prods = $this>getProducts();`) 来获取计数，什么时候从 redis 中获取？另外，我怎么知道什么时候做以及什么时候在redis中破坏旧记录？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:30:05.757

当您在redis中插入计数时，也会插入它被插入的时间。然后，当页面加载时，从 redis 服务器获取计数和时间，如果时间大于 X 分钟或小时，则从产品数据库中获取实际计数并重复。那是你要找的吗？

# c# - 如何通过 Windows 应用程序访问具有基于声明的身份验证的 SharePoint 2010 网站页面？

> ID：11801179
> 
> 赞同：0
> 
> 时间：2012-08-03T18:18:29.730
> 
> 标签：c#, .net, sharepoint-2010

我需要创建一个 Windows 应用程序，它将访问 SharePoint 2010 网站页面，以便在本地驱动器中以“.htm”格式存储该页面。

但是，该 SharePoint 网站具有基于声明的身份验证。

为了访问该站点，我必须提供“用户名”和“密码”以及“域名”。

因此，我需要有关如何通过 Windows 应用程序传递站点凭据以访问该站点的帮助？

我使用了以下代码，但这会引发异常“远程服务器返回错误：（403）禁止”。

```
WebRequest Request1;
HttpWebResponse Response1;

Request1 = WebRequest.Create(txtUrl.Text.ToString());
Request1.Credentials = new NetworkCredential(strUserNm.ToString(), strPassword.ToString(), StrDomain.ToString());

Request1.PreAuthenticate = true;
Response1 = (HttpWebResponse)Request1.GetResponse(); 
```

任何帮助都将是可观的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T20:32:22.147

基于[具有双重身份验证模式的预热计时器作业](http://shirleypriyanka.wordpress.com/2013/10/08/warmup-timerjob/)，我对此进行了更改：

```
WebRequest request = WebRequest.Create(url);
request.Method = "GET";
request.Timeout = System.Threading.Timeout.Infinite;
request.Credentials = CredentialCache.DefaultNetworkCredentials;
WebResponse response = request.GetResponse(); 
```

对此：

```
HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
request.Method = "GET";
request.Timeout = System.Threading.Timeout.Infinite;
request.Credentials = new CredentialCache
{
    { new Uri(url), "NTLM", new NetworkCredential(username, password, domain) }
};
request.Headers.Add("Authorization", GetAuthorization(username, password, domain));
request.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 5.1; zh-TW; rv:1.9.2.12) Gecko/20101026 Firefox/3.6.12 GTB7.1 ( .NET CLR 3.5.30729)";
request.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
request.CookieContainer = new CookieContainer();
HttpWebResponse response = request.GetResponse() as HttpWebResponse; 
```

GetAuthorization 方法如下所示：

```
private function GetAuthorization(string username, string password, string domain) 
{
    string credentials = string.Format(@"{0}\{1}:{2}", domain, username, password);
    byte[] bytes = Encoding.ASCII.GetBytes(credentials);
    string base64 = Convert.ToBase64String(bytes);
    return = string.Concat("NTLM ", base64);
} 
```

使用更新后的代码，我能够访问 Classic 和 Claims Based web 应用程序中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:26:41.017

注意域是如何被捕获的。

//不要使用域\用户名或用户名@域作为此构造函数的用户名参数。这将不起作用（按设计）。接受域的构造函数有 3 个参数。或者使用上面示例代码中明确记录的域属性。

```
// Call the onstructor  to create an instance of NetworkCredential with the 
// specified user name and password.

NetworkCredential myCredentials = new NetworkCredential(username,passwd);

// Create a WebRequest with the specified URL. 
WebRequest myWebRequest = WebRequest.Create(url);
myCredentials.Domain = domain;
myWebRequest.Credentials = myCredentials;
Console.WriteLine("\n\nCredentials Domain : {0} , UserName : {1} , Password : {2}",
myCredentials.Domain, myCredentials.UserName, myCredentials.Password);
Console.WriteLine("\n\nRequest to Url is sent.Waiting for response...");

// Send the request and wait for a response.
WebResponse myWebResponse = myWebRequest.GetResponse(); 

// Process the response.
Console.WriteLine("\nResponse received successfully.");
// Release the resources of the response object.
myWebResponse.Close(); 
```

# c++ - CMake 无法使用 C++ 确定链接器语言

> ID：11801186
> 
> 赞同：114
> 
> 时间：2012-08-03T18:19:06.080
> 
> 标签：c++, c, cmake

我正在尝试使用 Visual Studio 2010 和 Cygwin 在 Windows 7 x64 上运行 cmake hello world 程序，但似乎都无法正常工作。我的目录结构如下：

```
HelloWorld
-- CMakeLists.txt
-- src/
-- -- CMakeLists.txt
-- -- main.cpp
-- build/ 
```

我做了 a`cd build`后跟 a `cmake ..`，并得到一个错误说明

```
CMake Error: CMake can not determine linker language for target:helloworld
CMake Error: Cannot determine link language for target "helloworld". 
```

但是，如果我在我的文件系统上将 main.cpp 的扩展名更改为 main.c，并且`src/CMakeLists.txt`一切都按预期工作。这是从 Visual Studio 命令提示符（Visual Studio 解决方案生成器）和 Cygwin 终端（Unix Makefiles 生成器）运行的情况。

知道为什么这段代码不起作用吗？

CMakeLists.txt

```
PROJECT(HelloWorld C)
cmake_minimum_required(VERSION 2.8)

# include the cmake modules directory
set(CMAKE_MODULE_PATH ${HelloWorld_SOURCE_DIR}/cmake ${CMAKE_MODULE_PATH})

add_subdirectory(src) 
```

src/CMakeLists.txt

```
# Include the directory itself as a path to include directories
set(CMAKE_INCLUDE_CURRENT_DIR ON)

# Create a variable called helloworld_SOURCES containing all .cpp files:
set(HelloWorld_SOURCES main.cpp)

# Create an executable file called helloworld from sources:
add_executable(hello ${HelloWorld_SOURCES }) 
```

src/main.cpp

```
int main()
{
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：227
> 
> 时间：2013-05-21T11:40:51.620

我也得到了你提到的错误：

```
CMake Error: CMake can not determine linker language for target:helloworld
CMake Error: Cannot determine link language for target "helloworld". 
```

在我的情况下，这是由于具有`.cc`扩展名的 C++ 文件。

如果 CMake 无法正确确定代码的语言，您可以使用以下内容：

```
set_target_properties(hello PROPERTIES LINKER_LANGUAGE CXX) 
```

建议将语言附加到`project()`语句中的公认答案只是增加了对所使用语言的更严格检查（根据文档），但这对我没有帮助：

> 您可以选择指定项目支持的语言。示例语言有 CXX（即 C++）、C、Fortran 等。默认情况下启用 C 和 CXX。例如，如果您没有 C++ 编译器，您可以通过明确列出您想要支持的语言（例如 C）来禁用对它的检查。通过使用特殊语言“NONE”，可以禁用对任何语言的所有检查。如果存在名为 CMAKE_PROJECT__INCLUDE_FILE 的变量，则该变量指向的文件将作为项目命令的最后一步包含在内。

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2015-04-08T14:52:59.400

就我而言，这只是因为目标中没有源文件。我所有的代码都是一个模板，头文件中有源代码。添加一个空的 file.cpp 解决了这个问题。

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2012-08-03T19:19:57.893

尝试改变

```
PROJECT(HelloWorld C) 
```

进入

```
PROJECT(HelloWorld C CXX) 
```

要不就

```
PROJECT(HelloWorld) 
```

见：[http ://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:project](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:project)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2018-04-04T06:14:08.933

令人困惑的是，当项目中包含的 cpp 文件不存在时也会发生错误。

如果您在 CMakeLists.txt 中列出源文件并错误地键入文件名，则会收到此错误。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-08-01T14:59:41.720

对 OP 的回答有点不相关，但对于像我这样有类似问题的人来说。

**用例：Ubuntu（C、Clion、自动完成）：**

我有同样的错误，

> CMake 错误：无法确定目标“hello”的链接语言。

`set_target_properties(hello PROPERTIES LINKER_LANGUAGE C)`帮助解决该问题，但标题不包含在项目中，并且自动完成将不起作用。

这就是我所拥有的

```
cmake_minimum_required(VERSION 3.5)

project(hello)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

set(SOURCE_FILES ./)

add_executable(hello ${SOURCE_FILES})

set_target_properties(hello PROPERTIES LINKER_LANGUAGE C) 
```

没有错误，但不是我需要的，我意识到将单个文件作为源代码将使我自动完成，并将链接器设置为`C`.

```
cmake_minimum_required(VERSION 3.5)

project(hello)

set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11")

set(SOURCE_FILES ./1_helloworld.c)

add_executable(hello ${SOURCE_FILES}) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2020-10-18T16:48:10.910

如果要构建没有任何源文件的库，我想添加另一个解决方案。此类库也称为*仅标头*库。默认情况下`add_library`，至少需要添加一个源文件，否则会发生上述错误。由于只有标头的库很常见，因此 cmake 具有`INTERFACE`构建此类库的关键字。该`INTERFACE`关键字的使用如下所示，它消除了将空源文件添加到库中的需要。

```
add_library(myLibrary INTERFACE)
target_include_directories(myLibrary INTERFACE {CMAKE_CURRENT_SOURCE_DIR}) 
```

上面的示例将构建一个仅包含头文件的库，包括与 CMakeLists.txt 位于同一目录中的所有头文件。`{CMAKE_CURRENT_SOURCE_DIR}`如果您的头文件与 CMakeLists.txt 文件位于不同的目录中，请替换为路径。

查看此[博客文章](http://mariobadr.com/creating-a-header-only-library-with-cmake.html)或[cmake 文档](https://cmake.org/cmake/help/latest/command/add_library.html#interface-libraries)以获取有关仅标头库和 cmake 的更多信息。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-06-20T09:46:46.517

在编译基于 C 的代码时，我也遇到了类似的错误。我通过更正文件中的源文件路径解决了这个问题`cmake`。请检查您的文件中提到的每个源文件的源文件路径`cmake`。这也可能对您有所帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-25T10:29:54.163

默认情况下，JNI Native 文件夹命名为**jni**。将其重命名为**cpp**解决了该问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-10-14T04:26:38.723

只需检查源文件的路径。（到各自的 cpp）

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2018-10-25T12:22:36.920

我设法解决了我的问题，通过改变

```
add_executable(file1.cpp) 
```

到

```
add_executable(ProjectName file1.cpp) 
```

# sql - 如果（计数（*）> 1）

> ID：11801193
> 
> 赞同：0
> 
> 时间：2012-08-03T18:19:42.613
> 
> 标签：sql, tsql

我正在尝试查看两个表 TableA 和 TableB 打印出任何显示超过 1 个计数的 TableA.ID。表 A 如下所示：

```
ID  |  Code
------------
1   |  A
2   |  B
3   |  C 
```

表 B 看起来像

```
ID  |  AID |   EffectiveDate  |  ExpirationDate
------------------------------------------------
1   |  1   |  2012-01-01      |  2012-12-31
2   |  1   |  2012-01-01      |  2012-12-31
3   |  2   |  2012-01-01      |  2012-12-31
4   |  3   |  2012-01-01      |  2012-12-31 
```

我正在使用的查询如下所示：

```
DECLARE @MoreThanOne varchar(250)
SET @MoreThanOne = ''
IF((SELECT COUNT(*) FROM TableA
WHERE EXISTS(
SELECT TableB.ID
        ,TableB.EffectiveDate
        ,TableB.ExpirationDate
     FROM TableB
     WHERE TableB.AID = TableA.ID
        and GETDATE() Between TableB.EffectiveDate and TableB.ExpirationDate
) 
GROUP BY TableA.Code) > 1)
BEGIN
--SET @MoreThanOne = @MoreThanOne + TableA.Code + CHAR(10)

END

PRINT @MoreThanOne 
```

我知道我的嵌套查询在返工时可以工作，它将打印 TableA 中唯一代码中所有的计数。我知道我不能使用我注释掉的内容，因为我无权访问 TableA.Code。我的问题是有另一种方法可以做到这一点，或者我如何才能访问 TableA.Code 的 Message MoreThanOne。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:23:23.730

此查询将为您提供表 B 中重复的所有 AID 的代码：

```
SELECT Code
FROM TableA
WHERE AID IN
(
    SELECT AID
    FROM TableB
    GROUP BY AID
    HAVING COUNT(*) > 1
) 
```

您可能还希望将`WHERE`存储过程中的条件添加到内部选择中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:25:30.787

试试这个

```
SELECT TableA.ID, TableA.Code, Count(*) As Cnt

         FROM TableB, TableA
         WHERE TableB.AID = TableA.ID
            and GETDATE() Between TableB.EffectiveDate and TableB.ExpirationDate
         GROUP BY TableA.ID, TableA.Code
         HAVING COUNT(*) > 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:33:27.277

您可以非常简单地做到这一点，无需加入：

```
SELECT tableb.AID
FROM TableB
WHERE GETDATE() Between TableB.EffectiveDate and TableB.ExpirationDate
group by tableb.AID
having count(*) > 1 
```

这只是按 AID 聚合 tableB，返回具有多个记录的值。如果您还想要代码，则只需要加入 TableA。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:37:04.200

你应该这样做：

```
select Code      = a.Code ,
       Frequency = count(*)
from table_a a
join table_b b on b.aid = a.id
              and current_timestamp between b.EffectiveDate and b.ExpirationDate
group by a.Code
having count(*) > 1
order by 2 desc -- order in descending sequence by frequency
         1      -- then ascending sequence by code 
```

# php - 动态抓取 HTML

> ID：11801194
> 
> 赞同：0
> 
> 时间：2012-08-03T18:19:49.617
> 
> 标签：php, parsing, dom

我想从我拥有的一些 html 页面中获取一些数据，然后将数据存储在数据库中。

HTML 文件有一个博客列表，它们的组织方式如下：

```
 <div class="breadlist"></div>    

    <h3 class="list"><a href="http://test1.com">Title 1</a></h3>
    <p><strong>Description:</strong> Description 1.<br>
    <strong>Author:</strong> Author1<br>
    <strong>XML:</strong> <a href="http://test1.com/feed">Title 1</a><br>
    <strong>Language:</strong> Language1</p>

    <h3 class="list"><a href="http://test2.com">Title 2</a></h3>
    <p><strong>Description:</strong>Description 2\. <br>
    <strong>Author:</strong> Author1<br>
    <strong>XML:</strong> <a href="http://test2.com/feed">Title 2</a>  
    <strong>Language:</strong> Español</p>

<div class="breadlist"></div> 
```

在这个例子中，有 2 个博客，但有时有 10 个甚至 100 个博客。每个文件都有不同的数量。我想得到这个数据：

```
Website Address, Title, Description, Author, Feed, Language. 
```

我试图用**PHP Simple HTML DOM Parser**来做到这一点，但今天是我第一次尝试，却无处可去。我想我必须循环一些东西，但不知道该怎么做。任何人都知道如何用 PHP 做到这一点？谢谢！

**----编辑----** 这是我迄今为止尝试过的：

```
$str = <<<HTML
<div class="breadlist"></div>    

    <h3 class="list"><a href="http://test1.com">Title 1</a></h3>
    <p><strong>Description:</strong> Description 1.<br>
    <strong>Author:</strong> Author1<br>
    <strong>XML:</strong> <a href="http://test1.com/feed">Title 1</a><br>
    <strong>Language:</strong> Language1</p>

    <h3 class="list"><a href="http://test2.com">Title 2</a></h3>
    <p><strong>Description:</strong>Description 2\. <br>
    <strong>Author:</strong> Author1<br>
    <strong>XML:</strong> <a href="http://test2.com/feed">Title 2</a>  
    <strong>Language:</strong> Español</p>

<div class="breadlist"></div>
HTML;

$html = str_get_html($str);
    foreach($html->find('h3[class=list]') as $title){
       echo "Title: " . $title->innertext . "<br />";
    }
    foreach($html->find('h3[class=list] a') as $address){
       echo "Address: " . $address->href . "<br />";       
}
 foreach($html->find('p') as $description){

       echo "Description: " . $description->childNodes(3)->plaintext . "<br />"; //doesnt work
 }
 foreach($html->find('p a') as $feed){
       echo "Feed: " . $feed->href . "<br />";       
}
 foreach($html->find('h3[class=list] a') as $language){
       echo "Language: " . $language->innertext . "<br />"; // doesnt work       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:23:22.003

使用[strip_tags](http://php.net/strip_tags)：

```
echo strip_tags($html_text); 
```

如果数据在您的 HTML 代码中始终保持相同的顺序，则可能就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T20:49:27.770

I couldn't find a way to do it so I just did a find, replace and modify it in a way that could use the PHP Simple HTML DOM Parser

# jquery - 加载 asp:Chart 从不同的服务器到我的 div

> ID：11801197
> 
> 赞同：0
> 
> 时间：2012-08-03T18:20:09.030
> 
> 标签：jquery, cross-domain

我在 Server1 中有一个使用 asp:Chart 显示图表的网页。我的应用程序部署在 Server2 中并尝试如下加载我的 div

```
$("#div").load("http://server1/charts", function(response, status, xhr) {
        if (status == "error") {            
            alert("Error: " + xhr.status + " " + xhr.statusText);
        }
    }); 
```

不幸的是，我收到了一个错误，因为`Error: 0 No Transport` 欢迎提出任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:37:28.450

要启用跨域调用，您可以尝试

```
jQuery.support.cors = true; 
```

如果这不起作用，您可以通过：
[http ://www.west-wind.com/weblog/posts/2007/Jul/04/JSONP-for-crosssite-Callbacks](http://www.west-wind.com/weblog/posts/2007/Jul/04/JSONP-for-crosssite-Callbacks)
[https://en.wikipedia.org/维基/JSON](https://en.wikipedia.org/wiki/JSON)
[http://remysharp.com/2007/10/08/what-is-jsonp/](http://remysharp.com/2007/10/08/what-is-jsonp/)

您可以关注其中任何一个

# asp.net-mvc - 在登录操作中无法获取会员用户名

> ID：11801198
> 
> 赞同：1
> 
> 时间：2012-08-03T18:20:12.800
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, asp.net-membership

这是我的登录操作：

```
Public Function LogOn(ByVal model As LogOnModel, ByVal returnUrl As String) As ActionResult
    If ModelState.IsValid Then
        If Membership.ValidateUser(model.UserName, model.Password) Then
            FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe)
            If Url.IsLocalUrl(returnUrl) AndAlso returnUrl.Length > 1 AndAlso returnUrl.StartsWith("/") _
               AndAlso Not returnUrl.StartsWith("//") AndAlso Not returnUrl.StartsWith("/\\") Then
                Return Redirect(returnUrl)
            Else

                ' redirect based on whether the user is admin, company owner, or blog owner

                Debug.Print(Membership.GetUser.UserName) 
```

当我尝试调试变量时，它显示“NullReferenceException，对象引用未设置为对象的实例”。

它只是在一分钟前工作！如何获取用户名变量？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:26:25.840

设置身份验证 cookie 会将其添加到当前请求的响应中。直到将响应发送到客户端之后，cookie 才出现在请求中，并且客户端在后续请求中发送它。

好消息是您已经拥有模型中的用户名，所以我建议使用它。

# ruby-on-rails-3 - 什么是 Rails 3 中的质量分配

> ID：11801200
> 
> 赞同：22
> 
> 时间：2012-08-03T18:20:33.290
> 
> 标签：ruby-on-rails-3, activerecord, mass-assignment

我听说有几个人抱怨并发布了有关 Rails 中的大规模分配的问题。我有几次同样的错误，我所做的只是`attr_accessible`。但究竟什么是批量分配？有人可以举例解释吗？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-03T18:26:41.140

[Mass Assignment](http://guides.rubyonrails.org/security.html#mass-assignment)是 Rails 赋予使用参数​​哈希构造对象的行为的名称。它是“批量赋值”，因为您通过单个赋值运算符将多个值分配给属性。

以下片段执行模型的`name`和`topic`属性的质量分配`Post`：

```
Post.new(:name => "John", :topic => "Something")
Post.create(:name => "John", :topic => "Something")
Post.update_attributes(:name => "John", :topic => "Something") 
```

为了使其工作，您的模型必须允许对您传入的哈希中的每个属性进行批量分配。

有两种情况会失败：

*   您的`attr_accessible`声明*不*包括`:name`
*   你*有*一个`attr_protected`包含*`:name`*

 *最近，必须通过 a 手动将属性列入白名单`attr_accessible`才能使批量分配成功，这已成为默认设置。在此之前，默认情况下属性是可分配的，除非它们被明确列入黑名单`attr_protected`或任何*其他*属性被列入白名单`attr_acessible.`

考虑可以批量分配哪些属性很重要，因为这样的代码很常见：

```
@post = Post.new(params[:post]) 
```

通常，当用户提交由`form_for @post`. 在理想的世界中，`params[:post]`散列应该只包含我们在表单上显示的字段。但是，用户在他们的请求中传递额外的字段是微不足道的，因此实际上您允许用户在 上设置*任何*字段`@post`，而不仅仅是表单上显示的字段。

未能安全地使用批量分配导致了一些相当大的 Rails 应用程序中的几个引人注目的错误，例如允许某人[将自己的公钥](http://www.infoq.com/news/2012/03/GitHub-Compromised/)注入 Github 存储库上的受信任密钥列表并将代码直接推送到他们的存储库。不应该访问。*

# asp.net-mvc-3 - Post 上的 MVC 模型没有导航属性

> ID：11801205
> 
> 赞同：0
> 
> 时间：2012-08-03T18:21:14.483
> 
> 标签：asp.net-mvc-3, entity-framework-4

我环顾四周，找不到任何有这种问题的人，所以我发布了这个问题。

我在控制器中有两个编辑操作（发布和获取），在 GET 中我填充了传递给视图的视图模型的 Wine 属性。

在 POST 上，我阅读了该视图模型，并将更改保存到数据库中。之后，我想用更新后的 Wine 属性更新我的 Lucene 搜索索引。但是，我不断收到错误消息，因为 Wine 属性没有填充任何导航属性。

我尝试使用 db.Wines.Find(ew.wine.WindID) 查找新的葡萄酒对象，但仍然返回没有导航属性的 Wine。值得一提的是，这正是 GET 编辑操作所做的，并且正确填充。我不知道这里发生了什么。我还尝试了 Wine w = db.Entry(ew.Wine).Entity 来填充这些导航属性，但无济于事......提前感谢您的帮助！

ViewModel & Wine 模型

```
 public class NewWineViewModel
    {

        public Wine Wine { get; set; }
        public VOAVIRequest VOAVIRequest { get; set; }
        public bool IsRequest { get; set; }

        public SelectList VarTypes { get; set; }
        public SelectList Origins { get; set; }
        public SelectList Apps { get; set; }
        public SelectList Vintages { get; set; }
        public SelectList Importers { get; set; }

        public NewWineViewModel()
        {
            this.Wine = new Wine();
        }

    }

 public class Wine :Updater
    {
        public int WineID { get; set; }
        //public int WineTypeID { get; set; }
        [Display(Name = "Varietal/Type")]
        public int? VarTypeID { get; set; }
        [Display(Name = "Origin")]
        public int? OriginID { get; set; }
        [Display(Name = "Appellation")]
        public int? AppID { get; set; }
        [Display(Name = "Vintage")]
        public int? VintageID { get; set; }
        [Display(Name = "Importer")]
        public int? ImporterID { get; set; }
        public int ProducerID { get; set; }
        public string Designate { get; set; }
        [Display(Name = "Drink Window")]
        public string DrinkWindow { get; set; }
        public string Body { get; set; }
        public string SKU { get; set; }
        [Display(Name = "Varietal Makeup")]
        public string VarietalMakeup { get; set; }
        [Display(Name = "Case Production")]
        public string CaseProduction { get; set; }
        [Display(Name = "Alcohol Content")]
        public double? AlcoholContent { get; set; }
        public string Winemaker { get; set; }
        [Display(Name = "Consulting Winemaker")]
        public string ConsultWinemaker { get; set; }
        public bool Sustainable { get; set; }
        public bool Kosher { get; set; }
        public bool Organic { get; set; }
        public bool Biodynamic { get; set; }
        public bool SalmonSafe { get; set; }
        public Boolean Active { get; set; }
        [Display(Name = "ResidualSugar")]
        public double? RS { get; set; }
        public double? pH { get; set; }
        public string QRUrl { get; set; }

        public virtual WineType WineType { get; set; }

        public virtual VarType VarType { get; set; }
        public virtual Origin Origin { get; set; }
        public virtual App App { get; set; }
        public virtual Vintage Vintage { get; set; }
        public virtual Importer Importer { get; set; }
        public virtual Producer Producer { get; set; }
} 
```

来自控制器的两个编辑操作：

```
 [ProducerEdit]
    public ActionResult Edit(int WineID)
    {

        NewWineViewModel ew = new NewWineViewModel();
        ew.Wine = db.Wines.Find(WineID);
        ew.VarTypes = new SelectList(db.VarTypes, "VarTypeID", "Name", ew.Wine.VarTypeID);
        ew.Origins = new SelectList(db.Origins, "OriginID", "Name", ew.Wine.OriginID);
        ew.Apps = new SelectList(db.Apps, "AppID", "Name", ew.Wine.AppID);
        ew.Vintages = new SelectList(db.Vintages, "VintageID", "Name", ew.Wine.VintageID);
        //might need to handle null on this one
        ew.Importers = new SelectList(db.Importers, "ImporterID", "Name", ew.Wine.ImporterID);
        return View(ew);

    }

    //post
    [HttpPost]
    [ProducerEdit]
    public ActionResult Edit(NewWineViewModel ew)
    {

        if (ModelState.IsValid)
        {
            ew.Wine.Body = ew.Wine.Body == "Please select wine body" ? string.Empty : ew.Wine.Body;

            ew.Wine.UpdatedBy = User.Identity.Name;
            ew.Wine.UpdatedOn = DateTime.Now;
            db.Entry(ew.Wine).State = EntityState.Modified;
            db.SaveChanges();

            Wine w = db.Wines.Find(ew.Wine.WineID);

            Lucene.LuceneSearch.ClearLuceneIndexRecord(ew.Wine.WineID);
            Lucene.LuceneSearch.AddUpdateLuceneIndex(ew.Wine);

            if (ew.IsRequest)
            {
                ew.VOAVIRequest.WineID = ew.Wine.WineID;
                ew.VOAVIRequest.CreatedBy = User.Identity.Name;
                ew.VOAVIRequest.CreatedOn = DateTime.Now;
                db.VOAVIRequests.Add(ew.VOAVIRequest);
                db.SaveChanges();

                return RedirectToAction("Requested");

                //redirect to "Request Submitted" page for new wines
            }

            return RedirectToAction("Details", new { id = ew.Wine.WineID });

        }
        else
        {
            ew.VarTypes = new SelectList(db.VarTypes, "VarTypeID", "Name", ew.Wine.VarTypeID);
            ew.Origins = new SelectList(db.Origins, "OriginID", "Name", ew.Wine.OriginID);
            ew.Apps = new SelectList(db.Apps, "AppID", "Name", ew.Wine.AppID);
            ew.Vintages = new SelectList(db.Vintages, "VintageID", "Name", ew.Wine.VintageID);
            //might need to handle null on this one
            ew.Importers = new SelectList(db.Importers, "ImporterID", "Name", ew.Wine.ImporterID);
            return View(ew);
        }

    } 
```

编辑 - 这是 Razor 中的表格

```
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)

    <h3>@ViewBag.ProducerName</h3>
    @Html.HiddenFor(m => m.Wine.WineID)
    @Html.HiddenFor(m => m.Wine.ProducerID)
    @Html.HiddenFor(m => m.IsRequest)

    <h4 style="margin-top: -40px; padding-bottom: 10px;">Editing @Model.Wine.Name</h4>
    <table>
        <tr>
            <td>@Html.LabelFor(m => m.Wine.VarTypeID)
            </td>
            <td style="display: inline">
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.VarTypeID, Model.VarTypes, new { @class = "chzn-select" })
                </div>
                @Html.TextBoxFor(m => m.VOAVIRequest.VarType, new { style = "display: none;", @class = "voavignore" })
                <a id="lnkNewVar" class="filetypes" href="#">New Varietal?</a> @*                @Html.ValidationMessageFor(m => m.VOAVIRequest.VarType)*@
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.OriginID)
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.OriginID, Model.Origins, new { @class = "chzn-select" })
                </div>
                @Html.TextBoxFor(m => m.VOAVIRequest.Origin, new { style = "display: none;", @class = "voavignore" })
                <a id="lnkNewOrigin" class="filetypes" href="#">New Origin?</a>
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.AppID)
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.AppID, Model.Apps, new { @class = "chzn-select" })
                </div>
                @Html.TextBoxFor(m => m.VOAVIRequest.App, new { style = "display: none;", @class = "voavignore" })<a
                    id="lnkNewApp" class="filetypes" href="#">New Varietal?</a>
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.VintageID)
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.VintageID, Model.Vintages, new { @class = "chzn-select" })
                </div>
                @Html.TextBoxFor(m => m.VOAVIRequest.Vintage, new { style = "display: none;", @class = "voavignore" })
                <a id="lnkNewVintage" class="filetypes" href="#">New Varietal?</a>
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Designate)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Designate)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.DrinkWindow)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.DrinkWindow)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.VarietalMakeup)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.VarietalMakeup)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Body)
            </td>
            <td>
                @Html.DropDownListFor(m => m.Wine.Body, new SelectList(Model.Wine.BodyList, "Text", "Text", Model.Wine.Body), new { @class = "chzn-select" })
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.ImporterID)
            </td>
            <td>
                <div class="voavi-select">
                    @Html.DropDownListFor(m => m.Wine.ImporterID, Model.Importers, new { @class = "chzn-select" })</div>
                @Html.TextBoxFor(m => m.VOAVIRequest.Importer, new { style = "display: none;" })
                <a id="lnkNewImporter" class="filetypes" href="#">New Varietal?</a>
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.SKU)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.SKU)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.CaseProduction)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.CaseProduction)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.AlcoholContent)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.AlcoholContent)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.RS)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.RS)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.pH)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.pH)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Winemaker)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Winemaker)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.ConsultWinemaker)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.ConsultWinemaker)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Sustainable)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Sustainable)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Kosher)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Kosher)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Organic)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Organic)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.Biodynamic)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.Biodynamic)
            </td>
        </tr>
        <tr>
            <td>
                @Html.LabelFor(m => m.Wine.SalmonSafe)
            </td>
            <td>
                @Html.EditorFor(m => m.Wine.SalmonSafe)
            </td>
        </tr>
    </table>
    <p>
        <input type="submit" value="Update" />
    </p>
} 
```

# c++ - 将 C++ 头文件中定义的嵌套结构中的信息转储到 XML

> ID：11801210
> 
> 赞同：0
> 
> 时间：2012-08-03T18:21:27.980
> 
> 标签：c++, parsing, header, xml-parsing, xerces-c

我正在编写一个 C/C++ 头文件解析器，它将 .h 文件转换为特定的 XML 格式。

我有一个定义如下的结构：

```
struct struct1
{
   struct structchild1
   {  
      float child2;
   } child3;
   unsigned int child3;
}; 
```

我希望将上述结构表示为：

```
<tag1= "struct1">
        <name>struct1</name>
        <input_type>byte</input_type>
        <method></method>
        <tag_ref = "structchild1">
            <name>child3</name>
            <tag2 = "child2">
            <name>child2<name>
            <size>4<size>
            </tag2>
        </tag_ref>
     <tag2= "child3">
          <name>child3</name>
          <len>4</len>
          <value> </value>
     </tag2>
</tag1> 
```

**我的方法**：我使用的是 2 阶段过程，我首先将头文件转换为 gccXML 格式，然后使用 xerces-C++ for Visual Studio 将结果打印到 XML 文件中。我能够成功解析除嵌套结构或联合之外的所有内容（枚举、typedef 等）。somebpdy 可以请帮助我了解如何执行此操作吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T17:28:20.657

我不知道这是否会有所帮助，因为您使用的是 C++。但是如果您想轻松完成此操作，您可以使用 Java 中的 JDOM 或 JAXB Parser。JAXB 编组器创建 XML，而 JAXB 解组器解析 XML。我使用过 JDOMparser解析包括 CDATA 部分的 XML，它工作得很好。希望这会有所帮助。也许你可能想看看这个例子。 [http://www.mkyong.com/java/jaxb-hello-world-example/](http://www.mkyong.com/java/jaxb-hello-world-example/)

# c++ - 在 C++ 中声明外部方法

> ID：11801211
> 
> 赞同：0
> 
> 时间：2012-08-03T18:21:41.677
> 
> 标签：c++, assembly, linker

我已经有一些程序打算用作用汇编编写的 C++ 方法（具有适当的调用约定和名称修饰）。但是，当我尝试使用它们时

```
class Foo {
    extern void foo();
} 
```

我得到“类成员的无效存储类”。如何正确地在外部定义 C++ 方法？

一种解决方法是生成一个 thunk，定义简单地调用程序集版本的方法，使用内联程序集来支持 thiscall 约定。事实上，我已经有了生成这些的代码。但是，我真的很想让这种更直接的方法起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:25:24.560

只是离开外部。默认情况下，函数在外部可见。

# jquery - 将数据从控制器传递到控制器再到模型

> ID：11801213
> 
> 赞同：0
> 
> 时间：2012-08-03T18:21:56.553
> 
> 标签：jquery, codeigniter, ion-auth, database-abstraction

我正在为我正在开发的网站进行一系列测验，但在保存用户数据时遇到了一些麻烦。结构有点奇怪，所以这可能与即将出现的问题有关。我的测验控制器标记为 Quiz1、Quiz2 等，并加载一个名为 Quizzer 的函数，在 jquery 中进行监听。每当在测验页面上单击单选按钮时，jquery 都会激活 Quizzer 以记录用户输入。这是示例代码：

这是加载页面的代码：

```
 public function Quiz4(){
    $this->load->view("site_header");
    $this->load->view("site_nav");
    $this->load->model("quiz_model");
    $this->data['choices'] = $this->quiz_model->get_records('quiz_4');
    $this->load->view("student/quiztest", $this->data);

    $quiz = 4;

    $this->Quizzer($quiz);

    $this->load->view("site_footer");
} 
```

值 4 被传递给 Quizzer，因此它知道要在数据库中写入哪个测验。

这是控制器测验器：

```
 public function Quizzer($qid){
    $this->load->model("quiz_model");
    $user = $this->ion_auth->user()->row();
    $user_id = $user->id;
    $data = array(
        'answer' => $this->input->post('answer')
    );
    $question = $this->input->post('question');

            echo $qid;

    $this->quiz_model->update_record($data, $user_id, $qid, $question);
} 
```

$user_id 告诉哪个用户登录了 $data 和 $question 标识用户从哪个组单击了哪个单选按钮。

$qid 应该指出用户在哪个测验页面上，在这个测试的情况下，它回显了一个 4，所以我知道它正在获取数据，但它仍然不会写入数据库。我发现手动输入 4 而不是 $qid 会使函数工作，但当前的 $qid 变量不会被接受。

这是保存到数据库的模型函数：

```
 function update_record($data, $uid, $quiz, $question)
{
    echo $quiz;
    $this->db->where('uid', $uid);
    $this->db->where('quiz', (int)$quiz);
    $this->db->where('question', $question);
    $this->db->update('quiz_results', $data);
} 
```

我尝试将 $quiz 强制转换为 int 以尝试使数据类型匹配，但这个技巧也不起作用。基于当我手动输入 4 而不是将其作为变量传递时函数的行为方式，这看起来像是数据类型的问题（这就是我尝试进行类型转换的原因）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:33:58.740

如果你`quiz_model`的设计正确，而不是这样：

```
$this->quiz_model->update_record($data, $user_id, $qid, $question); 
```

..你应该这样做：

```
$this->quiz_model->data = $data;
$this->quiz_model->user_id = $user_id;
...
$this->quiz_model->update(); 
```

此外，您应该有一个`Quiz`控制器，而不是多个`QuizN`控制器。最后，让控制器调用其他控制器通常被认为是糟糕的设计。我遇到了我觉得我*必须*这样做的情况，但应该避免这种情况。为此，您的`Quiz`控制器提供了哪些您的`Quizzer`控制器无法封装以致您根本没有`Quiz`控制器的功能？

干杯

# python - Django：用户配置文件似乎阻止了同步数据库

> ID：11801216
> 
> 赞同：0
> 
> 时间：2012-08-03T18:22:24.157
> 
> 标签：python, database, django, django-models

添加用户配置文件（此处称为用户信息）后，我的 models.py 文件不会同步数据库。我明白了：`TypeError: __init__() takes at least 2 arguments (1 given)`上面提到的所有错误都提到了 models.py 文件或与之相关的一些文件。

模型.py 文件：

```
def create_user_info(sender, instance, created, **kwargs):
    if created:
        UserInfo.objects.create(user=instance)

post_save.connect(create_user_info, sender=User)

class Book(models.Model):
    title = models.CharField(max_length=50)
    author = models.CharField(max_length=50)
    def __unicode__(self):
        return self.title

class UserInfo(models.Model):
    user = models.OneToOneField(User)
    pen_name = models.CharField(max_length=30)
    activated = models.BooleanField()
    def __unicode__(self):
        return self.email + '-' + self.pen_name 
```

在 settings.py 中进行身份验证：

```
AUTH_PROFILE_MODULE = 'Knights.UserInfo' 
```

追溯：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 231, in execute
    self.validate()
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/models.py", line 53, in <module>
    class Alert(models.Model):
  File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/models.py", line 55, in Alert
    for_user = models.ForeignKey() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:04:28.053

您的错误不在于您发布的代码。您已经按照[文档](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)进行了操作，所以如果确实如此，我会感到惊讶。

相反，错误是在您的 Alert 类 (models.py:55) 中发现的。`for_user = models.ForeignKey()`必须是`for_user = models.ForeignKey(User)`or `for_user = models.ForeignKey(UserInfo)`，这取决于您喜欢哪个。

您的错误代码试图实例化类的实例，该实例`ForeignKey`调用它的`__init__()`方法。该方法将声明类似

```
def __init__(self, other_model): 
```

因此错误消息表明您缺少一个参数。`self`隐式传递，如果您有兴趣，请阅读 Python 类文档。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-03T18:36:39.900

试试这个

```
class UserInfo(models.Model):
    user = models.OneToOneField(User)
    pen_name = models.CharField(max_length=30)
    activated = models.BooleanField()
    def __unicode__(self):
        return self.email + '-' + self.pen_name

    def create_user_info(self, **kwargs):
         u = kwargs["instance"]
         created = kwargs["created"]
         if not created:
            UserInfo(user=u).save()

post_save.connect(UserInfo.create_user_info, sender=User) 
```

# c# - 无法在抽象类型中定义静态方法。如何在周围工作？

> ID：11801218
> 
> 赞同：9
> 
> 时间：2012-08-03T18:22:36.747
> 
> 标签：c#

我目前正在为二进制应用程序协议开发一个库。以下代码示例无法编译（抽象类型中不允许静态方法定义。太糟糕了:()，但表明了我的意图：

```
public abstract class CmdBody<T>
{
    public static abstract byte[] ToBytes(T cmdBody);
    public abstract int GetLength();
}

public class CmdBodyA : CmdBody<CmdBodyA>
{
    static override byte[] ToBytes(CmdBodyA cmdBody) 
    { // Implementation }
}

public class CmdBodyB : CmdBody<CmdBodyB>
{
    static override byte[] ToBytes(CmdBodyB cmdBody)
    { // Implementation }
}

[...]

public class Cmd<T>
{ 
    public CmdHeader Header { get; set; }
    public CmdBody<T> Body { get; set; }

    public byte[] ToBytes()
    {
        byte[] cmdBytes = new byte[Header.GetLength() + Body.GetLength()];
        Header.ToBytes().CopyTo(cmdBytes, 0);
        Body.ToBytes().CoptyTo(cmdBytes, Header.GetLength());

        return cmdBytes;
    } 
} 
```

非常基本的东西，Cmd 由一个 Header 和一个 Body 组成，Header 类型对所有 Cmd(s) 和 Body 具有不同的参数（属性），具体取决于 Cmd 类型，我想使用 Cmd 对象，并且能够对它们调用 ToBytes() 以通过网络发送它们。

在我的实际实现中，我使用转换运算符而不是 ToBytes() 方法，但我想保持代码示例简单，最后它完成相同的工作。

我有许多不同的命令类型，我无法找到一个解决方案来保持简单并仅使用一个通用 Cmd 类型来实现我想要的。我能想到的唯一解决方案是摆脱基 CmdBody 类中的静态方法，摆脱通用方面，并为每个 CmdBody 类型创建一个关联的 Cmd 类（类 CmdA，类 CmdB ...）但是这个最终会导致大量代码重复。

有什么想法可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-03T18:26:45.997

您不能拥有“虚拟”静态方法，因为 virtual/abstract/override 建议在运行时覆盖一个*实例。*

但是，您可以执行以下操作：

```
public abstract class CmdBody
{
    public static byte[] ToBytes<T>(T cmdBody) where T : CmdBody
    {
         return cmdBody.ToBytes();
    }

    protected abstract byte[] ToBytes();

    public abstract int GetLength();
}

public class CmdBodyA : CmdBody
{
    protected override byte[] ToBytes() 
    { // Implementation }
}

public class CmdBodyB : CmdBody
{
    protected override byte[] ToBytes() 
    { // Implementation }
} 
```

这允许每个“CmdBody”类型定义它自己的序列化方式，但基类静态方法是访问它的唯一公开可见的方式。

话虽如此，鉴于您的用例，根本没有理由将其设为静态。你可以这样做：

```
public abstract class CmdBody
{
    public abstract byte[] ToBytes();

    public abstract int GetLength();
}

public class CmdBodyA : CmdBody
{
    public override byte[] ToBytes() 
    { // Implementation }
}

public class CmdBodyB : CmdBody
{
    public override byte[] ToBytes() 
    { // Implementation }
}

public class Cmd<T> where T : CmdBody
{ 
    public CmdHeader Header { get; set; }
    public T Body { get; set; }

    public byte[] ToBytes()
    {
        byte[] cmdBytes = new byte[Header.GetLength() + Body.GetLength()];
        Header.ToBytes().CopyTo(cmdBytes, 0);
        Body.ToBytes().CopyTo(cmdBytes, Header.GetLength());

        return cmdBytes;
    } 
} 
```

# c# - SpecificVersion=False 与 TFS API dll 的

> ID：11801219
> 
> 赞同：1
> 
> 时间：2012-08-03T18:22:55.203
> 
> 标签：c#, tfs-sdk

我们的 Web 应用程序大量使用了 TFS API。我们使用 TFS 2010 API dll 开发和编译它。我们还设置 SpecificVersion=False。

问题是，当我们部署到具有 TFS 2012 而不是 TFS 2010 的服务器时，我们会收到以下错误：

无法加载文件或程序集 'Microsoft.TeamFoundation.Client，版本 = 10.0.0.0，......等。该系统找不到指定的文件。

有什么办法可以缓解这种情况吗？TFS 2012 安装到 GAC 中，我们说“SpecificVersion=False”的事实应该告诉应用程序使用 dll 的 2012（版本 11）而不是 2010（版本 10）。正确的？？

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:29:59.173

如果程序集是[强名称签名](http://msdn.microsoft.com/en-us/library/h4fa028b.aspx)的，则特定版本[不起作用](https://stackoverflow.com/questions/7417481/can-you-ignore-specific-versions-of-strongly-named-references)。微软几乎可以肯定强名签署了他们的程序集。

您的网站必须使用 a[`bindingRedirect`](http://msdn.microsoft.com/en-us/library/eftw1fys.aspx)将所有版本从 v10 重定向到 v11。例如：

```
<configuration>
   <runtime>
      <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
         <dependentAssembly>
            <assemblyIdentity name="Microsoft.TeamFoundation.Client"
                              publicKeyToken="xxxxxxxxxxxxx"
                              culture="neutral" />
            <bindingRedirect oldVersion="10.0.0.0"
                             newVersion="11.0.0.0"/>
         </dependentAssembly>
      </assemblyBinding>
   </runtime>
</configuration> 
```

确保将 更新`publicKeyToken`为正确的值。

* * *

或者，您可以针对 TFS SDK 的 v11 版本重新编译网站以避免绑定重定向，但是它仅适用于 TFS SDK 的 v11。

# java - 兰特流的高性能缓冲

> ID：11801224
> 
> 赞同：7
> 
> 时间：2012-08-03T18:23:26.010
> 
> 标签：java, multithreading, performance, concurrency, equation

我的代码消耗大量（目前为数百万，最终为数十亿）相对较短（5-100 个元素）的随机数数组，并对它们进行一些不太费劲的数学运算。随机数是随机数，理想情况下我想在多个内核上生成它们，因为随机数生成占我分析运行时间的 50% 以上。但是，我很难以不比单线程方法慢的方式分发大量小任务。

我的代码目前看起来像这样：

```
for(int i=0;i<1000000;i++){
    for(RealVector d:data){
        while(!converged){
            double[] shortVec = new double[5];
            for(int i=0;i<5;i++) shortVec[i]=rng.nextGaussian();
            double[] longerVec = new double[50];
            for(int i=0;i<50;i++) longerVec[i]=rng.nextGaussian();
            /*Do some relatively fast math*/
        }
    }
} 
```

我采取的*没有*奏效的方法是：

*   1+ 线程填充 ArrayBlockingQueue，我的主循环消耗和填充数组（装箱/拆箱在这里是杀手）
*   在执行数学的非依赖部分时使用 Callable 生成向量（产生未来）（似乎间接的开销超过了我获得的任何并行性增益）
*   使用 2 个 ArrayBlockingQueue，每个由一个线程填充，一个用于短数组，一个用于长数组（仍然大约是直接单线程情况的两倍）。

我并不是在寻找针对我的特定问题的“解决方案”，而是如何处理并行生成大量小型独立原语并从单个线程中使用它们的一般情况。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T18:28:16.743

您的性能问题似乎是单个作业太小，因此大部分时间都花在了作业本身的同步和排队上。要考虑的一件事是*不要*生成大量的小作业，而是向每个工作线程提供一个中等大小的作业集合，它将用答案进行注释。

例如，不是通过第一个线程进行迭代#0 来迭代循环，下一个线程进行迭代#1，...我会让第一个线程进行迭代#0 到#999 或类似的迭代。他们应该独立工作，并`Job`用他们的计算答案注释一个类。然后最后他们可以将已完成的作业的整个集合返回为`Future`.

您的`Job`课程可能类似于以下内容：

```
public class Job {
    Collection<RealVector> dataCollection;
    Collection<SomeAnswer> answerCollection = new ArrayList<SomeAnswer>();
    public void run() {
        for (RealVector d : dataCollection) {
           // do the magic work on the vector
           while(!converged){
              ...
           }
           // put the associated "answer" in another collection
           answerCollection.add(someAnswer);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T18:55:06.590

这比使用队列更有效，因为；

*   有效负载是一个数组，`double[]`意味着后台线程可以在必须将其传递之前生成更多数据。
*   所有对象都被回收。

.

```
public class RandomGenerator {
    private final ExecutorService generator = Executors.newSingleThreadExecutor(new ThreadFactory() {
        @Override
        public Thread newThread(Runnable r) {
            Thread t = new Thread(r, "generator");
            t.setDaemon(true);
            return t;
        }
    });
    private final Exchanger<double[][]> exchanger = new Exchanger<>();
    private double[][] buffer;
    private int nextRow = Integer.MAX_VALUE;

    public RandomGenerator(final int rows, final int columns) {
        buffer = new double[rows][columns];
        generator.submit(new Callable<Void>() {
            @Override
            public Void call() throws Exception {
                Random random = new Random();
                double[][] buffer2 = new double[rows][columns];
                while (!Thread.interrupted()) {
                    for (int r = 0; r < rows; r++)
                        for (int c = 0; c < columns; c++)
                            buffer2[r][c] = random.nextGaussian();
                    buffer2 = exchanger.exchange(buffer2);
                }
                return null;
            }
        });
    }

    public double[] nextArray() throws InterruptedException {
        if (nextRow >= buffer.length) {
            buffer = exchanger.exchange(buffer);
            nextRow = 0;
        }
        return buffer[nextRow++];
    }
} 
```

* * *

随机是线程安全和同步的。这意味着每个线程都需要它自己的 Random 来并发执行。

> 如何处理并行生成大量小型独立原语并从单个线程使用它们的一般情况。

我会使用 an[`Exchanger<double[][]>`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Exchanger.html)在后台填充值以有效地传递它们（没有太多 GC 开销）

# c++ - 使用参数调用 COM 方法的纯 C++ 代码

> ID：11801227
> 
> 赞同：1
> 
> 时间：2012-08-03T18:23:42.427
> 
> 标签：c++, com

我已经能够像这样创建 SharePoint.OpenDocuments.1 ActiveX 控件的实例：

```
CLSID clsid;
HRESULT hResult; 
IDispatch *pWApp;
LPCOLESTR strPid = L"SharePoint.OpenDocuments.1";

CoInitialize(NULL);  
hResult = CLSIDFromProgID(strPid, &clsid);
if(SUCCEEDED(hResult))
    hResult = CoCreateInstance(clsid, NULL, CLSCTX_ALL , IID_IDispatch, (void **)&pWApp); 
```

我在使用文档名称调用“EditDocument”方法时遇到了一些麻烦。我不知道如何调用或使用变体。

任何代码提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:13:16.313

至少如果我正确阅读文档，您需要一个 BSTR，您可以使用[`SysAllocString`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221458%28v=vs.85%29.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:33:42.483

如果您在 C++ 项目中使用 ATL，则可以使用[CComBSTR](http://msdn.microsoft.com/en-us/library/zh7x9w3f%28v=vs.80%29.aspx)类轻松创建 BSTR 字符串并将其作为参数传递给 OpenDocuments.EditDocuments

```
CComBSTR tempBstr = _T("c:\\myfolder\\myfile.txt");
someObj->SomeMethodThatUsesBSTR(tempBstr); 
```

如果您不使用 ATL，则可以以相同的方式使用bstr_t类[：](http://msdn.microsoft.com/en-us/library/zthfhkd6%28v=vs.71%29.aspx)`comutil.h`

```
bstr_t tempBstr = _T("c:\\myfolder\\myfile.txt");
someObj->SomeMethodThatUsesBSTR(tempBstr.GetBSTR()); 
```

两个类（CComBSTR 和 bstr_t）只是在内部调用[SysAllocString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221458%28v=vs.85%29.aspx)和[SysFreeString](http://msdn.microsoft.com/en-us/library/windows/desktop/ms221481%28v=vs.85%29.aspx)的包装器。

# jquery - 延迟到 jQuery 动画完成

> ID：11801231
> 
> 赞同：1
> 
> 时间：2012-08-03T18:24:10.630
> 
> 标签：jquery, jquery-plugins, jquery-animate

我制作了一个 jQuery 插件，它可以制作启动画面。它使用 jQuery 的 animate 函数，并通过以下方式初始化和触发：

```
 $('#temperature_splash').splashScreen();

    $('.tempGraphButton').click(function () {

        $('#temperature_splash').splashScreen('splash', 300);

         //Here, I would like to make an ajax request when the animation has finished
    } 
```

我想在插件中的动画完成后发出 ajax 请求，但我不知道怎么做。有没有人有什么建议？

插件代码概要

```
$.fn.splashScreen = function (method) {
    // Method calling logic
    if (methods[method]) {
        return methods[method].apply(this, Array.prototype.slice.call(arguments, 1));
    } else if (typeof method === 'object' || !method) {
        return methods.init.apply(this, arguments);
    } else {
        $.error('Method ' + method + ' does not exist');
    }
}

var methods = {
    init: function () {
        //Some initializations
    },

    splash: function (time) {
        //Setting some properties

        splashScreenContent.animate({
            width: width,
            left: leftPos
        }, time).animate({
            height: height,
            top: topPos
        }, time);

        return false;
    }
}

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:29:06.607

只需添加一个回调

```
var methods = {
    init: function () {
        methods.splash(1000, function() {
            //do something when animation is finished
            methods.ajax();
        });
    },
    splash: function (time, callback) {
        splashScreenContent.animate({
            width: width,
            left: leftPos
        }, time).animate({
            height: height,
            top: topPos
        }, time, function() {
            if (typeof callback==='function') callback.call();
        });

        return false;
    },
    ajax: function() {
        //do ajax stuff
    }
} 
```

这只是一个示例，您必须自己弄清楚要传递哪些选项以及如何将其绑定到您的插件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:30:40.720

你不能也绑定到 jQuery 中的 .done 特性吗？

`methods.done(function(){ do your code here for the ajax })'`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:44:33.623

由于这些调用是异步的，因此您可以将 ajax 代码放在关闭启动代码之前，因为启动函数之后的代码将在启动函数内部的代码之前执行

# string - 在 ksh 脚本中使用字符串函数

> ID：11801235
> 
> 赞同：-1
> 
> 时间：2012-08-03T18:24:40.507
> 
> 标签：string, function, shell, ksh

当我想在传递给 shell 脚本的参数中查找特定关键字时，我有一个要求。如果该关键字存在，我不想显示该值。

我在下面尝试但它不起作用，也尝试使用 awk 但它会查找文件输入。请您帮忙：

```
#!/bin/ksh

i=0
for i in $@
do
    echo $i
    if index(toupper($i),"PASSWORD") -gt 0
    then
        print "****"
    fi
done 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:12:00.030

此功能可能会满足您的要求。

将字符串转换为大写的简单方法是使用`typeset -u`. 在这种情况下，我创建了一个副本`$u`，所以我们仍然有原始的混合或小写值`$w`

```
function shield_keyword {
    typeset -u upper;
    typeset w;
    for w in "$@";
    do
        upper=$w;
        [[ $upper == *PASSWORD* ]] && echo "****" || echo "$w" "$upper";
    done
} 
```

测试：

```
$ shield_keyword fee fie PASS WORD PASSWORD:secret special
fee FEE
fie FIE
PASS PASS
WORD WORD
****
special SPECIAL 
```

# ruby-on-rails - Windows 和 Growl 上的 Ruby 自动测试

> ID：11801240
> 
> 赞同：0
> 
> 时间：2012-08-03T18:25:10.147
> 
> 标签：ruby-on-rails, windows, autotest, growl

我正在阅读 Hartl 的 Rails 3 Ruby on Rails 教程，我正在尝试设置一些东西，但我有点难过。首先，自动测试本身似乎运行良好。它似乎比我所见过的任何东西都需要更长的时间来运行两个测试，它需要超过 7 秒，但它确实有效。但是，我正试图让它发出 Growl 通知。我发现了这个[问题](https://stackoverflow.com/questions/6372370/not-receiving-growl-messages-from-autotest-on-windows)我对答案有点迷茫。答案建议修改工作目录中的 .autotest 文件，在本例中为 sample_app。但是，我在该目录中没有任何 .autotest 文件。我似乎唯一拥有的是 gem 库中主 Ruby 目录中的其他 gem。另外，我不熟悉他的 Gemlist 文件，因为我在该目录中有一个看起来相似的 Gemlist.Lock 文件，但它没有引用自动测试。他发布的实际 Gemfile 是相同的，但他确实有 Spork 和我似乎没有的 Win32 进程。

因此，如果我应该在我的 sample_app 目录中有一个 .autotest 文件，我如何在那里获得一个？为什么它似乎不在我的 Gemlist.lock 文件中？

如果需要，这是我运行自动测试时的输出：

```
C:\Ruby193\work\rails_tutorial\sample_app>autotest
loading autotest/rails_rspec2
C:\Ruby193\bin\ruby -rrubygems -S 'C:/Ruby193/lib/ruby/gems/1.9.1/gems/rspec-core-2.11.1/exe/rspec' --tty 'C:/Ruby193/work/rails_tutorial/sample_app/spec/controllers/pages_controller_spec.rb' 
```

..

```
Finished in 8.57 seconds
2 examples, 0 failures

Randomized with seed 6674 
```

任何建议/帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T21:23:16.573

我也在努力让 Growl 在 Windows 中工作。看起来好像您正在通过 RubyInstaller 使用 MRI，而我在其中使用了 JRuby，但也许我的文章会有所帮助。

[http://journeymandev.com/2012/7/28/rails-growl-and-windows](http://journeymandev.com/2012/7/28/rails-growl-and-windows)

# php - PHP：设置不同的值并使用 foreeach 和 mysql 选择

> ID：11801245
> 
> 赞同：0
> 
> 时间：2012-08-03T18:25:36.823
> 
> 标签：php, mysql, wordpress, foreach

我是 php 新手，并试图使下拉列表与 wordpress 用户表一起使用

我正在尝试将用户 ID 设置为一个值并希望显示 user_login 但无法正确获取。它使用错误的 ID 渲染两次。这是我的代码

```
global $wpdb;
        $userids = $wpdb->get_col("SELECT ID FROM $wpdb->users");
        $user_logins = $wpdb->get_col("SELECT user_login FROM $wpdb->users");

        echo '<select>';
        foreach($userids as $userid){
            foreach($user_logins as $user_login)
            echo '<option value="'.$userid.'" selected="'.$user_login.'">'.$user_login.'</option>';
        }
        echo '</select>'; 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:28:23.157

如果您需要使用当前正在使用的两个查询，则可以使用计数器进行迭代，而不是`foreach`：

```
$count = count($userids);
for ($i = 0; $i < $count; $i++) {
    echo '<option value="' . $userids[$i] . '" selected="' . $user_logins[$i] . '">' . $user_logins[$i] . '</option>';
} 
```

您可以使用 WordPress 的方法将这两个查询组合成一个查询`get_results()`：

```
$users = $wpdb->get_results("SELECT ID, user_login FROM $wpdb->users");
echo '<select>';
foreach ($users as $user) {
    echo '<option value="' . $user->ID . '" selected="' . $user->user_login . '">' . $user->user_login . '</option>';
}
echo '</select>'; 
```

还值得指出的是，`option`'`selected`属性使用不当。它应该只设置在单个选项上，并且通常设置为“已选择”的值，例如`selected="selected"`. 请参阅[W3C 文档](http://www.w3.org/wiki/HTML/Elements/option)以获取有关此的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:33:00.417

您似乎正在执行两个循环，这可能会由于和`foreach`之间的重复不匹配而导致您出现问题。相反，请尝试使用如下循环：`$userids``$user_logins``for`

```
for ($i = 0; $i < count($userids); $i++){
    echo '<option value="'.$userids[$i].'" selected="'.$user_logins[$i].'">'.$user_logins[$i].'</option>';
} 
```

# d3.js - d3 中的自定义多尺度时间格式

> ID：11801250
> 
> 赞同：4
> 
> 时间：2012-08-03T18:25:57.883
> 
> 标签：d3.js

`d3.time.scale`有一个整洁的时间格式化程序，它使用[多尺度时间格式](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-tickFormat)。是否有 API 或其他方式（还）来指定[多尺度时间格式](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-tickFormat)？

我知道可以创建一个新的`d3.time.format`，但这不会是多尺度的。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T23:37:20.740

多尺度时间格式不作为[d3.time.scale](https://github.com/mbostock/d3/wiki/Time-Scales)的[tickFormat](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-tickFormat)方法返回的标准 API 之外的公共 API 公开。

也就是说，[实现本身](https://github.com/mbostock/d3/blob/master/src/time/scale.js#L134-143)相当简单，因此您无需大量工作即可创建自己的多尺度时间格式。多尺度时间格式只是时间格式的有序数组，每个[格式](https://github.com/mbostock/d3/wiki/Time-Formatting)都有一个关联的测试函数。返回 true 的第一个测试函数确定使用哪种时间格式。

d3.time.scale 使用的时间格式有以下格式（取自[time/scale.js](https://github.com/mbostock/d3/blob/master/src/time/scale.js#L134-143)），以相反的顺序指定：

```
 [".%L", function(d) { return d.getMilliseconds(); }],
  [":%S", function(d) { return d.getSeconds(); }],
  ["%I:%M", function(d) { return d.getMinutes(); }],
  ["%I %p", function(d) { return d.getHours(); }],
  ["%a %d", function(d) { return d.getDay() && d.getDate() != 1; }],
  ["%b %d", function(d) { return d.getDate() != 1; }],
  ["%B", function(d) { return d.getMonth(); }],
  ["%Y", d3_true] 
```

因此，例如，如果时间具有非零毫秒字段，则使用“.%L”格式；否则，如果它有一个非零秒字段，则使用“:%S”；等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-01T15:27:39.623

在 d3 版本 4 中，`d3.time.format`已更改。这是创建条件时间格式化程序的新版本：

[https://github.com/d3/d3-time-format#d3-time-format](https://github.com/d3/d3-time-format#d3-time-format)

```
var formatMillisecond = d3.timeFormat(".%L"),
    formatSecond = d3.timeFormat(":%S"),
    formatMinute = d3.timeFormat("%I:%M"),
    formatHour = d3.timeFormat("%I %p"),
    formatDay = d3.timeFormat("%a %d"),
    formatWeek = d3.timeFormat("%b %d"),
    formatMonth = d3.timeFormat("%B"),
    formatYear = d3.timeFormat("%Y");

function multiFormat(date) {
  return (d3.timeSecond(date) < date ? formatMillisecond
      : d3.timeMinute(date) < date ? formatSecond
      : d3.timeHour(date) < date ? formatMinute
      : d3.timeDay(date) < date ? formatHour
      : d3.timeMonth(date) < date ? (d3.timeWeek(date) < date ? formatDay : formatWeek)
      : d3.timeYear(date) < date ? formatMonth
      : formatYear)(date);
} 
```

# objective-c - 在 Objective-C 中复制 Java Try-Catch 哲学

> ID：11801252
> 
> 赞同：0
> 
> 时间：2012-08-03T18:26:06.527
> 
> 标签：objective-c, try-catch

我来自 Java 背景，其中 try/catch 是常见的做法。

在使用 Objective-c 几个月后，由于语言本身的性质以及不使用它的一般建议，我从未在我的 iOS 应用程序中实现 try/catch。

因此，我一直尝试构建无错误代码。但是，在撰写本文时，我仍然不知道如何在 Objective-c 中翻译这样一个简单的东西：

```
// some operation
try {
  // do some work
} catch (SomethingWentWrongException e) {
  // log error, inform user...etc
}
// some more operation and rest of the code 
```

使用此代码操作，围绕 try/catch 执行，但程序没有中断，并且执行 catch 之后的其余代码。

然而，有一条规则告诉我们不应该使用 try catch 进行流量控制。我想用objective-c实现类似的东西，封装一些可能成功或失败的不太重要的操作，而不破坏工作流程。

如果没有objective-c @try，我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:39:17.570

您*可以*使用`@try`和`@catch`（和`@finally`）在 Objective-C 中做到这一点。没有“规则”说你不这样做，但是在整个 Cocoa 和代码构建中都有*一个*普遍的设计习惯来与 Cocoa 集成：异常是为程序员错误保留的。这意味着如果使用你的 API 的人不遵守合同，或者不满足调用你的方法的一些先决条件，*那*是许多 Objective-C 开发人员唯一会使用异常的时候。

在 Objective-C 代码中处理错误（例如我的文件消失了，我无法获得我需要的资源等）的常见习惯用法是使用 Cocoa 的 NSError 类，通过引用可能失败的方法传递一个实例。所以，重写你的例子：

```
// some operation
NSError *error;
BOOL itWorked = [object doSomeThingThatCouldFail: &error];
if (!itWorked) {
    // log error, inform user etc.
}
// some more operation and rest of the code 
```

请注意，您检查方法的*返回值*以检查它是成功还是失败。该`error`对象保证设置为失败，但不承诺成功。

该方法的实现方式与错误一起工作：

```
- (BOOL)doSomeThingThatCouldFail: (NSError *__autoreleasing*)error {
  //...
  if (!success && error) //check that the user actually supplied an error pointer
  {
    NSDictionary *errorDetails = @{ ... };
    *error = [NSError errorWithDomain: @"Your error domain" code: someInteger userInfo: errorDetails];
  }
  return success;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:02:59.410

有点离题，但我在几种情况下成功使用的习语可能需要在一系列子操作中间“中止”操作如下：

```
int rcode = 0;
do {
    rcode = operationA(xxx);
    if (rcode) break;
    rcode = operationB(xxx);
    if (rcode) break;
    ...
    rcode = operationZ(xxx);
    if (rcode) break;
} while (FALSE);

if (rcode) {
    <do recovery/error-reporting stuff>
}
else {
    <do stuff you'd do if successful>
} 
```

一种穷人的尝试/捕捉——避免了如果你试图在每个单独的操作周围有一个完整的 if/then/else 的话你会遇到的意大利面条逻辑。（显然，您可以在每一步中选择性地设置一些状态变量，以了解您走了多远，错误原因是什么等）

# java - JVM 选项 -Xms 和 -Xmx 被忽略

> ID：11801254
> 
> 赞同：4
> 
> 时间：2012-08-03T18:26:09.100
> 
> 标签：java, memory-leaks, jvm, jconsole

我有一个应用程序在尚未激活的窗口（如果重要）上的浏览器（如果重要，则为 IE）上运行。我已经将JVM控制面板中的环境变量设置为-Xms5m -Xmx5m（我也做了-Xms16m和-Xmx16m）。

当我运行应用程序并使用 jconsole 监视进程的 pid 时，它告诉我我使用的堆比我设置的堆要多得多，而不是抛出堆空间不足的错误（我正在尝试专门解决这个错误）。根据 jconsole，它使用 15-20Mb。我已重新启动计算机，并在关闭所有浏览器的情况下设置了此选项。

有谁知道为什么参数被忽略。

让我知道是否缺少任何信息。

请注意，jconsole 明确表示我的*堆内存使用量*为 20mb。我很清楚，由于 JVM、库、堆栈等的加载，可能会使用更多内存。我遇到的问题是堆超出了我指定的应该使用的堆大小。

-Xmx16m 选项未在 Java VisualVm 中列出，即使它是在环境变量中设置的唯一选项（我什至删除了 -Xms16m 以确保 Java VisualVm 正在更新。尽管 -Xmx16m 确实出现了 -Xms16m没有）。有谁知道为什么会这样？

我已经尝试过从 27 到 31 的 Java RE 版本 6，它们都缺少 Java VisualVm 选项中的 Xmx 选项，并且它们都只有 -Xms16m。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:45:36.200

正如已经多次回答的那样（我目前找不到链接），运行时参数仅控制允许您的程序*从*堆中分配多少内存。JRE 本身使用更多内存来*管理*堆，因此`-Xms`和`-Xmx`参数与程序使用的实际内存量没有很好的相关性（如果有的话）。

# python - 如何在 Python 中删除键盘布局？

> ID：11801258
> 
> 赞同：-1
> 
> 时间：2012-08-03T18:26:31.157
> 
> 标签：python, winapi, keyboard

如果我添加键盘布局：

```
import win32api    
win32api.LoadKeyboardLayout("00000409", 1) 
```

我怎样才能删除它？没有win32api.UnloadKeyboardLayout...

PS我没有英文键盘布局，但是当我运行一些程序时，它会自动添加并且我有英文和日文布局。日文布局包含英文......所以我需要编写删除英文布局的脚本。

PS2 我解决了这个问题。只需使用 ctypes

```
import ctypes
lib = ctypes.WinDLL('User32.dll')
UnloadKeyboarLayout = lib['UnloadKeyboardLayout']
UnloadKeyboarLayout(67699721) #for US English 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:28:44.153

为什么不加载一个不同的。当然，您根本不希望没有布局。或者更准确地说，收集他们正在使用的那个，将其更改为您的，然后当他们完成您的程序后，将其更改回他们喜欢的那个。

# ember.js - 在 ember 路由机制中触发无限循环

> ID：11801263
> 
> 赞同：1
> 
> 时间：2012-08-03T18:26:42.327
> 
> 标签：ember.js

[http://jsfiddle.net/pauldechov/EJQ8v/](http://jsfiddle.net/pauldechov/EJQ8v/)

点击帖子，然后点击评论。难道我做错了什么？这种类型的案例在我的应用程序中多次出现，我不确定如何让它成功到达这条路线。

编辑：[https](https://github.com/emberjs/ember.js/issues/1231) ://github.com/emberjs/ember.js/issues/1231这个问题和修复似乎不相关，但也许是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:50:09.500

[这似乎工作得很好](http://jsfiddle.net/NZYxC/4/)

总体而言，您的路由对我来说似乎真的很复杂，并且可能做错了。也许您正在尝试做一些更复杂的事情，而我对它的简化已经破坏了它？

```
 posts: Em.Route.extend({
        route: '/posts',
        gotoPost: Em.Route.transitionTo('post'),

        connectOutlets: function(router) {
            router.get('applicationController').connectOutlet('posts', App.Post.find());
        },

        post: Em.Route.extend({
            route: '/posts/:post_id',
            gotoComments: Em.Route.transitionTo('post.comments'),

            connectOutlets: function(router, post) {
                router.get('applicationController').connectOutlet('post', post);
            },

            comments: Em.Route.extend({
                route: '/posts/:post_id/comments',
                connectOutlets: function(router, post) {
                   router.get('applicationController').connectOutlet('comments', post);
                },

            }),
        })
    }), 
```

# html - CSS和浏览器缩放问题中的“雪佛龙”样式导航栏

> ID：11801266
> 
> 赞同：6
> 
> 时间：2012-08-03T18:26:45.110
> 
> 标签：html, css

我一直在尝试制作一个带有 V 形列表项的 HTML/CSS 导航栏。我在这里提供了我的代码：[https ://github.com/twslankard/css-chevron-bar/blob/master/index.html](https://github.com/twslankard/css-chevron-bar/blob/master/index.html)

由于我的问题相当具体，因此我将代码作为公共领域提供，以防你们中的一个 CSS 向导帮助我。:)

现在我的问题。我一直在尝试设计栏以使其正确缩放，例如当有人修改字体大小属性`ul.chevronbar li`或用户点击`Control+`或`Control-`在浏览器中时。

我尝试使用两种不同的 CSS 重置，Eric Meyers 重置 CSS 2.0 和 YUI 3。但是，在 Firefox 中，缩放/缩放“大部分”有效，而在 Chrome 中它不起作用（尤其是在放大时）。如果可能的话，我想要一些关于如何让它在 Chrome 中更好地工作的建议。

这是说明问题的图像。非常感谢您的帮助。

![在此处输入图像描述](../Images/5e5e33f5ac6aa576b87d5634a5d5da34.png)

编辑：这就是我最终的结果。请原谅凌乱的 CSS。稍后我会抽空清理它。

[https://github.com/twslankard/css-chevron-bar-2](https://github.com/twslankard/css-chevron-bar-2)

编辑2：另一个人在这里慷慨地提供了他们对这个问题的解决方案：http: [//jsfiddle.net/pXBTK/3/](http://jsfiddle.net/pXBTK/3/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T22:25:42.787

实际上，诀窍是如何使尖部分的高度与它所跟随的菜单项的高度相匹配，从而避免锯齿状的外观。

我猜这样的事情会导致问题：

*   计算出的菜单项高度为 5 个物理屏幕像素
*   产生箭头的上下边框必须是 5 的 50%
*   由于您无法显示半像素，因此都四舍五入，例如 3 像素
*   加在一起，箭头变成 6 像素高，但菜单项只有 5

似乎很清楚，解决方法是按照说明简单地隐藏溢出。对原始版本真正需要的唯一更改是：

```
ul.chevronbar {
  ...
  overflow: hidden; /* Add this line */
} 
```

它还需要调整大小以更接近原始外观，但没有它也可以工作。固定高度实际上不是必需的。

这个简化的示例说明了箭头概念，突出显示了箭头的某些部分：

```
<head><style type="text/css">
ul {
  background-color: lightgray;
  font-size: xx-large;
  overflow: hidden;
  position: relative;
}
li {
  display: inline-block;
  background-color: gray;
  margin-right: 1.5em;
}
li:after {
  content: '';
  border: 0.85em solid blue;
  border-left-color: red;
  border-right-color: red;
  height: 0;
  position: absolute;
  top: -0.2em;
}
</style></head>
<body><ul>
  <li>Lorem Ipsum</li> <li>Foobar</li>
</ul></body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T20:16:24.817

这里有两个主要问题。

1）首先是您将定位应用于没有真正意义的项目？示例：当您设置位置时：绝对；垂直对齐：顶部；什么都不做，因为它只适用于内联元素。

第二个是你没有真正详细地考虑过这个问题，看起来你只是在尽可能地坚持编码。

所以退后一步，想想每个元素的作用，并制定实现它的步骤。我们从一个黑盒子开始，最后是一个带有人字形的盒子。

1）我创建了一个固定高度的容器，然后设置为overflow:hidden；这样，任何超过一定高度的东西都不会显示。

2）我设置元素的位置与你做的大不相同。我的列表元素向左浮动。

3）然后放置边距和填充以间隔列表元素。

4）最后，我放入人字形并设计它们。

这是我所做的一个例子......

```
ul.chevronbar {list-style-type: none; margin: 0; padding: 0; height:50px; width:auto; overflow:hidden;}
ul.chevronbar li {margin: 0; padding: 0; height:50px; width:auto; border:1px solid #000; position:relative; float:left; background:#333; font-size: 1.5em; margin-right: 1em; padding: 0 0.7em; }
ul.chevronbar li a {text-decoration: none; color: #fff; line-height:50px; display:block;}
ul.chevronbar li:before, ul.chevronbar li:after {content: ' '; height: 0; width: 0; position: absolute; top:-2px; border: 1.2em solid transparent; border-left-width: 0.45em; border-right-width: 0.45em;}
ul.chevronbar li:before {border-top-color: #333; border-bottom-color: #333; border-right-color: #333; right: 100%;}
ul.chevronbar li:after {border-left-color: #333; left: 100%; margin-left: -0.01em;}
li.first {padding-left: 0.5em;}
li.first:before {border: none !important ;}
li.last:after {border: none !important;} 
```

# objective-c - 设置 NSStatus 项的标题文本颜色

> ID：11801277
> 
> 赞同：2
> 
> 时间：2012-08-03T18:28:02.750
> 
> 标签：objective-c, macos, cocoa, colors, nscolor

如何设置 NSStatus 项的标题文本颜色的文本颜色？

这是我用来设置 statusItem 的：

```
NSAppleScript *script = [[NSAppleScript alloc] initWithSource:@"set the timeWSeconds to do shell script \"/bin/date '+%a %b %I:%M:%S %p'\""];

    NSAppleEventDescriptor *timeWSeconds = [[script executeAndReturnError:nil]stringValue];
    [statusItem setTitle:timeWSeconds]; 
```

# 好的，我已经尝试过@Vervious 的帖子，这就是我所拥有的，没有任何改变。

```
-(IBAction)timeWSeconds:(id)sender
{
    NSAppleScript *script = [[NSAppleScript alloc] initWithSource:@"set the timeWSeconds to do shell script \"/bin/date '+%a %b %d %I:%M:%S %p'\""];

    NSAppleEventDescriptor *timeWSeconds = [[script executeAndReturnError:nil]stringValue];
    [statusItem setTitle:timeWSeconds];

    NSDictionary *attributes = [NSDictionary
                                dictionaryWithObjectsAndKeys:
                                [NSColor redColor], NSForegroundColorAttributeName, nil];
    NSAttributedString *colouredTitle = [[[NSAttributedString alloc]
                                         initWithString:[timeWSeconds stringValue]]
attributes:attributes];
    [statusItem setAttributedTitle:colouredTitle];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:51:37.293

将状态项的属性标题设置为您选择的属性字符串。例如

```
NSDictionary *attributes = [NSDictionary
                            dictionaryWithObjectsAndKeys:
                            [NSColor redColor], NSForegroundColorAttributeName, nil];
NSAttributedString *colouredTitle = [[NSAttributedString alloc] 
             initWithString:[timeWSeconds stringValue]]
             attributes:attributes];
[statusItem setAttributedTitle:colouredTitle]; 
```

# mongodb - 访问 Meteor 生产数据库

> ID：11801278
> 
> 赞同：44
> 
> 时间：2012-08-03T18:28:09.427
> 
> 标签：mongodb, meteor, production, database

要检查（生产）数据库中的内容，`blah.meteor.com`我认为我们会这样做：

```
meteor mongo --url http://blah.meteor.com/ 
```

但相反，我得到了一个 URI：

```
mongodb://client:984dae4c-04fb-c8bb-68f6-ed83602435cc@skybreak.member1.mongolayer.com:27017/blah_meteor_com 
```

我将如何使用这个 URI 来访问数据库？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-03T18:59:27.837

你应该使用`meteor mongo http://blah.meteor.com`; 甚至更短`meteor mongo blah.meteor.com`。

对于文档，您可以运行`meteor help mongo`. 从运行上面的帮助命令中提取：

> 指定 --url (-U) 将返回一个适合外部程序连接到数据库的 URL，而不是打开 shell。对于已部署应用程序上的远程数据库，URL 的有效期为一分钟。

所以它的意思是，通过运行带有`--url`选项的命令提供的 url 用于通过某些外部应用程序连接到数据库，即`meteor`.

**更新：**

当您连接到 MongoDB 时，您应该会收到类似于以下内容的问候消息：

```
MongoDB shell version: 2.0.2
connecting to: skybreak.member1.mongolayer.com:27017/userdb_meteor_com 
```

输入以下命令：（`use userdb_meteor_com`其中**userdb_meteor_com**取自上述问候消息中的 URL）。

要查看您的收藏（通常是指在您的 Meteor 应用程序中创建的收藏）`show collections`：. 你应该得到这样的东西：

```
system.indexes
system.users
users 
```

现在您可以运行常用命令，例如：`db.users.find({});`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-05-13T07:36:53.560

nsmeta 针对速度扫描仪的信息性答案的简化版本：

```
$ meteor mongo blah.meteor.com
connecting to: ...
> show collections
    stuff
> db.stuff.find()
    {"_id" : "abcdedghiasdjlahf", stuff: "yeah!" } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-27T12:56:18.237

**2016 年更新：**

该`meteor mongo`命令不再起作用，因为 blah.meteor.com 数据库是 3.0 版，而该`meteor mongo`命令仍是 2.6.7 版。（在 Meteor 的最新版本 v1.2.1 上）。

相反，安装 mongo cli 并运行以下命令：

`mongo `meteor mongo --url blah.meteor.com | sed 's/mongodb:\/\//-u /' | sed 's/:/ -p /' | sed 's/@/ /'``

More details: [Accessing meteor production database in 2016](https://stackoverflow.com/questions/34927199/accessing-meteor-production-database-in-2016)

# servicestack - 为什么 servicestack 会返回默认的 html 视图而不是我的 markdown？

> ID：11801282
> 
> 赞同：1
> 
> 时间：2012-08-03T18:28:30.940
> 
> 标签：servicestack

我有一个在[http://example.com/api.ashx](http://example.com/api.ashx)运行的 servicestack 我设置了一个响应过滤器，将特定类型的 dto 内容强制为 html，并将其 templateName 属性设置为“RulesView.md”。但是我将 servicestack 默认 json 报告视图发送给客户端，而不是我的标记。我有一个带有 RulesView.md 文件的 views 文件夹。如果这很重要，我正在使用版本 3.7.9。有什么我需要配置的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:48:14.783

如果它返回默认的 json 报告而不是您的请求，则发现与现有 Markdown 页面不匹配：

注意： TemplateName 不应包含扩展名，请改为`.md`尝试。`RulesView`

来自：[http ://www.servicestack.net/docs/markdown/markdown-features](http://www.servicestack.net/docs/markdown/markdown-features)

ServiceStack 用于解析用于呈现 HTML 输出的相应 Markdown 模板的解析顺序是：

1.  如果 Web 服务指定了一个模板（通过自定义的 IHttpResult.TemplateName 响应） - 然后是一个具有该名称的视图。

2.  与响应 DTO 同名的视图，首先在 /Views 中查找，然后在 /Views/Shared 中查找

3.  与请求 DTO 同名的视图，首先在 /Views 中查找，然后在 /Views/Shared 中查找

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:59:32.663

如果您从处理程序返回 HttpResult，则在写入响应流时，服务堆栈将不会使用带有 markdown 的 TemplateName 属性。您必须将 HttpResult.Response 设置为 IHttpResult（您不能使用 HttpResult，因为它还实现了将 Response 属性写入 http 响应流的 IStreamWriter）。这意味着在返回 HttpResult 时，您必须使用 Response 属性中的类名来命名您的降价页面。最后，当 servicestack 编译视图时，它看起来不会包含有语法错误的文件。

就我而言，我有

```
@foreach p in products
-@p.Name 
```

我需要的地方

```
@foreach p in Model.products{
- @p.Name
} 
```

# xml - 提供 XML Django 平面页面？

> ID：11801283
> 
> 赞同：0
> 
> 时间：2012-08-03T18:28:32.953
> 
> 标签：xml, django, django-flatpages

有什么方法可以提供具有 mimetype 的平面页面`text/xml`？将模板更改为具有不同文件扩展名的模板不起作用，而且我在文档中找不到任何说明这是可能的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:40:04.590

id 建议覆盖 FlatpageFallbackMiddleware。你可以像这样设置响应头：

```
#myproject/middleware.py
from django.contrib.flatpages.middleware import FlatpageFallbackMiddleware

class XmlFlatpageFallbackMiddleware(FlatpageFallbackMiddleware):
    def process_response(self, request, response):
        if response.status_code != 404:
            return response # No need to check for a flatpage for non-404 responses.

        response = super(XmlFlatpageFallbackMiddleware, self).process_response(request, response)
        # this depends on your settings.APPEND_SLASH
        # see django.contrib.flatpages.views.flatpage for details
        if request.path_info.endswith('.xml') or request.path_info.endswith('.xml/'): 
            response['Content-Type'] = 'text/xml; charset=utf-8'
        return response 
```

将您的新中间件放入**settings.MIDDLEWARE_CLASSES**并关闭您的 xml 文件。

可以在[此处找到有关如何制作自定义中间件的其他信息](http://www.finalconcept.com.au/article/view/django-creating-a-custom-middleware-component)

这里有一些[关于在 django 中设置响应头的信息](http://www.deepakkapoor.net/customize-response-headers-in-django/)

# python - 如何覆盖 pickle 类中的转储/加载方法 - 自定义酸洗和解酸 - Python

> ID：11801284
> 
> 赞同：8
> 
> 时间：2012-08-03T18:28:34.043
> 
> 标签：python, pickle

到目前为止，我所做的是：

```
import pickle

class MyPickler(pickle.Pickler):
    def __init__(self, file, protocol=None):
        super(MyPickler, self).__init__(file, protocol)

class MyUnpickler(pickle.Unpickler):
    def __init__(self, file):
        super(MyUnpickler, self).__init__(file) 
```

在我的主要方法中，这主要是我所拥有的

```
#created object, then... 
pickledObject = 'testing.pickle'
with open(pickledObject,'wb') as f:
    pickle = MyPickler(f)
    pickle.dump(object) #object is the object I want to pickle, created before this

with open(pickledObject, 'r') as pickledFile:
    unpickle = MyUnpickler(pickledFile)
    object2 = unpickle.load() 
```

但是，当调用 super 方法时，这给了我以下错误： `TypeError: must be type, not classobj`

如何只覆盖加载和转储这两种方法？pickle 文件位于 C:\Python27/lib/pickle.py 下

**编辑** enum.py 文件可以在这里找到：http: [//dpaste.com/780897/](http://dpaste.com/780897/)

对象详细信息：对象初始化如下：

```
object = CellSizeRelation(CellSizeRelation.Values.FIRST) 
```

而 CellSizeRelation 是一个使用枚举的类：

```
class CellSizeRelation(Option):
    Values = enum.Enum('FIRST',
                       'SECOND') 
```

在我腌制对象之前，我这样做：

```
print object.Values._values 
print object.value.enumtype 
```

*输出*

```
[EnumValue(<enum.Enum object at 0x02E80E50>, 0, 'FIRST'), EnumValue(<enum.Enum object at 0x02E80E50>, 1, 'SECOND')
<enum.Enum object at 0x02E80E50> 
```

在我解开并打印出同样的东西后，我得到了这个*输出*：

```
[EnumValue(<enum.Enum object at 0x02E80E50>, 0, 'FIRST'), EnumValue(<enum.Enum object at 0x02E80E50>, 1, 'SECOND')
<enum.Enum object at 0x02ECF750> 
```

问题是第二个对象地址发生了变化；第一次初始化时，`enumtype`和`_values`具有相同的地址。但是，在 unpickling 之后，它们会更改地址。当我尝试比较两个枚举值时，这会破坏我的代码。如果你查看`enumValue`类，比较函数会尝试这样做：

```
try:
        assert self.enumtype == other.enumtype
        result = cmp(self.index, other.index) 
```

由于地址改变，assert 函数失败。我现在需要以某种方式确保枚举类型的地址在未腌制时不会改变。我正在考虑简单地从未腌制的文件中获取值“FIRST”，找出它的索引，然后使用以下命令重新初始化对象：

```
def load:
    object = CellSizeRelation(CellSizeRelation.Values[INDEX])
    return object 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T19:45:03.480

您想要自定义对象状态的腌制和解封方式，而不是自定义加载和卸载功能。

您必须学习[Pickling and unpickling normal class instances 一章](http://docs.python.org/library/pickle.html#pickling-and-unpickling-normal-class-instances)，在您的情况下定义一个`__getstate__`and`__setstate__`方法就足够了。

在您的情况下发生的情况是有一个带有实例的类级属性`EnumValue`，这些实例是常量。但是在 unpickling 时，`EnumValue`会创建不再连接到类级别属性的新实例。

这些`EnumValue`实例确实有一个`index`属性，您可以使用它来将它们的状态捕获为整数而不是 的实例`EnumValue`，我们可以在恢复实例时使用它再次找到正确的常量：

```
 class CellSizeRelation(Option):
     # skipping your enum definition and __init__ here

     def __getstate__(self):
         # capture what is normally pickled
         state = self.__dict__.copy()
         # replace the `value` key (now an EnumValue instance), with it's index:
         state['value'] = state['value'].index
         # what we return here will be stored in the pickle
         return state

     def __setstate__(self, newstate):
         # re-create the EnumState instance based on the stored index
         newstate['value'] = self.Values[newstate['value']]
         # re-instate our __dict__ state from the pickled state
         self.__dict__.update(newstate) 
```

因此，通常情况下，如果没有`__getstate__`实例`__dict__`被腌制。我们现在确实返回了 that 的副本`__dict__`，但是我们将`EnumValue`实例换成了它的索引（一个简单的整数）。在 unpickling 时，通常会使用我们在 pickling 中捕获`__dict__`的 unpickled 更新新实例`__dict__`，但是现在我们已经`__setstate__`定义了，我们可以将枚举索引换回正确的位置`EnumValue`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:44:30.077

`EnumValue`取决于“枚举类型”对象`id`之间的身份。`Enum`这有一些优点和缺点。

主要优点是两次调用`Enum('A', 'B')`定义了不同的枚举类型。所以：

```
osx = Enum('Jaguar', 'Tiger', 'Leopard')
bigcats = Enum('Jaguar', 'Tiger', 'Leopard') 
```

如果您希望能够将 OS X 10.4 与条纹杀戮机器区分开来，这可能很有用。

但这也意味着当 pickle unpickles `osx`and时`bigcats`，它们不仅会彼此不同，而且还会与`osx`and的任何早期实例不同`bigcats`。一旦你想到它，现在真的有任何东西。

因此，您的解决方案不能涉及任何类型的黑客泡菜；这将不得不涉及破解`enum`模块。

您将需要定义一个合理的`__cmp__`方法`Enum`来做对您有意义的事情。如果您可以放弃 osx-vs.-bigcats 的区别，那很容易。如果你不能，你需要一些其他的方式来`enum`处理它（也许在定义中添加一个显式的标签名称，或者一个可选但其他隐式自动增量计数器？）。

# javascript - Microsoft Excel 网络应用程序

> ID：11801285
> 
> 赞同：0
> 
> 时间：2012-08-03T18:28:38.633
> 
> 标签：javascript, excel, web-applications

我正在尝试找出一种将 Microsoft excel Web 应用程序嵌入到我自己的 Web 应用程序的 iframe 中的方法。我喜欢[Microsoft Web 应用程序](http://office.microsoft.com/en-us/web-apps/)的工作方式，并且希望能够将我存储在 javascript 对象中的网页中的一些数据发送到该应用程序。无论如何我可以做到这一点吗？现在，我似乎可以将任何数据输入此应用程序的唯一方法是在 skydrive 上创建一个文件，然后在应用程序中打开它，但我真正想做的只是让它在某些单元格中打开一些数据，然后让用户对数据做任何他们想做的事情，并将其保存在他们的计算机或自己的 skydrive 上。

有谁知道我该怎么做？抱歉，我没有任何代码，但我还没有尝试过任何东西，因为我真的不知道从哪里开始，也找不到有关是否可以使用外部数据打开此应用程序的文档？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:46:35.917

它看起来不像你可以创建一个。目前唯一的选择是上传一个空白文档并使用它。

看看[http://blogs.office.com/b/microsoft-excel/archive/2010/09/23/embedding-excel-web-app-in-your-own-web-page-or-blog。 aspx](http://blogs.office.com/b/microsoft-excel/archive/2010/09/23/embedding-excel-web-app-in-your-own-web-page-or-blog.aspx)

如果这不符合您的喜好，您可以随时尝试具有广泛[API的](https://developers.google.com/google-apps/spreadsheets/)[Google Docs](http://docs.google.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:11:47.843

作为一个建议来帮助你！您应该了解任何服务器端脚本语言，例如 PHP。Excel 文件可以保存为 csv（逗号分隔值），并且可以使用 PHP 或任何其他服务器端脚本技术轻松操作这些文件。

# ios - UIWebView 第一次分配

> ID：11801287
> 
> 赞同：2
> 
> 时间：2012-08-03T18:28:43.777
> 
> 标签：ios, memory-leaks, uiwebview

我创建了一个小型测试 TabController 应用程序来测试`UIWebView`. 单击每个选项卡时会显示一个简单的视图控制器，该控制器会`UIWebView`在`viewWillAppear`. Webview 加载一个本地测试 html 文件，该文件显示 1000 张图像。

在 上`viewWillDisappear`，我通过从超级视图中删除 WebView 来解除分配 WebView，因为我不希望内存中有多个实例。在我解除分配 WebView 之前，我还调用 HTML 实现中的一个方法来销毁浏览器窗口对象中包含的任何对象。

我注意到的是，当我第一次初始化`UIWebView`时，它分配了大约 600KB 的内存。当我通过切换选项卡取消分配 WebView 时，我没有取回该内存。

在切换标签后分配和初始化下一个 WebView 时，仅分配了大约 20 KB 的内存。当我点击下一个选项卡时，当前的 webview 被释放，我得到了 20KB 的大部分。

这只是操作系统在渲染时保留它所需的依赖库的问题`UIWebView`吗？

这是我的`viewWillAppear`/`viewWillDisappear`方法：

```
- (void) viewWillAppear:(BOOL)animated{
     [super viewWillAppear:animated];
     webView = [[UIWebView alloc] initWithFrame:[self view].frame];
     webView.delegate = self;
     [[self view] addSubview:webView];

     NSString *fileStr = [[NSBundle mainBundle] pathForResource:@"test" ofType:@"html" inDirectory:@""];
     NSMutableString* template = [NSMutableString stringWithContentsOfURL:[NSURL fileURLWithPath:fileStr] encoding:NSUTF8StringEncoding error:NULL];

     NSString *path = [[NSBundle mainBundle] bundlePath];
     NSURL *baseURL = [NSURL fileURLWithPath:path];

     NSData* d = [template dataUsingEncoding:NSUTF8StringEncoding];
     [webView loadData:d MIMEType:@"text/html" textEncodingName:@"utf-8" baseURL:baseURL];
     [webView release];
}

- (void) viewWillDisappear:(BOOL)animated {
    [super viewWillDisappear:animated];
    webView.delegate = nil;
    [webView stopLoading];
    [webView stringByEvaluatingJavaScriptFromString:@"destroy();"];
    [webView removeFromSuperview];
} 
```

# cassandra - 使用复合键从 Cassandra 插入和获取：InvalidRequestException（为什么：没有足够的字节来读取组件 0 的值）

> ID：11801288
> 
> 赞同：3
> 
> 时间：2012-08-03T18:28:43.500
> 
> 标签：cassandra, thrift, composite-key

我正在尝试使用 Java 中的 thrift 插入具有复合键的列族。我得到以下异常：

```
 InvalidRequestException(why:Not enough bytes to read value of component 0) 
```

这是我使用 CQLSH 创建 CF 的方法。我想将 ("1","2","aaa") 插入“测试”。

CREATE COLUMFAMILY 测试 (id1 varchar, id2 varchar, value varchar,PRIMARY KEY (id1,id2));

这是我的源代码，有人知道这里出了什么问题以及如何使其工作吗？

```
public static void main(String[] args) throws Exception {       

    TSocket socket = new TSocket("10.10.8.200", 9160);
    TFramedTransport transport = new TFramedTransport(socket);

    Cassandra.Client client = new Cassandra.Client(new TBinaryProtocol(transport));     
    transport.open();
    client.set_cql_version("3.0.0");
    client.set_keyspace("bigdata");

    ColumnParent parent = new ColumnParent("test");

    List<AbstractType<?>> keyTypes = new ArrayList<AbstractType<?>>(); 
    keyTypes.add(UTF8Type.instance);
    keyTypes.add(UTF8Type.instance);
    CompositeType compositeKey = CompositeType.getInstance(keyTypes);

    Builder builder = new Builder(compositeKey);
    builder.add(ByteBuffer.wrap("1".getBytes()));
    builder.add(ByteBuffer.wrap("2".getBytes()));
    ByteBuffer rowid = builder.build();

    Column column = new Column();
    column.setName("value".getBytes());
    column.setValue("aaa".getBytes());
    column.setTimestamp(System.currentTimeMillis());

    client.insert(rowid, parent, column, ConsistencyLevel.ONE);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T14:09:50.313

好的。最后，我想出了如何使用 thrift API 使用复合键插入 ColumnFamily。我不得不说，这没有任何意义。但它有效：

```
 ColumnParent parent = new ColumnParent("test");

    List<AbstractType<?>> keyTypes = new ArrayList<AbstractType<?>>(); 
    keyTypes.add(UTF8Type.instance);
    keyTypes.add(UTF8Type.instance);
    CompositeType compositeKey = CompositeType.getInstance(keyTypes);

    Builder builder = new Builder(compositeKey);
    builder.add(ByteBuffer.wrap("2".getBytes()));
    builder.add(ByteBuffer.wrap("value".getBytes()));
    ByteBuffer columnName = builder.build();

    Column column = new Column();
    column.setName(columnName);
    column.setValue("3".getBytes());
    column.setTimestamp(System.currentTimeMillis());

    client.insert(ByteBuffer.wrap("1".getBytes()), parent, column, ConsistencyLevel.ONE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:08:12.633

好的。在这里四处走动。如果您希望主键按顺序由 id1 和 id2 组成，那么当您插入一行时，您将为 value 添加单个列，并且行键和列名将从 id1 和 id2 的值派生。

行键将是 id1 的值。

value 的列名将是一个复合值，由 id1 的值（在本例中为“1”）和列 id2 的名称（在本例中为“id2”）组成。

如果您不直接使用 CQL，至少这是您在 Hector 中必须做的事情。

# sharepoint - 如何从自定义列表中签出/签入项目？

> ID：11801290
> 
> 赞同：1
> 
> 时间：2012-08-03T18:28:50.410
> 
> 标签：sharepoint, checkout, nintex-workflow

我想用 nintex 创建一个库类型的应用程序。我希望能够签出/签入“书籍”，并有列说明它是否可用于签出。我希望它还包含结帐日期。

现在，我很确定我想要一个自定义列表，但是在检查它时遇到问题，因为它没有让我选择从“结帐来源：”下拉列表中说出“当前项目”。（如手册中所述：http: [//nintexdownload.com/sl/supportfiles/NintexWorkflow2007UserManual.pdf](http://nintexdownload.com/sl/supportfiles/NintexWorkflow2007UserManual.pdf)）。我用谷歌搜索了这个，发现一篇关于你如何不能从自定义列表中签出项目的帖子。我会以错误的方式解决这个问题吗？

我是全新的，这是一个学习如何使用它的培训项目，但我完全迷失了。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T14:19:57.950

签入/签出仅适用于文件。您不需要签入/签出列表项，因为您可以直接从工作流中更改它们的值。

我误解了这是如何工作的，我想如果其他人遇到同样的事情，我会分享。祝你好运！

# matlab - MatLab - 用二等分法找到 f(x) = x - tan(x) 的根

> ID：11801293
> 
> 赞同：1
> 
> 时间：2012-08-03T18:29:05.980
> 
> 标签：matlab, bisection

我在 MatLab 中为二分算法编写了代码。我基于教科书中给出的伪代码。到目前为止，该算法在我所有的问题上都运行良好，但是当我被要求在区间 [1,2] 上找到 f(x) = x - tan(x) 的根时，我遇到了一些麻烦。我的代码如下：

```
function x = bisection(a,b,M)
f = @(x) x - tan(x);
u = f(a);
v = f(b);
e = b-a;
x = [a, b, u, v]
if (u > 0 && v > 0) || (u < 0 && v < 0)
    return;
end;
for k = 1:M
    e = e/2;
    c = a + e;
    w = f(c);
    x = [k, c, w, e]
    if (abs(e) < 10^(-5) || abs(w) < eps)
        return;
    end
    if (w < 0 && u > 0) || (w > 0 && u < 0)
        b = c;
        v = w;
    else
        a = c;
        u = w;
    end
end 
```

如果我在区间 [1,2] 上运行这个算法，比如 15 次迭代，我的最终答案是：

```
x =

  1.0e+004 *

    0.0015    0.0002   -3.8367    0.0000 
```

这显然很遥远，因为我希望得到 f(c) = 0 （上面向量中的第三个条目）。

如果有人可以就如何提高我的成绩给我任何帮助/提示，​​我将不胜感激。我对 MatLab 很陌生，所以把我当作新手:)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:20:40.370

我们来看看`c`二分法生成的序列：

```
c =  1.5000
c =  1.7500
c =  1.6250
c =  1.5625
c =  1.5938
c =  1.5781
c =  1.5703
c =  1.5742
c =  1.5723
c =  1.5713
c =  1.5708
c =  1.5706
c =  1.5707
c =  1.5707
c =  1.5708 
```

你可以看到它收敛到`pi/2`。在这`tan()`一点上有一个奇点，所以也有`x - tan(x)`。例如，二分法收敛到这个奇点，如[这里](http://help.derivativepricing.com/1542.htm)所说。这就是为什么函数值`f(c)`不接近于零的原因。事实上它应该去（加/减）无穷大。

**其他建议：**

我喜欢你的二分法。为了使其以更通用的方式使用，您可以合并以下更改：

*   使变量`f`成为函数参数。然后，您可以将您的方法与不同的功能一起使用，而无需重新编写它。
*   您第一次分配`x = [a, b, u, v]`但后来`x(1)`是迭代次数。我会让这更加一致。
*   您可以通过查看产品的标志轻松测试是否`f(a)`有不同的标志。因为符号相等并且没有根，因为符号不同并且对于任何一个或为零，您已经找到了根。`f(b)``p = f(a)*f(b)``p > 0``p < 0``p == 0``f(a)``f(b)`

# mysql - 触发器内部的 MySQL INSERT INTO 问题

> ID：11801295
> 
> 赞同：0
> 
> 时间：2012-08-03T18:29:07.180
> 
> 标签：mysql, triggers

一般来说，我对 MySQL 触发器和过程代码很陌生，所以这对我来说可能是一个愚蠢的错误。这是不起作用的代码。

```
CREATE TRIGGER add_to_cart
AFTER INSERT ON orders
FOR EACH ROW
BEGIN

SET @status = ‘S’;
SET @user = NEW.user_id;
SET @order = NEW.order_id;

SELECT count(*) INTO @shipped_count 
FROM orders
**WHERE (user_id = @user) AND (order_status = @status);**

SELECT MAX(priority) INTO @max FROM cart;

IF @max = 'NULL' THEN

SET @max = 0;

END IF;

SET @priority = @max + 1;

INSERT INTO cart VALUES (@user, @order, @priority);
**INSERT INTO log VALUES (@count, @user);**

END $$ 
```

触发器按预期工作，直到我在 SELECT count(*) INTO shipping_count 中包含 WHERE 子句。我可以计算订单表中的所有记录，但是当我尝试指定某些类型的记录时它不起作用。

此外，粗体的“INSERT INTO log”也由于某种原因而失败，而完全相同的语法适用于其正上方的 INSERT。

帮助！谢谢。我一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T22:38:20.037

尝试更换：

```
SET @status = ‘S’; 
```

和：

```
SET @status = 'S'; 
```

请注意常规单引号而不是圆角单引号。

# javascript - 在 jQuery 中使用超过 1 个 val

> ID：11801296
> 
> 赞同：0
> 
> 时间：2012-08-03T18:29:16.037
> 
> 标签：javascript, jquery

对此可能有一个非常简单的解决方案，但我的 jQuery 技能还没有达到多少。我正在使用下面的内容来显示和隐藏基于下拉列表中的值的 div。我想对其进行调整，以便“否”和“”都可以使用。我如何做到这一点？

提前致谢

```
$('#q1').change(function(){
 if ($(this).val() == "No") {
 $('#divv').show();
 } else {
 $('#divv').hide();
 }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:31:02.450

在这种情况下，您可以使用 JavaScript[逻辑或运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Logical_OR_(.7C.7C))( `||`)：

```
$('#q1').change(function() {
    value = this.value;
    if (value == "No" || value == "") {
        $('#divv').show();
    } else {
        $('#divv').hide();
    }
}
); 
```

实际上，最适应的解决方案是：`if (value.toLowerCase() == "no" || value == "") {`无论在什么情况下，这都会接受“否”。

演示：http: [//jsfiddle.net/SO_AMK/YKeFy/1/](http://jsfiddle.net/SO_AMK/YKeFy/1/)

**编辑：**更新代码以满足 Kolink 和 Bergi

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:31:05.323

使用 javascript OR 运算符 ( `||`)：

```
$('#q1').change(function(){
 var thisVal = $(this).val();
 if ((thisVal == "No") || (thisVal == "")) {
 $('#divv').show();
 } else {
 $('#divv').hide();
 }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:31:41.937

有很多方法。我个人会这样做：

```
if( this.value.match(/(No)?/i)) { 
```

`i`允许`NO`，`no`并且`nO`也可以工作 - 如果您只想要“否”，请将其删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:52:43.800

[逻辑`OR`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)应该这样做：

```
$('#q1').change(function(){
    if (this.value == "No" || this.value == "") {
        $('#divv').show();
    } else {
        $('#divv').hide();
    }
}); 
```

我没有使用`$(this)`（尤其不是两次）创建 jQuery 对象，而只是使用了[普通的 javascript](https://stackoverflow.com/q/4651923/1048572)。更简洁，如果你愿意（使用[三级运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator)，[非运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators#Logical_NOT_(!))来检查空字符串和[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators#Bracket_notation)）：

```
$('#q1').change(function(){
    $('#divv')[ (this.value == "No" || !this.value) ? "show" : "hide" ]();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T18:56:17.900

您可以通过使用`toggle()`正则表达式检查值来使用和设置状态以显示或隐藏。

```
$('#q1').on('change', function(){
    $('#divv').toggle(this.value.match(/(no|^$)/i));
}); 
```

[小提琴](http://jsfiddle.net/kvqFw/1/) ​</p>

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-03T18:33:49.457

复制并粘贴这个，这应该工作。

```
$('#q1').change(function(){
 if (($(this).val() == "No") || ($(this).val() == "")) {
 $('#divv').show();
 } else {
 $('#divv').hide();
 }
 }); 
```

# javascript - 为什么我的卷轴不能与我的锚一起使用？

> ID：11801298
> 
> 赞同：0
> 
> 时间：2012-08-03T18:29:23.933
> 
> 标签：javascript, jquery

我从这里拖了代码；[http://www.mymcreative.com/](http://www.mymcreative.com/)

对于网站的骨架： [http ://soniahsieh.com/dev/index2.html](http://soniahsieh.com/dev/index2.html)

但是由于某种原因，jQuery 滚动已经死了？我无法确定为什么？

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:23:46.243

我可以看到几个问题

1.  正如 Jashwant 所指出的，jQuery.anchor.js 文件会引发错误。您直接在[http://www.mymcreative.com/js/jquery.anchor.js](http://www.mymcreative.com/js/jquery.anchor.js)链接到该文件，这绝不是一个好主意。此外，它没有正确下载文件，如果您查看源代码，它充满了 HTML 而不是 JavaScript，如果您在浏览器中浏览到该文件，您会看到该文件。下载该文件的副本并将其上传到您的 Web 服务器，然后在您的 Web 服务器上引用该副本

2.  您的 a 标签没有链接到您网站上的 id，例如，您有这个`<a href="#topReception"</a>`，但您的网站上没有 id 为“topReception”的元素。好吧，您这样做了，但它在页面底部被注释掉了，因为我认为您也从 mymcreative 站点复制了 HTML？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:45:15.383

你`jQuery.anchor.js`抛出一个错误**Uncaught SyntaxError: Unexpected token ***。

您没有在顶部正确注释代码。

用于`/* */`多行注释

和`//`单行注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:45:45.513

由于几个错误和拼写错误，您的脚本没有加载，从这一行开始：

```
<meta http-equiv="Content-Type" content'"text/html; charset=utf-8" /> 
```

在内容之后有一个额外的引用，基本上将你的大部分头部部分放在`content=""`声明中，然后按照你的方式进行操作，直到所有的错别字都被修复。

正如 Jashwant 所指出的，一些外部 JS 文件中也存在一些问题。

# jsf - 从超类访问子类属性

> ID：11801299
> 
> 赞同：1
> 
> 时间：2012-08-03T18:29:26.227
> 
> 标签：jsf, inheritance, attributes, primefaces

有两个类，A 和 B，其中 B 扩展了 A，并且具有 A 中不存在的一个属性。

在我的托管 Bean 中，我保留了一个 A 的实例，它可以是 B 类型，也可以不是 B 类型，具体取决于用户在页面上选择的内容。

在我的 xhtml 页面中，有时我必须执行类似的操作`#{myBean.A.attribute}`，其中“属性”仅存在于 B 类中。因此，尝试访问此属性的组件（或父级）必须具有类似`rendered="#{myBean.isTypeBSelected()}"`.

它工作完美，由于某种原因，它开始抛出 PropertyNotFoundException，因为即使组件（或父级）评估为 render="false"，它也试图访问该属性。

完整的堆栈跟踪：

```
14:39:54,142 WARNING [javax.enterprise.resource.webcontainer.jsf.lifecycle] (http--0.0.0.0-8080-3) /restrito/formularios/formularios.xhtml @340,63 value="#{formularioMB.perguntaSelecionada.opcoesResposta}": The class 'br.ind.seat.pso.modelo.PerguntaTexto' does not have the property 'opcoesResposta'.: javax.el.PropertyNotFoundException: /restrito/formularios/formularios.xhtml @340,63 value="#{formularioMB.perguntaSelecionada.opcoesResposta}": The class 'br.ind.seat.pso.modelo.PerguntaTexto' does not have the property 'opcoesResposta'.
at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:111) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:194) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:182) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.getValue(UIData.java:731) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.primefaces.component.datatable.DataTable.getValue(DataTable.java:773) [primefaces-3.3.1.jar:]
at javax.faces.component.UIData.getDataModel(UIData.java:1798) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIData.java:484) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.setRowIndex(UIData.java:473) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIData.visitTree(UIData.java:1401) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIForm.visitTree(UIForm.java:371) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.omnifaces.eventlistener.ResetInputAjaxActionListener.resetEditableValueHolders(ResetInputAjaxActionListener.java:229) [omnifaces-1.1.jar:1.1]
at org.omnifaces.eventlistener.ResetInputAjaxActionListener.access$000(ResetInputAjaxActionListener.java:107) [omnifaces-1.1.jar:1.1]
at org.omnifaces.eventlistener.ResetInputAjaxActionListener$1.visit(ResetInputAjaxActionListener.java:241) [omnifaces-1.1.jar:1.1]
at com.sun.faces.component.visit.PartialVisitContext.invokeVisitCallback(PartialVisitContext.java:183) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1612) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIComponent.visitTree(UIComponent.java:1623) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.omnifaces.eventlistener.ResetInputAjaxActionListener.resetEditableValueHolders(ResetInputAjaxActionListener.java:229) [omnifaces-1.1.jar:1.1]
at org.omnifaces.eventlistener.ResetInputAjaxActionListener.processAction(ResetInputAjaxActionListener.java:174) [omnifaces-1.1.jar:1.1]
at javax.faces.component.UICommand.broadcast(UICommand.java:315) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1259) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:81) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118) [javax.faces-2.1.9.jar:2.1.9-SNAPSHOT]
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) [jboss-jsf-api_2.1_spec-2.0.1.Final.jar:2.0.1.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:329) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) [weld-core-1.1.5.AS71.Final.jar:2012-02-10 15:31]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.solder.servlet.exception.CatchExceptionFilter.doFilter(CatchExceptionFilter.java:65) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.jboss.solder.servlet.event.ServletEventBridgeFilter.doFilter(ServletEventBridgeFilter.java:74) [solder-impl-3.1.0.Final.jar:3.1.0.Final]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at br.ind.seat.pso.filtros.FiltroUrlPattern.doFilter(FiltroUrlPattern.java:44) [classes:]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at br.ind.seat.pso.filtros.FiltroNoCache.doFilter(FiltroNoCache.java:46) [classes:]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at br.ind.seat.pso.filtros.FiltroDePermissao.doFilter(FiltroDePermissao.java:45) [classes:]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at br.ind.seat.pso.filtros.FiltroUsuarioLogado.doFilter(FiltroUsuarioLogado.java:44) [classes:]
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:280) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:248) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:275) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:161) [jbossweb-7.0.13.Final.jar:]
at org.jboss.as.web.security.SecurityContextAssociationValve.invoke(SecurityContextAssociationValve.java:153) [jboss-as-web-7.1.1.Final.jar:7.1.1.Final]
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:155) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) [jbossweb-7.0.13.Final.jar:]
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:368) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:877) [jbossweb-7.0.13.Final.jar:]
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:671) [jbossweb-7.0.13.Final.jar:]
at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:930) [jbossweb-7.0.13.Final.jar:]
at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_05] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T11:02:17.410

`<p: messages />`在我的`<p:dialog />`. 因此，即使我的对话框设置为`dynamic="true"`，`<p: messages />`它的内部也会强制它加载。

我通过设置解决了`autoUpdate="false"`它`<p: messages/>`。

# c++ - main() 周围没有花括号——为什么会这样？

> ID：11801301
> 
> 赞同：28
> 
> 时间：2012-08-03T18:29:29.160
> 
> 标签：c++, syntax, error-handling

我正在阅读一本关于 C++ 的书，并且在关于错误的章节中它有这个程序（我遗漏了一些小事情，但主要是这个）：

```
int main()
try { 
        // our program (<- this comment is literally from the book)
        return 0;
}
catch(exception& e) {
    cerr << "error: " << e.what() << '\n';
    return 1;
}
catch(...) {
    cerr << "Unknown exception\n";
    return 2;
} 
```

这个编译但当然它什么也没做所以我仍然想知道

1.  为什么没有一组花括号将 main() 之后的所有内容括起来？这些块或者我应该称它们为“流行语”（哈！）是否是 main() 的一部分？
2.  如果它们是函数，为什么在 catch（无论如何）之前没有“int”？
3.  如果它们不是函数，它们是什么？
4.  re catch(...)，我从未见过这样使用省略号。我可以在任何地方使用省略号来表示“任何东西”吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T18:36:30.167

如果您直接使用 try 块而不是大括号，则 try 块会捕获函数中发生的所有事情。这在构造函数中很有用，因此您可以在初始化列表中捕获异常。

这将从 bar 的构造函数中捕获异常：

```
void Foo::Foo() try : bar() {
    // do something
} catch(...) {
    // do something
} 
```

这只会捕获正文中的异常：

```
void Foo::Foo() : bar() {
    try {
        // do something
    } catch(...) {
        // do something
    }
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-03T18:34:25.383

> 1 为什么没有一组花括号将 main() 之后的所有内容括起来？...

有，它只是在`try`左大括号之前有`catch`关键字，*在*`main`.

> ...这些块或者我应该称它们为“流行语”（哈！）是否是 main() 的一部分？
> 
> 2 如果它们是函数，为什么在 catch（无论如何）之前没有“int”？
> 
> 3 如果它们不是函数，它们是什么？

它们是关键字，而不是函数，它们是 main 的一部分，尽管`try`在`int main()`定义和它的`{}`主体之间。有关另一个示例，请参见下面的*激励案例。*

> 4 re catch(...)，我从未见过这样使用省略号。我可以在任何地方使用省略号来表示“任何东西”吗？

在 C++ 中省略号有几个重载的含义。

*   `catch(...)`表示捕获*任何东西*，它就像异常类型的通配符（如果有多个，应该是最后一个捕获）
*   `int printf(char *, ...)`意味着一个函数接受一个变量*参数*列表，它完全禁用了参数的类型检查并且很容易出错（但偶尔有用）
*   `template <typename... TypePack>`表示模板接受变量*类型*列表，这对于元编程非常有用，但在这里完全超出范围
*   `#define DEBUG(str, ...)`是一个可变参数宏，类似于可变参数函数

* * *

函数级`try`/`catch`块是一种将*整个*函数体包装在异常处理程序中的方式。所以，这里的主要功能块在`try { ... }`.

IIRC 这是专门引入的，以允许构造函数用`try`/包装其初始化列表`catch`，以处理从子对象构造函数抛出的异常。

例如。（励志案例）

```
C::C() try : Base(1), member(2)
{ ...
}
catch (...) {
    // handle Base::Base or member construction failure here
} 
```

请注意，没有其他方法可以捕获从基类或成员子对象构造函数抛出的异常，因为即使您省略了初始值设定项列表，它们也会在构造函数主体开始之前至少进行默认构造。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-03T18:39:01.813

这是该语言很少使用的功能。您可以将整个函数包含在`try`catch 块中：

```
void f()
try 
{         // function starts here
...
}         // function ends here
catch (...) 
{} 
```

该功能很少使用，因为它几乎从来没有用过。在常规函数的情况下，您可以只使用一个覆盖函数所有代码的 try/catch 块，因此在这种情况下不需要该功能。它在构造函数中的功能有限，因为它允许在初始化列表中捕获异常，否则这些异常不能包含在 try/catch 块中。

但问题是在 catch 块中可以做的事情很少：构造失败所以必须抛出异常（catch 块可以抛出与捕获的不同的异常，但它*必须**抛出*）。同时，您不能真正执行任何清理，因为在捕获异常时您可能不知道初始化列表中的哪些元素抛出，这意味着您可能不知道（在一般情况下）哪个成员对象是否已构造。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T18:34:29.980

是`function-try block`。是的，这是合法的，但在更多情况下不需要。查看此答案以获取解释。[这个语法的含义是什么？](https://stackoverflow.com/questions/11576275/what-is-the-meaning-of-this-syntax/11576306#11576306)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-03T18:37:55.683

不确定主要功能周围缺少花括号，但看起来其他人已经准备好回答了。

至于你的问题的其余部分，try catch 块不是主函数之外的函数，并且不需要`int`在它们前面。

`try {}`: 程序会尝试在这个块中运行任何东西，如果它由于某种原因失败，它将被 catch 块捕获。

`catch (exception) {}`: 当一个异常被抛出时，它会被一个带有特定异常作为参数的catch块捕获，并允许程序员处理这种情况。

`catch (...) {}`：应该捕获任何通过第一个捕获块的东西..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T18:35:58.753

1) 这是 C++ 的一个特性，函数 try-catch 块（例如，参见[这里](http://stupefydeveloper.blogspot.com/2008/10/c-function-try-catch-block.html)
） 2) 是的，`catch(...) { /* absolutely any exception gets caught here */ }`

# ios - Xcode 核心数据属性

> ID：11801306
> 
> 赞同：2
> 
> 时间：2012-08-03T18:29:56.107
> 
> 标签：ios, xcode, core-data, attributes, boolean

我正在制作一个应用程序，并有一个带有实体和 15 个布尔属性的核心数据文件。我想要它，以便当用户按下按钮时，它会将核心数据文件中属性之一的值从“0”更改为“1”。执行此操作的代码是什么？我已经设置了动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:49:19.010

```
-(void)buttonAction:(id)sender {
   myManagedObject.boolAttribute = [NSNumber numberWithBool:
    ![myManagedObject.boolAttribute boolValue]];
   [self.managedObjectContext save:nil];
   // if you need to update the UI (no fetchedResultsController):
   [self.view setNeedsDisplay]; 
   // or
   [self.tableView reloadData];
} 
```

# python - 我是否需要将另一个目录中文件的完整路径传递给 open()？

> ID：11801309
> 
> 赞同：62
> 
> 时间：2012-08-03T18:30:01.097
> 
> 标签：python, file-io, absolute-path

我有一个文件夹，里面有十个文件，我想循环访问。当我打印出文件名时，我的代码可以正常工作：

```
import os
indir = '/home/des/test'
for root, dirs, filenames in os.walk(indir):
    for f in filenames:
        print(f) 
```

哪个打印：

```
1
2
3
4
5
6
7
8
9
10 
```

但是如果我尝试在循环中打开文件，我会收到一个 IO 错误：

```
import os
indir = '/home/des/test'
for root, dirs, filenames in os.walk(indir):
    for f in filenames:
        log = open(f, 'r')

Traceback (most recent call last):
File "/home/des/my_python_progs/loop_over_dir.py", line 6, in <module>
log = open(f, 'r')
IOError: [Errno 2] No such file or directory: '1'
>>> 
```

即使在循环内部，我是否也需要将文件的完整路径传递给`open()`他们？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-08-03T18:32:13.667

如果您只是在单个目录中查找文件（即您*不想*遍历目录树，它看起来不像），为什么不简单地使用[os.listdir()](http://docs.python.org/library/os.html?highlight=listdir#os.listdir)：

```
import os  
for fn in os.listdir('.'):
     if os.path.isfile(fn):
        print (fn) 
```

代替[os.walk()](http://docs.python.org/library/os.html?highlight=listdir#os.walk)。您可以指定目录路径作为[os.listdir()](http://docs.python.org/library/os.html?highlight=listdir#os.listdir)的参数。[os.path.isfile()](http://docs.python.org/library/os.path.html?highlight=isfile#os.path.isfile)将确定给定的文件名是否用于文件。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-03T18:32:00.047

是的，您需要完整路径。

```
log = open(os.path.join(root, f), 'r') 
```

是快速修复。正如评论指出的那样，`os.walk`下降到子目录，因此您确实需要使用当前目录根目录而不是`indir`作为路径连接的基础。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-31T13:15:03.887

您必须指定您正在处理的路径：

```
source = '/home/test/py_test/'
for root, dirs, filenames in os.walk(source):
    for f in filenames:
        print f
        fullpath = os.path.join(source, f)
        log = open(fullpath, 'r') 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-03T18:34:39.830

[文档](http://docs.python.org/library/os.html)中 os.walk 的示例显示了如何执行此操作：

```
for root, dirs, filenames in os.walk(indir):
    for f in filenames:
        log = open(os.path.join(root, f),'r') 
```

您如何期望“open”函数知道字符串“1”应该表示“/home/des/test/1”（除非“/home/des/test”恰好是您当前的工作目录）？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-08-06T19:49:47.053

这是一个将为您遍历文件树的片段：

```
indir = '/home/des/test'
for root, dirs, filenames in os.walk(indir):
    for f in filenames:
        print(f)
        log = open(indir + f, 'r') 
```

# c# - 相当于允许重复键的排序字典

> ID：11801314
> 
> 赞同：14
> 
> 时间：2012-08-03T18:30:31.217
> 
> 标签：c#, data-structures, dictionary

我需要一个数据结构，可以通过与之关联的浮动键对对象进行排序，最低优先。问题是键代表成本，所以经常有重复，我不在乎这个，因为如果两个成本相同，我会抓住第一个，因为它没有区别，问题是编译器抱怨。

是否存在行为相同但允许重复键的数据结构？

编辑 - 我仍然需要重复，因为如果一个结果是死胡同，我抓住下一个（它们是 a* 搜索中的节点）

所以为了清楚起见，它需要允许按顺序排序的重复键。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T18:37:10.910

你写：

> 相当于允许重复键的字典
> 
> 我需要一个数据结构，可以通过与之关联的浮动键对对象进行排序，最低优先。

字典不会按键对项目进行排序，因此您要查找的结构实际上根本不等同于 a `Dictionary`。你想要的是类似于 a `SortedList`or的东西，`SortedDictionary`除了它应该允许重复的键。

.NET 中不存在这样的类。但是，您有几个选择：

*   如果`SortedDictionary<double, List<TValue>>`您想要存储与键关联的所有值，即使您*通常*只需要第一个值，也可以使用。第一次插入键时，创建一个新列表并将值添加到列表中。插入已存在的键时，获取列表并将值附加到列表中。
*   [*您的编辑意味着这种方法不适用于您的情况。*] ~~在插入之前使用`SortedDictionary<double, TValue>`并检查重复项。只会存储每个键的第一个值，因此与上述方法不同，您根本无法使用此方法访问第二个值。~~
*   找到一个第三方收藏库，它的类可以满足您的需求。

**有关的**

*   [SortedList 和 SortedDictionary 有什么区别？](https://stackoverflow.com/questions/935621/whats-the-difference-between-sortedlist-and-sorteddictionary)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-15T18:54:27.477

您可以创建自己的类，该类派生自`SortedSet`：

```
public class SortedTupleBag<TKey, TValue> : SortedSet<Tuple<TKey, TValue>> 
    where TKey : IComparable
{
    private class TupleComparer : Comparer<Tuple<TKey, TValue>>
    {
        public override int Compare(Tuple<TKey, TValue> x, Tuple<TKey, TValue> y)
        {
            if (x == null || y == null) return 0;

            // If the keys are the same we don't care about the order.
            // Return 1 so that duplicates are not ignored.
            return x.Item1.Equals(y.Item1)
                ? 1
                : Comparer<TKey>.Default.Compare(x.Item1, y.Item1);
        }
    }

    public SortedTupleBag() : base(new TupleComparer()) { }

    public void Add(TKey key, TValue value)
    {
        Add(new Tuple<TKey, TValue>(key, value));
    }
} 
```

在控制台应用程序中的用法：

```
private static void Main(string[] args)
{
    var tuples = new SortedTupleBag<decimal, string>
    {
        {2.94M, "Item A"}, 
        {9.23M, "Item B"}, 
        {2.94M, "Item C"}, 
        {1.83M, "Item D"}
    };

    foreach (var tuple in tuples)
    {
        Console.WriteLine("{0} {1}", tuple.Item1, tuple.Item2);
    }

    Console.ReadKey();
} 
```

产生这个结果：

```
 1.83 Item D
 2.94 Item A
 2.94 Item C
 9.23 Item B 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-08T22:04:37.997

我已经多次遇到这个问题，而且我总是使用 Wintellect ( [http://powercollections.codeplex.com](http://powercollections.codeplex.com) ) 的公共许可证（即免费）Power Collections。他们有一个 OrderedMultiDictionary 正是您正在寻找的。它允许重复键，它允许您遍历所有重复的键条目。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-03T18:35:42.017

您正在寻找[Lookup](http://msdn.microsoft.com/en-us/library/bb460184.aspx)。与已经提出的其他基于字典的解决方案类似，它在每个键下存储一个 IEnumerable 来处理重复项。

```
var registry = Items.ToLookup(item=>item.Price);
foreach(var item in registry[desiredPrice])
{
     //Here you handle items that all have Price == desiredPrice
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-06T19:51:07.773

您可以通过覆盖 CompareTo 函数来做到这一点。当您将 aelement 添加到 SortedDictionary 时，它使用 CompareTo()，如果结果为 0 则引发异常，但您可以更改键类实现的比较器行为以仅返回大于或小于（1 或 -1）

```
 public int CompareTo(int key)
    {
        if (this.key.CompareTo(key) < 1)
            return 1;
        else
            return -1;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T18:35:13.107

你仍然可以使用字典。您只需要将值的类型更改为集合而不是单个项目：

```
Dictionary<float, List<T>> 
```

字典定义不允许重复键。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-03T18:46:59.897

你说的是一个*包*。*bag*和*set*之间的区别在于，set 是唯一的，而 bag 允许重复。{a,b,c} 是一个集合；{a,b,c,a} 是一个包。

[获取C5 Collections Library](http://www.itu.dk/research/c5/)的副本。您想要课程`HashBag<T>`或`TreeBag<T>`. 不同之处在于，一个中的基础数据存储是散列，另一个中是红黑树。在外部，它们的行为相同。要么应该给你你想要的。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-03T18:33:08.820

您要查找的内容称为 a `heap`or `priority queue`。我敢肯定，如果你用谷歌搜索，你会找到一个 C#

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-20T02:24:30.217

您应该能够将 SortedDictionary 与 IComparer 的自定义实现一起使用以避免冲突。例如：

```
private class NonCollidingFloatComparer : IComparer<float>
{
    public int Compare(float left, float right)
    {
        return (right > left) ? -1 : 1; // no zeroes 
    }
}

// silly method for the sake of demonstration
public void sortNodes(List<Node> nodesToSort)
{
    SortedDictionary<float, Node> nodesByWeight = new SortedDictionary<float, Node>(new NonCollidingFloatComparer());
    foreach (Node n in nodesToSort)
    {
        nodesByWeight.Add(n.FloatKey, n);
    }
    foreach (Node n in nodesByWeight.Values)
    {
        Console.WriteLine(n.FloatKey + " : " + n.UniqueID);
    }
} 
```

# jquery - 使用 jQuery 打开外部域 URL

> ID：11801319
> 
> 赞同：0
> 
> 时间：2012-08-03T18:30:41.390
> 
> 标签：jquery, json, url, html

我想知道一个类似的代码来使用 Jquery 将外部域 URL 显示到 div 中。我知道我需要使用 Json，但我找不到一个明确的示例来完全执行以下代码的功能。

```
<div id="external"></div>
<script type='text/javascript'>
$(document).ready(function(){
$("#external").load("http://www.domain.com/file.php?param=option");});</script> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:41:24.180

您不能 .load 带有 jsonp 数据类型的 html。它不是那样工作的。

JSONP 数据类型将要求您的外部 url 返回有效的 JSONP。`JSONP != HTML`.

JSONP 可以包含 HTML，但是外部 url 必须以该格式返回它。如果您无法控制外部 url，那么除了让您的服务器获取 html 或使用 iframe 之外，您无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:36:50.563

您的脚本使用 ajax 加载内容`http://www.domain.com/file.php?param=option`并将其放入带有 id 的 div`#external`

如果您想打开一个 URL，那么您应该使用标签上的[.attr()](http://api.jquery.com/attr)属性并将其设置为您要打开的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:48:20.290

如果不使用代理页面或 jsonp，就无法进行这样的跨域 Ajax 调用。尝试使用 ajax 执行此操作违反了同源策略：[http](http://en.wikipedia.org/wiki/Same_origin_policy) ://en.wikipedia.org/wiki/Same_origin_policy 。我认为代理页面是最简单的解决方案。基本上用 php、coldfusion 或您使用的任何 Web 语言创建一个页面，以获取您想要加载的 URL。一旦你有了它，你可以做这样的事情：

```
$.ajax({
    url: 'http://YOURSITE/YOURPROXYPAGE.cfm',
    type: 'GET',
    data : {param1 : 'something', param2 :'other'}
    success : function(data){
        $('#external').html(data);
    },
    error : function(x,t,e){
        console.log(x);
        console.log(t);
        console.log(e);
    },
    dataType: 'html'
}); 
```

**编辑 1：** 注意我在上面添加了一个数据字段。这个数据字段将是我们想要传递给我们发送 ajax 请求的页面的数据对象。在 ajax 代理页面上，我们可以拉取 ajax 数据参数作为查询参数。

此外，您可以将类型更改为 a`POST`然后数据将像通过表单一样发布到我们请求的代理页面。

**编辑2：**

我不是 php 人，但我在 googlez 中扔了 php 代理页面并找到了一些可能的解决方案。你可以试试这个：[How to proxy another page in PHP](https://stackoverflow.com/questions/6425666/how-to-proxy-another-page-in-php)

同样，我不是一个 php 人，所以可能有其他更好的方法，但你可以尝试提取查询参数：http: [//php.net/manual/en/reserved.variables.get.php](http://php.net/manual/en/reserved.variables.get.php)

# c++ - 错误 0xC0000005：从 C++ 函数返回时访问冲突

> ID：11801321
> 
> 赞同：1
> 
> 时间：2012-08-03T18:30:45.323
> 
> 标签：c++

我是这门语言的初学者，我遇到了这个问题。在网上搜索后，它似乎与内存分配，指针等有关。我不太明白......这里我试图通过类将数据添加到二进制文件......所以我想问可能是什么问题-->

```
void addques()
{
    question abc;
    ofstream fout;
    fout.open("question.txt",ios::app|ios::binary);
    cout<<"Enter Question!\n";
    gets(abc.ques);
    cout<<"Enter Options!\n";
    gets(abc.option1);gets(abc.option2);gets(abc.option3);gets(abc.option4);
    cout<<"Enter correct option number\n";
    cin>>abc.k;
    cout<<"Enter question nummber"; cin>>abc.quesno;
    fout.write((char*)&abc,sizeof(abc));
    fout.close();
    cout<<"File closed";
} 
```

似乎所有具有 ifstream/ofstream 类对象的函数都显示此错误。最后一行“文件已关闭”也正在执行，然后出现错误。会不会是这条线`fout.write((char*)&abc,sizeof(abc))`—— ？？？请帮助

这是相关的类-->

```
class question
{   public:
    char ques[80];
    char option1[50], option2[50], option3[50], option4[50];
    char k;
    char quesno;
}; 
```

对于整个程序，我在此处粘贴了我的代码 [http://pastebin.com/S7KNby0E](http://pastebin.com/S7KNby0E) 请查看它...因为我无法在这里这样做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:54:15.627

您输入的问题或答案对您的某个缓冲区来说太长了吗？我敢打赌你是，它超出了班级的界限并破坏了堆栈。此外，混合 cin 和 cout 以及像 gets 这样的 C 风格的 IO 函数是自找麻烦，所以不要。

由于您使用的是 C++，因此您不必将字符串操作作为字符数组进行。有一个 STL 类可以为您处理所有的内存垃圾。我会用以下方式重写你的课程：

```
class Question
{   public:
    string ques;
    string option1, option2, option3, option4;
    char k;
    char quesno;

    void write(fstream& f)
    {
        f << ques.length() << " " << ques << endl
          << option1.length() << " " << option1 << endl
          << option2.length() << " " << option2 << endl
          << option3.length() << " " << option3 << endl
          << option4.length() << " " << option4 << endl
          << k << " " << quesno << endl;
    }
}; 
```

以及您的功能如下：

```
void addques()
{
    Question abc;
    ofstream fout;
    fout.open("question.txt", ios::app);

    cout << "Enter Question!" << endl;
    getline (cin, abc.ques);

    cout << "Enter Options!\n";
    getline(cin, abc.option1);
    getline(cin, abc.option2);
    getline(cin, abc.option3);
    getline(cin, abc.option4);

    cout << "Enter correct option number: ";
    cin >> abc.k;

    cout << "Enter question number: ";
    cin >> abc.quesno;

    // you will have to change your writing method a bit because you can't just write the string object straight to disk like you were before

    abc.write(fout);
    fout.close();
} 
```

然后，您应该能够以或多或少与 write 相同的方式使用提取运算符将其读入流中。

## Ascii 转二进制

由于您必须使用二进制，您可以通过以下方式将整数值存储为二进制值：

```
int i = ques.length();
fout.write((const char *) &i, sizeof(i)); 
```

这会将 32 位整数值直接写入流，而无需先将其转换为字符串。然后，您的字符串将具有以下格式：

```
+     0x0     0x1     0x2     0x3     0x4     0x5     0x6     0x7     
0x0  [0x00    0x00    0x00    0xC0  ][H       E       L       L
0x8   O       <space> W       O       R       L       D       <null> ] 
```

长度是前 4 个字节，此处显示为 0x0000000C（整数值 12）。该字符串紧随其后，其值为“HELLO WORLD\0”。\0 是空终止符。在我的示例中，此长度包括空终止符。

## 大小

Sizeof 是一个运算符，它在编译器可以确定的情况下尽可能生成指定类型的内存大小。对于整数类型，例如 int、short、char 等，它将返回该类型使用的字节数。对于数组，您可能会遇到令人困惑的行为。如果在静态声明为固定大小的数组上调用，sizeof 将返回数组的长度 * 一个元素的大小。

```
int derp[1000];
sizeof(derp); // sizeof(int) * 1000 
```

如果编译器不知道数组有多大，您将得到的是指向第一个元素的指针的大小。所以要小心。您不能在指针上使用 sizeof 来确定数组大小。

```
int derp2[];
sizeof(derp2); // sizeof(int *), probably 4 or 8
int * derp3 = derp;
sizeof(derp3); // sizeof(int *), probably 4 or 8 
```

要获取 std::string（STL 字符串类）的长度，请使用 length 成员：

```
string hurr = "hello world";
hurr.length(); // does NOT include the null terminator
               // length of string AND terminator is hurr.length() + 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:36:44.237

有一个明显的问题，还有许多潜在的问题。您的症状表明一个值被写入了它不应该存在的内存中（缓冲区溢出、浮动指针等）。

## 关注点

1.  不要将 C++ 标准流 I/O（std::cout、std:cerr、std:cin、std::ofstream 和许多其他元素）与 C 风格的标准 I/O（[gets](http://en.cppreference.com/w/cpp/io/c/gets)）混合。选择[一个 I/O 库](http://en.cppreference.com/w/cpp/io)，并坚持下去。

2.  检查并验证您对边界条件的假设。在这种情况下，您的边界是输入字符数组的大小`question`。您的输入数据是否接近/接近数组大小（您定义的限制）？您是否在每个 char 数组的末尾为额外的终止 NULL (0) 字符留出了空间？

3.  预初始化您将要使用的所有内容。您的`question`构造函数可以做些什么来确保新的中性“空数据”存在`question`？

## 策略 - 隔离问题

1.  注释掉整个函数体（所有语句），将函数留空。运行并验证它是否有效 - 这将确定问题是在身体上还是在其他地方。

2.  开始重新添加位。准确确定触发问题的语句。对于访问违规，人们担心这种类型的代码分类可能无法揭示真正的罪魁祸首。

除了：缓冲区溢出、浮动指针等可能在问题发生后随时随地导致问题。世界上所有的问题隔离可能无法确定问题的根源。您将培养识别常见问题的技能。以上几点旨在成为帮助您发展这些技能的一些入门指南。

## 风格

1.  将每个变量声明为尽可能接近它在代码中的首次使用点。考虑将声明`fout`向下移动。

# ios - iOS 上的条件编译

> ID：11801323
> 
> 赞同：0
> 
> 时间：2012-08-03T18:31:01.360
> 
> 标签：ios, xcode

我有一个有两个目标的 iOS 项目。第一个旨在用作普通应用程序，而第二个将包含第三方类以扩展功能。
我希望能够在同一个 Xcode 项目中编译它们，但我需要在第一个目标中排除第三方类，以避免支付我们不会使用的许可证。

我考虑过做这样的事情：

```
#ifdef THIRD_PARTY
  NSLog(@"Third party enabled");
#else
  NSLog(@"Third party disabled");
#endif 
```

但我需要在建筑设置文件中定义 THIRD_PARTY，但我不能这样做。

你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:37:04.253

在您的 XCode 项目中创建多个 TARGETS。然后，您可以将第 3 方类添加到其中一个目标，并从另一个目标中排除。

也许我误会了，因为我看到您已经有两个目标...您可以在需要时在代码中执行条件编译，将 #define 添加到目标构建设置之一，或者您可以创建一个存根与您的 3rd 方类具有相同接口的类，但所有实现都是空的。

# ruby-on-rails - 是否可以使用 lambda 执行数组

> ID：11801345
> 
> 赞同：0
> 
> 时间：2012-08-03T18:32:57.193
> 
> 标签：ruby-on-rails, ruby

我有一些代码可以在数组（线索）中找到关键字并返回其位置，我正在尝试获取此结果并将其作为 puts 命令执行。此搜索是必要的，因为我并不总是知道“软件包含”在数组中的位置

我下面的代码只是简单的输出“线索 [2]”，但我想实际执行 puts 线索 [2]，就好像我已经输入了它一样，所以我的输出将是“包含软件”。

有没有办法让这个可行？

```
clues = Array.new 
clues << 'Power supply type' 
clues << 'Slots'
clues << 'Software included'

Var100 = clues.rindex('Software included')
Var101 = "clues[#{Var100}]" 

command_store = Array.new
command_store << lambda {puts "clues[#{Var101}]" } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:39:33.510

你把事情复杂化了太多。例如，您`puts`在 lambda 中的命令等价于：

```
puts "clues[clues[2]]" 
```

通过一点调试打印，您将能够使其工作。这是我认为你想要得到的：

```
clues = ['Power supply type', 'Slots', 'Software included']

command_store = []
command_store << lambda { 
  idx = clues.rindex('Software included')
  puts clues[idx] 
}
command_store.each(&:call) # call every lambda in the array
# >> Software included 
```

虽然这个确切的代码对我没有任何意义（谁获取值的索引只是为了使用该索引来打印值），但我知道这可能是一个过于简单的例子。

## 提示：

*   不要以大写字母开头的变量名；
*   尝试为变量取合理的名称。它会让你以后的生活更轻松；
*   总是喜欢`[]`。`Array.new`

# string - 使用字符串键和字符串或切片值映射？

> ID：11801346
> 
> 赞同：3
> 
> 时间：2012-08-03T18:32:58.567
> 
> 标签：string, mapping, go

新蜂警告。

我可以用字符串键和“任何东西”作为值来制作地图吗？目标是获得配置数据的地图。此数据可以是单个字符串（或布尔值或整数，但可以将其限制为字符串），也可以是字符串数组。示例：我想存储这些项目：

```
levels = 3
extra-directories = ["foo","bar","baz"] 
```

第一个选项始终是单个值（对我来说可以使用字符串）。第二个选项是零个或多个值。

目标是拥有一个可以存储这些值的地图，并且在查看地图时，我可以`switch x.(type)`用来找出值是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:44:09.047

`interface{}`是一种接受任何类型的类型。

```
conf := map[string] interface{} {
    "name": "Default",
    "server": "localhost",
    "timeout": 120,
} 
```

`conf["name"]`是一个`interface{}`非一个`string`，并且`conf["timeout"]`是一个`interface{}`非一个`int`。您可以将其传递`conf["name"]`给采用`interface{}`like的函数`fmt.Println`，但不能将其传递给采用`string`like的函数`strings.ToUpper`，除非您知道`interface{}`' 的值是 a `string`（您这样做）并断言它的类型：

```
name := conf["name"].(string)
fmt.Println("name:", strings.ToUpper(name))
server := conf["server"].(string)
fmt.Println("server:", strings.ToUpper(server))
timeout := conf["timeout"].(int)
fmt.Println("timeout in minutes:",  timeout / 60) 
```

* * *

另一个可能适合您的问题的解决方案是定义一个结构：

```
type Config struct {
    Name string
    Server string
    Timeout int
} 
```

创建配置：

```
conf := Config{
    Name: "Default",
    Server: "localhost",
    Tiemout: 60,
} 
```

访问配置：

```
fmt.Println("name:", strings.ToUpper(conf.Name))
fmt.Println("server:", strings.ToUpper(cnf.Server))
fmt.Println("timeout in minutes:",  conf.Timeout / 60) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:00:08.653

是的，您可以使用具有 type 的地图来做到这一点`map[string]interface{}`。

# sql-server-2008 - 查找一行中最后一个非空值的列名

> ID：11801348
> 
> 赞同：5
> 
> 时间：2012-08-03T18:33:01.953
> 
> 标签：sql-server-2008

表是这样的

```
编号 A1 A2 A3 A4 A5 A6 A7 A8 A9
1 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是 是
2 是 是 是 空 空 空 空 空 空
3 耶耶耶耶耶耶耶耶耶耶 NULL

```

其中 ID 是主键。
我想连续获取最后一个非空值的列名，结果是这样的

```
编号最后
1 A7
2 A3
3 A8

```

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:50:19.530

尽管我对此模式存有疑虑，但请考虑这个“反向优先”条件：

```
select
  id,
  case
    -- first match terminates search
    when A9 is not null then 'A9'
    when A8 is not null then 'A8'
    when A7 is not null then 'A7'
    ..
    else null
  as lastNonNullColumn
from .. 
```

TSQL 中保证了评估的顺序（参见[CASE](http://msdn.microsoft.com/en-us/library/ms181765.aspx)），所以我们只是向后蠕动 :)

> 按指定顺序计算每个 WHEN 子句的 Boolean_expression。

此外，也许可以使用[`UNPIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)（或`ROLLUP`[?] 或 manual `UNION`）。也就是说，将一组固定的列名转换为值，然后这是一个简单的查询..也就是说，如果表被规范化，这可以很容易地完成:-)

```
select
  id,
  max(colName) as lastNonNullColumn
from <<normalized_derived_table>>
where colValue is not null
group by id 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:10:01.073

这个怎么样？它使用一个`UNPIVOT`来转换数据，然后您将选择不为空/空白的最大最后一个值。

```
;with cte as
(
  select id
    , last
    , value
    , row_number() over(partition by id order by last) rn
  from
  (
      select id, 
          isnull(a1, '') as a1, 
          isnull(a2, '') as a2, 
          isnull(a3, '') as a3, 
          isnull(a4, '') as a4, 
          isnull(a5, '') as a5, 
          isnull(a6, '') as a6, 
          isnull(a7, '') as a7, 
          isnull(a8, '') as a8, 
          isnull(a9, '') as a9
      from t
  ) x
  unpivot
  (
      value
      for last in (a1, a2, a3, a4, a5, a6, a7, a8, a9)
  ) u
) 
select id, max(last) as last
from cte
where value != ''
group by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b7562/8)

编辑，实际上它不需要那么复杂：

```
select id
  , max(last) last
from
(
    select id, a1, a2, a3, a4, a5, a6, a7, a8, a9
    from t
) x
unpivot
(
    value
    for last in (a1, a2, a3, a4, a5, a6, a7, a8, a9)
) u
group by id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/b7562/12)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:55:02.440

这是一个伪 UNPIVOT 版本，可让您指定列的顺序（如果列名不按位置排序）。

```
SELECT
   T.ID,
   X.Name
FROM
   T
   CROSS APPLY (
      SELECT TOP 1 Name FROM (
         VALUES (1, 'A1', T.A1), (2, 'A2', T.A2), (3, 'A3', T.A3), (4, 'A4', T.A4),
         (5, 'A5', T.A5), (6, 'A6', T.A6), (7, 'A7', T.A7), (8, 'A8', T.A8),
         (9, 'A9', T.A9)
      ) X (Pos, Name, Col)
      WHERE Col IS NOT NULL
      ORDER BY X.Pos DESC
   ) X; 
```

然而，虽然实际 IO 和 CPU 并没有比自然 UNPIVOT 方法差多少（执行计划看起来很糟糕，但实际服务器影响并没有差多少），但这并不是表现最好的。@pst 给出的简单 CASE 表达式是。

假设列名*可以*按原样排序，则 UNPIVOT 可以进一步简化：

```
SELECT ID, Max(Last)
FROM T UNPIVOT (Value FOR Last IN (A1, A2, A3, A4, A5, A6, A7, A8, A9)) U
GROUP BY ID; 
```

最后，这是我想到的一个疯狂版本，不幸的是它的性能比其他版本差：

```
SELECT
   T.ID,
   Coalesce(
      (SELECT 'A9' WHERE T.A9 IS NOT NULL),
      (SELECT 'A8' WHERE T.A8 IS NOT NULL),
      (SELECT 'A7' WHERE T.A7 IS NOT NULL),
      (SELECT 'A6' WHERE T.A6 IS NOT NULL),
      (SELECT 'A5' WHERE T.A5 IS NOT NULL),
      (SELECT 'A4' WHERE T.A4 IS NOT NULL),
      (SELECT 'A3' WHERE T.A3 IS NOT NULL),
      (SELECT 'A2' WHERE T.A2 IS NOT NULL),
      (SELECT 'A1' WHERE T.A1 IS NOT NULL)
   ) LastNotNullColumn
FROM T
ORDER BY ID 
```

从理论上讲，引擎可以提出一个看起来更像 CASE 表达式版本的计划，但事实并非如此。该计划看起来非常疯狂，每个 select 语句有一个表对象，并且占用大约两倍于 CASE 表达式的 CPU。

我测试的所有版本都使用相同数量的逻辑读取，只是 CPU 不同。我使用了 15,000 行来测试。

最后，我不能凭良心不警告您您的架构可能不是最好的。虽然我不知道你的数据是什么，但你试图找到最后一个可能表明这些列代表了某个生命周期的时间或阶段——这不是正确的数据库设计。相反，存储未透视的数据。当您需要一个旋转的结果集时，您可以 PIVOT。而且，查询每个 ID 的最新值变得更简单了！

# c# - 在 INSERTION 后检查 SQL Server CE 数据库以进行应用程序评估

> ID：11801352
> 
> 赞同：0
> 
> 时间：2012-08-03T18:33:28.587
> 
> 标签：c#, sql-server-ce

我有以下脚本用于插入 SQL Server CE 数据库

```
SqlCeConnection Con = new SqlCeConnection();
Con.ConnectionString = (@"Data Source=|DataDirectory|\Database.sdf;Password=Password;");
Con.Open();
SqlCeCommand Query = new SqlCeCommand("INSERT INTO Users(ID,Name,FName,Address,MCode,MNum,Amount) VALUES(@ID,@Name,@FName,@Address,@Code,@Num,@Amount)", Con)
Query.Parameters.AddWithValue("@ID", ID + 1);
Query.Parameters.AddWithValue("@Name", NBox.Text);
Query.Parameters.AddWithValue("@FName", SOBox.Text);
Query.Parameters.AddWithValue("@Address", AdBox.Text);
Query.Parameters.AddWithValue("@Code", Convert.ToInt32(MCode.Text));
Query.Parameters.AddWithValue("@Num", Convert.ToInt32(MNum.Text));
Query.Parameters.AddWithValue("@Amount", Convert.ToInt32(AmBox.Text));

int rowsEffected=Query.ExecuteNonQuery();

MessageBox.Show(rowsEffected.ToString()); 
```

插入消息框后显示`rows affected=1`这意味着数据已成功插入数据库我使用 VC# 2010 作为文件复制属性将数据库文件移动到`Debug/Bin/Release`文件夹，当我检查项目文件夹中的数据库文件时，它是空的，因为`Bin/Release`文件在解决方案之外可见资源管理器，所以我无法检查它我想检查我的数据库文件以进行评估，即数据是否正确插入其中

请告诉我如何做到这一点

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:11:28.600

这是你的问题：

> ...文件复制属性将 DB 文件移动到 Debug/Bin/Release 文件夹，当我检查项目文件夹中的数据库文件时，它是空的

项目文件夹中的数据库文件是原始的、未更改的源数据。当您构建应用程序时，Visual Studio 会将原始项目文件复制（而不是移动）到您的输出文件夹（Bin/Release 或其他）。您的代码将数据插入副本，而不是原始未更改的数据。

要“检查您的数据库文件以进行评估”，您必须检查副本，而不是原始的、未更改的源文件。您可以从插入数据的同一个应用程序，`DataDirectory`如果它在同一个输出文件夹中也使用该属性的测试应用程序执行此操作，或者您可以在输出目录中打开文件（在您的情况下为 Bin/release） .

> ... Bin/Release 文件在解决方案资源管理器之外可见 ...

是的，因为它不是您项目的一部分。它是输出数据，就像您调用`Stream.Write`or一样`Console.Writeline`。原始的、未更改的源数据是您的源的一部分，就像您的 .cs 文件一样。它不会交付给用户或通过运行您的应用程序进行更改。您必须在 Bin/Release 或其他任何内容中测试副本。

# objective-c - 使用 DFS 生成迷宫

> ID：11801354
> 
> 赞同：0
> 
> 时间：2012-08-03T18:33:32.297
> 
> 标签：objective-c, depth-first-search, maze

我正在尝试在 Objective-C 中生成一个迷宫。我已经构建了一个图并连接了所有边（我认为）。但是，我在尝试制作真正的迷宫时遇到了困难。

这是我正在使用的代码：

```
- (void)visitFromCurrentPoint:(GridPoint *)point fromPreviousVertex:(Vertex *)prev {

if ([grid allVerticiesVisited]) {
    NSLog(@"done!");
    return;
}
Vertex *cur = [grid vertexAtPoint:point];
[grid setVertextVisited:cur];
NSArray *borderingVerticies = [grid verticiesBorderingPoint:point];
Vertex *randomVertex;
int random = arc4random()%[borderingVerticies count];
randomVertex = [borderingVerticies objectAtIndex:random];
if (![randomVertex visited]) {
    [cur.edgeList removeObject:prev];
    [prev.edgeList removeObject:cur];
    [self visitFromCurrentPoint:[randomVertex point] fromPreviousVertex:cur];
}
else {
     [self visitFromCurrentPoint:point fromPreviousVertex:cur];
}
} 
```

但是，这不起作用，我得到堆栈溢出。你能看出我做错了什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:30:16.470

这是由于递归过多造成的。尝试迭代解决方案。

澄清一下：每个函数调用都使用一些堆栈空间来传递参数和/或保存将在被调用函数范围内更改的 CPU 寄存器的状态。如果你正在做真正的深度递归，你最终可能会使用所有的堆栈空间，从而导致崩溃。

迭代解决方案通过将系统堆栈替换为动态大小的数组或队列来避免该问题。这使用系统内存而不是堆栈空间。

（基本上是一种递归解决方案，您在函数中使用队列或数组来代替通过递归函数调用获得的自动簿记）

另一种选择可能是广度优先递归与深度优先。

# ios - 用户的 AppleID 可以用于存储自定义数据吗？

> ID：11801359
> 
> 赞同：2
> 
> 时间：2012-08-03T18:34:01.640
> 
> 标签：ios, in-app-purchase, storekit

是否可以存储与用户的 AppleID 相关的自定义数据，例如有关激活产品的信息？

手头的任务是一个带有数字内容的应用程序，可以通过应用程序内购买来购买。内容也可作为硬拷贝（在应用程序之外）提供；图书的购买者将收到图书的优惠券代码，以在应用程序中免费激活此内容。

据我所知，没有免费的应用内购买，所以我们必须自己跟踪激活的优惠券（仅设备存储是不够的——例如当用户升级他的设备时）。我们希望避免引入某种用户帐户来存储这些数据，因为其他任何地方都不需要它。因此这个想法：有没有办法使用用户的 AppleID 来关联这些数据？

或者，您能想出一种不会给用户带来太多麻烦的不同方法吗？

任何想法和想法都非常感谢，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:46:15.433

您可以使用 iCloud 存储用户拥有的任何数据。对你来说，将是他拥有的所有优惠券。我相信，这将是一个简单的文本。iCloud 自带 iOS 本身.. 所以你不需要让你的用户创建一个帐户。

# javascript - 如何防止注册多个重复事件？

> ID：11801362
> 
> 赞同：1
> 
> 时间：2012-08-03T18:34:15.097
> 
> 标签：javascript, jquery, jquery-1.4

我有一个 .js 库正在将 mouseup 事件注册到 DOM 元素的情况。DOM 元素被移除和替换，事件被重新注册。这会导致注册两个重复的事件。例如，这里是一个复制品：

**请注意：**这是使用 jQuery 版本 1.4.4

```
<div id="top">
 <div id="nested">
  <div id="stranded">
   Alien Code
  </div>
 </div>
</div>​

<script type="text/javascript">
 function addLive(){
  $("#stranded").live("mouseup",
   function (e) {
    var node = document.getElementById("stranded");
    var nodeCopy = $(node).clone(true)[0];
    var tar  = document.getElementById("nested");
    tar.appendChild(nodeCopy);
   }
  );
 }
 addLive();
 addLive();
</script> 
```

此外，这是一个 jsFiddle：http: [//jsfiddle.net/3zbtK/](http://jsfiddle.net/3zbtK/)

`addLive`如果已经存在鼠标事件，如何防止第二次调用注册鼠标事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:37:29.807

您可以尝试在注册更新更好的事件处理程序之前删除事件处理程序。

否则，如果您对默认处理程序有疑问，则可以忽略它们。

我认为您正在寻找的是 preventDefault

```
<script>
$("a").click(function(event) {
  event.preventDefault();
  $('<div/>')
    .append('default ' + event.type + ' prevented')
    .appendTo('#log');
});
</script> 
```

你也可以测试一下

例如，单击的锚点不会将浏览器带到新的 URL。我们可以使用 event.isDefaultPrevented() 来确定该方法是否已被由该事件触发的事件处理程序调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:37:52.443

您并没有准确地告诉我们您的编辑限制是什么以及您可以更改哪些代码。

最简单的方法是停止使用`.live()`并将事件直接附加到对象上。然后，当对象被移除时，事件处理程序也会被移除。

如果您因为其他原因不能这样做，那么您还要跟踪是否已经安装了事件处理程序，无论是在全局变量中还是`.data()`在`#stranded`元素上使用 jQuery。

PS`.live()`已被弃用，您应该对所有版本的 jQuery 使用`.on()`(jQuery 1.7+) 或`.delegate()`(jQuery before 1.7)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:36:39.887

你为什么要调用 addLive() 函数两次？

删除一个，它会工作:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:10:08.373

```
function addLive(){
 $("#stranded").die("mouseup");
 $("#stranded").live("mouseup",
  function () {
   var node = document.getElementById("stranded");
   var nodeCopy = $(node).clone(true)[0];
   var tar  = document.getElementById("nested");
   tar.appendChild(nodeCopy);
 }
);
} 
```

# django - 连接功能不正确的 Django ~Q。漏洞？

> ID：11801363
> 
> 赞同：1
> 
> 时间：2012-08-03T18:34:19.787
> 
> 标签：django, django-queryset, django-orm, django-q

我们遇到了一个关于 Django 中 Q 对象求反的非常奇怪的问题。让我们以足球为例：

```
class Team(models.Model):
    id = UUIDField(primary_key=True)

class Player(models.Model):
    id = UUIDField(primary_key=True)
    name = models.CharField(max_length=128)
    team = models.ForeignKey(Team)
    touchdowns = models.IntegerField() 
```

有10个团队。

有100名球员，每队10名。每支球队都有一名名叫“乔”的球员。一支球队中有一名“乔”获得了 5 次达阵。所有其他乔的得分为 1 次达阵。有 8 支球队，每名球员只得分 1 次达阵。

我想要拥有一个名叫乔的球员至少得分 3 次达阵的球队。

```
models.Team.objects.filter(Q(player__name="Joe", player__touchdowns__gte=3)).count() 
```

应该返回 One。否定应该返回 9（其他 9 支没有名为 Joe 且至少有 3 次达阵的球队）：

```
models.Team.objects.filter(~Q(player__name="Joe", player__touchdowns__gte=3)).count() 
```

而是返回该团队中每个人的达阵次数少于 3 (8) 的任何团队。

我哪里错了？请注意，我们对此的实际应用要复杂得多，因此我们需要使用带否定的 Q 对象，我们不能使用 Exclude。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:31:30.367

找出这些差异发生原因的最佳方法是调查生成的查询：`django-debug-toolbar`附带一个`debugsqlshell`命令，该命令在使用 Django 查询集 API 后打印发送到数据库的实际查询。对于这些测试，我使用了`User`带有 join on 的模型`Group`。我也注意到所选对象的计数不同，因此从表面上看，它似乎与您的用例有很好的相关性。

**User.objects.filter(~Q(username='jdoe', groups__name='Awesome Group'))**

```
SELECT "auth_user"."id",
       "auth_user"."username",
       "auth_user"."first_name",
       "auth_user"."last_name",
       "auth_user"."email",
       "auth_user"."password",
       "auth_user"."is_staff",
       "auth_user"."is_active",
       "auth_user"."is_superuser",
       "auth_user"."last_login",
       "auth_user"."date_joined"
FROM "auth_user"
WHERE NOT ("auth_user"."username" = 'jdoe'
           AND "auth_user"."id" IN
             (SELECT U1."user_id"
              FROM "auth_user_groups" U1
              INNER JOIN "auth_group" U2 ON (U1."group_id" = U2."id")
              WHERE (U2."name" = 'Awesome Group'
                     AND U1."user_id" IS NOT NULL))) LIMIT 21 
```

**User.objects.exclude(Q(username='jdoe', groups__name='Awesome Group'))**

```
SELECT "auth_user"."id",
       "auth_user"."username",
       "auth_user"."first_name",
       "auth_user"."last_name",
       "auth_user"."email",
       "auth_user"."password",
       "auth_user"."is_staff",
       "auth_user"."is_active",
       "auth_user"."is_superuser",
       "auth_user"."last_login",
       "auth_user"."date_joined"
FROM "auth_user"
INNER JOIN "auth_user_groups" ON ("auth_user"."id" = "auth_user_groups"."user_id")
INNER JOIN "auth_group" ON ("auth_user_groups"."group_id" = "auth_group"."id")
WHERE NOT (("auth_user"."username" = 'jdoe'
            AND "auth_group"."name" = 'Awesome Group')) LIMIT 21 
```

这里的区别在于 INNER JOIN 发生的位置。该`Q`对象在第一个示例中导致 INNER JOIN，*然后*由于`~`. 的情况下`exclude`，否定与 INNER JOIN 并行发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:33:13.497

Сheck 使用 Q 和 ~Q 在数据库中查询：

```
>>> print models.Team.objects.filter(Q(player__name="Joe", player__touchdowns__gte=3)).query
>>> print models.Team.objects.filter(~Q(player__name="Joe", player__touchdowns__gte=3)).query 
```

并用两个 Q 对象对其进行测试：

```
>>> print models.Team.objects.filter(Q(player__name="Joe") & Q(player__touchdowns__gte=3)).query
>>> print models.Team.objects.filter(~Q(player__name="Joe") & ~Q(player__touchdowns__gte=3)).query 
```

# xcode - 如何使用@selector？调用另一个方法

> ID：11801368
> 
> 赞同：0
> 
> 时间：2012-08-03T18:34:36.503
> 
> 标签：xcode

我试图在我的方法中调用一个`viewDidLoad`方法。我怎样才能做到这一点？我进行了快速搜索，我找到了`@selector`. 我以前从未使用过它，任何人都可以给我一个快速的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:40:27.567

您不一定需要[选择器](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocSelectors.html)来调用方法，您可以直接调用它，例如调用不带参数的 someMethod 方法 someObject 您可以执行以下操作：

```
[anObject someMethod]; 
```

或在当前对象上调用 someMethod ，您可以使用[self](http://useyourloaf.com/blog/2011/02/08/understanding-your-objective-c-self.html)：

```
[self someMethod]; 
```

如果您确实需要通过选择器调用方法，请使用 NSObject 的 performSelector: 方法（或“performSelector”系列中的另一种方法）：

```
[anObject performSelector:@selector(someMethod)]; 
```

# asp.net - 'nvarchar' 附近的不正确语法必须在 @num 附近声明标量变量

> ID：11801373
> 
> 赞同：0
> 
> 时间：2012-08-03T18:34:44.590
> 
> 标签：asp.net, gridview, formview

大家好，我创建了一个将 Formview 绑定到 Gridview 的项目。所有其他命令似乎都可以正常工作，除非我尝试更新表单视图时出现标题错误。这是我的代码。

```
 <EditItemTemplate>
         num:

         <asp:TextBox ID="TextBox1" runat="server" 
             Text='<%# Bind("[num]") %>' />
         <br />   
         Job Title:
         <asp:TextBox ID="Job_TitleTextBox" runat="server" 
             Text='<%# Bind("[Job Title]") %>' />
         <br />
         Status:
         <asp:TextBox ID="StatusTextBox" runat="server" Text='<%# Bind("Status") %>' />
         <br />
         Department:
         <asp:TextBox ID="DepartmentTextBox" runat="server" 
             Text='<%# Bind("Department") %>' />
         <br />
         Date Position Available:
         <asp:TextBox ID="Date_Position_AvailableTextBox" runat="server" 
             Text='<%# Bind("[Date Position Available]") %>' />
         <br />
         Position Type:
         <asp:TextBox ID="Position_TypeTextBox" runat="server" 
             Text='<%# Bind("[Position Type]") %>' />
         <br />
         Job Duties:
         <asp:TextBox ID="Job_DutiesTextBox" runat="server" 
             Text='<%# Bind("[Job Duties]") %>' />

         <br />
         Qualifications:
         <asp:TextBox ID="QualificationsTextBox" runat="server" 
             Text='<%# Bind("Qualifications") %>' />
         <br />
         Physical Demands:
         <asp:TextBox ID="Physical_DemandsTextBox" runat="server" 
             Text='<%# Bind("[Physical Demands]") %>' />
         <br />
         Closing Date:
         <asp:TextBox ID="Closing_DateTextBox" runat="server" 
             Text='<%# Bind("[Closing Date]") %>' />
         <br />
         Hours Per Pay Period:
         <asp:TextBox ID="Hours_Per_Pay_PeriodTextBox" runat="server" 
             Text='<%# Bind("[Hours Per Pay Period]") %>' />
         <br />
         <asp:LinkButton ID="UpdateButton" runat="server" CausesValidation="True" 
             CommandName="Update" Text="Update" />
         &nbsp;<asp:LinkButton ID="UpdateCancelButton" runat="server" 
             CausesValidation="False" CommandName="Cancel" Text="Cancel" />
     </EditItemTemplate>

    UpdateCommand="UPDATE [career_posting] SET [Job Title] = @Job_Title, [Status] = @Status, [Department] = @Department, [Date Position Available] = @Date_Position_Available, [Position Type] = @Position_Type, [Job Duties] = @Job_Duties, [Qualifications] = @Qualifications, [Physical Demands] = @Physical_Demands, [Closing Date] = @Closing_Date, [Hours Per Pay Period] = @Hours_Per_Pay_Period WHERE [num] = @num">

     <UpdateParameters>
         <asp:Parameter Name="Job_Title" Type="String" />
         <asp:Parameter Name="Status" Type="String" />
         <asp:Parameter Name="Department" Type="String" />
         <asp:Parameter Name="Date_Position_Available" Type="String" />
         <asp:Parameter Name="Position_Type" Type="String" />
         <asp:Parameter Name="Job_Duties" Type="String" />
         <asp:Parameter Name="Qualifications" Type="String" />
         <asp:Parameter Name="Physical_Demands" Type="String" />
         <asp:Parameter Name="Closing_Date" Type="String" />
         <asp:Parameter Name="Hours_Per_Pay_Period" Type="String" />
         <asp:Parameter Name="num" Type="Int32" />
     </UpdateParameters>
 </asp:SqlDataSource> 
```

我不知道从这里去哪里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:06:44.673

[这是此参考](http://dfwitdepartment.com/incorrect-syntax-near-nvarchar-must-declare-scalar-variable/)的摘录：

> 检查 SqlDataSource 对象中是否有任何已拉取或重命名的字段，其中包含空格。'_' 下划线可以正常工作，但是执行类似“Select [somename] as [Some Name] FROM [names] WHERE [id]=@id”这样的查询将导致上述错误

尝试用下划线替换所有空格（例如 Job_Title）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:12:05.890

删除 Bind 语句中字段名称周围的方括号，例如

```
 <asp:TextBox ID="Job_TitleTextBox" runat="server" 
         Text='<%# Bind("Job Title") %>' /> 
```

只有在 UpdateCommand 的查询部分才真正需要括号，以允许字段名称中存在空格。括号会在 ASP.NET 构建页面时生成的后台代码中引起各种奇怪的混淆。希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T19:46:15.887

我通过将表中字段的所有名称更改为一个单词或用下划线分隔的单词（例如 first_name），然后更改更新代码以使用新名称，从而在我的项目中修复了此错误。

# c# - 在 Web 服务的情况下如何从 WSDL 生成代理类

> ID：11801376
> 
> 赞同：14
> 
> 时间：2012-08-03T18:34:52.933
> 
> 标签：c#, web-services

假设当我只有 wsdl 文件时，我该如何创建代理类来调用 webservice 各种方法。与所有类及其属性和方法相关的 web 服务将如何在我的 c# 应用程序中公开。任何人都可以帮助指导我。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T18:41:35.357

您需要使用[ServiceModel Metadata Utility Tool](http://msdn.microsoft.com/en-us/library/aa347733.aspx)或 Visual Studio 的[添加服务引用对话框](http://msdn.microsoft.com/en-us/library/bb386382.aspx)，以便为您要与之通信的服务生成客户端代理。生成的代理将提供抽象服务契约的类，您可以对客户端应用程序进行编程以与这些类进行交互。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-03T18:42:23.330

有一个实用程序，它与 Visual Studio 一起提供（我认为是从 2005 年开始），称为[wsdl.exe](http://msdn.microsoft.com/en-us/library/7h3ystb6%28v=vs.71%29.aspx)

它是命令行，可用于生成代理。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T18:50:30.873

您可以通过命令行使用 WSDL.exe 工具。

IE`WseWsdl3 WSDLPath /out:MyProxyClass.cs`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-06T03:57:32.857

如果 WseWsdl3.exe 无法创建代理类，还是有办法的。

如果您可以在 IIS 中将您的服务作为常规 ASP.NET Web 应用程序运行，它会创建临时 ASP.NET 文件，其中代理类会为您很好地生成。

您可以在文件夹中找到它：

> C:\Windows\Microsoft.NET\Framework\vMAJOR.MINOR.BUILD\Temporary ASP.NET Files\YOUR_WEB_APP。

有一些随机名称的子文件夹，转到最近的一个，看起来像“App_WebReferences.XXXX.0.cs”。

# macos - 硬件温度报告

> ID：11801382
> 
> 赞同：0
> 
> 时间：2012-08-03T18:35:15.987
> 
> 标签：macos, applescript

我正在尝试找到一种无需下载程序即可将硬件温度报告给我的方法，我知道有很多可以显示但不报告给网络上的远程位置的方法。

我找到了一个苹果脚本，我可以对其进行修改以使其正常工作，但我目前正停留在第 1 步，让脚本运行。

下面是我找到的脚本。我一直在标记行出现错误，幸运线 13。错误只是说无法获得第 17 项。

```
set the_result to (do shell script "ioreg -c IOHWSensor | grep -vE '\\{|\\}|\\+\\-o'")'s paragraphs

set all_display to ""
repeat with i from 0 to 16

    set jump to 3
    set the_location to item (3 + (jump * i)) of the_result
    set the_location to characters 41 thru ((count of characters of the_location) - 1) of the_location as string
    set the_type to item (4 + (jump * i)) of the_result
    set the_text to item (2 + (jump * i)) of the_result as string
    **set the_text to characters 44 thru (count of characters of the_text) of the_text as string --(length of item 2 of the_result)**
    set the_type to characters 37 thru ((count of characters of the_type) - 1) of the_type as string
    if the_type = "temperature" then
        set all_display to all_display & "
" & the_location & ": " & ((the_text / 65536) * (9 / 5)) + 32 & " F" as string
    end if
end repeat

display dialog all_display 
```

我又在玩这个，终于得到了完整的错误错误：无法将“| | | | | \"version\" = 2" 的字符 44 到 41 转换为类型字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-06T17:22:42.310

我相信这个信息是由`IOHWSensor`via报告的`ioreg`。这个单线对我有用：

```
echo $((`ioreg -c IOHWSensor | grep "current-value" | grep -oE [0-9]+` / 65536)) 
```

除法`65536`可能取决于硬件。一些 mac 将值存储为 10 的倍数，其他 2 的幂等。除以正确的数字后，我相信结果始终以 ºC 为单位。

进一步阅读： [http ://www.cminow.org/ioreg_perl.html](http://www.cminow.org/ioreg_perl.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T05:59:10.913

脚本在“ioreg -c IOHWSensor”命令的输出中搜索单词“temperature” - 但如果您从命令行执行该命令并 grep 查找单词“temperature”，则将没有。至少我没有在我的系统上看到它。我的是 OsX 10.7 你有什么？

# powershell - Powershell：在脚本块外调用函数

> ID：11801384
> 
> 赞同：0
> 
> 时间：2012-08-03T18:35:26.477
> 
> 标签：powershell, concurrency

我正在阅读这篇关于将函数传递到脚本块以用于作业的帖子：

[Powershell start-job -scriptblock 无法识别同一文件中定义的函数？](https://stackoverflow.com/questions/8750813/powershell-start-job-scriptblock-cannot-recognize-the-function-defined-in-the-s)

我通过将函数作为变量传递来了解它的工作原理，它适用于简单的示例。那么现实世界的解决方案呢，有没有更优雅的方法来处理这个问题？

我有用于将更改部署到供应商软件的脚本。它读取一个 xml，告诉它如何导航环境并执行各种任务，即：映射驱动器、停止服务、调用 perl 安装脚本。我想为脚本提供一个参数以允许它同时运行，这样如果 perl 脚本需要 5 分钟（并不罕见）并且您正在推出 11 台服务器，您无需等待脚本运行一小时。

我只是要发布一些片段，因为完整的脚本有点冗长。日志功能：

```
function Log
{
    Param(
    [parameter(ValueFromPipeline=$true)]
    $InputObject,
    [parameter()]
    [alias("v")]
    $verbosity = $debug    
    )       

    $messageIndex = [array]::IndexOf($verbosityArray, $verbosity)
    $verbosityIndex = [array]::IndexOf($verbosityArray, $loggingVerbosity)

    if($messageIndex -ge $VerbosityIndex)
    {
        switch($verbosity)
        {
            $debug {Write-Host $verbosity ": " $InputObject}
            $info  {Write-Host $verbosity ": " $InputObject}
            $warn  {Write-Host $verbosity ": " $InputObject -ForegroundColor yellow}
            $error {Write-Host $verbosity ": " $InputObject -ForegroundColor red}
        }        
    }
} 
```

这是另一个调用 log 函数的函数：

```
function ExecuteRollout
{
    param(
    [parameter(Mandatory=$true)]
    [alias("ses")]
    $session,
    [parameter(Mandatory=$true)]
    $command
    )

    #invoke command    
    Invoke-Command -session $session -ScriptBlock {$res = cmd /v /k `"$args[0]`"} -args $command

    #get the return code from the remote session
    $res = Invoke-Command -session $session {$res}
    Log ("Command Output: "+$res)    
    $res = [string] $res        
    $exitCode = $res.substring($res.IndexOf("ExitCode:"), 10)
    $exitCode = $exitCode.substring(9,1)     
    Log ("Exit code: "+$exitCode)

    return $exitCode
} 
```

最后是我主要的一个片段，这样你就可以了解发生了什么。$target.Destinations.Destination 将包含部署将转到的所有服务器和有关它们的相关信息。我删除了一些变量设置和日志记录以使其更紧凑，所以是的，您会看到从未定义过的引用变量：

```
#Execute concurrently
$target.Destinations.Destination | %{
    $ScriptBlock = {

        $destination = $args[0]

        Log -v $info ("Starting remote session on: "+$destination.Server)
        $session = New-PSSession -computerName $destination.Server               

        $InitializeRemote -session $session -destination $destination

        #Gets a little tricky here, we need to keep the cmd session so it doesn't lose the sys vars set by env.bat
        #String everything together with &'s    
        $cmdString = $destDrive + ": & call "+$lesDestDir+"data\env.bat & cd "+$rolloutDir+" & perl ..\JDH-rollout-2010.pl "+$rollout+" NC,r:\les & echo ExitCode:!errorlevel!"
        Log ("cmdString: "+$cmdString)
        Log -v $info ("Please wait, executing the rollout now...")
        $exitCode = $ExecuteRollout -session $session -command $cmdString    
        Log ("ExitCode: "+$exitCode)

        #respond to return code from rollout script
        $HandleExitCode -session $session -destination $destination -exitCode $exitCode

        $CleanUpRemote -session $session -destination $destination            
    }
    Start-Job $ScriptBlock -Args $_
} 
```

因此，如果我采用链接中的方法，我会将所有函数转换为变量并将它们传递给脚本块。目前，我的日志函数将默认登录 DEBUG，除非详细参数显式传递为不同的详细程度。如果我将我的函数转换为变量，但是 powershell 似乎不喜欢这种语法：

```
$Log ("Print this to the log") 
```

所以我想我现在需要一直使用这个参数：

```
$Log ("Print this to the log" -v $debug 
```

所以底线看起来我只需要将我的所有函数作为变量传递给脚本块，并在我调用它们时更改一些格式。这不是一个巨大的努力，但我想知道在我开始破解我的脚本之前是否有更好的方法。感谢您的输入和查看，我知道这是一篇很长的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:06:21.610

我开始了另一篇关于将参数传递给存储为变量的函数的帖子，这个问题的答案也解决了这个问题。该帖子可以在这里找到：

[Powershell：将参数传递给存储在变量中的函数](https://stackoverflow.com/questions/11804792/powershell-passing-parameters-to-functions-stored-in-variables)

简短的回答是，如果您将所有函数包装在一个块中并将其存储在一个变量中，您可以使用 Start-Job 的初始化脚本参数来提供所有函数。

例子：

```
# concurrency
$func = {
    function Logx 
    {
        param(
        [parameter(ValueFromPipeline=$true)]
        $msg
        )    
        Write-Host ("OUT:"+$msg)
    }
}

# Execution starts here
cls
$colors = @("red","blue","green")
$colors | %{
    $scriptBlock = 
    {   
        Logx $args[0]
        Start-Sleep 9        
    } 

    Write-Host "Processing: " $_
    Start-Job -InitializationScript $func -scriptblock $scriptBlock -args $_
}

Get-Job

while(Get-Job -State "Running")
{
    write-host "Running..."
    Start-Sleep 2
}

# Output
Get-Job | Receive-Job

# Cleanup jobs
Remove-Job * 
```

# php - 使用 html 搜索和 php post 选择 WHERE 条件。返回空白表

> ID：11801388
> 
> 赞同：3
> 
> 时间：2012-08-03T18:35:30.433
> 
> 标签：php, mysql, select, phpmyadmin, where

这项任务非常简单。使用 html 表单，将姓氏发布到连接到 myAdmin 数据库的 php 代码中，并从 html 搜索返回与发布的姓氏表单相关联的名字和姓氏。我已经仔细检查了我的数据库以及我正在使用的连接 php。该信息在数据库中，我的 connection.php 文件对于访问和操作同一数据库的其他文件来说效果很好。无论如何，这是我的html代码：

```
<html>
<body>
<form action="where.php" method="post">
Lastname: <input type="text" name="lastname" />
<input type="submit" name="search" />
</form>
</body>
</html> 
```

和我的 php 代码：

```
<?php
include('connection.php');

$sql = "SECLECT * FROM PERSONS WHERE LastName ='$_POST[lastname]'";
$result = mysql_query($sql);
?>

<table border='1'>
<tr>
    <td>Firstname</td>
    <td>Lastname</td>
</tr>

<?php
while($row = mysql_fetch_array($result))
{
?>
  <tr>
  <td><?php echo $row['FirstName'] ?></td>
  <td><?php echo $row['LastName'] ?></td>
  </tr>

<?php
}
?>
</table>

<?php
mysql_close($con);
?> 
```

任何人都知道为什么当我搜索有效的姓氏时，我会得到一个只有标题但没有值的表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:45:28.650

您在查询中输入“SECLECT”。是`SELECT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:02:28.310

尝试将您的查询更改为 -

```
$sql = "SELECT * FROM PERSONS WHERE LastName like '%$_POST[lastname]%'"; 
```

如果它显示了一些结果，那么您在完全匹配的情况下可能会遇到问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:40:12.330

```
 <td><?php echo $row['FirstName'] ?></td>
  <td><?php echo $row['LastName'] ?></td> 
```

两者都需要;的（分号），例如：

```
<td><?php echo $row['FirstName']; ?></td>
<td><?php echo $row['LastName']; ?></td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:51:56.677

尝试这个：

```
$sql = ("SELECT * FROM PERSONS WHERE LastName ='".$_POST['lastname']."'"); 
```

也看看这个。我知道这是一个 android/json 教程，但是如果您使用该`print`函数，请进行更多调整并将您的查询更改为没有变量的内容。

```
$sql = ("SELECT * FROM PERSONS WHERE LastName ='Doe'"); 
```

然后，您可以通过导航到此“测试”页面进行测试。结果将显示在屏幕上。这可能有助于查明您的问题

# .net - HttpWebRequest+Exception=我如何获取标题/正文？

> ID：11801390
> 
> 赞同：0
> 
> 时间：2012-08-03T18:35:35.360
> 
> 标签：.net, httpwebrequest, webclient

我正在尝试使用 HttpWebRequest 调试一次在蓝月亮中发生的异常。但是，我不知道如何获取正文或标题。我在 SO 上看到了一个答案，但这显然是不正确的，因为您不能将异常投射到他正在考虑的课程中。

我尝试抓取响应流并得到一个动词错误。我用谷歌搜索了“msdn httpwebrequest 异常获取标头”，但它主要讨论了 httpwebrequest 中的标头并列出了可能的异常......不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:37:36.027

如果你得到一个`WebException`，你可以使用[`WebException.Response`](http://msdn.microsoft.com/en-us/library/system.net.webexception.response.aspx). 目前尚不清楚您实际上遇到了什么异常，或者这是否是您在其他地方已经看到的答案......如果这对您没有帮助，请提供更多信息。

# asp.net - 如何从 asp.net 子函数调用 javascript 函数？

> ID：11801392
> 
> 赞同：1
> 
> 时间：2012-08-03T18:35:41.033
> 
> 标签：asp.net, vb.net

所以经过大量搜索，我发现为了触发 javasript 函数，我们可以这样做：

```
<script>
function foobar()
  {
   alert("foobar");
  }
</script>

Dim strScript As String = "<script language='javascript' id='myClientScript'>foobar();</script>"

Page.RegisterStartupScript(“callTest”,strScript) 
```

但是， Page.RegisterStartupScript 似乎只在 Page_load 函数下工作......

当我把它放在一个 Sub 中时，像这样：

```
Sub Test

Dim strScript As String = "<script language='javascript' id='myClientScript'>foobar();</script>"

Page.RegisterStartupScript(“callTest”,strScript)

End Sub 
```

这行不通。当我将上述功能链接到一个 asp 按钮时。我触发了按钮，但没有任何反应。那么是否有条件地从 asp.net 触发 javaScript 函数？从一个子函数而不是每个page_load？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T14:39:32.607

下面是我正在使用的 JavaScript 函数，并已在我工作的众多 Web 应用程序中使用过。在这个特定示例中，我将客户端 IP 地址与我们网络上的预定 IP 地址进行比较，如果客户端 IP 不匹配，我会显示一个消息框，然后通知用户他们的特定计算机终端不允许提出这些具体要求。

```
Dim ipAdd as string = nothing
ipAdd = Request.ServerVariables.Item("REMOTE_ADDR")
If ipAdd <> "###.###.###.###" then
ClientScript.RegisterClientScriptBlock(Page.GetType, "Script", "<script language='javascript'>alert('This terminal is not permitted to submit requests.');</script>")
End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:39:09.867

你应该代表这条线

```
Dim strScript As String = "<script language='javascript' id='myClientScript'>foobar();</script>" 
```

作为

```
Dim strScript As String
strScript = "<script language='javascript' id='myClientScript'>foobar();</script>" 
```

如果您想为 asp.net 按钮单击调用 javascript，您可以将`OnClientClick`属性与客户端功能一起使用`OnClientClick="buttonClick()"`：-

```
<asp:button id="Button1" 
  runat="server" 
  OnClientClick="buttonClick()" 
  Text="Click!" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:03:23.107

使用 RegisterStartUpscript 方法注入的 javascript 在页面首次加载时执行。当您需要在

```
Type t = this.GetType();
if (!ClientScript.IsClientScriptBlockRegistered(t, "myClientScript"))
{
   ClientScript.RegisterClientScriptBlock(t,"myClientScript", sb.ToString());
} 
```

不确定它是否可以在更新面板中工作

# c# - 数组类型属性的MVC模型DisplayFormat？

> ID：11801401
> 
> 赞同：1
> 
> 时间：2012-08-03T18:36:22.280
> 
> 标签：c#, asp.net-mvc, data-annotations

我想知道我是否有这样的模型类：

```
public class Contact
{
    public string Name { get; set; }
    public string[] Emails { get; set; }
} 
```

在我的视图中，我使用 DisplayFor，因此它确实显示了所有电子邮件，但只是一个字符串。

```
@Html.DisplayFor(modelItem => item.Emails) 
```

john@gmail.comjohn@hotmail.comjohn@microsoft.com

是否有某种 DisplayFormat 属性可以应用于 Emails 属性，以便显示单个联系人的所有电子邮件，用逗号分隔，如下所示：

**john@gmail.com、john@hotmail.com、john@microsoft.com**

在我看来，我真的不想使用 foreach(var email in Model.Email) 来进行这个简单的操作。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:48:00.197

如何将另一个字符串属性添加到 ViewModel 以表示字符串数组的逗号分隔版本并在视图中使用它

```
public class Contact
{
    public string Name { get; set; }
    public string[] Emails { get; set; }
    public string EmailsCommaSeperated 
    { 
      get
      {
        return String.Join(",",Emails);
      }
    }
} 
```

并将其用作

```
@Html.DisplayFor(modelItem => item.EmailsCommaSeperated) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T18:16:50.757

您将需要创建一个自定义助手。

本视频教程将为您提供帮助： [http ://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-views&mode=live&clip=6&course=aspdotnet-mvc3-intro](http://pluralsight.com/training/players/PSODPlayer?author=scott-allen&name=mvc3-building-views&mode=live&clip=6&course=aspdotnet-mvc3-intro)

# unix - UNIX：将文件从子文件夹移动到另一个文件夹

> ID：11801402
> 
> 赞同：4
> 
> 时间：2012-08-03T18:36:23.170
> 
> 标签：unix

我有一个包含文件夹和子文件夹的目录。例如，这些子文件夹包含`.xml`文件。

我想将所有`.xml`文件复制到一个单独的文件夹中。我的 UNIX 生锈了；任何和所有的帮助将不胜感激。谢谢，亚当

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T18:41:03.020

您的意思是从所有子文件夹中复制所有 .xml 文件，而不必指定子文件夹名称？

```
find . -name \*.xml -exec /bin/cp {} /dest/dir/ \; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T18:38:38.620

试试这个命令（当然需要更改），例如：

```
cp source_dir/project1/*.xml dest_dir/new_project2/summer2012 
```

请注意，当它们保持不变时，您不必在目标处指定文件名。

有关更多信息，请参阅[cp 手册页](http://linux.die.net/man/1/cp)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T18:40:08.913

```
find -iname '*.xml' -exec mv \{\} /dest/directory \; 
```

# android - 使用 MoPub 和 AdMob 配置广告系列

> ID：11801403
> 
> 赞同：0
> 
> 时间：2012-08-03T18:36:24.643
> 
> 标签：android, admob, mopub

我们正在将 Android 应用程序从 Google Ad 迁移到 MoPub。我已经成功集成了 android sdk 并且它的加载很好。

在 MoPub 登录时，我在网络中添加了 AdMob，并尝试创建一个广告系列以将所有广告从网络路由到应用程序。但是当我添加新的广告系列时，我得到 2 个下拉选项，只有保证和促销。应该有第三个“网络”。

我是否缺少基本配置步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:53:38.763

我还没有弄清楚，但是一旦我配置了 InMobi，广告就开始起作用了。网络活动可能默认运行，不需要专门配置。我还没有从 MoPub 的人那里得到同样的确认（稍后再报告）。

另一个转折是，每次您将广告网络添加到列表中时，您还需要将该库包含在您的客户端中（显然）。所以我不得不将 GoogleAdMobAdsSdk.jar 包含到我的 libs 文件夹中。

请记住，GoogleAdMobAdsSdk 6.0 版本需要在清单文件中为 AdActivity 的 configChanges 中的 screenSize 和 minimumScreenSize。所以如果你想支持 Android 2.3.3，你需要从[这里](http://search.4shared.com/postDownload/RpC3ihqM/GoogleAdMobAdsSdk-411.html)下载 GoogleAdMobAdsSdk 第 4 版。

# objective-c - 否定存储在 NSNumber 中的布尔值

> ID：11801405
> 
> 赞同：3
> 
> 时间：2012-08-03T18:36:29.570
> 
> 标签：objective-c, boolean, nsnumber

我有一个 NSNumber 的托管对象，它只是一个布尔值。当用户单击一个按钮时，我想切换它。

```
self.item.completed = [NSNumber numberWithBool:![self.item.completed boolValue]]; 
```

有没有我想念的更清洁（或者可能只是更紧凑）的方式？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T19:10:50.387

对于产生否定值的过程，您几乎无能为力，但您可以通过将代码隐藏在一个*类别*中来使调用它的语法看起来不那么笨重：

```
@interface NSNumber ( NegateBoolean )
-(NSNumber)negateBool;
@end

@implementation NSNumber ( NegateBoolean )
-(NSNumber)negateBool{
    return [NSNumber numberWithBool:![self boolValue]];
}
@end 
```

现在您可以像这样使用新方法：

```
self.item.completed = [self.item.completed negateBool]; 
```

您还可以设置一个`NSArray`with inversions，并按如下方式使用它：

```
NSArray *inversions = [NSArray arrayWithObjects:[NSNumber numberWithBool:YES], [NSNumber numberWithBool:NO], nil];
self.item.completed = [inversions objectAtIndex:[self.item.completed boolValue]]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T18:40:33.540

`self.item`您可以考虑为一个属性（可能称为）设置一个“包装器”getter 和 setter `completedValue`，它处理`BOOL`s 而不是 NSNumbers。可能看起来有点像：

```
- (BOOL)completedValue {
    return [self.completed boolValue];
}

- (void)setCompletedValue:(BOOL)value {
    self.completed = [NSNumber numberWithBool:value];
} 
```

然后你的电话就变成了：

```
self.item.completedValue = !self.item.completedValue; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T16:48:11.583

在 NSNumber 上不使用其他类别方法的另一种方法是使用三元运算符和[NSNumber 布尔文字](http://clang.llvm.org/docs/ObjectiveCLiterals.html)：

```
self.item.completed = self.item.completed.boolValue ? @NO : @YES; 
```

这应该适用于任何最新版本的 Xcode，但特别是它需要 LLVM v4.0 或 clang v3.1。

# php - PHP PDO UPDATE 不更新数据

> ID：11801407
> 
> 赞同：1
> 
> 时间：2012-08-03T18:36:30.687
> 
> 标签：php, pdo

我很难使用`PDO`. 这是我尝试过的两个选项。然而，没有人真正更新过数据库。

查询一：

```
$dateLastLoggedIn = date("Y-m-d  H:i:s");
$username = mysql_real_escape_string($_POST['User']);
$sth = $dbh->prepare("UPDATE users SET dateLastLoggedIn = ? WHERE username = ?");
$sth->execute(array($dateLastLoggedIn,$username)); 
```

`print_r($sth->queryString);`只是打印出来`UPDATE users SET dateLastLoggedIn = ? WHERE username = ?`

查询 2：

```
$dateLastLoggedIn = date("Y-m-d  H:i:s");
$username = mysql_real_escape_string($_POST['User']);
$sql = "UPDATE users SET dateLastLoggedIn = '".$dateLastLoggedIn."' WHERE username = '".$username."'";
$sth = $dbh->prepare($sql);
$sth->execute(); 
```

`print_r($sth->queryString);`打印出来`UPDATE users SET dateLastLoggedIn = '2012-08-03 13:36:32' WHERE username = 'testuser'`

第二个选项生成正确的查询，但实际上并没有更新数据。我可以手动运行生成的脚本并且它可以工作，但不能通过`execute()`. 有什么我做错了吗？我还是新手`PDO`，所以这可能是一个简单的修复。

**已解决：请参阅我在已接受答案下的最后评论。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:42:10.287

获取连接：函数 getConnection(){ $dbhost="127.0.0.1"; $dbuser="应用程序"; $dbpass="密码"; $dbname="abc"; $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); }

```
try {
  $dbh = getConnection();

  $sth = $dbh->prepare("UPDATE users SET dateLastLoggedIn = :dateLastLoggedIn  WHERE username = :username ");
  $sth->bindParam('dateLastLoggedIn',$dateLastLoggedIn);
  $sth->bindParam('username',$username );
  $sth->execute();
  $dbh = null; // after done
} catch(PDOException $e) {// simple exception handling
        error_log($e->getMessage(), 3, '/var/tmp/php.log');
        echo '{"error":{"text":'. $e->getMessage() .'}}'; 
} 
```

另外，尝试将其包装在 try catch 中以查看错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:41:19.560

> print_r($sth->queryString); 只是打印出 UPDATE users SET dateLastLoggedIn = ? WHERE 用户名 = ?

这就是 PDO 准备好的查询会发生的事情。

如果您使用的是 PDO，`mysql_real_escape_string`将无法正常工作。完全没有。它需要通过现有的连接`mysql_connect`。您的用户名值实际上是空白的。

# json - Tomcat7中JSON的Jersey错误

> ID：11801421
> 
> 赞同：0
> 
> 时间：2012-08-03T18:37:11.597
> 
> 标签：json, jersey, tomcat7

我使用 Grizzly 容器部署了一个 rest，并使用下面的代码发送了一个 JSON 对象。一切都很好。

```
ClientResponse response = wr.type(MediaType.APPLICATION_JSON).post(ClientResponse.class, cliente);
String body = response.getEntity(String.class);
System.out.println("status="+response.getStatus() + "\n" + body); 
```

当我在 Tomcat 7 中部署相同的其余示例时，此代码停止工作并显示以下消息：

**org.codehaus.jackson.map.JsonMappingException：没有找到适合类型[简单类型，类 javax.xml.bind.JAXBElement<crud.Cliente>] 的构造函数：无法从 JSON 对象实例化（需要添加/启用类型信息？ )**

我真的不知道为什么....它适用于 Grizzly 嵌入容器而不适用于 tomcat？有谁知道这是怎么回事？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T09:30:21.310

也许`Grizzly`使用它自己的序列化器/反序列化器。尝试向`Cliente`类添加一个空的构造函数：

`public Cliente() { };`

# database - 具有不同地址线数量的地址的数据模型

> ID：11801423
> 
> 赞同：1
> 
> 时间：2012-08-03T18:37:14.697
> 
> 标签：database, database-design, data-modeling, datamodel

我的问题：

我将如何在后端和前端实现数据库设计，以将不同数量的地址行（例如 AddressLine1、AddressLine2、AddressLine3 等）容纳到无穷大，同时保持直观的前端用户体验。我希望这能够最大限度地提高数据库开发后合并文档的清洁度和易用性。有些地址只有一条街道线，而其他地址甚至可以有五条甚至更多。

背景：

我对数据建模和数据库设计非常陌生。我还不了解数据库建模对前端表单的设计方式以及特定设计可能带来的问题的影响。因此，我不确定我所寻求的是否是一个大错误。

我正在为一家律师事务所设计一个案件管理数据库。我们计划创建一个单独的地址表，并在人员/实体和地址之间建立多对多的关系——即，许多人/实体可能有许多地址，而同一个地址可能属于许多人/实体。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:45:30.457

通常，对于地址，数据不会通过行标准化。因此，地址表将只有 AddressLine1 和 AddressLine2 之类的字段。

较大的地理信息（例如：城市、州、国家、邮政编码）将存储在地址记录的单独字段中。

这样做的原因是很实际的。地址通常是打印出来的，并且可用的打印空间有限。例如，如果有四行，您有姓名、地​​址行 1、地址行 2 和城市/州/国家/地区/邮政编码。

如果您真的需要存储无限数量的行，您可以使用 AddressLines 表来完成。AddressLines 表将包含字段，例如：

*   AddressId -- 它所属的地址记录
*   电话号码
*   行内容

然而，这似乎是矫枉过正。

您更大的问题是标准化地址。你有没有想过？（你知道：“101 6th Avenue”、“101 Sixth Ave.”和“101 Avenue of the Americas”在纽约市都是同一个地址。）

# macos - 适用于 Mac OS X 10.8 Mountain Lion 的内核调试工具包

> ID：11801429
> 
> 赞同：1
> 
> 时间：2012-08-03T18:37:31.297
> 
> 标签：macos, osx-lion, osx-mountain-lion

在哪里可以找到适用于 Mac OS X 10.8 Mountain Lion 的内核调试工具包？Apple 网站上没有指向 10.8 Kernel Debug Kit 的链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T15:24:12.410

苹果还没有发布，还在等待中。

编辑：出局 (29/08)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T20:18:21.093

在[https://developer.apple.com/downloads/index.action](https://developer.apple.com/downloads/index.action)检查

[√] 开发者工具

* * *

*Apple Developer* 2012-11-01 发布的OS X 10.8.2 build 12C60*内核调试工具包*比 2012-09-19 发布的 OS X 10.8.2 版本晚了大约六周。

假设等待期是惯例。六周是否比平均时间长，我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T04:30:38.370

[下载链接](http://adcdownload.apple.com/Mac_OS_X/kernel_debug_kit_10.8.3_build_12d78/kernel_debug_kit_10.8.3_12d78.dmg)

请确保您拥有 Apple ID。

# powershell - Import-PSSession：已为“%”命令跳过代理创建，因为 PowerShell 无法验证其名称是否安全

> ID：11801433
> 
> 赞同：10
> 
> 时间：2012-08-03T18:37:45.393
> 
> 标签：powershell, powershell-2.0, powershell-remoting

我有一个 Sharepoint 场设置，我正在使用远程 powershell 从域中的 Windows 7 机器连接到我的应用程序/搜索服务器之一。客户端和应用程序服务器都具有 powershell 2，其执行策略设置为无限制并启用了 psremoting。此外，我将 cmdlet 作为域管理员帐户运行。

我可以使用以下 cmdlet 创建与远程服务器的会话：

```
$Session = New-PSSession -ConfigurationName "Microsoft.PowerShell" -ConnectionUri "http://app01-spl1:5985/wsman/" -Authentication "Kerberos" 
Import-PSSession $Session -AllowClobber 
```

但是，当我导入会话时，出现以下错误：

```
Import-PSSession : Proxy creation has been skipped for '%' command, because PowerShell couldn't verify its name as safe.
At line:1 char:17
+ Import-PSSession <<<<  $Session -AllowClobber
    + CategoryInfo          : InvalidData: (:) [Import-PSSession], InvalidOperationException
    + FullyQualifiedErrorId : ErrorSkippedUnsafeCommandName,Microsoft.PowerShell.Commands.ImportPSSessionCommand
Import-PSSession : Proxy creation has been skipped for '?' command, because PowerShell couldn't verify its name as safe.
At line:1 char:17
+ Import-PSSession <<<<  $Session -AllowClobber
    + CategoryInfo          : InvalidData: (:) [Import-PSSession], InvalidOperationException
    + FullyQualifiedErrorId : ErrorSkippedUnsafeCommandName,Microsoft.PowerShell.Commands.ImportPSSessionCommand
Import-PSSession : Could not resolve remote alias 'ise'.
At line:1 char:17
+ Import-PSSession <<<<  $Session -AllowClobber
    + CategoryInfo          : OperationTimeout: (:) [Import-PSSession], ArgumentException
    + FullyQualifiedErrorId : ErrorCouldntResolveAlias,Microsoft.PowerShell.Commands.ImportPSSessionCommand 
```

谁能帮助解决这个错误？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T14:02:49.953

我通过简单地输入远程会话而不是导入它来解决这个问题。然后，我能够添加安装在远程计算机上的 SharePoint 管理单元并运行我的脚本。

```
$Session = New-PSSession -ConfigurationName "Microsoft.PowerShell" -ConnectionUri "http://app01-spl1:5985/wsman/" -Authentication "Kerberos" 
Enter-PSSession $Session
Add-PSSnapin Microsoft.SharePoint.PowerShell

<Cmdlets or script goes here>

Exit-PSSession
Remove-PSSession -ID $Session.ID
[GC]::Collect() 
```

另一种选择是使用带有 ScriptBlock 参数的 Invoke-Command cmdlet，如下所示。

```
$Session = New-PSSession -ConfigurationName Microsoft.PowerShell -ConnectionUri "http://app01-spl1:5985/wsman/" -Authentication Kerberos
Invoke-Command -Session $Session -ScriptBlock { Add-PSSnapin Microsoft.SharePoint.PowerShell }

Invoke-Command -Session $Session -ScriptBlock { <Your cmdlet here.> }

Remove-PSSession -ID $Session.ID
[GC]::Collect() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:55:08.230

错误是您正在尝试从远程服务器导入整组命令。不太清楚你为什么允许clobber。

就个人而言，我只是导入相关的 SHarePoint 模块而不是所有远程工作区。

导入有用吗？？

# architecture - 是否应该将一个主干.js 模型委托保存到另一个模型？

> ID：11801439
> 
> 赞同：0
> 
> 时间：2012-08-03T18:38:05.687
> 
> 标签：architecture, backbone.js

考虑如何对用户与一组可定制项目的交互进行建模，这似乎是一个很常见的情况。我想知道是否有一种传统的架构可以用主干来表示这一点。 ![类依赖示例](../Images/fecf7a0ce32af95ef9699950cfeb5e94.png)

该图描述了我们正在设计的几个视图和模型之间的关系。ItemNavigator 视图允许用户查看其集合中的所有 UserItem。每个 UserItem 存储一个（共享）项目的用户自定义属性。用户在 ItemEditor 视图中查看项目并自定义其属性。问题是，Item.save() 方法将自定义属性传递给 UserItem 模型进行保存是否有意义？

一个示例项目是允许选择尺寸和颜色的衬衫样式。UserItem 将引用衬衫样式（项目位于“/items/shirts/polo”）并存储 {color: "red", size: "L"}。

这种方法看起来很有趣，部分原因是项目资源将是可缓存的，并且对所有用户都是通用的。

# php - 使用正则表达式从字符串中提取信息

> ID：11801440
> 
> 赞同：1
> 
> 时间：2012-08-03T18:38:08.720
> 
> 标签：php, regex

我想使用正则表达式提取“软件”的信息信息及其值“2”。请查看 PHP 中的以下字符串。

`$str = "http://abcfastdirectory.com vs http://www.weblinkstoday.com/detail/link-116406.htm ::-(1)**abcfastdirectory(1)**allows(1)**create(1)**directories(1)**professional(1)**((1)**abcfastdirectory(1)**allows(1)**club(1)**contact(1)**create(2)**details(1)**directories(4)**directory(3)**for(3)**it(1)**our(1)**page(1)**professional(2)**software(2)**"`

如何使用 PHP 中的正则表达式从上述字符串中提取信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:44:59.067

如果您仅在“software(2)”之后，则应执行以下操作：

```
preg_match('/software\((?<value>\d+)\)/', $str, $m);
print $m['value']; 
```

但是，如果您想匹配喜欢的每个部分，`<word>(<num>)`可以使用以下内容：

```
preg_match_all('/(?<key>\w+)\((?<value>\d+)\)/i', $str, $m);
foreach ($m['key'] as $i => $key) {
     print $key.' => '.$m['value'][$i]."\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:44:24.427

```
$software = (int)preg_replace('/.*software\((\d+)\).*/','$1',$str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:45:02.670

试试这个：

```
$pattern = '/\*\*software\([0-9]+\)\*\*/';
preg_match($pattern, $str, $matches);

// your value will be stored in $matches[1] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:00:04.497

你可以试试这个，看看结果是否是你要找的：

```
<?php

$str = "http://abcfastdirectory.com vs http://www.weblinkstoday.com/detail/link-116406.htm ::-(1)**abcfastdirectory(1)**allows(1)**create(1)**directories(1)**professional(1)**((1)**abcfastdirectory(1)**allows(1)**club(1)**contact(1)**create(2)**details(1)**directories(4)**directory(3)**for(3)**it(1)**our(1)**page(1)**professional(2)**software(2)**";

$matches = array();

preg_match_all('#\*\*(.*?)\((\d+)\)\*\*#',$str,$matches, PREG_SET_ORDER );

print_r($matches); 
```

# command-line - 如何在 CentOS 中退出 nl 命令？

> ID：11801448
> 
> 赞同：4
> 
> 时间：2012-08-03T18:38:54.607
> 
> 标签：command-line, command, centos

我真的是 CLI 的菜鸟，所以请帮助我。我不小心在 CentOS 中输入了 nl，现在我被困在这个列表中。我如何退出nl？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:43:27.120

Ctrl-C 通常可以用来杀死 linux 中的终端命令。

编辑： Ctrl-D 应该用于正确终止 nl。Ctrl-C 只是杀死应用程序的一般方法。

# html - 设置固定宽度的表格，在 HTML 页面上改变文本长度

> ID：11801453
> 
> 赞同：2
> 
> 时间：2012-08-03T18:39:23.190
> 
> 标签：html

我正在尝试使代码生成下面的图像，但我的表格宽度似乎有些问题......有什么修复吗？我仍然是 HTML 的 n00b，谢谢一百万！将投票并接受100％解决我的问题的解决方案

![预期结果的图像](../Images/b4d7551f6102678dbbfd38f5b09c3e35.png)

表代码：

```
 <table  style="table-layout: fixed width="100%" cellspacing="0" cellpadding="2"><tr>

        <td colspan="1" width="250"></td>
        <td colspan="2" width="10"><span>Postanschrift</span></td>
    <td colspan="3" width="5"><input type="radio" value="F" <span>&#160;Nein&#160;</span></td>
    <td colspan="2" width="5"><input type="radio" value="F" <span>&#160;Ja</span></td>
        <td colspan="1" width="15"></td>
    <td colspan="2" width="10"><span>SMS / MMS</span></td>
    <td colspan="3" width="5"><input type="radio" value="F" <span>&#160;Nein&#160;</span></td>
    <td colspan="2" width="5"><input type="radio" value="F" <span>&#160;Ja</span></td>

 </table>
 <table  style="table-layout: fixed width="100%" cellspacing="0" cellpadding="2"><tr>

        <td colspan="1" width="250"></td>
        <td colspan="2" width="10"><span>Telefon</span></td>
    <td colspan="3" width="5"><input type="radio" value="F" <span>&#160;Nein&#160;</span></td>
    <td colspan="2" width="5"><input type="radio" value="F" <span>&#160;Ja</span></td>
        <td colspan="1" width="15"></td>
    <td colspan="2" width="10"><span>E-Mail</span></td>
    <td colspan="3" width="5"><input type="radio" value="F" <span>&#160;Nein&#160;</span></td>
    <td colspan="2" width="5"><input type="radio" value="F" <span>&#160;Ja</span></td>          
 </table> 
```

这是预期代码结果的图像......非常混乱：S![在此处输入图像描述](../Images/775a8235b654a9f3d46116b8da8e7ea1.png)

如您所见，Postanschrift 和 Telefon 之前的缩进工作得很好......但是后来的列宽不再像“预期结果”的图像中那样固定

编辑 1：使用 WebDevNewbie 的代码片段，结果如下：

![在此处输入图像描述](../Images/ee956bbb8c9492eaed30b550f48f2dd6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:51:10.337

样式标签`<table>`不完整，让你的桌子用你的宽度固定就是把它压在一起的原因。删除`table-layout: fixed`大部分解决了它，而且`<td>`由于空格，我还不得不加宽 SMS / MMS，它将它们推到不同的行。

更改所有这些的宽度将是一个不错的选择。

```
<table style="width:100%; table-layout: fixed;" cellspacing="0" cellpadding="2">
    <tr>
        <td width="100%" style="background-color: #EEEEEE;"></td>        
        <td width="100px">
            <span>Postanschrift</span>
        </td>
        <td width="60px" style="background-color: #EEEEEE;">
            <input type="radio" value="F"/>
            <span>&#160;Nein&#160;</span>
        </td>
        <td width="40px">
            <input type="radio" value="F"/>
            <span>&#160;Ja</span>
        </td>
        <td width="30px" style="background-color: #EEEEEE;"></td>
        <td width="100px">
            <span>SMS / MMS</span>
        </td>
        <td width="60px" style="background-color: #EEEEEE;">
            <input type="radio" value="F"/>
            <span>&#160;Nein&#160;</span>
        </td>
        <td width="45px">
            <input type="radio" value="F"/>
            <span>&#160;Ja</span>
        </td>
    </tr>
</table> 
```

编辑：另外，`colspans`在这种情况下不需要所有这些。如果您希望 a`<td>`跨越多个列，则这些是不需要的。还有一个不需要的空单元格......

编辑：我明白你为什么使用那个空白单元格，一个垫片。我已经更新了表格，第一个单元格现在的宽度为 100%，这将允许扩展，并且我增加了其他宽度..

编辑：关闭`<input>`标签，并格式化以提高可读性..

# asp.net - 在 Visual Studio 2010 的项目引用中找不到目标框架 ASP.NET 4.0 的 system.web.UI 命名空间

> ID：11801456
> 
> 赞同：1
> 
> 时间：2012-08-03T18:39:58.447
> 
> 标签：asp.net, visual-studio-2010

虽然我收到错误“使用 System.Web.UI”作为命名空间未找到。我试图通过添加参考来弄清楚。但不幸的是，在 .NET 选项卡中，我找不到 System.Web.UI 组件，而其他组件在那里。如何解决问题？

![在此处输入图像描述](../Images/d2e2ba975be54c1ca4cbb2d24fa252f3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:42:30.443

编辑：好的，我原来的答案是基于问题的原始版本......

下一步：您是否参考了`System.Web.dll`其中至少包含许多类的程序集`System.Web.UI`？

# ios - 在嵌套的 NSManagedObjectContext 中缓慢删除和保存

> ID：11801459
> 
> 赞同：5
> 
> 时间：2012-08-03T18:40:06.307
> 
> 标签：ios, core-data, nsmanagedobjectcontext

在我的应用程序中，我有一个“主”`NSPrivateQueueConcurrencyType`上下文，它作为`NSMainQueueConcurrencyType`视图控制器依赖和传递的上下文的父级。我想这样做是为了利用异步保存（这个应用程序使用 iCloud 和 Core Data 并且保存做了很多工作来导出无处不在的日志）。[设置类似于本文](http://www.cocoanetics.com/2012/07/multi-context-coredata/)底部提到的 Zarra 方法

应用内的保存通常如下所示：

```
[context save:nil];
[context.parentContext performBlock:^{
     [context.parentContext save:nil];
}]; 
```

这似乎适用于小型编辑/更新，但我对删除许多对象时看到的内容感到困惑（例如，删除具有数百个与之相关的任务对象的项目）。

在这种情况下，保存是异步的，但看起来主线程进入了信号量等待情况（如我暂停调试器时所见）并被有效阻止（我无法在 UI 中滚动），直到后台私有上下文完成节省。

实际上，我只是注意到滑动删除单个对象会导致明显的延迟，尽管这种异步保存模式，所以看起来应用程序中的所有删除都很慢。

如果，或者，我分配一个新的`NSPrivateQueueConcurrencyType`上下文，将其持久存储协调器设置为 AppDelegate 中的主 PSC，并执行删除和保存，它仍然做了很多工作，但 UI 永远不会被阻塞（但我不得不担心关于协调上下文，在主要上下文中重新获取）。

任何想法我可能做错了什么，或者你也看到过这种行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T20:46:21.953

删除可能需要很长时间。他们必须修复所有的关系。进行大量删除时，您应该做几件事。

首先，为什么在后台发生删除时您的 UI 会阻塞？因为该后台线程确实忙于执行删除块，并且您的 UI 正在尝试获取以在删除发生时更新数据。

运行实际工作的线程由 FIFO 队列管理，因此如果你给它一个大任务来执行，它将无法执行其他任务，直到长时间运行的任务完成。

您可能正在使用 FRC，它试图在对象和关系发生变化时获取更新。

如果你有一个大的删除，你可能想改变你的 fetch 以便它只在删除发生时查看当前 MOC 的数据。删除完成后，您可以告诉 fetch 请求返回到 store 本身的查询。

此外，当删除大量内容时，最好在一个单独的线程中，在自动释放池中以小块的形式进行。从该后台线程中，一次删除小块，然后使用`performBlockAndWait`. 这样，您就不会使用删除请求加载工作线程的队列，并且您的 UI 线程可以处理其请求。更快速。

或者，您还可以使用 GCD 的高级功能来拥有一个高优先级和低优先级队列，用于将工作提供给工作线程。您可以将写入放在低优先级队列上，将读取放在高优先级队列上。

# database - 使用 Oracle 的 SFTP？

> ID：11801463
> 
> 赞同：0
> 
> 时间：2012-08-03T18:40:15.793
> 
> 标签：database, oracle, ftp, sftp

> **可能重复：**
> [如何使用 Oracle pl/sql 将文件写入 sftp？](https://stackoverflow.com/questions/9209920/how-to-write-a-file-into-sftp-using-oracle-pl-sql)

我在这里阅读了几篇文章和过去的帖子，但想看看 Oracle 是否在他们最近的版本中包含了这个特性。

**Oracle 数据库是否有任何 SFTP 库或函数或实用程序？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:38:42.190

问题 - **Oracle 数据库是否有任何 SFTP 库或函数或实用程序？**

答案 -**不。有 FTP，但没有 SFTP。**

# asp.net - DefaultConnection 和 members - localsqlserver 和 defaultconnection 之间的连接是什么

> ID：11801471
> 
> 赞同：4
> 
> 时间：2012-08-03T18:40:45.407
> 
> 标签：asp.net, entity-framework, asp.net-membership, connection-string

嗯......我真的无法理解这个。

在 web.config 我有：

```
<connectionStrings>
   <clear /> <!--- need this to prevent using LocalSqlServer from machine.config or somewhere becouse it is not present when when publish to hosting -->
   <add name="DefaultConnection" providerName="System.Data.SqlClient" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-Goaly-20120615111028;Integrated Security=SSPI" />  
</connectionStrings> 
```

和

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <!-- I think this line is telling asp.net that I want the membership working agains defaultconnection, and not LocalSqlServer connection????? -->
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership> 
```

但后来它抱怨：

```
The connection name 'LocalSqlServer' was not found in the applications configuration or the connection string is empty. 
```

当我在设置选项卡中使用来自 VS2012 RC 的发布时，我得到一个 ModelContext 和一个 DefaultConnection，那么这应该如何工作？

我想要的只是在与模型上下文创建的表相同的数据库中获取成员表。

这应该是如此oob，但我一定是在某种程度上过于复杂了。

谢谢你的帮助。

问候

拉尔西

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T05:40:56.383

windows机器上所有网站的默认设置都继承了2个配置文件的设置：machine.config和web.config，可以在目录Windows/Microsoft.NET/Framework（或64位的Framework64）/version中找到/配置。

以下是 machine.config 的默认版本的片段：

```
<system.web>
    <processModel autoConfig="true"/>
    <httpHandlers/>
    <membership>
        <providers>
            <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="LocalSqlServer" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="true" applicationName="/" requiresUniqueEmail="false" passwordFormat="Hashed" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="7" minRequiredNonalphanumericCharacters="1" passwordAttemptWindow="10" passwordStrengthRegularExpression=""/>
        </providers>
    </membership>
    <profile>
        <providers>
            <add name="AspNetSqlProfileProvider" connectionStringName="LocalSqlServer" applicationName="/" type="System.Web.Profile.SqlProfileProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
        </providers>
    </profile>
    <roleManager>
        <providers>
            <add name="AspNetSqlRoleProvider" connectionStringName="LocalSqlServer" applicationName="/" type="System.Web.Security.SqlRoleProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
            <add name="AspNetWindowsTokenRoleProvider" applicationName="/" type="System.Web.Security.WindowsTokenRoleProvider, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"/>
        </providers>
    </roleManager>
</system.web> 
```

因此，您的问题的答案是：建立对`LocalSqlServer`连接的依赖关系的是 machine.config。当您添加`<clear/>`标签作为此问题的其他答案建议时，您将删除对名为 的成员资格提供程序`AspNetSqlMembershipProvier`的引用，并随之删除对`LocalSqlServer`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T19:48:49.123

在以下帖子论坛中提到，[在](http://forums.asp.net/t/1163491.aspx/1)`</clear>`成员元素和角色管理器元素（如果存在于 web.config）中的连接字符串之前 添加标签将解决问题。

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
   <clear/> <!-- solves the issue -->    
   <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="DefaultConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership> 
```

您还可以使用 SqlMetal.exe 将成员表添加到现有数据库中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-03T19:55:38.117

在您的配置文件加载之前，已经注册了一个membershipprovider（在一个根配置文件中）。该membershipprovider 指向LocalSqlServer。

您需要删除第一个成员资格提供程序，这可以通过在添加一个提供程序之前清除所有提供程序来完成，就像您对连接字符串所做的那样。

在`<system.web>`配置部分中，在该部分内，在元素之前`membership/providers`添加一个元素。`<clear>``<add>`

# c# - 为什么从 c# 访问内存映射文件而不是从 c++ 访问内存映射文件时出现访问被拒绝异常

> ID：11801480
> 
> 赞同：7
> 
> 时间：2012-08-03T18:41:14.670
> 
> 标签：c#, c++, wcf, memory-mapped-files

我有一个使用命名管道的 WCF 服务。显然不使用 url 作为名称。它从 url 生成 GUID，然后将其存储在内存映射文件中。所以我写了一个 C++ 应用程序，它从内存映射文件中获取管道的名称，效果很好。现在我正在尝试制作从内存映射文件中获取管道名称的 ac# 应用程序。这是我正在使用的代码。

```
 private static string GetPipeName(string mappedFileName)
    {
        var mappedFile = MemoryMappedFile.OpenExisting(mappedFileName, MemoryMappedFileRights.Read);
        var bytes = new List<byte>();
        using (MemoryMappedViewStream s = mappedFile.CreateViewStream())
        {
            using (var b = new BinaryReader(s))
            {
                bytes = b.ReadBytes((int)b.BaseStream.Length).ToList();
            }

        }
        var sb = new StringBuilder();
        foreach (var b in bytes)
        {
            sb.Append(b.ToString("x2"));
            sb.Append(" ");
        }
        Console.WriteLine(sb.ToString());
        return sb.ToString();
    } 
```

在第一`using`条语句中，我得到一个 UnauthorizedAccessException，上面写着“访问路径被拒绝”。

我能够逐步完成并确认文件名与我在 c++ 应用程序中使用的文件名相同，并且在我使用 SysInternals 工具 Handle.exe 时显示

为什么 C# 应用程序会被拒绝访问？据我所知，两者都以同一用户身份运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:32:15.017

您需要使用以下内容

```
CreateViewAccessor(Int64, Int64, MemoryMappedFileAccess); 
```

# ios - 在嵌入式 YT IFrame 上禁用 iOS 弹性滚动

> ID：11801482
> 
> 赞同：1
> 
> 时间：2012-08-03T18:41:19.157
> 
> 标签：ios, iframe, air, youtube, stagewebview

我正在 Adob​​e AIR 中制作面向 iOS 4.0+ 和 Android 2.3+ 的应用程序。我尝试为嵌入式 YT 视频禁用 iOS 弹性滚动：当用户按下播放器的 IFrame 时，整个视频都会平移，我似乎找不到解决方法。

我尝试添加事件侦听器来防止这种行为，但它不起作用。

顺便说一句，我知道我无法真正控制 IFrame 中发生的事情。一个快速而肮脏的解决方案是将元素直接放在框架上，比如一个透明的画布或一个可以捕获事件的 div。一点也不理想，因为用户将无法按下播放器上的按钮。

有什么想法或建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T16:00:07.643

我找到了解决方案。

您需要访问 UIWebView（StageWebView 下的底层 iOS 实现）来禁用弹性滚动。

完成 Adob​​e Native Extension (ANE) 设置后，它就相对简单了。（在这里可以找到一个很棒的 ANE 向导/生成器[https://github.com/freshplanet/ANE-Wizard](https://github.com/freshplanet/ANE-Wizard)）

对于 iOS 5，它很简单：webView.scrollView.bounces = NO;

如果你想支持 iOS 4，它会变得有点复杂。你没有webView.scrollView的方便，所以需要手动找到这个视图。

一个同时处理 iOS 4 和 5 的 Objective-C 代码块是这样的：

```
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
if ([currSysVer compare:@"5.0" options:NSNumericSearch] != NSOrderedAscending) {
    // iOS 5 is straightforward
    webView.scrollView.bounces = NO;
} 
else {
  // iOS 4 requires a bit more of work
  UIScrollView *scrollView = nil;
  for (UIView *subview in [webView subviews]) 
  {
    if ([subview isKindOfClass:[UIScrollView class]]) {
      scrollView = (UIScrollView *)subview;
    }
  } 
  if (scrollView != nil) {
    scrollView.bounces = NO;
  }
} 
```

希望这可以帮助！

# ruby-on-rails - 用孩子序列化和反序列化 ActiveRecord 模型

> ID：11801484
> 
> 赞同：0
> 
> 时间：2012-08-03T18:41:27.900
> 
> 标签：ruby-on-rails, activerecord, deserialization

表单有很多条目。要序列化表单及其条目，我使用：

```
json = @form.to_json( { :only => Form.accessible_attributes.to_a, :include => {:entries => {:only => Entry.accessible_attributes.to_a}}}) 
```

表单和条目属性在 JSON 中时可以修改或删除。

要反序列化我使用（但不工作）：

```
@form = @form.from_json(json)
@form.save 
```

如何使用表单一次保存条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:27:51.163

必须将条目更改为条目属性：

```
json = @form.to_json( { :only => Form.accessible_attributes.to_a, :include => {:entries => {:only => Entry.accessible_attributes.to_a}}}).gsub('"entries":[{', '"entries_attributes":[{') 
```

# ruby-on-rails - Rails - 使用 2 个表进行分组并计数

> ID：11801485
> 
> 赞同：1
> 
> 时间：2012-08-03T18:41:30.013
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有以下模型：students、groups_by_student 和 groups。

一行学生表是city_id，所以我要显示一个html表

```
 Total      group1     group2     group3
city1         30         10         5         15
city2          2          0         0          2
city3         20         10        10          0
city4          5          0         5          0
city5         10          0         2          8 
```

这就是我所做的：

```
groups = Group.find([1,4,6]) #Array of groups id's

total = []
groups.each do |g|
  total << Student.joins(:groups_by_students).where(:groups_by_students => {:group_id => g.descendants}).count(:group => :city_id)
end

#I'm using AwesomeNestedSet gem, so g.descendants gives group children. 
```

所以现在我有一个包含 3 个哈希的数组，其中包含作为键的城市 ID 和作为值的学生总数，但现在我不确定如何在 html 表中呈现这些数据。

如何迭代每个“总”元素？还是有另一种获取此信息的方法？

提前致谢

哈维尔

**编辑：**

这是总数组

```
total = [
    {city1 =>10, city3 => 10},
    {city1 => 5, city3=>10, city4=>5, city5 => 2},
    {city1 => 15, city2 => 2}
] 
```

现在，如果该组没有值，我必须将每个 td 标签放在 html 表内的 0 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T01:42:21.310

这就是我所做的，可能会对您有所帮助：（这里的总值是最后一列）

```
<table>
<% i = 1%>
<% total = 0%>
<% city=""%>
<% 5.times do %>
<tr>
<% city = 'city'+ "#{i}" %>
<% @total.each do |hash| %>
<% if(hash[city].nil?)%>
<% hash[city] = 0 %>
<%end%>
<% total += hash[city].to_i %>
<td><%= hash[city] %></td>
<%end %>
<td> <%= total %></td>
<% total = 0 %>
<% i += 1 %>
</tr>
<%end%>
</table> 
```

这里的行是由城市而不是组控制的。因此，除了双循环之外，我找不到任何其他方式。如果您需要在第一列中打印该总数，然后在接下来的信息中显示其余信息，那么我认为您需要先显示总数，然后再次循环并显示每个组的城市值此外，为此您需要知道之前的城市数量，否则我们将不知道为特定组中的特定城市打印“0”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:49:54.897

我遍历了一个哈希数组，例如；

```
ary.each do |hash| puts "<tr>#{hash.keys} : #{hash.values}</tr>" end 
```

你能破解它以满足你的需要吗？恐怕你的问题并没有提供很多工作。

# android - Android中sharedUserId的唯一性

> ID：11801490
> 
> 赞同：3
> 
> 时间：2012-08-03T18:42:02.190
> 
> 标签：android, security

`sharedUserId`根据[Android 文档](http://developer.android.com/guide/topics/manifest/manifest-element.html)，如果您没有在 Android 中设置 a ，则会自动为应用程序分配一个唯一的。

但`sharedUserId`独特之处在哪里？它只是应用程序独有的吗，即应用程序`sharedUserId`在所有设备上都相同吗？这意味着您可以通过编程方式为一个安装找到它，并将该值用于第二个应用程序。

还是 ID 是每个设备上都不同的随机值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:06:18.927

> 但是 sharedUserId 以什么方式唯一呢？

所有 Linux 用户帐户都是唯一的。`android:sharedUserId`表示由相同签名密钥签名的 2+ 个应用程序应该共享一个 Linux 用户帐户。默认情况下，他们每个人都有自己的 Linux 用户帐户。

> 应用程序在所有设备上是否具有相同的 sharedUserId？

`android:sharedUserId`无论您选择使用它，它都具有相同的价值。但是，Linux 用户帐户对于不同的设备会有所不同。

> 还是 ID 是每个设备上都不同的随机值？

我不会说“随机”，因为我不知道用于选择数字的精确算法。

# android - Android NDK 中的 link.h 在哪里？

> ID：11801496
> 
> 赞同：0
> 
> 时间：2012-08-03T18:42:11.933
> 
> 标签：android, android-ndk, arm

我正在尝试使用 arm-linux-androideabi-g++ 编译一个简单的程序。我在我的程序中加入了这一行：

```
#include"link.h" 
```

它通过说**没有这样的文件或目录**来给出错误。*当我尝试搜索该文件时，我找不到它*。我已经搜索了整个 android-ndk 目录，但仍然找不到。如果android ndk中有任何此类文件，任何人都可以帮我找到该文件吗？

或者我可以使用`link.h`of`/usr/include/link.h`并以某种方式为 Android 修改它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T05:12:59.010

如果你在谈论 Bohem GC，那么你可以使用这个 link.h 文件，它适用于 Android：[http ://code.google.com/p/androidmono/source/browse/trunk/PlatformPatches/link.h](http://code.google.com/p/androidmono/source/browse/trunk/PlatformPatches/link.h)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:18:56.820

您必须编写一个`.mk`文件并将路径设置为您正在使用的标头。

阅读此内容以供参考：

[https://groups.google.com/forum/?fromgroups#!topic/android-ndk/-_scQd5leqo](https://groups.google.com/forum/?fromgroups#!topic/android-ndk/-_scQd5leqo)

# clojure - 如何从 minikanren / clojure-core.logic 中的一组可能值中进行选择？

> ID：11801502
> 
> 赞同：1
> 
> 时间：2012-08-03T18:42:48.670
> 
> 标签：clojure, scheme, clojure-core.logic, minikanren

如何表达`n`变量从一组`n`值中取不同值的约束？

例如，也许我想搜索表单的表达式

```
(op1 a (op2 b c)) 
```

具有最大值时，a、b 和 c 应为 1、2 和 3（按某种顺序），而 op1 和 op2 都可以是`* + - / exp`?

我可以看到如何`a`从（例如`1 2 3`通过使用）中获得价值。`conde`和 也是`b`如此`c`。但是那我如何排除平等呢？我是否需要遍历所有组合并明确排除它们？

显然我可以“手动”进行排除，但我想知道是否有更好（更有效）的方法，或者包含类似这样的东西的支持库（我对线性编程库有更多经验，通常他们有一堆解决这些常见情况的辅助函数）。

并将其推广到某些值可以出现一定次数的情况似乎会很麻烦......

现在我想一想，如何搜索最大值？有这方面的好书或笔记吗？！

[我正在使用 clojure，但我的理解是 clojure-core.logic 和 minikanren 几乎相同]

**更新**：任何阅读这个问题的人都在寻找一个好的介绍，请查看我在下面的评论中提到的[Alvis 论文。](http://www.schemeworkshop.org/2011/papers/Alvis2011.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:14:22.027

```
(run* [q] 
  (fresh [a b c]
    (== q [a b c])
    (fresh [x y z]
      (rembero a '(* + / - exp) x)
      (rembero b x y)
      (rembero c y z)))) 
```

# javascript - 无法使用 jQuery 在 html 中获取来自 REST Web 服务的 json 响应

> ID：11801503
> 
> 赞同：2
> 
> 时间：2012-08-03T18:42:49.583
> 
> 标签：javascript, jquery, asp.net, ajax, wcf-rest

我有一个来自 REST Web 服务的 JSON 响应，并希望使用 jQuery 将该数据绑定到 html。看起来它甚至没有点击我在 jquery 中提供的 web 服务 url。Url 工作正常，它在浏览器中为我提供 JSON 数据，但我使用的 jQuery 无法从中获取任何内容。我在这里粘贴我的代码，请让我知道是否有人可以提供帮助。在调试脚本时，它直接在 ajax 调用中出现错误部分。

```
<script type="text/javascript">

 $(document).ready(function () {
        GetData();

    });

    function GetData() {

        //  alert(textblock.value);
        $.ajax({
            type: "GET",
            url: "http://localhost:8092/api/Employees",
            data: "{'employeeId'= '" + 1234 + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                var results = $.parseJSON(msg.d);
                alert(msg);
                alert(results);
            },
            error: function (result) {
                alert('here');
                var tt = result.text;
                alert(tt);
            }
        });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:02:11.653

终于我现在可以获取数据了。我在 $.ajax 中添加了以下属性：

进程数据：假，异步：假，

# .net - 使用 SAP.NET 连接器调用 az 函数

> ID：11801505
> 
> 赞同：2
> 
> 时间：2012-08-03T18:43:07.977
> 
> 标签：.net, connector, sap-dotnet-connector, sap-r3

我有一个 Web 应用程序（使用 C# 和 .NET Framework 3.5 开发的 ASP.NET 应用程序），它使用 SAP.NET 连接器在标准 SAP R/3 安装上调用一些 BAPI。到目前为止一切正常。调用 BAPI 以在来自 Web 应用程序的几个 SAP 表中插入信息。

然而，今天客户要求向这些 SAP 表中添加更多数据。在与 SAP 团队进行审查后，他们得出结论，执行此类任务需要 Web 应用程序调用几个（数十个）不同的 BAPI。因此，他们决定创建一个“Z 函数”，该函数将采用许多参数并在需要的地方插入值。

由于我需要更改 Web 应用程序，因此需要我批准此操作。但是：1）我不知道 Z 函数是什么，2）不知道是否是 SAP.NET 连接器。为了解决1），我google了一段时间，但没有发现明显的结果。据我所知，Z 函数是 ABAP 程序员创建的自定义普通函数。至于 2)，我知道 SAP.NET 连接器可以调用 BAPI 和远程函数调用或 RFC。但是我不确定是否可以通过 RFC 调用 Z 函数。

所以这就是我卡住的地方。对此问题的任何帮助（让我知道 Z 函数是什么，它与 RFC 有何不同，或者它是否可以从 SAP.NET 连接器调用）将不胜感激，并将赢得我永远的感激之情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T07:44:56.397

“Z”函数仅表示该函数是由客户创建的，而不是由 SAP 创建的。名称“Z 函数”是指所有客户对象的名称必须以 Y 或 Z 开头（保证避免与 SAP 的命名空间冲突）。

这与是否可以通过 RFC 调用函数完全**不同。**为了让您能够连接到它，您的 SAP 团队所要做的就是确保他们将其标记为启用远程功能的功能模块 - 如果他们知道您需要从 webapp 调用它，那么他们应该已经这样做了。

# r - 使用 TraMineR 使用时间日记数据

> ID：11801511
> 
> 赞同：6
> 
> 时间：2012-08-03T18:43:24.560
> 
> 标签：r, traminer

我正在尝试使用 R 中的 TraMineR 使用时间日记数据（美国时间使用调查）进行序列分析。我将数据作为 SPELL 数据（id、开始时间、停止时间、事件），但在尝试时收到以下错误将其转换为 STS 或 SPS 数据：

> as.matrix.data.frame(subset(data, , 2)) 中的错误：dims [product 0] 与对象 [9] 的长度不匹配

我相信这与我如何将时间（作为字符）转换为日期/时间类型有关。我相信 TraMineR 需要 POSIXlt 格式？

这是我的原始数据片段（trcode 是事件）

> 头（atus.act.short）

```
 tucaseid tustarttim tustoptime trcode
1 2.00701e+13   04:00:00   08:00:00  10101
2 2.00701e+13   08:00:00   08:20:00 110101
3 2.00701e+13   08:20:00   08:50:00  10201
4 2.00701e+13   08:50:00   09:30:00  20102
5 2.00701e+13   09:30:00   09:40:00 180201
6 2.00701e+13   09:40:00   11:40:00  20102 
```

我使用 strptime 将字符串转换为 POSIXlt：

```
atus.act.short$starttime.new <- strptime(atus.act.short$tustarttim, format="%X")
atus.act.short$stoptime.new  <- strptime(atus.act.short$tustoptime, format="%X") 
```

我还将 ID 减少到只有两位数

```
 atus.act.short$id <- atus.act.short$tucaseid-20070101070000 
```

我最终得到一个新的数据框，如下所示：

```
 id       starttime.new        stoptime.new trcode
1  44 2012-08-03 04:00:00 2012-08-03 08:00:00  10101
2  44 2012-08-03 08:00:00 2012-08-03 08:20:00 110101
3  44 2012-08-03 08:20:00 2012-08-03 08:50:00  10201
4  44 2012-08-03 08:50:00 2012-08-03 09:30:00  20102
5  44 2012-08-03 09:30:00 2012-08-03 09:40:00 180201
6  44 2012-08-03 09:40:00 2012-08-03 11:40:00  20102
7  44 2012-08-03 11:40:00 2012-08-03 11:50:00 180201
8  44 2012-08-03 11:50:00 2012-08-03 12:05:00  20102
9  44 2012-08-03 12:05:00 2012-08-03 13:05:00 120303
10 44 2012-08-03 13:05:00 2012-08-03 13:20:00 180704
11 44 2012-08-03 13:20:00 2012-08-03 15:20:00  70104
12 44 2012-08-03 15:20:00 2012-08-03 15:35:00 180704
13 44 2012-08-03 15:35:00 2012-08-03 17:00:00 120303
14 44 2012-08-03 17:00:00 2012-08-03 17:20:00 180701
15 44 2012-08-03 17:20:00 2012-08-03 17:25:00 180701
16 44 2012-08-03 17:25:00 2012-08-03 17:55:00  70101
17 44 2012-08-03 17:55:00 2012-08-03 18:00:00 181203
18 44 2012-08-03 18:00:00 2012-08-03 19:00:00 120303
19 44 2012-08-03 19:00:00 2012-08-03 19:30:00 110101
20 44 2012-08-03 19:30:00 2012-08-03 21:30:00 120303
21 44 2012-08-03 21:30:00 2012-08-03 23:00:00  10101
22 44 2012-08-03 23:00:00 2012-08-03 23:03:00  10201
26 48 2012-08-03 06:45:00 2012-08-03 08:15:00  10201
27 48 2012-08-03 08:15:00 2012-08-03 08:45:00 180209
28 48 2012-08-03 08:45:00 2012-08-03 09:00:00  20902
29 48 2012-08-03 09:00:00 2012-08-03 11:00:00  50101
30 48 2012-08-03 11:00:00 2012-08-03 11:45:00 120312 
```

然后我尝试创建一个序列对象[使用库（TraMineR）]

```
atus.seq <- seqdef(atus.act.short, informat = "SPELL", id="id") 
```

我收到以下错误：

> as.matrix.data.frame(subset(data, , 2)) 中的错误：dims [product 0] 与对象 [9] 的长度不匹配

想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T00:47:41.670

I've managed to work around this by converting the time to minutes (following another questions on stackoverflow), making the status code a character (as.character), using seqformat, and assigning it to a time axis. The new code reads:

`atus.seq2 <- seqformat(atus.act.short2, id="id", from="SPELL", to="STS", begin = "startmin", end = "stopmin", status="trcode", process = "FALSE")`

# ios - 如何获取 ALAsset 对象的物理路径

> ID：11801513
> 
> 赞同：2
> 
> 时间：2012-08-03T18:43:28.883
> 
> 标签：ios, url, filepath, alasset

有没有办法将以下调用返回的资产 url 转为设备上的物理路径？

```
NSURL *assetUrl = [_selectedAsset defaultRepresentation] url]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T21:21:57.443

不可能。（即使你有文件的路径，你的应用程序也无法读取文件，因为沙盒。）

获取资产原始数据的唯一方法是`getBytes:fromOffset:length:error:`在`ALAssetRepresentation`.

# php - Highchart 和 php

> ID：11801515
> 
> 赞同：0
> 
> 时间：2012-08-03T18:43:39.263
> 
> 标签：php, jquery, highcharts

大家好，我试图将值从我的 php 传递到 highchart 数据集，但需要它不起作用的帮助。

```
<?php $count2=$decode[nextPage][totalResults];
    echo("<input type=hidden name=aaqib value=".$count.">");
?>

<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <title>Highcharts Example</title>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(function () {
                var chart;
                var j= $("input[name=aaqib]").val();
                var k=100;

                $(document).ready(function() {
                    chart = new Highcharts.Chart({

                        chart: {
                            renderTo: 'container'
                        },

                        title: {
                            text: 'Logarithmic axis demo'
                        },

                        xAxis: {
                            tickInterval: 1
                        },

                        yAxis: {
                            type: 'logarithmic',
                            minorTickInterval: 0.1
                        },

                        tooltip: {
                            headerFormat: '<b>{series.name}</b><br />',
                            pointFormat: 'x = {point.x}, y = {point.y}'
                        },

                        series: [{
                            data: [j,k,
                            pointStart: 1
                        }]
                    });
                });

            });
        </script>
    </head>
    <body>
        <script src="../../js/highcharts.js"></script>
        <script src="../../js/modules/exporting.js"></script>

        <div id="container" style="min-width: 400px; height: 400px; margin: 0 auto"></div>

    </body>
</html> 
```

大家好，我试图将值从我的 php 传递到 highchart 数据集，但需要它不起作用的帮助。

我需要在数据中使用 J 和 K 的值，以便它们显示在高图表中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:01:46.057

将您的`php`vars 存储到`js`vars 中，然后传递给`highcharts`.

也修复以下问题。
`echo('<input type="hidden" name="aaqib" value="{$count}"/>');`

根据[此](https://stackoverflow.com/questions/11801515/highchart-and-php/11801748#comment15683744_11801748)评论更新。

```
series: [{
    data: [[j,k]]
}] 
```

这个[演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-log-axis/)应该可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:00:07.820

你为什么要重复`input`上面的 doctype 声明？我认为那属于你的身体。而且您还应该在回显中的属性值周围加符号。像这样的东西：

```
<?php $count2=$decode[nextPage][totalResults];
    echo("<input type='hidden' name='aaqib' value='$count'>");
?> 
```

一些浏览器可能会正确地威胁到这一点，但它实际上是无效的 html

# dart - 如何防止 on.submit 事件更改/重新加载页面？

> ID：11801516
> 
> 赞同：5
> 
> 时间：2012-08-03T18:43:42.033
> 
> 标签：dart

在**Javascript**中，当我提供一个`onSubmit`函数并从该函数返回“false”时，它会阻止页面更改/重新加载。

但是在**Dart**中，该`onSubmit.listen(...)`函数不采用返回类型。

**如何阻止提交发送表单数据和更改/重新加载页面？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:43:42.033

在`on.submit.add(...)`回调中，您将收到`Event`作为参数。该`Event`对象提供了一种[`preventDefault()`](http://api.dartlang.org/docs/continuous/dart_html/Event.html#preventDefault)方法来阻止或取消默认操作。

它可以按如下方式使用：

```
querySelector('#myForm').onSubmit.listen((Event e) {
  // ... your code here
  e.preventDefault();
}); 
```

# url - 如何访问 SoundCloud 公共流？

> ID：11801518
> 
> 赞同：4
> 
> 时间：2012-08-03T18:43:48.873
> 
> 标签：url, soundcloud

如何从 SoundCloud URL 播放曲目，例如，我从查询的 xml 响应中获得

```
<stream-url>https://api.soundcloud.com/tracks/31164607/stream</stream-url> 
```

我应该认为它会很容易：

```
https://api.soundcloud.com/tracks/31164607/stream&client_id=my_client_id 
```

但我得到

```
<error>401 - Unauthorized</error> 
```

我要做的就是在 Silverlight MediaElement 中使用它，所以我只需要为 MediaElement 的 Source 属性设置一些 url。

我检查了我大约 2 年前写的一个应用程序，然后，对于公共音轨，访问流 url 就像这样简单：

```
http://api.soundcloud.com/tracks/18163056/stream&consumer_key=MY_CONSUMER_KEY 
```

但是，这似乎不再起作用。

例如，我在 C# 中所要做的就是：

```
MediaElement me = new MediaElement();
me.Source= new Url("http://api.soundcloud.com/tracks/18163056/stream&consumer_key=MY_CONSUMER_KEY");
me.Play(); 
```

任何提示将不胜感激。

我在 Microsoft 论坛上有一个回复，似乎暗示 SoundCloud 可能无法在播放开始前不消耗整个流的情况下流式传输到 Windows 8 Metro 设备 - 这非常令人担忧，似乎意味着要使身份验证成为可能，它必须完全在使用标头的 url 查询字符串中完成：

*（以下回复是对以下问题的回答：'我可以使用 MediaElement 通过 http 访问音频流，但是我需要通过 https 访问它，其中我需要将 oAuth 信息添加到初始的标头请求。使用 MediaElement 时如何完成，如果无法完成，在 Metro 8 中使用需要标头身份验证才能流式传输的音频提要的解决方法是什么？'）*

> “MediaElement 目前不允许直接访问底层网络流。因此，目前无法修改 HTTP 请求的标头以包含任何其他身份验证信息。也就是说，您确实可以控制 URL。理论上，您可以设置一个 HTTP 代理服务，将 HTTP GET 请求参数转换为必要的 oAuth 凭据。请记住，这只是一种理论上的解决方法。在实践中您可能会发现不同的行为。另一个理论上的解决方法是自己处理 oAuth通过原始流套接字并通过“设置源”和“随机访问流”将重新调整的媒体数据传递给 MediaElement。请记住，此方法有很大的限制。为了使用“随机访问流”对于 ME，您需要确保所有数据都可用，然后再将其传递给 ME。”

对于仅免费分发的应用程序，代理服务不可扩展，因为每个流都需要通过代理来。而原始流套接字，虽然绕过了这个问题，但意味着在整个文件下载之前无法开始播放 - 这违反了所有当前的 UX（用户体验）准则。

因此，再一次，如果有人有任何提示或有关如何在查询字符串中而不是使用标头中实现整个身份验证的信息，我将不胜感激！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-05T12:17:52.650

我有点困惑你是指公共轨道还是私人轨道？如果它是公共轨道，那么您不需要发送任何身份验证信息，只需发送您的客户端 ID。

当我请求时`https://api.soundcloud.com/tracks/31164607/stream?client_id=YOUR_CLIENT_ID`，我得到一个 302 重定向到正确的 mp3 流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T14:34:35.767

请记住，向 URL 添加参数必须以`?`not开头`&`。这可能（很可能）是您获得 401 的原因（SC 没有获取 client_id）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-19T06:44:51.223

认证后的链接是这样的

[http://api.soundcloud.com/tracks/](http://api.soundcloud.com/tracks/) **103229681** /stream?consumer_key= **d61f17a08f86bfb1dea28539908bc9bf**

工作正常。我正在使用动作脚本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-08T00:00:11.340

我正在跟进 Tom 的回复，因为他提请注意 url 字符的特殊性。今天我的 HTTP 请求随机开始失败，我在 client_Id 前面加上`?`. 一旦我将单曲更改`?`为`&`，它就开始工作了。所以就我而言，SC 没有选择我的 client_Id，因为我使用了错误的字符。我认为根据我们具体讨论的请求中的哪个位置，值得注意的是，两者之间`?`的`&`差异确实会产生影响。

# c++ - 可变参数模板和 sizeof...() 混淆

> ID：11801521
> 
> 赞同：1
> 
> 时间：2012-08-03T18:44:09.520
> 
> 标签：c++, c++11, sizeof, variadic-templates

我有一个递归可变参数模板化方法，它是从非递归可变参数模板化方法调用的（可能不相关，但我会提到它以防万一）：

```
template < class T, class UnaryPredicate, typename... UnaryPredicates >
static bool checkPredicate( const T obj,
                            const UnaryPredicate& p,
                            UnaryPredicates... predicates )
{
    bool output = p( obj );
    if ( output && sizeof...( UnaryPredicates ) ) {
        output = checkPredicate( obj, predicates... );  //  The problem line.
    }

    return output;
} 
```

但是，当调用时：

```
.. = checkPredicate< Sy_simObject*, VisiblePredicate< Sy_simObject* >( .. ); 
```

它给了我以下错误：

> 错误：没有用于调用“Sy_project::checkPredicate(Sy_simObject* const&)”的匹配函数

我知道错误告诉我那`UnaryPredicates`是空的，并且 just 没有重载，`T`如果我在其中放入一个就可以正常编译。但是我不*明白*在条件检查中它怎么能走那么远`sizeof...( UnaryPredicates )`？当然，如果没有更多，它会被评估为假并且递归会结束吗？

我可以通过添加重载来修复它，我真的很想了解为什么它现在不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:52:00.070

因为`if(cond) { body }`是一个*运行时 if*。编译器可以在编译时预先知道它不需要在运行时分支的事实可以用来优化生成的代码，但它不能影响它是否抱怨代码的某些部分。

如果 if is的代码`body`无效，编译器会报错。您正在寻找的是一个*静态 if*，它控制您的代码的某些部分是否由编译器处理。下一个 C++ 版本有这样的提议，但当前的 C++ 没有这样的结构。`cond``false`

# c++ - 从给定字符串中查找给定长度的子序列？

> ID：11801522
> 
> 赞同：1
> 
> 时间：2012-08-03T18:44:13.820
> 
> 标签：c++

要从给定长度的字符串中找到子序列，我有一个递归代码（如下所示），但是当字符串长度很大时需要很长时间......

```
void F(int index, int length, string str)
{
  if (length == 0) {
cout<<str<<endl;
//int l2=str.length();
//sum=0;
    //for(int j=0;j<l2;j++)
//sum+=(str[j]-48);
//if(sum%9==0 && sum!=0)
    //{c++;}
//sum=0;
  } else {
    for (int i = index; i < n; i++) {
      string temp = str;
      temp += S[i];
   //sum+=(temp[i]-48);
      F(i + 1, length - 1, temp);
    }
  }
} 
```

请帮助我实现非递归代码或其他东西的一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T04:54:46.997

您提到当输入字符串长度很大时，您当前的代码太慢了。如果您可以提供一个具体的示例以及您的时间信息，这将很有帮助，这样我们就知道您认为什么“太慢”了。您还应该指定您认为可接受的运行时间。这是一个例子：

我将从一个我认为与您当前算法相似的初始版本开始。它生成所有长度 >= 2 的子序列：

```
#include <iostream>
#include <string>

void subsequences(const std::string& prefix, const std::string& suffix)
{
    if (prefix.length() >= 2)
        std::cout << prefix << std::endl;

    for (size_t i=0; i < suffix.length(); ++i)
        subsequences(prefix + suffix[i], suffix.substr(i + 1));
}

int main(int argc, char* argv[])
{
    subsequences("", "ABCD");
} 
```

运行此程序会产生以下输出：

```
AB
ABC
ABCD
ABD
AC
ACD
AD
BC
BCD
BD
CD 
```

现在让我们将输入字符串更改为更长的内容。我将使用 26 个字符的输入字符串：

```
"ABCDEFGHIJKLMNOPQRSTUVWXYZ" 
```

这会生成 67,108,837 个子序列。我不会在这里列出它们:-)。在我的机器上，上面显示的代码使用 26 个字符的输入字符串运行（不包括输出到 cout）只需要 78 秒多一点。

当我寻找优化上述代码的方法时，跳出来的一件事是它为每个对 subsequences() 的递归调用创建了两个新的字符串对象。如果我们可以预先分配空间然后简单地传递指针会怎样？版本 2：

```
#include <stdio.h>
#include <malloc.h>
#include <string.h>

void subsequences(char* prefix, int prefixLength, const char* suffix)
{
    if (prefixLength >= 2)
        printf("%s\n", prefix);

    for (size_t i=0; i < strlen(suffix); ++i) {
        prefix[prefixLength] = suffix[i];
        prefix[prefixLength + 1] = '\0';
        subsequences(prefix, prefixLength + 1, suffix + i + 1);
    }
}

int main(int argc, char* argv[])
{
    const char *inputString = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
    char *prefix = (char*) _malloca(strlen(inputString) + 1);

    subsequences(prefix, 0, inputString);
} 
```

这会生成相同的 67,108,837 个子序列，但现在执行时间刚刚超过 2 秒（同样，不包括通过 printf 的输出）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-30T05:31:28.443

您的代码可能很慢*，因为*您的字符串很大。对于具有 n 个唯一元素的序列，有 (n over k) 个长度为 k 的子序列。这意味着对于序列“ABCDEFGHIJKLMNOPQRSTUVWXYZ”，有 10.400.600 个长度为 13 的不同子序列。这个数字增长得非常快。

然而，既然你问了，这里有一个非递归函数，它接受一个字符串*str*和一个大小*n*并打印该字符串的所有长度为*n*的子序列。

```
void print_subsequences(const std::string& str, size_t n)
{
    if (n < 1 || str.size() < n)
    {
        return;  // there are no subsequences of the given size
    }
    // start with the first n characters (indexes 0..n-1)
    std::vector<size_t> indexes(n);
    for (size_t i = 0; i < n; ++i)
    {
        indexes[i] = i;
    }
    while (true)
    {
        // build subsequence from indexes
        std::string subsequence(n, ' ');
        for (size_t i = 0; i < n; ++i)
        {
            subsequence[i] = str[indexes[i]];
        }
        // there you are
        std::cout << subsequence << std::endl;
        // the last subsequence starts with n-th last character
        if (indexes[0] >= str.size() - n)
        {
            break;
        }
        // find rightmost incrementable index
        size_t i = n;
        while (i-- > 0)
        {
            if (indexes[i] < str.size() - n + i)
            {
                break;
            }
        }
        // increment that index and set all following indexes
        size_t value = indexes[i];
        for (; i < n; ++i)
        {
            indexes[i] = ++value;
        }
    }
} 
```

# ios - iOS：如何正确获取电池电量

> ID：11801523
> 
> 赞同：1
> 
> 时间：2012-08-03T18:44:14.340
> 
> 标签：ios, ios5

我试图获得正确的电池电量。但该值不像 iphone 状态栏中的值。

通过代码使用 UIDevice：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];

[[UIDevice currentDevice] batteryLevel]; 
```

请有人帮助我！我需要获得正确的电池电量，就像在状态栏 imdimatery 中一样。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-03T20:44:36.163

好吧，Apple 文档是这样说的：

> 电池电量范围从 0.0（完全放电）到 1.0（100% 充电）。在访问此属性之前，请确保已启用电池监控。

所以你的代码应该是这样的：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
float batteryLevel = [[UIDevice currentDevice] batteryLevel];

//This will give you the battery between 0.0 (empty) and 1.0 (100% charged)
//If you want it as a percentage, you can do this:

batteryLevel *= 100; 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-02-21T14:29:06.923

**获取电池电量的**Swift版本：****

 **```
UIDevice.current.isBatteryMonitoringEnabled = true
let batteryLevel = UIDevice.current.batteryLevel * 100 
```**

# sharepoint-2010 - SP 2010 查询 CAML - 如何按多值列查找字段排序？

> ID：11801527
> 
> 赞同：1
> 
> 时间：2012-08-03T18:44:26.710
> 
> 标签：sharepoint-2010, caml, spquery

我正在尝试使用以下语句对列基于查找字段上的多个值的列表进行排序：

```
<OrderBy>
  <FieldRef Name='LookupFieldName' Ascending='TRUE' LookupValue='TRUE' />
</OrderBy> 
```

如果我从列设置中取消选中“允许多个值”，它可以正常工作，但不能启用多个值。

你有什么建议吗？

为什么 SP 不能对 ID#Value 的串联进行排序（例如 1#Value1;2#Value2）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:55:48.703

您应该能够将附加列视为任何其他列。在此示例中，Attorney1_x003a_EmpID 是多个值之一：

```
<Query>
    <OrderBy>
         <FieldRef Name="Attorney1" Ascending="False" />
         <FieldRef Name="Attorney1_x003a_EmpID" Ascending="False" />
    </OrderBy>
</Query> 
```

# mysql - 如何将多行插入一个表，然后使用自动递增的 ID 插入另一个表？mysql

> ID：11801530
> 
> 赞同：1
> 
> 时间：2012-08-03T18:44:49.310
> 
> 标签：mysql, sql, database

所以我有两个由键'skillid'链接的表：

```
skills
+-----------+-------------+------+-----+---------+----------------+
| Field     | Type        | Null | Key | Default | Extra          |
+-----------+-------------+------+-----+---------+----------------+
| skillid   | int(11)     | NO   | PRI | NULL    | auto_increment |
| skillname | varchar(30) | NO   |     | NULL    |                |
+-----------+-------------+------+-----+---------+----------------+

students_skills
+-----------+---------+------+-----+---------+----------------+
| Field     | Type    | Null | Key | Default | Extra          |
+-----------+---------+------+-----+---------+----------------+
| ssid      | int(11) | NO   | PRI | NULL    | auto_increment |
| studentid | int(11) | NO   | MUL | NULL    |                |
| skillid   | int(11) | NO   | MUL | NULL    |                |
+-----------+---------+------+-----+---------+----------------+ 
```

我正在尝试将多行插入到表技能中，然后根据创建的 ID 将它们插入到 student_skills 中。我一直在研究使用 LAST_INSERT_ID() 函数：

```
INSERT INTO skills (skillid , skillname)
    VALUES(NULL,'being grateful for help'); # generate ID by inserting NULL
INSERT INTO students_skills (ssid, studentid, skillid)
    VALUES(LAST_INSERT_ID(),'1', '2'); # use ID in second table 
```

但是我不知道如何在一个 mysql 表中一次对多行执行此操作。当我简单地为每一行复制上述 4 行时，我得到一个错误。

> 错误：#1452 - 无法添加或更新子行：外键约束失败 ( `empology`. `students_skills`, CONSTRAINT `students_skills_ibfk_2`FOREIGN KEY ( `skillid`) REFERENCES `skills` ( `skillid`))

我是否在正确的路线上？我也研究了连接，但这种方法对我来说更有意义。

感谢您提供任何帮助或有用的链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:50:44.790

您必须确保使用多行插入语法，以便`LAST_INSERT_ID()`即使您自动增加另一列也保持一致：

```
INSERT INTO skills VALUES (NULL, 'test'); 
```

说`skillid`生成的是`1`，你可以这样做：

```
INSERT INTO student_skills VALUES
(NULL, 1, LAST_INSERT_ID()),
(NULL, 2, LAST_INSERT_ID()),
(NULL, 3, LAST_INSERT_ID()),
(NULL, 4, LAST_INSERT_ID()); 
```

返回的值将在所有四行中`LAST_INSERT_ID()`始终保持不变 ( )。`1`

但是，如果您将多个插入作为独立语句执行，`LAST_INSERT_ID()`则会更改，因为它将包含每个插入的生成的自动递增值：

```
INSERT INTO student_skills VALUES (NULL, 1, LAST_INSERT_ID());
INSERT INTO student_skills VALUES (NULL, 2, LAST_INSERT_ID());
INSERT INTO student_skills VALUES (NULL, 3, LAST_INSERT_ID());
INSERT INTO student_skills VALUES (NULL, 4, LAST_INSERT_ID()); 
```

`LAST_INSERT_ID()`前一个插入的生成 id在哪里。

* * *

看看这个[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/e5fd4/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:23:01.897

由于`students_skills.ssid`是一`AUTO_INCREMENT`列，因此您的第二个插入看起来是错误的。看来您想要以下内容：

```
INSERT INTO skills (skillid , skillname)
    VALUES(NULL,'being grateful for help'); # generate ID by inserting NULL
INSERT INTO students_skills (ssid, studentid, skillid)
    VALUES(NULL,'1', LAST_INSERT_ID()); # use ID in second table 
```

看看输出会很有帮助

```
SHOW CREATE TABLE skills;
SHOW CREATE TABLE students_skills; 
```

看到`FOREIGN KEYs`。

更新以显示输出

```
+--------+------------------------------------------------------------------------------
| Table  | Create Table                                                                
+--------+------------------------------------------------------------------------------
| skills | CREATE TABLE `skills` (
  `skillid` int(11) NOT NULL AUTO_INCREMENT,
  `skillname` varchar(30) NOT NULL,
  PRIMARY KEY (`skillid`)
) ENGINE=InnoDB AUTO_INCREMENT=8 DEFAULT CHARSET=latin1 |
+--------+------------------------------------------------------------------------------

+-----------------+---------------------------------------------------------------------
| Table           | Create Table                                                        
+-----------------+---------------------------------------------------------------------
| students_skills | CREATE TABLE `students_skills` (
  `ssid` int(11) NOT NULL AUTO_INCREMENT,
  `studentid` int(11) NOT NULL,
  `skillid` int(11) NOT NULL,
  PRIMARY KEY (`ssid`),
  KEY `studentid` (`studentid`),
  KEY `skillid` (`skillid`),
  CONSTRAINT `students_skills_ibfk_1` FOREIGN KEY (`studentid`) REFERENCES `students` (`studentid`),
  CONSTRAINT `students_skills_ibfk_2` FOREIGN KEY (`skillid`) REFERENCES `skills` (`skillid`)
) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=latin1 |
+-----------------+-------------------------------------------------------------------- 
```

# c# - 如何增加 Windows 8 中 C# 中按钮的 DoubleTapped 事件的延迟？

> ID：11801531
> 
> 赞同：0
> 
> 时间：2012-08-03T18:44:53.547
> 
> 标签：c#, windows-8

我必须在双击按钮时处理一些事件如何在 C# 中增加第一次点击和第二次点击鼠标之间的延迟

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T20:56:34.790

我用javascript解决了同样的场景。你可以在这里找到我的文章... [http://slickthought.net/post/2012/06/08/Handling-Click-DoubleClick-in-Windows-8-Metro-JavaScript.aspx](http://slickthought.net/post/2012/06/08/Handling-Click-DoubleClick-in-Windows-8-Metro-JavaScript.aspx)

您必须将 Promises 替换为 Task 之类的东西，因此它不是 1:1 的匹配，但它会给您关于如何解决问题的正确想法。

# android - 找不到 SDK 组件安装链接？

> ID：11801532
> 
> 赞同：0
> 
> 时间：2012-08-03T18:44:55.753
> 
> 标签：android, sdk

我想做一个[SDK Components Offline Installation](https://stackoverflow.com/questions/2766713/android-download-the-android-sdk-components-for-offline-install)。但是这个[XML 文件](https://dl-ssl.google.com/android/repository/repository-5.xml)不再包含任何 SDK 组件下载链接。这就是内容

```
<!--
license blah blah
</sdk:license>
<!-- PLATFORM-TOOLS ........................ -->
<sdk:platform-tool>
<!--
Generated at Sun Jun 24 13:59:38 2012 from git_jb-release @ 391408
-->
<sdk:revision>12</sdk:revision>
<sdk:archives>
<sdk:archive arch="any" os="windows">
<sdk:size>11125959</sdk:size>
<sdk:checksum type="sha1">74eae05569474ce4fb695f78470e5eedd7495a55</sdk:checksum>
<sdk:url>platform-tools_r12-windows.zip</sdk:url>
</sdk:archive>
<sdk:archive arch="any" os="linux">
<sdk:size>10950326</sdk:size>
<sdk:checksum type="sha1">0c3bd46c177f4f5e0c3663965d49bb143f95f071</sdk:checksum>
<sdk:url>platform-tools_r12-linux.zip</sdk:url>
</sdk:archive>
<sdk:archive arch="any" os="macosx">
<sdk:size>11314066</sdk:size>
<sdk:checksum type="sha1">76efeb1ed4bc934e9532ad80891c31c1adb51bb8</sdk:checksum>
<sdk:url>platform-tools_r12-macosx.zip</sdk:url>
</sdk:archive>
</sdk:archives>
</sdk:platform-tool>
<!-- TOOLS ........................ -->
<sdk:tool>
<!--
Generated at Sun Jun 24 13:52:53 2012 from git_tools_r20 @ 391819
-->
<sdk:revision>20</sdk:revision>
<sdk:min-platform-tools-rev>12</sdk:min-platform-tools-rev>
<sdk:archives>
<sdk:archive arch="any" os="windows">
<sdk:size>90245472</sdk:size>
<sdk:checksum type="sha1">f958e6b7b6f79e33e0b0c3b8e34888465fd79cfa</sdk:checksum>
<sdk:url>tools_r20-windows.zip</sdk:url>
</sdk:archive>
<sdk:archive arch="any" os="linux">
<sdk:size>82698183</sdk:size>
<sdk:checksum type="sha1">6f668f956e30bdf5ab7bb761d5641b04eb4bda84</sdk:checksum>
<sdk:url>tools_r20-linux.zip</sdk:url>
</sdk:archive>
<sdk:archive arch="any" os="macosx">
<sdk:size>58181018</sdk:size>
<sdk:checksum type="sha1">0296fa1591d081be2fa05492eaeb9c7a3123a62a</sdk:checksum>
<sdk:url>tools_r20-macosx.zip</sdk:url>
</sdk:archive>
</sdk:archives>
</sdk:tool>
</sdk:sdk-repository> 
```

任何人都可以上传备用链接或旧的 XML 文件。我强烈需要 API 级别 16 Emulator 映像才能使 OGL ES 2.0 正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:00:51.520

[这](https://dl-ssl.google.com/android/repository/repository-7.xml)是自更高版本的 SDK 工具版本以来的链接。管理员，[FIX_ME](https://stackoverflow.com/questions/2766713/android-download-the-android-sdk-components-for-offline-install)

# jquery-selectors - 选择 Raphael.js 将路径映射到 Qtip 工具提示

> ID：11801535
> 
> 赞同：0
> 
> 时间：2012-08-03T18:45:09.047
> 
> 标签：jquery-selectors, svg, raphael, qtip, tooltip

我只是想选择国家路径来触发工具提示。我怀疑我指的不是 svg 文件中的准确元素。

```
<script>
$(document).ready(function()
{
$('worldmap.shapes.US').qtip({ content: { text: 'Name: United States<br>Capital: Jefferson City'    },
        style: {
            background: '#000000',
            color: '#ffffff',
            border: { width: 6, radius: 3, color: '#ff0000' }
        },
        position: {
            corner: {
                target: 'topRight',
                tooltip: 'bottomLeft'
            }
        }
    }); 
```

});

以下是 svg 文件的格式：

```
 worldmap = {
  shapes: {
 AE:     "M604.196,161.643l0.514-0.129l0,0.772l2.188-0.386l2.189,0l1.672,0.129l1.803-1.802l2.058-1.802l1.674-1.673l0.518,0.900l0.385,2.189l-1.417,0l-0.258,1.802l0.517,0.386l-1.159,0.515l-0.129,1.029l-0.773,1.159l0,1.030l-0.514,0.644l-8.110-1.416l-1.031-2.704l0.127,0.643z", 
```

这是一个 .js 文件

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:29:19.507

我不太明白您是如何绘制 raphael.js 路径的。如果你正在做这样的事情：

```
my_path = paper.path("M 100,200 L ... z"); 
```

您必须在 raphael 路径对象 (my_path) 上使用 .node() 方法。这为您提供了对 DOM 对象的引用，您可以使用它。

```
$(my_path.node).qtip({ ... }) 
```

参见例如[http://www.itbrigadeinc.com/post/2012/05/03/Tooltips-in-Raphael.aspx](http://www.itbrigadeinc.com/post/2012/05/03/Tooltips-in-Raphael.aspx)

# php - 二叉搜索树后序迭代器

> ID：11801536
> 
> 赞同：3
> 
> 时间：2012-08-03T18:45:08.793
> 
> 标签：php, php, algorithm, iterator, binary-search-tree

我在 PHP 中实现了一个 AVL 树（一种自平衡二叉搜索树），并且工作正常。我有按顺序、预顺序和级别顺序*迭代器*工作，但我不知道如何为 BST 执行后序迭代器。谷歌搜索出现了如何进行迭代后序遍历，但不是迭代器。

到目前为止，我唯一的成功是使用后序遍历来构建一个数组，然后返回一个数组迭代器。这很糟糕，因为它对树进行了两次迭代并增加了更多的空间复杂度。

**构建后序迭代器的一般算法是什么？**

*[php](/questions/tagged/php "显示标记为“php”的问题")标记在这里的唯一原因是PHP中的迭代器与 Java 或 C++ 中的迭代器不同。它可能会影响您的建议。*

*此外，如果 PHP 有生成器，这将是一件轻而易举的事，因为后序遍历可以简单地产生值，将其变成一个迭代器。. .*

**编辑：**这是按顺序迭代器实现。也许它可以帮助您了解我对后序迭代器的要求：

```
class InOrderIterator implements Iterator {

    /**
     * @var ArrayStack
     */
    protected $stack;

    /**
     * @var BinaryNode
     */
    protected $root;

    /**
     * @var BinaryNode
     */
    protected $value;

    public function __construct(BinaryNode $root) {
        $this->stack = new ArrayStack;
        $this->root = $root;
    }

    /**
     * @link http://php.net/manual/en/iterator.current.php
     * @return mixed
     */
    public function current() {
        return $this->value->getValue();
    }

    /**
     * @link http://php.net/manual/en/iterator.next.php
     * @return void
     */
    public function next() {
        /**
         * @var BinaryNode $node
         */
        $node = $this->stack->pop();

        $right = $node->getRight();
        if ($right !== NULL) {
            // left-most branch of the right side
            for ($left = $right; $left !== NULL; $left = $left->getLeft()) {
                $this->stack->push($left);
            }
        }

        if ($this->stack->isEmpty()) {
            $this->value = NULL;
            return;
        }
        $this->value = $this->stack->peek();

    }

    /**
     * @link http://php.net/manual/en/iterator.key.php
     * @return NULL
     */
    public function key() {
        return NULL; //no keys in a tree . . .
    }

    /**
     * @link http://php.net/manual/en/iterator.valid.php
     * @return boolean
     */
    public function valid() {
        return $this->value !== NULL;
    }

    /**
     * @link http://php.net/manual/en/iterator.rewind.php
     * @return void
     */
    public function rewind() {
        $this->stack->clear();

        for ($current = $this->root; $current !== NULL; $current = $current->getLeft()) {
            $this->stack->push($current);
        }

        $this->value = $this->stack->peek();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:33:56.683

我几乎能够将 C++ 中的迭代遍历示例转换为迭代器。[最新在 github 上](https://github.com/morrisonlevi/Ardent/blob/master/src/Ardent/AvlTree.php)。仍然需要弄清楚几个案例。

```
class PostOrderIterator implements Iterator {

    /**
     * @var ArrayStack
     */
    protected $stack;

    /**
     * @var BinaryNode
     */
    protected $root;

    /**
     * @var BinaryNode
     */
    protected $value;

    protected $current;

    public function __construct(BinaryNode $root) {
        $this->stack = new ArrayStack;
        $this->root = $root;
    }

    /**
     * @link http://php.net/manual/en/iterator.current.php
     * @return mixed
     */
    public function current() {
        return $this->current->getValue();
    }

    /**
     * @link http://php.net/manual/en/iterator.next.php
     * @return void
     */
    public function next() {
        /**
         * @var BinaryNode $node
         */
        if ($this->value !== NULL) {
            $right = $this->value->getRight();
            if ($right !== NULL) {
                $this->stack->push($right);
            }
            $this->stack->push($this->value);
            $this->value = $this->value->getLeft();
            $this->next();
            return;
        }

        if ($this->stack->isEmpty()) {
            $this->current = $this->value;
            $this->value = NULL;
            return;
        }

        $this->value = $this->stack->pop();

        $right = $this->value->getRight();
        if ($right !== NULL && !$this->stack->isEmpty() && ($right === $this->stack->peek())) {
            $this->stack->pop();
            $this->stack->push($this->value);
            $this->value = $this->value->getRight();
            $this->current = $this->value;
        } else {

            if ($this->current === $this->value) {
                $this->value = NULL;
                $this->next();
            } else {
                $this->current = $this->value;
                $this->value = NULL;
            }
        }

    }

    /**
     * @link http://php.net/manual/en/iterator.key.php
     * @return NULL
     */
    public function key() {
        return NULL; //no keys in a tree . . .
    }

    /**
     * @link http://php.net/manual/en/iterator.valid.php
     * @return boolean
     */
    public function valid() {
        return $this->current !== NULL;
    }

    /**
     * @link http://php.net/manual/en/iterator.rewind.php
     * @return void
     */
    public function rewind() {
        $this->stack->clear();

        $this->value = $this->root;
        $this->next();
    }
} 
```

我无法描述该算法或证明它在做什么，但希望随着时间的推移它会变得有意义。

# c++ - 从函数返回空的 std::pair

> ID：11801539
> 
> 赞同：6
> 
> 时间：2012-08-03T18:45:14.903
> 
> 标签：c++, std-pair

是否可以从函数返回一个空对？意思是，遵循函数原型的规则，但对中没有任何元素（例如NULL）。了解一对只是存在，所以我不知道这在概念上是否可行。如果有意义的话，我需要返回一个 NULL 或空的对。

例如，

```
pair<int, int> MyClass::someFunction()
{

   // do something that means we need to return an empty pair
   return NULL; // <--- this does not work obviously
} 
```

不幸的是，提升对我来说是不可能的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:51:47.967

一般来说，空对甚至没有意义。毕竟`pair`，根据定义，a 是一个包含两个对象的容器。

[但是，您可以使用Boost.Optional](http://www.boost.org/doc/libs/1_50_0/libs/optional/doc/html/index.html)制作类似空对的东西。然后，您可以使用 a`boost::optional<std::pair<...>>`为您提供返回一对或空状态的选项，或者使用`std::pair<boost::optional<...>, boost::optional<...>>`一个对象可以为空的对。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T19:24:40.850

通过考虑 C++ 编译器在这种情况下生成代码的方式，可以很容易地解释您的问题的答案。

`std::pair<int, int>`是按值返回的。

由于`MyClass::someFunction()`是按值返回对象，因此事件顺序如下：

*   调用函数在堆栈上为一个`std::pair<int, int>`
*   被`MyClass::someFunction()`称为
*   return 语句的右侧是对先前在堆栈中保留的位置的赋值。有一个`std::pair<int, int>`正在发生的隐含结构。

因此返回 NULL 指针是不可能的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-03T18:51:10.293

您可以返回指针...或使用`boost::optional<T>`. 可选的会更好...

```
boost::optional<std::pair<int, int> > MyClass::someFunction()
{
    return boost::optional<std::pair<int, int> >();
}

void f(const MyClass& f)
{
    boost::optional<std::pair<int, int> > ret = f.someFunction();
    if (!ret) // empty
    {
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-03T19:17:30.173

创建自己的“可选对”（类似于`boost::optional<std::pair<…&gt;>`，但界面不同）并不需要太多，例如：

```
template <typename T1, typename T2> struct OptPair : std::pair<T1, T2>
{
  typedef std::pair<T1, T2> base_t;
  bool contains;
  OptPair() : contains(true) {}
  explicit OptPair(bool x) : contains(x) {}
  OptPair(const T1& x, const T2& y) : base_t(x, y), contains(true) {}
  template <class U, class V>
  OptPair(const std::pair<U,V> &p) : base_t(p), contains(true) {}
  template <class U, class V> OptPair(const OptPair<U,V> &p) : base_t(p), contains(p.contains) {}
  // No need to define operator=, as the default will construct an OptPair<T1, T2>
  // if necessary, then copy members into *this.
};

template <typename T1, typename T2>
OptPair<T1, T2> makeOptPair() { return OptPair<T1, T2>(); }

template <typename T1, typename T2>
OptPair<T1, T2> makeOptPair(const T1 &x, const T2 &y) {
  OptPair<T1, T2> p(true);
  p.first = x;
  p.second = y;
  return p;
}

template <typename OS, typename T1, typename T2>
OS &operator<<(OS &os, const OptPair<T1, T2>& p) {
  os << "<OptPair: ";
  if (p.contains) os << p.first << ", " << p.second;
  else os << "empty";
  os << ">";
  return os;
} 
```

然后您可以像 std::pair 一样使用它（甚至可以将它与 std::pair 互换使用，来回分配值），但增加了将“空”值传回的能力，如下所示：

```
OptPair<int, int> someFunction()
{
   ...
   return OptPair<int, int>(false); 
} 
```

您必须确保在使用之前检查结果，如下所示：

```
void doStuffWithPair(std::pair<int, int>);
void doStuffWithEmpty();
...
OptPair<int, int> ret = someFunction();
if (ret.contains) doStuffWithPair(ret);
else doStuffWithEmpty(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-03T18:49:01.257

根据定义，一对有 2 个元素。它不可能没有。

你需要类似的东西`boost::optional<std::pair<T1,T2>>`。然后，您可以选择是否拥有一对。[您可以在此处](http://www.boost.org/doc/libs/1_50_0/libs/optional/doc/html/index.html)找到 boost::optional 的文档。

# php - 如何在 Symfony 的另一个服务中注入一个服务？

> ID：11801541
> 
> 赞同：26
> 
> 时间：2012-08-03T18:45:17.483
> 
> 标签：php, symfony

我正在尝试在另一个服务中使用日志记录服务，以便对该服务进行故障排除。

我的 config.yml 看起来像这样：

```
services:
    userbundle_service:
        class:        Main\UserBundle\Controller\UserBundleService
        arguments: [@security.context]

    log_handler:
        class: %monolog.handler.stream.class%
        arguments: [ %kernel.logs_dir%/%kernel.environment%.jini.log ]

    logger:
        class: %monolog.logger.class%
        arguments: [ jini ]
        calls: [ [pushHandler, [@log_handler]] ] 
```

这在控制器等中运行良好，但是当我在其他服务中使用它时我没有输出。

有小费吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-03T18:50:33.783

您将服务 ID 作为参数传递给服务的构造函数或设置器。

假设您的其他服务是`userbundle_service`：

```
userbundle_service:
    class:        Main\UserBundle\Controller\UserBundleService
    arguments: [@security.context, @logger] 
```

现在 Logger 被传递给`UserBundleService`构造函数，只要你正确更新它，eG

```
protected $securityContext;
protected $logger;

public function __construct(SecurityContextInterface $securityContext, Logger $logger)
{
    $this->securityContext = $securityContext;
    $this->logger = $logger;
} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-08-30T12:07:31.240

### 对于 Symfony 3.3、4.x、5.x 及更高版本，最简单的解决方案是使用依赖注入

您可以直接将服务注入另一个服务，（例如`MainService`）

```
// AppBundle/Services/MainService.php
// 'serviceName' is the service we want to inject
public function __construct(\AppBundle\Services\serviceName $injectedService)  {
    $this->injectedService = $injectedService;
} 
```

然后简单地，在 MainService 的任何方法中使用注入的服务作为

```
// AppBundle/Services/MainService.php
public function mainServiceMethod() {
    $this->injectedService->doSomething();
} 
```

还有中提琴！您可以访问注入服务的任何功能！

### 对于不存在自动装配的旧版本 Symfony -

```
// services.yml
services:
    \AppBundle\Services\MainService:
        arguments: ['@injectedService'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-08T14:08:18.707

更通用的选项是为您想要注入的类创建一个特征。例如：

特征/SomeServiceTrait.php

```
Trait SomeServiceTrait
{
    protected SomeService $someService;

    /**
     * @param SomeService $someService
     * @required
     */
    public function setSomeService(SomeService $someService): void
    {
        $this->someService = $someService;
    }
} 
```

在您需要一些服务的地方：

```
class AnyClassThatNeedsSomeService
{
    use SomeServiceTrait;

    public function getSomethingFromSomeService()
    {
        return $this->someService->something();
    }
} 
```

由于@required 注释，该类将自动加载。当您想要将服务注入大量类（如事件处理程序）时，这通常可以更快地实现。

# java - 为什么我得到？当我尝试从java中的文本文件中读取ä字符时？

> ID：11801543
> 
> 赞同：0
> 
> 时间：2012-08-03T18:45:27.767
> 
> 标签：java, string, bufferedreader, inputstreamreader

我正在尝试从文本文件中读取文本。有一些特殊字符，如 å、ä 和 ö。当我制作一个字符串并打印出该字符串时，我得到了？？从这些特殊字符。我正在使用以下代码：

```
File fileDir = new File("files/myfile.txt");

BufferedReader br = new BufferedReader(new InputStreamReader(
                      new FileInputStream(fileDir), "UTF8"));

String strLine;
while ((strLine = br.readLine()) != null)   {
    System.out.println("strLine: "+strLine);
} 
```

谁能告诉我是什么问题。我希望 strLine 显示并保存 å、ä 和 ö，就像它们在文本文件中一样。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:51:22.277

在此处查看[Java 支持的编码列表](http://docs.oracle.com/javase/1.4.2/docs/guide/intl/encoding.doc.html)

最常见的包含非 ascii 字符的单字节编码是 ISO8859_1；也许你的文件就是这样，你应该为你的 FileInputStream 指定那个编码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:00:29.537

问题可能不在于文件，而在于您尝试打​​印的控制台。我建议你按照以下步骤

1.  确保您正在阅读的文件以 UTF-8 编码。
2.  确保您要打印的控制台具有正确的编码/字符集以显示这些字符

最后，这篇文章[Unicode - 如何正确获取字符？](http://balusc.blogspot.com/2009/05/unicode-how-to-get-characters-right.html)是必读的。

# node.js - Node.js 内存已满

> ID：11801545
> 
> 赞同：5
> 
> 时间：2012-08-03T18:45:35.737
> 
> 标签：node.js, memory

我正在尝试编写一个程序来下载一个大的 zip 文件，将其解压缩到内存中，然后将内容（一系列 CSV 文件）推送到 MongoDB。但是，我一直遇到程序停止并打印的点

```
FATAL ERROR: CodeRange::GetNextAllocationBlock Allocation failed - process out of memory 
```

当缓冲区不再使用时，我一直将它们设置为空，一旦它们在 Mongo 中就将记录设置为空，并防止一次处理多个文件。这些都没有帮助。释放内存还有什么技巧吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T15:24:17.503

我会考虑的事情是（不确定它是否会如愿以偿）：

**确保引用消失：**

*   [https://groups.google.com/d/msg/nodejs/ddXqNI_e_pU/NKMHmz4RLsoJ](https://groups.google.com/d/msg/nodejs/ddXqNI_e_pU/NKMHmz4RLsoJ)

**手动执行 GC 并增加 v8 堆大小：**

*   [http://blog.caustik.com/2012/04/11/escape-the-1-4gb-v8-heap-limit-in-node-js/](http://blog.caustik.com/2012/04/11/escape-the-1-4gb-v8-heap-limit-in-node-js/)

**从父进程生成（和杀死）子进程以完成工作：**

*   [http://www.robsearles.com/2011/09/28/nodejs-experiments-with-processes/](http://www.robsearles.com/2011/09/28/nodejs-experiments-with-processes/)

这样我认为操作系统会为子进程回收内存，即使它没有返回内存。

**Ram作为文件系统：**

*   [http://www.cyberciti.biz/faq/howto-create-linux-ram-disk-filesystem/](http://www.cyberciti.biz/faq/howto-create-linux-ram-disk-filesystem/)

这样您就可以将文件系统视为内存（让操作系统将其放入内存）。

**使用自由列表：**

*   [https://groups.google.com/d/msg/nodejs/ddXqNI_e_pU/EP0xUi04xl8J](https://groups.google.com/d/msg/nodejs/ddXqNI_e_pU/EP0xUi04xl8J)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:06:28.617

node.js 对内存分配有 1.4Gb 的硬性限制。但是我不认为将大文件下载到内存是个好主意，我建议将文件写入磁盘，解压缩到磁盘，然后推送到 MongDB。这样，您将始终只在内存中操作小块数据

# python - python数据类型是类还是数据结构？

> ID：11801549
> 
> 赞同：2
> 
> 时间：2012-08-03T18:45:39.907
> 
> 标签：python

所有我都是 python 编程的新手。我在 python 中提到了不同的教程，很少有作者说在 python 中，比如 Numbers(int,float,complex),list,set,tuple,dictionary,string 是数据类型，一些主题说数据结构很少是说类。我很困惑哪个是正确的。

我正在写一篇关于 Python 的文章，并在一个随机网站上发现了这个声明，只是想知道是否有人可以澄清和证明你的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:17:36.673

确切的含义随着时间的推移略有变化。最新版本的python（python 3）是最简单和最一致的，所以我将用它来解释。

* * *

让我们从有两种事物的想法开始：值和这些值的类型。

例如，python 中的值可以是数字、列表，甚至是函数。

值的类型描述了这些。所以数字的类型可能是`int`例如。

到目前为止，我们只考虑了语言“内置”的东西。但你也可以定义你自己的东西。为此，您定义了一个新类。该`type()`函数会说（在python 3中）你的类实例的类型是类本身：

所以也许你定义了一个名为 MyFoo 的类：

```
>>> class MyFoo:
>>>     def __init__(self, a):
>>>         self.a = a
>>>
>>> foo = MyFoo(1)
>>> type(foo)
<class '__main__.MyFoo'> 
```

将其与整数进行比较：

```
>>> type(1)
<class 'int'> 
```

很明显，您的值的类型就是它的类。

所以python中的值（例如数字、列表甚至函数）都是类的实例。值的类型是描述其行为方式的类。

现在事情变得更复杂了，因为您还可以将类型分配给一个值！那么你有一个类型的值：

```
>>> x = type(1)
>>> type(x)
<class 'type'> 
```

事实证明，任何类型的类型都是`type`. 这意味着任何类本身都是（的`type`）实例。这有点奇怪。但它是一致的，而不是您通常需要担心的事情。

* * *

所以，总而言之，对于python 3（这是最简单的）：

*   每个值都有一个类型
*   类型描述了值是如何工作的
*   类型是类
*   类实例的类型是它的类
*   数字、列表、函数、用户定义的对象都是类的实例
*   甚至类都是类的实例！它们是`type`!

* * *

最后，尝试回答您的确切问题。有些人称类数据类型和实例数据结构（我认为）。这是混乱和混乱的，人们不是很小心。坚持使用类和类型（实际上是同一件事）和实例是最简单的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T19:27:44.063

“数据类型”是对一种数据的描述：什么样的值可以是那种类型的实例，以及可以对它们进行什么样的操作。

“类”是表示数据类型的一种方式（尽管不是唯一方式），将对该类型的操作视为该类型实例（称为“对象”）的“方法”。这是所有基于类的语言的通用术语。但是Python对“类”也有特定的含义：`class`语句定义的东西，或者内置/扩展代码中定义的满足一定要求的东西，就是一个类。

因此，任意大小的整数和映射字典都是数据类型。在 Python 中，它们由内置类`int`和`dict`.

“数据结构”是一种组织数据以实现高效或轻松访问的方式。这与数据类型没有直接关系。在许多语言（如 C++ 或 Java）中，定义一个新类需要您告诉编译器实例的成员如何在内存中布局，诸如此类，但在 Python 中，您只需构造对象并向它们和解释器添加成员弄清楚如何组织它们。（在构建扩展模块或`ctypes`用于构建包装类时会出现异常，但不要担心。）

当您使用更高级别的抽象数据结构（如基于指针的节点）和更低级别的抽象数据类型（如可以在头部进行恒定时间插入和删除的保持顺序的元素集合）时，事情会变得模糊。链表是本质上需要某种数据结构的数据类型，还是定义了明显数据类型的数据结构，还是什么？好吧，除非你在大学主修计算机科学，否则只要你理解这个问题，这个问题的答案并不会产生太大的影响。

因此，映射字典是数据类型，但它们也是抽象的数据结构——而且，在幕后，Python 的`dict`对象是从一个特定的具体数据结构（具有二次探测的开链哈希表）构建的，该结构仍然是部分抽象的（每个bucket 包含一个鸭子类型的值）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:55:37.993

术语“数据类型”和“类”在 Python 中是同义词，它们对于您给出的示例都是正确的。与其他一些语言不同，没有简单的类型，Python 中的一切（可以用变量指向）都是对象。另一方面，术语“数据结构”可能应该保留给容器类型，例如集合、元组、字典或列表。

# html - 视频播放器和视频菜单插件

> ID：11801551
> 
> 赞同：0
> 
> 时间：2012-08-03T18:45:49.043
> 
> 标签：html, video

您能否推荐一个插件或能够拥有类似这样的东西：http: [//www.apple.com/iphone/videos/#tv-ads-busyday](http://www.apple.com/iphone/videos/#tv-ads-busyday)但带有 youtube 视频？

详细信息：显示我的 youtube 视频的缩略图，当您选择一个视频时，它应该在页面顶部播放。

谢谢！

# java - Google App Engine：禁用预编译

> ID：11801552
> 
> 赞同：0
> 
> 时间：2012-08-03T18:45:50.407
> 
> 标签：java, google-app-engine

根据 GAE 文档，您可以通过以下方式禁用预编译：

```
<precompilation-enabled>false</precompilation-enabled> 
```

但是他们在文档中没有说明这样做的优点/缺点/注意事项是什么。任何有经验的 GAE 大师都可以权衡 GAE 应用程序在启用与禁用时的行为方式吗？

具体来说，我感兴趣的是：

*   启用/禁用它如何影响运行时性能
*   启用/禁用此功能如何影响计费/成本

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:22:37.093

我不知道预编译是如何实现的（因此潜伏在这里的谷歌人最好详细回答这个问题），但是[这个答案](https://stackoverflow.com/questions/2398738/how-does-google-app-engine-precompile-java)给出了一些见解。

我只想补充一点，预编译不仅应该加速实例启动后的第一个请求（冷启动），而且应该加速第一次使用特定类时的所有请求。除此之外，它不应该提高运行时性能。

# java - Java - 方法调用后对象状态不会改变

> ID：11801554
> 
> 赞同：14
> 
> 时间：2012-08-03T18:46:04.880
> 
> 标签：java, pass-by-reference, pass-by-value

初学者 java 问题，但我无法理解 call-by-Value （或 Reference ）在下面的示例中是如何工作的 -

在我的自定义字符串对象是退出方法后，为什么字符串值没有被修改。? 与日期等其他类相同..

```
public class StringMadness {

public static void main(String[] args) {
    String s = "Native String";
    CustomStringObject cs = new CustomStringObject();
    System.out.println("Custom String Before: " + cs.str);
    hello(cs);
    System.out.println("Custom String After: " + cs.str);

    System.out.println("Native String Before: " + s);
    hello(s);
    System.out.println("Native String After: " + s);
}

private static void hello(String t) {
    t = "hello " + t;
}

private static void hello(CustomStringObject o) {
    o.str = "hello " + o.str;
  }
}

class CustomStringObject {

String str = "Custom String";
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-03T18:49:00.847

比较这两种方法：

```
private static void hello(String t) {
    t = "hello " + t;
}

private static void hello(CustomStringObject o) {
    o.str = "hello " + o.str;
} 
```

在第一种情况下，您将新值分配给`t`. 这对调用代码没有影响——你只是在改变一个参数的值，所有的参数在 Java 中都是按值传递的。

在第二种情况下，您将新值分配给`o.str`. 这改变了*对象*中的值所`o`引用的字段的值。调用者*将*看到该更改，因为调用者仍然具有对该对象的引用。

简而言之：Java 总是使用按值传递，但您需要记住，对于类，变量（或实际上任何其他表达式）的值是引用，而不是对象。您不需要使用参数传递来查看：

```
Foo foo1 = new Foo();
Foo foo2 = foo1;
foo1.someField = "changed";
System.out.println(foo2.someField) // "changed" 
```

这里的第二行复制`foo1`into的值`foo2`- 这两个变量引用同一个对象，因此使用哪个变量来访问它并不重要。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T18:47:27.393

这两种方法之间有一个重要的区别：使用`hello(String)`您试图更改对 的*引用*，`String`而使用`hello(CustomObject)`，给定一个引用，您将使用该引用更改对象的成员。

`hello(String)`引用 a `String`。在函数中，您尝试更改引用指向的对象，但您只是更改引用*的按值传递副本*。因此，您的更改不会反映在方法之外。

`hello(CustomObject)`得到一个对象引用的副本，然后您可以使用它来更改实际对象。将此视为更改对象的*内容*。因此，您的更改*会*反映在调用者中。

给定一个对象的*引用*，您可以使用它的公开方法/字段来更改对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:47:22.490

`t`将指向新对象并仅限于方法，因此更改在外部不可见。

第二种情况，您正在更改的值将更新为对象，因此这些更改在方法调用后可见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T18:49:10.807

因为对于 String 您只是更改本地参数引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-01T20:47:12.163

不起作用，因为 String 是不可变对象

# arrays - 使 perl 数组唯一

> ID：11801556
> 
> 赞同：4
> 
> 时间：2012-08-03T18:46:08.853
> 
> 标签：arrays, perl, unix, uniq

我目前在捕获反引号 shell 命令的输出时遇到了一个非常简单的问题。我很抱歉这个问题很简单。

我有一些排序数组（@valid_runs），我**知道**它包含连续的重复元素。我想使用反引号将此数组回显到 uniq。我想在一个数组中捕获 STDOUT。我试图这样做。

```
@unique_valids = `echo '@valid_runs' | uniq`;
print @unique_valids; 
```

此打印语句没有产生任何结果。就此而言，这也不是。

```
@unique_valids = `echo '@valid_runs'`;
print @unique_valids; 
```

我知道如何使用 uniq 和 echo。这对我来说似乎很奇怪。我认为这与 perl 数组有关，而不是正确使用这些命令。我在其他地方搜索了一下，所以请不要仅仅因为解决方案看起来微不足道而对我投反对票。感谢你的宝贵时间。

关于解决方案的说明：就处理 uniq 问题而言，TLP 的解决方案是最直接的。我相当灵活，因为所有回复都建议不要针对这个问题进行系统调用。如果 Perl 的 uniq 函数与 Unix 的 uniq 相同，那么数组应该保持排序。

如果您不关心排序结果，John Corbett 的解决方案效果很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-03T20:21:30.330

将系统调用用于可以通过 perl 代码轻松完成的事情并不是一个好主意。模块[List::MoreUtils](http://search.cpan.org/perldoc?List::MoreUtils)有一个 uniq 函数，可以满足您的要求：

```
use List::MoreUtils qw(uniq);

my @unique = uniq @runs; 
```

但是，模块本身内部的子程序非常简单，就像 theglauber 的回答一样：

```
sub uniq (@) {
    my %seen = ();
    grep { not $seen{$_}++ } @_;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-03T18:55:34.967

您应该将数组存储到散列中，因为散列键始终是唯一的。你可以这样做：

```
my %temp_hash = map { $_ => 1 } @valid_runs;
my @unique_valids = keys %temp_hash; 
```

无论如何，这就是 perl 的做法。这里没有必要使用背部抽动（我尽量避免这些）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T18:56:51.617

在 perl 中很容易做到这一点。这是一种对数组进行重复数据删除的相当晦涩但有趣的方法：

```
@dedup = grep !$seen{$_}++ @orig_array; 
```

通过检查 perl 函数的文档来弄清楚这是做什么的`grep`。

如果必须使用`uniq`，则可能需要将每个数组元素放在单独的行中。

```
join("\n", @your_array) 
```

应该做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:07:27.803

```
#!/usr/bin/perl
use warnings;

@a = (1, 2, 3, 3, 4, 4, 5);

$cmd = "/usr/bin/uniq <<EOF\n";
$cmd .= $_."\n" foreach (@a);
$cmd .= "EOF\n";

$result = `$cmd`;
print "Cmd: $cmd\n";
print "Result is $result";

@u = split /\n/,$result;
print "After ",join " ",@u,"\n"; 
```

This does what you ask, but theglauber's answer is still better Perl.

# javascript - 数据 URI 在 CSS 中不起作用

> ID：11801563
> 
> 赞同：0
> 
> 时间：2012-08-03T18:46:58.210
> 
> 标签：javascript, css, filereader

我有这个 fileReader 代码

```
for (var i = 0; i < files.length; i++) {
    fileReader.onload = (function(file) {
        return function(e) {
            z = z + 40;
            // Place the image inside the dropzone
            var image = this.result;
            $('#dropped-files').append('<div style="left: ' + z + 'px; background: url(' + image + ') cover;"> </div>');

        };
    })(files[i]);
}​ 
```

无论如何，我正在尝试将附加框的背景设置为刚刚上传的图像。问题是它不起作用。数据 URI 在那里，但我似乎无法让它显示为背景！即使我单击检查元素中的数据 URI 链接，我也可以访问已上传的图像，但它不会显示为背景图像。

任何想法为什么？数据 URI 非常长，但以基本数据开头并且是 base64，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:54:09.027

尝试`cover`在背景值的末尾删除。我不知道您要做什么，但添加它会使 Chrome 举手并说它不是有效的属性值。

编辑：相反，做2个声明：

```
$('#dropped-files').append('<div style="left: ' + z + 'px; background: url(' + image + '); background-size: cover;"> </div>'); 
```

# android - 将 Visual Studio 应用程序转换为适用于 android 操作系统

> ID：11801564
> 
> 赞同：0
> 
> 时间：2012-08-03T18:46:58.497
> 
> 标签：android, visual-studio-2010, visual-studio

我在 Visual Studio 2010 中使用 MS-Access 数据库开发了一个应用程序/软件。如何转换它或让它在 Android 操作系统上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T18:49:25.003

没有简单的方法可以“转换它”。Android 中的 Access 没有可比的功能。您最接近的匹配项是 SQL-Lite。

如果您想使用现有的库，最好的选择是使用[Mono for Android](http://xamarin.com/monoforandroid)。

这应该允许您在 Android 框架中使用您的 C# 代码。

# .net - 作为参数传入的对象 - 垃圾收集.Net

> ID：11801567
> 
> 赞同：0
> 
> 时间：2012-08-03T18:47:19.243
> 
> 标签：.net, vb.net

当一个对象似乎超出范围但由于其他类仍然持有对它的引用时可能仍然存在时，我有一个关于垃圾收集的问题。请仔细阅读下面的代码。谢谢。

```
Public Class MainForm

    Private Sub Work
         Dim Obj1 as New DataTable
         Dim Obj2 as New DataTable

         Helper.TestMethod1(Obj1)
         Helper.TestMethod2(Obj2)
    End Sub

End Class

Public Class Helper

     Private Shared Obj1Reference as Object

     Public Shared Sub TestMethod1 (ByVal obj1Ref as Object)
         Obj1Reference = obj1Ref
     End Sub

     Public Shared Sub TestMethod2 (ByVal obj2Ref as Object)
          'Do Something with obj2Ref
     End Sub

End Class 
```

在 Work 方法退出后，Obj1 和 Obj2 是否都会被放入垃圾回收队列中。据我了解，Obj2 已放入队列，但 Obj1 未放入队列，因为静态助手类持有对 Obj1 的引用。如果我错了，请纠正我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:49:35.690

没有收集任何内容，因为您的任何对象都没有被初始化，因此都是`Nothing`. 如果它们被初始化，那么是的，一个会继续存在，因为它会继续引用它，而另一个不会，因为它不会引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:28:35.407

如果您通过引用传递一个变量，它会将地址传递给另一个方法，其中另一个变量（Obj1Reference）将指向传递的地址并按照实现的方式进行操作。

所以我认为当应用程序完成执行时，垃圾收集器会清理 obj1,obj2

# c++ - 如何将函数应用于地图的每个值以创建排序序列？

> ID：11801568
> 
> 赞同：2
> 
> 时间：2012-08-03T18:47:18.837
> 
> 标签：c++, stdstring, stdmap, stl-algorithm

在 C++ 中使用 STL，我将如何将函数应用于 a 中的每个值`std::map`以获取`std::string`（值的打印表示）并将`std::string`(s) 收集到一个集合中，该集合由来自另一个函数的浮点键排序应用于地图中的每个对应值？

换句话说，我想遍历映射中的键值对并创建一组新的键值对，其中新键和值是旧值的函数。

```
double getNewKey(origValue value);
std::string getNewValue(origValue value);
// Or is it better to map both at once in a pair?
std::pair<double, std::string> getNewPair(origValue value);

std::map<origKey, origValue> origMap;

// Perform some transformation on each value of origMap to get a new map:
std::map<double, std::string> transformedMap =
  /* What goes here to use getNewKey() and getNewValue() or use getNewPair()? */
  ; 
```

但是，请不要使用 C++11。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T18:57:58.463

`std::transform`是你需要的：

```
#include <map>
#include <algorithm>
#include <iterator>
#include <iostream>

// using a few C++11 features to make life easier
int main(){
  std::map<int, int> src, dst; // example KV pair
  for(unsigned i=0; i < 10; ++i)
    src[i] = i;
  typedef std::map<int, int>::value_type kv_pair;
  std::transform(src.begin(), src.end(), std::inserter(dst, dst.begin()),
      [](kv_pair const& p){
        return kv_pair(p.first, p.second * 2);
      });
  for(auto& p : dst)
    std::cout << p.first << " : " << p.second << "\n";
} 
```

[活生生的例子。](http://liveworkspace.org/code/126ce2bb7fee6f4f75746b0d42887f7f)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:00:10.777

[免责声明，未经测试]：

```
std::pair<NewKey,NewValue> transform( std::pair<const OldKey,OldValue> const & x ) {
   return std::make_pair( getNewKey(x.first), getNewValue(x.second) );
}
...
std::transfom( m.begin(), m.end(),
               std::inserter( newmap, m.end() ),
               transform ); 
```

# visual-studio - 如何更改 CodeRush 在提取方法时使用的模板？

> ID：11801570
> 
> 赞同：4
> 
> 时间：2012-08-03T18:47:24.557
> 
> 标签：visual-studio, refactoring, coderush

当我在 CodeRush 中提取方法时，它具有一些默认格式。我想改变它。具体来说，当我选择提取方法的位置时，CodeRush 将其粉碎，直接在我放置位置标记的方法上方。

所以：

当我选择删除提取的方法时，如下所示： ![提取方法位置](../Images/f15408335fbdc0dc2e8c8804c91092c0.png)

它最终看起来像这样： ![提取方法结果](../Images/e79f955e23c8f22926d01eccabffa17b.png)

我想要的是让它对方法的外观有一些控制，目前我想在它和下一个方法之间添加一些空白行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T08:51:02.637

打开 DevExpress -> 选项对话框；

转到编辑器 | 代码格式化 | 空行选项页面；

切换“在多行成员之后”选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T20:19:46.523

我在这里要求这个：http: [//www.devexpress.com/Support/Center/p/S130722.aspx](http://www.devexpress.com/Support/Center/p/S130722.aspx)

它在这里实现：http: [//www.devexpress.com/Support/Center/p/S19229.aspx](http://www.devexpress.com/Support/Center/p/S19229.aspx)

现在有一个庞大的格式化子系统，我花了 3 个小时努力，试图超越 ReSharper 的大量格式化子系统，它们都需要能够在 VS Autoformat (CtrlK D) 中生存下来，但并非总是如此。

现在您知道它就在那里，我希望您能快速总结一下您是否能够让它做您想做的事情！

# c# - mysql 转储 - 未知数据库 'mysqldump'

> ID：11801580
> 
> 赞同：0
> 
> 时间：2012-08-03T18:48:09.730
> 
> 标签：c#, mysql

我正在尝试使用 mysqldump 从 c# 导出数据库。

当我运行它时，我收到此消息：选择数据库时出现未知数据库'mysqldump'。我找不到解决方案。

```
public static void mysqlBackup()
{
    try
    {
        //string time = DateTime.Now.ToString("dd-MM-yyyy");

        Log.Info("Starting MySQL dump");

        Process MySqlDump = new Process();
        MySqlDump.StartInfo.FileName = @"mysqldump.exe";
        MySqlDump.StartInfo.UseShellExecute = false;
        MySqlDump.StartInfo.Arguments = 
           "mysqldump -uroot -p******** b3 >"+ 
           " C:/Users/Administrator/Documents/temp/backups/backup.sql";
        MySqlDump.StartInfo.RedirectStandardInput = false; 
        MySqlDump.StartInfo.RedirectStandardOutput = false;

        MySqlDump.Start();

        MySqlDump.WaitForExit();
        MySqlDump.Close();

        Log.Info("Successfull created");
    }

    catch (IOException ex)
    {
        Log.Error("Unable to write the database file" + ex.ToString());
    }
} 
```

我试图从参数中删除 mysqldump 有点同样的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:32:29.140

重定向运算符`>`不是`mysqldump`. 当您在命令行上执行它时，它是由命令行本身解释的，而不是由 mysqldump 解释的。您在这里有两个选择：

1.  使用`--result-file`其他人提到的选项
2.  `RedirectStandardOutput`捕获过程的标准输出，并通过将属性设置为`StartInfo`来对输出做你喜欢的事情`true`。在此之后，您可以从`StandardOutput`流程的流中读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T18:53:00.543

我认为您需要指定要转储的数据库的名称作为第一个参数。多亏了 nathan，它`--databases`在最后才进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T18:57:32.253

Mysql 文档指出有 3 种方法可以使用 mysqldump 命令：

```
shell> mysqldump [options] db_name [tbl_name ...]
shell> mysqldump [options] --databases db_name ...
shell> mysqldump [options] --all-databases 
```

确保命令通过您的命令行正常工作。如果确实如此，则直接在您的代码中执行该命令。如果可行，那么开始提取您的参数并在代码中用您自己的参数替换它们。

基本上，您希望尽可能地基本并从那里开始工作。

如果文件在命令行上工作，试试这个：

```
using (Process p = new Process())
{        
        p.StartInfo.FileName = @"mysqldump.exe -u root -p *** --database b3 -r test.sql"; <~~~ note the change here
        p.Start();
        p.WaitForExit();
} 
```

除非您更改该代码，否则该文件将转储到您的项目文件夹 bin/debug 或 bin/release 文件夹。

**这是您编辑的方法：**

公共静态无效mysqlBackup（）{尝试{

```
 //string time = DateTime.Now.ToString("dd-MM-yyyy");

        Log.Info("Starting MySQL dump");

    using(Process MySqlDump = new Process()
    {
        MySqlDump.StartInfo.FileName = @"mysqldump.exe";
        MySqlDump.StartInfo.UseShellExecute = false;
        MySqlDump.StartInfo.Arguments = "-uroot -p******** b3 --result-file=C:/Users/Administrator/Documents/temp/backups/backup.sql";
        MySqlDump.StartInfo.RedirectStandardInput = false; 
        MySqlDump.StartInfo.RedirectStandardOutput = false; //You can redirect this as mention in other answers 

        MySqlDump.Start();

        MySqlDump.WaitForExit();
        MySqlDump.Close();
    }
   Log.Info("Successfully created");
    }

    catch (IOException ex)
    {
        Log.Error("Unable to write the database file" + ex.ToString());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:40:16.347

```
MySqlDump.StartInfo.Arguments = "-u root -p *** database_name --result-file [path]\backup.sql"; 
```

您也不需要在命令中再次指定 mysqldump （并不是说它应该有很大的不同）。

# r - R WHERE EXISTS 类型的子集？

> ID：11801581
> 
> 赞同：3
> 
> 时间：2012-08-03T18:48:16.110
> 
> 标签：r

在中，您可以使用限定符`SQL`限制查询结果。`WHERE EXISTS`例如，这个：

```
SELECT *
FROM Table_B
WHERE EXISTS (SELECT ID FROM TABLE_A) 
```

你能在里面做同样的事情`R`吗？

我有一个大数据框 - 称之为 df.a。

```
str(df.a)
ClientID : Factor w/ 148892 levels
Month    : Date, format  "2012-07-31"
Visits   : int 
```

我已将 df.a 子集化为更小的 df.b。现在，我想返回 df.a，但仅在 clientID 在 df.b 中时才获取记录。

我可以`merge`像这样使用 ，但我希望有一个更优雅的解决方案。

```
july.activity <- merge(df.a, df.b, by="ClientID", all.x=TRUE)
july.activity <- subset(july.activity, Visits.x != "NA") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:53:29.900

也许这可以满足您的需要？

```
july.activity <- df.a[df.a$ClientID %in% df.b$ClientID & !is.na(df.a$Visits), ]

df.a <- data.frame(ClientID = factor(letters[c(1,2,2,3)]), Visits = c(1,NA,2,3))
df.b <- df.a[1:2,]
df.b
  ClientID Visits
1        a      1
2        b     NA
df.a
  ClientID Visits
1        a      1
2        b     NA
3        b      2
4        c      3
df.a[df.a$ClientID %in% df.b$ClientID & !is.na(df.a$Visits), ]
  ClientID Visits
1        a      1
3        b      2 
```

# gnuplot - 如何将自定义标签添加到 Gnuplot 图图例？

> ID：11801584
> 
> 赞同：3
> 
> 时间：2012-08-03T18:48:27.827
> 
> 标签：gnuplot

在我用 gnuplot 制作的图表中，我画了一些灰线（`set arrow`命令），它们代表我的实验的物理边界（即墙壁）

我想知道如何在图表的图例上添加这些信息，所以它显示“墙”并且旁边有一条灰线。

我想创建一个包含此信息的新系列，但我想知道是否可以显式添加它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T19:17:32.633

您不能将信息直接添加到图例中。但是，您可以明确地绘制图例，或者绘制一条不会出现在绘图范围内的线，例如

```
plot [][0:1] 2 lc rgb 'gray' t 'Walls' 
```

或者，如果您的 x 和 y 限制已设置：

```
...
[set x and y limits here]
...
plot 1e20 lc rgb 'gray' t 'Walls' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T23:50:21.273

只是想注意：由于绘制一条线往往会弄乱我的图表，对我来说更好的解决方案是绘制一个点；但正如在[Plotting single points « Gnuplotting](http://www.gnuplotting.org/plotting-single-points/)中发现的那样，这有点困难（特别是如果需要在任意绘图图例/关键位置插入） - 除非使用重定向......这对我有用：

```
plot "filename" using 1:8 \
,\
... # more plot lines here
,\
"<echo '-1 -1'" lc rgb 'white' with points title '---' \
,\
... # more plot lines here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T05:45:57.857

一种简单的方法是使数据文件的名称成为您想要的图例，然后绘制该数据文件。

# django - 在 Django 中强制使用 https

> ID：11801585
> 
> 赞同：2
> 
> 时间：2012-08-03T18:48:30.510
> 
> 标签：django, encryption, ssl, https

我正在尝试通过 SSL 加密我的整个网站。但是，我没有找到使用 Django 1.4 执行此操作的明确方法。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T18:54:11.790

您可以使用[django-secure](http://django-secure.readthedocs.org/)中提供的中间件，也可以通过将所有 HTTP 请求重定向到 HTTPS 在 Apache/Nginx/HAProxy 级别处理此问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-19T12:15:43.527

在 apache+django (1.6) 上，这可以通过多种方式完成，但可以在 .htaccess 或 httpd.conf 文件中完成的简单方法是：

```
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URL} 
```

这是有关它的更多信息的链接：

[http://wiki.apache.org/httpd/RewriteHTTPToHTTPS](http://wiki.apache.org/httpd/RewriteHTTPToHTTPS)

为了确保会话和 csrf cookie 不会被客户端通过普通的 http 连接泄露，您应该确保它们被设置为“安全 cookie”并且仅由客户端通过 https 发送。这可以在您的 settings.py 文件中按如下方式完成：

```
CSRF_COOKIE_SECURE = True
SESSION_COOKIE_SECURE = True 
```

django 安全介绍，包括 SSL/HTTPS（必读）：

[https://docs.djangoproject.com/en/1.6/topics/security/](https://docs.djangoproject.com/en/1.6/topics/security/)

# ios - iOS 键盘语言更改时是否有委托调用？

> ID：11801587
> 
> 赞同：5
> 
> 时间：2012-08-03T18:48:50.167
> 
> 标签：ios, ios5, keyboard

我有一个场景，我希望有一个处理程序，当用户按下 iOS 键盘上的语言更改（地球图标）时触发处理程序。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T20:28:36.240

以下应该有效：您必须在代码中使用 UIKeyboard 通知

```
 [[NSNotificationCenter defaultCenter] addObserver:self
             selector:@selector(keyboardWillBeHidden:)
             name:UIKeyboardWillHideNotification object:nil]; 
```

然后在您`keyboardWillBeHidden:`或类似名称的方法中使用答案（下面的链接），它会为您返回当前所选语言的两个字母代码。

链接：[在 iOS 中获取当前设备语言？](https://stackoverflow.com/questions/3910244/getting-current-device-language-in-ios/)

因此`keyboardWillBeHidden:`，当键盘隐藏时调用您的方法方法，从系统中读取当前选择的键盘语言选项。

这就是理论，我自己没有尝试过，祝你好运。

# javascript - 如何将 xml 文档中的数据调用到 html 页面中？

> ID：11801588
> 
> 赞同：0
> 
> 时间：2012-08-03T18:48:58.327
> 
> 标签：javascript, xml, ajax

我是 Web 开发的新手，但从目前所学的知识来看，我确信我想做的事情非常简单。我只是还没有完全弄清楚。

我有一个拉外部 html 页面的应用程序。这些页面都与谷物价格有关。我有大约十页左右，目前要更改价格，我打开每一页，找到价格并手动更改它们。我想要做的只是让所有页面从同一个文档中提取价格（我假设这必须是一个 xml 或 txt 文档），这样我只需要更新一个外部文档。

外部文档将托管在与 html 页面相同的服务器上。

这似乎是我应该能够简单地使用 javascript 和 Ajax 来完成的事情，而且我已经看到了很多使用它的示例。问题是，在我见过的所有示例中，ajax 调用的是整个文本文档，而不仅仅是其中的一部分。

例如，我有一个名为 Northern Alberta 价格的 html 页面，它列出了大约六种不同的谷物价格。我希望该页面调用外部文档（我们称之为prices.xml）并从中获取所有阿尔伯塔北部的价格并将它们放在html页面上的适当位置，然后我希望阿尔伯塔中部价格页面也调用price.xml 并从中扣除相关价格等。

最好的方法是什么？

（我目前无法在我的服务器上使用 PHP，但仍然欢迎任何涉及 PHP 的答案。）

感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:51:41.630

您必须调用整个文档，然后与 XML 中的特定节点进行交互

如果没有实际的架构，我可以给你的帮助不多，尽管这里有一个好的教程：

[http://www.sitepoint.com/server-side-xml-javascript/](http://www.sitepoint.com/server-side-xml-javascript/)

这将帮助您理解数据操作背后的核心概念

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:53:34.563

是的，要将 XML 与 PHP 一起使用，您可以这样做：

[http://php.net/manual/en/simplexml.examples-basic.php](http://php.net/manual/en/simplexml.examples-basic.php)

这几乎可以说，你可以这样做：

```
<?php
include 'example.php';

$movies = new SimpleXMLElement($xmlstr);

echo $movies->movie[0]->plot;
?> 
```

...这将从第一个电影节点获取 Plot 属性。如果您有任何其他问题，请告诉我。

编辑：我遇到的另一个选择是使用 jQuery（javascript）：

[http://think2loud.com/224-reading-xml-with-jquery/](http://think2loud.com/224-reading-xml-with-jquery/)

# java - 向表中添加按钮（java swt）

> ID：11801589
> 
> 赞同：4
> 
> 时间：2012-08-03T18:48:59.700
> 
> 标签：java, eclipse, eclipse-plugin, swt

我正在尝试复制与此类似的 UI：

[http://librixxxi.blogspot.com/2011/06/punch-clock-021-and-clickable-edit.html](http://librixxxi.blogspot.com/2011/06/punch-clock-021-and-clickable-edit.html)

我一直在按照作者的说明（没有成功）在我的表格的每一列中创建按钮。我的项目与他的不同之处在于我正在尝试使用 a`Tree`而不是 a `Table`，并且我是在 eclipse`TreeViewer`插件的上下文中进行的。从理论上讲，实现似乎应该很简单，但我似乎无法让它工作。

这是我的代码，它很容易复制，因为它只是带有树形查看器的示例 Java PDT 示例视图，以及`createPartControl`. 您在这里看不到的所有内容都与示例相同：

```
 class ViewLabelProvider extends LabelProvider implements ITableLabelProvider {

        public String getColumnText(Object obj, int i) {
            if(i == 0){
                return obj.toString();
            }
            return "";
        }
        public Image getColumnImage(Object obj, int i) {
            if(i == 0){
            String imageKey = ISharedImages.IMG_OBJ_ELEMENT;
            if (obj instanceof TreeParent)
               imageKey = ISharedImages.IMG_OBJ_FOLDER;
            return PlatformUI.getWorkbench().getSharedImages().getImage(imageKey);
            }
            return null;
        }
    }
    class NameSorter extends ViewerSorter {
    }

    /**
     * The constructor.
     */
    public ButtonView() {
    }

    /**
     * This is a callback that will allow us
     * to create the viewer and initialize it.
     */
    public void createPartControl(Composite parent) {
        viewer = new TreeViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL);

          Tree tree = viewer.getTree();
            tree.setLinesVisible(true);
            tree.setHeaderVisible(true);
            TreeColumn column1 = new TreeColumn(tree, SWT.LEFT);
            column1.setText("Name");
            column1.setWidth(400);
            TreeColumn column2 = new TreeColumn(tree, SWT.LEFT);
            column2.setText("Some info");
            column2.setWidth(300);

        // Button experimentation    
        TreeItem[] items = tree.getItems();
        for(int i = 0; i < items.length; i++){
            TreeEditor editor = new TreeEditor(tree);
            TreeItem item = items[i];

            Button button = new Button(tree, SWT.PUSH);

            button.setImage(PlatformUI.getWorkbench().getSharedImages().getImage(ISharedImages.IMG_OBJ_ELEMENT));
            button.setSize(16,16);
            button.pack();

            editor.horizontalAlignment = SWT.RIGHT;
            editor.setEditor(button, item);
        }

        drillDownAdapter = new DrillDownAdapter(viewer);
        viewer.setContentProvider(new ViewContentProvider());
        viewer.setLabelProvider(new ViewLabelProvider());
        viewer.setSorter(new NameSorter());
        viewer.setInput(getViewSite());

        // Create the help context id for the viewer's control
        PlatformUI.getWorkbench().getHelpSystem().setHelp(viewer.getControl(), "ButtonTest.viewer");
        makeActions();
        hookContextMenu();
        hookDoubleClickAction();
        contributeToActionBars();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:32:30.577

当你说你似乎无法让它工作时，你的意思是你看不到你的按钮`Tree`吗？

SWT`TreeEditor`类的 javadoc 给出了一个树编辑器的示例，说明

> “编辑器必须与单元格大小相同，并且不得小于 50 像素。”

以下几行确保在示例中满足这些条件：

```
editor.grabHorizontal = true;
editor.minimumWidth = 50; 
```

因此，如果您将这些行添加到您的编辑器，按钮应该是可见的。

**[编辑：我为重现行为所做的事情]**

我使用了标准的 RCP 邮件示例项目并将您的“按钮实验”代码添加到其中。在里面，我使用了简单的文本按钮。

```
public void createPartControl(Composite parent) {
  viewer = new TreeViewer(parent, SWT.MULTI | SWT.H_SCROLL | SWT.V_SCROLL | SWT.BORDER);
  viewer.setContentProvider(new ViewContentProvider());
  viewer.setLabelProvider(new ViewLabelProvider());
  viewer.setInput(createDummyModel());

  experiment();
}

private void experiment() {

  // Button experimentation  
  Tree tree = viewer.getTree();
  TreeItem[] items = tree.getItems();

  for(int i = 0; i < items.length; i++){
    TreeEditor editor = new TreeEditor(tree);

    TreeItem item = items[i];

    Button button = new Button(tree, SWT.PUSH);

    button.setText("A");
    button.setSize(16,16);
    button.pack();

    editor.horizontalAlignment = SWT.RIGHT;
    editor.grabHorizontal = true;
    editor.minimumWidth = 50;
    editor.setEditor(button, item);
  }
} 
```

当我执行这样的代码时，按钮会出现。当我注释掉设置编辑器`grabHorizontal`和`minimumWidth`值的行时，会显示正常的树单元格渲染器并且按钮不可见。

# c# - ASP.NET 更新面板在 Web 用户控件中不起作用

> ID：11801598
> 
> 赞同：0
> 
> 时间：2012-08-03T18:49:33.827
> 
> 标签：c#, asp.net, web-user-controls, updatepanel

我创建了一个 html5 画布和 javascript 签名板，我想将其实现为一个带有更新面板的 Web 用户控件来处理按钮点击。出于某种原因，如果我将更新面板和签名板控件直接添加到 aspx 文件中，则自动回发事件会起作用，但是当我将相同的代码放入 Web 用户控件时，字段（画布、按钮、div 等）会出现，但自动回发不再有效。在这两种情况下，我都将脚本管理器放在更新面板上方。

这是我的 ascx 代码：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="Signature_Pad.ascx.cs"     Inherits="Controls_Signature_Pad" %>

 <asp:UpdatePanel runat="server" ID="signatureUpdate"  updatemode="Conditional">
  <Triggers>
     <asp:AsyncPostBackTrigger controlid="signatureApprove" eventname="Click" />
     <asp:AsyncPostBackTrigger controlid="sigClear" eventname="Click" />
     <asp:AsyncPostBackTrigger controlid="sigCancel" eventname="Click" />
  </Triggers>
  <ContentTemplate>
        <fieldset id="SignatureFieldSet" runat="server" style=" border: 1 solid black;">
       <p><asp:Label ID="signatureTextLabel" AutoPostBack="true"  runat="server" Text=""></asp:Label></p>
        <div id="canvasDiv" style="height: 300px; border:0px solid #000000; ">
            <canvas id="canvasSignature"  style="border:1px solid #000000;"></canvas>
        </div>
        <div id="sigButtonDiv"  style=" border:0px solid #000000;">
            <br /><br />
            <asp:Button AutoPostBack="true" runat="server" OnClick="OnApprove" ID="signatureApprove" Text="Approve" />
            <asp:Button AutoPostBack="true" runat="server" OnClick="OnClear" ID="sigClear" Text="Clear" />
            <asp:Button AutoPostBack="true" runat="server" OnClick="OnCancel" ID="sigCancel" Text="Cancel" />
        </div> 
    </fieldset>
 </ContentTemplate>
</asp:UpdatePanel> 
```

这是我背后的 ascx 代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class Controls_Signature_Pad : System.Web.UI.UserControl
{
private string signatureData;
private string signatureText;

public string SignatureData
{
    get { return signatureData; }
    set { signatureData = value; }
}
public string SignatureText
{
    get { return signatureText; }
    set { signatureText = value; }
}

public void OnApprove(object sender, EventArgs e)
{
    UtilityClass.showMessageBox("Approve Clicked", this);
    SignatureText = "Approved Clicked";
}
public void OnClear(object sender, EventArgs e)
{
    UtilityClass.showMessageBox("Clear Clicked", this);
    SignatureText = "Clear Clicked";
}
public void OnCancel(object sender, EventArgs e)
{
    UtilityClass.showMessageBox("Cancel Clicked", this);
    SignatureText = "Cancel Clicked";
}

public void Page_Load(object sender, EventArgs e)
{
    signatureTextLabel.Text = signatureText;
}
} 
```

这是我的相关aspx：

```
...
<%@ Register TagPrefix="mjt" TagName="SignaturePad" Src="~/Controls/Signature_Pad.ascx" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">

<asp:ScriptManager ID="ScriptManager" runat="server" EnablePartialRendering="true" EnablePageMethods="true"></asp:ScriptManager>
 <mjt:SignaturePad ID="SignaturePad" runat="server" Visible="true" SignatureData="" SignatureText="Test Signature Test." />

... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T13:21:25.857

在后面的代码中添加事件处理程序解决了这个问题。这是我的代码：

该控件具有三个需要触发事件的按钮（Approve、Clear 和 Canceled）。

在 ascx.cs 中：

```
public event EventHandler Approved;
public event EventHandler Cleared;
public event EventHandler Canceled;

 protected void signatureApprove_clicked(object sender, EventArgs e)
{

    if(Approved != null)
    Approved(this, EventArgs.Empty);

}
protected void sigClear_clicked(object sender, EventArgs e)
{
        if (Cleared != null)
        Cleared(this, EventArgs.Empty);
}
protected void sigCancel_clicked(object sender, EventArgs e)
{
       if (Canceled != null)
       Canceled(this, EventArgs.Empty);
} 
```

在 ascx 中：

```
 <asp:UpdatePanel runat="server" ID="signatureUpdate"  updatemode="Conditional">
  <Triggers>
     <asp:AsyncPostBackTrigger controlid="signatureApprove" eventname="Click" />
     <asp:AsyncPostBackTrigger controlid="sigClear" eventname="Click" />
     <asp:AsyncPostBackTrigger controlid="sigCancel" eventname="Click" />
  </Triggers>
     <ContentTemplate>
       <fieldset id="SignatureFieldSet" class="fieldSetStyle" >
        <p><asp:Label ID="signatureTextLabel" AutoPostBack="true"  runat="server" Text=""></asp:Label></p>
        <div id="canvasDiv" runat="server" >
            <canvas id="canvasSignature" class="canvasStyle"></canvas> 
        </div>
        <div id="sigButtonDiv">
        <br />
            <asp:Button  AutoPostBack="true" runat="server" OnClick="signatureApprove_clicked" ID="signatureApprove" Text="Approve" CssClass="buttonStyle" />
            <asp:Button  AutoPostBack="true" runat="server" OnClick="sigClear_clicked" ID="sigClear" Text="Clear" CssClass="buttonStyle"/>
            <asp:Button  AutoPostBack="true" runat="server" OnClick="sigCancel_clicked" ID="sigCancel" Text="Cancel" CssClass="buttonStyle"/>
        </div> 
      </fieldset>
    </ContentTemplate>
</asp:UpdatePanel> 
```

在 aspx 中：

```
<mjt:SignaturePad OnApproved="Signature_Approved"   OnCanceled="Signature_Canceled" OnCleared="Signature_Cleared" ID="SignaturePad" runat="server"   /> 
```

在 aspx.cs 中：

```
protected void Signature_Approved(object sender, EventArgs e)
{
    //Do signature approved action
}
protected void Signature_Canceled(object sender, EventArgs e)
{
    //Do signature cancel action
}
protected void Signature_Cleared(object sender, EventArgs e)
{
   //Do signature cleared action
} 
```

# qt - 聊天窗口需要 HTML 视图

> ID：11801603
> 
> 赞同：1
> 
> 时间：2012-08-03T18:49:56.843
> 
> 标签：qt

我的 Qt 项目需要一个类似于 Skype 的聊天窗口。即，聊天历史窗口，而不是用户输入文本的地方。我想使用某种 HTML 视图以编程方式添加来自聊天方的聊天文本。

一些要求：

1.  它必须很好地格式化，我可以应用对 CSS 的支持..
2.  我必须有滚动控制——例如当新的聊天行进来时自动滚动到聊天结束，即使我当前由于某种原因向上滚动。
3.  它必须允许完整的鼠标复制，就像Skype一样。

QWebView 会做滚刀吗？我没有看到滚动控制 API，也没有“附加”新的文本行。每次换行时，我是否必须使用“setHTML”重新创建和重新提交 HTML？

任何建议将被认真考虑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:33:27.993

您可能需要考虑使用[QTextEdit](http://qt-project.org/doc/qt-4.8/qtextedit.html)或[QTextBrowser](http://qt-project.org/doc/qt-4.8/qtextbrowser.html)。这两个小部件都支持 HTML（尽管它可能有些限制）。这些小部件将允许您逐行附加 HTML。它们还继承自 QAbstractScrollArea，它为您提供访问它们的滚动条的权限。我不确定他们是否会支持 CSS，但他们确实支持[Qt 的样式表](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html)，如果你不能让 CSS 工作，这可能对你有用。它们还提供开箱即用的复制、剪切、粘贴、撤消和重做（尽管您可能希望根据自己的情况自定义）。

# java - 存储查询结果的有效方法？

> ID：11801604
> 
> 赞同：0
> 
> 时间：2012-08-03T18:50:00.527
> 
> 标签：java, database, oracle, database-design

**我有一个要求，比如`select`以固定的时间间隔运行“n”个查询并存储该数据。这些结果需要稍后根据客户的要求提取。**

我的问题是：

*   1）可以将其存储为csv文件吗？或者你能建议另一种格式吗？
*   2）或者，它应该作为clob变量存储在数据库中吗？

请建议任何压缩技术来存储这些查询结果；另外，是否可以只存储以前结果集的修订而不是存储整个结果集？

**笔记：**

*   最小时间间隔为每小时。
*   查询数 (n) 会有所不同（目前为 10 到 200 个查询。）
*   每个查询的结果集大小也各不相同（比如 10 到 1,000,000，但大多在 10k 左右。）
*   在每个时间间隔之间获取的结果集数据差别不大。（行值不会经常更新。）

我是计算机科学和编程的新手，也不太了解存储或数据库设计。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:53:37.403

听起来你应该建立一个[数据仓库。](http://en.wikipedia.org/wiki/Data_warehouse)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:53:12.830

性能方面，我认为最好有一个用于存储查询结果的表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:14:53.643

我认为您需要将数据存储在数据库中。[SQL](http://en.wikipedia.org/wiki/SQL)数据库可以为您提供最好的服务。关于以固定的时间间隔存储数据，只需要使数据集中的变化生效，而不是一次又一次地存储整个数据。我不知道您的要求是什么以及您能负担得起多少基础设施。如果你有这么大的查询，我建议你在[分布式系统](http://hadoop.apache.org)中工作。使用 NOSQL 数据库以获得更好的性能。

# python - Python中的十六进制格式

> ID：11801608
> 
> 赞同：1
> 
> 时间：2012-08-03T18:50:24.330
> 
> 标签：python, hex, type-conversion, pyserial

我已经坚持了一段时间了。我需要向 python 中的设备发送串行命令。以下是格式示例：

```
ser = serial.Serial('/dev/ttyO1',baudrate=115200)
ser.write('\xAA\x04\x05\x00\x00\x00') 
```

如果我使用 .write(~hex bytes~) 格式进行交流，我就可以正常交流

但是，当我需要接收更大的数据块时，设备的通信协议会将内容拆分为数据包，我必须确认接收到每个数据包。为了避免在为每个数据包输入单独的 ser.write() 命令时出现腕管综合症，我想编写一个循环来为我进行数据包计数/确认。这就是我所拥有的：

```
for n in range(0,num_packets,1):

    x = '\\x'"%0.2x"%(n)    
    print('Picture Ready Host Ack')
    ser.write('\xAA\x0E\x00\x00' + x + '\x00')
    time.sleep(.1)
    response = ser.read(ser.inWaiting())
    image_write(response,base_path, filename) 
```

但是，双斜杠 ('\x'..) 给了我两个斜杠：

```
'\xaa\x0e\x00\x00\\x05\x00' 
```

当我定义变量 x 时，单个斜杠 ('\x'...) 会返回问题：

```
ValueError: invalid \x escape 
```

...帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:56:22.033

如果不是定义`x`为`'\\x'"%0.2x"%(n)`，而是定义，那么`x = chr(n)`一切都应该正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:07:32.000

`\xij`只是扩展到字符`chr(int(ij, 16))` 因为无论如何您都在发送字节，所以我会说在一个循环中发送您的第一个块。不要添加任何东西，*然后发送*你的分隔符，然后发送`chr(int(n),16)`下一个块。这应该可以解决您的问题。

# security - 如何同时在 2 个不同的 symfony2 防火墙上进行身份验证？

> ID：11801622
> 
> 赞同：7
> 
> 时间：2012-08-03T18:51:26.593
> 
> 标签：security, authentication, symfony, firewall

我有一个带有 2 个区域的 Symfony 应用程序，一个用于从网页访问的客户端，另一个用于来自 AJAX 和 Web 服务的 API 调用。

这些区域中的每一个都由其自身的防火墙保护。WEB 界面使用登录表单进行身份验证，API 使用`http_basic`.

两种防火墙都工作正常，但是当 WEB 接口对 API 接口进行 AJAX 调用时，浏览器会提示用户再次登录，即使他已经登录（通过登录表单）。这是我想要避免的。我希望同时对两个防火墙进行身份验证以防止出现此提示。

我见过另一个问题**完全相同**的问题。但是他们`http_basic`在两个防火墙上都使用了身份验证，因此，提出的解决方案不适用于我的情况：

[使用一个登录表单验证多个 symfony2 防火墙](https://stackoverflow.com/questions/9075041/authenticate-multiple-symfony2-firewalls-with-one-login-form)

我的安全.yml

```
#....
firewalls:
    api:
        pattern:    ^/API
        context: primary_auth
        stateless:  true
        http_basic: 
            realm: "API: Please log in"

    web:
        pattern:    ^/
        context: primary_auth
        form_login:
            check_path: /login_check
            login_path: /login
            provider: fos_userbundle
        logout:
            path:   /logout
            target: /
        anonymous: ~ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T15:40:45.890

你可能想看这里：[Authenticate multiple symfony2 firewalls with one login form](https://stackoverflow.com/questions/9075041/authenticate-multiple-symfony2-firewalls-with-one-login-form) there's solution to similar question there

引：

```
security:
# providers etc ...

    firewall:
        main:
            pattern: # ...
            provider: my_users
            http_basic: ~
            context: primary_auth  # new
        api:
            pattern: # ...
            provider: my_users
            http_basic: ~
            context: primary_auth  # new 
```

# asp.net - 将 datetime2 转换为 datetime 数据类型时出现超出范围异常

> ID：11801623
> 
> 赞同：2
> 
> 时间：2012-08-03T18:51:32.350
> 
> 标签：asp.net, sql-server-2008-express

`datetime`更新SQL Server 2008 Express 上的列时出现异常：

```
eventinfo.StartDateTime = DateTime.ParseExact(start, 
                                              "MM/dd/yyyy hh:mm tt", 
                                              CultureInfo.InvariantCulture);
db.Entry(eventinfo).State = EntityState.Modified;
db.SaveChanges(); 
```

例外：

> 将 datetime2 数据类型转换为 datetime 数据类型导致值超出范围。语句已终止。

知道如何避免这种异常吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:12:36.317

Sql Server 的日期/时间数据类型的域如下：

*   `datetime2`（100 纳秒精度）1753-01-01T00:00:00.0 — 9999-12-31T23:59:59.9999999。
*   `datetime`（毫秒精度......有点）1753-01-01T00:00:00.000 — 9999-12-31T23:59:59.997
*   `smalldatetime`（1 秒精度）1900-01-01T00:00:00 — 2079-06-06T23:59:59

CLR`DateTime`结构也具有 100 纳秒的精度。它是自其纪元 (0001-01-01T00:00:00) 以来的 100 秒滴答计数。它的域是 0001-01-01T00:00:00 — 9999-12-31T23:59:59.9999999。

您会注意到 CLR 的扩展域`DateTime`与 SQL Server 的`datetime2`.

CLR 的默认值`DateTime`是它的纪元 (0001-01-01T00:00:00)。1753-01-01T00:00:00 之前的任何值都将引发超出范围的异常。

很可能，您的`DateTime`值没有被初始化，或者 DateTime.ParseExact() 收到垃圾数据，成功解析它并以 1753-01-01 之前的日期/时间结束。

# eclipse - 如何从完整的类名以编程方式在 Eclipse 插件中查找 .java 文件？

> ID：11801627
> 
> 赞同：4
> 
> 时间：2012-08-03T18:51:49.120
> 
> 标签：eclipse, plugins, eclipse-plugin, eclipse-pde

在 Eclipse 插件中，我想在编辑器中打开一个文件。

我知道完整的包和类名

如何从中确定`.java`文件的路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:21:13.337

看看`IJavaProject.findType( name )`方法。一旦有了`IType`，就可以使用`getPath`或`getResource`方法来定位文件。此方法搜索整个项目以及该项目中可见的所有内容。

要搜索整个工作区，请遍历工作区中的所有 Java 项目，`findType`依次调用每个项目的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:40:41.130

您还需要知道源文件夹。

```
IProject prj = ResourcePlugin.getWorkspace().getRoot().getProject("project-name");
IFile theFile = prj.getFile(sourceFolder + packageName.replace('.','/') + className + ".java"); 
```

通常，您使用 IFile 为编辑器指定文件。您还可以向 IFile 询问文件路径的变体。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-05T13:18:08.137

我知道这有点旧，但我有同样的需求，我看看 eclipse 如何处理堆栈跟踪元素（它们上有一个超链接）。代码在`org.eclipse.jdt.internal.debug.ui.console.JavaStackTraceHyperlink`（链接是“懒惰的”，所以只有当你点击它时才会解析打开的编辑器）。

它的作用是首先在启动的应用程序的上下文中搜索类型，然后在整个工作区（方法`startSourceSearch`）中搜索：

```
IType result = OpenTypeAction.findTypeInWorkspace(typeName, false); 
```

然后打开关联的编辑器（方法`processSearchResult`， `source`就是上面检索到的类型）：

```
protected void processSearchResult(Object source, String typeName, int lineNumber) {
    IDebugModelPresentation presentation = JDIDebugUIPlugin.getDefault().getModelPresentation();
    IEditorInput editorInput = presentation.getEditorInput(source);
    if (editorInput != null) {
        String editorId = presentation.getEditorId(editorInput, source);
        if (editorId != null) {
            try { 
                IEditorPart editorPart = JDIDebugUIPlugin.getActivePage().openEditor(editorInput, editorId);
                if (editorPart instanceof ITextEditor && lineNumber >= 0) {
                    ITextEditor textEditor = (ITextEditor)editorPart;
                    IDocumentProvider provider = textEditor.getDocumentProvider();
                    provider.connect(editorInput);
                    IDocument document = provider.getDocument(editorInput);
                    try {
                        IRegion line = document.getLineInformation(lineNumber);
                        textEditor.selectAndReveal(line.getOffset(), line.getLength());
                    } catch (BadLocationException e) {
                        MessageDialog.openInformation(JDIDebugUIPlugin.getActiveWorkbenchShell(), ConsoleMessages.JavaStackTraceHyperlink_0, NLS.bind("{0}{1}{2}", new String[] {(lineNumber+1)+"", ConsoleMessages.JavaStackTraceHyperlink_1, typeName}));  //$NON-NLS-2$ //$NON-NLS-1$
                    }
                    provider.disconnect(editorInput);
                }
            } catch (CoreException e) {
                JDIDebugUIPlugin.statusDialog(e.getStatus()); 
            }
        }
    }       
} 
```

代码拥有 eclipse 的版权。如果提到这一点，我希望我可以复制它。

# sql-server - 使用 XML 参数进行参数嗅探

> ID：11801628
> 
> 赞同：1
> 
> 时间：2012-08-03T18:51:55.770
> 
> 标签：sql-server, tsql

我目前正在尝试解决一个问题，即为我的一个存储过程不确定地缓存了一个错误的查询计划。许多资源表明此类问题可能是由参数嗅探引起的，但我不确定我的情况是否适用。

具体来说，我有一个 XML 类型的参数，我在存储过程中做的第一件事就是将它加载到临时表中。这会受到参数嗅探的影响吗？

（复制是耗时的，就像我说的那样，是不确定的，这就是为什么我还没有检查的原因）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:36:02.130

我不知道您的意思`plan is non-determinstically cached`是执行计划可以兑现或不兑现。参数嗅探是服务器根据参数值找出最有效的执行计划，在某些情况下使用。粗略地说，通过参数嗅探，sql-server 决定使用某些索引是否有效。您可以阅读有关它的更多信息，例如[在此博客](http://blogs.technet.com/b/mdegre/archive/2012/03/19/what-is-parameter-sniffing.aspx)中。

因此，回答您的问题，因为您在某些情况下不使用 xml 参数，而只是将其加载到临时表中，因此执行计划不会受到参数嗅探的影响。

但是，只要您使用临时表，执行计划在大多数情况下都不会兑现，并且会在每次执行时重新编译。如果您希望兑现计划，请考虑使用表变量。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T03:02:55.893

这是一个愚蠢的问题：表格统计数据的样本量太小（相当大的表格）。我们显着增加了样本量，一切都再次顺利进行。

# c# - 如何将图像 url 转换为 system.drawing.image

> ID：11801630
> 
> 赞同：36
> 
> 时间：2012-08-03T18:51:56.717
> 
> 标签：c#, asp.net, .net, vb.net, itextsharp

我正在使用`VB.Net`我有一个图片的网址，比如说`http://localhost/image.gif`

我需要从该文件创建一个 System.Drawing.Image 对象。

*请注意*将其保存到文件然后打开它不是我的选项之一，我也在使用`ItextSharp`

这是我的代码：

```
Dim rect As iTextSharp.text.Rectangle
        rect = iTextSharp.text.PageSize.LETTER
        Dim x As PDFDocument = New PDFDocument("chart", rect, 1, 1, 1, 1)

        x.UserName = objCurrentUser.FullName
        x.WritePageHeader(1)
        For i = 0 To chartObj.Count - 1
            Dim chartLink as string = "http://localhost/image.gif"
            x.writechart( ** it only accept system.darwing.image ** ) 

        Next

        x.WritePageFooter()
        x.Finish(False) 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-08-03T18:59:58.947

您可以使用 WebClient 类下载图像，然后 MemoryStream 来读取它：

**C＃**

```
WebClient wc = new WebClient();
byte[] bytes = wc.DownloadData("http://localhost/image.gif");
MemoryStream ms = new MemoryStream(bytes);
System.Drawing.Image img = System.Drawing.Image.FromStream(ms); 
```

**VB**

```
Dim wc As New WebClient()
Dim bytes As Byte() = wc.DownloadData("http://localhost/image.gif")
Dim ms As New MemoryStream(bytes)
Dim img As System.Drawing.Image = System.Drawing.Image.FromStream(ms) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-01-20T11:04:58.327

其他答案也是正确的，但是看到 Webclient 和 MemoryStream 没有被处理会很痛苦，我建议将您的代码放在`using`.

示例代码：

```
using (var wc = new WebClient())
{
    using (var imgStream = new MemoryStream(wc.DownloadData(imgUrl)))
    {
        using (var objImage = Image.FromStream(imgStream))
        {
            //do stuff with the image
        }
    }
} 
```

文件顶部所需的导入是`System.IO`, `System.Net`&`System.Drawing`

在 VB.net 中，语法是`using wc as WebClient = new WebClient() {`etc

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-19T05:37:10.757

您可以使用 HttpClient 并通过几行代码异步完成此任务。

```
public async Task<Bitmap> GetImageFromUrl(string url)
    {
        var httpClient = new HttpClient();
        var stream = await httpClient.GetStreamAsync(url);
        return new Bitmap(stream);
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T19:00:00.550

你可以试试这个来获取图像

```
Dim req As System.Net.WebRequest = System.Net.WebRequest.Create("[URL here]")
Dim response As System.Net.WebResponse = req.GetResponse()
Dim stream As Stream = response.GetResponseStream()

Dim img As System.Drawing.Image = System.Drawing.Image.FromStream(stream)
stream.Close() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-04T04:33:22.493

iTextSharp 能够接受 Uri 的：

```
Image.GetInstance(uri) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T19:01:50.503

```
Dim c As New System.Net.WebClient
Dim FileName As String = "c:\StackOverflow.png"
c.DownloadFile(New System.Uri("http://cdn.sstatic.net/stackoverflow/img/sprites.png?v=5"), FileName)
Dim img As System.Drawing.Image
img = System.Drawing.Image.FromFile(FileName) 
```

# javascript - 使用 XML 加载的数字作为函数变量

> ID：11801639
> 
> 赞同：0
> 
> 时间：2012-08-03T18:52:47.997
> 
> 标签：javascript, jquery

我需要在链接 ID 中使用下面代码中的变量来加载覆盖 iframe。我正在从用于每个生成的链接参数的 XML 文件中加载数字，我也可以将它们用作 ID。下面是javascript：

```
$(function(){
$('#b1').frameWarp();
}); 
```

除了使用 ID="b1"，我是否能够根据加载的 XML 编号创建变量？我不能使用类而不是 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T18:54:56.200

你可以使用：

```
$('#' + varName).frameWarp(); 
```

抱歉，如果这不是您要找的。我很难理解你的问题。

# asp.net - 在 UpdatePanel 中单次触发 Timers 滴答事件

> ID：11801643
> 
> 赞同：1
> 
> 时间：2012-08-03T18:53:12.380
> 
> 标签：asp.net, asp.net-ajax

我浏览了一些我继承的代码。该页面有一个更新面板，其中有一个计时器控件。

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
  <asp:Timer ID="process" runat="server" Interval="1500" OnTick="process_Tick">
  </asp:Timer>
 </asp:UpdatePanel> 
```

在计时器的滴答事件开始后面的代码中：

```
 protected void process_Tick(object sender, EventArgs e)
    {
        process.Enabled = false; 
```

计时器被禁用..很可能只触发一次滴答声。稍后在事件中，我们至少有两个地方将线程置于睡眠状态以在处理中引发一些等待：

```
Thread.Sleep(18000); 
```

并且

```
Thread.Sleep(10 * 1000); 
```

这两个线程停止处理一段时间，但会导致不同线程上的回发，并且每个线程上都会触发滴答事件......

如何停止创建这些线程并一次又一次地触发滴答事件。由于此代码，表单被提交了几次。

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:37:45.260

将 AsyncPostBackTimeout 属性添加到 ScriptManager。默认情况下，它会在 90 秒后超时。所以通过增加超时时间，定时器的 Tick 事件不会一次次触发。

```
 <asp:ScriptManager ID="ScriptManager1" runat="server" AsyncPostBackTimeout="400" >
</asp:ScriptManager> 
```

# ajax - ExtJS 4 自动解析元数据

> ID：11801650
> 
> 赞同：0
> 
> 时间：2012-08-03T18:53:39.120
> 
> 标签：ajax, json, extjs4

好的，在我的应用程序中，我有与数据一起发送的额外信息，Sencha 文档将其定义为元数据。如果检索数据时出现错误，例如网格，我希望服务器能够告诉客户端通知用户它无法完成请求。但是我想对所有事情都这样做，而不必重新定义回调来检查我的应用程序中的每个商店。有没有办法做到这一点？还是我试图做这一切都错了？另外，如何在不使用商店或模型的情况下使用 JSON 阅读器？这样我就可以做同样的事情，引入服务器指令，而不必在 Ext.Ajax 成功回调中重新定义它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:33:52.103

对于商店，您可以

```
Ext.define('myNewCustomStore',{
    constructor:function(config){
        this.callParent(arguments);
        this.on('load',function(store,records,e){myCustomMetaDataHandler()});
    }
}); 
```

然后而不是使用

`Ext.create('Ext.data.Store'`或者`Ext.define('myStore',{extends:Ext.data.Store` 您创建/扩展`myNewCustomStore`

而没有模型的 Json？

```
Ext.Ajax.request({
url: 'page.php',
params: {
    id: 1
},
success: function(response){
    var text = response.responseText;
    var json = Ext.JSON.decode(text);
    //now do stuff
}
}); 
```

# php - PHP 中的 JQuery：如何防止浏览器过早插入结束标记？

> ID：11801651
> 
> 赞同：0
> 
> 时间：2012-08-03T18:53:43.877
> 
> 标签：php, jquery

此代码的输出：

```
<?php
    echo "<script type='text/javascript'> $('#query-info').append('<div class=\"well\">')</script>";
    foreach ($_POST as $key => $entry)
    {
        echo "<script type='text/javascript'> $('#query-info').append('". $key . ": " . $entry . "<br />')</script>";
    }
    echo "<script type='text/javascript'> $('#query-info').append('</div>')</script>";
?> 
```

是：

```
<div class="well"></div>
itemID: 1
<br>
</div> 
```

注意额外不需要的（第一个）关闭 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T18:57:01.913

JavaScript 不会将字符串附加到 HTML，它会附加完整的 DOM 节点/元素；不是追加开头，然后是新元素，*然后*是结束标签，而是追加一个元素，然后追加一个或多个子节点到该新添加的节点：

```
var newDiv = $('<div />', {'class' : 'well'}),
    otherDiv = $('<div />', {'class' : 'somethingElse'});
newDiv.appendTo('#query-info');
otherDiv.appendTo(newDiv); 
```

以上将导致如下所示：

```
<div id="query-info">
    <div class="well">
        <div class="somethingElse"></div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T18:58:27.807

`.append`只能附加 HTML 节点，不能只附加开始或结束标签。

让 PHP 生成整个`<div>`，然后生成`.append`整个事情。

```
<?php
    $HTML = '<div class="well">';
    foreach ($_POST as $key => $entry)
    {
        $HTML .= "$key: $entry<br/>";
    }
    $HTML .= '</div>';
    echo '<script type="text/javascript">$("#query-info").append("'.json_encode($HTML).'");</script>';
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T18:59:55.497

您正在考虑 HTML，但代码是根据 DOM 运行的。 `.append('<div class=\"well\">')`将添加整个 div，而不仅仅是一串文本。您需要将内容添加为该 div 的子项。

```
var div = $('<div class=\"well\">').appendTo("#query-info");

//in the loop - add content to the div.well
div.append('". $key . ": " . $entry . "<br />'); 
```

您应该使用 PHP 编写 HTML 或 jQuery 来构建 DOM，但您可能不应该使用 PHP 编写 jQuery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T19:04:02.153

当您像这样调用该 jquery append 函数时，它会自动创建一个完整的节点，如您所见。在您的情况下，您可能想要做的是将所有 HTML 输出到 javascript 字符串变量，然后像这样附加它：

```
<?php
    $js_inner_html = '';
    foreach ($_POST as $key => $entry) {
        $js_inner_html .= $key . ': ' . $entry . '<br />';
    }
?>
<script type='text/javascript'>
    $('#query-info').append('<div class="well"><?php echo $js_inner_html; ?></div>');
</script> 
```

# ios - 本地通知未针对时区进行调整

> ID：11801654
> 
> 赞同：9
> 
> 时间：2012-08-03T18:54:01.910
> 
> 标签：ios

我正在安排一个带有 NSDate 的本地通知，时间设置为晚上 9 点，并将通知的时区设置为 UTC/GMT。

如果我将设备时区设置为 UTC（时间设置为晚上 8.59），那么通知会按预期在晚上 9 点触发。

但是，如果我将设备时区设置为美国西海岸（即直接将其设置为西雅图或库比蒂诺或 PDT 等）并将时间设置为下午 1.59，或者将设备时区设置为美国东海岸并将时间设置为下午 4.59，那么通知不会分别在下午 2 点或 5 点触发。

但我期待它应该这样做，因为当它是世界标准时间晚上 9 点时，当前夏令时在世界标准时间晚上 9 点相当于东部时间下午 5 点和西部时间下午 2 点。

如果我将设备上的时间设置为晚上 8.59，而设备时区为 PDT，则通知将在晚上 9 点触发，即使我已将通知中的时区设置为 UTC/GMT，这是不正确的，因为太平洋夏令时间晚上 9 点不是晚上 9 点世界标准时间。

因此，在我看来，操作系统忽略了我正在设置的通知时区。有没有人有任何解释为什么它不能按预期工作？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T20:43:14.097

`timeZone`请参阅以下属性的文档 `UILocalNotification`：

> ...如果您为此属性分配一个有效的 NSTimeZone 对象，则触发日期将被解释为挂钟时间，当时区发生变化时会自动调整；适合这种情况的一个例子是闹钟。

因此，我假设如果您想要通知的绝对时间，则*不得*分配时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T07:23:08.617

夏令时更改似乎并非如此。我有一些将时区设置为 localTimeZone 的重复通知，但自从上周末以来，当时钟前进一个小时后，它们又在一个小时后触发，即在 19:00 而不是 18:00。

好像当我安排一个活动时，我必须确定那个日期的时区并使用它。

谢谢

# python - 遍历每日转储目录

> ID：11801658
> 
> 赞同：1
> 
> 时间：2012-08-03T18:54:16.093
> 
> 标签：python, awk, directory

我有 6 个月的数据要处理，看起来像这样

```
0101
0102
.
.
0131
0201
0202
.
.
all the way to
0630 
```

我想通过每个目录，并在内容上执行一个 awk 文件，或者每周执行一次（每 7 个目录将产生一周的数据

有没有一种简单的方法可以在 awk 或 python 中做到这一点？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:09:49.407

您可以使用它`find`来遍历您的树并`xargs`应用您的 awk 脚本：

```
find . -type f | xargs awk -f awkfile 
```

编辑：由于@nya 的输入，awk 语法得到了纠正。我不是 AWK 专家。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:14:27.207

为什么不使用平原`bash`？你可以试试这个： `find . -type f -exec awk -f 'your_awk_script.awk' {} \;`

`find`遍历目录树，`-exec`选项使它`awk -f your_awk_script.awk`在每个文件上执行给定的命令（在这种情况下）（`{}`是参数的默认占位符）。

要每 7 天运行一次这个小脚本，请查看`cron`.

# matlab - 为什么将 SetMode 设置为轨道会禁用自定义 KeyPressFcn 事件处理程序，回调

> ID：11801659
> 
> 赞同：2
> 
> 时间：2012-08-03T18:54:18.933
> 
> 标签：matlab, matlab-deployment, matlab-figure, matlab-guide

1-下面的代码显示了按下的键的属性。按下一个键试一试，观察结果。

```
figure('Name','Press keys to put event data in Command Window',...
         'KeyPressFcn',@(obj,evt)disp(evt)); 
```

你会看到这样的输出（例如按下空格键）

```
 Character: ' '
     Modifier: {1x0 cell}
          Key: 'space' 
```

2-现在只需在上面添加以下代码行（或者在清除工作区之前简单地执行它）

```
 cameratoolbar('SetMode','orbit'); 
```

现在按任意键，没有任何反应！控制权将不再转移到您的服装回调功能！（这里：@（obj，evt）disp（evt））。

WindowButtonDownFcn、WindowButtonUpFcn 也会发生同样的事情。

**我怎样**才能解决这个问题？我希望能够在执行 cameratoolbar('SetMode','orbit') 后处理 KeyPressFcn 或 WindowButtonDownFcn。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:19:43.980

我找到了答案：一旦调用 cameratoolbar('SetMode','orbit') 会发生以下两种情况之一：图形的句柄丢失或事件处理程序获取其默认值。我不确定是哪一个。因此，我们可以**添加以下代码**，将丢失的处理程序重新分配给我们自己的回调函数：

```
set(gcf,'KeyPressFcn',@(obj,evt)disp(evt)) 
```

# javascript - 对主干集合进行排序

> ID：11801660
> 
> 赞同：3
> 
> 时间：2012-08-03T18:54:32.063
> 
> 标签：javascript, sorting, backbone.js

## 所需的功能

我正在使用 Backbone.Collection 来查看可排序列表中的数据。我已经完成了单击某些 dom 元素会在我的 Collection 上设置属性的部分，以确定我想要排序的字段以及应该进行排序的方向。然后应该在 Collection 上触发排序，之后视图将更新。

最终，我希望能够对数字字段和字符串进行排序。某些字符串应按字母顺序排序，其他字符串应按自定义的预定义顺序排序。

## 我目前的做法

我在反向排序字符串上找到了以下帖子： [使用backbone.js 以反向顺序排序字符串](https://stackoverflow.com/questions/5636812/sorting-strings-in-reverse-order-with-backbone-js)

我尝试将其与比较器函数和以下自定义属性结合使用：

1.  “状态”字段中可能值的自定义排序顺序
2.  应该使用哪个字段进行排序
3.  排序的方向

## 到目前为止我得到的 Collection 和 Model 类：

### 收藏品

```
var ApplicationCollection = Backbone.Collection.extend({
  model: ApplicationModel,
  url: 'rest/applications',

  // sorting
  statusOrder: ['new', 'to_pay', 'payed', 'ready'],
  sortField: 'submission_timestamp',
  sortOrder: 'asc',
  sortBy: function() {
    console.log('ApplicationCollection.sortBy', this, arguments);
    console.log('this.comparator', this.comparator);
    var models = _.sortBy(this.models, this.comparator);
    if (this.sortOrder != 'asc') {
      models.reverse();
    }
    return models;
  },
  comparator: function(application) {
    console.log('ApplicationCollection.comparator', this, arguments);
    switch(this.sortField) {
      case 'status':
        return _.indexOf(this.statusOrder, application.get(this.sortField));
        break;
      case 'submission_timestamp':
      default:
        return application.get(this.sortField)
        break;
    }
  }
}); 
```

### 该模型

```
var ApplicationModel = Backbone.Model.extend({
  defaults: {
    'drupal_id': 0,
    'language': '',
    'last_name': '',
    'first_name': '',
    'address': '',
    'zip_code': '',
    'city': '',
    'country': '',
    'telephone': '',
    'cell_phone': '',
    'email': '',
    'date_of_birth': '',
    'email': '',
    'date_of_birth': '',
    'pilot_training_institute': '',
    'date_of_exam': '',
    'flight_hours_total': '',
    'date_of_last_flight': '',
    'date_of_mcc_certificate': '',
    'date_of_ir_renewel': '',
    'package': '',
    'submission_timestamp': '',
    'status': 'new'
  },
  urlRoot: 'rest/applications'
}); 
```

## 当前（不希望的）结果

我有一个存储在“pendingApplications”中的集合实例，如下所示：

```
var pendingApplications = new ApplicationCollection();
pendingApplications.fetch(); 
```

这会从服务器加载应用程序，并且一切都按计划进行。我可以使用应用程序列表渲染视图，模型上的所有属性等等。

要对集合进行排序，我执行以下操作：

```
pendingApplications.sortOrder = 'asc';
pendingApplications.sortField = 'current_timestamp'; // format: YYYY-mm-dd HH:mm:ss
pendingApplications.sort(); 
```

这会触发集合上的排序功能。控制台告诉我，“ApplicationCollection.sortBy”方法在“pendingApplications”实例的范围内执行，这是预期的。

但是，“ApplicationCollection.comparator”方法在全局范围内执行，我不知道为什么。比较器方法上的任何参数都不包含“pendingApplications”实例。

我想要的是让我的比较器方法在“pendingApplications”实例的范围内执行，或者至少我希望能够以某种方式访问​​“pendingApplications”实例上的属性。

## 范围问题？方法错误？欢迎任何建议...

有谁知道我该如何解决这个问题？或者我是不是走错了路，是否有另一种解决方案可以在 Backbone.Collection 上任意定义自定义排序？

# 解决方案

我最终实现了一个排序功能作为 Backbone.Collection 的装饰器。这样做的原因是因为我还有一个用于过滤集合中项目的装饰器。通过使用排序装饰器，我可以将排序应用于过滤后的项目子集，这可能会更快。

```
/**
 * returns a new Backbone.Collection which represents a sorted version of the
 * data contained within the original Backbone.Collection.
 *
 * @param {Backbone.Collection} original
 */
SortedCollection: function(original, criteria) {
  var sorted = new original.constructor(),

  // sensible defaults
  defaultSortCriteria = {
    custom: {},
    field: 'id',
    direction: 'asc'
  };

  // configuration
  sorted.sortCriteria = _.extend(defaultSortCriteria, criteria);

  // do the stuff
  sorted.comparator = function(a, b) {
    // @formatter:off
    var criteria = this.sortCriteria,
        custom, 
        field = criteria.field,
        direction = criteria.direction,
        valA,
        valB;
        // @formatter:on

    // custom sort
    if (_.has(criteria.custom, field)) {
      custom = criteria.custom[field];

      // custom param is a comparator itself.
      if (_.isFunction(custom)) {
        return custom(a, b);
      }
      // custom param is an example of a sorted array.
      else if (_.isArray(custom)) {
        valA = _.indexOf(custom, a.get(field));
        valB = _.indexOf(custom, b.get(field));
      }
      else {
        throw new Error('Invalid custom sorting criterium.');
      }
    }
    // nothing custom here, use the field value directly.
    else {
      valA = a.get(field);
      valB = b.get(field);
    }

    // compare that shizzle!
    if (valA > valB) {
      return (direction == 'desc') ? -1 : 1;
    }
    if (valA < valB) {
      return (direction == 'desc') ? 1 : -1;
    }
    else {
      if (a.get('id') > b.get('id')) {
        return (direction == 'desc') ? -1 : 1;
      }
      else if (a.get('id') < b.get('id')) {
        return (direction == 'desc') ? 1 : -1;
      }
      else {
        return 0;
      }
    }
  };

  // update collection if original changes
  original.on("add", function(model) {
    sorted.add(model);
  });
  original.on("reset", function() {
    sorted.reset(original.models);
  });
  original.on("remove", function(model) {
    sorted.remove(model);
  });

  return sorted;
} 
```

装饰器的用法：

```
original = new ApplicationsCollection();
sortable = SortedCollection(original);
sortable.sortCriteria = { 
  sortField: 'submission_timestamp',
  sortDirection: 'desc'
}
sortable.sort(); 
```

上面的代码片段执行以下操作：

*   实例化一个新的 ApplicationsCollection；
*   实例化扩展原始集合并侦听原始集合上的相关事件的可排序集合。
*   告诉可排序集合按“submission_timestamp”属性降序排序。
*   对可排序集合进行排序。

当新模型被添加到原始集合中或从原始集合中删除时，或者当原始集合被重置时，新的可排序集合也会自动保持排序。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T19:15:53.150

默认情况下，该`comparator()`函数在集合范围内调用，至少在最新版本的 Backbone 中是这样。

我怀疑你可能已经通过定义`sortBy()`函数打破了这一点。该函数已由 Backbone 定义，并且`sort()`在某些情况下由 Backbone 的函数内部使用。尝试删除该功能，看看它是否按预期工作。

看来您只是`sortBy()`用来颠倒排序的顺序。这可以通过在`comparator()`适当的时候将返回值乘以 -1 在函数中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T19:22:30.587

根据另一个答案，修改您的 sortBy 方法以调用原始的 Collection.sortBy 方法，如下所示：

```
sortBy: function(){
  var models = Backbone.Collection.prototype.sortBy.apply(this, arguments);
  if (this.sortOrder != 'asc') {
    models.reverse();
  }
  return models;
} 
```

# c# - 当我调用 .Show() 时，我的窗口不显示

> ID：11801664
> 
> 赞同：0
> 
> 时间：2012-08-03T18:54:43.503
> 
> 标签：c#, wpf

我在 C# 中定义了这个窗口：

```
<Window x:Class="VirginOneAccount.AccountInfo"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Account Information" Height="362" Width="614" Loaded="Window_Loaded">
<Window.Resources>
    <DataTemplate x:Key="AccountTemplate">
        <StackPanel Orientation="Horizontal">
            <TextBlock Text="{Binding Path=AccountName}"/>
        </StackPanel>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="418*" />
        <ColumnDefinition Width="174*" />
    </Grid.ColumnDefinitions>
    <ComboBox Height="23" HorizontalAlignment="Stretch" Margin="40,16,42,0" Name="AccountsList" VerticalAlignment="Top" Width="Auto" IsSynchronizedWithCurrentItem="True"
      ItemsSource="{Binding}" ItemTemplate="{StaticResource AccountTemplate}" AllowDrop="False" DataContext="{Binding}" IsEnabled="True" SelectionChanged="AccountsList_SelectionChanged" />
    <Button Content="Save Changes" Height="23" HorizontalAlignment="Left" Margin="40,0,0,10" Name="saveChanges" VerticalAlignment="Bottom" Width="90" IsEnabled="False" Click="saveChanges_Click" />
</Grid> 
```

然后在主窗体中，我调用`Show()`窗口的一个实例：

```
AccountInfo Accounts = new AccountInfo();
Accounts.Show(); 
```

但我看到的只是一个空窗口（甚至不是正确的大小）。为什么它不打开*我的*窗户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:45:54.477

我做了一个简单的窗口，这对我有用。把它放到一个文本框里，看看它是否有效。

```
public MainWindow()
{   
    InitializeComponent();

    Window1 win1 = new Window1();
    win1.Show();            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T19:23:44.280

xaml 定义和代码隐藏文件之间的窗口类名称可能不同。例子

```
telerik:RadWindow x:Class="MyWindow"
vs 

    public partial class My_Window : RadWindow
    {
        public My_Window()
        {
            InitializeComponent();
        }
    } 
```

在这种情况下`initializeComponent()`，编译器无法识别调用

# c# - 通过 C# 套接字正确发送和接收？

> ID：11801666
> 
> 赞同：0
> 
> 时间：2012-08-03T18:54:55.297
> 
> 标签：c#, image, sockets

我正在尝试使用 C# 创建远程桌面服务器和客户端。服务器捕获屏幕，然后通过套接字将其发送给客户端。我正在使用下面的代码，尽管它只在客户端显示 jpeg 图像的一部分。我认为这是因为图像是在多个数据包中发送的，而目前代码只读取一个数据包并显示它。谁能解释我将如何更改我的代码，以便它在显示之前接收多个数据包（整个图像）。

**服务器代码：**

```
Socket serverSocket;
Socket clientSocket;

public Form1()
{
    InitializeComponent();

    backgroundWorker1.RunWorkerAsync();
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    try
    {
        serverSocket = new Socket(AddressFamily.InterNetwork,
                                  SocketType.Stream,
                                  ProtocolType.Tcp);

        IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Any, 8221);

        serverSocket.Bind(ipEndPoint);
        serverSocket.Listen(4);

        //Accept the incoming clients
        serverSocket.BeginAccept(new AsyncCallback(OnAccept), null);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "Stream Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
}

private void timer1_Tick(object sender, EventArgs e)
{
    timer1.Stop();

    Rectangle bounds = new Rectangle(0, 0, 1280, 720);
    Bitmap bitmap = new Bitmap(bounds.Width, bounds.Height);

    using (Graphics g = Graphics.FromImage(bitmap))
    {
        g.CopyFromScreen(Point.Empty, Point.Empty, bounds.Size);
    }

    System.IO.MemoryStream stream = new System.IO.MemoryStream();

    ImageCodecInfo myImageCodecInfo;
    System.Drawing.Imaging.Encoder myEncoder;
    EncoderParameter myEncoderParameter;
    EncoderParameters myEncoderParameters;

    myEncoderParameters = new EncoderParameters(1);

    myImageCodecInfo = GetEncoderInfo("image/jpeg");
    myEncoder = System.Drawing.Imaging.Encoder.Quality;
    myEncoderParameter = new EncoderParameter(myEncoder, 40L);
    myEncoderParameters.Param[0] = myEncoderParameter;

    bitmap.Save(stream, myImageCodecInfo, myEncoderParameters);

    byte[] imageBytes = stream.ToArray();

    stream.Dispose();

    clientSocket.Send(imageBytes);

    timer1.Start();
} 
```

如您所见，我正在使用一个将间隔设置为 30 的计时器来发送图像字节。

**客户端代码：**

```
public Socket clientSocket;

byte[] byteData = new byte[2048];
MemoryStream ms;

public Form1()
{
    InitializeComponent();

    backgroundWorker1.RunWorkerAsync();

    this.DoubleBuffered = true;
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    try
    {
        clientSocket = new Socket(AddressFamily.InterNetwork,
                       SocketType.Stream, ProtocolType.Tcp);

        IPEndPoint ipEndPoint = new IPEndPoint(IPAddress.Parse("MY EXTERNAL IP HERE"), 8221);

        //Connect to the server
        clientSocket.BeginConnect(ipEndPoint,
            new AsyncCallback(OnConnect), null);

    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "SGSclient",
                        MessageBoxButtons.OK,
                        MessageBoxIcon.Error);
    }
}

private void OnConnect(IAsyncResult ar)
{
    try
    {
        //Start listening to the data asynchronously
        clientSocket.BeginReceive(byteData,
                                   0,
                                   byteData.Length,
                                   SocketFlags.None,
                                   new AsyncCallback(OnReceive),
                                   null);
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "Stream Error",
            MessageBoxButtons.OK, MessageBoxIcon.Error);
    }
}

private void OnReceive(IAsyncResult ar)
{
    try
    {
        int byteCount = clientSocket.EndReceive(ar);

        ms = new MemoryStream(byteData);

        using (BinaryReader br = new BinaryReader(ms))
        {
            this.BackgroundImage = Image.FromStream(ms).GetThumbnailImage(this.ClientRectangle.Width, this.ClientRectangle.Height, null, IntPtr.Zero);
        }

    }
    catch (ArgumentException e)
    {
        //MessageBox.Show(e.Message);
    }

    clientSocket.BeginReceive(byteData, 0, byteData.Length, SocketFlags.None, new AsyncCallback(OnReceive), null);
} 
```

客户端旨在接收图像，然后将其显示在表单的背景上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T20:05:59.760

You need to add application level protocol to your socket communications.

Add a header to all messages sent. The header contains the count of bytes that follow. It is simpler code and performs better to have a byte count than to kludge a termination sequence.

The client then does two sets of reads: 1) Read for the number of bytes that are known to be in any header.

2) After extracting the byte count from the header, loop reading until you get the indicated byte count.

A must-read article for all people who are writing socket communications: [http://nitoprograms.blogspot.com/2009/04/message-framing.html](http://nitoprograms.blogspot.com/2009/04/message-framing.html) From that article: Repeat this mantra three times: "TCP does not operate on packets of data. TCP operates on streams of data."

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:46:14.210

我之前回答过一个类似的问题，并提供了一个完整的示例，我认为它完全符合您的要求。请参阅：[通过 TCP 连接传输屏幕截图](https://stackoverflow.com/questions/5527670/socket-is-not-working-as-it-should-help/5575287#5575287)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:06:52.183

您必须在图像的末尾设置一个分隔符，一些字节集将 sinalize 图像已结束的服务器。它也称为**文件结束**(EOF) 或*消息结束*。TCP 不会将图像拆分为应用程序的逻辑数据包，因此您必须编写自己的信息控制。

逻辑类似于： **CLIENT**

```
byte[] EndOfMessage = System.Text.Encoding.ASCII.GetBytes("image_end");
byte[] ImageBytes = GetImageBytes();
byte[] BytesToSend = new byte[EndOfMessage.Length + ImageBytes.Length];
Array.Copy(ImageBytes, 0, BytesToSend);
Array.Copy(EndOfMessage, 0, BytesToSend, ImageBytes.Length, EndOfMessage.Length);

SendToServer(BytesToSend); 
```

**服务器**

```
byte[] EndOfMessage = System.Text.Encoding.ASCII.GetBytes("image_end");
byte[] ReceivedBytes;

while(!IsEndOfMessage(ReceivedBytes, EndOfMessage ))
{
//continue reading from socket and adding to ReceivedBytes
}

ReceivedBytes = RemoveEndOfMessage(ReceivedBytes, EndOfMessage );
PrintImage(ReceivedBytes); 
```

我现在正在工作，无法提供完整的运行示例，对不起。

问候

* * *

支持方式：

```
private bool IsEndOfMessage(byte[] MessageToCheck, byte[] EndOfMessage)
{
    for(int i = 0; i++; i < EndOfMessage.Length)
    {
        if(MessageToCheck[MessageToCheck.Length - (EndOfMessage.Length + i)] != EndOfMessage[i])
            return false;
    }

    return true;
}

private byte[] RemoveEndOfMessage(byte[] MessageToClear, byte[] EndOfMessage)
{
    byte[] Return = new byte[MessageToClear.Length - EndOfMessage.Length];
    Array.Copy(MessageToClear, Return, Return.Length);

    return Return;
} 
```

同样，我无法测试它们，因此您可能会发现一些错误。

# javascript - 带注释的时间线，重绘时图形闪烁

> ID：11801670
> 
> 赞同：0
> 
> 时间：2012-08-03T18:55:09.667
> 
> 标签：javascript, google-visualization

[https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline](https://developers.google.com/chart/interactive/docs/gallery/annotatedtimeline)

我想在放大时重绘图形，然后在缩小时重绘图形，但在重绘时会闪烁。有人建议添加一个准备好的事件监听器，但这不只是在另一个返回就绪后运行一个函数吗？绘制图表返回准备就绪，但这不会导致图表闪烁吗？无论如何，有人可以用示例/伪代码解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:04:47.430

有一种称为双缓冲的技术可以消除重绘时的闪烁——基本上，您将所有内容绘制到位图上，然后在旧位图上绘制新位图，而不会擦除其间的任何内容。

以下链接很好地描述了它：

[http://www.realapplets.com/tutorial/DoubleBuffering.html](http://www.realapplets.com/tutorial/DoubleBuffering.html)

约翰

# ajax - x 个字符后的 ajax 调用

> ID：11801672
> 
> 赞同：3
> 
> 时间：2012-08-03T18:55:21.430
> 
> 标签：ajax, jquery

我有一个在输入的最大长度上触发的 ajax 调用。但是，如果用户继续输入字符（因为它们算作按键），它会继续触发。有没有办法在 5 个字符限制之后防止额外的 ajax 调用？

html

```
<input type="text" value="" id="billZipCode" name="billZipCode" class="smallInput coreAddrBill" maxlength="5"> 
```

javascript

```
//show city/state on input maxlength
$("input#billZipCode").live("keyup", function( event ){
    if(this.value.length == this.getAttribute('maxlength')) {
        if ($(this).valid() == true ) {
            zipLookup(this, "USA");

        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:58:14.110

在字段上设置一个`.data`属性：

```
//show city/state on input maxlength
$("input#billZipCode").live("keyup", function( event ){

    if(this.value.length == this.getAttribute('maxlength')) {
        if(!$(this).data('triggered')) {
            // set the 'triggered' data attribute to true
            $(this).data('triggered',true); 
            if ($(this).valid() == true ) { zipLookup(this, "USA"); } 
        }
    } else { $(this).data('triggered',false); }

}); 
```

`if`如果您想继续运行它直到邮政编码有效，请在第二条语句中移动分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T18:56:43.843

使用布尔变量来了解是否已经触发了调用（将其初始化为 false，在调用之前断言它仍然为 false，并在调用时将其设置为 true）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:00:45.653

尝试这个：

```
var ready = true;
$("input#billZipCode").on("keyup", function( event ){
    if(this.value.length == this.getAttribute('maxlength')) {
        if ($(this).valid() && ready) {
            zipLookup(this, "USA");
            ready = false;  
        }
    }
}); 
```

# c++ - 构建时的 Microsoft C++ 库符号链接

> ID：11801673
> 
> 赞同：2
> 
> 时间：2012-08-03T18:55:21.223
> 
> 标签：c++, visual-studio-2008, linker

使用 Visual Studio C++ 2008 Express：

我正在尝试在编译如下的构建中执行最后的链接步骤：

*   使用开关静态编译库`foo.lib`（构建不产生 a `.dll`） 。`/MD`构建`foo.lib`成功。文件和头`.lib`文件被发送到以下库的项目可以找到它们的目录。`foo.lib`源代码是用非托管 C++ 编写的。

*   库`bar.dll`被编译为带有`/MD /LD`开关的动态库。`bar.dll`取决于`foo.lib`导出的符号。两者`bar.dll`和都是使用来自 VS2008 Express 工具链的相同和二进制文件从`foo.lib`源代码构建的。源代码是用非托管 C++ 编写的。`cl.exe``link.exe``bar.dll`

*   构建的所有`.obj`文件都`bar.dll`成功，但在最终执行期间`link.exe`会产生`bar.dll`，我收到**数千个**`LNK2001`关于未定义外部的错误。所有未定义的外部都是我希望在标准 C++ 库中出现的东西：诸如`std::basic_string`构造函数、`std::_Throw`类、`ostream`重载运算符等等。`link.exe`表示未定义的外部**在内部未定义`foo.lib`！**

*   目标是`bar.dll`在其中包含整个静态链接的代码`foo.lib`，以及它自己的对象，但动态地取决于运行时的存在/`MSVCR90.dll`解决`MSVCP90.dll`。

我是想用这个构建设置一个不可能的情况，还是我只是做错了什么？如果这在理论上根本行不通，请告诉我。`foo.lib`否则，请让我知道我可以尝试哪些诊断程序来确定为什么 C++ 库符号在最后的链接步骤中不可用。

**编辑**：更具体的信息：`foo.lib`是[LLVM](http://llvm.org) 3.1 并且`bar.dll`是`libgl-gdi`( )从分支`llvmpipe`构建的[Mesa](http://cgit.freedesktop.org/mesa/mesa)`master`（目标是生成`opengl32.dll`在 上运行的`llvmpipe`）。我已经满足了所有构建依赖项，如下所示：

*   LLVM 构建依赖于[CMake](http://www.cmake.org)作为构建系统和 Python 2.7。
*   Mesa 构建依赖于[SCons](http://www.scons.org)作为构建系统、LLVM 2.6 或更高版本、Python 2.7、pywin32、python-libxml2、bison 和 flex。除了上述之外，只有 LLVM 在运行时被运送；其余的只是构建过程中使用的“工具”。

我还根据需要为每个项目定制了构建，以设置环境变量并确保它们始终只使用`/MD`开关而不是使用`/MT`其他开关来选择错误的 C 运行时库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:10:56.260

从[MSDN 帮助](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.71%29.aspx)：

> 定义**_MT**和**_DLL**以便从标准 .h 文件中选择运行时例程的多线程和 DLL 特定版本。此选项还会导致编译器将库名称 MSVCRT.lib 放入 .obj 文件中。使用此选项编译的应用程序静态链接到 MSVCRT.lib。该库提供了一层代码，允许链接器解析外部引用。实际工作代码包含在 MSVCR71.DLL 中，必须在运行时对与 MSVCRT.lib 链接的应用程序可用。
> 
> 当 /MD 与定义的 _STATIC_CPPLIB (/D_STATIC_CPPLIB) 一起使用时，它将导致应用程序链接到静态多线程标准 C++ 库 (libcpmt.lib) 而不是动态版本 (msvcprt.lib)，同时仍然通过动态链接到主 CRT msvcrt.lib。

更具体地说 - 这段摘录：“*使用此选项编译的应用程序静态链接到 MSVCRT.lib* ”

换句话说 - 您*需要*将您的 foo.lib 链接到 msvcrt.lib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:59:16.427

这是一个工作示例，可以执行您正在尝试执行的操作。

富.h：

```
#ifndef FOO_H
#define FOO_H

extern void print_foo();

#endif 
```

foo.cpp：

```
#include "foo.h"

#include <iostream>

void print_foo() {
  std::cout << "foo" << std::endl;
} 
```

将 foo.cpp 构建到依赖于动态运行时库的静态库中：

```
cl /c /MD /EHsc foo.cpp
lib foo.obj 
```

酒吧.h：

```
#ifndef BAR_H
#define BAR_H

#ifdef BAR_DLL
#define BARAPI __declspec(dllexport)
#else
#define BARAPI __declspec(dllimport)
#endif

BARAPI void print_bar();

#endif 
```

bar.cpp：

```
#include "bar.h"

#include <iostream>
#include "foo.h"

BARAPI void print_bar() {
  std::cout << "bar" << std::endl;
  print_foo();
} 
```

将 bar.cpp 构建到一个 DLL 中，该 DLL 从 foo.lib 中提取代码并依赖于动态运行时库：

```
cl /c /MD /EHsc /DBAR_DLL bar.cpp
link /DLL bar.obj foo.lib 
```

还有一个简单的 main.cpp 来证明它有效：

```
#include "bar.h"

int main() {
  print_bar();
  return 0;
} 
```

像这样构建它：

```
cl /c /MD /EHsc main.cpp
link main.obj bar.lib 
```

（运行时库应该自动进入，因为 /MD 选项应该将目标文件标记为需要动态运行时库。）

main.exe 输出：

```
bar
foo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:10:36.367

这是视觉工作室项目的常见混淆点。

/MD 不构建静态库。这是一个可以与 Visual Studio 的任何二进制输出（lib、dll、exe）一起使用的标志。它仅仅意味着你告诉你的二进制文件使用静态 CRT（C 运行时）。在常见情况下，这是错误的选择，当链接到不静态链接 CRT（使用动态 CRT）的应用程序或 DLL 时，您会遇到链接问题。

在这里查看更多信息：

[http://msdn.microsoft.com/en-us/library/2kzt1wy3(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/2kzt1wy3%28v=vs.71%29.aspx)

在配置属性/常规/配置类型下的项目设置下应该有一个设置。这应该是你用来确定你正在构建什么样的二进制文件

# javascript - 更新 D3 圈子包布局

> ID：11801674
> 
> 赞同：4
> 
> 时间：2012-08-03T18:55:26.733
> 
> 标签：javascript, d3.js, transition, data-visualization, circle-pack

我正在尝试使用我在 json 中收到的数据动态更新 d3 圆形包布局。每一秒我都会调用 d3.json() 来获取新的 json。我的实现不是更新现有的可视化，而是在旧的可视化下创建一个新的可视化。我想动态更新现有布局...

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="d3.v2.js"> 
</script>

<script type="text/javascript" src="jquery-1.4.min.js"></script>

<link rel="stylesheet" href="style.css" type="text/css">
<link rel="stylesheet" href="syntax.css" type="text/css">
<link rel="stylesheet" href="pack.css" type="text/css">

</head>

<body>

<div id="chart"> </div>
<script type="text/javascript">

    var width = 960,
        height = 960,
        format = d3.format(",d");

    var pack = d3.layout.pack()
        .size([width - 4, height -4])
        .value(function(d) { return d.size; });

    var vis = null;
    var node = null;

    vis = d3.select("#chart").append("svg")
    .attr("width", width)
    .attr("height", height)
    .attr("class", "pack");
/*      vis.append("g")
    .attr("transform", "translate(2, 2)"); */

    function update(json){

        // Creating the circle packed core
        var gNodes = vis.data([json]).selectAll("g.node")
          .data(pack.nodes);

               //remove old data
        gNodes.exit().remove();

    }

setInterval(function(){
    d3.json("http://10.0.1.4:8080/cluster", function(json) {        
        update(json);
//update the visualization

        vis
          .selectAll("circle")
          .data([json]).selectAll("g.node")
          .data(pack.nodes)
          .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
          .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
          .transition()
          .duration(500)
          .attr("r", function(d) { return d.children ? coreSize : d.r; });

        var node = gNodes
          .enter().append("g")
          .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
          .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
        node.append("title")
        .text(function(d) { return (d==null? "": d.name + (d.children ? "" : ": " + format(d.size))); });

        node.append("circle")
        .attr("r", function(d) { return (d==null? 0: d.r); });

        node.filter(function(d) { return (d==null? "" : !d.children); }).append("text")
        .attr("text-anchor", "middle")
        .attr("dy", ".3em")
        .text(function(d) { return (d==null?"":d.name.substring(0, d.r / 3)); });

    });
    }, 1000);

    </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-29T12:03:52.667

看看我[这里](http://jsfiddle.net/VividD/WDCpq/8/)的例子。

基本上，有用于初始加载的代码，其中所有圆圈、工具提示等都被创建并定位在初始位置。同样，布局（包）被创建。

然后，在每次按下按钮时，都会将新数据加载到包中，并重新计算包。关键代码在这里：

```
if (dataSource == 0)
    pack.value(function(d) { return d.size; });
if (dataSource == 1)
    pack.value(function(d) { return 100; });
if (dataSource == 2)
    pack.value(function(d) { return 1 +
             Math.floor(Math.random()*501); });

var data1 = pack.nodes(data); 
```

（我有三个按钮，这就是为什么 3 ifs）

之后，元素被转换到新的位置，并且它的属性会根据你的决定而改变。

以下是一些带有过渡效果的图片：

开始：

![开始](../Images/9bb1c4176bb2493d4b64c4ab7076f5ca.png)

过渡：

![过渡](../Images/5d81dfa5a8bdbee045185a0915d7f9c5.png)

结尾：

![结尾](../Images/80ce744ae85e4b4e1d9b4886c843e08b.png)

# android - 引用 maven 项目的标准 android 项目 - SDK 20.0.1 和 ADT 20.0.2 - java.lang.NoClassDefFoundError

> ID：11801682
> 
> 赞同：1
> 
> 时间：2012-08-03T18:56:21.133
> 
> 标签：android, maven, eclipse-plugin, adt

更新到新的 SDK 20.0.1 和 ADT 20.0.2 后，我的 Android 项目在运行时中断。在开发时一切似乎都很好，但是当我运行时，我得到 java.lang.NoClassDefFoundError 异常。

我使用以下方法引用 Maven 项目：Properties > Java Build Path > Projects > Add

不适合我：

*   导出依赖项不起作用（订单和导出菜单）
*   我不想构建依赖项并将其放在 libs/ 文件夹中

如何解决？

# iphone - 停止 iPhone 调整 HTML 电子邮件大小的问题

> ID：11801685
> 
> 赞同：16
> 
> 时间：2012-08-03T18:56:25.670
> 
> 标签：iphone, html, css, html-email

我在尝试阻止 iPhone 调整 HTML 电子邮件的大小以适应屏幕时遇到问题。下面的代码在放入该部分时似乎无效。

我的目标只是停止重新调整字体大小。我使用 -webkit-text-size-adjust:none; 尝试了其他变体。内联和其他方式，都没有成功。

非常感谢任何建议或替代解决方案。

> @media screen and (max-device-width: 480px){
> 
> ```
> /*fixes too big font in mobile Safari*/
> html, body, form, fieldset, p, div, h1, h2, h3, h4, h5, h6 {
> -webkit-text-size-adjust:none; }  }       </style> 
> ```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T00:45:37.407

iPhone 在调整大小时似乎很痛苦，尤其是当您切换手机的方向时。您是否尝试过添加带有视口设置的元标记？

```
<meta name="viewport" content="width=device-width, maximum-scale=1, minimum-scale=1, user-scalable=no"/> 
```

它确实可以防止它们缩放，但我还没有找到更好的方法来阻止 iPhone 在方向变化时缩放。我不确定这是否会在这种情况下有所帮助，但只是一个尝试的建议。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-05T08:53:28.887

我被这个问题困住了，网上没有可用的解决方案。直到我意识到是什么原因造成的。

**原因：** 如果您在电子邮件中有图像，则会出现此问题。当图像自动缩放时，整个电子邮件/页面将自动适应窗口。

**解决方案：为****最小宽度**（300 像素，因此它不会占用整个 320 像素 iphone 宽度）、**最大宽度**（您想要的最大宽度）和**100% 宽度** 为图像添加内联样式。

即图像 src="image.jpg" style="width: 100%; min-width: 300px; max-width: 500px;"

为我工作，...希望这也能帮助你！;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T02:30:29.977

您所做的是正确的，但问题是`-webkit-text-size-adjust:none;`，您应该以下列方式使用它，而不是在样式标签内使用：

```
<body style="-webkit-text-size-adjust:none;"> 
```

这意味着您应该将其用作内联 css 属性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-21T13:53:07.443

为了摆脱这个问题，你必须在你的 CSS body 标签中加入以下内容：

```
 -webkit-text-size-adjust: 100%; 
```

这样 Safari 会将文本保持为预期大小的 100%。如果您将该值设置为 none，用户将无法增加字体，这是不受欢迎的行为。

此 CSS 属性受支持并且应该可以工作。

查看官方 Safari 支持的 CSS 参考：

[https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html](https://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html)

此外请注意，媒体类型屏幕支持：

*   Safari 4.0 及更高版本。
*   iOS 1.0 及更高版本。

我希望这有帮助。

BR，
托利斯

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-15T12:46:34.097

视网膜 iPhone 的宽度为 640 像素，您的媒体查询在 480 像素处停止。

无论如何，您可以完全摆脱媒体查询。唯一会使用此属性 ( `-webkit-text-size-adjust:none`) 的基于 webkit 的邮件客户端是 iPhone 和 iPad 的邮件应用程序。

邮件应用程序也可能是唯一支持 CSS3 的客户端

# wpf - 在 D&D 操作后显示 WPF 上下文菜单

> ID：11801688
> 
> 赞同：0
> 
> 时间：2012-08-03T18:56:31.347
> 
> 标签：wpf, drag-and-drop, contextmenu

这是我的问题；当 D&D 操作完成时，我想显示一个上下文菜单，其中包含在后面的代码中动态创建的项目。

我不能做的是

1.  如果选中，插入将取消取消放置操作的项目
2.  当我单击菜单外的任何位置时，我找不到保持菜单打开的方法

我该怎么做这两件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:12:59.163

显示上下文菜单不会阻止 D&D 操作完成，因此不会等到用户处理上下文菜单。您将不得不以某种方式保存 D&D 操作（捕获正在丢弃的内容并抓住它）并等待完成操作，直到上下文菜单被解决。

上下文菜单在失去焦点时会自动关闭。但是，有一个[StaysOpen](http://msdn.microsoft.com/en-us/library/system.windows.controls.contextmenu.staysopen.aspx)属性可以覆盖此行为。如果您设置`StaysOpen`为`true`，它将保持打开状态，直到您明确关闭它（通过设置`IsOpen`为`false`）。

# sql - 构造函数 DateTime 是否将字符串或 ONLY TIMESTAMP 类型作为参数？

> ID：11801696
> 
> 赞同：0
> 
> 时间：2012-08-03T18:57:14.390
> 
> 标签：sql, database, sqlite, datetime

我正在使用 SQLite SQL 语句或查询。

到目前为止，我能够通过询问 stackoverflow 问题来弄清楚一些事情，这些问题在执行此类 SQL 语句时可能会导致问题。

但是，我仍然无法得到任何结果？

这是我的 SQL 查询：

```
SELECT * 
FROM Alarms 
WHERE ALARMSTATE IN (0,1,2) 
  AND ALARMPRIORITY IN (0,1,2,3,4) 
  AND ALARMGROUP IN (0,1,2,3,4,5,6,7) 
  AND DateTime(ALARMTIME) BETWEEN datetime("2012-08-02 00:00:00") 
                    AND datetime("2012-08-03 00:00:00") 
ORDER BY ALARMTIME DESC 
```

这是我在 datagridView 控件中查看的表格： 如您所见，表格中有昨天和前一天的记录。

![在此处输入图像描述](../Images/1bcf4f6f79bee25db2a0557e1f6c8489.png)

我更正了所有有问题的列的格式，例如我的 ALARMTIME，它是数据类型的 TEXT。仍然没有得到任何结果，我决定直接在 SQLite Administrator 应用程序中运行 SQL 语句，如下所示。令人惊讶的是，我得到了相同的结果，对于数据集来说，它什么也没有，或者是 nill 或 null。但是，SQLite 管理员向我展示了 DateTime 只接受 TIMESTAMP 作为参数而不是 TEXT。如果是这样，即使我的其他一切都正确，我上面的 SQL 语句也不起作用。我这样说对吗？

![在此处输入图像描述](../Images/646ebde14b16d489b45c075a6c673c32.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:00:10.953

这是我的答案。据我了解， DATETIME 应该将字符串或时间戳作为参数，但就我而言，它对我不起作用。

由于我的 ALARMTIME 列是 TEXT，我可以使用以下 SQL 语句查询我的表并检索我正在寻找的数据集。

```
SELECT *
FROM Alarms
WHERE ALARMSTATE IN (0,1,2)
  AND ALARMPRIORITY IN (0,1,2,3,4)
  AND ALARMGROUP IN (0,1,2,3,4,5,6,7)
  AND ALARMTIME LIKE "2012/08/01%"
  ORDER BY ALARMTIME DESC 
```

我根本无法将我的 ALARMTIME 文本转换为日期时间类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:55:58.373

尝试在 8/1 和 8/3 之间使用，你会得到 8/2 的。

你拥有它的方式应该在两次之间拉起警报

**编辑**

你能改变你`ALARMTIME`的`DATETIME`格式吗？然后，您将能够使用 Between，并且您不必将文本转换为`DATETIME`.

如果您转换为`DATETIME`类型，您的查询将具有更好的灵活性。将来也会更容易使用。

我相信这`DATETIME`是一个重载的文本类型，所以它应该输出文本

# apache - 如何找到服务器端包含自己的文件名？

> ID：11801700
> 
> 赞同：1
> 
> 时间：2012-08-03T18:57:30.457
> 
> 标签：apache, include, ssi

这是一个不寻常的请求，我知道，但我有一个包含在其中使用 <!--#flastmod file="this_filename.shtml" --> （因为 LAST_MODIFIED 只会返回调用文档的修改日期），如果我能够为“文件”使用一个变量，如果包含的名称发生更改，我不必担心代码中断。

我测试的 SSI 变量都返回调用文档的路径和文件名，而不是包含本身。是否有任何会返回包含的信息？

在 RHEL 上使用 Apache 2.0。不使用 PHP，只使用 HTML 中的直接 SSI 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T03:02:57.970

使用 echo 命令和`document_uri`SSI 环境变量来执行此操作：

```
<!--#echo var="document_uri"--> 
```

**参考**

*   [万维网上的 CGI 编程，第 5 章：服务器端包含 - 附加 SSI 环境变量](http://www.oreilly.com/openbook/cgi/ch05_03.html#CGI-CHP-5-TBL-2)

# jquery - 无法获取动画的其余部分

> ID：11801705
> 
> 赞同：0
> 
> 时间：2012-08-03T18:58:01.100
> 
> 标签：jquery, html, css, web-services, jquery-ui

问题：只获取动画的第一部分。它不会运行悬停动画。这个想法是让底部在悬停时向上或向下移动。

在这个网站上工作： [http ://ripsraps.com/daniel/](http://ripsraps.com/daniel/)

使用此脚本为导航栏设置动画：http: [//net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-mootools-homepage-inspired-navigation-effect-using-jquery/](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-create-a-mootools-homepage-inspired-navigation-effect-using-jquery/)

这是jQuery：

```
$(document).ready(function()
{
    slide("#sliding-navigation", 25, 15, 150, .8);
});

function slide(navigation_id, pad_out, pad_in, time, multiplier)
{
    var list_elements = navigation_id + " li.sliding-element";
    var link_elements = list_elements + " a";
    var timer = 0;
    $(list_elements).each(function(i)
    {

        $(this).css("margin-top","-180px");
        timer = (timer*multiplier + time);
        $(this).animate({ marginTop: "0" }, timer);
        $(this).animate({ marginTop: "15px" }, timer);
        $(this).animate({ marginTop: "0" }, timer);
    });     
    $(link_elements).each(function(i)
    {
        $(this).hover(
        function()
        {
            $(this).animate({ paddingTop: pad_out }, 150);
        },      
        function()
        {
            $(this).animate({ paddingTop: pad_in }, 150);
        });
    });
} 
```

PS：我不懂fiddle，不会给出任何fiddle链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:25:58.333

现在您的动画正在应用，正如您在 Chrome 调试器中检查代码时所看到的那样。它只是没有显示，因为您没有正确应用它。

我认为您应该将悬停效果应用于 list_elements 而不是 link_elements。我也会使用 marginTop 来制作动画，而不是 paddingTop。

PS：小提琴并不难，你真的应该尝试一次。

# jquery - 在 Rails 中使用 Twitter Bootstrap 模式在 IE9 中不会触发“显示”事件

> ID：11801711
> 
> 赞同：9
> 
> 时间：2012-08-03T18:58:42.033
> 
> 标签：jquery, ruby-on-rails, twitter-bootstrap, fullcalendar, jquery-events

我有一个涉及几个不同框架/库的问题，尽管主要的是 Twitter Bootstrap(js) 和 Rails。

我的应用程序中有一个链接，它以一些 js 响应：

```
$(function() {

    var $modal = $('<%= escape_javascript( render 'front_end/bookings/modal', :product => @product, :customer => @customer, :booking => @booking ) %>'),
        $calendar = $modal.find('#calendar'),
        currentProduct = <%= raw(@product.to_json) %>;,
        initBookingCalendar;

    $('body').append($modal);

    $modal.modal('show');

    /* Booking Calendar */
    initBookingCalendar = function(el, productId) {

        el.fullCalendar()

        ...

    };

    $($modal).on('shown', function() {
        if($calendar.is(':empty')) {
            initBookingCalendar($calendar, <%= @product.id %>);
        }
    });
}); 
```

问题是“显示”事件由于某种原因在 IE9 中没有触发！？我在这里重现了这个问题：http: [//jsfiddle.net/tvkS6/](http://jsfiddle.net/tvkS6/)并通过这样做使它工作：http: [//jsfiddle.net/tvkS6/9/](http://jsfiddle.net/tvkS6/9/)。问题是我不知道如何在我的代码中实现解决方案，因为我并不真正了解问题所在。

我必须等待 initBookingCalendar 直到模式完全显示的原因是 jQuery FullCalendar 插件要求元素在呈现日历之前可见。

任何提示表示赞赏！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-03T20:48:23.597

`show()`您需要在第一次调用该方法之前将侦听器的附加移动到。

```
$modal.on('shown', function() {
    if($calendar.is(':empty')) {
        initBookingCalendar($calendar, <%= @product.id %>);
    }
});

$modal.modal('show'); 
```

它可能在非 IE 浏览器中工作的原因是它们支持 CSS 转换，这使得触发`shown`事件的代码是异步的。由于 IE 不支持，所以`show()`方法是同步执行的，`shown`在你附加监听器之前触发事件。

* * *

### 更新

这是一个演示，验证了我对您的示例为何在其他浏览器中有效的解释。通过设置

```
$.support.transitions = false; 
```

该`Modal.show()`方法将在所有浏览器上同步运行，因此，您的示例现在将在 Chrome、FF 等中失败。

### [JSFiddle 演示](http://jsfiddle.net/mmfansler/7Nma3/)什么不该做

# c++ - 32 位 Qt 程序在 64 位 Windows 7 上找不到 Qt Postgres 插件 dll

> ID：11801715
> 
> 赞同：1
> 
> 时间：2012-08-03T18:58:59.183
> 
> 标签：c++, qt, windows-7, postgresql-9.1, mingw32

我有一个用 mingw 构建的 32 位程序，它使用 Qt 的 QSqlDatabase 类来访问 Postgres 数据库。我们将程序安装到 c:\company\product\bin。我们将 Qt PSQL 驱动插件 qsqlpsql4.dll 放在 C:\company\product\bin\sqldrivers 中。

它在 32 位 Windows 7 或 32 位 Windows XP 上运行良好。在 64 位 Windows 7 上运行时，我得到以下输出：

> QSqlDatabase：未加载 QPSQL 驱动程序 QSqlDatabase：可用驱动程序：QSQLITE QODBC3 QODBC
> 
> 无法打开数据库连接。指定的驱动程序无效。

它拒绝找到 QPSQL 驱动程序。我尝试使用 qt.conf 文件无济于事。

有人知道我错过了什么吗？

# ruby-on-rails - 使用 Capistrano 部署时出现“sh: rake: not found”错误

> ID：11801717
> 
> 赞同：0
> 
> 时间：2012-08-03T18:59:22.913
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake, capistrano

尝试`cap deploy`从 Windows 机器执行命令时，我从 VPS 收到此错误：

`sh: rake: not found`

如果我通过 SSH 连接到服务器本身，我可以轻松运行`rake`而不会出现问题。它位于一个奇怪的位置，因为我使用的是 RVM，但它仍然有效。当它从 Capistrano 运行时，似乎不知何故，它的位置信息变得一团糟。

使用 Rails 进行敏捷 Web 开发将以下内容添加到`deploy.rb`：

```
# adjust if you are using RVM, remove if you are not
$:.unshift(File.expand_path('./lib', ENV['rvm_path']))
require "rvm/capistrano"
set :rvm_ruby_string, '1.9.2'
set :rvm_type, :user 
```

问题是，我在 Windows 机器上（不使用 RVM），这会导致整个`deploy`Capistrano 任务崩溃，因为我没有 RVM。我是否需要在本地安装 RVM 才能正常工作？我希望它只在服务器上是必需的。

怎么`rake`找不到了？！当我自己通过 SSH 连接到服务器时，肯定可以工作......

**编辑：**看起来这个问题非常相似：

[Capistrano 无法部署到远程服务器](https://stackoverflow.com/questions/7395411/capistrano-fails-to-deploy-to-remote-server)

然而，他的解决方案似乎涉及做我想做的同样的事情——除了不知何故他对线路没有任何问题，线路`require "rvm/capistrano"`在我的机器上崩溃了。另外，他的路径似乎与我的格式不同？

矿：`/home/sysadmin/.rvm/gems/ruby-1.9.3-p194@global/bin/rake`

他的：`/usr/local/rvm/gems/ruby-1.9.2-p290@rails31dataserver/bin`

我真的很困惑这些环境是如何工作的......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T15:07:03.690

呃，我没有安装 Capistrano RVM gem，所以我不能`require "rvm/capistrano"`正确安装。`gem install rvm-capistrano`修复了这个问题。

# python - Python：附加到“int”函数的解决方法

> ID：11801718
> 
> 赞同：1
> 
> 时间：2012-08-03T18:59:27.260
> 
> 标签：python, python-2.7

Python初学者运行2.7

我想要一个列表，随着新值的添加，它会不断求和。但是，我不断收到*Attribute Error: 'int' object has no 'append' function*。我了解基本问题-您不能附加到整数-但想找到解决方法。你们有解决方案吗？

我的代码的简化版本，然后是我想避免的可能解决方案。

```
my_list = sum([])

def myfunction (i):
    return i 

thing = myfunction (1)
my_list.append(thing)

thing2 = myfunction (2)
my_list.append(thing2)

def function_2 (a,b):
    #function which uses my_list 
```

我想我可以做以下解决方案，但我想避免它（干扰现有代码）。

```
my_list = []
summed_my_list = sum (mylist)

def myfunction (i):
    return i 

thing = myfunction (1)
my_list.append(thing)

thing2 = myfunction (2)
my_list.append(thing2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:08:27.067

如果您不需要列表，那么问题很简单，因为您只需要

```
total += value 
```

在每一步。

**从列表派生的类**

如果您确实需要列表和总和（自动更新），您可以创建一个从列表派生的类，例如 - 当您附加到它时应该自动求和。

```
class mylist(list):
    tot = 0
    def append(self, value):
        super(mylist, self).append(value)
        self.tot += value 
```

**示例用法**

```
#!/usr/bin/python

class mylist(list):
  tot = 0
  def append(self, value):
    super(mylist, self).append(value)
    self.tot += value

a = mylist()
a.append(1)
a.append(20)
print a.tot
print a 
```

*输出：*

```
21
[1,20] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:03:29.707

这条线是你的问题：

```
my_list = sum([]) 
```

这将返回整数`0`。只需初始化您的列表：

```
my_list = [] 
```

并附加到那个。

如果您还想保留一个运行总计，请为总计设置另一个变量：

```
my_total = 0

my_total += new_number 
```

并且有一个方法可以将新整数添加到总数中并将它们附加到列表中。

# wpf - 有没有办法让 WPF Unsercontrol 在控件内的网格 元素之外增长？

> ID：11801720
> 
> 赞同：0
> 
> 时间：2012-08-03T18:59:30.143
> 
> 标签：wpf, vb.net

我有带有一些文本框的 WPF 程序，当它们获得焦点时，会在控件上方或下方弹出一个小数字键盘，具体取决于文本框在屏幕上的位置。现在，这是通过一个文本框和一个单独的“数字键盘”unsercontrol 完成的，该控件放置在与文本框不同的网格上。这些控件相当常见，所以我想将所有这些功能放在一个特殊的文本框用户控件中，然后将其放入窗口中。

问题是文本框位于网格单元格中，设置为拉伸以填充单元格以调整窗口大小。无论如何，我仍然可以使用网格单元调整文本框的大小，同时能够使我的数字键盘用户控件出现在该网格单元之外？如果我制作了一个用户控件来完成所有这些操作，然后将其放入网格单元格中，我认为制作像这样的大弹出窗口只会将所有内容压缩到该单元格中。

# ruby-on-rails - josevalim / active_model_serializers 控制器参数错误

> ID：11801721
> 
> 赞同：0
> 
> 时间：2012-08-03T18:59:34.047
> 
> 标签：ruby-on-rails, json, gem, active-model-serializers

我正在玩 Jose Valim 的 active_model_serializers Gem。

我正在尝试在我的控制器中调用自定义序列化程序，但它看起来`:json`没有`ActiveModel::ArraySerializer`按应有的方式使用。

当我`default active_model_serializer`在控制器中定义时，序列化程序工作正常；但是，当我在控制器中调用这样的自定义时：

```
render :json => @project, :serializer => ProjectSerializer 
```

我收到以下错误：

```
wrong number of arguments (0 for 1) 
```

我正在使用 Ruby 1.9.2 和 Rails 3.2.7。感谢任何帮助，因为我需要为任何给定模型创建一些不同的序列化程序。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:04:52.660

所以我一定是在破解什么的。:serializer 调用只接受对象数组。

渲染 :json => @project, :serializer => ProjectWithTaskEstimateSerializer

当您想在对象数组中的每个对象上调用序列化程序时，您需要使用 each_serializer。我不知道我是怎么错过的。

渲染 :json => @project, :each_serializer => ProjectSerializer

# java - 读取单字符java

> ID：11801722
> 
> 赞同：0
> 
> 时间：2012-08-03T18:59:44.200
> 
> 标签：java, io, character

为什么我看不懂这个单字？

```
char c = 'Y';
    while(c == 'y' || c == 'Y'){
        //stuff happens..
    }
    c = (char)System.in.read();   <----error 
```

我收到一个编译错误，上面写着“未处理的异常类型 IOException”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:00:44.030

将代码包装在`try/catch`块中（或）`throws` `IOException`在方法签名中定义。所有检查的异常都应该是 catch 或 throws 异常。

例子：

```
 try
    {
      c = (char)System.in.read();  
    }catch(IOException ioe)
    {
   //Your catch logic
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T23:17:02.270

您有 2 个选项可以解决此问题：

1.  使用 try-catch 语句处理异常，如下所示：

    ```
    char c = 'Y';
    while(c == 'y' || c == 'Y'){
        //stuff happens..
    }
    try {

        c = (char)System.in.read();

    } catch (IOException e) {

        e.printStackTrace();//or however you choose to handle this
    } 
    ```

在类中的 package 语句（如果有）下方，添加如下 import 语句：

```
 import java.io.IOException; 
```

2\. 在函数后面增加一个 throws 子句，表明该函数可能会抛出一个已检查的异常。在这种情况下，您可能希望在调用函数中处理异常。

示例：假设函数 sample () 调用 test()

```
public static void test() throws IOException {

    char c = 'Y';
    while(c == 'y' || c == 'Y'){
        //stuff happens..
    }
    c = (char)System.in.read();

} 
```

在类中的 package 语句（如果有）下方，添加如下 import 语句：

```
 import java.io.IOException; 
```

在情况 2 中，您可以在 sample() 中处理异常，否则异常（如果发生）将向上传播直到它被处理。

# asp.net-mvc-3 - AllowHtml 不工作 - 但适用于不同的模型/控制器

> ID：11801723
> 
> 赞同：1
> 
> 时间：2012-08-03T18:59:45.917
> 
> 标签：asp.net-mvc-3, data-annotations

我有两个非常相似的过程，都需要 HTML 输入和 AllowHtml 属性...一个过程创建一个 HTML 电子邮件，而另一个创建一个更新消息以显示给登录的用户。

AllowHtml 属性在创建电子邮件时工作正常，但是当我尝试创建更新消息时，它会引发“潜在危险的 Request.Form 值...”错误。

**什么会导致 AllowHtml 为一个而不是另一个工作？**

我已经倾注了所有代码，但无法弄清楚两者之间可能导致此问题的不同之处。

* * *

**这是我在电子邮件控制器中的代码：**

```
public ActionResult Create()
{
    return View(new EmailBlast());
}
[HttpPost]
public ActionResult Create(EmailBlast Email)
{
    if (ModelState.IsValid)
    {
        var EmailID = _emailblasts.Create(Email);
    }
    return View(Email);
} 
```

**这是电子邮件模型：**

```
public class EmailBlast
{
    public decimal EmailID { get; set; }

    [Required(ErrorMessage = "Please Enter a Subject")]
    [StringLength(250, ErrorMessage = "Subject Too Long")]
    public string Subject { get; set; }

    [Required(ErrorMessage = "Please Include a Message")]
    [AllowHtml]
    public string HTMLBody { get; set; }
    ....
} 
```

**这是我在更新消息控制器中的代码：**

```
public ActionResult Create()
{
    return View(new CreateUpdateMessage());
}
[HttpPost]
public ActionResult Create(CreateUpdateMessage message)
{
    if (ModelState.IsValid)
    {
        var Message = _updatemessages.Create(message);
        return RedirectToAction("View", new { id = Message.ID });
    }
    return View(message);
} 
```

**和更新消息模型：**

```
public class CreateUpdateMessage
{
    [Required(ErrorMessage = "Please Enter a Subject")]
    [StringLength(250, ErrorMessage = "Subject Too Long")]
    public string Subject { get; set; }

    [Required(ErrorMessage = "Please Include a Message")]
    [AllowHtml]
    public string Message { get; set; }
} 
```

* * *

好的，所以我发现了问题......“消息”必须是保留参数或其他东西，因为我将 CreateUpdateMessage.Message 更改为“MessageHTML”，现在一切正常。

```
public class CreateUpdateMessage
{
    [Required(ErrorMessage = "Please Enter a Subject")]
    [StringLength(250, ErrorMessage = "Subject Too Long")]
    public string Subject { get; set; }

    [Required(ErrorMessage = "Please Include a Message")]
    [AllowHtml]
--> public string MessageHTML { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:13:57.730

对于其他有类似问题的人，请尝试`<httpRuntime requestValidationMode="2.0" />`在 web.config 的`<system.web>`部分中添加。

# c++ - 中断接收套接字

> ID：11801724
> 
> 赞同：3
> 
> 时间：2012-08-03T18:59:51.033
> 
> 标签：c++, sockets, timeout, winsock

我有一个`mySocket`像这样在循环中接收的 WinSock：

```
while(keepGoing){
    FD_SET fsd;
    FD_ZERO(&fds);
    FD_SET(mySocket, &fds);

    int result = select(1+mySocket, &fds, (fd_set *)0, (fd_set *)0, &timeout);
    if(result>0 && FD_ISSET(mySocket, &fds){
        result = recvfrom(mySocket, buff, NUM_BYTES, (struct sockaddr *)&add, &length);
        // do stuff       
    }
} 
```

如果我想停止接收，我可以设置`keepGoing`为 false，但套接字可能仍在等待，`timeout`然后才能看到它`keepGoing`已经改变。

假设我们不想更改超时值，有没有可靠的方法告诉套接字停止接收而不等待超时发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:08:20.613

您可以发出良性信号并在为`keepGoing`时检查标志。或者，您可以创建一个并将读取端添加到您的集合中。设置标志后关闭写端。`errno``EINTR``pipe``select``keepGoing`

```
int quitfds[2];
pipe(quitfds);

    //...
    FD_SET(quitfds[0], &fds);
    //...

    if (FD_ISSET(quitfds[0], &fds)) {
        close(quitfds[0]);
        continue;
    } 
```

**编辑：**亚当指出我错过了`Winsock`问题中的参考。您可以使用 a`socketpair`而不是 a `pipe`。它似乎没有在 Windows 上实现，但我在[这里找到了解决方法](https://github.com/zpao/spidernode/blob/master/src/platform_win32_winsock.cc)。Ben 指出，这`WSAEventSelect`允许混合不同的事件对象。感谢双方。

# ruby-on-rails-3 - 如果我预编译，资产仅在开发中工作

> ID：11801728
> 
> 赞同：1
> 
> 时间：2012-08-03T19:00:03.767
> 
> 标签：ruby-on-rails-3, asset-pipeline

所以我们已经将应用程序从 rails 3.0.7 升级到 rails 3.2。我们部署到heroku，所以我们在这样做之前在本地预编译。现在我遇到了这个问题，如果我先预编译，我的 js 文件只能在 dev 本地工作。当然，这意味着如果我更改某些内容，我必须重新进行预编译。我试图做一个资产：清洁，但后来我的 js 停止工作。或者更确切地说，它不能正常工作。看[这里](https://stackoverflow.com/questions/11799823/jquery-ready-function-not-getting-hit-inside-function)

我还尝试将我的 config.assets.prefix 设置为“assets-dev”，以便将它们从不同的位置提供服务。我的其他 Rails 项目没有这个问题。这是我在 environment/development.rb 中的相关设置

```
 # Do not compress assets
  config.assets.compress = false

  #compile on the fly
  config.assets.compile = true

  # Expands the lines which load the assets
  config.assets.debug = true

  # Server assets out of asset-dev so they won't conflict with precompiles
  config.assets.prefix = "assets-dev" 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:21:34.087

我很确定在 environment/development.rb 你不需要

```
config.assets.compile = true 
```

# java - 可扩展类的哈希码（面向未来）

> ID：11801733
> 
> 赞同：0
> 
> 时间：2012-08-03T19:00:11.337
> 
> 标签：java, math, hashcode, hash-function

由于我在数学方面没有任何出色的技能，所以我问你是否有任何算法可以用于将来可能会改变的课程。

考虑以下场景：

“角色”类具有以下字段：

```
private boolean admin;
private boolean printer; 
```

几周后，我决定添加一个角色“guest”：

```
private boolean admin;
private boolean printer;
private boolean guest; 
```

几周后，我决定删除“打印机”这个角色；

```
private boolean admin;
private boolean guest; 
```

由于我会将哈希码保存在数据库中，因此我必须 100% 确定此类的所有版本都会生成唯一的哈希码。

也许这不是问题，我一直使用 Eclispe IDE 源代码生成器中提供的那个。

你能告诉我我是否安全地使用 Eclipse IDE (Indigo) Java 版本 >= 6 方法，或者给我一些关于这个主题的其他建议。我相信这是一件非常普遍的事情。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T19:03:28.647

> 因为我会将哈希码保存在数据库中

不要那样做。的结果`hashCode`并不*意味着*要持久化。特别是，来自文档：

> 该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。

下一个：

> 我必须 100% 确定这个类的所有版本都会生成唯一的哈希码。

哈希码也不意味着是唯一的……它们通常*不会*是唯一的。好的，您的案例中只有 5 位数据，但通常情况并非如此......

听起来您的要求与正常要求不同`Object.hashCode()`-因此您不应期望任何自动生成的实现都知道您的特殊要求。我建议您*准确*说明您的要求，我们可以制定出该怎么做...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T20:05:29.327

为了让您了解 32 位哈希码和 UUID 之间的区别，以及根据[生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)发生冲突的可能性有多大，这是您需要生成多少个 id 才能使它们中的两个有 50% 的机会具有相同的值（碰撞）：

32 位哈希码 - 77,000

128 位 UUID - 22,000,000,000,000,000,000

哈希码不保证唯一性，在正常使用中会发生冲突。**UUID 承诺实用的唯一性，在实践中极**不可能发生冲突。

请参阅[http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx](http://blogs.msdn.com/b/ericlippert/archive/2010/03/22/socks-birthdays-and-hash-collisions.aspx)和[http://en.wikipedia.org/wiki/Universally_unique_identifier](http://en.wikipedia.org/wiki/Universally_unique_identifier)

# facebook - 重复页面重定向：如何找到连接？

> ID：11801749
> 
> 赞同：3
> 
> 时间：2012-08-03T19:01:45.517
> 
> 标签：facebook, duplicates, facebook-fql, facebook-page

我正在开发一个 Facebook 应用程序，我想按学校过滤用户的朋友。我遇到的问题是，当学校用户的重复页面可能没有相同的页面 ID 时。

例如）[http://www.facebook.com/pages/UT-Austin/106258719412206](http://www.facebook.com/pages/UT-Austin/106258719412206)将重定向到[http://www.facebook.com/UTAustinTX?rf=106258719412206](http://www.facebook.com/UTAustinTX?rf=106258719412206)

我无法找到有关如何找到这些重定向连接的任何信息。理想情况下，我想：

1.  如果我正在尝试查看要重定向的页面，如上例所示；我被重定向到的页面 ID 是什么？
2.  如果我有页面 ID；所有重复的页面 ID 与哪些相关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T00:10:35.093

您可以尝试的一件事是图形搜索名称和理想的位置。在您的示例中，只需图形搜索名称即可提供新页面作为第一个结果。 [https://graph.facebook.com/search?q=UT+Austin&type=place&access_token=YOURTOKEN](https://graph.facebook.com/search?q=UT+Austin&type=place&access_token=YOURTOKEN)

这并不理想，但我认为这是解决这个问题的唯一方法。

需要注意的几点：您可以根据自己的情况比较域。
您的[第一个节点](https://graph.facebook.com/106258719412206)：

```
{
category: "University",
description: "The University of Texas at Austin is a public research-intensive university located in Austin, Texas, United States. It is the flagship institution of the University of Texas System. Founded in 1883, its campus is approximately 0.25 miles from the Texas State Capitol in Austin. The institution has the fifth-largest single-campus enrollment in the nation, with over 50,000 undergraduate and graduate students and over 24,000 faculty and staff.The University of Texas at Austin was named one of the original eight Public Ivy institutions and was inducted into the American Association of Universities in 1929\. The university is a major center for academic research, with research expenditures exceeding $640 million for the 2009–2010 school year. The university houses seven museums and seventeen libraries, including the Lyndon Baines Johnson Library and Museum and the Blanton Museum of Art, and operates various auxiliary research facilities, such as the J. J. Pickle Research Campus and the McDonald Observatory. Among university faculty are recipients of the Nobel Prize, Pulitzer Prize, the Wolf Prize, and the National Medal of Science, as well as many other awards.",
is_community_page: true,
is_published: true,
talking_about_count: 8,
website: "http://www.utexas.edu",
were_here_count: 0,
id: "106258719412206",
name: "UT Austin",
link: "http://www.facebook.com/pages/UT-Austin/106258719412206",
likes: 5143
} 
```

有 www.utexas.edu

您的[第二个节点](https://graph.facebook.com/UTAustinTX)具有相同的功能。

您可能可以将`is_community_page: true`用作触发器，您应该通过图形搜索查找一些等效的 ID。在所有情况下都不是这样，但是因为您正在与大学打交道，所以我想每个人（至少在美国）都有一个声称的 FB 页面，在这种情况下`is_community_page`将是错误的或该属性将不存在（无）。

此外，根据您的业务，您可以 MTurk 这个任务，甚至可能使用刮板。我不认为这些是大规模解决这个问题的好方法，但我建议是因为如果你只与大学打交道，你可能负担得起 Mturk 或繁重的刮擦。

我确实确认您可以使用刮板来查找重定向 javascript 并解析出原始页面上的新 ID。

我知道这有点糟糕，但希望它有所帮助

# github - 将 github wiki 克隆到本地仓库

> ID：11801751
> 
> 赞同：2
> 
> 时间：2012-08-03T19:01:50.493
> 
> 标签：github

我正在尝试克隆一个 github wiki 并创建一个与 RStudio 一起使用的本地存储库，类似于我在 wiki 所在的主存储库中使用 github。我正在尝试按照[说明](https://github.com/wicketstuff/core/wiki/Editing-Wiki-Locally)克隆 wiki ，这是来自的错误输出命令行：

```
Microsoft Windows [Version 6.1.7601]
Copyright (c) 2009 Microsoft Corporation.  All rights reserved.

C:\Users\trinker\GitHub>git clone  git@github.com:trinker/qdap.wiki.git
Cloning into 'qdap.wiki'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

我在 stackoverflow 上搜索了错误消息并得到了这篇文章[(LINK)](https://stackoverflow.com/questions/9560892/permissions-error-github-ssh-key-not-recognized)。错误消息几乎相同。我和那张海报的区别在于我对命令行不满意，也不知道要输入什么来解决问题。我尝试了这个人的修复[(LINK)](http://imikay.wordpress.com/2011/08/06/github-permission-denied-publickey/)，结果如下：

```
C:\Users\trinker\GitHub>set HOME=C:\Users\trinker

C:\Users\trinker\GitHub>ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/c/Users/trinker/.ssh/id_rsa): C:\Users\tri
nker\.ssh
C:\Users\trinker\.ssh already exists.
Overwrite (y/n)? n

C:\Users\trinker\GitHub>ssh-keygen -t rsa
Generating public/private rsa key pair.
Enter file in which to save the key (/c/Users/trinker/.ssh/id_rsa):
/c/Users/trinker/.ssh/id_rsa already exists.
Overwrite (y/n)? y
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /c/Users/trinker/.ssh/id_rsa.
Your public key has been saved in /c/Users/trinker/.ssh/id_rsa.pub.
The key fingerprint is:
d6:ce:b5:23:0c:0d:c0:31:9f:8e:32:34:b9:79:43 trinker@TRINKER-HP

C:\Users\trinker\GitHub>CD C:\Users\trinker\GitHub

C:\Users\trinker\GitHub>git clone  git@github.com:trinker/qdap.wiki.git
Cloning into 'qdap.wiki'...
Permission denied (publickey).
fatal: The remote end hung up unexpectedly

C:\Users\trinker\GitHub> 
```

*注意我更改了密钥中的几个字符，因为我不确定这是否是不安全的发布内容。*

Windows 7 用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:10:03.493

除了创建一对新密钥之外，您还需要将它们告诉 GitHub。在[此帮助页面](https://help.github.com/articles/generating-ssh-keys)的底部，您将找到详细说明：

> *   转到您的帐户设置
> *   点击左侧边栏中的“SSH Keys”
> *   单击“添加 SSH 密钥”
> *   将您的密钥粘贴到“密钥”字段中
> *   点击“添加密钥”
> *   通过输入您的 GitHub 密码确认操作

您也可以在相同的设置中删除旧密钥，因为您可能不再需要它们。

# html - html、body 和 div 设置为 100% 宽度，但仍然没有占满 100%

> ID：11801752
> 
> 赞同：4
> 
> 时间：2012-08-03T19:01:50.743
> 
> 标签：html, css, width

我将边距和填充重置为`0`. 我将`<html>`,`<body>`宽度设置为 100%。

我的 CSS 看起来像这样：

```
html, body { 
    margin:0;
    padding:0;
    width:100%;
}

#wrapper {
    margin:0;
    padding:0;
    width:100%;
    background-color:#ccc;
} 
```

每当我将浏览器的大小调整到水平滚动条时，div 不会占用 100% 的宽度。甚至没有正文或html。我已经对其进行了萤火虫攻击，并且大约有 180 像素的间隙。

![在此处输入图像描述](../Images/859aa6d31ba5e0ca4bea71fd62958fc0.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2018-05-25T06:52:34.243

您可以为此使用溢出

```
html, body { 
margin:0;
padding:0;
width:100%;
height:100%;
overflow: auto;
} 
```

我也遇到了类似的问题，我用了这个

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-06-09T13:22:29.693

**简短的回答：**

*   您的浏览器快捷方式（Chrome = `Ctrl + Shift + I`，Firefox = `Ctrl + Shift + C`）
*   将鼠标放在间隙上并一直向下查找导致问题的元素
*   修理它

**更长的答案：**

正如 Dan Kanze 所说，如果存在一致的间隙，则意味着包装器内的某些元素会导致偏移。

为了进一步帮助您，我建议您使用一个不错的开发工具，您可以在 Chrome [Chrome devtools screenshot](https://i.stack.imgur.com/wqM27.jpg)和 FF [FF devtools screenshot](https://i.stack.imgur.com/UyiQT.jpg)上找到它。

快捷键：Chrome = `Ctrl + Shift + I` Firefox =`Ctrl + Shift + C`

一旦你使用它，你只需将光标指针放在间隙上，然后将其悬停在垂直间隙上，直到找到东西，然后单击，你会找到坏的 html 家伙！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:03:11.853

如果存在一致的 180 像素间隙，则意味着包装器内的元素会导致偏移。

您的容器元素看起来不错。

为了找到罪魁祸首，FF 有一个很好的调试工具，这就是所谓的 3D 模式。这将向您显示主容器中的异常值，您可以在其中选择和查找代码中的元素。

通过链接，我可以进一步帮助您。

# php - 脚本/编程语言可以成为网站的功能要求吗？

> ID：11801753
> 
> 赞同：-5
> 
> 时间：2012-08-03T19:02:06.993
> 
> 标签：php, perl, html, apache

我以制作网站为生。我一直使用脚本语言（DCL、Perl，现在主要是 PHP）来提高我的工作效率（模板以便于更改），即使网站是相对静态的。

我现在正在与一个小组合作，该小组希望我渲染静态文件，因为他们将脚本语言视为安全威胁。

我不想开始辩论，只是想知道未来是否有可能需要使用服务器端脚本语言的非交互式（无需登录、个性化或数据库）。它们确实允许 apache 包含，但根据我的经验，它们缺乏真正的编程语言的功能。

那么 Stack Overflow，如果我没有可用的脚本语言，我可能会遇到哪些限制？我想为这种类型的网站做的所有事情真的可以在没有服务器端编程语言的情况下完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:11:56.643

您可以在开发时动态构建它，然后将 html 复制到新文件夹并上传 php 生成的 html？

这将允许您在自己的文件中保留页眉/页脚的工作流程，但会增加一个额外的步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:06:21.137

好吧，当然可以拥有纯静态的网站（哦，美好的旧时光）。

根据其他内容（数据库、文件）每天一次呈现页面（以任何语言）并将更改上传到托管“纯”html 站点的 ftp 会有一些方法/作业。

这有点粗糙，因为每个人都会发现动态的东西，但只炫耀关于你公司的东西对我来说是相当静态的......最终用户不太关心信息是如何获得的：在运行时通过脚本语言或已经完成为 ftp 上的 html 文档。

我并不是说良好的安全配置可以杀死线程，这对每个人来说都是一个好主意......但它仍然是一条路;-)

# excel - Excel 中的模块函数返回 #VALUE

> ID：11801756
> 
> 赞同：0
> 
> 时间：2012-08-03T19:02:15.947
> 
> 标签：excel, vba, rtd

我有一个 RTD 服务器，用于向 Excel 发送数据和从 Excel 发送数据。我试图通过在 Excel 的 VBA 的模块中构建一些简单的函数来让用户更轻松，以允许他们在不知道整个后端的情况下获取数据。

```
 Function parseData(ByVal arrayData As String) As Variant
    parseData = Evaluate(arrayData)
End Function

Function getQuote(ByVal ticker As String) As String
    getQuote = parseData(Application.RTD("rTech.Quotes", , ticker))
End Function

Function getBidSize(ByVal ticker As String) As String
    getBidSize = Application.RTD("rTech.Quotes", , ticker, "bidsize")
End Function

Function getBidPrice(ByVal ticker As String) As String
    getBidPrice = Application.RTD("rTech.Quotes", , ticker, "bidprice")
End Function

Function getAskSize(ByVal ticker As String) As String
    getAskSize = Application.RTD("rTech.Quotes", , ticker, "asksize")
End Function

Function getAskPrice(ByVal ticker As String) As String
    getAskPrice = Application.RTD("rTech.Quotes", , ticker, "askprice")
End Function

Function getLast(ByVal ticker As String) As String
    getLast = Application.RTD("rTech.Quotes", , ticker, "last")
End Function 
```

基本上就是这样，虽然当我总是打电话给他们时

> =getBidSize("XXXX")

它为每次尝试返回#VALUE；我猜它在 Application.RTD 部分崩溃，但我不是 100% 确定，因为当我使用 Debug 时，它只是在我跨过 RTD 调用时“停止”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T19:40:57.363

这导致问题的主要原因不是任何原因，而是 RTD 函数需要一个空白的第二个参数而不只是省略它，这与在 Excel 内部的函数栏中执行此操作不同。

所以，函数应该是这样的：

```
getLast = Application.RTD("rTech.Quotes", "", ticker, "last") 
```

# lucene - 用于通用源代码的 Lucene 标记器

> ID：11801761
> 
> 赞同：1
> 
> 时间：2012-08-03T19:02:43.693
> 
> 标签：lucene, tokenize

我有一个基于 Lucene 的程序来索引源代码文件，我注意到 Lucene`StandardTokenizer`不会拆分包含点的单词，例如`foo.bar`. 这样做的问题是，在源代码中，点通常用于方法调用，在这种情况下，对象名和方法名应该分开。

所以，我的问题是，我该如何编写一个`Tokenizer`与源代码（例如，没有特定的编程语言）一起工作的自定义？有没有现有的实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:49:58.500

您可以[在 onjava.com 上查看这篇关于](http://onjava.com/onjava/2006/01/18/using-lucene-to-search-java-source.html)使用 Lucene 索引源代码的文章，该文章已有数年历史，但可以作为指导。关于标记器，他们使用似乎可以做你想做的事情的 LowerCaseTokenizer。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T01:37:14.200

您可以将 StandardTokenizer 的语法 (JFlex) 更改为按点拆分，并生成您的自定义 Tokenizer。这就是我在[使用 JFlex/Java CC 为新的 TokenStream API 生成自定义 Tokenizer](https://stackoverflow.com/questions/7846305/generating-a-custom-tokenizer-for-new-tokenstream-api-using-jflex-java-cc)时所做的。

或者

您也可以拥有一个按点拆分的 TokenFilter，并使用 StandardTokenizer 和这个新的 TokenFilter 创建一个自定义分析器。（看看 StandardAnalyzer 做了什么，然后在其中插入这个新的 TokenFilter）。

# c - 忽略 make 中的函数

> ID：11801762
> 
> 赞同：0
> 
> 时间：2012-08-03T19:02:43.513
> 
> 标签：c, makefile

我正在尝试为现有项目实现命令行界面。我这样做的方式是使用两个单独的makefile。一个是项目已经存在的makefile，另一个是CLI。我首先运行 CLI makefile，获取必要的文件，然后使用 project 的 makefile 将这些文件与现有项目链接。现在，问题是每次我将现有项目中的函数添加到 CLI 文件时，CLI makefile 都会继续构建这些函数，我不希望它这样做，因为那不是必需的，并且会给我警告和错误（因为我不希望继续包括所有标题和.o）。

长话短说，我可以做些什么让 CLI 的 makefile 忽略添加到 CLI 文件中的函数，而不是查看函数内部来检查所有内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:06:46.290

让其中一个 makefile 在编译过程 ( ) 中添加一个宏定义（称为 useCLI `-DuseCLI`）。对于不想编译的函数，用`#ifndef useCLI`和括起来`#endif`。不过要注意依赖关系。

# wif - WIF 安全令牌超时从何而来？

> ID：11801766
> 
> 赞同：2
> 
> 时间：2012-08-03T19:03:04.980
> 
> 标签：wif, adfs2.0, adfs, ws-federation

`SessionAuthenticationModule`课堂上的事件之一是`SessionSecurityTokenReceived`。这使我们能够查看从 AD FS 收到的会话令牌。as 两个属性`SessionToken`称为`ValidFrom`和。`ValidTo`在我们现在的配置中，这两者之间的差是 1 小时。我查看了 AD FS 中的设置，但一直无法找到如何更改此值。有谁知道它在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T20:41:55.783

这来自 SAML 断言有效时间。如果您使用的是 ADFS，则可以使用 PowerShell 更改该值。无法通过 UI 使用

```
Add-PSSNapin Microsoft.Adfs.PowerShell
Set-RelyingPartyTrust -TargetName "your relying party name" -TokenLifetime 600 
```

TokenLifetime 以分钟为单位

# jquery - 防止 jquery 在父触发子事件时可拖动

> ID：11801767
> 
> 赞同：2
> 
> 时间：2012-08-03T19:03:10.330
> 
> 标签：jquery, draggable

我将 jquery draggable 附加到 DIV 容器，它的每个子元素都有一个单击事件，当我拖动主父容器时如何防止子事件触发。

我只想在单击它时触发子事件，而不是在拖动整个事件时触发。

我做了一个演示：http: [//jsfiddle.net/sygad/RgdPq/1/](http://jsfiddle.net/sygad/RgdPq/1/)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:19:09.287

**[您可以使用临时变量来跟踪拖动状态，然后像这个jsFiddle 示例](http://jsfiddle.net/j08691/RgdPq/3/)**一样从 click 事件更改为 mouseup 事件。

**jQuery**

```
var bodyWidth = $(window).width();
var bodyHeight = $(window).height();
var dragging = false;
$("#container").draggable({
    containment: "window",
    start: function() {
        dragging = true;
        $(this).addClass('dragged')
    },
    stop: function() {
        dragging = false;
        $(this).removeClass('dragged')
    }
});

$('.box').mouseup(function() {
    if (!dragging) {
        //If there is already a new box present, remove it
        if ($('.newBox').length) {
            $('.newBox').remove();
        }

        //Get the offset of THIS box we just clicked
        var thisOffset = getOffset(this)

        //Get its left & top value
        var newBoxLeft = thisOffset.left;
        var newBoxTop = thisOffset.top;

        //Full size box will be 75% width & height of viewport
        var newBoxFinalWidth = bodyWidth * 0.75;
        var newBoxFinalHeight = bodyHeight * 0.75;

        //Full size box will be positioned center/center on the screen
        var newBoxDestLeft = (bodyWidth - newBoxFinalWidth) / 2;
        var newBoxDestTop = (bodyHeight - newBoxFinalHeight) / 2;

        //Create our new box
        var newBox = '<div class="newBox clickOut"></div>'

        //Add it to the DOM
        $('body').append(newBox);

        //Position it to overlay the box we just clicked
        $('.newBox').css({
            'left': newBoxLeft,
            'top': newBoxTop
        })

        //Animate it from the orig box position to its final width/height & left/top
        $('.newBox').delay(100).animate({
            'width': newBoxFinalWidth,
            'height': newBoxFinalHeight,
            'left': newBoxDestLeft,
            'top': newBoxDestTop
        }, 2000, 'easeOutExpo')
    }
})

//Clickout function
$(document).click(function(e) { /*if parent of this click is NOT clickout AND this click is NOT clickout then hide stuff*/
    if ($(e.target).parents().is('.clickOut') == false && $(e.target).is('.clickOut') == false) {
        clickOut();
    }
});

function clickOut() {
    $('.newBox').remove()
}

function getOffset(item) {
    var cssOffset = $(item).offset();
    var cssLeft = parseInt(cssOffset.left);
    var cssTop = parseInt(cssOffset.top);

    return {
        'left': cssLeft,
        'top': cssTop
    };
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T14:54:16.290

我知道这是一个旧帖子。我做了类似的事情，让我烦恼了一整天！更好的解决方案，即保存全局变量并使对象自包含：

```
$('#somethingDraggableToBeClicked').mouseup(function() {
  if ( $("#someParentOrChildElementBeingDragged").is('.ui-draggable-dragging') ) 
    return;
    //your onClick code here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-13T19:27:27.567

这个问题也困扰了我几个小时。最后我做了以下事情：

```
var dragged = false; // Flag

$( '#parent' ).draggable({
    start: function () {
        dragged = true;
    }
});

$( '#child' ).click( function () {
    if ( dragged ) {
        dragged = true; // Reset the flag
        return;
    }
    // Your click code here
}); 
```

# c# - 处理“序列没有元素”异常

> ID：11801769
> 
> 赞同：75
> 
> 时间：2012-08-03T19:03:12.750
> 
> 标签：c#, .net, linq, entity-framework, ado.net

我正在更新购物车中的数量，但它抛出了一个序列没有元素的异常。

我什至不知道这意味着什么。起初我以为可能在某处传递了一个空值，但事实并非如此，因为我已经检查过：

> 序列不包含任何元素 描述：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.InvalidOperationException：序列不包含任何元素
> 
> 源错误：
> 
> 第 35 行：var uid = WebSecurity.CurrentUserId；第 36 行：var newqty = Request.Form["Quantity"]; 第 37 行：
> OModel.Cart c = (来自数据库中的项目。购物车第 38 行：
> 其中 item.UserId == uid && item.PartNumber == pnumber && item.OrderId == oid 第 39 行：选择项目).First();

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：140
> 
> 时间：2012-08-03T19:05:38.550

`First()`如果您的选择返回 0 行，则会导致此问题。您要么必须捕获该异常，要么使用`FirstOrDefault()`它将在没有元素的情况下返回 null 。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-03T19:07:32.323

您正在使用 linq 的 First() 方法，[根据文档](http://msdn.microsoft.com/en-us/library/bb291976)，如果您在空集合上调用它，则会引发 InvalidOperationException。

如果您希望查询的结果有时为空，您可能希望使用 FirstOrDefault()，如果集合为空，它将返回 null，而不是抛出异常。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-03T19:05:53.823

而不是将`.First()`其更改为`.FirstOrDefault()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-07T13:52:00.437

**VB**中“处理”“序列没有元素”异常的部分答案是测试空

```
If Not (myMap Is Nothing) Then
' execute code
End if 
```

其中 MyMap 是查询返回空/null 的序列。供参考

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-07-31T05:01:55.213

该值为null，您必须检查为什么...（除了这里提出的解决方案的实现）

检查硬件连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-15T10:25:09.703

我有同样的问题，我意识到我已经删除了文件夹中的默认图像，只是更新了特定文件上缺少的媒体

# asp.net - ASP.NET VB DataTable Option Strict on 禁止 Object '>' 类型的操作数

> ID：11801770
> 
> 赞同：0
> 
> 时间：2012-08-03T19:03:12.310
> 
> 标签：asp.net, vb.net

我正在使用 ASP.NET VB。我正在努力确保一个日期大于另一个日期。

我有以下内容：

```
 For Each row1 In dtDataTable2.Rows

      If (row1("ActualDate") > row1("DueDate")) Then

      End If
    Next 
```

ActualDate 和 DueDate 都是日期。我得到以下信息：

Option Strict on 禁止对象“>”类型的操作数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:07:47.783

如果您将代码更改为：

```
If (CDate(row1("ActualDate")) > CDate(row1("DueDate"))) Then 
```

它会起作用的。

DataRow 上的默认属性（即 Item 属性）返回的值类型是一个对象，因此您需要将该对象转换为您需要的数据类型。

# jquery - jQuery 显示更多结果

> ID：11801771
> 
> 赞同：1
> 
> 时间：2012-08-03T19:03:14.077
> 
> 标签：jquery, visual-studio-2008, autocomplete, ashx

我使用的是 jQuery Autocomplete，而不是 jQueryUI，目前它不会显示超过 10 个结果。我已指示 max:20 尝试一下，但无济于事。是因为我的查询限制吗？

Javascript

```
$(document).ready(function() {
        $("#<%=txtSearch.ClientID%>").autocomplete('Autocomplete/Search_CS.ashx', {width: 400, multiple: false, matchContains: true, delay: 200, Max: 20 });
    }); 
```

ASHX

```
public class Search_CS : IHttpHandler {

public void ProcessRequest (HttpContext context) {
    string prefixText = context.Request.QueryString["q"];
    using (SqlConnection conn = new SqlConnection())
    {
        conn.ConnectionString = ConfigurationManager
                .ConnectionStrings["Rollup2ConnectionString"].ConnectionString;
        using (SqlCommand cmd = new SqlCommand())
        {
            //cmd.CommandText = "select NUID from T_USER where " +
            //"NUID like @SearchText + '%'";
            cmd.CommandText = "select rtrim(NUID) NUID, rtrim(FNAME) FNAME, rtrim(LNAME) LNAME from T_USER where NUID like @SearchText + '%' OR FNAME like @SearchText + '%' OR LNAME like @SearchText + '%'"; 
            cmd.Parameters.AddWithValue("@SearchText", prefixText);
            cmd.Connection = conn;
            StringBuilder sb = new StringBuilder(); 
            conn.Open();
            using (SqlDataReader sdr = cmd.ExecuteReader())
            {
                while (sdr.Read())
                {
                    sb.Append(sdr["NUID"].ToString() + " ").Append(sdr["FNAME"].ToString() + " ").Append(sdr["LNAME"].ToString() + " ")
                        .Append(Environment.NewLine); 

                }
            }
            conn.Close();
            context.Response.Write(sb.ToString()); 
        }
    }
}

public bool IsReusable {
    get {
        return false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:08:05.930

它`max`不是`Max`

```
$("#<%=txtSearch.ClientID%>").autocomplete('Autocomplete/Search_CS.ashx', {width: 400, multiple: false, matchContains: true, delay: 200, max: 20 }); 
```

# ios - stringByEvaluatingJavaScriptFromString：使我的用户界面变得无响应

> ID：11801773
> 
> 赞同：3
> 
> 时间：2012-08-03T19:03:20.457
> 
> 标签：ios, objective-c, grand-central-dispatch

我使用 GCD 在 UIWebView 中运行 javascript，当它是正常的 javascipt 时，一切似乎都找到了，但是当谈到“警报”时，弹出模式视图使我的用户界面变得无响应。

这是我在 UIWebViewDelegate 方法中的代码。

```
 - (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{

    NSLog(@"RECEIVED");
    BOOL re =[WebParserStrategy shouldConsiderAsRequest:request];
    NSLog(@"--receive Request: %@ jumpTo:%@", request.URL.absoluteString, re == YES ? @"YES" : @"NO!!");
    if(re == NO)
    {
        dispatch_async(parserRequestToMessageQueue, ^{

            NSString *msg;
            NSDictionary *param;
            [WebParserStrategy transferRequest:request toMessage:&msg withParam:&param];
            WebObserverChain *chain = [self.messageObservers objectForKey:msg];
            if(chain == nil)
                ;//NSLog(@"!!!unknow message:%@ not found in message list", msg);
            else {
                dispatch_async(dispatch_get_main_queue(), ^{

                     [self.webView stringByEvaluatingJavaScriptFromString:@"alert('')"];          
                });
            }
        });
}
return re;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:25:16.063

这是因为 Web 警报是同步/阻塞的，并且您在整个应用程序的主队列上执行此操作。只需使用 UIAlertView 或找到其他解决方案来解决您试图通过警报完成的任务。

由于您无法控制 UIWebView 执行 Objective-C 提供的 javascript 中的并发性，因此您应该避免进行任何执行起来不是非常非常快的调用。否则，您的整个应用程序的主线程将受制于最臭名昭著的不可靠 UIKit 类之一。

# reporting-services - SSRS 2008R2 矩阵列组总计

> ID：11801774
> 
> 赞同：0
> 
> 时间：2012-08-03T19:03:22.350
> 
> 标签：reporting-services, ssrs-2008, ssrs-tablix, ssrs-grouping

我在 SSRS 2008R2 中使用矩阵控件，我正在尝试为我的列分组创建总计。这是我的矩阵布局示例：

```
 January          February         March              TOTALS
   2011     2012     2011    2012     2011   2012       2011      2012 
```

我的问题是，如何使总计列按上述指示运行？该报告将默认为当前年份和上一年的比较。附加问题，如果我有多年怎么办？我如何能够按年份获得列总数？例如：

```
 January           February          March             TOTALS
2011  2012  2013   2011  2012  2013  2011  2012  2013   2011  2012  2013 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T17:07:17.123

![在此处输入图像描述](../Images/b571e5ba356b266e4fb24fe710a89724.png)首先取一个矩阵表..为其分配数据集..转到列组属性删除其中的空白组..然后列将显示为列表...然后右键单击列列表，在组内添加一列..这里在第二列中添加带有年份的父分组...接下来在第一列中添加带有月份的父分组和带有年份的子分组！[在此处输入图像描述][2]..

# python - python: For In 循环 - 我不明白

> ID：11801776
> 
> 赞同：2
> 
> 时间：2012-08-03T19:03:27.023
> 
> 标签：python, loops, for-loop

我用来学习 python 的资源让你在它自己的网站上执行模块。我认为它最初是为这所特定大学的学生设计的，所以我用作业标记了它，即使它不是。

反正：

他们让我执行这项任务：

定义一个函数 prod(L)，它返回列表 L 中元素的乘积。

我使用此代码使此功能起作用：

```
def prod(L):
   i = 0
   answer = 1
   x = len(L)
   while i < x:
    answer = answer * L[i]
    i = i + 1
    if i == x:
         return answer 
```

下一个模块非常简要地讨论了 For-In 循环。他们提出了一个问题：

像以前一样定义函数 prod(L)，但这次使用新的循环。

我曾尝试查看其他资源以了解如何准确使用它，但我没有关注任何内容。谁能解释一下 for-in 循环是如何工作的，最好用简单的英语解释？

供参考：这是他们谈论的关于 for-in 循环的所有内容

> 循环遍历列表 循环遍历列表中的每个值是很常见的（就像在前面的练习中一样）。Python 允许使用快捷方式来执行此类操作，通常称为“for all”循环或“for each”循环。具体来说，当 L 是一个列表时，这段代码
> 
> `for x in L: «loop body block»`
> 
> 执行以下操作：首先将 x 设置为 L 中的第一个值并执行主体；然后将 x 设置为 L 中的第二个值并执行主体；这对 L 中的所有项目继续进行。

我只是不能完全解决这个问题。我不是在寻找答案，因为我这样做是为了增加知识——但我觉得我在这方面落后了）：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-03T19:09:47.097

希望这个简单的例子有助于澄清，以下两段代码做同样的事情：

使用`while`循环：

```
L = ['a', 'b', 'c']
i = 0
while i < len(L):
    print L[i]
    i += 1 
```

使用`for`循环：

```
L = ['a', 'b', 'c']
for c in L:
    print c 
```

如果你想要索引和元素，就像你有一个`while`循环一样，pythonic的方法是使用枚举：

```
L = ['a', 'b', 'c']
for index, element in enumerate(L): # returns (0,'a'),(1,'b'),(2,'c')
    print index
    print element 
```

正如您在上面看到的，`for`循环允许您直接迭代可迭代的内容，而不是`while`循环方法，您可以跟踪索引并使用索引访问项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T19:07:27.817

for 循环将遍历一个可迭代对象（通常是一个列表）的所有内容并对每个成员对象执行一个操作，然后在没有更多对象循环时退出循环。Python 标准文档很好地解释了这一点：

[http://docs.python.org/tutorial/controlflow.html#for-statements](http://docs.python.org/tutorial/controlflow.html#for-statements)

所以例如代码

```
for x in xrange(10):
    print x 
```

将打印数字 0 到 9

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:08:24.667

在给出的解释中，`L`是一个**可迭代**的. 这可以是一个序列（例如列表、元组、字符串）或一个生成器（例如`xrange()`）。iterable的每个元素依次**绑定****name** `x`，循环体被执行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:10:25.553

在您的第一个版本中，您定义了一个索引变量 i，然后访问 L[i]。除了 if i == x return 之外，没有其他需要 i。

“for x in sequence”习语抽象出索引变量。不是直接访问 L[i]，而是有一个变量来表示循环中 L 中的每个项目。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T19:16:21.863

所以，假设我有一个包含 10 个数字的列表（假设是整数）。

我可能想做的一个常见任务是遍历这个列表，如果数字是偶数，我加 10。

所以，如果我输入： [1, 2, 3, 4, 5] 我会得到： [1, 12, 3, 14, 5]

我可以做的一件事是循环，对于每个索引，检查每个索引处的值是偶数还是奇数。

但是，如果我不想考虑索引怎么办？我知道无论如何我都必须遍历整个列表，而且我真的不需要知道元素的索引来查找元素是偶数还是奇数。

所以，而不是：

```
lst = [1, 2, 3, 4, 5]
newLst=[]
i=0
while i < 10:
    if (lst[i]%2==0): # if element i of lst is even
        newLst+= [ lst[i]+10 ]
    i+=1 
```

我可以这样做：

```
for element in list:
    if(element%2==0):
        newLst+= [ element+10]
    else: newLst+= [element] 
```

通过这样做，我不必担心索引，而且我知道**`element`将是列表中的一项。**

# java - 解析java结果137

> ID：11801783
> 
> 赞同：14
> 
> 时间：2012-08-03T19:03:41.073
> 
> 标签：java, mongodb, amazon-ec2, mongodb-java

我在亚马逊 ec2 上运行一个 java 进程。它运行了 72 分钟，然后突然我得到“java 结果 137”。就是这样，没有异常或任何其他错误消息。我已经搜索了这个错误，但找不到任何有用的东西。它可能是什么原因以及如何解决它？请告诉我。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-05T11:31:02.467

高于 127 的退出代码通常意味着进程因[Signal](http://en.wikipedia.org/wiki/Unix_signal)而停止。

然后退出代码 137 解析为 128 + 9，而信号 9 是 SIGKILL，即进程被强制终止。这可以是“kill -9”命令。但是，在您的情况下，这可能是操作系统内存不足的情况，这会导致称为“OOM Killer”的功能停止正在耗尽大部分内存的进程，以便即使在这样的情况下也能保持操作系统本身稳定健康）状况。

有关类似讨论，请参阅[此问题。](https://stackoverflow.com/questions/6773726/command-mvn-package-fails-with-status-137)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-25T09:15:18.930

以防万一有人有兴趣知道这个 128 号码的来源；原因可以在 OpenJDK 源代码中找到。请参阅：[UNIXProcess_md.c](http://hg.openjdk.java.net/jdk6/jdk6/jdk/file/619655c4e72d/src/solaris/native/java/lang/UNIXProcess_md.c)

从 Java_java_lang_UNIXProcess_waitForProcessExit 方法中的注释：

> 返回的最佳值是 0x80 + 信号编号，因为这是所有 Unix shell 所做的，并且因为它允许调用者通过信号区分进程退出和进程死亡。

因此，这就是为什么 JVM 开发人员决定在子因信号退出时将 128 添加到子返回状态的原因。

我在这里留下负责从子进程返回状态的方法：

```
 /* Block until a child process exits and return its exit code.
    Note, can only be called once for any given pid. */
 JNIEXPORT jint JNICALL
 Java_java_lang_UNIXProcess_waitForProcessExit(JNIEnv* env,
                                               jobject junk,
                                               jint pid)
 {
     /* We used to use waitid() on Solaris, waitpid() on Linux, but
      * waitpid() is more standard, so use it on all POSIX platforms. */
     int status;
     /* Wait for the child process to exit.  This returns immediately if
        the child has already exited. */
     while (waitpid(pid, &status, 0) < 0) {
         switch (errno) {
         case ECHILD: return 0;
         case EINTR: break;
         default: return -1;
         }
     }

     if (WIFEXITED(status)) {
         /*
          * The child exited normally; get its exit code.
          */
         return WEXITSTATUS(status);
     } else if (WIFSIGNALED(status)) {
         /* The child exited because of a signal.
          * The best value to return is 0x80 + signal number,
          * because that is what all Unix shells do, and because
          * it allows callers to distinguish between process exit and
          * process death by signal.
          * Unfortunately, the historical behavior on Solaris is to return
          * the signal number, and we preserve this for compatibility. */
 #ifdef __solaris__
         return WTERMSIG(status);
 #else
         return 0x80 + WTERMSIG(status);
 #endif
     } else {
         /*
          * Unknown exit code; pass it through.
          */
         return status;
     }
 } 
```

# java - 使用注入的 bean 方法返回值作为 @Cacheable 注释中的键

> ID：11801786
> 
> 赞同：1
> 
> 时间：2012-08-03T19:03:50.277
> 
> 标签：java, spring, spring-security

我的一个 bean 中有一个 @Cacheable 注释方法，我想使用当前登录的用户 ID 作为缓存的键。但是，我使用 Spring Security 并在此 bean 中有一个 Injected 服务作为实例变量，它调用 SecurityContextHolder.getContext().getAuthentication() 以返回用户 ID。因此，我在 @Cacheable 方法上有一个零参数构造函数。无论如何使用从我的注入服务的方法返回的用户 ID 作为缓存的键？

```
@Service
public class MyServiceImpl implements MyService {

@Inject
private UserContextService userContextService;

@Override
@Cacheable("myCache")
public String getInformation() {
  //use this as the key for the cache entry
String userId = userContextService.getCurrentUser();
return "something";
}
} 
```

用户上下文服务实现：

```
@Service
public class UserContextServiceImpl implements UserContextService {

public String getCurrentUser() {
return SecurityContextHolder.getContext().getAuthentication().getName();
}

} 
```

我发现了这个问题，但这与我想做的有些不同。我认为静态方法无法实现此功能。

[使用带有 @Cacheable 注释的 Spring bean 作为键](https://stackoverflow.com/questions/11396911/using-spring-beans-as-a-key-with-cacheable-annotation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:19:12.133

我会编写这个类，以便 userId 是方法的参数`getInformation()`，并让方法/服务的用户自己通过查找 ID。

```
@Override
@Cacheable("myCache")
public String getInformation(String userId) { ... } 
```

IMO 编写服务层以直接使用 Spring Security 上下文是一种不好的做法，因为它限制了服务的有用性 - 如果您实现某种不使用 Spring Security 的 REST API（仅作为示例），那么`getCurrentUser()`可能没有意义/返回值。如果该请求未使用 Spring Security，则then`MyServiceImpl`将不可用，如果您需要支持“管理员用户需要查找用户 X 的信息”之类的内容，则此方法将不可用。

让面向 Web 的层担心如何从安全上下文中提取用户 ID，而不是您的服务层。

# java - WebView - 如果不请求两次就无法下载文件？

> ID：11801787
> 
> 赞同：9
> 
> 时间：2012-08-03T19:03:59.613
> 
> 标签：java, android, webview, webviewclient

如果我听，我会*在浏览器已经请求它之后*`DownloadListener`获得我需要请求的 URL 。浏览器已经打开了到 URL 的连接（这就是它知道这是下载的方式），为什么它不能将连接传递给我？

 *我还尝试在请求 URL 之前将自定义分配给并使用来捕获`WebViewClient`URL `WebView`。`shouldOverrideUrlLoading`要以这种方式下载文件，我在浏览器之前请求每个 URL，并通过它的 Content-Type 我决定是否下载它，如果是，那么我从已经打开的连接下载它，否则我关闭连接并指示浏览器加载它，并且浏览器......再次请求它。另外，`shouldOverrideUrlLoading`我没有被告知应该使用哪种方法和哪些 cookie 来请求给定的 URL。

我怎样才能*避免*不必要地请求两次并且仍然能够使用 WebView 下载文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:18:37.550

为什么不直接使用 url 使用 outputstream 下载呢？这是一个例子：

```
private class DownloadFile extends AsyncTask<String, Integer, String> {
@Override
protected String doInBackground(String... sUrl) {
    try {
        URL url = new URL(sUrl[0]);
        URLConnection connection = url.openConnection();
        connection.connect();

        // download the file
        InputStream input = new BufferedInputStream(url.openStream());
        OutputStream output = new FileOutputStream("/sdcard/file_name.extension");

        byte data[] = new byte[1024];
        long total = 0;
        int count;
        while ((count = input.read(data)) != -1) {
            total += count;
            output.write(data, 0, count);
        }

        output.flush();
        output.close();
        input.close();
    } catch (Exception e) {
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:49:03.853

一个简单的解决方案是将其修改为仅下载它而不要求用户根据内容类型进行确认，而是只需在用于监视下载的任何内容上放置一个取消按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T11:46:18.277

您确定要中断浏览器工作吗？它使用多线程下载多个 URL，并且他正在管理自己的文件系统来为这些 url 创建 cookie，并且他知道何时需要删除它们并更新它们。

那你确定吗？*

# html - 如何创建一个覆盖整个页面的盒子阴影？

> ID：11801790
> 
> 赞同：8
> 
> 时间：2012-08-03T19:04:18.163
> 
> 标签：html, css

我正在寻找的最终结果是这样的：

[http://osxdaily.com/wp-content/uploads/2011/08/icloud-background.jpg](http://osxdaily.com/wp-content/uploads/2011/08/icloud-background.jpg)

这是使用此 bkg 标题生成的：

[http://osxdaily.com/wp-content/uploads/2011/08/apple-shirt.jpg](http://osxdaily.com/wp-content/uploads/2011/08/apple-shirt.jpg)

是否可以应用 css3 box-shadow 来获得所需的输出？

我试过了：

```
box-shadow: inset 0 0 490px black; 
```

但这仅涵盖屏幕的一小部分。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T19:07:26.067

确保将框阴影设置为的任何元素都具有 100% 的宽度和高度。这意味着所有祖先也必须具有 100% 的高度和宽度。所以如果你想把它应用到`body`，`html`还必须有那些属性。

**CSS：**

```
html, body { 
    width:100%;
    height: 100%;
}
​
body {
    box-shadow: inset 0 0 490px black;
    background: url('image.jpg');
} 
```

[JS 小提琴示例](http://jsfiddle.net/YDYTd/2/)

* * *

要在滚动时保持相同的阴影效果，请将框阴影应用到`wrapper`div 然后应用`overflow:auto`。

**HTML：**

```
<html>
<body>
    <div id="wrapper"></div>
</body>
</html> 
```

**CSS：**

```
html, body, #wrapper { 
    width:100%;
    height: 100%;
}

#wrapper {
    box-shadow: inset 0 0 490px black;
    background: url('image.jpg');
    overflow: auto;
} 
```

​ ​<a href="http://jsfiddle.net/YDYTd/3/">JS小提琴示例

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-29T11:06:10.110

还有另一种非常简单的方法可以实现类似的效果。您必须使用具有 boxshadow 的 div 来包装您的网站内容。此外，div 需要具有 100% 的宽度和高度，以及 position: absolute; 当你滚动页面时，这会给你一个很好的效果。

HTML

```
<div class="shadow">

    <!-- ANY CONTENT GOES HERE -->
    <div>
        <h1>Content</h1>
    </div>
    <!-- ANY CONTENT GOES HERE -->

</div> 
```

CSS

```
.shadow {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-box-shadow: inset 0px 0px 400px #000000;
    box-shadow: inset 0px 0px 400px #000000;
} 
```

示例：http: [//jsfiddle.net/2GRGF/1/](http://jsfiddle.net/2GRGF/1/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T00:20:39.313

如果我理解正确，这就是您要寻找的：http: [//jsfiddle.net/RGWrC/](http://jsfiddle.net/RGWrC/)

这是代码：

```
html { 
    height: 100%;
}

body {
    min-height: 100%; 
    box-shadow: inset 0 0 490px black;
    background: url('whatever.jpg');
} 
```

这会将背景扩展到页面的整个高度，但仍然确保最小值等于窗口的高度。我认为 CSS 是不言自明的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-03T19:13:10.727

我会将图像设置为页面背景，然后定义一个边距约为 100-200px 的容器（取决于您想要阴影的方式），并在该 div 上使用 box-shadow 填充此边距。您还可以将 div 设置为固定位置（我相信），以便它会随着页面滚动并保持相同的阴影效果

编辑：将图像设置为页面（html或body）背景将解决图像太小的问题，div创建您想要的阴影效果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T19:06:13.323

你把阴影放在什么上面？你应该把嵌入阴影放在身体上，或者一个有 100% 大小的元素上。

链接中的图像重复了背景方块，然后是一个嵌入的阴影，可能在跨越整个屏幕的同一元素上

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T19:07:57.493

您是否将图像平铺设置为容器的背景，并将容器跨过屏幕？然后我认为你建议的css应该可以工作。也许试试小提琴...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-02T10:40:58.270

整页阴影！

```
box-shadow: 0 0 0 100000px rgba(0,0,0,.2); 
```

# parsing - 标签中的 XPATH 编码 HTML

> ID：11801793
> 
> 赞同：1
> 
> 时间：2012-08-03T19:04:27.087
> 
> 标签：parsing, xpath

`

```
<item>
<title>Lorem ipsum dolor sit ame</title> 
   `    `      
<description>
&amp;#13;
&amp;#13;
&amp;#13;&lt;div class=&quot;videoInStoryC&quot;&gt;&amp;#13;
&lt;div id=&quot;emp-19102206-25558&quot; class=&quot;emp&quot;&gt;&amp;#13;
&lt;div class=&quot;warning&quot;&gt;&lt;img class=&quot;holding&quot; src=&quot;http://bac.com/asfg.jpg&quot; alt=&quot;ipsim dlor&quot; /&gt;&amp;#13;
&lt;/div&gt;&amp;#13;  &lt;/div&gt;&amp;#13;
&amp;#13;
&lt;p class=&quot;caption&quot;&gt;ipfi fks: &quot;Lorem ipsum dolor sit amel&quot;&lt;/p&gt;&amp;#13;
&lt;/div&gt;&amp;#13;
&amp;#13;
</description>  
</item> 
```

`

我有一个带有标签中编码 HTML 的 RSS 提要。我想在编码的 HTML 的 IMG 标记中提取 URL 源。在这种情况下，URl 是[http://bac.com/asfg.jpg](http://bac.com/asfg.jpg)。我使用了 img/@src 但没有成功，我假设是因为编码的 Html。谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T23:30:41.443

你可以使用

```
parse-xml(replace(/item/description, "&#13;", ""))//img/@src 
```

如果您有 XPath 3.0 解释器（但您没有）

你可以使用类似的东西

```
filter(/item/description, 'src="([^"]*)"', 1) 
```

如果您的解释器有类似过滤函数的功能，可以将正则表达式应用于字符串。（但事实并非如此）

您可以使用

```
 replace(replace(/item/description, '.*src="', '', 's'), '".*', '', 's') 
```

如果您有 XPath 2.0 解释器并且文本中只有一个图像

# android - 如何简化这个 Android 程序？

> ID：11801797
> 
> 赞同：0
> 
> 时间：2012-08-03T19:04:42.703
> 
> 标签：android, performance

我刚开始学习 Android/Java 编程。这是我的第一个基本程序，现在运行良好。感谢堆栈溢出人员帮助我。现在，如果您能帮助我调整这个程序，那将是非常有帮助的，它将让我更好地了解 Android 编程的基本结构。这是代码...（简而言之：它将在您键入时将摄氏度转换为华氏度，反之亦然..）

```
 package mag.com.myhelloworldapp;

import android.os.Bundle;
import android.app.Activity;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.View;
import android.view.View.OnFocusChangeListener;
import android.widget.EditText;

public class MainActivity extends Activity {

    private EditText celsiusText;
     private EditText farenheitText;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        celsiusText = (EditText) findViewById(R.id.editText1);
        farenheitText = (EditText) findViewById(R.id.editText2);
        celsiusText.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                ((EditText)findViewById(R.id.editText2)).setText("");
                ((EditText)findViewById(R.id.editText1)).setText("");
            }
        });

        farenheitText.setOnFocusChangeListener(new OnFocusChangeListener() {

            @Override
            public void onFocusChange(View v, boolean hasFocus) {
                ((EditText)findViewById(R.id.editText2)).setText("");
                ((EditText)findViewById(R.id.editText1)).setText("");
            }
        });

        farenheitText.addTextChangedListener(new TextWatcher()
        {
            @Override
            public void onTextChanged(CharSequence S, int start, int before, int count)
            {
                if(farenheitText.hasFocus())
                {
                float inputValue;
                if (!S.toString().equals(""))
                {
                    inputValue = Float.parseFloat(S.toString());
                             ((EditText)findViewById(R.id.editText1)).setText(String
                                    .valueOf(convertFahrenheitToCelsius(inputValue)));

                }
                else
                {
                     ((EditText)findViewById(R.id.editText1)).setText("");
                    return;
                }
                }
            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count, int after)
            {

            }

            @Override
            public void afterTextChanged(Editable s)
            {

            }
        });

        celsiusText.addTextChangedListener(new TextWatcher()
        {

                        public void afterTextChanged(Editable s) {

                   }

                   public void beforeTextChanged(CharSequence s, int start, 
                     int count, int after) {
                   }
                public void onTextChanged(CharSequence S,int start,int before, int count){
                    if (celsiusText.hasFocus())
                    {
                    float inputValue;

                    if (!S.toString().equals(""))
                    {
                        inputValue = Float.parseFloat(S.toString());
                     ((EditText)findViewById(R.id.editText2)).setText(String
                                .valueOf(convertCelsiusToFahrenheit(inputValue)));

                    }
                    else
                    {
                        ((EditText)findViewById(R.id.editText2)).setText("");
                        return;
                    }
                            }
                }
                });       

    }

//Converts to celsius
      private float convertFahrenheitToCelsius(float fahrenheit) {
        return ((fahrenheit - 32) * 5 / 9);
      }

      // Converts to fahrenheit
      private float convertCelsiusToFahrenheit(float celsius) {
        return ((celsius * 9) / 5) + 32;
      }

    } 
```

这是activity_main.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:paddingLeft="16dp"
    android:paddingRight="16dp" >

    <EditText
        android:id="@+id/editText1"
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="62dp"
        android:ems="10"
        android:inputType="numberSigned" >

        <requestFocus />
    </EditText>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="128dp"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/editText1"
        android:layout_alignBottom="@+id/editText1"
        android:layout_alignParentRight="true"
        android:ems="10"
        android:inputType="numberSigned" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/editText1"
        android:layout_below="@+id/editText1"
        android:layout_marginTop="18dp"
        android:text="@string/celsius"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignRight="@+id/editText2"
        android:text="@string/fahrenheit"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

再次感谢您的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:35:45.123

我现在唯一看到的：

一旦您将来自 XML 的视图存储在变量中，您就不需要再次搜索它们 (findViewById)。只需使用您创建的变量即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:55:53.390

代替 ：

```
((EditText)findViewById(R.id.editText2)).setText("");
((EditText)findViewById(R.id.editText1)).setText(""); 
```

你应该简单地重用你已经拥有的那个：

```
celsiusText.setText("");
farenheitText.setText(""); 
```

当您已经分配了对象时，每次查找视图都没有意义。

这当然适用于您使用的代码中的所有位置：

```
((EditText)findViewById(R.id.editText1))
((EditText)findViewById(R.id.editText2)) 
```

# mysql - 无法让 asp.net 会员提供程序与 mysql 一起使用

> ID：11801802
> 
> 赞同：0
> 
> 时间：2012-08-03T19:05:05.257
> 
> 标签：mysql, asp.net-membership

我一直在通过 MySql Connector/Net 中令人困惑的教程来设置 ASP.NET 成员数据库。我实际上不会将网站用于任何事情。我正在开发一个使用 ASP.NET Membership Provider 进行身份验证的 WPF 应用程序。我们正在考虑为我们的嵌入式数据库切换到 MySQL，我需要创建会员数据库。

不幸的是，据我所知，没有用于生成 MySql ASP.NET Membership 数据库模式的 SQL 脚本。我知道如何做到这一点的唯一方法是创建一个网站并让它生成模式。

但是，我无法让提供商工作。这是我在设置安全性时遇到的错误：

```
Could not load file or assembly 'mysql.web' or one of its dependencies. The system cannot find the file specified. (C:\Users\tony.vitabile\Documents\Visual Studio 2010\WebSites\WebSite1\web.config line 48) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:15:56.433

没关系，我发现了我的问题。`type`我在配置中提供程序的设置中有错误的 DLL 路径。我还必须添加版本、culter 和公共令牌才能使其正常工作。

# runtime-error - 使用运行时诊断 Access 2010 中的错误

> ID：11801806
> 
> 赞同：1
> 
> 时间：2012-08-03T19:05:36.493
> 
> 标签：runtime-error, ms-access-2010

我有一个由多个用户使用的访问应用程序。一些安装了 Access 2010，而另一些则使用运行时。拥有 Access 的用户可以正常运行该应用程序。但是，那些使用运行时的人在使用其中一种形式时会出错。错误是法语但大致翻译：

```
This application was stoped because of a runtime error.
It cannot continue and will be closed. 
```

显然出了点问题，但由于那些使用 Access 的人没有这个错误，我无法调试应用程序并查看问题所在。

是否保留了某种日志，其中包含可用于诊断的更多信息。我知道，如果那些拥有运行时的人会安装 Access，它会解决问题，但这是在 citrix 服务器上，而那些没有访问权限的人没有它，因为出于某种原因，他们被拒绝访问，因此运行。

谢谢，

# c++ - 我开始学习 WINAPI 和 C++ 但有什么问题吗？

> ID：11801808
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:05:45.447
> 
> 标签：c++, winapi, visual-c++

我尝试做的 WinMain 出了点问题。我在 Windows C++ 编程方面完全是菜鸟，我尝试学习。我跟着导师来帮助我。但看起来不起作用！这是我的代码..

```
#include <Windows.h>

LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam);

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow)
{

    HWND hWnd;
    WNDCLASSEX wc;

    ZeroMemory(&wc, sizeof(WNDCLASSEX));

    wc.cbSize = sizeof(WNDCLASSEX);
    wc.style = CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc = WindowProc;
    wc.hInstance = hInstance;
    wc.hCursor = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)COLOR_WINDOW;
    wc.lpszClassName = "WindowClass1";

    RegisterClassEx(&wc);

    hWnd = CreateWindowEx(NULL, "WindowClass1", "Our First Windowed app", WS_OVERLAPPEDWINDOW, 300, 300, 500, 400, NULL, NULL, hInstance, NULL);

    ShowWindow(hWnd, SW_SHOW);

    MSG msg;

    while(GetMessage(&msg, NULL, 0, 0))
    {
        TranslateMessage(&msg);

        DispatchMessage(&msg);
    }

    return msg.wParam;

    //return 0;
}

LRESULT CALLBACK WindowProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam) 
{

    switch(message)
    {
    case WM_DESTROY:
        {
            PostQuitMessage(0);
            return 0;
        } break;

    }
} 
```

当我编译时，我没有错误，但是当我运行应用程序时，我的任务栏中只有应用程序图标，仅此而已。在任务管理器中，我看到了 2 个应用程序实例。

什么和我错了？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-03T19:07:46.743

在您的窗口过程中，`DefWindowProc`永远不会被调用，因此您不处理的消息根本不会被处理。这包括让您的窗口显示并像普通窗口一样工作的一些必需品。一个很好的地方是`default`你的开关，所有其他情况都具有该消息的必要返回值：

```
switch (message) {
    case SOME_MESSAGE:
        //...
        return 0;

    case SOME_OTHER_MESSAGE:
        //...
        return 1; //not all messages should return 0; check each one's docs

    default: //all unhandled messages
        return DefWindowProc(hWnd, message, wParam, lParam);
} 
```

调高你的警告级别。您应该得到以下信息（至少在 GCC 上，我确信 MSVC 有类似的东西）：

> 警告：控制到达非 void 函数的结尾 [-Wreturn-type]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T19:08:52.400

您错过了 WindowProc 中的返回值。不要忽略编译器警告...

```
return ::DefWindowProc(hWnd, message, wParam, lParam); 
```

# haskell - Haskell：runST 出现“无法推断”错误

> ID：11801811
> 
> 赞同：7
> 
> 时间：2012-08-03T19:06:10.357
> 
> 标签：haskell

当我尝试编译这个时：

```
module Main where

import qualified Data.Vector.Unboxed.Mutable as MV
import Control.Monad.ST

myRead mv = runST $ MV.read mv 0 
```

我收到以下错误消息：

```
Could not deduce (t ~ U.MVector s a)
    from the context (U.Unbox a)
      bound by the inferred type of myRead :: U.Unbox a => t -> a
      at src/Main.hs:53:1-32
      `t' is a rigid type variable bound by
          the inferred type of myRead :: U.Unbox a => t -> a
          at src/Main.hs:53:1
    Expected type: U.MVector (PrimState (ST s)) a
      Actual type: t
    In the first argument of `MV.read', namely `mv'
    In the second argument of `($)', namely `MV.read mv 0'
    In the expression: runST $ MV.read mv 0 
```

我可以使用 runST 从纯可变向量中读取吗？如果是这样，怎么做？我认为它需要一个类型签名`myRead`，但我尝试过的一切都导致了越来越多的难以理解的错误消息。

**编辑**：突出显示我刚刚在下面发表评论的一些上下文：这里的上下文是我有一个函数，它接收一个可变向量，使用可变向量作为临时暂存空间进行一些计算，然后需要返回一个浮点值。因为我不关心可变向量的变化，所以我想知道是否有一种方法可以忽略它的“状态变化”并简单地从其中返回一个值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:16:30.840

编译器默认将`mv`左侧的参数视为某种特定类型，但需要在右侧具有多态类型。类型签名可以解决问题。

```
{-#LANGUAGE Rank2Types#-}
module Main where

import qualified Data.Vector.Unboxed.Mutable as MV
import Control.Monad.ST

myRead :: MV.Unbox a => (forall s . MV.MVector s a) ->  a
myRead mv =  runST $ MV.read mv 0 
```

如果我理解，您的函数的可能签名将是这样的：

```
-- myBadRead :: forall s a . MV.Unbox a => MV.MVector s a -> a 
-- myBadRead mv =  runST $ MV.read mv 0 
```

但是这里`runST :: (forall s. ST s a) -> a`不会有一个`s`独立的东西可以处理，因为当你在 LHS 上`s`写的时候是固定的。`mv`

编辑：然而，正如 Joachim B 和 Daniel F. 强调的那样，尽管上述定义是连贯的，但在实践中将毫无用处，因为您将无法构造一个向量`mv`来赋予它。粗略地说，任何生成 an 的方式`mv`都已经`s`由编译器在后台分配了一个确定值。一种标准方法是让这样一个函数作用于一个“纯”向量，`Data.Vector.Unboxed`然后在右侧，在从`.Mutable`模块应用操作之前解冻它

```
import qualified Data.Vector.Unboxed as UV
import qualified Data.Vector.Unboxed.Mutable as MV
import Control.Monad.ST

myRead :: MV.Unbox a => UV.Vector a ->  a
myRead v =  runST $ do mv <- UV.unsafeThaw v
                       MV.read mv 0 
```

当然，这个特定的定义等价于`myRead = (UV.! 0)`类似地，这样的事情是有道理的，`runST`在定义中突出`myRead`

```
mhead :: MV.Unbox a => MV.MVector s a -> ST s a
mhead mv0 =  MV.read mv0 0

mrx  = runST $ do mv <- UV.unsafeThaw $ UV.enumFromStepN 0 1 20
                             -- ^^^ or however the mv is generated.
                  x <- MV.unsafeRead mv 17 -- arbitrary 'scratch pad'
                  MV.unsafeWrite mv 17 (2*x)  -- computations
                  mhead mv
                  -- ^^^ we return just the first element, after all the mutation 
```

在这里，我们不是关闭`myRead`或关闭它`mhead`，而是`runST`保持它的多态性，`s`然后可以`ST`在可变向量`mv`出现的同一块内使用它。因此，编译器将能够使用`s`它用于整个 do-block 的“秘密”来解释 apply to 的结果`mhead`， `mv`因为它是我们的多态定义留下的可能性之一`mhead`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T19:22:29.613

applicative 的答案告诉你如何让你的代码编译。但是代码将无法使用：关键`runST`是命令式计算无法逃脱它，因为那里存在存在绑定的类型变量。

现在，您在某处创建的任何可变数组都将具有固定 s 的类型`MVector s a`，*而*您期望一个为*任何*s`myRead`提供向量的值。

 *之前似乎有一个问题让你想要拥有那个（不可能的）功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T01:55:47.357

其他答案很好，但我认为您缺少关于 ST 的一件基本事情。对 runST 的每次调用都有效地创建了一个新的“ST 宇宙”，一些命令式代码在其中运行。因此，如果您调用 runST 以创建数组，并单独调用 runST 以从该数组中获取值，那么事情可能无法正常工作。两个 runST 调用想要它们自己独特的宇宙，而您希望它们共享一个。

详细解释的答案是这些独特的宇宙是如何通过一些类型系统的诡计创建的。*

# c - 低和高 DWORD => size_t

> ID：11801812
> 
> 赞同：1
> 
> 时间：2012-08-03T19:06:12.950
> 
> 标签：c, join, size-t, dword

编程语言：C

我有两个 DWORD：一个低的和一个高的。我想将它们都转换为 size_t 类型的一个变量。我有以下代码：

```
size_t fileSize = fileSizeHigh;
size_t *pfileSize = &fileSize;
pfileSize[4] = fileSizeLow; 
```

是这样吗？我猜不是因为第一个命令可能将高字节存储在错误的位置，对吧？请帮助我如何做到这一点。谢谢你 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:09:51.450

因此，在 32 位 Microsoft 系统上， a`DWORD`的大小与`size_t`. 这意味着您不能将两个`DWORD`s 放入 a 占用的空间中`size_t`。

您的代码将简单地写入超出末尾的内存`fileSize`并且具有未定义的行为。它不会做你想做的事。

你真正想要完成的是什么？您要完成的任务是什么？告诉我们，我们或许可以为您提供替代解决方案。

**编辑**：正如@nos 解释的那样，在 64 位系统上 a`size_t`可以容纳两个`DWORD`s。如果您使用的是 64 位系统，则可以使用位移来将两者结合起来：

```
size_t combined = ((size_t)high << 32) | (size_t)low; // 64-BIT WINDOWS ONLY 
```

然而，这仍然有点代码味道，因为 64 位 Windows 目标上的操作与 32 位目标上的操作非常相似，所以看起来你在做某事的原因很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:13:06.677

如果您正在编写 64 位代码，则 size_t 通常为 64 位。您需要在您的平台上验证这一点。DWORD 通常是 32 位的，您也需要验证这一点。给定 32 位 DWORD 和 64 位 size_t，您可以这样做：

```
DWORD a = ...;
DWORD b = ...;
size_t c = (size_t)a << 32 | b; 
```

如果您正在编写 32 位代码，将 2 个 32 位类型组合成另一个 32 位类型是没有意义的，size_t 通常是 32 位的 32 位代码。

# excel - 使用 excel 中的按钮在数据透视表中自动设置过滤器

> ID：11801817
> 
> 赞同：0
> 
> 时间：2012-08-03T19:06:23.573
> 
> 标签：excel, button, filter, pivot-table

如果我要在 Excel 中按下表单控制按钮，是否有一个快速宏可以自动为我在数据透视表中设置过滤器？我对 vba 和宏没有任何经验，我尝试录制一个，但是当其中一个枢轴未设置为与我录制宏时最初设置的过滤器相同时，它会出错。

这是它的代码：

```
 Sub Filter_Foot()
'
' Filter_Foot Macro
'

Application.ScreenUpdating = False

    ActiveSheet.PivotTables("PivotTable3").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable3").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable2").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable2").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable4").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable4").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable1").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable1").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable5").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable5").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable6").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable6").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable7").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable7").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable8").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable8").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
    ActiveSheet.PivotTables("PivotTable9").PivotFields("MD").CurrentPage = "(All)"
    With ActiveSheet.PivotTables("PivotTable9").PivotFields("MD")
        .PivotItems("Name 1").Visible = False
        .PivotItems("Name 2").Visible = False
        .PivotItems("Name 3").Visible = False
        .PivotItems("Name 4").Visible = False
        .PivotItems("Name 5").Visible = False
        .PivotItems("Name 6").Visible = False
        .PivotItems("Name 7").Visible = False
        .PivotItems("Name 8").Visible = False
        .PivotItems("Name 9").Visible = False
        .PivotItems("Name 10").Visible = False
        .PivotItems("Name 11").Visible = False
        .PivotItems("Name 12").Visible = False
        .PivotItems("Name 13").Visible = False
        .PivotItems("Name 14").Visible = False
        .PivotItems("Name 15").Visible = False
        .PivotItems("Name 16").Visible = False
        .PivotItems("Name 17").Visible = False
        .PivotItems("Name 18").Visible = False
        .PivotItems("Name 19").Visible = False
        .PivotItems("Name 20").Visible = False
        .PivotItems("Name 21").Visible = False
        .PivotItems("(blank)").Visible = False
    End With
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T23:10:53.717

这是很多代码。重构可能更容易发现问题：

```
Sub Filter_Foot()

    Dim pt As PivotTables
    Set pt = ActiveSheet.PivotTables

    Application.ScreenUpdating = False

    SetPF pt("PivotTable3").PivotFields("MD")
    SetPF pt("PivotTable2").PivotFields("MD")
    SetPF pt("PivotTable4").PivotFields("MD")
    SetPF pt("PivotTable1").PivotFields("MD")
    SetPF pt("PivotTable5").PivotFields("MD")
    SetPF pt("PivotTable6").PivotFields("MD")
    SetPF pt("PivotTable7").PivotFields("MD")
    SetPF pt("PivotTable8").PivotFields("MD")
    SetPF pt("PivotTable9").PivotFields("MD")

    Application.ScreenUpdating = True

End Sub

Sub SetPF(pf As PivotField)
    Dim i As Integer
    With pf
        .CurrentPage = "(All)"
        For i = 1 To 21
            .PivotItems("Name " & i).Visible = False
        Next i
        .PivotItems("(blank)").Visible = False
    End With
End Sub 
```

# jquery - 单击HTML中的锚点时如何找到调用的Javascript函数

> ID：11801822
> 
> 赞同：0
> 
> 时间：2012-08-03T19:06:51.857
> 
> 标签：jquery, html, javascript-events

我只是想知道在 Twitter 中，当您单击推文的“重播”时，会调用什么前端函数。我检查了 Chrome 中的元素，它似乎是一个带有 href="#" 的锚点，所以我猜想有一些 Javascript 函数与该锚点的 onclick 事件相关联。只是想知道如何找出调用了哪个函数以及该函数的源代码在哪里。

这是 Twitter 上“重播”的代码部分

```
<a class="with-icn js-action-reply" data-modal="tweet-reply" href="#" title="Reply">
<i class="sm-reply"></i>
<b>Reply</b>
</a> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:25:00.023

他们的脚本被缩小了，所以有点不可能看。但是，您可以做两件事：

*   单击回复链接时，使用 Chrome 的 Event Listener Breakpoints 闯入调试器
*   就像 MrOBrian 说的：在他们的脚本中搜索 js-action-reply

![在此处输入图像描述](../Images/e5a3fd2491d5409e9ee48c5c9e007c1f.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:11:55.973

您可以使用`data('events')`，尝试以下操作：

```
console.log($('.js-action-reply').data('events')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-02T23:28:22.487

您需要 chrome 中的内置“分析”选项卡。

你可以用它做什么：1）你可以选择时间边界来查看函数调用。如果你点击一个函数名，chrome 会直接带你到函数体！！火焰图解释：[https ://www.youtube.com/watch?v=g0g4ML4nhPg](https://www.youtube.com/watch?v=g0g4ML4nhPg)

[火焰图截图](http://i.stack.imgur.com/rNK0G.jpg)

# sql-server - SQL Server 在更新一个特定表时超时，在其他表上工作正常

> ID：11801823
> 
> 赞同：0
> 
> 时间：2012-08-03T19:06:56.350
> 
> 标签：sql-server, linq, timeout

我正在使用 Winforms 应用程序。使用 LINQ 和 .NET

在一个表上使用 submitChanges() 函数时，我遇到超时错误，无论记录是什么都要更新。

在其他桌子上我没有问题。

在 SQL Server 管理 Studio 中使用更新查询时，我可以更新有问题的表！！！

由于错误与超时有关，因此软件本身并不是罪魁祸首，但是， **有人知道这个问题是什么吗？**

注意：此数据库由 ISP 托管，自 2 年以来运行良好，只有 1.6 GB，在检查点上截断日志。

问题在 1 小时前出现！不是在我的软件或 LINK 更新本身发生特定更改之后。Y问题不是来自我的电脑，因为客户端也有同样的问题，我尝试了两台电脑（一台远程）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:09:11.213

检查阻塞和等待类型。首先在 Management Studio 中，确定正在执行查询的 session_id：

```
SELECT * FROM sys.dm_exec_requests; 
```

然后运行：

```
SELECT wait_type, blocking_session_id 
  FROM sys.dm_exec_requests
  WHERE session_id = x; 
```

（替换`x`为被阻止的 spid。）

# javascript - Datatables jquery插件 - 限制可选行数

> ID：11801827
> 
> 赞同：0
> 
> 时间：2012-08-03T19:07:29.000
> 
> 标签：javascript, jquery, web-applications, datatables

在数据表上启用行选择时，有没有办法限制用户可以选择的行数？我只希望用户能够在数据表中选择最多两行和最少一行，但我在 Datatables API 中没有看到描述如何执行此操作的选项？

我是否需要在用户选择行时触发的某个回调中手动执行此操作？如果可能的话，我想避免这种情况。任何帮助或见解表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:34:32.863

使用数据表示例：

```
$(document).ready(function() {
    /* Add a click handler to the rows - this could be used as a callback */
    $("#example tbody tr").click( function( e ) {
        if ( $(this).hasClass('row_selected') ) {
            $(this).removeClass('row_selected');
        }
        // the following line do what you want
        else if(oTable.$('tr.row_selected').length < 2) {
            $(this).addClass('row_selected');
        }
    });

    /* Add a click handler for the delete row */
    $('#delete').click( function() {
        var anSelected = fnGetSelected( oTable );
        if ( anSelected.length !== 0 ) {
            oTable.fnDeleteRow( anSelected[0] );
        }
    } );

    /* Init the table */
    oTable = $('#example').dataTable( );
} ); 
```

参考：[选择单行](http://datatables.net/release-datatables/examples/api/select_single_row.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T23:01:29.813

好的，实现工作正常，所以我最终做的不是限制用户可以选择的行数，而是添加了一些逻辑来取消选择任何先前选择的行，每当用户单击另一行时。我将选择顺序视为一个队列，我刚刚使用数组实现了它，每次我将新行推送到队列时，任何先前的元素都会被弹出。

The size of the queue determines the number of rows a user can select, by setting the queue size to two, this allows up to two rows to be selected, when an additional row is selected, the first selected row is removed from the queue. 我使用下面的 fnGetInstance() 和 fnDeselect() 函数从我的数据表实例中取消选择行

```
//oldRow = first selected row from queue

var oTT = TableTools.fnGetInstance( 'MyDataTable' );
oTT.fnDeselect( oldRow ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-27T15:05:45.510

正如在另一个答案中已经指出的那样，DataTables 有一个[单行选择](https://datatables.net/release-datatables/examples/api/select_single_row.html)示例，但不幸的是，它并不完全可用且令人信服。从代码中可以明显看出他们的解决方案在包的外部，但从测试经验中您可以看到本机选择计数没有更新（这并不好）。

无论如何，上述示例中最重要的部分 - 如果我们想部分重用它 - 是在功能尚未本地管理的情况下捕获事件的能力`table.on( 'deselect',`。是什么情况？`Ctrl`+`click`可以选择多个项目。因此，新的解决方案结构将是

```
table.on( 'click', 'tr', function () {
    // https://stackoverflow.com/a/42266749/11323942
    if ( event.ctrlKey ) {
        //is ctrl + click
        console.log("ctrl + click intercepted but forcing single select")
        // NOW WHAT TO DO?
    }
} ); 
```

现在要做的最好的事情是将控件交付回其框架的标准事件。所以

```
// NOW WHAT TO DO?
table.rows({ selected: true }).deselect(); 
```

以上将选择限制为单行，但很容易扩展到不同数量的行，当然现在您可以以适当的方式执行您可能想要的任何*重置操作*

```
table.on( 'deselect', function ( e, dt, type, indexes ) {
    if ( type === 'row' ) {
        var deselectedrow = indexes[0]
        console.log('deselected row', deselectedrow);
        // perform whatever reset action you might need
    }
} ); 
```

# c# - ForEach JSON c# 上的 NullReferenceException

> ID：11801837
> 
> 赞同：1
> 
> 时间：2012-08-03T19:08:10.950
> 
> 标签：c#, .net, c#-4.0, facebook-c#-sdk

我对以下代码有问题。它使用 Facebook c# SDK。问题是我正在提取并打印我所有朋友工作历史的列表。但是，当这些数据不可用时，我认为它会导致 NullReferenceException。我在网上查看了一堆解决方案，但没有找到一个似乎有效的解决方案。任何帮助，将不胜感激。

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        var accessToken = "...";
        var client = new FacebookClient(accessToken);
        dynamic myInfo = client.Get("me/friends", new { fields = "name,id,work" });

        foreach (dynamic friend in myInfo)
        {
            foreach (dynamic work in myInfo.work) // <---- here
            {
                Response.Write("Employer: " + work.employer.name + "<br/> Position:" + work.position.name + "<br/><br/>");
            }
        }
    }
} 
```

我已经包含了建议的编辑，但现在出现了一个不同的错误：

```
 namespace WebApplication1.Site
 {
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

        var accessToken = "xxx";
        var client = new FacebookClient(accessToken);
        dynamic myInfo = client.Get("me/friends", new { fields = "name,id,work" });

        foreach (dynamic friend in myInfo)
        {
            **foreach (dynamic work in friend.work ?? new[] { new { employer = new { name = string.Empty }, position = new { name = string.Empty } } })**
                {
                    Response.Write("Employer: " + myInfo.work.employer.name);
                }

        }

    }
}
} 
```

“System.Collections.Generic.KeyValuePair”在第 21 行不包含“work”的定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:15:26.300

您可以提供一个空列表来代替空值以避免空引用异常：

```
 foreach (dynamic work in friend.work ?? new List<string>()) 
```

您收到异常是因为 foreach 对空值调用 .GetEnumerator() 。我使用了一个新列表，但是放在这里的内容并不重要。只要它不为空并且是可枚举的。

**编辑**

您可以提供一个匿名类型来提供您需要的属性：

```
 foreach (dynamic work in friend.work ?? new [] { new { employer = new { name = string.Empty}, position = new { name = string.Empty }}}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:12:42.150

只需在启动内部循环之前测试 myInfo.work 是否为 null：

```
if (myInfo.work != null) {
   foreach (dynamic work in myInfo.work) 
```

另外，我刚刚注意到您可能使用了错误的对象：

```
if (friend.work != null) {
   foreach (dynamic work in friend.work) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:15:06.190

我不熟悉 API，但我猜在您的内部循环中，您可能意味着迭代在外部循环中创建的对象的属性。

例如：

```
foreach (dynamic friend in myInfo)
{
    foreach (dynamic work in friend.work) // rather than myInfo.work
    {
        // ...
    }
} 
```

您还应该对内部循环进行空检查，以防止空引用异常。

# java - 发布后如何注销facebook？

> ID：11801840
> 
> 赞同：-2
> 
> 时间：2012-08-03T19:08:15.147
> 
> 标签：java, javascript, facebook, facebook-graph-api, graph

我的网页中有一个已发布的按钮，但在用户单击按钮后我需要从 Facebook 注销用户。我是怎么做到的？

* * *

我试试看：

```
<html>
    <head>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
         //initializing API
         window.fbAsyncInit = function() {
        FB.init({appId: '462904197064938', status: true, cookie: true, xfbml:   true});
        };

        (function() {
        var e = document.createElement('script'); e.async = true;
        e.src = document.location.protocol +
          '//connect.facebook.net/en_US/all.js';
        document.getElementById('fb-root').appendChild(e);
      }());
    </script>

    <!-- custom login button -->
    <a href="#" onclick="fblogin();return false;">login</a>
    <a href="#" onclick="fblogout();return false;">logout</a>

    <script>
      //your fb login function
      function fblogin() {
        FB.login(function(response) {
          alert("login");
        }, {scope:'read_stream,publish_stream,offline_access'});
      }

      function fblogout() {
        FB.login(function(response) {
          alert("logout");
        });
      }
    </script>

</body>
</html> 
```

但它不起作用。登录工作正常，但注销不起作用并且没有任何错误日志。为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:10:56.390

Facebook SDK 有一个您应该能够使用的注销方法。IIRC，您无法使用 GraphAPI 注销。

请参阅[https://developers.facebook.com/docs/reference/javascript/FB.logout/](https://developers.facebook.com/docs/reference/javascript/FB.logout/)。

# android - 多笔手势无法进行推送 - android

> ID：11801841
> 
> 赞同：1
> 
> 时间：2012-08-03T19:08:18.110
> 
> 标签：android, gesture, builder

我用“手势生成器”创建了一个手势列表，我正在尝试做一个像“i”这样的手势。如果我制作棒子只能正常工作，但如果我制作棒子然后我指出了这一点，那就行不通了。甚至没有进入 onGesturePerformed 函数。我使用其他字母如“a”、“e”、“o”、“u”（使用单个手势）和其他字母，如“A”、“E”、“I”、“O”、“U” （我使用更多的一种手势）。GestureOverlayView 组件中添加了以下参数：“手势描边类型=multiple”和“Fade offset=2000”。我的印象是它检测到好像我做了另一个事件为“onTouch”......我看到有参数：“启用拦截事件”。两个我都试过了 虚假和真实，问题仍在继续。谁能帮我？非常感谢。

# javascript - 从 Javascript 中的 Chrome 扩展程序获取标签页 url

> ID：11801845
> 
> 赞同：0
> 
> 时间：2012-08-03T19:08:36.443
> 
> 标签：javascript, google-chrome, google-chrome-extension, popup

我试着环顾 Stackoverflow，但找不到任何专门针对此的东西。

所以基本上，我的网站有一个共享页面，如下所示：

```
http://domain.com/share.php?link=http://sharing.url 
```

我的扩展是这样的：

```
{
 ...
  "browser_action": {
   "default_icon": "icon.ico",
   "default_popup": "schare.html"
 }
...
} 
```

共享.html：

```
<style>
body, html{
margin:0;
padding:0;
}
iframe{
    width:520px;
    height:200px;
    margin:0;
}
</style>
<iframe id="iframes" frameborder="0"></iframe>
<script type="text/javascript" src="popup.js"></script> 
```

和popup.js：

```
document.getElementById("iframes").setAttribute("src", "http://domain.com/share.php?link="+location.href+""); 
```

但这是错误的 URL。我怎样才能在不做任何太花哨的事情的情况下获得标签网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T15:56:00.920

如果您在当前窗口中有一组选项卡，而不仅仅是一个，则下面的代码可能不起作用。这是修改后的版本

`chrome.tabs.query({active : true, currentWindow: true}, function (tabs) { var tab = (tabs.length === 0 ? tabs : tabs[0]);
var activeTabUrl = tab.url; });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T03:08:11.887

You can get the currently active tab by calling [`chrome.tabs.query`](http://code.google.com/chrome/extensions/tabs.html#method-query). The callback function will receive the [reference to the tab](http://code.google.com/chrome/extensions/tabs.html#type-Tab) as an argument.

So to get the URL of active tab, you can use this:

```
chrome.tabs.query({active : true, currentWindow: true}, function (tab) {
    var activeTabUrl = tab.url;
}); 
```

Note, that the `getCurrent()` method uses a callback, so don't try to use in a linear code.

# c++ - Linux通过pid获取窗口图标

> ID：11801848
> 
> 赞同：2
> 
> 时间：2012-08-03T19:08:50.140
> 
> 标签：c++, linux

有谁知道如何在 Linux 中通过 PID 获取窗口图标？我只对带有 Xlib 的 C++ 或带有 JNA 的 Java 的示例感兴趣。

PS。对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-03T20:12:56.880

您可以使用 GTK，循环打开窗口，检查它们的 PID 并从窗口中获取图标：

[如何获取图标/图标在 linux/windows 中运行应用程序的路径？](https://stackoverflow.com/questions/5810399/how-to-get-icon-icons-path-of-running-app-in-linux-windows)

# windows-phone-7 - 在函数中使用 Type 对象时出错

> ID：11801852
> 
> 赞同：0
> 
> 时间：2012-08-03T19:09:22.900
> 
> 标签：windows-phone-7

我有一个函数可以在类中返回类型对象。它适用于网页，但不适用于 windows phone 应用程序。错误是“预期的类、委托、枚举、接口或结构”。谁能告诉我如何解决它。谢谢。

有我的代码：

```
 public static object GetData(Uri relativeUri)
    {
        return GetData<object>(relativeUri);
    }

   public static T GetData<T>(Uri relativeUri)
    {
        var request = CreateRequest(relativeUri);
        HttpWebResponse r;
        //return Deserializer<T>(request.GetResponse().GetResponseStream());             

        try
        {
            r = (HttpWebResponse)request.GetResponse();
            return Deserializer<T>(r.GetResponseStream());
        }
        catch (WebException webex)
        {
            HttpWebResponse webResp = (HttpWebResponse)webex.Response;
            setSessionError(webResp.GetResponseStream());

        }

        return Deserializer<T>(request.GetResponse().GetResponseStream());
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T16:26:25.333

我发现我的代码有什么问题。我有额外的右括号，可以将函数排除在类之外。

# jquery - 使用jquery解析html文件

> ID：11801853
> 
> 赞同：0
> 
> 时间：2012-08-03T19:09:30.933
> 
> 标签：jquery

您好我已经使用 jquery 从网站中提取了 html 源代码。我正在尝试在特定标签下提取链接，该标签的形式`<p class="title"> <a href="some link ">` 是我试图在 href 下提取链接。提取我做的html

```
$.get("link",function(data){ alert($data('p').attr('title')); } 
```

data 包含 html 源代码。警报框显示为未定义。是不是不能提取

用这种格式的数据标记？我无法获得如何提取 href 标签下的链接。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:13:01.793

原始解决方案（找到第一个链接）

```
$.get("link",function(data){ alert($(data).find('p.title a').attr('href')); } 
```

修改后的解决方案（找到所有链接）

```
$.get("link", function(data) {
    var links = [];

    $(data).find('p.title a').each(function() {
        links.push($(this).attr('href'));
    });

    alert(links.join(', '));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:13:27.440

从您的示例看来，您应该这样做：

`$.get("link",function(data){ alert($(data).find('p.title a').attr('href')); }`

# soundcloud - 通过 SoundCloud API 收藏私人曲目

> ID：11801856
> 
> 赞同：1
> 
> 时间：2012-08-03T19:09:44.353
> 
> 标签：soundcloud, asp.net-web-api

有谁知道如何使用 SoundCloud API 收藏私有曲目？

这就是我到目前为止所拥有的。

```
SC.put('/me/favorites/1234567', function(track,error){alert(error.message)}) 
```

这适用于公开的轨道，但当它是私有的时，我收到 404/401 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T19:51:30.273

只要您可以访问私人曲目，您就应该可以收藏它。请注意，这意味着：

1.  该曲目属于当前经过身份验证的用户或..
2.  该曲目已明确共享给当前经过身份验证的用户

只要满足这两个条件中的任何一个，您就可以收藏一首曲目。请注意，当然您还必须允许用户首先进行身份验证：

```
SC.initialize({
  client_id: 'foo',
  redirect_uri: 'http://example.com/callback.html'
});

SC.connect(function(me) {
  SC.put('/me/favorites/53919056', function(response, error) {
    // response.status will equal "201 - Created"
  });
}); 
```

# python - 神经网络的加权输入

> ID：11801865
> 
> 赞同：1
> 
> 时间：2012-08-03T19:10:22.917
> 
> 标签：python, neural-network, pybrain

我怎样才能使 NN 使得某些输入变量比其他变量“更重要”。例如，假设我的输入层有 2 个神经元，我想强调输入一个是 70% 重要，而另一个只有 30%，因为尽管从公式上讲它们测量的是相同的东西，但第一个对最终结果的贡献比其他的要多。像称重样本之类的东西，只是我想在全球范围内权衡各个输入。

这甚至可能/有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:19:50.603

查看本教程[如何衡量输入的重要性？](http://webcache.googleusercontent.com/search?q=cache%3ayhYe72_20OoJ%3aftp://ftp.sas.com/pub/neural/importance.html%20&cd=1&hl=en&ct=clnk)

> “重要性”、“显着性”和“敏感性”等术语没有精确的、被广泛接受的含义。该答案将讨论已提出的各种衡量输入重要性的方法，但该列表绝不是详尽无遗的。不同的重要性度量可能在神经网络的不同应用中有用。这个答案的要点是，没有适合所有应用程序的单一重要性度量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T20:10:23.477

这是一个在 pybrain 中扩展连接和层的教程：

[http://www.pybrain.org/docs/tutorial/extending-structure.html](http://www.pybrain.org/docs/tutorial/extending-structure.html)

看来您应该能够从输入节点创建具有所需行为的连接作为连接对象的子类。

然后你把碎片放在一起：

[http://www.pybrain.org/docs/tutorial/netmodcon.html#netmodcon](http://www.pybrain.org/docs/tutorial/netmodcon.html#netmodcon)

将带有加权连接实例的两个输入模块连接到模块。

# android - android：获取保存在系统本身中的文件图标

> ID：11801867
> 
> 赞同：0
> 
> 时间：2012-08-03T19:10:25.463
> 
> 标签：android, icons, drawable

我知道在 Windows [桌面] 中会发生以下情况：系统对每个扩展都有一个图标，而对于新扩展则有一个默认图标。安装新程序时，它会将其图标保存到系统中的扩展名中[例如。将 Word 2007 升级到 2010 会更改 .docx 文件的图标]

现在我想知道如何在android中获取这些图标。我不确定它是否遵循相同的场景，但是，我有一个显示这些图标的文件资源管理器应用程序。根据我的使用，我知道这些图标不能硬编码[文件夹图标除外]。例如，安装 Tango 后，其图标接管了 .ini 文件

我的问题是，如何获得这些图标？我有点做一个文件浏览器应用程序[满足某些需求，其他应用程序没有]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:16:01.557

Android 不提供该功能。您可以将最常用的文件类型硬编码到应用程序中，也可以从 Internet 下载它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:30:49.357

您必须创建自己的图标，扫描找到的文件类型，将它们与一些内部列表相匹配，并`Drawable`在`Imageview`您的`ListView`. 假设您使用 a`ListView`来显示在此处找到的文件。

# php - 如果第一次执行不成功，你如何第二次执行脚本？

> ID：11801869
> 
> 赞同：2
> 
> 时间：2012-08-03T19:10:34.633
> 
> 标签：php

这是这个想法：一个 php 脚本将发布的数据发送到不同的服务器。如果服务器无法获取发布的数据，php 脚本应该在几分钟后重试。

如果第一次尝试失败，程序员如何让脚本在几分钟内再次执行以完成任务？

我想创建一个 php 脚本，当新更新或数据库插入通知时，它会调用不同的服务器并将数据发布到服务器。因此，不涉及 HTML/CSS/JS。它完全是命令行 - 在后台运行。那么，如果第一次执行失败怎么办，我该如何计时脚本在几分钟后重试呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:20:30.883

请参阅[unix command](http://en.wikipedia.org/wiki/At_%28Unix%29)，因此您在等待正确的时间时不需要运行脚本。

```
echo "php yourscript.php" | at $TIME 
```

如果对其他服务器的调用失败，您可以将其放在 php 脚本的末尾。

```
shell_exec('echo "php yourscript.php" | at ' . $moment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:16:34.077

大多数情况下，如果您需要使用 PHP 来安排脚本，您将不得不依赖 cron，然后通过某种方式来保存与上次脚本执行失败或成功相关的数据（即 DB 或文本文件）。

但是，如果您有一个正在运行一次的脚本，并且您希望它定期重试直到成功，您可以使用带有计时器的 while 循环，如下所示：

```
// allow for long running execution
ignore_user_abort(true);
set_time_limit(0);

$success = false;
while($success === false) {
    // attempt what you are trying to do, set $success to true if it works
    if ($success === true) {
        continue;
    } else {
        sleep(300); // this pauses execution for 300 seconds
    }
} 
```

根据罗斯史密斯二世的建议编辑

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:12:08.593

你偶然发现了ajax朋友。

例如：

```
var x = false;

function ajax()
{
 if(x)
 {
    $.ajax({
      url: "test.php"
    }).done(function() { 
      x = true;
    });
 }
 else
 {
    setTimeout(ajax(),3000);
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:13:12.510

您的问题不清楚此 PHP 脚本是通过 Web 服务器运行还是在命令行上运行。

如果您正在谈论在命令行上运行，请执行以下操作：

```
#!/bin/bash

while true
do
    php script_that_returns_non_zero_if_it_fails.php && break
    sleep 300 # sleep 5 minutes
done 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-03T19:15:43.860

我可能会创建一个在`sleep()`if 条件返回 false 或等效项之后调用自身的函数。

```
<?php
function doSomething() {
    // do request, should return true or false
    $result = dymmyRequestFunction();
    if ($result === false) {
        sleep(300);
        doSomething();
    }
} 
```

希望有帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-03T19:19:38.817

Ajax 将是答案.. 像这样

```
xmlHttp.open('GET', '/ajax/script.php?id=' + id, true);
xmlHttp.onreadystatechange = function()
{
    if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
    {
       //complete
    }
    else
    {
       //try again
    }
} 
```

# r - 将 ugarchboot 的系列摘要放入数据框中

> ID：11801874
> 
> 赞同：0
> 
> 时间：2012-08-03T19:10:44.853
> 
> 标签：r

我正在查看 rugarch 中的 ugarchboot 函数，但我无法将系列（摘要）放入数据框中。

```
library(rugarch)  
data(dji30ret)  
spec = ugarchspec(variance.model=list(model="gjrGARCH", garchOrder=c(1,1)),   
                mean.model=list(armaOrder=c(1,1), arfima=FALSE, include.mean=TRUE,   
                archm = FALSE, archpow = 1), distribution.model="std")  
ctrl = list(tol = 1e-7, delta = 1e-9)  
fit = ugarchfit(data=dji30ret[, "BA", drop = FALSE], out.sample = 0,   
                                spec = spec, solver = "solnp", solver.control = ctrl,  
                                fit.control = list(scale = 1))  
bootpred = ugarchboot(fit, method = "Partial", n.ahead = 120, n.bootpred = 2000)  
bootpred  
as.data.frame(bootpred, which = "sigma", type = "q", qtile = c(0.01, 0.05))  

##I am tring to get this into a dataframe:
Series (summary):  

          min      q.25      mean     q.75     max forecast    
t+1  -0.24531 -0.016272  0.000143 0.018591 0.16263 0.000743  
t+2  -0.24608 -0.018006 -0.000290 0.017816 0.16160 0.000232  
t+3  -0.24333 -0.017131  0.001007 0.017884 0.31861 0.000413  
t+4  -0.26126 -0.018643 -0.000618 0.017320 0.34078 0.000349  
t+5  -0.19406 -0.018545 -0.000453 0.016690 0.33356 0.000372  
t+6  -0.23864 -0.017268 -0.000113 0.016001 0.18233 0.000364  
t+7  -0.27024 -0.018031 -0.000514 0.017852 0.18436 0.000367  
t+8  -0.13926 -0.016676  0.000539 0.017904 0.16271 0.000366  
t+9  -0.32941 -0.017221 -0.000194 0.016718 0.13894 0.000366  
t+10 -0.19013 -0.015845  0.001095 0.017064 0.14498 0.000366 
```

谢谢您的帮助。

# ios - iOS 如何在 viewDidLoad 中自动释放方法？

> ID：11801881
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:11:12.153
> 
> 标签：ios, cocoa-touch

我尝试在第一次安装和启动应用程序时调用此方法。

我的想法是用我的数据填充核心数据表。

如何在 viewDidLoad 中自动释放此方法？

```
- (void)insertNewObject:(id)sender
{

    if ((firstRun!=YES)) {

        NSLog(@"The data was already Added");

    }

    else {

        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
        NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

        [newManagedObject setValue:[[NSString alloc]initWithFormat:@"new"] forKey:@"name"];
        firstRun = NO;

        // Save the context.
        NSError *error = nil;
        if (![context save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:36:32.153

您可以使用`NSUserDefaults`它来验证它是否是第一次运行。

```
- (void)insertNewObject:(id)sender
{
    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    NSDictionary *userDefaultsDefaults = [NSDictionary dictionaryWithObjectsAndKeys:
                                          [NSNumber numberWithBool:YES], @"firstRun", nil];
    [prefs registerDefaults:userDefaultsDefaults];
    BOOL firstRun = [prefs boolForKey:@"firstRun"];

    if (firstRun==YES) {
        NSManagedObjectContext *context = [self.fetchedResultsController managedObjectContext];
        NSEntityDescription *entity = [[self.fetchedResultsController fetchRequest] entity];
        NSManagedObject *newManagedObject = [NSEntityDescription insertNewObjectForEntityForName:[entity name] inManagedObjectContext:context];

        [newManagedObject setValue:[[NSString alloc]initWithFormat:@"new"] forKey:@"name"];

        // Save the context.
        NSError *error = nil;
        if (![context save:&error]) {
            NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
            abort();
        }
        [prefs setBool:NO forKey:@"firstRun"];
        [prefs synchronize];
    } else {
         NSLog(@"The data was already Added");
    }
} 
```

您可以在您的`viewWillDisappear`或`viewDidLoad`与`[self insertNewObject:nil];`

# node.js - node.js + express 3 + socket.io = 发送后无法设置标头

> ID：11801882
> 
> 赞同：7
> 
> 时间：2012-08-03T19:11:14.003
> 
> 标签：node.js, express, socket.io, pug

我是学习 node.js 的新手，似乎遇到了无法修复的错误。

它是一个非常简单的初学者代码，因此不需要太多解释，更多的是它在本地主机上运行良好，但在生产服务器上中断。

**应用程序.js**

```
var express = require('express')
  , routes = require('./routes')
  , http = require('http')
  , path = require('path');

var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 8000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);
  app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function(){
  app.use(express.errorHandler());
});

app.get('/', routes.index);

var server = app.listen(8000);
var io = require('socket.io').listen(server);

server.listen(app.get('port'), function(){
  console.log("Express server listening on port " + app.get('port'));
}); 
```

**这是可怕的错误！**

```
http.js:644
    throw new Error('Can\'t set headers after they are sent.');
          ^
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:644:11)
    at ServerResponse.res.setHeader (/home1/artalatc/public_html/cloud1/node_modules/express/node_modules/connect/lib/patch.js:59:22)
    at next (/home1/artalatc/public_html/cloud1/node_modules/express/node_modules/connect/lib/proto.js:153:13)
    at Function.app.handle (/home1/artalatc/public_html/cloud1/node_modules/express/node_modules/connect/lib/proto.js:198:3)
    at Server.app (/home1/artalatc/public_html/cloud1/node_modules/express/node_modules/connect/lib/connect.js:66:31)
    at Manager.handleRequest (/home1/artalatc/public_html/cloud1/node_modules/socket.io/lib/manager.js:564:28)
    at Server.<anonymous> (/home1/artalatc/public_html/cloud1/node_modules/socket.io/lib/manager.js:118:10)
    at Server.EventEmitter.emit (events.js:115:20)
    at HTTPParser.parser.onIncoming (http.js:1793:12)
    at HTTPParser.parserOnHeadersComplete [as onHeadersComplete] (http.js:111:23) 
```

问题似乎在于，`var io = require('socket.io').listen(server);`因为评论这个就像删除了错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-13T15:02:49.910

你用的是什么版本的节点？

我在使用 0.9.x 时遇到了同样的问题。我将 Node 降级到 0.8.4，问题似乎已经消失了。

我最好的猜测是 Node 中的某些东西改变了 Socket.io 不同意的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T03:24:50.677

升级 express - 3.1.0 和 socket.io - 0.9.13

在nodejs0.10上没问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T14:41:43.810

我遇到了同样的问题

如果你使用的是 express 3.0，你应该试试这个： [http ://codehenge.net/blog/2012/08/using-socket-io-with-express-3-x/](http://codehenge.net/blog/2012/08/using-socket-io-with-express-3-x/)

还要检查您的节点版本：

```
node --version 
```

尝试使用 v0.8.9 或任何其他稳定版本

它帮助了我！并且会帮助你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T16:14:15.563

你用的是哪个版本的快递？查看[https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)或试试这个：

```
var server = app.listen(8000);
var io = require('socket.io').listen(server); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T14:09:09.520

对于遇到此问题的任何人，您应该使用：

```
var server = require('http').createServer(app);
var io = require('socket.io').listen(server);
server.listen(8000); 
```

正如 express 不再返回 socket.io 需要的 HTTP 实例。请参阅[https://github.com/learnboost/socket.io](https://github.com/learnboost/socket.io)上更新的 README.md 文件以获取 express 2 和 3 示例。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-01T04:22:45.650

此方法适用于当前稳定版本 0.8.14：

```
var express = require('express')
  , app = express()
  , server = app.listen(8000)
  , io = require('socket.io').listen(server); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-10T23:54:49.150

在 package.json 中将 socket.io 依赖项更改为 0.9.15，运行`npm install`它应该可以解决您的问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-12-15T05:27:54.653

出现此错误是因为 express 在内部使用缓存意味着每秒从缓存中获取数据的请求数据，因此它以 304 状态代码响应，因此请使用

```
app.disable('etag'); 
```

它用 stautscode 200 告诉快递每个请求新鲜的意思

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-21T07:59:34.723

我有完全相同的问题。express 和 socket.io 的不兼容版本是罪魁祸首。将它们升级为 express 3.2.4 和 socket.io 0.9.14 并且像一个魅力一样工作。

或者你可以将你的 socket.io 降级到以前的版本，但你必须弄清楚那个。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-23T18:24:02.890

运行 npm list socket.io

确保它不显示无效，如下所示，

─ socket.io@0.9.10 无效

npm 错误！无效：socket.io@0.9.10 c:\Users....

如果您收到此错误，请 npm install socket.io。还要确保与其他包相同。

# ruby-on-rails - 文字和构造函数之间的区别？（[] vs Array.new 和 {} vs Hash.new）

> ID：11801887
> 
> 赞同：22
> 
> 时间：2012-08-03T19:11:30.340
> 
> 标签：ruby-on-rails, ruby

我很想知道 [] 和 Array.new 以及 {} 和 Hash.new 之间的更多区别

我对其进行了相同的基准测试，似乎速记是赢家

```
require 'benchmark'

many = 500000

Benchmark.bm do |b|
  b.report("[]          \t") {many.times { [].object_id }}
  b.report("Array.new   \t") { many.times { Array.new.object_id }}
  b.report("{}          \t") {many.times { {}.object_id }}
  b.report("Hash.new\t") { many.times { Hash.new.object_id }}
end

                  user     system      total        real
[]            0.080000   0.000000   0.080000 (  0.079287)
Array.new     0.180000   0.000000   0.180000 (  0.177105)
{}            0.080000   0.000000   0.080000 (  0.079467)
Hash.new      0.260000   0.000000   0.260000 (  0.264796) 
```

我个人喜欢使用简写的 [] 和 {} ，代码看起来很酷且可读。

任何其他指针它们之间有什么区别？幕后发生了什么使它变得更好，以及何时使用哪个建议？

我找到了这个[链接](https://stackoverflow.com/questions/4601652/ruby-array-creation-array-new-vs)，但希望获得更多信息。

干杯。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-03T19:23:49.813

使用 Hash.new，您可以为未设置的键设置哈希的默认值。如果您要进行统计，这非常有用，因为它`Hash.new(0)`可以让您在不显式初始化键的情况下增加键。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-03T19:19:10.163

因此，他们都“非常快”地跑了 50 万次。我更喜欢*任何*语言的文字（[]、{}、0、“”等），但文字不能做所有事情（请参阅其他[构造函数形式的](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-c-new)[文档](http://www.ruby-doc.org/core-1.9.3/Array.html#method-c-new)）。编写干净的代码，并保持一致：这里没有问题 :)

但是，**我*怀疑*文字*避免*了不断的查找和方法调用**，这导致它们更快，至少在那个*特定*的实现中......（比我更聪明的人可以查看生成的中间 AST 来证明/反驳这一点。）

也就是说，如果`Hash`解析为*自定义类*或`Hash.new`替换为*自定义方法*怎么办？不能这样做`{}`。此外，方法必须处理额外的参数（或块），而文字则不需要。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-03T19:34:53.593

[Robert 已经提到](https://stackoverflow.com/a/11802040/676874)了`Hash.new`

您还可以将 compley 'default'-values 与以下块变体一起使用`Hash.new`：

```
x = Hash.new { |hash, key|
  hash[key] = key * 2
}

p x      #-> {}
p x[1]   #-> 2
p x      #-> {1=>2} 
```

`Array.new`也可用于获取默认值：

```
p Array.new(5, :a)  #-> [:a, :a, :a, :a, :a] 
```

# jquery - 如何在jquery中以自己的速度停止动画间隔？

> ID：11801894
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:11:59.900
> 
> 标签：jquery

我试图弄清楚如何做到这一点......我有一个移动div的函数，这个函数有一个速度属性（500毫秒），它用于动画和移动div..所以，我基本上在尝试要做的是每次我通过按钮调用该函数时，问题是我离开鼠标后无法停止间隔（我正在使用`mouseenter`and `mouseleave`）并且我想调用该函数延迟 500ms 来调用它（我试过了`myfunction().delay(500);`）但它的结果是一样的......

知道怎么做吗？以及如何停止我在 mouseleave 上的间隔？

（对于我正在使用的 mouseleave `clearInterval(myinterval);`）但没有结果

```
jQuery('#next-div').mouseenter(function() {
    setInterval(function() {
        var interval = images.moving; //this function has an spped of animation of 400 each transaction
    }, 400); 
}).mouseleave(function(){
    clearInterval(interval);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:14:27.353

使用经典 JS：

```
function MyFunction() {
    setTimeout("[YOUR CODE HERE]", [DELAY IN MS])
} 
```

这将延迟传递给它的任何代码在函数调用的第二部分中指定的毫秒数内执行。您可以轻松地将其集成到您已有的任何 jQuery 代码中。

# grails - Grails 多个 g:if 测试多个条件

> ID：11801895
> 
> 赞同：5
> 
> 时间：2012-08-03T19:12:06.457
> 
> 标签：grails

我有一个类型的选择框，每种类型都有自己的参数。类型选择框将触发一些调用模板并在我的视图上呈现参数选择框的 AJAX。参数由名称：值对组成，因此每个名称都可以有多个值。

一些参数需要multiple='true' 让用户为每个名称选择多个值，而其他参数需要限制为只能选择一个。

在我的 gsp 页面中，我有一堆这些：

```
 <g:if test="${it?.getKey().toString().equals('PARAMETER_A')}">
      <td><g:select multiple="true" optionKey="id" optionValue="value" name="sampleParameters" id="parameter" value="${params?.sampleParameters}" from='${it?.getValue().sort()}'></g:select></td>
    </g:if>
    <g:if test="${it?.getKey().toString().equals('PARAMETER_B')}">
      <td><g:select multiple="true" optionKey="id" optionValue="value" name="sampleParameters" id="parameter" value="${params?.sampleParameters}" from='${it?.getValue().sort()}'></g:select></td>
    </g:if> 
```

我的问题是我有一个特定类型的 6 个参数需要选择多个值，其余的不需要。除了像上面那样显式输入之外，有没有一种方法可以像在 java 中一样在 ag:if 语句中测试不止一个东西？如：

```
if(something.equals(PARAMETER_A) || something.equals(PARAMETER_B)) 
```

等等

有没有办法在 groovy 中做类似于 java 的方法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-03T19:23:16.350

Grails`g:if`只是在其测试属性中使用了 groovy。所以要回答你的问题，是的：

```
<g:if test="${something.equals(PARAMETER_A) || something.equals(PARAMETER_B)}">
</g:if> 
```

# python - 带有 Python 请求的 XML POST

> ID：11801896
> 
> 赞同：4
> 
> 时间：2012-08-03T19:12:06.987
> 
> 标签：python, xml, api, post, python-requests

我正在尝试使用[uClassify API](http://uclassify.com/XmlApiDocumentation.aspx)根据文本对对象进行分类。要与 API 交互，我需要发出 XML POST 请求，例如：

```
<?xml version="1.0" encoding="utf-8" ?>
<uclassify xmlns="http://api.uclassify.com/1/RequestSchema" version="1.01">
  <writeCalls writeApiKey="YOUR_WRITE_API_KEY_HERE" classifierName="ManOrWoman">
    <create id="CreateManOrWoman"/>
  </writeCalls>
</uclassify> 
```

我尝试使用 HTTP 请求模块以及 xml.etree.ElementTree 来创建 XML 树，但我得到了左右错误。这是我尝试过的一些代码：

```
>>> import elementtree.ElementTree as ET
>>> from xml.etree.cElementTree import Element, ElementTree
>>> import requests
>>>
>>> root = ET.Element("uclassify", xlms="http://api.uclassify.com/1/RequestSchema", version="1.01")
>>> head = ET.SubElement(root, "writeCalls", writeApiKey="*************", classifierName="test")
>>> action = ET.SubElement(head, "create", id="CreateTest")
>>> tree = ElementTree(root)
>>>
>>> r = requests.post('http://api.uclassify.com/', tree)
>>> 
>>> ........
>>> TypeError: must be convertible to a buffer, not ElementTree 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-03T12:20:08.617

有一次，当我不得不做类似的事情时，我这样做了：

```
requests.post(url, data=xml_string, headers={'Content-Type':'application/xml; charset=UTF-8'}) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-03T19:18:07.127

不是一种`requests`方法，但这是`urllib2`我的代码库中使用的一个真正简单的食谱：

```
import urllib2

from elementtree import ElementTree

def post(url, data, contenttype):
    request = urllib2.Request(url, data)
    request.add_header('Content-Type', contenttype)
    response = urllib2.urlopen(request)
    return response.read()

def postxml(url, elem):
    data = ElementTree.tostring(elem, encoding='UTF-8')
    return post(url, data, 'text/xml') 
```

我怀疑您缺少的是`tostring`用于转换`ElementTree` `Element`您命名的`root`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-10T23:14:06.413

它正在等待一个字符串 XML，尝试这样的事情（使用请求）：

```
input_string_xml = ElementTree.tostring(tree, encoding='utf8', method='xml')
param_data = {'xml': input_xml}
output_xml = requests.post("http://api.uclassify.com/", data=param_data) 
```

# javascript - 这个 RegExp 不应该工作吗？

> ID：11801898
> 
> 赞同：1
> 
> 时间：2012-08-03T19:12:10.653
> 
> 标签：javascript, regex

```
testString = "something://something/task?type=Checkin";

patt = new RegExp("something\/(\w*)\?");
match = patt.exec(testString);
document.querySelector('#resultRegexp').innerHTML = match[1]; 
```

我想捕获`task`所以这个 RegExp 不应该工作吗？

我抓住任何字母数字字符直到问号......并捕获它。

[http://jsfiddle.net/h4yhc/2/](http://jsfiddle.net/h4yhc/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:19:59.590

您需要转义正则表达式文字中的斜杠，以及创建正则表达式的字符串文字中的反斜杠：

```
var patt = /something\/(\w*)\?/g;
// or
var patt = new RegExp("something/(\\w*)\\?", 'g'); 
```

我强烈推荐第一个版本，它更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:22:44.503

我认为这就足够了：`(\w*)\?`，因为 / 没有被 \w 捕获并且唯一的 ? 在字符串中是在您的目标字符串之后。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:22:54.120

这就是你需要的：

```
patt = new RegExp(".*/(\\w*)\\?"); 
```

[http://jsfiddle.net/FJcfd/](http://jsfiddle.net/FJcfd/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:37:42.750

试试这个：`var pat = /something:\/\/(?:[^\/]+\/)+(\w+)\?(\w+=\w+)/;`

它可以匹配字符串，例如：

```
something://something/task?type=Checkin
something://something/foo/task?type=Checkin
something://something/foo/bar/task1?type3=Checkin4 
```

# c# - 在每次应用程序启动时在代码滚动中配置 log4net RollingFileAppender

> ID：11801899
> 
> 赞同：5
> 
> 时间：2012-08-03T19:12:14.847
> 
> 标签：c#, .net, log4net

我想创建一个 log4net RollingFileAppender，每次程序启动时都会创建一个新文件。如果文件变大，它可以滚动，但每次启动应用程序时都必须滚动。如果配置中配置了另一个 appender，则不应添加 appender。本质上是创建一个可以通过更改配置文件覆盖的默认日志配置。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-03T19:12:14.847

在拼凑了其他一些帖子之后，我终于得到了这个工作。该实现位于静态包装器类中。您所要做的就是将此代码粘贴到您的应用程序中，设置创建文件的位置，并在应用程序启动时调用 Log.Configure()。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading;
using System.Windows.Forms;
using System.Windows.Threading;
using log4net;
using log4net.Core;
using log4net.Appender;
using log4net.Repository.Hierarchy;
using System.Reflection;
using System.IO;

namespace [Your Namespace]
{
    public static class Log
    {
        private static bool isConfigured = false;
        private static ILog iLog;

        public static void Configure()
        {
            if (isConfigured)
                return;

            var loggerName = typeof(DiagnosticsManager).FullName;

            var logger = (log4net.Repository.Hierarchy.Logger)log4net.LogManager.GetRepository().GetLogger(loggerName);
            var ilogger = log4net.LogManager.GetRepository().GetLogger(loggerName);

            //Add the default log appender if none exist
            if(logger.Appenders.Count == 0)
            {
                var directoryName = "[Your directory name here. e.c. 'C:\ProgramData\AppName\Logs']";

                //If the directory doesn't exist then create it
                if(!Directory.Exists(directoryName))
                    Directory.CreateDirectory(directoryName);

                var fileName = Path.Combine(directoryName, "[Your static file name here. e.c. 'AppName.log']");

                //Create the rolling file appender
                var appender = new log4net.Appender.RollingFileAppender();
                appender.Name = "RollingFileAppender";
                appender.File = fileName;
                appender.StaticLogFileName = true;
                appender.AppendToFile = false;
                appender.RollingStyle = log4net.Appender.RollingFileAppender.RollingMode.Size;
                appender.MaxSizeRollBackups = 10;
                appender.MaximumFileSize = "10MB";
                appender.PreserveLogFileNameExtension = true;

                //Configure the layout of the trace message write
                var layout = new log4net.Layout.PatternLayout()
                {
                    ConversionPattern = "%date{hh:mm:ss.fff} [%thread] %-5level - %message%newline"
                };
                appender.Layout = layout;
                layout.ActivateOptions();

                //Let log4net configure itself based on the values provided
                appender.ActivateOptions();
                log4net.Config.BasicConfigurator.Configure(appender);
            }

            iLog = LogManager.GetLogger(loggerName);
            isConfigured = true;

            Info("Logging Configured at " + DateTime.Now.ToString("g"));
        }

        public static event EventHandler<ExceptionLoggedEventArgs> ExceptionLogged;

        public static void Debug(object message) { Configure(); iLog.Debug(message); }
        public static void Debug(object message, Exception exception) { Configure(); iLog.Debug(message, exception); }

        public static void Error(object message) { Configure(); iLog.Error(message); }
        public static void Error(object message, Exception exception) { Configure(); iLog.Error(message, exception); }

        public static void Fatal(object message) { Configure(); iLog.Fatal(message); }
        public static void Fatal(object message, Exception exception) { Configure(); iLog.Fatal(message, exception); }

        public static void Info(object message) { Configure(); iLog.Info(message); }
        public static void Info(object message, Exception exception) { Configure(); iLog.Info(message, exception); }

        public static void Warn(object message) { Configure(); iLog.Warn(message); }
        public static void Warn(object message, Exception exception) { Configure(); iLog.Warn(message, exception); }

    }

} 
```

# c# - 基于每个对象绑定到依赖属性

> ID：11801905
> 
> 赞同：0
> 
> 时间：2012-08-03T19:12:30.027
> 
> 标签：c#, wpf, binding

我有以下类模式

```
public Class Test : DependencyObject 
{
    private DependencyProperty _thickness = DependencyProperty.Register("Thickness", typeof(double), typeof(CounterDataStreamWrapper));
    public double Thickness
    {
        get 
        { 
            return (double)GetValue(this._thickness); 
        }
        set
        {
            SetValue(this._thickness, value);
        }
    }

    ... Rest of the code
} 
```

本质上，我有一组 Test 对象，我想将每个对象的厚度值绑定到其对应的 UI 元素。我对 C# 绑定不太熟悉。当我尝试创建多个对象时，我遇到了“DependencyProperty 已注册”问题。我确信我只是缺少一些绑定到 DependencyProperty 的关键概念。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:16:56.673

您正在 CounterDataStreamWrapper 类型和每个实例的私有上注册厚度依赖属性。

将 DependencyProperty 设为公共静态并将其注册到类 Test。

```
public static DependencyProperty Thickness = 
    DependencyProperty.Register("Thickness", typeof(double), typeof(Test)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-03T19:14:39.823

应该是静态的。像这样：

```
private static DependencyProperty _thickness ... 
```

# perl - 简单 Perl 模板系统中的模板编译

> ID：11801907
> 
> 赞同：-3
> 
> 时间：2012-08-03T19:12:35.380
> 
> 标签：perl, templates, eval

我需要编写一个简单的模板系统，其中包含两种类型的宏——变量（like `<% TPL name=userName %>`）和函数（like `<% TPL func=time param=now %>`or `<% TPL func=rand %>`）。

没关系，但我需要添加模板编译。我想用 Perl 变量（`<% TPL name=userName %>`to `$userName`or `$vars->{userName}`）和函数 to `"Some text $rand->() blah blah"`or替换变量宏`"Some text $func->{time}->('now') and blah blah blah"`。

我为变量做了它：

```
my $tpl = eval 'sub { my $vars = shift; "Hello, $vars-{userName}!" }';
return $tpl->({ userName => 'John' }); 
```

但我不知道如何为功能做到这一点。此代码不起作用：

```
my $tpl = eval 'sub { my $func = shift; "Today is $func->{time}->('day')" }';
return $tpl->({ time => \&_time }); 
```

如何使功能正常工作？

*PS 我不需要另一个模板系统（TT、HTML::Template 或其他）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:00:23.710

关键部分是

```
"Today is $func->{time}->('day')" 
```

这是行不通的，因为您不能从字符串内部调用函数/不能插入 coderef。您可以选择以下解决方案：

```
"Today is " . $func->{time}->('day');

"Today is @{[$func->{time}->('day')]}";

my $today = $func->{time}->('day');
"Today is $today"; 
```

无论如何，您的代码都病了，因为您使用 an`eval`而不仅仅是匿名子或[闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)！你可以写

```
my $tpl = sub {
   my ($vars) = @_;
   return "Hello, $vars->{userName}!";
};
return $tpl->({ userName => 'John' }); 
```

和

```
my $tpl = sub {
   my ($func) = @_;
   return "Today is $func->{time}->('day')";
};
return $tpl->({ time => \&_time }); 
```

**提示**：在构建这样的模板系统时，该`/e`选项真的很有帮助：

```
$template =~ s{<% func=(\w+) param=(\w+) %>}{join(' ',$hash->{$1}->($2))}e; 
```

# sql - 将多行插入单列

> ID：11801911
> 
> 赞同：26
> 
> 时间：2012-08-03T19:12:48.607
> 
> 标签：sql, sql-server-2008

我是 SQL 新手（使用 SQL 2008 R2），我无法将多行插入单个列。

我有一个名为的表`Data`，这就是我正在尝试的

```
INSERT INTO Data ( Col1 ) VALUES
('Hello', 'World') 
```

该代码取自[this](https://stackoverflow.com/questions/452859/inserting-multiple-rows-in-a-single-sql-query) question，但它与我在网上找到的许多其他示例一样使用2列，我只想使用1。我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-10-31T14:14:30.460

插入特定列的值与其他列保持不变： -

```
INSERT INTO `table_name`(col1,col2,col3)
   VALUES (1,'val1',0),(1,'val2',0),(1,'val3',0) 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-08-03T19:14:31.637

要仅插入一列，请仅使用一条数据：

```
INSERT INTO Data ( Col1 ) VALUES
('Hello World'); 
```

或者，要插入多条记录，请将插入分开：

```
INSERT INTO Data ( Col1 ) VALUES
('Hello'),
('World'); 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-08-03T19:15:52.260

我相信这应该适用于插入多行：

```
INSERT INTO Data ( Col1 ) VALUES
('Hello'), ('World'),... 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-08-03T19:27:31.890

另一种方法是使用联合：

```
INSERT INTO Data ( Col1 ) 
select 'hello'
union 
select 'world' 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-08-03T19:15:53.323

如果您的 DBMS 支持该表示法，则每行都需要一组单独的括号：

```
INSERT INTO Data(Col1) VALUES ('Hello'), ('World'); 
```

交叉引用的问题显示了插入两列的示例。

或者，每个 SQL DBMS 都支持使用单独语句的表示法，一个用于插入的每一行：

```
INSERT INTO Data (Col1) VALUES ('Hello');
INSERT INTO Data (Col1) VALUES ('World'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-03T19:15:34.477

```
 INSERT INTO Data ( Col1 ) VALUES ('Hello'), ('World') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-19T18:48:44.253

在该代码中，您将插入两列值。你可以试试这个

```
 INSERT INTO Data ( Col1 ) VALUES ('Hello'),
   INSERT INTO Data ( Col1 ) VALUES ('World') 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-11-26T12:09:12.493

请确保其他列不受限制接受`Not null`值，因此在表中创建列时只需忽略“Not Null”语法。例如

```
Create Table Table_Name(
            col1 DataType,
            col2 DataType); 
```

然后，您可以在您想要的任何列中插入多个行值。例如：

```
Insert Into TableName(columnname)
values
      (x),
      (y),
      (z); 
```

等等……</p>

希望这可以帮助。

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2014-10-05T10:18:46.403

```
INSERT INTO hr.employees (location_id) VALUE (1000) WHERE first_name LIKE '%D%'; 
```

让我知道此声明是否有任何问题。

# django - django 权限在文件上传时被拒绝

> ID：11801913
> 
> 赞同：2
> 
> 时间：2012-08-03T19:12:57.733
> 
> 标签：django, apache2, mod-wsgi

我在尝试使用 apache2 和 mod_wsgi 使用 django 管理界面上传文件时遇到错误。

我的 Django 设置：

```
MEDIA_ROOT = '/var/www/mysite/web/media' 
```

模型图像字段：

```
image_big = models.ImageField(upload_to='uploads/images/items/big') 
```

文件夹和子文件夹的权限（用于测试）：

```
ls -l /var/www/mysite/web/media/
drwxrwxrwx 3 webX clientX 4.0K Aug  3 20:21 uploads 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T20:41:58.670

请检查整个目录路径的权限`/var/www/mysite/web/media/`。这些目录之一可能没有所需的读取或执行权限：

*   `/var/www/mysite/web/`
*   `/var/www/mysite/`
*   `/var/www/`
*   `/var/`

# php - 如何摆脱这个字符串？

> ID：11801929
> 
> 赞同：1
> 
> 时间：2012-08-03T19:13:41.273
> 
> 标签：php, string

我正在尝试从以下字符串中获取一些特定值：

```
{"car":"Toyota"{"car":"honda"{"car":"BMW{"car":"Hyundai" 
```

我想摆脱' `Toyota`'。该字符串是随机生成的，因此它可能是`Benz`或`Pontiac`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:26:27.567

不太确定这个疯狂的字符串是从哪里来的，但如果你准确地显示了格式，这将提取你所追求的字符串：

```
$string = '{"car":"Toyota"{"car":"honda"{"car":"BMW{"car":"Hyundai"';
$string = array_filter(
    explode(',', 
        preg_replace(
            array('/"/', '/{/', '/:/', '"car"'),
            array('', ',',  '', ''),
            $string
        )
    )
);
print_r($string);
// Output: Array ( [1] => Toyota [2] => honda [3] => BMW [4] => Hyundai ) 
```

...如果相反，这只是一个可怕的 typeo 并且应该是 JSON，请使用`json_decode`：

```
$string = '[{"car":"Toyota"},{"car":"honda"},{"car":"BMW"},{"car":"Hyundai"}]'; // <-- valid JSON
$data = json_decode($string, true);
print_r($data);
// Output: Array ( [0] => Array ( [car] => Toyota ) [1] => Array ( [car] => honda ) [2] => Array ( [car] => BMW ) [3] => Array ( [car] => Hyundai ) ) 
```

**文档**

*   `preg_replace`- [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)
*   `array_filter`- [http://php.net/manual/en/function.array-filter.php](http://php.net/manual/en/function.array-filter.php)
*   `explode`- [http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)
*   `json_decode`- [http://php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:31:19.617

虽然这看起来像是一段损坏的 JSON，但我想说你可以使用explode() 获得第一辆车。

```
$string = '{"car":"Toyota"{"car":"honda"{"car":"BMW{"car":"Hyundai"';
$string = explode("{", $string);
$firstcar = $string[1]; //your string starts with {, so $string[0] would be empty
$firstcar = explode(":", $firstcar);
$caryouarelookingfor = $firstcar[1]; // [0] would be 'car', [1] will be 'Toyota'
echo $caryouarelookingfor // output: "Toyota" 
```

但是，正如评论中也提到的，该字符串看起来像是一段损坏的 JSON，所以也许您想修复这个字符串的构造。:)

编辑：代码中的错字，如第一条评论所述。

# php - Windows 7上的Git bash。mysqldump命令不起作用

> ID：11801941
> 
> 赞同：2
> 
> 时间：2012-08-03T19:14:55.813
> 
> 标签：php, mysql, git

我在 Windows 7 机器上使用 git bash。当我尝试使用 mysqldump 时出现错误：“sh.exe”：mysqldump：找不到命令“。我对此很陌生。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-03T19:30:19.620

您需要`mysqldump`在 bash 用来查找命令的路径上。UN*X shell，如 bash 和 windows cmd，使用`PATH`环境变量来管理它。

要查看当前路径，请在 bash 中键入：

```
$ echo $PATH 
```

如果您安装了 MySQL，它通常位于`c:\Program Files\MySql`，并且支持程序（如`mysqldump`）位于`c:\Program Files\MySql\MySQL Server 5.5\bin\`. 您需要在路径上有该目录。如果 MySQL 已安装在您机器上的其他位置，那么您需要在`bin`那里找到目录并在这些说明中使用*该*路径。

在 Windows 中执行此操作的最佳方法是更改​​用户或系统环境变量。为此，在 Windows 资源管理器中：

*   右键单击`Computer`并`Properties`从菜单中选择。
*   在结果窗口中，`Advanced System Settings`在边栏中选择。
*   在出现的对话框中，单击`Advanced`选项卡。
*   在底部附近，单击`Environment Variables`按钮。
*   有 2 个部分，`user`顶部和`system`底部。两者都可以，但让我们更改`system`设置。
*   滚动列表，直到看到列中命名的`Path`变量`Variable`。
*   双击该`Path`行。
*   在出现的对话框中，在`Variable value`字段中，一直滚动到字段的末尾，并在最后添加`;c:\Program Files\MySql\MySQL Server 5.5/bin/`：**注意前导分号**：没有它就行不通。
*   单击`OK`，现在您可以关闭所有对话框/窗口。

完成所有这些后，关闭 Git bash 窗口，然后打开另一个。类型：

```
$ mysqldump 
```

您应该从程序中获得使用说明。

如果没有，请键入以下内容再次查看路径：

```
$ echo $PATH 
```

您是否看到与您添加的内容类似的内容？那里有任何 MySQL 目录吗？很可能您只是输入了错误的内容，或者错过了分号。再次检查这些步骤并确保一切正确。

# django - 在 Django 测试中设置 HTTP_REFERER 标头

> ID：11801946
> 
> 赞同：16
> 
> 时间：2012-08-03T19:15:10.717
> 
> 标签：django, http-referer, django-testing

我正在开发一个 Django Web 应用程序，该应用程序（除其他外）需要处理使用`POST`请求发送的事务状态信息。

除了支付网关支持的 HTTP 安全性之外，我的视图还检查`request.META['HTTP_REFERER']`了一个条目`settings.py`以试图阻止有趣的业务：

```
if request.META.get('HTTP_REFERER', '') != settings.PAYMENT_URL and not settings.DEBUG:
    return HttpResponseForbidden('Incorrect source URL for updating payment status') 
```

现在我想弄清楚如何测试这种行为。

我可以很容易地产生失败；`HTTP_REFERER`是（可以预见`None`的）正常的页面加载：

```
def test_transaction_status_succeeds(self):
    response = self.client.post(reverse('transaction_status'), { ... })
    self.assertEqual(response.status_code, 403) 
```

但是，我怎样才能伪造成功的提交？我试过设置`HTTP_REFERER`，*例如*`extra`，但这不起作用；该视图显然仍然看到一个空白标题。 *`self.client.post(..., extra={'HTTP_REFERER': 'http://foo/bar'})`*

 *测试客户端是否甚至支持自定义标头？如果没有，是否有解决方法？我正在使用 Django 1.1，如果可能的话，我宁愿不升级。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-05T19:31:25.217

几乎是对的。其实是：

```
def transaction_status_suceeds(self):
    response = self.client.post(reverse('transaction_status'), {}, HTTP_REFERER='http://foo/bar') 
```

在阅读[;](https://stackoverflow.com/questions/2322355/proper-name-for-python-operator)`**` _ [_](https://github.com/django/django/blob/stable/1.1.x/django/test/client.py#L290) _ 最终成为函数本身的额外关键字参数的字典。[`test/client.py`](https://github.com/django/django/blob/stable/1.1.x/django/test/client.py#L290)`extra`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-02-03T22:27:13.137

您可以将 HTTP 标头传递给以下构造函数`Client`：

```
from django.test import Client
from django.urls import reverse

client = Client(
    HTTP_USER_AGENT='Mozilla/5.0',
    HTTP_REFERER='http://www.google.com',
)
response1 = client.get(reverse('foo'))
response2 = client.get(reverse('bar')) 
```

这样您就不需要在每次发出请求时都传递标头。*

# jsf - 如何在 JSF 页面中使用自定义标签创建按钮

> ID：11801954
> 
> 赞同：4
> 
> 时间：2012-08-03T19:15:42.877
> 
> 标签：jsf, jsf-2

我有这个简单的 JSF 按钮：

```
//Question Dialog
function deletedialog(button, a){      
    $("<div />", {
        text: a
    }).dialog({        
        width: 600,
        buttons: {
            "Ok": function() { 
                $("#form\\:deleterow").click();
                //  $('input[id$="deleterow"]').click();               
                $(this).dialog("close");
                button.value = "Processing...";
                button.disabled = true;                  
            }, 
            "Cancel": function(event) { 
                $(this).dialog("close");
                event.preventDefault();
                button.value = "Delete";
                button.disabled = false;
            } 
        }
    });         
}

                    <!-- hidden button -->
                    <h:commandButton id="deleterow" value="HiddenDelete" action="#{AccountsController.deleteSelectedIDs}" style="display:none">
                        <f:ajax render="@form"></f:ajax>
                    </h:commandButton>
                    <!-- the delete button -->
                    <h:button onclick="deletedialog(this, 'Do you want to delete the selected rows?'); return false;" >
                        <h:graphicImage name="small-hover.png" library="images" title="Delete" />
                    </h:button> 
```

我想创建 png 图像，它将成为按钮的视觉主体。我唯一要更改的是按钮的标题，我每次都会使用`value`按钮的属性设置它。这可能吗？现在，当我加载 JSF 页面时，我只看到没有标签的空按钮。

PS 1 我得到这个结果：

![在此处输入图像描述](../Images/f8d96348259a6a8c14d20b8b3ad2c784.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:22:59.620

使用将包装您的图像的命令链接：

```
<script type="text/javascript">
    function deletedialog(button, a) {
        $("<div />", {
            text: a
        }).dialog({        
            width: 600,
            buttons: {
                "Ok": function() { 
                    //$("#form\\:deleterow").click();
                    //using the hidden button click
                    document.getElementById('myForm:deleterow').click();
                    //  $('input[id$="deleterow"]').click();               
                    $(this).dialog("close");
                    button.value = "Processing...";
                    button.disabled = true;                  
                }, 
                "Cancel": function(event) { 
                    $(this).dialog("close");
                    event.preventDefault();
                    button.value = "Delete";
                    button.disabled = false;
                }
            }
        });
    }
</script>

<h:form id="myForm">
    <h:commandLink onclick="deletedialog(this, 'Do you want to delete the selected rows?')) return false;">
        <h:graphicImage name="small-hover.png" library="images"
            title="#{someBean.imageTitle}" />
    </h:commandLink>
    <h:commandButton id="deleterow" value="HiddenDelete" action="#{AccountsController.deleteSelectedIDs}" style="display:none">
        <f:ajax render="@form" />
    </h:commandButton>
</h:form> 
```

`<h:graphicImage/>`此外，在[mkyong 网站](http://www.mkyong.com/jsf2/jsf-2-graphicimage-example/)中有一个很好的例子。

* * *

根据您的评论，您似乎想要一个带有图标的按钮。此外，真正的动作是由你的 hidden 执行的`<h:commandButton>`。所以我建议你阅读这个答案：

*   [HTML / CSS 如何将图像图标添加到输入类型=“按钮”？](https://stackoverflow.com/a/2920093/1065197)

您的代码将是这样的：

```
<h:commandButton id="deleterow" value="HiddenDelete" action="#{AccountsController.deleteSelectedIDs}" style="display:none">
    <f:ajax render="@form" />
</h:commandButton>
<button type="submit" onclick="deletedialog(this, 'Do you want to delete the selected rows?')) return false;"><img src="resources/images/small-hover.png" /> Delete</button> 
```

是的，您可以将基本 HTML 与 JSF 代码混合使用，但请阅读有关 IE 6 浏览器客户端上此实现的链接警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T19:50:16.797

我会从基础开始。由于您甚至没有看到图像，因此当您右键单击浏览器窗口并选择“查看源代码”时，它是否会提供有关图像是否被插入到页面上的任何有意义的信息？如果您没有正确的图像路径，它将不会在页面上呈现图像。这是首先要检查并尝试纠正的事情。（即计算机是否已插入）。

# sql - 批量插入错误：“+”附近的语法不正确

> ID：11801961
> 
> 赞同：2
> 
> 时间：2012-08-03T19:16:03.290
> 
> 标签：sql, sql-server, tsql, bulkinsert

以下代码有什么问题？

```
BULK INSERT test
FROM 'myfile_'+ CONVERT(VARCHAR(20), GETDATE(), 112) + '.TXT'
    WITH
    (FIRSTROW = 2,
     FIELDTERMINATOR = '~',
     ROWTERMINATOR = '\n') 
```

错误信息：

> 消息 102，级别 15，状态 1，第 3 行 '+' 附近的语法不正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T19:21:46.500

您不能将日期动态连接到批量插入语句中的文件名......

如果要执行此操作，则必须使用动态 Sql 构建语句，然后执行它：

```
DECLARE @Sql NVARCHAR(MAX)
SET @Sql = 
'BULK INSERT test
FROM ''myfile_' + CONVERT(VARCHAR(20), GETDATE(), 112) + '.TXT''
    WITH
    (FIRSTROW = 2,
     FIELDTERMINATOR = ''~'',
     ROWTERMINATOR = ''\n'')'

EXEC(@Sql) 
```

# android - Android 应用程序在启动时未运行

> ID：11801964
> 
> 赞同：1
> 
> 时间：2012-08-03T19:16:26.997
> 
> 标签：android, eclipse, startup, boot

我有一个基本的 Android 应用程序，它应该连续重启手机一定次数。为此，我需要在手机启动时启动应用程序。为此，我基本上按照[此处](https://stackoverflow.com/questions/6391902/how-to-start-an-application-on-startup)的说明进行操作，将权限添加到清单并创建一个启动活动的 BroadcastReceiver 类。这是我的一些相关代码：

```
public class StartMyServiceAtBootReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    System.out.println("StartMyServiceAtBootReceiver called.");

    if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
        // Intent activityIntent = new Intent("com.example.rebooter.MainActivity");
        Intent activityIntent = new Intent(context,MainActivity.class);
        activityIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        context.startActivity(activityIntent);
    }
} 
```

}

从清单文件中：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.rebooter"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <action android:name="android.intent.action.MAIN" />
        <category android:name="android.intent.category.LAUNCHER" />
    </activity>

    <service
        android:name=".RebootManager"
        android:label="Reboot Manager" >
        <action android:name="com.example.rebooter.RebootManager" />
    </service>

    <receiver android:name=".StartMyServiceAtBootReceiver"
        android:enabled="true"
        android:exported="true"
        android:label="StartMyServiceAtBootReceiver" >
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </receiver>       

</application> 
```

在 Eclipse 模拟器中，应用程序似乎工作正常。也就是说，虽然我的模拟器没有植根并且手机没有正确执行重启命令，但我确实看到，在启动时，正确的活动开始了。

现在，当我在运行 Android 4.0.4 的特定系统上尝试它时，应用程序中的所有内容都正常工作，除了启动时启动。有任何想法吗？

我试图通过安装另一个在启动时启动的应用程序并确认它确实在启动时启动，并且它确实出现在正在运行的应用程序下，从而消除了任何硬件问题的可能性（因为我没有使用商业发布的手机）作为启动后的缓存进程。

我将不胜感激任何帮助。如果您需要任何其他信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:45:28.517

这里有很多问题。

首先，您忽略了发布`StartMyServiceAtBootReceiver`您希望在启动时获得控制的组件，因此我们无法评论它是否存在任何特殊问题。

其次，除非某些东西已明确执行了您的组件之一（例如，`MainActivity`从主屏幕启动的用户），`StartMyServiceAtBootReceiver`否则在 Android 3.1+ 上将永远不会被调用。确保在尝试重新启动之前运行您的活动，看看是否有帮助。

第三，您在 上实现了一个构造函数`StartupManager`，这是一个坏主意。请将此逻辑移至`onCreate()`.

第四，您的代码可能会在该构造函数中崩溃，因为`getApplication()`此时代码中不会返回有效值，特别是因为您未能链接到超类的构造函数。同样，将此代码移至`onCreate()`此处将有所帮助。

第五，从`onCreate()`服务（更不用说它的构造函数）开始一个活动是非常不寻常的，并且可能不会被用户理解。此外，如果该服务没有做任何其他事情，您可以轻松地从该活动开始`StartMyServiceAtBootReceiver`并完全跳过`StartupManager`。

第六，您`<intent-filter>`的服务中有元素，就好像您期望第三方开发人员调用这些服务一样。如果是这样的话，很好。如果没有，请删除这些`<intent-filter>`元素并`Intents`在您的应用程序代码的其余部分中使用显式引用它们（例如，`new Intent(this, StartupManager.class)`），以获得更好的安全性。或者，添加`android:exported="false"`到这些服务中，尽管如果您删除`<intent-filter>`元素，这是自动的。

# java - 如何在 Java/Android 模块化库中使两个相关的包相互独立？

> ID：11801970
> 
> 赞同：0
> 
> 时间：2012-08-03T19:17:21.813
> 
> 标签：java, android, design-patterns, modularity, api-design

**假设：**
一个简单的模块化 java 库只有两个模块：

```
package com.mycorp.lib.logger;
public class LogcatLogger implements Logger {

    @Override
    public void out(LogcatLogger.LogMessage message){
        Log.i("TAG", message.status);
    }

    ...
}

package com.mycorp.lib.webservice;
public class JsonWebservice implements Webservice {

    @Override
    public void onErrorFound(String status) {
        LogcatLogger.LogMessage message = new LogcatLogger.LogMessage();
        message.status = status;
        LogcatLogger.out(message);
    }

    ...
} 
```

**问题：**
如何使**com.mycorp.lib.webservice**和**com.mycorp.lib.logger**像这样独立？（客户端应用程序也可以调用方法） ![目标设计](../Images/4a9ed601d765a507e0be0f1f4d75bb1e.png)

**注意：**
我之前尝试过*命令模式*：
*结果*：api有很多方法，必须创建很多命令类

**Update1 ：​​将****LogMessage**
添加为**LogcatLogger**的嵌套静态类，以应对更具挑战性的情况

 ****更新 2：**
添加了目标设计图像。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:23:03.740

使用**策略模式**。基本上，让 LogcatLogger 实现一个自定义接口，并在服务中引用该接口。

```
package com.mycorp.lib.invoker;
public interface Logger {
    void out(Loggable message);
}

package com.mycorp.lib.invoker;
public interface Loggable {
    void setStatus(String status);
    String getStatus();
}

package com.mycorp.lib.invoker;
public class LoggableFactory {
    public static Loggable createDatabaseLogMessage() { return new DatabaseLogMessage(); }
    public static Loggable createWebserviceLogMessage() { return new WebserviceLogMessage(); }
}

package com.mycorp.lib.logger;
public class WebserviceLogMessage implements Logger {

    @Override public void out(Loggable message){
        Log.i("TAG", message.getStatus());
    }

    ...
}

package com.mycorp.lib.logger;
public class DatabaseLogMessage implements Logger {
    @Override public void out(Loggable message) {
        Log.i("JDBC",message.getStatus());
        otherFancyStuff(); // whatever ? :)
    }
}

package com.mycorp.lib.webservice;
public class JsonWebservice implements Webservice {
    Logger out;

    JsonWebservice(Logger out) { this.out = out; }

    @Override
    public void onErrorFound(String status) {
        Loggable message = LoggableFactory.createWebserviceLogMessage();
        message.setStatus(status);
        out.out(message);
    }

    ...
} 
```**

# sql-server - SQL 数据库复制最佳实践

> ID：11801974
> 
> 赞同：0
> 
> 时间：2012-08-03T19:17:42.737
> 
> 标签：sql-server, transactional-replication

我有一个项目需要以下内容：

主要的 SQL 服务器和数据库将在总部，两个远程位置的系统由于频繁的 Internet 故障需要离线工作，但必须将数据复制到公司 SQL 数据库。

远程位置需要具有相同的数据，但仅在几个表（例如员工和其他目录）中，并且公司数据库必须具有所有远程位置数据。

这保证了公司数据库将拥有最新的远程位置数据，以防 CEO 想要检查某些东西。

所以我在考虑远程位置和公司数据库之间的事务复制，但不知道这种方法是否可行，以及我是否需要更改我的表，因为所有主键都是 INT 增量的，也许这会在公司数据库中产生问题，因为我会有远程位置 A 中的相同钥匙和远程位置 B 中的相同钥匙，但用于不同的员工。

任何线索或建议？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T06:52:55.817

如果您的订阅者将是只读的，即使将身份列作为您的主键，这也可以正常工作。在那种情况下，我已经做了很多，并且没有遇到任何问题。请注意“保证”一词；这个行业没有这样的事情，只有对冲赌注。

# php - Drupal 表单重定向到片段

> ID：11801975
> 
> 赞同：3
> 
> 时间：2012-08-03T19:17:43.960
> 
> 标签：php, forms, drupal, redirect, drupal-6

我的首页底部有一个投票块，我想在提交后将投票表单重定向到该块。我使用 Drupal 6.x。像往常一样，我用`form_alter`这个。

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case 'poll_view_voting':
      // not worked also
      //$form['#redirect'] = url('', array('fragment' => 'poll-block'));
      $form['#redirect'] = '#poll-block';
      break;
  }
} 
```

提交后，我被重定向到`/%2523poll_block`（这是一个 404 页面）。

在`preprocess_page`我编写`$_REQUEST['q']`using的函数中`drupal_set_message()`，它显示了良好的重定向（#poll-block），但浏览器中的 URL 已编码。

有谁能够帮助我？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T20:30:58.757

根据[FAPI 参考](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/6)，您可以输入要传递给[drupal_goto()](http://api.drupal.org/api/drupal/includes!common.inc/function/drupal_goto/6)的数组。最终这会通过[url()](http://api.drupal.org/api/drupal/includes!common.inc/function/url/6)所以在这里使用你的 url() 函数的忍者技巧。

基本上你可以在这里拥有 3 种类型的数据。字符串、布尔值 FALSE 或数组。如果它是一个字符串，它将在 url 编码后重定向到正确的位置（在你的情况下会发生什么）。FALSE 将禁用重定向，如果您输入一个数组，它将被传递给 drupal_goto()。

因此，对于您的情况，它将是：

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  switch ($form_id) {
    case 'poll_view_voting':
      // not worked also
      //$form['#redirect'] = url('', array('fragment' => 'poll-block'));
      //$form['#redirect'] = array('node/54', array('page' => '2'), 'poll-block'); // No "#" in fragment. This will work.
       $form['#redirect'] = array('', array(), 'poll-block');
      break;
  }
} 
```

但是， drupal_goto() 通常发生在绝对 URL 上，因此除非您使用 javascript，否则您的努力可能毫无用处。

# php - GSMA OneApi 发送短信

> ID：11801976
> 
> 赞同：0
> 
> 时间：2012-08-03T19:17:45.393
> 
> 标签：php, curl, sms, send

我正在尝试使用 OneAPI SMS 接口使用 cURL 从我的应用程序发送 SMS 消息。

它返回 500 错误，这是我正在使用的代码：

```
<?php
$url = "https://oneapi-gw.gsma.com/smssend/2_0/smsmessaging/outbound/tel%3A%2B1234/requests";
$username = "secret";
$password = "secret";

$request = array(
    'address' => 'tel%3A%2B1222333444',
    'message' => 'hello world',
    'senderAddress' => 'tel%3A%2B1234',
    'senderName' => 'joe doe'
);

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'));
curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($request));
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
print_r($info);
?> 
```

任何帮助将不胜感激。谢谢！

附言

```
Array ( [url] => https://oneapi-gw.gsma.com/smssend/2_0/smsmessaging/outbound/tel%3A%2B1416XXXYYYY/requests
[content_type] => application/json [http_code] => 500 [header_size] => 494 [request_size] => 349
[filetime] => -1 [ssl_verify_result] => 0 [redirect_count] => 0 [total_time] => 0.333515 [namelookup_time] => 0.000335
[connect_time] => 0.054989 [pretransfer_time] => 0.229044 [size_upload] => 97 [size_download] => 172 [speed_download] => 515
[speed_upload] => 290 [download_content_length] => -1 [upload_content_length] => 97 [starttransfer_time] => 0.333474 [redirect_time] => 0 [certinfo] => Array ( ) ) 
```

解决了

对于祖先：由于某些原因 cURL 不起作用，所以 file_get_contents() 是要走的路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:43:24.383

如果您在 JSON 中发布参数值，则不应对这些值进行 URL 编码。如果使用 'form post' 而不是 JSON，这是必要的。

尝试使用命令行 curl 发出相同的请求 - 您应该能够获得伴随 500 返回码的服务器错误的详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T23:22:36.403

显然，我用 cURL 解决了这个难题。问题在于它的语法。这是他们 API 的有效 PHP 解决方案。

```
 Class SendSMS {

        public $phone_number;

        public function __construct($phone_number) {
            $this->phone_number = $phone_number;
        }

        public function oneAPI() {      
            $url = "https://oneapi-gw.gsma.com/smssend/2_0/smsmessaging/outbound/tel%3A7511/requests"; // END POINT
            $username = 'secret'; // APP's login
            $password = 'secret'; // and psswd

            $request = array(
                'address' => $this->phone_number,
                'message' => 'hello world',
                'senderAddress' => 'tel:7511'
            );

            $request = http_build_query($request);

            $ch = curl_init();
            curl_setopt($ch, CURLOPT_URL, $url);
            curl_setopt($ch, CURLOPT_USERPWD, "$username:$password");
            curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
            curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); // hide output
            $output = curl_exec($ch);
            $info = curl_getinfo($ch);
            curl_close($ch);

        }

    }

    $hello = new SendSMS('+1XXXXXXXXX'); // WHITE LISTED PHONE

    $hello->oneAPI(); 
```

# compilation - 编译器总是在每台具有相同 JDK 的计算机上得到不同的错误

> ID：11801978
> 
> 赞同：-1
> 
> 时间：2012-08-03T19:17:51.477
> 
> 标签：compilation, java

我的笔记本电脑和台式机上有相同版本的 JDK。我的笔记本电脑是 Windows 7，我的台式机是 Windows XP。当我在桌面上运行我的游戏时，它说找不到或加载主类客户端。当我在笔记本电脑上运行它时，它会找到它。我为每台计算机正确设置了 java 和 jdk 1.7u4 的版本。当我编译游戏时，我在台式机上出现了笔记本电脑上没有的错误。我会发布我的代码，但我知道这不是编码错误，因为它可以在一台计算机上运行，​​但不能在另一台计算机上运行。我检查了所有细节一百万次，甚至尝试修复我从编译中得到的随机错误错误，但没有任何进展。我不想总是在我的笔记本电脑上编辑我的游戏客户端，因为我将游戏托管在我的桌面上。如果有人以前遇到过这个问题，请告诉我你是如何解决的。如果你' 遇到过但无法解决，至少让我知道我不是唯一发生这种情况的人。我在 Google 上找不到任何解决方案，我什至尝试过使用不同版本的 JDK。(1.7u1) 所以，如果不是 java，那不是我的游戏，它必须是我的电脑。是什么导致我的电脑对我的游戏表现出这样的行为。其他东西编译得很好，只是我的游戏客户端没有编译。话又说回来，这是否与我的游戏有关，即使它可以在我的笔记本电脑上运行并用于在我的台式机上运行？这太令人困惑了。是什么导致我的电脑对我的游戏表现出这样的行为。其他东西编译得很好，只是我的游戏客户端没有编译。话又说回来，这是否与我的游戏有关，即使它可以在我的笔记本电脑上运行并用于在我的台式机上运行？这太令人困惑了。是什么导致我的电脑对我的游戏表现出这样的行为。其他东西编译得很好，只是我的游戏客户端没有编译。话又说回来，这是否与我的游戏有关，即使它可以在我的笔记本电脑上运行并用于在我的台式机上运行？这太令人困惑了。

万一是因为我的客户，现在我又读了几次编译器，可能是。所以这里是错误：

```
.\Javafiles\MP3.java:5: error: package javazoom.jl.player does not exist
import javazoom.jl.player.Player;
                         ^
.\Javafiles\MID.java:5: error: package javazoom.jl.player does not exist
import javazoom.jl.player.Player;
                         ^
.\Javafiles\MP3.java:20: error: cannot find symbol
        player.close();
              ^
  symbol:   method close()
  location: variable player of type Player
.\Javafiles\MP3.java:32: error: constructor Player in class Player cannot be app
lied to given types;
            player = new Player(bis);
                     ^
  required: no arguments
  found: BufferedInputStream
  reason: actual and formal argument lists differ in length
.\Javafiles\MP3.java:42: error: cannot find symbol
                try { player.play(); }
                            ^
  symbol:   method play()
  location: variable player of type Player
.\Javafiles\MID.java:18: error: cannot find symbol
    public void close() { if (player != null) player.close(); }
                                                    ^
  symbol:   method close()
  location: variable player of type Player
.\Javafiles\MID.java:27: error: constructor Player in class Player cannot be app
lied to given types;
            player = new Player(bis);
                     ^
  required: no arguments
  found: BufferedInputStream
  reason: actual and formal argument lists differ in length
.\Javafiles\MID.java:37: error: cannot find symbol
                try { player.play(); }
                            ^
  symbol:   method play()
  location: variable player of type Player
Note: .\Javafiles\client.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details.
8 errors
Press any key to continue . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:45:08.293

编译器抱怨它在类路径中找不到所需`javazoom.jl.player.Player`的类。在两台不同的机器上编译应用程序的方式*肯定*有所不同。

不要查看不同的操作系统或 Java SDK 版本。检查构建过程。验证您在两台机器上都有所需的库，并且类路径指向该 jar 文件。

**延伸阅读**

*   [导入 javazoom 无法解决](https://stackoverflow.com/questions/5676617/the-import-javazoom-cannot-be-resolved)

# python - 迁移到开发数据库后无法访问 Heroku 上的 Django 应用 URL

> ID：11801979
> 
> 赞同：0
> 
> 时间：2012-08-03T19:17:51.773
> 
> 标签：python, django, heroku, hosting

我最近将我当前正在运行的应用程序迁移到新的“开发”数据库计划。但是，更新后，我现在无法在我的 Django 应用程序中发布到特定 URL。该应用程序在我的本地开发环境中的功能仍然相同，所以我很好奇它是否与数据库迁移的某些部分有关，例如当我将我的应用程序切换到维护模式时。

Heroku 日志中的错误几乎是标准的 500 错误，因此描述性不是很好：

```
POST ... dyno=web.1 queue=0 wait=0ms service=70ms status=500 bytes=5 
```

正在运行的应用程序中的任何代码都没有更改 - 我只使用 Heroku 在其迁移指南中描述的过程迁移了数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T19:24:21.850

我只能想象你的应用程序现在没有指向正确的数据库。

您是否已验证数据库已启动并正在运行并包含您的数据？

您可以连接到您的数据库并通过以下方式发出查询：

`heroku pg:psql HEROKU_POSTGRESQL_<color> --app your-app`

其次，输出是`heroku pg:info --app your-app`什么？它是否表明新的开发数据库也是`DATABASE_URL`？如果没有，请尝试

`heroku pg:promote HEROKU_POSTGRESQL_<color> --app your-app`

然后再试一次。这会将数据库 url 设置为您的测功机中的`DATABASE_URL`配置变量，这可能是您的应用程序用来连接的。

如果这不能为您解决问题，请在 help.heroku.com 上打开支持票证，其中包含您的应用名称等详细信息，以便我们进行调查。

# python - 如何使用 GitHub API v3 创建提交并推送到 repo？

> ID：11801983
> 
> 赞同：34
> 
> 时间：2012-08-03T19:18:18.600
> 
> 标签：python, github, github-api

我想创建一个存储库并通过任何 Python 包向它提交一些文件。我该怎么办？

我不明白如何添加文件以进行提交。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2020-08-18T03:10:57.813

### 使用请求库的解决方案：

注意：我使用[requests](https://requests.readthedocs.io/en/master/)库来调用 GitHub REST API v3。

**1.获取特定分支的最后一次提交SHA**

```
# GET /repos/:owner/:repo/branches/:branch_name
last_commit_sha = response.json()['commit']['sha'] 
```

**2\. 使用文件内容创建 blob（编码 base64 或 utf-8）**

```
# POST /repos/:owner/:repo/git/blobs
# {
#  "content": "aGVsbG8gd29ybGQK",
#  "encoding": "base64"
#}
base64_blob_sha = response.json()['sha']

# POST /repos/:owner/:repo/git/blobs
# {
#  "content": "hello world",
#  "encoding": "utf-8"
#}
utf8_blob_sha = response.json()['sha'] 
```

**3\. 创建一个定义文件夹结构的树**

```
# POST repos/:owner/:repo/git/trees/
# {
#   "base_tree": last_commit_sha,
#   "tree": [
#     {
#       "path": "myfolder/base64file.txt",
#       "mode": "100644",
#       "type": "blob",
#       "sha": base64_blob_sha
#     },
#     {
#       "path": "file-utf8.txt",
#       "mode": "100644",
#       "type": "blob",
#       "sha": utf8_blob_sha
#     }
#   ]
# }
tree_sha = response.json()['sha'] 
```

**4\. 创建提交**

```
# POST /repos/:owner/:repo/git/commits
# {
#   "message": "Add new files at once programatically",
#   "author": {
#     "name": "Jan-Michael Vincent",
#     "email": "JanQuadrantVincent16@rickandmorty.com"
#   },
#   "parents": [
#     last_commit_sha
#   ],
#   "tree": tree_sha
# }
new_commit_sha = response.json()['sha'] 
```

**5\. 更新您的分支的引用以指向新的提交 SHA（在主分支示例上）**

```
# POST /repos/:owner/:repo/git/refs/heads/master
# {
#     "ref": "refs/heads/master",
#     "sha": new_commit_sha
# } 
```

最后，对于更高级的设置，请阅读[文档](https://developer.github.com/v3/git/#git-data)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-07T06:25:04.040

您可以查看新的更新[GitHub CRUD API（2013 年 5 月）](https://github.com/blog/1498-file-crud-and-repository-statistics-now-available-in-the-api)是否可以提供帮助

> 存储库[内容 API](http://developer.github.com/v3/repos/contents/)已允许读取文件一段时间。现在，您可以轻松地将更改提交到单个文件，就像在 Web UI 中一样。
> 
> 从今天开始，您可以使用以下方法：
> 
> *   [文件创建](http://developer.github.com/v3/repos/contents/#create-a-file)
> *   [文件更新](http://developer.github.com/v3/repos/contents/#update-a-file)
> *   [文件删除](http://developer.github.com/v3/repos/contents/#delete-a-file)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-10-15T21:24:59.450

这是一个完整的片段：

```
def push_to_github(filename, repo, branch, token):
    url="https://api.github.com/repos/"+repo+"/contents/"+filename

    base64content=base64.b64encode(open(filename,"rb").read())

    data = requests.get(url+'?ref='+branch, headers = {"Authorization": "token "+token}).json()
    sha = data['sha']

    if base64content.decode('utf-8')+"\n" != data['content']:
        message = json.dumps({"message":"update",
                            "branch": branch,
                            "content": base64content.decode("utf-8") ,
                            "sha": sha
                            })

        resp=requests.put(url, data = message, headers = {"Content-Type": "application/json", "Authorization": "token "+token})

        print(resp)
    else:
        print("nothing to update")

token = "lskdlfszezeirzoherkzjehrkzjrzerzer"
filename="foo.txt"
repo = "you/test"
branch="master"

push_to_github(filename, repo, branch, token) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-02-03T13:07:36.920

Github 提供了一个[Git 数据库 API](http://developer.github.com/v3/git/)，可让您访问读取和写入原始对象以及列出和更新您的引用（分支头和标签）。为了更好地理解该主题，我强烈建议您阅读Pro Git 书籍的[Git Internals](http://git-scm.com/book/en/Git-Internals)章节。

根据文档，将更改提交到存储库中的文件需要 7 个步骤：

> 1.  获取当前提交对象
> 2.  检索它指向的树
> 3.  检索该特定文件路径的树具有的 blob 对象的内容
> 4.  以某种方式更改内容并使用该新内容发布一个新的 blob 对象，返回一个 blob SHA
> 5.  发布一个新的树对象，该文件路径指针替换为您的新 blob SHA 获取树 SHA
> 6.  以当前提交 SHA 作为父级和新树 SHA 创建一个新提交对象，获取一个提交 SHA
> 7.  更新分支的引用以指向新的提交 SHA

[这个博客](http://www.pqpq.de/2011/07/pithub-how-to-commit-new-file-via.html)在使用 perl 解释这个过程方面做得很好。对于 python 实现，您可以使用[PyGithub](https://github.com/jacquev6/PyGithub)库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-10T20:40:01.530

根据先前的答案，这是一个完整的示例。请注意，`POST`如果您将提交上传到新分支或`PATCH`上传到现有分支，则需要使用。

```
 import whatsneeded

    GITHUB_TOKEN = "WHATEVERWILLBEWILLBE"

    def github_request(method, url, headers=None, data=None, params=None):
        """Execute a request to the GitHUB API, handling redirect"""
        if not headers:
            headers = {}
        headers.update({
            "User-Agent": "Agent 007",
            "Authorization": "Bearer " + GITHUB_TOKEN,
        })

        url_parsed = urllib.parse.urlparse(url)
        url_path = url_parsed.path
        if params:
            url_path += "?" + urllib.parse.urlencode(params)

        data = data and json.dumps(data)
        conn = http.client.HTTPSConnection(url_parsed.hostname)
        conn.request(method, url_path, body=data, headers=headers)
        response = conn.getresponse()
        if response.status == 302:
            return github_request(method, response.headers["Location"])

        if response.status >= 400:
            headers.pop('Authorization', None)
            raise Exception(
                f"Error: {response.status} - {json.loads(response.read())} - {method} - {url} - {data} - {headers}"
            )

        return (response, json.loads(response.read().decode()))

    def upload_to_github(repository, src, dst, author_name, author_email, git_message, branch="heads/master"):
        # Get last commit SHA of a branch
        resp, jeez = github_request("GET", f"/repos/{repository}/git/ref/{branch}")
        last_commit_sha = jeez["object"]["sha"]
        print("Last commit SHA: " + last_commit_sha)

        base64content = base64.b64encode(open(src, "rb").read())
        resp, jeez = github_request(
            "POST",
            f"/repos/{repository}/git/blobs",
            data={
                "content": base64content.decode(),
                "encoding": "base64"
            },
        )
        blob_content_sha = jeez["sha"]

        resp, jeez = github_request(
            "POST",
            f"/repos/{repository}/git/trees",
            data={
                "base_tree":
                last_commit_sha,
                "tree": [{
                    "path": dst,
                    "mode": "100644",
                    "type": "blob",
                    "sha": blob_content_sha,
                }],
            },
        )
        tree_sha = jeez["sha"]

        resp, jeez = github_request(
            "POST",
            f"/repos/{repository}/git/commits",
            data={
                "message": git_message,
                "author": {
                    "name": author_name,
                    "email": author_email,
                },
                "parents": [last_commit_sha],
                "tree": tree_sha,
            },
        )
        new_commit_sha = jeez["sha"]

        resp, jeez = github_request(
            "PATCH",
            f"/repos/{repository}/git/refs/{branch}",
            data={"sha": new_commit_sha},
        )
        return (resp, jeez) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-05-11T14:26:07.953

我在*[Google App Engine (GAE)](https://cloud.google.com/appengine/)*上，所以除了 python，我可以[创建](http://developer.github.com/v3/repos/contents/#create-a-file)一个新文件，[更新](http://developer.github.com/v3/repos/contents/#update-a-file)它，甚至通过提交[删除它](http://developer.github.com/v3/repos/contents/#delete-a-file)，并使用php、java 和 go 中的[GitHub API v3推送到我在 GitHub 中的存储库。](https://developer.github.com/v3/)

检查和审查一些可用的第三方[库](https://developer.github.com/libraries/)以创建类似于 perl 中提供的[示例脚本](http://www.pqpq.de/2011/07/pithub-how-to-commit-new-file-via.html)，我建议使用以下内容：

*   [PyGithub](https://github.com/jacquev6/PyGithub) (python)
*   [GitHub API for php](https://github.com/yiiext/github-api) (php)
*   [GitHub API for Java](http://github-api.kohsuke.org/) (java)
*   [去-github](https://github.com/google/go-github)（去）

如您所知，您可以为每个 GitHub 帐户和组织获取一个站点，以及无限的项目站点，这些站点直接从您的存储库托管并默认由[*Jekyll提供支持。*](http://jekyllrb.com/)

结合GAE 上的[Jekyll](https://stackoverflow.com/questions/14759827/jekyll-generating-json-files-alongside-the-html-files)、[*Webhooks*](https://developer.github.com/webhooks/)和 GitHub API 脚本，以及适当的*[GAE 设置](https://stackoverflow.com/a/26654430/4058484)*，它将为您提供广泛的可能性，例如[调用外部脚本](https://stackoverflow.com/questions/14262944/jekyll-extension-calling-an-external-script)并在 GitHub 上创建动态页面。

除了 GAE，还有一个选项可以在 Heroku 上运行它。使用位于（免费）Heroku 实例上的[JekyllBot为每个帖子](http://ben.balter.com/2012/12/27/introducing-jekyllbot/)[静默](https://github.com/benbalter/benbalter.github.com/blob/0db7c54b44eaccf146c2b2f520eee3e8175560bb/_plugins/generate-json.rb)生成 JSON 文件并将更改推送回 GitHub。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-11-19T09:48:30.277

我创建了一个[使用 Python 提交多个文件](https://github.com/josecelano/pygithub/blob/main/src/04_sign_commit_with_multiple_files_using_github_api.py)的示例：

```
import datetime
import os
import github

# If you run this example using your personal token the commit is not going to be verified.
# It only works for commits made using a token generated for a bot/app 
# during the workflow job execution.

def main(repo_token, branch):

    gh = github.Github(repo_token)

    repository = "josecelano/pygithub"

    remote_repo = gh.get_repo(repository)

    # Update files:
    #   data/example-04/latest_datetime_01.txt
    #   data/example-04/latest_datetime_02.txt
    # with the current date.

    file_to_update_01 = "data/example-04/latest_datetime_01.txt"
    file_to_update_02 = "data/example-04/latest_datetime_02.txt"

    now = datetime.datetime.now()

    file_to_update_01_content = str(now)
    file_to_update_02_content = str(now)

    blob1 = remote_repo.create_git_blob(file_to_update_01_content, "utf-8")
    element1 = github.InputGitTreeElement(
        path=file_to_update_01, mode='100644', type='blob', sha=blob1.sha)

    blob2 = remote_repo.create_git_blob(file_to_update_02_content, "utf-8")
    element2 = github.InputGitTreeElement(
        path=file_to_update_02, mode='100644', type='blob', sha=blob2.sha)

    commit_message = f'Example 04: update datetime to {now}'

    branch_sha = remote_repo.get_branch(branch).commit.sha

    base_tree = remote_repo.get_git_tree(sha=branch_sha)

    tree = remote_repo.create_git_tree([element1, element2], base_tree)

    parent = remote_repo.get_git_commit(sha=branch_sha)

    commit = remote_repo.create_git_commit(commit_message, tree, [parent])

    branch_refs = remote_repo.get_git_ref(f'heads/{branch}')

    branch_refs.edit(sha=commit.sha) 
```

# javascript - 当我添加 Mootools 时，外部 JS 库停止工作

> ID：11801984
> 
> 赞同：2
> 
> 时间：2012-08-03T19:18:26.077
> 
> 标签：javascript, class, object, mootools, jsfiddle

我正在测试一个 JS 库来对一个点数组进行三角测量（它返回一个三角形数组），并且看起来效果很好但是**当我添加 MooTools 时**（这个库将使用 MooTools 集成到一个更大的项目中，所以我需要它）它停止工作。:(

我的意思是我只需要在标题中添加 MooTools （既不添加 domready 事件），我得到一个错误......

```
Uncaught TypeError: Object function (){
            return lower;
        } has no method 'InCircumcircle' 
```

我尝试添加 JQuery 而不是 MooTools，它甚至在 domready 块内也能正常工作......所以我不知道 mootools 有什么问题......（也许 MooTools 改变了与这个库不兼容的 JS 对象模型中的某些内容?)

我不知道如何解决它......或者我是菜鸟，这是一个我看不到的小细节...... :)

我在 JSFiddle 中准备了一个小演示，您可以自己查看：http:
**[//jsfiddle.net/6KcW9/](http://jsfiddle.net/6KcW9/)**

库**delauny.js**链接在管理资源部分。

按原样运行这个简单的代码，您会看到它向控制台输出了一系列元素...尝试在框架部分添加 MooTools 并再次运行它。
任何帮助/线索/任何将是伟大的赞赏......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:55:56.720

你看过他们的源代码吗？

[http://www.travellermap.com/tmp/delaunay.js](http://www.travellermap.com/tmp/delaunay.js)

MooTools 是一个原型框架。这意味着，它将方法添加到本机原型，可以迭代。

```
var i;
for( i in vertices )
{
    // NOTE: This is O(n^2) - can be optimized by sorting vertices
    // along the x-axis and only considering triangles that have 
    // potentially overlapping circumcircles

    var vertex = vertices[i];
    AddVertex( vertex, triangles );
} 
```

像这样的代码，其中顶点是一个数组 - 将完全中断。该`for (var in object)`构造是一种遍历对象属性的方法。相反，传递的是一个数组（它 - 就像 js 中的几乎任何东西一样 - 是一个对象，但具有类似数组的属性）。

```
var g_vertices = [];
for( var i = 0; i < 50; i++ ) {
    g_vertices.push( new Vertex( Math.random() * 350 + 25, Math.random() * 250 + 25 ) );
}
// var triangles = Triangulate( g_vertices );
// console.log(triangles);

console.log(g_vertices);

for (var i in g_vertices) {
    console.log(i);
} 
```

当您将 mootools 添加到页面时，结果是：

`0, 1, 2 .... 49, $family, $constructor, each, clone, clean, invoke ... etc.`

基本上，您需要修复他们的库。要么使用`hasOwnProperty`check -> `if (g_vertices.hasOwnProperty(i)) ...`- 要么使用适当的`for`数组迭代器，`while`或者甚至使用`Array.forEach`任何你喜欢的。

找到这样的替代方案：[https](https://github.com/sokeroner/Delaunay-Triangulation) ://github.com/sokeroner/Delaunay-Triangulation - 这似乎写得更好，更模块化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-03T19:24:33.863

因为您将所有东西都添加到全局命名空间中，所以您可能会遇到麻烦。

你真的应该将你的[代码包装在一个模块中](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth/)，这样你就不会污染全局命名空间。

# javascript - JavaScript 初始化函数

> ID：11801987
> 
> 赞同：0
> 
> 时间：2012-08-03T19:18:53.180
> 
> 标签：javascript, oop, object

如果我像这样创建了一个 javascript 对象：

```
Test = function(params) {
    this.test = params.test || 'element';
    this.test1 = params.test1 || '#000';
    this.test2 = params.test2;
    this.test3 = params.test3;

    //need a neat little initialise function to create some html elements here! 
}

var test = new Test({test: "#CCC", test1: [0, 1, 3], test2: [0, 1, 3]}); 
```

然后，我将如何创建一个适当的初始化函数，该函数将在像上面那样创建该对象的实例时运行。

我会简单地创建一个函数然后调用它，还是有一种方法可以创建一个在创建对象实例时自行运行的函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-03T19:28:21.817

您的构造函数已经*是*一个函数，您可以将代码放在那里。从技术上讲，构造函数是对象*的*初始化函数。

> 我会简单地创建一个函数然后调用它，还是有一种方法可以创建一个在创建对象实例时自行运行的函数。

那要看。您可以在构造函数之外的其他地方重用 html 元素创建代码吗？然后将它放在一个单独的函数中（可能在原型上）并从构造函数中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:28:58.617

您已经有一个初始化函数，这是定义变量的地方。只需在那里做一些事情，当您创建对象的实例时就会发生这种情况。

# javascript - 如何将 onclick 限制为仅 H2？

> ID：11801994
> 
> 赞同：2
> 
> 时间：2012-08-03T19:19:18.660
> 
> 标签：javascript, css-transitions

[http://jsfiddle.net/dragontheory/CxNnB/](http://jsfiddle.net/dragontheory/CxNnB/)

需要能够将 onclick 限制为仅 H2。否则单击内部内容会关闭它。

改变：

```
$('article').on('click', function() { 
```

至

```
$('h2').on('click', function() { 
```

没有帮助，因为它不是父母？

谢谢。

原文： http: [//paintincode.blogspot.com/2012/04/css3-transition-slideup-box-take-2.html](http://paintincode.blogspot.com/2012/04/css3-transition-slideup-box-take-2.html) http://jsfiddle.net/cpkDg/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T19:21:55.313

它不会起作用，因为`.content`它不是 的子元素，这是上下文中`this`的元素。`<h2>`您可以使用以下命令遍历到`<h2>`的父元素`$(this).parent()`：

```
$('h2').on('click', function() {
    slide($('.content', $(this).parent()));
}); 
```

[**演示**](http://jsfiddle.net/CxNnB/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T19:22:43.800

```
$('h2').on('click', function() {
    slide($(this).next('.content_w').find('.content'));
}); 
```

或者

```
$('h2').on('click', function() {
    slide($(this).parent().find('.content'));
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T19:23:13.870

```
$('h2').on('click', function() {
  slide($(this).parent().find('.content')); 
}); 
```

[演示](http://jsfiddle.net/cpkDg/178/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T19:27:37.153

您可以检查它是否是`h2`被点击的

```
$('article').on('click', function(e) {
    if ($(e.target).is('h2')){
        slide($('.content', this));
    }
}); 
```

[小提琴](http://jsfiddle.net/mowglisanu/CxNnB/11/)

# ios - iOS 5 故事板方向不起作用

> ID：11801995
> 
> 赞同：0
> 
> 时间：2012-08-03T19:19:24.603
> 
> 标签：ios, uistoryboard, ios5, xcode4.4

我们有一个我们正在使用带有标签视图控制器的 iOS 5 故事板（Xcode 4.4，Mountain Lion）设计的应用程序，我们正在尝试添加一个拆分视图控制器作为第三个标签。

在添加拆分视图控制器之前，我们在情节提要编辑器的模拟指标部分将所有视图控制器设置为横向。工作得很好。添加了拆分视图控制器，将其方向更改为横向，当我们在模拟器中运行它时，第一个选项卡（不是拆分视图）现在将所有 UI 元素绘制成纵向。模拟器默认为横向，但 UI 是横向的，就好像它是纵向的，其中大部分是隐藏的（因为它被设计为横向）。

我们删除了拆分视图控制器，问题仍然存在。

有任何想法吗？我们已经清理、重新构建、退出 Xcode、重新运行等。还没有添加任何代码，因为我们只是在编写代码备份之前尝试构建 UI 外观，而且我们'重新处于非常早期的阶段。

谢谢。

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:30:47.800

请在此处查看我的答案，了解确保您拥有一个面向横向的应用程序的步骤。

[当我单击后退按钮时，我的视图从横向变为纵向](https://stackoverflow.com/questions/11798808/when-i-click-the-back-button-my-view-changes-from-landscape-to-portrait/11799096#11799096)

拆分视图控制器也必须是 rootViewController。将它们添加为 TabViewController 内的选项卡不会开箱即用。

# android - SurfaceView 上的 AlphaAnimation？

> ID：11801997
> 
> 赞同：2
> 
> 时间：2012-08-03T19:19:30.313
> 
> 标签：android, surfaceview, android-animation, android-view

我正在尝试使用淡入 ( `AlphaAnimation`) 效果。我的视图根包含全屏`SurfaceView`（不是 GLSurfaceView），如果我使用`mSurfaceView.startAnimation(mMyAnimation)`，它不起作用，什么也不会发生。

我想这是因为它是 a`SurfaceView`而不是 a `View`。解决办法是什么？（我希望整个屏幕淡入。）如果最简单的解决方案是将 a 括起来，然后在封闭的`SurfaceView`上`View`使用`AlphaAnimation`，`View`那么执行此操作的确切代码是什么？（例如 XML）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-03T19:43:17.933

显然这不适用于 SurfaceView。试试这个解决方案：http: [//forum.xda-developers.com/showthread.php?t=1502274](http://forum.xda-developers.com/showthread.php?t=1502274)

它包括在 SurfaceView 前面放置一个黑色 ImageView 并对其应用淡出（这样使 SurfaceView 看起来像淡入）动画。