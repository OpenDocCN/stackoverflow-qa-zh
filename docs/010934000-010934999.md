# StackOverflow 问答 10934000-10934999

# linux-kernel - 如何将编译内核的结果用于另一台机器（具有不同的分布）

> ID：10934001
> 
> 赞同：1
> 
> 时间：2012-06-07T14:36:50.740
> 
> 标签：linux-kernel, build-automation

我有2台机器A和B。A安装了ubuntu。B装redhat。
现在，我在 A 上制作了内核。使用：

```
make O=xxx_dir/ &&
make O=xxx_dir/ modules 
```

然后，将 xxx_dir 复制到 B 机器。请高大上，我怎样才能使用 xxx_dir 运行：

```
make install
make modules_install 
```

一句话。那就是在A中编译并安装到B。

**我需要构建一个构建服务器，存储一些不同版本的内核。我想将编译结果发送到客户端机器。然后，安装它。**

谢谢。

# file-permissions - 附件的 ripmime 权限

> ID：10934003
> 
> 赞同：3
> 
> 时间：2012-06-07T14:37:01.990
> 
> 标签：file-permissions, procmail, umask

我们使用 ripmime 和 Procmail 将电子邮件内容提取到文件中。提取电子邮件正文（文本）时，ripmime 正确使用配置的 procmail UMASK (022) 文件，但是当有附件时，它会为带有 077 umask 的附件创建文件。以下是 ripmime 为一封带有“testTrades2.csv”附件的电子邮件创建的文件示例：

```
-rw-r--r--  1 fsdevprod   fsdevprod     2341 2012-06-07 06:36 textfile4
-rw-r--r--  1 fsdevprod   fsdevprod       19 2012-06-07 06:36 textfile3
-rw-r--r--  1 fsdevprod   fsdevprod      294 2012-06-07 06:36 textfile2
-rw-r--r--  1 fsdevprod   fsdevprod      573 2012-06-07 06:36 textfile1
-rw-r--r--  1 fsdevprod   fsdevprod        0 2012-06-07 06:36 textfile0
-rw-------  1 fsdevprod   fsdevprod       66 2012-06-07 06:36 testTrades2.csv 
```

以下是 procmail rc 文件中调用 ripmime 的方式：

```
| ripmime -i - -d /tmp 
```

为什么“testTrades2.csv”与 textfile* 文件具有不同的权限，有没有办法让它使用相同的 UMASK？

我们正在使用 ripmime v1.4.0.9。

谢谢，大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T13:34:53.933

`ripmime`源（mime.c）有一堆这些：

```
open(fullpath, O_WRONLY|O_CREAT, S_IRUSR|S_IWUSR); 
```

所以它是硬编码的。我把它们改成这样：

```
open(fullpath, O_WRONLY|O_CREAT, S_IRUSR|S_IWUSR|S_IRGRP|S_IROTH); 
```

并重新编译。现在这些文件被创建成组并且公开可读。不是一个理想的解决方案，因为它也是硬编码的，但它对我有用。

理想情况下，它应该是命令行可配置的，这不难做到，然后发送给 ripmime 维护者。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T17:12:16.630

```
:0:
* ^From.*xxx@xxx.ru

{

:0 c:
| ripmime -i - --no-nameless -d $MAILDIR/xxx

:0:
| chmod 777 $MAILDIR/xxx/*

} 
```

# java - 无法在休眠中保留地图的所有值

> ID：10934004
> 
> 赞同：1
> 
> 时间：2012-06-07T14:37:18.793
> 
> 标签：java, sql, hibernate, map, annotations

数据库布局：

USER_PREF_VAL

1.  int 用户 ID
2.  int value_id
3.  int pref_id

用户

1.  内部编号
2.  varchar 名称

PREF_VAL

1.  内部编号
2.  int pref_id
3.  varchar 值
4.  varchar 标签

PREF

1.  内部编号
2.  varchar 名称
3.  varchar 标签

    ```
    @OneToMany(fetch = FetchType.LAZY, cascade = CascadeType.ALL)
    @JoinTable(
        name="CMS_USER_PREFERENCE_VALUE",
        joinColumns = @JoinColumn( name="user_id" ),
        inverseJoinColumns = @JoinColumn( name="value_id")
    )
    @Cascade({org.hibernate.annotations.CascadeType.DELETE_ORPHAN})
    @MapKey(name = "preference")
    public Map<PreferenceEntity, PreferenceValueEntity> getPreferences(){
        return map;
    }
    protected void setPreferences(Map<PreferenceEntity, PreferenceValueEntity> mp){
        map = mp;
    }

    public void addPreference(PreferenceEntity pe,PreferenceValueEntity pve){
        map.put(pe,pve);
    } 
    ```

我的问题是，当使用 getPreferences() 提取信息时

我从 USER_PREF_VAL 获得了正确的项目映射，即：MAP /PreferenceEntity, ValueEntity\

但是，当我进行添加时，它会在数据库中创建一行，例如：

USER_ID、PREFERENCE_ID、NULL

任何有关弄清楚如何获得可能插入的值的帮助将不胜感激。我也知道作为 ValueEntity 传递给的值不为空。

谢谢

# c# - 图片框名称

> ID：10934013
> 
> 赞同：1
> 
> 时间：2012-06-07T14:37:48.770
> 
> 标签：c#, winforms

我有许多`PictureBox`名称为picturebox_D1、picturebox_D2 ... D30 的es。

我想做的是改变那些`PictureBox`es中的图像，但在循环中。像这样的东西，但工作

```
for (int i = 0; i < 30; i++)
{                     
    if (ReceivedDataTextBox.Text[i].ToString()=="1") 
        "pictureBox_D"+i.Image= new Bitmap(@"Pictures\\green.png");
    else 
        "pictureBox_D"+i.Image= new Bitmap(@"Pictures\\red.png");
} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:42:18.817

您可以使用父容器控件的索引来按名称获取控件。例如：如果您的图片框直接放在表单上（即，不在 Panel、GroupBox 或其他容器中）：

```
for(int i = 0; i < 30; i++)
{
    ((PictureBox)this.Controls["pictureBox_D" + i.ToString()]).Image = new Bitmap(@"Pictures\\green.png");
} 
```

对于嵌套的 PictureBoxes（即 GroupBoxes 或 Panels 中的那些），只需在父容器上采用相同的方法：

```
for(int i = 0; i < 30; i++)
{
    ((PictureBox)this.panel1.Controls["pictureBox_D" + i.ToString()]).Image = new Bitmap(@"Pictures\\green.png");
} 
```

从表面上看，只需键入字符串就应该能够引用变量似乎是合乎逻辑的，但是一旦您开始深入研究 C#，您就会意识到这并不是 C# 中的真正工作方式。您写入 IDE 的代码被编译，在编译期间，所有关于高级代码（变量名、函数名等）的好东西都消失了；一旦编译了代码，您的“pictureBox_D”字符串就毫无意义，并且对编译器毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:40:04.330

前段时间我不得不处理类似的情况，我有变量名`var1`，，`var2`...

我能找到解决怪物开关盒的最佳方法是使用反射。给定图片框的名称，您可以使用反射轻松找出变量本身。这应该有效：

```
// Assuming this is inside the form where the pictures boxes are hosted
for (int i = 0; i < 30; i++){
    FieldInfo field = GetType().GetField("pictureBox_D"+i, flags);
    PictureBox pictureBox = (PictureBox)field.GetValue(this);
    if (ReceivedDataTextBox.Text[i].ToString()=="1") 
        pictureBox.Image= new Bitmap(@"Pictures\\green.png");
    else 
        pictureBox.Image= new Bitmap(@"Pictures\\red.png");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:40:48.900

最好的方法是创建一个`PictureBox`数组并用你的图片框填充它，如下所示：

```
PictureBox[] pictures = {picturebox_D1, picturebox_D2, ...}; 
```

然后你可以遍历它们

```
foreach(var p in pictures)
{
    p.Image = new Bitmap(@"Pictures\\green.png");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:42:01.083

在您的构造函数中创建并设置一个本地`Dictionary<string, PictureBox>`. 请记住，Forms 是类，就像任何其他 C# 类一样，应该这样对待。

代替`for`，您现在可以使用`foreach`和访问`.Key`and`.Value`来获取文件名和`PictureBox`对象。`PictureBox`但是，这仅适用于您在名称和所需图片之间存在如此严格的关系。如果配对发生变化，或者您想为两个图片框使用相同的图像，您需要将其更改为`List<Tuple<string, PictureBox>>`. 事实上，这甚至可能是处理这种情况的最佳方式。

```
public class Form1 : Form
{
    private Dictionary<string, PictureBox> pictureBoxes;

    public Form1()
    {
        pictureBoxes = new Dictionary<string, PictureBox>()
        {
              {"Pictures\\green.png", pictureBox_D},
              {"Pictures\\blue.png", pictureBox_B},
              // Etcetera
        }
    }
} 
```

当您想遍历它们时，请执行以下操作：

```
foreach(var kvp in pictureBoxes)
{
    kvp.Value.Image = new Bitmap(kvp.Key);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:44:17.887

非常简单的解决方案：

```
PictureBox mybox = (PictureBox)this.Controls.Find("pictureBox2", true)[0]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T15:00:21.670

您可以`Controls.OfType<PictureBox>()`结合使用 LINQ 来获取您想要的项目。实际上，您可以将它们全部转换为您可以使用的集合：

```
var picBoxes = this.Controls
                    .OfType<PictureBox>()
                    .Where(pb => pb.Name.StartsWith("pictureBox_D"))
                    .ToDictionary(pb => int.Parse(pb.Name.Replace("pictureBox_D", string.Empty)));
for(int i = 0; i < picBoxes.Length; i++)
{
    // Do what you need with picBoxes[i]
} 
```

好消息是您可以在构造函数中执行此操作一次（在`InitializeComponent`调用之后），并且您可以在表单的剩余生命周期中重用此集合。这也确保了如果您添加任何额外的图片框（遵循相同的命名约定），您不需要更改任何内容。

# javascript - 使用“attr”与“animate”使用节点 ID 更改 Raphael 对象

> ID：10934016
> 
> 赞同：1
> 
> 时间：2012-06-07T14:37:56.593
> 
> 标签：javascript, raphael

我正在构建一个应用程序，该应用程序使用 Raphael 根据从 json 提要读取的值在地图上绘制圆圈。每个圆形节点都有一个 ID，然后我用它来调用它并更改它的属性。选择一个新变量会改变圆圈的大小和颜色。我可以使用 JQuery 的 attr 方法更改大小，但不能设置动画。

我为每个圈子分配了一个 ID：

```
circle.raphael.node.id = [thisCircle] 
```

我可以使用属性方法更改每个圆圈的大小和颜色，因此：

```
$(thisCircle).attr({
r : [new radius]
fill : [new color]
}); 
```

但我无法使用 JQuery 的 animate 方法对其进行动画处理：

```
$(thisCircle).animate({
r : [new radius],
fill : [new color]
}, 200); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:21:50.413

你为什么不通过它自己的[`animate`](http://raphaeljs.com/reference.html#Element.animate)方法为 raphael 对象设置动画？：

```
circle.animate({
    r : newRadius,
    fill : newColor
},200); 
```

这是一个演示如何为 raphael 圆形对象设置动画：

### [http://jsfiddle.net/gion_13/MpjGJ/](http://jsfiddle.net/gion_13/MpjGJ/)

.
在同一个演示中，您会看到我添加了一个不必要的迷你 jquery 插件，让您可以通过本机 jquery 动画方法为 raphael svg 对象设置动画，如下所示：

```
$('#the-id-of-the-svg-node').animate({
    r : newRadius,
    fill : newColor
},200); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:59:51.243

尝试使用`$('#'+thisCircle).animate...`。`[thisCircle]`是底层元素的`id`，为了将它传递给 jQuery，你必须指定一个*选择器*来选择元素本身。

# html - 用 MATLAB 忽略一些字符串

> ID：10934018
> 
> 赞同：0
> 
> 时间：2012-06-07T14:38:02.020
> 
> 标签：html, string, parsing, matlab

我想提取一些包含在 HTML 标签中的文本。例如：

```
<html><body>this is a warning message. wrongs values</body></html> 
```

结果应该通过忽略所有 HTML 标记来获取消息。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:59:24.710

你想要这样的东西：

```
 a = sscanf('<html><body>this is a warning message. wrongs values</body></html>','<html><body>%[a-zA-Z., ]</body></html>') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:37:49.000

您可以使用正则表达式[去除 HTML 标签：](http://www.mathworks.com/support/solutions/en/data/1-1W023G/index.html?product=ML&solution=1-1W023G)

```
str = '<html><body>this is a warning message. wrongs values</body></html>';
str2 = regexprep(str, '<[^>]*>', '') 
```

# java - 运行后生成的图像的 URL；GWT

> ID：10934021
> 
> 赞同：0
> 
> 时间：2012-06-07T14:38:04.050
> 
> 标签：java, gwt, servlets

我有一张图片上传并存储在服务器上。我现在想围绕这个 URL 创建一个 Image 小部件。我的上传方法返回图片的**相对**路径，例如：uploads/image.jpg。

我正在尝试生成一个 URL 以让我访问此图像。此方法适用于开发模式：

```
String imagePath = uploads/image.jpg;
Image image = new Image(GWT.getHostPageBaseURL() + imagePath.replaceAll('//', '\')); 
```

replaceAll 用于将 windows 文件分隔符转换为 URL 分隔符。这会在部署到我的 Jetty 服务器时生成带有 URL **http://localhost:8080/card-designer/uploads/image.jpg的图像。**图像不显示。

是否不可能为动态创建的图像创建可访问的 URL？任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:57:03.137

> 我的上传方法返回图片的相对路径

相对于什么？您的文件存储在磁盘的哪个位置？这似乎您需要配置码头。你需要告诉 jetty 这个 url 对应于一个图像并且它应该提供它。

请参阅Jetty 文档中的[提供静态内容](http://docs.codehaus.org/display/JETTY/Static+Content)。

简单的解决方案是在您的 jetty.xml 中添加类似的内容

```
<Configure class="org.mortbay.jetty.handler.ContextHandler">
  <Set name="contextPath">/upload</Set>
  <Set name="resourceBase"><SystemProperty name="jetty.home" default="."/>/upload</Set>
  <Call name="addHandler">
    <Arg>
      <New class="org.mortbay.jetty.handler.ResourceHandler"/>
    </Arg>
  </Call>
</Configure> 
```

您应该将“resourceBase”参数替换为磁盘上上传目录的路径。

否则，创建您自己的 servlet 来获取图像并将其映射到 /upload/ 。

我猜它在开发模式下工作，因为默认情况下嵌入式码头可能会提供未知的 url，如静态内容。

# php - 强制用户在 PHP 中下载文件

> ID：10934022
> 
> 赞同：1
> 
> 时间：2012-06-07T14:38:04.330
> 
> 标签：php, header

> **可能重复：**
> [强制使用 PHP 下载文件](https://stackoverflow.com/questions/1465573/forcing-to-download-a-file-using-php)

当我们需要强制用户下载文件时，我们使用[带有多个参数/选项的标题。](http://php.net/manual/en/function.header.php)如果我使用怎么办

```
header("location:test.xlsx"); 
```

这是有效的:) 使用这个快捷方式有什么缺点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:54:32.430

这种方法应该可以解决这里提到的问题

下载.php?filename=test.xlsx

```
if isset ($_GET['filename']){
$filename = $_GET['filename']
}
else{
die();
}

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($file));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: ' . filesize($file));
ob_clean();
flush();
readfile($file); 
```

当然不要忘记保护它，这样用户就不能下载其他文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:43:49.957

这种方法有几个缺点：

1.  如果文件是浏览器可以读取的文件，则不会下载（如`.txt`、`.pdf`、`.html`、`.jpg`、`.png`等`.gif`），而只是在浏览器中显示

2.  用户获得文件的直接链接。很多时候，您不想要这个，因为他们可以将此链接提供给其他人，所以...

    1.  这将花费您更多的带宽
    2.  它不能用于私人文件
    3.  如果是图片，他们可以热链接到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:40:38.260

您所做的只是重定向到一个文件。这与他们直接去那里没有什么不同。

如果您尝试强制下载，则需要`Content-Disposition`适当地设置标题。

```
header('Content-Disposition: attachment'); 
```

请注意，重定向时不能使用此标头...此标头必须与文件内容一起发送。另见： [https ://stackoverflow.com/a/3719029/362536](https://stackoverflow.com/a/3719029/362536)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:40:50.477

并非每个文件都被强制下载。

如果您要在 .jpg 上使用该 header()，浏览器将不会打开下载对话框，而只会显示图像。

# knockout.js - 使用自定义 bindingHandler 的文本输入水印

> ID：10934023
> 
> 赞同：5
> 
> 时间：2012-06-07T14:38:10.913
> 
> 标签：knockout.js, watermark

我一直在尝试创建一个自定义 bindingHandler，我可以使用它来为文本输入字段提供水印行为。

我的意思是：将默认`watermark`值添加到在焦点上删除的文本字段中，如果文本字段仍然为空，则在模糊时替换

我已经设法让它像这个jsfiddle中所展示的那样工作：http: [//jsfiddle.net/rpallas/nvxuw/](http://jsfiddle.net/rpallas/nvxuw/)

我对此解决方案有 3 个问题：

1.  **有什么办法可以改变它，让我只需要声明一次水印值吗？**目前我必须把它放在我声明绑定的地方，并且我还必须在 viewModel 中用相同的值初始化 observable——否则它将没有初始值。
2.  **有没有更好的方法来获取元素值绑定到的底层 observable。**我目前正在使用 allBindingsAccessor 来获取它，但这对我来说感觉不对。最初我只是使用 jquery 设置值，`$(element).val('')`但这也感觉不对。哪个最好，或者有更好的方法吗？
3.  **有没有人有或知道这个问题的现有解决方案？**我在重新发明轮子吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T16:19:00.117

我认为你使用 allbindings 是不必要的。事实上，我认为水印根本不需要知道可观察的，因为这就是水印通常所做的，即`placeholder`属性。

这对你有用吗？

```
ko.bindingHandlers.watermark = {
    init: function (element, valueAccessor, allBindingsAccessor) {
        var value = valueAccessor(), allBindings = allBindingsAccessor();
        var defaultWatermark = ko.utils.unwrapObservable(value);
        var $element = $(element);

        setTimeout(function() {
            $element.val(defaultWatermark);}, 0);

        $element.focus(
            function () {
                if ($element.val() === defaultWatermark) {
                    $element.val("");
                }
            }).blur(function () {
                if ($element.val() === '') {
                    $element.val(defaultWatermark)
                }
            });
    }
}; 
```

[http://jsfiddle.net/madcapnmckay/Q5yME/1/](http://jsfiddle.net/madcapnmckay/Q5yME/1/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:37:59.217

只要您的应用程序逻辑非常简单，前面的方法就可以了，请注意解决方案会弄乱您的视图模型的值，这些值可以是可观察的，并且它们可以具有与之关联的订阅或计算，因此通过更改值你改变你的视图模型。这是一个不同的解决方案，无需更新您的视图模型

```
ko.bindingHandlers.fakePlaceHolderWhenNeedIt = {
    init: function (element, valueAccessor, allBindings, vm) {
     if (!Modernizr.input.placeholder) {
        var placeHolderVal = $(element).attr("placeholder");

        if (placeHolderVal != null || placeHolderVal != '') {

            var $element = $(element);
            var value = valueAccessor()
            var valueUnwrapped = ko.utils.unwrapObservable(value);

            $element.keyup(function () {
                var inputValue = $(this).val();
                var $watermark = $(this).prev('.ie-placeholder');
                if (inputValue == null || inputValue == '') {
                    $watermark.show();
                }
                else {
                    $watermark.hide();
                }
            });

            var display = valueUnwrapped != null || valueUnwrapped != '' ? "block" : "none";
            var left = $element.position().left;
            var top = $element.position().top;
            var paddingLeft = $element.css('padding-left');
            var paddingRight = $element.css('padding-right');
            var paddingTop = $element.css('padding-top');
            var paddingBottom = $element.css('padding-bottom');

            var height = $element.css('height');
            var placeHolder = '<div class="ie-placeholder" style="position:absolute;left:' + left + ';top:' + top + ';padding-top: ' + paddingTop + ';padding-bottom: ' + paddingBottom + ';padding-left: ' + paddingLeft + ';padding-right: ' + paddingRight + ';height: ' + height + ';line-height:' + height + ';display:' + display + ';">' + placeHolderVal + '</div>';

            $(placeHolder).click(function () { $element.focus(); }).insertBefore(element);
        }
    }
},
update: function (element, valueAccessor, allBindings, vm) {
    if (!Modernizr.input.placeholder) {
        var placeHolderVal = $(element).attr("placeholder");

        if (placeHolderVal != null || placeHolderVal != '') {
            var $element = $(element);
            var value = valueAccessor()
            var valueUnwrapped = ko.utils.unwrapObservable(value);

            var $watermark = $element.prev('.ie-placeholder');
            if (valueUnwrapped == null || valueUnwrapped == '') {
                $watermark.show();
            }
            else {
                $watermark.hide();
            }
        }
    }
} 
```

# php - GROUP_CONCAT 奇怪的结果

> ID：10934025
> 
> 赞同：0
> 
> 时间：2012-06-07T14:38:22.287
> 
> 标签：php, mysql

我尝试使用 group_concat 来更快地创建 xml 输出。记录号与传统查询不同。事实上，当我的查询使用组 concat 时，我的记录较少。

```
 SELECT GROUP_CONCAT(
    CONCAT('\n<p>\n',  
        CONCAT('\n<id>',paIndex,'</id>\n'),
        CONCAT('<prInitiales>',prInitiales,'</prInitiales>\n'),
        CONCAT('<paNomPren>',paNomPrenom,'\n',ttT_Traitement_P,'</paNomPren>\n'),                                   
        CONCAT('<ttTStatutP>',ttTStatutP,' - ',DATE_FORMAT(ttDateStatut,'%d/%m/%Y'),'\n',ttUserImportant,'</ttTStatutP>\n'),
        CONCAT('<paDossier1>',paDossier1,'\n',paDossier2,'</paDossier1>\n'),
        CONCAT('<paNumTel1>',paNumTel1,'\n',paNumTel2,'</paNumTel1>\n'),
        CONCAT('<paNaissanceS>',DATE_FORMAT(paNaissance,'%d/%m/%Y'),'</paNaissanceS>\n'),
    '</p>') ORDER BY paNomPrenom DESC) AS xml
    FROM 20Patients_1012
    JOIN 30Traitemnt_201223 ON 20Patients_1012.paIndex = 30Traitemnt_201223.ttIndex
    JOIN 12Praticien_02 ON 30Traitemnt_201223.ttPraticien = 12Praticien_02.prIndex 
```

传统查询：

```
 SELECT 20Patients_1012.paIndex, 20Patients_1012.paNomPrenom, 20Patients_1012.paDossier1, 20Patients_1012.paDossier2, 20Patients_1012.paNaissance, 20Patients_1012.paNumTel1, 30Traitemnt_201223.ttTStatutP, 30Traitemnt_201223.ttDateStatut, 12Praticien_02.prInitiales
FROM 20Patients_1012
JOIN 30Traitemnt_201223 ON 20Patients_1012.paIndex = 30Traitemnt_201223.ttIndex
JOIN 12Praticien_02 ON 30Traitemnt_201223.ttPraticien = 12Praticien_02.prIndex ORDER BY 20Patients_1012.paNomPrenom ASC 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:43:59.643

如[手册](http://dev.mysql.com/doc/en/group-by-functions.html#function_group-concat)所述：

> 结果被截断为系统变量给出的最大长度，[`group_concat_max_len`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_group_concat_max_len)其默认值为 1024。该值可以设置得更高，尽管返回值的有效最大长度受 值的限制[`max_allowed_packet`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_max_allowed_packet)。在运行时更改 的值的语法[`group_concat_max_len`](http://dev.mysql.com/doc/en/server-system-variables.html#sysvar_group_concat_max_len)如下，其中***`val`***是一个无符号整数：
> 
> ```
> 设置 [全球 | 会话] group_concat_max_len = *val* ;
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:49:48.333

您在查询中使用了 LEFT JOIN，在另一个查询中使用了简单的 JOIN。这可能会导致不同的结果，因为 LEFT JOIN 还会考虑在另一个表中没有匹配的记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T05:02:28.383

我找到了解决方案。确实，如果 null 值，则忽略记录，所以我使用 COALESCE 函数来解决这个问题！

# sql - 触发或插入

> ID：10934029
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:38:42.717
> 
> 标签：sql

我有 2 张桌子：`product`和`UnproveProduct`

插入产品时，必须为该新产品插入一行到`UnprovedProduct`.

哪种解决方案更好，为什么？

1.  插入后创建触发器`Product`
2.  在插入一行时的过程中，`Product`然后也插入一行`UnprovedProduct`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T19:31:19.377

这是触发器的完美用途。触发器并不那么神秘，也不难预测。它们只是一个工具，它们遵循非常具体的规则。在这种情况下，触发器会在插入记录后立即运行。

您可以扩展插入过程，但下一个人不会使用它，并且您的记录将无法正确插入。

CREATE TRIGGER Insert_UnProvedProduct ON Product AFTER INSERT AS BEGIN

INSERT INTO UnProvedProduct (field1, field2, field3) 选择 field1, field2, field3 FROM INSERTED

结尾

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:07:47.107

我会选择＃2。

为什么？

*   触发器是出了名的烦人，而且往往会导致意想不到的问题——一方面，你无法真正控制它们被触发的方式和时间......

*   如果您已经**有**一个插入数据的过程`Products`- 只需扩展它并同时添加行`UnprovedProduct`。您可以更好地控制您在过程中所做的事情（与触发器相比）

# asp.net-mvc - WCF 服务将 JSON 数据返回到 Web 应用程序

> ID：10934030
> 
> 赞同：0
> 
> 时间：2012-06-07T14:38:55.453
> 
> 标签：asp.net-mvc, json, wcf

我目前正在构建一个报告服务 (WCF) - 填充的报告是使用使用 C# 动态的[弹性对象](http://elasticobject.codeplex.com/)生成的- 我已经编写了代码来将对象转换为 WCF 服务中的 JSON。WCF 服务托管在 Windows 服务中，并使用命名管道或 TCP 绑定。

接下来我需要做的是将报表对象作为 JSON 返回给 ASP.Net MVC Web 应用程序，然后它只是将其传递给客户端而不进行反序列化。由于安全问题，我不能让客户端直接调用 WCF 服务。

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T15:55:54.777

好的-最后这很简单-

[我在这里](http://loosexaml.wordpress.com/2011/01/01/wcf-serialization-of-dlr-dynamic-types/)关注了这篇文章，用 SerializableDynamicObject 替换了我的 ElasticObject（我不需要 ElasticObject 的扩展能力）

这种方法效果很好。

# javascript - 如何使用 CommonJS 在 Spine 中要求 Stylus？

> ID：10934032
> 
> 赞同：0
> 
> 时间：2012-06-07T14:38:59.383
> 
> 标签：javascript, spine.js, commonjs, stylus

我想在我的 Spine 应用程序中使用[javascript API Stylus 提供。](http://learnboost.github.com/stylus/docs/js.html)

为此，我必须使用 Stylus。

因为 Stylus 是 Hem 的依赖项，所以我尝试在 index.coffee 中要求它：

```
Stylus    ?= require('stylus') 
```

但这导致了一个错误：

```
uncaught exception: module Stylus not found 
```

然后我尝试在 package.json 中独立包含 Stylus

```
{
  "name": "Blank",
  "version": "0.0.1",
  "engines": {
     "node": "0.6.x",
     "npm":  "1.0.x"
  },
  "dependencies": { 
    "serveup": "~0.0.2",
    "hem": "~0.1.7",
    "stylus" : "~0.22.6",
    "es5-shimify": "~0.0.1",
    "json2ify": "~0.0.1",
    "jqueryify": "~0.0.1",
    "spine": "~1.0.5",
    "spine.mobile": "~1.0.0",
    "gfx": "~0.0.4"
  }
} 
```

在我的 slug.json

```
{
  "dependencies": [
    "es5-shimify", 
    "json2ify", 
    "jqueryify", 
    "spine",
    "spine/lib/local",
    "spine/lib/ajax",
    "spine/lib/relation",
    "spine/lib/route",
    "spine/lib/tmpl",
    "spine/lib/manager",
    "stylus"
  ],
  "libs": []
} 
```

但这导致服务器日志中出现错误：

```
Unhandled error! 
```

我如何需要 Stylus 并在 Spine 中使用它的 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:23:48.943

我觉得您`npm install`在将手写笔依赖项添加到您的应用程序 package.json 后忘记运行了。

# oracle - 在 oracle 11g 中收缩数据库

> ID：10934037
> 
> 赞同：2
> 
> 时间：2012-06-07T14:39:05.110
> 
> 标签：oracle, oracle11g

我无论如何都不是数据库管理员，所以我在这里陈述一些事情可能是错误的。

在 SQL Server 中，当我们在数据库中添加大量数据然后删除它时，数据文件（.mdf 文件）或数据库（或其他任何名称）的大小不会减小到原始大小. 我们需要缩小它。

相同的基本原理在 Oracle 中是否有效？如果是，那么我应该如何缩小 Oracle 11g 数据库？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:43:41.910

Oracle 文档的完整解释：[回收浪费的空间](http://docs.oracle.com/cd/B28359_01/server.111/b28310/schema003.htm)。对于简短版本：

> “您可以缩小表、索引组织表、索引、分区、子分区、物化视图或物化视图日志中的空间。您可以使用 ALTER TABLE、ALTER INDEX、ALTER MATERIALIZED VIEW 或 ALTER MATERIALIZED VIEW LOG 语句与SHRINK SPACE 子句。”

因此，在运行 Oracle Segment Advisor 以推荐要收缩的区域后，类似以下内容将收缩名为`mytable`.

```
SQL> alter table mytable enable row movement;
Table altered

SQL> alter table mytable shrink space;
Table altered 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-16T15:30:06.213

我有一个类似的情况，表大小为 28 Gb，当我从中删除数据时，我发现没有发生任何变化。

在我从该表创建另一个表并删除第一个表后，大小缩小了 10 Gb，变为 18 Gb。

`CREATE TABLE NEW_TBL AS SELECT * FROM OLD_TBL`

# node.js - 函数在nodejs中没有同步工作？

> ID：10934038
> 
> 赞同：0
> 
> 时间：2012-06-07T14:39:14.847
> 
> 标签：node.js, login, passwords

我对我的代码有点困惑，它没有按应有的方式同步工作。我使用everyauth 进行身份验证。

```
registerUser(function(newUserAttrs) {
        var login = newUserAttrs[this.loginKey()];
        user.CreateNewUser(newUserAttrs.login, newUserAttrs.password, newUserAttrs.email, function(res, err) {
            if(!err) {
                return usersByLogin[login] = newUserAttrs;
            }
            else {
                throw err;
            }

        });

    }) 
```

在另一个文件中我写了这段代码

```
exports.CreateNewUser = function(login, pass, mail, callback) {

    var sql = "insert into `user`(login,mail,pass) values(?,?,?)";
    client.query(sql, [login, mail, pass], function(err, results, fields) {
        if(!err) {
            callback(results);
            console.log('test')
        }
        else {
            callback(results, err);
        }
    });
}; 
```

这段代码工作正常。我测试过他。唯一的问题是它们正在同步工作（正常）。有人可以向我解释一下我以错误的方式做了什么使其异步的事情。我想以同步的方式完成它。

当前代码给我错误（它在数据库中输入并在浏览器上产生错误）

```
Error: Step registerUser of `password` is promising: userOrErrors ; however, the step returns nothing. Fix the step by returning the expected values OR by returning a Promise that promises said values.
    at Object.exec (E:\proj\Node\node_modules\everyauth\lib\step.js:68:11)
    at E:\proj\Node\node_modules\everyauth\lib\stepSequence.js:26:38
    at [object Object].callback (E:\proj\Node\node_modules\everyauth\lib\promise.js:13:12)
    at RouteTriggeredSequence._bind (E:\proj\Node\node_modules\everyauth\lib\stepSequence.js:25:20)
    at RouteTriggeredSequence.start (E:\proj\Node\node_modules\everyauth\lib\stepSequence.js:52:33)
    at RouteTriggeredSequence.routeHandler (E:\proj\Node\node_modules\everyauth\lib\routeTriggeredSequence.js:13:13)
    at Object.<anonymous> (native)
    at nextMiddleware (E:\proj\Node\node_modules\connect\lib\middleware\router.js:175:25)
    at param (E:\proj\Node\node_modules\connect\lib\middleware\router.js:183:16)
    at pass (E:\proj\Node\node_modules\connect\lib\middleware\router.js:191:10) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:32:41.133

你呈现的两段代码是异步的和不同步的！使用everyauth，为了能够处理异步用户创建，您应该使用Promise。所以你的代码将是这样的：

```
registerUser(function(newUserAttrs) {
    var promise = this.Promise();
    var login = newUserAttrs[this.loginKey()];
    user.CreateNewUser(newUserAttrs.login, newUserAttrs.password, newUserAttrs.email, function(res, err) {
        if(!err) {
            return promise.fulfill(newUserAttrs);
        }
        else {
            promise.fulfill(user);
        }

    });

}) 
```

如果没有承诺，您将无法确定您的新用户是否已添加到您的数据库中。但如果没关系，你可以有这样的东西：

```
registerUser(function(newUserAttrs) {
    var login = newUserAttrs[this.loginKey()];
    user.CreateNewUser(newUserAttrs.login, newUserAttrs.password, newUserAttrs.email, function(res, err) {
        if (err) console.log(err);
    });
    return newUserAttrs;

}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:34:19.780

因为您正在执行数据库查询，所以此代码必须是异步的。在数据库查询完成之前，您传递给的匿名函数`client.query`不会被调用，因此您`callback`会被异步调用。

您需要将这一切视为异步，因此例如您必须触发一些其他回调而不是返回用户对象/抛出。

# linux - 在本地网络上访问 VirtualHost 时遇到问题

> ID：10934039
> 
> 赞同：0
> 
> 时间：2012-06-07T14:39:23.903
> 
> 标签：linux, apache, dns, asterisk, virtualhost

嗨，我有一个带有动态 IP 的华为 ADSL 调制解调器。我用 freedns 设置了一个动态 dns，我可以从我的私有网络外部，从互联网轻松访问我在 apache 上的虚拟主机。

所以试图从本地网络访问它，我得到一个调制解调器登录页面。

我的调制解调器 NAT 中有规则将端口 80 连接到我的服务器，但它似乎无法从内部网络工作。

我托管虚拟主机的服务器是 192.168.0.1 ，调制解调器的地址是 192.168.0.254 。

我试图将我的外部域名放入 /etc/hosts 文件中，但如果我这样做了，星号服务器就会感到困惑。

问题的原因可能是什么？这个问题的最佳解决方案是什么？

我应该在网络的私有端设置缓存 DNS 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T04:02:26.380

Hugger 说对了一半……这是因为您的路由器阻止了环回。解决此问题的最简单方法是在网络后面的计算机上编辑主机文件[（请参阅 Wiki 页面） ，以将计算机的本地 IP 视为您要使用的虚拟主机。](http://en.wikipedia.org/wiki/Hosts_%28file%29)例如，如果您的服务器位于 192.168.0.1 并且虚拟主机名为 www.imrad.com，则插入

`192.168.0.1 www.imrad.com`

到您的主机文件中。如果您的计算机离开本地网络（例如您带去上班的笔记本电脑）并加入不在路由器后面的网络，您需要在 hosts 文件中注释掉该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T00:48:41.290

实际上，要访问它，您必须通过进入命令行/提示符并键入 ipconfig /all 来找到服务器的本地 IP 地址，然后您将找到 ipv4 地址。请注意这一点。转到另一台计算机和您的该 IP，它会显示。

发生这种情况的原因是因为路由器/调制解调器知道你在它的网络中，所以它会认为你正试图进入它的登录页面。这也发生在我身上。

# wpf - WPF 将 FrameworkElement 事件绑定到命令

> ID：10934040
> 
> 赞同：2
> 
> 时间：2012-06-07T14:39:26.153
> 
> 标签：wpf, events, mvvm, commandbinding, frameworkelement

如何将`UserControl`'s`FrameworkElement`事件绑定到视图模型命令？我使用 MVVM 和 Prism，因此视图模型之间的清晰分离会很好。

我尝试了多种方法，但都没有奏效：

```
<i:Interaction.Triggers>
    <i:EventTrigger EventName="FrameworkElement.Unloaded">
        <i:InvokeCommandAction Command="{Binding Unloaded}" />
    </i:EventTrigger>
</i:Interaction.Triggers> 
```

也使用本教程[http://blog.functionalfun.net/2008/09/hooking-up-commands-to-events-in-wpf.html](http://blog.functionalfun.net/2008/09/hooking-up-commands-to-events-in-wpf.html)

```
local:FrameworkElementBehavior.UnloadedCommand="{Binding Unloaded}" 
```

我是否别无选择，只能在我的代码隐藏中添加一些功能？

上述尝试均未出错，但命令未执行。

这是我的视图模型：

```
public class CustomerViewModel : PosViewModelBase
{
    public ICommand Unloaded
    {
        get { return new UnloadedCommand(); }
    }

    public CustomerViewModel()
    {

    }

    private class UnloadedCommand : ICommand
    {
        public bool CanExecute(object parameter)
        {
            return true;
        }

        public event EventHandler CanExecuteChanged;

        public void Execute(object parameter)
        {
            Debug.WriteLine("Customer stuff is out of view");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:03:41.933

我认为问题可能出在 Unloaded 事件中。

从 MSDN 页面[http://msdn.microsoft.com/en-us/library/ms754221.aspx#common_events](http://msdn.microsoft.com/en-us/library/ms754221.aspx#common_events)：

Unloaded 是最后引发的，由正在删除的表示源或可视父项启动。当 Unloaded 被引发和处理时，作为事件源父元素（由 Parent 属性确定）或逻辑或可视树中向上的任何给定元素可能已经取消设置，这意味着数据绑定、资源引用和样式可能不设置为其正常或最后已知的运行时值。

# css - 在 Safari 中更改数据属性，但屏幕不会重绘为新的 CSS 样式

> ID：10934043
> 
> 赞同：2
> 
> 时间：2012-06-07T14:39:30.273
> 
> 标签：css, safari, redraw

在我的网站中，我创建了一个内容和导航元素。

单击“下一步”按钮后，我的 Javascript 将解释下一页并更改其父节点上的“数据进度”属性。我的 CSS 包含几个选择器

> .content[data-progress="0"] > .progressNavigationHolder > .progressNavigation > div:nth-child(1)

和

> .content[data-progress="0"] > .progressPages > ul

以便选项卡更改为按下状态，并且页面`margin-left`将增加 480 像素。

这一切都很好（如果编写和解释有点混乱），代码将更改为`data-progress`递增值以及 CSS 选择器链接到正确的节点。但是，这仅对检查员而言是正确的，但实际上，屏幕/视口并未更新以显示此更改。

这在 Chrome 中效果很好，但出于某种原因 Safari 不想显示它。

如果有任何帮助，我正在 Windows 上运行 Safari 5.1.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T16:55:20.223

好的，所以为了克服这个问题，我在我的 Javascript 中更改了一个标签类。似乎是强制重绘屏幕。

# c++ - 将精度双精度转换为字符串

> ID：10934044
> 
> 赞同：3
> 
> 时间：2012-06-07T14:39:32.067
> 
> 标签：c++, arrays, string, double, precision

我在 C++ 中有大量存储为精确的双精度值（假设输入“n”为 75）：2.4891e+109

有什么方法可以将其转换为每个数字的字符串或数组？

到目前为止，这是我的代码，尽管它与问题并不完全相关：

```
int main(){

    double n = 0; 
    cout << "Giz a number: ";
    cin >> n;
    double val = 1;
    for(double i = 1; i <= n; i++){
        val = val * i;
    }
    //Convert val to string/array here?
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T14:42:21.303

```
std::stringstream str;
str << fixed << setprecision( 15 ) << yournumber; 
```

您可能还对`scientific`格式标志感兴趣。

C++11 还有一些有趣的功能[`std::to_string`](http://en.cppreference.com/w/cpp/string/basic_string/to_string)，您可能想看看！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T14:42:40.907

标准方式有什么问题？

```
std::stringstream ss;
ss << val;
std::string s = ss.str(); 
```

此外，C++11 允许：

```
std::string s = std::to_string(val); 
```

如果您需要性能，您可能会发现上面涉及的内存分配过于昂贵，在这种情况下，您可以求助于 snprintf、已弃用的 strstream，或者直接使用 num_put 方面。例如：

```
char c[30];
std::snprintf(c,sizeof c,"%e",val); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:53:34.973

你会发现double值并没有你想的那么精确。它只包含 53 位精度，或大约 15-17 位；之后，它开始对每个结果进行四舍五入。如果你想要一个准确的答案，你的数字需要比这更高的精度，实际上是 92 位或 364 位。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:43:50.880

```
std::cout << setprecision(5) << val; 
```

如[http://www.cprogramming.com/tutorial/iomanip.html](http://www.cprogramming.com/tutorial/iomanip.html)

# drupal - drupal 7中的innerjoin查询

> ID：10934048
> 
> 赞同：1
> 
> 时间：2012-06-07T14:39:49.760
> 
> 标签：drupal, drupal-6, drupal-7

我正在将此查询应用于以下 D6 查询，但不工作..不知道我在做什么错了....在某些情况下内部连接是否失败

```
$result = db_select('px_slides','s')
    ->join('node','n','s.vid = n.vid')
    ->fields('s',array('tissue_type','body_site'))
    ->fields('n',array('sticky','title'))
    ->condition('n.status','1','=')
    ->condition('s.cid','126','=')
    ->execute()->fetchObject(); 
```

我有drupal 6查询：

```
 $result = db_query('
  SELECT n.nid, n.vid, n.sticky, n.title, n.created, s.cid, s.ref_id, s.viewurl, s.specimen_type, s.tissue_type, s.body_site, s.test_type, s.algorithm, s.result 
  FROM {px_slides} s INNER JOIN {node} n ON n.vid = s.vid
  WHERE n.status = 1 ')->execute(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T16:40:59.250

You need to put your call to `->join()` on a separate line altogether, as it doesn't return the query object:

```
$query = db_select('px_slides','s')  
  ->fields('s',array('tissue_type','body_site'))
  ->fields('n',array('sticky','title'))
  ->condition('n.status','1','=')
  ->condition('s.cid','126','=');

$query->join('node','n','s.vid = n.vid');

$result = $query->execute()->fetchObject(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T09:14:05.410

尝试这个...

```
$query = db_select('px_slides', 's');
$query->innerJoin('node,'n','s.vid = n.vid');
$query->fields('s',array('tissue_type','body_site'));
$query->fields('n',array('sticky','title'));
$query->condition('n.status','1');
$query->condition('s.cid','126');
$result= $query->execute()->fetchAll(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:32:58.277

join 方法不会这样链接。您将不得不执行以下操作：

```
$query = db_select('px_slides','s')
    ->join('node','n','s.vid = n.vid');
$query->fields('s',array('tissue_type','body_site'))
    ->fields('n',array('sticky','title'))
    ->condition('n.status','1','=')
    ->condition('s.cid','126','=');
$result = $query->execute()->fetchObject(); 
```

您还可以使用 to string 魔术方法来查看它将执行的查询。

```
$query->__toString(); 
```

# javascript - HTML5 + JavaScript Silverlight/.NET 运行时

> ID：10934062
> 
> 赞同：1
> 
> 时间：2012-06-07T14:40:32.203
> 
> 标签：javascript, .net, silverlight, html, clr

虽然 MSIL 是一个[开放标准，并且有为 Windows（](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-335.pdf) [Mono](http://www.mono-project.com/) ）以外的其他操作系统编写的运行时，但我正在考虑用纯 JavaScript 实现 CLR。直接在浏览器中运行 .NET 应用程序（可能仅适用于 Silverlight），而不需要任何浏览器插件会非常好。

随着 HTML5 的[类型化数组](http://wiki.ecmascript.org/doku.php?id=strawman%3atyped_arrays)[`<canvas> element`](http://www.w3.org/TR/2dcontext/)和[XMLHttpRequest Level 2](http://www.w3.org/TR/XMLHttpRequest2/)的引入，（理论上）必须有一种方法可以在纯 JavaScript 中构建 Silverlight/.NET 运行时。（这也为 Flash 完成了：项目“ [Gordon](https://github.com/tobeytailor/gordon/wiki/) ”）

但我问的问题是：今天可行吗？

我看了一下[Mono.Cecil](http://www.mono-project.com/Cecil)源代码，这真的很简单。Javascript 甚至会足够快（今天）吗？移动设备呢？

**有没有办法编写一个 CLR，它从服务器下载一个 XAP 文件（通过使用 AJAX），打开它，运行它并将 UI 绘制到画布上？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T21:24:34.173

有可能的。查看 Fayde@ [http](http://fayde.wsick.com) ://fayde.wsick.com 。尽管该项目已经开发了近一年，但该网站才刚刚启动。

# spring - 如何集中我的 JSF 页面使用的字符编码？

> ID：10934065
> 
> 赞同：0
> 
> 时间：2012-06-07T14:40:35.417
> 
> 标签：spring, jsf, character-encoding

我想尽可能**集中我的****JSF**页面使用的字符编码。

在**WEB-INF**文件夹下，我有两个项目配置文件，一个用于开发环境（称为**projectDEV.properties**），另一个用于生产环境（称为**projectPRO.properties**）。

**Spring**通过以下方式正确加载了正确的包：

```
<context:property-placeholder 
        location="WEB-INF/project${my.environment}.properties" /> 
```

...其中“ **my.environment** ”是**Tomcat 启动配置参数**：

```
-Dmy.environment=PRO   or  -Dmy.environment=DEV 
```

在这两个属性文件中，我有下一个**属性**声明：

```
cfg.i18n.encoding1=UTF-8 
```

*问题*来了：

**如何在我的 .xhtml 页面中使用该属性？**

```
<?xml version="1.0" encoding="${cfg.i18n.encoding}" ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core">

    <f:view contentType="text/html">

        <h:head>
            <meta http-equiv="Content-Type" content="text/html; charset=${cfg.i18n.encoding}" />
            <title>Home</title>
        </h:head>
        <h:body>
            HELLO!
        </h:body>

    </f:view>
</html> 
```

谢谢！

* * *

```
/**
 * Servlet 2.3/2.4 Filter that allows one to specify a character encoding for
 * requests. This is useful because current browsers typically do not set a
 * character encoding even if specified in the HTML page or form.
 *
 * <p>This filter can either apply its encoding if the request does not
 * already specify an encoding, or enforce this filter's encoding in any case
 * ("forceEncoding"="true"). In the latter case, the encoding will also be
 * applied as default response encoding on Servlet 2.4+ containers (although
 * this will usually be overridden by a full content type set in the view).
 *
 * @author Juergen Hoeller
 * @since 15.03.2004
 * @see #setEncoding
 * @see #setForceEncoding
 * @see javax.servlet.http.HttpServletRequest#setCharacterEncoding
 * @see javax.servlet.http.HttpServletResponse#setCharacterEncoding
 */
public class CharacterEncodingFilter extends OncePerRequestFilter {

    private String encoding;

    private boolean forceEncoding = false;

    /**
     * Set the encoding to use for requests. This encoding will be passed into a
     * {@link javax.servlet.http.HttpServletRequest#setCharacterEncoding} call.
     * <p>Whether this encoding will override existing request encodings
     * (and whether it will be applied as default response encoding as well)
     * depends on the {@link #setForceEncoding "forceEncoding"} flag.
     */
    public void setEncoding(String encoding) {
        this.encoding = encoding;
    }

    /**
     * Set whether the configured {@link #setEncoding encoding} of this filter
     * is supposed to override existing request and response encodings.
     * <p>Default is "false", i.e. do not modify the encoding if
     * {@link javax.servlet.http.HttpServletRequest#getCharacterEncoding()}
     * returns a non-null value. Switch this to "true" to enforce the specified
     * encoding in any case, applying it as default response encoding as well.
     * <p>Note that the response encoding will only be set on Servlet 2.4+
     * containers, since Servlet 2.3 did not provide a facility for setting
     * a default response encoding.
     */
    public void setForceEncoding(boolean forceEncoding) {
        this.forceEncoding = forceEncoding;
    }

    @Override
    protected void doFilterInternal(
            HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)
            throws ServletException, IOException {

        if (this.encoding != null && (this.forceEncoding || request.getCharacterEncoding() == null)) {
            request.setCharacterEncoding(this.encoding);
            if (this.forceEncoding) {
                response.setCharacterEncoding(this.encoding);
            }
        }
        filterChain.doFilter(request, response);
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:21:06.807

我认为没有办法直接引用 JSF 页面中的配置属性，因为`PropertyPlaceholderConfigurer`它没有为此公开任何 API。

你可以试试这个技巧。像这样创建一个常规的 Java bean：

```
public class Config {

  private String charset;

  /* getters + setters */

} 
```

然后将其添加到您的 Spring 配置中，如下所示：

```
<bean id="config" class="com.example.myapp.Config">
  <property name="charset"><value>${cfg.i18n.encoding1}</value></property>
</bean> 
```

然后你应该能够像这样读取属性：

```
<meta http-equiv="Content-Type" content="text/html; charset=#{config.charset}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T06:04:18.303

您可以使用 SpringFramework 提供的过滤器来集中 html 文件的编码。您可以在 web.xml 文件中定义此过滤器，如下所示。

```
 <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/</url-pattern>
    </filter-mapping> 
```

希望这对您有所帮助。干杯。

# javascript - 使用 jQuery 正确更改 SVG 线坐标

> ID：10934068
> 
> 赞同：1
> 
> 时间：2012-06-07T14:40:43.270
> 
> 标签：javascript, jquery, svg, attr, jquery-svg

我正在尝试更改 SVG 线的 Y 坐标之一，我正在使用 jQuery 和 SVG 插件 + 动画插件。我之前一直在为线条制作动画，但这里的功能需要简单地改变位置，

这行得通；

```
$(strings[i]).animate({ 
   svgY1 : 150
}, 0); 
```

这没有；

```
$(strings[i]).attr( 
   'svgY1', '150'
); 
```

我可以看到我**不应该**在这里使用动画，但我不知道为什么 attr 或 css 在这种情况下不起作用？我认为问题在于 svgY1 可能不是识别该坐标的正确方法，但我被卡住了。

此时所有相关元素都是静态的，我很确定这不是来自另一个功能的干扰。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:04:57.233

首先，为行提供唯一标识符：

```
svg.line(g, 450, 120, 550, 20, {strokeWidth: 5, id: '123'}); 
```

现在使用 svg manager 的 change 功能：

```
svg.change(svg.getElementById('123'), { y1: 150 }); 
```

# flash - 在 Flash Web 横幅中创建链接

> ID：10934076
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:41:24.500
> 
> 标签：flash, hyperlink, banner-ads

这是我在上、下、下、击上具有相同属性的按钮。然后我回到时间线，将按钮实例命名为与按钮名称相同。在该按钮的第一帧上，我添加了一个 2.0 动作，是这个

```
on (release) {
    getURL("http://www.example.com/", "_blank");
} 
```

当我运行语法检查器时，它会这样说。

```
1087: Syntax error: extra characters found after end of program. 
```

没有隐藏字符，因为我删除了所有空格然后替换它们。它是从stackoverflow复制的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:27:43.243

通过选择按钮将其添加到实际时间线的框架中，而不是将其添加到按钮的第一帧。（该动作是按钮动作而不是框架动作，因此不应将其放置在框架上，而应放置在其所在框架中的按钮上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:00:07.207

我发现我没有在发布菜单中将其设置为操作 2。这解决了问题。

# asp.net-mvc - 升级到 MVC4 RC：没有 MediaTypeFormatter 可用于从媒体类型为“未定义”的内容中读取类型为“TestRequestModel”的对象

> ID：10934077
> 
> 赞同：8
> 
> 时间：2012-06-07T14:41:27.230
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, model-binding

我一直在使用 MVC4 测试版，目前正在努力升级到最近发布的 RC 版本。

**似乎模型绑定复杂请求类型已经改变**，但我无法弄清楚我做错了什么/做错了什么。

例如，假设我有以下 API 控制器：

```
public class HomeApiController : ApiController
{
    public TestModel Get()
    {
        return new TestModel
        {
            Id = int.MaxValue,
            Description = "TestDescription",
            Time = DateTime.Now
        };
    }
} 
```

这产生了预期的结果：

```
<TestModel xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/xxxx">
    <Description>TestDescription</Description>
    <Id>2147483647</Id>
    <Time>2012-06-07T10:30:01.459147-04:00</Time>
</TestModel> 
```

现在说我只是更改签名，接受请求类型，如下所示：

```
public TestModel Get(TestRequestModel request)
{
    ...

public class TestRequestModel
{
    public int? SomeParameter { get; set; }
} 
```

我现在收到以下错误：

```
<Exception xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/System.Web.Http.Dispatcher">
    <ExceptionType>System.InvalidOperationException</ExceptionType>
    <Message>
        No MediaTypeFormatter is available to read an object of type 'TestRequestModel' from content with media type ''undefined''.
    </Message>
    <StackTrace>
    at System.Net.Http.HttpContentExtensions.ReadAsAsync[T](HttpContent content, Type type, IEnumerable`1 formatters, IFormatterLogger formatterLogger) at System.Net.Http.HttpContentExtensions.ReadAsAsync(HttpContent content, Type type, IEnumerable`1 formatters, IFormatterLogger formatterLogger) at System.Web.Http.ModelBinding.FormatterParameterBinding.ExecuteBindingAsync(ModelMetadataProvider metadataProvider, HttpActionContext actionContext, CancellationToken cancellationToken) at System.Web.Http.Controllers.HttpActionBinding.<>c__DisplayClass1.<ExecuteBindingAsync>b__0(HttpParameterBinding parameterBinder) at System.Linq.Enumerable.WhereSelectArrayIterator`2.MoveNext() at System.Threading.Tasks.TaskHelpers.IterateImpl(IEnumerator`1 enumerator, CancellationToken cancellationToken)
    </StackTrace>
</Exception> 
```

我查看了在 中引发此异常的源代码`HttpContentExtensions`，但它看起来像是检查内容标题（我应该有），如果没有，它会尝试从`MediaTypeFormatter`集合中获取格式化程序它具有特定类型（它不能）然后抛出。

**还有其他人经历过吗？我缺少一些全球注册？**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-08T12:16:20.397

我看到您的原始问题已得到回答，但要回答另一个问题，模型绑定在 RC 中有所改变。

[http://weblogs.thinktecture.com/cweyer/2012/06/aspnet-web-api-changes-from-beta-to-rc.html](http://weblogs.thinktecture.com/cweyer/2012/06/aspnet-web-api-changes-from-beta-to-rc.html)

这个链接有一些关于它的细节。但总结一下似乎影响您的更改，模型绑定从请求的主体或 uri 中提取其值。对于以前的版本也是如此，但是对于候选版本，MVC4 默认情况下会在 body 中查找复杂类型，并在 uri 中查找值类型。

因此，如果您提交的请求中包含“SomeParameter”键的正文，您应该会看到它已绑定。或者，如果您将声明更改为：

```
 public TestModel Get(int? someParameter)
 {

 } 
```

值得庆幸的是，团队预见到了这方面的潜在问题，并为我们留下了可以用来覆盖此行为的属性。

```
 public TestModel Get([FromUri]TestRequestModel request)
 {

 } 
```

这里的关键是`[FromUri]`告诉模型绑定器在 uri 中查找值。`[FromBody]`如果您想在请求的正文中放置一个值类型，也可以这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:18:40.113

我们看到了同样的事情。在我们的例子中，问题是一个复杂的对象被传递到一个 get 方法中。我们需要在该方法的参数中添加一个 [FromUri] 属性。

[http://forums.asp.net/t/1809925.aspx/1?GET+requests+with+complex+object+as+input+parameter](http://forums.asp.net/t/1809925.aspx/1?GET+requests+with+complex+object+as+input+parameter)

```
public class SearchController : ApiController
{
    // added [FromUri] in beta to RC transition otherwise media type formatter error
    public IQueryable<SearchResultEventModel> Get( [FromUri]SearchSpecModel search )
    {
        // ...
    }
} 
```

# ruby-on-rails - 如何从 Rails 应用程序内部设置系统调用的路径？

> ID：10934081
> 
> 赞同：2
> 
> 时间：2012-06-07T14:41:46.307
> 
> 标签：ruby-on-rails, ruby-on-rails-3, phantomjs

我正在尝试从 rails 执行 phantom.js 模块。到目前为止，我已经成功安装了二进制文件，并且 phantomjs 的路径似乎工作正常。

但是，当我尝试使用反引号从 Rails 应用程序运行它时（例如：phantomjs rasterize.js [http://google.com](http://google.com) 1.jpg），它显示没有这样的文件或目录。

我认为原因是它找不到 rasterize.js 的路径我尝试将 rasterize.js 文件放在 #{Rails.root} 中，在公用文件夹内，在控制器文件夹内，但没有任何效果。

我怎么解决这个问题？

====

更新：为了澄清，我发布了哪些代码在我的控制器中有效，哪些无效。

```
def create
  'phantomjs'
end 
```

<= 上面的代码没有吐出路径错误，当我从浏览器发送请求时，phantomjs 进程*确实*被调用，导致在服务器端打开控制台。

```
def create
  'phantomjs rasterize.js'
end 
```

<= 这不起作用，它吐出错误说“没有这样的文件或目录”，这就是为什么我认为它与 rails 无法找到 rasterize.js 的路径有关。我尝试将 rasterize.js 放在公用文件夹、控制器文件夹和主目录中：#{Rails.root}，但它总是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:22:45.677

有趣......我一直在尝试各种组合，最后遇到了一个有效的案例，这不是我所期望的：

```
%x("/usr/local/bin/phantomjs /Users/e/Dropbox/Projects/rails/screenshots/rasterize.js http://google.com app/assets/images/2709.jpg") 
```

<= 这不起作用。

```
system("/usr/local/bin/phantomjs /Users/e/Dropbox/Projects/rails/screenshots/rasterize.js http://google.com app/assets/images/2709.jpg") 
```

<= 这行得通。

我认为这些在内部都是一样的，除了返回值？也许我错了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T21:59:58.737

假设您的命令是`cmd`。很高兴知道`%(cmd)`并且`exec(cmd)`，更改您正在使用的进程，因此如果您在 rails 中并更改了目录，它将退出。另一方面` `cmd``又`system(cmd)`会让你继续工作。

我从这个博客中了解到这一点。[http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html](http://blog.jayfields.com/2006/06/ruby-kernel-system-exec-and-x.html)

# javacc - JavaCC 中是否不支持速记字符类（例如 \d）

> ID：10934082
> 
> 赞同：1
> 
> 时间：2012-06-07T14:41:52.940
> 
> 标签：javacc

我正在尝试学习使用 JavaCC，并意识到它支持正则表达式。叫我懒惰，但我认为定义数字的默认/常用方法有点太长了：

```
TOKEN : { < #DIGITS : (["0" - "9"])+ >} 
```

我尝试使用速记字符类，例如：

```
TOKEN : { < #DIGITS : (\d)+ >} 
```

但“编译器编译器”似乎不喜欢它。我得到速记字符的词汇错误。我找不到关于此事的任何文档，所以我不确定我是否做错了什么或者它根本不受支持。如果有人可以确认/否认我的假设，即 javacc 不能很好地使用速记字符类，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T12:06:28.343

您发现它不受支持是正确的。JavaCC 中的正则表达式仅由字符串文字、对其他正则表达式的引用以及对预定义正则表达式<EOF> 的引用组成。

但是，您使用那里的代码所做的是创建自己的快捷方式。数字符号表示该符号是私有的，即只能在正则表达式中使用。因此，将其定义为 TOKEN : { < #D : (["0" - "9"])+ > } 意味着您可以在其他令牌定义中使用 < D >。

二进制分发包中包含的示例语法 javacc.jj 是官方语法，因此查看此文件您可以看到该语法可解析的内容。输出似乎本质上是一个语法验证器。

# excel - excel-java odbc 的代码（将列名与其中的点进行比较）给出“未找到列”

> ID：10934087
> 
> 赞同：0
> 
> 时间：2012-06-07T14:41:59.180
> 
> 标签：excel, jdbc, connectivity

我正在通过 odbc 驱动程序连接 excel 文件和 java。
建立连接（并且可以正常工作）后，我想从列中获取值`called Net amount 2.5%`。

```
 while(rs.next())
 {  
    String e=rs.getString("Net Amount 2.5%"); 
    JOptionPane.showMessageDialog(null,e ) 
 } 
```

我得到的错误是`column not found` 在网上研究了一下后，我知道mysql不允许`.`列名。
请建议一个代码以从 column 获取值`Net Amount 2.5%`。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T07:02:25.573

A solution in that case is to use the index of the column instead of its name :

```
rs.getString(i) 
```

# java - 使用 NamedQuery 进行内部联接？

> ID：10934098
> 
> 赞同：1
> 
> 时间：2012-06-07T14:42:24.853
> 
> 标签：java, sql, inner-join, entitymanager, named-query

我需要从三个不同的表中获取数据并放入一个列表中。我想知道如何使用namedQuery 做到这一点？我已经看到可以通过在线搜索来实现，但我无法让它发挥作用。

```
SELECT
    Customer.name,
    Customer.adress,
    Orders.date,
    Orders.order_id,
    Product.product_name,
    Product.price
FROM
    Orders
    INNER JOIN Customer ON Customer.customer_id=Orders.customer_id
    INNER JOIN Product ON Product.product_id=Orders.product_id
ORDER BY
    Orders.date 
```

这就是我想要转换为namedQuery 的内容。如果有人能把我踢向正确的方向，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:50:11.733

似乎我对名为查询的术语不熟悉。但这就是你在 SQL 中的做法

```
CREATE VIEW view_name AS
SELECT
    Customer.name,
    Customer.adress,
    Orders.date,
    Orders.order_id,
    Product.product_name,
    Product.price
FROM
    Orders
    INNER JOIN Customer ON Customer.customer_id=Orders.customer_id
    INNER JOIN Product ON Product.product_id=Orders.product_id
ORDER BY
    Orders.date 
```

然后你可以这样称呼它

```
SELECT * FROM view_name 
```

但请注意，视图中的视图对性能来说很糟糕。

# java - Android 和 JFileChooser

> ID：10934099
> 
> 赞同：3
> 
> 时间：2012-06-07T14:42:29.423
> 
> 标签：java, android, android-4.0-ice-cream-sandwich, jfilechooser, android-2.3-gingerbread

我开发了一个桌面应用程序，允许用户从他们的手机中提取图像。

当我第一次开始这个项目时，我的 android 正在运行 Gingerbread。当我通过 USB 将手机插入笔记本电脑时，它会显示为“具有可移动存储的设备”。因此，JFileChooser 会选择它。

```
nwdir = new JFileChooser();
            nwdir.setCurrentDirectory(new java.io.File("C:\\"));
            nwdir.setDialogTitle(choosertitle);
            nwdir.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
            nwdir.setAcceptAllFileFilterUsed(true); 
```

但是，我最近将手机的操作系统升级为 Icecream，它现在在桌面上显示为“便携式设备”。这是 JFileChooser 看不到的东西？！

有没有人对如何解决这个问题有任何建议？我打算回滚手机的操作系统，但这在一定程度上限制了应用程序的设备支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:55:29.237

Android 4.0 Ice Cream Sandwich 中的默认传输模式已从 USB 大容量存储模式更改为不使用标准文件系统挂载的 MTP（媒体传输协议）。在某些手机上可以[更改 USB 模式](http://www.jayceooi.com/2012/03/14/how-to-enable-usb-mass-storage-on-android-4-0-ics-samsung-galaxy-s2/)，而在其他手机上可能需要[安装 apk 才能启用它](http://knowmydroid.com/blog/enable-usb-mass-storage-mode-in-ice-cream-sandwich)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T14:05:57.890

我通过这样做找到了解决方法....设置>无线和网络> USB实用程序并单击按钮>然后（并且仅在那时）插入USB电缆

# c# - BitmapSource 指向本地文件

> ID：10934102
> 
> 赞同：4
> 
> 时间：2012-06-07T14:42:39.493
> 
> 标签：c#, xaml, bitmap, windows-8

为 Metro Style 应用程序实现本地缓存的最佳模式是什么，以便在应用程序在线使用时图像可以在后台缓存并在应用程序离线时提供图像？

在发现无法访问 Internet 时，我们如何将 BitmapSource 设置为本地文件？使用 new Uri(localpath, UriKind.Absolute) 不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:27:51.837

图像是否已经下载？如果是这样，它们是否在“本地”文件夹中？

如果是这样，您可以像这样从路径构建 BitmapImage

```
var m_Image = new BitmapImage(new Uri("ms-appdata:///local/" + ImageFileName)); 
```

*编辑*

如果您的文件存储在包中作为“永远无法访问且无法下载任何内容”备用，则 Uri 将类似于

```
var m_Image = new BitmapImage(new Uri("ms-appx:///Assets/" + FallBackImageFileName)); 
```

# java - java Iterable接口为什么不能带泛型通配符？或者：为什么我不能重写 iterator() 方法为子类返回一个 Iterator？

> ID：10934103
> 
> 赞同：4
> 
> 时间：2012-06-07T14:42:39.460
> 
> 标签：java, generics, overriding, iterable

我有一些类：SearchResponse、SearchResponseHit、SpecialSearchResponse（扩展 SearchResponse）和 SpecialSearchResponseHit（扩展 SearchResponseHit）。

SearchResponse 看起来像这样：

```
public class SearchResponse implements Iterable<SearchResponseHit> {

    [...]

    public Iterator<SearchResponseHit> iterator() {
        return searchResponseHits.iterator();
    }
} 
```

这使我可以在 foreach 循环中使用 SearchResponse 的实例，如下所示：

```
for (SearchResponseHit hit : mySearchResponse) {
    [...]
} 
```

现在，我想做但不知道怎么做，是在我有一个 SpecialSearchResponse 实例时编译这段代码：

```
for (SpecialSearchResponseHit specialHit : mySpecialSearchResponse) {
    [...]
} 
```

这给了我以下编译器错误：

```
Type mismatch: cannot convert from element type SearchResponseHit to SpecialSearchResponseHit 
```

如果我尝试将此代码添加到 SpecialSearchResponse：

```
public Iterator<SpecialSearchResponseHit> iterator() {
    [...]
} 
```

...我得到错误：

```
The return type is incompatible with Iterable<SearchResponseHit>.iterator() 
```

我尝试将 SearchResponse 中的方法更改为：

```
 public Iterator<? extends SearchResponseHit> iterator() {
        return searchResponseHits.iterator();
    } 
```

...但这给了我错误：

```
The return type is incompatible with Iterable<SearchResponseHit>.iterator() 
```

然后我尝试将类定义更改为：

```
public class SearchResponse implements Iterable<? extends SearchResponseHit> 
```

...但这给了我这个错误：

```
 The type SearchResponse cannot extend or implement Iterable<? extends SearchResponseHit>. A supertype may not specify any wildcard 
```

解决这个问题的最好（也是最漂亮）的方法是什么？还是我必须跳过 foreach 方法（以及其他在幕后使用 Iterable 接口的函数）并编写一个 getSpecialIterator() 方法，然后直接使用迭代器？

问候 /J

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T14:51:09.793

一种方法是通过以下方式声明各种类：

```
public class SearchResponse<T  extends SearchResponseHit> implements Iterable<T> {
    List<T> searchResponseHits;

    public Iterator<T> iterator() {
        return searchResponseHits.iterator();
    }
}

public class SearchResponseHit {}

public class SpecialSearchResponse extends SearchResponse<SpecialSearchResponseHit> {}
public class SpecialSearchResponseHit extends SearchResponseHit {} 
```

这样你就可以这样称呼他们：

```
 SearchResponse<SearchResponseHit> sr = new SearchResponse<SearchResponseHit>();
    for (SearchResponseHit h : sr) {}

    SpecialSearchResponse ssr = new SpecialSearchResponse();
    for (SpecialSearchResponseHit h : ssr) {} 
```

但这在类中引入了泛型，`SearchResponse`您不能再简单地声明`SearchResponse sr = new SearchResponse()`（没有警告和强制转换）。

* * *

**更新**
根据您的评论，您也可以创建一个包含泛型样板的通用超类 - 您可以将其设为抽象并将包私有，以便您的类的用户看不到它：

```
abstract class AbstractSearchResponse<T  extends SearchResponseHit> implements Iterable<T>{
    List<T> searchResponseHits;

    public Iterator<T> iterator() {
        return searchResponseHits.iterator();
    }
}

public class SearchResponse extends AbstractSearchResponse<SearchResponseHit> { }
public class SpecialSearchResponse extends AbstractSearchResponse<SpecialSearchResponseHit> {} 
```

现在您可以根据需要调用 2 个孩子：

```
SearchResponse sr = new SearchResponse();
for (SearchResponseHit h : sr) {}

SpecialSearchResponse ssr = new SpecialSearchResponse();
for (SpecialSearchResponseHit h : ssr) {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-19T20:51:29.060

接受的答案有很好的解决方法，但至于为什么这是一个问题，这是因为 Iterable 定义不明确。迭代器方法的签名应该是`Iterator<? extends T> iterator()`. 由于所有的`Iterator<T>`'s 方法仅以协变的方式使用类型参数 T，`Iterator<T>`等价于`Iterator<? extends T>`，但通配符版本更灵活。反对这样做的唯一理由是，如果您认为将来会添加 T 的逆变用法（`insert(T obj)`例如）。但是，这样做可能无论如何都需要一个新界面。

# .htaccess - htaccess 301 重定向无法正常工作

> ID：10934108
> 
> 赞同：0
> 
> 时间：2012-06-07T14:42:51.983
> 
> 标签：.htaccess, http-status-code-301

我想从 [http://www.jobslanda.com](http://www.jobslanda.com)重定向到[http://www.jobslanda.com/](http://www.jobslanda.com/)

我正在尝试在 htaccess 中使用此代码，但它不起作用。

```
Redirect permanent /http://www.alexandria-garagedoor.com http://www.alexandria-garagedoor.com/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:50:12.077

尝试：

```
RewriteCond %{HTTP_HOST} ^jobslanda\.com$ 
RewriteRule ^(.*)$ http://www.jobslanda.com/$1 [L,R=301] 
```

# open-source - 逆向工程开源项目找方法

> ID：10934109
> 
> 赞同：1
> 
> 时间：2012-06-07T14:42:53.813
> 
> 标签：open-source, reverse-engineering, sequence-diagram

我有用 c++ 完成的开源项目，它很大，现在没有文档可以“仅”调试它并理解它的流程，这是可能的，但非常困难。我正在寻找定义明确的工作方法和方式，以使这个过程更容易。
像某种可以帮助我绘制对象和类的关系的工具。
**在挖掘了更多之后更新**
好，我知道它的正确名称是：
序列图，所以我正在寻找如何从 c++ 代码中获取序列图，
它必须是免费工具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:47:30.333

在这里你可以找到你的答案，系统序列图也许对你有帮助。如果回答不够，请告诉我更多细节:)

[http://www.devcurry.com/2010/03/generate-sequence-diagrams-in-visual.html](http://www.devcurry.com/2010/03/generate-sequence-diagrams-in-visual.html)

这个链接也很有用：

[http://weblogs.asp.net/gunnarpeipman/archive/2009/11/20/visual-studio-2010-generating-sequence-diagrams-on-the-fly.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2009/11/20/visual-studio-2010-generating-sequence-diagrams-on-the-fly.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:55:37.000

[从 Scientific Toolworks对 C++](http://www.scitools.com/)的理解具有良好的声誉。我没有具体的经验。

# javascript - LinkBut ton + showmodaldialog 不起作用

> ID：10934110
> 
> 赞同：0
> 
> 时间：2012-06-07T14:42:59.257
> 
> 标签：javascript, asp.net, vb.net, showmodaldialog

更新表单时在链接按钮上打开 window.showModalDialog 的西方方式是什么？

我在表单上有一个链接按钮，允许我更新数据，我希望能够检查在这种情况下数据是否更新，客户端的参数状态是活动的我希望能够打开一个窗口来填写更多信息。

```
 Public Function OpenWindowRquest(ByVal URL As String) As String
    If accountMode = "1" Then
       Return "window.showModalDialog('" & Page.ResolveUrl(Server.UrlEncode(URL)) & "', window,'resizable:yes; scroll:on; status:yes; dialogWidth:750px; dialogHeight:350px; center:yes');"
                Else
        accountMode = ""
        Return ""
    End If 
```

在 aspx 方面我有

```
<asp:LinkButton id="UpdateButton" runat="server" commandName="Update" Text="Update" OnClientClick='<%# OpenWindowRequest("myurl.aspx") %>'></asp:LinkButton> 
```

我还尝试在 FormUpdating 事件上调用函数 OpenWindowRequest 但它不起作用，窗口未打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:38:23.290

您的链接按钮未正确呈现。请在 Page_Prerender 后面的代码中设置您的 OnClientClick 属性。此外，您在标记和代码中有不同的方法名称，您拼错了“Rquest”。

```
UpdateButton.OnClientClick = OpenWindowRquest("myurl.aspx") 
```

# python - 大循环上的多处理、写入文件和死锁

> ID：10934112
> 
> 赞同：0
> 
> 时间：2012-06-07T14:43:00.460
> 
> 标签：python, multiprocessing

我对下面的代码有一个非常奇怪的问题。当`numrows = 10`Process 循环完成自身并继续完成时。如果不断增长的列表变得更大，它就会陷入僵局。为什么会这样，我该如何解决？

```
import multiprocessing, time, sys

# ----------------- Calculation Engine -------------------
def feed(queue, parlist):
    for par in parlist:
        queue.put(par)

def calc(queueIn, queueOut):
    while True:
        try:
            par = queueIn.get(block = False)
            print "Project ID: %s started. " % par
            res = doCalculation(par)
            queueOut.put(res)

        except:
            break

def write(queue, fname):
    print 'Started to write to file'
    fhandle = open(fname, "w")
    while True:
        try:
            res = queue.get(block = False)
            for m in res:
                print >>fhandle, m
        except:
            break
    fhandle.close()
    print 'Complete writing to the file'

def doCalculation(project_ID):
    numrows = 100
    toFileRowList = []

    for i in range(numrows):
        toFileRowList.append([project_ID]*100)
        print "%s %s" % (multiprocessing.current_process().name, i)

    return toFileRowList

def main():
    parlist     = [276, 266]

    nthreads    = multiprocessing.cpu_count()
    workerQueue = multiprocessing.Queue()
    writerQueue = multiprocessing.Queue()

    feedProc = multiprocessing.Process(target = feed , args = (workerQueue, parlist))
    calcProc = [multiprocessing.Process(target = calc , args = (workerQueue, writerQueue)) for i in range(nthreads)]
    writProc = multiprocessing.Process(target = write, args = (writerQueue, 'somefile.csv'))

    feedProc.start()
    feedProc.join ()

    for p in calcProc:
        p.start()
    for p in calcProc:
        p.join()

    writProc.start()
    writProc.join()

if __name__=='__main__':
    sys.exit(main()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:57:36.460

我认为问题是队列缓冲区被填满，因此您需要先从队列中读取，然后才能将其他内容放入其中。例如，在您的`feed`线程中，您有：

```
queue.put(par) 
```

如果你在不阅读的情况下继续放置很多东西，这将导致它阻塞，直到释放缓冲区，但问题是你只释放线程中的缓冲区，而在你加入阻塞线程`calc`之前它不会开始。`feed`

因此，为了让您的`feed`线程完成，应该释放缓冲区，但在线程完成之前不会释放缓冲区:)

尝试组织您的队列访问更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:15:29.503

feedProc 和 writeProc 实际上并没有与程序的其余部分并行运行。当你有

```
proc.start()
proc.join () 
```

您开始该过程，然后`join()`立即等待它完成。在这种情况下，多处理没有任何好处，只有开销。尝试在加入之前立即启动所有进程。这也将产生您的队列被清空的效果，并且您不会死锁。

# c++ - 在 std::queue 中存储可变大小的块？

> ID：10934113
> 
> 赞同：2
> 
> 时间：2012-06-07T14:43:12.357
> 
> 标签：c++, stl

我正在编写一个消息队列，旨在通过套接字进行操作，出于各种原因，我希望队列内存存在于用户空间中，并有一个线程将队列排入各自的套接字。

消息将是内存的小块（可能在 4 到 4K 字节之间），所以我认为避免使用 malloc() 内存是避免碎片的必要条件。

操作模式是用户调用类似 send(msg) 的东西，然后将消息复制到队列内存中，并在方便的时间通过套接字发送。

我的问题是，是否有一种“好”的方法可以将可变大小的数据块存储在 std::queue 或 std::vector 之类的东西中，或者我是否必须走一条将内存池放在一起并处理我的自己配置出来的那个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:54:16.367

您可以创建一个大的循环缓冲区，将数据从块复制到该缓冲区，并将对存储`{start pointer, length}`在队列中。由于块的分配顺序与它们被消耗的顺序相同，因此检查重叠的数学应该相对简单。

如今，内存分配器已经变得相当好，所以如果基于“普通”分配器的解决方案表现出相当的性能，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:45:10.443

您可以将内存池负担委托给[Boost.Pool](http://www.boost.org/doc/libs/1_49_0/libs/pool/doc/html/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:55:27.083

如果它们低于 4K，您可能根本没有碎片。你没有提到你要运行你的应用程序的操作系统，但如果是 Linux 或 Windows，它们可以处理这种大小的块。至少您可以在编写自己的池之前检查这一点。例如看这个问题：[关于小块分配器的问题](https://stackoverflow.com/questions/2415373/small-block-allocator-on-linux-or-redhat-linux-to-avoid-memory-fragmentation)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:57:20.593

除非您希望有*很多*排队的数据包，否则我可能只是创建一个 池`vector<char>`，每个池中保留（比如说）8K。处理完一个数据包后，请回收该向量而不是将其丢弃（即，将其放回池中，准备再次使用）。

如果您确实确定您的数据包不会超过 4K，那么您显然可以将其减少到 4K 而不是 8K——但假设这是一个长期运行的程序，您可能从最小化重新分配中获得更多收益，而不是从最小化大小中获得更多的单个向量。

一个明显的替代方法是在分配器级别处理此问题，因此您只是重用内存块而不是重用向量。这将使调整内存使用变得更容易一点。我仍然会预先分配块，但只有几个大小——比如 64 字节、256 字节、1K、2K、4K（可能还有 8K）。

# android - 短信计费安卓

> ID：10934116
> 
> 赞同：3
> 
> 时间：2012-06-07T14:43:23.207
> 
> 标签：android, sms, in-app-purchase, in-app-billing, billing

是否有任何服务可以让我作为开发人员通过 SMS 为用户（适用于 Android）实现购买？我找到了一个叫Zong的东西，但他们似乎还没有发布SDK？我相信谷歌的应用内计费系统只支持信用卡？

有哪些好的计费服务可以使用，易于实施，用户友好并且在金钱方面有足够的协议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:13:56.353

您是否有特殊原因要通过短信计费？或许您可以找到一个解决方案来做次佳的事情，运营商计费？

有很多移动支付提供商，我整理了这份各种移动货币化公司的列表以及一些简要信息[https://docs.google.com/spreadsheet/ccc?key=0AtLMbkIIPH0VdEs4M1Z3anNmU1JOY2xXejN1MVdMaXc#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AtLMbkIIPH0VdEs4M1Z3anNmU1JOY2xXejN1MVdMaXc#gid=0)

我知道 Bango 肯定会提供运营商计费，请查看我链接到的文档的“应用内计费”类别中的其他一些提供商。

它还很大程度上取决于您需要/想要的地理覆盖范围。提供商的覆盖范围各不相同，因此也要考虑这一点（即使 Android 应用计费的覆盖范围也有限）。

此外，一些网络运营商通过运营商计费提供应用内支付 API。

Telefonica/O2 有他们的[Bluevia APIs](https://bluevia.com/en/)用于支付和其他一些东西，唯一的缺点是这只能用于欧洲和南美某些地区的 Telefonica/O2 客户。

# google-maps-api-3 - 使用自定义颜色在 Google Maps API 中基于 pincode 突出显示州/城市/区域

> ID：10934117
> 
> 赞同：3
> 
> 时间：2012-06-07T14:43:24.107
> 
> 标签：google-maps-api-3

我希望使用我定义的自定义颜色突出显示基于 pincode 的州/城市/区域。可能吗？

提前致谢。

# c# - javascript的返回值应该分配给C#中的一个数组

> ID：10934126
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:43:53.593
> 
> 标签：c#, javascript, asp.net, arrays, json

我有一个返回数组的 javascript 函数。

我想知道

*   (a) 如何在 OnInit 或 Onload 中调用 Javascript 函数
*   (b) javascript 函数返回一个数组，我希望它存储在我的 c# 代码中的一个数组中。

请建议。

谢谢。

Update1：​​Javascript 函数如下所示。

```
function RenderUrl() 
{
    var url = "http://myurl.com/mypage?Id=420&Width=30"; //this is a dummy url.

    var qsBegin = url.indexOf("?");
    var qsPattern = new RegExp("[?&]([^=]*)=([^&]*)", "ig");
    var match = qsPattern.exec(url);
    var params = new Array();

    while (match != null) 
        {
            var matchID = match[1];
                if ( matchID.charAt(0) == "&" ) 
            {
                    matchID = matchID.substr(1);
                }

                if ( params[match[1]] != null && !(params[match[1]] instanceof Array) ) 
            {
                    var subArray = new Array();
                    subArray.push(params[match[1]]);
                    subArray.push(unescape(match[2]));
                    params[match[1]] = subArray;
                }
            else if ( params[match[1]] != null && params[match[1]] instanceof Array ) 
            {
                    params[match[1]].push(unescape(match[2]));
            }
            else 
            {
                params[match[1]]=unescape(match[2]);
                }
            match = qsPattern.exec(url);
        }
    return params;
} 
```

**更新 2：到目前为止我的 c# 代码（没有按预期工作，但我目前正在检查）**

```
 private void ParseUrl(string Url)
{
    int WhereToBegin = Url.IndexOf("?");
    string pattern = @"[?&]([^=]*)=([^&]*)";
    Regex rgx = new Regex(pattern, RegexOptions.IgnoreCase);
    MatchCollection matches = rgx.Matches(Url);
    while (matches != null)
    {
        string matchID = matches[0].ToString();
        if (matchID.Substring(0, 1) == "&")
        {
            matchID = matchID.Substring(1);
        }

    //Push to the new array named PARAMS here (under construction)
      ..
      ..    
    //End array construction.

        matches = rgx.Matches(Url);
    }
    //Finally return the array once it is working fine.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:18:57.727

您发布的 javascript 只是从页面的 URL 中提取参数。您不需要使用 javascript 在 ASP.NET 中获取该信息，您可以通过查看`Request.QueryString`（以及其他方式）直接从 C# 获取它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:56:31.980

上次我检查时，您不能从服务器端代码调用客户端代码。

# python - Django FilteredSelectMultiple 不会验证

> ID：10934130
> 
> 赞同：0
> 
> 时间：2012-06-07T14:44:01.987
> 
> 标签：python, django

我正在尝试将我的多对多脚本字段更改为使用 FilteredSelectMultiple 小部件。它适用于验证，它说“选择一个有效的选择。12 不是可用的选择之一。” 12 是该 ResponseAction 的正确数据库 ID。

形式：

```
class ResponseConfigurationForm(ModelForm):
    scripts=forms.ModelMultipleChoiceField(queryset=ResponseAction.objects.all(),widget=FilteredSelectMultiple("ResponseAction",False,attrs={'rows':'5'}))

class Meta:
    model = ResponseConfiguration 
```

脚本模型：

```
scripts = models.ManyToManyField('ResponseAction') 
```

我找不到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:13:02.160

问题是 memcached 在内存中保留了一些表，因此它失败了。

解决方案删除应用程序的所有表。Syncdb 并重新启动 memcached。

# javascript - 将已加载的 JS 拉入局部变量

> ID：10934132
> 
> 赞同：0
> 
> 时间：2012-06-07T14:44:12.080
> 
> 标签：javascript

链接到 .js 的源目前无法通过 DOM 获得。

```
var b = document.createElement("script");
b.type= "text/javascript";
b.src = "foo/source/ArcJ.js"  // dynamically load .js file 
```

我能做吗

```
var c = b.src // probably not 
```

我认为这只会给我路径...我想要源...即字符串中的所有代码。

有没有办法在不使用 ajax 的情况下做到这一点？这不应该是一个简单的 DOM Pull ...

```
document.getElementById(b.id).source_code 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:46:57.027

.src 是 url，所以你只需使用 ajax 请求从中加载 url...

```
$.get($("script[src*=jquery]").attr("src"),function(data){
    console.log(data)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:53:16.113

摘自[如何从网页获取源代码？](https://stackoverflow.com/questions/10932226/get-source-code-from-javascript/10933419#10933419)（我写的）

javascript中有三种方式：

**首先，通过 XMLHttpRequest ：http:** [//jsfiddle.net/635YY/1/](http://jsfiddle.net/635YY/1/)

```
var url="../635YY",xmlhttp;//Remember, same domain
if("XMLHttpRequest" in window)xmlhttp=new XMLHttpRequest();
if("ActiveXObject" in window)xmlhttp=new ActiveXObject("Msxml2.XMLHTTP");
xmlhttp.open('GET',url,true);
xmlhttp.onreadystatechange=function()
{
    if(xmlhttp.readyState==4)alert(xmlhttp.responseText);
};
xmlhttp.send(null); 
```

**其次，通过 iFrames：http:** [//jsfiddle.net/XYjuX/1/](http://jsfiddle.net/XYjuX/1/)

```
var url="../XYjuX";//Remember, same domain
var iframe=document.createElement("iframe");
iframe.onload=function()
{
    alert(iframe.contentWindow.document.body.innerHTML);
}
iframe.src=url;
iframe.style.display="none";
document.body.appendChild(iframe); 
```

**第三，通过 jQuery：http:** [//jsfiddle.net/edggD/2/](http://jsfiddle.net/edggD/2/)

```
$.get('../edggD',function(data)//Remember, same domain
{
    alert(data);
}); 
```

# visual-studio-2010 - 无法向 RocketSvn 存储库添加解决方案

> ID：10934135
> 
> 赞同：1
> 
> 时间：2012-06-07T14:44:14.633
> 
> 标签：visual-studio-2010, svn, windows-server-2008-r2

我一直在尝试在 win server 2008 R2 上设置 RocketSVN 服务器和 Visual Studio 2010 的插件客户端，但遇到了很多麻烦，所以我会列出我遇到的问题以及我为使它们工作所做的工作以及在哪里我愿意。

首先，我无法通过浏览器连接到服务器，这归结为我没有在服务器上安装 Basic 和 windows 身份验证 IIS 功能 Doh！（全新安装:)）虽然在我完成 Windows 更新之前它仍然无法正常工作，但在这些步骤之后，我可以通过浏览器连接到管理门户添加存储库和用户耶！然后我继续使用 Visual Studio 的插件，在尝试从 svn 添加或打开一个项目时遇到了身份验证问题，所以回到谷歌并在这里找到了解决方案[http://community.axosoft.com/forums/thread/22088。 aspx](http://community.axosoft.com/forums/thread/22088.aspx)但没有使用我想要的 Windows 身份验证，现在又遇到了另一个问题，我发现将 IIS 中的绑定更改为 HTTPS 并设置证书让我可以使用 Windows 身份验证并让我处于相同的位置，但现在我又被卡住了……

试图添加图像，但不会让我 Grrrr.... 编辑：我现在可以添加图像 :)

每次我尝试添加解决方案时，我都没有将其保存到的文件夹，并且“创建文件夹”按钮是灰色的，我得到的只是

1.  颠覆存储库
2.  https:// `<server name>`:8080 ![在此处输入图像描述](../Images/4ae368b3af7b7dcd9aeb1827c3e65c6c.png)

所以我缺少 svn/testrep/(testrep 是我的存储库) 文件夹来选择并将我的解决方案添加到..

我正在使用在管理门户上找到的存储库 URL.. ![在此处输入图像描述](../Images/78be0a8065efaef7c72fe4eda7160364.png)

如果我尝试打开解决方案，我得到的错误（即使我认为我可能能够浏览它的存储库中没有任何解决方案？）是“服务器发送了意外的返回值（不允许 405）以响应发现" ![在此处输入图像描述](../Images/03d6631fff040ddf5dc4fbbaa1726c95.png)

我希望有人能帮我解决这个问题，因为我失去了与这个人一起生活的意愿:(我认为这仍然是服务器设置问题，但找不到更多信息，如果有任何人想查看任何服务器日志，请告诉我不。 /config的/设置。

提前喝彩

# hibernate - 为什么我的 loadUserByUsername 不起作用？

> ID：10934143
> 
> 赞同：0
> 
> 时间：2012-06-07T14:44:39.870
> 
> 标签：hibernate, authentication, spring-mvc, spring-security

我正在使用 Spring Security 3。我有自己的身份验证提供程序。

这是我到目前为止所拥有的：

**安全应用上下文.xml**

```
<authentication-manager>
    <authentication-provider user-service-ref="detailsService" />    
</authentication-manager>

<beans:bean id="loginSuccessHandler" class="com.myapp.security.LoginSuccessHandler" />
<beans:bean id="loginFailureHandler" class="com.myapp.security.LoginFailureHandler" />
<beans:bean id="detailsService" class="com.myapp.security.UserDetailService" /> 
```

**用户详细服务**

```
public class UserDetailService implements UserDetailsService {

    private DataSource dataSource;

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        String hql = "from Users where username = :username";

        List<Users> list = null;

        try {
            IO io = new IO("common_web");
            IOQuery query = new IOQuery();
            query.setStatement(hql);
            query.setParameter(new IOParameter("username", username));

            list = io.runQuery(query);

            if (list.isEmpty()) {
                return null;
            }

        } catch (Exception ex) {
            ex.printStackTrace();
        }

        // THIS WORKS.  I HAVE A VALID USER FROM DB
        return (UserDetails) list.get(0);
    }
} 
```

这段代码只是一个简单的例子。在“// THIS WORKS...”这一点上，我确实有`Users`来自我们数据库的记录。但是当我返回这个对象时，我仍然没有通过身份验证。

请注意，这`Users`是一个 Hibernate 表对象。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:46:53.823

仅仅因为返回了 UserDetails 并不意味着您将通过身份验证。DaoAuthenticationProvider 会进行许多检查以确保返回的用户应该经过身份验证。例如，它确保用户名和密码匹配、帐户未过期、帐户未锁定等。一个常见的问题是返回一个不包含任何 GrantedAuthority 的 UserDetails，这会导致 UsernamePasswordAuthenticationToken 指示用户不是认证。

您是否尝试过为 org.springframework.security 启用调试日志记录？这可以解释什么是错的。如果您不熟悉日志记录，Spring（和 Spring Security）使用 commons-logging，您可以在 Spring 参考中找到[日志记录指南。](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/overview.html#d0e743)

PS 如 UserDetailsS​​ervice 接口中所述，[loadUserByUsername](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html#loadUserByUsername%28java.lang.String%29)永远不应返回 null。而是抛出一个 UsernameNotFoundException

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:54:14.587

由于`Users`类正在实现`UserDetails`接口，因此请确保您`GrantedAuthority`从 getAuthorities 方法返回一个列表而不是 null。此外，其他验证方法应返回适当的值以指示用户有效。例如：

```
@Override
public List<GrantedAuthority> getAuthorities() {

    return AuthorityUtils.createAuthorityList("VALID_USER_ROLE");
}  
@Override
public boolean isAccountNonExpired() {
    return true;
}

@Override
public boolean isAccountNonLocked() {
    return true;
}

@Override
public boolean isCredentialsNonExpired() {
    return true;
}

@Override
public boolean isEnabled() {
    return true;
} 
```

# asp.net - 如何判断我的 global.asax 捕获的错误是否显示在用户的屏幕上

> ID：10934145
> 
> 赞同：1
> 
> 时间：2012-06-07T14:45:02.657
> 
> 标签：asp.net, error-handling

在我的 Global.asax 文件中，我有一个 Sub Application_Error(ByVal sender As Object, ByVal e As EventArgs) ，它“应该”捕获应用程序遇到的所有错误（如果我在这里错了，请纠正我）。

我的问题是，我已经看到记录的错误，就我的用户看到自定义错误页面而言，这些错误显然没有“失败”。那么什么会告诉我，如果有的话，异常类型是否真的导致自定义错误页面显示。

我想在错误处理方面做得更好，并寻找任何见解或方法来改善用户体验。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:52:09.330

用两句话来说：

处理页面上的所有错误，并向用户显示错误信息。

为您未知的错误保留全局错误处理程序，以便记录它们并在不久的将来修复它们，并向您的用户显示一般错误页面。

有关更多信息和详细信息，我已经写了这个答案：[如何在我的 ASP.NET 应用程序中创建一个“通用错误”页面，以便它处理在提供该页面本身时触发的错误？](https://stackoverflow.com/questions/10751363/how-do-i-make-a-generic-error-page-in-my-asp-net-application-so-that-it-handle/10751939#10751939)

# iphone - 如何避免覆盖 iPhone Documents 文件夹中的文件？

> ID：10934147
> 
> 赞同：0
> 
> 时间：2012-06-07T14:45:03.953
> 
> 标签：iphone, objective-c, cocoa-touch, nsstring, nsarray

我需要将包含的文件写入`NSArrays`我的 iPhone 应用程序的 Documents 文件夹中。下次我需要创建一个新文件，而不是覆盖以前的文件。

我试过这样，但它只写`doc0`和`doc1`.

`allDocs`在`NSArray`其他地方声明。

怎么了？谢谢！

```
 NSString *myDoc;
 NSString *temp;

  for (int i = 0; i < [allDocs count]; ++i){
    NSFileManager* fileMgr = [NSFileManager defaultManager];
    myDoc = [NSString stringWithFormat:@"doc%d.dat", i];
    NSString* currentFile = [documentsDirectory stringByAppendingPathComponent:myDoc];
    BOOL fileExists = [fileMgr fileExistsAtPath:currentFile];
    if (fileExists == NO){
        temp = [NSString stringWithFormat:@"doc%d.dat", i];
        break;
    } else {
        temp = [NSString stringWithFormat:@"doc%d.dat",i++];
        break;
    }
}

NSString *myArray = [documentsDirectory stringByAppendingPathComponent:myDoc];

NSMutableArray *myMutableArray = [[NSMutableArray alloc] initWithContentsOfFile: myArray];

if(myMutableArray == nil)

{

    myMutableArray = [[NSMutableArray alloc] initWithCapacity:10];

    myMutableArray = anotherArray; 
} 

[myMutableArray writeToFile:myArray atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:55:20.907

无论是否找到文件，每次都在第一次迭代时跳出 for 循环。您应该循环使用递增的值，`i`直到`fileExists`为 false。

```
- (BOOL) workFileExists:(NSString *)name {
    NSFileManager *fm = [NSFileManager defaultManager];
    NSString *path = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
    NSString *filename = [name stringByAppendingString:@".swrk"];

    return [fm fileExistsAtPath:[path stringByAppendingPathComponent:filename]];
}

- (NSString *)uniqueUntitledName {
    NSString *untitled = @"Untitled";
    NSString *name = untitled;
    int i = 1;
    while ([self workFileExists:name]) {
        name = [NSString stringWithFormat:@"%@%d", untitled, i];
        i++;
    }
    return name;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:44:49.617

```
UIImage *imageForShare = [UIImage imageNamed:@"anyImage.jpg"];
NSString *stringPath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)objectAtIndex:0]stringByAppendingPathComponent:@"New Folder"];
// New Folder is your folder name
NSError *error = nil;

 //in this method you are checking the path is exist or not for Folder Name
if (![[NSFileManager defaultManager] fileExistsAtPath:stringPath])
[[NSFileManager defaultManager] createDirectoryAtPath:stringPath withIntermediateDirectories:NO attributes:nil error:&error];

//now checking the image name already exist or not

NSString *fileName = [stringPath stringByAppendingFormat:@"/image.jpg"];
if (![[NSFileManager defaultManager] fileExistsAtPath:fileName])
{
  NSLog(@"Path is available.");
  NSData *data = UIImageJPEGRepresentation(imageForShare, 1.0);
  [data writeToFile:fileName atomically:YES];
}
else
{
    NSLog(@"Path doesn't exist, same name of image is already exist.");
} 
```

谢谢你！！

# java - JSP 的 Tomcat 类重载

> ID：10934150
> 
> 赞同：3
> 
> 时间：2012-06-07T14:45:12.390
> 
> 标签：java, tomcat, classloader, dynamic-class-loaders

在重新加载 JSP 时，类重新加载在 Tomcat 中是如何工作的（我说的是内部架构）？

我知道每个 JSP 都被编译成一个 Java 类。但是，考虑到类加载器不允许卸载类并且不收集太多垃圾，类加载器（每个 Web 应用程序都是唯一的）如何重新加载这些生成的类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-19T10:20:58.277

JasperLoader 实例是加载 jsp 生成的 servlet 的类加载器。

jsp 编译器在生成更新的 servlet 类文件时“丢弃”（设置为 null）旧的 JasperLoader 实例。

引用[JspServletWrapper.setServletLastModifiedTime](http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/java/org/apache/jasper/servlet/JspServletWrapper.java?view=markup#l214)中的评论：

> 确实需要卸载旧类，但不能这样做。做下一个最好的事情，即扔掉 JspLoader，这样将创建一个新的加载器来加载新的类。

另请参阅[编译后调用此方法的位置](http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/java/org/apache/jasper/compiler/Compiler.java?view=markup#l382)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:48:47.123

标准的 Java 类加载器从不卸载类。Tomcat 有自己的类加载器，它可以用新实例替换类的旧实例，然后孤立旧实例，使其以通常的方式可供垃圾收集器使用。

在某处，我读到如果某个类在某个指定的时间段内未使用，Tomcat 将卸载它。但我目前找不到任何参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T19:15:44.753

如果您想接受教育，请阅读代码。

从这里开始：http: [//svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/java/org/apache/jasper/servlet/JspServlet.java ?view=markup](http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/java/org/apache/jasper/servlet/JspServlet.java?view=markup)

# iphone - 在 Xcode 中使用自定义字体

> ID：10934155
> 
> 赞同：2
> 
> 时间：2012-06-07T14:45:48.197
> 
> 标签：iphone, objective-c, ios, ipad, uifont

我正在尝试在 Xcode 中使用自定义字体（Sassoon Infant）。尽管在此问题上查看了许多帖子，但我无法解决该问题。

这些是我到目前为止所采取的步骤。

1.  为资源添加字体
2.  将字体添加到字体册
3.  添加`SassoonInfantCom-Regular.ttf`到应用程序提供的字体
4.  尝试使用`fontWithName:@"Sassoon Infant Com"`，字体书中的名称
5.  也试过了`@"Sassoon"`

字体名称也没有显示在 IB 的下拉字体菜单下。以上似乎适用于大多数人，但我无法让它工作。有人有想法么？

![在此处输入图像描述](../Images/de1eca76a9e0abf6853b174fa0ff2b55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T16:33:20.580

从文件和 plist 中删除扩展名 .otf / .ttf。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T15:48:42.797

还要确保您正在为“应用程序属性提供的字体”编辑正确的 plist 文件！我花了两天时间尝试一切以使一些自定义字体起作用。然后我意识到我正在编辑 APPTest-info.plist（位于 XCODE 中 Tests 文件夹的资源文件夹中）而不是编辑 APP-info.plist 文件！

在我的辩护中，这两个文件在 Xcode 的文件导航器中非常接近... ;-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T16:43:35.030

1.  确保将字体添加到您的目标中。选择字体并在左侧 Xcode 侧边栏中检查目标成员资格。

2.  确保您获得了正确的字体名称。在“字体簿”中打开字体并查看其名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:00:03.183

我只是将它添加到捆绑包中并这样做了

```
myLabel.font = [UIFont fontWithName:@"MyCustomFont" size:19]; 
```

MyCustomFont 是一个 .ttf 文件。

希望这可以帮助。

# php - 如何在保持分辨率的同时使用 PHP 调整图像大小？

> ID：10934156
> 
> 赞同：2
> 
> 时间：2012-06-07T14:46:01.050
> 
> 标签：php, image-processing, imagemagick, resolution, image-resizing

我想知道是否有一种方法可以使用诸如 GD 或 ImageMagick 之类的库来调整一批图像的大小，从而在保持其分辨率的同时缩小图像的大小？

目前，我从一个非常大的图像（大约 3500 X 2400 @ 300ppi）开始，当我尝试将图像缩小（大约 1000 X 775）时，我得到了一个正确尺寸的大图像，但分辨率下降到 72ppi（由 Photoshop 确认）。

```
$im = new Imagick();
//Initial resolution of image
$im->setResolution(300,300);

$im->readImage('mypdf.pdf');
$im->adaptiveResizeImage(707,1000); 
```

我也用过：

```
$image->resizeImage(707,1000, imagick::FILTER_LANCZOS, 0.9, true); 
```

但结果最终几乎相同。提前致谢。欢迎任何建议。

在阅读了这里的建议后，我的代码现在看起来像这样

```
$im = new Imagick();
$im->setResolution(300,300);

$im->readImage('mypdf.pdf');
$im->setImageUnits(imagick::RESOLUTION_PIXELSPERINCH);
$im->adaptiveResizeImage(707,1000);
$im->setResolution(300,300);
$im->setImageFormat( "jpg" );
$originalImageFile = 'myjpg.jpg';
$im->writeImage($originalImageFile);$im->setResolution(300,300); 
```

输出图像的质量非常低，这是它的样子

[http://i46.tinypic.com/ehfyf8.jpg](http://i46.tinypic.com/ehfyf8.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:51:41.510

在这里查看第一条评论：

[http://php.net/manual/en/imagick.setresolution.php](http://php.net/manual/en/imagick.setresolution.php)

除了设置分辨率之外，您还必须设置分辨率单位：

```
$im->setImageUnits(imagick::RESOLUTION_PIXELSPERINCH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:02:08.483

在将图像保存到磁盘之前调整图像大小后再次尝试调用 setResolution。此外，请参阅此处有关密度的说明：[ImageMagick 文档](http://www.imagemagick.org/Usage/basics/#density)。

# javascript - 如何在 Greasemonkey 脚本中创建全局可编辑变量？

> ID：10934160
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:46:19.443
> 
> 标签：javascript, variables, greasemonkey, information-retrieval

我需要一个使用 Greasemonkey 用户脚本为每个人创建变量的代码。

因此，如果*Person1*将 var 编辑`location = "Street"`为`location = "City"`，则使用该脚本的每个人都会看到更改为“City”。

有没有比使用外部 PHP/MySQL 脚本更简单的方法来存储、获取和编辑 var？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:58:44.170

***当***且仅当用户都在同一用户帐户、同一台机器上使用同一浏览器时，您可以使用[`GM_setValue()`](http://wiki.greasespot.net/GM_setValue)或[`localStorage`](https://developer.mozilla.org/en/dom/storage#localStorage)包含该值。

但是，对于任何其他情况，您必须有一个中央服务器应用程序，脚本读取和写入值（使用[`GM_xmlhttpRequest()`](http://wiki.greasespot.net/GM_xmlhttpRequest)）。没有办法解决这个问题。Greasemonkey 没有点对点通信机制。

# sharepoint-2010 - 将人员选择器限制为特定组

> ID：10934162
> 
> 赞同：0
> 
> 时间：2012-06-07T14:46:30.787
> 
> 标签：sharepoint-2010, infopath2010

有没有办法将 InfoPath 中的人员选取器控件限制为某个 SharePoint 组？我需要在不编写任何代码的情况下执行此操作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T14:25:51.850

当然可以，这里在 sharepoint stackexchange 网站上得到了很好的回应

[https://sharepoint.stackexchange.com/questions/38019/in-infopath-limit-people-picker-to-a-certain-sharepoint-group](https://sharepoint.stackexchange.com/questions/38019/in-infopath-limit-people-picker-to-a-certain-sharepoint-group)

# miva - Miva 5.5 - 按子类别过滤

> ID：10934163
> 
> 赞同：1
> 
> 时间：2012-06-07T14:46:33.860
> 
> 标签：miva

“伟大的” Miva 论坛禁止我注册并提出这个问题。不知道这里是否有任何可以帮助我的...

在分类页面上，我需要根据Best Sellers、New Releases等在列中显示产品。有类别设置了子类别。产品被分配到一个类别，可能还有一个子类别。

合唱

*   合唱畅销书
*   合唱新专辑

声乐

*   声乐畅销书
*   声乐新品

所有父类别的名称都是一个单词，其子类别添加两个单词。类别页面将显示父类别中的所有产品，我只想过滤每个列中的内容。我试图用表达式将添加的两个单词与子类别名称的一部分进行比较。这样，无论您属于哪个父类别，都可以使用相同的代码。似乎是非常基本的东西，但不起作用。

示例非工作代码：

```
<div class="row">
<h2>Best Sellers</h2>
<mvt:foreach iterator="product" array="products">
<mvt:if expr="'Best '$'Sellers' IN g.category:name">
product display stuff here
</mvt:if>
</mvt:foreach>
</div>

<div class="row">
<h2>New Releases</h2>
<mvt:foreach iterator="product" array="products">
<mvt:if expr="'New '$'Releases' IN g.category:name">
product display stuff here
</mvt:if>
</mvt:foreach>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:02:52.700

如果您还没有，您可能想要拿起 PCI 网络工具带。它是由 Ray Yates 编写的，并且有很好的文档记录。它是一个[Miva Merchant 语言扩展模块](http://www.pcinet.com/miva-modules/ry_toolbelt.html "工具带")，它可以让您出色地访问 SMT 无法访问的 Miva Merchant（默认情况下）。

您遇到的问题是您正在查看一个不存在的变量。您的“范围”已关闭。该变量`g.category_code`将类别代码保存在全局变量上下文中（我认为您可能会对此感到困惑`g.category:name`）。您需要查看 LOCAL 变量上下文。

你`<mvt:foreach>`看起来不错。

尝试从以下位置更改您的代码：

```
<mvt:if expr="'Best '$'Sellers' IN g.category:name"> 
```

至：

```
<mvt:if expr="'Best '$'Sellers' IN l.settings:category:name"> 
```

甚至：

```
<mvt:if expr="'Best Sellers' IN l.settings:category:name"> 
```

这样您就不必进行不必要的连接。;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-02T05:45:36.787

聚会有点晚了，但我只是在寻找一种方法来做到这一点，最终使用了 Emporium Plus Tool Kit。

```
<mvt:item name="toolkit" param="sassign|bestSellerCategory|best-sellers" />
<mvt:item name="toolkit" param="cxpc|pcount|g.bestSellerCategory" /> 
```

用您的类别代码替换畅销书。之后，您可以使用常规 foreach 来遍历产品

```
<mvt:foreach iterator="sub_product" array="sub_products">
<a href="/&mvte:sub_product:code;.html">&mvte:sub_product:name;</a>
</mvt:foreach> 
```

根据需要在一页上显示尽可能多的类别重复此操作。

# html - CSS 文本浮动对齐

> ID：10934171
> 
> 赞同：2
> 
> 时间：2012-06-07T14:47:07.603
> 
> 标签：html, css, xhtml

看图片：

![在此处输入图像描述](../Images/cb4dcb92a55f7ac06db03979998ba3a9.png)

我希望在不使用 Javascript 的情况下，如果 .elements 的文本（最后查看 html）太长，则将其分开放置在灰色区域的两行中。

“你好世界！你好 StackOverFlow！” 是应该分开的文本。

** 如果您认为缺少某些内容，或者我没有充分解释自己，请问我会尽力为您提供您想知道的;）

# HTML

```
<div class="filter">
    <div class="left"></div>
    <div class="center">
        <div class="arrow">Search Filter Research Text Test</div>
        <div class="head"></div>
        <div class="element"><div>Hello World! Hello StackOverFlow!</div></div>
    </div>
    <div class="right"></div>
</div> 
```

# CSS

```
.table .filter {
    height: 44px;
    position: relative;
}

.table .filter div {
    height: 44px;
}

.table .filter .left {
    width: 7px;
    position: absolute;
    left: 0;
    background: url('../images/Tableau/filtre/gauche.png') no-repeat;
}

.table .filter .right {
    width: 7px;
    position: absolute;
    right: 0;
    background: url('../images/Tableau/filtre/droit.png') no-repeat;
}

.table .filter .center {
    background: transparent url('../images/Tableau/filtre/centre.png') repeat-x;
    left: 7px;
    right: 7px;
    position: absolute;
}

.table .filter .center>div {
    float: left;
}

.table .filter .center .arrow {
    background: url('../images/Tableau/filtre/fleche-centre.png') repeat-x;

}

.table .filter .center .head {
    width: 13px;
    background: url('../images/Tableau/filtre/fleche.png') no-repeat;   
}

.table .filter .center .element {
    text-align: center;
    margin: auto;
}

.table .filter .center .element>div {
    width: 100%;
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:53:35.677

试试这个小提琴

[http://jsfiddle.net/XkgA7/21/](http://jsfiddle.net/XkgA7/21/)

高度需要调整，但这似乎是您正在寻找的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:10:39.073

尝试将以下 CSS 添加到`.element`：

```
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis; 
```

这将确保您的文本永远不会太长而无法放入其容器中。

但是，如果这失败了，那么 CSS 的其他地方就会出现问题，并且容器本身会变得太大。这几乎可以肯定是因为`width: 100%`在`element>div`. 尝试删除它。

# wix - Wix 与 MVC 区域

> ID：10934175
> 
> 赞同：1
> 
> 时间：2012-06-07T14:47:29.740
> 
> 标签：wix, wix3.5

我正在尝试在带有区域的 MVC 3 应用程序上使用 Wix。

```
Contoso.csproj
  /areas
     /Contoso.Widgets.csproj
     /Contoso.Analysis.csproj 
```

区域下的文件不包含在 Contoso.Ui.csproj 中，而是使用项目引用，类似于 Orchard CMS 项目。

目前我只能将 Contoso.Ui.csproj 项目下引用的视图和文件等包含在 Wix wxs 文件中，如何从其他项目中获取所有其他视图等以包含在内？

# windows-7 - Win7窗口长按后变成半透明

> ID：10934179
> 
> 赞同：1
> 
> 时间：2012-06-07T14:47:45.167
> 
> 标签：windows-7, drag

这不是一个编程问题，但我希望微软程序员可以看到这个并更容易地回答这个问题。

一切都很好，直到我有了第三台显示器，它是 USB 3.0 到 HDMI 到 DIV。无法调整伽马，因此进行**了很多**更改以尝试达到目标，但只发现每当我单击窗口并按住（拖动或不拖动无关紧要）时，窗口及其内容都会变为半透明（我会说 90% 透明，几乎看不到内容，但可以清楚地看到下面的窗口）。现在 Outlook 和一些旧软件（我们的团队成员用 VC++6.0 编写）不这样做，但 Win 7 中的大多数窗口和新软件（IE、skype、SAP、）都会这样做，这让我很恼火。拖动时我想要不透明的窗口。谁能帮忙？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T21:18:05.573

一位微软专家回答说这是由 nVidia 设置引起的。使用 nVidia 管理器时，默认情况下单击并按住时所有窗口都变为半透明。

# python - Python UnicodeDecodeError：“ascii”编解码器无法解码字节 0xe2 序数不在范围内（128）

> ID：10934184
> 
> 赞同：12
> 
> 时间：2012-06-07T14:48:01.177
> 
> 标签：python, google-app-engine, ascii, asciiencoding

我正在尝试使用 Python 在 Google App Engine 中编写我的第一个应用程序（应用程序链接： http: [//contractpy.appspot.com/](http://contractpy.appspot.com/) - 它只是一个实验性应用程序）。整个代码如下。

但是，当我提交数据时，我收到了这个错误（显示在日志上）：

```
(...) line 265, in get "contractType":geted_contractType
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 949: ordinal not in range(128) 
```

第 265 行在此 if 块中：

```
self.response.out.write(yourcontract % {"resident":geted_resident_name,
                                      "nacionality":geted_user_nacionality,
                                      "SSN":geted_user_SSN,
                                      "SSN_error":geted_SSN_error,
                                      "driverLicense":geted_user_driverLicense,
                                      "email":geted_user_email,
                                      "witness ":geted_witness ,
                                      "owner":geted_owner,
                                      "contractType":geted_contractType
                                      }) 
```

我试图进行更改，阅读类似的 awnswers（如[this](https://stackoverflow.com/questions/10597677/python-concatenating-strings-unicodedecodeerror-ascii-codec-cant-decode-by)或[this](https://stackoverflow.com/questions/10561923/unicodedecodeerror-ascii-codec-cant-decode-byte-0xef-in-position-1)），但没有任何帮助。我无法在这段代码中弄清楚出了什么问题。有人可以找出导致此类错误的原因以及如何解决吗？

我正在使用 Python 2.7。

提前感谢您的帮助！

```
# -*- coding: utf-8 -*-
# -*- coding: utf-8 -*-
#!/usr/bin/env python
#
# Copyright 2007 Google Inc.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

    import webapp2

    form = """

    <html>
      <head>
        <title>Contract with Python</title>
        <style type="text/css">
          .label {text-align: right}
          .error {color: red}
        </style>

      </head>

      <body>
        <h2>Contract with Python</h2>
        <form method="post">
          <table>
            <tr>
              <td class="label">
                resident
              </td>
              <td>
                <input type="text" name="resident" value= "%(resident)s">
              </td>
              <td class="error"> %(resident_error)s

              </td>
            </tr>

             <tr>
              <td class="label">
                nacionality
              </td>
              <td>
                <input type="text" name="nacionality" value= " ">
              </td>
            </tr>

            <tr>
              <td class="label">
                License
              </td>
              <td>
                <input type="text" name="driverLicense" value="">
              </td>
            </tr>

            <tr>
              <td class="label">
                SSN
              </td>
              <td>
                <input type="text" name="SSN" value="%(SSN)s">
              </td>
              <td class="error"> %(SSN_error)s
              </td>
            </tr>

            <tr>
              <td class="label">
                Email (optional)
              </td>
              <td>
                <input type="text" name="email" value="%(email)s">
              </td>
              <td class="error"> %(email_error)s

              </td>
            </tr>
          </table>

    <br>
            <td class="label">
              Contract Type
              <select name = "contractType">
                  <option>House  Rental Contract</option>
                  <option>Car Rental Contract</option>
                  <option>Other</option>
              </select>
              </td>
    <br>
    <br>

    <br>
              owner
              <select name = "owner">
                  <option>House owner</option>
                  <option>Car owner</option>
                  <option>Other owner</option>
              </select>
    <br>
    <br>

    <br>
              Witness
              <select name = "witness">
                  <option>Carl Sagan</option>
                  <option>Mahatma Gandhi</option>
              </select>
    <br>
    <br>

          <input type="submit">
        </form>
      </body>

    </html>
    """

    yourcontract = """
    <html>
      <head>
        <title>Unit 2 Signup</title>
      </head>

      <body>

    %(contractType)s

    In consideration of the agreements of the Resident(s), known as: %(resident)s The owner hereby rents them the dwelling located at %(residentAdress)s, for the period commencing on the %(dateStarts)s, and monthly thereafter until the last day of %(dateEnds)s, at which time this Agreement is terminated. Resident(s), in consideration of owners permitting them to occupy the above property, hereby agrees to the following terms:

    RENT: To pay as rental the sum of $ (rentalSum) per month, due and payable in advance from the first day of every month. Failure to pay rent when due will result in the owner taking immediate legal action to evict the Resident from the premises and seize the security deposit.
    LATE FEE: Rent received after the first of the month will be subject to a late fee of 10% plus (3.00) dollars per day.

    ACCEPTED THIS (dateContract), at (localContract).

    ___________________________________________________
    %(resident)s - Resident

    ___________________________________________________
    %(owner)s – owner

    ___________________________________________________
    %(witness)s – Witness

      </body>
    </html>

    """

    import re

    USER_RE = re.compile(r"^[a-zA-Z0-9_-]{3,20}$")
    def valid_resident(resident):
        return USER_RE.match(resident)

    PASS_RE = re.compile(r"^.{3,20}$")
    def valid_SSN(SSN):
        return PASS_RE.match(SSN)

    EMAIL_RE = re.compile(r"^[\S]+@[\S]+\.[\S]+$")
    def valid_email(email):
        return EMAIL_RE.match(email)

    def escape_html(s):
        for (i,o) in (("&","&"), (">",">"), ("<","<"), ('"','"')):
            s = s.replace(i,o)
            return s

    import time

    import datetime

    def dateToday():
        today = datetime.datetime.today()
        todayDay = str(today.day)
        todayMonth = str(today.month)
        monthExt = {'1':' January ', '2':'February', '3':' March ', '4':'April', '5':'May', '6':'June', '7 ':' July ', '8':'August', '9':'September', '10':'October', '11':'November ', '12':'December'}
        todayYear = str(today.year)
        return(todayDay + ' of  ' + monthExtenso[todaymonth] + ' of ' + todayYear)

    class MainHandler(webapp2.RequestHandler):
        def get(self):
           self.response.out.write(form %{"resident": "",
                                           "SSN": "",
                                           "driverLicense": "",
                                           "email":"",
                                           "resident_error": "",
                                           "SSN_error": "",
                                           "driverLicense_error": "",
                                           "email_error": ""})

        def write_form(self, text_write):
           self.response.out.write(text_write)

        def post(self):
            resident_name = self.request.get(escape_html("resident"))
            user_nacionality = self.request.get("nacionality")
            user_SSN = self.request.get(escape_html('SSN'))
            user_email = self.request.get(escape_html('email'))
            user_driverLicense = self.request.get(escape_html('driverLicense'))
            resident_error = ""
            SSN_error = ""
            driverLicense_error = ""
            contract_type = self.request.get("contractType")
            owner = self.request.get("owner")
            witness  = self.request.get("witness ")

            if (resident_name and valid_resident(resident_name)) \
            and (user_SSN and valid_SSN(user_SSN)) \
            and ((not user_email) or (user_email and valid_email(user_email))):
                self.redirect('/yourcontract?resident=%s&nacionality=%s&SSN=%s&driverLicense=%s&email=%s&witness=%s&owner=%s' % (resident_name, user_nacionality, user_SSN, user_driverLicense, user_email,
    witness, owner))
            else:
                if not valid_resident(resident_name):
                    resident_error = "Oh no!!! this resident name isn't valid!"
                if not valid_SSN(user_SSN):
                    SSN_error = "Oh no!!! SSN isn't valid!"
                if user_email and not valid_email(user_email):
                    email_error = "Oh no!!! e-mail isn't valid!"
                self.write_form(form % {"resident":resident_name,
                                          "resident_error":resident_error,
                                          "SSN":user_SSN,
                                          "SSN_error":SSN_error,
                                          "driverLicense":user_driverLicense,
                                          "email":user_email,
                                          })

    class yourcontractHandler(webapp2.RequestHandler):
        def get(self):
            geted_resident_name = self.request.get('resident')
            geted_user_nacionality = self.request.get("nacionality")
            geted_user_SSN = self.request.get('SSN')
            geted_user_email = self.request.get('email')
            geted_user_driverLicense = self.request.get('driverLicense')
            geted_resident_error = ""
            geted_SSN_error = ""
            geted_driverLicense_error = ""
            #geted_contract_type = self.request.get("contractType")
            geted_owner = self.request.get("owner")
            geted_witness  = self.request.get("witness")
            geted_contractType = self.request.get("contractType")

            self.response.out.write(yourcontract % {"resident":geted_resident_name,
                                          "nacionality":geted_user_nacionality,
                                          "SSN":geted_user_SSN,
                                          "SSN_error":geted_SSN_error,
                                          "driverLicense":geted_user_driverLicense,
                                          "email":geted_user_email,
                                          "witness ":geted_witness ,
                                          "owner":geted_owner,
                                          "contractType":geted_contractType
                                          })

    app = webapp2.WSGIApplication([('/', MainHandler), ('/yourcontract', yourcontractHandler)],
                                  debug=True) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T14:51:02.650

您应该真正使用适当的模板系统。Jinja2 包含在 AppEngine 中。

但是与此同时，您的问题是您的模板是 ASCII，但您的数据不是（无法判断它是 utf-8 还是 unicode）。简单的解决方案是为每个模板字符串添加前缀`u`以使其成为 Unicode。

但是，您应该真正使用适当的模板系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T05:23:46.337

在这里你得到了解决方案。

```
>>> "t".decode("utf-8")
u't'
>>> "\x81".decode("utf-8")
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "encodings/utf_8.py", line 7799, in decode
UnicodeDecodeError: 'utf8' codec can't decode byte 0x81 in position 0: unexpected code byte

>>> "a\x81b".decode("utf-8", "replace")  # this will decode better and the right way.
u'a\ufffdb' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-09T12:28:13.250

在代码顶部设置默认编码器

在 appcfg.py 中，它位于 /google/appengine/tools/appcfg.py 中

在第 73 行添加

```
import sys
reload(sys)
sys.setdefaultencoding("ISO-8859-1") 
```

# java - 如何等待 ThreadPoolExecutor 完成

> ID：10934187
> 
> 赞同：33
> 
> 时间：2012-06-07T14:48:06.463
> 
> 标签：java, multithreading, threadpool

**我的问题：**如何在 a 上执行一堆线程对象[`ThreadPoolExecutor`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html)并等待它们全部完成后再继续？

我是 ThreadPoolExecutor 的新手。所以这段代码是一个测试来了解它是如何工作的。现在我什至没有`BlockingQueue`用对象填充 ，因为我不明白如何在不调用`execute()`另一个`RunnableObject`. 无论如何，现在我只是打电话`awaitTermination()`，但我想我仍然错过了一些东西。任何提示都会很棒！谢谢。

```
public void testThreadPoolExecutor() throws InterruptedException {
  int limit = 20;
  BlockingQueue q = new ArrayBlockingQueue(limit);
  ThreadPoolExecutor ex = new ThreadPoolExecutor(limit, limit, 20, TimeUnit.SECONDS, q);
  for (int i = 0; i < limit; i++) {
    ex.execute(new RunnableObject(i + 1));
  }
  ex.awaitTermination(2, TimeUnit.SECONDS);
  System.out.println("finished");
} 
```

RunnableObject 类：

```
package playground;

public class RunnableObject implements Runnable {

  private final int id;

  public RunnableObject(int id) {
    this.id = id;
  }

  @Override
  public void run() {
    System.out.println("ID: " + id + " started");
    try {
      Thread.sleep(2354);
    } catch (InterruptedException ignore) {
    }
    System.out.println("ID: " + id + " ended");
  }
} 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-06-07T16:15:19.567

你应该循环`awaitTermination`

```
ExecutorService threads;
// ...
// Tell threads to finish off.
threads.shutdown();
// Wait for everything to finish.
while (!threads.awaitTermination(10, TimeUnit.SECONDS)) {
  log.info("Awaiting completion of threads.");
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T15:05:07.873

您的问题似乎是`shutdown`在您将所有作业提交到您的池后您没有打电话。没有`shutdown()`你的`awaitTermination`将永远返回错误。

```
ThreadPoolExecutor ex =
    new ThreadPoolExecutor(limit, limit, 20, TimeUnit.SECONDS, q);
for (int i = 0; i < limit; i++) {
  ex.execute(new RunnableObject(i + 1));
}
// you are missing this line!!
ex.shutdown();
ex.awaitTermination(2, TimeUnit.SECONDS); 
```

您还可以执行以下操作来等待所有作业完成：

```
List<Future<Object>> futures = new ArrayList<Future<Object>>();
for (int i = 0; i < limit; i++) {
  futures.add(ex.submit(new RunnableObject(i + 1), (Object)null));
}
for (Future<Object> future : futures) {
   // this joins with the submitted job
   future.get();
}
...
// still need to shutdown at the end
ex.shutdown(); 
```

此外，因为您正在休眠`2354`几毫秒但只等待所有作业终止，所以`2` `SECONDS`将`awaitTermination`始终返回`false`。我会用`Long.MAX_VALUE`等待工作完成。

最后，听起来您正在担心创建一个新的`ThreadPoolExecutor`，而您想重用第一个。不要这样。与您为检测作业是否完成而编写的任何代码相比，GC 开销将非常小。

* * *

引用javadocs `ThreadPoolExecutor.shutdown()`，：

> 启动有序关闭，其中执行先前提交的任务，但不会接受新任务。如果已经关闭，调用没有额外的效果。

在该`ThreadPoolExecutor.awaitTermination(...)`方法中，它正在等待执行者的状态进入`TERMINATED`。但首先状态必须转到`SHUTDOWN`if`shutdown()`被调用或`STOP`if`shutdownNow()`被调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T15:13:15.853

这与执行者本身无关。只需使用接口的`java.util.concurrent.ExecutorService.invokeAll(Collection<? extends Callable<T>>)`. 它将阻塞，直到所有`Callable`s 完成。

执行者注定要长寿；超出一组任务的生命周期。`shutdown`用于应用程序完成和清理时。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-08T06:38:55.167

这是接受的答案的变体，如果/当抛出 InterruptedException 时处理重试：

```
executor.shutdown();

boolean isWait = true;

while (isWait)
{
    try
    {             
        isWait = !executor.awaitTermination(10, TimeUnit.SECONDS);
        if (isWait)
        {
            log.info("Awaiting completion of bulk callback threads.");
        }
    } catch (InterruptedException e) {
        log.debug("Interruped while awaiting completion of callback threads - trying again...");
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-15T10:09:35.597

另一种方法是使用 CompletionService，如果您必须尝试任何任务结果，这非常有用：

```
//run 3 task at time
final int numParallelThreads = 3;

//I used newFixedThreadPool for convenience but if you need you can use ThreadPoolExecutor
ExecutorService executor = Executors.newFixedThreadPool(numParallelThreads);
CompletionService<String> completionService = new ExecutorCompletionService<String>(executor);

int numTaskToStart = 15;

for(int i=0; i<numTaskToStart ; i++){
    //task class that implements Callable<String> (or something you need)
    MyTask mt = new MyTask();

    completionService.submit(mt);
}

executor.shutdown(); //it cannot be queued more task

try {
    for (int t = 0; t < numTaskToStart ; t++) {
        Future<String> f = completionService.take();
        String result = f.get();
        // ... something to do ...
    }
} catch (InterruptedException e) {
    //termination of all started tasks (it returns all not started tasks in queue)
    executor.shutdownNow();
} catch (ExecutionException e) {
    // ... something to catch ...
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-07T15:15:37.853

试试这个，

```
ThreadPoolExecutor ex =
    new ThreadPoolExecutor(limit, limit, 20, TimeUnit.SECONDS, q);
for (int i = 0; i < limit; i++) {
  ex.execute(new RunnableObject(i + 1));
} 
```

要添加的行

```
ex.shutdown();
ex.awaitTermination(timeout, unit) 
```

# json - HTTP 数据包中可以返回的数量是否有限制？或者这是 WCF JSON 限制？

> ID：10934189
> 
> 赞同：3
> 
> 时间：2012-06-07T14:48:11.700
> 
> 标签：json, wcf, http, serialization, limit

我正在使用自托管（不在 IIS 中）WCF 数据服务，它通过 GET 接收 REST 调用并返回 JSON。

我可以返回 3800 条记录，但是当我转到 3900 时它失败了。如果我没有收到来自 WCF 或 .NET 的错误或警告事件，应用程序将继续为新请求完美运行。它只是默默地丢弃结果并且不会将数据序列化为 JSON：

这是 3800 条记录的返回值：

```
HTTP/1.1 200 OK
Content-Length: 1958039
Content-Type: application/json; charset=utf-8
Server: Microsoft-HTTPAPI/2.0
Access-Control-Allow-Origin: *
Date: Thu, 07 Jun 2012 14:28:39 GMT 
```

{"count":3800,"results":[{"bbox":"18.57544760000000,- ......

这是服务合同：

```
 [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    CatalogResults SearchBoxADO(string requestBox); 
```

在调试器中，SearchBoxADO 返回没有问题的 3900 条记录，但它没有被序列化，并且没有生成 HTTP 响应（Fiddler 说没有响应请求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:35:01.000

它是 WCF 框架的默认设置。为了从 WCF REST 服务获取更大的数据集，您需要在客户端和服务器端增加 readerQuotas，如下所示：

```
<binding maxBufferPoolSize="655360" maxReceivedMessageSize="655360">
         <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
              maxArrayLength="2147483647" maxBytesPerRead="2147483647"
              maxNameTableCharCount="2147483647" />
        <security mode="None" />
      </binding> 
```

还可以考虑将 maxItemsInObjectGraph 设置为较大的值，如下所示：

```
<behavior>
    <dataContractSerializer maxItemsInObjectGraph="2147483647" />
    <serviceMetadata httpGetEnabled="true" />
    <serviceDebug includeExceptionDetailInFaults="false" />
</behavior> 
```

您可以通过代码实现上述功能，如下所示：

由于您通过代码配置所有内容，您甚至可以使用代码定义 readerQuotas，如下所示：

```
Binding binding = new WebHttpBinding();
binding.MaxBufferSize = 2147483647;
binding.MaxReceivedMessageSize = 2147483647;

var myReaderQuotas = new XmlDictionaryReaderQuotas();
myReaderQuotas.MaxStringContentLength = 2147483647;
myReaderQuotas.MaxDepth = 2147483647;
myReaderQuotas.MaxArrayLength = 2147483647;
myReaderQuotas.MaxBytesPerRead = 2147483647;
myReaderQuotas.MaxNameTableCharCount = 2147483647;
binding.GetType().GetProperty("ReaderQuotas").SetValue(binding, myReaderQuotas, null); 
```

如果您尝试在浏览器中获取数据，那么我想如果您使用任何 .NET 应用程序作为客户端应该可以工作，那么您需要定义与为服务器指定的相同的 readerQuotas

您可以通过将 ServiceBehavior 属性添加到您的类来通过代码设置 maxItemsInObjectGraph，如下所示：

```
[ServiceContract]
[ServiceBehavior(MaxItemsInObjectGraph = 2147483647)]
public class Test
{
    [OperationContract]
    [WebGet(ResponseFormat = WebMessageFormat.Json)]
    CatalogResults SearchBoxADO(string requestBox);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:31:52.210

根据要序列化的每条记录中有多少项目，您可能会`maxItemsInObjectGraph`遇到`dataContractSerializer`. [此 MSDN 文章](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractserializer.maxitemsinobjectgraph)讨论了该属性，但它确实包含错误。默认值为 65536 而不是 Int32.MaxValue。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T16:24:45.173

这可能是由一些与内容大小相关的绑定设置引起的，例如：来自 ReaderQuotas 的 maxBufferSize、maxBufferPoolSize 或 maxStringContentLength 属性。

尝试检查设置

# favicon - 网站图标不更新

> ID：10934192
> 
> 赞同：0
> 
> 时间：2012-06-07T14:48:36.380
> 
> 标签：favicon

我将一个新的图标复制到服务器，但旧图标出现了。即使在页面头部调用了另一个，也可以优先吗？

```
<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" /> 
```

图像是页面的兄弟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:51:44.193

我总是发现浏览器缓存网站图标相当积极，所以先检查一下。

其次，不同的浏览器寻找网站图标的方式略有不同。在这里底部解释：[http ://en.wikipedia.org/wiki/Favicon](http://en.wikipedia.org/wiki/Favicon)

如果您的 Web 根目录中有网站图标，您将让大多数人满意。

# php - ui自动完成格式 2行结果

> ID：10934193
> 
> 赞同：2
> 
> 时间：2012-06-07T14:48:38.160
> 
> 标签：php, jquery, json, autocomplete

[我正在使用来自http://jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote)的ui 自动完成功能 在 search.php 中使用 PHP 来返回结果。

我正在尝试获取我的自定义输出

```
<li>Company Name | Contact Name</li> 
```

这来自以下代码：

```
if(is_array($rs) && count($rs) > 0){
        foreach ($rs as $item) {
            //format: "Name Surname=>cid_uid"
            $json = array();
            $json['id'] = $item['parentCompanyId'].'_'.$item['uid'];
            $json['label'] = $item['companyName'] . ' | ' . $item['name'] . ' ' . $item['surname'];
            $data[] = $json;
        }
    } 
```

这工作得非常好，但是为了更容易阅读结果，我宁愿在 < li > 标记内的 2 行上显示结果，以便它更像这样：

```
<li>
Contact Name<br>
Company Name | Department Name
</li> 
```

我尝试了以下方法：

```
$json['label'] = $item['name'] . ' ' . $item['surname'] . '\n' .$item['companyName']; 
```

和

```
$json['label'] = $item['name'] . ' ' . $item['surname'] . '<br>' .$item['companyName']; 
```

和

```
$json['label'] = $item['name'] . ' ' . $item['surname'] . '\\n' .$item['companyName']; 
```

所有的尝试都会导致列表要么显示实际的`<br>`标签，要么`\n`不会推送到下一行。

使用萤火虫节目查看源代码`Name&lt;br&gt;Company`

不确定是否会发生这种情况，因为：

```
header("Content-type: application/json");
echo json_encode($data); 
```

请注意，我的问题与`<li>`通过 autocomplete/php/json 在标签中生成 2 行的 HTML 输出有关。我不是在问如何添加部门名称 ..希望我有意义..

塔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:53:36.100

覆盖`_renderItem`方法：

```
$("#autocomplete").autocomplete()
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( item.label )
            .appendTo( ul );
    }; 
```

文档中的这个演示做同样的事情：http: [//jqueryui.com/demos/autocomplete/#custom-data](http://jqueryui.com/demos/autocomplete/#custom-data)

默认情况下，这`.append( item.label )`就是`.text( item.label )`为什么你`<br />`被替换为`&lt;br /&gt;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-14T07:53:02.600

如果遇到“Uncaught TypeError: Cannot set property '_renderItem' of”错误，您也可以尝试以下代码。

```
$("#autocomplete").autocomplete()
.data( "ui-autocomplete" )._renderItem = function( ul, item ) {
  return $( "<li>" )
    .data( "ui-autocomplete-item", item )
    .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
    .appendTo( ul );
}; 
```

# bada - 如何在 Bada 中使用按钮单击打开新的静态页面

> ID：10934198
> 
> 赞同：0
> 
> 时间：2012-06-07T14:48:58.730
> 
> 标签：bada

我已经用按钮将图像放在标题中，然后单击按钮然后打开一个新窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:00:30.853

您应该在代码中的某个位置构建新窗口（确切形式），然后攻击标题按钮的事件侦听器，然后在侦听器代码块中使用您的应用程序框架，如下所示：

```
Frame *pFrame = Application::GetInstance()->GetAppFrame()->GetFrame(); 
```

然后使用此方法使您的表单处于活动状态且可见：

```
result r;
r = pFrame->AddControl(*pForm1); //pForm1 is your constructed new form
  pFrame->SetCurrentForm(*pForm1);
  pForm1->RequestRedraw(); 
```

# python - Os.walk 不能与通过“match.group(0).encode('string-escape')”获取的目录一起使用

> ID：10934199
> 
> 赞同：0
> 
> 时间：2012-06-07T14:49:01.717
> 
> 标签：python, os.walk

我正在使用 os.walk 搜索特定目录中的文件。

这是不会做它应该做的测试代码：

```
import os, re

cwd = os.getcwd() 
directory= 'Box II'
dirpattern = re.compile(r'^.*?\\'+directory+'.*?', re.M)

for root, dirs, files in os.walk(os.path.abspath(cwd)):

    if dirpattern.search(root):
        match = dirpattern.search(root)
        match = match.group(0).encode('string-escape')

print match '''OUTPUT = D:\\dir1\\dir2\\dir3'''

for roots, dirss, filess in os.walk(match):
print filess '''OUPUT = gives nothing''' 
```

如果我像这样在第二个循环中输入目录名

```
 for roots, dirss, filess in os.walk('D:\\dir1\\dir2\\dir3'):
      print filess 
```

我得到了正确的输出。

目录名有空格。

我输入的正是第一个循环中为匹配而打印的内容。为什么它不起作用？

match.group(0) 不是字符串吗？

如果我这样做：

```
import os, re

cwd = os.getcwd() 
directory= 'Box II'
dirpattern = re.compile(r'^.*?\\'+directory+'.*?', re.M)

for root, dirs, files in os.walk(os.path.abspath(cwd)):

    if dirpattern.search(root):
        match = dirpattern.search(root)
        match = match.group(0) 
```

并使用此功能：

```
escape_dict={'\\':r'\\'}

def raw(text):
"""Returns a raw string representation of text"""
 return "".join([escape_dict.get(char,char) for char in text])

match1= raw(match)
print match '''OUTPUT = D:\dir1\dir2\dir3 '''
print match1 '''OUTPUT = D:\\dir1\\dir2\\dir3''' 

for roots, dirss, filess in os.walk('match1'):

    print filess '''OUTPUT= nothing''' 
```

os.walk 也不起作用，但是当我这样做时：

```
match= 'D:\dir1\dir2\dir3'
match1= raw(match)
print match1 '''OUTPUT= D:\\dir1\\dir2\\dir3''' 
```

os.walk 作品：

```
for roots, dirss, filess in os.walk('match1'):
    print filess '''OUTPUT= [file1,file2,file3]''' 
```

从正则表达式获得的匹配有什么区别

```
match = match.group(0)
print match '''OUTPUT = D:\dir1\dir2\dir3 ''' 
```

并匹配刚刚写出的字符串

```
match = 'D:\dir1\dir2\dir3' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:17:41.413

您可能应该`encode('string-escape')`从您的代码中删除。

# php - 一分钟后删除目录中的文件

> ID：10934201
> 
> 赞同：0
> 
> 时间：2012-06-07T14:49:03.967
> 
> 标签：php, timing

我认为这个问题被问过几次，我已经经历过并且正在使用网络上的一些代码。现在我遇到了时间问题。

让我先提供代码：

```
<?php
   $pathToDir = getcwd();               

   $pathToFilesDir = $pathToDir . '\files';

   $pathToFiles = $pathToFilesDir . '\\';

    if ($handle = opendir($pathToFilesDir)) {

        while (false !== ($file = readdir($handle))) { 

            $filelastmodified = filemtime($file);

            if ($file != '.' && $file != '..'){               

                if((time() - $filelastmodified) > 60 && is_file($file)){

                    unlink($pathToFiles . $file);

                }                
            }                 
        }
        closedir($handle); 
    }

?> 
```

这就是我正在尝试的，自动删除一分钟前的文件。仅出于测试目的，我尝试了一分钟。结果是文件没有被删除。另一方面，我刚刚删除了这个时间条件

```
if((time() - $filelastmodified) > 60 && is_file($file)) 
```

并运行脚本，它可以立即删除文件。

任何人都可以发现我正在犯的错误吗？

谢谢拉克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:02:10.133

在这里，我的代码按生命周期检查缓存，它工作正常。

```
if (is_file($dir.$file) && is_readable($dir)) {
    if ($lifetime) {
        @clearstatcache();
        if ((time() - @filemtime($dir.$file)) < $lifetime) {
            return file_get_contents($dir.$file); # Return the cache
        } else {
            @unlink($dir.$file); # Cache has expired
        }
    } else {
        return file_get_contents($dir.$file); # Return the cache
    }
} return null; # Cache not found 
```

# php - 如何发布到 PHP 服务，等待该服务回发到客户端该文件

> ID：10934202
> 
> 赞同：0
> 
> 时间：2012-06-07T14:49:06.510
> 
> 标签：php, .net, web-services, post, webclient

我`System.Net.WebClient client`在 .NET 中使用`post`PHP Web 服务的参数。PHP 工作并创建一个文件。我如何强制 .NET 客户端从 php 等待该文件并获取它。

1.  php 如何更好地将其发送到调用他的服务？
2.  我如何在我的 .Net 客户端中等待该文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:02:33.463

在 PHP 中，做您需要能够创建文件的事情。然后创建该文件，获取它`base64_encode`的内容和数据。创建一个 XML（例如）并放入文件名、文件 mime_type 和 base64 编码数据...

它可能看起来像这样（假设文件已经创建并存储在 temp 中的某个位置，文件名存储在变量中`$my_filename_with_extension`，并且它的 mime_type 存储在变量中`$my_file_mime_type`- 如果您需要它...）：

```
$data = base64_encode(file_get_contents(TEMP_DIR.$my_filename_with_extension));
$xml = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>';
$xml .= '<response>
    <filename>'.$my_filename_with_extension.'</filename>
    <mime_type>'.$my_file_mime_type.'</mime_type>
    <data>'.$data.'</data>
</response>';
echo $response; 
```

然后在 .NET 应用程序中解析该 XML 并执行您需要对文件数据执行的任何操作（base64 对其进行解码以获取原始文件数据）。

# php - 在 PHP 中发送标头以重新验证图像的正确方法是什么？

> ID：10934206
> 
> 赞同：0
> 
> 时间：2012-06-07T14:49:17.727
> 
> 标签：php, http, header, http-headers, firebug

我想做什么？

我有一个管理页面，我可以在其中更改图像 - 它们都使用固定名称，并直接上传到文件系统，但有时当我上传时只显示旧图像。

同时我不想一遍又一遍地下载这些页面，因为它会很慢而且很难看。

所以我想要的是不缓存我的php中的实际输出文本，而是让图像重新验证创建日期，如果它比存储在缓存中更新，则下载一个新的，否则从缓存。

请建议我最适合用于此目的的标题，或者如果不可能做到这一点..

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:52:19.970

一种简单的方法是在图像文件名的末尾附加一个查询字符串，并在每次图像更改时更改它。查询字符串被图像文件忽略，因此它根本不会影响它，但对于浏览器来说，它是图像名称的一部分，因此当它更改时，它会强制浏览器获取新图像。

例如，您可以调用图像`someimage.png?1`。当图像更新时，您将调用它`someimage.png?2`。

# ios - iOS：奇怪的 NSSortDescriptor 行为

> ID：10934209
> 
> 赞同：0
> 
> 时间：2012-06-07T14:49:36.057
> 
> 标签：ios, nssortdescriptor

有什么区别：

```
NSSortDescriptor * nameSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]; 
```

和

```
NSSortDescriptor * nameSortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"name" ascending:YES comparator:^(id obj1, id obj2) {
    return [obj1 localizedCaseInsensitiveCompare:obj2];
}]; 
```

?

我正在使用 NSFetchedResultsController。
在第二种情况下，我有一个`"The fetched object at index 241 has an out of order section name 'Z. Objects must be sorted by section name'"`错误。

在第一种情况下，没有问题。但我必须在第二种情况下使用 NSCompare ......

# tridion - Tridion：“项目已发布。无法删除页面。” 页面未发布时出错

> ID：10934210
> 
> 赞同：8
> 
> 时间：2012-06-07T14:49:39.713
> 
> 标签：tridion

当我尝试取消发布和删除页面时，Tridion 会抛出“该项目已发布。无法删除页面。错误并拒绝删除它。

我确认文件已从两个目标成功取消发布，并且取消发布作业在发布队列中显示为“成功”。

在 CM 数据库表中，在 ITEM_STATES 和 PUBLISH_STATES 表中似乎还有与该页面 ID 关联的附加条目。这些额外的行有 STATE = 1（我猜这意味着已发布）和 COMPONENT_TEMPLATE_REF_ID = NULL。这是取消发布后它在 SQL 中的显示方式：

![在此处输入图像描述](../Images/d5685d40be61f30ef357cef7ab6183ae.png)

**(1) 将这些表中的“状态”字段清零或 (2) 完全删除行对我来说是否安全？**

我们刚刚从 Tridion 2011 升级到 Tridion 2011 SP 1，它似乎是在转换之后开始的。我们只发布一份出版物。该出版物有两个目标（如果重要的话）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T14:52:39.207

SDL Tridion 2011 SP1 存在一个已知问题。请查看此修补程序：[https](https://www.sdltridionworld.com/images/CM_2011.1.0.77065_tcm89-20293.zip) ://www.sdltridionworld.com/images/CM_2011.1.0.77065_tcm89-20293.zip （需要登录）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T16:41:40.070

我不建议更新或删除数据库中的任何内容，因为这会使您的保修和支持协议失效。

在存在已发布页面的情况下修改发布目标及其配置时，我遇到了这个问题。发布目标修改后，页面只是在 CM 中停留在“已发布”状态，您无法取消发布或删除它。

解决方法是联系支持人员，他们提供了删除这些“死”页面的 SQL 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T10:03:39.797

请确保“可发布”复选框（在结构组属性中）仍处于选中状态。

# asp.net - 在 ASP.NET 中动态增加变量名

> ID：10934211
> 
> 赞同：1
> 
> 时间：2012-06-07T14:49:47.647
> 
> 标签：asp.net, vb.net, variables, ajaxcontroltoolkit

我正在使用 AJAXToolkit Accordion 控件并根据数据库的查询动态地向它添加窗格。例如：

Jane 登录并调出带有手风琴的页面。在数据库中，她在 todo_list 表中有五行。所以，我需要动态生成五个包含信息的窗格。从表中...但是如果乔登录，他可能只有三行，而乔希可能有十五行——所以我永远无法知道一个人事先会有多少。

所以，我需要一些方法来动态命名变量（或者有另一种方法来做到这一点）。例如，这是我想要完成的一些伪代码：

```
Dim i as integer
For each row in todo_list
   Dim ap + i as New AccordionPane
   Add some info from the row to the pane
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:03:23.920

您不需要创建新的变量名称。您可以简单地将新创建的 AccordionPane 对象添加到另一个对象（如[List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx#Y13062)）

**编辑**：看到 AccoridonPane 是一个托管控件，我建议使用[PlaceHolder](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.placeholder.aspx)控件来保存您的`Accordion`控件，将 AccordionPanes 动态添加到 Accordion 控件，然后将 Accordion 添加到 PlaceHolder：

```
Dim accordion as New AjaxControlToolkit.Accordion    

For each row in todo_list
    Dim ap as New AjaxControlToolkit.AccordionPane
    'Add the row data to the AccordionPane

    accordion.Panes.Add(ap)
Next

'placeHolder is the id of your PlaceHolder control on the page.
placeHolder.Controls.Add(accordion) 
```

# android - 从 Wifi 连接中提取用户身份

> ID：10934216
> 
> 赞同：0
> 
> 时间：2012-06-07T14:50:11.967
> 
> 标签：android, wifi, wifimanager

我有一个具有以下属性的 wifi 连接：802.1 EAP、PEAP、MSCHAPv2。

当我连接到wifi时，需要输入用户名和密码。如何从 Android 获取用户身份？

我有：

```
WifiManager myWifiManager = (WifiManager)getSystemService(this.WIFI_SERVICE);
  WifiInfo info = myWifiManager.getConnectionInfo();
  String a=info.toString();
  alertbox.setMessage(a).show(); 
```

我可以看到有关 wifi 的所有信息（SSID、BSSID、MAC、申请者状态、RSSI ..），但看不到用户和密码。我只需要用户。任何想法？

感谢您的宝贵时间，如果我犯了错误，我为我的英语道歉。

# ruby-on-rails - Michael Hartl 第 8 章 Ruby On Rails。Authentication_pages_spec.rb

> ID：10934218
> 
> 赞同：0
> 
> 时间：2012-06-07T14:50:16.820
> 
> 标签：ruby-on-rails

我在做 Michael Hartl 的 Ruby on Rails 的第 8 章，我完成了这一章，最后运行了我的测试并得到了一些错误。我通过与 Michael Hartl 的 github 相关文件进行交叉检查以及查看他最近的截屏视频来检查我的代码是否正确，但我似乎无法找出错误。

能否请您告诉我错误和解决方案，例如我需要更改的内容？

错误

2) 使用有效信息进行身份验证登录

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x4366b
d8>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

3) 使用有效信息进行身份验证登录

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x43fdd
60>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

4) 使用有效信息进行身份验证登录

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x44773
38>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

5) 使用有效信息进行身份验证登录

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x4153f
f8>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

6) 使用有效信息进行身份验证登录

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x4347f
a8>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

7) 使用有效信息进行身份验证登录

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x43e1e
d8>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

8) 使用有效信息进行身份验证登录，然后退出

```
 ←[31mFailure/Error:←[0m ←[31mbefore { sign_in user }←[0m
     ←[31mNoMethodError:←[0m
       ←[31mundefined method `redirect_back_or' for #<SessionsController:0x446dc
18>←[0m
←[36m     # ./app/controllers/sessions_controller.rb:10:in `create'←[0m
←[36m     # (eval):2:in `click_button'←[0m
←[36m     # ./spec/support/utilities.rb:13:in `sign_in'←[0m
←[36m     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels)
 in <top (required)>'←[0m 
```

**session_conrtoller.rb**

```
class SessionsController < ApplicationController

  def new
  end

  def create
    user = User.find_by_email(params[:session][:email])
    if user && user.authenticate(params[:session][:password])
       sign_in user
       redirect_back_or user
    else
       flash.now[:error] = "Invalid email/password combination"
       render 'new'
    end
  end

  def destroy
    sign_out
    redirect_to root_path
  end
end 
```

**实用程序.rb**

```
include ApplicationHelper

RSpec::Matchers.define :have_error_message do |message|
   match do |page|
    page.should have_selector('div.alert.alert-error', text: 'Invalid')
  end
end

def sign_in(user)
  visit signin_path
  fill_in "Email",    with: user.email
  fill_in "Password", with: user.password
  click_button "Sign in"

  # Sign in when not using Capybara.
  cookies[:remember_token] = user.remember_token
end 
```

**authentication_pages_spec.rb**

```
require 'spec_helper'

describe "Authentication" do

  subject { page }

  describe "signin page" do
    before { visit signin_path }

    it { should have_selector('h1',    text: 'Sign in') }
    it { should have_selector('title', text: 'Sign in') }
  end

  describe "signin" do
    before { visit signin_path }

    describe "with invalid information" do
      before { click_button "Sign in" }

      it { should have_selector('title', text: 'Sign in') }
      it { should have_error_message }

      describe "after visiting another page" do
        before { click_link "Home" }
        it { should_not have_error_message }
      end
    end

    describe "with valid information" do
      let(:user) { FactoryGirl.create(:user) }
      before { sign_in user }

      it { should have_selector('title', text: user.name) }
      it { should have_link('Profile',     href: user_path(user)) }
      it { should have_link('Sign out',    href: signout_path) }
      it { should have_link('Settings',    href: edit_user_path(user)) }
      it { should have_link('Users',       href: users_path) }
      it { should_not have_link('Sign in', href: signin_path) }

      describe "followed by signout" do
        before { click_link "Sign out" }
        it { should have_link('Sign in') }
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:10:23.467

看起来你有未定义的方法我会在`redirect_back_or`. 调试继续....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:42:09.100

我相信该`redirect_back_or`方法是在 app/helpers/sessions_helper.rb 中定义的。

由于您尚未在上面列出该代码，因此我将开始查找那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T17:08:50.290

我跟着这个项目的早期版本，就像 edr 说的那样，该方法`redirect_back_or`是在 app/helpers/sessions_helper.rb 中定义的。请检查它是否在那里，然后您的应用程序应该可以正常运行。

# android - Android 活动问题

> ID：10934219
> 
> 赞同：0
> 
> 时间：2012-06-07T14:50:32.867
> 
> 标签：android, android-activity

我的应用程序中有三个活动：

1.  .OpeningScene：一个包含我的徽标、商业信息、版权等的打开活动和一个启动按钮，用于启动移动到下一个活动的意图
2.  .hfmain：这在主应用程序活动中带有一个帮助按钮，它将意图启动到最后一个活动，这是一个帮助屏幕
3.  .helpscreen：帮助屏幕有简单的说明和一个后退按钮，可让用户返回主应用程序活动 (.hfmain)

这是我的问题。第一次进入应用程序时，打开的 Activity 应该从图标启动，但如果我离开应用程序并返回图标再次启动应用程序，应用程序会在它离开的 Activity 中启动。我知道这是生命周期的一部分，但是为什么每次单击图标时都不会调用启动器的打开活动？

这是我的清单：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".OpeningScene"
        android:label="@string/app_name"
        android:screenOrientation="portrait" 
        >
        <intent-filter>
            <action android:name="android.intent.action.INTROSCENE" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".hfmain"
        android:screenOrientation="portrait" />
    <activity android:name=".helpscreen"
        android:screenOrientation="portrait" />
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:52:34.137

试试这个

```
<intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:54:03.667

如果你真的想结束应用程序，请尝试`finish()`在`onPause()`方法中使用。但是恕我直言，您不应该过多地改变或避免生命周期。

另请参阅： [强制应用程序在第一个活动时重新启动](https://stackoverflow.com/questions/2470870/force-application-to-restart-on-first-activity-android)

# objective-c - 检测用户何时触摸表格中的单元格

> ID：10934222
> 
> 赞同：0
> 
> 时间：2012-06-07T14:50:38.457
> 
> 标签：objective-c, ios, cocoa

我有一些自定义单元格运行良好。我在这些单元格上有一个背景图像。我想在用户手指触摸单元格时更改背景图像。然后它会改变单元格的选择（但这可以在 didSelectRowAtIndexPath 中完成）。

有谁知道如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:58:19.170

由于您已经拥有自定义单元格，因此您可以覆盖 id`touchesBegan:`和`touchesEnded:`

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [super touchesBegan:touches withEvent:event];
    //change background here...
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
{
    [super touchesEnded:touches withEvent:event];
    //restore background here...
} 
```

请注意，我没有对此进行测试-希望它不会只是浪费您的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:00:04.503

从 开始`didSelectRowAtIndexPath`，调用`cellForRowAtIndexPath`检索单元格，然后您可以更改内容。它可能是你需要`[cell setNeedsDisplay];`的。

# winforms - 如何在另一个项目中使用 Windows 窗体用户控件？抛出类型错误？

> ID：10934223
> 
> 赞同：1
> 
> 时间：2012-06-07T14:50:42.620
> 
> 标签：winforms

我在 Windows 窗体中创建了一个简单的用户控件，它由一个按钮和一个文本框组成。按钮的单击事件调整文本框的大小并添加一些文本。我不知道这部分代码是否相关，但无论如何我都会包含它。

```
namespace testUserControl
{
    public partial class UserControl1 : UserControl
    {
        public UserControl1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            textBox1.Width = 200;
            textBox1.Height = 200;
            textBox1.Text = "this text was added by the button";
        }
    }
} 
```

在我试图在多个地方包含此用户控件的项目中，我有一个带有单击事件的按钮，该按钮添加了一个标签页。我希望标签页包含此自定义用户控件。但是，当我使用此代码时，我收到一条错误消息`'testUserControl is a namespace but used like a type'`：

```
namespace main_project_winform
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            TabPage item = new TabPage("header text");
            tabControlCitations.Controls.Add(item);
            testUserControl u = new testUserControl(); //<!-- error occurs here
            item.Controls.Add(u);
        }
    }
} 
```

如何在我的项目中包含和使用此自定义用户控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:51:52.837

正如错误明确指出的那样，`testUserControl`是一个命名空间。

类型是`UserControl1`。
您还需要一个`using`语句来导入命名空间。

# java - Java中的字符串拆分方法

> ID：10934224
> 
> 赞同：-2
> 
> 时间：2012-06-07T14:50:50.457
> 
> 标签：java, string, substring

单个字符串的输出是

> iPad 触控笔和圆珠笔
> 通常在 24 小时内发货
> $9.99

我想将上述字符串的每一行保存到单独的字符串中，例如：

```
String one = "iPad Stylus & Ballpoint Pen";  
String two = "Usually ships in 24 hrs";  
String three = "$9.99"; 
```

应该使用什么方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:52:17.533

```
String inputString = " iPad Stylus & Ballpoint Pen    
     Usually ships in 24 hrs    
    $9.99";

String lines[] = inputString.split("\\r?\\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:54:22.000

使用[番石榴](http://code.google.com/p/guava-libraries/)：

```
Splitter splitter = Splitter.on('\n').trimResults().omitEmptyStrings();
Iterable<String> items = splitter.split(text); 
```

> 参见**[Guava Explained > Strings > Splitter](http://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter)**

# c++ - 命名空间内的类友元函数

> ID：10934226
> 
> 赞同：13
> 
> 时间：2012-06-07T14:50:57.037
> 
> 标签：c++, namespaces, friend

我试图在命名空间之外定义一个类朋友函数，如下所示：

```
namespace A{
class window{
    private:
    int a;
    friend void f(window);
};
}

 void f(A::window rhs){
 cout << rhs.a << endl;
} 
```

我收到一个错误，说有歧义。并且有两个候选者`void A::f(A::window);`和`void f(A::window)`。所以我的问题是：

1) 如何使全局函数`void f(A::window rhs)`成为 A::window 类的朋友。

**编辑：（**阅读答案后）

2）为什么我需要通过 do 将窗口类中的成员函数 f 限定为全局`::f(window)`？

3）为什么我需要在这种特殊情况下预先声明函数 f(A::window) ，而当类不是在命名空间内定义时，在函数被声明为友元之后声明函数是可以的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T15:00:29.423

除了添加`::`你需要转发声明它，例如：

```
namespace A { class window; }

void f(A::window);

namespace A{
  class window{
    private:
    int a;
    friend void ::f(window);
  };
}

void f(A::window rhs){
  std::cout << rhs.a << std::endl;
} 
```

请注意，要使此前向声明起作用，您也需要前向声明该类！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T15:03:47.113

应该这样做：您需要前向声明以明确 f 在全局命名空间中（而不是文件静态）：

```
#include <string>
#include <iostream>

using namespace std;

////// forward declare magic:

namespace A{ class window; }    
void f(A::window rhs);

//////

namespace A {
    class window {
        private:
            int a;
            friend void ::f(window);
    };
}

void f(A::window rhs) {
    cout << rhs.a << endl;
}

int main()
{
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-21T02:40:37.993

使用 ::，您还可以为外部包装命名空间中的类加好友：

```
namespace Na {
class A;
namespace Nb {
class B {
...
   friend class ::Na::A;
}; 
```

无需从全局顶部作为“朋友类 Na::A”，搜索将仅在 Na::Nb::Na 中完成。

# jquery - 在 jquery 选择器上调用函数

> ID：10934228
> 
> 赞同：33
> 
> 时间：2012-06-07T14:51:02.070
> 
> 标签：jquery

好的，通常我会认为自己是 jquery 的中级用户，但这似乎是一个非常菜鸟的问题，我不太确定如何编码。

我有一个要对其运行函数的 div。我知道如何做到这一点的唯一方法是......

```
$("#divname").each(function(){
  dostuff();
}); 
```

当我知道只有一个元素时，这似乎需要更多的工作。我试过这个...

```
$("#divname", function(){ 
  console.log($(this));
}); 
```

...但它写出了整个dom。我只想在这个元素上运行该功能。我怎么做？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-07T14:55:33.043

您应该[调用](http://msdn.microsoft.com/en-us/library/h2ak8h2y%28v=vs.94%29.aspx)该函数，将您的元素作为其对象传递：

```
function doStuff() {
    alert( $(this).html() );
}

doStuff.call( $("#foo")[0] ); 
```

由于我们构建和调用的方式`doStuff`，我们仍然可以将它用作回调`.each`：

```
$(".bar").each( doStuff ); 
```

小提琴：http: [//jsfiddle.net/jonathansampson/WuyJc/](http://jsfiddle.net/jonathansampson/WuyJc/)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-07T14:52:55.830

如果您认为 HTML DOM 中的每个元素都具有唯一性`id`，这意味着没有两个元素具有相同`id`的 ，则`$('#divname')`始终返回一个元素并`$('#divname').each()`运行一次。不超过一个。

现在在你的情况下，你想要类似的东西

```
dosomething( $('#divname') ); 
```

例如：

```
function doSomething( el ) {
   el.append('<span>hello</span>');
}

 doSomething( $('#divname') ); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/170/)**

# java - 定义一个类抽象并在不同的项目中使用它的实现，应该使用什么java包名？

> ID：10934231
> 
> 赞同：0
> 
> 时间：2012-06-07T14:51:03.467
> 
> 标签：java, naming-conventions, package, abstract-class

例如我有

项目 X 与类`a.b.c.d.AbstractFoo`

现在我有一个项目 Y 的实现`AbstractFoo`

是否有使用包名的约定？如果说包名称相同，是否有优势？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:52:54.397

> ***是否有使用包名的约定？***

的实现的包名称应该*对该*`AbstractFoo`类有意义，并且不一定与 的包相同。*`AbstractFoo`*

 *例如，我经常 override / implement `JComponent`，但我仍然不会梦想`package javax.swing`在我的一个源文件中编写代码。

> ***如果说包名称相同，是否有优势？***

不，不是。但是存在语义差异，这是由于默认（包级别）访问修饰符造成的。不过，依赖一个项目的包名与另一个项目的包名匹配对我来说似乎是一个非常糟糕的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:02:17.913

don't use same packages in different projects. it's easy to fall into a name collision in a future. each project should have it's own namespace so you can put both projects on the classpath without any name collision. if you have com.yourcompany.projectA.List interface i would use something like com.yourcompany.listCommons.AbstractList class. there is no standards. naming just should be readable and understandable for others

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:57:59.327

对于不同的项目/JAR，使用不同的包名。以后你会为自己和他人节省很多时间。*

# javascript - Jquery - 链接外部 .js 文件不起作用

> ID：10934234
> 
> 赞同：3
> 
> 时间：2012-06-07T14:51:08.457
> 
> 标签：javascript, jquery, external

由于某种原因，我链接到的外部 .js 文件不起作用。我像这样链接到它：

```
<script src="jquery.js" type="text/javascript"></script>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script> 
```

我已经使用一个简单的内联脚本测试了 jquery，以在单击它时隐藏一段文本，因此 jquery 库存在并且可以正常工作。

jquery.js 文件与调用它的 index.php 文件位于同一文件夹中。

我究竟做错了什么？

这是我在外部 .js 文件中的代码，目前只是为了测试它是否正常工作（它不是）：

```
$("document").ready(function(){

    $("p").click(function(){
        $("p").css("color", "red");

    });

}); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-07T15:02:12.947

**Problem 1**

It looks like jquery.js contains the code you wrote that *depends* on jQuery.

You need to load jQuery **before** you try to use it.

Swap the order of the `<script>` elements.

* * *

**Problem 2**

`$("document")` will wait for `<document>` elements to be ready. HTML doesn't have such a thing. Lose the quotes to pass in the `document` object directly.

Better yet, forget about the explicit call to `ready` and just

```
jQuery(function () { /* your function */ }); 
```

# ruby-on-rails - 在 Shopify 上获取单个客户的所有订单

> ID：10934236
> 
> 赞同：3
> 
> 时间：2012-06-07T14:51:12.070
> 
> 标签：ruby-on-rails, ruby, shopify

有没有办法在 Shopify 上获取所有客户的订单？例如：

```
o = ShopifyAPI::Customer.find(…).orders 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T16:30:09.573

目前没有办法通过该端点按客户过滤订单。

您将需要获取所有订单并按其内容（包括客户 ID）对其进行过滤。

```
orders.select{ |o| o.customer.id == customer_id } 
```

如果这需要快速完成，那么您可能需要将订单存储在数据库中，并与 webhook 保持同步。Shopify Wiki 上有一个**[与商店同步的](http://wiki.shopify.com/Syncing_with_a_Store)**页面，解释了如何执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T16:31:59.237

谢谢，迪伦。

如果可能，我们可以将其添加到 API 愿望清单中吗？能够获得按过滤的订单记录会很棒`customer_id`。例如，“显示属于客户的 10 个最近的挂单”。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-07T14:57:33.683

客户的身份基于他们的电子邮件地址。因此，如果您通过客户的电子邮件搜索订单，您应该能够获得他们的所有订单：

```
@customer = ShopifyAPI::Customer.first
@orders = ShopifyAPI::Order.find(:all, params: { email: @customer.email }) 
```

# cuda - 块，线程，warpSize

> ID：10934240
> 
> 赞同：5
> 
> 时间：2012-06-07T14:51:18.927
> 
> 标签：cuda, warp-scheduler

关于如何选择#blocks & blockSize 已经有很多讨论，但我仍然遗漏了一些东西。我的许多担忧都解决了这个问题：[CUDA Blocks/Warps/Threads 如何映射到 CUDA Cores？](https://stackoverflow.com/questions/10460742/how-cuda-blocks-warps-threads-map-onto-cuda-cores) （为了简化讨论，有足够的 perThread 和 perBlock 内存。内存限制在这里不是问题。）

```
kernelA<<<nBlocks, nThreads>>>(varA,constB, nThreadsTotal); 
```

1）为了让 SM 尽可能忙碌，我应该设置`nThreads`为`warpSize`. 真的？

2) 一个 SM 一次只能执行一个内核。也就是说，该 SM 的所有 HWcore 都只执行 kernelA。（不是一些运行 kernelA 的 HWcore，而其他运行 kernelB。）因此，如果我只有一个线程要运行，我将“浪费”其他 HWcore。真的？

3）如果warp-scheduler发出以单位为单位的工作`warpSize`，并且每个SM有32个HWcore，那么SM将被充分利用。当 SM 有 48 个 HWcore 时会发生什么？当调度程序以 32 个块的形式发布工作时，如何保持所有 48 个内核的充分利用？（如果上一段是真的，调度器以HWcore大小为单位下发工作不是更好吗？）

4）看起来warp-scheduler一次排队2个任务。因此，当当前执行的内核停止或阻塞时，第二个内核被换入。（不清楚，但我猜这里的队列深度超过 2 个内核。）这是正确的吗？

5) 如果我的硬件的上限为每块 512 个线程 (nThreadsMax)，这并不意味着具有 512 个线程的内核将在一个块上运行得最快。（同样，内存不是问题。）如果我将 512 线程内核分布在许多块上，而不仅仅是一个块，我很有可能会获得更好的性能。该块在一个或多个 SM 上执行。真的？

5a）我认为越小越好，但是我做多小有关系`nBlocks`吗？问题是，如何选择那个值`nBlocks`是体面的？（不一定是最优的。）是否有一种数学方法来选择`nBlocks`，或者只是试错法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T20:10:17.420

1) 是的。

2) CC 2.0 - 3.0 设备最多可以同时执行 16 个网格。每个 SM 限制为 8 个块，因此为了达到完全并发，设备必须至少有 2 个 SM。

3) 是的，warp 调度程序在时间选择和发出 warp。忘记 CUDA 内核的概念，它们无关紧要。为了隐藏延迟，您需要具有高指令级并行性或高占用率。对于 CC 1.x，建议 >25%，对于 CC >= 2.0，建议 >50%。一般来说，CC 3.0 需要比 2.0 设备更高的占用率，因为调度器增加了一倍，但每个 SM 的 warp 只增加了 33%。Nsight VSE 问题效率实验是确定您是否有足够的扭曲来隐藏指令和内存延迟的最佳方法。不幸的是，Visual Profiler 没有这个指标。

4）warp调度器算法没有文档化；但是，它不考虑线程块源自哪个网格。对于 CC 2.x 和 3.0 设备，CUDA 工作分配器将在分配来自下一个网格的块之前分配来自一个网格的所有块；但是，编程模型不能保证这一点。

5) 为了让 SM 保持忙碌，您必须有足够的块来填充设备。之后，您要确保有足够的经线来达到合理的占用率。使用大线程块有利有弊。大线程块通常使用较少的指令缓存并且在缓存上的占用空间较小；然而，大线程块在同步线程处停滞（SM 可能变得不那么有效，因为可供选择的扭曲更少）并且倾向于让指令在相似的执行单元上执行。我建议每个线程块尝试 128 或 256 个线程来启动。较大和较小的线程块都有充分的理由。5a) 使用占用计算器。选择太大的线程块大小通常会导致您受到寄存器的限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T15:29:58.780

让我试着一一回答你的问题。

1.  那是对的。
2.  “HWcores”到底是什么意思？你陈述的第一部分是正确的。
3.  根据[NVIDIA Fermi 计算架构白皮书](http://www.nvidia.com/content/PDF/fermi_white_papers/NVIDIA_Fermi_Compute_Architecture_Whitepaper.pdf)：“SM 以 32 个并行线程为一组调度线程，称为 warp。每个 SM 具有两个 warp 调度器和两个指令调度单元，允许同时发出和执行两个 warp。Fermi 的双 warp 调度器选择两个warp，并从每个warp向一组十六个核心、十六个加载/存储单元或四个SFU发出一条指令。因为warp独立执行，Fermi的调度程序不需要从指令流中检查依赖关系”。

    此外，[NVIDIA Keppler 架构白皮书](http://www.nvidia.com/content/PDF/kepler/NVIDIA-Kepler-GK110-Architecture-Whitepaper.pdf)指出：“Kepler 的四次 warp 调度程序选择四个 warp，每个 warp 可以在每个周期调度两个独立的指令。”

    因此，通过一次调度一个以上的 warp 来使用“多余的”核心。

4.  warp 调度器调度相同内核的warp，而不是不同的内核。

5.  不完全正确：每个块都被锁定在一个 SM 中，因为那是它的共享内存所在的位置。
6.  这是一个棘手的问题，取决于您的内核是如何实现的。您可能想看看 Vasily Volkov 的 nVidia Webinar [Better Performance at Lower Occupancy](http://nvidia.fullviewmedia.com/gtc2010/0922-a5-2238.html)，它解释了一些更重要的问题。不过，首先，我建议您使用[CUDA Occupancy Calculator](http://developer.download.nvidia.com/compute/cuda/CUDA_Occupancy_calculator.xls)选择线程数以提高占用率。

# eclipse - 为什么我必须使用 EGit 多次解决冲突

> ID：10934242
> 
> 赞同：0
> 
> 时间：2012-06-07T14:51:23.450
> 
> 标签：eclipse, git

在我的工作中，我们最近从 SVN 切换到了 Git。我们使用 EGit 与 eclipse 集成

现在，我要问一个问题：当我们从 origin/master 拉取大量变更集时，经常会发生冲突，尤其是当我们将类从一个包移动到另一个包时。很好，我们认为，我们将合并它们然后提交，然后推送合并。但是不，当我们这样做时，EGit 仍然显示来自服务器的传入变更集，当我们拉取它们时，它会*再次*产生一些冲突，通常是**我们刚刚合并的同一个烦人的导入**。我们必须做 2 到 4 次才能*最终*合并

**为什么不把所有的事情都冲突一次，然后就结束了呢？**

现在我完全不明白为什么它会这样运作。当然，四分之三的情况发生在我老板的电脑上，这很*糟糕*（TM）

当我们想要获取一些变更集并合并它们时，*正确*的工作流程是什么？请在 Eclipse 中，一些开发人员使用命令行并不容易。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:04:21.543

你承诺解决冲突了吗？

```
混帐添加 f1 f2

git 提交 f1 f2

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T04:27:56.323

几个月后，我可以说这实际上是 EGit 中的一个错误，现已修复。有时在进行拉取时，操作会失败（而不是发生冲突）。这将导致 Eclipse 中的状态损坏，当然尝试在该状态下合并是行不通的。

如果您曾经遇到过这个问题，只需更新您的软件。请注意，它仍然会影响旧版本的 Eclipse，因此如果您仍在使用 Helios（就像我的老板一样），您可能应该升级整个 IDE。

故事的寓意：让您的软件保持最新。

# sql - MERGE 的算术溢出错误（数字到数字）：SQL Server 错误？

> ID：10934243
> 
> 赞同：3
> 
> 时间：2012-06-07T14:51:24.260
> 
> 标签：sql, sql-server, sql-server-2008

我有一个`TargetTable`包含一`DECIMAL(20, 7)`列的目标表。我也有一个`SourceTable`包含一`DECIMAL(20, 7)`列的源表，但是这个表中的值无论如何都是整数。

当我尝试通过语句将数据插入`TargetTable`from时，出现标准错误。`SourceTable``MERGE`

> 将数字转换为数字数据类型的算术溢出错误。

我真的不明白为什么会发生这种情况，因为两种数据类型都是相同的。

不过，奇怪的是：当我使用`SELECT INTO`on`TargetTable`创建一个 test table `TestTable`，然后将合并的目标更改为`TestTable`， upsert 完成。我也不明白为什么会这样，因为`TargetTable`和`TestTable`大部分是相同的。

以前有没有人遇到过这种情况，这是一个错误，还是我缺少 SQL Server 的一些模糊的细微差别？

* * *

**示例代码**：

失败：

```
SET NUMERIC_ROUNDABORT Off
GO

MERGE
    TargetTable Target
USING
    (
        SELECT
            cast(forecast as DECIMAL(20, 7)) forecast
          ,[SegmentID]
          ,[Country]
          ,[Environment]
          ,[YearColumn]
          ,[ForecastYear]
          ,[Criterion]
        FROM
            SourceTable
    ) Source
    ON
    (
        Target.SegmentID = Source.SegmentID
        AND Target.Country = Source.Country
        AND Target.Environment = Source.Environment
        AND Target.YearColumn = Source.YearColumn
        AND Target.ForecastYear = Source.ForecastYear
        AND Target.Criterion = Source.Criterion
    )
WHEN NOT MATCHED BY TARGET AND Source.Forecast <> 0 AND Source.Forecast IS NOT NULL THEN
    INSERT (SegmentID, Country, Environment, YearColumn, Forecast, ForecastYear, Criterion)
    VALUES (Source.SegmentID, Source.Country, Source.Environment, Source.YearColumn, Source.Forecast, Source.ForecastYear, Source.Criterion)
WHEN MATCHED AND (Source.Forecast = 0 OR Source.Forecast IS NULL) THEN
    DELETE
WHEN MATCHED AND Source.Forecast <> Target.Forecast THEN
    UPDATE SET Target.Forecast = Source.Forecast; 
```

成功：

```
SELECT
    *
INTO
    TestTable
FROM
    TargetTable
GO

SET NUMERIC_ROUNDABORT Off
GO

MERGE
    TestTable Target
USING
    (
        SELECT
            cast(forecast as DECIMAL(20, 7)) forecast
          ,[SegmentID]
          ,[Country]
          ,[Environment]
          ,[YearColumn]
          ,[ForecastYear]
          ,[Criterion]
        FROM
            SourceTable
    ) Source
    ON
    (
        Target.SegmentID = Source.SegmentID
        AND Target.Country = Source.Country
        AND Target.Environment = Source.Environment
        AND Target.YearColumn = Source.YearColumn
        AND Target.ForecastYear = Source.ForecastYear
        AND Target.Criterion = Source.Criterion
    )
WHEN NOT MATCHED BY TARGET AND Source.Forecast <> 0 AND Source.Forecast IS NOT NULL THEN
    INSERT (SegmentID, Country, Environment, YearColumn, Forecast, ForecastYear, Criterion)
    VALUES (Source.SegmentID, Source.Country, Source.Environment, Source.YearColumn, Source.Forecast, Source.ForecastYear, Source.Criterion)
WHEN MATCHED AND (Source.Forecast = 0 OR Source.Forecast IS NULL) THEN
    DELETE
WHEN MATCHED AND Source.Forecast <> Target.Forecast THEN
    UPDATE SET Target.Forecast = Source.Forecast; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T15:16:52.063

Your code seems to have no error at all. Furthermore, the fact that it works fine when you create another table as the target, using the same structure and data that the original table shows that the error is not there. The most likely reason is that you have a trigger on your original table that is executing a query that fails, and that is the error you are seeing.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-03T19:17:17.813

发生这种类型的错误是因为您可以将触发器与该特定表一起使用，但是该表上下文或数据库中执行了一些更改，因此它显示错误这种类型的错误，因此请禁用触发器并执行任务

# android - 识别要在 ImageView 中显示的图像部分

> ID：10934246
> 
> 赞同：1
> 
> 时间：2012-06-07T14:51:43.840
> 
> 标签：android, android-layout, android-canvas, android-imageview

我有一张图像，里面有不同的任意形状的部分。

![在此处输入图像描述](../Images/24043252bf7f3033da70023b611746d1.png)

现在我想在单击图像的特定部分时显示一些数据。例如，当我单击 A 部分时，我想显示一个带有该部分名称的通知。

我不知道如何完成这项任务。请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:56:59.330

尝试添加一个`OnTouchListener`以获取您的图像被触摸的坐标。使用这些坐标，您可以匹配单击的形状。

# jsf - jsf过滤器似乎不起作用

> ID：10934255
> 
> 赞同：5
> 
> 时间：2012-06-07T14:52:05.337
> 
> 标签：jsf, login, servlet-filters, faces-config

我试图用 jsf 创建一个安全的登录页面，我使用这些代码片段作为解决方案，在[这个问题](https://stackoverflow.com/questions/1470591/basic-security-in-jsf)中找到。我的问题是，我可以在不登录的情况下访问/restricted/secret.xhtml，没有重定向，就像没有应用过滤器一样，因为如果我直接进入/restricted/secret.xhtml #{user.loggedIn } 评估为假，我仍然可以查看该页面。这是我的代码：

AuthFilter.java

```
public class AuthFilter implements Filter {

private FilterConfig config;

@Override
public void destroy() {
    this.config = null;
}

@Override
public void doFilter(ServletRequest req, ServletResponse resp,
        FilterChain ch) throws IOException, ServletException {

    HttpSession s =  ((HttpServletRequest) req).getSession();
    if (s.getAttribute(UserBean.CREDENTIAL)==null)
    {
        ((HttpServletResponse) resp).sendRedirect("/login.faces");
    }else
    {
        ch.doFilter(req, resp);
    }
}
@Override
public void init(FilterConfig config) throws ServletException {
    this.config = config;
}
} 
```

用户Bean.java

```
@ManagedBean(name="user")
@SessionScoped
public class UserBean implements Serializable {

private String name;
private String password;
protected static final String CREDENTIAL = "ontherun";

private static final long serialVersionUID = 1L;

public String getName()
{
    return this.name;
}

public void setName(String newName)
{
    this.name = newName;
}

public String getPassword()
{
    return this.password;
}

public void setPassword(String newPassword)
{
    this.password = newPassword;
}

public boolean isLoggedIn()
{
    return FacesContext.getCurrentInstance().getExternalContext()
            .getSessionMap().get(CREDENTIAL) != null;
}

public String logout() {
    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().remove(CREDENTIAL);
    return null;
}

public String login()
{
    FacesContext.getCurrentInstance().getExternalContext().getSessionMap().put(CREDENTIAL, this.name);
    return "secret";
}
} 
```

这是我的 login.xhtml ；页面工作正常，所以模板文件没有问题。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html   xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">
<head><title>IGNORED</title></head>

<body>
<ui:composition template="/templates/masterLayoutTemplate.xhtml">
 <ui:define name="windowTitle">
             #{msgs.window_title}
 </ui:define>

 <ui:define name="header">
    <ui:include src="/sections/login/header.xhtml"></ui:include>
 </ui:define>

 <ui:define name="footer">
    <ui:include src="/sections/login/footer.xhtml"></ui:include>
 </ui:define>

 <ui:define name="content">
        <h:form>
            <h:panelGrid columns="2">
                #{msgs.namePrompt}
            <h:inputText id="name" value="#{user.name}"/>
                #{msgs.passwordPrompt}
            <h:inputSecret id="password" value="#{user.password}"/>
            </h:panelGrid>
            <p>
            <h:commandButton value="#{msgs.loginButtonText}" action="#{user.login }"/>
            </p>
            <p>
                You are logged in : #{user.loggedIn} 
            </p>
            <p>
            <h:commandButton value="logout" action="#{user.logout }"/>
            </p>
        </h:form>
 </ui:define>
 </ui:composition>
</body>
</html> 
```

这是应该被限制的secret.xhtml：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html   xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">
<head><title>IGNORED</title></head>

<body>
<ui:composition template="/templates/masterLayoutTemplate.xhtml">
 <ui:define name="windowTitle">
     #{msgs.window_title}
 </ui:define>

 <ui:define name="content">
        <h:head></h:head>
        <h:body>
            <p>You are #{user.loggedIn}</p>
        </h:body>

 </ui:define>
 </ui:composition>
</body>
</html> 
```

这是我的配置文件：web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
<display-name>OnTheRun</display-name>

<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<welcome-file-list>
    <welcome-file>faces/index.xhtml</welcome-file>
</welcome-file-list>

<filter>
        <filter-name>AuthFilter</filter-name>
        <filter-class>on.run.AuthFilter</filter-class>
 </filter>
 <filter-mapping>
        <filter-name>AuthFilter</filter-name>
        <url-pattern>/restricted/*</url-pattern>
 </filter-mapping>

<context-param>
    <param-name>javax.faces.PROJECT_STAGE</param-name>
    <param-value>Development</param-value>
</context-param>

</web-app> 
```

和 faces-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
version="2.0">
<application>
    <resource-bundle>
        <base-name>on.run.messages</base-name>
        <var>msgs</var>
    </resource-bundle>
</application>

<navigation-rule>
        <from-view-id>/index.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>login</from-outcome>
        <to-view-id>/profile.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule>

<navigation-rule>
        <from-view-id>/login.xhtml</from-view-id>
    <navigation-case>
        <from-outcome>secret</from-outcome>
        <to-view-id>/restricted/secret.xhtml</to-view-id>
        <redirect/>
    </navigation-case>
</navigation-rule>
</faces-config> 
```

我的目录结构如下所示：[dirStruct](http://i48.tinypic.com/9hjomd.png) [2](http://i48.tinypic.com/9hjomd.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T15:00:46.193

您已映射`FacesServlet`而`/faces/*`不是`*.xhtml`. 所以所有的 JSF 请求都会`/faces`在 URL 中有前缀。但是您已经映射了`AuthFilter`on`/restricted/*`而不是`/faces/restricted/*`，因此它永远不会启动`/faces/*`URL。

您可以通过 2 种方式解决此问题：

1.  映射`FacesServlet`on`*.xhtml`而不是 on `/faces/*`。`/faces`这具有额外的优势，即当最终用户故意从浏览器地址栏中的 URL 中删除路径时，最终用户将永远无法看到原始 JSF 源代码。

2.  映射`AuthFilter`on`/faces/restricted/*`而不是 on `/restricted/*`。

我个人推荐第一种方式。您最终会得到一个更短更好的 URL，并且您还可以立即防止 JSF 源代码泄漏。

# python - 如何禁用 pyc 和 pyo 文件的生成？

> ID：10934260
> 
> 赞同：4
> 
> 时间：2012-06-07T14:52:17.553
> 
> 标签：python, autotools, automake

无论我做什么，Autotools 都坚持在构建我的项目时（而不是在运行它时）生成 pyo 和 pyc 文件。问题是我的Python配置有些奇怪，我不希望Python编译器在安装过程中运行。有没有办法禁用生成这些文件？

作为参考，以下是我尝试过的事情：

*   设置 py_compile=echo 以便 automake 不会编译 Python 脚本
*   在 Makefile.am 中手动定义 install-pythonPYTHON
*   设置 PYTHONFLAGS=-B
*   在 Makefile.am、configure.ac 等中设置 PYTHONDONTWRITEBYTECODE。
*   创建一个新的自动生成变量“python2dir”并使用 dist_python2_DATA = Script.py 安装脚本

基本上，如果文件以 .py 扩展名结尾，无论您做什么，Automake 都会创建 pyc 和 pyo 文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:59:40.123

[请参阅文档](http://docs.python.org/using/cmdline.html#miscellaneous-options)中的 -B 选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T05:49:34.413

请在最后一次尝试时再试一次。

```
dist_python_DATA = foo.py 
```

将`foo.py`视为任何常规文件，分发它，并将其安装在`$(pythondir)`. `_DATA`不会触发任何类型的编译。

# c++ - C++ Metro App Tutorial 的编译错误 - 任务继续

> ID：10934265
> 
> 赞同：3
> 
> 时间：2012-06-07T14:52:36.010
> 
> 标签：c++, windows-8, microsoft-metro, visual-studio-2012, ppl

我正在学习 msdn ([链接](http://msdn.microsoft.com/en-us/library/windows/apps/hh465045.aspx)) 上的“教程：使用 C++ 创建您的第一个 Metro 风格应用程序”。不久进入它的“第 2 部分”，我遇到了一个错误。我在 Windows 8 VM Release Preview（5 月 31 日）和 Visual Studio 2012 Release Candidate（最新）上运行它。

在添加了 3 个新的 Metro 页面、ItemsPage、SplitPage 和新的“DetailPage”之后，我所在的位置是代码部分。添加这些很好，但是当我直接在下面添加代码时，在标记为“修改初始化数据模型的异步代码”的部分中，它会创建以下错误的两个副本：

```
error C2893: Failed to specialize function template ''unknown-type' Concurrency::details::_VoidReturnTypeHelper(_Function,int,...)' c:\program files (x86)\microsoft visual studio 11.0\vc\include\ppltasks.h   404 1   SimpleBlogReader 
```

然后我从该部分中取出所有代码并开始一次添加一段以找出错误“真正”在哪里，因为我显然没有修改那个标准头文件。原来它在`App::InitDataSource`方法的任务链中：

```
SyndicationClient^ client = ref new SyndicationClient();   

for(wstring url : urls)
{
    // Create the async operation. 
    // feedOp is an IAsyncOperationWithProgress<SyndicationFeed^, RetrievalProgress>^
    auto feedUri = ref new Uri(ref new String(url.c_str()));
    auto feedOp = client->RetrieveFeedAsync(feedUri);

    // Create the task object and pass it the async operation.
    // SyndicationFeed^ is the type of the return value
    // that the feedOp operation will eventually produce.       

    // Then, initialize a FeedData object with the feed info. Each
    // operation is independent and does not have to happen on the
    // UI thread. Therefore, we specify use_arbitrary.
    create_task(feedOp).then([this]  (SyndicationFeed^ feed) -> FeedData^
    {
        return GetFeedData(feed);
    }, concurrency::task_continuation_context::use_arbitrary())

        // Append the initialized FeedData object to the list
        // that is the data source for the items collection.
        // This has to happen on the UI thread. By default, a .then
        // continuation runs in the same apartment thread that it was called on.
        // Because the actions will be synchronized for us, we can append 
        // safely to the Vector without taking an explicit lock.
        .then([fds] (FeedData^ fd)
    {
        fds->Append(fd);

        // Write to VS output window in debug mode only. Requires <windows.h>.
        OutputDebugString(fd->Title->Data());
        OutputDebugString(L"\r\n");
    })

        // The last continuation serves as an error handler. The
        // call to get() will surface any exceptions that were raised
        // at any point in the task chain.
        .then( [this] (concurrency::task<SyndicationFeed^> t)
    {
        try
        {
            t.get();
        }
        // SyndicationClient throws E_INVALIDARG 
        // if a URL contains illegal characters.
        catch(Platform::InvalidArgumentException^ e)
        {
            // TODO handle error. For example purposes
            // we just output error to console.
            OutputDebugString(e->Message->Data());
        }
    }); //end task chain 
```

我一次取出一个 lambdas（并放入分号以便编译），如果我有前两个，那很好，但链中的最后一个会导致错误。但如果我`create_task`只是最后一个，它会编译。或者如果我用它编译的第一个和第三个来做。或者只有前两个。

问题是第二个 lambda 吗？头库是否对 void 返回类型感到困惑？或者是别的什么？根据这个理论，我将“最终”处理程序声明修改为：

```
 // The last continuation serves as an error handler. The
        // call to get() will surface any exceptions that were raised
        // at any point in the task chain.
        .then( [this] (concurrency::task<void> t) 
```

现在编译。但是根据 msdn 上的文档（[这里](http://msdn.microsoft.com/en-us/library/dd492427%28v=vs.110%29.aspx)），这是对的吗？该页面上有一个名为“基于价值的与基于任务的延续”的部分，复制如下：

> 给定一个返回类型为 T 的任务对象，您可以为其后续任务提供一个类型为 T 或任务的值。采用 T 类型的延续称为基于值的延续。当前面的任务没有错误地完成并且没有被取消时，将安排一个基于值的延续来执行。将类型任务作为其参数的延续称为基于任务的延续。基于任务的延续总是安排在前面的任务完成时执行，即使前面的任务被取消或抛出异常也是如此。然后，您可以调用 task::get 来获取先前任务的结果。如果前面的任务被取消，task::get 抛出 concurrency::task_canceled。如果前面的任务抛出异常，task::get 会重新抛出该异常。

这是说错误处理的最终延续应该是最终`.then`延续的类型，还是原始延续的类型`create_task`？如果它是最终的（就像我在上面所做的那样`void`），这种延续实际上会处理所有上述错误，还是仅处理最终`.then`调用的错误？

这是“修复”他们的例子的正确方法吗？或不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:09:36.303

我认为问题在于您需要来自第二个 lambda 的返回类型，该类型将被馈送到第三个（请参阅`FeedData`第一个任务的返回类型和第二个任务的参数类型的匹配）。由于第二个任务不返回任何东西`void`似乎是正确的选择。由于您想使用第三个来捕获错误，因此您需要使用`concurrency::task<void>`（基于报价）。

此外，根据引用，如果前面的（本例中的第二个）任务失败，则将调用最终任务，并在调用时报告其执行期间发生的任何错误`t.get()`。我不确定第一个失败的情况，但是您可以通过从第一个任务中抛出任意异常来尝试发生什么。

# ruby-on-rails-3.1 - rake assets:precompile 在推送到 Heroku 期间失败

> ID：10934269
> 
> 赞同：9
> 
> 时间：2012-06-07T14:52:44.293
> 
> 标签：ruby-on-rails-3.1, heroku, asset-pipeline

我目前在我的 Rails 应用程序中使用asset_sync，并且在我的 Heroku 应用程序中设置了环境变量。当我运行 heroku config 时，我得到：

```
AWS_ACCESS_KEY_ID:     XXXXXXXXXXXXXXXXXX
AWS_SECRET_ACCESS_KEY: XXXXXXXXXXXXXXXXXX
FOG_DIRECTORY:         MY-BUCKET-NAME
FOG_PROVIDER:          AWS
etc... 
```

当我将我的应用程序推送到 Heroku 时，它会尝试运行 rake assets:precompile 并收到以下消息：

```
Preparing app for Rails asset pipeline
Running: rake assets:precompile
/usr/local/bin/ruby /tmp/build_2pa7aisux9av8/vendor/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=production RAILS_GROUPS=assets
AssetSync: using /tmp/build_2pa7aisux9av8/config/initializers/asset_sync.rb
rake aborted!
Fog directory can't be blank, Aws access key can't be blank, Aws secret access key can't be blank 
```

但后来我运行：

```
heroku run rake assets:precompile --app my-app-name 
```

...它处理一切并同步到 S3 就好了：

```
Running `rake assets:precompile` attached to terminal... up, run.1
/usr/local/bin/ruby /app/vendor/bundle/ruby/1.9.1/bin/rake assets:precompile:all RAILS_ENV=staging RAILS_GROUPS=assets
AssetSync: using /app/config/initializers/asset_sync.rb
/usr/local/bin/ruby /app/vendor/bundle/ruby/1.9.1/bin/rake assets:precompile:nondigest RAILS_ENV=staging RAILS_GROUPS=assets
AssetSync: using /app/config/initializers/asset_sync.rb
AssetSync: Syncing.
Using: Directory Search of /app/public/assets
Uploading: assets/application-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.css
Uploading: assets/application-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.css.gz
Uploading: assets/application-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.css.gz
Uploading: assets/application-XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX.css
AssetSync: Done. 
```

任何想法为什么它在推送期间不起作用但是当我运行 rake assets:precompile 时它会正常工作？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-28T14:50:11.457

我在我们的一台服务器上遇到了同样的问题，直到我在asset_sync github页面上找到文档说你需要运行

```
heroku labs:enable user-env-compile --app <appname> 
```

为了让它工作。

Heroku 也有[AssetSync 文档](https://devcenter.heroku.com/articles/cdn-asset-host-rails31#configuration)

现在只编译一次资产真是太好了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T06:01:33.150

我可以看到您正在使用`--app my-app-name`选项运行 assets:precompile rake 任务。只是为了确定，你有多个应用程序`Heroku`吗？（例如分期和制作）。如果你确实确保运行 heroku config`--app my-app-name`会产生你使用 config.xml 的输出`heroku`。

如果您使用上述命令获得了预期的结果，则很可能这些`ENV`变量在 git push 上不可用，如[asset_sync_test github readme](https://github.com/rumblelabs/asset_sync_test_3_1_1)中所建议的那样。您可以通过在`config/environments/*.rb`文件中使用以下内容来解决此问题：

```
config.asset_sync.aws_access_key = ENV['AWS_ACCESS_KEY_ID']
config.asset_sync.aws_access_secret = ENV['AWS_SECRET_ACCESS_KEY']
config.asset_sync.aws_bucket = ENV['FOG_DIRECTORY']
config.asset_sync.fog_provider = ENV['FOG_PROVIDER'] 
```

# c++ - 在 Visual C++ 上使用 msxml6.h 时出错

> ID：10934270
> 
> 赞同：1
> 
> 时间：2012-06-07T14:52:47.250
> 
> 标签：c++, visual-studio-2010, visual-c++, msxml6

在 Visual Studio 2010 中，如果我启动一个控制台项目并 #include 这工作正常，但如果我启动一个 win32 项目并 #include ，它会在编译期间返回许多错误。

为什么？

```
Error    1   error C2146: syntax error : missing ';' before identifier 'IXMLDOMImplementation'   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    49  1   provamsxml6
Error   2   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    49  1   provamsxml6
Error   3   error C2146: syntax error : missing ';' before identifier 'IXMLDOMImplementation'   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    49  1   provamsxml6
Error   4   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    49  1   provamsxml6
Error   5   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    49  1   provamsxml6
Error   6   error C2086: 'int IXMLDOMImplementation' : redefinition c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    49  1   provamsxml6
Error   7   error C2146: syntax error : missing ';' before identifier 'IXMLDOMNode' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    55  1   provamsxml6
Warning 8   warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    55  1   provamsxml6
Error   9   error C2146: syntax error : missing ';' before identifier 'IXMLDOMDocumentFragment' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    61  1   provamsxml6
Warning 10  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    61  1   provamsxml6
Error   11  error C2146: syntax error : missing ';' before identifier 'IXMLDOMDocument' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    67  1   provamsxml6
Warning 12  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    67  1   provamsxml6
Error   13  error C2146: syntax error : missing ';' before identifier 'IXMLDOMDocument2'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    73  1   provamsxml6
Warning 14  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    73  1   provamsxml6
Error   15  error C2146: syntax error : missing ';' before identifier 'IXMLDOMDocument3'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    79  1   provamsxml6
Warning 16  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    79  1   provamsxml6
Error   17  error C2146: syntax error : missing ';' before identifier 'IXMLDOMNodeList' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    85  1   provamsxml6
Warning 18  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    85  1   provamsxml6
Error   19  error C2146: syntax error : missing ';' before identifier 'IXMLDOMNamedNodeMap' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    91  1   provamsxml6
Warning 20  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    91  1   provamsxml6
Error   21  error C2146: syntax error : missing ';' before identifier 'IXMLDOMCharacterData'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    97  1   provamsxml6
Warning 22  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    97  1   provamsxml6
Error   23  error C2146: syntax error : missing ';' before identifier 'IXMLDOMAttribute'    c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    103 1   provamsxml6
Warning 24  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    103 1   provamsxml6
Error   25  error C2146: syntax error : missing ';' before identifier 'IXMLDOMElement'  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    109 1   provamsxml6
Warning 26  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    109 1   provamsxml6
Error   27  error C2146: syntax error : missing ';' before identifier 'IXMLDOMText' c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    115 1   provamsxml6
Warning 28  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    115 1   provamsxml6
Error   29  error C2146: syntax error : missing ';' before identifier 'IXMLDOMComment'  c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    121 1   provamsxml6
Warning 30  warning C4091: '' : ignored on left of 'interface' when no variable is declared c:\program files (x86)\microsoft sdks\windows\v7.0a\include\msxml6.h    121 1   provamsxml6 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-23T22:04:52.870

缺少的是`#include <ole2.h>`或其中的一部分。
何时`WIN32_LEAN_AND_MEAN`定义 Ole2 是从`Windows.h`. 如果定义
了 Ole2 可以添加回来。`INC_OLE2`

如果您提供标题并且不确定用户可能定义什么，那么您可以寻求安全

```
#if !defined(INC_OLE2) && defined(WIN32_LEAN_AND_MEAN)
#include <ole2.h>
#endif
#include <msxml2.h> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:39:42.140

问题是stdafx.h文件中的#define WIN32_LEAN_AND_MEAN，删除该条目即可解决。

# eclipse - Eclipse/C++ 配置问题

> ID：10934271
> 
> 赞同：0
> 
> 时间：2012-06-07T14:52:48.420
> 
> 标签：eclipse

我正在尝试在带有 CDT 和 MinGW 的 Win7/64 Professional 上配置 Eclipse/Helios。当我尝试编译时：

```
#include <iostream>
using namespace std ;

int main() {
  cout << "What a lovely day\n" ;
  return(0) ;
} 
```

我得到输出/错误：

```
make all 
Building file: ../SeeProgram.cpp
Invoking: Cross G++ Compiler
C:\Tools\MinGW\bin\g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"SeeProgram.d" -MT"SeeProgram.d" -o"SeeProgram.o" "../SeeProgram.cpp"
/bin/sh: C:ToolsMinGWbing++: command not found
make: *** [SeeProgram.o] Error 127 . 
```

在倒数第二行中，它应该是 C:\Tools\MinGW\bin\g++，但它省略了反斜杠。我没有看到任何其他关于这个的讨论，并且尝试了很多方法，但我现在很难过。有什么想法吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:56:52.403

您是否尝试在输入位置时转义反斜杠，例如：

```
C:\\Tools\\MingGW\\bin\\g++ 
```

这个设置看起来和你的很相似，也许它可以提供一个提示：

[http://max.berger.name/howto/cdt/ar01s03.jsp#wincompiler](http://max.berger.name/howto/cdt/ar01s03.jsp#wincompiler)

# javascript - 需要帮助近似欧拉常数

> ID：10934273
> 
> 赞同：1
> 
> 时间：2012-06-07T14:52:53.897
> 
> 标签：javascript, math

它非常接近，但只有一个数字。如果您可以在这里更改任何内容以使其更好，我们将不胜感激。我正在比较我的号码，`Math.E`看看我是否接近。

```
var e = (function() {
    var factorial = function(n) {
        var a = 1;
        for (var i = 1; i <= n; i++) {
            a = a * i;
        }
        return a;

    };
    for (var k = 0, b = []; k < 18; k++) {
        b.push(b.length ? b[k - 1] + 1 / factorial(k) : 1 / factorial(k));
    }
    return b[b.length - 1];
})();
document.write(e);document.write('<br />'+ Math.E);​ 
```

我的号码：2.7182818284590455
`Math.E`：2.718281828459045

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:03:21.563

从较高的数字到较低的数字以最大程度地减少取消：

```
var e = 1;
for(var k = 17; k > 0; --k) {
    e = 1 + e/k;
}
return e; 
```

通过霍纳规则评估泰勒多项式甚至可以避免阶乘并允许您使用更多项（但不会超过 17 项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:55:41.243

据我所知，您的数字与您的数字相同`Math.E`，甚至具有更好的精度。

2.7182818284590455

2.718281828459045

到底是什么问题？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T17:34:14.460

使用 javascript，由于 javascript 计算的精度级别，您无法以这种方式计算*e 。*有关详细信息，请参阅[http://www.javascripter.net/faq/accuracy.htm](http://www.javascripter.net/faq/accuracy.htm)。

为了演示这个问题，请看下面的小提琴，它计算 e 和 n 从 50000000 开始，每 10 毫秒将 n 递增 1：

[http://jsfiddle.net/q8xRs/1/](http://jsfiddle.net/q8xRs/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T12:50:53.320

我喜欢使用整数值来近似真实值。
e 的可能近似值按精度递增顺序为：
11/4
87/32
23225/8544
3442297523731/1266350489376

That last one is fairly accurate, equating to:
2.7182818284590452213260834432
which doesn't diverge from [wikipedia's value](http://en.wikipedia.org/wiki/E_%28mathematical_constant%29) till the 18th:
2.71828182845904523536028747135266249775724709369995

So there's that, if you're interested.

# reportingservices-2005 - 如果单元格中没有值，则删除整行

> ID：10934277
> 
> 赞同：0
> 
> 时间：2012-06-07T14:53:16.053
> 
> 标签：reportingservices-2005

![在此处输入图像描述](../Images/24a48683413d6ec454e4b5e2335447f7.png)

如果没有 X（已发布），我需要删除整行。检索到的数据返回已评级和已发布的项目，但我只想显示已发布。

底部的逻辑规定只有表单名称：GL 和状态：已发布（绿色）应该显示，我不明白为什么评级项目（红色）占用空间。

我试图让它们隐藏在列级别，但自然会有很大的空洞，没有代表行的线条，但仍然有空白空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:45:17.530

我可能遗漏了一些东西，但你为什么隐藏在列级别？您应该能够使用如下表达式隐藏一行：

```
=Iif(Fields!Status.Value <> "Issued", True, False) 
```

另一种选择是使用类似的逻辑将过滤器应用于数据区域。

# batch-file - For 语句在批处理文件中不起作用

> ID：10934283
> 
> 赞同：1
> 
> 时间：2012-06-07T14:53:38.310
> 
> 标签：batch-file, for-loop, command, cmd, move

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:21:14.693

Most likely you have UTF-8 encoding set in notepad++ You will need to change it to **UTF-8 without BOM** or ANSI in order to work with cmd (batch)

Strange characters you see at the beginning is BOM - byte order mark code used by UTF

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:18:42.610

唯一想到的是编码。确保它以 cmd 可以理解的格式保存（当我的 .cmd 文件保存为 Unicode Big Endian 时遇到类似问题。可以通过将文件保存为 UTF-8 来重现您的错误。尝试改用 ANSI。

HTH 巴特克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:02:10.600

# c# - DbContext behave differently within different classes

> ID：10934285
> 
> 赞同：1
> 
> 时间：2012-06-07T14:53:40.340
> 
> 标签：c#, asp.net-mvc-3, entity-framework, azure

I have a local *ASP.NET MVC 3 Windows Azure Project* where I use a local instance of *MSSQL Express* for my emulator.

In my **web.config** I have the following connection string:

`<add name="ExampleDb" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;Initial Catalog=ExampleDb;User Instance=true;MultipleActiveResultSets=True" providerName="System.Data.SqlClient" />`

For debugging purposes I have the following in my **WebRole.cs** file:

```
public override bool OnStart() 
{
    ExampleDb context = new ExampleDb();
    context.ExampleItemEntries.Add(new ExampleItem() { ExampleItemId = 1, Att1 = "1", Att2 = "2" });
    context.SaveChanges();     
    return base.OnStart();
} 
```

When I perform this action I can actually see the content in my code-first generated database (using Entity Framework). Database: ExampleDb, Table: ExampleItem.

However, doing the exact same thing in *ExampleController* **does NOT** update the database. Instead this data goes somewhere else (I have no idea where). When I visit my controller via the browser I can upload data and look at it but it is not stored in my ExampleDb database, only data sent from WebRole.cs is in the database.

*Any ideas what's causing this behaviour?*

**ExampleDb.cs** looks like this:

```
public class ExampleDb : DbContext
{
    public ExampleDb() : base("ExampleDb") { }
    public DbSet<ExampleItem> ExampleItemEntries { get; set; }     
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:06:55.643

您的连接字符串包含“用户实例=真”。这意味着 SQLEXPRESS 使用用户实例来存储您的数据。这是包含一组新数据库的完全不同的 SQL Server 实例。

我假设 WebRole.cs 中的代码与 ExampleController 中的代码在不同的用户帐户中运行。当 ExampleController 在非管理员用户帐户下运行时，将使用用户实例...

因此，当您从连接字符串中删除 'User Instance=True' 并为 SQLEXPRESS 数据库实例分配适当的访问权限时，即可解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:24:34.450

在 CodeFirst 模型中，您应该首先在 web.config 中定义连接字符串，如下所示：

```
<connectionStrings>
 <add name="ExampleDbConnection"
      connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;
                   database=ExampleDb;
                   AttachDBFilename=|YouDataDirectory|yourdb.mdf;
                   User Instance=true"
       providerName="System.Data.SqlClient" />
<connectionStrings/> 
```

DbContext 类构造函数接受在 web.config 中指定连接字符串名称的名称-值对。因此，您可以在上下文中引用此连接字符串：

```
class ExampleDb : DbContext
{
  public ExampleDb() : base("name=ExampleDbConnection") { }
  ...
} 
```

此代码在 ASP.NET MVC Web 角色中运行良好，因此您可以按上述方式尝试。

# ios - Live Streaming over RTMP from Wowza to iOS

> ID：10934286
> 
> 赞同：0
> 
> 时间：2012-06-07T14:53:53.757
> 
> 标签：ios, live, rtmp, live-streaming, wowza

I'm trying to play a live stream that is being sent out by a `Wowza` server, we are using `RTMP` to handle the streams. We have an equivalent for that works on android and the way they do it is by connecting to the server via the url and 2 parameters to identify the actual stream to play and if you are allowed to see the live video. After the connection is attempted, the server does a call back sending an integer for a check to see if the user is logged in. Once the check has passed, the video is played.

I have no idea how to handle the call back or how to properly set up the connection so that it takes both parameters and the url.

One big issue is that the `Wowza` server was created by a third party that we are no longer in contact with, so i have no idea on how the actual server is set up.

Any suggestions would be greatly appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:05:43.053

我建议从以下几个步骤开始：

*   确定 Android 应用程序的实际工作方式。您所说的向其发送两个参数的服务器是 Wowza 服务器吗？如果是这样，它可能是一个自定义插件。
*   获取对服务器的访问权限，以便您可以将其配置为 iOS 流式传输。
*   您还需要查看一些文档，[http](http://www.wowza.com/forums/content.php?3-quick-start-guide) ://www.wowza.com/forums/content.php?3-quick-start-guide ，[http://www.wowza.com/forums/content.php ?217#cupertinostreaming](http://www.wowza.com/forums/content.php?217#cupertinostreaming)

一旦你对问题有了更好的理解，Wowza 的人就会在[http://www.wowza.com/forums](http://www.wowza.com/forums)上提供帮助。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-18T00:25:54.070

不需要android应用等。Wowza支持@ios可以播放的输出，因为ios不能播放flash，所以它不能播放rtmp或rtsp。然而，Ios 可以播放类似于 http://myWowzaServer/myApplication/myStream/playlist.m3u8 的流...有关更好的配置详细信息，请访问 [http://emrekaratasoglu.com/php-freelance-watch-wowza-live-流苹果ios手机/](http://emrekaratasoglu.com/php-freelance-watch-wowza-live-stream-apple-ios-mobile-phone/)

# javascript - What is best strategy to reduce number of javascript files in a framework?

> ID：10934287
> 
> 赞同：1
> 
> 时间：2012-06-07T14:53:57.100
> 
> 标签：javascript, performance, architecture, frameworks

I am transferring a PHP framework to JavaScript. In PHP, I have one file per class and so when transferring it over, I am also creating one file per JavaScript class.

However, unlike with PHP, with so many JavaScript files, this will reduce the loading time of my page (I plan to have 30+ classes).

I like to have one class per page simply because when developing it is easier to navigate around my framework.

**What is the best approach to keep this ease of development yet not have so many javascript files that the HTML page has to load?**

![enter image description here](../Images/fe6da7282ecae482f29b9aa8e9cb1d9c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:57:14.080

有一些服务器端工具可让您自动将 JavaScript/CSS 文件组合成一个 HTTP 请求。

例如

*   [缩小](http://code.google.com/p/minify/)

在将代码投入生产时，您也可以手动执行此操作。但是我认为这不是您想要对 30 多个文件执行的操作（但是对于只有几个文件的人来说，这是一个相对简单的解决方案）。

你应该确保所有的 JS 文件都被打包/缩小，以使它们的文件大小尽可能小。还要确保您的服务器正在压缩所有内容，以便压缩它发送的数据。

最后，您应该确保浏览器正确缓存这些类型的文件。您可以通过在这些文件的末尾添加版本号并将过期标头更改为遥远的未来来轻松完成此操作。

# c# - 获取代码行号

> ID：10934292
> 
> 赞同：1
> 
> 时间：2012-06-07T14:54:18.700
> 
> 标签：c#, debugging, testing

在我负责的代码中，我有一些“抛出新异常（）”方法飞来飞去。

问题是，`catch`它并不总是在最好的地方，甚至在同一个班级里。这意味着当我发现错误时，我不知道`throw`起源于哪里，或者即使我知道，每个类中可能有成百上千行代码。

因此，在`throw`消息中，为了便于调试，说明类名称、项目名称、方法名称和行号可能很有用，以便于导航。行号很棘手。我无法对其进行硬编码，因为一旦我修改了代码，它就不太可能保持在同一行。

所以，我的 2 个问题是
1）我们喜欢这个想法还是不认为，有更好的方法！
2）任何想法如何获得行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:58:26.490

您是否考虑过查看 System.Diagnostics 下的 StackTrace 信息？可以在以下位置找到一个示例：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.stacktrace.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:56:33.620

如果包含**调试符号 (.pdb)**`.dll`文件，与or位于同一目录中`.exe`，它应该会自动加载它们并在`exception.StackTrace`.

要构建符号，在您的**发布**构建设置中，在**Advanced Build Settings**下，将**Debug Info**设置为**Full**

![高级构建设置](../Images/18c52f7fdb84e85c0fcbc50457e80669.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:03:46.137

查看`System.Diagnostics.StackFrame`获取行号的类。我相信这个方法`GetFileLineNumber`可以帮助你

[http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe](http://msdn.microsoft.com/en-us/library/system.diagnostics.stackframe)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:05:50.437

此信息通常在堆栈跟踪中可用 - 由 Jeremy 提供（请参阅我的评论）。

抱歉，不知道如何将评论标记为正确答案！？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T15:08:48.747

行号不会显示在以发布模式编译的代码中。如果这是一个内部应用程序，并且您*真的*想要行号，您总是可以部署在调试模式下编译的代码，然后使用程序集部署 PDB。但这也涉及性能成本，因此这并不总是最好的方法。不过，目前我不确定是否有更好的方法。

如果我没记错的话，Roslyn 项目为我们提供了一种更好的获取行号的方法，但对它不够熟悉，无法提供更多细节。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-08T19:01:15.657

您可以使用 C# 5.0 功能结合默认参数来捕获调用者的行号。因此，不要直接构造和抛出异常，而是创建一个构造异常的方法。

```
Exception CreateMyException(
    [CallerFilePath] string filePath = "", 
    [CallerMemberName] string memberName = "",
    [CallerLineNumber] int lineNumber = 0)
{
   return new Exception(string.Format("Exception thrown from line {0} in member {1} in file {2}",
       lineNumber, memberName, filePath));
} 
```

...在您的代码中的其他地方...

```
throw CreateMyException();  // compiler injects current values for defaulted arguments. 
```

# iphone - REGEX to Parse Text From Webpage in iOS?

> ID：10934296
> 
> 赞同：0
> 
> 时间：2012-06-07T14:54:22.663
> 
> 标签：iphone, ios, xml, regex, parsing

I am working on updating some of my iOS blog apps to get beyond using UIWebViews that load the article URL. I would like to do something more along the lines of Engadget or TUAW where the text from the article and the main picture is all that is loaded when you click on an article from the tableview, but I am having issues getting only the text of the article.

I tried using some DOM Property codes to get the innerBodyText of the HTML, but no matter what DOM property I try, I end up getting header/footer info, advertisements, and more thrown in with the article.

Is there a simple way in iOS using REGEX or something else to get just the text of the article?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T09:34:44.267

我建议研究[Hpple](https://github.com/topfunky/hpple)

[看到这个线程了解更多信息](https://stackoverflow.com/questions/405749/parsing-html-on-the-iphone)

# android - Android MediaRecorder IllegalStateException

> ID：10934298
> 
> 赞同：1
> 
> 时间：2012-06-07T14:54:26.647
> 
> 标签：android, android-sdcard, android-sdk-2.3, illegalstateexception, android-mediarecorder

I am making an application that allows a user to record audio and save it somewhere in the SD card. I am using a MediaRecorder to do record the audio.

I am reusing some of the code from the androiddevblog website as it was recommended by another user on stackoverflow to check those tutorials.

My problem is whenever I click the button to record audio I get an error saying "Your Application has been forced to stop". I used the debugger to find out that it is because I have an illegalStateException on recorder.stop()

I am aware that nothing will get recorded based on my code. I want to first make sure the file gets created and saved.

I posted this question before, and solved my original problem but ran into this one after. So it may seem as a duplicate.

```
public class MyRecorderActivity extends Activity{

private static final String AUDIO_RECORDER_FOLDER = "AudioRecorder";
 private static final String AUDIO_RECORDER_FILE_EXT_3GP = ".3gp"    
private Button audio;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.questionandanswer);
....
....

 audio = (Button) findViewById(R.id.audio_recordactivity);
    audio.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {

        startRecording();

        }
    });

 } 

  private String getFilename(){
        String filepath = Environment.getExternalStorageDirectory().getPath();
        File file = new File(filepath,AUDIO_RECORDER_FOLDER);

        if(!file.exists()){
                file.mkdirs();
        }

        return (file.getAbsolutePath()+ "/ " + System.currentTimeMillis() +  AUDIO_RECORDER_FILE_EXT_3GP);

  }

 private void startRecording(){
        MediaRecorder recorder = new MediaRecorder();

        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setOutputFile(getFilename());

        try {
                recorder.prepare();
                recorder.start();
        } catch (IllegalStateException e) {
                e.printStackTrace();
        } catch (IOException e) {
                e.printStackTrace();
        }

        recorder.stop();
        recorder.reset();
        recorder.release();
   }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:23:18.833

确保包括以下许可。

```
<uses-permission android:name="android.permission.RECORD_AUDIO" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T14:32:00.600

可能是另一个录音处于活动状态（可能是默认录音机或另一个下载应用程序的录音机）停止该录音并再次执行操作，希望它有效

# binding - 将绑定 ID 更改为单独的模型名称

> ID：10934299
> 
> 赞同：1
> 
> 时间：2012-06-07T14:54:27.363
> 
> 标签：binding, model, knockout.js

所以我有两个单独的模型，一个“项目”模型，第二个是“站点”模型......我正在使用 KO 将此数据绑定到 DOM 上的两个单独元素（并根据需要工作），但我已经发现需要用另一个模型上的数据替换我的一个绑定列。

在我的“项目”模型上，我有一个站点 ID 列，我想用该模型上的实际“站点名称”属性（简单名称、值对 - SiteName、SiteId）交换...有人知道吗有一种方法可以在 KO 中做到这一点？

我真的想在服务器端保持模型数据本身的完整性，而不是在服务器端创建一个为我做的自定义模型。

我确信我可以给这些元素一个特殊的类，并循环遍历它们并用 jQuery 手动替换它们，但我认为 KO 可能有更简单的方法来做到这一点。

谢谢！

我已经尝试过类似的方法，但它似乎不起作用（是的，我知道表格元素中的 div 标签不是基于标准的，我只是想看看它是否有效，如果有效，我会转换从表格到另一个格式选项）

```
<tbody data-bind="foreach: items">
        <tr data-bind="click: updateItem">
            <td data-bind="text: ItemName"></td>
            <div data-bind="foreach: sites">
                <div data-bind="if: items.SiteId = sites.SiteId">
                    <td data-bind="text: sites.SiteName"></td>
                </div>
            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:34:30.423

使用我返回的模型执行此操作的 jQuery 是：

```
$(function () {
            $('#allItems tr .siteIdCell').each(function () {
                for (i in allSites) {
                    if (allSites[i].SiteId == $(this).html()) {
                        $(this).html(allSites[i].SiteName);
                    }
                }
            });
        }); 
```

其中 .siteIdCell 是我使用此值应用于列的类，allSites 是我通过 JSON 接收的对象数组。

不确定我是否会得到很多回复，但我只是想如果其他人有同样的问题，我会更新这个，而且在 KO 中没有能力做到这一点。

# javascript - 按顺序选择数组中的元素

> ID：10934301
> 
> 赞同：0
> 
> 时间：2012-06-07T14:54:37.957
> 
> 标签：javascript, arrays, html

我是一个非常糟糕的程序员，对我一半时间问的内容知之甚少，所以请多多包涵。搜索这个问题的答案很困难，因为我不太清楚要搜索什么！

我有一个 javascript 函数，可以播放数组中的下一首曲目（我相信这段代码现在看起来很熟悉！）：

```
function loadPlayer() {
    var audioPlayer = new Audio();
    audioPlayer.controls=false;
    audioPlayer.preload="auto";
    audioPlayer.addEventListener('ended',nextSong,false);
    audioPlayer.addEventListener('error',errorFallback,true);
    audioPlayer.addEventListener('timeupdate',updateProgress, false);
    document.getElementById("player").appendChild(audioPlayer);
    nextSong();
}

function nextSong() {
    if(urls[next]!=undefined) {
        var audioPlayer = document.getElementsByTagName('audio')[0];
        if(audioPlayer!=undefined) {
            audioPlayer.src=urls[next];
            audioPlayer.load();
            audioPlayer.play();
            next++;
        } else {
            loadPlayer();
        }
    } else {
        alert('file missing!');
    }
}
function errorFallback() {
        nextSong();
} 
```

当我通过以下方式调用函数时，这有效：

```
<a href="#" onclick="nextSong()">Next!</a> 
```

但是，如果我通过 pickSong 函数在数组中选择一个项目（比如项目 4），单击“下一步”会将我带回数组中的第二个项目并从那里继续。曲目选择功能为：

```
function pickSong(num) {
    next = num;
    nextSong();
}

var urls = new Array();
    urls[0] = '01_horses_mouth/mp3/01\. Let The Dog See The Rabbit preface.mp3';
    urls[1] = '01_horses_mouth/mp3/02\. The Other Horse\'s Tale.mp3';
    urls[2] = '01_horses_mouth/mp3/03\. Caged Tango.mp3';
    urls[3] = '01_horses_mouth/mp3/04\. Crumbs.mp3';

var next = 0; 
```

我错过了什么？

编辑：我似乎已经解决了它（虽然它可能一开始就有效，但现在效果更好）：

```
function nextSong() {
    if(urls[next]!=undefined) {
        var audioPlayer = document.getElementsByTagName('audio')[0];
        if(audioPlayer!=undefined) {
            audioPlayer.src=urls[next];
            audioPlayer.load();
            audioPlayer.play();
            $('#playlistTitle').html(trackTitles[next++]);
        } else {
            loadPlayer();
        }
    } else {
        alert('file missing!');
    }
} 
```

我不得不为标题创建一个新数组，因为我一生都无法弄清楚如何解析 url 标题。playlistTitle div 已经存在，因为我正在做一些非常复杂的切换“正在播放”的曲目标题。

# wso2 - 没有与会话索引对应的已建立会话

> ID：10934302
> 
> 赞同：0
> 
> 时间：2012-06-07T14:54:42.493
> 
> 标签：wso2, wso2stratos

我正在以独立模式测试 wso2stratos-is-1.5.2。我解压缩产品。我进入 bin 目录并运行 ./wso2server.sh ，我以管理员身份登录，我尝试注销并在日志文件中收到以下错误消息

> Stratos Identity]ERROR {org.wso2.carbon.identity.sso.saml.processors.LogoutRequestProcessor} - 没有与提供的会话索引对应的已建立会话。{org.wso2.carbon.identity.sso.saml.processors.LogoutRequestProcessor}

我想知道是否有一些知识渊博的人可以告诉我为什么会开箱即用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:06:17.047

我最终为解决这个问题所做的事情就像我在评论中所说的那样。

我从工作的完整 Stratos 安装 IS 服务器复制了 repository/conf/advanced 目录，并将其粘贴到 Stratos IS 的独立版本中。并确保 authenticationators.xml 中的端口号指向独立端口号。

然后我从工作的 Stratos IS 服务器复制以下文件并粘贴到独立版本中，修改端口号以与独立版本相关 1\. sso-idp-config.xml 2\. Identity.xml 3\. Carbon .xml

现在我可以正常注销了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T12:42:05.463

请检查 sso-idp-config.xml 中与 Stratos IS 相关的依赖方条目中的 ACS URL 是否与 carbon.xml 中的主机名参数中的主机名相同。

谢谢，蒂琳娜

# android - 清除android应用程序用户数据

> ID：10934304
> 
> 赞同：131
> 
> 时间：2012-06-07T14:55:02.397
> 
> 标签：android, adb, user-data

使用**adb shell**清除应用程序数据

```
adb shell pm clear com.android.browser 
```

但是当从应用程序执行该命令时

```
String deleteCmd = "pm clear com.android.browser";      
        Runtime runtime = Runtime.getRuntime();
        try {
            runtime.exec(deleteCmd);
        } catch (IOException e) {
            e.printStackTrace();                
        } 
```

**问题：**

尽管我已授予以下权限，但它并没有清除用户数据也没有给出任何异常。

```
<uses-permission android:name="android.permission.CLEAR_APP_USER_DATA"/> 
```

**问题：**

如何使用**adb shell**清除应用程序数据？

* * *

## 回答 #1

> 赞同：256
> 
> 时间：2014-10-16T09:00:44.687

这个命令对我有用：

```
adb shell pm clear packageName 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T15:03:31.573

Afaik 浏览器应用程序数据对于其他应用程序是不可清除的，因为它存储在`private_mode`. 所以执行这个命令可能只能在有根设备上工作。否则你应该尝试另一种方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-24T07:20:24.817

该命令`pm clear com.android.browser`需要 root 权限。
所以，先跑`su`吧。

**这是示例代码：**

```
private static final String CHARSET_NAME = "UTF-8";
String cmd = "pm clear com.android.browser";

ProcessBuilder pb = new ProcessBuilder().redirectErrorStream(true).command("su");
Process p = pb.start();

// We must handle the result stream in another Thread first
StreamReader stdoutReader = new StreamReader(p.getInputStream(), CHARSET_NAME);
stdoutReader.start();

out = p.getOutputStream();
out.write((cmd + "\n").getBytes(CHARSET_NAME));
out.write(("exit" + "\n").getBytes(CHARSET_NAME));
out.flush();

p.waitFor();
String result = stdoutReader.getResult(); 
```

**班级`StreamReader`：**

```
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.concurrent.CountDownLatch;

class StreamReader extends Thread {
    private InputStream is;
    private StringBuffer mBuffer;
    private String mCharset;
    private CountDownLatch mCountDownLatch;

    StreamReader(InputStream is, String charset) {
        this.is = is;
        mCharset = charset;
        mBuffer = new StringBuffer("");
        mCountDownLatch = new CountDownLatch(1);
    }

    String getResult() {
        try {
            mCountDownLatch.await();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        return mBuffer.toString();
    }

    @Override
    public void run() {
        InputStreamReader isr = null;
        try {
            isr = new InputStreamReader(is, mCharset);
            int c = -1;
            while ((c = isr.read()) != -1) {
                mBuffer.append((char) c);
            }

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (isr != null)
                    isr.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            mCountDownLatch.countDown();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T15:07:32.220

要清除应用程序数据请尝试这种方式。

```
 public void clearApplicationData() {
    File cache = getCacheDir();
    File appDir = new File(cache.getParent());
    if (appDir.exists()) {
        String[] children = appDir.list();
        for (String s : children) {
            if (!s.equals("lib")) {
                deleteDir(new File(appDir, s));Log.i("TAG", "**************** File /data/data/APP_PACKAGE/" + s + " DELETED *******************");
            }
        }
    }
}

public static boolean deleteDir(File dir) {
    if (dir != null &amp;&amp; dir.isDirectory()) {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) {
                return false;
            }
        }
    }

    return dir.delete();
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-12T09:58:57.757

你好乌达亚拉克马尔，

```
public class MyApplication extends Application {
    private static MyApplication instance;

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
    }

    public static MyApplication getInstance(){
        return instance;
    }

    public void clearApplicationData() {
        File cache = getCacheDir();
        File appDir = new File(cache.getParent());
        if(appDir.exists()){
            String[] children = appDir.list();
            for(String s : children){
                if(!s.equals("lib")){
                    deleteDir(new File(appDir, s));
                    Log.i("TAG", "File /data/data/APP_PACKAGE/" + s +" DELETED");
                }
            }
        }
    }

    public static boolean deleteDir(File dir) {
        if (dir != null && dir.isDirectory()) {
            String[] children = dir.list();
            for (int i = 0; i < children.length; i++) {
                boolean success = deleteDir(new File(dir, children[i]));
                if (!success) {
                    return false;
                }
            }
        }

        return dir.delete();
    }
} 
```

请检查这个并告诉我...

[你可以从这里](https://github.com/ihrupin/samples/tree/master/android/Clear_User_Data_Sample)下载代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-05-25T15:17:45.513

To clear the cache for all installed apps:

*   use `adb shell` to get into device shell ..
*   run the following command : `cmd package list packages|cut -d":" -f2|while read package ;do pm clear $package;done`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-29T09:45:40.010

要在 Android 上重置/清除应用程序数据，您需要检查 Android 设备上安装的可用软件包 -

*   `adb shell`通过在终端上运行进入 adb shell
*   通过运行检查可用的包`pm list packages`
*   如果您想要重置的包名称可用，则`pm clear packageName`通过将 packageName 替换为您想要重置的包名称来运行，`pm list packages`结果也会显示相同的内容。

如果未显示包名称，并且您将尝试重置，您将获得失败状态。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-11-26T06:15:27.007

在 Mac 上，您可以使用此命令清除应用数据

```
adb shell pm clear com.example.healitia 
```

[![在此处输入图像描述](../Images/80b98d73a3fbd87eaea809e50dc059e0.png)](https://i.stack.imgur.com/dycT9.png)

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2014-03-24T07:25:12.580

```
// To delete all the folders and files within folders recursively
File sdDir = new File(sdPath);

if(sdDir.exists())
    deleteRecursive(sdDir);

// Delete any folder on a device if exists
void deleteRecursive(File fileOrDirectory) {
    if (fileOrDirectory.isDirectory())
    for (File child : fileOrDirectory.listFiles())
        deleteRecursive(child);

    fileOrDirectory.delete();
} 
```

* * *

## 回答 #10

> 赞同：-6
> 
> 时间：2012-06-07T16:03:29.347

# selenium - Selenium C# Webdriver如何检测元素是否可见

> ID：10934305
> 
> 赞同：11
> 
> 时间：2012-06-07T14:55:04.003
> 
> 标签：selenium, webdriver, visibility, visible

最新版本的 Selenium DotNet Webdriver (2.22.0) 有没有办法在单击/交互之前检查元素是否可见？

我发现的唯一方法是尝试处理在您尝试发送密钥或单击它时发生的 ElementNotVisible 异常。不幸的是，这只发生在尝试与元素交互之后。我正在使用递归函数来查找具有特定值的元素，其中一些元素仅在某些场景中可见（但无论如何它们的html仍然存在，因此可以找到它们）。

据我了解，RenderedWebElement 类以及其他变体已被弃用。所以没有铸造。

谢谢。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-07T16:34:26.163

对于 Java，RemoteWebElement 上有 isDisplayed() - 还有 isEnabled()

在 C# 中，有一个 Displayed & Enabled 属性。

两者都必须为真，元素才能出现在页面上并且对用户可见。

在“html仍然存在，所以可以找到”的情况下，只需检查 BOTH isDisplayed (Java) / Displayed (C#) AND isEnabled (Java) / Enabled (C#)。

例如，在 C# 中：

```
public void Test()
{
    IWebDriver driver = new FirefoxDriver();
    IWebElement element = null;
    if (TryFindElement(By.CssSelector("div.logintextbox"), out element)
    {
        bool visible = IsElementVisible(element);
        if  (visible)
        {
            // do something
        }
    }
}

public bool TryFindElement(By by, out IWebElement element)
{
    try
    {
        element = driver.FindElement(by);
    }
    catch (NoSuchElementException ex)
    {
        return false;
    }
    return true;
}

public bool IsElementVisible(IWebElement element)
{
    return element.Displayed && element.Enabled;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-21T12:21:15.950

有一种简单的方法可以做到这一点，如下所示：

```
public bool ElementDisplayed(By locator)
{
     new WebDriverWait(driver, TimeSpan.FromSeconds(timeOut)).Until(condition: ExpectedConditions.PresenceOfAllElementsLocatedBy(locator));
     return driver.FindElement(locator).Displayed ;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-21T10:09:42.660

这个问题的当前答案似乎已经过时了：使用 WebDriver 3.13 ，只要元素存在于页面上，即使它在视口之外，`Displayed`和属性都将返回 true。`Enabled`以下 C# 代码适用于 WebDriver 3.13（来自[此 StackOverflow 答案](https://stackoverflow.com/a/45244889/359765)）：

```
{
    return (bool)((IJavaScriptExecutor)Driver).ExecuteScript(@"
        var element = arguments[0];
        var boundingBox = element.getBoundingClientRect();
        var cx = boundingBox.left + boundingBox.width/2, cy = boundingBox.top + boundingBox.height/2;
        return !!document.elementFromPoint(cx, cy);
        ", element);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-16T15:20:17.273

您可以使用以下内容：

```
WebDriver web = new FirefoxDriver(;
String visibility = web.findElement(By.xpath("//your xpath")).getCssValue("display"); 
```

# android - 我们如何在android中以编程方式从抽屉/启动器/应用程序管理器中隐藏图标

> ID：10934309
> 
> 赞同：0
> 
> 时间：2012-06-07T14:55:22.723
> 
> 标签：android

任何人都可以帮我解决“我们如何通过任何其他实用程序应用程序隐藏或取消隐藏手机上的应用程序图标”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T05:55:03.407

尝试这个，

```
PackageManager p = getPackageManager();
p.setComponentEnabledSetting(getComponentName(), PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

这将从抽屉中删除启动器图标，不适用于应用程序管理器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:57:48.107

不，这是不可能的，出于安全原因，您无法从应用列表中隐藏该应用。你能做的最好的事情就是给你的应用起一个不起眼的名字，或者在它的标题后面加上“首选项”之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:58:01.060

消除

```
<intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

从清单中，所以你的应用程序将不再列在启动器中；）

将其完全隐藏在设置深处的 appListing 中应该是不可能的。

# r - R中线性模型的系数和摘要的不同NA动作

> ID：10934312
> 
> 赞同：10
> 
> 时间：2012-06-07T14:55:29.253
> 
> 标签：r, summary, lm, na

在 R 中，当使用 时`lm()`，如果我`na.action = na.pass`在对 的调用中设置`lm()`，那么在汇总表中，对于任何无法估计的系数都有一个 NA（因为在这种情况下缺少单元格）。

但是，如果我使用`summary(myModel)$coefficients`或仅从汇总对象中提取系数`coef(summary(myModel))`，则省略 NA。

我希望在提取系数时包含 NA，就像在打印摘要时包含它们一样。有没有办法做到这一点？

设置`options(na.action = na.pass)`似乎没有帮助。

这是一个例子：

```
> set.seed(534)
> myGroup1 <- factor(c("a","a","a","a","b","b"))
> myGroup2 <- factor(c("first","second","first","second","first","first"))
> myDepVar <- rnorm(6, 0, 1)
> myModel <- lm(myDepVar ~ myGroup1 + myGroup2 + myGroup1:myGroup2)
> summary(myModel)

Call:
lm(formula = myDepVar ~ myGroup1 + myGroup2 + myGroup1:myGroup2)

Residuals:
       1        2        3        4        5        6 
-0.05813  0.55323  0.05813 -0.55323 -0.12192  0.12192 

Coefficients: (1 not defined because of singularities)
                    Estimate Std. Error t value Pr(>|t|)
(Intercept)         -0.15150    0.23249  -0.652    0.561
myGroup11            0.03927    0.23249   0.169    0.877
myGroup21           -0.37273    0.23249  -1.603    0.207
myGroup11:myGroup21       NA         NA      NA       NA

Residual standard error: 0.465 on 3 degrees of freedom
Multiple R-squared: 0.5605,     Adjusted R-squared: 0.2675 
F-statistic: 1.913 on 2 and 3 DF,  p-value: 0.2914 

> coef(summary(myModel))
               Estimate Std. Error    t value  Pr(>|t|)
(Intercept) -0.15149826  0.2324894 -0.6516352 0.5611052
myGroup11    0.03926774  0.2324894  0.1689012 0.8766203
myGroup21   -0.37273117  0.2324894 -1.6032180 0.2072173

> summary(myModel)$coefficients
               Estimate Std. Error    t value  Pr(>|t|)
(Intercept) -0.15149826  0.2324894 -0.6516352 0.5611052
myGroup11    0.03926774  0.2324894  0.1689012 0.8766203
myGroup21   -0.37273117  0.2324894 -1.6032180 0.2072173 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:24:59.050

为什么不从拟合模型中提取系数：

```
> coef(myModel)
             (Intercept)                myGroup1b 
             -0.48496169              -0.07853547 
          myGroup2second myGroup1b:myGroup2second 
              0.74546233                       NA 
```

这似乎是最简单的选择。

`na.action`与此无关。请注意，您*没有*通过`na.action = na.pass`您的示例。

`na.action``NA`是用于处理传递给模型拟合的**数据**的全局选项，通常与公式结合使用；它也是一个函数的名称`na.action()`。`data`R 从参数和公式中表示的模型的符号表示构建所谓的模型框架。此时，`NA`将检测到任何变量，并且默认选项`na.action`是用于通过`na.omit()`删除任何变量`NA`的样本来从数据中删除。`NA`有一些替代方案，最有用的是`na.exclude()`，它们会在拟合期间移除，但会在拟合值、残差等的正确位置`NA`添加回来。阅读和更多信息，以及更多信息。`NA``?na.omit``?na.action``?options`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-12T10:21:08.730

summary.lm 的文档说“在返回对象中省略了别名系数，但通过*print*方法恢复了”。似乎没有参数可以控制此省略。除了使用@Gavin Simpson 建议的 coef(summary(myModel)) 之外，还有另一种解决方法。您可以创建一个矩阵

```
nr <- num_regressors - nrow(summary(myModel)$coefficients) ##num_regressors shall be defined previously
nc <- 4
rnames <- names(which(summary(myModel)$aliased))
cnames <- colnames(summary(myModel)$coefficients)
mat_na <- matrix(data = NA,nrow = nr,ncol = nc,
           dimnames = list(rnames,cnames)) 
```

然后 rbind 两个矩阵：

```
mat_coef <- rbind(summary(myModel)$coefficients,mat_na) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-07-04T11:53:28.837

您也可以将汇总拟合表转换为数据框（其中 NA 的变量丢失）：

```
fit <- as.data.frame(summary(fit)$coefficients) 
```

然后按名称提取系数：

```
fit["age", "Pr(>|z|)"] 
```

如果已删除“年龄”，则在尝试从数据框中提取年龄的 P 值时，您将获得 NA

# c# - wcf - 选择从配置文件加载哪些服务

> ID：10934314
> 
> 赞同：1
> 
> 时间：2012-06-07T14:55:31.123
> 
> 标签：c#, .net, wcf, web-services

我有多个*WCF 服务*，它们几乎相互独立，它们共同构成了一个不错的核心系统。第三方很容易集成到我们的系统中，每个人都很高兴......但是

当我们希望根据某些许可证限制某些客户对某些 WCF 服务的使用时，就会出现此问题。因为我们不想让第三方有机会编辑配置文件并获得对我们所有 wcf 服务的完全访问权限。

那么，我该如何限制某些服务的使用呢？我在想也许有一个选项可以选择从配置文件加载哪个服务（基于许可证）。那可能吗？我还有什么其他选择？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:00:07.063

如果您有一个托管应用程序（例如控制台应用程序或 Windows NT 服务），那么您基本上可以控制创建和管理`ServiceHost`将“提供”WCF 服务的实例。

扩展该服务主机，您可以在加载所需的适当 WCF 服务时实现任何类型的灵活性。

阅读更多：

*   [MSDN：自定义服务主机](http://msdn.microsoft.com/en-us/library/aa395224.aspx)
*   [使用 MEF 组合 WCF 服务](http://www.timjroberts.com/2011/08/wcf-services-with-mef/)（基于自定义`ComposableServiceHost`类）

# java - Jersey：默认缓存控制为无缓存

> ID：10934316
> 
> 赞同：21
> 
> 时间：2012-06-07T14:55:33.927
> 
> 标签：java, rest, jersey, jax-rs

在编写 RESTful Web 服务时，如果我在我的客户端（当前是一个 .NET 胖客户端）上启用任何类型的缓存，我会遇到问题。默认情况下，Jersey 不发送任何类型的缓存控制标头，因此客户端会自动缓存大多数页面（这似乎是有效的行为）。

我希望泽西岛默认发送“无缓存”的缓存控制，然后特别是响应覆盖缓存控制。

有什么办法可以用泽西岛做到这一点？

我发现 RESTeasy 能够使用 @NoCache 注释来指定整个类的设置，但我没有发现任何与 Jersey 类似的东西。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-10T17:35:17.760

通过使用 ResourceFilterFactory，Jersey 很容易做到这一点 - 您可以创建任何附加到方法的自定义注释来设置缓存控制设置。当应用程序初始化时，每个发现的资源方法都会调用 ResourceFilterFactories - 在您的 ResourceFilterFactory 中，您可以检查该方法是否具有您的 @CacheControlHeader 注释（或任何您想要调用的注释） - 如果没有，只需返回添加“无缓存”的响应过滤器" 响应的指令，否则它应该使用注释中的设置。以下是如何执行此操作的示例：

```
public class CacheFilterFactory implements ResourceFilterFactory {
    private static final List<ResourceFilter> NO_CACHE_FILTER = Collections.<ResourceFilter>singletonList(new CacheResponseFilter("no-cache"));

    @Override
    public List<ResourceFilter> create(AbstractMethod am) {
        CacheControlHeader cch = am.getAnnotation(CacheControlHeader.class);
        if (cch == null) {
            return NO_CACHE_FILTER;
        } else {
            return Collections.<ResourceFilter>singletonList(new CacheResponseFilter(cch.value()));
        }
    }

    private static class CacheResponseFilter implements ResourceFilter, ContainerResponseFilter {
        private final String headerValue;

        CacheResponseFilter(String headerValue) {
            this.headerValue = headerValue;
        }

        @Override
        public ContainerRequestFilter getRequestFilter() {
            return null;
        }

        @Override
        public ContainerResponseFilter getResponseFilter() {
            return this;
        }

        @Override
        public ContainerResponse filter(ContainerRequest request, ContainerResponse response) {
            // attache Cache Control header to each response based on the annotation value
            response.getHttpHeaders().putSingle(HttpHeaders.CACHE_CONTROL, headerValue);
            return response;
        }
    }
} 
```

注释可能如下所示：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CacheControlHeader {
    String value();
} 
```

ResourceFilterFactory 可以通过将以下初始化参数添加到 web.xml 中 Jersey servlet 的定义中来在您的应用程序中注册：

```
<init-param>
    <param-name>com.sun.jersey.spi.container.ResourceFilters</param-name>
    <param-value>package.name.CacheFilterFactory</param-value>
</init-param> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-07-28T11:37:55.897

基于@martin-matula 的解决方案，我创建了两个缓存注释。一种`@NoCache`用于完全不缓存，一种`@CacheMaxAge`用于特定缓存。需要两个参数，`CacheMaxAge`因此您不必自己计算秒数：

```
@GET
@CacheMaxAge(time = 10, unit = TimeUnit.MINUTES)
@Path("/awesome")
public String returnSomethingAwesome() {
    ...
} 
```

ResourceFilter 现在有这个创建方法，默认情况下不会干扰（因此其他缓存机制继续工作）：

```
@Override
public List<ResourceFilter> create(AbstractMethod am) {
    if (am.isAnnotationPresent(CacheMaxAge.class)) {
        CacheMaxAge maxAge = am.getAnnotation(CacheMaxAge.class);
        return newCacheFilter("max-age: " + maxAge.unit().toSeconds(maxAge.time()));
    } else if (am.isAnnotationPresent(NoCache.class)) {
        return newCacheFilter("no-cache");
    } else {
        return Collections.emptyList();
    }
}

private List<ResourceFilter> newCacheFilter(String content) {
    return Collections
            .<ResourceFilter> singletonList(new CacheResponseFilter(content));
} 
```

[您可以在我的博](http://alex.nederlof.com/blog/2013/07/28/caching-using-annotations-with-jersey/)文中看到完整的解决方案。

感谢马丁的解决方案！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-04T08:52:30.243

@martin-matula 的解决方案不适用于 JAX-RS 2.0 / Jersey 2.x，因为 ResourceFilterFactory 和 ResourceFilter 已被删除。该解决方案可适用于 JAX-RS 2.0，如下所示。

注解：

```
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.METHOD)
public @interface CacheControlHeader {
  String value();
} 
```

动态特性：

```
@Provider
public class CacheFilterFactory implements DynamicFeature {

  private static final CacheResponseFilter NO_CACHE_FILTER = 
          new CacheResponseFilter("no-cache");

  @Override
  public void configure(ResourceInfo resourceInfo, 
                        FeatureContext featureContext) {

    CacheControlHeader cch = resourceInfo.getResourceMethod()
            .getAnnotation(CacheControlHeader.class);
    if (cch == null) {
      featureContext.register(NO_CACHE_FILTER);
    } else {
      featureContext.register(new CacheResponseFilter(cch.value()));
    }
  }

  private static class CacheResponseFilter implements ContainerResponseFilter {
    private final String headerValue;

    CacheResponseFilter(String headerValue) {
      this.headerValue = headerValue;
    }

    @Override
    public void filter(ContainerRequestContext containerRequestContext,
                       ContainerResponseContext containerResponseContext) {
      // attache Cache Control header to each response
      // based on the annotation value                     
      containerResponseContext
              .getHeaders()
              .putSingle(HttpHeaders.CACHE_CONTROL, headerValue);
    }

  }
} 
```

CacheFilterFactory 需要在 Jersey 注册。我正在通过 Dropwizard 执行此操作 - 使用 environment.jersey().register() - 但在独立系统上，我知道这可以通过让 Jersey 扫描您的类以查找 @Provider 注释来完成，方法是在您的 web.xml 中定义以下内容：

```
<servlet>
    <servlet-name>my.package.MyApplication</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>

    <!-- Register resources and providers under my.package. -->
    <init-param>
        <param-name>jersey.config.server.provider.packages</param-name>
        <param-value>my.package</param-value>
    </init-param>
</servlet> 
```

有关注册组件的更多信息，请参阅[这篇文章](http://blog.dejavu.sk/2013/11/19/registering-resources-and-providers-in-jersey-2/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T15:31:53.883

我认为你可以使用

```
isNoCache(true) 
```

这将停止在浏览器中缓存。

看：

[http://jersey.java.net/nonav/apidocs/1.12/jersey/javax/ws/rs/core/CacheControl.html#isNoCache%28%29](http://jersey.java.net/nonav/apidocs/1.12/jersey/javax/ws/rs/core/CacheControl.html#isNoCache%28%29)

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2017-02-23T07:27:35.530

我发现了一个可以禁用缓存的注释。您可以为您的 API 使用以下注解：

```
@CacheControl(noCache = true) 
```

参考：[用于缓存控制的 Jersey 注释](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/http/CacheControl.html)

# filesystems - 不明白2048从何而来

> ID：10934322
> 
> 赞同：4
> 
> 时间：2012-06-07T14:55:56.623
> 
> 标签：filesystems, operating-system

问题从何`2048`而来？

考虑一个使用 inode 表示文件的文件系统。磁盘块的`8 KB`大小和指向磁盘块的指针需要`4 bytes`. 此文件系统具有`12 direct disk blocks`单、双和三间接磁盘块。可以存储在此文件系统中的文件的最大大小是多少？

```
(12 * 8 KB) + (2048 * 8 KB) + (2048 * 2048 * 8 KB) + (2048 * 2048 * 2048 * 8 KB) = 64 terabytes 
```

我在想 8KB/4B，但那不是 2000 吗？8000/4。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T14:57:38.487

有时在计算机环境中讨论数字时，`kB`= 1024 字节，`MB`= 1,048,576 字节等。

在这种情况下，`8kB`= 8192 字节。8192 / 4 = 2048。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T14:57:50.423

`2048`是 8K（块大小）除以`4`（指针大小）。

您需要为 8K 块分配整个`8192`字节的指针块；您可以将`2048`指针放入其中之一。

此外，您可以将`2048`指向块的指针放入块以增加`2048 * 2048 * 8 KB`容量，然后`2048 * 2048 * 2048 * 8 KB`将指向块的指针放入指向 8K 块的指针块。

如果您认为它有点像一个[累积的故事](http://en.wikipedia.org/wiki/This_Is_the_House_That_Jack_Built)，那么您并不孤单。

# dataframe - Pandas 中的 DataFrame.ix() - 当请求的列不存在时，是否可以选择捕获情况？

> ID：10934323
> 
> 赞同：4
> 
> 时间：2012-06-07T14:55:58.030
> 
> 标签：dataframe, pandas

我的代码将 CSV 文件读入 pandas `DataFrame`- 并对其进行处理。该代码依赖于列名 - 使用 df.ix[,] 来获取列。最近 CSV 文件中的某些列名已更改（恕不另行通知）。但是代码并没有抱怨，而是默默地产生了错误的结果。ix[,] 构造不检查列是否存在。如果没有 - 它只是创建它并用 NaN 填充。这是正在发生的事情的主要思想。

```
df1=DataFrame({'a':[1,2,3],'b':[4,5,6]})   # columns 'a' & 'b'
df2=df1.ix[:,['a','c']]                    # trying to get 'a' & 'c'
print df2
       a   c
    0  1 NaN
    1  2 NaN
    2  3 NaN 
```

所以它不会产生错误或警告。

是否有另一种方法来选择特定列并额外检查列是否存在？

我目前的解决方法是使用我自己的小型实用程序函数，如下所示：

```
import sys, inspect

def validate_cols_or_exit(df,cols):
  """
    Exits with error message if pandas DataFrame object df 
    doesn't have all columns from the provided list of columns
    Example of usage:
      validate_cols_or_exit(mydf,['col1','col2'])
  """
  dfcols = list(df.columns)
  valid_flag = True
  for c in cols:
    if c not in dfcols:
       print "Error, non-existent DataFrame column found - ",c
       valid_flag = False
  if not valid_flag:
    print "Error, non-existent DataFrame column(s) found in function ", inspect.stack()[1][3]
    print "valid column names are:"
    print "\n".join(df.columns)
    sys.exit(1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T21:20:16.703

怎么样：

```
In [3]: df1[['a', 'c']]
---------------------------------------------------------------------------
KeyError                                  Traceback (most recent call last)
/home/wesm/code/pandas/<ipython-input-3-2349e89f1bb5> in <module>()
----> 1 df1[['a', 'c']]

/home/wesm/code/pandas/pandas/core/frame.py in __getitem__(self, key)
   1582             if com._is_bool_indexer(key):
   1583                 key = np.asarray(key, dtype=bool)
-> 1584             return self._getitem_array(key)
   1585         elif isinstance(self.columns, MultiIndex):
   1586             return self._getitem_multilevel(key)

/home/wesm/code/pandas/pandas/core/frame.py in _getitem_array(self, key)
   1609             mask = indexer == -1
   1610             if mask.any():
-> 1611                 raise KeyError("No column(s) named: %s" % str(key[mask]))
   1612             result = self.reindex(columns=key)
   1613             if result.columns.name is None:

KeyError: 'No column(s) named: [c]' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T17:33:57.327

不确定您是否可以约束 DataFrame，但您的辅助函数可能要简单得多。（就像是）

```
mismatch = set(cols).difference(set(dfcols))
    if mismatch:
        raise SystemExit('Unknown column(s): {}'.format(','.join(mismatch))) 
```

# wpf - 如何在 Blend 4 中解决嵌入式用户控件中的设计时静态资源

> ID：10934324
> 
> 赞同：5
> 
> 时间：2012-06-07T14:55:58.677
> 
> 标签：wpf, c#-4.0, user-controls, expression-blend-4

**简短版** 您如何处理嵌入到其他窗口/用户/自定义控件中的用户控件中的静态资源查找？因此，Blend 4 可能会在 Visual Studio 已经为您完成的设计时正确呈现它。

**长版本** 正如问题所暗示的那样，我们有一个窗口，其中包含一些嵌入式用户控件，并且该窗口以及每个嵌入式用户控件都使用静态资源标记扩展来解析对 app.xaml 文件中合并字典中的资源的引用.

在单独打开时，Blend 可以毫无问题地加载和渲染我在 VS Designer Surface 中制作的任何示例用户控件。它可以解决我几乎在任何地方都使用的无数静态资源标记扩展。

每当我尝试打开我的“MainWindow.xml”（一个窗口控件）时，我注意到我收到了 4 - ***Cannot Create Instance Of Type***错误，Blend 4 在 ArtBoard 上很好地告诉我它已经捕获了一些设计时异常。通过将 VS 调试器实例附加到 Blend 来进一步深入研究这些异常，我注意到我引用的每一个静态资源，它都抱怨找不到它。

作为比较，我查看了我创建的自定义控件，它根本没有使用任何静态资源，而是本地资源。我注意到这个自定义控件嵌入到 UserControl 时效果很好。我认为原因很明显！

SO上有没有人知道如何解决这个问题？我尝试了整个 'Add a Design-Time Dictionary' < - 部分工作，嵌入式用户控件仍然没有创建！

***研究***

1.  [MVVM Light + Blend 设计器视图错误：找不到名为“定位器”的资源](https://stackoverflow.com/questions/2665988/mvvm-light-blend-designer-view-error-cannot-find-resource-named-locator)
2.  [使用没有混合呕吐的资源进行主题化](https://stackoverflow.com/questions/10000385/theming-using-resources-without-blend-vomitting/10003048#10003048)

***更新：可能的解决方案：***

1.  采用此处介绍的类似方法： [GianlucaCucco 答案](http://mvvmlight.codeplex.com/discussions/82284)
2.  将所有静态资源查找转换为 UserControls 的本地资源？
3.  将所有静态资源查找转换为动态资源。

*这些解决方案都不漂亮。= (*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:43:38.387

试试[这个答案](https://stackoverflow.com/questions/10000385/theming-using-resources-without-blend-vomitting/10003048#10003048)——这听起来像一个类似的问题。我还没有机会使用它，所以我很想知道它是否适合你。它肯定没有其他解决方案那么混乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:54:59.170

我在一个`Converters.xaml`Blend 曾经抱怨过的文件中有几个资源。我的解决方法是在设计时强制加载该 xaml 文件。

```
using System;
using System.ComponentModel;
using System.IO;
using System.Windows;
using System.Windows.Markup;

public static class DesignTimeSupport
{
    public static void LoadCommonConvertersForBlend(this ResourceDictionary resourceDictionary)
    {
        if (resourceDictionary == null || !DesignerProperties.IsInDesignTool) return;

        var convertersXamlUri = new Uri("Assets/Converters.xaml", UriKind.Relative);
        var streamInfo = Application.GetResourceStream(convertersXamlUri);
        using (var reader = new StreamReader(streamInfo.Stream))
        {
            var converters = (ResourceDictionary)XamlReader.Load(reader.ReadToEnd());
            resourceDictionary.MergedDictionaries.Add(converters);
        }
    }
} 
```

在`ViewBase`构造函数中调用此方法。

```
public class ViewBase : Page
{
    public ViewBase()
    {
        Resources.LoadCommonConvertersForBlend();
    }
} 
```

不继承自的类会`ViewBase`自己调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-19T02:52:00.243

尽管看起来很奇怪（而且我找不到合乎逻辑的原因），但错误消息将它找不到的资源显示为“maindictionary.xaml”，而文件和所有引用都是“MainDictionary.xaml”。

我在解决方案资源管理器中打开了资源的属性，将 FileName 更改为 manidictionary.xaml，然后又回到 MainDictionary.xaml，我收到的五个错误消息......消失了。

希望这个答案能传到可能正在为深奥问题苦苦挣扎的其他人手中，并有所帮助。

# php - 开发环境中的 Symfony2 和 AJAX 错误处理

> ID：10934328
> 
> 赞同：2
> 
> 时间：2012-06-07T14:56:14.130
> 
> 标签：php, ajax, forms, symfony

在开发模式下使用 Symfony2 非常有用：如果软件出现任何错误，会出现“幽灵”并显示一个非常有用的错误屏幕，其中包含所有详细信息以解决它。

但是，如果使用 Ajax 而不是提交表单直接调用 bundle-action，这将不起作用；使用firebug，我看到，在程序出错的情况下，会拦截bug并准备一个错误页面；然而，什么都没有显示，只是 Ajax 被中止了。

任何人都遇到过同样的情况并知道如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T08:58:04.533

它比我预期的要简单：使用 jquery "fail" 我可以简单地执行以下操作，因为在 jqXHR 中返回了 symfony2 错误页面对象（假设 "ajaxexample" 是使用 "$.ajax(...)" 函数创建的jQuery）。

```
 ajaxexample.fail(function(jqXHR, textStatus)
    {
        var newWindow = window.open();
        if (newWindow != null) newWindow.document.write(jqXHR.responseText);
    }); 
```

这将打开一个显示 symfony2 错误页面的新文档。

# spring - OSGified Spring 不可见的类

> ID：10934331
> 
> 赞同：1
> 
> 时间：2012-06-07T14:56:19.137
> 
> 标签：spring, osgi, noclassdeffounderror, apache-felix

我正在制作一个非常简单的应用程序，在其中我尝试使用 osgi (apache felix) 初始化一个 spring bean。我设法读取`spring-beans.xml`包含在捆绑包中的文件，代码如下：

```
 ApplicationContext springContext = new GenericApplicationContext();
    InputStream in = thisBundle.getEntry("/spring-beans.xml").openStream();
    DefaultListableBeanFactory beans = new DefaultListableBeanFactory(springContext);
    XmlBeanDefinitionReader reader = new XmlBeanDefinitionReader(beans);
    reader.setValidationMode(XmlBeanDefinitionReader.VALIDATION_XSD);
    reader.loadBeanDefinitions(new InputStreamResource(in));
    beans.preInstantiateSingletons();
    in.close();
    return springContext; 
```

这是以下内容的内容`spring-beans.xml`：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"> 
<bean id="crazyClass" class="foo.bar.osgi.SpringInstantiatedBean">
    <property name="name" value="YES" />
</bean>
</beans> 
```

SpringInstantiatedBean 类只有一个 prop（名称）和一个 getter/setter。如果我通过主类在本地运行它，这一切都很好，尽管定位 spring-beans.xml 文件的路径有点不同。但是，当我将这段代码放在 felix 上时，这是我在 Activator 中得到的：

```
Jun 7, 2012 4:37:40 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from resource loaded through InputStream
Jun 7, 2012 4:37:41 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2778c490: defining beans [crazyClass]; root of factory hierarchy
org.osgi.framework.BundleException: Activator start error in bundle foo.bar.osgi.OSGIProject [91].
    at org.apache.felix.framework.Felix.activateBundle(Felix.java:2027)
    at org.apache.felix.framework.Felix.startBundle(Felix.java:1895)
    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:944)
    at org.apache.felix.gogo.command.Basic.start(Basic.java:729)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.felix.gogo.runtime.Reflective.invoke(Reflective.java:137)
    at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:82)
    at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)
    at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)
    at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
    at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
    at org.apache.felix.gogo.shell.Console.run(Console.java:62)
    at org.apache.felix.gogo.shell.Shell.console(Shell.java:203)
    at org.apache.felix.gogo.shell.Shell.gosh(Shell.java:128)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.felix.gogo.runtime.Reflective.invoke(Reflective.java:137)
    at org.apache.felix.gogo.runtime.CommandProxy.execute(CommandProxy.java:82)
    at org.apache.felix.gogo.runtime.Closure.executeCmd(Closure.java:477)
    at org.apache.felix.gogo.runtime.Closure.executeStatement(Closure.java:403)
    at org.apache.felix.gogo.runtime.Pipe.run(Pipe.java:108)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:183)
    at org.apache.felix.gogo.runtime.Closure.execute(Closure.java:120)
    at org.apache.felix.gogo.runtime.CommandSessionImpl.execute(CommandSessionImpl.java:89)
    at org.apache.felix.gogo.shell.Activator.run(Activator.java:75)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [foo.bar.osgi.SpringInstantiatedBean] for bean with name 'crazyClass' defined in resource loaded through InputStream; nested exception is java.lang.ClassNotFoundException: foo.bar.osgi.SpringInstantiatedBean
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.predictBeanType(AbstractAutowireCapableBeanFactory.java:576)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:1331)
    at org.springframework.beans.factory.support.AbstractBeanFactory.isFactoryBean(AbstractBeanFactory.java:897)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:566)
    at foo.bar.osgi.Activator.readSpringConfigAndInitContext(Activator.java:54)
    at foo.bar.osgi.Activator.start(Activator.java:29)
    at org.apache.felix.framework.util.SecureAction.startActivator(SecureAction.java:641)
    at org.apache.felix.framework.Felix.activateBundle(Felix.java:1977)
    ... 32 more
Caused by: java.lang.ClassNotFoundException: foo.bar.osgi.SpringInstantiatedBean
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.springframework.util.ClassUtils.forName(ClassUtils.java:257)
    at org.springframework.beans.factory.support.AbstractBeanDefinition.resolveBeanClass(AbstractBeanDefinition.java:417)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doResolveBeanClass(AbstractBeanFactory.java:1283)
    at org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1254)
    ... 40 more
org.springframework.beans.factory.CannotLoadBeanClassException: Cannot find class [foo.bar.osgi.SpringInstantiatedBean] for bean with name 'crazyClass' defined in resource loaded through InputStream; nested exception is java.lang.ClassNotFoundException: foo.bar.osgi.SpringInstantiatedBean 
```

完整的堆栈跟踪只是向我显示，在解析 bean 的那一刻，spring internals 找不到我的 bean 类，这很奇怪，因为我可以在我的 Activator 中毫无问题地实例化它，就像这样：

```
SpringInitializedBean bean = new SpringInitializedBean(); 
```

这仅表明这是一个类加载器问题，但它的类加载器是否有`BeanFactory`可能无法访问我的类？如果是这样，我如何让它看到我的课程？另外，这里是`pom.xml`我配置maven bundle插件的地方的摘录：

```
 <plugin>
                <groupId>org.apache.felix</groupId>
                <artifactId>maven-bundle-plugin</artifactId>
                <version>2.2.0</version>
                <extensions>true</extensions>
                <configuration>
                    <instructions>
                        <Bundle-Activator>foo.bar.osgi.Activator</Bundle-Activator>
                        <Export-Package>foo.bar.osgi.osgi*</Export-Package>
                        <Private-Package>foo.bar.osgi*</Private-Package>
                        <Import-Package>*</Import-Package>
                        <Include-Resource>src/main/resources/spring-beans.xml</Include-Resource>
                    </instructions>
                </configuration>
            </plugin> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:03:57.427

您的问题似乎是 Spring 尝试使用 Class.forName 或类似方法加载 bean。它假定该类在系统类加载器中是可见的。由于 OSGi 对每个捆绑包使用单独的类加载器对类进行了强分离，因此这种假设不成立。

BeanFactory 位于哪里？它是在 OSGi 框架的系统类路径中，还是它本身被打包为一个包？如果它在一个包中，您可以尝试在两个包的清单中使用 Import-Package: 和 Export-Package 子句作为临时解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T18:27:23.513

两件便宜的事情可以让你弄清楚：

*   使用[动态导入](http://wiki.osgi.org/wiki/DynamicImport-Package)这是最后的手段，有效地绕过模块化类加载，但它会告诉你这是否确实是你的问题。
*   在 Equinox 而不是 Felix 中尝试。Felix 比 Equinox 更严格一些。我知道春天和春分在处女座工作得很好。同样，这本身并不能解决您的问题，但它会缩小范围。

# silverlight - XAML 转到由绑定定义的 visualState

> ID：10934332
> 
> 赞同：2
> 
> 时间：2012-06-07T14:56:22.420
> 
> 标签：silverlight, xaml, expression-blend

我对 XAML 或表达式混合还没有太多经验。我试图让我的 silverlight 应用程序的初始 visualState 由字符串绑定定义。

到目前为止，我只是为每个可能的视觉状态手动触发：

```
<i:Interaction.Triggers>
    <ei:DataTrigger Binding="{Binding VisualState}" Value="DevOffline">
        <ei:GoToStateAction StateName="DevOffline"/>
    </ei:DataTrigger>
    <ei:DataTrigger Binding="{Binding VisualState}" Value="Public">
        <ei:GoToStateAction StateName="Public"/>
    </ei:DataTrigger>
    ....
</i:Interaction.Triggers> 
```

它有效，但我总共有 9 个州，所以我想要一些通用的东西，比如：

```
<goToStateAction StateName="{Binding VisualState}" /> 
```

是否有可能做到这一点？如果是这样，我应该把它放在我的 XAML 中的什么位置？同一个地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:52:18.353

GoToStateAction 行为上的 StateName 属性是一个依赖属性，所以看起来您应该能够绑定到它。只需将 DataTrigger 替换为 PropertyChangedTrigger。看来您应该能够执行以下操作：

```
<i:Interaction.Triggers>
    <ei:PropertyChangedTrigger Binding="{Binding VisualState}">
        <ei:GoToStateAction StateName="{Binding VisualState}"/>
    </ei:PropertyChangedTrigger >
</i:Interaction.Triggers> 
```

# facebook - Canvas (iframe) 应用程序的发布操作

> ID：10934338
> 
> 赞同：1
> 
> 时间：2012-06-07T14:56:39.920
> 
> 标签：facebook, facebook-graph-api

我已经为我的画布应用程序提供了向 Facebook 发布操作所需的一切。发布操作后，我的时间轴中会显示一条消息，例如“John 在 {SomeObject} 上执行了操作”。一切正常，但我点击的 {SomeObject} 在一个窗口中打开，而不是在我的应用程序通常工作的 facebook iframe 中打开。此链接的 URL 呈现如下：

```
https://www.facebook.com/connect/uiserver.php?app_id={my_app_id}&method=permissions.request&redirect_uri={my_object_url}&response_type=code&display=page&auth_referral=1&fb_private_mode_enc={some_text_string} 
```

我应该怎么做才能让我点击的对象在 facebook iframe 中打开，而不是在窗口中打开？我可以在这个 URL 中以某种方式将 display=page 更改为 display=iframe 吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T03:08:44.780

我也遇到过这个问题——我希望能够将用户直接引导到我的画布应用程序。除此之外，除非 {my_object_url} 的 HTML 中的元数据与 Facebook 期望看到的一致，否则该链接将解析为“此应用程序有问题”对话框。

一个可能的解决方法，而不是 100% 的答案：允许重定向，但是在被重定向到的页面的元数据中，将 HTML 刷新回应用程序画布？这会将用户重定向回应用程序。

如果您需要将它们定向到应用程序的特定页面，您可以在 canvas-redirect URL 之外使用 app_data[签名请求。](http://developers.facebook.com/docs/authentication/signed_request/)

希望这可以帮助。虽然不是银弹。

PG

# reporting-services - 每个填充的表格都会出现额外的空表格标题

> ID：10934341
> 
> 赞同：0
> 
> 时间：2012-06-07T14:56:41.870
> 
> 标签：reporting-services, reporting

在我的报告查看器中，我有一个按办公室名称分组的列表，在列表中我还有另外两个列表，一个是案例活动组，另一个是非案例活动组。对于两个内部列表，我都有一个 groupon 表达式，用于过滤每个列表中显示的数据类型。

这是我的表达小组：

```
=IIf(Fields!Cases.Value Is Nothing, Fields!OfficeName.Value, " ") 
```

此表达式将 case 值为 0 的所有项目过滤到表中，如果确实存在 case，则不显示任何内容。我相信因为“”它正在显示空表的标题。我如何更改表达式，以便不仅表格为空，而且不显示表格的标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:55:41.653

我实际上意识到，我没有过滤表 - 我将相同的过滤器表达式应用于我的列表，并删除了带有标题的空表。

# html - CSS 浏览器兼容性 - 嵌套的 div 和位置

> ID：10934343
> 
> 赞同：1
> 
> 时间：2012-06-07T14:56:42.477
> 
> 标签：html, css

这是我的网站：rickymason.net/blurbs

如果您在 chrome 中查看它，您会看到右侧的 AJAX 正确加载，并且 CSS 正确格式化了它。

在Firefox中，它是一个不同的故事。我玩过它，但找不到问题。

这是我的模板（div）：

```
<html>
<head><?php echo $head; ?></head>
<div id="wrapper">
    <div id="topnav"><?php echo $topnav; ?></div>
    <div id="leftbar">
        <?php echo $logo; ?>
        <img src="<?php echo $profile['avatar_loc']['location'] ?>" alt="avatar_user"/>
        <div id="select"> 
            <?php echo $create; ?>
            <div id="filter_select"><?php echo $category; ?></div>
            <div id="addfilter"><?php echo $addfilter; ?></div>
        </div>
    </div>
<div id="boardwrapper"> 
    <div id="boardborder">
        <div id="board" alt="Welcome to Blurb!"><img src="img/board/loading.gif" alt="loading"/></div>
    </div>
    <div id="boardbot"></div>
</div>
<footer>
    <?php echo $footer; ?>
</footer>
</body>
</div>
</html> 
```

这是我的 CSS

```
.board {
    display: table;
    padding-left: 35px;
    padding-top: 10px;
}

.board #row {
    padding-bottom: 15px;
}

.board #author p {
    position: absolute;
    top: inherit;
    padding-left: 3px;
    padding-top: 53px;
    color: white;
    font: 16px Tahoma, Helvetica, Arial, Sans-Serif;
    text-align: center;
    text-shadow: 0px 2px 3px #555;
}

.board #author {
    display: table-cell;
    border: 1px solid #97cae6;
    width: 75px;
    height: 75px;
}

.board #arrow {
    background-image: url('../img/board/corner.jpg');
    display: table-cell;
    width: 35px;
    height: 75px;
}

.board #subject {
    position: relative;
    max-height: 75px;
    display: table-cell;
    width: 653px;
    max-width: 653px;
    height: 75px;
    border-top: 1px solid #97cae6;
    border-bottom: 1px solid #97cae6;
}

.board #subject a {
    position: absolute;
    top: inherit;
    padding-top: 18px;
}

.board #info {
    display: table-cell;
    width: 180px;
    height: 75px;
    border-top: 1px solid #97cae6;
    border-bottom: 1px solid #97cae6;
    border-right: 1px solid #97cae6;
    border-top-right-radius: 20px;
    border-bottom-right-radius: 20px;
} 
```

希望有什么东西能在你身上跳出来，你可以帮忙！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:14:42.643

在文件**board.css**中，更改：

```
.board #arrow {
background-image: url('../img/board/corner.jpg');
display: table-cell;
width: 35px;
height: 75px; 
```

}

对此：

```
.board #arrow {
background: url('../img/board/corner.jpg') no-repeat;
display: table-cell;
width: 35px; 
```

}

应该解决你的问题。

JA

# java - Java Regex：如何匹配一个或多个空格字符

> ID：10934344
> 
> 赞同：8
> 
> 时间：2012-06-07T14:56:43.257
> 
> 标签：java, regex

如何在 Java 正则表达式中匹配多个空格字符？

我有一个我想匹配的正则表达式。当我有两个或更多空格字符时，正则表达式失败。

```
public static void main(String[] args) { 
    String pattern = "\\b(fruit)\\s+([^a]+\\w+)\\b"; //Match 'fruit' not followed by a word that begins with 'a'
    String str = "fruit apple"; //One space character will not be matched
    String str_fail = "fruit  apple"; //Two space characters will be matched
    System.out.println(preg_match(pattern,str)); //False (Thats what I want)
    System.out.println(preg_match(pattern,str_fail)); //True (Regex fail)
}

public static boolean preg_match(String pattern,String subject) {
    Pattern regex = Pattern.compile(pattern);
    Matcher regexMatcher = regex.matcher(subject);
    return regexMatcher.find();
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T15:00:32.167

问题实际上是因为[回溯](http://www.regexguru.com/2008/04/unintended-backtracking-can-bite-you/)。你的正则表达式：

```
 "\\b(fruit)\\s+([^a]+\\w+)\\b" 
```

说“水果，后跟一个或多个空格，后跟一个或多个非'a'字符，后跟一个或多个'word'字符”。两个空格失败的原因是因为`\s+`匹配第一个空格，但随后*返回第二个*，然后满足`[^a]+`（与第二个空格）和`\s+`部分（与第一个）。

我认为您可以通过简单地使用构成量词来解决它，这将是`\s++`. 这告诉`\s` **不要**返回第二个空格字符。[您可以在此处](http://docs.oracle.com/javase/tutorial/essential/regex/quant.html)找到有关 Java 量词的文档。

* * *

作为说明，以下是 Rubular 的两个示例：

1.  [使用所有格量词`\s`](http://rubular.com/r/1bZXssn7RH)（根据您的描述给出预期的结果）
2.  [您当前的正则表达式在`[^a\]+`和`\w+`](http://rubular.com/r/kJA2txx10c)周围有单独的分组。请注意，第二个匹配组（代表`[^a]+`）正在捕获第二个空格字符。

# html - Coda 上的模板

> ID：10934353
> 
> 赞同：0
> 
> 时间：2012-06-07T14:57:06.363
> 
> 标签：html, templates, coda

我正在尝试摆脱 Adob​​e Dreamweaver，现在 Coda 2 推出了许多新功能，我有完美的候选人 :D

我需要但在 Coda 中找不到的唯一功能是能够创建依赖于它的模板和文件。要设置可编辑区域，当模板更新时，所有文件中的所有代码都会更新，可编辑区域除外。

有没有办法在 Coda 2 或插件/外部工具上无缝地做到这一点？

我需要它来仅对页面进行 html 处理，在 .php 文件上我通过`including(header and top phps)`...

提前致谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-18T13:21:00.340

该功能在 Coda 中不可用。但是就像你说的，在使用 PHP 时，你可以只使用包含来拉入公共内容。仅使用 HTML，并没有真正优雅的方式来处理这个问题。有没有理由不能只使用 PHP 文件？

# c++ - 动态分配作为参数，可以这么说？

> ID：10934359
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:57:27.407
> 
> 标签：c++, pointers, vector

假设我们有一个 Cursor 对象指针向量。游标对象是使用单个 int 参数构造的。那么这种语法会起作用吗？

```
vector<cursor*> cursors;
cursors.push_back(new cursor(4)); 
```

还是我必须这样做：

```
cursor* tempCursor = new cursor(4);
cursors.push_back(tempCursor); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:01:14.843

如果您按照您的说明执行此操作并且之后不清理它，您将泄漏内存。

更好的方法是使用 shared_ptr。

代码看起来像这样

```
cursors.push_back(std::make_shared<cursor>(4)); 
```

不过，要准确理解您要完成的工作有点困难。

正如@cat-plus-plus 在下面的评论中提到的，除非您明确希望在其他地方共享对象，否则应该使用 unique_ptr，然后代码将如下所示：

```
cursors.push_back(std::unique_ptr<cursor>(new cursor(4))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:02:22.167

Despite the fact that you may not have tried this here's an explanation of what's going on:

when you create a new cursor object it returns a new cursor object. When you use a push_back function it pushes an object back on a vector. So, when you create a new object inside the push_back it evaluates that function which returns a new cursor which then gets pushed back.

Basically its all about return values and evaluations.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:25:12.450

它会起作用，但很有可能你最好做点别的事情。如果没有很好的理由不这样做，我会考虑将其设为游标向量（而不是指向游标的指针）。在这种情况下，您可以执行以下操作：

```
std::vector<cursor> cursors;

cursors.push_back(4);  // or cursors.emplace_back(4); 
```

这通常通过自动化内存管理来提高程序员的效率，并通过消除不必要的间接级别来提高代码效率。

# powershell-2.0 - 使用 powershell 从日志文件中提取信息

> ID：10934360
> 
> 赞同：1
> 
> 时间：2012-06-07T14:57:27.310
> 
> 标签：powershell-2.0, logfiles, event-viewer

嗨，我是 powershell si 语言的新手，尽管我想玩它。我正在尝试从日志文件中提取信息（该文件属于称为事件查看器的程序）。我需要使用 Boot Duration 下的信息。有人可以指导我一点吗？将不胜感激

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:19:54.173

日志总是相同的。不确定您是否要监视 Windows 或 linux 的启动日志或什么..但会尝试回答。如果您编辑问题并添加有关操作系统的信息以及引导日志文件相关行的示例，我可以为您提供一些 powershell 代码。

一般来说，你应该这样做：

*   确定如何在日志文件中手动查看启动时间。例如，它可能会有一个开始启动时间和一个完成启动时间。类似的东西。

> [2012-06-08 12:00:04] 开机启动
> 
> 很多日志条目
> 
> [2012-06-08 12:00:34] 开机完成

*   一旦您知道如何手动执行此操作，您就必须说服 powershell 为您执行此操作。您可以使用正则表达式来查找日期模式。在我的示例中，查找包含“开始启动”的行，然后将其解析为加载日期。

在这里，您有一个关于 powershell 和正则表达式的有用链接：[http ://www.regular-expressions.info/powershell.html](http://www.regular-expressions.info/powershell.html)

# android - Is it possible to have more than one checkbox in TabWidget (Android)

> ID：10934367
> 
> 赞同：0
> 
> 时间：2012-06-07T14:57:51.933
> 
> 标签：android, android-layout

If I have like three different tabs and I want to have 3 checkboxes in each of the tabs, is this possible. Please explain.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:00:02.417

Of course it is, try to add a `Layout.xml` for each tab and each activity in wich you added three checkboxes.

Try to start with a TabWidget tutorial to start off with something ;)
-> [http://www.androidhive.info/2011/08/android-tab-layout-tutorial/](http://www.androidhive.info/2011/08/android-tab-layout-tutorial/)

# c# - C#：如何将查询结果设置为 datagridview 中的组合框

> ID：10934374
> 
> 赞同：1
> 
> 时间：2012-06-07T14:58:25.990
> 
> 标签：c#

我有一个数据网格，其中有一列中有组合框。在特定事件上，我想用查询结果填充组合框。我写了这段代码

```
string materialQuery = "Select material_name from tbl_material_master where material_id =" + int.Parse(mat_id);
            cmd1 = new SqlCommand(materialQuery, con);
            sdr = cmd1.ExecuteReader();
            if (sdr.HasRows)
            {
                while (sdr.Read())
                {
                    materialName = sdr["material_name"].ToString();
                    grdPurchase.Rows[0].Cells[2] = materialName.ToString();
                }
            } 
```

但它给出了错误
我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:38:02.787

假设没有数据错误，尝试将项目添加到`Items`ComboBox 的集合中：

```
DataGridViewComboBoxCell cell;
cell = (DataGridViewComboBoxCell)grdPurchase.Rows[0].Cells[2];
cell.Items.Add(materialName); 
```

# fft - KissFFT (kiss_fftr to kiss_fftri) - 如何重建原始信号？

> ID：10934378
> 
> 赞同：3
> 
> 时间：2012-06-07T14:58:34.960
> 
> 标签：fft, kissfft, ifft

我在理解如何正确使用 KissFFT (1.2.9) 时遇到了一些麻烦。我现在想要实现的只是执行 FFT，然后立即执行 iFFT 以再次重建原始信号。下面的代码片段演示了我在做什么：

```
void test(short* timeDomainData, int length)
{
    // Create the configurations for FFT and iFFT...
    kiss_fftr_cfg fftConfiguration = kiss_fftr_alloc( length, 0, NULL, NULL );
    kiss_fftr_cfg ifftConfiguration = kiss_fftr_alloc( length, 1, NULL, NULL );

    // Allocate space for the FFT results (frequency bins)...
    kiss_fft_cpx* fftBins = new kiss_fft_cpx[ length / 2 + 1 ];

    // FFT...
    kiss_fftr( fftConfiguration, timeDomainData, fftBins );

    // iFFT...
    kiss_fftri( ifftConfiguration, fftBins, timeDomainData );
} 
```

我发现这实际上在运行时崩溃。我发现在创建 KissFFT 配置时将大小除以 2 可以停止崩溃：

```
kiss_fftr_cfg fftConfiguration = kiss_fftr_alloc( length / 2, 0, NULL, NULL );
kiss_fftr_cfg ifftConfiguration = kiss_fftr_alloc( length / 2, 1, NULL, NULL ); 
```

但是，当我播放重建的音频数据时，它几乎是无声的，带有奇怪的噼啪声。

谁能指出我正确的方向？

非常感谢，P

**编辑 1：**这就是我包含 KissFFT 头文件并定义 FIXED_POINT 变量的方式：

```
#define FIXED_POINT 16
#include "kiss_fftr.h" 
```

这确保了 typedef'd 'kiss_fft_scalar' 类型被强制为 int16_t（短）。

**编辑 2：**目标平台是 Android，所以我还在我的 Android.mk 文件中添加了以下内容：

```
LOCAL_CPPFLAGS += -DFIXED_POINT 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T01:11:15.670

我正在努力在 Android 中做同样的事情，还没有得到它（见[这里！](https://stackoverflow.com/questions/10957604/kissfft-forward-inverse-is-outputting-noise-why)），但我可以在你的代码中看到一个问题：“fftBins”需要是“长度”大小。原因是它是原始变换，而不是频率幅度/相位......我想？还是我弄错了？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:36:11.167

我注意到你寄的是短裤。您确定您已编译所有内容以使用 int16_t 作为 DATATYPE 吗？有时预处理器环境的不匹配会导致问题。

此外，定点版本*在两个*方向（fwd，inv）都向下缩放。因此，如果您希望重建您的信号，您将需要将事物乘以 nfft 的总数。我建议分两个阶段乘以饱和度。

例如，如果您正在执行大小为 1024 的 FFT+IFFT，则在 FFT 之后乘以 32，然后在 IFFT 之后再乘以 32。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:48:30.597

我不确定静音，但如果你有很多噼啪声，那可能是因为你正在独立处理相邻的块而不是使用[Overlap-Add](https://ccrma.stanford.edu/~jos/sasp/Overlap_Add_OLA_STFT_Processing.html)，你可以在每个块之间有效地交叉淡入淡出以获得更平滑的特性.

# generics - svcutil 生成的代码中嵌套泛型集合类是否有原因？

> ID：10934379
> 
> 赞同：0
> 
> 时间：2012-06-07T14:58:38.593
> 
> 标签：generics, datacontractserializer, svcutil.exe

我正在使用如下命令行生成我的数据合同：

```
svcutil /ct:System.Collections.Generic.List`1 MySchema.xsd 
```

在我生成的代码中，我最终得到了这样的东西（我们称之为“样式 1”）：

```
partial class A : object, System.Runtime.Serialization.IExtensibleDataObject
{
    private BType collectionB;

    public BType CollectionOfB
    {
        get { return collectionB; }
        set { collectionB = value }
    }

    [System.Runtime.Serialization.CollectionDataContractAttribute(...)]
    public class BType : System.Collections.Generic.List<B>
    {
    }
} 
```

为什么它不会像这样生成（样式 2）？：

```
partial class A : object, System.Runtime.Serialization.IExtensibleDataObject
{
    private System.Collections.Generic.List<B> collectionB;

    public System.Collections.Generic.List<B> CollectionOfB
    {
        get { return collectionB; }
        set { collectionB = value }
    }
} 
```

从使用代码的角度来看，两者的最终结果似乎相同。样式 1 启用序列化的唯一原因是（CollectionDataContractAttribute 的文档表明它适用于类或结构）？它们是内部类，这是 100% 生成的代码，所以我可以忽略实现细节，但这有点困扰我（另外，我的类图中出现了那些“嵌套类型”）。

好的，所以这让我很困扰，因为无法将属性应用于属性来告诉它如何序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T15:37:47.870

所以据我所知，这个问题是 svcutil 的产物。如果我愿意手动编写序列化代码，从[http://msdn.microsoft.com/en-us/library/aa347850.aspx](http://msdn.microsoft.com/en-us/library/aa347850.aspx)看来，我确实可以使用样式 1 并避免不必要的内部类型。

由于消费者的界面是相同的，因此我将轻松更新，而不是拥有一个干净的对象模型。

# javascript - Ember.js - 在把手中初始化的视图中调用方法

> ID：10934380
> 
> 赞同：2
> 
> 时间：2012-06-07T14:58:45.570
> 
> 标签：javascript, ember.js

我有一个`App.WidgetView`负责设置和渲染一个非常昂贵的 3rd 方 ui 元素，我们称之为 ui 元素`widget`。这`widget`有一个`refresh()`方法。我定义了一个`refreshWidget()`方法，`App.WidgetView`其中调用`widget.refresh()`.

```
App.WidgetView = Em.View.extend({
    content: null,
    widget: null,
    init: function () {
        this._super();
        //initialize widget using content
    },
    refreshWidget: function () {
        this.get('widget').refresh();
    }
}); 
```

我`WidgetView`使用`#each`循环从`App.widgetController`

```
{{#each App.widgetController}}
    {{view App.WidgetView contentBinding="this"}}
{{/each}} 
```

现在我需要有一个`refreshAll()`方法，`App.widgetController`我不太清楚如何干净地做到这一点。现在，我有一个`refresher`属性，每次调用时都会在`App.widgetController`其中开始并入罪。`0``refreshAll`

```
App.widgetController.reopen({
    refresher: 0,
    refreshAll: function () {
        this.incrementProperty('refresher');
    }
}); 
```

然后`App.WidgetView`有一个`refresherBinding`绑定到的`App.widgetController.refresher`和一个观察者，它`refreshWidget` 在`refresher`变化时调用

```
App.WidgetView.reopenClass({        
    refresherBinding: 'App.widgetController.refresher',
    refresherChanged: function () {
        this.refreshWidget();
    }.observes('refresher')
}); 
```

它确实有效，但我想知道是否有更清晰的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T16:58:03.403

听起来你应该有一个负责实现的父视图，`refreshAll`然后它可以循环通过它的 childViews 告诉他们刷新。

# scala - 计算元素的出现次数

> ID：10934383
> 
> 赞同：22
> 
> 时间：2012-06-07T14:58:54.550
> 
> 标签：scala, list, haskell, dictionary, list-comprehension

计算列表中的所有元素是 Haskell 中的单行代码：

```
count xs = toList (fromListWith (+) [(x, 1) | x <- xs]) 
```

这是一个示例用法：

```
*Main> count "haskell scala"
[(' ',1),('a',3),('c',1),('e',1),('h',1),('k',1),('l',3),('s',2)] 
```

这个函数也能在 Scala 中如此优雅地表达吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-07T15:04:48.923

```
scala> "haskell scala".groupBy(identity).mapValues(_.size).toSeq
res1: Seq[(Char, Int)] = ArrayBuffer((e,1), (s,2), (a,3), ( ,1), (l,3), (c,1), (h,1), (k,1)) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T15:10:54.447

`group`从 Data.List 库中调用，

```
group :: [a] -> [[a]] 
```

给我们：

```
map (head &&& length) . group . sort 
```

一个列表友好且相对“幼稚”的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T12:31:22.020

另一个实现：

```
def count[A](xs: Seq[A]): Seq[(A, Int)] = xs.distinct.map(x => (x, xs.count(_ == x))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T05:00:13.870

进行直译，让我们试试这个：

```
// Implementing this one in Scala
def fromSeqWith[A, B](s: Seq[(A, B)])(f: (B, B) => B) =
    s groupBy (_._1) mapValues (_ map (_._2) reduceLeft f)

def count[A](xs: Seq[A]) = fromSeqWith(xs map (_ -> 1))(_+_).toSeq 
```

Scala`groupBy`让这变得比它需要的更复杂——有人呼吁`groupWith`or `groupInto`，但他们并没有使 Odersky 成为标准库包含的标准。

# c# - 使用 jQuery .load() 和 aspx

> ID：10934384
> 
> 赞同：0
> 
> 时间：2012-06-07T14:58:57.200
> 
> 标签：c#, jquery, asp.net, .net, load

所以我对 .NET 框架还很陌生，但我想做的是执行以下 jQuery 代码：

```
 $(document).on('click', 'a[data-link]', function () {
        var $this = $(this);
        url = $this.data('link');
        $("#imagePreview").load("imageProcess.aspx?"+url); 
```

其中 url 包含类似“model=2k01&type=black&category=variable”的内容。不幸的是，这不起作用，因为当我在 aspx 文件中执行诸如 Response.Write() 之类的简单操作时，div 标签 imagePreview 不会执行任何操作。但是，删除 ? + url 部分有效，但我无法将任何数据发送到 aspx 文件。我这样做是因为每个链接 a[data-link] 都有不同的数据正在发送，我需要找到一种动态的方式来实现这一点。任何建议将不胜感激。

更新：这是我的 html 代码中生成 url 内容的部分：

```
<a class='modelsBlue' href = '#' data-link='model=" + $(this).find('model').text() + "&type=" + category + "'>" + $(this).find("model").text() + "</a> 
```

并且#image preview 在我的代码中为：

```
<div id = "imagePreview"></div> 
```

当我尝试运行上面的代码时，我收到以下错误，它似乎来自 jQuery.js 文件：

```
Microsoft JScript runtime error: Syntax error, unrecognized expression: &type=AutoEarly 
```

这是 imageProcess.aspx.cs 文件，它现在只是输出目录中的所有图像：

```
namespace ModelMonitoring
{
    public partial class imageProcess : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Response.Write("test");
            foreach (var f in Directory.GetFiles(Directory.GetCurrentDirectory()))
            {
                Response.Write(f);
                Response.Write("<br />");
            }
        }
    }
} 
```

第二次更新：我没有得到在 chrome 或 firefox 中运行的错误，但文件没有被输出。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:59:01.493

原来这是一个空白问题。我不得不添加一个包装：

```
$(this).find('model').text() 
```

读书：

```
$.trim($(this).find('model').text()) 
```

因为我正在读取的 xml 文件在模型名称周围有空格。感谢任何回复的人！

# java - Java中的Git Diff命令

> ID：10934385
> 
> 赞同：2
> 
> 时间：2012-06-07T14:59:00.633
> 
> 标签：java, git, command, diff

对于一个项目，我需要获取一个 git commit Id 列表（几千个），并一次比较它们两个，将返回的特定信息保存到文件中。我遇到的唯一问题是让 diff 命令在 Java 中工作。我花了几个小时试图解决这个问题，但我仍然需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:04:05.147

您可以使用以下命令运行命令并获取其结果：

```
 ProcessBuilder processBuilder = new ProcessBuilder(command);
    processBuilder.redirectErrorStream(true);
    Process process = processBuilder.start();
    String output = readOutput(process);
    try {
        if (process.waitFor() != 0) {
            throw new IOException(
                "command exited in error: " + process.exitValue()
                    + "\n" + output);
        }
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    return output; 
```

因此，您只需为您的问题定义最适合的“git diff ...”命令并解析输出。

# sql - 如何将重复条目插入 SQL Server Management Studio

> ID：10934389
> 
> 赞同：1
> 
> 时间：2012-06-07T14:59:16.347
> 
> 标签：sql, sql-server, stored-procedures

我已经在网上搜索并尝试了以下解决方案，但它不起作用；它不会在表格中输入一行..

```
INSERT INTO [CollisionBegin] 
    SELECT '999-999-99999-9999-9999', [LocalNum], [version], [Submitted] 
    FROM [CollisionBegin] 
    WHERE [UniqueColID] = '2C024576-10BB-4A12-8B6E-BB03191866DE'; 
```

我正在尝试做的事情：在表格中找到一行`UniqueColdID="2C024576-10BB-4A12-8B6E-BB03191866DE"`

这应该检索与 this 对应的行的所有列`UniqueColID`。现在我想用**NEW** `UniqueColID, "999-999-99999-9999-9999"`重新插入这条记录。

上面的代码是我在网上找到的解决方案，但它对我不起作用，因为在我的存储过程中执行该语句后，什么也没发生。

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[AmendInsertDuplicateFields] 
AS
BEGIN

   INSERT INTO [MVCNew].[dbo].[CollisionBegin] 
      SELECT
         '999-999-99999-9999-9999', [LocalNum], [version], [Submitted] 
      FROM 
         [MVCNew].[dbo].[CollisionBegin] 
      WHERE 
         [UniqueColID] = '2C024576-10BB-4A12-8B6E-BB03191866DE';
END 
```

我知道我必须明确地向插入提供值：

```
INSERT INTO [MVCNew].[dbo].[CollisionBegin] (Column1, Column2, Column3, etc) 
   SELECT Column1, Column2, Column3, etc 
   FROM... 
```

但是我有大约 8 个表需要为每个表执行此操作，每个表有 30 列，这样会让人感到困惑..

我刚试过：

```
CREATE TEMPORARY TABLE chan2 ENGINE=MEMORY SELECT * FROM [MVCNew].[dbo].[PrideMVCCollisionBegin] WHERE UniqueColID='2C024576-10BB-4A12-8B6E-BB03191866DE'; 
UPDATE chan2 SET UniqueColID='999-999-99999-9999-9999'; 

INSERT INTO [MVCNew].[dbo].[PrideMVCCollisionBegin] SELECT * FROM chan2; 
DROP TABLE chan2; 
```

但我得到了错误：

```
Unknown object type 'TEMPORARY' used in a CREATE, DROP, or ALTER statement. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:10:15.130

[在您关于同一主题的其他线程上](https://stackoverflow.com/a/10934438/1442492)查看我的回答。简而言之，是的，我建议手动列出所有字段，但是不，您不需要自己全部输入。

如果您真的有动力在不列出所有字段的情况下执行此操作，那么您需要使用一些动态 SQL（或者说，SQLCLR 过程）来实现它。它可以完成，并且应该可以工作，但是对于真正可能通过以传统方式编写查询来最好解决的问题来说，它要复杂得多。

# asp.net-mvc-3 - C# 变量到 JavaScript

> ID：10934391
> 
> 赞同：-3
> 
> 时间：2012-06-07T14:59:19.267
> 
> 标签：asp.net-mvc-3

```
<index>
<div>

string selectedvalue="";

// Coding Part

</div>
<script type="text/javascript">

function onchangeFT(e)
 {
     '@selectedvalue'= e.value; //e.value come form combobox and it is should be assigned to "selectedvalue"
        alert('@selectedvalue');
 }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:00:25.903

```
<script type="text/javascript">

var selectedvalue="";

    function onchangeFT(e)
     {
         selectedvalue = e.value; //e.value come form combobox and it is should be assigned to 
            alert(selectedvalue);
     }

</script> 
```

# jetty - 使用 sbt 不依赖码头的战争包装

> ID：10934392
> 
> 赞同：4
> 
> 时间：2012-06-07T14:59:23.697
> 
> 标签：jetty, war, sbt

我想将我的 SBT 项目构建并打包为 .war 文件。我找到了插件 xsbt-web-plugin，但它需要我不需要的 Jetty 依赖项，因为我使用 Apache Tomcat 进行生产和开发。我对 SBT 的所有要求就是使用标准层次结构将我的构建打包到 .war 文件中。是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T16:48:29.243

如果您在`build.sbt`文件中包含以下行，jetty 将仅用于运行容器以在 sbt 中测试您的应用程序；它不会包含在war文件中：

```
libraryDependencies += "org.eclipse.jetty" % "jetty-webapp" % "8.0.4.v20111024" % "container" 
```

如果您不想，则不必使用容器进行测试。

# ios - 创建灰显的帮助功能

> ID：10934397
> 
> 赞同：0
> 
> 时间：2012-06-07T14:59:31.607
> 
> 标签：ios, user-interface

有谁知道 LinkedIn 是如何创建这个灰色的帮助功能的？

我需要为我的 iPad 应用程序做类似的事情。

![在此处输入图像描述](../Images/f25e97a8e69c5256fc2afbe9d1d11c55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:08:23.323

要创建插图本身，您可能需要设计师的帮助。但是，如果您可以使用简单的标签和按钮。您可以在 Interface Builder 中轻松创建它。

在 XCode 中，转到 File->New File，在 User Interface 部分中，选择 View。为其命名并单击创建。

通过在 XCode 文件列表中单击该文件来打开该文件。

为了给它那种背景，打开属性检查器（菜单视图->实用程序）。在那里，你会看到`background`，选择黑色。您还将看到`alpha`, 使其具有透明度。选择您喜欢的值。

根据需要放置标签、按钮和图像。你就在那里。

# c# - WCF 数据服务：尽管服务设置为 v3，但 MaxProtocolVersion 设置为 v2。最终在 OfType() 上抛出错误

> ID：10934400
> 
> 赞同：7
> 
> 时间：2012-06-07T14:59:49.873
> 
> 标签：c#, wcf-data-services

我遇到了一个问题，当我尝试使用 OfType() 方法对我的 odata 服务进行 linq 查询时，我收到一条错误消息，指出该请求对于版本 2 服务无效。我创建了 WCF 数据服务并将 MaxProtocolVersion 设置为 v3。

```
public class TestDirectorySearch : DataService<TestDirectoryEntities>
{
    public static void InitializeService(DataServiceConfiguration config)
    {
        config.SetEntitySetAccessRule("*", EntitySetRights.AllRead);
        config.SetEntitySetPageSize("*", 50);

        config.UseVerboseErrors = true;
        config.DataServiceBehavior.MaxProtocolVersion = System.Data.Services.Common.DataServiceProtocolVersion.V3;
    }
} 
```

我的 edmx 有以下行：

```
<edmx:DataServices m:DataServiceVersion="1.0" 
    m:MaxDataServiceVersion="3.0" 
    xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata"> 
```

当我尝试执行以下查询时，我收到一条错误消息，指出“当 MaxProtocolVersion 小于 '3.0' 时，不支持方法 'OfType'。”

```
from test in context.Tests.OfType<OrderableTest>()
    where test.TestRevisionId.Equals(mmt.RevisionId)
    select new
    {
            Reflex = test.ReflexTest
            , ShipTemp = (test.SpecimenTemperature == null) ? null : test.SpecimenTemperature.DisplayDescription
    }).FirstOrDefault(); 
```

如果我检查上下文的 MaxProtocolVersion，它设置为 v2。这在什么时候失败了？我该怎么做才能正确设置？

确切的错误：

{"MaxProtocolVersion 小于 '3.0' 时，不支持方法 'OfType'。"}

请求的堆栈跟踪：

```
at System.Data.Services.Client.ResourceBinder.AnalyzeOfType(MethodCallExpression mce, DataServiceProtocolVersion maxProtocolVersion)
at System.Data.Services.Client.ResourceBinder.VisitMethodCall(MethodCallExpression mce)
at System.Data.Services.Client.ALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.DataServiceALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.ALinqExpressionVisitor.VisitExpressionList(ReadOnlyCollection`1 original)
at System.Data.Services.Client.ALinqExpressionVisitor.VisitMethodCall(MethodCallExpression m)
at System.Data.Services.Client.ResourceBinder.VisitMethodCall(MethodCallExpression mce)
at System.Data.Services.Client.ALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.DataServiceALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.ResourceBinder.AnalyzeProjection(MethodCallExpression mce, SequenceMethod sequenceMethod, Expression& e)
at System.Data.Services.Client.ResourceBinder.VisitMethodCall(MethodCallExpression mce)
at System.Data.Services.Client.ALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.DataServiceALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.ALinqExpressionVisitor.VisitExpressionList(ReadOnlyCollection`1 original)
at System.Data.Services.Client.ALinqExpressionVisitor.VisitMethodCall(MethodCallExpression m)
at System.Data.Services.Client.ResourceBinder.VisitMethodCall(MethodCallExpression mce)
at System.Data.Services.Client.ALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.DataServiceALinqExpressionVisitor.Visit(Expression exp)
at System.Data.Services.Client.ResourceBinder.Bind(Expression e, DataServiceContext context)
at System.Data.Services.Client.DataServiceQueryProvider.Translate(Expression e)
at System.Data.Services.Client.DataServiceQuery`1.Translate()
at System.Data.Services.Client.DataServiceQuery`1.Execute()
at System.Data.Services.Client.DataServiceQuery`1.GetEnumerator()
at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
at System.Data.Services.Client.DataServiceQueryProvider.ReturnSingleton[TElement](Expression expression)
at System.Data.Services.Client.DataServiceQueryProvider.Execute[TResult](Expression expression)
at System.Linq.Queryable.FirstOrDefault[TSource](IQueryable`1 source)
at TDMixBLL.TestDirectoryServiceHandler.PopulateOrderableTestInfo(MonitoredMixTest mmt) in C:\Dev\TDMix\ANSR - TDMix\TDMix2\TDMixBLL\TDMixBLL\TestDirectoryServiceHandler.cs:line 161
at TDMixBLL.TestDirectoryServiceHandler.PopulateTestInfo(MonitoredMixTest test) in C:\Dev\TDMix\ANSR - TDMix\TDMix2\TDMixBLL\TDMixBLL\TestDirectoryServiceHandler.cs:line 124
at TDMixBLL.TestDirectoryServiceHandler.GetTest(Int64 testRevisionId) in C:\Dev\TDMix\ANSR - TDMix\TDMix2\TDMixBLL\TDMixBLL\TestDirectoryServiceHandler.cs:line 112
at TDMixBLL.TestDirectoryServiceHandler.PopulateTests(List`1 testsToPopulate) in C:\Dev\TDMix\ANSR - TDMix\TDMix2\TDMixBLL\TDMixBLL\TestDirectoryServiceHandler.cs:line 66
at TDMix2.Tests.TestRetrievalTests.TestPopulate() in C:\Dev\TDMix\ANSR - TDMix\TDMix2\TDMix2.Tests\TestRetrievalTests.cs:line 38 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T09:06:24.367

这是客户端的错误。必须使用 V3 构建 DataServiceContext 才能支持 V3 功能（如 OfType）。DataServiceContext 有一个新的构造函数重载，它采用 MaxProtocolVersion 参数。确保使用它并传入 V3。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T22:13:50.733

除了如上所述安装 MSI 之外，您还可以通过扩展部分类来找到您正在寻找的 Nuget 构造器

```
namespace Project.ServiceReference
{
    public partial class MyEntities : global::System.Data.Services.Client.DataServiceContext
    {
        public TestDirectoryEntities(string uri)
            : base(new Uri(uri), DataServiceProtocolVersion.V3)
        {
            this.ResolveName = new global::System.Func<global::System.Type, string>(this.ResolveNameFromType);
            this.ResolveType = new global::System.Func<string, global::System.Type>(this.ResolveTypeFromName);
            this.OnContextCreated();
        }
    }
} 
```

这 3 行是直接从 Reference.cs 中复制的。

# variables - 为 jmeter 变量正确使用 matchnr

> ID：10934401
> 
> 赞同：1
> 
> 时间：2012-06-07T14:59:51.497
> 
> 标签：variables, jmeter

我需要计算表中的行数。所以我使用 reg。exp。提取器。但是响应断言以错误结束，并试图准确地找到`rows:${ROWS_matchnr}`.

我尝试了谷歌，但我只找到了一些非功能性的建议。

```
Thread Group
    Http Cookie Manager
    Http Request
        Regular Expression Extractor(ROWS, row-(.*), $1$, 0, )
        Response Assertion(rows:${ROWS_matchnr}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:11:46.053

将 Match No 字段中的值从 0 更改为 -1。正如在，咳咳，[无用的官方帮助](http://jmeter.apache.org/usermanual/component_reference.html#Regular_Expression_Extractor)中记录的那样：

```
If the match number is set to a negative number, then all the possible matches in the sampler data are processed. The variables are set as follows:

   refName_matchNr - the number of matches found; could be 0
   refName_n, where n = 1,2,3 etc - the strings as generated by the template
   refName_n_gm, where m=0,1,2 - the groups for match n
   refName - always set to the default value
   refName_gn - not set 
```

然后将 ${ROWS_matchnr} 更改为 ${ROWS_matchNr} （大写 N），它应该可以工作。

如果您仍然有问题，请使用[调试采样器](http://jmeter.apache.org/usermanual/component_reference.html#Debug_Sampler)查看从正则表达式返回的内容。

# performance - 迭代深化还是反复试验？

> ID：10934402
> 
> 赞同：1
> 
> 时间：2012-06-07T14:59:58.760
> 
> 标签：performance, depth, processing-efficiency, iterative-deepening, alpha-beta-pruning

我正在编写棋盘游戏。我使用 alpha-beta 修剪生成了一个游戏树，并有 2 个选项：

1.  使用迭代深化来优化 alpha-beta，使其不断生成一层，直到时间结束。
2.  通过反复试验，我知道在时间限制内每个板配置可达到的最大深度，而无需事先检查下层。

哪种方法更好，并且会使搜索达到更深的深度？例如，我知道，一开始我可以生成一棵深度为 X 的树，消耗所有可用的时间......迭代加深可以增加更多深度吗？

让我知道我是否可以更清楚...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T05:37:16.543

If your branching factor and evaluation function's required time stays about the same between different rounds you might be able to use option 2\. But it sounds like it might be very difficult.

Option 1 has the ability to dramatically increase alpha-beta's performance if you don't have perfect move ordering already. You save the best move at every node, found during the previous search up to d-1, and then tell alpha-beta to search that first. It's called a transposition table, and if it is possible to implement this in your case option 1 will dominate option 2.

The first time I heard of a transposition table I didn't think it could make much of a difference, but it increased my maximum search depth by 50%.

# c# - 正确的面向对象技术的 c# 实践

> ID：10934419
> 
> 赞同：3
> 
> 时间：2012-06-07T15:00:47.573
> 
> 标签：c#, .net, oop

我有一些 c# 代码已经运行了一段时间了.. 我不得不说，虽然我了解 OO 原则的基础知识，但显然有不止一种方法可以给猫剥皮（尽管我讨厌这个词！） .

因此，我有一个基本抽象类，它充当基本数据服务类，如下所示（为了便于阅读而进行了很多简化）：

```
public abstract class dataservice
{
    public enum OutputType : int { XmlTOJson = 0, Xml = 1, Json=2 }

    protected object SomeDBcall(string StoredProcedure)
    {
        // Just assume we are using SQLclient/DB access..
        object SomeReturnObjValue = db.ExecuteScalar(cmd);
        return SomeReturnObjValue;
    {
} 
```

..所以基本上我可能在抽象类中有一些基本的数据库检索/更新/删除调用..主要是因为我的应用程序中有任何数据库操作的基础。

所以现在我们有一个实现基类的类，在我的例子中是一个客户类：

```
public class Customer : dataservice
{
    Public String CustomerDoSomething(string SomeDataEtc)
    {
        // Ok, so again for simplicity sake, we are going to use the base class to 
        // call a DB retrieve 
        object ReturningObj = SomeDBcall("my stored procedure");
        return ReturningObj.ToString();
    }
} 
```

所以我想我的问题是：上述方法“可以”使用吗？考虑到如果需要可以覆盖虚拟方法，但是在这种情况下，我只希望基类使用那些受保护的方法作为调用 DB 操作的方法。

非常感谢任何清晰/指导！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:03:21.203

当然，这“没问题”，尽管我认为基类没有理由成为`abstract`. `abstract`类非常适合实现一些常见的逻辑，而其余的则由派生类来实现。但是，您没有抽象/虚拟方法，所以我在这里看不到重点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:55:12.420

也许您可以让您的抽象类具体化，并将其用作某种帮助类来处理您需要的数据库相关内容。就示例代码而言，不需要有多个数据库访问类，只需不同的参数即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T18:17:55.000

您可能希望查看模板模式来定义基类（抽象或非抽象）中的接口，其中定义了可以在具体子类中覆盖的受保护虚拟钩子。正如另一张海报所提到的，如果您只是打算将数据库服务添加到您的每个领域，您可能希望将基本的数据库服务方法封装到帮助程序类中，而不是从数据库服务派生。

感谢@jgauffin 质疑我的 LSP 违规声明。它不正确，已被删除。在很多情况下，需要通过子类扩展基类的公共接口。当然，这样做需要小心，在执行特定于 Y 的操作 A() 时，您有一个 Y 的实例，而不是 X 或 Z，假设 Y 和 Z 都派生自 X，其中 Y 添加了新的公共方法 A() 和 Z 没有。

OP 上下文中的模板模式示例将允许在子类中更好地封装自定义功能，而无需扩展公共接口。但是，这仅在没有对子类实例施加外部影响的情况下才有效，例如 OP 的 SomeDataEtc 参数。当实例是不可变的时，这最有效。

```
public abstract class DataService
{
    protected object myWidget = new Widget();
    public object SomeDataBaseCall(string storedProcedure)
    {

        DoSomeCustomThing();

        //do db stuff
        object SomeReturnObjValue = db.ExecuteScalar(storedProcedure);
        return SomeReturnObjValue;
    }

    protected void DoSomeCustomThing() {}
}

public class Customer : DataService
{
    override protected void DoSomeCustomThing()
    {
        // do your custom thing here
    }
} 
```

此外，在 OP 的示例中，在派生类的新公共方法中使用委托来调用基类的 SomeDBCall 方法来执行存储过程似乎是明智的。如果您对数据库访问方法进行冗余编码，那么建议的继承没有任何好处。

正如在其他地方也提到的那样，使用组合而不是数据服务功能的继承可能会更好。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T18:36:21.277

**概述**

很多时候，你的“发展本身会指导你”。

**实用的答案。**

(1) 您定义了一个基类“dataservice”，并且从该类中，将基于其他几个类。您标记为“抽象”，这很好。这并不意味着自己有变量。

一些开发人员不会将该类标记为“抽象”，这不是强制性的，但是，它不是一个坏主意，但是，它是一个“好的实践”，标记为“抽象”。

并且，将添加其他方法，由子类使用，可能会被覆盖，也可能不会。

要知道，这些方法是受保护的，并不意味着在对象之外使用，而是由其他方法使用。没关系。

也许，稍后，可能需要在类外使用方法，并且可能必须更改为 public。

(2) 添加一个子类“Customer”，它是“DataService”的后代。添加一个必须在类外使用的方法，并标记为“public”，很好。

它仅供此类使用，而不是父类。因此，不需要“虚拟”或“覆盖”。好的。

(3) 你的例子很简单。**你做的大部分事情，**在我看来都很好。

最终，当您添加更多代码时，事情可能会发生变化，例如基类中私有的方法可能会变为公共方法，或者您可以“重命名”或“重构”一个方法，例如“dosomething”，并发现它更好在基类中，或者可能不是。

**概括**

还有其他答案，即提及、规则或概念。在我看来，它们还可以，但是，请跳过您正在学习更好地使用 OOP 的事实。有些人只是想“一口吃掉蛋糕”，这不是一个好主意。

PD“can ur skin ur rabbit”对我来说听起来更好。

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T18:17:14.083

不。猜猜你下面的数据访问对象模式（DAO）。无论哪种方式，您`Customer`都不是您的数据访问类。它使用一个类进行数据访问。我的意思是你的 DAO 应该支持组合而不是继承。

就像是：

```
public class Customer : IDataAccessObject
{
    public Customer()
    {
        _dataAccess = new DataAccess();
    }

    public string CustomerDoSomething(string SomeDataEtc)
    {
        object ReturningObj = _dataAccess.SomeDBcall("my stored procedure");
        return ReturningObj.ToString();
    }
} 
```

为什么？你的对象得到一个单一的职责，这意味着更容易扩展和重构它们。

您可以阅读有关[SOLID](http://blog.gauffin.org/2012/05/solid-principles-with-real-world-examples/)的信息，这是一些基本的编程原则。

由于您是 .NET 开发人员，我还建议您接受[命名准则](http://msdn.microsoft.com/en-us/library/ms229002)。

# filter - FFmpeg - 如何缩放视频然后应用水印？

> ID：10934420
> 
> 赞同：13
> 
> 时间：2012-06-07T15:00:49.873
> 
> 标签：filter, ffmpeg, overlay, scale, watermark

我试图缩放视频，使其始终为 512 宽，其中高度与原始视频成比例变化。缩放后，我想对视频应用水印/叠加层，因此视频会缩放，但水印不会。

我可以使用以下过滤器分别实现其中的每一个：

**规模**

```
-vf "scale=512:-1" 
```

**水印**

```
-vf "movie=watermark.png [watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2 [out]" 
```

他们自己成功地工作。

但是，当尝试将两者结合起来时，我遇到了一些麻烦。

将两者都作为参数当然是行不通的，因为一个会覆盖另一个。

我试过了：

```
-vf "scale=512:-1,movie=watermark.png [watermark]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2 [out]" 
```

我的想法是先应用比例然后再应用水印，但我得到的只是一个错误

> 为“电影”过滤器指定的输入过多。
> 
> 打开过滤器时出错！

然后将 , 更改为 ; 导致：

> 简单的 filtergraph 'scale=512:-1; 电影=水印.png [水印]; [in][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2 [out]' 没有一个输入和输出。
> 
> 打开过滤器时出错！

我想我需要对过滤器链做更多的事情，但我很难弄清楚。

有什么想法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-07T18:07:12.873

您可以将该`-filter_complex`选项与比例和叠加过滤器一起使用：

```
ffmpeg -i input.mp4 -i logo.png -filter_complex "[0:v]scale=512:-1[bg];[bg][1:v]overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2" output 
```

*   有关详细信息，请参阅[比例](https://ffmpeg.org/ffmpeg-filters.html#scale)和[叠加](https://ffmpeg.org/ffmpeg-filters.html#overlay)过滤器文档。
*   不需要像其他示例中那样使用[电影源过滤器。](https://ffmpeg.org/ffmpeg-filters.html#movie)
*   `-c:a copy`如果要[流式复制](https://ffmpeg.org/ffmpeg.html#Stream-copy)（重新复用）原始音频而不是重新编码，则可以添加。如果您的输入和输出容器格式相同，这将很有用。
*   该示例将徽标放置在中心。对于其他放置选项：
    *   左上角有 10 px 的内边距：`overlay=10:10`
    *   右上角有 10 px 的内边距：`overlay=W-w-10:10`
    *   右下角有 10 px 的内边距：`overlay=W-w-10:H-h-10`
    *   左下角有 10 px 的内边距：`overlay=H-h-10:10`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-19T17:27:50.780

感谢@DiJuMx 和@LordNeckbeard，你们让我更接近我的解决方案。我还没有尝试过 filter_complex 选项，但它看起来确实更简单。

我发现可行的解决方案是：

```
-vf "movie=watermark.png [watermark]; [in]scale=512:trunc(ow/a/2)*2 [scale]; [scale][watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2 [out]" 
```

请注意，我替换了比例尺中的 -1，因为这有可能在缩放时导致视频高度中的像素数不均匀，从而导致编码错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-18T17:29:49.107

据我了解，这可能有效：

```
-vf "movie=watermark.png [watermark]; [in] scale=512:-1,[watermark] overlay=(main_w-overlay_w)/2:(main_h-overlay_h)/2 [out]" 
```

您将比例过滤器应用于输入“[in]”。

不幸的是，我对 ffmpeg 上的过滤器没有太多经验，所以我无法提供进一步的帮助。对不起

# android - 通过 wifi 下载时出现 Android 错误，但数据（3G）正常

> ID：10934424
> 
> 赞同：1
> 
> 时间：2012-06-07T15:01:05.943
> 
> 标签：android, download, wifi

我使用这些代码从服务器下载 mp3 文件：

```
URL u = new URL(link);
HttpURLConnection c = (HttpURLConnection) u.openConnection();
c.setRequestMethod("GET");
c.setDoOutput(true);
c.connect();
FileOutputStream f = new FileOutputStream(new File(root,"Video.mp4"));

InputStream in = c.getInputStream();

byte[] buffer = new byte[1024];
int len1 = 0;
while ( (len1 = in.read(buffer)) > 0 ) {
     f.write(buffer,0,len1);
}
f.close(); 
```

它通过移动数据（3G）按预期工作，但是当我尝试通过 wifi 下载时，LogCat 显示：

```
06-08 22:36:49.892: W/System.err(347): java.net.UnknownHostException: Host is unresolved: dl2.mp3.zdn.vn:80
06-08 22:36:49.902: W/System.err(347):     at java.net.Socket.connect(Socket.java:1038)
06-08 22:36:49.902: W/System.err(347):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
06-08 22:36:49.902: W/System.err(347):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
06-08 22:36:49.902: W/System.err(347):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
06-08 22:36:49.902: W/System.err(347):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
06-08 22:36:49.902: W/System.err(347):     at binh.book.Book$1.run(Book.java:60)
06-08 22:36:49.902: W/System.err(347):     at java.lang.Thread.run(Thread.java:1096)  
06-07 21:34:59.306: W/System.err(9686):     at binh.pronunciation.DownloadFiles$1$1.run(DownloadFiles.java:62) 
```

在这段代码中：

```
c.connect(); 
```

有什么帮助吗？感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T21:27:42.367

```
java.net.UnknownHostException: Host is unresolved: 
```

当您连接到有效的 wifi 但路由器没有接收到互联网时，也会引发此异常。很容易重现这一点：1）连接到有效的wifi 2）现在在路由器插入时从路由器上拔下电缆

你会看到这个错误！！

# c# - 在 C# WinForms 中，我怎样才能摆脱孩子的控制栏？

> ID：10934425
> 
> 赞同：1
> 
> 时间：2012-06-07T15:01:05.803
> 
> 标签：c#, winforms, user-controls, childwindow, maximize

我正在重写一个最初用 FoxPro 编写的程序，供城镇和学校的税务员使用。不幸的是，我边走边学。该程序要求窗口是模态的——用户遵循特定的路径，一次不能玩多个窗口。我有一个打开的 MDI 容器表单。从那里调用所有子窗体。现在，我没有最大化子表单，它看起来像这样：

![在此处输入图像描述](../Images/7b23284f1d64ccd220027c0e280fa0f0.png)

您可以看到滚动条，因为它没有最大化。我真的不希望他们处理滚动条......所以我进入我的表单登录，子表单，并将 WindowState 设置为最大化。我明白了：

![在此处输入图像描述](../Images/a13c03804a7e45136c17f4a86e21c7a8.png)

滚动条消失了，子窗口完全适合容器窗口，但顶部有两个控制栏......容器的主要控制栏，子窗体的第二个较小的控制栏，第二个有双重控制就可以了。我尝试将 MaximizeBox、MinimizeBox、ShowIcon 和 ControlBox 设置为 false，并删除了子窗体的 Text，但该栏仍然存在。如果我单击较小栏上的某些按钮，重复项就会消失。我正在寻找一种方法来摆脱第二个栏，或者隐藏它上面的控件......或者我没有想到的任何东西都可以提供帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T15:10:55.673

为什么不使用用户控件，然后您可以从主窗体中添加/删除它们，它们不会像 Mdi 窗体那样产生开销。

一个快速而肮脏的示例，您将希望在 UserControl 上设置属性和事件，以将数据传入和传出主窗体：

**表格1**

```
public partial class Form1 : Form
{
    UserControl1 login = new UserControl1();
    public Form1()
    {
        InitializeComponent();
        login.ExitEvent += new UserControl1.ExitEventHandler(login_ExitEvent);

    }

    void login_ExitEvent(object sender, EventArgs e)
    {
        panel1.Controls.Remove(login);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        panel1.Controls.Add(login);
        login.BringToFront();
    }
} 
```

**用户控制**

```
public partial class UserControl1 : UserControl
{
    public delegate void ExitEventHandler(object sender, EventArgs e);
    public event ExitEventHandler ExitEvent; 

    public UserControl1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ExitEvent(this, new EventArgs());
    }
} 
```

# .net - 如何使用 RichTextBox 附加和读取每行的文本行？

> ID：10934426
> 
> 赞同：0
> 
> 时间：2012-06-07T15:01:11.527
> 
> 标签：.net, text, richtextbox, delphi-prism, indexoutofboundsexception

我在 winform 上有一个丰富的文本框，并希望每行附加和读取文本行。

看看我在我的代码中的尝试如下：

```
method ScriptDlgpas.Execute(memo:RichTextBox): Boolean;
var i:Integer;
begin
  Result := false;

  scriptMemo.Clear;
  var line1 := memo.Lines;
  while (line in line1) do
    scriptMemo.AppendText(line);

  if ShowDialog = DialogResult.OK then
  begin
    memo.Clear;
    var line2 := ScriptMemo.Lines;
    while(line in line2) do
        memo.AppendText(line);
    Result := true;
  end;
end; 
```

我有两个richtextbox，scriptmemo 和memo。我将文本设置为 scriptmemo，然后将其读回以附加到备忘录 RichTextBox。这一切似乎都是合乎逻辑的，当然它编译成功，但是编译器在运行时引发异常 IndexOutofRange 行**var line1 := memo.Lines**

任何帮助将不胜感激。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:21:10.693

从它的外观来看，要么其他程序员不知道我在说什么，要么不知道如何解决它。

我确实弄清楚了我的问题，并想发布答案，希望它能帮助其他人。

这是修改后的工作代码：

```
method ScriptDlgpas.Execute(memo:RichTextBox): Boolean;
var i:Integer;
    lines1, lines2 : Array of string;
begin
  Result := false;

  scriptMemo.Clear;
  lines1 := memo.Lines;
  for each aline in lines1 do
  begin
    scriptMemo.AppendText(aline+System.Environment.NewLine);
  end;

  if ShowDialog = DialogResult.OK then
  begin
    memo.Clear;
    lines2 := ScriptMemo.Lines;
    for each aline in lines2 do
    begin
        memo.AppendText(aline+System.Environment.NewLine);
    end;
    Result := true;
  end;
end; 
```

# android - 为 Objective-c 和 java 函数创建一个 dll

> ID：10934428
> 
> 赞同：0
> 
> 时间：2012-06-07T15:01:16.970
> 
> 标签：android, objective-c, ios, c, dll

我想创建一个包含某些函数定义的 dll。我将能够在 Objective-c 和 java 环境中使用这些函数。

甚至有可能做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:21:50.660

用 C 或 C++ 编写。您将能够通过 Objective C++ 的魔力将其链接到 Objective C/Cocoa，并通过 NDK 和 JNI 将其链接到 Android 上的 Java。这就是我在我的项目中所做的。在这两种情况下，编译器都是 GCC，RTL 不相同但足够相似。

避免在接口中使用毛茸茸的数据结构，坚持使用原语和原语数组。而且，很自然，您可能需要抽象出一些平台。

您可能希望使用 -fshort-wchar 编译您的代码。碰巧这`short`是 Cocoa 和 JNI 中的本机字符格式。虽然你会失去 RTL 的宽字符串函数，但无论如何它们对 Cocoa 字符串和 Java 字符串都没有用。或者您可以在库/平台边界上使用 UTF-8。每次调用的转换开销，yadda yadda。

注意：如果你只是想重用一些次要的辅助函数，写两次会更容易，或者复制/粘贴然后调整语法。调试 NDK 代码是出了名的棘手。仅当共享位构成项目的 25-30% 或更多时才采用这种方式。就我而言，它更像是 60% 共享。

编辑：如果您采用这种方式，那么进一步移植到其他移动平台将是一件轻而易举的事情，而且有些——不是那么多。具体来说：

*   三星 bada - snap（也是带有 GCC 的 C++，耶）
*   Mobile Qt (Meego, etc) - snap (同上)
*   Windows Mobile 6.5 及以下 - 相对容易（GCC 和 MSVC 之间的编译器差异可能会妨碍）
*   Windows 8 平板电脑（又名 WinRT，Metro）- 同上
*   Blackberry Playbook - 理论上可行，从未尝试过
*   老派黑莓 - 不可能，全是 Java
*   Windows Phone 7 - 不可能，全是 C#/VB.NET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:12:24.933

如果您想为 iOS 和 Android 创建应用程序并且想重用应用程序的业务逻辑（而不是 UI），请查看[Xamarin](http://xamarin.com/)。

您可以使用**C#**进行开发并创建 Android 和/或 iOS 应用程序。

来自 Xamarin 网站：

> 通过在 iOS 和 Android 之间共享数据结构和非 UI 代码来节省时间。

希望能帮助到你。

# function - CUDA 共享内存地址空间与全局内存

> ID：10934434
> 
> 赞同：2
> 
> 时间：2012-06-07T15:01:39.413
> 
> 标签：function, cuda, shared-memory, address-space

为了避免真正冗长和不连贯的函数，我从内核中调用了许多**设备函数。**我在内核调用开始时分配了一个共享缓冲区（每个线程块），并将指向它的指针传递给在内核中执行某些处理步骤的所有**设备**函数。

我想知道以下几点：

**如果我在全局**函数中分配共享内存缓冲区，我传递指针的其他**设备**函数如何区分指针可以引用的可能地址类型（全局设备或共享内存）。

请注意，根据“CUDA 编程指南”使用**共享**修饰符装饰形参是无效的。imhoit 可以实施的唯一方法是

a) 通过在分配的内存上放置标记 b) 通过调用传递不可见的参数。c) 有一个虚拟的统一地址空间，它有单独的全局和共享内存段，并且可以使用对指针的阈值检查？

所以我的问题是：我是否需要担心它，或者如果不将所有函数内联到主内核中，应该如何进行？

==================================================== ==========================================

另一方面，我今天感到震惊的是，带有 CUDA Toolkit 3.0 的 NVCC 不允许所谓的“来自全局函数的外部调用”，需要内联它们。这意味着实际上我必须内联声明所有***设备***功能，并且头文件/源文件的分离被破坏。这当然很丑陋，但是还有其他选择吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:11:04.233

> 如果我在全局函数中分配共享内存缓冲区，我传递指针的其他设备函数如何区分指针可以引用的可能地址类型（全局设备或共享内存）。

请注意，在 CUDA 的上下文中，“共享”内存特指块中所有线程之间共享的片上内存。因此，如果您的意思是使用限定符声明的数组`__shared__`，则使用它在设备函数之间传递信息通常没有意义（因为所有线程都看到相同的内存）。我认为编译器*可能*会将常规数组放入共享内存中？或者它可能在注册文件中。无论如何，它很有可能最终出现在全局内存中，这将是在设备功能之间传递信息的一种低效方式（尤其是在 < 2.0 的设备上）。

> 另一方面，我今天感到震惊的是，带有 CUDA Toolkit 3.0 的 NVCC 不允许所谓的“来自全局函数的外部调用”，需要内联它们。这意味着实际上我必须内联声明所有设备功能，并且头文件/源文件的分离被破坏。这当然很丑陋，但是还有其他选择吗？

CUDA 不包含设备代码的链接器，因此您必须将内核和所有相关设备功能保存在同一个 .cu 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:11:14.410

这取决于您的 CUDA 设备的计算能力。对于计算能力<2.0 的设备，编译器必须在编译时决定指针指向共享内存还是全局内存并发出单独的指令。对于计算能力 >= 2.0 的设备，这不是必需的。

默认情况下，内核中的所有函数调用都是内联的，然后编译器在大多数情况下可以使用流分析来查看某些内容是共享的还是全局的。如果您正在为计算能力 <2.0 的设备进行编译，您可能会遇到警告`warning : Cannot tell what pointer points to, assuming global memory space`。当编译器无法正确遵循您的指针时，这就是您所得到的。

# android - 在 adt&sdk 20 上使用 proguard 时导出 Android 项目

> ID：10934436
> 
> 赞同：4
> 
> 时间：2012-06-07T15:01:46.060
> 
> 标签：android, obfuscation, adt, proguard

我已经更新到新的[adt&sdk 20](http://tools.android.com/download/adt-20-preview)，并且在 Eclipse 上使用 Proguard 的新方式遇到了问题。我根本不是 Proguard 的专业人士，但我一直在使用它，而且它很容易工作。我只是编辑了“project.properties”文件并在那里添加了“proguard.config=proguard.cfg”，它就可以工作了。

可悲的是，进行了一些更改，我无法找到有关如何使用它们的任何信息。谈论 Proguard 的官方网站（在 Android 网站中）仍然谈论旧的方式。

他们在“project.properties”上写道，取消注释下一行：

```
#proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

这不起作用，它在尝试导出时给了我这些错误：

```
Proguard returned with error code 1\. See console
java.io.IOException: The output jar is empty. Did you specify the proper '-keep' options?
at proguard.shrink.Shrinker.execute(Shrinker.java:159)
at proguard.ProGuard.shrink(ProGuard.java:275)
at proguard.ProGuard.execute(ProGuard.java:101)
at proguard.ProGuard.main(ProGuard.java:492) 
```

谁能帮我这个？我以前从未更改过 proguard.cfg 文件，而且一切都是自动的。我不得不做这样的事情是非常罕见的。

他们还添加了一个文件“proguard-project.txt”，它可能会替换 sdk 文件夹文件中的 proguard.cfg 和“扩展”，所以我想知道：是否可以以某种方式引用项目中的文件（并将将“父”文件的内容放入文件中）？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T20:24:51.687

如果它之前运行良好并且您还没有学习 Proguard，只需更改此行：

```
 proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

到这一行：

```
 proguard.config=proguard.cfg 
```

那么您将恢复旧的 Proguard 设置，但我建议您进行更新，除非您使用一些 3rd 方 jar，否则它应该可以正常工作？这些就是它所说的缺失，你应该使用 -keep 标志来阻止 Proguard 在混淆时删除它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T07:32:48.183

好的，解决方案是由于某种原因，我在 Eclipse 上为 sdk.dir 变量设置了错误的位置。

所以我所做的是：

> 1.  转到eclipse的首选项
> 2.  搜索变量
> 3.  然后去 java->build path->classpath variables
> 4.  并添加了带有 android sdk 目录值的“sdk.dir”变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T12:32:37.870

在您的项目根文件夹中创建一个文件 proguard.cfg 并将您的 adt 更新为 21 并使用 proguard v4.8 或 4.9 并且不要忘记在导出 APK 之前运行 Android Lint

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-02T06:39:34.747

默认配置文件的路径已更改为

${sdk.dir}/tools/proguard/proguard-android-optimize.txt

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T14:21:24.720

使用 SDK 22，我的解决方案是将 proguard-project.txt 从 ${sdk.dir}/tools/proguard/ 复制到我的项目工作区中。

如果您查看 project.properties，您会看到它引用了`${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt`.

它找到 ${sdk.dir} 就好了，但是在项目目录中寻找 proguard-project.txt。

# continuous-integration - 运行 QTP 的 Hudson 配置

> ID：10934437
> 
> 赞同：2
> 
> 时间：2012-06-07T15:01:48.087
> 
> 标签：continuous-integration, hudson, qtp

我正在尝试从 Hudson 运行 QTP 测试，因为 Hudson 提供了一种同时在多个从站上运行多个 QTP 脚本的方法。作为概念证明，我需要从 Hudson 运行一个 QTP 脚本，并使用 HTML 发布者插件在 Hudson 中生成结果。

到目前为止，我已经完成了以下工作：
1\. 我编写了一个 QTP 脚本来进行概念验证。
2\. 我写了一个VB Script 代码并把它放在c 盘的一个.vbs 文件中。此代码将调用 QTP 并在 QTP 上拉取所需的测试，执行它并将 HTML 结果保存在指定位置。
3\. 我在 C 盘创建了一个 .bat 文件，它将运行 .vbs 文件（.vbs 文件将调用 QTP 并运行测试）。
4\. 我在 Hudson 创建了一个项目，只有 Master 正在运行构建。

我在配置项目时遇到了困难。在构建部分下，我选择了“执行 Windows 批处理命令”。我想知道我需要指定什么命令来运行上面的 .bat 文件？

有人可以帮忙吗？

谢谢，罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:36:32.103

`cmd /C C:\<path-to-your-bat>`

但是，您没有很好地设置构建 - 一切都是硬编码的。就路径而言，您需要灵活性。我希望您在完成 POC 后能够修复它。

# c++ - 标准输入按键的 asio 服务处理程序

> ID：10934444
> 
> 赞同：7
> 
> 时间：2012-06-07T15:02:09.847
> 
> 标签：c++, boost, boost-asio

我已将[Boost asio 教程的第 3 步](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/tutorial/tuttimer3.html)改编为永远运行，并每秒显示一次“tick”和“tock”而不是计数器：

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

void print(const boost::system::error_code& /*e*/,
    boost::asio::deadline_timer* t, int* count)
{
    if( !((*count) % 2) )
        std::cout << "tick\n";
    else
        std::cout << "tock\n";

    ++(*count);

    t->expires_at(t->expires_at() + boost::posix_time::seconds(1));
    t->async_wait(boost::bind(print,
          boost::asio::placeholders::error, t, count));
}

int main()
{
  boost::asio::io_service io;

  int count = 0;
  boost::asio::deadline_timer t(io, boost::posix_time::seconds(1));
  t.async_wait(boost::bind(print,
        boost::asio::placeholders::error, &t, &count));

  io.run();

  std::cout << "Final count is " << count << "\n";

  return 0;
} 
```

现在我希望能够异步处理标准输入上的按键。是否有一个 io_service 处理程序可以用来响应按键，而不会阻塞睡眠或等待？

例如，我希望能够实现类似于以下的处理函数：

```
void handle_keypress(const boost::error_code&,
    char c)
{
    std::cout << "Tap '" << c << "'\n";
} 
```

我希望我对这个处理程序的调用类似于：

```
 char c = 0;
  boost::asio::stdin_receiver sr(io);
  st.async_wait(boost::bind(handle_keypress, boost::asio::placeholders::error, &c));

  io.run(); 
```

这是我可以用 asio 做的事情吗，要么使用内置的服务处理程序，要么自己编写？

## 编辑，详细说明：

我已经看到[了这个问题](https://stackoverflow.com/questions/2831253/using-boostasioasync-read-with-stdin)，但是accepted answer中的链接到代码只是这样做`main`：

```
 while (std::cin.getline( 
```

我正在编写的应用程序不是我上面概述的这个简单的滴答滴答小玩意儿，而是一个多播服务器。几个工作线程将向多播组发送数据包，响应来自主线程的消息，并将消息发送回主线程。反过来，应用程序将由来自标准输入的输入“驱动”——例如，当用户按下“P”键时，多播广播将暂停，当按下“Q”时，整个事情将关闭. 在主线程中，我对这些输入的响应就是向工作线程发送消息。

上面的`while`循环在我的场景中不起作用，因为在等待用户的标准输入输入时，主线程将无法处理来自工作线程的消息。来自工作线程的一些消息将生成输出到标准输出。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T03:12:27.363

我不相信[posix 聊天客户端](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/example/chat/posix_chat_client.cpp)使用 while 循环或调用`std::getline`，这是您在我之前的答案中链接到的示例代码。也许您指的是另一个例子？在任何情况下，您都不需要使用`io_service::dispatch`甚至单独的线程。流描述符的内置设施在这里工作得很好。请参阅[我之前](https://stackoverflow.com/questions/5210796/boost-asio-how-to-write-console-server/5211349#5211349)对类似问题的回答：使用 a`posix::stream_descriptor`并分配`STDIN_FILENO`给它。使用`async_read`和处理读取处理程序中的请求。

我已经用一种方法修改了你的示例代码来完成这个

```
#include <iostream>
#include <boost/asio.hpp>
#include <boost/bind.hpp>
#include <boost/enable_shared_from_this.hpp>
#include <boost/date_time/posix_time/posix_time.hpp>

void print(const boost::system::error_code& /*e*/,
    boost::asio::deadline_timer* t, int* count)
{
    if( !((*count) % 2) )
        std::cout << "tick\n";
    else
        std::cout << "tock\n";

    ++(*count);

    t->expires_at(t->expires_at() + boost::posix_time::seconds(1));
    t->async_wait(boost::bind(print,
          boost::asio::placeholders::error, t, count));
}

class Input : public boost::enable_shared_from_this<Input>
{
public:
    typedef boost::shared_ptr<Input> Ptr;

public:
    static void create(
            boost::asio::io_service& io_service
            )
    {
        Ptr input(
                new Input( io_service )
                );
        input->read();
    }

private:
    explicit Input(
            boost::asio::io_service& io_service
         ) :
        _input( io_service )
    {
        _input.assign( STDIN_FILENO );
    }

    void read()
    {
        boost::asio::async_read(
                _input,
                boost::asio::buffer( &_command, sizeof(_command) ),
                boost::bind(
                    &Input::read_handler,
                    shared_from_this(),
                    boost::asio::placeholders::error,
                    boost::asio::placeholders::bytes_transferred
                    )
                );
    }

    void read_handler(
            const boost::system::error_code& error,
            const size_t bytes_transferred
            )
    {
        if ( error ) {
            std::cerr << "read error: " << boost::system::system_error(error).what() << std::endl;
            return;
        }

        if ( _command != '\n' ) {
            std::cout << "command: " << _command << std::endl;
        }

        this->read();
    }

private:
    boost::asio::posix::stream_descriptor _input;
    char _command;
};

int main()
{
  boost::asio::io_service io;

  int count = 0;
  boost::asio::deadline_timer t(io, boost::posix_time::seconds(1));
  t.async_wait(boost::bind(print,
        boost::asio::placeholders::error, &t, &count));

  Input::create( io);

  io.run();

  std::cout << "Final count is " << count << "\n";

  return 0;
} 
```

编译、链接和运行

```
samm:stackoverflow samm$ g++ -I /opt/local/include stdin.cc -L /opt/local/lib -lboost_system -Wl,-rpath,/opt/local/lib
samm:stackoverflow samm$ echo "hello world" | ./a.out
command: h
command: e
command: l
command: l
command: o
command:  
command: w
command: o
command: r
command: l
command: d
read error: End of file
tick
tock
tick
tock
tick
tock
tick
tock
tick
tock
^C
samm:stackoverflow samm$ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T21:28:07.953

始终可以选择在单独的线程中处理标准输入，并通过[io_service::dispatch 将任何按键发布到主事件循环](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/reference/io_service/dispatch.html)

> 此函数用于要求 io_service 执行给定的处理程序。
> 
> io_service 保证仅在当前调用 run()、run_one()、poll() 或 poll_one() 成员函数的线程中调用处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-29T13:24:19.543

在 Linux 下，获取`STDIN`按键事件的关键在于终端配置。您可以`ICANON`通过取消设置标志`tcsetattr()`，然后您将获得每个按键事件。这是一个示例程序，它演示了这一点。请注意，缓冲区大于 1，因此我们也可以一次获取更多字符，如果它们可用（例如，当您复制和粘贴时）。

```
#include <boost/asio.hpp>
#include <iostream>

int main()
{
    boost::asio::io_service ioservice;
    boost::asio::posix::stream_descriptor in(ioservice, STDIN_FILENO);
    char buf[10];

    struct termios term_old;
    tcgetattr(STDIN_FILENO, &term_old);
    struct termios newt = term_old;

    newt.c_lflag &= ~(ICANON); // don't wait until EOL
    newt.c_lflag &= ~(ECHO);   // don't echo

    tcsetattr(STDIN_FILENO, TCSANOW, &newt);

    std::function<void(boost::system::error_code, size_t)> read_handler
        = [&](boost::system::error_code ec, size_t len) {
              if (ec) {
                  std::cerr << "exit: " << ec.message() << std::endl;
              } else {
                  buf[len] = '\0';
                  std::cout << "in: " << buf << std::endl;
                  in.async_read_some(boost::asio::buffer(buf), read_handler);
              }
          };

    in.async_read_some(boost::asio::buffer(buf), read_handler);

    ioservice.run();

    tcsetattr(STDIN_FILENO, TCSANOW, &term_old);
} 
```

# eclipse - How to get linux terminal in Eclipse

> ID：10934452
> 
> 赞同：0
> 
> 时间：2012-06-07T15:02:27.210
> 
> 标签：eclipse, terminal

Is it possible to have linux prompt in Eclipse whatever perspective is on? I would like to have the same thing I have in Gedit: [http://buntublog.files.wordpress.com/2009/02/gedit_plugin.png?w=460&h=353](http://buntublog.files.wordpress.com/2009/02/gedit_plugin.png?w=460&h=353)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:21:08.820

您还可以使用 Target Management 的[Remote System Explorer](http://eclipse.org/tm/)插件。只需从 Eclipse 中打开到本地主机的 SSH 连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:04:56.940

几个可能的解决方案：

[http://code.google.com/p/openextern/](http://code.google.com/p/openextern/)
[http://marketplace.eclipse.org/content/shelled](http://marketplace.eclipse.org/content/shelled)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-15T08:39:18.920

有一个名为 Local Terminal 的孵化器项目。您可以从通用工具下的 Eclipse 更新站点安装它->本地终端比[http://elt.googlecode.com好得多](http://elt.googlecode.com)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T13:53:10.670

我喜欢这个：Eclipse 的终端插件（[http://code.google.com/p/elt/](http://code.google.com/p/elt/)）。

# c# - C# 动态多维数组

> ID：10934453
> 
> 赞同：1
> 
> 时间：2012-06-07T15:02:29.983
> 
> 标签：c#, multidimensional-array, labview

我有一个功能...

```
private double[,] AddToArray(double[,] array, double[] dataToAdd)
{
    // Make a new row at the end of 'array' and copy values 
    // from 'dataToAdd' into the new row.
    //
    // Return the new, modified array.

} 
```

但是 'double[,]' 不是动态的，我不知道数组的最终大小是多少。我可以从中创建一个列表并将新行添加到列表中，但是我似乎无法将其转换回双 [，]。List.ToArray() 想要输出一个锯齿状数组 (double[][])。这行不通。我正在与在 LabVIEW 中开发的程序进行交互，而 LV 拒绝接受锯齿状数组。LV 对固定数组 ([,]) 很满意。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:34:21.793

你可以试试这个：

```
private double[,] AddToArray(double[,] array, double[] dataToAdd)
{
  var dim0 = array.GetLength(0);
  var dim1 = array.GetLength(1);
  if (dim1 != dataToAdd.Length) throw new ArgumentException();

  var na = new double[dim0 + 1, dim1];
  Array.Copy(array, na, array.Length);
  for (var i = 0; i < dim1; ++i) na[dim0, i] = dataToAdd[i];

  return na;
} 
```

它显式地将高阶维度加一，并验证低阶维度的长度是否等于`dataToAdd`数组。我无法比循环更智能`dataToAdd`地从二维数组复制；`for`不能申请`Array.Copy`不同等级的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:11:53.253

您始终可以手动创建二维数组：

```
double[,] array = new double[list.Count, data.Length];
for(int i = 0;i < list.Count;++i)
    for(int j = 0;j < data.Length;++j)
        array[i, j] = list[i][j]; 
```

也就是说，当然，假设所有的“dataToAdd”都是统一的长度。否则，你会为未使用的元素填充什么数组？

# pdf - ImageMagick PDF to JPGs 有时会导致黑色背景

> ID：10934456
> 
> 赞同：52
> 
> 时间：2012-06-07T15:02:50.263
> 
> 标签：pdf, imagemagick, jpeg

我有以下内容：

```
ghostscript-fonts-5.50-24
ImageMagick-6.7.2-1
ghostscript-9.02-1 
```

我用它为每个页面创建一系列 JPG，使用：

```
convert -density 175 -colorspace sRGB test.pdf -resize 50% -quality 95 test.jpg 
```

当我在我的 Windows 机器上运行它时，一切似乎都可以正常工作，但在我们的 linux 服务器上，我们遇到了黑色背景问题。

生成的 JPG 具有黑色背景，使图像无法读取，我缺少什么或者我应该做些什么来纠正这个问题？

几天来我一直在谷歌上，但每个建议似乎都对我不起作用。

非常感谢任何帮助，在此先感谢:)

**编辑**

只是在转换其中一个产生黑色背景的 PDF 时注意到了这个输出：

```
**** Warning: Fonts with Subtype = /TrueType should be embedded.
             The following fonts were not embedded:
                    Arial
                    Arial,Bold
                    Arial,BoldItalic
**** This file had errors that were repaired or ignored.
**** The file was produced by:
**** >>>> Microsoft« Word 2010 <<<<
**** Please notify the author of the software that produced this
**** file that it does not conform to Adobe's published PDF
**** specification. 
```

这似乎是相关的，但由于我们无法控制 PDF 的生成方式，我们需要某种方法来修复此服务器端。

再次感谢

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-04-30T06:22:06.420

今天跑到这个，发现这个：

[https://www.imagemagick.org/discourse-server/viewtopic.php?t=20234](https://www.imagemagick.org/discourse-server/viewtopic.php?t=20234)

基于此，这些都应该有效：

*   `-flatten`
*   `-alpha flatten`
*   `-alpha remove`

我目前正在为我的具体案例使用以下内容，效果很好：

```
convert -thumbnail "1280x800>" -density 300 -background white -alpha remove in.pdf out.jpg 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-21T11:22:06.313

解决此问题的简单方法是使用支持透明度的图像格式，例如 png。

所以：

```
convert -density 175 -colorspace sRGB test.pdf -resize 50% -quality 95 test.png 
```

问题解决了 ：）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-10-22T04:46:47.313

如果您想要高质量的结果，请使用以下命令：

```
convert -density 700 input.pdf -resize 25% -append  -quality 98 -alpha remove output.jpg 
```

对于 windows 用户，使用`magick`代替`convert`

# python - Python 浮点字符串格式无法正常工作

> ID：10934459
> 
> 赞同：1
> 
> 时间：2012-06-07T15:02:55.607
> 
> 标签：python, string, formatting, mini-language

我很确定我做对了，但没有从 Python 2.7.3 字符串格式化迷你语言中得到我期望的结果。我正在尝试将浮点数的输出格式化为 3 个整数值和不同数量的十进制值。除整数值外，一切正常。

就其本身而言，以下代码可以让我获得 3 个整数值......

```
num = 3
value = '{:03}'.format(num)

returns '003' 
```

和花车工作...

```
num = 3.12345
value = '{:01.2f}'.format(num)

returns '3.12' 
```

但是，将两者结合起来似乎无法正常工作。小数精度有效，但整数精度不...

```
num = '3.12345'
value = '{:03.2f}'.format(num)

returns '3.12'

instead of the expected '003.12' 
```

如果我尝试以下任何一种格式，情况也是如此......

```
value = '{:03.02f}'.format(num)
- or -
value = '{0:3.2f}'.format(num)
- or -
value = '{:3.02f}'.format(num)
- or -
value = '{0:3.02f}'.format(num)
- or -
value = '{0:03.2f}'.format(num)
- or -
value = '{0:03.02f}'.format(num)
- or -
value = '{:0>3.2f}'.format(num)
etc...

Which all return the same '3.12' instead of '003.12' 
```

如果您对我为可变/动态小数精度所做的事情感到好奇，关键是要保持所有值的长度相同，但不同的值集可能不具有相同的精度。所以我取最长精度值或 10 中较小的一个，并强制其他人像这样匹配..

```
from decimal import Decimal

dVals = [
    abs(Decimal(val1).as_tuple().exponent), # Get the number of decimal points
    abs(Decimal(val2).as_tuple().exponent), # "" ""
    abs(Decimal(val3).as_tuple().exponent), # "" ""
    abs(Decimal(val4).as_tuple().exponent), # "" ""
    ]

    p = max(dVals)  # Get the largest value
    p = min(p, 10)  # Get the smaller of the largest value or 10

vals = [val1, val2, val3, val4]

for val in vals:
    value = '{:0>3.{prec}f}'.format(val, prec = p)
    # do whatever with value here... 
```

同样，这一切都完美无缺，除了当我将整数值与浮点精度结合时，它永远不会返回 3 个精度位置。因此，我为确保输出具有相同格式长度的值所做的所有努力都是徒劳的。最终，输出应该类似于...

```
'009.123456700'
'180.101010101'
'054.987654321' 
```

相反，它看起来像这样......

```
'9.123456700'
'180.101010101'
'54.987654321' 
```

换句话说，丑陋。:-|

至少，我会接受以下输出......

```
'  9.123456700'
'180.101010101'
' 54.987654321' 
```

有什么想法我在这里做错了吗？非常感谢您的帮助！

问候，

-RMW混沌

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T15:05:40.983

第一个数字是结果的总宽度，而不是小数点前的宽度。

```
>>> '{:06.2f}'.format(3.12345)
'003.12' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:16:06.957

```
num = '3.12345'
value = '{:03.2f}'.format(num) 
```

这里`03`考虑了所有数字（包括浮点本身）。所以你应该做这样的事情：

```
value = '{:06.2f}'.format(num) 
```

这会让你：`'003.12'`

计算此字符串`'003.12'`中的所有内容，结果为 6。但是您使用的 3 甚至比最小表示的计数还要少，这就是您得到的原因`'3.12'`

# ruby - Ruby Unicode 编码

> ID：10934468
> 
> 赞同：3
> 
> 时间：2012-06-07T15:03:30.373
> 
> 标签：ruby, unicode

Ruby 的 Unicode 编码是什么？我知道大多数语言都像 Java 一样以 UTF-16 编码。我想知道 Ruby 是用什么编码的。我检查了文档，但找不到任何对它的引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:22:28.457

Ruby 支持很多编码。尝试在 irb 中输入以下内容：

```
Encoding.name_list 
```

另请参阅这些博客条目：

[Ruby 1.9 字符串](http://blog.grayproductions.net/articles/ruby_19s_string)

[Ruby 1.9：默认编码](http://blog.grayproductions.net/articles/ruby_19s_three_default_encodings)

# iphone - 调用方法以在 UISplitviewController 中显示左主 ViewController

> ID：10934472
> 
> 赞同：1
> 
> 时间：2012-06-07T15:03:42.190
> 
> 标签：iphone, ipad, uisplitviewcontroller, ios5.1

我最近在 XCode 4.3.2 (iOS 5.1) 中创建了一个示例 Master Detail UISplitViewController 项目。

现在，一旦我在 deail 视图中选择 barbuttonitem，就会显示根视图。所以我想知道当我选择 bar button item 时会调用哪个方法。

以下代码用于执行此操作：

```
- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{

     barButtonItem.title = NSLocalizedString(@"Left", @"Left");
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];

} 
```

背后的目的是知道方法名称，以便我可以设置带有图像的自定义按钮并将其设置在导航栏中并调用该特定方法来显示根主视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:37:55.910

我**认为**您正在寻找的方法是：

```
- (void)splitViewController:(UISplitViewController *)svc willShowViewController:(UIViewController *)aViewController invalidatingBarButtonItem:(UIBarButtonItem *)button; 
```

# json - 如何排除转推？

> ID：10934478
> 
> 赞同：0
> 
> 时间：2012-06-07T15:04:03.773
> 
> 标签：json, twitter

我正在使用 getJSON jquery 方法在我的网站上放置一个 twitter 提要。我发现有很多转推被张贴，这是我不想要的。我做了一些研究，但没有找到一个好的解决方案来删除它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:11:46.250

`statuses/user_timeline`有一个参数`include_rts`。传球`include_rts=false`应该可以解决问题。

有关详细信息，请参阅[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)。

# sql - 向表中插入数据时 SQL 可接受的值范围

> ID：10934481
> 
> 赞同：0
> 
> 时间：2012-06-07T15:04:06.997
> 
> 标签：sql

向表中插入值时，有什么方法可以避免将无效数据放入列中？

前表 - 项目

```
Itno - pk
Itdesc
salesprice - Acceptable values should > 150 and < 10500 
```

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:07:53.090

以下语法适用于 MySQL / SQL Server / Oracle / MS Access。

```
CREATE TABLE mytable
(
Itno int NOT NULL,
Itdesc varchar(255) NOT NULL,
salesprice  int,
CONSTRAINT chk_salesprice  CHECK (salesprice >150 AND salesprice < 10500)
) 
```

您还可以使用带有检查约束的用户定义函数来验证动态值。

[带有检查约束的 UDF](http://connectsql.blogspot.in/2011/01/sql-server-function-based-check.html)

[请参阅查看更多示例](http://www.w3schools.com/sql/sql_check.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:11:52.643

除了@Romil 的回答，大多数 RDBMS 的支持*触发器*可以在提交之前或之后验证数据。

通常，`CHECK`约束是首选，但有时（尤其是在必须根据可变标准评估数据的情况下）触发器是唯一的方法。

# php - 页面内文件上传

> ID：10934490
> 
> 赞同：1
> 
> 时间：2012-06-07T15:04:54.380
> 
> 标签：php, javascript, image, upload

我需要页面内的图像上传系统，以便用户可以在不离开个人资料编辑页面的情况下上传图片。当用户编辑他们的个人资料时，就像在 soundcloud 中一样。图片应上传，上传后应显示在个人资料编辑页面上。一切都是用 PHP 编写的，但我猜一些 javascript 必须在那里。如果已经有类似的东西我可以使用，请告诉我。

这是配置文件编辑代码

```
$username = $_SESSION['username'];
    $pass = $_SESSION['password']; 
  include ("../database.php");
   $result = mysql_query("SELECT * FROM members WHERE username='$username' AND     password='$pass' AND artist='Y'");

while($row = mysql_fetch_array($result)){

$artisturl = mysql_query("SELECT * FROM members  
WHERE username='$username' AND password='$pass'  AND artist='Y'");

while($row = mysql_fetch_array($artisturl)){
echo '<form action="phpscripts/artistupdate.php" method="post">
<input type="text" name="artistname" value="'. $row['artistname'].'" class="name"    maxlength="80"><span id="editlink"><t1>Your profile link will be: <br><a    href="http://newbornsounds.co.uk/artists/artist.php?artist='.$row['artistname'].'">    <b>http://newbornsounds.co.uk/artists/artist.php?artist=<FONT
 style="BACKGROUND-COLOR: yellow">'.$row['artistname'].'</font></b></a></span>
 <br><div id="urlwarn"><t1>Please note that if you change your url all the links you     have placed outside of NBS will be affected.</t1></div>';
}
}
?>
<hr>
<?php 

    $username = $_SESSION['username'];
    $pass = $_SESSION['password']; 
   include ("../database.php");
   $result = mysql_query("SELECT * FROM members WHERE username='$username' AND     password='$pass' AND artist='Y'");

while($row = mysql_fetch_array($result)){

       echo '<div id="artistsbio"><form action="phpscripts/artistupdate.php"    method="post">
       <textarea name="bio" rows="10" cols="80" name="bio" value="'.    $row['bio']. '" class="bio">'. $row['bio']. '</textarea><br>
       <div id="probwarn"><t1>Everything is still in the beta stage so there are bound to be a few problems. If you spot one please <a href="mailto:artists@newbornsounds.co.uk"><b>tell us about it.</b></a></t1></div>

       </div>';

}
?>

<a href="upload.html"><div id="imageright1edit"><img src="<?php  
   include ("../database.php");
   $result = mysql_query("SELECT * FROM members WHERE username='$username' AND     password='$pass' AND artist='Y'");

 while($row = mysql_fetch_array($result)){ echo ''. $row['image1'].''; }?>" width="100%"></a>
<a href="upload.html"><div id="imageright1edit"><img src="<?php  
   include ("../database.php");
   $result = mysql_query("SELECT * FROM members WHERE username='$username' AND    password='$pass' AND artist='Y'");

while($row = mysql_fetch_array($result)){ echo ''. $row['image2'].''; }?>" width="100%"></div></a>

<!-- This is the image upload select box-->
<input type="file" name="imageupload" value="Upload an image" class="filebutton"></div>

<input type="submit" name="submit" value="Done" class="button"></form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:14:25.687

*   [https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)
*   [http://www.uploadify.com/](http://www.uploadify.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:11:28.030

我从本教程中学习了如何做到这一点：

[http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/](http://www.webmotionuk.co.uk/php-jquery-image-upload-and-crop/)

它利用了 jQuery 的[imgAreaSelect 图像裁剪插件](http://odyniec.net/projects/imgareaselect/)

# javascript - innerHTML = HTML & JQuery，JQuery 不执行

> ID：10934494
> 
> 赞同：1
> 
> 时间：2012-06-07T15:04:57.193
> 
> 标签：javascript, html, innerhtml, jquery

我正在使用 jscript 插入 HTML。

```
function pluginOrderTotals(OrderTotals) {
var orderTotalsHTML = "";
if (OrderTotals != "") {
    orderTotalsHTML = "<a id='OrderTotals' href=''>Order Totals</a><p id='OrderTotalText'>" + OrderTotals + "</p><script>$('#OrderTotals').click(function () {          $('#OrderTotalText').toggle('fast');});";
}
document.getElementById("pluginWidgets2Div").innerHTML = orderTotalsHTML;} 
```

变量的 HTML 部分传递得很好，但 JQuery 动画不起作用。如果我像下面这样在 HTML 中硬编码，动画效果很好。

```
 <div id="pluginWidgets2Div">
        <a id="OrderTotals" href="">Order Totals</a>
            <p id="OrderTotalText">Hiya<br />
            Such interesting text, eh?</p>
        <a id="FreightView" href="">View Freight</a>
            <p id="FreightViewText" style="display: none">Hiya<br />
            Such interesting text, eh?</p>
        <a href="">Another (3)</a>
        <a href="">Menu item 4</a>
        <a href="">One more (5)</a>
        <script>
        $("#OrderTotals").click(function () {
        $("#OrderTotalText").toggle("fast");
        });
        $("#FreightView").click(function () {
        $("#FreightViewText").toggle("fast");
        });
        </script></div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:08:10.853

`.innerHTML`不执行脚本元素。您可以`.html()`在 jQuery 中使用...

或者做直接运行该代码的明智之举：

```
function pluginOrderTotals(OrderTotals) {
    var orderTotalsHTML = "";
    if (OrderTotals != "") {
        orderTotalsHTML = "<a id='OrderTotals' href=''>Order Totals</a><p id='OrderTotalText'>" + OrderTotals + "</p>";
    }
    document.getElementById("pluginWidgets2Div").innerHTML = orderTotalsHTML;
    $('#OrderTotals').click(function () {
        $('#OrderTotalText').toggle('fast');
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:14:28.583

有一个很好的不显眼的方法可以让这个代码在机翼中等待，这样它就可以工作了。插入 HTML 时，跳过 JavaScript - 单独处理。

```
function pluginOrderTotals(OrderTotals) {
    var orderTotalsHTML = "";
    if (OrderTotals != "") {
    orderTotalsHTML = "<a id='OrderTotals' href=''>Order Totals</a><p id='OrderTotalText'>" + OrderTotals + "</p>";
    }
document.getElementById("pluginWidgets2Div").innerHTML = orderTotalsHTML;
}

$(document).ready(function(){
    $("#pluginWidgets2Div").on("click", "#OrderTotals", function () {
        $("#OrderTotalText").toggle("fast");
    });
}); 
```

如果/当它被插入，jQuery 将应用于 HTML，并且您的 HTML 不需要在其中包含任何 JavaScript。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:08:02.723

您还没有关闭`<script>`标签：

```
orderTotalsHTML = "<a id='OrderTotals' href='#'>Order Totals</a><p id='OrderTotalText'>" + OrderTotals + "</p><script>$('#OrderTotals').click(function () {  $('#OrderTotalText').toggle('fast');});</script>"; 
```

# c# - 如何在 C# 成员初始化程序中引用另一个属性值？

> ID：10934496
> 
> 赞同：3
> 
> 时间：2012-06-07T15:05:02.997
> 
> 标签：c#, object-initializers

在 VB 中，以下是一个有效的对象初始化程序，其中一个成员初始化程序引用了之前已初始化的另一个成员的值。

`new MyObject() with {.Property1="x", .Property2 = .Property1 + "y"}`

如果我尝试在`C#`使用时做同样的事情

```
new MyObject() {Property1 = "x", Property2 = Property1 + "y"} 
```

我得到错误

> 当前上下文中不存在名称“Property1”。

这有点令人惊讶，因为这两种语言之间存在相当多的平等，但也许这是少数几个差异之一。

有没有办法做到这一点`C#`？对于那些想知道具体用例可能是什么的人，我正在使用一个相当复杂的 LINQ 查询构造一个复合对象结构。

```
IEnumerable<Question> query =
(from q in dtQuestions.AsEnumerable()
 join a in dtAnswers.AsEnumerable() on q.Field<int>("question_type_id") equals a.Field<int>("question_type_id") into Group
 select new Question()
 {
     Id = q.Field<int>("question_type_id"),
     SequenceNumber = q.Field<int>("sequence_no"),
     IsChild = q.Field<bool>("isChildQuestion"),
     EktronContentKey = q.Field<string>("ektron_content_key"),
     Text = q.Field<string>("description"),
     QuestionKindId = q.Field<int>("question_kind_type_id"),
     Answers = (from a2 in Group
                select new Answer()
                {
                    Id = a2.Field<int>("answer_type_id"),
                    SequenceNumber = a2.Field<int>("sequence_no"),
                    EktronContentKey = a2.Field<string>("ektron_content_key"),
                    Text = a2.Field<string>("description"),
                    IsSelected = a2.Field<bool>("isSelected"),
                    ImageKey = q.Field<int>("question_type_id") == 2 ? "" : (Id % 2 == 0 ? "heating-gas-modern.png" : "heating-gas-condensing.png"),
                    ChildQuestionIds =
                          (from r in dtAnswerChildQuestions.AsEnumerable()
                           where r.Field<int>("answer_type_id") == Id
                           select r.Field<int>("question_type_id")).ToArray()
                }).ToArray(),
     SelectedAnswerId = QuestionKindId == 1 ?
                            (from Answer a3 in Answers
                             where a3.IsSelected == true
                             select a3.Id).SingleOrDefault() :
                            0,
     SelectedAnswerIds = QuestionKindId == 2 ?
                           (from Answer a4 in Answers
                            where a4.IsSelected == true
                            select a4.id).ToArray() :
                            new int() { }
 }
); 
```

在此要解决的真正问题是对用于将值分配给 SelectedAnswerId 和 SelectedAnswerIds 的 LINQ 表达式中的 Answers 属性的引用。我可能不得不将这两个表达式分解为它们自己的独立分配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T16:15:17.383

在 C# 中引用这样的属性是不可能的。由于您有“X”，因此很明显可以编写代码以使用 X。

由于这是 Linq，您可能希望使用[Let 子句](http://msdn.microsoft.com/en-us/library/bb383976.aspx)并创建业务逻辑处理来处理 X 甚至 Y，然后进行成员初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:14:13.677

我不确定是否可以在初始化程序中访问 C# 中的 Property1，但是由于您已经获得了 Property1 的值，您可以执行以下操作，并希望编译器对其进行正确优化：

```
new MyObject() {Property1 = "x", Property2 = "x" + "y"} 
```

但是，这会使您的代码变得丑陋，并且您最好将这两个表达式分解为它们自己的独立分配。

或者，您可以将一些代码移动到 Answers 属性设置器中，以便如果 QuestionKindId 已设置，那么您可以在内部设置属性 SelectedAnswerId 和 SelectedAnswerIds。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T17:07:07.473

我最终不得不通过使用辅助 for 循环来解决这个问题。代码有点太复杂，无法使用 LET 语句。

```
 IEnumerable<Question> query =
        (from q in dtQuestions.AsEnumerable()
         join a in dtAnswers.AsEnumerable() on q.Field<int>("question_type_id") equals a.Field<int>("question_type_id") into Group
         select new Question()
         {
             Id = q.Field<int>("question_type_id"),
             SequenceNumber = q.Field<int>("sequence_no"),
             IsChild = q.Field<bool>("isChildQuestion"),
             EktronContentKey = q.Field<string>("ektron_content_key"),
             Text = q.Field<string>("description"),
             QuestionKindId = q.Field<int>("question_kind_type_id"),
             Answers = new AnswerCollection((from a2 in Group
                                             select new Answer()
                                             {
                                                 Id = a2.Field<int>("answer_type_id"),
                                                 SequenceNumber = a2.Field<int>("sequence_no"),
                                                 EktronContentKey = a2.Field<string>("ektron_content_key"),
                                                 Text = a2.Field<string>("description"),
                                                 IsSelected = a2.Field<bool>("isSelected"),
                                                 ImageFileId = a2.Field<int?>("file_id"),
                                                 ChildQuestionIds =
                                                       new Collection<int>((from r in dtAnswerChildQuestions.AsEnumerable()
                                                                            where r.Field<int>("answer_type_id") == a2.Field<int>("answer_type_id")
                                                                            select r.Field<int>("question_type_id")).ToList())
                                             }))
         }
      );
    foreach (var question in query)
    {
        question.SelectedAnswerId = question.QuestionKindId == 1 ?
                                    (from Answer a3 in question.Answers
                                     where a3.IsSelected == true
                                     select a3.Id).SingleOrDefault() :
                                    0;
        question.SelectedAnswerIds = question.QuestionKindId == 2 ?
                                     new Collection<int>((from Answer a4 in question.Answers
                                                          where a4.IsSelected == true
                                                          select a4.Id).ToList()) :
                                     new Collection<int>();
        this.Add(question);
    } 
```

# c# - 是否可以将 2 个属性绑定到单个 DataGrid 字段中？

> ID：10934497
> 
> 赞同：3
> 
> 时间：2012-06-07T15:05:03.213
> 
> 标签：c#, wpf, xaml, binding

目前我有以下内容：

```
<DataGridTextColumn Header="Customer Name" 
    x:Name="columnCustomerSurname" 
    Binding="{Binding Path=Customer.FullName}" SortMemberPath="Customer.Surname"
    IsReadOnly="True">
</DataGridTextColumn> 
```

其中`Customer.FullName`定义为：

```
public string FullName
{
    get { return string.Format("{0} {1}", this.Forename, this.Surname); }
} 
```

绑定*有效*，但并不理想。

如果有人更新`Forename`或`Surname`属性，则更新不会反映在 DataGrid 中，直到它被刷新。

我发现了与此类似的问题，例如[https://stackoverflow.com/a/5407354/181771](https://stackoverflow.com/a/5407354/181771)使用`MultiBinding`但它适用于 a`TextBlock`而不是 a `DataGrid`。

我还有其他方法可以让这个工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T18:45:37.297

一种选择是创建基于两个文本块的复合模板列，当对任一属性进行更改时，仍允许表单更新。

例如。

```
<DataGridTemplateColumn Header="Customer Name">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="{Binding Path=Customer.ForeName}"/>
                <TextBlock Text="{Binding Path=Customer.SurName}"/>
            </StackPanel>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:45:27.713

`FullName`您应该从`Forename`和发出属性更改通知`Surname`，例如

```
public string Forename
{
    get{ return _forename; }
    set
    {
        if(value != _forename)
        {
            _forename = value;
            RaisePropertyChanged("Forename");
            RaisePropertyChanged("Fullname");
        }
    }
} 
```

或者，您像这样缓存 FullName 的生成值

```
public string Forename
{
    get{ return _forename; }
    set
    {
        if(value != _forename)
        {
            _forename = value;
            RaisePropertyChanged("Forename");
            UpdateFullName();
        }
    }
}

private void UpdateFullName()
{  
    FullName = string.Format("{0} {1}", this.Forename, this.Surname); 
}

public string FullName
{
    get{ return _fullname; }
    private set
    {
        if(value != _fullname)
        {
            _fullname = value;
            RaisePropertyChanged("FullName");
        }
    }
} 
```

# .net - 指示 IEnumerable 是“慢”还是“快”的好方法是什么？

> ID：10934501
> 
> 赞同：7
> 
> 时间：2012-06-07T15:05:22.363
> 
> 标签：.net, performance, ienumerable, iqueryable

[IEnumerable 的预期性能是什么](https://stackoverflow.com/questions/10905297/what-is-the-expected-performance-of-ienumerable)？说没有办法知道迭代任意 IEnumerable 的性能。每次迭代都可以访问数据库或进行网络服务调用；或者它可能只返回数组/列表中的下一项。

鉴于此，有没有一种很好的方式来表示“这很快”？例如，有`T[]`或`List<T>`没有`IEnumerable<T>`我知道从`T[i]`到到`T[i+1]`会很快。（当然，强制枚举返回列表/数组可能会产生其他性能问题。 `List<T>`也暴露了可编辑的语义。）

相反，返回`IQueryable<T>`而不是`IEnumerable<T>`表示“这很慢”的好方法吗？或者也许`IEnumerable<Task<T>>`？

客户`C`无法知道`IEnumerable<T>`s 将具有显着不同的性能特征。

```
class C
{
   readonly T[] m_data;
   public IEnumerable<T> ThisWillIterateQuickly { get { return m_data; } }

   public IEnumeralbe<T> ThisWillIterateSlowly
   {
      get
      {
         T retval = ... an expensive database call ...;
         yield return retval;
      }
   }

   public IQueryable<T> IsThisBetterForSlow { get { return ThisWillIterateSlowly; } }
   public T[] IsThisAGoodWayForFast { get { return m_data; } }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:07:47.087

> 相反，返回 IQueryable 而不是 IEnumerable 会是表示“这很慢”的好方法吗？

不，`IQueryable<T>`固有的`IEnumerable<T>`......问题`IEnumerable<T>T`是它`IQueryable<T>`在迭代时可能会产生巨大的副作用，例如查询远程数据库或类似的东西。

好笑不是吗？

您可能应该询问`IEnumerable<T>`VS`List<T>`哪个第二个肯定有数据，并且不需要从其他地方获取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:11:22.363

如果你想保证迭代不会包含任何意外，那么我同意，公开一个`T[]`- 它的枚举器不能被覆盖，因为你不能从数组继承。迭代也是无副作用的，对于`IEnumerable<T>`.

但是，我不同意公开数组***表达***此消息，这更重要（在我看来）。某些东西的性能永远无法真正用代码来表达，除非你开始命名东西`CheapIteration`或`ExpensiveIteration`.

另一方面，使用数组，您只需将按需迭代的性能问题转移到填充数组的位置。这可以**保证**完全解决性能问题，因为它将是提供数组内容的任何内容的完整迭代。如果`IEnumerable<T>`迭代停止，性能问题也会停止——最快的代码是没有运行的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T14:47:37.590

在考虑了更多之后，问题/问题似乎真正集中在`IEnumerator.MoveNext()`. 使用*Visual Studio 2012*，我能够创建`IEnumerator`和的异步版本`IEnumerable`：

```
public interface IAsyncEnumerator<T> : IDisposable
{
    Task<T> CurrentAsync { get; }
    Task<bool> MoveNextAsync();
    Task ResetAsync();
}

public interface IAsyncEnumerable<T>
{
    IAsyncEnumerator<T> GetAsyncEnumerator();
} 
```

这种方法的一个缺点是没有很多语言支持。以上不适用于`foreach`. 但是，扩展方法可以减轻痛苦：

```
public static class EnumeratorExtensions
{
    public static void ForEach<T>(this IEnumerable<T> enumerable, Action<T> action)
    {
        using (var enumerator = enumerable.GetEnumerator())
        {
            while (enumerator.MoveNext())
                action(enumerator.Current);
        }
    }

    public static async Task ForEachAsync<T>(this IAsyncEnumerable<T> enumerable, Action<T> action)
    {
        using (var enumerator = enumerable.GetAsyncEnumerator())
        {
            while (await enumerator.MoveNextAsync())
                action(await enumerator.CurrentAsync);
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T15:59:33.573

我通常使用属性来返回“快速”枚举和方法来返回“慢”。

您的问题是尽可能多地使用异步方法和设计的论据。然后，枚举需要多长时间并不重要，因为 UI 是响应式的并且用户很高兴；-)

# bash - 跟随命令的输出变化

> ID：10934504
> 
> 赞同：0
> 
> 时间：2012-06-07T15:05:28.377
> 
> 标签：bash, shell

我正在使用状态查询命令，该命令返回我当前正在运行的批处理作业的状态。我想实时提供此命令输出中的更改，例如作业从 PEND 移动到 RUN 或完全从列表中消失，基本上类似于日志文件上的“tail -f”效果。

是否有一个简单的 *nix 实用程序，或者我必须编写一个脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:12:42.413

看看[手表](http://ss64.com/bash/watch.html)。它可以突出显示在其监视的输出的作业运行之间发生的变化。

# c++ - 在类中分配和使用公共变量

> ID：10934507
> 
> 赞同：0
> 
> 时间：2012-06-07T15:05:34.417
> 
> 标签：c++

我在 C++ .h 类文件中有一个 ABC 类。

.h 文件

```
#ifndef ABC_H_
#define ABC_H_

class ABC
{
  public:
    int x;
    int y;
};
#endif 
```

.cpp 文件

```
//----- Empty  ----------- 
```

主程序.cpp

```
#include <iostream>
#include "ABC.h"
using namespace std;
    int main() {
      ABC a1;
      a1.x=5; a1.y=2;
      cout<<a1.x;
      // ...
    } 
```

在 Eclipse 中编译时出错：

```
symbols not found for architecture x86_64

ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [CPPProgram] Error 1 
```

所有其他 hello world 程序等都可以正常编译和运行。我记得当我在使用模板时在单独的文件中进行定义和实现时遇到了这个错误（当我在同一个文件中实现定义和实现时它就消失了）

我不确定这里有什么问题。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:09:33.360

在您发布的代码中，您缺少一个分号：

```
class ABC
{
public:
int x;
int y;
};
 ^ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:14:02.623

您应该确保在文件中包含正确的头`.cpp`文件。您的包含路径中可能还有另一个`ABC.h`文件。您可能还会查看文件在文件系统上的命名是否正确（例如`abc.h`vs. `ABC.H`）。您可以测试是否包含头文件，将您的类型名称修改为唯一的名称，并查看编译行为是否发生变化。

有人向我指出，编译器应该在其头文件包含保护中使用不会与普通源文件冲突的约定。确保没有任何头文件定义使用双下划线 ( `__`) 或以下划线开头后跟大写字母的名称。

在您的评论中，您列出了有关在一行代码上停止编译的更多信息（您没有给出编译停止原因的编译错误），并且您添加了有关链接失败的信息。编译器不应该留下会导致链接器失败的部分创建的目标文件。也许链接器正在寻找一个较旧的目标文件或某种类型的源文件名冲突（例如，`test.c`并且`test.cc`都希望保留一个`test.o`通常命名的目标文件）。指示您的编译系统删除所有目标文件（无论是什么等价文件`make clean`），然后查看问题是否仍然存在。如果是这样，请检查文件名冲突。

# gstreamer - gstreamer 图像实时转视频

> ID：10934508
> 
> 赞同：0
> 
> 时间：2012-06-07T15:05:38.177
> 
> 标签：gstreamer

我正在尝试使用 gstreamer 在捕获图像时将图像实时保存为视频格式。我有保存图像的命令。这一行是：

```
gst-launch -e v4l2src device=/dev/video0 ! 'image/jpeg,width=640,height=480,framerate=30/1' ! jpegdec ! timeoverlay halign=right valign=bottom ! clockoverlay halign=left valign=bottom time-format="%Y/%m/%d %H:%M:%S" ! tee name=t ! queue ! sdlvideosink t. ! queue ! videorate ! capsfilter caps="video/x-raw-yuv,framerate=1/1" ! ffmpegcolorspace ! jpegenc ! multifilesink location="./Desktop/frames/frame%06d.jpg" 
```

此命令将图像保存到文件夹。我写了另一个命令来拍摄这些照片并将它们保存到视频中。这个命令是：

```
gst-launch -e multifilesrc location=./Desktop/frames/frame%06d.jpg ! image/jpeg,framerate=30/1 ! decodebin ! videoscale ! video/x-raw-yuv ! progressreport name=progress ! avimux ! filesink location=test.avi 
```

我需要一种组合这两个命令的方法，以便可以实时保存视频。我似乎无法弄清楚这是如何完成的。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T01:32:13.127

我从您的第一行中删除了 multifilesink 元素，并将 avimux 和 filesink 添加到您的第二行（并为该论坛更好地格式化）以生成以下内容：

```
gst-launch -e v4l2src device=/dev/video0 ! \
'image/jpeg,width=640,height=480,framerate=30/1' ! \
jpegdec ! timeoverlay halign=right valign=bottom ! \
clockoverlay halign=left valign=bottom time-format="%Y/%m/%d %H:%M:%S" ! \
tee name=t ! \
queue ! \
sdlvideosink t. ! \
queue ! \
videorate ! \
capsfilter caps="video/x-raw-yuv,framerate=1/1" ! \
ffmpegcolorspace ! \
jpegenc ! \
avimux ! \
filesink location=test.avi 
```

不确定它是否会起作用，并且它还会丢弃 progressreport 组件（不确定它是如何工作的）。如果命令行失败，请发布 gst-launch 控制台错误消息。

# tcp - TCP 握手可靠性

> ID：10934516
> 
> 赞同：5
> 
> 时间：2012-06-07T15:06:08.237
> 
> 标签：tcp

我实际上想知道，在 tcp 握手中，为什么客户端需要 ack back 才能完成握手。在 syn 和 syn-ack 之后，双方都有足够的信息来启动数据，仍然 tcp 要求客户端的 ack 移动到建立状态。

问题是，为什么这种三向握手是实现可靠性的充分必要条件，即使我们有序列号同步后第二条消息本身也是如此。

有什么见解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:09:18.190

服务器如何知道客户端收到了 SYN-ACK？服务器无法知道这一点，除非客户端显式发送 ACK 以确认它得到了 syn-ack。

如果这第三个 ACK​​ 被丢弃，服务器将重新发送一个 SYN-ACK，当客户端收到那个重复的 SYN-ACK 时，它会说“哦，嘿，我之前的 ACK 肯定已经被丢弃了，所以我将重新发送确认”。这将一直持续到服务器获得 AKC。

# python - Python：将返回语句中的元组转换为字符串

> ID：10934519
> 
> 赞同：2
> 
> 时间：2012-06-07T15:06:23.823
> 
> 标签：python, return, tuples

我一直在研究 HTTLCS，但在解决问题时遇到了一些困难。

解决问题并不是什么大问题，但是我无法将结果作为字符串而不是元组数据类型返回。

这是我的代码：

```
def wordCount(paragraph):
    splited = paragraph.split()
    wordnum = len(splited)
    eWord = []
    for aWord in splited:
        if "e" in aWord:
            eWord.append(aWord)
    eWordnum = len(eWord)
    percent = round(eWordnum / wordnum * 100,2)
    return "Your text contains", wordnum, "words, of which" , eWordnum , "(" , percent , "%)" , "contains an 'e'." 

print(wordCount(p)) 
```

Python 输出`('Your text contains', 108, 'words, of which', 50, '(', 46.3, '%)', "contains an 'e'.")`的是一个元组，而不是一个字符串。

我知道我可以将 print 放在函数的末尾并在没有 print() 语句的情况下调用函数，但是如何使用 return 语句解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T15:10:51.623

这是因为您在 return 语句中使用了逗号，Python 将其解释为元组。尝试`format()`改用：

```
def wordCount(paragraph):
    splited = paragraph.split()
    wordnum = len(splited)
    eWord = []
    for aWord in splited:
        if "e" in aWord:
            eWord.append(aWord)
    eWordnum = len(eWord)
    percent = round(eWordnum / wordnum * 100,2)
    return "Your text contains {0} words, of which {1} ({2}%) contains an 'e'".format(wordnum, eWordnum, percent) 
```

* * *

```
>>> wordCount("doodle bugs")

"Your text contains 2 words, of which 1 (0.0%) contains an 'e'" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:09:35.033

```
return "Your text contains %s words, of which %s (%s%%) contains an 'e'." % (wordnum, eWordnum, percent) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:10:09.793

```
return "Your text contains " + str(wordnum) + 
       " words, of which " + str(eWordnum) + 
       " (" + str(percent) +  "%)" + " contains an 'e'." 
```

或者

```
return "Your text contains %s words, of which %s (%s%%) contains an 'e'." 
        % (wordnum, eWordnum, percent) 
```

在第一种情况下，您进行*字符串连接*`wordnum`，并且必须将`eWordnum`和其他数字变量转换为`str`（通过执行`str(variableName)`）以允许连接（并且没有运行时错误）

在第二种情况下，您进行*字符串替换*，这意味着您给出某种“占位符” `%s`（即字符串），然后用`%`符号后面的元组参数替换它们

如果您返回单独的东西，`,`您将返回一个元组（如您所见）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T15:12:12.277

```
return "Your text contains {0} words, of which {1} ({2}%) contains an 'e'.".format(wordnum,eWordnum,percent) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T15:11:44.703

for 循环可能会起作用，但您必须格式化字符串以向它们添加空格。

```
for item in tuplename: print item, 
```

确保在项目后保留逗号，因为这会将其打印在同一行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T15:12:18.910

```
def wordCount(paragraph):
    splited = paragraph.split()
    wordnum = len(splited)
    eWord = []
    for aWord in splited:
        if "e" in aWord:
            eWord.append(aWord)
    eWordnum = len(eWord)
    percent = round(eWordnum / wordnum * 100,2)
    dummy =  "Your text contains {0} words, of which {1} {2} contains an 'e'.".format(wordnum,eWordnum, percent) 
    return dummy

print(wordCount(p)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-07T15:12:21.000

试试这个 ：

```
return "Your text contains %(wordnum)s words, of which %(ewordnum)s (%(percent)s %%), contains an 'e'."%locals() 
```

使用`%(variable_name)s`as[字符串格式](http://docs.python.org/library/stdtypes.html#string-formatting-operations)通常更容易维护。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-07T15:13:28.303

这个怎么样

```
return "Your text contains " + wordnum + " words, of which " + eWordnum + " (" + percent + "%) " + " contains an 'e'." 
```

用“+”替换逗号，这应该可以。

# html - 如何为元素设置动画而不丢失边框半径？

> ID：10934520
> 
> 赞同：2
> 
> 时间：2012-06-07T15:06:49.190
> 
> 标签：html, css, animation, webkit, keyframe

我在中心图像上有一个小动画，它放大一点，然后恢复到原来的大小。

[代码在这里！](http://jsfiddle.net/wije/jWLtT/)

麻烦的是，动画“覆盖”了父元素上的边框半径，即使它上面隐藏了溢出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:26:18.547

这是 Webkit 中的一个错误。`overflow: hidden`不会在角落隐藏转换元素的溢出。有关更多信息，请查看[https://bugs.webkit.org/show_bug.cgi?id=67950](https://bugs.webkit.org/show_bug.cgi?id=67950)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:25:33.637

问题是`background-color`您的`.image`班级扩展到`#promo`并按班级覆盖了`border-radius`集合`pane`。

你必须设置：

```
background-color: transparent; //in image class, 
```

和，

```
background-color: #91bd09; 
```

在你的`pane`课上。

看到这个[更新的小提琴](http://jsfiddle.net/jWLtT/2/)。

# wpf - DataGridTemplateColumn 中的用户控件

> ID：10934522
> 
> 赞同：2
> 
> 时间：2012-06-07T15:06:55.770
> 
> 标签：wpf, xaml, datagridtemplatecolumn

我有一个数据网格，我在其中将所有内容旋转 90 度以垂直显示我的信息。并不是说这与我不认为的任何事情有关。我正在尝试将一个基本上是扩展器的 UserControl 添加到 DataGridTemplateColumn 中。我遇到的问题是，当我打开扩展器（用户控件）时，它在其下方的单元格后面打开。我需要把它带到前面基本上重叠它。我将它放在画布中，这样用户控件就不会在单元格内打开并展开。我希望单元格保持相同的大小，并且在打开扩展器时，它将重叠并显示覆盖其下方的数据单元格。任何想法我做错了什么？

```
 <DataGridTemplateColumn Header="Expander" CanUserResize="False" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate DataType="UserControl">
                                <Grid Width="Auto" Height="Auto" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" SnapsToDevicePixels="True" OverridesDefaultStyle="True">
                                    <Canvas>
                                        <local:DescriptionUserControl DataContext="{Binding Path=DescriptionViewModel}" x:Name="Description" Height="Auto" Width="Auto" Focusable="True" Margin="0,-2">
                                        </local:DescriptionUserControl>
                                    </Canvas>
                                </Grid>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTemplateColumn Header="Worksheet" Width="Auto">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="View Worksheet" HorizontalAlignment="Center" VerticalAlignment="Center" Height="26" Width="110" ></Button>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                 <DataGridTextColumn Header="Veeps" width="Auto"></DataGridTextColumn>
                </DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:01:19.643

这`Canvas`是一个问题。它从不试图扩大它的父母，这就是细胞不扩大的原因。

但是，它仍然是可视化树的一部分，并且还有其他具有更高`ZIndex`. 您可以尝试`ZIndex`在扩展器扩展时进行修复，但我相信这将花费太多的工作并且会有难以找到和修复的错误。

我会走“自定义控制”路线。构建一个继承自`HeaderdContentControl`并具有一个附加属性的控件：`IsPopupShowing`. 内容将在弹出窗口中，并且位于可视树之外。

实际上，它可以仅通过模板来实现（尽管我仍然推荐自定义控件）。像这样的东西：

```
<Style x:Key="PoppingExpander" TargetType="{x:Type HeaderedContentControl}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type HeaderedContentControl}">
                <Grid>
                    <ToggleButton x:Name="HeaderHolder"
                                  Content="{TemplateBinding Header}"
                                  ContentTemplate="{TemplateBinding HeaderTemplate}"
                                  ContentTemplateSelector="{TemplateBinding HeaderTemplateSelector}"
                                  ContentStringFormat="{TemplateBinding HeaderStringFormat}"/>
                    <Popup x:Name="ContentHolder"
                           Placement="Bottom">
                        <Border Background="Aqua"
                                BorderBrush="LightBlue"
                                BorderThickness="1">
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              Margin="{TemplateBiding Padding}" />
                        </Border>
                    </Popup>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger SourceName="HeaderHolder" Property="IsChecked" Value="True">
                        <Setter TargetName="ContentHolder" Property="IsOpen" Value="True"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

[我可以`IsOpen`将弹出窗口的`IsChecked`属性绑定到切换按钮的属性，但我真的不喜欢使用`ElementName`语法，因为它对它的范围非常特别，并且会产生很难找到的错误。我更喜欢**任何**其他方式`ElementName`除了]

这将为您提供一个`HeaderedContentControl`在弹出窗口中包含其内容的内容。您需要将切换按钮的样式设置为类似于扩展器中使用的样式（您可以通过混合提取扩展器的样式，它将具有按钮的样式）。

更改对`Expander`to的使用`HeaderedContentControl`，删除特定于的属性设置器`Expander`（例如`IsExpanded` ) 的属性设置器，您应该完成。

PS -`Placement`如果您希望它以另一个方向打开，您可以更改弹出窗口的属性。

# c# - C#/WPF 使用 async 和 await 但 UI 线程仍然被阻塞

> ID：10934523
> 
> 赞同：2
> 
> 时间：2012-06-07T15:06:56.060
> 
> 标签：c#, user-interface, asynchronous, async-await

我有这个简单的代码：

```
private async void Button_Click_2(object sender, RoutedEventArgs e)
{
    var progress = new Progress<int>();

    progress.ProgressChanged += (a, b) =>
    {
        this.progressBar.Value = b;
    };

    // this is blocking
    await this.LongRunOpAsync(filepath, progress);

    // this is not blocking
    // await this.LongRunOpAsync(filepath, null);
}

public Task LongRunOpAsync(string filename, IProgress<int> progress)
{
    return Task.Run(() =>
    {
        using (var ops = new LongOps())
        {
            ops.LongRunOp(filename, progress);
        }
    });
} 
```

一旦我点击我的按钮，UI 仍然会被长时间运行的操作所阻止。如果我不使用 Progress 而是将长时间运行的操作设为**null**作为第二个参数，则 UI 不会阻塞。我很确定这个“错误”是由于我对 async/await 和线程的一些误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:11:17.930

您显示的代码不会阻塞 UI 线程。
事实上，如图所示，它不需要 async/await - 所以我假设这不是实际代码。

您需要查看`ops.LongRunOp`该功能的`progress`作用。

我怀疑它会编组`progress`回 UI 线程——因此它可以访问 UI 控件。
如果它过于频繁和过快地执行此操作，它将淹没 UI 线程并使应用程序无响应。

# android - 无法使用新的 Drive API 检索 Google Drive 文件和文件夹

> ID：10934525
> 
> 赞同：3
> 
> 时间：2012-06-07T15:07:00.387
> 
> 标签：android, google-api-java-client, google-drive-api

我正在尝试从我的 Android 应用程序中从 Google Drive 中获取文件夹中的文件列表，但到目前为止还没有成功。我正在使用 google-api-drive-v1-rev4-java-1.6.0-beta 和 google-api-client-1.9.0。我还从[http://code.google.com/p/google-api-java-client/wiki/Android](http://code.google.com/p/google-api-java-client/wiki/Android)的示例中构建了类似于 calendar-android-sample 和 tasks-android-sample 的代码。

我似乎找不到如何使用 files() 来获取文件夹列表，甚至找不到我想要的文件夹的 ID。tasks-android-sample 在 get() 方法中使用 '@default' 来获取任务列表。我将在 get 方法中使用什么来首先获取文件夹列表，搜索我的文件夹，获取 id，然后获取该文件夹中的文件列表？

AsyncLoadDocs.java：（注意：我使用 getFields() 只是为了查看 Get 对象是否包含任何元数据，而此时没有。）

```
package com.mysite.myapp.docs;

import com.google.api.services.drive.Drive;
import com.google.api.services.drive.Drive.Files;
import com.google.api.services.drive.Drive.Files.Get;
import com.google.api.services.drive.model.File;

import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.ArrayAdapter;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

/**
 * Asynchronously load the docs with a progress dialog.
 *
 * @author ms
 */
class AsyncLoadDocs extends AsyncTask<Void, Void, List<String>> {

private static final String TAG = "AsyncLoadDocs";
private final GDocsSync gDocsSync;
private final ProgressDialog dialog;
private final Drive entry = null;
private com.google.api.services.drive.Drive service;

  AsyncLoadDocs(GDocsSync gDocsSync) {
    this.gDocsSync = gDocsSync;
    service = gDocsSync.driveClient;
    dialog = new ProgressDialog(gDocsSync);
  }

  @Override
  protected void onPreExecute() {
    dialog.setMessage("Loading docs...");
    dialog.show();
  }

  @Override
  protected List<String> doInBackground(Void... arg0) {
    try {
      List<String> folderNames = new ArrayList<String>();

      Get get = service.files().get("@default").setProjection("FULL");
      String fields = get.getFields();
      Log.d(TAG, "Fields: " + fields);

      return folderNames;
    } catch (IOException e) {
        gDocsSync.handleGoogleException(e);
      return Collections.singletonList(e.getMessage());
    } finally {
        gDocsSync.onRequestCompleted();
    }
  }

  @Override
  protected void onPostExecute(List<String> result) {
    dialog.dismiss();
  }
} 
```

任何帮助，将不胜感激。日历和任务示例都使用我的 API 密钥从 Google 成功检索数据，为什么这个 Drive 代码没有？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-12T01:46:31.367

Drive API 仅授予对两类文件的访问权限：

*   用户使用给定云端硬盘应用创建的文件
*   用户使用给定云端硬盘应用打开的文件

出于安全原因，无法列出用户云端硬盘帐户中的所有文件：

[https://developers.google.com/drive/apps_overview#granting_file-level_access](https://developers.google.com/drive/apps_overview#granting_file-level_access)

有关 Android 环境中的更多选项，请查看以下其他答案：

*   [适用于 Google Drive 的 Android API？](https://stackoverflow.com/questions/10306456/android-api-for-google-drive)
*   [适用于 Android 的 Google Drive\Docs API](https://stackoverflow.com/questions/10330053/google-drive-docs-api-for-android)

# iphone - 带有自定义后退按钮的 UINavigationController 子类

> ID：10934526
> 
> 赞同：1
> 
> 时间：2012-06-07T15:07:02.267
> 
> 标签：iphone, objective-c, ios, uinavigationcontroller, uinavigationbar

我知道我可以从视图控制器本身设置自定义后退按钮，例如：

```
- (void)setBackButton
{
    UINavigationBar* navBar = self.navigationController.navigationBar;
    UIButton* backButton = [navBar backButtonWith:[UIImage imageNamed:@"navigationBarBackButton.png"] 
                                        highlight:nil 
                                     leftCapWidth:14.0];

    [backButton addTarget:self action:@selector(backButtonTapped:) forControlEvents:UIControlEventTouchUpInside];

    self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc] initWithCustomView:backButton] autorelease];
}

- (void)backButtonTapped:(id)sender
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

问题是我需要为我所有的视图控制器做这件事......
一种解决方案是把这段代码放在一些 BasicViewController 中，我所有的视图控制器都会继承它。

**但我的问题是我可以继承 UINavigationCotroller 本身并将它的导航栏左按钮设置为这个自定义按钮吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:10:51.873

正确的方法是使用[`UIAppearance`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIAppearance_Protocol/Reference/Reference.html)

它提供了`UIBarButtonItem`诸如

`- (void)setBackButtonBackgroundImage:(UIImage *)backgroundImage forState:(UIControlState)state barMetrics:(UIBarMetrics)barMetrics`

和

`- (void)setBackButtonBackgroundVerticalPositionAdjustment:(CGFloat)adjustment forBarMetrics:(UIBarMetrics)barMetrics`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:09:44.487

不，最好有一个自定义 UIViewController 来处理这种行为。

# ruby-on-rails-3 - 禁用提交按钮 file_field

> ID：10934531
> 
> 赞同：1
> 
> 时间：2012-06-07T15:07:23.973
> 
> 标签：ruby-on-rails-3, controller, simple-form, filefield

我有一个 file_field 选项，可以在其中导航到 csv 文件以上传一系列用户。我目前能够在不添加文件的情​​况下单击上传用户按钮。我想确保我捕捉到这个 nil 异常，但似乎无法弄清楚如何去做。我应该更改我的控制器还是通过以某种方式禁用按钮来更改表单

我有以下用于上传文件的简单表单：

```
<%= simple_form_for :tenant, :html => {:multipart => true}, :url => users_path do |f| %>
  <%= f.file_field :csv, :label => 'CSV File' %>
  <%= f.submit 'Upload Users' %>
<% end %> 
```

我在控制器中有以下视图：

```
def upload
  if request.post?
    if params[:tenant][:csv].blank?
      flash[:notice] = "Please provide a csv file to upload."
    else
      file = params[:tenant][:csv].read   
      CSV.parse(file, headers: true, header_converters: :symbol).each { |row| User.create(row.to_hash) }
    end 

    respond_to do |format|
      format.html { redirect_to users_path }
      format.json { head :no_content }
    end    
  else
    # Return view
  end   
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:16:30.187

您可以进行客户端验证或服务器端。我建议将服务器端作为起点。根据我在您的控制器中看到的内容，您似乎没有用于 csv 上传的模型。最好将控制器 csv 代码重构为模型，因为逻辑不属于控制器。一旦你有了 csv 上传的模型，

> validates_presence_of :文件

在模型中应该可以解决问题。

如果您不熟悉无表模型，请查看 railscast #219。

# vba - 添加与会者后如何在 AppointmentItem 中添加附件？

> ID：10934534
> 
> 赞同：0
> 
> 时间：2012-06-07T15:07:39.283
> 
> 标签：vba, outlook, email-attachments, outlook-2003

因此，我正在编写一些代码，该代码需要预约并从预约中创建一些任务，并在发送之前检查是否有附件。

当我没有其他与会者时，代码可以正常工作。但是，一旦添加了与会者，代码就会在打开文件附件对话框时卡住。呜呜！！

我附上了下面的代码：

```
Public WithEvents myItem As Outlook.appointmentitem

Private Sub myItem_Write(Cancel As Boolean)
    Dim myResult As Integer
    Dim olApp As Outlook.Application
    Dim olTsk As TaskItem
    Dim olAppt As appointmentitem
    Dim TskSubj As String
    Dim ApptSubj As String
    Dim olNS As Outlook.NameSpace
    Dim myolApp As Outlook.Application

    Set olApp = New Outlook.Application
    Set olTsk = olApp.CreateItem(olTaskItem)

    With olTsk
        olTsk.DueDate = myItem.Start - 1
        olTsk.Subject = myItem.Subject
        olTsk.Subject = replace(olTsk.Subject, "BC Test/Review", "Send BCP Docs")
        olTsk.Body = "Attending: " & myItem.RequiredAttendees
        olTsk.ReminderSet = True
        olTsk.ReminderTime = olTsk.DueDate & " " & Format("10:00 AM")

        End With

        olTsk.Save

    Set olTsk = Nothing
    Set olApp = Nothing

    Set olApp = New Outlook.Application
    Set olTsk = olApp.CreateItem(olTaskItem)

        With olTsk
        olTsk.DueDate = myItem.Start + 30
        olTsk.Subject = myItem.Subject
        olTsk.Body = "Attending: " & myItem.RequiredAttendees
        olTsk.ReminderSet = True
        olTsk.ReminderTime = olTsk.DueDate & " " & Format("10:00 AM")

                olTsk.Subject = replace(olTsk.Subject, "BC Test/Review", "BCP Updates due")

        End With

        olTsk.Save

    Set olTsk = Nothing
    Set olApp = Nothing

    Set olApp = New Outlook.Application
    Set olTsk = olApp.CreateItem(olTaskItem)

        With olTsk
        olTsk.DueDate = myItem.Start + 20
        olTsk.Subject = myItem.Subject
        olTsk.Body = "Attending: " & myItem.RequiredAttendees
        olTsk.ReminderSet = True
        olTsk.ReminderTime = olTsk.DueDate & " " & Format("10:00 AM")

                olTsk.Subject = replace(olTsk.Subject, "BC Test/Review", "BIA Team Leader Signature")

        End With

        olTsk.Save

    Set olTsk = Nothing
    Set olApp = Nothing

    Set olApp = New Outlook.Application
    Set olTsk = olApp.CreateItem(olTaskItem)

        With olTsk
        olTsk.DueDate = myItem.Start + 30
        olTsk.Subject = myItem.Subject
        olTsk.Body = "Attending: " & myItem.RequiredAttendees
        olTsk.ReminderSet = True
        olTsk.ReminderTime = olTsk.DueDate & " " & Format("10:00 AM")

                olTsk.Subject = replace(olTsk.Subject, "BC Test/Review", "BIA Executive Approver Signature")

        End With

        olTsk.Save

    Set olTsk = Nothing
    Set olApp = Nothing

    Set olApp = New Outlook.Application
    Set olTsk = olApp.CreateItem(olTaskItem)

        With olTsk
        olTsk.DueDate = myItem.Start + 1
        olTsk.Subject = myItem.Subject
        olTsk.Body = "Attending: " & myItem.RequiredAttendees
        olTsk.ReminderSet = True
        olTsk.ReminderTime = olTsk.DueDate & " " & Format("10:00 AM")

                olTsk.Subject = replace(olTsk.Subject, "BC Test/Review", "Send BIA Link")

        End With

        olTsk.Save

    Set olTsk = Nothing
    Set olApp = Nothing

        Set olApp = New Outlook.Application
    Set olTsk = olApp.CreateItem(olTaskItem)

        With olTsk
        olTsk.DueDate = myItem.Start + 30
        olTsk.Subject = myItem.Subject
        olTsk.Body = "Attending: " & myItem.RequiredAttendees
        olTsk.ReminderSet = True
        olTsk.ReminderTime = olTsk.DueDate & " " & Format("10:00 AM")

                olTsk.Subject = replace(olTsk.Subject, "BC Test/Review", "LDRPS")

        End With

        olTsk.Save

    Set olTsk = Nothing
    Set olApp = Nothing

            MSG1 = MsgBox("Are BCP and BIA attached?", vbYesNo, "Yadda?")

            If MSG1 = vbYes Then
                myItem.Send
            Else
                MsgBox "Dude!  What are you thinking??"

                Dim myInspector As Outlook.Inspector
                Set myolApp = CreateObject("Outlook.Application")
                Set myInspector = myItem.GetInspector
                Application.ActiveInspector.CommandBars.findcontrol(ID:=1079).Execute

                Exit Sub
                End If

End Sub 
```

代码坚持：

```
Application.ActiveInspector.CommandBars.findcontrol(ID:=1079).Execute 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:10:56.267

**更新/编辑：**

由于在 AppointmentItem 表单的“Scheduling”页面上“Insert File”按钮是灰色的，因此在运行代码之前切换到“Appointment”页面。

作为替代方案，您可以通过编程方式切换到“约会”页面。使用我原始答案中的代码（见下文），在尝试单击“插入文件”按钮之前调用[SetCurrentFormPage 方法：](http://msdn.microsoft.com/en-us/library/aa210290%28v=office.11%29.aspx)

`apptInspector.SetCurrentFormPage("Appointment")`

**原答案：**

这是相关的代码块：

```
MsgBox "Dude!  What are you thinking??"                  
Dim myInspector As Outlook.Inspector                 
Set myolApp = CreateObject("Outlook.Application")                 
Set myInspector = myItem.GetInspector               
Application.ActiveInspector.CommandBars.FindControl(ID:=1079).Execute 
```

您创建一个 Inspector 对象并将 AppointmentItem 检查器分配给它，而不是使用该对象的 CommandBars。[FindControl](http://msdn.microsoft.com/en-us/library/aa171234%28v=office.11%29.aspx)方法，你使用一个 from`ActiveInspector`代替。

由于您对正在创建的约会的检查员有参考，请尝试更改

`Application.ActiveInspector.CommandBars.FindControl(ID:=1079).Execute`

至

`myInspector.CommandBars.FindControl(ID:=1079).Execute`

看看这是否有效。

# php - PHP 在一个复选框内发布多个数据

> ID：10934535
> 
> 赞同：1
> 
> 时间：2012-06-07T15:07:46.720
> 
> 标签：php, checkbox

我有以下部分代码： `<input id="add" class="add" data-amount="150" data-monthly="25" type="checkbox" name="accessory[]" value="Accessory Name"/>` 想知道是否有任何方法可以将“值”、“数据量”和“每月数据”中的所有数据一起发布到另一个脚本？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:13:58.067

如果您将这些属性的值写入页面服务器端，则最好使用键并根据键再次检索服务器端的值。HTML 可能会被更改，从而导致发回不可信的数据。

例如...

```
<input id="add" class="add" data-amount="150" data-monthly="25" type="checkbox" name="accessory[]" value="1"/> 
```

`1`包含金额和月度数据的数据的id在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:09:22.823

数据属性不与表单数据一起提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:10:02.847

不，没有，但是您可以将所需的所有属性放在随表单传递的隐藏字段中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:21:02.353

要在复选框中获取所有这些值，您可以将它们连接在一起，用一些分隔符分隔，然后在处理表单时拆分值。

```
<input type="checkbox" name="accessory[]" value="Accessory Name*150*25"/> 
```

这不是一个优雅的解决方案。它可以满足您的要求，但您应该强烈认为 Sohnee 的回答是做您想做的事情的更好方法。

# spring-mvc - Spring中是否有等效的Struts令牌验证

> ID：10934542
> 
> 赞同：0
> 
> 时间：2012-06-07T15:07:53.240
> 
> 标签：spring-mvc, struts2

我在春季看到重复的表单提交问题。想要实现 Struts 中已有的东西，令牌验证器来检查重复请求。

目前在我的表单中，当用户提交表单时，它不是提交和重定向页面，而是进行 2 个 JSON 调用以进行验证，然后提交表单，从而创建重复表单提交的范围。

我想使用令牌来验证每个请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:12:07.757

我认为不是直接的，而是：

*   [http://explodingjava.blogspot.com/2009/03/spring-mvc-synchronizer-token.html](http://explodingjava.blogspot.com/2009/03/spring-mvc-synchronizer-token.html)

IMO post-redirect-get 或简单的 JS 禁用提交可能就足够了，除非您明确尝试处理后退按钮问题并且您的表单页面被缓存。

# c# - 使用 C# 将日期 ( DatePicker ) 插入 SQL

> ID：10934543
> 
> 赞同：-2
> 
> 时间：2012-06-07T15:08:01.530
> 
> 标签：c#

//你好！每当我尝试使用 DatePicker 插入日期时，我都会遇到问题

```
 DateTime birth_date=Convert.ToDateTime(datePickerEBirthDate.SelectedDate);
            SqlConnection SQLconnection = new SqlConnection(@"Server=MyMachineName\SQLEXPRESS;Database=MyDataBase;Integrated Security=SSPI");
            SqlCommand command = SQLconnection.CreateCommand();
            SQLconnection.Open();
            command.CommandText = "INSERT INTO courses " +
            "(name, birthdate) VALUES " +
            "(@name, @birthdate)";
            command.Parameters.AddWithValue("@name", txtName.Text);
            command.Parameters.AddWithValue("@birthdate", birth_date);
            command.ExecuteNonQuery();
        SQLconnection.Close(); 
```

//这是错误信息 ![在此处输入图像描述](../Images/06bb7f01bf863f28f49b4c54c1a6c19e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:13:00.173

就像您获取 TextBox.Text 属性 ( `txtName.Text`) 一样，您应该获取[DatePicker.SelectedDate](http://msdn.microsoft.com/en-us/library/system.windows.controls.datepicker.selecteddate.aspx)属性 ( `dpSBirthDate.SelectedDate`)。`DataContext`相反，您出于某种原因尝试转换？此外，您可以摆脱 Convert.ToDateTime(...) 调用，因为`dpSBirthDate.SelectedDate`它将返回一个 DateTime 对象。

* * *

更新（这是一个完全固定的代码部分）：

```
var name = txtName.Text;
var birthdate = dpSBirthDate.SelectedDate;

using (var connection = new SqlConnection(@"Server=MyMachineName\SQLEXPRESS;Database=MyDataBase;Integrated Security=SSPI")
using (var command = connection.CreateCommand())
{
    command.CommandText = "INSERT INTO courses " +
                          "(name, birthdate) VALUES " +
                          "(@name, @birthdate)";

    if (name == null)
        throw new Exception("Name cannot be null.");
    if (!birthdate.HasValue)
        throw new Exception("Birthdate must contain a value.");

    command.Parameters.AddWithValue("@name", name);
    command.Parameters.AddWithValue("@birthdate", birthdate.Value);
    connection.Open();
    command.ExecuteNonQuery();
} 
```

现在，如果此代码失败，它会告诉您原因……您的姓名或出生日期均无效。如果生日仍然无效，那么您必须在执行此代码之前检查 dpSBirthDate (the `DatePicker`) 是否设置为正确的 DateTime。希望有帮助。

另请注意，我通过添加 using 语句、异常处理和尽可能晚地打开连接来清理代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:42:12.827

You should use datePickerEBirthDate.Value which will give you the datetime type so no need to convert to DateTime but you will end up with the time on that and might not want to search by this but that is your preference.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:19:37.773

.NET 中的 DateTime 可以存储从 0001 年 1 月 1 日到 9999 年 12 月 31 日的日期。在 SQL 1753 年 1 月 1 日 - 9999 年 12 月 31 日。因此，0001 年 1 月 1 日到 1753 年 1 月 1 日之间的日期不能保存到数据库中。所以，检查解析的birth_date。可能你必须用正确的文化解析日期吗？

# jquery - 如何确保在单击链接时仅在 jQuery UI 选项卡上打开

> ID：10934548
> 
> 赞同：0
> 
> 时间：2012-06-07T15:08:10.527
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我有一堆按钮可以创建一个新的 jQuery UI 选项卡。我想要发生的是当单击一个时，一次只打开一个选项卡。因此，当单击另一个按钮时，该选项卡将替换为新选项卡，并且另一个选项卡关闭。实现这一目标的最佳方法是什么。我的代码如下：

这是我的html：

```
<div id="tabs">
            <ul>
                <li>
                    <a href="#tabs-1">My Messages</a>
                </li>
                <li>
                    <a href="#tabs-2">My Plan Messages</a>
                </li>
                <li>
                    <a id="overdueInquiriETab" href="#tabs-3">Overdue Messages</a>
                </li>
                <li>
                    <a href="#tabs-4">Advance Search Results</a>
                </li>
            </ul>
            <div id="tabs-1">
                <table id="myMessages">
                </table>
                <div id="myMessagesPager">
                </div>
            </div>
            <div id="tabs-2">                                            
                        <table id="allMessages">
                        </table>
                        <div id="allMessagesPager"></div>
            </div>
            <div id="tabs-3">
                <table id="overdueTable">
                </table>
                <div id="overduePager">
                </div>
            </div>
            <div id="tabs-4">
                <table id="advanceSearchTable">
                </table>
                <div id="advanceSearchPager">
                </div>
            </div>
        </div> 
```

这是我的 javascript

```
$('#quickInquirySearch').click(function (e) {
    e.preventDefault();
    //$('#tabs li:eq(2)').show();
    $("#tabs").tabs('add', 'content/2223346read.html', 'Message ID:2223346 ');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#modalAdvanceInquirySearch').click(function (e) {
    e.preventDefault();
    $('#tabs li:eq(3)').show();
    $('#tabs').tabs('select', 3);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
    $("#searchPanel2").dialog("destroy");
});
$('#MMA1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223345.html', 'Message ID:2223345 ');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#MMA3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#MMA5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223343.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#MMA7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#MMA9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inTaA1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inTaA3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});

$('#inTaA5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inTaA7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inTaA9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inProA1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inProA3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inProA5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inProA7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#inProA9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#clTa1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#clTa3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#clTa5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#clTa7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#clTa9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#AM1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#AM3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223345read.html', 'Message ID:2223345');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#AM5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#AM7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#AM9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#oveTa1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#oveTa3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
}); 
$('#oveTa5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
}); 
$('#oveTa7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
}); 
$('#oveTa9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#advSe1').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#advSe3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#advSe5').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#advSe7').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
});
$('#advSe9').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('li:eq(0) a:eq(1)').remove();
    $('li:eq(1) a:eq(1)').remove();
    $('li:eq(2) a:eq(1)').remove();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T17:16:07.397

这是我为替换现有选项卡所做的操作，我用一个动态创建的新选项卡动态创建了我正在动态创建的代码如下：

```
$('#advanceSearchView1').click(function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223346.html', 'Message ID:2223346 ');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#quickInquirySearch').click(function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223346read.html', 'Message ID:2223346 ');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#modalAdvanceInquirySearch').click(function (e) {
    e.preventDefault();
    $('#tabs li:eq(3)').show();
    $('#tabs').tabs('select', 3);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $("#searchPanel2").dialog("destroy");
    $('#tabs li:eq(3) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#MMA1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223345.html', 'Message ID:2223345 ');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#MMA3').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223344.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#MMA5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223343.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#MMA7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#MMA9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inTaA1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inTaA3').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});

$('#inTaA5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inTaA7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inTaA9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inProA1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inProA3').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inProA5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inProA7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#inProA9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#clTa1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#clTa3').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#clTa5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#clTa7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#clTa9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#AM1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#AM3').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223345read.html', 'Message ID:2223345');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#AM5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#AM7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#AM9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#oveTa1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#oveTa3').live('click', function (e) {
    e.preventDefault();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#oveTa5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#oveTa7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#oveTa9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#advSe1').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223347read.html', 'Message ID:2223347');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#advSe3').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223344read.html', 'Message ID:2223344');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#advSe5').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223343read.html', 'Message ID:2223343');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#advSe7').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223342read.html', 'Message ID:2223342');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
});
$('#advSe9').live('click', function (e) {
    e.preventDefault();
    $('#tabs ul li:eq(4)').remove();
    $("#tabs").tabs('add', 'content/2223341read.html', 'Message ID:2223341');
    $('#tabs').tabs('select', 4);
    $('#tabs ul li:eq(0) a:eq(1)').remove();
    $('#tabs ul li:eq(1) a:eq(1)').remove();
    $('#tabs ul li:eq(2) a:eq(1)').remove();
    $('#tabs ul li:eq(4) a:eq(1)').click(function (e) {
        e.preventDefault();
        $('#tabs').tabs('select', 0);
        $('#tabs ul li:eq(0) a:eq(1)').remove();
        $('#tabs ul li:eq(1) a:eq(1)').remove();
        $('#tabs ul li:eq(2) a:eq(1)').remove();
    });
}); 
```

如果有人知道更好的方法来写这个，请填写免费让我知道。

# android - Android布局：水平LinearLayout中的左侧项目强制右对齐文本混乱

> ID：10934550
> 
> 赞同：2
> 
> 时间：2012-06-07T15:08:14.850
> 
> 标签：android, android-layout

![哇哇哇？](../Images/bf0427c0c1deac565a7f4489153e563f.png)

这就是我所拥有的。我需要分组数据中的那些粗体标题来换行，而不是右侧的数据。这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="?android:attr/expandableListPreferredItemPaddingLeft"
    android:paddingRight="5dip"
    android:paddingBottom="5dip"
    android:paddingTop="5dip">
    <TextView
        android:id="@+id/igi_product"
        android:textStyle="bold"
        android:textSize="18sp"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>
    <TableLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="0">
        <TableRow>
            <TextView
                android:id="@+id/igi_units"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
            <TextView
                android:id="@+id/igi_uom"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/igi_total"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/igi_price"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

编辑：

我尝试用 RelativeLayout 替换 LinearLayout，结果如下：

![哇哇哇？](../Images/d45d701327efa5882cb4cda90b864578.png)

代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="?android:attr/expandableListPreferredItemPaddingLeft"
    android:paddingRight="5dip"
    android:paddingBottom="5dip"
    android:paddingTop="5dip">
    <TextView
        android:id="@+id/igi_product"
        android:textStyle="bold"
        android:textSize="18sp"
        android:layout_alignParentLeft="true"
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"/>
    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true">
        <TableRow>
            <TextView
                android:id="@+id/igi_units"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
            <TextView
                android:id="@+id/igi_uom"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/igi_total"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <TextView
                android:id="@+id/igi_price"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
    </TableLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:12:37.900

出于这样的目的，我强烈推荐`RelativeLayout`。
因为我也遇到了很多（最微小的）问题`LinearLayout`，所以
`RelativeLayout`对我来说效果很好。

好的资源：[http ://www.mkyong.com/android/android-relativelayout-example/](http://www.mkyong.com/android/android-relativelayout-example/)

否则：尝试`android:layout_width="fill_parent"`在混乱的文本视图中使用，或者给它一个权重属性（`android:layout_weight="1"`）或者尝试使用`android:minWidth="50dp"`...

也许其中之一可能对您有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T19:19:16.030

这是最终的布局代码和图像。神奇之处在于设置`layout_weight="1"`和TextView `layout_width="0dp"`。`igi_product`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingLeft="?android:attr/expandableListPreferredItemPaddingLeft"
    android:paddingRight="5dip"
    android:paddingBottom="5dip"
    android:paddingTop="5dip">
    <TextView
        android:id="@+id/igi_product"
        android:textStyle="bold"
        android:textSize="18sp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:layout_width="0dp"/>
    <TableLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right">
        <TableRow>
            <!--<TextView
                android:text="Units:"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>-->
            <TextView
                android:id="@+id/igi_units"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
            <TextView
                android:id="@+id/igi_uom"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <!--<TextView
                android:text="Total:"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>-->
            <TextView
                android:id="@+id/igi_total"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
        <TableRow>
            <!--<TextView
                android:text="Price:"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>-->
            <TextView
                android:id="@+id/igi_price"
                android:gravity="right"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"/>
        </TableRow>
    </TableLayout>
</LinearLayout> 
```

看得见的：

![](../Images/13b58f68a533cb1d999c4e5ad4138687.png)

# c# - 使用 LINQ with Action 删除旧文件

> ID：10934554
> 
> 赞同：4
> 
> 时间：2012-06-07T15:08:19.440
> 
> 标签：c#, linq

我想做类似的事情

```
Action<FileInfo> deleter = f =>
    {
        if (....) // delete condition here
        {
            System.IO.File.Delete(f.FullName);
        }
    };

DirectoryInfo di = new DirectoryInfo(_path);

di.GetFiles("*.pdf").Select(deleter); // <= Does not compile!
di.GetFiles("*.txt").Select(deleter); // <= Does not compile!
di.GetFiles("*.dat").Select(deleter); // <= Does not compile! 
```

为了从目录中删除旧文件。但是我不知道如何在没有明确 foreach 的情况下直接将委托应用于 FilInfo[] （上面列出的想法当然行不通）。

是否可以？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:18:21.393

`Select()`用于将*项目*从投影`TSource`到`TResult`。在您的情况下，您不需要，`Select`因为您没有投影。相反，使用`List<T>`s`ForEach`方法删除文件：

```
di.GetFiles("*.pdf").ToList().ForEach(deleter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:19:13.467

~~正如 DarkGray 建议的那样，如果有点不寻常，您可以使用`Select`来首先操作文件，然后返回一个空集合。~~我建议使用`ForEach`扩展程序，如下所示：

## `ForEach`LINQ 扩展

```
public static void ForEach<TSource>(this IEnumerable<TSource> source, Action<T> action)
{
    foreach(TSource item in source)
     {
        action(item);
    }
} 
```

然后您应该能够对 的数组执行操作`FileInfo`，因为数组是一个枚举器。像这样：

## 执行

```
Action<FileInfo> deleter = f =>
{
    if (....) // delete condition here
    {
        System.IO.File.Delete(f.FullName);
    }
};

DirectoryInfo di = new DirectoryInfo(_path);
di.GetFiles("*.pdf").ForEach(deleter); 
```

*理查德编辑。*
我确实想提请注意`foreach`vs的论点`ForEach`。在我看来，该`ForEach`语句应该直接影响传入的对象，在这种情况下确实如此。所以我自相矛盾。哎呀！:)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T15:10:49.287

```
di.GetFiles("*.pdf").Select(_=>{deleter(_);return null;}); 
```

或者

```
di.GetFiles("*.pdf").ForEach(action); 

public static class Hlp
{
 static public void ForEach<T>(this IEnumerable<T> items, Action<T> action)
 {
   foreach (var item in items)
     action(item);
 }
} 
```

# php - 需要帮助弄清楚如何拥有可以删除、编辑或向数据库添加新项目的按钮

> ID：10934556
> 
> 赞同：0
> 
> 时间：2012-06-07T15:08:27.463
> 
> 标签：php, mysql, html, database

我想要一个可用于编辑、查看、删除和添加新产品的 php 文件。我已经完成了查看和添加新产品部分，但我现在要做的是，当您查看包含数据库信息的表时，有一个用于编辑、删除和添加新项目的按钮。我要添加到按钮的代码如下：

```
<html>
<head>
<style type="text/css">
td
{
padding:15px;
}
</style>
</head>
<?php

$mysqli = new mysqli("localhost","herp","lerp","derp");

$search=$_POST['search'];
$searchoption=$_POST['searchoption'];

$query= "SELECT * FROM contacts WHERE $searchoption = '".$search."'";
$result = $mysqli->query($query);     
if (!$result) {
printf("Query failed: %s\n", $mysqli->error);
exit;
} 
?>
<table>
<th> Information</th>
<?php     
while ($contact = $result ->fetch_assoc()) {

echo "<tr>";
echo "<th> Item Number  </th>";
echo "<th> Item Name  </th>";
echo "<th> Description  </th>";
echo "<th>  Inventory      </th>";
echo "<th> Price      </th>";
echo "<th> Active or Non-Active </th>";
echo "<th> Photo      </th>";
echo "</tr>";
echo "<tr>";
echo "<td>".$contact['item_number']."</td>";
echo "<td>".$contact['item_name']."</td>";
echo "<td>".$contact['item_description']."</td>";
echo "<td>".$contact['item_inventory']."</td>";
echo "<td>".$contact['item_price']."</td>";
echo "<td>".$contact['item_active_or_nonactive']."</td>";
echo "<td>".$contact['item_photo']."</td>";
echo "</tr><br/>";
}
?>
</table>
</html> 
```

如果我的问题不够具体，请告诉我，我会尝试缩小范围，但我主要是在寻找正确方向的推动力，这样我才能弄清楚该怎么做，因为截至目前我处于损失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:15:44.470

你真的应该考虑实现某种类型的 RESTful 服务器。它使事情变得简单得多。

如果您决定走这条路，有很多[资源可以帮助您入门。](http://www.fliquidstudios.com/2009/01/13/introduction-to-writing-a-rest-server-in-php/)
这是一个在 php 中实现 REST 的非常简单的框架。[http://peej.github.com/tonic/](http://peej.github.com/tonic/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:18:32.190

哇，首先你应该理清你所有的 MySQL 注入漏洞。其次，我会做这样的事情。

```
<?php
if( isset( $_GET['action'] ) )
{
    switch( $_GET['action'] )
    {
        case "add":
            //Display HTML form for adding new entry
        break;

        case "edit":
            if( isset( $_GET['item_number'] ) )
            {
                //Display HTML form for editing entry
            }
        break;

        case "delete":
            if( isset( $_GET['item_number'] ) )
            {
                //"Are you sure you want to delete $item_number?"
            }
            else
            {
                //Display HTML form for selecting which entry you want to delete
            }
        break;
    default:
        echo "<td><a href=/products.php?action=add'>Add new item</td>";
        $query = 'SELECT ID,Title,Cost FROM tableProducts WHERE CategoryID="'.$id.'" ORDER BY Rank;';
        if (($resource = @mysql_query($query, ...)) === false) {
            while ($row = @mysql_fetch_assoc($resource)) {
                echo "<td>".$row['Title']."</td>";
                echo "<td>".$row['Cost']."</td>";
                echo "<td><a href=/products.php?action=edit&id='".$row['ID']."'>Edit item?</td>";
                echo "<td><a href=/products.php?action=deete&id='".$row['ID']."'>Delete Item ?</td>";
            }
        }
    break;

    }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:30:14.977

搜索关于**php添加编辑删除**

请参阅本教程关于[基本 PHP 系统：查看/编辑/删除/添加记录](http://www.killersites.com/community/index.php?/topic/1969-basic-php-system-vieweditdeleteadd-records/) （分页部分是可选的）

# javascript - 将硬编码的 JQuery 转换为插件 - 语法问题

> ID：10934561
> 
> 赞同：0
> 
> 时间：2012-06-07T15:08:59.713
> 
> 标签：javascript, jquery, function, jquery-plugins, syntax

我有一些 JQuery 可以加载许多元素之一，例如`<li>`从许多行列表项中的一个无序列表中的一个：

```
 this.randomtip = function(){
        var length = $("#tips li").length;
        var ran = Math.floor(Math.random()*length) + 1;
        $("#tips li:nth-child(" + ran + ")").show();
    };

    $(document).ready(function(){
        randomtip();
    }); 
```

但是，我认为将其转换为 JQuery 插件以使其在使用中更具全局性会很好，因此当我需要它用于不同的元素和用例时，我可以简单地调用它。

我意识到我需要取出特定的选择器并将它们转换为`$(this)`可能基于查看其他 JQuery 插件的一些代码。

这是我到目前为止所拥有的，但我遇到了很多语法错误。我在几个小时内尝试了同一件事的许多不同迭代，但没有任何乐趣：

```
(function ( $ ) {

    $.fn.randomtip = function () {

    var length = $(this).length;
    var ran = Math.floor(Math.random()*length) + 1;
    $(this).find (':nth-child' '+ ran + ')").show();

})(jQuery); 
```

我得到语法错误的地方是：

```
$(this).find (':nth-child' '+ ran + ')").show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:11:52.160

你有几个错别字`$(this).find()`。下面是正确的版本：

```
(function ( $ ) {
    $.fn.randomtip = function () {
    var length = $(this).length;
    var ran = Math.floor(Math.random() * length) + 1;
    $(this).find (':nth-child('+ ran + ')').show();
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:09:58.133

存在语法问题

```
$(this).find (':nth-child' '+ ran + ')").show(); 
```

也许你想要这个？

```
$(this).find (':nth-child(' + ran + ')').show(); 
```

# ios - 打电话时如何隐藏电话号码

> ID：10934562
> 
> 赞同：-1
> 
> 时间：2012-06-07T15:09:12.770
> 
> 标签：ios, phone-call

我的应用程序允许用户拨打电话，但我需要隐藏我要拨打的号码，因为它里面有一个密码。有什么办法可以做到这一点？

当我说“隐藏号码”时，我指的是在通话前确认中出现的电话号码`UIAlertView`，如果可能的话，在通话过程中出现在导航栏中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T15:12:44.737

绝对不是。拨打电话时传递给操作系统的电话号码无法对用户进行修改或隐藏。（如果您的应用拨打 911 怎么办？）

另外，如何通过电话号码传递“密码”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:39:43.347

I think if you try to modify the way how ios Phone app works, your app might be rejected. I'm almost sure they will not happy to let your app dail a number without user's knowledge.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:12:37.497

您是在 Web 视图中使用本机电话号码识别代码，还是应用程序中的自定义按钮。

在我创建的应用程序中，我有一个按钮，用户可以点击该按钮来拨打电话号码。此按钮显示我自己创建的 UIAlertView（因此可以完全控制它所说的内容），然后在 alertView:didClickButtonAtIndex: 委托方法中，我执行以下操作：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel://5555555555"]]; 
```

发起呼叫。

# c# - 使用安全代码将通道从一个图像复制到另一个图像

> ID：10934565
> 
> 赞同：3
> 
> 时间：2012-06-07T15:09:21.157
> 
> 标签：c#, gdi+

我正在尝试重构这个不安全的代码，以按照[MSDN](http://msdn.microsoft.com/en-us/library/5ey6h79d%28v=vs.80%29.aspx)`System.Runtime.InteropServices.Marshal.Copy`上的这个示例将单个 ARGB 通道从一个图像复制到另一个图像，但我完全迷失了。

谁能告诉我我将如何去做？

```
public enum ChannelARGB
{
    Blue = 0,
    Green = 1,
    Red = 2,
    Alpha = 3
}

public static void transferOneARGBChannelFromOneBitmapToAnother(
    Bitmap source,
    Bitmap dest,
    ChannelARGB sourceChannel,
    ChannelARGB destChannel )
{
    if ( source.Size!=dest.Size )
        throw new ArgumentException();
    Rectangle r = new Rectangle( Point.Empty, source.Size );
    BitmapData bdSrc = source.LockBits( r, 
                                        ImageLockMode.ReadOnly, 
                                        PixelFormat.Format32bppArgb );
    BitmapData bdDst = dest.LockBits( r, 
                                      ImageLockMode.ReadWrite,
                                      PixelFormat.Format32bppArgb );
    unsafe
    {
        byte* bpSrc = (byte*)bdSrc.Scan0.ToPointer();
        byte* bpDst = (byte*)bdDst.Scan0.ToPointer();
        bpSrc += (int)sourceChannel;
        bpDst += (int)destChannel;
        for ( int i = r.Height * r.Width; i > 0; i-- )
        {
            *bpDst = *bpSrc;
            bpSrc += 4;
            bpDst += 4;
        }
    }
    source.UnlockBits( bdSrc );
    dest.UnlockBits( bdDst );
} 
```

# 编辑

尽管到目前为止我已经想出了这个，但为了尝试通过@Ben Voigt walk 工作。不幸的是，我现在收到以下错误：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

```
 private static void TransferOneArgbChannelFromOneBitmapToAnother(
                                         Bitmap source,
                                         Bitmap destination, 
                                         ChannelARGB sourceChannel, 
                                         ChannelARGB destinationChannel)
    {
        if (source.Size != destination.Size)
        {
            throw new ArgumentException();
        }

        Rectangle rectangle = new Rectangle(Point.Empty, source.Size);

        // Lockbits the source.
        BitmapData bitmapDataSource = source.LockBits(rectangle,
                                                  ImageLockMode.ReadWrite,
                                                  PixelFormat.Format32bppArgb);

        // Declare an array to hold the bytes of the bitmap.
        int bytes = bitmapDataSource.Stride * bitmapDataSource.Height;

        // Allocate a buffer for the source image
        byte[] sourceRgbValues = new byte[bytes];

        // Get the address of the first line.
        IntPtr ptrSource = bitmapDataSource.Scan0;

        // Copy the RGB values into the array.
        System.Runtime.InteropServices.Marshal.Copy(ptrSource, 
                                                    sourceRgbValues, 
                                                    0, 
                                                    bytes);

        // Unlockbits the source.
        source.UnlockBits(bitmapDataSource);

        // Lockbits the destination.
        BitmapData bitmapDataDestination = destination.LockBits(rectangle,
                                                  ImageLockMode.ReadWrite,
                                                  PixelFormat.Format32bppArgb);

        // Allocate a buffer for image
        byte[] destinationRgbValues = new byte[bytes];

        IntPtr ptrDestination = bitmapDataDestination.Scan0;

        // Copy the RGB values into the array.
        System.Runtime.InteropServices.Marshal.Copy(ptrDestination,
                                                    destinationRgbValues, 
                                                    0, 
                                                    bytes);

        ptrSource += (int)sourceChannel;
        ptrDestination += (int)destinationChannel;

        for (int i = rectangle.Height * rectangle.Width; i > 0; i--)
        {
            destinationRgbValues[i] = sourceRgbValues[i];
            ptrSource += 4;
            ptrDestination += 4;
        }

        // Copy the RGB values back to the bitmap
        // ******This is where I am getting the exception*******.
        System.Runtime.InteropServices.Marshal.Copy(destinationRgbValues, 
                                                    0, 
                                                    ptrDestination, 
                                                    bytes);

        // Unlock bits the destination.
        destination.UnlockBits(bitmapDataDestination);
    } 
```

谁能看到我做错了什么？老实说，这让我有点过头了。我想我应该买些书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:15:28.927

1.  `LockBits`来源。
2.  `Marshal.Copy`缓冲区`BitmapData`的源。`byte[]`
3.  `UnlockBits`来源。
4.  `LockBits`目的地。
5.  `Marshal.Copy`缓冲区`BitmapData`的目的地。`byte[]`
6.  循环并将该通道从源复制`byte[]`到目标`byte[]`（注意，对索引使用算术而不是指针）
7.  `Marshal.Copy``byte[]`回到目的地`BitmapData`。
8.  `UnlockBits`目的地。

不过，我不确定重点是什么。使用的代码与使用关键字`Marshal.Copy`的代码一样危险，并且应该需要类似的代码安全权限。`unsafe`

一种可能更有效的方法是使用`ImageAttributes.SetColorMatrix`从目标图像中删除所需通道，从源图像中删除所有其他通道，然后进行混合。请参阅示例[`ColorMatrix`](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.colormatrix)

或者使用 DirectX（或 OpenGL）和只传输一个通道的着色器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:34:20.163

您可以使用来自[Nuget](https://www.nuget.org/packages/linqimageprocessing)或[Codeplex](http://codeblocks.codeplex.com/wikipage?title=Linq%20Image%20Processing%20sample&referringTitle=Home)的基于 LINQ 的简单图像处理框架，并编写一个简单的查询来交换通道。

您还可以使用 ColorMatrix 来执行[此](https://github.com/mono/MonoGame/blob/develop3d/MonoGame.Framework/Graphics/ImageEx.cs)代码中的通道交换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:03:00.947

Unfortunately, a ColorMatrix won't work if you want to combine channels from two separate images. You would need an additive (or bitwise or) blending method, and the only blending provided by GDI+ is Over and Copy. It also looks to me like any methods that would allow you to access the bits directly, including LockBits, are locked down.

I think the only option is to use GetPixel and SetPixel on each pixel, something like this:

```
Color dstColor = bpDst.GetPixel(x, y);
Color srcColor = bpSrc.GetPixel(x, y);
int srcValue = (srcColor.ToArgb() >> (sourceChannel * 8)) & 0xff;
int dstArgb = (dstColor.ToArgb() & ~(0xff << (destChannel * 8))) | (srcValue << (destChannel * 8));
bpDst.SetPixel(x, y, Color.FromArgb(dstArgb)); 
```

# asp.net-mvc-3-areas - C# 到 MVC 中的 Javascript

> ID：10934568
> 
> 赞同：0
> 
> 时间：2012-06-07T15:09:33.757
> 
> 标签：asp.net-mvc-3-areas

在我的 MVC 应用程序中，我创建了视图 Index.cshtml，并在那里声明了 C# 变量。

例如：string selectedvalue="";

现在如何在我在这个 Index.cshtml 中编写的 javascript 函数代码中使用它，以便我可以在 javascript 函数中将一些文本附加到这个字符串？

字符串选择值=“”；// 编码部分函数 onchangeFT(e) { '@selectedvalue'= e.value; //e.value 来自组合框，应该分配给“selectedvalue” alert('@selectedvalue'); }

它给了我错误...

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:22:16.057

我认为您对在这种情况下所做的事情感到困惑。

您已使用 MVC razor 语法声明了 C# 变量 @selectedValue。然后，您可以使用此变量将其值注入到输出到客户端的内容中。但是，您不能从客户端 javscript 代码分配回此变量，因为它不存在。您的错误将与您实际上试图将对象值分配回无效的文字字符串声明这一事实有关。

在你的例子中

> '@selectedValue'=e.value;

将转化为

> '' = e.value;

这是因为 MVC razor 会自动将 c# 参数翻译成它的值并按字面意思输出。为了将变量分配给 e.value，您应该创建一个 javascript 值作为脚本块的一部分，然后您的脚本将其识别为可用的目标变量。

例如：

```
var selectedValue = '';
selectedValue = e.value; 
```

# jquery - JQuery 如何获取 JSON 结果？

> ID：10934572
> 
> 赞同：0
> 
> 时间：2012-06-07T15:09:41.827
> 
> 标签：jquery, rest, jax-rs

初学者的问题：这是我的服务器端代码，非常简单：

```
 @GET
    @Path("/query")
    @Consumes(MediaType.APPLICATION_JSON)
    @Produces(MediaType.APPLICATION_JSON)
    public Map<Integer,String> getUsers(
        @QueryParam("from") int from,
        @QueryParam("to") int to) {

        Map<Integer, String> orders = new HashMap<Integer,String>();
        orders.put(1, "order1");
        orders.put(2, "order2");
        orders.put(3, "order3");

        return orders;

    } 
```

这是我的 JQuery 代码：

```
$(document).ready(function() {
    $('#id1').mouseover(function() {

       alert("ok");
       var formData = {from:3, to:2};
        var result = $.ajax({
            url: 'http://localhost:8080/MyJSON/resources/entities.customer/query',
            type: "GET",
            data: formData,
            dataType: 'json',
            success: function (data) {alert(data);}
        });                 
  }); 

}); // end ready 
```

如何解析数据对象并获取json，即`{"1":"order1","2":"order2","3":"order3"}`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:10:45.380

```
success: function (data) {
 alert(data['1']);  // output: order1
 alert(data['2']);  // output: order2
} 
```

**[演示](http://jsfiddle.net/thecodeparadox/cjh8h/1/)**

使用 jQuery`$.each()`循环：

```
success: function (data) {
  $.each(data, function(key, val) { // here key = 1, 2, 3...
      alert(val); // output: order1, order2...
  });
} 
```

**[演示](http://jsfiddle.net/thecodeparadox/aAVKK/)**

使用香草 javascript 循环

```
for(var key in data) {
    // key = 1, 2, 3...
    alert(data[key]); // output: order1, order2...
} 
```

**[演示](http://jsfiddle.net/thecodeparadox/Zu3QV/1/)**

### 笔记

由于您设置`dataType: 'json'`的是 ajax 配置，因此您不需要任何额外的解析工作，例如`$.parseJSON()`or `JSON.parse()`。

# c# - c# 没有非托管权限的无法验证的代码

> ID：10934573
> 
> 赞同：6
> 
> 时间：2012-06-07T15:09:41.993
> 
> 标签：c#, .net-4.0, appdomain

我有一个 .net 程序集，其方法无法验证。

我正在尝试将此程序集加载到沙盒应用程序域中。

如果我使用跳过验证加载，而不是使用非托管加载，我会收到验证异常。像这样：

```
new SecurityPermission(SecurityPermissionFlag.Execution | 
                       SecurityPermissionFlag.SkipVerification); 
```

如果我使用非托管权限加载它可以工作，但是应用程序域将不够“沙盒”。

```
new SecurityPermission(SecurityPermissionFlag.Execution | 
                       SecurityPermissionFlag.SkipVerification |
                       SecurityPermissionFlag.UnmanagedCode); 
```

另外-我正在运行.Net 4，并且要使上述工作正常，我必须切换到transperancy模型级别1，如下所示：

```
[assembly:SecurityRules(SecurityRuleSet.Level1)] 
```

所以，我的问题是：

1.  有没有办法在没有 UnamangedCode 权限的情况下运行未经验证的代码。
2.  有没有办法使用 Level2 安全规则集进行上述工作。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:01:50.017

> 有没有办法在没有 UnamangedCode 权限的情况下运行未经验证的代码。

即使有，你也会在那个时候放弃任何安全性。无法验证的代码与非托管代码具有相同的功能。例如，它允许您打破类型系统。

拥有 SkipVerification 而不是 UnmanagedCode（或相反）是没有意义的。两者是等价的，我认为这是两者都存在的框架中的一个错误。

# java - GAE (java) 上用于 Web 服务的 2 路 SSL

> ID：10934576
> 
> 赞同：15
> 
> 时间：2012-06-07T15:09:49.780
> 
> 标签：java, web-services, google-app-engine, ssl, pki

我们需要在 Google App Engine 上实现双向 SSL，我们使用 JAX-WS 将 Web 服务请求发送到要求双向 SSL 身份验证的服务器。

我们如何为传出的 Web 服务请求设置 2-way SSL？

我们知道这`javax.net.ssl*`在 App Engine 环境中是被禁止的。

**这是我们的代码示例：**

```
@WebService(name="ListenerSoap", targetNamespace = "http://example.com/Listener.Wsdl")
@SOAPBinding(parameterStyle = SOAPBinding.ParameterStyle.BARE)
public interface ListenerSoap {

    @WebMethod(operationName = "Ping", action="http://example.com/Listener.Wsdl#Ping")
    public void ping();
}

@WebServiceClient(name="Listener", targetNamespace="http://example.com/Listener.Wsdl", wsdlLocation = "https://example.com/Listener.asmx?WSDL")
public class Listener extends Service
{
  public ListenerSoap getListenerSoap() {
   return super.getPort(new QName("http://example.com/Listener.Wsdl", 
                       "ListenerSoap"), ListenerSoap.class);
  }
} 
```

**以及使用上述代码的示例：**

```
ListenerSoap soap = new Listener().getListenerSoap();
soap.ping(); 
```

我认为我们可以将 DataStore 中所需的密钥库或任何证书存储为二进制对象（尽管如何上传它们对我来说仍然是一个模糊的概念）。

我们如何设置此 Web 服务使用 2-way SSL 进行身份验证所需的必要值？

谢谢你的帮助

**更新：**

通过研究，我看到这是如何在传统服务器（具有文件系统访问权限的服务器）上完成的：

```
ListenerSoap soap = new Listener().getListenerSoap();
((BindingProvider) soap).getRequestContext().put("javax.net.ssl.keyStore", "client_cert.p12" 
```

但是，在这种方法中，`client_cert.p12`预计将在文件系统上。

此外，GAE 上不允许使用`SSLSocketFactory`、`SSLContext`、`KeyManager`和all 。`KeyManagerFactory`

**更新：**

从 GAE SDK 版本 1.7.7 开始。这现在应该是可能的：

```
Similarly, Java developers can now use the javax.net.ssl package to make outbound SSL connections. 
```

[GAE 1.7.7 SDK 发行说明](http://googleappengine.blogspot.com/2013/04/app-engine-177-released.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T04:19:23.447

从我对 SSL 授权的有限知识来看，您似乎在这里遗漏了一些至关重要的东西；证书。双向 SSL 要求客户端和服务器证书位于您的密钥库中，可以是自签名证书（pkcs12 或 pem 文件，您可以通过 shell 使用一些命令轻松生成）或由像 Thawte 或 Verisign 这样的授权公司。虽然我不确定这是否是您面临的问题，但最好检查一下。（另外，我是新手，所以请不要对我的回答投反对票，只是想提出可能的选择。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T16:03:23.520

听起来对通过 SSL ( `https://...`) 的简单连接和所谓的“相互身份验证”或“公钥基础设施 (PKI)”存在混淆。您实际上可以同时做这两个或一个独立于另一个。对于后者（我认为原始问题所指的内容），当您向服务器发出请求时，服务器将响应您要求您提供证书以进行身份​​验证。

**要回答上面的特定问题**（从二进制数据加载密钥库），我认为这不太可能，因为它是 Java 运行时在您的密钥库中提取。您唯一能做的就是从数据存储中加载这些位并将其临时写入磁盘。当应用程序存在时，可选择将其删除。这是我以前做过的，效果很好。如果您这样做，我建议使用可能可写的位置（例如`System.getProperty("java.io.tmpdir"));`），然后在将文件写入磁盘后，设置 JVM 属性（例如`System.getProperties().put( "javax.net.ssl.keyStore","...");`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-10T03:46:46.843

据我所知，不支持 2 路 SSL（从 GAE 中托管的应用程序到外部世界）。几个月前我尝试了一个示例应用程序，但很沮丧地发现 GAE 甚至不支持这个基本功能......而且文档也不清楚。当您联系网络服务时，您将无法出示客户端证书。没有地方存储它，无法访问密钥库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T06:27:21.233

我知道你可能不想听到这个，但是使用 SSL 是昂贵的，并且对于双向通信有问题。根据您对服务器/客户端的控制程度，我更喜欢简单的双向管道，如 Web 套接字和可以简单实现 AES 的数据包协议。这实际上取决于您要解决的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T00:39:30.363

```
ListenerSoap soap = new Listener().getListenerSoap(); 
```

希望改进

谢谢

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-27T05:52:00.063

为此，您将需要 App Engine 的 Socket API。此 API 处于受信任的测试人员模式，因此并非对所有人都可用。

您可以要求访问基尔：[https ://docs.google.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0](https://docs.google.com/spreadsheet/viewform?formkey=dF9QR3pnQ2pNa0dqalViSTZoenVkcHc6MQ#gid=0)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T07:42:23.363

据我所知，关于双向 SSL，您将与 Java EE 代码没有链接：双向 SSL 是一种传输层安全性：当您的客户端应用程序将尝试与服务创建安全的 HTTP 连接 (HTTPS) 时，服务器将索取证书，并将批准或不批准此证书。如果客户端证书被批准，则将在各方上建立安全连接，并允许他们通过此隧道交换一些消息。但是这个过程是在传输层上完成的。你的代码（在应用层）永远不会被告知这个过程。为了建立双向 SSL，需要在应用服务器上设置 SSL 端口。

# c# - 在c#中将blob数据从一个表复制到另一个表

> ID：10934580
> 
> 赞同：0
> 
> 时间：2012-06-07T15:10:04.597
> 
> 标签：c#, mysql, blob

基本上我有一个服务，它查看两个表 - 一个位于远程服务器上，另一个位于本地。我正在尝试编写一个程序，该程序将从远程服务器中选择任何所需的文件并将它们复制到本地。我可以让它适用于标准记录，但我如何处理 c# 中的 blob - 我刚开始使用这种语言，所以要温柔

我所拥有的片段如下

```
public static void BroadcastCheck(String ip_addr)
    {
        OdbcConnection local = new OdbcConnection("DSN=local");
        OdbcConnection cloud = new OdbcConnection("DSN=cloud");
        local.Open();
        cloud.Open();
        OdbcCommand update1 = new OdbcCommand("UPDATE exchange set status = '1' where `status`='0' and inp_date=chg_date and LEFT(filename,12)='" + ip_addr + "' and type='UPDATE'", cloud);
        update1.ExecuteNonQuery();
        OdbcCommand broadcastSelect = new OdbcCommand("select * from exchange where inp_date=chg_date and LEFT(filename,12)='" + ip_addr + "' and status='1' and type='UPDATE'", cloud);
        OdbcDataReader DbReader = broadcastSelect.ExecuteReader();
        int fCount = DbReader.FieldCount;
        byte[] outByte = new byte[500]; 
        while (DbReader.Read())
        {
           String type = DbReader.GetString(0);
           String filename = DbReader.GetString(1);
           String data = DbReader.GetBytes(1);
           OdbcCommand broadcastCopy = new OdbcCommand("INSERT INTO exchange(type,filename) VALUES('"+type+"','"+filename+"'"+data+")", local);
           broadcastCopy.ExecuteNonQuery();

        }
        itouchcloud.Close();
        itouchlocal.Close();
        Console.Write("Broadcast Check Completed \n");

    } 
```

基本上查询云数据库并可能返回多个结果，我想处理返回的每条记录并将其复制到本地数据库。我环顾四周，似乎无法真正得到一个像样的解决方案，我可以在 Visual FoxPro 9 中简单地做到这一点，所以我猜有一个类似的解决方案。

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:26:52.637

答案的第一部分是，如果可以，请避免使用动态 SQL。当您应该使用“... VALUES (?, ?, ?)”时，您正在使用“... VALUES ('"+type+"','"+filename+"'"+data+")”。

然后，添加参数，例如，

```
// sample: the name of the parameter (here @Type) can be anything, and the type and length should match your schema.
broadcastCommand.Parameters.Add("@Type", OleDbType.VarChar, 10).Value = type; 
```

问号将按照您指定的顺序替换为参数，因此您应该按该顺序添加类型、文件名、数据。

现在，您指定的值也应该与您要插入的字段类型相对应。因此，您可能希望变量的类型为 String、String、byte[]，而不是 String、String、String。

大约有一百万个不动态构建查询的理由，所以我建议研究如何在 OdbcCommand 上使用参数集合。[从这里](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbcparameter)开始。

**更新**

一般来说，您可以`DataReader`简单地使用索引器 [] 来获取值，而无需通过`GetXXX()`方法。对于字节数组，这通常更简单，因为您不需要事先知道或尝试猜测长度。

您可以通过这种方式将代码转换为使用索引器：

```
String type = (string)DbReader[0];
String filename = (string)DbReader[1];
byte[] data = (byte[])DbReader[2]; 
```

请注意，您的`GetBytes()`呼叫最初有一个 1 ，但我假设您没有尝试获取文件名字段的字节。因此，如果您的`byte[]`数据在另一个字段中，请改用它。但是请注意，您也可以轻松地使用字符串字段名称（下次需要阅读代码时可能会更清楚）：

```
String type = (string)DbReader["type"]; // replace with whatever your fields are actually called
String filename = (string)DbReader["filename"];
byte[] data = (byte[])DbReader["data"]; 
```

如果您有机会`filename`并且`data`两者都使用相同的字段，因为`data`实际上不在数据库中，而是您想要获取文件名并将该文件系统对象作为插入查询的数据读取，您需要使用不同的方法。

```
byte[] data = System.IO.File.ReadAllBytes(filename); // requires .NET 2.0+ 
```

无论采用哪种方式填充变量，都应使用参数化查询将它们插入，如上所述。

# php - 在 PHP 中获取表单。如何链接到结果的第 2 页以上？

> ID：10934584
> 
> 赞同：0
> 
> 时间：2012-06-07T15:10:18.697
> 
> 标签：php, forms, post, get, pagination

我有一个`POST`PHP 表单，我正在转换为`GET`.

该表格有效，并为我提供了结果的第一页，没有任何问题。

但是如何链接到第二页？我假设我必须将所有`GET`参数复制到“下一页”链接加上页码（脚本已经处理），但我该怎么做呢？

**澄清：** 如何`GET`将表单中的所有变量放到页面中的链接上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:26:46.523

最简单的方法也是做类似的事情：

```
$get = preg_replace("/page=\d+/i", "", $_SERVER['QUERY_STRING']);

$link = "somepage.php?".$get."&page=".($_GET['page']+1);

echo "<a href='".$link."'>Next Page</a>"; 
```

这将简单地获取获取字符串，删除页面然后将页面添加回 +1。请注意，这是不安全的，因为人们可以在查询字符串中传递任何内容。更好的选择是通过检查每个预期的 $_GET key=>value 对来显式构建 URL，对其进行验证，然后将其添加到链接变量中。这样查询字符串中的任何其他位都不会回显到页面。

编辑：

好的，这是一个非常简单的例子。

```
$category = (int)$_GET['cat'];
$keyword = trim($_GET['keyword']);
$keyword = filter_var($keyword, FILTER_SANITIZE_STRING);

$nextlink  = "somepage.php?";
$nextlink .= http_build_query(array(
   "cat" => $category,
   "keyword" => $keyword,
   "page" => $page+1
)); 
```

所以基本上你得到你想要的 GET var，验证它们，然后只使用 http_build_query 和一个关联数组来为链接构建你的查询字符串。我放入的安全性是非常基本的，但是类型转换数字和限制可以插入字符串的杂物数量是一个开始的地方

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:22:49.553

简单地说，您可以像这样从请求中读取它们：

```
$link = 'mypage/?someitem=' . $_GET['someitem'] . '&amp;page=' . ($page + 1); 
```

尽管您可能不希望信任这些参数，因为它们可能包含 HTML 注入或其他旨在攻击您网站的恶意技巧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:24:14.090

不就是`URL?param1=val1&param2=val2&...`吗？

# c# - MemoryStream - 无法访问已关闭的流

> ID：10934585
> 
> 赞同：90
> 
> 时间：2012-06-07T15:10:20.563
> 
> 标签：c#, asp.net, .net, streamwriter, memorystream

嗨，为什么 `using (var sw = new StreamWriter(ms))`退货`Cannot access a closed Stream` `exception`。`Memory Stream`位于此代码之上。

```
using (var ms = new MemoryStream())
{
    using (var sw = new StreamWriter(ms))
    {                 
        sw.WriteLine("data");
        sw.WriteLine("data 2");
        ms.Position = 0;
        using (var sr = new StreamReader(ms))
        {
            Console.WriteLine(sr.ReadToEnd());                        
        }
    } //error here
} 
```

修复它的最佳方法是什么？谢谢

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-06-07T15:16:33.247

This is because the `StreamReader` closes the underlying stream automatically when being disposed of. The `using` statement does this automatically.

However, the `StreamWriter` you're using is still trying to work on the stream (also, the `using` statement for the writer is now trying to dispose of the `StreamWriter`, which is then trying to close the stream).

The best way to fix this is: don't use `using` and don't dispose of the `StreamReader` and `StreamWriter`. See [this question](https://stackoverflow.com/questions/1862261/can-you-keep-a-streamreader-from-disposing-the-underlying-stream).

```
using (var ms = new MemoryStream())
{
    var sw = new StreamWriter(ms);
    var sr = new StreamReader(ms);

    sw.WriteLine("data");
    sw.WriteLine("data 2");
    ms.Position = 0;

    Console.WriteLine(sr.ReadToEnd());                        
} 
```

If you feel bad about `sw` and `sr` being garbage-collected without being disposed of in your code (as recommended), you could do something like that:

```
StreamWriter sw = null;
StreamReader sr = null;

try
{
    using (var ms = new MemoryStream())
    {
        sw = new StreamWriter(ms);
        sr = new StreamReader(ms);

        sw.WriteLine("data");
        sw.WriteLine("data 2");
        ms.Position = 0;

        Console.WriteLine(sr.ReadToEnd());                        
    }
}
finally
{
    if (sw != null) sw.Dispose();
    if (sr != null) sr.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2018-04-13T11:49:55.207

从 .net45 开始，您可以使用`LeaveOpen`构造函数参数`StreamWriter`并且仍然使用该`using`语句。例子：

```
using (var ms = new MemoryStream())
{
    using (var sw = new StreamWriter(ms, leaveOpen:true))
    {
        sw.WriteLine("data");
        sw.WriteLine("data 2");    
    }

    ms.Position = 0;
    using (var sr = new StreamReader(ms))
    {
        Console.WriteLine(sr.ReadToEnd());
    }
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-07T15:16:48.633

When the `using()` for your `StreamReader` is ending, it's disposing the object and closing the stream, which your `StreamWriter` is still trying to use.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T15:13:13.637

当它从 using 语句中出来时，该`Dispose`方法将被调用，自动关闭流

试试下面的：

```
using (var ms = new MemoryStream())
{
    var sw = new StreamWriter(ms);

        sw.WriteLine("data");
        sw.WriteLine("data 2");
        ms.Position = 0;
        using (var sr = new StreamReader(ms))
        {
            Console.WriteLine(sr.ReadToEnd());
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T15:17:32.463

问题是这个块：

```
using (var sr = new StreamReader(ms))
{
    Console.WriteLine(sr.ReadToEnd());                        
} 
```

当`StreamReader`关闭时（离开使用后），它也会关闭它的底层流，所以现在`MemoryStream`关闭了。当`StreamWriter`关闭时，它会尝试将所有内容刷新到`MemoryStream`，但它已关闭。

您应该考虑不要将其`StreamReader`放入 using 块中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-18T20:45:15.313

在我的情况下（诚然非常神秘，不太可能经常复制），这是导致问题的原因（此代码与使用 iTextSharp 生成 PDF 相关）：

```
PdfPTable tblDuckbilledPlatypi = new PdfPTable(3);
float[] DuckbilledPlatypiRowWidths = new float[] { 42f, 76f };
tblDuckbilledPlatypi.SetWidths(DuckbilledPlatypiRowWidths); 
```

显然，声明一个 3 单元格/列的表，然后只为宽度设置两个 val 是导致问题的原因。一旦我将“PdfPTable(3)”更改为“PdfPTable(2)”，问题就出现在对流烤箱上。

# javascript - MyObj.prototype。对比这个

> ID：10934588
> 
> 赞同：3
> 
> 时间：2012-06-07T15:10:35.397
> 
> 标签：javascript, oop

JS newb 在这里所以希望这不是一个愚蠢的问题。

在使用方法定义自定义对象时，以下两种方法有什么区别和优缺点？

1：使用在类定义中定义方法`this`。

```
function MyObj(){    
    this.doStuff = function(){    
        //method body    
    }    
} 
```

2：使用单独定义方法`prototype`。

```
function MyObj(){    
}    

MyObj.prototype.doStuff = function()    
{    
    //method body    
} 
```

我现在正在搞乱它，而且两者似乎都工作相同，所以我想我会在我走上一条稍后会回来咬我屁股的赛道之前找到不同之处:)

祝大家欢呼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:13:10.360

当您使用`this`时，您的“类”的每个实例都将拥有自己的方法副本。

当您使用 时`prototype`，所有实例都将共享该方法的一个副本。因此，在 上声明方法更有效`prototype`，因为每个实例需要更少的内存。

例如，创建两个实例`MyObj`：

```
var o1 = new MyObj(),
    o2 = new MyObj(); 
```

如果`doStuff`在构造函数中声明了该方法，那么这些实例中的每一个现在在内存中都有该方法的副本。如果它是在 上声明的`prototype`，他们共享那一份。当您尝试调用它时：

```
o1.doStuff(); 
```

实例本身没有`doStuff`属性，所以我们将原型链向上移动到`MyObj.prototype`有`doStuff`方法的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:37:05.933

除了内存方面的考虑之外，还有性能方面的考虑。

`this`在构造函数中定义属性[要慢得多](http://jsperf.com/local-vs-prototype-creation)，但就稍后实际访问这些属性而言，[本地定义的属性具有轻微的性能优势](http://jsperf.com/local-vs-prototype)，因为 JS 引擎不必沿着原型链向上走。

换句话说，如果您不经常创建少量对象，最好在构造函数中本地定义属性（#1），但如果您要创建很多对象，请使用`prototype`（#2）。

# c# - JSON 序列化/反序列化为包含字典的字典

> ID：10934590
> 
> 赞同：0
> 
> 时间：2012-06-07T15:10:40.817
> 
> 标签：c#, serialization, json.net, deserialization

我正在开发一个实现 DotSpatial 选项卡/功能区应用程序的项目。每个选项卡都是一个插件。保存项目时，RaiseSaveRequest 事件处理程序会创建一个字典，该字典通过 e 传递给每个插件的 projectSavedListener。然后在侦听器中，e.dictPackedStates.adds(pluginName, PackState()) 进入每个插件的 PackState()，将自己打包到字典中。因此，整个应用程序的状态保存在 dictPackedStates 字典中，如 pluginName 和每个插件的字典。

我在保存/打开文件时使用 JSON.NET 对文件进行序列化/反序列化。我认为我的保存工作正常。

```
Dictionary<string, object> pluginStates = new Dictionary<string, object>();
signaller.RaiseSaveRequest(pluginStates);

//JSON
string json = JsonConvert.SerializeObject(pluginStates);
StreamWriter sw = new StreamWriter(strPathName); 
sw.Write(json);
sw.Close(); 
```

我的 sw.Write(json); 似乎正在将 JSON 写入文件。我可以打开文件并查看全部内容。然后在我的公开场合，我有：

```
Dictionary<string, object> pluginStates = new Dictionary<string, object>();

//JSON
StreamReader sr = new StreamReader(fullName);
string json = sr.ReadToEnd();
pluginStates = JsonConvert.DeserializeObject<Dictionary<string, object>>(json);
sr.Close();

signaller.UnpackProjectState(pluginStates); 
```

我的 pluginStates 与它们被序列化之前的方式不同。当他们被保存时，字典看起来像：（想在这里有一张它的样子，不知道如何）..

```
pluginStates  Count=5, 
(hit plus, 1st entry) [0] {[Project Manager, System.Collections.Generic.Dictionary'2[System.String,System.Object]]}
(hit plus on that entry) Key  "Project Manager" Value  Count =1
(hit plus on value) [0]  {[ProjectName, test5.vbpx]} 
```

然后在公开场合，signaller.UnpackProjectState 发送的 PluginStates 是：

```
pluginStates  Count=5 
(hit plus, 1st entry)  [0] {[Project Manager, { "ProjectName": "test5.vbpx"}]}
(hit plus)  Key  "Project Manager"  Value  { "ProjectName": "test5.vbpx"}
(hit plus on value) .. first thing is base {Newtonsoft.Json.Linq.Jcontainer} 
```

这会导致第一个插件的 UnpackState(object objPackedState) 出错。发送的对象是值 { "ProjectName": "test5.vbpx"} 而不是上面保存的字典中的第一项 {[Project Manager, System.Collections.Generic.Dictionary'2[System.String,System.Object] ]}。

我希望这足以解释我的问题。关于如何获取 deserializeObject 以使字典恢复为正确格式的任何建议？非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:11:56.270

我解决了这个问题（然后找到了我的下一个问题..我将作为一个单独的问题添加）。我更改了包含所有插件打包状态的 pluginStates 字典，`Dictionary<string, object>`使`Dictionary<string, Dictionary<string, object>>`保存的 pluginStates（序列化之前）和打开的 pluginStates（反序列化之后）相同。直到我深入到实际的插件解包方法，它没有被正确反序列化。

# vb.net - 使用 ODBC/Net 获取 postgresql 表中的存在和行数

> ID：10934601
> 
> 赞同：1
> 
> 时间：2012-06-07T15:11:00.767
> 
> 标签：vb.net, odbc, postgresql-9.1

我通过 ODBC 将 PostgreSQL 数据库与 VB.net 一起使用，一切正常。
示例代码：

```
 Dim reader As OdbcDataReader
    Dim btCommand As OdbcCommand
    Dim mCmd As OdbcCommand
    Dim mCon as OdbcConnection

    mCon.ConnectionString = "Dsn=PostgreSQL30;database=mydb;server=127.0.0.1;port=myport;uid=myuid;pwd=mypass"
    mCon.Open()
    btCommand = New OdbcCommand("BEGIN TRANSACTION", mCon)
    mCmd = New OdbcCommand("SELECT dtbl_id, name, meas, price, qty, flag, kind FROM mytable WHERE dtbl_id >=" & brr.ToString & " ORDER BY dtbl_id LIMIT " & page.ToString, mCon)
    reader = mCmd.ExecuteReader()
    While (reader.Read())
        Dim n As Integer = DataGridView1.Rows.Add()
        With DataGridView1.Rows.Item(n)
            .Cells(0).Value = reader.GetValue(0).ToString()
            .Cells(1).Value = reader.GetValue(1).ToString()
            .Cells(2).Value = reader.GetValue(2).ToString()

    ... etc... 
```

但我不知道如何使用该系统（odbc）检查表是否存在以及有多少行包含到 VB 变量中，因此任何建议都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:02:27.053

自己解决了问题。

如果表不存在，texists 将以 -1 结束，如果表存在并且没有插入任何行，则以 0 结束，或者以表示表中存在的行数的任何整数结束。

代码：

```
 Dim texists As Integer = -1        
    btCommand = New OdbcCommand("SELECT 1 FROM pg_tables WHERE tablename='mytable'", mCon)
    reader = btCommand.ExecuteReader()
    While (reader.Read())
        If reader.GetValue(0) = 1 Then texists = 0
    End While

    If texists >= 0 Then
        btCommand = New OdbcCommand("SELECT COUNT(*) from mytable", mCon)
        Try
            reader = btCommand.ExecuteReader()
            While (reader.Read())
                texists = Val(reader.GetValue(0).ToString())
            End While
        Catch ex As Exception
            MsgBox(ex.Message, MsgBoxStyle.Critical + MsgBoxStyle.OkOnly)
        End Try
    End If 
```

在此之后，根据 texists 的值，我们可以创建一个表，终止程序或继续工作。

# mysql - 如何从此查询中删除结果？

> ID：10934602
> 
> 赞同：1
> 
> 时间：2012-06-07T15:11:05.120
> 
> 标签：mysql

如何从此查询的数据库结果中删除？你们能帮帮我吗

```
SELECT v.type
FROM poll_answers
JOIN vote_types v ON poll_answers.vote_id = v.id
JOIN poll_questions q ON q.id = poll_answers.question_id
WHERE q.referendum_id =1 
```

我试图一一删除它，但我的外键有问题，所以我想一步一步删除

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:33:42.550

试试这个：

```
delete poll_answerpoll_answer,v,q,
FROM poll_answers
JOIN vote_types v ON poll_answers.vote_id = v.id
JOIN poll_questions q ON q.id = poll_answers.question_id
WHERE q.referendum_id =1 
```

**编辑**

```
mysql> delete poll_answers,v,q
    -> FROM poll_answers
    -> JOIN vote_types v ON poll_answers.vote_id = v.id
    -> JOIN poll_questions q ON q.id = poll_answers.question_id
    -> WHERE q.referendum_id =1;
Query OK, 0 rows affected (0.00 sec) 
```

# java - 复制 DirectByteBuffers OutOfMemoryError

> ID：10934603
> 
> 赞同：0
> 
> 时间：2012-06-07T15:11:08.887
> 
> 标签：java, java-native-interface

我打算使用 DirectByteBuffers 来连接用 C++ 编写的第三方库。

我从[hadoop 文档中](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/util/DirectMemoryUtils.html)担心说：

> DirectByteBuffers 是通过使用幻像引用和引用队列进行垃圾收集的。每隔一段时间，JVM 就会检查引用队列并清理 DirectByteBuffers。但是，由于这不会在丢弃对 DirectByteBuffer 的所有引用后立即发生，因此使用 DirectByteBuffers 自己很容易出现 OutOfMemoryError。

首先，我不确定 DirectByteBuffers 的所有实现是否都相同，因为[OpenJDK 7](http://www.docjar.com/html/api/java/nio/DirectByteBufferImpl.java.html) 似乎没有使用幻像引用，而是依赖于应该有性能损失的 finalize 方法。

其次，我尝试使用复制 OutOfMemoryError

```
public static void main(String[] args) {
    for(;;){
        ByteBuffer buff = ByteBuffer.allocateDirect(1000*1000);
    }
} 
```

似乎一切都得到了正确的垃圾收集。如果在我的机器上使用这种情况

```
java version "1.6.0_31"
Java(TM) SE Runtime Environment (build 1.6.0_31-b04-415-11M3635)
Java HotSpot(TM) 64-Bit Server VM (build 20.6-b01-415, mixed mode) 
```

我可以相信这将适用于所有其他机器和java版本> = 1.6吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:21:13.657

[This](http://www.kdgregory.com/index.php?page=java.byteBuffer) is a great article on the subject.

As for your test, simple tests like that don't really exercise the problem area. the potential issue arises when the GC gets too far behind. in a test like that, the GC isn't doing anything else so likely won't have problem keeping up.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:18:25.417

这是 Java 6 早期版本中的一个错误。但是，JVM 中包含的一个简单解决方法是仅在触发 System.gc(); 后抛出 OutOfMemoryError；现在您可以通过禁用显式 GC 来模拟这个问题。

[java.nio.Bits.reserveMemory(long) 的源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/nio/Bits.java#Bits.reserveMemory%28long%29)

* * *

我不会等待 GC 清理直接内存或内存映射文件，而是使用适用于基于 OpenJDK 的 JVM 的内部 API，例如 Hotspot。这通过减少虚假的 Full GC 来提高性能。

```
((DirectBuffer) buffer).cleaner().clean(); 
```

如果你有堆缓冲区，cleaner() 将返回 null。

# loops - PHP 在 DIV LOOP 中的每个 NTH 之后

> ID：10934608
> 
> 赞同：0
> 
> 时间：2012-06-07T15:11:21.407
> 
> 标签：loops

嗨，我想在循环中的每 3 个 div 之后添加内容。这是下面的代码，但我什至没有得到渲染内容“嗨，这是 3d div”

它没有检测到每 3 个 div。

```
<?php
    function q_list_item($q_item)
    {
        $count = 0;

        $this->output('<DIV>');
        $this->my_items;    
        $this->output('</DIV>');

        $count++;           

        if($count % 3 == 0) {
            echo 'Hi this is the 3rd div';
        }

    }
?> 
```

**----[实际功能]------------------------------------------ -----**

```
<?php

function q_list_item($q_item)
{

    $this->output('<DIV CLASS="qa-q-list-item'.rtrim(' '.@$q_item['classes']).'" '.@$q_item['tags'].'>');

    $this->q_item_stats($q_item);
    $this->q_item_main($q_item);
    $this->q_item_clear();

    $this->output('</DIV> <!-- END qa-q-list-item -->', '');

}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:15:35.010

您正在`$count`将此函数顶部的 重置为 0，因此当您在函数末尾运行 if 语句时，它将始终为 1。

这可能有助于解决您的问题，尽管我无法判断您的代码是否在一个类中，因为它看起来不像，但您正在`$this->`那里使用。本质上，将计数器的实例化移到函数之外：

```
<?php
    $q_list_count = 0;

    function q_list_item($q_item)
    {
        $q_list_count++;

        $this->output('<DIV>');
        $this->my_items;    
        $this->output('</DIV>');

        if($q_list_count % 3 == 0) {
            echo 'Hi this is the 3rd div';
        }

    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:20:32.530

```
<?php
    $count = 0;
    function q_list_item($q_item)
    {
        $this->output('<DIV>');
        $this->my_items;    
        $this->output('</DIV>');

        $count++;           

        if($count % 3 == 0) {
            echo 'Hi this is the 3rd div';
        }

    }
?> 
```

在循环外初始化 $count，否则到达 if 语句时 count 将始终为 1

# c# - 时间：2019-01-01 标签：c#datatableselectstatementwithdates

> ID：10934615
> 
> 赞同：9
> 
> 时间：2012-06-07T15:11:41.593
> 
> 标签：c#, datetime, select, datatable

我正在尝试对数据表进行选择语句以获取我正在查找的日期范围内的行。我是新手，我不太明白这个 select 语句是如何工作的。我试图写这个，但没有工作。你能帮我一下吗？我被困住了

```
foundRows = dt.Select("DATE1 <= '" + date1+ "' AND DATE2 >= '" + date1+ '"'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T06:17:54.973

这是我测试过的最佳搜索条件。你必须约会。

From_Date = 12/01/2012 To_Date = 12/31/2012

以及您在其上应用的 DataTable 中的列。（在我的代码“日期”中）

您的 Select 语句将是这样的。

```
 DataRow[] rows = newTable.Select("date >= #" + from_date + "# AND date <= #" + to_date + "#"); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T15:18:16.587

除了用# 包裹日期外，如果 date1 是 DateTime 而不是字符串，则需要使用 ToString（您的日期格式）来获取正确的 sql 语句。对于调试，如果首先创建一个包含过滤器的字符串，然后使用该字符串进行选择，它会更容易。然后您可以查看该字符串并在查询构建器中使用它来验证您的 sql。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-04T19:07:53.933

我在这篇文章上发布了答案。

[数据表按确切的日期时间选择](https://stackoverflow.com/questions/26454586/datatable-select-by-exact-datetime/55523301#55523301)

您可以通过使用刻度在范围内进行选择来使用类似的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-02T14:30:02.123

在 SSIS 脚本组件中使用它。我刚刚使用了上面的示例，其中包括日期周围的“#”。我也将每个转换为字符串。这非常有效。

以防万一您想知道我如何在 SSIS 中进行设置：首先有一个数据流使用记录集目标和对象变量来存储记录集。

在我的脚本中，我将变量包含为只读。

在主课...

```
public class ScriptMain : UserComponent
{

OleDbDataAdapter a = new OleDbDataAdapter();
System.Data.DataTable AwardedVacTable = new System.Data.DataTable();
...
... 
```

然后在预执行...

```
public override void PreExecute()
{
    base.PreExecute();

    a.Fill(AwardedVacTable, Variables.rsAwardedVac);
...
... 
```

然后在自定义方法中访问数据表...

```
String dtFilter = "EmployeeID = " + empId.ToString() + " AND (#" + Convert.ToString(StartDate) "# <= EndDate AND #" + Convert.ToString(StartDate) + "# >= StartDate" + " OR #" + Convert.ToString(StartDate.AddDays((double)numDays)) + "# >= StartDate AND #" + Convert.ToString(StartDate.AddDays((double)numDays)) + "# <= EndDate)";

DataRow[] Overlaps = AwardedVacTable.Select(dtFilter); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-07T07:03:55.357

表达式 = "日期 > #2015-1-1#"; DataRow[] foundRows = table.Select(expression); 与 select * from tablename where Date>'2015-1-1'

# function - Excel宏将A列中每个ID行的B列中的多行与换行符连接起来

> ID：10934616
> 
> 赞同：0
> 
> 时间：2012-06-07T15:11:41.717
> 
> 标签：function, excel, xls, vba

此问题在 Excel .xls 文件中。

**最简单的用例：**

**A 列有一行。B 列有 5 行。B 列中的 5 行需要合并为一行，由换行符分隔。**

我有一个巨大的 .xls 文档，其中 A 列中有大量 ID。A 列的每一行平均有 3 到 10 行。

如何知道 B 列的哪些行属于 A 列？通过细胞的定位。一列 A 行的右侧可能有 5 列 B 行。

我没有任何VBA经验。我四处寻找宏和函数，但没有找到任何与此问题匹配的东西。

编辑：我现在正试图弄清楚如何让脚本忽略在 A 列和 B 列之间具有一对一映射的行。

再次编辑 - 2012 年 6 月 20 日：现在我可以附加图像，这是我想要获取的图像的屏幕截图。
Brian 和 Mark 的行应该被忽略，而 Scott 和 Tim 会复制他们的值。

![我正在寻找的结果](../Images/8d8c6d66c52ac22cb11e45161d0656c4.png)

编辑：取消合并列 A，使用 Andy 提供的代码，然后使用这个 VB 脚本就可以了：

> Sub mergeA()
> For i = 2 To Cells(65535, 1).End(xlUp).Row
> If IsEmpty(Cells(i, 1)) Then Range(Cells(i - 1, 1), Cells(i, 1) ).Merge
> Next
> End Sub

该VB脚本将A列中的单元格重新组合在一起
我没有制作脚本，它来自这个网页：
[http ://www.vbforums.com/showthread.php?t=601304](http://www.vbforums.com/showthread.php?t=601304)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:02:03.013

这会将左侧显示的数据转换为右侧的输出：

![在此处输入图像描述](../Images/07f6fbbba3be6abdaeb6d3b89f753990.png) ![在此处输入图像描述](../Images/03ec5ed964980f18c0a5cf34fe98dfbf.png)

```
Option Explicit

Sub Make_Severely_Denormalized()
  Const HEADER_ROWS As Long = 1
  Const OUTPUT_TO_COLUMN As Long = 3
  Const DELIMITER As String = vbNewLine
  Dim A_Range As Range
  Dim B_Range As Range
  Dim A_temp As Range
  Dim B_temp As Range
  Dim B_Cell As Range
  Dim Concat As String

On Error GoTo Whoops
  Set A_Range = Range("A1").Offset(HEADER_ROWS)
  Do While Not A_Range Is Nothing
    Set B_Range = A_Range.Offset(0, 1)

    ' some helper ranges
    If A_Range.Offset(1, 0).Value = "" Then
      Set A_temp = Range(A_Range, A_Range.End(xlDown).Offset(-1, 0))
    Else
      Set A_temp = A_Range.Offset(1, 0)
    End If
    Set B_temp = Range(B_Range, B_Range.End(xlDown)).Offset(0, -1)

    ' determine how high "B" is WRT no change in "A"
    Set B_Range = Range(B_Range, B_Range.Resize( _
      Application.Intersect(A_temp, B_temp, ActiveSheet.UsedRange).Count))

    ' loop through "B" and build up the string
    Concat = ""
    For Each B_Cell In B_Range
      Concat = Concat & B_Cell.Value & DELIMITER
    Next
    Concat = Left(Concat, Len(Concat) - Len(DELIMITER))

    ' do the needful
    A_Range.Offset(0, OUTPUT_TO_COLUMN - 1).Value = Concat

    ' find the next change in "A"
    If A_Range.Offset(1, 0).Value = "" Then
      Set A_Range = Application.Intersect(A_Range.End(xlDown), ActiveSheet.UsedRange)
    Else
      Set A_Range = A_Range.Offset(1, 0)
    End If
  Loop
  Exit Sub
Whoops:
  MsgBox (Err & " " & Error)
  Stop
  Resume Next
End Sub 
```

# javascript - 返回 pubsub 节点的顺序

> ID：10934617
> 
> 赞同：0
> 
> 时间：2012-06-07T15:11:43.617
> 
> 标签：javascript, xmpp, openfire, ejabberd

是否可以确定在 xmpp 中获取 pubsub 节点的顺序？openfire 以随机顺序返回节点。至少我没有看到它背后的任何逻辑。它不是按创建日期排序，不是按“节点”，也不是按“名称”或标题。在数据库中有一个创建日期属性 - 我如何在创建日期之前获取节点？也许有这个功能？或者ejabberd有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:24:12.453

该规范没有详细说明任何类型的排序，所以不，您不能期望结果中有任何特定的排序。某些服务器可能会按某些属性（例如名称）对它们进行排序，但是您不能跨服务器甚至是同一服务器的版本依赖它，因为它只是一个实现细节。

Openfire 存储创建日期的事实是一个实现细节，与规范无关。

我建议您在按名称排序的情况下检索它们后对它们进行排序，但是对于 Openfire 中的创建日期，您可以提供自己的插件以按您喜欢的顺序检索信息。当然，那时您正在针对您的插件而不是规范进行编码。

# jsp - 如何在没有路径限制的情况下将数据作为 cookie 发送

> ID：10934624
> 
> 赞同：2
> 
> 时间：2012-06-07T15:11:55.837
> 
> 标签：jsp, servlets, cookies

如何在不将 cookie 限制在当前 Web 应用程序的情况下将数据添加到 cookie？

我正在使用 Java 环境（JSP 和 Servlet）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:46:51.137

Cookie`domain and path`属性定义了 cookie 的范围。他们会告诉浏览器应该将 cookie 发送回该域和路径的服务器。

它没有指定，这些值默认为域和访问的应用程序。

如果您希望为该域的所有应用程序发送 cookie：

设置 cookie 路径就像`/`代替`/path`

# git - 为什么其他用户的更改现在显示为我的更改？

> ID：10934625
> 
> 赞同：0
> 
> 时间：2012-06-07T15:11:56.397
> 
> 标签：git

这种情况现在已经发生了几次——另一个用户创建了一个分支，然后将该分支与 master/HEAD 合并。然后我提交我的本地更改（在本例中为 1 个文件），并尝试推送它们，但推送失败，因为它不同步。因此，我从 repo 中提取并提取当前的 master/HEAD，其中包括在其他用户分支中所做的更改。现在，当我再次推送时，它无法说我有未提交的更改（并列出了该其他用户分支中的所有更改！） - 为什么它告诉我提交其他用户的更改？他们不是我的改变！

有些东西似乎不对，我现在什至无法拉动，它失败了，因为显然我的本地更改将被合并覆盖（列出不是我的更改！）

我是Git的新手，但是，这似乎不对....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:20:39.973

您需要提交合并。当您拉动时，可能存在需要在本地解决并在您推动之前解决的冲突。

# c++ - boost::none_t 实现的基本原理是什么？

> ID：10934626
> 
> 赞同：25
> 
> 时间：2012-06-07T15:11:56.727
> 
> 标签：c++, boost, boost-optional

[Boost.Optional](http://www.boost.org/libs/optional)使用一个虚拟类型来允许构造`boost::optional<T>`. 这种类型称为`none_t`，并且为了方便起见，已经在标头中定义了一个实例`none`，允许我们编写如下代码：

```
boost::optional<int> uninitialized(boost::none); 
```

查看 的定义`none_t`，我注意到它实际上是一个 typedef，对应于指向某个虚拟结构的成员指针：

```
namespace boost {

namespace detail { struct none_helper{}; }

typedef int detail::none_helper::*none_t ;

none_t const none = (static_cast<none_t>(0)) ;

} // namespace boost 
```

与这样的简单空结构相比，使用这种复杂的 typedef 有什么好处？

```
namespace boost {

struct none_t {};

none_t const none;

} // namespace boost 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T15:20:52.017

啊，我从没想过要深入挖掘。

常规 的一个（或多或少明显的）优势`struct`是现在在布尔上下文中`none`评估为。`false`

与另一个“评估为假”相比的一个优点是可以防止指向成员的指针有害地提升为整数类型。

所以，我想它提供了一种安全而简洁的方法来获得一个评估为`false`.

*编辑：人们应该在这里认识到（嗯......）[Safe Bool Idiom](http://www.artima.com/cppsource/safebool.html)的结构。*

# iphone - 如何打破解析结果？

> ID：10934627
> 
> 赞同：1
> 
> 时间：2012-06-07T15:11:59.947
> 
> 标签：iphone, ios

我正在执行 JSON 解析。作为回报，我得到的结果是这样的：

```
{"login":"FALSE","userid":"Please enter correct Email Address"} 
```

我想将 userid: 消息保留到某个变量中，以便我可以根据 userid 本身执行功能。

请提出建议。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:47:53.833

您可以尝试使用这样的框架，https://github.com/stig/json-framework

示例用法是，假设在您的头文件中声明了 userId。

```
SBJSON *parser = [[SBJSON alloc] init];

NSArray *statuses = [parser objectWithString:json_string error:nil];

userId = [statuses valueForKey:@"userid"]; 
```

现在 userId 从 json 字符串中保留 userid 的 json 值

**更新**：如果您只支持**iOS >= 5.0**，我建议您使用内置`NSJSONSerialization`类。如果是这种情况，您的代码将看起来更像这样..

```
NSData *jsonData = [jsonString dataUsingEncoding:NSUTF8StringEncoding];

NSMutableArray *jsonList = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:nil];

userId = [jsonList valueForKey:@"userid"];

NSLog(@"userid: %@", userId); // will print "Please enter correct Email Address" 
```

希望这可以帮助 ！

# timeout - ReportExecution2005.ReportExecutionService.Render() 大约 2 分钟后返回无数据

> ID：10934632
> 
> 赞同：0
> 
> 时间：2012-06-07T15:12:11.653
> 
> 标签：timeout, reportingservices-2005

我有一个 ac# web 应用程序，它接受用户的请求并通过 RS2005 将 SQL Server 中的数据导出到 Excel。代码如下所示：

```
ReportExecution2005.ReportExecutionService rsExec = new ReportExecution2005.ReportExecutionService();

// set all params here...

rsExec.Timeout = 1800000;  //30 mins

s.Start(); // stopwatch start
result = rsExec.Render(format, null, out extension, out encoding, out mimeType, out warnings, out streamIDs);
s.Stop();// stopwatch stop 
```

问题是，当请求花费超过 2 分钟（模拟我的存储过程中有“等待延迟 '00:04:00'”）时，.Render() 方法在 2 分钟后返回，没有数据。我传入的参数有有效数据，因为当我删除存储过程中的延迟时，数据会返回。但是当我添加延迟时，Render() 方法返回时没有数据。我希望在存储过程延迟后获得全部数据。

我认为这与 Reporting Services 无关，因为当我们创建具有相同数据的订阅时，该报告会根据需要运行并返回数据，因此相同的报告可以正常工作。它不会引发超时异常。它通常会在 2 分 4 秒左右停止工作，并且没有返回数据。有人对此有任何想法吗？

提前致谢。

本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:13:31.647

发现了我的问题。事实证明，RS.Render() 正在调用一个 Web 服务，该服务本身有几个与之相关的超时。它正在返回，因为服务调用引发了超时，但它不知道如何传递异常，因此没有返回数据，也没有异常。

# php - 当数据库中有新数据时，使用jquery刷新div不显示新内容

> ID：10934639
> 
> 赞同：0
> 
> 时间：2012-06-07T15:12:26.413
> 
> 标签：php, mysql, ajax, jquery

我创建了一个带有 div 的 php 文件，该文件每 10 秒刷新一次。在这个 div 中，加载了查询的结果。演示： http: [//mauricederegt.nl/test/test.php](http://mauricederegt.nl/test/test.php)

看起来是在刷新 div，但是如果在数据库中添加了新数据，则 div 并没有获取到新数据，而是一直显示旧数据。

我使用与需要重新加载的页面相同的页面：

`$('#scoreboard-overview').fadeOut('slow').load('index.php #scoreboard-overview').fadeIn("slow");`

如果我将 div 中使用的 sql 查询复制到外部 php 文件（例如 reload.php），然后像这样调用它：

`$('#scoreboard-overview').fadeOut('slow').load('reload.php').fadeIn("slow");`

它有效，div 显示最新数据。问题是：我不想使用另一个外部 php 文件。

我怎样才能做到这一点？

我也尝试将`$resulttt`查询放在 div 中，但这也没有效果。我错过了什么？

亲切的问候，

index.php 中使用的代码：

```
<?php
    /////////////////////////////////////////////

    //mysql_connect(servername,username,password);
    //Here we connect to the database

    /////////////////////////////////////////////
//Get the data
$resulttt = mysql_query("SELECT fbID, highscore, stars, MIN(time) AS time FROM highscore GROUP BY fbID, highscore ORDER BY highscore DESC, time ASC LIMIT 7");

?>
<!DOCTYPE html>
<html xmlns:fb="http://www.facebook.com/2008/fbml">

<head>
<meta charset="utf-8">
<title>Test</title>
<link rel="stylesheet" href="test.css" />
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.6.2.min.js"></script>
<script>
var auto_refresh = setInterval(
function()
{
$('#scoreboard-overview').fadeOut('slow').load('index.php #scoreboard-overview').fadeIn("slow");
}, 10000);
</script>
</head>
  <body>
    <div id="scoreboard">
        <div id="scoreboard-title">High scores</div>
        <div id="scoreboard-overview">
        <?php   echo '<ul>';
                $num_rows = mysql_num_rows($resulttt);
                $i = 0;
                    while($row = mysql_fetch_array($resulttt)) {
                        $i = $i + 1;
                        $fb_data = json_decode(file_get_contents('http://graph.facebook.com/'. $row['fbID']));
                        $fb_locale_str = $fb_data->locale;
                        $fb_name_str = $fb_data->first_name;
                        $fb_country_str = strtolower(substr($fb_locale_str, -2));
                        $flag_uri = 'images/flags/unknown.gif'; //display a general flag if unknown.
                        $row['fbnr'] = $row['fbID'];

                        echo '<li id="'. $row['fbnr'] .'">
                                <div class="userpicture"><img src="https://graph.facebook.com/'. $row['fbID'] .'/picture" alt="" /></div>
                                <div class="username"><p>'.$i.'. '.$fb_name_str.'</p></div>
                                <div class="userflag"><img src="'.$flag_uri.'" alt="" /></div>  
                                <div class="userholder">
                                    <div class="usertime"><p><img src="images/time.png" alt="" /><br>'. $row['time'] .'</p></div>
                                    <div class="userstars"><img src="images/'. $row['stars'] .'s.png" alt="" /></div>
                                    <div class="userscore"><p>'. $row['highscore'] .'</p></div>
                                </div>      
                            </li>';
                    }
            echo '</ul>'; ?>

        </div>
        <div id="scoreboard-bottom">end</div>
    </div>
  </body>
</html> 
```

* * *

我想我找到了一个解决方法`GET`，感谢大家的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:19:42.343

我无法想象任何浏览器都会对 Javascript 尝试将整个 HTML 页面（带有`<html>`,`<head>`和`<body>`标签）插入现有文档中的元素感到高兴。您想将`scoreboard-overview`加载页面`scoreboard-overview`上的内容放入现有页面，因此在您的调用中添加一个选择器`.load()`：

```
$('#scoreboard-overview').fadeOut('slow').load('index.php #scoreboard-overview').fadeIn("slow"); 
```

# php - 返回到之前加载的页面并显示一个弹出窗口

> ID：10934641
> 
> 赞同：0
> 
> 时间：2012-06-07T15:12:37.210
> 
> 标签：php, javascript, ajax

我有一个页面显示未决销售电话的摘要。当用户单击摘要时，会进行一个 ajax 调用，该调用会详细显示所选调用。在这里，用户可以对呼叫进行更改并单击保存。单击保存时，将进行另一个 ajax 调用以将数据写入数据库。

我想做的是这个..如果保存成功，返回显示摘要的原始页面并弹出一个说保存成功的弹出窗口。我遇到的问题是在最初加载页面时弹出窗口不触发，或者如果单击“返回而不保存”按钮。

这些页面使用 php 和 javascript，并带有 ajax 调用。

我希望这有点道理。感谢大家可能有的任何指示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:21:33.700

保存成功后，将它们重定向到如下 URL：

```
http://www.example.com/previousPage.php?result=success 
```

然后，在previousPage.php 的代码中，只有这样的内容：

```
<?php

if(isset($_GET['result']) && $_GET['result'] == 'success')
{
    echo '<script>alert("Success!");</script>';
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:33:35.973

为什么要使用 ajax 来获取销售电话，然后更改页面？我建议使用模态对话来显示您选择的调用，使用类似[jQuery UI](http://jqueryui.com/demos/dialog/#modal-form)的东西。然后用户永远不会离开当前页面。

# c# - Flipview中图像顶部带有边框的图像

> ID：10934644
> 
> 赞同：1
> 
> 时间：2012-06-07T15:12:38.480
> 
> 标签：c#, xaml, windows-8

![例子](../Images/49b5b702eb2b2b2a9b4ce0f8ff7d2acb.png)

如何在 XAML 中创建以下图像示例？（所以图像顶部的绿色叠加层）当我添加图像和边框（其中包含一个文本块）时，边框也将始终拉伸到全高，而不是文本块中文本所需的高度。

它包含在 Flipview 中。但是网格中的普通示例也可以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:23:19.250

看看 VS2011 / 12 网格应用程序模板。在 Common\StandardStyles.xaml 中，您会在中心屏幕上找到 GridView 项目的所有样式，其中很多都遵循这种模式。例如，“Standard250x250ItemTemplate”样式定义如下...

```
<DataTemplate x:Key="Standard250x250ItemTemplate">
    <Grid HorizontalAlignment="Left" Width="250" Height="250">
        <Border Background="{StaticResource ListViewItemPlaceholderRectBrush}">
            <Image Source="{Binding Image}" Stretch="UniformToFill"/>
        </Border>
        <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundBrush}">
            <TextBlock Text="{Binding Title}" Foreground="{StaticResource ListViewItemOverlayTextBrush}" Style="{StaticResource TitleTextStyle}" Height="60" Margin="15,0,15,0"/>
            <TextBlock Text="{Binding Subtitle}" Foreground="{StaticResource ListViewItemOverlaySecondaryTextBrush}" Style="{StaticResource CaptionTextStyle}" TextWrapping="NoWrap" Margin="15,0,15,10"/>
        </StackPanel>
    </Grid>
</DataTemplate> 
```

# asp.net-mvc - 负载/压力测试在 IIS7 中关闭了我的 ASP.net MVC 4

> ID：10934645
> 
> 赞同：0
> 
> 时间：2012-06-07T15:12:40.703
> 
> 标签：asp.net-mvc, asp.net-mvc-3, iis-7, iis-7.5, stress-testing

我在具有自己的应用程序池的生产服务器中有一个网站。Web 服务器是 IIS7，技术是 ASP.net MVC4。SQL Server Express 2012 用于数据库查询。我进行了负载/压力测试，知道响应时间。我使用的工具是： http: [//loadimpact.com/](http://loadimpact.com/)

当它让我的网站崩溃时，我会感到惊讶。应用程序池有一些警告，之后应用程序池已停止，因此它显示错误，表明服务已关闭。

如果我通过浏览器请求我的网站，一切都很好并且速度很快。我认为我的应用程序池配置错误（它是默认配置）并且不支持同时请求的多个客户端。

我怎样才能发现问题并解决它？

# jquery-mobile - phonegap (cordova) 如何隐藏浏览器地址栏

> ID：10934648
> 
> 赞同：0
> 
> 时间：2012-06-07T15:12:49.790
> 
> 标签：jquery-mobile, cordova

我正在使用phoneGap（现在是cordova-1.8.0）创建一个ipad应用程序。我可以在 ipad 中启动应用程序，但浏览器的地址栏始终可见。如何摆脱地址栏？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:08:40.337

如果内容正在应用程序中加载，那么您将永远看不到浏览器。

您的应用程序是使用本地 HTML 还是从远程服务器加载内容？我有一种感觉，您可能正在使用来自远程服务器的内容。如果是这种情况，请确保将服务器的主机名添加到白名单中。如果 URL 不在白名单中，它将在浏览器中打开。

# javascript - Chrome HTML document.execCommand('inserthtml' 插入下表单元格

> ID：10934651
> 
> 赞同：1
> 
> 时间：2012-06-07T15:12:53.427
> 
> 标签：javascript, html, dom, google-chrome, ckeditor

我正在使用[ckEditor](http://ckeditor.com/)并且正在研究片段/文本替换功能。我有纯文本字符串或 HTML 字符串（例如段落元素）的片段。我正在使用 document.execCommand('inserthtml', false, html) 进行内容插入，并且在大多数情况下都可以正常工作。

但是，当我尝试使用此方法将内容插入表格单元格时，内容会在光标所在的单元格之后的单元格中结束，如果光标位于最后一个单元格中，则内容会在表格之外。

我的搜索并没有找到太多关于这种情况的信息，我真的不明白为什么 Chrome 会这样。这是预期的行为吗？有没有更好的方法来插入任意 html，保持光标位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:55:31.927

使用[CKEditor API我在](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.editor.html#insertHtml)[API 演示](http://nightly.ckeditor.com/latest/ckeditor/_samples/api.html)中没有看到这样的问题

使用 Chrome，我插入了一个表格，然后我使用了插入 HTML 按钮，它工作正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:51:09.670

这似乎是一个 WebKit 错误。您可以通过使用“InsertHTML”命令的自定义替换来解决它。下面的演示使用[我对相关问题的回答中的](https://stackoverflow.com/a/6691294/96100)一个函数，保留插入符号的位置并在 IE < 9 中工作（与“InsertHTML”命令不同，它没有）。

[http://jsfiddle.net/timdown/7SZjm/2/](http://jsfiddle.net/timdown/7SZjm/2/)

# excel - Excel 2010 单元格选择宏

> ID：10934653
> 
> 赞同：0
> 
> 时间：2012-06-07T15:13:06.407
> 
> 标签：excel, hotkeys, vba

所以我很惊讶没有热键可以做到这一点。我在微软的网站上查看了 Excel 热键，但没有。

我想要做的就是有一个热键来复制我当前选择的单元格的内容。我根本不想用我的鼠标。这可能吗？Microsoft 提供的唯一解决方案是：

1.  按 F2 编辑所选单元格的内容
2.  使用 Shift+Arrow 选择文本（注意不是 Ctrl+A，这在单元格中不起作用）
3.  按 Ctrl+X 或 Ctrl+C 复制值。

[微软说明](http://office.microsoft.com/en-us/excel-help/move-or-copy-cells-and-cell-contents-HP010342707.aspx?CTT=5&origin=HP010342321#BMmovecontents)

为什么没有热键呢？可以制作一个吗？这会让我的生活轻松很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:23:40.317

您必须将宏分配给您自己的热键，但这会将 ActiveCell 文本添加到剪贴板。添加对 Microsoft Forms 2.0 对象库的引用

```
Sub hotKeyCopy()
Dim DataObj As New MSForms.DataObject
Dim copyText As String
copyText = ActiveCell.Text
DataObj.SetText copyText
DataObj.PutInClipboard
End Sub 
```

# javascript - jQuery 验证插件，检查输入 defaultValue

> ID：10934658
> 
> 赞同：0
> 
> 时间：2012-06-07T15:13:14.377
> 
> 标签：javascript, jquery, default-value, jquery-validate

尝试使用 jquery validate 插件验证字段。我只想检查当前输入值是否不等于 defaultValue。如果相等则无效，清除该值并显示错误消息。

像这样的东西：

```
...

firstname:{
    required: function(element){                       
    return element.val() !== element.defaultValue;
    element.val('');
    }                                          
}

... 
```

不幸的是，这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:40:22.530

好的，找到了解决方案。只需创建以下方法即可解决问题。

```
jQuery.validator.addMethod("defaultInvalid", function(value, element){
    return !(element.value == element.defaultValue);
},jQuery.validator.messages.required); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T21:21:13.340

这是一个也适用于单选按钮的实现：

```
var isChanged = function ($element) {
    switch ($element.attr('type')) {
        case "radio":
            var $formElementsWithSameName = $element.closest('form').find(':input').filter(function () {
                return $(this).attr('name') == $element.attr('name');
            });
            return $formElementsWithSameName.filter(':checked').filter(function () {
                return $(this).prop('defaultChecked');
            }).length == 0;

        case "text":
            return $element.val() != $element.prop('defaultValue');
        default:
            console.error("No implementation of isChanged for element " + $element);
    }
}; 
```

# objective-c - 如何导入相同的实用程序类而不会出现重复符号错误？

> ID：10934661
> 
> 赞同：0
> 
> 时间：2012-06-07T15:13:23.113
> 
> 标签：objective-c, ios5, dry

我有一个名为的文件`ColourUtils.h`，其中包含以下代码，[我发现它可以将十六进制字符串转换为 color](http://arstechnica.com/apple/2009/02/iphone-development-accessing-uicolor-components/)。

```
#import <Foundation/Foundation.h>

@interface ColourUtils : NSObject

+ (UIColor *) colorWithHexString: (NSString *) hex;

@end

@implementation ColourUtils

+ (UIColor *) colorWithHexString: (NSString *) hex  
{  
    NSString *cString = [[hex stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] uppercaseString];  

    // String should be 6 or 8 characters  
    if ([cString length] < 6) return [UIColor grayColor];  

    // strip 0X if it appears  
    if ([cString hasPrefix:@"0X"]) cString = [cString substringFromIndex:2];  

    if ([cString length] != 6) return  [UIColor grayColor];  

    // Separate into r, g, b substrings  
    NSRange range;  
    range.location = 0;  
    range.length = 2;  
    NSString *rString = [cString substringWithRange:range];  

    range.location = 2;  
    NSString *gString = [cString substringWithRange:range];  

    range.location = 4;  
    NSString *bString = [cString substringWithRange:range];  

    // Scan values  
    unsigned int r, g, b;  
    [[NSScanner scannerWithString:rString] scanHexInt:&r];  
    [[NSScanner scannerWithString:gString] scanHexInt:&g];  
    [[NSScanner scannerWithString:bString] scanHexInt:&b];  

    return [UIColor colorWithRed:((float) r / 255.0f)  
                           green:((float) g / 255.0f)  
                            blue:((float) b / 255.0f)  
                           alpha:1.0f];  
} 

@end 
```

我有 2 个 ViewControllers 都需要使用这个类（用于装饰 UI 中的 UI `viewDidLoad`）。在这两个`.h`文件中，我都导入了这个 : `#import "ColourUtils.h"`。

但是，我在编译时确实收到以下错误：

```
ld: duplicate symbol _OBJC_METACLASS_$_ColourUtils in ... 
```

将这种通用方法包含到多个 ViewController 中的最佳方法是什么？我来自 Java 背景，静态方法和一些导入会很好，但这在 Objective-C 中似乎不一样

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:17:38.977

不要将`@implementation`类的一部分放入 .h 文件中。.h 应该只用于其他类需要的类接口声明，以便知道它们可以使用哪些公共方法和属性。为其他人不需要知道的类的一部分（实现和私有声明）创建一个匹配的 .m 文件。

# javascript - 以点表示法转换字符串以获取对象引用

> ID：10934664
> 
> 赞同：36
> 
> 时间：2012-06-07T15:13:33.403
> 
> 标签：javascript, object, syntax

在javascript中考虑这个对象，

```
var obj = { a : { b: 1, c: 2 } }; 
```

给定字符串“obj.ab”，我如何获取 this 引用的对象，以便我可以更改它的值？即我希望能够做类似的事情

```
obj.a.b = 5;
obj.a.c = 10; 
```

其中“obj.ab”和“obj.ac”是字符串（不是 obj 引用）。我遇到了[这篇文章](https://stackoverflow.com/questions/6393943/convert-javascript-string-in-dot-notation-into-an-object-reference)，在那里我可以获得点符号字符串引用 obj 的值，但我需要的是一种可以获取对象本身的方法？

对象的嵌套可能比这更深。即也许

```
var obj = { a: { b: 1, c : { d : 3, e : 4}, f: 5 } } 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-06-07T15:29:05.240

要获得该值，请考虑：

```
function ref(obj, str) {
    str = str.split(".");
    for (var i = 0; i < str.length; i++)
        obj = obj[str[i]];
    return obj;
}

var obj = { a: { b: 1, c : { d : 3, e : 4}, f: 5 } }
str = 'a.c.d'
ref(obj, str) // 3 
```

或者以更奇特的方式，使用[reduce](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
function ref(obj, str) {
    return str.split(".").reduce(function(o, x) { return o[x] }, obj);
} 
```

在 javascript 中无法返回对对象成员的可分配引用，您必须使用如下函数：

```
function set(obj, str, val) {
    str = str.split(".");
    while (str.length > 1)
        obj = obj[str.shift()];
    return obj[str.shift()] = val;
}

var obj = { a: { b: 1, c : { d : 3, e : 4}, f: 5 } }
str = 'a.c.d'
set(obj, str, 99)
console.log(obj.a.c.d) // 99 
```

或使用`ref`上面给出的来获取对包含对象的引用，然后将`[]`运算符应用于它：

```
parts = str.split(/\.(?=[^.]+$)/)  // Split "foo.bar.baz" into ["foo.bar", "baz"]
ref(obj, parts[0])[parts[1]] = 99 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-06-07T16:30:57.727

类似于 thg435 的答案，但带有参数检查并支持其中一个祖先级别尚未定义或不是对象的嵌套级别。

```
setObjByString = function(obj, str, val) {
    var keys, key;
    //make sure str is a string with length
    if (!str || !str.length || Object.prototype.toString.call(str) !== "[object String]") {
        return false;
    }
    if (obj !== Object(obj)) {
        //if it's not an object, make it one
        obj = {};
    }
    keys = str.split(".");
    while (keys.length > 1) {
        key = keys.shift();
        if (obj !== Object(obj)) {
            //if it's not an object, make it one
            obj = {};
        }
        if (!(key in obj)) {
            //if obj doesn't contain the key, add it and set it to an empty object
            obj[key] = {};
        }
        obj = obj[key];
    }
    return obj[keys[0]] = val;
}; 
```

用法：

```
var obj;
setObjByString(obj, "a.b.c.d.e.f", "hello"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:21:15.460

If this `javascript` runs in a browser then you can access the object like this:

```
window['obj']['a']['b'] = 5 
```

So given the string `"obj.a.b"` you have to split the it by `.`:

```
var s = "obj.a.b"
var e = s.split(".")
window[e[0]][e[1]][e[2]] = 5 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-11T09:55:38.960

在 javascript 中无法返回对对象成员的可分配引用。您可以使用像这样的单行代码通过点符号为深层对象成员赋值。

```
new Function('_', 'val', '_.' + path + ' = val')(obj, value); 
```

在你的情况下：

```
var obj = { a : { b: 1, c: 2 } };

new Function('_', 'val', '_.a.b' + ' = val')(obj, 5); // Now obj.a.b will be equal to 5 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T15:29:34.770

```
var obj = { a : { b: 1, c: 2 } };
walkObject(obj,"a.b"); // 1

function walkObject( obj, path ){
  var parts = path.split("."), i=0, part;
  while (obj && (part=parts[i++])) obj=obj[part];
  return obj;
} 
```

或者，如果您喜欢简洁的代码：

```
function walkObject( o, path ){
  for (var a,p=path.split('.'),i=0; o&&(a=p[i++]); o=o[a]);
  return o;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-16T15:03:46.343

下面是一个简单的类包装器`dict`：

```
class Dots(dict):
    def __init__(self, *args, **kargs):
            super(Dots, self).__init__(*args, **kargs)

    def __getitem__(self, key):
            try:
                    item = super(Dots, self).__getitem__(key)
            except KeyError:
                    item = Dots()
                    self.__setitem__(key, item)

            return Dots(item) if type(item) == dict else item

    def __setitem__(self, key, value):
            if type(value) == dict: value = Dots(value)
            super(Dots, self).__setitem__(key, value)

    __getattr__ = __getitem__
    __setattr__ = __setitem__ 
```

例子：

```
>>> a = Dots()
>>> a.b.c = 123
>>> a.b.c
123
>>> a.b
{'c': 123}
>>> a
{'b': {'c': 123}} 
```

缺少的密钥会即时创建为空`Dots()`：

```
>>> if a.Missing: print "Exists"
...
>>> a
{'Missing': {}, 'b': {'c': 123}} 
```

# html - 如何将数据从一个jsp A转发到jsp B，然后将所有数据转发到最终的servlet？

> ID：10934669
> 
> 赞同：2
> 
> 时间：2012-06-07T15:13:48.963
> 
> 标签：html, jsp, servlets

我有两个 JSP 页面`A`和`B`一个 Servlet。

* * *

流程是这样的：

用户在A页填写一些信息

然后用户在B页填写一些其他信息

用户完成 B 后，他/她将单击一个按钮并将所有数据（来自 A 和 B）提交给 Servlet。

* * *

我应该如何设计这个？

我的计划是

在 A 的`next`按钮中，它实际上是一个`<a>`链接到 B 的 href 的标签。来自 A 的所有信息都应该通过该链接传递给 B。我不知道怎么做这一步。

在B的`finish`按钮中，是一个表单输入提交按钮。我不知道我是否可以或如何将 A 的数据添加到此表单中。

* * *

任何人都可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:28:45.880

在您的 A.jsp 中创建一个链接，例如：`<a href="B.jsp?param1=value1&param2=value2">Go to B</a>` 从 URL 传递您的参数。

在 B.jsp 中使用表达式语言来获取参数值：

```
<form action="FinalServlet" method="post">

   <input type="text" name="p" value="your value"/>

   <input type="hidden" name="p1" value="${param.param1}"/>
   <input type="hidden" name="p2" value="${param.param2}"/>

   .......

   <input type="submit" value="Finish"/>

</form> 
```

希望这可以帮助。

**编辑：**

如果要在 A.jsp 中使用带有输入字段的表单：

```
<form action="B.jsp" method="post">

   <input type="text" name="param1" value="value1"/>
   <input type="text" name="param2" value="value2"/>

   .......

   <input type="submit" value="Finish"/>

</form> 
```

您将使用相同的 EL 在 B.jsp 中接收参数。

# javascript - 丢失运行 javascript 的整个页面 DOM

> ID：10934678
> 
> 赞同：0
> 
> 时间：2012-06-07T15:14:10.610
> 
> 标签：javascript, jquery, dom

这个问题从这个问题继续：

[读取 url 并输出新的 javascript src](https://stackoverflow.com/questions/10932278/read-url-and-output-new-javascript-src)

我最新的代码是：

```
$(document).ready(function () {

        var oScript = document.createElement('script');
        oScript.type = 'text/javascript';
        oScript.src = 'converter.js';

        // most browsers
        oScript.onload = function () {
            $('#converter #form').load(renderConverter());
        } 

        // IE
        oScript.onreadystatechange = function () {
            if (this.readyState == 'complete') {
                $('#converter #form').load(renderConverter());
            }
        }

        document.body.appendChild(oScript);

}); 
```

问题在`.load(renderConverter());`. 它的作用是删除整个 DOM 并打印什么 renderConverter(); 要求它打印。

该函数`renderConverter();`使用以下内容打印 html：

`window.document.write(html);`

我改为：

`document.write(html)`但它做同样的事情。

如何强制它只在我运行回调的 div 内打印？div 是`#converter #form`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:17:51.393

`document.write`页面加载完成后无法使用。

您应该改用 jQuery DOM 操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:20:54.340

当文档关闭时（加载后），任何对`document.write()`隐式调用的调用`document.open()`（[docs](https://developer.mozilla.org/en/DOM/document.open)）。这会导致当前文档被完全清除以准备新的文档内容。

要操作元素的内容，请使用 DOM 操作，例如`innerHTML`or`appendChild`或使用 jQuery 的等效方法（因为您的代码显示您已经加载了 jQuery）。

# c# - Process.Start() 给定的对象引用未设置为对象的实例

> ID：10934679
> 
> 赞同：0
> 
> 时间：2012-06-07T15:14:14.480
> 
> 标签：c#, process

我进入了一个动态定义的循环，该函数将运行 onClick 控件。

功能如下：

```
 public static void TryOpenFile(string filename, EventHandler callback)
        {

                Process proc;
                proc = Process.Start(filename);

             if (callback != null)
                {
                    proc.EnableRaisingEvents = true;
                    proc.Exited += (a, b) =>
                        {
                            callback(a, b);
                        };
                }
} 
```

进而：

```
for(int i = 0; i < numberOfControls; i++)
{

            controlImg.SetFileToOpen(file, 
                delegate
                {
                    //exited!
                });

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:20:20.550

看起来您的文件名指向一个已经运行的进程。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)：

> **返回值**
> 
> 类型：System.Diagnostics.Process
> 
> 与流程资源关联的新流程组件，如果没有启动流程资源（例如，如果重用现有流程），则为**null 。**

**更新：**如果你的文件名是一个错误的文件名，它显然会抛出一个异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:20:27.883

[Process.Start 重载的文档](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)解释了正在发生的事情（强调我的）：

> 使用此重载通过指定其文件名来启动进程资源。重载将资源与新的 Process 组件相关联。**如果进程已经在运行，则不会启动额外的进程资源。**相反，现有的流程资源会被重用，并且不会创建新的流程组件。**在这种情况下，Start 不会返回新的 Process 组件，而是将 null 返回给调用过程。**

如果您使用 ShellExecute 使用它的关联来启动文件，而不是运行可执行文件，则可能不会启动新进程。例如，如果`filename`是（例如）“C:\Test.xls”，它可能会启动 Excel。但如果 Excel 已经在运行，它可能会在现有运行实例中打开文件，而不是启动新进程。在这种情况下， 的值`proc`将为空。

# c# - 我无法排除某些扩展程序

> ID：10934680
> 
> 赞同：0
> 
> 时间：2012-06-07T15:14:16.280
> 
> 标签：c#, asp.net

这是我的代码：

```
DirectoryInfo dirInfoWO = new DirectoryInfo( 
    Server.MapPath( "Clients/" + 
GetDistFolderName( (int)Session[ "Distid" ] ) + "/Work_Orders" ) );

ListViewWorkOrders.DataSource = dirInfoWO.GetFiles();
ListViewWorkOrders.DataBind(); 
```

`.db`这是列出具有我需要排除的扩展名的文件作为选项。我看过其他使用 LINQ 的答案。但我不知道如何让这些工作。

有没有人有一个容易理解的答案给我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:16:35.217

```
ListViewWorkOrders.DataSource = 
    dirInfoWO.GetFiles().Where(fInfo=> !fInfo.Name.EndsWith(".db")); 
```

或者

```
ListViewWorkOrders.DataSource = 
    dirInfoWO.GetFiles().Where(fInfo=> !fInfo.Extension == ".db"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:17:48.663

```
ListViewWorkOrders.DataSource = 
    dirInfoWO.GetFiles().Where(p => Path.GetExtension(p.Name) != ".db"); 
```

# linux - 如何修改我的 SP 从 Shibboleth IdP 获得的（标题案例）属性？

> ID：10934682
> 
> 赞同：1
> 
> 时间：2012-06-07T15:14:20.260
> 
> 标签：linux, authentication, ubuntu, shibboleth

我的 Shibboleth 身份提供者正在向我发送所有大写的用户名和姓氏。我无法控制 IdP 发送的内容，但我想阻止我的服务提供商上的应用程序显示每个人的名字，就好像他们在喊它一样。 

1.  在 SP（我可以控制的 Ubuntu Linux 服务器）上，我可以在收到的属性传递给我的应用程序之前修改它们吗？

2.  如果是这样，将收到的属性转换为标题大小写的最佳方法是什么？

# linux - 如何配置 Qt 以实现从 Linux 到 Windows 目标的交叉编译？

> ID：10934683
> 
> 赞同：86
> 
> 时间：2012-06-07T15:14:23.527
> 
> 标签：linux, qt, mingw, cross-compiling

我想使用 Linux x86_64 主机交叉编译 Windows x86_64 目标的 Qt 库（最终是我的应用程序）。我觉得我很接近，但我可能对这个过程的某些部分有一个根本的误解。

我首先在我的 Fedora 机器上安装所有 mingw 包，然后修改`win32-g++`qmake.conf 文件以适应我的环境。但是，我似乎被一些看似明显的 Qt 配置选项卡住了：`-platform`和`-xplatform`. Qt 文档说这`-platform`应该是主机架构（您正在编译的地方）并且`-xplatform`应该是您希望部署的目标平台。就我而言，我设置`-platform linux-g++-64`了`-xplatform linux-win32-g++`linux-win32-g++ 是我修改后的 win32-g++ 配置。

我的问题是，在使用这些选项执行配置后，我看到它调用了我系统的编译器而不是交叉编译器（x86_64-w64-mingw32-gcc）。如果我省略该`-xplatform`选项并设置`-platform`为我的目标规范（linux-win32-g++），它会调用交叉编译器，但是当它发现一些与 Unix 相关的函数未定义时会出错。

这是我最近尝试的一些输出：http: [//pastebin.com/QCpKSNev](http://pastebin.com/QCpKSNev)。

问题：

1.  当从 Linux 主机交叉编译 Qt for Windows 之类的东西时，*是否*应该调用本机编译器？也就是说，在交叉编译过程中，我们不应该*只*使用交叉编译器吗？`-xplatform`当我指定选项时，我不明白为什么 Qt 的配置脚本会尝试调用系统的本机编译器。

2.  如果我使用 mingw 交叉编译器，我什么时候必须处理规范文件？GCC 的规范文件对我来说仍然是一个谜，所以我想知道这里的一些背景是否会对我有所帮助。

3.  一般来说，除了在我的 qmake.conf 中指定交叉编译器之外，我还需要考虑什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-11-03T17:57:11.703

只需使用[M 跨环境 (MXE) 即可](http://mxe.cc/)。它消除了整个过程的痛苦：

*   得到它：

    ```
    $ git clone https://github.com/mxe/mxe.git 
    ```

*   安装[构建依赖项](http://mxe.cc/#requirements)

*   构建 Qt for Windows、它的依赖项和交叉构建工具；在具有良好互联网接入的快速机器上，这将需要大约一个小时；下载约500MB：

    ```
    $ cd mxe && make qt 
    ```

*   转到您的应用程序目录并将交叉构建工具添加到**PATH**环境变量中：

    ```
    $ export PATH=<mxe root>/usr/bin:$PATH 
    ```

*   运行 Qt Makefile 生成器工具，然后构建：

    ```
    $ <mxe root>/usr/i686-pc-mingw32/qt/bin/qmake && make 
    ```

*   您应该在 ./release 目录中找到二进制文件：

    ```
    $ wine release/foo.exe 
    ```

**一些注意事项**：

*   使用 MXE 存储库的 master 分支；它似乎得到了开发团队更多的喜爱。

*   输出是 32 位静态二进制文件，在 64 位 Windows 上运行良好。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-08-14T22:58:57.983

（这是@Tshepang 答案的更新，因为 MXE 自他的回答以来已经发展）

# 构建 Qt

您可以使用来控制目标机器和工具链（32 位或 64 位） ，而不是`make qt`用于构建 Qt 。`MXE_TARGETS`MXE 开始使用`.static`and`.shared`作为目标名称的一部分来显示您要构建的库类型。

```
# The following is the same as `make qt`, see explanation on default settings after the code block.
make qt MXE_TARGETS=i686-w64-mingw32.static   # MinGW-w64, 32-bit, static libs

# Other targets you can use:
make qt MXE_TARGETS=x86_64-w64-mingw32.static # MinGW-w64, 64-bit, static libs
make qt MXE_TARGETS=i686-w64-mingw32.shared   # MinGW-w64, 32-bit, shared libs

# You can even specify two targets, and they are built in one run:
# (And that's why it is MXE_TARGET**S**, not MXE_TARGET ;)
# MinGW-w64, both 32- and 64-bit, static libs
make qt MXE_TARGETS='i686-w64-mingw32.static x86_64-w64-mingw32.static' 
```

在@Tshepang 的原始答案中，他没有指定一个`MXE_TARGETS`，并且使用了默认值。在他写答案的时候，默认是`i686-pc-mingw32`，现在是`i686-w64-mingw32.static`。如果您明确设置`MXE_TARGETS`为`i686-w64-mingw32`, 省略`.static`，则会打印一条警告，因为现在不推荐使用此语法。如果您尝试将目标设置为`i686-pc-mingw32`，则会显示错误，因为 MXE 已删除对 MinGW.org 的支持（即 i686-pc-mingw32）。

# 跑步`qmake`

由于我们更改了`MXE_TARGETS`，该`<mxe root>/usr/i686-pc-mingw32/qt/bin/qmake`命令将不再起作用。现在，您需要做的是：

```
<mxe root>/usr/<TARGET>/qt/bin/qmake 
```

如果您没有指定`MXE_TARGETS`，请执行以下操作：

```
<mxe root>/usr/i686-w64-mingw32.static/qt/bin/qmake 
```

**更新：**现在是新的默认值`i686-w64-mingw32.static`

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-01-26T19:08:13.467

在 Linux 上为 Windows 交叉编译软件的另一种方法是 Archlinux 上的 MinGW-w64 工具链。它易于使用和维护，并提供最新版本的编译器和许多库。我个人觉得它比 MXE 更容易，而且它似乎更快地采用新版本的库。

首先，您需要一台基于 arch 的机器（虚拟机或 docker 容器就足够了）。它不一定是 Arch Linux，衍生产品也可以。我使用 Manjaro Linux。大多数 MinGW-w64 包在 Arch 官方存储库中不可用，但[在 AUR 中有很多](https://aur.archlinux.org/packages/?O=0&SeB=nd&K=mingw-w64&outdated=&SB=p&SO=d&PP=250&do_Search=Go)。Arch (Pacman) 的默认包管理器不支持直接从 AUR 安装，因此您需要安装和使用 AUR 包装器，如 yay 或 yaourt。然后安装 MinGW-w64 版本的 Qt5 和 Boost 库就像这样简单：

```
yay -Sy mingw-w64-qt5-base mingw-w64-boost
#yaourt -Sy mingw-w64-qt5-base mingw-w64-qt5-boost #if you use yaourt 
```

这还将安装 MinGW-w64 工具链 ( `mingw-w64-gcc`) 和其他依赖项。为 windows (x64) 交叉编译一个 Qt 项目就像这样简单：

```
x86_64-w64-mingw32-qmake-qt5
make 
```

[要部署您的](http://doc.qt.io/qt-5/windows-deployment.html)程序，您需要从`/usr/x86_64-w64-mingw32/bin/`. 例如，您通常需要复制`/usr/x86_64-w64-mingw32/lib/qt/plugins/platforms/qwindows.dll`到 `program.exe_dir/platforms/qwindows.dll`.

要获得 32 位版本，您只需使用它`i686-w64-mingw32-qmake-qt5`。基于 Cmake 的项目使用`x86_64-w64-mingw32-cmake`. 这种方法对我来说非常有效，是最容易设置、维护和扩展的。它也适用于持续集成服务。也有可用的[docker 图像](https://hub.docker.com/r/burningdaylight/mingw-arch)。

例如，假设我要构建 QNapi 字幕下载器 GUI。我可以分两步完成：

1.  启动 docker 容器：

```
sudo docker run -it burningdaylight/mingw-arch:qt /bin/bash 
```

2.  克隆并编译 QNapi

```
git clone --recursive 'https://github.com/QNapi/qnapi.git' 
cd qnapi/ 
x86_64-w64-mingw32-qmake-qt5
make 
```

就是这样！在许多情况下，这将是那么容易。将您自己的库添加到包存储库 (AUR) 也很简单。您需要[编写一个 PKBUILD 文件](https://wiki.archlinux.org/index.php/creating_packages)，该文件尽可能直观，例如，参见[mingw-w64-rapidjson](https://aur.archlinux.org/cgit/aur.git/tree/PKGBUILD?h=mingw-w64-rapidjson)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-09-12T23:26:56.940

好的，我想我已经弄清楚了。

部分基于[https://github.com/mxe/mxe/blob/master/src/qt.mk](https://github.com/mxe/mxe/blob/master/src/qt.mk)和[https://www.videolan.org/developers/vlc/contrib/src/qt4/rules.mak](https://www.videolan.org/developers/vlc/contrib/src/qt4/rules.mak)

似乎“最初”在您运行配置时（使用 -xtarget 等），它配置然后运行您的“主机”gcc 以构建本地二进制文件 ./bin/qmake

```
 ./configure -xplatform win32-g++ -device-option CROSS_COMPILE=$cross_prefix_here -nomake examples ... 
```

然后你运行正常的“make”它为mingw构建它

```
 make
  make install 
```

所以

1.  是的

2.  仅当您需要使用 msvcrt.dll（其默认值）以外的其他内容时。虽然我从未使用过其他任何东西，所以我不确定。

3.  [https://stackoverflow.com/a/18792925/32453](https://stackoverflow.com/a/18792925/32453)列出了一些配置参数。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-09-03T12:25:53.047

为了编译 Qt，必须运行它的`configure`脚本，指定主机平台`-platform`（例如`-platform linux-g++-64`，如果您使用 g++ 编译器在 64 位 linux 上构建）和目标平台`-xplatform`（例如`-xplatform win32-g++`，如果您要交叉编译到 windows ）。

我还添加了这个标志： `-device-option CROSS_COMPILE=/usr/bin/x86_64-w64-mingw32-` 它指定了我正在使用的工具链的前缀，它将在为 Windows 构建二进制文件的所有 makefile 中添加到“gcc”或“g++”之前。

最后，您在构建[icd](http://doc.qt.io/qt-4.8/activeqt-idc.html)时可能会遇到问题，这显然是用于向 Qt 添加 ActiveX 支持的东西。您可以通过将标志传递`-skip qtactiveqt`给配置脚本来避免这种情况。我从这个错误报告中得到了这个：[https ://bugreports.qt.io/browse/QTBUG-38223](https://bugreports.qt.io/browse/QTBUG-38223)

这是我使用的整个配置命令：

```
 cd qt_source_directory
    mkdir my_build
    cd my_build
    ../configure \
      -release \
      -opensource \
      -no-compile-examples \
      -platform linux-g++-64 \
      -xplatform win32-g++ \
      -device-option CROSS_COMPILE=/usr/bin/x86_64-w64-mingw32- \
      -skip qtactiveqt \
      -v 
```

至于你的问题：

1 - 是的。将调用本机编译器以构建构建过程中需要的一些工具。也许像 qconfig 或 qmake 这样的东西，但我不完全确定哪些工具，确切地说。

2 - 对不起。我不知道编译器 =/ 上下文中的规范文件是什么。但据我所知，你不必处理这个问题。

3 - 您可以在配置命令行中指定交叉编译器前缀，而不是在 qmake.conf 文件中指定，如上所述。idc 也有这个问题，我也提到过它的解决方法。

# ios - 从请求返回的 Facebook sdk iOS 图片为零

> ID：10934688
> 
> 赞同：1
> 
> 时间：2012-06-07T15:14:37.350
> 
> 标签：ios, facebook-graph-api

因此，在我提交到应用商店之前，在我接管的应用程序中，所有内容都可以从 Facebook 正常加载。然后我无法使用 Facebook 应用程序进行验证。所以我决定通过注释掉 Facebook.m 中的一些内容来强制用户使用对话框。以前的开发人员没有包含任何 .m 文件，而是使用包含 .a 文件的旧 sdk 版本。所以我决定使用较新的 sdk 版本并包含所有 .m 文件。现在的问题是在应用程序中发生了以下行为：

```
 [facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

成功加载用户名（当然是在登录时）并且：

```
 [facebook requestWithGraphPath:@"me/home" andDelegate:self]; 
```

成功加载提要项目数据。

然而，

```
NSString *path = [NSString stringWithFormat:@"%@/picture?type=normal", facebookFeedItem.fromId];
[facebook requestWithGraphPath:path andDelegate:self]; 
```

其中 fromId 是用户的 id，返回一个成功的请求，但对于照片数据返回一个 nil 值。

也是如此：

```
 NSString *path = [NSString stringWithFormat:@"%@/picture", feedItem.objectIdentifier];
 [facebook requestWithGraphPath:path andDelegate:self]; 
```

是否在版本中进行了一些会影响这一点的更改，或者我是否正在查看其他一些内部问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:41:42.057

我遇到了类似的问题，并得出结论认为这是 Facebook 实现 SDK 或服务器端的问题。获取图片的方法是使用 FQL 查询，然后按预期返回数据，实际上让您可以更好地控制想要返回的数据。这与执行 SQL 选择语句非常相似（并且实际上并没有变得非常复杂，因此如果您是新手，很容易上手..）

此处的文档：http: [//developers.facebook.com/docs/reference/fql/](http://developers.facebook.com/docs/reference/fql/)

您的代码将是这样的（例如，对于登录的用户个人资料图片）：

```
 NSString *fqlStatementForProfilePicture = @"SELECT pic FROM user WHERE uid=me()";

    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               fqlStatementForProfilePicture, @"query",nil];

    FBRequest *theRequest = [facebook requestWithMethodName:@"fql.query"
                                 andParams:params
                             andHttpMethod:@"GET"
                               andDelegate:self]; 
```

从这里开始，委托回调的行为方式与使用`[facebook requestWithGraphPath.....]`

# html - 跨浏览器对齐 td 中的文本和 td 中的按钮值

> ID：10934693
> 
> 赞同：1
> 
> 时间：2012-06-07T15:14:55.530
> 
> 标签：html, internet-explorer, google-chrome, button, internet-explorer-9

我希望定义 css 细节以对齐 td 中的纯文本和 td 中的按钮值文本，以便它们在任何浏览器类型中对齐，或者至少在大多数浏览器中对齐。

下面是我的试用以及在 IE9/8/7 和 Chrome 中的渲染差异。如您所见，给定的 html 在 IE9 中看起来不错，但 IE8/IE7 和 Chrome 是错误的。添加填充（直接在文本 td 中或添加到文本 td 中的 div 中）不会解决此问题，因为 IE9 会出错。

那么应该使用什么 css 定义来确保在所有浏览器中纯文本和按钮值文本正确对齐？

![IE9](../Images/96a42ad57508e55f083e365ea81f580f.png) ![IE8](../Images/e62045d9a4ba15a9c36e5175e8070022.png) ![IE7](../Images/e296de4b952c173435216980599497c8.png) ![铬合金](../Images/ca2c545cf0783e8bb7deb0e8c6e47683.png)

html:

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
    table {
        border: solid black 1px;
        border-collapse: collapse;
        padding: 0;
        border-spacing: 0;
    }

    td {
        border-style: dotted solid none none;
        border-color: black;
        border-width: 1px;
        padding-left: 5px;
        padding-right: 5px;
        padding-top: 0px;
        padding-bottom: 0px;
        font-style: normal;
        font-family: Verdana;
        font-size: 12px;
        vertical-align: top;
    }

    input.example {
        color: blue;
        background: white;
        padding-top:1px;
        padding-left:0px;
        border: 0px;
        outline:0;
        font-size: 12px;
        cursor: pointer;
    }
        </style>
    </head>

    <body>
      <p/>
      <table>
         <tbody>
            <tr>
               <td>EXAMPLE</td>
               <td><input type="button" class="example" value="EXAMPLE"></td>
            </tr>
            Chrome
         </tbody>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:22:18.587

就 TD 内部的对齐而言，最好的办法是使用`valign`TD 的属性。在 TD 标签内指定`valign="top"`，这样无论每个 TD 元素有多大，它都会一直贴在顶部。

至于其他对齐方式，我发现图像和按钮对齐对于跨浏览器支持来说很糟糕，但您也可以指定`vertical-align`css 属性。

前任：

```
img,input{
vertical-align: middle
} 
```

和

```
<td valign="top">EXAMPLE</td>
<td valign="top"><input type="button" class="example" value="EXAMPLE"></td> 
```

[http://www.w3schools.com/cssref/pr_pos_vertical-align.asp](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:25:50.077

为 Chrome 配置所有内容，然后为您的 IE CSS 类添加条件 CSS 语句怎么样？

```
<!--[if IE 7]>
<!--[if IE 8]>
<!--[if IE 9]> 
```

这应该可以完成工作，尽管它可能不是有史以来最好的优化方法。我记得在文本对齐方面有类似的问题，这对我有帮助。

抱歉，我将其放入答案中而不发表评论，但由于我的声誉，我仍然无法发表评论。

**编辑**
例如：

因为我不确定你应该分配什么_exact_parameters（你需要自己弄清楚），我只举一个虚拟的例子：

**内联**：

```
td {     
    padding-top: 0px;
    padding-top: 2px\0/; <!-- IE-8 only -->
} 
```

**针对特定的 IE-only 样式表**：

```
<!--[if lt IE 8]>
<link rel="stylesheet" type="text/css" href="your-stylesheet-for-ie7-and-down.css" />
<![endif]--> 
```

这里的问题是，有时它们会修复这些错误，然后您的条件语句不仅变得无用，而且还可能带来更多麻烦。所以我建议至少不要在那里放任何非常*激烈的*东西，这样如果他们修复了这些错误，你的页面就不会崩溃了。

这里有几个很好的链接，可以阅读更多关于条件 CSS 语句的信息： http:
[//css-tricks.com/how-to-create-an-ie-only-stylesheet/](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)
[http://webdesignerwall.com/tutorials/css-特定于互联网浏览器](http://webdesignerwall.com/tutorials/css-specific-for-internet-explorer)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:35:14.453

在某些浏览器中，试图将按钮设置为像超链接一样的样式实际上几乎是不可能的，因为它们在浏览器样式表中放置了如此多的样式垫片。如果您可以避免使用按钮，我会建议您这样做。

这样做的原因是除了 padding 和 margin 之外，浏览器还添加了其他样式，例如在 Firefox 中：

```
button, input[type="reset"], input[type="button"], input[type="submit"] {
    -moz-appearance: button;
    -moz-binding: none;
    -moz-box-sizing: border-box;
    -moz-user-select: none;
    line-height: normal;
    padding: 0 6px;
    text-align: center;
    text-shadow: none;
} 
```

而且您必须重置所有影响所有浏览器布局的所有内容 - 之后文本可能仍然不在正确的位置，因为按钮似乎仍然将文本推到低于您之后的位置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T16:33:07.483

某些浏览器中的按钮更高。没关系——不同的浏览器显示按钮的方式可能会有所不同。`vertical-align: top`在 TD 上可能很荣幸，但该按钮使您的表格行更高，这使得左侧单元格上的文本显示未对齐，因为它被推到顶部。至于IE7，我不知道为什么按钮文本这么低，但是嘿，它是MSIE，它不需要符合任何东西或根本工作。

如果`vertical-align: middle`您希望文本正确对齐，或者使用 line-height 和/或 padding 使每个人的行同样高，请使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T06:23:27.753

从 Ben 的建议开始，最终我找到了解决这个讨厌的小问题的最佳方法。首先，我尝试按原样遵循他的建议，但作为一个时尚版本：我尝试`vertical-align: top;`从 css td 中删除并添加`style="valign: top;"`到 td 元素。起初我认为这是要走的路，因为现在在 IE7/Chrome 中对齐是可以的，而在 IE8/IE9 中只有一点点对齐，但后来我意识到这`valign`是一个已弃用的属性和样式中不存在的子值属性。
因此，我不得不进一步研究，并开始做一些事后的 javascript，我在各种浏览器中调整 padding-top。我不得不做以下调整：

*   css input.example: padding-top 0px; 高度：14px；
*   IE7/quirks/Opera: 为所有之前的兄弟-td 设置属性 style.paddingTop 为 1px；
*   IE8/IE9：什么都不做
*   Firefox：对于所有以前的兄弟-td 的设置属性 style.paddingTop 到 2px；

html（请注意，Opera 和 Firefox 使用与 IE 不同的 DOM，以不同的方法来获取前一个兄弟）：

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.0//EN">
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
        <style type="text/css">
    table {
        border: solid black 1px;
        border-collapse: collapse;
        padding: 0;
        border-spacing: 0;
    }

    td {
        border-style: dotted solid none none;
        border-color: black;
        border-width: 1px;
        padding-left: 5px;
        padding-right: 5px;
        padding-top: 0px;
        padding-bottom: 0px;
        font-style: normal;
        font-family: Verdana;
        font-size: 12px;
        vertical-align: top;
    }

    input.example {
        color: blue;
        background: white;
        padding-top:0px;
        padding-left:0px;
        border: 0px;
        outline:0;
        font-size: 12px;
        cursor: pointer;
        height: 14px;
    }
        </style>
    </head>

    <body>
      <p/>
    <table>
     <tbody>
        <tr>
           <td>EXAMPLE</td>
           <td><input type="button" class="example" value="EXAMPLE"></td>
        </tr>
     </tbody>
    </table>
    <script type="text/javascript">
      // use personal custom javascript function to determine browser version
        switch (browser.version()) {
            case "MSIE 7.0":
                var elts = getElementsByClassName('example');
                for (var i=0; i < elts.length; i++) {
                    node = elts[i].parentNode;
                    while (node = node.previousSibling) {
                        node.style.paddingTop = "1px";
                    };
                }
                break;
            case "Opera/9.80":
                var elts = getElementsByClassName('example');
                for (var i=0; i < elts.length; i++) {
                    node = elts[i].parentNode;
                    while (node = node.previousElementSibling) {
                        node.style.paddingTop = "1px";
                    };
                }
                break;
            case "Firefox/10.0":
                var elts = getElementsByClassName('example');
                for (var i=0; i < elts.length; i++) {
                    node = elts[i].parentNode;
                    while (node = node.previousElementSibling) {
                        node.style.paddingTop = "2px";
                    };
                }
                break;
            default:
                // do nothing
        }
    </script>
   </body>
</html> 
```

# nginx - /etc/nginx/nginx.conf:4 中的未知指令“服务器”

> ID：10934705
> 
> 赞同：15
> 
> 时间：2012-06-07T15:15:42.060
> 
> 标签：nginx

使用 nginx/0.7.65 我在第 4 行收到此错误。为什么无法识别`server`？

```
#### CHAT_FRONT ####

server {
  listen 7000 default deferred;
  server_name example.com;
  root /home/deployer/apps/chat_front/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
}

#### CHAT_STORE ####

server {
  listen 7002 default deferred;
  server_name store.example.com;
  root /home/deployer/apps/chat_store/current/public;

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
}

#### LOGIN ####

server {
  listen 7004 default deferred;
  server_name login.example.com;
  root /home/deployer/apps/login/current/public;

  location ^~ /assets/ {
    gzip_static on;
    expires max;
    add_header Cache-Control public;
  }

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
}

#### PERMISSIONS ####

server {
  listen 7006 default deferred;
  server_name permissions.example.com;
  root /home/deployer/apps/permissions/current/public;

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
}

#### SEARCH ####

server {
  listen 7008 default deferred;
  server_name search.example.com;
  root /home/deployer/apps/search/current/public;

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
}

#### ANALYTICS ####

server {
  listen 7010 default deferred;
  server_name analytics.example.com;
  root /home/deployer/apps/analytics/current/public;

  error_page 500 502 503 504 /500.html;
  client_max_body_size 4G;
  keepalive_timeout 10;
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-07T15:21:07.330

The `server` directive must be contained in the context of `http` module. Additionally you are missing top-level events module, which has one obligatory setting, and a bunch of stanzas which are to be in the http module of your config. While [nginx documentation](http://wiki.nginx.org/FullExample) is not particularly helpful on creating config from scratch, there are [working examples](http://wiki.nginx.org/Configuration) there.

Source: [nginx documentation on server directive](http://wiki.nginx.org/HttpCoreModule#server)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-06-17T10:34:03.747

添加顶级条目解决了这个问题：

```
events {  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-20T16:26:55.153

尝试调整行尾和配置文件的编码。在我的情况下，需要 ANSI 编码和可能的“Linux 风格”行尾（仅`LF`符号，而不是**符号**）。`CR``LF`

我知道这是一个相当古老的问题。然而，接受答案的建议（`server`指令必须包含在`http`模块的上下文中）可能会造成混淆，因为有很多示例（在*Nginx*网站上和[本*Microsoft*指南](https://docs.microsoft.com/en-us/aspnet/core/host-and-deploy/linux-nginx?view=aspnetcore-2.2)中）其中`server`指令**不**包含在上下文中的`http`模块。

**可能sd z**的答案（“我重写了 *.conf 文件并且它工作了”）来自相同的原因：有一个**.config**文件的编码或行结尾不正确，在文件被重写后更正了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-04T02:57:34.310

我遇到了与 Hoborg 类似的问题，他的评论为我指明了正确的方向。就我而言，我从[另一篇文章](https://stackoverflow.com/questions/57243563/try-files-not-working-with-nginx-docker-image)中复制并粘贴了一个配置，用于托管 Angular 应用程序的 docker 容器。这是默认配置加上额外的一行。但是，当我粘贴时，粘贴的开头包含了一些额外的字符（EF BB BF）。我使用的 IDE（visual studio）没有显示任何内容来指示这些额外的字节，因此它们的存在并不明显。删除这些额外的字节解决了这个问题，我使用十六进制编辑器 (HxD) 解决了这个问题，因为它当时很方便。在我的情况下，windows 样式的行尾似乎不是问题。

默认配置`server`作为最外层的指令，所以最上面的答案和错误消息确实令人困惑。这与我最初的情况相同，并且原始文件（没有 3 个额外字节）没有引发错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-02T09:22:36.550

我重写了 *.conf 文件并且它起作用了。

# c# - 在休眠中行为不端

> ID：10934707
> 
> 赞同：1
> 
> 时间：2012-06-07T15:15:57.337
> 
> 标签：c#, nhibernate

在我的应用程序中，我使用的是 nhibernate 2.2。我有一个名为 ReportMaster 的表。在此表中，它有一个名为 JOB_NUM 的字段。该文件的数据如下

```
JOB_NUM
CT-2012-0072
GEN-2012-0003
UKNDT-2012-0001
CT-2012-0076-EN 
```

在我的属性类中，这被映射到 JobNumber 字段。我的问题是，当我将查询用作 {JobNumber in (CT-2012-0072)} 或 {JobNumber in (UKNDT-2012-0001)} 时，它给了我记录。但是当我将查询用作 {JobNumber in (GEN-2012-0003)} 时，它不会返回记录。

有人对这种不当行为有想法吗？“GEN”是一个休眠关键字吗？我也试过 {JobNumber in ("GEN-2012-0003")} 。它也不返回记录我使用的代码如下：

```
 ArrayList searchValues = new ArrayList();
            string jobNumber = "CT-2012-0072";
            searchValues.Add(jobNumber);

            ArrayList reportColumns = new ArrayList();

            reportColumns.Add("JobNumber");
            IList reports = connection.LoadListByColumnFilter<OutageReport>("JobNumber", searchValues);

       public IList LoadListByColumnFilter<T>(string column, ArrayList values)
    {
        if (session == null)
        {
            return null;
        }
        else
        {
            IList list = null;
            ICriteria criteria = session.CreateCriteria(typeof(T));
            criteria.Add(Expression.In(column, values));
            list = criteria.List();
            return list;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:51:39.417

如果代码对某个值起作用，那么它似乎是正确的。我的猜测是没有返回*GEN-2012-0003*记录，因为数据库内容不是它看起来的样子。例如：

*   数据库列包含前导或尾随空格
*   数据库列包含不可打印的字符（如 CR 或 LF）
*   其中一个字符不是它看起来的样子（例如，零实际上是字母“O”，或者看起来像减号的东西是一个类似的 unicode 字符）

我建议打开休眠 SQL 日志记录并检查生成的 SQL 语句。然后复制 SQL 工具中的语句并尝试在那里执行它，看看它是否返回记录。如果不是，那么这不是休眠问题。

# php - 截断中文文本

> ID：10934711
> 
> 赞同：7
> 
> 时间：2012-06-07T15:16:21.857
> 
> 标签：php, character-encoding, truncate, substr, ucfirst

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T15:30:48.997

而不是`substr`使用`mbstring`函数：

```
echo anchor(
    'projects/' . $rs->url_project_title . '/' . $rs->project_id,
    mb_substr(ucfirst($rs->project_title), 0, 26), 
    'style="text-decoration:none;"'
); 
```

如果你没有成功，那么 PHP 可能没有检测到字符串编码，因此请提供正确的编码[`mb_substr()`](http://php.net/mb_substr)：

```
// PHP uses internal encoding mb_internal_encoding()
echo mb_substr($string, 0, 26);
// you specify the encoding - in the case you know in which encoding the input comes
echo mb_substr($string, 0, 26, 'UTF-8');
// PHP tries to detect the encoding
echo mb_substr($string, 0, 26, mb_detect_encoding($string)); 
```

另请参阅[`mb_detect_encoding()`](http://php.net/mb_detect_encoding)以获取更多信息。

希望这可以帮助。

# r - 处理数据框列表的列表

> ID：10934719
> 
> 赞同：0
> 
> 时间：2012-06-07T15:16:56.727
> 
> 标签：r

```
Losses
[[1]]
[[1]]$`1`
   YearID Category       Loss
1       2    US HU  826.79527
2       4    US HU  357.37926
3       5    US HU  148.71542
4       5    US HU  654.44473
5       8    US HU   81.74428
6       8    US HU   60.27192
7       8    US HU   63.59582
8      10    US HU  778.97650
9      10    US HU 1498.90801
10     11    US HU   66.72708
11     11    US HU  123.25430
12     11    US HU   70.87750
13     11    US HU  272.57985
14     12    US HU   77.14205
15     13    US HU  305.00484
16     16    US HU  577.17381
17     16    US HU  137.12441
18     20    US HU   53.29270
19     20    US HU  123.86174

[[1]]$`2`
   YearID Category        Loss
1       2    US EQ   2.6895238
2       9    US EQ  42.7690970
3       9    US EQ  10.7816904
4      11    US EQ   2.3136544
5      12    US EQ   0.4897316
6      13    US EQ   1.0560520
7      15    US EQ 111.0338641
8      17    US EQ 123.7145577
9      19    US EQ   8.1518931
10     19    US EQ   0.3099158

[[1]]$`3`
  YearID Category       Loss
1      2    JP EQ  0.2920082
2      5    JP EQ 64.6424343
3      7    JP EQ  0.6097201
4      7    JP EQ  6.7342614
5     10    JP EQ  2.9948139
6     10    JP EQ 12.8309552
7     15    JP EQ  0.2373154
8     16    JP EQ  1.6869774
9     20    JP EQ  1.3283421

[[2]]
[[2]]$`1`
   YearID Category       Loss
1      15    US HU  107.63285
2      16    US HU  192.89825
3      19    US HU  215.81496
4       2    US HU  826.79527
5       4    US HU  357.37926
6       5    US HU  148.71542
7       5    US HU  654.44473
8       8    US HU   81.74428
9       8    US HU   60.27192
10      8    US HU   63.59582
11     10    US HU  778.97650
12     10    US HU 1498.90801
13     11    US HU   66.72708
14     11    US HU  123.25430
15     11    US HU   70.87750
16     11    US HU  272.57985
17     12    US HU   77.14205
18     13    US HU  305.00484
19     16    US HU  577.17381
20     16    US HU  137.12441
21     20    US HU   53.29270
22     20    US HU  123.86174

[[2]]$`2`
   YearID Category        Loss
1       5    US EQ   0.6082396
2      10    US EQ 159.8625057
3       2    US EQ   2.6895238
4       9    US EQ  42.7690970
5       9    US EQ  10.7816904
6      11    US EQ   2.3136544
7      12    US EQ   0.4897316
8      13    US EQ   1.0560520
9      15    US EQ 111.0338641
10     17    US EQ 123.7145577
11     19    US EQ   8.1518931
12     19    US EQ   0.3099158

[[2]]$`3`
   YearID Category       Loss
1       7    JP EQ  0.3618008
2      12    JP EQ 11.0977981
3       2    JP EQ  0.2920082
4       5    JP EQ 64.6424343
5       7    JP EQ  0.6097201
6       7    JP EQ  6.7342614
7      10    JP EQ  2.9948139
8      10    JP EQ 12.8309552
9      15    JP EQ  0.2373154
10     16    JP EQ  1.6869774
11     20    JP EQ  1.3283421

[[3]]
[[3]]$`1`
   YearID Category       Loss
1       4    US HU   72.52669
2       8    US HU  270.71636
3      10    US HU  132.25629
4      10    US HU   49.67546
5      11    US HU  134.83450
6      12    US HU  116.10639
7      18    US HU  409.75564
8      19    US HU  268.86671
9      20    US HU  576.44159
10     15    US HU  107.63285
11     16    US HU  192.89825
12     19    US HU  215.81496
13      2    US HU  826.79527
14      4    US HU  357.37926
15      5    US HU  148.71542
16      5    US HU  654.44473
17      8    US HU   81.74428
18      8    US HU   60.27192
19      8    US HU   63.59582
20     10    US HU  778.97650
21     10    US HU 1498.90801
22     11    US HU   66.72708
23     11    US HU  123.25430
24     11    US HU   70.87750
25     11    US HU  272.57985
26     12    US HU   77.14205
27     13    US HU  305.00484
28     16    US HU  577.17381
29     16    US HU  137.12441
30     20    US HU   53.29270
31     20    US HU  123.86174

[[3]]$`2`
   YearID Category        Loss
1       6    US EQ   3.6683023
2      10    US EQ   4.6943200
3      11    US EQ   2.6239743
4      13    US EQ   1.3989827
5      13    US EQ   0.2399834
6      19    US EQ   5.8900987
7       5    US EQ   0.6082396
8      10    US EQ 159.8625057
9       2    US EQ   2.6895238
10      9    US EQ  42.7690970
11      9    US EQ  10.7816904
12     11    US EQ   2.3136544
13     12    US EQ   0.4897316
14     13    US EQ   1.0560520
15     15    US EQ 111.0338641
16     17    US EQ 123.7145577
17     19    US EQ   8.1518931
18     19    US EQ   0.3099158

[[3]]$`3`
   YearID Category        Loss
1       1    JP EQ   0.9199341
2       2    JP EQ   2.7294618
3       7    JP EQ 224.4266519
4      11    JP EQ   0.3948219
5      14    JP EQ   0.7592534
6      15    JP EQ   1.2838320
7       7    JP EQ   0.3618008
8      12    JP EQ  11.0977981
9       2    JP EQ   0.2920082
10      5    JP EQ  64.6424343
11      7    JP EQ   0.6097201
12      7    JP EQ   6.7342614
13     10    JP EQ   2.9948139
14     10    JP EQ  12.8309552
15     15    JP EQ   0.2373154
16     16    JP EQ   1.6869774
17     20    JP EQ   1.3283421 
```

-

```
list(structure(list(`1` = structure(list(YearID = c(2, 4, 5, 
5, 8, 8, 8, 10, 10, 11, 11, 11, 11, 12, 13, 16, 16, 20, 20), 
    Category = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), class = "factor", .Label = "US HU"), 
    Loss = c(826.795273886473, 357.379257145211, 148.715422723442, 
    654.444727907641, 81.7442792092622, 60.2719188870034, 63.5958204662617, 
    778.976495232166, 1498.90801288032, 66.7270779301846, 123.254304652346, 
    70.8774963289464, 272.579854338023, 77.1420493089197, 305.004836528708, 
    577.173809957773, 137.124412010961, 53.2926961871035, 123.861739643341
    )), .Names = c("YearID", "Category", "Loss"), row.names = c(NA, 
-19L), class = "data.frame"), `2` = structure(list(YearID = c(2, 
9, 9, 11, 12, 13, 15, 17, 19, 19), Category = structure(c(1L, 
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), class = "factor", .Label = "US EQ"), 
    Loss = c(2.68952379748490, 42.7690970302631, 10.7816904147645, 
    2.31365444951509, 0.489731609222403, 1.05605200325909, 111.033864050878, 
    123.714557672790, 8.15189312989583, 0.309915764784634)), .Names = c("YearID", 
"Category", "Loss"), row.names = c(NA, -10L), class = "data.frame"), 
    `3` = structure(list(YearID = c(2, 5, 7, 7, 10, 10, 15, 16, 
    20), Category = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L), class = "factor", .Label = "JP EQ"), Loss = c(0.292008160090971, 
    64.6424342762608, 0.609720084708476, 6.73426138743874, 2.99481387294425, 
    12.8309551549701, 0.237315428236897, 1.68697744368254, 1.32834211322205
    )), .Names = c("YearID", "Category", "Loss"), row.names = c(NA, 
    -9L), class = "data.frame")), .Names = c("1", "2", "3")), 
    structure(list(`1` = structure(list(YearID = c(15, 16, 19, 
    2, 4, 5, 5, 8, 8, 8, 10, 10, 11, 11, 11, 11, 12, 13, 16, 
    16, 20, 20), Category = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L), .Label = "US HU", class = "factor"), Loss = c(107.632845241511, 
    192.898254968436, 215.814957575895, 826.795273886473, 357.379257145211, 
    148.715422723442, 654.444727907641, 81.7442792092622, 60.2719188870034, 
    63.5958204662617, 778.976495232166, 1498.90801288032, 66.7270779301846, 
    123.254304652346, 70.8774963289464, 272.579854338023, 77.1420493089197, 
    305.004836528708, 577.173809957773, 137.124412010961, 53.2926961871035, 
    123.861739643341)), .Names = c("YearID", "Category", "Loss"
    ), row.names = c(NA, 22L), class = "data.frame"), `2` = structure(list(
        YearID = c(5, 10, 2, 9, 9, 11, 12, 13, 15, 17, 19, 19
        ), Category = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 
        1L, 1L, 1L, 1L, 1L), .Label = "US EQ", class = "factor"), 
        Loss = c(0.60823959378077, 159.862505662270, 2.68952379748490, 
        42.7690970302631, 10.7816904147645, 2.31365444951509, 
        0.489731609222403, 1.05605200325909, 111.033864050878, 
        123.714557672790, 8.15189312989583, 0.309915764784634
        )), .Names = c("YearID", "Category", "Loss"), row.names = c(NA, 
    12L), class = "data.frame"), `3` = structure(list(YearID = c(7, 
    12, 2, 5, 7, 7, 10, 10, 15, 16, 20), Category = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L), .Label = "JP EQ", class = "factor"), 
        Loss = c(0.36180083325003, 11.0977980698104, 0.292008160090971, 
        64.6424342762608, 0.609720084708476, 6.73426138743874, 
        2.99481387294425, 12.8309551549701, 0.237315428236897, 
        1.68697744368254, 1.32834211322205)), .Names = c("YearID", 
    "Category", "Loss"), row.names = c(NA, 11L), class = "data.frame")), .Names = c("1", 
    "2", "3")), structure(list(`1` = structure(list(YearID = c(4, 
    8, 10, 10, 11, 12, 18, 19, 20, 15, 16, 19, 2, 4, 5, 5, 8, 
    8, 8, 10, 10, 11, 11, 11, 11, 12, 13, 16, 16, 20, 20), Category = structure(c(1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L
    ), .Label = "US HU", class = "factor"), Loss = c(72.5266949028921, 
    270.716360695826, 132.256285323478, 49.6754599765934, 134.834496124065, 
    116.106394912601, 409.755636985602, 268.866707090942, 576.441585784339, 
    107.632845241511, 192.898254968436, 215.814957575895, 826.795273886473, 
    357.379257145211, 148.715422723442, 654.444727907641, 81.7442792092622, 
    60.2719188870034, 63.5958204662617, 778.976495232166, 1498.90801288032, 
    66.7270779301846, 123.254304652346, 70.8774963289464, 272.579854338023, 
    77.1420493089197, 305.004836528708, 577.173809957773, 137.124412010961, 
    53.2926961871035, 123.861739643341)), .Names = c("YearID", 
    "Category", "Loss"), row.names = c(NA, 31L), class = "data.frame"), 
        `2` = structure(list(YearID = c(6, 10, 11, 13, 13, 19, 
        5, 10, 2, 9, 9, 11, 12, 13, 15, 17, 19, 19), Category = structure(c(1L, 
        1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
        1L, 1L, 1L), .Label = "US EQ", class = "factor"), Loss = c(3.66830233362805, 
        4.69432002882382, 2.62397430771946, 1.39898268940725, 
        0.239983432670597, 5.89009873171407, 0.60823959378077, 
        159.862505662270, 2.68952379748490, 42.7690970302631, 
        10.7816904147645, 2.31365444951509, 0.489731609222403, 
        1.05605200325909, 111.033864050878, 123.714557672790, 
        8.15189312989583, 0.309915764784634)), .Names = c("YearID", 
        "Category", "Loss"), row.names = c(NA, 18L), class = "data.frame"), 
        `3` = structure(list(YearID = c(1, 2, 7, 11, 14, 15, 
        7, 12, 2, 5, 7, 7, 10, 10, 15, 16, 20), Category = structure(c(1L, 
        1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
        1L, 1L), .Label = "JP EQ", class = "factor"), Loss = c(0.91993405093065, 
        2.72946175093358, 224.426651937984, 0.394821850501270, 
        0.75925338029943, 1.28383204511935, 0.36180083325003, 
        11.0977980698104, 0.292008160090971, 64.6424342762608, 
        0.609720084708476, 6.73426138743874, 2.99481387294425, 
        12.8309551549701, 0.237315428236897, 1.68697744368254, 
        1.32834211322205)), .Names = c("YearID", "Category", 
        "Loss"), row.names = c(NA, 17L), class = "data.frame")), .Names = c("1", 
    "2", "3"))) 
```

-

```
InputList = list(c(1.5, 1.2), c(0.9, 0.8), c(1, 1)) 
```

的长度`InputList`将始终与 的长度相同`Losses`。即会有相同的没有。`InputList`的as 长度中的向量`Losses`。

我必须首先`InputList`根据向量的第一个元素按升序排列，即

```
InputList = list(c(0.9, 0.8), c(1, 1),c(1.5, 1.2)) 
```

现在，我必须将 ie 的第一个向量的第二个元素乘以`InputList`0.8 与第一个损失列表中所有数据帧的损失列，即损失 [[1]]

同样将 1 与 Losses[[2]] 中所有数据帧的 Loss 列相乘

并且我希望将结果作为类似于原始列表损失的列表，只是每个数据帧的损失列相应地膨胀或缩小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:11:41.513

Q1：“我必须首先根据向量的第一个元素按升序排列 InputList，即

```
 newInput <- InputList[order(sapply(InputList, "[[", 1))]
 newInput
[[1]]
[1] 0.9 0.8

[[2]]
[1] 1 1

[[3]]
[1] 1.5 1.2 
```

Q2：“现在，我必须将 InputList 的第一个向量的第二个元素，即这里它是 0.8 与第一个损失列表中所有数据帧的损失列，即损失 [[1]] 相乘，同样将 1 与Losses[[2]]中所有数据帧的Loss列"

（我假设这意味着 Losses[[1]] 中的所有三个数据帧都需要将其 Loss 列乘以 0.9。）

这将返回一个 3 x 3 的数据帧矩阵，其损失列乘以所需的因子：

```
ddapply <- function(dfrmlist,fac){ 
         lapply(dfrmlist, 
             function(dfrm){ dfrm[, "Loss"] <- dfrm[ ,"Loss"]*fac; return(dfrm)})}
mapply( ddapply,  Losses, sapply(newInput, "[[", 2) ) 
```

由于 R 矩阵中元素的列主要排序，第一组数据帧值位于第一列，而不是第一行。所以这是损失的第一个元素中的第二个 data.frame：

```
> mapply( ddapply,  Losses, sapply(newInput, "[[", 2) )[2,1]

$`2`
   YearID Category       Loss
1       2    US EQ  2.1516190
2       9    US EQ 34.2152776
3       9    US EQ  8.6253523
4      11    US EQ  1.8509236
5      12    US EQ  0.3917853
6      13    US EQ  0.8448416
7      15    US EQ 88.8270912
8      17    US EQ 98.9716461
9      19    US EQ  6.5215145
10     19    US EQ  0.2479326 
```

# c++ - A* pathfinding slow

> ID：10934722
> 
> 赞同：0
> 
> 时间：2012-06-07T15:17:11.873
> 
> 标签：c++, performance, algorithm, maze

I am currently working on a A* search algorithm. The algorithm would just be solving text file mazes. I know that the A* algorithm is supposed to be very quick in finding the finish. Mine seems to take 6 seconds to find the path in a 20x20 maze with no walls. It does find the finish with the correct path it just takes forever to do so.

If I knew which part of code was the problem I would just post that but I really have no idea what is going wrong. So here is the algorithm that I use...

```
 while(!openList.empty()) {  
    visitedList.push_back(openList[index]);
    openList.erase(openList.begin() + index);

    if(currentCell->x_coor == goalCell->x_coor && currentCell->y_coor == goalCell->y_coor)          
    }
        FindBestPath(currentCell);
        break;
    }

    if(map[currentCell->x_coor+1][currentCell->y_coor] != wall)
    {
    openList.push_back(new SearchCell(currentCell->x_coor+1,currentCell->y_coor,currentCell));
    }
    if(map[currentCell->x_coor-1][currentCell->y_coor] != wall) 
    {
        openList.push_back(new SearchCell(currentCell->x_coor-1,currentCell->y_coor,currentCell));
    }
    if(map[currentCell->x_coor][currentCell->y_coor+1] != wall) 
    {
        openList.push_back(new SearchCell(currentCell->x_coor,currentCell->y_coor+1,currentCell));
    }
    if(map[currentCell->x_coor][currentCell->y_coor-1] != wall) 
    {
        openList.push_back(new SearchCell(currentCell->x_coor,currentCell->y_coor-1,currentCell));
    }

    for(int i=0;i<openList.size();i++) {
        openList[i]->G = openList[i]->parent->G + 1;
        openList[i]->H = openList[i]->ManHattenDistance(goalCell);
    }

    float bestF = 999999;
    index = -1;

    for(int i=0;i<openList.size();i++) {
        if(openList[i]->GetF() < bestF) {
            for(int n=0;n<visitedList.size();n++) {
                if(CheckVisited(openList[i])) {
                    bestF = openList[i]->GetF();
                    index = i;
                }
            }
        }
    }
    if(index >= 0) {
        currentCell = openList[index];
    }
} 
```

I know this code is messy and not the most efficient way to do things but I think it should still be faster then what it is. Any help would be greatly appreciated.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:40:14.153

您的 20x20 迷宫没有墙壁，因此有许多相同长度的路线。事实上，我估计有数万亿条等效路线。考虑到这一点，它似乎并没有那么糟糕。

当然，由于您的启发式算法看起来很完美，您应该从排除启发式预测的路线与迄今为止已知的最佳路线一样长的*路线中获得很大的好处。*（如果您的启发式方法正确，这是安全的，即永远不会高估剩余距离）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:53:40.907

`openList.erase``for(int i=0;i<openList.size();i++)`是 O(n)，并且由于调用而以 O(n^2)开头的 for 循环`CheckVisited`- 这些在每次迭代时都被调用，从而使您的整体算法为 O(n^3)。A**应该*是 O(n log n)。

* * *

尝试更改`openList`为应有的优先级队列，并`visitedList`更改为哈希表。`for`然后可以将整个循环替换为`dequeue`- 确保在入队`visitedList.Contains(node)` *之前*检查 if ！

此外，每次迭代都不需要`ManHattenDistance`为每个节点重新计算，因为它永远不会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T16:57:03.040

这是一个很大的提示。

如果你找到两条通向同一个单元格的路径，你总是可以扔掉较长的一条。如果有平局，您可以扔掉第二条以到达那里。

如果你实现了这一点，没有其他优化，搜索将变得非常快。

**其次，如果当前单元格的长度加上启发式超过**当前单元格的长度加上任何其他节点的启发式，则 A* 算法应该只打扰回溯。如果你实现它，那么它应该直接找到一个路径并停止。为方便起见，您需要将路径存储在优先级队列中（通常使用堆实现），而不是向量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:54:11.050

你不是经常回溯吗？

当当前最佳解决方案变得比另一个先前访问的路线更差时，A* 算法会回溯。在您的情况下，由于没有墙，所有路线都很好并且永不消亡（正如 MSalters 正确指出的那样，其中有几条路线）。当您迈出一步时，您的路线会变得比其他所有短一步的路线都差。

如果这是真的，这可能会解释您的算法所花费的时间。

# c++ - Convert STL map into a struct

> ID：10934723
> 
> 赞同：2
> 
> 时间：2012-06-07T15:17:23.900
> 
> 标签：c++, stl, map, struct

I have a `std::map<string, double>` whose members look something like:

```
X = [{"N", 200}, {"sigma", 1.0}, {"T", .2}] 
```

Now, given the struct `foo Y`:

```
struct foo {
    int N;
    double T;
}; 
```

Can I programmatically map the key/value pairs `X -> Y` *without writing a custom class for each `X -> Y` type mapping*? Note that:

1.  `X["sigma"]` is not in `Y`, i.e. the mapping is not necessarily one-to-one
2.  The type of `Y.N` is an int while `X["N"]` is a double.

I suspect the answer is no, unless some trickery is done at compile time.

**Edit:** It may not be clear what I'm looking for. A pseudo-code version for this example would look something like:

```
if("N" in X) -> Y.N = X["N"];
if("T" in X) -> Y.T = X["T"]; 
```

Or programmatically:

```
for key in Y:
    if (key in X) -> Y.key = X[key] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:32:36.047

不，C++ 没有反射的概念。在编译时，`"foo::N"`不再有字符串。编译器已将`foo::N`源代码中的所有出现转换为对象内的 0 字节偏移量`Foo`。此外，您不能在编译时枚举类成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:52:07.807

您想根据地图元素中的*键值*（这是一个*字符串*）在结构类型的对象中设置一个*字段。*所以，不，它不能在编译时完成。

# c# - Making an eraser in WPF

> ID：10934724
> 
> 赞同：1
> 
> 时间：2012-06-07T15:17:26.277
> 
> 标签：c#, wpf

I've started to make a painting program in WPF using an inkpresenter, but I'm starting to doubt the approach. I am implementing the eraser and realise if I delete parts of the strokes the precision will be really bad. I do not want to delete a whole part of the stroke if someone just wants to delete one pixel of a stroke with width 10\.

Do I keep the inkPresenter and just render to a writeablebitmap whenever I need pixels, and then continue with a new inkPresenter on top of that bitmap? Or is there a better approach to making a painting program in wpf? Should I forget about wpf and go back to gdi+ ? I'm liking the performance but not having direct access to pixels is really bugging me.

# python - Y 轴和第一个 X 刻度之间的间距

> ID：10934735
> 
> 赞同：2
> 
> 时间：2012-06-07T15:17:56.200
> 
> 标签：python, matplotlib

Matplotlib 新手在这里。

我有以下代码：

```
from pylab import figure, show
import numpy

fig = figure()
ax = fig.add_subplot(111)

plot_data=[1.7,1.7,1.7,1.54,1.52]

xdata = range(len(plot_data))

labels = ["2009-June","2009-Dec","2010-June","2010-Dec","2011-June"]

ax.plot(xdata,plot_data,"b-")

ax.set_xticks(range(len(labels)))
ax.set_xticklabels(labels)

ax.set_yticks([1.4,1.6,1.8])

fig.canvas.draw()

show() 
```

当您运行该代码时，生成的图表将包含第一个刻度标签（2009-6 月）和原点。如何让图表移动以使其更具可读性？我试图将虚拟数据放入，但随后 Matplotlib（正确）将其视为数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T19:03:44.160

在 x 和 y 轴上添加两个限制以稍微移动刻度标签。

```
# grow the y axis down by 0.05
ax.set_ylim(1.35, 1.8)
# expand the x axis by 0.5 at two ends
ax.set_xlim(-0.5, len(labels)-0.5) 
```

结果是

![在此处输入图像描述](../Images/7322250af30183ef7d474ce28f05c6a9.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T19:13:32.907

因为刻度标签是文本对象，您可以更改它们的对齐方式。但是，要访问文本属性，您需要通过该`set_yticklabels`函数。所以添加以下行：

`ax.set_yticklabels([1.4,1.6,1.8],va="bottom")`

在你的`set_yticks`电话之后。或者，如果您直接通过 pylab 库，而不是通过轴对象访问函数，您可以将其设置在一行中：

`pylab.yticks([1.4,1.6,1.8],va="bottom")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:34:59.743

我建议更改 Y 轴限制：

```
ax.set_ylim([1.2, 1.8]) 
```

# c++ - 从 BYTE 数组中读取一个 32 位整数。VC++

> ID：10934736
> 
> 赞同：0
> 
> 时间：2012-06-07T15:17:58.930
> 
> 标签：c++, visual-c++

我创建了一个包含图像像素数据的 BYTE 数组。图像是灰度的，每个像素强度是一个 32 位整数。现在我想读取每个像素强度（32 位 int），然后对每个像素强度进行一些操作并存储修改后的像素强度（再次以 32 位 int 格式）。所以我的问题是如何从 BYTE 数组中读取 32 位（或 16 位）整数。（在 VC++/MFC 中工作）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:34:43.393

用于`memcpy`将数据从您的数组中获取到（或）`BYTE`数组。`int32_t``uint32_t`

如果您不需要可移植性，您的架构可能允许将第一个地址转换`BYTE`为 a`int32_t*`并就地使用它。

如果您的所有数据始终来自一个文件，并且不需要对单个字节进行任何处理，您可以直接将其读入`int32_t`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:41:32.177

**本·沃伊特**

恕我直言，我完全不同意 DLLMain 不是强制性的说法。您提供的链接具有误导性信息。

每个可执行模块（exe 或 DLL）都**必须有一个入口点**。否则系统将无法启动任何程序。

因此定义和实现一个入口点是必须的。

**UNK**

如果您创建 Win32 或 MFC 扩展 dll，向导会在两个项目中插入入口点。MFC 使用 DllMain，而 Win32 使用 _tmain，它被定义为 Unicode 的 wmain 或 ANSI 的 main。两者都只是名称的占位符，并且可以更改（但为什么要麻烦）。

您必须已创建**MFC 常规 DLL**。这种类型的 dll 也有一个入口点，但它不会在向导创建的任何源文件中公开。它被称为 __DllMainCRTStartup 并驻留在 crtdll.c 中。

对于 MFC 常规 DLL，使用应用程序的 InitInstance 来初始化您的 dll。

顺便说一句：任何 MFC 应用程序还具有未在向导生成的任何代码中公开的 WinMain。

# objective-c - 无法重新订购餐桌以正常工作

> ID：10934739
> 
> 赞同：1
> 
> 时间：2012-06-07T15:18:03.593
> 
> 标签：objective-c, ios, uitableview

从 UITableViewCell 显示ReorderControl 文档：

```
For the reordering control to appear, you must not only set this property but implement the UITableViewDataSource method tableView:moveRowAtIndexPath:toIndexPath:. In addition, if the data source implements tableView:canMoveRowAtIndexPath: to return NO, the reordering control does not appear in that designated row. 
```

我的 tableviewController 中都有这两个：

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath {
    NSLog(@"move from:%d to:%d", fromIndexPath.row, toIndexPath.row);
   //just for test
} 
```

我的单元格属性，包括重新排序控件：

![在此处输入图像描述](../Images/a265589204e708f845081b533f23193e.png)

但是我看不到重新订购控制，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:26:56.147

你有没有通过你的 UITableView 进入编辑模式

```
[tableView setEditing:YES animated:YES]; 
```

?

顺便说一句，您发布的第一种方法是不必要的，因为这是默认行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:27:09.703

我认为您实际上需要进入表格的编辑模式。当您的视图出现时在代码中尝试它，或者创建一个可以执行此操作的按钮。

```
[tableView setEditing:YES animated:YES]; 
```

# intellij-idea - 格式化输出，以便 Intellij Idea 显示两个文本的差异

> ID：10934743
> 
> 赞同：25
> 
> 时间：2012-06-07T15:18:27.400
> 
> 标签：intellij-idea

我希望能够在日志中打印一条消息，intellij idea 将为此提供一种比较两个对象（字符串）的好方法。对于失败的 junit 断言记录的错误消息，这会自动发生：

```
assertEquals("一些\nString", "另一个\nString");

=>
org.junit.ComparisonFailure: <点击查看区别>
    在 org.junit.Assert.assertEquals(Assert.java:123)
    在 org.junit.Assert.assertEquals(Assert.java:145)
    在 com.something.DummyTest.testDummy(DummyTest.java:89)

```

<Click to see Difference> 条目实际上在 Intellij Idea 的输出窗口中显示为一个链接。当您单击链接时，将打开一个比较窗口，其中显示两个值（就像您比较两个文件一样）。

简单地抛出异常是不可接受的，因为我想记录多个对象进行比较。我已经尝试记录一个文本，但我无法说服想法来比较这两个文本。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-08T08:46:16.420

IntelliJ IDEA 使用的是硬编码的正则表达式。如果文字与图案匹配，会建议点击查看差异。

模式是：

```
expected:<bla-blah> but was:<blah-blah-blah> 
```

输出应与`assertEquals`or的格式匹配`assertThat`。

确切的模式有点分散在 IDEA 中的代码周围，但有些是例如[here](https://github.com/JetBrains/intellij-community/blob/3f7e93e20b7e79ba389adf593b3b59e46a3e01d1/plugins/testng/src/com/theoryinpractice/testng/model/TestProxy.java#L50)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-02-07T14:16:59.453

我遇到了同样的问题，并在[https://github.com/joel-costigliola/assertj-core/issues/1364#issuecomment-440800958中找到了解决方案](https://github.com/joel-costigliola/assertj-core/issues/1364#issuecomment-440800958)

你应该扔一个`org.junit.ComparisonFailure`. 然后 IntelliJ 将显示`<Click to see difference>`

# python - 正则表达式匹配字符串或字符串结尾

> ID：10934744
> 
> 赞同：0
> 
> 时间：2012-06-07T15:18:28.680
> 
> 标签：python, regex, lexer

我目前有这个正则表达式（带有多行和 dotall 标志）：

```
^@@:([a-zA-Z0-9_-]*)\s*^(.*?)^@@ 
```

与此相符：

```
@@:variable

some nice MarkDown content blah blah

@@ 
```

如果声明是文件中的最后一个（字符串），我希望能够省略结束 @@ 标记，这是因为许多文件只有一个声明，因此关闭它的想法似乎没有必要。我试过这个正则表达式：

```
^@@:([a-zA-Z0-9_-]*)\s*^(.*?)^(@@|\A) 
```

但它甚至不再与结束标签匹配。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:25:18.707

我现在得到了它：

两个错误：

插入符号必须是最后一组中第一个正则表达式的一部分，我需要 \Z 而不是 \A 因为 \A 匹配字符串的开头而不是结尾。

```
^@@:([a-zA-Z0-9_-]*)\s*^(.*?)(^@@|\Z) 
```

# mysql - 从 .frm 文件恢复 mysql 数据库

> ID：10934745
> 
> 赞同：43
> 
> 时间：2012-06-07T15:18:31.893
> 
> 标签：mysql, mysqldump

我每周都会倾倒我所有的桌子以获得备份。但后来我明白它只是存储表的 .frm 文件。它没有显示表格的 .MYD 和 .MYI 文件。所以我只有我的.frm 数据库文件，而且我的数据库也是innodb。那么我可以使用数据库中的数据获取我的数据库吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-08T06:08:22.567

是的，这是可能的。仅将文件复制到数据库文件夹是不够`.frm`的，还需要将文件复制`ib_logfiles`到`ibdata`数据文件夹中。我刚刚复制了`.frm`文件并复制了这些文件，然后重新启动服务器并恢复了我的数据库。

复制上述文件后执行以下命令 -

> sudo chown -R mysql:mysql /var/lib/mysql

上面的命令会将mysql下的文件所有者及其文件夹更改为MySql用户。这对于mysql读取`.frm`和`ibdata`文件很重要。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-05-04T12:47:32.673

可能对某人有用：

我只能在灾难后恢复 frm 文件，至少我可以通过执行以下操作从 FRM 文件中获取表结构：

1-在新的 mysql 数据库中创建一些具有至少一列和相同名称的虚拟表和 frm 文件。

2-stop mysql服务

3-将旧的frm文件复制并粘贴到新创建的表的frm文件中，它应该询问您是否要覆盖每个文件。全部替换。

4-启动mysql服务，你有你的表结构......

问候。任何朋友

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-23T17:23:06.473

我也在这里回答了这个问题：[https ://dba.stackexchange.com/a/42932/24122](https://dba.stackexchange.com/a/42932/24122)

我最近遇到了同样的问题。我在 Mac 上，所以我使用 MAMP 将数据库恢复到可以将其导出到 MySQL 转储中的位置。

你可以在这里阅读完整的博客文章：[http ://www.quora.com/Jordan-Ryan/Web-Dev/How-to-Recover-innoDB-MySQL-files-using-MAMP-on-a-Mac](http://www.quora.com/Jordan-Ryan/Web-Dev/How-to-Recover-innoDB-MySQL-files-using-MAMP-on-a-Mac)

你必须有：

-ibdata1

-ib_logfile0

-ib_logfile1

-.FRM 来自 mysql_database 文件夹的文件

- 全新安装您愿意销毁的 MAMP / MAMP Pro（如果需要）

1.  通过 SSH 连接到您的 Web 服务器（开发、生产、没有区别）并浏览到您的 mysql 文件夹（我的文件夹位于 /var/lib/mysql 以在 Linux 上安装 Plesk）
2.  压缩mysql文件夹
3.  下载 mysql 文件夹的存档，该文件夹应包含所有 mySQL 数据库，无论是 MyISAM 还是 innoDB（如果需要，您可以 scp 此文件，或将其移动到可下载的目录）
4.  安装 MAMP（Mac、Apache、MySQL、PHP）
5.  浏览到 /Applications/MAMP/db/mysql/
6.  将 /Applications/MAMP/db/mysql 备份到 zip 存档（以防万一）
7.  从生产服务器（在我的情况下为 mt Plesk 环境）复制包含在 mysql 文件夹存档中的所有文件夹和文件，除非不要覆盖：

    -/应用程序/MAMP/db/mysql/mysql/

    -/应用程序/MAMP/db/mysql/mysql_upgrade_info

    -/应用程序/MAMP/db/mysql/performance_schema

8.  瞧，您现在应该可以从 phpMyAdmin 访问数据库了，真是一种解脱！

但是我们还没有完成，您现在需要执行 mysqldump 以将这些文件恢复到您的生产环境，并且 phpmyadmin 界面对于大型数据库会超时。请按照此处的步骤操作：

[http://nickhardeman.com/308/export-import-large-database-using-mamp-with-terminal/](http://nickhardeman.com/308/export-import-large-database-using-mamp-with-terminal/)

复制如下以供参考。请注意，在默认 MAMP 安装中，密码为“root”。

## **如何使用终端为 MAMP 运行 mysqldump**

从 MAMP[1] 导出数据库

**第一步：** 打开一个新的终端窗口

**第二步：** 通过在终端 cd /applications/MAMP/library/bin 中输入以下行来导航到 MAMP 安装 按回车键

**第三步：** 编写转储命令 ./mysqldump -u [USERNAME] -p [DATA_BASENAME] > [PATH_TO_FILE] 按回车键

例子：

```
./mysqldump -u root -p wp_database > /Applications/MAMP/htdocs/symposium10_wp/wp_db_onezero.sql 
```

快速提示：要快速导航到文件夹，您可以将文件夹拖到终端窗口中，它将写入文件夹的位置。有人向我展示了这一点，这是美好的一天。

**第四步：** 这行文字应该在你按回车键后出现 输入密码：猜猜看，输入你的密码，记住字母不会出现，但它们在那里 按回车键

**第五步：** 检查你存储文件的位置，如果在那里，成功 现在你可以导入数据库，这将在下面概述。

现在您已经导出了 mysql 数据库，您可以在生产环境中导入它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-03-17T10:58:16.000

我使用了`mysqlfrm`一个很棒的工具，它可以从 .frm 文件生成表创建 sql 代码。尽管列出了表格，但我收到了这个讨厌的表格未找到错误。因此我使用这个工具来重新生成表格。在 ubuntu 中，您需要将其安装为：

```
sudo apt install mysql-utilities 
```

然后，

```
mysqlfrm --diagnostic mysql/db_name/ > db_name.sql 
```

创建一个新的数据库，然后你可以使用，

```
mysql -u username -p < db_name.sql 
```

但是，这会给你表格而不是数据。就我而言，这就足够了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-18T04:18:16.833

# 是的！有可能的

很长的方法，但是您可以仅使用`.frm`文件来获取所有数据。当然，您需要目录中的其他文件`mysql/data`。

## 我的问题

有一天我的硬盘坏了，出现了开机蓝屏错误。我尝试连接多台机器，但没有成功。由于这是一个引导错误，我担心这些文件。我尝试使用辅助硬盘并尝试恢复文件夹和文件。为了以防万一，我还备份了完整的 xampp 文件夹`c:/xampp`，因为我没有最近的数据库，所以我真的很担心如何检索数据库。我们在数据库中有很多客户项目管理和个人文档。

StackOverflow 评论中列出的所有方法都不起作用，至少对我来说是这样。`.frm`我花了整整 2 天的时间在谷歌上搜索从文件中获取数据的答案。遇到了许多人的多种方法，但一切都令人沮丧，并且在实施时遇到了一些错误。如果他们中的大多数人都能正常工作（根据他们的评论），那么我错过了什么。

**因为我太绝望了，我什至重新安装了 Windows，这导致我丢失了所有的软件并再次尝试。但仍然是同样的错误**

## 感谢达斯汀戴维斯

我在他的博客中找到了解决方案，并设法让它以与他完全相同的方式工作。让我把功劳归功于达斯汀戴维斯（Dustin Davis）（[https://dustindavis.me/restoring-mysql-innodb-files-on-windows/](https://dustindavis.me/restoring-mysql-innodb-files-on-windows/)）。你可以从这里跳转到他的博客并尝试他的方法，非常清晰易懂。

但是我在尝试他的方法时发现了一些他没有在他的博客中解释的东西，我会尽力解释我是如何做到的以及你需要寻找什么。

## 完全按照这个

**重要提示：确保安装相同版本的 XAMPP。您不能从旧 XAMPP 复制粘贴到新版本。这将导致`__config`或`__tracking`错误。**

### 如何检查您的 XAMPP 版本

1.  转到您的 xampp 文件夹（您已备份 xampp）。
2.  打开`readme_en.txt`文件。它位于 xampp 的根目录中。
3.  您应该在顶部看到版本。`###### ApacheFriends XAMPP Version X.X.XX ######`

### 需要恢复的文件

`xampp(old folder)/mysql/data/`

```
ibdata1
ib_logfile0
ib_logfile1
<databasename>/*.frm
<databasename>/*.ibd 
```

### 步骤1

1.  安装相同版本的xampp后。
2.  **不要启动apache或mysql**

### 第2步

*   转到`mysql/data`文件夹并**替换**,`ibdata1`和`ib_logfile0``ib_logfile1`
*   `database`现在将旧 xampp 备份中的文件夹复制粘贴到新安装`c:/xampp/mysql/data/`的包含文件的 xampp 文件夹中`.frm`，`.ibd`如果您不确定尝试使用一个数据库。

### 第 3 步

*   去`c:/xampp/mysql/bin`寻找`my.cn`。
*   打开`my.cn`文件并查找`#skip-innodb`并在其下查找将其`innodb_log_file_size=5M`更改为`170M`. `innodb_log_file_size=170M`. 这是您的日志文件大小，如果您不确定，只需将其设置为`170`

### 第4步

*   现在打开目录中的文件`mysql_start.bat`（Windows 批处理文件）`c:/xampp/`。

*   `–innodb_force_recovery=6`后添加`... --console`

    ```
     ....

     mysql\bin\mysqld --defaults-file=mysql\bin\my.ini --standalone --console -–innodb_force_recovery=6
     if errorlevel 1 goto error
     goto finish 
    ```

### 第 5 步

*   现在启动你的 Apache 和 Mysql。
*   转到您的`PHPMyAdmin`并检查您的数据库及其表。如果你没有得到任何错误，那么你就在正确的轨道上。
*   **停止 Apache 和 Mysql**并复制粘贴其余数据库。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-10-29T07:04:44.070

我只是将数据库文件夹复制粘贴到 MySQL 中的数据文件夹中，即如果您有一个名为 alto 的数据库，那么在您的 MySQL 中找到文件夹 alto -> 在备份中的 Data 文件夹中复制整个 alto 文件夹并将其粘贴到新安装的 MySQL - > 数据文件夹，重新启动 MySQL，这很完美。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-11-12T22:07:16.860

复制所有文件并替换到 /var/lib/mysql ，之后`mysql` **如果 mariadb.service 重启失败，您必须将文件的所有者更改为这非常重要**

> chown -R mysql:mysql /var/lib/mysql/*

和

> chmod -R 700 /var/lib/mysql/*

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-06-15T22:55:35.027

经过多次试验和错误，我能够根据 user359187 答案和[这篇](https://bobcares.com/blog/mysql-tablespace-is-missing-for-table/)博客文章来完成这项工作。

为了在复制文件并分配 MySQL 所有权后将旧的`.frm`并`.ibd`转移到新的 MySQL 数据库，我的关键是登录 MySQL 并连接到新数据库，然后让 MySQL 通过导入表空间来完成工作。

```
mysql> connect test;
mysql> ALTER TABLE t1 IMPORT TABLESPACE; 
```

这将使用复制的`.frm`和`.ibd`文件导入数据。

我必须分别为每个表运行 Alter 命令，但这有效，我能够恢复表和数据。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-12-09T21:35:49.947

在开始之前，您应该停止 WAMP 服务，或者至少在提示启动服务时重新启动这些服务。

`C:\wamp\bin\mysql\mysql5.1.53\data\`默认情况下，在旧服务器实例上导航到 MySQL 数据文件夹，这应该类似于`mysql5.1.53`以前安装的 MySQL 数据库的版本号。

在此文件夹中，您应该会看到一些文件和文件夹。这些文件夹是实际的 MySQL 数据库，包含一堆我们需要的 .frm 文件。您应该将文件夹名称识别为数据库名称。这些文件夹及其所有内容可以直接复制到你的 MySQL 数据文件夹中，你可以忽略默认数据库 mysql、performance_schema、test。

如果您现在启动服务器，您将看到数据库被拾取，但是数据库将不包含任何复制的表。为了获取数据库的内容，回到数据文件夹中，您应该会看到一个文件`ibdata1`，这是表格的数据文件，将其直接复制到数据文件夹中，您的新数据中应该已经有一个文件名为“ibdata1”的文件夹，因此您可能希望在从旧的 MySQL 数据文件夹`ibdata1.bak`复制之前将其重命名为。`ibdata1`

完成此操作后，重新启动所有 WAMP 服务。您可以使用 PhpMyAdmin 检查您的数据库是否已成功恢复。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2016-02-14T16:54:54.377

创建一个具有相同名称的新数据库，将 .frm .ibd 文件复制到**xampp/mysql/data/[databasename]/**

您还需要 ibdata 文件，该文件位于内部

**xampp/mysql/data/** 复制之前的ibdata1文件粘贴在粘贴文件中，替换成已有的ibdata文件

[***注意：您可能会丢失在新 ibdata 文件中新创建的数据库内容***]

# jquery - 你如何使用 CodeIgniter 进行 jquery 序列化？

> ID：10934750
> 
> 赞同：1
> 
> 时间：2012-06-07T15:18:50.223
> 
> 标签：jquery, ajax, codeigniter, serialization, post

我正在使用 jQuery 和 CodeIgniter 来执行此操作。好的，所以基本上我有一个注册表单，要求用户输入用户名、密码和电子邮件。提交表单后，jQuery 将序列化表单并将其提供给流程页面，在控制器中回显值，然后 javascript 会在原始视图中提醒 post 值。到目前为止，它不起作用。没有任何警报。这是我的代码：

（控制器）register.php：

```
 <?php if (!defined('BASEPATH'))
        exit('No direct script access allowed');

    class Register extends CI_Controller
    {
        public function step1()
        {
        $this->load->view('registration_step1');
        }
        public function step1_process(){
        var_dump($_POST);
        }
        public function step2()
        {
        $this->load->view('registration_step2');
        }
        public function step3()
        {
        $this->load->view('registration_step3');
        }
    } 
```

（部分视图）registration_step1.php：

```
 <form style="margin-top: 100px;" class="registerbox">
        <h2>User Info:</h2>
        <input type="text" name="username" placeholder="Username" style="height:35px; width: 300px;font-size:20px;"/> <br />
        <input type="text" name="email" placeholder="Email" style="height:35px; width: 300px;font-size:20px;"/><br />
        <input type="password" name="password" placeholder="Password" style="height:35px; width: 300px;font-size:20px;"/><br />
        <input type="submit" class="btn btn-success" style="height:35px; width: 310px;font-size:20px;margin-bottom:5px;" value="Next &raquo;"/><br />
        </form> 
```

（javascript）registration.js：

```
 $(document).ready(function() {
        $(".registerbox").submit(function() { 
              var userinfo = $(".registerbox").serialize();
              return false;
               $.post("register/step1_process", {
               userinfo : userinfo
              },
            function(data) {
                alert(data);
            });
        });
     }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:50:00.907

在您的 html 标记中，在某处`<head>`，您应该输入如下内容：

```
<script type="text/javascript">
    var base_url = '<?php echo base_url(); ?>';
</script> 
```

然后在您的`registration.js`，更改您的网址并`post`在返回之前执行：

```
$(document).ready(function() {
    $(".registerbox").submit(function() { 
        var userinfo = $(".registerbox").serialize();
        $.post(base_url + "register/step1_process", {
            userinfo : userinfo
        }, function(data) {
            console.log(data);
        });
        return false;
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:23:08.943

您只需将您的帖子网址更改为：

```
'your-controller/your-function' 
```

在您的情况下，它将是：

```
'register/step1' 
```

您还需要更改发送数据的方式。jquery 需要一个“数据”对象。所以完整的帖子应该是。

```
 $.post("register/step1", {
           data : userinfo
          },
        function(data) {
            alert(data);
        }); 
```

有关 jQuery 帖子的更多信息：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# php - 无法使用 PHP 登录 FTP 站点，但可以使用 Internet Explorer

> ID：10934752
> 
> 赞同：0
> 
> 时间：2012-06-07T15:18:58.227
> 
> 标签：php, internet-explorer, firefox, ftp

我正在尝试访问如下 URL： `ftp.somesite.com/content/somefile.txt`

使用登录*myname*并传递*mypass*。

我可以在请求时在 IE9 中输入这些内容，然后它会立即打开文件。但是，当我在 PHP 或 Firefox 中尝试此操作时，我收到有关文件的 550 错误`/myname/content/somefile.txt`。

出了什么问题，为什么 PHP 和 Firefox 都将文件位置更改为包含`myname`在文件路径中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:41:30.697

When you log into FTP, your base directory may not be the same as your htdoc/web server directory.

What is the full file path for the file you wish to download?

Ex:

```
/root/somefile.txt
/home/user/test/somefile.txt
/var/www/site/content/somefile.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T16:00:11.903

刚刚想出了如何在 PHP 和 Firefox 中解决这个问题。

为防止将用户名添加到目录结构中，请在文件路径的开头添加另一个“/”。这会强制根目录。

换句话说：

> ftp.somesite.com//content/somefile.txt

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:24:58.737

> [ftp://username:password@ftp.somesite.com/content/somefile.txt](ftp://username:password@ftp.somesite.com/content/somefile.txt)

这是一个有效的 URL。有时 FTP 客户端会在您登录时将您的用户名@主机名放在 URL 中。这不是问题，只是为了清楚起见，还允许您使用用户名复制和粘贴该 URL。

# sql - 按列从表中选择所有列

> ID：10934753
> 
> 赞同：1
> 
> 时间：2012-06-07T15:19:06.900
> 
> 标签：sql, sql-server

'test_table' 包含一个名为 vendor 的列，char 值从 1 到 9，1 是最高优先级。'test_table' 还有另一个名为 match 的列，其 char 值为 'I' 或 'H'，而 'I' 获得更高的优先级。我想返回 ID 中具有唯一值的所有行，按匹配优先，然后是供应商。

测试表

```
ID  Vendor  Match  
 1    3      I  
 1    2      I  
 1    4      H  
 2    1      H  
 2    1      I  
 3    1      H  
 3    2      I 
```

期望的结果

```
ID  Vendor  Match   
1     2   I  
2     1   I   
3     2   I  

SELECT *
FROM 
    (SELECT ROW_NUMBER() OVER (PARTITION BY ID ORDER BY ID) AS RowNo, * 
     FROM test_table) x
WHERE RowNo = 1 
ORDER BY ID 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T06:03:55.573

您需要为 match 列设置一个 order by 子句（字符比较基于 ascii 值），另一个在 vendor 列上。您甚至可以删除`ascii`keyowrd （为了清楚起见，我已经写过），只需按子句顺序使用列名

尝试这个 ：

```
 ;With cte as 
  ( 
  Select ROW_NUMBER() OVER (PARTITION BY ID ORDER BY ascii(match) desc ,vendor )
   AS RowNo,  Id,Vendor ,Match 
  FROM test_table
  )
  Select Id,Vendor,Match from cte
  WHERE RowNo = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T06:29:03.567

```
SELECT Id,Vendor,Match
FROM 
    (SELECT ROW_NUMBER() OVER (PARTITION BY ID ORDER BY ID,Match Desc,Vendor Asc) AS RowNo, * 
     FROM test_table ) x
WHERE RowNo = 1 
ORDER BY ID 
```

# jquery - 如何获取这个 JSON 的交易信息？

> ID：10934757
> 
> 赞同：2
> 
> 时间：2012-06-07T15:19:29.007
> 
> 标签：jquery, mysql, json

我有这个 JSON：

```
{
   "status": true,
  "1": {
      "id": "1",
      "deal": "Testing the mobile"
  },
  "2": {
      "id": "2",
      "deal": "Testing"
  },
  "3": {
      "id": "3",
      "deal": "Testing"
  }
}​ 
```

我怎样才能得到`id`和`deal`？我正在使用**Phonegap**和**jQuery Mobile**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:20:22.530

```
var data = {
    "status": true,
    "1": {
        "id": "1",
        "deal": "Testing the mobile"
    },
    "2": {
        "id": "2",
        "deal": "Testing"
    },
    "3": {
        "id": "3",
        "deal": "Testing"
    }
};

data['1'].id;

data['1'].deal; 
```

等等。

**[演示](http://jsfiddle.net/thecodeparadox/e2CgK/)**

使用 jQuery`$.each()`循环：

```
$.each(data, function(key, val) {
    if (key != 'status') {
        alert(val.id);
        alert(val.deal);
    }
}); 
```

**[演示](http://jsfiddle.net/thecodeparadox/CNn65/5/)**

使用原版 Javascript

```
for(var key in data){
    if (key != 'status') {
        alert(data[key].id);
        alert(data[key].deal);
    }
} 
```

**[演示](http://jsfiddle.net/thecodeparadox/awVEQ/1/)**

# objective-c - 使用 memcpy 和 malloc 导致数据流损坏

> ID：10934759
> 
> 赞同：-2
> 
> 时间：2012-06-07T15:19:31.970
> 
> 标签：objective-c, ios, c

下面的代码尝试使用 fwrite 将数据流保存到文件中。使用 malloc 的第一个示例有效，但在第二个示例中，数据流已损坏 %70。有人可以向我解释为什么第二个示例已损坏以及我该如何补救？

```
short int fwBuffer[1000000];
// short int *fwBuffer[1000000];
unsigned long fwSize[1000000];

// Not Working *********

if (dataFlow) {
       size =  sizeof(short int)*length*inchannels;
        short int tmpbuffer[length*inchannels];
        int count = 0;
        for (count = 0; count < length*inchannels; count++)
        {
            tmpbuffer[count] = (short int) (inbuffer[count]);
        }

        memcpy(&fwBuffer[saveBufferCount], tmpbuffer, sizeof(tmpbuffer));
        fwSize[saveBufferCount] = size;

        saveBufferCount++;
        totalSize += size;
    }
// Working ***********

if (dataFlow) { 
    size =  sizeof(short int)*length*inchannels;
    short int *tmpbuffer = (short int*)malloc(size);

    int count = 0;
    for (count = 0; count < length*inchannels; count++)
    {
        tmpbuffer[count] = (short int) (inbuffer[count]); 
    }

    fwBuffer[saveBufferCount] = tmpbuffer;
    fwSize[saveBufferCount] = size;

    saveBufferCount++;
    totalSize += size;
}

// Write to file ***********

    for (int i = 0; i < saveBufferCount; i++) {
        if (isRecording && outFile != NULL) { 
  //        fwrite(fwBuffer[i], 1, fwSize[i],outFile);
            fwrite(&fwBuffer[i], 1, fwSize[i],outFile);
            if (fwBuffer[i] != NULL) {
  //           free(fwBuffer[i]);
            }
            fwBuffer[i] = NULL;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:23:53.500

This has very good chances to crash

```
short int tmpbuffer[(short int)(size)]; 
```

first size could be too big, but then truncating it and having whatever size results of that is probably not what you want.

*Edit:* Try to write the whole code without a single cast. Only then the compiler has a chance to tell you if there is something wrong.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:31:15.703

你初始化你`size`的

```
size = sizeof(short int) * length * inchannels; 
```

然后你声明一个大小数组

```
short int tmpbuffer[size]; 
```

这已经很可疑了。为什么要包含在大小中，然后声明具有该大小的元素`sizeof(short int)`数组？`short int`在这种情况下，数组的字节大小是

```
sizeof(short int) * sizeof(short int) * length * inchannels 
```

即被`sizeof(short int)`计算了两次。

`length * inchannels`由于上述原因，稍后您只初始化数组的元素，而不是整个数组。但是`memcpy`接下来的仍然复制整个数组

```
memcpy(&fwBuffer[saveBufferCount], &tmpbuffer, sizeof (tmpbuffer)); 
```

（复制数据的尾部是垃圾）。我怀疑您复制`sizeof(short int)`的数据比预期的要多。收件人内存溢出并损坏。

基于的版本`malloc`不会遇到这个问题，因为`malloc`-ed 内存大小是用字节指定的，而不是`short int`-s。

如果要模拟`malloc`上层代码中的行为，则需要将 your 声明`tmpbuffer`为元素数组`char`，而不是`short int`元素数组。

# javascript - Javascript 的 getElementById 和 innerHTML 不能间接工作

> ID：10934761
> 
> 赞同：1
> 
> 时间：2012-06-07T15:19:38.820
> 
> 标签：javascript, innerhtml, getelementbyid

这是我的代码：

```
<html>
<head>
<title>My Game Title Goes Here!</title>
<script type="text/javascript">
function startGame(){
    document.getElementById("2").innerHTML = ('Testing!');
}
document.body.onload = keyListener(){
    document.getElementById("1").onkeypress = startGame;
}
</script>
</head>
<body>
<div class="title" name="Game Title" id="0">Game Title</div>
<div tabindex="0" class="gamecontainer" name="Game Container" id="1">
Press any key to start.
</div>
<div class="gamemonitor" name="Game Monitor" id="2">
Game Monitor:
</div>
</body>
</html> 
```

我没有像我期望的那样工作（我使用的是谷歌浏览器）。

它只有在我直接运行时才有效，如下所示：

```
<div tabindex="0" class="gamecontainer" name="Game Container" id="1" onkeypress="document.getElementById('2').innerHTML = ('Testing!')">
Press any key to start.
</div>
<div class="gamemonitor" name="Game Monitor" id="2">
Game Monitor:
</div> 
```

我检查了我的代码无数次，我找不到任何明显的错误，如拼写错误或任何东西。如果这是问题所在，那么我很抱歉浪费了你的时间，但这真的让我很烦。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:22:09.380

[元素 ID 不能以数字开头](https://stackoverflow.com/a/79022/509663)，这几乎肯定会导致您的问题。将 HTML 和 JS 中的 ID 更改为以字母开头。

其次，这`keyListener`条线应该是这样的：

```
window.onload = function(){
    document.getElementById("newId").onkeypress = startGame;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:24:05.537

Change :

```
document.body.onload = keyListener(){
    document.getElementById("1").onkeypress = startGame;
} 
```

To:

```
document.body.onload = function(){
    document.getElementById("1").onkeypress = startGame;
} 
```

And, `id` shouldn't begin with a number as it's an invalid HTML.
Chrome seems to overcome this mistake, but it shouldn't be used.

And move the code to the the `<body>` tag or use `window.onload`
`document.body` doesn't exist above the `<body>`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:27:52.477

`document.body`没有`onload`财产。应该是`window.onload`。

```
window.onload = function(){
    document.getElementById("1").onkeypress = startGame;
} 
```

演示：http: [//jsfiddle.net/9khng/](http://jsfiddle.net/9khng/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T15:22:48.750

我认为身份证不能以数字开头。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T15:25:22.247

尝试修复您的“onkeypress”属性。你的报价搞砸了。

```
onkeypress="document.getElementById('2').innerHTML = ('Testing!')" 
```

# php - 用于处理主题演讲的 Python/PHP 库

> ID：10934762
> 
> 赞同：1
> 
> 时间：2012-06-07T15:19:41.440
> 
> 标签：php, python, image-processing, keynote

我需要从主题演讲中提取幻灯片作为图像。是否有任何 python/PHP 库可以帮助解决这个问题？ImageMagick 适用于 PDF。我想知道是否有一个与主题演讲一起使用的。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:08:05.330

这似乎是我发现的最接近的：[http](http://petercorke.com/Keynote.html) ://petercorke.com/Keynote.html ，但还没有机会测试它！

# entity-framework-4 - 实体框架不会将外键值更新为 null

> ID：10934764
> 
> 赞同：6
> 
> 时间：2012-06-07T15:19:43.530
> 
> 标签：entity-framework-4

我无法将我的 Entity Framework 4.3 代码第一个数据库中的外键更新为 null。

我的视图模型：

```
public class AccountViewModel
{
    public int Id { get; set; }
    public int? CorporationId { get; set; } 
    public CorporationModel Corporation { get; set; }
}

var corporation = db.Corporation.Where(x => x.Id == model.CorporationId).FirstOrDefault();  // shows as null
account.Corporation = corporation;  // sets the value to null

db.Entry(account).State = EntityState.Modified;
db.SaveChanges();  // does not save the null value in the FK field!!! 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T15:50:59.760

您必须将外键属性设置为`null`。将状态设置为`Modified`仅影响标量属性（外键属性是其中之一，但不影响导航属性）：

```
account.CorporationId = null;

db.Entry(account).State = EntityState.Modified;
db.SaveChanges(); 
```

如果您没有外键属性，则`Account`必须加载包括公司在内的帐户：

```
var account = db.Account.Include(a => a.Corporation)
    .Where(a => a.Id == accountId)
    .SingleOrDefault();

if (account != null)
{
    account.Corporation = null;
    db.SaveChanges();
} 
```

# php - 从说明书中尝试 Symfony2 示例时映射异常

> ID：10934772
> 
> 赞同：1
> 
> 时间：2012-06-07T15:20:28.453
> 
> 标签：php, symfony, doctrine-orm

我刚开始学习 Symfony2，我正在学习 Symfony 网站上“The Cookbook”中的示例。

在尝试有关从数据库（实体提供程序）加载用户的章节中的代码[（链接到章节）时](http://symfony.com/doc/current/cookbook/security/entity_provider.html)，我收到以下错误：

```
MappingException: Class Acme\UserBundle\Entity\User is not a valid entity or mapped super class. 
```

...并且无法发现我做错了。我确实认为我遵循了本章中提供的所有步骤。

谢谢你的帮助，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:11:47.403

在逐步修改整个代码时，我终于发现了问题。

我忘记在 AppKernel.php 中注册 UserBundle。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-13T12:06:44.303

我也有同样的问题。我查看了[symfony+Mapping 错误](https://stackoverflow.com/questions/15197183/symfonymapping-error)，但该解决方案对我不起作用。然后我发现，Michi 解决方案有效[https://stackoverflow.com/a/10935672/2910183](https://stackoverflow.com/a/10935672/2910183)

所以，这就是我所做的：

1.  在以下位置注册捆绑`AppKernel.php`：

    `new Acme\UserBundle\AcmeUserBundle(),`

2.  创建此捆绑包（它只是 FOS\UserBundle\FOSUserBundle 的副本）并另存为`src/Acme/UserBundle/AcmeUserBundle.php`

    `<?php`
    `namespace Acme\UserBundle;`
    `use Symfony\Component\HttpKernel\Bundle\Bundle;`
    `use Symfony\Component\DependencyInjection\ContainerBuilder;`
    `use Doctrine\Bundle\DoctrineBundle\DependencyInjection\Compiler\DoctrineOrmMappingsPass;`
    `use Doctrine\Bundle\MongoDBBundle\DependencyInjection\Compiler\DoctrineMongoDBMappingsPass;`
    `use Doctrine\Bundle\CouchDBBundle\DependencyInjection\Compiler\DoctrineCouchDBMappingsPass;`
    `class AcmeUserBundle extends Bundle {`
    `}`

# wordpress - 自定义 WordPress 自定义帖子类型和自定义分类重写维护默认档案

> ID：10934776
> 
> 赞同：1
> 
> 时间：2012-06-07T15:20:39.660
> 
> 标签：wordpress, rewrite, permalinks

我按顺序有一个注册分类法（wps_type）和 2 个自定义帖子类型（wps_business、wps_location）。已注册的分类法已将重写 arg 设置为 slug => type，并且帖子类型已设置 slug => business & slug => location。我需要一个自定义的智能永久链接重写规则，其中所有以下内容都可用。

默认值工作（并且仍然需要工作）：

```
http://domain.com/post-type/post-name => http://domain.com/business/post-name
http://domain.com/post-type/post-name => http://domain.com/location/post-name
http://domain.com/taxonomy/term-name  => http://domain.com/type/term-name 
```

但我需要的是：

```
http://domain.com/post-type/taxonomy  => http://domain.com/location-post-name/type-term-name 
```

所以我相信使用 post_type_link 过滤器可能不起作用，但我可能是错的。这是我尝试过的一些代码：

```
add_rewrite_rule( '^directory/([^/]*)/([^/]*)/?', 'index.php?wps_location=$matches[1]&wps_business=$matches[2]', 'top' );
add_rewrite_tag( '%wps_location%', '([^/]+)' );
add_rewrite_tag( '%wps_business_types%', '([^&]+)' ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:26:10.133

不确定您是否找到了答案，但我刚刚发现[这篇文章](http://mondaybynoon.com/20110520/revisiting-custom-post-types-taxonomies-permalinks-slugs/)概述了如何做到这一点（尽管有一些警告）。另外，不确定这个答案是否会保留您提到的第三个永久链接结构：

> `http://domain.com/taxonomy/term-name => http://domain.com/type/term-name`

我个人很少发现需要这种结构，但经常需要这种`http://domain.com/post-type/tax/term`结构，所以那篇文章对我有用。

# asp.net-mvc - 如何使用 Ninject 将 IUserRepository 注入自定义成员资格提供程序？

> ID：10934778
> 
> 赞同：0
> 
> 时间：2012-06-07T15:20:40.050
> 
> 标签：asp.net-mvc, entity-framework, repository-pattern, unit-of-work, custom-membershipprovider

我使用 Ninject 在我的项目中设置了 DI。这是 UserController 的示例。

```
private readonly IRoleRepository roleRepository;
private readonly IUserRepository userRepository;

public UserController(IUserRepository userRepository, IRoleRepository roleRepository)
{
    this.roleRepository = roleRepository;
    this.userRepository = userRepository;
} 
```

在我的 NinjectWebCommon.cs 文件中，我有这个：

```
private static void RegisterServices(IKernel kernel)
{
    kernel.Bind<IControllerFactory>().To<DefaultControllerFactory>();
    kernel.Bind<IUnitOfWork>().To<PortalContext>().InSingletonScope();
    kernel.Bind<IUserRepository>().To<UserRepository>();
    kernel.Bind<IRoleRepository>().To<RoleRepositoroy>();
} 
```

但是，我似乎无法弄清楚如何将用户和角色存储库注入自定义成员资格提供程序。非常感谢任何帮助，因为我在这里碰壁了。我将 Asp.net MVC4 和 EF4 与存储库和工作单元模式一起使用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:28:06.190

您可以使用属性注入

```
[Inject]
public IUserRepository userRepository {get;set;}; 
```

但是，您必须小心 DBContext 的范围，因为 MembershipProvider 类是一个单例，其范围是应用程序的生命周期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:28:18.877

作为一个简单的解决方案，您可以使用 Ninject 对它们进行属性注入。

```
[Inject]
public IUserRepository UserRepository {get;set;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-27T05:02:34.833

@feanz，关于你的问题：

@BBauer42 奇怪。您的 MVC 应用程序是另一个项目中的提供者吗？

如果自定义提供程序位于单独的项目（类库）中，您需要做些什么不同的事情？

# python - GTK window capture: VPython (OpenGL) application

> ID：10934787
> 
> 赞同：3
> 
> 时间：2012-06-07T15:20:56.940
> 
> 标签：python, opengl, pygtk, vpython

Having read the documentation for [VPython](http://www.vpython.org/contents/FAQ.html) and [GTK threading](http://faq.pygtk.org/index.py?req=show&file=faq20.006.htp), it seems to me that it would be possible to embed VPython graphics within a gtk GUI. I know that it is possible with [wx on Windows](http://mientki.ruhosting.nl/data_www/pylab_works/pw_vpython_docking.html) but I am on Linux and using PyGTK. Now, I have managed to get part of the way. I can embed a VPython window **provided that it is spawned a separate process**. What I would like is to embed it as a thread. The latter would make GUI events that control the OpenGL easier to implement -- via a thread instead of a socket and network calls.

*Edit: Apparently nobody knows anything about this... Meh.*

Here is the code I have. Uncomment the two commented out lines and comment a few obvious others and you can get to the process spawning code.

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import time
from visual import *
import threading
import Queue
import gtk
import pygtk
import re
import subprocess

class OPenGLThreadClass (threading.Thread):
    """Thread running the VPython code."""

    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue
        self.name = 'OpenGLThread'

    def run (self):
        gtk.threads_enter()
        self.scene = display.get_selected() 
        self.scene.title = 'OpenGL test'
        s = sphere()
        gtk.threads_leave()
        #P = subprocess.Popen(['python', 'opengl.py'])
        time.sleep(2)
        self.queue.put(self.find_window_id())
        self.queue.task_done()

    def find_window_id (self):
        """Gets the OpenGL window ID."""
        pattern = re.compile('0x[0-9abcdef]{7}')
        P = subprocess.Popen(['xwininfo', '-name', self.scene.title],
        #P = subprocess.Popen(['xwininfo', '-name', 'Visual WeldHead'],
                stdout=subprocess.PIPE)
        for line in P.stdout.readlines():
            match = pattern.findall(line)
            if len(match):
                ret = long(match[0], 16)
                print("OpenGL window id is %d (%s)" % (ret, hex(ret)))
                return ret

class GTKWindowThreadClass (threading.Thread):
    """Thread running the GTK code."""

    def __init__ (self, winID):
        threading.Thread.__init__(self)
        self.OpenGLWindowID = winID
        self.name = 'GTKThread'

    def run (self):
        """Draw the GTK GUI."""
        gtk.threads_enter()
        window = gtk.Window()
        window.show()
        socket = gtk.Socket()
        socket.show()
        window.add(socket)
        window.connect("destroy", lambda w: gtk.main_quit())
        print("Got winID as %d (%s)" % (self.OpenGLWindowID, hex(self.OpenGLWindowID)))
        socket.add_id(long(self.OpenGLWindowID))
        gtk.main()
        gtk.threads_leave()

def main ():
    thread = {}
    print("Embedding OpenGL/VPython into GTK GUI")
    queue = Queue.Queue()
    thread['OpenGL'] = OPenGLThreadClass(queue)
    thread['OpenGL'].start()
    winID = queue.get()
    print("Got winID as %d (%s)" % (winID, hex(winID)))
    gtk.gdk.threads_init()
    thread['GTK'] = GTKWindowThreadClass(winID)
    thread['GTK'].start()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T07:07:44.333

这是万一有人关心的代码。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-
import subprocess
import sys
import os
import re
import time
from visual import *

def find_window_id (title):
    """Gets the OpenGL window ID."""
    pattern = re.compile('0x[0-9abcdef]{7}')
    proc = subprocess.Popen(['xwininfo', '-name', title],
            stdout=subprocess.PIPE, stderr=subprocess.PIPE)
    errors = proc.stderr.readlines()
    if errors:
        return None
    for line in proc.stdout.readlines():
        match = pattern.findall(line)
        if len(match):
            return long(match[0], 16)
    return None

class Setting ():
    """VPython/OpenGL class."""

    def __init__ (self, w=256, h=256, title='OpenGL via VPython'):
        """Initiator."""
        self.width = w
        self.height = h
        self.title = title
        self.scene = display.get_selected() 
        self.scene.title = self.title
        self.scene.width = self.width
        self.scene.height = self.height
        self.sphere = sphere()

class GTKDisplay ():

    def __init__ (self, winID):
        """Initiator: Draws the GTK GUI."""
        import gtk
        import pygtk
        self.OpenGLWindowID = winID
        window = gtk.Window()
        window.show()
        socket = gtk.Socket()
        socket.show()
        window.add(socket)
        window.connect("destroy", lambda w: gtk.main_quit())
        socket.add_id(long(self.OpenGLWindowID))
        gtk.main()

def main ():
    """Main entry point."""
    name = 'sphere OpenGL window'
    child_pid = os.fork()
    if 0 == child_pid:
        sut = Setting(title=name)
    else:
        winID = None
        while not winID:
            time.sleep(.1)
            winID = find_window_id(name)
        try:
            gui = GTKDisplay(winID)
        except KeyboardInterrupt, err:
            print '\nAdieu monde cruel!'

if __name__ == "__main__":
    main() 
```

**注意**：这在 Gnome 下不起作用，但在 fvwm2 下起作用。去搞清楚...

# haskell - Haskell code with Gloss lib doesn't compile

> ID：10934788
> 
> 赞同：1
> 
> 时间：2012-06-07T15:20:59.983
> 
> 标签：haskell, compiler-errors, gloss

I switched from C++ to Haskell and use Gloss to make games. I wrote this valid code in a main.hs:

```
import Graphics.Gloss.Interface.Pure.Game

events (EventKey (Char 'a') Down _ _) _ = RectangleWire 10 10
events _ x = x

main = play (InWindow "GameEvent" (700, 100) (10, 10))
    white
    100
    (Circle 10.0)
    id
    events
    (\_ world -> world) 
```

Then the command `ghc main.hs` answered:

```
[1 of 1] Compiling Main             ( main.hs, main.o )

main.hs:3:43: Not in scope: data constructor `RectangleWire' 
```

It seems some functions are missing from my Gloss lib even though I have the latest version installed. For example, this code, "Game Event" from the gloss-examples package, compiles and runs perfectly (so beautiful):

```
import Graphics.Gloss

-- | Display the last event received as text.
main
 = play (InWindow "GameEvent" (700, 100) (10, 10))
        white
        100
        ""
        (\str     -> Translate (-340) 0 $ Scale 0.1 0.1 $ Text str)
        (\event _ -> show event)
        (\_ world -> world) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:33:16.107

您的代码无法编译，因为您引用的数据构造函数`RectangleWire`不在范围内。错误表明这一点：

```
main.hs:3:43: Not in scope: data constructor `RectangleWire' 
```

扫描[Gloss 的文档](http://hackage.haskell.org/packages/archive/gloss/1.2.0.1/doc/html/Graphics-Gloss-Data-Picture.html#3)，看起来你正在寻找

```
rectangleWire :: Float -> Float -> PictureSource 
```

以原点为中心的线框矩形，具有给定的宽度和高度。从 导出`Graphics.Gloss.Data.Picture`。

# javascript - How to remove `//` with javascript from string?

> ID：10934789
> 
> 赞同：11
> 
> 时间：2012-06-07T15:20:59.990
> 
> 标签：javascript, jquery, regex, cdata

How to remove `//<![CDATA[` and end `//]]>` with javascript from string?

```
var title = "<![CDATA[A Survey of Applications of Identity-Based Cryptography in Mobile Ad-Hoc Networks]]>" ; 
```

needs to become

```
var title = "A Survey of Applications of Identity-Based Cryptography in Mobile Ad-Hoc Networks"; 
```

How to do that?

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-07T15:22:43.013

您可以使用该`String.prototype.replace`方法，例如：

```
title = title.replace("<![CDATA[", "").replace("]]>", ""); 
```

这将用任何内容替换每个目标子字符串。请注意，这只会替换每个的第一次出现，如果要删除所有匹配项，则需要正则表达式。

参考：

*   [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:26:37.363

你应该能够用正则表达式来做到这一点。也许是这样的？：

```
var myString = "<![CDATA[A Survey of Applications of Identity-Based Cryptography in Mobile Ad-Hoc Networks]]>";
var myRegexp = /<!\[CDATA\[(.*)]]>/;
var match = myRegexp.exec(myString);
alert(match[1]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-15T15:00:01.923

我建议使用这种更广泛的方法来删除前导和尾随 CDATA 内容：

```
title.trim().replace(/^(\/\/\s*)?<!\[CDATA\[|(\/\/\s*)?\]\]>$/g, '') 
```

如果 CDATA 页眉和页脚被注释，它也将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-08-30T06:48:50.687

您必须执行与最初对字符串执行的操作相反的操作以对其进行编码，即：-

```
mystr='<!CDATA[' + mystr.replaceAll(']]>',']]]]><![CDATA[>') + ']]>' 
```

此页面上建议“替换”而不使用循环的所有其他答案都是错误的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-09T17:35:20.183

正则表达式`/^(<!\[CDATA\[)|(]]>)$/gm`对我有用，没有循环。

# mysql - add_rosteritem not working with xml_rpc in ejabberd server

> ID：10934800
> 
> 赞同：1
> 
> 时间：2012-06-07T15:21:28.803
> 
> 标签：mysql, erlang, ejabberd

I have configure ejabberd server 2.1.10 with mysql database integration,mod_admin_extra module and mod_xmlrpc module.

Issues is ejaberd admin commands like add_rosteritem, delete_rosteritem are notworking with xml_rpc. When we use direct command line like,

***root@ejabberdserver:~# ejabberdctl add_rosteritem admin domain.com karthik domain.com karthik none both***

it will work and store in to database.

but same command does not work with xml_rpc. xml_rpc does not return any error, it retun ***{ok,{response,[0]}}*** But it does't store database.

Any permission issue?

Any body please help!!!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-03T07:51:16.687

我最近遇到了类似的问题，结果发现根本原因是 (svn)ejabberd_module 源代码中存在错误，这已在[https://github.com/processone/ejabberd-contrib/issues/22](https://github.com/processone/ejabberd-contrib/issues/22)中报告并修复ejabberd 贡献，

所以我建议你下载源[https://github.com/processone/ejabberd-contrib](https://github.com/processone/ejabberd-contrib)并重建 mod_admin_extra。

# java - 从 Google App Engine 中的 FTP URL 读取文件，FileNotFoundException

> ID：10934805
> 
> 赞同：0
> 
> 时间：2012-06-07T15:21:48.613
> 
> 标签：java, google-app-engine, ftp

我正在编写代码以从 FTP URL 读取文件，以便对其进行解析并将数据存储在 Google App Engine 的数据存储区中。在读取托管在我自己的 Web 服务器上的测试文件时，我能够让代码正常工作，但是当我尝试读取我需要的数据文件时，我得到了 FileNotFoundException。

我可以在浏览器中使用相同的 FTP URL 下载文件，并且可以匿名连接到 FileZilla 中的 FTP URL，因此访问应该不成问题，而且文件肯定在那里。这是一个相当大的文件，但我尝试从同一个 FTP 服务器获取较小的文件，但也没有运气。

这是我目前拥有的代码：

```
public void doGet(HttpServletRequest req,
        HttpServletResponse resp) throws IOException, ServletException {

    // works with a URL to my own server & a test.zip, but not this one
    final URL url = new URL(
        "ftp://gisftp.metc.state.mn.us/google_transit.zip");

    // without the privileged action, I get an AccessControlException
    ZipInputStream zin = AccessController.doPrivileged(
        new PrivilegedAction<ZipInputStream>() {
            public ZipInputStream run() {
                return getZipStream(url);
            }
        }
    );

    ZipEntry zipentry = zin.getNextEntry();

    // processing files here

    zin.close();
}

// but using the privileged method, we get a FileNotFoundException
public ZipInputStream getZipStream(URL url) {
    ZipInputStream zipin = null;
    try {
        zipin = new ZipInputStream(url.openStream());
    } catch (IOException e) {
        e.printStackTrace();
    }
    return zipin;
} 
```

起初我得到一个 AccessControlException，但使用 PrivilegedAction 打开流似乎可以解决这个问题。

我无权访问存储文件的服务器，因此无法更改任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:50:07.477

我认为可以从 App Engine 连接的端口受到限制，并且 FTP (21) 不在列表中，这可能会导致问题。[来自 URL Fetch 文档](https://developers.google.com/appengine/docs/java/urlfetch/overview#Requests)；

> 应用可以使用 HTTP（正常）或 HTTPS（安全）获取 URL。URL 指定要使用的方案：http://... 或 https://...
> 
> 要获取的 URL 可以使用以下范围内的任何端口号：80-90、440-450、1024-65535。如果 URL 中未提及端口，则方案隐含该端口：http://... 为 80 端口，https://... 为 443 端口。

# c++ - c++0x中auto和decltype的区别

> ID：10934807
> 
> 赞同：15
> 
> 时间：2012-06-07T15:21:57.350
> 
> 标签：c++, c++11, auto, decltype

我在使用 auto 和 decltype 时遇到问题。

```
void f(const vector<int>& a, vector<float>& b)
{
    typedef decltype(a[0]*b[0]) Tmp;
    for (int i=0; i < b.size(); ++i) {
      auto p0 = new auto(a[i]*b[i]);
      auto p1 = new decltype(a[i]*b[i]);
      *p0=a[i]*b[i];
      *p1=a[i]*b[i];
      cout<<*p0<<endl;
      cout<<*p1<<endl;
      delete p0;
      delete p1;
   }
}

 int main()
{

    vector<float>vec2;
    vec2.push_back(2.0);

    vector<int>vec1;
    vec1.push_back(5);

    return 0;
} 
```

以上代码在GCC4.7中运行良好。我可以使用 'new auto(a[0]*b[0])' 为 a[0]*b[0] 类型分配内存吗？在这种情况下，我无法区分 decltype 和 auto 之间的区别。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T15:30:26.920

不同之处在于：

```
 new auto(a[i]*b[i]); 
```

正在分配任何类型的对象`a[i]*b[i]`，并*使用该值初始化对象*。也就是说，括号是一个初始化器。而使用 decltype：

```
 new decltype(a[i]*b[i]); 
```

分配一个相同类型的对象，*但没有初始化器*。该对象是默认初始化的。

基本上`decltype(...)`被视为一种类型，同时`auto`指定要从初始化程序推导出的类型。

* * *

### C++11 风格

由于`new`除非在特殊情况下不应该使用，如果由于某种原因需要这些语义，它们应该正确地写成这样的：

```
template<typename T, typename... Args> T make_unique(Args &&...args) {
  return std::unique_ptr<T>{std::forward<Args>(args)...};
}

template<typename T> T make_unique_auto(T &&t) {
    return std::unique_ptr<T>{std::forward<T>(t)};
}

// new auto(a[i]*b[i])
auto p1 = make_unique_auto(a[i]*b[i]);

// new decltype(a[i]*b[i])
auto p2 = make_unique<decltype(a[i]*b[i])>(); 
```

此外，如果一个人习惯于普遍使用 C++11 统一初始化，并且如果一个人停止使用括号进行初始化，那么最终使用 with 的括号`decltype`在程序员看来不再像一个初始化程序。

出于这个原因和其他原因，我认为“现代”C++11 风格最好包含一条规则，即人们应该始终使用大括号并且从不使用括号进行初始化。（除括号外不能调用的构造函数，例如`std::vector<int>(int,int);`，应该避免；不要创建新的，也不要使用旧的。）

# php - 如何在高级查询中使用 PDO 制作准备好的语句？

> ID：10934809
> 
> 赞同：1
> 
> 时间：2012-06-07T15:22:01.830
> 
> 标签：php, mysql, pdo

我想就使用 PDO 技术将我的 mysql_* 查询转换为准备好的语句寻求帮助。其中有很多我无法在互联网上找到如何正确解决它们 - 主要是像这样的高级问题，例如：

```
mysql_query("SELECT * FROM pet_auction JOIN people ON (pet_auction.pet=people.guid) 
            LEFT OUTER JOIN login.account ON (pet_auction.winner=login.account.id)
            WHERE active=1 AND seller=$userid ORDER BY id DESC"); 
```

如何使用这些成功地将其转换为 PDO STMT？：

```
$people = new PDO("mysql:host=localhost;dbname=people", "myuser", "mypass");
$login = new PDO("mysql:host=localhost;dbname=login", "myuser", "mypass"); 
```

谢谢大家，我宁愿不要尝试，否则它会是错误的，因为我已经测试过......我不知道如何将`LEFT OUTER JOIN`多个数据库转换在一起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:32:34.240

您不需要为每个数据库打开一个 pdo 对象。只需授予 myuser 对登录和人员数据库的访问权限即可。然后像这样查询：

```
$dbh = new PDO("mysql:host=localhost;dbname=people", "myuser", "mypass");
$stmt= $dbh->prepare("SELECT * FROM pet_auction JOIN people ON (pet_auction.pet=people.guid) 
        LEFT OUTER JOIN login.account ON (pet_auction.winner=login.account.id)
        WHERE active=1 AND seller=:userid ORDER BY id DESC");
$stmt-> execute(array(':userid' => $userid));
$variable = $stmt->fetch(PDO::FETCH_ASSOC); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:27:04.687

```
$dbh = new PDO($dsn, "myuser", "mypass");
$select = $dbh->prepare("SELECT * FROM `table`");
$select -> execute();
$variable = $select->fetch(PDO::FETCH_ASSOC); 
```

其中 $dsn 是一个包含 'mysql:dbname=racerost_reekris_db;host=localhost' 的字符串

该查询可以包含任何 mySQL 查询，包括连接。

# xml - 如何动态调用不同的xsl文件？

> ID：10934811
> 
> 赞同：0
> 
> 时间：2012-06-07T15:22:04.170
> 
> 标签：xml, xslt

我有三个工作 xsl 文件，现在我只想让它们一起工作。

假设我的三个 xslt`cham1.xsl, cham2.xsl, cham3.xsl`和我的源输入`source.xml`。在输入的顶部表节点中，有一个属性`outputclass`：

```
 <root outputclass="cham1"> 
```

我想要的是如何编写另一个样式表，无论何时，`@outputclass`is `cham1`，然后调用`cham1.xsl`if `@outputclass='cham2'`，然后应用于`cham2.xsl`源代码。

想知道这在 xslt 中是否可行？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:42:24.180

基本上有两种方法：在 XSLT 中执行此操作（在单个转换中），或在外部执行此操作。

要在 XSLT 中执行此操作，最好的方法是确保 cham1.xsl、cham2.xsl 和 cham3.xsl 中的模板规则使用不同的模式。然后控制代码只需要在适当的模式下执行应用模板。

在 XSLT 之外执行它取决于您的应用程序环境，例如，您是从 Java、Ant、XProc 等控制事物。

# java - 我可以在 cp 参数中使用通配符吗？

> ID：10934820
> 
> 赞同：0
> 
> 时间：2012-06-07T15:22:32.903
> 
> 标签：java

> **可能重复：**
> [在 java 类路径中设置多个 jar](https://stackoverflow.com/questions/219585/setting-multiple-jars-in-java-classpath)

我想知道是否可以使用通配符在 `java -cp *.jar`命令中指定 jars ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T15:24:56.803

是的，从 Java 6 开始。我认为以前的版本中不存在这种能力，因此对于较旧的程序，您经常会看到 shell 脚本根据目录的内容手动构建类路径。

> 类路径条目可以包含基本名称通配符 *，这被认为等同于指定目录中所有扩展名为 .jar 或 .JAR 的文件的列表。例如，类路径条目 foo/* 指定名为 foo 的目录中的所有 JAR 文件。仅由 * 组成的类路径条目将扩展为当前目录中所有 jar 文件的列表。

[http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/classpath.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:24:29.147

它基本上取决于上下文，即解释器是否会爆炸或不`*.jar`表达。

# sql-server - 我可以在没有游标的 SQL 函数中执行此操作吗？

> ID：10934821
> 
> 赞同：4
> 
> 时间：2012-06-07T15:22:40.583
> 
> 标签：sql-server, cursor

我正在研究时间表数据库。简单来说，TimesheetEntries 表有四列

```
ID int (identity, 1, 1)
StaffID int
ClockedIn datetime
ClockedOut datetime 
```

我被要求写一份报告，按日期范围显示员工出勤率。用户输入一个日期，报告会输出所有参加工作人员的打卡和下班时间以及他们在现场的持续时间。

然而，这就是棘手的地方，工作人员有时会在短时间内离开站点，并且报告需要忽略这些（当他们离开站点不到 2 小时时）。

所以，让我们假设以下条目

```
ID  StaffID  ClockedIn    ClockedOut
1   4        0900         1200
2   4        1330         1730
3   5        0900         1200
4   5        1409         1730
5   4        1830         1930 
```

报告的输出**应该**是

```
StaffID  ClockedIn    ClockedOut
4        0900         1930
5        0900         1200     
5        1409         1730 
```

有没有任何方法可以在没有游标甚至游标内嵌套的游标的情况下执行此操作（这就是我现在所在的位置！）？我们在这里不是在谈论庞大的数据集，性能也不是真正的问题（它是一个报告，而不是一个生产系统），但如果我可以避免它们，我真的不喜欢游标。

谢谢

爱德华

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:04:46.843

我确信有更简单的方法可以做到这一点，但我能够通过几个 CTE 来完成它：

```
declare @TimeSheetEntries table
    (
    ID int identity not null primary key,
    StaffID int not null,
    ClockedIn datetime not null,
    ClockedOut datetime not null
    );

insert into @TimeSheetEntries
    (
    StaffID,
    ClockedIn,
    ClockedOut
    )
select
    4,
    '2012-01-01 09:00:00',
    '2012-01-01 12:00:00'
union all select
    4,
    '2012-01-01 13:30:00',
    '2012-01-01 17:30:00'
union all select
    5,
    '2012-01-01 09:00:00',
    '2012-01-01 12:00:00'
union all select
    5,
    '2012-01-01 14:09:00',
    '2012-01-01 17:30:00'
union all select 
    4, 
    '2012-01-01 18:30:00', 
    '2012-01-01 19:30:00'       
;
with MultiCheckins as (
    select distinct
        StaffID,
        cast(cast(cast(ClockedIn as float) as int) as datetime) as TimeSheetDate,
        rank() over (
            partition by StaffID, 
            cast(cast(cast(ClockedIn as float) as int) as datetime)
            order by ClockedIn
            ) as ordinal,
        ClockedIn,
        ClockedOut
    from @TimeSheetEntries
), Organized as
(
select
    row_number() over (
        order by
            mc.StaffID,
            mc.TimeSheetDate,
            mc.ClockedIn,
            mc.ClockedOut
            ) as RowID,
    mc.StaffID,
    mc.TimeSheetDate,
    case
        when datediff(hour, coalesce(mc3.ClockedOut, mc.ClockedIn), mc.ClockedIn) >= 2
            then mc.ClockedIn 
        else coalesce(mc3.ClockedIn, mc.ClockedIn)
        end as ClockedIn,
    case 
        when datediff(hour, mc.ClockedOut, coalesce(mc2.ClockedIn, mc.ClockedOut)) < 2
            then coalesce(mc2.ClockedOut, mc.ClockedOut)
        else mc.ClockedOut
        end as ClockedOut
from
    MultiCheckins as mc
left outer join
    MultiCheckIns as mc3
        on mc3.StaffID = mc.StaffID
        and mc3.TimeSheetDate = mc.TimeSheetDate
        and mc3.ordinal =  mc.ordinal - 1
left outer join 
    MultiCheckIns as mc2
        on mc2.StaffID = mc.StaffID
        and mc2.TimeSheetDate = mc.TimeSheetDate
        and mc2.ordinal = mc.ordinal + 1
)
select distinct
    o.StaffID,
    o.ClockedIn,
    o.ClockedOut
from Organized as o
where
    not exists (
        select null from Organized as o2
        where o2.RowID <> o.RowID
        and o2.StaffID = o.StaffID
        and 
            (
            o.ClockedIn between o2.ClockedIn and o2.ClockedOut
            and o.ClockedOut between o2.ClockedIn and o2.ClockedOut
            )
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:11:45.500

我使用了上面 Jeremy 回复中的数据，但以完全不同的方式解决了这个问题。这使用递归 CTE，我认为它需要 SQL Server 2005。它准确地报告结果（我相信）并且还报告时间范围内记录的打卡次数和总休息时间（可能超过 120 分钟，因为限制只是每个场外时间少于两个小时）。

```
declare @TimeSheetEntries table 
    ( 
    ID int identity not null primary key, 
    StaffID int not null, 
    ClockedIn datetime not null, 
    ClockedOut datetime not null 
    ); 

insert into @TimeSheetEntries 
    ( 
    StaffID, 
    ClockedIn, 
    ClockedOut 
    ) 
select 
    4, 
    '2012-01-01 09:00:00', 
    '2012-01-01 12:00:00' 
union all select 
    4, 
    '2012-01-01 13:30:00', 
    '2012-01-01 17:30:00' 
union all select 
    5, 
    '2012-01-01 09:00:00', 
    '2012-01-01 12:00:00' 
union all select 
    5, 
    '2012-01-01 14:09:00', 
    '2012-01-01 17:30:00'
union all select
    4,
    '2012-01-01 18:30:00', 
    '2012-01-01 19:30:00';

WITH ClockData AS
(
    SELECT ID, StaffID, ClockedIn, ClockedOut AS EffectiveClockout, 1 AS NumClockIns, 0 AS MinutesOff
    FROM @TimeSheetEntries ts
    WHERE NOT EXISTS (SELECT ID FROM @TimeSheetEntries tsWhere WHERE tsWhere.ClockedOut BETWEEN DATEADD(hour, -2, ts.ClockedIn) AND ts.ClockedIn)

    UNION ALL

    SELECT cd.ID, cd.StaffID, cd.ClockedIn, ts.ClockedOut AS EffectiveClockout, cd.NumClockIns + 1 AS NumClockIns, cd.MinutesOff + DateDiff(minute, cd.EffectiveClockout, ts.ClockedIn) AS MinutesOff
    FROM @TimeSheetEntries ts
    INNER JOIN ClockData cd
        ON ts.StaffID = cd.StaffID
            AND ts.ClockedIn BETWEEN cd.EffectiveClockout AND dateadd(hour, 2, cd.EffectiveClockout)
)
SELECT *
FROM ClockData cd
WHERE NumClockIns = (SELECT MAX(NumClockIns) FROM ClockData WHERE ID = cd.ID) 
```

这将返回：

```
ID   StaffID   ClockedIn                 EffectiveClockout        NumClockIns   MinutesOff
3    5         2012-01-01 09:00:00.000   2012-01-01 12:00:00.000  1             0
4    5         2012-01-01 14:09:00.000   2012-01-01 17:30:00.000  1             0
1    4         2012-01-01 09:00:00.000   2012-01-01 19:30:00.000  3             150 
```

**更新**

如果不清楚，MinutesOff 只是“允许”时间，或同一行中显示的 ClockedIn 和 EffectiveClockout 之间“吃掉”的时间量。因此，StaffID 5 在计时时间段之间休息了 129 分钟，但没有留出时间，因此两行的 MinutesOff 均为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:45:07.127

选项 1：也许将其插入临时表，然后使用左连接来构建结果表（如果他们一天中只能打卡两次，如果你有 3 个结果，这将有效，但不会）

```
select *
from timesheet ts
left join timesheet tss on tss.id = ts.id 
```

在此之后，您可以获得最小值和最大值，甚至可以获得更强大的报告。

选项 2：

```
create #TimeTable Table (UserID int, InTime int, OutTime int)

insert into #TimeTable (UserID) select distinct StaffID

Update #TimeTable set InTime = (select Min(InTime) from #TimeTable where StaffID = s.StaffID)  from #TimeTAble s

Update #TimeTable set OutTime = (Select Max(OutTime) from #TimeTable where StaffID = s.StaffID) from #TimeTable s 
```

考虑到更多时间，我会将它们合并为两个快速查询，但三个可以用于不担心性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:30:28.930

基于迭代集的方法：

```
-- Sample data.
declare @TimesheetEntries as Table ( Id Int Identity, StaffId Int, ClockIn DateTime, ClockOut DateTime )
insert into @TimesheetEntries ( StaffId, ClockIn, ClockOut ) values
  ( 4, '2012-05-03 09:00', '2012-05-03 12:00' ),
  ( 4, '2012-05-03 13:30', '2012-05-03 17:30' ), -- This falls within 2 hours of the next two rows.
  ( 4, '2012-05-03 17:35', '2012-05-03 18:00' ),
  ( 4, '2012-05-03 19:00', '2012-05-03 19:30' ),
  ( 4, '2012-05-03 19:45', '2012-05-03 20:00' ),
  ( 5, '2012-05-03 09:00', '2012-05-03 12:00' ),
  ( 5, '2012-05-03 14:09', '2012-05-03 17:30' ),
  ( 6, '2012-05-03 09:00', '2012-05-03 12:00' ),
  ( 6, '2012-05-03 13:00', '2012-05-03 17:00' )
select Id, StaffId, ClockIn, ClockOut from @TimesheetEntries

-- Find all of the periods that need to be coalesced and start the process.
declare @Bar as Table ( Id Int Identity, StaffId Int, ClockIn DateTime, ClockOut DateTime )
insert into @Bar
  select TSl.StaffId, TSl.ClockIn, TSr.ClockOut
    from @TimesheetEntries as TSl inner join
      -- The same staff member and the end of the left period is within two hours of the start of the right period.
      @TimesheetEntries as TSr on TSr.StaffId = TSl.StaffId and DateDiff( ss, TSl.ClockOut, TSr.ClockIn ) between 0 and 7200

-- Continue coalescing periods until we run out of work.
declare @Changed as Bit = 1
while @Changed = 1
  begin
  set @Changed = 0
  -- Coalesce periods.
  update Bl
    -- Take the later   ClockOut   time from the two rows.
    set ClockOut = case when Br.ClockOut >= Bl.ClockOut then Br.ClockOut else Bl.ClockOut end
    from @Bar as Bl inner join
      @Bar as Br on Br.StaffId = Bl.StaffId and
        -- The left row started before the right and either the right period is completely contained in the left or the right period starts within two hours of the end of the left.
        Bl.ClockIn < Br.ClockIn and ( Br.ClockOut <= Bl.ClockOut or DateDiff( ss, Bl.ClockOut, Br.ClockIn ) < 7200 )
  if @@RowCount > 0
    set @Changed = 1
  -- Delete rows where one period is completely contained in another.
  delete Br
    from @Bar as Bl inner join
      @Bar as Br on Br.StaffId = Bl.StaffId and
        ( ( Bl.ClockIn < Br.ClockIn and Br.ClockOut <= Bl.ClockOut ) or ( Bl.ClockIn <= Br.ClockIn and Br.ClockOut < Bl.ClockOut ) )
  if @@RowCount > 0
    set @Changed = 1
  end

-- Return all of the coalesced periods ...
select StaffId, ClockIn, ClockOut, 'Coalesced Periods' as [Type]
  from @Bar
union all
-- ... and all of the independent periods.
select StaffId, ClockIn, ClockOut, 'Independent Period'
  from @TimesheetEntries as TS
  where not exists ( select 42 from @Bar where StaffId = TS.StaffId and ClockIn <= TS.ClockIn and TS.ClockOut <= ClockOut )
order by ClockIn, StaffId 
```

我确信应该进行一些优化。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T23:27:32.007

我认为你可以很容易地做到这一点，只需左连接回到自身和一次性匹配。以下不是完整的实现，而是更多的概念证明：

```
create table #TimeSheetEntries 
    ( 
    ID int identity not null primary key, 
    StaffID int not null, 
    ClockedIn datetime not null, 
    ClockedOut datetime not null 
    ); 

insert into #TimeSheetEntries 
    ( 
    StaffID, 
    ClockedIn, 
    ClockedOut 
    ) 
select 
    4, 
    '2012-01-01 09:00:00', 
    '2012-01-01 12:00:00' 
union all select 
    4, 
    '2012-01-01 13:30:00', 
    '2012-01-01 17:30:00' 
union all select 
    5, 
    '2012-01-01 09:00:00', 
    '2012-01-01 12:00:00' 
union all select 
    5, 
    '2012-01-01 14:09:00', 
    '2012-01-01 17:30:00'
union all select
    4,
    '2012-01-01 18:30:00', 
    '2012-01-01 19:30:00'
union all select 4, '2012-01-01 18:30:00', '2012-01-01 19:30:00';

select * from #timesheetentries tse1
left outer join #timesheetentries tse2 on tse1.staffid = tse2.staffid 
  and tse2.id = 
  (
      select MAX(ID) 
      from #timesheetentries ts_max 
      where ts_max.id < tse1.id and tse1.staffid = ts_max.staffid
  )
  outer apply   
  (
  select DATEDIFF(minute, tse2.clockedout, tse1.clockedin) as BreakTime
  ) as breakCheck

where BreakTime > 120 or BreakTime < 0 or tse2.id is null

order by tse1.StaffID, tse1.ClockedIn

   GO
   drop table #timesheetentries
   GO 
```

这里的想法是你有你的原始时间表表`tse1`，然后你`left join`对同一个时间表表做一个别名`tse2`和匹配的行，当`staffID`它是相同的并且`tse2.ID`是仍然小于的最高 ID 值`tse1.ID`。这显然是一种糟糕的形式 - 您可能希望用于此 ID 比较，按您的/值`ROW_NUMBER()`进行分区和排序，因为时间可能已按时间顺序输入。`StaffID``ClockedIn``ClockedOut`

此时，连接表中的一行现在包含来自当前时间表条目的时间数据，以及之前的时间数据。这意味着我们可以对连续时间条目的`ClockedIn`/值进行比较......并且使用，我们可以找出用户离开之前和最近的值之间的时间长度。我为此使用了 an 只是因为它使代码更清晰，但是您可能可以将其打包到子查询中。`ClockedOut``DATEDIFF()``Clockedout``ClockedIn``OUTER APPLY`

一旦我们执行了`DATEDIFF()`，就很容易找到个人`BreakTime`不超过 120 分钟障碍的情况并删除这些时间表条目，只留下员工时间表的重要行以供您以后的报告中使用。

# viewer - 同步查看多个日志文件

> ID：10934826
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:03.610
> 
> 标签：viewer, utility

我的嵌入式系统通过串行接口连接到 Linux 计算机，并生成多个带有行的文本日志文件，前面带有时间戳。我想同时离线查看几个这样的文件，并让它们在视觉上按时间同步——如果滚动一个，其余的也会根据时间戳滚动。有现成的查看器可以做到这一点吗？如果不是 - 可以做到这一点的最小努力方式是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T17:22:20.383

电锯使您能够同时跟踪多个文件。

Chainsaw 还支持数据库“视图”之类的东西，您可以通过“视图，从表达式创建选项卡”菜单选项告诉 Chainsaw 将来自各种来源的事件聚合到一个表中。

例如，如果您的所有日志文件共享一个公共记录器层次结构 (com.mycompany.blah.blah)，您可以使用根记录器定义一个表达式作为表达式，以便将该记录器的所有文件中的所有事件获取到一个单表：

记录器〜= com.mycompany

或者，如果您想要来自所有来源的所有事件，只需给它一个非表达式（只是一个文本名称），尽管您需要暂停电锯日志选项卡，否则您将获得电锯日志消息出色地：

全部

您还可以控制从这些文件接收到的事件如何最终出现在 UI 中。默认情况下，每个文件的事件都在其自己的选项卡中结束。但是，这可以通过首选项中的“选项卡名称/事件路由表达式”进行配置。

虽然它可能不是您想要的，但您可以“取消停靠”各个选项卡并将它们布置在屏幕上以同时查看它们，但是当您滚动时，Chainsaw 不会“同步”。

如果您有兴趣，请尝试最新的 Chainsaw 开发人员快照 - 它具有许多附加功能，并且与当前发布的版本相比，可用性得到了改进：

[http://people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T02:05:26.097

如果您在 Windows 上查看日志，Microsoft 的免费命令行工具 Logparser [http://logparserplus.com/Examples](http://logparserplus.com/Examples)具有标准日志的一些疯狂功能。

我必须开发一个内部工具来处理多个日志文件，它使用了一些 Logparser 来生成有趣（或所有）事件的主日志文件。处理专有时间戳和来自多个时区的日志！

# facebook-graph-api - 如何从多 id 查询中删除元数据字段

> ID：10934827
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:05.490
> 
> 标签：facebook-graph-api

我正在使用 open_graph Explorer 工具来测试这一点，我需要能够从 1000 个用户那里获得 first_name、last_name 和安装。目前，我将用户分组为 50 个以进行单个查询，并在一个批处理请求中将它们批处理为最多 20 个查询。

单个查询如下所示

```
?ids=100003825998801,100003825998802,547884299,100003825998803,100003825998804,100003825998805,100003825998806&fields=first_name,last_name,installed 
```

现在，问题是，当您像我一样在单个查询中使用多个 id 时，facebook 似乎会“强制”您使用某些字段，例如“元数据”和“字段”。是否可以从查询的结果集中删除这些字段？

此外，任何关于如何提高效率的建议也很好。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:30:10.343

您是否考虑过使用 FQL 代替……？

```
SELECT first_name, last_name, is_app_user FROM user
WHERE uid IN (100003825998801,100003825998802,547884299,100003825998803,
100003825998804,100003825998805,100003825998806) 
```

– 这只会为您提供所需的信息，您只需注意*安装*字段在 FQL 中名为 is_app_user 的事实。

# c++ - 调度自动化

> ID：10934830
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:06.447
> 
> 标签：c++

我自己并不确定我在这里要求什么，所以请耐心等待。

基本上，我有一个应用程序，除其他外，它必须能够处理从某个外部源接收到的命令，比如说一个套接字。

每个命令使用两个特定于该命令的数据结构——一个结构包含一组与该命令的处理相关的参数，另一个接收一些结果数据。

自然，数据传输处理程序类对哪个命令使用哪个结构一无所知，因此在收到命令后调用的第一件事如下所示：

```
CSocketHandler::ReceiveCommand(int CommandCode, const TBuffer& Args, TBuffer& Result); 
```

最后一个看起来像这样：

```
CClassBar::ProcessCommandFoo(const TFooArgs& Args, TFooResult& Result); 
```

现在，所缺少的只是将 TBuffer 转换为 TFooArgs，调用正确的方法，然后将 TFooResult 转换回 TBuffer 的部分（转换很简单）。

不同的处理程序类和命令的数量肯定会很大，所以我在这里看到的是一个三英里长的方法，它对不同的数据类型做同样的事情，然后一遍又一遍地调用不同的函数。

所以我的问题 - 是否可以自动化这个繁琐且容易出错的任务？最好只定义一个新的消息处理方法就足够了，但我愿意妥协。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:49:39.193

通用代码很好。

1.  创建两个转换方法，一个从`TBuffer`到`XArgs`，另一个从`XResult`到`TBuffer`
2.  创建自动命令包装器
3.  实现一个`map`自动分派给那些包装器

您可以通过指向函数的指针或继承来做到这一点，我想继承会更容易......

```
class BaseCommand {
public:
    virtual ~BaseCommand() {}

    virtual TBuffer invoke(TBuffer const& tb) = 0;
};

template <typename Args, typename Result>
class CommandT: public BaseCommand {
public:
    virtual TBuffer invoke(TBuffer const& tb) {
        Args const a = from_buffer(tb, &a); // free function
        Result const r = this->invoke(a);
        return to_buffer(r);            // free function
    }

private:
    virtual Result invoke(Args const&) = 0;
}; 
```

*注意：作为作弊，我们通过`&a`来`from_buffer`获得自动参数推导，预计指针未使用。*

所以，让我们假设我们有我们的论点和结果（两者都`int`更容易）：

```
int from_buffer(TBuffer const& tb, int const*) {
    return tb.asInt();
}

TBuffer to_buffer(int i) {
    return TBuffer(i);
} 
```

然后我们可以实现一个处理的命令`int`：

```
class IntCommand: public CommandT<int, int> {
    virtual int invoke(int const& i) override { return i; }
}; 
```

好的，让我们继续进行调度。这个想法是将每个命令注册到它的 ID。

```
template <typename T>
std::unique_ptr<BaseCommand> make_command() { return std::unique_ptr<T>(new T()); }

static std::map<int, std::unique_ptr<BaseCommand>> Commands;

int main() {
    Commands.insert(std::make_pair(1, make_command<IntCommand>()));
    // lots of them...

    // starts processing
} 
```

`SocketHandler`我们有：

```
void SocketHandler::ReceiveCommand(int code, TBuffer const& a, TBuffer& r) {
    typedef std::map<int, std::unique_ptr<BaseCommand>>::const_iterator const_it;

    const_it it = Commands.find(code);
    if (it == Commands.end()) {
        std::cerr << "Unknown command: " << code << "\n";
        throw std::runtime_error("Unknown command");
    }

    r = it->second->invoke(a);
} 
```

# java - 用一个副本替换一系列子字符串

> ID：10934832
> 
> 赞同：4
> 
> 时间：2012-06-07T15:23:08.797
> 
> 标签：java, regex

对于给定的单词，我想搜索所有相邻出现至少 3 次的子字符串，并将它们全部替换为一个。当子字符串只有一个字符时，我知道该怎么做。例如，下面的代码为输入字符串“Bahhhhhhh”返回“Bah”：

```
String term = "Bahhhhhhh";
term = term.replaceAll("(.)\\1{2,}", "$1"); 
```

但是，我需要一个更通用的模式，将“Bahahahaha”转换为“Baha”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T15:29:42.370

```
 String[] terms = { "Bahhhhhhh", "Bahahahaha" };
    for (String term : terms) {
        System.out.println(term.replaceAll("(.+?)\\1{2,}", "$1"));
    } 
```

### 输出：

```
Bah 
Baha 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:27:40.717

这适用于 1、2 或 3 个字符长的重复。

```
String term = "Bahhhhhhh";
term = term.replaceAll("(.{1,3})\\1{2,}", "$1"); 
```

您需要小心避免**巨大的回溯性能损失**。这就是为什么我将其限制为 1-3 个字符。

# spring - 使用 spring-3 的 RESTful Web 服务的示例 OSGI 项目

> ID：10934835
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:15.510
> 
> 标签：spring, rest, osgi, jpa-2.0

我需要一个 OSGI 示例项目，它使用 Spring 框架和 JPA 持久性项目创建 RESTful Web 服务。我试过用这些创建项目，但我想我做错了什么..我尝试了很多来找到这些异常的解决方案但失败了..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T14:19:01.453

您可以将 OSGi RemoteServices 与[Apache CXF DOSGi 一起](http://cxf.apache.org/distributed-osgi.html)使用。[您可以使用 JPA/JAX-RS/DOSGi](http://angelozerr.wordpress.com/about/eclipse_spring/eclipse_spring_dosgi/)查看非常好的博客文章。

# android - 为什么无法设置表格布局单元格的宽度？

> ID：10934841
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:26.947
> 
> 标签：android, width, tablelayout, setting

我尝试使用这个表格布局： http: [//blog.stylingandroid.com/archives/432](http://blog.stylingandroid.com/archives/432) 并遇到了一些麻烦。我一直在寻找原因很长时间，我决定更聪明地问：D

我的表代码：

```
package com.stylingandroid.ScrollingTable;

import java.util.LinkedList;
import java.util.List;

import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.LinearLayout;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.Toast;

public class ScrollingTable extends LinearLayout
{
    public ScrollingTable( Context context )
    {
        super( context );
    }

    public ScrollingTable( Context context, AttributeSet attrs )
    {
        super( context, attrs );
    }

    @Override
    protected void onLayout( boolean changed, int l, int t, int r, int b )
    {
        super.onLayout( changed, l, t, r, b );
        List<Integer> colWidths = new LinkedList<Integer>();

        final TableLayout header = (TableLayout) findViewById( R.id.HeaderTable );
        TableLayout body = (TableLayout) findViewById( R.id.BodyTable );

        for ( int rownum = 0; rownum < body.getChildCount(); rownum++ )
        {
            TableRow row = (TableRow) body.getChildAt( rownum );
            for ( int cellnum = 0; cellnum < row.getChildCount(); cellnum++ )
            {
                View cell = row.getChildAt( cellnum );
                Integer cellWidth = cell.getWidth();
                if ( colWidths.size() <= cellnum )
                {
                    colWidths.add( cellWidth );
                }
                else
                {
                    Integer current = colWidths.get( cellnum );
                    if( cellWidth > current )
                    {
                        colWidths.remove( cellnum );
                        colWidths.add( cellnum, cellWidth );
                    }
                }
            }
        }

        for ( int rownum = 0; rownum < header.getChildCount(); rownum++ )
        {

            final TableRow row = (TableRow) header.getChildAt(rownum);
            for (int cellnum = 0; cellnum < row.getChildCount(); cellnum++ ) {
                View cell = row.getChildAt( cellnum );
                TableRow.LayoutParams params = (TableRow.LayoutParams)cell.getLayoutParams();
                params.width = 200;
                cell.setOnClickListener(new OnClickListener(){
                    public void onClick(View v){
                        int wid = v.getWidth();
                         Log.i("crap", "wid" + wid);
                    }
                });

            }
        }
    }
} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <com.stylingandroid.ScrollingTable.ScrollingTable
        android:layout_width="fill_parent"
        android:orientation="vertical" android:layout_weight="1"
        android:layout_height="fill_parent">
        <TableLayout android:layout_height="wrap_content"
            android:layout_width="fill_parent" android:id="@+id/HeaderTable">
            <TableRow style="@style/HeaderRow">
                <TextView style="@style/HeaderText" android:text="Col 1" />
                <TextView style="@style/HeaderText" android:layout_weight="1"
                    android:text="Col 2" />
<!--                <TextView style="@style/HeaderText" android:text="Col 3" android:layout_span="2" / -->
<!--                TextView style="@style/HeaderText" android:text="Col 4" / -->
                <TextView style="@style/HeaderText" android:text="Col 333" />
                <TextView style="@style/HeaderText" android:text="Col 4" />
            </TableRow>
            <TableRow style="@style/BodyRow">
                <TextView android:text="Dummy" style="@style/BodyText" android:height="0dp" />
                <TextView android:text="Dummy" style="@style/BodyText"
                    android:layout_weight="1" android:height="0dp" />
                <TextView android:text="Dummy" style="@style/BodyText" android:height="0dp" />
                <TextView android:text="Dummy" style="@style/BodyText" android:height="0dp" />
            </TableRow>
        </TableLayout>
        <ScrollView android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <TableLayout android:layout_height="wrap_content"
                android:layout_width="fill_parent" android:id="@+id/BodyTable">
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 1,1" style="@style/BodyText" />
                    <TextView android:text="Cell 1,2" style="@style/BodyText"
                        android:layout_weight="1"/>
                    <TextView android:text="Cell 1,3" style="@style/BodyText"/>
                    <TextView android:text="Cell 1,4" style="@style/BodyText" />
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 2,1" style="@style/BodyText" />
                    <TextView android:text="Cell 2,2" style="@style/BodyText"
                        android:layout_weight="1" />
<!--                    <TextView android:text="Cell 2,3" style="@style/BodyText" android:layout_span="2"/> -->
<!--                    TextView android:text="Cell 2,4" style="@style/BodyText" / -->
                    <TextView android:text="Cell 2,3" style="@style/BodyText" />
                    <TextView android:text="Cell 2,4" style="@style/BodyText" />                
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 3,1" style="@style/BodyText" />
                    <TextView android:text="Cell 3,2" style="@style/BodyText"
                        android:layout_weight="1" />
                    <TextView android:text="Cell 3,3" style="@style/BodyText" />
                    <TextView android:text="Cell 3,4" style="@style/BodyText" />
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 4,1" style="@style/BodyText" />
                    <TextView android:text="Cell 4,2" style="@style/BodyText"
                        android:layout_weight="1" />
                    <TextView android:text="Cell 4,3" style="@style/BodyText" />
                    <TextView android:text="Cell 4,4" style="@style/BodyText" />
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 5,1" style="@style/BodyText" />
                    <TextView android:text="Cell 5,2" style="@style/BodyText"
                        android:layout_weight="1" />
                    <TextView android:text="Cell 5,3" style="@style/BodyText" />
                    <TextView android:text="Cell 5,4" style="@style/BodyText" />
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 6,1" style="@style/BodyText" />
                    <TextView android:text="Cell 6,2" style="@style/BodyText"
                        android:layout_weight="1" />
                    <TextView android:text="Cell 6,3" style="@style/BodyText" />
                    <TextView android:text="Cell 6,4" style="@style/BodyText" />
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 7,1" style="@style/BodyText" />
                    <TextView android:text="Cell 7,2" style="@style/BodyText"
                        android:layout_weight="1" />
                    <TextView android:text="Cell 7,3" style="@style/BodyText" />
                    <TextView android:text="Cell 7,4" style="@style/BodyText" />
                </TableRow>
                <TableRow style="@style/BodyRow">
                    <TextView android:text="Cell 8,1" style="@style/BodyText" />
                    <TextView android:text="Cell 8,2" style="@style/BodyText"
                        android:layout_weight="1" />
                    <TextView android:text="Cell 8,3" style="@style/BodyText" />
                    <TextView android:text="Cell 8,4" style="@style/BodyText" />
                </TableRow>
            </TableLayout>
        </ScrollView>
    </com.stylingandroid.ScrollingTable.ScrollingTable>
</LinearLayout> 
```

问题是这样的：我将宽度设置为这样的固定值： ... params.width = 200;

但是当我点击标题时，值只是 200 WTH？

# html - HTML layout with bootstrap

> ID：10934842
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:32.047
> 
> 标签：html, css

I am trying to get the desired layout as in [http://jsfiddle.net/yFxea/16/](http://jsfiddle.net/yFxea/16/) and the affect I am trying to achieve is on click of the "record" in the left, that attributes for that record to be displayed on right. But the attributes section's location should be the same for all records and as I click on each record the previous record's attributes should hide and display the current record's attributes. I was able to get the desired look and effect but what broke is the additional requirement that both the record content and attributes should be nested under the same DIV (or section tag).

I understand that this is not a bootstrap question but I don't want to break anything that bootstrap does.

Thanks

# c - What's a Singleton pointer in C?

> ID：10934844
> 
> 赞同：9
> 
> 时间：2012-06-07T15:23:51.033
> 
> 标签：c, pointers, singleton

I have some code which is like this (This is not production code. Just a sample code)

```
char *inbuf = NULL;
inbuf = buf; //buf is some other valid buffer of size 100.

func(&inbuf);

.....

void func(char **p)
{
  ...
  (*p)++;
  ...

} 
```

Coverity Tool says that "Taking address with &inbuf yields a singleton". I have heard the term singleton with respect to C++. But, what does a singleton pointer mean in terms of C?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T15:46:10.067

> 单例指针在 C 中是什么意思？

**`char*`在这种情况下，我认为 Coverity 指的是 char* 数组和指向通过获取该数组的地址创建的单个指针之间的差异。**

Coverity 警告您，通过传递 to 的第一个元素的地址`buf`，`func`您将更难以安全地写入该数组，因为您无法轻松确定其大小。

如果不查看所有代码，很难确定，但假设`buf`是您在顶级函数中某处声明的数组，则使用该函数中的`sizeof`运算符 on`buf`将产生数组的大小。

但是，当您在该行传递`buf`to的地址时`func`

```
func(&inbuf); 
```

...`func`仅接收指向该数组第一个元素的指针。从`func`你不能再用它`sizeof`来确定数组的大小——[它只会返回指针的大小](https://stackoverflow.com/questions/492384/how-to-find-the-sizeofa-pointer-pointing-to-an-array)——所以如果没有对数组包含多少空间的隐含理解，你就不能安全地写入该指针。

这会导致代码脆弱，因此是不好的做法。

（这些都与[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)无关）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T05:33:23.077

Coverity 分析正在标记以下模式的缺陷：

```
typeA var;        // declare a variable to some type
func(&var)        // call a function passing the address of var

func(typeA *var) {
      ...
      var++;      // inside the function do pointer arithmetic on var 
```

这是一个错误模式，通常，因为函数需要一个指向缓冲区的指针，但您传递给它的是一个指向单例值的指针。C/C++ 中的类型系统不区分“指向一个对象”和“指向对象数组的指针”。

# java - How to get the following formatted output?

> ID：10934848
> 
> 赞同：3
> 
> 时间：2012-06-07T15:23:52.887
> 
> 标签：java, formatting, format, ascii-art

I wrote the code to get the following formatted output, but when I enter number of rows in double digits, the output format changes. Why? How can I fix this?

```
 1
    1 2 1
  1 2 3 2 1
1 2 3 4 3 2 1 
```

Here is my code:

```
import java.util.*;
class PTri {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        System.out.println("Enter the no. of rows for which " +
                "triangle has to be constructed");
        int numrow = sc.nextInt();
        for (int i = 1; i <= numrow; i++) {
            for (int j = 1; j <= numrow - i; j++) {
                System.out.print("  ");
            }
            for (int k = 1; k < i * 2; k++) {
                System.out.print(Math.min(k, i * 2 - k) + " ");
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:55:54.053

这是因为两位数的值会改变整个架构。集合将向右移动一个位置。所以你可以提出这样的条件。我在数字之间添加了一个额外的空格以提高可见性。

```
import java.util.*;
class PTri {
    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        System.out.println("Enter the no. of rows for which " +
                "triangle has to be constructed");
        int numrow = sc.nextInt();
        for (int i = 1; i <= numrow; i++) {
            for (int j = 1; j <= (numrow - i); j++) {
                System.out.print("    ");
            }
            for (int k = 1; k < i * 2; k++) {
                int temp = Math.min(k, i * 2 - k);

                if (temp > 9) {
                    System.out.print(temp + "  ");
                } else {
                    System.out.print(temp + "   ");
                }
            }
            System.out.println();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:16:23.690

在这个例子中，我计算了数字，并为每个数字添加了一个额外的空格。值的输出使用前导零（数字计数）进行格式化。

```
public static void main(final String[] args) {
    final Scanner sc = new Scanner(System.in);
    System.out.println("Enter the no. of rows for which " +
            "triangle has to be constructed");
    final int numrow = 100;// sc.nextInt();

    final int digits = (int) Math.log10(numrow) + 1;

    for (int i = 1; i <= numrow; i++) {
        for (int j = 1; j <= numrow - i; j++) {
            System.out.print(" ");
            for (int l = 0; l < digits; l++) {
                System.out.print(" ");
            }
        }
        for (int k = 1; k < i * 2; k++) {
            final int value = Math.min(k, i * 2 - k);
            System.out.print(String.format("%0" + digits + "d ", value));
        }
        System.out.println();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-21T11:32:28.857

您可以使用[`String.format`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format(java.lang.String,%20java.lang.Object...))方法：

*   `"%2d"`- 格式为*两位数*。
*   `"%02d"`- 格式为带有前导零*的两位数。*

例子：

```
// int n = 5;
int n = 12;
// number of digits
int digits = String.valueOf(n).length();
// format string
String format = "%" + digits + "d";
// output
System.out.println("n=" + n + ", format=" + format);
IntStream.rangeClosed(1, n)
        .mapToObj(i -> IntStream.rangeClosed(-n, i)
                .map(Math::abs)
                .map(j -> j = i - j)
                .filter(j -> j != 0)
                .mapToObj(j -> j > 0 ?
                        String.format(format, j) : " " .repeat(digits))
                .collect(Collectors.joining(" ")))
        .forEach(System.out::println); 
```

输出：

```
n=5, format=%1d
        1
      1 2 1
    1 2 3 2 1
  1 2 3 4 3 2 1
1 2 3 4 5 4 3 2 1 
```

```
n=12, format=%2d
                                  1
                               1  2  1
                            1  2  3  2  1
                         1  2  3  4  3  2  1
                      1  2  3  4  5  4  3  2  1
                   1  2  3  4  5  6  5  4  3  2  1
                1  2  3  4  5  6  7  6  5  4  3  2  1
             1  2  3  4  5  6  7  8  7  6  5  4  3  2  1
          1  2  3  4  5  6  7  8  9  8  7  6  5  4  3  2  1
       1  2  3  4  5  6  7  8  9 10  9  8  7  6  5  4  3  2  1
    1  2  3  4  5  6  7  8  9 10 11 10  9  8  7  6  5  4  3  2  1
 1  2  3  4  5  6  7  8  9 10 11 12 11 10  9  8  7  6  5  4  3  2  1 
```

* * *

^(另请参阅：[在每行之后打印二维数组中的行和列的总和](https://stackoverflow.com/a/66295257/14940971))

# perl - Perl Search and Capture Line After

> ID：10934850
> 
> 赞同：0
> 
> 时间：2012-06-07T15:23:53.727
> 
> 标签：perl, search

Alright, so this is probably a pretty easy question to answer, but I'm struggling with it. I'm trying to get my program to capture everything after a certain word and then print it. For example, if the input text is

bar foo foo foo foo

Then I want the output to be "foo foo foo foo" if I am searching for bar. I hope my question makes sense. Any help would be greatly appreciated! I'm very new to perl, so the more explanation you can give, the better. Thank you!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:26:34.693

```
#! /usr/bin/env perl

*ARGV = *DATA;  # for demo only

while (<>) {
  print "line $.: $1\n" if /bar\s+(.+)/;
}

__DATA__
you can't see me
bar foo foo foo foo
nope 
```

输出：

```
第 2 行： foo foo foo foo
```

# ruby-on-rails - 如何使用 Induction 连接到本地 SQLite 数据库？

> ID：10934852
> 
> 赞同：5
> 
> 时间：2012-06-07T15:24:09.147
> 
> 标签：ruby-on-rails, induction

我正在尝试使用[Induction](http://inductionapp.com/)连接到我的本地 SQLite 数据库，但是我不知道如何建立连接。在以前的 SQLite 客户端中，我只是打开了数据库文件。

![感应连接屏](../Images/5b5b7aa2052be714332a22f4a9ab3f5e.png)

我应该在这些字段中添加哪些属性？我的数据库很简单`development.db`，位于我的 Rails 应用程序中

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-19T15:08:42.233

这就是我打开 sqlite3 的方式

方法一：填写第一个框`file://path/to/file/db.sqlite3`，选择文件适配器，在Database栏填写：`Path/to/yourdb.sqlite3`

方法二：可以在app图标上拖拽sqlite3文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:35:43.847

您是否尝试将数据库的路径放在“数据库”字段中？通常这就是 SQLite 所需要的。

# javascript - d3 js - 在没有 http get 的情况下加载 json

> ID：10934853
> 
> 赞同：64
> 
> 时间：2012-06-07T15:24:10.763
> 
> 标签：javascript, json, d3.js, bubble-chart

我正在学习d3。在 d3 js 中有[一些加载数据的方法。](https://github.com/mbostock/d3/wiki/Requests#wiki-d3_xhr)但他们似乎都做了一个 HTTP GET。在我的场景中，我已经在字符串中有 json 数据。如何使用此字符串而不是发出另一个 http 请求？我试图为此寻找文档，但没有找到。

这有效：

```
d3.json("/path/flare.json", function(json) {
    //rendering logic here
} 
```

现在，如果我有：

```
//assume this json comes from a server (on SAME DOMAIN)
var myjson = '{"name": "flare","children": [{"name": "analytics","children": [{"name": "cluster","children": [{"name": "MergeEdge", "size": 10 }]}]}]}'; 
```

如何在 d3 中使用已计算的“myjson”并避免对服务器的异步调用？谢谢。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-06-07T15:34:12.723

只需将`d3.json`调用替换为

```
json = JSON.parse( myjson ); 
```

IE：

```
var myjson = '{"name": "flare","children": [{"name": "analytics","children": [{"name": "cluster","children": [{"name": "MergeEdge", "size": 10 }]}]}]}';

// d3.json("/path/flare.json", function(json) { #delete this line

    json = JSON.parse( myjson ); //add this line

    //rendering logic here

//} #delete this line 
```

**更新 09/2013**

原始代码已更改。所以 varname`json`应该是`root`：

```
// d3.json("flare.json", function(error, root) { #delete this line

    root = JSON.parse( myjson ); //add this line

    //rendering logic here

//} #delete this line 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T15:57:12.050

chumkiu 的答案对我来说非常有用，但需要进行一些调整 - 在最新版本的 d3 气泡图中，您需要定义 root 而不是 json，如

```
 root = JSON.parse( myjson ); 
```

或者，您当然可以在其余代码中将“root”替换为“json”。:-)

对于任何回答有关使用本地数据集的 d3 节点链接树的问题的人来说，这个答案对我来说非常有用 - 非常感谢此页面上的贡献者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T15:49:49.047

根据这个例子：

[http://phrogz.net/JS/d3-playground/#StockPrice_HTML](http://phrogz.net/JS/d3-playground/#StockPrice_HTML)

在这里，他们将图形数据存储在变量 $data 中，并通过 .data($data) 函数进行设置。

我会将此方法应用于您正在使用的任何图表。

# java - Apache Axis and Map/Properties (aka, options) parameters

> ID：10934857
> 
> 赞同：1
> 
> 时间：2012-06-07T15:24:13.713
> 
> 标签：java, jax-ws, axis

I'm new to Apache Axis and Java-bases web services, so this question might be trivial.

I've a @WebMethod that should receive an arbitrary set of options as one of its parameters, things like outputFormat, showDetails, scoreThreeshold etc.

Ideally, I'd like that the client has not to specify null values for these options, if it is fine with the defaults (i.e., they're optional :-)). In regular Java this would just be a Properties or Map parameter. What is the best approach to do the same for a web service? I've read around that Axis/Jax-WS don't like Collection(s), apart from List and Set. So, what could I use instead?

# c# - 用于存储在 oracle 表中的确切命令

> ID：10934861
> 
> 赞同：0
> 
> 时间：2012-06-07T15:24:21.017
> 
> 标签：c#, .net, visual-studio-2010, oracle11g

这适用于 C#、Visual Studio 2010 中的网站。

我创建了一个包含许多文本框、日期选择器、下拉列表等的表单。我在 sqlplus 中创建了一个表，其中包含必要类型（varchar、数字、日期）的列。当我单击表单中的提交按钮时，我想将数据存储在我创建的表中。

只是为了让你们更简单，假设我有 3 个文本框（名称（文本）、id、日期（我已将文本框中的日期打印为字符串））。

当我点击提交时，它应该用这些数据填充表格。我正在努力让 OracleCommand 执行此操作。

```
cmd = new OracleCommand(______, con); 
```

如果有任何其他方式我可以通过操纵类型来做到这一点也很受欢迎:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:35:53.087

oracle 命令的插入语法通常遵循该模式；

```
string query = @"INSERT INTO SOME_TABLE VALUES (SOME_COLUMN_1 = :SomeParam1,SOME_COLUMN_2 = :SomeParam2 )";
OracleCommand command = new OracleCommand(query, connection) { CommandType = CommandType.Text };
command.Parameters.Add(":SomeParam1", OracleDbType.Varchar2).Value = "Your Val 1";
command.Parameters.Add(":SomeParam2", OracleDbType.Varchar2).Value = "Your Val 2";
connection.ExecuteNonQuery(); 
```

在此处查看更多参考示例； [在 Oracle ODP.NET 中使用命名参数](http://www.codeproject.com/Articles/208176/Gotcha-sharp1161-Using-Named-Parameters-with-Oracl)

# python - Tornado：支持同一个 IOLoop 上的多个应用程序

> ID：10934864
> 
> 赞同：7
> 
> 时间：2012-06-07T15:24:41.860
> 
> 标签：python, web-applications, tornado

我想知道是否可以在[Tornado](http://www.tornadoweb.org)框架中在同一个 IOLoop 上注册多个[应用程序？](http://www.tornadoweb.org/documentation/web.html#application-configuration)

就像是

```
application1 = web.Application([
    (r"/", MainPageHandler),
])
http_server = httpserver.HTTPServer(application1)
http_server.listen(8080)

application2 = web.Application([
    (r"/appli2", MainPageHandler2),
])
http_server2 = httpserver.HTTPServer(application2)
http_server2.listen(8080)

ioloop.IOLoop.instance().start() 
```

基本上我正在尝试构建我的网络应用程序，以便：

1.  功能应用程序是分开的
2.  每个 webapp 上可以有多个具有相同目的的处理程序（例如管理/监控/等）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T15:49:21.540

简单的事情是，如果您要将应用程序绑定到不同的端口：

```
...
http_server = httpserver.HTTPServer(application1)
http_server.listen(8080)    # NOTE - port 8080

...
http_server2 = httpserver.HTTPServer(application2)
http_server2.listen(8081)   # NOTE - port 8081

ioloop.IOLoop.instance().start() 
```

这是 Tornado 简化的基本情况。挑战在于，通过在 URI 级别路由到应用程序，您跨越了设计边界，即每个应用程序负责其请求的所有 URI。

如果它们都真的需要在 URI 级别而不是端口上提供服务，那么最好在不同的端口上托管不同的应用程序并让 Nginx/Apache 进行 URI 路由 - 任何涉及弄乱应用程序/请求处理的事情都将成为一个受伤的世界。

# graph - 如何在 GEF 编辑器中使用 JUNG 绘制图形

> ID：10934869
> 
> 赞同：0
> 
> 时间：2012-06-07T15:25:03.587
> 
> 标签：graph, editor, eclipse-rcp, jung, eclipse-gef

是否可以使用 JUNG 图在 RCP 应用程序的 GEF 编辑器中显示模型数据，而不是使用`Figures`GEF 本身的等？我想使用 JUNG 为我的模型绘制图表，但仍然可以使用弹出调色板、`ScalableFreeformLayeredPane`以及其他 GEF 好东西之类的东西。该图表应通过 GEF 板载方式保持可编辑。我只是认为 JUNG 有更好的算法来绘制实际图形。

有没有人成功地做到这一点或有任何例子/起点给我？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:40:05.327

不，你不能那样做。GEF 是建立在 draw2d 之上的，要改变这一点并不容易。

# mysql - 找出表A到表B是否没有外键链接的简单方法？

> ID：10934876
> 
> 赞同：4
> 
> 时间：2012-06-07T15:25:31.560
> 
> 标签：mysql, select, join, foreign-keys

假设我有 table `A`，有一个`id`列，而 table B 有一个`A_id`列。`A_id`是 的外键`id`。现在，如果我想从 A 中获取 B 具有外键链接的所有 id，我可以这样做

```
SELECT id FROM A JOIN B ON id = A_id 
```

但是，如何从 A 中选择 B*未*链接到的所有 id？（不选择所有 id 并从中减去上述子集）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:28:36.237

```
SELECT  id
FROM    a
WHERE   id NOT IN
        (
        SELECT  a_id
        FROM    b
        ) 
```

这将使用反连接：对于来自 的每条记录`a`，它将搜索`b`记录`id`（使用 上的索引`b.a_id`），如果没有找到，则返回记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:29:52.603

```
SELECT A.id FROM
A LEFT JOIN B ON A.id = B.A_id
WHERE B.A_id IS NULL; 
```

# jsp - 从 Web 应用程序到另一个应用程序的导航问题

> ID：10934878
> 
> 赞同：0
> 
> 时间：2012-06-07T15:25:33.873
> 
> 标签：jsp, servlets, http-redirect

我有 webapp1，它有一个简单的 index.jsp

```
<form method="post" action="TestHarnessClass">
    SSN:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="ssn" /> 
    <br />
    Username: <input type="text" name="un" />
    <br /><br />
    <input type="submit" value="Go to user contracts" />
</form> 
```

和一个后端 servlet

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String ssn = request.getParameter("ssn").trim();
    String username = request.getParameter("un").trim();
    request.setAttribute("ssn", ssn);
    request.setAttribute("un", username);
    response.sendRedirect(url);
} 
```

我可以看到浏览器中的地址更改为正确的 url，其中 un 和 ssn 编码为查询参数，我检查了请求参数，它具有 ssn 和 un：

![在此处输入图像描述](../Images/87aca6beb2962eefb70f1f80f1829e84.png)

但在另一个网络应用程序上，我有以下代码：

```
String ssn = request.getParameter("ssn");
String username = request.getParameter("un"); 
```

ssn 和用户名都为空。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:45:48.103

我认为您应该将 Servlet 更改为

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws                                            
   ServletException, IOException {
      String ssn = request.getParameter("ssn").trim();
      String username = request.getParameter("un").trim();
      response.sendRedirect(url + "?ssn=" + ssn + "&un=" + un);
} 
```

# c++ - OpenMP - 执行期间挂起

> ID：10934879
> 
> 赞同：1
> 
> 时间：2012-06-07T15:25:34.807
> 
> 标签：c++, gdb, openmp

我遇到使用 OpenMP 并行化的程序的不一致行为。

当我运行它时，它会打印出它的当前阶段，因此预期的输出是：“2 3 4 5”等。前几个阶段之间的时间通常是 1 到 2 秒（在 4 个内核上并行运行时）。

但是，如果不重新编译或更改任何内容，有时当我运行软件时，它会在打印后立即挂起`2`（在执行第一个并行代码之前打印）；

它不会变慢，它实际上会停止计算。我已经在 gdb 下运行它并确认它挂在 OpenMP 内部：

（由于超线程，线程多于4个）

```
[New Thread 0x7ffff6c78700 (LWP 25878)]
[New Thread 0x7ffff6477700 (LWP 25879)]
[New Thread 0x7ffff5c76700 (LWP 25880)]
[New Thread 0x7ffff5475700 (LWP 25881)]
[New Thread 0x7ffff4c74700 (LWP 25882)]
[New Thread 0x7ffff4473700 (LWP 25883)]
[New Thread 0x7ffff3c72700 (LWP 25884)]
^C
Program received signal SIGINT, Interrupt.
0x00007ffff7641fd4 in ?? () from /usr/lib/libgomp.so.1
(gdb) up
#1  0x00007ffff7640a9e in ?? () from /usr/lib/libgomp.so.1
(gdb) 
#2  0x0000000000408ae8 in Redcraft::createStructures (this=0x7fffffffd8d0) at source/redcraft.cpp:512
512 #pragma omp parallel for private(node) 
```

最初是`pragma`指定`schedule(dynamic)`的，但拥有或删除不会改变此挂断的一致性。最后，我尝试启用/禁用`omp_set_dynamic()`，但也没有效果。

有什么调试建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:09:49.503

This usually happens when there is data race.You'll have to post the code block that is being parallelized.Basically what is to be found out is how the threads are using the data.Rerunning without compiling doesn't guarantee the same thread execution sequence hence these kind of problems arise.Are you working with files?You'll have to close them before rerunning.

# macos - 山狮PKG签约

> ID：10934882
> 
> 赞同：7
> 
> 时间：2012-06-07T15:25:50.970
> 
> 标签：macos, osx-mountain-lion, pkg-file

我有一个插件，根据指南不需要签名，但我也有必须签名的 pkg 安装程序（安装插件）。所以我签署了我的插件和 pkg 文件，以确保更安全。由于没有检查插件，我没有看到任何问题。但是我的 pkg 安装程序有问题。我在 10.6.8 上由 pkg 安装程序签名，以便我可以在 10.5、10.6、10.7 和 10.8 上重复使用它。我使用了以下命令

```
productsign --sign "Developer ID Installer: My Company" /Volumes/code/MyInstaller.pkg "/Volumes/code/My Installer.pkg" 
```

productsign 显示的日志令人鼓舞

```
productsign: signing product with identity "Developer ID Installer: My Company" from keychain /Users/vishveshk/Library/Keychains/login.keychain
productsign: adding intermediate certificate "Developer ID Certification Authority"
productsign: Wrote signed product archive to /Volumes/code/My Installer.pkg 
```

当我在 10.8 上使用

```
sudo spctl -a -v My Installer.pkg 
```

结果很糟糕

```
My Installer.pkg: rejected
source=no usable signature 
```

我在同一台机器上签署了我的插件，它似乎工作正常。我做错什么了吗？对此的任何见解都是有用的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-09T20:19:11.320

我遇到了同样的问题。问题是您的 spctl 命令行错误。根据[此处的 Apple 文档](https://developer.apple.com/library/mac/#documentation/ToolsLanguages/Conceptual/OSXWorkflowGuide/DistributingApplicationsOutside/DistributingApplicationsOutside.html)，您需要指定类型，如下所示：

spctl -a -v **--type install** MyPackageName.pkg

很有可能您的签名包在 Mountain Lion 下运行良好。只是有问题的命令行误导您认为存在签名问题。

# javascript - node.js 并在运行时/期间生成模块

> ID：10934883
> 
> 赞同：1
> 
> 时间：2012-06-07T15:25:52.603
> 
> 标签：javascript, node.js, module, runtime, dynamically-generated

我目前正在开发一个 node.js 项目，该项目需要在运行时和运行时生成和更改内存中的对象。我知道这听起来令人困惑，所以这里有一个例子。

周一上午 10 点：

```
var PI = Math.PI;

exports.area = function (r) {
   return PI * r * r;
}; 
```

周一上午 11 点：

```
var PI = Math.PI;
var minSize = 10;

exports.area = function (r) {
   if (r >= minSize) {
      return PI * r * r;
   } else {
      return "Error: Minimum size not met.";
   }
}; 
```

周一中午 12 点：

```
var PI = Math.PI;
var minSize = 10;
var msg = "Error: Minimum size of " + minSize + "not met.";    

exports.area = function (r) {
   if (r >= minSize) {
      return PI * r * r;
   } else {
      return msg;
   }
}; 
```

周二上午 10 点：

```
var PI = Math.PI;
var minSize = 15;
var error['eng'] = "Error: Minimum size of " + minSize + "not met.";    
var error['chn'] = "錯誤：不符合最小尺寸:" + minSize + "。"    

exports.area = function (r) {
   if (r >= minSize) {
      return PI * r * r;
   } else {
      return error;
   }
};

exports.circumference = function (r) {
   if (r >= minSize) {
      return 2 * PI * r;
   } else {
      return error;
   }
}; 
```

* * *

这是一个人为的例子，因为大多数更改可以通过适当的计划避免，我知道，但这有点说明了这一点。该模块在变量和函数中不断变化，在服务器运行时扩展。

以下是我的限制：

*   使用原型继承（没有关键字“new”）
*   更改在下次调用函数时生效
*   更改包括添加新变量和函数
*   需要保存更改以重新启动服务器
*   无法使用 eval()

我想到了两种可能的策略：

1.  使用 .prototype，继续添加/更改函数和变量。

    *   优点：能够在服务器运行时执行此操作
    *   缺点：我不确定如何将其保存到文件中。据我所知，如果不以某种方式使用 eval()，我无法将函数保存到文件中
2.  直接编辑文件并通过类似[node-supervisor](https://github.com/isaacs/node-supervisor)的方式重新加载它们。

    *   优点：更改将被保存，版本可以保存并恢复到
    *   缺点：我认为使用 eval() 直接编辑文件或多或少会产生相同的后果，即，如果有人偷偷溜出恶意软件，系统可能会崩溃。

这就是我现在能想到的。将不胜感激这方面的任何意见或选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T16:20:59.530

备查：

*   [node.js 的 vm 模块](http://nodejs.org/api/vm.html)有几个[runInContext()](http://nodejs.org/api/vm.html#vm_vm_runinthiscontext_code_filename)函数，它们将有效地沙箱执行并防止访问其范围之外的变量。这里有[一篇博客文章](http://www.davidmclifton.com/2011/08/18/node-js-virtual-machine-vm-usage/)讨论了不同版本之间的差异，并提供了基准测试
*   还有一个可用于 node.js的[沙盒模块](http://gf3.github.com/sandbox/)
*   在沙箱中运行东西的缺点是执行速度要慢很多

结论：在沙箱范围内存储函数并安全执行它们并非不可能，只是不太实用。

替代解决方案：如果函数本身不是太复杂，将调用以[DSL](http://en.wikipedia.org/wiki/Domain-specific_language)的形式存储并在之后将它们解析回来并非不可能。

# c# - 在 Silverlight 中调用事件后，是否有理由从事件中删除该方法？

> ID：10934884
> 
> 赞同：0
> 
> 时间：2012-06-07T15:25:54.680
> 
> 标签：c#, silverlight, events

最近我遇到了越来越多的人，他们的代码类似于以下内容：

```
private AsynchronousReader r;

public SynchronousReader()
{
    r = new AsynchronousReader();

    // My practice is to put this here
    // and then never remove it and never add it again
    // thus cleaning up the code and preventing constant add/remove.
    //r.ReadCompleted += this.ReadCompletedCallback;
}

private ReadCompletedCallback()
{
    // Remove the callback to "clean things up"...
    r.ReadCompleted -= this.ReadCompletedCallback;

    // Do other things
}

public Read()
{
    r.ReadCompleted += this.ReadCompletedCallback;

    // This call completes asynchronously and later invokes the above event
    r.ReadAsync();
    r.WaitForCompletion();
} 
```

人们说这种做法比我上面指出的要好，并给出了 Silverlight 特有的几个原因。他们说它可以防止内存泄漏、线程问题，甚至是正常的做法。

我还没有做过多少 Silverlight，但仍然这样做似乎很愚蠢。是否有任何具体原因可以使用此方法，而不仅仅是在构造函数中安装回调一次并在对象的生命周期内？

这就像我可以举的例子一样简单。忽略它是一种将异步对象转换为同步对象的包装器这一事实。我只是对添加和删除事件的方式感到好奇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:29:27.817

在您提到的情况下，*将*其连接一次是有意义的，但由于事件处理程序仍引用它们，因此对象（父和/或子）可能不会被垃圾收集。

根据[Marc Gavel 这里](https://stackoverflow.com/questions/298261/do-event-handlers-stop-garbage-collection-from-occuring)

> 即如果我们有：
> 
> ```
> publisher.SomeEvent += target.SomeHandler; 
> ```
> 
> 那么“发布者”将使“目标”保持活动状态，但“目标”不会让“发布者”保持活动状态。

要记住的更重要的一点可能是子对象的生命周期。**如果它与父级相同，那么构造函数中的一次性订阅更有意义。**如果它是动态的，您可能希望删除处理程序，因为我已经看到它们泄漏（导致多个回调）。

注意：*如果仅构造函数的方法会泄漏对象，您总是可以在`Dispose()`我猜中取消订阅，但我不能说我曾经见过。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T16:03:24.103

听起来你有两个问题：

1.  您正在尝试重用一个真正应该只使用一次的对象。
2.  该对象需要得到适当的清理。

您实际上应该只使用一次 SynchronousReader 对象的实例（从而避免两个异步调用竞速而一个未能像您在其他地方提到的那样完成），或者您应该实现 IDisposable 以取消订阅事件并防止内存泄漏。

第三种解决方案可能是可能的：保留 SynchronousReader 的单个实例，但对 SynchronousReader.Read 的每次调用都会创建一个新的 AsynchronousReader 实例（而不是将其存储为实例中的私有字段）。然后你可以保留大部分你不喜欢的代码，但它可以正确处理事件订阅。

# android - 在 sd 上创建一个带有子文件夹的文件夹

> ID：10934885
> 
> 赞同：6
> 
> 时间：2012-06-07T15:25:58.567
> 
> 标签：android, eclipse

我遇到了以下代码的问题：

```
 File folder = new File(Environment.getExternalStorageDirectory() + "/myapp/folderone/foldertwo");
    boolean success = false;
    if (!folder.exists()) {
        success = folder.mkdir();
    }
    if (!success) {
    } else {
    } 
```

但它根本不起作用我还添加了权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T15:31:32.683

尝试使用`mkdirs()`而不是`mkdir()`仅使用，这对我有用。

例子：

```
File folder = new File(Environment.getExternalStorageDirectory() + "/myapp/folderone/foldertwo");
    boolean success = false;
    if (!folder.exists()) {
        success = folder.mkdirs();
    }
    if (!success) {
    } else {
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T15:29:14.843

您是否尝试过调用`mkdirs()`而不是`mkdir()`？

mkdir 只会创建指定的单个文件夹。在你的情况下“文件夹二”。

mkdirs 将创建指定的文件夹 (foldertwo) 以及路径中的所有其他必需文件夹 (myapp & folderone)

# iphone - 关闭模态视图后视图向上移动 20px

> ID：10934893
> 
> 赞同：2
> 
> 时间：2012-06-07T15:26:33.210
> 
> 标签：iphone, frame, statusbar, navigationbar

我正在开发基于故事板的应用程序（iPhone）。应用程序有一个导航控制器开始。我们正在与它集成一个现有的应用程序。因此，我们需要在单击按钮时加载 NIB 文件。

```
 NSBundle *someBundle = [NSBundle category_bundle ];    
 MainWindow *aViewController = [[MainWindow alloc] 
                          initWithNibName:nibName 
                          bundle:someBundle];
 [self.navigationController pushViewController:aViewController animated:YES]; 
```

现有应用程序然后加载另一个 VC。

```
[[self navigationController] pushViewController:mySecondView animated:YES]; 
```

这一观点再次来自NIB。

然后，此视图使用单例获取 MainWindow 的实例（在第一步中加载）并请求它显示模式视图。“糟糕的设计”，但我无法更改它，因为这是一个现有的应用程序，我需要明天提供集成。

模态显示为 -

```
[self presentModalViewController:aModal animated:YES]; 
```

我们正在横向打开模式，为此我们在其 viewWillAppear 中使用此代码-

```
[UIApplication sharedApplication].statusBarOrientation = self.interfaceOrientation; 
```

并且在`viewDidDisappear`

```
if (SYSTEM_VERSION_LESS_THAN(@"5.0")) {
            [UIApplication sharedApplication].statusBarOrientation = self.parentViewController.interfaceOrientation;
        } else {
            [UIApplication sharedApplication].statusBarOrientation = self.presentingViewController.interfaceOrientation;
        } 
```

**问题**：

问题是在模式弹出窗口关闭后，MainWindow 的 UIView 向上移动了 20px。我试图重置框架。还尝试隐藏状态栏，但状态栏部分隐藏了导航栏，为了解决此问题，我们尝试在状态栏可见后隐藏导航栏，然后再次显示，但没有成功。

请让我知道如何解决此问题。

# c# - EF Code-First：多对多单向导航

> ID：10934901
> 
> 赞同：4
> 
> 时间：2012-06-07T15:26:52.513
> 
> 标签：c#, entity-framework-4.1, ef-code-first

我正在尝试创建一个代码优先模型，其中一个人可以拥有许多最喜欢的电影，但我不希望电影表中有一个 FK。

实现这一点的唯一方法是让 EF 在两个实体之间创建一个链接表，并做到这一点（afaik）我已经在与 Person 相关的 Movies 实体上创建了一个集合属性......

```
public class Person
{
    public int Id { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public virtual IList<Movie> FavouriteMovies { get; set; }
}

public class Movie
{
    public int Id { get; set; }
    public string Name { get; set; }
    public virtual IList<Person> People { get; set; } // I don't want this here :(
} 
```

我希望电影看起来像这样...

```
public class Movie
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

但这样做时，EF 不会创建链接表，它只会在 Movies 表中敲击 Person_Id FK 列。

我不希望这种情况发生，因为电影不应该与人有任何关系，我可能想将它与其他事物联系起来。

那我怎么吃蛋糕呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:33:08.497

它应该。你如何添加你的实体？这是一个示例：

```
public class Character : BaseEntity
{
    public string Name { get; set; }
    public bool IsEvil { get; set; }
    public virtual ICollection<Videogame> Videogames { get; set; } 
}
public class Videogame : BaseEntity 
{
    public string Name { get; set; }
    public DateTime ReleasedDate { get; set; }
    public virtual ICollection<Character> Characters { get; set; }
    public Author Author { get; set; }
} 
```

这是添加记录的位置：

```
[Test]
public void CreateJoinTable()
{
    var character = new Character() {Name = "Wario", IsEvil = true};
    var videogame = new Videogame() {Name = "Super Mario Bros 20", ReleasedDate = DateTime.Now , Characters = new Collection<Character>()};
    videogame.Characters.Add(character);
    var context = new NerdContext();
    context.Add(videogame);
    context.SaveAllChanges();
} 
```

这是片段的来源： http: [//george2giga.com/2012/05/02/easy-join-tables-with-ef-code-first/](http://george2giga.com/2012/05/02/easy-join-tables-with-ef-code-first/)

# ruby - Ruby 1.9.3：导入给定目录中的所有文件

> ID：10934904
> 
> 赞同：1
> 
> 时间：2012-06-07T15:26:56.370
> 
> 标签：ruby

我无法从给定目录导入我需要的所有 .rb 文件，我知道这个问题已经被问了很多，但之前的帖子似乎都没有解决我的问题。

这是我的目录结构：

```
- Docs
- Lexer
- Parser
  --> Parser.rb
- SyntaxTree
  --> I want all the .rb files from here
  --> Sets.rb (Module I want to import)
      --> EMPTY_SET (constant I want to reference)
- Test
<Main Program> 
```

我目前在 Parser.rb 中工作，我需要从 SyntaxTree 目录中获取所有 .rb 文件，以便可以在 Parser.rb 中引用它们。我还想导入 Sets.rb 中包含的 Sets 模块。

这是我目前尝试导入我在之前的大多数帖子中看到的所有 ruby​​ 文件的方式：

```
Dir['../SyntaxTree/*.rb'].each {|file| require file} 
```

我也试过：

```
Dir['../SyntaxTree/*.rb'].each {|file| require_relative file} 
```

在尝试包含 Sets 模块时，使用其中任何一种方法仍然会出错：

```
class Parser
  include Sets
  .
  .
end
`<class:Parser>': uninitialized constant Parser::Sets (NameError) 
```

如果我直接包含`Sets.rb`错误就会消失

任何想法都会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:34:00.373

最好的方法是在模块中设置适当的`autoload`依赖关系，以便按需加载所需的类。如果您只是在 using 中加载所有文件`require`，则必须根据文件名加载它们的顺序并不明显，并且不会解决任何相互依赖关系。

这就是为什么为您的应用程序拥有一个顶级命名空间会有所帮助的原因。例子：

```
module MyApp
  autoload(:Parser, 'my_app/parser')
  autoload(:Sets, 'my_app/sets')
end 
```

现在这些类应该按需自动加载。

# java - 在 tomcat 7 / maven 嵌入式 tomcat 上运行 Spring 3.1 webapp

> ID：10934905
> 
> 赞同：1
> 
> 时间：2012-06-07T15:27:03.570
> 
> 标签：java, spring, tomcat, maven

我只是从 Spring 3.0.6 升级到 3.1，在 Tomcat 上运行它似乎存在问题。显然，它具有 Spring 3.0.6 依赖项，并会在启动时尝试使用它。然而，这与我的 Spring 3.1 应用程序冲突。我在尝试通过部署时得到了这个

```
mvn clean package tomcat:run 
```

以及尝试在 Tomcat 7 中运行它时（通过 Eclipse 或将其复制到 tomcat webapps 文件夹）

这里有什么解决方案？升级到 Maven 3 会有所帮助吗？maven Tomcat 插件呢？1.1 已经发布，但版本 2 似乎仍在开发中。有没有人有使用 2.x 版本的 tomcat 插件的 pom 设置？

（我当前的错误日志基本上是这样说的：

```
java.lang.NoClassDefFoundError: org/springframework/core/annotation/AnnotationAttributes 
```

这显然是 Spring 3.1 和 3.0.x 之间的版本冲突）

我对这个很迷茫，整天都在努力解决我模块中的依赖混乱以将它们升级到 3.1，所有测试都运行，现在我无法在 Tomcat 上运行它.. :(

* * *

**编辑：我的弹簧依赖树：**

```
 module1:jar:1.0-SNAPSHOT:compile
 +- modul2:jar:1.0-SNAPSHOT:compile
 |  +- module3:jar:1.1-SNAPSHOT:compile
 |  |  +- org.springframework:spring-context:jar:3.1.1.RELEASE:compile
 |  |  +- org.springframework:spring-beans:jar:3.1.0.RELEASE:compile
 |  |  +- org.springframework:spring-aop:jar:3.1.0.RELEASE:compile
 |  |  +- org.springframework:spring-aspects:jar:3.1.0.RELEASE:compile
 |  |  +- org.springframework:spring-orm:jar:3.1.0.RELEASE:compile
 |  |  |  +- org.springframework:spring-jdbc:jar:3.1.0.RELEASE:compile
 |  |  |  \- org.springframework:spring-tx:jar:3.1.0.RELEASE:compile
 |  |  \- org.springframework:spring-core:jar:3.1.0.RELEASE:compile
 |  +- org.springframework:spring-webmvc:jar:3.1.0.RELEASE:compile
 |  |  +- org.springframework:spring-asm:jar:3.1.0.RELEASE:compile
 |  |  +- org.springframework:spring-context-support:jar:3.1.0.RELEASE:compile
 |  |  +- org.springframework:spring-expression:jar:3.1.0.RELEASE:compile
 |  |  \- org.springframework:spring-web:jar:3.1.0.RELEASE:compile
 |  \- org.springframework:spring-test:jar:3.1.0.RELEASE:compile
 \- org.springframework:spring-test-mvc:jar:1.0.0.BUILD-SNAPSHOT:test 
```

* * *

**编辑2：**

出于某种奇怪的原因，当我从 .m2 文件夹中删除所有 Spring 3.0.6 库然后打包 webapp 时，它将再次下载所有 3.0.6 jar。然而，依赖关系树是上面的那个。我认为它与spring-security有关，它与版本有一些问题，并要求我覆盖我的安全模块pom中的瞬态依赖关系，这样它就不会使用旧的......

* * *

**编辑3：**

它是**spring-data-jpa**。显然最新版本仍然依赖于 Spring 3.0.6。通过覆盖 pom 中的依赖项，我可以让它与 Spring 3.1 一起使用，这样测试就可以通过了。将我的数据模块集成到我的 web 应用程序时，它会尝试使用 Spring 3.0.6 ......不知道如何解决这个问题。即使是[spring-data-jpa 的最新 Realase Candidate（版本 1.1.0.RC1）](http://repo.springsource.org/libs-milestone/org/springframework/data/spring-data-jpa/1.1.0.RC1/)仍然依赖于 Spring 3.0.7...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:35:10.170

在控制台上，执行以下命令：

```
mvn dependency:tree -Dincludes=org.springframework,org.springframework.security 
```

这将列出 Spring 工件的所有依赖路径。我很确定您对那里的某个 Spring 3.0.x 工件有传递依赖。Maven 和 Tomcat 都没有任何 Spring 依赖项！

您可以检查的另一件事是文件夹

src/main/webapp/WEB-INF/lib

如果它存在（它通常不应该在 maven webapp 中）它可能包含一个旧的 Spring Jar。删除那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T11:18:39.837

所以我想通了..问题是它`mvn dependency:tree`并没有真正显示出瞬态依赖关系。

`Spring-Data-Jpa 1.0.3.RELEASE`有一些`Spring 3.0.6`依赖。我必须在我的数据提供程序模块中**明确地覆盖它们**才能运行测试。这也使它们不会出现在依赖关系树中**，但不会让它们出现在我的网络应用程序之外**！我必须**在 web 应用程序中再次覆盖所有 spring 依赖项**，然后它才能工作。

不知道为什么会这样.. 希望 spring-data-jpa 很快会升级到 Spring 3.1.. 也许 Maven 3 可以更好地处理这些临时依赖项，但它仍然会使用旧的依赖项：树所以在我的情况下它们不会显示。 .

我的 webapp pom.xml 的一部分：

```
<properties>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aop</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-asm</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-beans</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-core</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-web</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${org.springframework-version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-expression</artifactId>
        <version>${org.springframework-version}</version>
    </dependency> 
```

# c - 这个指针在这个函数的参数中做了什么？

> ID：10934916
> 
> 赞同：1
> 
> 时间：2012-06-07T15:27:44.197
> 
> 标签：c, pointers

我是一个电子人，所以请善待我。

我正在阅读[这篇](http://eetimes.com/design/embedded/4008325/FLIRTing-with-8-bit-MCU-OSes?pageNumber=0)关于 8 位微控制器的实时操作系统的文章。我遇到了这个函数，有一个看起来很奇怪的论点。我无法理解它在做什么。我知道这`void`意味着“没有类型”。我猜这`(*Task)`就是选角。我真的不知道那些括号在那之后做了什么。

这个函数的参数包括什么？

另外，我不明白它是`*(int*)((NewTCB->Stack) + (STACK_DEPTH-2)) = (int)Task;`做什么的？

![在此处输入图像描述](../Images/162b27fd111a19b85e663503e110b9a9.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:29:01.693

`void (*Task)()`实际上是一个**函数指针**。基本上它是在说：“参数名称是`Task`，它是一个返回的函数，`void`并且（因为这是 c 而不是 c++）接受任意数量的参数。

所以你可以这样称呼它：

```
void my_task() {
    /* do something */
}

TaskCreate(my_task); 
```

当然，写起来也是安全的`void my_task(void) {`。在编码c时，我个人更喜欢明确地说“没有参数”

最后，`*(int*)((NewTCB->Stack) + (STACK_DEPTH-2)) = (int)Task;`正在做一些施法魔法。

让我们剖析一下：

`(int)Task`首先转换`Task`为`int`（这是有问题的，但对于您的特定架构/操作系统可能没问题。就个人而言，我会使用 a`long`以确保安全）。

`((NewTCB->Stack) + (STACK_DEPTH-2))`只是在做一些简单的算术运算以获取指向堆栈`NewTCB->Stack`中某个位置的指针。`TCB`

`*(int*)`说“将其转换为一个`int *`然后尊重（读取或写入）它指向的位置。

我们可以更简单地写如下：

```
int f = (int)Task;
int s = ((NewTCB->Stack) + (STACK_DEPTH-2)); /* I don't know the type of `NewTCB->Stack`, so we'll pretend 'int' for now */
int *stack_ptr = (int*)s;
*stack_ptr = f; 
```

这可能更清楚。

**跟进**：我想指出我如何使用倾向于使用函数指针，因为语法有时会有点混乱。而且我发现这种方法非常有帮助。基本上我喜欢`typedef`为函数指针创建一个并使用它，我发现它更容易正确：

例如：

```
/* typedef func_t to be a pointer to a function taking no arguments and returning void */
typedef void (*func_t)(void); 
```

然后后来...

```
void CreateTask(func_t task) {
    /* same work as your example, just a little easier to read */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:31:42.137

`*(int*)((NewTCB->Stack) + (STACK_DEPTH-2)) = (int)Task;`接受`Task`并将其转换为整数。然后，它找到`NewTCB`' 堆栈（某种形式的数组）。它采用该堆栈并找到倒数第二个成员。然后它将其视为整数变量的地址，并将转换后的 Task 分配给该地址处的变量。

`NewTCB->stack`使用 C++ 成员指针语法。 `NewTCB`是指向`TCB`对象的指针，而`TCB`对象显然具有 Stack 属性。
添加`STACK_DEPTH - 2`到它与写入相同`(NewTCB->Stack)[STACK_DEPTH - 2]`（以纯文本：：`NewTCB->Stack`get object at index `STACK_DEPTH - 2`），除了堆栈对象是动态分配的数组。
如果`NewTCB->Stack`有 length `STACK_DEPTH`，则 index 处的对象`STACK_DEPTH - 2`是倒数第二个成员（从 0 开始的索引）。
其余的只是处理将 Task 移动到适当位置所需的转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:34:27.563

埃文·特兰的回答是正确的。我会扩展它，从代码中它似乎是一个指向在选择运行任务时执行的函数的指针。

至于`*(int*)((NewTCB->Stack) + (STACK_DEPTH-2)) = (int)Task;`

我假设在您的环境`int`中是 16 位？如果是这样，这将是-2。这段代码在这个结构中保存了任务的'main'函数的地址（这很奇怪，因为它已经保存在`->Task`成员中，但可能有一个很好的理由）

# iphone - 向 NSDate 对象添加周组件时，为其设置所需时间失败

> ID：10934920
> 
> 赞同：0
> 
> 时间：2012-06-07T15:27:54.460
> 
> 标签：iphone, ios, datetime

我正在尝试通过循环以下代码在每 2 周的 12:00（中午）安排通知...

```
unsigned unitFlags = NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit | NSHourCalendarUnit | NSMinuteCalendarUnit;

// Allocate new temporary calendar object with default timezone
NSCalendar *tmpCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[tmpCalendar setTimeZone:[NSTimeZone defaultTimeZone]];

// Allocate new temporary date components from the date to fire
NSDateComponents *tmpDateComps = [tmpCalendar components:unitFlags fromDate:dateToFire];

// Set time to '12.00'
[tmpDateComps setHour:12];
[tmpDateComps setMinute:0];

// Get new date to fire object based on date components
dateToFire = [tmpCalendar dateFromComponents:tmpDateComps];

NSLog(@"dateToFire %@", dateToFire);
// On 6th iteration = xx-xx-xxxx 09:00 +00:00
// On 11th iteration = xx-xx-xxxx 10:00 +00:00

// Allocate new temporary offset date components
NSDateComponents *tmpOffsetComps = [[NSDateComponents alloc] init];    

// Add a number of weeks
[tmpOffsetComps setWeek:2];

// Get new date to fire object based on offset date components
dateToFire = [tmpCalendar dateByAddingComponents:tmpOffsetComps toDate:dateToFire options:0];

NSLog(@"dateToFire %@", dateToFire);
//On 6th iteration = xx-xx-xxxx 10:00 +00:00
//On 11th iteration = xx-xx-xxxx 09:00 +00:00 
```

不知何故，当我`dateToFire`在循环中记录对象时，在第 6 次迭代中，我首先得到了正确的结果`xx-xx-xxxx 09:00 +00:00`，但是在添加了偏移组件之后的第二个日志中，我得到了`xx-xx-xxxx 10:00 +00:00`. 奇怪的是它在第 11 次迭代中恢复到正确的时间。

我做错了什么以及如何解决这种奇怪的行为？

**更新**
正如 UIAdam 所说，这是由于夏令时而发生的，所以这是正常行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:44:53.500

由于日期跨越夏令时/标准时间（或您所在地区的某些等价物）之间的边界，额外的小时出现/消失。

# php - Smarty 变量，将 javascript 函数分配为值不起作用（从 v2 升级到 v3）

> ID：10934921
> 
> 赞同：0
> 
> 时间：2012-06-07T15:27:57.563
> 
> 标签：php, smarty, smarty3

我有以下代码，适用于 smarty 2.x

```
{assign var=somename value=jsFunction($frontItemKey);} 
```

但 smarty v3 抛出错误：

```
unknown function "jsFunction" 
```

我怎样才能解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:39:34.283

你想实现什么，将字符串“jsFunction($frontItemKey)”分配给变量？或者把某个函数的返回值放在那里？

在第一种情况下，这似乎更有可能，我认为您只需要将其作为字符串处理，因为 Smarty 肯定会尝试使用该名称调用函数并且找不到它。如果你想要一个像“jsFunction(VALUE)”这样的字符串，其中 value 是 $frontItemKey 值，你应该将它连接起来。

在第二种情况下，如果 Smarty2 在那里设置了一些价值，我会首先检查您的 Smarty2 源代码，可能有人对其进行了更改并添加了此功能。查看 Smarty libs 文件夹。

# mysql - 如何组合 2 个 MySQL 查询？

> ID：10934928
> 
> 赞同：0
> 
> 时间：2012-06-07T15:28:10.367
> 
> 标签：mysql, query-optimization

我有一个看起来像这样的“输入”表：

```
id  subId   surveyId    name        val
1   1       1       Ip Addr     123.456.789
2   1       1       Cookie      abcdefghij
3   1       1       Time        2012-06-05 22:14:30
4   2       1       Ip Addr     123.456.789
5   2       1       Time        2012-06-05 22:14:40 
```

`subId`是提交 ID 的缩写。我想`survId`在指定时间后获得所有特定的提交。有2个步骤。首先，获取特定时间后的所有提交 ID。这可以像这样完成：

```
SELECT subId FROM Inputs WHERE surveyId=1 AND name='Time' AND val>'2012-06-05 22:14:35'; 
```

接下来，获取这些提交的所有行：

```
SELECT * FROM Inputs WHERE subId IN (...); 
```

当我用`...`第一个查询的结果替换时，一切正常。它返回最后 2 行（id 4 和 5）。这是`EXPLAIN`查询1：

```
id  select_type table   type    possible_keys   key     key_len ref     rows    Extra
1   SIMPLE      Inputs  range   Inputs_ix1  Inputs_ix1  1030    (null)  3       Using where 
```

和查询2：

```
id  select_type table   type    possible_keys   key     key_len ref     rows    Extra
1   SIMPLE      Inputs  range   Inputs_ix2  Inputs_ix2  4       (null)  30      Using where 
```

当我对它们进行分析时，它们在 10,000 行上总共需要大约 1 毫秒。到现在为止还挺好。但是，我想将它们结合在一起。这是我尝试过的：

```
SELECT * FROM Inputs WHERE subId IN (SELECT subId FROM Inputs WHERE surveyId=1 AND name='Time' AND val>'2012-06-05 22:14:35'); 
```

这大约需要 200 毫秒！我认为这是由于一个[错误](http://bugs.mysql.com/bug.php?id=17952)。所以让我们试试别的东西：

```
SELECT (@ids:=subId) FROM Inputs WHERE surveyId=1 AND name='Time' AND val>'2012-06-05 22:14:35';
SELECT @ids; 
```

在这里，我试图`@ids`用第一个查询的结果创建一个变量。但是，只有最后一个 id 存储在变量中。MySQL 变量不能与数组一起使用吗？！

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:48:55.123

您可以将其作为一个查询运行：（将第一个查询的“subId”部分替换为“*”并添加一个“（NOLOCK）”）

```
SELECT * FROM Inputs (NOLOCK) WHERE surveyId=1 AND name='Time' AND val>'2012-06-05 22:14:35'; 
```

另一种选择是使用 INNER JOIN：

```
SELECT Inputs2.* 
FROM Inputs AS Inputs1 (NOLOCK)
INNER JOIN Inputs AS Inputs2 (NOLOCK)
ON Inputs1.subId = Inputs2.subId
WHERE surveyId=1 
AND name='Time' 
AND val>'2012-06-05 22:14:35'; 
```

我不知道这些选项的时机。

祝你好运！

# c# - 使用多个处理器包装非托管代码

> ID：10934932
> 
> 赞同：0
> 
> 时间：2012-06-07T15:28:25.297
> 
> 标签：c#, c++, multiprocessing, load-balancing

我有一个用 C++ 编写的现有应用程序，它目前执行许多任务，从数据库中为所有客户读取事务，处理它们并将结果写回。

我想要做的是让多个版本在不同的机器上并行运行以增加事务容量，方法是将特定的客户子集分配给每个版本的应用程序，这样就不需要争用或数据共享，因此不需要锁定或同步。

我想要做的是在同一台机器上运行多个版本，并且分布在其他机器上，所以如果我有一个四核机器，将有四个应用程序实例在运行，每个实例都使用一个 CPU。

我将把 c++ 代码包装在 .NET c# 接口中并管理所有这些进程——本地进程和从父 c# 管理服务分发的进程，该服务负责创建、启动和停止进程，以及它们之间的所有通信和管理。

我想知道的是，如果我在四核机器上的单独后台线程上分别创建四个实例，CLR 和 .NET 是否会自动负责将负载分散到每个机器上的四个 CPU 上，或者我是否需要做些什么来利用并行处理能力？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:12:36.837

您可以在通过对象启动进程时设置进程关联`Process`（或`ProcessThread`取决于您启动应用程序的方式）。

[这是一个涵盖该主题的SO帖子](https://stackoverflow.com/questions/2510593/how-can-i-set-processor-affinity-in-net)（我没有投票关闭作为副本（还），因为我不能100％确定这是否正是您所追求的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:16:26.670

如果您的意思是您将在同一个机器上的四个进程中运行您的应用程序，那么控制这些进程如何分配 CPU 时间的是操作系统 (Windows)。如果这些进程正在做类似的工作，那么通常它们将获得大致相等的处理器时间。

但是，您是否考虑过在单个进程中使用四个线程？线程比进程轻得多，因此您不需要单独的管理服务，即您将拥有一个进程（有四个线程）而不是 5 个进程。您是否有任何机会来自 unix 背景？

# php - 在 Zend_cache 中禁用对 memcache 键的有效性检查

> ID：10934934
> 
> 赞同：2
> 
> 时间：2012-06-07T15:28:29.170
> 
> 标签：php, zend-framework, memcached

`Zend/Cache/Core.php`具有将`_validateIdOrTag`键中允许的字符限制为`[a-zA-Z0-9_]`.

**[Q1：文档](http://framework.zend.com/manual/en/zend.cache.backends.html#zend.cache.backends.memcached)中的以下引用是什么意思？**

> 请注意：使用此后端，目前不支持“标签”作为“doNotTestCacheValidity=true”参数。

如果是这样，**Q2：为什么要施加这样的限制？（使用`-`或等字符`/`来缓存 URL 内容很常见，`memcache pecl`扩展确实允许这些字符）？**

如果没有，**Q3：是否有禁用该限制的选项？（我找不到一个）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:35:43.097

**1\. 标签**

标签可让您将缓存的项目组合成集合，并根据标签对这些集合进行变异。例如，在博客中，您可以缓存所有帖子并使用`"post"`. 然后，您可以`"post"`同时删除所有标记为的项目。但是，目前 memcache 不支持此功能。

**2\. 关键限制**

限制不是缓存的内容，而是用于访问它们的密钥。因此，您可以存储任何您想要的内容、URL、特殊字符等。您只需要确保您的密钥不包含它们。

如果您担心它，只需 md5 您的密钥以确保它是有效的密钥并使用它。

# audio - 确定音频文件是否以 Apple Lossless (ALAC) 编码

> ID：10934936
> 
> 赞同：5
> 
> 时间：2012-06-07T15:28:42.977
> 
> 标签：audio, encoding, aac, m4a

有许多带有`.m4a`后缀的音频文件，这些文件以[AAC](http://en.wikipedia.org/wiki/Advanced_Audio_Coding)或[Apple Lossless](http://en.wikipedia.org/wiki/Apple_Lossless) (ALAC) 之一编码。我只想选择用 Apple Lossless 编码的音频文件。有没有办法确定这一点？我试过[FFmpeg](http://ffmpeg.org/)，但它说所有这些都是用 AAC 编码的。

编辑：我目前在 Windows 上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-13T18:31:13.280

如果你有 FFmpeg[包](https://www.ffmpeg.org/download.html)，你应该有`ffprobe`.

试试这个：

```
ffprobe -v error -select_streams a:0 -show_entries stream=codec_name -of default=noprint_wrappers=1:nokey=1 file.m4a 
```

*   `-v error`：隐藏启动文本
*   `-select_streams a:0`：选择第一个音轨
*   `-show_entries stream=codec_name`：仅显示编解码器类型
*   `-of default=noprint_wrappers=1:nokey=1`: 删除多余的格式

这将只打印出`aac`or `alac`。非常适合编写脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T21:00:12.147

这是第 67 页上的 M4A 描述文件（到目前为止我能找到的最好的）：http: [//iweb.dl.sourceforge.net/project/audiotools/audio%20formats%20reference/2.14/audioformats_2.14_letter。 pdf](http://iweb.dl.sourceforge.net/project/audiotools/audio%20formats%20reference/2.14/audioformats_2.14_letter.pdf)

> ```
> A typical M4A begins with an 'ftyp' atom indicating its file type...
> 10.2.1 the ftyp atom
> [0 31] ftyp Length [32 63] 'ftyp' (0x66747970)
> [64 95] Major Brand [96 127] Major Brand Version
> [128 159] Compatible Brand₁ ...
> The 'Major Brand' and 'Compatible Brand' elds are ASCII strings. 
> 'Major Brand Version' is an integer. 
> ```

起初我认为“ftyp”将是确定格式的地方，但从这个列表来看，它更像是文件类型本身（已经称为 m4a）： http: [//www.ftyps.com/index.html](http://www.ftyps.com/index.html)

[http://www.ftyps.com/what.html](http://www.ftyps.com/what.html)描述了更多的格式。

如果 ftyp 没有区别，那么我认为“主要品牌”字段可能是指此页面上的fourcc： [http](http://wiki.multimedia.cx/index.php?title=QuickTime_container) ://wiki.multimedia.cx/index.php?title=QuickTime_container Apple Lossless 的一个是“ alac' 和 AAC 可能是 'mp4a'

苹果的 Lossless 格式开源页面显示 ftype 为 'alac' （与上面略有矛盾） [http://alac.macosforge.org/trac/browser/trunk/ALACMagicCookieDescription.txt](http://alac.macosforge.org/trac/browser/trunk/ALACMagicCookieDescription.txt)

到目前为止，我能说的是，ftyp 后面的 4 个字节总是（在较小的样本大小中）'M4A'。

在前约 200 个（十六进制）字节左右的某个地方，有一个用于 AAC 压缩的 ascii 'mp4a' 或一个用于 Apple Lossless 的 'alac'。'alac' 似乎总是成对出现，相隔约 30 个字节（'mp4a' 只有一次）。

抱歉，这不是更具体，如果我找到确切的位置或前缀，我会再次更新。（我的猜测是标题的早期部分在某处指定了大小。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T16:14:09.153

您可以使用 Core Audio 来做到这一点。

就像是：

```
CFStringRef pathToFile;
CFURLRef inputFileURL = CFURLCreateWithFileSystemPath(kCFAllocatorDefault, pathToFile, kCFURLPOSIXPathStyle, false);
ExtAudioFileRef inputFile;
ExtAudioFileOpenURL(inputFileURL,  &inputFile);

AudioStreamBasicDescription fileDescription;
UInt32 propertySize = sizeof(fileDescription);

ExtAudioFileGetProperty(inputFile, 
  kExtAudioFileProperty_FileDataFormat,
  &propertySize,
  &fileDescription);    

if(fileDescription.mFormatID == kAudioFormatAppleLossless){
  // file is apple lossless
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-26T03:40:04.833

在 Mac 上，您选择所需的文件，然后右键单击。找到“获取信息”并单击它，将弹出一个窗口，其中包含有关您选择的文件的额外信息。它应该在“编解码器”旁边说：“AAC”或“Apple Lossless”我希望我能帮助那些有同样问题的 Mac 用户（即使我不熟悉操作系统，也可能以某种方式帮助 Windows 用户。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-07T09:19:37.010

尝试使用[http://sourceforge.net/projects/mediainfo/](http://sourceforge.net/projects/mediainfo/)

“MediaInfo 是视频和音频文件最相关技术和标签数据的便捷统一展示。” - sourceforge 项目描述

这就是信息的显示方式。

```
General
Complete name                    : C:\Downloads\recit24bit.m4a
Format                           : MPEG-4
Format profile                   : Apple audio with iTunes info
Codec ID                         : M4A 
File size                        : 2.62 MiB
Duration                         : 9s 9ms
Overall bit rate                 : 2 441 Kbps
Track name                       : 24 bit recital ALAC Test File
Performer                        : N\A
Comment                          : Test File

Audio
ID                               : 1
Format                           : ALAC
Codec ID                         : alac
Codec ID/Info                    : Apple Lossless Format
Duration                         : 9s 9ms
Bit rate mode                    : Variable
Bit rate                         : 2 438 Kbps
Channel(s)                       : 2 channels
Sampling rate                    : 22.7 KHz
Bit depth                        : 24 bits
Stream size                      : 2.62 MiB (100%)
Language                         : English 
```

检查音频部分以获取编解码器/编码详细信息。

# mysql - mysql在where子句中使用用户定义的变量

> ID：10934939
> 
> 赞同：2
> 
> 时间：2012-06-07T15:28:47.560
> 
> 标签：mysql, sql, variables, where-clause, user-defined

sql查询：

```
select
    u.username,
        @total_subscribers:=(
            select count(s.id)
                from subscribers as s
                where s.suid = u.uid
        ) as total_subscribers
from users as u
where @total_subscribers > 0 
```

如果我删除`where @total_subscribers > 0`查询将显示所有用户及其总订阅者

但我只想显示那些至少有 1 个订阅者的用户......在我添加 where 子句并使用定义的变量后，我得到一个空的结果集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:32:51.927

你可以用`group by`and做到这一点`having`：

```
select
   u.username,
   count(s.id) as total_subscribers
from users as u
inner join subscribers as s on s.suid = u.uid
group by u.id
having count(s.id) > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:35:43.003

`MySQL`在这种情况下，不保证会话变量的评估顺序。

从[文档](http://dev.mysql.com/doc/refman/5.5/en/user-variables.html)：

> 涉及用户变量的表达式的求值顺序是未定义的，并且可能会根据给定语句中包含的元素而改变；此外，此顺序不保证在`MySQL`服务器版本之间相同

用这个：

```
SELECT  u.*, COUNT(*)
FROM    users u
JOIN    subscribers s
ON      s.suid = u.uid
GROUP BY
        u.uid 
```

`JOIN`确保您至少有一个订阅者。

# asp.net - ASP.NET Linq to sql 多个外键到主键不同的表

> ID：10934949
> 
> 赞同：0
> 
> 时间：2012-06-07T15:29:18.220
> 
> 标签：asp.net, sql, linq

我有一个名为的表`claims`，它的 id 名为`currencyId`datatype `INT`。

然后还有一个`tblCurrency`主 ID 为的表`currencyId`。

然后有一个很好的协会。然后在 Linq 我可以使用

```
 <%# ((claim)Container.DataItem).currency.value %> 
```

但现在我必须添加另一`INT`列到`tblClaims`call `finalCurrencyID`，我也希望与 to 关联`tblCurrency`。

只是想知道我怎么能做到这一点，所以目前`((claim)Container.DataItem).currency.value`正在连接并`claim.currencyId`获取.`tblCurrency.currencyID``tblCurrency.value`

但是我怎样才能使它更灵活，以便我可以确定`currencyID`从哪个`tblClaims`呼叫？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:02:00.137

如果我没看错，我想你正在寻找这个：

```
<%# ((claim)Container.DataItem).finalCurrency.value %> 
```

当然，假设您已经`claim`将 L2S FK 连接到`finalCurrency`.

# android - 安卓中的蓝牙连接

> ID：10934950
> 
> 赞同：1
> 
> 时间：2012-06-07T15:29:27.027
> 
> 标签：android, bluetooth, insecure-connection

我正在开发一款安卓游戏（Target API - 8），可以通过蓝牙从两部安卓手机上播放。由于我的应用程序针对 API 级别 8（android 版本 2.2），我无法进行不安全的连接。但我不想让用户干预来配对设备。我找到了几个指向[http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/](http://mobisocial.stanford.edu/news/2011/03/bluetooth-reflection-and-legacy-nfc/)的答案。现在我有几个关于蓝牙连接的问题。

1）博客中提供的解决方案可以安全使用吗？会不会引起其他问题？？它是否适用于所有版本的 android（除了具有不安全蓝牙连接问题的 ICS）？

2) 我们可以在我们的应用程序中创建多个 BluetoothSocket 对象吗？基本上我正在尝试的是:(指的是BluetoothChat Demo）

(i) 在 AcceptThread -`run()`方法中

```
 // Listen to the server socket if we're not connected
        while (mState != STATE_CONNECTED) {
            try {
                // This is a blocking call and will only return on a
                // successful connection or an exception

            <**Go for InsecureBluetooth connection as mentioned in the blog**>
          }catch(IOException e)
          {

                 try {
                // This is a blocking call and will only return on a
                // successful connection or an exception

                <**Go for default secure connection**>
                }catch(IOException e)
               {

               } //next level catch
          }//top level catch
        }//while 
```

请让我知道这是否可能。

# php - Mod-rewrite 在网络解决方案服务器上不起作用

> ID：10934952
> 
> 赞同：1
> 
> 时间：2012-06-07T15:29:30.680
> 
> 标签：php, .htaccess, mod-rewrite

我有一个需要 mod-rewrite 才能正常运行的网站，但它似乎在我们运行的网络解决方案共享服务器上不起作用。Network Solutions 承诺已安装，但不会在不支付额外费用的情况下提供任何进一步的支持。

我在包含两个文件的以下文件夹中放置了一个简单的测试。第一个，“.htaccess”包含以下文本：

```
RewriteEngine On
RewriteRule ^link([^/]*).html$ rewrite.php?link=$1 [L] 
```

第二个是测试它的 PHP 脚本，可在此处获得： [http ://www.oceanhousefloridakeys.com/testmr/rewrite.php](http://www.oceanhousefloridakeys.com/testmr/rewrite.php)

我所看到的只是安装了 mod-rewrite（没有显示错误消息）但 rewriteRule 不起作用。任何人都可以看到为什么这个脚本不起作用......我可以做些什么来让它运行，或者网络解决方案没有说出全部真相？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T16:47:14.220

看起来您的脚本位于子目录中。[`RewriteBase`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritebase)在这种情况下，将 设置为正确路径（在 any 之前）的最佳解决方案是`RewriteRule`：

```
RewriteEngine On
RewriteBase /testmr/
RewriteRule ^link([^/]*).html$ rewrite.php?link=$1 [L] 
```

# php - PHP DateTime - 修改参考

> ID：10934953
> 
> 赞同：3
> 
> 时间：2012-06-07T15:29:32.887
> 
> 标签：php, datetime, reference

我正在尝试修改作为引用传递的函数中的 DateTime 对象：

```
<?php
$date = new DateTime('2012-02-12');

for($n1 = 0; $n1 < 10; $n1++) {
    $date->modify('first day of next month');
    setDate($date, 15);
    echo $date->format('Y-m-d') . "<br />\n";
}

function setDate(&$date, $day) {
    $date->setDate($date->format('Y'), $date->format('m'),  $day);
}
?> 
```

但结果并不如预期。我对这些参考资料有什么问题吗？

编辑：预期结果：2012-03-15 2012-04-15 ...

上述功能的结果： 2012-03-01 2012-04-01 ...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:49:51.793

您已经传递了对 DateTime 对象的引用。无需隐式传递 DateTime 的实例作为参考。如果您需要 DateTime 对象的副本，则需要使用`clone`关键字。

就结果而言，它会在每个连续月份的 15 次以上进行迭代，阅读代码，我预计会是结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T17:32:01.307

我的 PHP 不喜欢“巢月的第一天”位，但使用了“+1 月”。既然你绝对是在设定这一天，我不会担心它不是第一个。或者，如果需要，您可以在进入循环之前将其设置为第一个。

所以，这对我有用。我添加了它，`new DateTimeZone('America/New_York')`这样它就不会因为它没有被设置（共享服务器）而困扰我。并删除了通过引用传递（`&`）位，因为现在在 PHP 中默认情况下所有对象都是通过引用传递的。

```
<?php
    $date = new DateTime('2012-02-12',new DateTimeZone('America/New_York'));
    for($n1 = 0; $n1 < 10; $n1++) {
        $date->modify('+1 month');
        setDate($date, 15);
        echo $date->format('Y-m-d') . "<br />\n";
    }
    function setDate($date, $day) {
        $date->setDate($date->format('Y'), $date->format('m'),  $day);
    }
?> 
```

# java - NamedQuery：最佳实践

> ID：10934957
> 
> 赞同：14
> 
> 时间：2012-06-07T15:29:48.043
> 
> 标签：java, jpa, naming-conventions

在 JPA 中创建命名查询时，这些查询的名称（例如等）是否存在公认的最佳实践，并且最好`EntityName.allActive`在`findAllActiveFoos`它们查询的实体类中声明这些命名查询或在实用程序类中一起声明这些命名查询?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T18:25:46.243

不，没有广泛接受的涵盖任何复杂案例的最佳实践。此外，一般来说，JPA 没有太多可用的样式指南。似乎普遍接受并且通常也用于书籍的方法是从实体名称开始查询。

我会选择 EntityName（以保证持久性单元中的唯一名称）结合操作和参数。

*   Person.findByAge
*   Person.findByAgeAndFirstName
*   Person.removeByFirstName
*   Person.updateSalaryIfYearBornBefore

请注意，规范在示例中使用`with`而不是`by`，并且不使用实体名称作为查询前缀。但这当然是规范，而不是风格指南。

我发现为这些查询名称声明常量然后在 @NamedQuery.name 和 em.createNamedQuery 中使用这些常量是很好的。

因为@NamedQuery、@NamedNativeQuery 和@NamedQueries 只能应用于映射的超类或实体，所以您无法将它们定位到实用程序类。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-08T09:23:01.520

尽管似乎没有全球公认的最佳实践，但 Mike Keith 和 Merrick Shincariol 所著的“Pro JPA 2”一书准确地推荐了 Mikko 所说的内容，例如，如果您有一个查找所有员工的查询，则将其称为“Employee.findAll” ”。

Ito 在哪里声明这些，从我所见，再次没有真正的最佳实践。他们似乎倾向于在实体本身上声明它们，而不是在一个大类中声明它们（例如所有实体都从中扩展的基础 MappedSuperclass），因为这很快就会变得单一并且可能有点难以维护。另一种选择是在单独的 XML 文件中声明它们，我不建议这样做。我个人喜欢在与它们相关的实体上声明它们的方法。我也同意 Miko 建议使用常量作为名称，您可以在单独的类中定义所有这些常量。

# cocoa - 如何在使用 NSError 的双重间接的方法中修复 Clang 警报？

> ID：10934959
> 
> 赞同：0
> 
> 时间：2012-06-07T15:29:51.403
> 
> 标签：cocoa, clang, nserror

在使用垃圾收集的项目中： **Clang**在分配 *anError 的行上警告“可能的 null 取消引用 ....”。

但这对我来说是正确的：[为什么 NSError 需要双重间接？（指向指针的指针）](https://stackoverflow.com/questions/903103/why-does-nserror-need-double-indirection-pointer-to-a-pointer)

谁能看到我没有看到的东西？

```
- (NSData *)bookmarkDataForCurrentURL:(NSURL *)theURL error:(NSError **)anError
{
    NSArray *bkKeys = [CBPrepCommon bookmarkPropertyKeys];
    NSError *errorA = nil;
    NSData *bkmark = [theURL bookmarkDataWithOptions:NSURLBookmarkCreationPreferFileIDResolution includingResourceValuesForKeys:bkKeys relativeToURL:nil error:&errorA];

    if (![bkmark length] > 0) {
    if (errorA) {
        // error here
        *anError = [NSError errorWithDomain:[errorA domain] code:[errorA code] userInfo:[errorA userInfo]];
    }
    return nil;
}
return bkmark; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:52:05.040

```
if (errorA && anError) {
    // error here
    *anError = [NSError errorWithDomain:[errorA domain] code:[errorA code] userInfo:[errorA userInfo]];
} 
```

编辑：更清洁：

```
- (NSData *)bookmarkDataForCurrentURL:(NSURL *)theURL error:(NSError **)anError
{
    NSArray *bkKeys = [CBPrepCommon bookmarkPropertyKeys];
    NSData *bkmark = [theURL bookmarkDataWithOptions:NSURLBookmarkCreationPreferFileIDResolution includingResourceValuesForKeys:bkKeys relativeToURL:nil error:anError];

    if ([bkmark length] == 0) {
        return nil;
    }

    return bkmark;
} 
```

# perl - 使用 Perlbrew 安装新版本的 Perl 时遇到问题

> ID：10934968
> 
> 赞同：1
> 
> 时间：2012-06-07T15:30:25.983
> 
> 标签：perl, gcc, solaris, cpan, perlbrew

因此，根据我在 stackoverflow 上获得的说明，我尝试使用 perlbrew 在我的 64 位 Solaris 虚拟机上安装新版本的 Perl，以便最终安装“cpanm”并安装 CGI 和 DBI 模块，以及DBD::Oracle 驱动程序。这些是我遵循的步骤：

1）打开一个终端窗口并以**root**用户身份登录。然后安装以下软件包...

*   `pkg install system/header`
*   `pkg install gcc-45`
*   `pkg install developer/build/gnu-make`
*   `pkg install archiver/gnu-tar`

2) 安装 perlbrew...

*   `curl -kL http://install.perlbrew.pl | bash`

3) 接下来，打开 ~/.bash_profile 或 ~/.profile 并附加以下代码行..

*   `vi ~/.bash_profile` **或**vi`~/.profile`
*   追加`source ~/perl5/perlbrew/etc/bashrc`到文件末尾
*   登出根
*   重新登录到根目录
*   此外，您可能必须通过输入手动获取文件：`source ~/perl5/perlbrew/etc/bashrc`如果接下来的几个步骤似乎不起作用。

4) 开始安装新的 Perl。

*   `echo $PERLBREW_ROOT`--> 这应该等于 /home/oracle/perl5/perlbrew
*   `perlbrew -v install perl-5.16.0 -Dcc=gcc`

    **安装输出：**

```
Test Summary Report
    -------------------
    ../cpan/CGI/t/tmpdir.t                                          (Wstat: 0 Tests: 9 Failed: 0)
      TODO passed:   3, 6, 8
    ../cpan/Socket/t/getnameinfo.t                                  (Wstat: 256 Tests: 14 Failed: 1)
      Failed test:  10
      Non-zero exit status: 1
    Files=2334, Tests=522101, 1212 wallclock secs (90.50 usr 58.34 sys + 533.70 cusr 288.26 csys = 970.80 CPU)
    Result: FAIL
    *** Error code 1
    make: Fatal error: Command failed for target `test_harness'
    Installed /home/oracle/perl5/perlbrew/build/perl-5.16.0 as perl-5.16.0 successfully. Run the following command to switch to it.

      perlbrew switch perl-5.16.0 
```

*   `perlbrew switch perl-5.16.0`

但是，当我尝试切换到新的 perl 时，它说：`perl-5.16.0 is not installed`.

所以我做了一个`ls $PERLBREW_ROOT`，发现它包含一个**bin、build、build.log、Config.pm、dist 等**和**perls**目录。因此我认为新的 Perl 应该安装在**perls**目录中，但是执行显示**perls**`ls $PERLBREW_ROOT/perls`目录中没有任何内容。有谁知道可能出了什么问题？

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:41:05.583

当由于测试失败而失败时，它会错误地将其报告为已安装。如果您认为测试失败是可以接受的，您可以跳过测试再次运行它：

```
perlbrew -v install perl-5.16.0 --notest -Dcc=gcc
                                ^^^^^^^^ 
```

* * *

这是失败的测试：

```
my $expect_host = gethostbyaddr( inet_aton( "127.0.0.1" ), AF_INET );
defined $expect_host or $expect_host = "127.0.0.1";
( $err, $host, $service ) = getnameinfo( pack_sockaddr_in( 80, inet_aton( "127.0.0.1" ) ), NI_NUMERICSERV );
is( $host, $expect_host, "\$host is $expect_host for NS" ); 
```

如果您在日志输出中向上滚动，您将看到实际为`$host`和获得的值`$expect_host`。**

# ajax - 使用 AJAX 更新中心窗格。未捕获的类型错误：无法将属性“innerHTML”设置为空（重复 2 次）

> ID：10934972
> 
> 赞同：1
> 
> 时间：2012-06-07T15:30:27.700
> 
> 标签：ajax

非常感谢您的回复。我用以下更新了代码。我正在使用 Dojo dataGrid 来呈现数据。它仍然没有为我工作。然而。

这是代码。Google 调试器显示“未捕获的 TypeError：无法将属性 'innerHTML' 设置为 null（重复 2 次）。” 在这一行“element.innerHTML = xhr.responseText;”之后出现错误

```
function UpdateCenterPane(dest) {
    var setHtml = function(element, url) {
        var xhr = new XMLHttpRequest();
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) {
                element.innerHTML = xhr.responseText;
            }
        };
        xhr.timeout = 10000;
        xhr.open('GET', url, true);
        xhr.send();
    };
    setHtml(dojo.byId('centerPane'),dest);
}   

I set up breakpoints to step through the code. I found this if block of code was skipped.  xhr.readyState returns 0 and xhr.status=0. 
```

# jquery - jQuery 动画内存问题

> ID：10934974
> 
> 赞同：1
> 
> 时间：2012-06-07T15:30:38.137
> 
> 标签：jquery, windows-8, winjs

我有一个使用 jQuery toggle('slow') 方法制作动画的小 (17K) 图像。当我观察我的应用程序的内存使用情况时，每次调用此方法时，我都会看到很大的跳跃，尤其是前 3 或 4 次。以下是确切的数字：

*   toggle('slow') 第一次调用（显示 17k 图像） - 增加 10.8 Mb
*   toggle('slow') 第二次调用（隐藏图像） - 再增加 2.5 Mb
*   toggle('slow') 第三次调用（显示图像） - 增加 500 K

...依此类推，增加幅度较小，但仍在增加。如果我只使用不带动画的 toggle() ，则内存使用量不会增加。

我已经看到建议将元素存储在调用 toggle('slow') 方法的函数之外的变量中，但这并不能解决问题。这是代码：

```
 var $setLoc = $("#setLocation");
 function toggleAll(){
      $setLoc.toggle('slow');
 } 
```

# php - 在 php 中导航页面

> ID：10934975
> 
> 赞同：1
> 
> 时间：2012-06-07T15:30:42.697
> 
> 标签：php, navigation

所以我一直在谷歌上阅读，这只是一堆不同的答案，没有太多解释。

我的问题是如何在 PHP 页面之间切换？假设我的服务器上有一个目录，其中包含以下文件：

```
index.php
about_us.php
contact_us.php 
```

让我们假设在所有 3 个页面上，我有一个带有 3 个链接的标题：

```
Home
Info
Contact 
```

当按下其中一个按钮（比如说联系）时会发生什么？

我已经阅读了 3 种技术：

```
Php: header("contact_us.php")
javascript: window.location = "contact_us.php";
html: <meta http-equiv="Refresh" content="5; URL="contact_us.php"> 
```

按照今天的标准，这些是首选吗？我在某处读到您现在不应该使用 php 的 header() 函数。

任何见解都会非常有助于我做出决定:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T15:33:01.370

只需让它们成为常规链接

```
<a href="contact_us.php">Contact</a> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T15:34:26.203

只需使用 html 超参考...

```
<a href="index.php">Home</a> <a href="contact_us.php">Contact Us</a> <a href="about_us.php">About Us</a> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T15:34:35.327

您只需将它们链接为

```
<a href="contact_us.php">Contact Us</a> 
```

每当点击链接时，他们都会被带到该页面。如果您是 PHP 新手：您可以在 PHP 中编写 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T15:41:31.683

您也可以使用此技术：（不需要数据库）

假设您有一个 index.php 文件：

```
<?php
$mypage = $_GET['mypage'];
switch($mypage)
{
case "one":
    @include("one.php");
    break;

case "two":
    @include("two.php");
    break;

default:
    @include("default.php");
}
?> 
```

**然后像这样引用它：**

```
<a href="index.php?mypage=one">one</a>

And:

<a href="index.php?mypage=two">two</a> 
```

等等

直接调用 index.php 会将您带到 default.php 页面内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T15:37:24.610

你应该直接调用脚本，或者有一个调用它的处理程序（如果你想要漂亮的 url）。

```
<a href="/contact_us.php">Contact</a> 
```

您不应该使用任何类型的重定向，它会对 SEO 产生不良影响。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T15:38:58.000

正如其他人所说，您只需要使用常规 html 来制作链接。

您指的是重定向方法，它在没有用户交互的情况下更改当前位置。如果您想这样做，使用 PHP 发送 HTTP 标头`header()`绝对是首选方法。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-07T15:45:41.853

我只有解决方案:)

```
<html>
<body>
<button onclick="confirmNav() ? (doubleConfirmNav() ? navigate() : cancelled() ): cancelled();">Contact Us</button>

<script type="text/javascript">

function confirmNav() {
    var r=confirm("Do you really want to navigate to 'Contact Us'?");
    if (r==true) {
      return true;
    } else {
      return false;
    }
}

function doubleConfirmNav() {
    var r=confirm("Are you 100% sure?");
    if (r==true) {
      return true;
    } else {
      return false;
    }
}

function cancelled() {
    alert("cancelling navigation");   
}

function navigate() {
    // purposely delay the redirect to give the image of a high traffic site
     setTimeout(function() {   
         window.location = "contact_us.php";
     }, 5000);   
 }

</script>

</body>
</html> 
```

# svg - svg 路径悬停在单击之前不起作用 - 其他工作正常

> ID：10934978
> 
> 赞同：-1
> 
> 时间：2012-06-07T15:30:50.053
> 
> 标签：svg, raphael, jquery-svg

当我将鼠标移到“单元格”上时，所有这些单元格都可以在页面加载时工作，但需要先单击一个。由于所有路径都是以相同的方式创建的，并且所讨论的路径不是第一个也不是最后一个生成的，我不知道是什么原因。

[我的项目](http://danu2.it.nuigalway.ie/09101916/qtipdemo2/)

有问题的路径是'Co。多尼戈尔”。这是顶部左侧的那个。在页面加载时，qtip 正确显示，但在单击之前不会出现淡入。这不是其他路径的情况。

任何的想法？蒂亚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:49:59.933

看起来 Donegal 需要一个值：'notSelected'，paths.js 中的属性

# scala-ide - 在 Scala IDE for Eclipse 中 - Scala Interpreter 定义了 模块但在访问成员时 - 给出错误：不是成员

> ID：10934981
> 
> 赞同：0
> 
> 时间：2012-06-07T15:31:18.283
> 
> 标签：scala-ide

*   已定义 Rectangle 模块，但为什么评估 R.length 和 R.area 给出错误：值 area 不是 Rectangle 的成员。
*   定义 Rectangle 模块有什么改进吗？更好的代码？

编码：

```
class Rectangle(l:Double, w:Double)
{
    require (l>0, w>0)
    val length = l
    val width = w
    def this (l:Double) = this (l, l)
    def area = (length * width)
} 
```

斯卡拉解释器：

```
class Rectangle(l:Double, w:Double)

[parsing <console>]
[superaccessors in 7ms]
[selectiveanf in 0ms]
[erasure in 4ms]
[Generate ICode from the AST in 5ms]
[inliner in 0ms]
defined class Rectangle

val R = new Rectangle (12, 12)

[parsing <console>]
[erasure in 6ms]
[lazyvals in 0ms]
[Generating icode for <console>]
[Generate ICode from the AST in 4ms]
[inliner in 0ms]
R: Rectangle = Rectangle@117cc9d

val l = println("Rectangle length is " + R.length)

[parsing <console>]
[loaded class file /home/optimight/.eclipse/org.eclipse.platform_3.7.0_155965261/      configuration/org.eclipse.osgi/bundles/201/1/.cp/lib/scala-library.jar(scala/collection/TraversableOnce.class) in 0ms]
[loaded class file /home/optimight/.eclipse/org.eclipse.platform_3.7.0_155965261/configuration/org.eclipse.osgi/bundles/201/1/.cp/lib/scala-library.jar(scala/collection/immutable/IndexedSeq.class) in 0ms]
[total in 44ms]

val A = R.area

[parsing <console>]
<console>:9: error: value area is not a member of Rectangle 
```

该图像显示了 Eclipse Scala IDE 中的 Rectangle 和 scala 解释器的完整代码。

请指导。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:42:45.673

After a quick look at the screenshot in hires ([here](http://i.stack.imgur.com/KHUkI.png)), it seems that you don't really *use* the class you have defined in the interpreter. Either the `Rectangle` class is loaded when the interpreter start and you redefine it when you typed: `class Rectangle(l: double, w: double)`. Either the class is not loaded and you have defined it for the first time.

In the first case you only have to avoid typing the first line in the interpreter, in the second case, you have to load the class into the interpreter (I'm not familiar with the scala IDE interpreter, so I can't tell you how to do it).

# gcc - 是否有理由不强制复杂浮点类型使用 8 字节对齐？

> ID：10934987
> 
> 赞同：0
> 
> 时间：2012-06-07T15:31:42.307
> 
> 标签：gcc, c99, compiler-optimization, memory-alignment, complex-numbers

[这是这个问题](https://stackoverflow.com/questions/10928341/is-it-guaranteed-that-complex-float-variables-will-be-8-byte-aligned-in-memory)的后续。

我们为我们的嵌入式架构实现了 GCC。因此，我们可以控制编译器和优化器的某些方面。这样的方面可能会潜在地强制复杂浮点对象的 8 字节对齐分配。一般来说，在我们的架构上，如果它们正确对齐，我们可以优化对这些对象的访问，方法是要求单个双重加载指令而不是两个常规加载。

就在一轮增强和错误修复之前，我试图弄清楚在声明复杂的浮点对象时是否有反对强制这种对齐的好论据。有理由不强制这样做吗？

# xcode - RMagick 不会安装，因为 libMagickCore 架构不匹配

> ID：10934989
> 
> 赞同：1
> 
> 时间：2012-06-07T15:31:52.637
> 
> 标签：xcode, macos, imagemagick, rmagick

我想我已经找到了无法在我的 MacOS 10.7 机器上安装 RMagick 的原因。看起来当 RMagick 测试找到 libMagickCore 时，它​​尝试使用 i386 和 x86_64 进行链接，而自制软件仅使用 x86_64 安装了 ImageMagick。

Homebrew 安装 imagemagick 6.7.7-6

我可以使用自制软件来构建具有 i386 和 x86_64 的通用库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:12:44.543

我发现通过使用 rvm 只安装 64 位版本的 ruby​​ 修复的东西。

# tomcat - 是否可以通过 web.xml 中的错误页面标签为 tomcat Web 应用程序传递参数？

> ID：10934990
> 
> 赞同：0
> 
> 时间：2012-06-07T15:31:53.930
> 
> 标签：tomcat, web.xml

我正在尝试创建一个自定义 404 页面，该页面试图找到给定页面的第二个位置。为此，我在 web.xml 中添加了以下内容：

```
<error-page>
    <error-code>404</error-code>
    <location>/error/404-cf-redirect.jsp?</location>
</error-page> 
```

除了调用此页面之外，我还想传递 URI，以便重定向可以了解用户试图到达的位置，然后可以尝试另一个位置。

如果这不能去任何地方，将生成另一个 404，并且同一个 jsp 将以不同的方式处理失败的请求，从而产生正确的错误消息。

是否可以将 URI 作为某个参数传递？

干杯，

阿列克谢蓝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:07:15.477

在您的“未找到”错误页面中，您只需从请求属性中获取此值：

```
request.getAttribute("javax.servlet.forward.request_uri") 
```

这将包括客户端请求的原始 URI。您可以通过阅读 servlet 规范的第 9.4 节（可在此处找到：http: [//jcp.org/aboutJava/communityprocess/final/jsr315/index.html](http://jcp.org/aboutJava/communityprocess/final/jsr315/index.html)）找到有关原始请求的大量信息。整个规范值得一读，任何编写 Web 应用程序的人都需要阅读 IMO。

# c# - 带有动态字段的 ASP.NET MVC 表单

> ID：10934993
> 
> 赞同：4
> 
> 时间：2012-06-07T15:31:57.427
> 
> 标签：c#, asp.net, asp.net-mvc, razor

**问题**

我想显示一个具有可变数量值的表单。但是，每个表单项都必须有一种与之关联的键。例如，表单生成姓名、用户名和职业字段，我还需要生成密钥，以便在提交表单时，接收者方法可以告诉哪些项目是什么。

**尝试的解决方案**

现在我有一个 FieldItems 列表，其中 FieldItem 只是一个类，其中一个类变量是一个字符串。该解决方案在填充表单时有效，但是在提交时会返回一个列表，我无法判断哪个值属于哪个键。我正在考虑使用字典，但我不知道如何在剃须刀中完成。

**查看模型**

```
public class BuildReportViewModel
{
    public IList<BuildReportFieldItemViewModel> Fields { get; set; }
}
public class BuildReportFieldItemViewModel
{
    public string Field { get; set; }
} 
```

**BuildReportFieldItemViewModel 的编辑器**

```
@model BuildReportFieldItemViewModel

<div class="editor-label">
    <label for="@Model.Field">@Model.Field</label>
</div>
<div class="editor-field">
    <input type="text" name="@Model.Field">
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:36:24.063

尝试使用隐藏的关键字段

查看模型

```
public class BuildReportViewModel
{
    public IList<BuildReportFieldItemViewModel> Fields { get; set; }
}
public class BuildReportFieldItemViewModel
{
    public string Field;
    public string Key;
} 
```

BuildReportFieldItemViewModel 的编辑器

```
@model BuildReportFieldItemViewModel

<div class="editor-label">
    <label for="@Model.Field">@Model.Field</label>
</div>
<div class="editor-field">

    @Html.TextBoxFor(x => x.Field)
    @Html.Hidden(Model.Key, "key_value");
</div> 
```

# iis - 制作虚拟目录时 Pageflex Storefront 崩溃 (IIS newb)

> ID：10934995
> 
> 赞同：2
> 
> 时间：2012-06-07T15:32:13.330
> 
> 标签：iis, deployment, wizard, storefront

我正在尝试使用部署向导从 pageflex 店面安装示例部署。一切正常，直到我点击完成。当它开始创建虚拟目录时，程序停止响应。

另一个相关问题可能是我在启动部署向导时收到消息“无法枚举可用网站”。我对整个 IIS 的事情还是很陌生，所以我可能在某个地方搞砸了。

我希望我能更具体一些，但似乎没有其他人有这个问题，而且 pageflex 的文档文件都没有考虑到部署向导会崩溃的想法。

有什么帮助吗？

编辑：这原来是一个数据库访问问题。确保您拥有文档中所述的正确权限。

# java - 在Java中实现按propertyX然后按propertyY然后按propertyZ排序

> ID：10934996
> 
> 赞同：0
> 
> 时间：2012-06-07T15:32:19.930
> 
> 标签：java, sorting, collections

给定以下课程：

```
class Boo {
    private final String propertyX;
    private final Double propertyY;
    private final Integer propertyZ;
} 
```

当在 a上调​​用时，如何构造 a`Comparator`会导致类的实例由 propertyX 排序，然后由 propertyY 排序，然后由 propertyZ 排序。`Collection.sort(...)``Collection<Boo>`

是一条`Comparator`路吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:39:39.870

你真的按照你的建议去做。

```
Comparator<Boo> booCmp = new Comparator<Boo>() {
    @Override
    public int compare(Boo o1, Boo o2) {
        int cmp = o1.propertyX.compareTo(o2.propertyX);
        if (cmp == 0)
            cmp = o1.propertyY.compareTo(o2.propertyY);
        if (cmp == 0)
            cmp = o1.propertyZ.compareTo(o2.propertyZ);
        return cmp;
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:40:55.613

@sudocode 给出了一个很好的答案，但我认为这对你来说太过分了。只需实现您的自定义比较器进行比较`propertyX`，然后`propertyY`。将此比较器与`Collections.sort()`or一起使用`Arrays.sort()`

# c# - 如何使用 WPF Telerik DataPager 仅加载 PageSize 的大小？

> ID：10934999
> 
> 赞同：1
> 
> 时间：2012-06-07T15:32:35.500
> 
> 标签：c#, wpf, xaml, telerik, telerik-grid

我在我的项目中使用 WPF Telerik GridView 和 DataPager，我想使用这两个控件显示项目列表。

我将DataPager 的*Source属性绑定到 DataGrid 的**Items*属性（就像原始演示一样）。我的问题是：datapager 在第一次调用中加载所有实体！我只想加载页面大小（20）。

这是我的代码：

```
private void LoadProductsBackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
{
    using (AccountingContext context = new AccountingContext())
    {
        Dispatcher.Invoke((Action)(() => grdProducts.ItemsSource = new ObservableCollection<Item>(context.Items.Include("UnitType").Include("Producer").ToList())));
    }
}

<telerik:RadDataPager Name="dataPager" PageSize="20" Source="{Binding Items, ElementName=grdProducts}" />

    <telerik:RadGridView Name="grdProducts">
        <telerik:RadGridView.Columns>
            <telerik:GridViewDataColumn Header="{x:Static sr:EntitiesResource.ID}" DataMemberBinding="{Binding Path=ID}" />
            <telerik:GridViewDataColumn Header="{x:Static sr:EntitiesResource.ProductName}" DataMemberBinding="{Binding Path=Name}" Width="200" />
            <telerik:GridViewDataColumn Header="{x:Static sr:EntitiesResource.Producer}" DataMemberBinding="{Binding Path=Producer.Name}" Width="200" />
            <telerik:GridViewDataColumn Header="{x:Static sr:EntitiesResource.UnitType}" DataMemberBinding="{Binding Path=UnitType.Name}" Width="150" />
            <telerik:GridViewDataColumn Header="{x:Static sr:EntitiesResource.Price}" DataMemberBinding="{Binding Path=Price}" Width="150" />
            <telerik:GridViewDataColumn Header="{x:Static sr:EntitiesResource.Description}" DataMemberBinding="{Binding Path=Description}" Width="*" />
        </telerik:RadGridView.Columns>
    </telerik:RadGridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:23:31.480

默认情况下，datapager 处理数据集合并在内部拆分为指定的页面大小。因此，您说得对，它先获取所有内容，然后再获取页面。但是对于您想要在每次页面更改时检索数据 = pagesize 的场景，您需要自定义 rad 数据寻呼机 Source。基本上 PageSource 的类型是 IPagedCollectionView。因此，您需要创建一个实现 IEnumerable 和 Telerik.Windows.Data.IPagedCollectionView 接口的类，为这些接口成员提供实现，您将能够实现您的要求。在这里解释它很长。但我可以建议的是 - 下载 WPF 的 RadControls 并使用 DataPager 查看 Endless Paging。这提供了您正在寻找的要求。

希望我能够为您提供一些关于您的要求的指示。

Lohith (Tech Evangelist, Telerik India)