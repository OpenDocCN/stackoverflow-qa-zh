# StackOverflow 问答 11502000-11502999

# iphone - 从 xib 文件中为 UIBarButtonItem 添加图像-Objective C

> ID：11502000
> 
> 赞同：1
> 
> 时间：2012-07-16T09:54:49.500
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我正在尝试`UIBarButtonItem`从`xib`文件本身为我添加图像。但是，我得到了一个与我的图像大小和形状相同的灰色按钮。`xib`如何在不手动编写代码的情况下直接从我的文件中正确显示图像？该按钮出现在工具栏上。谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:31:47.610

`UIButton`旁边使用`barButtonItem`。它会自动在其中生成 a`barButton`和 a `Button`。那么您需要将`batButtonItem`文本更改为“”并`Image`更改`UIButton`

正如我测试的那样，它会起作用并在旁边显示你的照片`barButtonItem`

# c# - 如何实现只能访问顶部模式窗口？

> ID：11502003
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:55:01.003
> 
> 标签：c#, .net, silverlight, radwindow

跟随问题。在我的应用程序中，您可以打开多个模式窗口。每个窗口都依赖于先前打开的窗口（分层）。意思是当一个子窗口打开时，用户不能把这个子窗口拖到一边和父窗口交互。

我怎样才能实现顶部子窗口后面的表面冻结？顺便说一句，我使用[RadWindow](http://www.telerik.com/help/silverlight/radwindow-overview.html)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:31:02.083

尝试将子 RadWindow 的 Owner 属性设置为其父 RadWindow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:03:37.453

关键是类的`bool WindowBaseAutomationPeer.IsTopmost`属性`RadWindow`。[Telerik 文档](http://www.telerik.com/help/silverlight/p_telerik_windows_controls_windowbaseautomationpeer_istopmost.html)

# java - 一次读取单个字节与多个字节时的性能？

> ID：11502004
> 
> 赞同：10
> 
> 时间：2012-07-16T09:55:03.077
> 
> 标签：java, inputstream

我试图在性能方面进行`InputStream.read()`比较`InputStream.read(byte[] b)`。

考虑到类的方法只是重复调用该方法`InputStream.read(byte[] b)`，在某种程度上更快吗？`read(b, off, len)``InputStream``read()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:50:41.927

您不应该混淆 InputStream 的默认行为和它的大多数子类的行为。OO 设计的一个原则是子类可以更改该实现的方法的行为。

从 InputStream - read(byte[]) 重复调用 read()。

```
public int read(byte b[], int off, int len) throws IOException {
   // code removed

        for (; i < len ; i++) {
            c = read();

   // code removed
} 
```

从 BufferedInputStream - read(byte[]) 不调用 read()。

```
public synchronized int read(byte b[], int off, int len) throws IOException {
   // code removed
        int nread = read1(b, off + n, len - n);
   // code removed
}

private int read1(byte[] b, int off, int len) throws IOException {
   // code removed
            return getInIfOpen().read(b, off, len);
   // code removed
} 
```

从 FileInputStream - read(byte[]) 不调用 read()。

```
public int read(byte b[], int off, int len) throws IOException {
    return readBytes(b, off, len);
}

private native int readBytes(byte b[], int off, int len) throws IOException; 
```

虽然 InputStream 一次读取一个字节，但几乎所有实现都会将 read(byte[]) 传递给底层流中的相同方法。

注意： read(byte[], int, int) 的实现在所有三种情况下都不同。

> 我要更清楚地问的是：假设我想读取 20 个字节，一次读取一个字节将在循环中每次都命中底层流（例如文件系统），这意味着 20 次..ok 现在读取 20 的数组一口气读取字节，即使用 read(byte[] 20)，现在这将命中底层流（例如文件系统）一次或 20 次..?? （正如它给出的那样： read(byte[] b) 方法也将重复调用方法 read() 20次）？？

无论您使用 BufferedInputStream 还是 FileInputStream，一次 read(byte[]) 都会导致最多一次系统调用来读取 byte[]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T09:58:18.893

使用您认为对您的情况最方便的任何一种，但请记住`InputStream`用`BufferedInputStream`.

`read()`每次阅读时，如果没有缓冲，单个将命中底层流（例如文件系统）。使用缓冲同样`read()`会加载一个块（例如 4KiB）并对其进行缓冲。显然从磁盘读取（即使存在一些较低级别的操作系统/硬盘缓存）要慢得多。

因此`read(byte[] b)`，只有当您的流没有被缓冲时才会更好 - 或者如果您真的想读取多个字节。

# java - 在 Android 中使用 9 个补丁水平和/或垂直居中

> ID：11502005
> 
> 赞同：2
> 
> 时间：2012-07-16T09:55:03.903
> 
> 标签：java, android, android-relativelayout, nine-patch

我找不到一个话题来谈论我的问题，这在我看来是标准的……这让我觉得这是不可能的。但我试一试。

我有一个带有 9 个补丁背景的 RelativeLayout（其中包含一个内容区域）。

是否可以相对于内容区域在此 RelativeLayout 内将 TextView 水平和/或垂直居中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:26:08.017

这个布局文件将完成任务

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/background"
    android:gravity="center" >

    <TextView
        android:id="@+id/txtTest"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Test TextView"
        android:textColor="#000000" >
    </TextView>

</RelativeLayout> 
```

我使用的 9-patch 图像是

![在此处输入图像描述](../Images/d833367830d7f7904d9b37068644c00b.png)

# search - Windows - 搜索不包含特定术语的文件

> ID：11502008
> 
> 赞同：3
> 
> 时间：2012-07-16T09:55:08.487
> 
> 标签：search, windows-xp

如何在某个目录中搜索**不**包含某个术语的任何内容？

例如：

```
!(FINAL) 
```

或者

```
NOT(FINAL) 
```

我想`FINAL`在 Windows XP 的标题中查找不包含该术语的任何内容（仅限文件）。这可能吗？

非常感谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-03-20T10:04:54.250

例如，您可以搜索`* NOT *FINAL*`以查找其中没有字符串 final 的任何内容

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T13:03:48.083

## Windows 命令提示符

为此，请使用 Windows 命令提示符 CMD。

开始 -> 运行 -> 键入“cmd”。使用“cd”切换到您的工作目录并输入：

```
dir | findstr /v /i "FINAL" 
```

这将列出标题中没有“ *FINAL ”字样的所有***文件和文件夹。**

 *```
dir /a:-d | findstr /v /i "FINAL" 
```

这将列出所有标题中没有“ *FINAL ”字样的***文件。**

 *## 电源外壳

可以使用 Windows PowerShell 执行此操作。

```
Get-ChildItem -exclude "*FINAL*" 
```

这将列出标题中没有“ *FINAL ”字样的所有***文件和文件夹。**

 *```
Get-ChildItem -exclude "*FINAL*" | where { ! $_.PSIsContainer } 
```

这将列出所有标题中没有“ *FINAL ”字样的***文件。**

 *如果您安装的 XP 尚未安装，您可能需要从此处下载并安装 Windows PowerShell。[Windows XP Powershell](http://www.microsoft.com/en-us/download/details.aspx?id=7217)

**有用的链接。**

*   [http://technet.microsoft.com/en-us/library/ee176841.aspx](http://technet.microsoft.com/en-us/library/ee176841.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-05-20T09:08:43.393

如果您正在从资源管理器窗口中寻找某些东西，我只是做了一些研究，因为这里的这些答案对我来说还不够。

要查找名称中没有“解码”的所有 php 文件，我将以下内容放在搜索字段中：

```
*.php -Decoded 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-22T22:04:39.677

在 Windows 文件资源管理器搜索框中，键入：-

NAME:AAAA（查找标题中带有 AAAA 的文档）

NAME:AAAA AND NAME:BBBB（查找标题中同时包含 AAAA 和 BBB 的文档）

NAME:XXXX AND NOT:YYY（查找标题中包含 XXXX 但不是 YYY 的文档）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-29T10:38:18.483

值得一提的是，如果您确实拥有 Total Commander ( [https://www.ghisler.com/index.htm](https://www.ghisler.com/index.htm) )，它具有相当不错的搜索功能。它能够查看文件并有一个明确的复选框**“查找不包含文本的文件”**

（注意：我与 Total Commander 没有任何关系，但它是一个很好的工具）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T10:05:21.387

您可以使用这样的代码：

```
grep -rin "find-what?" ./ 
```

为此，您需要 cmd-bash。让工作更轻松！****

# java - 设计数据库来保存 html、jsp、java、javascript 等代码

> ID：11502009
> 
> 赞同：1
> 
> 时间：2012-07-16T09:55:11.490
> 
> 标签：java, javascript, jquery, database-design

我想构建一个小工具来在数据库中保存有用的代码片段。但不知道我应该使用哪种数据类型来保存所有代码。有问题`special characters`吗？我可以`String`用来保存代码吗？你能给我一些建议吗？先感谢您。

**更新**

我要做一张像这样的桌子：

-- ID (UUID) -- -- 名称（字符串） -- -- 类型（字符串） -- -- 代码（字符串） --

保存代码。有小费吗？

**更新**

这里有一些想法：

1.  使用 TEXT 并设置正确的字符集。我想我会用`UTF-8`.
2.  使用 BLOB 存储代码

我不确定，哪个更好。我需要一个关于这个的讲座。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T09:57:39.713

Id 使用`text`数据类型，因为您可以存储任何长度的数据，还要确保使用正确的字符编码，以便您可以表示所需的符号。

这里的参考是 TEXT / BLOB [http://dev.mysql.com/doc/refman/5.0/en/blob.html的 mySQL 参考](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:00:27.000

如果将代码存储为 BLOB (byte[])，则应该没有字符集问题

# c# - 实体数据源到数据表

> ID：11502012
> 
> 赞同：0
> 
> 时间：2012-07-16T09:55:20.003
> 
> 标签：c#, excel, gridview, entitydatasource

我有一个从 EntityDataSrouce 读取数据源的 Gridview。现在我想将 gridview 的 EntityDatasource 转换为 DataTable，这样我就可以将 Gridview 导出为 Excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T02:29:56.347

您无需将其转换为`DataTable`仅用于导出。您可以通过 gridview self 来完成。

看这个链接： http: [//mattberseth.com/blog/2007/04/export_gridview_to_excel_1.html](http://mattberseth.com/blog/2007/04/export_gridview_to_excel_1.html)

在本文中，作者使用了一个实用程序类将其导出为 .xls 文件，因此，您可以下载它，添加到您的项目中并像示例一样使用。

# mysql - 如果其中一个值存在则更新，否则插入

> ID：11502013
> 
> 赞同：0
> 
> 时间：2012-07-16T09:55:21.023
> 
> 标签：mysql, if-statement

如何在插入查询中检查特定列是否具有特定值，然后更新该行。否则它应该插入一个新行。

像这样的东西是我想要的：

```
INSERT INTO table (col1, col2, col3) VALUES (val1, val2, val3) UPDATE IF col3 = $number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:00:40.473

在您的上创建一个`UNIQUE`密钥`col3`：

```
ALTER TABLE `table` ADD UNIQUE KEY (col3) 
```

然后使用[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/en/insert-on-duplicate.html)：

```
INSERT INTO `table` (col1, col2, col3) VALUES (val1, val2, val3)
ON DUPLICATE KEY UPDATE col1 = VALUES(col1), col2 = VALUES(col2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:00:52.267

看一下`REPLACE INTO`命令（[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/replace.html)）。

```
REPLACE INTO table (col1, col2, col3) VALUES (val1, val2, val3); 
```

它检查主键和唯一索引，当已经存在匹配条目时，该行被新行替换，否则插入新行。

**编辑**

正如@eggyal 提到的那样，这种情况下的行为，当行被替换时，实际上是删除旧行并随后插入新行。当您使用触发器、外键等时，这可能会导致一些问题。

实际上，您也可能会丢失某些列的内容。假设您有一个包含 3 列 ( `col1`to `col3`) 的表，但`REPLACE`只设置了其中的两个 ( `col1`, `col2`)，第三个`col3`将接收指定的默认值而不保留旧值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:03:23.867

如果您在该列上有唯一索引，则使用它

```
INSERT INTO table (col1, col2, col3) VALUES (val1, val2, val3) 
ON DUPLICATE KEY UPDATE col3 = $number 
```

# iphone - 如何从 nsstring 中删除子字符串？

> ID：11502015
> 
> 赞同：1
> 
> 时间：2012-07-16T09:55:28.323
> 
> 标签：iphone, regex, replace, nsstring, substring

好的，假设我有字符串“ `hello my name is donald`”

现在，我想删除从“ `hello`”到“ `is`”的所有内容，“ `my name`”可以是任何东西，也可以是“ `his son`”

所以基本上，简单地做是`stringByReplacingOccurrencesOfString`行不通的。

（我确实有 RegexLite）

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:34:37.987

像下面这样使用它会帮助你

```
NSString *hello = @"his is name is isName";
NSRange rangeSpace = [hello rangeOfString:@" " 
                                  options:NSBackwardsSearch];
NSRange isRange = [hello rangeOfString:@"is" 
                               options:NSBackwardsSearch 
                                 range:NSMakeRange(0, rangeSpace.location)];

NSString *finalResult = [NSString stringWithFormat:@"%@ %@",[hello substringToIndex:[hello rangeOfString:@" "].location],[hello substringFromIndex:isRange.location]];
NSLog(@"finalResult----%@",finalResult); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:50:51.440

如果您总是知道您的字符串将以 'hello my name is ' 开头，那么包括最后一个空格在内的 17 个字符，所以如果您

```
NSString * hello = "hello my name is Donald Trump";
NSString * finalNameOnly = [hello substringFromIndex:17]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:01:42.960

以下 NSString 类别可能会对您有所帮助。它对我有用，但不是我创造的。感谢作者。

**NSString+Whitespace.h**

```
#import <Foundation/Foundation.h>

@interface NSString (Whitespace)

- (NSString *)stringByCompressingWhitespaceTo:(NSString *)seperator;

@end 
```

**NSString+空格.m**

#

```
import "NSString+Whitespace.h"

@implementation NSString (Whitespace)
- (NSString *)stringByCompressingWhitespaceTo:(NSString *)seperator
{
    //NSArray *comps = [self componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];
    NSArray *comps = [self componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];

    NSMutableArray *nonemptyComps = [[NSMutableArray alloc] init];

    // only copy non-empty entries
    for (NSString *oneComp in comps)
    {
        if (![oneComp isEqualToString:@""])
        {
            [nonemptyComps addObject:oneComp];
        }

    }

    return [nonemptyComps componentsJoinedByString:seperator];  // already marked as autoreleased
}
@end 
```

# sql - 计算每组的前 N 个值

> ID：11502022
> 
> 赞同：0
> 
> 时间：2012-07-16T09:56:05.283
> 
> 标签：sql, ms-access

我有一个包含时间序列数据的访问表，如下所示：

```
loc | date | value
A    2/11/07 50
A    2/12/07 45
A    2/13/07 23
B    2/11/07 34
B    2/12/07 46
B    2/13/07 56
C   ....... ...
...
D..........
..... 
```

我想获得 Z, (value - avg(values)/stDev(values), 每个组在不同时间段的值，因此 20 z 值将考虑过去 20 天的值，过去 60 天的 60 天天等。我还想选择最近一天的 z 值，所以结果如下所示：

```
loc | date | value | 20Day zValue | 60Day ZValue | 120 day Zvalue
A   2/13/07   23       .04           .09            .6
B   2/13/07   56         .87         .54            .96
C ..................... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:05:49.387

尝试这个：

```
SELECT 
    a.*,
    b.20Day_zValue,
    c.60Day_zValue,
    d.120Day_zValue
FROM
(
    SELECT aa.loc, aa.date, aa.value
    FROM tbl aa
    INNER JOIN 
    (
        SELECT loc, MAX(date) AS maxdate
        FROM tbl
        GROUP BY loc
    ) bb ON aa.loc = bb.loc AND aa.date = bb.maxdate
) a
INNER JOIN 
(
    SELECT loc, AVG(value)/StDev(value) AS 20Day_zValue
    FROM tbl
    WHERE date >= DateAdd('d', -20, Date())
    GROUP BY loc
) b ON a.loc = b.loc
INNER JOIN 
(
    SELECT loc, AVG(value)/StDev(value) AS 60Day_zValue
    FROM tbl
    WHERE date >= DateAdd('d', -60, Date())
    GROUP BY loc
) c ON a.loc = c.loc
INNER JOIN 
(
    SELECT loc, AVG(value)/StDev(value) AS 120Day_zValue
    FROM tbl
    WHERE date >= DateAdd('d', -120, Date())
    GROUP BY loc
) d ON a.loc = d.loc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T08:54:39.710

我想出了一个解决方案，zane bien 的回答是一个好的开始。主要问题是 ms access 对多个连接的要求。基本的括号结构是这样的：

```
Select a,b,c
FROM
(((Table1 Inner Join Table2 ON a = b) 
Inner Join Table3 ON a = c) 
Inner Join Table4 ON a = d) 
```

我的问题的解决方案是：

```
SELECT A.loc AS Location, A.value AS Value, 
    (A.value - B.OneMonthAvg) / B.OneMonthStdev AS OneMonthZscore,
    (A.value - C.ThreeMonthAvg) / C.ThreeMonthStdev AS ThreeMonthZscore,
    (A.value - D.SixMonthAvg) / D.SixMonthStdev AS SixMonthZscore,
    (A.value - E.OneYearAvg) / E.OneYearStdev AS OneYearZscore,
    (A.value - F.TwoYearAvg) / F.TwoYearStdev AS TwoYearZscore,
    (A.value - G.ThreeYearAvg) / G.ThreeYearStdev AS ThreeYearZscore

FROM 
(((((((tbl AS A 
INNER JOIN 
    (SELECT loc, AVG(value) AS OneMonthAvg, STDEV(value) AS OneMonthStdev 
     FROM tbl
     WHERE date >= DateAdd('m', -1, Date())
     GROUP BY loc) 
AS B ON A.loc = B.loc)
INNER JOIN 
    (SELECT loc, AVG(value) AS ThreeMonthAvg, STDEV(value) AS ThreeMonthStdev
    FROM tbl
    WHERE date >= DateAdd('m', -3, Date())
    GROUP BY loc) 
AS C ON A.loc = C.loc)
INNER JOIN
    (SELECT loc, AVG(value) AS SixMonthAvg, STDEV(value) AS SixMonthStdev
    FROM tbl
    WHERE date >= DateAdd('m', -6, Date())
    GROUP BY loc)
AS D ON A.loc = D.loc)
INNER JOIN
    (SELECT loc, AVG(value) AS OneYearAvg, STDEV(value) AS OneYearStdev
    FROM tbl
    WHERE date >= DateAdd('yyyy', -1, Date())
    GROUP BY loc)
AS E ON A.loc = E.loc)
INNER JOIN
    (SELECT loc, AVG(value) AS TwoYearAvg, STDEV(value) AS TwoYearStdev
    FROM tbl
    WHERE date >= DateAdd('yyyy', -2, Date())
    GROUP BY loc)
AS F ON A.loc = F.loc)
INNER JOIN
    (SELECT loc, AVG(value) AS ThreeYearAvg, STDEV(value) AS ThreeYearStdev
    FROM tbl
    WHERE date >= DateAdd('yyyy', -3, Date())
    GROUP BY loc)
AS G ON A.loc = G.loc)
Where A.date = Date() 
```

我更改了想要获取 z 分数的日期范围。

# c# - 将字符串解析为枚举

> ID：11502023
> 
> 赞同：0
> 
> 时间：2012-07-16T09:56:05.633
> 
> 标签：c#, parsing, enums

考虑下面的枚举：

```
public enum TestType
{
    Mil,
    IEEE
} 
```

如何将以下字符串解析为上述枚举？

`Military 888d Test`如果是`TestType.Mil` 或者 `IEEE 1394`如果是`TestType.IEEE`

我的想法是检查字符串的第一个字母是否匹配 'Mil' 或 'IEEE' 然后我将其设置为我想要的枚举，但问题是还有其他不应该解析的情况！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:00:31.027

我已经回答了：[如何在 Enum C# 中设置字符串？](https://stackoverflow.com/questions/9126228/how-to-set-string-in-enum-c/9126326#9126326)

枚举不能是字符串，但您可以附加属性，然后您可以读取枚举的值，如下所示......................

```
public enum TestType
{
      [Description("Military 888d Test")]
     Mil,
      [Description("IEEE 1394")]
     IEEE
 }

public static string GetEnumDescription(Enum value)
{
    FieldInfo fi = value.GetType().GetField(value.ToString());

    DescriptionAttribute[] attributes =
        (DescriptionAttribute[])fi.GetCustomAttributes(
        typeof(DescriptionAttribute),
        false);

    if (attributes != null &&
        attributes.Length > 0)
        return attributes[0].Description;
    else
        return value.ToString();
} 
```

如果您想仔细阅读，这是一篇好文章：[Associating Strings with enums in C#](http://blog.spontaneouspublicity.com/post/2008/01/17/Associating-Strings-with-enums-in-C.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:15:46.777

我对您的情况的理解是字符串可以采用任何格式。您可以使用诸如“Military 888d Test”、“Mil 1234 Test”、“Milit xyz SOthing”之类的字符串...

在这种情况下，简单的 Enum.Parse 不会有帮助。您需要为 Enum 的每个值决定您希望允许哪些组合。考虑下面的代码......

```
public enum TestType
{
    Unknown,
    Mil,
    IEEE
}

class TestEnumParseRule
{
    public string[] AllowedPatterns { get; set; }
    public TestType Result { get; set; }
}

private static TestType GetEnumType(string test, List<TestEnumParseRule> rules)
{
    var result = TestType.Unknown;
    var any = rules.FirstOrDefault((x => x.AllowedPatterns.Any(y => System.Text.RegularExpressions.Regex.IsMatch(test, y))));
    if (any != null)
        result = any.Result;

    return result;
}

var objects = new List<TestEnumParseRule>
                  {
                      new TestEnumParseRule() {AllowedPatterns = new[] {"^Military \\d{3}\\w{1} [Test|Test2]+$"}, Result = TestType.Mil},
                      new TestEnumParseRule() {AllowedPatterns = new[] {"^IEEE \\d{3}\\w{1} [Test|Test2]+$"}, Result = TestType.IEEE}
                  };
var testString1 = "Military 888d Test";
var testString2 = "Miltiary 833d Spiral";

var result = GetEnumType(testString1, objects);
Console.WriteLine(result); // Mil

result = GetEnumType(testString2, objects);
Console.WriteLine(result); // Unknown 
```

重要的是用相关的正则表达式或测试填充规则对象。你如何将这些值放入数组中，真的取决于你......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T09:57:34.907

尝试这个`var result = Enum.Parse(type, value);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:01:15.497

**编辑**

使用[`Enum.GetNames`](http://msdn.microsoft.com/en-us/library/system.enum.getnames)：

```
foreach (var value in Enum.GetNames(typeof(TestType))) 
{
    // compare strings here
    if(yourString.Contains(value))
    {
        // what you want to do
        ...
    }
} 
```

* * *

如果您使用 .NET4 或更高版本，则可以使用[`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/system.enum.tryparse.aspx). 并且[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/essfb559%28v=vs.80%29)适用于 .NET2 及更高版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T10:02:20.497

请尝试这种方式

```
 TestType testType;
    Enum.TryParse<TestType>("IEEE", out testType); 
```

然后你想比较字符串

```
bool result = testType.ToString() == "IEEE"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T10:08:04.897

简单的方法将为您完成：

```
public TestType GetTestType(string testTypeName)
{
   switch(testTypeName)
   {
       case "Military 888d Test":
           return TestType.Mil;
       case "IEEE 1394":
           return TestType.IEEE;
       default:
           throw new ArgumentException("testTypeName");
   }
} 
```

# php - .htaccess：隐藏 URL 变量

> ID：11502027
> 
> 赞同：1
> 
> 时间：2012-07-16T09:56:12.723
> 
> 标签：php, wordpress, .htaccess

我不知道如何使用 .htaccess 文件来更改/隐藏 URL 中的变量

我想使用**WordPress**的 .htaccess 文件， 我的 .htaccess 文件已经包含以下脚本：

```
 # BEGIN WordPress

    <IfModule mod_rewrite.c>

    RewriteEngine On
    RewriteBase /my_site/
    RewriteRule ^index\.php$ - [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /my_site/index.php 

    [L]
    </IfModule>

    # END WordPress 
```

我有网址

```
http://localhost/my_site/project-detail/?pro_id=7 
```

我想隐藏**pro_id=7 之**类的

```
http://localhost/my_site/project-detail/ 
```

但可以在我的 php 脚本文件中捕获这个 $_GET['pro_id'] 。

或者

```
http://localhost/my_site/project-detail/7 
```

我也试过

```
RewriteRule ^project-detail/(.*) /project-detail/?pro_id=$1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:06:39.827

您可以尝试在指令上方添加这些`RewriteBase /my_site/`，因为它们需要在您的 wordpress 内容之前。

首先，您可以直接访问实际请求以重定向到没有查询字符串的 URL：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /my_site/project-detail/?\?pro_id=([^&\ ]+)&?([^\ ]*)
RewriteRule ^ /my_site/project-detail/%1?%2 [R=301,L] 
```

这将使它成为这样的 URL：`http://localhost/my_site/project-detail/?pro_id=7`被**重定向**到`http://localhost/my_site/project-detail/7`和 URL`http://localhost/my_site/project-detail/?pro_id=7&other=param`被**重定向**到`http://localhost/my_site/project-detail/7?other=param`。如果您根本不需要任何额外的参数，请从规则的目标中删除**%2 。**这使得浏览器的地址栏更改为没有`pro_id`查询字符串的 URL。现在我们必须在内部将其重写回查询字符串：

```
RewriteRule ^my_site/project-detail/([^/]+)$ /my_site/project-detail/?pro_id=$1 [QSA,L] 
```

所以在内部，URI 被重写回，`/my_site/project-detail/?pro_id=7`但浏览器的地址栏仍然有看起来干净的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:05:34.693

你有没有尝试过这样的事情：

```
RewriteEngine On 
RewriteRule ^project-detail/([0-9]+)$ project-detail/?pro_id=$1 
```

# iphone - iPhone 异常抛出

> ID：11502034
> 
> 赞同：0
> 
> 时间：2012-07-16T09:56:37.143
> 
> 标签：iphone, objective-c, xcode

> **可能重复：**
> [此类与键的键值编码不兼容](https://stackoverflow.com/questions/3088059/this-class-is-not-key-value-coding-compliant-for-the-key)

当我在 XCode for iphone 中创建应用程序时，我遇到了此类问题。

```
Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<UIViewController 0x4d2eb20> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key singlePicker.'
*** Call stack at first throw: 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:00:55.240

您正在为`NULL`Key设置值

编辑：在您开始使用选择器之前，您需要：

在 .h 文件中：

```
UIViewController<UIPickerViewDelegate,UIPickerViewDataSource>{
 NSArray *array;
} 
```

然后在 .m 文件中：

```
 -(void)viewDidload{ 
  [super viewDidload];

 array = [[NSArray alloc]initWithObjects:@"Lake",@"Diana",@"Jone",@"Alice",@"Byber",@"Nuces",nil]; 

} 
- (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)thePickerView {
return 1;
}

- (NSInteger)pickerView:(UIPickerView *)thePickerView numberOfRowsInComponent:(NSInteger)component {
        return [array count];
 }

 - (void)pickerView:(UIPickerView *)thePickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
 /*  do what you want if the picker selected  */

 }

 - (NSString *)pickerView:(UIPickerView *)thePickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {
 return [array objectAtIndex:row];

 } 
```

# android - 如何使用 html 链接在 Facebook 墙上发布消息？

> ID：11502042
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:57:04.317
> 
> 标签：android, facebook

在我的 android 应用程序中，我使用 Facebook Api 在他/她的墙上发布消息。它工作正常，没有任何问题。现在我尝试在其中发布带有 html 链接的消息。该消息已发布在 Facebook 墙上，但 html 链接不起作用。它看起来像普通的文本。这是我试图用代码在 Facebook 墙上发布的消息

```
private String Facebook = "<a href=https://www.facebook.com/>Facebook</a>";

Message = "Hi"+Html.fromHtml(Facebook); 
```

我做错什么了吗。

**编辑**

我想在脸书墙上有这样的

嗨，EveryOne [Facebook](https://www.facebook.com/)是一个非常好的社交网站。

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:26:01.067

试试这个片段来添加 html 链接：

```
 Bundle parameters = new Bundle();
    JSONObject attachment = new JSONObject();
    try {
            attachment.put("message", "Messages");
            attachment.put("name", "Message");
            attachment.put("href", "http://www.facebook.com");
    } catch (JSONException e) {}
    parameters.putString("attachment", attachment.toString());
    facebook.request(parameters); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:06:23.697

```
// put this code in your button click event listener     
facebook = new Facebook("your facebook id");

                    mAsyncRunner = new AsyncFacebookRunner(facebook);
                    facebook.authorize(this, new String[]
                    { "publish_stream", "offline_access" }, -1,

                    new DialogListener()
                    {
                        public void onComplete(Bundle values)
                        {
                            Log.e("tag", "Values returned by Bundle ====> " + values.toString());
                            fbImageSubmit(facebook, "", "caption", "description", "name", "www.google.com");
                        }

                        public void onFacebookError(FacebookError error)
                        {

                        }

                        public void onError(DialogError e)
                        {

                        }

                        public void onCancel()
                        {

                        }
                    });

//add method into your class

    private void fbImageSubmit(Facebook fb, String imageurl, String caption, String description, String name, String linkurl)
        {
            if (fb != null)
            {
                if (fb.isSessionValid())
                {
                    Bundle b = new Bundle();
    //              b.putString("picture", "");
                    b.putString("caption", "");
                    b
                            .putString(
                                    "description",
                                    "test");
                    b.putString("name", "Hi Friends, I am using the your app name app for Android!");
                    b.putString("link", "https://market.android.com/details?id="+this.getApplication().getPackageName().toString());
                    try
                    {
                        String strRet = "";
                        strRet = fb.request("/me/feed", b, "POST");
                        JSONObject json;
                        try
                        {
                            json = Util.parseJson(strRet);
                            if (!json.isNull("id"))
                            {
                                Log.i("Facebook", "Image link submitted.");
                            }
                            else
                            {
                                Log.e("Facebook", "Error: " + strRet);
                            }
                        } catch (FacebookError e)
                        {
                            Log.e("Facebook", "Error: " + e.getMessage());
                        }
                    } catch (Exception e)
                    {
                        Log.e("Facebook", "Error: " + e.getMessage());
                    }
                }
            }
        } 
```

# android - AbstractThreadedSyncAdapter->onPerformSync 调用时间过长

> ID：11502043
> 
> 赞同：1
> 
> 时间：2012-07-16T09:57:11.810
> 
> 标签：android, synchronization

我正在使用 AbstractThreadedSyncAdapter 将我的 Android 手机中的一些数据与服​​务器同步。当用户使用手机应用程序登录时，我执行第一次同步，以便用户在开始使用我的应用程序之前在手机中准备好所有数据。我用 eclipse 的模拟器对其进行了测试，它工作正常，但是当我在手机上测试它时，函数 onPerformSync 需要很长时间才能被调用（比如一分钟或更长时间）。

这是我在 Authenticator Activity 中使用的代码：

```
 Bundle params = new Bundle();
        params.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, false);
        params.putBoolean(ContentResolver.SYNC_EXTRAS_DO_NOT_RETRY, false);
        params.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, false);
        ContentResolver.addPeriodicSync(account, "com.pfc.authority", params, 30);
        ContentResolver.setSyncAutomatically(account, "com.pfc.authority", true);

        ContentResolver.requestSync(account,"com.pfc.authority",params); 
```

我的 AbstractThreadedSyncAdapter 的构造函数被调用得非常快，但是我的应用程序仍然在等待同步完成，就像我说的 onPerformSync 函数需要太多时间才能启动，我不知道为什么我的手机需要太长时间才能调用它。

这是日志（为我的应用程序过滤）。我将 Log.d 放在构造函数和 onPerformSyn 函数中：

```
11:47:49 SweetSyncAdapter: constructor
11:48:01 SweetSyncAdapter: constructor
11:48:36 SweetSyncAdapter: onPerformSync 
```

我查看了完整的日志（没有过滤它），在执行我的应用程序时没有错误或警告，但我看到还有另一个同步正在进行（音乐、日历等）。这可能是问题吗？

我用两个不同的 ROM（2.3.6 JVU 和现在的 ICS）对其进行了测试，结果是一样的。有人知道为什么会这样吗？

PD：现在我看到注销也会发生同样的情况（我在用户注销时执行同步），并且手机已经等待调用 onPerformSync 5 分钟）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T13:11:14.077

创建帐户后，我请求与以下行同步。

```
Bundle bundle = new Bundle();
bundle.putBoolean(ContentResolver.SYNC_EXTRAS_EXPEDITED, true);
bundle.putBoolean(ContentResolver.SYNC_EXTRAS_FORCE, true);
bundle.putBoolean(ContentResolver.SYNC_EXTRAS_MANUAL, true);
ContentResolver.requestSync(account, authority, bundle); 
```

我想这`SYNC_EXTRAS_FORCE`会帮助你

# linux - Gcc 编译“无法计算目标文件的后缀：无法编译”

> ID：11502045
> 
> 赞同：28
> 
> 时间：2012-07-16T09:57:13.837
> 
> 标签：linux, gcc, compiler-construction, linux-from-scratch

我实际上正在阅读 LFS 书（7.1 版），在第 53 页被阻止。尝试编译 gcc，我尝试了以下命令：

```
./configure --target=$LFS_TGT --prefix=$LFS/build/gcc-build --disable-nls\
--disable-shared --disable-multilib --disable-decimal-float --disable-threads\
--disable-libmudflap --disable-libssp --disable-libgomp --disable-libquadmath\
--disable-target-libiberty --disable-target-zlib\
--enable-languages=c\
--without-ppl --without-cloog\
--with-mpfr-include=$LFS/source/mpfr/src
--with-mpfr-lib=$LFS/source/mpfr/src/.libs\
--with-gmp-include=/mnt/LFS/source/gmp\
--with-gmp-lib=/mnt/LFS/source/gmp/.libs\
--with-mpc-include=/mnt/LFS/source/mpc/src\
--with-mpc-lib=/mnt/LFS/source/mpc/src/.libs 
```

运行 gcc 的配置脚本（当然我已经编译了 mpfr、mpc 和 gmp）。但是一旦我启动：

```
make -j4 
```

我收到以下错误：

```
checking for suffix of object files... configure: error: in `/mnt/LFS/source/gcc-4.6.2/x86_64-lfs-linux-gnu/libgcc':
configure: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details.
make[1]: *** [configure-target-libgcc] Error 1 
```

我试图用谷歌搜索它并尝试了我找到的解决方案，但没有任何效果。有谁知道我为什么会收到这个错误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-23T07:52:33.607

当测试程序尝试链接 libmpc/libmpfr/libgmp 时，此问题是由动态链接库路径问题引起的。

附加下面的环境变量以允许**ld**链接到正确的**so**文件：

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/path/to/mpc/lib/ 
```

然后再次尝试构建 gcc。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-25T13:04:58.337

“构建 GCC 并非易事，但如果您仔细按照说明进行操作，也不难。许多人在没有正确阅读安装文档的情况下急于尝试构建它，并犯了以下一个或多个常见错误：

1.  不要从 gcc src 目录运行 ./configure（不支持）=> 您需要从 gcc 源目录之外运行 configure

2.  注意：如果 GCC 动态链接到必备库 (GMP/MPFR/MPC)，那么在构建 gcc 和使用已安装的编译器时，共享库必须位于动态链接器的路径 (LD_LIBRARY_PATH) 中。”

简单示例（没有到 GMP/MPFR/MPC 的动态链接）：

```
tar xzf gcc-4.8.0.tar.gz
cd gcc-4.8.0
./contrib/download_prerequisites
cd ..
mkdir objdir
cd objdir
$PWD/../gcc-4.8.0/configure --prefix=/opt/gcc-4.8.0 
make
make install 
```

资料来源： [Advogato Doc](http://advogato.org/person/redi/diary/240.html) - [GNU Doc](http://gcc.gnu.org/wiki/InstallingGCC)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-28T20:08:24.167

此错误消息可能由多种不同原因引起。找出哪一个的最好方法是检查下面示例中的日志文件“/home/manu/gcc/gcc/i686-pc-linux-gnu/libgcc/config.log”。或者在原始海报案例中'/mnt/LFS/source/gcc-4.6.2/x86_64-lfs-linux-gnu/libgcc' 并查找最后一个错误行。

引用 GCC 常见问题解答：http: [//gcc.gnu.org/wiki/FAQ#configure_suffix](http://gcc.gnu.org/wiki/FAQ#configure_suffix)

> 与任何 GNU 项目一样，GCC 使用 GNU 自动工具来为构建系统的细节配置编译。因此，配置脚本使用小型测试程序（通常称为 conftest.c）来测试某些功能和/或特性是否可用。如果此类测试程序的编译失败，您将看到如下错误消息：

```
 checking for suffix of object files... configure: error: in
 `/home/manu/gcc/gcc/i686-pc-linux-gnu/libgcc': configure: error:
 cannot compute suffix of object files: cannot compile See `config.log'
 for more details. make[2]: *** [configure-stage1-target-libgcc] Error
 1 make[2]: Leaving directory `/home/manu/gcc/gcc' 
```

> 此错误消息非常具有误导性，并且该问题通常与该消息无关。您必须检查发生错误的目录中的文件“config.log”。在上面的示例中，您必须检查目录“/home/manu/gcc/gcc/i686-pc-linux-gnu/libgcc”中的“config.log”文件。在配置过程中可能有多个测试程序失败，但其中一些失败并不重要。检查文件中的最后一个错误条目。
> 
> 此错误消息的常见原因是：
> 
> *   缺少 GCC 构建所需的库，特别是 MPFR、GMP 和 MPC。如果作为共享库安装，它们必须位于运行时链接器的搜索路径中，以便可以找到它们。请按照为什么我的 ./configure 和 make 失败？
>     
>     
> *   编译器崩溃了。例如，如果出现“conftest.c: internal compiler error:”之类的错误，则表明编译器存在错误。如果您使用的是未经修改的 GCC 版本，请按照程序报告错误。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-07-09T00:40:34.730

这发生在创建交叉编译器时。

它不是指顶级`config.log`，而是`$LFS_TGT/libgcc/config.log`.

对我来说，在那里，它说：

```
configure:3566: /foo/gcc/build/./gcc/xgcc -B/foo/gcc/build/./gcc/ -B/opt/gcc-cross-11.1.0/aarch64-none-elf/bin/ -B/opt/gcc-cross-11.1.0/aarch64-none-elf/lib/ -isystem /opt/gcc-cross-11.1.0/aarch64-none-elf/include -isystem /opt/gcc-cross-11.1.0/aarch64-none-elf/sys-include    -o conftest -g -O2   conftest.c  >&5
conftest.c:9:10: fatal error: stdio.h: No such file or directory
    9 | #include <stdio.h>
      |          ^~~~~~~~~
compilation terminated.
configure:3569: $? = 1
configure:3782: checking for suffix of object files
configure:3804: /foo/gcc/build/./gcc/xgcc -B/foo/gcc/build/./gcc/ -B/opt/gcc-cross-11.1.0/aarch64-none-elf/bin/ -B/opt/gcc-cross-11.1.0/aarch64-none-elf/lib/ -isystem /opt/gcc-cross-11.1.0/aarch64-none-elf/include -isystem /opt/gcc-cross-11.1.0/aarch64-none-elf/sys-include    -c -g -O2  conftest.c >&5
/foo/gcc/build/./gcc/as: line 106: exec: -E: invalid option
exec: usage: exec [-cl] [-a name] [command [arguments ...]] [redirection ...]
configure:3808: $? = 1
configure: failed program was:
| /* confdefs.h */
| #define PACKAGE_NAME "GNU C Runtime Library"
| #define PACKAGE_TARNAME "libgcc"
| #define PACKAGE_VERSION "1.0"
| #define PACKAGE_STRING "GNU C Runtime Library 1.0"
| #define PACKAGE_BUGREPORT ""
| #define PACKAGE_URL "http://www.gnu.org/software/libgcc/"
| /* end confdefs.h.  */
| 
| int
| main ()
| {
| 
|   ;
|   return 0;
| }
configure:3822: error: in `/foo/gcc/build/aarch64-none-elf/libgcc':
configure:3824: error: cannot compute suffix of object files: cannot compile
See `config.log' for more details 
```

你的日志文件相似吗？

我相信 gcc 编译/安装过程将采用各种包含，运行它们`fixincludes`以解决问题并将它们定制到目标架构。预期的文件不存在。

参考[先决条件](https://gcc.gnu.org/install/prerequisites.html)页面，我相信这部分是相关的（强调我的）：

```
C standard library and headers

In order to build GCC, the C standard library and headers must be present for all
target variants for which target libraries will be built (and not only the variant
of the host C++ compiler).

This affects the popular ‘x86_64-pc-linux-gnu’ platform (among other multilib
targets), for which 64-bit (‘x86_64’) and 32-bit (‘i386’) libc headers are usually
packaged separately. If you do a build of a native compiler on ‘x86_64-pc-linux-gnu’,
make sure you either have the 32-bit libc developer package properly installed (the
exact name of the package depends on your distro) or you must build GCC as a 64-bit
only compiler by configuring with the option --disable-multilib. Otherwise, you may
encounter an error such as ‘fatal error: gnu/stubs-32.h: No such file’ 
```

我相信解决方案是获取 TARGET 平台的标头。

# javascript - 抛出字符串而不是错误

> ID：11502052
> 
> 赞同：94
> 
> 时间：2012-07-16T09:57:41.213
> 
> 标签：javascript

既然我们可以用`throw`Javascript 中的关键字抛出任何东西，那么我们不能直接抛出一个错误消息字符串吗？

有谁知道这有什么问题？

让我补充一些背景知识：在 JavaScript 世界中，人们经常依赖参数检查而不是使用 try-catch 机制，因此只使用`throw`. 尽管如此，为了能够捕获一些系统错误，我必须为自己的错误使用不同的类，而不是创建错误的子类，我认为我应该只使用字符串。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-07-16T21:10:26.620

虽然可以~~抛出~~任何值，但通常认为抛出除了实例`Error`或其子类之一之外的任何东西都是糟糕的形式。有几个原因：

1.  捕获代码可能期望抛出的对象具有出现在s上的常用`message`、`stacktrace`和属性。`name``Error`
2.  缺少堆栈跟踪会使调试出现问题，尤其是在未捕获的异常/未处理的拒绝的情况下。例如，调试“Uncaught [Object object]”错误可能特别痛苦。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2014-12-16T09:29:40.453

是的，您[可以抛出其他值](http://www.nczonline.net/blog/2009/03/10/the-art-of-throwing-javascript-errors-part-2/)，但这[不是一个好习惯](https://web.archive.org/web/20111226063046/http://www.devthought.com/2011/12/22/a-string-is-not-an-error/)。

> 有谁知道这有什么问题？

字符串不是错误对象，不传达任何有用的调试信息。Devtools 依赖于它，例如创建错误的文件和行、该`throw`位置的堆栈跟踪等，这些都可以作为对象的属性使用`Error`。

每当您想到抛出原始字符串值时，请`new Error("<the string>")`改为抛出 a。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-16T09:59:11.020

你可以用消息抛出错误，你知道的。

```
try {
    throw new Error("This is an error");
} catch (e) {
    alert(e.message); // This is an error
} 
```

但你实际上*可以抛出字符串：*

```
try {
    throw "This is an error";
} catch (e) {
    alert(e); // This is an error
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-20T16:42:49.450

正如其他人在上面提到的那样，如果您没有抛出 Error 对象，那么您必须有 try/catch 块来捕获这些对象并适当地处理它们，否则会在调试时受到伤害。

然而，当涉及到为了控制程序流等非错误处理目的而抛出错误时，这可能是一种在`throw`没有错误的情况下使用的有用方法。

当使用 throws 来控制程序流时，它在任何语言中都可能是低效的，因为运行时通常会做很多繁重的工作来展开调用堆栈信息并序列化数据，以便它在用户范围内可用。通过避免创建错误，您可以避免这种性能损失。关键是您必须在调用堆栈中有一个处理程序，该处理程序知道如何处理这种情况。例如，如果您`throw {isHardStop: true, stopCode: SOME_CODE}`设计处理程序来检测这一点，您可能能够扁平化您的一些代码或选择更简洁的语法。

这个梯子案例的处理程序的结构可能如下：

```
try { ... } catch(thr) {
    if(!thr){
       // Is not Error or Json - Handle accordingly
    } else if(thr.isHardStop){
       // Handle the stop
    } else {
       // Most likely a real error. Handle accordingly
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-17T13:36:30.983

尽管您可以抛出任何类型的数据，但在调试时这并不是最佳选择。一个 JS`Error`对象包含有关错误和消息的所有类型的信息。而字符串只能包含一条消息。

此附加信息包括：

1.  **fileName**：从哪个文件抛出错误
2.  **Linenumber** : 从哪一行抛出错误
3.  **stacktrace**：从哪个函数调用了错误

例如，来自 chrome devtools 的堆栈跟踪：

[![在此处输入图像描述](../Images/e7557b9b5d689778f40ef55fcb51373d.png)](https://i.stack.imgur.com/K0vHc.png)

# ios - 允许使用 UIImagePickerController 捕获照片，直到单击取消按钮

> ID：11502055
> 
> 赞同：1
> 
> 时间：2012-07-16T09:57:44.967
> 
> 标签：ios, camera, uiimagepickercontroller, photo

我正在实现相机功能，我需要允许用户拍摄他们喜欢的照片并存储它们。我可以做到这一点，但一次只能拍一张照片！用户必须再次单击 takePhoto 按钮才能打开相机并拍摄照片。我试图在照片保存后不关闭 UIImagePickerController 但它不起作用！请参阅我的以下代码。有人可以告诉我如何让用户继续拍照，直到他们点击 UIImagePickerController 上的取消按钮。谢谢。

```
- (IBAction)takePhoto:(id)sender 
{

    if ([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *) kUTTypeImage, nil];
        [self presentModalViewController:imagePicker animated:YES];
    } 
} 

- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) 
    {
        UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
        NSData *imageData = UIImageJPEGRepresentation(image, 1);
       [imageData writeToFile:[delegate filePath:imageName] atomically:YES];
    }

    [picker dismissModalViewControllerAnimated:YES]; --> If I remove this then Camera stays open but Photo click button gets disabled! If I don't remove this it dismiss the camera.

}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker dismissModalViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:02:30.050

看看[这个](https://stackoverflow.com/questions/1787587/what-is-the-recommended-approach-for-taking-multiple-pictures-with-uiimagepicker)线程，它可能会帮助你找到你正在寻找的东西。

# asp.net - Microsoft.Practices.EnterpriseLibrary.Logging 5.0 的日志不起作用

> ID：11502056
> 
> 赞同：1
> 
> 时间：2012-07-16T09:57:52.893
> 
> 标签：asp.net, logging

当我打电话时，我正在使用 Logging 5.0：

```
LoggerUtils.WriteLog("test","test"); 
```

它通过了，但我没有日志信息。

下面是我的配置（在 config.web）：

```
 <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" />

    <section name="dataConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Data.Configuration.DatabaseSettings, Microsoft.Practices.EnterpriseLibrary.Data, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="false" />

      <loggingConfiguration name="" tracingEnabled="true" defaultCategory="General">
    <listeners>
      <add name="Event Log Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" source="Enterprise Library Logging" formatter="Text Formatter" log="" machineName="." traceOutputOptions="None" />
      <add **fileName="Log\test.log"** name="Rolling Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" footer="{" formatter="Text Formatter" header="}" rollFileExistsBehavior="Increment" rollSizeKB="2048" traceOutputOptions="None" />
    </listeners>
    <formatters>
      <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" template="Timestamp: {timestamp} | Message: {message} | Category: {category} | Machine: {localMachine}" name="Text Formatter" />
    </formatters>
    <categorySources>
      <add switchValue="All" name="General">
        <listeners>
          <add name="Event Log Listener" />
        </listeners>
      </add>
    </categorySources>
    <specialSources>
      <allEvents switchValue="All" name="All Events" />
      <notProcessed switchValue="All" name="Unprocessed Category" />
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Event Log Listener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration> 
```

我已经配置了 fileName="Log\test.log"，但里面没有数据。

请帮我找出日志不起作用的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:05:03.680

您没有将文件侦听器配置添加到侦听器列表中：

```
<categorySources>
  <add switchValue="All" name="General">
    <listeners>
      <add name="Rolling Flat File Trace Listener" />
    </listeners>
  </add>
</categorySources> 
```

# vb.net - 自定义操作失败

> ID：11502057
> 
> 赞同：0
> 
> 时间：2012-07-16T09:57:55.417
> 
> 标签：vb.net

我有一个自定义操作来在安装后运行批处理文件。它在 Windows 7 中运行良好，但在 XP 中却不行。

这是我用来运行批处理文件的代码

```
Imports System.ComponentModel
Imports System.Configuration.Install
Imports System.IO
Imports System.Environment
<Security.Permissions.SecurityPermission(Security.Permissions.SecurityAction.Demand)>
Public Class StartBatch
    Public Function appData() As String
        appData = GetFolderPath(SpecialFolder.ApplicationData)
    End Function
<Security.Permissions.SecurityPermission(Security.Permissions.SecurityAction.Demand)> _
    Public Overrides Sub Commit(ByVal savedState As  _
  System.Collections.IDictionary)

        MyBase.Commit(savedState)
        System.Diagnostics.Process.Start(appData() & "\Wilson18\IPChanger\IPFinder.bat")
    End Sub

End Class 
```

我如何才能让它在 Windows XP 上运行，或者，如果操作失败，那么它不会中断安装程序。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T12:26:41.633

基本上这是因为这个

```
<Security.Permissions.SecurityPermission(Security.Permissions.SecurityAction.Demand)> _
    Public Overrides Sub Commit(ByVal savedState As  _
  System.Collections.IDictionary) 
```

我们要求安装程序的安全性，它可能会要求您从管理员开始，但是在 Winxp 中没有这样的选项；可能尝试以管理员身份运行。

# asp.net - 验证取决于另一个属性

> ID：11502062
> 
> 赞同：1
> 
> 时间：2012-07-16T09:58:16.833
> 
> 标签：asp.net, asp.net-mvc-3, validation

如何验证一个字段的验证是否依赖于另一个字段？

```
 [Required if Type==3]
 public long RID2 { get; set; }

 public byte Type { get; set; } 
```

如果 Type==3，我想收到必需的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:55:54.387

已经为你写好了属性。如果您愿意，可以进行一些重构，但想法如下。

使用：

```
[RequiredIfTypeIs("Type", 3)]
public long RID2 { get; set; }

public byte Type { get; set; } 
```

属性测试：

```
[TestFixture]
public class RequiredIfTypeIsAttributeTests
{
    private class YourModel
    {
        [RequiredIfTypeIs("Type", 3)]
        public long RID2 { get; set; }

        public byte Type { get; set; }

    }

    private class TestRequiredIfTypeIsAttribute : RequiredIfTypeIsAttribute
    {
        public TestRequiredIfTypeIsAttribute(string typePropertyName, byte requiredTypePropertyValue)
            : base(typePropertyName, requiredTypePropertyValue)
        {
        }

        public ValidationResult TestIsValid(object value, ValidationContext validationContext)
        {
            return IsValid(value, validationContext);
        }
    }

    [Test]
    public void TypeIs3_RidIs0__Return_IsNotValid()
    {
        var yourModel = new YourModel()
        {
            RID2 = 0,
            Type = 3,
        };

        TestValidationWithModel(yourModel, false);
    }

    [Test]
    public void TypeIs2_RidIs0__Return_IsValid()
    {
        var yourModel = new YourModel()
        {
            RID2 = 0,
            Type = 2,
        };

        TestValidationWithModel(yourModel, true);
    }

    [Test]
    public void TypeIs3_RidIs1__Return_IsValid()
    {
        var yourModel = new YourModel()
        {
            RID2 = 1,
            Type = 3,
        };

        TestValidationWithModel(yourModel, true);
    } 

    private void TestValidationWithModel(YourModel yourModel, bool success)
    {
        var validationContext = new ValidationContext(yourModel, null, null);
        var attribute = new TestRequiredIfTypeIsAttribute("Type", 3);
        var result = attribute.TestIsValid(yourModel.RID2, validationContext);

        Assert.AreEqual(success, result == ValidationResult.Success);
    }
} 
```

以及属性类：

```
public class RequiredIfTypeIsAttribute : ValidationAttribute
    {
        private string _typePropertyName;
        private byte _requiredTypePropertyValue;

        public RequiredIfTypeIsAttribute(string typePropertyName, byte requiredTypePropertyValue) : base()
        {
            _typePropertyName = typePropertyName;
            _requiredTypePropertyValue = requiredTypePropertyValue;
        }

        protected override ValidationResult IsValid(object value, ValidationContext validationContext)
        {
            var comparedPropertyInfo = validationContext.ObjectType.GetProperty(_typePropertyName);

            var propertyValue = (byte) comparedPropertyInfo.GetValue(validationContext.ObjectInstance, null);

            bool valid = true;

            if (propertyValue == _requiredTypePropertyValue)
            {
                valid = false;

                int checkedValue;

                if (int.TryParse(value.ToString(), out checkedValue))
                {
                    if (checkedValue > 0)
                    {
                        valid = true;
                    }
                }
            }

            if (!valid)
            {
                var message = base.ErrorMessage;
                return new ValidationResult(message);
            }
            return null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:07:47.393

看看下面的问题：

[使用数据注释的依赖属性的自定义模型验证](https://stackoverflow.com/q/2280539/1268570)

快速浏览：

```
[AttributeUsage(AttributeTargets.Class, AllowMultiple = true, Inherited = true)]
public sealed class PropertiesMustMatchAttribute : ValidationAttribute
{
   public override bool IsValid(object value)
    {
        PropertyDescriptorCollection properties = TypeDescriptor.GetProperties(value);
        object originalValue = properties.Find(OriginalProperty, true /* ignoreCase */).GetValue(value);
        object confirmValue = properties.Find(ConfirmProperty, true /* ignoreCase */).GetValue(value);
        // place here your valdiation
        return Object.Equals(originalValue, confirmValue);
    }
} 
```

用法：

```
[PropertiesMustMatch("NewPassword", "ConfirmPassword", ErrorMessage = "The new password and confirmation password do not match.")]
public class ChangePasswordModel
{
    public string NewPassword { get; set; }
    public string ConfirmPassword { get; set; }
} 
```

# git - 将分支分解为单个文件提交

> ID：11502064
> 
> 赞同：2
> 
> 时间：2012-07-16T09:58:21.260
> 
> 标签：git

我有一个稍微过时的实验分支，由于时间限制，它被搁置了。我需要拿起它并将其移至项目的 HEAD。

现在的问题是分支中的补丁实际上有点大并且有大量的冲突，所以我想将分支中的提交分解为单个文件提交，这样我可以更轻松地一一应用它们。

是否有一些自动命令可以为我执行此操作，还是我需要手动执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:25:49.513

你可以这样做：

```
git checkout -b experiment master^^^^
git rev-list master^^^..master | 
  while read rev; 
  do 
    git diff --name-only $rev^..$rev | 
      while read file; 
      do 
        git checkout $rev -- $file;
        git add $file; 
        git commit -C $rev;
      done; 
  done 
```

**请注意每个语句中的 ^s 数量**

这假设您想要扩大范围`master^^^^..master`并且它是线性历史，或者您不介意丢失合并。它还假设您希望每次都为受影响的文件保留相同的提交消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:01:53.197

我不相信已经有命令可以执行此操作，但是编写脚本来执行此操作应该相当容易。它只需要用于`git diff`输出更改文件的列表，如果为空则退出。否则，从列表中选择顶部文件并使用`git add`、提交并重复进行暂存。

# php - PHP 数组 - 以数组为键

> ID：11502066
> 
> 赞同：0
> 
> 时间：2012-07-16T09:58:29.157
> 
> 标签：php, arrays, wordpress, associative-array, hash

我知道在 php 中使用数组作为散列（关联数组）中的键会导致问题。

像这样的东西：

```
 $array[$nominee]=$nominations; 
```

其中 $nominee 本身就是一个数组。

它在一个 wordpress 网站上，这意味着当我知道/怀疑有错误时，我不愿意让它继续存在。一个非常快速的偷看创建了一个错误，其中包含“偏移”这个词。

从记忆中，`=>`需要使用，但是任何人都可以给我确切的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:14:13.027

您不能将数组用作数组键。您只能使用标量值（null 除外）作为键。有时，使用数组的内容作为键很有用。在这种情况下，您可以从中生成哈希：

```
$key = serialize($key); 
```

或者

```
$key = sha1(serialize($key)); 
```

# php - 如何使用 sphinx 进行短语搜索

> ID：11502068
> 
> 赞同：0
> 
> 时间：2012-07-16T09:58:41.140
> 
> 标签：php, mysql, search, sphinx

我需要使用 sphinx 创建短语搜索。我使用这个配置文件创建了我的索引

```
source sphinx_search
{
    type                                    = mysql
    # some straightforward parameters for SQL source types
    sql_host                                = localhost
    sql_user                                = root
    sql_pass                                = root
    sql_db                                  = mydatabase
    sql_port                                = 3306

    sql_query                       = \
        SELECT userId, usertype_id, searchdata from tbl_user;

    #sql_attr_uint                       = userId
    sql_attr_uint                       = usertype_id

     #document info query, ONLY for CLI search (ie. testing and debugging)
     #optional, default is empty
     #must contain $id macro and must fetch the document by that id
    sql_query_info      = SELECT * FROM tbl_user WHERE userId=$id;

}
index sphinx_search {
    source                          = sphinx_search
    path                            = /var/lib/sphinx/sphinx_search
    morphology                      = stem_en
    min_stemming_len        = 4
    stopwords                       = /var/data/sphinx/stopwords.txt
    min_word_len            = 3
    min_prefix_len          = 3
    min_infix_len           = 0
    enable_star                     = 1
    phrase_boundary = ., ?, !, U+2026 # horizontal ellipsis
    phrase_boundary_step = 100
    html_strip = 1

} 

indexer {
    mem_limit = 256M    
   #mem_limit       = 128M
    max_xmlpipe2_field = 16M 
}

searchd {   
    compat_sphinxql_magics  = 0     
    listen          = 9312  
    listen          = 9306:mysql41  
    log         = /var/log/sphinx/searchd.log   
    query_log       = /var/log/sphinx/query.log     
    read_timeout        = 5     
    max_children        = 30    
    pid_file        = /var/run/sphinx/searchd.pid   
    max_matches     = 10000     
    seamless_rotate     = 1     
    preopen_indexes     = 1     
    unlink_old      = 1     
    workers     = threads # for RT to work  
    binlog_path     = /var/data/ 
} 
```

如果我试图搜索“水污染”这个词

搜索结果是这样显示的

```
words:
1\. 'water': 10554 documents, 37143 hits
2\. 'pollut': 1902 documents, 9657 hits 
```

第一个问题是它没有完全采用“污染”一词，而不是采用“污染”。

第二个问题是它没有搜索完整的单词。即使我寻找

> 像这样的“水污染”。

第三个问题我无法使用 userId 对结果进行排序。如果我尝试添加

> sql_attr_uint = 用户 ID

它没有正确索引。

任何机构都可以帮助我解决这些问题。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T06:24:37.963

简而言之，您必须设置扩展匹配模式并使用[扩展查询语法](http://sphinxsearch.com/docs/current.html#extended-syntax)：

```
$cl->SetMatchMode ( SPH_MATCH_EXTENDED );
$cl->Query ( '"Water pollution"' ); 
```

注意搜索词周围的双引号。

# perl - 使用 Perl 从文件中获取数据

> ID：11502071
> 
> 赞同：2
> 
> 时间：2012-07-16T09:58:59.417
> 
> 标签：perl

我的文件为：

```
<country=HK>

    TCN=1
    CURR_TYPE="RS"
    PRICE=10
    COMP_NAME="IBM"

    TCN=2
    CURR_TYPE="RS"
    PRICE=200
    COMP_NAME="CTS"

    TCN=3
    CURR_TYPE="RS"
    PRICE=50
    COMP_NAME="TCS"

endHK

<country=JN>

    TCN=1
    CURR_TYPE="YEN"
    PRICE=10
    COMP_NAME="IBM"

    TCN=2
    CURR_TYPE="YEN"
    PRICE=200
    COMP_NAME="CTS"

    TCN=3
    CURR_TYPE="YEN"
    PRICE=50
    COMP_NAME="TCS"

</country=JN> 
```

现在我想使用 Perl 脚本从上述文件中的成员中检索值。

我的 Perl 脚本文件是：

```
#!perl

open(FH, "<a.txt");
@a=<FH>;
$b=$#a;
for ($n=0;$n<$b;$n++)
{
    if ($a[$n]=~/HK/)
    {
        foreach $_ ( @a[$n..($n+300)])
        {               
            if($_ =~ /endHK/){ exit 0;}
            print $_;
        }
    }
}

close(FH); 
```

请附加代码以帮助我从上述文件中检索数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:24:18.383

`endHK`尽管粘贴的代码使用了两个不同的结束标记...（和`</country=JN>`），但该文件看起来并不难解​​析。解析简单数据的基本方法如下所示：

检索文件：

```
use autodie;
open(FILE, '<', 'file.txt');
my @data = <FILE>;
close(FILE); 
```

循环它的内容：

```
my (%file, $country);
foreach my $line (@data) { 
```

删除不必要的字符：

```
chomp $line;
$line =~ s/^\s+|\s+$//g;
next unless $line; 
```

并建立一些数据结构：

```
if($line =~ m!^<country=([^>]+)>!) {
    $country = $1;
}
elsif($line =~ m!^([^<=]+)=(.+)$!) {
    my ($key, $value) = ($1, $2);
    $value =~ s/"//g;

    $file{$country}->{$key} = $value;
} 
```

验证输出：

```
print Dumper \%file; 
```

这应该打印如下内容：

```
$VAR1 = {
          'HK' => {
                    'PRICE' => '50',
                    'CURR_TYPE' => 'RS',
                    'COMP_NAME' => 'TCS',
                    'TCN' => '3'
                  },
          'JN' => {
                    'PRICE' => '50',
                    'CURR_TYPE' => 'YEN',
                    'COMP_NAME' => 'TCS',
                    'TCN' => '3'
                  }
        }; 
```

另外：看看[Config::General](https://metacpan.org/module/Config::General)。该模块提供了一种处理此类数据的“更安全”的方式。

# java - 如何获取按钮的当前文本颜色？

> ID：11502072
> 
> 赞同：1
> 
> 时间：2012-07-16T09:59:02.200
> 
> 标签：java, android

如果该按钮的当前文本颜色为红色，我想检查按钮单击事件？

到目前为止，我已经这样做了：

```
ColorStateList mList = gridcell.getTextColors();

            int col=mList.getDefaultColor();

            switch(col)
            {
            case Color.RED:
                Toast.makeText(getApplicationContext(), "RED",
                        Toast.LENGTH_SHORT).show();
            break;

            } 
```

但是，当我单击文本颜色为红色的按钮时，它不会烘烤任何东西，默认颜色为白色，并且在所有按钮中都变为白色。我现在能做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:05:50.717

尝试这个...

```
ColorStateList mList = mButton.getTextColors();
int color = mList.getDefaultColor();

switch(color)
{
case Color.RED:
Toast.makeText(getApplicationContext(), "RED", Toast.LENGTH_SHORT).show();

break;

case Color.BLUE:
Toast.makeText(getApplicationContext(), "BLUE", Toast.LENGTH_SHORT).show();
break;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:12:38.857

尝试这个：

```
 Button button=(Button) findViewById(R.id.b);
        button.setTextColor(Color.RED);
        button.setOnClickListener(this); 
```

关于按钮的点击事件：

```
public void onClick(View v) {
        if(button.getCurrentTextColor()==Color.RED){
            Toast.makeText(getBaseContext(), "Red", Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:10:12.273

请检查这个

```
 ColorStateList mList = mButton.getTextColors();
 int col = mList.getDefaultColor();

 switch(col){
 case Color.RED:
 Toast.makeText(getApplicationContext(), "RED", Toast.LENGTH_SHORT).show();
 break;

 case Color.BLACK:
 Toast.makeText(getApplicationContext(), "BLACK", Toast.LENGTH_SHORT).show();
 break;

} 
```

# android - 如何在android中拉伸图像

> ID：11502075
> 
> 赞同：-1
> 
> 时间：2012-07-16T09:59:12.237
> 
> 标签：android, image, imageview, stretch

我有一张图片，我想根据屏幕尺寸拉伸它。那是我的代码：

```
 <ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="false"
    android:baselineAlignBottom="false"
    android:cropToPadding="false"
    android:maxWidth="@dimen/padding_small"
    android:src="@drawable/footerheader_bg" /> 
```

发生的情况是 imageView 框架确实从屏幕的一侧拉伸到另一侧，但其中的图像仍然保持原样。图像是 JPEG，我使用的是 mac（如果相关）。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:22:13.620

如果您不介意长宽比会发生什么，那么您可以使用以下两种方式之一

```
android:layout_width="fill_parent"
android:layout_height="fill_content"
android:src="@drawable/footerheader_bg"
android:scaleType="fitXY" 
```

或者

```
android:layout_width="fill_parent"
android:layout_height="fill_content"
android:background="@drawable/footerheader_bg" 
```

但是，如果方面很重要，那么试试这个

```
android:layout_width="fill_parent"
android:layout_height="fill_content"
android:src="@drawable/footerheader_bg"
android:scaleType="fitCenter" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:00:10.623

改变这个`android:src="@drawable/footerheader_bg"`

到

```
android:background="@drawable/footerheader_bg" 
```

和

```
 android:layout_width="fill_parent"
    android:layout_height="fill_parent" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:04:50.620

你有两个选择：

**1)** 保持

`android:src="@drawable/footerheader_bg"`属性并添加属性`android:scaleType="fitXY"`

**2）** 删除 `android:src="@drawable/footerheader_bg"`属性并使用使用背景属性`android:background="@drawable/footerheader_bg"`，默认情况下您的图像会拉伸，不要忘记设置：

```
android:layout_width="match_parent"
android:layout_height="match_content" 
```

# drupal - 使用当前站点语言过滤节点

> ID：11502076
> 
> 赞同：0
> 
> 时间：2012-07-16T09:59:13.447
> 
> 标签：drupal, drupal-6, views, filtering

我正在使用带有 Views OR 模块的 Views，并且我想根据此方案过滤 biblio 出版物：

```
Current Site Language: English
Biblio Publication Language(not node translation language): English
== OR
Current Site Language: Russian
Biblio Publication Language(not node translation language): English
== OR
Current Site Language: Russian
Biblio Publication Language(not node translation language): Russian 
```

但我找不到合适的过滤器来指示当前站点语言。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T18:44:11.657

使用视图过滤器：

节点翻译：语言 - 当前用户的语言（也可选择“无语言”）

# unity3d - Unity 3D 音频播放

> ID：11502083
> 
> 赞同：1
> 
> 时间：2012-07-16T09:59:53.083
> 
> 标签：unity3d

我从 finder 添加了一些 oudiofiles 到统一项目导航器。有些 tham 可以正常播放，但其他... unity 不会在 plreview 窗口中显示任何有关 tham 的信息（它的大小和所有其他参数都为零），声音不会播放。但是我可以双击 tham，tham 会像往常一样在 iTunes 中播放。我发现，我无法在 Unity 中播放的所有文件的持续时间都小于 1 秒。这是我的问题的根源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:59:28.710

一般来说，少于 1 秒的声音文件应该不是问题，因为我有几个工作正常。

检查[音频格式是否受支持](http://docs.unity3d.com/Documentation/Manual/AudioFiles.html)，Unity3D 仅支持其中的几个，例如 Apple 的 .aac 不是其中之一。如果这不起作用，我会将这些小文件转换为 .wav 之类的未压缩格式并尝试这种方式。他们出于性能原因推荐未压缩格式，但偶尔可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T01:55:27.513

使音频文件长于 1 秒解决了我的问题。

# java - 如何在 java unicode 中读取 € char

> ID：11502084
> 
> 赞同：1
> 
> 时间：2012-07-16T09:59:58.377
> 
> 标签：java, unicode, character-encoding, apache-camel

我正在使用java读取文件。文件包含 € 字符，但 java 将其解释为`¿.`

即文件内容“ `12rl+€/h`”从java读取“ `12rl+¿/h`”

更新：我正在使用骆驼文件组件阅读它：

```
<camel:route id="FileProcessor">
  <camel:from uri="file:c://my/temp/" />
  <camel:log message="File ${body}" loggingLevel="DEBUG" logName="CamelLogger"/>
  <camel:process ref="fileProcessor"/>
  <camel:log message="File has been processed" loggingLevel="DEBUG" logName="CamelLogger"/>
</camel:route>

public class FileProcessor implements Processor {
    private static final Logger logger = LoggerFactory.getLogger(FileProcessor.class);

    public FileProcessor() {
    }

    @Override
    public void process(Exchange exchange) throws Exception {
        String fileContent = exchange.getIn().getBody(String.class);
        //Buisness logic with file
    } 
```

如何解决这个问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:43:50.960

我从未使用过 Camel，但 Google 将我带到了这个[文档页面](http://camel.apache.org/file2.html)，它解释了可以在 URL 中添加一个选项来指定字符集：

```
file:c://my/temp/?charset=UTF-8 
```

# vb.net - 使用 log4Net 每月记录日志文件条目

> ID：11502089
> 
> 赞同：1
> 
> 时间：2012-07-16T10:00:19.690
> 
> 标签：vb.net, asp.net-mvc-3, log4net

我有以下 log4Net 的配置部分。我想让 log4Net 每月记录文件而不是日期。请求您的帮助...

```
<appender name="RollingFile" type="log4net.Appender.RollingFileAppender,log4net">
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/>
  <param name="StaticLogFileName" value="true"/>
  <file type="log4net.Util.PatternString" value="C:\logger\TestLog.log" />
  <appendToFile value="true" />
  <maximumFileSize value="1000KB" />
  <maxSizeRollBackups value="3" />   
  <layout type="log4net.Layout.PatternLayout">
     <conversionPattern value="%level %date{dd MMM yyyy HH:mm:ss,fff} %logger - %message%newline" />
  </layout>
  <filter type="log4net.Filter.LevelRangeFilter">
    <levelMin value="INFO" />
    <levelMax value="FATAL" />
  </filter>      
  <filter type="log4net.Filter.DenyAllFilter" />
  <filter type="log4net.Filter.LevelMatchFilter">
    <levelToMatch value="DEBUG" />
  </filter>
</appender> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-17T06:52:45.017

使用以下解决方案修复了问题...

```
<appender name="RollingFile" type="log4net.Appender.RollingFileAppender,log4net">      
    <lockingModel type="log4net.Appender.FileAppender+MinimalLock"/> 
    <param name="StaticLogFileName" value="true"/> 
    <file type="log4net.Util.PatternString" value="C:\log4net\TestLog_%date{yyyyMM}.log" />
    <appendToFile value="true" />
    <rollingStyle value="Date" />
    <datePattern value="yyyyMM" />
    <maximumFileSize value="1000KB" />
    <maxSizeRollBackups value="3" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%level %date{dd MMM yyyy HH:mm:ss,fff} %logger - %message%newline" />
    </layout>
    <filter type="log4net.Filter.LevelRangeFilter">
        <levelMin value="INFO" />
        <levelMax value="FATAL" />
    </filter>
    <filter type="log4net.Filter.DenyAllFilter" />
    <filter type="log4net.Filter.LevelMatchFilter">
        <levelToMatch value="DEBUG" />
     </filter>
</appender> 
```

# eclipse - Ctr+Z对面的Eclipse组合

> ID：11502091
> 
> 赞同：3
> 
> 时间：2012-07-16T10:00:27.900
> 
> 标签：eclipse

我真的需要与`Ctrl`+相对的 Eclipse 组合`Z`。`Ctrl`当我们用+导航返回时，`Z`有时我们需要走得更远。怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T10:02:45.557

`CTRL`与+相反的捷径`Z`是`CTRL`+ `Y`:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-04-12T15:43:04.793

对于 Mac 用户，键绑定是：

**撤消：** `command` +`Z`

**重做：** `shift` + `command`+`Z`

您可以通过以下方式更改这些绑定：

Eclipse > 首选项 > 常规 > 键

# iphone - 如何在 iphone sdk 中滑动时更改视图控制器？

> ID：11502094
> 
> 赞同：-3
> 
> 时间：2012-07-16T10:00:31.320
> 
> 标签：iphone, uiscrollview, uipagecontrol, uiswipegesturerecognizer

我想通过像我一样滑动控制器来更改视图控制器，当我滑动消息框应该从 ViewController1->ViewController2 和从 viewController1<-viewController2 滑动时，我知道我必须使用或者`UISwipeGestureRecognizer`可能使用ViewControllers 的内容而不是 Views。像默认 messageViewController 滑动到 EmailViewController 或 EmailViewController 到 MessageViewController。有什么想法怎么做吗？`UIScrollView``UIPageController`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:56:02.563

```
- (void)goToNext{
    //your code to load youn next view controller
}

- (void)goToBack{
    //your code to load your previous view controller
}

- (void)viewDidLoad{
    [super viewDidLoad];

    UISwipeGestureRecognizer *recognizer;

    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(goToNext)];
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionRight)];
    [[self view] addGestureRecognizer:recognizer];
    [recognizer release];

    recognizer = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(goToBack)];
    [recognizer setDirection:(UISwipeGestureRecognizerDirectionUp)];
    [[self view] addGestureRecognizer:recognizer];
    [recognizer release];
} 
```

# apache - 为 Apache Lucene 开发管理界面

> ID：11502099
> 
> 赞同：0
> 
> 时间：2012-07-16T10:00:51.320
> 
> 标签：apache, solr, lucene

我开发了一个使用 Lucene 引擎进行搜索的应用程序。现在我想开发一个或多或少类似于 Solr 中的管理界面。

我需要接口以包含一些基本配置、状态报告、作业管理器，甚至可能在 Lucene 的索引上运行一些示例搜索。

我正在考虑是否应该从头开始开发它，或者以某种方式使用 Solr 中的一些代码。我想知道是否有人知道用于开发它的框架（如果有的话）以及在哪里可以找到管理界面代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T16:58:19.713

我建议你从头开始编写管理面板。原因是 solr 管理代码似乎与底层 solr 实现相结合，尽管您可以从 solr 面板访问其他 lucene 索引，以更好地控制您的 lucene 配置，您应该更喜欢编写像 solr 这样的包装器，如果您自己编写也是如此。 wrapper ，您甚至可以拥有比 solr 更好的控制权卢森。

希望我的回答有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:11:13.413

如果您正在为 lucene 索引构建管理界面，为什么不直接使用 Solr，它会给您带来很大的灵活性？
Solr 在底层 Lucene Index 上工作。
因此，您仍然可以使用 lucene 创建索引并使用 Solr 管理界面来帮助您与索引进行交互，而不是尝试构建新的索引。当然，您需要设计与 lucene 实现内联的架构。

# php - 使用 php 中的 soap 将 xml 请求发送到另一个 Web 服务器

> ID：11502105
> 
> 赞同：0
> 
> 时间：2012-07-16T10:01:02.230
> 
> 标签：php, xml, soap

我需要使用 SOAP 向另一个 Web 服务器发送 XML 请求。

我需要将请求发送到：

```
http://59.162.33.102/ArzooWS/services/DOMFlightAvailability?wsdl 
```

我的代码在

```
http://mydomain/demo1/test.php 
```

我是 SOAP 新手。查看我的代码：

```
$test ="<?xml version=\'1.0\' encoding=\'UTF-8\'?><soapenv:Envelope xmlns:soapenv=\'http://schemas.xmlsoap.org/soap/envelope/\' xmlns:xsd=\'http://www.w3.org/2001/XMLSchema\' xmlns:xsi=\'http://www.w3.org/2001/XMLSchema-instance\'> <soapenv:Body>  <getAvailability xmlns=\'http://avail.flight.arzoo.com\'>   <in0 xmlns=\'\'>  &lt;Request&gt;&lt;Origin&gt;BLR&lt;/Origin&gt;&lt;Destination&gt;DEL&lt;/Destination&gt;&lt;DepartDate&gt;2012-08-27&lt;/DepartDate&gt;&lt;ReturnDate&gt;2012-08-28&lt;/ReturnDate&gt;&lt;AdultPax&gt;1&lt;/AdultPax&gt;&lt;ChildPax&gt;0&lt;/ChildPax&gt;&lt;InfantPax&gt;0&lt;/InfantPax&gt;&lt;Currency&gt;INR&lt;/Currency&gt;&lt;Clientid&gt;My Id&lt;/Clientid&gt;&lt;Clientpassword&gt; my Password&lt;/Clientpassword&gt;&lt;ArzooFWS1.1&lt;/Clienttype&gt;&lt;Preferredclass&gt;E&lt;/Preferredclass&gt;&lt;mode&gt;ONE&lt;/mode&gt;&lt;PreferredAirline&gt;AI,G8,IC,6E,9W,S2,IT,9H,I7,SG&lt;/PreferredAirline&gt;&lt;/Request&gt;    </in0>  </getAvailability></soapenv:Body></soapenv:Envelope>";
$location_URL = "http://mydomain/demo1/test.php";
$action_URL = "http://59.162.33.102/ArzooWS/services/DOMFlightAvailability?wsdl";

$client = new SoapClient(null, array(
    'location' => $location_URL,
    'uri'      => "",
    'trace'    => 1,
));
try{
    $order_return = $client->__doRequest($test,$location_URL,$action_URL,1);
    //Get response from here
    print_r($order_return);
    $return = $client->__getLastResponse();  
    echo $return;
} catch (SoapFault $exception) {
    var_dump(get_class($exception));
    var_dump($exception); 
```

但什么也没有发生。我需要得到回应。请问有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T22:25:04.633

尝试改变：

`$action_URL = "http://59.162.33.102/ArzooWS/services/DOMFlightAvailability?wsdl";`

至

`$action_URL = "http://59.162.33.102/ArzooWS/services/DOMFlightAvailability";`

wsdl 链接仅给出了soap 消息格式的指南。您需要将请求发送到您的服务端点。

# java - 获取复选框是否在没有 js 的情况下选中

> ID：11502106
> 
> 赞同：0
> 
> 时间：2012-07-16T10:01:06.333
> 
> 标签：java, forms, jsp, spring-mvc, checkbox

我有一个带有复选框输入的表单：

```
<form:input id="garder_${indice}" path="mesFormulaires[${indice}].garder"
    type="text" name="garder_${indice}" /> 
```

我想知道复选框是否在 Java 中被选中。怎么可能，使用带有名为“garder”的布尔值的 getter/setter。我希望 Java 方法可以实现，但我不知道它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:51:50.357

如果您使用的是 Spring MVC，我建议您使用`form:checkbox`标签并将其绑定到`modelAttribute`表单对象的属性。

```
public class YourModelAttribute{
    private boolan checkBoxProp;
    // other props

    // getter and setter for your props
} 
```

然后在您的页面中：

```
<form:checkbox id="ckbId" path="checkBoxProp" /> 
```

请务必在`modelAttribute`您的表单中设置`YourModelAttribute`.

# python - 正则表达式组遇到问题

> ID：11502108
> 
> 赞同：1
> 
> 时间：2012-07-16T10:01:08.270
> 
> 标签：python, regex

```
>>> a = re.search('(\\d+h)?(\\d+m)?(\\d+s)?', 'in 1h15m')
>>> a.groups()
(None, None, None)
>>> a = re.search('.*(\\d+h)?(\\d+m)?(\\d+s)?', 'in 1h15m')
>>> a.groups()
(None, None, None)
>>> a = re.search('...(\\d+h)?(\\d+m)?(\\d+s)?', 'in 1h15m')
>>> a.groups()
('1h', '15m', None) 
```

为什么“...”版本是唯一填充“组”的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:07:56.613

**为什么我们得到空组？**

第一个 -`a?a?a`匹配`"bbbaaa"`：

*   从第一个位置开始匹配。
*   尝试匹配`a`，但找不到。没关系，它是可选的，所以什么都不匹配。(x 3 次)
*   返回一个成功的空匹配，没有成功捕获的组。

第二个 -`.*a?a?a`匹配`"bbbaaa"`：

*   `.*`从第一个位置匹配到最后一个位置。
*   现在我们在字符串的末尾。
*   尝试匹配`a`，但找不到。没关系，它是可选的，所以什么都不匹配。(x 3 次)
*   返回与所有原始文本的成功匹配，没有成功捕获的组。

**如何解决这个问题？**

目前尚不清楚您到底要做什么，但您可以匹配：

```
\d+h(\d+m)?(\d+s)?|(\d+m)(\d+s)?|(\d+s) 
```

这可确保您匹配至少一个元素 - 至少 on 选项不是可选的。然后，如果没有任何组可用，则正则表达式将无法匹配。您可以在第二步中解析它以获取组，或者在`(?| | )`支持的情况下使用组交替功能。

# sql - 从 sql 查询中排除外键

> ID：11502109
> 
> 赞同：0
> 
> 时间：2012-07-16T10:01:08.457
> 
> 标签：sql, postgresql

我有一些 sql 将几个表连接在一起

```
SELECT contact.contact_id,
        form1.*,
        form2.*
FROM contact
INNER JOIN form1
ON contact.contact_id = form1.contact_id
INNER JOIN form2
ON contact_contact_id = form2.contact_id 
```

我想避免在我的输出中重复“contact_id”列，而不必在表中写入每个字段名称（即我想继续使用`form1.*`，`form2.*`因为这将使报告更易于维护 - 字段可能会更改）。这可能吗？我正在使用 Postgres。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:07:43.320

唯一的方法是“不要使用 *”。您需要明确输入所需的列。当您使用 JOIN 时，这是一个很好的做法。如果列太多，请使用结果

```
select column_name from information_schema.columns
where table_name='your table' and column_name<>'contact_id' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:08:26.550

如果contact_id 是表共享的唯一列名，您可以使用“自然连接”来连接表，您最终将只得到一个连接列的副本。

# postgresql - PQconnectdb 返回 NULL，为什么？

> ID：11502112
> 
> 赞同：0
> 
> 时间：2012-07-16T10:01:16.210
> 
> 标签：postgresql, postgresql-9.1

## 语境

我刚刚在 Lion 上安装了 postgres 9.1.4，我想用 C (libpq) 编写一个简单的客户端来连接到 PG 数据库。

*psql -l*表示*postgresDB*拥有一个名为*mydb*的数据库。

 **psql mydb*说：*mydb=#*

这是尝试连接到 mydb 的小程序：

```
// Server coordinates
const char * keywords[] = {"dbname", "user", NULL};
const char * values[] = {"mydb", "postgresDB", NULL};

// Check server state
analyse_PQpingParams (PQpingParams (keywords, values, 0));

// Connect to the database
PGconn * conn; 
conn = PQconnectdbParams (keywords, values, 0);

// Check if the connection is healthy
analyse_PQstatus (PQstatus (conn));

// Clean exit
PQfinish (conn);
exit (0); 
```

## 问题

这是程序返回的内容：

```
analyse_PQpingParams says :
------
The server is running and appears to be accepting connections.
------

analyse_PQstatus says :
------
The state returned was NULL.
------ 
```

为什么*conn*对象为*NULL*？

## 文件说什么：

*请注意，这些函数将始终返回一个非空对象指针，除非内存太少甚至无法分配 PGconn 对象。*如果是内存问题，则*psql*无法连接到我的数据库。因此，文档在这里没有帮助。也许在其他地方？

非常感谢您的回答！

皮埃尔。

## analysis_PQstatus 代码：

```
void analyse_PQstatus (int status) 
{
  cout << "\nanalyse_PQstatus says :" << endl;
  cout << "------" << endl;
  switch (status)
    {
    case CONNECTION_STARTED:
      cout << "Waiting for connection to be made." << endl;
      break;

    case CONNECTION_MADE:
      cout << "Connection OK; waiting to send." << endl;
      break;

    case CONNECTION_AWAITING_RESPONSE:
      cout << "Waiting for a response from the server." << endl;
      break;

    case CONNECTION_AUTH_OK:
      cout << "Received authentication; waiting for backend start-up to finish." << endl;
      break;

    case CONNECTION_SSL_STARTUP:
      cout << "Negotiating SSL encryption." << endl;
      break;

    case CONNECTION_SETENV:
      cout << "Negotiating environment-driven parameter settings." << endl;
      break;
    case 0 :
      cout << "The state returned was NULL" << endl;
      break;
    default :
      cout << "could not analyse this status code : " << status << endl;
    } 
    cout << "------\n" << endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:08:00.920

你能展示一下`analyse_PQstatus`功能吗？你真的发现它`conn`是 NULL 还是`PQstatus(conn)`（这是你传递给函数的）结果是 0，即`CONNECTION_OK`？*

# python - 如何在python中按数字获取顶级protobuf枚举值名称？

> ID：11502113
> 
> 赞同：65
> 
> 时间：2012-07-16T10:01:29.730
> 
> 标签：python, protocol-buffers

例如，我有 proto-file `File.proto`：

```
enum Test {
  ONE = 1;
  TWO = 2;
} 
```

`File_pb2.py`我使用 protoc生成文件`File.proto`。我想在 python 代码中通过值 1（对应于 File_pb2.ONE 的值）从生成的文件中获取字符串“ONE”（对应于 File_pb2.ONE 的名称）`File_pb2.py`而不定义我自己的字典。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-07-16T10:38:43.263

假设生成的 python 位于 File_pb2.py 代码中试试这个：

```
file_pb2._TEST.values_by_number[1].name 
```

在你的情况下，这应该给`'ONE'`

反过来是：

```
file_pb2._TEST.values_by_name['ONE'].number 
```

会给`1`。

编辑：正如@dyoo 在评论中正确指出的那样，后来在 protobuf 库中引入了一种新方法：

```
file_pb2.Test.Name(1)
file_pb2.Test.Value('One') 
```

编辑：这在 proto3 中再次发生了变化。现在 Name() 和 Value() 方法属于 EnumTypeWrapper 类，因此可以像这样访问它们：

```
file_pb2.Name(1)
file_pb2.Value('One') 
```

# php - cURL, PHP - 循环中的循环

> ID：11502114
> 
> 赞同：0
> 
> 时间：2012-07-16T10:01:42.017
> 
> 标签：php, loops, curl

我想要这样的东西：

```
$i = 1;
$y = 1;

while($i <= 10 and $y <= 5)
{
if($i==10)
{
echo 'I = '.$i.', Y = '.$y.'<br>';
$i = 1;
$y = $y+1;
}
else
{
echo 'I = '.$i.', Y = '.$y.'<br>';
$i = $i + 1;
}
} 
```

哪个返回

```
I = 1, Y = 1
I = 2, Y = 1
....
I = 1, Y = 2
I = 2, Y = 2
....
I = 1, Y = 3
I = 2, Y = 3 
```

等，等等，与 cURL 一起使用。但它不起作用。我究竟做错了什么？

```
$i = 1;
$y = 1;

while($y <= 9)
{
while($i==499)
{
if($connection = db_connect()) 
{
$post = array('something' => 'abc', 'value_of_y' => ''.$y.'', 'value_of_i' => ''.$i.'');
$str = curl_grab_page('http://localhost/send.php?true=1','','off',$post);

$str2 = mysql_real_escape_string($str);
$sql = "INSERT INTO abc (txt) VALUES ('$str2')";

$i = 1;
$y = $y+1;
}
else
{
echo 'Database connection error!';
}
}
while($i != 499)
{
if($connection = db_connect()) 
{
$post = array('something' => 'abc', 'value_of_y' => ''.$y.'', 'value_of_i' => ''.$i.'');
$str = curl_grab_page('http://localhost/send.php?true=1','','off',$post);

$str2 = mysql_real_escape_string($str);
$sql = "INSERT INTO abc (txt) VALUES ('$str2')";

$i = $i + 1;
}
else
{
echo 'Database connection error!';
}
}
} 
```

但是页面一直在加载，没有任何反应。我必须使用“if($connection = db_connect()){”，但我认为这就是我的代码一直在搞砸的原因。请你看一下好吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:15:06.953

我的解决方案如下：

```
$y = $x = 1;

if (!$connection = db_connect()) {
   echo "connection failed!";
} else {
   while ($y <= 9) {
     $x = 1;
     while ($x <= 499) {
       // do your things with $x and $y, don't forget mysql_query() !

       $x++;   
     }
     y++;
   }
 } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-16T10:07:30.167

也许这是一个开始？

```
$sql = "INSERT INTO abc (txt) VALUES ('".$str2."')"; 
```

# pentaho - 在 Schema Workbench 上部署多维数据集 - 使用命令行

> ID：11502118
> 
> 赞同：0
> 
> 时间：2012-07-16T10:01:50.497
> 
> 标签：pentaho

有谁知道如何在不使用 Pentaho Scheme Workbench UI 工具的情况下部署蒙德里安立方体？网络搜索显示有一些 PublishToServerCommand 类是 SW 源代码的一部分，但我没有找到在网络上使用它的示例。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T08:02:14.627

您只需将 XML 复制到您的 pentaho 服务器，然后刷新您的解决方案存储库。

唯一需要注意的是，如果这是一个新数据源，您还必须修改 olap datasouces.xml 文件。

# android - 我处理理解 MouseJoint 结构的方式。和引擎

> ID：11502120
> 
> 赞同：0
> 
> 时间：2012-07-16T10:02:05.507
> 
> 标签：android, andengine

我有一个小问题。我在做空气曲棍球比赛。我想要拖放玩家身体，以便它可以碰撞/给予物理世界中的其他对象但是！我确实希望我的身体（触摸）像我的手指一样粘住和移动（并且仍然有力量！）我在下面给你的代码几乎达到了我想要的效果，但是当我移动我的手指时......我接触的区域。如何让它粘住我的手指仍然算力？有人可以帮我修改这段代码吗？十分感谢 ：）！

```
private Body groundBody = null;
public MouseJoint createMouseJoint(AnimatedSprite box , float x, float y){
        final Body boxBody = this.mPhysicsWorld.getPhysicsConnectorManager().findBodyByShape(box);

        float pixelToMeteRatio=64;
    Vector2 v =boxBody.getWorldPoint(new Vector2(x/pixelToMeteRatio, y/pixelToMeteRatio));

        MouseJointDef mjd = new MouseJointDef();
        mjd.bodyA                               = groundBody;
        mjd.bodyB                               = boxBody;
        mjd.dampingRatio                = 1f;
        mjd.frequencyHz             = 30;
        mjd.maxForce                    = (float) (200.0f * boxBody.getMass());
        mjd.collideConnected            = true;
        mjd.target.set(v);
        return (MouseJoint) this.mPhysicsWorld.createJoint(mjd);
}

MouseJoint mjActive = null;
private float pixelToMeteRatio = PhysicsConstants.PIXEL_TO_METER_RATIO_DEFAULT;
@Override
public boolean onAreaTouched(
                final TouchEvent        pSceneTouchEvent,
                final ITouchArea        pTouchArea      ,
                final float             pTouchAreaLocalX,
                final float             pTouchAreaLocalY )
{

        if(pSceneTouchEvent.getAction() == MotionEvent.ACTION_DOWN) {

                this.runOnUpdateThread(new Runnable() {
                        @Override
                        public void run() {

                        final AnimatedSprite face = (AnimatedSprite)pTouchArea; //The touched body
                        //If we have a active MouseJoint, we are just moving arround don't create an 2nd one.
                        if( mjActive == null)
                        {
                                Vector2 vector = new Vector2(pTouchAreaLocalX/pixelToMeteRatio,pTouchAreaLocalY/pixelToMeteRatio);
                                //=====================================
                                // GROUNDBODY - Used for the MouseJoint
                                //=====================================
                                BodyDef groundBodyDef = new BodyDef();
                                groundBodyDef.position.set(vector);
                                groundBody      = mPhysicsWorld.createBody(groundBodyDef);
                                //====================================
                                // CREATE THE MOUSEJOINT
                                //====================================
                                mjActive        = createMouseJoint(face, pTouchAreaLocalX, pTouchAreaLocalY);
                        }
                }});

                return true;
        }

return false;
}

@Override
    public boolean onSceneTouchEvent(final Scene pScene, final TouchEvent pSceneTouchEvent) {

            if(this.mPhysicsWorld != null) {

            if(pSceneTouchEvent.getAction() == MotionEvent.ACTION_MOVE) {

                    this.runOnUpdateThread(new Runnable() {
                            @Override
                            public void run() {

                            if( mjActive != null ){ //If the MJ is active move it ..

                                    // =========================================
                                    // MOVE THE MOUSEJOINT WITH THE FINGER..
                                    // =========================================
                                    Vector2 vec = new Vector2(pSceneTouchEvent.getX()/pixelToMeteRatio, pSceneTouchEvent.getY()/pixelToMeteRatio);
                                    mjActive.setTarget(vec);

                            }
                    }});
                    return true;
            }

            //===========================================
            // RELEASE THE FINGER FROM THE SCENE..
            //===========================================
            if(     pSceneTouchEvent.getAction() == MotionEvent.ACTION_UP     ||     pSceneTouchEvent.getAction() == MotionEvent.ACTION_CANCEL
              ) {

                    this.runOnUpdateThread(new Runnable() {
                            @Override
                            public void run() {

                            if( mjActive != null )
                            {
                                    //======================================
                                    // DESTROY OUR MOUSEJOINT
                                    //======================================
                                    mPhysicsWorld.destroyJoint(mjActive);
                               //     groundBody.setTransform(pSceneTouchEvent.getX(), pSceneTouchEvent.getY(), groundBody.get);
                                    mPhysicsWorld.destroyBody(groundBody);
                                    mjActive = null;
                            }

                    }});

         //         groundBody.setLinearVelocity(0,0);
                    return true;
            }
            }       
            return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T13:36:13.103

调整以下参数：dampingRatio、frequencyHz、maxForce。此外，降低身体的质量应该会有所帮助。我认为将阻尼设置为非常接近 1，频率稍微高一点并且力非常高应该可以解决问题。

# javascript - cmd+s 和 ctrl+s 的 jquery 按键事件

> ID：11502122
> 
> 赞同：14
> 
> 时间：2012-07-16T10:02:09.680
> 
> 标签：javascript, jquery, html, css, macos

使用上一个问题中的一个示例，我有：

```
$(window).keypress(function(event) {
    if (!(event.which == 115 && event.ctrlKey) && !(event.which == 19)) return true;
    $("form input[name=save]").click();
    event.preventDefault();
    return false;
}); 
```

是否也可以将其更改为适用于 Mac cmd 键？

我试过`(!(event.which == 115 && (event.cmdKey || event.ctrlKey)) && !(event.which == 19))`了，但这没有用。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-12T04:53:54.087

使用**event.metaKey**检测 Command 键

```
$(document).keypress(function(event) {
    if (event.which == 115 && (event.ctrlKey||event.metaKey)|| (event.which == 19)) {
        event.preventDefault();
        // do stuff
        return false;
    }
    return true;
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T10:19:32.660

对于检测`ctrl+s`and `cmd+s`，您可以使用这种方式：

[**工作的jsFiddle。**](http://jsfiddle.net/9ytfe/5/)

**jQuery：**

```
var isCtrl = false;
$(document).keyup(function (e) {
 if(e.which == 17) isCtrl=false;
}).keydown(function (e) {
    if(e.which == 17) isCtrl=true;
    if(e.which == 83 && isCtrl == true) {
        alert('you pressed ctrl+s');
    return false;
 }
}); 
```

[来源（包括所有键盘快捷键和按钮）](http://www.catswhocode.com/blog/using-keyboard-shortcuts-in-javascript)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-15T14:21:10.383

这对我有用：

```
$(document).keypress(function(event) {
    if ((event.which == 115 || event.which == 83) && (event.ctrlKey||event.metaKey)|| (event.which == 19)) {
        event.preventDefault();
        // do stuff
        return false;
    }
    return true;
}); 
```

# php - 如何在 MongoDB 和 PHP 中的 Map Reduce 查询中使用说明

> ID：11502125
> 
> 赞同：1
> 
> 时间：2012-07-16T10:02:23.353
> 
> 标签：php, mongodb, profiling

我正在使用解释进行简单查询，以准确了解执行时间。

```
 $this->db->toto->find($req)->sort(array('date' => 1))->explain(); 
```

我现在想在地图上使用解释并减少查询，该怎么做？我应该使用“经典”分析系统吗？

我正在尝试比较这两个查询的执行时间。

前任：

```
 $res = $this->db->command(array(
        "mapreduce" => "toto",
        "map" => $map,
        "reduce" => $reduce,
        "finalize" => $finalize,
        "query" => $req,
        "out" => array("inline"=>1)
    ))->explain(); 
```

不起作用，因为命令返回一个数组（说明需要一个 MongoCursor）。

非常感谢你:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:25:41.450

解释不适用于 map/reduce 之类的命令。您可以做的就是对您正在使用的查询运行解释。

如果您只需要执行时间，您可以运行 m/r 并对其计时。这就是解释如何确定执行时间。

# solr - 查询构面计数及其匹配文档

> ID：11502131
> 
> 赞同：0
> 
> 时间：2012-07-16T10:02:35.427
> 
> 标签：solr, count, faceted-search, solrj

我们正在运行 Apache Solr v3.1，[SolrJ](http://wiki.apache.org/solr/Solrj "SolrJ")是我们的客户端。

我们正在传递多个[任意分面查询](http://wiki.apache.org/solr/SimpleFacetParameters#facet.query_%3a_Arbitrary_Query_Faceting "任意查询分面")( ) 以获取在*单个*Solr 查询`facet.query`中对搜索结果进行评估的匹配文档的数量（分面计数） 。我的用例需要实际匹配的构面结果/文档/字段以及构面计数。

 *我的问题是，是否有可能在单个 Solr 查询调用中获得构面查询匹配结果以及构面计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T21:19:31.553

据我所知，不支持在 solr 3.1 中获取构面行数。您正在寻找的问题作为 Solr 的 JIRA 中的功能请求存在：

[https://issues.apache.org/jira/browse/SOLR-2242](https://issues.apache.org/jira/browse/SOLR-2242)

有一个可用的补丁，甚至专门针对 Solr 3.1，但在 4.0 中该问题仍未解决/未提交。也许你可以自己应用补丁，看看效果如何。*

# mysql - InnoDB 与 MyISAM 中的 MySQL 原子更新

> ID：11502135
> 
> 赞同：6
> 
> 时间：2012-07-16T10:02:57.060
> 
> 标签：mysql, innodb, atomic, myisam, compare-and-swap

无论引擎如何（例如 InnoDB 或 MyISAM），这个“比较和交换”语句是否总是原子的？：

```
UPDATE tbl_name SET locked=1 WHERE id=ID AND locked <> 1; 
```

我问这个是因为我打算使用该语句来执行与事务和非事务数据库表兼容的伪行级锁定。

这是[推荐用于 MyISAM](http://dev.mysql.com/doc/refman/5.6/en/ansi-diff-transactions.html)的方法，但我不确定这是否适用于 InnoDB，因为文档建议改用事务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-13T17:59:43.817

Yes. In InnoDB, the row will be locked (make you have an unique index on id, the update locks all rows it has to scan), updated and the lock released. If you are not in an explicit transaction / auto-commit is on, each statement is run in its own transaction, but it's still a transaction and lockings are performed

# xslt - 为什么 XSL 与此语句不匹配？

> ID：11502139
> 
> 赞同：0
> 
> 时间：2012-07-16T10:03:21.147
> 
> 标签：xslt, xpath, predicate

我有一个匹配的属性。它将匹配 2 个 XSL 模板，但一个比另一个更具体。但是，除非我在样式表中将“更简单”（谓词不太具体）放在另一个之上，否则它将匹配更简单的那个。从[http://www.w3.org/TR/xslt/#conflict](http://www.w3.org/TR/xslt/#conflict)和其他问题我可以看到，如果它匹配 2 个模板，它将使用最具体的模板，然后如果它们相同，它将匹配最后一个模板样式表。

模板 1：

```
<xsl:template match="@audit[contains($tier,'tier_3')][((starts-with(.,'approve') and contains(.,'CM')) or (contains(.,'ReviewRequested') and not(contains(.,'CM') or contains(.,'BM') or contains(.,'ME'))))]" mode="action"> 
```

模板 2：

```
<xsl:template match="@audit[contains($tier,'tier_3')]" mode="action"> 
```

我不知道是什么规则导致了这种情况发生？

我通过更改为：

```
 <xsl:template match="@audit[contains($tier,'tier_3') and ((starts-with(.,'approve') and contains(.,'CM')) or (contains(.,'ReviewRequested') and not(contains(.,'CM') or contains(.,'BM') or contains(.,'ME'))))]" mode="action"> 
```

但同样的结果。

我知道它两者都匹配，因为如果我注释掉简单的，它与模板 1 匹配。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:12:21.193

它们都同样具体，因为它们都具有相同的路径`@audit`并且都具有节点测试。

节点测试本身的复杂性并未出于解决的目的进行分析。在您链接的文档中，这一切都非常明确-您真的阅读了吗？

如果您需要特定顺序，请对模板进行排序或使用模板规则上的优先级属性。

# iphone - 构建自己的“SDK”以放入其他第三个应用程序

> ID：11502141
> 
> 赞同：0
> 
> 时间：2012-07-16T10:03:27.690
> 
> 标签：iphone, ios, static-libraries

我必须创建`library`允许其他开发人员在他们的应用程序中使用它的“”。我的图书馆会很简单-

开发者将调用我们lib的api fe创建按钮（预定义在我们的lib中）并添加到他的子视图中。

**创建这种库的最佳方法是什么？它应该是“静态”库还是其他东西？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:12:14.677

对于您和开发人员来说，最好的方法是创建一个静态库。

它会产生一个 .a 文件和一些 .h

为此，只需打开 Xcode，new Projet，然后 Framework & Library => cocoa touch 静态库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:09:28.687

静态库可能是最好的方法。您*不能*在 iOS 上使用动态库加载（除非您是 Apple）。

如今，静态库很容易创建。您可以在 Xcode 中使用一个目标，基本上，您只需将正确的文件放入其中。以前要难得多。

如果您不愿意分享您的代码，它可能是唯一的选择。如果您*愿意*共享您的代码，您可以将需要添加的文件和指令分发到其他项目中。提供一个库可能会更好。

# objective-c - 这个方法在哪里调用 - (void)glkView:(GLKView *)view drawInRect:(CGRect)rect

> ID：11502154
> 
> 赞同：3
> 
> 时间：2012-07-16T10:04:35.533
> 
> 标签：objective-c, ios, opengl-es

我刚开始查看适用于 iOS 的 Open GL ES，并且正在查看 Apple 模板代码上的源代码。问题是两者

`- (void)glkView:(GLKView *)view drawInRect:(CGRect)rect`

和

`- (void)update`

正在被调用，但我无法确定通过什么以及如何更改频率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T14:44:25.013

当需要更新视图时会自动调用 glkView。

根据[Apple](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKView_ClassReference/Reference/Reference.html#//apple_ref/doc/c_ref/GLKView)的说法， “GLKView 对象使用 UIView 对象的常规视图绘制周期，每当需要更新视图的内容时调用它的 drawRect: 方法。”

您可以使用 GLKViewController 来设置 glkview 的帧速率，如下所示：

```
- (void)viewDidLoad
{
     self.preferredFramesPerSecond = 60;
} 
```

在渲染之前还会自动为您调用更新。您可以使用此调用来更新变量，例如绘制对象的位置 - 但您可能希望使用 timeSinceLastUpdate 属性，因为调用之间经过的时间可能会有所不同。

# c# - 如何使用 Distinct 操作创建索引。乌鸦数据库

> ID：11502155
> 
> 赞同：2
> 
> 时间：2012-07-16T10:04:39.517
> 
> 标签：c#, indexing, ravendb

我需要的是简单地检索存储在产品中的类别列表：

`Products.Select(x => x.Category).Distinct().OrderBy(x => x);`

当调用它时`RavenDB`说我应该使用索引而不是因为在查询期间不允许计算。

我已经阅读了一些关于索引的内容，但仍然无法弄清楚我为什么要创建索引？

到目前为止，我尝试过的是：

**初始化**

```
public class DataAccessModule : NinjectModule {
    public override void Load() {
        Bind<IDocumentStore>().ToMethod(
            context => {
               var documentStore = new EmbeddableDocumentStore {
                   DataDirectory = @"~/App_Data/database",
                   UseEmbeddedHttpServer = true,
                   DefaultDatabase = "SampleStore"
               };
               var store = documentStore.Initialize();
               IndexCreation.CreateIndexes(typeof(CategoriesIndex).Assembly, store);
               return store;
           }
       ).InSingletonScope();

        Bind<IDocumentSession>().ToMethod(context => 
            context.Kernel.Get<IDocumentStore>().OpenSession()
        ).InRequestScope();
    }
} 
```

**索引定义**

```
public class CategoriesIndex : AbstractIndexCreationTask<Product> {
    public CategoriesIndex() {
        Map = ct => ct.Select(x => x.Categories).Distinct().OrderBy(x => x);
    }
} 
```

但这不起作用。我如何以正确的方式定义它？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T21:07:15.540

您可以使用以下方法执行此操作：

```
var categories = Session.Query<Product>()
                   .Select(x => x.Category).Distinct().ToList().OrderBy(x=>x); 
```

这会给你你想要的。

# git - Heroku 之外的 Git 部署

> ID：11502157
> 
> 赞同：2
> 
> 时间：2012-07-16T10:04:53.743
> 
> 标签：git, tomcat, deployment, heroku

我非常喜欢通过推入 git 在 heroku 上部署应用程序的方式。有没有办法在 Java 中使用这种部署？

PS我有一个部署到tomcat服务器的小应用程序。我不需要分发和其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:31:22.743

由于 Java 是一种编译语言，因此您不像 ruby​​ 和其他只需部署代码的语言那样奢侈。

看看 AppHarbour，因为他们为 C# 执行此操作，并从那里查看是否有人为 Java 提供相同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:26:19.657

您可以在此软件中使用[Jenkins](http://jenkins-ci.org/)之类的东西，您可以创建一个**git pull**然后**构建**您的**war**文件，并且可以扩展系统并执行一个脚本，例如通过 ssh 将文件复制到您的服务器并重新启动您的 tomcat。

在詹金斯你有很多插件。

还有一些其他的部署软件，但它们都需要很多钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:54:07.447

您应该看看构建自动化 DSL，例如[Buildr](http://buildr.apache.org/)、[Gradle](http://www.gradle.org/)。您可能必须在您的环境下自动化部署过程。

您应该遵循的第一个目标是建立一个构建自动化系统，允许您一键部署（或一键部署）

您实现的后续步骤是[持续集成](http://en.wikipedia.org/wiki/Continuous_integration)系统。

# java - 我们如何看到编译器生成的用于 Java 中类型擦除的字节码

> ID：11502158
> 
> 赞同：5
> 
> 时间：2012-07-16T10:04:52.773
> 
> 标签：java, type-erasure

> **可能重复：**
> [如何查看 Java 的字节码？](https://stackoverflow.com/questions/3062528/how-to-view-javas-byte-code)

我想知道类型擦除后是否可以在类文件中看到java编译器所做的代码更改。

我尝试过 javap，但它使用参数化类型重建原始源文件。

本教程 ( [http://docs.oracle.com/javase/tutorial/java/generics/genTypes.html](http://docs.oracle.com/javase/tutorial/java/generics/genTypes.html) ) 讨论了在类型擦除后用有界类型或对象替换参数化类型。我想看看编译器做了哪些更改，这些更改在 javap 或任何反编译器中都不可见。

问候，萨维克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:41:29.887

类型擦除字面意思是从生成的字节码中删除泛型类型。值得注意的是它的缺席。因此，您可以看到它在字节码中不存在。

当您使用 时`javap`，您会看到一些泛型类型信息可用于类、方法和字段签名。这包括在内，因此编译器可以使用这些类完成其编译代码的工作。它们在运行时不做任何事情，尽管它们可以通过反射获得，因此您可以编写一个使用此信息的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:49:54.083

我遇到的一个案例是[`Collections.max()`](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#max%28java.util.Collection%29)他们希望类型擦除在哪里，`Object`但仍然强制它是一个`Comparable`. 你可以看到这样的签名：

```
vlad@vld /tmp $ javap java.util.Collections | grep max
    public static java.lang.Object max(java.util.Collection);
    public static java.lang.Object max(java.util.Collection, java.util.Comparator); 
```

另一种方法是使用`javap -c`并查看编译器进行的检查。例子：

对于这个程序：

```
public class Test{
    public static void main(String[]args){
        java.util.Vector<String> a = new java.util.Vector<String>();
        a.add("Hello world");
        System.out.println(a.get(0).length());
    }
} 
```

您会得到以下结果：

```
Compiled from "Test.java"
public class Test extends java.lang.Object{
public Test();
  Code:
   0:    aload_0
   1:    invokespecial    #1; //Method java/lang/Object."<init>":()V
   4:    return

public static void main(java.lang.String[]);
  Code:
   0:    new    #2; //class java/util/Vector
   3:    dup
   4:    invokespecial    #3; //Method java/util/Vector."<init>":()V
   7:    astore_1
   8:    aload_1
   9:    ldc    #4; //String Hello world
   11:    invokevirtual    #5; //Method java/util/Vector.add:(Ljava/lang/Object;)Z
   14:    pop
   15:    getstatic    #6; //Field java/lang/System.out:Ljava/io/PrintStream;
   18:    aload_1
   19:    iconst_0
   20:    invokevirtual    #7; //Method java/util/Vector.get:(I)Ljava/lang/Object;
   23:    checkcast    #8; //class java/lang/String
   26:    invokevirtual    #9; //Method java/lang/String.length:()I
   29:    invokevirtual    #10; //Method java/io/PrintStream.println:(I)V
   32:    return

} 
```

注意`checkcast`.

# php - 将数组插入 PHP 文件

> ID：11502159
> 
> 赞同：1
> 
> 时间：2012-07-16T10:04:55.633
> 
> 标签：php

这可能很愚蠢，但我们无法做到这一点。

我们正在尝试将数组插入到 php 文件中。但是，我们可以将数组插入到 php 文件中，但格式不符合要求。我们有 2 个文件。

文件1.php

```
<?php
include_once("../dc/dcCommonLib.php");
include_once("../dc/persistence/UserData.php");
require_once("../../lib/include/connect.inc.php");

$_SESSION["survey"] = "BestBuyAug2012";
$idLink = dbconnect($_SESSION["survey"]);
$surveyWidget = rendererSurveyLoadHandler();
setDataToSession("surveywidget",$surveyWidget);
$userData = &UserData::getInstance();
$userData->setSurvey($surveyWidget);
saveFkidsToOidToFkidMappingArray($userData->OidToFkidMapping);

// prepare demo array
prepareItemArray($userData->OidToFkidMapping["Demographic"]["Q"],$demo,"b");

// prepare item array
prepareItemArray($userData->OidToFkidMapping["Default"]["Q"],$item,"i");
prepareItemArray($userData->OidToFkidMapping["Default"]["M"],$item,"i");

// prepare comment array
prepareCommentArray($userData->OidToFkidMapping["Comment"]["C"],$comment);

if(!function_exists('file_put_contents')) {
    function file_put_contents($filename, $data,$type, $file_append = false) {
      $fp = fopen($filename, (!$file_append ? 'w+' : 'a+'));
        if(!$fp) {
          trigger_error('file_put_contents cannot write in file.', E_USER_ERROR);
          return;
        }
    if($type){

    $count = count($data);
    $i = 1;
    //loop through your type array and append comma , to each except last
    foreach($data as $key=>$val) {

     //if we are before last key, append comma    
     if($i < $count)
          $data[$key] .= ',';

       $i++;
    }

    //run same preg_replace as before
    $data2 = preg_replace('/[\[\]]/','"',print_r($data,TRUE));

    //write to file 
    fputs($fp, "$" . $type . " = " . print_r($data2,TRUE));     

 }      else {
        fputs($fp, print_r($data, TRUE));
      }
      fclose($fp);
    }
}
print("Strart writting ...................");
file_put_contents("staticSurveyDataFileTest.php", "<?php\n","",true);
file_put_contents("staticSurveyDataFileTest.php", $item,"itemFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $demo,"demoFkids",true);
file_put_contents("staticSurveyDataFileTest.php", $comment,"commentFkids",true);
file_put_contents("staticSurveyDataFileTest.php", "?>","",true);
print("written ...");

function prepareItemArray($userDataArray, &$item, $itemStr) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);
                $respId = key($respGrp[$respGrpId]);
                $item[$questId."_".key($respGrp)]=$itemStr.$respGrp[$respGrpId][$respId];           
            }else {
                foreach ($respGrp as $respGrpId=>$resp) {
                    $respGrp[$respGrpId]=$itemStr.$resp;
                }
                $item[$questId."_".key($respGrp)]=$respGrp;
            }
        }
    }   
}

function prepareCommentArray($userDataArray, &$item) {
    if(is_array($userDataArray)) {
        foreach($userDataArray as $questId=>$respGrp) {
            $selectionGrp=array_unique($respGrp);
            if(count($selectionGrp)==1) {
                $respGrpId=key($respGrp);               
                $item[$questId."_".key($respGrp)]=$respGrp[$respGrpId]["fk_id"];            
            }
        }
    }   
}

?> 
```

该文件中的数组被插入到 staticSurveyDataFileTest.php

staticSurveyDataFileTest.php

```
<?php
$itemFkids = Array
(
    "203_19" => i27,//double quotes missing for all the lines . See below for desired output//
    "207_22" => i28,
    "357_22" => i99,
    "370_70" => i104,
    "377_72" => i105,
    "140_8" => i1,
    "141_8" => i2,
    "142_8" => i3,
    "143_8" => i4,
    "144_8" => i5,
    "145_8" => i6,
    "151_8" => i7,
    "152_8" => i8,
    "158_8" => i9,
    "164_8" => i10,
    "165_8" => i11,
    "166_8" => i12,
    "167_8" => i13,
    "168_8" => i14,
    "169_8" => i15,
    "175_8" => i16,
    "176_8" => i17,
    "182_8" => i18,
    "183_8" => i19,
    "184_8" => i20,
    "190_8" => i21,
    "196_8" => i22,
    "197_8" => i23,
    "198_8" => i24,
    "199_8" => i25,
    "200_8" => i26,
    "214_8" => i29,
    "215_8" => i30,
    "216_8" => i31,
    "222_8" => i32,
    "223_8" => i33,
    "224_8" => i34,
    "225_8" => i35,
    "226_8" => i36,
    "227_8" => i37,
    "233_8" => i38,
    "234_8" => i39,
    "235_8" => i40,
    "236_8" => i41,
    "237_8" => i42,
    "243_8" => i43,
    "244_8" => i44,
    "245_8" => i45,
    "251_8" => i46,
    "252_8" => i47,
    "253_8" => i48,
    "254_8" => i49,
    "255_8" => i50,
    "256_8" => i51,
    "257_8" => i52,
    "263_8" => i53,
    "264_8" => i54,
    "265_8" => i55,
    "266_8" => i56,
    "267_8" => i57,
    "268_8" => i58,
    "269_8" => i59,
    "270_8" => i60,
    "271_8" => i61,
    "272_8" => i62,
    "278_8" => i63,
    "279_8" => i64,
    "280_8" => i65,
    "281_8" => i66,
    "282_8" => i67,
    "283_8" => i68,
    "289_8" => i69,
    "290_8" => i70,
    "296_8" => i71,
    "297_8" => i72,
    "298_8" => i73,
    "299_8" => i74,
    "300_8" => i75,
    "301_8" => i76,
    "307_8" => i77,
    "308_8" => i78,
    "309_8" => i79,
    "310_8" => i80,
    "311_8" => i81,
    "312_8" => i82,
    "313_8" => i83,
    "314_8" => i84,
    "315_8" => i85,
    "316_8" => i86,
    "317_8" => i87,
    "318_8" => i88,
    "324_26" => i89,
    "328_37" => i90,
    "332_48" => i91,
    "338_59" => i92,
    "344_59" => i93,
    "345_59" => i94,
    "351_8" => i95,
    "352_8" => i96,
    "353_8" => i97,
    "354_8" => i98,
    "364_8" => i100,
    "365_8" => i101,
    "366_8" => i102,
    "367_8" => i103 
)//comma missing
$demoFkids = Array
(
    "129_2" => b1
)//comma missing
$commentFkids = Array
(
    "373_375" => 1,
    "380_382" => 2
)//comma missing
?> 
```

我们需要插入一个类似这样的文件

期望的输出

```
<?php
    $itemFkids = Array
    (
        "203_19" => "i27",//notices the double quotes here
        "207_22" => "i28",
        "357_22" => "i99",
        .
        .
        .

        .
        .
.

    ),//notice a comma here
    $demoFkids = Array
    (
        "129_2" => "b1"//notices the double quotes here
    ),//notice a comma here
    $commentFkids = Array
    (
        "373_375" => "1",
        "380_382" => "2"//notices the double quotes here
    ),//notice a comma here
    ?> 
```

提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:10:15.223

你可以使用这样的东西：

```
<?php
    $a = array (1, 2, array ("a", "b", "c"));
    var_export($a);
?> 
```

这输出：

```
array (
  0 => 1,
  1 => 2,
  2 => 
  array (
    0 => 'a',
    1 => 'b',
    2 => 'c',
  ),
) 
```

查看[http://php.net/manual/fr/function.var-export.php上的文档](http://php.net/manual/fr/function.var-export.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:21:47.527

### 所需输出的代码：

```
<?php
    $result = array_merge($itemFkids, $demoFkids, $commentFkids);
    var_export($result);
?> 
```

### 输出：

```
<?php
    $itemFkids = Array
    (
        "203_19" => "i27",
        "207_22" => "i28",
        "357_22" => "i99",
        .
        .
        .
    ),
    $demoFkids = Array
    (
        "129_2" => "b1"
    ),
    $commentFkids = Array
    (
        "373_375" => "1",
        "380_382" => "2"
    ),
?> 
```

在我们使用完整代码之前无法可靠地说！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:12:52.637

即使尝试这样做也值得：

```
<?php
class A
{
    public $var1;
    public $var2;

    public static function __set_state($an_array)
    {
        $obj = new A;
        $obj->var1 = $an_array['var1'];
        $obj->var2 = $an_array['var2'];
        return $obj;
    }
}

$a = new A;
$a->var1 = 5;
$a->var2 = 'foo';

eval('$b = ' . var_export($a, true) . ';'); // $b = A::__set_state(array(
                                     //    'var1' => 5,
                                     //    'var2' => 'foo',
                                     // ));
var_dump($b);
?> 
```

上面的输出是：

```
object(A)#2 (2) {
    ["var1"]=>
    int(5)
    ["var2"]=>
    string(3) "foo"
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:08:34.553

尝试使用 php 函数[var_export](http://php.net/manual/fr/function.var-export.php)

# wcf - 带有 TransportWithMessageCredential 和 clientCredentialType="Windows" 的 BasicHttpBinding

> ID：11502165
> 
> 赞同：3
> 
> 时间：2012-07-16T10:05:16.410
> 
> 标签：wcf, windows-authentication, basichttpbinding

我在客户端和服务器上使用此绑定配置：

```
<basicHttpBinding>
    <binding name="BasicHttpBinding_IService1">
        <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Windows" />
        </security>
    </binding>
</basicHttpBinding> 
```

客户端凭据似乎没有像我假设的那样自动传递（或者它们是？），所以我需要知道如何自己设置它们。这甚至会起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:06:40.093

您必须在**IIS上启用****Windows 身份验证**。请查看以下链接以了解如何操作。

 **另外，我检查了[MSDN](http://msdn.microsoft.com/en-us/library/ff648505.aspx)网站，您的配置和 msdn 之间的**主要**区别是安全模式

```
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpEndpointBinding">
      <security mode="TransportCredentialOnly">
        <transport clientCredentialType="Windows" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings> 
```

如您所见，唯一的区别是模式。我不确定这是否会解决您的问题，但请试一试。

以下是所有“服务绑定”中的 5 种可能的“安全模式”。

> **无**- 关闭安全性。
> 
> **传输**- 使用“传输安全”进行相互身份验证和消息保护。
> 
> **消息**- 使用“消息安全”进行相互身份验证和消息保护。
> 
> **两者**- 允许您提供传输和消息级安全设置（只有 MSMQ 支持此设置）。
> 
> **TransportWithMessageCredential** - 凭据与消息一起传递，消息保护和服务器身份验证由传输层提供。
> 
> **TransportCredentialOnly** - 客户端凭据通过传输层传递，并且不应用消息保护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T12:27:13.733

我发现这种行为的原因是我必须重新启用错误的 ASP.NET 4 安装。之后它“刚刚工作”。

[http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx](http://msdn.microsoft.com/en-us/library/k6h9cz8h.aspx)**

# sql-server-2008 - MS SQL 更新查询中的多个查询

> ID：11502169
> 
> 赞同：0
> 
> 时间：2012-07-16T10:05:29.887
> 
> 标签：sql-server-2008, sql-update

我有一个更新查询，其中 where 子句包含多个查询，因此：

```
UPDATE Table 'tableA'
SET    FieldA = 'Y'
WHERE  ID IN (SELECT ID
              FROM   tabA)
        OR ID IN (SELECT ID
                  FROM   tabB) 
```

好的，上面的查询只是我查询的一个简单示例，但我的问题是我在“tableA”中设置了另一个字段，其值取决于在 where 子句中执行的两个查询中的哪一个。例如，如果从 tabA 中选择 ID 返回，那么我想设置一个值，例如在 FieldB = 'First Query' 中。

那么，有没有一种方法可以针对每个可以传递给 set 子句的查询设置局部变量，还是有另一种方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:13:52.863

您不能将其设置为 php 中的变量（或您使用的任何东西）吗？然后在查询中包含变量？

```
$query = "= 'Y' WHERE ID IN (SELECT ID from tabA) OR ID IN (SELECT ID from tabB)";
"UPDATE tableA SET FieldA = " . $query . ", SET FieldB = " . $query . ""; 
```

# android - 通知中的打开活动

> ID：11502172
> 
> 赞同：0
> 
> 时间：2012-07-16T10:05:49.110
> 
> 标签：android

当我的应用程序在后台运行时，我可以使用 NotificationManager 显示通知。当应用程序在前台运行时，如果用户尝试打开状态栏中的通知，我需要阻止活动打开过程。因为当前正在运行的活动受到影响。所以我不想打开新活动...提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:13:46.660

您可以使用以下代码使用通知导航到任何活动

```
Intent notifyIntent;
notifyIntent = new Intent(activityA.this,activityB.class);
PendingIntent intent =PendingIntent.getActivity(punchclock.this, 0,notifyIntent, android.content.Intent.FLAG_ACTIVITY_NEW_TASK); 
```

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:14:44.100

我已经在此给定链接上提供了与通知相关的详细信息.. 可能会对您有所帮助..[如何通过单击通知来执行方法](https://stackoverflow.com/questions/11270898/android-how-to-execute-a-method-by-clicking-a-notification/11271367#11271367)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:15:21.090

当您调用 mNotificationManager.notify(HELLO_ID, notification); 在您显示通知传递的服务/活动中 Intent notificationIntent = new Intent(this); 如果您的活动已打开，则符合您的待定意图。否则通过 Intent 让活动打开它。

# c# - C#使用隐藏的webbrowser控件获取页面内容

> ID：11502174
> 
> 赞同：0
> 
> 时间：2012-07-16T10:05:52.227
> 
> 标签：c#, webbrowser-control

嗨，

我正在使用 webbrowser 控件来获取页面的某些内容并在程序中使用它（C#）。

当我的 webbrowser 可见时（this.webBrowser1.Visible = true;），程序运行良好，但是当我将值设置为 false（this.webBrowser1.Visible = false;）时，我在这部分出现错误代码：

```
HtmlWindow SContentFrame = webBrowser1.Document.Window.Frames[1];
HtmlWindow Frame_A = SContentFrame.Document.Window.Frames[2];
HtmlElementCollection bigFontTags = Frame_A.Document.GetElementsByTagName("b"); 
```

我需要选择网络浏览器或类似的东西吗？？？还是还有其他问题？因为当 webbrowser 控制器可见时，这段代码可以工作，但是当我隐藏 webbrowser 时，它根本不起作用......

任何想法将不胜感激......

TWC废话

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:08:54.320

听起来你正在以错误的方式接近这个。

网页浏览器本来就不是这么用的，为什么不直接用 WebClient 等后台下载网页的内容呢？这比 WebBrowser 的开销要低得多。

如果您正在处理抓取类型的应用程序，[HTML 敏捷包](http://html-agility-pack.net)非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:07:56.143

简单的技巧是在表单上隐藏浏览器偏移量，因此如果表单的宽度例如为 300 像素，则将浏览器的左侧放置在 350

# python - 元组数字到数字的转换

> ID：11502175
> 
> 赞同：4
> 
> 时间：2012-07-16T10:05:53.023
> 
> 标签：python, tuples

我正在研究 python，我被困在这个问题上。

输入（有一个元组）：

```
a = (0, 1) 
```

输出：

```
a = 0.1 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T10:07:12.460

**个位数，只有两个元素**

```
>>> a = (0, 1)
>>> a[0] + a[1] * 0.1
0.1 
```

**多个个位数**

```
>>> from itertools import count
>>> a = (0, 1)
>>> sum(n * 10 ** i for i, n in zip(count(0, -1), a))
0.1
>>> a = (0, 1, 5, 3, 2)
>>> sum(n * 10 ** i for i, n in zip(count(0, -1), a))
0.15320000000000003 
```

使用`reduce`（对于 Py 3.0+，您将需要`from functools import reduce`：）

```
>>> a = (0, 1, 5, 3, 2)
>>> reduce(lambda acc, x: acc * 0.1 + x, reversed(a))
0.1532 
```

使用`decimal`模块

```
>>> from decimal import Decimal
>>> a = (0, 1, 5, 3, 2)
>>> Decimal((0, a, -len(a) + 1))
Decimal('0.1532') 
```

**任意两个数**

```
>>> a = (0, 1)
>>> float('{0}.{1}'.format(*a))
0.1 
```

**任何数字**

```
>>> a = (0, 1, 5, 3, 2)
>>> float('{0}.{1}'.format(a[0], ''.join(str(n) for n in a[1:])))
0.1532 
```

可能存在一些浮点不准确，您可以使用`Decimal`s 来修复。

```
>>> sum(Decimal(n) * Decimal(10) ** Decimal(i) for i, n in zip(count(0, -1), a))
Decimal('0.1532') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:09:13.210

假设您的列表元素`a`是单个数字`0-9`，您可以使用数学：

```
>>> a[0] + a[1] * 0.1
0.10000000000000001 
```

或转换为字符串，连接并转换回浮点数：

```
>>> float(str(a[0])+'.'+str(a[1]))
0.10000000000000001 
```

# c# - 将表单值绑定到复杂类型

> ID：11502180
> 
> 赞同：0
> 
> 时间：2012-07-16T10:06:24.410
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-2

我已经使用 MVC 模式有一段时间了，并且一直很好，但是我完全陷入了困境。

我有一个显示复杂对象集合的视图，部分视图如下：

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<ThreeSixtyScheduling.Areas.Products.Models.PartsOnOrderModel+PartOnOrder>" %>
<tr>
<% using (Html.BeginForm("UpdateStockDueDate", "PartsOnOrder", FormMethod.Post))
   { %>
    <td><input type="hidden" name="CallAppointmentDate" value="<%= Model.CallAppointmentDate %>" /><%= Html.DisplayFor(m => m.CallAppointmentDate)%></td>
    <td><%= Html.HiddenFor(m => m.OrderNumber)%><%= Html.DisplayFor(m => m.OrderNumber)%></td>
    <td><%= Html.HiddenFor(m => m.JobNumber)%><%= Html.DisplayFor(m => m.JobNumber)%></td>
    <td><%= Html.HiddenFor(m => m.Part)%><%= Html.DisplayFor(m => m.Part)%></td>
    <td><%= Html.HiddenFor(m => m.Quantity)%><%= Html.DisplayFor(m => m.Quantity)%></td>
    <td><%= Html.EditorFor(m => m.StockDueDate)%></td>
    <td><button type="submit">Save</button></td>
<% } %>
</tr> 
```

我有一个将复杂对象作为参数的控制器操作：

```
public ActionResult UpdateStockDueDate(PartsOnOrderModel.PartOnOrder PartOnOrder) 
```

`Form`确实在其集合中具有价值，`CallAppointmentDate`因此我理解它应该适当地填充该值。

我尝试了许多排列，包括将名称更改为`PartOnOrder.CallAppointmentDate`、设置 ID 和名称、将属性添加为单独的参数，但没有任何效果。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:27:15.317

默认模型绑定器根据服务器的当前文化执行绑定/验证工作。如果您想根据不同的文化进行日期时间绑定/验证，则必须编写[自定义模型 binder](https://stackoverflow.com/questions/2356601/custom-datetime-model-binder-in-asp-net-mvc)。

# javascript - 通过电子邮件发送页面，字符集错误

> ID：11502182
> 
> 赞同：0
> 
> 时间：2012-07-16T10:06:39.937
> 
> 标签：javascript, html, internet-explorer

我有一个轻微的痛苦错误，目前我正在使用 window.open() 在新窗口中创建一个页面。

```
var myWindow = window.open ('','','scrollbars=1, menubar=1, toolbar=1, titlebar=1, status=1,     resizable=1, width=800, height=600'); 
```

然后我继续将 HTML 写入文档。

我需要允许 IE9 中的用户通过电子邮件发送我使用 File->Send->Page 创建的页面。但是，在尝试此操作时，电子邮件会使用奇怪的字符集输出。

```
格浴㹬਍†格慥㹤਍††琼瑩敬吾楨歮湩坧牯摬⁳慂敳䄠灰敬㱴琯瑩敬ാ †㰠敭慴栠瑴⵰煥極㵶䌢湯整瑮吭灹≥挠湯整瑮∽整瑸栯浴㭬挠慨獲瑥椽潳㠭㔸ⴹ∱ാഊഊ㰊䍓䥒呐䰠乁啇䝁㵅慊慶捓楲瑰ാ㰊ⴡഭഊऊ畦据楴湯猠瑥灵畆据楴湯愨 
```

我已经绞尽脑汁，在网上搜索和搜索，我将不胜感激任何人能给我的帮助。

谢谢加里

更新：

只是一个快速更新我已经将页面的元数据设置如下。

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:36:54.103

我遇到了完全相同的问题，我能够通过显式设置文档的字符集来部分解决它。这是我的测试页面：

```
<HTML>
        <HEAD>
            <SCRIPT>
                var w = window.open();

                w.document.open();
                w.document.charset = 'utf-8';
                w.document.write('<html><head></head><body>Page 2</body></html>');
                w.document.close();
            </SCRIPT>
        </HEAD> 
        <BODY>
            Page 1
        </BODY>
</HTML> 
```

文档的字符集以“unicode”开头，无论我如何设置元标记都不会改变 - 只有通过显式更改字符集才能获得明文。

现在的问题是IE使用了错误的页面！即使我为第 2 页选择了选项卡，电子邮件也会显示第 1 页的内容。

如果我查看源代码或打印页面，我会看到第 2 页的内容。但如果我保存或通过电子邮件发送页面，我会得到第 1 页的内容。

如果我将保存类型更改为“网页，仅限 HTML”，我可以保存第 2 页的内容，但这不是默认设置，因此会让人感到困惑。

我假设这是因为新选项卡仍然具有初始页面的文件名 - 我试图弄清楚是否可以在不连接到初始页面的情况下打开窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:12:49.183

您可以使用 Content-Type 标头显式指定页面的编码。

例如

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" /> 
```

指定内容采用大多数西方国家使用的 Latin-1 字母表。

# android - 注册的 ACTION_HEADSET_PLUG 监听器只触发几次

> ID：11502187
> 
> 赞同：2
> 
> 时间：2012-07-16T10:07:07.317
> 
> 标签：android, audio, sense

我想在插入耳机后显示通知，并在拔下耳机后隐藏它。因此，我在一个在 BOOT_COMPLETED 触发的 BroadCastReceiver 中注册了 ACTION_HEADSET_PLUG Intent Listener。在我的情况下，我使用 HTC Sense (HTC One S)，并且只有在 Sense 正在加载 (WaitDialog) 时插入耳机时才会显示通知，之后它将不再显示。

如果我在运行时通过“new OnBootreceiver().onReceive(this, null)”触发应用程序中的 OnBootListener，它会完美运行。

显现：

```
...
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        ...
    </activity>

    <receiver android:name=".OnBootReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>
 ... 
```

OnBoot接收器：

```
public void onReceive(Context context, Intent intent) {
    IntentFilter receiverFilter = new IntentFilter(Intent.ACTION_HEADSET_PLUG);
    HeadsetStateReceiver receiver = new HeadsetStateReceiver();
    context.registerReceiver( receiver, receiverFilter );
} 
```

耳机状态接收器：

```
public void onReceive(Context context, Intent intent) {
    Toast.makeText(context,
            "" + (Integer) (intent.getExtras().get("state")),
            Toast.LENGTH_SHORT).show();
    mNotificationManager = (NotificationManager) context
            .getSystemService(Context.NOTIFICATION_SERVICE);

    Log.e(this.getClass().toString(), "Intent Headset_plug received "
            + intent);
    if ((Integer) (intent.getExtras().get("state")) != 0) {
        notification.flags = Notification.FLAG_ONGOING_EVENT;
        notification.contentIntent = PendingIntent.getActivity(
                context.getApplicationContext(), 0, new Intent(), 0);
        notification.setLatestEventInfo(context, title, message,
                notification.contentIntent);
        mNotificationManager.notify(0xBEA15, notification);
    } else {
        mNotificationManager.cancelAll();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:35:46.737

为什么需要 BOOT_COMPLETED 接收器？您是否尝试使用清单文件接收 ACTION_HEADSET_PLUG？

```
<application 
    android:icon="@drawable/ic_launcher" 
    android:label="@string/app_name" > 
    <activity 
        ... 
    </activity> 

    <receiver android:name=".HeadsetStateReceiver" > 
        <intent-filter> 
            <action android:name="android.intent.ACTION_HEADSET_PLUG" /> 
        </intent-filter> 
    </receiver> 
```

你的代码也有点乱：

```
public void onReceive(Context context, Intent intent) {
    boolean isConnected = intent.getIntExtra("state",0)==1; // Can also be 2 if headset is attached w/o mic.

    Toast.makeText(context, 
            isConnected?"connected":"disconnected"), 
            Toast.LENGTH_SHORT).show(); 
    mNotificationManager = (NotificationManager) context 
        .getSystemService(Context.NOTIFICATION_SERVICE); 

    if (isConnected) {
        Log.e(this.getClass().toString(), "Intent Headset_plug connected");
        notification.flags = Notification.FLAG_ONGOING_EVENT; 
        notification.contentIntent = PendingIntent.getActivity( 
                context.getApplicationContext(), 0, new Intent(), 0); 
        notification.setLatestEventInfo(context, title, message, 
                notification.contentIntent); 
        mNotificationManager.notify(0xBEA15, notification); 
    } else {
        Log.e(this.getClass().toString(), "Intent Headset_plug disconnected");
        mNotificationManager.cancelAll(); 
    } 
} 
```

* * *

好的直接接收器不起作用（[这里有很好的解释](https://stackoverflow.com/a/6366238/1387438)）。

我知道为什么您的接收器会在一段时间后停止工作。您的应用程序必须由系统清理。为了让它工作，你必须做一些事情来阻止你的应用程序被清理。所以你必须创建一个服务。在 BOOT_COMPLETED 中启动一个服务，并在此服务中为 ACTION_HEADSET_PLUG 注册广播接收器。这应该可以防止应用程序被清理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T15:16:28.753

您的代码是正确的，但据我所知，您不能将 HEADSET_PLUG 过滤器放在清单上。相反，从清单中删除接收器，并以编程方式从应用程序的某些部分执行此操作。您的主要活动的 onCreate() 方法应该没问题，例如：

```
ReceiveBroadcast receiver=new ReceiveBroadcast();       
registerReceiver(receiver, new IntentFilter(Intent.ACTION_HEADSET_PLUG)); 
```

# java - 用于第三方集成的双向密码加密

> ID：11502190
> 
> 赞同：1
> 
> 时间：2012-07-16T10:07:28.157
> 
> 标签：java, security, email, imap, jakarta-mail

我的代码需要连接到 IMAP 和 SMTP 服务器以定期发送和接收电子邮件，目前每 3 分钟左右一次。典型用户流程如下

1.  登录
2.  通过输入您的 IMAP 和 SMTP 详细信息（包括 emailId 和密码）来集成您的电子邮件。
3.  转到数据

在后台，我运行一个石英调度程序，它定期从 IMAP 服务器中提取电子邮件。Web UI 和石英调度程序在不同的 VM 中运行，并在 REST 上相互通信。

在这种情况下，保护用户电子邮件凭据的好方法是什么？一种方法散列将无济于事，因为我再也不想向用户询问他的密码，但我需要提供凭据才能在 IMAP 上连接

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:51:57.687

Of course, the best way to ensure a password is safe is having a "no return to the original", but that's out of the scope of this question :-)

Having said that, your best option is to encrypt the password on the application code side, using a Private Key that exists only on the server (but not deployed together with the app). You can take a look at Jasypt, which is a tool for encryption for Java. Also, you might want to consider splitting the passphrase for the key into two parts: one coming from some configuration file inside the properties file, and one coming from, perhaps, the database itself.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T18:17:11.307

如果应用程序在客户端机器上运行，则使用用户选择的主密码对密码进行加密。这允许用户锁定应用程序。

如果应用程序在服务器上运行，请确保密码是通过 HTTPS 发送的，或者至少使用非对称公钥对其进行加密并在服务器上对其进行解密。

使用私钥存储使用 AES 或其他一些好的加密算法加密的密码，只是为了防止以纯文本形式存储它们。

# youtube - Youtube 嵌入式视频

> ID：11502192
> 
> 赞同：2
> 
> 时间：2012-07-16T10:07:33.290
> 
> 标签：youtube, embed

我在网页上嵌入了一个 youtube 视频。我办公室的一些用户无权访问 youtube，当他们打开此页面时，我的服务器上的访问被拒绝页面出现。这很好。

现在我要做的是查看视频播放器是否尚未加载，这意味着特定用户无权访问 youtube。我如何从我的网站（在 php 中）确定这一点并显示其他图像来代替 youtube 播放器。

# java - 如何使用 Java 和 JDBC 在 h2 数据库中存储文本文件？

> ID：11502211
> 
> 赞同：0
> 
> 时间：2012-07-16T10:08:37.313
> 
> 标签：java, mysql, file, jdbc, h2

我正在尝试将文本文件的内容存储到数据库中。文本长度不超过 1000 个字符。我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:19:31.170

将文本文件的内容保存到数据库中。

1.  创建一个表`CLOB`
2.  用于`java.io.Reader` 读取文本文件
3.  使用 JDBC API (PreparedStatement) 执行 INSERT 语句。

> ```
> String sql="INSERT INTO TableName (clobCol) VALUES (?)";
> PrepareStatement ps=connection.prepareStatement(sql);
> ps.setClob(1,readerObject); 
> ```

# javascript - 管理 Web 组件的依赖关系；JS、CSS/SASS 和模板文件

> ID：11502214
> 
> 赞同：9
> 
> 时间：2012-07-16T10:08:53.897
> 
> 标签：javascript, maven, requirejs, web-component

我正在寻找布局我们新 Web 组件的结构，目前我不确定我是否找到了一个工具可以完成我们理想中的所有工作，或者非常接近，但它似乎是一个相当不错的工具现在想做的事情很普遍。

我们有一个运行 Java 服务器端的 Web 应用程序，而客户端我们大量使用 JavaScript 和[SASS](http://sass-lang.com/)等。我们正在寻求重新构建我们的一些代码库，并对我们动态页面内容的某些方面进行组件化。

例如，我们想要一个标准的表格组件，可以完全独立于完整的 Web 应用程序进行开发。我看到 table 组件具有以下 3 个核心文件：

*   表.js
*   table.scss（我们编译成 CSS 文件的 SASS 文件）
*   table.tmpl（我们的模板文件最终编译成 JS 函数，例如使用[Handlebars](http://handlebarsjs.com/)作为模板引擎）

然后帮助开发：

*   table-test.html（带有一些虚拟数据的测试页面）
*   table-qunit.js（[Qunit](http://qunitjs.com/)测试）

然后，所有这些文件都有望被编译成以下内容：

*   components.js - 编译和缩小 table.js 和 table.tmpl，然后将所有其他组件拉入一些更大的 JS 文件
*   components.css - table.scss 编译和压缩，并与所有其他组件 CSS 合并

我看过的工具：

*   [requireJS](http://requirejs.org) - 似乎非常针对 JS 依赖管理，对资源文件有一些想法，但找不到任何关于它的使用和 CSS 预处理器（如 SASS）的信息。不过，我确实非常喜欢[AMD](https://github.com/amdjs/amdjs-api/wiki/AMD) JS 依赖管理的想法。
*   [Grunt](https://github.com/cowboy/grunt) - 一个节点包，可以完成我们想要的一些事情
*   [Sprockets](https://github.com/sstephenson/sprockets) - 类似于我们想要的东西的 Ruby 实现
*   [Javascript Maven 插件](http://mojo.codehaus.org/javascript-maven-tools/javascript-maven-plugin/)- 在语言/库方面最接近（我们已经使用 Java 和[Maven](http://maven.apache.org/)），但同样，似乎只考虑 JavaScript 依赖管理而不考虑 CSS，或者至少是 SASS 资源文件。

有没有人有比上面那些更好的建议？任何与我们正在寻找的东西更接近的东西？理想情况下，不需要 Node.js 或 Ruby 的东西会更好......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T15:46:03.543

这听起来非常适合TJ Holowaychuk 的[Component](https://github.com/component/component)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-19T09:43:29.227

我想我找到了答案，这一切都归功于这篇 ST 帖子：[Maven Javascript Compressor](https://stackoverflow.com/questions/3586455/maven-javascript-compressor)

我的烦恼的答案似乎是[wro4j](https://github.com/wro4j/wro4j)。

它对我有以下好处（请参阅[功能](http://wro4j.readthedocs.org/en/stable/Features/)页面了解所有内容）：

*   Maven化
*   基于 Java
*   弹簧可配置
*   支持 SASS 文件*和* [Dust](http://akdubya.github.com/dustjs/)模板（我们现在选择了它，我认为这是一个相对未知的模板引擎）
*   在构建时*或运行时*使用的选项！
*   和更多...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-13T00:54:03.913

wro4j 对你来说如何？也看看[卡特罗](https://github.com/rotundasoftware/cartero)！

# python - python 3 类型模块

> ID：11502216
> 
> 赞同：12
> 
> 时间：2012-07-16T10:08:56.097
> 
> 标签：python, python-3.x

我对 python 2.X 和 python 3.X 之间的区别有一点疑问。为什么在 python 3 类型模块中这么小？谢谢

```
Python 2.7
>>> import types    
>>> print(len([i for i in dir(types) if not i.startswith('__')]))
37

Python 3.2
>>> import types    
>>> print(len([i for i in dir(types) if not i.startswith('__')]))
12 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-16T10:23:08.100

在 Python 3.x 中，该`types`模块删除了所有已经可以通过内置命名空间等更简单的方式访问的类型。例如，您将看到它`ListType`并`IntType`已被删除，因为您可以通过`list`和`int`分别访问它们。

# xamarin.ios - 如何在 Monotouch 中使用 DialogViewController 在屏幕底部设置固定工具栏？

> ID：11502217
> 
> 赞同：0
> 
> 时间：2012-07-16T10:09:04.597
> 
> 标签：xamarin.ios, monotouch.dialog

我有 DialogViewController 我从 Web 服务中选择了一些数据，并添加了根，我的根视图高度总是增加（比如加载更多推文），我想修复工具栏。然而我没有这样做。当我添加工具栏时，它添加了根视图的结尾，但我希望它应该在屏幕上修复。请帮忙，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T08:43:18.853

您应该在父视图控制器中有工具栏。以[UITabBarController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)为例。

# python - 在数据库中搜索结构化数据（全文 + 查询）

> ID：11502220
> 
> 赞同：1
> 
> 时间：2012-07-16T10:09:23.707
> 
> 标签：python, database, search, full-text-search, relational-database

在我工作的应用程序中，我需要在数据库中搜索文本（全文搜索）并根据其他列对结果进行优先级排序。考虑到性能，哪种数据存储在这里最好？我需要搜索结构化数据并优先考虑结果。

它是 RDBMS 还是文档存储（Couch、Mongo）或任何其他 NoSQL 数据库？或者我应该使用 Hadoop 等批处理工具并为搜索准备数据？

我正在寻找方向。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:25:12.390

一个月前，我遇到了类似的问题，想知道是否有确凿的事实，对 nosql 解决方案的性能优势进行可靠的测量。

因此，我在 Google 上进行了比较，发现了这个[简洁的测试](http://blog.pingoured.fr/index.php?post/2012/05/20/PostgreSQL-vs-MongoDB)，而 pierre-yves 几天前就做了。

底线：文档存储似乎在性能方面处于领先地位，但与 nosql 解决方案一样，您必须牢记权衡。

更新：我忘了提到的是：皮埃尔也在讨论区分大小写的速度差异。在全文搜索中我无法完全关注的讨论，因为在全文搜索中，您几乎总是需要不区分大小写的搜索。也许您正在搜索的单词在大写字母中被标记为重要（带有小 s！），并且您永远不会在区分大小写的方法中找到它们。

# android - 尽管我连接到 CDMA 手机，但电话类型返回 GSM？

> ID：11502221
> 
> 赞同：0
> 
> 时间：2012-07-16T10:09:26.630
> 
> 标签：android, 3g-network

我有两个关于网络信息的问题：

1）当我尝试查看手机类型时：

```
int phoneType = phoneManager.getPhoneType(); 
```

我一直有`PHONE_TYPE_GSM`，看到`Type( getNetworkType())`我得到的网络`Type_HSDPA`，正常吗？

2）我试图获得小区的 PSC，我也总是有 -1，即使 HSDPA 小区也应该像 CDMA 小区一样有 PSC 有没有办法获得关于小区的 3G 和 3G+ 信息？

我正在使用安卓 API 10 (2.3.3)

非常感谢你们的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:15:50.217

你不能依赖这些信息。供应商设置此值，但自定义 ROM 可以更改它。

# android - C socket recvmsg，数据包丢失

> ID：11502227
> 
> 赞同：0
> 
> 时间：2012-07-16T10:10:09.900
> 
> 标签：android, c, linux, sockets

我在接收 UDP 数据包时遇到问题。我的环境在 ARMv7 上运行 Android 2.1。使用 C 套接字编程，我使用***recvmsg***从内核接收数据包，但偶尔会出现一些丢包事件。发送方和接收方在同一个局域网中，因此毫无疑问数据包不应该丢失。我通过**Wireshark**证明了这一点。

但是，在我将***recvmsg*** 替换为***recvfrom***接收数据包后，不再发生丢包事件。

我确定***recvmsg***的返回值总是大于 0，这意味着不会发生错误。

是否有可能仅在使用***recvmsg***时才会在内核空间中丢弃某些数据包？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:21:41.720

是的，这是可能的。UDP不可靠。如果丢弃 UDP 数据报会造成问题，那么您的设计就有很大问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:59:22.877

通过 . 检查您的插座是否有掉落物`cat /proc/net/udp`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-07-31T18:52:02.350

这个[recv 手册页](http://pubs.opengroup.org/onlinepubs/7908799/xns/recvmsg.html)似乎表明**recvmsg 不 block**，而**recvfrom 确实 block**，至少在默认情况下是这样。您可能正在调用 recvmsg 并且此时没有可用的数据包。如果您反复调用它，我想您最终可能会像在wireshark中一样看到所有数据包。

# ios - GameKit 最好成绩和最后成就

> ID：11502231
> 
> 赞同：0
> 
> 时间：2012-07-16T10:10:17.990
> 
> 标签：ios, game-center, gamekit, achievements

我想知道是否有一种简单的方法可以检索 iOS 应用程序中本地用户解锁的最高分和最后一个成就。

感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T08:52:31.067

就在这里：

1) 最好成绩：创建一个名为 myLeaderBoard 的 GKLeaderBoard 实例并设置您想要的类别（如排行榜 ID）并将 timeScope 属性设置为`GKLeaderboardTimeScopeAllTime`

然后，GKLeaderBoard 有以下内容：

```
- (void)loadScoresWithCompletionHandler:(void (^)(NSArray *scores, NSError *error))completionHandler 
```

请求完成后，将调用完成处理程序，从那一刻起， myLeaderBoard 实例将具有以下属性：`localPlayerScore`这是迄今为止最好的分数，存储它并根据需要使用它:)

2）最近的成就：本着同样的精神，请执行以下操作：

```
[GKAchievement loadAchievementsWithCompletionHandler:^(NSArray *achievements, NSError *error) {
for(GKAchievement *ach in achievements) {

//sort using the lastReportedDate property of GKAchievement (which is an NSDate).

}
   }]; 
```

# c# - System.NotSupportedException：不支持的表达式：p =>（p.UserProfileId == 1）

> ID：11502239
> 
> 赞同：7
> 
> 时间：2012-07-16T10:10:47.173
> 
> 标签：c#, asp.net-mvc-3, unit-testing, moq

我有一个使用 System.Func 表达式的测试。它应该很简单，但是测试一直失败。

测试：

```
 [TestMethod]
  public void GetUser()
  {
    var username = "john@resilientplc.com";
    var user = new User() { UserId = 1, Username = username, Password = "123456789" };

    someDataMock.Setup(s => s.GetUser(p => p.UserId == 1)).Returns(user);

    var result = userProfileModel.GetUser(user.UserId);
    Assert.AreEqual(user, result);
  } 
```

实现**UserProfileModel**：

```
public User GetUser(long userId)
{
  return someDataMock.GetUser(u => u.UserId == UserId);
} 
```

错误：

> System.NotSupportedException：不支持的表达式：p =>（p.UserId == 1）

知道我的测试在哪里不正确吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-16T10:21:24.563

假设您使用的是 Moq 并且 someDataMock 是一个模拟对象，那么问题出在设置上。试试这个...

```
someDataMock.Setup(s => s.GetUser(It.IsAny<Func<User, bool>>()).Returns(userProfile); 
```

这应该可行，但您可能希望根据您的测试的性质，使模拟在它接受的回调方面更具限制性。

# python - 国际化 Django 应用返回英文

> ID：11502243
> 
> 赞同：3
> 
> 时间：2012-07-16T10:11:09.250
> 
> 标签：python, django, localization, internationalization, django-cms

我的 django 应用程序是欧洲语言。现在我想恢复为英语并正确地进行国际化和本地化。我在setting.py中做了这个

```
LANGUAGE_CODE = 'en'
LANGUAGES = [
    ('en', 'English'),
] 
```

但是整个应用程序仍然没有以英文显示。我在这里错过了什么吗？PS。该应用程序还使用 Django-CMS。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:16:15.530

你需要做很多事情：

*   用一种语言写所有字符串，在你的情况下是英语。

然后，您需要标记所有要翻译的字符串：

*   在模板中的所有字符串周围添加`trans`标签（来自`i18n`模板标签库），请参阅文档中的[国际化](https://docs.djangoproject.com/en/1.3/topics/i18n/internationalization/)。这与 gettext 有关：处理翻译的通用库。通过在字符串周围添加`trans`标签，它们将被包含在需要翻译的巨大字符串列表中（见`.po`下文`.mo`）。
*   在 Python 源代码中添加`_()`所有字符串（来自`django.utils.translation`，另请参阅文档中的国际化）。这也与 gettext 有关，这也包括 gettext 语言文件中的那些字符串。

然后，您需要创建语言文件并将翻译添加到这些文件中：

*   创建包含翻译字符串的 gettext`.po`和文件。`.mo`在这些文件中，您可以编写翻译后的字符串。这两个文件通常放在`/locale/`目录中。对于每种语言，您需要编写翻译后的字符串并将它们放入这些文件中。有关这些语言文件的更多详细信息，请参阅 Django[本地化](https://docs.djangoproject.com/en/1.3/topics/i18n/localization/)文档。

最好阅读 Django 关于[国际化和本地化](https://docs.djangoproject.com/en/1.3/topics/i18n/)的概述（通常称为 i18n），因为上面的解释只是一般的方法。确切的技术细节在文档中。

请注意，以上内容仅用于翻译作为 Python 代码或模板一部分的静态字符串。如果要翻译 URL 或 Django 模型，则需要安装其他库或使用其他现有的 Django 功能。例如，在 Django 1.4 中添加了一些功能来翻译 URL，但对于早期的 Django 版本，您需要为此使用库/Django 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T16:19:31.193

Simeon 的回答涵盖了所有领域，但在这里，我发现了一些可以帮助任何人在开发环境中测试本地化的东西。

如果您是欧洲人，那么您的浏览器可能会请求`accepted-language`as `es`，仅作为示例。

现在，您想在本地环境中测试英语翻译，那么您需要考虑以下可能性。

根据[django-book](http://www.djangobook.com/en/2.0/chapter19.html)的参考：

你需要把[LocaleMiddleware](http://www.djangobook.com/en/2.0/chapter19.html#how-django-discovers-language-preference)

> 1> 首先，它在当前用户的会话中寻找一个 django_language 键。
> 
> 2> 做不到这一点，它会寻找一个 cookie。
> 
> 3> 否则，它会查看 Accept-Language HTTP 标头。此标头由您的浏览器发送，并按优先级告诉服务器您喜欢哪种语言。Django 会尝试标题中的每种语言，直到找到具有可用翻译的语言。
> 
> 4> 否则，它使用全局 LANGUAGE_CODE 设置。

现在，您看到它将检查`LANGUAGE_CODE`设置作为最后的手段。

因此，您可以在浏览器中使用 HTTP 请求拦截器并更改`accepted-language`值以即时测试您的语言翻译。

# javascript - 重用 XMLHttpRequest 对象还是创建一个新对象？

> ID：11502244
> 
> 赞同：30
> 
> 时间：2012-07-16T10:11:11.167
> 
> 标签：javascript, ajax, xmlhttprequest

我搜索了stackoverflow，但得到了相互矛盾的答案：

[为什么要重用 XmlHttpRequest 对象？](https://stackoverflow.com/questions/2680756/why-should-i-reuse-xmlhttprequest-objects)

[Ajax 密集型页面：重用同一个 XMLHttpRequest 对象还是每次都创建一个新对象？](https://stackoverflow.com/questions/11079543/ajax-intensive-page-reuse-the-same-xmlhttprequest-object-or-create-new-one-ever)

另外，在 w3schools.com 上有一个建议：

> 如果您的网站上有多个 AJAX 任务，您应该创建一个标准函数来创建 XMLHttpRequest 对象，并为每个 AJAX 任务调用它。

为什么这个建议？相反，我在我的页面上使用全局 XMLHttpRequest 对象来处理所有 Ajax 任务。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T10:25:54.653

您误解了 W3School 的建议。我将突出显示相关部分：

> 如果您的网站上有多个 AJAX 任务，您应该创建**一个标准*函数***来创建 XMLHttpRequest 对象，并为每个 AJAX 任务调用它。

它说您使用一个 AJAX 函数来获取请求。这个函数会处理IE和其他浏览器的不一致。`XMLHttpRequest`在符合标准的浏览器和`ActiveXObject`IE 中。

我建议使用多个 XHR 对象。使用一个全局 xhr 对象，您的应用程序在给定时间只能处理一个请求。它也容易出错（例如，[XMLHttpRequest 在没有启动 onreadystatechange 函数的情况下多次启动](https://stackoverflow.com/q/11064095/938089)）。

W3schools 的意思是：

```
function createXHR() {
    try {
        return new XMLHttpRequest();
    } catch (e) {
        try {
            return new ActiveXObject("Microsoft.XMLHTTP");
        } catch (e) {
            return new ActiveXObject("Msxml2.XMLHTTP");
        }
    }
}
var xhr = createXHR();
xhr.open('get', '/test', true);
xhr.send(); 
```

尽管最好创建一个处理请求的函数，例如[`jQuery.ajax`](http://api.jquery.com/jQuery.ajax/).

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-16T10:25:25.900

最好为您制作的每个 XHR 使用不同的对象。即使有办法，也要避免！为每个请求创建新对象没有问题。如果您担心内存泄漏或类似问题，请不要担心，它们都已正确 GC`ed。

* * *

> 如果您的网站上有多个 AJAX 任务，您应该创建一个标准函数来创建 XMLHttpRequest 对象，并为每个 AJAX 任务调用它。

这实际上意味着您有一个函数可以创建一个新对象并在每次调用它时返回它。它类似于：

```
function newXHR(){
    return a new instance of XHR();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T10:29:59.770

您强调的建议是说您应该有一个处理 AJAX 的 FUNCTION，而不是一个专门的 XMLHTTPRequest 对象。

我会为每个问题使用不同的问题。

反对这一点的常见论点涉及建立 XHR 所涉及的开销。然而，这在任何使用 AJAX 的站点中几乎可以忽略不计（即不是作为 Web 套接字的劳动替代品），并且在任何情况下，大部分相同的开销都将适用于重新使用 XHR。您仍然必须打开连接、触发它、附加侦听器等。

浏览器在给定时间允许多少连接网关方面有所不同，因此由浏览器来控制 XHR 可以做什么。换句话说，您不必担心管理这方面。

最后，没有什么可以阻止您在使用 XHR 后手动删除它们，前提是它们是可删除的（对象的属性而不是变量）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-20T06:12:27.513

来自 MDN 网络文档：

> 如果全局使用 httpRequest 变量，调用 makeRequest() 的竞争函数可能会相互覆盖，从而导致竞争条件。将 httpRequest 变量声明为包含 AJAX 函数的闭包的本地变量可以避免这种情况。

来源：[https ://developer.mozilla.org/en-US/docs/Web/Guide/AJAX/Getting_Started](https://developer.mozilla.org/en-US/docs/Web/Guide/AJAX/Getting_Started)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-05T09:50:16.827

我正在使用这样的模式

```
var xhrSendBuffer = new Object();
function sendData(url, model) {
    if (!xhrSendBuffer[url]) {
        let xhr = new XMLHttpRequest();
        xhr.onloadend = xhrDone;
        xhr.error=xhrError;
        xhr.onabort = xhrAbborted;
        xhr.open('POST', url, true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=utf-8');
        xhrSendBuffer[url] = xhr;
    }

    xhrSendBuffer[url].send(JSON.stringify(model));
}

function xhrDone(e) {
    console.log(e);
}
function xhrError(e) {
    console.error(e);
}
function xhrAbborted(e) {
console.warn(e);
} 
```

如果我最终在自己的站点上生成了 DOS，因为我向同一个 url 发送了多个请求，我可以使用 xhr.readyState 在发送下一个请求之前查看它有多忙，但是我还没有遇到这个问题。

# jquery - 表单验证无法正常工作

> ID：11502245
> 
> 赞同：1
> 
> 时间：2012-07-16T10:11:15.413
> 
> 标签：jquery, forms, validation

我正在使用 jquery 验证表单并遇到一些问题。jquery验证码：

```
$(function(){
    var form = $('#contactus');
    var name = $('#name');
    var nameInfo = $('#nameInfo');
    var email = $('#email'); 
    var emailInfo = $('#emailInfo');
    var phone = $('#phone');
    var phoneInfo = $('#phoneInfo');
    var msg = $('#message');
    var msgInfo = $('#messageInfo');
    var reg=/^[a-zA-Z. ]+$/;
    var mail=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; 

    function validateName()
    {
        if(name.val()=='')
        {
            name.addClass('error');
            nameInfo.text('Please fill up your full Name');
            nameInfo.addClass('error');
            return false;
        }else if(reg.test(name)==false){
            name.addClass('error');
            nameInfo.text('Only letters are allowed');
            nameInfo.addClass('error');
            return false;
        }else{
            name.removeClass('error');
            nameInfo.text('');
            nameInfo.removeClass('error');
            return true;
        }
    }
    function validateEmail()
    {
        if(email.val()=='')
        {
            email.addClass('error');
            emailInfo.text('Please fill in your Valid Email');
            emailInfo.addClass('error');
            return false;
        }else if(mail.test(email)==false){
            email.addClass('error');
            emailInfo.text('Invalid Email');
            emailInfo.addClass('error');
            return false;
        }else{
            email.removeClass('error');
            emailInfo.removeClass('error');
            return true;
        }
    }
    function validatePhone()
    {
        if(phone.val()=='')
        {
            phone.addClass('error');
            phoneInfo.text('Please fill in your Phone number');
            phoneInfo.addClass('error');
            return false;
        }else if(isNaN(phone)){
            phone.addClass('error');
            phoneInfo.text('Please fill in your Phone number');
            phoneInfo.addClass('error');
            return false;
        }else{
            phone.removeClass('error');
            phoneInfo.removeClass('error');
            return true;
        }
    }
    function validateMsg(){
        if(msg.val()=='')
        {
            msg.addClass('error');
            msgInfo.text('Please enter your Message');
            msgInfo.addClass('error');
            return false;
        }else if(msg.val().length<10){
            msg.addClass('error');
            msgInfo.text('Please enter at least 10 words');
            msgInfo.addClass('error');
            return false;
        }else{
            msg.removeClass('error');
            msgInfo.removeClass('error');
            return true;
        }
    }

    /*name.blur(validateName);
    email.blur(validateEmail);
    phone.blur(validatePhone);
    msg.blur(validateMsg);*/

    name.keyup(validateName);
    email.keyup(validateEmail);
    phone.keyup(validatePhone);
    msg.keyup(validateMsg);

    form.submit(function(){
        if(validateName() ,validateEmail() , validatePhone(), validateMsg() ){
            return true;
        }else{
            return false;
        }
    })
}) 
```

和 php 表单代码是：

```
<form name="contactus"  id="contactus" action="" method="post">
        <ul class="form_field">
            <li><label>Your Name :</label>
                <input class="form_input" type="text" name="name" id="name" value="<?php echo $_POST['name'];?>" />
                <span id="nameInfo"></span>
            </li>
            <li><label>Email Address :</label>
                <input class="form_input" type="text" name="email" id="email" value="<?php echo $_POST['email'];?>" />
                <span id="emailInfo"></span>
            </li>
            <li><label>Phone Number :</label>
                <input class="form_input" type="text" name="phone" id="phone" value="<?php echo $_POST['phone'];?>" />
                <span id="phoneInfo"></span>
            </li>
            <li><label>Your Message:</label>
                <textarea class="form_input" name="message" id="message"><?php echo $_POST['message'];?></textarea>
                <span id="messageInfo"></span>
            </li>
            <li><?php echo recaptcha(); ?></li>
            <li><label>&nbsp;</label><input type="submit" class="submit_btn" value="Submit"  name="submit"/></li>
        </ul>
    </form> 
```

问题是没有正确验证任何表单元素的第二个条件。虽然空条件成功，但第二个条件不是。我做错了吗？欢迎提供任何帮助/建议。多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T05:10:45.457

我的问题的正确代码：

```
 $(function(){

    var form = $('#contactus');
    var name = $('#name');
    var nameInfo = $('#nameInfo');
    var email = $('#email'); 
    var emailInfo = $('#emailInfo');
    var phone = $('#phone');
    var phoneInfo = $('#phoneInfo');
    var msg = $('#message');
    var msgInfo = $('#messageInfo');
    var reg=/^[a-zA-Z. ]+$/;
    var mail=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/; 

    function validateName()
    { 
        if(name.val()=='')
        {
            name.addClass('error');
            nameInfo.text('Please fill up your full Name');
            nameInfo.addClass('error');
            return false;
        }else if(!reg.test(name.val())){
            name.addClass('error');
            nameInfo.text('Only letters are allowed');
            nameInfo.addClass('error');
            return false;
        }else{
            name.removeClass('error');
            nameInfo.text('');
            nameInfo.removeClass('error');
            return true;
        }
    }
    function validateEmail()
    { 
        if(email.val()=='')
        {
            email.addClass('error');
            emailInfo.text('Please fill in your Valid Email');
            emailInfo.addClass('error');
            return false;
        }else if(!mail.test(email.val())){
            email.addClass('error');
            emailInfo.text('Invalid Email');
            emailInfo.addClass('error');
            return false;
        }else{
            email.removeClass('error');
            emailInfo.text("");
            emailInfo.removeClass('error');
            return true;
        }
    }
    function validatePhone()
    { 
        if(phone.val()=='')
        {
            phone.addClass('error');
            phoneInfo.text('Please fill in your Phone number');
            phoneInfo.addClass('error');
            return false;
        }else if(isNaN(phone.val())){
            phone.addClass('error');
            phoneInfo.text('Please fill in your correct number');
            phoneInfo.addClass('error');
            return false;
        }else{
            phone.removeClass('error');
            phoneInfo.text("");
            phoneInfo.removeClass('error');
            return true;
        }
    }
    function validateMsg(){
        if(msg.val()=='')
        {
            msg.addClass('error');
            msgInfo.text('Please enter your Message');
            msgInfo.addClass('error');
            return false;
        }else if(msg.val().length<10){
            msg.addClass('error');
            msgInfo.text('Please enter at least 10 words');
            msgInfo.addClass('error');
            return false;
        }else{
            msg.removeClass('error');
            msgInfo.text("");
            msgInfo.removeClass('error');
            return true;
        }
    }

    name.blur(validateName);
    email.blur(validateEmail);
    phone.blur(validatePhone);
    msg.blur(validateMsg);

    name.keyup(validateName);
    email.keyup(validateEmail);
    phone.keyup(validatePhone);
    msg.keyup(validateMsg);

    form.submit(function(){
        if(validateName() ,validateEmail() , validatePhone(), validateMsg() ){
            return true;
        }else{
            return false;
        }
    })
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T09:47:36.757

> 我不希望我的名字中有数字字符，对于有效的电子邮件问题，我希望 abc_xyz@xxx.com 作为有效的电子邮件，而不是像 abc@xyz_xxx.co 或类似的东西

```
var reg=/^[a-zA-Z]+$/;
var mail=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{3}$/; 
```

还将您的功能修改为

```
function validateName()
{
    var val=name.val();
    if(!reg.test(val))
    {
        if(val.length > 0) nameInfo.text('Only letters are allowed');
        else nameInfo.text('Please fill up your full Name');
        name.addClass('error');
        nameInfo.addClass('error');
        return false;
    }
    else
    {
        name.removeClass('error');
        nameInfo.text('');
        nameInfo.removeClass('error');
        return true;
    }
}

function validateEmail()
{
    var val=email.val();
    if(!mail.test(val))
    {
        if(val.length > 0) emailInfo.text('Invalid Email');
        else emailInfo.text('Please fill in your Valid Email');
        email.addClass('error');
        emailInfo.addClass('error');
        return false;
    }
    else
    {
        email.removeClass('error');
        emailInfo.removeClass('error');
        return true;
    }
} 
```

也在你的`validatePhone() function`改变中

```
else if(isNaN(phone)); 
```

至

```
else if(isNaN(phone.val())); 
```

[**这是正则表达式的测试**](http://jsfiddle.net/heera/cNWWC/1/)。

# php - 使用 PHP 检查 mysql 数据库中字段之间的差异

> ID：11502246
> 
> 赞同：-2
> 
> 时间：2012-07-16T10:11:24.533
> 
> 标签：php, mysql, field

我正在尝试确定 mysql 数据库的行之间的多个字段之间是否存在任何差异。

例如，如果名称字段在一行中不同，则回显结果。

最好的方法是什么？

**编辑：**

例如

```
Name          AGE
john smith    68
john smith    68
John M Smith  68 
```

我想要一个检测第三行中姓名的脚本与其他脚本不同，但能够对姓名和年龄字段执行此操作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:21:47.643

你首先要思考：与什么不同？您始终必须定义列应具有的值。如果您想要所有年龄为 68 岁且不是“john smith”的行，您的语句将如下所示：

```
SELECT * FROM table WHERE name <> "john smith" AND age <> 68; 
```

这将返回与定义值不同的所有行。

一个非常基本的 PHP 代码示例如下：

```
$mysqli = new mysqli('hostname', 'username', 'password', 'database');

$query = 'SELECT * FROM table WHERE name <> "john smith" AND age <> 68';

if($result = $mysqli->query($query)){
    while($row = $result->fetch_assoc()){
        // do something with the results using $row['name'] and $row['age']
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:30:45.653

因此，您想对可以在名称中测量某种偏差但年龄必须相等的数据集进行分组？

所以，如果我理解正确的话：“年龄”不是一个可靠的值，因为人们一年会变老一次，而且年龄已经过时了。使用生日。

“姓名”：同一天可以出生2个人。所以需要更多的数据来比较。如果你只有名字，那么你可以利用“Levenshtein-Distance”。这必须使用存储过程来实现，或者您使用 php 计算...

# wcf - 使用 WIF 对 Windows 服务中的多个端点进行混合身份验证

> ID：11502247
> 
> 赞同：1
> 
> 时间：2012-07-16T10:11:25.567
> 
> 标签：wcf, wif

我们需要在单个 Windows 服务中公开两个 WCF 端点。一个端点应使用基于声明的身份验证 (WIF)，而另一个端点应使用证书身份验证。不幸的是，我们所有的尝试都失败了，因为 WIF 配置附加到所有 WCF 端点；应该使用证书身份验证的端点需要一个令牌。

我找不到这个特定问题的任何解决方案。是否可以通过两种不同的身份验证在一个 Windows 服务中公开两个端点，其中只有一个是 WIF，如果可能，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:24:46.883

阅读 [如何在单个 WCF <service> 中混合 WIF 和非 WIF 端点？](https://stackoverflow.com/questions/6281013/how-to-mix-wif-and-non-wif-endpoints-in-a-single-wcf-service)

除非您使用两个不同的服务合同（尽管这可能只是标记接口），或者您在没有 WCF 的情况下手动执行操作（即：创建自己的行为并使用 WIF 声明授权管理器），否则没有办法做到这一点。这并不难，但你需要了解事情是如何运作的。

# svn - SVN 缺少修订 - 有没有人有解决方案

> ID：11502249
> 
> 赞同：0
> 
> 时间：2012-07-16T10:11:41.230
> 
> 标签：svn

大家好，我希望你们今天过得愉快！

我有一个小问题，我一直在寻找解决方案无济于事。也许这里有人可以帮助我？问题是这样的：

我正在使用我编写的脚本，该脚本循环遍历所有文件夹并将存储库的热复制到网络位置。除了一个 repo 之外，所有工作都非常好，该 repo 失败并出现以下错误：

svnadmin: Can't open file 'E:\repositories\20100831_repository_xyz\db\revs\0\235': 系统找不到指定的文件。
无法备份存储库。<==错误段完成==!>

我不介意丢失修订版，但我显然无法导出和导入（丢失所有修订版）。另外，我真的需要修复它，因为它破坏了我的夜间备份！500gb 在 4 周内使用...

有人有可行的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T21:23:32.200

首先你最好使用[`svnadmin dump`](http://svnbook.red-bean.com/en/1.6/svn.ref.svnadmin.c.dump.html)它，因为它会将每个 repo 与它的元数据打包在一起——修订、chagnes、用户等。你的“down-and-dirty”方法是有风险的，因为有可能丢失一些文件同时通过网络传输它们。然后，您可以通过 Intranet、Internet 或其他任何方式安全地传输所有存储库，并将它们加载到另一个 SVN 实例中，或者只保留文件。

这是命令的工作方式：

```
svnadmin dump REPOSITORY_NAME > out_file.dump 
```

我使用的是一个 cronjob，它使用 扫描我的 svn_root 目录`ls -1`，这是所有根 Repo 目录所在的位置，对于所有目录（./ 和 ../ 除外）获取它们的名称并在每个目录上执行存储库转储。完成后，我通过 ssh 将文件安全地移动到另一台服务器。

还有一件事——如果你想拥有另一台正在工作的服务器（作为从属服务器/镜像服务器）并且是最新的，你可以使用存储库挂钩将它与主服务器同步。如果您希望我对此进行解释，请对此发表评论。这一点都不难。

# mysql - 无法在 Tomcat7 中创建资源实例

> ID：11502250
> 
> 赞同：4
> 
> 时间：2012-07-16T10:11:48.750
> 
> 标签：mysql, jndi, connection-pooling, tomcat7, server.xml

我正在尝试在 Tomcat 7 中配置连接池。这是代码：server.xml 的一部分：

```
<GlobalNamingResources>
<!-- Editable user database that can also be used by
     UserDatabaseRealm to authenticate users
-->
<Resource name="UserDatabase" auth="Container"
          type="org.apache.catalina.UserDatabase"
          description="User database that can be updated and saved"
          factory="org.apache.catalina.users.MemoryUserDatabaseFactory"
          pathname="conf/tomcat-users.xml" />

<Resource  
name="jdbc/testDataSource"                                  
auth="Container"                                            
type="javax.sql.DataSource"                                   
driverClassName="com.mysql.jdbc.Driver"                      
url="jdbc:mysql://localhost:3306/delta_server"                
username="test" password="test"                              
validationQuery="select count (*) from session_contexts"              
/> 
```

web.xml 配置：

```
<resource-ref> 
    <description> 
        Sample JNDI DataSource resource reference 
    </description> 
    <res-ref-name>jdbc/testDataSource</res-ref-name>                   
    <res-type>java.sql.DatSource</res-type>                           
    <res-auth>Container</res-auth>                                     
</resource-ref> 
```

并从 jsp 页面访问：

```
 Context initialContext = new InitialContext();
        Context envContext = (Context) initialContext.lookup("java:/comp/env");
        conn = (Connection)  envContext.lookup("jdbc/testDataSource"); 
```

但不幸的是我得到了例外：

```
javax.naming.NamingException: Cannot create resource instance
org.apache.naming.factory.ResourceFactory.getObjectInstance(ResourceFactory.java:146)
javax.naming.spi.NamingManager.getObjectInstance(NamingManager.java:321)
org.apache.naming.NamingContext.lookup(NamingContext.java:826)
org.apache.naming.NamingContext.lookup(NamingContext.java:145)
org.apache.naming.NamingContext.lookup(NamingContext.java:814)
org.apache.naming.NamingContext.lookup(NamingContext.java:159)
org.apache.jsp.index_jsp._jspService(index_jsp.java:91)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:433)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:389)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T20:04:04.033

您的配置看起来相当不错（除了`web.xml`文件中的一些拼写错误；`<res-type>java.sql.DatSource</res-type>`应该是`<res-type>javax.sql.DataSource</res-type>`）。

但我认为的问题是您在`server.xml`文件中声明了数据库资源。

通常应用程序资源应该在应用程序的`context.xml`文件中声明，并且只有在`server.xml`应用程序之间共享时才声明。所以我的建议是在你的文件中声明`jdbc/testDataSource`资源。`context.xml`那应该是**使它工作的一种方法**。

如果您必须绝对拥有一个全局资源，那么您必须在`context.xml`文件中[添加一个资源链接，否则默认情况下它是不可见的](http://tomcat.apache.org/tomcat-7.0-doc/config/globalresources.html)。

> 此上下文不同于 JNDI 资源 HOW-TO 中描述的每个 Web 应用程序 JNDI 上下文。此元素中定义的资源在每个 Web 应用程序上下文中不可见，除非您将它们与 <ResourceLink> 元素显式链接。

因此，**使其工作的第二种方法**是保留声明的资源，`server.xml`然后在文件中添加类似这样的`context.xml`内容：

```
<ResourceLink global="jdbc/testDataSource" 
              name="jdbc/testDataSource" 
              type="javax.sql.DataSource" /> 
```

# ant - ivy 传递依赖的正确配置

> ID：11502252
> 
> 赞同：0
> 
> 时间：2012-07-16T10:12:08.497
> 
> 标签：ant, ivy

我的项目由*n 个*模块组成。其中一个，假设它被称为*my-first-module*声明了一个依赖项，例如：

```
<dependency org="com.mycompany.myproject" name="my-second-module" conf="default->default" rev="1.0-SNAPSHOT"/> 
```

工件存储在内部存储库中，该存储库在检索 jar 时可以正常工作。

出于调试目的，我运行：

```
ant -d | grep my-second-module 
```

输出说：

```
sorting dependencies of com.mycompany.myproject#my-second-module / # of dependencies : 2 
```

这是正确的，因为第二个模块声明了 2 个外部依赖项。我假设*my-second-module*的*ivy.xml*被正确地从存储库中获取和解析。Ivy 然后应该知道*my-second-module的依赖关系*

 ****问题是，ivy 没有获取这两个传递依赖项。**

从我指定的声明中可以看出，我想检索*默认*配置，并且它应该是可传递的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T15:54:36.277

如果不查看您如何配置项目，就不可能诊断出任何事情。

我能提供的唯一建议是生成一个 ivy 依赖管理报告并查看“默认”配置。

```
<target name="init" description="Resolve dependencies">
    <ivy:resolve/>
    <ivy:report todir="${build.dir}/ivy-report" graph="false"/>
    ..
    ..
</target> 
```

也许传递依赖被其他已解析的模块覆盖。例如，两个模块可以检索同一模块的不同版本，在这种情况下，ivy 将选择一个并“驱逐”另一个。另一种可能性是声明排除的模块，这将解释缺少传递依赖。

最后，让我们弄清楚你所说的“获取”是什么意思...... Ivy 将“解决”依赖关系，这意味着它将分析每个模块并用各种文件填充它的本地缓存。Ivy 有一个单独的“检索”任务，用于将文件放入本地构建工作区。

```
<ivy:retrieve pattern="${dist.dir}/WEB-INF/lib/[artifact].[ext]" conf="runtime"/> 
```

所以...这意味着当您运行 ivy 时，文件实际上可能不会从远程存储库中下载，因为 ivy 已经将它们安全地藏在它的缓存中。（通常位于 $HOME/.ivy2/cache）**

# node.js - Node.js 中的异步收集方法

> ID：11502253
> 
> 赞同：3
> 
> 时间：2012-07-16T10:12:08.653
> 
> 标签：node.js, asynchronous, underscore.js

是否有一些类似于下划线的框架允许我在集合上运行异步方法。

像 _.each(collection, itemCallback, doneCallback) 这样的东西。

例如：

```
_.each(items, function(item, token){
    item.someProperty = null;
  }, function(err){
     console.log("The loop is done");
  }); 
```

**编辑：** async.js 实际上并没有解决问题。例如下面的代码

```
<script type="text/javascript" src="async.js"></script>
<script type="text/javascript">

var arr = ["a","b","c"];

async.forEach(arr, function(item, met){
    console.log(item);
},
function(err){
});
console.log("Done");

</script> 
```

打印 abc 完成

虽然我希望它打印 Done abc

我可以用下划线延迟来做到这一点，但也许还有其他一些库可以在没有包装器的情况下做到这一点。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-27T03:59:46.253

[Async.js](https://github.com/caolan/async/)模块可以解决问题。您的示例太快了，您无法完全注意到它实际上正在按您的预期工作。这是一个添加了小延迟的示例，因此您可以注意到实际的执行顺序：

```
async.each([0,1,2,3,4,5,6,7,8,9], function(item, callback) {
  setTimeout(function() {
    console.log('>', item);
    callback();
  }, 2 * Math.random() * 1000);
}, function(err) {
  console.log('> done');
});

console.log(':)'); 
```

和输出：

```
:)
> 4
> 5
> 2
> 7
> 8
> 3
> 0
> 1
> 9
> 6
> done 
```

此外，要真正做到异步，您可能会考虑使用[Web Workers](https://developer.mozilla.org/en/Using_web_workers)；但是现在 Async.js 为您提供了一种非常简单的方法来执行类似（但不是实际的 Web Worker）名为[queue](https://github.com/caolan/async/#queue)的事情：

```
var q = async.queue(function(item, callback) {
  setTimeout(function() {
    console.log('>>', item);
    callback();
  }, 2 * Math.random() * 1000);
}, 5);

q.drain = function() {
  console.log('>> done');
};

q.push([0, 1, 2, 3, 4, 5, 6, 7, 8, 9]);

console.log('B)'); 
```

和输出：

```
B)
>> 1
>> 2
>> 5
>> 6
>> 4
>> 3
>> 0
>> 7
>> 8
>> 9
>> done 
```

如果最后你同时运行两者，这里是一个输出示例：

```
:)
B)
>> 2
> 3
>> 4
>> 1
> 8
>> 6
> 7
> 1
> 4
>> 3
> 0
> 2
>> 7
>> 5
> 6
> 5
> 9
> done
>> 8
>> 0
>> 9
>> done 
```

# javascript - 从phonegap中的url获取数据

> ID：11502254
> 
> 赞同：0
> 
> 时间：2012-07-16T10:12:10.920
> 
> 标签：javascript

我对Phonegap很陌生。我正在phonegap中做一个应用程序，在这里我想从特定的url获取数据。数据在xml文件中。任何人都可以通过提出一些想法来帮助我。

提前致谢...

```
html>
<head>
<title>Xml file read</title>

<script type="text/javascript">
function loadXMLDoc()
{
var request = new XMLHttpRequest();
request.open("GET","http://saletrack.cynere.net/test2.xml", true);
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        if (request.status == 200 || request.status == 0) {
            return request.responseXML;
            // do something with my xml
        }
    }
}
request.send();
}
</script>
</head>

<body>

<script type="text/javascript">

var xmlDoc=loadXMLDoc();
var x=xmlDoc.getElementsByTagName("author");
for (i=0;i<x.length;i++)
  {
  document.write(x[i].childNodes[0].nodeValue);
  document.write("<br />");
  } 

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:39:51.260

使用 AJAX：

```
var request = new XMLHttpRequest();
request.open("GET", "http://saletrack.cynere.net/App.xml", true);
request.onreadystatechange = function() {
    if (request.readyState == 4) {
        if (request.status == 200 || request.status == 0) {
            var myXML = request.responseXML;
            // do something with my xml
        }
    }
}
request.send(); 
```

# java - 在 Java 中修改 ZIP 存档中的文本文件

> ID：11502260
> 
> 赞同：23
> 
> 时间：2012-07-16T10:12:22.897
> 
> 标签：java, zip, file-handling

我的用例要求我打开一个 txt 文件，比如 abc.txt，它位于一个 zip 存档中，其中包含表单中的键值对

> 键1=值1
> 
> 键2=值2

.. 以此类推，每个键值对都在一个新行中。我必须更改与某个键对应的一个值，并将文本文件放回存档的新副本中。我如何在java中做到这一点？

到目前为止我的尝试：

```
 ZipFile zipFile = new ZipFile("test.zip");
    final ZipOutputStream zos = new ZipOutputStream(new FileOutputStream("out.zip"));
    for(Enumeration e = zipFile.entries(); e.hasMoreElements(); ) {
        ZipEntry entryIn = (ZipEntry) e.nextElement();
        if(!entryIn.getName().equalsIgnoreCase("abc.txt")){
            zos.putNextEntry(entryIn);
            InputStream is = zipFile.getInputStream(entryIn);
            byte [] buf = new byte[1024];
            int len;
            while((len = (is.read(buf))) > 0) {            
                zos.write(buf, 0, len);
            }
        }
        else{
            // I'm not sure what to do here
            // Tried a few things and the file gets corrupt
        }
        zos.closeEntry();
    }
    zos.close(); 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-05-07T21:35:10.173

Java 7 引入了一种更简单的方式来进行 zip 归档操作 - [FileSystems](https://docs.oracle.com/javase/7/docs/api/java/nio/file/FileSystems.html) API，它允许将文件的内容作为*文件系统*来访问。

除了更直接的 API 之外，它还在原地进行修改，并且不需要重写 zip 存档中的其他（不相关的）文件（如在接受的答案中所做的那样）。

这是解决 OP 用例的示例代码：

```
import java.io.*;
import java.nio.file.*;

public static void main(String[] args) throws IOException {
    modifyTextFileInZip("test.zip");
}

static void modifyTextFileInZip(String zipPath) throws IOException {
    Path zipFilePath = Paths.get(zipPath);
    try (FileSystem fs = FileSystems.newFileSystem(zipFilePath, null)) {
        Path source = fs.getPath("/abc.txt");
        Path temp = fs.getPath("/___abc___.txt");
        if (Files.exists(temp)) {
            throw new IOException("temp file exists, generate another name");
        }
        Files.move(source, temp);
        streamCopy(temp, source);
        Files.delete(temp);
    }
}

static void streamCopy(Path src, Path dst) throws IOException {
    try (BufferedReader br = new BufferedReader(
            new InputStreamReader(Files.newInputStream(src)));
         BufferedWriter bw = new BufferedWriter(
            new OutputStreamWriter(Files.newOutputStream(dst)))) {

        String line;
        while ((line = br.readLine()) != null) {
            line = line.replace("key1=value1", "key1=value2");
            bw.write(line);
            bw.newLine();
        }
    }
} 
```

有关更多 zip 存档操作示例，请参阅`demo/nio/zipfs/Demo.java`您可以[在此处](http://www.oracle.com/technetwork/java/javase/downloads/)下载的示例（查找 JDK 8 演示和示例）。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-01-30T12:57:05.720

你几乎做对了。文件显示为已损坏的一个可能原因是您可能使用过

> zos.putNextEntry(entryIn)

在其他部分也是如此。这会在 zip 文件中创建一个新条目，其中包含来自现有 zip 文件的信息。现有信息包括条目名称（文件名）及其CRC。

然后，当您尝试更新文本文件并关闭 zip 文件时，它将引发错误，因为条目中定义的 CRC 和您尝试写入的对象的 CRC 不同。

此外，如果您尝试替换的文本长度与您尝试替换的现有文本长度不同，您可能会收到错误消息

> 键1=值1

和

> key1=val1

这归结为您尝试写入的缓冲区长度与指定长度不同的问题。

```
ZipFile zipFile = new ZipFile("test.zip");
final ZipOutputStream zos = new ZipOutputStream(new FileOutputStream("out.zip"));
for(Enumeration e = zipFile.entries(); e.hasMoreElements(); ) {
    ZipEntry entryIn = (ZipEntry) e.nextElement();
    if (!entryIn.getName().equalsIgnoreCase("abc.txt")) {
        zos.putNextEntry(entryIn);
        InputStream is = zipFile.getInputStream(entryIn);
        byte[] buf = new byte[1024];
        int len;
        while((len = is.read(buf)) > 0) {            
            zos.write(buf, 0, len);
        }
    }
    else{
        zos.putNextEntry(new ZipEntry("abc.txt"));

        InputStream is = zipFile.getInputStream(entryIn);
        byte[] buf = new byte[1024];
        int len;
        while ((len = (is.read(buf))) > 0) {
            String s = new String(buf);
            if (s.contains("key1=value1")) {
                buf = s.replaceAll("key1=value1", "key1=val2").getBytes();
            }
            zos.write(buf, 0, (len < buf.length) ? len : buf.length);
        }
    }
    zos.closeEntry();
}
zos.close(); 
```

以下代码确保即使被替换的数据长度小于原始长度，也不会发生 IndexOutOfBoundsExceptions。

> (len < buf.length) ？len：buf.length

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-02T17:07:14.127

只有一点点改进：

```
else{
    zos.putNextEntry(new ZipEntry("abc.txt"));

    InputStream is = zipFile.getInputStream(entryIn);
    byte[] buf = new byte[1024];
    int len;
    while ((len = (is.read(buf))) > 0) {
        String s = new String(buf);
        if (s.contains("key1=value1")) {
            buf = s.replaceAll("key1=value1", "key1=val2").getBytes();
        }
        zos.write(buf, 0, (len < buf.length) ? len : buf.length);
    }
} 
```

那应该是：

```
else{
    zos.putNextEntry(new ZipEntry("abc.txt"));

    InputStream is = zipFile.getInputStream(entryIn);
    long size = entry.getSize();
    if (size > Integer.MAX_VALUE) {
        throw new IllegalStateException("...");
    }
    byte[] bytes = new byte[(int)size];
    is.read(bytes);
    zos.write(new String(bytes).replaceAll("key1=value1", "key1=val2").getBytes());
} 
```

为了捕捉所有的事件

原因是，对于第一个，您可以在一次读取中读取“key1”，在下一次读取中读取“=value1”，无法捕获您想要更改的事件

# c# - 从 Unity3D 到 facebook 的 FQL 请求

> ID：11502261
> 
> 赞同：0
> 
> 时间：2012-07-16T10:12:30.477
> 
> 标签：c#, facebook, get, facebook-fql, unity3d

我需要从 unity3d 向 Facebook 发送一个 GET 请求并检索它的答案（JSON 对象）。我在带有 WebRequest 的 Visual Studio 中做得很好。但据我所知，iOS 不支持 WebRequest 类。所以我试图用 Unity 的标准 WWW 类来实现这一点。执行以下操作：

```
public static IEnumerator GETRequestToFacebook()
{
    WWW www = new WWW("https://graph.facebook.com/fql?q=select name from profile where id=707855857");

    yield return www;

    Debug.Log(www.text);
} 
```

但是该方法给了我以下错误：*“您正在尝试从 www 流中加载数据，下载时出现以下错误。400 Bad Request”*。但是，如果我将 url 更改为“http://www.google.com”，它就可以正常工作。

我应该怎么做才能使我的初始 GET 请求在 unity3d 中工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T22:59:05.467

解决了。我应该在 FQL 请求中添加“+”号。

[https://graph.facebook.com/fql?q=select+name+from+profile+where+id=707855857](https://graph.facebook.com/fql?q=select+name+from+profile+where+id=707855857) "

没关系，我已经写了一个网络套接字。

# android - android中有没有进程的初始化回调？

> ID：11502263
> 
> 赞同：2
> 
> 时间：2012-07-16T10:12:41.123
> 
> 标签：android, process, android-context

假设我的应用程序有很多进程。
我尝试在**Application onCreate() 中运行一些初始化代码（实际上将应用程序上下文存储在静态变量中）**。但我发现在某些进程中，onCreate() 不会在同一进程中的其他代码之前运行，因此无法访问缓存的上下文。
我应该将初始化代码（存储应用程序上下文）放在哪里，以便它必须在同一进程中的任何代码之前运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:47:18.010

根据我们在聊天中的讨论，您遇到了一个问题，因为您试图在某些帮助程序类的静态初始化期间获取应用程序的上下文。我提出以下建议：

如果您的助手类仅由 Android 组件使用，那么当 Android 组件调用您的类时，Application.onCreate() 将被调用，您可以从那里获取上下文。您只需要等到从 Android 组件收到实际调用即可获取 Context。

不要在助手类被实例化后立即尝试这样做。仅在需要时才这样做。

# regex - perl - 提取字符串列表

> ID：11502266
> 
> 赞同：2
> 
> 时间：2012-07-16T10:12:58.970
> 
> 标签：regex, linux, perl, unix, grep

dummy.txt 包含：

```
gflkgWXYZ_123jfdknABC_8723879bfdkh873ABC_456jhb
gflkUI_12643jfdknABC_bfdk873WXYZ_7848jhb
ABC_1121fABC_22462
WXYZ_33273
3ABC_888 
```

我正在尝试匹配所有这些 WXYZ_（可选数字），即 WXYZ_23 和 ABC_（可选数字）。即ABC_

什么 perl 脚本（我在没有 GNU 的 solaris 上运行）可以让我生成以下输出文件？

```
WXYZ_123
ABC_8723879
ABC_456
ABC_
WXYZ_7848
ABC_1121
ABC_22462
WXYZ_33273
ABC_888 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:19:57.227

使用这个正则表达式`((ABC)|(WXYZ))_\d*`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:21:20.710

它需要是Perl吗？

```
egrep -o '(WXYZ|ABC)_[0-9]*' dummy.txt 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T10:48:55.127

单程：

```
perl -ne '
    push @list, $1 while m/((?:WXYZ|ABC)_\d*)/g;
    END { 
        printf qq|%s\n|, join qq|\n|, @list;
    }
' infile 
```

输出：

```
WXYZ_123                                                                                                                                                                                                                                     
ABC_8723879                                                                                                                                                                                                                                  
ABC_456                                                                                                                                                                                                                                      
ABC_                                                                                                                                                                                                                                         
WXYZ_7848                                                                                                                                                                                                                                    
ABC_1121                                                                                                                                                                                                                                     
ABC_22462                                                                                                                                                                                                                                    
WXYZ_33273                                                                                                                                                                                                                                   
ABC_888 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T10:44:44.843

Burning_LEGION 是对的，尽管在非捕获括号内进行交替更容易。您还必须以某种方式收集结果。假设您只想要 ABC_ 或 WXYZ_ 而不是其他任何东西，试试这个简短的程序：

```
#!/usr/bin/env perl

use warnings;
use strict;

my @matches;
open(FILE, '<', "dummy.txt") or die "Failed to open dummy.txt - $!\n";
foreach (<FILE>) {
    1 while /((?:ABC|WXYZ)_\d*)/g && push(@matches, $1);
}
close(FILE) or die "Failed to close dummy.txt - $!\n";

open(OUTPUT, '>', "output.txt") or die "Failed to open output.txt - $!\n";
print OUTPUT join("\n", @matches);
close(OUTPUT) or die "Failed to close output.txt - $!\n";

exit 0; 
```

> $cat output.txt
> WXYZ_123
> ABC_8723879
> ABC_456
> ABC_
> WXYZ_7848
> ABC_1121
> ABC_22462
> WXYZ_33273
> ABC_888

# ruby-on-rails - resque 队列会加载完整的应用程序吗？

> ID：11502267
> 
> 赞同：1
> 
> 时间：2012-07-16T10:13:04.017
> 
> 标签：ruby-on-rails, memory, resque

我有 16 个 resque 队列，当我尝试查看这些队列的内存分配时，它显示这些队列的每个队列都有 4% 的内存。但当时所有这些队列都是空的。因此，在我 100% 的内存中，近 64% 被环境负载本身使用。这就是我的感觉。

我的疑问是 1\. 这些 resque 队列中的每一个是否会分别将完整的应用程序加载到内存中。

1.  如果是，我是否可以对 resque 配置进行任何更改，以使所有 resque 队列都使用加载在内存中单个位置的相同环境。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:02:53.867

如果您使用 Resque，我认为您不走运。我相信这就是为什么[Sidekiq](https://github.com/mperham/sidekiq)被开发为*几乎*可以替代 Resque 的原因。Sidekiq 的作者写了[一篇博客文章](http://blog.carbonfive.com/2011/09/16/improving-resques-memory-efficiency/)，描述了他如何提高 Resque 的内存使用率。以下是[Sidekiq 常见问题解答中的一些内容](https://github.com/mperham/sidekiq/wiki/FAQ)：

**为什么 Sidekiq 优于多线程 Resque？**

> 回到碳五，我致力于改进 Resque 以使用线程而不是分叉。该项目是 Sidekiq 的基础。我建议在 Resque 的那个分支上使用 Sidekiq，原因如下：
> 
> *   MT Resque 是碳五客户的一次性产品，不受支持。有许多错误没有解决，例如 Web UI 的工作线程显示，因为它们对客户端并不重要。
> *   Sidekiq 是从头开始构建的，通过赛璐珞使用线程。
> *   Sidekiq 有中间件，它可以让你在工作生命周期内做一些很酷的事情。Resque 本身不支持这样的中间件。

**简而言之，MT Resque：为客户节省大量资金的快速技巧，Sidekiq：针对同一问题的精心设计的解决方案。**

# python - Python 的逗号运算符在赋值过程中是如何工作的？

> ID：11502268
> 
> 赞同：31
> 
> 时间：2012-07-16T10:13:09.337
> 
> 标签：python, tuples, variable-assignment, comma

我正在阅读 Python 文档（[http://docs.python.org/reference/simple_stmts.html#assignment-statements](http://docs.python.org/reference/simple_stmts.html#assignment-statements)）中的赋值语句。

其中引述如下：

> 如果目标是括在括号或方括号中的目标列表：该对象必须是与目标列表中的目标具有相同数量的项目的可迭代对象，并且其项目从左到右分配给相应的目标。

看完之后，我想到了写一个这样的示例：

```
a = 5
b = 4
a, b = a + b, a
print a, b 
```

我的假设是 a 和 b 的值都应该是 9。

然而，事实证明我错了。“a”的值为 9，“b”的值为 5。

有人可以帮助我更好地理解这一点吗？为什么分配“a”的旧值而不是新值？根据文档，将首先分配 a 的值，对吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-07-16T10:15:21.620

在进行任何赋值之前，赋值运算符右侧的所有表达式都会被计算。

来自[Python 教程：编程的第一步](http://docs.python.org/tutorial/introduction.html#first-steps-towards-programming)：

> 第一行包含一个多重赋值：变量 a 和 b 同时获得新值 0 和 1。在最后一行再次使用它，表明**右侧的表达式在任何赋值之前都首先被计算发生**。右侧的表达式从左到右计算。

强调我的。

您的代码在功能上等同于以下内容：

```
a, b = 5 + 4, 5
print a, b 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-07-16T10:16:29.717

Python 没有 C 中的“逗号运算符”。相反，逗号表示应该构造一个元组。的右侧

```
a, b = a + b, a 
```

是一个包含 th 和 的两个项目的元`a + b`组`a`。

在分配的左侧，逗号表示应根据您引用的规则执行序列解包：`a`将分配元组的第一个元素，`b`第二个元素。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-07-16T10:15:49.047

您可以认为分配在副本上并行发生，而不是按顺序和就地发生。

这就是为什么在 python 中你不需要交换函数：

```
a, b = b, a 
```

无需临时变量即可充分工作，`c`.

# nsstring - 标签显示 (null) 如何从标签中移除 (null)

> ID：11502270
> 
> 赞同：0
> 
> 时间：2012-07-16T10:13:24.040
> 
> 标签：nsstring, null, uilabel

我通过使用一些字符串变量为标签分配了一些（值）。

当字符串变量返回值标签显示相同的值时。但是当字符串没有返回任何显示的值标签时（null）。

所以如果字符串变量没有返回任何内容，我不想在标签中显示任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:18:01.347

```
if([label.text isequaltostring:@"null"]) 
```

**或者**

```
string.length==0; 
```

**或者**

```
string.text==nil 
```

**然后放**

```
label.text=@""; 
```

# dovecot - dovecot：查找域所有者失败

> ID：11502273
> 
> 赞同：0
> 
> 时间：2012-07-16T10:13:43.760
> 
> 标签：dovecot

无法收到邮件，然后与蝙蝠连接！服务器发送： *-ERR 身份验证失败。* 并且邮件日志中的记录是： *dovecot: auth(default): Failed to lookup domain owner of*

重建 Apache 后出现问题。哪里可能有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-24T09:47:48.020

正如主机支持所说：

原因是主机名与域相同。邮件服务器尝试再次验证 VPS 的系统用户，而不是域的虚拟用户。

# c++ - 不同h文件中的两个类相互使用时如何解决编译错误？

> ID：11502275
> 
> 赞同：2
> 
> 时间：2012-07-16T10:13:44.583
> 
> 标签：c++, class, header

> **可能的重复：**
> [避免头文件的循环依赖](https://stackoverflow.com/questions/4816698/avoiding-circular-dependencies-of-header-files)

任务.h：

```
#ifndef Tasks_h
#define Tasks_h

#include "Executors.h"

class Task
{
    Executor *current_executor;
};

#endif Tasks_h 
```

执行者.h：

```
#ifndef Executors_h
#define Executors_h

#include "Tasks.h"

class Executor
{
    Task *current_task;
};

#endif Executors_h 
```

主.cpp：

```
#include <conio.h>
#include <stdio.h>
#include "Tasks.h"
#include "Executors.h"

int main()
{
    Executor ex;

    return 0;
} 
```

编译错误：

```
Error   1   error C2146: syntax error : missing ';' before identifier 'current_task'    c:\users\rain\documents\visual studio 2010\projects\text\text\executors.h   8
Error   2   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\users\rain\documents\visual studio 2010\projects\text\text\executors.h   8
Error   3   error C4430: missing type specifier - int assumed. Note: C++ does not support default-int   c:\users\rain\documents\visual studio 2010\projects\text\text\executors.h   8 
```

再次......在 C# 中我永远不会遇到这样的问题，但我尽我所能支持 C++ 并使用它。
不想在一个头文件中编写所有类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:21:07.600

> 这只是一个例子。可能有指针

如果您可以切换到使用指针，则可以用前向声明替换标头包含：

```
#ifndef Executors_h
#define Executors_h

class Task;

class Executor
{
    Task *current_task_ptr;
};

#endif Executors_h 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T10:16:22.783

您可以使用前向声明：

```
//#include "Executors.h"

class Executor;
class Task
{
    std::shared_ptr<Executor> current_executor;
}; 
```

另一种方法是使用 pimpl idiom：

在 .h 文件中（没有执行程序头文件/转发声明）

```
class TaskImpl;
class Task
{
 public:
    Task();
    String getExecutorName();

 private:
    std::unique_ptr<TaskImpl> impl;
    friend TaskImpl;    
}; 
```

并在 .cpp

```
#include "Executors.h"

class TaskImpl {
   public:
   Executor current_executor;
   String getExecutorName() { return current_executor.name; }
};

Task::Task() : impl(new TaskImpl()) {
}

String Task::getExecutorName() { return impl->getExecutorName(); } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:24:52.807

我敢打赌你不知道你实际上在做什么：你有一个任务，其中一部分是执行者，其中一部分是任务……

它不是 C# 或 Java 中的引用。

要执行您实际尝试执行的操作，请结合前向声明使用指针/引用

# php - 为什么我无法打开流？

> ID：11502280
> 
> 赞同：1
> 
> 时间：2012-07-16T10:14:13.760
> 
> 标签：php, relative-path, file-get-contents

我在警告时无法打开流：`file_get_contents(img/service/polaroid/pol_b1cfb94c5c28b8c2ffaa0db64132b700.png) [function.file-get-contents]: failed to open stream: No such file or directory in C:\xampp\htdocs\XXX\class\service.php on line 18`

图像存储在`/XXX/img/service/polaroid/pol_b1cfb94c5c28b8c2ffaa0db64132b700.png`.

PHP_SELF 显示`/XXX/main.php`.

有人可以告诉我有什么问题吗？我尝试进行相对路径`"../img/etc"`思考，因为我是从类文件夹中调用的，但这并不奏效。

```
$image = $row->pol_path;
        $image_data = base64_encode(file_get_contents($image));
        $src='data: image/png;base64, '.$image_data; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:19:24.993

尝试：

```
$image_data = base64_encode(file_get_contents($image, true)); 
```

或者

```
$image_data = base64_encode(file_get_contents($image, FILE_USE_INCLUDE_PATH)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:24:46.663

如果 main.php 位于 XXX/main.php，而图像位于 XXX/img/image.php，则相对路径为 './img/image.php'。您使用“../”进入根目录；

# c# - 获取字符的矩阵像素？

> ID：11502285
> 
> 赞同：0
> 
> 时间：2012-07-16T10:14:47.933
> 
> 标签：c#, matrix, character, pixel

我想通过 C# 获取具有任何字体和大小的字符的矩阵像素。任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:28:04.543

如果您可以使用 WPF 库，则可以将字体转换为几何表示：http: [//blogs.msdn.com/b/webnext/archive/2007/05/22/silverlight-convert-text-to-path。 aspx](http://blogs.msdn.com/b/webnext/archive/2007/05/22/silverlight-convert-text-to-path.aspx) 具有“像素”通常没有用，因为文本几乎都由矢量表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T01:45:13.373

[我在http://www.pcworld.com.vn/hoi-dap/lap-trinh/2010/11/1222275/ma-lenh-vb6-lay-ma-tran-diem-](http://www.pcworld.com.vn/hoi-dap/lap-trinh/2010/11/1222275/ma-lenh-vb6-lay-ma-tran-diem-cua-ky-tu/)找到了这个问题代码的解决方案[cua-ky-tu/](http://www.pcworld.com.vn/hoi-dap/lap-trinh/2010/11/1222275/ma-lenh-vb6-lay-ma-tran-diem-cua-ky-tu/)。但是，我不知道如何转换为 C#。每个人都可以帮助我。最良好的问候！

# iphone - Twitter 是否知道已经下载了哪些消息以及如何下载？

> ID：11502288
> 
> 赞同：0
> 
> 时间：2012-07-16T10:15:11.957
> 
> 标签：iphone, ios, twitter

我想知道 Twitter 是如何确定是否应该向用户上传推文，或者是否不应该因为推文已经上传到 iOS 客户端？

每条推文都有ID吗？

我正在尝试找到不向用户发送两次数据的最佳方法。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:44:39.263

Twitter 会检查您尝试发布的推文的内容。如果它与前一个重复，它会阻止它（说真的，重复消息有什么用？）。找到一种方法，不要用相同的文本/链接/图像发两次推文。

# opengl - OpenGL 两遍着色器效果与 FBO 渲染到纹理仅在 Windows 上产生噪点

> ID：11502299
> 
> 赞同：1
> 
> 时间：2012-07-16T10:16:04.640
> 
> 标签：opengl, glsl, shader, textures, fbo

执行以下操作的正确方法是什么：

1.  使用 FBO (fbo-a) 将场景渲染为纹理
2.  然后使用纹理 (tex-a) 应用效果并使用相同的 fbo (fbo-a) 将其渲染到另一个纹理 (tex-b)
3.  然后渲染第二个纹理，应用效果 (tex-b) 作为全屏四边形。

我的方法是这样，但这给了我一个在窗口上充满“噪声”的纹理+应用的效果（所有像素都是随机着色的红色、绿色、蓝白色、黑色）。

*   我正在使用一个 FBO，两个纹理设置为 GL_COLOR_ATTACHENT0 (tex-a) 和 GL_COLOR_ATTACHMENT1 (tex-b)
*   我绑定我的 fbo，确保它使用 glDrawBuffer(GL_COLOR_ATTACHMENT0) 渲染到 tex-a
*   然后我将效果应用到带有 tex-a 边界的着色器中并设置为“sampler2D”。使用纹理单元 1，并切换到第二个颜色附件 (glDrawBuffer(GL_COLOR_ATTACHMENT1))。并渲染一个全屏四边形。现在一切都渲染成 tex-b
*   然后我切换回默认的 FBO (0) 并使用带有全屏四边形的 tex-b 来渲染结果。

*应用我的着色器时的结果示例* ![输入噪音](../Images/5a0292b83908c1c4dbfcddfda179bc3a.png)

这是我正在使用的着色器。我不知道这可能是造成这种情况的原因，但也许噪音是由溢出引起的？

**顶点着色器**

```
attribute vec4 a_pos; 
attribute vec2 a_tex; 
varying vec2 v_tex; 

void main() { 
    mat4 ident = mat4(1.0); 
    v_tex = a_tex; 
    gl_Position = ident * a_pos; 
} 
```

**片段着色器**

```
uniform int u_mode; 
uniform sampler2D u_texture; 
uniform float u_exposure; 
uniform float u_decay; 
uniform float u_density; 
uniform float u_weight; 
uniform float u_light_x; 
uniform float u_light_y; 
const int NUM_SAMPLES = 100; 
varying vec2 v_tex; 
void main() { 
    if (u_mode == 0) { 
        vec2 pos_on_screen = vec2(u_light_x, u_light_y); 
        vec2 delta_texc = vec2(v_tex.st - pos_on_screen.xy); 
        vec2 texc = v_tex; 
        delta_texc *= 1.0 / float(NUM_SAMPLES) * u_density; 
        float illum_decay = 1.0; 
        for(int i = 0; i < NUM_SAMPLES; i++) { 
            texc -= delta_texc; 
            vec4 sample = texture2D(u_texture, texc); 
            sample *= illum_decay * u_weight; 
            gl_FragColor += sample; 
            illum_decay *= u_decay; 
        } 
        gl_FragColor *= u_exposure; 
    } 
    else if(u_mode == 1) { 
        gl_FragColor = texture2D(u_texture, v_tex); 
        gl_FragColor.a = 1.0; 
    } 

} 
```

我在 opengl.org 上阅读了这篇[FBO 文章](http://www.opengl.org/wiki/Framebuffer_Object)，他们在文章底部描述了一个反馈循环。描述对我来说并不完全清楚，我想知道我是否在做他们在那里描述的事情。

**更新1：**

[链接到源代码](https://gist.github.com/11d7b8ee5db1283dc2a8#comments)

**更新 2：**

当我`gl_FragColor.rgb = vec3(0.0, 0.0, 0.0);`在开始采样循环（使用 NUM_SAMPLES）之前第一次设置时，它可以找到。不知道为什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T18:38:30.763

问题是你没有初始化`gl_FragColor`，你正在用这些行修改它

```
gl_FragColor += sample; 
```

和

```
gl_FragColor *= u_exposure; 
```

这两者都取决于 gl_FragColor 的先前值。所以你得到了一些随机的垃圾（不管在寄存器中发生了什么，着色器编译器决定用于 gl_FragColor 计算）。这很有可能在某些驱动程序/硬件组合上正常工作（因为编译器决定使用由于某种原因始终为 0 的寄存器）而不是其他寄存器。

# ember.js - 如何在emberjs视图中获取数组的索引项

> ID：11502300
> 
> 赞同：3
> 
> 时间：2012-07-16T10:16:13.953
> 
> 标签：ember.js

如何在 emberjs 视图中获取数组的索引项。

这将返回一个错误：

```
{{#view}}
  {{oneArray[0]}}
{{/view}} 
```

我不想使用 {{#each}} 显示所有项目，只想显示特殊索引项目。如何？

或者我可以获得{{#each}}的索引吗？

```
{{#each oneArray}}
    {{#if index>0}}
         don't show the first item {{oneArray[index]}}
    {{/if}}
{{/each}} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T11:57:50.960

如[本文](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)所示，您可以定义一个新数组以在每一行中包含索引：

```
App.MyView = Ember.View.extend({
    oneArrayWithIndices: function() {
      return this.get('oneArray').map(function(item, index) {
        return {item: i, index: idx};
      });
    }.property('oneArray.@each')
}); 
```

然后在您的模板中，您可以像这样访问索引：

```
{{#each view.oneArrayWithIndices}}
  index: {{this.index}} <br />   
  item: {{this.item}}
{{/#each}} 
```

但是，由于您只想显示数组中的特定项目，因此最好在您的视图中执行此操作（甚至在您的控制器中更好）。*尽量保持你的模板无逻辑*。

因此，在您的视图/控制器中创建一个新数组，其中仅包含您要显示的项目：

```
myFilteredArray: function() {
  return this.get('oneArray').filter( function(item, index) {
    // return true if you want to include this item
    // for example, with the code below we include all but the first item
    if (index > 0) { 
      return true;     
    }    
  });
}.property('oneArray.@each') 
```

# heroku - Heroku + Grails - 在heroku上构建应用程序时缺少DATABASE_URL

> ID：11502305
> 
> 赞同：1
> 
> 时间：2012-07-16T10:16:25.597
> 
> 标签：heroku

我正在尝试使用 grails 教程将我的应用程序连接到共享数据库 5MB。我正在使用 grails 2.1.0。在我的本地机器上，当我运行 heroku config 时，我可以看到 DATABASE_URL 已设置，但是在执行 git push 之后...我的构建停止并出现错误：

```
Error packaging application: Error loading DataSource.groovy: null (Use --stacktrace to see the full trace)
Failed to build app
Heroku push rejected, failed to compile Grails app 
```

因此，我添加了日志记录以查看环境在 heroku 上的外观。我已将 println System.env 添加到 Datasource.groovy，但找不到任何 DATABASE_URL：

```
.[OLDPWD:/app/tmp/repo.git/.cache, SHELL:/bin/bash, SHLVL:2, GIT_DIR:., JAVA_HOME:/usr/lib/jvm/java-6-openjdk, PATH:/app/tmp/repo.git/.cache/.grails/bin::/usr/local/bin:/usr/local/sbin:/usr/bin:/bin:/usr/sbin:/sbin, SSH_CLIENT:XXX, MAIL:XXX, USER:XXX, LOG_TOKEN:t.9e79a5be-dfa2-446e-9f83-f6b4ebbc4eb7, GRAILS_HOME:/app/tmp/repo.git/.cache/.grails, PWD:XXX, HOME:/app/, LOGNAME:u11846, _:/app/tmp/repo.git/.cache/.grails/bin/grails, SSH_CONNECTION:XXX, LD_LIBRARY_PATH:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64] 
```

我已经检查了 Heroku 插件，为我的应用程序安装了共享数据库：

```
heroku addons
=== XXX Configured Add-ons
shared-database:5mb 
```

当我执行 heroku config

```
heroku config
=== Config Vars for XXX

DATABASE_URL:        postgres://XXX
JAVA_OPTS:           -Xmx384m -Xss512k -XX:+UseCompressedOops
SHARED_DATABASE_URL: postgres://XXX 
```

数据源.groovy：

```
production {
    dataSource {
        dbCreate = "update"
        driverClassName = "org.postgresql.Driver"
        dialect = org.hibernate.dialect.PostgreSQLDialect

        println System.env
        println System.env.DATABASE_URL
        uri = new URI(System.env.DATABASE_URL)
        println uri

        url = "jdbc:postgresql://" + uri.host + uri.path
        username = uri.userInfo.split(":")[0]
        password = uri.userInfo.split(":")[1]
    }
} 
```

在 BuildConfig.groovy 我添加了

```
runtime 'postgresql:postgresql:8.4-702.jdbc3' 
```

我可以在 DATABASE_URL 设置为本地 postgresql 的情况下在本地启动应用程序。我正在建造战争并在码头上运行它。

谁能告诉我我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T22:24:08.860

应用程序环境变量在构建时不可用。您的代码需要能够相应地处理它。或者您可以启用新的`user_env_compile`Heroku Labs 功能，该功能确实可以在构建时启用环境变量： [https ://devcenter.heroku.com/articles/labs-user-env-compile](https://devcenter.heroku.com/articles/labs-user-env-compile)

# c++ - 语法错误：缺少 ';' 在标识符“iDlg”之前

> ID：11502306
> 
> 赞同：0
> 
> 时间：2012-07-16T10:16:26.903
> 
> 标签：c++, windows, visual-studio-2010, mfc

我试图让一个对话框 [import] 从另一个对话框 [baseline] 启动。我包含了所需的“.h”文件，但是我根本无法创建导入类的实例。我得到的错误是这样的：

```
Error   1   error C2146: syntax error : missing ';' before identifier 'iDlg'    h:\shaunak\projects\sar_ccd\sar_ccd\baseline.h  202 1   Sar_CCD 
```

导致此 [baseline.h] 的代码行：

```
#include "Markup.h" 
#include<stdio.h>
#include<math.h>
#include "baseline_func.h"
#include "resource.h"
#include "Functions.h"
#include <stdlib.h>
#include "Sar_CCDDoc.h"
#include "Sar_CCDView.h"
#include <vector>
#include "MemAlloc.h"
#include "ReadFiles.h"
#include<vector>
#include<map>
#include "afxwin.h"
#include "import.h"
#include "Geocode.h"

**<SNIP: Taking out the irrelevant lines>**

     afx_msg void OnDestroy();
     virtual void PostNcDestroy();
     afx_msg void OnBnClickedNxtBase();
     CButton nextBaseline;

    import iDlg;               //doesnt work!
    CGeocoding cx;             //works!!!
}; 
```

但是，如果我像这样使用相同的 sysntax 创建另一个类 [Geocoding] 的实例，它可以正常工作：

```
#include "Geocoding.h"
CGeocoding cx; 
```

请帮我弄清楚原因。

完整代码：

基线.h：http: [//freetexthost.com/on06wref6c](http://freetexthost.com/on06wref6c) import.h：[http ://freetexthost.com/x4e4dkwrve](http://freetexthost.com/x4e4dkwrve)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:57:22.570

在 Visual Studio 中，有一个关键字 import 或 #import 用于导入 COM DLL，也用于其他事情。我猜您在那里遇到了名称冲突。

为了绕过它，将您的类导入放在`namespace`

```
import.h

namespace myimport
{
  class import : public CDialog { 
  ...
  };
};

import.cpp

namespace myimport
{
  ...
}; 
```

那么当你使用它时

```
myimport::import iDlg; 
```

这应该可以解决问题，尽管将其重命名为“import”以外的其他名称将是更好的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:20:51.473

`import`不是 C++ 中的关键字或类型。因此，您会收到语法错误，因为编译器无法识别`import`.

要创建另一个类的实例，您必须正确声明它，例如：

```
class baseline : public CDialog
{
    // ...

    CDialog *iDlg;  // Pointer to imported dialog
}; 
```

请记住初始化指向实际对话框的指针。

# javascript - 在图像上添加动态文本

> ID：11502308
> 
> 赞同：7
> 
> 时间：2012-07-16T10:16:34.613
> 
> 标签：javascript, jquery, html, dynamic

我正在为用户创建一个网站，他们可以在其中创建自定义徽标。为此，我需要一种工具来从用户将填写的文本框中添加动态文本，然后文本应出现在所选图像上。有没有什么办法，比如说 Javascript，我可以通过它来实现上述场景？对于我如何做到这一点的任何建议，我将不胜感激。

到目前为止，我的 HTML 是：

```
<html>
  <body>
   <input type="text" id="submit"/>
   <img src=<?php echo $image; ?> id="toChange" alt="pic" width="60" height="60" />
  </body> 
```

和我的 jQuery：

```
$('#submit').change(function() {
   $('#toChange').text( $('#submit').val());  
}); 
```

但到目前为止我还没有成功。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T10:20:58.150

您可以尝试以下方法：

1.  使用 HTML5 Canvas 呈现图像示例：[http ://www.html5canvastutorials.com/tutorials/html5-canvas-images/](http://www.html5canvastutorials.com/tutorials/html5-canvas-images/)
2.  在渲染图像之上，使用 HTML5 Canvas API 使用所需的字体属性绘制所需的文本参考：[https ://developer.mozilla.org/en/Drawing_text_using_a_canvas](https://developer.mozilla.org/en/Drawing_text_using_a_canvas)

希望它有用。

# php - PHP中的交替表格行样式 - 位运算符的奇怪用法

> ID：11502309
> 
> 赞同：9
> 
> 时间：2012-07-16T10:16:34.570
> 
> 标签：php, operators, bit-manipulation

查看其他开发人员编写的一些代码，我遇到了这个：

```
for($i=1; $i<=30; $i++)
{
  if($i&1)
    $color = '#fff';
  else
    $color = '#bbb';
} 
```

这个 $color 变量在后面的代码中用于行背景颜色。交替的颜色工作正常。

如果我正在写这篇文章，我会使用模数运算符 (%) 而不是按位 (&) 运算符。

为什么按位运算符在这种情况下起作用？使用这种方法而不是模运算符有什么好处吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T10:17:57.490

运算符对`&`数字进行按位比较。所以如果你这样做

`$i & 1`

然后它会告诉您是否设置了“1”标志，例如二进制：

`001010111010`

最后一个数字是“1”标志（请记住，二进制以相反的顺序依次为 1、2、4、8 等），在本例中设置为 0。

由于 1 是二进制中唯一的奇数标志，它会告诉您该数字是奇数还是偶数。

例如，如果 $i 是 3，那么在二进制中它将是 011 - 最后一个数字是 1（1 标志），因此`$i & 1`将为真。

例如，如果 $i 是 4，那么在二进制中它将是 100 - 最后一个数字是 0（1 标志），因此`$i & 1`将为假。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T10:22:19.287

它之所以有效，是因为如果数字是奇数，则第一位始终为 1，如果数字为偶数，则始终为 0。

```
 1
 10
 11
100
101
110
111
etc. 
```

理论上，按位运算比模运算快，但解释器可能会将模运算优化为按位运算。

为什么其他开发者使用它，我们只能猜测：出于习惯，从某个地方复制粘贴，不知道模数运算符，炫耀，想要优化......

# mysql - 将基于 MS Access 应用程序编写的应用程序中的表移植到 MySQL

> ID：11502317
> 
> 赞同：0
> 
> 时间：2012-07-16T10:16:52.353
> 
> 标签：mysql, ms-access, odbc

我的兄弟使用一个名为 Kennel Connection 的应用程序 - [http://www.kennelconnection.com/screen.html](http://www.kennelconnection.com/screen.html)，它有一个 Microsoft Access 后端。

他希望我创建报告并将其显示在网页上。我知道一些 PHP，但自由地（也许不是自由地）承认我使用 Dreamweaver 作为加速我的 php 开发的拐杖。我在 PHP 方面的大部分经验都基于 mysql 后端。

该数据库有大约 20 个表，但只有大约 5 个被定期使用。是否有任何原因我无法将这 5 个表导入 mysql 并在应用程序中创建指向这些 mysql 表的链接表？在短期内，我只是将关键表移植到将所有表移植到 mysql 的长期目标？

我最大的担忧是不知道应用程序是否会在写入链接的 mysql 表而不是内部访问表时出现任何问题。有人有这方面的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:34:04.217

您可能至少必须重写任何查询。您似乎不太可能需要实时数据，并且编写一个从 MS Access 更新 MYSQL 表的查询并不难。这可以通过任务计划程序运行，也可以手动运行。

# ios - 橡皮擦在 iOS 绘图中不起作用

> ID：11502320
> 
> 赞同：4
> 
> 时间：2012-07-16T10:17:29.507
> 
> 标签：ios, cocoa-touch, drawing, core-graphics, quartz-2d

我正在做一个绘图项目，我有一个橡皮擦选项。下面给出的代码适用于当我启动我的应用程序并绘制一些线条并继续使用橡皮擦时。它工作正常，我得到了橡皮擦效果。现在第二种情况是我画了大约 10 条线，然后单击“撤消按钮”并撤消整个事情，然后我重做整个事情，现在当我单击“橡皮擦按钮”并尝试擦除某些部分时，但相反，它将清除整个绘图。这是我想要弄清楚的，但我不明白我哪里出错了，所以朋友们，请帮助我。

下面是我的代码。

```
- (void)drawRect:(CGRect)rect
{

      case DRAW:
    {
        [m_curImage drawAtPoint:CGPointMake(0, 0)];

        CGPoint mid1 = midPoint(m_previousPoint1, m_previousPoint2); 
        CGPoint mid2 = midPoint(m_currentPoint, m_previousPoint1);
        CGContextRef context = UIGraphicsGetCurrentContext(); 

        [self.layer renderInContext:context];
        CGContextMoveToPoint(context, mid1.x, mid1.y);
        CGContextAddQuadCurveToPoint(context, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y); 
        CGContextSetLineCap(context, kCGLineCapRound);
        CGContextSetLineWidth(context, self.lineWidth);
        CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
        CGContextSetAlpha(context, self.lineAlpha);
        CGContextSetAllowsAntialiasing(context, YES);
        CGContextStrokePath(context); 
       //            [super drawRect:rect];           
    }
         break;

        case ERASE:
        {
            [m_curImage drawAtPoint:CGPointMake(0, 0)];
            CGContextRef context = UIGraphicsGetCurrentContext();     
            CGContextClearRect(context, rect);                
            CGContextSetBlendMode(context, kCGBlendModeClear);
            [super drawRect:rect];
            break;                

  }      

        case UNDO:
        {
            [m_curImage drawInRect:self.bounds];
             break;

        }

        case REDO:
        {
            [m_curImage drawInRect:self.bounds];  
             break;           
        }

        default:
            break;
    }    
} 
```

这些是我单击撤消/重做时运行的功能。

```
-(void)redrawLine
{
    UIGraphicsBeginImageContextWithOptions(self.bounds.size, NO, 0.0f);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    NSDictionary *lineInfo = [m_lineArray lastObject];
    m_curImage = (UIImage*)[lineInfo valueForKey:@"IMAGE"];
    UIGraphicsEndImageContext();
    [self setNeedsDisplayInRect:self.bounds];   
}

-(void)undoButtonClicked
{
    if([m_lineArray count] > 0)
    {
        NSMutableArray *line = [m_lineArray lastObject];
        [m_bufferArray addObject:line];
        [m_lineArray removeLastObject];
        [self redrawLine];
    }
    m_drawStep = UNDO;

}

-(void)redoButtonClicked
{
    if([m_bufferArray count] > 0)
    {
        NSMutableArray *line = [m_bufferArray lastObject];
        [m_lineArray addObject:line];
        [m_bufferArray removeLastObject];        
        [self redrawLine];
    }
     m_drawStep = REDO;

} 
```

请告诉我我是否做得对。

问候，

兰吉特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-23T11:01:56.100

我已经解决了这个问题，问题和下面是完美运行的代码

```
case :ERASE
{
 CGPoint mid1 = midPoint(m_previousPoint1, m_previousPoint2); 
            CGPoint mid2 = midPoint(m_currentPoint, m_previousPoint1);

            [m_curImage drawAtPoint:CGPointMake(0, 0)];
            CGContextRef context = UIGraphicsGetCurrentContext(); 

            [self.layer renderInContext:context];
            CGContextMoveToPoint(context, mid1.x, mid1.y);
            CGContextAddQuadCurveToPoint(context, m_previousPoint1.x, m_previousPoint1.y, mid2.x, mid2.y); 
            CGContextSetLineCap(context, kCGLineCapRound);

            CGContextSetBlendMode(context, kCGBlendModeClear);
            CGContextSetLineJoin(context, kCGLineJoinRound);
            CGContextSetLineWidth(context, self.lineWidth);
            CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
            CGContextSetShouldAntialias(context, YES);  
            CGContextSetAllowsAntialiasing(context, YES); 
            CGContextSetFlatness(context, 0.1f);

            CGContextSetAlpha(context, self.lineAlpha);
            CGContextStrokePath(context); 
} 
```

问候兰吉特。

这解决了我的问题，如果有人有同样的问题，请执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T07:44:21.987

这里发生的事情是当你擦除整个矩形时会变得清晰 na?? 因此，不要使用该擦除方法以与屏幕相同的颜色绘制线条，以便看起来像窗口正在清除并且它也很容易尝试这个。

例如，如果您的绘图屏幕是黑色的，则在屏幕上以黑色绘制 touchesmoved 线，使其看起来像清除。

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
  lastPoint = [touch locationInView:imagevw];
  }

  -(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
   UITouch *touch = [touches anyObject];
   CGPoint currentPoint = [touch locationInView:imagevw];
   UIGraphicsBeginImageContext(self.imagevw.frame.size);

  [self.imagevw.image drawInRect:CGRectMake(0, 0, self.imagevw.frame.size.width,        self.imagevw.frame.size.height)];
    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), width);
    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 0.0, 0.0, 0.0, 1.0); // black color
    CGContextBeginPath(UIGraphicsGetCurrentContext());
    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
    CGContextStrokePath(UIGraphicsGetCurrentContext());
     imagevw.image = UIGraphicsGetImageFromCurrentImageContext();
     UIGraphicsEndImageContext(); 
```

这是在黑色视图上用黑色画线的代码......试试......它可能对你有帮助......

# javascript - 清除 SELECT 中的所有选择

> ID：11502324
> 
> 赞同：0
> 
> 时间：2012-07-16T10:17:45.033
> 
> 标签：javascript, jquery, html

```
<select id="number" name="number">
  <option value=""></option>
  <option value="1">01</option>
  <option value="2" selected="selected">02</option>
  <option value="3">03</option>
  <option value="4" selected="selected">04</option>
  <option value="5">05</option>
</select>
<span id="clear">clear all</span> 
```

```
$('#clear').click(function(){
  // what should be here?
}) 
```

如何清除/删除中的所有选择`select#number`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:20:27.340

试试这个：

API：[http ://api.jquery.com/empty/](http://api.jquery.com/empty/)

希望这有助于事业`:)`

```
$('#clear').click(function(){
  $('#number').empty();
})​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:24:41.033

试试这个

```
$('select#number').children().removeAttr('selected'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:23:06.257

我更新了我的答案，这应该可以

```
 $('#clear').click(function () {
        $('#number option').each(function () {
            $(this).removeAttr("selected");

        });

    }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:18:28.727

试试这个...

```
$("select#number option").remove(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T10:23:19.147

如果要重置选择，请使用

```
$('#clear').click(function(){
   $('select#number').val('');//Cause you have a blank option with value of empty string
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T10:24:22.603

```
$('#clear').click(function(){
   $("#number").removeAttr("selected");  
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-16T10:32:36.900

尝试：

```
 $("select#number option").attr("selected", ""); 
```

# ios - iOS UI - 类似于 iPhoto 底栏 UI

> ID：11502325
> 
> 赞同：0
> 
> 时间：2012-07-16T10:17:47.400
> 
> 标签：ios, user-interface, interface

我是 iOS 应用开发新手。我想在 iPhoto 应用程序中创建类似于底部工具行的 UI。任何教程或提示都会非常有帮助。 [单击此链接可查看 iPhoto 应用程序的 UI。](http://arstechnica.com/apple/2012/03/hands-on-iphoto-for-ios-out-does-adobe-for-mobile-image-editing/) 上面链接的第一张图片显示了底部的工具容器。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:34:33.510

您可以使用普通的 UIToolbar。这是将 UISlider 添加到工具栏的教程：http: [//eureka.ykyuen.info/2010/06/09/iphone-adding-uislider-to-uitoolbar/](http://eureka.ykyuen.info/2010/06/09/iphone-adding-uislider-to-uitoolbar/)

```
// Initialize  
aSlider = [[UISlider alloc] init];
UIBarButtonItem *sliderAsToolbarItem = [[UIBarButtonItem alloc]  
initWithCustomView:aSlider];
// Set the width of aSlider
[sliderAsToolbarItem setWidth:250.0];

// Add the items to the toolbar
[toolbar setItems:[NSArray arrayWithObjects:sliderAsToolbarItem, nil]]; 
```

如果您搜索**自定义 UIToolbar**，您将获得大量的教程结果。

在这里你可以找到一个自定义的 UITabbar：http: [//idevrecipes.com/2010/12/16/raised-center-tab-bar-button/](http://idevrecipes.com/2010/12/16/raised-center-tab-bar-button/)

或者您可以在工具栏或标签栏的情况下使用带有按钮的视图并将其设置为底部。

# sql - 如何将记录（特定行，具有多个（但不是全部）列）从一个表附加到另一个表

> ID：11502329
> 
> 赞同：0
> 
> 时间：2012-07-16T10:18:16.283
> 
> 标签：sql, ms-access

每天有大约 5000 条记录上传到 tblRecordsCurrent，在接下来几天的某个时间点，当这些记录处理完毕后，需要将它们移动到 tblRecordsHistorical。每条记录都有一个外键`DataSetID`，将其与上传的日期/时间联系起来（父表）。

如何在 vba 中将 tblRecordsCurrent 的单个 DataSet 从 tblRecordsCurrent 插入 tblRecordsHistorical。我无法插入所有列，因为两个表都包含持久列。

我不能把整个`INSERT INTO tblRecordsHistorical A, B, C, D, E, F...`，因为访问 vba 太长了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:26:36.347

如果将查询保存在 Access 数据库中，则可以通过以下方式在 VBA 中执行：

```
DoCmd.OpenQuery "yourQueryName", acViewNormal, acEdit 
```

或者

```
CurrentDb.OpenRecordset("yourQueryName") 
```

或者

```
CurrentDb.Execute "qryAddLoginfoRow" 
```

这允许您在不将查询存储在 VBA 代码中的情况下执行查询。但是您也可以通过以下查询执行此操作[`VBA`](http://msdn.microsoft.com/en-us/library/ff834799.aspx)：

```
INSERT INTO tblRecordsHistorical (col1, col2...) 
SELECT col1, col2...
FROM tblRecordsCurrent 
```

编辑：

您可以通过将字符串连接在一起来创建一个长 SQL 字符串：

```
SQLString = "INSERT INTO tblRecordsHistorical (col1, col2...) " & _
            " SELECT ... " & _
            " FROM tblRecordsCurrent " 
```

# arrays - ARM NEON 如何使用索引更改值

> ID：11502332
> 
> 赞同：0
> 
> 时间：2012-07-16T10:18:30.047
> 
> 标签：arrays, indexing, arm, simd, neon

```
unsigned char changeValue(unsigned char pArray[256],unsigned char value)
{

return pArray[value];
} 
```

如何使用大约 uint8x8_t 的霓虹灯更改此功能？

感谢您的帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:07:12.320

你不能 - NEON 没有收集负载。您可以像这样处理的唯一情况是当您想要返回 8 或 16 个连续字节值时。

# ruby-on-rails - Squeel和Arel的区别？

> ID：11502333
> 
> 赞同：0
> 
> 时间：2012-07-16T10:18:37.577
> 
> 标签：ruby-on-rails, arel, squeel

谁能为 Rails 新手解释两个外观非常相似的宝石“Arel”和“Squeel”之间的区别。

[https://github.com/rails/arel](https://github.com/rails/arel)与[https://github.com/ernie/squeel](https://github.com/ernie/squeel)

我期待构建一个简单的查询构建器，用户将获得某些 UI 块，可用于构建 SQL 查询。两者中的哪个宝石更合适，为什么？

类似问题： [rails 中的 SQL 查询生成器](https://stackoverflow.com/questions/1846055/sql-query-builder-in-rails)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:51:03.050

在这种情况下，比较是不正确的。Squeel 建立在 Arel 之上，并有自己的 DSL 用于构建查询。没什么特别的。

我认为这可以用任何宝石来完成。

# javascript - 从下拉菜单中选择选项 PASS 后显示 DIV

> ID：11502335
> 
> 赞同：-4
> 
> 时间：2012-07-16T10:19:10.207
> 
> 标签：javascript

我想用选项创建简单的下拉菜单，其中一个是 PASS 然后显示 DIV 一旦从下拉菜单中选择选项 PASS，其他选项 DIV 将被关闭

```
<script type="text/javascript">
document.getElementById('mfi_4_a_i').onchange = function(){
    if (this.value == 'PASS') {
        document.getElementById('sdd').style.display = "block";
    } else {
        document.getELementById('sdd').style.display = "none";
    }
};
</script>
<select id="test" name="test" onChange="changetextbox();">
    <option value="PASS">PASS</option>
    <option>No</option>
    <option>No, but planning in future</option>
</select>

<input type="text" name="test" id="sdd" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:28:58.927

更改顺序

```
<select id="test" name="test" onChange="changetextbox();">
    <option value="PASS">PASS</option>
    <option>No</option>
    <option>No, but planning in future</option>
</select>

<input type="text" name="test" id="sdd" />

<script type="text/javascript">
document.getElementById('mfi_4_a_i').onchange = function(){
    if (this.value == 'PASS') {
        document.getElementById('sdd').style.display = "block";
    } else {
        document.getELementById('sdd').style.display = "none";
    }
};
</script> 
```

您需要确保当 JavaScript 运行时 DOM 元素已准备就绪......

**请注意**，您的属性在 JavaScript 和HTML 中`id`都不匹配，您应该编写一个函数或不同时编写这两个...`mfi_4_a_i``test``changetextbox``getElementById('blah').onchange = function() {`

```
<select id="test" name="test">
    <option value="PASS">PASS</option>
    <option>No</option>
    <option>No, but planning in future</option>
</select>

<input type="text" name="test" id="sdd" />

<script type="text/javascript">
document.getElementById('test').onchange = function(){
    if (this.value == 'PASS') {
        document.getElementById('sdd').style.display = "block";
    } else {
        document.getElementById('sdd').style.display = "none";
    }
};
</script> 
```

[这里的工作示例](http://jsbin.com/iyucul/edit#javascript,html,live)

**你的**另一个笔记****

 **```
document.getELementById('sdd').style.display = "none"; 
```

这应该是

```
document.getElementById('sdd').style.display = "none"; 
```

我改变了`L`in Element的大小写

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:24:37.323

你会想要这样的东西：

```
<script type="text/javascript">
document.getElementById('ID_OF_DROPDOWN').onchange = function(){
    if (this.value == 'PASS') {
        document.getElementById('ID_OF_DIV').style.display = "block";
    } else {
        document.getELementById('ID_OF_DIV').style.display = "none";
    }
};
</script> 
```**

# c# - 如何在C#中显示没有任何按钮的消息框

> ID：11502338
> 
> 赞同：5
> 
> 时间：2012-07-16T10:19:22.237
> 
> 标签：c#, loader, busyindicator

我尝试在执行操作时向用户显示 MESSAGE。MESSAGE 不会显示任何按钮。只是一个消息（文本），也许是一个背景图像。

问题如下：

*   MessageBox 似乎不是很好的控件（因为按钮，它阻塞了正在运行的进程）。
*   Form.ShowDialog() 也会阻塞正在运行的进程。我不知道该怎么办。
*   我想显示消息，运行我的流程，并在流程完成后处理消息。

如何实现这一点`C#`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T10:22:19.347

使用消息创建一个简单的表单（或公开一个公共属性以便能够更改消息，或者使用带有消息参数的构造函数将其传入）并使用[此 Show 重载](http://msdn.microsoft.com/en-us/library/szcefbbd.aspx)显示表单。然后禁用（整个）原始（所有者）表单（或仅禁用您不希望访问的控件）。

所以，在你的“主要”形式中这样做：

```
Form f = new MessageForm();
f.Show(this);         //Make sure we're the owner
this.Enabled = false; //Disable ourselves
//Do processing here
this.Enabled = true;  //We're done, enable ourselves
f.Close();            //Dispose message form 
```

另外，考虑使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:21:27.820

创建自定义表单，并编写自己的行为

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:23:02.690

创建一个自定义表单，将其设置为最小样式等。确保它知道该过程何时完成，例如通过传递对该过程的引用并不时检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:28:21.527

您可以这样做的一种方法是创建一个工作类，该类在完成时引发一个事件。

在新的主题中执行工人类，使其在背景中运行。

创建模态表单，并使用一种方法将其关闭作为“完成”事件的事件处理程序。这样，用户界面仍然可以工作并做出响应，并且一旦工作线程完成，表单将关闭。

# maven - 由于缺少 http://jetty.mortbay.org/configure.dtd，Failsave 无法启动码头服务器

> ID：11502346
> 
> 赞同：2
> 
> 时间：2012-07-16T10:19:44.220
> 
> 标签：maven, jetty, dtd

我无法使用 maven-failsave 验证我的 webapp，因为 web-jetty.xml 引用了丢失的 dtd (http://jetty.mortbay.org/configure.dtd)。

有任何想法吗？我可以禁用 dtd 检查吗？

我在哪里可以获得[http://jetty.mortbay.org/configure.dtd](http://jetty.mortbay.org/configure.dtd)的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:47:30.433

旧的应该可以工作，我会研究一下，但你也可以在：

[http://www.eclipse.org/jetty/configure.dtd](http://www.eclipse.org/jetty/configure.dtd)

[编辑] 对此的更新：

当我们尝试保持真正旧的 xml 文件 doctypes 有效时，我们有许多重定向。我们最近连接了从 jetty.codehaus.org 到 www.eclipse.org/jetty 的重定向，这导致这些旧网址出现了许多验证错误。这正在解决，但如果它影响您更新到 www.eclipse.org/jetty/configure.dtd 是最好的解决方案，因此不再播放重定向游戏。

# extjs - ExtJS 4.0 在模型和树形面板中查找数据

> ID：11502353
> 
> 赞同：0
> 
> 时间：2012-07-16T10:20:13.430
> 
> 标签：extjs, treepanel

使用以下 Json，我填充了一个树形面板：

```
[{"text":"Item 1}", "expanded":true, "cls":"folder", "children":
    [{"text":"Item 1.1", "leaf":true, "foo", "bar"},
    ...
... 
```

当用户在树中选择项目 1.1 时，我能够找到所选项目：

```
onTreepanelSelectionChange: function(tablepanel, selections, options) {
    var selItem = selections[0].data.text; 
```

所以我可以访问诸如**text**、**expand**等属性……但我找不到访问**foo**值的方法。我认为我的问题是由于我通过树形面板找到所选项目并且**foo**的值仅在商店中可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:50:10.623

将`foo`属性添加到您的模型。

# objective-c - glReadPixels 到 ImageMagick

> ID：11502357
> 
> 赞同：0
> 
> 时间：2012-07-16T10:20:28.533
> 
> 标签：objective-c, xcode, image, cocoa, opengl

我想用 ImageMagick 将 OpenGL 视图保存为图像。我搜索了互联网并找到了一些有关此的信息。所以我现在知道我需要使用 glReadPixels。没关系，但是如何从这些读取的像素中制作图像？

* * *

现在代码如下所示：

```
char *buffer = (char*) calloc(viewHeight * viewWidth * 4, sizeof(char));
glReadPixels( 0, 0, viewWidth, viewHeight, GL_RGBA, GL_BYTE, buffer );
Blob b( buffer, 4 * viewWidth * viewHeight );
Image saveimage(b);
saveimage.write("subimageGcrop.png"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:27:06.860

使用 读取像素时`glReadPixels`，需要将它们复制到[blob](http://www.imagemagick.org/Magick++/Blob.html)对象。然后您可以创建[Image](http://www.imagemagick.org/Magick++/Image.html)对象，并写入文件。

像这样的东西：

```
 char *buffer; // needs to be big enough
    glReadPixels( 0, 0, width, length, GL_BGR, GL_BYTE, buffer );
    Blob b( buffer, 3 * width * length );
    Image i( b, 3 * width * length, 3 );
    i.write( "img.jpg" ); 
```

您可能需要调整参数。

# javascript - 带有参数的android http帖子

> ID：11502358
> 
> 赞同：0
> 
> 时间：2012-07-16T10:20:40.880
> 
> 标签：javascript, android, json, http, post

我必须将此 http 帖子从 JavaScript 转换为 Android。

我在使用`cids: []`. 我不能用这个符号创建一个 jsonobject `[ ]`。它应该是一个空数组。

这是我的 JavaScript：

```
var makeAjaxRequest = function () {
        Ext.getBody().mask('Loading...', 'x-mask-loading', false);
        var obj = {
            uid: 1161,
            cids: []        
        };
        Ext.Ajax.request({
            url: 'http://test.com.my',
            method: 'POST',
            params: { json: Ext.encode(obj) },
            success: function (response, opts) {
                Ext.getCmp('content').update(response.responseText);
                Ext.getCmp('status').setTitle('Static test.json file loaded');
                Ext.getBody().unmask();
                var data = Ext.decode(response.responseText);
                Ext.Msg.alert('result::', data.r[1].id, Ext.emptyFn);
            }
        });
    }; 
```

这是我的安卓代码：

```
 String[] temp = null; 
JSONObject json = new JSONObject(); 
HttpPost post = new HttpPost(url); 
json.put("uid", 1161); 
json.put("cids", temp); 
List postParams = new ArrayList(); 
postParams.add(new BasicNameValuePair("json", json.toString())); 
UrlEncodedFormEntity entity = new UrlEncodedFormEntity(postParams); 
tv1.setText(postParams.toString()); 
post.setEntity(entity); 
post.setHeader("Accept", "application/json");
response = client.execute(post); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:25:36.710

使用`String[] temp = null;`是不对的。

使用`String[] temp = {};`. 这表示一个空数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:26:27.057

我不能用这个符号“[]”创建一个 jsonobject。

^^这基本上是您尝试创建的 JSON 数组。JSONObjects 有 {}，JSONArrays 有 []。

```
 public void writeJSON() {
    JSONObject user = new JSONObject();
    JSONObject user2;
    user2 = new JSONObject();
    try {
        user.put("dish_id", "1");
        user.put("dish_custom", "2");
        user.put("quantity", "2");
        user.put("shared", "2");

        user2.put("dish_id", "2");
        user2.put("dish_custom", "2");
        user2.put("quantity", "4");
        user2.put("shared", "3");
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    JSONArray notebookUsers = new JSONArray();
    notebookUsers.put(user);
    notebookUsers.put(user2);
    System.out.println("the JSON ARRAY is"+notebookUsers); 
```

将给出用户和用户 2 的 JSON 数组，符号为“[]”

# php - 如何将 alphauserpoints 积分用于 joomla 中的 adsmanager 付款？

> ID：11502361
> 
> 赞同：0
> 
> 时间：2012-07-16T10:20:54.903
> 
> 标签：php, joomla, content-management-system

是否有任何插件或黑客可以让我使用 alphauserpoints 积分来支付 joomla 中的 adsmanager 广告的费用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T13:50:43.477

这是我针对 Alphauserpoints 1.7.4、Adsmanager 2.7 RC3 和 PaidSystem 的解决方案。

编辑`components\com_paidsystem\api.paidsystem.php`

**`defined('_JEXEC') or die( 'Restricted access' );`添加以下代码**后****

 **```
//AlphaUserPoints start
$api_AUP = JPATH_SITE.DS.'components'.DS.'com_alphauserpoints'.DS.'helper.php';
if ( file_exists($api_AUP))
{
    require_once ($api_AUP);            
}
//AlphaUserPoints end 
```

接下来您需要编辑函数 getBalance($userid)。这是在 api.paidsystem.php

```
function getBalance($userid)
{
    //Alphauserpoints substitute for value
    //Get the RefferreID of a user
    $referreid = AlphaUserPointsHelper::getAnyUserReferreID((int)$userid);
    $profil=AlphaUserPointsHelper:: getUserInfo ($referreid);
    $value=$profil->points;
    //Alphauserpoints substitute for value end

    //ORIGINAL CODE BELOW
    /*$db =JFactory::getDbo();
    //$db->setQuery( "SELECT credit FROM #__paidsystem_credits WHERE    userid=".(int)$userid );
    //To explicitly convert a value to integer, use either the (int) or     (integer) casts. 
    $value = $db->loadResult();*/

    if ($value == "")
        $value = 0;
    return $value;
} 
```

然后编辑下一个函数

```
//EDIT this to debit credits from alphauserpoints
//Use alphauserpoints rule to debit from alphauserpoints.

function removeCredits($userid,$num,$description) 
{   
    $db =JFactory::getDbo();
    //$db->setQuery( "SELECT credit FROM  #__paidsystem_credits WHERE userid=".(int)$userid );
    //$balance = (float) $db->loadResult();
    $referreid = AlphaUserPointsHelper::getAnyUserReferreID((int)$userid);
    $profil=AlphaUserPointsHelper:: getUserInfo ($referreid);
    $balance=$profil->points;

    //$db->setQuery( "UPDATE #__paidsystem_credits SET credit=credit-".(float)$num." WHERE userid=".(int)$userid );
    //$db->query();
    echo "removeCredits=$userid,$num";
    $obj = new stdClass();
    $obj->userid = $userid;
    $obj->balance = $balance;
    $obj->change = $num * -1;
    $obj->description = $description;
    $obj->date = date("Y-m-d H:i:s");

    AlphaUserPointsHelper::newpoints( 'plgaup_purchaseadvertising', '','', 'purchase advertising', $num*-1);

    $db->insertObject("#__paidsystem_history",$obj);        
} 
```

**请记住：**您需要在 Joomla 的 alphauserpoints 组件的管理员部分中创建一个新规则才能使其正常工作。在我的代码中，新规则名称称为 plgaup_purchaseadvertising。**

# android - 添加反向动画时，Android动画显示空白视图

> ID：11502364
> 
> 赞同：2
> 
> 时间：2012-07-16T10:21:04.153
> 
> 标签：android, android-animation

我已经通过 xml 制作了动画，例如用于活动转换的旋转动画。第一部分是旋转和缩放动画，它们一起工作以显示半旋转工作正常但是当我添加它们的反向开始偏移时，它们显示的是空白视图而不是动画......甚至没有显示动画的第一部分正常工作..

这是只有第一部分存在并且工作正常时的 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
<rotate
    android:duration="2000"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="-15"
    android:toYScale="0.0" />

<scale
    android:duration="2000"
    android:fromXScale="1"
    android:fromYScale="1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="0"
    android:toYScale="1" />

</set> 
```

但是当我添加反向代码时，它一直都是空白的......

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >
<rotate
    android:duration="2000"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="-15"
    android:toYScale="0.0" />

<scale
    android:duration="2000"
    android:fromXScale="1"
    android:fromYScale="1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="0"
    android:toYScale="1" />

 <rotate
    android:startOffset="2000"
    android:duration="2000"
    android:fromDegrees="-15"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="0"
    android:toYScale="0.0" />

  <scale
    android:startOffset="2000"
    android:duration="2000"
    android:fromXScale="0"
    android:fromYScale="1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toXScale="1"
    android:toYScale="1" />

  </set> 
```

所以请大家告诉我哪里出错了...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:39:15.623

您无需复制动画即可实现反向效果。你可以使用[android:repeateMode = "reverse"](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android%3arepeatMode)和[android:repeatCount = "1"](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android%3arepeatCount)

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android" >

<rotate
    android:duration="2000"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="1"
    android:repeatMode="reverse"
    android:toDegrees="-15" />

<scale
    android:duration="2000"
    android:fromXScale="1"
    android:fromYScale="1"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="1"
    android:repeatMode="reverse"
    android:toXScale="0"
    android:toYScale="1" />

</set> 
```

您需要同时设置for和`repeatCount`动画。[不幸的是，由于实现中的错误](https://code.google.com/p/android/issues/detail?id=17662)，您不能直接在属性中使用它。`repeatMode``scale``rotate``set``AnimationSet`

但是这个动画将只应用于一个活动。如果您确实希望第一个活动消失，然后出现第二个活动，则需要将动画分成两部分。第一部分将有你的`rotate`和`scale`直接的动画，第二部分将有反转`rotate`和`scale`动画。所以基本上你只需要将你`set`的四个动画分成两个文件。然后你需要使用这两个动画来开始新的活动：

```
overridePendingTransition(R.anim.direct, R.anim.reversed); 
```

# php - PHP - 向第三维数组添加值时遇到问题

> ID：11502365
> 
> 赞同：2
> 
> 时间：2012-07-16T10:21:04.350
> 
> 标签：php

我首先有一个这个数组场景：

```
$_SESSION['player_1_pawn'][] = 'Warrior'; 
```

现在，当我想添加这样的三维值时：

```
$_SESSION['player_1_pawn'][0]['x'] = 1; 
```

我得到这个输出

```
>$_SESSION['player_1_pawn'][0] : '1arrior' 
```

我的问题是，如何使该值保持不变，`Warrior`而不是`1arrior`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:23:58.507

如果该值已经是一个字符串，则`['x']`访问该字符串的第一个字符（是的，不要问；））。

如果您想用数组替换整个内容，请执行以下操作：

```
$_SESSION['player_1_pawn'][0] = array('x' => 1); 
```

你不能`$_SESSION['player_1_pawn'][0]`同时是字符串“Warrior”*和*数组，所以要弄清楚你想要它是哪个。大概：

```
$_SESSION['player_1_pawn'][0] = array('type' => 'Warrior', 'x' => 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:27:31.417

你的问题是这`$_SESSION['player_1_pawn'][0]`是一个等于“战士”的标量值。当您将标量视为数组时，就像使用`$_SESSION['player_1_pawn'][0]['x']`which evalueates`$_SESSION['player_1_pawn'][0][0]`或“W”一样，您只需更改字符串中的第一个字符。

如果您想保留“勇士”，请尝试以下操作：

```
$_SESSION['player_1_pawn']=array('Warrior', 'x'=>1); 
```

预计到达时间：

鉴于您的要求，结构是这样的：

```
$_SESSION['player_1_pawn'] = array(
  0 => array('Warrior', 'x'=>1),
  1 => array('Wizard', 'x'=>7), //...
); 
```

这意味着你添加这样的：

```
$_SESSION['player_1_pawn'][]=array('Warrior', 'x'=>1); 
```

# iphone - CFDataGetBytes(image, CRangeMake(0, CFDataGetLength(image)), destPixels) 崩溃；

> ID：11502373
> 
> 赞同：0
> 
> 时间：2012-07-16T10:21:47.107
> 
> 标签：iphone, ios

我正在制作屏幕视频，但在这条线上崩溃。

```
 CFDataGetBytes(image, CFRangeMake(0, CFDataGetLength(image)), destPixels); 
```

**注意**：如果像素缓冲区是连续的并且具有与输入数据相同的 bytesPerRow ，它将起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:31:24.590

所以我提供了从相机中抓取帧的代码 - 也许它会有所帮助 在抓取数据后，我将它放在队列中以进行进一步处理。我不得不删除一些代码，因为它与你无关——所以你在这里看到的部分应该是你可以使用的。

```
- (void)captureOutput:(AVCaptureVideoDataOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection
{
    @autoreleasepool {
        CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); 
        //NSLog(@"PE: value=%lld timeScale=%d flags=%x", prStamp.value, prStamp.timescale, prStamp.flags);

        /*Lock the image buffer*/
        CVPixelBufferLockBaseAddress(imageBuffer,0); 

        NSRange captureRange;

        /*Get information about the image*/
        uint8_t *baseAddress = (uint8_t *)CVPixelBufferGetBaseAddress(imageBuffer); 
        size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer); 
        size_t width = CVPixelBufferGetWidth(imageBuffer); 

        // Note Apple sample code cheats big time - the phone is big endian so this reverses the "apparent" order of bytes
        CGContextRef newContext = CGBitmapContextCreate(NULL, width, captureRange.length, 8, bytesPerRow, colorSpace, kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little); // Video in ARGB format

assert(newContext);

        uint8_t *newPtr = (uint8_t *)CGBitmapContextGetData(newContext);
        size_t offset   = captureRange.location * bytesPerRow;

        memcpy(newPtr, baseAddress + offset, captureRange.length * bytesPerRow);

        CVPixelBufferUnlockBaseAddress(imageBuffer, 0);

        CMTime prStamp = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);      // when it was taken?
        //CMTime deStamp = CMSampleBufferGetDecodeTimeStamp(sampleBuffer);          // now?

        NSDictionary *dict = [NSDictionary dictionaryWithObjectsAndKeys:
            [NSValue valueWithBytes:&saveState objCType:@encode(saveImages)], kState,
            [NSValue valueWithNonretainedObject:(__bridge id)newContext], kImageContext,
            [NSValue valueWithBytes:&prStamp objCType:@encode(CMTime)], kPresTime,
            nil ];
        dispatch_async(imageQueue, ^
            {
                // could be on any thread now
                OSAtomicDecrement32(&queueDepth);

                if(!isCancelled) {
                    saveImages state; [(NSValue *)[dict objectForKey:kState] getValue:&state];
                    CGContextRef context; [(NSValue *)[dict objectForKey:kImageContext] getValue:&context];
                    CMTime stamp; [(NSValue *)[dict objectForKey:kPresTime] getValue:&stamp];

                    CGImageRef newImageRef = CGBitmapContextCreateImage(context); 
                    CGContextRelease(context);
                    UIImageOrientation orient = state == saveOne ? UIImageOrientationLeft : UIImageOrientationUp;
                    UIImage *image = [UIImage imageWithCGImage:newImageRef scale:1.0 orientation:orient]; // imageWithCGImage:  UIImageOrientationUp  UIImageOrientationLeft
                    CGImageRelease(newImageRef);
                    NSData *data = UIImagePNGRepresentation(image);

                    // NSLog(@"STATE:[%d]: value=%lld timeScale=%d flags=%x", state, stamp.value, stamp.timescale, stamp.flags);

                    {
                        NSString *name = [NSString stringWithFormat:@"%d.png", num];
                        NSString *path = [[wlAppDelegate snippetsDirectory] stringByAppendingPathComponent:name];
                        BOOL ret = [data writeToFile:path atomically:NO];
//NSLog(@"WROTE %d err=%d w/time %f path:%@", num, ret, (double)stamp.value/(double)stamp.timescale, path);
                        if(!ret) {
                            ++errors;
                        } else {
                            dispatch_async(dispatch_get_main_queue(), ^
                                {
                                    if(num) [delegate progress:(CGFloat)num/(CGFloat)(MORE_THAN_ONE_REV * SNAPS_PER_SEC) file:path];
                                } );
                        }
                        ++num;
                    }
                } else NSLog(@"CANCELLED");

            } );
    }
} 
```

# sql - 如何从 sql server 中的字符串获取 email-id？

> ID：11502377
> 
> 赞同：0
> 
> 时间：2012-07-16T10:21:47.617
> 
> 标签：sql, sql-server, sql-server-2008, tsql

```
DECLARE @str as varchar(500) = '</FONT><FONT SIZE=2 FACE="Arial">atul.kale@bca.net</FONT><FONT SIZE=2 FACE="Arial">'
SELECT substring(@str,patindex('%">%',@str),patindex('%</FONT>%',@str)) 
```

我正在尝试从`@str`字符串中获取电子邮件 ID。

## 输出应该是。

```
atul.kale@bca.net 
```

我没有得到我应该如何处理 sql-server 中的子字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:42:46.363

如果电子邮件地址周围的字符串`"</FONT><FONT SIZE=2 FACE="Arial">"`是不变的，那么你总是可以试试这个

```
DECLARE @str as varchar(500) = '</FONT><FONT SIZE=2 FACE="Arial">atul.kale@bca.net</FONT><FONT SIZE=2 FACE="Arial">'
SELECT REPLACE(@str,'</FONT><FONT SIZE=2 FACE="Arial">','') 
```

如果它不是恒定的

```
DECLARE @str as varchar(500) = '</FONT><FONT SIZE=2 FACE="Arial">atul.kale@bca.net</FONT><FONT SIZE=2 FACE="Arial">'
select substring(@str,patindex('%">%',@str)+2,patindex('%</FONT>%',substring(@str,patindex('%">%',@str)+3,len(@str)))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:26:09.897

```
DECLARE @str as varchar(500) = '</FONT><FONT SIZE=2 FACE="Arial">atul.kale@bca.net</FONT><FONT SIZE=2 FACE="Arial">' 

select substring(col,1,charindex('<',col)-1) as email from
(
    select substring(@str,charindex('">',@str)+2,len(@str)) as col
) as t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T12:55:52.510

这是我会尝试的方法：

1.  从字符串中去除 HTML 标签
2.  利用[PATINDEX Workbench 中的 Phil Factors 脚本从](http://www.simple-talk.com/sql/t-sql-programming/patindex-workbench/)字符串中提取电子邮件地址。

即使字符串中有多个 @ 符号，脚本也会忽略不属于电子邮件地址的那个。此外，如果字符串中有多个电子邮件地址，则此脚本将仅获取第一个。

```
--This script is NOT written by me. I have it in my laptop and at present i don't remember  who created this :(
CREATE FUNCTION [dbo].[StripHTML]( @text VARCHAR(MAX) ) 
RETURNS VARCHAR(MAX) 
AS
BEGIN
    DECLARE @textXML XML
    DECLARE @result VARCHAR(MAX)
    SET @textXML = @text;
    WITH doc(contents) AS
    (
        SELECT chunks.chunk.query('.') FROM @textXML.nodes('/') AS chunks(chunk)
    )
    SELECT @result = contents.value('.', 'varchar(max)') FROM doc
    RETURN @result
END
GO

--Variable declaration & test string
DECLARE @str AS VARCHAR(500) 
SET @str = 'Alpha Beta <FONT SIZE=2 FACE="Arial"> i will be @ gamma</font> one two three </FONT><FONT SIZE=2 FACE="Arial">atul.kale@bca.net</FONT><FONT SIZE=2 FACE="Arial"> i hate mondays'

--First lets strip HTML out of the given string
--I am storing it into the same variable may be you might want to use another one!
SELECT @str = dbo.udf_StripHTML(@str)

--Extract the Email ID from the given string. 
--Even if there are @ symbol within the string multiple times it ignore the one which is not part of email address
--if there are multiple email ids this script would list the first one ONLY
--Source: http://www.simple-talk.com/sql/t-sql-programming/patindex-workbench/
SELECT  
    CASE WHEN AtIndex=0 THEN '' --no email found
    ELSE RIGHT(head, PATINDEX('% %', REVERSE(head) + ' ') - 1) + LEFT(tail + ' ', PATINDEX('% %', tail + ' '))
    END EmailAddress
FROM 
(
    SELECT RIGHT(EmbeddedEmail, [len] - AtIndex) AS tail,
             LEFT(EmbeddedEmail, AtIndex) AS head, AtIndex
    FROM 
    (
        SELECT 
            PATINDEX('%[A-Z0-9-]@[A-Z0-9-]%', EmbeddedEmail+' ') AS AtIndex,
            LEN(EmbeddedEmail+'|')-1 AS [len], embeddedEmail
            FROM (
                  SELECT @str 
                 ) AS ListOfCompanies (EmbeddedEmail)
    )f
)g; 
```

# php - 如何仅使用 php 为注册用户解析网站部分的信息

> ID：11502378
> 
> 赞同：0
> 
> 时间：2012-07-16T10:21:51.003
> 
> 标签：php, parsing, header

我尝试使用 header() 函数更改我的标题，比如 curl_setopt() 但我的标题没有改变。是否有任何其他操作需要更改我的标题？如果我要解析的网站部分仅适用于注册用户，他们可以使用 auth-data 保存 cookie。我是否需要从 auth-cookie 获得的额外标头信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:23:16.570

您必须随每个请求发送 cookie 信息。这可以通过 curl 轻松完成。

[http://coderscult.com/php/php-curl/2008/05/20/php-curl-cookies-example/](http://coderscult.com/php/php-curl/2008/05/20/php-curl-cookies-example/)

# android - 在android中创建简单的货币转换器汇率实时汇率

> ID：11502379
> 
> 赞同：0
> 
> 时间：2012-07-16T10:21:54.417
> 
> 标签：android, currency

很久以前，我尝试为 android 创建具有来自 web 服务的实时汇率的货币转换器。但我不能，谁能告诉我如何从网络服务接收费率？除此之外，请给我简单的货币转换器汇率实时汇率项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-30T18:33:12.117

本[教程](http://www.appsrox.com/android/tutorials/forexwiz/)不仅介绍了 Android 中的货币转换，还介绍了使用图表的历史汇率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:24:23.187

您可以检查[此](http://code.google.com/p/android-currency-converter/source/browse/trunk/src/com/hykwok/CurrencyConverter/?r=10)以了解超过 15 个国家/地区的货币转换

# jquery - 为什么 .fadeIn('slow') 在这里不起作用？

> ID：11502380
> 
> 赞同：2
> 
> 时间：2012-07-16T10:22:02.217
> 
> 标签：jquery, html, css

我正在尝试使用允许用户循环浏览图像的按钮制作一个简单的画廊。当用户单击一个按钮并且图像发生变化时，我希望它淡入但它似乎没有做任何事情？这是我所拥有的：

```
$(function () {
    $("#homeGalleryControls li a").click(function () {
          var image = $(this).attr("rel");
          $('#galleryImage').fadeIn('slow');
          $('#galleryImage').attr("src", image);
          $('.galleryButton').attr("src", "/Content/Images/Design/btn_default.gif");
          $(this).find('img').attr("src", "/Content/Images/Design/btn_checked.gif");
    });
}); 
```

谁能看到这里有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:30:51.553

问题是**[fadeIn](http://api.jquery.com/fadeIn/)**和 fadeOut 不能直接在 img 元素上工作，所以我添加了一个容器 div。我创建了一个**[JSBin](http://jsbin.com/owejet/48/edit)**（因为 JSFiddle 已关闭）来演示您想要做什么。这是一个没有容器 div 的**[JSBin](http://jsbin.com/owejet/49/edit)**示例，您可以看到它**不起作用**。

的HTML

```
<div id="imageContainer">
  <img id="image" />
</div> 
```

JavaScript 代码

```
$(document).ready(function () {
  var image$ = $("#image"),
      imageContainer$ = $("#imageContainer"),
      parent$ = imageContainer$.parent();

  imageContainer$.fadeOut(0, function () {
    imageContainer$.detach();

    image$.on("load", function () {
      imageContainer$.fadeIn(400);
    });

    image$.attr("src", "http://www.waleoyediran.com/wp-content/uploads/2011/04/stackoverflow.png");

    parent$.append(imageContainer$);
  });
}); 
```

我也改变了顺序。所以首先下载图像，只有当它可用时才会淡入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:55:46.830

让它工作，使用以下内容以防其他人想知道：

```
$(function () {
        $("#homeGalleryControls li a").click(function () {
            var image = $(this).attr("rel");
            $('#galleryImage').fadeOut('slow', function () {
                $('#galleryImage').attr("src", image);
                $('#galleryImage').fadeIn('slow');
            });
            $('.galleryButton').attr("src", "/Content/Images/Design/btn_default.gif");
            $(this).find('img').attr("src", "/Content/Images/Design/btn_checked.gif");
        });
    }); 
```

# c# - 如何学习和显示gridview行包括“？” 数据

> ID：11502381
> 
> 赞同：0
> 
> 时间：2012-07-16T10:22:06.510
> 
> 标签：c#, c#-4.0, gridview

有一个包含 6 列的网格视图。我将数据绑定到某些列。例如，第 3 列和第 5 列有数据。如果在单独的列中有 3 个数据我想在第一列中写 3，我想显示第一列中有 2 个数据。

```
Column1   |   Column2   |   Column3    |   Column4   |   Column5    |   Column6

  2       |             |    stack     |             |   overflow   |

  4       |   sta       |    ck        |     over    |     flow     |

  1       |             |              |             |              |  stcvrflw 
```

我该怎么做？

我填充网格 e.Row.Cells[i].Text = html;

并且 html 变量包括 <table>.... 一些值来自 db。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:28:30.520

填充网格后：

```
 for (int i = 0; i < gv.Rows.Count; i++)
        {
            valueCount=0;
            for (int j = 1; j < gv.Columns.Count; j++)
            {
              if (gv.Rows[i].Cells[j].ToString()!="")
                  valueCount++;
            }
             gv.Rows[i].Cells[0].Text =valueCount.ToString();  
        } 
```

# java - 从 List 中获取字符串值 通过循环显示

> ID：11502389
> 
> 赞同：17
> 
> 时间：2012-07-16T10:22:42.920
> 
> 标签：java, android

我对如何以简单的方式使用这个数组感到困惑。好吧，我已经将 JSON 中的值传递到 List 中，现在我需要使用循环（并且只是循环）来检索它，但我不知道如何。尝试阅读一些答案，但最后我发现自己真的很困惑。我只是想让它变得简单，就像通过让变量 [index] 一样简单来制作一个字符串数组、循环和获取数据，但是我找到的所有答案只会让我感到困惑。请帮忙。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-07-16T10:25:00.020

据我了解你的问题..

从 Java [List](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)类中，您必须使用方法`add(E e)`和`get(int position)`.

```
add(E e) 
```

将指定元素附加到此列表的末尾（可选操作）。

```
get(int index) 
```

返回此列表中指定位置的元素。

**例子：**

```
List<String> myString = new ArrayList<String>();

// How you add your data in string list
myString.add("Test 1");
myString.add("Test 2");
myString.add("Test 3");
myString.add("Test 4");

// retrieving data from string list array in for loop
for (int i=0;i < myString.size();i++)
{
  Log.i("Value of element "+i,myString.get(i));
} 
```

但是通过循环迭代的有效方法

```
for (String value : myString)
{
  Log.i("Value of element ",value);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-16T10:25:39.170

```
public static void main(String[] args) {

    List<String> ls=new ArrayList<String>();
    ls.add("1");
    ls.add("2");
    ls.add("3");
    ls.add("4");

//Then  you can use "foreache" loop to iterate.

    for(String item:ls){
        System.out.println(item);
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:28:24.130

**使用 Java 1.5 附带的 For-Each 循环，它适用于可迭代的类型。**

```
ArrayList<String> data = new ArrayList<String>();
data.add("Vivek");
data.add("Vadodara");
data.add("Engineer");
data.add("Feelance");

for (String s : data){

 System.out.prinln("Data of "+data.indexOf(s)+" "+s);

 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-09T09:30:23.553

如果您正在寻找 while 循环实现，请尝试以下操作。

```
List<String> myString = new ArrayList<String>();

// How you add your data in string list
myString.add("Test 1");
myString.add("Test 2");
myString.add("Test 3");
myString.add("Test 4");

int i = 0;
while (i < myString.size()) {
    System.out.println(myString.get(i));
    i++;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-03T15:18:42.493

pst = con.createStatement(); ResultSet 结果集= pst.executeQuery(query);

```
 String str1 = "<table>";
     int i = 1;
    while(resultSet.next()) {
             str1+= "</tr><td>"+i+"</td>"+
             "<td>"+resultSet.getString("first_name")+"</td>"+
             "<td>"+resultSet.getString("last_name")+"</td>"+
             "<td>"+resultSet.getString("email_id")+"</td>"+
             "<td>"+resultSet.getString("dob") +"</td>"+

             "</tr>";
        i++;

    }
        str1 =str1+"<table>";

    model.addAttribute("list",str1);

    return "userlist";  //Sending to views .jsp 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-03T13:27:32.787

```
List<String> al=new ArrayList<string>();
al.add("One");
al.add("Two");
al.add("Three");

for(String al1:al) //for each construct
{
System.out.println(al1);
} 
```

O/p 将是

```
One
Two
Three 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-18T09:27:44.430

如果您只想用于每个循环，请回答..

```
for (WebElement s : options) {
    int i = options.indexOf(s);
    System.out.println(options.get(i).getText());
} 
```

# php - 从控制器发送参数到视图

> ID：11502390
> 
> 赞同：5
> 
> 时间：2012-07-16T10:22:49.117
> 
> 标签：php, html, codeigniter, parameters, hyperlink

有什么方法可以将数据从控制器发送到视图。我正在做的是用户可以选择链接，并根据链接用户点击相应的数据传递给控制器​​，并从与该链接对应的控制器加载另一个视图。但我不知道该怎么做。我在这里使用篝火是我的控制器代码：-

```
function my_tickets() {
        $username = $this->auth->username();
        $this->load->model('helpdesk_model');
        $result_set = $this->helpdesk_model->my_tickets($username);
        foreach($result_set->result()  as $data ) {
            $title[] = $data->title;
            $category[]=$data->category;
            $priority[]=$data->priority;
            $date[]=$data->date;
            $post_status[]=$data->post_status;
            $userfile_path[] = $data->userfile_path;
        }
        $arraysize=count($title);
        Template::set('arraysize',$arraysize);
        Template::set('title',$title);
        Template::set('category',$category);
        Template::set('priority',$priority);
        Template::set('date',$date);
        Template::set('post_status',$post_status);
        Template::set('username',$this->auth->username());
        Template::set('userfile_path',$userfile_path);
        Template::render();
    }
    function full_post(){
        Template::render();
    }
    } 
```

在我的模型部分：-

```
function my_tickets($username){
        $this->db->select('title,userfile_path,category,priority,date,post_status');
        $this->db->where('username',$username);
        $result = $this->db->get('tbl_tickets');
        return $result;
        } 
```

我的观点是：-

```
<?php 
$arraysize =Template::get('arraysize');
$title[] = Template::get('title');
$category[]=Template::set('category');
$priority[]=Template::set('priority');
$date[]=Template::set('date');
$post_status[]=Template::set('post_status');
$username = Template::set('username');
$userfile_path = Template::set('userfile_path');
?>
<h3>Total Number Of posts :&nbsp; <?php echo $arraysize; ?> </h3>
<h2>Your Posts</h2>
<?php echo "serail. title | category | priority | date of starting post | post status "; ?> 
<?php 
    for ($i=0; $i <$arraysize; $i++) { 
    ?>
    <p> <?php echo ($i+1).". ".$title[$i]." | ".$category[$i]." | ".$priority[$i]." | ".$date[$i]." | ".$post_status[$i]; 
            echo "<a href=\"/helpdesk/full_post\">Click to see </a>";
        ?>
    </p>
    <?php
   } 
   ?> 
```

在我的 full_post 控制器功能中，我想要用户在链接中单击的参数`click to see`。helpdesk 是我的控制器名称。helpdesk_model 是我的模型名称。my_tickets 是我的视图名称..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:14:54.037

我在使用隐藏字段的表单的帮助下执行此操作：- 我稍微更改了我的视图页面，如下所示：-

```
for ($i=0; $i <$arraysize; $i++) { 
    echo "<p>".($i+1).". ".$title[$i]." | ".$category[$i]." | ".$priority[$i]." | ".$date[$i]." | ".$post_status[$i]."</p>";
    echo form_open('/helpdesk/full_post');
    echo form_hidden('path',$userfile_path[$i]);
    echo form_submit('submit', 'click to see');
    echo form_close();
   } 
```

在控制器页面中我正在做：-

```
function full_post(){
        Template::set('path',$this->input->post('path'));
        Template::render();
        } 
```

这是我需要的东西，这是做这件事的好方法吗..？还有其他更好的主意吗..？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:30:43.090

创建一个带有参数的控制器函数，并在其中提供带有参数的链接。

```
echo anchor('controller/functionName/parameter','display text');

function functionName($parameter ='')
{
    //Do something with the parameter here when user click on the displayed text.
} 
```

我不确定，如果这是你想要的，因为这是很容易的事情。

# jsf - JSTL c:forEach 在 Facelets 中不起作用

> ID：11502396
> 
> 赞同：6
> 
> 时间：2012-07-16T10:23:12.470
> 
> 标签：jsf, jstl, facelets

我有一个名为 test.xhtml 的文件，我正在尝试在 Facelets 中使用 foreach 访问哈希映射，但它没有显示键值对我的代码如下。这是如何引起的，我该如何解决？

```
 <html xmlns:c="http://java.sun.com/jstl/core" xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
    <title>JSTL Simple Conditional Execution Example</title>
</head>
<h:body>
    <f:view>
        <c:forEach var="nameMap" items="${specificationAutogege.details}">
            <p> ${nameMap.key}</p>
        </c:forEach>
    </f:view>
</h:body> 
```

是否可以在 Facelets 中使用 JSTL？

HTML 输出呈现如下：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:c="http://java.sun.com/jstl/core">
<head>
    <title>JSTL Simple Conditional Execution Example</title>
</head>
<body>
    <c:forEach var="nameMap" items="{Versnellingsk=A very long text come here, Kleur=ZWART Two, Model=3008, Carrosiere=5 deures MPV, A very long text come here=Date Here, BrandShoert=E, Type=3008 Hybrid4 2.0 HDi, Merk=Peugeot, Bowjaar=2011 Shortgate}" varstatus="true">
        <p/>
    </c:forEach>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T13:43:32.813

```
xmlns:c="http://java.sun.com/jstl/core" 
```

此 JSTL XML 名称空间 URI 特定于 Facelets 1.x。JSF 2.x 附带 Facelets 2.x，它具有不同的 JSTL XML 命名空间 URI：

```
xmlns:c="http://java.sun.com/jsp/jstl/core" 
```

由于 JSF 2.2 引入了新的 XML 命名空间域来删除旧`sun.com`域。

```
xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" 
```

### 也可以看看：

*   [我们的 JSTL 维基页面](https://stackoverflow.com/tags/jstl/info)
*   [与 JSF 2.2 一起使用的 XML 命名空间](https://stackoverflow.com/questions/31068678/which-xml-namespace-to-use-with-jsf-2-2)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-09T16:04:56.290

xhtml 扩展建议您使用 JSF2 而不是 JSF，因此您需要从使用 ${} 表示法切换到 #{} 表示法。

希望有帮助。

# c# - 使用 EWS API 从多个人那里收听日历中的事件

> ID：11502402
> 
> 赞同：1
> 
> 时间：2012-07-16T10:23:43.497
> 
> 标签：c#, api, events, exchangewebservices, exchange-server-2010

只是我希望每次有人添加新约会或对他/她所拥有的内容进行任何更改时都会收到通知。

我知道如何做到这一点的唯一方法是使用 service.SubscribeToStreamingNotifications 但这里的问题是它只侦听服务必须以这种方式喜欢的帐户

```
var service = new ExchangeService(ExchangeVersion.Exchange2010_SP2)
{
    Credentials = new WebCredentials(userName, password)
};

service.SubscribeToStreamingNotifications(new FolderId[]
{
    WellKnownFolderName.Calendar
}, EventType.FreeBusyChanged, EventType.Deleted); 
```

我通过创建一个服务列表解决了这个问题，每个服务都绑定到不同的用户，应用程序应该监听它们中的每一个。

这种方式的问题是我需要拥有每个帐户的密码，我不会听它的事件，这在现实世界中是不可能的。

那么有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:28:25.093

I have solved this problem, by creating a list of services, all the services are a clone of the main ExchangeService, with the same credentials for the admin account, but they are impersonated to the other accounts.

NOTE: **You need to setup the server so it allows impersonation.**

```
private void ImpersonateUsers(ICollection<string> userSmtps)
        {
            if (userSmtps != null)
                if (userSmtps.Count > 0)
                {
                    foreach (var userSmtp in userSmtps)
                    {
                        if (_services.ContainsKey(userSmtp)) continue;
                        var newService = new ExchangeService(ExchangeVersion.Exchange2010_SP2);

                        try
                        {
                            var serviceCred = ((System.Net.NetworkCredential)(((WebCredentials)(_services.First().Value.Credentials)).Credentials));
                            newService.Credentials = new WebCredentials(serviceCred.UserName, serviceCred.Password, serviceCred.Domain);
                            newService.AutodiscoverUrl(serviceCred.UserName + "@" + serviceCred.Domain, RedirectionUrlValidationCallback);
                            newService.ImpersonatedUserId = new ImpersonatedUserId(ConnectingIdType.SmtpAddress, userSmtp);
                        }
                        catch (Exception ex)
                        {
                            System.Diagnostics.Debug.WriteLine(ex.Message);
                        }
                        _services.Add(userSmtp, newService);
                    }
                }
        } 
```

Where userSmtps is a list of the email addresses I want to impersonate and _services is the dictionary of services where the first member is the main service.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T14:45:07.820

您必须为每个用户创建一个服务实例。无法订阅其他用户文件夹。

但是您也可以使用 Pull 和 Push-Subscriptions 来代替 StreamingNotifications。像这样的东西：

```
List<FolderId> folders = new List<FolderId>();
folders.Add(new FolderId(WellKnownFolderName.Calendar));
PullSubscription subscription = = service.SubscribeToPullNotifications(folders, 1440, watermark, EventType.Created, EventType.Deleted, EventType.Modified, EventType.Moved, EventType.NewMail); 
```

一段时间以后....

```
GetEventsResults currentevents = m_subscription .GetEvents(); 
```

# c# - 为什么我必须在每次构建之前删除我的项目的 `bin` 文件夹？

> ID：11502403
> 
> 赞同：1
> 
> 时间：2012-07-16T10:23:44.293
> 
> 标签：c#, visual-studio-2010

我正在开发一个 C# 应用程序，我将它划分为几个项目。最近，当解决方案变大时，我收到不同的错误，例如，`MissingMethodException`甚至更糟糕的是，找不到 DLL 消息。

唯一的解决方案是删除我的 bin 文件夹并再次构建项目。

我想知道这是否是视觉工作室的常见问题，还是我做错了什么？

更新：

我正在开发一个 winforms 解决方案，而一个项目是表单，其他项目是用户控件、数据模型等。

我确实使用 Visual Studio 的添加引用选项在其他项目中引用了所需的项目。

**更新 2**

我怀疑当我有一个新的 .cs 文件来`partial`在任何项目中使用关键字扩展一个类时，会发生这种情况！！！！我有 99% 的把握，我会再检查几次，看看是否真的如此！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:53:20.230

这不是一个真正的常见问题，但视觉工作室有时会发生混乱的事情。

我要做的是检查每个项目的设置和依赖关系，并检查它们以正确的顺序、平台、输出路径等构建的内容。在我们的例子中，有时当解决方案传递给许多开发人员/计算机设置可能会改变.

您还可以做的另一件事是将主项目复制到*新*解决方案并添加其余项目。在类似的情况下，这对我有用。

我希望我给了你一些想法。

# javascript - Javascript算法将图像切片组合成单个图像

> ID：11502406
> 
> 赞同：-2
> 
> 时间：2012-07-16T10:23:58.203
> 
> 标签：javascript, algorithm, canvas

我有图像切片，例如 0_0.jpg、0_1.jpg、1_0.jpg。1_1.jpg

我想将它们组合成一个图像。

我已经有一个画布元素。

什么库或算法可以做到这一点？

更新：完整的场景：

我必须将一些图像加载到 CANVAS 元素中。其中一些是完整的图像，而不是切片。但很少被切成碎片。我想要的是将这些切片图像组合成一个。**有人说使用 table 或 css 或其他什么。那在这里行不通。**我需要一些技术来即时转换它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:36:49.497

为了使用画布执行此操作，您必须知道所有尺寸并绘制 Image 对象。使用 JS 图像对象来预加载您的图像。从那里您可以获得将它们“缝合”在一起所需的所有信息，宽度，高度等......

[http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317](http://www.techrepublic.com/article/preloading-and-the-javascript-image-object/5214317)

```
// Three arguments: the element, destination (x,y) coordinates.
context.drawImage(img_elem, dx, dy);

// Five arguments: the element, destination (x,y) coordinates, and destination 
// width and height (if you want to resize the source image).
context.drawImage(img_elem, dx, dy, dw, dh);

// Nine arguments: the element, source (x,y) coordinates, source width and 
// height (for cropping), destination (x,y) coordinates, and destination width 
// and height (resize).
context.drawImage(img_elem, sx, sy, sw, sh, dx, dy, dw, dh); 
```

这是一个接近您想要的示例：

```
<!DOCTYPE HTML>
<html>
  <head>
    <style>
      body {
        margin: 0px;
        padding: 0px;
      }
      #myCanvas {
        border: 1px solid #9C9898;
      }
    </style>
    <script>
      function loadImages(sources, callback) {
        var images = {};
        var loadedImages = 0;
        var numImages = 0;
        // get num of sources
        for(var src in sources) {
          numImages++;
        }
        for(var src in sources) {
          images[src] = new Image();
          images[src].onload = function() {
            if(++loadedImages >= numImages) {
              callback(images);
            }
          };
          images[src].src = sources[src];
        }
      }

      window.onload = function(images) {
        var canvas = document.getElementById("myCanvas");
        var context = canvas.getContext("2d");

        var sources = {
          darthVader: "http://www.html5canvastutorials.com/demos/assets/darth-vader.jpg",
          yoda: "http://www.html5canvastutorials.com/demos/assets/yoda.jpg"
        };

        loadImages(sources, function(images) {
          context.drawImage(images.darthVader, 100, 30, 200, 137);
          context.drawImage(images.yoda, 350, 55, 93, 104);
        });
      };

    </script>
  </head>
  <body>
    <canvas id="myCanvas" width="578" height="200"></canvas>
  </body>
</html> 
```

就个人而言，我会简单地使用一个零填充和零边距的表格。国际海事组织容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:26:34.917

我不知道`<canvas>`，但我只是创建一堆`<img>`s 并将它们绝对定位，以便它们组合在一起。这将很简单，并且适用于所有浏览器，不像`<canvas>`.

# c - c中赋值语句的条件表达式行为

> ID：11502407
> 
> 赞同：2
> 
> 时间：2012-07-16T10:23:58.927
> 
> 标签：c

在下面的第一个程序中没有错误。但是对于第二个程序有一个错误。为什么呢？

第一个程序：

```
#include<stdio.h>
void main()
{
int k=8;
int m=7;
k<m?k=k+1:m+1;
printf("%d",k);
} 
```

第二个程序：

```
#include<stdio.h>
void main()
{
int k=8;
int m=7;
k<m?k=k+1:m=m+1;
printf("%d",k);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T10:37:32.033

条件运算符的优先级高于赋值运算符。您需要额外的括号才能获得所需的优先级。

```
k < m? k = k + 1 : m = m + 1; 
```

被评估为

```
((k < m) ? (k = k + 1) : m) = m + 1; 
```

添加括号以获得正确的优先级：

```
(k < m) ? (k = k + 1) : (m = m + 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:32:26.973

它没有错误。两个程序都给出了正确的输出 8。

# date - 在 MDX (SSAS) 中创建日期

> ID：11502408
> 
> 赞同：2
> 
> 时间：2012-07-16T10:24:11.567
> 
> 标签：date, ssas, mdx

如何在 MDX 中为给定日期创建日期（“4/6/2001 16:23:45”）。

函数 now() 返回当前日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T12:51:38.613

您可以使用[CDate](http://msdn.microsoft.com/en-us/library/s2dy91zy%28v=vs.90%29.aspx)函数。

# php - PHP stream_context_create 与代理

> ID：11502416
> 
> 赞同：1
> 
> 时间：2012-07-16T10:24:30.410
> 
> 标签：php, http, proxy

我目前正在开发一个 Web 应用程序，它使用位于不同服务器上的 XML 接口，我必须通过代理访问该接口。

所以我尝试在`stream_context_create`数组中设置代理，但它似乎不起作用。

```
$set = array(
    'http' => array(
        'method' => 'GET',
        'header' => sprintf(
            'Proxy-Authorization: Basic %s',
            base64_encode(Constants::XML_AUTH)
        ),
        'protocol_version' => '1.1',
        'proxy' => '89.122.180.178:46565'
    )
);
$stream = stream_context_create($set); 
```

我不太确定我做错了什么。如果我注释掉`proxy`密钥，我会得到应有的`403 Forbidden`响应。如果我在`proxy`密钥中发表评论，我会收到`400 Bad Request`回复。

我不太确定我做错了什么。你能帮我吗？我以前从未使用 PHP 通过代理进行过通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-01T09:25:04.600

我的猜测是代理声明缺少协议。必须指定一个[URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier)（根据[doc](https://www.php.net/manual/de/context.http.php)），其中包含协议（方案）。

所以这可以工作：`'proxy' => 'tcp://89.122.180.178:46565'`. 可能需要删除`'protocol_version'`，因为 tcp 可能不需要。

那对你有用吗？（或者你已经解决了吗？... ;-)

# javascript - Magento 如何将 JS 跟踪代码添加到特定类别页面和结帐页面

> ID：11502417
> 
> 赞同：0
> 
> 时间：2012-07-16T10:24:35.443
> 
> 标签：javascript, magento

我们正在使用 Floodlight，它包含需要在各个页面上添加的 JS 跟踪代码。我需要在主页、结帐和感谢页面上添加一段 JS 代码。但最大的问题是，如何在分类页面中添加自定义 JS 代码？

这些页面是动态的，没有为每个单独的页面添加单个模板。我在管理员的“管理类别”中也找不到如何添加它的任何地方。

有人有任何线索吗？还是我需要添加一个模块来允许我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:39:18.260

您可以通过相应的布局句柄将新`core/template`块添加到类别页面，这将根据给定的内容显示自定义 JS 代码，然后使用选项卡中的`Custom Layout Update`类别字段为其分配每个类别的值`Custom Design`

# web-services - JAX-WS 端点实现类不得实现 `finalize()` 方法

> ID：11502419
> 
> 赞同：5
> 
> 时间：2012-07-16T10:24:37.380
> 
> 标签：web-services, jax-ws

在查看 JAX_WS 端点的要求时，我遇到了这个问题，

```
JAX-WS endpoint implementation class must not implement `finalize()` method. 
```

但我没有找到更好的答案来解释这一点。为什么我们不应该实现 finalize() 方法，如果我们实现会发生什么？

有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T12:36:47.133

正如您所解释的，JAX-WS 端点不应该实现 finalize 方法（检查[这个](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/2.0/tutorial/doc/JAXWS3.html)）。

**为什么？**

JVM 不保证 finalize 方法的执行。理论上，对象被垃圾回收时会调用finalize方法，但是什么时候会被回收呢？没有办法知道：有时它会立即被收集，也许它会一直活着，直到 JVM 停止（这意味着永远不会）。其实这和 GC 算法有关，每个 JVM 都有自己的 implementation(s)，而且每个都有很大的不同，因为这个算法的行为没有规范。

但真正的问题是一些java程序员不知道这一点，他们使用finalize方法作为“析构函数”。一个例子：你有一个在它的构造函数中创建一个 JDBC 连接的类。因此，为了让它变得*更好*，您决定在“析构函数”（最终确定）中释放此连接。后果：你不知道连接什么时候会关闭，或者永远不会关闭！！！

这就是为什么实现 finalize 方法对于任何 java 类都被认为是一种不好的做法，并且在某些框架中被禁止以避免误解（即 JAX-WS）。

恕我直言，这个方法应该从`Object`API 中删除，但它仍然存在......也许是为了向后兼容或我无法想象的有用用法；-)

检查[此](https://stackoverflow.com/questions/158174/why-would-you-ever-implement-finalize)以了解有关最终实施的更多意见。

# java - 在 Java 中为 POS 创建自定义收据

> ID：11502423
> 
> 赞同：0
> 
> 时间：2012-07-16T10:24:43.843
> 
> 标签：java, xml

我开发了一个销售点系统。我的问题是最后我现在需要创建带有公司徽标和其他内容的自定义收据。我需要添加销售数据并打印收据。我坚信 XML 可以用于此，尽管我不知道如何。任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:49:41.583

如果您有 XML 格式的数据，我推荐[Apache FOP 。](https://xmlgraphics.apache.org/fop/index.html)使用 FOP，您可以轻松更改样式，并且可以打印为 PDF、html 页面...

做这些事情的非常有用的工具！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:33:41.440

你很幸运...我为我妻子的生意做了同样的事情。我使用内置打印框架来完成这项工作。这样做的类相当大，所以这里是亮点：

创建一个扩展 import java.awt.print.Printable 的类

创建一个 Graphics2D 对象并在其上打印您想要的所有内容，然后简单地覆盖 print() 方法，使其看起来像这样：

```
@Override
public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {

    if (prevPage == pageIndex) {
        linesRendered = prevRendered;
    }
    prevPage = pageIndex;
    prevRendered = linesRendered;

    if (linesRendered >= lines.size())  {
        logger.fine("No further pages to send to printer.");
        return NO_SUCH_PAGE;
    } else {
        // render here
        // ...
        return PAGE_EXISTS;
    }
} 
```

检查是必要的，因为 Java 倾向于为同一页面多次调用该方法。然后打印你，只需要做：

```
public void printInvoice() {
    PrinterJob printJob = PrinterJob.getPrinterJob();

    if (printJob.printDialog()) {
        try {
            InvoicePrinterHelper iph =
                    new InvoicePrinterHelper(...);
            printJob.setPrintable(iph);
            printJob.print();
        } catch (PrinterException pe) {
            System.out.println("Error printing: " + pe);
        }
    }
} 
```

我拿出了很多来节省空间，但这会起作用。我花了很长时间才把它弄好，但至少你不必像我一样挖掘。谷歌“可打印”界面，你会得到许多其他的例子。

我建议您使用 Graphics2D 并使用抗锯齿，否则字体看起来很糟糕。

# objective-c - UIWebView 不会隐藏键盘

> ID：11502429
> 
> 赞同：2
> 
> 时间：2012-07-16T10:24:53.297
> 
> 标签：objective-c, cocoa-touch

我需要在页面开始加载后立即隐藏键盘。我已经尝试过所有常见的建议方法，例如[这里](https://stackoverflow.com/questions/2563201/how-to-dismiss-keyboard-on-a-uiwebview)

以下方法对键盘没有影响

```
[webView endEditing:YES];
[webView stringByEvaluatingJavaScriptFromString:@"document.activeElement.blur();"];
[webView stringByEvaluatingJavaScriptFromString:@"window.blur();"]; 
```

我调用它们`-webView:shouldStartLoadWithRequest:navigationType:`

我究竟做错了什么？有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T18:29:52.420

感谢您的回答。我写这个方法

```
- (BOOL)disablesAutomaticKeyboardDismissal {
  return NO;
}
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [webView endEditing:YES];
} 
```

为我工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T18:30:35.293

问题是`UIViewController`返回`YES`这里是为了`UIModalPresentationFormSheet`。

```
- (BOOL)disablesAutomaticKeyboardDismissal {
  return NO;
} 
```

看看那个[答案](https://stackoverflow.com/questions/2762251/how-to-hide-the-ipad-keyboard-from-a-modal-view-controller)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T13:04:48.037

尝试

```
webView.delegate = self; 
```

并在`-webViewDidFinishLoad:`委托方法内

```
[webView resignFirstResponder]; 
```

# wcf - 在 WCF 中的远程服务器上写入文件时出错

> ID：11502431
> 
> 赞同：0
> 
> 时间：2012-07-16T10:24:56.533
> 
> 标签：wcf, silverlight, file

我正在为我的 silverlight 应用程序创建一个 WCF（C#，VS2010），我正在尝试在我的远程服务器（存在 WCF）上创建一个文件，但是我收到一个未知错误，我只是收到“找不到服务器”错误在 WCF 函数完成异常消息中，我使用以下代码在我的远程服务器上创建一个文件（我使用 VDS，所以我认为我没有权限问题，我在我的服务器上使用远程桌面）

```
 using (StreamWriter outfile =
            new StreamWriter("mytest.htm"))
            {
                outfile.Write(body);
            } 
```

这里出了什么问题？我可能有权限问题吗？我在本地系统上运行我的 WCF 并成功创建文件，但上传到远程服务器时没有运气

我应该使用 Server.MapPath 来提供我的文件地址吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-31T15:58:29.990

请使用这个：

```
 System.Net.FileWebRequest request = (System.Net.FileWebRequest)System.Net.FileWebRequest.CreateDefault(new Uri("\\\\remotelocation\\MyText.txt"));
        request.Method = "POST";

        Stream requestStream = request.GetRequestStream();  
        byte [] fileContents = Encoding.UTF8.GetBytes("test_content"); 
        requestStream.Write(fileContents, 0, fileContents.Length);  

        requestStream.Close(); 
```

# oop - 多态性和鸭子类型有什么区别？

> ID：11502433
> 
> 赞同：36
> 
> 时间：2012-07-16T10:25:02.017
> 
> 标签：oop, polymorphism, duck-typing

我对这两个术语有点困惑，这就是我所知道的：

多态性是不同类型的对象由一个公共接口处理的能力。而鸭子类型，是一种动态类型，它允许不同类型的对象响应相同的方法。

据我了解，多态更多的是创建一个可以跨不同类共享的接口。鸭子类型是关于松散类型的，只要在消息的接收者上找到方法，就可以调用它。

它是否正确？我对这两个很困惑，他们似乎有关系，但我不知道他们的关系是什么。提前非常感谢！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-07-16T10:29:00.353

**多态性**（在面向对象编程的上下文中）意味着子类可以覆盖基类的方法。这意味着一个类的方法可以在子类中做不同的事情。例如：一个类`Animal`可以有一个方法`talk()`，子类`Dog`和`Cat`of`Animal`可以让方法`talk()`发出不同的声音。

**鸭子类型**意味着代码将简单地接受具有特定方法的任何对象。假设我们有以下代码：`animal.quack()`. 如果给定的对象`animal`有我们想要调用的方法，那么我们很好（不需要额外的类型要求）。是否`animal`实际上是一种`Duck`或另一种也碰巧会嘎嘎的动物并不重要。这就是它被称为鸭子类型的原因：如果它看起来像一只鸭子（例如，它有一个被调用的方法，`quack()`那么我们可以像该对象是一只鸭子一样行事）。

那么这些有关系吗？它们只是编程语言可能具有的单独功能。有些编程语言具有多态性但没有鸭子类型（例如 Java）。还有一些语言具有多态性和鸭子类型（例如 Python）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-12-13T06:32:02.983

这是 Python 中的多态性示例。

```
class Animal:
    def __init__(self, name):    # Constructor of the class
        self.name = name
    def talk(self):              # Abstract method, defined by convention only
        raise NotImplementedError("Subclass must implement abstract method")

class Cat(Animal):
    def talk(self):
        return 'Meow!'

class Dog(Animal):
    def talk(self):
        return 'Woof! Woof!'

animals = [Cat('Missy'),
           Cat('Mr. Mistoffelees'),
           Dog('Lassie')]

for animal in animals:
    print animal
    print animal.name + ': ' + animal.talk() 
```

这是 Python 中的鸭子打字示例。

```
class Duck:
    def quack(self):
        print("Quaaaaaack!")
    def feathers(self):
        print("The duck has white and gray feathers.")
    def name(self):
        print("ITS A DUCK NO NAME")

class Person:
    def quack(self):
        print("The person imitates a duck.")
    def feathers(self):
        print("The person takes a feather from the ground and shows it.")
    def name(self):
        print("John Smith")

def in_the_forest(duck):
    duck.quack()
    duck.feathers()
    duck.name()

def game():
    for element in [ Duck() , Person()]:
        in_the_forest(element)

game() 
```

*   在多态中，我们看到子类 (`Cat`和`Dog`) 继承自父类 ( `Animal`) 并覆盖方法 Talk。
*   在鸭子类型的情况下，我们不创建子类，而是使用具有相同名称但功能不同的方法创建新类。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-08-20T02:44:25.173

**简短的回答：**

Duck 类型是实现多态性的一种方式。另一种方法是使用静态类型。

**长答案：**

这里涉及两个不同的概念，打字和编程技术。

鸭打字是打字的一种。键入意味着*当*传递的对象不是预期的对象时何时抛出错误。Duck typing 是一种在程序运行时抛出错误并且被调用的方法不可用的类型。静态类型带有编译时检查，所以如果类型信息不匹配，它会在编译代码时抛出错误。那就是打字。

多态性是一种编程技术，您可以在其中允许多种类型的对象履行某些职责。您可以通过使用基类型来表示所有子类类型来做到这一点。您可以使用鸭子类型来表示具有所需方法的所有不同类型。您可以使用接口来表示实现该接口的所有类型。

有答案说多态是继承，这是不正确的。虽然您可以使用继承来创建多态行为，通常这就是您所做的，但这不是多态的意义所在。

一方面，您不需要继承来具有如上所述的多态性。

其次，术语“多态性”在依赖于抽象的客户端代码的上下文中更有意义，而不是实现代码。仅仅因为你有一个超类和一些从它继承并覆盖一些方法的其他类并不意味着它是多态性，要创建多态性，你必须以多态方式编写客户端代码来使用这些类。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-03T10:22:17.343

两种类型的多态性

1.  方法重载（编译时多态）。
2.  方法覆盖（运行时多态性）。

方法重载：相同的函数名和不同的数据类型称为方法重载

例子 ：

```
 int addTwovalues(int a, int b)
  { return (a+b)}

  float addTwovalues(float a, float b)
  { return (a+b)}

  Method overriding :- same function name and same data type but different Class
     is known as       Method overriding.

  class a
 {
  virtual int addtwovalues()
   {  // to do  }
  }
 class b:a
 {
     override int addtwovalues()
   {  // to do  }

  }

  a obj=new a();
  obj.addtwovalues();

  b objb=new a();
  objb.addtwovalues();  //run time Polymorphism 
```

# visual-c++ - 列出目录中的文件

> ID：11502441
> 
> 赞同：0
> 
> 时间：2012-07-16T10:25:46.120
> 
> 标签：visual-c++

我在 C++ 中创建了一个 Windows 窗体，单击按钮会打开一个用于选择文件夹的对话框。

现在我想做的是获取该目录中的文件列表，以便我可以一一处理它们。

我用谷歌搜索了很多方法，发现了很多方法，其中包括外部库（例如 boost 和 diren.h）。我不想使用外部资源，但我可以使用默认资源。

我读过关于 FindFirstFile 和 FindNextFile 的文章，但无法让这种组合发挥作用。

你能帮忙吗？

非常感谢，伊丹。

这是更新的代码：

```
HANDLE hFind;
WIN32_FIND_DATA FindFileData;
FolderBrowserDialog^ folderBrowserDialog1 = gcnew FolderBrowserDialog;

if (folderBrowserDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK)
{
        String ^ selected = folderBrowserDialog1->SelectedPath;

        selected += "\\*";

        char* stringPointer = (char*) Marshal::StringToHGlobalAnsi(selected).ToPointer();

        hFind = FindFirstFile((LPCWSTR)stringPointer, &FindFileData);
        while(hFind != INVALID_HANDLE_VALUE)
        {
            printf("Found file: %s\r\n", FindFileData.cFileName);
            if(FindNextFile(hFind, &FindFileData) == FALSE)
                break;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:50:08.210

您显然是为 UNICODE（宽字符）编译的，因为您需要为 FindFirstFile 的 lpFileName 参数转换 newStr。但是由于您传递了一个 ANSI 字符串，因此您可能不会得到有用的结果。你没有写，你期望找到什么。

在 FindFirstFile 之前的代码中，您手动将 SelectedPath 值转换为 ANSI 字符。无论如何，当您需要一个宽字符字符串时，这没有任何意义。从使用 StringToHGlobalUni 方法选择的字符串中获取 LPCWSTR。这看起来像这样（未经测试）：

```
LPCWSTR stringPointer = Marshal::StringToHGlobalAnsi(selected).ToPointer(); 

hFind = FindFirstFile(stringPointer, &FindFileData); 
```

一般来说：不要使用强制转换，除非您需要调整设计不佳的界面。仅当您确切知道自己在做什么时才使用它。

此外，您不会检查 FindFirstFile 的 hFind 结果。如果您传递一个指向错误字符串格式的指针，它将是 INVALID_HANDLE_VALUE。

# tfs - TFS2008 对应 TFS2010

> ID：11502445
> 
> 赞同：2
> 
> 时间：2012-07-16T10:25:51.543
> 
> 标签：tfs, tfsbuild

我曾经调用***BuildStore.asmx***从 TFS 2008 获取构建信息，例如工作项、构建步骤、变更集等。

但是最近，我们的项目转移到了 TFS 2010。并且 BuildStore.asmx 已被弃用。TFS 2010 提供了一个新的对象模型来提供这些信息。

所以，为了尽量减少代码改动，想知道TFS2010中的对应。感谢您的任何提示。

我在 TFS 中找到了一些关于构建 API 的信息，例如：

[http://blogs.msdn.com/b/buckh/archive/2006/09/14/getbuilduri-getbuilddetails.aspx](http://blogs.msdn.com/b/buckh/archive/2006/09/14/getbuilduri-getbuilddetails.aspx)

但它们主要是关于 TFS2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:48:25.407

您可以使用直接服务呼叫。您要查找的对应项应位于“http://TfsName:Port/tfs/TeamCollectionName/Build/v3.0/BuildService.asmx”下。

另一种可能更有效的方法是针对 TFS-SDK 编写代码，它应该从 TFS 版本“生存”到 TFS 版本。有很多关于材料的资源，S. Raiten 的[这篇文章似乎是一个很好的起点。](http://blogs.microsoft.co.il/blogs/shair/archive/2011/01/11/tfs-api-part-33-get-build-definitions-and-build-details.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T06:27:13.003

我刚刚找到了一些有用的材料：

[http://social.msdn.microsoft.com/Forums/en-AU/tfsgeneral/thread/92766815-c09b-422b-91fc-5e745e3aaa21](http://social.msdn.microsoft.com/Forums/en-AU/tfsgeneral/thread/92766815-c09b-422b-91fc-5e745e3aaa21)

# php - Blueimp jQuery 文件上传与数据库集成

> ID：11502449
> 
> 赞同：2
> 
> 时间：2012-07-16T10:26:02.127
> 
> 标签：php, jquery, database, file-upload, blueimp

此插件在页面加载时读取**blueimproot/server/php/files上的图像文件。**我需要从数据库中读取记录，并用我的自定义结构替换“下载”HTML 结构。我想显示目录产品，通过此插件上传/删除图像会影响哪些项目。

到目前为止，我已经这样做了：

*   我更改`public function get() { ... }`了**blueimproot/server/php/upload.class.php**以从数据库中检索记录。此函数返回 json 对象。

    ```
    public function get() {
        /* default code of Blueimp
        $file_name = isset($_REQUEST['file']) ?
        basename(stripslashes($_REQUEST['file'])) : null;
        if ($file_name) {
            $info = $this->get_file_object($file_name);
        } else {
            $info = $this->get_file_objects();
        }

        header('Content-type: application/json');
        echo json_encode($info);
        */

        include_once('../../../../connection.php');

        $id_cat = $_REQUEST['catid'];
        $query = "SELECT id, name, price, img_path FROM products WHERE id_cat = $id_cat ORDER BY id";
        $prods = mysql_query($query);

        $prod_arr = array();
        while($prod = mysql_fetch_assoc($prods)) {
            $prod_arr[] = $prod;
        }

        header('Content-type: application/json');
        echo json_encode($info);
        } 
    ```

*   我发现该函数是从**blueimproot/server/php**中的*index.php*调用的：

     **```
    switch ($_SERVER['REQUEST_METHOD']) {
        ...
        case 'GET':
            $upload_handler->get();
            break;
        ... 
    ```

    }** 

 **我不知道返回的 json 对象在哪里处理以显示给 UI。已经 2 天了，仍然无法跟踪该功能流程。请帮忙。谢谢。

原始在线演示： [http ://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

原始插件下载： [https ://github.com/blueimp/jQuery-File-Upload/downloads](https://github.com/blueimp/jQuery-File-Upload/downloads)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-23T21:54:23.290

我的建议是在 Firebug 中打开[Network 选项卡](http://getfirebug.com/network)并观察任何 GET 请求`server/php/index.php`。如果它发生在特定事件之后，那么您将更好地了解应该查看的位置。

我确实查看了源文件，发现唯一的 GET 请求在[main.js](https://github.com/blueimp/jQuery-File-Upload/blob/master/js/main.js#L67-75)

```
$('#fileupload').each(function () {
  var that = this;
  $.getJSON(this.action, function (result) {
    if (result && result.length) {
      $(that).fileupload('option', 'done')
        .call(that, null, {result: result});
        }
    });
  });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-28T18:20:35.257

```
 public function get() {
    /*
    $file_name = isset($_REQUEST['file']) ?
        basename(stripslashes($_REQUEST['file'])) : null;
    if ($file_name) {
        $info = $this->get_file_object($file_name);
    } else {
        $info = $this->get_file_objects();
    }
    header('Content-type: application/json');
    echo json_encode($info);
    */
        $id_cat = $_REQUEST['catid'];
        $query = "SELECT id, name, price, img_path FROM products WHERE id_cat = $id_cat ORDER BY id";
        $prods = mysql_query($query);

        $prod_arr = array();
        while($prod = mysql_fetch_assoc($prods)) {
            //$prod_arr[] = $prod;

            $file = new stdClass();
            $file->name = "";// here image name goes i do not find image name in your select query
            $file->size = filesize($prod["img_path"]);// should be complete path
            $file->url =  $prod["img_path"];// should be relative path (http://localhost/images/234.jpg)
            $file->thumbnail_url = $prod["img_path"]; // thumbnail path
            $this->delete_type = "DELETE";
            $this->delete_url = ""; //here delete url you can delete image from database 
            array_push($prod_arr,$file);
        }
        header('Content-type: application/json');
    echo json_encode($prod_arr);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-03T15:31:59.010

按照这个 WIKI： [https ://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases](https://github.com/blueimp/jQuery-File-Upload/wiki/Working-with-databases)

我设置要插入数据库的上传，然后我更改了我的 GET 函数，如下所示：

```
 public function get() {
                $uploads = $this->query_db();
                header('Content-type: application/json');
                echo json_encode($uploads);
            } 
```

我的 query_db 函数如下：

```
 public function query_db() {
    $uploads_array = array();
    $select_result = $this->query("SELECT * FROM `uploads` ORDER BY `file_name`") or die(mysql_error());
    while($query_results = mysql_fetch_object($select_result))
        {   
            $file = new stdClass();
            $file->id = $query_results->id;
            $file->name = $query_results->file_name;
            $file->size = $query_results->file_size;
            $file->type = $query_results->file_type;
            $file->url = "http://files.domain.com/".$query_results->file_name;
            $file->thumbnail_url = "http://thumbnails.domain.com/".$query_results->file_name;
            $file->delete_url = "";
            $file->delete_type = "DELETE";
            array_push($uploads_array,$file);
        }
    return $uploads_array;
} 
```**

# c# - ResourceDictionary 中的自定义 TabItem

> ID：11502459
> 
> 赞同：2
> 
> 时间：2012-07-16T10:27:00.517
> 
> 标签：c#, silverlight, xaml, custom-controls, resourcedictionary

我在 ResourceDictionary 中创建了一个 TabItem 并在我的 UserControl 中使用它，但定义的内容不会显示，为什么以及如何解决这个问题？

资源字典：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
    xmlns:toolkit="http://schemas.microsoft.com/winfx/2006/xaml/presentation/toolkit">
    <ControlTemplate x:Key="T1" TargetType="sdk:TabItem">
        <sdk:TabItem>
            <sdk:TabItem.Header>
                <StackPanel Orientation="Horizontal">
                    <sdk:Label Content="{TemplateBinding Header}"/>
                    <Button Content="X" Margin="15,0,0,0"/>
                </StackPanel>
            </sdk:TabItem.Header>

            <toolkit:DockPanel MinWidth="600">
                <Grid toolkit:DockPanel.Dock="Left">
                    <sdk:Label Grid.Row="2" Grid.Column="0" Content="Pic:"/>
                    ...
                </Grid>
            </toolkit:DockPanel>

        </sdk:TabItem>
    </ControlTemplate>
</ResourceDictionary> 
```

用户控件：

```
<UserControl x:Class="PortView" ....>
    <UserControl.Resources>
                <ResourceDictionary Source="PortfolioTemplateDictionary.xaml" />
    </UserControl.Resources>

    <Grid>
        <sdk:TabItem Template="{StaticResource T1}" Header="Page 2"/>
    </Grid  
    ...
</UserControl> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:04:38.363

我现在使用了本文中解释的方法：[TabItem in a separate XAML](https://stackoverflow.com/questions/1590031/tabitem-in-a-separate-xaml)

```
<UserControl x:Class="WpfApplication19.Tab1Data"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         >
    <Grid>
        <TextBlock Text="Tab Data" />
    </Grid>
</UserControl>

<TabControl>
    <TabItem Header="Tab 1">
        <tabData:Tab1Data />
    </TabItem>
</TabControl> 
```

# asp.net-mvc - 使用结合了状态模式的域模型

> ID：11502463
> 
> 赞同：7
> 
> 时间：2012-07-16T10:27:35.597
> 
> 标签：asp.net-mvc, nhibernate, design-patterns, domain-driven-design, ravendb

有一个与**改变实体状态有关的**任务。而且我很困惑认为它是否应该是一种基于事件的方法，它涉及类似的东西，`CQRS`或者我可以使用 a`State pattern`并将所有逻辑留在实体中。

我发现一篇文章显示了使用状态模式的域模型（或其中的一部分）：http: [//www.prowareness.com/blog/?p=1448](http://www.prowareness.com/blog/?p=1448)

订购系统非常接近我的领域模型。所以这个例子很棒。但是我仍然想知道考虑到 MVC 模式是否是一个好习惯，是否可以用 来实现`RavenDB/NHibernate`？

**编辑：重新思考问题**

让我们按照这个例子：

首先，这是一个名为的域实体`Idea`：

```
[Serializable]
public class Idea : AbstractEntity<Guid> {
    private static IStateFactory stateFactory;
    private AbstractState state = new InitiatedState();

    [Required, StringLength(150)]
    public String Title { get; set; }
    [Required]
    public String ProblemContext { get; set; }
    public DateTime CreatedOn { get; set; }
    public Guid InitiatorId { get; set; }
    [Required]
    public Decimal InvestmentAmount { get; set; }

    public Boolean IsInitiated {
        get { return this.state.IsInitiated; }
    }
    public Boolean IsRejected {
        get { return this.state.IsRejected; }
    }
    public Boolean IsUnderInitialAssessment {
        get { return this.state.IsUnderInitialAssessment; }
    }
    public Boolean IsConfirmedForImplementation {
        get { return this.state.IsConfirmedForImplementation; }
    }
} 
```

鉴于`AbstractState`：

```
public abstract class AbstractState {
    public virtual Boolean IsInitiated {
        get { return true; }
    }
    public virtual Boolean IsRejected {
        get { return false; }
    }
    public virtual Boolean IsUnderInitialAssessment {
        get { return false; }
    }
    public virtual Boolean IsConfirmedForImplementation {
        get { return false; }
    }
} 
```

状态工厂接口定义如下：

```
public interface IStateFactory {
    AbstractState GetState(String state);
} 
```

最后的想法是放方法：

```
public void AlterState(String stateString) {
    this.state = stateFactory.GetState(stateString);
} 
```

1.  设计好吗？有什么缺点和优点？
2.  可扩展性如何？从我的角度来看，可以扩展/实现自己的状态工厂。但是，如果它`AbstractState`本身发生了变化，那么一切都会相应地发生变化。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T22:52:05.397

您可能对 Nicholas Blumhardt 的分层状态机 Stateless 感兴趣。在此处阅读我的[SO 答案，](https://stackoverflow.com/questions/1966950/workflow-design-dilemma-state-machine-yes-or-no/1980034#1980034)了解它的功能。这是[我博客中的一个简单的工作流处理器示例](http://activeengine.wordpress.com/2011/04/02/simple-workflows-with-approvaflow-and-stateless/)，我目前将它与[管道和过滤器模式](http://activeengine.wordpress.com/2011/05/17/approvaflow-using-the-pipe-and-filter-pattern-to-build-a-workflow-processor/)一起使用，它工作得非常好。

**编辑**

如果您有兴趣，我还有一个使用 Stateless 和 RavenDB 的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T00:11:17.803

CQRS 和状态模式是完全不同的东西。状态模式提供了一种为单个对象实现一组状态或状态的方法，而 CQRS 是一种架构风格。MVC 与状态模式和 CQRS 无关，是表示层的一种架构风格。您可以将状态模式与 NHibernate 结合使用，但是映射将很重要，您必须实现自定义 IUserType 以根据字段映射到适当的状态类。RavenDB 与 NHibernate 非常不同，使用它进行映射会更容易一些，但它是一个完全不同的数据库系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-18T21:55:54.240

如果您使用 sql 支持管理工具，使用 RavenDB 前端运行搜索，CQRS 就是这样。在这个虚构的 CQRS 场景中，您需要将数据从 Sql 推送到 RavenDB。

# jquery - jquery背景高度变化

> ID：11502464
> 
> 赞同：1
> 
> 时间：2012-07-16T10:27:36.837
> 
> 标签：jquery, html

我是 jquery 的新手，所以我正在从 w3schools.com 学习 JQuery。下面的代码来自 w3sch

```
 <!DOCTYPE html>
<html>

    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $("button").click(function () {
                    $("#div1").height("200px");
                });
            });
        </script>
    </head>

    <body>
        <div id="div1" style="background:yellow;height:100px;width:100px">HELLO</div>
        <div style="background:yellow;height:100px;width:100px">W3SCHOOLS</div>
        <button>Click me</button>
    </body> 
```

我将它保存为 some_name.htm。当我在浏览器中打开它时，如下所示：

![在此处输入图像描述](../Images/72bc0ca2b4ba78c5fe1d97148407a4c8.png)

但是当我单击**单击我**时，大小没有变化。

根据代码和流程，高度应该增加

任何人都知道如何让这个工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:30:24.200

因为您的工作区中没有 jquery.js。您需要下载它并在包含它时提供正确的路径 -

如果您不想下载，请改用它 -

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

或者

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

我尝试运行您的代码，它正在工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:16:22.350

问题是缺少 jquery，正如 cyclotrojan 所指出的那样，我还建议您养成使用本地回退的习惯以及包括此处所示的远程版本，[http://jsbin.com/ adofej/2](http://jsbin.com/adofej/2)如果您觉得这不符合回答的条件，我的代表将无法发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:30:06.133

你可以使用 jQuery [css()](http://api.jquery.com/css/)方法

```
$("button").click(function(){
  $("#div1").css('height':'200px');
}); 
```

对于多个 css 声明：

```
$("button").click(function(){
  $("#div1").css('height':'200px','width':'100px','background-color':'#f00');
}); 
```

# java - 我在哪里可以处理 MVC Java 中的异常？

> ID：11502467
> 
> 赞同：1
> 
> 时间：2012-07-16T10:27:56.353
> 
> 标签：java, swing, model-view-controller, exception, exception-handling

我正在编写 GUI 应用程序，用于在公司的会计软件和电子商务系统（网店）之间交换和同步数据。

我想使用 MVC（模型-视图-控制器）设计模式创建它。

我的应用程序的一部分是使用会计软件覆盖电子商务库存余额的功能。

我有

1.  视图 - JDialog 呈现覆盖进度。
2.  控制器 - 负责数据库和视图之间的交互
3.  模型 - 来自 dbs 和应用程序设置的数据

当我对数据库进行排队时，我必须捕获一个异常（ClassNotFound 和 SQL）。

**我应该在哪里创建 try {} catch {} 块？在视图中？或在控制器中？**
我想展示一些带有错误消息的 JOptionPane 并完成一些应用程序状态。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:31:44.773

您只提到了已检查的异常。

1.  您不需要捕获异常。您可以选择声明它。
2.  如果你不想声明它，你可以将它**包装**在一个`RuntimeException`.
3.  模型中的所有异常都应该在代码中的一个地方（所谓的*异常屏障*）处理，并以统一的方式呈现给控制器。控制器的主要兴趣是操作是否成功，它对失败的有趣细节不感兴趣。
4.  不建议在不使用 Spring 之类的东西进行声明性事务、连接池等的情况下编写 DAO 层（用于 DB 通信）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:39:00.320

这是一个棘手的问题，将归结为您如何构建代码。通常，如果可以，让模型以视图可以处理的方式抛出异常。这使您的模型与视图分离。

在某些情况下（例如使用 JTables 或 JLists）这种事情是不可能的。在这些情况下，如果可能，单独加载“模型数据”（处理任何错误），然后将其传递给控制（JTable/JList）模型。

但是同样，您可能会遇到这样的情况：您发现自己使用标准模型（例如表模型）并且您正在从单独的模型（例如结果集等（仅一个示例）中读取数据 - 因为性能改进或其他）模型将在哪里呈现尝试处理异常的任务。

在这种情况下，我只能建议您为模型提供某种能够将错误报告回 UI 的错误处理程序/侦听器。如果可以，我们提供一个接口，这将允许您在需要时解耦视图/模型。

只是一些想法

# php - 查找具有纬度和经度的记录

> ID：11502469
> 
> 赞同：0
> 
> 时间：2012-07-16T10:28:18.567
> 
> 标签：php, mysql, location

> **可能重复：**
> [找到两个纬度/经度点之间距离的最快方法](https://stackoverflow.com/questions/1006654/fastest-distance-lookup-given-latitude-longitude)

我有位置表，其中包含所有位置及其纬度和经度值。我正在获取特定的位置。登录。和半径。现在，我想找到这个半径内和给定纬度的所有记录。并且很长。价值观。我正在使用以下查询。但我不确定它是否给了我正确的结果。

从给定的 lat 和 long 我发现 lat.min 和 max 为 -

```
$lng_min = $longitude - $radius / abs(cos(deg2rad($latitude)) * 69);
$lng_max = $longitude + $radius / abs(cos(deg2rad($latitude)) * 69);
$lat_min = $latitude - ($radius / 69);
$lat_max = $latitude + ($radius / 69); 
```

然后使用以下查询 -

```
SELECT * FROM  merchant_branches,locations 
where locations."coorX" BETWEEN $lng_min AND $lng_max 
AND  
locations."coorY" BETWEEN $lat_min AND $lat_max 
and merchant_branches.location_id = locations.id 
```

其中 location id 是 Mercer_brach 表中的外键。

我对我得到的结果感到困惑。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:32:04.803

你必须使用这样的东西来获得离给定位置最近的结果

```
$query = sprintf(
         "SELECT foo,
                  6371 * ACOS( Cos(RADIANS(lat)) * COS(RADIANS(%f))
                      * COS(RADIANS(%f) - RADIANS(lng)) + SIN(RADIANS(lat))
                      * SIN(RADIANS(%f)) ) * 1000 AS distance
            FROM `%s`
        ORDER BY distance",
        $lat, $lag, $lng, $table
    ); 
```

您必须设置`$lat`,`$lng`并`$table`根据您的表结构并可能对结果设置限制。

你可以在这里得到详细的解释[Geo Distance Search with MySQL](http://www.scribd.com/doc/2569355/Geo-Distance-Search-with-MySQL)。

# android - Java 反编译器 jd-gui 不工作

> ID：11502473
> 
> 赞同：0
> 
> 时间：2012-07-16T10:28:27.270
> 
> 标签：android

我正在使用[SO question](https://stackoverflow.com/questions/3593420/android-getting-source-code-from-an-apk-file)提取 apk 文件的源代码。
我遇到了 Java 反编译器 jd-gui 的问题，每当我尝试在 Java jd-gui 中打开代码时，它就会停止工作。
是否有任何其他可选的反编译器可用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:47:18.217

如果你有一个 apk 并且你想要源代码。这是过程：

首先，您需要以这种方式使用 dex2jar 的 apk 中的 jar：

> ./dex2jar.sh 名称.apk

从以下位置下载 dex2jar：[http](http://code.google.com/p/dex2jar/) ://code.google.com/p/dex2jar/ 获得 jar 后，您可以使用 jad 通过以下命令提取源代码：

> ./jad -o -r -sjava -dsrc 路径/到/* */* .class

从以下网址下载 jad：[http ://www.varaneckas.com/jad/](http://www.varaneckas.com/jad/)

请注意，如果 apk 使用 proguard，则代码将被滥用 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:53:49.933

这很正常，我也发生过。问题是因为广告。

创建一个仅包含没有广告的类的新 Jar 文件，并使用命令行将它们一起 jar

```
jar cf jar-file input-file(s) 
```

您可以将整个目录替换为一个 inpot 文件，它会为您递归地压缩它。现在使用 jd-gui 并打开新的 jar 文件，它应该可以工作了。

# c# - 在 silverlight 5 中录制时的音频电平

> ID：11502476
> 
> 赞同：0
> 
> 时间：2012-07-16T10:28:31.907
> 
> 标签：c#, silverlight, audio, naudio, speech

嗨，我正在使用**silverlight 5**`PCM audio`在 Web 应用程序中录制，我想知道是否有任何方法可以显示音频级别，就像我们在.**`NAUDIO`**

 **我无法使用`Naudio with silverlight`. 这是为了让用户知道他的声音实际上正在被系统捕获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:12:40.210

您将使用相同的技术。假设您以 16 位记录，每 2 个字节应转换为一个短字节（您可以使用 BitConverter.ToInt16 类），然后在短时间内（例如 100 毫秒）查找最大样本值，并使用它来设置音量表控件上的值。对于音量计，样式化的进度条通常是一个好方法。有关示例，请参阅我的[博客文章。](http://mark-dot-net.blogspot.co.uk/2009/09/styling-wpf-volume-meter.html)**

# android - 是否可以在不使用 phonegap 的情况下开发 html5 应用程序？

> ID：11502477
> 
> 赞同：1
> 
> 时间：2012-07-16T10:28:35.587
> 
> 标签：android, iphone, html, cordova

我想在不使用 phonegap 的情况下为 android 和 iphone 开发一个 html5 应用程序。可能吗？？如果是，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:36:10.623

我假设您想创建一个原生 HTML5 应用程序（当然您可以使用 HTML5 创建移动 Web 应用程序，而无需使用 PhoneGap）

Phonegap 的其他替代品是：

1.  Senchatouch [http://www.sencha.com/products/touch/]
2.  钛 [http://developer.appcelerator.com/blog/2012/05/comparing-titanium-and-phonegap.html]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:38:20.603

是的，您可以，但请记住，Phonegap 允许您访问设备的硬件（指南针、相机、GPS），这在常规网络应用程序中是不可能的。Phonegap 让您可以创建一个带有 HTML5 UI 的本机应用程序，而不是“只是”一个 Web 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:36:45.240

是的。两个平台都支持标准的 Web 应用程序。

如果您想编写使用 HTML5 技术的本机应用程序，则需要将它们包装在本机代码中。Phonegap 只是为您提供了一些执行此操作的代码，如果您愿意，您可以编写自己的版本（或使用不同的预写库）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:39:31.353

[Senchatouch](http://www.sencha.com/products/touch/)，实际上需要Phonegap将其转换为Android和IOS等原生应用程序

您可以使用使用jQueryMobile的强大技术，该技术长期以来一直处于技术领域。-[剑道用户界面](http://www.kendoui.com/)

# android - “意外停止”尝试10000次修复

> ID：11502484
> 
> 赞同：0
> 
> 时间：2012-07-16T10:29:11.640
> 
> 标签：android, listview

这是我的主要 java 文件 MainActivity.java

```
package com.myprojects.schecklist;
import android.app.ListActivity;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class MainActivity extends ListActivity {

    private ListView listView;
    private String[] items = { "Activity1", "Activity2" };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        listView = (ListView) findViewById(R.id.mylist);
        listView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, items));

    }
} 
```

这里是activity_main.xml

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

AndroidManifest.xml

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.myprojects.schecklist"
    android:versionCode="1"
    android:versionName="1.0" >

   <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

至少我尝试了 4-5 种方法来解决这个问题。最后我尝试了**Project>Clear**并且它也没有修复。我尝试了一切，至少我正在处理它大约 3 天。怎么了？我要疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:34:59.703

而不是扩展`ListActivity`尝试扩展`Activity`或更改您的

```
<ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

至

```
 <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:32:07.563

改变：

```
new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, items) 
```

和：

```
 new ArrayAdapter<String>(this,
    android.R.layout.simple_list_item_1, android.R.id.text1, items) 
```

# c# - 由 DataTemplate 填充的 ListBox 不滚动 WPF

> ID：11502485
> 
> 赞同：0
> 
> 时间：2012-07-16T10:29:19.620
> 
> 标签：c#, wpf, xml, listbox, scroll

我通过以下代码填充列表框：

```
<ListBox Height="188" HorizontalAlignment="Left" Margin="277,0,0,0" Name="listBoxAtributeValue" VerticalAlignment="Top" Width="191" MaxHeight="188" MaxWidth="191">
        <ItemsControl ItemsSource="{Binding Path=.}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <StackPanel.Background>
                            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                <GradientStop Color="Black" Offset="0" />
                                <GradientStop Color="#FFFFA029" Offset="1" />
                            </LinearGradientBrush>
                        </StackPanel.Background>
                            <Label Content="{Binding lblText}" />
                            <TextBox Text="{Binding txtBoxContent}" />
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>
    </ListBox> 
```

但我无法滚动它。这是列表框的图像：[这里](http://i48.tinypic.com/fuyja1.jpg)

我该如何解决？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:31:53.343

你不需要你的`ItemsControl`内部`ListBox`。A`ListBox`已经是`ItemsControl`.

# wpf - 数据绑定到多种类型的菜单对象

> ID：11502488
> 
> 赞同：0
> 
> 时间：2012-07-16T10:29:32.453
> 
> 标签：wpf, data-binding, menu, telerik, hierarchicaldatatemplate

我正在开发一个 WPF 项目，以下是我的 Menu 数据模型的代码

```
class NavigationMenu
    {
        public abstract class MenuBase
        {
            public MenuBase()
            {
            }

            public MenuBase(string title)
            {
                MenuTitle = title;
            }

            public Guid MenuId { get; set; }
            public string MenuTitle { get; set; }
            public string ImageResourceName { get; set; }
        }

        public class MenuItem : MenuBase
        {
            public MenuItem()
            {

            }

            public MenuItem(string title)
                : base(title)
            {

            }

            public string View { get; set; }
        }

        public class MenuCategory : MenuBase
        {
            public MenuCategory()
            {
                MenuItems = new ObservableCollection<MenuItem>();
            }

            public MenuCategory(string title)
                : base(title)
            {
                MenuItems = new ObservableCollection<MenuItem>();
            }

            public MenuCategory(string CategoryTitle, ObservableCollection<MenuItem> pMenuItems)
                : base(CategoryTitle)
            {
                this.MenuItems = pMenuItems;
            }

            public ObservableCollection<MenuItem> MenuItems { get; set; }
        }

        public class MainMenuItem : MenuBase
        {
            public MainMenuItem()
            {
                MenuCategories = new ObservableCollection<MenuCategory>();
            }

            public MainMenuItem(string title)
                : base(title)
            {
                MenuCategories = new ObservableCollection<MenuCategory>();
            }
            public ObservableCollection<MenuCategory> MenuCategories { get; set; }
        }
    } 
```

XAML`RadMenu`如下，

```
<ui:RadMenu Name="radMenu1" ItemsSource="{Binding MenuBar}" Height="76">

        <ui:RadMenu.ItemTemplate>

            <HierarchicalDataTemplate ItemsSource="{Binding Path=MenuCategories}">
                <StackPanel Height="Auto">
                    <Image MaxWidth="32" MaxHeight="32" Source="{Binding Path=ImageResourceName}" />
                    <TextBlock HorizontalAlignment="Center"> 
                        <TextBlock.Text>
                            <MultiBinding  Converter="{StaticResource myConv}">
                                <Binding Path="MenuId"></Binding>
                                <Binding Path="MenuTitle"></Binding>
                             </MultiBinding>
                        </TextBlock.Text>
                   </TextBlock>
                </StackPanel>
            </HierarchicalDataTemplate>
        </ui:RadMenu.ItemTemplate>
      </ui:RadMenu> 
```

我遇到的问题是，MenuCategories 显示成功，但`MenuItems`内部`MenuCategory`没有显示。很明显，我没有绑定`MenuItems`但是`MenuCategories`. 但我不确定如何`MenuItems`在上面绑定`DataTemplate`？任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:58:39.630

将模型类绑定到数据模板

```
 <HierarchicalDataTemplate DataType="{x:Type NavigationMenu.MenuCategory }" ItemsSource="{Binding Path=MenuItems }">
            <StackPanel Height="Auto">
                <Image MaxWidth="32" MaxHeight="32" Source="{Binding Path=ImageResourceName}" />
                <TextBlock HorizontalAlignment="Center"> 
                    <TextBlock.Text>
                        <MultiBinding  Converter="{StaticResource myConv}">
                            <Binding Path="MenuId"></Binding>
                            <Binding Path="MenuTitle"></Binding>
                         </MultiBinding>
                    </TextBlock.Text>
               </TextBlock>
            </StackPanel>
    </HierarchicalDataTemplate>

         <HierarchicalDataTemplate DataType="{x:Type NavigationMenu.MenuItem }">
            <StackPanel Height="Auto">
                //....
                <TextBlock HorizontalAlignment="Center" Text="{Binding View}"/> 
                //....
            </StackPanel>
    </HierarchicalDataTemplate> 
```

# iphone - 我们如何使用企业帐户分发 iOS 版本？

> ID：11502491
> 
> 赞同：0
> 
> 时间：2012-07-16T10:29:41.290
> 
> 标签：iphone, ios, testflight

我们如何分发使用企业帐户构建的 iOS 构建？有没有可能通过 testflight 帐户分发？任何帮助都非常感谢。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T11:20:58.597

其他选项是通过电子邮件或将其放在网络上以供下载（建议您需要一个可以登录的网站来访问它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T09:48:54.913

有几种不同的方法可以做到这一点。获得应用程序的 .ipa 文件后，您可以：

1.  通过 iTunes 分发，如果您的员工可以将他们的 iOS 设备与他们的笔记本电脑同步 ( [Apple Docs](https://help.apple.com/iosdeployment-apps/#app43ad7eed) )
2.  通过使用 iOS 配置实用程序，尽管这意味着您必须实际拥有该设备（[Apple 文档](https://help.apple.com/iosdeployment-apps/#app43ad6ebd)）
3.  无线 (iOS 4+)，使用应用商店。您可以通过 TestFlight 执行此操作，但 Enterprise 协议的许可限制不适用于这种部署。您需要创建和保护自己的应用商店（就像我为我的雇主所做的那样）或使用第三方服务。有一些好的谷歌。[这里](https://help.apple.com/iosdeployment-apps/#app43ad871e)有很多关于如何进行部署的文档
4.  [MobileIron](http://www.mobileiron.com/)等一些 MDM 供应商提供应用商店。有些甚至允许您将应用程序推送到企业设备（iOS 5+）上，而无需任何人工干预。

# android - 安卓蓝牙文件发送

> ID：11502497
> 
> 赞同：21
> 
> 时间：2012-07-16T10:30:02.867
> 
> 标签：android, file, bluetooth, transfer

我正在尝试通过 android 设备中的蓝牙发送文件。我已经完成了发现、连接并制作了一个蓝牙套接字。问题是当我在蓝牙套接字的输出流中写入字节数组时，接收端没有收到任何东西，尽管它接受正在发送的东西。

这就是我正在做的事情（蓝牙适配器不好）

请指教。

```
try
    {
        BluetoothDevice dev = bad.getRemoteDevice(a);
        bad.cancelDiscovery();

        dev.createRfcommSocketToServiceRecord(new UUID(1111, 2222));
        Method m = dev.getClass().getMethod("createRfcommSocket", new Class[] {int.class});
        bs = (BluetoothSocket) m.invoke(dev, Integer.valueOf(1));
        bs.connect();
        tmpOut = bs.getOutputStream();
    }catch(Exception e)
    {

    }

    File f = new File(filename);

    byte b[] = new byte[(int) f.length()];
    try
    {
        FileInputStream fileInputStream = new FileInputStream(f);
        fileInputStream.read(b);
    }catch(IOException e)
    {
        Log.d(TAG, "Error converting file");
        Log.d(TAG, e.getMessage());
    }

    try {
        tmpOut.write(b);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T17:26:44.863

我正在使用以下代码连接到远程蓝牙设备中的串行服务，它对我来说工作正常。只需确保其他设备（可以是移动设备或 PC）具有用于通过蓝牙进行串行通信的服务器套接字（请参阅下面的服务器端代码）

**客户端：**

```
UUID serialUUID = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
BluetoothDevice btDevice = btAdapter.getRemoteDevice(BTAddress); // Get the BTAddress after scan
BluetoothSocket btSocket = btDevice.createRfcommSocketToServiceRecord(SERIAL_UUID);
btSocket.connect();
InputStream iStream = btSocket.getInputStream();
OutputStream oStream = btSocket.getOutputStream(); 
```

**服务器端：**

```
UUID serialUUID = new UUID("1101", true);
String serviceURL = "btspp://localhost:" + serialUUID
        + ";name=Android BT Server;authorize=false;authenticate=false";
StreamConnectionNotifier connectionNotifier = (StreamConnectionNotifier) Connector
                        .open(serviceURL);
// Blocking method will wait for client to connect
StreamConnection connection = connectionNotifier.acceptAndOpen();

RemoteDevice remoteDevice = RemoteDevice.getRemoteDevice(connection);
InputStream btInput = connection.openInputStream();
OutputStream btOutput = connection.openOutputStream(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T06:27:35.987

为什么不使用标准的api调用而不是通过反射调用，例如：

```
BluetoothSocket socket =  destination
                              .createRfcommSocketToServiceRecord(new UUID(...)) ; 
```

你的 catch 块也是空的。你确定套接字没有任何异常连接吗？如果由于某种原因连接失败，Connect 将抛出 IOException。看到这个[链接](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T21:59:46.687

这可能是因为 dev 和 bs 在使用 tmpout 之前超出了范围，因为它们是在您的 try/catch 块中声明的。

# php - 在不刷新页面和动画链接消失的情况下更新 mySQL 记录

> ID：11502502
> 
> 赞同：1
> 
> 时间：2012-07-16T10:30:15.693
> 
> 标签：php, jquery, mysql, ajax

我正在努力解决我的问题。我已经创建了代码并在 PHP 中运行良好，但我现在想将其演变为最终用户的更好的工作解决方案。

我有一组链接来确认或拒绝某项操作。一旦用户单击“确认”/“拒绝”，我希望这可以使用 AJAX 将值保存到 db，然后`li`使用 jQuery 制作动画。

目前我使用了 php，它重定向到 URL。任何帮助/指导将不胜感激。

这是我的代码：

**链接**

```
 <?php    

            $friend_unconfirmed_from_them = mysql_query('
            SELECT * from wallfriends 
            where mem_id_to ='.$USER->id.' AND confirm = 0
            '); //unconfirmed friends to logged in user ($USER->id)

        while ($friendrequest = mysql_fetch_array($friend_unconfirmed_from_them, MYSQL_ASSOC)) { 

        $senders_name = mysql_query('
            SELECT firstname, lastname from mdl_user 
            where id = '.$friendrequest['sender'].'
            '); //get unconfirmed friends name

        while ($sender = mysql_fetch_array($senders_name, MYSQL_ASSOC)) { 
            ?>

        <li><?php echo $sender['firstname'].'&nbsp;'.$sender['lastname']; 
            }?>            
        <a href="confirmfriend.php?userid=<?php echo $friendrequest['sender']; ?>">Confirm Link</a>
        &nbsp;<a href="removefriend.php?userid=<?php echo $friendrequest['sender']; ?>">Deny Link</a></li> 
//echo each friend in li with confirm deny links
            <?php } ?>

        </ul> 
```

**确认朋友.php**

```
$userid = optional_param('userid', 0, PARAM_INT);

$connection = mysql_connect("localhost", "root", "on10n") or die ("Unable to connect!");   
mysql_select_db("fe") or die ("Unable to select database!");    
$query = "UPDATE wallfriends SET confirm = 1 WHERE mem_id_to = '$USER->id' AND mem_id_from = '$userid'";    

$result = mysql_query($query) or die ("Error in query: $query. ".mysql_error()); 
if (!$result){
    echo "There were errors :<br>". mysql_error();
} 
else{ 
redirect($siteUrl.'/profile.php?userid='.$userid.'');
die;  
} 
```

**拒绝朋友.php**

```
$userid = optional_param('userid', 0, PARAM_INT);

$connection = mysql_connect("localhost", "root", "on10n") or die ("Unable to connect!");   
mysql_select_db("fe") or die ("Unable to select database!");    

$query = "DELETE FROM wallfriends 
WHERE (mem_id_from = '$USER->id' OR mem_id_from = '$userid') 
AND (mem_id_to = '$USER->id' OR mem_id_to = '$userid') 
";    

$result = mysql_query($query) or die ("Error in query: $query. ".mysql_error()); 

if (!$result){
    echo "There were errors :<br>". mysql_error();
} 
else{ 
redirect($siteUrl.'/profile.php?userid='.$userid.'');
die;  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:36:45.200

您应该阅读 jQuery [AJAX](http://api.jquery.com/category/ajax/)函数。您可能对[$.ajax](http://api.jquery.com/jQuery.ajax/)和/或 $.post 函数感兴趣。所有这些函数都为您提供了成功/失败回调，您可以在其中[隐藏](http://api.jquery.com/hide/)（或[淡出](http://api.jquery.com/fadeOut/)）所需的元素。

基本上，您只需从页面中获取您想要的数据并将其传递给 jQuery 函数。由于您的 PHP 函数已经在做它们应该做的事情，一旦您熟悉了 jQuery 功能，这应该是一个小任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:50:28.277

您可以为此使用 jQuery-Ajax。

例如

**用户界面 HTML 代码**

```
<li><?php echo $sender['firstname'].'&nbsp;'.$sender['lastname']; 
            }?>            
        <a id="confirm" data-userid="<?php echo $friendrequest['sender']; ?>">Confirm Link</a>
        &nbsp;<a id="deny" data-userid="<?php echo $friendrequest['sender']; ?>">Deny Link</a></li> 
```

**jQuery-Ajax**

```
 $(document).ready(function(){
         $("#confirm").click(function(e){

        $.ajax("confirm.php?userid=" + $(this).attr("data-userid"), {
                   complete: function() {
                      $(this).parent().fadeOut();
                   }
        });

        e.preventDefault();
        });
         $("#deny").click(function(e){
        $.ajax("deny.php?userid=" + $(this).attr("data-userid"), {
                   complete: function() {
                      $(this).parent().fadeOut();
                   }
        });
    e.preventDefault();
        });
}); 
```

我没有测试代码。希望它会给一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T10:43:41.617

你没有显示任何 javascript，并且锚点会将页面扔到 confirmfriend.php/removefriend.php。

你也有多个嵌套的锚标签（记得用 关闭`</a>`）

为了达到预期的效果，我会这样做：

```
<li>
  <a href="javascript:void(0);" class="confirm friendaction"
      data-userid="<?php echo $friendrequest['sender'];>">Confirm</a>
</li><li>
  <a href="javascript:void(0);" class="remove friendaction"
      data-userid="<?php echo $friendrequest['sender'];>">Remove</a>
</li> 
```

随后是一个将 onclick 挂钩到锚点的脚本，发送 AJAX 请求。

```
<script>
   $('.friendaction').click(function() {
       var id = this.getAttribute('data-userid'),
           url = this.className.match("confirm") 
              ? "confirmfriend.php" 
              : "removefriend.php", 
           liReference = $(this).parent();
       $.ajax(url + "?userid=" + id, {
           complete: function() {
              $(liReference).fadeOut();
           }
       });
   });
</script> 
```

# javascript - 用于查看更大图像的下一个和上一个的键盘事件

> ID：11502503
> 
> 赞同：0
> 
> 时间：2012-07-16T10:30:19.870
> 
> 标签：javascript, jquery, html

我需要键盘事件来查看下一个和上一个更大的图像。请帮帮我。当我点击鼠标时，我正在查看图像，像这样，如果我也点击左右箭头键，我必须查看图像。

**HTML**

```
<div id="gallery">
    <div id="overlay"></div>    
    <div class="slidePanel">
      <div id="panel">
            <img id="largeImage" src="" />  
        </div>       
    <div class="slideBtn">
         <a href="#" id="next">
<img src="images/left_arrow.png" /></a> 
             <a href="#" id="prev"><img src="images/right_arrow.png" /></a> 
    </div>
    <div id="close"><a href="#">Close</a></div> 
    </div> 
        <div id="thumbs" align="center">
            <img src="images/image_01_thumb.jpg" alt="1st image description" />
            <img src="images/image_02_thumb.jpg" alt="2nd image description" />
            <img src="images/image_03_thumb.jpg" alt="3rd image description" />
            <img src="images/image_04_thumb.jpg" alt="4th image description" />
        </div>
    </div> 
```

**JS**

```
function loadSlide(nSlide)
    {
        $('#thumbs img.current').removeClass('current');
        $(nSlide).addClass('current');

        var src = $(nSlide).attr('src').replace('thumb', 'large');
        $("#largeImage").fadeOut(function() 
        {
            this.src = src;
            $(this).fadeIn();

        }).center();
    $("#overlay").css({"opacity" : "0.7"})
                            .fadeIn("slow");    
    $('#close a, #close').fadeIn();
    $('#prev, #next').css('display', 'block');

    }

    $('#next').click(function()
    {   
        var cSlide = $('#thumbs img.current');
        if($(cSlide).next('img').length > 0)
            var nSlide = $(cSlide).next('img');
        else
            var nSlide = $('#thumbs img:first');

        loadSlide(nSlide);
    });

    $('#prev').click(function()
    {
        var cSlide = $('#thumbs img.current');  
        if($(cSlide).prev('img').length > 0)
            var nSlide = $(cSlide).prev('img');
        else
            var nSlide = $('#thumbs img:last');

        loadSlide(nSlide);
    });

    $('#thumbs img').click(function(){
        loadSlide(this);
    });

        $("#panel").click(function(){
            $(this).fadeOut("slow");
            $("#overlay").fadeOut("slow");
        });

    $('#close a').click(function(){

        $(this).fadeOut('slow');
        $('#overlay, #panel, #prev, #next, #largeImage').fadeOut('slow');
    $("#thumbs").css('display', 'block');

    });

    $('#thumbs img').click(function(){
    $("#thumbs").css('display', 'none');

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:37:16.777

这应该适合您的需要，只需将其插入，或者如果您需要在其他地方使用左右箭头键，请使用`$('#gallery')`而不是`$(document)`

```
$(document).keydown(function (e) {
  if (event.keyCode == 37) {
    $('#next').click(); //on left arrow, click next (since your next is on the left)
  } else if (event.keyCode == 39) {
    $('#prev').click(); //on right arrow, click prev
  }
}); 
```

编辑：如果您需要任何其他 keyCodes，请使用此网站： http: [//www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes](http://www.cambiaresearch.com/articles/15/javascript-char-codes-key-codes)

# c# - 绘制形状的最快方法（线、FilledRectangle、矩形等）

> ID：11502505
> 
> 赞同：0
> 
> 时间：2012-07-16T10:30:30.957
> 
> 标签：c#, compact-framework, .net-cf-3.5

我正在使用 C# 3.0 使用 .Net Compact Framework 3.5 开发一个项目。

我有一个用户控件，它每 15 毫秒接收一次数据，我必须绘制形状

如用户控件上的线条、矩形、填充矩形。

我想知道绘制这些形状的最快方法是什么，如果有一些可以提高性能和速度的方法，我也愿意使用 P/Invoke 方法。

我正在使用的代码如下：

```
 private void DrawThreeFunctions(Graphics g)
                {
                    // drawing back functions
                    if (DisplayFunction1.DrawOrder == DrawOrder.Back && GraphDataArray.Length > 0)
                    {
                        DrawFunction(g, DisplayFunction1, GraphDataArray[0]);
                    }
                    if (DisplayFunction2.DrawOrder == DrawOrder.Back && GraphDataArray.Length > 1)
                    {
                        DrawFunction(g, DisplayFunction2, GraphDataArray[1]);
                    }
                    if (DisplayFunction3.DrawOrder == DrawOrder.Back && GraphDataArray.Length > 2)
                    {
                        DrawFunction(g, DisplayFunction3, GraphDataArray[2]);
                    }
                    // drawing middle functions
                    if (DisplayFunction1.DrawOrder == DrawOrder.Middle && GraphDataArray.Length > 0)
                    {
                        DrawFunction(g, DisplayFunction1, GraphDataArray[0]);
                    }
                    if (DisplayFunction2.DrawOrder == DrawOrder.Middle && GraphDataArray.Length > 1)
                    {
                        DrawFunction(g, DisplayFunction2, GraphDataArray[1]);
                    }
                    if (DisplayFunction3.DrawOrder == DrawOrder.Middle && GraphDataArray.Length > 2)
                    {
                        DrawFunction(g, DisplayFunction3, GraphDataArray[2]);
                    }
                    // drawing front functions
                    if (DisplayFunction1.DrawOrder == DrawOrder.Front && GraphDataArray.Length > 0)
                    {
                        DrawFunction(g, DisplayFunction1, GraphDataArray[0]);
                    }
                    if (DisplayFunction2.DrawOrder == DrawOrder.Front && GraphDataArray.Length > 1)
                    {
                        DrawFunction(g, DisplayFunction2, GraphDataArray[1]);
                    }
                    if (DisplayFunction3.DrawOrder == DrawOrder.Front && GraphDataArray.Length > 2)
                    {
                        DrawFunction(g, DisplayFunction3, GraphDataArray[2]);
                    }
                } 

    private void DrawFunction(Graphics g, DisplayFunction function, int[] data)
            {
                Color color = Utils.GetColor(function.Color);
                switch (function.Shape)
                {
                    case FunctionShape.StepLine:
                        DrawStepLines(g, data, color);
                        break;
                    case FunctionShape.Rectangle:
                        DrawFilledRectangles(g, data, color);
                        break;
                    case FunctionShape.FramedRectangle:
                        DrawFramedRectangles(g, data, color);
                        break;
                    case FunctionShape.Line:
                        DrawLines(g, data, color);
                        break;
                    default:
                        break;
                }
            }

            #region Drawing methods
            // drawing lines
            private void DrawLines(Graphics g, int[] lineData, Color lineColor)
            {
                BarPositions = new List<int>();
                List<Point> linePoints = new List<Point>();
                int lineYPos = -1;
                int lineXPos = FirstBarDrawPosition;
                Point point = Point.Empty;

                using (Pen linePen = new Pen(lineColor, 2.0f))
                {
                    for (int i = FirstVisibleItemIndex, k = 0; i < _indexLimit; i++, k++)
                    {
                        if (base.GetBarEndPosition(k) > Width)
                            break;

                        lineXPos = GetTickPosition(k);
                        BarPositions.Add(lineXPos);

                        if (i < lineData.Length)
                            lineYPos = lineData[i];
                        else
                            continue;

                        point.X = lineXPos;
                        point.Y = lineYPos;

                        linePoints.Add(point);
                    }

                    if (linePoints.Any())
                    {
                        g.DrawLines(linePen, linePoints.ToArray());
                    }
                }
            }
            // drawing framed rectangles
            private void DrawFramedRectangles(Graphics g, int[] functionValues, Color functionColor)
            {
                BarPositions = new List<int>();

                int barXPos = FirstBarDrawPosition;
                Rectangle barRect = Rectangle.Empty;
                barRect.Width = WidthOfBar - 1;
                int barYPos = -1;

                using (Pen barPen = new Pen(functionColor))
                {
                    for (int i = FirstVisibleItemIndex, k = 0; i < _indexLimit; i++, k++)
                    {
                        if (base.GetBarEndPosition(k) > Width)
                            return;

                        BarPositions.Add(GetTickPosition(k));

                        if (i < functionValues.Length)
                            barYPos = functionValues[i];
                        else
                            continue;

                        //barRect = new Rectangle();
                        barRect.X = barXPos;
                        barRect.Y = barYPos;
                        //barRect.Width = WidthOfBar - 1;
                        barRect.Height = Height - barYPos;
                        g.DrawRectangle(barPen, barRect);
                        barXPos += (WidthOfBar + DistanceBetweenBars);
                    }
                }
            }
            // drawing filled rectangles
            private void DrawFilledRectangles(Graphics g, int[] functionValues, Color functionColor)
            {
                BarPositions = new List<int>();

                int barXPos = FirstBarDrawPosition;
                Rectangle barRect = Rectangle.Empty;
                barRect.Width = WidthOfBar;
                int barYPos = -1;

                using (SolidBrush barBrush = new SolidBrush(functionColor))
                {
                    for (int i = FirstVisibleItemIndex, k = 0; i < _indexLimit; i++, k++)
                    {
                        if (base.GetBarEndPosition(k) > Width)
                            return;

                        BarPositions.Add(GetTickPosition(k));

                        if (i < functionValues.Length)
                            barYPos = functionValues[i];
                        else
                            continue;

                        //barRect = new Rectangle();
                        barRect.X = barXPos;
                        barRect.Y = barYPos;
                        //barRect.Width = WidthOfBar;
                        barRect.Height = Height - barYPos;
                        g.FillRectangle(barBrush, barRect);
                        barXPos += (WidthOfBar + DistanceBetweenBars);
                    }
                }
            }

private void DrawStepLines(Graphics g, int[] lineData, Color lineColor)
        {
            BarPositions = new List<int>();
            int lineYPos = -1;
            int barXPos = FirstBarDrawPosition;

            using (Pen linePen = new Pen(lineColor, 2.0f))
            {
                for (int i = FirstVisibleItemIndex, k = 0; i < _indexLimit; i++, k++)
                {
                    if (base.GetBarEndPosition(k) > Width)
                        return;

                    BarPositions.Add(GetTickPosition(k));

                    if (i < lineData.Length)
                        lineYPos = lineData[i];
                    else
                        continue;

                    // draw third function line
                    //lineHeight = lineData[i];

                    g.DrawLine(linePen, barXPos, lineYPos, barXPos + WidthOfBar - 1, lineYPos);

                    barXPos += (WidthOfBar + DistanceBetweenBars);
                }
            }
        } 
```

我正在使用绘图顺序和形状，如阶梯线、线、带框的矩形（只是矩形）和矩形是填充矩形。

由于性能关键应用程序，我想知道绘制这些形状的最快方法。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:00:32.777

你熟悉双缓冲吗？保留一个屏幕外图像缓冲区以在更改进入时进行写入。然后覆盖 OnPaint 以在一个语句中对整个图像进行 blit。此外，使用无操作覆盖 OnPaintBackground 以摆脱在每次绘制时将控件清除为其背景色的默认行为。

* * *

像山一样古老，但[这里](http://msdn.microsoft.com/en-us/library/aa446518.aspx)有一篇关于在 Compact Framework 中使用 GDI 的最佳实践的文章。

# python - 使用另一个索引数组的 Numpy 数组操作

> ID：11502510
> 
> 赞同：1
> 
> 时间：2012-07-16T10:30:47.670
> 
> 标签：python, multidimensional-array, numpy

我想在三个数组上使用 numpy 进行多维数组操作，其中一个是索引数组，例如：

```
a = numpy.arange(20).reshape((5, 4))
# a = [[ 0  1  2  3]  [ 4  5  6  7]  [ 8  9 10 11]  [12 13 14 15]  [16 17 18 19]]

b = numpy.arange(24).reshape(((3, 2, 4)))
# b = [[[ 0  1  2  3]   [ 4  5  6  7]]   [[ 8  9 10 11]   [12 13 14 15]]  [[16 17 18 19]    [20 21 22 23]]]

c = numpy.array([0,0,1,1,2])
# c = [0 0 1 1 2] 
```

现在，我想要的是：

```
d = a * b[&] + b[&&] 
```

**其中 & 是b**的第二维的第二个元素（例如 [4 5 6 7]），&& 是与**b的第一维的第****i**个项目相关的第二维的第一个元素（例如 [0 1 2 3]） ，其中**i**来自数组**c （例如 c[0]=0 表示数组****b**的第一维的第一个元素）。**d**与 a具有相同**的**维度。

 ******编辑：上面例子的答案是： `# d = [[0 6 14 24] [16 26 38 52] [104 126 150 176] [152 178 206 236] [336 374 414 456]]`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:18:18.887

```
>>> a * b[c,1,:] + b[c,0,:]
array([[  0,   6,  14,  24],
       [ 16,  26,  38,  52],
       [104, 126, 150, 176],
       [152, 178, 206, 236],
       [336, 374, 414, 456]]) 
```******

# jquery - JQuery 验证复选框并显示反馈

> ID：11502513
> 
> 赞同：0
> 
> 时间：2012-07-16T10:30:55.917
> 
> 标签：jquery, asp.net-mvc-3, checkbox, jquery-validate

我有以下示例代码，其中包含两个复选框。当用户点击提交按钮时，我有一些 JQuery 代码来确定已选择了多少复选框。

```
<html>
<head>
<title>Test</title>

<script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>

<script>

    $(function () {
        $('form').submit(function () {

            var fields = $("input[name='group']").serializeArray();
            if (fields.length == 0) {
                //alert('nothing selected');
                $("myText").html("Selected");
            }
            else {
                //alert(fields.length + " items selected");
                $("myText").html("Not Selected");
            }

        });
    });

</script>

</head>
<body>
<div>

    <form>

    <input type="checkbox" name="group" value="1" />1
    <input type="checkbox" name="group" value="2" />2

    <input type="submit" value="Submit" />

    <div id="myText"></div>

    </form>

</div> 
```

如果没有选中任何复选框，我可以创建一个警告框来通知用户，但是，理想情况下，我想避免使用警告框，而是向我创建的 DIV 添加一些反馈文本。

您可以看到我正在尝试使用以下代码进行此操作

```
$("myText").html("Selected"); 
```

但由于某种原因，它似乎不起作用。

任何人都可以请给我一些帮助，这将不胜感激。

谢谢。

托尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:35:12.043

请注意缺少`#`的是，要访问您需要执行此操作的 ID`myText``mytext``id`

`$("#myText").html("Selected");`休息应该像火箭一样工作。

希望这有助于事业`:)`

```
 $(function () {
        $('form').submit(function () {

            var fields = $("input[name='group']").serializeArray();
            if (fields.length == 0) {
                //alert('nothing selected');
                $("#myText").html("Selected");
            }
            else {
                //alert(fields.length + " items selected");
                $("#myText").html("Not Selected");
            }

        });
    }); 
```

# java - java小程序中的JComboBox和JTable

> ID：11502516
> 
> 赞同：0
> 
> 时间：2012-07-16T10:31:21.233
> 
> 标签：java, swing

这是一个java小程序的代码，其中组合框将从访问数据库中检索内容，当我们选择一个项目时，它必须显示表中具有“组合”字段作为选定组合框项目的行。我的问题是，这在我第一次选择它时效果很好。在显示我的第一个选择的结果（这是一个表格）时，如果我在组合框中进行第二个选择，则面板变为空白。我希望它也重复显示连续选择的相应输出。请帮助我诊断错误。提前致谢！

```
import java.awt.*;
import java.awt.event.*;
import java.util.*;
import javax.swing.*;
import javax.swing.table.*;
import java.util.Date;
import java.sql.*;
import java.text.*;

public class gc implements ActionListener
{
JComboBox cc=new JComboBox();
JFrame frame=new JFrame();
JTable table;
DefaultTableModel model;
String query;
int i;
JPanel panel=new JPanel();

public gc()
{
frame.setTitle("Composition Check");
frame.setSize(500,500);
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setLayout(new BorderLayout());
JPanel p1=new JPanel();
p1.setLayout(new FlowLayout());

try
{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection conn=DriverManager.getConnection("jdbc:odbc:vasantham","","");
Statement st=conn.createStatement();
ResultSet rs=st.executeQuery("select DISTINCT composition from try");

while(rs.next())
{
 cc.addItem(rs.getString("composition"));
}

conn.close();
}
catch(Exception e)
{
}

p1.add(cc);
cc.addActionListener(this);
frame.add(p1,BorderLayout.NORTH);

frame.setVisible(true);
}
public void addTable(String query)
{
try
{
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection conn=DriverManager.getConnection("jdbc:odbc:vasantham","","");
Statement st=conn.createStatement();
System.out.println(query);
ResultSet rs=st.executeQuery(query);
ResultSetMetaData md=rs.getMetaData();
int cols=md.getColumnCount();
model=new DefaultTableModel();

model.addColumn("Purpose");
model.addColumn("Name");
model.addColumn("Manu");
model.addColumn("Expiry");
model.addColumn("Stock");
model.addColumn("Cost");
model.addColumn("Supplier");
model.addColumn("Supplier Number");
model.addColumn("Rack");

table=new JTable(model);

String[] tabledata=new String[cols];
int i=0;

while(rs.next())
{
for(i=0;i<cols;i++)
{
 tabledata[i]=rs.getObject(i+1).toString();

}
model.addRow(tabledata);

}
JScrollPane scroll = new JScrollPane(table); 
panel.setLayout(new BorderLayout());

panel.add(scroll,BorderLayout.CENTER);
frame.add(panel,BorderLayout.CENTER);
conn.close();
}
catch(Exception e)
{
}
}

public void actionPerformed(ActionEvent evt)
{
String ac=(String)cc.getSelectedItem();
System.out.println(ac);

addTable("select * from try where composition='"+ac+"'");
frame.setVisible(true);
}

public static void main(String[] args)
{
new gc();
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:48:22.513

添加

```
panel.removeAll(); 
```

在添加滚动窗格之前。这将清除窗格并为下一组结果腾出空间...

**更新** 让我觉得更好的方法是简单地替换表的模型。通过在每次运行时替换滚动窗格和表格，这降低了内存泄漏的风险。

在您的 ui 单元代码中添加对 JTable 的类级别引用和添加

```
table = new JTable();
JScrollPane scroll = new JScrollPane(table); 
panel.setLayout(new BorderLayout());

panel.add(scroll,BorderLayout.CENTER);
frame.add(panel,BorderLayout.CENTER); 
```

现在，在您的数据更新代码中，按原样创建新模型，然后调用

```
table.setModel(model); 
```

这应该更新得更快，但更重要的是，它需要更少的内存来完成。

至于日期格式。你有两个选择。如果数据库出现，您可以格式化值，或者您可以提供自己的单元格渲染器。

```
public class SQLDateTableCellRenderer extends DefauktTableCellRenderer {

    public Component getTableCellRendererComponent(JTable table,
                                           Object value,
                                           boolean isSelected,
                                           boolean hasFocus,
                                           int row,
                                           int column) {
        if (value instanceof java.sql.Date) {
            value = new SimpleDateFormat("dd/MM/yyyy").format(value);
        }

        retrun super.getTableCellRenderer(...);
    }

} 
```

原谅短手，我在我的 iPad 上。最好使用对日期格式的静态或类引用，但这需要更多的 meto 类型；）

然后，您可以将其设置为 JTable 上的默认渲染器。这使您无需知道哪些列需要格式化 SQL 日期。

```
table.setDefaultRenderer(java.sql.Date, new SQLDateTableCellRenderer()); 
```

当然，这意味着当您从数据库中提取对象时，而不是将对象转换为字符串，您只需直接提取对象

```
tabledata[i]=rs.getObject(i+1); 
```

确保将 tabledata 转换为 Object[] 数组而不是字符串。

# entity-framework - 具有两个属性的 EF 多对多

> ID：11502517
> 
> 赞同：0
> 
> 时间：2012-07-16T10:31:21.533
> 
> 标签：entity-framework, entity-framework-4.1

我有一个示例代码：

```
public class Tag
{
    public int TagId { get; set; }
    public virtual ICollection<User> Users { get; set; }
}

public class User
{
    public int UserId { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
} 
```

当我在我的模型上运行 EF 时（我使用代码优先方法），我会在我的数据库中自动创建一些表：

```
Users
Tags
UserTagUsers <-- junction table for many-to-many relationship 
```

没关系，直到我决定向 User 实体再添加一个属性：

```
public class User
{
    public int UserId { get; set; }
    public virtual ICollection<Tag> Tags { get; set; }
    public virtual ICollection<Tag> Tags2 { get; set; }
} 
```

在这种情况下，EF 生成完全不同的关系，它删除了 UserTagUsers 联结表，但向 Tags 表添加了一些额外的属性，以便使其一对一映射。

如何明确告诉 EF 使属性 Tags 和 Tags2 成为多对多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:38:49.373

使用 fluent API 配置映射

```
 modelBuilder.Entity<User>()
    .HasMany(u => u.Tags).WithMany(t => t.Users)
    .Map(m =>
    {
        m.ToTable("UserTags");
        m.MapLeftKey("UserId");
        m.MapRightKey("TagId");
    });

    modelBuilder.Entity<User>()
    .HasMany(u => u.Tags2).WithMany(t => t.Users2)
    .Map(m =>
    {
        m.ToTable("UserTags2");
        m.MapLeftKey("UserId");
        m.MapRightKey("TagId");
    }); 
```

# x11 - 在 X11 中反转应用程序的颜色

> ID：11502519
> 
> 赞同：6
> 
> 时间：2012-07-16T10:31:26.817
> 
> 标签：x11

我知道使用以下命令反转 X11 窗口

```
xcalib -invert -alter 
```

但是，我找不到用于反转单个应用程序颜色的命令。

我尝试通过在 Xephyr 或 Xnest 中运行应用程序并尝试在其中运行 xcalib 命令来反转应用程序的颜色，但它未能说明：

```
DISPLAY=:1 xcalib -invert -alter
Xlib:  extension "XFree86-VidModeExtension" missing on display ":1".
Error - Unable to query gamma ramp size 
```

然后得知Xnest可以用XFree86-VidModeExtension启动，尝试如下：

```
Xnest -ac -br +extension "XFree86-VidModeExtension" 
```

然后我再次在显示器 :1 上尝试了 xcalib -invert -alter 命令。它失败了

我在 Virtualbox 中运行 ubuntu VM 并在其中运行 dwm 窗口管理器

有没有办法在嵌套的 X 中运行 xcalib

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-24T06:18:18.103

`compiz`可以反转单个窗口的颜色。

# git - git 多项目分支

> ID：11502520
> 
> 赞同：0
> 
> 时间：2012-07-16T10:31:39.247
> 
> 标签：git, git-branch, branching-and-merging, branching-strategy

就我而言，超级项目足够大，因此它包含多个工件。假设项目 A、B、C、D、E。它们是不同的 git 项目。现在我们需要处理两个不同的版本，那么问题就在于我们想要如何进行分支。我最初来自颠覆世界，如果是 SVN，我可能会考虑创建一个超级项目并包含所有子项目 A、B、C、D、E，然后我只是分支出超级项目。

但是在分支方面，从概念上来说，git 和 SVN 还是有一些区别的。只是想知道在 git 世界中，通常为不同版本分支多个 git 项目的最佳实践是什么？我知道子模块已经讨论了很多，单独分支项目有意义吗？

另一个问题是，如果完成了分支，我们如何在不同的分支中对工件进行版本控制？如果你有两个分支，这意味着你将在两个不同的分支中为所有子项目拥有不同的版本，那么你就会开始闻到失败的味道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:42:57.610

由于分支非常轻量级，因此您不必担心为您可以控制的所有子项目创建它们。这项工作的大部分都包含在一个名为`git slave`. `git submodule foreach`如果您忘记在命令前加上前缀，处理任何地方可能会变得乏味并导致您出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:36:55.653

子模块或子存储库是拆分更大项目的方法。每个子模块都有自己的职责、版本和分支。

因此，您必须问自己需要更改和分支哪些存储库。也许从 10 个子模块中你只需要接触和分支一两个，除非是重大重构，否则你别无选择。

您可以使用以下命令对所有内容进行分支（在主仓库的根目录中运行）

```
git checkout -b hacking_away
git submodule foreach git checkout -b hacking_away 
```

# authentication - 什么是直径协议？

> ID：11502522
> 
> 赞同：7
> 
> 时间：2012-07-16T10:31:45.597
> 
> 标签：authentication, network-protocols, diameter-protocol

我有 3 个简单的问题。

1.  简单解释下，Diameter 协议是什么？
2.  为什么使用它？
3.  如何使用它？

我在网上搜索了一个实用的解释，但找不到。只有一些技术废话。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-28T03:29:47.667

根据 ITU，DIAMETER 是 RADIUS 的继任者（两倍好）。不，这不是玩笑。RADIUS 过去和现在仍在许多电信网络中用作授权、身份验证和记帐协议服务器（通常称为 AAA）的接口。RADIUS 的问题在于：

它建立在 UDP 之上——RADIUS 数据包可以直接丢弃。它从来没有被设计用来处理短的属性/值对。虽然它是可扩展的，但它仅限于供应商特定属性 (VSA)

与 Livingston 合并制作的 Portmaster 终端/调制解调器服务器，这些论文都很精彩。（啊，过去……我现在可以听到 Telebit 开拓者的声音了……）但那是 19.2Kb UUCP 很酷的时候。

DIAMETER 旨在为现代世界解决这些问题。首先，它基于 TCP。这解决了辍学问题。我们现在知道数据包不会“半途而废”。我们还可以加密流。它还由 TCP 提供，能够拥有更大的属性集（我们称它们为 AVP）。因此，除了简单的键/值对之外，传递值集要容易得多。

例如，在 DIAMETER< 中，您可以执行登录请求，发送的不仅仅是用户名/密码。例如，您可以发送课程位置，告诉 AAA 用户在哪里登录（可能有用于访问的地理位置规则）。而且，因为我们有更强大、更丰富的语言来表达，AAA 不仅可以传达是/否，还可以传达给定“是”的规则或“否”的原因。

这有帮助吗？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-16T12:38:15.070

我在 IBM 网站上找到了[有关 Diameter 协议的完整文章。](http://www.ibm.com/developerworks/library/wi-diameter/ "直径简介")

> 介绍
> 
> Diameter 协议是从 RADIUS 协议衍生而来的，在不同方面做了很多改进，通常被认为是下一代认证、授权和计费 (AAA) 协议。Diameter 协议在 IMS 体系结构中被广泛使用，用于 IMS 实体交换 AAA 相关信息。由于 IMS 系统可能是电信行业的下一件大事，我们相信对 Diameter 协议的清晰理解对于理解 IMS 架构的本质是必要的。本文概述了 Diameter 及其工作原理。对于对 IMS 中的 AAA 如何工作感兴趣或想要实现 Diameter 应用程序的开发人员，本文是一个很好的起点。
> 
> 随着无线网络、移动IP等新技术和新应用的出现，对认证和授权的要求大大提高，访问控制机制也比以往更加复杂。现有的 RADIUS（远程验证拨入用户服务）协议可能不足以应对这些新要求；需要的是一种新协议，它能够实现新的访问控制功能，同时保持进一步扩展的灵活性。这就是 Diameter 协议发挥作用的地方。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-08T16:14:57.433

Diameter 是一种身份验证授权和记帐 (AAA) 协议。如果我们考虑 OSI 分层模型，它适用于应用层。

AAA 协议示例：-

任何试图访问网络的用户（例如：互联网服务提供商）都必须经过该网络正在实施的“AAA”程序。1.身份验证：网络将验证其身份验证用户。2\. 授权：网络将对用户请求的服务进行授权。3\. 记帐：网络将跟踪用户的使用情况。

在执行上述三个步骤时，网络可能会在任何时候拒绝用户使用服务，这就是维护安全性的方式，因此也是 AAA 协议的重要性。

因此，Diameter 基本上是一个基于消息的协议，其中可能发生 AAA 过程，并且 AAA 节点交换消息并接收节点之间交换的每个消息的肯定/否定确认。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-04T03:35:45.890

# c++ - 如何在 for_each 中使用 lambda？

> ID：11502523
> 
> 赞同：12
> 
> 时间：2012-07-16T10:31:46.500
> 
> 标签：c++, lambda, foreach, c++11

我正在尝试使用 for_each 而不是普通的 for 循环。但是，由于我是 C++11 的新手，所以我有点卡住了。我的意图是同时使用 for_each 和 lambda 表达式。有任何想法吗 ？我正在使用 Visual Studio 2010。
问候，
Atul

这是代码。

```
#include "stdafx.h"  
#include <algorithm>  
#include <memory>  
#include <vector>  
#include <iostream>

using namespace std;  

struct Point  
{
    union 
    {
        double pt[3];
        struct {double X,Y,Z;};
        struct {double x,y,z;};
    };

    Point(double x_,double y_,double z_)
      :x(x_),y(y_),z(z_)
    {}
    Point()
      :x(0.0),y(0.0),z(0.0)
    {}

    void operator()()
    {
        cout << "X coordinate = " << x << endl;
        cout << "Y coordinate = " << y << endl;
        cout << "Z coordinate = " << z << endl;
    }
};  

int _tmain(int argc, _TCHAR* argv[])  
{  
    std::vector<Point> PtList(100);

    //! the normal for loop
    for(int i = 0; i < 100; i++)
    {
        // Works well  
        PtList[i]();
    }

    //! for_each using lambda, not working
    int i = 0;
    for_each(PtList.begin(),PtList.end(),[&](int i)
    {
        // Should call the () operator as shown previously
        PtList[i]();
    });

    //! for_each using lambda, not working
    Point CurPt;
    for_each(PtList.begin(),PtList.end(),[&CurPt](int i)
    {
        cout << "I = " << i << endl;
        // should call the() operator of Point
        CurPt();
    });

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-16T10:38:46.410

的第三个参数`for_each`是应用于每个*元素*而不是每个*索引*的函数。否则，在传统循环上使用它有什么意义？

因此，`int`它接受一个参数，而不是一个`Point`参数。现在没有理由捕获任何东西，因为引用`PtList`是不必要的。

```
// Should make operator() const as it doesn't modify anything
for_each(PtList.begin(),PtList.end(),[](Point const& p)
{
    p();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T10:39:24.233

你`std::for_each`的显然是错误的。lamba 的参数类型应该是`Point`，或者`Point const&`取决于你想要做什么，以及你被允许做什么。

应该是这样的：

```
int count = 0;
for_each(PtList.begin(),PtList.end(), [&](Point const & p)
{
      cout <<"No. " << ++count << endl;
      p();
}); 
```

使您`operator()`的 const 成员函数。

# java - 在使用 AndEngine GLES2 的游戏中使用 Sprites 的最佳实践

> ID：11502528
> 
> 赞同：11
> 
> 时间：2012-07-16T10:31:53.990
> 
> 标签：java, android, opengl-es-2.0, andengine, code-reuse

目前，我正在对我的所有精灵进行静态引用，并在 SimpleBaseGameActivity 的 OnCreateResource 方法中加载和初始化它们，但是现在我必须在精灵上覆盖 onAreaTouched 侦听器以及在初始化精灵时可以覆盖它的方式。但我有一个静态方法为每个精灵创建图集和纹理区域。我在我的场景类中使用这些精灵，我想在那里覆盖 onAreaTouched。我可以为我的场景中的特定精灵注册TouchArea，以便可以完成但我想以某种方式覆盖 OnAreaTouched，以便可以完成代码的可重用性。这是我当前创建和加载精灵的方式。

```
defualtCageSprite = createAndLoadSimpleSprite("bg.png", this, 450, 444); 
```

这是我的方法 createAndLoadSimpleSprite。

```
public static Sprite createAndLoadSimpleSprite(String name,
        SimpleBaseGameActivity activity, int width, int height) {

    BitmapTextureAtlas atlasForBGSprite = new BitmapTextureAtlas(
            activity.getTextureManager(), width, height);
    TextureRegion backgroundSpriteTextureRegion = BitmapTextureAtlasTextureRegionFactory
            .createFromAsset(atlasForBGSprite, activity, name, 0, 0);
    Sprite sprite = new Sprite(0, 0, backgroundSpriteTextureRegion,
            activity.getVertexBufferObjectManager());
    activity.getTextureManager().loadTexture(atlasForBGSprite);

    return sprite;
} 
```

现在如何在不丢失代码可重用性的情况下覆盖某些精灵的 onAreaTouched。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T09:42:47.973

有什么理由需要在运行时加载纹理吗？通常的方法是在加载应用程序时将所需的纹理全部加载到单个图集上，以便您以后可以快速使用它们。

至于代码的可重用性，Todilo 关于枚举的想法似乎正是您所需要的。例如，假设你有两种物体——当你触摸它们时消失的物体和当你触摸它们时飞起来的物体。您枚举这两个类别并将一段代码放入触摸事件处理代码中，以检查对象是否应该消失或飞起来。

如果您在运行应用程序之前不知道对象在触摸时应该做什么，那么有一种更动态的方法可以实现相同的结果。只需在运行时创建两个列表，然后根据对象在触摸时应该做什么，将对该对象的引用放在其中一个列表中。然后在触摸事件处理中执行以下操作：

```
if (disappearList.contains(touchedObject)) {
    disappear(object)
}
if (flyUpList.contains(touchedObject)) {
    flyUp(object)
} 
```

太糟糕了 AndEngine 不允许用户在精灵上设置监听器，它会让事情变得更容易一些。

编辑：添加了使用 BlackPawnTextureBuilder 的说明：您的 Atlas 必须是 BuildableBitmapTextureAtlas 类型，然后您添加所有这样的纹理

```
BitmapTextureAtlasTextureRegionFactory.createFromAsset(buildableAtlas, this, "image.png")); 
```

在那之后

```
try {
    this.buildableAtlas.build(new BlackPawnTextureBuilder<IBitmapTextureAtlasSource, BitmapTextureAtlas>(1));
} catch (final TextureAtlasSourcePackingException e) {
    Debug.e(e);
} 
```

我不知道这是否适用于动画精灵，你必须尝试一下。此外，没有覆盖 onTouch，您必须在 onAreaTouched 方法中执行此操作。这种情况的一个例子是

```
if (pSceneMotionEvent.getAction() == MotionEvent.ACTION_DOWN && disappearList.contains(pTouchArea)) {disappear();} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T14:11:28.830

你确定你不想要更多的功能而不是覆盖 ontouch 吗？如何为那些需要覆盖 onarea 和所有其他需求的精灵创建一个继承精灵的类。

# iphone - 有没有办法改变核 心图中散点图中的xy位置

> ID：11502533
> 
> 赞同：0
> 
> 时间：2012-07-16T10:32:08.533
> 
> 标签：iphone, core-plot, scatter

我正在创建散点图，我需要更改散点图中的 x 和 y 位置。图表总是从 (0,0) 位置开始，但我需要显示起点 (7000, 800)。有什么方法可以改变核心图中散点图中的 x 和 y 位置。

显示图形后，需要手动绘制线并获取这些值以搜索属性。

请帮我。

提前致谢。

![在此处输入图像描述](../Images/4174429c23b8fc233ffc1a2301e04280.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:53:11.727

要设置坐标相遇的点，您必须设置正交坐标小数

```
x.orthogonalCoordinateDecimal = CPTDecimalFromString(@"800");
y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"740000"); 
```

并为设置要绘制的值范围设置两个轴的 visibleRange

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T01:11:31.700

这些是 Core Plot 中“情节空间”的特征。它定义了数据坐标中的绘图区域（基本上是包含所有绘图的矩形）与绘图坐标中的视图之间的坐标映射。`xRange`和分别控制绘图空间的`yRange`x 和 y 范围。

绘图空间在两个方向上转换坐标——在绘图时从数据到视图，在（例如）响应绘图上的触摸事件时从视图到数据。有关可用坐标转换方法的列表，请参阅[绘图空间文档。](http://core-plot.googlecode.com/hg/documentation/html/iOS/interface_c_p_t_plot_space.html)

# c - 如何安全地执行c代码

> ID：11502534
> 
> 赞同：0
> 
> 时间：2012-07-16T10:32:21.837
> 
> 标签：c, compiler-construction

在这种情况下，用户将通过浏览器将他/她的 C 代码提交到我的服务器。然后代码将在我的服务器上编译和执行，输出将发送给用户。

由于用户可以提交任何代码（包括病毒，或其他故障代码）。我将不得不照顾它。

所以我的问题是，如何保护我的服务器免受此类代码的影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:38:11.193

我不能为 Windows 回答你——我可以告诉你 linux。

这是一个极其复杂的问题。你需要思考：

*   配额限制
*   编译/执行要作为非特权用户运行的代码的进程。
*   不允许进程运行超过 N 秒
*   不允许进程分配过多内存

我可以说这是一个长期的项目，你无法在几周内正确完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:36:00.007

您的问题可能等同于[停止问题](http://en.wikipedia.org/wiki/Halting_problem)，并且可能没有防弹答案（想想`asm`恶意*C*代码、伪造函数指针、计算 goto、缓冲区溢出破坏返回地址等）`dlsym`。`dlopen`

正如肖恩在他的评论中提到的（指[这个问题](https://security.stackexchange.com/questions/12462/how-is-a-public-scriptable-site-like-codepad-or-ideone-manages-its-sandboxing/12464#12464)），您可以使用沙盒技术。Alinsoar 的[回答](https://stackoverflow.com/a/11502610/841108)向您展示了问题的复杂性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T20:38:00.787

其他要考虑的问题：允许来宾进程有什么权限：是否允许他打开套接字？如果是这样，你允许他什么流量？

如果您打开一个套接字，那么问题就会变得更加复杂，因为他可以通过该套接字进行攻击......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T22:17:41.527

您可能会考虑使用[ideone API](http://ideone.com/api)，一些移动设备软件会这样做（[例如 CodeToGo](http://itunes.apple.com/us/app/codetogo/id382677229?mt=8)）

# java - 如何在 log4j.properties 文件中为占位符设置值？

> ID：11502536
> 
> 赞同：0
> 
> 时间：2012-07-16T10:32:25.993
> 
> 标签：java, spring, hibernate, log4j

我正在使用弹簧/休眠应用程序。我正在使用 log4j 进行日志记录。问题是我需要在 log4j.properties 文件中放置一个占位符，并且我需要根据环境（开发、UAT 或生产）将值设置为占位符。

```
Environment=${environment} 
```

可能吗？请帮我。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:44:43.927

您可以通过命令行或设置环境变量来传递变量和值，如下所示。

```
-DEnvironment=dev 
```

然后您可以在日志文件中使用它，例如：

```
Environment=${Environment} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:43:20.010

为什么不只使用单独的键，并在运行时选择正确的键呢？

```
Environment.dev=Development
Environment.prod=Production
Environment.qa=QA

bundle.getKey(ENVIRONMENT_KEY_PREFIX + ".dev"); 
```

# ios - 在 Objective-C 中屏蔽视图

> ID：11502539
> 
> 赞同：7
> 
> 时间：2012-07-16T10:32:45.903
> 
> 标签：ios, objective-c, uiimageview, mask

在**ActionScript 3**中，我们可以像这样对可视对象应用蒙版：

```
SomeVisualObject.mask = maskShapeObject; 
```

如何在**Objective-C**中获得类似的结果？假设我有两个`UIImageView`对象，我想要这样的东西：

```
imageView1.mask = imageView2; 
```

我如何使用一个`UIImageView`来掩盖或剪辑另一个的形状？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:45:44.847

```
CALayer *maskLayer = [CALayer layer];
 UIImage *maskImage = [UIImage imageNamed:@"maskImage.png"];
maskLayer.contents = (id)maskImage.CGImage;
maskLayer.bounds = (CGRect){CGPointZero, maskImage.size};

UIImageView *imageViewToMask = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 1024, 768)];
imageViewToMask.image = [UIImage imageNamed:@"image2.png"];
imageViewToMask.layer.mask = maskLayer; 
```

# git - Git本地镜像

> ID：11502542
> 
> 赞同：7
> 
> 时间：2012-07-16T10:32:53.497
> 
> 标签：git, mirroring

我有一个历史悠久且连接通道缓慢的远程 git 存储库。现在，一些本地用户在哪里，以及在大提交或从头开始克隆新用户后缓慢的推/拉是大问题。我想创建它的本地镜像。本地更改必须提交到本地仓库，并在后台与远程同步。我知道这个问题是有需求的，但我还没有找到任何解决方案（我不是远程仓库的管理员，我只是尝试使用它来简化本地工作）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:00:49.827

由于您在评论中写道，慢速连接背后的人将完成大部分工作，因此我建议您将慢速远程站点设置为您将提交的本地存储库的镜像。

首先在本地服务器上做一个慢速远程的裸克隆

```
$ git clone --bare git://slow/repo.git 
```

你们当地人现在应该只提交那个克隆，而不是慢速远程。

然后设置一个 cron 作业或类似的东西，将本地仓库中的更改推送到慢速站点

```
$ git push origin --mirror 
```

通过使用`--mirror`你告诉 git 推送所有分支和标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:45:00.480

您应该能够使用

```
git clone --depth=20 url-to-your-repo some-path 
```

这应该让您不必为大部分历史而烦恼。

# c# - 访问 moq 对象时如何返回 null？

> ID：11502543
> 
> 赞同：3
> 
> 时间：2012-07-16T10:32:53.180
> 
> 标签：c#, unit-testing, moq

我正在使用 Moq 库进行单元测试。现在我想要的是，当我第一次访问我的对象时，它应该返回 null，而当我第二次访问它时，它应该返回其他内容。

这是我的代码

```
var mock = new Mock<IMyClass>();
mock.Setup(?????);
mock.Setup(?????);

var actual = target.Method(mock.object); 
```

在我的方法中，我首先检查模拟对象是否为空，如果为空，则对其进行初始化，然后对其进行一些调用。

```
bool Method(IMyClass myObj)
{
    if (myObj != null)
        return true;
    else
    {
        myObj = new MyClass();
        bool result = myObj.SomeFunctionReturningBool();
        return result;
    }
} 
```

为模拟对象做些什么设置，

我还需要知道如何模拟这条线

```
bool result = myObj.SomeFunctionReturningBool(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:43:52.570

听起来您正在尝试使用一种测试方法运行两个测试 - 也许将测试分成两个更好？

如果方法被传递为 null，您还想初始化一个新对象。为了测试这一点，我建议创建一个工厂对象，负责创建`MyClass`. 新代码如下所示：

```
interface IMyClassFactory
{
    IMyClass CreateMyClass();
}

bool Method(IMyClass myObj, IMyClassFactory myClassFactory)
{
    if (myObj != null)
    {
        return true;
    }

    myObj = myClassFactory.CreateMyClass();
    return myObj.SomeFunctionReturningBool();
} 
```

然后测试看起来像：

```
[Test]
public void Method_ShouldReturnTrueIfNotPassedNull()
{
    Assert.That(target.Method(new MyClass()), Is.True);
}

[Test]
public void Method_ShouldCreateObjectAndReturnResultOfSomeFunctionIfPassedNull()
{
    // Arrange
    bool expectedResult = false;

    var mockMyClass = new Mock<IMyClass>();
    mockMyClass.Setup(x => x.SomeFunctionReturningBool()).Returns(expectedResult);

    var mockMyFactory = new Mock<IMyClassFactory>();
    mockMyFactory.Setup(x => x.CreateMyClass()).Returns(mockMyClass.Object);

    // Act
    var result = target.Method(null, mockMyFactory.Object);

    // Assert
    mockMyClass.Verify(x => x.SomeFunctionReturningBool(), Times.Once());
    mockMyFactory.Verify(x => x.CreateMyClass(), Times.Once());
    Assert.That(result, Is.EqualTo(expectedResult));
} 
```

这里[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)被用来传入一个可以创建`IMyClass`类型对象的对象，然后工厂本身就被模拟了。

如果您不想更改方法的签名，请在类的构造函数中创建工厂，并通过类的公共属性使其可访问。然后它可以在模拟工厂的测试中被覆盖。这称为[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-20T14:00:26.607

Moq - 返回 null - 这个工作示例简单地说明了如何使用 Moq 返回 null。虽然需要的代码行是下面的注释行，但下面提供了一个完整的工作示例。

```
// _mockShopService.Setup(x => x.GetProduct(It.IsAny<string>())).Returns(() => null);

using Microsoft.VisualStudio.TestTools.UnitTesting;
using Moq;

public class Product
{
    public string Id { get; set; }
    public string Name { get; set; }
}

public interface IShopService
{
    Product GetProduct(string productId);
}

public class ShopService : IShopService
{
    public Product GetProduct(string productId)
    {
        if (string.IsNullOrWhiteSpace(productId))
        {
            return new Product();
        }

        return new Product { Id = "8160807887984", Name = "How to return null in Moq" };
    }
}

public class Shop
{
    private static IShopService _shopService;

    public Shop(IShopService shopService)
    {
        _shopService = shopService;
    }

    public Product GetProduct(string productId)
    {
        Product product = _shopService.GetProduct(productId);

        return product;
    }
}

[TestClass]
public class ShopTests
{
    Mock<IShopService> _mockShopService;

    [TestInitialize]
    public void Setup()
    {
        _mockShopService = new Mock<IShopService>();
    }

    [TestMethod]
    public void ShopService_GetProduct_Returns_null()
    {
        //Arrange
        Shop shop = new Shop(_mockShopService.Object);

        //This is how we return null --- all other code above is to bring this line of code home
        _mockShopService.Setup(x => x.GetProduct(It.IsAny<string>())).Returns(() => null);

        //Act
        var actual = shop.GetProduct(It.IsAny<string>());

        //Assert

        Assert.IsNull(actual);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:48:13.850

目前，您的 SUT 与`MyClass`实现紧密耦合。您不能模拟`new`在 SUT 中使用关键字实例化的对象。因此，您不能单独测试您的 SUT，并且*您的测试不再是**单元测试***。当实现 of`MyClass.SomeFunctionReturningBool`将发生变化（它将返回`true`而不是`false`），您的 SUT 测试将失败。这不应该发生。因此，将创建委托给某个依赖项（工厂）并将该依赖项注入您的 SUT：

```
[Test]
public void ShouldReturnTrueWhenMyClassIsNotNull()
{
    Mock<IMyClassFactory> factory = new Mock<IMyClassFactory>();
    Mock<IMyClass> myClass = new Mock<IMyClass>();
    var foo = new Foo(factory.Object);
    Assert.True(foo.Method(myClass.Object));
}

[Test]
public void ShouldCreateNewMyClassAndReturnSomeFunctionValue()
{
    bool expected = true;
    Mock<IMyClass> myClass = new Mock<IMyClass>();
    myClass.Setup(mc => mc.SomeFunctionReturningBool()).Returns(expected);
    Mock<IMyClassFactory> factory = new Mock<IMyClassFactory>();
    factory.Setup(f => f.CreateMyClass()).Returns(myClass.Object);

    var foo = new Foo(factory.Object);

    Assert.That(foo.Method(null), Is.EqualTo(expected));
    factory.VerifyAll();
    myClass.VerifyAll();
} 
```

顺便说一句，为方法参数分配新值不会影响您传递给方法的引用。

执行：

```
public class Foo
{
    private IMyClassFactory _factory;

    public Foo(IMyClassFactory factory)
    {
        _factory = factory;
    }

    public bool Method(IMyClass myObj)
    {
        if (myObj != null)
            return true;       

        return _factory.CreateMyClass().SomeFunctionReturningBool();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T10:39:48.213

要模拟结果值，您可以简单地执行以下操作：

```
mock.Setup(foo => foo.SomeFunctionReturningBool()).Returns(true); // or false :) 
```

对于另一个问题，只需在单元测试中通过 null 而不是通过`mock.object`，您的单元测试也涵盖了这一点。所以你基本上创建了两个单元测试：

```
var actual = target.Method(mock.object); 
```

另一个是：

```
var actual = target.Method(null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T10:50:58.993

您可以使用带有参数的 TestFixture。此测试将运行两次和不同的类型值。

```
using NUnit.Framework;

namespace Project.Tests
{
    [TestFixture(1)] 
    [TestFixture(2)]
    public class MyTest
    {
        private int _intType;

         public MyTest(int type)
         {
             _intType = type;
         }

        [SetUp]
        public void Setup()
        {
            if (_intType==1)
            {
                //Mock Return false
            }
            else
            {
                //Mock Return Value
            }
        }
    }
} 
```

# jquery - JQuery切换未知数量的表

> ID：11502544
> 
> 赞同：1
> 
> 时间：2012-07-16T10:32:59.483
> 
> 标签：jquery, toggle, show-hide

我有一个页面查询选定日历日期的事件，并将它们分组在一个单独的表中，用于每种不同的事件类型。

显然这个列表可能会变得非常大，而不是显示所有内容并且用户必须滚动很多我希望我可以使用切换功能来隐藏事件类型的事件列表，当他们单击该事件类型的表头时.

我正在努力解决的问题是，我不知道任何选定的日期会有多少种不同的事件类型，那么我该如何编写一个只隐藏该选定事件类型的函数呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:39:17.843

你的问题并没有真正给我们太多继续，所以也许我完全不同意这个答案。

但我认为您需要为`event-type`表示事件的元素添加一个属性，然后您可以使用 jQuery 选择元素并应用切换。

```
<style>
display-none { display:none; }
</style>

<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$().ready(function () {

    $('div[event-type]').toggle('display-none');

    $('div[event-type-header]').bind('click', function () {
        var eventType = $(this).attr('event-type-header');
        $('div[event-type="' + eventType + '"]').toggle('hide-event-type');
    });
});
</script>

<!-- header -->
<div event-type-header="party">toggle party</div>
<div event-type-header="auction">toggle auction</div>

<!-- content -->
<div event-type="party">party1</div>
<div event-type="auction">auction1</div>
<div event-type="party">party2</div>
<div event-type="auction">auction2</div> 
```

# python - 基于用户的过滤：推荐系统

> ID：11502550
> 
> 赞同：12
> 
> 时间：2012-07-16T10:33:47.533
> 
> 标签：python, filtering

我知道这不是特定于编码的问题，但这是提出此类问题的最合适的地方。所以请多多包涵。

假设我有一本像下面给出的字典，列出了每个人的十个喜欢的项目

```
likes={
    "rajat":{"music","x-men","programming","hindi","english","himesh","lil wayne","rap","travelling","coding"},
    "steve":{"travelling","pop","hanging out","friends","facebook","tv","skating","religion","english","chocolate"},
    "toby":{"programming","pop","rap","gardens","flowers","birthday","tv","summer","youtube","eminem"},
    "ravi":{"skating","opera","sony","apple","iphone","music","winter","mango shake","heart","microsoft"},
    "katy":{"music","pics","guitar","glamour","paris","fun","lip sticks","cute guys","rap","winter"},
    "paul":{"office","women","dress","casuals","action movies","fun","public speaking","microsoft","developer"},
    "sheila":{"heart","beach","summer","laptops","youtube","movies","hindi","english","cute guys","love"},
    "saif":{"women","beach","laptops","movies","himesh","world","earth","rap","fun","eminem"}
    "mark":{"pilgrimage","programming","house","world","books","country music","bob","tom hanks","beauty","tigers"},
    "stuart":{"rap","smart girls","music","wrestling","brock lesnar","country music","public speaking","women","coding","iphone"},
    "grover":{"skating","mountaineering","racing","athletics","sports","adidas","nike","women","apple","pop"},
    "anita":{"heart","sunidhi","hindi","love","love songs","cooking","adidas","beach","travelling","flowers"},
    "kelly":{"travelling","comedy","tv","facebook","youtube","cooking","horror","movies","dublin","animals"},
    "dino":{"women","games","xbox","x-men","assassin's creed","pop","rap","opera","need for speed","jeans"},
    "priya":{"heart","mountaineering","sky diving","sony","apple","pop","perfumes","luxury","eminem","lil wayne"},
    "brenda":{"cute guys","xbox","shower","beach","summer","english","french","country music","office","birds"}
} 
```

我如何确定具有相似喜好的人。或者也许两个人最相似。此外，如果您可以为我指出基于用户或基于项目的过滤的适当示例或教程，这将很有帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-16T12:35:42.823

*（免责声明，我不擅长这个领域，只是对集体过滤有一点了解。以下只是我发现有用的资源的集合）*

[*“编程集体智能*](http://books.google.co.uk/books?id=fEsZ3Ey-Hq4C&lpg=PP1&pg=PA7#v=onepage&q&f=false)[”一书](http://books.google.co.uk/books?id=fEsZ3Ey-Hq4C&lpg=PP1&pg=PA7#v=onepage&q&f=false)[的第 2 章](http://books.google.co.uk/books?id=fEsZ3Ey-Hq4C&lpg=PP1&pg=PA7#v=onepage&q&f=false)*非常全面地介绍了这方面的基础知识。示例代码在 Python 中，这是另一个优点。*

 *您可能还会发现此站点很有用 - [A Programmer's Guide to Data Mining](http://guidetodatamining.com/)，特别是[第 2](http://guidetodatamining.com/home/toc/chapter-2/)章和[第 3 章](http://guidetodatamining.com/home/toc/chapter-3/)讨论了推荐系统和基于项目的过滤。

简而言之，可以使用诸如计算[皮尔逊相关系数](http://en.wikipedia.org/wiki/Pearson_product-moment_correlation_coefficient)、[余弦相似度](http://en.wikipedia.org/wiki/Cosine_similarity)、[k-最近邻](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)等技术来根据用户喜欢/购买/投票的项目来确定用户之间的相似性。

请注意，有各种为此目的编写的 python 库，例如[pysuggest](http://code.google.com/p/pysuggest/)、[Crab](https://github.com/muricoca/crab)、[python-recsys](https://github.com/ocelma/python-recsys)和[SciPy.stats.stats.pearsonr](http://www.scipy.org/doc/api_docs/SciPy.stats.stats.html#pearsonr)。

对于用户数量超过项目数量的大型数据集，您可以通过反转数据并计算项目之间的相关性（即基于项目的过滤）并使用它来推断相似用户，从而更好地扩展解决方案。自然，您不会实时执行此操作，而是将定期重新计算安排为后端任务。一些方法可以并行化/分布式以大大缩短计算时间（假设您有资源可以投入使用）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-14T17:26:16.520

使用 python recsys 库的解决方案 [ [http://ocelma.net/software/python-recsys/build/html/quickstart.html](http://ocelma.net/software/python-recsys/build/html/quickstart.html) ]

```
from recsys.algorithm.factorize import SVD
from recsys.datamodel.data import Data

likes={
    "rajat":{"music","x-men","programming","hindi","english","himesh","lil wayne","rap","travelling","coding"},
    "steve":{"travelling","pop","hanging out","friends","facebook","tv","skating","religion","english","chocolate"},
    "toby":{"programming","pop","rap","gardens","flowers","birthday","tv","summer","youtube","eminem"},
    "ravi":{"skating","opera","sony","apple","iphone","music","winter","mango shake","heart","microsoft"},
    "katy":{"music","pics","guitar","glamour","paris","fun","lip sticks","cute guys","rap","winter"},
    "paul":{"office","women","dress","casuals","action movies","fun","public speaking","microsoft","developer"},
    "sheila":{"heart","beach","summer","laptops","youtube","movies","hindi","english","cute guys","love"},
    "saif":{"women","beach","laptops","movies","himesh","world","earth","rap","fun","eminem"},
    "mark":{"pilgrimage","programming","house","world","books","country music","bob","tom hanks","beauty","tigers"},
    "stuart":{"rap","smart girls","music","wrestling","brock lesnar","country music","public speaking","women","coding","iphone"},
    "grover":{"skating","mountaineering","racing","athletics","sports","adidas","nike","women","apple","pop"},
    "anita":{"heart","sunidhi","hindi","love","love songs","cooking","adidas","beach","travelling","flowers"},
    "kelly":{"travelling","comedy","tv","facebook","youtube","cooking","horror","movies","dublin","animals"},
    "dino":{"women","games","xbox","x-men","assassin's creed","pop","rap","opera","need for speed","jeans"},
    "priya":{"heart","mountaineering","sky diving","sony","apple","pop","perfumes","luxury","eminem","lil wayne"},
    "brenda":{"cute guys","xbox","shower","beach","summer","english","french","country music","office","birds"}
}

data = Data()
VALUE = 1.0
for username in likes:
    for user_likes in likes[username]:
        data.add_tuple((VALUE, username, user_likes)) # Tuple format is: <value, row, column>

svd = SVD()
svd.set_data(data)
k = 5 # Usually, in a real dataset, you should set a higher number, e.g. 100
svd.compute(k=k, min_values=3, pre_normalize=None, mean_center=False, post_normalize=True)

svd.similar('sheila')
svd.similar('rajat') 
```

结果：

```
In [11]: svd.similar('sheila')
Out[11]: 
[('sheila', 0.99999999999999978),
 ('brenda', 0.94929845546505753),
 ('anita', 0.85943494201162518),
 ('kelly', 0.53385495931440263),
 ('saif', 0.39985366653259058),
 ('rajat', 0.30757664244952165),
 ('toby', 0.28541364367155014),
 ('priya', 0.26184289111194581),
 ('steve', 0.25043700194182622),
 ('katy', 0.21812807229358305)]

In [12]: svd.similar('rajat')
Out[12]: 
[('rajat', 1.0000000000000004),
 ('mark', 0.89164019482177692),
 ('katy', 0.65207273451425907),
 ('stuart', 0.61675507205285718),
 ('steve', 0.55730648750670264),
 ('anita', 0.49836982296014803),
 ('brenda', 0.42759524471725929),
 ('kelly', 0.40436047539358799),
 ('toby', 0.35972227835054826),
 ('ravi', 0.31113813325818901)] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T10:46:31.880

`SequenceMatcher`in [difflib](http://docs.python.org/library/difflib.html)对这种事情很有用。如果您使用`ratio()`它返回一个介于 0 和 1 之间的值，对应于两个序列之间的相似性，来自文档：

> 将序列相似性的度量作为 [0, 1] 范围内的浮点数返回。其中 T 是两个序列中元素的总数，M 是匹配数，这是 2.0*M / T。请注意，如果序列相同，则为 1.0，如果它们没有共同点，则为 0.0。

从您的示例中，仅`'rajat'`与其他所有人进行比较（通过切换 internal `{}`for更正为字典`[]`）：

```
import difflib
for key in likes:
    print 'rajat', key, difflib.SequenceMatcher(None,likes['rajat'],likes[key]).ratio()
#Output:
rajat sheila 0.2
rajat katy 0.2
rajat brenda 0.1
rajat saif 0.2
rajat dino 0.2
rajat toby 0.2
rajat mark 0.1
rajat steve 0.1
rajat priya 0.1
rajat grover 0.0
rajat ravi 0.1
rajat rajat 1.0
rajat stuart 0.2
rajat kelly 0.1
rajat paul 0.0
rajat anita 0.2 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T10:45:24.673

我能想到的最基本的方法是找到每个人的点赞列表之间的交集，点赞最匹配的两个人的交叉点数量最多。

`list(set(list1).intersection(list2))`可以使用类似的东西。这将返回一个包含定义交集的项目的列表。

请记住，这种方法无法很好地扩展到大量条目，因为它需要将每个用户的喜好相互比较，它的复杂度约为 O(n^2)，其中 n 是用户。

在您的一些评论中，您提到了协同过滤，但这通常适用于让不同用户对**相同**项目进行排名，然后找到排名之间的相似性，因此您可以推断出某些项目以相同方式排名的用户，但不是其他（这里您使用在其他项目上给出类似排名的用户的排名）。我不认为这是完全相同的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-16T11:01:19.203

```
for k in likes:
    if likes["rajat"] & likes[k]:
        print k, likes["rajat"] & likes[k]
    else:
        print k,  " No Like with rajat" 

Output

sheila set(['hindi', 'english'])
katy set(['music', 'rap'])
brenda set(['english'])
saif set(['himesh', 'rap'])
dino set(['x-men', 'rap'])
toby set(['programming', 'rap'])
mark set(['programming'])
steve set(['travelling', 'english'])
priya set(['lil wayne'])
grover No Likes with rajat
ravi set(['music'])
rajat set(['lil wayne', 'x-men', 'himesh', 'coding', 'programming', 'music', 'hindi',  'rap', 'english', 'travelling'])
stuart set(['music', 'coding', 'rap'])
kelly set(['travelling'])
paul No Likes with rajat
anita set(['travelling', 'hindi']) 
```

这会将“rajat”的共同点与字典的其他成员进行比较。必须有更好的方法来做到这一点

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-11T17:55:45.647

也可以使用 scikit-learn 进行基于用户的过滤：

举一个更简单的例子，如果你有：

`"stuart":{"rap","rock"}`

你想检查他的音乐品味相似性：

`"toby:{"hip-hop","pop","rap"}`

您可以使用 sklearn 的成对余弦相似度函数，

```
from sklearn.feature_extraction.text import CountVectorizer
from sklearn.metrics.pairwise import cosine_similarity

vec = CountVectorizer(analyzer='char')
vec.fit(stuart_list)

x = cosine_similarity(vec.transform(toby_list),
                 vec.transform(stuart_list)) 
```

这会给你一个余弦矩阵，如：

```
[[ 0.166  0.327  1]
 [ 0.123  0.267  0.230]] 
```

其中第一行表示`rap`与所有 3 个 toby 选择的余弦相似度。请注意，1 代表完全相似，用适当的三角术语来说，这意味着 2 个选项的角度为 0º（即相同），因此余弦为 1。

第二行相似表示`rock`与所有 3 个 toby 选择的余弦相似度。

我找不到在 sklearn 中找到两个列表之间总体相似性的方法，但是，给定余弦矩阵，您可以计算其中`1`s 的数量，并将其作为相似度数。或者您可以计算`0.9`s 及以上的数量来解释几乎相同的词，例如“嘻哈”和“嘻哈”。

（Sklearn 还具有欧几里得相似度，可用作余弦相似度的替代方案。）*

# android - 水平视图寻呼机中的列表视图未更新

> ID：11502552
> 
> 赞同：1
> 
> 时间：2012-07-16T10:34:02.917
> 
> 标签：android, android-listview, android-viewpager

我有一个水平视图寻呼机来翻阅 3 个 ListView。三个列表视图由数据库的三个不同表填充。问题是当我在页面上滑动时，列表视图没有加载，而是显示一个白屏。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
            setContentView(R.layout.viewp);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.threepageviewer);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(1);
}

private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 3;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.left;
            ListView list = new ListView(Listing.this);
            helper = new DbHelper(Listing.this);
            dataset_cursor1 = helper.getAll1();
            startManagingCursor(dataset_cursor1);
            adapter1 = new NoteAdapter(dataset_cursor1);
            list.setAdapter(adapter1);
            adapter1.notifyDataSetChanged();

            break;
        case 1:
            resId = R.layout.middle;
            ListView list1 = new ListView(Listing.this);
            helper = new DbHelper(Listing.this);
            dataset_cursor2 = helper.getAll();
            startManagingCursor(dataset_cursor2);
            adapter2 = new NoteAdapter(dataset_cursor2);
            list1.setAdapter(adapter2);
            adapter2.notifyDataSetChanged();
            break;
        case 2:
            resId = R.layout.right;
            ListView list2 = new ListView(Listing.this);
            helper = new DbHelper(Listing.this);
            dataset_cursor3 = helper.getAll2();
            startManagingCursor(dataset_cursor3);
            adapter3 = new NoteAdapter(dataset_cursor3);
            list2.setAdapter(adapter3);
            adapter3.notifyDataSetChanged();

            break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {

    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {

    }

    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }
} 
```

这里可能是什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:48:51.380

您正在膨胀布局，但没有添加任何视图。你应该这样做：

```
public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view;
        switch (position) {
        case 0:
            view =  = inflater.inflate(R.layout.left, null);
            ListView list = (ListView) view.findViewById(R.id.listviewleft); //id of your listview
            helper = new DbHelper(Listing.this);
            dataset_cursor1 = helper.getAll1();
            startManagingCursor(dataset_cursor1);
            adapter1 = new NoteAdapter(dataset_cursor1);
            list.setAdapter(adapter1);
            adapter1.notifyDataSetChanged();

            break;   
            (...)
        }

    ((ViewPager) collection).addView(view);

    return view;
} 
```

# android - Android - 当 ViewFlipper 翻转时，自定义 CursorAdapter 不断调用 BindView

> ID：11502558
> 
> 赞同：1
> 
> 时间：2012-07-16T10:34:24.337
> 
> 标签：android, android-cursoradapter

我已经构建了一个自定义 CursorAdapter，它需要用推文填充 ListView ......只会显示简单的日期和推文......效果很好，唯一的事情是如果我添加一个日志条目，我会注意到 BindView 方法每个项目每 8 秒被连续调用一次...这与屏幕上其他地方的 ViewFlipper 的翻转持续时间相对应...（通过更改持续时间并看到 BindView 以新的间隔时间被调用来验证）

ViewFlipper 确实使用与 ViewList 相同的布局 xml 和相同的数据（尽管我对数据库进行了 2 次单独调用以加载它们）

这是正常行为吗？

呈现 List 和 Flipper 的方法：

公共无效负载TwitterFeed（）{

```
 ListView twitterList = (ListView) findViewById(R.id.twitterList);

    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    dbHelper dbh = new dbHelper(this);

    dbh.openRead();

    twitterDbAdapter adapt = new twitterDbAdapter(this, dbh.getTweets());

    twitterList.setAdapter(adapt);

    ViewFlipper flipper = (ViewFlipper) findViewById(R.id.twitterFlipper);

    ArrayList<twitterTweet> tweets = dbh.getTweetsAsList();

    for( twitterTweet obj : tweets){

        View tItem = (View) inflater.inflate(R.layout.twitter_item, flipper, false);

        TextView tv1 = (TextView) tItem.findViewById(R.id.textView1);
        TextView tv2 = (TextView) tItem.findViewById(R.id.textView2);

        tv1.setText(obj.getDate());
        tv2.setText(obj.getText());

        flipper.addView(tItem);

    }

    dbh.close();

    flipper.setFlipInterval(5000);
    flipper.setInAnimation(AnimationUtils.loadAnimation(this,android.R.anim.slide_in_left));
    flipper.setOutAnimation(AnimationUtils.loadAnimation(this,android.R.anim.slide_out_right));
    flipper.startFlipping();

} 
```

我的自定义适配器：

```
public class twitterDbAdapter extends CursorAdapter{
private LayoutInflater inflater;

public twitterDbAdapter(Context context, Cursor cursor){

    super(context, cursor);
    inflater = LayoutInflater.from(context);
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    Log.i("extra","binding");
    TextView textView = (TextView) view.findViewById(R.id.textView1);
    TextView textView2 = (TextView) view.findViewById(R.id.textView2);

    textView.setText(cursor.getString(cursor.getColumnIndex("createdat")));
    textView2.setText(cursor.getString(cursor.getColumnIndex("tweet")));

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    View view = inflater.inflate(R.layout.twitter_item, parent, false);
    return view;
}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:51:14.427

> 它工作得很好，唯一的事情是，如果我添加一个日志条目，我注意到 BindView 方法每 8 秒连续调用每个项目

我怀疑`bindView`对 中的所有项目都`ListView`调用了该方法，很可能为可见项目调用了该方法（加上一些额外的调用）。

当`ViewFillper`翻阅它的孩子时，Android 需要重新布局当前屏幕内容，这可能是您的方法在's 切换间隔`bindView`被调用的原因。`ViewFlipper`对你来说应该没关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T15:00:47.110

正如 Luksprog 解释的那样，这是正常行为。每当需要显示一行时，每次都会调用方法 bindView。如果您担心性能（列表和广泛的受众，您通常应该这样做）并且不要在每次翻转时更改列表的内容（行），您可能需要考虑覆盖`newView`而不是`bindView`，如果/如果适用，缓存等.

# sql - 从两列中选择值并显示为一列

> ID：11502560
> 
> 赞同：0
> 
> 时间：2012-07-16T10:34:32.610
> 
> 标签：sql, postgresql

我有一个包含两列 [Date]、[StopName] 的表，我想编写一个查询，它将两列显示为一列，例如 2007 年 12 月 5 日：Stop1。到目前为止，我一直在尝试这样

```
SELECT  Date + ':' + StopName as Departure from tbldept. 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:38:39.023

```
SELECT  to_char(Date, 'DD/MM/YYYY') || ':' || to_char(StopName) as Departure 
from tbldept. 
```

`||`是连接运算符，就像在 Oracle 中一样

**UPDT**已修复以避免转换错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:46:53.043

你是对的，可能会出现转换失败的错误。在这种情况下，您需要将列转换为 varchar 数据类型。

# android - 如何在android中获取可扩展列表视图的子值？

> ID：11502561
> 
> 赞同：1
> 
> 时间：2012-07-16T10:34:32.797
> 
> 标签：android

我想知道如何使用 setonItemclick 侦听器方法获取可扩展列表视图的子值。下面给出了我的代码，但单击事件无法正常工作。

```
mExpandableListView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int groupPosition,
                long id) {
            // TODO Auto-generated method stub
            int itemType = ExpandableListView.getPackedPositionType(groupPosition);
            Log.i("item type",""+itemType);
            if ( itemType == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
                  childPosition = ExpandableListView.getPackedPositionChild(id);
                  groupPosition = ExpandableListView.getPackedPositionGroup(id);
                  Log.i("child",""+ childPosition);
                  Log.i("child Group",""+ groupPosition);
              } else if(itemType == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
                  groupPosition = ExpandableListView.getPackedPositionGroup(id);
                  Log.i("Group",""+ groupPosition);
              } 
        }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:35:57.560

无需尝试手动获取位置。使用android定义的方法。

这是获取子位置和父位置的方法

```
public class MainActivity extends Activity {

    private ExpandableListView mExpandableListView;
    private List<GroupEntity> mGroupCollection;
     private int childPosition;
        private int groupPosition;
        boolean retVal;

        ExpandableListAdapter adapter;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListView);
        prepareResource();
        initPage();

        /*mExpandableListView.setOnItemLongClickListener(new OnItemLongClickListener() {
            @Override
              public boolean onItemLongClick(AdapterView<?> parent, View view, int position, long id) {
                  int itemType = ExpandableListView.getPackedPositionType(id);

            if ( itemType == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
                      childPosition = ExpandableListView.getPackedPositionChild(id);
                      groupPosition = ExpandableListView.getPackedPositionGroup(id);
                      Log.i("child",""+ childPosition);
                      Log.i("child Group",""+ groupPosition);
                      //do your per-item callback here
                      return retVal; //true if we consumed the click, false if not
                  } else if(itemType == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
                      groupPosition = ExpandableListView.getPackedPositionGroup(id);
                      //do your per-group callback here
                      Log.i("Group",""+ groupPosition);
                      return retVal; //true if we consumed the click, false if not
                  } else {
                      // null item; we don't consume the click
                      return false;
                  }
            }
          });*/

    }

    private void prepareResource() {

        mGroupCollection = new ArrayList<GroupEntity>();

        for (int i = 1; i < 7; i++) {
            GroupEntity ge = new GroupEntity();
            if (i == 1)
                ge.Name = "Basic Info";
            if (i == 2)
                ge.Name = "Acadamic Background";
            if (i == 3)
                ge.Name = "Experience";
            if (i == 4)
                ge.Name = "Skill";
            if (i == 5)
                ge.Name = "Objective";
            if (i == 6)
                ge.Name = "Reference";
            for (int j = 1; j < 8; j++) {
                GroupItemEntity gi = ge.new GroupItemEntity();
                if (i == 1 && j == 1)
                    gi.Name = "FirstName";
                if (i == 1 && j == 2)
                    gi.Name = "MiddleName";
                if (i == 1 && j == 3)
                    gi.Name = "LastName";
                if (i == 1 && j == 4)
                    gi.Name = "Address";
                if (i == 1 && j == 5)
                    gi.Name = "Sex";
                if (i == 1 && j == 6)
                    gi.Name = "Merital stutas";
                if (i == 1 && j == 7)
                    gi.Name = "Date Of Birthday";
                ge.GroupItemCollection.add(gi);
            }
            mGroupCollection.add(ge);
        }

    }

    private void initPage() {
        mExpandableListView = (ExpandableListView) findViewById(R.id.expandableListView);
         adapter = new ExpandableListAdapter(this,
                mExpandableListView, mGroupCollection);
        mExpandableListView.setAdapter(adapter);
        registerForContextMenu(mExpandableListView);
    }

    public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
        System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);

        return true;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-28T18:59:43.550

要获取可扩展列表视图的子元素的值，请调用此函数

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);           
 ExpandList = (ExpandableListView) findViewById(R.id.exp_list);
            ExpListItems = SetStandardGroups();
            ExpAdapter = new ExpandListAdapter(MainActivity.this, ExpListItems);
            ExpandList.setAdapter(ExpAdapter);

            ExpandList.setOnChildClickListener(new ExpandableListView.OnChildClickListener() {

                @Override
                public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
                    //get the cuurrnt clicked child object
                    Child child = (Child) ExpAdapter.getChild(groupPosition, childPosition);
                    //System.err.println("child clicked");
                    Intent intent = new Intent(MainActivity.this, jai_ganesh.class);
                    intent.putExtra("message", child.getName());// get the child  name and sent to next activity
                    startActivity(intent);
                   // Toast.makeText(getApplicationContext(), child.getName()+" child clicked", Toast.LENGTH_SHORT).show();
                    return true;
                }
            });
} 
```

在上面的代码中，您通过创建它的对象来获取子值，因为它是具有许多值的类。

```
Child child = (Child) ExpAdapter.getChild(groupPosition, childPosition); 
```

如果您的孩子只是 string 或 textview ，在这种情况下，您可以获得类似的值

```
 final String selected = (String) expListAdapter.getChild(
 groupPosition, childPosition); 
```

我希望这能解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-03T12:46:21.900

尝试这个 ...

```
mExpandableListView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int groupPosition,
            long id) {
        // TODO Auto-generated method stub
        // add this code 
        String child = (String) listAdapter.getChild(groupPosition, childPosition);
        int itemType = ExpandableListView.getPackedPositionType(groupPosition);
        Log.i("item type",""+itemType);
        if ( itemType == ExpandableListView.PACKED_POSITION_TYPE_CHILD) {
              childPosition = ExpandableListView.getPackedPositionChild(id);
              groupPosition = ExpandableListView.getPackedPositionGroup(id);
              Log.i("child",""+ childPosition);
              Log.i("child Group",""+ groupPosition);
              // to get value of child
              Log.i("child Name",+ child.toString());
          } else if(itemType == ExpandableListView.PACKED_POSITION_TYPE_GROUP) {
              groupPosition = ExpandableListView.getPackedPositionGroup(id);
              Log.i("Group",""+ groupPosition);
          } 
    }
}); 
```

希望这可以帮助..！

# jquery - $('#id tag') 与 $('#id').find('tag') - 哪个更可取？

> ID：11502563
> 
> 赞同：18
> 
> 时间：2012-07-16T10:34:37.753
> 
> 标签：jquery, performance

我想知道哪个选项更好，尤其是在速度方面：

```
$('#id tag')... 
```

或者

```
$('#id').find('tag')... 
```

此外，如果您更改`id`和/或更改`tag`为 a`class`或类似的东西，同样的答案是否适用`input:checked`？

例如，哪个更好：`$('#id input:checked')...`或`$('#id').find('input:checked');`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-16T11:22:34.893

您可以根据 3 件事做出决定：

**可读性**

这与您的两个给定选择器没有太大区别。就我而言，我更喜欢这种`$('#id').find('inner')`语法，因为它更准确地描述了它实际在做什么。

**可重用性**

如果您的代码的其他部分使用相同的 id 选择器（或其上下文中的某些内容），您可以缓存选择器并重用它。我自己发现重构这样编写的代码更难`$('#id inner')`，因为您必须先解码 css 选择器，然后才能继续前进并找到可能的改进。

想象一下这两种情况不太复杂

```
$('#hello .class_name tag').doThis();
$('#hello .other_name input').doThat(); 
```

另一个案例

```
$('#hello').find('.class_name tag').doThis();
$('#hello').find('.other_name input').doThat(); 
```

我认为第二个示例对您大喊“缓存 id 选择器”，而第一个没有。

**速度**

性能总是一个好点，在这种情况下，带有 的 id 选择器`find`在大多数浏览器中做得更好，因为它首先建立上下文并且可以将降序选择器应用于更小的元素子集。

[这是一个很好的性能测试，如果您想了解更多关于 jQuery 中的上下文与子集选择器性能的信息](http://jsperf.com/jquery-find-vs-context-selector)。id 的子集*通常*占主导地位。当然，您可以获得不同的结果，但在大多数情况下，它们确实如此。

因此，从我的角度来看，子集选择器是 3 到 0。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-16T10:45:33.550

`span`这是我在元素下查找所有元素的测试用例 HTML `#i`：

```
<div id="i">
  <span>testL1_1</span>
  <span>testL1_2</span>
  <div>
    <span>testL2_1</span>
  </div>
  <ul>
    <li>
      <span>testL3_1</span>
    </li>
  </ul>
  <div>
    <div>
      <div>
        <div>
          <span>testL5_1</span>
        </div>
      </div>
    </div>
  </div>
</div> 
```

测试这三个 jQuery 选择器：

```
$("#i span");         // much slower
$("#i").find("span"); // FASTEST
$("span", "#i");      // second fastest 
```

[http://jsperf.com/jquery-sub-element-selection](http://jsperf.com/jquery-sub-element-selection)

我已经在 Google Chrome 和 Firefox 上运行它，它似乎`.find()`是最快的，紧随其后的是第三种情况，而第一种则慢得多。

![jQuery 选择器性能](../Images/5a135f2af971f04c6999031570edaf94.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T10:39:45.303

此处的性能度量：`:)`**==>** [http://jsperf.com/find-vs-descendant-selector](http://jsperf.com/find-vs-descendant-selector)

似乎`descendant`方式更快，但在歌剧中表现不佳，

在我看来，没关系`:)`

希望这能回答您的问题并在此处查看[.find() 是否比基本后代选择方法更快？](https://stackoverflow.com/questions/3422230/is-find-faster-than-basic-descendant-selecting-method)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-16T10:44:27.610

在现代浏览器上，第一个似乎`$("#id tag")`比第二个 ( ) 慢得多**；**[在这里测试](http://jsperf.com/descendant-selector-vs-find)，看下面的截图。IE7（缺少）以大致相同的速度运行它们。`$("#id").find("tag")``querySelectorAll`

但有两个观察：

1.  它实际上不太重要。如果您没有调试实际的已知性能问题，请不要担心。

2.  综合基准​​总是值得怀疑的。如果您正在解决一个实际的、已知的性能问题，请分析*该*问题（您的实际选择器和您的实际标记）。

![结果截图](../Images/87f665f7c143e3487a2cacaea44fd196.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-16T10:42:34.363

后代表现更好。检查此链接[Jsperf](http://jsperf.com/find-vs-hierarchy-slectors)。

1.  如果嵌套元素太多。然后去找。这确实是一个很小的差异。
2.  这只是您方便的编码方式。我更喜欢如果有太多的嵌套项目，那么我会去寻找，

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-16T10:42:58.823

正如我所说 - 它在浏览器中有所不同。

# 铬合金 ：

[http://i.stack.imgur.com/SijQY.jpg](https://i.stack.imgur.com/SijQY.jpg) ![在此处输入图像描述](../Images/996b5f194ee570ecfe5a8dcc6d650ed2.png)

# IE

[http://i.stack.imgur.com/axhGw.jpg](https://i.stack.imgur.com/axhGw.jpg) ![在此处输入图像描述](../Images/e6603a347557541d2caef931bd7d0a3b.png)

# ajax - 在 JavaScript 中将非 unicode 字符串转换为 base64？

> ID：11502564
> 
> 赞同：1
> 
> 时间：2012-07-16T10:34:39.077
> 
> 标签：ajax, google-chrome-extension, base64

我正在写一个下载器 chrome 扩展。我正在尝试使用 ajax 获取文件并对其进行编码，`atob(str)`但它只允许纯字符串，因此无法`data:blah,base64`正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T12:10:44.967

您想对二进制文件进行 AJAX 调用并获得`data:xxx/xxx;base64,xxx=`回报吗？除非服务器使用 Data URI 方案返回文件，否则这不会发生。你需要使用`xhr.responseBlob()`.

[之前有人问过](https://stackoverflow.com/questions/4845215/making-a-chrome-extension-download-a-file)类似的问题，那里的答案应该对您有所帮助。您还可以查看[此示例](https://stackoverflow.com/questions/6165266/downloading-mp3-files-using-html5-blobs-in-a-chrome-extension)。

# mfc - VC MFC 程序中 atlconv.h、atliface.h 中的编译器错误

> ID：11502571
> 
> 赞同：0
> 
> 时间：2012-07-16T10:35:06.270
> 
> 标签：mfc, atl

我有一个早期在 VC++6.0 中开发的 VC++ MFC COM 组件。现在我的电脑已经安装了 VS 2005 和 VS 2010。

现在，我对在 VC++6.0 中构建的旧代码进行了新的更改，我打开了 VC++6.0 并尝试运行应用程序，然后我**在 VC++ MFC 程序**atliface 中的 atlconv.h 中收到编译器错误错误。 h #define #endif 错误等，

安装新版本是否会损坏 atl 文件。我如何克服这些 atl 错误？请建议我。

提前致谢。

问候，拉杰斯瓦里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:52:55.050

不幸的是，ATL/MFC 中的一些更改阻止了在较新的 Visual Studio 版本中直接编译旧的 Visual Studio 6 编译代码。此链接可能会有所帮助： http: [//msdn.microsoft.com/en-us/library/686cfhy4](http://msdn.microsoft.com/en-us/library/686cfhy4(v=vs.71).aspx) (v=vs.71).aspx 。如果是紧急情况，您可能会通过在 XPMode 中安装 VC 6 获得更快的解决方案。

# smarty - 我是否总是需要在 if 中使用 isset？

> ID：11502572
> 
> 赞同：0
> 
> 时间：2012-07-16T10:35:07.673
> 
> 标签：smarty, smarty3

以下是否可以接受，即使`$my_flag`可能没有设置？

```
{if ( $my_flag )}
    // Vrooom
{/if} 
```

我是否总是需要`isset`确保不会抛出通知，或者 Smarty3 是否会处理这些事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T20:50:07.873

这是可以接受的，但 PHP 会警告您`$my_flag`未定义。

我会做这样的事情：

```
{if isset($my_flag)}
    {if $my_flag == 123}
        <p>print something</p>
    {/if}
{/if} 
```

如果您尝试当前的脚本，一切都会正常工作，但它会记录一个通知。上面的脚本确保只有当变量被设置然后做一些事情。

但是，由于 Smarty 已缓存，您可能需要重新加载页面几次才能看到更改（除非您指定`$smarty_obj->force_compile = true;`）。

# solr - 日期和价格字段应定义为索引还是仅存储在 Solr 3.6 中？

> ID：11502574
> 
> 赞同：0
> 
> 时间：2012-07-16T10:35:12.290
> 
> 标签：solr, solrnet

使用 Solr 3.6，我对是否将字段视为索引感到困惑..

专门针对两个字段，名为“创建日期”和“价格”。我需要对它们都进行过滤，但无法决定它们是否应该在 Schema.xml 中定义为索引。

它是否对性能有任何影响，并且创建过滤器是否需要被索引或者只是将它们保持为存储状态就可以了？

对此的任何想法都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:39:59.070

这取决于您将如何使用这些字段。首先，如果您需要同时查询创建日期和价格字段，那么您应该将两个字段的 indexed 设置为 true。其次，如果您希望用户在搜索结果中检索创建日期和价格字段，那么您还应该将 storage 设置为 true。否则，您可以将它们设置为 false。

# matlab - 线点检查

> ID：11502578
> 
> 赞同：0
> 
> 时间：2012-07-16T10:35:42.097
> 
> 标签：matlab, line

```
plot([x5],[y5],'-',xout_1(1),yout_1(1),'*',xout_1(2),yout_1(2),'*')

x5 =[125  -263]

y5 =[165  -375]

xout_1 =[135.5049    -127.0045]

yout_1 =[  179.6202  -185.7279] 
```

这是我的程序的一个场景。
我将如何从线上丢弃点（135.5049,179.6202）？这些值因每次模拟而变化。
谁能告诉我如何删除这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:58:27.893

如果要删除检查点是否在线，请执行以下操作：

```
slope = (y5(2) - y5(1)) / (x5(2) - x5(1));  %# Slope of main line
thr = 1e-6;                                 %# Threshold to check points
idx = (abs((yout_1 - y5(1)) ./ (xout_1  - x5(1)) - slope) < thr) & ... 
   (xout_1 > min(x5) & xout_1 < max(x5)); 
```

现在`idx`是一个逻辑向量，在该点在线的位置具有“1”，否则为“0”。要绘制这些点，请使用逻辑索引：

```
plot(x5, y5, '-', xout_1(idx), yout_1(idx), '*') 
```

这适用于任意数量的点，*即*您可以添加任意数量的点，`xout_1`并且`yout_1`它只会绘制那些落在线上的点。

PS
不需要括起来`x5`和`y5`括号，它们已经是一个向量。

# mysql - 我想知道正确的左连接

> ID：11502581
> 
> 赞同：1
> 
> 时间：2012-07-16T10:35:48.883
> 
> 标签：mysql

我有这个查询，我希望表 mstemp 的所有记录必须根据给定的条件显示。

```
SELECT 
    mstEmp.empname, InDate, dailyattendance.InTime,
    dailyattendance.OutTime, mstEmp.teamtype 
FROM 
    mstEmp
LEFT JOIN 
    dailyattendance ON (dailyattendance.HolderName = mstEmp.empname ) 
WHERE 
    mstEmp.teamtype = '$chk' 
    AND (InDate BETWEEN '$from' AND '$to' )
ORDER BY 
    InDate ASC 
```

但似乎这个查询不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:47:57.950

尝试这个：

```
SELECT mstEmp.empname, InDate, dailyattendance.InTime,
       dailyattendance.OutTime, mstEmp.teamtype 
FROM mstEmp
  LEFT JOIN dailyattendance 
    ON (dailyattendance.HolderName = mstEmp.empname ) AND (InDate BETWEEN '$from' AND '$to' )
WHERE mstEmp.teamtype = '$chk' 
ORDER BY InDate ASC 
```

# asp.net - ASP.net 缓存 + 单例模式

> ID：11502584
> 
> 赞同：6
> 
> 时间：2012-07-16T10:36:02.527
> 
> 标签：asp.net, caching, singleton

我有一个巨大的 XML 文档，我必须对其进行解析以生成域对象。

因为文档很大，我不想每次用户请求它时都解析它，但只是第一次，然后将所有对象保存到缓存中。

```
public List<Product> GetXMLProducts()
{
    if (HttpRuntime.Cache.Get("ProductsXML") != null)
    {
        return (List<Product>)(HttpRuntime.Cache.Get("ProductsXML"));
    }

    string xmlPath = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Content\\Products.xml");
    XmlReader reader = XmlReader.Create(xmlPath);
    XDocument doc = XDocument.Load(reader);

    List<Product> productsList = new List<Product>();
    // Parsing the products element

    HttpRuntime.Cache.Insert("ProductsXML", productsList);
    return productsList;
} 
```

我怎样才能使这个函数在单例中工作并且是线程安全的？

*修复了将对象保存到缓存中的方法（是复制粘贴错误）*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T10:40:49.420

创建一个惰性静态并在应用程序的生命周期内保存在内存中。并且不要忘记“真实”部分，这就是使其线程安全的原因。

```
public static readonly Lazy<List<Product>> _product = new Lazy<List<Products>>(() => GetProducts(), true); 
```

要将其添加到您的模型中，只需将其设为私有并返回 _product.Value;

```
public MyModel
{
    ... bunch of methods/properties

    private static readonly Lazy<List<Product>> _products = new Lazy<List<Products>>(() => GetProducts(), true);

    private static List<Product> GetProducts()
    {
        return DsLayer.GetProducts();

    }

    public List<Product> Products { get { return _products.Value; } }
} 
```

要使用 Lazy<> 创建单例，请使用此模式。

```
public MyClass
{
    private static readonly Lazy<MyClass> _myClass = new Lazy<MyClass>(() => new MyClass(), true);

    private MyClass(){}

    public static MyClass Instance { get { return _myClass.Value; } }
} 
```

> 更新/编辑：

在上下文中使用的另一种惰性模式（即会话）

保存在会话中的一些模型：

```
public MyModel
{
   private List<Product> _currentProducts = null;
   public List<Product> CurrentProducts 
   {
      get
      {
         return this._currentProducts ?? (_currentProducts = ProductDataLayer.GetProducts(this.CurrentCustomer));
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:49:52.287

记录在案 - 懒惰的静态（Chris Gessler 的回答，我给了 +1）是一个很好的解决方案；在这种情况下，因为您总是希望内存中的数据。该答案专门针对`Cache`（解决您有些混乱的代码）的使用并带来了另一种初始化网站的方法。

执行此操作的传统方法是`Application_Start`在 Global.asax(.cs) 中的处理程序中。但是，我将展示另一种不错的方式：

[使用 Nuget 将WebActivator](http://nuget.org/packages/WebActivator)包添加到您的网站。

然后将以下代码添加到您在项目中创建的新文件夹中的新 .cs 文件中，名为`App_Start`：

```
[assembly: WebActivator.PreApplicationStartMethod(typeof(*your_namespace*.MyInit), 
  "Start", Order = 0)]
namespace *your_namespace*
{

  public static class MyInit {
    public static void Start() {
      string xmlPath = HostingEnvironment.MapPath("~/Content/Products.xml");
      using(var reader = XmlReader.Create(xmlPath)) {
       XDocument doc = XDocument.Load(reader);  

       List<Product> productsList = new List<Product>();  
       // Parsing the products element

       HttpRuntime.Cache.Insert("ProductsXML", productsList); 
      }
    }
  }
} 
```

注意 - Cache.Insert 的*正确*使用，以及`using`用于流阅读器的 a。您的原始代码还有其他奇怪的逻辑和语义错误 - 例如尝试分配函数的结果并在缓存中返回值为空的值。

另请注意，您需要在上面的代码中引入一些命名空间 - 并注意`*your_namespace*`.

# ruby-on-rails - Rails - 自引用模型？

> ID：11502587
> 
> 赞同：0
> 
> 时间：2012-07-16T10:36:21.940
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我目前有一个`metric`模型，它可以取两个`operands`并基于其执行计算`operation_type`，通过自定义结果方法产生结果。这按预期工作。

为了使其可扩展，我希望能够使用两个操作数（目前），一个操作数和一个指标，或两个指标来执行计算。这样做的原因是它是可扩展的——我可以使用以前操作的结果。

我被困的地方是如何创建这个自我加入——我想我需要以某种方式走上多态自我引用的道路，但文档并没有引导我找到答案。我目前还有一个`calculated_metric`模型设置，但我不确定这是否是要走的路。

我的模型如下所示：

```
class Metric < ActiveRecord::Base
    attr_accessible :name, :operation_type_id
end

class Operand < ActiveRecord::Base
    attr_accessible :object, :attribute
end

class Calculated_metric < ActiveRecord::Base
    attr_accessible :metric_id, :calculated_metric_id
end 
```

任何帮助将不胜感激。谢谢！

编辑：也许我可以澄清一下：我目前有一个单独的`calculated_metric`模型；这是为了在我的计算中使用另一个度量的结果而采取的最佳方法，还是我可以通过在我现有的表中添加一个`left_metric`和来更简单地实现这一点（如果方程是减法，左和右是这样的，对于例如，它知道哪个被带走）？我不确定这是否是一个理想的解决方案，因为在很多情况下它们都是空的。`right_metric``metric`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:44:19.767

我相信我可能在这里偶然发现了一个可能的情况——我没有引用度量标准本身，而是`metric_id`在模型中添加了一个列`operand`，这意味着它可以引用一个对象属性或另一个度量标准。

我认为这个解决方案有效，尽管操作数模型中总会有至少一个空列；因此，仍然欢迎更好的解决方案。

谢谢！

# javascript - 拖动元素时，如何获取要替换的元素的位置？

> ID：11502590
> 
> 赞同：0
> 
> 时间：2012-07-16T10:36:29.477
> 
> 标签：javascript, jquery, drag-and-drop, draggable, jquery-ui-sortable

我被告知要做一个 UI 效果应该是这样的：

**第一的：**

*   页面上有两三列，每一列都有很多元素（例如：div），
*   并且列内的所有这些元素都应该是可拖动的，
    同时列应该自动对所有元素进行排序。

**第二：**

*   将元素从一列拖动到另一列时，拖动的元素应移动到我的光标指向的列，
*   并且当放置这个元素时，应该有一个效果，即被放置元素周围的元素之一将动画“位置”到原始拖动元素所在的位置。

`enableDrag`我发现的功能是这样的：

```
function enableDragging(ele) {

    var dragging = dragging || false,
        x, y, Ox, Oy,
        current;
        enableDragging.z = enableDragging.z || 1;
    ele.onmousedown = function(ev) {
        current = ev.target;
        current.style.position = "absolute";
        dragging = true;
        x = ev.clientX;
        y = ev.clientY;
        Ox = current.offsetLeft;
        Oy = current.offsetTop;
        current.style.zIndex = ++enableDragging.z;
        console.log(dragging);

        window.onmousemove = function(ev) {
            if (dragging == true) {
                var Sx = ev.clientX - x + Ox,
                    Sy = ev.clientY - y + Oy;
                current.style.top = Sy + "px";
                current.style.left = Sx + "px";
                return false;
            }
        };
        window.onmouseup = function(ev) {
            dragging && (dragging = false);
        }
    };
} 
```

**但是我应该如何继续，我实际上不知道获得元素的位置什么将被替换原来拖动元素的位置......**

主要是，我想用原始的 Javascript 编写所有这些效果，但 jQuery 也很好！

我是 JS 新手，这是我应该弄清楚的最大项目！

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:46:45.753

您是否尝试过 jQuery UI “可排序”小部件？听起来它可以满足您的大部分需求。

特别参见“[连接列表](http://jqueryui.com/demos/sortable/#connect-lists)”演示。

# magento - magento 产品网格分页和在自定义模块的编辑页面选项卡中搜索

> ID：11502591
> 
> 赞同：1
> 
> 时间：2012-07-16T10:36:33.533
> 
> 标签：magento, search, grid, pagination

谁能帮我？

我创建了使用产品详细信息的自定义模块。我在添加/编辑页面中使用产品网格来选择产品，它工作正常，但问题是“产品网格分页和搜索不起作用”当我点击产品网格上的分页和搜索按钮时，它会将我转发到客户端.

为了在添加页面选项卡中创建产品网格，我创建了一个块页面`Mage_Adminhtml_Block_Widget_Grid`并覆盖了所有网格方法。实际上我`core/Mage/adminhtml/block/catelog/product/grid.php`的文件中有粘贴代码。

我知道`getGridUrl()`方法找不到productcontroller url的问题，这就是分页和排序不起作用的原因。

我想要带有自定义列的产品网格，所以我不能重用主产品网格。我必须创建自己的产品网格。

# ruby - 如何匹配不在两个特殊字符之间的正则表达式？

> ID：11502598
> 
> 赞同：14
> 
> 时间：2012-07-16T10:37:02.253
> 
> 标签：ruby, regex

我有一个这样的字符串：

> abcab “ab” ba “a”

如何匹配`a`不属于由 分隔的字符串的所有内容`"`？我想匹配这里粗体的所有内容：

> **a** bc **a** b " ab " b **a** " a "

我想替换这些匹配项（或者通过用空字符串替换它们来删除它们），因此删除带引号的部分进行匹配将不起作用，因为我希望它们保留在字符串中。我正在使用红宝石。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-16T11:50:55.020

假设引号正确平衡并且没有转义引号，那么很容易：

```
result = subject.gsub(/a(?=(?:[^"]*"[^"]*")*[^"]*\Z)/, '') 
```

`a`当且仅当匹配的 s 前面有偶数个引号时，这会将所有 s 替换为空字符串`a`。

**解释：**

```
a        # Match a
(?=      # only if it's followed by...
 (?:     # ...the following:
  [^"]*" #  any number of non-quotes, followed by one quote
  [^"]*" #  the same again, ensuring an even number
 )*      # any number of times (0, 2, 4 etc. quotes)
 [^"]*   # followed by only non-quotes until
 \Z      # the end of the string.
)        # End of lookahead assertion 
```

如果您可以在引号 ( `a "length: 2\""`) 中转义引号，它仍然是可能的，但会更复杂：

```
result = subject.gsub(/a(?=(?:(?:\\.|[^"\\])*"(?:\\.|[^"\\])*")*(?:\\.|[^"\\])*\Z)/, '') 
```

这本质上与上面的正则表达式相同，只是替换`(?:\\.|[^"\\])`为`[^"]`：

```
(?:     # Match either...
 \\.    # an escaped character
|       # or
 [^"\\] # any character except backslash or quote
)       # End of alternation 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-05-13T21:22:03.630

js-coder，复活了这个古老的问题，因为它有一个没有提到的简单解决方案。[（在对正则表达式赏金任务](https://stackoverflow.com/q/23589174)进行一些研究时发现了您的问题。）

如您所见，与已接受答案中的正则表达式相比，正则表达式非常小：`("[^"]*")|a`

```
subject = 'a b c a b " a b " b a " a "'
regex = /("[^"]*")|a/
replaced = subject.gsub(regex) {|m|$1}
puts replaced 
```

看这个[现场演示](http://ideone.com/o8vjA9)

**参考**

[除了情况 s1、s2、s3 之外，如何匹配模式](https://stackoverflow.com/q/23589174)

[如何匹配模式，除非...](http://www.rexegg.com/regex-best-trick.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:19:08.273

正则表达式爱好者的成熟正则表达式解决方案，无需关心性能或代码可读性。

此解决方案假定没有转义语法（使用转义语法，`a`in`"sbd\"a"`被计为字符串内部）。

伪代码：

```
processedString = 
    inputString.replaceAll("\\".*?\\"","") // Remove all quoted strings
               .replaceFirst("\\".*", "") // Consider text after lonely quote as inside quote 
```

然后你可以匹配你想要的文本在`processedString`. 如果您将单引号后的文本视为外引号，则可以删除第二个替换。

***编辑***

在 Ruby 中，上面代码中的正则表达式是

```
/\".*?\"/ 
```

与`gsub`

和

```
/\".*/ 
```

与`sub`

* * *

为了解决更换问题，我不确定这是否可行，但值得尝试：

*   声明一个计数器
*   将正则表达式`/(\"|a)/`与 gsub 和 supply 函数一起使用。
*   在函数中，如果 match 是`"`，则递增计数器，并`"`作为替换返回（基本上没有变化）。如果匹配是`a`检查计数器是否是偶数：如果甚至提供您的替换字符串；否则，只需提供匹配的任何内容。

# linux - 如何在 R 文件中编写和执行 hello world 程序？

> ID：11502599
> 
> 赞同：9
> 
> 时间：2012-07-16T10:37:04.850
> 
> 标签：linux, r

我确实看过这里：[http ://cran.r-project.org/doc/FAQ/R-FAQ.html#R-Programming](http://cran.r-project.org/doc/FAQ/R-FAQ.html#R-Programming)

维基百科展示了如何编写动态 R 程序：[http ://en.wikipedia.org/wiki/Hello_world_program_examples#R_2](http://en.wikipedia.org/wiki/Hello_world_program_examples#R_2)

**但是如何从文件中执行呢？
需要给予什么延期？
那怎么编译文件呢？**

在 Linux 上。

* * *

我创建了一个`mow.R`包含以下代码的文件：
`cat ('Hello world!')`

R 说：

```
> source mow.R
Error: unexpected symbol in "source mow.R" 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-16T10:43:44.957

我一般你想给你的 R 文件`.R`扩展名。

`"so.R"`要运行一个程序，您可以启动 R（通过在命令提示符下键入“R”），一旦进入程序/解释器，您就可以使用 source 命令执行您的程序（我们称之为它）。例如，

```
> source('so.R') 
```

产量：

```
Hello World 
```

您可以从 Unix shell 运行程序

```
R CMD BATCH so.R 
```

它将生成一个名为的文件，该文件`"so.Rout"`将包含程序运行的输出，尤其是在它包含大量输出的情况下。如果程序运行出现问题，错误消息等也会在此文件中，因此它是一个很好的诊断工具。另一种选择是[Rscript](http://linux.die.net/man/1/rscript)命令，它将其输出发送到标准输出，在这种情况下，如果它很长，您需要自己捕获它。

有一个非常有用的技巧，在谷歌搜索 R 相关主题时可能会很棘手，因为 R 是单个字符。为了有效，请在您的搜索词前加上“ **r-help: ”。**例如，

> `r-help:Running a program`

以下是两本可能有用/帮助您入门的手册：

*   [简介](http://cran.r-project.org/doc/manuals/R-intro.html)
*   [用 R 编程](http://manuals.bioinformatics.ucr.edu/home/programming-in-r)

并查看[The R Manuals](http://cran.r-project.org/manuals.html)。

更多信息/常见问题解答等可以在[R 网站](http://cran.r-project.org/)本身找到。我发现有*很多*关于 R 的信息（尤其是教程等），但是找到它们可能会很棘手。“r-help” google 技巧确实对此有所帮助。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-16T10:56:42.460

你也可以试试：

```
Rscript mow.R 
```

在控制台上获得输出。

# c++ - 如何初始化 stl 容器中存在的类的数据？

> ID：11502601
> 
> 赞同：0
> 
> 时间：2012-07-16T10:37:13.867
> 
> 标签：c++, stl

例如，我有 A 类：

```
 class A{
           int value_;
           public:
           A(A& a){
                value_ = a.value_;
           }
           A(int value){
                value_ = value;
           }
 }; 
```

我想要一个 A 类的向量，但我想`A(int value)`为所有这些传递一个值。

```
 std::vector<A,allocator<A>> my_vector; 
```

*   最好的方法是什么？
*   有没有办法使用分配器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:46:19.073

> [c++11](/questions/tagged/c%2b%2b11 "显示标记为“c++11”的问题")
> 
> 随着新标准的增加，分配器类型的对象被赋予了功能。
> 
> 添加的功能之一是分配器现在允许进行安装，也就是。使用复制/移动以外的*构造函数*构造对象。
> 
> * * *
> 
> ```
> template< class U, class... Args > void construct( U* p, Args&&... args ); 
> ```
> 
> * * *
> 
> 该标准确实保证 STL 容器必须使用这个新特性，并且说您可以实现自己的分配器，只是为了默认初始化一个*不可默认初始化*的对象。
> 
> * * *
> 
> *^(这不是最漂亮的解决方案，但无论你的船漂浮什么......)*

> [c++03](/questions/tagged/c%2b%2b03 "显示标记为“c++03”的问题")
> 
> 分配器与对象初始化的那部分无关，它的唯一目的是分配/释放内存，您所指的初始化类型在其他地方完成。
> 
> 分配器将调用的唯一构造函数是*复制构造函数*，当有人要求它执行*放置新*时，传递给该*复制*构造函数的值已经在其他地方建立。
> 
> 总结一下；**不，您不能使用分配器来解决这个特定问题。**

* * *

### std::vector 何时需要使用*default-ctor*？

`std::vector`仅在两种情况下使用它所拥有的类型的*默认构造函数：*

1.  您`std::vector`在适当的构造函数重载中指定元素的数量，但**不**提供默认值

2.  您使用`std::vector<T>::resize (n)`并增加容器中的对象数量（请注意缺少指定*成员函数*的第二个参数）

* * *

考虑到上述内容，我们可以使用容器做很多事情，而无需在我们的对象中提供默认构造函数，例如将其初始化为包含*N*个值为*X*的元素。

```
struct A{
  A (A const& a)
   : value_ (a.value_) 
  { } 

  A (int value)
    : value_ (value)
  {}  

  int value_;
}; 
```

```
int
main (int argc, char *argv[])
{
  std::vector<A> vec (5, A(1)); // initialize vector with 5 elements of A(1)

  vec.push_back (A(3));         // add another element
} 
```

* * *

### 但我真的希望能够使用*vec.resize()*！？

然后你有~~两个~~、~~三个~~、四个选项：

1.  使用使用分配器的*C++11方法*

2.  使您的对象具有默认构造函数

3.  用一个非常薄的包装器包装您的对象，其唯一目的是默认初始化包含对象（在某些情况下这可能更容易说然后做）

4.  *“在 boost::optional 中包装 [对象] 实际上为任何类型提供了默认 ctor”* - @ [Xeo](https://stackoverflow.com/users/500104/xeo)

# .net - 合并 XML 和 XSD 文件

> ID：11502608
> 
> 赞同：0
> 
> 时间：2012-07-16T10:38:00.667
> 
> 标签：.net, xml, xslt, xsd

我有以下 XML 文件：

```
<my:myFields xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38">
 <my:Text1></my:Text1>
 <my:Group>
  <my:Text2></my:Text2>
 </my:Group>
</my:myFields> 
```

以及它的 XSD 定义：

```
<xsd:schema targetNamespace="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <xsd:element name="myFields">
  <xsd:complexType>
   <xsd:sequence>
    <xsd:element ref="my:Text1" minOccurs="0"/>
    <xsd:element ref="my:Group" minOccurs="0" maxOccurs="unbounded" />
   </xsd:sequence>
   <xsd:anyAttribute processContents="lax" namespace="http://www.w3.org/XML/1998/namespace"/>
  </xsd:complexType>
 </xsd:element>
 <xsd:element name="Text1" type="xsd:string"/>
 <xsd:element name="Group">
  <xsd:complexType>
   <xsd:sequence>
    <xsd:element ref="my:Text2" minOccurs="0"/>
   </xsd:sequence>
  </xsd:complexType>
  <xsd:element name="Text2" type="xsd:string"/>
 </xsd:element>
</xsd:schema> 
```

我想创建以下基于 XML 和 XSD 的 XML 文件：

```
<my:myFields xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38">
 <my:Text1 type="string" minOccurs="0"></my:Text1>
 <my:Group minOccurs="0" maxOccurs="unbounded">
  <my:Text2 type="string" minOccurs="0"></my:Text2>
 </my:Group>
</my:myFields> 
```

使用 .NET 平台最简单的方法是什么？是否可以使用 XSLT 转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T13:15:50.677

给定一个正确的模式

```
<xsd:schema targetNamespace="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:element name="myFields">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="my:Text1" minOccurs="0"/>
                <xsd:element ref="my:Group" minOccurs="0" maxOccurs="unbounded" />
            </xsd:sequence>
            <xsd:anyAttribute processContents="lax" namespace="http://www.w3.org/XML/1998/namespace"/>
        </xsd:complexType>
    </xsd:element>
    <xsd:element name="Text1" type="xsd:string"/>
    <xsd:element name="Text2" type="xsd:string"/>
    <xsd:element name="Group">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element ref="my:Text2" minOccurs="0"/>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

以及您指定的 XML 输入，此样式表

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:ext="http://exslt.org/common" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38">
<xsl:output method="xml" indent="yes"/>
    <xsl:variable name="schema" select="document('so.xsd')//xsd:schema"/>

<xsl:template match="/">
     <xsl:copy>
         <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
</xsl:template>

<xsl:template match="my:*">
    <xsl:variable name="name" select="name()"></xsl:variable>
    <xsl:variable name="basename" select="substring-after($name,':')"></xsl:variable>
    <xsl:copy>
        <xsl:variable name="types" select="$schema//xsd:element[@name=$basename]/@type"/>
        <xsl:if test="$types">
            <xsl:attribute name="type">
                <xsl:value-of select="$types"/>
            </xsl:attribute>
        </xsl:if>
        <xsl:for-each select="$schema//xsd:element[@ref=$name]/@*[name()!='ref']">
            <xsl:attribute name="{name()}">
                <xsl:value-of select="."/>
            </xsl:attribute>
        </xsl:for-each>
        <xsl:apply-templates select="*"/>
    </xsl:copy>
</xsl:template>

<xsl:template match="node()|@*">
    <xsl:copy><xsl:apply-templates select="node()|@*" /></xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

产生以下输出，我相信这是您想要的。

```
<?xml version="1.0" encoding="utf-8"?>
<my:myFields xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xd="http://schemas.microsoft.com/office/infopath/2003">
   <my:Text1 type="xsd:string" minOccurs="0"/>
   <my:Group minOccurs="0" maxOccurs="unbounded">
      <my:Text2 type="xsd:string" minOccurs="0"/>
   </my:Group>
</my:myFields> 
```

它所做的是将模式作为文档加载，然后对于每个元素，在文档中查找该类型的元素，复制其属性，然后查找正确类型的 ref 并复制这些元素。

唯一的问题是它实际上并没有沿着模式寻找正确的部分，它只是通过名称来解决它们。对于小型模式，可能大多数时候它是正确的，但有时它可能会导致问题。但是对于您目前所展示的内容，它将起作用，并且是一个开始的地方

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T13:50:04.940

此 XSLT 2.0 样式表将探索您的模式，并为 minOccurs、maxOccurs 和类型插入适当的属性值。由于它是基于模块化的，因此很容易扩展您可能希望包含的其他 xsd 属性。为了便于演示，我在样式表中插入了模式。尽管在生产中，您可能会将其留在外部。所以相应地调整。

```
<xsl:stylesheet version="2.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:fn="http://www.w3.org/2005/xpath-functions"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  xmlns:my="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38"
  xmlns:l="http://stackoverflow.com/questions/11502608"
  exclude-result-prefixes="xsl xs fn xsd l">
<xsl:output indent="yes"/>

 <xsd:schema targetNamespace="http://schemas.microsoft.com/office/infopath/2003/myXSD/2012-05-05T12:20:38"

 ... etc .. INSERT SCHEMA HERE !!!

 </xsd:schema>

<xsl:template match="@*|node()">
 <xsl:copy>
  <xsl:apply-templates select="@*|node()" />
 </xsl:copy>  
</xsl:template>

<xsl:function name="l:xsd-attrib" as="attribute()?">
 <xsl:param name="ele-name" as="xs:string"/>
 <xsl:param name="attri-name" as="xs:string"/>
 <xsl:sequence select="document('')/xsl:stylesheet/xsd:schema
    //(xsd:element[ (substring-after(@ref,'my:')=$ele-name) or (@name=$ele-name)]
    /@*[local-name(self::attribute())=$attri-name])" />
</xsl:function>

<xsl:template name="l:emit-xsd-attri">
 <xsl:param name="my-node" as="element()" />
 <xsl:param name="attri-name" as="xs:string" />  
  <xsl:variable name="ele" select="local-name( $my-node)" />
  <xsl:if test="l:xsd-attrib( $ele, $attri-name)">
   <xsl:attribute name="{$attri-name}"><xsl:value-of select="
     for $l in l:xsd-attrib( $ele, $attri-name) return
      if (contains( $l, ':')) then substring-after( $l, ':') else $l" />
    </xsl:attribute>
  </xsl:if>
</xsl:template> 

<xsl:template match="my:*"> 
 <xsl:copy>
  <xsl:apply-templates select="@*" />

  <xsl:call-template name="l:emit-xsd-attri">
   <xsl:with-param name="my-node" select="." />
   <xsl:with-param name="attri-name" select="'minOccurs'" />  
  </xsl:call-template>

  <xsl:call-template name="l:emit-xsd-attri">
   <xsl:with-param name="my-node" select="." />
   <xsl:with-param name="attri-name" select="'maxOccurs'" />  
  </xsl:call-template>

  <xsl:call-template name="l:emit-xsd-attri">
   <xsl:with-param name="my-node" select="." />
   <xsl:with-param name="attri-name" select="'type'" />  
  </xsl:call-template>

  <xsl:apply-templates select="node()" />
 </xsl:copy>  
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:19:32.097

当您根据模式验证 XML 实例文档时，结果是一个 PSVI（模式验证后实例），其中包含您需要的所有信息等等。唯一的问题是，如何在实践中掌握这些信息。这取决于您要使用的工具。例如，如果您使用 Xerces 作为模式验证器，则有一个 API 可以公开模式处理器添加到实例的 PSVI 注释。

# php - 通过套接字修复流式视频的 3gp 标头

> ID：11502609
> 
> 赞同：2
> 
> 时间：2012-07-16T10:38:09.497
> 
> 标签：php, android, sockets, streaming

我从 Android 到我的 php 服务器的流式视频有问题。无论我使用什么播放器，我都无法播放我的视频，因为 moov atom 丢失了。我按照[Mattakis](http://www.mattakis.com/blog/kisg/20090708/broadcasting-video-with-android-without-writing-to-the-file-system)的教程流式传输我的视频和一个小 php 脚本来重新编码收到的 3gp 视频的标题。

安卓端：

```
s = new Socket("192.168.1.5", 6000);
        ParcelFileDescriptor pfd= ParcelFileDescriptor.fromSocket(s);
        recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
        recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
        recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
        recorder.setVideoEncodingBitRate(512 * 1000);
        recorder.setVideoFrameRate(30);
        recorder.setVideoSize(320, 240);
        recorder.setOutputFile(pfd.getFileDescriptor()); 
```

Php 脚本：我在[此](https://stackoverflow.com/questions/10071768/video-streaming-from-android-device-to-lamp-server)链接的第三次更新中使用了该脚本

代码 ：

```
 #!/usr/bin/php5
<?php

    $socket = stream_socket_server("tcp://192.168.0.102:9000", $errno, $errstr);  

 $file = "saved.3gp";

$threegp_header = "\x00\x00\x00\x18\x66\x74\x79\x70\x33\x67\x70\x34\x00\x00\x03\x00\x33\x67\x70\x34\x33\x67\x70\x36";
 $four_bytes = "\x00\x00\x00\x00";
if (!$socket) {

echo "$errstr ($errno)\n";

} else {

echo "server start listening\n";

while ( $conn = @stream_socket_accept($socket, 180))
{
    echo "phone connected\n";

    $handle = fopen($file,"w");

    //mediaRecorder gives invalid stream header, so I replace it discarding first 32 
    byte, replacing with 28 good byte (standard 3gp header plus 4 empty bytes)
    $discard = stream_get_contents($conn, 32);
    fwrite($handle, $threegp_header);
    fwrite($handle, $four_bytes);

    //then confinue to write stream on file until phone stop streaming
    while(!feof($conn))
    {
        fwrite($handle, stream_get_contents($conn, 1500));
    }
    echo "phone disconnected\n";
    fclose($handle);

    //then i had to update 3gp header (bytes 25 to 28) with the offset where moov atom 
    starts
    $handle = fopen($file,"c"); 
    $output = shell_exec('grep -aobE "moov" '.$file);
    $moov_pos = preg_replace('/moov:(\d+)/i', '\\1', $output);
    $moov_pos_ex = strtoupper(str_pad(dechex($moov_pos - 24), 8, "0", STR_PAD_LEFT));
    fwrite($handle, $threegp_header);
    $tmp = '';
    foreach(str_split($moov_pos_ex,2) as $hex)
    {
        $tmp .= pack('C*', hexdec($hex));
    }
    fwrite($handle, $tmp);
    fclose($handle);

}
echo "phone disconnected\n";

 }
 @fclose($handle);
 fclose($socket);
 ?> 
```

我还尝试在保存整个文件后手动重新编码标题，但它不起作用。

# facebook - 来自页面选项卡应用程序的活动 - 没有画布

> ID：11502613
> 
> 赞同：0
> 
> 时间：2012-07-16T10:38:19.950
> 
> 标签：facebook, android-activity, tabs

有没有办法仅从页面选项卡应用程序发布活动？

我设法发布活动，但该应用程序必须配置为 Facebook 上的应用程序（带画布）。这意味着应用程序的链接是*http://apps.facebook.com/...* - 我只希望该链接位于页面选项卡应用程序上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:59:14.210

在您的 Facebook 应用程序设置中设置页面标签 URL 和安全页面标签 URL。然后使用此对话框将应用程序添加到您的 Facebook 页面：[https](https://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&redirect_uri=YOUR_PAGE_TAB_URL) ://www.facebook.com/dialog/pagetab?app_id=YOUR_APP_ID&redirect_uri=YOUR_PAGE_TAB_URL 。

**更新**：
我建议您进行重定向。您可以使用以下函数 (PHP) 检查应用程序是否显示在页面选项卡内：

```
function referrerIsFacebookCanvasApp() {
    if (stripos($_SERVER['HTTP_REFERER'], "apps.facebook.com") === true) {
        return true;
    }
    return false;
} 
```

但要小心 - 引荐来源标头可能是伪造的。

**更新 2**（基于您的最新评论）：我想解决您的问题的唯一方法是将操作 ID 与已发布操作的页面的页面 ID 一起存储，然后读取 GET 请求参数，它们是像这样通过：

[https://apps.facebook.com/YOUR_APP_NAMESPACE/?fb_source=timeline_og&fb_action_ids=THE_ACTION_ID&fb_action_types=YOUR_APP_NAMESPACE%3ADO_SOMETHING&](https://apps.facebook.com/YOUR_APP_NAMESPACE/?fb_source=timeline_og&fb_action_ids=THE_ACTION_ID&fb_action_types=YOUR_APP_NAMESPACE%3ADO_SOMETHING&) ...

或这个

[http://www.facebook.com/l.php?u=https://YOUR_SITE.com/?type=OBJECT_TYPE&locale=en_US&title=TITLE&image=thumb.png&description=DESCRIPTION&fb_action_ids=ACTION_ID&fb_action_types=YOUR_APP_NAMESPACE%3ADO_SOMETHING&fb_source=aggregation&fb_aggregation_id=AGGREGATION_ID&](http://www.facebook.com/l.php?u=https://YOUR_SITE.com/?type=OBJECT_TYPE&locale=en_US&title=TITLE&image=thumb.png&description=DESCRIPTION&fb_action_ids=ACTION_ID&fb_action_types=YOUR_APP_NAMESPACE%3ADO_SOMETHING&fb_source=aggregation&fb_aggregation_id=AGGREGATION_ID&) . .

（您应该可以通过阅读来做到这一点`parent.location`）
然后相应地重定向。

# jquery - 如何在 Backbone.js 中加载具有外键关系的子模型？

> ID：11502614
> 
> 赞同：4
> 
> 时间：2012-07-16T10:38:20.213
> 
> 标签：jquery, python, backbone.js, tastypie, backbone-relational

对不起，如果这有点令人费解......我还在学习 Backbone.js......

加载和保存具有子模型的主干模型的正确方法是什么？（我什至应该有子模型吗？）

例如，（请原谅咖啡脚本），如果我有类似的东西：

```
class Address extends Backbone.Model
  urlRoot: '/api/v1/address/'
  url: -> return @urlRoot+@id+'/?format=json'
  defaults: {'city': '', 'state': ''}

class Person extends Backbone.Model
  urlRoot: '/api/v1/person/'
  url: -> return @urlRoot+@id+'/?format=json'
  defaults: { name: 'Anon', address: new Address }

... and then I do this ...

dude = new Person
dude.set('id',101)
dude.fetch()
// Response returns {name: 'The Dude', address: '/api/v1/address/1998/'}
// And now, dude.get('address') is '/api/v1/address/1998' and no Address object

where = new Address
where.set('id',1998)
where.fetch()
// Response returns {city: 'Venice', state; 'CA'} 
```

**我想说**的是 dude.fetch() 并让它同时获取这个家伙和他的地址，当我调用 Backbone.sync('update',dude) 时，我想保存这个家伙和他的地址。如何？

在后端，我使用tastepie 为一些SQLAlchemy 表（不是Django 的ORM）构建我的api，所以我有一个资源用于我的Person 表和Address 表：

```
class AddressResource(SQLAlchemyResource):
    class Meta:
        resource_name = 'address'
        object_class = AddressSQLAlchemyORMClass

class PersonResource(SQLAlchemyResource):
    address = ForeignKey(AddressResource, 'address')
    class Meta:
        resource_name = 'person'
        object_class = PersonSQLAlchemyORMClass 
```

Tastypie 的[ForeignKey](http://django-tastypie.readthedocs.org/en/latest/interacting.html)函数创建一个映射，将**URL**返回到相关地址。

我尝试重载 Dude.parse() 函数来调用 Address() 的 fetch，但它不起作用并且感觉不对，并且引发了各种各样的问题：

1.  我应该修改我的美味响应以将地址包含为嵌套对象吗？
2.  如果我更改为嵌套对象，我应该使用[主干关系，如未](https://github.com/PaulUithol/Backbone-relational/)[创建主干关系相关模型](https://stackoverflow.com/questions/11316782/backbone-relational-related-models-not-being-created)的问题，还是过度杀伤？
3.  我应该[重载 parse()](http://paltman.com/2012/04/30/integration-backbonejs-tastypie/)或 fetch() 函数还是创建自己的主干.Sync() 以获取响应然后手动执行此操作？
4.  既然是一对一的，我是否应该只拥有一个模型而不是子模型，然后在一个请求中将信息一起发送回？

有这样做的标准方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T13:28:33.180

使用 Tastypie，您可以通过在 ForeignKey 定义中指定**full=True**将响应更改为嵌套对象而不是链接：

```
class PersonResource(SQLAlchemyResource):
    address = ForeignKey(AddressResource, 'address', full=True) 
```

这将返回地址对象以及人员。

接下来，我仍然不知道*这是否是最好的方法*，但我将我的子模型移出属性，并重载 parse() 来设置它，并重载 update() 来保存它，比如：

```
class Person extends Backbone.Model
  address: new Address
  urlRoot: '/api/v1/person/'
  url: -> return @urlRoot+@id+'/?format=json'
  defaults: { name: 'Anon'}

  parse: (response) ->
     addressResp = response.address || {}
     addressAttr = @address.parse(addressResp)
     @address.set(addressAttr)
     return response

  update: (options) ->
     @set('address',@address.toJSON())
     Backbone.sync 'update', @, options 
```

在此示例中，我可以将地址添加回属性并使用 set/get 对其进行管理，但是在我自己的环境中，我创建了一个备用 toJSON 函数以将 json 发布到服务器，但找不到将 json 设置为对象而不将其从集合更改为 json 响应的好方法。

# c# - 如何使用 asp.net MVC 在 GridView 中编辑数据？

> ID：11502615
> 
> 赞同：2
> 
> 时间：2012-07-16T10:38:19.803
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008

我正在将数据从 SQL 服务器绑定到 gridview，但在编辑时遇到了一些问题。

这是我的模型代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data;
using System.Data.SqlClient;
using System.Data.Entity;

namespace Gridview_BugTracker.Models
{
    public class BugTracker_DataHelper
      {

        public static List<BugTracker_DataHelper> GetList{get;set;}

          public string ProjectId { get; set; }
          public string projectName { get; set; }           
          public string Description { get; set; }
           public  string status { get; set; }         
        }     

   } 
```

这是我的控制器代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Data;
using Gridview_BugTracker.Models;
using System.Data.SqlClient;
using System.Data.Entity;

namespace Gridview_BugTracker.Controllers
{
    public class ProjectsController : Controller
    {
        //
        // GET: /Projects/

        public ActionResult Index()
        {
            var bugedlist = GetList(); 
            return View(bugedlist);
        }
        [HttpGet]
        public ActionResult Edit(int projectId)
        {
             BugTracker_DataHelper bugedit = new BugTracker_DataHelper();           
             var edit = EditList();
             bugedit.ProjectId =Convert.ToString(projectId);
             return View(edit);      
        }

        public List<BugTracker_DataHelper> GetList()
        {
            var modelList = new List<BugTracker_DataHelper>();
            using (SqlConnection conn = new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
            {
                conn.Open();
                SqlCommand dCmd = new SqlCommand("Select * from Projects", conn);
                SqlDataAdapter da = new SqlDataAdapter(dCmd);
                DataSet ds = new DataSet();
                da.Fill(ds);
                conn.Close();
                for (int i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                {
                    var model = new BugTracker_DataHelper();
                    model.ProjectId = ds.Tables[0].Rows[i]["ProjectId"].ToString();
                    model.projectName = ds.Tables[0].Rows[i]["projectName"].ToString();
                    model.Description = ds.Tables[0].Rows[i]["Description"].ToString();
                    model.status = ds.Tables[0].Rows[i]["Status"].ToString();
                    modelList.Add(model);
                }
            }
            return modelList;
        }

     [HttpPost]   
    public ActionResult EditList()
        {
            var editlist = new List<BugTracker_DataHelper>();
            using (SqlConnection editconn=new SqlConnection(@"Integrated Security=SSPI;Persist Security Info=False;Initial Catalog=BugTracker;Data Source=SSDEV6\SQLEXPRESS"))
            {
                editconn.Open();
                var modeledit = new BugTracker_DataHelper();
                SqlCommand ecmd = new SqlCommand("EditGetList", editconn);
                ecmd.CommandType = CommandType.StoredProcedure;
                ecmd.Parameters.Add("@projectID", SqlDbType.Int).Value = modeledit.ProjectId;
                Object prjid = ecmd.ExecuteNonQuery();
                editconn.Close();                 

                editlist.Add(modeledit);
            }
            return View(editlist);
        } 
```

网格视图代码

```
 <%@ Page Language="C#" Inherits="System.Web.Mvc.ViewPage<IEnumerable<Gridview_BugTracker.Models.BugTracker_DataHelper>>" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title>Index</title>
</head>
<body>
    <div>
    <h2>Index</h2>
<table>
    <tr>         
        <th>
            ProjectName
        </th>

        <th>
           Status
        </th>       

    </tr>

 <% foreach (var item in Model) { %> 

    <tr> 

        <td> 
            <%:Html.LabelForModel(item.projectName) %> 
        </td> 

        <td>
         <%:Html.LabelForModel(item.status) %>
        </td>

         <td>
            <%: Html.ActionLink("Edit", "Edit", new { projectId = item.projectName})%> |
            <%: Html.ActionLink("Details", "Details", new { projectId = item.Description })%> |
            <%: Html.ActionLink("Delete", "Delete", new { projectId = item.status })%>
        </td>

        </tr>

       <%} %>

</table>
    </div>
</body>
</html> 
```

编辑页面代码：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/SiteMaster.Master" Inherits="System.Web.Mvc.ViewPage<Gridview_BugTracker.Models.BugTracker_DataHelper>" %>

<asp:Content ID="Content1" ContentPlaceHolderID="TitleContent" runat="server">
    editindex
</asp:Content>

<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

<h2>editindex</h2>

    <fieldset>
        <legend>EDit</legend>        

        <div class="editor-label">
           <%:  Html.LabelFor(Model => Model.ProjectId) %>
        </div>
        <div class="editor-field">
           <%: Html.EditorFor(model => model) %>
           <%:  Html.ValidationMessageFor(model => model.projectName) %>
        </div>

        <div class="editor-label">
           <%: Html.LabelFor(model => model.Description) %>
        </div>
        <div class="editor-field">
            <%: Html.EditorFor(model => model.Description) %>
            <%: Html.ValidationMessageFor(model => model.Description)%>
        </div>

         <div class="editor-label">
           <%:  Html.LabelFor(model => model.status) %>
        </div>
        <div class="editor-field">
          <%:   Html.EditorFor(model => model.status) %>
          <%:    Html.ValidationMessageFor(model => model.status) %>
        </div>   

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
</asp:Content> 
```

当我单击编辑按钮时，我收到以下错误。

## “/”应用程序中的服务器错误。

参数字典包含“Gridview_BugTracker.Controllers.ProjectsController”中方法“System.Web.Mvc.ActionResult Edit(Int32)”的不可空类型“System.Int32”的参数“projectId”的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：parameters 描述：当前web请求执行过程中发生了未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:46:28.437

我相信您的问题可能在以下行。

```
 <%: Html.ActionLink("Edit", "Edit", new { projectId = item.projectName})%> 
```

您的编辑操作需要一个 Int 但您正在传递它，我假设它是一个字符串。所以它永远不会正确绑定，因此你最终会得到一个 null projectId。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T07:39:17.113

```
public ActionResult Edit(int projectId)
{
     BugTracker_DataHelper bugedit = new BugTracker_DataHelper();           
     var edit = EditList();
     bugedit.ProjectId =Convert.ToString(projectId);
     return View(edit);      
} 
```

我认为您的问题在于方法，该方法应重写如下：

```
public ActionResult Edit(int projectId)
{
     BugTracker_DataHelper bugedit = new BugTracker_DataHelper();           
     bugedit.ProjectId =Convert.ToString(projectId);
     var edit = EditList();
     return View(edit);      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:09:57.547

```
ProjectName is declared as string
      public string projectName { get; set; } 
```

在编辑项目时，您应该传递一个 int 但您传递的是一个字符串

```
<%: Html.ActionLink("Edit", "Edit", new { projectId = item.projectName})%> 
```

# mysql - MySQL通配符严格单词出现搜索

> ID：11502618
> 
> 赞同：0
> 
> 时间：2012-07-16T10:38:28.030
> 
> 标签：mysql

我对 MySQL 通配符搜索有疑问。我试图实现的是 - 通配符搜索，但它应该对单词的出现非常严格。

例如：我想搜索“Science”这个词，它会带出所有带有Science的词，但它会限制带出像Score、Scrabber等接近的词。

我需要帮助，请提前谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:50:28.050

阅读 soundex levenstein 和 metaphone 字符串函数。这是一个开始[http://forums.mysql.com/read.php?20,199681,199681#msg-199681](http://forums.mysql.com/read.php?20,199681,199681#msg-199681)

此外，我相信 SOLR 将是此类搜索的更好候选者。

# java - 查看何时单击鼠标按钮而不向所有组件添加鼠标侦听器

> ID：11502619
> 
> 赞同：1
> 
> 时间：2012-07-16T10:38:31.603
> 
> 标签：java, swing, jframe, mouseevent, mouselistener

我有一个 JFrame，其中包含许多具有不同功能的子组件和子面板。我已经为其中一些添加了 mouseListeners。

我希望能够在框架中单击鼠标按钮时调用一个函数，而不管焦点是什么组件。我不想将鼠标侦听器添加到所有组件。很像 keyEventDispacher，我将它用于键盘。

我看过这个[Dispatch MouseEvent](https://stackoverflow.com/questions/2708408/dispatch-mouseevent)但我无法解决。谁能给我一个小例子来演示它是如何工作的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:55:38.777

这是一个全局鼠标监听器的简单示例：

```
public static void main ( String[] args )
{
    final JFrame frame = new JFrame ();

    // Some content
    frame.getContentPane ().setLayout ( new FlowLayout ( FlowLayout.CENTER, 5, 5 ) );
    frame.getContentPane ().add ( new JButton ( "Test" ) );
    frame.getContentPane ().add ( new JLabel ( "Test" ) );
    frame.getContentPane ().add ( new JTextField ( "Test" ) );

    // Global mouse listener
    final AWTEventListener listener = new AWTEventListener ()
    {
        public void eventDispatched ( AWTEvent event )
        {
            // Event and component that recieved that event
            MouseEvent me = ( MouseEvent ) event;
            Component c = me.getComponent ();

            // Ignoring mouse events from any other frame
            if ( SwingUtilities.getWindowAncestor ( c ) == frame )
            {
                if ( event.getID () == MouseEvent.MOUSE_PRESSED )
                {
                    System.out.println ( "Mouse pressed on " + c.getClass ().getCanonicalName () );
                }
                if ( event.getID () == MouseEvent.MOUSE_RELEASED )
                {
                    System.out.println ( "Mouse released on " + c.getClass ().getCanonicalName () );
                }
                if ( event.getID () == MouseEvent.MOUSE_ENTERED )
                {
                    System.out.println ( "Mouse entered " + c.getClass ().getCanonicalName () );
                }
                if ( event.getID () == MouseEvent.MOUSE_EXITED )
                {
                    System.out.println ( "Mouse exited " + c.getClass ().getCanonicalName () );
                }
            }
        }
    };
    Toolkit.getDefaultToolkit ().addAWTEventListener ( listener, AWTEvent.MOUSE_EVENT_MASK );

    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

请注意，此侦听器将通知您任何框架/对话框/窗口/弹出窗口中的每个鼠标事件。这就是为什么您应该像我在示例中所做的那样将您的操作限制在某个特定的框架中，以防您不需要来自其他框架/窗口/...的事件

顺便说一句，您可以使用相同的方法轻松地在全局范围内监听其他一些事件（例如关键事件）。例如 - 使用 AWTEvent.KEY_EVENT_MASK 键而不是 AWTEvent.MOUSE_EVENT_MASK 并将 AWTEvent 转换为 KeyEvent 而不是 MouseEvent。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:52:26.580

在最好的时候，这将是一个混乱和痛苦的世界……

在这里查看[带有 AWTEventListener 的 Global Event Listeners 以及如何从中提取 MouseEvent](https://stackoverflow.com/questions/8586098/global-event-listeners-with-awteventlistener-how-to-pull-mouseevents-from-it)以获得替代概念。基本上它是一个全局鼠标监听器。你需要做很多工作才能让它为你工作（检查孩子是否属于父母等），但它确实运作良好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:47:14.410

尝试使用`MouseEvent Class`, 与静态方法`MOUSE_CLICKED`

**有关详细信息，请参见此处：**

[http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html](http://docs.oracle.com/javase/6/docs/api/java/awt/event/MouseEvent.html)

**参见roseindia的这个例子**

```
import java.awt.*;
import java.awt.event.*;

public class MouseClick {
  Label lbl;
  public static void main(String[] args) {
  MouseClick MC = new MouseClick();
  }

  public MouseClick(){
  Frame f = new Frame("Checking the mouse click");
  Panel p = new Panel();
  Button button = new Button("Click Me");
  button.addMouseListener(new MyMouseListener());
  p.add(button, BorderLayout.NORTH);
  f.add(p,BorderLayout.NORTH);
  lbl = new Label("Roseindia.net");
  f.add(lbl, BorderLayout.CENTER);
  f.addWindowListener(new WindowAdapter(){
  public void windowClosing(WindowEvent we){
  System.exit(0);
  }
  });
  f.setSize(400,400);
  f.setVisible(true);
  }

  public class MyMouseListener extends MouseAdapter{
  public void mouseClicked(MouseEvent me){
  String str = lbl.getText();
  if (str.equals("Roseindia.net")){
  lbl.setText("You have clicke the button.");
  }
  else if (str.equals("You have clicke the button.")){
  lbl.setText("Roseindia.net");
  }
  }
  }
} 
```

**请参阅 Oracle 的此示例**

```
 public class MouseEventDemo ... implements MouseListener {
            //where initialization occurs:
            //Register for mouse events on blankArea and the panel.
            blankArea.addMouseListener(this);
            addMouseListener(this);
        ...

        public void mousePressed(MouseEvent e) {
           saySomething("Mouse pressed; # of clicks: "
                        + e.getClickCount(), e);
        }

        public void mouseReleased(MouseEvent e) {
           saySomething("Mouse released; # of clicks: "
                        + e.getClickCount(), e);
        }

        public void mouseEntered(MouseEvent e) {
           saySomething("Mouse entered", e);
        }

        public void mouseExited(MouseEvent e) {
           saySomething("Mouse exited", e);
        }

        public void mouseClicked(MouseEvent e) {
           saySomething("Mouse clicked (# of clicks: "
                        + e.getClickCount() + ")", e);
        }

        void saySomething(String eventDescription, MouseEvent e) {
            textArea.append(eventDescription + " detected on "
                            + e.getComponent().getClass().getName()
                            + "." + newline);
        }
    } 
```

# qt-creator - 我可以在 Qt Creator 中隐藏整个 GUI 吗？

> ID：11502624
> 
> 赞同：3
> 
> 时间：2012-07-16T10:38:48.963
> 
> 标签：qt-creator

在全屏模式下，菜单栏、左侧边栏和底部栏仍然存在。我对它的键盘快捷键相当熟悉，我想尝试“无干扰”编程。可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-25T05:05:07.280

在当前版本的 QtCreator (3.5.0) 中，*窗口*菜单中有选项可以隐藏“模式选择器”和左侧边栏（也可以通过 切换`Alt+0`）。底部面板可以关闭，但它看起来不像栏本身可以。

实现此目的的另一种方法是将当前文档面板拆分为一个新窗口，然后全屏显示该面板。（分屏按钮位于面板的右上角 -> 选择“在新窗口中打开”。）默认键盘快捷键是`Ctrl+E`, `4`，或者您也可以使用*Window* ->*在新窗口中打开*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-19T14:03:32.700

按`Alt`+`0`显示/隐藏侧边栏并`Esc`多次按键，直到底部栏最小化。

这些快捷方式并非特定于全屏模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-27T18:12:43.980

**水平空间：**

要隐藏**模式选择器**并节省显示屏空间，请选择窗口 > 模式选择器样式 > 隐藏。要仅在模式选择器上显示图标，请选择“仅图标”样式。

如何设置快捷方式：

工具 -> 选项 -> 环境 -> 键盘

在键盘快捷键过滤器中搜索“CycleModeSelectorStyle”。设置键盘快捷键，例如 Ctrl + Shift + M

这与其他答案提到的快捷方式相结合： Alt + 0 将在水平方向提供最大可用空间。

**垂直空间：**

从菜单中选择：窗口 -> 全屏（Ctrl + Shift + F11）

垂直空间可以节省更多，但由于 QtCreator OR Unity 错误，此功能已被禁用[https://codereview.qt-project.org/#/c/194300/](https://codereview.qt-project.org/#/c/194300/)

# .net - 具有前后条件的 MS 单元测试

> ID：11502628
> 
> 赞同：4
> 
> 时间：2012-07-16T10:39:06.860
> 
> 标签：.net, visual-studio, mstest

我一直在搜索互联网和文档，但找不到 MS 单元测试是否可以在单元测试周围有前置和后置条件，有人知道这是否可以做到吗？

我正在使用 .net 4.5 和 vs 2012。

在 Junit 中的示例你可以有一个 @before 和 @after 将在每个单元测试之前和每个单元测试之后运行，我正在寻找相同的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:05:17.133

看看[Spec#](http://research.microsoft.com/en-us/projects/specsharp/)；这允许您“声明”前置/后置条件。

**编辑** 哦，我可能理解错了这个问题。我认为你需要看看[[TestInitialize]](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.80%29.aspx)和[[TestCleanup]](http://msdn.microsoft.com/en-US/library/microsoft.visualstudio.testtools.unittesting.testcleanupattribute%28v=vs.80%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T14:36:30.870

检查此 MSDN 链接上的备注和示例，该链接解释了所有程序集级别、类级别和测试方法（您正在寻找的方法）很好地解释。

[http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.testtools.unittesting.testinitializeattribute%28v=vs.80%29.aspx)

简而言之，以下示例来自上述链接：

```
using Microsoft.VisualStudio.TestTools.UnitTesting;
using SampleClassLib;
using System;
using System.IO;
using System.Windows.Forms;

namespace TestNamespace
{
   [TestClass()]
   public class DivideClassTest
   {
      [AssemblyInitialize()]
      public static void AssemblyInit(TestContext context)
      {
         MessageBox.Show("Assembly Init");
         }

      [ClassInitialize()]
      public static void ClassInit(TestContext context)
      {
         MessageBox.Show("ClassInit");
      }

      [TestInitialize()]
      public void Initialize()
      {
         MessageBox.Show("TestMethodInit");
      }

      [TestCleanup()]
      public void Cleanup()
      {
         MessageBox.Show("TestMethodCleanup");
      }

      [ClassCleanup()]
      public static void ClassCleanup()
      {
         MessageBox.Show("ClassCleanup");
      }

      [AssemblyCleanup()]
      public static void AssemblyCleanup()
      {
         MessageBox.Show("AssemblyCleanup");
      }

      [TestMethod()]
      [ExpectedException(typeof(System.DivideByZeroException))]
      public void DivideMethodTest()
      {
         DivideClass target = new DivideClass();
         int a = 0; 
         int actual;
         actual = target.DivideMethod(a);
      }
   }
} 
```

# ruby-on-rails - 如何将数字转换为字符串后缀

> ID：11502629
> 
> 赞同：5
> 
> 时间：2012-07-16T10:39:07.220
> 
> 标签：ruby-on-rails, ruby

正如你在红宝石中所知道的，你可以做到

```
"%03d" % 5
#=>  "005"

"%03d" % 55
#=> "055"

"%03d" % 555
#=> "555" 
```

所以基本上数字将有3个字符串位置的“0”前缀

只是想知道是否有可能以类似的好方法做数字字符串后缀？（请不要 if 语句）

```
something 5
#=> 500

something 55
#=> 550

something 555
# => 555 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T10:46:03.020

ljust方法怎么样？

```
"5".ljust(3, "0") 
```

如果你想对整数这样做，还有一些`to_s`和方法调用`to_i`

您可以通过更多数学运算来避免字符串转换，例如`log_10`查找整数中的位数，然后`i *= 10**x`在哪里`x`需要多少个 0

像这样：

```
def something(int, power=3)
  int * 10**([power - Math.log10(int).to_i - 1, 0].max)
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:12:51.003

怎么样

```
 def prettify(n)
    ("%03d" % (n.to_s.reverse.to_i)).to_s.reverse
  end 
```

哪个

*   将您的数字转换为字符串
*   扭转它
*   将其转换回数字
*   格式化它
*   将其转换回 int
*   再次反转它

当然，从现在起几个月后，维护这段代码可能会成为一项挑战：-)

# ruby-on-rails-3 - Protocolist：如何将“secondary_target”添加到活动中？

> ID：11502630
> 
> 赞同：1
> 
> 时间：2012-07-16T10:39:14.983
> 
> 标签：ruby-on-rails-3

我最近发现了一种用于 Rails 活动源的新解决方案。它是一个协议主义者的宝石。它和timeline_fu 一样简单，但支持一些新的有用功能，希望将来会变得更好。

但目前我错过了timeline_fu 功能之一——它是一个“secondary_target”多态关联。

例如 - 我的应用程序中有帐户，每个帐户都有许多注释

因此，当 Note 更新时，Activity 不仅需要与 note 本身作为目标链接，还需要与它所属的帐户相关联——它将是 secondary_target。

有什么建议可以使用 Protocolist 来完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T08:32:05.830

因此，唯一的方法是`fire`在模型或控制器操作中使用方法

```
fire :updated, secontary_target: owner 
```

此解决方案需要手动将相应字段添加到活动模型中。

# objective-c - Objective-C 可可触摸：在不同的视图控制器上声明属性

> ID：11502634
> 
> 赞同：1
> 
> 时间：2012-07-16T10:39:24.797
> 
> 标签：objective-c, properties, declaration

这可能是一个愚蠢的问题，但我发现自己已经厌倦了在多个视图控制器上一遍又一遍地声明相同的属性。有没有更好的设计来做一些简单的事情，如下所示：

考虑一下：我有一个在整个 iphone 项目中使用的 SoundManager 类。此类仅在用户按下按钮时播放音频（单击声音）。

现在，我一直在这样做：

**视图控制器 A：.h**

```
SoundManager *mgr;
@property (nonatomic,retain) SoundManager *mgr; 
```

**视图控制器 A：.m**

```
@synthesize *mgr; 
```

并在 viewDidLoad

```
if (mgr == nil)
  mgr = [[SoundManager alloc] init]; 
```

然后我在我所有的视图控制器上重复这个。至少可以说这很麻烦。必须有更好的方法来做这样的事情 - 或者至少是我可以使用的代码生成器实用程序？

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:46:56.013

您可以为该类实现一个单例：

```
@interface SoundManager : NSObject
{
    //your ivars
}

//your @properties

//singleton
 + (id)sharedManager;

@end

@implementation SoundManager

//synthesize

static SoundManager *instance = nil;
+ (id)sharedManager
{
    //you may want to add a @synchronized() here
    if (instance == nil)
    {
        instance = [[SoundManager alloc] init];
    }
    return instance;
}
@end 
```

然后在需要 SoundManager 实例的任何地方调用 [SoundManager sharedManager]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:46:23.707

听起来整个应用程序都使用同一个 SoundManager 实例？也许单例模式会更有用。或者以其他方式创建具有上述功能的自定义视图控制器，并使所有其他视图控制器继承自该自定义视图控制器。

# jquery - 如何在 CSS 选择器或 jQuery 中处理 XML 命名空间？

> ID：11502641
> 
> 赞同：5
> 
> 时间：2012-07-16T10:40:03.497
> 
> 标签：jquery, css, jquery-selectors, css-selectors, xml-namespaces

我使用 jQuery 来解析 RSS 提要。我可以使用 AJAX 成功获取 RSS 提要：

```
$.get("podcast.xml", function (data) {
    xml = $(data);
}, "xml"); 
```

现在我可以使用`xml.find("channel > title").text()`. 如何`<itunes:image>`在我的 RSS 提要中选择标签？

该命令`xml.find("channel > itunes:image")`不起作用，因为`:`在 CSS 中将标记名称和伪类分开。我也试过`xml.find("channel > image")`，但它不起作用。

如何在 CSS 选择器或 jQuery 中处理 XML 命名空间？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T10:43:14.007

CSS 允许您指定[名称空间](http://www.w3.org/TR/css3-namespace)以与样式表中的[选择器一起使用。](http://www.w3.org/TR/css3-selectors/#selector-syntax)

但是，jQuery 不支持这一点，因为您首先无法声明 XML 命名空间（因为 jQuery 除了借用其选择器语法之外与 CSS 无关），因此您必须将冒号视为文字字符而是像这样逃避它：

```
xml.find("channel > itunes\\:image") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T16:22:30.047

我想添加一些我刚刚探索过的有线内容：如果我在我的 rekonq 浏览器（使用 webkit）上尝试上面的代码，我无法`<itunes:image>`通过搜索找到标签`xml.find("channel > itunes\\:image")`。

我必须省略这个词`itunes:`并且必须输入`xml.find("channel > image")`. 所以我们有：

```
xml.find("channel > itunes\\:image") /* Firefox */

xml.find("channel > image") /* Rekonq (maybe also Safari and Chrome?!) */ 
```

# java - Axis2 收到 MTOM 附件未找到数据处理程序错误

> ID：11502645
> 
> 赞同：1
> 
> 时间：2012-07-16T10:40:39.353
> 
> 标签：java, soap, axis2, soapui, mtom

对于一个项目，我正在使用 Apache Axis2 1.6.2 实现 SOAP 服务。我有一项服务需要使用 MTOM 接收文件。但遗憾的是，我一直在接收 MTOM 附件时遇到问题。我不断收到异常：

```
org.apache.axiom.om.OMException: A data handler was not found for content id cid:491414508823 
```

……

我试图在网上搜索答案，但没有成功。我希望有人能让我朝着正确的方向前进。我的 wsdl 包含以下代码段：

```
...
<xs:element minOccurs="0" name="PDF_Attachment">
  <xs:complexType>
     <xs:all>
         <xs:element minOccurs="0" name="PDF_AttachmentName" type="xs:string"/>
         <xs:element name="PDF_AttachmentContent" type="xs:base64Binary"/>
     </xs:all>
   </xs:complexType>
</xs:element>
... 
```

我使用 SoapUI 生成请求并将属性“使用 MTOM”设置为 true。

有没有人遇到过同样的问题或知道如何解决这个问题。帮助将不胜感激！

理查德

**更新**

我想我已经解决了这个问题。问题在我的 xsd/wsdl 定义中。我使用 jaxb 将外部 xsd 中定义的业务对象转换为带有 JAXB 注释的 POJO。但是 xs:base64Binary 被转换为 byte[]。使用以下命令更改 xsd：

```
<xs:schema ... xmlns:xmime="http://www.w3.org/2005/05/xmlmime"> ... 
```

并将元素更改为：

```
<xs:element name="PDF_AttachmentContent" minOccurs="1" maxOccurs="1" type="xs:base64Binary" xmime:expectedContentTypes="application/octet-stream"> 
```

JAXB 现在在 getPDF_AttatchmentContent 中创建了一个 DataHandler 作为返回类型。我必须解决的唯一问题是允许 SOAPUI 发送 MTOM 附件。不知何故，我创建的测试客户端运行良好，但 SOAPUI 不发送附件......

上述解决方案的来源：http: [//cxf.apache.org/docs/mtom-attachments-with-jaxb.html](http://cxf.apache.org/docs/mtom-attachments-with-jaxb.html)

更新 2： [http](http://ssagara.blogspot.nl/2012/03/test-axis2-jax-ws-mtom-service-using.html) : //ssagara.blogspot.nl/2012/03/test-axis2-jax-ws-mtom-service-using.html 用 MTOM 解决了我的 SOAPUI 问题。我没有在我的肥皂信息中编辑正确的 cid。我认为 SOAPUI 会帮助我解决这个问题，但事实并非如此。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T08:32:18.567

解决方案的详细信息在上面的原始消息中。使用以下两个站点解决了这些问题：

1.  数据处理程序问题：[http ://cxf.apache.org/docs/mtom-attachments-with-jaxb.html](http://cxf.apache.org/docs/mtom-attachments-with-jaxb.html)
2.  SoapUI 问题：[http ://ssagara.blogspot.nl/2012/03/test-axis2-jax-ws-mtom-service-using.html](http://ssagara.blogspot.nl/2012/03/test-axis2-jax-ws-mtom-service-using.html)

我希望这对你们中的一些人有所帮助。

# hibernate - Hibernate JPA 原生查询结果集

> ID：11502646
> 
> 赞同：3
> 
> 时间：2012-07-16T10:40:46.563
> 
> 标签：hibernate, jpa

我需要通过在 Hibernate 中执行本机查询来获取结果集。虽然我使用的是 EntityManager，但查询和结果集可能不是实体。

需要获取 List 的 ResultSet。由于选择输出可能会有所不同（读取动态），因此我无法使用 SqlResultSetMapping。

当我尝试下面的代码时，我得到了结果。因为我要求的是单值结果。（休眠JPA）

```
Query query = manager.createNativeQuery("select name from fresher_test where id=1");
List<Object> amount = query.getResultList();

if(amount == null)
 {
    System.out.println("Hey its a null");
    return;
 }
 for(Object e : arr)
 {
   System.out.println(e.toString());
 } 
```

输出是：爱丽丝

当我尝试使用 Query 作为选择名称从同一个代码中获取多个选择时**，指定来自fresher_test where id=1**

输出为：[Ljava.lang.Object;@8b1a4f

一个东西。如何从该对象中获取字段？我试图将对象 e (List l = (List) e;) 类型转换为 List，但我抛出 java.lang.ClassCastException: java.lang.String cannot be cast to java.util.List。

这有一种方法可以让我获取 List 或 Array 中的值？？

注意：我不能使用结果类/实体，因为结果可能是动态的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-16T10:49:48.137

获取多列时，结果为`List<Object[]>`. 每个`Object[]`包含一行的一列。因此，在您的情况下，每个都`Object[]`将包含 2 个元素，第一个是名称，第二个是名称。

请注意，`getResultList()`永远不会返回 null。你不应该检查那个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-30T22:38:05.383

JPA 2.0，如果您希望您的结果在自定义 bean 中：

用特定的构造函数制作一个 bean

```
package my.package;
public class MyBean{
...
    public MyBean(Long id, String desc, Long id2) 
```

然后在您的实体 o 映射中，像这样进行命名查询

```
@NamedQuery(name = "myNamedQuery", 
    query = "select new my.package.MyBean(e.idSomething, e.description, e.secondId) 
             from DBEntity e") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-26T15:44:03.620

你可以使用以下

```
NativeQueryImpl nativeQuery = (NativeQueryImpl) query; 

nativeQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE); 
    List<Map<String,Object>> result = nativeQuery.getResultList(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-09-24T06:42:34.513

我遇到了同样的问题，在这里如何解决它：

```
List<User> records = entityManager.createNamedQuery("latestStatusByUser").getResultList();
List<User> userRecords = new ArrayList<User>();
Iterator it = records.iterator( );

while (it.hasNext( )) {
    Object[] result = (Object[])it.next(); // Iterating through array object 

    userRecords.add(new User(result[0], result[1], result[2], result[3], result[4], result[5], result[6], result[7]));

    } 
```

# linq - 如何使用 Linq 访问 Sharepoint List 的 Yes/No 字段？

> ID：11502649
> 
> 赞同：0
> 
> 时间：2012-07-16T10:40:53.163
> 
> 标签：linq, sharepoint, casting

我有一个列表，其中有数据类型为是/否的字段。我正在尝试检索该字段的数据，但它给了我以下错误：

> System.InvalidCastException：指定的强制转换无效。在 Microsoft.SharePoint.Linq.SPQueryable.GetSPFieldValue[T](PropertyMap pm, DataContext dc, SPListItem item, Object entity, JoinPath joinPath) at lambda_method(ExecutionScope , SPListItem) at System.Linq.Enumerable.WhereSelectEnumerableIterator `2.MoveNext() at System.Collections.Generic.List`1..ctor(IEnumerable `1 collection) at System.Linq.Enumerable.ToList[TSource](IEnumerable`1 个来源）

我的查询如下：

```
var query = (from san in db.San
             select san.IsDeclaredCompleted).ToList(); 
```

那么谁能建议我我做错了什么？

**注意：它在我的本地系统上运行良好，但在服务器上却给了我错误。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:19:52.567

尝试通过在 db.San 之后附加 ToList() 方法来更改您的查询

```
var query = from san in db.San.ToList()
            select san.IsDeclaredCompleted; 
```

# java - Hibernate/JPA 映射到基类

> ID：11502652
> 
> 赞同：1
> 
> 时间：2012-07-16T10:41:10.730
> 
> 标签：java, hibernate, jpa, orm, mapping

考虑以下实体。我打算让 Child 类引用两个派生食品类（ Local Food 或 Foreign ）中的任何一个。这是一个人为的示例，我的真实域对象非常复杂，因此组合和使用例如 FoodType 列不是一个选项，因为两个 Food 子类仅在少数特征上相似。

```
@MappedSuperclass
public abstract class Food {

}

@Entity
public class LocalFood extends Food {

private long id;
private String name;
}

@Entity
public class ForeignFood extends Food {

    private long id;
    private String name;
}

@Entity
public class Child {    
private Food food; //Base Class needed here 
@ManyToOne()
public Food getFood() {
    return food;
}
}

Caused by: org.hibernate.AnnotationException: @OneToOne or @ManyToOne on                     com.sample.Child.food references an unknown entity: com.sample.Food 
```

也不使用继承和鉴别器。

```
@Entity
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public abstract class Food {

private long id; // set , get (Auto gen) 
} 
```

是否有可能使这种映射起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T14:04:00.653

JB Nizet 是对的。现在食物课看起来像这样。

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class Food {

 private long id;

 public void setId(long id) {
    this.id = id;
 }

 @Id
 @GeneratedValue(strategy = GenerationType.AUTO)
 public long getId() {
    return id;
 }

} 
```

并且从子类中删除了 id。

# php - 如何检查文本字段为空然后调用javascript？

> ID：11502653
> 
> 赞同：0
> 
> 时间：2012-07-16T10:41:10.313
> 
> 标签：php, javascript, jquery

当特定文本框为空时，我想查看 jquery/javascript 对话框。我尝试了下面的代码，但没有用。如何将 if() 函数添加到下面的代码中？

```
 <script>

    $(document).ready(function () {

    $('#search_btn').click(function () {

        if ($('#form1.legacy_code_text.value') == "") { /// THIS DOESNT WORK I WANT THE CORRECT WAY FOR THIS LINE
            $("#dialog:ui-dialog").dialog("destroy");

            $("#dialog-confirm").dialog({
                resizable: false,
                height: 140,
                modal: true,
                buttons: {
                    "Ok": function () {

                        $('#form1').submit();

                        //*****************************************************************
                    },
                    Cancel: function () {
                        $(this).dialog("close");
                    }
                }

            });
        }
    });
});
        </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:42:42.947

```
if( $('#legacy_code_text').val() == "" ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:46:20.883

```
if ( empty(#form1.legacy_code_text.value') ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T14:26:20.233

在这里，我为上述问题做了垃圾箱。所以，试试[http://codebins.com/bin/4ldqpat](http://codebins.com/bin/4ldqpat)

要运行以下脚本，请按照以下步骤操作：

1) 包括最新的 jquery.js 和 jquery UI javascript 文件。

2) 包含 JQuery UI CSS 文件。

3）HTML：

```
<div id="dialog-confirm" title="My Dialogue">
  <form id="form1" method="post">
    <div style="padding:10px;">
      Enter Text:
      <input type="text" name="legacy_code_text" id="legacy_code_text" class="textfield"/>
    </div>
  </form>
</div> 
```

4）jQuery：

```
$("#dialog-confirm").dialog({
    resizable: false,
    height: 140,
    modal: true,
    buttons: {
        "Ok": function() {
            var txtarea_val = $('#form1  #legacy_code_text').val();
            if (txtarea_val != '') $('#form1').submit();
            else {
                /*show your error*/
                alert("Enter Some text..!");
                return false;
            }

        },
        Cancel: function() {
            $(this).dialog("close");
        }
    }
}); 
```

# scala - Scala 2.8.1：更改惰性 val 的导入方式会影响其评估时间。这是一个错误吗？

> ID：11502658
> 
> 赞同：0
> 
> 时间：2012-07-16T10:41:53.970
> 
> 标签：scala

这是在 scala.2.8.1

我有一个对象配置。其中有一个惰性值，`database`.

样品 A：

```
import Config.database

 trait Dao {  
   protected val database = database  
} 
```

样品 B：

```
import Config

trait Dao {
  protected val database = Config.database
} 
```

在config中，相关代码为：

```
lazy val database = 
   somethingFromAFile match {
      case "a" => databaseA
      case "b" => databaseB
      case "c" => databaseC
   }

lazy val databaseA = makeDB("a")
lazy val databaseB = makeDB("b")
lazy val databaseC = makeDB("c")

var changes = throw new Exception ("Not yet initialised")
private def makeDB(db: String) = {
    db match {
      case "a" => var changes = x => 2*x; ... //database making stuff
      case "a" => var changes = x => 3*x; ...
      case "a" => var changes = x => 4*x; ...
    }
} 
```

样本 A 和样本 B 中评估数据库的顺序不同。
我认为这不应该是正确的行为。当然这不是直观的。如果这不是错误，有人可以解释为什么选择这种行为吗？

具体行为是在惰性 val 内部，将 var 设置为某个值。在示例 A 中，var 的设置晚于示例 B 中的设置。

*编辑*所以我才意识到我得到了`val database = database`. 因此，更改导入会导致变量隐藏，尽管我希望自引用 val 应该发出编译器警告，或者溢出堆栈？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:55:54.457

我编译了您的两个示例，然后使用`javap -c`. （在我的示例`Config.database`中是一个惰性字段，其值为`""`; 的类型`database`应该没有影响）。

第一个示例创建以下字节码：

```
Compiled from "foo.scala"
public class foo extends java.lang.Object implements scala.ScalaObject{
public java.lang.String db();
  Code:
   0:   aload_0
   1:   getfield        #11; //Field db:Ljava/lang/String;
   4:   areturn

public foo();
  Code:
   0:   aload_0
   1:   invokespecial   #17; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   getstatic       #23; //Field Config$.MODULE$:LConfig$;
   8:   invokevirtual   #26; //Method Config$.database:()Ljava/lang/String;
   11:  putfield        #11; //Field db:Ljava/lang/String;
   14:  return

} 
```

第二个示例创建以下相同的字节码：

```
Compiled from "foo.scala"
public class foo extends java.lang.Object implements scala.ScalaObject{
public java.lang.String db();
  Code:
   0:   aload_0
   1:   getfield        #11; //Field db:Ljava/lang/String;
   4:   areturn

public foo();
  Code:
   0:   aload_0
   1:   invokespecial   #17; //Method java/lang/Object."<init>":()V
   4:   aload_0
   5:   getstatic       #23; //Field Config$.MODULE$:LConfig$;
   8:   invokevirtual   #26; //Method Config$.database:()Ljava/lang/String;
   11:  putfield        #11; //Field db:Ljava/lang/String;
   14:  return

} 
```

我什至看不出两者之间的表面差异。

* * *

这与导入的实际情况一致 - 它们只是一种防止您必须在任何地方完全限定引用的方法。 `import Config._`什么都不*做*；它只是将值`Config`带入顶级范围，以便在编译期间解析器将认为它们有效而没有前缀。

换句话说，

```
import A.b
...
b 
```

完全*一样*_

```
...
A.b 
```

导入只会节省您的输入，它们不会改变代码的含义。如果您看到差异，那么我相信这只有在您的一个导入隐藏另一个定义时才有可能，因此根据导入的措辞方式，对无前缀声明的解释会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T13:44:21.720

A`def`可能会导致堆栈溢出，但不会导致`val`. A`val`由getter和setter组成，所以赋值是通过setter完成的，读取是通过getter完成的，不存在循环。存储的值将与 JVM 初始化的值相同：`null`。

自引用变量没有警告，因为有有效的用例。例如，请参阅人们非常喜欢的常见“素数”或“斐波那契”流示例。

# xcode - 在 Xcode 中的另一个计算中使用 UILabel 的结果

> ID：11502661
> 
> 赞同：0
> 
> 时间：2012-07-16T10:42:12.383
> 
> 标签：xcode, uilabel

我希望我所说的是有道理的。我想要做的是使用say a - b = c 的结果。现在 "a" 和 "b" 都是 UITextfields 而 "C" 是 a `UILabel`.

我希望能够在每次运行计算时使用“c”的结果来占据“a”的位置。

示例：100 - 30 = 70，那么下次我想在位置“b”添加另一个图形时，“a”现在是“c”的结果。

现在我还想在我首先输入的文本字段中保留“a”的原始结果，以便将其作为参考点。但希望每次我在“b”中输入一个数字时都会删除“c”结果。现在我该如何编码？

我有第一部分，但没有第二部分。

这是我的第一部分代码

```
-(IBAction)calculate:(id)sender {
NSString *spCash = self.spendingCash.text;
NSString *recAmount = self.receiptAmount.text;

float cashFloat;
float receiptFloat =[recAmount floatValue];
float spendingFloat = [spCash floatValue];

cashFloat = spendingFloat - receiptFloat;

NSString *cashAv = [[NSString alloc]initWithFormat:@"$%.2f", cashFloat];

self.cashAvailable.text = cashAv; 
```

我希望这是有道理的。

感谢您抽出宝贵时间，并期待阅读一些回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:48:40.180

不要依赖于在 UI 元素中存储数据。

创建属性（可能在您的视图控制器中）来表示人们输入的数字和您的计算结果。这样您就可以保存您需要的任何信息，而不取决于它是否在屏幕上可见。

# c - 从 C 调用二进制文件（同时共享文件描述符）

> ID：11502662
> 
> 赞同：1
> 
> 时间：2012-07-16T10:42:13.583
> 
> 标签：c, process, clone, fork, system-calls

我正在玩sycalls，并且刚刚按照以下方式编写了代码

```
/* Clone the process and launch Something */
child_stack = (void *) malloc(max_memory);
args = malloc(2 * sizeof (int **));

args[0] = in_socket_fds;
args[1] = out_socket_fds;

clone(foo, child_stack + max_memory ,CLONE_FILES|CLONE_VM|CLONE_IO|CLONE_FS, (void *) args);

wait(); 
```

foo 函数在哪里：

```
 int foo(int** args) {
     fprintf(stderr, "Hello world %d %d", args[0][0], ags[1][0]);
     _exit(0);
    } 
```

我真正想做的是从 foo 函数调用二进制文件。

```
 int foo(int** args) {
     system(start program foo)
     _exit(0);
    } 
```

这个二进制文件应该共享同一个文件描述符表（因此之前使用了克隆）。上面的代码不正确，因为我认为系统不允许共享文件描述符表。（我不想要 fds 的副本，我真的希望能够读/写它们）这些 fds 是套接字。

```
 int foo(int** args) {
     system(start program foo)
     _exit(0);
    } 
```

如何使克隆命令调用二进制而不是函数？（这甚至可能），还是在共享文件描述符时使用系统调用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:47:52.153

去`fork()`/`execlp()`而不是`clone()`/ `system()`。分叉的子代从父代继承文件描述符，并且`execlp()`（或其亲属）允许您在子代中加载不同的可执行文件。

您可能*可以* `exec*()`在由（参见注释）调用的函数中`clone()`，但在这种情况下，`fork()`语义要简单得多。

# security - IE 为自签名小程序请求安全证书批准两次

> ID：11502663
> 
> 赞同：0
> 
> 时间：2012-07-16T10:42:23.100
> 
> 标签：security, applet, self-signed, rxtx

使用 RXTX 和 Java 小程序，我创建了一个小程序来拨打电话号码。它工作正常，但是当浏览器加载小程序时，安全证书批准弹出两次。当我第一次出现安全弹出窗口时单击“运行”时，为什么会再次出现弹出窗口。

我的小程序在 click2callapplet.jar 中并使用 RXTXcomm.jar 两者都是由同一个证书自签名的。

Java控制台的日志附在下面。任何形式的帮助将不胜感激。

```
Java Plug-in 10.1.0.8
Using JRE version 1.7.0_01-b08 Java HotSpot(TM) Client VM
User home directory = C:\Users\hcluser2
----------------------------------------------------
c:   clear console window
f:   finalize objects on finalization queue
g:   garbage collect
h:   display this help message
l:   dump classloader list
m:   print memory usage
o:   trigger logging
q:   hide console
r:   reload policy configuration
s:   dump system and deployment properties
t:   dump thread list
v:   dump thread stack
x:   clear classloader cache
0-5: set trace level to <n>
----------------------------------------------------
Detected from bootclasspath: C:\\PROGRA~1\\Java\\jre7\\lib\\deploy.jar
security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.
security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws
security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws
security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws,com.sun.deploy
security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws,com.sun.deploy
security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.definition value null
security: property package.definition new value com.sun.javaws
security: property package.definition value com.sun.javaws
security: property package.definition new value com.sun.javaws,com.sun.deploy
security: property package.definition value com.sun.javaws,com.sun.deploy
security: property package.definition new value com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.access value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.access new value sun.,com.sun.xml.internal.ws.,com.sun.xml.internal.bind.,com.sun.imageio.,com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
security: property package.definition value com.sun.javaws,com.sun.deploy,com.sun.jnlp
security: property package.definition new value com.sun.javaws,com.sun.deploy,com.sun.jnlp,org.mozilla.jss
basic: Added progress listener: sun.plugin.util.ProgressMonitorAdapter@156a6be
basic: Plugin2ClassLoader.addURL parent called for http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar
basic: Plugin2ClassLoader.addURL parent called for http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar
security: Blacklist revocation check is enabled
security: Trusted libraries list check is enabled
network: Cache entry found [url: http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar, version: null] prevalidated=false/0
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
cache: Reading Signers from 995 http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar | C:\Users\hcluser2\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\10\21db2eca-604fb61f.idx
cache:  Read manifest for http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar: read=449 full=449
security: Loading Deployment certificates from C:\Users\hcluser2\AppData\LocalLow\Sun\Java\Deployment\security\trusted.certs
security: Loaded Deployment certificates from C:\Users\hcluser2\AppData\LocalLow\Sun\Java\Deployment\security\trusted.certs
security: Loading certificates from Deployment session certificate store
security: Loaded certificates from Deployment session certificate store
security: Loading certificates from Internet Explorer TrustedPublisher certificate store
security: Loaded certificates from Internet Explorer TrustedPublisher certificate store
security: Validate the certificate chain using CertPath API
security: Loading certificates from Internet Explorer ROOT certificate store
security: Loaded certificates from Internet Explorer ROOT certificate store
security: Loading Root CA certificates from C:\Program Files\Java\jre7\lib\security\cacerts
security: Loaded Root CA certificates from C:\Program Files\Java\jre7\lib\security\cacerts
security: Obtain certificate collection in Root CA certificate store
security: Obtain certificate collection in Root CA certificate store
security: Obtain certificate collection in Root CA certificate store
security: Obtain certificate collection in Root CA certificate store
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
security: Checking if certificate is in Internet Explorer TrustedPublisher certificate store
security: User has granted the priviledges to the code for this session only
security: Adding certificate in Deployment session certificate store
security: Added certificate in Deployment session certificate store
security: Saving certificates in Deployment session certificate store
security: Saved certificates in Deployment session certificate store
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
network: Cache entry found [url: http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar, version: null] prevalidated=false/0
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
cache: Reading Signers from 994 http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar | C:\Users\hcluser2\AppData\LocalLow\Sun\Java\Deployment\cache\6.0\24\4abc9f18-5d59227f.idx
cache:  Read manifest for http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar: read=86 full=1769
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
security: Checking if certificate is in Internet Explorer TrustedPublisher certificate store
security: User has granted the priviledges to the code for this session only
security: Adding certificate in Deployment session certificate store
security: Added certificate in Deployment session certificate store
security: Saving certificates in Deployment session certificate store
security: Saved certificates in Deployment session certificate store
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/RXTXcomm.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
basic: Plugin2ClassLoader.getPermissions CeilingPolicy allPerms
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/ with proxy=DIRECT
network: Connecting http://172.30.13.226:9080/3in1srv/Click2CallJars/Click2CallApplet.jar with cookie "JSESSIONID=00004p01LsRXIYU5nbHw-wTqpNy:-1"
security: Validate the certificate chain using CertPath API
security: The certificate hasnt been expired, no need to check timestamping info
security: Found jurisdiction list file
security: No need to checking trusted extension for this certificate
security: The CRL support is disabled
security: The OCSP support is disabled
security: This OCSP End Entity validation is disabled
security: Checking if certificate is in Deployment denied certificate store
security: Checking if certificate is in Deployment permanent certificate store
security: Checking if certificate is in Deployment session certificate store
basic: Applet loaded.
basic: Applet resized and added to parent container
basic: PERF: AppletExecutionRunnable - applet.init() BEGIN ; jvmLaunch dt 217677 us, pluginInit dt 20753021 us, TotalTime: 20970698 us
Telephone Number from JSP:0196523759
Telephone Prefix from JSP:9
basic: Applet initialized
basic: Starting applet
basic: completed perf rollup
Stable Library
=========================================
Native lib Version = RXTX-2.1-7
Java lib Version   = RXTX-2.1-7
>>> ATZ
<<< ATZ
<<< 
>>> ATDT9023523759
<<< OK
WARNING: Modem did not echo command.
<<< ATDT9023523759
basic: Applet made visible
basic: Applet started
basic: Told clients applet is started
basic: Starting applet teardown
basic: Finished applet teardown
basic: Removed progress listener: sun.plugin.util.ProgressMonitorAdapter@156a6be
plugin2manager.parentwindowDispose 
```

# python - python用\ x000分割字符串

> ID：11502672
> 
> 赞同：0
> 
> 时间：2012-07-16T10:42:50.937
> 
> 标签：python, regex, split

如何用所有'\x000'，'\x001'，'\x002'分割以下字符串？我尝试了如下的正则表达式，但它没有用！

```
z = re.compile(r'[\x000\x001\x002\x003\x004\x005]:')

line = '114.37.114.95 - - [16/Jul/2012:03:22:37 -0700] "GET /query?dest=adjustable_layout&from_url=http%3A%2F%2Fwww.nownews.com%2F&referer=&width=300&height=330&api_version=1 HTTP/1.1" 200 10481 "http://www.nownews.com/" "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; Foxy/1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; yie8)"\x000:1342434156.712809 get_cache http://www.nownews.com/\x000:1342434156.717942 Cache Hits agtzfnRhZ3Rvby1lY3IjCxIGTmV3c0FkIhdodHRwOi8vd3d3Lm5vd25ld3MuY29tLww\x000:1342434156.731564 new version\x001:1342434156.732352 display:[(u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'24\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'24\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'24\'), (u\'1\', u\'114\', u\'26\'), (u\'1\', u\'114\', u\'13\')]'
z.split(line) 
```

# 编辑1

字符串中有\x000、\x001、\x002....。我想用这些字符分割字符串。

预期的输出应该是：

```
['114.37.114.95 - - [16/Jul/2012:03:22:37 -0700] "GET /query?dest=adjustable_layout&from_url=http%3A%2F%2Fwww.nownews.com%2F&referer=&width=300&height=330&api_version=1 HTTP/1.1" 200 10481 "http://www.nownews.com/" "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; Foxy/1; .NET CLR 1.1.4322; .NET CLR 2.0.50727; .NET CLR 3.0.04506.648; .NET CLR 3.5.21022; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; yie8)"', '\x000:1342434156.712809 get_cache http://www.nownews.com/', '\x000:1342434156.717942 Cache Hits agtzfnRhZ3Rvby1lY3IjCxIGTmV3c0FkIhdodHRwOi8vd3d3Lm5vd25ld3MuY29tLww', '\x000:1342434156.731564 new version', '\x001:1342434156.732352 display:[(u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'24\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'24\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'29\'), (u\'1\', u\'114\', u\'13\'), (u\'1\', u\'114\', u\'21\'), (u\'1\', u\'114\', u\'24\'), (u\'1\', u\'114\', u\'26\'), (u\'1\', u\'114\', u\'13\')]'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:52:22.300

`\x000`是一个两字节的字符串，由`\x00`(hex `0x00`) 和`0`(hex `0x30`) 组成。

因此，您不能在这样的字符类中使用它。但

```
z = re.compile(r'(\x00[0-5]:)') 
```

作品。通过将正则表达式括在括号中，定界符也将成为结果列表的一部分，尽管没有直接连接到它们分离的字符串部分（如您编辑的问题中）。

如果您确实希望将分隔符保留为结果字符串的一部分，则不能使用`.split()`. 相反，使用`.findall()`：

```
>>> z = re.compile(r'(?:\x00[0-5]:)?(?:(?!\x00[0-5]:).)*', re.S)
>>> z.findall(line) 
```

**解释：**

```
(?:\x00[0-5]:)? # Match an optional leading \x000:, \x001: etc.
(?:             # Match...
 (?!\x00[0-5]:) #  as long as we're not at the start of another \x00n:
 .              #  any character (including newlines: re.S)
)*              # any number of times. 
```

# php - 选择最接近字段数值的 10 行

> ID：11502682
> 
> 赞同：1
> 
> 时间：2012-07-16T10:43:44.303
> 
> 标签：php, mysql

在 PHP 中，我有一个竞赛问题，例如“有多少人将参加？”。我需要选择与所有参与者最接近的 10 个答案。

我有一个名为**answers**的表，其中包含*ID*和*数字*字段。假设参与者总数为 100，我想要 10 个结果。

我需要选择数字最接近 100 的 10 个结果。它应该高于和低于 100。

我怎么能那样做？

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:45:49.963

选择 ( [abs](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs) (delta))...

```
select id, number, abs(100 - number) as delta
from mytable
order by delta
limit 0, 10 
```

像这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:48:06.357

可以用减法的绝对数计算接近度；

```
$proximity=abs($answer - 100); 
```

越小，越近！

# wpf - 在 ItemsControl 中分组后不显示项目

> ID：11502691
> 
> 赞同：0
> 
> 时间：2012-07-16T10:44:18.060
> 
> 标签：wpf, grouping, itemscontrol

我已将分组添加到 ItemsControl：

```
 <ItemsControl Style="{StaticResource SellingDashboardToDosList}" Grid.Row="2" BorderThickness="1" Background="#C7E8F8" HorizontalAlignment="Stretch" ItemsSource="{Binding ToDoList}" >
            <ItemsControl.GroupStyle>
                <GroupStyle>
                    <GroupStyle.ContainerStyle>
                        <Style TargetType="GroupItem">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="GroupItem">
                                        <GroupBox Header="{Binding Name}">
                                            <ItemsPresenter />
                                        </GroupBox>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                        </Style>
                    </GroupStyle.ContainerStyle>
                </GroupStyle>
            </ItemsControl.GroupStyle>
        </ItemsControl> 
```

现在我只看到空的 GroupBox。我使用 Snoop 工具来探索应用程序，我发现 GroupBox ItemPresenters 是空的！可能是什么原因？

如果我从 ItemsControl（ItemsControl.GroupStyle 元素）中删除分组，那么一切正常，我再次看到所有项目。我不需要对底层数据上下文进行任何更改即可查看所有项目。数据上下文（ItemsSource binging）是**CollectionViewSource**类型。

绑定跟踪已打开，但我没有看到任何绑定错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:26:02.147

似乎 ItemsControl 样式覆盖了 ItemsControl.Template 属性。一旦该样式被覆盖，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:26:32.987

您必须先对数据进行分组。使用 CollectionViewSource 来做到这一点：

```
<CollectionViewSource x:Key="Data" Source="{StaticResource SellingDashboardToDosList}">
    <CollectionViewSource.GroupDescriptions>
        <PropertyGroupDescription PropertyName="PropertyNameToGroupBy"/>
    </CollectionViewSource.GroupDescriptions>
</CollectionViewSource> 
```

只有这样，您才能执行以下操作：

```
<ItemsControl ItemsSource="{Biding Source={StaticResource Data}}" ... 
```

# android - 定时器在 Android 中没有停止

> ID：11502693
> 
> 赞同：13
> 
> 时间：2012-07-16T10:44:25.957
> 
> 标签：android

**问题** 我在使用 android 开发时遇到停止计时器的问题。

停止计时器时，计时器已经为空。

`timer.cancel();`然后我将定时器初始化移动到一个方法之外，就像 TimerTask 一样，它解决了 null 问题，但在调用它时仍然不会取消。

下面的代码是停止录制时计时器已经为空的示例。

**定时器任务**

我`TimerTask`在类内部但在方法和下面的代码之外初始化......

```
private TimerTask task = new TimerTask() {
    @Override
    public void run() {
      Log.e("TRACK_RECORDING_SERVICE","Timer Running");
    }
  }; 
```

**定时器和定时器启动**

然后我有一个 startRecroding 方法，当我想启动计时器时调用它......

```
public void startRecording(){
     timer = new Timer("Message Timer");
     timer.scheduleAtFixedRate(this.task, 0, 1000);
 } 
```

**定时器停止**

然后，当我想停止计时器时，我会调用以下方法...

```
public void stopRecording() {
     if (timer != null) {
         timer.cancel();
         timer = null;
     } else {
         Log.e("TRACK_RECORDING_SERVICE","Timer already null.");
     }
 } 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-16T10:49:01.460

```
timer = new Timer("Message Timer"); 
```

这里你的对象`timer`不是一个`static`所以`timer.cancel();`会取消 Timer 类的另一个实例。我建议你在类的顶部创建一个 Timer Class 的静态实例变量，如下所示，

```
private static Timer timer; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-21T14:37:23.397

在 run() 方法中，检查计时器是否为空

```
private TimerTask task = new TimerTask() {
@Override
public void run() {
if (timer == null)
	cancel();
...
}
```

取消操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-08-16T18:21:00.860

好的，所以问题出在实例化中，而不是定时器的实际停止。

每次我打电话：

```
timer = Timer()
timer!!.scheduleAtFixedRate(object : TimerTask() {
    override fun run() {
       //something  
    }
}, delay, period) 
```

它创建了另一个实例，因此旧实例仍在某个地方运行，无法阻止它。

所以我只是确保在计时器为空时实例化它，这样之前的实例就不会被推送并仍在后台运行。

```
if(timer == null) {
    timer = Timer()
    timer!!.scheduleAtFixedRate(object : TimerTask() {
        override fun run() {
            // something
        }
    }, delay, period)
} 
```

然后只需取消它并将其设置为空。

```
fun stopTimer() {
    if (timer != null) {
        timer!!.cancel()
        timer!!.purge()
        timer = null
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-16T10:57:04.950

```
if(waitTimer != null) {
   waitTimer.cancel();
   waitTimer.purge()
   waitTimer = null;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-14T05:23:49.823

我知道已经很晚了，但我在我的项目中也遇到了这个问题，希望我的解决方案能给人们一些想法。我在我的项目中所做的如下：

```
Handler handler = new Handler();
    Runnable runnable = new Runnable() {
        @Override
        public void run() {
           //TODO Update UI
        }
    };

    public void stopTimer() {
        if (timer != null) {
            handler.removeCallbacks(runnable);
            timer.cancel();
            timer.purge();
            timer = null;
        }
    }

   public startTimer() {
            timer = new Timer();
            timer.schedule(new TimerTask() {
                @Override
                public void run() {
                    handler.post(runnable);
                }
            }, 0, 100);
       } 
```

我认为以前的答案中遗漏的是**removeCallbacks**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-16T12:12:06.850

试试这个例子......

```
 TimerTask mTimerTask;
    final Handler handler = new Handler();
    Timer t = new Timer();  
    int nCounter = 0;

//function for start timer
 public void doTimerTask()
    {

        mTimerTask = new TimerTask() 
        {
                public void run() 
                {
                        handler.post(new Runnable() 
                        {
                                public void run()
                                {

                                      nCounter++:       
                                    //your code
                                    .....
                                    ......

                                }
                       });
                }};

            // public void schedule (TimerTask task, long delay, long period) 
            t.schedule(mTimerTask,0,50);  // 

         }

         //function for stop timer
public void stopTimerTask(){

       if(mTimerTask!=null){

          Log.d("TIMER", "timer canceled");
          mTimerTask.cancel();
          nCounter = 0; 

     }

} 
```

//使用上面两个函数来启动和停止定时器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-19T01:18:46.620

以防万一有人仍然来这里寻找解决此问题的方法，这是我的经验。

我正在服务中运行计时器。

```
startForegroundService(mServiceIntent);

timer = new Timer(); 
```

当你刷新一个服务时，你不一定要先取消它，你只需调用 startForegroundService(mServiceIntent); 再次。如果您在刷新服务之前不取消定时器，即使您在刷新的新服务中停止定时器，原始定时器仍会在后台运行并调用方法。

总而言之，在刷新或更新后台任务之前停止计时器。我希望它可以帮助某人。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-30T09:57:54.213

虽然这是一个老问题，但我已经找到了一个简单的解决方案。

```
var timeTaskInstance : TimerTask ?= null

val task: TimerTask = object : TimerTask() {
      override fun run() {
           timeTaskInstance = this
           Log.e("TRACK_RECORDING_SERVICE", "Timer Running")
      }
 } 
```

现在从任何地方取消计时器：

```
timeTaskInstance?.cancel() 
```

# vb.net - 以管理员身份从 vb.net 中启动批处理文件

> ID：11502696
> 
> 赞同：3
> 
> 时间：2012-07-16T10:44:27.937
> 
> 标签：vb.net, runas

在我的应用程序中，我需要以管理员身份运行一个批处理文件才能运行。
到目前为止我正在使用它，但我不记得如何使用 runas 功能，它允许它以管理员权限运行。

```
process.start("filelocation.bat") 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:05:29.683

```
Try
    Dim procInfo As New ProcessStartInfo()
    procInfo.UseShellExecute = True
    procInfo.FileName = (FileLocation)
    procInfo.WorkingDirectory = ""
    procInfo.Verb = "runas"
    Process.Start(procInfo)
Catch ex As Exception
    MessageBox.Show(ex.Message.ToString())
End Try 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T10:59:43.043

您可以尝试使用以下代码：

```
Dim proc as ProcessStartInfo  = new ProcessStartInfo()
proc.FileName = "runas"
proc.Arguments = "/env /user:Administrator filelocation.bat"
proc.WorkingDirectory = "your_working_dir"
Process.Start(proc) 
```

此代码将询问管理员密码并开始执行批处理文件

编辑：这是没有 cmd 窗口的替代方法

```
Dim proc as ProcessStartInfo  = new ProcessStartInfo()
proc.FileName = "filelocation.bat"
proc.WorkingDirectory = "your_working_dir"  // <- Obbligatory
      proc.UseShellExecute = False
      proc.Domain = userDomain // Only in AD environments?
      proc.UserName = userName
      proc.Password = securePassword
Process.Start(proc) 
```

它有点复杂，因为您需要在使用此代码之前获取输入值（用户名、密码、域），并且密码是您需要以专用方式构建的[SecureString](http://msdn.microsoft.com/en-us/library/system.security.securestring.aspx)

```
Dim securePassword as New Security.SecureString()
For Each c As Char In userPassword
    securePassword.AppendChar(c)
Next c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T10:04:39.090

```
 Imports System.Diagnostics
    Imports System.Security 
```

'很好的例子。只是添加命名空间

# jsp - Eclipse：找不到标签目录

> ID：11502703
> 
> 赞同：1
> 
> 时间：2012-07-16T10:44:45.657
> 
> 标签：jsp, jsp-tags, eclipse-juno

* * *

你好 ，

我收到此错误“找不到标签目录“/WEB-INF/tags””，但我确定该目录（/WEB-INF/tag）存在于根项目下。

```
<%@ page language="java" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>

<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib prefix="squash" tagdir="/WEB-INF/tags" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org     
 /TR/html4/loose.dtd">
 <html>

 <head>

</head>

  <body>

<div id="content">
    <h1><fmt:message key="welcome"/></h1>
</div>

  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:04:19.743

您必须包含/添加 standard.jar 和 jstl.jar （或只需添加[http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar) - 无需包含 standard.jar ）您的网络项目通过：

1.  在项目资源管理器中右键单击项目名称
2.  构建路径 + 配置构建路径 + 库 + 添加外部 jars + 选择下载的 jstl.jar 和 standard.jar（如果您已经安装`tomcat`，那么您将在 X:\Program Files\Apache Software Foundation\Apache Tomcat 7.0 找到这些 .jars .22\webapps\examples\WEB-INF\lib) 文件夹。

PS：有关更多信息，请阅读 - [https://stackoverflow.com/tags/jstl/info](https://stackoverflow.com/tags/jstl/info)

# unicode - 如何使用 .NET 检测任何具有降序的 unicode 字符

> ID：11502710
> 
> 赞同：1
> 
> 时间：2012-07-16T10:45:40.493
> 
> 标签：unicode, typography

我试图最小化以编程方式构造的 Windows 窗体（使用 C#）上的控件之间的垂直距离。这涉及适当地设置 Height 属性。

我发现，如果控件的文本中不包含任何带有下划线的字母（即没有任何字符 j、g、p、q 或 y），那么控件的高度可能会小于包含这样的字母（如果它*确实*包含带有下降器的字母，那么如果高度不够，下降器将被切掉）。

只要语言是英语或英语，就可以很好地测试上述 5 个字符中的任何一个，但我需要能够满足（几乎）任何语言。

有没有办法，给定一些任意的 Unicode 字符（可能还有字体）来确定该 Unicode 字符是否有下划线？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:59:37.740

没有为 Unicode 字符定义任何属性来指示是否存在下降线，这实际上是字形设计而不是字符的一个特征。例如，“Q”在许多字体中都有一个下降体，而“J”在某些字体中有一个。此外，鉴于上下文，您还应该考虑放置在字母下方的变音符号，而不仅仅是基本字母的后代。可能还有字母*上方的*变音符号。

因此，您需要阅读有关字符尺寸的字体信息（如果可用），或者在您的软件中试探性地绘制字符并测量它们的尺寸。

根据经验，任何低于字体大小 1.1 倍的行高都会导致某些字符和字体出现问题。使用 1（“设置纯色”）是不够的，因为字符实际上可能超出字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T21:47:22.573

在 Windows 中，您调用 GetPath() 来获取一个数组，其中包含构成字形字符串的周长或轮廓的每个点的 X/Y 坐标。在数组中搜索最小值/最大值，这将为您提供*完全*包围字符串的矩形。就在字母的边缘。

# javascript - 在 Javascript/jQuery 中生成表格

> ID：11502711
> 
> 赞同：1
> 
> 时间：2012-07-16T10:45:42.710
> 
> 标签：javascript, jquery, html-table

> **可能重复：**
> [在 jQuery 中动态创建表](https://stackoverflow.com/questions/1226541/creating-tables-dynamically-in-jquery)

我有两个数组，`letters = [A,B,C,...]`和`numbers = [1,2,3,...]`，并想生成一个 html 表，其中`numbers`作为标题和`letters`作为第一个条目（然后我可以用我拥有的值填充它）。*这对于通用数组是否可行？*

也就是如下图：

```
<table>
   <thead>
     <tr>
       <th></th>
       <th>1</th>
       <th>2</th>
       <th>3</th>
     </tr>
   </thead>
   <tbody>
     <tr id="A">
       <td>A</td>
       <td></td>
       <td></td>
       <td></td>
     </tr>
     <tr id="B">
       <td>B</td>
       <td></td>
       <td></td>
       <td></td>
     </tr>
     <tr id="C">
       <td>C</td>
       <td></td>
       <td></td>
       <td></td>
     </tr>
   </tbody>
 </table>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:01:43.777

好的，这是我想到的第一种方法：

```
var letters = ["A","B","C"],
    numbers = [1,2,3],
    $table = $("<table/>"),
    $body = $("<tbody/>").appendTo($table),
    $row = $("<tr><th></th></tr>");

$.each(numbers,function(i,val){
  $("<th/>").text(val).appendTo($row);
});
$("<thead/>").append($row).appendTo($table);

$.each(letters, function(i,val) {
  $row = $("<tr/>").attr("id",val).appendTo($body);
  $("<td/>").text(val).appendTo($row);
  for (var j = 0; j < numbers.length; j++)
    $row.append("<td/");
});

$table.appendTo("body"); 
```

演示：http: [//jsbin.com/ocomit/edit#javascript,html,live](http://jsbin.com/ocomit/edit#javascript,html,live)

是的，它可能更漂亮和/或更高效。这仅使用非常基本的 jQuery 方法 - 如果您不确定其中的任何一个，您知道[在哪里看](http://api.jquery.com/)......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:08:38.883

请试试这个 ：

```
 var html = '';
    letters = [A,B,C];
    numbers = [1,2,3];
    html+= "<table><thead><tr><th></th>";
    for(i=0;i<letters.length;i++)
       html+="<th>"++letters[i]"</th>"; 
    html+= "</tr></thead>";
    html+= "<tbody>";
    for(j=0;j<numbers.length;j++)
    {
       html+="<tr id='"+numbers[j]+"'>";
       html+="<td>"+numbers[j]+"</td>";
       for(k=1;k<letters.length;k++)
           html+= "<td></td>";
       html+= "</tr>";
    }    
    html+= "</tbody>";
    html+= "</table>"; 
```

请提醒“html”，您将获得所需的输出。

# time-complexity - 迭代算法的时间复杂度

> ID：11502716
> 
> 赞同：4
> 
> 时间：2012-07-16T10:46:14.473
> 
> 标签：time-complexity, big-o

我有一个迭代算法，在每次迭代中，计算量逐渐减少。这是我的算法的说明：

`Input size: n`和`Total iteration = k`

```
iter 1: time taken -> f1 * n
iter 2: time taken -> f2 * n
iter 3: time taken -> f3 * n
...
iter k: time taken -> fk * n 
```

在哪里`f1 > f2 > f3 >...> fk`和`0 <= f1, f2,...,fk <= 1`

问题：这个算法的时间复杂度是多少？是吗`Big-O(klog n)`

`Update:`

我认为这个问题似乎很模糊。我会用文字来解释：

我的算法的输入是`n`，我将在`k`迭代中运行它。但在每次迭代中，输入大小都会减少一个因子，即`unknown`. 减少没有模式。

例如：

```
iter 1: input size = n (always n)
iter 2: input size = n/2 (can change)
iter 3: input size = n/5 (can change)
iter 4: input size = n/8 (can change)
...
iter k: input size = n/10 (can change) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:49:50.850

给定的信息是不够的，我们只能确定复杂度为¹。**`O((f1+ ... + fk)*n)`**

**为什么？**我将用一个例子来展示两种情况`fi`——每种情况都有不同的复杂性：

**情况 1：** `fi = 1/2^i`
在这种情况下，我们得到`n * 1/2 + n* 1/4 + ... + n*1/2^k < n`，算法是`O(n)`

**案例 2：** `fi = 1/i`
在这种情况下，我们得到一个[谐波级数](http://en.wikipedia.org/wiki/Harmonic_series_%28mathematics%29)：`n * 1/2 + n*1/3 + ... + n*1/k = n(1/2+1/3+...+1/k) = O(nlogk)`

**编辑：** 根据您的评论和编辑，算法按照描述运行的最坏情况（如果我理解正确的话）似乎是：

```
iter1 -> n ops
iter2 -> n/2 ops
iter3 -> n/3 ops
...
iterk -> n/k ops 
```

如果确实如此，则它与描述的**case2**匹配，总运行时间是[**谐波级数**](http://en.wikipedia.org/wiki/Harmonic_series_%28mathematics%29): `n + n/2 + n/3 + .. + n/k = n(1 + 1/2 + 1/3 + ... + 1/k)`，即**`O(nlogk)`**。

* * *

(1) 从严格的数学上讲 - 大 O 是一个上渐近界，并且由于`fi <= 1`，我们可以推断算法是`O(nk)`，但**它不是严格的界限**，如示例所示 - 不同的`fi`值可以给出不同的严格界限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:49:19.200

**编辑**

进一步来说：

如果您的示例的分母：

```
iter 1: input size = n (always n)
iter 2: input size = n/2 (can change)
iter 3: input size = n/5 (can change)
iter 4: input size = n/8 (can change)
...
iter k: input size = n/10 (can change) 
```

是严格的整数，那么它是**O(n*log k )**。

这就是为什么。要使序列 Xn 为**O(Yn)**，必须存在一些 M（实数）和 m（整数），使得 Xn < M*|Yn| 对于所有 n > m。

现在考虑序列 K = {1, 1/2, 1/3, ... 1/k}。还要考虑序列 N = {1, 2, 3, 4...}。

现在让我们让 Yn = N^t * K（这是 N 和 K 的左外积）。不管fi的值如何，这个序列Yn总是大于你的序列。

所以 Xn < 1 * |Yn|，其中 Yn 是谐波级数乘以 n。正如阿米特指出的那样， Yn 落入**O(n*log k)**，所以 Xn 也落入。由于我们无法将 Xn 限制在更近的上方，因此我们对 Xn 的最佳极限近似也是**O(n*log k)**。

# drupal - Drupal 7 - 内容分类

> ID：11502723
> 
> 赞同：1
> 
> 时间：2012-07-16T10:46:24.347
> 
> 标签：drupal, drupal-7, drupal-modules, multilingual

我正在使用 Drupal 开发一个多国家和多语言的网站。我对 Drupal 比较陌生（这是我的第一个项目）。

我的客户将拥有多个国家/地区站点（**www.example.com/uk/**、**www.example.com/bg/**、**www.example.com/fr**）。我需要的是能够在 Drupal 中将内容标记到特定国家，然后让该内容出现在相关网站上。一个用例如下：

> 用户创建一个名为*about*的页面并将其标记为保加利亚 (bg)。然后他们导航到**www.example.com/bg/about**以查看该页面。

我也在使用多语言 - 国际化模块（[链接到模块](http://drupal.org/project/i18n)）。因此，除了上述内容之外，用户还将将内容标记为特定语言。一个用例如下：

> 用户创建一个名为*about*的页面并将其标记为国家保加利亚 (bg)，他们还将语言选择为英语。然后他们导航到**www.example.com/bg/uk/about**以查看此页面。

我已经尝试了许多模块等，但到目前为止无济于事。下面要记住的一些事情：

> *   这是基于在本地服务器上安装的 Drupal 7
> *   无法更改 URL 结构
> *   www.example.com 将是他们的主要团体网站，将链接到国际版本

非常感谢任何指导或解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:36:00.733

[我认为尝试使用Organic Groups](http://drupal.org/project/og/)模块来创建“多站点”方面可能是有意义的。与单独标记相比，它会为您提供更多独立的站点。

您可以使您的所有组（国家/地区）成为全球性的（在有机组默认方案中，组可以是全球可见的，也可以仅对其成员可见）。然后，当您的一位编辑创建页面时，他们必须选择该页面应属于哪个组，而不是使用标签来隔离特定国家/地区的内容。

组是一个很好的解决方案，我认为，因为这样，每个组（国家）可以有自己独立的菜单，使用[og_menu](http://drupal.org/project/og_menu)模块，所以你可以真正将它们设置为看起来像他们自己独立的小站点。

一旦设置好（这需要你一段时间，因为使用有机组有一个陡峭的学习曲线），你可以独立于页面所在的组进行翻译。我假设翻译的东西工作得很好使用多语言 - 国际化模块。

如果您使用[pathauto](http://drupal.org/project/pathauto)模块，您可以设置您的 url 规则以自动按照您想要的方式运行（例如，使用 bg 表示“保加利亚”组等）。我实际上没有使用有机组为我的网站设置该设置，但是关于如何做到这一点有各种讨论，我只是在这里引用其中一个：[https ://drupal.stackexchange.com/questions/36892 /organic-groups-group-content-types-and-pathauto](https://drupal.stackexchange.com/questions/36892/organic-groups-group-content-types-and-pathauto)

希望这会有帮助....

# ruby - 安装 xapian core gem 时出错

> ID：11502735
> 
> 赞同：1
> 
> 时间：2012-07-16T10:47:16.063
> 
> 标签：ruby, xapian

构建原生扩展。这可能需要一段时间...

```
ERROR:  Error installing xapian-core:
ERROR: Failed to build gem native extension.

rake1.8 RUBYARCHDIR=/usr/lib/ruby/gems/1.8/gems/xapian-core-1.2.7.1/lib RUBYLIBDIR=/usr/lib/ruby/gems/1.8/gems/xapian-core-1.2.7.1/lib
sh: rake1.8: not found 
```

Gem 文件将继续安装以`/usr/lib/ruby/gems/1.8/gems/xapian-core-1.2.7.1`供检查。结果记录到`/usr/lib/ruby/gems/1.8/gems/xapian-core-1.2.7.1/ext/gem_make.out`

这是 gem makeout 文件：

```
rake1.8 RUBYARCHDIR=/usr/lib/ruby/gems/1.8/gems/xapian-core-1.2.7.1/lib RUBYLIBDIR=/usr/lib/ruby/gems/1.8/gems/xapian-core-1.2.7.1/lib
sh: rake1.8: not found 
```

# android - Android上按钮上的文本上的透明层

> ID：11502737
> 
> 赞同：0
> 
> 时间：2012-07-16T10:47:27.467
> 
> 标签：android, button, background, transparent, layer

我有一个大按钮，一层中有一个文本，我想在该文本下方或上方创建一个半透明的白色布局（因为按钮将有背景图片，所以我想以某种方式在视觉上分离文本）。

我该怎么办？我是否应该创建另一个与文本重叠的图层，我可以为按钮的文本添加背景，还是我可以做其他事情？

目前的结构是这样的：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout style="@style/layout_furniture" >

    <Button
        style="@style/button_furniture"
        android:text="@string/desks" />

</LinearLayout>

</LinearLayout> 
```

风格是这样的：

![按钮](../Images/9381c386172fb831154f520059556ea3.png)

感谢你们。

PS 背景现在是这种编码的蓝色渐变，但稍后它将是图片背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:01:25.477

//将此样式添加到您的 `style="@style/button_furniture"`

```
 <style name="button_furniture">

    <item name="android:textColor">#ffffffff</item>//white text
    <item name="android:textSize">14sp</item>
    <item name="android:shadowColor">#000000</item>//stroke with black
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">1</item>

  </style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:42:52.043

我通过将线性布局容器更改为相对，并在带有 layout_alignBottom="@id/button" 的按钮下添加一个新的线性布局容器来解决这个问题。我还在布局中应用了 match_parent 宽度、任意宽度、水平方向和#22ffffff 彩色背景。

# mysql - mysql - 将一个外键引用到多个可能的主键

> ID：11502738
> 
> 赞同：1
> 
> 时间：2012-07-16T10:47:33.393
> 
> 标签：mysql, database-design, foreign-keys

我想设置以下数据库场景：

```
CREATE TABLE IF NOT EXISTS `points` (
  `po_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `po_north` INT,
  `po_east` INT,
  PRIMARY KEY (`po_id`),
) ENGINE=InnoDB;

CREATE TABLE IF NOT EXISTS `lines`(
  `li_id` INT UNSIGNED NOT NULL AUTO_INCREMENT,
  `li_from` INT NOT NULL,
  `li_to` INT NOT NULL,
  PRIMARY KEY (`li_id`),
  FOREIGN KEY (`li_from`) REFERENCES points(`po_id`),
  FOREIGN KEY (`li_to`) REFERENCES points(`po_id`),
) ENGINE=InnoDB; 
```

现在我想设置第三个表，它包含一些元数据，例如谁创建或更改了点或线：

```
CREATE TABLE IF NOT EXISTS `metadata` (
  `me_type` ENUM('point','line') NOT NULL,
  `me_type_id` INT UNSIGNED NOT NULL,
  `me_permissions` VARCHAR(255) NOT NULL,
  `me_created_by` INT UNSIGNED NOT NULL,
  `me_created_on` DATETIME NOT NULL,
  `me_last_modified_by` INT UNSIGNED NOT NULL,
  `me_last_modified_by` DATETIME NOT NULL,
) ENGINE=InnoDB; 
```

我的第一种方法是设置`ENUM`两种类型（点和线）。但问题仍然存在，我无法正确引用其中一张表的外键。MySQL中是否有针对此类问题的推荐解决方案？

顺便说一句：用于`me_created_by`和`me_last_modified_by`应引用存储一些用户数据的表的字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:09:08.407

您的案例似乎是称为“泛化专业化”或“类继承的表设计”的设计模式的另一个实例。

如果您将点和线视为对象类，那么它们都是一些更一般的对象类的子类。我不确定在这种情况下给超类起什么名字。这是解决同一问题的几个先前问题之一。

[在数据库中扩展类](https://stackoverflow.com/questions/875116/extending-classes-in-the-database)

福勒对这个主题进行了广泛的处理。您的案例有一个额外的问题，因为您正在处理元数据。但这不需要改变设计。您需要第三张表，由于没有更好的术语，我将其称为“项目”。键“it_id”将被分配一个自动编号，每次添加点或线时，您都会添加一个项目。不会为“po_id”和“li_id”两列分配自动编号。相反，它们将是外键，在 Items 表中引用“it_id”。

元数据表中对点或线的引用将是对“项目”的引用，您可以根据具体情况使用该信息来查找有关点或线的信息。

这有多大帮助取决于您尝试对元数据执行的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:12:57.763

你的表应该包含一个外键——`points`而不是相反。这样做将使您免于定义任何更复杂的表格设置。使用这种方法，单个条目可以多次重复用于许多不同的点或线。这甚至不是 MySQL 特有的，而是一个通用的、规范化的数据库结构。`lines``metadata``metadata`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-16T10:55:44.513

您可以使用触发器来执行此操作，您需要先触发一个事件，该事件可以为点或线创建引用键，然后再根据相应的表插入记录

# c# - 指数超出范围。必须是非负数且小于集合的大小

> ID：11502745
> 
> 赞同：3
> 
> 时间：2012-07-16T10:48:22.503
> 
> 标签：c#, visual-studio-2008, datagridview, datatable

错误是：索引超出范围。必须是非负数且小于集合的大小。

场景：我有一个桌面应用程序，它加载 XML 文件并在网格中显示数据。现在，我想插入另一个文件并想在两个文件中追加数据。但是，当我尝试合并数据时（我的意思是将行添加到具有先前打开的文件行的 DataTable）...我收到此错误。

```
if (strPreviousFile != "")   
{  
  dgvBooksDetails.DataSource = dtBooks;   
  int intCurrentRows = dgvBooksDetails.Rows.Count;   
  intBooksCounter = intBooksCounter + intCurrentRows;   
  for (int c = intCurrentRows; c < intBooksCounter; c++)  
  {   
    Book objBook = new Book();   
    objBook.ID = BookID[c];   
    objBook.Title = BookTitle[c];  
    objBook.Author = BookAuthor[c];  
    objBook.Genre = BookGenre[c];  
    objBook.Price = Double.Parse(BookPrice[c]);  
    objBook.PublishDate = DateTime.Parse(BookPublish_Date[c]);  
    objBook.Description = BookDescription[c];  
    dtBooks.Rows.Add(objBook.ID, objBook.Title, objBook.Author, objBook.Genre,
                     objBook.Price, objBook.PublishDate, objBook.Description);   
  }
} 
```

我该如何克服这个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:54:39.980

引起麻烦的行是这样的：

```
int intCurrentRows = dgvBooksDetails.Rows.Count; 
```

您将此值作为循环的开始。但是，rows 集合从 0 到 计数`Count-1`，因此`Count`用于访问 rows 集合的值会导致索引超出范围错误。

另一件事：`BookTitle`等`BookAuthor`也从 0 索引到`Count-1`（或者`Length-1`如果它们是数组）。我不确定您告诉我们的内容，但是您确定可以像您那样通过索引访问这些集合吗？我的意思是，它们是否只包含要添加的项目，因此需要从 0 索引到 X 而不是`number of existing items`到`number of existing items + number of new items`（这就是你在代码中所做的）？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:51:39.620

好吧，您似乎有一个*n*长的数组，并且您正试图访问其中的*第 n 个*或更大的元素。索引是基于**0**的，因此必须通过索引*0*到*n-1访问**n*大小的数组。

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:57:24.513

确保您的数组（`BookTitle`、`BookAuthor`、`BookGenre`、`BookPrice`、`BookPublish_Date`和`BookDescription`）具有正确的长度（最小 intBooksCounter）。**

# office-interop - 在 Word 中删除页眉和页脚会插入段落字符

> ID：11502746
> 
> 赞同：1
> 
> 时间：2012-07-16T10:48:23.287
> 
> 标签：office-interop

我正在尝试使用互操作删除我的简单 .doc 文档中的所有页脚。编码

```
foreach (Section sect in oDoc.Sections)                
{
 foreach (HeaderFooter headFoot in sect.Footers)
 { headFoot.Range.Delete(); }
} 
```

在每个页脚中插入新的段落字符。有时它将文本传输到下一页到新页面。我的调查告诉我，段落是在访问 headFoot.Range 对象时插入的......所以 headFoot.Range.Text = String.Empty 也不起作用。我也试过

```
 try { oDoc.StoryRanges.Item(WdStoryType.wdEvenPagesFooterStory).Delete(); }
                catch { }

                try { oDoc.StoryRanges.Item(WdStoryType.wdFirstPageFooterStory).Delete(); }
                catch { }

                try { oDoc.StoryRanges.Item(WdStoryType.wdPrimaryFooterStory).Delete(); }
                catch { } 
```

，但此代码不会删除页脚。那么有什么想法可以在删除页脚时避免插入段落字符吗？

# php - 两个 CodeIgniter 应用程序之间的会话共享

> ID：11502748
> 
> 赞同：2
> 
> 时间：2012-07-16T10:48:33.673
> 
> 标签：php, codeigniter, session

我在同一台服务器上运行了 2 个 codeigniter 安装。

第一个应用程序是：localhost/aa/index.php

第二个应用程序是：localhost/aa/invoice/index.php

第二个应用程序位于第一个应用程序文件夹中。在实时环境中，它们将位于同一个域中。我试图让单点登录工作——所以，如果我在 aa 应用程序中设置了用户数据，我也应该能够在发票文件夹中验证它。

有没有办法分享会话。

由于文件夹将始终位于同一个域中，因此我也愿意使用 ci 库（仅 php）之外的会话。

**编辑：** 当他们没有任何数据时，他们会显示相同的会话 ID。当我在一个应用程序上添加一些变量时，另一个就会不同步。

我也有会话存储在数据库中（两个应用程序共享同一个数据库。）

请建议。

谢谢！:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-16T11:16:25.600

Codeigniter 出于某种原因推出了自己的会话实现，而不是原生 PHP 会话。

[http://codeigniter.com/user_guide/libraries/sessions.html](http://codeigniter.com/user_guide/libraries/sessions.html)

您可以选择使用：

1.  cookie 存储（不理想，存储空间小，cookie 中的敏感数据？）。
2.  数据库会话（使用会话 id cookie 持久化）。
3.  覆盖并滚动您自己的（使用本机 php 会话！）

显然，您需要确保正确配置会话标识符，以便两个应用程序可以从相同的会话数据中读取。如果使用数据库实现，您需要确保两个应用程序都可以访问同一个数据库。

为了增加复杂性，如果您选择加密会话，加密类使用的盐在两个应用程序中也需要相同，因此任何一个都能够解密共享会话数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-24T12:20:34.287

```
$config['encryption_key'] = 'epitome'; 
```

两个应用程序文件夹的`encryption_key`配置名称将相同。

更改代码点火器的路径`encryption_key`是`application/config/config.php`第 228 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-24T10:42:37.710

```
$config['sess_cookie_name'] = 'myvalue'; 
```

在 config.php 文件中，您可以在两个 CI 应用程序上设置相同的值，使用“文件”会话驱动程序

```
CI_Session Object 
```

（[用户数据] => 数组（[__ci_last_regenerate] => 1490351129 [级别] => 1 [用户] => 103 [全名] => 鲁本火山口）

```
[_driver:protected] => files
[_config:protected] => Array
    (
        [cookie_lifetime] => 600
        [cookie_name] => MyHiddenValue
        [cookie_path] => /
        [cookie_domain] => 
        [cookie_secure] => 
        [expiration] => 600
        [match_ip] => 
        [save_path] => /tmp
    ) 
```

)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-17T05:08:01.787

如果可以的话....我已经注意到那些不实用且违反常规的设计问题将为长期和根深蒂固的问题提供基础....您应该问问自己，这样做真的有必要/可取当我们知道它们是 2 个不同版本的框架的 2 个不同版本之间共享会话数据，因为它们做事不同......我只能说，无论你做什么......这个设计缺陷会使你的架构变得脆弱和迟早你将不得不倾倒它。

请让我知道如果以后你发现否则..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-03T18:43:34.037

如果您使用相同的加密密钥在同一服务器上安装代码，默认情况下，两个安装都将共享会话。实际上，当我为另一个客户端但在同一服务器上复制 codeigniter 安装时，我发现了。我担心这是一个错误。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-07-16T10:57:09.603

如果您将代码移动到同一台服务器，则默认情况下两个会话都将开始共享。

# google-app-engine - 主/从数据存储与高复制数据存储

> ID：11502749
> 
> 赞同：3
> 
> 时间：2012-07-16T10:48:37.717
> 
> 标签：google-app-engine

在开始 GAE 数据存储之前，我认为了解黑白主/从数据存储和高复制数据存储的区别会很好吗？是什么让 GAE 团队从 Master/Slave 迁移到 HRD？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-23T18:40:14.077

两者的区别（以及切换的原因）是*增加了容错性和数据一致性*。

主**/从数据存储**实现主备份协议。每个应用程序都由主服务器（即单个数据中心）提供服务，其数据异步复制到从服务器（即其他数据中心）。这种模式的问题在于它不能保护您的应用程序免受本地故障的影响，并且更有可能导致数据不一致。

**High Replication Datastore**实施 Paxos 共识算法，以确保大多数数据中心保持应用程序数据的一致视图。由于您的数据不再依赖于单个数据中心的运行状况，因此即使存在本地/全局故障，数据存储也能够正常运行。Google 的工程师也从这种实施中受益，因为它允许他们执行数据中心维护，而不必为 AppEngine 应用程序强制执行预定的只读周期。

使用 High Replication Datastore 的缺点是写入速度较慢（大约慢 2 倍，因为 Paxos 本质上是两阶段的）。但这并不是什么大问题，尤其是与高复制数据存储必须提供的更高的容错性和数据一致性相比。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T18:41:50.110

在仅使用主/从的 App Engine 的前三年，数据存储区的运行状况与单个数据中心的运行状况相关联。用户具有低延迟和强一致性，但也有暂时的数据不可用和计划的只读周期。

High Replication Datastore 以少量的延迟和一致性换取了更高的可用性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T10:50:54.283

主/从存储已弃用，建议您不要使用它，[https://developers.google.com/appengine/docs/python/datastore/usingmasterslave](https://developers.google.com/appengine/docs/python/datastore/usingmasterslave)

# php - 创建需要与 magento 数据库通信的站点

> ID：11502751
> 
> 赞同：0
> 
> 时间：2012-07-16T10:48:47.753
> 
> 标签：php, mysql, magento

我目前正在开发一个网站（其中的一部分），人们在该网站上从一个基于 magento 的电子商务网站购买商品。但是，要使用该项目，他们需要访问另一个网站。基本上那个“其他”网站是我正在做的（并通过codeigniter做）

我对magento不太了解。我的网站需要从 magento 网站获得的唯一信息是有关产品的一些信息（id、名称和状态）。此信息将链接到其他表，即产品 ID 可能是我数据库中表中的外键。我做了一些研究，并能够弄清楚数据是如何存储在 magento 数据库中的。

两个网站将在同一台服务器上。

现在我有两个选择可以将magento网站上的产品导入我的网站，

首先是我在magento网站中为所需的表创建插入、更新和删除触发器，以便在添加、修改或删除产品时，它首先尝试在我的数据库上执行相同操作，如果成功，则继续执行此操作在magento数据库中。

第二种选择是我简单地合并我的网站和 magento 网站的两个数据库，在表之间创建直接关系链接。

就像我之前所说的，我对 magento 了解不多。所以我想知道哪种方法更安全、更好，或者是否有我没想到的方法。

任何帮助，将不胜感激。谢谢。

* * *

**任务的进一步澄清：基本上有一个销售“产品**”的magento网站（我们称之为“WEBSITE A”）。当一个人购买“产品”时，他们基本上会获得该产品的“代码”。要使用这个“代码”，他们必须访问我正在使用 codeigniter 构建的另一个网站（我们称之为“WEBSITE B”）。

现在您可以猜到，代码需要在 WEBSITE B 中使用，并且一旦使用，它就会根据代码所属的**产品为用户解锁东西。**

**你可以猜到，这会在产品**和其他东西 之间建立很多联系。**产品**虽然在 WEBSITE A 中创建，但在 WEBSITE B 中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T15:29:03.643

您的第一个选择：除非您能提供帮助，否则永远不要复制数据。为什么你不能查询 Magento 数据库，因为它在同一台服务器上？

您的第二个选择：永远不要合并不相关的数据库。

这两种选择基本上都是反模式。你应该做的是直接查询 Magento 数据库，或者如果你想使用 Magento 辅助函数，包括 Magento 并直接使用它的 API：

```
<?php
require_once 'path/to/Mage.php';

// Use Magento APIs
?> 
```

# sql - 为两个表之间的公共行添加标志

> ID：11502753
> 
> 赞同：2
> 
> 时间：2012-07-16T10:48:54.087
> 
> 标签：sql, oracle

我有两个表说A和B。B是A的子集。我想做的是：向表A添加一个标志列（仅用于查看，而不是永久在表中）并且该标志的值应该是对于 A 和 B 之间的公共行是 yes，对于非公共行是 no。例如：

```
A table
Column1 Column2 Column3
X1      X2      X3
Y1      Y2      Y3
Z1      Z2      Z3 
```

* * *

```
select * from A where column1=Y1; to get B 
```

现在我的最终输出应该是

```
Column1 Column2 Column3 FLAG
X1      X2      X3      NO   
Y1      Y2      Y3      YES 
Z1      Z2      Z3      NO 
```

* * *

我必须在 1 个 sql 语句中的代码块下方的所有内容（提取 B 并添加标志）。我只能提取 B. 无法添加标志

使用 oracle 11.2.0.2.0,sqlplus

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T13:25:22.743

使用外连接有条件地链接表 A 和 B，然后使用 CASE() 语句测试 A 中的给定行是否与 B 中的行匹配。

```
select a.*
       , case when b.column1 is not null then 'YES' else 'NO' end as flag
from a left outer join b
        on a.column1 = b.column1 
```

请注意，这仅在只有 0 或 1 个 B.COLUMN1 实例时才能正常工作。如果 B 包含任何 COLUMN1 值的多个实例，那么您可以使用此变体：

```
select a.*
       , case when b.column1 is not null then 'YES' else 'NO' end as flag
from a left outer join ( select distinct column1 from b ) b
        on a.column1 = b.column1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-16T10:53:36.330

你可以尝试这样的事情：

```
SELECT A.*, 
       CASE WHEN EXISTS 
            (SELECT Column1 FROM B WHERE Column1=A.Column1) 
       THEN "YES" 
       ELSE "NO"
       END
FROM A 
```

我的 PL-SQL 有点生疏，例子取自[这里](http://www.dbforums.com/oracle/1215584-if-exist-command-case-statement.html)

您还可以在 B 上执行 LEFT JOIN，并查看 B.Column1 是否为 NULL。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-16T13:38:06.720

```
SELECT A.*, 'NO' 
FROM A
WHERE NOT EXISTS 
(SELECT 1 FROM B
WHERE B.COL1 = A.COL1
AND B.COL2 = A.COL2
AND B.COL3 = A.COL3) -- gets records only in A
UNION ALL 
(SELECT B.*, 'YES')  -- gets B records which are a subset of A 
```

由于 B 是 A 的子集 - 您已经知道这些记录应该为您的别名列标记为 YES。从一个记录集中删除记录在另一个记录集中存在或不存在的经典方法当然是使用 EXISTS 子句。EXISTS 子句的优点是它是一个布尔运算符，并为调用返回 TRUE 或 FALSE。并且这种返回不需要对表进行全面扫描 - 因此它更快（通常）。您也可以选择使用 MINUS 子句，它可能更有效。尝试打开解释计划。

# dojox.mobile - 在 dojox.mobile 中使用 DOM 按钮

> ID：11502755
> 
> 赞同：0
> 
> 时间：2012-07-16T10:48:59.873
> 
> 标签：dojox.mobile

我对 Yoshiroh Kamiyama 在本文中解释的 DOM 按钮技术有疑问：-

[http://www.ibm.com/developerworks/mobile/library/mo-dojo-mobile-performance/index.html](http://www.ibm.com/developerworks/mobile/library/mo-dojo-mobile-performance/index.html)

在哪里可以找到关于我可以使用的各种 DOM 按钮类的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T09:35:30.713

I don't think there is any explicit documentation on this, but you can run the dojox/mobile/tests/test_domButtons.html test case that shows the available DOM buttons classes.

# php - Jquery onclick，使父Div不可见

> ID：11502759
> 
> 赞同：0
> 
> 时间：2012-07-16T10:49:25.617
> 
> 标签：php, jquery, html, css

我有这个 Jquery：

```
$(document).ready(function() {
   $('input[type="checkbox"]').click(function() {
       var togClass=$(this).attr('class');
       if($(this).attr('checked')){
          $(this).parent().parent().('div.' + togClass ).css("display", "inline-block");
       }
       else {
          $('div.' + togClass ).css("display", "none");

       }
   });
}); 
```

这个 Html 基本上重复了：

```
<div id="Coltext">
     <div id= "Sidechecks">
      <input checkbox class= "ModelName">
     <div id="seqWrap">
     <div id="Nucwrap"> 
     <div id="hit" class= "modelname">"String"</div>
     </div> 
     </div>
     </div>
 </div> 
```

当我单击时，`checkbox`我希望所有的`HIT divs`都变得不可见，仅在这个 Div 中。main`DIV- coltext`重复了很多次，每个都有相同的模型，但是当用户点击 时`checkbox`，我只希望`Hit Divs`那个 main div 消失，然后在点击时重新出现。没有人能帮忙，看起来很简单，但我无法让它工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T10:58:37.703

以下是检查复选框是否被选中的方法：

```
if($(".myCheckbox").is(':checked'))
{
    // do something
}
else
{
    // do something else
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:00:02.640

请参阅有关可验证 html 的评论。我不确定这`<input checkbox class= ModelName>` 会呈现为可供选择的东西`$('input[type="checkbox"]')`

尝试改变

```
$(this).parent().parent().('div.' + togClass ) 
```

到

```
$(this).parent('div.' + togClass + "[hit]") 
```

这应该向上遍历，寻找`togClass`具有参数“命中”的任何 DIV

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T10:59:24.310

一旦你修复了你的 HTML 标记（根据上面的评论），考虑使用'closest'，它将搜索一个元素及其祖先，寻找与选择器匹配的最接近的元素（而不是所有与选择器匹配的元素）。

```
$(this).closest('div.' + togClass ).css("display", "none"); 
```

您当前的`else`语句正在选择所有匹配的类节点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:06:47.187

```
 <div class="Coltext">
   <div id="Sidechecks">
          <input type="checkbox" class="ModelName" />
    <div class="seqWrap">
    <div class="Nucwrap"> 
    <div id="hit" class="modelname">"String"</div>
    </div> 
    </div>
    </div>
   </div> 
```

**jQuery**

```
$(this).parent('div.' + togClass + "[hit]") 
```

# jbpm - 检索数据库值并在 jbpm 中的humantask 中显示？

> ID：11502760
> 
> 赞同：0
> 
> 时间：2012-07-16T10:49:26.607
> 
> 标签：jbpm

我们如何将 DB 值显示为人工任务形式。

说明：当用户选择一个 id 时，相应的 DB 行应该填充到人工任务变量中吗？

在处理程序的帮助下，我可以将值插入到数据库中，但我无法从数据库中检索值并在人工任务中显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T09:34:37.097

您可以编写一个自定义节点，在此节点中您可以调用从数据库中检索数据的 Web 服务（SOAP），并将此数据作为变量传递给人工任务。

# java - Hibernate Join 使用条件和限制

> ID：11502761
> 
> 赞同：13
> 
> 时间：2012-07-16T10:49:32.460
> 
> 标签：java, hibernate, hibernate-criteria

我有 2 个实体

**PayoutHeader.java**

```
@Entity
public class PayoutHeader extends GenericDomain implements Serializable {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;        
    @Column
    private Integer month;
    @Column
    private Integer year;
    @OneToOne
    private Bank bank;
    @Column
    private Double tdsPercentage;
    @Temporal(javax.persistence.TemporalType.DATE)
    private Date **chequeIssuedDate**;

    @Temporal(javax.persistence.TemporalType.DATE)
    private Date entryDate;

} 
```

**支付明细.java**

```
@Entity
public class PayoutDetails {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;        

    @ManyToOne
    private PayoutHeader payoutHeader;

    @Column
    private Double amount;
    @Column
    private String bankName;
    @Temporal(javax.persistence.TemporalType.DATE)
    private Date clearingDate;
    @OneToOne    
    private Advisor advisor;

    @Column
    private Long **advisorId**;
} 
```

我想使用 Hibernate Criteria 编写查询，例如

```
Select pd.* from PayoutDetails pd, PayoutHeader ph where pd.payoutheaderId = ph.id and pd.advisorId = 1 and and ph.chequeIssuedDate BETWEEN STR_TO_DATE('01-01-2011', '%d-%m-%Y') AND STR_TO_DATE('31-12-2011', '%d-%m-%Y') "; 
```

我写过这样的查询

```
public List<PayoutDetails> getPayoutDetails(AdvisorReportForm advisorReportForm) {
        Criteria criteria = getSession().createCriteria(PayoutDetails.class);

        if (advisorReportForm.getAdvisorId() != null && advisorReportForm.getAdvisorId() > 0) {
            criteria.add(Restrictions.eq("advisorId", advisorReportForm.getAdvisorId().toString()));
        }

        criteria.setFetchMode("PayoutHeader", FetchMode.JOIN)
                .add(Restrictions.between("chequeIssuedDate", advisorReportForm.getFromDate(), advisorReportForm.getToDate()));        

        return criteria.list();
    } 
```

但是给出错误为

> org.hibernate.QueryException：无法解析属性：chequeIssuedDate of：org.commission.domain.payout.PayoutDetails

我认为是试图在 中查找`chequeIssuedDate`字段`PayoutDetails`，但该字段在`PayoutHeader`. 如何在加入期间指定别名？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-16T11:13:58.027

`criteria.setFetchMode("PayoutHeader", FetchMode.JOIN)`只是指定您要通过连接获取标头，在这种情况下可能不需要。它不会更改限制中使用的表。为此，您可能希望创建一个附加条件或别名，或多或少如下：

```
public List<PayoutDetails> getPayoutDetails(AdvisorReportForm advisorReportForm) {
        Criteria criteria = getSession().createCriteria(PayoutDetails.class);

        if (advisorReportForm.getAdvisorId() != null && advisorReportForm.getAdvisorId() > 0) {
            criteria.add(Restrictions.eq("advisorId", advisorReportForm.getAdvisorId().toString()));
        }

        criteria.createCriteria("payoutHeader")
                .add(Restrictions.between("chequeIssuedDate", advisorReportForm.getFromDate(), advisorReportForm.getToDate()));        

        return criteria.list();
    } 
```

或（使用别名）

```
public List<PayoutDetails> getPayoutDetails(AdvisorReportForm advisorReportForm) {
        Criteria criteria = getSession().createCriteria(PayoutDetails.class);

        if (advisorReportForm.getAdvisorId() != null && advisorReportForm.getAdvisorId() > 0) {
            criteria.add(Restrictions.eq("advisorId", advisorReportForm.getAdvisorId().toString()));
        }

        criteria.createAlias("payoutHeader", "header")
                .add(Restrictions.between("header.chequeIssuedDate", advisorReportForm.getFromDate(), advisorReportForm.getToDate()));        

        return criteria.list();
    } 
```

有关此示例，请参阅[有关标准查询的 Hibernate 文档。](http://docs.jboss.org/hibernate/orm/3.5/reference/en/html/querycriteria.html)

将 转换为字符串也可能不合适`advisorId`，因为它实际上是 a`Long`并且可能映射到 sql 中的数字字段。

`advisorId`如果您映射`advisor`, 并使用基于字段的限制，通常也根本不映射类似此字段的内容`advisor`，类似于处理`payoutHeader`字段的方式。

我不担心从标头中获取所有字段，但是如果您让`createCriteria`版本正常工作，它的行为可能会有所不同。

# sharepoint-2010 - Powerview 连接错误

> ID：11502764
> 
> 赞同：1
> 
> 时间：2012-07-16T10:49:47.153
> 
> 标签：sharepoint-2010, powerpivot

当我尝试从 Sharepoint 中的 excel 电子表格创建 powerview 报告时，我收到以下错误消息。

请帮忙

```
An error occurred while loading the model for the item or data source 'http://win-lnj1eq8qsfv:16350/PowerPivotTestSite/PowerPivot Gallery/Sum of Sales Quota.xlsx'. Verify that the connection information is correct and that you have permissions to access the data source.

<detail>
  <ErrorCode xmlns="http://www.microsoft.com/sql/reportingservices">rsCannotRetrieveModel</ErrorCode>
  <HttpStatus xmlns="http://www.microsoft.com/sql/reportingservices">400</HttpStatus>
  <Message xmlns="http://www.microsoft.com/sql/reportingservices">An error occurred while loading the model for the item or data source 'http://win-lnj1eq8qsfv:16350/PowerPivotTestSite/PowerPivot Gallery/Sum of Sales Quota.xlsx'. Verify that the connection information is correct and that you have permissions to access the data source.</Message>
  <HelpLink xmlns="http://www.microsoft.com/sql/reportingservices">http://go.microsoft.com/fwlink/?LinkId=20476&amp;EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&amp;EvtID=rsCannotRetrieveModel&amp;ProdName=Microsoft%20SQL%20Server%20Reporting%20Services&amp;ProdVer=11.0.2100.60</HelpLink>
  <ProductName xmlns="http://www.microsoft.com/sql/reportingservices">Microsoft SQL Server Reporting Services</ProductName>
  <ProductVersion xmlns="http://www.microsoft.com/sql/reportingservices">11.0.2100.60</ProductVersion>
  <ProductLocaleId xmlns="http://www.microsoft.com/sql/reportingservices">127</ProductLocaleId>
  <OperatingSystem xmlns="http://www.microsoft.com/sql/reportingservices">OsIndependent</OperatingSystem>
  <CountryLocaleId xmlns="http://www.microsoft.com/sql/reportingservices">1033</CountryLocaleId>
  <MoreInformation xmlns="http://www.microsoft.com/sql/reportingservices">
    <Source>ReportingServicesLibrary</Source>
    <Message msrs:ErrorCode="rsCannotRetrieveModel" msrs:HelpLink="http://go.microsoft.com/fwlink/?LinkId=20476&amp;EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&amp;EvtID=rsCannotRetrieveModel&amp;ProdName=Microsoft%20SQL%20Server%20Reporting%20Services&amp;ProdVer=11.0.2100.60" xmlns:msrs="http://www.microsoft.com/sql/reportingservices">An error occurred while loading the model for the item or data source 'http://win-lnj1eq8qsfv:16350/PowerPivotTestSite/PowerPivot Gallery/Sum of Sales Quota.xlsx'. Verify that the connection information is correct and that you have permissions to access the data source.</Message>
    <MoreInformation>
      <Source>Microsoft.ReportingServices.ProcessingCore</Source>
      <Message msrs:ErrorCode="rsErrorOpeningConnection" msrs:HelpLink="http://go.microsoft.com/fwlink/?LinkId=20476&amp;EvtSrc=Microsoft.ReportingServices.Diagnostics.Utilities.ErrorStrings&amp;EvtID=rsErrorOpeningConnection&amp;ProdName=Microsoft%20SQL%20Server%20Reporting%20Services&amp;ProdVer=1.0" xmlns:msrs="http://www.microsoft.com/sql/reportingservices">Cannot create a connection to data source 'TemporaryDataSource'.</Message>
      <MoreInformation>
        <Source>Microsoft.AnalysisServices.AdomdClient</Source>
        <Message>A connection cannot be made. Ensure that the server is running.</Message>
        <MoreInformation>
          <Source>Microsoft.AnalysisServices.SharePoint.Integration</Source>
          <Message></Message>
          <MoreInformation>
            <Source>Microsoft.AnalysisServices.SharePoint.Integration</Source>
            <Message>The PowerPivot service application could not connect to the Analysis Services instance.</Message>
          </MoreInformation>
        </MoreInformation>
      </MoreInformation>
    </MoreInformation>
  </MoreInformation>
  <Warnings xmlns="http://www.microsoft.com/sql/reportingservices" />
</detail> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:55:53.403

Basically if you read through the error you can see **that it cannot open a connection to** the data source **TemporaryDataSource**:

```
<Message msrs:ErrorCode="rsErrorOpeningConnection" ....
    Cannot create a connection to data source 'TemporaryDataSource'.
</Message> 
```

Check that you can access the Datasource manually - the connection string builder dialog should have a 'Test Connection' button.

# objective-c - ParseKit - 如何正确处理预处理器语句？

> ID：11502766
> 
> 赞同：3
> 
> 时间：2012-07-16T10:49:49.027
> 
> 标签：objective-c, parsing, grammar, parsekit

我为 ParseKit 写了一个 C 语法，它确实工作得很好，但让我抓狂的是预处理器语句。预处理器语句的正确符号定义是什么？

这是我尝试过的简短示例...

```
@reportsCommentTokens = YES;
@commentState = '/';
@singleLineComments = '//';
@multiLineComments = '/*' '*/';
@commentState.fallbackState = delimitState;
@delimitState.fallbackState = symbolState;

@start = Empty | comments | preprocessor;

comments = comment*;
comment = Comment;

@symbols = '#include';

preprocessor = preprocessorIncludes;

preprocessorIncludes = preprocessorIncludeStatement*;
preprocessorIncludeStatement = preprocessorInclude quotedFileName*;

preprocessorInclude = '#include';
quotedFileName = QuotedString; 
```

...但它不起作用。将其作为简化的语法示例来捕获注释并包含带引号的语句（而不是 < >）。我在这个简单的文件上尝试了这个语法......

```
/*
 * Cryptographic API.
 *
 * RIPEMD-256 - RACE Integrity Primitives Evaluation Message Digest.
 *
 * Based on the reference implementation by Antoon Bosselaers, ESAT-COSIC
 *
 * Copyright (c) 2008 Adrian-Ken Rueegsegger <ken@codelabs.ch>
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the Free
 * Software Foundation; either version 2 of the License, or (at your option)
 * any later version.
 *
 */

// Here's one line comment

/* One line multiline comment */

#include "ripemd.h"

/* 2nd one line multiline comment */ 
```

...它以 /* 一行多行注释 */ 结束，将其报告为注释标记，然后它静默失败。

所以我试图将'#include'符号分开......

```
@symbolState = '#' '#';
@symbol = '#';
numSymbol = '#';

preprocessorInclude = numSymbol 'include'; 
```

......但它仍然没有帮助。

也许托德可以提供帮助，但处理“#include”等“符号”的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T18:19:31.000

[ParseKit](http://parsekit.com/ "ParseKit - 用于解析、标记和语言处理的 Cocoa Objective-C 框架")的开发者在这里。

罗伯特，您的语法非常接近，但我发现您使用嵌套`*`（零个或多个）修饰符导致语法失败。

我认为问题在于您的`@start`语法产生式已经`Empty`作为顶级选项（`|`ed 与其他两个产生式一起使用），但是随后的子产生式`comments`和`preprocessor`都包含带有`*`（零个或多个）修饰符的产生式。那些`*`s 实际上应该是`+`（一个或多个）修饰符，因为您已经考虑了顶级 的零情况`Empty`。

我不完全确定，但我认为这不是 ParseKit 独有的问题，而是我怀疑语法存在问题，并且任何此类语法工具包都可能出现此问题。（可能是错的）

考虑到这一点，对语法的一些小调整已经为我解决了。这是经过小调整的编辑语法：

```
@reportsCommentTokens = YES;
@commentState = '/';
@singleLineComments = '//';
@multiLineComments = '/*' '*/';
@commentState.fallbackState = delimitState;
@delimitState.fallbackState = symbolState;

@start = (comments | preprocessor)*;

comments = comment+;
comment = Comment;

@symbols = '#include';

preprocessor = preprocessorIncludes;

preprocessorIncludes = preprocessorIncludeStatement+;
preprocessorIncludeStatement = preprocessorInclude quotedFileName;

preprocessorInclude = '#include';
quotedFileName = QuotedString; 
```

请注意我`Empty`将顶层中的替换为`*`. 我用 s 交换嵌套`*`的`+`s。

使用这个编辑过的语法，我得到了想要的输出（为了清楚起见，稍微截断了）：

```
[/*
 * Cryptographic API.
...
 */, // Here's one line comment, /* One line multiline comment */, #include, "ripemd.h", /* 2nd one line multiline comment */]/*
 * Cryptographic API.
...
 *//// Here's one line comment//* One line multiline comment *//#include/"ripemd.h"//* 2nd one line multiline comment */^ 
```

* * *

此外，为了找到问题，我重写了语法以使其更简单。这样更容易找到问题。然后我将我发现的内容重新应用于您的原始语法。如果您有兴趣，这是我想出的简化语法。这就是我对这个特定语法的看法：

```
@reportsCommentTokens = YES;
@commentState = '/';
@singleLineComments = '//';
@multiLineComments = '/*' '*/';

@start = (comment | macro)*;

comment = Comment;

macro = include; // to support other macros, add: ` | define | ifdef` etc.

include = '#' 'include' QuotedString; 
```

# objective-c - 如何在 NSTextField 中查找文本占用的大小？

> ID：11502767
> 
> 赞同：0
> 
> 时间：2012-07-16T10:49:49.697
> 
> 标签：objective-c, macos, cocoa, nstextfield

我`NSTextField`在`NSView`. 标签中的值动态变化。我想设置 TextField 的 Frame 始终相对于视图居中。有什么方法可以计算 texfield 中文本占用的像素或大小，以便我可以增加文本字段的大小以适应文本并更改原点，以便文本字段始终居中。

我想`NSTextField`在视图中对齐要居中的位置，并通过计算文本占用的大小来更改文本字段的原点和框架。如何计算 TextField 中文本占用的大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T10:55:33.810

除非标签有背景颜色，否则最简单的方法是将其调整到 UI 可能允许的大小，然后将文本对齐设置为居中。您可以在 Interface Builder 中执行此操作，只需在标签的属性检查器中选择“对齐”下的居中选项卡。

# php - Joomla php 错误：警告：plgContentPagenavigation::onContentBeforeDisplay() 的参数 3 应为参考

> ID：11502777
> 
> 赞同：0
> 
> 时间：2012-07-16T10:50:15.100
> 
> 标签：php, joomla2.5

我不是 php 编码器，但我做了一些研究，这看起来是不同版本的 php 的问题 - 但我可能是错的。

我正在使用 joomla 2.5 并在结帐时收到此错误（使用 k2store）：

```
Warning: Parameter 3 to plgContentPagenavigation::onContentBeforeDisplay() expected to be a reference, value given in */libraries/joomla/event/event.php on line 71

Warning: Parameter 3 to plgContentVote::onContentBeforeDisplay() expected to be a reference, value given in */libraries/joomla/event/event.php on line 71

Warning: Parameter 3 to plgContentPagenavigation::onContentBeforeDisplay() expected to be a reference, value given in */libraries/joomla/event/event.php on line 71

Warning: Parameter 3 to plgContentVote::onContentBeforeDisplay() expected to be a reference, value given in */libraries/joomla/event/event.php on line 71 
```

第 71 行说：

```
return call_user_func_array(array($this, $event), $args); 
```

使用 php5.3.6 在我的本地主机上没有错误，但在开发服务器上我收到 php5.3.10 错误

[这里有一个类似的案例，](https://stackoverflow.com/questions/8512535/php-error-warning-parameter-1-expected-to-be-a-reference)但我不明白解决方案

也许这对某人来说很容易解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:57:32.203

如果在提到的行中给出，尝试通过添加/删除`&`运算符来解决，并让我知道它是否有效，你可以通过使用关闭错误`error_reporting(0);`但是先尝试调试代码:)

# javascript - Ext.Net 控制可见性

> ID：11502783
> 
> 赞同：1
> 
> 时间：2012-07-16T10:50:40.590
> 
> 标签：javascript, events, code-behind, ext.net

我的页面上有一个 ext:Button 和 ext:GridPanel，我的 ext:GridPanel 的默认可见性为 false。我想通过单击 ext:Button 将 ext:GridPanel 可见性设置为 true。如何执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T21:01:04.667

`.Visible`请使用该物业，而不是使用该`.Hidden`物业。在初始 page_load 上设置`Hidden="true"`，然后在 DirectEvent/DirectMethod 期间设置`.Hidden=false`.

希望这可以帮助。

# directx - 记住 HLSL DirectX10 中像素的状态

> ID：11502784
> 
> 赞同：0
> 
> 时间：2012-07-16T10:50:41.037
> 
> 标签：directx, shader

我有一个小问题，我想知道这是解决它的好方法。我在 GPU 上的应用程序（元胞自动机）上更改了许多像素颜色。我交换渲染目标以获取实际的后台缓冲区，然后我将它放到我的像素着色器中，在下一帧中重复操作。我的问题是我想知道像素在最后一帧发生了变化。

我知道我可以通过使用更多的渲染目标（3 RT）来解决它并记住每个像素的特定数据，但我认为这可能会导致一些性能问题。也许是其他方式来做到这一点。我使用 DirectX10。

真的感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T11:34:10.320

一种简单的常用方法（我不确定它是否适用于您的情况），如果您只使用 3 个颜色通道，则可以将此信息存储在 alpha 通道中。

# android - 删除进度对话框下方显示的百分比

> ID：11502786
> 
> 赞同：5
> 
> 时间：2012-07-16T10:50:48.860
> 
> 标签：android, progressdialog, percentage

我得到水平进度对话框下方的百分比。我想删除它。

我得到了 setProgressPercentFormat(null) 方法，但该方法适用于 api 级别 11 或更高级别。我需要在 api 8 级做。

那么，我该怎么做呢？请帮我。

我也得到了自定义我的 progressDialog 的建议，但不知道该怎么做。请指导我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-31T19:07:03.517

将 null 传递给 setProgressNumberFormat() 和 setProgressPercentFormat() 可能会对您有所帮助。

有关详细信息，请参阅[此处](https://stackoverflow.com/questions/7794001/how-to-remove-progress-bar-number-at-the-bottom-part-of-the-progress-bar)。

# php - 在地址栏中显示所需的 url 但实际上没有

> ID：11502787
> 
> 赞同：1
> 
> 时间：2012-07-16T10:50:52.710
> 
> 标签：php, smarty

我正在寻找一种方法，当用户单击链接时..它应该转到该地址，但应该在地址栏中显示我想要的 url..

php & smarty 中是否有任何程序。

请帮我。我是这种情况的新手，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T10:52:41.803

您不能在地址栏中“伪造”网址；这将是一个很大的安全问题。它可以让你在一个邪恶的网站上显示“mybank.com”......

您可能指的是[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)或使用[框架集或 iFrame 之](http://en.wikipedia.org/wiki/Frameset)类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T15:01:06.577

我不知道 PHP 和 Smarty，但如果你使用 .htaccess 文件，你可以用 url 做任何事情。例如，将另一个页面分配给您的 URL，因此 www.myDomain/index.php?pageID=1 将是 www.myDomain/someProductname。

要学习实现和使用它，有很多资源。这是一个基本的：[http ://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/](http://coding.smashingmagazine.com/2011/11/02/introduction-to-url-rewriting/)

# vb.net - Excel VBA 和 VB.NET 一样吗

> ID：11502788
> 
> 赞同：15
> 
> 时间：2012-07-16T10:50:53.737
> 
> 标签：vb.net, vba

VB.NET 是否与 Excel 2003/2007 中您可以在后台编写的用户可编辑代码中使用的语言相同？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-16T10:53:11.457

不，Excel 2003 和 2007 使用[Visual Basic for Applications](http://en.wikipedia.org/wiki/Visual_Basic_for_Applications)，它是 Visual Basic 6 的变体。这是[VB.NET](http://en.wikipedia.org/wiki/Visual_Basic_.NET)的巨大变化。有关特定差异的更多详细信息，请参见[此处](http://en.wikipedia.org/wiki/Visual_Basic_.NET#Relation_to_older_versions_of_Visual_Basic_.28VB6_and_previous.29)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-16T10:56:44.737

不，VBA 和 VB.NET 之间唯一的相似之处是看起来相似的语法。

VBA 类似于 Visual Basic 6，后者在 1997 年左右（？）就已经过时了，所以 VBA 不是一种非常现代的语言。

VB.NET 是一门现代语言，功能与 C# 相同，但语法很糟糕，所以我个人更喜欢 C#。

VBA 是一种解释型语言，而 VB.NET 是一种编译型语言。

如果您对 Office 编程感兴趣，您可以考虑在 VB.NET 和 VSTO 中进行下一个 Office 项目，这是 VBA 的现代替代方案。

# intellij-idea - IntelliJ IDEA - 在解决方案资源管理器中跟踪活动项目

> ID：11502796
> 
> 赞同：53
> 
> 时间：2012-07-16T10:51:31.630
> 
> 标签：intellij-idea

我试图在 IDEA 中找到一个不错的 VS 功能“在解决方案资源管理器中跟踪活动项目”模拟。对于那些不知道的人 - 当我在主区域的文件之间切换时，VS 将突出显示解决方案资源管理器中的相应项目（IDEA 中的“项目”窗格）。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-07-16T17:40:57.143

从 2020.1 版本开始，该选项称为**Always Select Opened File**：

[![总是选择](../Images/8be10e7786da9c3ff5d66c561a894df3.png)](https://i.stack.imgur.com/QtoWK.png)

对于以前的版本：

在**项目视图**中，当您单击“齿轮”图标时，会出现**Autoscroll from Source选项：**

![从源自动滚动](../Images/0de32a20bcfd06a613a357a652027d22.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2021-01-26T22:13:27.617

在骑士 2020.3

向上箭头按钮是单击打开文件向下箭头按钮是始终选择打开的文件

[![在此处输入图像描述](../Images/8451ba3eeae2838205d8a7d335ecc817.png)](https://i.stack.imgur.com/JVO6u.png)

# database - 手机品牌/型号/特性数据库

> ID：11502798
> 
> 赞同：1
> 
> 时间：2012-07-16T10:51:35.310
> 
> 标签：database, mobile-phones

请帮助查找手机品牌/型号/特性数据库的软件/数据库。我需要它来集成到我的网站中。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-20T16:42:42.787

其中大部分受版权保护，因此我们无法为您提供帮助。最好的办法是手动从使您知道的数据中提取数据......

那里可能有免费资源，但我非常怀疑。

*编辑*

更新我的帖子... Wikipedia 是一个很好的信息来源，但请注意他们对数据的许可。大多数情况下，它是知识共享许可证，但这并不意味着他们的来源有其他许可证......而且还有其他......

制造商/制造商： [http ://en.wikipedia.org/wiki/List_of_mobile_phone_makers_by_country](http://en.wikipedia.org/wiki/List_of_mobile_phone_makers_by_country) [http://www.phonearena.com/](http://www.phonearena.com/)

型号： [http ://www.phonearena.com/](http://www.phonearena.com/)

# c# - 如何为 DataRepeater 链接标签设置唯一 ID

> ID：11502799
> 
> 赞同：2
> 
> 时间：2012-07-16T10:51:38.110
> 
> 标签：c#, winforms, visual-studio-2010, datarepeater

它是 C# 中的 Windows 窗体应用程序。
我正在使用`DataRepeater`Control ，其中显示三列：
`Text Label`, `Link Label`,`Link Label`
以下是屏幕截图：
![在此处输入图像描述](../Images/1a848efc120235fb6124b234266cc2ca.png)

以下是填充的代码`DataRepeater`：

```
private void Get_StaffLogins_RequestList()
    {
        mySqlConnection = DBAccess.getConnection();
        mySqlConnection.Open();
        DataTable dt = sysadmin.getStaffLoginsRequests(mySqlConnection);
        BindingSource bSource = new BindingSource();

        staff_id.DataBindings.Add("Text", bSource, "staff_id");
        //accessLink.DataBindings.Add("Value", bSource, "staff_id");
        //denyLink.DataBindings.Add("Value", bSource, "staff_id");

        if (dt.Rows.Count > 0)
        {
            bSource.DataSource = dt;
            r_msgs.DataSource = bSource;
        }
        else
        {
            r_msgs.DataSource = String.Empty;
            notify.Text = "There are no Pending requests for staff logins!";
        }
        mySqlConnection.Close();
    }

    private void accessLink_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        //Access Link Clicked
    }

    private void denyLink_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        //Deny Link Clicked
    } 
```

现在我需要的是，当用户单击`Access`或`Deny`链接时，我以某种方式获得相应的 StaffID，以便我可以在数据库中标记特定的 StaffID 访问/拒绝。
**如何使用唯一的员工 ID 为每个行链接标签分配属性？**
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:49:13.883

我通过获取 DataRepeater 的当前项目索引解决了这个问题：

```
private void accessLink_LinkClicked(object sender, LinkLabelLinkClickedEventArgs e)
    {
        //Access Link Clicked
        int RequestNumber = r_msgs.CurrentItemIndex;
        MessageBox.Show(RequestNumber.toString()+1);
        //Remaining Code
    } 
```

此代码打印访问链接标签的行号，这就是我想要的！

# unicode - 从 TrueType 到 Postscript Type 1 的字体转换

> ID：11502801
> 
> 赞同：3
> 
> 时间：2012-07-16T10:51:45.013
> 
> 标签：unicode, postscript, truetype, fontconfig

我有一个 TrueType 字体，我想将它与 Postscript 字体文件合并。当我使用 fontforge 合并时，出现错误：

> TrueType 字体文件是 2 字节编码和 Postscript 是 1 字节

我想知道是否有任何方法可以将 2 字节编码的字体文件合并为 1 字节编码的文件，或者有什么方法可以将 TrueType 字体（2 字节编码）转换为 Postscript 文件（1 字节编码）？例如，韩文字体文件是 2 字节编码的，我想将它与 1 字节编码的 Postscript 文件合并。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:23:29.990

如果您使用超过 255 个字形，则需要将 TrueType 字体转换为具有 TrueType 轮廓的 CIDFont，并提供合适的 CMap 以从字符代码映射到 CID。

或者，或者如果您只想使用最多 255 个字形，您可以将字体转换为 PostScript Type 42 字体，这是一种用于包装 TrueType 字体以便使用的 PostScript 方法。如果您想使用此方法起诉超过 255 个字形，那么您需要将原始 TrueType 字体拆分为多种类型 42 字体并根据需要切换字体以使用字形。

但基本上你不能成功地结合 TrueType 字体和 type 1（或 CFF）字体，技术是完全不同的。

你为什么要这样做呢？

# python - 使用 Corduroy couchdb 异步库时 tornado.gen 中的 BadYieldError

> ID：11502802
> 
> 赞同：3
> 
> 时间：2012-07-16T10:51:53.223
> 
> 标签：python, couchdb, tornado

我正在尝试使用[Corduroy使用 python](https://github.com/samizdatco/corduroy) [Tornado Web Server](http://www.tornadoweb.org/)与 CouchDB 异步对话。

下面的代码来自[灯芯绒指南](http://samizdat.cc/corduroy/guide/)，有一些改动。

```
import tornado.web
from corduroy import Database, NotFound, relax

people_db = Database('people')

class RelaxedHello(tornado.web.RequestHandler):
    @relax
    def get(self, user_id):
        try:
            doc = yield people_db.get(user_id)
            self.write('hello %s'%(doc['name']))
        except NotFound:
            self.write('hello whoever you are')
        self.finish()

application = tornado.web.Application([
    (r'/hi/([^/]+)', RelaxedHello),
]).listen(1920)
tornado.ioloop.IOLoop.instance().start() 
```

我遇到的问题是，尽管发现沙发文档非常好，但我收到了 BadYieldError。我怀疑这与 tornado.gen 模块设置不正确（或其他什么？）有关。在没有@relax 装饰器的情况下使用灯芯绒，并且使用回调可以正常工作。

```
Traceback (most recent call last):
  File "c:\env\pymeals_tornado\lib\site-packages\tornado\web.py", line 1074, in wrapper
    return method(self, *args, **kwargs)
  File "c:\env\pymeals_tornado\lib\site-packages\corduroy\__init__.py", line 43,  in _r_e_l_a_x_
    return gen.engine(_func_)(*args, **kwargs)
  File "c:\env\pymeals_tornado\lib\site-packages\tornado\gen.py", line 107, in wrapper
    runner.run()
  File "c:\env\pymeals_tornado\lib\site-packages\tornado\gen.py", line 319, in run
    yielded = self.gen.throw(*exc_info)
  File "test.py", line 10, in get
    doc = yield people_db.get(user_id)
BadYieldError: yielded unknown object <Document 65d936ee54417e46479a908f7a0038ef[2] {name:Colin}> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-07T22:41:10.097

阅读[放松](https://github.com/samizdatco/corduroy/blob/master/corduroy/__init__.py#L26)和[get()](https://github.com/samizdatco/corduroy/blob/master/corduroy/couchdb.py#L546)的代码，在我看来灯芯绒的 3 岁代码并不是为最现代的 Tornado 习语设计的。具体来说，`get`接受一个回调，而不是`Future`像现代 Tornado API 那样返回一个。

这意味着您必须使用旧样式，`gen.Task`例如：

```
from tornado import gen

class RelaxedHello(tornado.web.RequestHandler):
    @relax
    def get(self, user_id):
        try:
            doc = yield gen.Task(people_db.get, user_id)
            self.write('hello %s'%(doc['name']))
        except NotFound:
            self.write('hello whoever you are')
        self.finish() 
```

我还没有测试过这个，让我知道它是怎么回事。[更多信息在`gen.Task`Tornado 文档](http://tornado.readthedocs.org/en/latest/guide/coroutines.html#interaction-with-callbacks)中。

# c# - Gridview不显示记录？

> ID：11502803
> 
> 赞同：0
> 
> 时间：2012-07-16T10:51:57.407
> 
> 标签：c#, asp.net, .net, linq

我刚刚将 linq 数据附加到 gridview 它没有显示行？

```
DataDataContext db = new DataDataContext();
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
        BindData();
}

private void BindData()
{ 
    var source = from n in db.Names
                 select n;

    gridSample.DataSource = source.ToList<Name>();
    gridSample.DataBind();'
}

<asp:UpdatePanel ID="panelGrid" runat="server">
    <ContentTemplate>
        <asp:GridView runat="server" ID="gridSample" AutoGenerateColumns="false">
            <Columns>
                <asp:TemplateField HeaderText="First Name">
                    <EditItemTemplate>
                        <asp:TextBox ID="txtFirstName" runat="server" Text='<%Bind("FirstName") %>' />
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label runat="server" ID="lblFirstName" Text='<%Eval("FirstName") %>' />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Last Name">
                    <EditItemTemplate>
                        <asp:TextBox ID="txtLastName" runat="server" Text='<%Bind("LastName") %>' />
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label runat="server" ID="lblLastName" Text='<%Eval("LastName") %>' />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="Date of Birth">
                    <EditItemTemplate>
                        <asp:TextBox ID="txtDOB" runat="server" Text='<%Bind("DOB") %>' />
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label runat="server" ID="lblDOB" Text='<%Eval("DOB") %>' />
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView>
   </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T10:56:51.017

尝试这个

```
List<Name> source = (from n in db.Names select n).ToList();

        gridSample.DataSource = source;
        gridSample.DataBind();'

<asp:TextBox ID="txtFirstName" runat="server" Text='<%# Bind("FirstName") %>' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:22:55.517

尝试这个：

```
 private void BindData()
    {

        var source = from n in db.Names
                     select n;

        gridSample.DataSource = source;
        gridSample.DataBind();'
    } 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T07:26:53.250

设置属性

自动回邮 = 真

对于 GridView。因为它在 UpdatePanel 内。

# jquery - 向 JQuery UI Datepicker 添加功能以保持更改前的日期

> ID：11502811
> 
> 赞同：1
> 
> 时间：2012-07-16T10:52:44.770
> 
> 标签：jquery, user-interface, datepicker, extend

我需要向 JQuery UI Datepicker 添加功能。

我需要在日期更改之前保留当前（上一个）日期选择器日期，并将新功能方法设置为 datepicker 以判断上一个日期是否<下一个日期或上一个日期>下一个日期。

例如，我想拥有：

```
$("#myInput").datepicker.("getDirection"); // => 'left' if previous date < next date or => 'right' if previous date > next date 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T14:17:01.583

最后我自己找到了解决方案:)

```
$.extend($('#mydatepicker').datepicker, {previousDate: null, getDirection: function(){

  var delta = $('#mydatepicker').datepicker("getDate") - $('#mydatepicker').datepicker.previousDate;
  if(delta == 0){
    return 'none';
  }
  if(delta > 0){
    return 'up';
  }
  if(delta < 0){
    return 'down';
  }

}});

$('#mydatepicker').datepicker({
  beforeShow: function(input, inst){
    $('#mydatepicker').datepicker.previousDate = $('#mydatepicker').datepicker("getDate");
}); 
```

# mongodb - 如何在同一个 Mongodb 脚本 JS 文件中使用全局变量

> ID：11502815
> 
> 赞同：1
> 
> 时间：2012-07-16T10:52:59.730
> 
> 标签：mongodb

我有我的 JS 文件。
我在顶部声明了一个变量，称为：

```
var aCollection = db.myCollection; 
```

我使用这个变量来引用集合。这很容易，因为我可以更改集合的名称来处理另一个集合。

现在我想在函数中使用它，如下所示：

```
fn1 = function(_id) {

    // use  _id and aCollection 

    // i get an error if I use "aCollection"
} 
```

我这样调用上面的函数：

```
db.eval(fn1, "245"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T13:35:40.473

`db.eval`在服务器上以单独的上下文执行`fn1`，因此它无权访问其包含脚本的全局上下文。您必须更改`fn1`为接受`aCollection`作为参数，然后将该参数传递给您的`db.eval`调用。

# datastage - 如何在 DataStage 中将字符串转换为时间戳？

> ID：11502817
> 
> 赞同：1
> 
> 时间：2012-07-16T10:53:06.530
> 
> 标签：datastage

我从 csv 文件中读取数据，得到一个类似“2010-7-3”的字符串，我无法将此数据转换为时间戳，因为它不像“2010-07-03”

我该怎么办？有舞台可以处理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T01:50:05.413

在变压器中，设置三个阶段变量——年、月和日。它们各自的值应该如下

```
Field(InputLink.string_date, "-", 1)
Right("0" : Field(InputLink.string_date, "-", 2), 2)
Right("0" : Field(InputLink.string_date, "-", 3), 2) 
```

然后在输出列中使用它：

```
StringToTimestamp(year : month : day : "000000", "%yyyy%mm%dd%hh%nn%ss") 
```

# c# - 将 Graphviz 库导入 C# Visual Studio 2008

> ID：11502832
> 
> 赞同：1
> 
> 时间：2012-07-16T10:54:12.970
> 
> 标签：c#, visual-studio-2008, graphviz

我必须将我的应用程序从 Windows XP 切换到 Windows 7 操作系统。旧的 WinXp 应用程序使用 AT&T 的 WinGraphviz 库，该库现已过时。所以我正在尝试将新的 Graphviz 库导入到我的 C# 项目中。
Visual Studio 2008 要求所有引用都是 COM 对象或有效程序集。不幸的是，我从官方网站下载的 Graphiviz 软件包不包含此类文件。仅包含 DLL。

1.  添加引用 DLL 返回上述错误。
2.  添加项目文件夹不起作用。
3.  有人建议建立我自己的中断文件，但我不知道。

有什么建议吗？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:12:54.033

也许这个会有所帮助：[Graphviz4Net](http://graphviz4net.codeplex.com/)

# c# - C# - 分配布尔表达式的结果

> ID：11502833
> 
> 赞同：-1
> 
> 时间：2012-07-16T10:54:33.453
> 
> 标签：c#

我不确定这是否是 c# 支持的功能，但它是我在 javascript 编程中使用的构造，如果它支持，我希望将构造与 c# 一起使用（.net Framework 3.5）。

我有以下工作代码：

```
if (user.Status == AccountStatus.Active) {
  status = true;
} else {
  status = false;
} 
```

我想将其缩短如下：

```
status = (user.Status == AccountStatus.Active); 
```

在 Javascript 中，这将在括号内分配评估的真/假结果。这在 c# 中似乎不适用于我，并导致通用编译错误。

是否有另一种以紧凑的方式实现这一目标的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-16T10:56:43.047

那应该可以正常工作。

应该：

```
status = user.Status == AccountStatus.Active; 
```

你的语法是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:01:04.413

我能够成功执行以下

```
bool a = (1 == 0); //returns false 
```

和

```
bool a = (1 == 1); //returns true 
```

# javascript - 道场。将 JSON 中的属性设置为 HTML 属性

> ID：11502836
> 
> 赞同：1
> 
> 时间：2012-07-16T10:54:55.277
> 
> 标签：javascript, html, dojo

我有`dojox.form.CheckedMultiSelect`：

```
<span dojoType="dojo.data.ItemFileReadStore" url="..." jsId="listStore"></span>
<select id="unsubscribedList" class="soria" dojoType="dojox.form.CheckedMultiSelect" 
multiple="true" onchange="..." store="listStore" title="title"></select> 
```

商店的 JSON 看起来像：

```
{"items":[{"title":"ESC, MICHAEL (MESC)","value":"1000","label":"ESC, MICHAEL"},...}]
,"totalCount":7,"endList":7,"label":"label","identifier":"value","startList":1} 
```

如何将“ `items.title`”属性从 JSon 设置为 HTML 属性“标题”到每个将要创建的复选框`CheckedMultiSelect`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:18:10.633

尝试这个：

```
dojo.ready(function() {
    // 1.7.2 template has 'dojoxCheckedMultiSelectHidden' className on its select from template.
    // if this is different (inspect your DOM after onload), adapt the query selector
    var opts = dojo.query('.dojoxCheckedMultiSelectHidden option'),
        store = dijit.byId('listStore');
    store.fetch({ onComplete: function(items) {
       for(var i = 0; i < items.length; i++) {
          if(!opts[i]) continue; 
          else opts[i].title = store.getValue(items[i], 'title');
       }

    }});
}); 
```

它的作用是，它

1.  强制商店从服务器加载其数据，返回项目数组 ( `query: {id:'*'}`)
2.  迭代它们，将标题放在选项上。

相反，如果您通过标记部署选项，则标题属性不会与此小部件映射，只有允许作为配置参数的标记才有效。换句话说，**title-attributes 被丢弃**。小部件很差，并且没有与 dojotoolkit 的其余部分一起更新，所以它不是那么灵活。

当解析器在标记上运行时，它会忽略标题属性（您的标记被破坏并被 CheckedMultiSelect 模板替换，请参阅*dojobase/dojox/form/resources/CheckedMultiSelect.html*）。

所以，解决方案是 - 维护一个 JS 数组，映射为

```
// array with indexes matching the options from markup
var titles = [ "title1", "title2", "title3" ];

dojo.addOnLoad(function() {

  // note, that the '_0' is a generic ID, config options are not accepting the id attribute either
  // calling private function, again not correctly layed out
  var childObjects = dijit.byId('dojox_form_CheckedMultiSelect_0')._getChildren();

  dojo.forEach(childObjects, function(optObject, index) {
    optObject.labelNode.title = titles[index];
  });

}); 
```

# entity-framework - 无法使用 Entity Framework 4.3.1 在实体类型上设置字段/属性

> ID：11502840
> 
> 赞同：7
> 
> 时间：2012-07-16T10:55:11.597
> 
> 标签：entity-framework, entity-framework-4

几周以来，我一直在 .NET 4.0 解决方案中使用实体框架。它是 EF 4.3.1。我首先创建了数据库架构，并使用“EF4.x DbContext Generator”模板生成了我的实体对象。

我在架构中有三个表，并且使用简单的 CRUD 方法都可以正常工作。

我现在添加了第四个表“Subjects”，它有一个对现有表“SourceUri”的外键引用，这样一个 SourceUri 可以有 0 个主题，而一个主题只有一个 SourceUri。

我已经更新了我的 edmx 模型，它看起来是正确的。但是，无论我尝试什么，我似乎都无法执行以下操作：

*   添加新的 SourceUri 记录
*   为新的 SourceUri 添加一个或多个主题

这是我目前正在尝试的代码。您可以看到我定期保存上下文，但最初我只在方法结束时保存更改一次。

```
 /// <summary>
    /// Adds a new Source URI to the system
    /// </summary>
    /// <param name="sourceUri">The source URI to add</param>
    /// <param name="subjectNames">List of subjects for this source URI, in order</param>
    /// <returns>The added source URI</returns>
    public SourceUri AddSourceUri(SourceUri sourceUri, IList<string> subjectNames)
    {
        try
        {
            _logger.Debug("Adding new source URI '{0}', with '{1}' subjects.", sourceUri.Uri, 
                subjectNames != null ? subjectNames.Count : 0);
            LogSourceUriDetails(sourceUri, "Adding");

            using (var dbContext = GetDbContext())
            {
                dbContext.SourceUris.Add(sourceUri);
                dbContext.SaveChanges(); // this save succeeds

                // add the subjects if there are any
                if (subjectNames != null)
                {
                    for (int i = 0; i < subjectNames.Count; i++)
                    {
                        Subject newSubject = new Subject()
                                                 {
                                                     DisplayOrder = i,
                                                     SourceUriId = sourceUri.SourceUriId,
                                                     SubjectText = subjectNames.ElementAt(i).Trim()
                                                 };
                        _logger.Debug("Adding new subject '{0}' to source URI '{1}'.", newSubject.SubjectText,
                                      sourceUri.Uri);
                        dbContext.Subjects.Add(newSubject); // this line fails
                        dbContext.SaveChanges();
                    }
                }

                _logger.Debug("Successfully added new source URI '{0}' with '{1}' subjects. Source URI ID is '{2}'.", 
                    sourceUri.Uri, subjectNames != null ? subjectNames.Count : 0, sourceUri.SourceUriId);
                return sourceUri;
            }
        }
        catch (Exception exception)
        {
            _logger.ErrorException(string.Format("An error occurred adding new source URI '{0}' with '{1}' subjects.",
                sourceUri.Uri, subjectNames != null ? subjectNames.Count : 0), exception);
            throw;
        }
    } 
```

代码添加新的 SourceUri 并保存更改。但是，它无法将新的主题添加到数据上下文中。它并没有达到试图保存该更改的程度。

例外是：

```
Unable to set field/property Subjects on entity type CommentService.DomainObjects.SourceUri. See InnerException for details.
System.Data.Objects.Internal.PocoPropertyAccessorStrategy.CollectionRemove(RelatedEnd relatedEnd, Object value)
System.Data.Objects.Internal.EntityWrapper`1.CollectionRemove(RelatedEnd relatedEnd, Object value)
System.Data.Objects.DataClasses.EntityCollection`1.RemoveFromObjectCache(IEntityWrapper wrappedEntity)
System.Data.Objects.DataClasses.RelatedEnd.Remove(IEntityWrapper wrappedEntity, Boolean doFixup, Boolean deleteEntity, Boolean deleteOwner, Boolean applyReferentialConstraints, Boolean preserveForeignKey)
System.Data.Objects.DataClasses.RelatedEnd.FixupOtherEndOfRelationshipForRemove(IEntityWrapper wrappedEntity, Boolean preserveForeignKey)
System.Data.Objects.DataClasses.RelatedEnd.Remove(IEntityWrapper wrappedEntity, Boolean doFixup, Boolean deleteEntity, Boolean deleteOwner, Boolean applyReferentialConstraints, Boolean preserveForeignKey)
System.Data.Objects.DataClasses.EntityReference`1.Exclude()
System.Data.Objects.DataClasses.RelationshipManager.RemoveRelatedEntitiesFromObjectStateManager(IEntityWrapper wrappedEntity)
System.Data.Objects.ObjectContext.AddObject(String entitySetName, Object entity)
System.Data.Entity.Internal.Linq.InternalSet`1.&lt;&gt;c__DisplayClass5.&lt;Add&gt;b__4()
System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
System.Data.Entity.DbSet`1.Add(TEntity entity)
CommentService.Business.Managers.SourceUriManager.AddSourceUri(SourceUri sourceUri, IList`1 subjectNames) in C:\Projects\SVN Misc Projects\CommentService\trunk\CommentService.Business\Managers\SourceUriManager.cs:line 152
CommentService.Web.Comment.AddSourceUri(SourceUri sourceUri, IList`1 subjectNames) in C:\Projects\SVN Misc Projects\CommentService\trunk\CommentService.Web\Comment.svc.cs:line 173
SyncInvokeAddSourceUri(Object , Object[] , Object[] )
System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]&amp; outputs)
System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage41(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage4(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage3(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage2(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage11(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage1(MessageRpc&amp; rpc)
System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationContextSet) 
```

我在这个问题上转了一圈又一圈，看到了几个略有不同的例外。他们似乎都指出 SourceUri 对象的 Subjects 导航属性在某种程度上是只读的或固定长度（数组？）。

生成的实体类如下所示：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace CommentService.DomainObjects
{
    using System;
    using System.Collections.Generic;

    public partial class SourceUri
    {
        public SourceUri()
        {
            this.Comments = new HashSet<Comment>();
            this.Subjects = new HashSet<Subject>();
        }

        public long SourceUriId { get; set; }
        public string Uri { get; set; }
        public string Description { get; set; }
        public System.DateTime DateCreated { get; set; }
        public string AdminUser { get; set; }

        public virtual ICollection<Comment> Comments { get; set; }
        public virtual ICollection<Subject> Subjects { get; set; }
    }
}

//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace CommentService.DomainObjects
{
    using System;
    using System.Collections.Generic;

    public partial class Subject
    {
        public Subject()
        {
            this.Comments = new HashSet<Comment>();
        }

        public long SubjectId { get; set; }
        public long SourceUriId { get; set; }
        public string SubjectText { get; set; }
        public int DisplayOrder { get; set; }

        public virtual ICollection<Comment> Comments { get; set; }
        public virtual SourceUri SourceUri { get; set; }
    }
} 
```

为什么这不起作用？

我检查过/尝试过的事情的快速列表：

*   数据库架构看起来正确 - 我可以使用 SQL 和主键按预期插入记录，外键和身份似乎表现正确
*   该模型似乎正确反映了数据库架构，包括 PK 身份（EntityKey = true，StoreGeneratedPattern=Identity）
*   我已经设法让 EF 将数据持久保存到我的架构中，但是在插入数据后，会引发异常，指出上下文可能不同步 - 再次与无法更新 SourceUri 对象的主题导航属性有关
*   我尝试将主题添加到 dbContext.Subjects 集合以及 SourceUri.Subjects 集合。我还尝试设置主题的 SourceUri 属性而不是主题的 SourceUriId 属性。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-20T10:35:42.047

我已经深入了解了这个问题。问题行为是由 SourceUri 实体通过 WCF Web 服务传递到该方法引起的。这意味着对象的 ICollection 属性被反序列化为一个固定长度且无法添加的数组。

我已经通过更改生成我的实体的模板解决了这个问题，以便它生成集合显式为列表的类，如下所示：

```
//------------------------------------------------------------------------------
// <auto-generated>
//    This code was generated from a template.
//
//    Manual changes to this file may cause unexpected behavior in your application.
//    Manual changes to this file will be overwritten if the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace CommentService.DomainObjects
{
    using System;
    using System.Collections.Generic;
    using System.Linq; // added this

    public partial class SourceUri
    {
        public SourceUri()
        {
            this.Comments = new HashSet<Comment>().ToList(); // added this
            this.Subjects = new HashSet<Subject>().ToList(); // added this
        }

        public long SourceUriId { get; set; }
        public string Uri { get; set; }
        public string Description { get; set; }
        public System.DateTime DateCreated { get; set; }
        public string AdminUser { get; set; }

        public virtual List<Comment> Comments { get; set; } // altered these to List
        public virtual List<Subject> Subjects { get; set; } // altered these to List
    }
} 
```

# asp.net - 当 cookieless 设置为 true 时，将表单发布到另一个应用程序中的 aspx 页面

> ID：11502842
> 
> 赞同：0
> 
> 时间：2012-07-16T10:55:22.770
> 
> 标签：asp.net, session-cookies

我需要将表单提交到另一个 Web 应用程序。

我在我的`IIS`. 在 website1 我有一个页面***“Register.aspx”***，我将`PostBackUrl`提交按钮设置为 website2 中的一个页面（***Receiver.aspx***）。但我无法在 Receiver.aspx 中获得发布的值。

如果我将 PostBack url 设置为 website1 中的页面，我可以使用`Request.Form["tbUserName"]`. 请给我建议。

如果我改变`cookieless="UseCookies"`它工作正常。

# delphi - Delphi 中是否有 THeaderControl 的用途

> ID：11502843
> 
> 赞同：9
> 
> 时间：2012-07-16T10:55:27.913
> 
> 标签：delphi

我一直在为我的网站[LearnDelphi.tv](http://LearnDelphi.tv)制作有关使用 delphi 组件的视频。我正在寻找 THeaderControl 但找不到任何用处 - 现在不需要这个组件 - 被其他组件（如 TListView （带有报告视图样式））超越，还是有一些我忽略的使用它的方法?

编辑：我在 THeaderControl 上为我的一个商业视频录制了一个片段，但我决定免费发布这个小片段（6 小时中的 20 分钟）。在[YouTube](http://www.youtube.com/watch?v=mrF9gpRsX5M)上观看。感谢所有做出贡献的人。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-16T15:21:02.727

一般来说：`THeaderControl`可以用作表格数据的标题。当然，通常使用列表视图。但是对于每列中不同组件的奇异布局，使用列表视图或类似视图不容易创建，或者甚至对于每列的完全不同布局，标题控件可能很有用。它只是在需要的地方提供更大的灵活性。将其与`TPageControl`提供比`TTabControl`.

关于一个特定的小众案例：例如，我使用标题控件作为规划网格组件的一部分。标题控件通过数据源获取标题，标题部分与列和滚动条同步。实际上，这需要一些代码，但不会超过实现不同事件设计时的代码：

```
 TPlanGridHeader = class(TCustomHeaderControl)
  private
    FSectionWidth: Integer;
    procedure SetSectionWidth(Value: Integer);
    procedure WMMouseMove(var Message: TWMMouseMove); message WM_MOUSEMOVE;
  protected
    function CreateSection: THeaderSection; override;
    procedure SectionResize(Section: THeaderSection); override;
    procedure SectionTrack(Section: THeaderSection; Width: Integer;
      State: TSectionTrackState); override;
    property SectionWidth: Integer read FSectionWidth write SetSectionWidth;
  public
    procedure AddSection(const AText, AHint: String);
    constructor Create(AOwner: TComponent); override;
  end; 
```

![在此处输入图像描述](../Images/fe14787b18d1952100f7fc7c5a557e34.png)

# c# - 有这样的RTSP Ping吗？

> ID：11502856
> 
> 赞同：3
> 
> 时间：2012-07-16T10:56:22.053
> 
> 标签：c#, winforms, network-programming, rtsp

我目前正在开发一个 WinForm 应用程序，以使用 C# 中的 RTSP 协议从 IP 摄像机流式传输视频。一切正常。该应用程序的部分要求包括检查网络摄像机是否在线的功能。

所以我使用 System.Net.NetworkInformation.Ping 类执行了一个 ping 函数来 ping IP 摄像机。假设摄像头的RTSP url如下rtsp:// **[CAMERA IP]** :554/Master0-RTSP/1.0，我只需要提取**[CAMERA IP]**部分并使用Ping类查看摄像头是否通过使用其 IP 是否在线。

最初，它一直有效，直到出现问题，例如如果输入可能不是预期 IP 摄像机的 IP（例如计算机的 IP），如果输入的设备的输入 IP 在线，则 ping 功能仍然有效。

我试图搜索类似 RTSP ping 的东西，但找不到。希望对此事有任何建议或意见。非常感谢 C# 中的任何示例。感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:41:57.150

`OPTIONS`可能可行，但标准指定正确的方法是使用`GET_PARAMETER`.

RFC2326 清楚地概述了

[http://www.ietf.org/rfc/rfc2326.txt](http://www.ietf.org/rfc/rfc2326.txt)

10.8 获取参数

GET_PARAMETER 请求检索 URI 中指定的表示或流的参数值。回复和响应的内容留给实现。没有实体主体的 GET_PARAMETER 可用于测试客户端或服务器的活跃度（“ping”）。

虽然`GET_PARAMETER`服务器可能不支持，但无法判断该服务器将如何响应`OPTIONS`甚至不需要 sessionID 的请求。因此，不能保证它会使您现有的会话保持活动状态。

从阅读有关`OPTIONS`请求的相同 RFC 可以清楚地看出这一点

10.1 选项

该行为等同于 [H9.2] 中描述的行为。OPTIONS 请求可以在任何时候发出，例如，如果客户端将要尝试非标准请求。它不影响服务器状态。

例子：

```
 C->S:  OPTIONS * RTSP/1.0
        CSeq: 1
        Require: implicit-play
        Proxy-Require: gzipped-messages

 S->C:  RTSP/1.0 200 OK
        CSeq: 1
        Public: DESCRIBE, SETUP, TEARDOWN, PLAY, PAUSE 
```

请注意，这些必须是虚构的功能（希望我们不会故意忽略一个真正有用的功能，以便我们可以在本节中有一个强有力的示例）。

如果 GET_PARAMETER 不受支持，那么您将使用要保持活动状态的会话的 SessionId 发出 PLAY 请求。

即使 OPTIONS 不支持 Session ID 并且如果您已经在玩游戏也不会产生不利影响，这也应该有效。

对于 C# RtspClient，请参阅我的项目 @ [https://net7mma.codeplex.com/](https://net7mma.codeplex.com/)

以及 CodeProject 上的文章@http [://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:21:55.580

关于 C# 中的 RTSP，请参阅此线程[Using RTMP or RTSP protocol in C#](https://stackoverflow.com/questions/3238592/using-rtmp-or-rtsp-protocol-in-c-sharp)

关于Ping ...您可以执行为DESCRIBE操作...但注意不要太频繁，设备会受到影响。

[http://www.ietf.org/rfc/rfc2326.txt](http://www.ietf.org/rfc/rfc2326.txt)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:19:24.050

`ICMP`您可能希望保持一个`RTSP`没有视频/音频 RTP 流的帮助程序会话，而不是ping，定期检查套接字连接和发送`OPTIONS`或`DESCRIBE`命令的良好状态，例如每分钟一次，以查看设备是否响应。

有些人建议使用`GET_PARAMETER`而不是选项，但是这是一种较差的方法。`OPTIONS`是强制性的，`GET_PARAMETER`不是。两者都有不同的用途。两者都有小的服务器端执行费用。`OPTIONS`显然是两者中的佼佼者。

> 有些服务器可能不支持设置流参数，因此不支持 GET_PARAMETER 和 SET_PARAMETER。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-25T18:11:02.337

您可以使用[RTSPClientSharp](https://github.com/BogdanovKirill/RtspClientSharp)并执行以下操作：

```
public static async Task TestRTSPConnection(string rtspAddress, string user, string password)
{
        var serverUri = new Uri(rtspAddress);
        var credentials = new NetworkCredential(user, password);

        var connectionParameters = new ConnectionParameters(serverUri, credentials);
        var cancellationTokenSource = new CancellationTokenSource();

        var connectTask = ConnectAsync(connectionParameters, cancellationTokenSource.Token);

        if (await Task.WhenAny(connectTask, Task.Delay(15000 /*timeout*/)) == connectTask)
        {
            if (!connectTask.Result)
            {
                logger.Warn("Connection refused - check username and password");
            }

            logger.Info("Connection test completed");
        }
        else 
        {
            logger.Warn("Connection timed out - check username and password");
        }
    }

    private static async Task<bool> ConnectAsync(ConnectionParameters connectionParameters, CancellationToken token)
    {
        try
        {
            using (var rtspClient = new RtspClient(connectionParameters))
            {
                rtspClient.FrameReceived +=
                    (sender, frame) => logger.Info($"New frame {frame.Timestamp}: {frame.GetType().Name}");

                while (true)
                {
                    logger.Info("Connecting...");

                    try
                    {
                        await rtspClient.ConnectAsync(token);
                    }
                    catch (OperationCanceledException)
                    {
                        logger.Info("Finishing test before connection could be established. Check credentials");
                        return false;
                    }
                    catch (RtspClientException e)
                    {
                        logger.Error($"{e.Message}: {e.InnerException?.Message}");
                        return false;
                    }

                    logger.Info("Connected - camera is online");
                    return true;
                }
            }
        }
        catch (OperationCanceledException)
        {
            return false;
        }
    } 
```

如果您只关心 ping 以及相机是否在线，它对我来说非常有效。当凭据不正确时也会发生超时。如果端口未公开或连接被拒绝，您将直接失败。

# xslt - 用于计算唯一后代元素的 XPath 表达式

> ID：11502857
> 
> 赞同：1
> 
> 时间：2012-07-16T10:56:23.187
> 
> 标签：xslt, xpath

我正在编写一个 XPath 表达式来计算唯一的子属性。使用以下 xPath 表达式，我可以获取所有不唯一的子属性：

```
//*[count(*)=0] 
```

我需要一个 XPath 表达式来返回我所有的唯一属性和唯一属性的数量

例如：XML 文件

```
<details>
    <Employee>
        <EmpNo>10</EmpNo>
        <EmpName>TestName</EmpName>
        <Address>
           <Address1>market</Address1>
           <Address2>motel</Address2>
           <Street/>
        </Address>
    </Employee>

    <Employee>
        <EmpNo>20</EmpNo>
        <EmpName>TestName2</EmpName>
        <Address>
           <Address1>school</Address1>
           <Address2>playground</Address2>
           <Street>
                <StreetName>TestStreet2</StreetName>
                <StreetCode>200</StreetCode>
           </Street>
        </Address>
    </Employee> 
```

预期输出：

```
 <!-- Unique element's count -->
  <data>6</data>
  <!-- Unique Element Names -->
  <data>EmpNo</data>
  <data>EmpName</data>
  <data>Address1</data>
  <data>Address2</data>
  <data>StreetName</data>
  <data>StreetCode</data>
  <!-- Unique Element values -->
  <!-- Data Set 1 -->
  <data>10</data>
  <data>TestName</data>
  <data>market</data>
  <data>motel</data>
  <data>null</data>
  <data>null</data>
  <!-- Data Set 2 -->
  <data>20</data>
  <data>TestName2</data>
  <data>school</data>
  <data>playground</data>
  <data>TestStreet2</data>
  <data>200</data> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:42:18.733

这个 XSLT 1.0 样式表

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output indent="yes" omit-xml-declaration="yes" />

  <!-- index data fields by their element name -->
  <xsl:key 
    name  = "kFields" 
    match = "Employee//*"
    use   = "name()" 
  />

  <!-- store a unique list of elements (Muenchian Grouping) -->    
  <xsl:variable name="fields" select="
    /details/Employee//*[
      generate-id()
      =
      generate-id(key('kFields', name())[1])
    ][
      not(
        key('kFields', name())/*
      )
    ]
  " />

  <!-- main output ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsl:template match="/details">
    <xsl:comment> unique element count </xsl:comment>
    <data>
      <xsl:value-of select="count($fields)" />
    </data>
    <xsl:call-template name="newline" />

    <xsl:comment> unique element names </xsl:comment>
    <xsl:for-each select="$fields">
      <data>
        <xsl:value-of select="name()" />
      </data>
      <xsl:call-template name="newline" />
    </xsl:for-each>

    <xsl:comment> unique element values </xsl:comment>
    <xsl:apply-templates select="Employee" />
  </xsl:template>

  <!-- Employee output ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsl:template match="Employee">
    <xsl:variable name="this" select="." />

    <xsl:comment> data set <xsl:value-of select="position()" /> </xsl:comment>
    <xsl:for-each select="$fields">
      <xsl:variable 
        name="val" 
        select="$this//*[not(*) and name() = name(current())]" 
      />
      <data>
        <xsl:choose>
          <xsl:when test="normalize-space($val) != ''">
            <xsl:value-of select="$val" />
          </xsl:when>
          <xsl:otherwise>
            <xsl:text>null</xsl:text>
          </xsl:otherwise>
        </xsl:choose>
      </data>
      <xsl:call-template name="newline" />
    </xsl:for-each>
  </xsl:template>

  <!-- Helpers ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ -->
  <xsl:template name="newline">
    <xsl:value-of select="'&#xA;'" />
  </xsl:template>

</xsl:stylesheet> 
```

产生（换行符可能会为您重现不同）：

```
<!-- unique element count -->
<data>6</data>

<!-- unique element names -->
<data>EmpNo</data>
<data>EmpName</data>
<data>Address1</data>
<data>Address2</data>
<data>StreetName</data>
<data>StreetCode</data>

<!-- unique element values -->

<!-- data set 1 -->
<data>10</data>
<data>TestName</data>
<data>market</data>
<data>motel</data>
<data>null</data>
<data>null</data>

<!-- data set 2 -->
<data>20</data>
<data>TestName2</data>
<data>school</data>
<data>playground</data>
<data>TestStreet2</data>
<data>200</data> 
```

笔记：

*   `//*[count(*)=0]`并且`//*[not(*)]`是平等的。后者更好。
*   我已经使用了一个`<xsl:key>`和*Muenchian 分组*来找出其后代中的唯一元素名称`<Employee>`
*   变量中的 XPath 表达式`$fields`做了两件事：
    *   首先，它使用 Muenchian 对元素进行分组，以使它们独一无二`name()`。
    *   然后它检查剩余的元素。任何同名元素都不能在输入中的任何地方有任何子元素 ( `not( key('kFields', name())/* )`。否则`<data>Street</data>`会出现在输出中。
*   您的输出格式不明确。如果存在名称相同但嵌套位置不同的元素，事情就会变得一团糟。

# sql - heroku db：推送问题

> ID：11502860
> 
> 赞同：0
> 
> 时间：2012-07-16T10:56:27.793
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, heroku

我在让 db:push 与 heroku 一起工作时遇到了一些问题。

正如我在其他地方所读到的，ruby 版本 > 1.9.3-p0 存在问题，因此我已降级到 1.9.2-p290，因为这似乎是最常见的建议。

这可以通过运行 ruby​​ -v 来确认`ruby 1.9.2p290 (2011-07-09 revision 32553) [x86_64-darwin11.4.0]`

```
[teacherjoy (master)]$ heroku db:push
Loaded Taps v0.3.24
Auto-detected local database: sqlite://db/development.sqlite3
Warning: Data in the app 'teacherjoy' will be overwritten and will not be recoverable.

 !    WARNING: Destructive Action
 !    This command will affect the app: teacherjoy
 !    To proceed, type "teacherjoy" or re-run this command with --confirm teacherjoy

> teacherjoy
Sending schema
Schema:        100% |==========================================| Time: 00:00:05
Sending indexes
users:         100% |==========================================| Time: 00:00:02
schema_migrat: 100% |==========================================| Time: 00:00:01
Sending data
4 tables, 76 records
holders:         0% |                                          | ETA:  --:--:--
Saving session to push_201207160342.dat..
!!! Caught Server Exception
HTTP CODE: 500
Taps Server Error: PGError: ERROR:  time zone displacement out of range: "2012-07-10 12:00:00.000000+5894685600"
["/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `async_exec'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `block (2 levels) in execute'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/logging.rb:28:in `log_yield'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `block in execute'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:158:in `check_disconnect_errors'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:175:in `execute'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:240:in `block (2 levels) in execute'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/connection_pool/threaded.rb:71:in `hold'",      
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/connecting.rb:226:in `synchronize'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:240:in `block in execute'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:261:in `check_database_errors'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/adapters/postgres.rb:238:in `execute'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/query.rb:71:in `execute_dui'", 
 "/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:552:in `execute_dui'", 
 "/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:243:in `block (2 levels) in import'", 
 "/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:243:in `each'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:243:in `block in import'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/query.rb:223:in `_transaction'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/query.rb:209:in `block in transaction'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/connection_pool/threaded.rb:84:in `hold'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/connecting.rb:226:in `synchronize'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/query.rb:207:in `transaction'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/dataset/actions.rb:243:in `import'", 
"/app/lib/taps/data_stream.rb:315:in `import_rows'", 
"/app/lib/taps/data_stream.rb:158:in `fetch_remote_in_server'",           
"/app/lib/taps/server.rb:114:in `block (3 levels) in <class:Server>'",  
"/app/lib/taps/utils.rb:161:in `call'", "/app/lib/taps/utils.rb:161:in `server_error_handling'", 
"/app/lib/taps/server.rb:112:in `block (2 levels) in <class:Server>'",   
"/app/lib/taps/db_session.rb:15:in `block in conn'",  
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/database/connecting.rb:76:in `connect'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sequel-3.20.0/lib/sequel/core.rb:119:in `connect'",   
"/app/lib/taps/db_session.rb:14:in `conn'", 
"/app/lib/taps/server.rb:111:in `block in <class:Server>'",    
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:865:in `call'",  
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:865:in `block in route'", 
 "/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `instance_eval'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:521:in `route_eval'",  
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:500:in `block (2 levels) in route!'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `catch'",    
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:497:in `block in route!'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `each'",   
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:476:in `route!'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:601:in `dispatch!'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:411:in `block in call!'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `instance_eval'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `block in invoke'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `catch'",    
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:566:in `invoke'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:411:in `call!'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:399:in `call'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `block in call'", 
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:1005:in `synchronize'",   
"/app/.bundle/gems/ruby/1.9.1/gems/sinatra-1.0/lib/sinatra/base.rb:979:in `call'",   
"/home/heroku_rack/lib/static_assets.rb:9:in `call'",   
"/home/heroku_rack/lib/last_access.rb:15:in `call'", 
"/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:47:in `block in call'",   
"/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `each'", 
"/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/urlmap.rb:41:in `call'",  
"/home/heroku_rack/lib/date_header.rb:14:in `call'",   
"/app/.bundle/gems/ruby/1.9.1/gems/rack-1.2.1/lib/rack/builder.rb:77:in `call'",  
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:76:in `block in pre_process'", 
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `catch'",   
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:74:in `pre_process'",   
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:57:in `process'",  
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/connection.rb:42:in `receive_data'", 
"/app/.bundle/gems/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run_machine'", 
"/app/.bundle/gems/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:256:in `run'",   
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/backends/base.rb:57:in `start'",  
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/server.rb:156:in `start'", 
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/controllers/controller.rb:80:in `start'", 
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:177:in `run_command'",   
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/lib/thin/runner.rb:143:in `run!'",  
"/app/.bundle/gems/ruby/1.9.1/gems/thin-1.2.7/bin/thin:6:in `<top (required)>'", 
"/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `load'",   
"/app/.bundle/gems/ruby/1.9.1/bin/thin:19:in `<main>'"] 
```

是什么导致了这个问题和/或我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:52:19.473

我想这是由于持有人表的日期格式（字段是时区位移）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T13:42:56.637

不确定到底是什么修复了它，但我试图通过本地种子文件推送。当我尝试运行 db:seed 时，我不断收到迁移错误。当我尝试运行迁移时，出现迁移错误。所以我运行了以下命令：然后在出现新错误时继续运行 db:migrate。

```
heroku run rake db:reset
heroku run rake db:migrate 
```

# android - 在 Android 中扩展浏览器功能

> ID：11502861
> 
> 赞同：0
> 
> 时间：2012-07-16T10:56:33.367
> 
> 标签：android

当我打开 Android 的默认浏览器时，我想添加一个按钮或一个菜单项，单击它以打开我的 Intent 并向我传递当前的 url 参数。

这在Android中可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:00:31.610

仅通过共享选项，如果有问题的浏览器有一个。标准 AOSP 浏览器应用程序将在操作溢出中具有这样的“共享”选项。它会触发`ACTION_SEND` `Intent`MIME 类型为 的`text/plain`，因此任何声称通过 an 在清单中支持它的活动`<intent-filter>`都将能够响应：

```
 <intent-filter android:label="@string/app_name">
            <action android:name="android.intent.action.SEND"/>

            <data android:mimeType="text/plain"/>

            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T10:58:24.450

当然，你可以获取当前的url：

```
URL url = new URL(mWebView.getUrl()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:25:17.423

我不知道我是否理解正确，但我认为这是你想要的。

当用户单击您的按钮时，您可以`somesite://current_page_url.`使用 javascript 或插件的功能重定向到自定义 url。

这可以通过您的意图过滤器来获取，并将主机设置为“somesite”，如此[处](https://stackoverflow.com/a/2448531/759019)所示。

# entity-framework-4 - 如何定义 DatabaseGenerated.Computed 应该计算什么？

> ID：11502862
> 
> 赞同：3
> 
> 时间：2012-07-16T10:56:39.307
> 
> 标签：entity-framework-4, ef-code-first, entity-framework-4.1, code-first, calculated-columns

我刚刚开始使用 EF CodeFirst，尤其是使用 dataAnnotations。现在我正在尽我所能理解“DatabaseGenerated”属性。到目前为止我所知道的：

*   使用此属性为我提供了三个选项来处理属性值的创建：Computed、Id 和 None。
*   使用此属性意味着该属性不能手动更新 - 它由数据库完成

所以 - 我可以想象使用“Id”选项时会发生什么，我不知道使用“Computed”选项时会发生什么。我认为这应该告诉数据库计算字段值。

例如：字段“ *sum* ”=字段“*价格*”+字段“*运费*”。

但是我怎么能以这种方式使用它呢？我环顾四周，没有找到任何例子。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T13:24:44.413

您不能使用 EF 告诉数据库如何计算列 - 您只能告诉 EF 该列是数据库生成的，因此应该从数据库中检索它以供您在代码中使用。

要控制数据库如何计算列，您必须在 EF 之外或在数据库初始化逻辑中手动指示它。

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    context.Database.ExecuteSqlCommand("RAW SQL HERE");
} 
```

您的 SQL (MS T-SQL) 可能看起来像这样（[更多在这里](http://msdn.microsoft.com/en-us/library/ms189292%28v=sql.105%29.aspx)）：

```
CREATE TABLE t2 (a int, b int, c int, x float, 
   y AS CASE x 
         WHEN 0 THEN a 
         WHEN 1 THEN b 
         ELSE c 
      END) 
```

对于 SQL，这里有一些关于计算列的信息：http: [//msdn.microsoft.com/en-us/library/ms191250 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms191250(v=sql.105).aspx)

也供参考：http: [//msdn.microsoft.com/en-us/library/gg193958.aspx](http://msdn.microsoft.com/en-us/library/gg193958.aspx)

# magento - Magento - 订购的产品被禁用时会发生什么？

> ID：11502872
> 
> 赞同：0
> 
> 时间：2012-07-16T10:57:14.443
> 
> 标签：magento

如果在完全处理订单之前禁用已订购的产品会发生什么？这个订单还能处理吗？

可以说，产品是由用户订购的。然后从目录中我禁用了该产品（订单仍处于待处理状态且未处理）。该命令无论如何都会生效吗？（我希望不是）。

# python - 如何在实例化期间将“id”从范围函数变量解析为类对象？

> ID：11502874
> 
> 赞同：0
> 
> 时间：2012-07-16T10:57:23.013
> 
> 标签：python, python-3.x, super

早上大部分时间都花在这个上面，不得不承认我被困住了。

我有一个任务，核心问题是创建很多对象，每个对象都有一个可以从函数调用的标识符。- 从概念上讲，这应该类似于 SQL 语句

“从*id > some integer的**所有对象*中选择*id* ;”。

 **下面的主函数包含生成 id 的循环。接下来应该创建对象，其 id 从范围变量“i”中获得。我看过使用[super](http://docs.python.org/py3k/library/functions.html#super)但看不到连接点的线。你对此有什么好的建议吗？

```
class aContainer(self, n):
    def __init__(self, n):
        self.id = n
        #self.contains=[]

class create_object(n):
    # Completely blank 

def main()
    for i in range(10):
        create_object(i) # i is the id-tag of the object.
    # next: print list of object.id's

main() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:26:15.827

**不知道你为什么要这样做，但是......**

您可以调整如下内容（不使用 a `dict`not a `list`）...：

```
from itertools import count
next_id = count(0)

id_to_object = {}

class blah(object):
    pass

for i in xrange(10):
    id_to_object[next(next_id)] = blah()

for i in xrange(25):
    id_to_object[next(next_id)] = blah()

for k, v in id_to_object.iteritems():
    if k > 5:
        print v 
```

或使用列表...，每次创建*新*对象时...

```
your_list.append(blah()) 
```

然后你可以做得到`your_list[5:15]`一组对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-18T15:50:27.680

“Deborah”在另一个论坛中解决了如下问题：

如果 ID 是唯一的，则将从 id 到实际对象的映射存储为字典可以让您快速（基本上 O(1)）查找。您可以将其存储在外部（如上面的代码中）或作为其接口的一部分存储在类中：

```
>>> class Foo:
    instances = {}
    def __init__(self, id):
        self.id = id
        Foo.instances[id] = self # or self.instances[id], if you prefer

>>> for i in range(6): # Notice range expression used here!
    Foo(i)

<__main__.Foo object at 0x980a40c>
<__main__.Foo object at 0x981c16c>
<__main__.Foo object at 0x980ed6c>
<__main__.Foo object at 0x980eeac>
<__main__.Foo object at 0x9819f4c>
<__main__.Foo object at 0x9819b0c>
>>> Foo.instances
{0: <__main__.Foo object at 0x980a40c>, 1: <__main__.Foo object at 0x981c16c>, 2: <__main__.Foo object at 0x980ed6c>, 3: <__main__.Foo object at 0x980eeac>, 4: <__main__.Foo object at 0x9819f4c>, 5: <__main__.Foo object at 0x9819b0c>} 
```

（记住不要直接调用 Foo(id) ，除非你知道 ID 是新的！）

（您也可以将其作为静态方法执行，但我对如何声明这些方法已经过时了......不过会更整洁）

最后，如果您不关心实际的 ID 值是多少，那么您可以使用 id(self)，它可以保证唯一，并且不必首先传入 ID。**

# zend-framework - 使用 Zend_Mail_Transport_Smtp 和一个 MD5 哈希值作为密码

> ID：11502876
> 
> 赞同：4
> 
> 时间：2012-07-16T10:57:25.157
> 
> 标签：zend-framework, zend-mail, webmail, smtp-auth

我想为我的网络应用程序的用户提供使用我们的 smtp 服务器发送电子邮件的可能性。

用户帐户的密码是 md5-hased 并且 smtp-server 正在对接收到的值进行哈希处理以检查正确的用户名密码组合。

现在我正在寻找一种设置 Zend_Mail_Transport_Smtp 的好方法——我显然需要纯文本密码并将其转发到 smtp-server，然后将其转换为 md5-hash。但这意味着我必须将用户密码以明文形式存储在某处，我想避免这种情况。

是否有关于如何使用 zend 框架设置 webmailer 的最佳实践？

我唯一的想法是将未散列的密码保存在会话中（我的应用程序中的用户帐户与邮件服务器帐户相关联），但必须有更好的方法来处理这种情况

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T19:58:18.377

您可以做的是将密码以编码格式存储在数据库中，并在需要时在应用程序中对其进行解码。不幸的是， [MD5](http://en.wikipedia.org/wiki/MD5)只是一个散列函数，您无法解码为纯密码。我知道三种方法可以做到这一点：

1.  替代字母：

    [您可以使用ROT13 之](http://en.wikipedia.org/wiki/Rot13)类的东西来替换纯密码中的字母：

    ```
    // store this in the database
    $pw_rot = str_rot13( "plain_password" );
    // use this in the application
    $pw_plain = str_rot13( "cynva_cnffjbeq" ); 
    ```

    我不建议使用[`str_rot13()`](http://php.net/manual/en/function.str-rot13.php)或类似的东西，因为看到密码的人很容易猜到。

2.  无密钥解码/编码：

    另一种方法是使用函数对密码进行解码/编码，该函数不需要像[Base64](http://en.wikipedia.org/wiki/Base64)这样的密钥：

    ```
    // store this in the database
    $pw_base64 = base64_encode( "plain_password" );
    // use this in the application
    $pw_plain = base64_encode( "cGxhaW5fcGFzc3dvcmQ=" ); 
    ```

    比上面的要好一点，但我只会将它用于测试目的，因为它很容易实现和使用。

3.  使用密钥解码/编码：

    更好的方法是使用密钥和像[Blowfish](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29)这样的对称分组密码：

    ```
    class Password {
      const KEY = 'your_secret_key_for_the_cipher';

      // encode the plain text with key for storing in the database
      public function encode( $plain_text ) {
        // set up the environment
        $td      = mcrypt_module_open( MCRYPT_BLOWFISH, '', MCRYPT_MODE_ECB, '' );
        $key     = substr( self::KEY, 0, mcrypt_enc_get_key_size( $td ) );
        $iv_size = mcrypt_enc_get_iv_size( $td );
        $iv      = mcrypt_create_iv( $iv_size, MCRYPT_RAND );

        if( mcrypt_generic_init( $td, $key, $iv ) != -1 ) {
          $cipher_text = mcrypt_generic( $td, $plain_text );
          // clean up the mcrypt enviroment
          mcrypt_generic_deinit( $td );
          mcrypt_module_close( $td );
        }

        // use hex value            
        return bin2hex( $cipher_text );
      }

      // decode the stored cipher text with key to use in the application
      public function decode( $cipher_text ) {
        // set up the environment
        $td      = mcrypt_module_open( MCRYPT_BLOWFISH, '', MCRYPT_MODE_ECB, '' );
        $key     = substr( self::KEY, 0, mcrypt_enc_get_key_size( $td ) );
        $iv_size = mcrypt_enc_get_iv_size( $td );
        $iv      = mcrypt_create_iv( $iv_size, MCRYPT_RAND );

        if( mcrypt_generic_init( $td, $key, $iv ) != -1 ) {
          $plain_text = mdecrypt_generic( $td, pack( "H*" , $cipher_text ) );
          // clean up the mcrypt environment
          mcrypt_generic_deinit( $td );
          mcrypt_module_close( $td );
        }

        // remove NUL which maybe added by padding the plain_text
        return rtrim( $plain_text, "\0" );
      } 
    ```

    通过这种方式，只有有权访问数据库和源代码的人才能解码密码。不利的一面是，您有一个更复杂的应用程序和一点点性能影响。您也可以使用其他对称分组密码。

最重要的是：**永远不要存储纯密码。**

# javascript - Javascript单元测试依赖项-当依赖对象更改时如何使测试失败

> ID：11502877
> 
> 赞同：0
> 
> 时间：2012-07-16T10:57:28.990
> 
> 标签：javascript, unit-testing, stubbing, sinon

我有一个依赖于模型属性的控制器。我编写了一个测试该控制器并存根模型的测试，当模型属性名称更改时，如何使我的控制器测试失败？

这是一个例子：

模型：

```
function Model(obj){
  this.id = obj.id; 
  this.name = obj.name;
} 
```

控制器：

```
function Controller( model ){
  this.model = model
};
Controller.prototype.showName = function() { 
  return this.model.name; 
} 
```

控制器测试：

```
describe("A controller", function(){

  var controller = new Controller( new Model({id:1, name: "john"}) );

  it ("should show the person name", function(){
    expect(controller.showName).toEqual("john");
  });

}); 
```

只要“name”属性更改为其他内容，例如“name2”，我希望此测试失败。

有人对如何在 javascript 中执行此操作有很好的建议吗？

谢谢， 夏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:25:02.830

由于模型已公开，您可以检查该属性是否存在。

```
expect(controller.name).toBeDefined(); 
```

另一方面，如果模型的属性被重命名并且控制器也不会改变，那么这个测试无论如何都会失败。

# python - 使用 tkinter 的简单动画

> ID：11502879
> 
> 赞同：4
> 
> 时间：2012-07-16T10:57:33.683
> 
> 标签：python, user-interface, animation, tkinter

我有一个简单的代码来使用 tkinter 可视化一些数据。单击按钮将绑定到重绘数据的下一个“帧”的函数。但是，我希望可以选择以一定频率自动重绘。在 GUI 编程方面，我非常熟悉（我不需要为这段代码做很多事情），所以我的大部分 tkinter 知识来自于跟随和修改示例。我想我可以使用 root.after 来实现这一点，但我不太确定我是否理解其他代码的方式。我的程序的基本结构如下：

```
# class for simulation data
# --------------------------------

def Visualisation:

   def __init__(self, args):
       # sets up the object

   def update_canvas(self, Event):
       # draws the next frame

       canvas.delete(ALL)

       # draw some stuff
       canvas.create_........

# gui section
# ---------------------------------------

# initialise the visualisation object
vis = Visualisation(s, canvasWidth, canvasHeight)

# Tkinter initialisation
root = Tk()
canvas = Canvas(root, width = canvasWidth, height = canvasHeight)

# set mouse click to advance the simulation
canvas.grid(column=0, row=0, sticky=(N, W, E, S))
canvas.bind('<Button-1>', vis.update_canvas)

# run the main loop
root.mainloop() 
```

很抱歉提出一个我确信有一个明显而简单的答案的问题。非常感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-16T13:09:28.000

使用 Tkinter 执行动画或周期性任务的基本模式是编写一个绘制单个帧或执行单个任务的函数。然后，使用这样的东西定期调用它：

```
def animate(self):
    self.draw_one_frame()
    self.after(100, self.animate) 
```

一旦您调用此函数一次，它将继续以每秒 10 次的速率绘制帧——每 100 毫秒一次。如果您希望能够在动画开始后停止动画，则可以修改代码以检查标志。例如：

```
def animate(self):
    if not self.should_stop:
        self.draw_one_frame()
        self.after(100, self.animate) 
```

然后，您将拥有一个按钮，单击该按钮时，将设置`self.should_stop`为`False`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-21T04:53:22.717

我只是想添加布莱恩的答案。我没有足够的代表发表评论。

另一个想法是`self.after_cancel()`用来停止动画。

所以...

```
def animate(self):
    self.draw_one_frame()
    self.stop_id = self.after(100, self.animate)

def cancel(self):
    self.after_cancel(self.stop_id) 
```

# ajax - Twitter Bootstrap Typeahead 不处理响应

> ID：11502880
> 
> 赞同：3
> 
> 时间：2012-07-16T10:57:38.443
> 
> 标签：ajax, spring-mvc, twitter-bootstrap, typeahead

我有 Spring MVC 控制器：

```
@Controller
@RequestMapping(value = "/bla")
public class TestController {       
    @RequestMapping(value = "json", method = RequestMethod.POST)
    public @ResponseBody String getJson(@ModelAttribute SearchQueryJson searchQueryJson) {
        System.out.println("hih");
        System.out.println(searchQueryJson.getQuery());     
        return new String("{'asd','asdd'}");
    }
} 
```

和js：

```
<script>
    $("#searchbox").typeahead({
        source: function (typeahead, query) {
            return $.post("bla/json", { query: query }, function (data) {
                return typeahead.process(data);
            });
        }
    });
</script> 
```

在 google chrome 调试器中，我看到响应 {'asd','asdd'}，但没有任何反应（搜索框的下拉菜单不出现）！我正在使用[twitter bootstrap typeahead（未定义的方法 'toLowerCase'）](https://stackoverflow.com/questions/11235644/twitter-bootstrap-typeahead-method-tolowercase-of-undefined)和[https://gist.github.com/2712048](https://gist.github.com/2712048)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:30:52.423

改变`return typeahead.process(data);`

至`return typeahead(data);`

# excel - 将多个范围的值添加到电子邮件正文

> ID：11502882
> 
> 赞同：2
> 
> 时间：2012-07-16T10:57:39.717
> 
> 标签：excel, vba, outlook

我有一个基本的 excel 到电子邮件代码但是，我想知道如何制作它，以便它可以在电子邮件正文中添加几个不同的单元格。这也需要包括一些范围。这些范围应该只显示实际包含值的单元格中的值，而不是空白的。

例如，我想举个例子

*   B12 数据（换行符 x 2）
*   E15:E20 数据 (LineBreak x2)
*   F19:F20 数据

我的代码是：

```
Sub Send_to_Email()
On Error GoTo PROC_EXIT
Dim OL As New Outlook.Application

Dim olMail As Outlook.MailItem
Set olMail = OL.CreateItem(olMailItem)

Dim SrcSheet As Excel.Worksheet
Set SrcSheet = Sheets("Clean (2)")

With olMail
    .To = SrcSheet.Range("A19").Text
    .Subject = SrcSheet.Range("F19").Text
    .Body = SrcSheet.Range("B19").Text
    .Display vbModal
    '.Send
End With

PROC_EXIT:
On Error GoTo 0
Set OL = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T02:57:10.540

我建议考虑使用[HTMLbody](http://msdn.microsoft.com/en-us/library/bb175500%28v=office.12%29.aspx)而不是`body`. 然后，您可以自由添加您`<br/>`想要的格式或任何其他格式。

作为额外的奖励，您在构建正文字符串时无需担心空格。虽然很明显，当您解决问题时，您仍然希望它清晰易读。

至于范围，请检查所有相关单元格并包括以下内容：

```
If Range.value <> "" then
    'Do Stuff 
end if 
```

# objective-c - 在应用程序设置中（应用程序已关闭）

> ID：11502883
> 
> 赞同：0
> 
> 时间：2012-07-16T10:57:43.373
> 
> 标签：objective-c, inappsettingskit, inappsettings

当我关闭设置时，我的应用程序崩溃了。
即使使用标准动画 ( `UIModalTransitionStyleCoverVertical`) 按钮“完成”也无法正常工作。
可能出了什么问题？

**-编辑-**显然我在描述问题时不太准确：XCode 没有收到崩溃通知。应用程序简单地关闭。因此，在会话期间获得的成就将会丢失。

```
- (IBAction)BarButtonPageCurlAction:(id)sender {
IASKAppSettingsViewController *SettingsViewController;
SettingsViewController = [[[IASKAppSettingsViewController alloc] initWithNibName:@"IASKAppSettingsView" bundle:nil] autorelease];
SettingsViewController.delegate = self;
//SettingsViewController.showDoneButton = NO;
//SettingsViewController.showCreditsFooter = NO;
SettingsViewController.modalTransitionStyle = UIModalTransitionStylePartialCurl;
UINavigationController *NavController = [[[UINavigationController alloc] initWithRootViewController:SettingsViewController] autorelease];
//[NavController setNavigationBarHidden:YES];
[self presentModalViewController:NavController animated:YES];} 
```

我的课程文件：

*   [.m](http://pastebin.com/zP6u0NS7)
*   [。H](http://pastebin.com/TdVVpbhp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T12:07:26.900

您没有实现正确的委托方法。查看 Inappsettings 的文档，有一些方法用于关闭设置视图。

# python - 如何从python中的字符串（可能是url）获取整数值

> ID：11502885
> 
> 赞同：0
> 
> 时间：2012-07-16T10:57:53.350
> 
> 标签：python, string, url

假设我有一个如下的网址

```
url = 'https://www.advertise-example.com/ads/2022/presents' 
```

现在我正在尝试`2022`从上面的 url 中获取整数值。我们可以在这里使用列表切片，但是整数值可以增加，所以我使用了正则表达式但无法得到确切的结果，谁能告诉我如何做这个

提前致谢........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T10:59:20.267

```
>>> import re
>>> url = 'https://www.advertise-example.com/ads/2022/presents'
>>> int(re.search(r'\d+', url).group())
2022 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:12:24.357

```
from urlparse import urlsplit
import re

url = 'https://www.advertise-example.com/ads/2022/presents'
spliturl = urlsplit(url)
int(re.search(r'\d+', spliturl.path).group()) 
```

可能看看`re.findall`您是否期望或想要处理更多 > 1 位的 url ......

或者，不使用 re：

```
digits = [int(el) for el in spliturl.path.split('/') if el.isdigit()] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:13:27.500

这是一个不使用正则表达式的解决方案

```
>>> import itertools
>>> url = 'https://www.advertise-example.com/ads/2022/presents'
>>> int(next(''.join(g) for k, g in itertools.groupby(url, str.isdigit) if k))
2022 
```

# magento - 在 Magento 产品页面中显示颜色和尺寸属性

> ID：11502891
> 
> 赞同：0
> 
> 时间：2012-07-16T10:58:39.923
> 
> 标签：magento

我有一个工作代码

```
$cModel = Mage::getModel('catalog/product');
$cModel->load($_product->getId());

echo '<p>Product name :',$cModel->getData('name'),'</p>';
echo '<p>Manufacturer id :',$cModel->getData('manufacturer'),'</p>';

$attributes = Mage::getResourceModel('eav/entity_attribute_collection')
        ->setEntityTypeFilter($_product->getResource()->getTypeId())

        ->addFieldToFilter('attribute_code', 'manufacturer');
$attribute = $attributes->getFirstItem()->setEntity($_product->getResource());

echo '<p> Manufacturer :',$attribute->getSource()->getOptionText($cModel->getData('manufacturer')),'</p>'; 
```

它正在与制造商合作。但不适用于大小和颜色属性。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:01:05.010

在目录 -> 属性 -> 管理属性下，您必须确保提到的属性将其值设置为“用于产品列表”选项的“是”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T12:29:11.160

你试过`<?php echo $_product->getAttributeText("color"); ?>`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T11:30:12.820

如果您对属性使用**下拉菜单，请在****/template/catalog/product/view.phtml**文件中添加以下代码

这将显示您的**第一个属性**

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
<?php echo $this->getChildChildHtml('container1', '', true, true) ?>
<?php endif;?> 
```

这将显示您的**第二个属性**（超过 1 个自定义属性）

```
<?php if ($_product->isSaleable() && $this->hasOptions()):?>
<?php echo $this->getChildChildHtml('container2', '', true, true) ?>
<?php endif;?> 
```

# sqlcachedependency - aspnet_regsql SQLCACHEDEPENDENCY

> ID：11502892
> 
> 赞同：1
> 
> 时间：2012-07-16T10:58:42.657
> 
> 标签：sqlcachedependency

我创建了一个数据库“testschema”和名为“MySchema”的模式。我在数据库中创建了一个表“MySchema.table1”。我正在尝试使用 aspnet_regsql 实用程序创建对表的 sql 缓存依赖关系。MySchema.Table1 但它会引发错误。为 SQL 缓存依赖关系启用表。发生错误。异常的详细信息：无法创建触发器“dbo.MySchema.Table1_AspNet_SqlCacheNotification_Trigger”，因为其架构与目标表或视图的架构不同。在缓存依赖项注册期间失败。请确保数据库名和表名有效。表名必须符合 SQL 中常规标识符的格式。失败的 SQL 命令是：dbo.AspNet_SqlCacheRegisterTableStoredProcedure 我已经尝试过没有模式名称，但它再次失败。PL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:48:40.933

找到了 ！

[http://forums.asp.net/t/1249281.aspx/1](http://forums.asp.net/t/1249281.aspx/1)

如果在对 sp AspNet_SqlCacheRegisterTableStoredProcedure 进行更改以动态选择它工作的架构之后，您的数据库上有更多其他架构（[dbo] 除外），则会出现问题！

谢谢维维克

# regex - perl 正则表达式换行

> ID：11502896
> 
> 赞同：-1
> 
> 时间：2012-07-16T10:59:02.837
> 
> 标签：regex, perl

代码就像

```
 <dt> Some
                     text</dt>
    <dd>some value</dd> 
```

我希望能够**仅删除未以 html 标记结尾的新行**。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T13:21:11.183

这可以像这样在命令行 Perl 中完成

```
perl -pe 's/(?<!>)\n//' my.html 
```

或这个

```
perl -pe 's/([^>])\n/$1/' my.html 
```

# objective-c - iOS UIInterfaceOrientation 不适用于 iOS 5

> ID：11502899
> 
> 赞同：2
> 
> 时间：2012-07-16T10:59:11.033
> 
> 标签：objective-c, xcode, uiinterfaceorientation, ios5

当我`UIInterfaceOrientation`在 iOS 4 的任何设备上使用它时，它的工作完美，但在 iOS 5 中使用它时，它不像 iOS 4

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   return (interfaceOrientation == UIInterfaceOrientationPortrait || 
   interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown);
} 
```

任何的想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-17T10:43:57.140

你发了吗：

```
 [[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications] 
```

在您的应用程序委托中？如果与“结束...”消息不匹配 - 谷歌这些方法以获取更多信息

# .net - 从 MVC 控制器调用 WEBAPI 服务是一种反模式吗？

> ID：11502901
> 
> 赞同：11
> 
> 时间：2012-07-16T10:59:14.293
> 
> 标签：.net, asp.net-mvc, asp.net-web-api

如果决定使用 WebAPI 创建一个服务层以用于各种客户端。构建 Web 客户端的最佳方式是什么？

由于 WebAPI 是网络友好的，因此可以使用 javascript 直接从客户端使用它。但是我会担心这会很快变得混乱，并且 javascript 不是最简单的单元测试技术。

另一种方法是使用 HttpClient 类从 MVC 控制器调用 REST 服务。这是一种有效的方法吗？

我想上述两种方法可以结合使用，但我担心这会变得混乱。您是否同意采用一种方法或另一种方法会更好？

抱歉，我看过很多关于是否使用 WebAPI 或 MVC 的帖子，但没有看到将两者结合起来的帖子。

想法？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-16T12:01:27.337

> 另一种方法是使用 HttpClient 类从 MVC 控制器调用 REST 服务。这是一种有效的方法吗？

是的，一点没错。只是这段代码不应该放在你的控制器中，而应该放在你的 DAL 层中，因为控制器不应该知道数据来自哪里（平面文件、数据库、Web API ......）。

所以有2种方法：

*   您决定使用 HTTP 协议从 MVC 客户端应用程序使用 Web API。在这种情况下，您为存储库（DAL 层）创建一个实现，该实现将使用 HTTP 客户端并直接返回域模型
*   您决定直接使用此 Web API 中包含的服务，而不发送 HTTP 请求。在这种情况下，您在 MVC 客户端应用程序中引用包含 Web API 服务层的程序集，并且该程序集直接成为 MVC 应用程序的服务层。在这种情况下，通过 HTTP 的 Web API 服务于其他客户端：javascript、移动设备、...

您选择哪种方法实际上取决于您的特定场景和要求。除了 MVC 客户端应用程序之外，您还需要支持可互操作的客户端吗？在任何情况下，首先在包含您的域模型和内容的单独程序集中定义一个服务层。然后，您始终可以通过 Web API（或 WCF 服务或其他）公开此服务层，或直接从 .NET 客户端引用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T12:55:45.440

我认为您有一个 MVC 项目，并且您正试图将 api 操作从 MVC 项目中分离到一个单独的 web api 项目中？如果是这种情况，您必须在开始创建单独的服务项目之前权衡收益。

一旦你创建了一个单独的 web api 项目，那么由于跨域障碍，你不能轻易地直接从你的 MVC 项目中的 javascript 使用服务方法（当然有 JSONP 和 CORS，但它们并不那么容易），所以你必须依赖`HttpClient`类在你的控制器中创建不必要的包装方法来与服务通信。

当您的视图需要 api 方法提供的数据时，值得考虑在同一个 MVC 项目中使用 api 东西，但唯一的事情是您必须`ApiController`使用`Controller`.

# php - 使 GIT 自动提交每个文件更改

> ID：11502907
> 
> 赞同：0
> 
> 时间：2012-07-16T10:59:24.543
> 
> 标签：php, git, github, sync, sftp

我知道这已经被问过了，但我想分享我的情况，以关注替代解决方案和提示。我们开发 PHP 网站，并在远程半生产服务器上测试所有内容，以了解我们的 Web 应用程序在现实世界中的工作方式。

通常，我们在我们的计算机上挂载远程 SFTP，并直接在服务器上读/写（然后我们每晚从测试服务器备份到另一台服务器），因此我们不必保存和上传我们更改的每个文件。

现在我们正在考虑切换到 GitHub 来跟踪文件更改。我已经在我的 Mac 上安装并配置了 GitHub，以及一个自动从我们的 GIT 存储库中提取到测试 Web 服务器的 webhook。因此，当我提交并同步到 GitHub 时，我可以刷新我在浏览器中更改的页面以查看它的实际效果。

问题是 Web 脚本通常由许多微更改组成，有时您必须不断点击“保存”并切换到浏览器以检查它是否正常工作......所以每次都必须提交（并指定摘要！）是不可接受的。

我们如何通过工作流解决这个问题？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:04:44.127

只提交好的代码。如果必须，请使用 sftp 进行测试，但只提交好的代码。

失去这样的好处`git bisect`是您提出的其他建议的一个非常严重的副作用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:09:43.253

简单地说：你不应该那样做。

源代码管理系统不适用于测试和传输您正在开发的代码到测试服务器。您应该像以前一样使用 SFTP 或设置 rsync。这些是转移的工具。

您应该使用 GitHub 仅存储有效的、完整的更改。在测试您的“微更改”并获得工作快照后，您应该提交并描述自上次提交以来您修改的所有内容。

其他任何事情都只是破解您尝试使用的工具。做你建议的事情只会意味着失去（几乎）git给你的所有好处，而且比使用普通的sftp/rsync方便得多。

# c# - 如何用我的 xna 游戏打包一个 txt 文件以进行分发

> ID：11502909
> 
> 赞同：1
> 
> 时间：2012-07-16T10:59:30.293
> 
> 标签：c#, xna

所以我有一个 XNA，它使用存储在 txt 中的数据。当我想访问它时，我会告诉程序文件的确切存储位置，在这种情况下它是 "C:\Users\OliverBarnum\Desktop\" + 'Leaderboard.txt'"

我正在使用 Visual Studio 打包我的游戏以供发布。当然，新用户不会被命名为 Oliver Barnum，他可能不知道将 txt 放在他们的桌面上。

如何告诉我的程序 txt 在计算机上的安装位置，或者如何将 txt 与 xna 包关联？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T21:17:03.753

我会做这样的事情：

```
private const string DIR = @"Content/Levels/";

private void WriteFile()
{        
     string filename = "dummy.txt";
     string targetDirectory = DIR + filename;

     if (!Directory.Exists(LEVELS_DIR))
        Directory.CreateDirectory(LEVELS_DIR);

     StringBuilder data = new StringBuilder();
     data.Append("foo");

     using (StreamWriter writer = new StreamWriter(filename, false))
     {
         writer.WriteLine(data);
     }
} 
```

# database - Erlang 中的文本压缩

> ID：11502910
> 
> 赞同：4
> 
> 时间：2012-07-16T10:59:34.450
> 
> 标签：database, memory-management, erlang, cryptography, compression

Erlang 有文本压缩库吗？当处理非常长的字符串时，压缩字符数据可能是有利的。有没有人压缩文本或想办法在 Erlang 中做到这一点？

我正在考虑使用该`zip`模块，但不是使用文件，而是像这样在内存中工作：

```
compress(LargeText)->
    Binary = list_to_binary(LargeText),
    {ok,{_,Zipped}} = zip:zip("ZipName",[{"Name",Binary}],[memory]),
    Zipped. 
```

然后，`unzip`当我需要它时，我会将文本放回内存中。像这样：

```
{ok,[{"Name",Binary}]} = zip:unzip(Zipped,[memory]). 
```

我的 Erlang 应用程序应该是中间层的一部分，在该中间层中，大文本可能必须传入和传出存储系统。存储系统旨在存储大文本。为了优化存储，需要在发送之前对其进行压缩。假设文本值类似于`CLOB`Oracle 数据库中的数据类型。我在想，如果我把拉链和拉链结合起来`erlang:garbage_collect/0`，我可以把它拉下来。

或者，如果在 Erlang 中不可能，也许可以使用`system call`via `os:cmd({Some UNIX script})`，然后我会在 Erlang 中获取输出？如果有更好的方法，请展示它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-16T15:21:17.783

Erlang有一个[zlib 模块](http://www.erlang.org/doc/man/zlib.html)，它支持内存压缩和解压缩。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T20:16:48.787

您可以考虑使用比 zip 快得多的[snappy压缩，尤其是对于解压缩。](https://github.com/fdmanana/snappy-erlang-nif)

**编辑**：现在我经常使用[LZ4](https://code.google.com/p/lz4/)，我对此非常满意。它有一个漂亮易读的代码，简单的格式，维护良好，甚至比 Snappy 更快。

# php - 为什么在打开的图表中读取操作不提交

> ID：11502914
> 
> 赞同：-2
> 
> 时间：2012-07-16T10:59:51.917
> 
> 标签：php, javascript, facebook-graph-api, facebook-opengraph

我创建了一个应用程序，一个对象（文章）一个动作（读取），我想测试发布，但我总是提交警报“发生错误”。为什么？

头码

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/fb/article#">
  <meta property="fb:app_id" content="xxxxxxxxxx" />
  <meta property="og:type" content="article" />
  <meta property="og:url" content="object_url" />
  <meta property="og:title" content="Tachnomo" />
  <meta property="og:description" content="Drive car" />
  <meta property="og:image" content="https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png" /> 
```

和 javascript

```
<script type="text/javascript">
  function readnews()
  {
      FB.api(
        '/me/news.reads?article=object_url',
        'post',
        function(response) {
           if (!response || response.error) {
              alert('Error occured');
           } else {
              alert('Drive was successfully published with ID : ' + response.id);
           }
        });
  }
  </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T05:31:23.717

“object_url”应该是一个编码的 URL，而不是“object_url”这个词。

# jsf - 在 h:selectOneRadio 的两个单选按钮之间添加空格

> ID：11502919
> 
> 赞同：6
> 
> 时间：2012-07-16T11:00:30.890
> 
> 标签：jsf, jsf-2, whitespace, selectoneradio

在 JSF 2.0 中我有以下

```
<h:selectOneRadio value="#{StageGate.sketchesSG002006Decision}" onclick="validateMyRadioButton()" id="radio26">
    <f:selectItem itemValue="Accepted" itemLabel="Accepted" id="accepted"/>
    <f:selectItem itemValue="Rejected" itemLabel="Rejected" id="rejected"/>
</h:selectOneRadio> 
```

我得到输出

```
O Accepted  O Rejected
          ^^ 
```

我想要的是在两个单选按钮之间添加空格，以便输出

```
O Accepted           O Rejected
          ^^^^^^^^^^^ 
```

我尝试`&nbsp;`在两个单选按钮之间添加，但它不起作用。我在下一行得到单选按钮。

```
<h:selectOneRadio value="#{StageGate.sketchesSG002006Decision}" onclick="validateMyRadioButton()" id="radio26">
    <f:selectItem itemValue="Accepted" itemLabel="Accepted" id="accepted"/>
    &nbsp;&nbsp;&nbsp;
    <f:selectItem itemValue="Rejected" itemLabel="Rejected" id="rejected"/>
</h:selectOneRadio> 
```

知道如何做到这一点吗？

`&nbsp;`没有is生成的 HTML

```
<table id="radio26">
<tr>
<td>
<input type="radio" checked="checked" name="radio26" id="radio26:0" value="Accepted" onclick="validateMyRadioButton()" /><label for="radio26:0"> Accepted</label></td>
<td>
<input type="radio" name="radio26" id="radio26:1" value="Rejected" onclick="validateMyRadioButton()" /><label for="radio26:1"> Rejected</label></td>
</tr>
</table> 
```

当我在语句`&nbsp`之前添加一个空格时。`<table id="radio26">`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-16T11:03:54.353

免责声明，我对JSF一无所知，所以以下是基于我对ASP.NET的经验并在其中添加空格。如果这非常不正确，请告诉我，我会立即删除...

尝试将空格添加到项目标签，更新...

```
<f:selectItem itemValue="Accepted" itemLabel="Accepted" id="accepted"/> 
```

到...

```
<f:selectItem itemValue="Accepted" itemLabel="Accepted &nbsp; &nbsp;" id="accepted"/> 
```

它**可能**需要自己逃到...

```
<f:selectItem itemValue="Accepted" itemLabel="Accepted &amp;nbsp; &amp;nbsp;" id="accepted"/> 
```

**更新**

正如 OP 在评论中所说，这将扩展链接。

看起来你应该能够为父对象设置一个 CSS 类，比如......

```
<h:selectOneRadio styleClass="myRadioCtrl" ... > 
```

然后在你的风格/ CSS中有类似...

```
.myRadioCtrl span { padding-right: 10px; } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-07T14:59:41.683

只是想 id 分享我的答案......在用萤火虫检查页面后，我得到了以下结果

JSF：

```
 <h:panelGroup id="search-options" layout="block" styleClass="radioButtonSpace">
        <h:selectOneRadio value="#{searchEngineController.reportSearch}">
        <f:selectItem itemValue="#{false}" itemLabel="CEPIS Search" />
        <f:selectItem itemValue="#{true}" itemLabel="Report Search" />
        </h:selectOneRadio>
    </h:panelGroup> 
```

CSS：

```
.radioButtonSpace table tbody td {padding-right:50px;} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-12-23T20:23:40.403

我在这方面遇到了困难。当我在 h:selectOneRadio 上应用样式时，应用样式对我不起作用，但是在环绕它的面板组中应用时它起作用了。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-01-06T23:40:49.663

这些答案中没有一个对我有用，但是像这样完美地工作：

.ui-selectoneradio 标签{ padding-right: 10px !important; }

这是在使用 primefaces 的情况下

# java - 原始类型的自定义转换器

> ID：11502924
> 
> 赞同：1
> 
> 时间：2012-07-16T11:01:02.770
> 
> 标签：java, wicket, converter

在我的检票口应用程序中，我想对一些具有双精度（原始类型“双”，而不是“双”类型）值的文本字段使用我自己的转换器。

我创建了mij转换器并注册了它，但只调用了convertToString方法（渲染时），而不是convertToObject（提交时）。这显然是因为我的文本字段映射了一个原始类型 double 的属性（因为如果我将其更改为 Double，则调用方法 convertToObject）。

这种行为正常吗？有没有办法让我的转换器使用原始类型？或者我只是错过了对转换器工作原理的理解？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T14:26:55.427

我认为问题在于您注册转换器的方式，以便注册 TYPE double 的转换

```
ConverterLocator converter= new ConverterLocator();
converter.set(Double.TYPE, DoubleConverter.INSTANCE); 
```

有关更多示例，请参见 ConverterLocator.class 的源代码 :)

# python - 在 Windows 上为 pygtk 在 WebKit 中嵌入 flash

> ID：11502928
> 
> 赞同：2
> 
> 时间：2012-07-16T11:01:11.753
> 
> 标签：python, windows

我正在寻找一种使用 python 播放视频流的方法。我找不到任何好的东西，所以我最终将 webkit 嵌入到 gtk 窗口中，并在那里流式传输视频。它运作良好，但对我来说感觉相当hacky。

所以，我的问题：

有没有其他方法可以使用 python 和 gtk 流式传输视频（youtube、justin tv）？

如果没有，有没有办法让我的代码在 Windows 上运行？目前它只在 Linux 上运行，我怀疑是因为 Windows 上缺乏对 GTK 的 Flash 支持。是否正在努力解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T09:29:04.400

好吧，我想出了一个答案。

我将使用铬嵌入式框架，而不是使用似乎在 Windows 上不支持 Flash 的 webkit。它应该让我做我需要做的事情，即在桌面应用程序中嵌入 Flash，同时还允许选择基于 html 的界面。

它是开源的，并且支持 Windows（和 linux，我相信）上的闪存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T05:19:06.673

看看**`GStreamer`**（python包）

[http://gstreamer.freedesktop.org/](http://gstreamer.freedesktop.org/)

它是一个开源多媒体框架。在下面的链接
中也有关于 RTP 流的文章`GStreamer`

[http://gstreamer.freedesktop.org/documentation/rtp.html](http://gstreamer.freedesktop.org/documentation/rtp.html)
[http://eetimes.com/design/signal-processing-dsp/4004620/DSP-video-processing-via-open-sourceAPIs](http://eetimes.com/design/signal-processing-dsp/4004620/DSP-video-processing-via-open-sourceAPIs)

还有一个使用`GStreamer`（使用 LGPL 许可证）构建的流媒体服务器。
[http://www.flumotion.net/](http://www.flumotion.net/)

**PS：**如果您热衷于使用 Adob​​e AIR 构建一个跨平台的 Flash 播放器，下面提到的链接将助您一臂之力。

[http://www.artima.com/weblogs/viewpost.jsp?thread=208528](http://www.artima.com/weblogs/viewpost.jsp?thread=208528)

我自己还没有构建这个应用程序，但是之前已经研究过它来构建一个。希望它会有用。

# python - Browser() 初始化

> ID：11502933
> 
> 赞同：1
> 
> 时间：2012-07-16T11:01:25.587
> 
> 标签：python, spynner

所以我按照以下步骤安装了这个模块：

```
git clone https://github.com/makinacorpus/spynner.git
cd spynner
python setup.py install 
```

我得到了这种错误，我没有任何线索可能是错误的。

> > > 进口斯皮纳
> > > 
> > > browser1 = spynner.Browser()

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/spynner-1.11dev-py2.7.egg/spynner/browser.py", line 136, in __init__
    self.jquery = open(os.path.join(directory, self._jquery)).read()
IOError: [Errno 2] No such file or directory: '/usr/local/lib/python2.7/dist-packages/spynner-1.11dev-py2.7.egg/spynner/javascript/jquery-1.5.2.js' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:14:55.440

是的，在那些缺少 3 个 jquery 文件的文件夹中，我手动添加了它们。现在它起作用了。

# xml - XSLT：按属性对节点进行排序并对子节点进行分组

> ID：11502934
> 
> 赞同：0
> 
> 时间：2012-07-16T11:01:31.867
> 
> 标签：xml, xslt, sorting, grouping

我必须通过属性对我的 xml 中的某个节点和子节点进行排序和分组

给定的xml：

```
<Rechnung>
<somenodes />
<RechnungArtikelLieferinfos>
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind vergriffen und leider nicht mehr nachlieferbar:" InfoTypKurztext="NICHT_NACHLIEFERBAR" InfoTyp="2">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="12345" Bestellmenge="1.00" Artikelbezeichnung="Angebotsblatt someone de" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind im Rückstand:" InfoTypKurztext="RÜCKSTAND" InfoTyp="3">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="12345" Bestellmenge="2.00" Artikelbezeichnung="Angebotsblatt someoneother de" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>          
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind vergriffen und leider nicht mehr nachlieferbar:" InfoTypKurztext="NICHT_NACHLIEFERBAR" InfoTyp="2">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="54321" Bestellmenge="2.00" Artikelbezeichnung="Angebotsblatt something de" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>  
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind im Rückstand:" InfoTypKurztext="NICHT_AUF_LAGER" InfoTyp="0">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="5555" Bestellmenge="1.00" Artikelbezeichnung="some article" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>    
</RechnungArtikelLieferinfos>
<somemorenodes />
</Rechnung> 
```

RechnungArtikelLieferinfo 将按其属性@Infotyp 进行排序。在同一个 RechnungArtikelLieferinfo@Infotyp 上，Artikelposition-Nodes 应该被分组（我希望我在这里有意义，英语不是我的第一语言）

预期结果：

```
<Rechnung>
<somenodes />
<RechnungArtikelLieferinfos>
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind im Rückstand:" InfoTypKurztext="NICHT_AUF_LAGER" InfoTyp="0">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="5555" Bestellmenge="1.00" Artikelbezeichnung="some article" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>  
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind vergriffen und leider nicht mehr nachlieferbar:" InfoTypKurztext="NICHT_NACHLIEFERBAR" InfoTyp="2">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="12345" Bestellmenge="1.00" Artikelbezeichnung="Angebotsblatt someone de" Katalogkennzeichen="99"/>
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="something" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="54321" Bestellmenge="2.00" Artikelbezeichnung="Angebotsblatt something de" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>
    <RechnungArtikelLieferinfo InfoTypLangtext="Folgende Artikel sind im Rückstand:" InfoTypKurztext="RÜCKSTAND" InfoTyp="3">
        <Artikelposition Absagekennzeichen="Allein im Rückstand" AbsagekennzeichenId="38" Artikeltyp="Beilage" ArtikeltypId="9" Zusatztextkennzeichen="" Zusatztext="" Bestellnummer="44444" Bestellmenge="2.00" Artikelbezeichnung="Angebotsblatt someoneother de" Katalogkennzeichen="99"/>
    </RechnungArtikelLieferinfo>  
</RechnungArtikelLieferinfos>
<somemorenodes />
</Rechnung> 
```

我是 XSL(T) 的新手，并且阅读了很多关于此的文档。我想最好的方法是使用 XSLT 2.0 及其分组选项（for-each-group），但在阅读完所有内容后我有些迷茫并且比以前更加困惑。特别是因为所有教程都假设您必须重建结构，而我只需移动节点和子节点而不更改它们。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:22:21.740

只需使用模板而不是 for-each 循环（通常最好在 XSLT 中避免），这可以很容易地完成。

[此 XML Playground](http://www.xmlplayground.com/XhAqst)上的可运​​行演示（请参阅输出源）。

```
<!-- kick things off -->
<xsl:template match="Rechnung/RechnungArtikelLieferinfos">
    <xsl:copy>
        <xsl:apply-templates select='RechnungArtikelLieferinfo[not(preceding-sibling::RechnungArtikelLieferinfo/@InfoTyp = @InfoTyp)]'>
            <xsl:sort select='@InfoTyp' data-type='number' />
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template>

<!-- RechnungArtikelLieferinfo nodes (unique only) -->
<xsl:template match='RechnungArtikelLieferinfo'>

    <!-- copy node, and... -->
    <xsl:copy>

        <!-- ...its attributes/text -->
        <xsl:copy-of select='@*|text()' />

        <!-- ...any Artikelposition nodes of same parent @InfoTyp -->
        <xsl:copy-of select='../RechnungArtikelLieferinfo[@InfoTyp = current()/@InfoTyp]/Artikelposition' />

    </xsl:copy>

</xsl:template> 
```

# java - 创建 Magento 站点的原生 Android 应用程序

> ID：11502936
> 
> 赞同：4
> 
> 时间：2012-07-16T11:01:38.617
> 
> 标签：java, android, magento, android-intent

我有以下问题，我在[Google](http://google.com)和[SO](http://stackoverflow.com)上进行了很多研究，但一无所获：：

1.  我必须创建一个基于**Magento Site的****Native Android Application**，并且我必须使用*Magento Site*的相同**数据库**。现在，我发现我们无法访问 Magento 项目的 PHP 文件，因为访问被拒绝。那么如何从 Android 客户端调用 Magento 登录功能呢？

******   我知道我们必须通过在*Magento中使用***XML-Connect**文件来调用该函数。请任何人都可以给我一个示例**如何调用该文件**以及如何调用？

    ****   **最后解析**。哪个解析器会更方便？（DOM、SAX、简单的 XML 序列化解析器？）

    *   如何管理与 Magento 商店的会话以便用户可以添加到购物车项目并可以进行在线交易。******** 

 ******任何参与过 Magento Site 应用程序开发的人都会提供一些进一步发展的方向。我完全迷失了，从在线研究中一无所获。

任何帮助都将受到高度赞赏。和问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:32:56.897

我没有使用过 Magento 网站。但我曾与类似的网站合作以连接到移动应用程序。

简短回答：XML-Connect 是最大程度减少工作量的最佳方式。而且它的 API 比使用 php 文件连接到数据库更容易使用。对于移动应用程序，始终建议使用简单的 xml 格式，但是，在您的情况下，您必须坚持使用 xml-connect 的协议。

有关更多信息，请参阅此链接[http://incho.net/ecommerce/magento/develop-your-own-magento-mobile-application/](http://inchoo.net/ecommerce/magento/develop-your-own-magento-mobile-application/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-15T10:07:00.160

如果有人在寻找 magento 网站的 android 应用程序，您可以使用它。

1.  Magento 提供了两个 API 来在 Android 中开发您的应用程序

2.  SOAP API - [http://www.magentocommerce.com/api/soap/introduction.html](http://www.magentocommerce.com/api/soap/introduction.html)

3.  REST API - [http://www.magentocommerce.com/api/rest/introduction.html](http://www.magentocommerce.com/api/rest/introduction.html)

4.  您必须在您的 Magento 商店中创建一个具有角色的新用户。您可以通过登录到您的管理员来执行此操作，该选项位于系统->WebServices->User&Roles 下。

5.  您必须创建角色和用户。然后将角色分配给用户。

6.  要使用 SOAP API，请使用本教程[http://inhoo.net/dev-talk/android-development/magento-v2-api-soap-android/](http://inchoo.net/dev-talk/android-development/magento-v2-api-soap-android/)
7.  对于 REST api 使用这个[- Android - Magento REST Api 无法正确响应](https://stackoverflow.com/questions/25079685/android-magento-rest-api-cannot-respond-properly/25094176#25094176)
8.  在 REST API 中，有 Oauth 这个例子没有 Oauth。使用 oauth 你可以试试这个[链接](http://gmartinezgil.wordpress.com/2013/08/05/using-the-magento-rest-api-in-java-with-scribe/)。

在说明 Android 端之前，请确保 magento 配置正确。首先在浏览器中测试 url，然后在应用程序中使用它。******

# backbone.js - 基于某些标准对 Backbone 集合视图进行分段

> ID：11502939
> 
> 赞同：0
> 
> 时间：2012-07-16T11:01:43.830
> 
> 标签：backbone.js, marionette

我对[BackboneJS](http://backbonejs.org)和[Marionette](https://github.com/derickbailey/backbone.marionette)有点陌生，我对如何使用[CollectionView](https://github.com/derickbailey/backbone.marionette/blob/master/docs/marionette.collectionview.md)实现一些棘手的行为有点困惑。假设我有一个约会列表，每个约会都有一个约会日期/时间（存储为 unix 时间戳，但这并不重要）。

当我显示这些时，我想按如下方式显示它们：

### 今天

*   会议 A（上午 10:00）
*   会议 B（上午 11:00）
*   会议 C（下午 1:00）
*   ... 还有 4 个

### 未来 7 天

*   会议 D（星期一下午 3 点）
*   会议 E（星期二下午 2 点）
*   ... 还有 7 个

我正在考虑的方法是在接下来的 7 天（包括今天）从服务器中提取一个集合，然后对集合进行 2 次查看（今天一次，一周一次）。这就是我正在努力解决的问题：

*   AFAIK，Marionette.CollectionView 呈现集合中的*所有*元素。是否有一种简单的方法可以覆盖此行为以仅渲染 3 或 4 个项目？
*   我该如何处理*... 和更多*行？它不是真正的模型，但它的数据是从底层集合中计算出来的。

如果它有所作为，我将使用@SlexAxton 的[requirejs-handlebars](https://github.com/SlexAxton/require-handlebars-plugin)项目进行模板化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T11:41:01.230

您可以使用 a`CompositeView`而不是 a `CollectionView`。因此，您自己定义`collection`属性以使用您想要的子集，然后您可以显示“X more...”链接。

它可能是这样的：

```
EventView = Backbone.Marionette.ItemView.extend
  template: 'event'

EventsView = Backbone.Marionette.CompositeView.extend
  itemView: EventView
  template: 'events'

  initialize: (attributes)->
    @extractSubset(attributes.collection)

  extractSubset: (collection)->
    @collection  = new EventsCollection(collection.filterByWhatYouWant())
    @othersCount = collection.length - @collection.length

  appendHtml: (collectionView, itemView)->
    collectionView.$('.events').append(itemView.el)

  serializeData: ->
    othersCount:      @othersCount
    andAnyOtherThing: 'you need in the template' 
```

# c# - 尝试在 DataView 中对数据进行排序，但没有任何反应

> ID：11502946
> 
> 赞同：0
> 
> 时间：2012-07-16T11:02:20.790
> 
> 标签：c#, asp.net-mvc-3, razor, dataset

我有一个数据集，它保存着我从数据库表中提取的数据。控制器和模型的相关摘录如下所示

控制器：

```
DataSet ds = new DataSet();
adapter.Fill(ds,currentIndex,(int)pageSize,"LD_USER_ROLE");                            
conn.Close();                  
return View(ds); 
```

看法：

```
@using System.Data
@model System.Data.DataSet

<table>
@foreach (DataRow row in Model.Tables[0].Rows)
{
    <tr>            

        @foreach (DataColumn column in Model.Tables[0].Columns)
        {                
                    <td>@row[column]</td>                 
        }
</tr>        
}
</table> 
```

我想更改代码，以便视图中生成的表将按 USERNAME 列排序。为此，我将数据放在数据视图中并使用了排序方法。然后我将数据视图而不是数据集传递到视图中。但是，当我这样做时，我最终会得到与以前完全相同的未排序表。我究竟做错了什么？

控制器：

```
DataSet ds = new DataSet();
adapter.Fill(ds,currentIndex,(int)pageSize,"LD_USER_ROLE");
DataView dv = ds.Tables[0].DefaultView;
dv.Sort = "USERNAME ASC";                            
conn.Close();                  
return View(dv); 
```

看法：

```
@using System.Data
@model System.Data.DataView

<table>
@foreach (DataRow row in Model.Table.Rows)
{
    <tr>            

        @foreach (DataColumn column in Model.Table.Columns)
        {                
                    <td>@row[column]</td>                 
        }
</tr>        
}
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:11:53.553

在填充数据集之前更好地对数据进行排序

# iphone - 在用户尝试安装/卸载应用程序时使用维护应用程序内部变量的 Inapp 购买

> ID：11502947
> 
> 赞同：0
> 
> 时间：2012-07-16T11:02:29.360
> 
> 标签：iphone, in-app-purchase

我开发了一个应用程序，用户可以免费获得 4 次试用。当用户使用所有 4 个试用版并尝试使用更多试用版应用程序时，要求用户进行应用内购买以花费 0.99 美元再进行 4 次试用版。

我在应用程序购买模型中使用了 Consumable。

但问题是当用户第一次安装应用程序时，用户可以免费试用 4 次。如果用户使用了 2 次试用，则用户还有 2 次试用。并且用户从应用商店卸载了应用程序并再次安装了应用程序。当用户安装新应用程序时，用户有 4 次试用而不是 2 次试用，因为一旦用户使用相同的 Apple ID 购买产品一次，苹果允许用户下载应用程序 10 次。

那么有什么方法可以保持应用内购买状态，我会阻止用户访问试用版超过 4 次？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:14:19.403

## 是的，您可以选择首先为任何设备执行此操作，每次用户打开应用程序时您必须使用“UDID”，您必须获取 UDID 并在服务器上检查此 UDID 是否在服务器上存在 4 次您将不会加载应用程序，因此 4 次试用时间已完成。

同样对于“inapppurchase”，如果您不支持注册模块，您还必须在 UDID 之间建立关系，并在服务器端保存此 UDID 的每次购买，因此每次用户安装或卸载应用程序时，都可以再次检索相同的数据设备..希望我的回答对您有所帮助。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:07:44.087

不，没有确定的方法可以做到这一点。

您可以将试用状态保存在钥匙串中，但如果用户在那里清除 iPhone，则信息将被擦除。

# unity3d - Unity3D 跨平台增强现实插件

> ID：11502949
> 
> 赞同：1
> 
> 时间：2012-07-16T11:02:33.983
> 
> 标签：unity3d, augmented-reality

是否有适用于 Unity3d 的 AR 插件，可以在 Android、Iphone、Mac 和 Windows 等设备上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T11:08:24.913

我不确定，但虽然去年没有任何类似的插件存在，但有些插件在移动设备上工作，有些只在桌面上工作。

我认为移动设备最好的是 Vuforia 插件。官方 Vuforia 不支持桌面，但我想通过一些技巧可以开始使用它（试试看：[如何在 PC 应用程序上使用 vuforia](https://stackoverflow.com/questions/14838755/how-to-use-vuforia-on-pc-application)）。

其他解决方案是在统一内部使用 OpenCV 绑定。

# c# - 如何在我的控件中隐藏属性默认值？

> ID：11502951
> 
> 赞同：0
> 
> 时间：2012-07-16T11:02:34.257
> 
> 标签：c#, wpf

我有一个这样的属性（我不希望它像 int 一样可以为空？）

```
public int id{get;set;} 
```

我有一个绑定到 id 属性的 TextBox

```
<TextBox  Text="{Binding id}"/> 
```

当我的窗口加载我的 TextBox 的值为 0 时，我如何从我的 TextBox 隐藏 id 默认值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:03:59.250

将可见性属性设置为折叠或隐藏

或者如果你的意思是你只想在 id = 0 时隐藏它，那么你应该使用触发器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:12:43.523

您可以使用这样的[绑定转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.converter)：

```
[ValueConversion(typeof(int), typeof(string))]
public class IntegerConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int intValue = (int)value;
        return intValue != 0 ? intValue.ToString() : string.Empty;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int intValue = 0;
        int.TryParse((string)value, out intValue);
        return intValue;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:16:46.000

您可以在此处使用字符串作为您的 ID 并编写您自己的验证，而不是使用 int。或者你可以使用int？而不是int。

```
public int? id{get;set;} 
```

**编辑** 如果您不希望将 id 字段更改为可为空，而不仅仅是绑定到字符串或使用转换器，但无论哪种方式，您都需要通过实现[IDataErrorInfo](http://www.arrangeactassert.com/using-idataerrorinfo-for-validation-in-mvvm-with-silverlight-and-wpf/)来实现自己的验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T13:56:49.667

您可以在同一网格内使用另一个带有空字符串的 TextBox，并在第一个 TextBox 的默认值为 0 时使其可见。

```
<Grid>
    <TextBox  Text="{Binding id}" x:Name="txtbox1"/>
    <TextBox Text="" Visibility="{Binding Text,ElementName=txtbox1,Converter={StaticResource StringToVisibility}}"
</Grid> 
```

在上面基于我们使用的转换器的代码中，它将在模板中工作。您必须在转换器中写入，当文本带有“0”时，只需使第二个 TextBox 可见。

```
public class StringToVisibility : IValueConverter
    {
        public object Convert(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            string str = value.ToString();
            if (str.Equals("0"))
            {
                return Visibility.Visible;
            }
            return Visibility.Collapsed;
        }

        public object ConvertBack(object value, System.Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new System.NotImplementedException();
        }
    } 
```

# android - Android Kill 进程重启应用

> ID：11502953
> 
> 赞同：4
> 
> 时间：2012-07-16T11:02:43.867
> 
> 标签：android

我在将原生游戏与 Android 中的 Java 应用程序集成时遇到了一个奇怪的问题。

我必须为游戏添加一个原生 .so 文件，并用标准活动包装它以显示启动屏幕、菜单和其他一些东西。

我注意到在本机代码中似乎有一个终止进程调用。我在 logcat 中看到了这一点。

> 致命信号 11 (SIGSEGV) 在 0x00000000 (code=1)

紧随其后的是

> DEBUG/Zygote(119)：进程 28720 被信号 (11) 终止

当我在本机游戏中点击退出选项时会发生这种情况。发生这种情况时，应用程序将重新启动，即在清单中设置为启动器的 Activity 将在新进程中创建。我在 logcat 中看到 Activity 管理器注意到该进程已经终止，然后执行以下操作：

> INFO/ActivityManager(192)：为活动 my.package.name/my.launcher.Activity 启动 proc my.package.name：pid=28820 uid=10061 gids={3003, 1015}

不幸的是，我无法获得本机源代码，也无法对其进行更改。

到目前为止，我想出的最佳解决方案是在 onCreate 中进行某种检查，如果我认为应用程序已重新启动，则调用完成。我真的不喜欢这样做的想法，这就是我现在在这里发帖的原因。

有人对处理此问题的“好”方法有任何建议吗？任何撕开我提出的解决方案也是受欢迎的。

我想这不是一个标准问题，所以框架在这里可能没有太多帮助。尽管我花了很多时间阅读文档并在 Android 上进行开发，但我距离成为一名 Android 专家还很遥远，所以任何关于这方面的建议都会有很大帮助。

编辑：

请注意，此行为可通过创建 2 个活动来重现。第一个应该启动第二个。第二个Activity应该有办法杀死应用程序进程比如一个按钮调用

```
android.os.Process.killProcess(pid); 
```

因此，如果 Activity A 是清单中的启动器 Activity。A 启动 B。B 终止进程。A 由 Android 操作系统在不同的进程中自动启动。

我这样做是为了测试我正在做的任何事情是否导致重新启动。测试与描述的完全一样，没有对清单进行编辑，也没有额外的代码。重启总会发生。只是希望我能找到一种方法来阻止它发生。

# c++ - 在我的 C++ 应用程序中定义 IHaveVirtualDestructor 基类是一个好习惯吗？

> ID：11502955
> 
> 赞同：3
> 
> 时间：2012-07-16T11:02:47.393
> 
> 标签：c++

我想定义一个如下所示的类：

```
class IHaveVirtualDestructor
{
public:
    virtual ~IHaveVirtualDestructor();
}; 
```

我希望我所有的接口和抽象类都继承这个类。这是一个好习惯吗？还是每个接口/抽象类都应该定义自己的虚拟析构函数？有什么缺点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:05:04.860

> 我希望我所有的接口和抽象类都继承这个类。这是一个好习惯吗？

这听起来不错。好处更像是[`noncopyable`](https://stackoverflow.com/questions/7823990/what-are-the-advantages-of-boostnoncopyable)类。

任何从它们派生的类看起来就像是通过*快速*浏览来记录的，否则必须*查看析构函数的声明*以确保析构函数是否`virtual`存在。

制作*默认*构造函数`protected`将是一个好主意：

```
class IHaveVirtualDestructor
{
  protected:
     virtual ~IHaveVirtualDestructor() {} //make it protected as well
     IHaveVirtualDestructor() {}
}; 
```

可能需要一个更好的名称：

*   抽象库
*   PolymorphicObject （取自@James Kanze 的回答）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:30:15.323

这取决于您是否认为忘记向类添加虚拟析构函数或添加 IHaveVirtualDestructor 作为基类更难。

如果我害怕这样的错误，我会倾向于使用静态代码分析器。

想想课堂上的读者。必须查找 IHaveVirtualDestructor。看到一个虚拟的、内联的和空的析构函数更加地道。

亲切的问候托斯滕

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-16T11:16:52.197

我不确定这是否值得，但如果我要这样做，我会给这个类起一个表达其目的的名称，而不是它的实现。像`Interface`或之类的东西`PolymorphicObject`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-16T11:11:08.993

如果基类析构函数定义为虚拟，则所有子类都将具有隐式虚拟析构函数。如果它的目的是强制子类定义虚拟析构函数，如果将析构函数定义为纯虚拟会更好，

# android - 按钮移出视图 - android

> ID：11502959
> 
> 赞同：0
> 
> 时间：2012-07-16T11:02:56.717
> 
> 标签：android, android-layout, button, dynamic, android-linearlayout

我有一个垂直`LinearLayout`，3 个`Buttons`垂直对齐，一个在另一个下方。在每个按钮之间，我设置了一个初始`LinearLayout`可见性。`GONE`单击第一个按钮时，`LinearLayout`它的下方将更改为，`VISIBLE`并且我在该布局中定义的列表视图出现在视图中，而其余 2 个`Buttons`仍附加到`LinearLayout`.

问题是，如果`LinearLayout`t 中的列表视图（我使用 java 代码添加）太大，那么`Buttons`第一个下面的 2 就会消失。剩下的是第一个按钮下方的布局。

我希望 2`Buttons`绑定到视图。任何帮助将不胜感激。谢谢。

这是我的布局：

```
 LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="350dp"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <Button
            android:id="@+id/buttonContact"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Contacts" 
            android:background="@drawable/button_style" 
            android:textColor="#E6E6E6"/>

        <LinearLayout
            android:id="@+id/layoutContact"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content"                
            android:orientation="vertical"
            android:visibility="gone">
        </LinearLayout>

        <Button
            android:id="@+id/buttonLog"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Call Logs" 
            android:background="@drawable/button_style" />

        <LinearLayout
            android:id="@+id/layoutLog"
            android:layout_width="match_parent"                
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="gone" >

        </LinearLayout>

        <Button
            android:id="@+id/buttonVm"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Voicemail" 
            android:background="@drawable/button_style"/>

        <LinearLayout
            android:id="@+id/layoutVm"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:visibility="gone">
        </LinearLayout>

    </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:11:28.533

如果我正确理解您的问题，您希望最后一个按钮在视图中，而不管列表高度如何。然后我建议你对隐藏的 LinearLayout 使用权重，`android:layout_weight=1`用来满足你的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:24:07.043

```
android:scrollbars="true" 
```

尝试放置滚动条

# ios5 - 如何在 iOS 5 中使用委托

> ID：11502962
> 
> 赞同：3
> 
> 时间：2012-07-16T11:03:29.103
> 
> 标签：ios5, delegates

我需要在 iOS 应用程序中使用委托对象。我已将委托声明为：

在定义函数的类中：

```
@interface OOObjectCommandInterface : NSObject<OOCameraControllerDelegate> 
```

在必须调用函数的类中：（在 de .h 文件中）

```
@protocol OOCameraControllerDelegate

- (void)drawFrame:(CVImageBufferRef) imageBuffer:(BOOL)flip;

@end 
```

和

```
@interface OOCameraController : UIViewController
{
    ...    
    id<OOCameraControllerDelegate> delegate;
}

@property (nonatomic, readwrite) id<OOCameraControllerDelegate> delegate; 
```

此外，初始化第二个类的位置：

```
_hardwareController.delegate = [OOObjectCommandInterface ocInterface]; 
```

where`_hardwareController`是`OOCameraController`类的一个实例。因此，当我尝试调用委托对象时，我会这样做：

```
[delegate drawFrame:imageBuffer:flip]; 
```

但该功能未执行。任何的想法？

PD：我调用的函数是一个单例类。那里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T11:07:29.190

您是否在第二堂课中将委托设置为自我？在第二个类中创建一个对象，例如

```
@property (nonatomic, readwrite) id<OOCameraControllerDelegate> delegate; 
```

进而`[_hardwareController setDelegate:self];`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-16T11:15:29.353

根据定义，单例是访问一个对象的设计赞助人，该对象是唯一的，只能创建一次（首先 get_instance 你这样做）。使用 get_instance，您可以从任何地方访问单例内部的函数，那么，为什么不直接使用它呢？

写类似 [[MySingletonClass get_instance] FunctionThatIWantToUse:...]; 并且不要使用委托

# java - OneToOne 和复合主键的 JPA 注释错误

> ID：11502964
> 
> 赞同：1
> 
> 时间：2012-07-16T11:03:42.287
> 
> 标签：java, hibernate, jpa, spring-mvc, annotations

我有这个关系：

```
+------------------+    +----------------+    +----------+
| TTR_AUT          |    | TTR_ANO_ESCALA |    | TTR_POA  |
+------------------+    +----------------+    +----------+
|#ID_ESCAL         |    |#ID_ESCAL       |    |#ID_ESCAL |
|#ANO              |----|#ANO            |----|#ANO      |
|#MES              |    | NOMBRE         |    |#MES      |
| OBSERVACIONES    |    +----------------+    | VALOR    |
+------------------+                          +----------+ 
```

TTR_AUT 和 TTR_POA 具有 oneToOne 关系。现在我不会从 POA 获得一个带有 VALOR 的对象 Aut。与下一个实体：

**实体自动.java**

```
@Entity
@Table(name="TTR_AUT")
public class Aut implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private AutPK id;

    @Column(name="OBSERVACIONES")
    private String observaciones;

    @OneToOne
    @JoinTable(name="TTR_POA",
        joinColumns = {
          @JoinColumn(name="ANO", insertable=false, updatable=false, referencedColumnName="ANO"),
          @JoinColumn(name="ID_ESCAL", insertable=false, updatable=false, referencedColumnName="ID_ESCAL"),
          @JoinColumn(name="MES", insertable=false, updatable=false, referencedColumnName="MES")          
        },
        inverseJoinColumns = {
          @JoinColumn(name="ANO", insertable=false, updatable=false, referencedColumnName="ANO"),
          @JoinColumn(name="ID_ESCAL", insertable=false, updatable=false, referencedColumnName="ID_ESCAL"),
          @JoinColumn(name="MES", insertable=false, updatable=false, referencedColumnName="MES")
        }     
      )
    private Poa poa;

    public Aut() {
    }

    //GETTERS AND SETTERS
} 
```

**实体 AutPK.java**

```
@Embeddable
public class AutPK implements Serializable {
    //default serial version id, required for serializable classes.
    private static final long serialVersionUID = 1L;

    @Column(name="ID_ESCAL", unique=true, nullable=false, precision=22)
    private Long idEscal;

    @Column(name="ANO", unique=true, nullable=false, precision=22)
    private Long ano;

    @Column(name="MES", unique=true, nullable=false, precision=22)
    private Long mes;

    public AutPK() {
    }

    //GETTERS AND SETTERS
} 
```

**实体 Poa.java**

```
@Entity
@Table(name="TTR_POA")
public class Poa implements Serializable {
    private static final long serialVersionUID = 1L;

    @EmbeddedId
    private PoaPK id;

    @Column(name="VALOR", precision=22)
    private BigDecimal valor;

    public Poa() {
    }

    //GETTERS AND SETTERS
} 
```

**实体 PoaPK.java**

```
@Embeddable
public class PoaPK implements Serializable {
    //default serial version id, required for serializable classes.
    private static final long serialVersionUID = 1L;

    @Column(name="ID_ESCAL", unique=true, nullable=false, precision=22)
    private Long idEscal;

    @Column(unique=true, nullable=false, precision=22)
    private Long ano;

    @Column(unique=true, nullable=false, precision=22)
    private Long mes;

    public PoaPK() {
    }

    //GETTERS AND SETTERS
} 
```

当我得到对象 Poa 时，它会抛出这个错误：

```
]] Root cause of ServletException.
java.lang.IllegalArgumentException: org.hibernate.TypeMismatchException: Provided id of the wrong type for class es.model.entities.Poa. Expected: class es.model.entities.PoaPK, got class es.model.entities.AutPK
    at org.hibernate.ejb.QueryImpl.getSingleResult(QueryImpl.java:314)
    at es.model.entities.dao.impl.AutDAOImpl.getAutDeterminada(AutDAOImpl.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    Truncated. see log file for complete stacktrace
Caused By: org.hibernate.TypeMismatchException: Provided id of the wrong type for class es.model.entities.Poa. Expected: class es.model.entities.PoaPK, got class es.model.entities.AutPK
    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:132)
    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1079)
    at org.hibernate.internal.SessionImpl.internalLoad(SessionImpl.java:1006)
    at org.hibernate.type.EntityType.resolveIdentifier(EntityType.java:613)
    at org.hibernate.type.EntityType.resolve(EntityType.java:441)
    Truncated. see log file for complete stacktrace 
```

***有什么问题/错误？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:51:48.483

I think the reason is your embeddable classes are same. I didnt see any difference between PoaPK and AutPK, what about if you just use same embeddable class for all? If this doesnt work also you can try [composite ID](http://www.ibm.com/developerworks/java/library/os-hibernatejpa/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T11:28:43.220

也许您需要为 PoaPK 和 AutPK 定义不同的 serialVersionUID。将 PoaPK 的 serialVersionUID 更改为 2 或 1 以外的任何其他数字。

# jquery - 如何在 WordPress 中制作浮动小部件

> ID：11502965
> 
> 赞同：0
> 
> 时间：2012-07-16T11:03:45.537
> 
> 标签：jquery, wordpress, widget, floating

我正在网站[http://weekendr.in/](http://weekendr.in/)上工作，我订阅了电子邮件小部件，我想让它在页面上下移动时随页面浮动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:20:21.473

[**WP FLOAT PLUGIN**](http://wordpress.org/extend/plugins/wp-float/)将为您施展魔法。

还有很多自定义选项。核实：

![在此处输入图像描述](../Images/95811ec56b86c301c9d7ff180b29bd7e.png)

希望这会帮助你。干杯！！！

# c# - windows 应用程序数据库连接 c#

> ID：11502972
> 
> 赞同：1
> 
> 时间：2012-07-16T11:04:33.820
> 
> 标签：c#, sql, database, connection

我在 Windows 应用程序数据库连接 c# 上面临数据库连接问题...这是我的连接 ,,, PC2 是 PCNAme

```
private static SqlConnection con = new SqlConnection(
    "Data Source=PC2\\SQLEXPRESS; Initial Catalog=Database1;Integrated Security=True"
); 
```

当我运行表单时，我在 con.Open(); 上得到了这个未处理的异常；

sqlException 未处理：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

希望有人可以帮助我尝试解决它很多小时但没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:47:13.537

在 MSDN 上查看此故障排除步骤：

[SQL Server 客户端无法连接到服务器 MSDN](http://www.microsoft.com/products/ee/transform.aspx?ProdName=Microsoft%20SQL%20Server&EvtSrc=MSSQLServer&EvtID=-1)

如果将连接字符串与 ado.net sql 连接分开，那就更好了。

```
private const string _thisConnectionString = "Data Source=PC2\\SQLEXPRESS; Initial Catalog=Database1;Integrated Security=SSPI"; 
```

使用“使用”声明确保您始终关闭您的连接。

[使用 ADO.NET MSDN 的最佳实践](http://msdn.microsoft.com/en-us/library/ms971481.aspx#adonetbest_topic4)

```
 using (var conn = new SqlConnection(_thisConnectionString))
        {
           SqlCommand cmd = conn.CreateCommand();
           cmd.CommandText = "Your SQL Query STuff";

            conn.Open();

         } 
```

问候

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T10:59:06.900

尝试这个：

```
private static SqlConnection con = new SqlConnection(
    "Data Source=PC2\SQLEXPRESS; Initial Catalog=Database1;Integrated Security=True"
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-26T07:30:37.740

转到 SQL Server 配置管理 -> 单击 SQL Server 服务

验证 SQL Server 和 SQL Server 浏览器都在运行。你可以在那里看到一个贪婪的播放按钮。如果它没有运行右键单击显示红色的服务，转到属性，单击内置帐户，然后按应用，然后确定，尝试通过右键单击启动。

# objective-c - 为什么树结构的更改不使用可可绑定在多个 NSOutlineViews/NSTreeControllers 之间传播？

> ID：11502973
> 
> 赞同：1
> 
> 时间：2012-07-16T11:04:41.760
> 
> 标签：objective-c, macos, cocoa, cocoa-bindings

在我的项目中，我有两个 NSOutlineViews 设置如下：

![在此处输入图像描述](../Images/16d9f64b777baf059694d89377ad542e.png)

右侧是左侧选择的子树，使用两个 NSTreeController 使用可可绑定设置，其中右侧绑定到左侧的选择属性。如果我如下所示在右侧添加子项目，左侧​​的相同项目将无法展开。

我已经到处寻找答案，但到目前为止我能找到的唯一解决方案是手动调用视图上的显示。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-28T20:17:13.600

我发现在树控制器上调用重新排列对象可以创造奇迹。与在 XIB 中具有“自动重新排列内容”复选框的数组控制器不同，树控制器需要您在某处为此编写代码。

这：
[更改树中的节点后将重新排列对象发送到 NSTreeController 的正确方法？](https://stackoverflow.com/questions/17391416/correct-way-to-get-rearrangeobjects-sent-to-an-nstreecontroller-after-changes-to)
是关于这样做的相关讨论。

# php - 使用 preg_replace 从字符串中删除“img”标签

> ID：11502977
> 
> 赞同：2
> 
> 时间：2012-07-16T11:04:55.730
> 
> 标签：php, regex, preg-replace

> **可能重复：**
> [PHP - 从字符串中删除 <img> 标记](https://stackoverflow.com/questions/1107194/php-remove-img-tag-from-string)

我的内容是这样的：

```
$content = '<p>&nbsp;</p>
<p><img width="645" height="450" src="/proshore/userfiles/image/1.jpg" alt="" /></p>
<p>An explorer adventures into an unknown world, yet it seems that he has been there      before. A short animated film directed by Malcolm Sutherland in 2010\. With music by Alison Melville and Ben Grossman, and foley by Leon Lo. Sound design / mix by Malcolm Sutherland.</p>
<p>The animation is all hand-drawn; a mix of drawing / pastels on paper and digital animation with Toonboom Studio and a wacom cintiq tablet, assembled in After Effects 7 and edited in Sony Vegas 8.</p>
<p>&nbsp;</p>'; 
```

我希望输出忽略`<img>`标签。我用 preg_replace 尝试了一些混乱，但没有奏效。如果有人能向我解释它是如何工作的，那将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T11:09:52.550

如果您不被迫[使用正则表达式来解析 HTML 内容](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)，那么我建议您使用 PHP 的[`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)函数及其`allowed_tags`参数。

这将告诉 PHP 删除所有 html 标记并保留您在`allowed_tags`.

从[文档](http://php.net/manual/en/function.strip-tags.php)中获取的示例用法-

```
$text = '<p>Test paragraph.</p><!-- Comment --> <a href="#fragment">Other text</a>';
echo strip_tags($text); 
// output : Test paragraph. Other text

// Allow <p> and <a>
echo strip_tags($text, '<p><a>'); 
// output - <p>Test paragraph.</p> <a href="#fragment">Other text</a> 
```

`allow_tags` **因此，如果您只是指定除`<img>`tag**之外的所有 HTML 标记，您应该得到您需要的结果 - 只需`<img>`从字符串中删除标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T11:09:55.047

尝试：

```
 $content = preg_replace("/<img[^>]+\>/i", " ", $content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T11:12:05.310

`<img.+?((/>)|(</img>))`用空字符串替换这个正则表达式

# php - 数据表搜索选项

> ID：11502981
> 
> 赞同：0
> 
> 时间：2012-07-16T11:05:39.660
> 
> 标签：php, search, datatables, jquery-datatables

我正在使用数据表插件，因此我正在搜索一个名为“特权”的字段。prvilege 的值是“superadmin”和“admin”。对于通配符搜索，每当我按“管理员”搜索时，都会显示管理员和超级管理员的记录。如何解决这个问题。我的代码是这样的：

```
function fnFilterColumn ( i )
{
    $('#example').dataTable().fnFilter( 
     $("#col"+(i+1)+"_filter").val(),i,true,false);
}
$(document).ready(function(){
 var oTable = $('#example').dataTable( {
    "bProcessing": true,
    "sAjaxSource": "datatabledb.php",
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",
    "sDom": 'T<"clear">lfrtip',
    "oTableTools": {
    "aButtons": [
    {
    "sExtends": "csv",
    "sButtonText": "Save to CSV"
    }
    ]
    },
    "oLanguage": {
        "sSearch": "Search all columns:"
    },
   "aoColumns": [
        null,
                 { "bSortable": false }, // disable the sorting property for checkbox header
        null,null,null,null,null,null,null,null
           ]
} ); 
```

在 datatabledb.php 文件中，我写下了我的数据库代码，例如：

```
<?php
include('library/function.php');

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * Easy set variables
     */

    /* Array of database columns which should be read and sent back to DataTables. Use a space where
     * you want to insert a non-database field (for example a counter or static image)
     */
    $aColumns = array( 'admin_name','admin_photo','username','email','age','location','contact_no','role','creation_date','status' );

    /* Indexed column (used for fast and accurate table cardinality) */
    $sIndexColumn = "admin_id";

    /* DB table to use */
    $sTable = "admin_details";

    /* Database connection information */
    $gaSql['user']       = "root";
    $gaSql['password']   = "";
    $gaSql['db']         = "alert";
    $gaSql['server']     = "localhost";

    /* REMOVE THIS LINE (it just includes my SQL connection user/pass) */
    //include( $_SERVER['DOCUMENT_ROOT']."/datatables/mysql.php" );

    /* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
     * If you just want to use the basic configuration for DataTables with PHP server-side, there is
     * no need to edit below this line
     */

    /* 
     * MySQL connection
     */
    $gaSql['link'] =  mysql_pconnect( $gaSql['server'], $gaSql['user'], $gaSql['password']  ) or
        die( 'Could not open connection to server' );

    mysql_select_db( $gaSql['db'], $gaSql['link'] ) or 
        die( 'Could not select database '. $gaSql['db'] );

    /* 
     * Paging
     */
    $sLimit = "";

    if ( isset( $_GET['iDisplayStart'] ) && $_GET['iDisplayLength'] != '-1' )
    {
        $sLimit = "LIMIT ".mysql_real_escape_string( $_GET['iDisplayStart'] ).", ".
            mysql_real_escape_string( $_GET['iDisplayLength'] );
    }

    /*
     * Ordering
     */
    $sOrder = "";
    if ( isset( $_GET['iSortCol_0'] ) )
    {
        $sOrder = "ORDER BY  ";
        for ( $i=0 ; $i<intval( $_GET['iSortingCols'] ) ; $i++ )
        {
            if ( $_GET[ 'bSortable_'.intval($_GET['iSortCol_'.$i]) ] == "true" )
            {
                $sOrder .= "`".$aColumns[ intval( $_GET['iSortCol_'.$i] ) ]."` ".
                    mysql_real_escape_string( $_GET['sSortDir_'.$i] ) .", ";
            }
        }

        $sOrder = substr_replace( $sOrder, "", -2 );
        if ( $sOrder == "ORDER BY" )
        {
            $sOrder = "";
        }
    }

    /* 
     * Filtering
     * NOTE this does not match the built-in DataTables filtering which does it
     * word by word on any field. It's possible to do here, but concerned about efficiency
     * on very large tables, and MySQL's regex functionality is very limited
     */
    $sWhere = "";
    if ( isset($_GET['sSearch']) && $_GET['sSearch'] != "" )
    {
        $sWhere = "WHERE (";
        for ( $i=0 ; $i<count($aColumns) ; $i++ )
        {
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR ";
        }

        $sWhere = substr_replace( $sWhere, "", -3 );
        $sWhere .= ')';

    }

    /* Individual column filtering */
    for ( $i=0 ; $i<count($aColumns) ; $i++ )
    {
        if ( isset($_GET['bSearchable_'.$i]) && $_GET['bSearchable_'.$i] == "true" && $_GET['sSearch_'.$i] != '' )
        {
            if ( $sWhere == "" )
            {
                $sWhere = "WHERE ";
            }
            else
            {
                $sWhere .= " AND ";
            }
            $sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string($_GET['sSearch_'.$i])."%' ";
        }

    }

    /*
     * SQL queries
     * Get data to display
     */

    $sQuery = "
        SELECT SQL_CALC_FOUND_ROWS `".str_replace(" , ", " ", implode("`, `", $aColumns))."`
        FROM   $sTable
        $sWhere
        $sOrder
        $sLimit
        ";

    $rResult = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    /* Data set length after filtering */
    $sQuery = "
        SELECT FOUND_ROWS()
    ";
    $rResultFilterTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultFilterTotal = mysql_fetch_array($rResultFilterTotal);
    $iFilteredTotal = $aResultFilterTotal[0];

    /* Total data set length */
    $sQuery = "
        SELECT COUNT(`".$sIndexColumn."`)
        FROM   $sTable
    ";
    $rResultTotal = mysql_query( $sQuery, $gaSql['link'] ) or die(mysql_error());
    $aResultTotal = mysql_fetch_array($rResultTotal);
    $iTotal = $aResultTotal[0];

    /*
     * Output
     */
    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $iTotal,
        "iTotalDisplayRecords" => $iFilteredTotal,
        "aaData" => array()
    );

    while ( $aRow = mysql_fetch_array( $rResult ) )
    {
        $row = array();
        if($aRow['admin_name'] != ''){
            $row[] = wordwrap($aRow['admin_name'],15,"<br />\n",TRUE);

        }
        if($aRow['admin_photo'] == ''){
                $row[] = "<img src='http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/no-pic.jpg' width='50' height='50'>";
        }
        else if($aRow['admin_photo'] != ''){
            $row[] ="<img src='http://fgtpl.com/fugenx1/public_html/alertR/admins/upload/".$aRow['admin_photo']."' width='50' height='50'>" ;
        }
        if($aRow['username'] != ''){
            $row[] = $aRow['username'];
        }
        if($aRow['email'] != ''){
            $row[] = wordwrap($aRow['email'],15,"<br />\n",TRUE);
        }
        else if($aRow['email'] == ''){
            $row[] = "N/A";
        }
        if($aRow['age'] != 0){
            $row[] = $aRow['age'];
        }
        else if($aRow['age'] == 0){
            $row[] = "N/A";
        }
        if($aRow['location'] != ''){
            $row[] = wordwrap($aRow['location'],20,"<br />\n",TRUE);
        }
        else if($aRow['location'] == ''){
            $row[] = "N/A";
        }
        if($aRow['contact_no'] != ''){
            $row[] = $aRow['contact_no'];
        }
        else if($aRow['contact_no'] == ''){
            $row[] = "N/A";
        } 
        if($aRow['role'] != ''){
            $row[] = get_role_name_by_id($aRow['role']);
        }
        if($aRow['creation_date'] != ''){
            $joiningDate = date("d-m-Y h:i:s", strtotime($aRow['creation_date']));
            $row[] = substr($joiningDate,0,10);
        }
        if($aRow['status'] != ''){
            $row[] = ($aRow['status'] == 1)?"Enable":"Disable";
        }

        $output['aaData'][] = $row;
    }

    echo json_encode( $output );
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-17T14:31:29.857

我不知道为什么这么长时间没有答案。你只要改变

```
$sWhere .= "`".$aColumns[$i]."` LIKE '%".mysql_real_escape_string( $_GET['sSearch'] )."%' OR "; 
```

至

```
$sWhere .= "`".$aColumns[$i]."` LIKE '".mysql_real_escape_string( $_GET['sSearch'] )."' OR "; 
```

删除通配符
您也可以为单个列执行此操作如果您需要详细信息，请告诉我

# .htaccess - 如何忽略父目录中的 .htaccess 文件

> ID：11502983
> 
> 赞同：0
> 
> 时间：2012-07-16T11:05:49.407
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, apache2

我正在为搜索引擎优化的 url 使用重写规则在我的根文件夹中，我有以下 .htaccess 文件：

```
Options +FollowSymlinks RewriteEngine On RewriteCond %{http_host} ^elitegameservers.net [NC]
RewriteRule ^(.*)$ http://www.elitegameservers.net/$1 [R=301,L]
rewriteEngine on
rewriteBase /
rewriteCond %{HTTP_HOST} ^(.*)haloservers(.nl|.us|.net)$
rewriteRule ^(.*) http://www.haloservers.net/$1 [L,R=301]
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?haloservers(.nl|.us|.net) [NC]
RewriteRule ^(.*)\.html$ http://www.elitegameservers.net/$1 [R=301,L] 
```

在子目录（/控制面板）中，我使用以下 .htaccess 文件运行 WHMCS：

```
RewriteEngine On
Options +FollowSymlinks
RewriteEngine On
RewriteCond %{http_host} ^elitegameservers.net [NC]
RewriteRule ^(.*)$ http://www.elitegameservers.net/controlpanel/$1 [R=301,L] 

RewriteEngine On

# Announcements
RewriteRule ^announcements/([0-9]+)/[a-z0-9_-]+\.html$ ./announcements.php?id=$1 [L,NC]
RewriteRule ^announcements$ ./announcements.php [L,NC]

# Downloads
RewriteRule ^downloads/([0-9]+)/([^/]*)$ ./downloads.php?action=displaycat&catid=$1 [L,NC]
RewriteRule ^downloads$ ./downloads.php [L,NC]

# Knowledgebase
RewriteRule ^knowledgebase/([0-9]+)/[a-z0-9_-]+\.html$ ./knowledgebase.php?action=displayarticle&id=$1 [L,NC]
RewriteRule ^knowledgebase/([0-9]+)/([^/]*)$ ./knowledgebase.php?action=displaycat&catid=$1 [L,NC]
RewriteRule ^knowledgebase$ ./knowledgebase.php [L,NC] 
```

我注意到 WHMCS 中知识渊博的 SEO 优化似乎无法正常工作，这似乎是由我的根目录中的 .htaccess 代码引起的。

因此，我希望将控制面板子目录从根目录中的代码中排除。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:54:45.633

您可以尝试在根目录中的规则中添加一个条件，以排除以下开头的请求`controlpanel`：

```
RewriteCond %{REQUEST_URI} !^/controlpanel
rewriteCond %{HTTP_HOST} ^(.*)haloservers(.nl|.us|.net)$
rewriteRule ^(.*) http://www.haloservers.net/$1 [L,R=301]

RewriteCond %{REQUEST_URI} !^/controlpanel
RewriteCond %{HTTP_HOST} ^(www\.)?haloservers(.nl|.us|.net) [NC]
RewriteRule ^(.*)\.html$ http://www.elitegameservers.net/$1 [R=301,L] 
```

# javascript - Javascript / Jquery。使用带通配符的正则表达式将纯文本替换为 html

> ID：11502985
> 
> 赞同：0
> 
> 时间：2012-07-16T11:06:21.310
> 
> 标签：javascript, regex, wildcard

我想用 [next 1272] 替换纯文本（例如）

```
<a href='page.asp?id=1272'>
<img src='next.png' alt='Next Page' title='Next Page' />
</a> 
```

文本可以出现在页面 html 中的任何位置，并且不止一次，可能使用不同的数字（从 1 到 99999）。我无法控制它可能出现的方式/位置。

沿着

```
var ThisBody = $("body").html()
var regex = new RegExp("\\[  (I dont know) \\]", "g");
StrToReplaceWith = "...(the html in the example, with correct number)..."
ThisBody = ThisBody.replace(regex,StrToReplaceWith);
$("body").html(ThisBody); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T19:27:09.410

好吧，我考虑了一下，以下工作，以防它对任何人有任何帮助。虽然不是很优雅

```
regex = new RegExp(/\[next (.*?)\]/gi);
mtch=ThisBody.match(regex)
newBody=ThisBody
if (mtch!=null)
  {
  if (mtch.length>0)
    {
    for (var i=0; i<mtch.length; i++)
        {
        tmp=mtch[i]                 // [next 1272]
        tmp=tmp.replace("]","")     // [next 1272
        tmp=tmp.substring(6)        // 1272
        t="<a href='page.asp?id=" + tmp + "'>"
        t+="<img src='Next.png' alt='Next Page' title='Next Page' />"
        t+="</a>"
        newBody=newBody.replace(mtch[i],t) 
        }
    }
  }
ThisBody=newBody 
```

# javascript - SSE（服务器发送事件）断开连接

> ID：11502990
> 
> 赞同：2
> 
> 时间：2012-07-16T11:06:44.953
> 
> 标签：javascript, http, bottle, server-sent-events

我正在尝试将 SSE（在 chrome 中）用于股票应用程序。似乎在我发现或编写的每个示例中，连接每 3-4 秒关闭一次。即使在以下位置运行示例： [http ://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_sse](http://www.w3schools.com/html5/tryit.asp?filename=tryhtml5_sse)

您可以看到每 3-4 秒更新一次。这不是由于服务器实现（本例中为“demo_sse.php”），而是由于每 3-4 秒发生一次重新连接。

如果我在上面的示例中添加以下内容：

```
source.onerror=function(event)
{
  document.getElementById("result").innerHTML+=source.readyState+ "<br />";
}; 
```

你可以清楚的看到readyState为0，意思是：“连接还没有建立，或者已经关闭，用户代理正在重新连接。” （取自官方 EventSorce API 文档）。

我自己也为服务器端编写了一个脚本，这是代码（使用python Bottle web框架）。

```
@route('/events')
def positions():  
    response.content_type = 'text/event-stream'
    response.set_header('Cache-Control', 'no-cache')
    now = datetime.datetime.now().time().replace(microsecond=0)
    return  "data: %s\n\n"%now 
```

我得到同样的东西。每 3-4 秒重新连接一次。

所以我感兴趣的是如何通过会话保持连接。

谢谢你的帮助，奥马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:30:32.443

确保瓶子没有为您设置 Content-Length 标头。[这条线](https://github.com/defnull/bottle/blob/cecbd04fc80e44f0b422b5bb7a894563102bed7f/bottle.py#L821)在我看来很可疑。

返回一个迭代器，正如在[这个问题中为瓶子](https://github.com/defnull/bottle/issues/42#issuecomment-969013)所建议的那样，可能会做你想要的。

```
@route('/events')
def positions():
  yield 'START'
  while stream_alive:
      some_event.wait()
      yield some_data()
  yield 'END' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T19:05:00.937

AFAIK，SSE 被定义为通过这些重新连接工作。您可能会欺骗他们的内容长度黑客行为......就像在您的标题中建立内容长度 0 一样。

# jquery - 翻转切换开关不会附加到 jquery mobile 的列表视图中

> ID：11502991
> 
> 赞同：0
> 
> 时间：2012-07-16T11:06:45.813
> 
> 标签：jquery, jquery-mobile, cordova

我是 jQuery mobile 的新手，所有 li 都完美地附加在 ul 中，但只是`data-role=slider`不附加。

```
function getWebsiteDirectries() 
{
var customer = "";
var li = "";
if(user_id.length != 0){
    url = serviceURL +'customer-info.json?id='+user_id+'&action=get&request_type=web_directory';
    $.getJSON(url, function(json) {  
       $('#web_list li').remove();  
        customer = json.items;            
        $.each(customer, function(key, value) {                         

             $.each(value.customer.customer_toplist, function(key, value) {

                    li += '<li style="height:40px; line-height:40px;"><span class="f_right"><select data-role="slider" id="'+value.vName+'" name="'+value.vName+'" class="ui-slider-switch"><option value="0">OFF</option><option value="1">ON</option></select></span>'+value.vTitle+'</li>';

            });             
            $('#web_list').append(li);  
            $('#web_list').listview('refresh');                     
        });

    });
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:39:04.110

添加 ：

```
$('#web_list').trigger('create'); 
```

这之间：

```
$('#web_list').append(li);  
$('#web_list').trigger('create');
$('#web_list').listview('refresh'); 
```

# android - 跟踪应用程序的 HTTP 请求

> ID：11502994
> 
> 赞同：3
> 
> 时间：2012-07-16T11:06:51.777
> 
> 标签：android

我正在创建一个应用程序，它必须跟踪给定应用程序发出的 http 请求。Android 有许多小部件，如天气预报小部件、股市报告等，它们经常向服务器发出请求以获取数据。我想要应用程序向服务器发出的所有请求 url。

当应用程序访问网络/wifi 或任何其他数据服务提供商时，我们可以记录 url 吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-16T11:23:24.390

> 当应用程序访问网络/wifi 或任何其他数据服务提供商时，我们可以记录 url 吗？

幸运的是，不，出于明显的隐私和安全原因。恶意软件作者会对此功能非常感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T05:44:51.907

You can use open source proxy servers made in java for example jHTTPp2.It is having good implementation of proxy server logic. All you need to do is just start the server from any android application and set proxy in your emulator or device to 127.0.0.1 and port as 8088(as by default the jHTTPp2 runs on that port).

You need to make some modifications to the proxy code as per Android requirements.

I hope this might be of some help to you.

# iphone - 我可以将我的 iPhone 应用程序转换为 API 吗？

> ID：11502996
> 
> 赞同：1
> 
> 时间：2012-07-16T11:06:54.440
> 
> 标签：iphone, ios4, static-libraries

我有一个 iPhone 应用程序，它应该被转换为一个库，以便我可以将它用作 API。

我该如何做到这一点，以便其他应用程序也可以使用它？（API）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T11:13:16.673

您必须阅读一些有关[静态库](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)的信息。这很简单。

# javascript - 是否有任何用于登录应用程序的推特功能？

> ID：11502998
> 
> 赞同：0
> 
> 时间：2012-07-16T11:07:21.583
> 
> 标签：javascript, twitter

我想让我的 twitter 用户使用自定义登录按钮登录到我的 twitter 应用程序。例如，就像 facebook 的 Fb.login 方法一样，在 twitter api 中是否有任何这样的方法可以使用 api 登录到应用程序？

这只是显示一个登录按钮

```
T("#signin-btn").connectButton(); // 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-17T13:20:33.860

Twitter 有很多 JavaScript 库。你可以在这里看到其中的一些：[https](https://dev.twitter.com/docs/twitter-libraries#javascript) ://dev.twitter.com/docs/twitter-libraries#javascript 。

也有 Twitter 制作的引导 API：[https ://github.com/twbs/bootstrap](https://github.com/twbs/bootstrap)