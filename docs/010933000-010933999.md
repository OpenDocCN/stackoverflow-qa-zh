# StackOverflow 问答 10933000-10933999

# ios - Instruments / UI Automation 选择了错误的目标来运行

> ID：10933006
> 
> 赞同：1
> 
> 时间：2012-06-07T13:38:34.430
> 
> 标签：ios, xcode, ui-automation

我有一个我正在编写的 iPhone 应用程序，它有 2 个目标，用于应用程序目标“A”和“B”的两个不同版本。我选择构建目标 A，当我在设备或模拟器上构建时，它会正确构建并运行目标“A”。在仪器 ( `UI Automation`) 中，我选择目标“A”，但它作为目标“B”构建并运行应用程序。

知道为什么会这样吗？我选择了正确的应用程序，但另一个正在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:49:44.223

这由您的项目方案控制。确保每个目标都有自己的方案，并为每个目标适当地编辑方案的“配置文件”部分。

# ios - 带有 UIButton 的 UITableViewCell 不滚动

> ID：10933007
> 
> 赞同：0
> 
> 时间：2012-06-07T13:38:37.623
> 
> 标签：ios, uitableview, uibutton

我有`UITableView`。每个`UITableViewCell`内容`UIButton`。`UIButton's`框架等于`UITableViewCell's`框架。但是当我点击按钮并滚动时滚动不起作用，只有当我点击单元格滚动之间的空间时滚动才起作用。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:51:53.630

您需要禁用按钮的用户交互。然后它不会接受触摸事件，您将能够正确滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:42:22.873

该按钮不会将触摸转发到单元格。

最简单的解决方案是给单元格一个按钮的外观并使用普通的委托方法。

# jquery - jQueryMobile 色板，一个可以有超过 26 个色板吗？

> ID：10933011
> 
> 赞同：1
> 
> 时间：2012-06-07T13:39:01.933
> 
> 标签：jquery, jquery-mobile

我刚刚开始研究 jQuery mobile 并且正在使用 Theme Roller。它说“**创建最多 26 个从 AZ 字母字母的主题“样本”。**如果我需要更多主题样本，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:11:08.723

简单的答案是否定的。jQM 主题使用 alpha [az] 附件来标识它将使用的主题，并且仅限于 az。

您可以重写 jQM 中的方法以允许超出或不同于 az 的其他主题，但这不是小任务，我强烈建议不要这样做！

或者，如果您超出了 az 限制，您可以提取不同的 CSS 样式表

*   [如何使用 jQuery 切换我的 CSS 样式表？](https://stackoverflow.com/questions/7846980/how-do-i-switch-my-css-stylesheet-using-jquery)

样式表 1 将包含 26 个不同的主题，
样式表 2 将包含另外 26 个不同的主题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:42:39.257

据我所知，如果您打算超越默认色板主题，则需要创建自己的自定义色板颜色。如果是这种情况，那么您可以从很多地方开始。

例如，您可以查看这个非常酷的网站中的“颜色”和“图案”部分（确保向下滚动以查看内容）：[http ://www.mobjectify.com/tutorials/supercharge_your_jquery_mobile_theme/](http://www.mobjectify.com/tutorials/supercharge_your_jquery_mobile_theme/)

同样从同一个网站，您可以继续并开始制作您自己的自定义色板 [http://www.mobjectify.com/theme/](http://www.mobjectify.com/theme/)

如果您喜欢这整个概念并且真的想更深入地了解自定义您自己的 JQuery 主题，那么您可以开始使用：http: [//jquerymobile.com//themeroller/](http://jquerymobile.com//themeroller/)

# linux - 包含文件指令在linux服务器中不起作用

> ID：10933015
> 
> 赞同：0
> 
> 时间：2012-06-07T13:39:14.147
> 
> 标签：linux, apache, jsp, tomcat, directory

我的问题是，我使用代码包含了一个页面

```
 <%@include file="../include/dbconnection.jsp"%> 
```

我的页面位于 public_html 的子目录中，但是当我加载页面时，它显示以下异常

```
org.apache.jasper.JasperException: /index.jsp(23,1) File "/../include/dbconnection.jsp" not found 
```

但是这段代码在我的开发系统（即 Windows）中运行良好，我为我的网站使用了 linux 服务器。这是文件分隔符或文件权限问题的问题吗？可能是什么问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:18:26.767

您可以在下面使用 的帖子中找到答案，该帖子`<jsp:include page="...">`仅`<%@include`适用于静态引用。

[是否可以将动态路径作为 jsp 包含的一部分](https://stackoverflow.com/questions/8092386/is-it-possible-to-have-a-dynamic-path-as-part-of-a-jsp-include)

# haskell - 黑线鳕没有正确遵守忽略出口

> ID：10933020
> 
> 赞同：2
> 
> 时间：2012-06-07T13:39:31.673
> 
> 标签：haskell, haddock

举个例子：

```
{-# OPTIONS_HADDOCK ignore-exports #-}
module HaddockTest (e1) where

-- * Exported

-- | This is exported.
e1 :: Int
e1 = 1

-- * Private

-- | This is not exported.
p1 :: Int
p1 = 1 
```

奇怪的是，未导出声明的文档字符串被忽略了，即使我们得到了正确的结构：

![Haddock 输出显示 e1 有 doc， p1 没有。](../Images/7605b9fc1c7f89c74faa2a80899d8385.png)

有人有线索吗？作为记录，调用 via`cabal haddock --internal`无济于事，`haddock --ignore-all-exports`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T16:56:23.810

这是[haddock-2.10 中的一个错误](http://trac.haskell.org/haddock/ticket/196)，在 3 月份报告并在不久后修复，但 GHC-7.4.1 附带的 haddock 受到了影响。大概 7.4.2 附带的黑线鳕包括修复程序（尚未构建 7.4.2）。

# powershell - PowerShell - 不受限制的执行策略问题

> ID：10933021
> 
> 赞同：0
> 
> 时间：2012-06-07T13:39:34.767
> 
> 标签：powershell, scripting, windows-server-2008, code-signing-certificate

我有一个 Windows 更新模块，我将它复制到 PS 的模块目录中。但是，即使发出了 Set-ExecutionPolicy unrestricted 命令，当我尝试执行 .ps1 文件时，我也会收到一条错误消息，指出它没有经过数字签名并且不会运行。

我的印象是，如果您将执行策略设置为“无限制”，则无需“签名”脚本即可运行。

在 Windows 2008 R2 环境中我还需要做些什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:20:51.390

确保脚本未被阻止。检查脚本的属性页面是否包含“取消阻止”按钮。如果是这样，请单击它以取消阻止文件。

# c# - 如何将 .net 下拉列表绑定到 CRM 2011 选项集

> ID：10933025
> 
> 赞同：2
> 
> 时间：2012-06-07T13:39:45.450
> 
> 标签：c#, .net, drop-down-menu, dynamics-crm, dynamics-crm-2011

我确信这是可能的，我只是没有最模糊的方式或从哪里开始。

所以，我在 MS Dynamic CRM 中创建了一个选项集，它给了我一个国家列表，MyCountryOptionSet。迷人的。

但是，我有许多其他 .net、c# 应用程序，用户可以在其中输入自由文本。这不是那么可爱。

因此，我想将这些绑定起来，以便只能使用 MyCountryOptionSet 中存在的国家/地区。

因此，我想将 MyCountryOptionSet 中的国家绑定到我的 .net 应用程序中的下拉列表。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:12:22.713

查看`RetrieveAttributeRequest`和`IOrganizationService`。这将允许您获得选项集中定义的国家/地区。`AttributeMetadata`通过将属性投射到`PicklistAttributeMetadata`.

与控件的绑定将是特定于 UI 技术的，因此请发布更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-22T14:07:16.167

使用 crm api 获取选项值如下...

```
_serviceProxy = new OrganizationServiceProxy(serverConfig.OrganizationUri, serverConfig.HomeRealmUri,
                serverConfig.Credentials, serverConfig.DeviceCredentials);
_serviceProxy.EnableProxyTypes();
_service = _serviceProxy;

RetrieveAttributeRequest retrieveAttributeRequest =
    new RetrieveAttributeRequest
    {                            
        EntityLogicalName = EntityLogicalName,
        LogicalName = optionSetLogicalName,
        RetrieveAsIfPublished = true,
    };

// Execute the request.
RetrieveAttributeResponse retrieveAttributeResponse =
    (RetrieveAttributeResponse)_service.Execute(
    retrieveAttributeRequest);

// Access the retrieved attribute.
PicklistAttributeMetadata retrievedPicklistAttributeMetadata =
    (PicklistAttributeMetadata)
    retrieveAttributeResponse.AttributeMetadata;

// Get the current options list for the retrieved attribute.
OptionMetadata[] optionList =
    retrievedPicklistAttributeMetadata.OptionSet.Options.ToArray();

//Dictionary<int,string> LocalizedLabelDic = new Dictionary<int,string>();

List<ListItem> OptionSetItems = new List<ListItem>();

foreach (OptionMetadata o in optionList)
{
    OptionSetItems.Add(new ListItem(o.Label.LocalizedLabels.FirstOrDefault(e => e.LanguageCode == 1033).Label.ToString(), o.Value.Value.ToString()));
} 
```

然后将 listitem 通用集合绑定到你的 asp.net 下拉列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:11:54.120

您可以使用如下查询直接查询 CRM 数据库中的值：

```
select Value, AttributeName
from StringMap
where AttributeName = 'New_MySet' --schema name of the global option set
and ObjectTypeCode = 1 --changes based on entity type field is associated with 
```

获得结果后，您可以将它们绑定到应用程序中的列表。

# javascript - 为什么我不能处理这个信息窗口的内容？

> ID：10933026
> 
> 赞同：0
> 
> 时间：2012-06-07T13:39:47.587
> 
> 标签：javascript, jquery, google-maps, google-maps-api-3

这是我的[代码](http://jsfiddle.net/jYX2t/3/)：

# HTML

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>

<div id="mappa-eventi" style="width:500px; height:500px;"></div>

<div id="mappa-infowindow" style="display:none;">
    <div class="mappa-infobox" style="background-color:#ffffff; width:300px; height:100px;">
        <a class="punto-leggi" href="javascript:void(0);">Link</a>
    </div>
</div> 
```

# jQuery/JS：

```
var map;
var location = new google.maps.LatLng(45.930976, 10.639744);

$(".punto-leggi").click(function (e) {
    e.preventDefault();
    alert("Clicked");
});

$(document).ready(function () {
    var mapOptions = {
        mapTypeControl: false,
        panControl: false,
        zoom: 8,
        center: location,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("mappa-eventi"), mapOptions);

    var marker = new google.maps.Marker({
        position: location,
        map: map                
    });

    var infowindow = new google.maps.InfoWindow({
        content: $('#mappa-infowindow').html()
    });

    google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(map, marker);
    });  
}); 
```

我点击标记！然后，单击“链接”，它应该向我显示警报。事实上它不起作用。但是，如果我添加这个：

```
$(".punto-leggi").click(); 
```

在文档准备就绪时，它会获得“点击”。并调用处理程序。

为什么会有这种行为？我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:47:43.463

点击处理程序未附加到`InfoWindow`. 您将不得不委托`click`with [.on()](http://api.jquery.com/on/)。

```
$(function() {
    // ...
    $("#mappa-eventi").on("click", ".punto-leggi", function(ev) {
        ev.preventDefault();
        alert("foo");
    });
}); 
```

编辑：更改`document`为`#mappa-eventi`ianpgall 建议的

[jsfiddle](http://jsfiddle.net/jYX2t/7/)

# ant - J2ME 应用程序生命周期的 ANT 脚本

> ID：10933031
> 
> 赞同：1
> 
> 时间：2012-06-07T13:40:13.453
> 
> 标签：ant, java-me, emulation

我是 J2ME 应用程序开发的新手，我想编写一个 ANT 脚本来在模拟器中构建和运行应用程序。假设我要使用 JAVA_ME_Platform_SDK，

> 我的主要疑问是如何使用 ANT 创建 JAD 文件

除了其他建筑活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:27:10.977

您可以使用天线[http://antenna.sourceforge.net/](http://antenna.sourceforge.net/)。

“在天线源分发的“samples”子目录中有几个示例 build.xml 文件。这些文件显示了如何构建包含在 Wireless Toolkit 和其他一些中的默认演示 MIDlet。运行示例是测试您的设置以及您自己的 build.xml 文件的良好起点。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T09:57:24.283

最后，我将脚本写入所有 J2ME 进程。为了创建 JAD，我编写了以下内容

```
**<target name="makeJAD">
          <length file="${prototype}/bin/${PROGRAM_NAME}.jar" property="jarSize"/>
          <echo file="${prototype}/bin/${PROGRAM_NAME}.jad">MIDlet-Jar-Size: ${jarSize}
             MIDlet-1: ${PROGRAM_NAME},,${PACKAGE_NAME}.${PROGRAM_NAME}
             MIDlet-Jar-URL: ${PROGRAM_NAME}.jar
             MIDlet-Name: ${MIDLET_NAME}
             MIDlet-Vendor: ${MIDLET_VENDOR}
             MicroEdition-Configuration: ${CONFIG}
             MicroEdition-Profile: ${PROFILE}
             MIDlet-Version: ${MIDLET_VERSION}
          </echo>
    </target>** 
```

# xpath - Windows Server 2008 任务计划程序：电子邮件通知任务的触发器 XML 语法未根据来自另一个任务的失败事件触发

> ID：10933033
> 
> 赞同：1
> 
> 时间：2012-06-07T13:40:21.763
> 
> 标签：xpath, windows-server-2008, scheduled-tasks, event-log

**我需要在 Windows Server 2008 中使用任务计划程序解决的场景：**

**(#1)**任务 A 尝试运行程序 > 任务 A 成功并运行 exe 文件 > 任务 B 查看任务 A 的事件并向收件人发送任务 A 成功运行的电子邮件。

场景 #1 的事件（请注意屏幕截图中的时间组以供参考）：

```
100-Task Started
319-Task Engine received message to start task
110-Task triggered by user
200-Action started
129-Created Task Process
201-Action completed
102-Task completed 
```

**(#2)**任务 A 尝试运行程序 > 任务 A 无法运行 exe 文件，因为 exe 文件不存在 > 任务 B 查看任务 A 的事件并向收件人发送有关失败的电子邮件。

场景#2的事件（注意屏幕截图中的时间组以供参考）：

```
319-Task engine received message to start task
110-Task triggered by user
100-Task Started
200-Action started
203-Action failed to start
103-Action start failed 
```

![在此处输入图像描述](../Images/4e3a9b3b1022200772712ae33305b24c.png)

这是任务 A 的事件。从上到下阅读它们。我已经按照上面的正确顺序重写了。

这是适用于场景 #1 的 XPath 查询。我无法弄清楚场景 #2（发送失败电子邮件的任务）是什么 XPath。

```
<QueryList>
  <Query Id="0" Path="Microsoft-Windows-TaskScheduler/Operational">
    <Select Path="Microsoft-Windows-TaskScheduler/Operational">

*[System[EventID=201]] 
and *[EventData[Data[@Name='ResultCode']='0' 
or Data[@Name='ResultCode']='1']] 
and *[EventData[Data[@Name='TaskName']='\test_email_task']]

</Select>
  </Query>
</QueryList> 
```

==================

# 2012 年 6 月 8 日更新 @ 1:55

更具体地说，场景 #1 不起作用。场景 #2 确实有效。对于场景 #1，我认为系统无法触发事件，因为 ResultCode 为 2147942402。这意味着 Windows 找不到该文件。

**场景#1：**

```
... task2 doesn't send email
... task1 has EventID 103 and ResultCode 2147942402
... task1 has EventID 203 and ResultCode 2147942402 
```

*   创建 2 个任务。
*   调用任务#1“task1_execute_program”；在“c:\windows\system32\bogus.exe”中添加一个打开程序的操作（无效程序）
*   调用任务#2“task2_send_email_based_on_result_of_task1”；添加操作以发送电子邮件...输入详细信息和 SMTP 服务器 ....然后添加基于事件的触发器 ....单击 XML 选项卡并在下面输入 XPath 查询：

**场景#2：**

```
... task2 sends email because it found write.exe
... task1 has EventID 102-Task Completed 
```

*   保持一切不变，但将任务 #1 中的 Action 程序从“c:\windows\system32\bogus.exe”（无效程序）”更改为“c:\windows\system32\write.exe”（有效程序）

======================

```
<QueryList>
    <Query Id="0" Path="Microsoft-Windows-TaskScheduler/Operational">
        <Select Path="Microsoft-Windows-TaskScheduler/Operational">

        *[System[EventID=203] and 
        *[EventData[Data[@Name='TaskName']='\task1_execute_program']]]

        or

        *[System[EventID=102]] 
        and *[EventData[Data[@Name='TaskName']='\task1_execute_program']]

        </Select>
    </Query>
</QueryList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T23:39:53.220

估计不是bug。我使用不同的属性来解决它。任务与 EventID。事件历史记录中的列与 XPath 语法中的名称不匹配。“EventID”确实有效（与“Task”一起），但仅当您没有提到结果代码时。因此，任务管理器中很可能存在错误。但这是一个很好的解决方法。

```
<QueryList>
  <Query Id="0" Path="Microsoft-Windows-TaskScheduler/Operational">
    <Select Path="Microsoft-Windows-TaskScheduler/Operational">

    *[
        System
        [
            Provider[@Name='Microsoft-Windows-TaskScheduler'] 
            and (Level=0 or Level=1 or Level=2 or Level=3 or Level=4 or Level=5) and (Task = 103 or Task = 203)
        ]       
        or
        System
        [
            Provider[@Name='Microsoft-Windows-TaskScheduler'] 
            and (Level=0 or Level=1 or Level=2 or Level=3 or Level=4 or Level=5) and (Task = 102)
        ]       
    ]

    and 

    *[
        EventData
        [
            Data
            [
                @Name='TaskName'
            ]='\task1_execute_program'
        ]
    ]

    </Select>
  </Query>
</QueryList> 
```

# php - 无法在 php 中使用正则表达式

> ID：10933037
> 
> 赞同：0
> 
> 时间：2012-06-07T13:40:30.113
> 
> 标签：php, regex

我正在尝试执行此功能：

```
 public function get_referring_domains(){
        $pattern='/<p>Referring<b>Class C subnets<\/b>: <b>(.*?)<\/b> <\/p>/';
        $result=  preg_match_all($pattern, $this->dom, $matches, PREG_SET_ORDER);
        return $result;
   } 
```

我想得到的结果是一个数字，正如你在我设置的模式中看到的那样，我想得到：([0-9]+)...但我每次都得到 0..为什么模式没有匹配？

这就是我要匹配的内容：

```
$pattern='/<p>Referring[\s]{1}<b>Class[\s]{1}C\ssubnets</b>:[\s]{1}<b>(.*?)</b>[\s]{1}</p>/i'; 
```

我明白了：

> preg_match_all() [function.preg-match-all]: 未知修饰符 'b'

```
 <p>Referring <b>Class C subnets</b>: <b>4,613</b> </p> 
```

它是 html 页面的一部分

更新。改为：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:45:58.977

您缺少一些空格，应该是这样的：

```
$pattern = '/<p>Referring <b>Class C subnets<\/b>: <b>(.*?)<\/b> <\/p>/'; 
```

另外，我真的建议使用 DOMDocument 而不是正则表达式。

阅读本文：[如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:46:08.963

引用后应该有一个空格

# php - 将参数从一个 PHP 传递到 WEB 站点

> ID：10933046
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:40:58.040
> 
> 标签：php, html, bash, post

我在我的 PHP 页面中设置了一个参数，需要将它传递给另一个 WEB SITE，以在 WEB SITE 上执行操作（我不需要得到重新结果）。我使用`header ("location : https://localhost/test=123")`但它没有执行它并显示：

```
Warning: Cannot modify header information - headers already sent by (output started at /Applications/XAMPP/xamppfiles/htdocs/script1.php:33) in /Applications/XAMPP/xamppfiles/htdocs/script1.php on line 106 
```

我怎么能简单地调用它一次？

如果 bash 文件有解决方案，也可以提供帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:46:27.663

标题功能只能在屏幕上显示任何输出之前使用。
例如：

```
 <?php
    echo( 'test' );
    header('location: www.google.com');
 ?> 
```

会因您报告的错误而失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:48:20.787

您已经输出内容以使用 header()。我会推荐：

```
$sRemotePage = file_get_contents('https://localhost/test=123'); 
```

更多信息：http: [//php.net/manual/en/function.file-get-contents.php](http://php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T13:49:34.730

您可以使用 HTTP`meta`元素设置浏览器重定向用户的位置。它需要看起来像这样：

```
<meta HTTP-EQUIV="Refresh" content="0; url=http://localhost/test=123"> 
```

where`0`是浏览器在重定向之前将等待的秒数，并且`url`是重定向的 URL。

另一种选择是使用[Output Buffering](http://www.php.net/manual/en/book.outcontrol.php)，但我不完全确定你想要做什么以及它是否可以包含`ob_`。

# php - 无限 php 循环会导致 MySQL 服务器崩溃吗？

> ID：10933048
> 
> 赞同：0
> 
> 时间：2012-06-07T13:41:02.860
> 
> 标签：php, mysql, infinite-loop

*如果我有这个`PHP`代码：*

```
<?php
  set_time_limit(0); 
  //mysql connection

  while(true)
  {
    //check for updates in mysql (mysql_query...mysql_num_rows...)
    flush(); 
    ob_flush(); 
    sleep(3);
  }

?> 
```

*我的问题：*

**这段代码不会使我的 MySQL 服务器超载吗？**

**如果我将有 1000 个用户在线，此代码不会引起问题吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:44:09.623

### 是的，它会的。它的扩展性很差。

最好**在两者之间放置一个快速层**，例如 memcached 或 redis。在 RAM 中运行的东西。

无需让*每个*用户检查数据库是否进行了更新。让一个人检查一下，并使用 fastlayer 与其他人分享结果。

当最后一个数据库查询完成时检查快速层。如果超过 3 秒前，请执行新的 db-query 并更新快速层。否则，只需从快速层中获取值。

# ruby-on-rails - 根据回形针中的样式调整missing.png的大小

> ID：10933050
> 
> 赞同：3
> 
> 时间：2012-06-07T13:41:03.283
> 
> 标签：ruby-on-rails, paperclip, ruby-on-rails-3.2

我正在使用回形针上传图片

这是我的回形针配置

```
has_attached_file :avatar, 
                    :path => ":rails_root/public/users/:id/avatar/:style/avatar.jpg",
                    :url => "/users/:id/avatar/:style/avatar.jpg",
                    :default_url => "/missing/users/:style/missing.png",
                    :styles => {"47x47" => "47x47", "228x228" => "228x228","185x176"=>"185x176","pitch_planner"=>"262x129!"},
                    :convert_options => {"47x47" => "-background black -gravity center -extent 47x47",
                      "228x228" => "-background black -gravity center -extent 228x228","185x176" => "-background black -gravity center -extent 185x176"} 
```

现在，如果我想要根据“样式”生成missing.png的调整大小图像如何在回形针中实现这一点

一种手动调整图像大小并将其存储在文件夹 pitch_planner 或您想要调整大小的任何样式的方法

可以通过回形针以编程方式完成吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:46:14.510

不使用回形针，但您可以覆盖查找默认图像的方法，如果尚不存在，则使用图像魔法创建它。

```
img = Magick::Image::read(default_image).first
img.resize_to_fit(75, 75)
img.write 'path' 
```

# android - 编辑文本键侦听器

> ID：10933056
> 
> 赞同：16
> 
> 时间：2012-06-07T13:41:32.877
> 
> 标签：android, android-edittext, keylistener

我的布局中有一个`edittext`和一个按钮，在我的代码中我设置`keyListener`为`edittext`null

```
 editText.setKeyListener(null); 
```

这样我就无法输入我的`edittext`. 现在点击我的按钮，我应该可以输入我的`ediitext`. 我怎样才能做到这一点。这是一个简单的问题，但我找不到任何解决方案。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-06T03:47:08.827

我现在可能迟到了，但是，这就是我这样做的方式：

```
public class MyActivity extends Activity
{
    private KeyListener listener;
    private EditText editText;

    public void onCreate(...)
    {
        editText = ... // Get EditText from somewhere
        listener = editText.getKeyListener(); // Save the default KeyListener!!!
        editText.setKeyListener(null); // Disable input
    }

    // When you click your button, restore the default KeyListener
    public void buttonClickHandler(...)
    {
        editText.setKeyListener(listener);
    }
} 
```

基本上，在调用之前首先保存**EditText**的默认**KeyListener**`setKeyListener(null)`。然后，当您单击按钮时，`setKeyListener`再次调用，传递您之前保存的默认侦听器。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-19T08:52:11.177

你可以使用这个：

```
// When you click your button, restore the default KeyListener
public void buttonClickHandler(...)
{
    editText.setKeyListener(new EditText(getApplicationContext()).getKeyListener());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T13:43:10.237

它在 android 中的错误 请参见此处的[错误](http://code.google.com/p/android/issues/detail?id=2771)。

但是在 xml 文件中你可以做到。使用`android:editable="false"`

```
<EditText
    android:id="@+id/editText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:editable="false" <<<<<<<
</EditText> 
```

# c# - 为什么在编写测试用例时使用自动生成的 [HostType("ASP.NET")]？

> ID：10933057
> 
> 赞同：2
> 
> 时间：2012-06-07T13:41:36.050
> 
> 标签：c#, asp.net, unit-testing, iis, testing

我熟悉 asp.net C# 单元测试框架，并且在使用自动生成的存根时很快遇到了问题。例如 VS2010 生成这个方法：

```
 [TestMethod()]
    [HostType("ASP.NET")]
    [AspNetDevelopmentServerHost("c:\\documents and settings\\ctremblay\\my documents\\visual studio 2010\\Projects\\WebApplication2\\WebApplication2", "/")]
    [UrlToTest("http://localhost:3473/")]
    public void testmeTest()
    {
        System.Diagnostics.Debugger.Break(); //FAILS here all the time
        test target = new test(); // TODO: Initialize to an appropriate value
        bool testbool = false; // TODO: Initialize to an appropriate value
        bool expected = false; // TODO: Initialize to an appropriate value
        bool actual;
        actual = target.testme(testbool);
        Assert.AreEqual(expected, actual);
        Assert.Inconclusive("Verify the correctness of this test method.");
    } 
```

基于 MSDN [http://msdn.microsoft.com/en-us/library/ms243172%28VS.80%29.aspx#DebuggingOnCassini](http://msdn.microsoft.com/en-us/library/ms243172%28VS.80%29.aspx#DebuggingOnCassini)

我应该能够添加 System.Diagnostic 方法以在 IIS 开发服务器中进行调试，但这每次都失败。这意味着除非我删除与 ASP/URL 相关的注释，否则调试是不可能的。

使用注释与完全删除它们相比，我必须获得什么？

# javascript - 文本框中的系统日期生成

> ID：10933062
> 
> 赞同：0
> 
> 时间：2012-06-07T13:41:44.677
> 
> 标签：javascript, jquery, ajax, html

我有一个日期文本框，当我单击写入此“日期”文本框的页面时，我希望自动生成系统日期。

这是我的 Div 和输入类型：

```
<div id="date_text_label"> Date </div>

<input type="text" style=" padding: 3px 0;" id="date" /> 
```

我已经尝试过了，它有效。但问题是它没有保存在数据库中。它被保存为 00-00-0000：

```
<body onload="addDate();">
    <div id="date_text_label"> Date </div>
    <input type="text" style=" padding: 3px 0;" id="date" READONLY/><br/>
</body> 
```

这是javascript代码：

```
function addDate(){
    date = new Date();             
    var month = date.getMonth()+1;
    var day = date.getDate();
    var year = date.getFullYear();

    if (document.getElementById('date').value == ''){
        document.getElementById('date').value = day + '-' + month + '-' + year;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:47:41.553

[http://jsfiddle.net/lucuma/sWyCn/](http://jsfiddle.net/lucuma/sWyCn/)

```
​$(document).ready(function() {
    $('#date_text_label').click(function() {
    $('#date').val(new Date());
    });        
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:49:48.357

很简单，你应该可以从 W3Schools 自己解决。

[http://www.w3schools.com/js/js_obj_date.asp](http://www.w3schools.com/js/js_obj_date.asp)
[http://www.w3schools.com/js/default.asp](http://www.w3schools.com/js/default.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:58:12.447

它以不正确的格式存储在您的数据库中的原因是您的日期解析器可能不理解您的日期字符串的格式。您需要像“MM-dd-YYYY”一样指定它，或者将日期作为字符串存储在数据库中（如果您想对其进行查询，这不是最好的主意）

# continuous-integration - 哈德逊的连续作业执行

> ID：10933063
> 
> 赞同：0
> 
> 时间：2012-06-07T13:41:45.033
> 
> 标签：continuous-integration, hudson

我们使用 Hudson 进行构建和部署。目前我们有四个主要工作：BUILD、DEPLOY-DEV、DEPLOY-TEST 和 DEPLOY-PROD。

BUILD 作业是参数化的，因此我们可以分配新的版本号并使用 Hudson 管理的 BUILD_NUMBER 来扩充它们。这很好用。我们还有一个默认为 false 的“nightlybuild”参数。我们的意图是仅通过另一个 Hudson 工作来设置它。

我们正在尝试创建一个自动化的 NIGHTLY-BUILD 作业，它首先使用“nightlybuild”参数集调用我们的 BUILD 作业，一旦成功，就调用 DEPLOY-DEV 作业。我们还想调用 SONAR 作业来分析代码，但对于这个问题，两步解决方案就足够了。

对于 NIGHTLY-BUILD 作业，我能弄清楚的调用参数化作业的唯一方法是“在其他项目上触发参数化构建”的构建后操作。我无法直接触发 BUILD 作业，因为“nightlybuild”默认值为 false，而且我也不想触发任何 manula 构建。我还有一个 NIGHTLY-DEPLOY，它在 NIGHTLY-BUILD 上具有“构建其他项目后构建”的构建触发器。由于这些最终都是构建后操作，因此它们同时触发而不是连续触发。

```
Started by user anonymous
Triggering a new build of BUILD #49
Triggering a new build of NIGHTLY-DEPLOY #3
Triggering a new build of NIGHTTY-SONAR #3
[DEBUG] Skipping watched dependency update; build not configured with trigger: NIGHTLY-BUILD #5
Finished: SUCCESS 
```

当我开始构建时，它会在几秒钟内完成并同时启动 BUILD 和 DEPLOY，因此在构建新版本时，正在部署旧版本。不是我想要的。

我查看并下载了“[构建管道插件](http://wiki.hudson-ci.org/display/HUDSON/Build+Pipeline+Plugin)”，但看起来它只是依赖于自动转换的相同构建后操作，并为手动转换添加了新功能。

有人对如何解决此问题有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:55:19.957

使用参数化触发器插件作为*构建步骤*，而不是构建后步骤。然后它可以选择等待下游构建完成。

注意：这适用于 Jenkins，我不能保证这个选项存在于插件的 Hudson 版本中。

# css - 具有透明度的背景精灵用 :hover 和 :active 覆盖而不是重绘

> ID：10933069
> 
> 赞同：0
> 
> 时间：2012-06-07T13:41:56.403
> 
> 标签：css, css-sprites

好的，所以这只是我正在为一个项目工作的一个测试示例（未完善）。假设您将用于导航的图像设置为元素的背景，该图像具有透明度，并且当它被更改时，图像的可见部分会减少。

我正在使用 iceweasel 10，当我这样做时，精灵的“缩小”版本仅绘制在之前的背景之上。这意味着先前的背景在较小精灵的外部仍然可见。

这可以通过为 :active 指定背景颜色以及新的图像精灵来“修复”，但是保持透明度呢？如果背景不是纯色（或已知）颜色怎么办？

这是html中[演示的问题。](http://sweetandy.net/sprites/index.html)这是用于精灵[的png 。](http://sweetandy.net/sprites/img_navsprites_hover2.png)

这是我的浏览器渲染引擎的产物，还是 CSS 的标准？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:47:06.557

您的问题是一个背景应用于`a`，而另一个背景应用于容器。设置`a`;s 背景不会清除容器的背景。代替：

```
#home{
left:0px;
width:46px;
background:url('img_navsprites_hover2.png') 0 0;
}
#home a:hover{
background: url('img_navsprites_hover2.png') 0 -45px;
}
#home a:active{
background: url('img_navsprites_hover2.png') 0 -90px;
} 
```

和

```
#home {
    left: 0px;
    width: 46px;
}
#home a { background: url('img_navsprites_hover2.png') 0 0; }
#home a:hover{ background: url('img_navsprites_hover2.png') 0 -45px; }
#home a:active { background: url('img_navsprites_hover2.png') 0 -90px; } 
```

# asp.net - asp.net 3.5 中的 500 内部服务器错误

> ID：10933072
> 
> 赞同：0
> 
> 时间：2012-06-07T13:41:58.973
> 
> 标签：asp.net, internal

我使用 ASP.Net 3.5 创建了一个应用程序。但是当我将它上传到我的服务器时，我收到“500 内部服务器错误”消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:26:49.613

如果您没有将自定义错误属性设置为任何内容或将其设置为 .ASP.Net 将显示 500 `On`。

将此添加到 web.config 以查看实际错误是什么：

```
<customErrors mode="Off" /> 
```

一旦您知道实际错误是什么，您就可以继续修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:44:20.787

这是一个非常普遍的错误。

从 IIS 日志和事件日志开始。

# iphone - 当我选择来自 UIDocumentInteractionController“presentOpenInMenuFromRect”方法的应用程序时，外部应用程序没有打开

> ID：10933080
> 
> 赞同：1
> 
> 时间：2012-06-07T13:42:26.230
> 
> 标签：iphone, ios, ipad

![在此处输入图像描述](../Images/9f95d93471539aeb87d493ce185b20a1.png)

当我从列表中选择 Dropbox 时，什么也没有发生。这是代码：

```
- (void)openIn:(NSURL *)fileFullPath {
    docController = [UIDocumentInteractionController interactionControllerWithURL:fileFullPath];
    [docController setDelegate:self];

    BOOL isOpen = [docController presentPreviewAnimated:YES];

    if (isOpen == NO) {
        BOOL isOpenIn = [docController presentOpenInMenuFromRect:CGRectMake(300, 300, 100, 100) inView:self.view animated:NO];

        if(isOpenIn == NO) {
            return ;
        }
    }
} 
```

# php - 实施用户数据修订跟踪

> ID：10933082
> 
> 赞同：0
> 
> 时间：2012-06-07T13:42:28.243
> 
> 标签：php, mysql

我使用 PHP 和 MySQL 创建了一个 Web 应用程序。我正在寻找一种实现一些用户数据跟踪的好方法。我想要它，以便当用户更改字段时，我可以显示更改，例如“John Doe 已将关闭日期从 2012 年 6 月 5 日更改为 2012 年 6 月 13 日”

我想不出一个好的，简单的方法来做到这一点。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:11:00.287

这将做你想做的事，我没有使用数据库连接，所以你可以看到这个工作与给你的工作完全一样，但是在数据库连接和数据中的子化应该很容易看出它是如何工作的。我添加了加密，以防万一您与能够在没有任何“通知”任何人的情况下更改数据中受益的人合作（从[PHP 中的简单加密中](https://stackoverflow.com/questions/327097/simple-encryption-in-php)获取）如果不需要，您可以完全省略它。本质上，它只是将数据存储在页面上的隐藏字段中，并在提交后进行比较以查看更改的内容。高温高压

```
<?php
function ecrypt($str){
  $key = "something simple";
  for($i=0; $i<strlen($str); $i++) {
     $char = substr($str, $i, 1);
     $keychar = substr($key, ($i % strlen($key))-1, 1);
     $char = chr(ord($char)+ord($keychar));
     $result.=$char;
  }
  return urlencode(base64_encode($result));
}

function decrypt($str){
  $str = base64_decode(urldecode($str));
  $result = '';
  $key = "something simple";
  for($i=0; $i<strlen($str); $i++) {
    $char = substr($str, $i, 1);
    $keychar = substr($key, ($i % strlen($key))-1, 1);
    $char = chr(ord($char)-ord($keychar));
    $result.=$char;
  }
return $result;
}

if (isset($_POST['update']) && $_POST['update']!='') {
    $data1=$_POST['data1'];
    $data2=$_POST['data2'];
    $data3=$_POST['data3'];

    $datahide1=decrypt($_POST['datahide1']);
    $datahide2=decrypt($_POST['datahide2']);
    $datahide3=decrypt($_POST['datahide3']);

    $msg='';
    if ($data1!=$datahide1) {
        $msg.="John Doe has change name from ".$datahide1." to ".$data1."<br>";
    }
    if ($data2!=$datahide2) {
        $msg.="John Doe has change price from ".$datahide2." to ".$data2."<br>";
    }
    if ($data3!=$datahide3) {
        $msg.="John Doe has change date from ".$datahide3." to ".$data3."<br>";
    }

    // do your database update here

    // do your results here
    if ($msg!="") {
        echo $msg;
    } else {
        echo "No changes";
    }
    die();
} 

// Database recordset here

// Junk data
$data1="John Doe";
$data2="25.00";
$data3="6/5/2012";

// encypted data
$datahide1=ecrypt($data1);
$datahide2=ecrypt($data2);
$datahide3=ecrypt($data3);

?>
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
</head>

<body>
<form name="form1" method="post" action="revisiontrack.php">
    <label for="data1">Name:</label>
    <input type="text" name="data1" id="data1"><input name="datahide1" type="hidden" value="<?php echo $datahide1;?>">
    <label for="data2">Price:</label>
    <input type="text" name="data2" id="data2"><input name="datahide2" type="hidden" value="<?php echo $datahide2;?>">
    <label for="data3">Date:</label>
    <input type="text" name="data3" id="data3"><input name="datahide3" type="hidden" value="<?php echo $datahide3;?>">
    <input name="update" type="hidden" id="update" value="y">
<input type="submit" name="submit" id="submit" value="Submit">
</form>
</body>
</html> 
```

# c# - 在单独的类中设置 UserControl 属性

> ID：10933083
> 
> 赞同：0
> 
> 时间：2012-06-07T13:42:40.377
> 
> 标签：c#, asp.net, user-controls

你好，所有的专业人士，

我正在使用 Visual Studio 2010，并在 c# asp.net 中编程

我有一个用户控件，我正在动态加载到我的 aspx 页面......

这是代码

```
protected void Page_Load(object sender, EventArgs e) 
{ 
    Utils u = new Utils(); 
    QueryBuilder newQRY = new QueryBuilder(); 
    string Command = "SELECT  Cast.Submit_Date, Cast.Cast_ID, Cast.Game_Frame, Cast.Race_1, Cast.Race_2, Cast.Language, Cast.Map, Cast.Serie_Name, Cast.Cast_URL, Cast.Like_Amount, Caster.Caster_LOGO, Caster.Caster_Name, Player.Player_Name, Player_1.Player_Name AS Expr1 FROM Cast INNER JOIN Caster ON Cast.Caster = Caster.Caster_ID INNER JOIN Player ON Cast.Player1 = Player.Player_ID INNER JOIN Player AS Player_1 ON Cast.Player2 = Player_1.Player_ID ORDER BY Cast.Submit_date"; 
    SqlConnection connString = u.connect("NewConnectionString"); 
    SqlDataAdapter adpWatchLaterSession = new SqlDataAdapter(Command, connString); 
    DataSet dscasts = new DataSet(); 
    adpWatchLaterSession.Fill(dscasts); 
    DataTable dt = new DataTable(); 
    string watchLaterCastsQRY = newQRY.buildCastIDrelatedtoUserQuary(); 
    adpWatchLaterSession = new SqlDataAdapter(watchLaterCastsQRY, connString); 
    adpWatchLaterSession.Fill(dt); 

    for (int i = 0; i < dscasts.Tables[0].Rows.Count; i++) 
    { 

        SearchBulletV2 sb1 = (SearchBulletV2)Page.LoadControl("SearchBulletV2.ascx"); 
        sb1.ID = "sb" + dscasts.Tables[0].Rows[i]["Cast_ID"].ToString(); 
        CheckBox cbwatchlater = new CheckBox(); 
        cbwatchlater = sb1.FindControl("cbWatchLater") as CheckBox; 
        cbwatchlater.ID = "cbWatchLater" + dscasts.Tables[0].Rows[i]["Cast_ID"].ToString(); 
        cbwatchlater.AutoPostBack = true; 

        for (int j = 0; j < dt.Rows.Count; j++) 
        { 
            if (String.Compare(dt.Rows[j][0].ToString(), dscasts.Tables[0].Rows[i]["Cast_ID"].ToString()) == 0) 
            { 
                cbwatchlater.Checked = true; 
                break; 
            } 

        } 
            cbwatchlater.CheckedChanged += new EventHandler(cbwatchlater_CheckedChanged); 
            AjaxControlToolkit.ToggleButtonExtender toggle = new AjaxControlToolkit.ToggleButtonExtender(); 
            toggle = sb1.FindControl("cbWatchLater_ToggleButtonExtender") as AjaxControlToolkit.ToggleButtonExtender; 
            toggle.TargetControlID = "cbWatchLater" + dscasts.Tables[0].Rows[i]["Cast_ID"].ToString(); 
            Image race1img = new Image(); 
            race1img = sb1.FindControl("ImageRace1") as Image; 
            race1img.ImageUrl = dscasts.Tables[0].Rows[i]["Race_1"].ToString(); 
            Image race2img = new Image(); 
            race1img = sb1.FindControl("ImageRace2") as Image; 
            race1img.ImageUrl = dscasts.Tables[0].Rows[i]["Race_2"].ToString(); 
            Image casterimg = new Image(); 
            race1img = sb1.FindControl("CasterLOGOIMG") as Image; 
            race1img.ImageUrl = dscasts.Tables[0].Rows[i]["Caster_LOGO"].ToString(); 
            Label lb = new Label(); 
            lb = sb1.FindControl("PlayerName1") as Label; 
            lb.Text = dscasts.Tables[0].Rows[i]["Player_Name"].ToString(); 
            lb = sb1.FindControl("PlayerName2") as Label; 
            lb.Text = dscasts.Tables[0].Rows[i]["Expr1"].ToString(); 
            lb = sb1.FindControl("CasterName") as Label; 
            lb.Text = dscasts.Tables[0].Rows[i]["Caster_Name"].ToString(); 
            lb = sb1.FindControl("Map") as Label; 
            lb.Text = dscasts.Tables[0].Rows[i]["Map"].ToString(); 
            lb = sb1.FindControl("GameFrame") as Label; 
            lb.Text = dscasts.Tables[0].Rows[i]["Game_Frame"].ToString(); 
            lb = sb1.FindControl("LikeAmount") as Label; 
            lb.Text = dscasts.Tables[0].Rows[i]["Like_Amount"].ToString(); 
            lb = sb1.FindControl("lblSubDate") as Label; 
            string subdate = dscasts.Tables[0].Rows[i]["Submit_date"].ToString(); 
            lb.Text = subdate.Remove(10, 9); 
            HyperLink link = new HyperLink(); 
            link = sb1.FindControl("PlayHyperLink") as HyperLink; 
            link.NavigateUrl = "ViewVideo.aspx?castername=" + dscasts.Tables[0].Rows[i]["Caster_Name"].ToString() + "&castid=" + dscasts.Tables[0].Rows[i]["Cast_ID"].ToString() + "&player1name=" + dscasts.Tables[0].Rows[i]["Player_Name"].ToString() + "&player2name=" + dscasts.Tables[0].Rows[i]["Expr1"].ToString() + "&race1=" + dscasts.Tables[0].Rows[i]["Race_1"].ToString() + "&race2=" + dscasts.Tables[0].Rows[i]["Race_2"].ToString() + "&gameframe=" + dscasts.Tables[0].Rows[i]["Game_Frame"].ToString() + "&serie=" + dscasts.Tables[0].Rows[i]["Serie_Name"].ToString() + "&map=" + dscasts.Tables[0].Rows[i]["Map"].ToString() + "&like=" + dscasts.Tables[0].Rows[i]["Like_Amount"].ToString() + "&casturl=" + dscasts.Tables[0].Rows[i]["Cast_URL"].ToString() + "?wmode=transparent" + "&casterlogo=" + dscasts.Tables[0].Rows[i]["Caster_LOGO"].ToString(); 
            HiddenField hd = new HiddenField(); 
            hd = sb1.FindControl("HiddenField1") as HiddenField; 
            hd.Value = dscasts.Tables[0].Rows[i]["Cast_ID"].ToString(); 

            UserControlPlaceHolder1.Controls.Add(sb1); 

        } 

    } 
```

如您所见，这是很多代码（至少对我而言）。我想做的就是把它全部带到某个类，在那里做，然后在 page_Load 上只放一个返回控制的方法......

我一直在想这样的事情......

```
for (int i = 0; i < dscasts.Tables[0].Rows.Count; i++) 
    { 

        SearchBulletV2 sb1 = (SearchBulletV2)Page.LoadControl("SearchBulletV2.ascx"); 

        tmpsb = someclass.initCtrlProperties(sb1); 

            UserControlPlaceHolder1.Controls.Add(tmpsb); 

        } 

    } 
```

因此，如果我有一些更改，我将不必浏览我所有的 aspx 页面并手动更改它。

我希望你明白我的想法：）

多谢，

埃利佩尔佐夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:49:12.317

您的想法是正确的，我会将其移至同一页面中的单独方法，而不是创建新类。

我再补充一点

**将此代码移动到单独的数据访问类并释放资源**

```
Utils u = new Utils(); 
QueryBuilder newQRY = new QueryBuilder(); 
string Command = "SELECT  Cast.Submit_Date, Cast.Cast_ID, Cast.Game_Frame, Cast.Race_1, Cast.Race_2, Cast.Language, Cast.Map, Cast.Serie_Name, Cast.Cast_URL, Cast.Like_Amount, Caster.Caster_LOGO, Caster.Caster_Name, Player.Player_Name, Player_1.Player_Name AS Expr1 FROM Cast INNER JOIN Caster ON Cast.Caster = Caster.Caster_ID INNER JOIN Player ON Cast.Player1 = Player.Player_ID INNER JOIN Player AS Player_1 ON Cast.Player2 = Player_1.Player_ID ORDER BY Cast.Submit_date"; 
SqlConnection connString = u.connect("NewConnectionString"); 
SqlDataAdapter adpWatchLaterSession = new SqlDataAdapter(Command, connString); 
DataSet dscasts = new DataSet(); 
adpWatchLaterSession.Fill(dscasts); 
DataTable dt = new DataTable(); 
string watchLaterCastsQRY = newQRY.buildCastIDrelatedtoUserQuary(); 
adpWatchLaterSession = new SqlDataAdapter(watchLaterCastsQRY, connString); 
adpWatchLaterSession.Fill(dt); 
```

`SqlConnection`, `SqlDataAdapter`,`SqlCommand`和`DataSet`实现`IDisposable`你应该调用 dispose 方法。

如果您使用指令，您可以自动执行此操作[`using`](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29)。例如：

```
using(var conn = new SqlConnection("connectionstring"))
{
   ....
} 
```

# css - CSS选择位于另一个元素之前的元素

> ID：10933084
> 
> 赞同：0
> 
> 时间：2012-06-07T13:42:44.123
> 
> 标签：css, css-selectors

> **可能重复：**
> [CSS :checked - 更改 <td> 背景](https://stackoverflow.com/questions/10436020/css-checked-change-td-background)
> [是否有 CSS 父选择器？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

```
 <ul class="submenu">
        <li><a href="...">Submenu 3</a></li>
        <li><a href="..." >I need to select this element</a>
            <ul class="submenu">
            <li><a href="...">Sub-submenu 3</a></li>
            <li><a href="...">I need to select this element</a>
                <ul class="submenu">
                <li><a href="...">Sub-sub-sub 1</a></li>
                <li><a href="...">Sub-sub-sub 2</a></li> 
```

基本上，我需要选择`<li>`位于( 's parent)`ul`元素之前的每个元素`class="submenu"``ul class="submenu"`

我需要选择这个元素

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:48:47.193

目前仅使用 CSS 是不可能的。该功能[目前正在规范](http://dev.w3.org/csswg/selectors4/#relational)中，但在相当长的一段时间内（如果有的话）实际上不会供公众使用。

```
 /* Only matches LIs with a UL.submenu descendant */
 li:has(> ul.submenu) {
  background:red;
 } 
```

***注意：****提供的示例根据当前的编辑草案是有效的，但语法可能会改变，或者功能可能会在浏览器供应商开始实施之前完全删除。*

*最初取自[https://stackoverflow.com/a/10436066/526741](https://stackoverflow.com/a/10436066/526741)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:50:18.587

这是不可能的。您最好的选择是使用 jQuery。这将为您提供许多选项来完成此任务。

根据下面的链接，看起来 CSS4 将能够指定您想要的元素。

[有 CSS 父选择器吗？](https://stackoverflow.com/questions/1014861/is-there-a-css-parent-selector)

# java - 获得新的长寿命 access_token 后，旧的长寿命 access_token 会起作用吗？

> ID：10933088
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:43:08.103
> 
> 标签：java, facebook-oauth, facebook-access-token

假设我有一个现有的长寿命 access_token（比如 T1）。现在，对于同一个用户，我生成了一个短暂的 access_token。在短期令牌的帮助下，我获取了新的长期访问令牌（比如 T2）。我的问题是，T1 会继续工作吗（请假设它没有过期）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:37:30.540

根据[offline_access deprecation的文档](https://developers.facebook.com/roadmap/offline-access-removal/)：

> 返回的 access_token 将有一个新的长寿命到期时间，但是，access_token 本身可能与之前授予的长寿命 access_token 相同，也可能不同。

# php - YouTube API 的频道观看次数？

> ID：10933090
> 
> 赞同：3
> 
> 时间：2012-06-07T13:43:09.657
> 
> 标签：php, json, youtube, youtube-api

我希望通过他们的 API 获得 YouTube 频道的频道观看次数。

我一直在查看文档并在谷歌上搜索，但我似乎无法找到方法。

频道视图不再显示在实际频道上，但它们显示在移动网站上（[示例](http://m.youtube.com/user/Google)），还有一些网站仍在跟踪它们（[示例](http://socialblade.com/youtube/user/google)），所以我假设它们必须通过 API 可用。

如果有人知道它们如何可用（最好用 JSON 输出），我将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T14:08:28.177

我设法为任何想知道的人弄清楚，这是使用`PHP`and `JSON`，以 Google 的 youtube 频道为例。

网址是：[http ://gdata.youtube.com/feeds/api/users/Google?alt=json](http://gdata.youtube.com/feeds/api/users/Google?alt=json)

要解析它，你会这样做：

```
$json = file_get_contents("http://gdata.youtube.com/feeds/api/users/Google?alt=json");
$data = json_decode($json, true);
echo 'Channel Views: ' . $data['entry']['yt$statistics']['viewCount']; 
```

# jquery - 使用 jquery 添加参数以发布请求

> ID：10933093
> 
> 赞同：4
> 
> 时间：2012-06-07T13:43:18.430
> 
> 标签：jquery, post

如何使用 .post 或 .ajax 向发布请求添加参数。我试过：

```
var formData = $('form').serialize();
$.ajax({
url: "url",
data: formData,
type: "POST",
dataType: "dataType"
}); 
```

但这似乎不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:47:06.283

只需在发送之前将其添加到您的 formData 中？

```
var formData = $('form').serialize();
$.ajax({
    url: "url",
    data: formData + '&param=' + param_value,
    type: "POST",
    dataType: "dataTpe"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:45:20.487

```
$.ajax({
    url: "url",
    type: "POST",
    //dataType: 'json',
    data: formData,   
    success: function(data){

    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T13:46:06.150

使用`.param`，不使用`.serialize`。前者返回一个对象，后者返回一个字符串。

[http://api.jquery.com/jQuery.param/](http://api.jquery.com/jQuery.param/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:47:17.460

```
data: $('#myForm').serialize() + "&moredata=" + morevalue 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T08:36:56.763

按照 acrashik 的回答，以下代码有效：

```
 var aData = table.fnGetData( this,0 );
     $.ajax({
         url: "MessageDetail",
         type: "POST",
         data: "messageid=" + aData,
         succes: function(data) {
            alert(data);
        }
     }); 
```

# android - 在 Android 应用程序中单击按钮时没有任何反应

> ID：10933095
> 
> 赞同：0
> 
> 时间：2012-06-07T13:43:23.907
> 
> 标签：android, sqlite, onclick

我正在使用java开发一个android应用程序。我使用 SQLite 创建了数据库。我正在尝试检查值是否已插入数据库。但是当点击注册按钮时，它应该会显示一条成功的消息。但没有任何反应，我没有收到任何错误。我检查了按钮 ID 并检查了几次代码，但我不明白为什么没有显示“成功”消息。请帮忙

```
 ---------------Class that Creates the Database------------------------------

    package com.android.disasterAlertApp;
    import android.content.*;
    import android.database.SQLException;
    import android.database.sqlite.SQLiteDatabase;
    import android.database.sqlite.SQLiteDatabase.CursorFactory;
    import android.database.sqlite.SQLiteOpenHelper;
    import android.util.*;

    public class DBAdapter {

    //Table where registration details will be saved
    public static final String KEY_USERNO = "userID";
    public static final String KEY_FIRSTNAME = "first_Name";
    public static final String KEY_LASTNAME = "last_Name";
    public static final String KEY_EMAIL = "email";
    public static final String KEY_MOBILENUMBER = "mobile_Number";
    public static final String KEY_LOCATIONUM = "locationID";

    private static final String DATABASE_NAME = "DisasterAlertDB";
    private static final int DATABASE_VERSION = 1;
    private static final String DATABASE_TABLE = "User";

    private DbHelper ourhelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase; 

    public static class DbHelper extends SQLiteOpenHelper{

    public DbHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL("CREATE TABLE" + DATABASE_TABLE + " ("+ KEY_USERNO + "INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_FIRSTNAME + "TEXT NOT NULL, " + KEY_LASTNAME + "TEXT NOT NULL, " + KEY_EMAIL + "TEXT NOT NULL, " + KEY_MOBILENUMBER + "TEXT NOT NULL, " + KEY_LOCATIONUM + "TEXT NOT NULL);");
       }

        @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL("DROP TABLE IF EXISTS" + DATABASE_TABLE);
        }

        public DBAdapter(Context c){
        ourContext = c;
    }

       public DBAdapter open() throws SQLException{
        ourhelper = new DbHelper(ourContext);
        ourDatabase = ourhelper.getWritableDatabase();
        return this; 
    }
       public void close(){
        ourhelper.close();
    }
       public long createEntry(String fname, String lname, String email,
        String number, String loc) {
    ContentValues cv = new ContentValues();
    cv.put(KEY_FIRSTNAME, fname);
    cv.put(KEY_LASTNAME, lname);
    cv.put(KEY_EMAIL, email);
    cv.put(KEY_MOBILENUMBER, number);
    cv.put(KEY_LOCATIONUM, loc);

    return ourDatabase.insert(DATABASE_TABLE, null, cv);
    }
} 
```

* * *

```
------Class that gets the values from text fields and passes them to create a record-------

    package com.android.disasterAlertApp;

    import android.app.Activity;
    import android.app.Dialog;
    import android.content.DialogInterface;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.TextView;
    import android.widget.Toast;

    public class Registration extends Activity implements OnClickListener{
        Button sqlRegister;
        EditText sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

    @Override
    protected void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        setContentView(R.layout.registration);
        sqlFirstName = (EditText) findViewById(R.id.etFname);
        sqlLastName = (EditText) findViewById(R.id.etLname);
        sqlEmail = (EditText) findViewById(R.id.etEmail);
        sqlMobileNumber = (EditText) findViewById(R.id.etPhone);
        sqlCurrentLocation = (EditText) findViewById(R.id.etCurrentLoc);
        sqlUsername = (EditText) findViewById(R.id.etUsername);
        sqlPassword = (EditText) findViewById(R.id.etPwd);

        sqlRegister = (Button) findViewById(R.id.bRegister);
        sqlRegister.setOnClickListener(this);
    }
    public void onClick(View arg0) {
        switch (arg0.getId()){
        case R.id.bRegister:
            boolean worked = true;
            try{
            String fname = sqlFirstName.getText().toString();
            String Lname = sqlLastName.getText().toString();
            String email = sqlEmail.getText().toString();
            String number = sqlMobileNumber.getText().toString();
            String loc = sqlCurrentLocation.getText().toString();
            String uname = sqlUsername.getText().toString();
            String pwd = sqlPassword.getText().toString();

            DBAdapter entry = new DBAdapter(Registration.this); 
            entry.open();
            entry.createEntry(fname,Lname,email,number,loc);
            entry.close();
            }catch(Exception e){
                worked=false;
            }finally{
                if(worked){ //Gets fired when values are inserted
                    Dialog d = new Dialog(this);
                    d.setTitle("works");
                    TextView tv = new TextView(this);
                    tv.setText("Success");
                    d.setContentView(tv);
                    d.show();
                }
            }
            break;
            }
        }

      }

 ------------------Modified OnClick Method-------------------------------

public void onClick(View arg0) {
    Toast.makeText(this, "fire", Toast.LENGTH_LONG).show();
    switch (arg0.getId()){
    case R.id.bRegister:
        boolean worked = true;
        try{
        String fname = sqlFirstName.getText().toString();
        String Lname = sqlLastName.getText().toString();
        String email = sqlEmail.getText().toString();
        String number = sqlMobileNumber.getText().toString();
        String loc = sqlCurrentLocation.getText().toString();

        DBAdapter entry = new DBAdapter(Registration.this); 
        entry.open();
        entry.createEntry(fname,Lname,email,number,loc);
        entry.close();
        }catch(Exception e){
            e.printStackTrace();
        }finally{
            if(worked){
                Dialog d = new Dialog(this);
                d.setTitle("works");
                TextView tv = new TextView(this);
                tv.setText("Success");
                d.setContentView(tv);
                d.show();
            }
        }
        break;
    }
    }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:51:34.580

您肯定会发生异常。捕获所有异常但未记录任何消息

```
}catch(Exception e){
            worked=false;
        } 
```

工作的布尔值必须为假，因此您的对话框不会显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:50:34.010

```
}catch(Exception e){
                worked=false;
            }finally{
                if(worked){ //Gets fired when values are inserted
                    Dialog d = new Dialog(this);
                    d.setTitle("works");
                    TextView tv = new TextView(this);
                    tv.setText("Success");
                    d.setContentView(tv);
                    d.show();
                }
            } 
```

从代码中可以清楚地看出，它永远不会在失败时报告错误。

第 1 点只有在工作 = true 时才会显示消息。

第 2 点

```
catch(Exception e){
                    worked=false;
                } 
```

你应该把 e.printStackTrace() 放在这里。

# java - 我可以调用超级构造函数并在 java 中传递类名吗？

> ID：10933096
> 
> 赞同：4
> 
> 时间：2012-06-07T13:43:37.367
> 
> 标签：java, class, inheritance

我有超类`Vehicle`，它的子类`Plane`和`Car`. 车辆从具有`final string name;`字段的类扩展而来，该字段只能从构造函数中设置。

我想将此字段设置为类的名称，因此 Car 的名称为 Car，Plane 的名称为 Plane，Vehicle 的名称为 Vehicle。我想到的第一件事：

```
public Vehicle() {
    super(getClass().getSimpleName()); //returns Car, Plane or Vehicle (Subclass' name)
} 
```

但这给了我错误：`Cannot refer to an instance method while explicitly invoking a constructor`。

如何仍然将`name`字段设置为类名，而无需手动将其作为字符串传递？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T13:44:44.500

你不需要这样做。

您可以`getClass().getSimpleName()`直接从基本构造函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:49:54.330

你也可以这样做

```
 //Vehicle constructor
    public Vehicle() {
        super(Vehicle.class.getSimpleName()); 
    }

    //Plane constructor
    public Plane(){
        super(Plane.class.getSimpleName());
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:25:02.823

正如编译器告诉您的那样，您不能在调用“super()”方法时调用实例方法。

但是，您可以调用静态方法。此外，在超级构造函数代码本身中，您始终可以调用“getClass()”，它将返回实际的实例类型。

```
public class A {
  public A() {
      System.out.println("class: " + getClass().getName());
  }
}

public class B extends A {
  public B() {
      super();
  }
}

new A(); --> "class: A"
new B(); --> "class: B" 
```

# php - 新建后直接调用方法？

> ID：10933098
> 
> 赞同：5
> 
> 时间：2012-06-07T13:43:50.677
> 
> 标签：php

PHP 是否允许像这样从新对象中调用方法：

```
new CEntry( new Control() )->actuate(); 
```

我可以将一个新对象作为参数传入，如`new Control()`. 但是，它似乎不喜欢 actuate() 调用。

我收到错误：

```
Parse error: syntax error, unexpected T_OBJECT_OPERATOR in /home/foo/public_html/develop/foos/source/class.CEntry.php on line 4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:44:51.923

直到 PHP 5.4，没有。在 PHP 5.3 及更早版本中，您必须使用另一个变量：

```
$obj = new CEntry( new Control() );
$obj->actuate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:45:01.003

> PHP 是否允许像这样从新对象中调用方法：

```
new CEntry( new Control() )->actuate(); 
```

它在 >= PHP 5.4 中执行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-14T03:11:43.420

对于低于 5.4 的版本，您实际上可以通过使用括号来使用此技巧：

```
(new CEntry( new Control() ))->actuate(); 
```

# batch-file - 将参数作为 1 个字符串传递给 bat 文件

> ID：10933099
> 
> 赞同：1
> 
> 时间：2012-06-07T13:43:55.530
> 
> 标签：batch-file, parameter-passing

这似乎很简单。在一个 bat 文件中，我调用了一个接受命令行参数的程序，我将参数作为一个字符串，我用 "" 尝试过它，而不是它只看到一个参数（如果猜到它命中了空格）

所以问题是我如何将字符串作为参数列表传递实际字符串在下面，并且必须使用“”等进行格式化

```
-U romeirj -P Abc123 -F C:\inetpub\wwwroot\russ\crexport\russ.rpt -O C:\inetpub\wwwroot\russ\russ.pdf -A "startdate: 01-01-2010" -A "gender:M" -A "type:PENDJUD" 
```

想从一个看起来像的 bat 文件中调用它

```
batfile.bat parmstring 
```

bat文件内容

```
program.exe %1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:34:35.097

只要所有批处理参数都应该传递给您的程序，那么您可以简单地使用您指定的参数调用您的批处理，并在批处理脚本中使用以下内容。

```
program.exe %* 
```

如果您只想将一些批处理参数传递给被调用的程序，问题就会变得更加复杂。

不幸的是，没有方法可以在带引号的字符串中转义引号。也无法转义参数分隔符。因此，不可能同时在单个批处理参数中嵌入空格和引号。

SHIFT 命令可以去掉前导参数，但`%*`总是展开到原来的参数列表；它忽略了之前的 SHIFT 操作。

FOR /F 不会忽略带引号的分隔符，因此无济于事。

简单的 FOR 可以正确解析带引号的参数列表，但它使用文件系统扩展`*`和`?`字符。这可能是个问题。

剩下要做的就是使用 GOTO 循环结合 SHIFT 来构建包含所需参数的字符串。

假设前3个参数严格用于批处理文件，其余参数将传递给被调用程序。

```
@echo off
setlocal

set "args="
:buildProgramArgs
if [%4]==[] goto :argsComplete
set args=%args% %4
shift /4
goto :buildProgramArgs

:argsComplete
program.exe %args%

::args %1 %2 and %3 are still available for batch use 
```

# header - 如何使用 SlickGrid 标题行搜索数字中的部分匹配项？

> ID：10933108
> 
> 赞同：0
> 
> 时间：2012-06-07T13:44:35.380
> 
> 标签：header, match, partial, slickgrid

我正在尝试在 SlickGrid 的标题行示例中执行部分匹配。

我在这里使用了答案： [如何在使用列级标题过滤 Slickgrid 时执行部分匹配？](https://stackoverflow.com/questions/5576844/how-to-perform-partial-matches-when-filtering-slickgrid-using-column-level-heade)

它确实对文本进行部分匹配，但不会对数字进行部分匹配。有谁知道如何在两者上进行部分匹配？我的一些列有文本，一些有数字，我希望能够按每一列进行过滤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:55:49.363

将您的数字作为文本存储在网格数据中。那么这个方法也应该适用于数字。这同样适用于布尔值和日期。

如果您想继续使用数字，您可以使用该`typeof`函数检查过滤器中的变量类型并添加一个新条件来处理数字匹配。

# javascript - GruntJs 'grunt' cmd 打开 Visual Studio？

> ID：10933111
> 
> 赞同：8
> 
> 时间：2012-06-07T13:44:49.217
> 
> 标签：javascript, build-automation, gruntjs

我已经能够在几个零问题的个人项目中使用[GruntJs 。](https://github.com/cowboy/grunt)我决定在我的工作项目中使用它。

我运行：`grunt init:gruntfile`这将创建 gruntfile 和 package.json 文件就好了。

问题是，每当我运行任何 grunt cmd`grunt`等`grunt lint`时，它都会立即打开 Visual Studio 并打开 gruntfile。实际上什么也没发生。 ![例子](../Images/686767ba8311813f0cc1368864a86422.png)

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T14:08:12.780

我没有阅读常见问题解答...

[https://github.com/gruntjs/grunt/wiki/Frequently-Asked-Questions](https://github.com/gruntjs/grunt/wiki/Frequently-Asked-Questions)

> 如果您与 grunt.js gruntfile 位于同一目录中，Windows 会在您键入 grunt 时尝试执行该文件。所以你需要输入 grunt.cmd 代替。
> 另一种方法是使用 DOSKEY 命令创建一个 grunt 宏，遵循这些指示。这将允许您使用 grunt 而不是 grunt.cmd。这是您要使用的 DOSKEY 命令：

**编辑**

或者，您可以使用以下`DOSKEY`命令：

```
DOSKEY grunt=grunt.cmd $* 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:21:06.400

另一种解决方案是简单地将 gruntfile 从 重命名`grunt.js`为 sth like`gruntfile.js`然后：

`grunt --config gruntfile.js task:target`

这样，没有`grunt.js`文件，因此`grunt`命令将调用 grunt 二进制文件，而不是尝试打开文件。

这具有不需要特定于平台的黑客的优势。但是，当然，如果您想在控制台中快速输入，则必须使用`DOSKEY`hack。

万一有人想发出咕噜声`npm`，她可以写`node node_modules/grunt/bin/grunt`而不是写`grunt`在适当的部分`package.json`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-15T10:04:31.073

我可以添加从 Visual Studio 的工具栏中调用 grunt 命令的选项吗？我最终在我的项目和解决方案中集成了许多 grunt 命令。所有特定任务。这是一个命令式意大利面条，很难保持井井有条。我为这个问题创建了一个解决方案（scratch-my-own-itch project），它是一个名为 VsCommandBuddy 的视觉 stio 扩展。它允许开发人员根据可配置的解决方案/项目指定哪些工具栏按钮应该调用哪个命令。奇迹般有效。我现在打开任何解决方案并在我的 VS ui 中显示我可以在该解决方案中使用的确切命令。看看：http: [//visualstudiogallery.msdn.microsoft.com/f5da988e-2ec1-4061-a569-46d09733c668](http://visualstudiogallery.msdn.microsoft.com/f5da988e-2ec1-4061-a569-46d09733c668)

希望能帮助到你！

# yii - CDBCriteria->选择获取所有字段而不是yii中选择中提到的字段

> ID：10933118
> 
> 赞同：2
> 
> 时间：2012-06-07T13:45:03.660
> 
> 标签：yii

提到`$criteria->select=>'id,Name'`并尝试过`$criteria->select=>array('id,Name')`，但在 exec 使用之后

```
 `$model = Person::model()->findAll( $criteria );            
         echo (CJSON::encode($model)); 
```

我可以看到它显示所有字段，而不仅仅是 id 和 name。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:09:04.377

Yii 返回的 $model 包含一个 Person 对象数组。这些 Person 对象中的每一个都只会填充它们的 id 和 Name 属性，其余的将包含空值。这就是 CActiveRecord 的工作方式 :)

# node.js - Socket.IO - 开放连接是否值得关注？

> ID：10933124
> 
> 赞同：7
> 
> 时间：2012-06-07T13:45:19.370
> 
> 标签：node.js, backbone.js, socket.io, derbyjs

我目前正在使用[DerbyJS](http://derbyjs.com/)，因为它可以促进干净、干燥的客户端/服务器代码。附带的好处（大多数人使用该框架的主要原因）是它使用 Socket.IO 来创建实时应用程序。在这种情况下，我*不需要*实时，但这是一个很好的补充。

我的问题是 - 我是否会通过使用 Socket.IO 以及它维护的所有开放连接来牺牲可扩展性/性能？由于没有打开的连接，使用 Backbone + ExpressJS 会释放资源吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-09T20:31:43.330

保持一堆打开的连接显然在服务器开销方面有一些成本，但我不会担心这样的问题，除非你有明显的扩展问题。一旦你有一个明显的扩展问题，你应该有足够的收入来购买更多的服务器资源。服务器非常便宜，您的时间非常昂贵。不要担心优化小东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T00:35:34.387

> 我是否会通过使用 Socket.IO 以及它维护的所有开放连接来牺牲可扩展性/性能？

如果您想在有新信息时立即更新您的页面（动态页面）。**然后使用非阻塞 io**保持连接打开是最有效的方法。幸运的是 node.js 确实使用了非阻塞 io。这就是 node.js 如此受欢迎的原因之一（另外，您可以使用最流行的编程语言 JavaScript 进行编码）。如果您真的不需要它（将来也是如此），因为您的网站相当静态（不像您说的那样是实时的），那么关闭连接将为您节省资源。

> 由于没有打开的连接，使用 Backbone + ExpressJS 会释放资源吗？

我会看看使用骨干网/快递组合与 derbyjs 开发网站的成本（开发时间）。

然后再次像[Nate](https://stackoverflow.com/a/10964386/11926)提到的 Socket.io 可以轻松处理许多（1000+）并发连接。**如果使用 derbyJS 更容易开发，那么我会使用它。当您跨过那条路时，您总是可以决定添加更多服务器或重新设计（可能雇用额外的程序员）您的网站以使用快速/主干组合。首先尝试以最少的努力（开发时间）让用户发现您的网站有价值。**

PS：我认为你应该尽量保持你的系统尽可能模块化，以便用最少的时间替换 Derby.js。

# android - 旋转图像时如何检测图像的哪一部分被触摸？

> ID：10933130
> 
> 赞同：3
> 
> 时间：2012-06-07T13:45:41.593
> 
> 标签：android, bitmap, touch, image-rotation

我有一个像这样的图像。我可以使用[此代码](https://stackoverflow.com/questions/4414819/android-rotating-an-imageview-with-finger-moves-other-views-around)旋转它。现在我想知道，触摸了哪种颜色，与轮子的位置无关。例如，无论车轮处于以下哪个位置，我都应该能够检测到我触摸了什么颜色……红色、黄色、绿色、蓝色、粉色或灰色。

可能吗？我该怎么做？

除了使用单张图片之外，还有其他可能性吗？（我希望避免的解决方案......）

![在此处输入图像描述](../Images/c98afb081ae2965964e0f55b1477b69b.png) 或![在此处输入图像描述](../Images/f6ed578cde5ef4a232c1c7b36c9e6527.png)或![在此处输入图像描述](../Images/6b476946da0b1e9d2885d7b929cfa6eb.png)或任何...

更新：我发布了一些颜色，因为我想更清楚，我为此找到了解决方案，但是如果我有不同的图像而不是颜色，我该怎么办。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:52:26.920

解码触摸事件的 x & y 位置，然后在 Bitmap 上调用 getPixel：http: [//developer.android.com/reference/android/graphics/Bitmap.html](http://developer.android.com/reference/android/graphics/Bitmap.html)

# javascript - 使用 HighCharts 的条形图无响应脚本和/或高响应时间

> ID：10933131
> 
> 赞同：0
> 
> 时间：2012-06-07T13:45:47.313
> 
> 标签：javascript, highcharts, bar-chart, response-time, large-data

当我尝试渲染具有大量数据点的条形图时，我遇到了一个问题。但这仅发生在 FireFox 中。10 秒后出现一个弹出窗口说脚本无响应，如果我继续，大约需要 20 秒才能显示。我已经建立了一个独立的例子[http://jsfiddle.net/tankchintan/UWB8h/5/](http://jsfiddle.net/tankchintan/UWB8h/5/)

在 Chrome 中，虽然它需要大约 5 秒，但它仍然可以毫无问题地呈现。我想知道是否有解决此问题的方法？或者我可以做些什么来缩短响应时间吗？大约有 1000 行，恕我直言，这不是那么高。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:55:19.733

你以两种方式伤害你的用户：

*   首先，他们必须等待几秒钟才能呈现页面并且整个浏览器冻结，因为 JS 引擎没有响应

*   但更重要的是，您正在伤害他们，因为您正在显示一个**包含近 1000 个水平条的条形图**！

第二点其实更重要。当然，浏览器的 JavaScript 性能各不相同（众所周知，Chrome 速度更快，但 Firefox 并没有挂在我的电脑上——但我知道你的意思）。可能有一天所有的浏览器都会很高兴地立即呈现这个图表。

但是您的用户会喜欢 10 个屏幕长的图表吗？[想象一下在一个表中](http://www.random.org/quota/list/)包含数千行的网页。直截了当 - 考虑不同的数据表示：可能在 20 个样本后截断数据并显示额外的“*其他...* ”栏？

[顺便说一句，我在jqplot](/questions/tagged/jqplot "显示标记为“jqplot”的问题")上遇到了类似的问题——我在同一页面上渲染了 10 多个简单的图表。就像您的情况一样，Firefox 尖叫着脚本运行时间过长。我通过暂停渲染一个图表来修复它。该页面就像一个魅力，更加敏感和愉快。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:55:54.103

我同意显示这么多数据点的难度。这种情况主要发生在其他类型图表中的 FF 中，在我的例子中是柱形图。

这里的不同之处在于，在大型数据集上显示趋势可能是有原因的，而 Highcharts 缩放功能使此类图表更有用。用户可以在更大的集合中发现高点和异常，并放大以查看该区域内的各个列。同样使用柱形图，整个演示文稿都在一页上。

也就是说，无响应的脚本问题仍然存在，无论这种类型的要求如何，都需要要求用户在呈现图表之前指定数据的子集。

# javascript - 用html5建表

> ID：10933132
> 
> 赞同：1
> 
> 时间：2012-06-07T13:45:56.030
> 
> 标签：javascript, jquery, html

我需要在 HTML5 中构建表格。表的要求是：

1.  允许折叠/展开

2.  突出显示选定的行

3.  鼠标悬停变化

建表的最佳方法是什么？（意味着它对用户来说看起来不错）

我需要在 jquery 中使用吗？

HTML5 中的表格有什么特别之处吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:39:41.563

虽然它不是 100% 必要的，但我会使用 jQuery 来简化和轻松跨浏览器兼容性。

要使您的行展开和折叠，您需要设置表格，以便每行下方都有一行，可以通过单击其上方的行来[切换（隐藏/显示） 。](http://api.jquery.com/toggle/)

快速搜索了[一个小 jquery 插件，它已经完成了这项工作](http://www.jankoatwarpspeed.com/post/2009/07/20/Expand-table-rows-with-jQuery-jExpand-plugin.aspx)。即使你不使用它，它也可以作为一个很好的例子。

单元格突出显示可以在 jQuery 中完成。只需让它[在单击单元格](http://api.jquery.com/click/)时[添加一个](http://api.jquery.com/addClass/)具有您想要的 CSS 属性的类。

```
$("td").toggle(function() {
     $(this).addClass("highlight-clicked");
}, function() {
     $(this).removeClass("highlight-clicked");
}); 
```

[鼠标悬停事件也可以在 jQuery 中完成](http://api.jquery.com/mouseover/)。与上面的代码非常相似。

```
$("td").hover(function() {
     $(this).addClass("highlight-hover");
}, function() {
     $(this).removeClass("highlight-hover");
}); 
```

为了更好地演示，[这是我制作的一个小 jsfiddle](http://jsfiddle.net/9jStT/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:20:00.347

```
 <input type="button" id="btnExpCol" value="Collapse" />
    <div id="divTest">
        <table id="tblTest">
            <tr>
                <th>Firstname</th>
                <th>Lastname</th>
            </tr>
            <tr class="Highlight">
                <td>Peter</td>
                <td>Griffin</td>
            </tr>
            <tr class="Highlight">
                <td>Lois</td>
                <td>Griffin</td>
            </tr>
        </table>
    </div> 
```

//================================================/ /

```
 $(document).ready(function () {
        //$('body').html('<table id="tblTest"><tr><th>Firstname</th><th>Lastname</th></tr><tr class="Highlight"><td>Peter</td><td>Griffin</td></tr><tr class="Highlight"><td>Lois</td><td>Griffin</td></tr></table>');

        $('#btnExpCol').click(function () {
            if ($(this).val() == 'Collapse') {
                $('#divTest').stop().slideUp('3000');
                $(this).val('Expand');
            } else {
                $('#divTest').stop().slideDown('3000');
                $(this).val('Collapse');
            }
        });

        //$('#tblTest').find('.Highlight').live('click', function () {
        //    $(this).toggleClass('Red');
        //});

        $('#tblTest').find('.Highlight').click(function () {
            $(this).toggleClass('Red');
        });

        $('#tblTest').find('.Highlight').live({
            mouseenter: function () {
                $(this).addClass('Blue');
            },
            mouseleave: function () {
                $(this).removeClass('Blue');
            }
        });
    }); 
```

[演示](http://jsfiddle.net/nanoquantumtech/UfMq3/)

# wordpress - 下拉菜单（选择）链接不起作用

> ID：10933139
> 
> 赞同：0
> 
> 时间：2012-06-07T13:46:17.060
> 
> 标签：wordpress, select, menu

我在我正在处理的网站上使用移动设备的选择下拉菜单，但是当我在列表中选择一个项目时，它不会将我带到相应的页面。我查看了源代码，并且 URL 都在正确的位置，所以我不确定出了什么问题。我在我的电脑和 iPhone 上都试过了。

[您可以在此处](http://andersnoren.se/wptest/)找到该页面。将其调整到 500px 以下以查看下拉菜单。我正在使用 WordPress 插件[Dropdown Menus](http://wordpress.org/extend/plugins/dropdown-menus/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:24:16.523

我没有看到任何可以提交表单的东西。它只是一个选择菜单，没有应用任何表单或 JS 来触发任何操作。像这样的东西可能会完成[PHP的工作-如何在没有按钮的情况下提交选择菜单](https://stackoverflow.com/questions/4029627/php-how-to-submit-a-select-menu-without-a-button)

# android - 2.3 崩溃应用程序中的片段

> ID：10933140
> 
> 赞同：2
> 
> 时间：2012-06-07T13:46:21.053
> 
> 标签：android, android-layout, android-fragments, android-sdk-2.3

我正在尝试使用 android.support v4 jar 在 2.2/2.3 android 项目中实现片段，但它不断崩溃并给我这个错误：

```
06-07 14:23:43.774: E/AndroidRuntime(3085): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{mike.android.ie/mike.android.ie.ActivityView}: java.lang.ClassNotFoundException: mike.android.ie.ActivityView in loader dalvik.system.PathClassLoader[/data/app/mike.android.ie-1.apk] 
```

我在代码中有其他片段，但已将其注释掉以尝试使一个片段正常工作，如果您能帮助我，我将不胜感激。

我正在使用的课程是：

**活动视图.java**

```
package mike.android.ie;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;

public class ActivityView extends FragmentActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
 }
} 
```

和**main.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:orientation="vertical">

<RelativeLayout android:layout_width="fill_parent" android:layout_height="wrap_content">

<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:name="mike.android.ie.ImageViewFragment" android:layout_width="200dip"
    android:layout_height="wrap_content" android:id="@+id/image_fragment" 
    android:layout_alignParentTop="true"

    />

</RelativeLayout> 
```

然后我有一个**ImageViewFragment.java**：

```
package mike.android.ie;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ImageView;

public class ImageViewFragment extends Fragment {

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    ImageView image = (ImageView) inflater.inflate(R.layout.imagefragment, container, false);

    return image;

}

} 
```

和**imagefragment.xml**：

```
<?xml version="1.0" encoding="utf-8"?>

<ImageView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/img"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/myimage01" /> 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<uses-sdk android:minSdkVersion="8" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ActivityView"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".ImageViewFragment" android:screenOrientation="landscape"
        android:configChanges="orientation" />
    <activity android:name=".TickerFragment" android:screenOrientation="landscape"
        android:configChanges="orientation" />
    <activity android:name=".WebViewFragment" android:screenOrientation="landscape"
        android:configChanges="orientation" />
    <activity android:name=".VideoViewFragment" android:screenOrientation="landscape"
        android:configChanges="orientation" />
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:51:53.573

错误：`mike.android.ie/mike.android.ie.ActivityView`看起来不像标准片段 compa lib。您是否包含其他任何可能导致此错误的库？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:18:38.973

在您的 main.xml 中：

```
<fragment class="mike.android.ie.ImageViewFragment" 
    android:layout_width="200dip"
    android:layout_height="wrap_content" 
    android:id="@+id/image_fragment" 
    android:layout_alignParentTop="true"
/> 
```

# xml - 将具有相同根元素的多个 XML 文件合并到一个 XML 文件中

> ID：10933142
> 
> 赞同：0
> 
> 时间：2012-06-07T13:46:25.390
> 
> 标签：xml

有人能告诉我如何将这 4 个 XML 文件合并到一个文件中吗？

*实际上，每个文件都定义了施加在名为name*的相同根元素上的约束。

我实际上想将 name 元素的所有约束合并到一个
文件中。基本上，名称元素的规则/约束应该定义为一个完整的单元（即一个文件一起定义所有约束）。

*   文件1.xml

    ```
    <name use="L"> 
    <prefix qualifier="AC">Dr.</prefix>
    <given>Margaret</given> 
    <given>Ross</given> 
    <family>Ellen</family> 
    </name> 
    ```

*   文件2.xml

    ```
    <name use="P"> 
    <given qualifier="CL">Meg</given> 
    <family>Ellen</family> 
    </name> 
    ```

*   文件3.xml

    ```
    <name use="P"> 
    <given>Margaret</given> 
    <given qualifier="BR">Josephine</given> 
    <family qualifier ="BR">Ross</family> 
    </name> 
    ```

*   文件4.xml

    ```
    <name use="P"> 
    <prefix use="AC">Dr.</prefix> 
    <given>Margaret</given> 
    <given>Josephine</given> 
    <family qualifier="BR">Ross</family> 
    </name> 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:53:24.853

考虑到您可能正在进行大量查找，我会使用某种映射数据结构。

从解析每个文件开始，将您需要的内容存储在内存中：

将“名称”存储为键，并将与其关联的任何其他元素（约束？）存储在您定义的某种类型的对象中。在读取每个文件时，您可以查找名称。如果名称存在，则更新约束。如果没有，则使用当前文件中提供的约束创建一个新对象。

# c# - Nhibernate 2：CreateQuery 不支持汉字

> ID：10933144
> 
> 赞同：1
> 
> 时间：2012-06-07T13:46:30.143
> 
> 标签：c#, nhibernate

以下是我的代码：

```
String hsql = "from Customer c where c.name='测试' ";
IQuery query = _session.CreateQuery(hsql);
query.List(); 
```

执行时不抛出异常，但不返回查询结果（应根据条件返回`c.name='测试'`）

这是为 hsql 生成的 sql NHibernate：

```
select customer0_.CUSTOMER_NO as CUSTOMER1_, customer0_.CODE as CODE9_, customer0_.NAME as NAME9_, customer0_.STATUS as STATUS9_, customer0_.LAST_OPE RATOR_NO as LAST5_9_
from CUSTOMER customer0_ where (customer0_.NAME='????') 
```

hsql中的汉字“测试”变成了“？？？？？？” 在 sql.

当我通过 Nhibernate 添加客户时，汉字保存成功。这里的问题只是当我使用 CreateQuery 搜索文本时。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:59:05.623

你能用参数试试吗？

```
String hsql = "from Customer c where c.name=:name";
IQuery query = _session.CreateQuery(hsql).SetString("name", "测试");
query.List(); 
```

休眠查询中的相关 [Unicode 字符串](https://stackoverflow.com/q/447566/40822)

# c# - 应用程序错误时的事件处理程序

> ID：10933150
> 
> 赞同：0
> 
> 时间：2012-06-07T13:46:46.627
> 
> 标签：c#, winforms, exception-handling, event-handling

当应用程序由于错误而关闭时可以处理什么事件？
谢谢

更新：我的意思是我想执行一些代码，以防由于整个应用程序中未处理的异常而出现任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:50:18.643

您可以使用`Application.ThreadException`事件。但就像其他人建议的那样，尝试在适当的位置捕获异常并为这些情况提供有意义的逻辑。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T13:55:14.533

您甚至可以在周围放置一个异常处理程序`Application.Run`：

```
using System;
using System.Windows.Forms;

namespace TestApp
{
  static class Program
  {
    [STAThread]
    static void Main()
    {
      try
      {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new MainForm());
      }
      catch (Exception exception)
      {
        MessageBox.Show(
          exception.Message +
          exception.StackTrace,
          "Error",
          MessageBoxButtons.OK,
          MessageBoxIcon.Error
        );
      }
    }
  }
} 
```

但是，我不会将其留在生产应用程序中。

# jquery - Jquery mobile，使用数字输入实现弹出窗口，加号/减号按钮

> ID：10933154
> 
> 赞同：1
> 
> 时间：2012-06-07T13:47:02.613
> 
> 标签：jquery, mobile, jquery-mobile, input, popup

我正在尝试创建一个弹出对话框，用户可以在其中输入 x 的数量（数字），带有加号和减号按钮。

经过长时间，不成功，寻找存在的解决方案。

我使用 jquery.mobile.simpledialog2.min.js。

- - - - - 编码： - - - - - - - - -

```
<script type="text/javascript">
    $(document).delegate('#inliner', 'click', function() {
        $('#inlinecontent').simpledialog2();
    });

    $(document).delegate('#amount_plus', 'click', function() {
        x = $('#prod_amount_input').val();
        x = eval(x)+1;
        $('#prod_amount_input').val(x);
        //$('#prod_amount_input').textinput('refresh');
        //$('#prod_amount_input_div').textinput('refresh');
        //$('#prod_amount_input').trigger('create');
        //$('#prod_amount_input_div').trigger('create');
        alert($('#prod_amount_input').val());

    });

    $(document).delegate('#amount_minus', 'click', function() {
        $('#inlinecontent').simpledialog2();
    });
</script>

<a href="#" id="inliner" data-role="button">Open Dialog #1</a>
<div id="inlinecontent" style="display:none" data-options='{"mode":"blank","headerText":"Amount","headerClose":false,"blankContent":true}'>
    <div class="ui-grid-b">
        <div class="ui-block-a"><a rel='' data-role='button' href='#' id="amount_plus">+</a></div>
        <div class="ui-block-c" id="prod_amount_input_div">
            <input type="number" name="number" id="prod_amount_input" value="0" >
        </div>
        <div class="ui-block-b"><a rel='' data-role='button' href='#' id="amount_minus">-</a></div>
    </div>
    <a rel='close' data-role='button' href='#'>Close</a>
</div> 
```

--------------- 代码结束 ---------------

如果我使用：

```
$('#prod_amount_input').textinput('refresh'); 
```

或者

```
$('#prod_amount_input_div').textinput('refresh'); 
```

应用程序返回 index.html 页面（从打开的页面弹出窗口）。

如果我使用：

```
$('#prod_amount_input').trigger('create');
$('#prod_amount_input_div').trigger('create'); 
```

什么都没发生。

来自：`alert($('#prod_amount_input').val());`我知道该值已更改，但输入字段中的值没有。

一些想法如何更新弹出窗口中的数字输入值？

我尝试创建的内容如下：http: [//imgur.com/q0VEF](http://imgur.com/q0VEF)

谢谢！

# android - Android蓝牙应用程序中的“未连接”

> ID：10933155
> 
> 赞同：0
> 
> 时间：2012-06-07T13:47:06.327
> 
> 标签：android, eclipse, bluetooth, emulation

我想运行一个蓝牙聊天应用程序（示例代码[在这里](http://developer.android.com/resources/samples/BluetoothChat/index.html)）。

我在 android2.2 上运行它，但它给了我：`not connected`在设备中。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if(D) Log.e(TAG, "+++ ON CREATE +++");

    // Set up the window layout
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.main);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

    // Set up the custom title
    mTitle = (TextView) findViewById(R.id.title_left_text);
    mTitle.setText(R.string.app_name);
    mTitle = (TextView) findViewById(R.id.title_right_text);

    // Get local Bluetooth adapter
    mBluetoothAdapter = BluetoothAdapter.getDefaultAdapter();

    // If the adapter is null, then Bluetooth is not supported
    if (mBluetoothAdapter == null) {
        Toast.makeText(this, "Bluetooth is not available", Toast.LENGTH_LONG).show();
        finish();
        return;
       }
    }

 @Override
 public void onStart() {
    super.onStart();
    if(D) Log.e(TAG, "++ ON START ++");

    // If BT is not on, request that it be enabled.
    // setupChat() will then be called during onActivityResult
    if (!mBluetoothAdapter.isEnabled()) {
        Intent enableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableIntent, REQUEST_ENABLE_BT);
    // Otherwise, setup the chat session
    } else {
        if (mChatService == null) setupChat();
    }
}

@Override
public synchronized void onResume() {
    super.onResume();
    if(D) Log.e(TAG, "+ ON RESUME +");

    // Performing this check in onResume() covers the case in which BT was
    // not enabled during onStart(), so we were paused to enable it...
    // onResume() will be called when ACTION_REQUEST_ENABLE activity returns.
    if (mChatService != null) {
        // Only if the state is STATE_NONE, do we know that we haven't started already
        if (mChatService.getState() == BluetoothChatService.STATE_NONE) {
          // Start the Bluetooth chat services
          mChatService.start();
        }
    }
}

private void setupChat() {
    Log.d(TAG, "setupChat()");

    // Initialize the array adapter for the conversation thread
    mConversationArrayAdapter = new ArrayAdapter<String>(this, R.layout.message);
    mConversationView = (ListView) findViewById(R.id.in);
    mConversationView.setAdapter(mConversationArrayAdapter);

    // Initialize the compose field with a listener for the return key
    mOutEditText = (EditText) findViewById(R.id.edit_text_out);
    mOutEditText.setOnEditorActionListener(mWriteListener);

    // Initialize the send button with a listener that for click events
    mSendButton = (Button) findViewById(R.id.button_send);
    mSendButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            // Send a message using content of the edit text widget
            TextView view = (TextView) findViewById(R.id.edit_text_out);
            String message = view.getText().toString();
            sendMessage(message);
        }
    });

    // Initialize the BluetoothChatService to perform bluetooth connections
    mChatService = new BluetoothChatService(this, mHandler);

    // Initialize the buffer for outgoing messages
    mOutStringBuffer = new StringBuffer("");
}

@Override
public synchronized void onPause() {
    super.onPause();
    if(D) Log.e(TAG, "- ON PAUSE -");
}

@Override
public void onStop() {
    super.onStop();
    if(D) Log.e(TAG, "-- ON STOP --");
}

@Override
public void onDestroy() {
    super.onDestroy();
    // Stop the Bluetooth chat services
    if (mChatService != null) mChatService.stop();
    if(D) Log.e(TAG, "--- ON DESTROY ---");
}

private void ensureDiscoverable() {
    if(D) Log.d(TAG, "ensure discoverable");
    if (mBluetoothAdapter.getScanMode() !=
        BluetoothAdapter.SCAN_MODE_CONNECTABLE_DISCOVERABLE) {
        Intent discoverableIntent = new Intent(BluetoothAdapter.ACTION_REQUEST_DISCOVERABLE);
        discoverableIntent.putExtra(BluetoothAdapter.EXTRA_DISCOVERABLE_DURATION, 300);
        startActivity(discoverableIntent);
    }
}

/**
 * Sends a message.
 * @param message  A string of text to send.
 */
private void sendMessage(String message) {
    // Check that we're actually connected before trying anything
    if (mChatService.getState() != BluetoothChatService.STATE_CONNECTED) {
        Toast.makeText(this, R.string.not_connected, Toast.LENGTH_SHORT).show();
        return;
    }

    // Check that there's actually something to send
    if (message.length() > 0) {
        // Get the message bytes and tell the BluetoothChatService to write
        byte[] send = message.getBytes();
        mChatService.write(send);

        // Reset out string buffer to zero and clear the edit text field
        mOutStringBuffer.setLength(0);
        mOutEditText.setText(mOutStringBuffer);
    }
}

// The action listener for the EditText widget, to listen for the return key
private TextView.OnEditorActionListener mWriteListener =
    new TextView.OnEditorActionListener() {
    public boolean onEditorAction(TextView view, int actionId, KeyEvent event) {
        // If the action is a key-up event on the return key, send the message
        if (actionId == EditorInfo.IME_NULL && event.getAction() == KeyEvent.ACTION_UP) {
            String message = view.getText().toString();
            sendMessage(message);
        }
        if(D) Log.i(TAG, "END onEditorAction");
        return true;
    }
}; 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:32:17.707

问题是模拟器不支持蓝牙。我面临同样的问题，必须在真实设备上测试所有蓝牙东西:-(

# java - 在android中使用soap webservices的mysql数据库连接

> ID：10933163
> 
> 赞同：4
> 
> 时间：2012-06-07T13:47:26.447
> 
> 标签：java, android, mysql, soap

我正在开发一个连接到 Mysql 数据库的 Android 应用程序，该数据库也使用 SOAP Web 服务

当我在 Android 模拟器上运行我的应用程序时，我看到以下消息。消息是 [Ljava.lang.String;@44f565fo 。

我想了解为什么我会收到此消息。

这是我的 Java Web 服务代码：

```
package com.retailer.ws;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.PreparedStatement;
public class RetailerWS {
  public String customerData(){
  String customerInfo = "";
  try{
    Class.forName("com.mysql.jdbc.Driver");
    Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/retailer","root","chathura");
    //Find customer information where the customer ID is maximum
    PreparedStatement statement
          =  con.prepareStatement("SELECT * FROM customers WHERE C_ID = (SELECT MAX(C_ID) FROM customer)");
    ResultSet result = statement.executeQuery();

    while(result.next()){
      customerInfo = customerInfo
                      + result.getString("name")
                      + "&" + result.getString("C_ID") 
                      + "&"+result.getString("address") 
                      + "&"+result.getString("email");
      // Here "&"s are added to the return string. 
      // This is help to split the string in Android application
    }
  } catch(Exception exc){
    System.out.println(exc.getMessage());
  }
    return customerInfo;
 }
} 
```

这是Android应用程序的代码

```
package com.retailer.client;

import android.app.Activity;
import android.os.Bundle;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.widget.TextView;

public class RetailerActivity extends Activity {
  private static final String SOAP_ACTION = "http://ws.retailer.com/customerData";
  private static final String METHOD_NAME = "customerData";
  private static final String NAMESPACE = "http://ws.retailer.com/";
  private static final String URL = "http://175.157.234.156:8085/ForBlog/services/RetailerWS?wsdl";
  @Override
  public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);
     SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
     SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

     envelope.setOutputSoapObject(request);

     HttpTransportSE ht = new HttpTransportSE(URL);
     try {
         ht.call(SOAP_ACTION, envelope);
         SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
         SoapPrimitive s = response;
         String str = s.toString();
         String resultArr[] = str.split("&");//Result string will split & store in an array

         TextView tv = new TextView(this);

         for(int i = 0; i<resultArr.length;i++){
           tv.append(resultArr[i]+"\n\n");
         }
         setContentView(tv);
     } catch (Exception e) {
        e.printStackTrace();
    }
   }
  } 
```

主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/hello" />

</LinearLayout> 
```

Android 清单文件也启用了 Internet 权限。

那么为什么我会看到 [Ljava.lang.String;@44f565fo dis 消息？

这是我的 logcat 窗口：

```
05-23 14:15:10.371: D/AndroidRuntime(3876): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
05-23 14:15:10.371: D/AndroidRuntime(3876): CheckJNI is ON
05-23 14:15:10.520: D/AndroidRuntime(3876): --- registering native functions ---
05-23 14:15:11.191: D/dalvikvm(179): GC_EXPLICIT freed 133 objects / 6720 bytes in 52ms
05-23 14:15:11.231: D/PackageParser(71): Scanning package: /data/app/vmdl70326.tmp
05-23 14:15:11.241: W/PackageParser(71): Unknown element under <application>: uses-permission at /data/app/vmdl70326.tmp Binary XML file line #21
05-23 14:15:11.341: I/PackageManager(71): Removing non-system package:com.retailer.client
05-23 14:15:11.341: I/ActivityManager(71): Force stopping package com.retailer.client uid=10040
05-23 14:15:11.361: I/Process(71): Sending signal. PID: 3868 SIG: 9
05-23 14:15:11.381: I/WindowManager(71): WIN DEATH: Window{44fbd530 com.retailer.client/com.retailer.client.RetailerActivity paused=false}
05-23 14:15:11.401: I/UsageStats(71): Unexpected resume of pack.GetImage while already resumed in com.retailer.client
05-23 14:15:11.421: W/InputManagerService(71): Got RemoteException sending setActive(false) notification to pid 3868 uid 10040
05-23 14:15:11.810: D/PackageManager(71): Scanning package com.retailer.client
05-23 14:15:11.810: I/PackageManager(71): Package com.retailer.client codePath changed from /data/app/com.retailer.client-2.apk to /data/app/com.retailer.client-1.apk; Retaining data and using new
05-23 14:15:11.810: I/PackageManager(71): /data/app/com.retailer.client-1.apk changed; unpacking
05-23 14:15:11.820: D/installd(35): DexInv: --- BEGIN '/data/app/com.retailer.client-1.apk' ---
05-23 14:15:12.000: D/dalvikvm(3883): DexOpt: 'Lorg/xmlpull/v1/XmlPullParser;' has an earlier definition; blocking out
05-23 14:15:12.000: D/dalvikvm(3883): DexOpt: 'Lorg/kxml2/io/KXmlParser;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/xmlpull/v1/XmlSerializer;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/kxml2/io/KXmlSerializer;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/kxml2/kdom/Node;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/kxml2/kdom/Document;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/kxml2/kdom/Element;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/xmlpull/v1/XmlPullParserException;' has an earlier definition; blocking out
05-23 14:15:12.010: D/dalvikvm(3883): DexOpt: 'Lorg/xmlpull/v1/XmlPullParserFactory;' has an earlier definition; blocking out
05-23 14:15:12.111: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.111: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.111: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.111: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.111: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.111: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.121: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.131: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParser;'
05-23 14:15:12.131: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/kxml2/io/KXmlSerializer;'
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlPullParser;': multiple definitions
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/kxml2/io/KXmlParser;': multiple definitions
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlSerializer;': multiple definitions
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/kxml2/io/KXmlSerializer;': multiple definitions
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/kxml2/kdom/Node;': multiple definitions
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/kxml2/kdom/Document;': multiple definitions
05-23 14:15:12.141: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/kxml2/kdom/Element;': multiple definitions
05-23 14:15:12.141: I/dalvikvm(3883): DexOpt: not resolving ambiguous class 'Lorg/xmlpull/v1/XmlPullParserException;'
05-23 14:15:12.161: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlPullParserException;': multiple definitions
05-23 14:15:12.161: D/dalvikvm(3883): DexOpt: not verifying 'Lorg/xmlpull/v1/XmlPullParserFactory;': multiple definitions
05-23 14:15:12.171: D/dalvikvm(3883): DexOpt: load 53ms, verify 150ms, opt 7ms
05-23 14:15:12.181: D/installd(35): DexInv: --- END '/data/app/com.retailer.client-1.apk' (success) ---
05-23 14:15:12.191: W/PackageManager(71): Code path for pkg : com.retailer.client changing from /data/app/com.retailer.client-2.apk to /data/app/com.retailer.client-1.apk
05-23 14:15:12.191: W/PackageManager(71): Resource path for pkg : com.retailer.client changing from /data/app/com.retailer.client-2.apk to /data/app/com.retailer.client-1.apk
05-23 14:15:12.191: D/PackageManager(71):   Activities: com.retailer.client.RetailerActivity
05-23 14:15:12.201: I/ActivityManager(71): Force stopping package com.retailer.client uid=10040
05-23 14:15:12.331: I/installd(35): move /data/dalvik-cache/data@app@com.retailer.client-1.apk@classes.dex -> /data/dalvik-cache/data@app@com.retailer.client-1.apk@classes.dex
05-23 14:15:12.331: D/PackageManager(71): New package installed in /data/app/com.retailer.client-1.apk
05-23 14:15:12.490: I/ActivityManager(71): Force stopping package com.retailer.client uid=10040
05-23 14:15:12.630: D/dalvikvm(71): GC_EXPLICIT freed 7314 objects / 513320 bytes in 113ms
05-23 14:15:12.890: D/dalvikvm(71): GC_EXPLICIT freed 2977 objects / 155072 bytes in 101ms
05-23 14:15:12.890: D/dalvikvm(190): GC_EXPLICIT freed 878 objects / 50848 bytes in 197ms
05-23 14:15:12.950: W/RecognitionManagerService(71): no available voice recognition services found
05-23 14:15:13.081: I/installd(35): unlink /data/dalvik-cache/data@app@com.retailer.client-2.apk@classes.dex
05-23 14:15:13.100: D/AndroidRuntime(3876): Shutting down VM
05-23 14:15:13.100: D/dalvikvm(3876): Debugger has detached; object registry had 1 entries
05-23 14:15:13.131: I/dalvikvm(3876): JNI: AttachCurrentThread (from ???.???)
05-23 14:15:13.131: I/AndroidRuntime(3876): NOTE: attach of thread 'Binder Thread #3' failed
05-23 14:15:13.530: D/AndroidRuntime(3889): >>>>>>>>>>>>>> AndroidRuntime START <<<<<<<<<<<<<<
05-23 14:15:13.530: D/AndroidRuntime(3889): CheckJNI is ON
05-23 14:15:13.670: D/AndroidRuntime(3889): --- registering native functions ---
05-23 14:15:14.271: I/ActivityManager(71): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=com.retailer.client/.RetailerActivity }
05-23 14:15:14.301: I/ActivityManager(71): Start proc com.retailer.client for activity com.retailer.client/.RetailerActivity: pid=3895 uid=10040 gids={}
05-23 14:15:14.331: D/AndroidRuntime(3889): Shutting down VM
05-23 14:15:14.341: D/dalvikvm(3889): Debugger has detached; object registry had 1 entries
05-23 14:15:14.381: I/dalvikvm(3889): JNI: AttachCurrentThread (from ???.???)
05-23 14:15:14.381: I/AndroidRuntime(3889): NOTE: attach of thread 'Binder Thread #3' failed
05-23 14:15:14.500: D/dalvikvm(33): GC_EXPLICIT freed 259 objects / 10016 bytes in 189ms
05-23 14:15:14.630: D/dalvikvm(33): GC_EXPLICIT freed 17 objects / 712 bytes in 96ms
05-23 14:15:14.840: D/dalvikvm(33): GC_EXPLICIT freed 2 objects / 48 bytes in 214ms
05-23 14:15:15.020: W/System.err(3895): java.net.SocketException: Permission denied
05-23 14:15:15.020: W/System.err(3895):     at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocketImpl(Native Method)
05-23 14:15:15.030: W/System.err(3895):     at org.apache.harmony.luni.platform.OSNetworkSystem.createStreamSocket(OSNetworkSystem.java:186)
05-23 14:15:15.030: W/System.err(3895):     at org.apache.harmony.luni.net.PlainSocketImpl.create(PlainSocketImpl.java:265)
05-23 14:15:15.030: W/System.err(3895):     at java.net.Socket.checkClosedAndCreate(Socket.java:873)
05-23 14:15:15.030: W/System.err(3895):     at java.net.Socket.connect(Socket.java:1020)
05-23 14:15:15.030: W/System.err(3895):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
05-23 14:15:15.030: W/System.err(3895):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:88)
05-23 14:15:15.030: W/System.err(3895):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHTTPConnection(HttpURLConnectionImpl.java:927)
05-23 14:15:15.030: W/System.err(3895):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:909)
05-23 14:15:15.040: W/System.err(3895):     at org.ksoap2.transport.ServiceConnectionSE.connect(ServiceConnectionSE.java:46)
05-23 14:15:15.040: W/System.err(3895):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:68)
05-23 14:15:15.040: W/System.err(3895):     at com.retailer.client.RetailerActivity.onCreate(RetailerActivity.java:31)
05-23 14:15:15.040: W/System.err(3895):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-23 14:15:15.040: W/System.err(3895):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-23 14:15:15.040: W/System.err(3895):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-23 14:15:15.040: W/System.err(3895):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-23 14:15:15.040: W/System.err(3895):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-23 14:15:15.040: W/System.err(3895):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-23 14:15:15.040: W/System.err(3895):     at android.os.Looper.loop(Looper.java:123)
05-23 14:15:15.040: W/System.err(3895):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-23 14:15:15.050: W/System.err(3895):     at java.lang.reflect.Method.invokeNative(Native Method)
05-23 14:15:15.050: W/System.err(3895):     at java.lang.reflect.Method.invoke(Method.java:521)
05-23 14:15:15.050: W/System.err(3895):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-23 14:15:15.050: W/System.err(3895):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-23 14:15:15.050: W/System.err(3895):     at dalvik.system.NativeStart.main(Native Method)
05-23 14:15:15.241: I/ActivityManager(71): Displayed activity com.retailer.client/.RetailerActivity: 945 ms (total 945 ms)
05-23 14:15:15.421: W/InputManagerService(71): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@44eb2660 (uid=10049 pid=3808) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:06:25.597

错误在这里

```
W/System.err(3895): java.net.SocketException: Permission denied 
```

[http://docs.oracle.com/javase/1.4.2/docs/api/java/net/SocketException.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/SocketException.html)

向下读取调用堆栈的跟踪

```
14:15:15.040: W/System.err(3895): 
at com.retailer.client.RetailerActivity.onCreate(RetailerActivity.java:31 
```

表示执行时出现权限问题

```
ht.call(SOAP_ACTION, envelope); 
```

[SocketException：权限被拒绝？](https://stackoverflow.com/questions/7122325/socketexception-permission-denied)

使用另一个 Web 服务测试工具（如[SoapUi）](http://www.soapui.org)来查看您是否可以从运行模拟器的机器建立到该 Web 服务的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:00:11.037

可能是因为您正在使用该方法，所以您看到了该值`TextView.append()`。

如果你查看[这个类](http://developer.android.com/reference/android/widget/TextView.html)的文档，你会看到字符串被转换成 Charsequence.class，然后你又得到了一个字符数组……所以你打印的只是数组实例的值。它可能只使用以下方法将数组转换为字符串`.toString()`：

```
setContentView(tv.toString()); 
```

# php - 检查电脑是否开机

> ID：10933170
> 
> 赞同：2
> 
> 时间：2012-06-07T13:47:51.710
> 
> 标签：php, windows, remote-access, remote-management

我已经编写了一个简单的 php 页面，它也向我的几台运行 Windows 7 的计算机发送 LAN 唤醒数据包。

**如何检查计算机是否已开机（假设该位置的互联网可以正常工作）？**

我可以在加载页面以检查响应时如何 ping 计算机吗？

附加信息：这些计算机都位于不同的位置，它们为 IP 设置了动态 dns，并且都位于与其他计算机一起的路由器后面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:55:55.860

> 我可以通过 Windows RDC 远程桌面所有计算机，我为它们打开了端口 3389 以及一个单独的 WOL 端口，因此它们有两个开放端口

然后尝试打开远程桌面会话？

```
<?php
$timeout = 10;
$socket = @fsockopen( 'ip-of-the-client', 3389, $errno, $errstr, $timeout );
$online = ( $socket !== false );

var_dump( $online ); 
```

代码中的`@`是因为 fsockopen 在无法建立连接时会抛出 PHP 警告。

**编辑**：为了清楚起见；3389 是用于创建远程桌面连接的默认端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:56:00.340

关于这一点：

> 我可以通过 Windows RDC 远程桌面所有计算机，我为它们打开了端口 3389 以及一个单独的 WOL 端口，因此它们有两个开放端口。

由于 RDP 已打开，您最好的选择（除了可能被阻止的 ICMP ping）可能是打开一个到端口 3389 的 TCP 套接字，这将确认计算机在线并完全启动（即 RDP 服务正在运行） .

只需使用 fsockopen 执行此操作，如下所示：

```
function ServiceOnline($ip, $port = 3389) {
    $rdp_sock = @fsockopen($ip, $port, null, null, 5); // 5 sec timeout so that it doesn't hang for a whole minute if not available
    if (!$rdp_sock) {
        return false;
    } else {
        fclose($rdp_sock);
        return true;
    }
} 
```

如果另一个服务可用作备用服务，您也可以使用此代码，例如，通过传入`$port`参数。

# google-maps-api-3 - 将现有标记添加到新的折线叠加层

> ID：10933172
> 
> 赞同：1
> 
> 时间：2012-06-07T13:48:03.003
> 
> 标签：google-maps-api-3, event-handling, google-polyline

给定 Google 地图视图上的一组现有标记位置，如何将这些点添加到折线叠加层？

我正在构建一个网络旅游应用程序，用户可以在其中根据通过 AJAX 调用检索到的一组 GPS 坐标来选择停靠点。这部分工作正常，因为所有点都显示在地图上。

我的问题是我只想将标记位置添加到折线。目前，选定的点被添加到 tourList 数组中，该数组被转换为 JSON 数组并通过 jquery ajax post 调用发布。所以我知道点击事件处理程序正在为一部分工作。

[这个问题](https://stackoverflow.com/questions/2698112/how-to-add-markers-on-google-maps-polylines-based-on-distance-along-the-line)几乎符合我的需要，除了它是为 Maps API v2 设计的，而且我正在使用 V3。

到目前为止我得到了什么：

```
//page-specific global variables
var visitPoints = new google.maps.MVCArray();
var polyLine;
var map;

window.onload= function(){
  //set initial map location
  map = new google.maps.Map(
    document.getElementById("map"), mapOptions);    

  //set up polyline capability
  var polyOptions = new google.maps.Polyline({
    path: visitPoints,
    map: map
  });

  polyLine = new google.maps.Polyline(polyOptions);
  polyLine.setMap(map); 

  //get all the GPS locations in the database  This function and makeMarkers works 
  //as designed
  var request = $.ajax({
    type:"GET",
    url: "includes/phpscripts.php?action=cords",
    dataType:"json",
    success: makeMarkers
  });

  //Populate the map view with the locations and save tour stops in array
  function makeMarkers(response){
    console.log("Response Length: "+response.length)
    for (var i=0; i< response.length; i++){
      var marker= new google.maps.Marker({
        position: new google.maps.LatLng(response[i].lat, response[i].lon),
        map: map,
        title: response[i].fileName
      });

      //anonymous function wrapper to create distinct markers
      (function(marker){
        google.maps.event.addListener(marker, 'click', function(){

          tourList.push(marker); //add marker to tour list
          visitPoints.push(marker.latlng); //add location to polyline array
          console.log("Tour List length- # stops: "+tourList.length);

        });
      })(marker);    
    }
  }

  //listener for poline click
  google.maps.event.addListener(map, 'click', updatePolyline)

} //end onload function

//updates the polyline user selections
function updatePolyline(event){
  var path = polyLine.getPath();
  path.push(event.latlng);
} //end updatePolyline 
```

目前，我在 Firebug 中没有收到任何脚本警告，但从未调用 updatePolyline 函数。

我是否需要在标记侦听器中添加侦听器来更新折线？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:58:19.567

您写了*“我只想将标记位置添加到折线”，*尽管设置代码的方式是，每次单击标记或单击地图的空白部分时，折线都会添加一个新顶点。对于要自行更新的折线，它必须在侦听器之外。

有两个地方需要改，

```
 visitPoints.push(marker.latlng); 
```

到`marker.getPosition()`

`event.latlng`接近尾声（Lng 的大写`event.latLng`L）。

我在测试时遇到了一些困难。文档描述了将 MVCArray 分配给折线路径时的自动更新；但是，折线似乎不喜欢未初始化的 MVCArray（空访问点）。当我单击标记时，没有发生自动更新。

只有当我使用初始 LatLng 设置它时，它才能按预期工作，但我最终放弃了 visitPoints，因为不知道第一个点在哪里。我想最好的方法是在 Ajax 返回时使用 MVCArray visitPoints 初始化折线。下面的演示使用`getPath, push`而不是 visitPoints。

**DEMO** [http://jsfiddle.net/yV6xv/8/](http://jsfiddle.net/yV6xv/8/)（点击标记或地图进行线路更新）

一个肮脏的 hack 被`visitPoints`初始化，所以其余的代码按预期运行，加上对 marker.latlng 和 event.latlng 的一些小改动。第一次单击将定义线的第一个点，随后的单击将延长线。

^(肯定有更好的办法)

**演示** [http://jsfiddle.net/yV6xv/9/](http://jsfiddle.net/yV6xv/9/)

```
//page-specific global variables
var visitPoints = new google.maps.MVCArray();
var polyLine;
var map;

// REDEFINING mapOptions and tourList
var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP};
var tourList = [];

window.onload= function(){
  //set initial map location
  map = new google.maps.Map(
    document.getElementById("map"), mapOptions);    

  //initialization hack
  visitPoints.push(new google.maps.LatLng(0,0));

  //set up polyline capability
  var polyOptions = new google.maps.Polyline({
    path: visitPoints,
    map: map
  });

  //complete initialization hack
  visitPoints.pop();

  polyLine = new google.maps.Polyline(polyOptions);
  polyLine.setMap(map); 

  //get all the GPS locations in the database  This function and makeMarkers works 

/* TEMPORARY COMMENTING OUT
  //as designed
  var request = $.ajax({
    type:"GET",
    url: "includes/phpscripts.php?action=cords",
    dataType:"json",
    success: makeMarkers
  });
*/

makeMarkers([{lat:0, lon:0},{lat:10, lon:10},{lat:15, lon:20},{lat:20, lon:30}]);

  //Populate the map view with the locations and save tour stops in array
  function makeMarkers(response){
    console.log("Response Length: "+response.length)
    for (var i=0; i< response.length; i++){
      var marker= new google.maps.Marker({
        position: new google.maps.LatLng(response[i].lat, response[i].lon),
        map: map,
        title: response[i].fileName
      });

      //anonymous function wrapper to create distinct markers
      (function(marker){
        google.maps.event.addListener(marker, 'click', function(){

          tourList.push(marker); //add marker to tour list
          visitPoints.push(marker.getPosition()); //add location to polyline array
          console.log("Tour List length- # stops: "+tourList.length);

        });
      })(marker);    
    }
  }

  //listener for poline click
  google.maps.event.addListener(map, 'click', updatePolyline)

} //end onload function

//updates the polyline user selections
function updatePolyline(event){
  var path = polyLine.getPath();
  path.push(event.latLng);
} //end updatePolyline 
```

# git - 如何制作水平可扩展的 Git 解决方案

> ID：10933174
> 
> 赞同：1
> 
> 时间：2012-06-07T13:48:16.747
> 
> 标签：git, ubuntu, scalability, horizontal-scaling

所以我已经成功建立了自己的 git 服务器。关于它的一点背景是：

服务器：Ubuntu Git 服务：Gitolite Web 界面：GitWeb

现在要在这个服务器上添加一堆项目，我的 10gig 实例很容易用完。我的问题是，由于 git 将所有文件都存储在文件系统上，我现在如何进行水平扩展？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:31:31.690

由于所有存储库（项目）都是独立的，因此显而易见的解决方案似乎是在多个后端服务器之间划分存储库。

当然，还有很多事情要做。[有关更多详细信息，请在https://github.com/blog/530-how-we-made-github-fast](https://github.com/blog/530-how-we-made-github-fast)查看 github 的工作原理。如果 github 是地球上最大的 git 托管平台，我不会感到惊讶，因此，如果您采用类似于他们的方法的方法，我猜您不太可能遇到可伸缩性问题。

（不，我还不会担心那个 10gig 网络连接（？）..）

# android - 新构建的 Android 应用程序构建但在启动时崩溃

> ID：10933177
> 
> 赞同：0
> 
> 时间：2012-06-07T13:48:20.407
> 
> 标签：android, eclipse, opencv, dalvik

我的应用程序很大程度上基于 OpenCV 示例（带摄像头的示例 2）链接到 OpenCV 2.4.0。经过一个月左右的无故障工作后，我突然遇到了可怕的[“Dalvik error 1”](https://stackoverflow.com/questions/2680827/conversion-to-dalvik-format-failed-with-error-1-on-external-jar "达尔维克错误 1")问题。当通常的修复不起作用时，我决定使用相同的源文件从头开始构建一个新项目，希望能解决问题......

它可以构建，但在启动时崩溃。这是控制台内容：

```
06-07 14:01:01.383: D/dalvikvm(20915): Trying to load lib /data/data/barry.opencvdemo/lib/libopencv_java.so 0x4051c988
06-07 14:01:02.204: D/dalvikvm(20915): Added shared lib /data/data/barry.opencvdemo/lib/libopencv_java.so 0x4051c988
06-07 14:01:02.354: D/AndroidRuntime(20915): Shutting down VM
06-07 14:01:02.354: W/dalvikvm(20915): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0)
06-07 14:01:02.374: E/AndroidRuntime(20915): FATAL EXCEPTION: main
06-07 14:01:02.374: E/AndroidRuntime(20915): java.lang.RuntimeException: Unable to start activity ComponentInfo{barry.opencvdemo/barry.opencvdemo.Sample2NativeCamera}: java.lang.NullPointerException
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1872)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.os.Looper.loop(Looper.java:150)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.ActivityThread.main(ActivityThread.java:4385)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at java.lang.reflect.Method.invokeNative(Native Method)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at java.lang.reflect.Method.invoke(Method.java:507)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at dalvik.system.NativeStart.main(Native Method)
06-07 14:01:02.374: E/AndroidRuntime(20915): Caused by: java.lang.NullPointerException
06-07 14:01:02.374: E/AndroidRuntime(20915):    at barry.opencvdemo.Sample2NativeCamera.onCreate(Sample2NativeCamera.java:47)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
06-07 14:01:02.374: E/AndroidRuntime(20915):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
06-07 14:01:02.374: E/AndroidRuntime(20915):    ... 11 more 
```

一切似乎都在正确的位置和正确的名称，但有些东西不起作用。以上内容是否足以让某人指出我遗漏的一些明显的东西，或者我应该发布一些源代码？代码本身*正在*工作......这是关于构建的设置或我担心的链接。

当众神对整个 Dalvik Error 1 业务采取行动时，我会非常高兴。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:29:57.020

`try catch block`在代码周围放置`onCreate`a 并在 catch 中放置一个断点。您将捕获异常。从异常日志看来，您正在使用尚未初始化的对象/变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:47:56.200

当您的应用遇到意外错误并且不知道如何响应时，就会发生这种情况。正如之前所说，您可以用 try/catch 块包围部分代码。

而且：`06-07 14:01:02.374: E/AndroidRuntime(20915): java.lang.RuntimeException: Unable to start activity ComponentInfo{barry.opencvdemo/barry.opencvdemo.Sample2NativeCamera}: java.lang.NullPointerException`

这是解决您遇到的问题的线索。NullPointerException 意味着一个类在某处期待一个对象，但得到了一个空值。

您可以尝试使用 try/catch 包围与它相关的代码部分，或者只是放置一些 System.out.println() 以查看运行停止工作的位置。

希望这可以帮助！

# android - getWindow().setBackgroundDrawableResource(int resid) 方法在 onCreate() 之外不起作用

> ID：10933179
> 
> 赞同：3
> 
> 时间：2012-06-07T13:48:25.820
> 
> 标签：android

这是我的应用程序的简短草图

```
...
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.start);

    ... //at this place, getWindow().setBackgroundDrawableResource(int resid)
        //would work perfectly

    mainView();

}

void mainView() {
   setContentView(R.layout.main);

   ...

   if (...) {
     getWindow().setBackgroundDrawableResource(R.drawable.anyDrawable);
   }

   ...

} 
```

但是在 mainView() 中，该方法不会产生任何影响。并且没有抛出异常。

main.xml 已经定义了背景图像，但 start.xml 没有这样做。这会导致我的问题吗？

或者我可以用其他方式更改背景图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:55:47.590

PS你不能再设置一次内容视图，你应该做的是在布局中让父视图具有像main这样的ID，然后使用

```
findViewById(R.id.main).setBackgroundDrawableResource(R.drawable.anyDrawable); 
```

并且在 xml 布局中，您需要设置要设置的视图的 id（这应该是最顶层的视图）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="16dip" 
    android:id="@+id/main"></LinearLayout> 
```

将 id 添加到视图后，您需要保存布局并构建项目

如果您想发布您的 xml 代码以及布局的名称，我可以为您写更多

# ios - 通过 ios SDK 使用 youtube 而不是 facebook 上的图片

> ID：10933183
> 
> 赞同：1
> 
> 时间：2012-06-07T13:48:27.297
> 
> 标签：ios, facebook, facebook-graph-api

是否可以修改以下标准代码以通过 ios 发布 facebook 提要以使用 youtube 剪辑而不是图片？就像一个人通过浏览器在他/她的墙上发布一个 youtube 链接一样，您可以在不离开页面的情况下单击并查看视频。如果可能的话，我仍然想保留一个不是 youtube 视频链接的单独链接。

尝试搜索，但似乎没有太多关于通过 SDK 发布 youtube 视频的问题...提前非常感谢！

```
NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"http://www.somedomain.com/pic.png", @"picture",
                                   @"http://www.somedomain.com", @"link",
                                   @"Post Name", @"name",
                                   @"Post Caption", @"caption",
                                   @"Message", @"description",
                                   nil];

[facebook dialog:@"feed" andParams:params andDelegate:self] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:25:18.707

弄清楚了。在“源”中添加视频链接（注意直接链接到 swf 的 url 的格式）。还发现了一个艰难的方法（在对话框中出现错误），对于 Flash 视频，“图片”也需要包含在内，这里使用的 url 是 youtube 视频的通用图片。

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   @"__MY_APP_ID__", @"app_id",
                                   @"http://google.com", @"link",
                                   @"http://www.youtube.com/v/hpP7wvMqGYU", @"source",
                                   @"http://img.youtube.com/vi/hpP7wvMqGYU/0.jpg", @"picture",
                                   @"myName", @"name",
                                   @"myCaption", @"caption",
                                   @"myDescription", @"description",
                                   nil];

    [facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:03:17.513

我在 SO 上发现了这个问题。这是你要找的吗？

```
 NSString *video_link = @"http://www.youtube.com/v/#####";
    NSString *image_link = @"http://i.ytimg.com/vi/#####/2.jpg";

    NSDictionary *video_share = [NSDictionary dictionaryWithObjectsAndKeys:
                                 @"flash",      @"type",
                                 video_link,    @"swfsrc",
                                 image_link,    @"imgsrc",
                                 @"100",        @"width",
                                 @"80",         @"height",
                                 @"400",        @"expanded_width",
                                 @"320",        @"expanded_height",
                                 nil]; 
```

[使用 Facebook-SDK 发布的视频未在 iPhone facebook 应用程序中播放](https://stackoverflow.com/questions/4371677/video-published-with-facebook-sdk-not-playing-in-iphone-facebook-app)

# java-me - 修改字符大小字体

> ID：10933184
> 
> 赞同：1
> 
> 时间：2012-06-07T13:48:29.043
> 
> 标签：java-me, midp, lcdui

我有一个关于更改使用 drawChar 函数绘制的字符大小的问题。

我找到了一个解决方案：

```
setFont(Font.getFont(Font.FONT_STATIC_TEXT, Font.STYLE_BOLD, Font.SIZE_LARGE)); 
```

但是字符的大小只有 3 种可能性。
有没有办法增加尺寸？
还是不可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:40:45.043

您可以使用自定义等宽字体。创建一个 PNG 文件，其中包含您可能绘制的所有字符，并使用来自[http://smallandadaptive.blogspot.com.br/2008/12/custom-monospaced-font.html](http://smallandadaptive.blogspot.com.br/2008/12/custom-monospaced-font.html)的以下代码：

```
    公共类 MonospacedFont {

    私有图像图像；
    私有字符 firstChar；
    私人 int numChars;
    私人 int charWidth;

    公共等宽字体（图像图像，char firstChar，int numChars）{
        如果（图像==空）{
            throw new IllegalArgumentException("image == null");
        }
        // 第一个可见的 Unicode 字符是 '!' （价值 33）
        如果（firstChar <= 33）{
            throw new IllegalArgumentException("firstChar <= 33");
        }
        // 图像上必须至少有一个字符
        如果（numChars <= 0）{
            throw new IllegalArgumentException("numChars <= 0");
        }
        this.image = 图像；
        this.firstChar = firstChar;
        this.numChars = numChars;
        this.charWidth = image.getWidth() / this.numChars;
    }

    公共无效drawString（图形g，字符串文本，int x，int y）{
        // 存储当前图形剪辑区域以便以后恢复
        int clipX = g.getClipX();
        int clipY = g.getClipY();
        int clipWidth = g.getClipWidth();
        int clipHeight = g.getClipHeight();
        char [] chars = text.toCharArray();

        for (int i = 0; i < chars.length; i++) {
            int charIndex = chars[i] - this.firstChar;
            // 当前字符存在于图像上
            if (charIndex >= 0 && charIndex <= this.numChars) {
                g.setClip(x, y, this.charWidth, this.image.getHeight());
                g.drawImage(image, x - (charIndex * this.charWidth), y, Graphics.TOP | Graphics.LEFT);
                x += this.charWidth;
            }
        }

        // 恢复初始剪辑区域
        g.setClip（clipX，clipY，clipWidth，clipHeight）；
    }
    }

```

这是使用此类的示例代码。

```
    图像图像；
    尝试 {
        img = Image.createImage("/monospaced_3_5.PNG");
        MonospacedFont mf = new MonospacedFont(img, '0', 10);
        mf.drawString(g, "9876543210", 40, 40);
    } 捕捉（IOException e）{
        e.printStackTrace();
    }

```

# php - 多个选项卡中的无限循环和 xmlhttprequests

> ID：10933194
> 
> 赞同：0
> 
> 时间：2012-06-07T13:49:03.963
> 
> 标签：php, mysql, ajax, infinite-loop, browser-tab

*我有一个`PHP`无限循环的文件`while(true){}`。该文件加载了`Ajax request`.*

**如果我在同一个浏览器中打开了多个选项卡，是否可以只引用一个请求？**

*我的意思是，如果我打开 10 个选项卡，`ajax request`我的 php 文件将打开 10 次，我将有 10 个文件执行无限循环`while(true){}`，这对我的服务器来说不是很好。*

**再次：有可能吗？:)**

*抱歉这个问题，但我找不到解决方案。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:58:43.523

您的问题是识别用户的标签。您可以使用 POST 变量来执行此操作。

请参考以下问题：

*   [检测当前标签](https://stackoverflow.com/questions/396947/detect-current-tab)
*   [如何检测用户是否为同一会话打开两个选项卡？](https://stackoverflow.com/questions/5574970/how-to-detect-if-user-open-two-tabs-for-same-session)

# python - python输出数据类型混淆

> ID：10933195
> 
> 赞同：1
> 
> 时间：2012-06-07T13:49:09.750
> 
> 标签：python, sorting, buffer

大家好，这是我要运行的代码。我不是计算机科学家，我知道这是一个简单的答案，我只是没有工具来回答它。我正在尝试将此列表打印到文本文件中。如果我打印到屏幕上，它会起作用。我得到的错误是：“TypeError：期望一个字符缓冲区对象”

这是代码

```
input = open('Tyger.txt', 'r')
text = input.read()
wordlist = text.split()

output_file = open ('FrequencyList.txt','w')
wordfreq = [wordlist.count(p) for p in wordlist]

#Pair words with corresponding frequency

dictionary = dict(zip(wordlist,wordfreq))

#Sort by inverse Frequency and print

aux = [(dictionary[key], key) for key in dictionary]
aux.sort()
aux.reverse()

for a in aux: output_file.write(a) 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:55:46.640

正如我在上面的评论中所说，更改`output_file.write(a)`为`output_file.write(str(a))`. 当您`print`执行某些操作时，Python 会尝试对您正在打印的任何内容进行隐式字符串转换。这就是为什么`print`ing 一个元组（就像你在这里所做的那样）有效。 `file.write()`没有隐式转换，所以你必须自己用`str()`.

如对此答案的评论中所述，您可能需要调用`.close()`该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T17:33:05.263

你可以像这样编写代码：

```
input = open('tyger.txt','r').read().split()
......
.........
............
for a in aux:
    output_file.write(str(a))
    output_file.close() 
```

您必须`close()`将打开的文件写入文件，否则您将无法使用该文件。

# batch-file - 检查文件是否打开

> ID：10933201
> 
> 赞同：0
> 
> 时间：2012-06-07T13:49:33.050
> 
> 标签：batch-file

我正在尝试通过批处理文件将文件从 UNIX/Windows 目录移动到 SharePoint 目录。我知道我想使用的命令只是一个简单的命令，`move g:\...\*.* z:\`但我不想尝试移动当前打开的任何文件。有没有办法检查目录中的文件是否打开/正在使用，然后只对未打开的文件执行移动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:49:01.113

在 Unix 上，您可以使用[fuser](http://en.wikipedia.org/wiki/Fuser_%28Unix%29)，在 Windows Sysinternals 上分别[处理](http://technet.microsoft.com/en-us/sysinternals/bb896655)实用程序来查询哪些进程打开了文件。

请记住，这两者都必须在控制源文件系统的系统上执行，而不是在您的复制机器上。

**这种方法的一般问题是检查移动操作不是原子的：您可能永远无法确定在检查之后**但**在**开始移动/复制之前文件状态没有改变，但是如果我正确地假设您有一个生产者的场景将某些东西放在您的共享驱动器上 - 供 Sharepoint 使用，并且您希望在尝试移动之前确保它已“烘焙” - 然后一种常见的做法是在生产者端控制它，仅在处理它时将其移动到共享资源完成了。如果您无法直接控制生产者，则可以使用上述实用程序来实现

# php - 打印带有特殊字符的字符串

> ID：10933203
> 
> 赞同：-2
> 
> 时间：2012-06-07T13:49:37.350
> 
> 标签：php, unicode, special-characters

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:43:43.690

`äº¬icpå¤‡09001224å`是您在 Windows-Latin-1 中打印的文本。您的工具链中的元素之一未设置为使用 UTF-8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:15:07.643

类似的问题在这里问[在php中如何显示汉字？](https://stackoverflow.com/questions/7479668/in-php-how-to-display-chinese-character)

这是您的解决方案，您需要指定编码以显示字符。

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" ></meta>
<?php echo "京icp备09001224号"; ?> 
```

会输出像

```
京icp备09001224号 
```

如果这不起作用，请测试您的 php 文件编码。使用 utf-8 编码您的 php 文件。

# iphone - 如何在 UIlabel 中显示上标星号

> ID：10933205
> 
> 赞同：18
> 
> 时间：2012-06-07T13:49:40.717
> 
> 标签：iphone, unicode

我想在我的应用程序中将星号符号显示为上标。这有任何Unicode值吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2018-02-14T12:39:15.737

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-07T13:58:24.423

根据[http://unicode.org/mail-arch/unicode-ml/Archives-Old/UML017/0066.html](http://unicode.org/mail-arch/unicode-ml/Archives-Old/UML017/0066.html)，Unicode 中没有“上标星号”字符之类的东西。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-03T15:44:41.163

由于 unicode 中没有上标星号，我会选择 MODIFIER LETTER CROSS ACCENT，0x02DF。这会产生例如 A˟ 或 f˟。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-25T02:13:04.083

我想要一个上标星号用作 YouTube 播放列表描述中的脚注标记，因为 Unicode 匕首和上标数字看起来非常糟糕。我浏览了我的浏览器可以显示的所有 Unicode 字符，我想出的最佳选择是 U+066D，“阿拉伯五点星”：٭。

不幸的是，并非所有字体都将其显示为上标星。例如，我当前正在输入的编辑框中使用的等宽字体显示它位于基线上（尽管提交答案后使用的比例字体将其显示为上标）。但是，我在 Windows 上检查的绝大多数字体确实将其显示为上标。具有讽刺意味的是，我检查过的少数几个没有的之一是 Adob​​e 阿拉伯语。奇怪的是，大多数字体将其显示为类似星号的 8 点或 6 点星，而不是 5 点星。

我从 iOS 上的 Safari 中检查了我的 YouTube 播放列表描述，不幸的是，在该字体中，星号显示为下标，但可能 iOS 上的某些字体将其显示为上标。阿拉伯语是从右到左的脚本，因此在将它与从左到右的脚本混合在一行时可能会遇到问题——当我在一个字符上键入字符后光标转到错误的方向时，我感到很惊讶我的描述中的新行（在一行中间输入时没有这样做）。

*2017 年 2 月更新：*
我刚刚遇到了另一种可能性，U+20F0，“在上面组合星号”：⃰。

然而，在我的 YouTube 播放列表描述脚注示例中，我实际上更喜欢阿拉伯五角星的外观。此外，组合字符在引用脚注的单词末尾也可以正常工作，但在脚注定义中，几条换行符后跟在行首的组合星号上方会在 YouTube 上显示时进行空格修剪，导致换行符消失，脚注定义被添加到最后一段的末尾（在编辑框中看起来不像，即使在之后）。我尝试将角色与不间断空格结合起来，但这并没有帮助。我没有尝试在 iOS 上从 Safari 中查看上面的组合星号，因为空白修剪失败对我来说是一个交易杀手。

从好的方面来说，Combining Asterisk Above 应该始终呈现为上标星号（对于支持 2008 Unicode 5.1.0 标准或更高版本的软件），而阿拉伯五角星并非总是如此（顺便说一句，它一直是自 1993 年的 Unicode 1.1.0 起支持）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T09:58:20.257

好吧，没有unicode存在。您可以在该特定位置制作一个小标签。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-25T08:00:18.033

This helps to display asterisk in swift

```
let font:UIFont? = UIFont(name: "Helvetica", size:20)

let fontSuper:UIFont? = UIFont(name: "Helvetica", size:10)

let attString:NSMutableAttributedString = NSMutableAttributedString(string: "1.231*9989", attributes: [.font:font!])

attString.setAttributes([.font:fontSuper!,.baselineOffset:10], range: NSRange(location:8,length:2))

labelVarName.attributedText = attString 
```

# javascript - 如何修复“我们正在等待 WebCore 对着陆的响应时错过了拖累”

> ID：10933207
> 
> 赞同：25
> 
> 时间：2012-06-07T13:49:41.830
> 
> 标签：javascript, android, webview

我正在开发一个基于 webView 的 android 应用程序，并试图捕获触摸事件。但是它不起作用，我在日志中看到了这条消息：

> “因为我们正在等待 WebCore 对着陆的响应，所以错过了一个阻力”

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:40:03.577

目前，我在 Android WebView 中实现 OpenLayers 地图时面临同样的问题。自 2009 年以来似乎是一个未解决的问题：[问题 4549 此处](http://code.google.com/p/android/issues/detail?id=4549) 提到了一种解决方法：使用

```
 e.preventDefault() 
```

在每个 ontouch###-function (Javascript) 中。

另一个提示是[这个关于 SO 的答案](https://stackoverflow.com/a/7833982)

它对我有用，但我将仔细研究与 MTfix for Android 相关的 WebView-MultiTouch-Polyfill（对不起，作为新用户，我不允许发布超过两个的超链接，但 Google 会提供帮助你）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:48:50.727

我通过添加解决了这个问题

```
 document.addEventListener( 'touchstart', function(e){ onStart(e); }, false );
    function onStart ( touchEvent ) {
      if( navigator.userAgent.match(/Android/i) ) {
        touchEvent.preventDefault();
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-16T12:37:25.500

对我来说，我可以让它发挥作用的唯一方法是直接附加事件，以便在 webCore 之前触发它。addEventListenter 对我来说太晚了，事件在 webCore 上停滞不前，没有冒泡。这是在带有 Android 4.0.4 的 Galaxy Note 上

这就是我在我的实例中修复它的方式：

```
var myDiv = document.createElement("div");
myDiv.className = "myClass";
myDiv.id = "myId";
myDiv.setAttribute("data-open","false");
myDiv.ontouchmove = function(e) {
  //e is touch event, this is myDiv                     
  e.preventDefault();
  //e.changedTouches[0].pageX
  //http://www.w3.org/TR/touch-events/#idl-def-TouchEvent
}; 
```

# html - 重复-x 不起作用 - css

> ID：10933211
> 
> 赞同：0
> 
> 时间：2012-06-07T13:49:48.557
> 
> 标签：html, css

我对repeat-x 有一个问题。我的CSS代码是这样的：

```
#header {
}

#header_left {
background:url("../img/header_l.png") no-repeat;
float:left;
width:341px;
height:258px;
}

#header_content {
background:url("../img/header_c.png") repeat-x;
width:32px;
height:258px;
float:left;
}

#header_right {
background:url("../img/header_r.png") no-repeat;
float:right;
width:341px;
height:258px;
} 
```

和html代码：

```
<div id="header">
        <div id="header_left"></div>
        <div id="header_content"></div>
        <div id="header_right"></div> 
    </div> 
```

但是图像 header_c.png 只重复一次。我该如何解决这个问题？

这是屏幕截图：[http://i.stack.imgur.com/mo0JW.png](http://i.stack.imgur.com/mo0JW.png)， header_c.png 重复一次，然后留下空白空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:52:35.850

也许您的意思是`repeat-y`，查看 HTML 元素的尺寸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:18:24.273

如果我理解正确，您的错误是间隙获得的中央块和右侧块之间的错误。您可以通过设置右块`float: left`或更改中心块的宽度来解决此问题。

[jsfiddle](http://jsfiddle.net/CvZkX/3/) - 我的错误示​​例。

[jsfiddle](http://jsfiddle.net/CvZkX/4/) - 修复`float: left`

[jsfiddle](http://jsfiddle.net/CvZkX/5/) - 修复中心块的确切大小

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:45:20.160

**也许你应该试试这个**

```
#header {
margin: 0 auto;
height:auto;
width:auto;
padding:0px;
}

#header_left {
background:url("../img/header_l.png") no-repeat left top;
width:341px;
height:258px;
}

#header_content {
background:url("../img/header_c.png") repeat-x left top;
width:32px;
height:258px;
}

#header_right {
background:url("../img/header_r.png") no-repeat left top;
width:341px;
height:258px;
} 
```

# php - Wordpress 中的 PHP $_SERVER['PHP_SELF'] 重定向到索引页面

> ID：10933213
> 
> 赞同：3
> 
> 时间：2012-06-07T13:49:50.070
> 
> 标签：php, forms, wordpress, action

我有一个wordpress网站。有一个类别页面，上面有一个表格来对帖子进行排序/过滤。

我尝试使用 $_SERVER['PHP_SELF'] 作为表单操作，因为我需要获取表单的内容来显示帖子，但是当我这样做时它会重定向到索引页面。

是否有一个原因？或者在 wordpress 中提交表单的更好方法。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:53:05.477

这样做的原因是 Wordpress（几乎）通过 index.php 页面运行所有内容，然后通过其路由逻辑处理要显示的页面。您可能会尝试`var_dump($_SERVER);`查看您想要的值，但它可能是`$_SERVER['REQUEST_URI']`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-22T09:49:41.027

您可以使用[the_permalink()](https://codex.wordpress.org/Function_Reference/the_permalink) wordpress 函数来回显当前页面的永久链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T13:54:16.553

我认为您使用的内容会重定向到索引，因为 WordPress 使用*了不错的 URL*。

您可以使用下面的函数来“检索”当前页面的完整 URL：

```
function selfURL()
{
    $ret = substr( strtolower($_SERVER['SERVER_PROTOCOL']), 0, strpos( strtolower($_SERVER['SERVER_PROTOCOL']), "/") ); // Add protocol (like HTTP)
    $ret .= ( empty($_SERVER['HTTPS']) ? NULL : ( ($_SERVER['HTTPS'] == "on") ? "s" : NULL) ); // Add 's' if protocol is secure HTTPS
    $ret .= "://" . $_SERVER['SERVER_NAME']; // Add domain name/IP address
    $ret .= ( $_SERVER['SERVER_PORT'] == 80 ? "" : ":".$_SERVER['SERVER_PORT'] ); // Add port directive if port is not 80 (default www port)
    $ret .= $_SERVER['REQUEST_URI']; // Add the rest of the URL

    return $ret; // Return the value
} 
```

显然，您将需要使用`<form method="GET" action="<?php echo selfURL(); ?>">`来动态设置`action`表单。

* * *

## 回答 #4

> 赞同：-10
> 
> 时间：2012-06-07T14:02:51.933

您在 html 操作中做错了事。

看到的是，当您使用 get 作为表单方法时，以前的值会从 url 中消失。

因此，要保留以前的值，您需要为查询字符串中存在的每个值设置隐藏输入。

请参阅获取这些值的示例。

```
<?php $exclude_values = array('to_date','from_date');
foreach($_GET as $key => $value){
    if(!in_array($key,$exclude_values)){?>
    <input type="hidden" name="<?php echo $key;?>" value="<?php echo $value;?>"/>
    <?php }
}
?> 
```

我最近也在研究 wordpress 主题。

所以冷静这个答案是完全正确的，因为我很久以前就遇到过这个问题。

**注意：**添加那些`$exclude_values`已经存在于表单字段中的键以及表单提交后不需要的键。

还有一件事是使用`selfURL`动作字段的功能

# javascript - 在不同的 div 中显示表单结果

> ID：10933214
> 
> 赞同：1
> 
> 时间：2012-06-07T13:49:53.083
> 
> 标签：javascript, html

我只是想知道如何使用 javascript（我认为它会是 javascript，但不确定）将搜索操作的结果显示在另一个 div 中，就像 ebay 甚至 stackoverflow 等网站一样。这是我的html片段

```
<div id="searchsign">
   <div style="width: 65%; float:left;height:100%;">
      <form id="searchdivebay" action="searchdivebay.php" method="get">
         <div class="searchbox"><input type="text" name="searchbox" id="searchboxinput"/></div>
         <div class="searchbtn"><input type ="submit" name="searchbutton" value="Search DiveBay"/></div>
      </form>
   </div>
   <div style="width: 35%; float:right;height:100%;">
      <ul class="signreg">
         <li><i>Existing user?</i> <a href="#">SIGN IN</a></li>
         <li><i>or, New user? </i><a href="#">REGISTER</a></li>
      </ul>
   </div>   
</div>

<div id="main">
   <div style="height:2px; background-color:blue; top: 0px;"></div>
      <div id="showsearch">

      </div> 
```

是的，基本上我希望将 searchdivebay.php 表单操作的结果显示在代码底部的“showsearch”div 内。该脚本有效，如有必要，我可以发布代码。但重点是，具有此功能的 javascript（如果有）是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:23:18.740

最简单的方法是使用内联框架并在 from 中将其称为目标。`div`当然，如果需要，可以将内联框架包裹在 a中。例子：

```
<form id="searchdivebay" action="searchdivebay.php" method="get"
   target="results">
...
</form>
...
<iframe name="results" width="500" height="200">
</iframe> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:31:52.260

看起来你会想要使用一些像下面这样的 JQuery（这当然需要你实际包含 JQuery 库）：

```
function fetchData(){
  var url = 'searchdivebay.php';
  // The jQuery way to do an ajax request
  $.ajax({            
    type: "GET",
    url: url,
    data: "", // Your parameters here. looks like you have none
    success: function(html){
      // html contains the literal response from the server
      $("#showsearch").html(html);
    }
  });
} 
```

希望这可以帮助！

# c# - “调用线程无法访问此对象，因为不同的线程拥有它。” C＃

> ID：10933216
> 
> 赞同：0
> 
> 时间：2012-06-07T13:49:58.793
> 
> 标签：c#, wpf, multithreading, user-interface

我正在设计一个媒体播放器，我有一个名为 AddDirectory 的方法，它将指定目录中的所有电影添加到媒体播放器的数据库中。这个方法需要一段时间来处理，所以我决定让它在后台运行，这样用户就可以继续使用这个程序。

这是 AddDirectory 方法：

```
 /// <summary>
    /// Adds all the movies in the specified directory and all its subdirectories to the database.
    /// </summary>
    /// <param name="path">A string representing the directory path.</param>
    /// <returns>True if all the files were added successfully, false otherwise.</returns>
    /// <exception cref="System.ArgumentException">Thrown if the path does not lead to a directory.</exception>
    public static bool AddDirectory(string path)
    {
        if (!FileProcessing.IsDirectory(path))
        {
            return false;
        }

        List<string> filePaths = FileProcessing.GetDirectoryMovieFiles(path); //a list containing the paths of all the movie files in the directory

        //add the movie in a separate thread so as to not interrupt the flow of the program
        Thread thread = new Thread(() =>
        {
            foreach (string filePath in filePaths)
            {
                AddMovie(filePath);
            }
        });

        //make the thread STA and start it
        thread.SetApartmentState(ApartmentState.STA);
        thread.Start();

        return true;
    } 
```

在同一个班级中，我有以下事件和委托：

```
 public delegate void MovieAddedHandler(MovieEventArgs e);

    /// <summary>
    /// Called on when a movie is inserted into the database.
    /// </summary>
    public static event MovieAddedHandler MovieAdded; 
```

我需要这个事件，以便 GUI 知道何时将新电影添加到数据库中，因此它可以更新 GUI 并相应地通知用户。因此，当我添加一个包含 50 部电影的目录时，该事件会被调用 50 次。

现在 GUI 更新是我遇到困难的地方。

我有以下代码段，它是每当用户单击 GUI 中的“添加目录”标签时调用的方法的一部分。

```
MovieInsertion.MovieAdded += (e2) =>
{
    this.movies = MovieDataRetrieval.GetMovies();
    this.labels.Clear();
    this.InitializeMovieLabels();
}; 
```

GetMovies() 方法返回数据库中所有电影的列表（由单独的 Movie 类表示）。然后我清空GUI网格中的所有标签，然后再次初始化，这样每次添加电影时，用户可以立即在程序中访问该电影，而无需等待目录中的其余电影被添加。

错误本身在 InitializeMovieLabels() 方法中被调用：

```
foreach (Label labelIterator in labels)
{
    this.grid.Children.Add(labelIterator);
} 
```

“标签”变量是代表数据库中电影的所有标签的列表。我想将每个标签添加到网格中。

我得到的错误是（如标题中所述）：“调用线程无法访问此对象，因为不同的线程拥有它。”

我对线程有点（非常）缺乏经验，我尝试寻找解决方案但没有成功。对不起，如果我对细节有点过分了:)。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:13:14.637

使用`MethodInvoker`从不同线程更新 GUI 的地方。

您的 labels.clear() 语句尝试从不同的线程更新 GUI。所以使用这种类型的代码。

```
if(this.labels.InvokeReqiured)
{
    this.labels.Invoke( (MethodInvoker) ( ()=> this.labels.Clear() ) );
}
else
this.labels.Clear(); 
```

如果您想从不同的线程更新 GUI，请确保使用`MethodInvoker`委托。

# java - Java 小程序不支持 Authenticator.setDefault

> ID：10933217
> 
> 赞同：0
> 
> 时间：2012-06-07T13:49:59.547
> 
> 标签：java, security, jakarta-ee, applet, accesscontrolexception

我想在 Java 小程序中进行简单的 HTTP 身份验证，我正在尝试这种方式：

```
static class MyAuthenticator extends Authenticator
        {
            public PasswordAuthentication getPasswordAuthentication()
                {
            // I haven't checked getRequestingScheme() here, since for NTLM
            // and Negotiate, the usrname and password are all the same.
            System.err.println("Feeding username and password for " + getRequestingScheme());
            return (new PasswordAuthentication(kuser, kpass.toCharArray()));
            }
        }
    public void paint(Graphics g) {
        try
        {
        //  String authenticate=Authenticator.getPasswordAuthentication();
             Authenticator.setDefault(new MyAuthenticator());
             URL url = new URL("http://Ip_address/jpg/image.jpg");
             InputStream ins = url.openConnection().getInputStream();
             BufferedReader reader = new BufferedReader(new InputStreamReader(ins));
             String str;
               while((str = reader.readLine()) != null)
                  System.out.println(str);

          //int s=2+2;

            g.drawString("hello world", 50, 60 );
        }
        catch (Exception e)
        {
            System.out.println("Exception : "+ e);
        }
    } 
```

但我在这一行遇到错误

```
Authenticator.setDefault(new MyAuthenticator()); 
```

例外是：

```
Exception : java.security.AccessControlException: access denied 
    (java.net.NetPermission setDefaultAuthenticator) 
```

谁能告诉我现在该做什么，或者如何从 Java 小程序验证一个网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:14:05.993

您遇到了安全沙盒限制。显然，对于不受信任的小程序来说，更改默认身份验证器是一个安全问题。（我想这是因为讨厌的小程序可以使用它来窃取用户提供的身份验证详细信息。）

无论限制的原因是什么，一种解决方案是为您的小程序签署 JAR 文件。有关详细信息，请参阅Oracle 教程的[此页面](http://docs.oracle.com/javase/tutorial/deployment/jar/signing.html)。

# c# - 如何设置默认错误信息

> ID：10933218
> 
> 赞同：1
> 
> 时间：2012-06-07T13:50:07.800
> 
> 标签：c#, asp.net-mvc-3, data-annotations

我有一个可为空的 int 字段，如下所示。显然，这不是必填字段。

```
[DisplayName("Previous Job No:")]
public int? previousJobId { get; set; } 
```

目前，如果用户输入无效，则显示默认错误消息`The field Previous Job No: must be a number.`

如何使用数据注释更改此默认错误消息？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:05:53.673

如果你这样做了：

```
[DataType(DataType.Int32, ErrorMessage = "Custom Error Msg")]
public int? previousJobId { get; set; } 
```

不幸的是，我无法测试这个自动取款机。

**第二次尝试：**

这并不漂亮，但它可以让您不必创建自定义数据注释。这反过来又使您不必编写自定义 jQuery 验证。我能够对此进行测试，并且对我有用。但是，如果你喜欢这种风格，这取决于你。

```
[DisplayName("Previous Job No:")]
[RegularExpression("^[0-9]+$", ErrorMessage = "Custom Error Msg")]
public string previousJobId { get; set; }
private int? _previousJobId2;
public int? previousJobId2
{
    get
    {
        if (previousJobId == null)
        {
            return null;
        }
        else
        {
            return Int32.Parse(previousJobId);
        }
    }
    set
    {
        _previousJobId2 = value;
    }
} 
```

你可以在控制器中测试它：

```
[HttpPost]
public ActionResult Index(HomeViewModel home)
{
    if (ModelState.IsValid)
    {
        int? temp = home.previousJobId2;
    }
    return View(home);
} 
```

您将在视图中引用字符串

```
@Html.LabelFor(model =>model.previousJobId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:10:43.437

尝试

```
[Range(1, 1000, ErrorMessage = "Enter a integer value")]
 public int? previousJobId { get; set; } 
```

或在可行的情况下使用外部项目[http://dataannotationsextensions.org/Integer/Create](http://dataannotationsextensions.org/Integer/Create)

以下是他们如何实现它：[https ://github.com/srkirkland/DataAnnotationsExtensions/blob/master/DataAnnotationsExtensions/IntegerAttribute.cs](https://github.com/srkirkland/DataAnnotationsExtensions/blob/master/DataAnnotationsExtensions/IntegerAttribute.cs)

# android - 带有Phonegap的ARPG游戏的最佳手机游戏框架？

> ID：10933221
> 
> 赞同：0
> 
> 时间：2012-06-07T13:50:14.130
> 
> 标签：android, mobile

我打算用Phonegap在Android平台上开发一款类似Battleheart的动作RPG游戏。我想知道哪种 JS 框架最适合移动设备中的这种类型的动作角色扮演游戏。我已经寻找了一些 JS 框架，例如 ImpactJS、LimeJS、CraftyJS、EaselJS 等。但是，我仍然在为移动 web 动作角色扮演应该使用哪个 JS 框架而苦苦挣扎。谁能给我一些想法？我会更喜欢开源框架。先谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:54:44.833

为此，我强烈推荐 ImpactJS！

我已经用它做了一个游戏，它的效果比我想象的要好。在此之前，我用 LimeJS 做了一个原型，但确实存在一些性能问题。试试 ImpactJS 吧:)

# xcode - 如何重命名 xcode 方案并保持 Git 提交工作？

> ID：10933222
> 
> 赞同：2
> 
> 时间：2012-06-07T13:50:14.953
> 
> 标签：xcode, git

更新：我将此作为错误报告给 Apple，他们已修复！所有这些似乎在 xCode 4.5 中都可以正常工作。历史学家可以继续阅读。

我非常希望在 xCode 4.3 中重命名 iOS 项目的构建方案。我已成功重命名项目：

![重命名](../Images/b991c1a5caa1cd4fc60e3b516756063a.png)

然后我可以重命名目标和产品：

![重命名目标](../Images/abd9a03a7f79496c1d33686c45fdf9ed.png)

然后我可以重命名方案：
![单击此处重命名方案](../Images/c80f14e6ba68287cdbf9b38ebec50db2.png)
然后
![然后点击这里](../Images/7fc4f703adb967b67b12ff23a703a748.png)

然后我选择

> 文件 - 源代码管理 - 提交...

并得到

> 工作副本“TestWeb”未能提交文件。致命：无法切换到“/Users/me/Programming/TestWeb/TestWeb.xcodeproj”：没有这样的文件或目录

事实上，xcode 正在尝试提交文件 TestWeb.xcodeproj，尽管 xcode 本身刚刚将该文件重命名为`TestWeb5.xcodeproj`当我更改项目名称时。这似乎是我在这里所做的不同名称更改的某种组合，仅更改一件事不会产生错误，但不止一个更改会使 xcode 混淆 - 有时。

我是否必须按特定顺序执行所有这些操作？还是我只需要放弃并创建一个具有正确名称的新 xcode 项目并将我的文件粘贴到其中并丢失旧 git 存档中的旧提交记录？

我找到[了这个 SO 答案](https://stackoverflow.com/questions/10924523/xcode-4-2-renamed-project-file-in-project-navigator-all-project-settings-confi)，并按照建议查看了 xscheme 文件，只能找到对新名称的引用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:41:57.717

我遇到了这个问题，我所做的就是使用 github 提交更改。然后在 xcode 中我选择了 File -> Source Control -> Refresh Status

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T22:20:00.173

我已经为此苦苦挣扎了一段时间，但现在我找到了解决方案！:)

这不是解决它的好方法，但Apple尚未修复此错误，所以......

1.  从 github.com ( [http://mac.github.com/](http://mac.github.com/) ) 安装 GitHub.app。
2.  将项目的文件夹（可以在其中找到 .git）添加到 GitHub 应用程序中计算机上的存储库列表中。
3.  通过此应用程序提交未提交的更改
4.  在 Xcode 管理器中，将分支添加到应用程序的 git 存储库
5.  在版本控制下对文件进行随机更改并通过 Xcode 提交
6.  删除你刚刚创建的分支（通过 Xcode）
7.  它现在应该可以通过 Xcode 直接提交（它对我有用）

我不确定您是否需要执行第 5 步。您也许可以分支然后删除该分支..

这对我有用，我希望它也对你有用！

# ruby - Windows 中的 Ruby FileUtils.chmod

> ID：10933228
> 
> 赞同：1
> 
> 时间：2012-06-07T13:50:41.787
> 
> 标签：ruby, chmod

所以我有一个 Ruby 脚本，我在其中移动文件等等，并且在其中的某个时刻，我需要设置一些文件的权限，以便从 UNIX 机器上查看时，权限可以准确反映。问题是，我从 Windows 64 位机器上运行脚本，当我从 UNIX 机器上查看文件时，它似乎对文件没有任何影响。

这是我的权限示例代码：

```
FileUtils.chmod(0777, "file") 
```

这似乎对文件的影响为零。当我在 UNIX 中检查它时，它具有权限`rw-rw-r`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T00:42:31.030

`File.chmod`在 Windows 上是无操作操作，因为 NTFS 或 FAT 都不支持这种权限。

更糟糕的是，Windows 通过 Samba (SMB) 文件共享将不知道您尝试修改的文件位于 UNIX 环境中。

如果您需要应用类似 UNIX 的权限，那么您将需要从在 UNIX 操作系统上运行的 Ruby 版本执行该操作。

# ruby-on-rails - 请求 Rails 的 Stats 打印机

> ID：10933231
> 
> 赞同：1
> 
> 时间：2012-06-07T13:50:49.137
> 
> 标签：ruby-on-rails, logging, profiling, rack, middleware

对于每个请求，默认情况下，rails 会记录在 views/active_record(sql) 中花费的时间、活动资源 http 请求等。例如

```
Started GET "/blah" for 127.0.0.1 at Thu Jun 07 19:07:33 +0530 2012   
Processing by Some::Controller#someaction as HTML   Parameters: { "id"=>"31550"}
GET http://somedomain:80/somepath/users.json?some=thing&and=something
--> 200 OK 594 (119.9ms)
Rendered a/b/c/_d.html.haml (1.3ms) 
Rendered x/y/z/_w.html.haml (2ms)
Completed 200 OK in 3529ms (Views: 345.3ms | ActiveRecord:3.0ms) 
```

当并行请求进来时，生产日志可能会非常混乱，查看/解析日志不是简单的任务，而且通常不起作用。

是否有 rack/rails 中间件可以根据每个请求为我的生产设置提供这些数字。像[rack-perftools_profiler 之](https://github.com/bhb/rack-perftools_profiler)类的东西，但给了我在 rails 日志中找到的数字/统计信息（上面的例子）？

rack-perftools_profiler 打印分析数据以掩盖来自请求的实际响应，我可以通过对任何 URL 使用 url 参数 'profile=true' 有选择地做到这一点。

# .net - 如何使用 ServiceStack 将多个读取命令通过管道传输到 Redis

> ID：10933232
> 
> 赞同：2
> 
> 时间：2012-06-07T13:50:54.237
> 
> 标签：.net, redis, servicestack

使用 ServiceStack，有没有办法执行多个读取命令（特别是 ContainsKey 命令）？

存储的对象需要一段时间才能从数据库中获取，因此我们希望只获取那些不在缓存中的对象。

我知道我可以向 redis 请求对象，然后如果它返回 null，则从数据库中获取，但是存储的对象相当大，所以我宁愿只返回一个 bool 列表，然后确定要查询的 id在数据库中。

目前我正在遍历我的 Id 列表（最多 100 个左右）并使用 servicestack 中的 ContainsKey 方法。我希望避免所有来回，并一次完成所有请求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T18:03:29.567

在[ServiceStack.Redis](https://github.com/ServiceStack/ServiceStack.Redis/)客户端上，您可以使用`GetValues`or （字符串和 T api 都可用）在一次调用中`GetValuesMap`获取多个值（使用[MGET ）。](http://redis.io/commands/mget)仅返回现有项目，`GetValues`如果您的模型上有**Id**或`GetValuesMap`返回现有键及其值的字典，您可以检测这些项目。

由此，您可以确定并从数据库中获取所有缺失的 Id。如果您只是要从 Redis 获取现有值，那么这是最佳策略，因为您可以获取所有值并通过 1 次调用确定现有键。

## 替代“单一呼叫”选项

### 使用流水线或事务

如果出于某种原因您真的只想检查 Redis 中是否存在键而不获取它们，那么您可以使用事务/或管道（两者都是流水线的）来排队多个操作，这些操作在 1 个套接字写入中发送到 Redis。这是[RedisStackOverflow](http://www.servicestack.net/RedisStackOverflow/)演示中的一个示例，它将 30 个操作排队，这些操作[在单个批次中发送和执行](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RedisStackOverflow/RedisStackOverflow.ServiceInterface/IRepository.cs#L180)。

### 使用 LUA 脚本

如果您有 Redis >v2.5x，您可以使用[Redis 的服务器端 LUA 支持](http://redis.io/commands/eval)创建和执行复合操作。[您可以在 ServiceStack.Redis 客户端中使用IRedisClient](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Interfaces/Redis/IRedisClient.cs)中的这些 API来执行服务器端 LUA 脚本：

```
string GetEvalStr(string body, int numOfArgs, params string[] args);
int GetEvalInt(string body, int numOfArgs, params string[] args);
List<string> GetEvalMultiData(string body, int numOfArgs, params string[] args); 
```

# python - 想在 python 中获取主目录中的文件数

> ID：10933234
> 
> 赞同：2
> 
> 时间：2012-06-07T13:50:56.203
> 
> 标签：python

我看到了这个[How to count the number of files in a directory using Python](https://stackoverflow.com/questions/2632205/count-the-number-of-files-in-a-directory-using-python)

并有这个：

```
import os, os.path

print len([name for name in os.listdir(os.path.expanduser("~")) if os.path.isfile(name)]) 
```

但它总是返回 0。我将如何修改它以返回文件数？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T13:55:48.407

此刻，你正在打电话`os.path.isfile("somefile.ext")`。你需要打电话`os.path.isfile("~/somefile.ext")`。

```
import os

homedir = os.path.expanduser("~")
print len([
    name
    for name in os.listdir(homedir)
    if os.path.isfile(os.path.join(homedir, name))
]) 
```

或更简洁地说：

```
print sum(
    os.path.isfile(os.path.join(homedir, name)) for name in os.listdir(homedir)
) 
```

# entity-framework - 如何在存储库的 objectcontext 中指定连接字符串

> ID：10933235
> 
> 赞同：0
> 
> 时间：2012-06-07T13:50:57.623
> 
> 标签：entity-framework, connection, repository, t4

我们正在尝试为 EF 项目使用存储库模式。允许用户选择三个独立（但结构相同）数据库之一登录（一个用于培训，一个用于测试，一个用于生产）。

我们目前正在使用 EF 4 实现，并通过 ADO.Net EntityObject Generator 生成了我们的 T4。我们的存储库基类如下所示：

```
public class RepositoryBase<C> : IDisposable
    where C : ObjectContext, new()
{
    private C _DataContext;

    public virtual C DataContext
    {
        get
        {
            if (_DataContext == null)
            {
                _DataContext = new C();
            }
            return _DataContext;
        }
    }

    //other code cut for brevity...
} 
```

我认为我们想要的是能够修改“_DataConext = new C();” 行，以便它可以使用在运行时生成的连接字符串来指向正确的数据库。不幸的是，像这样传递连接字符串：_DataConext = new C(connectionString); 不允许并导致此消息：“不能将参数传递给类型参数上使用的‘新’。”

我可以在 model.tt 文件后面的代码中看到有三个构造函数：默认的无参数构造函数，一个具有 EntityConnection 参数的构造函数，以及第三个具有连接字符串参数的构造函数（我们要使用的那个）。

问题是我们如何去做这件事？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:01:11.323

好吧，问题是在泛型类型上指定带有参数的构造函数。这是不允许的。第一个解决方案是使用反射。如果您知道定义的构造函数是什么：

```
public virtual C DataContext
{
    get
    {
        if (_DataContext == null)
        {
            _DataContext = (C)Activator.CreateInstance(typeof(C), new object[]{ connectionString });
        }
        return _DataContext;
    }
} 
```

更好的解决方案是将 C 的实例提供给您的存储库的构造函数。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:42:36.097

我可以带着对创建新的 ObjectContext 通用实例的好奇心加入这个线程吗？当我在没有 Activator 的情况下使用 CreateContext 方法（如下）时，它会创建一个带有“默认”连接字符串的新实例，无论我给它哪个连接。使用 Activator 代替它能够正确查找和创建它，我迷路了......

在我的 app.config 中两者都有，但它只使用在制作 edmx 时创建的那个。

```
 /// <summary>
    /// Base repository
    /// </summary>
    public RepositoryBase(Connection.ConnectionManagerBase connectionmanager)
    {
        this.pContext = this.CreateContext(connectionmanager, (x => new C()));
        this.ContextObjectSet = this.pContext.CreateObjectSet<T>();
    }

    /// <summary>
    /// Create context with connection string
    /// </summary>
    /// <param name="connectionmanager">Connection manager</param>
    /// <param name="factory">Factory context</param>
    /// <returns>Instance</returns>
    private C CreateContext(Connection.ConnectionManagerBase connectionmanager, Func<string, C> factory)
    {
        // this create instance with correct connection
        return (C)Activator.CreateInstance(typeof(C), new object[] { connectionmanager.ConnectionString }); 
        // this use the "default" connection, no matter what is in connectionmanager.ConnectionString
        return factory(connectionmanager.ConnectionString);
    } 
```

# jquery - 从一个列表到另一个列表的动画过渡

> ID：10933237
> 
> 赞同：3
> 
> 时间：2012-06-07T13:50:58.697
> 
> 标签：jquery, knockout.js

我正在使用 knockout.js 来管理项目列表（[有关演示，请参见此页面](http://www.ugile.com/sim)）。

项目从一个列表过渡到另一个列表，我想为这个过渡设置动画。

我知道我可以分别为进出动画制作动画，但我实际上希望看到这些项目从它们在原始列表中的位置飞到它们在目标列表中的位置。

像这样的东西：http: [//jsfiddle.net/EpRDY/3/](http://jsfiddle.net/EpRDY/3/)

问题是我可以分别访问 afterAdd 和 beforeRemove ，但不能同时访问两者。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:19:20.000

这是相当棘手的。我有一个解决方案，但它有点乱。也许您可以找到更清洁的方法。

[http://jsfiddle.net/madcapnmckay/Twu4L/](http://jsfiddle.net/madcapnmckay/Twu4L/)

希望这可以帮助。

# facebook-graph-api - FQL中的批量查询以获得用户喜欢

> ID：10933238
> 
> 赞同：0
> 
> 时间：2012-06-07T13:51:05.523
> 
> 标签：facebook-graph-api, facebook-fql

我正在使用以下 FQL 查询来获取一批用户的“喜欢”。 [https://graph.facebook.com/fql&q=SELECT](https://graph.facebook.com/fql&q=SELECT) uid, page_id FROM page_fan WHERE uid IN (user_id1,user_id2,user_id3,etc....)。

我可以通过此 FQl 查询传递的最大用户 ID 数是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:48:01.937

UID 没有限制。限制是运行查询所用的时间。因此，与碰巧有很多喜欢的少数用户一起运行它会超时，就像为每个喜欢很少的许多 uid 运行它一样。

我建议每个查询将请求分成 10-15 个 UID。然后使用 Facebook Batch API 同时执行多个查询。

# c# - 获取模型更新Id

> ID：10933241
> 
> 赞同：-2
> 
> 时间：2012-06-07T13:51:15.750
> 
> 标签：c#, entity-framework, orm

在实体框架中，当您提交一个新项目时，它不会根据数据库更新他的 id。例如：

```
public class A  {
    public int Id {get; set;}
    public DateTime LastUpdateUtc {get; set;}
} 
```

现在，当我将新 A 添加到我的存储库时：

```
A a = new A();
a.LastUpdateUtc = DateTime.UtcNow;
repo.Add(a);
repo.SaveChange();
a.Id; // still == 0 
```

即使我在存储库中搜索元素，我也会得到 A，但 Id 仍然等于 0。

```
A a = repo.Asquerable().OrderByDescending(a => a.LastUpdateUtc ).First();
a.Id; // still == 0 
```

有人知道我如何告诉实体框架从数据库计算的内容中更新 Id 字段吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:16:21.173

代替

```
A a = repo.Asquerable().OrderByDescending(a => a.LastUpdateUtc ).First();
a.Id; 
```

尝试

```
A queryA = repo.Asquerable().OrderByDescending(a => a.LastUpdateUtc);
queryA.First().Id; 
```

`a`在这种情况下是一个实体（不是查询）并且不会改变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T10:23:44.343

最终，我确实通过添加属性使它起作用：

```
[Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:04:08.853

如果您的 ID 列具有 AUTONUMBER 属性，实体框架将自动从数据库中检索新的自动生成的 ID 字段。您是否查看过数据库以确保您的 ID 数据实际上不是 0？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:04:53.237

请试试这个

```
public override TR Create<T, TR>(T entity)
{
    string entitySet = GetEntitySetName<T>();
    _context.AddObject(entitySet, entity);
    _context.SaveChanges();

    //Returns primaryKey value
    return (TR)context.CreateEntityKey(entitySet, entity).EntityKeyValues[0].Value;                       
} // Where T: entity type, TR: entity PK type 
```

如果没问题 - 看看这里[EF Generic Repository get Id from new insert generic entity](https://stackoverflow.com/questions/3547950/ef-generic-repository-get-id-from-new-inserted-generic-entity)

# heroku - 我正在尝试 git push heroku 但在下面遇到相同的错误

> ID：10933243
> 
> 赞同：3
> 
> 时间：2012-06-07T13:51:21.803
> 
> 标签：heroku, push

**命令**：git push heroku master

**留言**：

```
Counting objects: 187, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (165/165), done.
Writing objects: 100% (187/187), 41.33 KiB, done.
Total 187 (delta 50), reused 0 (delta 0)

-----> Heroku receiving push
-----> Ruby/Rails app detected
sh: Syntax error: Unterminated quoted string
 !
 !     Invalid RUBY_VERSION specified: <internal:lib/rubygems/custom_require>:29:in-`require':-no-such-file-to-load----execjs-LoadError-<internal:lib/rubygems/custom_require>:29:in-`require'-/tmp/build_60rm0lhvvqx7/Gemfile:1:in-`eval_gemfile'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/dsl.rb:32:in-`instance_eval'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/dsl.rb:32:in-`eval_gemfile'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/dsl.rb:7:in-`evaluate'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:18:in-`build'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler.rb:142:in-`definition'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/cli.rb:633:in-`platform'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/task.rb:22:in-`run'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/invocation.rb:118:in-`invoke_task'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor.rb:263:in-`dispatch'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/base.rb:386:in-`start'-/tmp/bundler-20120607-470-s30ash/gems/bundler-1.2.0.pre/bin/bundle:13:in-`<top-(required)>'-/tmp/bundler-20120607-470-s30ash/bin/bundle:19:in-`load'-/tmp/bundler-20120607-470-s30ash/bin/bundle:19:in-`<main>'-There-was-an-error-in-your-Gemfile,-and-Bundler-cannot-continue.
 !     Valid versions: ruby-1.9.3-p0, ruby-1.9.3-p125, rbx-1.2.4, rbx-2.0.0dev-20120115-1.9, rbx-2.0.0dev-20120115-1.8, rbx-2.0.0dev-20120123-1.9, rbx-2.0.0dev-20120123-1.8, ruby-1.9.2-p290, jruby-1.6.5.1, jruby-1.6.7, ruby-1.9.3, ruby-1.9.2
 !
    sh: Syntax error: Unterminated quoted string
 !     Heroku push rejected, failed to compile Ruby/rails app

    To git@heroku.com:blazing-fire-8664.git
 ! [remote rejected] master -> master (pre-receive hook declined)
error: failed to push some refs to 'git@heroku.com:blazing-fire-8664.git'
vantan08@hart-D820:~/rails_projects/sample_app$ Invalid RUBY_VERSION specified: <internal:lib/rubygems/custom_require>:29:in-`require':-no-such-file-to-load----execjs-LoadError-<internal:lib/rubygems/custom_require>:29:in-`require'-/tmp/build_1b5u4o8udl3vu/Gemfile:1:in-`eval_gemfile'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/dsl.rb:32:in-`instance_eval'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/dsl.rb:32:in-`eval_gemfile'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/dsl.rb:7:in-`evaluate'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/definition.rb:18:in-`build'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler.rb:142:in-`definition'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/cli.rb:633:in-`platform'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/task.rb:22:in-`run'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/invocation.rb:118:in-`invoke_task'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor.rb:263:in-`dispatch'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/lib/bundler/vendor/thor/base.rb:386:in-`start'-/tmp/bundler-20120607-4420-16eeuqu/gems/bundler-1.2.0.pre/bin/bundle:13:in-`<top-(required)>'-/tmp/bundler-20120607-4420-16eeuqu/bin/bundle:19:in-`load'-/tmp/bundler-20120607-4420-16eeuqu/bin/bundle:19:in-`<main>'-There-was-an-error-in-your-Gemfile,-and-Bundler-cannot-continue.
bash: syntax error near unexpected token `(' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-27T20:54:35.133

对于其他登陆这里的人...

我有同样的错误，就我而言，这是因为我的 Gemfile 中的错误。

导致错误的 Gemfile：

```
source "http://rubygems.org"
require 'gem-name-here'
require 'another-gem-here' 
```

应该是：

```
source "http://rubygems.org"
gem 'gem-name-here'
gem 'another-gem-here' 
```

（我从我正在处理的 ruby​​ 脚本文件中复制了“require”行，但忘记将它们改为“gem”。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-20T01:20:24.197

我的错误是由 rake 任务引起的弃用评论。我可以通过以下方式触发弃用错误：

```
rake assets:precompile --dry-run 
```

修复 rake 任务（或只是将其注释掉）修复了 Heroku 部署。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-07T12:09:21.820

我花了半天时间才意识到我已经添加了一个 gem，它有一个 .yml 文件，其中包含针对不同环境的配置。我忘记了我的 Heroku 环境是我创建的称为“staging”的自定义环境，而 .yml 文件没有定义它。

# jquery - 如何通过jquery将普通字符更改为密码字符？

> ID：10933244
> 
> 赞同：1
> 
> 时间：2012-06-07T13:51:22.537
> 
> 标签：jquery

假设我有一个文本框，并且我希望当用户在其中键入时，每个字符将在 1 秒后由 jQuery 转换为密码符号。

当我们输入密码文本框时，我们在现代智能手机上看到的效果相同。

有没有人有什么建议？我知道如何捕捉按键并让用户输入字符。

```
<input type="text" id="username" name="username" />
<script type="text/javascript">
$("#username").keypress(function(event){   

// Get the keypress value
// ...?

var c = String.fromCharCode(e.which);

}

});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:27:11.323

你可以从这个开始：http: [//jsfiddle.net/89CF8/7/](http://jsfiddle.net/89CF8/7/)
但它只有在你输入正确的情况下才有效。
您应该将值保存在另一个变量中（我`letters`在示例中使用数组），因为标准输入只允许您将其值更改为星号，从而丢失所有已键入的用户。

问题 #1。您应该添加对非符号的检查。例如，Del 键会将坏符号添加到`letters`数组中。

问题 #2。您应该添加检查退格并用于`splice`删除元素。

问题 #3。如果用户从文本中间删除符号，则很难将新值与存储初始值的变量同步。

毕竟，我认为这不是一个好主意，但也许我的代码会帮助您找到更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:55:20.810

你实际上并不需要处理按键。使用 1 秒超时循环，并将文本框中的所有字符替换为星号。并且不要忘记将字符存储在变量中。

像下面这样的东西会帮助你，但你必须花一些时间来修复错误。 [http://jsfiddle.net/ymutlu/8BXDu/2/](http://jsfiddle.net/ymutlu/8BXDu/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-01T08:57:18.990

通过javascript自定义掩码密码

[自定义掩码密码](https://jsfiddle.net/karimqaderi/74qm3oyv/2)

```
 <style>
    .mask {
        position: relative;
        overflow: hidden;
    }

    input#pass {
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
    }
    </style>
    <script>

var txt = document.getElementById("txtMask");
var hdn = document.getElementById("pass");

hdn.addEventListener("keyup", function(evt){

  txt.value = '';
   for(let i=0; i<hdn.value.length;i++)
       {
           txt.value +='@';
      }         

});
</script>
<div class="mask">
<input type="text" id="txtMask" autocomplete="false">
<input type="text" id="pass">
</div> 
```

# android - 可以从水平样式隐藏进度文本，不确定 ProgressDialog？

> ID：10933246
> 
> 赞同：3
> 
> 时间：2012-06-07T13:51:34.643
> 
> 标签：android, android-asynctask, android-ui, android-alertdialog, android-progressbar

我正在显示一个水平样式，不确定的 ProgressDialog 如下：

```
progressDialog.setMessage("My progress dialog message");
progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
progressDialog.setIndeterminate(true);
progressDialog.show(); 
```

不确定的水平进度图形/动画显示正常。但是，鉴于这是一个不确定的进度对话框，我希望分别隐藏左下角和右下角的“0%”和“0/100”标签。有谁知道如何隐藏这些？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-17T14:39:11.803

可以通过调用两个 ProgressDialog 的方法来隐藏它们

```
progressDialog.setProgressNumberFormat(null);
progressDialog.setProgressPercentFormat(null); 
```

请参阅[ProgressDialog 文档](http://developer.android.com/reference/android/app/ProgressDialog.html#setProgressNumberFormat(java.lang.String))以供参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:43:40.197

在 Andro Selva 的评论之后，我能想到的最好的方法是使用......

```
progressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
progressDialog.setIndeterminate(false); 
```

...当它确定并使用时...

```
progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
progressDialog.setIndeterminate(true); 
```

...当它不确定时。不理想，但它有效。（微调器样式不显示进度值。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-28T18:35:15.720

我知道这个有点旧，但也许我的回答对其他人有帮助。

为了获得一个没有文本框的不确定的进度对话框，我这样做了：

```
ProgressBar progressBar = new ProgressBar(this, null, android.R.attr.progressBarStyleHorizontal);
progressBar.setIndeterminate(true);

Dialog progressDialog = new Dialog(context);
progressDialog.setContentView(progressBar); 
```

希望这可以帮助 ：）

# ruby-on-rails - Rails 3 - 如何在没有数据库的情况下验证模型？

> ID：10933250
> 
> 赞同：2
> 
> 时间：2012-06-07T13:51:43.353
> 
> 标签：ruby-on-rails, validation, model

我有这两个动作的**控制器**：

```
 resources :home do
    collection do
      get 'index'
      get 'contact'      
    end
  end 
```

和模型：

```
class Home
  include ActiveModel::Validations  
  include ActiveModel::Conversion  
  extend ActiveModel::Naming

  attr_accessor :name, :message

  validates :name, :presence => {:message => 'Name cannot be blank.'}, :allow_blank => true, :length => {:minimum => 2, :maximum => 40}
  validates :message, :presence => {:message => 'Message cannot be blank.'}, :allow_blank => true, :length => {:minimum => 10}

  def initialize(attributes = {})  
      attributes.each do |name, value|  
        send("#{name}=", value)  
      end  
    end  

    def persisted?  
      false  
    end
end 
```

控制器：

```
class HomeController < ApplicationController
  def index
  end

  def contact
    @home = Home.new
  end
end 
```

和表格（**/views/home/contact.html.erb**）

```
 <%= form_for(@home, :validate => true) do |f| %>
    <% if @home.errors.any? %>
      <div id="error_explanation">
        <h2><%= pluralize(@home.errors.count, "error") %> prohibited this role from being saved:</h2>
          <ul>
        <% @home.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
        </ul>
      </div>
    <% end %>

    <div class="field">
      <%= f.label :name %><br />
      <%= f.text_field :name %>
    </div>
    <div class="field">
      <%= f.label :message %><br />
      <%= f.text_field :message %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
<% end %> 
```

我想验证表格，如果模型有数据库表，但不幸的是我没有这个案例的经验，我有一个没有数据库表的模型并且需要验证表格......我是仍然收到错误

```
undefined method `to_key' for nil:NilClass 
```

任何人都可以帮助我，请，如何使它工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:57:47.063

我建议您观看/阅读此 railscast [http://railscasts.com/episodes/219-active-model?language=en&view=asciicast](http://railscasts.com/episodes/219-active-model?language=en&view=asciicast)这也解释了您的异常

我也没有看到您的创建操作。当创建操作失败并再次呈现表单时，您是否设置了变量？

# svn - 如果 svn ant 文件中未提供用户名和密码，则 SVN 会不断受到攻击

> ID：10933251
> 
> 赞同：1
> 
> 时间：2012-06-07T13:51:45.780
> 
> 标签：svn, ant

我有一个 SVNANT 文件，它接收 svn 用户名和密码作为输入，用于将文件从中继复制到标签。如果我们提供用户名和密码，它工作正常。但是当我们不传递用户名和密码时就会出现问题。我的意思是当用户名和密码保持空白时，蚂蚁会继续向 SVN 发送请求，并且 svn 会因此而变得忙碌。谁能告诉我这个问题的原因和解决方法？？提前致谢...

# groovy - Groovy：if-then 语句是否具有本地范围？

> ID：10933256
> 
> 赞同：6
> 
> 时间：2012-06-07T13:52:16.647
> 
> 标签：groovy, if-statement, scope

不知道我问的是否正确，但我有以下内容：

```
def x = 1    
if (x == 1) {
   def answer = "yes"
   }
   println answer 
```

我得到错误 - 没有这样的属性：回答类...

但是，这有效：

```
def x = 1
def answer = ''
if (x==1) {
   answer = "yes"
   }
   println answer 
```

这是因为变量在 If 语句中时具有局部范围吗？有没有更好的编码方法，还是我只需要先在 If 语句之外声明所有变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:59:50.910

是的，您必须在外部范围内声明您的变量。

```
Principle #1: "A variable is only visible in the block it is defined in 
and in nested blocks". 
```

有关范围的更多信息：http: [//groovy.codehaus.org/Scoping+and+the+Semantics+of+%22def%22](http://groovy.codehaus.org/Scoping+and+the+Semantics+of+%22def%22)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T14:34:35.677

如果这是一个脚本，那么@0lukasz0 所说的不是 100% 正确的，因为：

```
def x = 1
if( x == 1 ) {
  // answer is previously undefined -- note no `def`
  answer = "yes"
}
println answer 
```

当变量`answer`进入当前脚本的绑定时仍然可以工作（因为它没有前面`def`），所以可以在`if`块外访问（上面的脚本打印`yes`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T23:28:49.603

您可以使用条件运算符来初始化这样的变量。

```
def x = 1    
def answer = x == 1? "yes" : null
println answer 
```

如果要初始化多个变量，Groovy 还支持多重赋值。

```
def (i, j, k) = x == 1? [ 1, 2, 3 ] : []
println "$i $j $k" 
```

# windows - java.io.IOException：不是 GZIP 格式的异常

> ID：10933263
> 
> 赞同：2
> 
> 时间：2012-06-07T13:52:40.580
> 
> 标签：windows, jsf-2, primefaces, glassfish-3, trinidad

我有一个使用 PRIMEFACES 3.3 SNAPSHOT 组件的 JSF 2.0 (Trinidad) 应用程序，我正在尝试使用 p:schedule 但每次调用带有标签的页面时都会出现异常。奇怪的是，当我使用没有 trinidad 的普通 JSF 应用程序时，它可以工作。

这是堆栈跟踪：`SEVERE: java.io.IOException: Not in GZIP format at java.util.zip.GZIPInputStream.readHeader(GZIPInputStream.java:137) at java.util.zip.GZIPInputStream.(GZIPInputStream.java:58) ) 在 org.apache.myfaces.trinidadinternal.renderkit.core.CoreResponseStateManager._restoreSerializedView(CoreResponseStateManager.java:289)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T06:00:34.430

我找到了我的代码的解决方案。只需将代码包装在`<h:form></h:form>`

# oracle10g - 设置 current_schema 后无法访问公共同义词

> ID：10933264
> 
> 赞同：1
> 
> 时间：2012-06-07T13:52:42.893
> 
> 标签：oracle10g

我需要在特权更高的帐户的架构中为普通用户提供一个脚本。我正在使用 set current_schema 来实现这一点。但是，我发现一旦更改了架构，公共同义词就不起作用了——除非我限定它，否则我无法访问第三个不同架构中的表：

```
>select count(*) from my_table;

  COUNT(*)
----------
     79982

>alter session set current_schema = admin_account;

Session altered.

>select count(*) from my_table;
select count(*) from my_table
                     *
ERROR at line 1:
ORA-00942: table or view does not exist

>select count(*) from other_account.my_table;

  COUNT(*)
----------
     79982 
```

有没有办法让同义词再次起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:28:51.180

`Public synonyms`可以访问`all users`。但是，每个用户都必须对基础对象具有适当的权限才能使用`synonym`.Check the priviledges for `admin_account`on table`my_table`

# php - php mysql ajax 实时搜索数组

> ID：10933266
> 
> 赞同：0
> 
> 时间：2012-06-07T13:52:46.327
> 
> 标签：php, mysql, ajax, arrays

我有一个 ajax 实时搜索脚本工作，只是它似乎只返回数组的第一行。不知道这是否与我的循环有关，但是，如果有人能发现错误，将非常感谢帮助，因为我似乎找不到它。我不包括 javascript，因为我很确定这不是错误，因为 php 文件正在触发。它只是呼应第一个打击而不是迭代其他打击。

```
//run query on dbase then use mysql_fetch_array to place in array form
while($a = mysql_fetch_array($res,MYSQL_BOTH))
{
    //lookup all hints from array if length of q>0
    if (strlen($q) > 0)
    {
        $hint="";
        for($i=0; $i<count($a); $i++)
        {
            if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q))))
            {
                $n = $a['first']." ".$a['last'];
                if ($hint=="")
                {
                    $hint='<a href="mailto.php">'.$n.'</a>'; 
                }
                else
                {
                    $hint=$hint.'<br><a href="mailto.php">'.$n.'</a>';// we do not seem to get here
                }
            }
        }
    }

// Set output to "no suggestion" if no hints were found
// or to the correct values
}//close while fetch
echo $hint; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:02:45.097

您在每次循环迭代时都会覆盖您的`$hint`变量。`while`尝试在`while`（删除您现在拥有的位置）之前声明它

```
$hint = "";
while($a = mysql_fetch_array($res,MYSQL_BOTH))
{ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:05:56.743

尝试使用此方法：

```
<?
$output = '';
while($a = mysql_fetch_array($res,MYSQL_BOTH)) {
    if (strlen($q) > 0) {
        for($i=0; $i<count($a); $i++) {
            if (strtolower($q)==strtolower(substr($a[$i],0,strlen($q)))) {
                $n = $a['first']." ".$a['last'];
                if ($output == "") {
                    $output = '<a href="mailto.php">'.$n.'</a>';
                } else {
                    $output .= '<br><a href="mailto.php">'.$n.'</a>';
                }
            }
        }
    }
}
echo $output;
?> 
```

# c# - XML 解析和转换（XSLT 或其他）

> ID：10933270
> 
> 赞同：2
> 
> 时间：2012-06-07T13:53:02.167
> 
> 标签：c#, xml, xslt, xpath, xml-parsing

我有几个以这种方式格式化的 xml 文件：

```
<ROOT>
  <OBJECT>
    <identity>
        <id>123</id>
    </identity>     
    <child2 attr = "aa">32</child2>
    <child3>
        <childOfChild3 att1="aaa" att2="bbb" att3="CCC">LN</childOfChild3>
    </child3>
    <child4>
        <child5>
            <child6>3ddf</child6>
            <child7>
                <childOfChild7 att31="RR">1231</childOfChild7>
            </child7>
        </child5>
    </child4>
  </OBJECT>
  <OBJECT>
    <identity>
        <id>124</id>
    </identity>     
    <child2 attr = "bb">212</child2>
    <child3>
        <childOfChild3 att1="ee" att2="ccc" att3="EREA">OP</childOfChild3>
    </child3>
    <child4>
        <child5>
            <child6>213r</child6>
            <child7>
                <childOfChild7 att31="EE">1233</childOfChild7>
            </child7>
        </child5>
    </child4>
  </OBJECT>
</ROOT> 
```

我怎样才能这样格式化？：

```
<ROOT>
    <OBJECT>    
        <id>123</id>
        <child2>32</child2> 
        <attr>aa</attr>
        <child3></child3>
        <childOfChild3>LN</childOfChild3>
        <att1>aaa</att1>
        <att2>bbb</att2>
        <att3>CCC</att3>
        <child4></child4>
        <child5></child5>
        <child6>3ddf</child6>
        <child7></child7>
        <childOfChild7>1231</childOfChild7>
        <att31>RR</att31>
    </OBJECT>
        <OBJECT>    
        <id>124</id>
        <child2>212</child2>    
        <attr>bb</attr>
        <child3></child3>
        <childOfChild3>LN</childOfChild3>
        <att1>ee</att1>
        <att2>ccc</att2>
        <att3>EREA</att3>
        <child4></child4>
        <child5></child5>
        <child6>213r</child6>
        <child7></child7>
        <childOfChild7>1233</childOfChild7>
        <att31>EE</att31>
    </OBJECT>   
</ROOT> 
```

我知道一些 C# 所以也许那里有一个解析器？还是一些通用的xslt？xml 文件是从客户端接收的一些数据，因此我无法控制它们将其发送给我的方式。

LE 基本上，当我试图在 excel 中测试这些数据时（例如，我想确保 childOfChild7 的属性对应于正确的身份 ID），我得到了很多空格。如果我在访问中导入以仅获取我想要的数据，我必须执行数千个子查询才能将它们全部放在一个漂亮的表中。基本上我只想查看一个对象的所有数据（一个对象 - 一行），然后删除/隐藏我不需要的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:32:29.823

你通过把它弄平来做到这一点。您获取 OBJECTS 的所有后代并将它们转换为元素。您真的应该亲自尝试一下，而不是仅仅接受我的代码，但它确实有效，因此您可以根据自己的想法对其进行测试。

```
XElement root1 = XElement.Load(file1);
XElement root = new XElement("ROOT",
    root1.Elements()
        .Select(o => new XElement(o.Name, o
            .Descendants()
            .Select(x =>
            {
                List<XElement> list = new List<XElement>();
                list.Add(new XElement(x.Name, x.HasElements ? "" : x.Value));
                if (x.HasAttributes)
                    list.AddRange(x.Attributes()
                        .Select(a => new XElement(a.Name, a.Value))
                        );
                return list;
            })
            ))
            .ToArray()); 
```

PS。您忘记`<identity></identity>`了结果集中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T04:36:18.313

**这是一个纯 XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="OBJECT//*[not(self::identity) and text()]">
  <xsl:copy>
   <xsl:apply-templates select="text()"/>
  </xsl:copy>
  <xsl:apply-templates select="@* | node()[not(self::text())]"/>
 </xsl:template>

 <xsl:template match="OBJECT//*[not(self::identity) and (not(text()))]">
  <xsl:copy/>
  <xsl:apply-templates select="@*"/>
  <xsl:apply-templates select="node()"/>
 </xsl:template>

 <xsl:template match="@*">
  <xsl:element name="{name()}">
   <xsl:value-of select="."/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="identity">
  <xsl:apply-templates/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<ROOT>
    <OBJECT>
        <identity>
            <id>123</id>
        </identity>
        <child2 attr = "aa">32</child2>
        <child3>
            <childOfChild3 att1="aaa" att2="bbb" att3="CCC">LN</childOfChild3>
        </child3>
        <child4>
            <child5>
                <child6>3ddf</child6>
                <child7>
                    <childOfChild7 att31="RR">1231</childOfChild7>
                </child7>
            </child5>
        </child4>
    </OBJECT>
    <OBJECT>
        <identity>
            <id>124</id>
        </identity>
        <child2 attr = "bb">212</child2>
        <child3>
            <childOfChild3 att1="ee" att2="ccc" att3="EREA">OP</childOfChild3>
        </child3>
        <child4>
            <child5>
                <child6>213r</child6>
                <child7>
                    <childOfChild7 att31="EE">1233</childOfChild7>
                </child7>
            </child5>
        </child4>
    </OBJECT>
</ROOT> 
```

**产生了想要的正确结果：**

```
<ROOT>
   <OBJECT>
      <id>123</id>
      <child2>32</child2>
      <attr>aa</attr>
      <child3/>
      <childOfChild3>LN</childOfChild3>
      <att1>aaa</att1>
      <att2>bbb</att2>
      <att3>CCC</att3>
      <child4/>
      <child5/>
      <child6>3ddf</child6>
      <child7/>
      <childOfChild7>1231</childOfChild7>
      <att31>RR</att31>
   </OBJECT>
   <OBJECT>
      <id>124</id>
      <child2>212</child2>
      <attr>bb</attr>
      <child3/>
      <childOfChild3>OP</childOfChild3>
      <att1>ee</att1>
      <att2>ccc</att2>
      <att3>EREA</att3>
      <child4/>
      <child5/>
      <child6>213r</child6>
      <child7/>
      <childOfChild7>1233</childOfChild7>
      <att31>EE</att31>
   </OBJECT>
</ROOT> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:40:04.917

只需使用 XmlSerializer 将其反序列化为一个类，这是一个[msdn 帖子](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.deserialize%28v=vs.71%29.aspx)，基本上您构建一个与您的 xml 结构匹配的类，然后让 XmlSerializer 类进行转换，您不需要创建自己的解析器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:04:20.623

我不熟悉 C#，但我希望这至少能让你入门。我必须做一些类似的事情，我会得到一个 XML 文件并将信息解析到数据库中。

我使用了 Java lib ~ [StAX](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.6/tutorial/doc/SJSXP3.html)。它将允许您使用父子系统轻松读取 XML 文件并将信息解析为另一个 XML 文件。我希望这有一点帮助。

# xml - InDesign CS6 是否支持 XSLT2？

> ID：10933275
> 
> 赞同：1
> 
> 时间：2012-06-07T13:53:09.407
> 
> 标签：xml, xslt-2.0, adobe-indesign

我现在使用 InDesign CS5.5，InDesign 仅支持 XSLT 1.0 用于导入或导出 XML。有谁知道 InDesign CS6 是否支持 XSLT 2.0？

我想直接在Adobe的论坛上问这个问题，但是我不能登录，很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:27:54.383

我只是做了一个快速的尝试，结果是模棱两可的。我认为 InDesign 会在您不调用 xslt 2 函数的情况下吃掉 xslt2。所以答案更多的是它可以接受 xslt 2.0 文件，但只能使用 1.0 语法：P

除非我错了，但大写函数例如在 Oxygen 上运行良好，但在 InDesign 中引发错误。

Loic [http://www.loicaigon.com](http://www.loicaigon.com)

# java - 休眠假阴性读取

> ID：10933276
> 
> 赞同：1
> 
> 时间：2012-06-07T13:53:09.970
> 
> 标签：java, hibernate

我有一个 Web 应用程序，它由一个具有两个操作的 Web 服务组成：`createA`和`createB`. 为端点注册了一个处理程序。此处理程序在收到请求时打开一个会话并启动一个事务。然后执行请求操作的代码。在响应被发回之前，事务被提交并且会话被关闭。

的代码`createA`包括创建一个类型的实体`A`并使用`Session.save()`方法将其持久化。在DEBUG模式下，`Session.save()`调用之后，可以看到会话的ActionQueue中有一个插入。

的代码`createB`包括：

*   检索先前创建的类型实体`A`
*   创建一个`B`引用实例的实体`A`（B 有一个表示关联的属性`A`）
*   更新`A`以引用的新实例`B`
*   调用`Session.save()`新的实例`B`
*   调用`Session.update()`新的修改实例`A`

但是在DEBUG模式下，调用`Session.save()`and后`Session.update()`，对应Session的ActionQueue为空。但是，事务提交后，我可以在数据库中看到创建的实体。

操作`createA`和`createB`按此顺序调用，无需调试。`B`当它尝试检索`A`先前使用条件和方法创建的实例时，在执行创建期间出现错误`Session.list()`。问题是`A`找不到的实例。

但是，如果我在 DEBUG 中重复相同的操作序列或`Thread.sleep(15s)`在两个操作的调用之间使用，`A`则可以找到 的实例。

谢谢

* * *

**编辑**：我忘了确切地说它适用于某些机器但不适用于其他机器。而且我看不出这些机器之间有任何区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:25:28.223

如果您对 createA 和 createB 使用相同的 Hibernate 会话，那么它将起作用。您可以将 Hibernate 会话存储在 Http 会话中以实现此目的（注意同步对会话对象的访问，因为来自同一浏览器会话的请求可以在不同的线程中进行）。

您的问题是，Hibernate 为每个会话打开一个新的数据库连接。现在您的数据库似乎没有同步语句。它可能发生在数据库中，选择在插入完成之前到达。如果这种情况发生与否，则仅取决于所涉及计算机的速度。使用调试模式或 sleep() 会使一台计算机变慢，这样就不会再出现问题了。

如果您想为这两个过程继续两个不同的会话，您可以

*   查找数据库的事务模式。一些数据库有脏读，没有正确的锁定或同步。检查您是否不小心使用了这种模式。
*   检查 JDBC 参数（它们可以在 hibernate connection.url 中使用）如果您的数据库有更改时间和同步的参数。
*   检查您的连接池（对于您正在使用的情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:36:37.153

问题是当您调用 Session.save() 时，Hibernate 不会将实体保存到数据库中。它只是准备稍后执行的语句。当事务结束或刷新会话时会发生这种情况。

您对 B 的调用有时可能发生在 A 请求的事务结束之前。这就是为什么如果你等待一会儿它会起作用的原因。

尝试在保存调用后添加 session.flush() 。这将强制 Hibernate 将更改持久化到数据库。

# javascript - JQuery 不允许我选择特定的单选按钮组

> ID：10933277
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:53:14.050
> 
> 标签：javascript, jquery, syntax, jquery-selectors

我实际上能够通过为我的单个单选按钮分配 ID 并以这种方式操作它们来解决我的问题，但我仍然很困扰我不明白为什么这不起作用。

这是交易：假设我有两组单选按钮，看起来像这样：

```
<input type="radio" name="RadioGroup1" id="Group1True" value="True" /> True
<input type="radio" name="RadioGroup1" id="Group1False" value="False" /> False

<input type="radio" name="RadioGroup2" id="Group2True" value="True" /> True
<input type="radio" name="RadioGroup2" id="Group2False" value="False" /> False 
```

我希望**RadioGroup2**按钮受到影响，具体取决于**RadioGroup1**中选择的内容。例如，如果选择了**ID="Group1True"**，那么我希望隐藏**RadioGroup2**按钮（我将**RadioGroup2**按钮包裹在 <div> 标记中以执行此操作）。

但是，如果选择了**ID="Group1False"**，我不仅希望**RadioGroup2**按钮重新出现（效果很好），我还希望**RadioGroup2**按钮被*重置*和*取消选中*。 **这**是我遇到问题的地方。

我已经尝试了以下所有组合（甚至还有一些我不记得了）。 *他们都没有*做我想做的事。

```
if ( $("#RadioGroup1:checked").val() == "False" )
{

// HERE'S where I run into problems:

    // This line not only unchecks the RadioGroup2 buttons, it also unchecks
    // the RadioGroup1 buttons, which I DO NOT want it to do!!!!!!!!!

    $("input:radio[@name=RadioGroup2]").removeAttr("checked");

    // This line gives me a JavaScript error saying:
    // "Object doesn't support this property or method"!!!!!!!

    $("input[@name=RadioGroup2]").removeAttr("checked");

    // This line does absolutely nothing

    $("RadioGroup2").removeAttr("checked");

} 
```

正如我所说，我能够通过引用 ID 而不是无线电组名称来解决我的问题，但我仍然很沮丧，因为我不知道为什么这不起作用。

有人可以启发我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:54:29.170

您的选择器语法不正确。

```
$('input[name="RadioGroup1"]').whatever(); 
```

（实际上我猜它不是“不正确”而是“错误”；您的选择器正在寻找“@name”属性而不是“name”的值。）

这`#`是“id”值，而不是“name”，所以`#RadioGroup1`对你不起作用。

`.removeAttr("checked")`您也可以将“checked”属性设置为`false`：

```
$('input[name="RadioGroup1"]').prop("checked", false); 
```

您还可以为单选按钮组赋予“类”值，这比使用元素名称更简洁：

```
$('input.radio-group-1') 
```

管他呢。当然，这意味着更多的标记。

我个人认为这是更好的方法。当你弄乱 DOM 时，你应该操作 DOM 对象**属性**，而不是元素属性。但是，删除该属性可能会起作用。

# java - 如何将行从选择查询动态插入到java中的另一个表？

> ID：10933285
> 
> 赞同：1
> 
> 时间：2012-06-07T13:53:41.903
> 
> 标签：java, sql, prepared-statement, resultset, batch-updates

我有一个返回结果集的选择查询（使用准备好的语句）。例如查询可以是：

```
 SELECT * FROM TABLE; 
```

我希望这个查询的结果插入到另一个表中，选择查询存储在数据库中，通常是一个连接查询，所以我不知道表的列，它的每一行是如何可能的结果集以在表单中插入行：

```
INSERT INTO TABLE VALUES ('THE VALUES FROM THE SELECTED ROW IN THE RESULTSET'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T13:56:17.470

你可以在一个声明中做到这两点：

```
insert into TableB (Col1, col2, col3, col4, etc..)
select Col1, col2, col3, col4, etc.. from Table A where Col5='condition' 
```

# qtp - QTP中对象的索引值

> ID：10933289
> 
> 赞同：0
> 
> 时间：2012-06-07T13:53:56.063
> 
> 标签：qtp

我有两个问题。1）假设我们在网页中有5个对象。那么如何在运行时找出这些对象的索引值。2）假设在下一个版本中，如果索引发生变化，我们的代码肯定会失败。那么在这种情况下如何编写代码。是否有任何逻辑可以在不更改代码的情况下克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:13:35.440

根据我的经验，webelements 的索引总是与它们在 DOM 中出现的顺序相同。请记住，DOM 中 web 元素的数量和位置是动态的，并且可能与您可以通过“查看页面源”获得的源不同。

当索引是唯一的唯一标识符并且索引更改时，您必须更改代码。尝试找到除索引以外的唯一标识符或标识符组合以使其唯一。如果可用，它更喜欢使用`html id`，因为它*应该*是独一无二的，但也`innerhtml`或`outerhtml`可能是不错的选择。

如果这些都无法实现并且测试自动化是您公司内的一个重要项目，您应该与您的开发人员交谈（当然，当软件是在内部创建时）。解释你在做什么（他们*会*感兴趣，他们是你知道的贵公司的解决方案怪胎）并解释你的问题以及他们是否可以帮助你。让他们中的一个想出一个想法，`id`为每个 html 对象添加一个等等，问题就解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T15:32:48.853

它们是什么类型的物体？索引通常是识别/操作对象的一种糟糕的方式。将对象添加为表格并使用子项进行测试可能是更好的解决方案。

# android - 同一活动中更改布局的Android错误

> ID：10933290
> 
> 赞同：0
> 
> 时间：2012-06-07T13:54:02.510
> 
> 标签：android, android-linearlayout, numberformatexception

我正在开发一个安卓应用程序。这是一个考试应用程序。当用户单击答案时，应用程序会`$setContentView();`在同一活动中更改布局。但它给出了布局错误**原因：java.lang.NumberFormatException：无法将'@2131230721'解析为整数**

我的布局文件在下面，如果你需要我可以把我的项目 myserver. 我可以粘贴我的活动代码，但这只是基本的`setContentView()`。我猜我的一个 id 导致了错误，但我找不到它。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#fff"
android:orientation="vertical"
android:weightSum="1" >

<LinearLayout
    android:id="@+id/soruNoIleriVeGeri"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="0.01"
    android:weightSum="1" >

    <LinearLayout
        android:id="@+id/SoruLayout"
        android:layout_width="fill_parent"
        android:layout_height="60dp"
        android:background="@drawable/question_top_plain"
        android:weightSum="1" >

        <LinearLayout
            android:id="@+id/OncekiSoru"
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <ImageButton
                android:id="@+id/qIPrevious"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/back_button"
                android:onClick="qIPrevious"
                android:paddingLeft="5dp" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="57dp"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" >

                <ImageButton
                    android:id="@+id/imageButton2"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:src="@drawable/about_question" />
            </LinearLayout>
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >

            <ImageButton
                android:id="@+id/ImageButton01"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:src="@drawable/add_favourite" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/goToQuestion"
                android:layout_width="56dp"
                android:layout_height="wrap_content"
                android:onClick="onshowQuestion"
                android:src="@drawable/show_question" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="50dp"
            android:layout_height="45dp"
            android:layout_weight="0.57" >

            <ImageButton
                android:id="@+id/homeButton"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="1"
                android:background="@drawable/tab_home"
                android:onClick="goHome" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >

            <ImageButton
                android:id="@+id/imageButton1"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="@drawable/next_button"
                android:onClick="qINextQuestion" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/question_top_plain"
    android:weightSum="1" >

    <LinearLayout
        android:id="@+id/resultIconPlain"
        android:layout_width="84dp"
        android:layout_height="fill_parent"
        android:paddingLeft="20dp" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="234dp"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/resultView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1.13"
            android:gravity="center_horizontal"
            android:text="TextView"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#111" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="59dp"
    android:background="@drawable/question_top_plain" >

    <LinearLayout
        android:id="@+id/dogruCevap"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.01"
        android:weightSum="1" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >

            <TextView
                android:id="@+id/StatikDogruCevap"
                android:layout_width="126dp"
                android:layout_height="wrap_content"
                android:text="@string/StatikDogruCevap"
                android:textStyle="@style/boldText" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent"
            android:layout_weight="0.01" >

            <TextView
                android:id="@+id/dogruCevapView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:paddingRight="10dp"
                android:text="TextView"
                android:textStyle="@style/rightAnswer" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/cevabiniz"
        android:layout_width="fill_parent"
        android:layout_height="54dp"
        android:layout_weight="0.01"
        android:weightSum="1" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >

            <TextView
                android:id="@+id/cevabinizView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:gravity="center_horizontal"
                android:paddingLeft="10dp"
                android:text="TextView"
                android:textStyle="@style/rightAnswer" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="fill_parent" >

            <TextView
                android:id="@+id/StatikCevap"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/StatikCevap"
                android:textStyle="@style/boldText" />
        </LinearLayout>
    </LinearLayout>
</LinearLayout>

<ScrollView
    android:id="@+id/ScrollView01"
    android:layout_width="fill_parent"
    android:layout_height="350px"
    android:fillViewport="true" >

    <LinearLayout
        android:id="@+id/dogruCevapAyrinti"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.60"
        android:isScrollContainer="true"
        android:minHeight="400px"
        android:scrollbarAlwaysDrawHorizontalTrack="true"
        android:scrollbars="vertical" >

        <TextView
            android:id="@+id/dogruCevapAyrintiView"
            android:layout_width="fill_parent"
            android:layout_height="324dp"
            android:scrollHorizontally="false"
            android:scrollbarAlwaysDrawHorizontalTrack="true"
            android:scrollbars="vertical"
            android:text="TextView"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textColor="#111" >
        </TextView>
    </LinearLayout>
  </ScrollView>

</LinearLayout> 
```

这是错误代码，myActivity 对土耳其变量名表示抱歉

```
 at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
    at      

       com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:123)
    at android.app.ActivityThread.main(ActivityThread.java:4363)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:521)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
    at dalvik.system.NativeStart.main(Native Method)
        java.lang.reflect.InvocationTargetException
    at android.widget.TextView.<init>(TextView.java:320)
    at java.lang.reflect.Constructor.constructNative(Native Method)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:446)
    at android.view.LayoutInflater.createView(LayoutInflater.java:500)
    ... 41 more
        java.lang.NumberFormatException: unable to parse '@2131230721' as integer
    at java.lang.Integer.parse(Integer.java:374)
    at java.lang.Integer.parseInt(Integer.java:363)
    at com.android.internal.util.XmlUtils.convertValueToInt(XmlUtils.java:121)
    at android.content.res.TypedArray.getInt(TypedArray.java:201)
    at android.widget.TextView.<init>(TextView.java:647)

    package com.eandroid.workingSet;

 import java.io.InputStream;
 import java.util.ArrayList;
 import java.util.List;

 import javax.xml.parsers.DocumentBuilder;
 import javax.xml.parsers.DocumentBuilderFactory;

 import org.apache.http.HttpResponse;
 import org.apache.http.NameValuePair;
 import org.apache.http.client.HttpClient;
 import org.apache.http.client.methods.HttpPost;
 import org.apache.http.message.BasicNameValuePair;
 import org.w3c.dom.Document;
 import org.w3c.dom.Element;
 import org.w3c.dom.Node;
 import org.w3c.dom.NodeList;
 import org.xml.sax.InputSource;

 import android.app.Activity;
 import android.app.TabActivity;
 import android.content.Intent;
 import android.content.res.Configuration;
 import android.graphics.Color;
 import android.os.Bundle;
 import android.util.Log;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.LinearLayout;
 import android.widget.TextView;
 import android.widget.Toast;

     import com.eandroid.entity.Question;

    public class QuestionInterfaceActivity extends Activity {
LinearLayout layoutForA;
LinearLayout layoutForB;
LinearLayout layoutForC;
LinearLayout layoutForD;
LinearLayout layoutForE;
LinearLayout choiceATotalPlain;
LinearLayout choiceBTotalPlain;
LinearLayout choiceCTotalPlain;
LinearLayout choiceDTotalPlain;
LinearLayout choiceETotalPlain;
LinearLayout allTotalPlain;
List<Question> questionList = new ArrayList<Question>();
Node node = null;
NodeList nodeList = null;
NodeList nodeListForTestInfo = null;
InputStream is = null;

private TextView choiceA;
private TextView choiceB;
private TextView choiceC;
private TextView choiceD;
private TextView choiceE;
private TextView questionText;
private TextView soruIdText;
private TextView soruIdEv;
private TextView soruBilgileriView;
private TextView cevabinizView;
private TextView dogruCevapView;
private TextView dogruCevapAyrintiView;
private TextView resultView;
private int currentQuestionIndex;
Question currentQuestion = null;
private String testName = null;
HttpClient httpclient;
HttpPost httppost;
ArrayList<NameValuePair> postParameters;
HttpResponse response;
InputStream contentStream;
private String rightAnswers = "";
private String userAnswers = "";
private String resultOfAnswers = "";
private String userId = "1";
private static String testRelationId;
private LinearLayout resultIconPlain;

private static String willPostUrl = 
     "http://balabanhafriyat.com/SchoolProjectWebSide/postFromPhone/SendDataFromPhone";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (savedInstanceState != null) {
        Toast.makeText(QuestionInterfaceActivity.this, "Hoşgeldin  Hacı",
                Toast.LENGTH_SHORT).show();
    }
    settleOrientation();
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        testName = extras.getString("testName");
    }
    try {
        is = getAssets().open(testName);
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document doc = db.parse(new InputSource(is));
        doc.getDocumentElement().normalize();
        nodeList = doc.getElementsByTagName("question");
        nodeListForTestInfo = doc.getElementsByTagName("testInfo");
        Node testNode = nodeListForTestInfo.item(0);
        testRelationId = parseItToStringByName(testNode, "testRelationId");

    } catch (Exception e) {
        e.printStackTrace();
    }
    currentQuestionIndex = 1;
    showQuestion();
}

public void settleOrientation() {
    int setLayout = getResources().getConfiguration().orientation;
    switch (setLayout) {
    case 1:
        setContentView(R.layout.buttontry);
        loadDesign();
        break;
    case 2:
        setContentView(R.layout.buttontry);
        break;
    default:
        break;
    }
}

public void callEvaluationActivity(int optionToSeeQuestion,
        String userAnswer) {

    setContentView(R.layout.evaluation_screen);

    // resultView = (TextView) findViewById(R.id.resultView);

    cevabinizView = (TextView) findViewById(R.id.cevabiniz);
    dogruCevapView = (TextView) findViewById(R.id.rightAnswer);

    dogruCevapAyrintiView = (TextView) 
            findViewById(R.id.dogruCevapAyrintiView);
    // soruBilgileriView.setText(currentQuestion.getShortInfo());

    dogruCevapAyrintiView.setText(currentQuestion.getRightAnswerDetail());
    dogruCevapView.setText(currentQuestion.getRightAnswer());
    if (optionToSeeQuestion == 2) {
        cevabinizView.setText(userAnswer);
        if (currentQuestion.getRightAnswer().equals(userAnswer)) {
            resultView.setTextColor(Color.GREEN);
            resultView.setText("Doğru Cevap");
            resultOfAnswers = resultOfAnswers + "1$";
        } else {
            resultView.setTextColor(Color.RED);
            resultView.setText("Cevap Yanlış !!! ");
            resultOfAnswers = resultOfAnswers + "0$";
        }
        userAnswers = userAnswers + userAnswer + "$";
        rightAnswers = rightAnswers + currentQuestion.getRightAnswer()
                + "$";
    }
}

public void loadDesign() {
    allTotalPlain = (LinearLayout) findViewById(R.id.allTotalPlain);
    allTotalPlain.setBackgroundResource(R.drawable.yellow_button);
    choiceATotalPlain = (LinearLayout) findViewById(R.id.choiceTotalPlain);
    choiceBTotalPlain = (LinearLayout) findViewById(R.id.choiceBTotalPlain);
    choiceCTotalPlain = (LinearLayout) findViewById(R.id.choiceCTotalPlain);
    choiceDTotalPlain = (LinearLayout) findViewById(R.id.choiceDTotalPlain);
    choiceETotalPlain = (LinearLayout) findViewById(R.id.choiceETotalPlain);
    layoutForA = (LinearLayout) findViewById(R.id.abuttonLayout);
    layoutForB = (LinearLayout) findViewById(R.id.bButtonLayout);
    layoutForC = (LinearLayout) findViewById(R.id.cButtonLayout);
    layoutForD = (LinearLayout) findViewById(R.id.dButtonLayout);
    layoutForE = (LinearLayout) findViewById(R.id.ebuttonLayout);
    createButton("A");
    createButton("B");
    createButton("C");
    createButton("D");
    createButton("E");
}

private void showQuestion() {
    questionText = (TextView) findViewById(R.id.soruTextView);
    choiceA = (TextView) findViewById(R.id.choiceA);
    choiceB = (TextView) findViewById(R.id.choiceB);
    choiceC = (TextView) findViewById(R.id.choiceC);
    choiceD = (TextView) findViewById(R.id.choiceD);
    choiceE = (TextView) findViewById(R.id.choiceE);
    currentQuestion = setQuestionFieldById(currentQuestionIndex);
    questionText.setText(currentQuestion.getQuestionText());

    choiceA.setText(currentQuestion.getChoiceA());
    choiceB.setText(currentQuestion.getChoiceB());
    choiceC.setText(currentQuestion.getChoiceC());
    choiceD.setText(currentQuestion.getChoiceD());
    choiceE.setText(currentQuestion.getChoiceE());
    /*
     * consumerAnswer .setOnCheckedChangeListener(new
     * OnCheckedChangeListener() { public void onCheckedChanged(RadioGroup
     * group, int checkedId) { if (choiceA.getId() == checkedId) {
     * approveAnswer(2, "A"); } if (choiceB.getId() == checkedId) {
     * 
     * approveAnswer(2, "B"); } if (choiceC.getId() == checkedId) {
     * 
     * approveAnswer(2, "C"); } if (choiceD.getId() == checkedId) {
     * 
     * approveAnswer(2, "D"); } if (choiceE.getId() == checkedId) {
     * 
     * approveAnswer(2, "E"); } } });
     */
}

private void approveAnswer(int optionToSeeQuestion, final String userChoice) {
    callEvaluationActivity(optionToSeeQuestion, userChoice);
}

// Eger optionToSeeQuestion 1 ise kullanıcının cevap karsılastırılması
// yapılmamalı 2 ise yapılmalı

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK && requestCode == 999) {
        if (data.hasExtra("action")) {
            String aim = data.getExtras().getString("aim");
            Toast.makeText(this, "Ne yapmak istiyorsunuz" + aim,
                    Toast.LENGTH_LONG).show();
        }
    }
    super.onActivityResult(requestCode, resultCode, data);
}

public void qINextQuestion(View view) {

    if (currentQuestionIndex == nodeList.getLength() - 1) {
        Toast.makeText(QuestionInterfaceActivity.this, "Son Sorudasınız",
                Toast.LENGTH_SHORT).show();
    } else {
        currentQuestionIndex++;
        settleOrientation();
        showQuestion();
    }
}

public void qIPrevious(View view) {
    if (currentQuestionIndex == 1) {
        Toast.makeText(QuestionInterfaceActivity.this, "İlk Sorudasınız",
                Toast.LENGTH_SHORT).show();
    } else {
        currentQuestionIndex--;
        settleOrientation();
        showQuestion();
    }
}

public Question setQuestionFieldById(int questionId) {
    Question q = new Question();
    for (int i = 0; i < nodeList.getLength(); i++) {
        node = nodeList.item(i);

        int idFromXml = Integer.parseInt(parseItToStringByName(node,
                "questionNumber"));
        if (questionId == idFromXml) {
            q.setQuestionId(questionId);
            q.setChoiceA(parseItToStringByName(node, "choiceA"));
            q.setChoiceB(parseItToStringByName(node, "choiceB"));
            q.setChoiceC(parseItToStringByName(node, "choiceC"));
            q.setChoiceD(parseItToStringByName(node, "choiceD"));
            q.setChoiceE(parseItToStringByName(node, "choiceE"));
            q.setQuestionText(parseItToStringByName(node, 
                            "questionText"));
            q.setRightAnswer(parseItToStringByName(node,  
                            "rightAnswer"));
            q.setRightAnswerDetail(parseItToStringByName(node,
                    "answerDetail"));

        }

    }
    return q;
}

public String parseItToStringByName(Node node, String nodeName) {
    Element mainELement = (Element) node;
    NodeList questionList = mainELement.getElementsByTagName(nodeName);
    Element questionElement = (Element) questionList.item(0);
    NodeList question = questionElement.getChildNodes();
    String result = question.item(0).getNodeValue().replaceAll("\n", "")
            .replaceAll("\t", "");
    result.trim();
    return result;
}

@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        setContentView(R.layout.landscapequestion);
        showQuestion();
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        setContentView(R.layout.buttontry);
        showQuestion();
    }
}

@Override
public void onBackPressed() {
    beforeQuitProcess();
    super.onBackPressed();

}

public void beforeQuitProcess() {
    postParameters = new ArrayList<NameValuePair>();
    postParameters.add(new BasicNameValuePair("testId", testRelationId));
    postParameters
            .add(new BasicNameValuePair("rightAnswers", rightAnswers));
    postParameters.add(new BasicNameValuePair("userAnswers", userAnswers));
    postParameters.add(new BasicNameValuePair("userAnswerAndResult",
            resultOfAnswers));
    postParameters.add(new BasicNameValuePair("userId", userId));
    PostDataToServer postDataToServer = new PostDataToServer();
    HttpResponse response = postDataToServer.postData(willPostUrl,
            postParameters);
    contentStream = postDataToServer.parseHttpResponseToStream(response);
    String responseFromServer = postDataToServer
            .convertStreamToString(contentStream);
    if (responseFromServer != null) {
        Toast.makeText(QuestionInterfaceActivity.this, "Kayıt Edildi",
                Toast.LENGTH_SHORT).show();
    }
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {

    Toast.makeText(QuestionInterfaceActivity.this, "Çıktı Hacı",
            Toast.LENGTH_SHORT).show();
    // Save UI state changes to the savedInstanceState.
    // This bundle will be passed to onCreate if the process is
    // killed and restarted.
    savedInstanceState.putBoolean("MyBoolean", true);
    savedInstanceState.putDouble("myDouble", 1.9);
    savedInstanceState.putInt("MyInt", 1);
    savedInstanceState.putString("MyString", "Welcome back to Android");
    // etc.
    super.onSaveInstanceState(savedInstanceState);
    finish();

}

public void onDestroy() {
    super.onDestroy();
    android.os.Process.killProcess(android.os.Process.myPid());
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    Toast.makeText(QuestionInterfaceActivity.this, "Hoşgeldin  Hacı",
            Toast.LENGTH_SHORT).show();
    super.onRestoreInstanceState(savedInstanceState);
    // Restore UI state from the savedInstanceState.
    // This bundle has also been passed to onCreate.
    boolean myBoolean = savedInstanceState.getBoolean("MyBoolean");
    double myDouble = savedInstanceState.getDouble("myDouble");
    int myInt = savedInstanceState.getInt("MyInt");
    String myString = savedInstanceState.getString("MyString");

}

@Override
protected void onResume() {

    super.onResume();
}

public void onshowAnswer(View v) {
    callEvaluationActivity(1, "A");
}

public void onshowQuestion(View view) {
    setContentView(R.layout.buttontry);
    loadDesign();
    showQuestion();

}

public void goHome(View view) {
    beforeQuitProcess();
    Intent intent = new Intent(QuestionInterfaceActivity.this,
            LoginEvaluation.class);
    intent.putExtra("userId", userId);
    startActivity(intent);
}

public void createButton(final String text) {
    Button button = new Button(this);
    button.setTextColor(Color.parseColor("#000000"));
    button.setBackgroundResource(R.drawable.button_selector);
    button.setOnClickListener(new OnClickListener() {
        public void onClick(View view) {
            clickMeMyFriend(view, text);
        }
    });
    button.setText(text);
    if (text.equals("A")) {
        layoutForA.addView(button);
    }
    if (text.equals("B")) {
        layoutForB.addView(button);
    }
    if (text.equals("C")) {
        layoutForC.addView(button);
    }
    if (text.equals("D")) {
        layoutForD.addView(button);
    }
    if (text.equals("E")) {
        layoutForE.addView(button);
    }
}

private void clickMeMyFriend(View view, String chooice) {
    if (chooice.equals("A")) {
        approveAnswer(2, "A");
    }
    if (chooice.equals("B")) {
        approveAnswer(2, "B");
    }
    if (chooice.equals("C")) {
        approveAnswer(2, "C");
    }
    if (chooice.equals("D")) {
        approveAnswer(2, "D");
    }
    if (chooice.equals("E")) {
        approveAnswer(2, "E");
    }

}

public void onTotalAClick(View view) {

    switch (view.getId()) {

    case R.id.choiceTotalPlain:
        choiceATotalPlain.setBackgroundResource(R.drawable.black_button);
        approveAnswer(2, "A");
        break;
    case R.id.choiceBTotalPlain:
        choiceBTotalPlain.setBackgroundResource(R.drawable.black_button);
        approveAnswer(2, "B");
        break;
    case R.id.choiceCTotalPlain:
        approveAnswer(2, "C");
        choiceCTotalPlain.setBackgroundResource(R.drawable.black_button);
        break;
    case R.id.choiceDTotalPlain:
        approveAnswer(2, "D");
        choiceDTotalPlain.setBackgroundResource(R.drawable.black_button);
        break;
    case R.id.choiceETotalPlain:
        approveAnswer(2, "E");
        choiceETotalPlain.setBackgroundResource(R.drawable.black_button);
        break;
    default:
        break;
    }

}

    } 
```

感谢所有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:28:35.407

非常感谢 Barak，Alex Lockwood 和其他人的努力在我的布局中

```
android:textStyle="@style/boldText" 
```

在这个语句中，值只能是粗体或正常等。这个语句应该像

```
style="@style/choiceStyle" 
```

感谢您的帮助。我决定在 00:00 之后不工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:31:04.303

你是说你试图`setContentView`在一个活动中多次使用吗？

从我读过的所有内容来看，这是行不通的。

如果您想在不切换活动的情况下更改 UI，则需要使用片段，或者将所需的所有视图放入一个布局中，并仅隐藏/显示活动每个部分的相关视图`setVisibility()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:11:02.237

你得到 a 的原因`NumberFormatException`是因为`@2131230721`不是整数。这是你应该做的：

1.  **重新做整个 XML 布局。**我不是在开玩笑……您发布的布局绝对是一场灾难。对不起，如果那是卑鄙的，但我不能让你继续认为这是制作布局的正确方法:)。

    据我所知，您将每个视图都包装在 a`LinearLayout`中以实现某种边距/填充效果。这就是`android:margin`and`android:padding`属性的用途。不要用奇怪的`android:layout_weight`值使事情变得过于复杂，因为这会使你的应用程序在你的布局膨胀时运行得更慢。如果您发现您的 XML 超过 3 或 4 `LinearLayout`s，您应该退后一步，看看您是否缺少更简单、更有效的解决方案。嵌套`LinearLayout`s 也是不受欢迎的，因为在运行时给它们充气是很昂贵的，结果会耗尽你的电池。

2.  执行`Project`-->`Clean`并重新启动 Eclipse。

3.  **发布更多信息**。例如，您的*整个*logcat 输出会很好（不仅仅是一行）。发布您的代码也几乎*总是*一个好主意。从您提供的少量信息中很难理解问题。请记住，提供尽可能多的信息对您是有益的，因为我们拥有的信息越多，我们就越有可能帮助回答您的问题。您还应该向我们提供行号和/或指出错误发生在哪些行上。

哦，是的，欢迎来到 StackOverflow ......：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:12:55.183

重量是否可能导致问题？我以前从未将权重用作小数，我认为它们必须是实数，我的意思是像 1 或 2 等。楼层数。只是一个想法

从我可以看出它与数字和文本视图有关，这可能是文本视图的颜色、重量、ID 或样式。

style/boldText 和 style/rightAnswer 中有什么？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T13:58:44.583

您的布局文件确实以 a 开头`LinearLayout`并定义了 a `xmlns:android="http://schemas.android.com/apk/res/android"`，但您最终得到了一个结束`<ScrollView>`标签？有什么遗漏吗？另外，javaCode 会很棒！

顺便说一句：您是否尝试使用 Project->Clean 在 Eclipse 中“清理”您的项目？这会重置 R 文件并且通常会有所帮助！

# java - Tomcat 内存管理

> ID：10933291
> 
> 赞同：7
> 
> 时间：2012-06-07T13:54:12.243
> 
> 标签：java, hibernate, tomcat, tomcat7

我正在运行 Tomcat7，服务器相当强大，8 GB RAM 8 核。

![tomcat 白白占用大量内存？](../Images/af9034add967d14e8584910d6187a71e.png)

我的问题是RES内存越来越高，直到服务器不再响应，甚至没有调用OnOutOfMemoryError。

Tomcat配置：

```
-Xms1024M
-Xmx2048M
-XX:PermSize=256m
-XX:MaxPermSize=512m
-XX:+UseConcMarkSweepGC
-XX:OnOutOfMemoryError='/var/tomcat/conf/restart_tomcat.sh' 
```

内存信息：

```
Memory:     Non heap memory = 106 Mb (Perm Gen, Code Cache),
Loaded classes = 14,055,
Garbage collection time = 47,608 ms,
Process cpu time = 4,296,860 ms,
Committed virtual memory = 6,910 Mb,
Free physical memory = 4,906 Mb,
Total physical memory = 8,192 Mb,
Free swap space = 26,079 Mb,
Total swap space = 26,079 Mb
Perm Gen memory:    88 Mb / 512 Mb    ++++++++++++
Free disk space:    89,341 Mb 
```

与 top 命令相比，Tomcat 使用的内存看起来并没有那么高。

![应用内存图](../Images/4fb119777eaa39fdffc1542682d76bf4.png)

`java.net.SocketException: No buffer space available`在尝试连接到 SMTP 服务器或尝试连接到 facebook 服务器时，我也遇到过这种情况。

我使用 Hibernate，带有 c3p0 连接池，配置如下：

```
 <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="hibernate.connection.url">jdbc:mysql://urldb/schema?autoReconnect=true</property>
        <property name="hibernate.connection.username">username</property>
        <property name="hibernate.dialect">org.hibernate.dialect.MySQL5InnoDBDialect</property>
        <property name="hibernate.connection.password"></property>
        <property name="connection.characterEncoding">UTF-8</property>

        <property name="hibernate.c3p0.acquire_increment">1</property>
        <property name="hibernate.c3p0.idle_test_period">300</property>
        <property name="hibernate.c3p0.timeout">5000</property>
        <property name="hibernate.c3p0.max_size">50</property>
        <property name="hibernate.c3p0.min_size">1</property>
        <property name="hibernate.c3p0.max_statement">0</property>
        <property name="hibernate.c3p0.preferredTestQuery">select 1;</property>
        <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property> 
```

我找不到任何东西...有人暗示我应该在哪里寻找吗？

谢谢！

**[更新 1] 堆转储：**

```
HEAP HISTOGRAM :

class [C                                    269780  34210054
class [B                                    5600    33836661
class java.util.HashMap$Entry               221872  6212416
class [Ljava.util.HashMap$Entry;            23797   6032056
class java.lang.String                      271170  5423400
class org.hibernate.hql.ast.tree.Node       103588  4972224
class net.bull.javamelody.CounterRequest    28809   2996136
class org.hibernate.hql.ast.tree.IdentNode  23461   2205334
class java.lang.Class                       14677   2113488
class org.hibernate.hql.ast.tree.DotNode    13045   1852390
class [Ljava.lang.String;                   48506   1335600
class [Ljava.lang.Object;                   12997   1317016 

Instance Counts for All Classes (excluding platform) :

103588 instances of class org.hibernate.hql.ast.tree.Node
33366 instances of class antlr.ANTLRHashString
28809 instances of class net.bull.javamelody.CounterRequest
24436 instances of class org.apache.tomcat.util.buf.ByteChunk
23461 instances of class org.hibernate.hql.ast.tree.IdentNode
22781 instances of class org.apache.tomcat.util.buf.CharChunk
22331 instances of class org.apache.tomcat.util.buf.MessageBytes
13045 instances of class org.hibernate.hql.ast.tree.DotNode
10024 instances of class net.bull.javamelody.JRobin
9084 instances of class org.apache.catalina.loader.ResourceEntry
7931 instances of class org.hibernate.hql.ast.tree.SqlNode 
```

**[更新 2] server.xml ：**

```
<Connector port="8080" protocol="HTTP/1.1"
               connectionTimeout="20000"
               redirectPort="8443"
               URIEncoding="UTF-8"
               maxThreads="150"
               minSpareThreads="25"
               maxSpareThreads="75"
               enableLookups="false"
               acceptCount="1024"
               server="unknown"
               address="public_ip"
    /> 
```

****[更新 3] 日志文件的输出：****

```
 2012-06-04 06:18:24,152 [http-bio-ip-8080-exec-3500] ERROR org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/api].[Jersey REST Service]- Servlet.ser
vice() for servlet [Jersey REST Service] in context with path [/socialapi] threw exception
java.net.SocketTimeoutException: Read timed out

    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:129)
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:532)
    at org.apache.coyote.http11.InternalInputBuffer.fill(InternalInputBuffer.java:501)
    at org.apache.coyote.http11.InternalInputBuffer$InputStreamInputBuffer.doRead(InternalInputBuffer.java:563)
    at org.apache.coyote.http11.filters.IdentityInputFilter.doRead(IdentityInputFilter.java:118)
    at org.apache.coyote.http11.AbstractInputBuffer.doRead(AbstractInputBuffer.java:326)
    at org.apache.coyote.Request.doRead(Request.java:422) 
```

**[更新 4] ServletContext**

我`ServletContextListener`在我的应用程序中使用 a 来实例化控制器并使用`event.getServletContext().setAttribute`. 这些控制器加载配置和翻译（Perm 中的 88Mb）。

然后使用我使用的数据库：

```
SessionFactory sf = dbManager.getSessionFactory(DatabaseManager.DB_KEY_DEFAULT);
Session session = sf.openSession();
Transaction tx = null; 

try {
    tx = session.beginTransaction();

    //Do stuuf

    tx.commit();

} catch (Exception e){
    //Do something
} finally {
    session.close();
} 
```

1.  这可能是泄漏的来源吗？
2.  为什么不使用手动事务/会话，那你会怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T14:00:04.333

试试这个参数：

```
+XX:+HeapDumpOnOutOfMemoryError -XX:+HeapDumpPath=dump.log 
```

也尝试使用较低的启动内存参数`-Xms`。

然后您可以检查转储以查看问题是否是对象分配。

运行时尝试

```
jps 
```

`Tomcat`这将输出所有java进程，比如说`PID`4444：

```
jmap -dump:format=b,file=heapdump 4444 
```

和

```
jhat heapdump 
```

如果在执行 jhat 时内存不足，只需添加更多内存。从那里您可以检查应用程序的堆。

另一种方法是启用 Hibernate 统计信息以检查您没有检索更多对象。尽管看起来每小时进行一次完整的垃圾收集应该不是问题（在那里做得更好）。

```
-verbose:gc -Xloggc:/opt/tomcat/logs/gc.out -XX:+PrintGCDetails -XX:+PrintGCTimeStamps 
```

并以 GCViewer 为例，查看内存的每个空间（ternured、eden、survivor、perm）。

另一个方便的工具：

```
jstack 4444 > stack.txt 
```

这将检索在 pid 4444 的 java 进程中运行的每个线程的完整堆栈跟踪。

请记住，如果您`Tomcat`以 root 或其他用户身份启动，则需要特权。

```
jps 
```

不会输出您没有权限的进程，因此您无法连接到它。

由于我不知道您的应用程序是关于什么的（因此我不知道它的要求），300 万个实例看起来很多。

通过`Hibernate statistics`您可以查看您实例化最多的类。

然后调整`eden and ternured`垃圾回收的比例会更有效。

新实例化的对象进入伊甸园。当它填满一个次要 gc 触发器时。未删除的内容将进入幸存者空间。当它填满时，它会变成 ternured。当 ternured 满时会出现 Full gc。

在这张图片中（这是不准确的），我将`String`那些成为实习生和内存映射文件（不在堆中）放在一边。看看您最常实例化哪些类。密集使用`String`可能会导致烫发迅速填满。

我猜你这样做了，但是使用托管会话工厂，例如 Spring（如果在你的堆栈中），并避免手动管理事务和会话。

请记住，当没有对象引用它时，对象会在 GC 中被删除。因此，只要在您的应用程序中可以访问对象，该对象就会保留。

如果您的 ServletContextListener 实例化控制器并存储在事件 getServletContext 中。确保之后完全删除引用，如果保留引用，则不会删除对象，因为它们仍然可以访问。

如果您管理自己的事务和会话（如果您不能使用框架，这很好），那么您必须处理代码维护和`Spring-tx`例如已经解决和改进的错误。

我个人会利用`FOSS`. 但当然有时你不能扩大堆栈。

如果您正在使用`Hibernate`我会查看`Spring-orm`并`Spring-tx`管理事务和会话。也看看`Hibernate patter Open Session In View`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:40:57.723

我还建议您下载 Visual VM 1.3.3，安装所有插件，并将其附加到 Tomcat PID，这样您就可以实时查看发生了什么。为什么要等待线程转储？它还会告诉你 CPU、线程、所有堆代、哪些对象消耗的内存最多等。

# c# - HttpWebRequest 自动化安全请求

> ID：10933292
> 
> 赞同：1
> 
> 时间：2012-06-07T13:54:13.707
> 
> 标签：c#, wpf, httpwebrequest, fiddler, webautomation

我过去做过网络自动化，我使用 fiddler 并在 C# 中重新创建请求。我目前正在致力于自动化的网站在提琴手中没有任何可查看的 POST 或 GET 请求。一切都被列为安全或简单地标记为“隧道到”有没有办法弄清楚这些请求是什么并复制它们？或者我最好的选择是简单地使用 webBrowser 控件并以这种方式自动化它？

由于速度和安全性，我更喜欢使用 HttpWebRequests 或类似的东西，但我愿意接受其他建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:58:03.473

我假设您询问的是 Fiddler 默认不解密的 HTTPS 请求。要允许解密，请转到工具 > Fiddler 选项 > HTTPS 并确保选中 *Capture HTTPS CONNECTs *和*解密 HTTPS 流量*复选框

# wordpress - 如何在 wordpress 帖子中为特定类别使用自定义永久链接

> ID：10933295
> 
> 赞同：3
> 
> 时间：2012-06-07T13:54:19.657
> 
> 标签：wordpress, permalinks

我当前的永久链接设置为 /%postname%/。

我想保留这个。但我想为特定类别“博客”使用自定义永久链接。

谁能帮助我，如何在不使用插件的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-20T21:25:39.090

我找到了这个解决方案：“将自定义分类标签添加到您的 WordPress 永久链接”。它也可能对您有所帮助。见这里：[http ://shibashake.com/wordpress-theme/add-custom-taxonomy-tags-to-your-wordpress-permalinks](http://shibashake.com/wordpress-theme/add-custom-taxonomy-tags-to-your-wordpress-permalinks)

# redis - Redis Db - 观察密钥是否存在或创建

> ID：10933297
> 
> 赞同：1
> 
> 时间：2012-06-07T13:54:25.280
> 
> 标签：redis, servicestack

我正在尝试使用 Redis db（ServiceStack 客户端）实现唯一索引

一般

*   检查唯一索引重复
*   如果存在唯一索引，则返回警告
*   WATCH 唯一索引（用于竞争条件）
*   未结交易
*   插入新记录，插入新记录唯一索引
*   关闭交易

我怎样才能摆脱第一步？

观看存在。我与更改密钥无关。我与创造或存在有关。（肯定不在我的交易范围内）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T13:59:38.047

如果您尝试使用 redis 来检查重复项，请使用 hashset：

[http://redis.io/commands#hash](http://redis.io/commands#hash)

您如何使用 servicestack 客户端？与本机客户端？打字客户端？（然后我可以告诉你如何做到这一点）

并使用该命令：[http ://redis.io/commands/hsetnx](http://redis.io/commands/hsetnx)

# c++ - c ++：如何使用sqlite3从客户端向数据库中插入值

> ID：10933301
> 
> 赞同：0
> 
> 时间：2012-06-07T13:54:45.787
> 
> 标签：c++, sqlite, gsoap

我正在使用此代码插入数据，但在硬代码中插入数据，但我需要使用 c++ 从用户端插入数据，任何人都可以坚持我：**

```
#include <iostream>
 using namespace std;
#include "sqlite3.h"
 int main (int argc, const char * argv[]) {

sqlite3 *db;
sqlite3_open("test1.db", & db);

string createQuery = "CREATE TABLE IF NOT EXISTS items (userid INTEGER PRIMARY KEY, ipaddr TEXT,username TEXT,useradd TEXT,userphone INTEGER,age INTEGER, "
                                                "time TEXT NOT NULL DEFAULT (NOW()));";
  sqlite3_stmt *createStmt;
  cout << "Creating Table Statement" << endl;
  sqlite3_prepare(db, createQuery.c_str(), createQuery.size(), &createStmt, NULL);
  cout << "Stepping Table Statement" << endl;
  if (sqlite3_step(createStmt) != SQLITE_DONE) cout << "Didn't Create Table!" << endl;

  string insertQuery = "INSERT INTO items (time, ipaddr,username,useradd,userphone,age) VALUES ('', '192.167.37.1','rahul da','benerghatta','9966524824',24);"; // WORKS!
  sqlite3_stmt *insertStmt;`enter code here`
  cout << "Creating Insert Statement" << endl;
  sqlite3_prepare(db, insertQuery.c_str(), insertQuery.size(), &insertStmt, NULL);
  cout << "Stepping Insert Statement" << endl;
  if (sqlite3_step(insertStmt) != SQLITE_DONE) cout << "Didn't Insert Item!" << endl;

  string selectQuery = "select * from items where ipaddr='192.167.37.1' & username= 'rahul';";
  sqlite3_stmt *selectStmt;
     cout << "Creating select Statement" << endl;
     sqlite3_prepare(db, selectQuery.c_str(), selectQuery.size(), &selectStmt, NULL);
     cout << "Stepping select Statement" << endl;
     if (sqlite3_step(selectStmt) != SQLITE_DONE) cout << "Didn't Select Item!" << endl;

     cout << "Success!" << endl;

   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:16:46.823

这实际上取决于您存储的数据中的内容。如果您将其保存在特定变量中，那么您可以使用它 `std::stringsteam`来实现您想要做的事情：

```
std::stringstream insertQuery;
insertQuery << "INSERT INTO items (time, ipaddr,username,useradd,userphone,age)"
               " VALUES ('" << time
            << "', '" << ipaddr
            << "', '" << username
            << "', '" << useradd
            << "', '" << userphone
            << "', " << age << ")";
sqlite3_prepare(db, insertQuery.str().c_str(), insertQuery.size(), &insertStmt, NULL); 
```

请注意对 stringstream 的附加调用`.str()`以返回字符串。

当然，您必须确保您的数据对于您要插入的列类型有效。如果您的输入直接来自用户，则尤其如此 - 注意常见的陷阱，例如嵌入式引号和元字符。

# facebook - 从页面流中检索精选照片集

> ID：10933310
> 
> 赞同：0
> 
> 时间：2012-06-07T13:55:53.190
> 
> 标签：facebook, facebook-fql, photos

我正在为一个非营利组织开展宣传活动。我们要求人们将他们举着牌子的照片上传到非营利组织的 Facebook 页面。由于它们没有在时间轴上清楚地显示，我们希望抓取这些照片并将它们显示在非营利组织网站的页面上。

获取所有照片很容易。我正在使用以下 FQL 来获取它们：

```
SELECT post_id, actor_id, message, attachment, place, created_time 
  FROM stream WHERE source_id = PAGE_ID and source_id <> actor_id 
      AND attachment.media <> '' AND created_time > 1338834720 
  LIMIT 50 
```

问题是，人们上传到网站的其他照片我们不希望在此图库中出现。我想做的是进一步过滤这个结果集，这样我们只得到页面或页面管理员喜欢或评论过的照片。这就是我卡住的地方。

当我将其转换为多查询并将上述查询的结果输入：

```
SELECT post_id FROM like WHERE user_id = PAGE_ID AND post_id IN (SELECT post_id FROM #query1) 
```

我收到一个 OAuth 错误，我只能像登录用户一样查询。即使在使用 PHP SDK 作为应用程序进行身份验证时也会发生这种情况。

我曾尝试让人们在发布时在他们的消息中添加一个文本字符串，但这并没有发生。有些人将这个字符串添加到非营利组织不想要的照片中，而非营利组织眼中最好的照片中没有那个字符串。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:46:03.523

好的，回答了我自己的问题。

我通过 PHP SDK 使用这个 FQL 多查询来获取精选的照片组。我决定发表评论让我的任何页面管理员：

```
 {
  'activity': 
     "SELECT post_id FROM stream WHERE source_id = PAGE_ID 
      AND attachment.fb_object_type = 'photo' AND created_time > 1338834720 
      AND comments.count > 0 LIMIT 100",
  'commented':
     "SELECT post_id, text, fromid FROM comment 
      WHERE post_id IN (SELECT post_id FROM #activity) 
      AND fromid IN (SELECT uid FROM page_admin WHERE page_id = PAGE_ID)", 
   'accepted':
      "SELECT post_id, actor_id, message, attachment, place, created_time, likes 
       FROM stream WHERE post_id IN (SELECT post_id FROM #commented) 
       ORDER BY likes.count", 
    'images': 
      "SELECT pid, src, src_big, src_small, src_width, src_height FROM photo 
       WHERE pid IN (SELECT attachment.media.photo.pid FROM #accepted)",
    'users':
       "SELECT name, uid, current_location, locale FROM user 
        WHERE uid IN (SELECT actor_id FROM #accepted)",
     'pages':
       "SELECT name, page_id FROM page 
        WHERE page_id IN (SELECT actor_id FROM #accepted)",
     'places': 
       "SELECT name, page_id, description, display_subtext, latitude, longitude 
        FROM place WHERE page_id IN (SELECT place FROM #accepted)"
     } 
```

现场网站在这里： http: [//getwellgabby.org/show-us-a-sign](http://getwellgabby.org/show-us-a-sign)。后端有很多 PHP 来组合结果并使用ThickBox 进行照片显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:48:47.440

Try doing your queries as [Batch Requests](https://developers.facebook.com/docs/reference/api/batch/). You can „name” queries in there to reference their results in other queries, and you can specify different access tokens for each individual operation.

# android - 如何在运行时获取 imageview 中的图像并将其与其他存储的图像进行比较？

> ID：10933318
> 
> 赞同：0
> 
> 时间：2012-06-07T13:56:21.590
> 
> 标签：android, android-imageview

我已经将图像存储到数组中**（像这样的 int image[0][0]=R.Drawable.img1）。**我想**将 image[0][0] 与 imageview 中的图像进行比较。**

如果我单击图像视图，我想知道图像视图中的图像，图像将会改变。所以**我需要知道imageview中的图像是什么？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:09:20.910

我建议`ImageView`为此使用标签。

每当您设置`ImageView`' 的图像时，还要设置标签，然后稍后检查标签以查看图像是什么。

```
image.setImageResource(R.drawable.pic1);
image.setTag(R.drawable.pic1);

...

long id = (long) image.getTag();
if (id == R.drawable.pic1) {
...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:24:31.420

[您可以使用View.setTag()](http://developer.android.com/reference/android/view/View.html#setTag%28java.lang.Object%29)存储当前可绘制对象的 id 。稍后您可以通过[View.getTag()](http://developer.android.com/reference/android/view/View.html#getTag%28%29)检索并将其与存储在数组中的值进行比较。

# jquery - 在滚动时将 div 粘贴到父 div 的顶部

> ID：10933320
> 
> 赞同：2
> 
> 时间：2012-06-07T13:56:26.737
> 
> 标签：jquery

这是将 a 粘贴`div`到页面顶部的问题的变体。相反，我需要一个 div 来坚持其父 div 的顶部，该 div 已设置为`overflow: auto`.

[http://jsfiddle.net/7F22m/ （代码从](http://jsfiddle.net/7F22m/)[这里](https://stackoverflow.com/questions/7819842/make-div-stick-to-the-top-of-the-screen-and-stop-before-hitting-the-footer) 拼凑而成。）

`#sticky``#wrapper`一旦到达顶部，就应该粘在顶部`#wrapper`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T19:39:56.407

他们有多种方式来完成这项工作......一些指导：http: [//jsfiddle.net/WykZ5/3/](http://jsfiddle.net/WykZ5/3/)

上面的代码并不完美，但应该是一个开始。它不起作用的原因是代码没有启动。

您是否使用 console.log() 进行调试？如果不是谷歌它。这将有很大帮助。

另请查看：http: [//twitter.github.com/bootstrap/javascript.html#scrollspy](http://twitter.github.com/bootstrap/javascript.html#scrollspy)

我主要使用此代码作为参考： [https ://github.com/twitter/bootstrap/blob/master/docs/assets/js/application.js#L61](https://github.com/twitter/bootstrap/blob/master/docs/assets/js/application.js#L61)

# c++ - 如何创建可以访问文件路径与磁盘相同的虚拟文件系统

> ID：10933322
> 
> 赞同：1
> 
> 时间：2012-06-07T13:56:52.833
> 
> 标签：c++, windows, filesystems

我需要在内存或磁盘上创建 FileSystem 类型的东西，可以像磁盘上的文件一样访问它，哪个路径可以在 fopen() 等函数中使用。

详细信息：我正在使用 AddFontResourceEx 函数在应用程序中加载字体。由于此功能需要文件路径，因此文件需要存在于磁盘上。但我要求用户不能访问/查看字体文件。

我尝试了 AddFontMemResourceEx 函数，但加载的字体不可枚举，因此用户无法在应用程序中看到字体。我还尝试了一些创建 VFS 的库，但它们像数据库一样工作，即您可以创建文件/目录并访问它们。但不能在 AddFontResourceEx 或任何其他函数中使用它们的文件路径。

是否有某种方法可以在内存或磁盘上创建一个可以通过我的应用程序访问的虚拟文件系统，并且我可以在创建的这个虚拟文件系统上写入/读取文件，并且 AddFontResourceEx 函数可以使用它的文件路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:26:33.430

它真的不能工作。是的，您可以添加“虚拟”文件系统。但它要么对用户 X 可见，要么不可见。Windows 上的访问控制基于每个用户，而不是每个程序。因此，如果用户 X 可以在应用程序 A 中看到字体，那么他也可以在应用程序 B 中看到它——即使 B 是 Explorer.EXE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:47:50.040

如果用户是管理员，如果他们有足够的决心，你就不能真正阻止他们看到字体文件。例如，他们可以对您的程序进行逆向工程，以弄清楚您是如何生成文件的，并手动重复该过程以制作自己的副本。或者（即使您可以以某种方式将文件权限绑定到您的进程）他们可以将自己的代码插入到您的进程中以检索文件，或直接从内存中检索字体信息。

如果它足以让他们很难看到字体文件，你可以试试这个：

1.  在 temp 文件夹中创建一个目录，对当前用户具有只写权限，对其他任何人没有权限。

2.  创建一个具有长、复杂、加密随机名称的子目录，并且对当前用户具有完全权限。（名称每次都应该不同。）

3.  将字体文件写入子目录并加载。

4.  删除字体文件并删除这两个目录。

整个过程只需要几分之一秒，这会使用户难以覆盖权限并检索文件。如果他们使用调试器单步执行程序，那么我猜你不走运，但正如我已经指出的那样，没有什么能阻止每个人。

据推测，另一种选择是只使用 AddFontMemResourceEx 并忍受字体不可枚举的事实。您只需要更改代码，以便在枚举字体的任何地方手动将您的字体添加到列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:39:15.597

*如果你没有得到正确的答案，也许你没有问对正确的问题*

您的帖子标题提到了“虚拟文件系统”，但是。后来，您提到“访问字体”。

**“虚拟文件系统”是一个以多种方式使用的模棱两可的术语。**

一种常见情况是向操作系统添加设备或网络

在您的情况下，似乎是从应用程序访问。

有几种方法（“库”）可以模拟或使用文件系统。

其中一些独立于真实文件系统工作。您与他们一起工作，将数据保存在那些“虚拟”文件夹和文件中，并从真实和虚拟的文件夹和文件中复制数据。

其中一些作为扩展层在真实文件系统和编程文件系统之间工作。

示例：我使用的应用程序需要临时快速的 IO 访问。找到了一个库，当您想在真实文件系统中创建文件夹或保存文件时，它就完成了。

此外，我可以添加存储在内存中的“虚拟驱动器”，但可以通过文件系统操作访问。应用程序完成后，“硬盘驱动器”及其数据将从内存中删除。

看来您的情况与我的示例相似。

你想要一个“虚拟文件系统”库来做什么？

我在网上看到了几个库，用于 C++、开源、免费软件和商业。

这取决于你想做什么，找出哪个库更适合你的情况。

祝你好运

# c# - 退订匿名委托事件

> ID：10933328
> 
> 赞同：4
> 
> 时间：2012-06-07T13:57:21.613
> 
> 标签：c#, events, delegates, anonymous

我在想办法取消订阅一些匿名委托事件时遇到了一些麻烦，这些事件是我在预先制作的帮助文件中找到的，有助于在运行时移动控件。我想取消订阅这些事件的原因是控件（在这种情况下为按钮）将再次被锁定并且无法移动。这是助手类中的方法：

```
 public static void Init(Control control)
    {
        Init(control, Direction.Any);
    }

    public static void Init(Control control, Direction direction)
    {
        Init(control, control, direction);
    }

 public static void Init(Control control, Control container, Direction direction)
    {
        bool Dragging = false;
        Point DragStart = Point.Empty;

        control.MouseDown += delegate(object sender, MouseEventArgs e)
        {
            Dragging = true;
            DragStart = new Point(e.X, e.Y);
            control.Capture = true;
        };
        control.MouseUp += delegate(object sender, MouseEventArgs e)
        {
            Dragging = false;
            control.Capture = false;
        };
        control.MouseMove += delegate(object sender, MouseEventArgs e)
        {
            if (Dragging)
            {
                if (direction != Direction.Vertical)
                    container.Left = Math.Max(0, e.X + container.Left - DragStart.X);
                if (direction != Direction.Horizontal)
                    container.Top = Math.Max(0, e.Y + container.Top - DragStart.Y);
            }
        };

    } 
```

这是我通过调用该方法订阅这些事件的方式；

```
 ControlMover.Init(this.Controls["btn" + i]); 
```

我已经在 MSDN 上阅读了一些关于通过创建一个保存这些事件的局部变量然后通过这种方式取消订阅来取消订阅这些的方法，但我似乎无法在我自己的项目中使用它。如何取消订阅这些事件，以便我的控件再次固定到位？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T14:00:27.797

匿名委托不能保证编译器创建的唯一性，当取消订阅时，相同代码缺乏唯一性将导致它无法取消订阅正确的处理程序。安全地这样做的唯一方法是保留对委托的引用并使用它来取消订阅或将其更改为完整方法。

我相信，基于对象实例和方法签名，代表是平等的。

可能的重复：

[如何删除 lambda 事件处理程序](https://stackoverflow.com/questions/1362204/c-how-to-remove-a-lambda-event-handler)

基本上，保留参考：

```
MouseEventHandler handler = (sender, e) =>
        {
            Dragging = true;
            DragStart = new Point(e.X, e.Y);
            control.Capture = true;
        };

control.MouseDown += handler;
control.MouseDown -= handler; 
```

或者把匿名方法变成合适的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T13:59:13.630

简而言之，你不能用`anonymous`委托来做到这一点。

如果您想*取消订阅*该事件，请定义一个`delegate/action`并遵循您引用的模式。

# android - 使用 Eclipse ADT 插件 R19 导出时 Proguard 不起作用

> ID：10933329
> 
> 赞同：4
> 
> 时间：2012-06-07T13:57:22.820
> 
> 标签：android, adt, proguard

`Export > Export Android Application`当我通过或通过导出我的应用程序时`Android Tools > Export Signed Application Package`，我无法让 Proguard 工作。

我所知道的关于如何启用 Proguard 的只是取消注释该行

```
proguard.config=${sdk.dir}\tools\proguard\proguard-android.txt:proguard-project.txt 
```

在`project.properties`.

我也尝试将我的配置文件放在那里。也不行。

导出包中的`classes.dex`文件包含类私有方法的名称，例如`onConfirmButtonClicked`. 因此，Proguard 没有完成工作的可能性超过 99%。

之后我在`proguard-project.txt`文件中放了一些随机字符，但我没有收到任何错误。构建的详细输出根本没有提到 Proguard。

我想知道那里有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-21T12:33:28.790

当您将项目导出到 .apk 文件时，Proguard 会发挥作用，您应该将所需的配置放在文件 (.cfg) 中，并在**project.properties中指向该文件**

```
proguard.config=${dir}\YOURCONFIGFILE.cfg 
```

在该配置文件中，您应该告诉 proguard 保留项目中的所有关键元素。举个例子 ：

```
-injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar
-libraryjars /usr/local/java/android-sdk/platforms/android-9/android.jar

-dontpreverify
-repackageclasses ''
-allowaccessmodification
-optimizations !code/simplification/arithmetic
-keepattributes *Annotation*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider

-keep public class * extends android.view.View {    
    public <init>(android.content.Context);
    public <init>(android.content.Context, android.util.AttributeSet);
    public <init>(android.content.Context, android.util.AttributeSet, int);
    public void set*(...);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.content.Context {
   public void *(android.view.View);
   public void *(android.view.MenuItem);
}

-keepclassmembers class * implements android.os.Parcelable {
    static ** CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-keepclassmembers class * {
    @android.webkit.JavascriptInterface <methods>;
} 
```

希望这可以帮助！

# android - Android 中的 TabWidget 错误

> ID：10933331
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:57:34.470
> 
> 标签：android

我正在关注 androiddevelopers 网站上的教程。我复制了代码，mTabHost 给出了错误。我查看是否需要导入任何内容，但所有内容都已导入。

编码

```
package com.tabTestx;

import android.app.Activity;
import android.app.TabActivity;
import android.os.Bundle;

public class TabTestXActivity extends TabActivity {
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mTabHost = getTabHost();

    mTabHost.addTab(mTabHost.newTabSpec("tab_test1").setIndicator("TAB 1").setContent(R.id.textview1));
    mTabHost.addTab(mTabHost.newTabSpec("tab_test2").setIndicator("TAB 2").setContent(R.id.textview2));
    mTabHost.addTab(mTabHost.newTabSpec("tab_test3").setIndicator("TAB 3").setContent(R.id.textview3));

    mTabHost.setCurrentTab(0);
}
} 
```

有人请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:03:51.193

你忘记声明`mTabHost`为`TabHost`

```
TabHost mTabHost = getTabHost(); //declare as TabHost in your code
^^^^^^^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:03:53.957

你在 xml 中有 android:id/tabhost 吗？

```
 <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:layout_marginBottom="5dp"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:layout_marginTop="5dp"
                android:background="@drawable/rounded_border"/>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" 
                android:background="@android:color/white">

            </FrameLayout>
        </LinearLayout>
    </TabHost> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:05:16.997

像这样导入 TabHost，

```
TabHost mTabHost = getTabHost(); 
```

有关更多信息，请参阅这些链接，[http://developer.android.com/resources/tutorials/views/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)和[http://saigeethamn.blogspot.in/2011/03/tablayout-or-tabbed-view -android.html](http://saigeethamn.blogspot.in/2011/03/tablayout-or-tabbed-view-android.html)

# jquery - Rails & UJS：将表单序列化为 JSON 并提交

> ID：10933335
> 
> 赞同：0
> 
> 时间：2012-06-07T13:57:50.490
> 
> 标签：jquery, ruby-on-rails-3, ujs

我想在提交表单之前将表单参数序列化为 JSON。UJS 中是否有任何诡计允许这样做？

# php - 如何在我的“img”文件夹中上传 Facebook 图片？

> ID：10933342
> 
> 赞同：0
> 
> 时间：2012-06-07T13:58:08.063
> 
> 标签：php, facebook-graph-api, facebook-php-sdk

我正在使用 Facebook php SDK 将我的用户注册到他们的 Facebook 帐户。我将所需的所有数据都存储在我的 sql 数据库中，并且可以通过以下方式访问图片：

```
<img src="https://graph.facebook.com/<?php echo $user;?>/picture"> 
```

我想将图像（实际图像而不仅仅是链接）存储在我的一个服务器文件夹中，这样用户就可以在不访问他的 Facebook 个人资料的情况下更改它。

有可能做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:21:45.167

这应该做你想做的，并将图像放入 images/facebook/[USERID].jpg。

请记住，您可能应该使用 cURL 而不是 file_get_contents，这样您就可以为超时和较长的响应时间做好准备（这将与 facebook API 一起使用。

```
<?php
    $imageData = file_get_contents("https://graph.facebook.com/" . $user . "/picture");
    file_put_contents("images/facebook/" . $user . ".jpg", $imageData);
?> 
```

这就是您使用 cURL 的方式（未经测试，但应该可以）：

```
<?php
    $facebookCurl = curl_init();

    curl_setopt($facebookCurl, CURLOPT_URL, "https://graph.facebook.com/" . $user . "/picture");
    curl_setopt($facebookCurl, CURLOPT_HEADER, 0);
    curl_setopt($facebookCurl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($facebookCurl, CURLOPT_TIMEOUT, 5);
    $imageData = curl_exec($facebookCurl);
    curl_close($facebookCurl);

    file_put_contents("images/facebook/" . $user . ".jpg", $imageData);
?> 
```

# php - 如何将大型 xml（自定义）文件导入 wordpress

> ID：10933345
> 
> 赞同：-1
> 
> 时间：2012-06-07T13:58:21.040
> 
> 标签：php, xml, wordpress

我是 Wordpress 的新手，尝试了几个插件来导入 xml 文件。这个文件相当大。我无法导入它。有什么教程或建议吗？

**编辑：** XML文件的格式如下

```
<articles>
<article id="1240xxxx" timestamp="April 27, 2009, 8:26 am" published="1">
    <title>Theme Parks in Tenerife</title>
    <pageName>theme-parks-in-tenerife-408</pageName>
    <imageFile>blogthemeparkstenerife.jpg</imageFile>
    <imageAlt>Theme Parks in Tenerife</imageAlt>
    <content>
        <p>Anyone taking a 
            <a href="xxxxxxxxxxxxxxx">holiday in Tenerife</a>.
        </p>
    </content>
    <summary>Theme Parks in Tenerife offer an alternative to the traditional beach holiday, providing entertainment for families.</summary>
    <tags>
        <tag>tenerife</tag>
        <tag>holidays</tag>
        <tag>parks</tag>
        <tag>beaches</tag>
        <tag>island</tag>
    </tags>
</article> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:45:06.357

因此标记与 Wordpress 导入功能不兼容。这留下了另外两个选择：

*   使用 XSLT 将 XML 转换为与 wordpress 兼容的 XML。
*   将 XML 导入 MySQL 数据库。这可能需要使用 XSLT 将 XML 转换为 SQL。

两者都需要对 wordpress 内部结构有所了解。在第一种情况下，您需要了解 wordpress 导出标记，在第二种情况下，您需要了解 wordpress 帖子（以及标签和类别）的数据库方案。在这两种情况下，您都需要学习一些 XSLT，但无论如何这是一个真正有价值的工具。

“最后的手段”选项类似于解析 XML 和编写提交文章的脚本。此选项的可行性取决于您在 Wordpress 中“自动”提交文章的方式。我知道有一种方法可以通过电子邮件提交文章，但我不知道它对标签和类别的支持程度如何。

这些可能不是最漂亮的选择，无论如何你可能会被搞砸。但这是我至少能做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:57:15.583

您可以使用脚本语言将 XML 解析为不同的格式。我会使用 JQuery 来熟悉 [这里有一个很好的指南：http: [//net.tutsplus.com/tutorials/javascript-ajax/use-jquery-to-retrieve-data-from-an-xml-file/]](http://net.tutsplus.com/tutorials/javascript-ajax/use-jquery-to-retrieve-data-from-an-xml-file/)

您可以使用该方法创建一个此导入插件可以使用的 HTML 文档：[http ://wordpress.org/extend/plugins/import-html-pages/](http://wordpress.org/extend/plugins/import-html-pages/)

或者，您可以使用其中一个 CSV 导入器并将 XML 呈现为有用的格式。

如果它很大，您的浏览器/脚本可能会遇到困难，但应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-07T08:20:01.690

使用适用于 WordPress 的 WP All Import 插件。

WP All Import v3 刚刚发布，它支持大文件（100Mb 及以上）。

免费版：[http](http://wordpress.org/extend/plugins/wp-all-import/) ://wordpress.org/extend/plugins/wp-all-import/ （足够好，除非您需要导入自定义帖子类型或下载图像）

付费版： http: [//www.wpallimport.com/](http://www.wpallimport.com/)

# javascript - Internet Explorer Ajax 调用，缓存响应问题

> ID：10933348
> 
> 赞同：1
> 
> 时间：2012-06-07T13:58:25.013
> 
> 标签：javascript, jquery, ajax

我有这个 javascript 函数，我在*等待页面*中使用它来检查我的 Web 应用程序中的导出过程是否正在运行或已完成：

```
function waitForExport(token) {
    $.ajax({
        type : "GET",
        url : 'export/status',
        data : {
            token : token
        },
        success : function(data) {
            if (data.status == 'running') {
                $('#waitContent').append('<span>RUNNING</span>');
                setTimeout("waitForExport('" + token + "')", 5000);
            }
            if (data.status == 'done') {
                $('#waitContent').append('<div>DONE</div>');
                location.href = "export/results";
            }
        },
        error : function(jqXHR, textStatus, errorThrown) {
            alert(jqXHR.responseText);
        }
    });
} 
```

它适用于 Chrome 和 Firefox，但不适用于 IE。

使用 Internet Explorer 7/8，该进程似乎始终在运行，因为除了第一次之外，它不会发出任何其他服务器请求（我使用 Eclipse 调试器进行了验证）。似乎它缓存了第一个服务器响应，然后不再访问服务器......

任何的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T13:59:01.620

您可以使用：

```
cache: false 
```

在您的`$.ajax()`选项对象中。

它的作用是将 a 附加`_=[TIMESTAMP]`到 URL 的末尾（不带`[ ]`）。这使得浏览器认为它总是一个完全不同的请求，因为请求中使用了不同的查询字符串。

# google-maps-api-3 - 如何制作允许用户选择多个地图的 Google Fusion Table 地图？

> ID：10933349
> 
> 赞同：1
> 
> 时间：2012-06-07T13:58:27.127
> 
> 标签：google-maps-api-3, google-fusion-tables

我是一个 JavaScript 新手，已经开始使用 Google Fusion Tables，我想知道这两个方面的专家是否可以帮助我解决问题。

这是我从一个 Fusion Table 制作的四张地图（它们是嵌入代码）：

```
<iframe width="800" height="600" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?viz=MAP&amp;q=select+col4%3E%3E1+from+13A1jVfCkkhx7UORDIVPxKdHkDTks3_2X_9hFprs&amp;h=false&amp;lat=38&amp;lng=-98&amp;z=4&amp;t=1&amp;l=col4%3E%3E1&amp;y=2&amp;tmplt=2"></iframe>
<br><br>
<iframe width="800" height="600" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?viz=MAP&amp;q=select+col4%3E%3E1+from+13A1jVfCkkhx7UORDIVPxKdHkDTks3_2X_9hFprs&amp;h=false&amp;lat=38&amp;lng=-98&amp;z=4&amp;t=1&amp;l=col4%3E%3E1&amp;y=3&amp;tmplt=3"></iframe>
<br><br>
<iframe width="800" height="600" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?viz=MAP&amp;q=select+col4%3E%3E1+from+13A1jVfCkkhx7UORDIVPxKdHkDTks3_2X_9hFprs&amp;h=false&amp;lat=38&amp;lng=-98&amp;z=4&amp;t=1&amp;l=col4%3E%3E1&amp;y=4&amp;tmplt=4"></iframe>
<br><br>
<iframe width="800" height="600" scrolling="no" frameborder="no" src="https://www.google.com/fusiontables/embedviz?viz=MAP&amp;q=select+col4%3E%3E1+from+13A1jVfCkkhx7UORDIVPxKdHkDTks3_2X_9hFprs&amp;h=false&amp;lat=38&amp;lng=-98&amp;z=4&amp;t=1&amp;l=col4%3E%3E1&amp;y=5&amp;tmplt=5"></iframe> 
```

我想制作一张地图，其中包含每个地图的下拉菜单作为选项。有谁知道如何做到这一点？

这是一个例子：Texas Tribune 有[一个 Fusion Table 地图](http://www.texastribune.org/library/data/redistricting-viewer/)，左上角有一个下拉菜单，用户可以选择四种不同的地图（州议会区、州参议院区等）。

我查看了源代码，但我认为我对 Fusion Tables API 还是有点陌生​​。

如果有人知道我如何解决这个问题，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:38:48.153

我将有四个 Fusion 表/地图，并使用您网页上的代码仅显示从下拉列表中选择的一个。这是您的 Javascript 的工作，而不是 Fusion。我有类似的东西，用户可以选择（通过 GET 链接）显示哪个地图。不过，这一切都在 PHP 中。

# sql - 这种情况下怎么写SQL查询

> ID：10933350
> 
> 赞同：0
> 
> 时间：2012-06-07T13:58:27.297
> 
> 标签：sql

我有一个名为“出席”的表，如下所示：

```
Sno  SecurityGroup  SecurityName  Designation   AttendanceStatus
----------------------------------------------------------------
1    JJ             Ram           officer       present
2    JJ             Raja          Guards        Present
3    JJ             Rani          LadyGuards    Present
4    JJ             Ramu          officer       present 
```

我需要输出作为每个指定中存在的证券数量的计数，如下所示：

```
SecutityGroup Officer  Guards  LadyGuards
-----------------------------------------
JJ              2        1         1 
```

有人可以帮我写一个查询来获得这个输出吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:01:40.853

```
select SecurityGroup,
    sum(case when Designation = 'officer' then 1 end) as Officer,
    sum(case when Designation = 'Guards' then 1 end) as Guards,
    sum(case when Designation = 'LadyGuards' then 1 end) as LadyGuards 
from Attendance
group by SecurityGroup 
```

或者，如果您可以将信息放在行中，您可以执行以下操作：

```
select SecurityGroup, Designation, count(*) as Count
from Attendance
group by SecurityGroup, Designation 
```

显然，第二种方法是首选，因为它不那么脆弱，并且如果`Designations`在没有任何修改的情况下添加更多内容，它将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:38:03.457

这也可以通过 PIVOT 来完成，具体取决于您的数据库：

```
SELECT SecurityGroup, SUM([officer]) AS Officers, SUM([Guards]) AS Guards, SUM([LadyGuards]) AS LadyGuards
FROM Attendance
PIVOT
    (
        COUNT(Sno)
        FOR Designation IN ([officer], [Guards], [LadyGuards])
    ) as pvt
WHERE AttendanceStatus = 'Present'
GROUP BY SecurityGroup 
```

如果您希望根据表中的任何内容动态生成列列表，这会变得更加困难，但这避免了对大量子查询的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:05:58.667

```
 select distinct SecurityGroup,
    select sum(*) from Attendance where designation = 'officer') as Officer,
    select sum(*) from Attendance where designation = 'Guards') as Guards,
    select sum(*) from Attendance where designation = 'LadyGuards') as LadyGuards    
from Attendance 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:15:23.617

您可以使用子查询来完成此操作：

```
SELECT
  SecurityGroup,
  (SELECT COUNT(*) FROM `Attendance` WHERE `Designation` = "officer") AS `Officer`,
  (SELECT COUNT(*) FROM `Attendance` WHERE `Designation` = "Guards") AS `Guards`,
  (SELECT COUNT(*) FROM `Attendance` WHERE `Designation` = "LadyGuards") AS `LadyGuards`
FROM `Attendance`
WHERE `SecurityGroup` = "JJ" 
```

我还没有实际测试过这个查询，因为我只是想和你分享这个概念。

另请注意，这不是完成您需要做的事情的最快方法，但我相信这是最简单的方法。

我希望这对你有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T17:01:10.077

我尝试在 SQL 中使用 PIVOT，但我无法获取计数值。以下是我尝试过的代码：

```
select SecurityGroup,Officer,Guards,LadyGuards from 
(select SecurityGroup,rDesignation from Attendance 
where SecurityGroup='jj') up
PIVOT (count(Designation) for Designation IN 
(Officer,Guards,LadyGuards)) as pvt 
```

当我执行此查询时，我得到 SecurityGroup,Officer,Guards,LadyGuards JJ,0,0,0

而不是 SecurityGroup,Officer,Guards,LadyGuards JJ,2,1,1

# javascript - Sharepoint 无法识别 Java 脚本文件路径

> ID：10933351
> 
> 赞同：0
> 
> 时间：2012-06-07T13:58:29.290
> 
> 标签：javascript, css, sharepoint-2010, sharepoint-designer, ascx

我需要从 ascx 控件访问共享点样式库中的 css 和 javascript 文件。我将自定义 css 和 javascript 文件存储在样式库中，并在 ascx 中添加了以下代码。但问题是 sharepoint**没有**从下面给定的路径中识别 javascript 文件。

ascx 中的代码

```
<SharePoint:CssLink runat="server" ID="MenuCSSLink" Version="4" ></SharePoint:CssLink>
<SharePoint:CssRegistration Name="/Style Library/en-us/Core Styles/Style.css" EnableCssTheming="True" ID="css" runat="server"></SharePoint:CssRegistration>
<SharePoint:ScriptLink id="ScriptLinkMenu1" runat="server"  Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script1.js " ></SharePoint:ScriptLink>
<SharePoint:ScriptLink id="ScriptLinkMenu2" runat="server"  Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script2.min.js " ></SharePoint:ScriptLink>
<SharePoint:ScriptLink id="ScriptLinkMenu3" runat="server" Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script3.js " ></SharePoint:ScriptLink>
<SharePoint:ScriptLink id="ScriptMenu6" runat="server"  Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script4.js " ></SharePoint:ScriptLink> 
```

我用 IE 开发者工具（F12）测试了页面，发现 css 可以正常渲染，但 js 不行。我将 Java 脚本保存在样式库根目录中并进行了测试。这个也行不通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:42:49.463

There is an extra space at the end of your JS links. It's escaping that space and adding %20 to your URL. If you View Source, you might see something like this:

```
document.write('<script src="/Style%20Library/en-us/Core%20Styles/JS/script1.js%20"></' + 'script>'); 
```

Removing that space should point to the proper file URL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:28:35.240

我修改了代码如下

```
<SharePoint:CssLink runat="server" ID="MenuCSSLink" Version="4" DefaultUrl="<% $SPUrl:~SiteCollection/Style Library/en-us/Themable/Style.css %>" ></SharePoint:CssLink>
<SharePoint:CssRegistration Name="/Style Library/en-us/Themable/Style.css" EnableCssTheming="True" ID="css" After="corev4.css" runat="server"></SharePoint:CssRegistration>
<SharePoint:ScriptLink id="ScriptLinkMenu1" runat="server"  Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script1.js" Language="javascript" ></SharePoint:ScriptLink>
<SharePoint:ScriptLink id="ScriptLinkMenu2" runat="server"  Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script2.min.js" Language="javascript" ></SharePoint:ScriptLink>
<SharePoint:ScriptLink id="ScriptLinkMenu3" runat="server" Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script3.js" Language="javascript" ></SharePoint:ScriptLink>
<SharePoint:ScriptLink id="ScriptMenu6" runat="server"  Name="~SiteCollection/Style Library/en-us/Core Styles/JS/script4.js" Language="javascript" ></SharePoint:ScriptLink> 
```

而且为了使主题功能在共享点中工作，我将样式表存储在样式库的主题文件夹中

# python - python：为什么用子进程调用echo会返回WindowsError 2？

> ID：10933354
> 
> 赞同：5
> 
> 时间：2012-06-07T13:58:35.793
> 
> 标签：python, windows, subprocess

在我的程序中，我有一个函数 runScript()：

```
def runScript():
subprocess.call(['echo', 'hello']) 
```

我在 Python 文档中看到了许多类似的示例，所以我认为这会起作用。但是，当我在程序中调用此函数时，它会返回一个 WindowsError。

```
WindowsError: [Error 2] The system cannot find the file specified 
```

为什么会这样？我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T14:02:54.203

该`echo`命令内置于 Windows shell 中，`cmd.exe`. 它不是没有外壳就可以调用的外部程序。因此，您`subprocess.call()`需要指定`shell=True`.

```
subprocess.call('echo hello', shell=True) 
```

（此外，shell 将为您处理拆分命令，因此我使用了更简单的单字符串样式来传递命令。）

# jasper-reports - JasperReports Server Pro - 在新的浏览器选项卡/窗口中打开报告

> ID：10933356
> 
> 赞同：2
> 
> 时间：2012-06-07T13:58:38.400
> 
> 标签：jasper-reports, jasperserver

在*JasperReports Server Pro 4.5*中，有没有办法强制程序在新的浏览器选项卡或窗口中打开报告/存储库元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T17:09:04.273

您应该能够通过更新相关的 JavaScript 文件以强制在新选项卡中打开所有内容来解决此问题。在 JRS 4.5.1 中，它是文件 .../jasperserver-pro/scripts/repository.search.actions.js 中的第 766 行

```
repositorySearch.RedirectAction.createRunResourceAction = function(resource, inNewTab) {
    if (!resource) {
        resource = resource ? resource : repositorySearch.model.getSelectedResources()[0];
    }

    var factoryMethod = repositorySearch.runActionFactory[resource.typeSuffix()];

    if (factoryMethod) {
        /* return factoryMethod(resource, inNewTab);  this was the original */
        return factoryMethod(resource, true);
    } else {
        return new repositorySearch.Action(function() {
            alert("Run action for resource type '" + resource.resourceType + "' is not implemented!");
        });
    }
}; 
```

我不能声称自己弄清楚了。感谢 Igor Nesterenko 提供的解决方案。

# css - 当我想制作具有浮动高度的图片库时，Chrome 中的最大高度（和纵横比）问题

> ID：10933358
> 
> 赞同：1
> 
> 时间：2012-06-07T13:58:43.507
> 
> 标签：css, google-chrome, aspect-ratio, floating

几周前，我在[这个](http://lantosistvan.com/temp/lantosistvan.com-portfolio-hor/)网站上工作。这是我的下一个投资组合网站。当我完成时，我想制作这个结构：

*   标题
*   浮动高度的水平图库
*   页脚

我想创建类似的东西，就像[22slides.com](http://www.basilvargas.com/lifestyle)的摄影师作品集网站一样。如果您更改浏览器的窗口大小或按下全屏按钮，img 元素或图像的 div 会自动更改其高度。

我在 CSS 中添加了一个“max-height”参数，以防止图像永远不会大于其原始分辨率。在大分辨率屏幕上这是一个严重的问题。但在 Chrome 中它无法正常工作，因为纵横比变得错误。如果按全屏，纵横比更差。在所有其他最新浏览器（Firefox、Safari、Opera、IE8-9）中正常工作。我使用这个命令为 chrome 创建了一个自定义 CSS（但现在我在 HTML 中取消了注释，以向您展示 Chrome 纵横比问题）：

```
#portfolio img { max-height: none; } 
```

因此，使用这条线，在 Chrome 中使用最大可能高度和纵横比的图像是正确的。但这对我来说是个问题。我不希望 1024x683 像素的图像在全高清显示器上显示大于他的实际分辨率。

我认为最好的解决方案是，如果有一个 javascript，它可以为每个图像动态描述宽度和高度并保持原始纵横比。22slides.com 使用类似的 javascript，但我根本不是 javascript 程序员。:(

图像 HTML 结构：

```
<div id="portfolio">
    <img src="image1.jpg" alt="" />
    <img src="image2.jpg" alt="" />
</div> 
```

CSS（最大高度是非常小的数字，只是为了向您展示 Chrome 中的问题）：

```
#portfolio { white-space: nowrap; float: left; }
#portfolio img { height: 100%; width: auto !important; min-height: 150px; max-height: 350px; } 
```

我正在使用这个 Jquery Javascript 来动态更改图像的高度，并以 130px 的负高度在屏幕上恢复图像的溢出。可能不是这个脚本导致问题，因为如果我将其关闭，Chrome 中的纵横比会更糟糕：

```
// Dynamical vertical resizing on images and Correct the height (to not overflow the screen)
$(document).ready(function(){
    $(window).load(function(){ // On load
    $('#portfolio img').css({'height':(($(window).height())-130)+'px'}); // Adjust the number if you change something in CSS
    });
    $(window).resize(function(){ // On resize
    $('#portfolio img').css({'height':(($(window).height())-130)+'px'}); // Adjust the number if you change something in CSS
    });
}); 
```

我需要帮助！谢谢你！

**更新：**

这个由“Emphram Stavanger”和“nick_w”编写的 javascript 似乎解决了我的图像适合浏览器高度的问题： [Imagefit vertical](https://stackoverflow.com/questions/14314160/imagefit-vertically)

我试过了，它可以完美地处理一张图片。图像完全适合可用视口窗口，具有正确的纵横比！“Emphram Stavanger”对我们的问题进行了直观的解释： [http ://www.swfme.com/view/1064342](http://www.swfme.com/view/1064342)

JsFiddle 演示（基本上是 Emphram Stavanger 的代码，我只是通过 nick_W 进行更改，将 Jquery 更改为最新，然后在显示链接之后放置：

[http://jsfiddle.net/YVqAW/show/](http://jsfiddle.net/YVqAW/show/)

我还没有尝试过水平滚动图像网站，但它已经迈出了一大步！

更新 2：

解决方案：[https ://stackoverflow.com/questions/20303672/horizo​​ntal-image-slideshow-javascript-not-working-properly-with-portrait-oriente](https://stackoverflow.com/questions/20303672/horizontal-image-slideshow-javascript-not-working-properly-with-portrait-oriente)

（我再次需要帮助......）:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-30T14:03:30.253

有点晚了，但您可以使用带有背景图像的 div 并设置背景大小：包含而不是 img 标签：

```
div.image{
    background-image: url("your/url/here");
    background-size:contain;
    background-repeat:no-repeat;
    background-position:center;
} 
```

现在您可以将您的 div 大小设置为您想要的任何大小，并且图像不仅会保持其纵横比，而且还会垂直和水平集中。

background-size 属性只是 ie>=9 而已。

# ios - 如何禁用 Three20 搜索栏的自动搜索

> ID：10933360
> 
> 赞同：0
> 
> 时间：2012-06-07T13:58:47.853
> 
> 标签：ios, three20

我正在使用 Three20 框架，并且自动搜索功能使搜索非常缓慢，我想禁用自动搜索并在用户单击键盘上的“搜索”按钮后触发搜索。

有什么办法可以禁用自动搜索？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:00:33.870

在 中创建一个`XXSearchDisplayController`派生自`TTSearchDisplayController`的新显示控制器`XXSearchDisplayController.m`

```
- (BOOL)searchDisplayController:(UISearchDisplayController *)controller    
 shouldReloadTableForSearchString:(NSString *)searchString {
return NO;
} 
```

这将禁用自动搜索。在此之后，去你的类派生自`TTTableViewController`，说`XXProductsTableViewController`

```
@implementation XXProductsTableViewController
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        UISearchBar* searchBar = [[UISearchBar alloc] init];
        searchBar.delegate = self;
        _searchController = [[XXSearchDisplayController alloc] initWithSearchBar:searchBar contentsController:self];
    }
    return self;
}

#pragama mark - UISearchBarDelegate
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar {
    [self.searchViewController.dataSource search:searchBar.text];
}
@end 
```

一旦用户点击“搜索”按钮，上面的代码就会进行搜索

# php - Google Api - 获取用户详细信息

> ID：10933364
> 
> 赞同：0
> 
> 时间：2012-06-07T13:59:16.217
> 
> 标签：php, google-api, oauth-2.0, userinfo

我正在使用 Google Api PHP 客户端。

我想获取已登录用户的详细信息。

我正在设置以下范围

```
$client->setScopes('https://www.googleapis.com/auth/userinfo.profile');

$request = new apiHttpRequest("https://www.googleapis.com/oauth2/v1/userinfo?alt=json");
  $userinfo = $client->getIo()->authenticatedRequest($request);

  $response = json_encode(simplexml_load_string($userinfo->getResponseBody()));
  print "<pre>" . print_r(json_decode($response, true), true) . "</pre>"; 
```

但我无法从上面的代码中获取 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:55:00.397

想要删除问题，但没有找到任何使用 PHP 客户端的答案。所以回答我自己的问题

只需更换

```
$response = json_encode(simplexml_load_string($userinfo->getResponseBody())); 
```

经过

```
$response = $userinfo->getResponseBody(); 
```

# hover - 表中的悬停效果在 IE10 中非常奇怪（Win 8 Release Preview）

> ID：10933365
> 
> 赞同：1
> 
> 时间：2012-06-07T13:59:19.710
> 
> 标签：hover, windows-8, internet-explorer-10

我最近将我的台式电脑升级到了 Win 8 Release Preview。在我使用消费者预览版之前，老实说，我真的很喜欢他们两个。

无论如何，在消费者预览版中，我制作的网站没有任何问题。在 IE10、IE9、Chrome、Firefox、Safari 中一切正常。除了每个浏览器的细微差别之外，一切看起来都差不多。所以总的来说，没有问题。

但是在我升级到 Release Preview 并因此升级到新版本的 IE10 之后，我在 Consumer Preview 中工作的同一站点上的某些内容并没有表现出应有的行为。我所说的是在我拥有的某些表格中的悬停效果。

表格的 CSS 只是一个普通表格，每当我将鼠标移到其中一行上时，就会出现悬停效果。

悬停的 CSS 是：

```
table.Green tr:not(:first-child):hover {
    background:#dddddd; /* Old browsers */
    background:-webkit-linear-gradient(top, #FFFFFF 0%, #dddddd 100%);
    background:-moz-linear-gradient(top, #FFFFFF 0%, #dddddd 100%);
    background:-o-linear-gradient(top, #FFFFFF 0%, #dddddd 100%);
    background:-ms-linear-gradient(top, #FFFFFF 0%, #dddddd 100%);
    background:linear-gradient(top, #FFFFFF 0%, #dddddd 100%); /* W3C */
    filter:progid:DXImageTransform.Microsoft.gradient( startColorstr='#FFFFFF ', endColorstr='#dddddd',GradientType=0 ); /* IE6-9 */
} 
```

没有什么花哨。具有列标题的第一行不应受此影响，但每隔一行应受此影响。正如我所说，这在最近的 IE10 和所有其他浏览器中运行良好。但在新的 IE10 中没有。

我附上了一张图片，以便您了解我的意思（在 Chrome 中工作，在 IE10 Release Preview 中不工作）：

![IE10 发布预览](../Images/73f4f43215a9cec824114449f70a372c.png)

![铬合金](../Images/4208f1f17c116371cb21023da4c3676a.png)

如您所见，第一张图片只有受温和渐变影响的单元格（其中都包含链接。客户名称和 Deal 下的小图标），而在第二张图片中，整行都受到影响梯度。

我不知道为什么。但只有存在某种形式的实际链接的单元格才会显示悬停效果，有时甚至无法响应鼠标悬停效果。所以有些行会获得悬停效果，但同一个表中的其他行不会，即使每一行都有完全相同的内容。就像它想要激活哪一行是非常随机的：/

那么，这是我应该忽略的东西，并希望微软能修复它，还是我的 HTML/CSS 中的一个基本缺陷突然出现在 IE10 Release Preview 中？

希望有人可以帮助我:)

提前致谢

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T08:52:31.913

无前缀`linear-gradient`语法与以前在前缀模式下的语法不同。

看：

*   [https://developer.mozilla.org/en/CSS/linear-gradient](https://developer.mozilla.org/en/CSS/linear-gradient)
*   [http://blogs.msdn.com/b/ie/archive/2012/06/06/moving-the-stable-web-forward-in-ie10-release-preview.aspx](http://blogs.msdn.com/b/ie/archive/2012/06/06/moving-the-stable-web-forward-in-ie10-release-preview.aspx)

第二个链接的引用：

> 对您的代码意味着什么 CSS 渐变
> 
> 尽管具有广泛的互操作性，但所有现代浏览器都支持的前缀渐变语法反映了该规范的现已过时的草案版本。这种较早的语法与当前的候选推荐不兼容。例如，如果您声明了以下渐变：
> 
> 背景：**-ms-linear-gradient（左**，黄色，红色）；
> 
> 那么产生无前缀的等价物不仅仅是删除 -ms- 前缀的问题。因为IE10的无前缀线性渐变函数符合最新规范，所以应该变成：
> 
> 背景：**线性渐变（向右**，黄色，红色）；
> 
> 未来的博客文章将更详细地介绍 IE10 对 CSS 渐变的支持。

在您的情况下，您应该更改`background:linear-gradient(top`... 而不是`top`, 使用`to bottom`.

# sql-server - sp_executesql 带参数很慢

> ID：10933366
> 
> 赞同：21
> 
> 时间：2012-06-07T13:59:20.137
> 
> 标签：sql-server, dapper

我使用 dapper-dot-net 作为 ORM，它会生成以下执行缓慢（1700 毫秒）的 SQL 代码。

```
exec sp_executesql N'SELECT TOP 5 SensorValue FROM "Values" 
   WHERE DeviceId IN (@id1,@id2) AND SensorId = @sensor 
       AND SensorValue != -32768 AND SensorValue != -32767',N'@id1 
           bigint,@id2 bigint,@sensor int',@id1=139,@id2=726,@sensor=178 
```

当我通过删除参数来修改此代码时，查询的执行速度非常快（20 毫秒）。缺少这些参数是否真的会产生如此大的差异，为什么？

```
exec sp_executesql N'SELECT TOP 5 SensorValue FROM "Values" 
   WHERE DeviceId IN (139,726) AND SensorId = 178 
       AND SensorValue != -32768 AND SensorValue != -32767' 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-07T14:01:43.440

将选项（重新编译）添加到末尾

```
... AND SensorValue != -32767 OPTION (RECOMPILE) 
```

我怀疑您正在经历“参数嗅探”

如果是这种情况，我们可以将其保留为 OPTION 或考虑替代方案

**更新 1**

下面这篇文章将为您介绍“参数嗅探” [http://pratchev.blogspot.be/2007/08/parameter-sniffing.html](http://pratchev.blogspot.be/2007/08/parameter-sniffing.html)

我建议您了解其中的来龙去脉，因为这将使您更好地理解 sql server 内部结构（可能会咬人）。

如果你理解它，你就会知道如果语句执行*得非常*频繁，那么与选项重新编译的权衡*可能会降低性能。*

 **在我知道根本原因是参数嗅探之后，*我个人添加了选项重新编译，除非存在性能问题，否则将其保留。重写语句以避免错误的参数嗅探会导致意图丢失，这会降低可维护性。但是有些情况下重写是合理的（当你这样做时使用好的注释）。

**更新 2**

我对这个主题的最佳阅读是在第 32 章，名为“参数嗅探：你最好的朋友......除非它不是由 GRANT FRITCHEY 撰写的”

推荐。

[SQL Server MVP 深入探讨，第 2 卷](https://rads.stackoverflow.com/amzn/click/com/1617290475)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-17T12:48:15.697

我最近遇到了同样的问题。我做的第一件事是在 where 语句的列上添加一个非聚集覆盖索引。

这提高了 SQL 的执行时间，但是当 dapper 执行查询时它仍然很慢，实际上它正在超时。

然后我意识到 dapper 生成的查询将参数作为**nvarchar(4000) 传递，其中我的 db 表列是 varchar(80) 这导致它执行索引扫描而不是搜索**（我建议你阅读索引，如果这对您没有意义。）。意识到这一点后，我将我的 dapper where 语句更新为：

> WHERE 参考 = convert(varchar(80),@Reference)

使用上面的 where 语句执行索引查找和 100% 的性能改进。

补充一点：选项（重新编译）对我不起作用。

在所有这些歌曲和舞蹈之后，有一种方法可以告诉 dapper 默认为您执行此操作：

> Dapper.SqlMapper.AddTypeMap(typeof(string), System.Data.DbType.AnsiString);

默认情况下，这会将任何字符串参数映射到 varchar(4000) 而不是 nvarchar(4000)。如果您确实需要 Unicode 字符串比较，那么您可以显式地对参数进行转换。*

# c - (数据类型*)0是什么意思

> ID：10933367
> 
> 赞同：0
> 
> 时间：2012-06-07T13:59:26.847
> 
> 标签：c

我已经通过[sizeof 运算符等效](https://stackoverflow.com/questions/1219199/size-of-a-datatype-without-using-sizeof)。

```
size_t size = (size_t)(1 + ((X*)0)); 
```

却无法理解是什么意思`(int*)0 or (int*)1000`。

它**告诉**编译器什么？为什么**要添加**一个？你能否详细说明一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:01:37.837

`(int *)0`表示“将 0 视为整数的地址”。加一得到内存中“下一个”整数的地址。因此，将结果转换回整数会为您提供整数的大小。

但是，这依赖于**未定义的行为**，因此您不应该使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:04:29.210

这只是创建了一个指向地址 0 的指针。向它添加 1 确实会在指针上递增。这具有将地址与数据类型的大小一起推进的效果。在示例中，size 将包含类 X 的大小，因为指针将前进类 X 的大小，并且初始指针值为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:05:04.797

> 了解`(int*)0`or的含义`(int*)1000`。

这些只是演员表，与这里的第二行完全相同：

```
int a = 25;
short b = (short)a; 
```

转换`a`为`short`允许您将值分配给`b`，其类型为`short`。这与`(int*)0`- 您只是告诉编译器将`0`其视为指向`int`.

关于强制转换的事情是你本质上是在告诉编译器：“看，我知道我在这里做什么，所以按照我告诉你的去做，不要再抱怨类型不匹配了。” 这意味着您确实需要知道自己在做什么，以及最终代码中的效果是什么。任何包含类似表达式的代码`(int*)1000`都可能a）高度可疑和b）非常依赖于编译器和编写代码的平台的细节。这可能在某种嵌入式系统中有意义，因为您控制整个系统，所以您知道内存位置 1000 会发生什么。一般来说，你应该避免这样的代码。

# c++ - 分析动态 pinvoke

> ID：10933370
> 
> 赞同：62
> 
> 时间：2012-06-07T13:59:30.630
> 
> 标签：c++, pinvoke, cil, clr-profiling-api

我正在研究 MSIL 探查器，并遇到了接口的问题`ManagedToUnmanagedTransition`和`UnmanagedToManagedTransition`回调。`ICorProfilerCallback`

我要检索的是有关被调用方法的信息（它所在的名称和模块名称）。

到目前为止，它工作正常。直到所谓的动态 pinvoke 发生（详细描述于：http: [//blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_ .aspx](http://blogs.msdn.com/b/jonathanswift/archive/2006/10/03/dynamically-calling-an-unmanaged-dll-from-.net-_2800_c_23002900_.aspx) )

在这种情况下`IMetaDataImport::GetPinvokeMap`失败。还`IMetaDataAssemblyImport::GetAssemblyProps`返回“dynamic_pinvoke”作为程序集的名称。

```
profiler_1_0->GetTokenAndMetaDataFromFunction(function_id, IID_IMetaDataImport, (IUnknown**) &imd_import, &md_token);
imd_import->GetPinvokeMap(md_token, &mapping, module_name, buffer_size, &chars_read, &md_module_ref);
// here the fail occurs

profiler_1_0->GetTokenAndMetaDataFromFunction(function_id, IID_IMetaDataAssemblyImport, (IUnknown**) &imd_assembly_import, &md_token);
imd_assembly_import->GetAssemblyFromScope(&md_assembly);
imd_assembly_import->GetAssemblyProps(md_assembly, 0, 0, 0, assembly_name, buffer_size, &chars_read, 0, 0);
// assembly_name is set to "dynamic_pinvoke" 
```

如何通过动态pinvoke获取模块名称（.dll）和被pinvoke的函数名称？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T03:35:23.467

探查器 API 返回托管代码中指定的元数据，通常通过[DllImportAttribute](http://msdn.microsoft.com/en-us/library/e4takf5s%28v=vs.80%29.aspx)。在使用[Marshal.GetDelegateForFunctionPointer](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.marshal.getdelegateforfunctionpointer%28v=vs.80%29.aspx)方法的“动态 pinvoke”的情况下，模块和函数名称从未指定为元数据并且不可用。包含所需元数据的动态 pinvoke 声明的替代方法可能会避免此问题。尝试使用 System.Reflection.Emit API，例如[TypeBuilder.DefinePInvokeMethod](http://msdn.microsoft.com/en-us/library/hb2et051.aspx)作为一种解决方案。

这是一个使用 System.Reflection.Emit 的示例，它与探查器 API 一起使用。

```
using System;
using System.Reflection.Emit;
using System.Runtime.InteropServices;
using System.Reflection;

namespace DynamicCodeCSharp
{
    class Program
    {
        [UnmanagedFunctionPointer(CallingConvention.StdCall, CharSet = CharSet.Unicode)]
        private delegate int MessageBoxFunc(IntPtr hWnd, string text, string caption, int options);

        static readonly Type[] MessageBoxArgTypes = new Type[] { typeof(IntPtr), typeof(string), typeof(string), typeof(int)};

        [DllImport("kernel32.dll")]
        public static extern IntPtr LoadLibrary(string dllToLoad);

        [DllImport("kernel32.dll")]
        public static extern IntPtr GetProcAddress(IntPtr hModule, string procedureName);

        [DllImport("kernel32.dll")]
        public static extern bool FreeLibrary(IntPtr hModule);

        static MethodInfo BuildMessageBoxPInvoke(string module, string proc)
        {
            AssemblyBuilder assemblyBuilder = AppDomain.CurrentDomain.DefineDynamicAssembly(new AssemblyName(module), AssemblyBuilderAccess.Run);
            ModuleBuilder moduleBuilder = assemblyBuilder.DefineDynamicModule(module);
            TypeBuilder typeBuilder = moduleBuilder.DefineType(proc);

            typeBuilder.DefinePInvokeMethod(proc, module, proc,
                       MethodAttributes.Static | MethodAttributes.PinvokeImpl,
                       CallingConventions.Standard, typeof
                       (int), MessageBoxArgTypes, 
                       CallingConvention.StdCall, CharSet.Auto);

            Type type = typeBuilder.CreateType();

            return type.GetMethod(proc, BindingFlags.Static | BindingFlags.NonPublic); ;
        }

        static MessageBoxFunc CreateFunc()
        {
            MethodInfo methodInfo = BuildMessageBoxPInvoke("user32.dll", "MessageBox");
            return (MessageBoxFunc)Delegate.CreateDelegate(typeof(MessageBoxFunc), methodInfo);
        }

        static void Main(string[] args)
        {
            MessageBoxFunc func = CreateFunc();
            func(IntPtr.Zero, "Hello World", "From C#", 0);
        }
    }
} 
```

几个例子来说明当前方法的问题。

```
[DllImport("user32.dll", CharSet = CharSet.Unicode)]
public static extern int MessageBox(IntPtr hWnd, string text, string caption, int options);

static void Main(string[] args)
{
     MessageBox(IntPtr.Zero, "Hello World", "From C#", 0);
} 
```

没有从 user32.dll 导出的 MessageBox 函数。它只包含 MessageBoxA 和 MessageBoxW。由于我们没有在 DllImport 属性中指定[ExactSpelling=false](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.exactspelling%28v=vs.80%29.aspx)并且我们的 CharSet 是 Unicode，.Net 还将在 user32.dll 中搜索附加了 W 的入口点。这意味着 MessageBoxW 实际上是我们正在调用的本机函数。但是，GetPinvokeMap 返回“MessageBox”作为函数名（代码中的 module_name 变量）。

现在让我们通过序号而不是名称来调用函数。使用 Windows SDK 中的 dumpbin 程序：

```
dumpbin /exports C:\Windows\SysWOW64\user32.dll

...
2046  215 0006FD3F MessageBoxW
... 
```

2046 是 MessageBoxW 的序号。调整我们的 DllImport 声明以使用我们得到的 EntryPoint 字段：

```
[DllImport("user32.dll", CharSet = CharSet.Unicode, EntryPoint = "#2046")]
public static extern int MessageBox(IntPtr hWnd, string text, string caption, int options); 
```

这次 GetPInvokeMap 返回“#2046”。我们可以看到分析器对被调用的本机函数的“名称”一无所知。

更进一步，被调用的本机代码甚至可能没有名称。在以下示例中，在运行时在可执行内存中创建了一个“添加”函数。没有函数名称或库与正在执行的本机代码相关联。

```
using System;
using System.Runtime.InteropServices;

namespace DynamicCodeCSharp
{
    class Program
    {
        [UnmanagedFunctionPointer(CallingConvention.Cdecl)]
        private delegate int AddFunc(int a, int b);

        [DllImport("kernel32.dll", CallingConvention = CallingConvention.StdCall)]
        private static extern IntPtr VirtualAlloc(IntPtr addr, IntPtr size, int allocType, int protectType);

        const int MEM_COMMIT = 0x1000;
        const int MEM_RESERVE = 0x2000;

        const int PAGE_EXECUTE_READWRITE = 0x40;

        static readonly byte[] buf = 
            {
                // push ebp
                0x55,
                // mov ebp, esp
                0x8b, 0xec,
                // mov eax, [ebp + 8]
                0x8b, 0x45, 0x08,
                // add eax, [ebp + 8]
                0x03, 0x45, 0x0c,
                // pop ebp
                0x5d,
                // ret
                0xc3
            };

        static AddFunc CreateFunc()
        {
            // allocate some executable memory
            IntPtr code = VirtualAlloc(IntPtr.Zero, (IntPtr)buf.Length, MEM_COMMIT | MEM_RESERVE, PAGE_EXECUTE_READWRITE);
            // copy our add function implementation into the memory
            Marshal.Copy(buf, 0, code, buf.Length);
            // create a delegate to this executable memory
            return (AddFunc)Marshal.GetDelegateForFunctionPointer(code, typeof(AddFunc));
        }

        static void Main(string[] args)
        {
            AddFunc func = CreateFunc();
            int value = func(10, 20);
            Console.WriteLine(value);
        }
    }
} 
```

# prism - Microsoft Prism 是否活跃且活跃？

> ID：10933371
> 
> 赞同：3
> 
> 时间：2012-06-07T13:59:34.847
> 
> 标签：prism

这两天我在 Microsoft Prism 上做了很多阅读，但我仍然不太确定的是它的未来会是什么样子？我知道 4.1 版本是几个月前才发布的，但是除了微软自己的文档之外，我还没有找到很多去年写的关于这个主题的博客文章，我找到的大部分是 2009-2010 年的。

它看起来确实很有趣，但学习曲线似乎有点陡峭，如果它在不久的将来会过时，我不想上手。有人对此有任何见解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T15:26:01.137

迈克，从我的角度来看，没有太多博客并不是一件坏事。

支持 PRISM 并监控他们的留言板。有一个使用 PRISM 的大社区。功能还没有被开发——这就是为什么不写太多博客的原因，但它是可靠的和开源的。P&P 团队对其进行维护，稍后可能会在 .NET 4.5 上线时发布 4.5。

这不是 MVVM 框架，并且有很多不同的 MVVM 框架。这不是模型或业务对象包装器。这是使用 WPF/Silverlight 开发模块化复合应用程序的框架。而且AFAIK没有这样的东西可用。

我们使用他们的模块、导航、区域、DelegageCommands 等。我们几乎使用了 PRISM 提供的所有东西，它对我们非常有用。OTOH，我们确实推出了自己的 MVVM 功能。

PS 学习曲线很痛苦。不是因为它是糟糕的框架，而是因为它有很多功能（你可以使用 ala cart btw）。最后，这是值得的。我建议拿到他们的书并快速阅读，以了解它的全部内容。然后您将看到何时以及如何使用它们的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-20T09:39:28.767

棱镜是救生员。现在它由 Brian Lagunas 维护。他曾经是地球上最能提供帮助的人。他总是阅读我们的信息和回复。如果你想更好地理解，那么 Brian Lagunas 有关于 Pluralsight 的优秀课程。

# c# - 从 cs 设置 InArgument 值

> ID：10933374
> 
> 赞同：0
> 
> 时间：2012-06-07T13:59:49.117
> 
> 标签：c#, visual-studio-2010, workflow-foundation-4

我在一个工作流基础项目中工作，我发现了一个问题。我解释我的项目：

*   我有一个 MainWindow，我在其中设置了我想运行的工作流名称。当我运行这个工作流时，我调用 VisualTracking.cs 类来查看调试在哪里。这个cs类构造函数有以下方法（WorkflowDesigner wd,string filePath,string name）名称是我在主窗口中设置的工作流名称。

*   我有一个 dll 项目，其中包含一些我在之前重新托管的工作流程中使用的自定义活动。在其中一项活动中，我有一个称为 textValue 的 InArgument。我希望这个 InArgument 获得工作流名称值，所以我执行以下代码：

主窗口：

```
 ......
    VisualTracking tracker = new VisualTracking(wd, workflowFilePathName, this.workflowName);
    ..... 
```

视觉跟踪类：

```
 .......
    private string workflowName { get; set; }
    .......
    public VisualTracking(WorkflowDesigner wd,string filePath,string name) {
    .......
    foreach (Activity v in idActivityMap.Values)
        {
            string val = v.GetType().FullName;
            activityLists.Add(val);
            if (v.GetType().FullName == "RulesDll.Status_Activity.StatusActivity")
            {
                ((StatusActivity)v).textValue = this.workflowName;                   
            }
        }
    ........ 
```

在每个工作流活动的这个 foreach 中，我检查他的命名空间是否是我想要设置工作流名称的目标活动。

状态活动

```
 ........
    public InArgument<string> textValue;

    public InArgument<string> Text
    {
        get { return this.textValue; }
        set { this.textValue = value; }
    }
    ........
    protected override void Execute(CodeActivityContext context)
    {
       ...........
        string text = context.GetValue(this.Text);
       ........... 
```

所以我希望在字符串文本中有我在visualtracking类中关联的workflowName值......但是当我调试时，总是将一个值检索为null......

任何解决方案将不胜感激！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:11:27.440

什么时候`workflowName`在你的 VisualTracking 类中设置？在我看来，当您从 MainWindow 创建实例时，您正在传递所需的值，但您从未真正设置它。我猜您实际上想使用`name`从 MainWnidow 传递给参数的值。我建议您替换以下代码行：

```
if (v.GetType().FullName == "RulesDll.Status_Activity.StatusActivity")
{
    ((StatusActivity)v).textValue = this.workflowName;
} 
```

用这些：

```
// This will also catch cases where your class inherits
// from StatusActivity.
StatusActivity activity = v as StatusActivity;

// Using 'as' cast will return null if the type cannot be 
// cast to a StatusActivity.
if (activity != null)
{
    // You passed in a reference to MainWindow's "this.workflowName" 
    // in the name parameter of this constructor.
    activity.textValue = name;
} 
```

# javascript - jQuery：以 dd-mm-yyyy 格式添加 4 周至今

> ID：10933381
> 
> 赞同：0
> 
> 时间：2012-06-07T14:00:12.383
> 
> 标签：javascript, jquery, date

我有一个字符串，其日期格式为：dd-mm-yyyy

如何在字符串中添加 4 周，然后使用 jQuery / Javascript 生成新字符串？

我有

```
var d = new Date(current_date); 
d.setMonth(d.getMonth() + 1); 
current_date_new = (d.getMonth() + 1 ) + '-' + d.getDate() + '-' + d.getFullYear();    
alert(current_date_new); 
```

但它抱怨提供的字符串格式不正确

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:01:44.443

**编辑：**经过一番[摆弄](http://jsfiddle.net/saluce/yRrfk/1/)，这是解决方案：

首先，将字符串拆分为各个部分。

```
var inputString = "12-2-2005";
var dString = inputString.split('-'); 
```

然后，将字符串解析为 datetime 对象并为其添加 28 天（4 周）。

```
var dt = new Date(dString[2],dString[1]-1,dString[0]);
dt.setDate(dt.getDate()+28); 
```

最后，您可以输出日期

```
var finalDate = dt.GetDate() + "-" + (dt.GetMonth()+1) + "-" + dt.GetYear(); 
```

此代码应返回`12-3-2005`.

**注意事项：**似乎 JavaScript 的 Date 对象将 0-11 作为月份字段，因此代码中的月份为 -1 和 +1。

**EDIT2：**要进行填充，请使用此功能：

```
function pad(number, length) {

    var str = '' + number;
    while (str.length < length) {
        str = '0' + str;
    }

    return str;

} 
```

并将您的输出更改为

```
var finalDate = pad(dt.GetDate(),2) + "-" + pad(dt.GetMonth()+1,2) + "-" + dt.GetYear(); 
```

检查更新的小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:16:22.510

无需转换为 mm-dd-yyyy，通过减号简单拆分字符串并使用以下代码创建新的 Date 对象：

```
var string = '12-02-2012';
var split = string.split('-');
var date = Date(split[2],parseInt(split[1])-1,parseInt(split[0])+1)

date.setDate(date.getDate() + 28);
var fourWeeksLater = date.getDay() + "-"+date.getMonth() +"-"+date.getYear(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T09:55:45.300

我不会为日期编写自己的解析器，而是使用[moment.js](http://momentjs.com/)。

要[解析](http://momentjs.com/docs/#/parsing/string-format/)您的日期：

```
var date = moment('14-06-2012', 'DD-MM-YYYY'); 
```

[增加](http://momentjs.com/docs/#/manipulating/add/)4 周：

```
date.add('weeks', 4); 
```

或者一口气：

```
var date = moment('14-06-2012', 'DD-MM-YYYY').add('weeks', 4); 
```

并将其[转换](http://momentjs.com/docs/#/displaying/format/)为字符串：

```
var dateString = date.format('DD-MM-YYYY'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:33:35.683

这应该有效：

```
var formattedDate = '01-01-2012',
    dateTokens = formattedDate.split('-'),
    dt = new Date(dateTokens[2], parseInt( dateTokens[1], 10 ) - 1, dateTokens[0]), // months are 0 based, so need to add 1
    inFourWeeks = new Date( dt.getTime() + 28 * 24 * 60 * 60 * 1000 ); 
```

jsfiddle：http: [//jsfiddle.net/uKDJP/](http://jsfiddle.net/uKDJP/)

**编辑：**

使用[Globalize](https://github.com/jquery/globalize)，您可以格式化 inFourWeeks：

```
Globalize.format( inFourWeeks, 'dd-MM-yyyy' ) // outputs 29-01-2012 
```

# ios - 查找与放置在 UITableView 中的文本字段关联的行

> ID：10933385
> 
> 赞同：0
> 
> 时间：2012-06-07T14:00:29.667
> 
> 标签：ios, uitableview

我有一个由许多字段组成的表格视图，分为多个部分，这些字段来自数据库。我希望支持对字段中的文本进行就地编辑，因此我为每一行创建一个文本字段并将其添加到我的单元格中：

```
[cell.contentView addSubview:myTextField]; 
```

我给文本字段一个固定的标签，以便我可以轻松地配置单元格：

```
- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    Item *item = [self itemWithIndexPath:indexPath];
    UITextField *textField = (UITextField *)[cell.contentView viewWithTag:1000];
    textField.text = item.name;
} 
```

编辑文本字段后，我需要更新数据库。我可以在文本字段上设置一个委托来响应编辑的结束，但是我必须以某种方式找出哪个 indexPath 已被编辑，以便我可以适当地更新数据库。

我怎样才能做到这一点？

我想我可以维护一个 tag->IndexPath 映射，每次我配置一个单元格时都会更新它，但这感觉有点矫枉过正。我疲惫的大脑是否错过了显而易见的事情？

谢谢，

蒂姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:13:12.637

于是，我的大脑开始工作：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{
    UITableViewCell *cell = (UITableViewCell *)textField.superview.superview;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    Item *item = [self itemWithIndexPath:indexPath];
    item.name = textField.text;
} 
```

# asp.net-mvc - 我应该将我的操作方法转换为异步操作方法吗？

> ID：10933386
> 
> 赞同：3
> 
> 时间：2012-06-07T14:00:38.637
> 
> 标签：asp.net-mvc, asynchronous, iis-7.5

我有一个网站，用户可以在其中上传 PDF 并将其转换为 WORD doc。

它工作得很好，但有时（每小时 5-6 次）用户必须比平时等待更多的时间才能进行转换......

我使用 ASP.NET MVC，流程是： - 用户**上传**文件 -> 获取流并将其**转换**为 word ->**将**word 文件保存为临时文件 ->向用户**返回**url

我不确定是否必须将此流转换为[异步](http://msdn.microsoft.com/en-us/library/ee728598.aspx)？基本上，我的流程现在是连续的，但我每秒大约有 3-5 个请求，CPU 是双核和 4 GB 内存。

据我所知`maxConcurrentRequestsPerCPU is 5000`；还有`The default value of Threads Per Processor Limit is 25`；所以这些默认设置应该很好，对吧？

那为什么我的网络应用程序有时会“等待”？是否有任何 IIS 设置需要从默认修改为其他设置，或者我应该将我的同步方法设置为异步转换？

Ps：转换本身需要 1 秒到 40-50 秒，具体取决于 pdf 文件的大小。

**更新**：基本上对我来说不太清楚的是：如果用户上传文件并且转换时间很长，不应该只是当前请求因此而“受苦”吗？因为下一个请求是独立的，所以进行另一个 CPU 调用和不同的线程，所以这里不应该等待，不是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-07T20:17:47.787

这里有几件事必须明确定义。至少据我所知，Async(hronous) 方法和流程不是一回事。

异步方法（使用 Task，通常也利用 async/await 关键字）将以下列方式工作：

1.  执行从线程 t1 开始，直到它到达等待
2.  （可能）长时间操作不会发生在线程 t1 上——有时甚至根本不会发生在应用程序线程上，利用 IOCP（I/O 完成端口）。
3.  线程 t1 空闲并释放回线程池，并准备好在需要时为其他请求提供服务
4.  当（可能）长操作返回时，从线程池中获取一个线程（甚至可能是相同的 t1，或者很可能是另一个），其余的代码执行从遇到的最后一个等待恢复
5.  其余代码执行

这里有几点需要注意：

一个。客户端在整个过程中被阻塞。线程的最终切换等仅发生在服务器上 b。这种方法主要是为了缓解一种叫做“线程饥饿”的不想要的情况。这并不意味着加快客户的总等待时间，而且通常不会加快进程。

据我了解，异步流程至少在这种情况下意味着，在用户请求转换文档后，客户端（即客户端的浏览器）将很快收到一个响应，其中通知他这服务器上可能已经开始了很长的过程，用户应该耐心等待，当前的响应页面可能会提供进度反馈。

* * *

在您的情况下，我推荐第二种方法，因为第一种方法根本没有帮助。

当然，这并不容易。您需要模拟一个队列，您需要一个处理代理和一个驱逐策略（如果您不想要第二个代理，很可能由同一个代理强制执行）。

这将按照以下方式工作：

一个。最终用户提交一个文件，Web 服务器接收它 b. Web 服务器将其放入队列并接收作业编号 c。Web 服务器向用户返回一个带有作业编号的响应（假设是一个带有轮询机制的 HTML 页面，该机制会定期从服务器接收进度） d。代理将在有机会时开始处理文档（即完成其他工作）并在公共位置更新其状态以供 Web 服务器选择此信息 e．Web 服务器将接收来自 HTML 响应的调用，询问作业的状态，并会发现作业已完成并提供下载链接或直接开始下载。

这可以通过某些方式进行细化：

1.  [可以使用websockets](https://en.wikipedia.org/wiki/WebSocket)或长轮询（例如[SignalR](http://www.asp.net/signalr)覆盖两者）代替客户端轮询服务器
2.  如果硬件配置合理，可以使用许多处理代理而不是一个

* * *

队列可以用一个简单的 RDBMS 来实现，Remus Ruşanu 有[一篇关于这个的好文章](http://rusanu.com/2010/03/26/using-tables-as-queues/)。

# c# - EncryptedXml OAEP - 空引用问题

> ID：10933389
> 
> 赞同：1
> 
> 时间：2012-06-07T14:00:57.237
> 
> 标签：c#, xml, c#-4.0, encryption

所以我在使用 OAEP 进行 EncryptedXml 解密时遇到了一个问题。我有部分代码可以像这样加密一些 xml：

```
 ...
        byte[] encryptedElement = eXml.EncryptData(elementToEncrypt, sessionKey, true);

        EncryptedData edElement = new EncryptedData();
        edElement.Type = EncryptedXml.XmlEncElementUrl;
        edElement.EncryptionMethod = new EncryptionMethod(EncryptedXml.XmlEncRSAOAEPUrl);
        ... 
```

当我尝试像这样解密它时：

```
 EncryptedXml exml = new EncryptedXml(document);
        var provider = (RSA)_certificate.PrivateKey;
        exml.AddKeyNameMapping("rsaKey", provider);
        exml.DecryptDocument(); 
```

EncryptedXml 抛出异常：

> 你调用的对象是空的。

在堆栈跟踪中是这种方法：在 System.Security.Cryptography.Xml.EncryptedXml.GetDecryptionKey(EncryptedData encryptedData, String symmetricAlgorithmUri)

当我使用 EncryptedXml.XmlEncAES256Url 时，一切都很好，并且可以正常工作。但我需要使用 EncryptedXml.XmlEncRSAAOAEPUrl。

知道有什么问题吗？

# objective-c - 隐藏 UINavigation 控制器按钮

> ID：10933395
> 
> 赞同：0
> 
> 时间：2012-06-07T14:01:18.157
> 
> 标签：objective-c, uinavigationcontroller, uinavigationbar

有没有办法从故事板的导航栏中隐藏导航控制器按钮？

我不希望用户能够使用导航控制器返回上一个视图

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:07:52.817

您可以在`(void)viewDidLoad`方法中使用以下代码非常简单地做到这一点：

```
 self.navigationItem.hidesBackButton = YES; 
```

**编辑**：如果您在视图中有进一步的导航（即，如果视图可以向前导航到允许返回到它的其他视图），那么在`-(void)viewDidAppear:(BOOL)animated`方法中实现它可能是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:10:31.127

```
self.navigationItem.rightBarButtonItem = nil; 
```

或者

```
 self.navigationItem.hidesBackButton = YES; 
```

# c# - 如何验证 Telerik RadUpload - MiMeTypes - 防止更改扩展

> ID：10933396
> 
> 赞同：0
> 
> 时间：2012-06-07T14:01:21.027
> 
> 标签：c#, asp.net, telerik, radupload

我如何验证 mimeTypes 的 Telerik radupload -> 意味着防止用户更改扩展！
在客户端和服务器端！
我的 radupload 是这样的：

```
 <telerik:RadUpload ID="RadUpload" runat="server" EnableEmbeddedSkins="False" Skin="BlackByMe" AllowedFileExtensions=".txt" AllowedMimeTypes="text/plain"
        ControlObjectsVisibility="ClearButtons" Width="325px">
    </telerik:RadUpload> 
```

如您所见，`AllowedFileExtensions`是 txt。
但是，如何防止有人将 zip 文件的扩展名更改为 txt 并上传。
Telerik RadUpload 验证有很多方法，例如 FileExtension-FileSize-Empty RadUpload，但是验证真正的 MiMeType 呢？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:07:37.853

财产[`AllowedMimeTypes`](http://www.telerik.com/help/aspnet-ajax/upload-integrated-validation.html)应该工作。

> AllowedMimeTypes 属性列出了上传文件的有效 MIME 类型。设置 AllowedMimeTypes 属性后，RadUpload 会自动验证所选文件的 MIME 类型，将任何具有不允许扩展名的文件移动到 InvalidFiles 集合。

检查[此](http://www.telerik.com/help/aspnet-ajax/upload-mime-types.html)注释

> **RadUpload 不会仅使用文件扩展名来确定 mime 类型。例如，如果您尝试上传扩展名为“.JPG”的文本文件，它仍会以 text/plain mime-type 上传。**

```
<telerik:radupload id="RadUpload1" runat="server" 
    allowedmimetypes="application/x-compressed,application/x-zip-compressed,application/zip,multipart/x-zip"
    maxfilesize="1000000" allowedfileextensions=".zip" 
    targetfolder="~/My Files" /> 
```

# android - 将多个子视图添加到父视图

> ID：10933397
> 
> 赞同：2
> 
> 时间：2012-06-07T14:01:28.150
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

我在（**main.xml**`LinearLayout` ）中有一个视图元素：`ScrollView`

 **```
<ScrollView ...>

   <LinearLayout
       android:id="@+id/root"
       android:orientation="vertical"
    >
          <TextView .../>
          <EditText .../>
          ...
    </LinearLayout>

</ScrollView> 
```

*正如您在上面看到的，在root* 中还有一些其他元素`LinearLayout`。

现在，我想以编程方式（动态地）向`LinearLayout`(id="root") 添加更多视图。

**我尝试了以下方法**向该*根*添加更多子视图：

**首先，**我创建了位于单独布局文件中的子视图：

**子.xml**

```
<LinearLayout
    android:id="@+id/child"
>
     <TextView id="mytxt"... />
     <ListView id="mylist".../>
</LinearLayout> 
```

**其次，**我膨胀并获取上述子视图的两个实例，初始化里面的元素：

```
/***inflate 1st child, initialize its elements***/
LinearLayout child_1 = (LinearLayout) inflater.inflate(R.layout.child, null);
TextView txt1 = (TextView)child_1.findViewById(R.id.mytxt);
txt1.setText("CAR");
ListView list1 = (ListView)child_1.findViewById(R.id.mylist);
// Code to initialize 'list1' (I did not paste code here)

/*** inflate 2nd child, initialize its elements ****/
LinearLayout child_2 = (LinearLayout) inflater.inflate(R.layout.child, null);
TextView txt2 = (TextView)child_2.findViewById(R.id.mytxt);
txt2.setText("PLANE");
ListView list2 = (ListView)child_2.findViewById(R.id.mylist);
// Code to initialize 'list2' (I did not paste code here) 
```

**最后**，我将它们添加到*root* `LinearLayout`：

```
//get root
View contentView = inflater.inflate(R.layout.main, null);
LinearLayout root = (LinearLayout) contentView.findViewById(R.id.root);

//add child views
root.add(child_1);
root.add(child_2); 
```

当我在设备上运行我的应用程序时，我只能看到`child_2`布局而看`child_1`不到“root”，为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:03:08.417

在 LinearLayout 默认方向是水平设置它垂直.......

来自 [http://developer.android.com/reference/android/widget/LinearLayout.html](http://developer.android.com/reference/android/widget/LinearLayout.html)

看

默认方向是水平的。

```
and you set text in txt1.setText("PLANE"); set in  txt2.setText("PLANE"); 
```

`both text set in same textview`......

```
 txt1.setText("CAR");
    txt1.setText("PLANE"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:05:25.307

你如何创建你的布局？你做到了`setContentView(int)`吗？然后，您应该通过在活动中执行以下操作来检索该实例：

```
findViewById(R.id.root); 
```**

# java - ResultSet 关闭后不允许操作

> ID：10933399
> 
> 赞同：6
> 
> 时间：2012-06-07T14:01:37.747
> 
> 标签：java, sql, select, resultset

好吧，最近两天一直在尝试解决这个问题。

```
Statement statement = con.createStatement();
                        String query = "SELECT * FROM sell";
                        ResultSet rs = query(query);
                        while (rs.next()){//<--- I get there operation error here 
```

这是查询方法。

```
 public static ResultSet query(String s) throws SQLException {
        try {
            if (s.toLowerCase().startsWith("select")) {
                if(stm == null) {
                    createConnection();
                }
                ResultSet rs = stm.executeQuery(s);
                return rs;
            } else {
                if(stm == null) {
                    createConnection();
                }
                stm.executeUpdate(s);
            }
            return null;
        } catch (Exception e) {
            e.printStackTrace();
            con = null;
            stm = null;
        }
        return null;
    } 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T14:06:45.467

仅从您发布的代码中很难确定，但我怀疑在**循环****体内**`ResultSet`无意中关闭（或被`stm`重用）。这将在下一次迭代开始时触发异常。**`while`**

此外，您需要确保应用程序中没有其他线程可能正在使用相同的数据库连接或`stm`对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T14:22:53.990

恕我直言，在关闭连接之前，您应该使用 ResultSet 完成所需的一切。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:33:14.273

您需要解决的问题很少。打开连接、运行查询以获取 rs、关闭连接和关闭连接都应尽可能在同一函数范围内完成。从您的代码中，您似乎将“con”变量用作全局变量，这可能会导致问题。你没有关闭 stm 对象。或 rs 对象。这段代码不会运行太久，即使它没有错误。你的代码应该是这样的：

```
if (stringUtils.isBlank(sql)){
     throw new IllegalArgumentsException ("SQL statement is required");
}
Connection con = null;
PreparedStatement ps =null;
Resultset rs = null;
try{
         con = getConnection();
         ps = con.preparestatement(sql);
         rs = ps.executeQuery();
         processResults(rs);
         close(rs);
         close(ps);
         close(con);
}catch (Execption e){
        log.Exception ("Error in: {}", sql, e);
        throw new RuntimeException (e);
}finally{
        close(rs);
        close(ps);
        close(con);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-06-30T01:33:15.520

在内部循环中使用另一个 Statement 对象 Like

```
Statement st,st1;

st=con.createStatement();
st1=con.createStatement();

//in Inner loop
while(<<your code>>)
{
   st1.executeQuery(<<your query>>);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-22T08:39:12.650

我知道这已经晚了几年，但我发现同步 db 方法通常可以解决这个问题。

# maven - Jacoco 和 Sonar 代码覆盖率？

> ID：10933407
> 
> 赞同：2
> 
> 时间：2012-06-07T14:02:00.540
> 
> 标签：maven, jenkins, selenium-rc, sonarqube, jacoco

**使用：** JaCoCo 0.5.3、Maven2、Sonar 2.14、sonar-maven-plugin 1.8、SùartGWT 3.0
**目前正在尝试：**获取我的 Selenium 单元测试的 Sonar 的代码覆盖率。
**问题：**尽管传感器正确启动，但代码覆盖率并未从 0% 开始移动，请分析正确生成的 jacoco.exec。
**资源：** [https](https://gist.github.com/2888912) ://gist.github.com/2888912 pom.xml

我试图获得代码覆盖率已经大约 2 周了。我将声纳从 2.10 升级到 2.14，更改了每个声纳属性，尝试了插件 jacoco（用于 maven），但我仍然没有得到任何结果。所以如果有人遇到同样的问题并找到了解决方案，你能告诉我你是如何工作的吗？

我很确定我的测试必须产生至少 0.5% 的代码覆盖率。我的 Selenium 测试实际上是在 SeleniumTestLoginEntry.java 中执行的，它有什么影响吗？我必须称它为 TestLoginEntry.java 吗？（测试的类是LoginEntry.java） 我正在使用surefire 来启动JaCoCo 的javaagent（见标签），它实际上生成了jacoco.exec。

请给我一些帮助，我完全迷失了，我只剩下一周的时间来让它工作...... :(
提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T17:43:30.063

我的设置与您的设置略有不同，使用 Ant 和 Sonar 3.01，但是......有一个属性对我有用，当我查看时，它似乎几乎完全没有记录。我注意到最近几天 wiki 页面有更新，这可能改变了文档的情况。

```
<property name="sonar.core.codeCoveragePlugin" value="jacoco" />
<property name="sonar.jacoco.reportPath" value="${test.log.dir}/jacoco.exec"/> 
```

明确设置`sonar.jacoco.reportPath`文件，而不是目录，最终对我有用。

# linux - 如何获得性能以在我的程序中查找符号

> ID：10933408
> 
> 赞同：33
> 
> 时间：2012-06-07T14:02:04.140
> 
> 标签：linux, performance, perf

使用时`perf report`，我的程序看不到任何符号，而是得到如下输出：

```
$ perf record /path/to/racket ints.rkt 10000
$ perf report --stdio

# Overhead   Command      Shared Object  Symbol
# ........  ........  .................  ......
#
    70.06%  ints.rkt  [unknown]          [.] 0x5f99b8        
    26.28%  ints.rkt  [kernel.kallsyms]  [k] 0xffffffff8103d0ca
     3.66%  ints.rkt  perf-32046.map     [.] 0x7f1d9be46650 
```

这是相当缺乏信息的。

相关程序是用调试符号构建的，该`sysprof`工具会显示适当的符号，Zoom 也是如此，我认为它`perf`在后台使用。

请注意，这是在 x86-64 上，因此二进制文件是用 编译的`-fomit-frame-pointer`，但在其他工具下运行时也是如此。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-01-24T23:58:03.213

这篇文章已经有一年多了，但是当我遇到同样的问题时它出现在我的谷歌搜索结果的顶部，我想我会在这里回答它。经过一番搜索，我发现[这个相关的 StackOverflow 问题中给出的答案](https://stackoverflow.com/questions/19719911/getting-user-space-stack-information-from-perf)非常有帮助。在我的 Ubuntu Raring 系统上，我最终执行了以下操作：

1.  编译我的 C++ 源代码`-g`（很明显，你需要调试符号）
2.  运行`perf`方式

    ```
    record -g dwarf -F 97 /path/to/my/program 
    ```

    这种方式`perf`能够处理[DWARF 2](https://en.wikipedia.org/wiki/DWARF)调试格式，这是`gcc`Linux 上使用的标准格式。该`-F 97`参数将采样率降低到 97 Hz。默认采样率显然对我的系统来说太大了，并导致如下消息：

    ```
    Warning:
    Processed 172390 events and lost 126 chunks!

    Check IO/CPU overload! 
    ```

    并且`perf report`之后的调用将因分段错误而失败。随着采样率的降低，一切都很好。

3.  一旦`perf.data`在上一步中生成文件没有任何错误，您就可以运行`perf report`等。我个人喜欢[FlameGraph](https://github.com/brendangregg/FlameGraph)工具来生成 SVG 可视化。
4.  [其他人](https://stackoverflow.com/questions/18504690/perf-can-find-symbol-in-the-kernel-but-can-not-find-symbol-in-my-program-how-t)报告说跑步

    ```
    echo 0 > /proc/sys/kernel/kptr_restrict 
    ```

    如果需要内核符号，root 也可以提供帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-27T13:25:54.780

在我的情况下，解决方案是删除包含以前版本中的缓存符号并且搞砸了的精灵文件。

它们位于 ~/.debug/ 文件夹中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-20T21:33:26.000

您始终可以使用“$ nm”命令。

这是一些示例输出：

```
Ethans-MacBook-Pro:~ phyrrus9$ nm a.out
0000000100000000 T __mh_execute_header
0000000100000f30 T _main
                 U _printf
0000000100000f00 T _sigint
                 U _signal
                 U dyld_stub_binder 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-07T15:42:18.900

确保使用 -g 选项和 gcc(cc) 编译程序，以便以操作系统的本机格式生成调试信息。尝试执行以下操作并检查符号表中是否存在调试符号。

```
$objdump -t your-elf 
$readelf -a your-elf
$nm -a your-elf 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-05T04:17:39.890

我也有这个问题，我看不到任何用户空间符号，但我看到了一些内核符号。我认为这是一个符号加载问题。在尝试了我能找到的所有可能的解决方案之后，我仍然无法让它工作。

然后我隐隐约约记得

> ulimit -u 无限

是需要的。我试过了，它神奇地起作用了。

我从这个 wiki 发现当你使用太多文件描述符时需要这个命令。

[https://perf.wiki.kernel.org/index.php/Tutorial#Troubleshooting_and_Tips](https://perf.wiki.kernel.org/index.php/Tutorial#Troubleshooting_and_Tips)

我最后的命令是

> 性能记录 -F 999 -g ./my_program

不需要 --call-graph

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-06T12:34:47.200

通过覆盖我的程序名称后，我遇到了与*perf相同的问题*`prctl(PR_SET_NAME)`

正如我所看到的，您的情况非常相似：

> 70.06% **ints.rkt** [未知]

您执行的命令（*球拍*）与*perf*看到的不同。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T02:38:26.173

你的开发主机呢？它是否也运行 x86_64 操作系统？如果没有，请确保 perf 是交叉编译的，因为 perf 依赖于工具链中的 objdump 和其他工具。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-29T14:44:47.770

您可以检查 kptr_restrict 的值`cat /proc/kallsyms`。如果结果中符号的地址都是0x000000，可以通过命令修复`echo 0 > sys/kernel/kptr_restrict`。在此之后，您可能会得到想要的结果`perf report`

# android - 如何在android中为文本视图设置每行最大字符数

> ID：10933412
> 
> 赞同：15
> 
> 时间：2012-06-07T14:02:24.613
> 
> 标签：android

大家好，这可能是重复的，但我找不到解决问题的方法。我需要在 textview 上显示时限制每行的字符数，并在下一行显示剩余的字符。我无法设置 ems 值我也尝试在 xml 中设置 maxLength 属性，但它没有显示剩余的字符，谁能告诉我我该怎么做。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-06-07T14:05:21.423

使用

```
android:maxWidth="size" 
```

将“尺寸”替换为您喜欢的尺寸。例如，`100dip`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:07:26.840

用这个 `android:maxLength="10"`

有关更多信息，请参阅[此站点](http://androidblogger.blogspot.in/2009/01/numeric-edittext-and-edittext-with-max.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:09:33.860

用于`android:maxWidth="10dip"`限制文本视图的大小。有了这个限制，下一行（假设您使用`setSingleLine(false)`）将在`10dip`.

使用`android:maxLength="50"`例如会限制您的文本视图，但不能确保它在 X 个字符后中断

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T14:08:33.930

设置 TextView 的这些参数：

```
android:layout_width="110dip"
android:singleline="false" 
```

试验 的值`android:layout_width`以找到适合您需要的值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-05-30T09:27:16.490

使用 ConstraintLayout 和 android:layout_width="0dp"。文本将适应约束

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2014-09-27T07:11:17.203

使用此代码：

```
android:maxLines="5"
android:maxLength="10" 
```

五行，最大长度为 10 个字符。

# msdn - MSDN 页面上的自动文本翻译 - 如何关闭？

> ID：10933414
> 
> 赞同：136
> 
> 时间：2012-06-07T14:02:31.237
> 
> 标签：msdn

有没有办法在*MSDN 库页面***关闭**自动文本翻译？

 *我确实更喜欢英文文本，但由于有一个德语 IP 地址，Microsoft 会在每次新页面加载时激活自动翻译，这会给我一个黄色框，其中包含我当前用鼠标悬停在上面的文本的德语翻译。

无论最初在右上角设置什么语言，无论我是否登录，都会发生这种情况。

我说不出这有多烦人！！

任何想法，任何人？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-13T23:05:56.150

当您点击顶部的“原始”单选按钮时，您会看到英语，黄色悬停框中带有德语。如果您访问原始英文网站，您看不到翻译，甚至在悬停时也看不到。您可以通过将 URL 中的 /de-de/ 替换为 /en-us/ 来切换到英语。如在

德语（翻译或原件，悬停翻译）：

[http://msdn.microsoft.com/de-de/library/system.diagnostics.contracts.contractargumentvalidatorattribute(v=vs.110).aspx](http://msdn.microsoft.com/) ***_*** _

仅英文（无翻译）：

[http://msdn.microsoft.com/en-us/library/system.diagnostics.contracts.contractargumentvalidatorattribute(v=vs.110).aspx](http://msdn.microsoft.com/) ***_*** _

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-08-08T10:10:44.457

如果您是 firefox 用户，则可以使用[Redirector](https://addons.mozilla.org/en-us/firefox/addon/redirector/)插件。创建一个新的重定向并将其设置如下：

![反射器配置](../Images/77f078c8061e66179d1620d45b7d4f97.png)

它会自动将所有 msdn 请求重定向到英文非翻译版本。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-03-23T12:55:59.633

找到了！我的意思是，它是 2016 年，晚了 3 年，也许他们最近才添加它，但是当您一直向下滚动时，左下角有一个小按钮，您可以在其中选择要使用的语言（更具体地说是一个国家/地区）你来自”）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-01-07T13:33:10.767

MSDN 使用 Web 浏览器设置中的首选语言。

[http://social.msdn.microsoft.com/Forums/en-US/6543407d-f743-48fb-965b-b8af9f9a0cb1/howto-disable-automatic-translation-into-german?forum=msdnfeedback](http://social.msdn.microsoft.com/Forums/en-US/6543407d-f743-48fb-965b-b8af9f9a0cb1/howto-disable-automatic-translation-into-german?forum=msdnfeedback)

这是由于`Accept-Language`标题：

[http://www.w3.org/International/questions/qa-accept-lang-locales](http://www.w3.org/International/questions/qa-accept-lang-locales)

因此，将您的浏览器设置为首选英语网站应该可以解决此问题。W3C 在此处概述了如何在不同的浏览器上执行此操作：

[http://www.w3.org/International/questions/qa-lang-priorities.en.php](http://www.w3.org/International/questions/qa-lang-priorities.en.php)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-10-07T11:30:25.973

还有一个chrome插件

[Switcheroo-重定向器](https://chrome.google.com/webstore/detail/switcheroo-redirector/cnmciclhnghalnpfhhleggldniplelbg)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-05-17T12:00:33.230

我厌倦了手动替换 MSDN 文档的 url 以`en-us`在 url 中定位，所以我想出了这个小用户脚本，用于非常方便的[Tampermonkey](http://tampermonkey.net/)扩展（在[Chrome](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)、[Microsoft Edge](https://www.microsoft.com/en-us/store/p/tampermonkey/9nblggh5162s)、[Opera](https://addons.opera.com/en/extensions/details/tampermonkey-beta/)和[Firefox](https://addons.mozilla.org/en/firefox/addon/tampermonkey/)上可用）

```
// ==UserScript==
// @name         MSDN docs [en-us] redirect
// @version      0.1
// @description  Redirects to the en-us version of the current MSDN doc page
// @grant        none
// @match        https://docs.microsoft.com/*
// ==/UserScript==

(function () {
    let pathname = window.location.pathname.split('/');
    if (pathname[1].toLowerCase() !== 'en-us') {
        pathname[1] = 'en-us';
        pathname = pathname.join('/');
        window.location.href = window.location.origin + pathname + window.location.search;
    }
})(); 
```

安装扩展程序后，

1.  点击它的图标
2.  点击`Create a new script...`
3.  粘贴之前的代码
4.  保存它（`Ctrl + S`或`File > Save`）。
5.  测试重定向：[https ://docs.microsoft.com/fr-fr/dotnet/csharp/programming-guide/classes-and-structs/classes](https://docs.microsoft.com/fr-fr/dotnet/csharp/programming-guide/classes-and-structs/classes)

该`@match`属性将确保此脚本仅针对 MSDN 文档页面运行。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-03-05T08:12:16.297

最近我遇到了同样的问题。我用 Chrome 扩展[ModHeader](https://chrome.google.com/webstore/detail/modheader/idgpnmonknjnojddfkpgkljpfnnfcklj)解决了这个问题。我配置并且它工作：![模块头](../Images/594aad519094e77ad887b9b675ee105f.png)

![在此处输入图像描述](../Images/2dbd483de48f296a2164ad3c1c90ed22.png)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-24T06:42:21.140

我知道这是一个老问题，也许这种见解对某人有用。

我几乎总是通过谷歌搜索打开 msdn。大多数时候，它为我提供了翻译成我当地语言的网站（通过带有区域设置的地址的一部分），有时旁边附有原始（英文）版本。如果我点击原始语言链接，它不会翻译任何内容，因此它不是基于我的本地化的**自动翻译。**

解决我的问题的方法是将谷歌搜索设置更改为更喜欢英语，而不是我的母语。转到[谷歌搜索设置](https://www.google.com/preferences?hl=en#languages)，设置`Which language should Google products use?`为`English`，然后`Currently showing search results in:`单击`Edit`并检查您可能搜索的其他语言。

它还将更改 google 的 UI 语言。我知道这可能会付出很高的代价，但我相信这是值得的。如果您搜索以给定语言键入的查询，则结果很可能无论如何都会导致该语言页面。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-12T08:10:39.610

您可以使用自定义搜索查询，而不是会消耗内存并且对于这种事情有点过分的扩展。

**铬合金**

设置 => 管理搜索引擎，添加以下条目：

*引擎：* `MSDN US`

*关键词：* `ms`

*URL：（* `https://social.msdn.microsoft.com/Search/en-US?query=%s`或在您阅读时使用任何正确的 url，只要`%s`在需要实际查询字符串的地方使用）

现在，在地址栏中，只需键入*`ms [SPACE]`*. 只要你按下空格，它就会提示你*`Search on MSDN US:`*。现在只需输入您的查询。例如*`ms string`*，会将您重定向到 MSDN-US 版本的搜索结果`string`。当然，您可以更改标题和关键字。

我确信其他常见的浏览器也公开了这种功能。在 Firefox 上，我曾经在搜索栏上插入自定义搜索引擎。

这是我用于各种搜索（SO、亚马逊、不同语言的维基百科等）的巧妙技巧。这是非常有效的。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-01-16T14:56:43.833

通常在页面底部有一个语言链接，您可以在其中更改语言（即使永久站点特定设置会更好）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-02-09T08:55:55.727

在 Internet 选项面板的 IE 中，您在常规选项卡中有外观部分。首先添加首选语言，从现在开始，MSDN 中的所有页面都将以所选语言呈现

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-05-14T05:15:25.220

我在 Firefox（实际上是 Waterfox）上使用 NoScript 插件，只是禁止“m-msft.com”，翻译器将被关闭。我认为您也可以在其他浏览器中使用其他插件来禁止域。NoScript 是任何严肃的网络用户的必备插件，当然还有 UserStyles。*

# php - 如何检查数据库并因此检查单选按钮？

> ID：10933415
> 
> 赞同：0
> 
> 时间：2012-06-07T14:02:31.527
> 
> 标签：php, javascript, mysql, html, forms

我将这些个人资料保存在数据库中，其中包含许多随机信息，例如姓名、性别、年龄等。

用户可以通过单击一个超链接来编辑他们的个人资料，然后将他们带到一个很像他们第一次注册时填写的表格。我已经设计了它，所以所有的文本输入字段都已经有了他们之前填写​​的值。下面是一个看起来像的例子：

```
<input type="text" name="fname" value="<?php echo $result['firstName']; ?>"/> 
```

如您所见，我正在从查询数据库创建的数组中呼应他们的名字。但问题是我对其中一些输入（如性别）使用了单选按钮（以及下拉框）。

那么，一旦我从数据库中确定他们是男性还是女性，如何检查相应的单选按钮？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:06:10.693

非常简单地：

```
<input type="radio" name="gender" value="M" <?php echo ($result['gender'] == "M" ? 'checked="checked"': ''); ?> />
<input type="radio" name="gender" value="F" <?php echo ($result['gender'] == "F" ? 'checked="checked"': ''); ?> /> 
```

选择框也是如此，在列出选项时检查并查看它们的存储值是否与您列出的`value`相同`option`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:11:23.343

```
<input type="radio" name="gender" value="m" <? if($row['gender'] == "m") print "selected";?> >
<input type="radio" name="gender" value="f" <? if($row['gender'] == "f") print "selected";?> > 
```

我认为它更简单。因为它们不能同时是两者。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:06:46.380

像这样的东西：

```
if($result['gender'] == 'male')
{
    echo '<input type="radio" name="gender" value="male" checked="checked"> Male';
    echo '<input type="radio" name="gender" value="female"> Female'; 
}
else {
    echo '<input type="radio" name="gender" value="male"> Male';
    echo '<input type="radio" name="gender" value="female" checked="checked"> Female';
} 
```

# windows-phone-7 - 转换包含 XDocumentType 的 XDocument 会导致 NotSupportedException

> ID：10933417
> 
> 赞同：1
> 
> 时间：2012-06-07T14:02:34.893
> 
> 标签：windows-phone-7, linq-to-xml, xbel

我正在尝试在包含以下文档类型的 WP7.1.1 上创建和导出 XDocument：

```
<!DOCTYPE xbel PUBLIC "+//IDN python.org//DTD XML Bookmark Exchange
    Language 1.0//EN//XML"
    "http://www.python.org/topics/xml/dtds/xbel-1.0.dtd"> 
```

不幸的是，到目前为止，我在所有尝试中都遇到了 NotSupportedExceptions，我不知道如何从这里开始。这是我尝试过的一些事情的摘录：

```
/* create document */
var document = new XDocument();
var doctype = new XDocumentType("xbel", null, null, null); 
document.AddFirst(doctype); // << everything working without this line

/* document header */
var version = new XAttribute("version", "1.0");
var root = new XElement("xbel", version);
document.Add(root);

/* convert to string1 */
var text1 = document.ToString(); // << NotSupportedException was unhandled

/* convert to string2 */
var stringBuilder = new StringBuilder();
var stringWriter = new StringWriter(stringBuilder);
document.Save(stringWriter); // << NotSupportedException was unhandled
var text2 = stringBuilder.ToString(); 
```

这个问题可能与[这个](https://stackoverflow.com/questions/6610621/how-to-load-an-inline-dtd-for-use-with-xdocument)和[这个](https://stackoverflow.com/questions/1417683/add-html-5-doctype-to-xdocument-net)问题有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T17:11:55.163

这是针对我的特定问题的 hacky 解决方案：

```
/* format */ 
var stringBuilder = new StringBuilder();
var stringWriter = new StringWriter(stringBuilder); 
document.Save(stringWriter);
var text = stringBuilder.ToString();

/* document type */
const string subset = "<!DOCTYPE xbel PUBLIC \"+//IDN python.org//DTD XML Bookmark Exchange Language 1.0" +
    "//EN//XML\" \"http://www.python.org/topics/xml/dtds/xbel-1.0.dtd\">";
return text.Replace("?>", "?>" + Environment.NewLine + subset); 
```

当一个框架的缺点和错误迫使你编写这样奇怪的代码时，这总是令人难过，但当这些遭遇与 Windows Phone 一样频繁时，情况就更糟了。

# javascript - 提示文件下载 C 后端

> ID：10933418
> 
> 赞同：0
> 
> 时间：2012-06-07T14:02:36.577
> 
> 标签：javascript, html, c, fpga

我有一个 FPGA，它托管一个带有 html 和 javascript 前端和 C 后端（呃）的网站。

无论如何要从C后端向客户端发送文件吗？我正在通过 html 表单与后端交谈（由于后端托管在 FPGA 上，我不确定它将如何处理 AJAX）。

一些棘手的问题是，网站托管在只读内存中（因此希望向客户发送文件）。

我要疯了，这不可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:12:11.047

不，这是可能的。您只需要确保在`GET`响应中设置了相关的 HTTP 标头。具体`Content-type`和`Content-Disposition`。例如：

```
Content-type: application/pdf
Content-Disposition: attachment; filename="downloaded.pdf" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:08:18.667

这当然可以通过 CGI 实现，例如：[http ://www.cs.tut.fi/~jkorpela/forms/cgic.html](http://www.cs.tut.fi/~jkorpela/forms/cgic.html)

# postgresql - OLAP/MDX - 定义计算成员，汇总所有时间到日期数据

> ID：10933420
> 
> 赞同：1
> 
> 时间：2012-06-07T14:02:42.257
> 
> 标签：postgresql, mdx, olap

我想在 OLAP 多维数据集中定义“迄今为止的所有时间”计算成员。我可以使用以下方法计算 YTD：

```
SUM(YTD([Time].[Month].CurrentMember), [Measures].[Suits]) 
```

如何包含自数据开始以来的所有日期？我的时间维度如下：

```
<Dimension type="TimeDimension" visible="true" foreignKey="granularity" highCardinality="false" name="Time">
  <Hierarchy name="Time" visible="true" hasAll="true" primaryKey="eom_date">
    <Table name="v_months" schema="bizdata">
    </Table>
    <Level name="Year" visible="true" column="year_number" type="String" uniqueMembers="false" levelType="TimeYears" hideMemberIf="Never">
    </Level>
    <Level name="Quarter" visible="true" column="quarter_number" type="String" uniqueMembers="false" levelType="TimeQuarters" hideMemberIf="Never">
    </Level>
    <Level name="Month" visible="true" column="month_number" type="String" uniqueMembers="false" levelType="TimeMonths" hideMemberIf="Never">
    </Level>
  </Hierarchy>
</Dimension> 
```

不确定是否相关：我使用的是 mondrian olap 服务器（在 tomcat 上运行），Saiku 作为前端，postgres 作为数据库

我尝试了很多组合，但我无法弄清楚。

更新：我尝试使用 Gonsalu 建议的语法：

```
<CalculatedMember name="YTD Suits" formatString="" formula="SUM(YTD([Time].[Month].CurrentMember), [Measures].[Suits])" dimension="Measures" visible="true">
</CalculatedMember>
<CalculatedMember name="PTD Suits" formatString="" formula="Sum({NULL:[Time].[Month].CurrentMember },[Measures].[Suits])" dimension="Measures" visible="true">
</CalculatedMember> 
```

使用它，我在启动 mondrian 时收到以下错误消息（注意 YTD 函数在没有第二个计算成员的情况下运行良好）：

```
Caused by: mondrian.olap.MondrianException: Mondrian Error:Failed to parse query
 'WITH
MEMBER [Measures].[Measures].[YTD Suits]
  AS 'SUM(YTD([Time].[Month].CurrentMember), [Measures].[Suits])',
    [$member_scope] = 'CUBE',
MEMBER_ORDINAL = 6
MEMBER [Measures].[Measures].[PTD Suits]
  AS 'Sum({NULL:[Time].[Month].CurrentMember },[Measures].[Suits])',
[$member_scope] = 'CUBE',
MEMBER_ORDINAL = 7
SELECT FROM [Project Performance]' 
```

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:45:29.963

我没有使用 Mondrian，但在 SQL Server Analysis Services (SSAS) 中，使用 NULL 成员会导致范围从级别的一端转到指定成员。

在您的情况下，您正在寻找的计算成员可能是这样的：

```
Sum( { NULL : [Time].[Month].CurrentMember }
   , [Measures].[Suits]
   ) 
```

您还可以在另一端使用 NULL 成员对计算成员*的结束时间进行计算，如下所示：*

```
{ [Time].[Month].CurrentMember : NULL } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-14T20:12:16.253

您可以将`PeriodsToDate`函数与`allMember`. 在您的情况下，它将是：

```
PeriodsToDate([Time.Time].[all_Time_member_name],[Time.Time].CurrentMember) 
```

# zend-framework - 为什么我的 Zend Validate Digits 无法识别？

> ID：10933421
> 
> 赞同：3
> 
> 时间：2012-06-07T14:02:43.130
> 
> 标签：zend-framework, zend-validate

我正在使用 Zend 框架创建一个表单来捕获用户人口统计数据。我正在努力验证两个文本字段上的数字。

我在 ../application/forms/UserDemographics.php 中构建我的表单，如下所示：

```
class Application_Form_UserDemographics extends Zend_Form
    {
        public function init()
        {
            $this->form = new Zend_Form;            
            $dbAdapter = Zend_Registry::get("db");  

                        ...

                        $this->fax_number = new Zend_Form_Element_Text('fax_number');
            $this->fax_number->setLabel('Fax Number')
                ->addFilter('Int')
                ->addFilter('StripTags')
                ->addValidator('Digits');   

                        $this->mobile_number = new Zend_Form_Element_Text('mobile_number');
            $this->mobile_number->setLabel('Mobile Number')
                ->addFilter('Int')
                ->addFilter('StripTags')
                ->addValidator('Digits');

                        ...

                }
         } 
```

我的数据库目前针对传真号码和移动号码字段进行了这样的配置，以便我可以测试是否接受数字：

```
+-----------------+-------------+------+-----+---------+----------------+
| Field           | Type        | Null | Key | Default | Extra          |
+-----------------+-------------+------+-----+---------+----------------+
...
| fax_number      | varchar(32) | NO   |     | NULL    |              
| mobile_number   | int(15)     | YES  |     | NULL    |              
... 
```

当我在 zend 表单的任一字段中输入除数字以外的任何内容时 - 即使我有一个添加到两个元素的数字验证器，也不会显示错误消息。

输入到手机号码文本字段中的文本在数据库中被替换为 0（零）：

```
mysql> select fax_number, mobile_number from user_demographics;
+--------------------+---------------+
| fax_number         | mobile_number |
+--------------------+---------------+
| var char no digits |             0 |
+--------------------+---------------+ 
```

至少 mobile_number 字段应该显示一条错误消息，说明只能在文本字段中输入数字，对吧？

为什么 Digits 验证器似乎没有被识别？

这基本上表明 Digits 验证器几乎被忽略了。呈现表单时，文本字段中有 0（零），但是当我在文本字段中输入文本时不显示错误消息 - 即使是在数据库中设置为 int 的 mobile_number 字段也是如此。

请指教？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:23:29.133

这是因为过滤器在验证器之前处理。

因此，您的代码的作用如下：

1.  接受输入
2.  将其转换为 int，如果包含任何不可转换的文本，它将为 0
3.  剥离标签
4.  检查输入是否仅包含数字，由于 int 过滤器，情况总是如此。

所以要解决这个问题，只需删除 int-filter：

```
class Application_Form_UserDemographics extends Zend_Form
{
    public function init()
    {
        $this->form = new Zend_Form;            
        $dbAdapter = Zend_Registry::get("db");  

                    ...

                    $this->fax_number = new Zend_Form_Element_Text('fax_number');
        $this->fax_number->setLabel('Fax Number')
            ->addFilter('StripTags')
            ->addValidator('Digits');   

                    $this->mobile_number = new Zend_Form_Element_Text('mobile_number');
        $this->mobile_number->setLabel('Mobile Number')
            ->addFilter('StripTags')
            ->addValidator('Digits');

                    ...

            }
     } 
```

# windows-phone-7 - 写入/读取对象

> ID：10933423
> 
> 赞同：0
> 
> 时间：2012-06-07T14:02:46.567
> 
> 标签：windows-phone-7

我想用一种简单的方法来写入/读取 WP7 中的对象元素。有些东西不能正常工作。我的思维方式和已经做过的事情是这样的：

首先，我创建一个代表我的对象的类。我添加了静态字符串只是为了看看一切是否正常：

```
namespace SimpleObject.Objects
{
    public class Entry
    {
        public string entrytitle { get; set; }
        public string entrycomment { get; set; }
        public string entrycat = "works";

        public Entry() { }
        public Entry(string Entrytitle, string Entrycomment, string Entrycat)
        {

            this.entrytitle = Entrytitle;
            this.entrycomment = Entrycomment;
            this.entrycat = Entrycat;
        }

        public string entry { get; set; }

    }
} 
```

然后，正如我在一些文章中所读到的，我需要在 App.xaml.cs 中进行一些更改，然后我们开始：

> 使用 SimpleObject.Objects；

在 App() 之前我放了这个：

> 公共静态条目 E；

然后在 App() 中：

```
UnhandledException += new EventHandler<ApplicationUnhandledExceptionEventArgs>(Application_UnhandledException);

E = new Entry();

InitializeComponent(); 
```

然后我的用户界面是两页。一是表格输入数据，二是读取。在应用程序栏按钮下，我有：

```
private void ApplicationBarIconButton_Click(object sender, System.EventArgs e)
        {
            Entry E = new Entry
            {
                entrytitle = TitleTextBox.Text,
                entry = CommentTextBox.Text,
            };

            this.NavigationService.Navigate(new Uri("/Page2.xaml", UriKind.Relative));
            MessageBox.Show("Category added!");

        } 
```

最后显示结果的页面：

```
private void button1_Click(object sender, RoutedEventArgs e)
        {
            TextBlock1.Text = App.E.entrycat;
            TextBlock2.Text = App.E.entrytitle;
        } 
```

第二个 TextBlock 什么也没给我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:09:34.327

您永远不会设置全局静态值。在您的按钮单击中，它应该是这样的：

```
private void ApplicationBarIconButton_Click(object sender, System.EventArgs e)
{
    App.E.entrytitle = TitleTextBox.Text,
    App.E.entrycat = CommentTextBox.Text,

    this.NavigationService.Navigate(new Uri("/Page2.xaml", UriKind.Relative));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:32:02.367

另一种选择是放弃您基本上仅用于将值从一页传递到下一页的全局变量。

您可以使用查询字符串值来执行此操作，就像在 Web 应用程序中一样，并在您的页面加载处理程序中获取它们。

```
private void ApplicationBarIconButton_Click(object sender, System.EventArgs e)
{
    this.NavigationService.Navigate(new Uri("/Page2.xaml?title=TitleTextBox.Text&comment=CommentTextBox.Text", UriKind.Relative));
} 
```

# vba - 如果单元格不为空，则遍历 Excel 工作表中的行并复制范围

> ID：10933425
> 
> 赞同：1
> 
> 时间：2012-06-07T14:02:47.890
> 
> 标签：vba, excel, while-loop

我几乎没有 VBA 经验，除了从我看到的其他电子表格的情况来看，我确信这一定是可能的。我已经搜索了所有内容，但找不到任何我可以使用的帮助或代码的解释。我希望有人能帮帮忙。

我从我们的网站购物车下载了一个数据，它没有格式化数据，然后上传到一些新的销售订单/发票生成软件。

作为一个例子，这里是一个图像的链接，该图像显示了数据当前的外观（工作簿称为“Orders.csv”，但如果需要，我可以转换为 xlsx）：

[http://web225.extendcp.co.uk/fiercepc.co.uk/img1.jpg](http://web225.extendcp.co.uk/fiercepc.co.uk/img1.jpg)

正如您所看到的，如果客户购买了多个产品（不是产品的数量，是完全不同的产品），它会列在行中。第一个产品从 H 列开始，第二个从 O 列开始，第三个从 V 列开始，依此类推。

我需要数据显示如下：

[http://web225.extendcp.co.uk/fiercepc.co.uk/img2.jpg](http://web225.extendcp.co.uk/fiercepc.co.uk/img2.jpg)

因此，每个产品都列在彼此的下方，并且前面有相同的客户详细信息。这样发票软件就可以检查每个订单 ID 并相应地创建显示所有不同产品的发票。

我不知道该怎么做。我想它需要是一个循环宏来检查一行是否在单元格中有数据，然后相应地复制范围。此外，宏需要位于不同的工作簿（可能称为宏）中，因此它会在此下载中起作用，因为每次下载它都会是一个新工作簿。我希望这是有道理的。

我相信这对某些人来说会很容易，但不是我。请帮忙！理想情况下，我需要带有解释的宏，以便我可以操作范围等，因为这只是一个示例电子表格，实际工作表要大得多并且包含更多数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-03T17:43:09.790

我设法从 elsewere 获得了我自己的问题的答案，但我想我会与可能感兴趣的每个人分享答案，因为答案是准确而深入的。

```
'****This macro is to use on sheets within the same workbook
'****If you want to transfer your data to another workbook you
'****will have to alter the code somewhat, but the idea is the same

Sub copydata()
Dim x As Integer
Dim y As Integer
Dim ws1 As Worksheet
Dim ws2 As Worksheet

Set ws1 = Worksheets("Ouput sheet") 'whatever you worksheet is
Set ws2 = Worksheets("Orders") 'or whatever your worksheet is called

'Item 1 - I'm calling the separate sections where each item ordered is in your worksheet Item 1, Item 2
'this encompasses columns H-N for item 1, etc, etc
r = 3 'this is the first row where your data will output
x = 3 'this is the first row where you want to check for data
Do Until ws2.Range("A" & x) = "" 'This will loop until column A is empty, set the column to whatever you want
                            'but it cannot have blanks in it, or it will stop looping. Choose a column that is
                            'always going to have data in it.

If Not ws2.Range("H" & x).Value = "" Then 'This checks your column H to make sure it's not empty
                                            'If empty, it goes on to the next line, if not it copies the data.
                                            'This column should be something that will have something in it if
                                            'there is a product ordered for Item 1
                                            'i.e. don't choose column J if it will have blanks where there is
                                            'actually an item ordered

'this section copies the data, the worksheet left of the = sign is the one data will be written to
    ws1.Range("A" & r).Value = ws2.Range("A" & x).Value 'Order Date
    ws1.Range("B" & r).Value = ws2.Range("B" & x).Value 'Order ID
    ws1.Range("C" & r).Value = ws2.Range("C" & x).Value 'Customer
    ws1.Range("D" & r).Value = ws2.Range("D" & x).Value 'Billing Add
    ws1.Range("E" & r).Value = ws2.Range("E" & x).Value 'Subtotal
    ws1.Range("F" & r).Value = ws2.Range("F" & x).Value 'Tax Amount
    ws1.Range("G" & r).Value = ws2.Range("G" & x).Value 'Total Amount
    ws1.Range("H" & r).Value = ws2.Range("H" & x).Value 'Product ID
    ws1.Range("I" & r).Value = ws2.Range("I" & x).Value 'Column J - couldn't read your headings for a few of these
    ws1.Range("J" & r).Value = ws2.Range("J" & x).Value 'Column K
    ws1.Range("K" & r).Value = ws2.Range("K" & x).Value 'L
    ws1.Range("L" & r).Value = ws2.Range("L" & x).Value 'Price
    ws1.Range("M" & r).Value = ws2.Range("M" & x).Value 'Attributes

    r = r + 1 'Advances r and x when there is a matching case
    x = x + 1
Else
    x = x + 1 'Advances only x (to check the next line) when there is not a matching case,
                'i.e. your output line stays on the next line down from where it last wrote data
                'while x advances
End If
Loop 'End of Item 1

'Item 2

x = 3 'this time we only define x, we want r to stay where it's at so it can continue copying the data into one
    'seamless list
Do Until ws2.Range("A" & x) = "" 'still want this to stay the same

If Not ws2.Range("O" & x).Value = "" Then 'This one needs to change to match the column in your second Item

'the ranges on ws1 will stay the same, ws2 ranges pertaining to customer data stay the same, ws2 ranges pertaining
'to specific Item 2 info will change
    ws1.Range("A" & r).Value = ws2.Range("A" & x).Value 'Order Date       *SAME
    ws1.Range("B" & r).Value = ws2.Range("B" & x).Value 'Order ID       *SAME
    ws1.Range("C" & r).Value = ws2.Range("C" & x).Value 'Customer       *SAME
    ws1.Range("D" & r).Value = ws2.Range("D" & x).Value 'Billing Add       *SAME
    ws1.Range("E" & r).Value = ws2.Range("E" & x).Value 'Subtotal       *SAME
    ws1.Range("F" & r).Value = ws2.Range("F" & x).Value 'Tax Amount       *SAME
    ws1.Range("G" & r).Value = ws2.Range("G" & x).Value 'Total Amount       *SAME
    ws1.Range("H" & r).Value = ws2.Range("O" & x).Value 'Product ID       *CHANGED!!!!
    ws1.Range("I" & r).Value = ws2.Range("P" & x).Value 'Column J       *CHANGED!!!!
    ws1.Range("J" & r).Value = ws2.Range("Q" & x).Value 'Column K       *CHANGED!!!!
    ws1.Range("K" & r).Value = ws2.Range("R" & x).Value 'L       *CHANGED!!!!
    ws1.Range("L" & r).Value = ws2.Range("S" & x).Value 'Price       *CHANGED!!!!
    ws1.Range("M" & r).Value = ws2.Range("T" & x).Value 'Attributes       *CHANGED!!!!

    r = r + 1 'Advances r and x when there is a matching case
    x = x + 1
Else
    x = x + 1 'Advances only x (to check the next line) when there is not a matching case,
                'i.e. your output line stays on the next line down from where it last wrote data
                'while x advances
End If
Loop 'End of Item 2
'simply copy Item 2 code and change the appropriate values to match Items 3,4,5,6, etc, etc

'You will get a list of all the info for Item 1, follow by all info for Item 2, etc, etc
'i.e. if Paul orders 2 items, they won't end up right below each other, but his second
'item will end up farther down, but will still be on the list
'If this is not what you want you could sort afterwards or alter the code, but it is a significant alteration

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:55:30.627

一个解决方案是：

1.  循环遍历行
2.  对于每一行，获取占用的列数。
3.  通过简单的数学查找行中的订单数（假设每个产品订单占用相同的列数）
4.  循环订单 - 将产品数据复制到新工作表中
5.  对于这些复制操作中的每一个，从最外层循环中正在处理的行中复制客户数据。
6.  至于最后一个要求。在您的宏中打开工作簿 orders.csv（假设文件名和位置保持不变）并对其进行上述所有操作。

我可以给你写。但是，如果您自己编写它，这对您来说将是一次很好的学习体验。您将可以在 stackoverflow 上找到大多数查询的答案（例如如何获取一行中占用的列数等）。

此外，通过此页面开始使用 Excel VBA： [http ://www.functionx.com/vbaexcel/](http://www.functionx.com/vbaexcel/)

# nlp - 大数据集的最大熵分类器

> ID：10933427
> 
> 赞同：3
> 
> 时间：2012-06-07T14:02:53.763
> 
> 标签：nlp, machine-learning, classification

我一直在寻找一个最大熵分类实现，它可以处理 500 个类和 1000 个特征的输出大小。我的训练数据大约有 30,000,000 行。我曾尝试使用 64 位 R maxent 软件包 MegaM，这是爱丁堡大学的 maxent 工具，但正如预期的那样，它们都无法处理数据的大小。但是，对于这种性质的 nlp 任务，数据集的大小似乎并不过分。有什么我应该采用的技术吗？或者对我可以使用的工具包有什么建议？我正在尝试在具有 8GB RAM 的 64 位 Windows 机器上运行它，并在需要时使用 Cygwin。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T14:46:40.407

[Vowpal Wabbit](http://hunch.net/~vw/)目前被认为是最快的大规模学习器。[LibLinear](http://www.csie.ntu.edu.tw/~cjlin/liblinear/)是一种替代方案，但我不确定它是否可以处理 3e10 元素的矩阵。

请注意，术语“MaxEnt”几乎只由 NLP 人员使用；机器学习人员将其称为逻辑回归或 logit，因此如果您搜索它，您可能会发现比搜索 MaxEnt 时更多的工具。

# asp.net-mvc - 来自上述类的 MVC 远程验证访问字段

> ID：10933430
> 
> 赞同：0
> 
> 时间：2012-06-07T14:02:57.967
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在下面的代码中，我无法将用户名传递给远程验证功能：

```
public string UserName { get; set; }

public class Numbers
{

            [Display(Name = "Additonal Numbers")]
            [Remote("NumberExists", "Account", AdditionalFields = "UserName", ErrorMessage = "Serial is already taken.")]
            public string additionalNumbers { get; set; }
 }

public List<Numbers> NumberList { get; set; } 
```

这是一个简单的示例，但我想在列表中传递来自同一模型的其他字段，但我似乎无法访问公共类范围之外的任何内容。

我是否需要以某种方式将模型的其余部分传递到列表中才能实现这一点，还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:08:31.737

远程验证属性中的`AdditionalFields`参数需要与正在验证的对象属于同一类。

..编辑..

```
public class Numbers
{

            public string UserName { get; set; }

            [Display(Name = "Additonal Numbers")]
            [Remote("NumberExists", "Account", AdditionalFields = "UserName", ErrorMessage = "Serial is already taken.")]
            public string additionalNumbers { get; set; }
 } 
```

..在评论后编辑.. 看起来您想要做的是验证所有数字对于用户名来说都是唯一的。试试这个：

```
public string UserName { get; set; }

[Display(Name = "Additonal Numbers")]
[Remote("NumberExists", "Account", AdditionalFields = "UserName", ErrorMessage = "Serial is already taken.")]
public List<String> NumberList { get; set; } 
```

在您的 NumberExists 操作中，获取一个字符串列表，而不仅仅是 1 个字符串。这将让您一次验证整个阵列。

```
Public ActionResult NumberExists(List<String> NumberList, String UserName){
    //Validate list is unique for username
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:24:39.940

`UserName`属性应该在`additionalNumbers`属性的同一类中：

```
public class NumbersViewModel
{
   public string UserName { get; set; }

   [Display(Name = "Additonal Numbers")]
   [Remote("NumberExists", "Account", AdditionalFields = "UserName", ErrorMessage = "Serial is already taken.")]
   public string additionalNumbers { get; set; }

   public List<Numbers> NumberList { get; set; }
} 
```

# c# - 在 System.Object 中将 JSON 发布到 WCF RESTful API 不接受它，但 Class 接受输入

> ID：10933433
> 
> 赞同：0
> 
> 时间：2012-06-07T14:03:16.030
> 
> 标签：c#, .net, json, wcf, wcf-rest

对不起，我的 Qs 标题有点奇怪，我没有找到合适的词来解释。纽威斯，

我有一个 WCF RESTful API，我在其中实现了自定义参数检查器类，它继承了 IParameterInspector 以捕获 AfterCall 和 BeforeCall 方法。

```
public class CustomParameterInspector : IParameterInspector
{

    public void AfterCall(string operationName, object[] outputs, object returnValue, object correlationState)
    {}

    public object BeforeCall(string operationName, object[] inputs)
    {
        // I have to perform certain tasks here
    }
} 
```

现在我的服务接口是这样的

```
 [OperationContract]
    [CustomInspectorAttribute]
    [WebInvoke(Method = "POST",
        UriTemplate = "GetMyDetail")]
    MyDetail GetMyDetail(MyDetail objMyDetail); 
```

服务类是这样的

```
public MyDetail GetMyDetail(MyDetail objMyDetail)
    {} 
```

如果我从客户端发布**JSON**，那么它可以正常工作....在 input[0] 中，我将其类型设为**MyDetail**

但是如果像这样将输入参数更改为**Object**

```
[OperationContract]
    [CustomInspectorAttribute]
    [WebInvoke(Method = "POST",
        UriTemplate = "GetMyDetail")]
    MyDetail GetMyDetail(Object objMyDetail);

public MyDetail GetMyDetail(Object objMyDetail)
    {} 
```

然后它不会在 BeforeCall(string operationName, object[] inputs) 的输入 [0] 中给我 null

你能告诉我是这样吗？我该如何解决它，我真的需要把它放在**对象中**

# .net - VB.Net 声明一个类数组，并设置值

> ID：10933435
> 
> 赞同：1
> 
> 时间：2012-06-07T14:03:19.493
> 
> 标签：.net, vb.net, arrays, class

我在 VB.Net 中有一点语法声明问题。

```
Dim proxy As USImportoerServiceTypeClient = DMRUtils.CreateAndConfigureClient()

Dim request As New USDeclare_I()
request.DeclareCollection = New US_ITypeDeclare() {}
For Each KES In request.DeclareCollection
    KES.DeclareCollectionStructure.DeclareCollectionValidDate = DateTime.ParseExact(txtDeclareDate.Text, "dd-MM-yyyy", System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat)
Next 
```

上面的代码不起作用，因为**“US_ITypeDeclare() {}”**是空的，只包含一个新的 DeclareCollectionStructure

如何向此声明 KoeretoejErklaeringStructure 并将此日期值设置为 "DeclareCollectionStructure.DeclareCollectionValidDate" ？

来自丹麦的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:33:44.737

数组具有固定长度，在创建数组时声明。因此，您的数组的长度始终为`0`.

改用 a `List(Of T)`。当您向列表中添加项目时，列表会动态增长。

```
request.DeclareCollection = New List(Of US_ITypeDeclare)
Dim newItem = new US_ITypeDeclare()
newItem.DeclareCollectionStructure.DeclareCollectionValidDate =  _
    DateTime.ParseExact(txtDeclareDate.Text, "dd-MM-yyyy", _
                System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat)
request.DeclareCollection.Add(newItem)
' Now the list contains one item 
```

当然，您必须将定义调整`DeclareCollection`为列表而不是数组。

# c# - 在 MVC 2 C# 中将签名数据插入 SQL Server

> ID：10933439
> 
> 赞同：0
> 
> 时间：2012-06-07T14:03:31.007
> 
> 标签：c#, asp.net-mvc, image, linq

我有使用签名板数据创建签名 bmp 图像并将其保存到文件位置的工作代码。我的问题是：如何修改此代码以将图像插入 SQL Server 2008 图像字段？

我的控制器中的以下内容从签名板获取签名数据并创建 bmp 图像并将其保存到文件位置。

```
 [PrincipalPermission(SecurityAction.Demand, Authenticated = true)]
    public ActionResult SaveSignature2(IPrincipal principal) {
        int userId = ((ScoutIdentity)principal.Identity).UserId.Value;
        //Put user code to initialize the page here
        SIGPLUSLib.SigPlus sigObj = new SIGPLUSLib.SigPlus();
        sigObj.InitSigPlus();
        sigObj.AutoKeyStart();

        string visitorname = Request.Form["visitorname"];
        visitorname = visitorname.Replace(" ", ""); //combines the first name with last name with no spaces
        visitorname = visitorname.Trim();
        string thevrvIDstr = Request.Form["vrvID"];
        int thevrvID = Convert.ToInt32(thevrvIDstr);

        //use the same data to decrypt signature
        sigObj.AutoKeyData = Request.Form["SigText"];

        sigObj.AutoKeyFinish();
        sigObj.SigCompressionMode = 1;
        sigObj.EncryptionMode = 2;

        //Now, get sigstring from client
        //Sigstring can be stored in a database if 
        //a biometric signature is desired rather than an image
        sigObj.SigString = Request.Form["hidden"];

        if (sigObj.NumberOfTabletPoints() > 0) {
            sigObj.ImageFileFormat = 0;
            sigObj.ImageXSize = 500;
            sigObj.ImageYSize = 150;
            sigObj.ImagePenWidth = 8;
            sigObj.SetAntiAliasParameters(1, 600, 700);
            sigObj.JustifyX = 5;
            sigObj.JustifyY = 5;
            sigObj.JustifyMode = 5;
            long size;
            byte[] byteValue;
            sigObj.BitMapBufferWrite();
            size = sigObj.BitMapBufferSize();
            byteValue = new byte[size];
            byteValue = (byte[])sigObj.GetBitmapBufferBytes();
            sigObj.BitMapBufferClose();
            System.IO.MemoryStream ms = new System.IO.MemoryStream(byteValue);
            System.Drawing.Image img = System.Drawing.Image.FromStream(ms);
            String path;
            path = System.AppDomain.CurrentDomain.BaseDirectory;
            path = path + "/uploadFiles/Signatures/"+thevrvIDstr+".bmp";
            img.Save(path, System.Drawing.Imaging.ImageFormat.Bmp);

           ViewData["Result"] = ("Image saved successfully to " + path);
        }
        else {
            ViewData["Result"] = "signature has not been returned successfully!";
        }

        ViewData["Result"] = sigObj.SigString;
        //return RedirectToAction("vrSignIn");
        return View();
    } 
```

我的控制器中的其他地方也有代码，可以获取上传的文件并将其插入数据库。此代码工作正常。

```
 [AcceptVerbs(HttpVerbs.Post)]
    public ActionResult UploadTempFiles(string id, string u)
    {
        //this method temporarily stores files 
        string userIdString = Cryptographer.DecryptSymmetric("RijndaelManaged", SecurityImpl.UrlToBase64(u));
        int userId = Convert.ToInt32(userIdString);

        if (Request.Files.Count > 0)
        {
            for (int i = 0; i < Request.Files.Count; i++)
            {
                HttpPostedFileBase file = Request.Files[i];
                int contentlength = file.ContentLength;
                byte[] b = new byte[contentlength];
                Stream s;
                s = file.InputStream;
                s.Read(b, 0, contentlength);
                VisitRequest.AddVisitorSignature(userId, b);
            }
        }

        return View("UploadFiles");
    } 
```

我在想我可以使用第二个代码的某些部分来中断第一个代码中的图像创建过程，并将图像插入数据库而不是将图像保存到文件位置。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T15:03:53.960

我有同样的问题，我解决了：

1.  评论这三行：

    ```
    //path = System.AppDomain.CurrentDomain.BaseDirectory;
    //path = path + "/uploadFiles/Signatures/"+thevrvIDstr+".bmp";
    //img.Save(path, System.Drawing.Imaging.ImageFormat.Bmp); 
    ```

2.  将图像转换为字符串数据（假设您的变量 'strSignature' 之前已声明）：

    ```
    strSignature = img.ToString(); 
    ```

3.  将其与您的存储过程一起保存。

希望这对你有帮助！

# c++ - c++ 掷骰子分析器（二维数组）

> ID：10933441
> 
> 赞同：0
> 
> 时间：2012-06-07T14:03:50.387
> 
> 标签：c++, arrays, random, 2d, cout

我正在做一些 C++ 练习并尝试编写一个程序来计算 10000 次尝试后掷骰子组合的次数。我使用了一个二维数组来存储每个可能的骰子组合，我执行 10000`rand()%6+1`并增加它随机分配的内存分配中的值。

这是我的尝试。

```
cout << "\nDice roll analyser" << endl;

const int first = 6;
const int second = 6;
int nRolls[first][second];
int count = 0;

while (count < 10000){
    nRolls[rand()%6+1][rand()%6+1]+=1;
    count++;
}

for (int i=0;i<first;i++){
    for (int j=0;j<second;j++){
        cout << nRolls[i][j] << " ";
    }
} 
```

这是我得到的输出；

0 0 0 0 0 0 0 269 303 265 270 264 228 289 272 294 290 269 262 294 303 277 265 294 288 266 313 274 301 245 317 276 2902 284 264

我想要实现的是每个组合的滚动次数，例如滚动 1、6 的次数等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T14:11:05.010

你永远不会更新你的`count`.

对于您想要运行代码段 n 次的事情，现在 n = 10000，这是您想要执行的一般方式。

```
for (int i = 0; i < 10000; ++i)
{
    //loop code.
} 
```

此外，`myVariable+=1`总是可以简化为`++myVariable`or `myVariable++`（如果您在分配时没有使用 myVariable 的值，最好使用第一个。有关前/后增量的更多信息可以在这里找到：[http： //gd.tuwien.ac.at/languages/c/programming-bbrown/c_015.htm](http://gd.tuwien.ac.at/languages/c/programming-bbrown/c_015.htm)

所以`nRolls[rand()%6+1][rand()%6+1]+=1;` 你可以代替

```
++(nRolls[rand()%6+1][rand()%6+1]); 
```

此外，数组是零索引的，这意味着当你这样做时，`rand()%6+1`你会限制从`1`to的值`6`并忽略`0`数组的位置，这是第一个，所以考虑只使用

```
++(nRolls[rand()%6][rand()%6]); 
```

然后，要找出你滚动 a (i,j) 的频率，其中 i 和 j 在 1 和 6 之间，

```
cout << "(" << i << "," << j << "):" << nRolls[i-1][j-1] << endl; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T14:12:35.280

您将在这里遇到问题，因为您将 +1 添加到 rand()%6 您将永远不会增加任何索引为零的元素的计数。您允许递增的最小元素索引从 1 开始。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:33:17.437

好的，谢谢你的帮助。这是正确显示的更新代码！

```
cout << "\nDice roll analyzer" << endl;

srand(time(0));

const int first = 6;
const int second = 6;
int nRolls[first][second];
int count = 0;

while (count < 10000){
    nRolls[rand()%6][rand()%6]++;
    count++;
}

for (int i=0;i<first;i++){
    for (int j=0;j<second;j++){
        cout << "(" << i+1 << "," << j+1 << ")" << nRolls[i][j] << endl;
    }
} 
```

# ios - CLLocationManager - 监控区域与重大位置变化

> ID：10933450
> 
> 赞同：8
> 
> 时间：2012-06-07T14:04:11.417
> 
> 标签：ios, location, cllocationmanager

我目前正在使用重要的位置更改更新来监控用户是否进入了特定的感兴趣区域（我对感兴趣区域的定义比简单地通过地理区域定义的范围更广）。我的要求是应该定期唤醒我的应用程序以检查用户是否在定义区域（如果它当前未运行）。

我的问题是：注册区域更新（因为我有许多已知适合我感兴趣的区域的区域），是否会为我提供更多更新，而不是简单地监听所有重要的位置变化，或者它们只是重复更新？我问这个问题的原因是为了澄清区域监控是否只是对重大位置变化更新的过滤器（因为两者都没有记录为为 GPS 供电），或者区域监控是否能够以某种方式更具体（也许它为GPS，但更具体）。特别是，我很想知道是否有人看过有关此问题的数据或文档。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T19:37:43.757

与重要的位置变化服务相比，区域监控似乎来自更具体的位置信号变化。我这样说是因为我已经定义了区域监控在后台拾取的小区域（半径约 100 m），但显着的位置变化没有。但是请记住，这两个事件是在不同类型的用户操作上触发的。

区域监控 - 仅在**过境**时触发。因此，用户必须在边界的任一侧都有两个位置更新事件。如果您定义大区域并且用户在其中四处走动，您将不会获得**任何**更新。

重大的位置变化 - 似乎是在手机切换信号塔时触发的，[位置感知](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/LocationAwarenessPG/CoreLocation/CoreLocation.html#//apple_ref/doc/uid/TP40009497-CH2-SW10)文档似乎暗示了这一点。以下是有关这些更新的一般准确性的一些[重要数据](http://longweekendmobile.com/2010/07/22/iphone-background-gps-accurate-to-500-meters-not-enough-for-foot-traffic/)，表明通知之间大约有 500 m。

# xml - XSLT 显示序列号

> ID：10933453
> 
> 赞同：1
> 
> 时间：2012-06-07T14:04:20.883
> 
> 标签：xml, xslt

我的输入 XML 包含以下内容，

```
<root>
    <entry>
        <type>U</type>
        <value>111</value>
    </entry>
    <entry>
        <type>X</type>
        <value>222</value>
    </entry>
    <entry>
        <type>E</type>
        <value>333</value>
    </entry>
    <entry>
        <type>Q</type>
        <value>444</value>
    </entry>
</root> 
```

输出我需要， `<ROOT>` `<ENTRY>` `<SLNO>1</SLNO>` `<VALUE>111</VALUE>` `</ENTRY>` `<ENTRY>` `<VALUE>222</VALUE>` `</ENTRY>` `<ENTRY>` `<VALUE>333</VALUE>` `</ENTRY>` `<ENTRY>` `<SLNO>2</SLNO>` `<VALUE>444</VALUE>` `</ENTRY>` `</ROOT>`

我需要解析所有记录，但需要为类型不是 X 和 E 的记录输入序列号。

我已经为相同的内容编写了一个 for-each 并使用 'position()' 来显示带有 E 和 X 类型条件的序列号。所以我得到序列号为 1、4 而不是 1、2 因为 '位置（）'。

我想创建一个全局变量并在我的 if 块中增加它，但是 XSLT 1.0 不允许增加变量值。

我怎样才能做到这一点？

我的示例 XSL 代码如下，

```
<xsl:for-each select="/ROOT/ENTRY">
    <xsl:if test="(TYPE != 'X') and (TYPE != 'E')">             
        <xsl:text><![CDATA[<SLNO>]]></xsl:text>
        <xsl:number value="position()"/>
        <xsl:text><![CDATA[</SLNO>]]></xsl:text>
    </xsl:if>
    <!-- Printing remaining values -->
</xsl:for-each> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:51:53.577

您可以计算XML中前面**类型**元素的数量，而不是使用 position()

```
<xsl:value-of select="count(preceding::type[. != 'X' and . != 'E']) + 1" /> 
```

**此外，您可以通过直接匹配type**元素而不是**entry**元素来简化当前的 XSLT ，然后只需将其替换为新的**slno**元素。

```
<xsl:template match="type[. != 'X' and . != 'E']"> 
```

例如，尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="type[. != 'X' and . != 'E']">
      <slno><xsl:value-of select="count(preceding::type[. != 'X' and . != 'E']) + 1" /></slno>
   </xsl:template>

   <xsl:template match="type" />

   <xsl:template match="@*|node()">
      <xsl:copy>
         <xsl:apply-templates select="@*|node()"/>
      </xsl:copy>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<root>
   <entry>
      <slno>1</slno>
      <value>111</value>
   </entry>
   <entry>
      <value>222</value>
   </entry>
   <entry>
      <value>333</value>
   </entry>
   <entry>
      <slno>2</slno>
      <value>444</value>
   </entry>
</root> 
```

请注意，我在这里使用所有小写的元素名称。我不确定您是否想将它们翻译成大写字母。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:37:42.503

**公认的答案是一个很好的答案，除了实现的算法具有 O(N^2) （二次）时间复杂度并且在大输入上执行非常慢**。

**这是具有线性时间复杂度 O(N) 的变换：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:param name="pCount" select="0"/>
  <xsl:copy>
   <xsl:apply-templates select="node()[1]|@*">
     <xsl:with-param name="pCount" select="$pCount"/>
   </xsl:apply-templates>
  </xsl:copy>
  <xsl:apply-templates select="following-sibling::node()[1]">
     <xsl:with-param name="pCount" select="$pCount"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="entry[not(contains('EX', type))]">
  <xsl:param name="pCount" select="0"/>

  <xsl:copy>
   <slno><xsl:value-of select="$pCount+1"/></slno>
   <xsl:apply-templates select="node()[1]|@*">
     <xsl:with-param name="pCount" select="$pCount+1"/>
   </xsl:apply-templates>
  </xsl:copy>
  <xsl:apply-templates select="following-sibling::node()[1]">
     <xsl:with-param name="pCount" select="$pCount+1"/>
  </xsl:apply-templates>
 </xsl:template>

 <xsl:template match="type">
   <xsl:param name="pCount" select="0"/>
   <xsl:apply-templates select="following-sibling::node()[1]">
     <xsl:with-param name="pCount" select="$pCount+1"/>
   </xsl:apply-templates>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<root>
    <entry>
        <type>U</type>
        <value>111</value>
    </entry>
    <entry>
        <type>X</type>
        <value>222</value>
    </entry>
    <entry>
        <type>E</type>
        <value>333</value>
    </entry>
    <entry>
        <type>Q</type>
        <value>444</value>
    </entry>
</root> 
```

**产生了想要的正确结果：**

```
<root>
   <entry>
      <slno>1</slno>
      <value>111</value>
   </entry>
   <entry>
      <value>222</value>
   </entry>
   <entry>
      <value>333</value>
   </entry>
   <entry>
      <slno>2</slno>
      <value>444</value>
   </entry>
</root> 
```

**说明**：

1.  使用和覆盖**[“细粒度身份规则”](https://stackoverflow.com/a/5694777/36305)**。它之所以得名，是因为模板一次仅应用于一个节点（按文档顺序）。

2.  “细粒度身份规则”被修改为包含并传递一个参数`$pCount`，该参数包含迄今为止达到的最大当前“序列号”。

3.  这无需返回当前序列号即可工作，因为所有`entry`元素都是同级元素。

4.  时间复杂度是线性的，因为在每个节点上都没有计算所有先前的兄弟姐妹，就像在另一个答案中所做的那样。

# tridion - 编辑某些组件时 SDL Tridion SiteEdit 2009 SP2 XPath 错误

> ID：10933454
> 
> 赞同：3
> 
> 时间：2012-06-07T14:04:26.013
> 
> 标签：tridion, tridion2009, siteedit

尝试使用 SiteEdit 编辑我的一些组件演示文稿时收到以下错误。

> Sys.FormatException：无法从组件 xml 架构中获取类型信息。字段：cf_tcm:32-204267_title XPath: Content/custom:Content/custom:title[1]

这很奇怪，因为某些具有相同模板的组件可以正常工作（这些没有图像集，但具有图像集的组件不起作用）。

这是我的 CT 的代码：

```
<div class="column v-2 siteedit">
  <!-- TemplateBeginIf cond = "Component.thumbnail" -->
    <!-- TemplateBeginIf cond = "Component.image" -->
      <a href="@@Component.Fields.image@@" class="fb ajax">
    <!-- TemplateEndIf -->
    <img src="@@Component.Fields.thumbnail@@"  class="align-left"
         alt="@@thumbnail0.Metadata.alt@@" height="69" width="99"/>
    <!-- TemplateBeginIf cond = "Component.image" -->
      </a>
    <!-- TemplateEndIf -->
  <!-- TemplateEndIf -->    
  <h2>
    <tcdl:ComponentField name="title">@@Component.Fields.title@@</tcdl:ComponentField>
  </h2>
  <p>@@Component.Fields.summary@@</p>
</div> 
```

（我删除了其他可编辑字段只是为了确保它不是特定字段的问题）

有任何想法吗？

**更新**
根据要求，这是我的（匿名）HTML，第一个和第三个组件有问题，中间一个很好：

```
<div class="general-content columns-three">
    <div class="column v-2 siteedit" style="height: 209px; ">
        <!-- Start SiteEdit Component Presentation: {
            "ID" : "97829119-68f0-4e41-9862-b042d480cb71",
            "ComponentID" : "tcm:32-204859",
            "ComponentTemplateID" : "tcm:32-204536-32",
            "Version" : "2",
            "IsQueryBased" : false
        } -->
        <a href="http://REDACTED:84/_images/REDACTED.png?__Proxy=0" class="fb ajax" target="_self">
            <img src="/_images/REDACTED.gif" class="align-left" alt="REDACTED" height="69" width="99">
        </a>

        <h2>
            <span style="">
            <!-- Start SiteEdit Component Field: {
                "ID" : "cf_tcm:32-204267_title", 
                "XPath" : "tcm:Content/custom:Content/custom:title[1]", 
                "IsMultiValued" : false
            } -->REDACTED
            </span>
        </h2>
      <p>REDACTED</p>
    </div>      

    <div class="column v-2 siteedit" style="height: 209px; ">
        <!-- Start SiteEdit Component Presentation: {
            "ID" : "2933b5e0-2006-440d-bc03-2224650bdd7d",
            "ComponentID" : "tcm:32-204268",
            "ComponentTemplateID" : "tcm:32-204536-32",
            "Version" : "5",
            "IsQueryBased" : false
        } -->
        <h2> <span style="">
            <!-- Start SiteEdit Component Field: {
                "ID" : "cf_tcm:32-204268_title", 
                "XPath" : "tcm:Content/custom:Content/custom:title[1]", 
                "IsMultiValued" : false} -->REDACTED</span>
           </h2>
           <p>REDACTED</p>
    </div>      

    <div class="column v-2 siteedit" style="height: 209px; ">
        <!-- Start SiteEdit Component Presentation: {
            "ID" : "fac3c467-7c71-4be9-b319-8a35524ee172",
            "ComponentID" : "tcm:32-204860",
            "ComponentTemplateID" : "tcm:32-204536-32",
            "Version" : "2",
            "IsQueryBased" : false
        } -->
        <a href="http://REDACTED:84/_images/REDACTED.png?__Proxy=0" class="fb ajax" target="_self">
            <img src="/_images/REDACTED.gif" class="align-left" alt="REDACTED" height="69" width="99">
        </a>
        <h2> <span style="">
            <!-- Start SiteEdit Component Field: {
                "ID" : "cf_tcm:32-204269_title", 
                "XPath" : "tcm:Content/custom:Content/custom:title[1]", 
                "IsMultiValued" : false
            } -->REDACTED</span>
        </h2>
        <p>REDACTED</p>
    </div>      
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T15:18:32.390

我解释了当该错误消息出现在这里时：[“无法从组件 xml 架构中获取类型信息”在 SiteEdit 2009 中加载页面时](https://stackoverflow.com/questions/10436067/could-not-get-the-type-info-from-component-xml-schema-when-loading-a-page-in-s)

`<!-- Start SiteEdit Component Field`您的用例可能与该问题不同，产品总是出于相同的原因显示这一点：它在当前组件（在封闭命令中标识）中找不到字段（在命令中标识`<!-- Start SiteEdit Component Presentation`）。

鉴于您的错误信息：

> cf_tcm:32-204267_title XPath: Content/custom:Content/custom:title[1]

似乎 Component`tcm:32-204267`没有名为`title`.

在这些情况下，如果您查看 SiteEdit 最终处理的 HTML，那么您的登台/预览服务器返回的内容总是最简单的。找到该`title`字段及其封闭的 Component Presentation 并验证该 Component Presentation 确实有一个名为 的字段`title`。

如果您想更直接地回答“我做错了什么？”，请将相关的 HTML-with-the-SiteEdit-commands 添加到您的问题中，我会更新我的答案以匹配。

* * *

**根据提供的 HTML 更新**

如果我查看您提供的组件和字段的 ID：

1.  组件：`tcm:32-204859`字段：`cf_tcm:32-204267_title`
2.  组件：`tcm:32-204268`字段：`cf_tcm:32-204268_title`
3.  组件：`tcm:32-204860`字段：`cf_tcm:32-204269_title`

JSON 中的 ID 仅由 SiteEdit 使用，以确保一些无意义的唯一性。但在这种情况下，字段 ID 似乎表明该字段来自哪个组件。

如果您随后仔细查看数据，您会发现对于组件 2，该字段指向同一个组件。对于组件 1 和 3，字段实际上指向另一个组件。同样，`ID`字段命令的属性本身并未使用。但是，有效与无效之间的关系似乎与 SiteEdit 加载包含`Component Presentation`命令中指示的组件架构并且无法在`Component Field`命令中指示的 XPath 中找到字段的知识非常吻合。

我怀疑在#1 和#3 中您在页面上放置了一些常规组件，但正在呈现链接该组件的多媒体组件的标题。在#2 中，您很可能会呈现显式放置在页面上的 MMC 的标题。

# python - 如何在 mmap 中指定偏移量和访问权限？

> ID：10933458
> 
> 赞同：5
> 
> 时间：2012-06-07T14:04:57.043
> 
> 标签：python, mmap

给定 mmap 的构造函数声明：

`class mmap.mmap(fileno, length[, flags[, prot[, access[, offset]]]])`

**如何指定访问和偏移量？**

该文档指出：

> 可以指定 access 来代替 flags 和 prot 作为可选的关键字参数。同时指定标志、prot 和访问是错误的。有关如何使用此参数的信息，请参阅上面的访问说明。

所以我试着做类似的事情

*   `mmap.mmap(file_no, length, offset, access=mmap.ACCESS_COPY)`
*   `mmap.mmap(file_no, length, access=mmap.ACCESS_COPY, offset=offset)`

    > > > m = mmap.mmap(f.fileno(), 4, access=mmap.ACCESS_COPY, offset=2)
    > > > Traceback（最近一次调用最后一次）：
    > > > 文件“”，第 1 行，在 mmap.error：[Errno 22] 无效参数

*   `mmap.mmap(file_no, length, mmap.ACCESS_COPY, offset)`

但我无法让它工作。为什么这让我如此困惑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:20:29.860

此错误与访问无关。如 [文档](http://docs.python.org/library/mmap.html#mmap.mmap)所述，偏移量必须是`mmap.PAGESIZE`or的倍数`mmap.ALLOCATIONGRANULARITY`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:23:36.880

尝试：

```
m = mmap.mmap(f.fileno(), 4, access=mmap.ACCESS_COPY, offset=2 * mmap.ALLOCATIONGRANULARITY) 
```

# mercurial - TortoiseHg 在克隆时中止未知格式

> ID：10933467
> 
> 赞同：2
> 
> 时间：2012-06-07T14:05:25.740
> 
> 标签：mercurial, format, clone, tortoisehg

我正在使用 Windows 资源管理器将存储库从映射驱动器中的文件夹克隆到我的本地工作文件夹中。我以前的任何存储库都没有遇到过这个问题，但是在克隆目录时我不断收到错误消息。该错误指向“未知格式”的文件。这是确切的错误：

```
abort: index data/Scripts/tiny_mce/themes/advanced/skins/default/dialog.css.i unknown format 5661! 
```

大约一半的存储库被克隆，但由于中途出现错误，它永远不会完成。我使用了一个远程命令，据说它会跳过未知格式（我在网上某处找到），但它不起作用。这将是完整的命令：

```
hg clone --remotecmd skip-unknown-format --verbose -- Q:\mercurial-repository\east C:\working 
```

关于如何跳过该文件和/或如何修复此错误的任何指示？

这是我的 hg 版本信息：带有 Mercurial-2.2.1、Python-2.6.6、PyQt-4.8.6、Qt-4.7.4 的 2.4 版

# sql - 在 Microsoft SQL 数据库中对文件路径进行分组

> ID：10933469
> 
> 赞同：0
> 
> 时间：2012-06-07T14:05:37.633
> 
> 标签：sql, sql-server, regex, tsql, select

我有一个包含如下文件夹列表的表：

```
Path                    Size
C:\ParentFolder\A       123
C:\ParentFolder\A\B     442434
C:\ParentFolder\A\B\C   13413412
C:\ParentFolder\D       2422341234
C:\ParentFolder\D\E     3342
C:\ParentFolder\D\E\F   2
C:\ParentFolder\D\E\G   2
... 
```

我正在寻找 SUM、GROUP BY 和 PATINDEX/LTRIM/SUBSTRING/等的某种组合。这会给我这个：

```
Path                    SumSize
C:\ParentFolder\A       13855969
C:\ParentFolder\D       2422344580
... 
```

C:\ParentFolder 是已知前缀，但 A、D 等。是可变文件夹名称。我是否需要编写一个函数来完成它，或者我可以使用字符串函数的某种组合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:13:06.043

```
select r.Path, sum(Size) as SumSize
from MyTable m
inner join (
    select Path
    from MyTable 
    where charindex('\', Path, len('C:\ParentFolder\') + 1) = 0 
) r on charindex(r.Path, m.Path, 0) = 1
group by r.Path 
```

[SQL Fiddle 示例在这里](http://sqlfiddle.com/#!3/d30b6/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:15:29.380

从您的测试集开始，

```
CREATE TABLE #MyTable (Folder varchar(100) not null, Size bigint not null)

INSERT #MyTable values
  ('C:\ParentFolder\A'     ,  123)
 ,('C:\ParentFolder\A\B'   ,  442434)
 ,('C:\ParentFolder\A\B\C' ,  13413412)
 ,('C:\ParentFolder\D'     ,  2422341234)
 ,('C:\ParentFolder\D\E'   ,  3342)
 ,('C:\ParentFolder\D\E\F' ,  2)
 ,('C:\ParentFolder\D\E\G' ,  2) 
```

您首先要确定要汇总的文件夹。我在这里通过将它们加载到临时表中来做到这一点：

```
DECLARE @Targets table (Folder varchar(100) not null)
INSERT @Targets values
  ('C:\ParentFolder\A')
 ,('C:\ParentFolder\D') 
```

从这里很容易，使用 like 子句：

```
SELECT ta.Folder, sum(Size) TotalSize
 from @Targets ta
  left outer join #MyTable mt
   on mt.Folder like ta.Folder + '%'
 group by ta.Folder 
```

如果您的文件夹包含`like`子句使用的保留字符：`% _ ] [`和其他一些字符，则可能会出现复杂情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:40:06.263

假设总是有一个最高级别目录的条目（即如果有一个`c:\xxx\yyy\zzz`总是会有一个`c:\xxx\yyy`怎么样

```
;with roots (root) as (
     select distinct
        path + '\' 
     from 
        thetable
     where 
        --only include paths with 2 x \
        len(path) - 2 = len(replace(path, '\', '')) 
)
select
    roots.root,
    sum(thetable.size)
from 
    roots
inner join 
    thetable on left(thetable.path + '\', len(roots.root)) = roots.root 
group by
    roots.root 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:41:56.433

```
 select path, (select sum(Size) 
               from Paths p2 where p2.Path like p1.Path+'%') as total
 from Paths p1
 where charIndex('\',Path, len('C:\ParentFolder\')+1) = 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:41:57.290

--如果文件夹名称总是一个字符

```
select 
LEFT(folder,CHARINDEX('r\',folder)+2) as folder_group
,SUM(size) as sumsize
from #mytable
GROUP BY
LEFT(folder,CHARINDEX('r\',folder)+2) 
```

--如果文件夹名称有可变长度

```
select 
CASE WHEN CHARINDEX('\',folder,CHARINDEX('\',folder,CHARINDEX('\',folder)+1)+1) = 0 THEN folder
    ELSE LEFT(folder,CHARINDEX('\',folder,CHARINDEX('\',folder,CHARINDEX('\',folder)+1)+1) -1) END AS folder_group
,SUM(size) as sumsize
from #mytable
GROUP BY
CASE WHEN CHARINDEX('\',folder,CHARINDEX('\',folder,CHARINDEX('\',folder)+1)+1) = 0 THEN folder
    ELSE LEFT(folder,CHARINDEX('\',folder,CHARINDEX('\',folder,CHARINDEX('\',folder)+1)+1) -1) END 
```

# java - 用非常大的数字提高加法的性能

> ID：10933470
> 
> 赞同：2
> 
> 时间：2012-06-07T14:05:39.227
> 
> 标签：java, performance, biginteger

我编写了这个程序来计算非常大的数字，而不使用任何 BigInteger 方法。我完成了它，它工作正常。我使用 StringBuilder 和大量的 parseInt 调用来完成它。有没有更有效的方法来做到这一点？

*顺便说一句，这只是工作表，忽略糟糕的编程风格，完成我的工作后，我会重新组织它。*

```
private String add (String x, String y)
{
    String g = "";
    StringBuilder str = new StringBuilder();
    int sum;
    double atHand = 0;
    int dif = (int)(Math.abs(x.length()-y.length())); 

    if(x.length() >= y.length())   //adding zero for equalise number of digits.
    {
        for(int i = 0; i<dif; i++)
            g += "0";
        y = g+y;    
    }
    else 
    {
        for(int i = 0; i<dif; i++)
            g += "0";
        x = g + x;
    }

    for (int i = y.length()-1; i >=0 ; i--)
    {
        sum = Integer.parseInt(x.substring(i, i+1)) +Integer.parseInt(y.substring(i,i+1)) + (int)atHand; 

        if(sum<10) 
        {
            str.insert(0, Integer.toString(sum)); 
            atHand = 0;  
        }else
        {
            if(i==0)
                str.insert(0, Integer.toString(sum)); 
            else
            {
                atHand = sum *0.1;
                sum = sum %10;  
                str.insert(0, Integer.toString(sum));
            }
        }
    }
    return str.toString();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:27:30.127

而不是一个字符一个字符地做，你应该`k`一次取一个字符，这样它就可以适应 Java`int`或`long`. 使用一些预定的阈值，既可以容纳“块”，又可以容纳任何溢出（即这样的），具体取决于实现`(threshold * 2) < positive_type_limit`。为方便起见，请使用 10 的幂的阈值，因此您可以直接将其映射到以 10 为基数的字符串表示形式的字符（例如，如果您的溢出阈值为 100 万，那么您可以在一次） - 这还有一个额外的好处，您可以有效地将其转换回字符串。

那么你的“块”要大得多。然后，您将使用这些块和您的限制/阈值（基于您使用的整数原始类型）添加并进行溢出。所以基本上你是在一个数组上操作`ints`。

你仍然会有 的时间复杂度`O(n)`，但它会更小`n`（更具体地说，它将`O(n/k)`是`k`一个块代表的十进制数字的数量。）

我相信所有解决方案都涉及将大数字拆分为较小的块并对其进行操作。您已经这样做了，只是您当前的解决方案是`blocksize=k=1`.

为了充分利用块，您可以使用 2 的幂作为限制，例如对于 32 位无符号整数类型，您可以将阈值设置为`2^31`（或者您可以将其设置为 2^32，但这取决于位置和您如何存储溢出以传递给下一个元素）。

如果 BigInteger 使用类似的技术，我不会感到惊讶。

# android - Android 升级应用版本

> ID：10933471
> 
> 赞同：0
> 
> 时间：2012-06-07T14:05:39.087
> 
> 标签：android, sdk, version

我在 Google Play 上有一个实时应用程序，针对 SDK v1.6 开发以迎合一些 luddites ;-) 查看 Android 上的最新统计数据 (http://developer.android.com/resources/dashboard/platform-versions.html) ，v1.6 占所有潜在用户的比例不到 1%，而我的用户约占 1%。

如果在我的下一个版本中，我想利用使用 SD 卡存储应用程序的能力（SDK v2+？），如果我只是针对较新的 SDK 进行开发，这一切都会自动处理吗？或者我应该重新启动一个完全不同的应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:11:52.767

不要重新启动新应用程序！您将失去所有现有客户，我强烈建议您更新！

只需将您的 ApiLevel 设置为 2.2 并添加`android:installLocation="preferExternal"`到您的清单中！

另请参阅：http: [//developer.android.com/guide/appendix/install-location.html](http://developer.android.com/guide/appendix/install-location.html)

从 1.6 升级到 2.2 是一个不错的选择，因为 app2sd 也是大多数客户想要的一个很棒的功能！;)

希望您的应用评分以这种方式增加^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:13:19.897

使用以下

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.sample"
    android:versionCode="1"
    android:versionName="1.0" 
    android:installLocation="preferExternal"> 
```

# android - phonegap android 从远程服务器返回本机应用程序

> ID：10933472
> 
> 赞同：0
> 
> 时间：2012-06-07T14:05:42.883
> 
> 标签：android, jquery-mobile, cordova, pageload

我在 android 上有一个在远程服务器上运行的 phonegap 应用程序。在主页上，我这样做：

```
window.location.href=startUrl+"./main.html"+params; 
```

这将加载在服务器上运行的 main.html 页面。

从那里我试图返回索引页面（本机页面），但我不知道该怎么做。我正在尝试这个：

```
window.location.href= 'file:///android_asset/www/index.html'; 
```

但不起作用。

关于我该怎么做的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:36:50.517

```
navigator.app.loadUrl('file:///android_asset/www/index.html'); 
```

# ios - 如何在特定时间后取消 iOS 本地通知？

> ID：10933479
> 
> 赞同：1
> 
> 时间：2012-06-07T14:06:00.583
> 
> 标签：ios, ios5, ios4

我想在特定时间后取消 iOS 本地通知。

例如：**一周后**

```
- (void)ViewDidLoad
{
    NSDate *date = [NSdate date];
    UILocalNotification *localNotif = [[UILocalNotification alloc] init];
    //set some localNotif's properties
    localNotif.repeatInterval = NSDayCalendarUnit;
    localNotif.fireDate = date

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotif];
} 
```

我如何`localNotif`在一周（7 天）后取消，你能告诉我代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:52:29.737

你不能这样做，除非你的应用程序在通知被取消时在前台运行（在这种情况下，无论如何都不需要取消它）。

您不能这样做的原因是因为您需要一个计时器来告诉您何时取消它，并且您无法安排计时器，除非您是具有后台模式的应用程序，在这种情况下您可以安排计时器通知您 - 但即使是后台应用程序也可以暂停，但仍无法保证。

请参阅此处 [iOS 每天运行一次代码](https://stackoverflow.com/questions/10903568/ios-run-code-once-a-day/10904172#10904172)

# jquery - 检测文档准备好的自动填充值

> ID：10933480
> 
> 赞同：1
> 
> 时间：2012-06-07T14:06:03.550
> 
> 标签：jquery, google-chrome, pageload, autofill

我有一个登录页面，我试图在该页面上切换按钮的显示以允许用户修改他们的角色（从用户的可用角色列表中选择）。

我最初隐藏按钮并将其显示在`$("#txtUsername").blur()`.

我的问题：有没有办法获取 Chrome 自动填充值？

如果我尝试在文档准备好时触发它，则该值为空白，并且该按钮不显示。

```
$(function () {
    $("#btnRoles").hide();
    $("#txtUsername").blur(function () {
        if ($(this).val()) $("#btnRoles").show();
        else $("#btnRoles").hide();
    }).trigger("blur");
}); 
```

但随后通过自动填充填充文本框。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:10:00.037

这将是一个安全威胁：

> 遗憾的是，作为一项安全功能，JavaScript 无法访问自动完成输入数据，而是返回一个空字符串，除非已按下提交按钮（alert(document.loginform.user_logon.value) 将不起作用）。

[资源](http://www.idontplaydarts.com/2011/10/clickjacking-and-xss-for-reading-autocomplete-credentials/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T16:31:59.450

在页面加载后，我找不到任何可以读取这些值的内容。我最终通过使用强制将焦点放在文本框上`$("#txtUsername").trigger("focus")`，因此当用户执行任何操作时，它都会调用`.blur()`并填写角色。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T15:33:02.587

嗯...如果您只是在输入中添加了一个`autocomplete="off"`属性怎么办？`#txtUsername`

# c# - 表单保留文本框值 - 重置？

> ID：10933483
> 
> 赞同：1
> 
> 时间：2012-06-07T14:06:16.207
> 
> 标签：c#, textbox

我有一个表格检查几个文本框不为空。如果其中任何一个是，它应该显示一个消息框，重置文本框并让用户重试。我相信我在检查文本框错误。我怎样才能做到这一点？谢谢。

```
 public void ShowPaths()
    {
        if (textBox1.Text == null | textBox2.Text == null)
        {
            MessageBox.Show("Please enter a Project Name and Number");
        }
        else
        {
            sm.projNumber = textBox1.Text;
            sm.projName = textBox2.Text;

            textBox3.Text = sm.Root("s");
            textBox4.Text = sm.Root("t");
        }
        textBox1.ResetText();
        textBox2.ResetText();           
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:09:48.427

这条线是错误的，有两个原因

```
if (textBox1.Text == null | textBox2.Text == null) 
```

1.  当您阅读时， textbox.Text 永远不会为空，它是一个空字符串
2.  `|`当您应该使用逻辑运算时，您正在使用按位 OR 运算符`||`

所以正确的线是

```
if (textBox1.Text == string.Empty || textBox2.Text == string.Empty)
{
    MessageBox(......);

    // See the comment below
    textBox1.ResetText();    
    textBox2.ResetText();   
} 
```

从您的问题中不清楚您是否想在出现错误时重置文本框，或者您是否想像现在一样始终重置。如果您只想在出错的情况下重置，请在 if 块内移动两个 ResetText

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:10:01.343

TextBox 的 .Text 属性永远不会为空。您正在寻找的是一个空字符串，所以：

```
if (textBox1.Text.Equals(string.Empty) || textBox2.Text.Equals(string.Empty)) 
```

或者

```
if (textBox1.Text == "" || textBox2.Text == "") 
```

或者

```
if (String.IsNullOrEmpty(textBox1.Text) || String.IsNullOrEmpty(textBox2.Text)) 
```

运算符也`|`应该是 a 。`||`但这只是问题的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:08:09.010

WinForms Texboxes`null`在我的经验中从未显示，而是返回`String.Empty`.

您可以使用[`String.IsNullOrEmpty(textBox1.Text)`](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)来检查任何一种情况。如果您使用的是 .Net 4，您也可以使用[`String.IsNullOrWhiteSpace(textBox1.Text)`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx)which 也会为空格返回 true。

```
if (String.IsNullOrWhiteSpace(textBox1.Text) || String.IsNullOrWhiteSpace(textBox2.Text)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:08:28.617

利用

```
 if (textBox1.Text == null || textBox2.Text == null) 
```

代替

```
 if (textBox1.Text == null | textBox2.Text == null) 
```

您没有`OR (||)`正确使用运算符。

用于`String.IsNullorEmpty(string)`检查字符串变量中的 NULL 和空白值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:08:47.840

```
if ((textBox1.Text == String.Empty) || (textBox2.Text == String.Empty)) 
```

如果 Textbox1 为空或 textbox2 为空（注意 || 而不是 |） 而且 Text 属性永远不会为空。它始终是一个字符串，但它可以为空（String.Empty 或“”）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T14:12:08.087

虽然我不相信文本框可以有我使用的空值`String.IsNullOrEmpty`

```
if(String.IsNullOrEmpty(textBox1.Text) || String.IsNullOrEmpty(textBox2.Text))
{
    //...
} 
```

# java - Eclipse 无法查看类文件

> ID：10933484
> 
> 赞同：4
> 
> 时间：2012-06-07T14:06:19.253
> 
> 标签：java, javascript, eclipse, class, editor

每次我尝试打开一个类文件时，它都会给我这个错误

```
rg.eclipse.core.runtime.CoreException: The Class File Viewer cannot handle the given input ('org.eclipse.ui.ide.FileStoreEditorInput').
    at org.eclipse.jdt.internal.ui.javaeditor.ClassFileEditor.doSetInput(ClassFileEditor.java:652)
    at org.eclipse.ui.texteditor.AbstractTextEditor$19.run(AbstractTextEditor.java:3200)
    at org.eclipse.jface.operation.ModalContext.runInCurrentThread(ModalContext.java:464)
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:372)
    at org.eclipse.jface.window.ApplicationWindow$1.run(ApplicationWindow.java:759)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.jface.window.ApplicationWindow.run(ApplicationWindow.java:756)
    at org.eclipse.ui.internal.WorkbenchWindow.run(WorkbenchWindow.java:2649)
    at org.eclipse.ui.texteditor.AbstractTextEditor.internalInit(AbstractTextEditor.java:3218)
    at org.eclipse.ui.texteditor.AbstractTextEditor.init(AbstractTextEditor.java:3245)
    at org.eclipse.ui.internal.EditorManager.createSite(EditorManager.java:828)
    at org.eclipse.ui.internal.EditorReference.createPartHelper(EditorReference.java:647)
    at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465)
    at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java:595)
    at org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:313)
    at org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180)
    at org.eclipse.ui.internal.presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:270)
    at org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65)
    at org.eclipse.ui.internal.presentations.util.TabbedStackPresentation.selectPart(TabbedStackPresentation.java:473)
    at org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:1245)
    at org.eclipse.ui.internal.PartStack.setSelection(PartStack.java:1198)
    at org.eclipse.ui.internal.PartStack.showPart(PartStack.java:1597)
    at org.eclipse.ui.internal.PartStack.add(PartStack.java:493)
    at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:103)
    at org.eclipse.ui.internal.PartStack.add(PartStack.java:479)
    at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:112)
    at org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:63)
    at org.eclipse.ui.internal.EditorAreaHelper.addToLayout(EditorAreaHelper.java:225)
    at org.eclipse.ui.internal.EditorAreaHelper.addEditor(EditorAreaHelper.java:213)
    at org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:808)
    at org.eclipse.ui.internal.EditorManager.openEditorFromDescriptor(EditorManager.java:707)
    at org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:666)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2942)
    at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850)
    at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842)
    at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage.java:2793)
    at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773)
    at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2756)
    at org.eclipse.ui.ide.IDE.openEditorOnFileStore(IDE.java:1155)
    at org.eclipse.ui.internal.ide.actions.OpenLocalFileAction.run(OpenLocalFileAction.java:107)
    at org.eclipse.ui.internal.ide.actions.OpenLocalFileAction.run(OpenLocalFileAction.java:76)
    at org.eclipse.ui.internal.PluginAction.runWithEvent(PluginAction.java:251)
    at org.eclipse.ui.internal.WWinPluginAction.runWithEvent(WWinPluginAction.java:229)
    at org.eclipse.jface.action.ActionContributionItem.handleWidgetSelection(ActionContributionItem.java:584)
    at org.eclipse.jface.action.ActionContributionItem.access$2(ActionContributionItem.java:501)
    at org.eclipse.jface.action.ActionContributionItem$5.handleEvent(ActionContributionItem.java:411)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4165)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3754)
    at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701)
    at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665)
    at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2499)
    at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:123)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

虽然这可能不是正确的错误日志。我已经做了什么。

1.  从更新站点下载 JD-Eclipse
2.  将类文件编辑器设置为默认值。
3.  将类路径添加到项目中的构建路径
4.  在 stackoverflow.com 上问这个问题

我用的是windows xp。

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T14:25:37.663

Eclipse 类文件编辑器不会在工作区中打开不属于 java 项目的 .class 文件（因此您不能使用`File > Open File...`）

[您可以在https://bugs.eclipse.org/bugs/enter_bug.cgi?product=JDT&component=UI](https://bugs.eclipse.org/bugs/enter_bug.cgi?product=JDT&component=UI)打开增强请求

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-27T18:54:08.050

这都是你必须做的错误：文件==>打开文件==>然后转到您的工作区并进入文件所在的项目文件夹，但不要进入bin文件夹进入src文件夹并打开文件。最后的 java 现在你已经打开了文件。

文件 ==> 打开文件 ==> 工作区 ==> 项目文件夹 ==> src 文件夹 ==> [名称].java

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-06T06:01:25.513

编辑器->文件关联->.java 映射到 Java 编辑器（默认）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T16:07:11.737

我能够通过在项目属性 => Java 构建路径 => 库 => 添加类文件夹下添加包含类文件的文件夹作为“类文件夹”来修复它。

一旦我这样做了，我就能够正确地反编译所有源代码。就像上面提到的评论一样，它需要成为您工作区的一部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-15T07:43:52.427

右键单击文件名选择使用选项打开，然后按 java 编辑器选项。

# php - PHP Memcache 当前项目

> ID：10933485
> 
> 赞同：0
> 
> 时间：2012-06-07T14:06:21.880
> 
> 标签：php, memcached

我想知道内存缓存统计信息中的“curr_items”是否是存储键的数量？从我的测试中，curr_items 为我返回了一个比我用来通过获取所有键并计算它来计算 memcache 键数量的计数器更高的数字。

有人可以确认 curr_items 不是键的数量以及 curr_items 代表什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:15:41.170

是的，这是 memcached 的已知行为。报价：

> memcached 中的过期是惰性的。通常，只有在有人看到它之前，才能知道某个项目是否已过期。

请参阅[为什么当项目过期时 curr_items 不减少？](http://code.google.com/p/memcached/wiki/NewProgrammingFAQ#Why_Isn%27t_curr_items_Decreasing_When_Items_Expire?)

# c++ - 如何传递指针向量以便在函数中更改它们？

> ID：10933487
> 
> 赞同：1
> 
> 时间：2012-06-07T14:06:38.203
> 
> 标签：c++, pointers

我基本上是在尝试通过引用传递，以便函数对向量所做的更改在函数范围之外是永久性的。我是否正确地认为传递一个指针向量足以自行完成此任务？这在我的脑海中完全有道理，但我只是想确认我没有以某种方式在这里犯错误。

```
void updateCursors(vector<cursor*> cursors) 
```

这应该足以更改这些指针指向的对象中的数据，是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:11:20.017

您可以通过引用传递向量 -

```
vector<cursor*>& cursors 
```

但是你不应该在向量中持有指针。推荐的方法是保存可复制/可移动的对象 -

```
vector<cursor>& cursors 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:11:08.070

***“这应该足以改变这些指针所指向的对象中的数据了吧？”***
当您将向量传递给此函数时，将创建副本（因为它是按值传递），但由于它是指针向量，**是的**，因此对对象的更改将在外部可见。

但是最好通过引用传递它，这样就不会创建冗余副本：

```
void updateCursors(vector<cursor*>& cursors) 
```

另请注意，使用裸指针会带来丑陋的内存管理。如果可能的话，我建议你使用对象向量（`vector<cursor>`），或者如果你真的有充分的理由使用指针，那么我建议你使用智能指针（`shared_ptr<cursor>`而不是`cursor*`）。这个问题可以帮助你：[RAII and smart pointers in C++](https://stackoverflow.com/q/395123/1168156)

# javascript - 原型 cleanWhitespace() 不适用于插入的项目

> ID：10933493
> 
> 赞同：0
> 
> 时间：2012-06-07T14:07:00.070
> 
> 标签：javascript, prototypejs

我正在使用原型将一个新元素添加到 OL 列表中。为了使用 .firstChild 属性，我在做任何事情之前使用了 cleanWhitespace() 函数。这工作得很好，如果我在跟踪我的 OL 的 innerHTML 之后它只是一个预期的纯字符串。

然后我添加了一个新的 LI 项目，并添加了空格。添加新的 LI 后应用 cleanWhitespace() 函数没有任何效果。任何想法为什么？

这是我的代码：

```
$$('div.pagination > ol').each(function(item){
    item.cleanWhitespace(); // Working
    if(!item.firstChild.childElementCount) {
        var prevLi = document.createElement('li');
        prevLi.update('<a href="#">&laquo;</a>');
        prevLi.addClassName('disabled');
        item.insertBefore(prevLi, item.firstChild);
    }else{
        item.firstChild.children[0].update('&laquo;');
    }
    item.cleanWhitespace(); // Not working
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:55:53.090

我不太确定我理解你为什么在`cleanWhitespace`这里使用，但如果它只是用来`firstChild`不打任何文本节点，我肯定会放弃所有这些，只使用[Element#firstDescendant](http://api.prototypejs.org/dom/Element/prototype/firstDescendant/)因为它跳过文本和注释节点。Prototype 的所有 DOM 遍历方法（`descendants`,`immediateDescendants`等）都会跳过你不想要的垃圾。

# installation - 将变量传递给 installanywhere 命令行 build.exe

> ID：10933495
> 
> 赞同：3
> 
> 时间：2012-06-07T14:07:14.653
> 
> 标签：installation, installanywhere

如何将命令行参数传递给 build.exe 以指定要包含在安装程序中的源文件夹的位置？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-13T11:00:28.153

来自 IA 帮助：

> 为源路径添加一个环境变量，前面带有`IA_PATH_`标记。例如，要设置源路径`SOURCE_PATH`，设置环境变量`IA_PATH_SOURCE_PATH`。

# iphone - 如何在 UITableView 或任何其他控件中管理此类动画？

> ID：10933496
> 
> 赞同：0
> 
> 时间：2012-06-07T14:07:15.340
> 
> 标签：iphone, ios, ipad

我想用[这个视频这样的动画来实现删除行。](http://www.youtube.com/watch?v=zzohZkN9K1M)

![在此处输入图像描述](../Images/a4729125de814ad53087a46dae79e8f8.png)

现在删除行是一件容易的事，现在我对如何使用 UITable 或任何其他控件管理像上面的视频这样的动画有疑问。

我参考了一些[实例方法。](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)对于表视图。

但是在这方面，我没有得到如何管理动画，比如在 tableview 中触摸移动行。

任何建议表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:11:10.303

动画需要是自定义实现。我建议在 UITableViewCell 上有一个子视图（子视图为红色，表格视图单元格的背景为黑色），并在子视图上放置一个 UIPanGestureRecognizer。然后，您需要在用户平移时移动子视图（在触发的手势识别器方法中），并进行数学运算以了解何时应该删除该行。然后，您只需使用原生 iOS 删除行方法：

```
- (void)deleteRowsAtIndexPaths:(NSArray *)indexPaths withRowAnimation:(UITableViewRowAnimation)animation 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T06:29:16.297

我发现了基于 UITableView 的这种很酷的自定义控件，它提供了我实际需要的精确动画。

你可以在[这里找到代码。](https://github.com/mystcolor/JTGestureBasedTableViewDemo/downloads)

# .net - 仅在字母数字字符之后允许特殊字符？

> ID：10933500
> 
> 赞同：0
> 
> 时间：2012-06-07T14:07:45.233
> 
> 标签：.net, duplicate-removal

我如何允许特殊字符但仅在 VB.net 中的字母数字字符之后我使用的是 vb 2011

我希望能够插入管道（|），但只能在字母数字宪章之后，而不是前导或尾随。换句话说，我不想让管道一个接一个..

即汽车|卡车|1999|2000（正确）

诗句

|汽车||卡车|1999|||2000| （错误的）

没有前导或结束管道，也没有并排的多个管道。这很难，你能帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:12:10.250

您应该考虑在最终字符串上使用正则表达式验证，而不是忽略在某些时候无效的按键。

[这是](https://stackoverflow.com/questions/1901996/regex-to-validate-the-number-of-pipe-delimited-items)一个允许 3 个管道分隔值的正则表达式，但您可以轻松扩展它：

```
^(?:[^|]+(?:\|[^|]+){0,2})?$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:17:21.753

也可以使用正则表达式：

使用这个：`(\|)(?:\|)+`并替换为 \1

# jquery - `$(window).load(function(){})` 和 `$(function(){})` 有什么区别

> ID：10933501
> 
> 赞同：6
> 
> 时间：2012-06-07T14:07:46.947
> 
> 标签：jquery, dom, window-load

我一直在`$(window).load(function(){});`为我的项目使用，直到在某个地方我看到有人说我们可以使用`$(function(){});`它们并且它们的性能相同。
但是现在我有了更多的经验，我注意到它们并不相同。我注意到第一段代码在第二段代码之后一点点出现。
我只想知道有什么区别？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T14:33:56.220

```
$(document).ready(function(){}) 
```

将等到加载文档（加载 DOM 树）而不是加载整个窗口。例如，它不会等待图像、css 或 javascript 完全加载。一旦 DOM 加载了所有 HTML 组件和事件处理程序，文档就可以被处理，然后 $(document).ready() 将完成

`$(window).load(function(){});`

这将等待加载整个窗口。加载整个页面后，只有 $(window).load() 完成。因此，显然 $(document).ready(function(){}) 在 $(window).load() 之前完成，因为填充组件（如图像、css）需要更多时间，然后才加载 DOM 树。

所以`$(function(){});`不能用来代替`$(window).load(function(){});`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T14:14:24.607

来自[jQuery 文档](http://docs.jquery.com/How_jQuery_Works)本身。

大多数 Javascript 程序员最终做的第一件事就是在他们的程序中添加一些代码，类似于：

```
window.onload = function(){ alert("welcome"); } 
```

其中是您要在页面加载时立即运行的代码。然而，有问题的是，直到所有图像下载完成（这包括横幅广告），Javascript 代码才会运行。首先使用 window.onload 的原因是，当您第一次尝试运行代码时，HTML“文档”还没有完成加载。

为了避免这两个问题，jQuery 有一个简单的语句来检查文档并等待它准备好被操作，称为就绪事件：

```
$(document).ready(function(){
   // Your code here
 }); 
```

现在，

`$(window).load(function(){});` 等于`window.onload = function(){ alert("welcome"); }`

而且，`$(function(){});` 是一个捷径`$(document).ready(function(){ });`

我认为，这清除了一切:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:10:25.327

`$(window).load`根据我的经验，等到包括图像在内的所有内容都加载完毕后再运行 where as`$(function() {});`具有相同的行为`$(document).ready(function() {});`

如果我错了，请有人纠正我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:10:44.230

第二个是/是 的快捷方式`$(document).ready()`，它应该在`window`'s load 事件之前运行。

请注意，这`$(document).ready()`是绑定要`document`加载的内容的首选方式；还有其他几种方法可以做到这一点，就像你展示的那样，但这是首选。

# .net - PrincipalContext / UserPrincipal.FindByIdentity() 如何使用只读域控制器？

> ID：10933502
> 
> 赞同：1
> 
> 时间：2012-06-07T14:07:49.663
> 
> 标签：.net, active-directory, domaincontroller

Active Directory (AD DS) 具有“只读域控制器”(RODC) 的概念。可能为了向后兼容，默认是忽略只读域控制器：您必须明确指定您允许连接到只读域控制器。

在我们的 C# 代码中，我们在两个地方看到了这一点。一种是在创建新的[System.DirectoryServices.DirectoryEntry时：通过设置](http://msdn.microsoft.com/en-us/library/system.directoryservices.directoryentry.aspx)[System.DirectoryServices.AuthenticationTypes.ReadonlyServer](http://msdn.microsoft.com/en-us/library/system.directoryservices.authenticationtypes.aspx#enumerationSection)标志可以轻松解决问题，该标志允许使用 RODC。

**我的问题是如何使用**[System.DirectoryServices.AccountManagement](http://msdn.microsoft.com/en-us/library/system.directoryservices.accountmanagement.aspx)命名空间中的类为以下代码实现相同的功能：

```
using (PrincipalContext ctx = new PrincipalContext(ContextType.Domain))
using (UserPrincipal userPrincipal = UserPrincipal.FindByIdentity(
                                                      ctx,
                                                      IdentityType.SamAccountName,
                                                      ...))
{
    // ...
} 
```

因为我们观察到此代码忽略了任何只读域控制器。

[（请注意，上述问题与MSDN“Visual C# General”论坛](http://social.msdn.microsoft.com/Forums/br/csharpgeneral/threads)上题为[“通过 System.DirectoryServices.AccountManagement 从 C# 应用程序连接到只读域控制器 (RODC) 的问题](http://social.msdn.microsoft.com/Forums/br/csharpgeneral/thread/33c62c50-e7eb-4241-bad6-260c58f62544)”的主题中发布的问题完全相同。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:25:10.450

最有可能发生的事情是由于此功能不存在而被忽略了。如果没有仔细查看，那么它是故意的，因为 RODC 不允许您执行存在于 a 上的许多方法`UserPrincipal`（例如 ChangePassword、Delete 等）。我想，要解决这个问题，微软必须创建一个新的`ReadOnlyUserPrincipal`. 更重要的是，为什么将命名空间中的任何内容实例化为只读是有意义的，`System.DirectoryServices.AccountManagement`因为命名空间似乎不仅仅是一个只读*服务*（因为缺少更好的术语），除非不存在只读版本（是这样）。因此，使用非只读*服务*并将其指向只读源是行不通的。

# blackberry - 从黑莓中的给定网址下载pdf文件

> ID：10933505
> 
> 赞同：1
> 
> 时间：2012-06-07T14:07:54.017
> 
> 标签：blackberry, download

我正在开发一个黑莓应用程序，我需要在其中点击一个 url 创建一个连接并写入一个文件并将其保存到 SDcard。目前我正在关注这个特定的代码。但是在创建 FileOutputStream 对象时会抛出 CLassCastException。我正在为此苦苦挣扎。

```
public void run() {
            HttpConnection httpConnection = null;
            DataOutputStream httpDataOutput = null;
            InputStream httpInput = null;
            OutputStream  fos=null;
            int rc;
            try {
                httpConnection = new HttpConnectionFactory()
                .getHttpConnection("http://faultcode.techvalens.net/PDF/DrawingSample.PDF");
                rc = httpConnection.getResponseCode();
                if (rc != HttpConnection.HTTP_OK) {
                    throw new IOException("HTTP response code: " + rc);
                }
                httpInput = httpConnection.openInputStream();
                InputStream is = httpInput;

                FileConnection fconn=(FileConnection)Connector.open("file:///SDCard/Test.txt",
                        Connector.READ_WRITE);
                if(!fconn.exists())
                    fconn.create();
                System.out.println(fconn.exists());

                fos = new FileOutputStream( File.FILESYSTEM_PATRIOT, "Test.txt" );
            //  byte[] b = IOUtilities.streamToBytes(inp);

                byte[] buffer = new byte[702];
                    int len1 = 0;
                    while ((len1 = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, len1);
                    }

            } catch (Exception ex) {
                System.out.println("URL Error........" + ex.getMessage());
            } finally {
                try {
                    if (httpInput != null)
                        httpInput.close();
                    if (httpDataOutput != null)
                        httpDataOutput.close();
                    if (httpConnection != null)
                        httpConnection.close();
                } catch (Exception e) {
                    e.printStackTrace();

                }
            }
        } 
```

我正在使用的上述代码。请让我知道我的错误是什么。提前谢谢...!!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T13:18:01.183

这项任务是基本的，但为我创造了一个难忘的概念。下面是我现在使用的代码，如果我需要从 URL 下载任何类型的文件，它是最好的。

```
public void run(){
        GetURLWebService _webService = new GetURLWebService(methodName,elecID,pdfType,performedBy,notes);
        String pdfURL = _webService.getWebServiceData();
        _pdfURL = pdfURL;

        System.out.println("Download the pdf...!!!");
        try {
            int chunkIndex = 0;
            int totalSize = 0;
            /*
             * File connection
             */
            FileConnection file =(FileConnection)Connector.open(localFile);
            if (!file.exists()) {
                file.create();
            }
            file.setWritable(true);
            OutputStream out = file.openOutputStream();
            /*
             * HTTP Connections
             */
            String currentFile = _pdfURL + connectionType();
            //log("Full URL: " + currentFile);
            HttpConnection conn;
            InputStream in;
            int rangeStart = 0;
            int rangeEnd = 0;
            while (true) {
                //  log("Opening Chunk: " + chunkIndex);
                conn = (HttpConnection) Connector.open(currentFile, 
                        Connector.READ_WRITE, true);
                rangeStart = chunkIndex * chunksize;
                rangeEnd = rangeStart + chunksize - 1;
                // log("Requesting Range: " + rangeStart + 
                //      "-" + rangeEnd);
                conn.setRequestProperty("Range", "bytes=" +
                        rangeStart + "-" + rangeEnd);
                int responseCode = conn.getResponseCode();
                if (responseCode != 200 && responseCode != 206)
                {
                    // log("Response Code = " + conn.getResponseCode());
                    break;
                }
                // log("Retreived Range: " + conn.getHeaderField("Content-Range"));
                in = conn.openInputStream();
                int length = -1;
                byte[] readBlock = new byte[256];
                int fileSize = 0;
                while ((length = in.read(readBlock)) != -1) {
                    out.write(readBlock, 0, length);
                    fileSize += length;
                    Thread.yield(); // Try not to get cut off
                }
                totalSize += fileSize;
                // log("Chunk Downloaded: " + fileSize + " Bytes");
                chunkIndex++; // index (range) increase
                in.close();
                conn.close();
                in = null;
                conn = null;
                /*
                 * Pause to allow connections to close and other Threads
                 * to run.
                 */
                Thread.sleep(1000);
            }
            // log("Full file downloaded: " + totalSize + " Bytes");
            out.close();
            file.close();
            // log("Wrote file to local storage");
        } catch (Exception e) {
            System.out.println(e.toString());
        }
    }
    private String connectionType() {
        switch (conn) {
        case 1:
            return ";deviceside=false";
        case 2:
            return ";deviceside=true;interface=wifi";
        default:
            return ";deviceside=true";
        }
    } 
```

# wpf - 动画模板的宽度和高度

> ID：10933507
> 
> 赞同：1
> 
> 时间：2012-06-07T14:07:55.680
> 
> 标签：wpf, templates, size, storyboard, visualstates

如何在 XAML 中为模板的宽度和高度设置动画？例如在下面的代码中，

```
<Style x:Key="myStyle" TargetType="{x:ListItem}">
<Grid x:Name="container">
<i:Interaction.Triggers>
      <i:EventTrigger EventName="TouchEnter">
             <ei:GoToStateAction StateName="Visible"/>
      </i:EventTrigger>
</i:Interaction.Triggers>
<VisualState x:Name="Visible">
      <VisualState.Storyboard>

      <Storyboard Duration="0:0:1">
          <DoubleAnimation Storyboard.TargetProperty="Width" From="200" To="400" Storyboard.TargetName="container"/>
          <DoubleAnimation Storyboard.TargetProperty="Height" From="200" To="400" Storyboard.TargetName="container"/>

      </Storyboard>

      </VisualState.Storyboard>
</VisualState>
 <!-- Other ui elements -->
</Grid>
</Style> 
```

我可以动画整个控件的大小，而不是动画“容器”网格的大小，即应用此样式的控件吗？由于当前的方法容器的大小没有改变，这导致内容被剪裁。

提前致谢。

# c++ - 在 dll 之间使用 stl 时遇到问题

> ID：10933509
> 
> 赞同：2
> 
> 时间：2012-06-07T14:07:59.807
> 
> 标签：c++, windows, dll, stl

我在 dll 中有一个向量（或字符串），通过它的引用或指针在另一个 dll 中修改它是否安全，例如将新成员推送到向量或更改字符串的值？当我这样做时，有时会发生崩溃，我不知道为什么。

如果我只是在另一个 dll 中读取它，使用 const 指针或引用，它绝对安全吗？

使用stlport怎么样？它更安全吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:18:29.240

如果您修改 STL 容器、删除或添加新元素，通常会涉及分配/释放内存。如果碰巧您使用驻留在一个 DLL 中的分配器分配一些内存，然后在另一个 DLL 中释放内存 - 使用另一个分配器，位于另一个 DLL 中 - 那么您可能会遇到麻烦。我想这可能是你正在经历的。

一种可能的解决方案是将您的 STL 容器封装在您的类中，并通过该类的函数访问 STL 容器的函数。这个想法是，您在一个 DLL 中实现了该类，并且每当您操作该对象（以及 STL 容器）时，您只使用一个 C++ 分配器。

如果您操作`const`在另一个 DLL 中的一个 DLL 中创建的对象（如您所说：“只读”访问），那么它不涉及 C++ 分配器，因此它应该是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T06:29:57.030

从多个 DLL 访问 stl 容器是安全的（读取和写入），前提是两个 DLL 使用相同的 STL 变体。Visual Studio 提供了两个 STL 变体，一个发布变体和一个带有附加检查的调试变体（在调试模式下启用或通过定义 _SECURE_SCL 启用）。这两种变体不兼容！混合这两种模式（例如，因为一个 DLL 在调试模式下编译而另一种在发布模式下编译）可能会导致神秘的崩溃，因为两种变体之间的容器大小不同。

有关详细信息，请参阅[https://connect.microsoft.com/VisualStudio/feedback/details/524141/serious-bug-when-using-secure-scl-0-c](https://connect.microsoft.com/VisualStudio/feedback/details/524141/serious-bug-when-using-secure-scl-0-c)。

# sql-server - 如何创建 SQL 服务器以便我可以连接到服务器管理

> ID：10933515
> 
> 赞同：-5
> 
> 时间：2012-06-07T14:08:16.587
> 
> 标签：sql-server, database, ssms

标题可能有点混乱，所以我将详细解释我的问题，所以请在你们所有人快速关闭这个问题之前阅读所有这些内容作为副本。

我遇到了两个问题，一个是我不知道如何为 Microsoft SQL SMS 制作服务器。当我启动它时，我不知道在连接中输入什么内容，因为当我尝试为服务器名称做一个简单的 localhost 时，它给了我一个错误。所有在线教程的行为就像我应该已经知道该做什么，所以跳过它而不解释如何设置服务器。

现在我知道它是一个用于数据库的服务器***管理***工​​具，但我从我的主管那里收到了一个 .bak 文件，其中包含所有数据大纲和所有好东西。

所以我非常想知道如何获取这个 .bak 文件并以某种方式创建服务器或其他东西，以便我可以使用这些数据。如果不清楚，我非常愿意对此进行扩展。我意识到我的问题不是很清楚，人们很快就将其关闭，声称它与其他问题相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:55:49.207

您需要安装一个 SQL Server 实例（我不清楚您是否已经这样做了）。您可以使用免费的[SQL Server Express Edition](http://msdn.microsoft.com/en-us/evalcenter/hh230763.aspx) *，除非*：

*   数据文件消耗超过 10GB
*   数据库使用需要更高 SKU（标准/企业）的功能

我们不知道这些条件中的任何一个是否为真。如果是这样，那么您可以花[大约 50 美元购买开发者版](https://rads.stackoverflow.com/amzn/click/com/B007RFXQAM)（随意货比三家），假设您不打算在服务器上安装它并在生产中使用它。

我建议使用 SQL Server 2012 只是因为它是受支持的最新版本。您可以选择使用 SQL Server 2008 或任何其他版本，但与您获得的此备份文件兼容的最佳机会是，如果您将其还原到*更高*或等于备份它的版本.

此站点不是安装 SQL Server 实例的分步说明的地方（[您可以在其他地方找到这些](http://msdn.microsoft.com/en-us/library/ms143219.aspx)说明）。安装 SQL Server 实例后，您需要了解数据库的外观。通常，您的备份文件将在数据库本身安装在与您自己的计算机不匹配的物理文件夹中的服务器上创建。所以我建议要么通过检查这个查询的输出来找出默认路径（它告诉你`master`数据文件的位置）：

```
SELECT physical_name FROM sys.master_files
  WHERE database_id = 1 AND [file_id] = 1; 
```

或者创建一个名为 的非常简单的文件夹`c:\databases\`，赋予`Everyone`帐户修改权限。

然后运行以下命令（下面我假设备份在 c:\databases\ 中，这是您想要数据文件的位置；如果不同，请相应调整）：

```
RESTORE FILELISTONLY FROM DISK = 'c:\databases\whatever.bak'; 
```

这将返回一个结果集，如：

```
LogicalName    PhysicalName
-------------  ------------
Whatever       C:\...\whatever.mdf
Whatever_log   C:\...\whatever_log.ldf 
```

您需要`RESTORE DATABASE`根据上面的结果构建类似以下的命令：

```
RESTORE DATABASE foo FROM DISK = 'c:\databases\whatever.bak'
  WITH MOVE 'Whatever'     TO 'c:\databses\whatever.mdf',
       MOVE 'Whatever_log' TO 'c:\databases\whatever_log.ldf'; 
```

现在您可以使用 Management Studio 连接到数据库。您在连接对话框中指定的服务器名称将取决于您安装的 SQL Server 版本，以及您使用的是命名实例还是默认实例。您可以通过查看服务小程序（控制面板 > 管理工具）来判断它是否是命名实例。在那里，您应该会看到至少一个 , 的实例`SQL Server`，其后面将是`(MSSQLServer)`或`(InstanceNameYouChose)`。这里我有三个 SQL Server 命名实例（命名实例是 SQL2005、SQL2008 和 SQL2012）：

![在此处输入图像描述](../Images/a838a4252c76ad82e0cfd7f6957bfcf6.png)

如果您有一个命名实例，那么您将在 Management Studio 中使用以下命令进行连接：

```
.\InstanceNameYouChose 
```

例如，要连接到我的 SQL2008 实例，我会说：

```
.\SQL2008
or
ServerName\SQL2008
or
(local)\SQL2008
or
LOCALHOST\SQL2008
or
127.0.0.1\SQL2008
etc. etc. 
```

如果您有一个默认实例，那么您不需要斜杠和随后的名称，它只是：

```
.
or
ServerName
or
(local)
or
LOCALHOST
or
127.0.0.1
etc. etc. 
```

# c# - Linq2Sql 插入行为

> ID：10933517
> 
> 赞同：0
> 
> 时间：2012-06-07T14:08:21.687
> 
> 标签：c#, winforms, linq-to-sql

在一个应用程序中，我让用户为合同定义“模板”，然后将该合同模板应用于多个客户。合同对象具有包含项目列表的属性 LineItems。我在两者之间定义了一对多的关系。合同也有 UserID 属性，但对于模板合同，它始终为 0。然后在用户完成合同创建后，他/她点击保存，我循环选择客户并创建合同模板的新实例，将 UserID 设置为对应的值。但实际情况是，LineItems 只存储一次，用于第一个合同。我尝试将 LineItems 从模板合同复制到新列表，然后将其分配给模板的每个新实例，但没有运气。

是否有设计模式可以实现类似的功能（使用子集合克隆 LINQ to SQL 实体）？

PS 我正在使用 CodeSmith 生成的 PLINQO 到 SQL 实体，并且 Contract 对象的 LineItems 属性是 System.Data.Linq.EntitySet 类型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:39:01.393

呃，似乎 PLINQO to SQL 实体具有克隆方法，可以通过相关关联对它们进行深度克隆。

问题解决了

# c# - Teamcity 和发布到 dev/qa 和生产，数千个文件

> ID：10933522
> 
> 赞同：0
> 
> 时间：2012-06-07T14:08:33.337
> 
> 标签：c#, msbuild, continuous-integration, teamcity

我的网站有数千个文件（15-20K），其中许多是被不同人修改的内容文件。

目前我正在手动将修改后的文件上传到各种环境（DEV/QA 和生产）。

在这方面我可以使用 Teamcity 之类的工具来提供帮助吗？它可以处理那么多文件吗？

我想要一些足够聪明的东西，只能通过 FTP 将修改后的文件上传到服务器。

这是一个 .NET 应用程序，所以我也将使用 Teamcity 进行构建等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:31:25.840

TeamCity 将帮助您组织构建并为自动执行安排相同的时间。因此，这将是使用 TeamCity 使您的构建自动化的好选择。

但是，仍然要将文件复制到您的 DEV/QA 和生产环境，您可能需要编写 MSBuild 脚本左右才能将其作为构建后操作完成。

TeamCity 让您更轻松地管理构建大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T18:34:03.317

如果 HTTP(S) 是一个选项，我将使用 MSDeploy 作为 IIS 包/发布或只是哑文件夹同步和上传更改的文件，否则您可以使用任何 FTP 同步实用程序并直接从 TeamCity 调用它，或者简单地包装它如果需要一些文件预打包，则为 MSBuild 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T10:55:03.683

我会使用 TeamCity 进行构建和打包，使用 GoodSync（或同等同步工具）进行发布。我会避免使用 WebDeploy (MSDeploy) 进行发布，因为它的同步引擎根本不适用于大型网站。反过来，GoodSync 允许指定详细的同步规则并使发布更加高效。

# c# - 使用日历选择器后按钮控制不参与

> ID：10933524
> 
> 赞同：2
> 
> 时间：2012-06-07T14:08:37.467
> 
> 标签：c#, asp.net, ajax

我有一个看起来像的日历选择器

```
<asp:ImageButton ID="calStartImage" runat="server" ImageUrl="../images/SmallCalendar.gif"
                        AlternateText="Please select start date"  />
                    <ajaxToolkit:CalendarExtender ID="calStartDate" runat="server" TargetControlID="txtStartDate"
                        Format="MM/dd/yyyy" PopupButtonID="calStartImage" /> 
```

还有一个看起来像这样的搜索按钮

```
 <asp:Button ID="btnSearch" runat="server" Text="Search" OnClick="btnSearch_Click"
                            CausesValidation="false" /> 
```

当我从日历中选择一个日期并按搜索时..第一次 btnSearch_Click 不会触发..如果我再次单击搜索它工作正常。因此，在单击事件起作用之前，我必须单击搜索按钮两次。仅当我从日历控件中选择日期时才会发生这种情况。

这是完整的控制：

```
 <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </ajaxToolkit:ToolkitScriptManager>
    <table>
        <tr>
            <td class="SearchBox">
                <table>
                    <tr>
                        <td colspan="2">
                            <b>Enter name to filter results</b>&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:TextBox ID="txtProjectName" runat="server"></asp:TextBox><br />
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td valign="middle">
                            <b>From:</b>
                            <asp:TextBox ID="txtStartDate" runat="server"></asp:TextBox>
                            <asp:ImageButton ID="calStartImage" runat="server" ImageUrl="../images/SmallCalendar.gif"
                                AlternateText="Please select start date" />
                            <ajaxToolkit:CalendarExtender ID="calStartDate" runat="server" TargetControlID="txtStartDate"
                                Format="MM/dd/yyyy" PopupButtonID="calStartImage" />
                            &nbsp;&nbsp;&nbsp;&nbsp; <b>Thru:</b>
                            <asp:TextBox ID="txtEndDate" runat="server"></asp:TextBox>
                            <asp:ImageButton runat="server" ID="calEndImage" ImageUrl="../images/SmallCalendar.gif"
                                AlternateText="Please select end date" />
                            <ajaxToolkit:CalendarExtender ID="calEndDate" runat="server" TargetControlID="txtEndDate"
                                Format="MM/dd/yyyy" PopupButtonID="calEndImage" />
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ErrorMessage="From Date is Required"
                                ControlToValidate="txtStartDate" Display="Dynamic"></asp:RequiredFieldValidator>&nbsp;&nbsp;
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" ErrorMessage="Thru Date is Required"
                                ControlToValidate="txtEndDate" Display="Dynamic"></asp:RequiredFieldValidator>&nbsp;&nbsp;
                            <asp:RangeValidator ID="RangeValidator1" runat="server" ErrorMessage="Invalid From Date"
                                ControlToValidate="txtStartDate" Display="Dynamic" MaximumValue="1/1/2099" MinimumValue="1/1/2006"
                                SetFocusOnError="True" Type="Date"></asp:RangeValidator>&nbsp;&nbsp;
                            <asp:RangeValidator ID="RangeValidator2" runat="server" ControlToValidate="txtEndDate"
                                ErrorMessage="Invalid Thru Date" SetFocusOnError="True" Type="Date" Display="Dynamic"
                                MaximumValue="1/1/2999" MinimumValue="1/1/2006"></asp:RangeValidator>&nbsp;&nbsp;&nbsp;
                            <br />
                        </td>
                    </tr>
                    <tr>
                        <td align="left">
                            <asp:Button ID="btnSearch" runat="server" Text="Search" OnClick="btnSearch_Click"
                                CausesValidation="false" />
                        </td>
                    </tr>
                </table>
            </td>
            <td align="right" style="width:560px">
                <a href="../Contents/docs/Guide.pdf" target="_blank">Guide</a> &nbsp;&nbsp;
            </td>
        </tr>
    </table> 
```

这里有更多来自页面......

```
 <ajaxToolkit:ModalPopupExtender ID="mdlPopupExtender" runat="server" TargetControlID="btnShowPopup"
        PopupControlID="pnlProject" BackgroundCssClass="modalBackground" Drag="true"
        DropShadow="true" CancelControlID="btnClose" PopupDragHandleControlID="TitleBar">
    </ajaxToolkit:ModalPopupExtender>
    <asp:Button ID="btnShowPopup" runat="server" Style="display: none" />
    <asp:Panel ID="pnlProject" runat="server" BackColor="WhiteSmoke">
        <asp:Panel ID="TitleBar" runat="server" CssClass="modalPopupTitleBar">
            Add/Edit Project
        </asp:Panel>
        <asp:UpdatePanel ID="upPopList" runat="server" UpdateMode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnAddNew" EventName="Click" />
            </Triggers>
            <ContentTemplate>
                <table cellspacing="10">
                    <tr>
                        <td colspan="2">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Project Name:</b>
                        </td>
                        <td>
                            <asp:TextBox ID="txtProject" runat="server" Width="200px"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="reqProject" runat="server" ErrorMessage="Required!"
                                Display="Dynamic" ControlToValidate="txtProject"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Field Office:</b>
                        </td>
                        <td>
                            <asp:TextBox ID="txtFieldOffice" runat="server" Width="200px"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="reqFieldOffice" runat="server" ErrorMessage="Required!"
                                Display="Dynamic" ControlToValidate="txtFieldOffice"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Created By:</b>
                        </td>
                        <td>
                            <asp:Label ID="lblCreatedBy" runat="server"></asp:Label>
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </asp:UpdatePanel>
        <table>
            <tr>
                <td>
                    <br />
                    &nbsp;&nbsp;<asp:Button ID="btnSubmit" runat="server" Text="Save" OnClick="btnSubmit_Click" />&nbsp;&nbsp;&nbsp;
                    <asp:Button ID="btnClose" runat="server" Text="Close" CausesValidation="false" />
                    <br />
                </td>
            </tr>
        </table>
    </asp:Panel> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:00:18.020

您需要将 ValidationGroup 添加到您的验证控件，以便每个验证组可以独立于特定页面上的其他验证组执行验证。更多你可以在这里阅读[指定验证组](http://msdn.microsoft.com/en-us/library/ms227424.aspx)

这是您的带有组验证的代码。您可以将其更改为您的环境。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>
    <table>
        <tr>
            <td>
                <table>
                    <tr>
                        <td colspan="2">
                            <b>Enter name to filter results</b>&nbsp;&nbsp;&nbsp;&nbsp;
                            <asp:TextBox ID="txtProjectName" runat="server"></asp:TextBox>
                        </td>
                    </tr>
                    <tr>
                        <td valign="middle">
                            <b>From:</b>
                            <asp:TextBox ID="txtStartDate" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="formDateRequiredValidator" ValidationGroup="Date"
                                runat="server" ErrorMessage="Enter From Date." ControlToValidate="txtStartDate"></asp:RequiredFieldValidator>
                            <asp:RangeValidator ID="RangeValidator1" runat="server" ValidationGroup="Date" ErrorMessage="Invalid From Date"
                                ControlToValidate="txtStartDate" Display="Dynamic" MaximumValue="1/1/2099" MinimumValue="1/1/2006"
                                SetFocusOnError="True" Type="Date"></asp:RangeValidator>&nbsp;&nbsp;
                            <asp:ImageButton ID="calStartImage" runat="server" AlternateText="Please select start date" />
                            <asp:CalendarExtender ID="calStartDate" runat="server" TargetControlID="txtStartDate"
                                Format="MM/dd/yyyy" PopupButtonID="calStartImage" />
                            &nbsp;&nbsp;&nbsp;&nbsp; <b>Thru:</b>
                            <asp:TextBox ID="txtEndDate" runat="server"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="endDateRequiredValidator" ValidationGroup="Date"
                                runat="server" ErrorMessage="Enter Thru Date." ControlToValidate="txtEndDate"></asp:RequiredFieldValidator>
                            <asp:RangeValidator ID="RangeValidator2" ValidationGroup="Date" runat="server" ErrorMessage="Invalid From Date"
                                ControlToValidate="txtStartDate" Display="Dynamic" MaximumValue="1/1/2099" MinimumValue="1/1/2006"
                                SetFocusOnError="True" Type="Date"></asp:RangeValidator>&nbsp
                            <asp:ImageButton runat="server" ID="calEndImage" ImageUrl="../images/SmallCalendar.gif"
                                AlternateText="Please select end date" />
                            <asp:CalendarExtender ID="calEndDate" runat="server" TargetControlID="txtEndDate"
                                Format="MM/dd/yyyy" PopupButtonID="calEndImage" />
                        </td>
                    </tr>
                    <tr>
                        <td align="left">
                            <asp:Button ID="btnSearch" runat="server" Text="Search" ValidationGroup="Date" CausesValidation="false" />
                        </td>
                    </tr>
                </table>
            </td>
            <td align="right">
                <a href="../Contents/docs/Guide.pdf" target="_blank">Guide</a> &nbsp;&nbsp;
            </td>
        </tr>
    </table>
    <asp:ModalPopupExtender ID="mdlPopupExtender" runat="server" TargetControlID="btnShowPopup"
        PopupControlID="pnlProject" BackgroundCssClass="modalBackground" Drag="true"
        DropShadow="true" CancelControlID="btnClose" PopupDragHandleControlID="TitleBar">
    </asp:ModalPopupExtender>
    <asp:Button ID="btnShowPopup" runat="server" Style="display: none" />
    <asp:Panel ID="pnlProject" runat="server" BackColor="WhiteSmoke">
        <asp:Panel ID="TitleBar" runat="server">
            Add/Edit Project
        <%-- I have added this Button you can replace with yours becaus specified in Triggers to run the code i need to add this(btnAddNew) Button--%>
            <asp:Button ID="btnAddNew" runat="server" Text="AddNew" />
        </asp:Panel>
        <asp:UpdatePanel ID="upPopList" runat="server" UpdateMode="Conditional">
            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="btnAddNew" />
            </Triggers>
            <ContentTemplate>
                <table>
                    <tr>
                        <td colspan="2">
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Project Name:</b>
                        </td>
                        <td>
                            <asp:TextBox ID="txtProject" runat="server" Width="200px"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="reqProject" ValidationGroup="ProjectInfo" runat="server"
                                ErrorMessage="Required!" Display="Dynamic" ControlToValidate="txtProject"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b>Field Office:</b>
                        </td>
                        <td>
                            <asp:TextBox ID="txtFieldOffice" runat="server" Width="200px"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="reqFieldOffice" ValidationGroup="ProjectInfo" runat="server"
                                ErrorMessage="Required!" Display="Dynamic" ControlToValidate="txtFieldOffice"></asp:RequiredFieldValidator>
                        </td>
                    </tr>
                    </td> </tr>
                    <tr>
                        <td>
                            <b>Created By:</b>
                        </td>
                        <td>
                            <asp:Label ID="lblCreatedBy" runat="server"></asp:Label>
                        </td>
                    </tr>
                </table>
            </ContentTemplate>
        </asp:UpdatePanel>
        <table>
            <tr>
                <td>
                    <br />
                    &nbsp;&nbsp;<asp:Button ID="btnSubmit" runat="server" Text="Save" OnClick="btnSubmit_Click" />&nbsp;&nbsp;&nbsp;
                    <asp:Button ID="btnClose" runat="server" Text="Close" CausesValidation="false" ValidationGroup="ProjectInfo"
                        OnClick="btnClose_Click" />
                    <br />
                </td>
            </tr>
        </table>
    </asp:Panel> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T15:32:40.393

我不知道为什么，但是您的问题可以通过将`CausesValidation`属性设置为`btnSearch`来解决`true`

```
<asp:Button ID="btnSearch" runat="server" Text="Search" OnClick="btnSearch_Click"
     CausesValidation="true" /> 
```

# php - Wordpress 站点网络，如何为所有站点使用一个文件夹？

> ID：10933527
> 
> 赞同：0
> 
> 时间：2012-06-07T14:08:54.667
> 
> 标签：php, wordpress

我有一个多站点网络 wordpress 博客。有以下网站

domain.com
domain.com/blog2
domain.com/blog3

当我为 domain.com 上传文件时，它们将位于 domain.com/media 中。这就是我想要的。但是当我为 blog2（或 blog3）上传文件时，它们将位于 domain.com/blog2/files/（或 domain.com/blog3/files/）中。我可以在站点设置（管理员 - 设置 - 杂项）中更改每个站点的文件夹。我还可以设置不使用上传日期和所有内容，但无论我做什么，文件都将位于 /blog2/files 中（我输入了另一个文件夹：/media）。

如何归档所有文件将存储在 domain.com/media 中并且所有站点都可以从那里选择文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:22:25.177

只需告诉 Wordpress 将媒体文件存储在**绝对文件夹**中。

转到`Settings`> `Medias`>`Uploading Files`并粘贴与 domain.com/media 对应 **的完整绝对路径**`"Default is wp-content/uploads"`（其中显示）

它可以是类似的东西，`/var/www/domain.com/media`例如，它真的取决于您的托管。显然它也应该是可读/可写的。

希望这可以帮助 ！

# java - 在 DB4O 中 SODA 查询 JODA DateTime

> ID：10933528
> 
> 赞同：0
> 
> 时间：2012-06-07T14:08:59.837
> 
> 标签：java, jodatime, db4o

我正在使用 db4o 和 JODA，但在存储/接收 DateTime 对象时遇到了问题。至少我认为这是问题所在。

我的数据模型看起来很像这样：

```
DataFile.class
    enum FileType {...}
    further attributes... (primitve data types)

Product.class extends DataFile.class
    enum ProductType {...}
    further attributes... (primitve data types)

KindOfProduct.class extends Product.class
    DateTime time
    further attributes... (primitve data types) 
```

我正在创建 KindOfProduct 对象并将它们存储在 EmbeddedDatabase 中。为了查询这些对象，我使用 SODA 并获得了实现评估的 DateTimeComparison.class。查询 DateTime 以外的字段可以正常工作，但 DateTime 查询失败。奇怪的是，评估方法只被调用一次，而不管我的数据库中存储了多少对象。[候选人](http://community.versant.com/documentation/reference/db4o-8.0/java/api/com/db4o/query/Candidate.html)的 include 方法被调用为 true，但候选人不包含在 ObjectSet 中。因此，似乎某处发生了错误，db4o 退出而没有抛出异常（从外观上看，这是评估 SODA 查询的一个已知问题）。使用 Eclipse 的 Object Manager Enterprise 插件查询失败。我收到“无法显示结果”错误消息。

我很确定，我已经正确地实现了[评估](http://community.versant.com/documentation/reference/db4o-8.0/java/api/com/db4o/query/Evaluation.html)接口（我对与 DateTime 不同的数据类型做了类似的事情，它工作正常）。我不认为我需要实现一个 TypeHandler 来存储 DateTime 对象，因为在我的另一个项目中不需要这样做（在那种情况下我使用的是本机查询，但我认为这不是重点）。

那么，关于如何寻找的任何想法？任何已知的陷阱？

编辑：我的评估类的代码

```
import org.joda.time.DateTime;

import com.db4o.query.Candidate;
import com.db4o.query.Evaluation;

public class DateTimeComparison implements Evaluation {

protected enum Operator {

    GREATER, SMALLER, EQUAL

}

private Operator operator = null;
private DateTime value = null;

public DateTimeComparison(String operator, DateTime value) {

    if (operator.equals(">")) {
        this.operator = Operator.GREATER;
    } else {
        if (operator.equals("<")) {
            this.operator = Operator.SMALLER;
        } else {
            this.operator = Operator.EQUAL;
        }
    }
    this.value = value;

}

public void evaluate(Candidate candidate) {

    DateTime dateTime = (DateTime) candidate.getObject();

    boolean match = false;
    switch (operator) {
    case GREATER:
        match = dateTime.compareTo(value) > 0;
        break;
    case SMALLER:
        match = dateTime.compareTo(value) < 0;
        break;
    case EQUAL:
        match = dateTime.compareTo(value) == 0;
        break;
    }
    candidate.include(match);
    System.out.println(match);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:55:30.660

在尝试构建测试用例时，我发现了我的错误。问题不在于评估，而在于我为查询构建约束的方式。我正在研究一种动态构建这些约束的方法，方法是从 txt 文件中读取它们。我没有考虑到我需要注意约束的链接顺序。例如：（A 和 B）或 C 不等于 A 和（B 或 C）。所以我最终得到了一个不代表我想要构建的查询的约束。

我现在正在定义我的约束，然后声明它们应该如何链接，使用反向波兰表示法，所以我不需要关心括号。这似乎工作得很好......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:39:35.317

你能展示你的评估代码/课程吗？

否则：

请注意，评估将是“缓慢的”，因为不能使用索引。在大型数据集上，这成为一个问题。

避免问题的最可靠但最丑陋的方法是将常规 Java Date 存储在存储对象中。并将日期字段转换为 getter/setter 中的 JodaTime DateTime。并用于查询。

对类型处理程序：理论上你可以让它工作。一个只存储 DateTime 的简单类型处理程序可能并不难。但是对于高级功能，例如索引类型处理程序是一场噩梦（没有文档，需要将内容转换为内部数据结构等）。

# php - 数字文本框：显示空间

> ID：10933530
> 
> 赞同：1
> 
> 时间：2012-06-07T14:09:07.117
> 
> 标签：php, javascript, html, textbox

我在 html/php/js 中有数字文本框，用户将在其中输入 4 到 7 位数字。但是我希望用户看到每三个数字之间的空格。

例如，

```
 User inputs: 8000

        User sees: 8 000

        User inputs 9100045

        User sees: 9 100 045 
```

我该如何实现这一点，以使输入保持为 int 并且不会转换为带有空格的字符串？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:10:48.430

使用标准文本框，这是不可能的。

使用 javascript，您可以在每次按键后重新格式化内容，并在必要时添加空格。然而，正如[@Jukka K. Korpela](https://stackoverflow.com/questions/10933530/numeric-textbox-display-spaces/10933559#comment14264343_10933559)所指出的，这可能会让用户感到非常困惑。另一种方法是进行此更改`onchange`，以便仅在文本框失去焦点时发生格式设置。

然后在服务器端，删除所有空格以返回一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:11:57.647

在 PHP 中执行此操作。例如，如果用户在此处输入输入：

```
<input type="text" name="number" /> 
```

在 PHP 中，将其获取为：

```
$number = intval(trim($_POST["number"])); // Get it as number
$number = number_format($number, 2, ' ', ' ');
// The value will be 5 00 000 for $number = 500000
$number = number_format($number);
// The value will be 6 000 000 for $number = 6000000 
```

有关详细信息，请参阅[数字格式](http://in3.php.net/manual/en/function.number-format.php)。希望这可以帮助！:)

# dtd - DTD - 定义或描述？

> ID：10933539
> 
> 赞同：1
> 
> 时间：2012-06-07T14:09:52.700
> 
> 标签：dtd, xml

对于DTD的含义，我遇到过“文档类型定义”和“文档类型描述”，例如DocBook DTD。它们是可互换的还是不正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:56:08.993

这种情况下的描述和定义是这样关联的：

```
Definition > Description 
```

换句话说，通过定义它，您就是在描述它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T21:40:47.703

[XML 规范](http://www.w3.org/TR/xml/#sec-prolog-dtd)和 ISO 8879（它定义了 XML 所基于的 SGML）都将“DTD”作为“文档类型定义”的首字母缩写词。两个规范还使用术语“文档类型声明”来表示文档指向其文档类型定义的语法结构。（因此，对于 DTD 是否可能意味着“文档类型声明”，通常存在一些不确定性。）

如果您的来源试图反映 SGML 和 XML 规范的使用，您现在知道它们中的哪一个是正确的。当然，他们可能不会尝试做任何这样的事情。

# jquery - 用 Javascript 打印

> ID：10933540
> 
> 赞同：0
> 
> 时间：2012-06-07T14:09:57.090
> 
> 标签：jquery, asp.net, jquery-plugins, javascript

我`windows.print()`在我的项目中使用打印页面。我使用 Css 来设置此页面的样式以删除正文边距和填充。但是像 IE 这样的浏览器在打印设置中有默认边距。如何删除所有这些边距？我想用整页打印

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:12:44.837

我认为如果没有某种 ActiveX 交易，您将无法做到。不久前我尝试过同样的事情，但这是不可能的，因为这些设置只能从用户的计算机更改，而网页脚本无法访问。我能想到的唯一选择是使用 TCPDF 或其他东西生成 PDF；这样你就可以让它完全按照你的意愿打印。

# backbone.js - 如何嵌套使用“Require.js”和“backbone.js”？

> ID：10933541
> 
> 赞同：1
> 
> 时间：2012-06-07T14:09:59.850
> 
> 标签：backbone.js, require

我在做应用，使用backbone.js和require.js，我想通过“backbone.router”功能实现动态配置模块导航，请问这里是我的问题？

这是我定义的baserouter，我想根据“viewPath”参数实现动态加载“backbone.view”。我该怎么做？

```
define(['require', 'underscore', 'backbone'], function(require, _, Backbone) {
  var BaseRouter = Backbone.Router.extend({
    container: "#page",
    loadView: function(viewPath) {

      **//Here require lazy loading "base/people/view.js", **
      **//I do not know how to achieve it?**
      var view = require(viewPath);//viewPath = "base/people/view";

      this._currentView = new view();
      this._currentView.render();
      $(this.container).html(this._currentView.el);
    }
  });

  return BaseRouter;
}); 
```

这是路由器的定义，它与“baserouter”一起动态设置导航菜单。

```
define(['baserouter'], function(baserouter) {
  //The JSON data should come from the database,
  //These data define the navigation information for all modules.
  var navs = JSON.parse('[{"name": "people","title": "peoplemanage","view": "base/people/view"},{"name": "test","title": "testmanage","view": "pub/test/view"}]');
  var AppRouter = baserouter.extend();

  for (var i = 0, l = navs.length; i < l; i++) {
    var nav = navs[i];
    AppRouter.prototype["loadView_" + nav.name] = function() {
      var path = nav.view;
      return function() {
        AppRouter.prototype.loadView(path);
      }
    }();
  }

  var initialize = function() {
      var routes = {}
      for (var i = 0, l = navs.length; i < l; i++) {
        var nav = navs[i];
        routes[nav.name] = "loadView_" + nav.name;
      }

      var app_router = new AppRouter({
        "routes": routes
      });

      Backbone.history.start();
    };
  return {
    initialize: initialize
  };
}); 
```

这是导航菜单的html代码：

```
<ul class="dropdown-menu">
    <li><a href="#people">people</a></li>
    <li><a href="#test">test</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:39:14.507

这种方法可以实现。但我不确定这是最佳实践，谁有更好的方法？

```
loadView: function(viewPath) {
var _this = this;
if (this._currentView) {
    this._currentView.dispose();
}

//var view = require(viewPath);
//**This method can achieve.But I'm not sure this is the best practice, and who has a better way?**
//setTimeout(function() {
    require([viewPath], function(view) {
        _this._currentView = new view();
        _this._currentView.render();
        $("#page").html(_this._currentView.el);
    });
//}, 100); 
```

# ssrs-2008 - 在 Parent 的右侧创建组

> ID：10933547
> 
> 赞同：0
> 
> 时间：2012-06-07T14:10:10.367
> 
> 标签：ssrs-2008, reporting-services

我一生无法弄清楚如何将子组添加到父组，而是让该子组位于父组行下方。现在，如果我右键单击父组并添加一个子组..它会添加一个子组，但会添加到报告中第一个父组单元格的右侧。

任何人？？您如何让子组坐在父排下方？

例如，我的报告将有一个父组，其中包含一个 CarType 对于每个 Car Type 组，它有几个相关的汽车名称

```
------------------------------------------------
Honda
Field1   3   4   54  534
Field2   5   3   44  455
------------------------------------------------
Accord
Field1   53  3   43  222
Field2   5  22   24  423

Pilot
Field1   4  3    5   221
Field2   5  27   24  423

..... rest of the car types for honda

------------------------------------------------
Toyota
Field1   3   4   54  534
Field2   5   3   44  455
------------------------------------------------
Camry
Field1   53  3   43  222
Field2   5  22   24  423

xxxx
Field1   4  3    5   221
Field2   5  27   24  423

..... rest of the car types for camry 
```

等等。所以我们不希望孩子们被缩进（我不确定这是否现在不会被踩或什么......这就是我遇到的麻烦，因为网上的每个例子都向你展示了如何做一个阶梯报告，但显示子组缩进了一点，这是我们出于 x 业务原因不想要的。

我无法让这组父/子行在报告中看起来像这样。我想要嵌套（父/子），但子级应该开始向左对齐，而不是在查看数据时相对于父级缩进。

这是另一个报告中的示例，您可以看到堆叠的组：

![在此处输入图像描述](../Images/5c0a7f1c7bae6d03c69d5475d16fe4ac.png)

另一个报告中的另一个例子

![在此处输入图像描述](../Images/ee47e5c1e3a38e71bcd038682947c823.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:28:13.217

可能有不止一种方法可以做到这一点，但我将解释这种方式以使其易于理解。

1.  从表格开始，将您的子组添加到详细信息行的第一列。
2.  用您的子组右键单击该单元格，指向添加组，然后单击行组部分中的父组。
3.  在 Group By 下拉列表中，选择父组并选中 Add group header 复选框，然后单击 OK。另一列添加到您的详细信息组的左侧，“行组”窗格现在显示父组和子组。在表头和子行（详细信息行）之间出现一个新行
4.  删除新列。
5.  将父字段添加到详细信息行上方的行中的第一列。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-07T23:18:41.573

创建 tablix 后添加新父组的快速修复，虽然不直观：

1.  在组部分添加组。

2.  左侧会出现一个新列，可能会弄乱您美丽的布局。暂时不要离开那个新部分。

3.  右键单击并插入一个新行。

4.  通过在上面写一些东西来标记新行（即“这是父 01”）

5.  右键单击新的（和不需要的）“左分组列”。删除它并小心只删除列，而不是关联的组级别。

6.  瞧！现在你有一个新的父组和一个可以放东西的地方，比如一个新的组标题、聚合或任何你喜欢的东西。

希望能帮助到你！如果，不掉线。

# javascript - 单击页面时隐藏 div，除非单击特定 div

> ID：10933548
> 
> 赞同：-6
> 
> 时间：2012-06-07T14:10:23.533
> 
> 标签：javascript, jquery, html, onblur

当用户单击`topic_tag_sug`或其任何子元素时，该 div 不应隐藏。但是当用户点击任何其他元素时，`topic_tag_sug`应该隐藏。

### HTML

```
<input id='topic_tag' onblur="$('#topic_tag_sug').hide();"/>
<div id='topic_tag_sug' style='border:1px solid #000'>here is tag suggestion zone, i want to click here to select tag suggestion, and it will not be hide</div>​ 
```

### JavaScript

```
$('#topic_tag').focus(); 
```

[http://jsfiddle.net/Q7hFw/2/](http://jsfiddle.net/Q7hFw/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:54:10.967

我很有趣，您想在其他事件中隐藏建议框。让我们在盒子内部添加一个关闭按钮，

```
<input id='topic_tag' />
<div id='topic_tag_sug' style='border:1px solid #000;display:none;'>
    here is tag suggestion zone, i want to click here to select tag suggestion, and it will not be hide
    <br>
    <a id="close" href="#">X: Close</a>
</div> 
```

现在使用 jQuery 添加一些 javaScript 代码

```
$(document).ready(function() {
    $('#topic_tag').bind('click', function() {
        $('#topic_tag_sug').show();  
    });    
    $('#close').bind('click', function() {
        $('#topic_tag_sug').hide();
    });        
}); 
```

[请在此处](http://jsfiddle.net/Q7hFw/3/)找到工作示例

# iphone - UINavigationController 中的 viewController 是否可以有不同的方向？

> ID：10933554
> 
> 赞同：3
> 
> 时间：2012-06-07T14:10:35.993
> 
> 标签：iphone, objective-c, ios, screen-orientation, uiinterfaceorientation

我希望所有视图控制器只支持纵向模式，除了一个视图控制器让我们称之为“LandscapeSupportViewController”，它也应该支持横向模式。

问题是当我在横向模式下的 LandscapeSupportViewController 然后推送一个只支持纵向模式的新视图控制器时，推送的视图控制器也将处于横向模式！我怎么能强迫它成为肖像？

我看到很少有应用程序可以做到这一点，例如 Skype iPhone 应用程序，“消息”选项卡仅是纵向的 -> 然后如果您按下输入消息本身，您将获得一个支持横向的视图控制器，**因为启用横向模式是有意义的用户正在聊天**-> 然后如果您按下查看人员资料，则会推送一个新的视图控制器，但是是纵向的！如果你回去也会发生同样的情况，即使你来自风景，你也将被迫返回肖像......

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:15:41.877

我让学生尝试完成您想要完成的事情，经过大量研究，普遍的共识是：这是一个坏主意，需要大量（App Store 合法）黑客才能完成，但仍然没有结果太漂亮了（例如，状态栏搞砸了）。你会在 Skype 应用程序中注意到，当你进入 IM 部分，旋转到横向，然后回击时，UI “snap”，或者会立即重新加载。

这不是一个好的用户体验，我建议重新考虑你的设计，使其更符合 Apple 的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:19:00.267

如果我正确理解了您，您想在某些情况下更改设备方向。

```
[[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO]; 
```

使用上面的行设置您自己的方向，只需将此行放在 if 条件中。条件取决于你。

谢谢！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:40:03.003

在推送仅支持纵向的 viewController 之前编写此行 From LandscapeViewController

```
[appdel.navigationController.view removeFromSuperview];// This navcontroller used with rootviewcontroller
[[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
[ [UIApplication sharedApplication].self.delegate.window addSubview:appdel.navigationController.view];
self.navigationController.navigationBar.hidden=NO; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-21T09:16:15.157

这是一个解决方案。您可以为管理视图控制器方向的 UINavigationController 添加一个类别。请参见下面的代码：

```
@interface UINavigationController (MyViewOrientations)
@end

@implemetation UINavigationController (MyViewOrientations)

- (BOOL)supportLandscapeModeForViewController:(UIViewController *)controller {
    return [controller isKindOfClass:[LandscapeSupportViewController class]]
}

- (NSUInteger)supportedInterfaceOrientation {
    UIViewController *controller = [self visibleViewController];
    NSUInteger orientationMasks = UIInterfaceOrientationMaskPortrait
    if([self supportLandscapeModeForViewController:controller]) {
        orientationMasks |= UIInterfaceOrientationMaskLandscapeLeft;
        orientationMasks |= UIInterfaceOrientationMaskLandscapeRight;
    }
    return orientationMasks;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation {
    UIViewController *controller = [self visibleViewController];
    if([self supportLandscapeModeForViewController:controller]) {
        return UIInterfaceOrientationLandscapeLeft; // Your call
    }
    else {
        return UIInterfaceOrientationPortrait;
    }
}

- (BOOL)shouldAutorotate {
    UIViewController *controller = [self visibleViewController];
    return [self supportLandscapeModeForViewController:controller];
}
@end 
```

如果情况更复杂，不同的观点支持不同的方向。您可以在视图控制器中覆盖“supportedInterfaceOrientation”、“preferredInterfaceOrientationForPresentation”、“shouldAutorotate”，并使用“visibleViewController”委托来自 UINavigationController 类别代码的调用。

# haskell - 解决 Cabal 与 Yesod、EclipseFP 和 Haskell Platform 2012.2 的冲突

> ID：10933557
> 
> 赞同：1
> 
> 时间：2012-06-07T14:10:44.867
> 
> 标签：haskell, cabal, yesod, eclipse-fp

我尝试在两台 Ubuntu 机器上安装 Yesod / EclipseFP / Haskell Platform 2012.02。

这可能吗？

（我是 Yesod/Haskell 的新手，无法解释错误，除了它们看起来像两件事需要其他东西的不兼容版本。）

哪个项目是问题的原因？（即我可以向谁寻求修复。）

```
cabal install yesod-platform
Resolving dependencies...
In order, the following would be installed:
cereal-0.3.5.1 (new version)
crypto-api-0.10.2 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
crypto-conduit-0.3.2 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
crypto-pubkey-types-0.1.1 (reinstall)
cryptocipher-0.3.4 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
cprng-aes-0.2.3 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
cryptohash-0.7.5 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
hamlet-1.0.1.3 (reinstall) changes: blaze-html-0.4.3.4 -> 0.5.0.0,
blaze-markup-0.5.1.0 added
hxt-charproperties-9.1.1 (new package)
hxt-regex-xmlschema-9.0.4 (new package)
hxt-unicode-9.0.2 (new package)
hxt-9.2.2 (new package)
pem-0.1.1 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
certificate-1.2.3 (reinstall)
persistent-0.9.0.4 (reinstall) changes: blaze-html-0.4.3.4 -> 0.5.0.0,
blaze-markup-0.5.1.0 added
persistent-template-0.9.0.2 (reinstall)
pureMD5-2.1.0.3 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
pwstore-fast-2.2 (reinstall)
silently-1.1.5 (new package)
hspec-1.1.1 (new package)
skein-0.1.0.7 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
clientsession-0.7.5 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
socks-0.4.1 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
system-fileio-0.3.7 (new package)
filesystem-conduit-0.4.0 (new package)
tagstream-conduit-0.3.2 (new package)
html-conduit-0.0.1 (new package)
tls-0.9.5 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
tls-extra-0.4.6 (reinstall)
http-conduit-1.4.1.7 (new version)
authenticate-1.2.1.1 (reinstall) changes: http-conduit-1.4.1.8 -> 1.4.1.7
wai-app-static-1.2.0.3 +blaze_html_0_5 (reinstall) changes: blaze-html-0.4.3.4
-> 0.5.0.0, blaze-markup-0.5.1.0 added
wai-test-1.2.0.2 (new package)
xml2html-0.1.2.3 (new package)
yaml-0.7.0.2 (new version)
yesod-core-1.0.1.2 (reinstall) changes: blaze-html-0.4.3.4 -> 0.5.0.0,
blaze-markup-0.5.1.0 added, cereal-0.3.5.2 -> 0.3.5.1
yesod-default-1.0.1.1 (reinstall) changes: yaml-0.7.0.3 -> 0.7.0.2
yesod-json-1.0.0.1 (reinstall)
yesod-persistent-1.0.0.1 (reinstall)
yesod-form-1.0.0.4 (reinstall) changes: blaze-html-0.4.3.4 -> 0.5.0.0,
blaze-markup-0.5.1.0 added
yesod-auth-1.0.2.1 (reinstall) changes: blaze-html-0.4.3.4 -> 0.5.0.0,
blaze-markup-0.5.1.0 added, http-conduit-1.4.1.8 -> 1.4.1.7
yesod-1.0.1.6 (reinstall) changes: blaze-html-0.4.3.4 -> 0.5.0.0,
blaze-markup-0.5.1.0 added
yesod-static-1.0.0.3 (reinstall) changes: cereal-0.3.5.2 -> 0.3.5.1
yesod-test-0.2.0.6 (new package)
yesod-platform-1.0.4.2 (new package)
cabal: The following packages are likely to be broken by the reinstalls:
http-conduit-1.4.1.8
scion-browser-0.2.8
persistent-sqlite-0.9.0.2
Use --force-reinstalls if you want to install anyway. 
```

使用 --force-reinstalls 后：

```
$ yesod devel
Yesod devel server. Press ENTER to quit
Resolving dependencies...
Configuring testod-0.0.0...
cabal: The following installed packages are broken because other packages they
depend on are missing. These broken packages must be rebuilt before they can
be used.
package http-conduit-1.4.1.8 is broken due to missing package
certificate-1.2.3-a05e9030a2a8a075ff79563ce724647f,
cprng-aes-0.2.3-1648d64e2ac56f39c0dcb6acde6ed388,
socks-0.4.1-cd9ac1186a4f1e3982305532e73a5f6b,
tls-0.9.5-698768ee49b4307eb7454e343d7065b9,
tls-extra-0.4.6-db5b6ed8052b04a05050ab7ec33b2fd5
package persistent-sqlite-0.9.0.2 is broken due to missing package
persistent-0.9.0.4-50e8d5b2fab89513513d3d0a8c25a57c
Rebuilding application...
Forcing recompile for ./Model.hs because of config/models
Forcing recompile for ./Foundation.hs because of config/routes
Forcing recompile for ./Foundation.hs because of messages/en.msg
Forcing recompile for ./Foundation.hs because of templates/default-layout-wrapper.hamlet
Forcing recompile for ./Foundation.hs because of templates/default-layout.hamlet
Forcing recompile for ./Handler/Home.hs because of templates/homepage.hamlet
cabal: Run the 'configure' command first.
Build failure, pausing...
^C
$ cabal configure
Resolving dependencies...
Configuring testod-0.0.0...
cabal: The following installed packages are broken because other packages they
depend on are missing. These broken packages must be rebuilt before they can
be used.
package http-conduit-1.4.1.8 is broken due to missing package
certificate-1.2.3-a05e9030a2a8a075ff79563ce724647f,
cprng-aes-0.2.3-1648d64e2ac56f39c0dcb6acde6ed388,
socks-0.4.1-cd9ac1186a4f1e3982305532e73a5f6b,
tls-0.9.5-698768ee49b4307eb7454e343d7065b9,
tls-extra-0.4.6-db5b6ed8052b04a05050ab7ec33b2fd5
package persistent-sqlite-0.9.0.2 is broken due to missing package
persistent-0.9.0.4-50e8d5b2fab89513513d3d0a8c25a57c 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:53:10.957

我将所有东西都建立在 CLEAN 安装上（没有以前的 yesod 平台）。我已经安装了 Haskell Platform、BuildWrapper、Scion-browser 和 yesod-platform。不过，它似乎安装了 http-conduit-1.4.1.7，所以也许 1.4.1.8 不兼容？无论如何，没有什么能阻止你继续使用 --force-reinstalls 进行安装，然后重新安装 persistent-sqlite 和 scion-browser。只有重新安装这些中断是一个问题......

# actionscript-3 - 在不使用套接字的情况下使用服务器端脚本存储计算机连接的方法是什么

> ID：10933560
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:10:55.700
> 
> 标签：actionscript-3, sockets

我想知道是否有任何方法可以存储客户端脚本（比如 flash as3 脚本）与服务器端文件（php）的连接。所以有时，我可以从服务器端脚本撤消该连接并连接回同一台计算机？我不是在谈论套接字连接。但是通过简单的http连接。这可能吗？还是因为安全问题不允许？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:56:59.317

通常，当 Flash 之类的插件或 Web 套接字之类的功能不可用时，XHR 长轮询就是用于此类情况的方法。长轮询涉及让客户端发出服务器请求并且让服务器不立即响应。通过保持请求，服务器保持连接处于活动状态，然后可以等到它在响应之前实际告诉客户端一些东西。一旦客户端得到响应，它立即发出另一个请求，因此服务器可以随意使用另一个连接。

但是，由于您使用的是 Flash，因此您可以利用[Flash Socket](http://help.adobe.com/en_US/as3/dev/WSb2ba3b1aad8a27b0-181c51321220efd9d1c-8000.html)来建立持久连接。Flash Socket 实际上是为客户端-服务器连接构建的框架的内置后备，例如[Socket.IO](http://socket.io/)或[SignalR](https://github.com/SignalR/SignalR)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T19:07:48.887

据我所知，服务器无法像您一样实例化与客户端的连接，这是一个安全问题，将被阻止。

# markdown - R Markdown 只显示结果

> ID：10933566
> 
> 赞同：5
> 
> 时间：2012-06-07T14:11:09.677
> 
> 标签：markdown, rstudio

我一直在探索 R Markdown 并遇到了这个问题。我在网上找到的所有可重现的示例报告，例如[http://jeromyanglim.blogspot.ca/2012/05/example-reproducile-report-using-r.html](http://jeromyanglim.blogspot.ca/2012/05/example-reproducile-report-using-r.html)都有代码和结果。

我只想得到结果，因此向观众隐藏代码。例如，我只想显示 ggplot2 或 googlevis 的最终结果，而不显示加载数据和编码的长行。

有没有办法这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:35:27.720

只需添加`echo = FALSE`到代码[块选项](http://yihui.name/knitr/options#chunk_options)。

# iphone - CATransform3DTranslate 之后的 CATransform3DRotate

> ID：10933569
> 
> 赞同：3
> 
> 时间：2012-06-07T14:11:15.960
> 
> 标签：iphone, objective-c, 3d, catransform3d, catransformlayer

我正在尝试制作一个折叠式 facebook 菜单，就像您在这里看到的那样：[http ://www.mobileinc.co.uk/2012/05/folding-iphone-sidebar-menu/](http://www.mobileinc.co.uk/2012/05/folding-iphone-sidebar-menu/)

目前，我正在研究“折叠”部分。我有 2 层： - 左层在 {1,.5} 有一个锚点 - 右层在 {0,.5} 有一个锚点

我可以让它们在我的主视图中间折叠而不会出现这样的问题：CGFloat width = self.view.frame.size.width; CGFloat destinationWidth = slider.value * width;

```
CGFloat hypothenuse = self.view.frame.size.width/2.0f;
CGFloat adjacent = destinationWidth / 2.0f;
CGFloat opposite = sqrtf(powf(hypothenuse, 2)-powf(adjacent, 2));

CGFloat marginLeft = (width - destinationWidth) / 2;

CGFloat angle = asinf(opposite/hypothenuse);

CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0f / -4000.0f;

rightSide.layer.transform = CATransform3DRotate(CATransform3DTranslate(transform,0,0,-opposite),-angle, 0, 1, 0);
leftSide.layer.transform = CATransform3DRotate(CATransform3DTranslate(transform,0,0,-opposite),angle, 0, 1, 0); 
```

这完美地工作。当我尝试像这样在 x 轴上平移我的图层时，问题就来了： CATransform3DTranslate(transform,-marginLeft,0,-opposite)

图层仍然以良好的 z 平移折叠，但它以一个尴尬的角度结束，就好像整个视图已经旋转了一样。

这显然与视角有关（当我不设置 m34 时，它“有效”）但我不知道如何补偿它......

先感谢您！

干杯，

TeuBeu2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:30:06.020

您正在按以下顺序编写 4 个转换：

1.  旋转
2.  翻译 Z
3.  翻译 X
4.  项目

问题是您想在投影之后而不是之前进行平移 X。实际上，您正在通过投影将折叠部分拉回中心一点。尝试这个：

```
CATransform3D transform = CATransform3DIdentity;
transform.m34 = 1.0f / -4000.0f;

transform = CATransform3DConcat(transform, CATransform3DMakeTranslation(-marginLeft,0,0));

rightSide.layer.transform = ... 
```

免责声明：我还没有实际测试过这个

# javascript - CSS干净的动画重复

> ID：10933572
> 
> 赞同：0
> 
> 时间：2012-06-07T14:11:18.850
> 
> 标签：javascript, css

我有一个在 CSS 中使用关键帧的动画

我想在每次调用函数时执行动画`animate()`添加动画关键帧类的函数时，我都想执行动画

所以我环顾四周，发现我必须使用 清除类`webkitTranstionEnd`，但这意味着我还需要为 Mozilla、Opera 写一些东西。每次调用函数时，是否有更简洁的方法来执行关键帧动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:13:33.430

我强烈建议使用像[jQuery](http://api.jquery.com/animate/)（或任何其他）这样的 javascript 框架，它应该是跨浏览器兼容的。

# facebook - 自定义观看动作

> ID：10933574
> 
> 赞同：0
> 
> 时间：2012-06-07T14:11:20.670
> 
> 标签：facebook, api, facebook-opengraph

我想使用 watch 动作来分享一个“GIF”对象，但我不被允许。我已经知道 watch 命令是内置的，它只能用于视频、剧集等。

经过一番研究，我发现 gifboom.com 允许将 watch 命令用作自定义命令。请参阅[http://img832.imageshack.us/img832/7240/capturefhv.png](http://img832.imageshack.us/img832/7240/capturefhv.png)

该链接还包含以下内容：fb_action_types=gifboom:watch 所以看起来他们被允许使用 watch 作为自定义操作。

如何为我的应用程序请求自定义监视命令？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:43:46.187

我认为现在没有办法做到这一点。

> 对于构建视频应用程序的开发人员，我们创建了一个常见的 Watch 操作。该动作只能引用内置视频类型的对象，例如电影、电视节目、电视剧集或视频。为方便起见，这些内置视频类型的对象会在您为应用注册内置 Watch 操作时自动添加。
> 
> 注意：将不再接受自定义 Watch 操作的提交。如果您的对象不是电影、电视节目或电视剧集类型，您应该使用通用的内置视频对象类型。

仅供参考：[内置操作](https://developers.facebook.com/docs/opengraph/actions/builtin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:08:18.093

尝试将您的操作命名为其他名称，例如“看”而不是“观看”，看看您是否可以通过审批流程...</p>

# tooltip - Jquery Tools Tooltip 不会消失

> ID：10933581
> 
> 赞同：1
> 
> 时间：2012-06-07T14:11:36.527
> 
> 标签：tooltip, jquery-tools

所以这可能是一个错误，但它困扰着我，不是双关语。

这是问题所在，当您将鼠标悬停在输入字段上时，工具提示会显示在右侧，太棒了！问题是，如果您将鼠标悬停在现在出现的工具提示上，然后将鼠标从工具提示上移开（让我们说直接向下）并进入空​​白页面空间而不返回输入，则工具提示不会消失。想法？

要查看到底发生了什么，请查看我在此处运行的代码：http: [//jsfiddle.net/WBdns/](http://jsfiddle.net/WBdns/)

对于那些不想查看演示的人，这里是我的代码：

HTML：

```
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<label for="ref" class="inline">ICD9 Code
<input name="ref" class="hovertip" type="text" id="ref" tabindex="" title="This code is     located on the Order"placeholder="" required class="" />
</label>​ 
```

JS：

```
$(function() {
// jQuery Tooltips: http://jquerytools.org/documentation/tooltip/index.html
$('.hovertip[title]').tooltip({
predelay:100,
offset: [10, 2],
effect:'slide',
slideInSpeed:100,
slideOutSpeed:100,
position:'center right',
opacity:0.8,
layout:'<span/>',
tipClass:'tooltip info ',

events: {
    input:'mouseover focus,blur mouseout',
    }
});
});​ 
```

任何帮助深表感谢！

# visual-studio-2010 - Debugging pre-processed code

> ID：10933593
> 
> 赞同：0
> 
> 时间：2012-06-07T14:12:10.520
> 
> 标签：visual-studio-2010, debugging, preprocessor, visual-studio-debugging

I am trying to step through a C project (fossil-scm) that has a 2-phase pre-processing stage.

First there is a custom built pre-processing program, that goes through the files and fixes certain project-specific macros, creates the include headers, and a few other things. It creates a bunch of `.c` and `.h` files. The result is then compiled as usual, passing through the "regular" pre-processor.

I took the result from the first part and created a visual-studio project from it. When I tried to debug it, it was skipping my breakpoints. I found that every file begins with a

```
#line 1 "src/original_filename.c" 
```

I can comment out this line and get debugging to work, but I would rather *use* this line to get debugging in the original context.

So...
How can I set it up so that it compiles the processed files, but uses the `#line` directives to give me debugging capabilities in the original files?
I tried just placing the `src` directory next to the files, and it works if I start the program by pressing `F10`, but I don't know how to get the original files into the project explorer so that I can easily open them and place breakpoints without the compiler trying to compile them.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T20:12:50.300

From my experiments with Visual Studio 2012 (2010 might behave similarly), setting breakpoints in the "original" source files (source files referenced by #line directives in the "real" source files) only works correctly if:

1) I add the "original" source files to the project. (E.g. Add -> Existing Item...)

2) I exclude the "original" source files from build. (E.g. Right-Click -> Properties -> Exclude from Build = Yes)

A bit of a late answer, but I hope this helps someone.

# android - Android 本地化，当将设备转换为布局语言时会恢复默认值

> ID：10933597
> 
> 赞同：0
> 
> 时间：2012-06-07T14:12:19.897
> 
> 标签：android, localization

我有一个我想在英语和希伯来语中使用的应用程序。我在 values 和 values-iw 文件夹下添加了两个字符串文件。当用户选择不同的语言时，我运行以下代码：

```
Locale locale;
     if (location.equals("iw")){
         locale= new Locale("iw");
         Errors._langauge=1;    
     }
     else{
         locale=Locale.ENGLISH;
         Errors._langauge=2;
     }
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
          getBaseContext().getResources().getDisplayMetrics()); 
```

这工作正常，直到我放置我的设备，导致 layout-land 目录中的 xml 被加载。加载土地 xml 时，语言会恢复为系统的默认语言。我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:18:07.367

更改方向时，您的 Activity 会重新创建自己，因此您的 onCreate() 将再次运行。我假设您正在初始化 onCreate() 方法中的默认值，因此它会自行更改回来。

# python - 使用字典理解的无效语法

> ID：10933601
> 
> 赞同：5
> 
> 时间：2012-06-07T14:12:35.693
> 
> 标签：python, syntax-error, dictionary-comprehension

给定一个名为“x”的浮点列表，我想使用字典理解创建一个字典，将 x[1:-1] 中的每个 x 映射到它的邻居。我尝试了以下行：

```
neighbours = {x1:(x0,x2) for (x0,x1,x2) in zip(x[:-2],x[1:-1],x[2:])} 
```

但是，语法似乎无效。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-07T14:17:55.240

[字典推导式](https://www.python.org/dev/peps/pep-0274/)仅在 Python 2.7 及更高版本中可用。对于早期版本，您需要`dict()`带有生成器的构造函数：

```
dict((x1, (x0,x2)) for (x0,x1,x2) in zip(x[:-2],x[1:-1],x[2:])) 
```

# android - ZXing CaptureActivity后退按钮问题

> ID：10933604
> 
> 赞同：1
> 
> 时间：2012-06-07T14:12:41.030
> 
> 标签：android

我在将我的项目与 ZXing CaptureActivity 集成时遇到问题。一切似乎都很好。但是当我取消 CaptureActivity 时，它正在完成，但也调用了先前活动的 onKeyUp 实现。我只在纵向模式下遇到这个问题。也许有人有类似的问题。

请告诉我是否必须用一些代码来澄清我的问题，我只是希望这是一个简单的问题，我只是忘记了我程序中的一些愚蠢的小细节。

# apache - Tomcat、mod_cluster 和 Amazon EC2？

> ID：10933608
> 
> 赞同：2
> 
> 时间：2012-06-07T14:12:48.617
> 
> 标签：apache, tomcat, amazon-ec2, cloud, cluster-computing

我最近看到了[这篇文章](http://www.google.com/url?sa=t&rct=j&q=tomcat%20dynamic%20cluster%20mod_cluster%20&source=web&cd=1&ved=0CFMQFjAA&url=http://www.devx.com/Java/Article/48086&ei=KbbQT9ziHufY0QH3huTTDQ&usg=AFQjCNHPT7MV6Pm3plvDy_1yqQ4smxqG1A&sig2=iiUkr1Sp1Qjl3n399IVRdw)，讨论如何利用 mod_cluster 创建动态 Tomcat 集群。我的公司即将迈入 Amazon 的 EC2 云的第一次飞跃，并将在 Tomcat 7 上部署我们的应用程序。我们希望利用 mod_cluster 以便我们可以随着流量的增加动态扩展我们的应用程序。但是，EC2 不支持使用多播，这就是本文档让您配置集群设置的方式。

有没有人在 EC2 环境中为动态 Tomcat 集群设置 mod_cluster？我看到一小部分提到利用 S3 存储有关集群成员的信息，但找不到任何解释如何执行此操作的文档。有没有人看过关于这个主题的任何好的文档或教程？个人经验？我很感激你能给我的任何见解。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T10:22:17.303

如果您使用代理列表配置，Amazon 的 EC2 云中的 Mod_cluster 没有问题。

多播用于 httpd 平衡器来宣传自己。新的工作节点可以获取它并向平衡器注册自己。零配置。

由于没有可用的多播，广告将关闭。你要做的就是告诉工人在哪里寻找平衡器。Httpd 平衡器的配置，与 mod_jk 不同，不需要修改（您无需指定任何有关任何工作人员的任何内容）。

对于 Tomcat6：

```
<Listener className="org.jboss.modcluster.container.catalina.standalone.ModClusterListener"
  proxyList="mybalacer.com:port" ...
  ...
/> 
```

对于 AS7：

```
<subsystem xmlns="urn:jboss:domain:modcluster:1.1">
  <mod-cluster-config advertise-socket="modcluster" proxy-list="mybalacer.com:port" ...
  ...
  </mod-cluster-config>
</subsystem> 
```

玩得开心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:20:48.730

我从未使用过 mod_cluster，但您可能想查看 Amazon 的 Elastic Beanstalk，因为您的实现是在 Java 中实现的。我的理解是，你编写你的 web 应用程序，将其打包为 JAR，然后简单地要求亚马逊在你需要的时候给你更多的权力，而在你不需要的时候给你更少的权力。基本上，它是您的整个架构即服务：您只需提供 WAR 文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:05:16.027

正如我所读到的，这篇文章的主要目标是在有大量用户在一个实例上访问应用程序时实现负载平衡。在 AWS 环境中，这可以使用 Christopher Schulz 建议的 Elastic Beanstalk 轻松实现。

我不确定您期待什么控制，但使用 Elastic Beanstalk 您可以控制应用程序的自动缩放、负载平衡、设置实例的最大和最小数量、应用程序出现故障或更改为不同状态时的电子邮件警报。增加减少JVM heapspace/permgen 空间。将 tomcat 日志旋转到 S3。根据 CPU 利用率/网络输入/输出等修改触发器管理，切换到自定义 AMI 以在您的生产环境中进行自定义更改。

Elastic Beanstalk 有很多选项可以完全控制您的应用程序。如果您对 Beanstalk 有任何疑问，请告诉我。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-26T16:55:06.967

考虑使用 jbossas 7。我认为更容易配置，更适合集群，尤其是在云中。

你可以使用 mod_cluster ;)

这里是集群教程：[https ://docs.jboss.org/author/display/AS71/AS7+Cluster+Howto](https://docs.jboss.org/author/display/AS71/AS7+Cluster+Howto)

# android - Android AudioRecord 频率过滤器一步一步

> ID：10933615
> 
> 赞同：4
> 
> 时间：2012-06-07T14:13:14.650
> 
> 标签：android, audio, frequency, audiorecord, android-audiorecord

Android：我是语音处理的新手，我使用 JTransform 库创建了具有 sampleRate 8000Hz 的 AudioRecord 对象我正在尝试过滤频率以下代码中有几件事我不明白我的问题如下

Q.1 为什么我们将“toTransform[i] = (double) buffer[i] / 32768.0; // 有符号 16 位”缓冲区转换为 16 位值？

Q.2 Rite now audioRecord 读取数据数组是短数组，如果我读取字节数组，我将如何将其转换为单字节 16 位？

Q.3 我想用双数组以 Hz 为单位显示声音频率，如何计算声音频率？

Q.4 我写了过滤方法 filterAudio() 但它不是过滤频率范围？

请帮帮我我有很多问题在我的脑海里

/* 代码如下 */

```
private final int[] mSampleRates = new int[] { 8000, 11025, 22050, 44100 };
final AudioRecord audioRecord = findAudioRecord();
                if(audioRecord == null){
                    return null;
                }

                final short[] buffer = new short[blockSize];
                final double[] toTransform = new double[blockSize];

                audioRecord.startRecording();

                while (started) {
                    Thread.sleep(100);
                    final int bufferReadResult = audioRecord.read(buffer, 0, blockSize);

                    for (int i = 0; i < blockSize && i < bufferReadResult; i++) {
                        toTransform[i] = (double) buffer[i] / 32768.0; // signed 16 bit
                    }

                    //Audio Filter passing frequency of mSampleRates[3]
                    filterAudio(bufferReadResult, toTransform, mSampleRates[3]);
                    transformer.realForward(toTransform);                   
                    publishProgress(toTransform);
                }
                audioRecord.stop();
                audioRecord.release();

public static void filterAudio(int bufferSize, double[] audioBuffer, float sampleRate ){

        //it is assumed that a float array audioBuffer exists with even length = to 
        //the capture size of your audio buffer

        //float frequency=0F;
        //The size of the FFT will be the size of your audioBuffer / 2
        int FFT_SIZE = bufferSize / 2;
        //RealDoubleFFT mFFT = new RealDoubleFFT(FFT_SIZE);
        DoubleFFT_1D mFFT = new DoubleFFT_1D(FFT_SIZE); //this is a jTransforms type

        //Take the FFT
        mFFT.realForward(audioBuffer);
        //mFFT.ft(audioBuffer);

        //The first 1/2 of audioBuffer now contains bins that represent the frequency
        //of your wave, in a way.  To get the actual frequency from the bin:
        //frequency_of_bin = bin_index * sample_rate / FFT_SIZE

        //assuming the length of audioBuffer is even, the real and imaginary parts will be
        //stored as follows
        //audioBuffer[2*k] = Re[k], 0<=k<n/2
        //audioBuffer[2*k+1] = Im[k], 0<k<n/2

        //Define the frequencies of interest
        float freqMin = 14400;
        float freqMax = 14500;

        //Loop through the fft bins and filter frequencies
        for(int fftBin = 0; fftBin < FFT_SIZE; fftBin++){        
            //Calculate the frequency of this bin assuming a sampling rate of 44,100 Hz
            float frequency = (float)fftBin * sampleRate / (float)FFT_SIZE;

            //Now filter the audio, I'm assuming you wanted to keep the
            //frequencies of interest rather than discard them.
            if(frequency  < freqMin || frequency > freqMax){
                //Calculate the index where the real and imaginary parts are stored
                int real = 2 * fftBin;
                int imaginary = 2 * fftBin + 1;

                //zero out this frequency
                audioBuffer[real] = 0;
                audioBuffer[imaginary] = 0;
            }
        }

        //Take the inverse FFT to convert signal from frequency to time domain
        mFFT.realInverse(audioBuffer, false);
    }

final AudioRecord findAudioRecord() {
        for (int rate : mSampleRates) {
            for (short audioFormat : new short[] { AudioFormat.ENCODING_PCM_8BIT, AudioFormat.ENCODING_PCM_16BIT }) {
                for (short channelConfig : new short[] { AudioFormat.CHANNEL_CONFIGURATION_MONO , AudioFormat.CHANNEL_CONFIGURATION_STEREO }) {
                    try {

                        bufferSize = AudioRecord.getMinBufferSize(rate, channelConfig, audioFormat);

                        if (bufferSize != AudioRecord.ERROR_BAD_VALUE) {
                            // check if we can instantiate and have a success
                            AudioRecord recorder = new AudioRecord(AudioSource.DEFAULT, rate, channelConfig, audioFormat, bufferSize);

                            if (recorder.getState() == AudioRecord.STATE_INITIALIZED){
                                Log.d(TAG, "Attempting rate " + rate + "Hz, bits: " + audioFormat + ", channel: "
                                        + channelConfig);
                                return recorder;
                            }
                        }
                    } catch (Exception e) {
                        Log.e(TAG, rate + "Exception, keep trying.",e);
                    }
                }
            }
        }

        return null;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T13:16:01.210

Q.1 为什么我们将“toTransform[i] = (double) buffer[i] / 32768.0; // 有符号 16 位”缓冲区转换为 16 位值？

32768 是最大值，我认为这行代码正在规范化数据，使其介于 0 和 1 之间。

Q.2 现在 audioRecord 读取的数据数组是短数组，如果我读取字节数组，我将如何将其转换为 singed 16 位？

你为什么将它读入`byte`数组？如果你这样做，那么你必须将两者组合`bytes`在一起以获得 16 位值。相反，只需读入`short`数组即可获取数据。以下是如何处理短数组[的示例。](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/audio/interp/LoudNoiseDetector.java)[这段代码](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/audio/record/AudioClipRecorder.java)读取它。

Q.3 我想用双数组以 Hz 为单位显示声音频率，如何计算声音频率？

[这](https://github.com/gast-lib/gast-lib/blob/master/library/src/root/gast/audio/processing/ZeroCrossing.java)是估计频率的一种不太准确的方法。存在其他方式，但更复杂

# jquery - 单选按钮 onclick 延迟行为

> ID：10933616
> 
> 赞同：1
> 
> 时间：2012-06-07T14:13:15.023
> 
> 标签：jquery, asp.net-mvc-3, onclick, radio-button

我有一个单选按钮列表，

我有在单选按钮单击事件上运行的功能这是我的 jQuery

```
$("input[type='radio']").click(function () {
        var str = $(this).attr("class");
        if (str == undefined) {
            str = "";
        }
        if (str.search("selectedRadio") < 0) {
            $("input[type='radio']").removeAttr("class").attr('checked', false);
            $(this).attr('checked', true).attr("class", "selectedRadio");
            id = $(this).attr('id');
            MID= $("input[type='hidden'][name='HiddenMedID']").val();
            ID = $(this).val();
            PID = $("#GetNewPatientID").val();
                $(this).parent().prepend("<img src='/icon_loading.gif' id = 'fetchingSP' width='18' height='18' id='PleaseWaitRadioCircle' />");
                FunctionOne();
                FunctionTwo(ID, PID, MID);
                FunctionThree(ID, PID);
                FunctionFour(ID, PID);
        }
    });​ 
```

**我注意到，当我在单击事件中具有以下功能时** ，单选按钮单击会出现延迟。我的意思是，如果用户单击单选按钮，则需要一秒钟或一半的时间才能选择该单选按钮。

```
 FunctionOne();
 FunctionTwo(ID, PID, MID);
 FunctionThree(ID, PID);
 FunctionFour(ID, PID); 
```

我不明白这有什么关系，如果我在点击事件中删除或评论这四个函数，那么没有延迟。

**这是剃须刀视图上的 ASP.Net MVC3.0 应用程序。**

# powershell - 在远程计算机上监视进程时获取进程命令给出负值

> ID：10933617
> 
> 赞同：6
> 
> 时间：2012-06-07T14:13:15.637
> 
> 标签：powershell

我在我的系统上执行这个命令

```
get-process $Processname -computername $Computername 
```

但在输出中它给了我负工作集和分页内存大小值输出：

```
Name        ID         VM   PeakVM          WS         PeakWS Thread     Handle
----        --         --   ------          --         ------ ------     ------
FusionA  10724      -1282     -988       -1777          -1697    232       2085
FusionA  10724      -1281     -988       -1746          -1697    232       2091
FusionA  10724      -1280     -988       -1713          -1697    232       2099
FusionA  10724      -1279     -988       -1707          -1697    232       2108
FusionA  10724      -1277     -988       -1702          -1697    232       2118 
```

请让我知道解决这个问题的方法。对于那些不明白我的意思的人，当我在解释更多内容时，无需大声疾呼。最初我正​​在做这样的事情：

```
if($env:Processor_Architecture -eq "x86")
{
write "`nrunning on 32bit"
$a = @{Expression={$_.Name.SubString(0,7)};Label="Name";width=7}, `
@{Expression={$_.ID};Label="ID";width=6}, `
@{Expression={$_.PagedMemorySize/1024};Label="VirtualMemory";width=10},
@{Expression={$_.PeakPagedMemorySize/1024};Label="PeakVirtualMemory";width=8},
@{Expression={$_.WS/1024};Label="WorkingSet";width=11},
@{Expression={$_.PeakWorkingSet/1024};Label="PeakWorkingSet";width=14},
@{Expression={$_.threads.count};Label="Threads";width=6},
@{Expression={$_.Handles};Label="Handles";width=10}

}
else
{
write "`nrunning on 64bit"
$a = @{Expression={$_.Name.SubString(0,7)};Label="Name";width=7}, `
@{Expression={$_.ID};Label="ID";width=6}, `
@{Expression={$_.PagedMemorySize64/1024};Label="VirtualMemory";width=10},
@{Expression={$_.PeakPagedMemorySize64/1024};Label="PeakVirtualMemory";width=10},
@{Expression={$_.WorkingSet64/1024};Label="WorkingSet";width=11},
@{Expression={$_.PeakWorkingSet64/1024};Label="PeakWorkingSet";width=14},
@{Expression={$_.threads.count};Label="Threads";width=6},
@{Expression={$_.Handles};Label="Handles";width=10}

} 
```

之后，我运行以下命令：

```
get-process $Processname -computername $Computername  | format-table   $a -wrap 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T16:18:34.650

试试下面的——

```
get-process $Processname -computername $Computername | ft Name,ID,VirtualMemorySize64,PeakVirtualMemorySize64,WorkingSet64,PeakWorkingSet64 
```

应该删除您的位数检查，并且您应该只使用 64 位属性。旧属性已过时。[来源](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)

# java - 使用 System.out.println 显示特殊字符

> ID：10933620
> 
> 赞同：17
> 
> 时间：2012-06-07T14:13:20.457
> 
> 标签：java, database, string, character-encoding, system.printing

我无法从我的网络服务向我的数据库发送或显示带有特殊字符的文本。在我的日食中，我已将字符编码设置为 UTF-8，但它仍然不允许我显示字符。例如一个简单的打印，如下面的代码

```
String test ="привет"; 
System.out.println(test); 
```

或者

```
String test ="привет";
String query = "insert into communication (`test`) VALUES ('"+ test +"');
PreparedStatement preparedStmt1 = con.prepareStatement(query);
preparedStmt1.executeUpdate(); 
```

控制台上的结果以及如果我将其发送到我的数据库是??????。如何让它在控制台上正确显示，并希望在数据库中

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-11-30T22:12:54.767

如果您使用的是 Eclipse，那么

1.  右键单击您的项目。
2.  转到属性
3.  在“文本文件编码”中选择 UTF-8

![在此处输入图像描述](../Images/45749d658788497919cef40e036961fa.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T14:29:27.170

看看这是否有效。

```
 PrintStream out = new PrintStream(System.out, true, "UTF-8");
    out.println(test); 
```

要存储在数据库中，请使用以下以 UTF-8 显式编码字符串

```
String newString = new String(test.getBytes(), "UTF8"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:31:50.403

是的，它的XXI。世纪，我们仍在努力解决字符编码之类的问题......

我的第一个猜测是：

1.  您的源文件编码可能是错误的（您是否使用 Maven 之类的构建工具？可能还需要在那里设置源编码），
2.  你的控制台编码可能是错误的（你是在 Windows 下吗？默认的命令行控制台默认不是 UTF，它依赖于本地，但是在注册表中你可以设置它的编码）
3.  您的 DB 编码可能不正确（表编码是什么，您可以检查一下吗？）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:36:15.313

可能您需要先将字符串解码为 ISO-8859，然后再将其编码为 UTF-8

# android - OsmDroid 中 GPS 位置的正确格式是什么？

> ID：10933623
> 
> 赞同：0
> 
> 时间：2012-06-07T14:13:34.883
> 
> 标签：android, osmdroid, openstreetmap

我有一个 GPS 设备，它通过短信以如下格式发送其位置：

2937.0864,5233.3686,55000

第一位是纬度，第二位是经度，第三位是alt。当我要求谷歌地图显示位置时，它显示错误：

“我们无法理解位置 2937.0864,5233.3686”

如何将这些数字转换为有效的 GPS 位置？我正在用 OsmDroid 编写一个应用程序，我想使用正确的 GPS 位置来显示地图。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:09:54.207

*2937.0864,5233.3686*肯定不是纬度和经度，但*29.370864,52.333686*或*29° 37' 08.64", 52° 3​​3' 36.86"*可能是正确的位置。但是，您的格式仍然看起来很奇怪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-07T05:36:30.953

一种可能性是这些数字来自 NMEA 句子。有关格式详细信息，请参阅以下答案。

[NMEA 消息到 Android 位置](https://stackoverflow.com/questions/8305488/nmea-message-to-android-location)

如果是这样，在您的示例中，两个数字 2937.0864,5233.3686 分别表示 29 度 37.0864 分钟和 52 度 33.3686 分钟。

要转换为十进制数，它们变为 29 + 37.0864/60 = 29.6181066667 和 52 + 33.3686/60 = 52.5561433333

# javascript - MVC 通用弹出窗口

> ID：10933626
> 
> 赞同：0
> 
> 时间：2012-06-07T14:14:04.453
> 
> 标签：javascript, asp.net-mvc, popup

我希望创建一个通用弹出窗口，可以使用按钮从应用程序中的任何位置打开。这个想法是这个弹出窗口将有一个树，用户将单击节点，它将返回选定的节点（或与该节点相关的 Id）。到调用此弹出窗口的页面。

我已经创建了树视图弹出窗口，但问题是我不确定如何让这个弹出窗口返回一些内容到调用页面。调用页面不会是视图，它可以是任何视图。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:20:00.150

使用 javascript 函数，您可以使用`opener`变量调用弹出窗口父页面上的函数。

在父页面上调用这个：

```
opener.SelectedNode(popupSelectedNodeId); 
```

其中 SelectedNode 是所有父页面上的函数，popupSelectedNodeId 是在弹出页面上选择的节点。

# c# - 锁定语句和 MVC

> ID：10933628
> 
> 赞同：0
> 
> 时间：2012-06-07T14:14:07.630
> 
> 标签：c#, asp.net-mvc, locking

在 MVC 中为 POST 使用锁是否合理？是否存在使用会使锁失效的网络农场之类的情况？我通常使用数据库锁，但我的特殊情况很难管理，而且使用监视器更简单。我不想讨论为什么我需要锁，只是想知道是否存在无法按预期工作的情况。

```
private static object Lockable = new Object(); 
public ActionResult Submit() 
{
     lock(Lockable)
     {

     }   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:41:01.033

为了实现对 webfarm 的锁定，您需要在网络上拥有一个共享资源（例如缓存服务器），并且您需要使用它来实现 webfarm 安全锁定。我认为这是最简单的解决方案。

您还可以隔离要序列化调用的组件并通过网络访问它。

还有另一种选择是创建一个符合 MSDTC 的组件，该组件可以登记到分布式事务中，因此所有调用者都被强制序列化他们的调用。但是，这需要设置所有环境以使用 MSDTC、企业服务等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:22:27.337

正如您自己所说，在少数 Web 服务器/不同进程的情况下，您的锁仅适用于当前进程，这意味着它不会影响您的应用程序的其他正在运行的实例（如果存在）。

# android - 需要有关用于动态创建的问题表的布局结构的建议 - Android

> ID：10933629
> 
> 赞同：0
> 
> 时间：2012-06-07T14:14:09.240
> 
> 标签：android, listview, android-layout, dynamic, tablelayout

我需要为调查的问题表设计布局。问题的数量是固定的，但回答的数量不是固定的。

查看我想到的表格结构图：http: [//i.stack.imgur.com/OLGIG.jpg](http://i.stack.imgur.com/OLGIG.jpg)

我的要求是：

*   顶行中的名称数量可以变化，如果太多，表格应该能够水平滚动。
*   问题的数量可能比屏幕上所能容纳的要多。然后表格应该能够垂直滚动。
*   水平滚动应从 B 列开始，因此问题的 A 列是固定的。
*   垂直滚动应该从第 2 行开始，因此第一行也是固定的。
*   行高应该对齐。具体来说，问题文本应与行中的其他单元格对齐。在大多数情况下，问题文本的高度将超过一排。
*   等宽的列看起来最好。

从 B 开始的列将在运行时动态添加，所以我需要一些关于什么是最佳布局结构的建议，以便以最有效（最少时间编码）的方式完成最终结果。请记住，如果需要编辑现有答案集，我还必须用答案填充视图。

目前我正在考虑使用 TableLayout，但它有其局限性。另一个选项是自定义布局，用作列表视图中的列表项。

任何想法或建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T17:31:29.240

我会建议潜在的具有 2 列的水平线性布局。在每一列中都有一个列表视图。在最左边的列中，您的 A 列将会消失，而在右边的列中，您基本上会执行相同的操作，但每一行都会有多个值。

从这里，您可以连接两个滚动动作，当右侧滚动时，您必须手动滚动左侧，反之亦然。

这也是关于列表视图的一个很好的教程

[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)

# visual-studio-2010 - 为 Ogre 64 位构建 Boost

> ID：10933630
> 
> 赞同：1
> 
> 时间：2012-06-07T14:14:13.700
> 
> 标签：visual-studio-2010, boost, cmake, bjam, ogre

需要添加 64 位版本的 Ogre 图形引擎（在撰写本文时是最新版本，即 1.8.0），我按照[他们的提示](http://www.ogre3d.org/tikiwiki/tiki-index.php?page=Prerequisites)打开了一个可视的 c++ x64 命令提示符并输入：

```
 bjam --build-dir=vc10 --toolset=msvc-10.0 --address_model=64 --with-thread --with-date_time --build-type=complete stage 
```

这是我通过令人信服的提升为 64 位 Windows 编译器构建 lib 对象而得到的。我正在使用 Visual Studio 2010 Premium 和 CMake 工具从源代码编译 Ogre。这是事情变得令人讨厌的地方：

```
 Error  276 error LNK1104: cannot open file '..\..\lib\Debug\OgreMain_d.lib'    
 Error  119 error LNK1112: module machine type 'X86' conflicts with target machine type 'x64' 
```

我担心我不会很快解决这个问题，因为我完全不习惯使用严重依赖依赖项的大型代码库，而且我还必须从头开始构建。你能否提供一个提示或链接到我可能错过的东西？谢谢..

**更新** 有一个包含已构建库的网站，但很高兴了解为什么*--address-model*和*--address-space*标志不起作用。还应该如何使用*bjam*来构建库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:16:01.743

bjam 命令中有几个错误。你不想在or`--`前面加上一个连字符，而不是下划线。`toolset``address-model``address-model`

所以你可能瞄准的命令是：

```
bjam --build-dir=vc10 toolset=msvc-10.0 address-model=64 --with-thread --with-date_time --build-type=complete stage 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:22:38.827

第一个错误是不言自明的 - lib 文件在指定的路径中不存在。第二个错误表明您正在为 64 位构建，但正在使用的依赖库之一是为 32 位编译的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T15:48:00.820

尝试从[那里](http://www.boostpro.com/download/)下载预编译的 Boost 二进制文件并将其安装到默认位置。这将使 CMake 正确定位库并包含目录。

# r - R（spatstat）：未评估到所需限制的内置函数

> ID：10933637
> 
> 赞同：3
> 
> 时间：2012-06-07T14:14:26.323
> 
> 标签：r, function, plot, ppp, spatstat

所以我遇到的问题是非常基本的，但我似乎无法解决它。我一直在使用 spatstat 的 F、G、J、K 和 L 函数，我想在与不同点过程的 F 函数相同的图上绘制一个点过程的 F 函数。这很容易，除了我的一个点过程将函数评估为 r = 20，另一个评估为 r = 15（'r' 是 x 轴上的自变量）。我希望它们都被评估为相同的 r 值，最好是 20。我该怎么做？本质上，这就是问题所在。

首先，我创建包含函数值的数据框：

```
mydata.Fest <- Fest(mydata) 
```

然后，出于某种原因，这行代码：

```
plot(mydata.Fest) 
```

不会评估为与此代码行相同的“r”（自变量）值：

```
plot(mydata.Fest, xlim=c(0,20), ylim=c(0,0.8)) 
```

两个图都来自 xlim = c(0,20) 和 ylim = c(0,0.8)，但由于某种原因，第二个图在 x = 15 处停止评估函数。考虑到它们是从同一个对象绘制的，我没有不知道为什么他们不产生相同的情节。

附带说明一下，我遇到了另一个问题：在使用 F、J 和 K 函数时，我发现调整限制（尤其是自变量的限制）会导致 R 意外崩溃。如果您遇到此问题，或知道解决方案，请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T02:31:47.017

这是一个常见问题解答。spatstat.org 常见问题页面对此进行了讨论。

spatstat 中的汇总函数，例如 Fest 和 Kest，对自变量有一个“推荐范围”，它可能比计算函数的值的范围更短。推荐范围是函数估计在统计上可靠的范围。默认情况下，该函数仅绘制到建议的限制。（这是空间统计中的标准做法。如果我们不这样做，那么大多数图会看起来很奇怪，因为函数值会爆炸，并且可靠信息会缩小到仅占左下角的一小部分阴谋。）

要检查 r 的可用和推荐范围，请打印函数对象（只需输入其名称）并查看最后几行输出。

要控制绘图限制，请使用 xlim 和 ylim。

有关更多详细信息，请参阅研讨会说明 www.csiro.au/resources/pf16h.html

Adrian Baddeley - 包作者

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T15:41:00.930

嗯，这有点奇怪。抱歉，没有答案，但认为其他人最好通过留下您描述的行为的可重复示例来进行调查。

我过去所做的是制作一个一致的 bin 向量来评估单独的点模式。

```
library(spatstat)
data(lansing)

mydata1 <- lansing[lansing$marks == "blackoak",]
mydata2 <- lansing[lansing$marks == "hickory",]

my_r <- (0:40*.002)

mydata1.Fest2 <- Fest(mydata1, r = my_r)
mydata2.Fest2 <- Fest(mydata2, r = my_r)

plot(mydata1.Fest2)
plot(mydata2.Fest2, add = TRUE)

mydata1.Fest2$r
mydata2.Fest2$r 
```

可以看出，距离箱是相同的，但函数没有在同一组上进行评估。我检查了一下，这可能是独有的行为`Fest`，我在使用时能够得到预期的解决方案`Kest`。下面的例子。

```
mydata1.Kest <- Kest(mydata1)
my_k <- mydata1.Kest$r
mydata2.Kest <- Kest(mydata2, r = my_k)

plot(mydata1.Kest)
plot(mydata2.Kest, add = TRUE) 
```

我认为这不是 的预期行为`Fest`，但我不太熟悉该技术以及它与 Ripley's K 的不同之处，所以我当然可能会弄错，并且由于某种我不知道的原因，这是预期的行为。在尝试在输出设备上设置轴限制时，我也遇到了类似于您描述的意外崩溃，但我无法重现它。所以也许你正在做某事，或者我们都疯了！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T13:20:11.623

我就这个问题联系了 Adrian Baddeley 博士（'spatstat' 的创建者），他告诉我这个例子展示了 add=TRUE 时 plot.fv 中的一个错误。这将在 spatstat 版本 1.28-1 中修复。

# sql - 空与非空

> ID：10933639
> 
> 赞同：2
> 
> 时间：2012-06-07T14:14:36.007
> 
> 标签：sql

在 sql 数据库列中，`NULL`除非我们使用`NOT NULL`. 使用一种代替另一种有什么好处？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T14:18:13.137

如果您需要在列中表示未知数据，则将其设为可为空。如果您将始终在列中包含数据，则最好使其不可为空，因为

1.  处理空值可能令人讨厌且违反直觉
2.  它节省了一点空间
3.  在某些数据库系统上，空值没有被索引。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:17:15.427

当字段设置为 NOT NULL 时，它不能为空。这意味着您必须在插入记录时为该字段指定一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:19:49.457

只是为了澄清您的观点Ö 在任何符合 SQL ANSI 标准的数据库中，都不会将空字符串设置为 NULL。NULL 与空字符串不同。给定显式 NULL 值或没有值的列被分配 NULL。

以下是不使用 NULL 的几个优点。您为用于区分 NULL 值的位节省空间。您还使语句的含义，例如“字段 <> 值”更加清晰。此外，某些数据库在优化诸如“coalesce(field, '') <> value”之类的语句以使用索引时遇到问题。

有时，需要 NULL，尤其是当您插入不完整的记录时。而且，由于默认列允许 NULL，惰性确保几乎所有数据库中的所有列都接受 NULL 值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:20:25.230

`NOT NULL`有义务为该字段指定特定值。

`NULL`当您需要为该字段保留空值时使用。

`NOT NULL`当您想要禁止该字段的空值时使用。大多数数据库使用 -values 缓慢工作的附加目标`NULL`。因此，如果您怀疑使用`NOT NULL`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:20:43.917

NOT NULL 是一个约束，它确保每一行的列中都有一个值。正确应用时这是一种很好的做法，因为在执行诸如连接之类的操作时必须小心表中的空值，因为没有空值等于任何其他空值

[http://en.wikipedia.org/wiki/Null_(SQL](http://en.wikipedia.org/wiki/Null_(SQL) )

# c# - 允许特定应用程序出现在“TopMost”表单上方

> ID：10933642
> 
> 赞同：0
> 
> 时间：2012-06-07T14:14:43.823
> 
> 标签：c#

我正在构建一个小程序来尝试帮助锁定瘦客户端。我使用 TopMost 属性来防止用户访问我的软件后面的任何内容，但我想知道是否可以允许特定应用程序“通过”它。

例如，假设他们被允许打开 Word。我的软件可以调用 msword.exe（这很好），但它会在应用程序下方打开。除了本示例中的 msword.exe 之外，这对于所有内容都是预期和期望的行为。那么，有没有办法让msword.exe进程出现在上面呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:01:56.370

答案是不。” 如果有这样的机制，就会导致军备竞赛不断升级，每个人都用最高的“级别”来压倒其他人。

在 Windows 中限制访问的最佳方法是使用已内置的安全功能。您可以更改每个用户的文件访问权限。

# spring - 使用包含奇怪字符的用户名登录

> ID：10933644
> 
> 赞同：0
> 
> 时间：2012-06-07T14:14:46.370
> 
> 标签：spring, encoding

有人可以尝试执行后续步骤并提供一些提示吗？

1.  运行最新 Spring Security 版本 (spring-security-samples-tutorial-3.1.0.RELEASE.war) 或您拥有的任何 Spring Security 示例项目中提供的示例。

2.  将 'rod' 用户更改为 'áéíóú' 用户。

3.  尝试使用该新用户访问安全页面登录。

我无法登录，你呢？

这是一个字符编码问题。

在我的 java 代码中，System.out.println(username) 显示**Ã¡Ã©ÃÃ³Ãº** 而不是 **áéíóú**

与 Logback 日志系统相同的结果！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:51:02.867

好的，所以字符不会达到代码属性。尝试在 HTML/JSP 页面的头部添加这个元数据：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        ...
    </head>
</html> 
```

# android - android相机导致空指针异常

> ID：10933646
> 
> 赞同：1
> 
> 时间：2012-06-07T14:14:48.953
> 
> 标签：android, android-intent, camera, nullpointerexception

我的应用程序在尝试使用相机拍照时出现空指针异常。我的应用程序因此调用相机：

```
 //go to camera app.

        Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
        intent.putExtra(MediaStore.EXTRA_OUTPUT,Uri.fromFile(getTempFile()));

        //open camera. Take picture. 

        startActivityForResult(intent, PIC_ONE); 
```

并且onresult代码是：

```
@Override
    public void onActivityResult(int requestCode, int resultCode, Intent data){
    if (requestCode == PIC_ONE)
            {

                    //prevent null pointer
                    if(data.getData()!=null){
                        uri1 = data.getData();
                        File f = new File(getPath(uri1));//<-NULL POINTER EXCEPTION
                        //...do stuff
    } 
```

这会导致空指针异常，如上所示。getPath 导致此空指针。getPath() 如下所示。此方法未按应有的方式从媒体存储中检索图像。

```
public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        startManagingCursor(cursor);
        if(cursor!=null){
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return  cursor.getString(column_index);
        }
        else return null;
    } 
```

下面是logcat：

```
 06-07 22:53:59.650: ERROR/AndroidRuntime(3935): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=100, result=-1, data=Intent { act=inline-data dat=file:///mnt/sdcard/image.tmp typ=image/jpeg (has extras) }} to activity {com.myapp.myactivity/myactivity.java}: java.lang.NullPointerException
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2553)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:2595)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.app.ActivityThread.access$2000(ActivityThread.java:121)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.os.Looper.loop(Looper.java:138)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at android.app.ActivityThread.main(ActivityThread.java:3701)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at java.lang.reflect.Method.invokeNative(Native Method)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at java.lang.reflect.Method.invoke(Method.java:507)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:878)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:636)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at dalvik.system.NativeStart.main(Native Method)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935): Caused by: java.lang.NullPointerException
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at java.io.File.fixSlashes(File.java:205)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at java.io.File.init(File.java:189)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at java.io.File.<init>(File.java:139)
06-07 22:53:59.650: ERROR/AndroidRuntime(3935):     at com.myapp.myactivity.java.onActivityResult(myactivity.java:928) 
```

奇怪的是这个应用程序在 Xperia X10 上运行良好，但在包括 Xperia acro 在内的新手机上它有这个空指针。我已经对其进行了研究，似乎问题可能是由于相机应用程序太笨重并导致初始活动完成而引起的。

所以我覆盖了这两种方法：

```
 @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        if (uri1 != null) {
            outState.putString("cameraImageUri1", uri1.toString());
        }

    }

    @Override
    protected void onRestoreInstanceState(Bundle savedInstanceState) {
        super.onRestoreInstanceState(savedInstanceState);
        if (savedInstanceState.containsKey("cameraImageUri1")) {
            uri1 = Uri.parse(savedInstanceState.getString("cameraImageUri1"));
        }

        Log.v("THIS ACTIVITY","has called onrestore...");
    } 
```

onRestoreInstanceState 在拍照和完成过程中甚至都不会被调用。所以我不知道发生了什么。为什么调用这个空指针

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T14:21:21.000

```
 if (data != null) {
                File myFile;

                Uri selectedImageUri = data.getData();
                String filemanagerstring = selectedImageUri.getPath();
                String selectedImagePath = getPath(selectedImageUri);
                if (selectedImagePath != null)
                    myFile = new File(selectedImagePath);
                else if (filemanagerstring != null)
                    myFile = new File(filemanagerstring);
                 } 
```

//这里是getPath方法

```
public String getPath(Uri uri) {
        String[] projection = { MediaStore.Images.Media.DATA };
        Cursor cursor = managedQuery(uri, projection, null, null, null);
        if (cursor != null) {
            int column_index = cursor
                    .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            return cursor.getString(column_index);
        } else
            return null;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:29:45.723

尝试这个。

```
public String getPath(Uri photoUri) {

 String filePath ="";
    if (photoUri != null){
            String[] filePathColumn = {MediaStore.Images.Media.DATA};
            Cursor cursor = getContentResolver().query(photoUri, filePathColumn, null, null, null);
            cursor.moveToFirst();
            int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
            filePath = cursor.getString(columnIndex);
            cursor.close();
      }
  return filePath;
 } 
```

# php - Flash 是否尊重所有浏览器中的 Cache-Control 和 Expires 标头？

> ID：10933651
> 
> 赞同：0
> 
> 时间：2012-06-07T14:15:09.113
> 
> 标签：php, html, flash, caching, header

我正在使用其他人制作的 Flash .swf 文件，我没有，也永远不会有源代码。我相信它是在 Flash 9/AS3 中开发的，但我不确定。

Flash 程序从 XML 文件加载其设置：config.xml。通过编辑这个文件，我可以手动强制重新缓存加载的资产（通过将 ?uniquestring 附加到稍后将加载的配置文件中的 URL）。

但是，config.xml 文件是硬编码的，我不能对此强制使用查询字符串。默认情况下，浏览器只是在缓存中查找它并且不会更新。

我可以使用 PHP 或 .htaccess 为 config.xml 发送各种样式的无缓存标头，但我不知道是否所有浏览器/flash 播放器都会尊重它们，特别是 IE，我已经阅读了很多关于冲突的信息.

有人对此有明确的答案吗？

非常感谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:01:20.730

Flash Player 使用浏览器获取文件，由浏览器决定是使用缓存中的项目还是从服务器请求它。因此，您用来告诉浏览器不要缓存 XML 的任何机制都应该有效。

# rdf - 这如何在 RDFS 中表示

> ID：10933652
> 
> 赞同：1
> 
> 时间：2012-06-07T14:15:16.427
> 
> 标签：rdf, rdfs

我有生以来第一次尝试开发 RDFS 词汇表。我想知道在 RDFS 中执行以下操作的最佳方法是什么：

我有一个叫做“名字”的东西。名称可以具有属性“语言”。这种语言可以表示为 ISO 693-3 代码或 ISO 693-5 代码。

这是一个三元组，说明希腊语中有一个名字：

```
<http://example.org/name1> <http://example.org/vocab/language> "ell" . 
```

查找[http://example.org/vocab/language](http://example.org/vocab/language)可以传达该语言应该是 ISO 639-3 或 ISO 639-5 代码，作为 rdf:comment。

我找到了 lexvo 本体（http://lexvo.org/ontology），我认为使用它会很好。它将这两种类型的 ISO 代码描述为 owl:DatatypeProperty。我想知道如何使用它来改进示例以及如何在 RDFS 中表达它。下面是使用 lexvo 进行相同声明的尝试：

```
<http://example.org/name1> <http://lexvo.org/ontology#language>  <http://lexvo.org/id/iso639-3/ell> . 
```

或 ISO 639-5 替代方案：

```
<http://example.org/name1> <http://lexvo.org/ontology#language>  <http://lexvo.org/id/iso639-5/grk> . 
```

这样的RDF有意义吗？我如何在 RDFS 中表达 RDF 应该是这样的？

提前致谢， 弗兰斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:25:27.660

我不确定这甚至需要任何 RDFS

RDF 中的文字允许具有根据 RDF 规范必须与本身遵循 ISO 693 标准的[RFC 3066匹配的语言标签](http://www.ietf.org/rfc/rfc3066.txt)

因此，例如，我可以说以下内容：

```
<http://example.org/Me> <http://xmlns.com/foaf/0.1/givenName> "Rob"@en-gb .
<http://example.org/Me> <http://xmlns.com/foaf/0.1/givenName> "Bob"@en-us . 
```

你可以想出更好的例子，名字在不同的语言之间实际上会有所不同，尽管我发现美国人确实比英国人更倾向于称你为 Bob :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:41:44.720

你的问题到底是什么？您想知道应该如何编写和解释 RDF 语句吗？对于初学者，我建议熟悉[RDF 入门](http://www.w3.org/TR/2004/REC-rdf-primer-20040210/)。这是一个很棒的工具，可以验证 RDF 并根据您的词汇表绘制图表：[RDF 验证器](http://www.w3.org/RDF/Validator/)。真正在编写代码时查看图表。有助于正确理解它

# php - 用页面标题动态填充图像 alt 标签，PHP

> ID：10933660
> 
> 赞同：0
> 
> 时间：2012-06-07T14:15:58.757
> 
> 标签：php, html

有谁知道是否可以用当前页面标题动态填充图像替代文本？

我正在使用 PHP，该网站是[http://www.toricks.com](http://www.toricks.com)有数千张图片，所以浏览每张图片并不是一个真正的选择！

谢谢

瑞奇

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:21:11.417

你可以使用 jQuery 来实现它！

```
$(document).ready(function(){
    $('img').attr('alt', $("title").text());
}); 
```

希望这可以帮助！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:22:20.657

如果您通过数据库中的 PHP 值生成页​​面标题，然后为您的 alt 标签使用相同的变量，则可以。

我建立了类似于您在此处描述的内容...

[http://daroom.info/index.php?rand=6260](http://daroom.info/index.php?rand=6260)

包含 1000 多个条目的图片库注意页面标题与每张图片上的图像标题相同。

# django-views - Django使用请求传递变量

> ID：10933662
> 
> 赞同：0
> 
> 时间：2012-06-07T14:16:00.933
> 
> 标签：django-views

我试图从 html 文件传递​​一个变量并试图在我的视图中访问它..但我得到了这个错误..--signup_vol_position 完全需要 2 个参数（给定 1 个）

视图.py

```
def signup_vol_position(request,comments):
        pdb.set_trace()
        if request.method == 'POST':
                print('if')
        else:
                print('else')
        teamrel = VolunteerRequirement.objects.values_list('teamrelation',flat=T
        vollist = VolunteerRequirement.objects.order_by('teamrelation')
        variable = RequestContext(request, {'vollist': vollist,'teamrel':teamrel
        return render_to_response('signups/volunteer_list.dmpl',variable)
        #variable = RequestContext(request,{'comments':comments}
        #return render_to_response('sfp.view',variable) 
```

.html 文件

```
<table>

{% for v in vollist %}
{% ifchanged  v.teamrelation %}
<tr>
<th colspan=7 align="left"><h3><a name="{{ v.teamrelation }}"> {{v.teamrelation}} </a> </h3></th>
</tr>
{% endifchanged %}

<tr>
        <th colspan=4 align="left"><label for="id_Volposition">Volunteer Position:</label></th>
        <th colspan=.5 align="left"><a href="/signups/volposition/{{ v.position }}" class="username" <u>{{ v.volposition }}</u></a></th>
<tr> <td colspan="2" height="2" style="display:none">&nbsp;</td> </tr>
</tr> 
```

网址.py

```
urlpatterns = patterns('',
   (r'^new/$',                           sfp.view),
   (r'^volunteer/$',     volunteer_page),
   (r'^vollist/$', volunteer_list),
   (r'^volcont/$', volunteer_contact),
   (r'^volposition/$',signup_vol_position)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T09:31:21.753

根据您的定义，除了请求对象之外，函数 signup_vol_position 还需要一个参数。但是，在 urls.py 中，您没有考虑到该论点。应该是这样的

```
(r'^volposition/(.+)$',signup_vol_position) 
```

看看这是否有效。

# excel - 使用excel vba删除空格左侧的文本

> ID：10933663
> 
> 赞同：0
> 
> 时间：2012-06-07T14:16:07.277
> 
> 标签：excel, vba

我正在编写一个宏，它将清除一个 excel 列表。我需要列出一个名字并删除第一个名字，所以“John Smith”变成了“Smith”。我知道如何在空格之后删除文本，但在空格之前似乎更棘手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:21:28.617

利用`RIGHT("John Smith",LEN("John Smith")-FIND(" ","John Smith"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:25:12.667

这是一个循环遍历名为“rng_Names”的命名范围内的所有单元格并删除除最后一个单词之外的所有单元格的子函数。

```
Sub removeAllButLastWord()
    For Each cl In Range("rng_Names")
        cl.Value = Right(cl.Value, Len(cl.Value) - InStrRev(cl.Value, " "))
    Next cl
End Sub 
```

**更新**

以下 sub 只是删除了第一个单词：

```
Sub removeFirstWord()
    For Each cl In Range("rng_Names")
        cl.Value = Right(cl.Value, Len(cl.Value) - InStr(cl.Value, " "))
    Next cl
End Sub 
```

**更新第二个**

以下 sub 仅删除第一个单词，以及字符串“jr”（如果存在）

```
Sub removeFirstWordAndJR()
    For Each cl In Range("rng_Names")
        cl.Value = Replace(Right(cl.Value, Len(cl.Value) - InStr(cl.Value, " ")), " Jr", "", 1, -1, vbTextCompare)
    Next cl
End Sub 
```

# r - 无操作函数作为 stopifnot() 的条件替换

> ID：10933671
> 
> 赞同：7
> 
> 时间：2012-06-07T14:16:43.583
> 
> 标签：r, function

R 中是否有无操作函数，即使参数的评估成本很高，它也会立即返回？我正在寻找该`stopifnot`功能的有条件替换。

```
> noop(runif(1e20))
# returns immediately and uses no memory 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T14:20:14.530

我认为这样做可以：

```
noop <- function(...) invisible(NULL) 
```

懒惰的评估在这里拯救了：

```
R> system.time(replicate(1e4, noop(runif(1e2))))
   user  system elapsed 
   0.01    0.00    0.01 
R> system.time(replicate(1e4, noop(runif(1e5))))
   user  system elapsed 
   0.01    0.00    0.02 
R> system.time(replicate(1e4, noop(runif(1e8))))
   user  system elapsed 
   0.01    0.00    0.01 
R> system.time(replicate(1e4, noop(runif(1e11))))
   user  system elapsed 
   0.01    0.00    0.01 
R> 
```

所以即使我们增加 N 也看不到运行时间增加。

# android - 计算按下按钮的数量

> ID：10933672
> 
> 赞同：2
> 
> 时间：2012-06-07T14:16:44.997
> 
> 标签：android, events, button, onclick, keyevent

其实这个问题`extends` [这个。](https://stackoverflow.com/questions/6287116/android-registering-a-headset-button-click-with-broadcastreceiver)

我想从我的耳机计算我按下按钮的数量。

```
if(action == KeyEvent.ACTION_DOWN) 
    {
        Toast.makeText(context, "Pressed 1 time", Toast.LENGTH_SHORT).show();
    }
    if(action == KeyEvent.ACTION_MULTIPLE)
    {
        k = event.getRepeatCount();
        if(k == 2)
            Toast.makeText(context, "Pressed 2 times", Toast.LENGTH_SHORT).show();
        if(k == 3)
            Toast.makeText(context, "Pressed 3 times", Toast.LENGTH_SHORT).show();
        if(k>=4)
        {
            String a = Integer.toString(k);
            Toast.makeText(context, "Pressed " + a + " times.", Toast.LENGTH_SHORT).show();
        }
    } 
```

但是当我按下按钮时，我得到 Toast “Pressed 1 time”。我总是明白，系统从不进入其他`if`s。

我该如何解决这个问题？

谢谢

**添加** 仍然无法解决这个问题。这就是我所做的：

```
 if(action == KeyEvent.ACTION_DOWN) 
    {
        k++;
        try 
        {
            wait(1000);
        } catch (InterruptedException e) 
        {
            e.printStackTrace();
        }
    }
        if(k == 1)
            Toast.makeText(context, "Pressed 1 time", Toast.LENGTH_SHORT).show();
        if(k == 2)
            Toast.makeText(context, "Pressed 2 times", Toast.LENGTH_SHORT).show();
        if(k == 3)
            Toast.makeText(context, "Pressed 3 times", Toast.LENGTH_SHORT).show();
        if(k>=4)
        {
            String a = Integer.toString(k);
            Toast.makeText(context, "Pressed " + a + " times.", Toast.LENGTH_SHORT).show();
        }
        k = 0;
    abortBroadcast(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:23:12.573

“连续发生多个重复按键事件”是ACTION_MULTIPLE的定义，您只需按下一个按钮。

```
if(action == KeyEvent.ACTION_DOWN) 
{
    k++;
    Toast.makeText(context,  "Pressed " + Integer.toString(k) + " time(s).", Toast.LENGTH_SHORT).show();
} 
```

编辑：

哦，我知道你想双击下一首曲目或三击返回。我建议实现一个线程。在您的 KeyEvent.ACTION_DOWN 中计算按键次数。在您的线程中，假设调用 wait(500) 并检查您的按钮被按下了多少次并采取相应措施并将计数器设置回 0。

# c# - SelectLists 是否属于 viewModels？

> ID：10933674
> 
> 赞同：11
> 
> 时间：2012-06-07T14:17:08.443
> 
> 标签：c#, asp.net-mvc-3, viewmodel

在阅读了这个问题 [ASP.NET MVC: Nesting ViewModels within each other, antipattern or no?](https://stackoverflow.com/questions/5623414/asp-net-mvc-nesting-viewmodels-within-each-other-antipattern-or-no)

和德里克贝利的评论

> 我认为“考虑您的视图模型将是什么样的 xml 或 json”位可能是最重要的一点，在这里。我经常使用这种视角来帮助我理解视图模型应该是什么样子，并帮助我理解什么是“viewmodel”数据与“视图的 HTML 渲染中的数据”。有助于保持物品清洁并很好地分开它们 – Derick Bailey 2011-04-11 15:45:37

这让我想知道如何为带有数据绑定选择项的 ViewModel 创建一个视图。我真的很挣扎，因为我无法想象`SelectList`属于哪里。如果我从 JSON 或 XML 的角度考虑，那么它`SelectList`是仅查看的一部分。我想要的只是一个下拉列表，其中预先填充了一个值列表，供用户选择`Location` 让它在 ViewModel 中似乎是错误的，但是当我考虑将它移动到视图时，我不知道在哪里放置要提取的逻辑填充选择列表的数据库

```
public class SearchViewModel
{
    public int? page { get; set; }
    public int? size { get; set; }
    //Land Related search criteria        
    [IgnoreDataMember]
    public SelectList LocationSelection{ get; set; } 
```

## 更新

这是一个很好的问题和答案，它与 [C# mvc 3 using selectlist with selected value in view密切相关](https://stackoverflow.com/questions/4579598/c-sharp-mvc-3-using-selectlist-with-selected-value-in-view)

我已经测试了这个实现，它做了我想做的事情。我不会急于选择答案，因为我还没有完全审查这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:21:29.783

我会按照以下几行重构您的视图模型，因为我不认为选择列表应该属于视图模型：

```
public class SearchViewModel
{
    public int? page { get; set; }
    public int? size { get; set; }
    //Land Related search criteria        
    public IEnumerable<Location> LocationSelection{ get; set; }
} 
```

并在您的视图中，按如下方式填充 viewModel：

```
public ActionResult Search()
{
    var viewModel = new SearchViewModel()
    {
        viewModel.LocationSelection = _repository.All<Location>()
    };

    // any other logic here or in service class
    return View(viewModel);
} 
```

然后在您看来，您将使用 html.dropdownlist 助手来显示您的项目。为我工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:24:18.283

我尽量避免使用 SelectList，因为它们似乎不太适合 MVC 模型。`IEnumerable`相反，我创建了助手来从模型中的类型生成我的 HTML 元素。我认为这维护了将纯数据保留在模型中的一般规则，以及视图中的显示逻辑。

但这只是我个人的看法。我认为为了在视图中显示数据的明确目的而创建 SelectLists 是愚蠢的。

# c# - 处理了 ProtocolException，最大字符串内容长度配额 8192

> ID：10933675
> 
> 赞同：0
> 
> 时间：2012-06-07T14:17:13.263
> 
> 标签：c#, wcf

我有一个 C# WCF 服务和一个 C# 控制台应用程序，并希望将一个大文件从应用程序传递到 WCF。当我传递字符串时，我得到了协议异常，超出了最大字符串内容长度配额（8192），这是正确的。我将 Apps.Config 中 ReaderQuotas 上的 MaxStringContentLength 更改为大量但没有任何反应，它仍然出错。有谁知道为什么？我需要在 web.config 中添加一些东西吗？我的文件内容如下：-

**网页配置**

```
<?xml version="1.0"?>
<configuration>
<system.web>
    <compilation debug="true" targetFramework="4.0"/>
</system.web>
<system.serviceModel>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
</system.serviceModel>
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
</system.webServer>
</configuration> 
```

**应用程序配置**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="88192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
          <binding name="largeStrings" openTimeout="00:02:00" sendTimeout="00:02:00"
              maxBufferSize="524288" maxReceivedMessageSize="524288">
            <readerQuotas maxDepth="10" maxStringContentLength="524288" maxArrayLength="16384"
             maxBytesPerRead="4096" maxNameTableCharCount="16384" />
          </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:2745/ActuristDemo/Service.svc"
            binding="basicHttpBinding" bindingConfiguration="largeStrings"
            contract="ActuristWS.IService" name="largeStrings" />
    </client>
</system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T11:00:54.407

[http://social.msdn.microsoft.com/Forums/eu/wcf/thread/77097d1f-372a-4c7d-910f-57c9ecd9c5c1](http://social.msdn.microsoft.com/Forums/eu/wcf/thread/77097d1f-372a-4c7d-910f-57c9ecd9c5c1)

给了我我想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:28:41.830

当您将大字符串从客户端发送到服务时，您需要增加服务配置（即 web.config）中的限制。例子：

```
<system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="customHttpBinding" maxBufferSize="2147483647"
        maxReceivedMessageSize="2147483647" />
    <binding name="BasicHttpBinding_IMyWebService" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
        maxBufferSize="2147483647" maxBufferPoolSize="524288" maxReceivedMessageSize="2147483647"
        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
        useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="None">
        <transport clientCredentialType="None" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
  </basicHttpBinding>
</bindings>
<services>
  <service name="MyService.MyWcfService">
    <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IMyWebService"
        contract="MyService.IMyWebService" />
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost/MyService/MyWcfService/" />
      </baseAddresses>
    </host>
  </service>
</services> 
```

# iphone - 用于调整图像大小和重命名图像 AppleScript 的脚本

> ID：10933677
> 
> 赞同：4
> 
> 时间：2012-06-07T14:17:15.490
> 
> 标签：iphone, applescript

我厌倦了不断地创建图像，然后必须复制、调整大小和重命名以支持视网膜和非视网膜 iphone。如果您只是将图像拖到脚本中，是否可以有一个自动执行此操作的脚本？

原始图像将被称为：image@2x.png... 我希望脚本将其缩小 50% 并删除最后的“@2x”。

提前致谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T14:43:16.343

我在 Automator 中做什么 - 另存为应用程序

复制图像，删除@2x，缩小

[http://new.tinygrab.com/9e397aa2b95f4d2e746e1f5a750eacece89a94dc1b.png](http://new.tinygrab.com/9e397aa2b95f4d2e746e1f5a750eacece89a94dc1b.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T15:16:45.480

Here's an applescript way. Save this code as an application. You can then 1) drop images on it or 2) double-click it and choose a file. It has code to verify that the dropped file has @2x in its name. If so it scales it and if not nothing happens. I see you already have a solution but I wanted to show applescript has the application "Image Events" which can easily scale an image. Good luck.

```
property theSeparator : "@2x"
property scaleFactor : 0.5

on run
    set f to choose file
    processTheFiles({f})
end run

on open theFiles
    processTheFiles(theFiles)
end open

on processTheFiles(theFiles)
    tell application "Image Events" to launch
    repeat with f in theFiles
        set thisFile to f as text
        if thisFile contains theSeparator then
            set savePath to text 1 thru -8 of thisFile & text -4 thru -1 of thisFile
            tell application "Image Events"
                set a to open f
                scale a by factor scaleFactor
                save a in savePath
            end tell
            delay 0.2
        end if
    end repeat
    tell application "Image Events" to quit
end processTheFiles 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T09:44:40.850

请注意，所有这些方法（包括这一方法）都忽略了必须手动完成的[像素拟合。](http://dcurt.is/pixel-fitting)

谷歌搜索提出了这个[Bash 脚本](http://blog.semisecretsoftware.com/streamlining-iphone-asset-conversion-and-resi)，它需要安装 ImageMagick（通过 MacPorts），但具有将图像锐化一个像素的优势（或多或少，如果您愿意）。

这是为了您的方便（此脚本从命令行获取一系列文件名）：

```
#!/bin/sh  

IMAGES=$@  

RADIUS='1'  
SIGMA='0.0'  
FILTER=Catrom  

for image in $IMAGES  
do  
    /opt/local/bin/convert $image -sharpen ${RADIUS}x${SIGMA} -filter ${FILTER} -resize 50% `basename -s @2x.png $image`.png  
done 
```

它是从我链接的原始版本修改的，不需要修改你的`$PATH`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-17T10:22:12.680

这是一种替代方法，它*确实*允许进行[像素拟合](http://dcurt.is/pixel-fitting)，并且还为您节省了在所有图像上运行脚本的额外步骤；更好的结果和更好的工作流程！

先决条件是您使用 Adob​​e Fireworks 制作或导出图形。

[我的 iOS Fireworks 扩展脚本将命令添加到 Fireworks 命令菜单，以将您的视网膜图形或应用程序图标调整为适当的大小，并为您打开导出对话框。安装说明在 README 中。](https://github.com/iliaskarim/fireworks-iOS-ext)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-08T20:35:01.937

对于仍在寻找脚本的任何人：

我编写了这个 python 脚本，你可以在 github 上找到它：[img-asset-creator](https://github.com/Ix76y/img-asset-creator "img 资产创建者")。该脚本可以为 iOS 和 Android 创建图像资产。您唯一需要的是`python3`安装并让事情变得更容易`pip`。我写这个脚本的原因主要是因为我想同时缩放多个图像，而不必依赖互联网连接。

例如，如果您有一个像**pineapple.jpg**这样的图像，并且您希望它在所有三种尺寸中都适用于**iOS**，其中最大的**尺寸**为**1200 像素**，您可以运行以下命令：

```
python3 imgasset.py -iOS -w 1200 pineapple.jpg 
```

该脚本目前不支持缩小 procentual，但我会尽快添加。

# javascript - 尝试再次解释 jQuery - 如何暂停视频播放？

> ID：10933679
> 
> 赞同：0
> 
> 时间：2012-06-07T14:17:37.113
> 
> 标签：javascript, jquery, flash

好的，我正在尝试修改一些已经编写好的 jQuery - 作为背景，我对 Javascript 相当了解，但我对 jQuery 的了解只是马马虎虎。我对这段代码的理解是有一个滚动条，每6秒就会改变一次。我不确定这里是否有任何视频特定代码 - 现在滚动条在其中一个窗格上嵌入了一个视频，点击它。

我想要做的是设置一个图像（目前在里面`<div class=vid>`，未显示），当它被点击时，它将停止平移，直到底部的一个按钮被点击，它也会播放一个 flash 视频.

这是代码：

```
<script type="text/javascript">
    jQuery(document).ready(function() {

    var scroll_item = jQuery("#chained").scrollable({circular: true, mousewheel: false}).navigator().autoscroll({
            interval: 6000,
            autoplay: false,
            autopause: false
        }); 
    window.scroll_control = scroll_item.data("scrollable");

    scroll_control.play();

    var $playBtn =  $('#p-p-btn');

        $playBtn.click(function(){
            if($(this).hasClass('play')){
                $(this).addClass('pause');
                $(this).removeClass('play');
                scroll_control.play();
            } else if($(this).hasClass('pause')) {
                $(this).addClass('play');
                $(this).removeClass('pause');
                scroll_control.stop();
            };
                                }); 

        jQuery('#chained').hover(
            function() { scroll_control.stop(); },
            function() {
                if ($playBtn.hasClass('pause')) {
                    scroll_control.play();
                    }
                }
            );

    });
</script> 
```

我相信我所要做的就是添加一个条件来确定图像是否被点击（它在`<div class=vid>`我相信我所要做“播放/关闭按钮？），它还将启动具有自动播放设置的视频。

这听起来准确吗？

我将如何关闭平移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:50:59.910

我不完全理解代码，因为我不知道整个上下文。但是尝试将其添加到您的文档中：

```
$("#YOURIMAGEID").bind("click",function(){
          scroll_control.stop();
          $('#p-p-btn').addClass('play');
          $('#p-p-btn').removeClass('pause');
         //other logic
}); 
```

# xcode4 - Xcode。如何自定义控制台日志记录输出

> ID：10933684
> 
> 赞同：2
> 
> 时间：2012-06-07T14:18:02.527
> 
> 标签：xcode4

在 Xcode 中，当我进行 NSLog 操作时，我宁愿在控制台输出中得到很多额外的杂物。这是一个典型的例子：

`2012-06-07 10:07:26.046 IGV[13066:707] -[RootScrollView layoutSubviews] [Line 79] ratios - right 0.997 chrEnd 1.233\. ThresholdLeft`

我该如何消除`2012-06-07 10:07:26.046 IGV[13066:707]`？

谢谢，
道格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:28:44.197

您可以使用 printf() 而不是 NSLog 来控制打印到控制台的整个字符串。

例如

```
float right = 0.997;
float chrEnd = 1.233;

printf("ratios - right %f chrEnd %f.", right, chrEnd); 
```

会给你类似于你想要的东西。

# vbscript - 我将如何正确模拟鼠标设备？

> ID：10933696
> 
> 赞同：0
> 
> 时间：2012-06-07T14:18:39.840
> 
> 标签：vbscript, mouse, wdk

我有一个设备模拟框架 vbscript 文件，用于创建模拟的 USB 鼠标设备，但我有一个问题：如何在所有鼠标设备完成之前为特定的 USB 鼠标设备传递 x,y 而不结束脚本？我考虑了一下，可以使用具有 x,y 值的文件，但这可能会减慢接收响应的速度，或者担心无法实时处理。一个例子是我在第一个循环期间为设备 0 发送 3,3，然后为设备 0 发送 4,4，然后为设备 0 发送 4,4。我很难过如何做到这一点。

有人有想法么？参考代码在这里： http: [//kinectmultipoint.codeplex.com](http://kinectmultipoint.codeplex.com) 我只需要正确组织代码，但我会在等待响应的同时尝试文件的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:08:29.487

我刚刚用 kinect 实现了我的鼠标程序，现在我找到了答案。请访问上面的链接以下载代码，它不是直接下载链接，您需要从顶部导航栏中选择下载并转到正确的下载。

如果您希望帮助我改进代码，我已经开始将 kinect 和 vbscript 文件组合在一起，进展良好，但需要成功的两人 kinect 测试。我在 vbscript 中使用命令行参数来传递带有鼠标数据的参数。可能在未来的研究中制作一个模拟的多鼠标驱动程序，因为我不喜欢使用 vbscript。

# sql - 我可以在 sqlserver containsregex 中进行转换吗？

> ID：10933698
> 
> 赞同：0
> 
> 时间：2012-06-07T14:18:44.627
> 
> 标签：sql, sql-server

我正在为 mssql 使用较旧的 PHP 驱动程序，并尝试使用 ContainsRegExp 命令过滤掉结果。问题是我要比较的字段是 ntext ，它会导致查询失败。是否可以在 ContainsRegExp 命令中进行强制转换，例如：

```
... AND Field1.ContainsRegExp(CAST(Field1 AS TEXT) AS Field1Test,\'html\')=1'; 
```

完整的查询语句：

```
'SELECT ReportID, ReportDate, CAST(ReportData AS TEXT) AS TextData FROM Database WHERE ReportData.ContainsRegExp(CAST(ReportData AS TEXT),\'html\')=1'; 
```

我看到的错误是：

```
message: Cannot call methods on ntext. (severity 15) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:34:32.060

ContainsRegExp 不是标准的 SQL Server 命令。所以我不太确定你是如何得出那个声明的，但它不是 T-SQL。

我的猜测是，在某处类似的命令已用于 CLR 类型 - 因为您使用的语法 ( `Field.Operation()`) 用于调用 CLR 类型的方法。

# iphone - 寻找一种在 iPhone 应用程序中显示 Google Adsense 的方法

> ID：10933699
> 
> 赞同：0
> 
> 时间：2012-06-07T14:18:46.777
> 
> 标签：iphone, admob, adsense

我的客户在他的数据库中保存了很多 Google Adsense javascript，并显示在他的网站上。现在他想在他的 iPhone 应用程序中显示这些 javascripts 广告。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:28:19.827

由于 Google Adsense 主要用于网站，我认为更好的方法可能是实现您网站的移动版本。我不确定它会是什么样子，因为大多数 adsense JavaScript 都配置为显示在网站上而不是移动网站上。

# actionscript-3 - 绕点扫射

> ID：10933703
> 
> 赞同：1
> 
> 时间：2012-06-07T14:19:00.883
> 
> 标签：actionscript-3, math, trigonometry

这似乎是一个简单的触发问题，但无论出于何种原因，事情都没有解决。

我试图简单地让一个对象在用户按下 A/D 键时围绕给定点旋转（以圆周运动在鼠标周围扫射，同时仍面向鼠标）。

**这是我到目前为止尝试过的代码（所有数学函数都采用并返回弧度）：**

```
if (_inputRef.isKeyDown(GameData.KEY_LEFT))
{
    x += 2 * Math.cos(Math.atan2(mouseY - y, mouseX - x) - Math.PI * 0.5);
    y += 2 * Math.sin(Math.atan2(mouseY - y, mouseX - x) - Math.PI * 0.5);
}
else if (_inputRef.isKeyDown(GameData.KEY_RIGHT))
{
    x += 2 * Math.cos(Math.atan2(mouseY - y, mouseX - x) + Math.PI * 0.5);
    y += 2 * Math.sin(Math.atan2(mouseY - y, mouseX - x) + Math.PI * 0.5);
} 
```

**还有一个更优雅的方法可以完成同样的事情：**

```
if (_inputRef.isKeyDown(GameData.KEY_LEFT))
{
    x += 2 * Math.sin(Math.atan2(mouseY - y, mouseX - x));
    y -= 2 * Math.cos(Math.atan2(mouseY - y, mouseX - x));
}
else if (_inputRef.isKeyDown(GameData.KEY_RIGHT))
{
    x -= 2 * Math.sin(Math.atan2(mouseY - y, mouseX - x));
    y += 2 * Math.cos(Math.atan2(mouseY - y, mouseX - x));
} 
```

现在，它们都起作用了，对象围绕鼠标旋转，同时始终面向鼠标，但是如果有足够的时间按住 strafe 按钮，对象也在**远离**鼠标旋转变得越来越明显，就好像它是推开。

我不知道为什么会这样以及如何解决它。

任何见解表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:56:57.487

我认为你目前的方法只有在你采取“无限小”的步骤时才会奏效。就像现在一样，每次移动都垂直于“到鼠标矢量”，从而增加了鼠标和对象之间的距离。

一种解决方案是通过围绕鼠标旋转位置来计算新位置，同时保持与鼠标的距离不变：

```
// position relative to mouse
var position:Point = new Point(
    x - mouseX,
    y - mouseY);

var r:Number = position.length; // distance to mouse

// get rotation angle around mouse that moves
// us "SPEED" unit in world space
var a:Number = 0;
if (/* LEFT  PRESSED */) a = getRotationAngle( SPEED, r);
if (/* RIGHT PRESSED */) a = getRotationAngle(-SPEED, r);
if (a > 0) {

    // rotate position around mouse
    var rotation:Matrix = new Matrix();
    rotation.rotate(a);
    position = rotation.transformPoint(position);
    position.offset(mouseX, mouseY);

    x = position.x;
    y = position.y;
}

// elsewhere...

// speed is the distance to cover in world space, in a straight line.
// radius is the distance from the unit to the mouse, when rotating.
private static function getRotationAngle(speed:Number, radius:Number):Number {
    return 2 * Math.asin(speed / (2 * radius));
} 
```

上面使用 a围绕鼠标位置`Matrix`旋转`(x, y)`位置。当然，如果需要，您可以在不使用的情况下应用相同的原理`Matrix`。

我必须做一些三角操作才能得出正确的方程式来获得正确的角度。该角度取决于运动弧的半径，因为较大的半径但恒定的角度会增加运动距离（不良行为）。我早期的解决方案（在编辑之前）是按半径缩放角度，但这仍然会导致半径较大的运动稍微多一些。

当前的方法确保半径和速度在所有情况下都保持不变。

# c# - 在 wpf 中调试拖放？

> ID：10933704
> 
> 赞同：3
> 
> 时间：2012-06-07T14:19:01.057
> 
> 标签：c#, wpf

我在我的应用程序中进行了拖放操作。但是，我遇到了一个问题，我无法弄清楚是什么原因造成的......

基本上，我有两个 itemsControl，我可以在它们之间启用拖放。当用户拖动项目时，我创建了一个拖动装饰器，然后在控件上进行拖放预览。

在某些情况下，当拖动装饰器从源移动到下一个 itemsControl（即将发生放置的目标 itemsControl）...拖动源上的 OnPreviewDragLeave() 方法没有被调用！

所以拖动装饰器只是卡在源 itemsControl 的顶部。这仅在某些情况下发生，我唯一能想到的是其他一些元素正在将 e.Handled 设置为 true 也许？但是，当这些事件连续触发并且设置断点并不是一个真正的选择时，我怎样才能以一种简单的方式有效地调试它......

任何建议表示赞赏，谢谢

# javascript - 如何使 scale() 函数成为重中之重？

> ID：10933706
> 
> 赞同：1
> 
> 时间：2012-06-07T14:19:09.857
> 
> 标签：javascript, android, html, canvas, scaling

我正在尝试制作一个程序，该程序从一些计算中收集到的信息并将其绘制在画布图上。但是，我需要缩放图表，以便它可以容纳更大的数字。但是每次我把`ctx.scale();`整个画布空白都拿出来！我想我可以通过先缩放画布来阻止这种情况，但是缩放后画布上什么也没有画。

这是我的画布的编码：

```
var c=document.getElementById("graph_");
        var ctx=c.getContext("2d");
        graph_.style.backgroundColor="white";
        var z0=Math.max(Math.abs(a),Math.abs(b));
        var z=Math.round(z0);           
        var z1=Math.round(z);
        var z2=z*2
        // alert(z1);   
        // alert(z2);

        ctx.scale(3200/z,3200/z)    

        var xnew=360/2+360/2*a
        var ynew=360/2-360/2*b
        alert(xnew);    
        alert(ynew);

        ctx.font = '10px Calibri';
        ctx.fillText("( 0 , 0 )", 125, 85);
        ctx.fillText(z1, 210, 87);
        ctx.fillText(z2, 270, 87);

        ctx.fillText(z1*-1, 75, 87);
        ctx.fillText(z2*-1, 0, 87);

        ctx.fillText(z1, 120, 43.5);
        ctx.fillText(z2, 120, 10);

        ctx.fillText(z1*-1, 120, 120);
        ctx.fillText(z2*-1, 120, 145);

        ctx.lineWidth = 1;
        ctx.beginPath()
        ctx.moveTo(150, 0);
        ctx.lineTo(150, 400);
        ctx.closePath();

        ctx.lineWidth = .2;
        ctx.moveTo(0, 75);
        ctx.lineTo(400, 75);
        ctx.strokeStyle = "#8B8682";
        ctx.stroke();
        ctx.closePath();

          ctx.beginPath();
          ctx.lineWidth = 2;
          ctx.moveTo(xnew, 180);
          ctx.lineTo(180, ynew);
          ctx.strokeStyle = "red";
          ctx.stroke(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:42:56.950

实际上，这些东西正在被绘制到画布上，你只是看不到它，因为你放大得太远并且仍然在图表的左上角，因为绘图的默认原点在左上角0,0。

因此，如果您想放大那么远（即使您可能想缩小以显示更大的数字，即图形上更大的图纸），您需要将画布原点转换为您的新原点（您的左上角）想看）在你缩放上下文之前。

您可以使用 translate 方法，例如

```
ctx.translate(newX,newY); 
```

但在您这样做之前，您将要保存上下文的状态，以便您可以恢复到它。

假设您想放大图形的中心，您将转换为以下点：

```
ctx.translate((-c.width /2 * scale) + offsetX,(-c.height / 2 * scale) + offsetY); 
```

where the offsetX is the canvas width / 2 and offsetY is the canvas height / 2 and the scale is by the amount that you're scaling in you ctx.scale call.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:45:06.897

的值`3200/z`究竟是多少？

我猜你正在大量缩放画布，以至于屏幕上唯一可见的东西就是画布的前几个像素。由于您没有在屏幕左上角的 5 个像素中绘制任何内容，因此您什么也看不到。

# spring - Spring 2.5 MVC：Bean 名称“EmpPersonalBean”的BindingResult 或普通目标对象可用作请求属性

> ID：10933707
> 
> 赞同：0
> 
> 时间：2012-06-07T14:19:17.243
> 
> 标签：spring, spring-mvc

当使用 Spring MVC、JDBC（版本 2.5）在应用程序中成功登录时，出现错误“Bean name 'EmpPersonalBean' 的 BindingResult 或普通目标对象可用作请求属性”。我将 loginpage 转发到 jsp/UserPage.jsp

我的文件夹结构是

```
WEB-ROOT      
  |__JSP  (folder)            
      |__user   (sub folder)                    
           |_userdashboardpage.jsp      
  |__loginpage.jsp  (In Webroot)    
  |__web.xml 
```

控制器：用户控制器类

在这个控制器中调用 onsubmit 方法成功后我重定向了页面。检查下面的代码片段

```
public ModelAndView onSubmit(HttpServletRequest request, HttpServletResponse response,Object command,BindException errors) throws Exception {       
         String username="",password="";
         username=request.getParameter("username");
         password=request.getParameter("password");
        UserBean ubean=null;
        HttpSession session=request.getSession(true);
         try{
             ubean=userservice.chkUsername(username,password);
             System.out.println("Information"+ubean.getUsername());
             }catch(DataException ex){
             ex.printStackTrace();

             //throw ex;
              }
        session.setAttribute("User",ubean);
        ModelAndView mv=new ModelAndView(("forward:jsp/UserPage.jsp"));
        return  mv;
    } 
```

在 UserPage.jsp

```
<%@ page language="java" import="com.aims.bean.*" contentType="text/html;charset=utf-8" pageEncoding="UTF-8"%>
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form" %>
<%@taglib uri="http://www.springframework.org/tags" prefix="spring" %>
<%@taglib uri="/WEB-INF/tld/c.tld" prefix="c" %>
<html>
<head>
<title>AAI</title>
</head>
<body>
<form:form method="post" modelAttribute="EmpPersonalBean" action="userpage.htm">
<table>
<tr>
    <td>Welcome <%=((UserBean)session.getAttribute("User")).getUsername()%></td>
</tr>
<tr>
        <tr>
        <td>Department</td>
        <td><form:select path="deparment">
                      <form:option value="NONE" label="--- Select ---" />
                      <form:options items="${deparmentList}" />
                       </form:select>
        </td>
    </tr>
</tr>
</table>
</form:form>
</body>
</html> 
```

在用户页面中，尝试使用 UserDBBoardController 中的 referenceData 方法加载部门列表。

```
public class UserDBBoardController  extends SimpleFormController{
    private static final Log log=new Log(UserDBBoardController.class);
    private UserService userservice;
    public void setUserservice(UserService userservice) {
        this.userservice = userservice;
    }
    public UserDBBoardController(){
        setCommandClass(EmpPersonalBean.class);
        setCommandName("EmpPersonalBean");

    }
    protected Map referenceData(HttpServletRequest request) throws Exception {
        log.info("UserDBBoardController======================referenceData");
        Map referenceData = new HashMap();
        Map deparementList=new HashMap();
        deparementList=userservice.getDeparmentList();
        referenceData.put("deparmentList",deparementList);
        return referenceData;

    }
} 
```

调度程序 Servlet.xml:-

```
<?xml version="1.0" encoding="UTF-8"?>
                <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props><prop key="/loginpage.htm">UserController</prop>
        <prop key="/userpage.htm">UserDBBoardController</prop></props>
    </property>
    </bean>
    <import resource="application-context.xml"/>
    <bean id="User" class="com.aims.bean.UserBean" scope="session" />
    <bean id="UserController" class="com.epis.controllers.UserController"  >
    <property name="userservice" ref="userservice"/>
    <property name="sessionForm"><value>true</value></property>
    <property name="commandName"><value>UserBean</value></property>
    <property name="commandClass"><value>com.aims.bean.UserBean</value></property>
    <property name="validator"><ref bean="userformValidator"/></property> 
    <property name="formView"><value>loginpage</value></property>
    <property name="successView"><value>UserPage</value></property>
    </bean>
    <bean id="UserDBBoardController" class="com.epis.controllers.UserDBBoardController"  >
    <property name="userservice" ref="userservice"/>
    <property name="sessionForm"><value>true</value></property>
    <property name="commandName"><value>EmpPersonalBean</value></property>
    <property name="commandClass"><value>com.aims.bean.EmpPersonalBean</value></property>

    </bean> 
```

此错误消息来自加载用户页面中的部门列表？如何解决此问题？请帮助。

另一个疑惑是为什么spring MVC提供了太多类型的控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:44:13.220

尝试对同样接受模型名称和模型对象的 ModelAndView 使用此构造函数。 [http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/ModelAndView.html#ModelAndView(java.lang.String, java.lang.String, java.lang.目的）](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/web/servlet/ModelAndView.html#ModelAndView%28java.lang.String,%20java.lang.String,%20java.lang.Object%29)

# php - 在运行 jquery 循环的 div 之外更改图像 src

> ID：10933710
> 
> 赞同：0
> 
> 时间：2012-06-07T14:19:24.123
> 
> 标签：php, javascript, jquery, wordpress, cycle

我正在使用带有循环插件的 jQuery 构建一个 wordpress 网站，以循环浏览一些帖子。

我有一个用作完整背景的图像，带有这个 css：

```
 img.bg {
        /* Set rules to fill background */
        min-height: 100%;
        min-width: 1024px;

        /* Set up proportionate scaling */
        width: 100%;
        height: auto;

        /* Set up positioning */
        position: fixed;
        top: 0;
        left: 0;
    }

    @media screen and (max-width: 1024px){
        img.bg {
            left: 50%;
            margin-left: -512px; }
    } 
```

我已使用循环中的 javascript 将第一个图像附件 url 插入到 img.bg 中。但是，可以理解的是，这仅在页面加载时有效。

这是javascript：

```
$(function () {
$('.bg').attr('src', '<?php get_image_url(); ?>');
}); 
```

我想我需要的是在循环脚本的每次迭代中触发脚本，因为源代码显示 get_image_url() 函数在每个文章 div 中为脚本提供了唯一的 url。最后，我什至想要一些导航按钮来回移动，同时切换帖子和背景。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:54:18.327

至于现在，我使用`$(".bg").prependTo(document.body);`从文章 div 中获取背景图片，然后开始循环。这是可行的，尽管可能会出现更多问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:25:52.007

您可以使用`cycle`的下一次迭代函数或使用`setInterval`.

```
function changeImg()
{
    $('.bg').attr('src', '<?php get_image_url(); ?>');
}
setInterval("changeImg()", 1000); 
```

希望这可以帮助。但是，当您执行`get_image_url();`.

# macos - 如何使用 cocoa 或 applescript 打开、关闭和关闭另一个应用程序的对话框？

> ID：10933711
> 
> 赞同：1
> 
> 时间：2012-06-07T14:19:36.143
> 
> 标签：macos, cocoa, applescript

我想打开另一个单独的应用程序，以迭代方式打开该应用程序的项目/文档，然后关闭该应用程序。我还想关闭在打开文档期间弹出的所有模态和非模态对话框。我想关闭所有对话框，包括崩溃对话框，以防应用程序失败/崩溃。

使用可可或苹果脚本来实现这一目标的最佳方法是什么，我可以从哪里获得更详细的信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:04:30.353

If the app has a scripting interface, of course the best way is to do that.

You generally don't want to iterate in AppleScript, but rather to operate on all of the results of a query.

For example, for almost any application that implements the "standard suite", you can just:

```
tell app "TextEdit" to close windows 
```

This is much simpler (and faster, and more likely to be implemented correctly in the target app) than:

```
tell app "TextEdit"
  repeat with theWindow in windows
    close theWindow
  end repeat
end tell 
```

Of course this may pop up save/abandon changes dialogs, and it may skip over or include dialogs and inspectors, and so on, depending on the application's user model.

More importantly, it won't work if the app doesn't support scripting (and the standard suite).

Also, it won't help at all with closing a crash report—that window is owned by CrashReporter, not the original application (which is a good thing, because you can't talk to the original application anymore, now that it's crashed…).

The alternative is the UI Scripting features in System Events. This will only work if assistive access is enabled. It can also be a bit fiddly to figure out which windows are the ones you want to deal with, and which controls are the ones you want.

For example:

```
tell app "System Events"
  click button 1 of windows of application process "TextEdit"
end tell 
```

This works by finding every window (no matter what kind) owned by the TextEdit process, and simulating a click on the first button in that window (the red close button).

If you google "AppleScript UI Scripting" you should find lots of different guides. The first hit I found was [http://www.makeuseof.com/tag/applescripts-ui-scripting-mac/](http://www.makeuseof.com/tag/applescripts-ui-scripting-mac/) and it looks like a decent place to start.

# php - Codeigniter 2.1 - 删除部分 uri

> ID：10933713
> 
> 赞同：0
> 
> 时间：2012-06-07T14:19:46.303
> 
> 标签：php, codeigniter

我有标准类型的uri：

```
www.example.com/controler/function/id 
```

如何从 url 中删除 id 部分（它始终是一个数字）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:43:25.700

如果你的 ID 真的很糟糕，你*可以*使用 History API 来隐藏它：

```
if(history.replaceState) {
    history.replaceState(null, '', 'http://www.example.com/controller/function');
} 
```

它不适用于较旧的浏览器，但如果它仅用于美学目的（并且这些最好是重要的；否则，不要这样做！）那么它应该没问题。

# c# - LightSwitch -- 无法确定目标数据库模式提供程序

> ID：10933717
> 
> 赞同：5
> 
> 时间：2012-06-07T14:19:59.370
> 
> 标签：c#, visual-studio-lightswitch

在 Visual Studio 2010 中，我创建了一个新的 LightSwitch 项目。

在“从数据开始”屏幕上，我单击“创建新表”链接。

我命名并添加了几列，添加了一个表单，然后运行项目，我得到了这个异常：

> 为应用程序构建数据库时发生异常。无法确定目标数据库架构提供程序。部署无法继续。
> 
> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\LightSwitch\v1.0\Microsoft.LightSwitch.targets

看似简单却行不通。

如何指定目标数据库架构或解决此错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-13T14:06:30.820

您使用的是什么版本的 SQL Server？
我见过人们对 SQL Server 2012 (Denali) 有这个问题。

您可以尝试使用 SQL Server Express 2008 或 2008 R2 吗？

您可以安装多个 SQL Server Express 实例，但只能运行一个。

确保您的 SQL Express 实例启用了 LightSwitch 所需的**用户实例：**

1.  打开 SQL Server 管理工作室。
2.  连接 SQL Express 实例。
3.  在查询编辑器中输入：**exec sp_configure 'user instances enabled', 1**
4.  然后输入：**重新配置**
5.  然后重新启动 SQL Server 数据库。

如何更改数据库：

1.  打开 Visual Studio LightSwitch
2.  选择**工具 -> 选项**菜单项
3.  在选项对话框中启用**显示所有设置**复选框
4.  展开数据库工具组并选择**数据连接** 选项页面
5.  检查选项**SQL Server 实例名称的设置（默认为空白）**

有关此主题的更多讨论，[请参阅本文。](http://social.msdn.microsoft.com/Forums/en-US/lightswitchgeneral/thread/de2e7ee5-fc82-4614-9245-4f4a9ae7185f)

# android - 如何通过单击按钮调用另一个项目（Android_elcipse）

> ID：10933719
> 
> 赞同：0
> 
> 时间：2012-06-07T14:20:03.333
> 
> 标签：android, eclipse

大家好，我正在通过 android 制作一个虚拟市场，我制作项目（MAP），（QR 扫描仪）但是如何将它们集成到一个应用程序中？我需要在布局中制作 2 个按钮，其中一个通过单击它来调用 QR 扫描仪，另一个也调用地图。

所以我应该分步做什么，拜托:)

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:42:01.360

转到这两个项目的项目属性并设置为 Is Library 项目，然后在 Is library 选项中转到您的最终项目属性添加这两个项目，然后您就可以访问这两个库项目的所有类和活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:27:02.907

您需要了解意图的概念。看看这些链接...

[http://developer.android.com/guide/topics/intents/intents-filters.html](http://developer.android.com/guide/topics/intents/intents-filters.html)

[http://ashwinrayaprolu.wordpress.com/2011/03/17/launching-different-applications-from-android-activity-using-intent/](http://ashwinrayaprolu.wordpress.com/2011/03/17/launching-different-applications-from-android-activity-using-intent/)

# reporting-services - 在 Windows 服务中使用 SSRS 报告

> ID：10933720
> 
> 赞同：1
> 
> 时间：2012-06-07T14:20:07.440
> 
> 标签：reporting-services, windows-services, ssrs-2008

我想在 Windows 服务中使用 SSRS 报告（用 C# 编写）。然后，该服务会将报告导出为 PDF 并将其写入磁盘。

这甚至可能吗？我是 SSRS 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:15:17.270

有趣的问题米克。我们已经完成了可以调用 SSRS 报告并将其导出为 PDF 的代码，但该代码位于 DLL 中。现在 Windows 服务也不例外，我建议您通过以下代码[http://sandeep-aparajit.blogspot.co.uk/2010/02/how-to-execute-and-save-ssrs-report.html](http://sandeep-aparajit.blogspot.co.uk/2010/02/how-to-execute-and-save-ssrs-report.html)和尝试相同。据我所知，它应该可以工作，您可能遇到的唯一问题可能是代码访问安全性，但值得一试。谢谢你给我一个想法的问题。

报告服务的 URL 取决于您使用的 SSRS 版本，但正如您所见，您可以轻松发现并更改它 http:///reportserver/reportservice2005.asmx 而不是 2005，您可能必须更改为 2008 或其他版本。

# sas - sas中的长数字阅读

> ID：10933725
> 
> 赞同：2
> 
> 时间：2012-06-07T14:20:36.850
> 
> 标签：sas

我有一个长 ID 号（例如，12184447992012111111）。通过从 csv 文件中使用 proc 导入，该数字通过在数字之间添加“E”来缩短自身（1.2184448E19，格式为 best12。和信息格式 best32。）。在这里浏览我知道 csv 格式本身会缩短它，所以它与 SAS 无关。所以我试着复制说大约 5 个数字并使用 datalines 语句然后结果也是一样的......如果有人能建议我需要使用哪种格式，那将会很有帮助。使用best32。格式我没有得到原始数字，因为它很可能会修改更改后的数字，这实际上给了我 12184447992012111872 这不是我想要的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:33:45.460

因为您的 ID 变量实际上是一个标识符而不是一个“真实”数字，所以您需要将其作为字符串读入。您作为示例显示的值太大而无法表示为整数，因此由于 SAS 将所有数字存储为浮点数，因此您正在失去“精度”。

由于您提到使用 PROC IMPORT，请复制它生成的 SAS 程序并从“21”更改 FORMAT 和 INFORMAT 规范。和“best32”。到“32 美元”。（或任何与您的数据匹配的值。

当然，如果您有 SAS Access to PC File 格式，最好的办法是在这种情况下，您可以在 Excel 中将该列格式化为“文本”，然后让 SAS 直接读取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:31:08.737

我不确定 csv 是否会更改值（它们只是纯文本文件） - 除非您将 excel 电子表格保存为 csv 文件。如果您使用的是 excel，只需将列设置为数字格式，没有小数位。

将列导入 SAS 时将其视为文本可能更容易 - 除非您需要对其执行数学运算！如果您确实需要将其保留为数字，则格式 32\. 应将其强制为 32 位数字 - 最好是相当明智地将其更改为科学记数法（尽管我怀疑数据在后台并且只是无益地显示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T15:46:11.680

有一个用于读取指数符号的 SAS 信息 - Ew.d 其中 w 是宽度，d 是小数位数。在您的情况下，它可能无济于事，因为您将“丢失”完整的数字 - 并且在您使用此信息读取的情况下存储的值将是 1.2184448 * (10^19)。在您的情况下，唯一的方法是确保生成 CSV 文件的程序以正确的方式输出它。如果您是从 Excel 工作表创建数据，则在 Excel 工作表中格式化数字以正确显示所有数字。

# ruby - Jekyll 挂起一个稍微修改过的 generate_categories.rb 插件版本

> ID：10933727
> 
> 赞同：0
> 
> 时间：2012-06-07T14:20:43.003
> 
> 标签：ruby, jekyll

我使用[此处](https://github.com/recurser/jekyll-plugins/blob/ef8e30b6f5e066f5e67fc596c7f698f3b7e54dfa/generate_categories.rb)`generate_categories.rb`的插件生成类别。但是，如果一个类别包含空格，我希望它的目录用下划线创建。

例如，应在目录“Metro_Design_Language”中创建一个名为“Metro Design Language”的类别。

我取了原始代码并修改了第 97 行，

从：

```
self.write_category_index(File.join(dir, category), category) 
```

至：

```
self.write_category_index(File.join(dir, category.gsub(' ','_')), category) 
```

但是，由于某种原因，现在 Jekyll 无法生成`_site`内容。在生成几个类别（及其索引）后，它会挂起。

我是 Ruby 和 Jekyll 的新手，所以对此的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T19:56:00.833

代码没有问题。

由于GitHub不允许插件的执行，请检查`categories`目录外是否有`_site`目录。如果有重复，Jekyll 似乎会挂起，因为底层用户权限可能没有覆盖/替换目录的权限。

删除`categories`目录外的`_site`目录后，一切正常。

# powershell - 即使在 Receive-Job 之后，“HasMoreData”也为真

> ID：10933732
> 
> 赞同：7
> 
> 时间：2012-06-07T14:21:00.577
> 
> 标签：powershell, jobs

我在 Powershell 中创建了一个简单的后台作业：

```
Start-Job {"Hello"} 
```

我检查 Get-Job：

```
 Id        Name         State         HasMoreData      Location       Command
    --        ----         -----         -----------      --------       -------
    1         Job1         Completed     True             localhost      "Hello" 
```

接下来，我只是接收输出，然后再次运行 Get-Job

```
Receive-Job 1
Get-Job 
```

我可以看到“HasMoreData”现在是假的，因为我没有指定`-keep`参数。

但是：似乎每当我开始工作时，而不是使用`Start-Job`or `Invoke-Command`，这个“HasMoreData”参数不会更改为 False。

例子：

```
Get-WMIObject win32_bios -AsJob
Test-Connection . -AsJob 
```

我可以绕过这个（错误的）行为，以便属性 HasMoreData 切换为 False，除非我指定`-keep`？

谢谢！

**更新**：它似乎适用于使用该`-AsJob`参数进行的所有调用。如果你跑

```
Start-Job {Test-Connection .} 
```

它有效（“HasMoreData”在之后变为 False `Receive-Job`），但是

```
Test-Connection . -AsJob 
```

才不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-18T00:57:56.043

简短的回答：

这是 PowerShell 2.0 中的一个错误。

这对 Blaine 来说很好用，因为他使用的是 PowerShell 3，我会花钱买它。

* * *

长答案：

**Start-Job** cmdlet 和**-AsJob**开关的工作方式不同。文档通常解释说**Start-Job**旨在在本地运行后台作业，而**-AsJob**旨在使用在远程计算机上运行但在本地创建作业对象的命令启动作业。虽然这通常是正确的，**但 -AsJob**也可用于在本地运行作业，并且根据命令，它有时甚至无法在远程计算机上运行命令。例如，使用**-AsJob**和**-ComputerName**调用的**Get-WMIObject**在指定的远程计算机上运行命令，而使用调用的**Test-Connection**********-AsJob**和**-Computername**在本地运行命令并 ping 指定的计算机。******

 ****我还看到了解释**Start-Job**由本地 IPC 工作的文档，而**-AsJob**连接到指定计算机的 WinRM 服务，即使它是 localhost，并且必须在本地和目标计算机上启用 PSRemoting (s)。同样，这并不是那么简单。我发现我*可以使用本地主机上的***-AsJob**开关运行作业，同时禁用 WinRM 和 PSRemoting。

在任何情况下，PowerShell 都会将作业作为两种 JobType（PSWmiJob 或 PSRemotingJob）之一启动。这是违反直觉的，因为在本地运行后台作业**的 Start-Job**总是创建一个 PSRemotingJob，而**-AsJob**通常创建一个 PSWmiJob，除非它与**Invoke-Command**一起使用，它总是启动一个 PSRemoting 作业，而不管命令是否在远程计算机或本地主机上调用。

看看下面的会话记录，我在其中以不同的方式创建了工作。我使用三个命令进行了测试：**Get-WMIObject ，当使用****-AsJob**和**ComputerName**调用时，它在远程计算机上运行；**Test-Connection ，在使用****-AsJob**调用时始终在本地运行（**-ComputerName**指定要 ping 哪台计算机，而不是在哪里运行命令）；和**Get-ChildItem**，它没有**-AsJob**参数。我在远程计算机和本地计算机上都使用**Start-Job**、**Invoke-Command -AsJob和本机****-AsJob**为每个人开始工作**开关（对于有它的命令）。**

 **`| %{$_.Name = '<the command preceding the pipe symbol>'}`每个命令末尾的的目的是将每个作业命名为创建它的命令，因此在输出中更容易看到哪个作业对应于每个命令。它对作业的操作没有影响，它只是在创建每个作业后立即将其重命名为更有意义的名称。

您将看到的是，在收到所有作业后（`rcjb * 2>&1|Out-Null`一次接收所有作业并抑制输出），PSRemotingJob 对象的 HasMoreData 属性设置为 False，无论它们是由**Start-Job**还是**-AsJob**创建的，但 HasMoreData 属性PSWmiJob 对象的数量保持为 True。除了我在这里复制的示例之外，我发现这始终适用。

```
07-17-13 19:44:56.30 C:\Users\ainbar» Invoke-Command -ComputerName . -ScriptBlock {Get-WMIObject win32_bios} -AsJob | %{$_.Name = 'Invoke-Command -ComputerName . -ScriptBlock {Get-WMIObject win32_bios} -AsJob'}
07-17-13 19:44:56.43 C:\Users\ainbar» Invoke-Command -ComputerName ai8460p -ScriptBlock {Get-WMIObject win32_bios} -AsJob | %{$_.Name = 'Invoke-Command -ComputerName ai8460p -ScriptBlock {Get-WMIObject win32_bios} -AsJob'}
07-17-13 19:44:56.46 C:\Users\ainbar» Start-Job -ScriptBlock {Test-Connection .} | %{$_.Name = 'Start-Job -ScriptBlock {Test-Connection .}'}
07-17-13 19:44:57.13 C:\Users\ainbar» Test-Connection . -AsJob | %{$_.Name = 'Test-Connection . -AsJob '}
07-17-13 19:44:57.14 C:\Users\ainbar» Invoke-Command -ComputerName . -ScriptBlock {Test-Connection .} -AsJob | %{$_.Name = 'Invoke-Command -ComputerName . -ScriptBlock {Test-Connection .}'}
07-17-13 19:44:57.18 C:\Users\ainbar» Invoke-Command -ComputerName ai8460p -ScriptBlock {Test-Connection .} -AsJob | %{$_.Name = 'Invoke-Command -ComputerName ai8460p -ScriptBlock {Test-Connection .} -AsJob'}
07-17-13 19:44:57.20 C:\Users\ainbar» Start-Job -ScriptBlock {Get-ChildItem C:\} | %{$_.Name = 'Start-Job -ScriptBlock {Get-ChildItem C:\}'}
07-17-13 19:44:57.80 C:\Users\ainbar» Invoke-Command -ComputerName . -ScriptBlock {Get-ChildItem C:\} -AsJob | %{$_.Name = 'Invoke-Command -ComputerName . -ScriptBlock {Get-ChildItem C:\} -AsJob'}
07-17-13 19:44:57.82 C:\Users\ainbar» Invoke-Command -ComputerName ai8460p -ScriptBlock {Get-ChildItem C:\} -AsJob | %{$_.Name = 'Invoke-Command -ComputerName ai8460p -ScriptBlock {Get-ChildItem C:\} -AsJob'}
07-17-13 19:44:57.84 C:\Users\ainbar» $fmt_gjb = 'Id','Name','Location',@{l="JobType";e={$_.GetType().name}},@{l='HasMoreData';e={"$($_.HasMoreData)"}},'State','Command'
07-17-13 19:46:21.36 C:\Users\ainbar» gjb|ft -a $fmt_gjb

Id Name                                                                                  Location  JobType       HasMoreData     State Command
-- ----                                                                                  --------  -------       -----------     ----- -------
 1 Start-Job -ScriptBlock {Get-WMIObject win32_bios}                                     localhost PSRemotingJob True        Completed Get-WMIObject win32_bios
 3 Get-WMIObject win32_bios -AsJob                                                       localhost PSWmiJob      True        Completed Get-WMIObject
 5 Get-WMIObject win32_bios -AsJob -ComputerName ai8460p                                 ai8460p   PSWmiJob      True        Completed Get-WMIObject
 7 Invoke-Command -ComputerName . -ScriptBlock {Get-WMIObject win32_bios} -AsJob         localhost PSRemotingJob True        Completed Get-WMIObject win32_bios
 9 Invoke-Command -ComputerName ai8460p -ScriptBlock {Get-WMIObject win32_bios} -AsJob   ai8460p   PSRemotingJob True        Completed Get-WMIObject win32_bios
11 Start-Job -ScriptBlock {Test-Connection .}                                            localhost PSRemotingJob True        Completed Test-Connection .
13 Test-Connection . -AsJob                                                              .         PSWmiJob      True        Completed Test-Connection
15 Invoke-Command -ComputerName . -ScriptBlock {Test-Connection .}                       localhost PSRemotingJob True        Completed Test-Connection .
17 Invoke-Command -ComputerName ai8460p -ScriptBlock {Test-Connection .} -AsJob          ai8460p   PSRemotingJob True        Completed Test-Connection .
19 Start-Job -ScriptBlock {Get-ChildItem C:\}                                            localhost PSRemotingJob True        Completed Get-ChildItem C:\
21 Invoke-Command -ComputerName . -ScriptBlock {Get-ChildItem C:\} -AsJob                localhost PSRemotingJob True        Completed Get-ChildItem C:\
23 Invoke-Command -ComputerName ai8460p   -ScriptBlock {Get-ChildItem C:\} -AsJob        ai8460p   PSRemotingJob True        Completed Get-ChildItem C:\

07-17-13 19:46:37.94 C:\Users\ainbar» rcjb * 2>&1|Out-Null
07-17-13 19:47:14.52 C:\Users\ainbar» gjb|ft -a $fmt_gjb

Id Name                                                                                  Location  JobType       HasMoreData     State Command
-- ----                                                                                  --------  -------       -----------     ----- -------
 1 Start-Job -ScriptBlock {Get-WMIObject win32_bios}                                     localhost PSRemotingJob False       Completed Get-WMIObject win32_bios
 3 Get-WMIObject win32_bios -AsJob                                                       localhost PSWmiJob      True        Completed Get-WMIObject
 5 Get-WMIObject win32_bios -AsJob -ComputerName ai8460p                                 ai8460p   PSWmiJob      True        Completed Get-WMIObject
 7 Invoke-Command -ComputerName . -ScriptBlock {Get-WMIObject win32_bios} -AsJob         localhost PSRemotingJob False       Completed Get-WMIObject win32_bios
 9 Invoke-Command -ComputerName ai8460p -ScriptBlock {Get-WMIObject win32_bios} -AsJob   ai8460p   PSRemotingJob False       Completed Get-WMIObject win32_bios
11 Start-Job -ScriptBlock {Test-Connection .}                                            localhost PSRemotingJob False       Completed Test-Connection .
13 Test-Connection . -AsJob                                                              .         PSWmiJob      True        Completed Test-Connection
15 Invoke-Command -ComputerName . -ScriptBlock {Test-Connection .}                       localhost PSRemotingJob False       Completed Test-Connection .
17 Invoke-Command -ComputerName ai8460p -ScriptBlock {Test-Connection .} -AsJob          ai8460p   PSRemotingJob False       Completed Test-Connection .
19 Start-Job -ScriptBlock {Get-ChildItem C:\}                                            localhost PSRemotingJob False       Completed Get-ChildItem C:\
21 Invoke-Command -ComputerName . -ScriptBlock {Get-ChildItem C:\} -AsJob                localhost PSRemotingJob False       Completed Get-ChildItem C:\
23 Invoke-Command -ComputerName ai8460p   -ScriptBlock {Get-ChildItem C:\} -AsJob        ai8460p   PSRemotingJob False       Completed Get-ChildItem C:\

07-17-13 19:47:35.29 C:\Users\ainbar» 
```

底线：错误在 PSWmiJob 对象中。无论以何种方式创建作业，也无论命令是在本地运行还是远程运行，在**接收作业**之后，如果 JobType 为 PSRemotingJob，则 HasMoreData 属性设置为 False，但如果 JobType 为 PSWmiJob，则保持 True。

据我所知，没有办法在 PSWmiJob 上将 HasMoreData 设置为 False。**Stop-Job**不会这样做，重新启动 WinRM 不会这样做，并且该属性是只读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T16:57:37.197

看到这个输出：

```
PS C:\dell> Test-Connection . -AsJob

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
2      Job2            WmiJob          Running       True            .                    Test-Connection

PS C:\dell> Get-Job

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
2      Job2            WmiJob          Completed     True            .                    Test-Connection

PS C:\dell> Get-Job Job2 | fl

StatusMessage :
HasMoreData   : True
Location      : .
Command       : Test-Connection
JobStateInfo  : Completed
Finished      : System.Threading.ManualResetEvent
InstanceId    : d16afbe0-31f7-4189-8d2a-30ede40645c4
Id            : 2
Name          : Job2
ChildJobs     : {Job3}
PSBeginTime   : 7/16/2013 10:22:58 PM
PSEndTime     : 7/16/2013 10:22:58 PM
PSJobTypeName : WmiJob
Output        : {}
Error         : {}
Progress      : {}
Verbose       : {}
Debug         : {}
Warning       : {}
State         : Completed

PS C:\dell> Get-Job Job3

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
3      Job3                            Completed     True            .

PS C:\dell> Get-Job Job3 | Receive-Job

Source        Destination     IPV4Address      IPV6Address                              Bytes    Time(ms)
------        -----------     -----------      -----------                              -----    --------
W4-G9W... localhost       127.0.0.1                                                 32       0
W4-G9W... localhost       127.0.0.1                                                 32       0
W4-G9W... localhost       127.0.0.1                                                 32       0
W4-G9W... localhost       127.0.0.1                                                 32       0

PS C:\dell> Get-Job Job2 | fl

StatusMessage :
HasMoreData   : False
Location      : .
Command       : Test-Connection
JobStateInfo  : Completed
Finished      : System.Threading.ManualResetEvent
InstanceId    : d16afbe0-31f7-4189-8d2a-30ede40645c4
Id            : 2
Name          : Job2
ChildJobs     : {Job3}
PSBeginTime   : 7/16/2013 10:22:58 PM
PSEndTime     : 7/16/2013 10:22:58 PM
PSJobTypeName : WmiJob
Output        : {}
Error         : {}
Progress      : {}
Verbose       : {}
Debug         : {}
Warning       : {}
State         : Completed

PS C:\dell> Get-Job Job3

Id     Name            PSJobTypeName   State         HasMoreData     Location             Command
--     ----            -------------   -----         -----------     --------             -------
3      Job3                            Completed     False           . 
```

您会看到 Job2 是顶级作业，它创建了一个名为 Job3 的子作业。这就是实际行动发生的地方。

您能否接收子作业并检查 HasMoreData 是否仍设置？******

# doctrine - 使用正则表达式优化 Doctrine WHERE 子句

> ID：10933733
> 
> 赞同：0
> 
> 时间：2012-06-07T14:21:07.647
> 
> 标签：doctrine, doctrine-orm, dql

请参阅以下教义查询：

```
SELECT values, orgunit, form 
    FROM Values values 
    INNER JOIN values.orgunit orgunit 
    INNER JOIN values.form form 
    INNER JOIN orgunit.orgunitStructure orgunitStructure 
    WHERE orgunitStructure.level1Id=123032 
        AND orgunitStructure.level >= (SELECT selectedOrgSructure.level FROM OrgunitStructure selectedOrgSructure WHERE selectedOrgSructure.orgunit=123032 ) 
        AND form.id IN(189,187,190,188) 
        AND ( 
            LOWER(values.value) LIKE '%"189886":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189880":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189881":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189871":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189888":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189873":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189870":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189863":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189865":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189867":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189869":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189872":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189894":"10369434"%' 
            OR LOWER(values.value) LIKE '%"189896":"10369434"%' 
            OR LOWER(orgunit.longname) LIKE '%10369434%'
            ) 
```

我正在寻找 WHERE 子句的 REGEX 优化，特别是将 OR 组合成类似的东西，来自：

```
LOWER(values.value) LIKE '%"189886":"10369434"%' 
OR LOWER(values.value) LIKE '%"189880":"10369434"%' 
OR LOWER(values.value) LIKE '%"189881":"10369434"%' 
OR LOWER(values.value) LIKE '%"189871":"10369434"%' 
OR LOWER(values.value) LIKE '%"189888":"10369434"%' 
OR LOWER(values.value) LIKE '%"189873":"10369434"%' 
OR LOWER(values.value) LIKE '%"189870":"10369434"%' 
```

进入：

```
LOWER(values.value) REGEXP '%("189886":"10369434")|("189886":"10369434")|("189880":"10369434")|("189881":"10369434")|("189871":"10369434")|("189888":"10369434")|("189873":"10369434")%' 
```

# javascript - 在 NodeJS 中复制 Buffer 的问题

> ID：10933736
> 
> 赞同：1
> 
> 时间：2012-06-07T14:21:11.983
> 
> 标签：javascript, node.js, buffer

我正在尝试创建附加缓冲区的方法。

这是代码，结果很奇怪：

```
 var offset = 0
   var a = new Buffer(0)
   var b = new Buffer('test')

   offset = a.length
   a.length += b.length
   a.copy(b, offset)
   console.log(a.toString())
   // everything works normaly
   // returns: test

   b = new Buffer('hello')
   offset = a.length
   a.length += b.length
   a.copy(b, offset)
   console.log(a.toString())
   // code the same
   // but returns: test<Buff
   // nor: testhello

   // at the third time code doesn't works and raise error: targetStart out of bounds 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:34:51.860

：编辑：

被这个问题弄糊涂了。我以为他会处理相同类型的缓冲区。

缓冲区无法调整大小，因为它们在 Node.js 中由固定大小定义，因此最好的选择是使用这样的函数

```
 function concat(buffers) {

    if (!Array.isArray(buffers)) {
      buffers = Array.prototype.slice.call(arguments);
    }

    var buffersToConcat = [], length = 0;
    buffers.forEach(function (buffer) {
        if (!Buffer.isBuffer(buffer)) {
          buffer = new Buffer(buffer);
        }
        length += buffer.length;
        buffersToConcat.push(buffer);
    });

    var concatinatedBuffer = new Buffer(length), index = 0;
    buffersToConcat.forEach(function (buffer) {
      buffer.copy(concatinatedBuffer, index, 0, buffer.length);
      index += buffer.length;
    });

    return concatinatedBuffer;
  } 
```

**你做错了什么？** 您试图通过 += 方法来操纵内存中固定大小分配的长度。因此它抛出了异常，因为 += 运算符显然没有重新分配内存

**我们在这里做什么 **

非常简单，我们只是从参数缓冲区中创建一个新缓冲区。

# c++ - 在 C++ 中有效地传递字符串文字

> ID：10933738
> 
> 赞同：3
> 
> 时间：2012-06-07T14:21:23.590
> 
> 标签：c++, string, templates

在编写包装 Lua 的代码时，我遇到了传递字符串文字的需求，并开始想知道哪种方式最有效。

我可以在两个功能之间进行选择：

1.  `void lua_pushstring (lua_State* L, const char* str);`
2.  `void lua_pushlstring(lua_State* L, const char* str, size_t len);`

当然，第一个函数在`strlen()`内部使用，因此第二个更快。

现在，如果它在编译时已知，我想避免计算字符串长度，如此[处](https://stackoverflow.com/questions/2173743/why-isnt-string-assignment-optimised-when-the-length-is-known-to-the-compiler)和[此处](https://stackoverflow.com/questions/1391708/is-compile-time-strlen-effective)所述：

```
// Overload 1
template <size_t N>
inline void pushstring(lua_State* L, const char (&str) [N])
{
    lua_pushlstring(L, str, N-1);
} 
```

与使用字符串文字调用此函数一样好：`pushstring(L, "test");`当然，使用 a 调用时它不会编译`const char*`，例如在`.cpp`文件中较长的函数中：

```
// this is in a .cpp file
void long_function(lua_State* L, const char* str)
{
    // do lots of stuff
    pushstring(L, str);  // compile error
    // do more stuff
} 
```

现在如果我添加

```
// Overload 2
inline void pushstring(lua_State* L, const char* str)
{
    lua_pushstring(L, str);
} 
```

出于某种原因（C++ 重载解决方案很棘手），它优先于`Overload 1`，因此永远不会被调用。

有没有聪明的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T14:31:28.307

如果您*同时*声明第二个转发到第一个：

```
void lua_pushlstring(lua_State* L, const char* str, size_t len);

inline void lua_pushstring (lua_State* L, const char* str)
{ lua_pushlstring(L, str, strlen(str)); } 
```

然后，当您使用文字调用第二个函数时，一个体面的编译器将优化`strlen`调用，例如它将内联

```
lua_pushstring(L, "hello"); 
```

并且因为`strlen`可以将文字优化为常量，所以它将用以下调用替换它：

```
lua_pushlstring(L, "hello", 5); 
```

这为您提供了调用两个参数形式的简单语法，而无需支付`strlen`文字费用。

当长度已知时，可以通过：

```
lua_pushlstring(L, s.c_str(), s.length()); 
```

或者这也有效，但有不必要的调用`strlen`

```
lua_pushstring(L, s.c_str()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:33:12.470

我会提供两种选择：

```
void f( const char*, int );
template <int N> void f( const char (&str)[N] ) {
   f( str, N-1 );
} 
```

（或者更确切地说`std::size_t`），现在拥有字符串文字的用户可以调用第二个，该第二个将在内部分派给第一个。没有文字但有 a 的`const char*`用户负责提供正确的大小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T14:44:59.283

要进一步详细说明您的模板版本：

```
#include <iostream>

template <typename T>
inline void pushstring(T str);

template <int N>
inline void pushstring(const char (&str) [N])
{
   std::cout << N << std::endl;
}

template <>
inline void pushstring(const char *str)
{
   std::cout << str << std::endl;
} 
```

在此处查看测试运行：
错误参数 -> 链接器错误：[http](http://ideone.com/vZbj6)
: //ideone.com/vZbj6 Rigt 参数 -> 运行良好 :)： http: [//ideone.com/iJBAo](http://ideone.com/iJBAo)

# c++ - C ++如何从主要移动代码

> ID：10933741
> 
> 赞同：-7
> 
> 时间：2012-06-07T14:21:32.657
> 
> 标签：c++

我对 C++ 知之甚少，所以我有这段代码

```
bool is_successful = true;
ex_file_licensing exFileLicence;
std::string flexLMfilePath;
flexLMfilePath.append("C:/Desktop/QA-program/testsuite/tmp/");
std::string Message = exFileLicence.checkLicense(DI_MF,flexfilePath,is_successful); 
```

我被要求将它移到主目录之外，然后在主目录中调用它，现在我不知道该怎么做你能告诉我我应该遵循哪些步骤，请尽可能具体，我真的不擅长这件事

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:24:57.503

您必须创建一个函数并在 main 中调用该函数：

```
void foo(); //this is called a function prototype

main()
{
...
foo() //your function in place of that code
}

void foo()
{
...//the code originally in main.  This is called your function definition
} 
```

这就是创建函数的工作方式，基本上是任何 C++ 代码的编写方式。有时功能出现在主文件之外的文件中，但基本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:26:12.163

查看 C++ 函数。我假设您有以下内容。

```
int main(){
    //***your stuff
return 
```

您需要以下内容。

```
void function(){
    //**your stuff
return;
}

int main(){

      function();

return;
} 
```

当程序启动时，它会自动转到 main 并且当它到达调用时： function();

它将控制权传递给包装在其中的代码

```
void function(){

return;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:24:02.280

如果我理解正确，我认为您只需将代码放入函数中，如下所示：

```
void CodeFunction()
{
    bool is_successful = true; 
    ex_file_licensing exFileLicence; 
    std::string flexLMfilePath; 
    flexLMfilePath.append("C:/Desktop/QA-program/testsuite/tmp/"); 
    std::string Message = exFileLicence.checkLicense(DI_MF,flexfilePath,is_successful); 
} 
```

然后您可以`main`使用`CodeFunction()`.

记得把它放在`main`函数上面，或者如果它在下面声明它上面`main`使用

`void CodeFunction();`

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:24:27.733

您需要编写一个函数，将代码移动到该函数，然后从 main 调用该函数 - [http://www.cplusplus.com/doc/tutorial/functions/](http://www.cplusplus.com/doc/tutorial/functions/)

# iphone - 性能：列表中较小图标的不同分辨率

> ID：10933746
> 
> 赞同：1
> 
> 时间：2012-06-07T14:21:51.407
> 
> 标签：iphone, objective-c

我正在开发一个 iPhone 应用程序，其滑雪目的地列在 UITableView 中。表格视图最多可以包含 2000 个单元格。每个单元格都有一个 25x25 像素（Retina 50x50）的小天气图标。我已经在每个目的地的详细视图上使用天气图标。这些图标的大小是原来的两倍：在 3GS 上为 50x50 像素，在 Retina 显示屏上为 100x100 像素。

由于在 UITableView 中渲染 png 非常消耗内存，我不确定是否应该将较大的图像也用于表格视图，或者是否应该只为表格视图设计一半大小的图像。当然，这会使应用程序的下载大小增加约 300 KB。

如果最好在应用程序中回收较大的图像，或者最好为所需的每种分辨率设计图像，如果有人能给我一个建议，那就太好了。

在此先感谢马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:00:42.190

UITableView 的一个好处是它的内存使用与单元格的大小没有特别的关系。当数据源存在时，您必须跳过一些小圈，以便表可以回收单元格，从而使内存相对于给定单元格的内存使用情况保持相对固定。

回收单元以速度换取空间，因此对滚动性能有更合理的担忧。这与每个单元的设置工作量有关（因为它们一直在被回收和重新设置）。图像大小在这里可能是一个因素，但我认为在您考虑的比例（50 ^ 2 或 100 ^ 2）上不是这样。这是最好通过在真实硬件上运行来研究的事情。

关于二进制大小，我认为您是正确的，单个版本的图像会减少应用程序的下载。这可能不是 300k 的成败因素，但考虑到它是值得称赞的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:42:02.347

您肯定想使用 2 张图片。如果您使用 1 张图像，则在非视网膜屏幕上使用更多内存，但在视网膜屏幕上使用相同。使用 2 张图像使用的内存最少。无论您在做什么，内存都应该没有问题，所以我敢说您在需要图像后将图像保存在内存中，这与表格视图代码无关。

# c# - 停止在 Firefox/Chrome 中显示文件下载对话框

> ID：10933747
> 
> 赞同：0
> 
> 时间：2012-06-07T14:21:52.823
> 
> 标签：c#, asp.net-mvc-3

我有一个 MVC3 应用程序，用户可以上传文件，然后随时查看或下载它们。以下代码在 IE 中按预期工作（出现我的弹出窗口并在其中呈现文件）但在 Firefox 中我得到打开/保存文件对话框并且我的文件没有在弹出窗口中呈现。在 chrome 中，文件只是自动下载。这是我的代码：

```
 //for brevity i'm not showing how i get the file stream to display, 
   //but that code works fine, also the ContentType is set properly as well

       public class BinaryContentResult : ActionResult
    {

    private readonly string ContentType;
    private readonly string FileName;
    private readonly int Length;
    private readonly byte[] ContentBytes;

        public BinaryContentResult(byte[] contentBytes, string contentType, string fileName, int nLength)
    {
        ContentBytes = contentBytes;
        ContentType = contentType;
        FileName = fileName;
        Length = nLength;
    }
    public override void ExecuteResult(ControllerContext context)
   {
        var response = context.HttpContext.Response; //current context being passed in
        response.Clear();
        response.Cache.SetCacheability(HttpCacheability.NoCache);
        response.ContentType = ContentType;

        if (ext.ToLower().IndexOf(".pdf") == -1)
        {
            //if i comment out this line, jpg files open fine but not png
            response.AddHeader("Content-Disposition", "application; filename=" + FileName);
            response.AddHeader("Content-Length", Length.ToString());

            response.ContentEncoding = System.Text.Encoding.UTF8;
        }

        var stream = new MemoryStream(ContentBytes); //byte[] ContentBytes;
        stream.WriteTo(response.OutputStream);
        stream.Dispose();
   }
   } 
```

以下是我的观点：

```
 public ActionResult _ShowDocument(string id)
    { 

        int nLength = fileStream.Length;//fileStream is a Stream object containing the file to display

         return new BinaryContentResult(byteInfo, contentType, FileName,nLength);
        } 
```

对于 PDf 和纯文本文件，这适用于所有方面，但对于 jpg 和 png 文件，我得到下载对话框。如何让 Firefox/Chrome 在弹出窗口中打开文件，就像在 Firefox/Chrome 中打开 PDF 文件一样？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:28:29.477

您需要发送一些标头，以便浏览器知道如何处理您正在流式传输的内容。尤其：

```
Response.ContentType = "image/png"

Response.ContentType = "image/jpg" 
```

等等

另请注意，对于与 PDF 不同的任何内容，您正在设置 `"Content-Disposition", "application; filename=" + FileName)`将强制下载的内容处置。

# java - 如何将序列化对象放入 Hadoop DFS 并将其返回到 map 函数中？

> ID：10933750
> 
> 赞同：0
> 
> 时间：2012-06-07T14:22:09.377
> 
> 标签：java, hadoop, thrift

我是 Hadoop 新手，最近我被要求使用 Hadoop 做一个测试项目。所以当我在阅读 BigData 时，碰巧知道 Pail。现在我想做的是这样的。首先创建一个简单的对象，然后使用 Thrift 对其进行序列化，并使用 Pail 将其放入 HDFS。然后我想在 map 函数中获取该对象并做任何我想做的事情。但我不知道在 map 函数中获取 tat 对象。

有人可以告诉我任何参考资料或解释如何做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:19:47.900

I can think of three options:

1.  Use the `-files` option and name the file in HDFS (preferable as the task tracker will download the file once for all jobs running on that node)
2.  Use the DistributedCache (similar logic to the above), but you configure the file via some API calls rather than through the command line
3.  Load the file directly from HDFS (less efficient as you're pulling the file over HDFS for each task)

As for some code, put the load logic into your mapper's `setup(...)` or configure(..) method (depending on whether you're using the new or old API) as follows:

```
protected void setup(Context context) {
    // the -files option makes the named file available in the local directory
    File file = new File("filename.dat");
    // open file and load contents ...

    // load the file directly from HDFS
    FileSystem fs = FileSystem.get(context.getConfiguration());
    InputStream hdfsInputStream = fs.open("/path/to/file/in/hdfs/filename.dat");
    // load file contents from stream...
} 
```

DistributedCache has some example code in the [Javadocs](http://hadoop.apache.org/common/docs/r0.20.2/api/org/apache/hadoop/filecache/DistributedCache.html)

# javascript - 反映类的变化以进行后退/前进

> ID：10933751
> 
> 赞同：1
> 
> 时间：2012-06-07T14:22:10.577
> 
> 标签：javascript, jquery, css, class, tabs

首先，为这个冗长的问题道歉。我真的是一个新手，尤其是。使用 javascript 和 jQuery。

我正在使用 jQuery Address 并基于[选项卡示例](http://www.asual.com/jquery/address/samples/tabs/)（也基于 jQuery UI）进行导航。我有四个按钮（ID 为 tab1、tab2、tab3 和 tab4），它们应该看起来重叠（或有一个“尾巴”），具体取决于活动选项卡。因此，每个的背景图像都会相应地变化（取决于 h、r、p 和 c 类）。

```
<ul id="menu" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
    <li class="ui-corner-top ui-tabs-selected ui-state-active"><a href="#Hazel" title="Hazel" id="tab1" class="h">Hazel</a></li>
    <li class="ui-corner-top ui-state-default"><a href="./red.html" title="Red" id="tab2" class="h"><img src="imagestail.png" alt="" />Red</a></li>
    <li class="ui-corner-top ui-state-default"><a href="./pink.html" title="Pink" id="tab3" class="h tail"><img src="images/tail.png" alt="" />Pink</a></li>
    <li class="ui-corner-top ui-state-default"><a href="./cyan.html" title="Cyan" id="tab4" class="h tail"><img src="images/tail.png" alt="" />Cyan</a></li>
</ul> 
```

以下是我尝试的初始代码，如果只单击按钮，它看起来很棒。但是，如果用户后退/前进，该类将保持上次单击时的状态。

```
$(document).ready(function() {

$("#tab1").unbind("click").click(function(){
$("#tab1,#tab2,#tab3,#tab4").removeClass("r p c").addClass("h");
$("#tab2").removeClass("tail");
$("#tab3, #tab4").addClass("tail");
return false;
})

$("#tab2").unbind("click").click(function(){
$("#tab1,#tab2,#tab3,#tab4").removeClass("h p c").addClass("r");
$("#tab3, #tab2").removeClass("tail");
$("#tab4").addClass("tail");
return false;
})

$("#tab3").unbind("click").click(function(){
$("#tab1,#tab2,#tab3,#tab4").removeClass("h r c").addClass("p");
$("#tab3, #tab4").removeClass("tail");
$("#tab2").addClass("tail");
return false;
})

$("#tab4").unbind("click").click(function(){
$("#tab1,#tab2,#tab3,#tab4").removeClass("h r p").addClass("c");
$("#tab4").removeClass("tail");
$("#tab3, #tab2").addClass("tail");
return false;
})
}); 
```

我正在寻找类似于历史的东西来进行班级变更。我尝试了在 URL 更改时应该更改类的代码，以及查找父级是否包含类“ui-state-active”或“ui-tabs-selected”的代码，目的是更准确地添加和删除类在链接中，但到目前为止都没有工作。这是我尝试过的代码示例：

```
$(document).ready(function() {
if ($("#tab1").parent().hasClass('ui-tabs-selected')) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("r p c").addClass("h");
    $("#tab2").removeClass("tail");
    $("#tab3, #tab4").addClass("tail");    
}
else if ($("#tab2").parent().hasClass('ui-tabs-selected')) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h p c").addClass("r");
    $("#tab3, #tab2").removeClass("tail");
    $("#tab4").addClass("tail");
}
else if ($('#tab3').parent().hasClass('ui-tabs-selected')) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h r c").addClass("p");
    $("#tab3, #tab4").removeClass("tail");
    $("#tab2").addClass("tail");    
}
else ($('#tab4').parent().hasClass('ui-tabs-selected')) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h r p").addClass("c");
    $("#tab4").removeClass("tail");
    $("#tab3, #tab2").addClass("tail")  
}
}); 
```

我不知道是否可能与 jQuery 地址发生冲突，或者我输入错误，或者错过了另一个潜在的解决方案。

如果有人能引导我朝着正确的方向前进，我将不胜感激。此外，如果您需要更多代码来帮助我，我很乐意提供。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T07:41:00.337

您必须创建一个为您选择选项卡的函数，然后从 $.address.change 事件中调用它。

```
$.address.change(function (e) {
    var tabName = e.pathNames[0];
    $("#tabsContainer").children("li").removeClass("ui-tabs-selected");
    $("#" + tabName).click(); // i think this should do all the job
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T03:01:03.400

我已经能够使以下代码工作（尽管看起来重复的代码很长）：

```
$(document).ready(function() {
$(function() {
  var loc = window.location.href; // For when Hazel is refreshed
  if(/Hazel/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("r p c").addClass("h");
    $("#tab2").removeClass("tail");
    $("#tab3, #tab4").addClass("tail");
  }
});
$(function() {
  var loc = window.location.href; // For when Red is refreshed
  if(/Red/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h p c").addClass("r");
    $("#tab3, #tab2").removeClass("tail");
    $("#tab4").addClass("tail");
  }
});
$(function() {
  var loc = window.location.href; // For when Pink is refreshed
  if(/Pink/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h r c").addClass("p");
    $("#tab3, #tab4").removeClass("tail");
    $("#tab2").addClass("tail"); 
  }
});
});
$(function() {
  var loc = window.location.href; // For when Cyan is refreshed
  if(/Cyan/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h r p").addClass("c");
    $("#tab4").removeClass("tail");
    $("#tab3, #tab2").addClass("tail");
  }
});
$("#tab1").click(function(){
$(window).bind("hashchange", function () {
  var loc = window.location.href; // For when Hazel tab is clicked
  if(/Hazel/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("r p c").addClass("h");
    $("#tab2").removeClass("tail");
    $("#tab3, #tab4").addClass("tail");
  }
});
});
$("#tab2").click(function(){
$(window).bind("hashchange", function () {
  var loc = window.location.href; // For when Red tab is clicked
  if(/Red/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h p c").addClass("r");
    $("#tab3, #tab2").removeClass("tail");
    $("#tab4").addClass("tail");
  }
});
});
$("#tab3").click(function(){
$(window).bind("hashchange", function () {
  var loc = window.location.href; // For when Pink tab is clicked
  if(/Pink/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h r c").addClass("p");
    $("#tab3, #tab4").removeClass("tail");
    $("#tab2").addClass("tail"); 
  }
});
});
$("#tab4").click(function(){
$(window).bind("hashchange", function () {
  var loc = window.location.href; // For when Cyan tab is clicked
  if(/Cyan/.test(loc)) {
    $("#tab1,#tab2,#tab3,#tab4").removeClass("h r p").addClass("c");
    $("#tab4").removeClass("tail");
    $("#tab3, #tab2").addClass("tail");
  }
});
});
}); 
```

# mysql - 使用 DATE 和 TIME 函数对多个表进行排序

> ID：10933755
> 
> 赞同：0
> 
> 时间：2012-06-07T14:22:25.477
> 
> 标签：mysql

我有下面的查询，它使用联合从三个表中提取数据。

```
SELECT * FROM (SELECT 

    *,'table1' AS 'tbl', colour AS get_colour(created_date) FROM table1 WHERE customer = '11' UNION SELECT

    *,'table2' AS 'tbl', colour AS get_colour(created_date) FROM table2 WHERE customer = '11' UNION SELECT

    *,'table3' AS 'tbl', colour AS get_colour(created_date) FROM table5 WHERE customer = '11' 

    ORDER BY colour ASC

) as c 
```

我正在尝试将下面的函数写入 SQL，以便我可以按颜色对结果进行排序。

我的 PHP 示例函数如下。

```
function get_colour($date) {

    $days = floor((time() - strtotime($date))/(60*60*24));

    if(empty($date) || $date == "-") return "grey";

    elseif($days <= 7) return "green";

    elseif($days <= 14) return "orange";

    else return "red";
} 
```

我已经研究过使用 CASE SELECT 和 IF STATEMENTS 但需要一点帮助才能开始。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:15:17.710

我不会为您提供开箱即用的解决方案，但请考虑以下查询：

```
SELECT
    IF(DATEDIFF(TODAY, YESTERDAY) <= 7, "green",
        IF(DATEDIFF(TODAY, YESTERDAY) <= 14, "orange",
            "red")) as COLOUR
FROM (
    SELECT
    NOW() as TODAY,
    DATE_SUB(NOW(), INTERVAL 15 DAY) as YESTERDAY) T; 
```

它应该可以帮助你；）

# c# - 在 log4net 中使用 smtpAppender 的多个 smtphost 地址

> ID：10933757
> 
> 赞同：7
> 
> 时间：2012-06-07T14:22:26.357
> 
> 标签：c#, .net, vb.net, logging, log4net

我希望能够指定多个 smtp 服务器主机地址并实现一个逻辑，即如果使用一个 smtp 服务器的电子邮件失败，它会尝试使用下一个 smtp 服务器地址发送。是否可以使用 log4net. 我们可以覆盖 log4net 的一些功能并在其中实现我们自己的逻辑来发送电子邮件吗？

```
<appender name="SmtpAppender" type="log4net.Appender.SmtpAppender">
  <to value="group@ivp.in" />
  <from value="uname@ivp.in" />
  <subject>Error Notification</subject>
  **<smtpHost value="10.0.0.12, 10.0.0.13" />**
  <authentication value="None" />
  <port value="25" />
  <bufferSize value="1" />
  <EnableSsl value="false"/>
  <lossy value="true" />
  <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="ERROR"/>
  </evaluator>
  <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%newline%date [%thread] %level %logger - %message%newline%newline%exception" />
  </layout>
</appender> 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-17T08:02:21.990

有一种更简单的方法

```
<to value="group@ivp.in,group2@ivp.in,group3@ivp.in,group4@ivp.in" /> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T14:24:56.333

只有实施`custom SmtpAppender`.

我`CustomSmtpAppender`从[Log4net 源代码示例中复制了代码。](http://logging.apache.org/log4net/download.html)希望这会对你有所帮助。

不要忘记`CustomSmtpAppender`在您的应用配置中引用

```
using System;
using System.IO;
using System.Web.Mail;

using log4net.Layout;
using log4net.Core;
using log4net.Appender;

namespace SampleAppendersApp.Appender
{
    /// <summary>
    /// Simple mail appender that sends individual messages
    /// </summary>
    /// <remarks>
    /// This SimpleSmtpAppender sends each LoggingEvent received as a
    /// separate mail message.
    /// The mail subject line can be specified using a pattern layout.
    /// </remarks>
    public class SimpleSmtpAppender : AppenderSkeleton
    {
        public SimpleSmtpAppender()
        {   
        }

        public string To 
        {
            get { return m_to; }
            set { m_to = value; }
        }

        public string From 
        {
            get { return m_from; }
            set { m_from = value; }
        }

        public PatternLayout Subject 
        {
            get { return m_subjectLayout; }
            set { m_subjectLayout = value; }
        }

        public string SmtpHost
        {
            get { return m_smtpHost; }
            set { m_smtpHost = value; }
        }

        #region Override implementation of AppenderSkeleton

        override protected void Append(LoggingEvent loggingEvent) 
        {
            try 
            {     
                StringWriter writer = new StringWriter(System.Globalization.CultureInfo.InvariantCulture);

                string t = Layout.Header;
                if (t != null)
                {
                    writer.Write(t);
                }

                // Render the event and append the text to the buffer
                RenderLoggingEvent(writer, loggingEvent);

                t = Layout.Footer;
                if (t != null)
                {
                    writer.Write(t);
                }

                MailMessage mailMessage = new MailMessage();
                mailMessage.Body = writer.ToString();
                mailMessage.From = m_from;
                mailMessage.To = m_to;

                if (m_subjectLayout == null)
                {
                    mailMessage.Subject = "Missing Subject Layout";
                }
                else
                {
                    StringWriter subjectWriter = new StringWriter(System.Globalization.CultureInfo.InvariantCulture);
                    m_subjectLayout.Format(subjectWriter, loggingEvent);
                    mailMessage.Subject = subjectWriter.ToString();
                }

                if (m_smtpHost != null && m_smtpHost.Length > 0)
                {
                    SmtpMail.SmtpServer = m_smtpHost;
                }

                SmtpMail.Send(mailMessage);
            } 
            catch(Exception e) 
            {
                ErrorHandler.Error("Error occurred while sending e-mail notification.", e);
            }       
        }

        override protected bool RequiresLayout
        {
            get { return true; }
        }

        #endregion // Override implementation of AppenderSkeleton

        private string m_to;
        private string m_from;
        private PatternLayout m_subjectLayout;
        private string m_smtpHost;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-07T11:03:23.163

我知道我参加聚会迟到了，但我遇到了类似的问题，需要我以编程方式解决它，而不是直接将它们硬编码到`app.config`文件中。

当您不想通过配置文件公开您的电子邮件凭据时，这是您想要使用的方法。如果您出于任何原因想要覆盖 SmtpAppender，它也很有用。

这是 log4net appender 的设置`app.config`：

```
<appender name="SmtpAppender" type="MyNameSpace.SmtpAppenderHelper">
    <to value="sendto@company.com" />
    <cc value="sendccto@company.com" />
    <subject value="An Error Occured" />
    <bufferSize value="1" />
    <EnableSsl value="true" />
    <lossy value="true" />
    <layout type="log4net.Layout.PatternLayout">
    <conversionPattern value="%level %date - %message%newline" />
    </layout>
    <evaluator type="log4net.Core.LevelEvaluator">
    <threshold value="ERROR" />
    </evaluator>
</appender> 
```

我的助手类：

```
namespace MyNameSpace
{
    public class SmtpAppenderHelper : SmtpAppender
    {
        protected override void SendBuffer(LoggingEvent[] events)
        {
            // overriding the SmtpAppender so that I can add some sensitive information
            this.Username = "myemailaddress@gmail.com";
            this.Password = "NotSafePassword";
            this.SmtpHost = "smtp.gmail.com";
            this.Port = 587;
            this.Authentication = SmtpAuthentication.Basic;
            this.From = "myemailaddress@gmail.com";

            base.SendBuffer(events);
        }
    }
} 
```

您还可以创建一个`SmtpAppenderHelper`类方法来帮助您修改电子邮件主题并在`base.SendBuffer(events)`修改主题的方法之前触发它，如下所示：

```
protected virtual void prepareSubject(ICollection<LoggingEvent> events)
{
    Subject = null;
    foreach (LoggingEvent _event in events)
    {
        if (Evaluator.IsTriggeringEvent(_event))
        {
            string msg = _event.ExceptionObject == null ? _event.RenderedMessage : _event.ExceptionObject.Message;

            Subject = string.Format("[{0}] {1}", _event.Level, msg);

            break;
        }
    }

} 
```

另一个[关于覆盖的示例`Appenders`](https://stackoverflow.com/questions/3902060/configure-or-extend-log4net-smtpappender-with-custom-subjects/)

# android - 为Andengine场景Android添加背景

> ID：10933759
> 
> 赞同：5
> 
> 时间：2012-06-07T14:22:34.363
> 
> 标签：android, background, andengine, scene

我想设置我的场景背景，但我不知道如何设置！我已经阅读了很多关于此的内容，但我无法使其正常工作。是我从 Andengine 开始的，并且很难找到我的问题的准确信息，一切都是主观的。

好吧，我已经在一个场景中实现了启动画面，同时加载了所有资源和场景。（https://sites.google.com/site/matimdevelopment/splash-screen---easy-way）

然后，我必须为我的 menuScene 设置一个背景，我认为我需要一个 TextureRegion 和一个 BitmapTextureAtlas 来创建每个背景。我这样做：

声明的纹理：

```
 //Fondo escenas
private TextureRegion menuBgTexture;
private BitmapTextureAtlas menuBackgroundTexture; 
```

加载资源和加载场景（在 Splash 结束时由 onPopulateScene 调用）

```
public void loadResources() 
{
    //FondoMenu
    menuBackgroundTexture = new BitmapTextureAtlas(null, 480, 320, TextureOptions.DEFAULT);
    menuBgTexture = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.menuBackgroundTexture, this, "menubg.png", 0, 0);
    //Cargamos los fondos
    mEngine.getTextureManager().loadTexture(this.menuBackgroundTexture);

}

private void loadScenes()
{
    //Menú
    menuScene = new Scene();
    final float centerX = (CAMERA_WIDTH - menuBgTexture.getWidth()) / 2;
    final float centerY = (CAMERA_HEIGHT - menuBgTexture.getHeight()) / 2;
    SpriteBackground bg = new SpriteBackground(new Sprite(centerX, centerY, menuBgTexture));
    menuScene.setBackground(bg);
    //menuScene.setBackground(new Background(50, 0, 0));
    //Options
    optionsScene = new Scene();
    //Juego
    gameScene = new Scene();
    //Pausa
    pauseScene = new Scene();
    //Gameover
    gameOverScene = new Scene();
} 
```

加载资源不显示错误，但 loadScenes, Line: SpriteBackground bg = new SpriteBackground(new Sprite(centerX, centerY, menuBgTexture));

说我要设置一个新属性（ISpriteVertexBufferObject），嗯，这是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:04:14.603

对于 VBOManager 对象，使用

```
this.getVertexBufferObjectManager(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-28T21:16:03.673

我的游戏也有同样的问题。解决方案是使用与相机尺寸相同的背景图像。例如，如果您的相机是 800X480，则图像也应具有相同的尺寸。此外，使 BitmapTextureAtlas 因子的尺寸为 2。在您的情况下，它应该是 512 像素 x 512 像素。希望有帮助。

干杯！！

# android - Android实现mono的示例流程？

> ID：10933760
> 
> 赞同：1
> 
> 时间：2012-06-07T14:22:35.970
> 
> 标签：android, mono, monodevelop, xamarin.android

Java实现了OnClickListener、OnTouchListener这些进程怎么又单声道找不到呢？先感谢您 ...

```
public class MyClass implements OnClickListener, OnTouchListener {
    @Override
    public boolean onTouch(View v, MotionEvent event) {

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:

            break;
        case MotionEvent.ACTION_UP:

            break;
        default:

            break;
        }

        return false;
    }

    @Override
    public void onClick(View v) {

    }
} 
```

如何使这个过程成为单声道？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:34:58.637

将该示例直译为 C# 和 Mono for Android 如下所示：

```
public class MyClass : Java.Lang.Object, View.IOnClickListener, View.IOnTouchListener
{
    public bool OnTouch(View v, MotionEvent e)
    {
        switch (e.Action)
        {
            case MotionEventActions.Down:
                break;
            case MotionEventActions.Up:
                break;
            default:
                break;
        }

        return false;
    }

    public void OnClick(View v)
    {
    }
} 
```

虽然仍然可以按照 Java 约定以这种方式编写您的应用程序，但在 Mono for Android 中还有更好的方法来实现。在 Java 使用侦听器接口的大多数情况下，Android 的 Mono 实际上会提供一个您可以处理的事件，这更容易使用（并且对 C# 更友好）。在此示例中，您希望处理视图上的[`Touch`](http://docs.mono-android.net/?link=E:Android.Views.View.Touch)和[`Click`](http://docs.mono-android.net/?link=E:Android.Views.View.Click)事件：

```
view.Touch += (sender, args) =>
              {
                  switch (args.Event.Action)
                  {
                      case MotionEventActions.Down:
                          break;
                      case MotionEventActions.Up:
                          break;
                      default:
                          break;
                  }
              };
view.Click += (sender, args) =>
              {
              }; 
```

# audio - 如何在 J2ME 电话上产生尽可能大的声音？

> ID：10933763
> 
> 赞同：1
> 
> 时间：2012-06-07T14:22:47.043
> 
> 标签：audio, java-me, alert, nokia, mmapi

我有一个 midlet，在发现某些东西时会显示一些信息、振动、闪烁屏幕并发出声音——所有这些都是为了引起用户的注意。问题是声音不够响亮。

如何让手机发出最大的声音？我不喜欢添加声音文件，除非这是关键。我更喜欢使用标准的 j2me 库，但如果绝对需要，可以使用诺基亚的库。

我主要针对诺基亚 S60 或 S40。

目前，我能想到的最好的是：

```
Manager.playTone(ToneControl.C4, duration, 100); 
```

但是你几乎听不到这在某些手机上发出的声音。

# sitecore - Sitecore 克隆能否变得更加自动化

> ID：10933768
> 
> 赞同：0
> 
> 时间：2012-06-07T14:23:19.470
> 
> 标签：sitecore, sitecore6, items

我已经阅读了关于克隆的内容，这似乎是我们客户的部分解决方案。我阅读了[http://www.sitecore.net/Community/Technical-Blogs/Getting-to-Know-Sitecore/Posts/2010/10/Cloning-What-Ifs.aspx](http://www.sitecore.net/Community/Technical-Blogs/Getting-to-Know-Sitecore/Posts/2010/10/Cloning-What-Ifs.aspx)但评论者没有完成答案。

Sitecore 克隆提供有关更改的通知，这很好并支持所有项目的工作流理念，但克隆父级不提供有关从中克隆的内容的信息。因此，当我们（主要）主站点发生更改时，在 5 个姊妹站点中查找每个克隆项目将变得太乏味太快。

我相信代理项目曾经是真正的解决方案，但考虑到它们已被弃用，我认为这不是我们正在寻求实施的解决方案。

**除了修改我们的工作流程和搞乱克隆之外，是否有一种内置的或更简单的方法来维护克隆？**

**期望行为**：
当克隆的父级被批准进入最终工作流状态 => 也接受克隆上的更改。
Or
**Less Desired**：
在内容编辑器中提供一个项目的所有子克隆的列表以及要编辑的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T16:50:37.993

**对于您想要的行为**：您必须实现一个事件处理程序或管道处理器，当一个项目被批准时，您使用链接数据库查找它的所有克隆并以编程方式批准它们。我相信从代码的角度来看，这肯定是可行的。

**对于您不太希望的行为**：您可以使用**导航**选项卡 >**链接**下拉菜单来查找克隆。只需查看显示**_source字段的推荐人，这意味着他们通过“_source”字段***引用*该项目，这意味着它们是它的克隆。

 ****更新**

要通过 C# 修改项目的工作流，请参阅[更改项目的工作流状态](http://sdn.sitecore.net/Snippets/Workflow/Change%20the%20Workflow%20State%20on%20an%20Item%20via%20API.aspx)。**

# javascript - Canvas 中 SVG 路径渲染的性能改进

> ID：10933771
> 
> 赞同：0
> 
> 时间：2012-06-07T14:23:26.260
> 
> 标签：javascript, performance, canvas, svg

Tl;DR：我的渲染时间出奇地慢，使用下面的代码 - 任何想法为什么会这样或关于如何提高性能的建议将不胜感激。

我正在开发一个需要支持多个渲染后端（例如`SVG`和`Canvas`）的应用程序，但是我遇到了一些在渲染到 Canvas 时没有预料到的严重性能问题。

对，所以我的代码是这样构建的，这样每个后端都实现了一个类似 Canvas 的绘图 API，这样无论使用什么后端，渲染语法都保持不变。我的代码正在渲染定义为 SVG 路径（最初来自 SVG 字体文件）的“字形”。问题是画布渲染速度非常慢 - 几乎与具有*大量*DOM 交互的 SVG 一样慢。

我希望渲染时间允许动画帧速率至少为 30 FPS，但现在，使用 Canvas 时，单个帧大约需要 50-70 毫秒（Chrome），使用 SVG 时需要 80-90 毫秒，这充其量会导致〜20 FPS。我现在正在渲染 30 个字形，平均数量约为 24.5 个绘图命令。

我的问题是：有没有更有效的方法来进行这种渲染或任何方法来获得更好的性能，因为我对这种方法的低效率感到震惊（即使我缓存了字形！）。A`Glyph`是一个对象，它在初始化时将 SVG 路径字符串解码为（我认为）更快的符号，这使得路径成为数组数组。例如：

```
[['M', 201, 203.5551],['s', 15.2, 13.254, 15.3, 18.5, 22.3, 50.118], ...] 
```

我的`CanvasRenderingContext2D#renderGlyph`方法被定义为类似，其中`glyph.path`对象（数组）定义如上：

```
canvas.renderGlyph = function canvasRenderGlyph(name, x, y, nocache) {
  if (!(name instanceof Glyph) && !font.glyphs[name]) {
    return console.log('Unsupported Glyph: ' + name, 'warn');
  }
  x = x * scale;
  y = y * scale;
  var glyph, path, c, startx, starty, px, py, controlpx, controlpy;
  if (typeof name === 'string' && name in glyphCache && !nocache) {
    glyph = glyphCache[name];
  } else {
    glyph = (name instanceof Glyph) ? name : new Glyph(font.glyphs[name]);
    glyph.scale(scale * font.scale.x, scale * font.scale.y);
    if (typeof name === 'string') {
      glyphCache[name] = glyph;
    }
  }
  path = glyph.path;
  startx = x;
  starty = y;
  px = 0;
  py = 0;
  this.beginPath();
  for (var i = 0, length = path.length; i < length; i++) {
    c = path[i];
    switch (c[0]) {
    case 'M':
      px = c[1];
      py = c[2];
      this.moveTo(startx + px, starty + py);
      break;
    case 'l':
      px += c[1];
      py += c[2];
      this.lineTo(startx + px, starty + py);
      break;
    case 'h':
      px += c[1];
      this.lineTo(startx + px, starty + py);
      break;
    case 'v':
      py += c[1];
      this.lineTo(startx + px, starty + py);
      break;
    case 'q':
      controlpx = px + c[1];
      controlpy = py + c[2];
      px += c[3];
      py += c[4];
      this.quadraticCurveTo(
      startx + controlpx, starty + controlpy, startx + px, starty + py);
      break;
    case 't':
      controlpx = px + (px - controlpx);
      controlpy = py + (py - controlpy);
      px += c[1];
      py += c[2];
      this.quadraticCurveTo(
      startx + controlpx, starty + controlpy, startx + px, starty + py);
      break;
    case 'c':
      controlpx = px + c[3];
      controlpy = py + c[4];
      this.bezierCurveTo(
      startx + px + c[1], starty + py + c[2], startx + controlpx, starty + controlpy, startx + px + c[5], starty + py + c[6]);
      px += c[5];
      py += c[6];
      break;
    case 's':
      this.bezierCurveTo(
      startx + controlpx, starty + controlpy, startx + px + c[1], starty + py + c[2], startx + px + c[3], starty + py + c[4]);
      px += c[3];
      py += c[4];
      controlpx = px + c[1];
      controlpy = py + c[2];
      break;
    case 'z':
      this.closePath();
      break;
    default:
      if (c[0].match(/[a-z]/i)) {
        console.log('Unsupported path command: ' + cname, name, 'warn');
      }
      break;
    }
  }
  this.fillStyle = self.settings.fillcolor;
  this.fill();
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:45:28.477

这肯定有问题。性能不应该如此糟糕，呈现 ~24 命令复杂度的字形。

例如，[Fabric.js能够以 30 fps 的速度渲染包含](http://fabricjs.com)**数千**条命令的路径。在 Fabric 中，我使用类似的方法将 SVG 路径数据解析为命令数组，然后调用相应的上下文方法。

还要考虑 Fabric[识别更多命令](https://github.com/kangax/fabric.js/blob/master/src/path.class.js#L245-436)（您的示例缺少大多数绝对命令 - Q、C、S 等）

在这个[动画示例](http://fabricjs.com/animation/)中，您可以看到大约 4000 到 5000 条路径的渲染性能不错。只有当它上升到 ~10000 时，您才会开始看到减速（此时 FPS 计数器已失效，所以我只谈论感知性能）。

其他可能影响性能的因素——画布大小、页面上可能存在的其他元素、动画循环。另外，您在哪个硬件/平台上看到性能不佳？

# ios - 告诉“项目已购买”消息后应用内购买失败

> ID：10933772
> 
> 赞同：1
> 
> 时间：2012-06-07T14:23:27.337
> 
> 标签：ios, ios5, in-app-purchase

我正在构建一个 iOS 应用程序并尝试实现应用程序内购买（非消耗性）。

所有捆绑包 ID 等都已设置并正常工作，当我获取 Apple Store 服务器时，我可以看到我的产品有效。但是，在测试时，我在 paymentQueue 回调中收到失败的交易。

这是iOS模拟器中逐步发生的事情：

1.  一个消息框询问“您想以 0.99 美元的价格购买 .. 吗？” 哪个是对的
2.  我单击是。
3.  大约一秒钟后，它说我已经买了（正确的，我最初是在调试时试买的）。我点击确定。
4.  它抱怨登录要求（它说类似于 MZFinance_LoginRequired，我认为它缺少字符串标识符。）我单击“确定”。
5.  弹出 App Store 登录框，我输入我的测试帐户凭据。
6.  我在 Xcode 中的断点被击中，事务状态*为 SKPaymentTransactionStateFailed*。

这是我的代码的相关部分：

```
-(void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{
NSArray* arr = response.products;
for (int i = 0; i < arr.count; i++) {
    SKProduct* product = [arr objectAtIndex:i];
    if([product.productIdentifier isEqualToString:@"<<my in app purchase id which is correct and working>>"]){
        SKPayment *payment = [SKPayment paymentWithProduct:product];
        [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
        [[SKPaymentQueue defaultQueue] addPayment:payment];
    }
}

-(void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions{
for (SKPaymentTransaction* ta in transactions) {
    switch (ta.transactionState) {
        case SKPaymentTransactionStatePurchased:
        case SKPaymentTransactionStateRestored:
            receipt = [ta transactionReceipt];
            [self performSelectorInBackground:@selector(validateFromServer) withObject:nil];
            break;
        case SKPaymentTransactionStateFailed:
            [self purchaseFailed];
            break;
    }

    if(!ta.transactionState == SKPaymentTransactionStatePurchasing){
        [[SKPaymentQueue defaultQueue] finishTransaction:ta];

    }
} 
```

} }

`[self purchaseFailed]`总是被击中，这只是通知用户。这里有什么问题？（我是 iOS 新手，而且 - 显然 - 应用程序购买中的 iOS）。谢谢。

**更新：**我的测试帐户凭据是正确的，因为如果我输入错误，我会收到不同的（无效登录）消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-12T23:17:49.193

很抱歉迟到的答案，我知道你已经解决了你的问题，但我也遇到了这个问题。我的解决方案是自动运行恢复购买方法，因为这似乎可行。

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T15:33:07.113

经过一段时间的努力，我注意到我在生产中没有遇到任何问题。这可能是沙盒服务器的问题。

# jquery - Javascript / jquery如何区分触发点击和用户点击？

> ID：10933774
> 
> 赞同：7
> 
> 时间：2012-06-07T14:23:36.677
> 
> 标签：jquery, triggers, click

这个问题看起来很像 [在 Jquery 中，我如何区分程序点击和用户点击？](https://stackoverflow.com/questions/6674669/in-jquery-how-can-i-tell-between-a-programatic-and-user-click)

但我无法得到它，我的代码

```
<div class="sample_class" onclick="sample_fn(arg1,arg2,arg3,arg4, e);" ></div>
<div class="trigger_class" onclick="trigger_fn()></div>

function sample_fn(arg1,arg2,arg3,arg4, e){
    console.log(e) ;
    console.log(e.isTrigger);
    console.log(e.hasOwnProperty('originalEvent'));
}

function trigger_fn(){
    $(".sample_class").trigger("click")
} 
```

单击 div.sample_class 我进入控制台对象 undefined false

单击 div.tigger_class 我进入控制台相同的东西 Object undefined false

我无法区分这两次点击。提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:00:35.233

**更新**：从 jQuery 1.7+ 开始，事件对象（`e`在下面的代码中）对象将包含一个名为的属性`e.isTrigger`，`true`如果事件被触发，则为 undefined；如果未触发；这是未记录的，因此请在使用前检查此（[演示](http://jsfiddle.net/Mottie/65j8L/23/)）。如果使用旧版本的 jQuery，请使用下面的代码。

* * *

将标志传递给您的函数可能更容易。这是一个[演示](http://jsfiddle.net/Mottie/65j8L/)：

HTML

```
<button>Trigger a click below</button>

<div id="test">Click Me</div>​ 
```

脚本

```
​$('#test').click(function(e, triggered){
    var msg = (triggered) ? ', triggered' : '';
    console.log('clicked' + msg);
});​​

$('button').click(function(){
    // pass a true flag to the click function to indicate
    // it's been triggered
    $('#test').trigger('click', true);
}); 
```

* * *

更新：数据属性可以包含有效的 JSON，它会自动转换为对象（[演示](http://jsfiddle.net/Mottie/65j8L/20/)）：

```
<div class="test" data-args='{ "quantity": 1, "type": "pizza", "extra1": "peperoni", "extra2": "cheese", "extra3": "cheesy bread" }'>Click Me</div> 
```

请注意，`data-arg`使用单引号来包含 JSON，但里面的 JSON 必须在每个键和值周围使用双引号（除非它是数字的）。

然后使用data方法提取信息：

```
var args = $(this).data('args'); 
```

或者，您可以为每个参数创建一个单独的数据属性（[demo](http://jsfiddle.net/Mottie/65j8L/21/)）：

```
<div class="test" data-quantity="1" data-type="pizza" data-extra1="peperoni" data-extra2="cheese" data-extra3="cheesy bread">Click Me</div> 
```

然后使用收集元素中的所有数据，如下所示：

```
var args = $(this).data(); 
```

# opengl-es - 从 Projection 和 ModelView 矩阵获取 CATransform3D

> ID：10933778
> 
> 赞同：0
> 
> 时间：2012-06-07T14:24:01.903
> 
> 标签：opengl-es, core-animation, qcar-sdk

[如何从 Projection 和 ModelView 矩阵中获取 CATransform3D](https://stackoverflow.com/questions/6045502/how-to-get-catransform3d-from-projection-and-modelview-matrices)

我以前浏览过这个问题，网址；但不是绝对准确；我想知道为什么不准确；</p>

我发现x-axis和y-axis的旋转是相反的（我不能发布图像）；梯形（当旋转calayer时，它就像一个梯形）是相反的，dose calayer rotate不像opengl？但按z轴旋转时是正确的。

我想得到角度然后反向旋转两次；如何通过opengl矩阵得到角度？</p>

我想播放 QCAR 的电影；我可以得到opengl矩阵，我想用UIView来播放电影和其他（熟悉UIView），并使UIview像Texture。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T05:06:18.453

I just post a example on QCAR forum, you can check the detail [here](https://ar.qualcomm.at/content/play-remote-video-image-use-calayer-sample-code)

The idea is simple.

1.I don't use avassetreader to read the video pixel, instead I use AVPlayer and AVPlayerLayer which can play remote video file.

2.I need to convert opengl modelview matrix to CATransform3D so the AVPlayerLayer will attach on the trackable image.Thanks for [Hammer](https://stackoverflow.com/a/10952866/852487) on stackoverflow, he shared an example about how to make this.

3.I tried to render camera background use opengl and AVPlayerLayer at same time, but the performace is not good enough, so I use another calayer to render the camera background. There is a bug in 1.5.8 when getting camera frame, thank for andersfrank the problem was solved here.

I put my code on pastebin:

[http://pastebin.com/kmeVZ7jy](http://pastebin.com/kmeVZ7jy)

There are still some problem need to solve, but I think this is a right approach.

PS. For question 3 in my original post, you can fix it by set

```
 cameraLayer.contentsGravity = kCAGravityResizeAspectFill; 
```

This will fix the problem that the aspect ratio of the camera image is different with the iphone screen's.

# Update

All the problem are solved, please check my original post on vuforia and pastebin.

# ios - Xcode：故事板更改初始视图控制器

> ID：10933780
> 
> 赞同：5
> 
> 时间：2012-06-07T14:24:03.607
> 
> 标签：ios, xcode, storyboard

我使用“主-详细信息”模板启动了我的应用程序。我只是添加了另外两个 VC，并将“初始视图控制器”复选框更改为“安全文化 MainVC”......当我运行时，我的应用程序崩溃......

我需要做什么？！

这是默认情节提要的屏幕截图，其中包含我的另外两个 VC——它们在“导航控制器”是默认设置时工作。

显然，我是一个初学者，所以尽可能多的细节是有帮助的！谢谢！

![故事板](../Images/7feda6d058c840a05561dfa819364d5d.png)

*调试输出：*

> 2012-06-07 10:38:42.812 SafetyCulture[1020:fb03] -[safetyCultureMainVC topViewController]：无法识别的选择器发送到实例 0x6b7c210 2012-06-07 10:38:42.840 SafetyCulture[1020:fb03] *** 由于未捕获而终止应用程序异常'NSInvalidArgumentException'，原因是： ' - [safetyCultureMainVC topViewController]：发送到实例0x6b7c210无法识别的选择' ***第一掷调用堆栈：（0x16ae022 0x183fcd6 0x16afcbd 0x1614ed0 0x1614cb2 0x2619 0x17386 0x18274 0x27183 0x27c38 0x1b634 0x1598ef5 0x1682195 0x15e6ff2 0x15e58da 0x15e4d84 0x15e4c9b 0x17c65 0x19626 0x22ed 0x2255）终止称为抛出异常（lldb）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T15:04:58.687

`topViewController`是 a 的一种方法`UINavigationController`。您的应用程序尝试调用此方法，但由于它不存在，因此它崩溃了。

在您的图像中，您的入口点箭头仍在导航控制器上：

![在此处输入图像描述](../Images/7cd88999d2b587767e3a0c953c60ed16.png)

通过拖放将其移动到您的位置`safetyCultureMainVC`，如下所示： ![在此处输入图像描述](../Images/a150532536fd894bafbea7f20919ad86.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:29:27.330

当您在故事板中时，您的初始视图控制器需要嵌入到某些东西中。例如，标签栏控制器、导航控制器……

从您发布的工作流程来看，您的所有控制器都应该是同一个导航控制器的一部分。从安全文化开始，然后根据按下哪个按钮走两条路径之一。

它应该如下所示：

![在此处输入图像描述](../Images/b88e4be8467694d08673562e8fb59da7.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-31T16:44:00.057

对我来说，这是我笨拙地访问未在我的 ViewDidLoad 中设置的变量。这个新视图之前连接到另一个视图的 segue，该视图设置了变量。

# jquery - 使用 jQuery Ajax 发送自定义的肥皂信封头

> ID：10933782
> 
> 赞同：3
> 
> 时间：2012-06-07T14:24:07.950
> 
> 标签：jquery, .net, ajax, asmx, soapheader

我正在尝试使用 jQuery Ajax 调用 asmx 服务。

```
POST /YderWS.asmx HTTP/1.1
Host: localhost
Content-Type: text/xml; charset=utf-8
Content-Length: length
SOAPAction: "http://scandihealth.com/iwebservices/HentKommuner"

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Header>
    <AuthHeader xmlns="http://scandihealth.com/iwebservices/">
      <PartnerID>string</PartnerID>
      <SubPartnerID>string</SubPartnerID>
      <SubPartnerType>string</SubPartnerType>
    </AuthHeader>
  </soap:Header>
  <soap:Body>
    <HentKommuner xmlns="http://scandihealth.com/iwebservices/" />
  </soap:Body>
</soap:Envelope> 
```

以上是我需要发送到服务的 SOAP 1.1 请求。我正在使用以下调用来设置自定义肥皂标题。但是我的请求失败了。任何人都可以为我调试以下代码并让我知道我需要做什么吗？

```
var authHeader = "<PartnerID>SCTEST001</PartnerID> <SubPartnerID>001</SubPartnerID> <SubPartnerType>S</SubPartnerType>";
//Call the page method
$.ajax({
  type: "GET",
  url: servicename + "/" + functionName,
  beforeSend: function (xhr) {
    xhr.setRequestHeader('AuthHeader', authHeader);
  },
  success: successFn,
  error: errorFn
}); 
```

**编辑****如果需要其他信息来回答这个问题，请告诉我。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T17:09:50.520

`jQuery.ajax()`为任何类型的“Web 服务”发出通用 HTTP 请求，而不仅仅是 .NET Web 服务。您需要添加一个 SOAPAction 请求标头并将整个 SOAP 信封作为 POST 数据传递：

```
$.ajax({
    type: 'POST',
    url: servicename + "/" + functionName,
    contentType: 'text/xml; charset=utf-8',
    headers: {
        SOAPAction: 'http://scandihealth.com/iwebservices/HentKommuner'
    },
    data: '<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"><soap:Header><AuthHeader xmlns="http://scandihealth.com/iwebservices/"><PartnerID>string</PartnerID><SubPartnerID>string</SubPartnerID><SubPartnerType>string</SubPartnerType></AuthHeader></soap:Header><soap:Body><HentKommuner xmlns="http://scandihealth.com/iwebservices/" /></soap:Body></soap:Envelope>',
    success: successFn,
    error: errorFn
}); 
```

如果您使用 jQuery < 1.5，`beforeSend`则需要使用 设置 SOAPAction 请求标头。

`jQuery.ajax()`您可以在[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)找到文档。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T11:08:35.780

好像你错过了添加这些：

```
contentType: 'text/xml; charset=utf-8',
dataType: 'xml' 
```

**添加这 2 行后，它对我使用Selenium**调试它工作正常。

# powershell - 注册表：设置子权限

> ID：10933786
> 
> 赞同：2
> 
> 时间：2012-06-07T14:24:27.847
> 
> 标签：powershell

我正在尝试为某个注册表项设置权限，并为所有子项设置相同的权限。设置初始密钥的权限不是问题，但让其余的工作给我一个问题。

我为测试目的创建了以下内容：HKLM\Software\1 和子文件夹 2\3。

```
$REG = Get-Acl HKLM:\SOFTWARE\1
$Rule = New-Object System.Security.AccessControl.RegistryAccessRule ("Everyone","FullControl","Allow")
$REG.SetAccessRule($Rule)
$REG |Set-Acl -Path HKLM:\SOFTWARE\1
$Dir = Get-Childitem "HKLM:\SOFTWARE\1" -Recurse

foreach ($Folder in $Dir)
    {
    Write-Host $Folder
    Set-Acl $Folder $Reg
    } 
```

当我执行 Write-Host $Folder 时，我得到了正确的子项，但是当它把它推到 Set-ACL 时，我得到以下错误：

```
Set-Acl : Cannot find path 'C:\Documents and Settings\USER\Desktop\HKEY_LOCAL_MACHINE\SOFTWARE\1\2\3' because it does not exist. 
```

工作解决方案：

```
$REG = Get-Acl HKLM:\SOFTWARE\1
$Rule = New-Object System.Security.AccessControl.RegistryAccessRule ("Everyone","FullControl","Allow")
$REG.SetAccessRule($Rule)
$REG |Set-Acl -Path HKLM:\SOFTWARE\1
$Dir = Get-Childitem "HKLM:\SOFTWARE\1" -Recurse

foreach ($Folder in $Dir)
    {
    $REG.SetAccessRule($Rule)
    $Reg | Set-Acl $Folder.PSPath 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:33:08.273

您应该使用 PSPath 属性 [Tested on Windows 7 64-bit with Powershell ISE x86]-

```
$REG = Get-Acl HKLM:\SOFTWARE\1
$Dir = Get-Childitem "HKLM:\SOFTWARE\1" -Recurse

foreach ($Folder in $Dir)
{
     Write-Host $Folder
     Set-Acl $Folder.PSPath $Reg
} 
```

您总是可以找出对象上支持的成员，如下所示 -

```
foreach ($Folder in $Dir) 
{    
  $Folder | Get-Member 

} 
```

除了粘贴的内容之外，我不知道您是否正在使用 Get-ACL 进行任何其他预处理。

> 检查此链接 - [http://blogs.technet.com/b/heyscriptingguy/archive/2009/09/15/hey-scripting-guy-september-15-2009.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2009/09/15/hey-scripting-guy-september-15-2009.aspx)。

# c# - 字节数组或矩阵到 BitMap

> ID：10933791
> 
> 赞同：6
> 
> 时间：2012-06-07T14:24:53.857
> 
> 标签：c#, arrays, bitmap, byte

我目前遇到以下问题：我想转换来自具有以下配置的文件的字节数组：

```
Byte1: R color of pixel 0,0.
Byte2: G color of pixel 0,0.
Byte3: B color of pixel 0,0.
Byte4: R color of pixel 0,1.

...
ByteN: R color of pixel n,n. 
```

所以我想做的是将这些字节转换为位图，而不必逐个像素地设置，`bitmap.setPixel`因为它需要太长时间。

有什么建议么？提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T14:35:53.153

如果你有`byte[]`像素，宽度和高度，那么你可以使用`BitmapData`将字节写入位图，因为你也知道格式。这是一个例子：

```
//Your actual bytes
byte[] bytes = {255, 0, 0, 0, 0, 255};
var width = 2;
var height = 1;
//Make sure to clean up resources
var bitmap = new Bitmap(width, height);
var data = bitmap.LockBits(new Rectangle(Point.Empty, bitmap.Size), ImageLockMode.WriteOnly, PixelFormat.Format24bppRgb);
Marshal.Copy(bytes, 0, data.Scan0, bytes.Length);
bitmap.UnlockBits(data); 
```

这是一个非常快速的操作。

您至少需要在 C# 文件的顶部导入这三个命名空间：

```
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices; 
```

# android - Android AsyncTask - 更改监听器

> ID：10933795
> 
> 赞同：0
> 
> 时间：2012-06-07T14:25:00.333
> 
> 标签：android, thread-safety, android-asynctask

我有一个`AsyncTask`永远不会死的。在此事件的侦听`AsyncTask`器不断变化（取决于用户可见的活动/片段）。为此，我有如下设置：

*   一个接口：

> ```
> public interface TaskListener {
>    public void onItemChanged(String itemName)
> } 
> ```

*   AsyncTask 包含一个`TaskListener`使用公共方法注册/注销的成员变量。

> ```
> public void registerListener(TaskListener listener) {
>     mListener = listener;
> }
> 
> public void unregisterListener() {
>     mListener = null;
> } 
> ```

*   在`onPublishProgress()`方法（方法中调用via ）中`publishProgress()`，我通知了监听器。`doInBackground()``AsyncTask`

现在，我的问题是在通知听众时对这种情况有什么警告吗？特别是，我想知道它是否是线程安全的。即，如果`publishProgress()`同时`registerListener()`调用 和 ，正确的侦听器会收到回调吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:35:04.703

我曾经不得不调试一个 AsyncTask 并按照我的代码甚至进入了 android 的源代码。

`publishProgress()`不会直接调用`onProgressUpdate()`它，只是在队列中发布消息，队列处理程序最终会调用`onProgressUpdate()`.
所以严格来说，如果`publishProgress()`和`registerListener()`被同时调用`registerListener()`将首先到达那里。

如果您担心两者之间的干扰，只需将敏感代码包含在同步块中，而不是那里的任何变量。

```
synchronized(mListener) {
    // do stuff to mListener
} 
```

在您希望在处理侦听器时相互排斥的任何地方和任何地方都`onProgressUpdate()`这样做。`registerListener()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:37:45.110

`AsyncTask`不应该在活动之间生活。这不是真正正确的方法。安卓有`services`这个。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

[http://developer.android.com/guide/developing/tools/aidl.html](http://developer.android.com/guide/developing/tools/aidl.html)

# sql - 将列值复制到表的另一部分

> ID：10933800
> 
> 赞同：1
> 
> 时间：2012-06-07T14:25:14.197
> 
> 标签：sql

我有一个`SELECT`声明以及一个`join`使用两个表的声明。我们有桌子`Shell` 和桌子`Tanker`。

它看起来像这样`select S.*, T.* from shell S left outer join tanker T on S.id = T.id`。**请注意，它`Tanker`有大约 183 个字段。**

所以我得到以下数据

```
 ====Shell table==== =========Tanker table columsn======================   
    orgid  org eli lang orgid   org     Lang    {Other columns start}
    906875  s   1   1   NULL    NULL    NULL    NULL    NULL    NULL    NULL
    906876  s   2   2   NULL    NULL    NULL    NULL    NULL    NULL    NULL
    906877  b   2   1   NULL    NULL    NULL    NULL    NULL    NULL    NULL
    906878  s   1   1   NULL    NULL    NULL    NULL    NULL    NULL    NULL
    906879  b   2   1   NULL    NULL    NULL    NULL    NULL    NULL    NULL 
```

现在我要选择 orgid、org、lang 和其他 183 个字段。所以现在我这样做 `select T.* FROM ....` 了，但问题是当它选择`orgid`, `org`,时`lang`，`eli`它只获得 NULLS。这是有道理的，因为我只选择`T.*`并且它是一个左连接，所以这些自然会为空。

但是，出于我的目的，我需要它们成为 shell 表中的值。即，我想从 Shell 中选择 orgid、org、eli、lang，然后从 Tanker 中选择其余的。我知道我这样做的一种方法是

```
select s.orgid, s.org, s.eli, s.lang, t.column, t.column2, t.column3 
```

**但 RECALL**有`Tanker T`近 200 列。我不想在我的脚本上写 200 列。

所以这就是问题所在。

有什么方法可以将 orgid、org、eli、lang 的值（即实际的非空值）“复制”到空的列中？这样我就可以`select T.*`选择所有 200 列。

所以真的，如果你感到困惑，我正在寻找的最终结果是

```
 ====Shell table==== =========Tanker table columsn======================    
    orgid  org eli lang orgid   org     Eli Lang    {Other columns start}
    906875  s   1   1   906875  s        1  1       NULL    NULL
    906876  s   2   2   906876  s        2  2       NULL    NULL    NULL
    906877  b   2   1   906877  b        2  1       NULL    NULL
    906878  s   1   1   906878  s        1  1       NULL    NULL    NULL
    906879  b   2   1   906879  b        2  1       NULL    NULL    NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:36:25.777

在这种情况下，我建议只编写一个执行此选择的视图，并且您可以在需要此类功能的任何地方重用它。如果您需要修改它，只需更新视图即可（尽管您必须小心，您没有任何基本逻辑与该视图相悖）。

为了轻松地做到这一点，您实际上可以将一个表从 SSMS 中单击并拖动到查询窗口中。只需单击并将相关表下的 Columns 文件夹拖动到查询窗口中，它就会将所有列复制到其中。这样您就可以手动进行选择，而无需输入所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:27:58.880

您可以使用 Isnull（SQL 服务器）。它允许您提供一个值以使用以防您选择的列为空。

```
select isnull(t.org, s.org) as org 
```

如果 T 有一个值，它给你那个，否则它给你来自 S 的那个

编辑：

SPFiredrake 指出我专注于错误的部分。您可以做的另一件事（如果您担心的是一个巨大的 SQL 脚本）是从 T 中选择 * ，然后从 S 中选择可能需要的几列，然后以您将使用的任何语言处理比较逻辑数据。

# c# - ASP.NET 2.0 Gridviews 和人们做他们不应该做的事情。

> ID：10933801
> 
> 赞同：1
> 
> 时间：2012-06-07T14:25:21.870
> 
> 标签：c#, gridview, asp.net-2.0

我有一个页面，用户可以在其中将信息输入文本框中，并在提交信息后将信息保存到数据库中，并将信息添加到网格视图中，他们可以从中选择和编辑记录。

他们不应该，但是如果他们删除记录，在浏览器中点击后退按钮，然后再次在 gridview 中选择记录，他们将出现超出范围错误，因为该记录不再存在于数据库中。

所以我正在寻找关于如何最好地防止这种情况发生的想法。感谢任何建议，我会经常检查以提供任何其他信息，因为我知道这可能有点含糊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:56:38.393

您应该始终处理由于 Web 应用程序的继承性质而导致用户选择不存在的记录的情况......一旦用户看到数据，数据就会过时。

即使用户只是第一次显示该页面，也有可能另一个用户在检索结果后删除了该记录。

我建议检查记录是否存在，以某种方式提示用户数据已过时并自动刷新列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:38:01.787

您可以使用 javascript 暂时禁用后退按钮吗？

[http://csharpdotnetfreak.blogspot.com/2009/04/disable-browser-back-button-javascript.html](http://csharpdotnetfreak.blogspot.com/2009/04/disable-browser-back-button-javascript.html)

# sitecore - Sitecore 内容版本控制问题

> ID：10933804
> 
> 赞同：0
> 
> 时间：2012-06-07T14:25:42.417
> 
> 标签：sitecore

这发生在 Sitecore 版本 6.4.1 (rev. 110720)

最近，我遇到了几个用户的问题，他们无意中创建了一个项目的新版本——其中包含“空”字段。这让用户感到困惑，因为他们没有意识到他们看到的是不同版本的项目，并且他们认为他们的内容是随机消失的。

我不知道如何重现这一点，更不用说弄清楚他们是如何创建这些“幻影”项目版本的。

我有理由确定 Sitecore 用户没有在顶部菜单中明确单击“添加”新版本。据我所知，他们所做的只是“锁定”项目以进行编辑，这似乎创建了项目的新版本。在这一点上，新版本似乎是他们所看到的“默认”，他们正在抱怨内容已经“丢失”。

这是 Sitecore 的默认行为 - 当项目被“锁定”以进行编辑时创建项目的新版本？或者这是这个版本的 Sitecore 中的一个已知问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:30:30.287

如果某个项目属于工作流程，那么当您点击“编辑”按钮时，它将自动为您创建一个新版本。

此外，需要调查的是，在以前的 Sitecore 版本中，存在许多问题，内容编辑器中的许多操作会意外创建项目的版本（例如排序）。有关详细信息，请参阅[http://seankearney.com/post/Sitecore-item-and-version-design-flaw.aspx](http://seankearney.com/post/Sitecore-item-and-version-design-flaw.aspx)。

# jquery - jQuery 获取/更改完整的 href 详细信息

> ID：10933805
> 
> 赞同：0
> 
> 时间：2012-06-07T14:25:51.243
> 
> 标签：jquery

全部

首先是我想要做的：我有一个大图像和一组缩略图。每个图像（大小）都包装在一个中，以便用户可以单击它以转到相关资源。当我将鼠标悬停在缩略图上时，我想要做的是更改大图像的细节。我想用jQuery来做。（我是 jQuery 新手，所以请温柔一点）。

这个想法是注册一个 hoover() 处理程序，当用户将鼠标悬停在缩略图上时，我想将 href 和链接内容从缩略图复制到主图像。

这是我所拥有的：

```
<a href='main_image_url' id='main_img_link'> <img src="main_image.jpg" id='main_image'>MAIN TEXT</a>

<a href='thumb_image_url' id='thumb_img_link'> <img src="thumb_image.jpg" id='main_image'>THUMB TEXT</a>

(function() {
    var main_img = $('a#main_img_link');

    $('a#thumb_img_link').hover(function(){
        console.log($(this));
        console.log($(this).href);
        main_img.href=$(this).href;
    });
})(); 
```

好的，首先，这种方法不起作用——主图像上的链接不会改变。其次，我想弄清楚如何复制链接的内容（图像和文本）。我如何访问它的全部？？？？？？$(this).text 只给我拇指文本。$(this).attr() 给我错误

过去我在没有 jQuery 的情况下完成了相同的功能，但想了解如何将 jQuery 用于这些任务。

谢谢，鲁道夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:30:38.193

没有仔细阅读，但尝试改变

```
$(this).href 
```

至

```
$(this).attr('href') 
```

哦，你准备好的文档对我来说有点奇怪，试着把你的代码包装起来

```
$(function(){
    //do stuff
}); 
```

# google-search - 谷歌奇怪的源代码

> ID：10933808
> 
> 赞同：0
> 
> 时间：2012-06-07T14:26:03.083
> 
> 标签：google-search

为什么谷歌主页的源代码看起来这么奇怪？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T14:26:42.080

它被混淆以减小它的大小

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-04T11:50:09.283

源代码被“缩小”，因此，它也被“混淆”了。主要原因是减小大小，同时优化代码。

例如，Google 开发了包含 Closure Compiler 的 Closure Tools。它允许编译 Javascript 源代码以生成更快的 Javascript 代码。它删除了死代码，重写了一些代码并最小化了剩余部分。代码将运行得更快并且加载更小。

[维基百科的文章。](http://en.wikipedia.org/wiki/Minification_%28programming%29)

# node.js - 访问捆绑的 node.js 模块

> ID：10933809
> 
> 赞同：0
> 
> 时间：2012-06-07T14:26:10.497
> 
> 标签：node.js, express, npm

我写了一个基于 express.js 的小型网络应用程序。我提供 manifest.webapp 但 express.js 没有发送正确的 mime 类型。但是因为 express.js 捆绑了 mime 模块`require("mime").define(...)`，所以没有效果。它定义了错误模块的 mime 类型！

有没有办法访问与 express.js 捆绑的 mime 模块？或者有没有办法告诉 npm（和 nodejitsu）不要使用 express.js 的捆绑模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T15:50:19.117

我发现您可以通过这种方式访问​​捆绑的模块：

```
require("express/node_modules/mime").define({
    'application/x-web-app-manifest+json': ['webapp']
}); 
```

我不知道这是否是*正确的*方法，但我现在使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:37:49.457

我认为有两种方法可以解决这个问题。

### 使用简单的中间件

```
app.get('*.webapp', function (req, res, next) {
  res.header('Content-Type', 'application/x-web-app-manifest+json');
  next();
}); 
```

### 猴子补丁

修改响应对象并覆盖`setHeader`方法，您可以在其中将响应修改为实际值（它将作为中间件工作）。

```
var mime = require('mime');
mime.define({ 'application/x-web-app-manifest+json': [ 'webapp' ] });

app.use(function (req, res, next) {
  var setHeader = res.setHeader;

  res.setHeader = function (field, val) {
    // you can be more strict here
    if (field === 'Content-Type') {
      val = mime.lookup(req.path);
    }

    return setHeader.call(this, field, val);
  }

  next();
});
app.use(express.static(__dirname + 'your-static-dir')); 
```

因此，您将使用自己的 mime 模块而不是捆绑的模块。

**更新**静态中间件没有使用该`req.contentType`方法。

# javascript - 解析“流”JSON

> ID：10933811
> 
> 赞同：10
> 
> 时间：2012-06-07T14:26:35.443
> 
> 标签：javascript, jquery, json, spring-mvc, jackson

我在浏览器中有一个网格。

我想通过 JSON 将数据行发送到网格，但是浏览器应该在接收到 JSON 时不断地解析它，并在解析时将行添加到网格中。换句话说，在接收到整个 JSON 对象后，不应将行一次全部添加到网格中——它们应该在接收到时添加。

这可能吗？特别是使用 jQuery、Jackson 和 Spring 3 MVC？

这个想法有名字吗？我只看到网上很少记录这个想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-02-13T12:24:12.837

您可以使用专为此用例构建的[Oboe.js。](https://github.com/jimhigson/oboe.js/)

> Oboe.js 是一个开源 Javascript 库，用于使用流式加载 JSON，结合了 DOM 的便利性和 SAX 的速度和流动性。
> 
> 它可以将任何 JSON 解析为流，小到足以成为一个微型库，没有依赖关系，并且不关心您需要它与哪些其他库通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-25T16:53:17.107

Lazy.js 能够解析“流式”JSON（[演示](http://danieltao.com/lazy.js/demos/json/)）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:34:30.433

您无法使用浏览器的`JSON.parse`. 如果您正在流式传输文本，它总是会在某些时候尝试解析无效的 JSON，这将导致它失败。那里存在流式 JSON 解析器，您可能能够找到适合您需求的东西。

在您的情况下，最简单的方法仍然是为每一行发送完整的 JSON 文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:42:30.740

2017 年 3 月更新：

Websockets 允许您维护与服务器的开放连接，您可以使用该连接将数据*流式*传输到表中。您可以将单个行编码为 JSON 对象并发送它们，每次收到一个时，您都可以将其附加到表中。这可能是最佳方式，但它需要使用您的技术堆栈可能不完全支持的 websocket。如果 websockets 不是一个选项，那么您可以尝试以服务器允许的最小块请求数据，但这很昂贵，因为每个请求都有开销，并且您最终会执行多个请求来获取数据。

AFAIK 无法在完成之前开始解析 http 请求，也无法部分解析 JSON 字符串。此外，获取数据比处理数据要慢几个数量级，因此不值得这样做。

如果您需要解析大量数据，最好的办法是使用流式处理方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:33:59.933

查看**[SignalR](http://signalr.net/)**。

[http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)

# jquery - 最好隐藏所有元素（第一个）并显示选定的元素或循环它们并检查哪些可能被隐藏？

> ID：10933816
> 
> 赞同：1
> 
> 时间：2012-06-07T14:27:01.517
> 
> 标签：jquery

这是我的代码 HTML 代码：

```
​&lt;div id="exp_00" class="example">Hello 0</div>
<div id="exp_01" class="example">Hello 1</div>
<div id="exp_02" class="example">Hello 2</div>
<div id="exp_03" class="example">Hello 3</div>
<div id="exp_04" class="example">Hello 4</div> 
```

如果我想隐藏除 03 之外的所有元素，你有什么建议？

# 方法一：

```
var myID="03";
$('.example').hide();
$('#exp_' + myID)​​​.show();​ 
```

# 方法二：

```
var myID="03";
$('.example').each(function() {
    if($(this).attr('id').split('_')[1]==myID) {
        $(this).show();
    } else {
        $(this).hide();
    }
}); 
```

对于第二个，我做了 1 个循环，但是进行了一些拆分/相等操作。对于第一个，也是 1 个循环，但我将相同的运算符（隐藏或显示）应用到同一个元素 2 次。

你能说什么呢？依你的意见？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:32:23.290

```
$('.example').hide();
$('#exp_03').show(); 
```

或者

```
$('.example:not(#exp_03)').hide(); 
```

**福吉的回答**

```
$('#exp_03').show().siblings('.example').hide(); 
```

# javascript - jQuery函数 - 通过两次点击返回一个值

> ID：10933818
> 
> 赞同：1
> 
> 时间：2012-06-07T14:27:04.070
> 
> 标签：javascript, jquery, function, attr

我想在 JavaScript 函数中携带一个值，但使用 jQuery 来检测单击或悬停状态。

```
function foo(bar){
 var choc=bar;
} 
```

当我单击时，`foo()`我希望它检测第一次单击和第二次单击，以便我可以进行图像交换。

例子：

```
function foo(bar) {
    var choc=id;    
    $(id).click(function () {
        alert('first click');
    }, function () {
        alert('second click');
    }); 
} 
```

我只能返回第一次点击。这就是我想要做的：

一个不起作用的例子

```
<a href="javascript:open(5);" class="open">open <img id="5" class="swap5" src="down.png" /></a> 
<div id="box5">press the up button to close me</div> 
```

jQuery

```
$(document).ready(function() {
        $(".open").click(function(event){
              var id = event.target.id;
              $('#box' + id).slideToggle();
              $(".swap"+id).attr("src", "up.png");
        }, function () {
                var id = event.target.id;
                $('#box' + id).slideToggle();
                $(".swap"+id).attr("src", "down.png");
        });
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:29:20.360

使用`.toggle`而不是`.click`.

```
$(document).ready(function() {
    $(".open").toggle(function(event){
          event.preventDefault();
          var id = event.target.id;
          $('#box' + id).slideToggle();
          $(".swap"+id).attr("src", "up.png");
    }, function (event) {
          event.preventDefault();
          var id = event.target.id;
          $('#box' + id).slideToggle();
          $(".swap"+id).attr("src", "down.png");
    });
}); 
```

也失去了`href="javascript:open(5);"`标签中的`<a>`。改为使用`href="#"`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:33:38.777

This is a pretty hacky solution, but here is my take at it. Declare a counter variable that is initialized at 0. On click increment it and do a check to see if it is 2 to perform your action.

```
var counter = 0;

function foo(bar) {
  var choc=id;    
  $(id).click(function () {
    if(counter == 2) {
     //Perform action
     counter = 0; //reset counter
    } else {
      counter++;  //Increment counter
    }
  });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:31:25.083

您是否尝试使用双击事件处理程序？通过访问以下网址查看描述： http: [//api.jquery.com/dblclick/](http://api.jquery.com/dblclick/) 它有很好的文档记录，因此您应该可以直接找到它来实现

# facebook - Facebook 聊天报告“未授权”，尽管“xmpp_login”被授予

> ID：10933821
> 
> 赞同：0
> 
> 时间：2012-06-07T14:27:23.293
> 
> 标签：facebook, actionscript-3, flash, xmpp, x-facebook-platform

我正在尝试将 facebook 聊天集成到我们的移动 Flash/AIR 应用程序中，并且正在将[XIFF](http://www.igniterealtime.org/projects/xiff/)用于 XMPP 内容。当然，我必须为使用 access_token 而不是 sig 和 secret 的较新 Facebook API 修改一些文件。

对于那些熟悉 xiff/smack API 的人，我是这样建立连接的：

```
XFacebookPlatform.setFacebookSessionValues(AppData.FACEBOOK_APP_ID, AppData.getInstance().getFBSession().accessToken);
XMPPConnection.registerSASLMechanism("X-FACEBOOK-PLATFORM", XFacebookPlatform);

var con :XMPPConnection = new XMPPConnection();
con.server = "chat.facebook.com";
con.useAnonymousLogin = true;
con.connect(XMPPConnection.STREAM_TYPE_STANDARD); 
```

.

基本上，我已经到了用 IMO 应该是正确格式来回答挑战的地步：

```
var responseMap:Dictionary = new Dictionary();
responseMap.api_key = fb_api_key;
        responseMap.call_id = 0;
        responseMap.method = incomingChallengeMap.method;
        responseMap.nonce = incomingChallengeMap.nonce;
        responseMap.access_token = user_access_token;
        responseMap.v = "1.0";

        var challengeResponse:String = "api_key=" + responseMap.api_key;
        challengeResponse += "&call_id=" + responseMap.call_id;
        challengeResponse += "&method=" + responseMap.method;
        challengeResponse += "&nonce=" + responseMap.nonce;
        challengeResponse += "&access_token=" + responseMap.access_token;
        challengeResponse += "&v=" + responseMap.v;
        challengeResponse = Base64.encode( challengeResponse ); 
```

.

响应已发送，但作为答案，我收到以下信息：

```
<failure xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
<not-authorized xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/> 
```

这听起来像我没有授予“xmpp_login”，但我做到了。我通过[Graph API explorer](http://developers.facebook.com/tools/explorer)检查了它，并且对于它显示的相同 access_token ：

```
{
 "data": [
   {
     "installed": 1,
     "xmpp_login": 1,
     "user_online_presence": 1,
     "friends_online_presence": 1
   }
 ]
} 
```

我想这应该绰绰有余了。

但我仍然得到“未经授权”的失败。任何想法这里出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:30:57.977

有趣的是，问题出在这一行：

```
var con :XMPPConnection = new XMPPConnection(); 
```

必须用这一行替换：

```
var con :XMPPTLSConnection = new XMPPTLSConnection(); 
```

而已。facebook 聊天仅使用 TLS 连接进行身份验证。

.

虽然这确实有道理，但错误消息

```
<failure xmlns="urn:ietf:params:xml:ns:xmpp-sasl">
<not-authorized xmlns="urn:ietf:params:xml:ns:xmpp-sasl"/> 
```

在这里**非常**具有误导性，因为它暗示有权利的事情是错误的。

# android - 应用内购买在 Playstore 中不起作用，以前在市场中起作用

> ID：10933824
> 
> 赞同：5
> 
> 时间：2012-06-07T14:27:31.067
> 
> 标签：android, in-app-purchase

我的应用内计费有问题。当我连接到 google play 时，它显示一条消息

> 市场计费服务目前不可用。您可以继续使用此应用，但无法进行购买。

但早些时候我能够与市场联系并进行购买。但那个时候是安卓市场而不是谷歌游戏商店。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:46:22.227

最后我得到了答案。

> 在调用 billingservice 时，我不得不使用 getApplicationContext.bindservice() 而不是 this.bindservice()。因为我的活动在 tabhost 下，它不接受上下文“this”..

另请参阅此链接[billing-not-supported-error](https://stackoverflow.com/questions/8353969/android-cannot-bind-to-service-in-app-billing)

# javascript - 每 10 毫秒检查鼠标是否仍然悬停在一个元素上的函数（如果是，则运行一个函数）

> ID：10933828
> 
> 赞同：0
> 
> 时间：2012-06-07T14:27:54.310
> 
> 标签：javascript, jquery

我想知道在元素（例如 div class="myiv"）悬停后是否有要运行的函数，如果它仍然悬停，则每 X 毫秒检查一次，如果是，则运行另一个函数。

编辑：这对我有用：http: [//jsfiddle.net/z8yaB/](http://jsfiddle.net/z8yaB/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:33:47.183

jQuery 有 hover() 方法，它为您提供了开箱即用的功能：

```
$('.myiv').hover(
    function () {
        // the element is hovered over... do stuff

    }, 
    function () {
        // the element is no longer hovered... do stuff
    }
); 
```

每隔 x 毫秒检查一次元素是否仍然悬停并响应以下调整：

```
var x = 10; // number of milliseconds
var intervalId;
$('.myiv').hover(
    function () {
        // the element is hovered over... do stuff
        intervalId = window.setInterval(someFunction, x);
    }, 
    function () {
        // the element is no longer hovered... do stuff
        window.clearInterval(intervalId);
    }
); 
```

演示 - [http://jsfiddle.net/z8yaB/](http://jsfiddle.net/z8yaB/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:36:27.063

您可以使用`variablename = setInterval(...)`在鼠标悬停时重复启动功能，并在鼠标悬停`clearInterval(variablename)`时停止它。

[http://jsfiddle.net/XE8sK/](http://jsfiddle.net/XE8sK/)

```
var marker;
$('#test').on('mouseover', function() {
    marker = setInterval(function() {
        $('#siren').show().fadeOut('slow');
    }, 500);
}).on('mouseout', function() {
    clearInterval(marker);
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:36:49.913

对于简单界面中的大多数用途，您可以使用 jquery 的悬停功能，如果鼠标悬停，则只需将布尔值存储在某处。然后你可以使用一个简单的`setInterval`循环来检查每毫秒这个状态。您还可以在链接副本中的第一条评论中看到此答案（编辑：现在在此处的其他答案中）。

但是在某些情况下，特别是当悬停时您的对象“在”鼠标和您的对象之间移动时会产生误报。

对于这些情况，我创建了这个函数来检查当 jquery 调用我的处理程序时事件是否真的是悬停元素：

```
var bubbling = {};
bubbling.eventIsOver = function(event, o) {
if ((!o) || o==null) return false;
var pos = o.offset();
var ex = event.pageX;
var ey = event.pageY;
if (
    ex>=pos.left
    && ex<=pos.left+o.width()
    && ey>=pos.top
    && ey<=pos.top+o.height()
) {
    return true;
}
return false;
}; 
```

当我收到 mouseout 事件时，我使用这个函数来检查鼠标是否真的离开了：

```
 $('body').delegate(' myselector ', 'mouseenter', function(event) {
    bubbling.bubbleTarget = $(this);

    // store somewhere that the mouse is in the object

}).live('mouseout', function(event) {
    if (bubbling.eventIsOver(event, bubbling.bubbleTarget)) return;

    // store somewhere that the mouse leaved the object

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:36:09.653

```
var interval = 0;
$('.myiv').hover(
    function () {
        interval = setInterval(function(){
           console.log('still hovering');
        },1000);
    }, 
    function () {
        clearInterval(interval);
    }
); 
```

# ios - 无法通过 iPhone 应用程序中的 Oauth 2.0 获取 google+ 的访问令牌

> ID：10933829
> 
> 赞同：2
> 
> 时间：2012-06-07T14:27:57.010
> 
> 标签：ios, oauth-2.0, google-plus

我正在尝试在 iPhone 应用程序中使用 Oauth 2.0 访问 Google+ API。为此，我正在使用 OauthConsumer 库。我得到了未经授权的 request_token 和授权码，但无法使用授权码将该 request_token 交换为 access_token。我收到错误为“invalid_request”。下面是代码片段，我是否做错了什么或缺少任何参数？

代码：

```
-(void)getAccessTokenWithAuthorizationCode:(NSString *)code
{

    NSURL *accessTokenURL = [NSURL     URLWithString:@"https://accounts.google.com/o/oauth2/token"];

    OAMutableURLRequest *accessRequest = [[OAMutableURLRequest alloc] initWithURL:accessTokenURL
                                                                    consumer:consumer
                                                                       token:requestToken
                                                                       realm:nil   // our service provider doesn't specify a realm
                                                           signatureProvider:nil]; // use the default method, HMAC-SHA1
    [accessRequest setHTTPMethod:@"POST"];

    OARequestParameter *authCode = [[OARequestParameter alloc] initWithName:@"code" value:code];
    OARequestParameter *redirectURI = [[OARequestParameter alloc] initWithName:@"redirect_uri" value:kRedirectURI];
    OARequestParameter *granType = [[OARequestParameter alloc] initWithName:@"grant_type" value:@"authorization_code"];

    [accessRequest setParameters:[NSArray arrayWithObjects:authCode, redirectURI, granType, nil]];

    OADataFetcher *fetcher = [[OADataFetcher alloc] init];

    [fetcher fetchDataWithRequest:accessRequest 
                     delegate:self 
            didFinishSelector:@selector(accessTokenTicket:didFinishWithData:) 
              didFailSelector:@selector(accessTokenTicket:didFailWithError:)];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T20:45:18.780

仅供参考 - 我不熟悉 Objective-C，但希望一些 OAuth 知识可以帮助您解决这个问题。

“授权请求令牌”用于 OAuth 1.0 “授权码”用于 OAuth 2.0

我没有看到任何说 OauthConsumer 支持 OAuth 2.0

你问：“我做错了什么或缺少任何参数吗？”

我认为您缺少客户端密码，这是在 OAuth 2.0 中交换授权码以获取访问令牌所必需的。请参阅[Google OAuth 2.0 文档](https://developers.google.com/accounts/docs/OAuth2InstalledApp#handlingtheresponse)，详细了解您需要提供什么来交换访问令牌的授权代码。

您可能需要查看适用于 Mac 的 Google 工具箱 - OAuth 2 控制器：

[http://code.google.com/p/gtm-oauth2/wiki/Introduction](http://code.google.com/p/gtm-oauth2/wiki/Introduction)

# python - 如何使用 MySQL 数据执行此插入 PostgreSQL？

> ID：10933831
> 
> 赞同：1
> 
> 时间：2012-06-07T14:28:00.997
> 
> 标签：python, mysql, django, database-migration

我正在处理将 mysql 数据库转移到 postgres 数据库。我已阅读[此处](http://wiki.postgresql.org/wiki/Converting_from_other_Databases_to_PostgreSQL)提供的所有文章，以及阅读[stackoverflow 上提供的一些解决方案。](https://stackoverflow.com/questions/8385002/the-easiest-way-to-migrate-a-django-project-from-mysql-to-postgresql)推荐的工具似乎对我不起作用。这两个数据库都是由 Django 的 syncdb 生成的，尽管 postgres db 目前或多或少是空的。我尝试使用 Django 内置的 dumpdata / loaddata 函数及其序列化程序来迁移表，但它似乎并不喜欢我的很多表，这让我相信在这种情况下编写手动解决方案可能是最好的。我有代码来验证数据库中每个表的列标题是否相同，并且匹配表是否存在 - 工作正常。我在想最好只逐行抓取mysql数据，然后逐行将其插入到相应的postgres表中（我不关心速度atm）。一件事是，我不知道构造插入语句的正确方法是什么。我有类似的东西：

```
table_name = retrieve_table()
column_headers = get_headers(table_name) #can return a tuple or a list
postgres_cursor = postgres_con.cursor()
rows = mysql_cursor.fetchall()      
for row in rows: #row is a tuple
   postgres_cursor.execute(????) 
```

在哪里 ？？？将是插入语句。我只是不知道构建它的正确方法是什么。我有我想作为字符串插入的表名，我有我可以将其视为列表、元组或字符串的列标题，并且我有我想插入的相应值。构建语句的推荐方法是什么？我已经阅读了[psycopg 文档页面](http://initd.org/psycopg/docs/usage.html)上的文档，但我并没有完全看到满足我需求的方式。我不知道（或认为）这是正确迁移的完全正确方法，所以如果有人能以正确的方式引导我或提供任何建议，我将不胜感激。

# objective-c - 如何创建一个保持其大小在目标 c 中的动态数组？

> ID：10933835
> 
> 赞同：2
> 
> 时间：2012-06-07T14:28:17.947
> 
> 标签：objective-c, ios, c, arrays, automatic-ref-counting

我正在目标 c 中编写一个 iOS 程序，我需要一个具有以下特征的数组：

1）它的形状需要在运行时决定。

2）它需要能够在objective-c类中存储为属性或全局

3）**当我在特定索引处插入对象时，它需要停留在该索引处。** 例如，如果我在索引 5 处插入，则对象需要覆盖索引 5 处的任何内容，并且**不移动此元素或任何其他元素**（类似于 java 数组的工作方式）

我看过 NSMutableArray 但这似乎不符合我上面描述的内容，因为它会在您插入时移动元素。我也试过`NSString *myArray = malloc(10 * sizeof(NSString *));`，但这给了我一个关于需要桥接演员的错误。我不知道那是什么。

我正在使用 ARC，以防万一。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T14:32:04.977

1)`nameOfMyArray = [[NSMutableArray alloc] initWithObjects:@"obj1", @"obj2", "obj3",nil];`

3）为什么不做一个插入操作，而不是做一个替换操作？

```
[nameOfMyArray replaceObjectAtIndex:0 withObject: @"newObject here"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T14:33:14.207

听起来你想要典型的 NSMutableArray 行为。

```
NSMutableArray *arr = [[NSMutableArray alloc] init];
// add a few objects, let's assume there are 10 objects
[arr replaceObjectAtIndex:5 withObject:myObject]; 
```

使用 replace 方法，什么都不会改变。您的代码看起来更像 C，而不是 Objective-C。我建议阅读一本书或一些文档来了解应该如何使用 Objective-C 对象——你永远不会 malloc 一个 Objective-C 对象，而应该使用 alloc 类方法。

# squirrel-sql - 是否可以通过 Squirrel SQL 中的别名打开多个查询选项卡而不打开另一个连接？

> ID：10933836
> 
> 赞同：5
> 
> 时间：2012-06-07T14:28:19.853
> 
> 标签：squirrel-sql

我一直在 SquirreL SQL 客户端中注释我的查询，但我也一直在使用其他别名打开新连接，但是在选项卡区域中这一切都变得有点拥挤。

我还能够将我的查询保存在文件中，这很好，除了文件的整个路径（通常很长）出现在选项卡中。

是否可以只打开另一个 SQL 选项卡，或者是否有办法简化我打开多少个 SQL 查询选项卡？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T18:52:38.617

我希望，答案仍然有用，尽管这个问题是前段时间提出的:-)

> 是否可以只打开另一个 SQL 选项卡，或者是否有办法简化我打开多少个 SQL 查询选项卡？

您可以为当前会话打开一个新的 SQL 工作表。尝试以下方法之一：

*   快捷键 CTRL+N
*   菜单会话 >> 新 SQL 工作表
*   在工具栏中，回滚按钮右侧的图标。

> 我还能够将我的查询保存在文件中，这很好，除了文件的整个路径（通常很长）出现在选项卡中。

这在 3.4.0 中发生了变化。请查看[更改](http://squirrel-sql.svn.sourceforge.net/viewvc/squirrel-sql/trunk/sql12/doc/src/main/resources/changes.txt)

*当打开的文件存在时，会显示一个小按钮，而不是在会话选项卡中显示文件路径。单击该按钮将打开一个弹出菜单，可以访问有关该文件的多个信息和功能。*

# html - 仅使用 css的换行符（如）

> ID：10933837
> 
> 赞同：90
> 
> 时间：2012-06-07T14:28:21.637
> 
> 标签：html, css, styling

是否有可能在纯 css 中，即不添加额外的 html 标签，像这样换行`<br>`？`<h4>`我想要元素之后的换行符，但不是之前：

HTML

```
<li>
  Text, text, text, text, text. <h4>Sub header</h4>
  Text, text, text, text, text.
</li> 
```

CSS

```
h4 {
  display: inline;
} 
```

我发现了很多这样的问题，但总是有像*“使用显示：块；”这样的答案。*`<h4>`，当必须保持在同一条线上时，我不能这样做。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-06-07T14:44:27.510

它是这样工作的：

```
h4 {
    display:inline;
}
h4:after {
    content:"\a";
    white-space: pre;
} 
```

示例：http: [//jsfiddle.net/Bb2d7/](http://jsfiddle.net/Bb2d7/)

诀窍来自这里：[https](https://stackoverflow.com/a/66000/509752) ://stackoverflow.com/a/66000/509752 （有更多解释）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T14:30:24.210

尝试

```
h4{ display:block;} 
```

在你的 CSS

[http://jsfiddle.net/ZrJP6/](http://jsfiddle.net/ZrJP6/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-07T14:35:43.613

您可以使用[`::after`](https://developer.mozilla.org/en-US/docs/Web/CSS/::after)在 之后创建一个`0px`-height 块`<h4>`，它可以有效地将之后的任何内容移动`<h4>`到下一行：

```
h4 {
  display: inline;
}
h4::after {
  content: "";
  display: block;
}
```

```
<ul>
  <li>
    Text, text, text, text, text. <h4>Sub header</h4>
    Text, text, text, text, text.
  </li>
</ul>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-22T22:35:19.850

我知道我参加聚会迟到了，但这是我的两分钱。

CSS

```
li h4 {
   break-after: always;
}

li h4::after {
   display: block;
   content: " ";
} 
```

# python - 如何在 Python 中以相反的顺序读取 CSV 文件？

> ID：10933838
> 
> 赞同：16
> 
> 时间：2012-06-07T14:28:24.600
> 
> 标签：python, csv

我知道如何为 TXT 文件执行此操作，但现在我在为 CSV 文件执行此操作时遇到了一些麻烦。

如何在 Python 中从底部读取 CSV 文件？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-07T14:33:55.717

与文本文件的方式几乎相同：将整个内容读入列表，然后倒退：

```
import csv
with open('test.csv', 'r') as textfile:
    for row in reversed(list(csv.reader(textfile))):
        print ', '.join(row) 
```

如果你想变得花哨，你可以编写很多代码，从文件末尾开始读取块并向后工作，一次发出一行，然后将其提供给`csv.reader`，但这仅适用于一个文件可以查找，即磁盘文件但不是标准输入。

* * *

> 我们中的一些人有不适合内存的文件，任何人都可以提供不需要将整个文件存储在内存中的解决方案吗？

这有点棘手。幸运的是，所有`csv.reader`期望都是一个类似迭代器的对象，每次调用都会返回一个字符串（行）`next()`。因此，我们采用 Darius Bacon 在“[在 python 中搜索文件的最后 x 行的最有效方法](https://stackoverflow.com/questions/260273/most-efficient-way-to-search-the-last-x-lines-of-a-file-in-python/260433#260433)”中提出的技术来向后读取文件的行，而不必拉入整个文件：

```
import os

def reversed_lines(file):
    "Generate the lines of file in reverse order."
    part = ''
    for block in reversed_blocks(file):
        for c in reversed(block):
            if c == '\n' and part:
                yield part[::-1]
                part = ''
            part += c
    if part: yield part[::-1]

def reversed_blocks(file, blocksize=4096):
    "Generate blocks of file's contents in reverse order."
    file.seek(0, os.SEEK_END)
    here = file.tell()
    while 0 < here:
        delta = min(blocksize, here)
        here -= delta
        file.seek(here, os.SEEK_SET)
        yield file.read(delta) 
```

并输入代码以在它们到达*之前*`reversed_lines`反转行，从而消除对and的需要：*`csv.reader``reversed``list`*

 *```
import csv
with open('test.csv', 'r') as textfile:
    for row in csv.reader(reversed_lines(textfile)):
        print ', '.join(row) 
```

有一个更 Pythonic 的解决方案可能，它不需要对内存中的块进行逐个字符的反转（提示：只需获取块中有行尾的索引列表，反转它，并使用它来切块），并使用`chain`out`itertools`将连续块的线簇粘合在一起，但这留给读者作为练习。

* * *

> 值得注意的是，上面的 reversed_lines() 习惯用法仅在 CSV 文件中的列不包含换行符时才有效。

啊！总有一些东西。幸运的是，解决这个问题还不错：

```
def reversed_lines(file):
    "Generate the lines of file in reverse order."
    part = ''
    quoting = False
    for block in reversed_blocks(file):
        for c in reversed(block):
            if c == '"':
                quoting = not quoting
            elif c == '\n' and part and not quoting:
                yield part[::-1]
                part = ''
            part += c
    if part: yield part[::-1] 
```

当然，如果您的 CSV 方言不使用`"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T02:23:09.050

以@mike-desimone 的回答为基础。这是一个解决方案，它提供与 python 文件对象相同的结构，但逐行反向读取：

```
import os

class ReversedFile(object):
    def __init__(self, f, mode='r'):
        """
        Wraps a file object with methods that make it be read in reverse line-by-line

        if ``f`` is a filename opens a new file object

        """
        if mode != 'r':
            raise ValueError("ReversedFile only supports read mode (mode='r')")

        if not type(f) == file:
            # likely a filename
            f = open(f)

        self.file = f
        self.lines = self._reversed_lines()

    def _reversed_lines(self):
        "Generate the lines of file in reverse order."
        part = ''
        for block in self._reversed_blocks():
            for c in reversed(block):
                if c == '\n' and part:
                    yield part[::-1]
                    part = ''
                part += c
        if part: yield part[::-1]

    def _reversed_blocks(self, blocksize=4096):
        "Generate blocks of file's contents in reverse order."
        file = self.file

        file.seek(0, os.SEEK_END)
        here = file.tell()
        while 0 < here:
            delta = min(blocksize, here)
            here -= delta
            file.seek(here, os.SEEK_SET)
            yield file.read(delta)

    def __getattribute__(self, name):
        """ 
        Allows for the underlying file attributes to come through

        """ 
        try:
            # ReversedFile attribute
            return super(ReversedFile, self).__getattribute__(name)
        except AttributeError:
            # self.file attribute
            return getattr(self.file, name)

    def __iter__(self):
        """ 
        Creates iterator

        """ 
        return self

    def seek(self):
        raise NotImplementedError('ReversedFile does not support seek')

    def next(self):
        """
        Next item in the sequence

        """
        return self.lines.next()

    def read(self):
        """
        Returns the entire contents of the file reversed line by line

        """
        contents = ''

        for line in self:
            contents += line

        return contents

    def readline(self):
        """
        Returns the next line from the bottom

        """
        return self.next()

    def readlines(self):
        """
        Returns all remaining lines from the bottom of the file in reverse

        """
        return [x for x in self] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T10:51:29.390

去吧。这是一个从 CSV 文件中反转行的简单程序。

```
import csv
BC_file = open('Master.csv', 'rb')
BC_reader = csv.reader(BC_file)
next(BC_reader)
for row in reversed(list(BC_reader)):
    print row[0] 
```*

# javascript - 我的 magento 网站把菜单吓坏了

> ID：10933844
> 
> 赞同：0
> 
> 时间：2012-06-07T14:28:41.563
> 
> 标签：javascript, html, css, magento

首先很抱歉我可以在这里放代码，最好的方法是查看实时站点。

当我去 www.theprinterdepo.com 时，菜单在鼠标悬停时表现得很奇怪。

但是，当我转到产品页面时，它工作正常。

我想知道 html 中发生了什么，但我找不到问题所在。

粘贴整个生成的 html 不会有任何好处。

这是一个magento电子商务网站。所以要么是 html、js 或 css 的问题吗？

一旦检测到，我可以粘贴生成该部分问题的原始代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:12:25.440

我知道了！在您的任何 css（可能在资产 new.css 中）的第 28 行中有一个名为“over”的类，删除该类，一切都会好起来的。下面是给定的类。

```
.over {
    left: 40px;
    position: absolute;
    top: 10px;
    z-index: -1;
} 
```

我正在附上关于这门课的图片。[https://dl.dropbox.com/u/19982181/svs.jpg](https://dl.dropbox.com/u/19982181/svs.jpg)

# android - Android 图像 fipper/curl 缩放

> ID：10933848
> 
> 赞同：1
> 
> 时间：2012-06-07T14:28:48.327
> 
> 标签：android, bitmap, android-imageview

我正在寻找具有缩放功能（捏缩放）和翻页功能的图像查看器。

我发现了很多精美的图像查看器和翻页器，但我找不到两者兼得的。有什么可以做到这一点吗？或者更好的是，如何将图像查看器与页面卷曲库结合起来？

这是我已经尝试过的视图列表：

[安卓页面卷曲](https://github.com/harism/android_page_curl/)

[翻页机](http://code.google.com/p/android-page-curl/)

[这里有一篇关于翻页的 SO 文章](https://stackoverflow.com/questions/3912849/implement-page-curl-on-android)

如果这真的很难/不可能做到，那么如果它只是一个页面被推入屏幕的滑动动画就可以了。

# c# - migrator.net - 你能生成模式吗

> ID：10933849
> 
> 赞同：1
> 
> 时间：2012-06-07T14:28:48.743
> 
> 标签：c#, migratordotnet

我想知道一旦你已经创建了一个数据库和/或已经运行了迁移，是否有办法在 C# 和 migrator.net api 中生成一个完整的模式？

# javascript - Windows 小工具 - 圆角

> ID：10933850
> 
> 赞同：0
> 
> 时间：2012-06-07T14:28:52.500
> 
> 标签：javascript, css, windows, windows-desktop-gadgets

有什么方法可以为 Windows 小工具中的元素创建边框半径？我尝试使用 ie-css3.htc 但不起作用。有任何想法吗 ？

//编辑：我想重建我的问题。我正在寻找不需要使用图像的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:03:40.760

对于小工具本身，请尝试创建顶部、重复的中间部分和底部。

# c# - 为什么 C# HashSets 有 Distinct() 方法

> ID：10933851
> 
> 赞同：6
> 
> 时间：2012-06-07T14:28:54.003
> 
> 标签：c#, hashset

当 HashSet 无论如何都不能包含重复项时，为什么在 HashSet 上有一个可用的 Distinct() 方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T14:30:20.653

`Distinct`方法不是上的，`HashSet<>`而是`IEnumerable<>`那个实现的`HashSet<>`。

某些类型不能“省略”扩展方法。一旦添加到一个类型，所有该类型和任何派生都将获得扩展方法。

只是为了证明，如果你扩展了，`object`如果你添加了相关的命名空间，你会乱扔所有东西。所以不要添加：

```
namespace System
{
    public static class ObjectExtensions
    {
        public static void Garbage(this object foo)
        {
        }
    }
} 
```

# java - 使用 Eclipse JDT 以编程方式调用菜单项，插件开发

> ID：10933852
> 
> 赞同：1
> 
> 时间：2012-06-07T14:28:55.643
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-jdt

我一直试图弄清楚如何从我正在开发的插件中调用 Eclipse 菜单项。说，为了这篇文章，我想在右键菜单中调用eclipse“格式”菜单项来格式化源，我将如何通过调用该项目来执行此操作（即不仅仅是模仿该菜单项的效果，实际上叫它）？

我不是在寻找如何格式化代码，只是在寻找调用菜单项的想法。

我倾向于 IWorkbench、Shell、ToolBar、ToolItem 等的 API 信息，但我真的不知道。我无法在 API 或其他任何在线网站上找到有关此主题的任何内容。有没有比编程更好的方法来做到这一点？

Eclipse JDT - [http://help.eclipse.org/indigo/index.jsp?nav=%2F3](http://help.eclipse.org/indigo/index.jsp?nav=%2F3)

编辑：

```
String commandId = "org.eclipse.jdt.ui.edit.text.java.format";
IHandlerService handlerService = (IHandlerService)(IHandlerService ) PlatformUI.getWorkbench().getService(IHandlerService.class);
handlerService.executeCommand(commandId, null); 
```

就那么简单。最难的部分是找到 commandId，正如 rlegendi 所提到的，它可以很容易地搜索到。这正是我想要的。它通过 ID 访问该插件，然后执行它。简单有效。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:44:32.470

我不确定，但您可能想了解的是[Command/Delegate](http://wiki.eclipse.org/Platform_Command_Framework)框架。

顺便说一句，如果您安装了*Eclipse Platform SDK*插件（默认情况下可用），您实际上可以查看作为当前 Eclipse 产品一部分的任何插件的源代码（例如，尝试`Ctrl+Shift+T`输入，在那里您可以找到它，您可以使用 ) 进行搜索，并且您可以将任何这些插件项目导入您自己的工作区进行检查。`ISourceViewer``FORMAT``Ctrl+Shift+G`

# google-docs-api - 如何使用其 api 设置谷歌文档的权限？

> ID：10933854
> 
> 赞同：0
> 
> 时间：2012-06-07T14:29:02.793
> 
> 标签：google-docs-api

我是 google doc api 的新手，并且使用 google doc api 3rd version with java ，

```
I m trying to share doc with permission and want to change permission on different call,

Here there is some code which i had designed to share persmission and update and delete permission , but some how i wil got some problem on each operation,

On first time i can share docs with permission , but once i had share and again try to share with other permission then it cant allow me to upda so what should be i missing at here ,

AclEntry acl = new AclEntry();
    AclScope aclScope = new AclScope(AclScope.Type.USER,"xyz@gmail.com");
    acl.setScope(aclScope);
    //AclRole aclRole = new AclRole();
    acl.setRole(AclRole.READER);

    URL url = buildUrl(URL_DEFAULT + URL_DOCLIST_FEED + "/" + folderResId + URL_FOLDERS + "/" + entry.getResourceId());
    System.out.println(url.toString());

    System.out.println("url : "+entry.getAclFeedLink().getHref());

    // For Insert
    //service.insert(new URL(entry.getAclFeedLink().getHref()), acl);

    // For Update
    //service.getRequestFactory().setHeader("If-Match", "*");
    //service.update(new URL(entry.getEditLink().getHref()), acl);

    // For Delete
    service.getRequestFactory().setHeader("If-Match", "*");
    service.delete(new URL(entry.getEditLink().getHref()), aclScope);

after insert first tim eif itry to insert again i wil get this error..
    com.google.gdata.util.VersionConflictException: This user already has access to the document.

After insert if i try to delete that then i wil get this error
    com.google.gdata.util.InvalidEntryException: Unexpected resource version ID

thnaks in advance, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T17:30:16.727

只是对您的第一条错误消息的评论：根据我对这个 api 的经验，这实际上是预期的行为，只要您尝试插入与已经存在的 acl 记录等效的记录。换句话说，您不能插入现有 acl 记录的副本，当您尝试这样做时总是会遇到该异常。

# ssl - JBoss 5 - CA 签名证书导致 java.io.IOException：多余的私钥

> ID：10933856
> 
> 赞同：1
> 
> 时间：2012-06-07T14:29:09.780
> 
> 标签：ssl, jboss, key, private

我有一个 JBoss 5.0.1.GA 实例。我们在这台 JBoss 服务器上使用自签名 SSL 证书已经很久了，没有任何问题。

最后我们收到了一个 CA 签名的证书，我继续把它放进去。

现在我得到这个错误（下）。你能帮我弄清楚发生了什么吗？

```
2012-06-06 13:19:12,998 INFO  [org.apache.coyote.http11.Http11Protocol] (main) Initializing Coyote HTTP/1.1 on http-192.168.2.8-8080
2012-06-06 13:19:12,999 INFO  [org.apache.coyote.ajp.AjpProtocol] (main) Initializing Coyote AJP/1.3 on ajp-192.168.2.8-8009
2012-06-06 13:19:13,099 ERROR [org.apache.coyote.http11.Http11Protocol] (main) Error initializing endpoint
java.io.IOException: excess private key
    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.init(JSSESocketFactory.java:456)
    at org.apache.tomcat.util.net.jsse.JSSESocketFactory.createSocket(JSSESocketFactory.java:139)
    at org.apache.tomcat.util.net.JIoEndpoint.init(JIoEndpoint.java:498)
    at org.apache.coyote.http11.Http11Protocol.init(Http11Protocol.java:176)
    at org.apache.catalina.connector.Connector.initialize(Connector.java:1029)
    at org.apache.catalina.core.StandardService.initialize(StandardService.java:683)
    at org.apache.catalina.core.StandardService.init(StandardService.java:695)
    at org.apache.catalina.core.StandardService.start(StandardService.java:510)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:736)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:575)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:297)
    at org.jboss.mx.server.RawDynamicInvoker.invoke(RawDynamicInvoker.java:164)
    at org.jboss.mx.server.MBeanServerImpl.invoke(MBeanServerImpl.java:668)
    at org.jboss.web.tomcat.service.deployers.TomcatService.startService(TomcatService.java:312)
    at org.jboss.system.ServiceMBeanSupport.jbossInternalStart(ServiceMBeanSupport.java:376)
    at org.jboss.system.ServiceMBeanSupport.pojoStart(ServiceMBeanSupport.java:216)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:59)
    at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:150)
    at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
    at org.jboss.kernel.plugins.dependency.KernelControllerContextAction$JoinpointDispatchWrapper.execute(KernelControllerContextAction.java:241)
    at org.jboss.kernel.plugins.dependency.ExecutionWrapper.execute(ExecutionWrapper.java:47)
    at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchExecutionWrapper(KernelControllerContextAction.java:109)
    at org.jboss.kernel.plugins.dependency.KernelControllerContextAction.dispatchJoinPoint(KernelControllerContextAction.java:70)
    at org.jboss.kernel.plugins.dependency.LifecycleAction.installActionInternal(LifecycleAction.java:221)
    at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:54)
    at org.jboss.kernel.plugins.dependency.InstallsAwareAction.installAction(InstallsAwareAction.java:42)
    at org.jboss.dependency.plugins.action.SimpleControllerContextAction.simpleInstallAction(SimpleControllerContextAction.java:62)
    at org.jboss.dependency.plugins.action.AccessControllerContextAction.install(AccessControllerContextAction.java:71)
    at org.jboss.dependency.plugins.AbstractControllerContextActions.install(AbstractControllerContextActions.java:51)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
    at org.jboss.system.ServiceController.start(ServiceController.java:460)
    at org.jboss.system.microcontainer.jmx.ServiceControllerStartStopLifecycleCallback.install(ServiceControllerStartStopLifecycleCallback.java:44)
    at sun.reflect.GeneratedMethodAccessor226.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:59)
    at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:150)
    at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
    at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300)
    at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87)
    at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:1535)
    at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1500)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:943)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
    at org.jboss.system.ServiceController.start(ServiceController.java:460)
    at org.jboss.system.microcontainer.jmx.ServiceControllerStartStopLifecycleCallback.install(ServiceControllerStartStopLifecycleCallback.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:59)
    at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:150)
    at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
    at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300)
    at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87)
    at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:1535)
    at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1500)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:943)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.system.ServiceController.doChange(ServiceController.java:688)
    at org.jboss.system.ServiceController.start(ServiceController.java:460)
    at org.jboss.system.microcontainer.jmx.ServiceControllerStartStopLifecycleCallback.install(ServiceControllerStartStopLifecycleCallback.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.jboss.reflect.plugins.introspection.ReflectionUtils.invoke(ReflectionUtils.java:59)
    at org.jboss.reflect.plugins.introspection.ReflectMethodInfoImpl.invoke(ReflectMethodInfoImpl.java:150)
    at org.jboss.joinpoint.plugins.BasicMethodJoinPoint.dispatch(BasicMethodJoinPoint.java:66)
    at org.jboss.beans.info.plugins.AbstractBeanInfo.invoke(AbstractBeanInfo.java:300)
    at org.jboss.kernel.plugins.dependency.AbstractKernelControllerContext.invoke(AbstractKernelControllerContext.java:286)
    at org.jboss.dependency.plugins.AbstractLifecycleCallbackItem.install(AbstractLifecycleCallbackItem.java:87)
    at org.jboss.dependency.plugins.AbstractController.handleLifecycleCallbacks(AbstractController.java:1535)
    at org.jboss.dependency.plugins.AbstractController.handleInstallLifecycleCallbacks(AbstractController.java:1500)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:943)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:774)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:540)
    at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:121)
    at org.jboss.deployers.vfs.deployer.kernel.BeanMetaDataDeployer.deploy(BeanMetaDataDeployer.java:51)
    at org.jboss.deployers.spi.deployer.helpers.AbstractSimpleRealDeployer.internalDeploy(AbstractSimpleRealDeployer.java:62)
    at org.jboss.deployers.spi.deployer.helpers.AbstractRealDeployer.deploy(AbstractRealDeployer.java:50)
    at org.jboss.deployers.plugins.deployers.DeployerWrapper.deploy(DeployerWrapper.java:171)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doDeploy(DeployersImpl.java:1439)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1157)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.doInstallParentFirst(DeployersImpl.java:1178)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.install(DeployersImpl.java:1098)
    at org.jboss.dependency.plugins.AbstractControllerContext.install(AbstractControllerContext.java:348)
    at org.jboss.dependency.plugins.AbstractController.install(AbstractController.java:1598)
    at org.jboss.dependency.plugins.AbstractController.incrementState(AbstractController.java:934)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:1062)
    at org.jboss.dependency.plugins.AbstractController.resolveContexts(AbstractController.java:984)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:822)
    at org.jboss.dependency.plugins.AbstractController.change(AbstractController.java:553)
    at org.jboss.deployers.plugins.deployers.DeployersImpl.process(DeployersImpl.java:781)
    at org.jboss.deployers.plugins.main.MainDeployerImpl.process(MainDeployerImpl.java:698)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.loadProfile(ProfileServiceBootstrap.java:304)
    at org.jboss.system.server.profileservice.ProfileServiceBootstrap.start(ProfileServiceBootstrap.java:205)
    at org.jboss.bootstrap.AbstractServerImpl.start(AbstractServerImpl.java:405)
    at org.jboss.Main.boot(Main.java:209)
    at org.jboss.Main$1.run(Main.java:547)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:34:56.813

您的密钥库中可能仍有自签名密钥 - 因此服务器不知道该选择哪一个：自签名或 CA 颁发。

删除自签名（多余的）一个。

# c# - 从日期时间计算金额作为日期

> ID：10933861
> 
> 赞同：3
> 
> 时间：2012-06-07T14:29:20.427
> 
> 标签：c#, entity-framework

在一张表中，我存储了很多日期时间，用于执行某个操作的时间。数据如下所示：

```
2012-05-01 14:30:29.8666925
2012-05-01 14:31:58.5422081
2012-05-01 14:35:38.3120864
2012-05-02 06:08:34.6322227
2012-05-02 06:08:54.0864203
2012-05-02 07:31:24.7269620
etc.. 
```

我想做的是计算每天采取多少次行动。所以我想要的结果是：

```
2012-05-01 = 3
2012-05-02 = 3 
```

我试图将日期组合在一起，但在分组时也会考虑“时间”。我的数据库中确实需要这些数据，但在分组时不需要，因为我只想每天查看它。不是每秒。

这是我到目前为止所拥有的，但我不确定如何获得我真正想要的结果。

```
var actions = (from a in entities.Actions
group a by a.Date
into g
select new
{
    Actions = g.Count() // Not sure if this line is right...
}); 
```

任何人都知道如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:57:11.543

使用 EntityFunctions.TruncateTime 函数，详见此 SO 帖子：[https ://stackoverflow.com/a/9642321/1342632](https://stackoverflow.com/a/9642321/1342632)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:37:42.550

您可以简单地使用[DateTime.Date](http://msdn.microsoft.com/en-us/library/system.datetime.date.aspx)修剪时间戳。分组后，您需要确保选择键以及 count()，否则您将只有一堆计数，但您不知道它们映射到什么日期。下面是使用日期的示例。

```
var actions = (from a in entities.Actions 
                // Note: if a.Date was a DateTime object, you could simply
                // group by 'a.Date.Date'
                group a by DateTime.Parse(a.Date).Date
                into g 
                select new 
                {
                    // Since count is useless on its own, store the date as well.
                    Date = g.Key,
                    Actions = g.Count()
                }); 
```

**更新：**我不再假设 a.Date 是一个字符串。它基于 w00 收到的错误消息，指出在尝试调用 a.Date.ToShortDateString() 时“Linq to Entities 无法识别 System.String.ToShortDateString()”。

我相信实际的错误消息可能是“ [LINQ to Entities 无法识别方法'System.String ToShortDateString()'](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/730a88e2-392a-4753-8ea6-129f4720c3e4) ”（请注意此处未在 System.String 上调用 ToShortDateString()）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:38:59.367

尝试`group a by a.Date.Date`

`DateTime.Date`给出相同`DateTime`但时间组件设置为午夜，因此所有日期都是相同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:39:37.277

在EF中，我会试试这个：

```
var actions = (from a in entities.Actions
group a by a.Date.Date
into g
select new
{
    Actions = g.Count() // Not sure if this line is right...
}); 
```

...虽然我不知道这会有多好。

# javascript - “javascript:”是做什么用的，它是否合规？

> ID：10933863
> 
> 赞同：3
> 
> 时间：2012-06-07T14:29:25.363
> 
> 标签：javascript, javascript-events

什么是 javascript: 用于，它是否兼容，我应该使用它吗？

我注意到我的一些同事选择使用

```
javascript: 
```

后跟一些函数名或一些 javascript 代码。但这对我来说似乎没有必要。

我在事件处理程序中看到了很多，比如

```
onclick="javascript: somefunction451();" 
```

此外，我在搜索有关 javascript 的更多信息时遇到了麻烦：因为它说我正在尝试执行跨站点脚本。特别是如果我把它放在引号中。这是根本无法解决的问题吗？我应该只在 flash 或 silverlight 浏览器中搜索这个吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T14:30:04.333

在“onfoo”属性值中完全没有必要。在这种情况下，它被 JavaScript 解析器解释为**[标签。](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)**因此，它不是错误的，但它是无用的。

在“href”值中，它有一个作用，但无论如何，JavaScript“href”值确实没有理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:40:51.333

它是“非官方的”但“常见的”和“适用于任何现代浏览器”，而不是每个来源的 URI 方案名称：[http ://en.wikipedia.org/wiki/URI_scheme](http://en.wikipedia.org/wiki/URI_scheme)

这`<a href="javascript:...`仅适用于。那里是必要的（但是在单击元素时有更好的方法来调用 javascript）。

在`onClick=`属性等中，它是一个标签，没有必要。

# qt - 将音频从 Qt 流式传输到 PureData

> ID：10933867
> 
> 赞同：0
> 
> 时间：2012-06-07T14:29:37.713
> 
> 标签：qt, tcp, udp, audio-streaming, puredata

我正在尝试将麦克风输入从我的 Symbian 设备（诺基亚 N8）流式传输到在我的 Windows PC 上运行的 PureData 应用程序。两者都通过 WiFi 连接。

连接成功，但读取传入数据失败。当我使用 TCP 时，连接会立即断开，但帮助不大

```
netreceive~: recv data: Unknown error (10014). 
```

使用 UDP，我得到了很多

```
netreceive~: recv data: Message too long (10040). 
```

我在 PD 中设置了采样率以匹配来自手机的采样率，但 PD 一直告诉我音频格式未知。也许它与样本大小或字节顺序有关？

PS：我在PD端使用的是Olaf Matthes的netreceive~对象，Qt代码如下：

```
audio_out_socket = new QTcpSocket(this);
audio_out_socket->connectToHost(pdclient_addr, 8030);
QAudioDeviceInfo info = QAudioDeviceInfo::defaultInputDevice();
QAudioFormat format = info.preferredFormat();
audio_in = new QAudioInput(info, format, this);
audio_in->start(audio_out_socket); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:16:21.983

`[netreceive~]`期望在实际数据到达之前保存有关数据的信息的“标题”。

来自 netsend~.h：

```
typedef struct _tag {      /* size (bytes) */
     char version;         /*    1         */
     char format;          /*    1         */
     long count;           /*    4         */
     char channels;        /*    1         */
     long framesize;       /*    4         */
     char extension[5];    /*    5         */
} t_tag;                   /*--------------*/
                           /*   16         */ 
```

`extension` seems to be currently unused, but you have to fill out the rest, according to the data you are sending (check [this header-file](https://pure-data.svn.sourceforge.net/svnroot/pure-data/trunk/externals/olafmatt/netsend~/netsend~.h) for more info)

# android - 从堆栈中删除一个活动

> ID：10933869
> 
> 赞同：0
> 
> 时间：2012-06-07T14:29:53.543
> 
> 标签：android, android-activity

当从活动 A 到 B 时，我想从堆栈中清除 A：所以当用户在活动 B 中按下后退按钮时，应用程序退出。

```
Intent intent = new Intent(A.this, B.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(intent); 
```

这些代码行不起作用 - 应用程序返回到活动 A。我也尝试过 OR 与 flag `Intent.FLAG_ACTIVITY_NEW_TASK`，结果相同。我其实也试过了`FLAG_ACTIVITY_NO_HISTORY`。

我正在为我的应用程序使用 Android 2.2。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:06:51.213

只需在调用 startActivity() 后调用 finish()。它应该从堆栈中清除 Activity A。在代码中它看起来像这样：

```
Intent intent = new Intent(A.this, B.class);
startActivity(intent);
finish(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:36:25.390

两种解决方案：在您的 B 活动中：

```
@Override
public void onBackPressed() {
    super.onBackPressed(); //not sure if this line is needed
    System.exit(0);
} 
```

或者更好：使用 startActivityForResult 开始您的活动，并实现您的 A 活动的 onActivityResult 方法：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
   finish();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T16:12:40.527

[FLAG_ACTIVITY_NO_HISTORY](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_NO_HISTORY)

如果设置，则新活动不会保留在历史堆栈中。一旦用户离开它，活动就完成了。这也可以使用 noHistory 属性进行设置。

所以，你可以从你的

AndroidManifest.xml 文件，

**`android:noHistory="true"`**

# entity-framework-4 - 是否有用于自动迁移的对象模型？

> ID：10933871
> 
> 赞同：0
> 
> 时间：2012-06-07T14:30:03.703
> 
> 标签：entity-framework-4

使用 EF 迁移我希望针对环境自动运行迁移。我知道我可以通过对 Update-Database 的 powershell 调用来做到这一点，但是有没有办法通过框架来做到这一点而无需启动外部进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:32:03.973

是的，在您的 DbContext 中：

```
public static void SetInitializer()
{
    Database.SetInitializer(new MigrateDatabaseToLatestVersion<DataContext, Configuration>());
} 
```

配置在哪里：

```
internal sealed class Configuration : DbMigrationsConfiguration<DataContext>
{
    public Configuration()
    {
        AutomaticMigrationsEnabled = true;
    }
} 
```

您仍然需要为迁移发布一个迁移文件，该文件将进行导致数据丢失的更改（除非您在配置类中将 AutomaticMigrationDataLossAllowed 设置为 true - 危险！）但是您可以使用 PMC 中的 Add-Migration 命令创建这些文件.

# ios - GLKit 的 GLKBaseEffect 和自定义着色器

> ID：10933875
> 
> 赞同：12
> 
> 时间：2012-06-07T14:30:18.837
> 
> 标签：ios, shader, glkit

我一直在研究我遇到的这个问题，但我似乎无法很好地理解它来解决它，所以我想我不妨把它扔在那里，聪明的一群可能会有一些想法。:P

基本上我已经在 iPhone 项目上工作了一段时间，在那里我可以奢侈地使用所有最新的框架和目标 5.1。所以我一直在使用 GLKit 和 GLKBaseEffect 对我来说效果很好。我开始使用 GLKBaseEffect 而不是编写自己的着色器的原因是我不太了解 glsl。然而，要求变得更加精确，基本效果似乎不再削减它。

由于我已经在使用基础效果进行所有变换，因此我希望我可以保持基础效果完好无损，但如果有任何意义，可以在顶部添加 glsl 类型的着色器。

我的旧方法看起来像这样（这是在一个循环中渲染所有对象，其中一个对象包含变换、网格和其他一些对这个问题不太重要的东西，比如纹理、材质等）

```
ObjectBase *obj = [ResourceManager.shared getObjectNamed:name inScene:sceneName];
GLKMatrix4 modelview = effect.transform.modelviewMatrix;
effect.transform.modelviewMatrix = GLKMatrix4Multiply(effect.transform.modelviewMatrix, obj.transform);

[effect prepareToDraw];
[obj render];

effect.transform.modelviewMatrix = modelView; 
```

这里我们获取一个对象来渲染和变换（即平移、旋转和缩放）对象，然后我们渲染它，渲染本身获取对象的网格，绑定缓冲区并渲染它。

到目前为止，一切都很好。

然而，我想做的是，在`[obj render];`调用过程中，我希望对象也能做一些事情，比如`glUseProgram(someProgram);`添加更专业的着色器代码。

我想有人可能会争辩说我正在尝试为我的顶点着色器使用基本效果，并希望为我的片段着色器使用“普通”着色器。至少这是我想我想做的。

我一直在尝试一些事情。

我试图只创建片段着色器并`glUseProgram`在其上创建，但是它说我在设置和编译时需要一个顶点和一个片段着色器。我还尝试创建一个空的顶点着色器，结果不是很好，我不知道会发生什么，但我猜它会否决基本效果。

最后，我倾向于接受最好放弃基础效果并一直编写自己的着色器。我只是觉得窗外有很多工作，所以我想看看我能节省多少。

我明白我对着色器的理解是给我带来最多问题的部分，所以请耐心等待这个事实。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-14T12:37:28.077

我只是想为任何对它们感兴趣的人给出我的结论。

我所做的实际上是将 GLBaseEffect 全部扔掉并实现了我自己的着色器代码。

我最大的问题是我并没有真正理解这可以说是*全有或全无*。

**请我可能是错的，所以对我错的地方的任何更正将不胜感激，我真的不想欺骗任何阅读本文的人。**

在我的努力中，我发现了几个关键点：

*   GLKBaseEffect，旨在模仿早期版本的 OpenGLES 中看到的固定功能管道。因此它包装了通用着色器代码，因此您不必太在意它。您将拥有基本功能，但它并不是非常可扩展。
*   如果您编写自己的着色器代码，您仍然可以使用 GLKit 的简洁功能，例如纹理加载器、数学库等。因此，如果您想要更复杂或可定制的东西（凹凸贴图、卡通着色等），完全值得重写正确渲染所需的样板代码。我最初所做的是使用 GLKBaseEffect 在场景中进行定向，因为它非常舒适且易于使用。然而，当我想做更多（切线空间法线贴图）时，我有点卡住了，因为我无法添加到由 GLKBaseEffect 处理的着色器程序中。
*   着色器真的没有我想象的那么可怕！我只是不知道它的真正含义，我很惊讶我已经阅读了这么多关于它们的内容，但仍然不明白基本上着色器是替换固定功能管道的程序。就那么简单。

我想这已经足够咆哮了，只是想跟进并添加我到目前为止收集的点点滴滴。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-07T17:18:04.863

正如您所发现的，您不能只使用片段着色器而留下顶点着色器。这是因为两者都有不同的任务。顶点着色器处理每个顶点方面：计算顶点数据、纹理（uv）等，最后绘制面（三角形）。片段着色器处理屏幕上（或视口中）每个像素的确切绘制内容。当你只提供一个片段着色器时，你并***没有***告诉你的顶点数据是什么，而是你只是告诉 OpenGL 对像素做一些事情。而且这些像素什么都没有/乱码（我不确定是哪个），因为您的顶点着色器没有做任何事情。

使用 GLKEffect 时，调用该`[yourEffect prepareToDraw]`方法会处理着色器等。

如果你只是想使用一对股票着色器，为什么不使用 XCode OpenGL 游戏模板中提供的那一个呢？当你运行它时，它有两个立方体，一个使用 GLKit 渲染，另一个以正常方式渲染。虽然我认为这对于大多数效果来说是不够的。如果您想了解更多关于着色器的信息，可以查看[NeHe](http://nehe.gamedev.net/) GLSL 介绍[文章](http://nehe.gamedev.net/article/glsl_an_introduction/25007/)。它是关于 GLSL 以及如何在代码中编写和使用着色器。您可能想查看[Diney Bomfim 的](http://db-in.com/blog/author/dbincom/) [All About Shaders](http://db-in.com/blog/2011/08/all-about-shaders-part-13/)文章和此[页面](http://iphonedevelopment.blogspot.in/2010/11/opengl-es-20-for-ios-chapter-4.html)。

在大多数情况下，使用 GLKit 是不错的，因为它可以让您免于编写大量无用的重复代码。例如，您不必经历这么多具有​​不同颜色编码和每像素位数（每种格式）的图像格式，并且所有这些都可以使用[GLKTextureLoader](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKTextureLoader_ClassRef/Reference/Reference.html)。

# android - 为什么我们应该实现/使用我们的看门狗而不是 Linux 默认看门狗？

> ID：10933876
> 
> 赞同：0
> 
> 时间：2012-06-07T14:30:20.367
> 
> 标签：android, linux, driver, watchdog

我正在研究 Android 驱动程序/内核。我发现有两组看门狗：

1.  [内核/看门狗.c](https://github.com/DerArtem/android-tegra-2.6.36-honeycomb-folio-nvidia/blob/android-tegra-2.6.36/kernel/watchdog.c)
2.  [/驱动程序/看门狗/tegra_wdt.c](https://github.com/DerArtem/android-tegra-2.6.36-honeycomb-folio-nvidia/blob/android-tegra-2.6.36/drivers/watchdog/tegra_wdt.c)

它们都用于在系统挂起事件（例如无限循环）时恢复系统。

第一个默认在系统启动时启用，但许多人仍然在 /drivers/watchdog/ 文件夹中为特定驱动程序实现他们的看门狗。我对此感到困惑。为什么我们需要多个看门狗？有人知道这方面的“哲学”吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-07T05:34:27.657

因为看门狗用于安全线程，在它的帮助下，我们可以停止线程，使其无法再执行。

# c# - 如何控制最大响应大小

> ID：10933878
> 
> 赞同：0
> 
> 时间：2012-06-07T14:30:21.233
> 
> 标签：c#, asp.net, .net-4.0, iis-6

我有一个我支持的 Web 应用程序，有时需要渲染巨大的网页。

有时我有这个异常（它**没有**链接到用户*上传*，网页呈现大约 22MB 的 Html）：

```
Error Caught in Page : http://example.com/thepage.aspx
Error Message:Maximum request length exceeded.
Stack Trace:   at System.Web.HttpRequest.GetEntireRawContent()
   at System.Web.HttpRequest.FillInFormCollection()
   at System.Web.HttpRequest.get_Form()
   at System.Web.HttpRequest.get_HasForm()
   at System.Web.UI.Page.GetCollectionBasedOnMethod(Boolean dontReturnNull)
   at System.Web.UI.Page.DeterminePostBackMode()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint 
```

我试图在 web.config 中使用节点的`maxRequestLength`属性，`HttpRuntime`但它似乎无法控制它。

作为测试用例，我尝试将其设置为 5K，但网页显示即使它更大（大约 150K），所以我猜它不允许显示巨大的网页。

有没有办法可以控制最大响应大小并避免“超出最大请求长度”错误？

如果它改变了我们使用 .Net 4.0 和 IIS 6.0 的任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:11:20.483

`Response.Buffer=false`为该页面设置，并在`Response.Flush()`渲染页面时使用时间。

这样，您可以避免将所有数据呈现到缓冲区并在发送之前等待此缓冲区满。

还要禁用不需要的控件的视图状态。

如果上述方法不能解决问题，那么您需要使用允许它们的不同类型的控件重新设计您的页面，并且您可以使用fluah() 不时将数据发送到浏览器。中继器控件可以工作，也许网格视图可能无法工作。

# macos - OSX - 获取带有系统字体列表的选择器

> ID：10933880
> 
> 赞同：0
> 
> 时间：2012-06-07T14:30:25.150
> 
> 标签：macos, fonts, system, selector

在我的新应用程序中，我需要用户能够单击选择器，并选择他们的任何系统字体。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:34:31.243

`+[UIFont familyNames]`返回已安装字体名称的数组。

**编辑：**糟糕，我处于 ​​iOS 模式。这是 Mac OS 版本：

`[[NSFontManager sharedFontManager] availableFontFamilies]`

# bash - 将 csh 脚本转换为 bash 脚本

> ID：10933888
> 
> 赞同：1
> 
> 时间：2012-06-07T14:31:12.800
> 
> 标签：bash, csh

我目前正在将 linux 上的 csh 脚本转换为 Mac OS X lion 上的 bash 脚本。

csh 脚本如下所示：

```
setenv CNS_SOLVE '/Users/ucbthsa/Documents/haddock2.1/software/bin/'
setenv CNS_SOLVE $CNS_SOLVE
if ( -d $CNS_SOLVE ) then
    if ( ! $?CNS_ARCH ) setenv CNS_ARCH `$CNS_SOLVE/bin/getarch`
else
    setenv CNS_ARCH 'unknown'
endif 
```

我转换为 Mac bash 脚本如下所示：

```
export CNS_SOLVE='/Users/ucbthsa/Documents/haddock2.1/software/bin/cns_solve_1.3'
export CNS_SOLVE=$CNS_SOLVE

if [ -d $CNS_SOLVE ]; then
  if [ ! $?CNS_ARCH ]; then
    export CNS_ARCH='$CNS_SOLVE/bin/getarch'
else
  export CNS_ARCH='unknown'
endif 
```

当我尝试获取 Mac bash 脚本时，我收到以下错误：

> -bash：cns_solve_env：第 10 行：语法错误：文件意外结束

我不明白为什么会收到此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:33:35.533

您应该使用`fi`而不是`endif`，如果根本没有关闭第一个：

```
export CNS_SOLVE='/Users/ucbthsa/Documents/haddock2.1/software/bin/cns_solve_1.3'
export CNS_SOLVE=$CNS_SOLVE

if [ -d $CNS_SOLVE ]; then
  if [ -z $CNS_ARCH ]; then
    export CNS_ARCH="$CNS_SOLVE/bin/getarch"
  fi
else
  export CNS_ARCH='unknown'
fi 
```

*编辑：改变了第二个测试，正如 William Pursell 指出的那样，它不会像在 bash 中那样工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:35:46.247

`$?CNS_ARCH`在 sh 中意味着不同的东西。利用：

```
test -z "$CNS_ARCH" && CNS_ARCH=$($CNS_SOLVE/bin/getarch) 
```

或者

```
CNS_ARCH=${CNS_ARCH-$( $CNS_SOLVE/bin/getarch)} 
```

请注意，它们的含义略有不同。第一个将分配给 CNS_ARCH 如果 CNS_ARCH 已设置但为空字符串，而第二个将不会更改 CNS_ARCH 如果已设置但为空，这是`$?`csh 中所做的，但可能不是你实际的想。

# c# - 可选的 C# 参数问题

> ID：10933894
> 
> 赞同：2
> 
> 时间：2012-06-07T14:31:26.200
> 
> 标签：c#

我有这个方法

```
public static void WriteErrorLog(LogEntry logEntry, string method, [Optional, DefaultParameterValue(0)]  int? errorTypeID) 
```

所以我希望我可以调用这样的方法

```
WriteErrorLog(l, "text"); 
```

但我还是得到了 Visual Studio 的错误:(

> 方法 'WriteErrorLog' 没有重载需要 2 个参数

我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-07T14:34:23.977

你不应该使用`[Optional, DefaultParameterValue(0)]`. 相反，您应该使用 c 样式的默认参数语法：

```
public static void WriteErrorLog(LogEntry logEntry, string method, int? errorTypeID = 0) 
```

另外，如果`errorTypeId`是 a `Nullable`，那么您不应该使用默认值 be`null`吗？

```
public static void WriteErrorLog(LogEntry logEntry, string method, int? errorTypeID = null) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T14:34:16.003

你的问题是这`[Optional]`不是你如何使它成为可选的。尝试：

```
public static void WriteErrorLog(LogEntry logEntry, string method, [Optional, DefaultParameterValue(0)]  int? errorTypeID = null) 
```

可选参数是在 C# 4.0 中添加的，是方法重载的简单替代方案。在引擎盖下，它会在您调用它的地方扩展，包括您给它的默认值。你可以留下`[Optional]`属性。它一点也不疼。事实上，我不确定它是否有任何作用。如果我不得不猜测它是通过标记可以省略的重载来使重载更易于使用，因为另一个重载为您处理了默认值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T14:36:51.440

您需要以这种方式声明可选参数：

```
public static void WriteErrorLog(LogEntry logEntry, 
    string method, int? errorTypeID = 0) 
```

这将正确编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:40:33.450

如果您使用 .NET 4（或更高版本）：

```
public static void WriteErrorLog(LogEntry logEntry, string method, int? errorTypeID = null) 
```

请注意，可空类型的“默认”值是`null`. 在 C 中，人们通常使用 -1 或 0 作为整数的默认值，这是您可以在 C# 中使用可空值更干净地做的事情。AFAIK 在 Haskell 和其他语言中有类似的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T14:44:31.597

我不知道为什么它不适合你。我完全按照您键入它们的方式复制了方法参数。我使用 VS2010 和 .NET 4.0。我运行了代码，每次都运行良好。

无论如何，您应该使用 C 风格的默认参数。但是这种方法对我仍然有效。但是，我得到一个红色下划线，并且悬停显示相同的错误。但是当我运行代码时，一切正常。

# playframework - 如何在 RythmPlay 模板引擎中联系字符串？

> ID：10933896
> 
> 赞同：1
> 
> 时间：2012-06-07T14:31:28.837
> 
> 标签：playframework, playframework-1.x, rythm

```
@str .length = @str.length() 
```

输出

```
abcde .length = 5 
```

我尝试了各种转义技术，但没有找到正确的一种。我如何输出

```
abcde.length = 5 
```

?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:35:10.790

本[迁移教程](http://software-lgl.blogspot.com.au/2012/05/step-by-step-migrate-your-groovy.html)涵盖了它：

```
Jack is a @(vice)maniac. 
```

# php - php。使用 list() 和 each()？

> ID：10933901
> 
> 赞同：2
> 
> 时间：2012-06-07T14:31:55.003
> 
> 标签：php, list, each

这是来自 php doc 的工作示例代码，用于将 list() 与 each() 一起使用

```
<?php

$fruit = array('a' => 'apple', 'b' => 'banana', 'c' => 'cranberry');

reset($fruit);
while (list($key, $val) = each($fruit)) {
    echo "$key => $val\n";
}
?> 
```

输出是

```
a => apple
b => banana
c => cranberry 
```

我不明白为什么它会这样工作和输出。因为，

从 each() 的[API 来看，each() 返回一个包含](http://php.net/manual/en/function.each.php)**4 个**键/值对的数组。所以`each($fruit)`应该是这样的：

```
Array
(
    [1] => yy
    [value] => yy
    [0] => xx
    [key] => xx
) 
```

对于代码：

```
while (list($key, $val) = each($fruit)) {
        echo "$key => $val\n";
    } 
```

不应该`$key`等于`each($fruit)[1]`和`$val`等于`each($fruit)[value]`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:36:34.550

> 笔记：
> 
> `list()`仅适用于数值数组并假设数值索引从 0 开始。
> 
> [http://php.net/list](http://php.net/list)

换句话说，`list`主动按顺序查找数字键。`list($foo, $bar)`要求分配的数组具有键`0`并且`1`将它们分别分配给`$foo`和`$bar`。这些键在数组本身中的顺序无关紧要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-04T05:44:02.597

PHP 7.1 更新了内容

什么是新的？

*   list() 有一个新的速记
*   list() 支持命名键

# list() 的简写

```
$array = [3,5,1];
[$a, $b, $c] = $array; 
```

# 用于命名键

```
$fruit = array('a' => 'apple', 'b' => 'banana', 'c' => 'cranberry');
['a' => $a, 'b' => $b, 'c' => $c] = $fruit;

// $a = 'apple'
// $b = 'banana';
// $c = 'cranberry'; 
```

来源：[PHP列表（）](https://developer.hyvor.com/php-list)

# regex - 正则表达式检查 C 代码的括号

> ID：10933903
> 
> 赞同：1
> 
> 时间：2012-06-07T14:31:59.980
> 
> 标签：regex, linux

我对正则表达式很陌生，我只将它们用于搜索。所以我玩了 egrep，但使用 egrep 我看到了一些限制。

对于 linux，有没有什么好的正则表达式工具？我知道有 sed 但它通常用于搜索和替换的场景。我可以只使用 sed 来搜索我的文件吗？如果是怎么办？

谈到我的具体问题，我需要在 C 源代码中搜索附加括号用于`if`语句的实例。

`if (( a == b))`应该匹配和`if (a == b)`不应该匹配。
`if(a && ((b||c)))`应该匹配和`if(a && (b||c))`不应该匹配。

我希望它很简单，稍后我会添加其他案例，例如`>=` `!=`等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T14:39:01.830

这对于正则表达式是不可能的（至少不能单独使用），因为它们无法跟踪括号嵌套的任意级别。

# php - 内容类型和 json_encode() 值

> ID：10933911
> 
> 赞同：2
> 
> 时间：2012-06-07T14:32:37.273
> 
> 标签：php, http-headers, json

有人可以解释这种行为吗？

在这种情况下：

```
header("Content-type: text/html");
echo json_encode("error_101"); 
```

有用。

在另一种情况下：

```
header("Content-type: application/json");
echo json_encode("error_101"); 
```

它不起作用（无限加载）。

但是如果我将一个数组传递给 json_encode，它会以两种方式工作，所以这个问题**只存在于 json values**。

这似乎是一个错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:34:54.910

json 文本中最外层的数据类型**必须**是数组或对象。

> JSON 语法
> 
> JSON 文本是一系列标记。标记集包括六个结构字符、字符串、数字和三个文字名称。
> 
> JSON 文本是一个序列化的对象或数组。
> 
> ```
>  JSON-text = object / array 
> ```

— [http://www.ietf.org/rfc/rfc4627.txt](http://www.ietf.org/rfc/rfc4627.txt)

如果您将`json_encode`字符串传递给 PHP 的函数，那么它将输出为 JavaScript 编码的字符串（而不是抛出错误）。我认为这是一个错误。

据推测，向这个脚本发出 HTTP 请求的任何东西都遇到了无效 JSON 响应的问题，但对无效 HTML 有更好的错误恢复。

# tomcat6 - 无法从另一个系统访问简单的 Web 应用程序（在 Tomcat 服务器上运行）

> ID：10933913
> 
> 赞同：1
> 
> 时间：2012-06-07T14:32:53.617
> 
> 标签：tomcat6

我编写了一个简单的 Web 应用程序，它在我的本地系统上运行良好（在 Tomcat 服务器上）。但是当我尝试使用 http://my_ip_address:8080/Projec1/My_Application 从不同的系统访问时。它显示此错误

**网络错误 (tcp_error) 发生通信错误："" Web 服务器可能已关闭、太忙或遇到其他问题，使其无法响应请求。您可能希望稍后再试一次。**

我知道你们中的许多人必须精通这种错误。但对我来说它有点新。如果您说明可能的原因和解决方案，我会很高兴（请告诉我服务器是否需要逐步配置）

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T14:06:26.227

我忘了告诉你我找到了上述问题的答案，实际上是代理设置问题。这就是我所做的

1.  在 IE 中打开 Internet 选项。
2.  转到连接选项中的 LAN 设置。
3.  在 LAN 设置中有高级设置选项卡，单击它。
4.  您将在底部看到一个异常框。
5.  键入要访问的 IP 地址表单。例如。10.200;*.xyz.com
6.  此设置将在您要访问 Web 应用程序的系统上完成。
7.  应用程序运行的起始 IP 地址 10.200.---.--- 这就是为什么在异常框中它被称为 10.200;*.（您的 Internet 服务器名称）

希望这会有所帮助。

谢谢

# php - Amazon PHP SDK 最小文件

> ID：10933917
> 
> 赞同：2
> 
> 时间：2012-06-07T14:33:09.507
> 
> 标签：php, amazon-s3, amazon-web-services

我正在使用[Amazon SDK for PHP](http://aws.amazon.com/sdkforphp/)，提取时它略高于 2MB。我只需要 S3 的功能。

是否可以从 SDK 中仅提取 S3 所需的文件并使用它们？如果是这样，我需要哪些文件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:02:17.117

这是来自 AWS 论坛的几乎官方回答：

> 嘿！这是我们一直在考虑在未来提供更好支持的功能，但目前还没有官方或支持的方式来做到这一点。就是说，我认为您可能可以保留以下文件以仅使用 S3： lib/cachecore/* lib/dom/* lib/requestcore/* sdk.class.php services/s3.class.php 实用程序/* 您还可以从实用程序目录中删除更多项目，例如 hadoop、manifest、stacktemplate 和 stepconfig。
> 
> 我成功地使用这些文件进行了 list_buckets 调用，但显然您将要测试所有 API 调用以确保它们正常工作并且您不会丢失任何我可能忽略的依赖项。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:39:02.223

[我在http://undesign.org.za/2007/10/22/amazon-s3-php-class](http://undesigned.org.za/2007/10/22/amazon-s3-php-class)之前使用过这个专门的课程，它做得很好

# komodo - jquery 支持在 html 中有效，但在 .js 中无效？

> ID：10933922
> 
> 赞同：1
> 
> 时间：2012-06-07T14:33:20.357
> 
> 标签：komodo, komodoedit

尝试使用 komodo 构建一个 jquery ui 小部件。我启用了 jquery api 引用，并且在一个 .html 文件中它工作得很好。然后我打开我的 widget.js 文件并输入；

```
(function($) { 
```

其次是

```
$. 
```

我希望在这里得到智能感知，但我得到了：

未找到完成。（错误确定完成）

这是文件扩展名吗？只是不支持 jquery ui 小部件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:18:02.977

来自科莫多的人；

> 问题是 Komodo 不知道匿名函数调用的上下文 - 换句话说，Komodo 不够聪明，无法知道在这种情况下 "jQuery" == "$"。
> 
> 但是一切都没有丢失，您可以通过告诉 Komodo 在这种情况下是什么类型来帮助它。下面是使用 jsDoc 帮助定义“$”类型的示例：
> 
> ```
>  (/** @param {jQuery} $ */function($) {
>        $. // will show jQuery completions now
>    })(jQuery) 
> ```

;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:13:55.347

争论就是问题。没有它：

```
(function()
  {
  $. //works
  jQuery. //works
  ...
  }
); 
```

Komodo 知道 $ 和 jQuery 都是全局变量。本地范围优先，因此 $ 变得未定义。相反，如果你传入 jQuery，$ 会起作用，但 jQuery 不会：

```
(function(jQuery)
  {
  $. //works
  jQuery. //does not
  ...
  }
); 
```

# vb.net - EF - 仅在被断点命中时删除关系

> ID：10933927
> 
> 赞同：0
> 
> 时间：2012-06-07T14:33:41.323
> 
> 标签：vb.net, entity-framework, entity-framework-4

```
<HttpPost()>
    Function Edit(<Bind(Prefix:="Article")> ByVal Article As FormCollection, Optional ByVal DepartementID As Integer = 0, Optional ByVal LeverancierID As Integer = 0) As ActionResult ', ByVal ReferenceSupplierID As Integer
        ' Dim Art As Article = ArticleService.GetArticleById(Article.ArticleID)
        Dim _toUpdateArt As Article = ArticleService.GetArticleById(Article(0))
        UpdateModel(_toUpdateArt, Article)
        '  TryUpdateModel(Art, Article)
        If LeverancierID > 0 Then
            _toUpdateArt.Supplier = LeverancierService.GetLeverancierById(LeverancierID)
        Else
            _toUpdateArt.Supplier = Nothing 'HERE
            ModelState.Remove("LeverancierID")
        End If
        If DepartementID > 0 Then
            _toUpdateArt.Departement = DepartmentService.GetDepartmentByID(DepartementID)
        Else
            _toUpdateArt.Departement = Nothing 'HERE
            ModelState.Remove("DepartmentID")
        End If
        If ModelState.IsValid Then

            _toUpdateArt.EditedOn = Now
            ArticleService.SaveArticle()

            Return RedirectToAction("Index")
        Else

            ViewBag.Index = ""
            ViewBag.Create = ""
            ' ViewBag.Edit = ""
            'ViewBag.StandardValueEnabled
            ViewBag.Delete = ""
            ViewBag.Editable = ""
            '   ViewBag.LocalSearch = ""
            ViewBag.Departments = DepartmentService.GetDepartments
            ' ViewBag.StandardValueEnabled = ""

            ViewBag.MediaShow = ""
            ViewData("Media") = MediaService.GetMedia.Where(Function(el) el.Reference = Domain.Common.ReferenceTo.Article And el.ReferenceID.Equals(_toUpdateArt.ArticleID)).ToList

            Dim avw As New ViewModels.ArticleViewModel
            With avw
                .Article = _toUpdateArt
                .Leveranciers = LeverancierService.GetLeveranciers.ToList.Select(Function(dl) New SelectListItem With { _
                                                                    .Text = dl.RoepNaam, _
                                                                    .Value = dl.LeverancierID, _
                                                                    .Selected = LeverancierID = dl.LeverancierID}).ToList

                .Departements = DepartmentService.GetDepartments.Select(Function(dl) New SelectListItem With { _
                                                                            .Text = dl.Code, _
                                                                            .Value = dl.DepartmentID, _
                                                                            .Selected = DepartementID = dl.DepartmentID}).ToList

            End With

            Return View(avw)
        End If
    End Function 
```

_toUpdateArt.Departement = Nothing 和_toUpdateArt.Supplier = Nothing 是去掉可选关系。

但它只在我调试它时有效，有时在命令的几个循环之后，在实际删除关系并将其存储在数据库中之前。

当“函数”上没有断点时，关系永远不会为空。

有没有人对此有解释以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T15:19:24.077

如果 Department 已经是 Nothing (null)，那么很可能将其设置为 Nothing 将无效。我怀疑您看到它在调试器中工作，因为调试器访问该属性并导致它延迟加载。在此之后，该属性不再是 Nothing，因此将其设置为 Nothing 会被检测为删除关系。

有几种方法可以处理这个问题：

*   确保将 FK 映射到实体中的属性（即使用 FK 关系），然后将 FK 设置为 null 而不是将导航属性设置为 null。在这种情况下，FK 充当关系的标记，以便可以明确更改它而无需加载相关实体。
*   始终加载相关实体，以便该属性永远不会为空。您可以使用 Include 或延迟加载来执行此操作。
*   如果您在 .NET 4.5 上使用 EF5，那么您可以开始使用完整的更改跟踪代理，在这种情况下，即使该属性已经是 Nothing，代理也会检测到该属性设置为 Nothing。但请注意，更改跟踪代理存在复杂性，并且仅在使用 .NET 4.5 时适用于 FK 关系。

# class - 安卓状态机

> ID：10933930
> 
> 赞同：0
> 
> 时间：2012-06-07T14:33:47.023
> 
> 标签：class, android-intent, android-activity, android

我编写了一个 Android 应用程序。我的应用程序中有很多活动，活动之间有大量的转换。我决定实现一个状态机，它将切换我的活动。

我希望在我的应用程序类或其子类中实现一个状态机，但我无法从中启动任何活动。

```
public class MainAppClass extends Application {} 
```

这样的代码失败了：

```
Intent intent = new Intent();
intent.setClass(this.MyActivity, Screen2Activity.class);
StartActivity(intent); 
```

也许，这是不真实的吗？这些任务还有其他方法吗？感谢您的回答！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T18:26:02.980

这是另一个问题：*您为什么要尝试从 的子类开始活动`Application`？*

阅读此内容（来自文档），您会明白为什么您尝试做的事情没有任何意义。

> 该类`Application`是那些需要维护全局应用程序状态的基类。通常不需要子类化 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），则可以为检索它的函数提供一个在首次构建单例时在`Context`内部使用的函数。`Context.getApplicationContext()`

如果你编辑你的原始帖子，澄清你为什么要这样做，也许我可以为你指出一个更合适的方式来启动你的`Screen2Activity`.

# c++ - 在 C++ 中使用带有模板参数的标准数学函数

> ID：10933936
> 
> 赞同：5
> 
> 时间：2012-06-07T14:34:03.053
> 
> 标签：c++

我写了代码：

```
const double PI = 3.141592653589793;

namespace 
{
    const int N = 8;
    const double points[8] = {-0.9602898564975363, -0.7966664774136267, -0.5255324099163290, -0.1834346424956498,
        0.1834346424956498, 0.5255324099163290, 0.7966664774136267, 0.9602898564975363};
    const double weights[8] = {0.1012285362903706, 0.2223810344533744, 0.3137066458778874, 0.3626837833783621, 0.3626837833783621,
        0.3137066458778874, 0.2223810344533744, 0.1012285362903706};
    const double error = 1e-10;

    template <class TFunction, class TNumber>
    class ChangeOfVariables
    {
        TFunction f;
    public:
        ChangeOfVariables(TFunction f) : f(f){}
        TNumber operator() (TNumber x) { TNumber c=std::cos(x); return f(std::tan(x))/(c*c); } 
    };
}

class Quadrature
{
public:
    Quadrature(void) {};
    ~Quadrature(void) {};

    template <class TFunction, class TNumber>
    TNumber integrate(TFunction f, TNumber a, TNumber b) 
    {
        TNumber result = 0.0;
        for(int i=0; i<N; i++) 
        {
            result+= weights[i]*f(0.5*((b-a)*points[i]+(a+b)));
        }
        return 0.5*(b-a)*result;
    }

    template <class TFunction, class TNumber>
    TNumber integrateToInfty(TFunction f, TNumber a)
    {
        using std::atan; 
        return integrate<ChangeOfVariables<TFunction,TNumber>, TNumber>(ChangeOfVariables<TFunction,TNumber>(f), atan(a), PI/2); 
    }
}; 
```

在这里使用：

```
double dampendedExp(double x) {return std::exp(-2.0*x);}
int main()
{
    Quadrature quadrature;
    cout<<"e^(-2x)="<<quadrature.integrateToInfty(dampendedExp, 0)<<endl;
} 
```

但编译器抱怨：

```
Error   1   error C2668: 'atan' : ambiguous call to overloaded function c:\users\ga1009\documents\dev\fouriertransform\fouriertransform\quadrature.h    48 
```

这个想法是让它适用于不同的数字类型，例如`double`和`complex<double>`，其中定义了 atan 。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T15:48:13.013

Visual Studio 将解释`0`为整数并在调用 时失败，`std::atan`因为它不知道整数应转换为哪个浮点类型 ( `float`, `double`, )：`long double`

```
~\documents\visual studio 2010\projects\so-atan\so-atan\quadrature.h(44): 错误 C2668: 'atan': 对重载函数的模糊调用
          c:\program files (x86)\microsoft visual studio 10.0\vc\include\math.h(553): 可以是'long double atan(long double)'
          c:\program 文件 (x86)\microsoft visual studio 10.0\vc\include\math.h(505): 或“float atan(float)”
          c:\program 文件 (x86)\microsoft visual studio 10.0\vc\include\math.h(108): 或 "double atan(double)"          
          ~\documents\visual studio 2010\projects\so-atan\so-atan\main.cpp(12)：
          在 [...] “TNumber Quadrature::integrateToInfty(TFunction,TNumber)”中。
          和
          [
              TNumber=int,
              TFunction=double (__cdecl *)(double)
          ]
```

您可以非常轻松地自己重新创建此行为：

```
#include <iostream>

float f(float x){return x;}
double f(double x){return x;}
long double f(long double x){return x;}

int main()
{
    std::cout << f(0) << std::endl;
} 
```

这将产生同样的错误。要摆脱这种情况，您应该使用特定版本的`std::atan`，`std::cos`并在求积中`std::tan`使用`static_cast<double>`or `static_cast<long double>`，

```
template <class TFunction, class TNumber>
    TNumber integrateToInfty(TFunction f, TNumber a)
    {
        using std::atan; 
        return integrate<ChangeOfVariables<TFunction,TNumber>, TNumber>
         (ChangeOfVariables<TFunction,TNumber>(f),
              atan(static_cast<long double>(a)), PI/2); 
              /*   ^^^^^^^^^^^^^^^^^^^^^^^^^^^       */          
    } 
```

或在调用中使用浮点数而不是整数（这更容易）：

```
cout<<"e^(-2x)="<<quadrature.integrateToInfty(dampendedExp, 0.0)<<endl;
// cout<<"e^(-2x)="<<quadrature.integrateToInfty(dampendedExp, static_cast<double>(x))<<endl; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T14:42:47.820

规范的解决方案是`using std::atan; return integrate(atan(a), PI/2);`。这为您提供了`TFunction`.

# java - 短字符串格式

> ID：10933938
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:34:07.203
> 
> 标签：java

我有一个包含数百个字符串值的数组，是否可以使用特定格式使它们更短？

> 例如
> 
> 正常 -> “你好约翰，怎么了？！”
> 
> 使用短格式 -> “Hello John...”

使用子字符串后，我得到了错误。

```
private String[] finalString;
for (int i = 0; i < arrays.PodcastTitle.length; i++) {
    finalString[i] = arrays.PodcastTitle[i].substring(0, 5); 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:36:38.530

由于您没有提供任何详细信息，因此这是最短的方法：

```
String little = normalString.substring(0, 10); // use anything 5 or 10 or 15, depending on how short you want to make your String 
```

从您的编辑：

请更换：

```
private String[] finalString; 
```

到：

```
private String[] finalString = new String[whateverSizeYouWant]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T14:39:27.930

```
String toLitteString(String str, int length) {
     if (str.length() > length) return str.substring(0, length) + "...";
     return str;
} 
```

将较长的字符串截断为长度（并添加“...”）或返回短字符串的函数。如果您希望长度包含“...”，则只需更改`length`为`length - 3`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:39:59.193

你为什么不考虑实现一个方法，它接受一个字符串参数，用空格字符分解它并返回包含所需单词数的字符串？

# swift - 如何在视图控制器中以编程方式切换视图？（Xcode，iPhone）

> ID：10933939
> 
> 赞同：44
> 
> 时间：2012-06-07T14:34:11.307
> 
> 标签：swift, uiviewcontroller, swift3, storyboard

已经为此苦苦挣扎了一段时间，似乎永远无法得到直接的答案。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-06-07T14:54:20.980

如果您在导航控制器中：

```
ViewController *viewController = [[ViewController alloc] init];
[self.navigationController pushViewController:viewController animated:YES]; 
```

或者，如果您只想呈现一个新视图：

```
ViewController *viewController = [[ViewController alloc] init];    
[self presentViewController:viewController animated:YES completion:nil]; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-25T09:25:44.220

如果您想在同一个故事板中呈现新视图，

在 CurrentViewController.m 中，

```
#import "YourViewController.h"

UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
YourViewController *viewController = (YourViewController *)[storyboard instantiateViewControllerWithIdentifier:@"YourViewControllerIdentifier"];
[self presentViewController:viewController animated:YES completion:nil]; 
```

要将标识符设置为视图控制器，请打开 MainStoryBoard.storyboard。选择 YourViewController 视图-> 实用程序-> ShowIdentityInspector。您可以在此处指定标识符。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2014-12-15T01:13:41.527

**斯威夫特**版本：

**如果您在导航控制器中：**

```
let viewController: ViewController = self.storyboard?.instantiateViewControllerWithIdentifier("VC") as ViewController
self.navigationController?.pushViewController(viewController, animated: true) 
```

**或者，如果您只想呈现一个新视图：**

```
let viewController: ViewController = self.storyboard?.instantiateViewControllerWithIdentifier("VC") as ViewController
self.presentViewController(viewController, animated: true, completion: nil) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2013-05-02T14:56:38.227

`instantiateViewControllerWithIdentifier`是`Storyboard ID`。_

```
NextViewController *NVC = [self.storyboard instantiateViewControllerWithIdentifier:@"NextViewController"];
[self presentViewController:NVC animated:YES completion:nil]; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-15T20:00:41.393

关闭 CmdSft 使用先前答案代码调用的 Viewcontroller

```
ViewController *viewController = [[ViewController alloc] init];    
[self presentViewController:viewController animated:YES completion:nil]; 
```

您可以使用

```
[self dismissViewControllerAnimated:YES completion: nil]; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-02-10T06:36:38.377

**斯威夫特 3.0 版本**

如果你想展示新的控制器。

```
let storyboard = UIStoryboard(name: "Main", bundle: nil)
let viewController = storyboard.instantiateViewController(withIdentifier: "controllerIdentifier") as! YourController
self.present(viewController, animated: true, completion: nil) 
```

如果你想推送到另一个控制器（如果它在导航中）

```
let storyboard = UIStoryboard(name: "Main", bundle: nil)
let viewController = storyboard.instantiateViewController(withIdentifier: "controllerIdentifier") as! YourController
self.navigationController?.pushViewController(viewController, animated: true) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-10-22T11:44:57.877

```
#import "YourViewController.h" 
```

推送包含导航栏和/或标签栏的视图：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"YourStoryboard" bundle:nil];
YourViewController *viewController = (YourViewcontroller *)[storyboard instantiateViewControllerWithIdentifier:@"YourViewControllerIdentifier"];
[self.navigationController pushViewController:viewController animated:YES]; 
```

要将标识符设置为视图控制器，请打开 YourStoryboard.storyboard。选择 YourViewController 视图-> 实用程序-> ShowIdentityInspector。您可以在此处指定标识符。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-12-02T10:16:21.380

这对我有用：

```
NSTimer *switchTo = [NSTimer scheduledTimerWithTimeInterval:0.1
           target:selfselector:@selector(switchToTimer)userInfo:nil repeats:NO];

- (void) switchToTimer {
UIStoryboard *mainStoryboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPad" bundle:nil];
UIViewController *vc = [mainStoryboard instantiateViewControllerWithIdentifier:@"MyViewControllerID"]; // Storyboard ID
[self presentViewController:vc animated:FALSE completion:nil];
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-07T14:40:27.200

```
[self.navigationController pushViewController:someViewController animated:YES]; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-22T09:45:06.400

**斯威夫特 3.0 在**

一个视图控制器到第二个视图控制器去：

```
let loginVC = UIStoryboard(name: "Main", bundle: nil).instantiateViewController(withIdentifier: "MsgViewController") as! MsgViewController
        self.navigationController?.pushViewController(loginVC, animated: true) 
```

2nd viewcontroller 到 1stviewcontroller(back)for:**动作事件的后退按钮:-**

```
self.navigationController?.popViewController(animated:true) 
```

3rdviewcontroller 到 1st viewcontroller 跳转

```
self.navigationController?.popToRootViewController(animated:true) 
```

并且未单击导航栏中最重要的情节提要确保执行此后退操作

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-22T01:07:17.307

我认为 OP 正在询问如何在不更改 viewCONTROLLER 的情况下交换 VIEW。我误解了他的问题吗？

在伪代码中，他想做：

```
let myController = instantiate(someParentController)

let view1 = Bundle.main.loadNib(....) as... blah
myController.setThisViewTo( view1 )

let view2 = Bundle.main.loadNib(....) as... blah
myController.setThisViewTo( view2 ) 
```

我是不是把他的问题弄错了？

# database - Access 组下的多个“详细信息”部分

> ID：10933944
> 
> 赞同：0
> 
> 时间：2012-06-07T14:34:25.660
> 
> 标签：database, ms-access

我的数据是这样组织的：

*   根任务
    *   子任务1
*   根任务2
    *   子任务2
*   根任务3

在 Access 中创建报表时，按根任务分组并在详细信息下添加子任务似乎有效，但 RootTask3 不会显示，因为它没有引用它的子任务。

我如何组织报告/分组以显示根任务，即使它们没有子任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:56:16.393

默认`INNER JOIN`只显示其他表中有匹配记录的行，但是`LEFT JOIN`用于选择数据的查询中的a会给出主表中的行，即使从表中没有匹配记录。

如果您查看查询的 SQL 视图，您将看到`JOIN`.
如果您在默认设计模式下查看查询，请右键单击并选择`Join Properties`返回哪些记录。

# r - 如何计算R中向量的欧几里得范数？

> ID：10933945
> 
> 赞同：46
> 
> 时间：2012-06-07T14:34:27.590
> 
> 标签：r, vector, statistics

我试过`norm`了，但我认为它给出了错误的结果。（的规范`c(1, 2, 3)`是`sqrt(1*1+2*2+3*3)`，但它返回`6`..

```
x1 <- 1:3
norm(x1)
# Error in norm(x1) : 'A' must be a numeric matrix
norm(as.matrix(x1))
# [1] 6
as.matrix(x1)
#      [,1]
# [1,]    1
# [2,]    2
# [3,]    3
norm(as.matrix(x1))
# [1] 6 
```

有谁知道在 R 中计算向量范数的函数是什么？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2014-12-10T16:16:18.320

```
norm(c(1,1), type="2")     # 1.414214
norm(c(1, 1, 1), type="2")  # 1.732051 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-06-07T14:43:27.350

这是自己编写的一个简单的函数：

```
norm_vec <- function(x) sqrt(sum(x^2)) 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2016-09-06T04:27:37.273

我很惊讶没有人尝试分析上述建议方法的结果，所以我这样做了。我使用了一个随机统一函数来生成一个列表并将其用于重复（只是信封类型基准测试的简单背面）：

```
> uut <- lapply(1:100000, function(x) {runif(1000, min=-10^10, max=10^10)})
> norm_vec <- function(x) sqrt(sum(x^2))
> norm_vec2 <- function(x){sqrt(crossprod(x))}
> 
> system.time(lapply(uut, norm_vec))
   user  system elapsed 
   0.58    0.00    0.58 
> system.time(lapply(uut, norm_vec2))
   user  system elapsed 
   0.35    0.00    0.34 
> system.time(lapply(uut, norm, type="2"))
   user  system elapsed 
   6.75    0.00    6.78 
> system.time(lapply(lapply(uut, as.matrix), norm))
   user  system elapsed 
   2.70    0.00    2.73 
```

似乎`norm`至少手动获取电源然后 sqrt 比内置实值向量更快。这可能是因为 norm 在内部进行了 SVD：

```
> norm
function (x, type = c("O", "I", "F", "M", "2")) 
{
    if (identical("2", type)) {
        svd(x, nu = 0L, nv = 0L)$d[1L]
    }
    else .Internal(La_dlange(x, type))
} 
```

并且 SVD 函数在内部将向量转换为矩阵，并执行更复杂的操作：

```
> svd
function (x, nu = min(n, p), nv = min(n, p), LINPACK = FALSE) 
{
    x <- as.matrix(x)
    ... 
```

编辑（2019 年 10 月 20 日）：

有一些评论指出了上述测试用例没有带来的正确性问题：

```
> norm_vec(c(10^155))
[1] Inf
> norm(c(10^155), type="2")
[1] 1e+155 
```

发生这种情况是因为大数在 R 中被视为无穷大：

```
> 10^309
[1] Inf 
```

所以，它看起来像：

> 似乎手动获取电源然后 sqrt 比**用于小数字**的实值向量的内置规范更快。

多么小？这样平方和就不会溢出。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-06-12T19:12:17.423

```
norm(x, type = c("O", "I", "F", "M", "2")) 
```

The default is `"O"`.

`"O"`, `"o"` or `"1"` specifies the one norm, (maximum absolute column sum);

"F" or "f" specifies the Frobenius norm (the Euclidean norm of x treated as if it were a vector);

```
norm(as.matrix(x1),"o") 
```

The result is 6, same as `norm(as.matrix(x1))`

```
norm(as.matrix(x1),"f") 
```

The result is `sqrt(1*1+2*2+3*3)`

So, `norm(as.matrix(x1),"f")` is answer.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-15T09:32:38.700

我们还可以找到范数：

```
Result<-sum(abs(x)^2)^(1/2) 
```

或者甚至您也可以尝试：

```
Result<-sqrt(t(x)%*%x) 
```

两者都会给出相同的答案

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-12T22:31:43.073

我也要把它作为等效的 R 表达式扔出去

```
norm_vec(x) <- function(x){sqrt(crossprod(x))} 
```

不要将 R 的 crossprod 与类似命名的 vector/ [cross product](http://en.wikipedia.org/wiki/Cross_product)混淆。众所周知，这种命名会引起[混淆](https://stackoverflow.com/questions/15162741/what-is-rs-crossproduct-function)，尤其是对于那些具有物理/力学背景的人。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-09-06T11:49:36.023

带有缩放以避免破坏性下溢和溢出的向量的欧几里得长度（k-范数）的答案是

```
norm <- function(x, k) { max(abs(x))*(sum((abs(x)/max(abs(x)))^k))^(1/k) } 
```

请参阅下面的说明。

**1\. 没有缩放的向量的欧几里得长度：**

* * *

`norm()`是一个向量值函数，它计算向量的长度。它需要两个参数，例如 class 的向量`x`和 class`matrix`的范数`k`类型`integer`。

```
norm <- function(x, k) {
  # x = matrix with column vector and with dimensions mx1 or mxn
  # k = type of norm with integer from 1 to +Inf
  stopifnot(k >= 1) # check for the integer value of k greater than 0
  stopifnot(length(k) == 1) # check for length of k to be 1\. The variable k is not vectorized.
  if(k == Inf) {
    # infinity norm
    return(apply(x, 2, function(vec) max(abs(vec)) ))
  } else {
    # k-norm
    return(apply(x, 2, function(vec) (sum((abs(vec))^k))^(1/k) ))
  }
}

x <- matrix(c(1,-2,3,-4)) # column matrix
sapply(c(1:4, Inf), function(k) norm(x = x, k = k))
# [1] 10.000000  5.477226  4.641589  4.337613  4.000000 
```

*   1 范数 (10.0) 收敛到无穷范数 (4.0)。
*   k-norm 也称为“欧几里得 n 维空间中的欧几里得范数”。

**注意：** 在`norm()`函数定义中，对于具有实分量的向量，绝对值可以在 norm-2k 甚至索引范数中删除，其中`k >= 1`.

如果您对`norm`函数定义感到困惑，您可以单独阅读下面给出的每一个。

```
norm_1 <- function(x) sum(abs(x))
norm_2 <- function(x) (sum((abs(x))^2))^(1/2)
norm_3 <- function(x) (sum((abs(x))^3))^(1/3)
norm_4 <- function(x) (sum((abs(x))^4))^(1/4)
norm_k <- function(x) (sum((abs(x))^k))^(1/k)
norm_inf <- max(abs(x)) 
```

**2\. 带有缩放的向量的欧几里得长度以避免破坏性的上溢和下溢问题：**

* * *

**注2：** 这个解决方案的唯一问题`norm()`是它不能防止[这里](https://stackoverflow.com/a/39340666/1691723)和[这里](https://stackoverflow.com/a/50866051/1691723)提到的溢出或下溢问题。

幸运的是，有人已经在 blas（基本线性代数子程序）fortran 库中解决了 2 范数（欧几里得长度）的问题。可以在“Kahaner、Moler 和 Nash 的数值方法和软件”教科书 - 第 1 章，第 1.3 节，第 7-9 页中找到对这个问题的描述。

fortran 子例程的名称是，它通过缩放向量分量的最大值来`dnrm2.f`处理破坏性上溢和下溢问题。`norm()`由于`norm()`函数中的激进操作，会出现破坏性上溢和下溢问题。

`dnrm2.f`我将在`R`下面展示如何实现。

```
#1\. find the maximum among components of vector-x
max_x <- max(x)
#2\. scale or divide the components of vector by max_x
scaled_x <- x/max_x
#3\. take square of the scaled vector-x
sq_scaled_x <- (scaled_x)^2
#4\. sum the square of scaled vector-x
sum_sq_scaled_x <- sum(sq_scaled_x)
#5\. take square root of sum_sq_scaled_x
rt_sum_sq_scaled_x  <- sqrt(sum_sq_scaled_x)
#6\. multiply the maximum of vector x with rt_sum_sq_scaled_x
max_x*rt_sum_sq_scaled_x 
```

`dnrm2.f`上述6个步骤的单行`R`是：

```
# Euclidean length of vector - 2norm
max(x)*sqrt(sum((x/max(x))^2)) 
```

让我们尝试示例向量来计算此问题的 2 范数（请参阅此线程中的其他解决方案）。

```
x = c(-8e+299, -6e+299, 5e+299, -8e+298, -5e+299)
max(x)*sqrt(sum((x/max(x))^2))
# [1] 1.227355e+300

x <- (c(1,-2,3,-4))
max(x)*sqrt(sum((x/max(x))^2))
# [1] 5.477226 
```

因此，在 R 中实现 k 范数的通用解决方案的推荐方法是单行，它可以防止破坏性上溢或下溢问题。为了改进这种单线，您可以`norm()`对包含不太小或不太大的分量`knorm()`的向量使用不缩放和对分量过小或太大的向量进行缩放的组合。对所有向量实施缩放会导致计算量过多。我没有在`knorm()`下面给出这个改进。

```
# one-liner for k-norm - generalized form for all norms including infinity-norm:
max(abs(x))*(sum((abs(x)/max(abs(x)))^k))^(1/k)

# knorm() function using the above one-liner.
knorm <- function(x, k) { 
  # x = matrix with column vector and with dimensions mx1 or mxn
  # k = type of norm with integer from 1 to +Inf
  stopifnot(k >= 1) # check for the integer value of k greater than 0
  stopifnot(length(k) == 1) # check for length of k to be 1\. The variable k is not vectorized.
  # covert elements of matrix to its absolute values
  x <- abs(x)
  if(k == Inf) { # infinity-norm
    return(apply(x, 2, function(vec) max(vec)))
  } else { # k-norm
    return(apply(x, 2, function(vec) {
      max_vec <- max(vec)
      return(max_vec*(sum((vec/max_vec)^k))^(1/k))
    }))
  }
}

# 2-norm
x <- matrix(c(-8e+299, -6e+299, 5e+299, -8e+298, -5e+299))
sapply(2, function(k) knorm(x = x, k = k))
# [1] 1.227355e+300

# 1-norm, 2-norm, 3-norm, 4-norm, and infinity-norm
sapply(c(1:4, Inf), function(k) knorm(x = x, k = k))
# [1] 2.480000e+300 1.227355e+300 9.927854e+299 9.027789e+299 8.000000e+299

x <- matrix(c(1,-2,3,-4))
sapply(c(1:4, Inf), function(k) knorm(x = x, k = k))
# [1] 10.000000  5.477226  4.641589  4.337613  4.000000

x <- matrix(c(1,-2,3,-4, 0, -8e+299, -6e+299, 5e+299, -8e+298, -5e+299), nc = 2)
sapply(c(1:4, Inf), function(k) knorm(x = x, k = k))
#           [,1]          [,2]          [,3]          [,4]   [,5]
# [1,]  1.00e+01  5.477226e+00  4.641589e+00  4.337613e+00  4e+00
# [2,] 2.48e+300 1.227355e+300 9.927854e+299 9.027789e+299 8e+299 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-16T04:58:12.857

如果您有一个 data.frame 或一个 data.table 'DT'，并且想要计算每一行的欧几里得范数（范数 2），则`apply`可以使用该函数。

```
apply(X = DT, MARGIN = 1, FUN = norm, '2') 
```

例子：

```
>DT 

        accx       accy       accz
 1: 9.576807 -0.1629486 -0.2587167
 2: 9.576807 -0.1722938 -0.2681506
 3: 9.576807 -0.1634264 -0.2681506
 4: 9.576807 -0.1545590 -0.2681506
 5: 9.576807 -0.1621254 -0.2681506
 6: 9.576807 -0.1723825 -0.2682434
 7: 9.576807 -0.1723825 -0.2728810
 8: 9.576807 -0.1723825 -0.2775187

> apply(X = DT, MARGIN = 1, FUN = norm, '2')
 [1] 9.581687 9.582109 9.581954 9.581807 9.581932 9.582114 9.582245 9.582378 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-06-14T21:15:14.937

按照 AbdealiJK 的回答，

我进一步实验以获得一些见解。

这是一个。

```
x = c(-8e+299, -6e+299, 5e+299, -8e+298, -5e+299)
sqrt(sum(x^2))
norm(x, type='2') 
```

第一个结果是`Inf`，第二个结果`1.227355e+300`是非常正确的，正如我在下面的代码中向您展示的那样。

```
library(Rmpfr)
y <- mpfr(x, 120)
sqrt(sum(y*y)) 
```

结果是`1227354879...`。我没有计算尾随数字的数量，但看起来还不错。我知道解决这个`OVERFLOW`问题的另一种方法是首先将日志函数应用于所有数字并总结，我没有时间实现！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-11-18T20:22:45.930

使用 cbind 将矩阵创建为立柱虎钳，然后 norm 函数与 Frobenius norm（欧几里得范数）作为参数很好地配合使用。

> x1<-cbind(1:3)
> 
> 范数（x1，“f”）

[1] 3.741657

> 平方（1*1+2*​​2+3*3）

[1] 3.741657

# facebook-graph-api - Facebook 活动日志是否可通过 Graph API 获得？

> ID：10933946
> 
> 赞同：1
> 
> 时间：2012-06-07T14:34:30.270
> 
> 标签：facebook-graph-api

我们正在寻找对此处表示的数据的图形 API 访问：

```
http://www.facebook.com/{user}/allactivity 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T14:41:35.950

不，没有可用的 API 调用。您可以通过 FQL 查询来实现它的点点滴滴。

# c# - 制作文件备份程序

> ID：10933949
> 
> 赞同：-1
> 
> 时间：2012-06-07T14:34:31.693
> 
> 标签：c#, arrays, directory

在我工作的地方，我测试软件，我们每天在服务器上放置一个新的软件版本，我需要能够保存该版本的副本并根据保存日期重命名它，我该怎么做？

（每次的起点和终点位置都相同）

该文件只是一个安装程序，它是自包含的。

我需要它来访问原始文件的创建日期，因此我没有多个同名文件的问题，并且可以轻松找到我需要的构建。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:40:28.993

来自 msdn：

```
string path = @"c:\temp\MyTest.txt";
string path2 = path + "temp";

try 
{
        // Create the file and clean up handles.
        using (FileStream fs = File.Create(path)) {}

        // Ensure that the target does not exist.
        File.Delete(path2);

        // Copy the file.
        File.Copy(path, path2);
        Console.WriteLine("{0} copied to {1}", path, path2);

        // Try to copy the same file again, which should succeed.
        File.Copy(path, path2, true);
        Console.WriteLine("The second Copy operation succeeded, which was expected.");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T14:39:00.133

我将为每个构建创建一个包含名称中日期的新文件夹（如“Build_2012_06_07”），并将属于构建的所有文件（.exe、.dll、.pdb 等）移动到此文件夹，而不重命名文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:37:25.500

您是在谈论运行批处理脚本或 vbscript 类型的文件来自动执行此操作吗？这是我能想到的最简单的方法。但是，我可能过于简单化了您的情况，所以请告诉我。我可以为您提供一些示例代码，说明如何通过 .bat 或 vbscript 文件执行此操作。

# asp.net - 更改 radcombobox 按钮颜色

> ID：10933953
> 
> 赞同：0
> 
> 时间：2012-06-07T14:34:37.540
> 
> 标签：asp.net, combobox, telerik

我在我的 ASP.NET Web 应用程序中使用 VS2010、C#，我正在使用 RadCombobox (telerik)，如何更改它的按钮（包含向下箭头的部分），我还想更改按钮悬停颜色

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T18:56:55.630

假设您使用的是 Telerik ASP.NET AJAX 工具包，您可以通过更改其外观来更改 Rad 控件的外观。您可以从现有皮肤列表中选择皮肤：

[http://www.telerik.com/help/aspnet-ajax/combobox-appearance-skins.html](http://www.telerik.com/help/aspnet-ajax/combobox-appearance-skins.html)

您还可以使用以下链接下的步骤创建自己的皮肤：

[http://www.telerik.com/help/aspnet-ajax/combobox-appearance-creating-custom-skins.html](http://www.telerik.com/help/aspnet-ajax/combobox-appearance-creating-custom-skins.html)

可以对其他 Telerik 控件进行类似的更改。

# video - 阅读嵌入 Youtube 视频时间轴上的当前位置

> ID：10933957
> 
> 赞同：1
> 
> 时间：2012-06-07T14:34:46.067
> 
> 标签：video, youtube, position, timeline

我有一个视频要上传到 Youtube（或者更好的是 Vimeo）。

然后我会把它嵌入到我的网站上。我希望，当播放视频时，我网站的背景颜色会根据视频时间轴上的位置而变化。

例如，视频还没有播放：背景是黑色的。播放视频：背景变为蓝色。10 秒后，它变成白色。

有没有办法阅读 Youtube 视频上的位置并做到这一点？

如果不是：有没有办法只检测视频何时播放，并在此时更改背景颜色？

对所有语言开放。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T17:22:10.183

```
player.getDuration():Number 
```

返回当前播放视频的持续时间（以秒为单位）。请注意，`getDuration()`在加载视频的元数据之前将返回 0，这通常发生在视频开始播放之后。

如果当前播放的视频是直播事件，则该`getDuration()`函数将返回自直播视频流开始以来经过的时间。具体来说，这是视频在没有被重置或中断的情况下流式传输的时间量。此外，此持续时间通常比实际事件时间长，因为流式传输可能在事件开始时间之前开始。

[https://developers.google.com/youtube/js_api_reference#Retrieving_video_information](https://developers.google.com/youtube/js_api_reference#Retrieving_video_information)

# jquery - 在选择器之后找到一个值

> ID：10933964
> 
> 赞同：0
> 
> 时间：2012-06-07T14:35:00.993
> 
> 标签：jquery

我有以下 html 片段

```
<ul class="product">
 <li><span>Available:</span>123</li>
 <li><span>Code:</span>12345</li>
</ul> 
```

我想要做的是获得可用的价值，即`123`

我有：

```
var a = $(".product li:contains('Available')").text(); 
```

但是这家店`Available:123`。我只需要数值。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T14:40:02.240

```
$(function(){

    var a = $(".product li:contains('Available')").clone();
    a.find('span').remove();
    alert(a.html());    

}); 
```

示例：http: [//jsfiddle.net/wrFAh/8/](http://jsfiddle.net/wrFAh/8/)

**编辑：**上述解决方案期望`LI`元素只有一种类型的 HTML 元素，而不是要检索的数字，即`span`，如果您将 a 添加`div`到 li，这将不起作用。

为了解决这个问题，我会将`Price`HTML 中的 a包装起来`span`并访问它以避免此类问题。

所以我的 HTML 看起来像

```
<ul class="product">
    <li><span>Available:</span><span class="price">123</span></li>
    <li><span>Code:</span><span class="price">123</span></li>
</ul> 
```

脚本将是

```
$(function(){    
   var a = $(".product li:contains('Available')").find(".price").html();
   alert(a);
}); 
```

示例[http://jsfiddle.net/wrFAh/12/](http://jsfiddle.net/wrFAh/12/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:41:53.770

或者，您可以遍历所`<li>`标识的子节点，并使用文本节点的值。

```
var myLi = $(".product li:contains('Available')")[0];

var a;
for(var i = 0; i < myLi.childNodes.length; i++) {
    if(myLi.childNodes[i].nodeType === 3) {
        a = myLi.childNodes[i].nodeValue;
    }       
}

alert(a); 
```

那是一点 jQuery 来识别`<li>`你感兴趣的，然后纯 Javascript 来做迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:40:26.967

没有办法制作一个可以做你想做的事情的选择器。理想情况下，您将修改您的 HTML 并添加类和围绕该值的另一​​个跨度。如果你不能这样做，那么只要后面总是有一个冒号和一个值，你可以使用这个：

```
var a = $(".product li:contains('Available')").text().split(":")[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T14:42:16.023

您可以添加一个正则表达式来提取数字

```
 var a = $(".product li:contains('Available')").text();
 var number = a.match(/[0-9]+/)[0]; 
```

# amazon-ec2 - 在 Amazon EC2 上安装 java6 和 tomcat7

> ID：10933965
> 
> 赞同：0
> 
> 时间：2012-06-07T14:35:01.410
> 
> 标签：amazon-ec2, tomcat7, ubuntu-10.10, openjdk

Ubuntu 在 Amazon EC2 版本 10.10 上运行

*   使用安装的java

> sudo apt-get install openjdk-6-jdk

（更多关于 openjdk6 [https://launchpad.net/ubuntu/maverick/+package/openjdk-6-jdk](https://launchpad.net/ubuntu/maverick/+package/openjdk-6-jdk)）

*   在安装tomcat7时做了以下操作

> wget -c [http://apache.petsads.us/tomcat/tomcat-7/v7.0.27/bin/apache-tomcat-7.0.27.tar.gz](http://apache.petsads.us/tomcat/tomcat-7/v7.0.27/bin/apache-tomcat-7.0.27.tar.gz)
> 
> sudo tar xvfz apache-tomcat-7.0.27.tar.gz -C /var

然后我在 /var 下看到一个名为 apache-tomcat-7.0.27 的文件夹

进入 /var/apache-tomcat-7.0.27/bin 运行：</p>

> sudo bash 启动.sh

看起来tomcat启动成功了：

> ubuntu@ip-XX-XXX-XX-XXX:/var/apache-tomcat-7.0.27/bin$ sudo bash startup.sh
> 
> 使用 CATALINA_BASE：/var/apache-tomcat-7.0.27
> 
> 使用 CATALINA_HOME：/var/apache-tomcat-7.0.27
> 
> 使用 CATALINA_TMPDIR：/var/apache-tomcat-7.0.27/temp
> 
> 使用 JRE_HOME：/usr
> 
> 使用类路径：/var/apache-tomcat-7.0.27/bin/bootstrap.jar:/var/apache-tomcat-7.0.27/bin/tomcat-juli.jar

我做了一个测试：

> sudo fuser -v -n tcp 8080

然后我得到了结果（看起来tomcat已启动并正在运行）：

> 0 用户 PID 访问命令
> 
> 8080/tcp: 根 1234 F.... java

但是如果我在浏览器中输入我的服务器地址，我就看不到默认的 tomcat 页面......

我有什么遗漏吗？？？？？？我愿意接受任何建议。

## **我遵循了http://www.excelsior-usa.com/articles/tomcat-amazon-ec2-java-stack.html#tomcat**中的一些步骤（不是全部）

 **这个问题的解决方法是：这个实例不属于我。我让我的朋友通过他的 AWS 管理控制台更改防火墙配置中 8080 的规则。然后它起作用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T19:10:47.827

在不确切知道您的设置是什么的情况下，我的第一个猜测是您需要在该实例的安全组上打开端口 8080。转到安全组并将其打开到 0.0.0.0/0 或您的特定 IP（这取决于您对服务器的安全要求）**

# android - ADT 18 中的 Android android 依赖项 annotations.jar

> ID：10933967
> 
> 赞同：2
> 
> 时间：2012-06-07T14:35:02.180
> 
> 标签：android, eclipse-plugin, adt, noclassdeffounderror

我正在使用**Eclipse indigo**，使用**jdk 1.6** ..并且我已经将我的 Android 插件从**ADT 14 更新到 ADT 18**，当我创建新项目或清理项目时，我的项目中出现了**带有 annotations.jar 的 Android 依赖**项我要删除它吗，这会在添加外部 jar 时引起很多问题（例如**java.lang.NoClassDefFoundError**异常）..？

我阅读了此链接[http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)他解释了 ADT 17。如果我将 lib 文件夹重命名为 libs，引用的库将保留在项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T07:55:50.713

我解决了这个问题，annotations.jar 是构建 android 项目所需的 jar。如果你的项目中有任何 TargetApi 和 SuppressLint 注释，那么这个 jar 将帮助你忽略注释元素的指定警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T06:58:29.367

adt18可以自动链接jar，你只需要创建一个名为“libs”的文件夹，然后将你的jar复制到那个文件夹中，你不需要再做任何操作。就这么简单。

但我认为这是一个混乱的变化！希望能帮到你。

# java - 向导应用程序要遵循的设计或类/组件层次结构

> ID：10933968
> 
> 赞同：1
> 
> 时间：2012-06-07T14:35:03.160
> 
> 标签：java, swing, wizard

我是 Java 初学者。下面显示的是我想要实现的向导。

![在此处输入图像描述](../Images/3319137072b77f55eb2e7a5bee2ef108.png)

为此，我是否需要创建自定义的组件层次结构？喜欢...

```
JFrame > JpanelMain. 
JpanelMain > Banner panel.
JpanelMain > LH Navigation panel.
JpanelMain > Bottom panel with buttons... 
```

我尝试使用 Netbeans 使用教程（[http://platform.netbeans.org/tutorials/nbm-wizard.html](http://platform.netbeans.org/tutorials/nbm-wizard.html)）创建向导模块。这里的解释是关于创建在 Netbeans 中运行的 Netbeans 对话向导。但我正在搜索的是如何使独立应用程序显示为向导（类似于某些安装程序）。

有人可以告诉我，需要遵循什么设计或实现？

是否有任何可用的向导库（带有适当的文档）来帮助创建向导？（在互联网上找到了一些图书馆，但不知道如何使用它们，因为文档不正确。）

或者我是否需要遵循创建摆动组件的自定义层次结构？如果是，需要遵循什么设计/实施？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T00:31:45.873

你可以试试退房

[http://www.javaworld.com/javaworld/jw-04-2008/jw-04-opensourcejava-wizard-api.html](http://www.javaworld.com/javaworld/jw-04-2008/jw-04-opensourcejava-wizard-api.html)

个人没用过。

我认为 SwingX（Swing-Labs）项目也有一个

# php - 选择时的 PHP MySQL 语法错误

> ID：10933979
> 
> 赞同：0
> 
> 时间：2012-06-07T14:35:50.583
> 
> 标签：php, mysql, insert

我正在尝试将电子邮件地址保存到我的数据库中，但出现以下错误

```
 include 'db.php';
  echo $email = $accounts['username'];
  $date = date ("Y-m-d H:m:s");

  $result = mysql_query("SELECT * FROM users where email = $email", $conn) or die($myQuery."<br/><br/>".mysql_error());
  $num_rows = mysql_num_rows($result);

  if ($num_rows == 0) {
    $query_string = "INSERT INTO users (id, email, created)
                                        VALUES (null, '$email', '$date')";

      if (mysql_query($query_string, $conn)) {
        echo "$name inserted<br/>";
      } else {
        die('Error: ' . mysql_error());
        echo "Error inserting $email<br/>";
      }

  } else {
    echo "$email exists<br/>";
  } 
```

错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“@mink7.com”附近使用正确的语法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:40:08.507

您应该在第一条 SQL 语句中引用 $email：

`"SELECT * FROM users where email = '$email'"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:46:36.183

marcochiesi 有正确的答案，但我建议使用 mysql_real_escape_string 来帮助防止 SQL 注入攻击：

```
"SELECT * FROM users where email = '". mysql_real_escape_string($email)."'" 
```

**更新**

仅供参考，如果您没有在您要约束的信息周围加上引号，那么 MySQL 期望它是一个列。

# ios - 从移动网页通过本机 Facebook iOS 应用程序登录

> ID：10933981
> 
> 赞同：4
> 
> 时间：2012-06-07T14:35:54.513
> 
> 标签：ios, facebook, mobile, login, native

我知道关于类似主题的各种问题都存在，但我找不到我正在寻找的确切情况。我在 iOS（在 Safari 中）我的域上的移动网页上有一个“登录 Facebook”按钮。如果用户安装了本机 Facebook iOS 应用程序，我希望他们通过本机 FB iOS 应用程序登录 [而不是被迫通过移动 FB 网站登录，他们不太可能已经登录]。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:49:06.570

尝试在您的网页中添加一个 fb:// 网址。虽然我不知道是否有一个可以进入登录页面，（如果不是倒数第二个，如果可以使用这个列表？）。

```
fb://profile
fb://friends 
fb://notifications
fb://feed 
fb://events 
fb://requests 
fb://notes
fb://albums
fb://album/%@
fb://album/(aid)
fb://album/(aid)/cover
fb://album/(initWithAID:)
fb://album/(initWithAID:)/cover
fb://album/new
fb://albums
fb://birthdays
fb://birthdays/(initWithMonth:)/(year:)
fb://birthdays/(month)/(year)
fb://chat/(fbid)
fb://chat/(initWithUID:)
fb://chat/(user.fbid)
fb://contactimporter
fb://contactimporter/invites
fb://contactimporter/legalese
fb://contactimporter/modal
fb://event/%@
fb://event/%llu
fb://event/(event.fbid)/members/(rsvpStatus)
fb://event/(fbid)
fb://event/(fbid)/members/attending
fb://event/(fbid)/members/declined
fb://event/(fbid)/members/not_replied
fb://event/(fbid)/members/unsure
fb://event/(fbid)/rsvp
fb://event/(initWithEventId:)
fb://event/(initWithEventId:)/members/(rsvpStatus:)
fb://event/(initWithEventId:)/rsvp
fb://events
fb://events/
fb://faceweb/(initWithURL:)
fb://facewebmodal/(initWithURL:)
fb://feed
fb://feed/%@
fb://feed/(filter.filterKey)
fb://feed/(initWithFilterKey:)
fb://feedfilters
fb://findfriends
fb://findfriends/legalese
fb://findfriends/modal
fb://friends
fb://friends/picker
fb://friends/sync
fb://friends/sync/(removeData:)
fb://friends/sync/disconnect
fb://friends/sync/legalese
fb://group/(fbid)/members
fb://group/(initWithGroupId:)/members
fb://groups
fb://launcher
fb://mailbox
fb://mailbox/(folder)
fb://mailbox/(initWithFolder:)
fb://mailbox/(initWithFolder:)/(tid:)
fb://mailbox/(mailbox.folder)/(tid)
fb://mailbox/compose
fb://mailbox/compose/(fbid)
fb://mailbox/compose/(initWithUID:)
fb://map
fb://messaging
fb://messaging/(folder)
fb://messaging/(initWithFolder:)
fb://messaging/(initWithFolder:)/(tid:)/participants
fb://messaging/(initWithFolder:)/thread?tid=(tid:)
fb://messaging/(mailbox.folder)/(urlEscapedTid)/participants
fb://messaging/(mailbox.folder)/thread?tid=(urlEscapedTid)
fb://messaging/compose
fb://messaging/compose/(fbid)
fb://messaging/compose/(initWithUID:)
fb://messaging/original_message?mid=(commentId)
fb://messaging/original_message?mid=(initWithMessageId:)
fb://nearby
fb://note/%@
fb://note/(initWithNoteId:)
fb://note/(initWithNoteId:)/edit
fb://note/(noteId)
fb://note/(noteId)/edit
fb://note/compose
fb://notes
fb://notifications
fb://online
fb://online#offline
fb://online#online
fb://pages
fb://photo/%@/0/%@
fb://photo/(album.user.fbid)/(album.aid)/(pid)
fb://photo/(album.user.fbid)/(album.aid)/(pid)/feedback
fb://photo/(fbid)/profilepic
fb://photo/(initWithProfilePicturesUID:)/profilepic
fb://photo/(initWithUID:)/(aid:)/(pid:)
fb://photo/(initWithUID:)/(aid:)/(pid:)/feedback
fb://photosapp
fb://place/%@
fb://place/(initWithPageId:)
fb://place/(targetId)
fb://place/addfriends
fb://place/addphoto
fb://place/create
fb://places
fb://places/%lld/%lld
fb://places/(initWithCheckinAtPlace:)/(byUser:)
fb://places/legalese/tagged/%lld/%lld
fb://places/legalese/tagged/(initWithTaggedAtPlace:)/(byUser:)
fb://post/%@
fb://post/%@_%@
fb://post/(initWithPostId:)
fb://post/(initWithPostId:)/tagged
fb://post/(postId)
fb://post/(postId)/tagged
fb://post/(postId)/untagSelf
fb://post/(untagSelfFromPostWithId:)/untagSelf
fb://profile
fb://profile/
fb://profile/%@
fb://profile/%lld
fb://profile/(addFan:)/addfan
fb://profile/(fbid)
fb://profile/(fbid)/addfan
fb://profile/(fbid)/addfriend
fb://profile/(fbid)/fanpages
fb://profile/(fbid)/fans
fb://profile/(fbid)/favorite
fb://profile/(fbid)/friends
fb://profile/(fbid)/info
fb://profile/(fbid)/menu
fb://profile/(fbid)/mutualfriends
fb://profile/(fbid)/photos
fb://profile/(fbid)/poke
fb://profile/(fbid)/removefriend
fb://profile/(fbid)/wall
fb://profile/(initWithFBID:)/menu
fb://profile/(initWithFansUID:)/fans
fb://profile/(initWithFriendsUID:)/friends
fb://profile/(initWithInfoUID:)/info
fb://profile/(initWithMutualFriendsUID:)/mutualfriends
fb://profile/(initWithPhotosUID:)/photos
fb://profile/(initWithUID:)
fb://profile/(initWithUID:)/addfriend
fb://profile/(initWithUID:)/fanpages
fb://profile/(initWithUID:)/poke
fb://profile/(initWithUID:)/removefriend
fb://profile/(initWithWallUID:)/wall
fb://profile/(toggleFavorite:)/favorite
fb://profile/(user.fbid)/fans
fb://profile/(user.fbid)/friends
fb://profile/(user.fbid)/mutualfriends
fb://profile/0
fb://publish
fb://publish/mailbox/(initWithFolder:)/(tid:)
fb://publish/mailbox/(mailbox.folder)/(tid)
fb://publish/photo/(album.user.fbid)/(album.aid)/(pid)
fb://publish/photo/(initWithUID:)/(aid:)/(pid:)
fb://publish/post/(initWithPostId:)
fb://publish/post/(postId)
fb://publish/profile/(fbid)
fb://publish/profile/(initWithUID:)
fb://publish/profile/(owner.fbid)
fb://requests
fb://root
fb://upload
fb://upload/%@/album/%lld/%@
fb://upload/%@/checkin/%lld
fb://upload/%@/profile/%lld
fb://upload/(initWithSource:)/album/(uid:)/(aid:)
fb://upload/(initWithSource:)/checkin/(checkinId:)
fb://upload/(initWithSource:)/profile/(uid:)
fb://upload/actions
fb://upload/actions/album/(initWithUID:)/(aid:)
fb://upload/actions/album/(user.fbid)/(aid)
fb://upload/actions/checkin/(checkinId)/
fb://upload/actions/checkin/(initWithCheckinId:)
fb://upload/actions/newalbum
fb://upload/actions/profile/(fbid)
fb://upload/actions/profile/(initWithUID:)
fb://upload/actions/resume
fb://upload/album/(showUploadMenuWithUID:)/(aid:)
fb://upload/album/(user.fbid)/(aid)
fb://upload/checkin/(checkinId)
fb://upload/checkin/(showUploadMenuWithCheckinID:)
fb://upload/discard
fb://upload/profile/(fbid)
fb://upload/profile/(owner.fbid)
fb://upload/profile/(showUploadMenuWithUID:)
fb://upload/resume
fb://userset
fb://video/%@
fb://video/(playVideoWithId:)
fb://video/(videoId)
fb://page/(fbid) will work to open to a specific page.
and fb://place/(fbid) will take you to a location page

There may be more with more recent releases. 
```

# visual-studio-2010 - 我怎样才能建立一个“地铁外观”的网站？

> ID：10933990
> 
> 赞同：2
> 
> 时间：2012-06-07T14:36:24.550
> 
> 标签：visual-studio-2010, windows-7, javascript

我想使用 Javascript 库构建一个包含大部分静态内容（实际上是用户指南）的小型网站。如果我必须使用服务器端语言，我会在 Visual Studio 中使用 C#（ASP .Net 或 MVC），因为我已经知道如何使用此基础结构构建复杂的网站。

但是我想使用 Metro 外观方面，因为我觉得它非常好，并且适合这种网站。我知道 Visual Studio 2012 提供了一个不错的模板来构建具有 Metro 风格的网站，但它仅在 Windows 8 Preview 上可用，因为需要使用 WinRT 库，对吗？

因此，我正在寻找现有的 Javascript 库来为我解决问题，因为我将在 Windows 7/Visual Studio 2010 上开发它。

非常感谢 ！

# maven - 使用程序集插件时出现问题？

> ID：10933996
> 
> 赞同：1
> 
> 时间：2012-06-07T14:36:37.593
> 
> 标签：maven, maven-2, maven-plugin, maven-assembly-plugin

当我使用

```
<plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                **<version>2.3</version>**
                <configuration>
                     <descriptorRefs>
                           <descriptorRef>jar-with-dependencies</descriptorRef>
                     </descriptorRefs>
                </configuration>
            </plugin> 
```

我发现当我不使用版本标签时，我收到了完全不同的 jar。此外，当我不指定版本时，某些文件甚至在 jar 中重复。

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T16:04:37.483

If you don't give an explicit version in your pom Maven uses the version which is defined by the super pom which comes with the maven version you have installed and that is usually a one which is older and might have problems or might not support the functionality you need. This results in defining all the time a version explicit or use a parent pom which defines the versions of the plugins to have a reproducible build.

# c++ - 从 C++ .dll 到 Delphi Forms 应用程序的 PostMessage 问题

> ID：10933998
> 
> 赞同：2
> 
> 时间：2012-06-07T14:36:40.773
> 
> 标签：c++, delphi, dll, postmessage

我有在 Delphi 7 上编写的 Windows 窗体应用程序和使用 MFC 编写的 C++ .dll。

目前我正在尝试实现从 .dll 到主可执行文件的基本消息发布，以在进度条上显示用户计算过程，但遇到了几个问题。

让我先描述一下我的方法。我在我的 Delphi 应用程序中注册了简单的消息，例如：

```
WM_MSG := RegisterWindowMessage('WM_MSG'); 
```

并在图书馆部分做同样的事情：

```
UINT nMsgID = RegisterWindowMessage(_T("WM_MSG")); 
```

这没关系：调试时我可以在两边看到相同的值。

我的库函数看起来像这样（只是一个测试进度条的虚拟示例）：

```
extern "C" __declspec(dllexport) int MyFunction() {  
  UINT nMsgID = RegisterWindowMessage(_T("WM_MSG"));
  HWND hWnd = FindWindow(NULL, "Form1");
  if (hWnd > 0)
    for (int i = 0; i < 100000; i++) {
      int param = ceil(100 * (double) i / (double) 100000);
      PostMessage(hWnd, nMsgID, param, NULL);
    }
  return 1;
} 
```

可执行**OnMessage**事件：

```
procedure TForm1.OnMessageEvent(var Msg: tagMSG; var Handled: Boolean);
begin
  Handled := True;
  if Msg.message = WM_MSG then
    ProgressBar1.Position := Msg.wParam
  else Handled := False;
end; 
```

来自可执行文件的 C++ 函数调用：

```
procedure TMyFunctionDLL.Execute;
var
  i: Integer;
  tHWND: HWND;
begin
  tHWND := FindWindow(nil, 'mainF');
  i := Func;
end; 
```

第一个问题是**tHWND**和**hWnd**变量值莫名其妙地不同。经过一番研究，我发现了 3 种情况： 1\. 负或正巨大**hWnd** 2\. 零**hWnd** 3\. 未定义（'???'）

在所有情况下，变量**hWnd**都被标记为*未使用*，我不知道这是什么意思。最有趣的是，如果我以非常简单的 Delphi 形式（只有一个单元）对其进行测试，代码确实可以工作。这个简单的 Delphi 表单与我计算真实数据的真实 C++ .dll 代码配合得很好。但是当我使用我的一般 Delphi 应用程序（许多单元但仍然是一种形式）时，似乎主应用程序 OnMessage 事件没有从 C++ dll 捕获任何事件。

所以，有两个问题：1.为什么**hWnd**值总是不同的，为什么它们“未使用”？2.如何强制我的主应用程序与进度条一起正常工作？

我一直在使用不同的方法来解决这个问题。例如将**Application.Handle**或**Form1.Handle**作为函数参数传递给 C++ 库。他们都没有工作，甚至没有说参数值在传递时发生了变化（我想这应该是一个单独的问题）。我还尝试使用**::FindWindow()**和**::PostMessage()**而不是**FindWindow()**和**PostMessage()**（它们之间有什么区别？），这也没有帮助。我已经在尝试改善一整天的情况，但不知道如何解决。请帮助我任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T19:44:54.890

除了其他人所说的，更好的设计是让 EXE`HWND`直接将其传递到 DLL 中，然后 DLL 不必去寻找它。这有一个额外的好处，即 EXE 可以决定`HWND`DLL 应该将其消息发布到哪个。我会`AllocateHWnd()`为此创建一个专用窗口。

试试这个：

```
UINT nMsgID = RegisterWindowMessage(_T("WM_MSG")); 

extern "C" __declspec(dllexport) int __stdcall MyFunction(HWND hWnd) {   
    if ((nMsgID != 0) && (hWnd != NULL)) {
        for (int i = 0; i < 100000; i++) { 
            int param = ceil(100 * (double) i / (double) 100000); 
            PostMessage(hWnd, nMsgID, param, 0); 
        } 
    }
    return 1; 
} 
```

.

```
unit Unit1;

interface

...

var
  DllWnd: HWND = 0;

implementation

var
  WM_MSG: UINT = 0;

procedure TForm1.FormCreate(Sender: TObject); 
begin 
  DllWnd := AllocateHWnd(DllWndProc);
end; 

procedure TForm1.FormDestroy(Sender: TObject); 
begin 
  if DllWnd <> 0 then
  begin
    DeallocateHWnd(DllWnd);
    DllWnd := 0;
  end;
end; 

procedure TForm1.DllWndProc(var Message: TMessage); 
begin 
  if (Message.Msg = WM_MSG) and (WM_MSG <> 0) then 
    ProgressBar1.Position := Message.WParam
  else
    Message.Result := DefWindowProc(DllWnd, Message.Msg, Message.WParam, Message.LParam); 
end; 

...

initialization
  WM_MSG := RegisterWindowMessage('WM_MSG');     

end. 
```

.

```
uses
  Unit1;

function DllFunc(Wnd: HWND): Integer; stdcall; external 'My.dll' name 'MyFunction'; 

procedure TMyFunctionDLL.Execute;   
var   
  i: Integer;   
begin   
  i := DllFunc(DllWnd);   
end; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:50:42.820

结果`FindWindow`可以是零或非零。句柄值不在数轴上。它们只是不同的值，因此对它们应用不等式运算符是没有意义的。换句话说，句柄值可能看起来是负数，所以不要假设有效句柄总是*大于*零。

如果窗口句柄值不匹配，那么难怪没有其他方法起作用。您无法调试消息的功能，因为您甚至不确定是否将它们发送到正确的窗口。专注于首先解决这个问题。

仅`FindWindow`作为最后的手段使用。它没有提供检测何时有多个窗口符合您的搜索条件的工具。它总是只返回一个结果。尽可能避免搜索。相反，准确地告诉发件人要将消息发送到哪个窗口。你说你试过这个但失败了，但我敦促你多走这条路。您遇到的问题可能是调用约定不匹配。确保 DLL 和宿主应用程序都使用 stdcall。

* * *

一旦您确定将消息发送到正确的窗口，您*就*可以担心为什么您的消息没有正确操作进度条。我至少可以看到两个原因：

1.  当 DLL 函数运行时，调用 DLL 的主程序不运行。它正在等待 DLL 代码返回。这意味着您的主程序没有处理任何消息。DLL 正在发布一堆消息，但它们还没有得到处理。在程序返回到它的消息循环之前，它们不会得到处理。

2.  Windows 消息队列的默认大小为 10,000。您向队列发布了 10 倍的消息，并且在停止之前没有处理任何消息，因此即使队列在您开始之前完全为空（这不太可能，因为您可能是从键盘或鼠标输入触发此功能） ，您只会收到十分之一的消息。当队列已满时，`PostMessage`只需丢弃该消息。而且由于您与消息一起发送的值是 0 到 100 之间的整数，因此发送 100,000 个消息是毫无意义的，而其中只有 101 个消息会包含有意义的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T16:10:17.760

如果对 FindWindow 的相同调用返回不同的窗口，那么您必须有多个名称为 Form1 的窗口。尝试为这些不同的窗口赋予不同的名称，以便可以唯一标识它们。

未使用的问题有点不清楚。也许您的意思是编译器已经注意到分配给 tHWND 的值从未使用过，因此毫无意义。

我会做最后的评论，这个问题是不精确的，这可能是你问题的一部分。例如，您说所有变量都未使用，但我们不清楚您的意思。如果您更加精确和有条理，您将在调试方面取得更大的成功。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-09T10:01:00.920

好吧，看来我已经解决了问题...我尝试了[Remy 的](https://stackoverflow.com/users/65863/remy-lebeau)声明导出函数的建议

```
function MyFunction (fHWND: HWND): Integer; cdecl; external 'My.dll' 
```

[正如大卫](https://stackoverflow.com/users/505088/david-heffernan)建议的那样，使用 cdecl 调用约定。我之前的函数声明是这样的

```
TMyFunction = function (fHWND: HWND): Integer; 
```

我想这就是问题所在。感谢大家的帮助！

PS现在，我该如何结束这个问题？