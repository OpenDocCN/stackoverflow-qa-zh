# StackOverflow 问答 12384000-12384999

# python - python 中默认使用哪种类型的表示来存储 Unicode 字符串？

> ID：12384000
> 
> 赞同：0
> 
> 时间：2012-09-12T08:25:57.267
> 
> 标签：python, unicode

如果我在 python 中这样做：

```
>>> name = "âțâîâ"
>>> name
'\xc3\xa2\xc8\x9b\xc3\xa2\xc3\xae\xc3\xa2'
>>> len(name)
10
>>> u = name.decode('utf-8')
>>> len (u)
5
>>> 
```

如果您不指定任何，python 中的默认编码是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:33:37.600

您正在指定一个 python 字符串文字，它们的编码由编辑器的默认设置确定（或者在 python 解释器的情况下，您的终端）。Python 在这方面没有发言权。

默认情况下，python 2 尝试将源代码解释为 ASCII。在 python 3 中，这已被切换到 UTF-8。

请阅读[Python Unicode HOWTO](http://docs.python.org/howto/unicode.html)以进一步了解 Unicode 与输入和输出编码之间的区别。您还真的应该阅读 Joel Spolksy[关于 Unicode 的文章](http://www.joelonsoftware.com/articles/Unicode.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:42:41.523

可能您正在使用 Python 2。（如果不是，这个答案很糟糕。）

会发生以下情况：

```
>>> name = "âțâîâ" 
```

您分配给`name`一个（字节）字符串，其内容由您的终端编码确定。您的文本编辑器。在您的情况下，这显然是 UTF8。

这些字节显示为

```
>>> name
'\xc3\xa2\xc8\x9b\xc3\xa2\xc3\xae\xc3\xa2' 
```

只有当你用它解码时

```
>>> u = name.decode('utf-8') 
```

你得到一个unicode字符串。在这里您指定该编码。

一种更简单、更可靠的方法是直接做

```
u = u"âțâîâ" 
```

然后才根据您想要的编码提取字节：

```
name = u.encode("utf-8") 
```

# ruby-on-rails - RoR3：ajax form_for

> ID：12384005
> 
> 赞同：1
> 
> 时间：2012-09-12T08:26:05.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在**RoR2**中，我们可以使用：

```
remote_form_for "something", :update => {:success => "smthId", :failure => "errors"} do |f| 
```

发出 ajax 请求并重新渲染对应的 div 或其他任何内容`smthId`；

* * *

在**RoR3** `remote_form_for`中已弃用，因此：

```
form_for @something, :remote => true do |f| 
```

必须使用。

* * *

我的问题：是否有类似**RoR3**中的帮助程序的选项`:update => {}`，或者每次需要重新渲染时都应该在控制器中触发 javascript 的方法？`form_for`**`smthId`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:01:07.730

rails 3中没有**更新选项**。您可以像下面这样使用它：

```
 $("#new_something").bind('ajax:success', function(xhr, data, status){});
 $("#new_something").bind('ajax:error', function(xhr, data, status){}); 
```**

# php - php脚本每周五工作

> ID：12384006
> 
> 赞同：2
> 
> 时间：2012-09-12T08:26:09.523
> 
> 标签：php, date, hour

我有这个脚本每天工作 2 小时。现在，我有 2 个问题：1）我如何让它只在每个星期五工作，而不是整天工作？2）我如何使用分钟到m代码？$hour:$min > 8:15 不工作

```
<?php
$hour = date('G'); 
if ($hour >= 8 && $hour <= 10) { 
  include('facut_mine2.php');

 } 
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:28:15.640

用于`date('w')`获取工作日

```
<?php
$start = strtotime('8:15');
$end = strtotime('9:45');

if(date('w') == 5){ // day 5 = Friday
    $timenow = date('U'); 
    if ($timenow >= $start && $timenow <= $end) { 
      include('facut_mine2.php');
    } 
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:29:57.967

```
<?php
$hour = date('G');
$day = date('w');
if ($day == 5 && $hour >= 8 && $hour <= 10) { 
  include('facut_mine2.php');

 } 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:35:13.123

通过在 date() 函数中使用 D 参数，您可以检索当前工作日：

```
$today = date('D');// $today = 'Wed' 
```

一分钟后，您可以再次将 date() 函数与 i 一起使用

```
 $current_min = date('i');

if(date('D') == 'Fri') { 
    $hourMin = date('H:i');
    if ($hourMin >= '08:15' && $hourMin <= '10:00') { 
      include('facut_mine2.php');
    } 
} 
```

# regex - 正则表达式匹配字符串与可变字符

> ID：12384008
> 
> 赞同：0
> 
> 时间：2012-09-12T08:26:18.373
> 
> 标签：regex

我有一个这样的字符串

```
<image id="1347292584243" x="377" y="217" width="304" height="110" 
   xmlns:NS1="http://www.w3.org/1999/xlink"
   NS1:href="../../bpdocs/docs/ded98560-61d0-42f2-944e-30280d54e94b/xskykg886745dsv8998e8fd5k668mz/images/w/a31ab754-22ce-43a6-be00-a374b4a8c87a.jpg"
   xmlns:NS2="" NS2:xmlns:xlink="http://www.w3.org/1999/xlink" bpw="304" bph="110" /> 
```

在这个字符串中，我想匹配以下单个字符串

1.  xmlns:NS1="http://www.w3.org/1999/xlink"

2.  xmlns:NS2=""

3.  NS2:xmlns:xlink="http://www.w3.org/1999/xlink"

我想匹配上面的内容，但是这些字符串的每个部分都包含 NS[x]。其中 x = 变量数

有人可以为我提供一个表达式来匹配这样的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:31:30.410

这行得通吗？

```
\S*NS\d+\S* 
```

它表示非空格序列 ( `\S*`)，然后`NS`是 ，然后是一个或多个数字 ( `\d+`)，然后是另一个非空格序列 ( `\S*`)。

# c# - BusyIndi cator 使用 MVVM

> ID：12384012
> 
> 赞同：3
> 
> 时间：2012-09-12T08:26:36.467
> 
> 标签：c#, .net, wpf, mvvm, wpftoolkit

这可能是重复的问题，但我找不到我的问题的解决方案。

我正在使用 MVVM 模式开发 WPF 应用程序。

有四个视图绑定到它们的 ViewModel。所有 ViewModel 都将 BaseViewModel 作为父级。

```
public abstract class ViewModelBase : INotifyPropertyChanged
{
    private bool isbusy;

    public bool IsBusy
    {
        get
        {
            return isbusy;
        }
        set
        {
            isbusy = value;
            RaisePropertyChanged("IsBusy");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected void RaisePropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;

        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

MainView 包含 BusyIndi​​cator：

```
<extWpfTk:BusyIndicator IsBusy="{Binding IsBusy}">
        <ContentControl />
    </extWpfTk:BusyIndicator> 
```

如果我在 MainViewModel 中设置 IsBusy = true，则会显示 BusyIndi​​cator。

如果我尝试从其他 ViewModel 设置 IsBusy = true，则不会显示 BusyIndi​​cator。

请注意，我不能在我的项目中使用 MVVMLight 之类的第 3 方库，以便使用他们的 Messenger 在 ViewModel 之间进行通信。

主视图：

```
public class MainWindowViewModel : ViewModelBase
{
    public ViewModel1 ViewModel1 { get; set; }
    public ViewModel2 ViewModel2 { get; set; }
    public ViewModel3 Model3 { get; set; }

    public MainWindowViewModel()
    {
        ViewModel1 = new ViewModel1();
        ViewModel2 = new ViewModel2();
        ViewModel3 = new ViewModel3();
        //IsBusy = true; - its working
    }
} 
```

视图模型1：

```
public class ViewModel1 : ViewModelBase
{
    RelayCommand _testCommand;

    public ViewModel1()
    {
    }

    public ICommand TestCommand
    {
        get
        {
            if (_testCommand == null)
            {
                _testCommand = new RelayCommand(
                    param => this.Test(),
                    param => this.CanTest
                    );
            }
            return _testCommand;
        }
    }

    public void Test()
    {
        //IsBusy = true; - BusyIndicator is not shown

    }

    bool CanTest
    {
        get 
        { 
            return true; 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:59:46.213

```
 public class MainWindowViewModel : ViewModelBase
   {
    public ViewModel1 ViewModel1 { get; set; }
    public ViewModel2 ViewModel2 { get; set; }
    public ViewModel3 Model3 { get; set; }

    public MainWindowViewModel()
    {
        ViewModel1 = new ViewModel1();
        ViewModel2 = new ViewModel2();
        ViewModel3 = new ViewModel3();
        ViewModel1.PropertyChanged += (s,e) => 
        {
           if(e.PropertyName == "IsBusy") 
           { 
              // set the MainWindowViewModel.IsBusy property here
              // for example:
              IsBusy = ViewModel1.IsBusy;
           }
         }
    //IsBusy = true; - its working
   }
} 
```

对所有视图模型重复订阅。

当您不再需要它时，不要忘记取消订阅事件，以避免内存泄漏。

您的问题是：您绑定到 MainWindowViewModel 的属性，而不是内部 ViewModel 的属性。

# sql - 在 SQL Server 中创建计划作业以检查表数据中的警报条件

> ID：12384014
> 
> 赞同：0
> 
> 时间：2012-09-12T08:26:37.070
> 
> 标签：sql, sql-server, sql-server-2005

如何在 SQL Server 数据库上设置计划作业，以检查警报条件，例如表列方差的变化，并在方差列中的数据在 10-15 范围内时执行发送电子邮件警报的 cmd

数据库表中的列将是动态的......用户必须能够动态选择和设置任何数据库表列的警报并检查警报条件

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:32:05.580

Variance is the square of the standard deviation, so you could:

```
if (select stddev(col1)*stddev(col1) from YourTable) > 0.15
    begin
    exec sp_send_dbmail ... 
    end 
```

You can find instructions on [how to configure DB mail here](http://blog.sqlauthority.com/2008/08/23/sql-server-2008-configure-database-mail-send-email-from-sql-database/).

# python - 用字符串替换“匹配”对象，Python

> ID：12384016
> 
> 赞同：3
> 
> 时间：2012-09-12T08:26:52.690
> 
> 标签：python, regex, string, replace

我想用另一个字符串替换文本中的某些行。到目前为止，我能够找到要替换的文本：

```
text = open('sample','r').read()
regex = re.compile('.*#= min, max\s')
for match in regex.finditer(text):
    print match.group(0) #this is what i want to replace 
```

编辑：也试过

```
text = open('sample','r').read().split('\n')
for line in text:
    line = re.sub('.*#= min, max\s', "HOLA", line) 
```

文本保持不变。难道是我的正则表达式搞砸了？我在其他地方用过同样的，没有问题。它也是一个简单的正则表达式。

如何切换到另一条线路？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:34:06.890

我不确定我是否明白你想要什么。但是可以使用要替换的文本来调用`regex`对象的[`sub()`函数，例如](http://docs.python.org/library/re.html#re.sub)

```
regex.sub("new text", text) 
```

或者使用一个函数获取一个匹配对象并返回要替换的文本，例如

```
def reverse(match):
    return match.group(0)[-1::-1]
    # or do whatever else you might want to do
regex.sub(reverse, text) 
```

这样您就可以完全自由地决定替换什么。

请注意，由于`.*`您的正则表达式中的贪婪，这可能只替换最后一部分。一定要使用`$`(end of line), `^`(start of line), `.*?`(non-greedy version) 和`re`option `MULTILINE`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:31:09.213

尝试：

```
subbedlines = []

with open('sample','r') as textreader:
    lines = textreader.read().split('\n')

for line in lines:
    subbedlines.append(re.sub('.*#= min, max\s', "HOLA", line)) 
```

如果您的正则表达式正确并且文本文件中的行匹配，则应该可以工作。再次写入文件只需执行以下操作：

```
with open('sample','w') as textwriter:
    for line in subbedlines:
        textwriter.write("%s\n" % line) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T11:20:39.070

也许我不明白，但你为什么要逐行迭代，而不是像这样替换每一个：

```
import re

with open("text.txt") as text:
    new_text = re.sub("jj", "xx", text.read())
    with open("newtext.txt", "w") as result:
        result.write(new_text) 
```

但也许我错过了一些东西。

# java - 如何在简单的 Servlet 中使用 Spring Data JPA？

> ID：12384018
> 
> 赞同：0
> 
> 时间：2012-09-12T08:26:55.970
> 
> 标签：java, spring, servlets, spring-data-jpa

我对 Spring 很陌生，但我正在开发一个使用 Spring Data JPA 为 JPA 实体生成存储库的项目。

我目前正在添加一个简单的模块，以便能够在网页上显示一些数据。我添加了一个 Servlet，但我无法从那里访问存储库。

我在 web.xml 中添加了一个 ContextLoaderListener，我在 applicationContext.xml 中引用了 jpa:repositories 和 persistence.xml，但我目前遇到了这个异常：

> 没有定义类型为 [javax.persistence.EntityManagerFactory] ​​的唯一 bean：预期为单个 bean，但发现为 0。

但是当我在 persistence.xml 添加一个 EntityManagerFactory 时，我收到以下神秘消息：

> java.lang.IllegalAccessError：试图从类 org.hibernate.engine.spi.EJB3CascadeStyle 访问字段 org.hibernate.engine.spi.CascadeStyle.STYLES

我的问题是：我正在尝试做的事情是否可能？如果是这样，怎么办？还是我应该咬紧牙关，完全使用 Spring MVC 或其他东西？

注意：这仅适用于单页网站，我试图使其尽可能简单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:55:07.077

为了使用 Spring Data JPA，您需要配置底层 JPA 实现，就像您通常在 Spring 中所做的那样，例如，参见`infrastructure.xml`（`META-INF/persistence.xml`从Spring 3.1 开始，如果您使用属性，则[`spring-data-jpa-showcase`](https://github.com/SpringSource/spring-data-jpa-examples/tree/master/spring-data-jpa-showcase/src/main/resources)可以摆脱）。`persistence.xml``packagesToScan``LocalContainerEntityManagerFactoryBean`

您的第二个问题`IllegalAccessError`看起来像是类路径中存在不同版本的 Hibernate jar 引起的类加载问题。

# java - 为什么无法应用 Maven 中的方面？

> ID：12384021
> 
> 赞同：1
> 
> 时间：2012-09-12T08:27:02.540
> 
> 标签：java, maven, aspectj

我在**向 Maven 项目添加方面时遇到**问题。我准备了小演示：

`Project1`仅包含一个基本类

```
public class Sender {

    public static void main(String[] args) {
        System.out.println("here main");
    }
} 
```

它的`pom.xml`：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>Project1</groupId>
    <artifactId>Project1</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <properties>
        <maven.compiler.source>1.6</maven.compiler.source>
        <maven.compiler.target>1.6</maven.compiler.target>
    </properties>

    <build>

        <sourceDirectory>src</sourceDirectory>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.3</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal><!-- to weave all your  main classes -->
                            <goal>test-compile</goal><!-- to weave all your test classes -->
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <source>${maven.compiler.source}</source>
                    <target>${maven.compiler.target}</target>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>Project2</groupId>
                            <artifactId>Project2</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>
                </configuration>
            </plugin>

        </plugins>
    </build>

    <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.11</version>
            <scope>compile</scope>
        </dependency>

        <dependency>
            <groupId>Project2</groupId>
            <artifactId>Project2</artifactId>
            <version>0.0.1-SNAPSHOT</version>
        </dependency>

    </dependencies>
</project> 
```

并`Project2`包含一个方面：

```
@Aspect
public class AspectL {

    @Pointcut("execution(* main(..))")
    public void defineEntryPoint() {
    }

    @Before("defineEntryPoint()")
    public void aaa(JoinPoint joinPoint) {
        System.out.println("aspect before");
    }

    @After("defineEntryPoint()")
    public void bbb(JoinPoint joinPoint) {
        System.out.println("aspect after");
    }
} 
```

及其`pom`

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>Project2</groupId>
  <artifactId>Project2</artifactId>
  <version>0.0.1-SNAPSHOT</version>
<properties>
    <maven.compiler.source>1.6</maven.compiler.source>
    <maven.compiler.target>1.6</maven.compiler.target>
  </properties>

  <build>

     <sourceDirectory>src</sourceDirectory>
    <plugins>
       <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>aspectj-maven-plugin</artifactId>
        <version>1.3</version>
        <executions>
          <execution>
            <goals>
              <goal>compile</goal><!-- to weave all your main classes -->
              <goal>test-compile</goal><!-- to weave all your test classes -->
            </goals>
          </execution>
        </executions>
        <configuration>
          <source>${maven.compiler.source}</source>
          <target>${maven.compiler.target}</target>
        </configuration>
      </plugin>

    </plugins>
  </build>

  <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.11</version>
            <scope>compile</scope>
        </dependency>

  </dependencies>
</project> 
```

但结果，当我尝试运行`Sender`时

```
Exception in thread "main" java.lang.NoSuchMethodError: AspectL.aspectOf()LAspectL;
    at Sender.main(Sender.java:6) 
```

你有什么建议吗？我是否以正确的方式配置这些项目？还好吗`pom`？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:25:51.047

您有版本冲突：1.3 版中的 aspectj-maven-plugin 使用 AspectJ 版本：1.6.7

[链接 v1.3](http://search.maven.org/#artifactdetails%7Corg.codehaus.mojo%7Caspectj-maven-plugin%7C1.3%7Cmaven-plugin "关联")

如果要使用 1.6.11，可以使用插件版本 1.4

[链接 v1.4](http://search.maven.org/#artifactdetails%7Corg.codehaus.mojo%7Caspectj-maven-plugin%7C1.4%7Cmaven-plugin)

# xcode - 为什么 IB xcode 中 uivew 的默认背景是黑色的？

> ID：12384022
> 
> 赞同：4
> 
> 时间：2012-09-12T08:27:03.230
> 
> 标签：xcode, uiview, interface-builder

当我在 IB 中设置视图的**默认** 背景（视图用作表的标题）时，它变为黑色，但是当我在模拟器上运行应用程序时，它具有 uitableview 背景的默认颜色。

例如，当我将**默认**颜色设置为黄色时，IB 和模拟器始终为黄色。

为什么**默认**背景颜色在 IB 中为黑色，而在模拟器中为带条纹的灰色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-13T05:04:51.630

因为 Xcode 中的 Interface Builder 有 bug。我假设您的意思是将背景颜色设置为“默认”选项？

我遇到了几个类似的背景颜色错误，有时它甚至设置了不应该具有背景颜色的元素的背景颜色。我通常做的是右键单击 xib 或故事板文件并以源代码形式打开。然后找到我的元素并小心删除背景属性（如果您担心意外破坏复杂的 xml 文件结构，请备份文件）。然后再次以 Interface Builder 的形式打开它，它通常会解决问题。

或者，最坏的情况是，我删除问题元素或视图并重新创建它。

编辑：我还想到默认颜色可能是清晰的颜色，在这种情况下，纹理通过视图显示，而不是作为视图的背景绘制，并且界面构建器选择黑色，因为 A）它不知道视图将在上面绘制什么和/或 B）视图或父视图被标记为不透明或类似的东西。

# android - 无法下载平台 15 的 Android sdk 示例

> ID：12384024
> 
> 赞同：1
> 
> 时间：2012-09-12T08:27:19.773
> 
> 标签：android, sample

我在我的 Ubuntu 笔记本电脑上下载并安装了 android sdk 15。一切正常，但我无法下载 sdk 示例。他们有空吗？？？我按照此页面[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)的说明进行操作，但在对话框中看不到选项下载和安装示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:30:58.437

使用 Android sdk manager，他会告诉你安装示例或不安装。如果没有安装然后告诉你错误。并检查硬盘空间（可以）。并阅读这篇文章[install sdk](http://developer.android.com/sdk/exploring.html) 到时候感谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T12:27:35.197

//你需要下载它有一个选项。

如果它显示已安装，您需要转到名为的文件夹`<sdk>/samples/`

实际上它不在那个文件夹中`<sdk>/platforms/<android-version>/samples/`

# php - 在搜索框中用空格替换特殊字符

> ID：12384026
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:27:28.940
> 
> 标签：php, string, replace, character

我在 php 文件中有一个搜索框，像这样

```
<form action="/">
<input type="text" name="q">
<input class="submit" type="submit"  value="Search" />
</form> 
```

但如果用户在搜索框中输入特殊字符，搜索就会出错。

那么如何在特殊字符被传递给搜索之前用空格替换它？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:01:25.510

正如其他人所指出的，出于安全原因，最好在服务器端执行验证和过滤（例如，用户可以简单地将特殊字符写入 URL 的查询部分）

这样的事情可能会做，它将所有不是字母数字的字符替换为空格；

```
$q = $_GET['q'];
$q = preg_replace('/[^a-zA-Z0-9]+/', ' ', $q); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:36:36.150

```
<form action="/">
<input type="text" name="q" onkeyup="this.value = this.value.replace(new RegExp('(a|b|d)', 'g'), ' ');">
<input class="submit" type="submit"  value="Search" />
</form> 
```

只需更改要替换的字符中的 a|b|d 即可。

或者，您可以从 GET 表单提交更改为 POST

```
<form action="/" method="post">
<input type="text" name="q">
<input class="submit" type="submit"  value="Search" />
</form> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T08:36:10.260

我想您必须使用正则表达式（regex）

# groovy - 什么是过早离开 groovy 脚本的最佳方法（system.exit(0) 除外）

> ID：12384029
> 
> 赞同：35
> 
> 时间：2012-09-12T08:27:40.107
> 
> 标签：groovy

过早离开 groovy 脚本的最佳方法是什么？

groovy 脚本从给定的信息文件中读取一行，然后进行一些验证工作，以防验证失败（数据不一致）脚本需要提前离开流程。然后系统将再次调用该脚本以读取同一信息文件的下一行

代码示例：

```
 read a row
 try{
   //make some verification here
 }catch(Exception e){
    logger("exception on something occurred "+e,e)
    //here need to leave a groovy script prematurely
 } 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-20T02:59:39.287

我很确定您可以仅从`return`脚本中进行。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-09-12T11:18:59.630

只需使用`System.exit(0)`.

```
try {
    // code
} catch(Exception e) {
    logger("exception on something occurred "+e,e)
    System.exit(0)
} 
```

* * *

您可以使用退出状态代码来指示您遇到问题的行。

零值表示一切正常，正值表示行号。然后，您可以让您的 groovy 脚本将起始行作为输入参数。

* * *

这是一个幼稚的实现，如果一行为空，则只有一个愚蠢的异常。

```
file = new File(args[0])
startLine = args[1].toInteger()

file.withReader { reader ->
    reader.eachLine { line, count ->
        try {
            if (count >= startLine) {
                if (line.length() == 0) throw new Exception("error")
                println count + ': ' + line
            }
        } catch (Exception ignore) {
            System.exit(count)
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-28T05:56:00.233

使用返回**0**

```
 read a row
 try{
   //make some verification here
 }catch(Exception e){
    logger("exception on something occurred "+e,e)
    return 0;
 } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-12-16T13:22:57.653

只需使用返回：

```
 read a row
 try{
  //make some verification here
 }catch(Exception e){
   logger("exception on something occurred "+e,e)
   //here need to leave a groovy script prematurely
   return
 } 
```

# jquery - jQuery - 查找第 n 个最后出现的元素

> ID：12384031
> 
> 赞同：1
> 
> 时间：2012-09-12T08:27:43.987
> 
> 标签：jquery, jquery-selectors, css-selectors

我有以下 HTMl 结构，我无法更改。

```
<div class="X">
    <ul>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
        <li><a><img></a></li>
    </ul>
</div> 
```

li 项目的数量各不相同。我想从后面选择第n个元素并修改img src。

这是我到目前为止所拥有的：

```
$('div.X').find('img').css('background-color', 'red'); 
```

我需要一些方法来遍历 .find 的结果，然后以某种方式选择最后一个元素。我在想我应该以某种方式反转列表，这样我就可以使用 nth-child() 选择器。

我发现了各种其他与第 n 个相关的问题，但我无法弄清楚如何解决这个问题。

任何帮助都非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:31:41.120

```
$('div.X img:eq(' + ($('div.X img').length - n) + ')') 
```

你`n`想要多少回来。

注意我`:eq()`没有使用`:nth-child()`- 它们不一样。

注意2：这里可能有一个错误，所以一定要测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:26:59.630

给你... [http://jsfiddle.net/bYaRx/](http://jsfiddle.net/bYaRx/)

我的实施可能有点过火了。我工作很无聊。这是获取正确 img 标签的相关 jQuery：

```
var $img = $('.X img');
$img.filter(':eq('+($img .length - (n+1))+')'); 
```

# javascript - jQuery/JavaScript Online Portfolio form - 打印样式表

> ID：12384034
> 
> 赞同：0
> 
> 时间：2012-09-12T08:27:53.987
> 
> 标签：javascript, jquery, html, css, portfolio

我目前正在编写这段代码，用于收集创建在线投资组合的信息。

这是当前代码：

```
<html>
<head>
<title>Printable Form</title>
<link href="form.css" type="text/css" rel="stylesheet"> 
<meta http-equiv="content-type" content="text/html;charset=utf-8">
<script type="text/javascript" src="jquery-1.8.1.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $('#printbutton').click(function(){
  var contents = 'Name: ' + $("#Name").val()+'<br>';
  contents += 'Surname: ' + $("#Surname").val()+'<br>';
  contents += 'Email: ' + $("#Email").val()+'<br>'; 
  contents += 'Student ID: ' + $("#Student ID").val()+'<br>';
  contents += 'Campus: ' + $("#Campus").val()+'<br>';
  contents += 'Message: ' + $("#Message").val()+'<br>';
  var frame = $('#printframe')[0].contentWindow.document;
  // show the modal div
  //$('#modal').css({'display':'block'});
  frame.open();
  frame.write(contents);
  frame.close();
  $('#printframe')[0].contentWindow.print();
  });
});
</script>
</head>
<body>
<div id="page-wrap">
  <h1>Volunteering Portfolio</h1>
  <p>Please fill in the form below in all its parts</p>
  <div id="contact-area">
  <form method="post" action="">
   <label for="Name">Name:</label>
   <input type="text" name="Name" id="Name">
   <label for="Surname">Surname:</label>
   <input type="text" name="Surname" id="Surname">
   <label for="Student ID">Student ID:</label>
   <input type="text" name="Student ID" id="Student ID">
   <label for="Campus">Campus:</label>
   <input type"text" name="Campus" id="Campus">
   <label for="Email">Email:</label>
   <input type="text" name="Email" id="Email">
   <label for="Message">Message:</label><br>
   <div> id="Activity Record">
   <textarea name="Message" rows="20" cols="20" id="Message"></textarea>

   <div id="Activity Record">
  </form>
   <form method="post" action="">
   <label for="Start Date">Start Date:</label>
   <input type="text" name="Start Date" id="Start Date">
    <input type="button" name="printbutton" id="printbutton" value="Print" class="submit-button">
   </form>
  <div id="modal">
   <iframe id="printframe"> 
   <link type="text/css" rel="stylesheet" href="form.css">
   </iframe> 
  </div>
  </div>
</div>
</body>
</html> 
```

基本上，当表格/投资组合完全填写时，我希望此代码执行的操作是在屏幕上打印所有信息，包括背景图像等，而不是以下图像：

实际的投资组合当前在浏览器窗口中看起来像这样：

任何建议都会非常感激。我想提醒大家，我是一个刚刚开始使用/学习*jQuery、JavaScript*的开发人员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:46:25.373

要打印元素 html 内容，您可以使用[这篇文章](https://stackoverflow.com/questions/2255291/print-the-contents-of-a-div)

```
function PrintElem(elem)
            {
                Popup($(elem).html());
            }

function Popup(data) 
            {
                var mywindow = window.open('', 'my div', 'height=400,width=600');
                mywindow.document.write('<html><head><title>my div</title>');
                /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
                mywindow.document.write('</head><body >');
                mywindow.document.write(data);
                mywindow.document.write('</body></html>');

                mywindow.print();
                mywindow.close();

                return true;
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:41:09.120

我过去使用过这个 jQuery[插件](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/)，效果很好。[你可以在这里](http://projects.erikzaadi.com/jQueryPlugins/jQuery.printElement/Sample/)
找到一个样本。

# javascript - 带有填充属性的 SVG 矩形出现在包含元素插入框阴影的上方

> ID：12384036
> 
> 赞同：0
> 
> 时间：2012-09-12T08:28:01.127
> 
> 标签：javascript, svg, raphael, css

我的 SVG 有一个包含元素。这个元素有一个插入框阴影。不幸的是，当元素靠近有填充的边时，它们实际上被绘制在盒子阴影之上而不是在它之下。我该如何解决这个问题？

[这是一个显示问题的jsFiddle](http://jsfiddle.net/w6BXs/2/)

HTML：

```
<div id="holder"></div>​ 
```

CSS：

```
#holder {
    box-shadow: 0 0 4px rgba(0, 0, 0, 0.6) inset;
    margin: 10px;
    width: 200px;
    height: 200px;
}​ 
```

Javascript：

```
window.onload = function() {
    var r = Raphael("holder", 200, 200);

    var rect = r.rect(140, 140, 150, 150);  
    rect.attr({fill:"#fff"});    
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T04:51:12.190

如果你有一个图像而不是一个 SVG，你会遇到同样的问题。幸运的是，图像的解决方法是众所周知的：在覆盖 div 的伪元素上应用框阴影，例如：

```
#holder {
    margin: 10px;
    width: 200px;
    height: 200px;
    position: relative;
}

#holder:after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: 0 0 14px rgba(0, 0, 0, 0.6) inset;
}
​ 
```

[http://jsfiddle.net/VxxwJ/](http://jsfiddle.net/VxxwJ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:21:31.887

在有阴影的 div 中创建另一个 div 怎么样？像

```
<div id="holder"><div id="inner"></div></div>​​

#holder {
    box-shadow: 0 0 14px rgba(0, 0, 0, 0.6) inset;
    margin: 10px;
    width: 200px;
    height: 200px;
}

#inner {
    position:relative;
    top:10px;
    left:10px;
    width: 180px;
    height: 180px;
}

window.onload = function() {
    var r = Raphael("inner");
    var rect = r.rect(140, 140, 70, 70).attr({fill:"#fce"});    
}; 
```

结果是[这样](http://jsfiddle.net/w6BXs/31/)的。

# javascript - Selenium WebDriver 和 JavaScript 的变化

> ID：12384040
> 
> 赞同：0
> 
> 时间：2012-09-12T08:28:14.290
> 
> 标签：javascript, webdriver

我到底是如何得到这个 Javascript 方法的

```
$('#principal_uid').change(function() {
if($(this).val().length > 0){
 window.location.href = "/switch.html" + "?uid=" + $(this).val();
  } else {
  window.location.href = "/index.html"; 
```

要使用我的 Selenium WebDdriver 测试，我尝试在哪里更改字段的值？问题是该字段有一个默认值，但 Selenium clear() 方法没有清除它，尽管测试通过了。

我尝试了一些东西

```
 WebElement field =driver.findElement(By.id("principal_uid"));
 JavascriptExecutor js = (JavascriptExecutor) driver;
 js.executeScript("$('#principal_uid').change");
 field.clear();

field.sendKeys("newValue"+Keys.RETURN); //CHRASHED THE TEST WITH ERROR COMMUNICATING REMOTE SERVER ERROR 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:59:51.993

尝试这样的事情：

```
js.executeScript("$('#principal_uid').val('%s')".format("newValue")); 
```

这应该会触发“onchange”事件并将您重定向到代码中描述的页面。

如果事件没有被触发（虽然它应该被触发），你可以添加：

```
js.executeScript("$('#principal_uid').trigger('change')") 
```

# c++ - LLVM IR 是否包含内置函数的代码

> ID：12384046
> 
> 赞同：2
> 
> 时间：2012-09-12T08:28:32.587
> 
> 标签：c++, c, llvm, built-in

对于诸如许多数学函数之类的内置函数`llvm.memset`，`llvm.memcpy`例如，LLVM IR 是否在某处包含定义？或者它们只是被调用而不是在 LLVM IR 中定义？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:35:38.090

这些函数在通常由您的操作系统提供的 libc 中定义。调用可以由 LLVM 生成（例如进行结构分配时的 memcpy）。

定义了一些数学函数（abs）。还有一堆胶水数学（float-int转换），由llvm调用，但在libcompiler_rt（它是libgcc的替代品）中定义。

其他内置函数在 llvm 中定义，例如 __builtin_clz()。

# java - Java中的流程/工作流

> ID：12384048
> 
> 赞同：5
> 
> 时间：2012-09-12T08:28:43.537
> 
> 标签：java

我有一个需要承担的特定项目，在我迈出第一步之前，我希望得到大师的一些指导。

我们有许多应用程序从某些外部源（即文件、XML-RPC、Web 服务等）接收输入，然后以某种方式对其进行处理，对其应用规则，与其他外部系统（可能）通信，访问一个数据库（也许），然后发回一个响应。我们正在维护同一应用程序的不同版本，以满足客户之间的所有细微差异。（是的，是的，我知道。这很糟糕，这就是我想要修复它的原因......）

我正在使用的想法是拥有一个基于组件的架构，其中不同的组件可以通过配置连接在一起，并且信息流通过业务规则进行管理。本质上，必须可以为每个客户提供具有不同配置集的程序副本。我什至梦想有一个基于 GUI 的应用程序，其中一个系统可以以 VB 风格的拖放方式连接在一起。

现在，以上听起来绝对像是以前做过的事情……而且我不想重新发明轮子。问题是上面必须能够处理大量的实时事务，所以我不确定像 BPEL 这样​​的东西是否是正确的选择。

在我去使车轮更圆之前有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:56:12.923

我会为您的应用程序编写一个非常简单的 XML 方言。将元素类型保持在最低限度，并使用`class="my.class.name'`属性在运行时构建正确的类实例。这使得拥有一个具有 3 个实现（例如 和 ）的元素变得 `<source class="my.package.XmlRpc">`很容易`<source class="my.package.LocalFile">`。`<source class="my.package.WebService">`每个元素类型一旦被实例化，就应该读取它的 XML 内容以找到正确配置自身所需的任何附加数据。

有很多好用的XML解析库（我推荐JDom），还有很多工具支持XML查看和编辑。XML 易于记录、使用和包装到 GUI 中。

所以：每个组件都有一个元素类型，它们特定的实现相关的配置被隐藏在元素中。如果你有简单的接线（特定的组件实例只在一个地方使用），你可以摆脱包含。如果您有复杂的布线（您需要在多个地方重用组件实例；例如，您想重用过滤器或计算中间结果），首先定义组件实例，然后根据对这些实例的引用构建布线实例。

我本质上是在提倡像[Ant](http://ant.apache.org)构建文件这样的东西，并尽可能保持简单。

# ios - 在启用 ARC 的 iOS 上使用 OSAtomicCompareAndSwapPtr

> ID：12384050
> 
> 赞同：1
> 
> 时间：2012-09-12T08:28:47.137
> 
> 标签：ios, automatic-ref-counting, compare-and-swap

预自动引用计数，您可以在 Objective-c 中进行适当的指针转换，以允许您使用 bool OSAtomicCompareAndSwapPtr(void* oldValue, void* newValue, void* volatile *theValue); 在处理多线程访问时尝试原子交换指针。

在 ARC 下，这些指针转换无效。ARC for iOS 下是否有等效的原子指针交换？如果这种替代方案仍然可用，我希望避免更昂贵的锁定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:06:48.547

如果满足一个条件，或者如果您愿意玩游戏，您也许可以轻松使用它。

创建一个新文件，在构建阶段将其标记为不使用 ARC，并将此交换放入一个小的 C 函数中。在函数的顶部获取对象的 retainCounts，如果它们相等（并且您有理由相信它们不在自动释放池中），您可以交换它们，因为 ARC 将确保对每个对象进行正确的释放。

如果它们不相等，那么您可以通过更改保留计数来玩游戏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T20:29:45.340

**免责声明：**此答案中的代码未经测试！

首先我想提一下，大多数指针的使用并不真正需要比较和交换。C 指针读取和写入本身是原子的。有关更多详细信息，请参阅[此 SO 答案](https://stackoverflow.com/a/5002256/213376)。ARM 也是如此。因此，如果您实现原子 getter 和 setter，您只需要一个内存屏障来保证其他线程看到完全初始化的对象：

```
NSObject * global;
NSObject * get() { return global; }
void set(NSObject * value) { OSMemoryBarrier(); global = value; } 
```

现在回到这个问题，因为谁知道呢，也许比较和交换对象有真正的用途。演员表仍然是可能的，你现在只需以不同的方式声明它们：

```
NSString * a = @"A";
NSObject * b = @"B";
OSAtomicCompareAndSwapPtrBarrier(
    (__bridge void *)a,
    (__bridge void *)b,
    (__bridge void * *)&a); 
```

然而这段代码有一个问题：字符串`@"A"`丢失了一个引用，`@"B"`并被引用了两次，而 ARC 不知道。因此`@"A"`会泄漏，并且程序在离开范围时很可能会崩溃，因为`@"B"`将被释放两次而只有`1`.

我认为唯一的选择是使用 Core Foundation 对象。您可以使用 NSObject 与 CFType 桥接免费电话这一事实。我找不到任何明确的文件，但它来自常识和实际证据。因此，例如可以实现单例：

```
CFTypeRef instance;
Thingamabob * getInstance() {
  if (!instance) {
    CFTypeRef t = (__bridge_retained CFTypeRef)[Thingamabob new];
    if (!OSAtomicCompareAndSwapPtrBarrier(NULL, t, &instance)) {
      CFRelease(t);
    }
  }
  return (__bridge Thingamabob *)instance;
} 
```

# javascript - 用我的 json 数据填充 JQuery DataTable

> ID：12384053
> 
> 赞同：1
> 
> 时间：2012-09-12T08:28:55.163
> 
> 标签：javascript, jquery, json

建议我使用 JQuery 数据表。现在我需要用从我的控制器发送的一堆 json 对象填充网格。如何从 js 在网格上发送这些数据

```
$.ajax({
            ...
            url: '/Home/ReturnJsonData',
            success: function (result) {
                $.each(result, function (i, item) {
                    // this is where I should sent item object to my grid
                });
            },

            error: function () { alert("error"); }
        }); 
```

**更新** 我找到了这些[链接](http://datatables.net/release-datatables/examples/data_sources/ajax.html)，但我不知道如何实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:36:04.503

在这种情况下，您可以使用**Jquery Grid Plugin**。

阅读本文以使用 MVC 数据网格：使用 jqGrid 和 JSON

[http://blog.davidrenz.com/?p=663](http://blog.davidrenz.com/?p=663)

**更新：**

在这种情况下，如果您只想使用 J-query Datatable，请转到此链接。

[http://www.codeproject.com/Articles/155422/jQuery-DataTables-and-ASP-NET-MVC-Integration-Part](http://www.codeproject.com/Articles/155422/jQuery-DataTables-and-ASP-NET-MVC-Integration-Part)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:04:30.530

您应该使用 JQuery DataTable sAjaxSource 属性来指定 ajaxsource 在您的情况下它将是 /HomeReturnJsonData

一个例子如下

```
$(document).ready(function () {

 $('#myDataTable').dataTable({
    "bServerSide": true,
    "sAjaxSource": "Home/ReturnJsonData",
    "bProcessing": true,
    "aoColumns": [
                    { "sName": "ID",
                        "bSearchable": false,
                        "bSortable": false,
                        "fnRender": function (oObj) {
                            return '<a href=\"Details/' + 
                            oObj.aData[0] + '\">View</a>';
                        }
                    },
                    { "sName": "COMPANY_NAME" },
                    { "sName": "ADDRESS" },
                    { "sName": "TOWN" }
                ]
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T21:40:13.473

我把它放在一个函数中，因为这对我来说是最简单的方法，请随意复制该函数并使用它。您需要更改的只是 url 和列名以及其中的编号。要调用它，只需复制带有路径的 html，以便它们与您的路径匹配。

```
function SetUpGrid(tableID, pagerID, data) {
    $("#" + tableID).jqGrid({
        url: '/pagename/stuff?data=' + data,
        datatype: 'json',
        mtype: 'GET',
        colNames: ['col name1', 'col name2', ... 'col nameN'],
        colModel: [
      { name: 'colName1', index: 'colName1', align: "center", sortable: true, editable: false, resizable: false },
      { name: 'colName2', index: 'colName2', align: "center", sortable: true, editable: false, resizable: false },
      ...
      { name: 'colNameN', index: 'colNameN', align: "center", sortable: true, editable: false, resizable: false }
    ],
    pager: '#' + pagerID,
    autowidth: true,
    viewrecords: true,
    rowNum: 15,
    pgbuttons: true,
    pginput: false,
    pgtext: "Page {0} of {1}",
    recordtext: "Data {0} - {1} of {2}",
    emptyrecords: "No data to display",
    loadui: true,
    rowList: [15, 30, 60],
    scrollrows: true,
    hidegrid: true,
    sortorder: "desc",
    beforeRequest: function () { // This just inserts a loading image, you don't need it but I was loading a lot of data and wanted the user to know something was happening.
        $("#" + tableID).empty().append('<tr><td><img src="/Content/imgs/loading.gif" /></td></tr>');
    },
    loadComplete: function (data) {
        /*
        Called when the json load is done, this is a way to insert the data the way I want to.
        Feel free to use whatever you want like links or <p>s or <div>s or whatever.
        */
        if (data.length > 1) {
            for (var key in data) {
                if (data.hasOwnProperty(key)) {
                    $("#" + tableID).empty().append("<tr><td>" + data[key].colName1 + "</td><td>" + data[key].colName12+ "</td> ... <td>" + data[key].colNameN + "</td></tr>");
                }
            }
        } else {
            $("#" + tableID).empty().append("<tr><td>" + this.colName1 + "</td><td>" + this.colName2 + "</td> ... <td>" + this.colNameN + "</td></tr>");
        }
    },
    loadError: function (xhr, status, error) {
        // Called when an error occurs, handle as you wish, if you even do.
        alert(xhr);
        alert(status);
        alert(error);
    }
});
$("#" + tableID).jqGrid("navGrid", "#" + pagerID, { add: false, edit: false, refresh: false, del: false, search: false }).trigger("reloadGrid", [{ page: 1 }]);
}

<script src="/Scripts/jquery-1.7.2.js"></script>
<script src="/Scripts/jquery-ui-1.8.23.min.js"></script>
<script src="/Scripts/jquery.jqGrid.min.js"></script>
<script src="/Scripts/grid.locale-en.js"></script>
<script src="/Scripts/ADTFunding.js"></script>
<link href="/Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
<link href="/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">
    $(function () {
        SetUpFundingGrid('dataTable', 'pager', '9895998');
    });
</script>
<table id="dataTable"></table>
<div id="pager"></div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-09T06:22:35.190

您还可以使用该`fnAddData`属性将 json 推送到表中。检查这篇文章[https://jqueryajaxphp.com/jquery-datatable-using-json/](https://jqueryajaxphp.com/jquery-datatable-using-json/)

# python - 从 urllib2 中第一个站点的 onload 目标 url 获取 html 内容

> ID：12384056
> 
> 赞同：0
> 
> 时间：2012-09-12T08:29:04.647
> 
> 标签：python, urllib2

我正在尝试使用 urllib2 获取网站的 HTML 内容。该站点有一个正文**onload 事件**，该事件在此站点上提交表单，因此它会转到目标站点并呈现我需要的详细信息。

响应 = urllib2.urlopen('www.xyz.com?var=999-999')

> www.xyz.com 包含一个发布到“www.abc.com”的表单，此操作值根据 url 'var=999-999' 中的内容而有所不同，这意味着如果 var 值更改为 '，操作值将更改888-888'

response.read()

> 这仍然给了我 "www.xyz.com" 的 html 内容，但我想要得到的操作 url。从最终页面获取 html 内容的任何建议？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:45:13.353

你必须弄清楚对第二页的调用，包括发送的参数，这样你就可以从你的 python 代码中自己调用，最好的方法是在打开谷歌浏览器页面检查器的情况下导航第一页，然后转到 POST 调用的网络选项卡将被捕获​​，您可以看到发送的参数和所有参数。然后从 urllib2 重新创建相同的 POST 调用。

# javascript - 防止默认锚行为AngularJS

> ID：12384058
> 
> 赞同：25
> 
> 时间：2012-09-12T08:29:25.003
> 
> 标签：javascript, angularjs

当用户单击链接时，我想在控制器内的函数中执行一些代码。但我想防止 URL 发生变化。

**我尝试了以下可能性**

1.  删除了 href 属性。*没用，还是把 url 改成 '/'*

2.  `ng-click='deleteUser(user.id, $event)'`在我的`$event.preventDefault()`deleteUser() 函数中尝试过。*没用。*

3.  起作用的是我在 GitHub 上发现的关于 unintended [reload](https://github.com/angular/angular.js/issues/1225)的 hack 。

这就是我现在的做法：

```
<a ng-click="deleteUser(user.id)" href="javascript:">Delete user</a> 
```

**问题**

防止链接更改 URL 的“干净”方法是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T14:12:29.120

```
<a ng-click="deleteUser(user.id)" href="">Delete user</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-13T11:54:44.780

如果您查看element 指令（它是 Angular 核心的一部分）的[源代码](https://github.com/angular/angular.js/blob/master/src/ng/directive/a.js#L30)，它在第 29 - 31 行声明：`a`

```
if (!element.attr(href)) {
    event.preventDefault();
} 
```

这意味着 Angular 已经在解决没有 href 的链接问题。您仍然存在的唯一问题是css问题。您仍然可以将指针样式应​​用于具有 ng-click 的锚点，例如：

```
a[ng-click] {
    /* Styles for anchors without href but WITH ng-click */
    cursor: pointer;
} 
```

因此，您甚至可以通过使用与执行功能的链接不同的微妙样式来标记真实链接，从而使您的网站更易于访问。

快乐编码！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T14:01:29.023

当您删除 href 属性时，究竟是什么不起作用？这正是你应该做的。参见这个小提琴的例子：http: [//jsfiddle.net/terebentina/SXcQN/](http://jsfiddle.net/terebentina/SXcQN/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-13T22:54:13.613

真正的问题在于[a 指令](https://github.com/angular/angular.js/blob/master/src/ng/directive/a.js)

没错，每个`<a></a>`元素实际上都是一个 AngularJS 指令。

如果您查看代码中的注释，它似乎解决了 IE 的一些问题。

但是当我刚刚从 AngularJS 核心代码中删除指令时，对我来说一切都很好。

我遇到了和你一样的问题，并尝试了所有其他解决方案。不同之处在于我只在 IE 中遇到了问题。

如果您不想从源代码构建 AngularJS 脚本，只需在 angular.js 文件中搜索 htmlAnchorDirective 并将其删除/注释掉。

我相信这里有一个更大的问题，应该在 AngularJS 核心中解决，但我还没有找到它。

**更新**：这个解决方案现在很可能已经过时了！您应该尝试使用最新的 AngularJS 版本。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-18T13:19:20.870

正如@Justus 指出的那样，如果源代码是这样的：

```
if (!element.attr(href)) {
    event.preventDefault();
} 
```

制作`element.attr(href)`为**空字符串** `''`应该让您进入`if`条件，`!''`评估为`true`. 这是@umur的解决方案

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-12T08:56:55.750

我一直在做 deleteUser($event,user.id) 并且它似乎有效。一个可能的问题是变量到您的点击处理程序的顺序。第一个参数可能应该是 $event 对象。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-17T09:52:45.733

我使用我的自定义指令来完成此操作。它的机制是操作 ng-click 指令本身。

```
angular.module('delete', [])
.directive('buttonDelete', ['$parse', function ($parse) {
    var confirmFunc = function (scope, element, attr, event, ngClick) {
        if (! confirm("Are you sure?")) {
            event.preventDefault();
        }
        else {
            // Copy from ngEventDirectives initialization.
            var fn = $parse(ngClick);
            scope.$apply(function() {
                fn(scope, {$event:event});
            });
        }
    };

    return {
        restrict: 'C',
        compile: function (element, attr) {
            var ngClick = attr.ngClick;
            attr.ngClick = '';

            return {
                pre: function (scope, element, attr) {
                    element.click(function (e) {
                        confirmFunc(scope, element, attr, e, ngClick);
                    });
                }
            };
        }
    };
}]); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-12T12:53:17.227

这无疑是一个黑客，但我做到了：

```
<span class="link" ng-click="deleteUser(user.id)">Delete user</span> 
```

在我的CSS中有

```
span.link {
    /* style like a link */
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-13T06:05:17.710

以下对我很有用：

```
<a ng-href="javascript: return false;" ng-click="alertSearchCtrl.deleteAlert()">Remove</a> 
```

# javascript - 从我的控制器返回不同于 200 的代码以触发 ajax 错误是否被认为是一种好习惯？

> ID：12384063
> 
> 赞同：1
> 
> 时间：2012-09-12T08:29:36.667
> 
> 标签：javascript, jquery, ruby, ajax

我有如下代码（它是一个远程表单）

```
def something
  @user = User.find_by_email(params[:email])
  @success = true
  @error = nil
  if !@user
    @success = false
    @error = "No such user"
  elsif !@user.some_condition
    @success = false
    @error = "User did not pass condition"
  end

  respond_to do |format|
    format.json { render "my_json_view",:status => @success ? 200 : 403 }
  end
end 
```

在`my_json_view`我做类似的事情：

```
json.response do |json|
  if @success
    json.success true
    # data I need here
  else
    json.success false
    json.error @error
  end
end 
```

这样，我可以轻松地挂钩`ajax:error`事件，并轻松处理错误情况。我只是想知道这是多么好的练习。是否可以返回不同的 http 代码，以便 jQuery 知道发生了故障？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:31:43.130

当然。这就是错误代码的用途。但请确保您选择了正确的[HTTP 状态代码](http://www.w3.org/Protocols/HTTP/HTRESP.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:33:19.707

这是。您应该始终返回与您的操作中发生的事情相对应的状态代码，并且[状态代码](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)涵盖了许多情况。

# java - Gson - 从 Json 转换为类型化的 ArrayList

> ID：12384064
> 
> 赞同：238
> 
> 时间：2012-09-12T08:29:40.037
> 
> 标签：java, android, json, gson

使用 Gson 库，如何将 JSON 字符串转换为`ArrayList`自定义类`JsonLog`？基本上，`JsonLog`是由我的 Android 应用程序生成的不同类型的日志实现的接口——短信日志、通话日志、数据日志——这`ArrayList`是所有这些日志的集合。我在第 6 行不断收到错误消息。

```
public static void log(File destination, JsonLog log) {
    Collection<JsonLog> logs = null;
    if (destination.exists()) {
        Gson gson = new Gson();
        BufferedReader br = new BufferedReader(new FileReader(destination));
        logs = gson.fromJson(br, ArrayList<JsonLog>.class); // line 6
        // logs.add(log);
        // serialize "logs" again
    }
} 
```

似乎编译器不明白我指的是 typed `ArrayList`。我该怎么办？

* * *

## 回答 #1

> 赞同：577
> 
> 时间：2012-09-12T08:34:11.570

您可以使用[TypeToken](https://www.javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/reflect/TypeToken.html)将 json 字符串加载到自定义对象中。

```
logs = gson.fromJson(br, new TypeToken<List<JsonLog>>(){}.getType()); 
```

**文档：**

> 表示泛型类型**T**。
> 
> Java 还没有提供表示泛型类型的方法，所以这个类提供了。强制客户端创建此类的子类，即使在运行时也可以检索类型信息。
> 
> 例如，要为 创建类型文字`List<String>`，您可以创建一个空的匿名内部类：
> 
> `TypeToken<List<String>> list = new TypeToken<List<String>>() {};`
> 
> 此语法不能用于创建具有通配符参数的类型文字，例如`Class<?>`or `List<? extends CharSequence>`。

**科特林：**

如果您需要在**Kotlin**中执行此操作，您可以这样做：

```
val myType = object : TypeToken<List<JsonLong>>() {}.type
val logs = gson.fromJson<List<JsonLong>>(br, myType) 
```

或者，您可以查看[此答案](https://stackoverflow.com/a/33381385/20634)以了解各种替代方案。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-02-23T09:14:41.727

您的 JSON 示例是：

```
{
    "status": "ok",
    "comment": "",
    "result": {
    "id": 276,
    "firstName": "mohamed",
    "lastName": "hussien",
    "players": [
            "player 1",
            "player 2",
            "player 3",
            "player 4",
            "player 5"
    ]
} 
```

所以如果你想在 SharedPrefrences 中保存模块的数组列表，那么：

1-将使用此方法将您返回的数组列表转换为 json 格式

```
public static String toJson(Object jsonObject) {
    return new Gson().toJson(jsonObject);
} 
```

2-将其保存在共享首选项中

```
PreferencesUtils.getInstance(context).setString("players", toJson((.....ArrayList you want to convert.....))); 
```

3-随时检索它从这样的共享首选项中获取 JsonString

```
String playersString= PreferencesUtils.getInstance(this).getString("players"); 
```

4-再次将其转换为数组列表

```
public static Object fromJson(String jsonString, Type type) {
    return new Gson().fromJson(jsonString, type);
}

ArrayList<String> playersList= (ArrayList<String>) fromJson(playersString,
                    new TypeToken<ArrayList<String>>() {
                    }.getType()); 
```

如果您想解析对象的 ArrayList，此解决方案也可行希望它通过使用[Gson Library](https://code.google.com/p/google-gson/)对您有所帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-10-28T08:24:24.940

> 科特林

```
data class Player(val name : String, val surname: String)

val json = [
  {
    "name": "name 1",
    "surname": "surname 1"
  },
  {
    "name": "name 2",
    "surname": "surname 2"
  },
  {
    "name": "name 3",
    "surname": "surname 3"
  }
]

val typeToken = object : TypeToken<List<Player>>() {}.type
val playerArray = Gson().fromJson<List<Player>>(json, typeToken) 
```

**或者**

```
val playerArray = Gson().fromJson(json, Array<Player>::class.java) 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2020-03-26T09:49:39.487

为什么没有人编写这种**在 List 中转换 JSON 字符串的简单方法**？

```
List<Object> list = Arrays.asList(new GsonBuilder().create().fromJson(jsonString, Object[].class)); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-12-12T12:59:19.357

如果你想使用数组，这很简单。

```
logs = gson.fromJson(br, JsonLog[].class); // line 6 
```

提供`JsonLog`作为数组`JsonLog[].class`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-11-25T23:08:11.797

如果要将 Json 转换为类型化的 ArrayList ，则指定列表中包含的对象的类型是错误的。正确的语法如下：

```
 Gson gson = new Gson(); 
 List<MyClass> myList = gson.fromJson(inputString, ArrayList.class); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-13T05:29:12.050

你有一个这样的**字符串**。

```
"[{"id":2550,"cityName":"Langkawi","hotelName":"favehotel Cenang Beach - Langkawi","hotelId":"H1266070"},
{"id":2551,"cityName":"Kuala Lumpur","hotelName":"Metro Hotel Bukit Bintang","hotelId":"H835758"}]" 
```

然后你可以通过Gson**将它转换为****ArrayList**

 **```
var hotels = Gson().fromJson(historyItem.hotels, Array<HotelInfo>::class.java).toList() 
```

您的**HotelInfo**类应该是这样的。

```
import com.squareup.moshi.Json

data class HotelInfo(

    @Json(name="cityName")
    val cityName: String? = null,

    @Json(name="id")
    val id: Int? = null,

    @Json(name="hotelId")
    val hotelId: String? = null,

    @Json(name="hotelName")
    val hotelName: String? = null
) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-11-20T03:28:26.367

我不确定 gson 但这就是你使用 Jon.sample 的方式希望使用 gson 必须有类似的方式

{“玩家”：[“玩家 1”、“玩家 2”、“玩家 3”、“玩家 4”、“玩家 5”] }

================================================

```
import java.io.FileReader;
import java.util.List;

import org.json.simple.JSONObject;
import org.json.simple.parser.JSONParser;

public class JosnFileDemo {

    public static void main(String[] args) throws Exception
    {
        String jsonfile ="fileloaction/fileName.json";

                FileReader reader = null;
                JSONObject jsb = null;
                try {
                    reader = new FileReader(jsonfile);
                    JSONParser jsonParser = new JSONParser();
                     jsb = (JSONObject) jsonParser.parse(reader);
                } catch (Exception e) {
                    throw new Exception(e);
                } finally {
                    if (reader != null)
                        reader.close();
                }
                List<String> Players=(List<String>) jsb.get("Players");
                for (String player : Players) {
                    System.out.println(player);
                }           
    }
} 
```**

# r - 如何强制列表对象键入'double'

> ID：12384071
> 
> 赞同：88
> 
> 时间：2012-09-12T08:29:59.643
> 
> 标签：r

编码：

```
a <- structure(list(`X$Days` = c("10", "38", "66", "101", "129", "185", "283", 
                                 "374")), .Names = "X$Days") 
```

然后`a`就像

```
$`X$Days`
[1] "10"  "38"  "66"  "101" "129" "185" "283" "374" 
```

我想强制`a`转换为数值数组，但强制函数返回我

```
Error: (list) object cannot be coerced to type 'double' 
```

谢谢，

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2012-09-12T08:39:45.157

如果要将 的所有元素转换`a`为单个数字*向量*并且`length(a)`大于 1（好的，即使它的长度为 1），您可以`unlist`先转换对象，然后再转换。

```
as.numeric(unlist(a))
# [1]  10  38  66 101 129 185 283 374 
```

请记住，这里没有任何质量控制。还有`X$Days`一个很奇怪的名字。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-12T08:41:36.590

如果您的列表作为多个元素需要转换为数字，您可以使用`lapply(a, as.numeric)`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-05-22T17:44:59.343

您还可以使用列表子集来选择要转换的元素。如果您的列表包含 1 个以上的元素，这将很有用。

`as.numeric(a[[1]])`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-01T13:10:17.093

在这种情况下，循环也可以完成这项工作（并且通常足够快）。

```
a <- array(0, dim=dim(X))
for (i in 1:ncol(X)) {a[,i] <- X[,i]} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-27T20:12:40.187

部分数据有问题。考虑：

```
as.double(as.character("2.e")) # This results in 2 
```

另一种解决方案：

```
get_numbers <- function(X) {
    X[toupper(X) != tolower(X)] <- NA
    return(as.double(as.character(X)))
} 
```

# wpf - 使用 mvvm 在 wpf 中应用内阴影效果后，无法在文本框中输入值

> ID：12384072
> 
> 赞同：1
> 
> 时间：2012-09-12T08:30:04.630
> 
> 标签：wpf, mvvm

在我的示例 WPF-MVVM 应用程序中，我有一个文本框，并且我应用了一些像这样的内部阴影效果

```
<Style TargetType="{x:Type TextBox}" x:Key="TxtBoxStyle">     
        <Setter Property="Margin" Value="2,4" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <Grid x:Name="txtgrid">
                        <Border x:Name="txtBorder" CornerRadius="5" Background="LightGray" BorderBrush="DarkGray" 
       BorderThickness="1" ClipToBounds="True">
                            <Border Background="Transparent" BorderBrush="Black" 
          BorderThickness="1" Margin="-2">
                                <Border.Effect>
                                    <DropShadowEffect ShadowDepth="5" BlurRadius="10"/>
                                </Border.Effect>
                            </Border>
                        </Border>
                    </Grid>                        
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

但应用这些效果后，我无法在文本框中输入值。

请让我知道我的代码是否正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:37:58.980

您已替换默认模板，但未在任何地方提供显示内容。您的模板仅包含`Borders`.

如果您查看[默认的 TextBox 模板](http://msdn.microsoft.com/en-us/library/ms752068%28v=vs.85%29.aspx)，您可以看到它定义了一个名为的命名部分，该部分调用`PART_ContentHost`了该内容。尝试将其添加到您的模板中。

```
<ScrollViewer Margin="0" x:Name="PART_ContentHost"/> 
```

# php - 如何使用 kcachegrind 查看 php 函数参数

> ID：12384080
> 
> 赞同：1
> 
> 时间：2012-09-12T08:30:32.377
> 
> 标签：php, kcachegrind

我使用 kcachegrind 查看 xdebug 配置文件。

如何在循环中查看传递给 kcachegrind 中函数或方法的参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:34:33.957

[xdebug](http://xdebug.org/docs/execution_trace)有一个选项可以设置`xdebug.collect_params`以收集参数。我实际上没有尝试过，所以我不知道 kcachegrind 是如何使用这些信息的。

# vb.net - 默认主页不显示

> ID：12384082
> 
> 赞同：0
> 
> 时间：2012-09-12T08:30:43.083
> 
> 标签：vb.net, asp.net-mvc-3, iis

我有一些奇怪的情况......在我的本地主机上，当我调试项目时，所有页面都是可见的，并且第一页（默认页面）在启动时可见。

当我发布项目并将其移动到服务器时，所有页面都可以访问和可见，除了默认（主页/索引）。

我的 global.asax 没问题，没有报告任何错误，但是当网站打开时，只有空白页面可见。

这可能与IIS有关吗？由于它已正常配置，并且我们已经应用了该修补程序来显示没有扩展名的页面（但在此之前它不起作用，但是）。

# internet-explorer - GoogleMaps v3 - 某些地图在 Internet Explorer 中不显示，在其他浏览器中显示

> ID：12384084
> 
> 赞同：0
> 
> 时间：2012-09-12T08:30:46.430
> 
> 标签：internet-explorer, google-maps-api-3

我有一个包含三个 GoogleMaps 实例的站点

*   [http://www.meet4rides.com/races-map.php](http://www.meet4rides.com/races-map.php)
*   [http://www.meet4rides.com/submit-a-race.php](http://www.meet4rides.com/submit-a-race.php)

和（很多页面，都使用相同的 PHP 代码）：

*   [http://www.meet4rides.com/races/south-africa/sswc-single-speed-world-championships-2012/cross-country-xc/2012-09-29/61/](http://www.meet4rides.com/races/south-africa/sswc-single-speed-world-championships-2012/cross-country-xc/2012-09-29/61/)

前两个链接在 IE、Safari、Chrome 和 Firefox 上正确显示 GoogleMaps。最后一个不显示 GoogleMap。不确定有什么不同或错误？

作为补充信息 - 我只能在 IE8 上进行测试 - 不确定它是否适用于/不适用于其他版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:39:21.297

删除 Facebook 插件。这就是导致崩溃的原因。在任何情况下，它都在`<head>`文档的部分之外。

```
 ...
</head>

<script src="http://connect.facebook.net/en_US/all.js#xfbml=1">
</script>

<body>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-31T01:28:47.220

请注意，在浏览器控制台中记录内容可能会破坏 IE11 上 GM 的启动！

# buildbot - 为多个构建者发送一封电子邮件

> ID：12384085
> 
> 赞同：3
> 
> 时间：2012-09-12T08:30:48.297
> 
> 标签：buildbot

我正在建立一个具有独特主构建机器人和多个构建从属的构建环境。我有多个构建器，它们将在可用的从服务器上运行。构建器可以被强制触发或计划作为夜间构建运行，或者可以计划在检测到某些更改时运行。

我已经设置了一个 MailNotifier 来发送构建的结果/状态。此 MailNotifier 将为每个构建器发送一封电子邮件。我现在要做的是为多个构建器发送**一封**电子邮件。例如，成功构建后的所有夜间构建器，在主构建机器人中触发一些功能，该功能将触发构建机器人发送**一封**电子邮件，其中包含所有夜间构建器的结果。

我想知道这样的事情是否可行，以及 buildbot 是否支持为多个构建者发送一封电子邮件。如果没有任何指针如何做到这一点？

提前致谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-09T23:00:15.020

您正在寻找`buildSetSummary`参数 to `MailNotifier`：如果您将此参数设置为`True`，它将发送一封电子邮件，列出所有已完成构建的状态。

更多信息：[Buildbot 手册](http://docs.buildbot.net/current/manual/cfg-statustargets.html#mailnotifier-arguments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T10:17:51.793

自从您问这个问题已经有一段时间了，但以防万一您仍然需要答案，请查看 buildbot 的[MailNotifier](http://buildbot.net/buildbot/docs/0.8.7p1/full.html#mailnotifier-arguments)的设置。默认行为是为每个构建器发送一封电子邮件，因此您必须使用`builders`参数指定您感兴趣的那些（向下滚动页面）：

> `builders`（字符串列表）。应为其发送邮件的构建器名称列表。默认为无（为所有构建发送邮件）。使用构建器或类别，但不能同时使用。

希望这就是你要找的！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-10T20:33:38.530

使用 builderNames 中的所有构建器创建一个 TriggerableScheduler。然后，通过以下 2 个步骤创建一个“超级”构建器：

1.  使用 waitForFinish=True 触发新的 TriggerableScheduler
2.  发送电子邮件

# javascript - Backbone - 将 2 个集合合并在一起？

> ID：12384088
> 
> 赞同：27
> 
> 时间：2012-09-12T08:30:56.410
> 
> 标签：javascript, backbone.js

假设有 2 个 Collections，分别代表`/api/page/1`和`/api/page/2`；无论如何（例如通过下划线）将这两个集合合并到一个新的单一集合中？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-09-12T09:36:56.790

**选项1**

如果您还没有获取集合，您可以获取第一个集合，然后使用 {add : true} 标志获取第二个集合，第二个将合并到第一个：

```
collection.fetch({data : {page : 2});
=> [{id: 1, article : "..."}, {id: 2, article : "..."}];
collection.fetch({data : {page : 2}, add : true });
=> [{id: 1, article : "..."}, {id: 2, article : "..."}, {id: 3, article : "..."}]; 
```

**选项 2**

如果您已经获取了集合并将它们存储在两个变量中，则可以将第二个集合的所有内容添加到第一个集合中：

```
collection1.add(collection2.toJSON()); 
```

此选项的缺点是，当第二个集合添加到第一个集合时，第一个集合将触发“add”事件。如果这有副作用，例如由于此事件而重新呈现的不想要的 UI，您可以通过添加 {silent : true} 标志来抑制它

```
collection1.add(collection2.toJSON(), {silent : true}); 
```

**选项 3**

如果您只需要这些集合的 JSON 格式，即用于 HTML 模板渲染目的，您可以将所有内容简化为 JS 文字（数组、对象）：

```
collection1.toJSON().concat(collection2.toJSON());
=> [{id: 1, article : "..."}, {id: 2, article : "..."}, ...]; 
```

**选项 4 = 选项 2 + 3**

如果您已经获取了这两个集合，您可以简化为 JS 文字并将所有内容添加到新的 Backbone 集合中

```
var rawCollection = collection1.toJSON().concat(collection2.toJSON());
var newCollection = new Backbone.Collection(rawCollection); 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-15T06:20:36.687

试试这个，集合是模型数组

```
collection1.add(collection2.models); 
```

如果我们使用

```
 collection1.add(collection2.toJSON()); 
```

然后参考 chage

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-12T09:32:54.123

```
collection.add(models, [options]) 
```

集合是模型数组

```
collection.models 
```

返回模型数组

将模型（或模型数组）添加到集合中。

```
A = Backbone.Collection;
collection1 = new A([
    {key, 'value'},                  //model1
    {key : value1}                   //model2 in collection1
]);

B = Backbone.Collection;
collection2 = new B([
    {key1, 'value'},                 //model1
    {key1 : value1}                  //model2 in collection2
]);

collection1.add(collection2.models);  //now, collection1 has four models.. 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-12T10:55:29.263

采用

```
collection.models 
```

安装的

```
collection.toJSON() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T08:40:48.070

在我看来，这样做会失去与`/api/page/{1, 2}/`.

在我看来，无论是主干还是下划线，都没有为您提供完全符合您想要做的功能/方法。

所以你的选择：

*   创建一个新集合，添加以前集合中的每个项目；
*   将第一个集合项添加到第二个集合项

但您可能已经知道这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T09:45:25.523

Collection.models 提供对 moels 数组的直接访问，而 Collection.add 会将模型数组作为参数。

# knockout.js - knockout.js 更改 hasfocus 值不会更新绑定值

> ID：12384096
> 
> 赞同：2
> 
> 时间：2012-09-12T08:31:16.557
> 
> 标签：knockout.js

我有[http://jsfiddle.net/ksCSn/1/](http://jsfiddle.net/ksCSn/1/)

### HTML

```
<input type="text" data-bind="                                                                             
value: title,
hasfocus: edit,
onEnter: stopEdit" />

<p data-bind="text: title"></p> 
```

### JS

```
ko.bindingHandlers.onEnter = {
    init: function(element, valueAccessor, _, viewModel) {
        ko.utils.registerEventHandler(element, 'keydown', function(evt) {
            if (evt.keyCode === 13)
                valueAccessor().call(viewModel);
        });
    }
}

function ViewModel() {
    this.title = ko.observable("default value");
    this.edit = ko.observable(false);
    this.stopEdit = function() {
        this.edit(false);

        // If the edit update is in a timeout, then it works
        // var edit = this.edit;
        // setTimeout(function() { edit(false); }, 0);
    };
}

ko.applyBindings(new ViewModel()); 
```

为什么在输入字段中编辑时按下 Enter 键，值不更新？

如果我更改编辑更新，使其作为超时排队，那么它就可以工作。这是为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T20:29:13.133

这是因为 Knockout 中的一个“错误”（请参阅[​​ https://github.com/SteveSanderson/knockout/issues/321](https://github.com/SteveSanderson/knockout/issues/321)）导致所有绑定一起更新。当您更改`edit`属性时，它会更新`hasfocus`绑定以模糊该字段，并且由于该错误，它`value`也会更新绑定。因为绑定是按列出的顺序运行的，所以绑定首先更新，这会用视图模型中`value`的值覆盖字段。`title`

解决此问题的一个简单更改是重新排序绑定，以便`hasfocus`首先运行：http: [//jsfiddle.net/mbest/ksCSn/8/](http://jsfiddle.net/mbest/ksCSn/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:46:08.783

ValueAccessor 是一个函数，它将评估为普通属性或 ko.observable，具体取决于您传递给绑定的内容。

在您的示例中，您正在传递 stopEdit 函数，因此：

```
valueAccessor().call(viewModel) 
```

等于

```
viewModel.stopEdit.call(viewModel) 
```

将 viewModel 传递给函数会将范围从 this 重置为您的 viewModel。在您的示例中，这将有效地将您的 viewModel 的编辑属性设置为 false，因此您也可以将其写为

```
viewModel.edit(false); 
```

这里的问题是您正在混淆事件，请参阅 U10 的答案以获得解决此问题的更好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:05:23.633

按回车时你应该使用模糊，我已经调整[**了你的 JS Fiddle**](http://jsfiddle.net/dmitry_zaets/ksCSn/7/)

但是 mb 您应该尝试使用另一个事件来更新值而不是按 enter 来更改值？例如**afterkeydown**：[**Js Fiddle**](http://jsfiddle.net/dmitry_zaets/ksCSn/6/)

另请参阅[KnockoutJS 文档](http://knockoutjs.com/documentation/value-binding.html#parameters)

# oracle - oracle嵌套游标的奇怪行为

> ID：12384100
> 
> 赞同：0
> 
> 时间：2012-09-12T08:31:39.263
> 
> 标签：oracle, cursor

下面是我编写的使用嵌套游标的存储过程。

```
create or replace
PROCEDURE SP_RUN_EMPLOYEE_UPDATES 
(
  IN_DATE IN VARCHAr2
) 
IS

update_sql varchar2(4000); 

employee_id BI_EMPLOYEE_UPDATE.employee_id%TYPE;   

effective_date date ; 
created_by number;
created_on date;
comments varchar2(4000);

CURSOR 
  employees 
IS
  SELECT distinct(employee_id) FROM BI_EMPLOYEE_UPDATE WHERE EFFECTIVE_DATE = to_date(IN_DATE,'dd-mm-yy') AND EXECUTED = 'N' AND ACTIVITY_ID = '0';

CURSOR 
  e_updates 
IS
  SELECT * FROM BI_EMPLOYEE_UPDATE WHERE EFFECTIVE_DATE = to_date(IN_DATE,'dd-mm-yy') AND EXECUTED = 'N' AND ACTIVITY_ID = '0' and employee_id = employee_id ;

BEGIN

OPEN employees;

    LOOP

      effective_date := '';
      created_by := '';
      created_on := '';
      comments := '';
      employee_id := ''; 

      FETCH employees into employee_id;
      EXIT WHEN employees%NOTFOUND;

        update_sql :=  'UPDATE BI_EMPLOYEE SET ';
        FOR e_update in e_updates
          LOOP

            select comments, effective_date , changed_by, changed_on into  comments, effective_date , created_by, created_on 
            from bi_employee_update where EMPLOYEE_UPDATE_ID = e_update.EMPLOYEE_UPDATE_ID; 

            update_sql := update_sql || e_update.column_name || ' = ''' || e_update.new_value || ''' , ' ; 

            UPDATE BI_EMPLOYEE_UPDATE
            SET 
              EXECUTED = 'Y'
            WHERE 
              EMPLOYEE_UPDATE_ID = e_update.EMPLOYEE_UPDATE_ID ;

          END LOOP;

          update_sql := update_sql || ' comments  = ''' || comments || ''', updated_by  = ''' || created_by  || ''',  updated_on  = ''' || created_on ||  ''',  effective_date = ''' || effective_date  || '''';  
          update_sql := update_sql || ' WHERE emp_id = ' || employee_id ;  

       dbms_output.put_line('KKKK '||update_sql);
        execute immediate update_sql ; 

    END LOOP;
    CLOSE employees;

 END; 
```

问题出在第二个游标中，我将所有先前游标的数据组合在一起。

例如，如果第一次迭代应该返回 a，那么第二次应该返回 b。但在实际的第一次迭代中返回 a，b，第二次也返回 a，b。

下面是生成的动态查询，完全相同。

第一次迭代

预期（正确）：

```
UPDATE BI_EMPLOYEE SET EMPLOYEE_ID = '1111111111111' , PP_NUMBER = '22222222222' ,
    CORPORATE_TITLE_ID = '2' ,  comments  = 'c11', updated_by  = '361',
    updated_on  = '12-SEP-12',  effective_date = '25-SEP-12' WHERE emp_id = 18010 
```

实际（错误）：

```
UPDATE BI_EMPLOYEE SET EMPLOYEE_ID = '1111111111111' , PP_NUMBER = '22222222222' ,
    CORPORATE_TITLE_ID = '2' , LASTNAME = 'Ll22 edited ' , OFFSHORE_ONSHORE = '1' ,
    ONSHORE_REGION = '1' , ONSHORE_DESK_MANAGER = 'henrry ' ,
    comments  = 'cc 33 33', updated_by  = '361',  updated_on  = '12-SEP-12',
    effective_date = '25-SEP-12' WHERE emp_id = 18010 
```

第二次迭代

预期（正确）：

```
UPDATE BI_EMPLOYEE SET LASTNAME = 'Ll22 edited ' , OFFSHORE_ONSHORE = '1' ,
    ONSHORE_REGION = '1' , ONSHORE_DESK_MANAGER = 'henrry ' ,
    comments  = 'cc 33 33', updated_by  = '361',  updated_on  = '12-SEP-12',
    effective_date = '25-SEP-12' WHERE emp_id = 18009 
```

实际（错误）：

```
UPDATE BI_EMPLOYEE SET EMPLOYEE_ID = '1111111111111' , PP_NUMBER = '22222222222' ,
    CORPORATE_TITLE_ID = '2' , LASTNAME = 'Ll22 edited ' ,
    OFFSHORE_ONSHORE = '1' , ONSHORE_REGION = '1' ,
    ONSHORE_DESK_MANAGER = 'henrry ' ,  comments  = 'cc 33 33',
    updated_by  = '361',  updated_on  = '12-SEP-12',
    effective_date = '25-SEP-12'
    WHERE emp_id = 18009 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:22:02.850

[正如对上一个问题](https://stackoverflow.com/q/12370176/266304)的评论中所述，您的第二个光标不限于第一个光标找到的员工，因为您之间没有链接。你在哪里：

```
and employee_id = employee_id 
```

...这两个都引用表格列，因此它根本不充当过滤器。您已经为局部变量提供了相同的名称，这使事情变得非常混乱，但无论如何它超出了范围 - 此游标无法看到过程主体中设置的变量值。

您需要执行以下操作：

```
CREATE OR REPLACE PROCEDURE sp_run_employee_updates (p_date IN DATE) IS
    update_sql varchar2(4000);
    first_update boolean;

    CURSOR c_employees IS
        SELECT DISTINCT employee_id
        FROM bi_employee_update
        WHERE effective_date = p_date
        AND executed = 'N' 
        AND activity_id = '0';

    CURSOR c_updates(cp_employee_id bi_employee_update.employee_id%TYPE) IS
        SELECT *
        FROM bi_employee_update
        WHERE effective_date = p_date
        AND executed = 'N' 
        AND activity_id = '0'
        AND employee_id = cp_employee_id
        FOR UPDATE;

BEGIN
    -- loop around all employees with pending records
    FOR r_employee IN c_employees LOOP
        -- reset the update_sql variable to its base
        update_sql :=  'UPDATE BI_EMPLOYEE SET ';
        -- reset the flag so we only add the comments etc. on the first record
        first_update := true;

        -- loop around all pending records for this employee
        FOR r_update IN c_updates(r_employee.employee_id) LOOP
            -- add the comments etc., only for the first update we see
            if first_update then
                update_sql := update_sql
                    || ' comments = ''' || r_update.comments || ''','
                    || ' updated_by = ''' || r_update.changed_by  || ''','
                    || ' updated_on  = ''' || r_update.changed_on ||  ''','
                    || ' effective_date = ''' || r_update.effective_date  || '''';  
                first_update := false;
            end if;

            -- add the field/value from this record to the variable
            update_sql := update_sql || ', '
                || r_update.column_name || ' = ''' || r_update.new_value || '''' ; 

            -- mark this update as executed
            UPDATE bi_employee_update
            SET executed = 'Y'
            WHERE CURRENT OF c_updates;

        END LOOP;

        -- apply this update to the bi_employee record
        update_sql := update_sql || ' WHERE emp_id = ' || r_employee.employee_id;

        DBMS_OUTPUT.PUT_LINE(update_sql);
        EXECUTE IMMEDIATE update_sql; 
    END LOOP;
END sp_run_employee_updates; 
```

实际上，重要的区别在于第二个游标现在有一个参数，而第一个游标中的员工 ID 作为该参数传递。

此外，`IN_DATE`被声明为日期，因此您不需要通过`TO_DATE()`. 在其他地方（生效日期等）会有隐式日期转换，因为您将它们视为字符串，但只要它们没有时间组件，这可能不会破坏任何内容，因为它应该在内部保持一致步骤。

# mysql - MySQL：删除子查询返回的行

> ID：12384107
> 
> 赞同：0
> 
> 时间：2012-09-12T08:31:53.227
> 
> 标签：mysql, sql, subquery

我需要从表中删除存在重复`link`列的行。我正在尝试运行：

```
delete from resultitem 
       where id in (select r.id 
                    from resultitem r 
                    group by r.link
                    having count(r.id) >1); 
```

但得到一个错误：

```
ERROR 1093 (HY000): You can't specify target table 'resultitem' for update in FROM clause 
```

这是否可以在没有临时表的情况下通过 MySQL 中的子查询删除行？请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T08:40:04.280

这应该删除除最低`id`per之外的所有内容`link`：

```
delete  ri1
from    resultitem as ri1
inner join
        resultitem as ri2
on      ri1.link = ri2.link
        and ri1.id > ri2.id 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!2/2877a/1/0)

要删除所有重复链接，不留下任何重复链接，请删除`and ri1.id > ri2.id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:46:54.113

```
DELETE resultitem
FROM resultitem
LEFT OUTER JOIN (
   SELECT MIN(id) as RowId, link
   FROM resultitem
   GROUP BY link
) as KeepRows ON
   resultitem.id = KeepRows.RowId
WHERE
   KeepRows.RowId IS NULL 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:41:00.033

试试这个...

```
delete r from resultitem r
INNER JOIN (
       (select id 
                    from resultitem rr 
                    group by rr.link
                    having count(rr.id) >1) rr
ON r.id = rr.id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:47:15.020

```
delete from resultitem 
       where id not in (select r.id  
                  from (select r1.id, unique(r1.link) from resultitem r1) as r ); 
```

# php - I am having some issues in understanding PHP variable syntax in a WordPress string

> ID：12384112
> 
> 赞同：0
> 
> 时间：2012-09-12T08:31:59.527
> 
> 标签：php, string, wordpress, variables

I have the following line in some code I am trying to modify to include an image from my theme directory.

```
protected $_branding = 'Site Design by <a href="http://www.mysite.com">MySite</a>.'; 
```

So, what I want is:

```
protected $_branding = 'Site Design by <a href="http://www.mysite.com"><img src="(((My ThemeFolder)))/images/myimage.png" style="vertical-align:text-bottom;"/>MySite</a>.'; 
```

What is returned seems to output exactly what is inside the parent quotes. So, I am assuming this is some kind of string. So, how do I make it include a PHP variable to get my theme folder without having to hard code it?

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:44:12.063

你应该试试：

```
protected $_branding = 'Site Design by <a href="http://www.mysite.com"><img src="'.get_bloginfo('template_directory').'/images/myimage.png" style="vertical-align:text-bottom;"/>MySite</a>.'; 
```

在此处阅读更多信息[http://codex.wordpress.org/Function_Reference/get_bloginfo](http://codex.wordpress.org/Function_Reference/get_bloginfo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:41:19.723

你要`get_template_directory_uri()`

```
protected $_branding = 'Site Design by <a href="http://www.mysite.com"><img src="' . get_template_directory_uri() . '/images/myimage.png" style="vertical-align:text-bottom;"/>MySite</a>.'; 
```

有关文档，请参阅[http://codex.wordpress.org/Function_Reference/get_template_directory_uri](http://codex.wordpress.org/Function_Reference/get_template_directory_uri)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:44:03.027

这里有不同的功能供您参考..

```
get_template_directory(): Returns the absolute template directory path.
get_template_directory_uri(): Returns the template directory URI.
get_stylesheet_directory(): Returns the absolute stylesheet directory path.
get_stylesheet_directory_uri(): Returns the stylesheet directory URI. 
```

对于您的用例尝试：

```
protected $_branding = 'Site Design by <a href="http://www.google.com"><img src="' .    get_template_directory_uri() . '/images/myimage.png" style="vertical-align:text-bottom;"/>MySite</a>.'; 
```

文档：[http ://codex.wordpress.org/Function_Reference/get_template_directory_uri](http://codex.wordpress.org/Function_Reference/get_template_directory_uri)

[还可以通过http://codex.wordpress.org/Function_Reference/](http://codex.wordpress.org/Function_Reference/) {function_name_here}访问其他功能的文档

# jquery - Nested BlockUI elements - Need independence from parent

> ID：12384113
> 
> 赞同：0
> 
> 时间：2012-09-12T08:32:04.317
> 
> 标签：jquery, jquery-blockui

We have implemented BlockUI (element blocking) for a large survey.. On most pages we have a fieldset to be blocked/unblocked based on yes/no answer, and then inside that fieldset paragraph tags that also need to have their own independent block/unblock based on an answer. the problem we are having is when we unblock the fieldset it also affect s the items in the fieldset - but we don't want it to.

SO > Does anyone know how to tell BlockUI not to affect nested item's block/unblock status?

**Example**
Answer to Question 1 unblocks fieldset, Question 2 in fieldset can be completed, question 2a in fieldset only to be unblocked is question 2 answer was 'yes'

**Question 1 - Yes/No** (If yes unblock fieldset)

< fieldset >

**Question 2 - Yes/No** (if yes allow Question 2a, if no Block it)

**Question 2a - textarea** "Provide more detail"

< /fieldset>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:06:42.867

嵌套已由开发人员内置到 BlockUI.js 中。

Github 上的线索：[https ://github.com/malsup/blockui/issues/40#](https://github.com/malsup/blockui/issues/40#)

# python - Sending a .gz file to a socket in python

> ID：12384118
> 
> 赞同：0
> 
> 时间：2012-09-12T08:32:06.843
> 
> 标签：python, http, sockets, binary

I have a file that I make and zip up using the gzip module, the next thing I want to do is send that file into a socket that connects to a web browser. I know I have to change the Http response content-type to application/gzip, but how do I go about actually sending the binary of the gzip so the browser will download it properly?

Here is what I got so far

```
f_out = gzip.open('downloads.gz', 'wb')
f_in = open('file.txt', 'rb')
f_out.writelines(f_in)
f_in.close()
f_out.close()
#This all works
.....
def make_http_response(self, content, html_type='text/html'):
        response_headers = {
            'Content-Type': html_type+'; encoding=utf8',
            'Content-Length': len(content),
            'Connection': 'close',
        }
        response_headers_string = ''.join('%s: %s\n' % (k, v) for k, v in   response_headers.iteritems())
        response_proto = 'HTTP/1.1'
        if(self.error):
            response_status = '404'
            response_status_text = 'Not Found' 
        else:
            response_status = '200'
            response_status_text = 'OK '
        response = '%s %s %s' %(response_proto, response_status, response_status_text)
        response = response + response_headers_string + '\n' + str(content)
        return response 
```

I pass in 'application/gz' for the html_type field

The problem is what content do I pass in I have a download.gz file in that I just created in the same directory how do I go about sending the binary to the make http response function? Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:39:39.307

只需将文件的二进制原始数据放在消息正文中，无需任何修改。

# javascript - 获取标签之间的内容

> ID：12384120
> 
> 赞同：1
> 
> 时间：2012-09-12T08:32:09.363
> 
> 标签：javascript, jquery, html

我有输入`<label><input type="checkbox" name="controls[]" value="1347438434" />50504762b6102</label>`，我需要得到 50504762b6102。

这里完整的输入：

```
<label><input type="checkbox" name="controls[]" value="1347438434" />50504762b6102</label>
<label><input type="checkbox" name="controls[]" value="1347438435" />50504762b61d9</label>
<label><input type="checkbox" name="controls[]" value="1347438436" />50504762b62af</label>
<label><input type="checkbox" name="controls[]" value="1347438437" />50504762b6385</label>
<label><input type="checkbox" name="controls[]" value="1347438436" />50504762b6466</label> 
```

我还有一个`selected_ids`存储选定值的数组，例如*1347438434, 1347438436, 1347438436*。

所以我试图获得如下内容：

```
$.each(selected_cameras_ids, function(key, value){
    console.log($('input[value="'+value+'"]').nextUntil('label'));
}); 
```

但它返回空对象。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:35:33.000

用于`.parent()`获取父标签，然后用于`.text()`获取文本内容。

```
$.each(selected_cameras_ids, function(key, value){
    console.log($('input[value="'+value+'"]').parent().text());
}); 
```

***[演示。](http://jsfiddle.net/heD46/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:33:33.303

试试这个（演示：http: [//jsfiddle.net/kjvUh/](http://jsfiddle.net/kjvUh/)）：

```
$.each(selected_cameras_ids, function(key, value){
    console.log($('input[value="'+value+'"]').parent().text());
}); 
```

# php - Live select/show/reload data from MySQL db when delete

> ID：12384121
> 
> 赞同：3
> 
> 时间：2012-09-12T08:32:08.757
> 
> 标签：php, jquery, mysql

I have three pages :

1)index.php (get results from select.php and put them into div#result )

2)select.php (loops into MySQL's table)

3)delete.php (gets user_id as a parameter and deletes it from MySQL's table).

My goal is : After user clicks on delete! to show updated results (after changes/deletes)

from MySQL's table

my problem is I could not know how to tell jQuery: listen process delete.php?id=123 & then

reload select.php while staying in index.php without redirecting to delete.php

so user actually does not see what happens or does not see that he's being redirected to

another page.

index.php

```
<html>
    <title>a</title>
    <head>
        <script type="text/javascript" src="jquery-1.8.0.js"></script>
        <script type="text/javascript">
            $(function() {
                $('#result').load('select.php');
            });
        </script>
    </head>
    <body>
        <div id="result"></div>
    </body>
</html> 
```

select.php

```
<?php
    $con = mysql_connect("localhost","root","123");
    if (!$con) { die('Could not connect: '); }
    mysql_select_db("test", $con);

    $result = mysql_query("select * from users");   

    while($rs3 = mysql_fetch_array($result)) {
        echo $rs3["user_email"]." ".$rs3["user_name"]." ";
        echo "<a href=delete.php?id=".$rs3[user_id].">Delete</a>";
        echo "<br />";
    }
?> 
```

delete.php

```
<?php
    $con = mysql_connect("localhost","root","123");
    if (!$con) { die('Could not connect: '); }
    mysql_select_db("test", $con);

    $id = mysql_escape_string($_GET["id"]);
    $delete = "delete from users where user_id='{$id}'";
    @mysql_query($delete);
?> 
```

thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:08:54.163

创建的不是链接，而是用于删除的 AJAX 查询。让 JQuery 调用链接。例如：

```
<script type="text/javascript">
$(function() {

    function refreshContent(){
        $('#result').load('select.php');    
    }

    $('#result').on('click','a',function(event){
        // prevent going by link `href`
        event.preventDefault();

        // get deleting row id
        var ids = $(this).data('ids');

        // make AJAX call for delete
        $.get("delete.php", { id: ids},function(data){
            // on success - refresh tcontent
            refreshContent();
        });

        return false;
    });

    // making content load on start
    $(document).ready(function(){
        refreshContent();
    });

});
</script> 
```

你也必须添加`ids`。`<a>`在这一行：

```
echo "<a href='delete.php?id=".$rs3[user_id]."' data-ids='".$rs3[user_id]."'>Delete</a>"; 
```

# preferences - Why APT Preferences doesn't work as expect

> ID：12384124
> 
> 赞同：2
> 
> 时间：2012-09-12T08:32:30.603
> 
> 标签：preferences, apt

I want to install puppet which version higher than 2.7.11 on Ubuntu, but the origin source version is 2.7.11, so I add the puppetlabs's source:

```
echo "deb http://apt.puppetlabs.com precise devel" > /etc/apt/sources.list.d/puppetlabs.list 
```

then I use apt-get and then find the latest version is already 3.0.0 .But I just want to use 2.7.19 .So I edit the /etc/apt/preferences:

```
package:puppet
Pin: release  v=2.7.19*, o= "http://apt.puppetlabs.com/"
Pin-Priority: 1001 
```

then I use apt-cache policy puppet ,but it seems this does not works as I expect:

```
puppet:
Installed: 3.0.0-0.1rc6puppetlabs1
Candidate: 3.0.0-0.1rc6puppetlabs1
Package pin: (not found)
Version table:
*** 3.0.0-0.1rc6puppetlabs1 1001
    500 http://apt.puppetlabs.com/ precise/devel amd64 Packages
    100 /var/lib/dpkg/status
 2.7.19-0.1rc3puppetlabs1 1001
    500 http://apt.puppetlabs.com/ precise/devel amd64 Packages 
```

I have read the man 5 apt_preferences, but still can't make it works right.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T16:51:54.507

[在此处](http://apt.puppetlabs.com/dists/squeeze/Release)阅读文件

表示 Release 文件中的`"o="`Origin。
如果你想使用`http` （作为sources.list中的源）......你应该写：

```
Pin: origin "http..." 
```

查看 man apt_preferences 以获得更多帮助！

# windows-phone-7 - wp7 ObservableCollection 过滤texbox输入并突出显示结果

> ID：12384126
> 
> 赞同：1
> 
> 时间：2012-09-12T08:32:43.303
> 
> 标签：windows-phone-7, filtering, observablecollection

我一直在寻找一种方法来做到这一点。我拥有的是一个文本框，在 textchanged 事件中，我希望它在您键入时过滤并突出显示部分结果，就像您在人员中心搜索时一样。.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:41:11.840

```
public ObservableCollection<Item> SearchResult 
                  { 
               get {return //...} 
               set {//set an raise property changed event}
                 }
private list <Item> _allItems = //populate items list here 
```

在`textChanged`事件处理程序中执行以下操作：

```
 var filteredList = _allItems.Where(item.TextPropetry.Contains(enteredText))
                    .ToList();
 SearchResult = new ObservableCollection<Item>(filteredList); 
```

那是关于过滤的。

突出显示的方式取决于您的 UI 实现。

更新：

```
 Color currentAccentColorHex = 
        (Color)Application.Current.Resources["PhoneAccentColor"]; 
```

[更多关于这里](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769545%28v=vs.92%29.aspx)的颜色。

# iphone - Will @try @catch work for SIGSEGV / SEGV_ACCERR

> ID：12384127
> 
> 赞同：2
> 
> 时间：2012-09-12T08:32:44.637
> 
> 标签：iphone, objective-c, ios, segmentation-fault

I have a crash in a [third party component](https://github.com/jdg/MBProgressHUD/pull/86). It is clear that there is an underlying cause for this which I have to research. But to make this more robust in the meantime I want to surround the crashing call with a `@try @catch`block.

I could not reproduce the crash so far so I can't really tell if the `@try @catch` will work in this case. My question in what type of cases does `@try` and `@catch` generally work.

```
Hardware Model:      iPhone3,1
Process:         MyApp [2084]
Path:            /var/mobile/Applications/8B400A7D-88E7-4319-9C5D-F7E72DE8D960/MyApp.app/MyApp
Identifier:      com.company.MyApp-Snapshot
Version:         7.2
Code Type:       ARM
Parent Process:  launchd [1]

Date/Time:       2012-09-07 14:04:14 +0000
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  SIGSEGV
Exception Codes: SEGV_ACCERR at 0xe1088602
Crashed Thread:  0

Thread 0 Crashed:
0   libobjc.A.dylib    0x35260f78 objc_msgSend + 15
1   UIKit              0x312363d7 -[UIView(Hierarchy) superview] + 50
***************************************************************************                     |<---- UIView *superview = self.superview;
2   MyApp              0x000238f9 -[MBProgressHUD deviceOrientationDidChange:] (MBProgressHUD.m:622)
***************************************************************************
3   Foundation         0x37dc64ff __57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 18
4   CoreFoundation     0x3752d547 ___CFXNotificationPost_block_invoke_0 + 70
5   CoreFoundation     0x374b9097 _CFXNotificationPost + 1406
6   Foundation         0x37d3a3eb -[NSNotificationCenter postNotificationName:object:userInfo:] + 66
7   UIKit              0x3123adeb -[UIDevice setOrientation:animated:] + 214
8   UIKit              0x3123616f -[UIApplication handleEvent:withNewEvent:] + 2718
9   UIKit              0x31235567 -[UIApplication sendEvent:] + 54
10  UIKit              0x31234f3b _UIApplicationHandleEvent + 5826
11  GraphicsServices   0x33c7722b PurpleEventCallback + 882
12  CoreFoundation     0x37535523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
13  CoreFoundation     0x375354c5 __CFRunLoopDoSource1 + 140
14  CoreFoundation     0x37534313 __CFRunLoopRun + 1370
15  CoreFoundation     0x374b74a5 CFRunLoopRunSpecific + 300
16  CoreFoundation     0x374b736d CFRunLoopRunInMode + 104
17  GraphicsServices   0x33c76439 GSEventRunModal + 136
18  UIKit              0x31263cd5 UIApplicationMain + 1080
19  MyApp              0x00003643 main (main.m:16) 
```

**Update**: [Apparently](https://stackoverflow.com/questions/9825832/how-did-i-crash-in-a-try-catch-block) `SIGSEGV` is not an exception that you can catch but caused by accessing memory which is not valid. From my perspective it would still be convenient to be able to catch this sort of exception, although getting the root of the problem was obviously the better approach to fix the problem.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T00:31:33.263

不幸的是，当代码抛出异常时，try-catch 框架会很好，但对“信号”没有帮助。（“SIGSEGV”中的“SIG”表示它是一个信号。）

为了处理信号，您必须为您的应用程序指定一个信号处理程序，该处理程序将在触发信号时由系统调用。

在堆栈以 objc_msgSend 结尾的任何类型的 SIGSEGV 的情况下，您很可能有代码试图调用已释放对象的方法。

在设备上，您可以在启用“NSZombies”的情况下运行以提供帮助。当您尝试向它们发送消息时，这将保留少量对象以引发异常。

堆栈在 objc_msgSend 结束时可能会被奇怪地修改，因此实际问题点可能与您在崩溃日志堆栈中看到的不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:51:18.480

你调查过 NSSetUncaughtExceptionHandler 吗？您还可以使用信号函数将信号（例如 SIGSEGV）映射到处理函数

# xml - Getting node captions using XSLT

> ID：12384134
> 
> 赞同：3
> 
> 时间：2012-09-12T08:33:02.257
> 
> 标签：xml, xslt

I have this XML document:

```
</Items>
<Item>
  <Id>1</Id>
  <Weekday>4</Weekday>
  <WeekdayName>Wednesday</WeekdayName>
  <Hour0>12</Hour0>
  <Hour1>5</Hour1>
  <Hour2>9</Hour2>
</Item>
<Item>
  <Id>1</Id>
  <Weekday>5</Weekday>
  <WeekdayName>Thursday</WeekdayName>
  <Hour0>10</Hour0>
  <Hour1>8</Hour1>
  <Hour2>15</Hour2>
</Item>
</Items> 
```

and I need to convert it into the following XML document using XSLT:

```
<report>
  <categories>
    <category label="Hour1"/>
    <category label="Hour2"/>
    <category label="Hour3"/>
  </categories>
  <dataset day="Wednesday">
   <set value="12"/>
   <set value="5"/>
   <set value="9"/>
  </dataset>
  <dataset day="Thursday">
   <set value="10"/>
   <set value="8"/>
   <set value="15"/>
  </dataset>
</report> 
```

I am able to get node values but not able to get node captions. How can I perform this conversion? I'm new to XSLT.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:01:25.633

我假设您的预期输出文档中的意思不是 Hour0、Hour2 等。

试试这个 XSLT 1.0 样式表...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
<xsl:strip-space elements="*" />

<xsl:template match="@*|node()" />

<xsl:template match="/">
  <report>
    <categories>
      <xsl:apply-templates select="*/Item[1]/*[starts-with(name(),'Hour')]" mode="category" />
    </categories>
    <xsl:apply-templates select="*/Item"/>
  </report>
</xsl:template>

<xsl:template match="Item">
  <dataset day="{WeekdayName}">
    <xsl:apply-templates select="*[starts-with(name(),'Hour')]" mode="set" />  
  </dataset>
</xsl:template>

<xsl:template match="*[starts-with(name(),'Hour')]" mode="category">
  <category label="{name()}" />
</xsl:template>

<xsl:template match="*[starts-with(name(),'Hour')]" mode="set">
  <set value="{.}"/>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:03:23.223

这是另一种选择 - 它相当机械，并假设小时节点的顺序始终相同。肖恩看起来更优雅。

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" indent="yes"/>

    <xsl:template match="/Items">
        <report>
            <categories>
                <xsl:for-each select="Item[1]/*[substring(local-name(), 1, 4)='Hour']">
                    <xsl:element name="category">
                        <xsl:attribute name="label">
                            <xsl:value-of select="local-name()"/>
                        </xsl:attribute>
                    </xsl:element>
                </xsl:for-each>
            </categories>
            <xsl:apply-templates select="Item"/>
        </report>
    </xsl:template>

    <xsl:template match="Item">
        <xsl:element name="dataset">
            <xsl:attribute name="day">
                <xsl:value-of select="WeekdayName"/>
            </xsl:attribute>
            <xsl:for-each select="*[substring(local-name(), 1, 4)='Hour']">
                <xsl:element name="set">
                    <xsl:attribute name="value">
                        <xsl:value-of select="text()"/>
                    </xsl:attribute>
                </xsl:element>
            </xsl:for-each>
        </xsl:element>
    </xsl:template>

</xsl:stylesheet> 
```

# jakarta-ee - Java EE EJB understanding

> ID：12384136
> 
> 赞同：0
> 
> 时间：2012-09-12T08:33:16.823
> 
> 标签：jakarta-ee, annotations, ejb, jdeveloper, session-bean

I am very new to developing enterprise applications using Java EE. I have been using jdeveloper for this. Although I have gone through some books, I am still finding it difficult to understand the practical use and benefit of some modules.

It would be great if you anybody could answer some questions (written below the code) regarding annotations.

```
import javax.annotation.Resource;

import javax.ejb.EJB;
import javax.ejb.SessionContext;
import javax.ejb.Stateless;

import javax.jws.WebMethod;
import javax.jws.WebParam;
import javax.jws.WebService;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;

@Stateless(name = "StudentWSApiBean", mappedName = "RizwanWS-RizwanService-StudentWSApiBean")
@WebService(name = "StudentWSApi", serviceName = "StudentWSApi", portName = "StudentWSApiPort")
public class StudentWSApiBeanBean implements StudentWSApiBean {
    @Resource
    SessionContext sessionContext;

    @EJB
    StudentSession mySession;

    public StudentWSApiBeanBean() 
    {
    }

    @WebMethod
    public StudentResponse saveStudentInfo(@WebParam(name = "arg0")
        StudentRequest rqst)
    {
        StudentResponse resp = new StudentResponse();
        resp.setStat(0);
        try
        {
            int ret = mySession.saveStudentInfo(rqst.getName(), rqst.getAddr(), rqst.getClass_(), rqst.getGrade());        
            resp.setStat(ret);
        }catch(Exception exc)
        {
        }
        return resp;
    }
} 
```

In the above code,

```
@EJB
StudentSession mySession; 
```

Then I use,

```
mySession.saveStudentInfo(rqst.getName(), rqst.getAddr(), rqst.getClass_(), rqst.getGrade()); 
```

i.e. i am using mySession to access a method of StudentSession. Now, what benefit is the `@EJB` annotations doing here is not clear to me.

```
@Resource
SessionContext sessionContext; 
```

I haven't seen the use of sessionContext anywhere in the code except the declaration. And what does the `@Resource` meaning here.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:00:39.317

在 Java EE 5 中，您可以使用 @EJB 之类的注入语句。这简化了开发过程并避免了查找。

在 Java EE 5 之前，如果您想使用 EJB，您必须首先进行查找以获取远程/本地接口，然后使用它。在 Java EE 5 中，您可以简单地声明 @EJB 并且容器将引用注入到您的 EJB 中，您可以直接使用它。

同样的事情是@Resources。

如前所述，有很多解释注射及其好处的书籍和文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:11:01.450

已正确指导您阅读一些 Java EE 教程。

如果您需要一个`@Resources`要搜索的构造名称，您可以键入“Java EE 资源注入”或“Java EE 依赖注入”。没有必要直接回答，因为到处都有大量的阅读。

# iphone - Calculate G-Force,speed and Distance

> ID：12384138
> 
> 赞同：0
> 
> 时间：2012-09-12T08:33:19.557
> 
> 标签：iphone

Can any one guide me to do an app like this [link](http://itunes.apple.com/us/app/porsche-gforce-app-powered/id376645510?mt=8)

i.e How to calculate G-Force,Speed and Distance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:42:43.203

g-force 可以计算为加速度计给出的向量的长度（Core Motion 框架，详见`CMAccelerometerData`）。至于距离和速度，您可以从 GPS/GLONASS（核心位置框架，参见`CLLocation`课程）中获取它们

不要试图从加速度计算距离和速度——这是不可能可靠地做到这一点的。

例如，要计算速度，您必须知道汽车的加速度。给定`Aa`加速度计的测量值，汽车自身的加速度将是汽车坐标`Ac = Aa - Ga`中`Ga`的重力加速度矢量。要知道这个值，可以使用 CoreMotion 服务（如果存在陀螺仪）或应用低通滤波器从加速度计测量中提取重力矢量。

iDevices 中使用的加速度计不是很精确。之后的积分将稳定地累积测量误差。过滤器等是错误的第二个来源。

现在我们可以计算我们的速度：

`V(T[n]) = Ac[n] * dt[n] + V(T[n-1])`

`V(T[n-1])`汽车的先前速度在哪里。要确定第一个值`V(T[0])`（

距离通过相同的过程计算

`S(T[n]) = V(T[n]) * dt[n] + S(T[n-1])`

这意味着已经非常不精确的速度值现在随着时间的推移而集成。开心，开心，开心，开心。顺便说一句，您无需编写所有这些代码即可享受结果 - 只需阅读 OP 提到的应用程序的用户评论。

# java - How do I call an arrays methods from the JSP page in JSTL?

> ID：12384146
> 
> 赞同：0
> 
> 时间：2012-09-12T08:33:48.787
> 
> 标签：java, jsp, servlets, jstl

I stumbled upon servlets and I just love them compared to scriptlets since they perfectly divide logic and view. But I'm having trouble calling instance methods in my JSP page.

I have the following JSP page:

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1" pageEncoding="ISO-8859-1"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
<c:forEach items="${stringarray}">
${stringarray}
<br/>
</c:forEach>
</body>
</html> 
```

And the following Servlet:

```
package controller;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.Cookie;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class Servlet
 */
@WebServlet("/Servlet")
public class Servlet extends HttpServlet 
{

    private static final long serialVersionUID = 1L;

    /**
     * Default constructor. 
     */
    public Servlet() 
    {
        // TODO Auto-generated constructor stub
    }

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {   
        String[] strarray = new String[5];

        strarray[0] = "zero";
        strarray[1] = "one";
        strarray[2] = "two";
        strarray[3] = "three";
        strarray[4] = "four";

        request.setAttribute("stringarray", strarray);
        request.getRequestDispatcher("index.jsp").forward(request, response);
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException 
    {
        // TODO Auto-generated method stub
    }
} 
```

**Why can't I call the arrays methods with the dot separator in my JSP page?!**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:39:07.323

我认为您正在寻找的是以下内容：

```
<c:forEach var="stringElement" items="${stringarray}">
  ${stringElement} 
  <br/>
</c:forEach> 
```

`c:forEach`标签循环遍历 中的每个元素，`${stringarray}`但要访问每个项目，您必须定义一个变量。另请参阅[TLD 文档](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/forEach.html)

# wpf - WPF application builds and starts but hangs inside the Main() method

> ID：12384148
> 
> 赞同：1
> 
> 时间：2012-09-12T08:33:55.433
> 
> 标签：wpf, compilation, launch

I have a WPF application. When i compile and run with "Step into new Instance", the observations are as follows:

1.  The Main() method is hit
2.  I can not jump into "calling the new instance of the App" with F11\. That line is skipped and the next one is hit.
3.  The Run() method is hit. It keeps hanging there for around 30 seconds, then the output windows says: Thread'... has exited with code 0 (0x0).

the Main method is as follows:

```
 public static void Main(){
             App app = new App();
             app.Run();
    } 
```

I would very much appreciate some advise on this one. Thanks in advance :)

Forgot to mention, this is part of a big project with multiple windows. I just wrote the entry point of the program because that's where the error happens. It used to work well in the past. However now, for reasons i don't know, it stopped working as i described above. Thx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:42:02.727

这是完全正常的。`app.Run()`只有在应用程序终止时才会结束。当`app.Shutdown()`调用或关闭主窗口时会发生这种情况。而且你没有显示任何主窗口。这样就可以手动调用`Shutdown()`.

# c++ - 如何将执行路径与文件路径和参数分开？

> ID：12384149
> 
> 赞同：1
> 
> 时间：2012-09-12T08:33:57.403
> 
> 标签：c++, windows, winapi, registry

有这样的行

```
C:\Program Files\Realtek\Audio\HDA\RAVCpl64.exe -s 
```

在注册表项中

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 
```

现在我想将绝对路径和参数从行中分离出来。

如果线路是

```
C:\Space Dir\Dot.Dir\Sample Name.Dot.exe param path."C:\Space Dir\Dot.Dir\Sample Name.Dot.exe" 
```

我应该使用哪个分隔符来处理这条线？是否有任何 Windows API 函数可以解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:18:28.803

您想要的函数位于可以在 Windows 中使用的标准 C 库中。

```
char theDrive[5],thePath[MAX_PATH],theFilename[MAX_PATH],theExtension[MAX_PATH];

_splitpath(theSCTDataFilename,theDrive,thePath,theFilename,theExtension); 
```

您还可以使用像这样的更通用的标记函数，它接受任何字符串、char 和 CStringArray..

```
void tokenizeString(CString theString, TCHAR theToken, CStringArray *theParameters)
{
CString temp = "";
int i = 0;

for(i = 0; i < theString.GetLength(); i++ ) 
    {                                   
    if (theString.GetAt(i) != theToken) 
       {
       temp += theString.GetAt(i);  
       }
     else
       {
       theParameters->Add(temp);    
       temp = "";
       }

         if(i == theString.GetLength()-1)
      theParameters->Add(temp);
    }
}

CStringArray thePathParts;
tokenizeString("your\complex\path\of\strings\separated\by\slashes",'/',&thePathParts); 
```

这将为您提供一个 CString 数组（CStringArray 对象），其中包含输入字符串的每个部分。只要您知道要拆分字符串的分隔符，您就可以使用此函数解析主要块然后解析次要块。

# javascript - Sencha Touch 和远程服务器上的身份验证

> ID：12384150
> 
> 赞同：5
> 
> 时间：2012-09-12T08:33:59.173
> 
> 标签：javascript, .net, authentication, sencha-touch-2

我想就使用 PhoneGap 和 Sencha Touch 的应用程序的身份验证机制以及带有 Active Directory 的 .NET 中的服务器获得您的反馈。

因此，我们需要在移动设备上存储用户凭据，这样用户就不必在每次希望使用应用程序时重新输入登录名和密码。

## 01 - IDEA - 饼干

据我了解，Sencha Touch 没有直接用于管理 Cookie 的库。为了使用 cookie，我应该安装 Sencha 的基础库“Sencha Ext Js”并使用 Ext.util.Cookies 类。这个库不应该是免费的。

我担心 CROS 域在使用 cookie 和 IOS 安全问题方面仍然存在问题。

此外，Phonegap 不提供任何 cookie 抽象，因为已经有很多其他工具可以做到这一点（Phonegap 只是封装了智能手机功能，而不是基本的浏览器功能）。我可以使用潜在的 jQuery，也许可以尝试 jquery-cookie 插件。

## 02 - IDEA - HTML5本地存储

Sencha Touch 为 HTML5 本地存储提供了一个 API，因此我可以将凭据保存在本地存储中，而不是编写一个 cookie。即使设备关闭，浏览器也应将本地数据保留一个未定义的数量。当用户单击应用程序时，我可以将本地数据发送到服务器，服务器将对用户进行身份验证。

尽管有这种机制，但我还是有安全问题。A) - 将用户名和密码作为纯文本存储在 Cookie 或本地存储中并转发到服务器。不涉及加密，身份验证应该工作。缺点：很容易读取 Cookie 和本地存储，因此它不是最先进的安全性。

B) - 我将用户名存储为纯文本，而不是密码，我将“表单身份验证票”存储在 Cookie 或本地存储中并转发到服务器。“表单身份验证票证”涉及服务器上的加密。优点：高安全性，缺点：需要时间来开发它。注意：安全性，票证使用服务器的 Machine.config 文件的配置元素进行加密。

* * *

我的问题：

*   您对这种情况有任何经验吗？
*   你有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T20:41:06.857

前几天我在[github](https://github.com/olegtaranenko/sencha-touch-2-login)上发布了 Simple Login 项目，你可能会发现它很有帮助。它适用于 Webkit 浏览器和 iPhone。安卓没有测试。

# ms-access - 访问子报告

> ID：12384151
> 
> 赞同：0
> 
> 时间：2012-09-12T08:33:59.983
> 
> 标签：ms-access, ms-access-2007

我的数据库有一些问题。我正在尝试在主报告中创建子报告，我尝试了两种不同的方法。两种方式的结果都是一样的。

方式#1 - 在主报表中，单击子表单/子报表图标并从之前准备好的列表中选择子报表。

方式#2 - 在主报表中，单击子表单/子报表图标然后构建子报表表单相应的查询，以便我想要的字段出现在主报表的子框架中。

*****在这两种方式中，在运行时数据库都会出现恐慌，并且 Access 会关闭我的应用程序数据库。*****

**注意**：无论是主报表还是子报表都是单独工作的，根据过滤条件查看数据时状态良好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T15:03:35.793

查看子表单上的“链接主字段”和“链接子字段”。您可能正在创建笛卡尔积。有时，对子报表的查询过于复杂，可能导致 Access 崩溃（我只在以前的版本中注意到这一点。）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:35:59.440

表格可能会损坏。有时您只需将旧表单中的所有内容复制到新表单中即可，它会起作用，有时您需要另存为文本，删除表单并从文本加载。

```
Application.SaveAsText acForm, "form1", "z:\docs\tmp.txt"
Application.LoadFromText acForm, "form1rest", "z:\docs\tmp.txt" 
```

报告

```
Application.SaveAsText acReport, "report1", "z:\docs\tmp.txt"
Application.LoadFromText acReport, "rep1rest", "z:\docs\tmp.txt" 
```

如果你已经在同一个数据库上开发了一段时间，你应该备份、压缩和修复、反编译甚至复制到一个新的数据库。这里还有其他关于从腐败中恢复的注意事项：http: [//www.granite.ab.ca/access/corruptmdbs.htm](http://www.granite.ab.ca/access/corruptmdbs.htm)

还要考虑您的打印机驱动程序并确保简单的报告有效。

# android - 未找到启动器活动错误

> ID：12384152
> 
> 赞同：1
> 
> 时间：2012-09-12T08:34:02.567
> 
> 标签：android, xml, android-emulator, android-manifest

我创建了一个非常简单的活动，显示 hello world 和一个标记为 TEST 的按钮，当我按下这个按钮时，Toast 将显示一条消息，我在模拟器上运行这个应用程序。

问题是，当我尝试运行此应用程序时，控制台会显示

```
no launcher activity found 
```

尽管代码完全没有错误，但模拟器上没有任何显示。

清单.xml：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.qr00"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".QR00"
        android:label="@string/title_activity_qr00" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="QR00" />
    </activity>
</application> 
```

谁能告诉我如何解决“未找到启动器活动”错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:35:55.400

您需要添加

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

所以：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.qr00"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".QR00"
        android:label="@string/title_activity_qr00" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="QR00" />
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:37:38.857

你需要在你的 Menifest 文件中添加这个 Intent

```
<application
android:icon="@drawable/ic_launcher"
android:label="@string/app_name"
android:theme="@style/AppTheme" >
<activity
    android:name=".QR00"
    android:label="@string/title_activity_qr00" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    <meta-data
        android:name="android.support.PARENT_ACTIVITY"
        android:value="QR00" />
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:36:56.107

您可以将此代码添加到您的清单文件中的活动标记中。

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".QR00"
        android:label="@string/title_activity_qr00" >
<intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="QR00" />
    </activity>
</application> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:46:11.730

像这样添加

```
 <activity
            android:name=".YourclassName"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />    
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity> 
```

# xtext - xtext - 如何设置代码区域，排除语法检查

> ID：12384153
> 
> 赞同：2
> 
> 时间：2012-09-12T08:34:02.173
> 
> 标签：xtext

**摘要：**我希望为我自己的语言设置左右边距 - 排除语法检查的代码区域。

**背景：**使用 xtext，我正在尝试创建漂亮的 Cobol 编辑器。到目前为止，我完成了语法并遇到了边距和注释问题。

我可以在语法中包含左边距：在 '\n' 后最多 6 个 !'\n' 字符。

但这并不能解决我的问题。SLComment 以 '*' 开头，位于左起第 7 个位置。一旦我以某种方式排除每行中的前 6 个字符，我就可以使用 '\n' '*' -> '\n' 规则来捕捉它。

我不能只将其保留为 '*' -> '\n' 并将位置检查委托给 validate ，因为它弄乱了乘法规则，它当然使用了 '*'。在语法边距规则之后放置注释规则也不是一个解决方案，因为那样我无法在代码的第一行中捕获边距。

我也知道我不会使用语法规则来解决右边距问题（例如排除 78 位之后的区域）。

我想有一种方法可以干扰 xtext 正在检查的文本，但还没有找到解决方案或提示如何完成此操作。

还试图找出是否可以通过某种方式进行预处理，但也找不到任何提示。

或者也许可以同时使用两种语法。额外的一个会得到每一行并隐藏边距？

希望我能够描述我面临的问题以及到目前为止我尝试了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-23T14:06:57.197

我想你可以使用类似于 LINE_START_COMMENT 终端规则的东西来捕获每行的前 6 个字符，然后在整个语法中隐藏它。

```
terminal LINE_START_COMMENT: 
    // Up to 6 chars that are NOT a new line
    '\n' (!'\n')? (!'\n')? (!'\n')? (!'\n')? (!'\n')? (!'\n')?
; 
```

然后，使用这种方法，我猜您还应该将整行注释规则修改为：

```
terminal FULL_LINE_COMMENT: 
    LINE_START_COMMENT '*' 
    (LINE_START_COMMENT '*' | !(LINE_START_COMMENT) )+
    (LINE_START_COMMENT)?
; 
```

在这里，我定义了 FULL_LINE_COMMENT 在以下 LINE_START_COMMENT 之后结束。要检查几个连续的注释行，您必须接受任何不是注释终止符（在本例中为 LINE_START_COMMENT）或 LINE_START_COMMENT 后面带有新的“*”的内容作为注释。

# windows - 在 Windows 7 64 位上安装虚拟打印机驱动程序时出错

> ID：12384158
> 
> 赞同：0
> 
> 时间：2012-09-12T08:34:14.227
> 
> 标签：windows, printing, driver, device-driver

我在 vc++.net 中开发了一个虚拟打印机驱动程序，它在 32 位环境中运行良好。但是在win7 64位安装时，它会在该行抛出错误“**操作无法完成（错误0x800f0214）** ”

> rundll32 printui.dll,PrintUIEntry /if /b "printername" /f "printer.inf" /r "printer port" /m "printer model" /hx64

注意：printerdriver.dll 以 64 位编译。

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T19:31:30.933

你的INF文件正确吗？？请使用 INFGate.exe 进行验证，并且该工具不应报告任何错误。

如果INF文件正确，那么一定是签名问题，请注意windows64位驱动需要签名，32位驱动不需要。

为了签署你的驱动程序，首先使用inf2cat.exe制作一个cat文件，然后使用签名工具对目录文件进行签名......所有这些工具都带有winddk......

有关签名的详细信息，请查看此链接：http: [//msdn.microsoft.com/en-us/library/windows/hardware/ff544865 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff544865(v=vs.85).aspx)

# python-2.7 - sys.argv vs argparse 通过命令行参数从 C# 获取数据到 python

> ID：12384159
> 
> 赞同：0
> 
> 时间：2012-09-12T08:34:16.297
> 
> 标签：python-2.7, command-line-arguments, argparse

我需要从 C# 调用 python 脚本，我会这样做：

```
 System.Diagnostics.Process process = new System.Diagnostics.Process();
   System.Diagnostics.ProcessStartInfo startInfo = new System.Diagnostics.ProcessStartInfo();
   startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
   startInfo.FileName = "cmd.exe";
   startInfo.Arguments = "/C python \"C:\\working\\projects\\python tests\\Sample Data.py\"";
   process.StartInfo = startInfo;
   process.Start(); 
```

但我现在需要添加命令行参数。我正在尝试在仅使用`sys.argv`哪个似乎很容易实现或使用`argparse`. **如果我总是传递一个且只有一个参数（日期），那么使用有什么好处`argparse`吗？**

有关该问题的其他信息（与问题略有相干）：

我传递的日期是 SQL 查询的参数。我可以改为在 C# 中运行这个查询（我更喜欢），但是我需要通过命令行参数将结果传递给 python，这在我看来是一个糟糕的主意，但也许这是 argparse 可以处理的事情？该表有两个日期列和 4 个浮点列。这样的表可以这样传吗？

我通过 cmd.exe 调用 python 而不是使用 IronPython 的原因是（A）我只需要从 C# 向 Python 传递一次信息，因此两者之间的通信非常有限，并且（B）其结果是 3D 表面由 mplot3d 生成的绘图在 IronPython 中工作似乎很麻烦（这实际上通常让我感到困惑），所以如果我只是通过单个日期，那么这似乎并不合理。但是，如果我可以通过命令行参数或其他一些不太复杂的方法轻松地传递整个表，我会很想听听如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:39:02.673

既然你是一个没有知识的幸福的干净石板，那就学习 argparse。它很简单，取代了现在被认为是旧的、过时的和（可能）已弃用的 sys.arg ；虽然现在你会发现它更常见，因为它在 Guido 还是个婴儿的时候就已经存在了。

# windows-runtime - 捕捉时使用 ContactPicker 合约

> ID：12384161
> 
> 赞同：1
> 
> 时间：2012-09-12T08:34:25.867
> 
> 标签：windows-runtime, winrt-xaml

我可以在应用程序被捕捉时使用[ContactPicker](http://msdn.microsoft.com/library/windows/apps/BR224913)合约吗？

```
var picker = new Windows.ApplicationModel.Contacts.ContactPicker();
picker.CommitButtonText = "Select";
picker.SelectionMode = Windows.ApplicationModel.Contacts.ContactSelectionMode.Fields;
picker.DesiredFields.Add(Windows.ApplicationModel.Contacts.KnownContactField.Email);
var contactInformation = await picker.PickSingleContactAsync(); 
```

上面的代码在全屏时有效，但在捕捉到屏幕一侧时在调用 PickSingleContactAsync() 时会引发以下异常：

> System.Runtime.InteropServices.COMException 未被用户代码处理
> 
> H结果=-2147467259
> 
> Message=Error HRESULT E_FAIL 已从对 COM 组件的调用中返回。
> 
> 源=mscorlib
> 
> 错误代码=-2147467259
> 
> StackTrace：在 System.Runtime.CompilerServices.TaskAwaiter.ThrowForNonSuccess（任务任务）在 System.Runtime.CompilerServices.TaskAwaiter.HandleNonSuccessAndDebuggerNotification（任务任务）在 System.Runtime.CompilerServices.TaskAwaiter`1.GetResult() 在 TouchToneDtmf.MainPage.d__e .MoveNext() 在 d:\Users\Foo\MainPage.xaml.cs:line 556 InnerException:

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:32:45.530

当应用程序被捕捉时它不起作用 - 您应该在调用 ContactPicker 之前检查应用程序的视觉状态。

在官方 C# 示例中，还有一个方法 EnsureUnsnapped()，您可能会发现在实施此合同时会有所帮助。

> 每次调用文件[/contact] 选择器时，您必须首先确保您的应用程序可以显示文件[/contact] 选择器，方法是验证您的应用程序没有被捕捉，或者，如果您的应用程序被捕捉，它可以被取消捕捉为了显示文件选择器。[Source - 如何通过文件选择器保存文件](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj150592.aspx)

```
using Windows.UI.ViewManagement;
//...
internal bool EnsureUnsnapped()
{
    bool unsnapped = ((ApplicationView.Value != ApplicationViewState.Snapped) || ApplicationView.TryUnsnap());
    return unsnapped;
} 
```

# javascript - 使用 javascript 从我的 android 应用程序将视频上 传到 youtube

> ID：12384162
> 
> 赞同：0
> 
> 时间：2012-09-12T08:34:27.047
> 
> 标签：javascript, android

我想从可安装的 android 应用程序将视频上​​传到 youtube。有没有办法只通过javascript而不调用本机android代码来做到这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T11:55:49.973

[https://github.com/claudemamo/file-attach-cordova-upload-jqm](https://github.com/claudemamo/file-attach-cordova-upload-jqm)使用这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:53:38.620

此 JavaScript 函数确认用户已选择要上传的文件。如果用户尚未选择文件，则该函数将显示错误消息。

```
 <script type="text/javascript">
   function checkForFile() {
   if (document.getElementById('file').value) {
  return true;
   }
    document.getElementById('errMsg').style.display = '';
    return false;
  }
 </script>

   <form action="URL?nexturl=http%3A%2F%2Fwww.example.com" method="post"
   enctype="multipart/form-data" onsubmit="return checkForFile();">
  <input id="file" type="file" name="file"/>
 <div id="errMsg" style="display:none;color:red">
   You need to specify a file.
 </div>
 <input type="hidden" name="token" value="TOKEN"/>
  <input type="submit" value="go" />
  </form> 
```

# css - Chrome ::selection CSS 选择器在文本框上失败

> ID：12384163
> 
> 赞同：0
> 
> 时间：2012-09-12T08:34:32.890
> 
> 标签：css, css-selectors

我写了一个计算 SHA1 哈希的基本网站。我知道，已经有数百个，但这更多是为了尝试设计而不是制作很多人会使用的东西。我设计的一个重要部分是在文本框中显示计算的哈希值，并使用 JavaScript 自动选择文本。这个文本框有一个 CSS3 ::-selection 伪元素来改变所选文本的颜色，所以它*看起来*不像一个普通的 'ol 文本框。这是CSS代码：

```
#result::-moz-selection {
    background: white;
    color: red;
}

#result::selection {
    background: white;
    color: red;
} 
```

我知道我可能可以组合选择器，但是当这不起作用时，我尝试将它们分开。HTML 是普通的`<input type="text" id="result">`，还有一些其他无关紧要的属性。[您可以在SHA1.in](https://sha1.in/)中查看完整代码。我在这里做错了吗？蒂亚！

顺便说一句，我从[CSS Tricks](http://css-tricks.com/overriding-the-default-text-selection-color-with-css/ "用 CSS 覆盖默认的文本选择颜色")获得了我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:51:39.323

用 a替换您的`input`元素`div`似乎可以解决问题。显然 Chrome 会阻止覆盖 text 的选择颜色`inputs`。

这是一个报告的错误：[little link](https://code.google.com/p/chromium/issues/detail?id=62263)。

# ajax - 触发文本字段的 OnBlur 事件时发送 ajax 请求

> ID：12384166
> 
> 赞同：4
> 
> 时间：2012-09-12T08:34:34.097
> 
> 标签：ajax, jquery, textfield

可以对来自文本字段的 onblur 事件使用 AJAX。每当我从文本字段中跳出时，我希望 html（在 div 容器内）进行更改。我看到很多使用带有表单的 AJAX 的问题/教程，但在文本字段或复选框等单个组件上却没有。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T09:29:11.710

您可以使用纯 JQuery 来完成。假设您的表单元素的 ID 为 my_element：

```
$("#my_element").blur(function(){
  $.ajax({url: '/my/data', type: 'GET'})
  .done(function(response){
    $("#my_div").html(response);
  })
}) 
```

# php - 使用 Javascript 的 PHP 到 HTML 5

> ID：12384168
> 
> 赞同：0
> 
> 时间：2012-09-12T08:34:38.533
> 
> 标签：php, javascript, html, local-storage, manifest

我有一个难题，我们目前在我们的服务器上使用 PHP，我是一名 PHP 程序员。我已经建立了一个连接到我们的 PHP 站点的站点，该站点完全是客户端 HTML 5 和 Javascript。我可以将变量从 HTML 5 传递到 PHP，但我想将一些数据从 PHP 导入到 HTML 页面，例如 session ...等。如何将 PHP 会话传递给另一个页面上的 Javascript 或访问要在 HTML 5 和 Javascript 上使用的会话数据？

这样做的主要原因是带宽低的用户以及 HTML 5 能够在他们的线路断开时使用本地存储和离线功能，以便他们可以稍后将数据发布到 PHP 页面。

帮助会很大吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:02:39.393

如果您想在 PHP 中获取会话数据，您可以使用以下部分

```
<script>var $_SESSION = <?= json_encode($_SERVER) ?></script> 
```

如果某些数据要在不同的页面上维护并且不需要服务器数据，最好使用 HTML5 的会话存储 [http://www.xul.fr/en/html5/sessionstorage.php]

这将减少服务器负载 + 数据传输并提高应用程序的速度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:45:43.723

不完全支持 HTML5 本地存储，因此可以通过以下方式进行一些可以在任何地方工作的事情：首先将您的 PHP Session 放入 JS var：

```
 <script type="text/javascript">
         var sessionData= <?php echo json_encode($_SESSION); ?>
 </script> 
```

然后，您将拥有`sessionData`JSON 格式的可变会话数据。然后，如果您想在不同的地方使用它，那么只需通过 Javascript 将其设置并获取到 cookie 中。

请告诉我是否还有一些不清楚的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:49:38.560

我希望我在这里没有完全错，但是您实际上要做的是将数据从 php 写入 javascript。您可以按照 akluth 的建议使用 AJAX，但我认为在 javascript 中执行以下操作会更容易；

```
data = <?php echo $foo; ?>; 
```

但是，在本地存储中保存会话时应该小心，因为它可以被客户端修改。一旦用户稍后尝试发布数据，可能会仔细检查。有关详细信息，请参阅[此 SO answer 。](https://stackoverflow.com/questions/3325097/how-can-i-use-html5-local-storage-along-side-php-use-that-for-php-sessions-and?rq=1)

# ruby-on-rails-3 - 生成属性方法——有什么不好的副作用吗？

> ID：12384188
> 
> 赞同：1
> 
> 时间：2012-09-12T08:35:48.247
> 
> 标签：ruby-on-rails-3, activerecord

在rails中，如果我想覆盖一个属性方法，例如。一个 setter 或 getter 等，我可能需要定义实例方法。

但是，activerecord 在实例首次同步之前不会定义属性方法。

这可以在以下方面看到：

```
class MyModel < ActiveRecord::Base
end

MyModel.attribute_methods_generated? # => false
MyModel.instance_method(:a_db_column)
  # => NameError Exception: undefined method `a_db_column' for class `MyModel'
MyModel.new # implicitly calls define_attribute_methods
# MyModel.define_attribute_methods # can also use this instead of MyModel.new
MyModel.attribute_methods_generated? # => true
MyModel.instance_method(:a_db_column)
#<UnboundMethod: MyModel(#<Module:0x000000030a20a0>)#__temp__> 
```

`define_attribute_methods`提前打电话有什么问题吗？甚至做类似的事情：

```
class MyModel < ActiveRecord::Base
  define_attribute_methods 
  # is there any code here which might cause problems?
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:43:38.197

为什么需要定义实例方法？据我了解，您正在尝试添加/覆盖实例方法，因此当您调用此方法时，`define_attribute_methods`会在创建实例后调用。

如果我误会了，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:44:15.543

根据您提供的信息，您似乎想要修补 ActiveRecord 在模型上生成的方法。与其触发 ActiveRecord 的方法生成，为什么不修补 define_attribute_methods 以在完成后调用您的修补方法？

# java - 在休眠中选择具有虚拟值的虚拟列？

> ID：12384189
> 
> 赞同：0
> 
> 时间：2012-09-12T08:35:49.027
> 
> 标签：java, sql, hibernate

当我尝试从 SQL 开发人员执行以下查询时，我得到了适当的结果，就像我尝试从休眠中执行相同的查询一样，它返回一个字符对象，只有 D 作为输出。

> 选择“数据”作为双重信息

在通过休眠执行时，我应该在查询中进行哪些修改以获取信息“数据”。

```
String queryStr = "SELECT 'Data' as info from dual";
Query qry = session.createSQLQuery(queryStr);
qry.list(); 
```

# ios - 可以使用临时部署在沙盒环境中测试应用内购买吗？

> ID：12384199
> 
> 赞同：2
> 
> 时间：2012-09-12T08:36:34.530
> 
> 标签：ios, testing, ad-hoc-distribution, in-app-purchase

我想在开发（沙盒）环境中测试我的 IAP。

但我的 XCode SDK 版本较低，无法将我的开发设备识别为 XCode 中的绿色标记。

因此，每次如果我想在我的开发设备中测试我的应用程序，我必须首先通过临时部署将我的测试应用程序部署到我的开发设备。如果需要在线上网，然后在 Wi-Fi 上进行测试。

我可以通过这种方式使用 adhoc 部署通过 Wi-Fi 在我的开发设备中测试 IAP 功能吗？

因为我的 Dev 上已经有 2 个版本的 XCode。机器，所以我不想在不久的将来将我的 XCode 更新到新版本，以防发生意外的错误。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:47:23.463

简短的回答是：是的。In-App-Purchase api 将自动与沙盒环境一起使用，直到 Apple 成功审核应用程序。当然，你需要通过itunes connect创建测试用户来测试它。检查[编程指南](https://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008267-CH1-SW1) 。

# ios - NSPortMessage 在 iOS API 中吗？

> ID：12384210
> 
> 赞同：2
> 
> 时间：2012-09-12T08:37:34.827
> 
> 标签：ios, cocoa-touch, foundation

我正在尝试根据关于运行循环的线程编程指南编写一个演示。当我实现 NSPortDelegate 的`- (void)handlePortMessage:(NSPortMessage *)portMessage;`方法时，它会提示错误：

> 例如消息的接收器类型“NSPortMessage”是前向声明

所以我尝试通过“Foundation/NSPortMessage.h”导入，之后它说：

> 找不到 Foundation/NSPortMessage.h 文件。

所以我想知道我们是否可以在 iOS 中使用 NSPortMesssage？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:01:53.163

`NSPortMessage`似乎不在 iOS 文档中，所以大概是一个私有 API。`NSPortMessage`当我尝试使用Xcode 时，Xcode 会为我完成代码完成，大概是因为前向声明。但是，如果我让 Xcode 向我展示它的定义，`NSPortMessage`则表示找不到该符号，这将确认它是一个私有 API。

该类存在于我的 iPhone 4s 上的 Objective-C 运行时中，因此它在设备上。但是`NSPortMessage`允许进程间通信，我认为这会违反 iOS 沙盒安全性。也许它适用于线程间通信。

我当然不会尝试在适用于 App Store 的应用程序中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-05T07:01:21.200

由于 iOS 版本的分布式对象编程指南和某些 API 也已弃用，因此似乎不鼓励将所有与基于端口的输入源相关的东西用于 iOS 开发。但是使用 Core Foundation 功能设置基于端口的通道以在线程之间进行通信仍然是一个可用的选择。

# php - 通过单击图像\按钮添加到列表

> ID：12384213
> 
> 赞同：0
> 
> 时间：2012-09-12T08:37:39.117
> 
> 标签：php, jquery, list

我在屏幕上有一些图像，我希望每次单击都会将此图像的值放入列表中。然后我需要将此列表发送到 sql 表中（所以它需要是一个数组？）

有任何想法吗？

```
<a href="#"><img src="img/cmp/bezeq.png" alt="" /></a>
            <a href="#"><img src="img/cmp/hot.png" alt="" /></a>
            <a href="#"><img src="img/cmp/mirs.png" alt="" /></a>
            <a href="#"><img src="img/cmp/013.png" alt="" /></a> 
```

这是例如。我点击的每张图片旁边都有一个列表。当我点击 hot.png 它添加到列表中 hot 。然后我需要把这个列表放到 sql 表中。

这是整个代码

 `````
<div id="content" >

    <div class="socials" id="move" >
        <ul class="reset">
            <li><a href="#"><img src="img/cmp/bezeq.png" alt="1" /></a></li>
            <li><a href="#"><img src="img/cmp/hot.png" alt="2" /></a></li>
            <li><a href="#"><img src="img/cmp/mirs.png" alt="3" /></a></li>
            <li><a href="#"><img src="img/cmp/013.png" alt="4" /></a></li>
            <li><a href="#"><img src="img/cmp/012.png" alt="5" /></a></li>
            <li><a href="#"><img src="img/cmp/hotnet.png" alt="6" /></a></li>
            <li><a href="#"><img src="img/cmp/yes.png" alt="7" /></a></li>
            <li><a href="#"><img src="img/cmp/golantelecom.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/019mars.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/bezeqinter.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/hotmobile.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/aridor.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/triplecloud.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/rimon.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/youphone.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/orange.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/pelephone.png" alt="" /></a></li>
            <li><a href="#"><img src="img/cmp/rami.png" alt="" /></a></li>
        </ul>           
    </div>  

</div>
 <script>
     $(document).ready(function(){
    $('a').on('click',function(){
        $('select').append('<option>'+$(this).find('img').attr('alt')+'</option>');
    });
});​
    </script>

      <select multiple="multiple"  ></select>​ 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:02:32.757

考虑您`<select multiple="multiple"></select>`在图片链接的右侧有一个，然后使用以下代码：

```
$(document).ready(function(){
    $('a').on('click',function(){
        $('select').append('<option>'+$(this).find('img').attr('src')+'</option>');
    });
}); 
```

这是做什么的：

*   点击一下
    *   找到`img`点击内的标签`a`
        *   `src`将属性附加到`select`输入。

[**演示**](http://jsfiddle.net/PKBXL/)

**编辑：**

假设您更改了这一行：

```
$('select').append('<option>'+$(this).find('img').attr('src')+'</option>'); 
```

进入这个：

```
$('select').append('<option selected="selected">'+$(this).find('img').attr('src')+'</option>'); 
```

以便选择所有选项（以便它们通过表单值传递给 PHP）。

然后，在 PHP 端，使用如下内容：

```
$images = $_POST['yourSelect']; 
```

然后您可以使用 for 遍历数组：

```
foreach($images as $i){} 
`````

# wordpress - 如何为特定帖子类型添加多个图像上传元框？

> ID：12384214
> 
> 赞同：4
> 
> 时间：2012-09-12T08:37:48.980
> 
> 标签：wordpress, wordpress-theming

我正在创建一个主题，在该主题中我创建了一些自定义帖子类型`products`和一些自定义元框，以提交它们各自的自定义信息，例如其成本和到期日期。

通过进行一些搜索`add_theme_support( 'post-thumbnails' );`，我能够添加一个特色图片列来上传与特定帖子相关的特色图片。但它只允许我添加单个图像，并且我想上传与一个特定自定义帖子相关的多个图像。例如单个产品的不同图像。

为此，我在互联网上找到了不同的解决方案，其中一个我发现最适合我的问题的解决方案就是[这个](http://wordpress.org/extend/plugins/multiple-post-thumbnails/)，但它再次只允许我上传一张图片，但与特色图片不同。

WordPress 是否有任何功能可以上传多个图像，例如特别是单个帖子的特色图像上传，或者是否有任何插件可以完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-07T05:08:43.773

```
<?php
add_action( 'admin_init', 'add_post_gallery_so_14445904' );
add_action( 'admin_head-post.php', 'print_scripts_so_14445904' );
add_action( 'admin_head-post-new.php', 'print_scripts_so_14445904' );
add_action( 'save_post', 'update_post_gallery_so_14445904', 10, 2 );

/**
 * Add custom Meta Box to Posts post type
 */
function add_post_gallery_so_14445904() 
{
    add_meta_box(
        'post_gallery',
        'Studio Image Uploader',
        'post_gallery_options_so_14445904',
        'post',// here you can set post type name
        'normal',
        'core'
    );
}

/**
 * Print the Meta Box content
 */
function post_gallery_options_so_14445904() 
{
    global $post;
    $gallery_data = get_post_meta( $post->ID, 'gallery_data', true );

    // Use nonce for verification
    wp_nonce_field( plugin_basename( __FILE__ ), 'noncename_so_14445904' );
?>

<div id="dynamic_form">

    <div id="field_wrap">
    <?php 
    if ( isset( $gallery_data['image_url'] ) ) 
    {
        for( $i = 0; $i < count( $gallery_data['image_url'] ); $i++ ) 
        {
        ?>

        <div class="field_row">

          <div class="field_left">
            <div class="form_field">
              <label>Image URL</label>
              <input type="text"
                     class="meta_image_url"
                     name="gallery[image_url][]"
                     value="<?php esc_html_e( $gallery_data['image_url'][$i] ); ?>"
              />
            </div>
          </div>

          <div class="field_right image_wrap">
            <img src="<?php esc_html_e( $gallery_data['image_url'][$i] ); ?>" height="48" width="48" />
          </div>

          <div class="field_right">
            <input class="button" type="button" value="Choose File" onclick="add_image(this)" /><br />
            <input class="button" type="button" value="Remove" onclick="remove_field(this)" />
          </div>

          <div class="clear" /></div> 
        </div>
        <?php
        } // endif
    } // endforeach
    ?>
    </div>

    <div style="display:none" id="master-row">
    <div class="field_row">
        <div class="field_left">
            <div class="form_field">
                <label>Image URL</label>
                <input class="meta_image_url" value="" type="text" name="gallery[image_url][]" />
            </div>
        </div>
        <div class="field_right image_wrap">
        </div> 
        <div class="field_right"> 
            <input type="button" class="button" value="Choose File" onclick="add_image(this)" />
            <br />
            <input class="button" type="button" value="Remove" onclick="remove_field(this)" /> 
        </div>
        <div class="clear"></div>
    </div>
    </div>

    <div id="add_field_row">
      <input class="button" type="button" value="Add Field" onclick="add_field_row();" />
    </div>

</div>

  <?php
}

/**
 * Print styles and scripts
 */
function print_scripts_so_14445904()
{
    // Check for correct post_type
    global $post;
    if( 'post' != $post->post_type )// here you can set post type name
        return;
    ?>  
    <style type="text/css">
      .field_left {
        float:left;
      }

      .field_right {
        float:left;
        margin-left:10px;
      }

      .clear {
        clear:both;
      }

      #dynamic_form {
        width:580px;
      }

      #dynamic_form input[type=text] {
        width:300px;
      }

      #dynamic_form .field_row {
        border:1px solid #999;
        margin-bottom:10px;
        padding:10px;
      }

      #dynamic_form label {
        padding:0 6px;
      }
    </style>

    <script type="text/javascript">
        function add_image(obj) {
            var parent=jQuery(obj).parent().parent('div.field_row');
            var inputField = jQuery(parent).find("input.meta_image_url");

            tb_show('', 'media-upload.php?TB_iframe=true');

            window.send_to_editor = function(html) {
                var url = jQuery(html).find('img').attr('src');
                inputField.val(url);
                jQuery(parent)
                .find("div.image_wrap")
                .html('<img src="'+url+'" height="48" width="48" />');

                // inputField.closest('p').prev('.awdMetaImage').html('<img height=120 width=120 src="'+url+'"/><p>URL: '+ url + '</p>'); 

                tb_remove();
            };

            return false;  
        }

        function remove_field(obj) {
            var parent=jQuery(obj).parent().parent();
            //console.log(parent)
            parent.remove();
        }

        function add_field_row() {
            var row = jQuery('#master-row').html();
            jQuery(row).appendTo('#field_wrap');
        }
    </script>
    <?php
}

/**
 * Save post action, process fields
 */
function update_post_gallery_so_14445904( $post_id, $post_object ) 
{
    // Doing revision, exit earlier **can be removed**
    if ( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE )  
        return;

    // Doing revision, exit earlier
    if ( 'revision' == $post_object->post_type )
        return;

    // Verify authenticity
    if ( !wp_verify_nonce( $_POST['noncename_so_14445904'], plugin_basename( __FILE__ ) ) )
        return;

    // Correct post type
    if ( 'post' != $_POST['post_type'] ) // here you can set post type name
        return;

    if ( $_POST['gallery'] ) 
    {
        // Build array for saving post meta
        $gallery_data = array();
        for ($i = 0; $i < count( $_POST['gallery']['image_url'] ); $i++ ) 
        {
            if ( '' != $_POST['gallery']['image_url'][ $i ] ) 
            {
                $gallery_data['image_url'][]  = $_POST['gallery']['image_url'][ $i ];
            }
        }

        if ( $gallery_data ) 
            update_post_meta( $post_id, 'gallery_data', $gallery_data );
        else 
            delete_post_meta( $post_id, 'gallery_data' );
    } 
    // Nothing received, all fields are empty, delete option
    else 
    {
        delete_post_meta( $post_id, 'gallery_data' );
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:49:34.023

哦，谢谢你告诉我 Brasofilo。正确的答案是可以通过帖子标题下方的媒体上传按钮上传多张图片，并可以使用图库短代码将这些图片显示在前端的图库中，例如：-

```
<?php echo do_shortcode('[gallery size="thumbnail"]'); ?> 
```

# javascript - JavaScript 下拉菜单 - 零件在 Mac 上消失？

> ID：12384219
> 
> 赞同：3
> 
> 时间：2012-09-12T08:38:10.910
> 
> 标签：javascript, jquery, jquery-ui

我的网站有多个页面，每个页面顶部都有一个重复的导航菜单。这适用于 PC 上的每个浏览器。但是，在 Mac 上的 safari 或 iPad 上，它仅适用于某些页面。

在肖像页面上，下拉菜单“信息”中的文本消失，客户区下拉菜单中的文本也消失。

这些菜单在所有其他页面上都可以正常工作，并且代码完全相同，我复制并粘贴了它，所以我真的不明白为什么会发生这种情况。链接仍然有效，如果您单击空白区域，它会将您带到链接，但您实际上看不到您单击的内容。

我已经更新了我所有的 JavaScript 文件，想不出还有什么可以尝试的。

[www.yorkshirephotographer.net](http://www.yorkshirephotographer.net/)

**代码：**

```
jQuery(document).ready(function(){
    /* for top navigation */
    jQuery(" #menu ul ").css({display: "none"}); // Opera Fix
    jQuery(" #menu li").hover(function(){
        jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400);
    },function(){
        jQuery(this).find('ul:first').css({visibility: "hidden"});
    });
    jQuery(" #menu2 ul ").css({display: "none"}); // Opera Fix
    jQuery(" #menu2 li").hover(function(){
        jQuery(this).find('ul:first').css({visibility: "visible",display: "none"}).slideDown(400);
    },function(){
        jQuery(this).find('ul:first').css({visibility: "hidden"});
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:54:45.513

这可能是渲染问题。尝试向您的元素添加一些修复 css：

```
-webkit-transform: translateZ(0); 
```

它应该强制渲染......你可以用这样的javascript来做到这一点：

```
jQuery("#menu ul, #menu li").css("-webkit-transform", "translateZ(0)"); 
```

您还可以将 css 属性应用于`#menu`. 我也会添加锚选择器：

```
jQuery("#menu, #menu ul, #menu li, #menu a").css("-webkit-transform", "translateZ(0)"); 
```

如果它仍然不起作用，请尝试移除 cufons。

# java - 为什么这个正则表达式不匹配？

> ID：12384221
> 
> 赞同：2
> 
> 时间：2012-09-12T08:38:13.903
> 
> 标签：java, regex

我敢肯定这种类型的问题会在这里发布很多。我有这个正则表达式：

```
^\[.*\] 
```

应该匹配

```
[Test]Hi there 
```

根据[RegexPal](http://www.regexpal.com/)，确实如此。但是，在此 Java SCCE 中，它不会：

```
final String pat = "^\\[.*\\]";
final String str = "[Test]Hi there";
System.out.println(pat);
System.out.println(str);
System.out.println(str.matches(pat)); 
```

输出：

```
^\[.*\]
[Test]Hi there
false 
```

为什么不匹配？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T08:39:57.040

[Java 中的“匹配”](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#matches%28%29)表示“匹配整个字符串”：

> 尝试将整个区域与模式匹配。

由于您的正则表达式在最后一个之后不接受任何字符，因此`]`它不会“匹配”任何在`]`.

您可以使用[`find`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Matcher.html#find%28%29)来查看字符串是否*包含*与您的正则表达式匹配的内容（它仍然必须在开头锚定，因为您使用`^`）。

换句话说`^\[.*\]`，不会**匹配**，但会*在* 其中**找到**。 **`[Test]Hi there` **`[Test]``[Test]Hi there`****

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:42:44.963

因为`String#match`会尝试将您的正则表达式与整个字符串进行匹配。您正在寻找的是`Pattern.compile(pat).matcher(str).find()`，请参阅[Matcher](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html)。****

# c# - 使用字符串中存在的分隔符拆分字符串

> ID：12384222
> 
> 赞同：1
> 
> 时间：2012-09-12T08:38:23.880
> 
> 标签：c#, java

我有一个问题，我想知道是否有任何聪明的解决方法。

我需要通过套接字将字符串传递给 Web 应用程序。该字符串由三个部分组成，我使用“|” 作为分隔符，在接收应用程序处拆分为三个单独的部分。

问题是'|' character 可以是 3 个单独字符串中的任何一个中的一个字符，当这种情况发生时，整个拆分操作会扭曲字符串。

因此，我的问题是：有没有办法在某些文本中使用字符/字符串作为分隔符，而该字符/字符串本身可能在文本中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:42:25.257

一般模式是转义分隔符。例如当'|' 是分隔符，你可以使用“||” 每当您需要字符串中的字符本身时（如果您允许空字符串可能会很困难），或者您可以使用类似 '\' 作为转义字符，以便 '|' 变成“\|” 而“\”本身就是“\\”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:41:43.707

> 有没有办法在某些文本中使用字符/字符串作为分隔符，而该字符/字符串本身可能在文本中？

简单的回答：**没有。**

这当然是在字符串/分隔符*完全相同*的情况下，无需对文本进行修改。

当然有可能的解决方法。一种可能的解决方案是，您可能希望分隔符之间具有最小/固定宽度，但这并不完美。

另一种可能的解决方案是选择一个在文本中永远不会同时出现的分隔符（字符序列）。这需要您更改源和消费者。

当我需要使用分隔符时，我通常会选择一个我 99.9% 肯定不会出现在普通文本中的分隔符，分隔符可能会根据我期望的文本类型而有所不同。

[这是维基百科](http://en.wikipedia.org/wiki/Delimiter)的引述：

> 由于分隔符冲突是一个非常普遍的问题，因此人们发明了各种避免它的方法。一些作者可能会尝试通过选择不太可能出现在数据流本身中的分隔符（或字符序列）来避免该问题。这种临时方法可能是合适的，但它必然依赖于对数据流中将出现的内容的正确猜测，并且不提供针对恶意冲突的安全性。因此也适用其他更正式的约定。

只是对您的用例的一个附注，为什么不对发送的数据使用协议呢？比如[protobuf](http://code.google.com/p/protobuf/)？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:39:46.847

这里的问题是给定以下字符串：

```
string toParse = "What|do you|want|to|say|?"; 
```

它可以通过多种方式解析：

“
你
想要|要|说什么|？”

或者

“什么|你
想说
|说|？”

等等...

你可以定义规则来解析你的字符串，但是编码它会很困难，而且它对最终用户来说似乎是违反直觉的。

字符串必须包含一个转义字符，指示符号“|” 是想要的，而不是分隔符。例如，这可能是“\|”。

这是使用正则表达式的完整示例：

```
using System.Text.RegularExpressions;

//... Put this in the main method of a Console Application for instance.
// The '@' character before the strings are to specify "raw" strings, where escape characters '\' are not escaped
Regex reg = new Regex(@"^((?<string1>([^\|]|\\\|)+)\|)((?<string2>([^\|]|\\\|)+)\|)(?<string3>([^\|]|\\\|)+)$");
string toTest = @"user\|dureuill|deserves|an\|upvote";
MatchCollection matches = reg.Matches(toTest);
if (matches.Count != 1)
{
    throw new FormatException("Bad formatted pattern.");
}

Match match = matches[0];
string string1 = match.Groups["string1"].Value.Replace(@"\|", "|");
string string2 = match.Groups["string2"].Value.Replace(@"\|", "|");
string string3 = match.Groups["string3"].Value.Replace(@"\|", "|");
Console.WriteLine(string1);
Console.WriteLine(string2);
Console.WriteLine(string3);
Console.ReadKey(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T10:23:40.810

您可以找到消息部分中不存在的分隔符，而不是`|`用作分隔符，并将其传递到已发送消息的开头。这是一个使用整数作为分隔符的示例：

```
String[] parts = {"this is a message", "it's got three parts", "this one's the last"};
String delimiter = null;

for (int i = 0; i < 100; i++) {
    String s = Integer.toString(i);
    if (parts[0].contains(s) || parts[1].contains(s) || parts[2].contains(s))
        continue;
    delimiter = s;
    break;
}

String message = delimiter + "#" + parts[0] + delimiter + parts[1] + delimiter + parts[2]; 
```

现在消息是`0#this is a message0it's got three parts0this one's the last`。

在接收端，您首先找到分隔符并在其上拆分消息字符串：

```
String[] tmp = message.split("#", 2);
String[] parts = tmp[1].split(tmp[0]); 
```

这不是最有效的解决方案，因为它需要多次扫描消息部分，但它很容易实现。如果您没有找到值`delimiter`并且`null`恰好是消息的一部分，您可能会遇到意外的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T08:40:43.060

也许首先对您的字符串进行 HTMLEncode 和 HTMLDecode 很有用，然后将它们与您的分隔符一起附加。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T08:40:53.983

我想你要么

1) 一起找出一个永远不会出现在字符串中的字符或一组字符

或者

2）使用固定长度的字符串和填充。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-12T08:42:13.860

如果您可以灵活地执行此操作，也许可以调整分隔符？因此，字符串可以读取“String1”|“String2”，而不是 String1|String2。

如果不需要管道 - 在创建/输入此字符串期间进行一些简单的验证？

# android - 如何为我的移动应用程序创建系统更新

> ID：12384229
> 
> 赞同：0
> 
> 时间：2012-09-12T08:38:48.810
> 
> 标签：android, blackberry, updates

我正在为 Android 和 BlackBerry 开发一个移动应用程序。

通过将版本代码和版本名称包含在服务器上的纯文本文件中，我已经上传了最新的 OTA 安装应用程序。

在我的应用程序中，如何将代码版本和版本名称从服务器上的纯文本格式转换为字符串。我想这样做，以便我可以让应用程序将其当前版本与服务器上可用的版本进行比较，这样如果服务器上有更新的版本，将向用户提供要下载的更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:30:28.483

假设您将文件上传到服务器，其中包含一行：

```
1.2.3.4 
```

The process is similar for Android and BB:

1- Retrieve the file from the server. You'll probably have a byte array as result.

2- Convert it to a String with the proper encoding. In case the txt only contains numbers and dots, the encoding is not really important since these are ASCII chars, and ASCII chars are compatible with most usual default encodings like UTF-8 and ISO-8859\. So we could probably instantiate the string without dealing with the encoding, like this: `String fileContent = new String(byte[] downloadedData)`. Otherwise, make sure you know in advance the txt file encoding and instantiate the string with that encoding.

3- Split the string using the dots as separators. In Android you can do it like this: `String[] splitted = String.split(fileContent, '.')`, or use a `StringTokenizer`. In BB, as it is based in CLDC, this method in String is not available so you should code it yourself, or use/port one from a well tested library (like Apache Commons' org.apache.commons.lang3.StringUtils.split). After this step you'll have an array of strings, each string being a number ({"1","2","3","4"} in the example).

4- Now create a int array of the same length, and convert each string in the array to its equivalent int, using `Integer.parseInt(splitted[i])` on each element `i`.

5- Get the version for your app and perform the same steps to get an array of int. In BB, you can call `ApplicationDescriptor.currentApplicationDescriptor().getVersion()`. In Android, `PackageInfo.versionCode` or `PackageInfo.versionName`, depending on what you have specified in the manifest.

6- Notice both arrays don't need to be of the same length. You could have written "1.2.3.4" in your txt, but have "1.2.3" in your AndroidManifest.xml or BlackBerry_App_Descriptor.xml. Normalize both resulting int arrays to have the same length (the lenght of the longer one), and fill the added elements with zeroes. Now you'll have two int arrays (in the example, txtVersion = {1,2,3,4} and appVersion = {1,2,3,0}). Iterate comparing versions one by one. The rule is: if txtVersion[i] > appVersion[i], then you are out of date and an upgrade is needed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:00:05.370

此答案仅适用于 android 部分。

要从您的应用程序中获取应用程序版本号和名称，您可以执行以下操作（如[@ColorWP.com建议的那样](https://stackoverflow.com/users/1514026/colorwp-com)

获取应用程序版本和名称：

```
String version_number = getPackageManager().getPackageInfo(getPackageName(), 0).versionName;
String version_name = getPackageManager().getPackageInfo(getPackageName(), 0).versionNumber; 
```

从网上读取您的文件：

```
URL url = new URL("http://www.your.site/your.txt");
URLConnection connect = url.openConnection();

BufferedReader txtreader = new BufferedReader(new InputStreamReader(connect.getInputStream()));
String line = txtreader.readLine();
while (line != null) {
    /* Code to Read your variables in this loop 
      (let us assume these would be:
      server_app_version
      server_app_name)
    */
 } 
```

[确保按照@ColorWP.com](https://stackoverflow.com/users/1514026/colorwp-com)的建议添加 Internet 权限

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

比较版本：

```
if (server_app_version.compareTo(version_number) != 0 || server_app_name.compareTo(version_name) != 0){
    // Notify user to download the new version
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:08:33.927

与其使用 txt 文件，不如从您的服务器输出 JSON（Android 提供了一些有用的 JSON 解码和编码方法）。

在更新活动中设置将 JSON 输出为静态最终变量的页面的 URL，使用您喜欢的任何方法下载它。以下[答案](https://stackoverflow.com/a/8480818/1514026)可能有用。

[然后，使用此答案](https://stackoverflow.com/a/8091111/1514026)中的代码解析 JSON 字符串。

当您从服务器以字符串或整数形式获取应用程序的最新版本时，您可以将其与您可以使用的本地应用程序版本进行比较：

```
PackageInfo pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
String version = pInfo.versionCode;
// To get the version name use pInfo.versionName 
```

请记住添加 INTERNET 权限，以便您的应用可以在线连接：

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# validation - java.lang.ClassFormatError：类文件 javax/validation/Validation 中非本机或抽象方法中的缺失代码属性

> ID：12384232
> 
> 赞同：2
> 
> 时间：2012-09-12T08:39:07.840
> 
> 标签：validation, exception, maven, activemq

使用maven添加activemq，在IDE中进行单元测试时出现jar冲突的问题，异常信息为：

```
java.lang.ClassFormatError: Absent Code attribute in method that is not native or abstract in class file javax/validation/Validation 
```

我已经从 javaee 中排除了验证，如下所示：

```
 <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
        <exclusions>
            <exclusion>
                <groupId>javax.validation</groupId>
                <artifactId>validation-api</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.apache.geronimo.specs</groupId>
                <artifactId>geronimo-jms_1.1_spec</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

并且对 activemq 的依赖是

```
 <dependency>
        <groupId>org.apache.activemq</groupId>
        <artifactId>activemq-all</artifactId>
        <version>${activemq_version}</version>

        <exclusions>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-context</artifactId>
            </exclusion>
            <exclusion>
                <groupId>org.springframework</groupId>
                <artifactId>spring-webmvc</artifactId>
            </exclusion>

            <exclusion>
                <groupId>org.fusesource.fuse-extra</groupId>
                <artifactId>fusemq-leveldb</artifactId>
            </exclusion>
        </exclusions>
    </dependency> 
```

这是一个烦人的问题。

有人想提点意见吗？非常感谢帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T19:55:09.397

依赖项包含剥离的类，其中不包含[此处](https://community.jboss.org/wiki/WhatsTheCauseOfThisExceptionJavalangClassFormatErrorAbsentCode)`javax::javaee-api`描述的方法实现。您可以改用 JBoss 提供的 API JAR：

```
<dependency>
    <groupId>org.jboss.spec</groupId>
    <artifactId>jboss-javaee-6.0</artifactId>
    <version>1.0.0.Final</version>
    <type>pom</type>
    <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-20T10:59:54.067

我知道这是一个非常古老的问题，但我最近遇到了这个问题，我找到了一个简单的解决方案，将来可能对某人有用。

由于无法从 javaee-api 中删除 validator-api（它不是作为依赖项导入的），诀窍是使用 javaee-api 8.0 版（它还包含validation-api，但工厂可以工作），您可以避免添加验证 API，将类似于：

```
<dependency>
    <groupId>javax</groupId>
    <artifactId>javaee-api</artifactId>
    <version>8.0</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>org.glassfish</groupId>
    <artifactId>javax.el</artifactId>
    <version>3.0.0</version>
</dependency> 
```

而已。

# java - 复制 JPanel 任务

> ID：12384233
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:39:09.073
> 
> 标签：java, swing, netbeans, jbutton, duplication

在java中，我有一个面板和两个按钮，分别命名为b1和b2。当我复制面板并将其放在同一帧中时，按钮名称变为 b3 和 b4 但我在 b1 中编写的代码不会转移到 b3 ？我该怎么做，即当创建面板的副本时，b1 中的代码应该在 b3 中实现，也可以假设我在 b1 actionperformed 代码中有“b2.doClick()”变成“b4.doClick” ()' 在我复制面板时执行 b3 ActionPerformed 吗？我正在使用 netbeans（如果这有帮助）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:57:37.067

获得`b1`和`b3`做同样事情的一种方法是让每个人都采取同样的[行动](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)。

```
JButton b1 = new JButton(new SomeAction());
JButton b3 = new JButton(new SomeAction());

class SomeAction extends AbstractAction {
    public void actionPerformed(ActionEvent e) {
        // do something
        // call some other action
    }
} 
```

# java - 从 web.xml 文件（CDATA 项）中删除“错误”标记

> ID：12384237
> 
> 赞同：2
> 
> 时间：2012-09-12T08:39:20.423
> 
> 标签：java, xml, eclipse, xsd, web.xml

我从 LDAP 获取用户角色名，其中一些之间有空格。

现在允许空格作为角色名`web.xml`，所以谷歌告诉我使用`CDATA`.

```
<security-role>
  <role-name><![CDATA[GESMA Dispositivos Externos]]></role-name>
</security-role> 
```

它在服务器中工作正常，但 Eclipse 一直将`web.xml`文件标记为`error`. 错误是`Value is not a valid NMToken`。

虽然只是一种烦恼，但我发现这个标记非常分散注意力。我怎样才能摆脱它？

更新：显示错误的最小 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app id="WebApp_ID" version="3.0"
  xmlns="http://java.sun.com/xml/ns/javaee"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
  <security-role>
    <role-name>GESMA</role-name>
  </security-role>
  <security-role>
    <role-name><![CDATA[GESMA Dispositivos Externos]]></role-name> <!-- Error HERE -->
  </security-role>
  <security-role>
    <role-name><![CDATA[GESMA Hospital General]]></role-name> <!-- Error HERE -->
  </security-role>
  <security-role>
    <role-name><![CDATA[GESMA Hospital Joan March]]></role-name> <!-- Error HERE -->
  </security-role>
  <security-role>
    <role-name><![CDATA[GESMA Hospital Psiquiatric]]></role-name> <!-- Error HERE -->
  </security-role>
  <security-role>
    <role-name>GESMAN_Manager</role-name>
  </security-role>
  <security-role>
    <role-name>GESMAN_Admin</role-name>
  </security-role>
</web-app> 
```

我的配置是：

*   适用于 Java EE 的 Eclipse Indigo SR2
*   JBossTools 3.3.0
*   JBossAS 工具 2.3.0

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T17:47:21.940

所以。翻遍了Java EE的各种schema文件，发现类型`<role-name>`确实是xsd:token。这意味着您不能在其中使用空格，即使您使用 CDATA 部分。

CDATA 部分只是转义通常不允许在 XML 标记中使用的字符，例如`<`or `"`。但最终，您的空间仍然是一个空间，并且不允许在那里。服务器可能不会对此抱怨，一切都可以正常工作，但根据规范（XML 模式），您的文件无效。

所以我强烈建议你通过用下划线或其他东西替换空格来解决这个问题，不要只是关闭 Eclipse。因为另一台服务器甚至只是一个较新的版本可能不再接受您的 web.xml。

（但当然有一些方法可以阻止 Eclipse 验证文件，如果你愿意，我可以在这里发布其中的一些。）

* * *

**编辑：以下是**[web.xml Schema 文件](http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd)中包含的[Schema 文件](http://java.sun.com/xml/ns/javaee/javaee_6.xsd)的相关部分。我认为这是您可以找到的所有“文档”。

```
 <xsd:complexType name="role-nameType">
    <xsd:annotation>
      <xsd:documentation>
        The role-nameType designates the name of a security role.
        The name must conform to the lexical rules for a token.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:simpleContent>
      <xsd:restriction base="javaee:string"/>
    </xsd:simpleContent>
  </xsd:complexType> 
```

你看，它说角色名称必须符合令牌的规则，这意味着不允许有空格。

# ios - iOS 6 上的低功耗蓝牙；CBPeripheralManagerDelegate

> ID：12384238
> 
> 赞同：1
> 
> 时间：2012-09-12T08:39:31.737
> 
> 标签：ios, ios6, core-bluetooth, bluetooth-lowenergy

我开始知道 iOS 6 可以做一个广播器。即`CBPeripheralManagerDelegate`。

我在哪里可以找到`CBPeripheralManagerDelegate`? 的参考文档，我在 Apple 的网站上没有看到。这是否意味着它仍在开发中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T23:19:35.203

不幸的是 CBPeripheralManager 它还没有出现在 Apple 的官方文档中，但是可以使用该框架，您可以直接从 XCode 中的 CoreBluetooth.framework 头文件中阅读详细的 CBPeripheralManager 注释。

如果您想以一种简单的方式将 iOS 用作外围设备，我建议您查看应用程序[LightBlue 。](http://blog.punchthrough.com/post/34242179806/simulate-ble-peripherals-with-lightblue-1-2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T15:14:57.057

请注意，iOS 6 中似乎存在与 BLE UUID 生成有关的错误。它一直在影响包括我自己在内的几个开发人员。

[http://e2e.ti.com/support/low_power_rf/f/538/t/216046.aspx](http://e2e.ti.com/support/low_power_rf/f/538/t/216046.aspx)

# jquery - 在 MVC 中从 Jquery 将数据加载到表中

> ID：12384239
> 
> 赞同：2
> 
> 时间：2012-09-12T08:39:33.817
> 
> 标签：jquery, json, asp.net-mvc-3, razor

我从控制器返回了这个 Json：

```
 public ActionResult VerifyApp(string recurrence)
        {
            List<foo> item = schedulingProxy.CheckApp(recurrence);

            return Json(item, JsonRequestBehavior.AllowGet);
        } 
```

我认为这张表是：

```
<div class="table">
                <table id="thids" class="bg">
                    <thead>
                        <tr>
                            <th>
                                Date
                            </th>
                            <th>
                                Time
                            </th>
                            <th>
                                Slot
                            </th>
                            <th>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in conflictList)
                        {
                            <tr id="@item.ID">
                                <td>   
                                  @Html.DisplayFor(modelItem => item.ResourceFName)                             
                                </td>
                                <td>
                                  @Html.DisplayFor(modelItem => item.ResourceLName)
                                </td>
                                <td>
                                  @Html.DisplayFor(modelItem => item.ResourceSlot)
                                </td>
                                <td>
                                  @Html.DisplayFor(modelItem => item.reason)
                                </td>
                            </tr>                                 
                        }
                    </tbody>
                </table> 
```

我还在视图顶部添加了这个：

```
@{
    var conflictList =new List<Mavi.Domain.Model.contactThread>();
} 
```

我在我的 Jquery 中有这个 Axaj 调用：

```
function ChkAvailable() {

        pairString = pairString + newObj.ToString() + "]";
        var requrl = '@Url.Action("VerifyAppointment", "Scheduling", null, Request.Url.Scheme, null)';
        $.ajax({
            type: "POST",
            url: requrl,
            data: { recurrence: pairString },
            success: function (data) {
               //returned List<foo>
            }
        });
    } 
```

如何将返回的 JSon 对象中的值添加到冲突列表中？或者更好..我怎样才能填充我的表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:04:16.297

如果我理解正确，您只需将新的 html 内容附加到您的表格中，如下所示：

```
...
success: function (data) {
   for(var el in data)
   {
     $("#thids").find("tbody")
        .append($("<tr>").append($("<td>").text(el.ResourceFName))/*and so on*/);
   }               
}
... 
```

# sql - 带有两个参数的sql函数。从 VB .NET 调用

> ID：12384241
> 
> 赞同：0
> 
> 时间：2012-09-12T08:39:38.417
> 
> 标签：sql, vb.net, function, ado.net

我写了一个 sql 函数，它返回一个标量：如果密码正确则为 1，否则为 0。

```
 CREATE FUNCTION check_credential(  @User_IN nvarchar(50),  @Pwd_IN nvarchar(50)) 
   RETURNS int
   AS
   BEGIN
   DECLARE @PwdRES int
   DECLARE @PWD_DB varbinary(255)

   IF (@User_IN is not null and @User_IN != '' and @Pwd_IN is not null and @Pwd_IN != '' )
begin
    SELECT  @PWD_DB = password FROM myTable WHERE username = @User_IN
    SET @PwdRES = pwdcompare(@Pwd_IN, @PWD_DB )
end
ELSE
    SET @PwdRES = 0

   RETURN @PwdRES
   END 
```

这可以正常工作。

我正在使用以下代码调用 sql 函数：

```
 Dim conn As SqlConnection
    Dim sqlcmd As SqlCommand
    Dim da As SqlClient.SqlDataAdapter
    Dim table As DataTable
    Dim Result As Integer

    conn = New SqlConnection(ConnectionString)

    sqlcmd = New SqlClient.SqlCommand()
    sqlcmd.Connection = conn
    conn.Open()

    sqlcmd.CommandType = CommandType.StoredProcedure
    sqlcmd.CommandText = "check_credential"

    sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@username", Utilities.NothingToDBNull(user)))
    sqlcmd.Parameters.Add(New SqlClient.SqlParameter("@password", Utilities.NothingToDBNull(password))) 
```

此时我想执行 sqlcmd 并获取返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:44:04.307

A`function`与 a 不同`stored procedure`

将您的函数转换为存储过程或将您的命令更改为

```
"select dbo.check_credential(@username, @password)" 
```

将 CommandType 设置为`Text`并使用`ExecuteScalar`

```
Result = Convert.ToInt32(cmd.ExecuteScalar()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:46:45.333

使@PwdRES 成为[输出](http://msdn.microsoft.com/en-us/library/ms378108%28v=sql.90%29.aspx)参数。还要在代码中将参数声明为输出，然后它将包含命令执行后从函数返回的值：

```
sqlcmd.Parameters.Add("@PwdRES ", SqlDbType.Int)
sqlcmd.Parameters("@PwdRES ").Direction = ParameterDirection.Output) 
```

我认为您需要将您的函数转换为存储过程（或添加调用该函数的存储过程）才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:45:41.413

在这种情况下，您需要定义一个`output`参数。

在 SQL 函数中：

```
@Value int output,   // Define it in the Parameters 
```

在此参数中获取您的计算值说

```
@value = 0 
```

现在在 C# 代码中：

```
SqlParameter user = cmd.Parameters.Add("@value", SqlDbType.int);
user.Direction = ParameterDirection.Output; 
```

在这里你可以检查用户是0还是1

# jquery - 通过变量将系列参数传递给 jqPlot

> ID：12384242
> 
> 赞同：0
> 
> 时间：2012-09-12T08:39:38.913
> 
> 标签：jquery, parameters, jqplot

必须绘制具有不同数量的线的图形，我试图通过变量传递系列参数，但 jqPlot 不知何故不考虑它们并继续显示线宽、颜色和标签的默认值。这是我尝试过的最简单的版本（单行）：

```
var seriesOptions = {lineWidth: 1, color: "#FF0000", label: "Call"};

var plotOptions = { 
    title: {
           text: data['stratResult'][0] + '<br /><span class="subtitle">Results</span>'
    }, 
    seriesDefaults: {
        showMarker: false
        }
    axes: {
        yaxis: {
            label: '<span class="label">Result</span>'
    }, 
                                                xaxis: {
        label: '<span class="label">Price</span>'
    }
    },
    markerOptions: { 
        show: false,
        size: 0     
    },
    series: seriesOptions,
legend: {
    show: true
    }
};

$j.jqplot('plotDiv', 
    $j.parseJSON(data['stratResult'][1]), 
    plotOptions
); 
```

所有其他选项都运行良好，但通过 seriesOptions 变量传递的选项无效。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:58:28.710

```
var seriesOptions = '{lineWidth: 1, color: "#FF0000", label: "Call"}'; 
```

**seriesOptions** must be an object, not a string, so just remove the ' '.

Also try this:

```
var plotOptions = { 
    title: {
           text: data['stratResult'][0] + '<br /><span class="subtitle">Results</span>'
    }, 
    seriesDefaults: {
        showMarker: false
        lineWidth: 1, 
        color: "#FF0000", 
        label: "Call"
    } 
```

Try to place the **seriesOptions** inside the **seriesDefaults** object.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T07:50:35.530

最近我遇到了类似的问题。我必须将系列标签的名称作为变量传递。我能够通过像这样编写 seriesoptions 变量来解决它

var seriesOptions = [{label: lab[0]},{label: lab[1]},{label: lab[2]},{label: lab[3]}];

希望能帮助到你

# java - 如何使用 java 调用 MSSQL 存储过程

> ID：12384244
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:39:50.110
> 
> 标签：java, sql-server

我有几个需要澄清的疑问。请帮我度过难关

我的 MSSQL Server 中有一个存储过程，我需要从 java 调用它，据我所知，我需要执行这些步骤来调用该过程

1.  连接到数据库（存储过程的确切位置）
2.  使用 callablestatement 调用过程 `CallableStatement cstmt = con.prepareCall("{call getEmployeeDetails(?, ?)}");`

知道的请给我一些关于如何使用 callablestatement 以及如何使用 java 将参数传递给程序的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T08:34:01.990

/*After Establishing the connection to MSSQL database, here goes the code how to call a stored procedure*/

```
 Connection conn;
 CallableStatement stmt = conn.prepareCall("{call dbo.usp_scr_getAllFiles()}");
 stmt = conn.prepareCall("{call dbo.usp_scr_startLoading()}");   
 stmt.close();
 conn.close(); 
```

/*In the above code i called two stored procedures*/

# java - 排序两个不等列表问题

> ID：12384246
> 
> 赞同：0
> 
> 时间：2012-09-12T08:39:55.200
> 
> 标签：java, sorting, collections, arraylist

我们如何对两个大小不等的列表以及 pojo 类字段没有实现 equals/hashcode 方法的位置进行排序。我无法根据 list1 顺序对列表进行排序。我希望列表中发生的顺序有“t”然后“ s"。是否有可能实现这种情况？

```
Field f=new Field();
f.setKey("s");
f.setValue("he");

Field f1=new Field();
f1.setKey("t");
f1.setValue("she");

List<Field> list = new ArrayList<Field>();
list.add(f);
list.add(f1);

Field f2=new Field();
f2.setKey("t");
f2.setValue("he");

Field f3=new Field();
f3.setKey("s");
f3.setValue("she");

Field f4=new Field();
f4.setKey("u");
f4.setValue("she");

List<Field> list1 = new ArrayList<Field>();
list1.add(f2);
list1.add(f3);
list1.add(f4); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:44:34.697

您可以使用`Collections.sort(list, new Comparator<Field>() { /* ... */ });`

见[Javadoc](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:47:06.877

没有内置方法可以实现您想要的，但是您可以`Collections.sort`通过提供自己的比较器轻松地做到这一点：

```
Collections.sort(list, new Comparator<Field>() {
    @Override
    public int compare(Field f1, Field f2) {
        // compare your fields here and
        //     return -1 if f2 should be before f2
        //     return 0 if they are the same
        //     return 1 if f1 should be after f2

        return ...;
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:04:25.657

试试这样的东西：

```
import java.util.HashMap; 
import java.util.Map.Entry; 
public class HashMapComparison 
{     
 public static void main(String[] args) 
 {        
 HashMap<Integer, String> map1 = new HashMap<Integer, String>();   
 map1.put("s", "he");     
 map1.put("t", "she");    
 HashMap<Integer, String> map2 = new HashMap<Integer, String>();  
 map2.put("t", "he");     
 map2.put("s", "she");  
 map2.put("u", "she"); 
 HashMap<Integer, String> orderedMap1 = new HashMap<Integer, String>();  
 for (Entry<Integer, String> entry : map2.entrySet()) {      
 Integer key = entry.getKey();        
 for(Entry<Integer, String> entry : map1.entrySet()){
 if(key.equals(entry.getKey()){
   orderedMap1.put(entry);
 }
 }
 }     
 } 
```

# sharepoint - 尝试激活功能时，值不在预期范围内异常

> ID：12384271
> 
> 赞同：0
> 
> 时间：2012-09-12T08:41:27.833
> 
> 标签：sharepoint

您好我正在尝试将 SharePoint 2010 中的导航文件夹内容类型开发为 xml 格式。我严格遵守微软的规则。即使我在尝试激活该功能时得到“值不属于预期范围异常”。这是我使用的 xml 片段。

```
<ContentType ID=" 0x012000D53406347378474294E656BB5275621F" Name="Navigation Folder" Group="Navigation ContentTypes" Description="IHS Navigation">
 <FieldRefs>
<FieldRef ID="{D3573D2A-7800-4B42-8A30-F59F85CFD1F8}" Name="ItemOrder" DisplayName="Item Order" Required="TRUE"/>
<FieldRef ID="{BBC9EB6E-A11C-46CC-80D3-28ECAADE06CB}" Name="OpenNewWindow" DisplayName="Open New Window" Required="FALSE"/>
<FieldRef ID="{D5978346-B494-4E94-823E-C40EE6919630}" Name="UrlAudience" DisplayName="Url Audience" Required="FALSE"/>
<FieldRef ID="{47263346-C54D-4055-811B-67755F2B2837}" Name="UrlDescription" DisplayName="Url Description" Required="FALSE" />
<FieldRef ID="{1795B452-70BA-4FAC-A781-4EB593A0954C}" Name="UrlLink" Required="FALSE"/>--> 
</FieldRefs>
</ContentType> 
```

站点列已激活，列 ID 与此相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:05:04.457

尝试删除内容类型定义的 ID 中的空格。

# perl - 为什么 Excel::Writer::XLSX 中的条形图填充不起作用？

> ID：12384272
> 
> 赞同：2
> 
> 时间：2012-09-12T08:41:29.217
> 
> 标签：perl, xlsx, spreadsheet-excel-writer

我创建了一个包含堆叠条形图的 Excel 表。现在我想在第一个栏中没有颜色，但它仍然是蓝色的。代码如下所示：

```
$chart->add_series(
    categories    => [ 'Sheet1', 1, $counter, 0, 0 ],
    values        => [ 'Sheet1', 1, $counter, 3, 3 ],
    name          => 'Waiting_time',
    fill          => { none => 1 },
    border        => { none => 1 },
); 
```

我使用 0.5 版的[Excel::Writer::XLSX](https://metacpan.org/module/Excel%3a%3aWriter%3a%3aXLSX)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:48:43.473

所以，把我相当冗长的评论变成一个答案。

## Excel::Writer::XLSX 中似乎缺少某些内容。

如果您在 Excel 的图表属性窗口中查看您的 XLSX 文件，您会注意到填充颜色为“蓝色”，但边框设置为“无”。这很好，但是您没有注意到它，因为您看不到边框丢失或者它是否与填充颜色相同。

无论如何，填充似乎不起作用。我检查了 Excel::Writer::XLSX 生成的 XLSX 存档中的 chart.xml，并将其与我在 Excel 中将其更改为“无填充”并保存的文件进行了比较。Excel 创建了很多开销，但归结为：

```
<!-- Perl -->
<c:spPr>
  <a:solidFill></a:solidFill>
  <a:ln>
    <a:noFill />
  </a:ln>
</c:spPr>

<!-- after Excel -->
<c:spPr>
  <a:noFill/>
  <a:ln>
    <a:noFill/>
  </a:ln>
</c:spPr> 
```

我们可以清楚地看到应该有一个`noFill`元素。

现在如果我们看一下[Excel::Writer::XLSX::Chart](https://metacpan.org/source/JMCNAMARA/Excel-Writer-XLSX-0.50/lib/Excel/Writer/XLSX/Chart.pm)中的代码，有一个方法叫做`_write_sp_pr`. 这使图表变得有意义。它依次调用两种方法，一种用于线条，一种用于填充。

```
# Write the a:solidFill element for solid charts such as pie and bar.
if ( $series->{_fill}->{_defined} ) {
    $self->_write_a_solid_fill( $series->{_fill} );
}

# Write the a:ln element.
if ( $series->{_line}->{_defined} ) {
    $self->_write_a_ln( $series->{_line} );
} 
```

第二个，`_write_a_ln`，负责`none => 1`：

```
sub _write_a_ln {
    # [...]

    # Write the line fill.
    if ( $line->{none} ) {

        # Write the a:noFill element.
        $self->_write_a_no_fill();
    }

    # [...]
} 
```

这很棒。所以没有线。但是填充颜色的检查在哪里？

```
sub _write_a_solid_fill {

    my $self = shift;
    my $line = shift;

    $self->{_writer}->startTag( 'a:solidFill' );

    if ( $line->{color} ) {

        my $color = $self->_get_color( $line->{color} );

        # Write the a:srgbClr element.
        $self->_write_a_srgb_clr( $color );
    }

    $self->{_writer}->endTag( 'a:solidFill' );
} 
```

事实证明，没有。如果没有设置颜色，则省略。但这会导致 Excel 使用默认颜色，它必须是蓝色。

* * *

要为您解决此问题，请尝试以下[monkeypatch](http://en.wikipedia.org/wiki/Monkey_patch)。将这些内容添加到创建带有图表的 XLSX 文件的程序的顶部。它会处理不填充的问题。它是`_write_sp_pr`原始模块代码的完整子代码，并混合了一些附加逻辑。

```
use Excel::Writer::XLSX;
{
  no warnings 'redefine';
  sub Excel::Writer::XLSX::Chart::_write_sp_pr {

      my $self   = shift;
      my $series = shift;

      if ( !$series->{_line}->{_defined} and !$series->{_fill}->{_defined} ) {
          return;
      }

      $self->{_writer}->startTag( 'c:spPr' );

      # Write the a:solidFill element for solid charts such as pie and bar.
      if ( $series->{_fill}->{_defined} ) {
          # Check if a noFill element is needed
          if ( $series->{_fill}->{none} ) {
              # Write the a:noFill element.
              $self->_write_a_no_fill();
          } else {
              # Write the line fill.
              $self->_write_a_solid_fill( $series->{_fill} );
          }
      }

      # Write the a:ln element.
      if ( $series->{_line}->{_defined} ) {
          $self->_write_a_ln( $series->{_line} );
      }

      $self->{_writer}->endTag( 'c:spPr' );
  }
} 
```

这里有更多代码可以快速尝试：

```
use strict; use warnings;
#### put above code here 

# Create a new Excel workbook
my $workbook = Excel::Writer::XLSX->new( 'perl.xlsx' );

# Add a worksheet
my $worksheet = $workbook->add_worksheet();
foreach my $row (0 .. 9) {
  foreach my $col (0 .. 4) {
    $worksheet->write($row, $col, $row+1);
  }
}

my $chart = $workbook->add_chart( type => 'bar' );
$chart->add_series(
    categories    => [ 'Sheet1', 1, 5, 0, 0 ],
    values        => [ 'Sheet1', 1, 5, 3, 3 ],
    name          => 'Waiting_time',
    fill          => { none => 1 },
    border        => { color => 'red' },
); 
```

当然，这只是一个快速而肮脏的解决方案。我建议为该模块编写一个错误报告，并将此问题/答案用作作者的参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T23:06:49.283

正如@simbabque 所说，这是一个错误。

我已经在 Github 的 master 分支上修复了它（[commit f4e4191e](https://github.com/jmcnamara/excel-writer-xlsx/commit/f4e4191e86422a00135280ee26a9e4d3f5744671)）。

它计划在未来 2 周内发布 0.51 版本。

**更新**：在 Excel::Writer::XLSX 的 0.51 版中已修复。

# scala - 如何使用 play2 + scala 在 cloudbees 上运行我的 webapp？

> ID：12384275
> 
> 赞同：3
> 
> 时间：2012-09-12T08:41:36.183
> 
> 标签：scala, playframework-2.0, cloudbees

我正在尝试在 cloudbees 平台上启动一个带有 play2 (2.0.2) 和 scala (2.9.2) 的 webapp。为了进行测试，我使用默认的 scala webapp（由 play2 生成）并尝试将其放在 cloudbees 上。我按照教程：[http ://wiki.cloudbees.com/bin/view/RUN/Play+2.0](http://wiki.cloudbees.com/bin/view/RUN/Play+2.0)

我注意到的第一件事是在 cloudbees 存储库中找不到 play2-war-plugin 的 0.3.2 版本。事实上，而不是搜索

> 存储库-play-war.forge.cloudbees.com/release/com/github/play2war/play2-war-plugin_2.9.1_0.11.2/

（在那里你可以找到正确的版本），sbt search in

> 存储库-play-war.forge.cloudbees.com/release/com/github/play2war/play2-war-plugin_2.9.1_0.11.3/

所以我将版本更改为 0.7.3 play-war-plugin 和 0.6 play-war-core 链接到我的 play2 版本（根据 play-war-plugin github 文档的文档）。

之后我尝试`play war`并得到

> [错误] 不是有效命令：war（类似：启动、运行）
> 
> [错误] 不是有效的项目 ID：war
> 
> [错误] 不是有效的配置：战争
> 
> [错误] Not a valid key: war (类似: watch, run, target)
> 
> [错误] 战争
> 
> [错误] ^

所以我使用`play package`, 它可以在目标目录中生成 app-1.0-Snapshot.war 。然后我使用 cloudbees sdk 运行我的应用程序

```
bees app:deploy -a myDomain/test -t jboss target/app-1.0-Snapshot.war
bees app:update myDomain/test disableProxyBuffering=true 
```

最后，我在 test.mydomain.cloudbees.net 上访问我的应用程序

这里的问题，我有一个错误：

> 糟糕，发生错误
> 
> 此异常已使用 id 6bjlb33p7 记录。

所以我在cloudbees界面检查了我的日志文件，但没有错误消息。我可以在“访问”选项卡中看到请求。

有什么我想念的吗？我怎样才能使这个应用程序工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T02:13:07.280

我已经更新了维基。自发布以来，WAR 插件发生了一些变化。

主要的事情是，将 sbt 插件更新到 0.7.3 并修改你的 Build.scala 文件看起来更像下面。

```
val appVersion      = "1.0-SNAPSHOT"

val projectSettings = Play2WarPlugin.play2WarSettings ++ Seq(
  // Your settings
)

...

val main = PlayProject(
   appName, appVersion, appDependencies, mainLang = JAVA
).settings(projectSettings: _*) 
```

最后，命令从“玩战争”变成了“玩包”

[您可以在https://github.com/dlecan/play2-war-plugin](https://github.com/dlecan/play2-war-plugin)阅读此插件的官方操作指南

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T09:52:31.927

我们现在支持原生部署到 RUN@cloud。如果您愿意，可以按照[http://wiki.cloudbees.com/bin/view/RUN/Playframework#HDeployingaPlay2application中的说明进行操作。](http://wiki.cloudbees.com/bin/view/RUN/Playframework#HDeployingaPlay2application)

# oauth - 通过 GMail XOAUTH 的 IMAP“无效凭据”错误

> ID：12384277
> 
> 赞同：4
> 
> 时间：2012-09-12T08:41:41.523
> 
> 标签：oauth, gmail, imap, gmail-imap

我在我的应用程序中使用带有（已弃用）OAuth 1.0 的 Gmail IMAP API。实际上，我有数百名用户在使用同一个应用程序，并且他们中的大多数人都在毫无问题地使用这些服务。但是，有些帐户在尝试连接时不断收到“无效凭据”错误。问题不一定会立即出现，很多情况下问题会在一段时间后出现。我强烈认为这与不正确的令牌无关，因为令牌已多次重新生成。他们还与其他帐户共享相同的代码库，我想它也应该适用于他们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T00:32:29.767

您的问题可能与您的用户与 Gmail 的打开连接过多有关 - 在他们开始抱怨之前最多允许十个。

[http://support.google.com/mail/bin/answer.py?hl=en&answer=97150](http://support.google.com/mail/bin/answer.py?hl=en&answer=97150)

> Gmail 目前限制每个帐户同时连接 10 个 IMAP。

# c++ - “额外的 ';' " Xcode C++ 项目中的编译错误

> ID：12384280
> 
> 赞同：1
> 
> 时间：2012-09-12T08:41:50.377
> 
> 标签：c++, xcode, gcc, xcode3.2

我有一个从 CMake 脚本生成的 C++ Xcode 3 项目。它使用了一些以前一直有效的开源头文件，但是在这个项目中，`Extra ';'`当尾括号有一个不必要的分号时，我得到一个编译错误：

```
if(...)
{
...
}; 
```

是否有一些编译器选项使尾随分号成为错误，我可以将其关闭？

这是一个有问题的文件，见第 259 行：http: [//zziplib.svn.sourceforge.net/viewvc/zziplib/trunk/zzip-0/zzip/zzip.h ?revision=523&view=markup](http://zziplib.svn.sourceforge.net/viewvc/zziplib/trunk/zzip-0/zzip/zzip.h?revision=523&view=markup)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T08:45:37.643

分号警告来自`-pedantic`(or `-pedantic-errors`) 选项；我认为您不能单独禁用它。

我建议删除分号而不是警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T09:47:28.167

您向我们展示的示例代码中的额外分号：

```
if(...)
{
...
}; 
```

完全合法；这是一个空语句。

您得到的错误实际上是关于`extern "C"`. 以下内容出现在`zziplib`库中的三个源文件中：

```
#ifdef __cplusplus
extern "C" {
#endif

...

#ifdef __cplusplus
};
#endif 
```

这实际上是一个语法错误。一些编译器可能不会抱怨它，或者可能只是发出警告，但这`g++ -pedantic-errors`是一个致命错误。

我向 的维护者报告了这个问题`zziplib`，我刚刚得到了回复：

```
Thanks for pointing to the problem, fixed in r524 now. I will
probably roll a public release next month (still need to check
the win32 version).

best regards, Guido Draheim

ChangeLog:

2012-09-15  guidod  <guidod@gmx.de>
    * zzip.h, plugin.h: "};" at end of extern-C produces build errors with
       the default --pedantic-errors on newer CMake. Thanks to Keith Thompson
       recognizing it - see http://stackoverflow.com/questions/12384280/ 
```

# excel - 使用函数在 Excel 中的字符串中搜索多个字符串（在命名范围的后续行中）

> ID：12384283
> 
> 赞同：0
> 
> 时间：2012-09-12T08:41:53.140
> 
> 标签：excel, search

我有一长串记录，需要一个标志，每条记录是否一列包含值列表之一。

```
A          B                C
ID   |    REF     |     DESCRIPTION     |   
1    |  DFGF7F    | a long text string  |
2    |  8DFGFG    | a long text string  |
3    |  SDIUFD    | a long text string  |
4    |  DF7G7F    | a long text string  |
5    |  F7G78F    | a long text string  | 
```

别处：

```
REF STRINGS
A123
B234
C345 
```

如果在 C 列中找到 REF STRINGS 之一，我需要为 D 列中的每条记录创建一个返回 1 / 0 的公式？

我在 [ [Excel：使用数组公式搜索特定字符串中的字符串列表？](https://stackoverflow.com/questions/8313919/excel-search-for-a-list-of-strings-within-a-particular-string-using-array-formu)] 但它只在一行上工作，并没有做我想要的（它返回一个 REF STRINGS 的字符串），而且我不明白函数是如何崩溃的，所以无法调整它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:58:50.460

See if this formula works for you:

```
=IF(ISERROR(FIND(B1,C1,1)),0,1) 
```

where the 0 means false and the 1 means true at the end of the formula. This checks to see if the content in B1 is in C1.

Hope this helps.

# iphone - 如何在目标 C 中缓存会话的数据

> ID：12384287
> 
> 赞同：2
> 
> 时间：2012-09-12T08:42:05.263
> 
> 标签：iphone, objective-c, ios, caching, optimization

我在我的 iOS 应用程序中使用了一些 REST Webservice 调用，作为响应，我得到了 pdf、ppt、.mp4 等文档列表，并且在选择时我从服务器获取相应的数据并将其呈现在屏幕上。

1.  现在，当用户选择一个特定文件时，比如说一个 .pdf 文档，然后当他回来并选择同一个文件时，我再次进行服务调用。（我想避免这种情况）。
2.  因为每次我想缓存一个文件时，它会花费更多的时间来加载，一旦点击了 DocumentsDirectory 或缓存中的某个地方，那么如果文件在我的缓存中，那么不要再次调用服务调用，只需从缓存中获取它&使成为。

那么实现这一目标的最佳方法是什么，或者我如何优化我的应用程序性能。提前感谢任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:52:36.140

我首先想到的是寻找 NSURL 类的现有类别/子类。例如，我使用这个类别来本地解密内容：[http](http://aptogo.co.uk/2010/07/protecting-resources/) ://aptogo.co.uk/2010/07/protecting-resources/ 。这样做的好处是缓存对用户来说是透明的，你只需使用扩展版本的 NSURL 类加载资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:49:06.207

您对 #2 的想法——将内容保存在缓存中——是一个很好的策略。一个非常好的库，可以让您使用简单的过期策略存储任意数据[`EGOCache`](https://github.com/enormego/EGOCache)，首次在[Enormego 的博客](http://developers.enormego.com/view/egocache_objective_c_image_string_data_caching)上宣布。

在您的情况下，您只需使用 RESTful URL 作为键，并在获取和保存之前检查缓存是否存在，如果它不存在。文档有点稀疏，但[头文件](https://github.com/enormego/EGOCache/blob/master/EGOCache.h)非常不言自明。祝你好运！

# visual-studio - 从命令行禁用 msvsmon 超时

> ID：12384288
> 
> 赞同：7
> 
> 时间：2012-09-12T08:42:05.760
> 
> 标签：visual-studio, visual-studio-2010, visual-studio-2013, remote-debugging

感谢 Visual Studio 2010 的 msvsmon 工具，我定期进行远程调试。我曾经在选项屏幕中将超时设置为零，因为我只想让工具继续运行，直到我完成它：

![在此处输入图像描述](../Images/3416f1931bc667a2a3f9962db9f2d5ef.png)

这很好用，但是我厌倦了每天都这样做，我正在尝试使用适当的命令行开关从脚本中执行此操作：

```
msvsmon.exe /timeout:0 
```

但没有雪茄：

![在此处输入图像描述](../Images/b24a746ceef1b0d8d8518d8085feec10.png)

我可以通过设置一个非常长的超时来解决这个问题，但我只是在检查：是否有适当的方法从命令行禁用此超时？或者也许使用注册表项？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T09:30:15.453

好吧，如果没有合适的方法，我想最好的办法就是使用允许的最大值，这似乎是有符号整数的最大值，减一：

```
msvsmon.exe /timeout:2147483646 
```

剩下68年多的远程调试，对我来说应该够了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T15:24:45.193

从这篇 kb 文章如下：[http://msdn.microsoft.com/en-us/library/bt727f1t(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/bt727f1t(v=vs.71).aspx)，使用 -timeout -1 应该防止连接在超时时中断；但是我没有机会亲自验证。

# javascript - Javascript字符串密码/加密和隐藏密钥

> ID：12384289
> 
> 赞同：1
> 
> 时间：2012-09-12T08:42:07.000
> 
> 标签：javascript, encryption

我正在开发一个离线 SPA 应用程序（它显然只使用本地文件），它具有我的主要数据、大量字符串，存储在与页面一起加载的 js 文件中。数据为 UTF8（高棉）。我正在寻找一种创建密码的方法，以便文本可以相对安全地存储在这个 js 文件的数组中。然后，我需要使用用户无法通过查看 js 源代码“破解”的算法即时解密字符串，即我需要隐藏算法。我知道这是一个广泛的问题，但是看到我正在离线工作，我无法使用 js 访问本地文件（可以很容易地加密）。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:52:26.687

使用您喜欢的任何密钥和算法加密数据。使用众多的混淆器之一来混淆你的 js 代码。

请注意，任何可以阅读 js 代码并可以运行美化脚本的人都将能够弄清楚您在做什么并自己提取数据，但这仅是您仅使用软件所能获得的。

如果您将密钥存储在异地（即您自己的服务器），而客户端在运行时请求并检索该密钥，则攻击者可能会遇到额外的障碍。攻击者可以使用数据包嗅探器轻松找到密钥并打开程序，但这是“安全性不值得我花时间”的额外步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:46:34.317

您不能隐藏密钥，但可以要求用户输入密码。从那里开始，您可以使用加密库来解密您的数据。例如：

*   [http://code.google.com/p/jscryptolib/](http://code.google.com/p/jscryptolib/)
*   [http://crypto.stanford.edu/sjcl/](http://crypto.stanford.edu/sjcl/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:01:33.113

[您可以使用javascriptobfuscator](http://www.javascriptobfuscator.com/default.aspx)或[this](http://www.stunnix.com/prod/jo/)之类的工具使您的代码不可读。

它不安全，但它会为您争取几分钟，直到攻击者对其进行解码。

# environment-variables - 在 applicationhost.config 中访问环境变量

> ID：12384290
> 
> 赞同：9
> 
> 时间：2012-09-12T08:42:09.590
> 
> 标签：environment-variables, iis-express

我有一个环境变量`MyLocation` 当我在 applicationhost.config 中设置此环境变量的虚拟目录物理路径时。我们到处都得到 404，这意味着变量设置不正确。

```
 <virtualDirectory path="/" physicalPath="%MyLocation%" /> 
```

我验证了变量存在。在机器和用户下尝试过。

我们的 applicationhost.config 包含在 TFS 中，这就是为什么我们要将位置设置为环境变量的原因。有人试过这个吗？有什么运气吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2020-06-04T14:19:44.590

它适用于我的 IIS Express 10.0.18362.1

# html - HTML 页面打印不正确

> ID：12384293
> 
> 赞同：1
> 
> 时间：2012-09-12T08:42:13.823
> 
> 标签：html

我正在此页面中间打印一个 javascript 日历，由于某种原因，当我运行此代码时，地址块打印在日历打印的表格上方。我需要在地址栏上方打印日历。提前感谢您的帮助

```
<body>
    <div id="head">
        <img style="float: right; border: 1px solid orange" src="photo.jpg" alt="" />
        <img src="ccc.jpg" alt="Chamberlain Civic Center" />
    </div>

   <div id="links">
       <table><tr>
           <td><a href="#">Home</a></td><td><a href="#">Tickets</a></td>
           <td><a href="#">Events</a></td><td><a href="#">Directions</a></td>
           <td><a href="#">Hours</a></td><td><a href="#">Calendar</a></td>
           <td><a href="#">Tour</a></td><td><a href="#">Contact Us</a></td>
       </tr></table>
   </div>

   <div id="main">
       <h1>Yearly Calendar</h1>
       <table id='yearly_table'>
       <tr>
           <th id='yearly_title' colspan='4'></th>
       </tr>
       <script type="text/javascript">
           yearly();
       </script>
   </div>

   <address>
   The Chamberlain Civic Center &nbsp;&#183;&nbsp;
   2011 Canyon Drive &nbsp;&#183;&nbsp;
   Chamberlain, SD 57325 &nbsp;&#183;&nbsp;
   (800) 555-8741
   </address>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:54:45.653

看起来你没有关闭表格标签，把它放在下面的`</script>`行：`</table>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:50:08.280

只需将地址添加到 div 标签。像这样。

```
<html>
<head>
</head>
<body>
  <div id="head">
      <img style="float: right; border: 1px solid orange" src="photo.jpg" alt="" />
      <img src="ccc.jpg" alt="Chamberlain Civic Center" />
  </div>

  <div id="links">
  <table>
    <tr>
     <td><a href="#">Home</a></td><td><a href="#">Tickets</a></td>
     <td><a href="#">Events</a></td><td><a href="#">Directions</a></td>
     <td><a href="#">Hours</a></td><td><a href="#">Calendar</a></td>
     <td><a href="#">Tour</a></td><td><a href="#">Contact Us</a></td>
    </tr>
  </table>
  </div>

  <div id="main">
   <h1>Yearly Calendar</h1>
        <table id='yearly_table'><tr>
        <th id='yearly_title' colspan='4'>

    </th>
    </tr>
   <script type="text/javascript">
  yearly();
  </script>
   </div>

  <div>
  <address>
  The Chamberlain Civic Center &nbsp;&#183;&nbsp;
  2011 Canyon Drive &nbsp;&#183;&nbsp;
  Chamberlain, SD 57325 &nbsp;&#183;&nbsp;
  (800) 555-8741
  </address>
  </div>

</body>
</html> 
```

# html - Websockets Client Does not Get Response

> ID：12384302
> 
> 赞同：1
> 
> 时间：2012-09-12T08:42:59.440
> 
> 标签：html, websocket

I am experimeting with web sockets.

I look at [http://www.websocket.org/echo.html](http://www.websocket.org/echo.html) site... They have simple echo demo for client [ under Creating your own test ] I copy that code...

```
<!DOCTYPE html>  
<meta charset="utf-8" /> 
<title>WebSocket Test</title>  
<script language="javascript" type="text/javascript">  

 var wsUri = "ws://echo.websocket.org/";
 var output;

 function init() 
 { 
  output = document.getElementById("output"); 
  testWebSocket(); 
 }

 function testWebSocket() 
 { 
  websocket = new WebSocket(wsUri); 
  websocket.onopen = function(evt) { onOpen(evt) }; 
  websocket.onclose = function(evt) { onClose(evt) }; 
  websocket.onmessage = function(evt) { onMessage(evt) }; 
  websocket.onerror = function(evt) { onError(evt) }; 
 }

 function onOpen(evt) 
 { 
     writeToScreen("CONNECTED"); 
     doSend("WebSocket rocks"); 
}

function onClose(evt) 
{ 
   writeToScreen("DISCONNECTED"); 
}
function onError(evt) 
{ 
    writeToScreen('<span style="color: red;">ERROR:</span> ' + evt.data); 
 }

 function doSend(message) 
 { 
      writeToScreen("SENT: " + message); 
      websocket.send(message); 
}

function writeToScreen(message) 
{ 
    var pre = document.createElement("p"); 
    pre.style.wordWrap = "break-word"; 
    pre.innerHTML = message; 
    output.appendChild(pre); 
}

window.addEventListener("load", init, false);

</script>  <h2>WebSocket Test</h2>  
<div id="output"></div> 

 </html> 
```

**It connects but can not able take response...**

> Should a client for websocket run under a websocket supported Server?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-30T02:18:19.893

I had a similar problem even with the OnMessage() included. I got CONNECTED, SENT, DISCONNECTED but no RESPONSE. The same happened using the jsfiddle.net example in the other Answer.

Changing the wsUri to use TLS ie: "wss://echo.websocket.org/" instead of "ws://echo.websocket.org/" fixed the problem. (Maybe it's due to some security setting in the browser.)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-12T08:55:12.567

you are missing a onMessage(evt) handler.

```
function onMessage(message){
   writeToScreen("GOT MESSAGE: " + message.data); 
} 
```

here is a working [example](http://jsfiddle.net/5dDDu/2/).

If you click the button it will open up a connection send a message and receives it back.

Note that only your **browser** needs support!

If you want to implement your own web-socket based service on a backend. You need a webserver that supports of cource..

# c# - 查询将 2 个 DataSet 合并为一个 Report

> ID：12384305
> 
> 赞同：0
> 
> 时间：2012-09-12T08:43:14.160
> 
> 标签：c#, windows, forms, reportviewer

我目前面临一个问题，即我只能将 1 个数据集与 1 个 report.rdlc 绑定。我在数据集中有 2 个数据表。有什么方法可以在单个报告中显示 2 个数据表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:11:30.283

AFAIK，没有使用 Crystal Reports 的选项。但是，有两种可能的方法可以解决此问题：-

1.  为这个报告创建一个自定义数据表，它结合了每个数据表中您需要的字段，并将这个新数据表绑定到这个报告

2.  创建嵌入报表的子报表，并将第二个数据表绑定到该子报表。

    ```
     report.SetDataSource(new[] { debitCreditMain });
        report.Subreports["details"].SetDataSource(debitCreditMain.DetailList); 
    ```

# c# - c#中的异步属性

> ID：12384309
> 
> 赞同：7
> 
> 时间：2012-09-12T08:43:38.673
> 
> 标签：c#, .net, asynchronous, async-await

在我的 Windows 8 应用程序中有一个*全局*类，其中有一些静态属性，例如：

```
public class EnvironmentEx
{
     public static User CurrentUser { get; set; }
     //and some other static properties

     //notice this one
     public static StorageFolder AppRootFolder
     {
         get
         {
              return KnownFolders.DocumentsLibrary                    
               .CreateFolderAsync("theApp", CreationCollisionOption.OpenIfExists)
               .GetResults();
         }
     }
} 
```

您可以看到我想在项目的其他地方使用应用程序根文件夹，因此我将其设为静态属性。在 getter 内部，我需要确保根文件夹存在，否则创建它。但这`CreateFolderAsync`是一个异步方法，这里我需要一个同步操作。我试过`GetResults()`了，但它抛出了一个`InvalidOperationException`. 什么是正确的实现？（package.appmanifest 配置正确，文件夹实际上是创建的。）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-12T12:45:54.723

我建议你使用[异步延迟初始化](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)。

```
public static readonly AsyncLazy<StorageFolder> AppRootFolder =
    new AsyncLazy<StorageFolder>(() =>
    {
      return KnownFolders.DocumentsLibrary                    
          .CreateFolderAsync("theApp", CreationCollisionOption.OpenIfExists)
          .AsTask();
    }); 
```

然后你可以`await`直接：

```
var rootFolder = await EnvironmentEx.AppRootFolder; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-12T08:46:54.613

**好的解决方案：** 不要制造财产。制作一个异步方法。

*“我讨厌等待，我怎样才能让一切都同步？”* 解决方案：[如何在 C# 中从同步方法调用异步方法？](https://stackoverflow.com/questions/9343594/how-to-call-asynchronous-method-from-synchronous-method-in-c)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-12T08:55:41.363

使用 await 关键字

```
 public async static StorageFolder GetAppRootFolder() 
 { 
          return await ApplicationData
                      .LocalFolder
                      .CreateFolderAsync("folderName");
 } 
```

在你的代码中

```
var myRootFolder = await StaticClass.GetAppRootFolder(); // this is a synchronous call as we are calling await immediately and will return the StorageFolder. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-13T13:22:18.457

这是一个想法。

```
public Task<int> Prop {
    get
    {
        Func<Task<int>> f = async () => 
        { 
            await Task.Delay(1000); return 0; 
        };
        return f();
    }
}

private async void Test() 
{
    await this.Prop;
} 
```

但它会为每个调用创建一个新的 Func 对象，这会做同样的事情

```
public Task<int> Prop {
    get
    {
        return Task.Delay(1000).ContinueWith((task)=>0);
    }
} 
```

您不能等待集合，因为`await a.Prop = 1;`不允许

# dll - 将字符串从 inno 传递给 dll 时无法在 dll 函数中获取值？

> ID：12384314
> 
> 赞同：1
> 
> 时间：2012-09-12T08:43:56.617
> 
> 标签：dll, inno-setup, param

我想将一个字符串传递给我的 dll 函数，但该函数无法获取该值。首先，我使用 GetMyParam 函数从 cmd 行获取字符串。是的。然后，我使用 innotest 函数将值传递给我的 dll。

```
function innotest(PName:string):Integer;
external 'innotest@E:\client\branch\maintain\1.4\bin\sdostate-debug\update.dll stdcall setuponly';

function GetMyParam(PName:string):string;
var
  CmdLine : String;
  CmdLineLen : Integer;
  i : Integer;
begin
    Result := '';
    CmdLineLen:=ParamCount();
    for i:=0 to CmdLineLen do
    begin
    CmdLine:=ParamStr(i);
    if CmdLine = PName then
      begin
          CmdLine:=ParamStr(i+1);
          Result := CmdLine;
          Exit;
      end;
    end;
end;

procedure CurStepChanged(CurStep: TSetupStep); 
var 
res: String;

begin
if (CurStep = ssPostInstall) and (Pos('setup', WizardSelectedTasks(false)) > 0)then
begin
res := GetMyParam('-myParam');
MsgBox(res, mbInformation, mb_Ok);
innotest(res);
end;
end; 
```

Msgbox 具有 res 值。这是我的 dll 代码：字符串的长度为 1。

```
DWORD Update::innotest(string str)
{
    LPCWSTR s = StringHelper::ANSIToUnicode(str).c_str();
    MessageBox(0,s,0,0);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:03:43.473

您`string`在函数参数中使用类型，内存中的字符序列是 InnoSetup 无法直接访问的。您必须使用指向字符串类型的指针才能使其工作。因此，当您使用 Unicode InnoSetup 时，请按以下方式更改库函数参数以具有 Unicode 字符串指针类型。然后你可以保持你的 InnoSetup 脚本原样：

```
DWORD Update::innotest(LPCWSTR str)
{
    MessageBox(0,s,0,0);
    return 0;
} 
```

# c# - 在导入 SQL Server 之前验证 CSV 文件

> ID：12384320
> 
> 赞同：2
> 
> 时间：2012-09-12T08:44:06.377
> 
> 标签：c#, sql-server, validation, parsing, csv

我知道围绕这个主题还有其他主题，但它们并不像我的需求那么具体（到目前为止我可以找到）。

我有 csv 文件可以导入到我管理的 SQL Server 数据库中。它们是由人类组合在一起的，因此可能会出现列过多、数据类型不正确、标题损坏等错误。

我有一个 Web 表单，可以从用户接收文件到服务器上的目录，然后它将一行作为字符串读取，逐个单元格地解析它，并执行诸如检查正确的单元格计数是否存在之类的事情，然后移至下一行.

现在来验证数据类型和范围，我不清楚最好的方法。对数字类型进行手动范围检查之类的操作似乎有点过时。

有没有更好的办法？一些东西;

1.  我有 SQL Server 类型，如“数字”，但也有 nvarchar。

2.  这些文件可以小到几千字节，也可以大到超过一千兆字节。

3.  我需要报告存在错误的每个特定行和列，而不仅仅是行 x 失败。

我想也许试图将单元格值转换/转换为预期的类型，捕获异常并将数据拆分为块并生成线程以并行进行检查？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:18:08.540

我建议使用批量复制。SSIS 要复杂得多且容易出错（在正常情况下也慢得多......）。

通常，您知道您期望哪些列，并且您想为具有正确格式的导入数据创建一个“导入阶段表”。如果它不符合 TSQL 中的最低要求（列数）（在 bulc 插入周围带有“try/catch”），您可以拒绝整个文件。

可以在初始导入后进行转换和类型检查。为此，在阶段表中使用正确格式的附加列可能很有用。例如，您可以导入到 nvarchar 列并转换为十进制值。这里的技巧是使用视图：在视图下方的示例中，“myImportTable_InsertView”仅从阶段表中选择导入的列（阶段表有更多用于类型检查的列）

```
 DECLARE @SQLString nvarchar(4000) =

    INSERT dbo.myImportTable_InsertView
    FROM ''' + @FullFilename + ''' WITH
    (
    FIELDTERMINATOR = '';'',
    ROWTERMINATOR = ''\n'',
    CODEPAGE= ''RAW''
    )'
    Exec (@SQLString) 
```

完成所有验证后，您只需将数据从阶段表复制到其最终目的地。

为了报告错误行，我通常在阶段表行上使用标志来标记不同类型的错误。

# maven - maven profile id如何使用var？

> ID：12384322
> 
> 赞同：2
> 
> 时间：2012-09-12T08:44:09.127
> 
> 标签：maven, maven-assembly-plugin

个人资料是：我使用 ${artifactId} 作为个人资料 ID。

```
 <profiles>
    <profile>
        <id>${artifactId}</id>
        <build>
            <plugins>
                <plugin>
                    <artifactId>maven-assembly-plugin</artifactId>
                    <version>2.3</version>
                    <configuration>
                        <descriptors>
                            <descriptor>distribution.xml</descriptor>
                        </descriptors>
                    </configuration>
                    <executions>
                        <execution>
                            <id>make-assembly</id>
                            <phase>package</phase>
                            <goals>
                                <goal>single</goal>
                            </goals>
                        </execution>
                    </executions>
                </plugin>
            </plugins>
        </build>
    </profile> 
```

在 shell 中运行 maven： `mvn -U -Dmaven.test.skip=true -f pom.xml -Pabc_test clean install`

然后我发现一个错误：

> [警告] 请求的配置文件“abc_test”无法激活，因为它不存在。结束

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T11:12:07.227

您必须在 pom.xml 中定义所有配置文件。

```
 <profiles>
        <profile>
            <id>dev</id>
                    <activation>
                        <activeByDefault>true</activeByDefault>
                    </activation>
                    <properties>
                        <war.name>dev</war.name>
                    </properties>
        </profile>
        <profile>
                    <id>prod</id>
                    <properties>
                        <war.name>prod</war.name>
                    </properties>
        </profile>
    </profiles> 
```

这里的配置文件名称是`dev`和`prod`。您可以`${war.name}`用作配置文件修改的变量。

# mysql - 当一个带有 Flask-SQLAlchemy 的 Flask 应用程序正在运行时，我如何在同一个数据库上同时使用 MySQL 客户端？

> ID：12384323
> 
> 赞同：5
> 
> 时间：2012-09-12T08:44:10.027
> 
> 标签：mysql, flask, flask-sqlalchemy

当我运行一个使用 Flask-SQLAlchemy 的 Flask 应用程序时，似乎 Flask-SQLAlchemy 正在举行一个会话，并且当我在 MySQL 客户端中发出 MySQL 命令（如 alter table add column）时，这些命令在我退出之前无法执行烧瓶应用程序。

有没有人有类似的经历？如何在不中断 Flask 应用程序的情况下在 MySQL 客户端上发出命令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T02:25:20.657

您可能想看看这个问题[SQL Alchemy 关系加载器在表上留下锁？](https://stackoverflow.com/questions/12014824/sql-alchemy-relationship-loader-leaves-a-lock-on-table)

您需要做的是子类[`flask.ext.sqlalchemy.SQLAlchemy`](http://packages.python.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.SQLAlchemy)化并覆盖该[`apply_driver_hacks`](http://packages.python.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.SQLAlchemy.apply_driver_hacks)方法以通过附加关键字参数[`isolation_level='READ <some level>'`](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html#transaction-isolation-level)：

```
from flask.ext.sqlalchemy import SQLAlchemy

class UnLockedAlchemy(SQLAlchemy):
    def apply_driver_hacks(self, app, info, options):
        if not "isolation_level" in options:
            options["isolation_level"] = "READ COMMITTED"  # For example
        return super(UnLockedAlchemy, self).apply_driver_hacks(app, info, options) 
```

# bash - 备份目录 + 使用 bash 重命名

> ID：12384325
> 
> 赞同：0
> 
> 时间：2012-09-12T08:44:24.293
> 
> 标签：bash, shell, backup, rename

我想通过将文件夹及其内容的副本放置到与要备份的文件夹位于同一目录中的文件夹中来备份文件夹及其内容。由于在备份目录中重新创建了文件夹，我想将下一个数字附加到文件夹名称。例如：

MainDirectory Contents: 文件夹重要文件夹备份文件夹其他

FolderImportant 永远不会是不同的名称。FolderImportant 及其内容需要复制到 FolderBackup 并在文件夹名称后附加数字 001（在第一次备份时），内容保持不变。

我浏览了论坛，发现了几个备份和重命名的例子，但是我对 bash 知之甚少，我不确定如何将所有内容放入一个多合一的脚本中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:04:01.867

看看[rsync](http://linux.die.net/man/1/rsync)，它是一个强大的工具，可以使用不同的策略进行备份。看看[这里](http://www.thegeekstuff.com/2010/09/rsync-command-examples/)的一些例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T01:04:25.267

在 bash 速成课程之后，我有了一个功能脚本。请评论是否可以做一些事情来改进这个脚本，因为我学习 bash 脚本的时间不到 6 小时。

```
#! /bin/bash

# The name of the folder the current backup will go into
backupFolderBaseName="ImportantFolder_"
# The number of the backup to be appended to the folder name
backupFolderNumber=0
# The destination the new backup folders will be placed in
destinationDirectory="/home/$LOGNAME/.hiddenFolder/projectFolder/backupFolder"
# The directory to be backed up by this script
sourceDirectory="/home/$LOGNAME/.hiddenFolder/projectFolder/ImportantFolder"

# backupDirectory()-------------------------------------------------------------------------------------
# Update folder number and copy source directory to destination directory
backupDirectory() {
cp -r $sourceDirectory "$destinationDirectory/$backupFolderBaseName`printf "%03d" $backupFolderNumber`"
echo "Backup complete."
} #End backupDirectory()--------------------------------------------------------------------------------

# Script begins here------------------------------------------------------------------------------------
if ! [ -d "$destinationDirectory" ];
then
    echo "Creating directory"
    mkdir "$destinationDirectory"
    if [ -d "$destinationDirectory" ];
    then
        echo "Backup directory created successfully, continuing backup process..."
        backupDirectory
    else
        echo "Failed to create directory"
    fi
else
echo "Existing backup directory found, continuing backup process..."
for currentFile in $destinationDirectory/*
    do
        tempNumber=$(echo $currentFile | tr -cd '[[:digit:]]' | sed -e 's/^0\{1,2\}//')
        if [ "$tempNumber" -gt "$backupFolderNumber" ];
        then
            backupFolderNumber=$tempNumber
        fi
    done
    let backupFolderNumber+=1
backupDirectory
fi #End Script here------------------------------------------------------------------------------------- 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:50:54.583

rsync 很棒...这是我对您的 bash 问题的回答

```
#!/bin/bash

dirToBackup=PATH_TO_DIR_TO_BACKUP

backupDest=BACKUP_DIR

pureDirName=${dirToBackup##*/}

for elem in $(seq 0 1000)
do
    newDirName=${backupDest}/${pureDirName}_${elem}
    if ! [ -d $newDirName ]
    then        
        cp -r $dirToBackup $newDirName
        exit 0
    fi
done 
```

# php - 使用 ajax 提交和验证码的 php 邮件简历和其他详细信息

> ID：12384327
> 
> 赞同：0
> 
> 时间：2012-09-12T08:44:25.557
> 
> 标签：php, ajax, email, captcha

我有一个带有验证码的表单，但它无法在 ajax 模式下提交，因为它在正常提交模式下可以正常工作。

```
<form action="#" name="MYFORM" id="MYFORM"> 
  <label>Name</label> 
  <input name="name" size="30" type="text" id="name"> <br clear="all" /> 
  <label>Email</label> <input name="email" size="30" type="text" id="email"> <br clear="all" /> 
    <div id="wrap" align="center"> 
      <img src="get_captcha.php" alt="" id="captcha" /> 
      <br clear="all" /> 
      <input name="code" type="text" id="code"> 
    </div> 
  <img src="refresh.jpg" width="25" alt="" id="refresh" /> 
  <br clear="all" /><br clear="all" /> 
  <label>&nbsp;</label> 
  <input value="Send" type="submit" id="Send"> 
</form> 
```

# asp.net - Ajax 自动完成滚动问题

> ID：12384328
> 
> 赞同：0
> 
> 时间：2012-09-12T08:44:29.253
> 
> 标签：asp.net, ajax, styling, autocompleteextender

在 ajax 网站上有一个关于 AutoComplete 的示例（有[链接](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)），它与滑块非常好。这是代码：

```
<ajaxToolkit:AutoCompleteExtender 
    runat="server" 
    ID="autoComplete1" 
    TargetControlID="myTextBox"
    ServiceMethod="GetCompletionList"
    ServicePath="AutoComplete.asmx"
    MinimumPrefixLength="2" 
    CompletionInterval="1000"
    EnableCaching="true"
    CompletionSetCount="20" 
    CompletionListCssClass="autocomplete_completionListElement" 
    CompletionListItemCssClass="autocomplete_listItem" 
    CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
    DelimiterCharacters=";, :"
    ShowOnlyCurrentWordInCompletionListItem="true">
        <Animations>
            <OnShow> ... </OnShow>
            <OnHide> ... </OnHide>
        </Animations>
</ajaxToolkit:AutoCompleteExtender> 
```

但是当我尝试使用它的代码时，我得到了这样的结果（没有滑块和糟糕的视图）

![我的问题](../Images/3894b005e26d907eb66f2b2d6d661d62.png)

我的代码中缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T12:32:16.493

根据您的需要，尝试在 Css 类中使用 Css Height、Min-Height 或 Max-Height。它将在您的列表右侧添加滚动条。宽度也可以用来控制宽度。

不要忘记设置溢出：自动；

# sql - 在 oracle 10G 中编写私有同义词的语法是什么？

> ID：12384331
> 
> 赞同：0
> 
> 时间：2012-09-12T08:44:34.980
> 
> 标签：sql, oracle, oracle10g

我正在使用以下语法在 oracle 10G 中创建表的私有同义词：

```
create private synonym <synonym name>
for <schema name>.<table name>; 
```

我收到此错误：

```
ERROR at line 1:
ORA-00905: missing keyword 
```

请用正确的语法指导我。我做了研究，但我发现只有公共同义词的语法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:48:04.240

只需省略`private`关键字。

从[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/statements_7001.htm)中：

```
CREATE [ OR REPLACE ] [ PUBLIC ] SYNONYM
   [ schema. ]synonym 
   FOR [ schema. ]object [ @ dblink ] ; 
```

> **PUBLIC**
> 如果省略此子句，则同义词是私有的，并且只能在其模式中访问。私有同义词名称在其架构中必须是唯一的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:48:20.450

这个对我有用：

```
create or replace synonym SCHEMA1.TABLE for SCHEMA2.TABLE; 
```

或为您的架构

```
create or replace synonym TABLE for SCHEMA2.TABLE; 
```

where `SCHEMA1.TABLE`or`TABLE`是同义词。

[这里](http://psoug.org/reference/synonyms.html)有很多例子。

# c# - 可以使用 C# 从数据库中删除空值吗？

> ID：12384332
> 
> 赞同：-5
> 
> 时间：2012-09-12T08:44:41.747
> 
> 标签：c#, c#-4.0

我们可以从表格列中删除空值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:03:25.523

像下面这样的东西会起作用

```
DELETE FROM Table 
WHERE ColumnName IS NULL;
GO 
```

C# 标签把我扔了。[`SqlCommand`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)您可以使用该类从 C# 执行此命令。

```
UPDATE Table 
SET ColumnName = 'DefaultValue' 
WHERE ColumnName IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:48:21.290

使用`SqlCommand`C# 类更新您的表。如下所示

```
 try
    {
        string yourSQL= "UPDATE YourTable SET ColumnName = 'YourDefaultValue' WHERE ColumnName IS NULL";

        SqlCommand UpdateCmd = new SqlCommand(yourSQL, YourConnection);
        UpdateCmd.ExecuteNonQuery();

    }
    catch (SqlException ex)
    {
        // Display error
    } 
```

# web-services - 从 Web 服务响应中提取 Http Content-length

> ID：12384333
> 
> 赞同：0
> 
> 时间：2012-09-12T08:44:45.260
> 
> 标签：web-services, http, soap, cxf

我想从响应中提取 HTTP 标头，更准确地说是响应的内容长度，以便在超出特定大小时引发异常。我已经尝试这样做两天了，但没有任何成功。我该怎么做？为此使用拦截器或处理程序是否更干净。

这是一个记录标题的处理程序，但它什么也不返回

```
public class HeaderHandler implements SOAPHandler<SOAPMessageContext> {

private final static Logger log = Logger.getLogger(HeaderHandler.class);
private PrintStream out;

public HeaderHandler() {
    setLogStream(System.out);
}

protected final void setLogStream(PrintStream ps) {
    out = ps;
}

public void init(Map c) {
    System.out.println("HeaderHandler : init() Called....");
}

public Set<QName> getHeaders() {
    return null;
}

public boolean handleMessage(SOAPMessageContext smc) {
    System.out.println("HeaderHandler : handleMessage Called....");
    logToSystemOut(smc);
    return true;
}

public boolean handleFault(SOAPMessageContext smc) {
    System.out.println("HeaderHandler : handleFault Called....");
    logToSystemOut(smc);
    return true;
}

// nothing to clean up
public void close(MessageContext messageContext) {
    System.out.println("HeaderHandler : close() Called....");
}

// nothing to clean up
public void destroy() {
    System.out.println("HeaderHandler : destroy() Called....");
}

/*
 * Check the MESSAGE_OUTBOUND_PROPERTY in the context
 * to see if this is an outgoing or incoming message.
 * Write a brief message to the print stream and
 * output the message. The writeTo() method can throw
 * SOAPException or IOException
 */
protected void logToSystemOut(SOAPMessageContext smc) {
    Boolean outboundProperty = (Boolean)
            smc.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    if (outboundProperty.booleanValue()) {
        out.println("\nOutbound message:");
    } else {
        out.println("\nInbound message:");
    }
    out.println("\n***********************************************************************************");
    final Object o = smc.get(MessageContext.HTTP_RESPONSE_HEADERS);
    if (o != null) {
        out.println(o);
    } else {
        out.println("o null");
    }
} 
```

}

# sql - Sql Sever 在另一个字符串中查找部分字符串

> ID：12384334
> 
> 赞同：2
> 
> 时间：2012-09-12T08:44:51.297
> 
> 标签：sql, sql-server

我有一张桌子

```
studentId        Classes
1               Auto CAD,Electronics
2               Instrumentation,Chemical,IT,English
3               Computer,Math,Hindi
4               Physics,Accountancy
5               Bengali,Geography 
```

现在我想使用单个字符串“Instrumentation,Geography,Physics”进行搜索

它将显示以下内容

```
studentId        Classes
2               Instrumentation,Chemical,IT,English
4               Physics,Accountancy
5               Bengali,Geography 
```

因为 studentid 2 包含 Instrumentation，studentid 4 包含 Physics 而 studentid 5 包含 Geography

我怎样才能使用`SELECT`语句来做到这一点？不像'%Instrumentation%'之类的类或'%Geography%'之类的类或'%Physics%'之类的类，因为我想使用单个变量来字符串“Instrumentation,Geography,Physics”或用逗号分隔的字符串的任何组合。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:46:58.470

尝试这个：

```
SELECT * 
FROM    your_Table
WHERE   ','+Classes+',' like '%,Instrumentation,%'
OR      ','+Classes+',' like '%,Geography,%'
OR      ','+Classes+',' like '%,Physics,%' 
```

我在列以及搜索条件中添加了一个逗号，以便它只返回以逗号结尾的字符串

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:48:34.890

您可以使用 T-SQL [Like](http://msdn.microsoft.com/en-us/library/ms179859.aspx)语句，但理想情况下您会规范化您的数据库，因为您实际上不应该在同一字段中有多个值 - 正是出于这个原因。

Like的*问题*在于它可能会匹配不需要的术语 - %physics% 的 Like 也会匹配“天文物理学”课程 - 这可能不是你想要的。

在乔的例子中——添加逗号会起作用（在这种情况下），但这段代码很脆弱（真的是一个黑客）——如果机会仍然存在，我的建议是正确[规范](http://en.wikipedia.org/wiki/Database_normalization)数据库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:17:58.190

您可以将搜索字符串解压缩到表变量中并在存在子句中使用。

```
declare @S varchar(500)
set @S = 'Instrumentation,Geography,Physics'

declare @T table(Class varchar(50))

while len(@S) > 0
begin
  insert into @T values(left(@S, charindex(',', @S+',')-1))
  set @S = stuff(@S, 1, charindex(',', @S+','), '')
end

select *
from YourTable as YT
where exists (
               select *
               from @T as T
               where ','+YT.Classes+',' like '%,'+T.Class+',%'
             ) 
```

[SQL小提琴](http://sqlfiddle.com/#!3/dd48d/1/0)

# java - 通过 ANT 部署到 Tomcat

> ID：12384340
> 
> 赞同：2
> 
> 时间：2012-09-12T08:45:18.673
> 
> 标签：java, tomcat, deployment, ant

我正在尝试像在此示例中那样部署 WAR [https://stackoverflow.com/a/4144674/758661](https://stackoverflow.com/a/4144674/758661)

```
DeployTask task = new DeployTask();
  task.setUrl("http://localhost:8080/manager/text");
  task.setUsername("tomcat");
  task.setPassword("s3cret");
  task.setPath("/updater");
  task.setWar(warFile.getAbsolutePath());
  task.execute(); 
```

但是得到一个 403 错误：

```
Server returned HTTP response code: 403 for URL: 
http://localhost:8080/manager/text/deploy?path=%2Fupdater 
```

我认为是因为“/”已被替换为“%2F”（密码和用户名就像在 tomcat-users.xml 中一样）

如何防止将“/”替换为“%2F”？还是有其他想法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:54:40.713

替换没有问题，参数被urlencoded是正常的。如果它没有被编码，服务器将无法接收它。

而“403”的意思是“禁止”。

我想这是因为你有一个奇怪的 URL。代替

```
task.setUrl("http://localhost:8080/manager/text"); 
```

经过

```
task.setUrl("http://localhost:8080/manager"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T13:24:54.953

我解决它。

在“服务器位置”中的 Eclipse 中 Tomcat 服务器概述（右键单击服务器 -> 打开）中，我必须选择“使用 Tomcat 安装”的 secons 单选按钮（默认情况下它设置为第一个“使用工作区元数据”。

因为在默认情况下，Tomcat 在没有这种情况下所需的管理器应用程序的情况下启动。

# ios - SQlite 字母顺序

> ID：12384343
> 
> 赞同：0
> 
> 时间：2012-09-12T08:45:20.983
> 
> 标签：ios, database, sqlite, alphabetical

我有一个包含几个类别的 SQlite 数据库，每个类别里面都有一些项目。现在这些类别按字母顺序排列，但我希望按照我将它们放入数据库的顺序排列。有什么建议么？我对此很陌生，无法弄清楚如何摆脱字母顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:21:32.077

您需要定义一个自动递增的索引。使用此索引对您的数据进行排序，然后您就设置好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:28:59.057

让我们看一个简单的例子：

表：类别

`cat_id cat_name someotherValues`

```
 1      A            XYZ
  3      B            UUI
  2      C            8XU
  4      F            6XK
  6      E            9XU
  5      D            7XP 
```

现在，如果你想按字母顺序排列，你可以像这样查询，

`select * from categories order by cat_id`

`cat_id`它会按 1,2,3,..,6 的顺序返回您的行。

PS 有一个`row_id`使用 SQLite 表创建的默认列。`row_id`如果您没有任何唯一字段来设置订单，您可以设置订单。但是可以在任何字段上设置订单。

# android - 如何在 Android 中的两个模拟器之间发送和接收消息？但工作不正常

> ID：12384344
> 
> 赞同：0
> 
> 时间：2012-09-12T08:45:25.003
> 
> 标签：android, android-emulator, sendmessage

我想在两个模拟器之间发送和接收消息，但不在第二个模拟器中发送消息。

```
http://msatpathy.wordpress.com/android/send-and-receiving-sms-%E2%80%93-in-android/ 
```

我的代码是相同的是这个链接代码，但没有传递给第二个模拟器......任何人有想法吗？提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:10:31.987

MainActivity.java

```
import android.app.Activity;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;
import android.telephony.SmsManager;

public class SendReceiveMessageActivity extends Activity {
    Button btnSendSMS;
    EditText txtPhoneNo;
    EditText txtMessage;
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";
    public BroadcastReceiver sendBroadcastReceiver;
    public BroadcastReceiver deliveryBroadcastReciever;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
        txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
        txtMessage = (EditText) findViewById(R.id.txtMessage);

        btnSendSMS.setOnClickListener(new View.OnClickListener() {
            public void onClick(View v) {
                String phoneNo = txtPhoneNo.getText().toString();
                String message = txtMessage.getText().toString();
                if (phoneNo.length() > 0 && message.length() > 0)
                    sendSMS(phoneNo, message);
                else
                    Toast.makeText(getBaseContext(),
                            "Please enter both phone number and message.",
                            Toast.LENGTH_SHORT).show();
            }
        });
    }

    // —sends a SMS message to another device—
    private void sendSMS(String phoneNumber, String message) {

        String SENT = "SMS_SENT";
        String DELIVERED = "SMS_DELIVERED";

        PendingIntent sentPI = PendingIntent.getBroadcast(this, 0, new Intent(
                SENT), 0);

        PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
                new Intent(DELIVERED), 0);

        // —when the SMS has been sent—
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(SENT));

        // —when the SMS has been delivered—
        registerReceiver(new BroadcastReceiver() {
            @Override
            public void onReceive(Context arg0, Intent arg1) {
                switch (getResultCode()) {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered",
                            Toast.LENGTH_SHORT).show();
                    break;
                }
            }
        }, new IntentFilter(DELIVERED));

        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);
    }
} 
```

广播类

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.widget.Toast;

public class ReceiveMessage extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent) 
    {
        //---get the SMS message passed in---
        Bundle bundle = intent.getExtras();        
        SmsMessage[] msgs = null;
        String str = "";            
        if (bundle != null)
        {
            //---retrieve the SMS message received---
            Object[] pdus = (Object[]) bundle.get("pdus");
            msgs = new SmsMessage[pdus.length];            
            for (int i=0; i<msgs.length; i++){
                msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);                
                str += "SMS from " + msgs[i].getOriginatingAddress();                     
                str += " :";
                str += msgs[i].getMessageBody().toString();
                str += "\n";        
            }
            //---display the new SMS message---
            Toast.makeText(context, str, Toast.LENGTH_SHORT).show();
        }                       
    }
} 
```

并在不同的模拟器中运行。此代码在我的应用程序中成功运行。谢谢

# html - 使用 960grid 系统 css 定义的 div 离开它所在的可扩展 div

> ID：12384346
> 
> 赞同：0
> 
> 时间：2012-09-12T08:45:38.513
> 
> 标签：html, css

我正在使用 12 列 960 网格系统来设计我的布局。这是我的 HTML 代码

```
<div class="topStrip"></div>
    <div class='container_12 content'>
        <div class="topStrip"></div>
        <div class="menuStrip">
            <div class="grid_3 menu"></div>
        </div><!-- end menuStrip -->
        <div class="mainContent">
            <div class="grid_4  dash_1"></div>
        </div><!-- end mainContent -->
        <div class="footer"></div>
    </div><!-- end content --> 
```

您可以在下面提供的 jsFiddle 链接中检查 CSS。

问题是`.mainContent`Div 中的字段，即`.dash_1`超出了`.content`div - [**jsFiddle**](http://jsfiddle.net/PmKPb/7/)。

但是，如果我从内部的 div中删除`.grid_4`and 增加，它会相应地扩展 - [**jsFiddle**](http://jsfiddle.net/EMXJp/2/)。`.dash_1``.mainContent`[](http://jsfiddle.net/EMXJp/2/)

 **这可能是 CSS 的一个简单问题，但是我正在努力寻找它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:53:50.243

你的**grid_4**有**浮动**。你必须清除他的父母（mainContent）。像这样写：

```
.mainContent {
    overflow: hidden;
    position: relative;
    margin-top: 50px;
} 
```

阅读更多[http://www.quirksmode.org/css/clearing.html](http://www.quirksmode.org/css/clearing.html)

检查这个[http://jsfiddle.net/PmKPb/8/](http://jsfiddle.net/PmKPb/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:53:52.613

That is because grid_4 width is 300px

See this

```
.container_12 .grid_4 {
    width:300px;
} 
```**

# jquery - 淘汰赛：映射/绑定 JSON 问题

> ID：12384348
> 
> 赞同：2
> 
> 时间：2012-09-12T08:45:58.517
> 
> 标签：jquery, knockout.js, knockout-mapping-plugin, knockout-2.0, knockout-mvc

我正在尝试获取 json 的基本 hello 工作示例，自动映射它然后绑定到可观察对象，我确定我遇到了一些基本错误。

从 ajax 调用返回的 JSON

```
"{\"Content\":\"hello world\"}" 
```

JS

```
function ViewModel() {
var self = this;

self.message = ko.observable();

$.getJSON("/home/getmessage", function (response) {
    var mapped = ko.mapping.fromJSON(response);
    self.message(mapped.Content);
});
};

ko.applyBindings(new ViewModel()); 
```

我得到以下内容来代替我期待的“你好世界”

```
function c(){if(0<arguments.length){if(!c.equalityComparer||!c.equalityComparer(d,arguments[0]))c.I(),d=arguments[0],c.H();return this}a.U.La(c);return d} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:21:46.163

排序后，我忽略了 ko.mapping 返回 observables 的事实，因此您必须将它们作为函数调用以获取它们的值。

```
function viewModel() {
var self = this;

self.content = ko.observable();

$.getJSON("/home/getmessage", function (response) {
    var mapped = ko.mapping.fromJSON(response);
    self.content(mapped.Content());
});
}

ko.applyBindings(new viewModel); 
```

# java - 分享eclipse/springsource工具套件服务器启动配置

> ID：12384349
> 
> 赞同：1
> 
> 时间：2012-09-12T08:46:08.107
> 
> 标签：java, eclipse, config, launch, springsource

我有几个启动配置，我通过将 .launch 文件保存到我的项目来添加到源代码管理中。该项目是一个spring MVC webapp。

启动文件具有 VM 参数和类路径条目，具体取决于 vFabric tc 服务器的安装位置以及 JVM 的安装位置。我想与我的团队分享这些启动配置，所以我想知道如何用 eclipse 变量替换这些完整路径，以便任何人都可以使用这些配置，无论 springsource 工具套件安装在哪里。

是否存在必要的变量，它们是什么？提前致谢。完整的 .launch 文件为

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<launchConfiguration type="com.vmware.server.tc.launchConfiguration">
<booleanAttribute key="com.springsource.sts.server.insight.ui.insightConfigured" value="true"/>
<listAttribute key="org.eclipse.jdt.launching.CLASSPATH">
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Users/Chris/Documents/springsource/vfabric-tc-server-developer-2.7.0.RELEASE/spring-insight-instance/bin/insight-bootstrap-tcserver-1.8.3.RELEASE.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry containerPath=&quot;org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.7.0_05&quot; path=&quot;2&quot; type=&quot;4&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Users/Chris/Documents/springsource/vfabric-tc-server-developer-2.7.0.RELEASE/tomcat-7.0.27.A.RELEASE/bin/bootstrap.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Users/Chris/Documents/springsource/vfabric-tc-server-developer-2.7.0.RELEASE/tomcat-7.0.27.A.RELEASE/bin/tomcat-juli.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Program Files/Java/jdk1.7.0_05/lib/tools.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
<listEntry value="&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;&#13;&#10;&lt;runtimeClasspathEntry externalArchive=&quot;C:/Users/Chris/Documents/springsource/vfabric-tc-server-developer-2.7.0.RELEASE/spring-insight-instance/lib/aspectjweaver-1.6.12.M2.jar&quot; path=&quot;3&quot; type=&quot;2&quot;/&gt;&#13;&#10;"/>
</listAttribute>
<booleanAttribute key="org.eclipse.jdt.launching.DEFAULT_CLASSPATH" value="false"/>
<stringAttribute key="org.eclipse.jdt.launching.JRE_CONTAINER" value="org.eclipse.jdt.launching.JRE_CONTAINER/org.eclipse.jdt.internal.debug.ui.launcher.StandardVMType/jdk1.7.0_05"/>
<stringAttribute key="org.eclipse.jdt.launching.PROGRAM_ARGUMENTS" value="start"/>
<stringAttribute key="org.eclipse.jdt.launching.VM_ARGUMENTS" value="-Dcatalina.base=&quot;C:\Users\Chris\Documents\springsource\vfabric-tc-server-developer-2.7.0.RELEASE\spring-insight-instance&quot; -Dcatalina.home=&quot;C:\Users\Chris\Documents\springsource\vfabric-tc-server-developer-2.7.0.RELEASE\tomcat-7.0.27.A.RELEASE&quot; -Dwtp.deploy=&quot;C:\Users\Chris\Documents\springsource\vfabric-tc-server-developer-2.7.0.RELEASE\spring-insight-instance\wtpwebapps&quot; -Djava.endorsed.dirs=&quot;C:\Users\Chris\Documents\springsource\vfabric-tc-server-developer-2.7.0.RELEASE\tomcat-7.0.27.A.RELEASE\endorsed&quot; -Daspectj.overweaving=true -Djava.awt.headless=true -Dgemfire.disableShutdownHook=true -Dinsight.base=&quot;C:\Users\Chris\Documents\springsource\vfabric-tc-server-developer-2.7.0.RELEASE\spring-insight-instance\insight&quot; -Xmx1024m -XX:MaxPermSize=256m -Xss192k"/>
<stringAttribute key="server-id" value="VMware vFabric tc Server Developer Edition     v2.7"/>
</launchConfiguration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:07:14.930

In Eclipse classpath variables are configured in `Window` -> `Preferences` -> `Java` -> `Build Path` -> `Classpath Variables`. Once you have the appropriate variables configured there, follow the instructions provided [here](https://stackoverflow.com/questions/3557369/how-to-use-variables-for-classpath-definition-in-eclipse-launch-configurations#3886784).

Hope this helps.

# jquery - jquery比较2个变量给出了意想不到的结果

> ID：12384351
> 
> 赞同：1
> 
> 时间：2012-09-12T08:46:10.290
> 
> 标签：jquery, variables

我对返回意外结果的愚蠢 if 条件感到非常困惑，我只是无法弄清楚我的代码中有什么问题。这是我的简单代码

```
$('.for_next_link').click(function() {

    var next = $('.for_next_value_pagination').val();
    var limit = "<?php echo $max; ?>";

    alert(next); // value is 5
    alert(limit); // value is 10

    if (next >= limit) // this condition is always true
    {
        alert('im in if cond.');
        return false;
    }
    else {
        // do something else;
    }
});​ 
```

我正在比较 2 个变量“next”和“limit”，它们的值分别为 5 和 10，但令 if 条件始终为真感到惊讶。你能告诉我为什么会发生这种情况以及解决方案是什么。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:48:17.283

你正在做字符串比较，来自萤火虫的控制台，

```
>>> "5">"10"
true

>>> 5>10
false

>>> "5">10
false

>>> 5>"10"
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:48:17.747

发生这种情况是因为您正在比较字符串：

```
"5" >= "10" is true 
```

强制其中一个演员

```
if(next*1 >= limit*1) is false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:49:06.673

您正在比较两个字符串值，而不是两个数字。试试这个：

```
if(Number(next) >= Number(limit)){ 
```

因为字符“5”的ASCII值高于“1”（“10”的第一个字符），所以“5”被认为大于“10”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T08:49:13.350

您实际上是在比较`"5"`(a string) 和`"10"`(also a string); `"5" > "10"`是`true`因为，按字母顺序，`5`在 之后`1`。

相反，用数字比较它们：

```
if(parseInt(next, 10) >= parseInt(limit, 10)) 
```

（您可能希望在初始化变量的同时解析它们，如下所示）

```
var next = parseInt($('.for_next_value_pagination').val(), 10);
var limit = parseInt("<?php echo $max; ?>", 10); 
```

# android - sys/fcntl.h：在为 Android 交叉编译 pcsclite 时没有这样的文件？

> ID：12384353
> 
> 赞同：7
> 
> 时间：2012-09-12T08:46:20.920
> 
> 标签：android, android-ndk

全部：我正在制作一个可以与android mobile的ccid智能卡读卡器通信的android应用程序，我选择了这种方式：“pcsc-lite-1.8.5 + ccid-1.4.7 + libusb-1.0.3”运行在 Ubuntu（PC 上的 linux OS）中非常好。然后我尝试将它们移植到android，交叉编译时有很多问题。这些问题大多是Android的仿生库缺少一些头文件和函数，比如：

1.  sys/fcntl.h，mqueue.h：没有这样的文件；

2.  pthread_cancel：未定义的引用；

现在，当我交叉编译 pcsclite 以构建可执行文件“pcscd”时，我收到了这个错误：

> sd-daemon.c:35:23: 致命错误:sys/fcntl.h:No such file or directory

**安卓.mk：**

```
#===================================================
# ******  pcscd ******  
#===================================================

include $(CLEAR_VARS)
LOCAL_PRELINK_MODULE:=false
LOCAL_SRC_FILES:=atrhandler.c \
     debuglog.c \
     dyn_hpux.c \
     dyn_macosx.c \
     dyn_unix.c \
     eventhandler.c \
     hotplug_generic.c \
     ifdwrapper.c \
     pcscdaemon.c \
     powermgt_generic.c \
     prothandler.c \
     readerfactory.c \
     simclist.c \
     strlcat.c \
     sys_unix.c \
     tokenparser.c \
     hotplug_libudev.c \
     hotplug_libusb.c \
     hotplug_linux.c \
     hotplug_macosx.c \
     utils.c \
     winscard.c \
     winscard_msg.c \
     winscard_msg_srv.c \
     winscard_svc.c \
     sd-daemon.c
LOCAL_CFLAGS+= -DHAVE_LIBUSB
LOCAL_C_INCLUDES+=$(LOCAL_PATH)/ $(LOCAL_PATH)/src/ $(HOME)/android-ndk-r8b/samples/includes-libusb1.0.3/ $(LOCAL_PATH)/PCSC/ 
LOCAL_LDFLAGS:=-shared
LOCAL_MODULE:=pcscd
LOCAL_LDLIBS:=-llog $(HOME)/android-ndk-r8b/samples/libs-libusb1.0.3/libusb-1.0.so
include $(BUILD_EXECUTABLE) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T13:28:58.133

许多 Android 标头不在标准位置。您可以使用以下命令在 NDK 中搜索丢失文件的位置`find . -name fcntl.h`。看来`include <sys/fcntl.h>`需要改成`include <fcntl.h>`。

Android pthread 库不包含`pthread_cancel`请参阅“docs/OVERVIEW.html”。更换应该不难`pthread_cancel`。

我不知道该怎么办`mqueue`。

# c# - ASP.NET C# 动态创建每行带有回发按钮的表

> ID：12384356
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:46:31.420
> 
> 标签：c#, asp.net

我正在尝试显示从数据库动态加载的表格，并在每行的第一个单元格中使用动态创建的按钮。每个按钮都分配了 ROW_ID 值，该值唯一地标识一个“通用”方法处理程序中的按钮。

据我所知，我能做到这一点的唯一方法是在初始化生命周期阶段加载数据并显示它并将按钮连接到处理程序。我面临的问题是，当此按钮（例如出于目的）要为该特定行调用数据库中的删除（或其他修改）过程时，我必须执行 Response.End 并重新加载页面以反映此修改，因为在 PostBack 处理程序期间，从 DB 重新获取新数据集并创建新的按钮集并将其连接到处理程序已经太晚了。整页重新加载但是丢失所有控件的状态，这是不可取的。

需要注意的一件事：我正在使用自定义呈现用户控件来显示来自数据库的结果集（虽然它看起来像一个表格）。我没有将 DataGridView 与 DataBinding 一起使用。

可能的解决方案是为每一行使用单选按钮，并在底部使用一个静态按钮，但这远非理想。

问题是：有什么更好的方法来做到这一点？我错过了什么吗？我很难相信 ASP.NET 处理这种通用用例会如此麻烦。

感谢您提供任何可能的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:25:02.497

我最终得到的解决方案是在每行的虚拟按钮上使用基于 JavaScript 的 __doPostBack('static_button_id', 'row_id')。它生成带有参数的回发，该参数标识发生此回发的行。

按钮 (ID=static_button_id) 是派生的经典按钮，通过 style="display:none;" 隐藏在页面上 并单击调用自定义处理程序（在初始化/加载阶段分配）。它的派生是为了规避参数的回发验证。

要在 .NET 处理程序中检索参数 (row_id)，我使用： string passedArgument = Request.Params.Get("__EVENTARGUMENT");

它完全符合我的需要，但有点脏。如果有人提供干净的方法来做到这一点，我仍然会很感激。

谢谢。

# iphone - 如何在目标 c 中创建和访问 sqlite-cursor？

> ID：12384359
> 
> 赞同：1
> 
> 时间：2012-09-12T08:46:43.557
> 
> 标签：iphone, objective-c, sqlite

如何创建光标并在我的 iphone 应用程序中使用它？

我正在使用`select * from tablename`.

但我不想一次加载所有记录......我知道我们可以为此使用游标。

我找不到任何与之相关的示例..任何机构都可以提供任何链接或示例来解释如何在 sqlite 中使用光标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:02:05.543

您可以使用语句的`LIMIT`/`OFFSET`子句`SELECT`。例如要获取记录 30 到 40：

```
SELECT something FROM somewhere ORDER BY somethingelse LIMIT 10 OFFSET 30; 
```

在这种情况下，您的“光标”将是值 30，您需要自己跟踪。

[参考](http://www.sqlite.org/lang_select.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:54:22.100

我得到了解决方案：sql查询是

> **const char *sql = "从表名中选择 *";**

使用

> **sqlite3_prepare_v2（数据库，sql，-1，&selectstmt，NULL）**

我们会将结果输入到 selectstmt 中。

现在，当我们想要获取行时，我们将调用该方法

> **sqlite3_step(selectstmt)**

，每次调用时都会返回下一行。

# php - 从 mssql DB 插入值并搜索值

> ID：12384361
> 
> 赞同：0
> 
> 时间：2012-09-12T08:46:47.823
> 
> 标签：php, sql-server-2008

我已经与数据库建立了连接，我想输出一个时间表。

```
Date - Room - Event 
```

现在我会看到房间里的每一个事件，

但我希望将事件按房间分组。

所以输出应该是这样的

```
Date - Room1 - event 1
               event 2

Date - Room2 - event 3

Date - Room3 - event 4
             - event 5
             - event 6 
```

此外，这应该在 php 中完成，而不是在 sql 查询中。

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:50:48.013

```
select date,room,STUFF((select ' '+eventname from yourtable where t.room=t1.room for xml path('')),1,1,'') as events
from yourtable
group by room 
```

# java - 在 oracle 10g 中添加自动增量和自动减量列

> ID：12384362
> 
> 赞同：1
> 
> 时间：2012-09-12T08:46:52.253
> 
> 标签：java, plsql, oracle10g

我想在oracle数据库中添加一列，插入记录后自动递增。删除记录时应该自动递减。该字段用于存储表标题的序列号，并且标题应该能够重新-order 因此数字序列之间不应该有任何差距。我尝试过使用 TRIGGER 和 SEQUENCE 但它没有用。有没有办法使用 PL/SQL 来实现这一点。实际上我想要的是改变序列号删除记录时。

例如：第 1 行，第 2 行，第 3 行，第 4 行，第 5 行 如果我们删除第 3 行，则顺序应该是第 1 行，第 2 行，第 3 行，第 4 行，并且第 4 行的记录应该到第 3 行，所以上..

我正在使用 jsp-servlet 技术。如果有任何方法可以通过使用 java 来做到这一点，那也很好。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T07:23:44.187

不; 没有简单的方法。

无论您对序列做什么，它们都[*不会*生成无间隙的数字序列](http://asktom.oracle.com/pls/asktom/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:530735152441)，即完美的*1, 2 .. n*。即使他们这样做了，也无法自动为整个表或表中的一组行重新生成序列，而无需从头开始重新生成它。简单来说，如果删除第 3 行，则需要更新*所有*序列号高于 3 的记录。这显然是荒谬的。

我不明白你*为什么*要这样做，但是，假设你做了我的“回答”，那就是根本不把这些信息存储在你的表中。对于那些需要此列的查询，使用分析函数动态生成它[`row_number()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions156.htm#SQLRF06100)。例如：

```
select column1, column2, row_number() over ( order by <whatever> ) as my_sequence
  from my_table 
```

`ORDER BY`这会按照子句中给定的顺序为每一行分配一个唯一编号。

你也可以把它放在一个视图中，这样你甚至不需要记住把它放在查询中，并且你确定它每次都是以完全相同的方式生成的。

# eclipse - 移动文件后修复 Eclipse 工作区和项目链接

> ID：12384363
> 
> 赞同：1
> 
> 时间：2012-09-12T08:46:53.473
> 
> 标签：eclipse, workspace

我有一个 Eclipse 工作区引用位于工作区目录之外的文件夹中的项目，因此后者仅包含`.metadata`目录。

更换计算机后，我更改了用户名，因此工作区再也找不到项目。为了使东西正常工作，我创建了硬链接，以便 Eclipse 仍然可以找到该项目，但我想解决这个问题。

如何重新定位（不移动）我的工作区的项目，以便它在没有硬链接的情况下找到我的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T08:53:38.027

如果您没有太多项目，则可以从工作区中删除现有项目，并使用导入项目功能。选择此菜单：`File -> Import... -> Existing Projects into Workspace`

# java - 如何不使用 Swing/AWT 绘制特定颜色？

> ID：12384372
> 
> 赞同：0
> 
> 时间：2012-09-12T08:47:14.833
> 
> 标签：java, swing, colors

我正在尝试在我的游戏中使用精灵表并且我希望背景是透明的，我如何使用 swing 和/或 awt 来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:50:53.847

看看

1.  基于 JXLayer (Java6) 的[JLayer (Java7 )](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

2.  [半透明](http://docs.oracle.com/javase/tutorial/uiswing/misc/trans_shaped_windows.html)

3.  通过使用设置透明度[`AlphaComposite`](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:00:30.927

您最好的选择是使用已经支持背景透明度的格式创建工作表，例如 PNG 32 位。

半透明度和透明度选项只能更改图像的整个透明通道，不能根据颜色对单个位起作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T16:42:13.523

扩展 mKorbel 使用 的建议[`AlphaComposite`](http://docs.oracle.com/javase/7/docs/api/java/awt/AlphaComposite.html)，您*不能*使用模式绘画`AlphaComposite.Clear`，但您*可以*清除 a 的背景`BufferedImage`。例如，

```
Graphics2D dstG = dstImage.createGraphics();
dstG.setComposite(AlphaComposite.Clear);
dstG.fillRect(0, 0, WIDTH, HEIGHT); 
```

随后以不同的模式绘制将使未绘制的像素保持透明。

更多细节可以在这个[答案](https://stackoverflow.com/a/6124035/230513)中找到。

# c# - javascript中的getAttribute()方法

> ID：12384373
> 
> 赞同：0
> 
> 时间：2012-09-12T08:47:17.783
> 
> 标签：c#, javascript

如何在 C# 中使用 javascript 检索任何字段中给出的文本？

```
sumry.innerHTML += "<li>" + f.getAttribute("Text") + "</li>" + "<br/>";
                        f.style.borderColor = "#FF0000";
                        f.focus(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:49:20.400

您可能正在寻找`.nodeValue`，可能`.innerHTML`，可能`.value`是表单域。

`.getAttribute()`将从标签中检索属性，例如`id`or `name`。它不会获取标签的内容。

* * *

您当前的代码需要一个像这样形成的元素：

```
<some_element id='blah' text='hey hey hey' />` 
```

当然，`text`不是属性，所以没有返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:51:30.400

你的问题不清楚。如果我明白了，你想在你的脚本中使用来自代码后面的数据。最简单的方法是创建一个隐藏字段，在表单加载时设置其值，然后使用 getElementById('myhidden').value 读取它。

此致。

# python - 安装 Node.js 和更新 Python

> ID：12384374
> 
> 赞同：1
> 
> 时间：2012-09-12T08:47:25.787
> 
> 标签：python, node.js, centos

所以我试图在我的服务器上安装 node.js。我设法将 .tar 文件解压缩到一个文件夹中，然后 cd 进入它并使用“./configure”命令。我收到此错误消息：

```
[~/node-v0.8.8]# ./configure  File "./configure", line 325
    o['default_configuration'] = 'Debug' if options.debug else 'Release'
                                          ^
SyntaxError: invalid syntax 
```

经过严格的谷歌搜索，我发现这是由 Python 引起的，并且是因为我的 Python 版本（即 2.4）。

现在我正在尝试更新 Python，并且安装工作正常，但我认为它没有安装在需要的地方？因为安装后，我输入 python -V 它仍然说它在 2.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:55:22.723

如果您`make install`使用的是较新版本的 Python 并且它没有在 中报告较新版本`python -V`，那么您的安装很可能没有转到位于`$PATH`env var 中的位置。

我建议查看输出`make install`以查看它实际将文件安装到的位置，并更新您`$PATH`以使用这个新位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:17:33.543

如果你的旧（Python 2.4 在计算方面比较老）Python 是通过 OS 包安装的，它可能在 /usr/bin、/usr/lib 等。如果你通过 configure/make/make install 安装了新的，它可能进入 /usr/local/bin、/usr/local/lib 等，而您的路径搜索、共享库搜索等可能会丢失它，因为它们仍然可以找到旧的。

如果可以，请使用包管理器更新 Python 版本。如果没有，请使用适当的配置选项重做安装`--prefix=...`（可能需要一些时间才能弄清楚该选项应该是什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:02:01.233

请注意，此问题的另一个解决方案（无法编译 node.js）是使用[自 0.8.6 以来已发布的 Linux 二进制发行版](http://blog.nodejs.org/2012/08/07/node-v0-8-6-stable/)

这是我使用的脚本：

```
# get the latest stable binary 
# (modify version number based on what you find in that folder)
wget http://nodejs.org/dist/latest/node-v0.8.20-linux-x64.tar.gz
cd /usr/local/
sudo tar xzvf ~/node-v0.8.20-linux-x64.tar.gz --strip=1 
```

# java - 为什么 Google API 控制台中没有 Google+ 历史 API？

> ID：12384376
> 
> 赞同：1
> 
> 时间：2012-09-12T08:47:33.163
> 
> 标签：java, oauth, google-plus

[Google API 控制台](https://code.google.com/apis/console/?api=plus&pli=1#project:1041502198240%3aservices)上没有 Google+ 历史 API 我正在尝试访问 Google+ 历史 API 但是，我在控制台页面上没有看到它，你能帮我解决这个问题吗？

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:08:38.060

Google+ History API 目前仍处于开发者预览阶段。为了激活 API，您需要在[https://developers.google.com/+/history/preview/](https://developers.google.com/+/history/preview/)上注册，其中还包含有关预览和 API 的更多信息。

# javascript - 无法在 ViewModel Knockout 中执行功能

> ID：12384377
> 
> 赞同：1
> 
> 时间：2012-09-12T08:47:44.423
> 
> 标签：javascript, jquery, knockout.js

我有一个像这样的网格系统

```
<div class="section table_section">
<div class="section_inner" id="divTestKoRemoteGrid">
    <div class="title_wrapper" data-bind="with: Grid">
        <h2 data-bind="text: TotalCount">
            Prices</h2>
    </div>
    <div class="section_content">
        <div id="product_list" data-bind="with: Grid">
<!--[if !IE]>start table_wrapper<![endif]-->
<div class="table_wrapper">
    <div class="table_wrapper_inner">
        <table cellpadding="0" cellspacing="0" width="100%">
            <tbody>
                <tr>
                    <th>
                        No.
                    </th>
                    <th>
                        Tier
                    </th>
                    <th>
                    </th>
                </tr>
                <!-- ko foreach: Data -->
                <tr data-bind="css: { second: $index() % 2 }">
                    <td data-bind="text: Id" style="width: 26px;">
                    </td>
                    <td data-bind="text: Tier" style="width: 35px;">
                    </td>
                    <td style="width: 120px;">
                        <div class="actions_menu">
                            <ul>
                                <li><a class="edit" href="">edit</a></li>
                                <li><a class="delete" href="">deny</a></li>
                            </ul>
                        </div>
                    </td>
                </tr>
                <!-- /ko -->
            </tbody>
        </table>
    </div>
</div>
<!--[if !IE]>end table_wrapper<![endif]-->
</div>
<!-- ko with: Grid -->
<div class="pagination" data-bind="with: Page">
    <span class="page_no" data-bind="text: TotalCount"></span>
    <ul class="pag_list" data-bind="foreach: ko.utils.range(1, TotalPage)">
        <li><a href="" data-bind="click: $parent.Goto, css:{current_page: $data == $parent.CurrentPage}">
            <span><span data-bind="text: $data"></span></span></a></li>
    </ul>
</div>
<!-- /ko -->
    </div>
</div>
</div> 
```

和淘汰视图模型

```
var my = my || {};

$(function () {

my.PriceListViewModel = (function () {

    var 
        grid = ko.observable(),
        loadGrid = function () {
            my.ListModel.LoadData();
            grid(my.ListModel);
        };
    return {
        Grid: grid,
        LoadGrid: loadGrid
    };
})();

my.ListModel = (function () {
    var 
        data = ko.observableArray([]),
        totalCount = ko.observable(),
        page = ko.observable(),
        goTo = function (d) {
            $.getJSON("/prices/GetByFilterViaJSON?limit=6&page=" + d, function (list) {
                data(list.Data);
                page(list.Page);
            });
        },
        loadData = function () {
            $.ajax({
                type: 'GET',
                url: '/prices/GetByFilterViaJSON',
                dataType: 'json',
                success: function (list) {
                    data(list.Data);
                    page(list.Page);
                    totalCount(list.TotalCount);
                },
                data: { limit: 6 },
                async: false
            });
        };
    return {
        Data: data,
        TotalCount: totalCount,
        Page: page,
        GoTo: goTo,
        LoadData: loadData
    };
})();

my.PageModel = (function () {
    var 
        currentPage = ko.observable(1),
        totalCount = ko.observable(1),
        limit = ko.observable(),
        start = ko.observable(),
        nextPage = ko.observable(1),
        previousPage = ko.observable(1),
        totalPage = ko.observable(1),
        loadData = function (pageData) {
            currentPage(pageData.CurrentPage);
            totalCount(pageData.TotalCount);
            limit(pageData.Limit); 
            start(pageData.Start);
            nextPage(pageData.NextPage);
            previousPage(pageData.PreviousPage);
            totalPage(pageData.TotalPage);
        };
    return {
        CurrentPage: currentPage,
        TotalCount: totalCount,
        Limit: limit,
        Start: start,
        NextPage: nextPage,
        PreviousPage: previousPage,
        TotalPage: totalPage,
        LoadData: loadData
    };

})();

my.PriceListViewModel.LoadGrid();
ko.applyBindings(my.PriceListViewModel);
}); 
```

当我尝试执行 GoTo 函数（在 ListModel 中）时，浏览器找不到该函数，并且敲除无法在 click 事件中绑定。

我尝试解决此问题 5 天。你觉得有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T14:24:39.197

问题是您正在访问父级。这会让你得到页面，而不是网格，就像你需要的那样。要解决此问题，请使用`parents[]`. 它包含当前可用的所有父母，在您的情况下，您将要使用`parents[1]`.

我有一个示例小提琴[http://jsfiddle.net/Rynan/fthFE/](http://jsfiddle.net/Rynan/fthFE/)

还可以查看淘汰网站[http://knockoutjs.com/documentation/binding-context.html上的文档](http://knockoutjs.com/documentation/binding-context.html)

# c# - System.Threading.Timer 处理异步超时？

> ID：12384381
> 
> 赞同：0
> 
> 时间：2012-09-12T08:48:16.223
> 
> 标签：c#, .net, timer

可以说我有一个循环，我在某处上传了一些文件。如果我没有连接，我只是重新连接。如果我尝试连接 x 次，我想等待。对于这个等待时间，我可以使用计时器。但是因为应用程序也在做其他事情，所以它不应该是同步的——我希望它是异步的。`System.Threading.Timer`创建一个并倒计时是个好主意吗？然后我可以添加类似`if (Timer done) { connect again and upload }`任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:57:20.580

如果应用程序正在做其他事情，为什么可以阻止上传但不能阻止等待。全部使用 BackGroundWorker 和 ProgressChanged 来显示完成了多少文件。

[BackgroundWorker 类](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# php - 映射两个数组 - 来自与我的荷兰老师的谈话

> ID：12384386
> 
> 赞同：0
> 
> 时间：2012-09-12T08:48:26.113
> 
> 标签：php, set

今晚我将通过 Skype 与来自荷兰的老师进行一次愉快的闲聊：-D 我猜这可能是他要我解释的。

我有两个数组，`X`它的孩子`XX`

```
X = {"item1","item2","item3"}
XX= {"item11","item12"}; 
```

例如。

这两个`X`和`XX`数据是从同一个数据库表中读取的，因此我知道它们的 ID（auto_increment）

```
X's id is 100 and each of its element also has an id (e.g 10,11,12)
XX's id is 101 and each of its element also has an id(e.g 13,14,15) 
```

还有`X`并且`XX`也有他们的父母ID（例如`200`和`100`分别）。您会看到 this指向它的`id=100`parent 。并且 的每个元素都具有相同的父级，即其is 。`XX``X``XX``item1``id``10`

但是，父母没有任何“标志”告诉我它确实有一些孩子。出现问题。

```
foreach($X as $x)
{
   foreach($XX as $xx)
   {
      if($xx->parentId==$x->id)
      {
         echo "Ahha children know they have their parents";
      }       
   }
} 
```

是的，该代码段运行良好，但无论如何我很想研究某种方式来回应“啊哈父母现在知道父母也有一些孩子”。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:55:13.443

根据我的问题，我不能 100% 确定您的问题，但这可能是解决您问题的方法：

```
foreach($X as $x)
{
    foreach($XX as $xx)
    {
        if ($xx->parentId == $x->id)
        {
            echo "Ahha children know they have their parents";
            if (!isset($x->children)) {
                $x->children = array();
            }
            $x->children[] = $xx;
        }
    }
    if (!empty($x->children)) {
        echo "This parent has " . count($x->children) . " children";
    }
} 
```

# c - 字符串数组中的不兼容指针类型警告

> ID：12384389
> 
> 赞同：3
> 
> 时间：2012-09-12T08:48:32.537
> 
> 标签：c

我正在尝试 C 中的字符串数组。我有一个字符串字典数组，我将单词添加到该数组中，然后打印出该数组以查看它是否有效。正如我认为的那样，输出可以打印数组中的单词。但是我收到了一些我无法修复的警告。

```
// 20 word dictionary
#define ROWS 20
#define WORD_LENGTH 10

char dictionary[ROWS][WORD_LENGTH];

void add_word(char **dict, int index, char *word) {
    dict[index] = word;
}

char *get_word(char **dict, int index) {
    return dict[index];
}

void print_dictionary(char **dict) {
    int i;
    for (i = 0; i < 20; i++) {
        printf("%d: %s\n", i, get_word(dict, i));
    }
}

void test_dictionary() {
    add_word(dictionary, 0, "lorem");
    add_word(dictionary, 1, "ipsum");

    print_dictionary(dictionary);
}

int main() {
    test_dictionary();
} 
```

编译它的输出是，

```
p5.c: In function ‘test_dictionary’:
p5.c:54:2: warning: passing argument 1 of ‘add_word’ from incompatible pointer type [enabled by default]
p5.c:38:6: note: expected ‘char **’ but argument is of type ‘char (*)[10]’
p5.c:55:2: warning: passing argument 1 of ‘add_word’ from incompatible pointer type [enabled by default]
p5.c:38:6: note: expected ‘char **’ but argument is of type ‘char (*)[10]’
p5.c:57:2: warning: passing argument 1 of ‘print_dictionary’ from incompatible pointer type [enabled by default]
p5.c:46:6: note: expected ‘char **’ but argument is of type ‘char (*)[10]’ 
```

我尝试将 **dict 更改为 dict[ROWS][WORD_LENGTH] 没有太大区别。你们能解释一下如何声明这个字典参数吗？谢谢。

编辑：我的编译器标志是，CFLAGS = -Wall -g。

Edit2：将声明更改为，

```
void add_word(char dict[][WORD_LENGTH], int index, char *word) {
    dict[index] = word;
}

char *get_word(char dict[][WORD_LENGTH], int index) {
    return dict[index];
}

void print_dictionary(char dict[][WORD_LENGTH]) {
    int i;
    for (i = 0; i < 20; i++) {
        printf("%d: %s\n", i, get_word(dict, i));
    }
} 
```

这会产生编译错误，

```
p5.c: In function ‘add_word’:
p5.c:42:14: error: incompatible types when assigning to type ‘char[10]’ from type ‘char *’
make[1]: *** [p5] Error 1 
```

谢谢你的帮助。

啊! 弄清楚了！。由于它是一个指针，我需要按照@Jack 的建议使用 strcpy 。

```
void add_word(char dict[][WORD_LENGTH], int index, char *word) {
    /*dict[index] = word;*/
    strcpy(dict[index], word);
} 
```

谢谢大家！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T08:57:21.883

**根本原因：**

> **数组不是指针！**

请注意，没有从`dict[][]`to`dict **`的隐式转换，因此没有错误。当您将数组传递给函数时，它会衰减为指向其第一个元素的指针。在二维数组的情况下，第一个元素本身就是一个单维数组，因此您需要一个指向数组的指针而不是双指针。

**灵魂：**

您需要修改函数原型以匹配您传递的*类型。*

```
void add_word(char dict[][WORD_LENGTH], int index, char *word);
void print_dictionary(char dict[][WORD_LENGTH]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T08:59:26.717

事实是，您实际上不是在传递指向指针的指针，而是传递一个数组数组。不同之处在于内存已经分配，​​不能在 add_word() 中使用赋值运算符“=”。

正确的签名是

```
void add_word(char dict[][WORD_LENGTH], int index, char *word) 
```

并且您必须使用 strcpy 或 strncpy 之类的方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:58:54.840

您需要在取消引用时提供内部数组的大小。所以而不是：

```
void add_word(char **dict, int index, char *word) 
```

你需要：

```
void add_word(char dict[][WORD_LENGTH], int index, char *word) 
```

对于`print_dictionary`.

主要的混淆是 char**数组**数组与 char**指针**数组不同。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T09:01:15.123

是的，你的类型完全关闭了。

“最小更改次数”修复只是替换一行：

```
char* dictionary[ROWS]; 
```

基本上，您确实创建了一个布局为的内存块

```
c1  c2  c3  c4  ... c20
c21 c22 c23 c24 ... c40
c41 c42 ...
... 
```

但是，您使用它就像一个内存块

```
charpointer1
charpointer2
charpointer3
... 
```

它似乎可以正常工作，并且您实际分配的内存块无论如何都更大，因此它甚至是“安全的”，因为不会发生任何不好的事情。

编辑：如果您曾尝试直接使用您的“字典”，您的代码将会“炸毁”；访问例如“dictionary[n]”来获取第 n 个单词会给你错误的结果。

# jsp - 在 JSP 中将 int 输出为十六进制

> ID：12384391
> 
> 赞同：2
> 
> 时间：2012-09-12T08:48:35.203
> 
> 标签：jsp, jstl, el

在我编写自定义标记来执行此操作之前，我想确保我没有遗漏 EL 或 JSTL 中的某些内容。

存储在请求范围内的 bean 属性返回了一个 int。我需要将其输出为十六进制。但是经过搜索，似乎JSP中没有办法输出EL从bean返回的int这样......

```
${someBean.someInt} 
```

...作为十六进制值，以...

```
<%= String.format("0x%X", someBean.getSomeInt()) %> 
```

...将。

我对么？如果没有，它是如何完成的？（我们的部门编码标准不允许使用语法将 Java 直接包含在 JSP 中`<% %>`。如果我们找不到已经可用的东西，我们必须编写标签。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:44:43.177

您不能在 EL 中或使用 JSTL 的格式标记来执行此操作。编写自定义标签或[EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function)是最佳选择。

如果它只是`int`你必须格式化的一个，你可以在你的 bean 中添加一个 String getter 来进行格式化

```
public String getSomeIntAsHex(){
  return String.format("0x%X", someInt);
} 
```

然后你可以在EL中使用那个getter

```
${someBean.someIntAsHex} 
```

# clojure - 在 enlive 中使用 src 文件夹外部的模板

> ID：12384394
> 
> 赞同：2
> 
> 时间：2012-09-12T08:48:43.893
> 
> 标签：clojure, enlive

是否可以在 enlive 中从源文件夹外部提供模板？

我想从我的 resources/public/templates 文件夹而不是 src/templates 文件夹中提取模板，我该怎么做？

谢谢，穆尔塔萨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:10:50.817

您是否尝试过在类路径中包含包含模板的文件夹。我相信 enlive 会查看您的类路径以找到您指定的模板。
如果资源/公共文件夹已经在您的类路径中，您的模板路径应该类似于

(deftemplate template-name "templates/path/to/template" [] .....)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T15:33:59.177

我将所有模板放在不在类路径上的文件中，并使用以下命令定义它们：

```
(defmacro deftemplate- [name source & rest]
  `(deftemplate ~name (java.io/File. (str "path-to-pages/" ~source)) ~@rest ) ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-26T21:59:24.337

是的，是否可以从源文件夹外部提供模板。就我而言，它在没有对我的配置进行任何更改的情况下工作；我有我的模板`./resources`和静态资产`./resources/public`。

注意：我在我的`project.clj`

```
:min-lein-version "2.0.0"
:plugins [[lein-ring "0.8.3"]]
:dependencies [[org.clojure/clojure "1.5.1"]
               [compojure "1.1.5"]
               [enlive/enlive "1.1.1"]] 
```

我指的`./resources/index.html`是这样的：

```
(h/deftemplate index-template "index.html"
  [s]
  [:title] (h/content s)) 
```

# java - 没有数据库的实体类？

> ID：12384395
> 
> 赞同：2
> 
> 时间：2012-09-12T08:48:44.693
> 
> 标签：java, rest, jdbc, entity

是否有可能/实用没有可用的底层数据库的实体类？

与我自己矛盾的是，我有一个可以通过 jdbc 访问的数据库（！），但它是专有的，只支持几种方法 - 连接/断开/执行 - 没有模式浏览，没有元数据，或通过工具连接 - 只有代码.

我想做的是创建一组访问数据库的宁静 Web 服务，这些服务似乎需要基于数据库的底层实体类。

所以，我的问题是这是否是处理这种情况的正确方法？我对这些技术相当陌生，所以可能更多地在设计问题上苦苦挣扎——任何我能读到的关于如何解决这个问题的文章都会很棒。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:54:26.967

通常，Restful Web 服务不必基于通过实体访问数据库。您可能已经在各种示例中看到过它，但 JPA 和 Web 服务是完全独立的技术。

在您描述的情况下，使用实体似乎不合理，甚至不可能。这取决于这个专有的 JDBC 驱动程序是如何实现的——从你所说的来看，它不是一个完整的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:59:02.977

1.  创建实体类的唯一要求是“您应该知道现有的表数据库架构”。

```
表名：样本
一个号码
B：VARCHAR2（300）

实体
@表名..
公开样本{
@柱子..
诠释一个;
@柱子..
字符串 B：
}

```

但我建议您检查您的数据库是否支持 JPA Hibernate。

-->**执行数据库操作的 REST 服务完全可以继续。**

# c# - 将值发送到另一种形式

> ID：12384404
> 
> 赞同：0
> 
> 时间：2012-09-12T08:49:34.850
> 
> 标签：c#, textbox, listbox

将值从**form2**中的文本框发送到**form1**中的列表框时，出现`NullReferenceException`错误。

处理程序代码是：

```
public void button1_Click(object sender, EventArgs e) {
    ListBox LB = Application.OpenForms["Form1"].Controls["Project_list"] as ListBox;
    LB.Items.Add(Project_name.Text);           
} 
```

它出了什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:01:10.330

仅用于**演示目的...**检查此代码，设置断点并查看会发生什么。

```
public void button1_Click(object sender, EventArgs e)
{
    // i do assume there is a class Form1 within your project?!
    Form1 frm = (Form1) Application.OpenForms["Form1"];
    // look for Project_list within your Form1.Controls, true to search all childControls too
    Control[] ctrls = frm.Controls.Find("Project_list", true);
    if (ctrls.Length >0)
    {
        ListBox LB =  ctrls[0] as ListBox;
        if (LB!=null)
            LB.Items.Add(Project_name.Text);           
        else
            System.Diagnostics.Debug.WriteLine("Doooooh");
    }
} 
```

这只是一个示例，可以查看您的代码有什么问题！

# jquery - jQuery 从已知的动态类名中获取元素 ID 名

> ID：12384408
> 
> 赞同：0
> 
> 时间：2012-09-12T08:49:43.833
> 
> 标签：jquery

我有一个通过 url 中的 # 传递的值，这是一个复选框的类名我想要做的是使用 jQuery 获取该复选框 ID 的值

```
// get hashtag value
if(self.document.location.hash){
var urlhash = self.document.location.hash;
var hashtagval = self.document.location.hash.replace("#","");

// get id of element from hashtagval (class name)
var counter = $('.'+hashtagval).attr('id');
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:59:23.677

好的，我测试了它，它可以很好地添加 #a 和 #b 到哈希。

在您旁边，您正在滥用哈希属性。hash 属性用于定义页面的视图状态（例如屏幕应该移动到本段），而不是存储一些本地变量，然后用于应用​​程序逻辑！

```
<!doctype html>
    <html>
        <head>
            <meta charset="utf-8">
            <title>Demo</title>
            <script src="jquery.js"></script>
            <script>
                $(document).ready(function() {
                    var change = true;
                    $('#ba').click(function() {
                        // get hashtag value
                        if(self.document.location.hash) {
                            var urlhash = self.document.location.hash;
                            var hashtagval = self.document.location.hash.replace("#", "");

                            // get id of element from hashtagval (class name)
                            var id = $('.' + hashtagval).attr('id');
                            $('body').append('<h1>id=' + id);
                        }
                    });
                });
            </script>
        </head>
        <body>

            <button type="button" id="ba" >
                Click Me!
            </button>

            <div>
                <p id="foundthisthing" class="a">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
                <p id="thisworkstoo"class="b">
                    eafdsaf dsa dgsf dgadg dfg dagfadgLorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </p>
            </div>
        </body>
    </html> 
```

# objective-c - 相同的产品id 两个苹果开发者账号

> ID：12384409
> 
> 赞同：1
> 
> 时间：2012-09-12T08:49:58.713
> 
> 标签：objective-c, ios, in-app-purchase

我正在开发一个`iOS`应用程序，我有两个开发者帐户，一个是我的，第二个是我的客户的。在我正在使用的应用程序中`InAppPurchase`，问题是我在我的帐户中添加了一个产品 ID，并在我的客户的帐户中添加了它（相同的 ID）；我知道`InAppPurchase`应用程序 ID 的产品 ID 应该是唯一的。

我可以在两个应用程序中添加相同的产品 ID 吗？如果我在我的帐户中删除它，它会解决问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:46:40.343

您已经提交了 inAp 购买产品 ID 以供 Apple 审核？一旦在一个帐户中审核，您就不能在其他帐户中使用相同的 ID。如果尚未提交审核，那么您可以安全地将其从您的帐户中删除并将其添加到客户帐户中。

inAP 产品 id 的格式：

```
com.companyName.projectName.inApProductId 
```

所以遵循这个语法，你再也不会遇到同样的问题了。

# android - 网络切换时应用程序不工作

> ID：12384412
> 
> 赞同：0
> 
> 时间：2012-09-12T08:50:09.857
> 
> 标签：android, https

我的 android 应用程序`https`在`2G connection`. 但无法连接`3G network`。我无法找出它背后的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:10:39.273

尝试添加权限：

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE" /> 
```

并研究这个[答案](https://stackoverflow.com/questions/2513713/how-to-use-3g-connection-in-android-application-instead-of-wi-fi)

# php - 如何在 Symfony2 中的实体表单中添加额外的非实体字段

> ID：12384414
> 
> 赞同：36
> 
> 时间：2012-09-12T08:50:16.113
> 
> 标签：php, symfony

我已经使用 Entity 中的一个元素创建了表单：

```
$promo = new Promo();

$form = $this->createFormBuilder($promo)
        ->add('code', 'text')
        ->getForm(); 
```

我想添加文件元素（实体中不存在此字段）。当我做：

```
$form = $this->createFormBuilder($promo)
        ->add('code', 'text')
        ->add('image', 'file')
        ->getForm(); 
```

我有一个错误：属性“image”和方法“getImage()”都没有。如何添加此字段？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-12T09:08:06.513

使用[映射](http://symfony.com/doc/current/reference/forms/types/form.html#mapped)：

```
$form = $this->createFormBuilder($promo)
    ->add('code', 'text')
    ->add('image', 'file', array(
                "mapped" => false,
            ))
    ->getForm(); 
```

在旧的 Symfony 版本（2.0 和更早版本）中，使用[property_path](http://symfony.com/doc/current/reference/forms/types/form.html#property-path)：

```
$form = $this->createFormBuilder($promo)
    ->add('code', 'text')
    ->add('image', 'file', array(
                "property_path" => false,
            ))
    ->getForm(); 
```

“property_path”在 Symfony 2.3 中被移除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:07:33.910

使用[`property_path`](http://symfony.com/doc/current/reference/forms/types/form.html#property-path)选项：

```
$builder->add('image', 'file', [
    'property_path' => false,
]); 
```

# maven - 如何在 maven jar 构建过程中包含外部 jar？

> ID：12384417
> 
> 赞同：21
> 
> 时间：2012-09-12T08:50:20.433
> 
> 标签：maven, jar, maven-plugin, maven-assembly-plugin

我想在 Maven 中构建一个具有依赖项的 .jar 文件。不幸的是，我必须在构建路径中包含一些外部 .jar。当我现在尝试使用 maven 包构建这个项目时，我会收到一个错误，即找不到那些外部 .jar。

如何调整我的 pom 文件以添加这些罐子？当前的：

```
 <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-dependency-plugin</artifactId>
                <executions>
                    <execution>
                        <id>copy-dependencies</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>copy-dependencies</goal>
                        </goals>
                        <configuration>
                            <outputDirectory>${project.build.directory}/classes/lib</outputDirectory>
                            <overWriteReleases>false</overWriteReleases>
                            <overWriteSnapshots>false</overWriteSnapshots>
                            <overWriteIfNewer>true</overWriteIfNewer>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-assembly-plugin</artifactId>
                <version>2.2-beta-4</version>
                <configuration>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>single</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
    </plugins> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T10:17:13.980

您可以将外部 jar 作为依赖项包含在构建路径中`<scope>system</scope>` 。

检查此[链接](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#System_Dependencies)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-02T09:25:25.163

您需要使用以下命令将外部 jar 添加到 .m2 文件夹中

```
mvn install:install-file -Dfile=[JAR] -DgroupId=[some.group] -DartifactId=[Some Id] -Dversion=1.0.0 -Dpackaging=jar 
```

这会将给定的 jar 添加到您的 .m2 文件夹中。之后转到 pom.xm 并添加具有给定组 ID、工件 ID 和版本的依赖项。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-26T14:46:03.540

一个简单的解决方案是将其添加到本地 maven 存储库中

一种方法是通过上一篇文章中建议的 mvn install 命令。

另一种简单的方法是，

1.  在您的 Eclipse IDE 中，右键单击项目选择 Maven 选项。
2.  选择安装或将工件部署到 Maven 存储库选项，然后单击下一步。
3.  单击工件文件复选框旁边的浏览并选择您的 jar 文件。
4.  输入 GroupId 和 ArtifactId 和版本确保生成 pom 和创建校验和被检查并且包装是 jar

点击完成，沃拉！！！您的工作已完成，jar 已添加到您可以在 setting.xml 或 m2 目录中定义的本地存储库中。

现在只需根据您根据导入输入的 GroupId、ArtifactId 和 jar 版本添加简单的 maven 依赖项，这就是您的外部 jar 将由 maven 打包。

# xml - 无法在 T-SQL (ms sql) 中修改 XML 节点的值

> ID：12384418
> 
> 赞同：0
> 
> 时间：2012-09-12T08:50:22.567
> 
> 标签：xml, tsql, xml-dml

我想在 mssql 中修改我的 xml 节点值，但我的方法似乎不起作用。

**这是一个 xml 示例：**

```
<xml>
  <ProjectManager>
    <People>
      <DisplayNames>John Smith</DisplayNames>
      <LoginNames>ABC\jsmith</LoginNames>
    </People>
  </ProjectManager>
</xml> 
```

**我的功能的一部分：**

```
CREATE FUNCTION [dbo].[MyFunc](
    @properties xml, 
    @key nvarchar(50),
    @newvalue nvarchar(max), 
    @datatype nvarchar(50) = null,
    @node nvarchar(50) = null) 
    RETURNS xml
WITH SCHEMABINDING
AS BEGIN 
    DECLARE @temp XML = @properties

    IF LOWER(@datatype) = 'people' 
        SET @temp.modify('replace value of (/xml/*[local-name() = sql:variable("@key")][1]/People/*[local-name() = sql:variable("@node")]/text())[1] with sql:variable("@newvalue")')

RETURN @temp;
END 
```

**调用函数：**

```
set @result = dbo.MyFunc(@myXML,'ProjectManager','Somebody','People','DisplayName') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:54:39.307

DisplayName is plural in your XML.

Use

```
set @result = dbo.MyFunc(@myXML,'ProjectManager','Somebody','People','DisplayNames') 
```

# c# - 如何在 C# Winforms 中绘制 Windows 窗体的边框？

> ID：12384422
> 
> 赞同：2
> 
> 时间：2012-09-12T08:50:44.750
> 
> 标签：c#, winforms, border-layout

如何将我们的 Winforms 显示为 MetroUI .. 不使用 3rd 方 dll ......我的意思是如何绘制表单的边框

```
 [Form1_______________-|[]|X] <- I Can able to change the color of this part
     |                          |
     |                          |<- I cant change the color of this part
    -|                          |
    ||__________________________|
    |          |-> I cant change the color of this part
    V
    I cant change the color of this part 
```

* * *

我没有这个..但是它给出了静态颜色我想改变颜色...所以请给我一些想法

```
 public Form1()
    {
        InitializeComponent();
        Region = System.Drawing.Region.FromHrgn(CreateRoundRectRgn(0, 0, Width, Height, 0, 0));

    }
    [DllImport("Gdi32.dll", EntryPoint = "CreateRoundRectRgn")]
    private static extern IntPtr CreateRoundRectRgn
    (
        int nLeftRect, // x-coordinate of upper-left corner
        int nTopRect, // y-coordinate of upper-left corner
        int nRightRect, // x-coordinate of lower-right corner
        int nBottomRect, // y-coordinate of lower-right corner
        int nWidthEllipse, // height of ellipse
        int nHeightEllipse // width of ellipse
     ); 
```

# javascript - 在另一个函数成功结束后调用一个函数

> ID：12384427
> 
> 赞同：0
> 
> 时间：2012-09-12T08:51:12.800
> 
> 标签：javascript, jquery, ajax, callback

我想在一个完全结束后调用一个 javascript（使用 jQuery）函数。

我知道有一种方法可以使用带有 'success:' 参数的 $.ajax() 函数。有没有办法在不使用 $.ajax() 函数的情况下做同样的事情？

例如，如果我有：

```
var test = function()
{
    alert('Hello !');
}

var test_check = function()
{
    alert('Hello has been displayed successfully');
} 
```

有没有办法调用 test(); 然后 test_check() 只有在 test() 实际完成之后？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T08:52:51.197

该函数将在完成后返回，因此您只需在它之后调用下一个函数：

```
test();
test_check(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T08:53:47.760

```
var test = function()
{
    alert('Hello !');
    test_check(); /* call test_check() at the very end of test() */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T08:54:47.137

以下将起作用

```
test();
test_check(); 
```

`test_check`将在执行`test`完成后执行。

# hibernate - 使用 joinColumn 的单向一对多映射

> ID：12384431
> 
> 赞同：2
> 
> 时间：2012-09-12T08:51:20.680
> 
> 标签：hibernate, nhibernate-mapping

根据休眠文档，休眠团队强烈建议不要在没有连接表的情况下使用一对多单向映射。我想知道这是因为性能问题还是背后有任何其他原因。

说如果有一个员工可以有很多电话号码，那么我会有这个映射

```
@Entity
public class Employee { 
...
 @OneToMany
 @JoinColumn(name="employee_fk")
 public List<Phone> phones;
 ...
 }

@Entity
public class Phone { 
...
} 
```

Hibernate 将使用外键生成电话表，所以我在这里看不到任何问题。另外，我不想让电话课程拥有员工财产。Hibernate 团队建议在这种情况下使用连接表，但我为什么要不必要地创建一个表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:28:28.837

这更像是一个设计问题而不是性能问题。如果您认为 Phone 不知道分配给它的员工，这意味着 Phone 实体独立于 Employee 实体。如果它独立于 Employee 实体，它的表不应该有 Employee 表的外键。

此外，由于电话不知道它的员工，这意味着它可能被重用并与其他类型的实体相关联：公司、客户等。拥有所有实体的外键是有问题的在电话桌本身有一部电话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:04:08.603

在单向映射的情况下，休眠将两次命中数据库，

对于同一员工约翰的新手机，它会做这样的事情

在 phn no 表中插入一个新的电话号码

用 phn no 表中的这个 phn no 更新员工 id(john)

此外，您还需要映射您的电话持久性类并在特定员工处注册，否则您的电话类将被重用，我想您不想这样做。

# android - android在没有finish（）的情况下从堆栈中清除特定活动

> ID：12384439
> 
> 赞同：0
> 
> 时间：2012-09-12T08:51:41.820
> 
> 标签：android, android-activity, stack-trace

在我的应用程序中，我有三个主要活动，分别命名为 Home、List 和 Details

我的第一次导航如下`Name -> List -> Details`

在“详细信息”页面中，当用户选择任何选项时，我将再次调用相同的活动以显示新的详细信息。这种情况持续了 n 次。

在详细信息页面中，我有三个重要按钮`1\. back, 2\. List, 3\. Home`

我来自详细信息页面的问题是

```
1\. when List button is clicked i have to move on to the List Activity, and by pressing back button from List Activity i need to show Home page, not Details Page

2\. when Home button is clicked i have to move on to the Home Activity, and by pressing back button from Home Activity i need the app to get closed.

3\. back -> 
   a. when the user comes first time to the Details page, by pressing back button he needs to move to List Activity

   b. after loading the Details activity again and again, by pressing the back button user can move on to previous Details, here the condition is while starting the activity i should not give finish(), because this causes the data to get loaded of a long time 
```

如何克服上述问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:20:04.730

现在我们将一一看到您的问题：

```
1\. when List button is clicked i have to move on to the List Activity, and by pressing back button from List Activity i need to show Home page, not Details Page 
```

现在您可以通过以下方式实现：

每当您参加任何其他活动时都不要打电话`finish()`。`home or list activity`

这样，`Home activity`将始终存在于堆栈中。所以现在，呼吁`startActivity`或`Home activity`设置`List activity`标志，因为`FLAG_ACTIVITY_REORDER_TO_FRONT`这应该把你的活动带到前面。

```
2\. when Home button is clicked i have to move on to the Home Activity, and by pressing back button from Home Activity i need the app to get closed.
3\. back -> 
   a. when the user comes first time to the Details page, by pressing back button he needs to move to List Activity
b. after loading the Details activity again and again, by pressing the back button user can move on to previous Details, here the condition is while starting the activity i should not give finish(), because this causes the data to get loaded of a long time 
```

同样，这可以通过使用与上面设置的标志相同的 home 的 startActivity 来完成。

**或者**

使用`startActivityForResult()`from`details`到任何其他活动。因此，现在当您想`Home`从（所有）`Details`活动返回活动时，并使用`setResult`as ex.:`RESULT_FINISH`并`onActivityResult()`检查此`result code`内容，如果您收到此结果代码，请调用`finish`活动`details`。

```
This way, all your Details activity will get finished. 
```

并从`Home`活动中。如果您按`finish()`，您的应用程序将关闭`(make sure all your activities are calling finish at some point of time.)`，因为您的所有活动都已完成。

**编辑：**

当您从 开始时`Home > List > Details`，您的问题是：

```
1\. when List button is clicked from details activity, i have to move on to the List Activity, and by pressing back button from List Activity i need to show Home page, not Details Page. 
```

如果您不为任何活动调用 finish() ，这将起作用`Home > List > Details`。

现在，您可以多次从 Details 调用 Details，为此，我建议，这是一个虚拟代码：

```
 public class Details extends Activity{

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        /*
         * If user presses back button, handle it like this:
         */
        if(requestCode == REQUEST_DETAILS) {
            if(resultCode == RESULT_FINISH) {
                finish();
            }
        }
        // In this way all your Details Activity will get finished.
    }

    @Override
    public void onBackPressed() {
        super.onBackPressed();
        /*
         * If user presses back button, call following:
         * 
         * set some flag as TRUE, ex.: 
         * 
         * flagIsFinishing = true;
         * 
         * setResult(RESULT_FINISH);
         * finish()
         */
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        /*
         * if(flagIsFinishing) { 
         *      setResult(RESULT_FINISH);
         *      finish();
         * }
         * 
         */
    }

    @Override
    protected void onResume() {
        super.onResume();
        /*
         * On selecting any option call Details activity like
         * 
         * startActivityForResult(intent, REQUEST_DETAILS);
         */
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:16:30.437

我通过使用标志解决了这个问题`OnResume()`

在详细信息页面`List button is clicked i am calling onBackPressed();`中，当时我将布尔标志设置为真。

默认情况下，如果`Detail Activity is called` 它`first time`获取`back to`上一个活动，即`List Activity`。

如果`Detail activity is called for n number of times`单击 和 List 按钮，布尔值为 true，`onResume`则我调用了该函数`onBackPressed();`，它得到`moved to the List Activity`

# c# - 如何捕获 AutoCAD.NET 中引发的未处理异常

> ID：12384442
> 
> 赞同：4
> 
> 时间：2012-09-12T08:51:46.187
> 
> 标签：c#, autocad, autocad-plugin

在我的 Autocad.NET 应用程序中，我想使用 log4net 记录所有未处理的异常。AutoCAD 本身会显示一个带有详细消息的错误对话框 -> 因此必须有一种方法可以注册到某个事件。

我试图`AppDomain.CurrentDomain.UnhandledException`在应用程序初始化时注册事件：

```
AppDomain.CurrentDomain.UnhandledException += (s, e) =>
{
     System.Exception exception = (System.Exception)e.ExceptionObject;
     log.Error(String.Format("Unhandled Exception: {0}\n{1}", exception.Message, exception.StackTrace));
}; 
```

但是这个事件永远不会被触发。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T19:04:30.843

在 ObjectARX 中，有一个名为 acedDisableDefaultARXExceptionHandler 的函数。您可以尝试 P/Invoke 它。

```
 // EntryPoint may vary across autocad versions
    [DllImport("acad.exe", EntryPoint = "?acedDisableDefaultARXExceptionHandler@@YAXH@Z")]
    public static extern void acedDisableDefaultARXExceptionHandler(int value); 
```

您也可以尝试 System.Windows.Forms.Application.ThreadException：[http ://through-the-interface.typepad.com/through_the_interface/2008/08/ catching-except.html](http://through-the-interface.typepad.com/through_the_interface/2008/08/catching-except.html)

最简单的方法是将所有代码包装在 try/catch 块中。在 AutoCAD 中，有两种执行代码的方法：

**用一个命令**

为避免重复代码，请声明如下接口：

```
public interface ICommand
{
  void Execute();
} 
```

然后将其用于您的命令：

```
public class MyCommand : ICommand
{
  void Execute()
  {
    // Do your stuff here
  }
} 
```

在定义命令的类中，使用此通用方法执行：

```
void ExecuteCommand<T>() where T : ICommand
{
  try
  {
    var cmd = Activator.CreateInstance<T>();
    cmd.Execute();
  }
  catch (Exception ex)
  {
    Log(ex);
  }
} 
```

现在您的命令如下所示：

```
[CommandMethod("MYCMD", CommandFlags.Modal)]
public void MyCommand()
{
  ExecuteCommand<MyCommand>();
} 
```

**在事件处理程序中**

在这种情况下，由于您需要事件参数，只需将代码直接包装在 try/catch 中即可。

# javascript - UIAutomation [UITextField resignFirstResponder]

> ID：12384444
> 
> 赞同：0
> 
> 时间：2012-09-12T08:51:53.270
> 
> 标签：javascript, ios, unit-testing, automated-tests, ui-automation

使用 UI 自动化测试时如何关闭键盘？我一直在查看[UIAElement](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIAElementClassReference/UIAElement/UIAElement.html#//apple_ref/doc/uid/TP40009903)和[UIATextField](http://developer.apple.com/library/ios/#documentation/ToolsLanguages/Reference/UIATextFieldClassReference/UIATextField/UIATextField.html#//apple_ref/doc/uid/TP40009925)文档，但找不到建议的内容。

```
var textField = toolbar.textFields()[0];
var textView = toolbar.textViews()[0];
function testFeature1() {
    if (textField.hasKeyboardFocus() || textView.hasKeyboardFocus()) {
        // Resign first responder .. How?
    }
    // Do my tests
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-07T22:09:42.307

这是一个很老的问题，但我现在必须处理这个问题。该命令完美运行：

```
target.frontMostApp().keyboard().typeString("\n"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-07T00:17:29.027

从 UIAutomation 中，您实际上无法访问内部来执行诸如辞职第一响应者之类的事情——UIAutomation 就像您的应用程序的普通用户一样。你能做到吗：

`app.keyboard().buttons()["return"].tap();`?

# git - 摆脱悬垂的斑点最安全的方法是什么

> ID：12384445
> 
> 赞同：2
> 
> 时间：2012-09-12T08:51:55.703
> 
> 标签：git

```
git version 1.7.11.4 
```

有什么安全的方法可以摆脱悬空的 blobs/commits。我只是担心万一我不小心删除了一些东西。

```
git fsck
Checking object directories: 100% (256/256), done.
Checking objects: 100% (13017/13017), done.
dangling blob 6b9542f29f534b377f9ad280d6d342a4114146ec
dangling blob 0d1779fc8bac49a45b216e1891345b7f69ee068c
dangling blob f8ae5bad210ac84d66d28cb723dcad5b3f325bff
dangling blob e84f8c37c239bc591a52b1169669fb8f593b39b2
dangling blob 5d605b5d6ca0c7cb8d1bc05607eefada2092219b
dangling blob 9363f36de455d504cba3e78fbfb0cb133292fe55
dangling blob 0df63ff9133cc21b45a417958cb012689ebdc4cd
dangling commit fe764632c9d283b558f1326c56f940b3f3aea931
dangling blob b67bedfd9682fbc84f38d44b5112087dff004adc 
```

我尝试了以下方法：

```
git gc --auto
git clean -f 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:59:40.360

首先，有一个`reflog`跟踪所有分支历史的方法。默认为 90 天 (gc.reflogExpire)。还有`gc.reflogExpireUnreachable`就是30天。因此，如果您`reset`在分支上进行了悬空提交，则悬空提交将在此处保留 30 天，可通过`fsck`.

此外，还有一个垃圾收集器修剪设置，默认情况下会在 2 周后丢弃悬空对象（`gc.pruneExpire`配置设置）。

关于如何从存储库中清除对象，您可以在此处阅读其他问题，例如[如何真正删除 git 分支（即删除其所有对象/提交）？](https://stackoverflow.com/questions/2882375/how-to-really-delete-a-git-branch-i-e-remove-all-of-its-objects-commits)

`clean`从您的工作副本中删除未跟踪的文件，它与 blob/commits 无关。

# c++ - OpenCV VideoCapture 太慢了

> ID：12384446
> 
> 赞同：2
> 
> 时间：2012-09-12T08:51:59.293
> 
> 标签：c++, performance, opencv

一年以来，我一直在开发一种处理来自 IP 摄像机的视频流的软件。该软件实时显示视频，还可以录制视频，做一些视频处理等。IP 摄像机可以通过 RTSP 流式传输 MJPEG 或 H264 视频。视频大小为 768x576，25fps。我的问题是当我使用 H264 流时，抓取方法太慢了，需要 30 到 60 毫秒。我的程序不只是抓取帧，所以如果抓取方法需要 50ms，我无法处理 25fps 的视频。我不明白的是我有一台非常强大的计算机 DualCore @3Ghz。有什么方法可以用 OpenCv 快速抓取框架？

这是我的代码的一部分（使用 Qt + home built OpenCv 2.4.1 MinGw）：

开始捕获：

```
videoCapture.open(fileName.toStdString());
queryFrameTimer->start(20);
connect(queryFrameTimer,SIGNAL(timeout()),this,SLOT(queryFrame())); 
```

查询框架方法

```
void VideoStreamer::queryFrame()
{
    qDebug() << QTime::currentTime().toString("mm:ss:zzz") << "queryFrame start";
    QTime elapsedTimer;
    elapsedTimer.start();    
    Mat frame;
    videoCapture >> frame;
    qDebug()  <<" VideoStreamer::queryFrame " + QString::number(elapsedTimer.elapsed());
    [...]
} 
```

调试输出

```
"41:07:366" queryFrame start 
" VideoStreamer::queryFrame 44 ms" 
"41:07:429" queryFrame start 
" VideoStreamer::queryFrame 35 ms" 
"41:07:493" queryFrame start 
" VideoStreamer::queryFrame 37 ms" 
"41:07:556" queryFrame start 
" VideoStreamer::queryFrame 28 ms" 
"41:07:595" queryFrame start 
" VideoStreamer::queryFrame 38 ms" 
"41:07:648" queryFrame start 
" VideoStreamer::queryFrame 42 ms" 
"41:07:710" queryFrame start 
" VideoStreamer::queryFrame 34 ms" 
"41:07:772" queryFrame start 
" VideoStreamer::queryFrame 38 ms" 
"41:07:835" queryFrame start 
" VideoStreamer::queryFrame 28 ms" 
"41:07:866" queryFrame start 
" VideoStreamer::queryFrame 56 ms" 
"41:07:959" queryFrame start 
" VideoStreamer::queryFrame 25 ms" 
"41:07:990" queryFrame start 
" VideoStreamer::queryFrame 60 ms" 
"41:08:053" queryFrame start 
" VideoStreamer::queryFrame 35 ms" 
"41:08:115" queryFrame start 
" VideoStreamer::queryFrame 27 ms" 
"41:08:147" queryFrame start 
" VideoStreamer::queryFrame 64 ms" 
"41:08:241" queryFrame start 
" VideoStreamer::queryFrame 24 ms" 
"41:08:275" queryFrame start 
" VideoStreamer::queryFrame 56 ms" 
"41:08:335" queryFrame start 
" VideoStreamer::queryFrame 50 ms" 
```

# javascript - 加载事件序列

> ID：12384449
> 
> 赞同：-1
> 
> 时间：2012-09-12T08:52:21.087
> 
> 标签：javascript, html

我正在尝试使用 write 方法和 onload 事件。这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body onload="document.write('body loaded!')">
        <h1>Hello World!</h1>
        <img onload="document.write('img loadeld!')" src="smiley.gif" alt="Smiley face" width="42" height="42" />
    </body>
</html> 
```

在这种情况下，事件的顺序是什么？浏览器会先创建 body 元素并调用“body loaded”还是先创建 img 元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:14:40.080

我建议你创建一个`div`比使用`innerHTML`属性来写一些东西的东西。示例代码是：

```
<img src = "hi.jpg" onLoad = "function1()"/>
<div id = "xyz"></div> 
```

Javascript部分：

```
<script>
function function1(){
document.getElementById("xyz").innerHTML = "Imageloaded!!";
}
</script> 
```

# wordpress - 第一篇已满，其余摘录

> ID：12384450
> 
> 赞同：1
> 
> 时间：2012-09-12T08:52:23.147
> 
> 标签：wordpress

我正在寻找一种方法来修改我的博客页面，以便完整显示第一篇文章，并将所有其他文章作为摘录。

我的博客页面的代码如下：

```
 <?php
        // Template Name: Blog Template
    ?>
    <?php get_header(); ?>
    <?php 
        global $more;
        $more = 0; 
    ?>
                <div class="container inner_content">
                    <div class="row">
                        <!--Page contetn-->
                        <div class="span8">
                            <?php if ( !is_archive() ) { ?>
                            <?php $paged = (get_query_var('paged')) ? get_query_var('paged') : 1; query_posts('paged='.$paged.'&cat='.$cat); ?>     
                            <?php } ?> 
                            <?php if (!(have_posts())) { ?><div class="span12"><h2 class="colored">There is no posts</h2></div><?php }  ?>   
                            <?php if ( have_posts() ) : while ( have_posts() ) : the_post(); 
                            ?>
                            <?php $large_image_url = wp_get_attachment_image_src( get_post_thumbnail_id(), 'large'); ?>
                            <section>
                                <div class="row <?php post_class(); ?>" id="post-<?php the_ID(); ?>">
                                    <div class="span2">
                                        <div class="ddate">
                                            <h5><i class="icon-calendar"></i> <?php the_time('d') ?> <?php the_time('M') ?> / <?php the_time('Y') ?></h5>
                                            <div class="firstA"></div>
                                        </div>
                                        <div class="meta">
                                            <span><strong><i class="icon-user"></i> Author:</strong> <?php the_author_meta('nickname'); ?></span>
                                            <span><strong><i class="icon-list-alt"></i> Tags:</strong> <?php $tag = get_the_tags(); if (! $tag) { ?> There is no tags<?php } else { ?><?php the_tags(''); ?><?php } ?></span>
                                            <span><strong><i class="icon-comment"></i> Comments:</strong> <a href="<?php the_permalink() ?>#comments"><?php comments_number('0','1','%')?></a></span>
                                        </div>
                                        <hr>
                                        <span class="share">Share: </span>
                                        <!-- AddThis Button BEGIN -->
                                        <a class="addthis_button" href="http://www.addthis.com/bookmark.php?v=250&amp;pubid=ra-4f8811347196f281"><img src="http://s7.addthis.com/static/btn/v2/lg-share-en.gif" width="125" height="16" alt="Bookmark and Share" style="border:0"/></a>
                                        <!-- AddThis Button END -->
                                        <hr>
                                    </div>
                                    <div class="span6">
                                        <div class="blog_item">
                                            <div class="blog_head">
                                                <h3><a href="<?php echo the_permalink(); ?>"><?php the_title(); ?> </a></h3>
                                            </div>
                                            <?php if (get_post_meta($post->ID, video, true));{ ?>
                                                <?php echo get_post_meta($post->ID, video, true); ?>
                                            <?php }?>
                                            <?php if (( has_post_thumbnail())) { ?>
                                            <div class="view view-first">
                                                <a href="<?php echo $large_image_url[0]; ?>" rel="prettyPhoto"><img src="<?php echo $large_image_url[0]; ?>" alt="" /></a>
                                                <div clas="mask">
                                                    <a href="<?php echo $large_image_url[0]; ?>" rel="prettyPhoto" class="info"><img src="<?php echo get_template_directory_uri(); ?>/assets/img/plus.png" alt="" /></a>
                                                    <a href="<?php echo the_permalink(); ?>" class="link"><img src="<?php echo get_template_directory_uri(); ?>/assets/img/link.png" alt="Visit link" /></a>
                                                </div>
                                            </div>
                                            <?php } ?>
                                            <?php the_excerpt('<br><a class="btn btn-small" style=" margin-top:15px;" href="'. get_permalink($post->ID) . '">Read More</a>'); ?>
                                        </div>
                                    </div>
                                </div>
                            </section>
                            <?php endwhile;  ?> 
                            <?php endif; ?>
                            <section>
                                <hr style="margin-top:0px;">
                                <?php if (function_exists('wp_corenavi')) ?><ul class="pager" style="float:left;"> <?php wp_corenavi(); ?></ul>
                            </section>
                        </div>
                        <!--/Page contetn-->
                        <!--Sidebar-->
                        <div class="span4 side_bar">
                            <section class="blog_cat">
                                <div class="well">
                                    <?php get_sidebar(); ?>
                                </div>
                            </section>
                        </div>
                        <!--/Sidebar-->
                    </div>
                </div>
    <?php get_footer(); ?> 
```

如果任何专家可以为此提供一些帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:33:14.093

您可以简单地在循环中使用布尔值来测试它是否是第一篇文章：

修改循环的开头：

```
<?php if ( have_posts() ) : $first=true; while ( have_posts() ) : the_post(); ?> 
```

并根据`$first`值显示内容或摘录：

```
<?php if ($first) { $first=false; the_content(); }
else the_excerpt('<br><a class="btn btn-small" style=" margin-top:15px;" href="'. get_permalink($post->ID) . '">Read More</a>'); ?> 
```

# python - 只允许正十进制数

> ID：12384460
> 
> 赞同：49
> 
> 时间：2012-09-12T08:52:50.960
> 
> 标签：python, django

在我的 Django 模型中，我创建了一个像这样的十进制字段：

```
price = models.DecimalField(_(u'Price'), decimal_places=2, max_digits=12) 
```

显然，价格为负数或为零是没有意义的。有没有办法将十进制数限制为仅正数？

还是我必须使用表单验证来捕获它？

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-09-12T08:59:45.390

使用[`MinValueValidator`](https://docs.djangoproject.com/en/dev/ref/validators/#minvaluevalidator).

```
price = models.DecimalField(_(u'Price'), decimal_places=2, max_digits=12, validators=[MinValueValidator(Decimal('0.01'))]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-28T15:48:26.023

你可以做这样的事情：

```
# .....
class priceForm(ModelForm):
    price = forms.DecimalField(required=False, max_digits=6, min_value=0) 
```

这也负责“价格”的验证者值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-21T14:16:45.673

在 Django 2.2 中，您可以[向模型添加约束，该模型](https://docs.djangoproject.com/en/2.2/ref/models/options/#django.db.models.Options.constraints)将在迁移中作为数据库表的约束应用：

```
from decimal   import Decimal
from django.db import models

class Item(models.Model):
    price = models.DecimalField( _(u'Price'), decimal_places=2, max_digits=12 )

    class Meta:
        constraints = [
            models.CheckConstraint(check=models.Q(price__gt=Decimal('0')), name='price_gt_0'),
        ] 
```

[笔记：](https://docs.djangoproject.com/en/2.2/ref/models/constraints/)

> **约束验证**
> 
> 一般约束期间不检查`full_clean()`，也不提出`ValidationErrors`。相反，您会在`save()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-29T07:17:49.847

假设这是您的产品模型，并且您想在价格字段上添加非负约束。您可以在模型上添加元约束：

```
class Product(models.Model):
    price = models.DecimalField(max_digits=13, decimal_places=2)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)

    class Meta:
        managed = True
        db_table = 'product'
        constraints = [
            models.CheckConstraint(check=models.Q(price__gte='0'), name='product_price_non_negative'),
        ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-03T12:10:23.313

根据文档，似乎没有办法在字段上放置诸如数据库约束之类的东西。您可以做的最好的事情是添加模型“验证器”，如果您调用模型验证或使用`ModelForm`. 如果您只是将值放入对象和`save()`.

因此，您可以在表单上添加验证，或者您可以向模型添加验证，如果您使用`ModelForm`.

来自[“验证器如何运行”的文档](https://docs.djangoproject.com/en/stable/ref/validators/#how-validators-are-run)：

> 有关验证器如何在表单中运行的更多信息，请参阅[表单验证](https://docs.djangoproject.com/en/stable/ref/forms/validation/)，以及[验证对象](https://docs.djangoproject.com/en/stable/ref/models/instances/#validating-objects)以了解它们如何在模型中运行。请注意，当您保存模型时，验证器不会自动运行，但如果您使用 a [`ModelForm`](https://docs.djangoproject.com/en/stable/topics/forms/modelforms/#django.forms.ModelForm)，它将在表单中包含的任何字段上运行您的验证器。有关模型验证如何与表单交互的信息，请参阅[ModelForm 文档](https://docs.djangoproject.com/en/stable/topics/forms/modelforms/) 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-28T12:46:14.047

1.  导入依赖

```
from decimal import Decimal
from django.core.validators import MinValueValidator 
```

2.  添加验证器

```
price = models.DecimalField(
 decimal_places=2, 
 max_digits=12, 
 validators=[MinValueValidator(Decimal('0.01'))]
) 
```

# objective-c - Objective-C 中 rand() 之后的 if 语句

> ID：12384462
> 
> 赞同：-2
> 
> 时间：2012-09-12T08:53:00.133
> 
> 标签：objective-c, random, if-statement, switch-statement

我是 Objective-C 和 C 语言的初学者。

我的代码如下所示：

```
- (IBAction)button:(id)sender {
    int randomproces = rand() % 3;
    switch (randomproces) {
        case 0:
            //do this
            break;
        case 1:
            //do this
            break;
        case 2:
            //do this
            break;
        default;
            break;
    }
} 
```

现在我想为另外 3 个按钮设置一些东西，以根据随机情况使它们正确或不正确。

```
- (IBAction)b1:(id)sender {
    //if case 0 then set it correct
    //else incorrect
}

- (IBAction)b2:(id)sender {
    //if case 1 then set it correct
    //else incorrect
}

// etc 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:00:48.110

如果我正确理解你的问题，你想在处理程序中做不同的事情`b1`，`b2`并且`b3`取决于在处理程序中选择的随机值`button`吗？

在这种情况下，最简单的可能是在全局中创建随机数变量`button`，并在其他三个按钮处理程序中使用它：

```
int randomprocess = -1;

- (IBAction)button:(id)sender {
    randomproces = rand() % 3;
    // Do other stuff if needed
}

- (IBAction)b1:(id)sender {
    if (randomprocess == 0) {
        // Do something
    } else {
        // Do something else
    }
}

- (IBAction)b2:(id)sender {
    if (randomprocess == 1) {
        // Do something
    } else {
        // Do something else
    }
}

- (IBAction)b3:(id)sender {
    if (randomprocess == 2) {
        // Do something
    } else {
        // Do something else
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:05:28.267

您需要使用 switch 语句，因此

```
switch (num)
{
    case 1:
        //do code
        break;

    case 2:
        //more code
        break;

    default:
        //num didn't match any of the cases.
        //process as appropriate
} 
```

需要注意的一些事项：

*   The break at the end of each case is important. If you omit this, the case falls through into the next case. Though this is sometimes intentional, generally it isn't and results in subtle and difficult to understand bugs.
*   The 'default' label and code is optional. It is however good programming style to have a default case for exceptional circumstances, as something has probably gone wrong and you should deal with it as such.

# mysql - EC2 MySQL不断崩溃

> ID：12384464
> 
> 赞同：12
> 
> 时间：2012-09-12T08:53:07.900
> 
> 标签：mysql, amazon-ec2, innodb

我在 x64 amazon linux ami 上设置了一个 EC2 实例。

我正在使用 PHP 和 Wordpress 以及由 MySQL 支持的 W3 总缓存和 php-apc 来测试一个可以相对便宜地处理相当数量的连接的博客。

但是，我的mysql不断崩溃。

取自 /var/log/mysqld.log

```
120912  8:44:24 InnoDB: Completed initialization of buffer pool
120912  8:44:24 InnoDB: Fatal error: cannot allocate memory for the buffer pool
120912  8:44:24 [ERROR] Plugin 'InnoDB' init function returned error.
120912  8:44:24 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
120912  8:44:24 [ERROR] Unknown/unsupported storage engine: InnoDB 
```

有人知道这可能发生的原因吗？

当前内存使用情况（下）

```
[root@ip-obscure mysql]# free -m
             total       used       free     shared    buffers     cached
Mem:           594        363        230          0          3         67
-/+ buffers/cache:        293        301
Swap:            0          0          0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-11-23T16:25:25.893

小心断定你没有足够的内存，是的，这是你看到的错误，但这也是一个症状而不是原因。在为更大的实例付费之前等待，问题只会消失一段时间，直到内存再次填满。

小心创建 SWAP 文件，同样，您只是在包扎症状。

也要警惕更改配置设置（并限制 apache 或 mysql 的性能），这已经工作了一段时间，但现在突然服务器根本不会长时间运行。

想想这怎么可能真的是设置？如果在 PHP 中存在优化不佳的设置或内存泄漏，它会在相同的时间段后始终失败。因此，假设您不仅最近安装了新模块并且已经有一段时间的静态环境，那么不太可能是内存泄漏或设置。*显然，如果您刚刚安装新模块，禁用它们应该始终是第一步*

小心将数据库拆分到另一台服务器，这不会像购买更大的服务器不能解决问题一样解决问题。是的，每个函数最初都会获得更多内存，但随后......

小心从 apache 迁移到另一个 http 服务器，例如 NginX，这是一个激进的步骤，这可能会解决问题......但是出于错误的原因

我对其中的大部分感到内疚，并提出了许多错误的希望，直到我查看了 apache /var/log/httpd/ACCESS_LOG 文件，发现我的网站每秒被同一个 IP 多次访问，寻找一个名为XMLRPC.PHP，一种在 Wordpress 圈子中广为人知的 DDOS 攻击。

示例 access_log 条目 ....

**191.96.249.80 - - [21/Nov/2016:20:27:53 +0000] "POST /xmlrpc.php HTTP/1.0" 200 370**

每次收到它时，apache 都会尝试实例化一个子进程来服务该请求。不久之后，您的内存耗尽，apache 开始无法派生新进程，mysql 放弃尝试将内存空间分配给缓冲池。您基本上内存不足，所有这些请求都会使您的服务器停止运行。

为了解决这个问题，我更改了 .htaccess 文件以拒绝从该 IP 访问该文件，并且我的服务器立即恢复正常运行。

示例 .htaccess

```
<Files xmlrpc.php>

order allow,deny

deny from 191.96.249.80

allow from all

</Files>" 
```

希望我来之不易的发现对其他人有所帮助！

显然，如果您的访问日志没有显示 DDOS 效果，则可能是其他原因，请尝试以上所有方法！;-) 但我现在已经看到几个受此攻击影响的 wordpress/apache 站点。......同样的IP！可惜亚马逊 AWS 不允许在其安全组中加入黑名单。[叹]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T19:58:26.440

我想您的实例缺少执行您想做的事情所需的内存。

您是否考虑过使用 RDS for MySQL？这确实是 AWS 世界中的首选方法（至少对于 DB 而言，不需要高度的自定义配置），并且会比在 EBS 存储上运行 MySQL 提供更好的性能（我假设您正在这样做）无法持久化您的数据库内容）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-30T11:47:10.133

好吧，现在是 2016 年 12 月，显然这仍然存在。

一位客户报告说他的一个网站（不是我公司管理的）出现故障并请求支持。当我们开始寻找问题时，很明显他的网络服务器由于这个漏洞而受到 DDoS 攻击。

其他答案中几乎涵盖了缓解程序，所以我只想添加我的 2 美分：除了`.htaccess`规则之外，您还可以阻止发起请求的 IP `iptables`。请参阅[此处](https://www.digitalocean.com/community/questions/how-do-i-stop-brute-force-attacks-against-xmlrpc-php-from-crashing-my-wordpress-server)以获取快速概览。基本上你从中得到的是：

1.  Apache（或您正在使用的任何东西）不会消耗开销资源`403`来回复攻击来源，甚至不会记录它们（节省*大量*磁盘空间） - 您的机器将简单地忽略请求；

2.  如果您意识到请求来自同一个子网，您可以阻止每个子网源的请求，同时攻击许多攻击您的受感染机器。

这显然存在不验证所发出请求的有效性的缺陷，但这也是其他解决方案中的一个因素，并且`xmlrpc.php`仍然无法访问。此外，从这些来源请求的任何文件都将被拒绝。

基本上，我`grep`对`xmlrpc.php`被 Apache 记录的请求进行了计数，并计算了哪些是最有问题的：

```
cat  /var/log/apache2/access.log | grep xmlrpc.php | awk '{print $1;}' | sort -n | uniq -c | sort -nr | head -20 
```

这将打印出排名前 20 的最违规 IP 的排序列表。我注意到在我最讨厌的前 5 个中，有 4 个来自同一个子网。

然后，在您确定要阻止的那些之后，假设它们的 IP 如下`123.123.123.123`：

```
sudo iptables -A INPUT -s 123.123.123.123 -j DROP 
```

或者，如果您想定位某个子网：

```
sudo iptables -A INPUT -s 123.123.123.123/24 -j DROP 
```

`/24`表示您的目标是`123.123.123.XXX`XXX 可以是任何组合。尽可能多地重复此过程。我只用了几条规则就阻止了 90% 以上的请求，但是 YMMV。

另外，请注意，除非您删除`iptables`上面设置的规则，否则这将停止记录那些有问题的请求。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T20:16:14.233

错误说明了一切 - 没有足够的内存来容纳池。

如果这是一个负载较小的测试实例，那么您可以尝试安装小样本cnf

[http://fts.ifac.cnr.it/cgi-bin/dwww/usr/share/doc/mysql-server-5.0/examples/my-small.cnf](http://fts.ifac.cnr.it/cgi-bin/dwww/usr/share/doc/mysql-server-5.0/examples/my-small.cnf)

（官方的在 MySQL 网站上的某个地方，我似乎找不到它）。

否则，出于生产目的，我会认真考虑 Mike Brant 的解决方案；否则，您需要一个更大的 Amazon 实例。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-06-18T20:30:05.317

我通过调整 apache 来修复它 - 它通过尝试启动太多备用服务器来耗尽所有内存：

```
#MinSpareServers    5
#MaxSpareServers   20
MinSpareServers    2
MaxSpareServers   4 
```

当然，您需要一定的流量来运行您的网站，但我的流量很低。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-05T08:49:44.603

我的 t2.small EC2 实例也有类似的问题。我会登录并重新启动 mysql，网站会正常运行大约 5 分钟，然后熟悉的数据库错误消息会再次出现。

这是运行一个具有弹性 IP 的 Wordpress 网站。遵循这些步骤后，我没有丢失任何数据。我知道这是由于此实例上的 EBS 存储造成的。

脚步：

1.  登录 AWS 控制台

2.  转到 EC2 并选择实例

3.  操作 -> 实例状态 -> 停止（大约需要 3 分钟才能停止）

4.  操作 -> 实例设置 -> 更改实例类型（我从 t2.small 变为 t2.medium）

5.  动作 -> 实例状态 -> 开始

整个过程几乎没有花费任何时间，一旦实例启动，我重新加载了网站，一切都恢复了正常。

升级您的实例显然需要考虑价格。

更多信息：[http ://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-resize.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-instance-resize.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-16T21:48:42.227

根据上面 Binthere 的回答，我的 EC2 实例上的 MySQL 服务器崩溃也是由于 DDOS 攻击，而不是与内存不足的微型实例有关（这也很有可能）。根据我在网上找到的一些很棒的链接，以下是我为快速检查问题而采取的步骤。

1 - SSH 进入实例

2 - 须藤尾 -200 /var/log/httpd/access_log

然后我在 Wordpress XMLRPC 文件上看到了来自 1 个 IP 地址的大量 POST 请求。这是被攻击了。

3 - 如果他们与我联系，请保留此屏幕截图以向亚马逊滥用团队报告（他们首先采取行动，我在打电话给亚马逊后发现）

4 - sudo cp /var/lock/subsys/mysqld /root/mysqld

5 - sudo rm /var/lock/subsys/mysqld

6 - sudo 服务 httpd 停止

7 - sudo 服务 mysqld 重启

8 - 现在在重新启动网络服务器之前，我在 /var/www/html 的网络根目录中对 .htaccess 文件进行了一些更改（这些是针对我的攻击问题的） sudo nano /var/www/html.htaccess

命令允许，拒绝拒绝 *允许所有人*

 *9 - sudo 服务 httpd 启动

10 - 呼吸一个解脱的迹象（无论如何，在我的情况下！）

希望这对任何人都有帮助:)*

# ruby-on-rails-3 - 在 cent os 5.8 上为我的 rails 应用程序设置 Apache+passenger

> ID：12384466
> 
> 赞同：0
> 
> 时间：2012-09-12T08:53:11.427
> 
> 标签：ruby-on-rails-3, centos, virtualhost, passenger, httpd.conf

我正在为我的 cent OS 服务器 5.8 上的 rails 应用程序设置虚拟主机而苦苦挣扎。我已经安装了 apache 即 httpd。

然后使用`gem install passneger`.

安装工作正常。

`passenger-install-apache2-module`然后使用命令为乘客安装 apache 模块。

然后编辑 `/etc/httpd/conf/httpd.conf`并添加以下行来设置我的 virtulhost

```
LoadModule passenger_module /usr/local/rvm/gems/ruby-1.8.7-p160/gems/passenger-3.0.17/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.8.7-p160/gems/passenger-3.0.17
PassengerRuby /usr/local/rvm/wrappers/ruby-1.8.7-p160/ruby

<VirtualHost *:80>
  ServerAdmin webmaster@dummy-host.example.com
  RailsEnv development
  DocumentRoot /var/www/college/public
  ServerName dummy-host.example.com
  ErrorLog logs/dummy-host.example.com-error_log
  CustomLog logs/dummy-host.example.com-access_log common

 <directory /var/www/college/public>
   AllowOverride all
   Options -MultiViews
 </directory>

</VirtualHost> 
```

`# chown -R apache.apache *`使用命令将项目的所有者更改为 apache

现在我在我的应用程序“学院”中为“学生”创建了一个脚手架。但是`public/index`显示模型的`rails environment details`页面和索引页面都没有`student`工作。请指导我究竟出了什么问题，因为我是这些服务器配置的新手。谢谢！

**更新：** 我从公共目录中删除了索引页面并使用 home 方法创建了一个控制器页面。然后我设置了 root :to => 'pages#home'

现在当我检查它的日志时`dummy-host.example.com-error_log`显示

```
Directory index forbidden by Options directive: /var/www/college/public/ 
```

当我跟踪日志时，`/var/log/httpd/error_log`它显示

```
[notice] caught SIGTERM, shutting down
 [notice] SELinux policy enabled; httpd running as context root:system_r:httpd_t:s0
 [notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
 [error] *** Passenger could not be initialized because of this error: Cannot create FIFO file /tmp/passenger.3469/.guard: Permission denied (13)
 [warn] module passenger_module is already loaded, skipping
 [notice] Digest: generating secret for digest authentication ...
 [notice] Digest: done
[error] *** Passenger could not be initialized because of this error: Cannot create FIFO file /tmp/passenger.3471/.guard: Permission denied (13)
 [notice] Apache/2.2.3 (CentOS) configured -- resuming normal operations 
```

现在有人请告诉我出了什么问题？

**UPDATE2** 现在我遵循下面提到的答案。现在出现以下错误

```
[notice] SELinux policy enabled; httpd running as context root:system_r:httpd_t:s0
[notice] suEXEC mechanism enabled (wrapper: /usr/sbin/suexec)
[error] *** Passenger could not be initialized because of this error: The Passenger spawn server script, '/usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.15/lib/phusion_passenger/passenger-spawn-server', does not exist. Please check whether the 'PassengerRoot' option is specified correctly.
[warn] module passenger_module is already loaded, skipping
[notice] Digest: generating secret for digest authentication ...
[notice] Digest: done
[error] *** Passenger could not be initialized because of this error: The Passenger spawn server script, '/usr/local/lib/ruby/gems/1.8/gems/passenger-3.0.15/lib/phusion_passenger/passenger-spawn-server', does not exist. Please check whether the 'PassengerRoot' option is specified correctly.
[notice] Apache/2.2.3 (CentOS) configured -- resuming normal operations 
```

现在我的乘客安装成功了，那是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:26:30.650

你看到这篇文章[https://stackoverflow.com/a/2429590/621354](https://stackoverflow.com/a/2429590/621354)了吗？

我是 ubuntu 用户，但您的“apache”用户不是“www-data”？

# jquery - 关于使用jquery表单插件上传文件时如何获取文本值

> ID：12384467
> 
> 赞同：2
> 
> 时间：2012-09-12T08:53:13.287
> 
> 标签：jquery, html, jsp

我尝试使用 jquery 表单插件异步上传文件，这是我的源代码：

js代码：

```
$(document).ready(function(){
    $('form').ajaxForm(); 
}); 
```

html代码：

```
<form name="form1" enctype="multipart/form-data" action="upload_do.jsp" method="post">
<input name="testName" type="text">
<input name="myFile" type="file">
<input type="submit" name="Submit" value="submit" />
</form> 
```

但是，我无法在 jsp 文件中获取 testName 的值：

```
String testName= request.getParameter("testName"); 
```

如果我删除属性 enctype 并删除名为“myFile”的文件输入，那么我可以像往常一样获取 testName 的值，如下所示：

```
<form name="form1" action="upload_do.jsp" method="post">
<input name="testName" type="text">

<input type="submit" name="Submit" value="submit" />
</form> 
```

如何解决这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:42:51.853

由于您的 enctype 是“multipart/form-data”，服务器不会解析您的请求参数。由开发人员解析输入流并提取相关参数。

通常 apache commons fileupload 库用于此目的（[http://commons.apache.org/fileupload/](http://commons.apache.org/fileupload/)）

# java - 如何使用 FindBugs 插件列出所有 NetBeans 警告？

> ID：12384468
> 
> 赞同：2
> 
> 时间：2012-09-12T08:53:14.330
> 
> 标签：java, netbeans, findbugs

我将尝试使用 FindBug 插件列出所有代码错误，但该插件错过了警告（例如“添加 @Override 注释”、“不兼容类上的等于”、“未使用的导入”等）。

我错过了哪些设置？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T11:41:50.347

在**`Source -> Inspect`**窗口中，您必须选择**`Configuration: All Analyzers`**. 此外，还可以通过单击自定义分析器设置**`Manage`**

# grails - 用于部署战争的 Grails 脚本

> ID：12384470
> 
> 赞同：2
> 
> 时间：2012-09-12T08:53:31.257
> 
> 标签：grails, scp, grails-2.0

我正在尝试编写一个 Grails 脚本来构建和部署（scp）我的应用程序：

```
includeTargets << grailsScript("War")

target('deploy': "Deploy war on server") {
  depends(war)
  ant.property ( file : 'application.properties' )
  def user = ant.project.properties."${grailsEnv}_remote_user"
  def host = ant.project.properties."${grailsEnv}_remote_host"
  def dir  = ant.project.properties."${grailsEnv}_remote_dir"
  ant.scp(file: warName, todir: "${user}@${host}:${dir}", passphrase:"", trust:"true")
}
setDefaultTarget('deploy') 
```

当我运行此脚本时，我收到以下错误：

```
C:\Java\IDE\workspaces\Projets\Test 1.5\build.xml:20: Problem: failed to create task or type scp
Cause: Could not load a dependent class com/jcraft/jsch/Logger
  It is not enough to have Ant's optional JARs
  you need the JAR files that the optional tasks depend upon.
  Ant's optional task dependencies are listed in the manual. 
```

当然我下载了 jsch.jar 但我找不到如何修改类路径。

我使用 STS 3.0 和 Grails 2.1.0

任何想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T11:45:24.977

只需将以下内容添加到您的 BuildConfig.groovy

```
 dependencies {
        build "com.jcraft:jsch:0.1.46"
        build "org.apache.ant:ant-jsch:1.8.2"
... 
```

# call - Cocos2d-x Schedule does not call function

> ID：12384485
> 
> 赞同：2
> 
> 时间：2012-09-12T08:54:11.117
> 
> 标签：call, cocos2d-x, schedule

It's very simple schedule code. AMS_Moving Inherited CCNode.

I call the `action()` in `runAction()` by schedule. But does not call `action()`.

When I call action() directly, It's normal.

I want know the reason. please help me.

```
void AMS_Moving::runAction()
{
..
..
    this->schedule(schedule_selector(AMS_Moving::action));
}

void AMS_Moving::action(ccTime dt)
{
..
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-10-13T10:26:26.703

我在 Cocos2dx-3.8 中遇到了一个类似的问题，试图在`Scene`我正在开发的一个中安排一个选择器。

我的故障代码是：

```
void GameScene::onEnter() {
    this->scheduleOnce(CC_SCHEDULE_SELECTOR(GameScene::scheduledSelector), 3.0);
    this->scheduleUpdate();
}

void GameScene::scheduledSelector(float dt) {
    log("Scheduled selector called...");
}

void GameScene::update(float delta) {
    log("update called...");
} 
```

在这种情况下，既没有`scheduledSelector`也没有被叫到。`update`

我在 Cocos2dx`Node`文档中找到了我的问题的解决方案： A的调度程序在调用它的方法`Node`之前不会开始调度更新：`Node``resume`

```
/**
 * Resumes all scheduled selectors, actions and event listeners.
 * This method is called internally by onEnter.
 */
virtual void resume(void); 
```

我的坏处是我重写了 Node 的 onEnter 方法而没有通过超类实现调用，所以调度程序从来没有收到开始更新的信号。修复我的 onEnter 方法：

```
void GameScene::onEnter() {
    Node::onEnter();
    this->scheduleOnce(CC_SCHEDULE_SELECTOR(GameScene::scheduledSelector), 3.0);
    this->scheduleUpdate();
} 
```

完成了这项工作，两个选择器开始在正确的时间被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-24T06:27:19.390

试试这个代码：

```
CCDirector::sharedDirector()->getScheduler()->scheduleSelector(schedule_selector(AMS_Moving::action),this,1.0f,false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-27T09:22:05.663

**解决方案1：**

```
CCDirector::sharedDirector()->getScheduler()->scheduleSelector(schedule_selector(Foo::Updater),this,2.0f,false); 
```

此解决方案的一个有趣优势是您的调度程序将在游戏期间独立于场景替换工作。您只需要添加到`retain`' `Foo`s 对象而不是将其添加到某些对象`CCLayer`或`CCScene`稍后可能会删除的对象中。

**解决方案2：**

*   将此签名用于您的成员函数：`void Foo::Updater(float dt)`
*   在`Foo`函数中的某个地方调用它来启动调度程序`this->schedule(schedule_selector(Foo::Updater),2.0f);`
*   在这种情况下，**您必须将类`addChild()`的对象设置`Foo`为某些`CCLayer`才能使调度程序真正调用您的`Updater`函数。**

--

假定：

1.  Cocos2dx v2.2.3
2.  `Foo`是您尝试在其中运行一些调度程序的类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T00:22:32.757

你确定 AMS_Moving::runAction() 被调用还是 CCNode::runAction() 被调用？尽量避免使用与 cocos2d-x 相同的函数名，看看会发生什么。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T10:16:32.217

尝试在函数“AMS_Moving::action()”中设置断点。这段代码显然会调用'action'。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-04-10T05:59:22.063

只需从此函数 AMS_Moving::action 中删除 ccTime dt。它会起作用的

# geolocation - Remote Packet Capture for Geolocation

> ID：12384488
> 
> 赞同：1
> 
> 时间：2012-09-12T08:54:25.030
> 
> 标签：geolocation

I am looking for a implement a IP-based Geolocation solution. This essentially involves 2 main steps :- 1) Grab IP Traffic from Remote locations 2) Analyze/compare the grabbed IPs with an approriate GeoLocation Database (like 'Maxmind') and determine Latitude/Longitude/City/Country/ISP, etc

I have looked into the following 2 options for step (1) :- 1) [http://rpcap.sourceforge.net/](http://rpcap.sourceforge.net/) - I ran into issues while building the rpcap server on a Linux box. Also, this seems to be a development version and did not find any recent software updates/builds. 2) WinPCap - I built the "rpcapd" server on a linux box. I installed Wireshark on a Windows box and could add the remote interfaces of the linux boxes running rpcapd.

The above 2 methods involves capturing live network traffic and sending it to a central machine for consolidation/analysis. I am not quite convinced that this is the optimal way to grab IP traffic. Resource utilization in terms of network bandwidth, CPU, etc and data security on the PROD hosts that run the rpcap server is matter of concern too.

Does anybody have/share experience on such remote packet capture solutions ? Is there a better way (Open Source alternatives) to capture/consolidate IP traffic from multiple remote hosts ?

Thanx !

# android - why does my android tabhost keeps crashing?

> ID：12384491
> 
> 赞同：2
> 
> 时间：2012-09-12T08:54:27.323
> 
> 标签：android, android-tabhost

Here is the xml for tab host I don't think the error is here but still..

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/negru"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/scoreId"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="@string/scores"
        android:textColor="@color/galben"
        android:textSize="@dimen/menuDim" />

    <TabHost
        android:id="@+id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical"
            android:padding="5dp" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:padding="5dp" >

                <include
                    android:id="@+id/cell1"
                    layout="@layout/cel1" />

                <include
                    android:id="@+id/cell2"
                    layout="@layout/cel1" />
            </FrameLayout>
        </LinearLayout>
    </TabHost>

</LinearLayout> 
```

here is java file containing the tabhost setup i think here i have a mistake at initializing the tabhost but i can't figure it out

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_scores);

    TabHost tabHost = (TabHost)findViewById(R.id.tabhost);

    tabHost.setup();

    TabSpec allScore = tabHost.newTabSpec("allTab");
    allScore.setIndicator("allTab");
    allScore.setContent(R.id.cell1);
    tabHost.addTab(allScore);

    TabSpec friendScore = tabHost.newTabSpec("friendTab");
    allScore.setIndicator("friendTab");
    allScore.setContent(R.id.cell2);
    tabHost.addTab(friendScore);

    tabHost.setCurrentTabByTag("allTab");

} 
```

and cell1 layout used for show in cells

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/scrollAllScore"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scrollbars="vertical" >

    <TableLayout
        android:id="@+id/AllScore"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:stretchColumns="*" >
        <TableRow 
            >
            <TextView 
                android:text="@string/app_name"/>
        </TableRow>
        <TableRow 
            >
            <TextView 
                android:text="@string/app_name"/>
        </TableRow>
    </TableLayout>
</ScrollView> 
```

this is the debug info

```
Thread [<1> main] (Suspended (exception RuntimeException))  
    <VM does not provide monitor information>   
    ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1664    
    ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1680 
    ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 117   
    ActivityThread$H.handleMessage(Message) line: 931   
    ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
    Looper.loop() line: 130 
    ActivityThread.main(String[]) line: 3703    
    Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
    Method.invoke(Object, Object...) line: 507  
    ZygoteInit$MethodAndArgsCaller.run() line: 841  
    ZygoteInit.main(String[]) line: 599 
    NativeStart.main(String[]) line: not available [native method] 
```

Please help me out I really can't see what is wrong!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:16:23.460

错误就在这里

```
TabSpec allScore = tabHost.newTabSpec("allTab");
    allScore.setIndicator("allTab");
    allScore.setContent(R.id.cell1);
    tabHost.addTab(allScore);

    TabSpec friendScore = tabHost.newTabSpec("friendTab");
    allScore.setIndicator("friendTab");
    allScore.setContent(R.id.cell2);
    tabHost.addTab(friendScore); 
```

我忘记将 tabspec 变量名称从 allscore 更改为 Friendscore

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:36:16.093

尝试更改根标签：

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"      
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" > 
```

可能是他的问题。

# objective-c - 使用自定义动画在导航树中跳回几个步骤

> ID：12384493
> 
> 赞同：0
> 
> 时间：2012-09-12T08:54:31.647
> 
> 标签：objective-c, animation

跟进[这个问题](https://stackoverflow.com/questions/11392567/how-to-go-back-to-previous-view-in-objective-c)

假设我的应用程序有几个`ViewControllers`，我们称它们为 A、B、C、D。通常后退一步，即从 D -> C，将使用行中的`NavigationBar`或通过代码中的后退按钮

```
[self.navigationController popViewControllerAnimated:YES]; 
```

我想要做的是后退几步，比如从 D -> B。这将通过

```
[self.navigationController popToViewController:B animated:YES]; 
```

不幸的是，这样我无法决定使用哪个动画。我必须使用翻转动画而不是默认动画。

我发现的唯一方法是这种方法

```
[self.navigationController transitionFromViewController:self.navigationController.presentedViewController toViewController:B duration:300 options:UIViewAnimationOptionTransitionFlipFromRight animations:nil completion:nil]; 
```

这是实现这一目标的唯一方法还是有人可以提出更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:01:42.647

您可以从导航堆栈中删除 C 视图控制器，因此当它从 D 弹出时，它将直接转到视图 B

```
// Remove Controller C from Stack
NSMutableArray *controllers = [NSMutableArray arrayWithArray:[self.navigationController viewControllers]];
[controllers removeObject:C];
[self.navigationController setViewControllers:controllers]; 
```

然后你可以使用`[self.navigationController popViewControllerAnimated:YES];`你想要的动画，它会弹回视图 B

要在弹出视图控制器时做实际的翻转动画，可以使用下面的动画代码

```
[UIView beginAnimations:@"flip_animation" context:nil];
[UIView setAnimationDuration:1];
[UIView setAnimationTransition:UIViewAnimationOptionTransitionFlipFromTop forView:self.navigationController.view cache:NO];
[self.navigationController popViewControllerAnimated:NO];
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:54:21.010

参考您的评论......

“听起来不错，但我在哪里定义它应该是翻转动画？据我所知，这仍然使用默认动画。- taymless “

你需要执行动画意味着你使用这个代码块......

```
 -(void)animatefromView:(UIView*)fromView toBlock:(void (^)(void))block // note block may be any executable code...
    {
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration: 1];
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:fromView cache:NO];
        block();
        [UIView commitAnimations];

    } 
```

方法调用将是....

```
[self animatefromView:self.navigationController.view toBlock:^{ 
        [self.navigationController pushViewController:ani animated:NO];
                                                                    }]; 
```

我希望这能帮到您...

# javascript - 调用 Objective-C 函数时将值返回给 JavaScript

> ID：12384498
> 
> 赞同：3
> 
> 时间：2012-09-12T08:54:37.150
> 
> 标签：javascript, objective-c, ios

我一直在使用[WebViewJavascriptBridge](https://github.com/marcuswestin/WebViewJavascriptBridge)在 iOS 应用程序中连接 Objective-C 和 JavaScript。它工作得很好，但它不支持从被调用的本机 Objective-C 函数返回值给调用 JavaScript 代码。

我很确定 Cordova (PhoneGap) 在某种程度上通过回调做到了这一点，但我一直很难理解底层机制是如何工作的。

有没有人遇到同样的问题并设法找到解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T15:48:05.123

现在，我从未使用过 WebViewJavascriptBridge，但我已经在 Objective-C 中使用简单的委托完成了这项工作，所以也许这会对您有所帮助：

**MyScript.js**

```
// requestFromObjc
// functionName (required):
//      the name of the function to pass along to objc
// returnedResult (not used by caller):
//      the result given by objc to be passed along
// callback (not used by caller):
//      sent by objc, name of the function to execute
function requestFromObjc(functionName, objcResult, callback)
{    
    if (!objcResult)
    {
        window.location = "myapp://objcRequest?function=" + functionName + "&callback=" + arguments.callee.name + "&callbackFunc=" + arguments.callee.caller.name;
    }
    else
    {
        window[callback](objcResult);
    }
}

function buttonClick(objcResult)
{    
    if (!objcResult)
    {
        // ask for the color from objc
        requestFromObjc("buttonColor&someParam=1");
    }
    else
    {
        // do something with result (in this case, set the background color of my div)
        var div = document.getElementById("someDiv");

        div.style.background = objcResult;
    }
} 
```

**我的页面.html**

```
<html>
    <head>
        <script type="text/javascript" src="MyScript.js"></script>
    </head>
    <body>
        <div id="someDiv">
            This is my div! Do not make fun of it, though.
        </div>

        <button onClick="buttonClick(undefined)">
            Click Me!
        </button>
    </body>
</html> 
```

**视图控制器.m**

```
-(NSString *) javaScriptResultForRequest:(NSDictionary *) params
{
    if ([params[@"function"] isEqualToString:@"buttonColor"])
    {
        NSArray *colors = @[ @"red", @"yellow", @"blue", @"green", @"purple" ];
        return colors[arc4random_uniform(colors.count)];
    }
    else
    {
        return @"undefined";
    }
}

-(BOOL) webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([[[request URL] scheme] isEqualToString:@"myapp"])
    {
        // parse the URL here
        NSURL *URL = [request URL];

        if ([URL.host isEqualToString:@"objcRequest"])
        {
            NSMutableDictionary *queryParams = [NSMutableDictionary dictionary];
            NSArray *split = [URL.query componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"&="]];

            for (int i = 0; i < split.count; i += 2)
            {
                queryParams[split[i]] = split[i + 1];
            }

            NSString *result = [self javaScriptResultForRequest:queryParams];
            NSString *jsRequest = [NSString stringWithFormat:@"%@(\"%@\", \"%@\", \"%@\")", queryParams[@"callback"], queryParams[@"function"], result, queryParams[@"callbackFunc"]];

            // now we send this to the target
            [self.webView stringByEvaluatingJavaScriptFromString:jsRequest];
            return NO;
        }
    }

    return YES;
} 
```

显然这比尝试在纯 JS 中执行等效功能要慢得多，因为它必须跳过所有循环。但是，如果您需要在您的 JS 代码中使用已经在您的 ObjC 代码中的东西，那么这可能适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T16:44:16.780

如果您的意思是“返回”，因为您的 JS 调用者将看到调用返回的结果，我不知道该怎么做。我怀疑这需要 JS 中没有的线程操作级别。相反，您可以重新编码 JS 端逻辑以创建结果处理函数。在伪代码中：

```
res = CallObjC(args);
work with res... 
```

变成

```
CallObjC(args, function(res) { work with res...}); 
```

诚然有点尴尬，但习惯了 - 这是一种非常常见的模式。在内部，JS 桥接代码创建了请求到回调函数的映射。当 ObjC 代码有结果时，它使用 WebView 的 stringByEvaluatingJavaScriptFromString 调用定位并调用回调的 JS 桥代码。

@Richard - 请注意您发布的解决方案。将 window.location 设置为调用 shouldStartLoadWithRequest 会导致 webview 中的功能丢失以及 ObjectiveC 的消息丢失。当前的做法是使用 iframe 并拥有某种可以缓冲消息的消息队列。

# javascript - 如何迭代 Array.prototype 函数

> ID：12384508
> 
> 赞同：11
> 
> 时间：2012-09-12T08:55:03.623
> 
> 标签：javascript, arrays, prototype

我想将所有数组函数包装在数组对象中，但是在控制台中

```
>>> Array.prototype
[]
>>> [].prototype
undefined 
```

但是当我输入`Array.prototype`控制台时，它会在自动完成中显示所有功能，我怎样才能获得这些功能？它们藏在哪里？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-12T09:05:57.917

你的意思是：

```
var arrObj = Object.getOwnPropertyNames(Array.prototype);
for( var funcKey in arrObj ) {
   console.log(arrObj[funcKey]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-26T04:10:25.603

使用 ECMAScript 6 (ECMAScript 2015)，您可以简化一点：

```
for (let propName of Object.getOwnPropertyNames(Array.prototype)) {
   console.log(Array.prototype[propName]);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T09:03:54.070

```
var proto = Array.prototype;

for (var key in proto) {
    if (proto.hasOwnProperty(key)) {
        console.log(key + ' : ' + proto[key]);
    }
} 
```

[演示。](http://jsfiddle.net/6p6Sp/)

如果你想在控制台中检查它的属性。

采用：`console.dir(Array.prototype);`

​</p>

# python - 编写这个过滤列表理解的最 Pythonic 方式是什么？

> ID：12384513
> 
> 赞同：2
> 
> 时间：2012-09-12T08:55:14.080
> 
> 标签：python, list-comprehension

也许我只是起得太晚了。

我有一个对象是字典周围的薄包装器。它将假装对字典中的任何键都有一个属性，如果引用了不存在的键，则返回 None 。

我只想取回三个可能键的唯一“真实”值。（不是无）。对象可能没有一个或多个键。或者，它可能在两个或三个键中具有相同的值。

这段代码做我想要的：

```
set(getattr(obj, field) for field in ['field1', 'field2', 'field3'] if getattr(obj, field)) 
```

我只是不喜欢重复 getattr() 两次的样子。我觉得我忽略了一个明显更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:01:42.287

之后您可以过滤掉这些`None`值：

```
set(filter(bool, [getattr(obj, field) for field in ['field1', 'field2', 'field3']])) 
```

或者你可以忘记对象。这可能是我会这样做的方式：

```
a_dict = {'key1': 1, 'key2': 2, 'key3missing': 3}

print set([a_dict[key] for key in ['key1','key2','key3'] if key in a_dict])

# prints: set([1, 2]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T08:59:12.443

如果您的瘦包装器返回默认值`None`：

```
s = set(getattr(obj, field) for field in ['field1', 'field2', 'field3']) - {None} 
```

另一种可能性：

```
s = set(filter(None, (getattr(obj, field) for field in ['field1', 'field2', 'field3'])) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T09:42:58.707

另一种使用 getattr 默认值的方法：

```
set(x for x in getattr(obj, field, None) for field in ['field1', 'field2', 'field3'] if x) 
```

**编辑：**

这是向您展示此功能背后的逻辑 - 并说明为什么我认为它可能比其他一些解决方案更好（我可能是错的 - 但是嘿 - 生活就是从错误中学习）

```
obj = Your_Object
fields = ['field1', 'field2', 'field3']

def get_set(obj, fields):
    result = []
    for field in fields:
        x = getattr(obj, field, None)
        if x:
            result.append(x)
    return set(result) 
```

如您所见，只有 1 个循环，并且`getattr()`每个字段只调用一次。并且仅将“真实”值添加到结果中。我认为这比获取所有结果然后稍后删除“非真实”值更有效。但如果我错了，请纠正我。干杯。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T10:12:38.553

就像是：

```
from operator import attrgetter

class DictWrapper(object):
    def __init__(self, d):
        self.d = d

    def __repr__(self):
        return repr(self.d)

    def __getattr__(self, name):
        return self.d.get(name)

    def truthy(self, *keys):
        values = attrgetter(*keys)(self)
        if not isinstance(values, tuple):
            values = (values,)
        return filter(None, set(values))

dw = DictWrapper({'x': 3, 'y': None, 'z': 'zebra'})
dw.truthy('x', 'y' ,'z', 'bob')
# [3, 'zebra']
dw.truthy('x')
# [3]
dw.truthy('y')
# [] 
```

# security - RabbitMQ - 实时动态创建和管理用户

> ID：12384515
> 
> 赞同：4
> 
> 时间：2012-09-12T08:55:24.483
> 
> 标签：security, rabbitmq

我们正在评估 RabbitMQ 的上下文，其中许多不同的用户会连接到它并有以下问题：

1.  创建一个 RabbitMQ 用户并在运行时为我们系统的每个想要连接到 Rabbit 的用户设置他的权限并在他的会话终止后删除这个 RabbitMQ 用户是否可行？
2.  即使我们有成千上万甚至数百万的用户进行大量连接？
3.  如果是这样，我们应该使用 RabbitMQ 管理 API (REST) 吗？
4.  与其通过 RabbitMQ 的用户和 ACL 系统来强制执行安全性，我们是否应该为每个用户提供一个具有随机（某种会话密钥）名称且其他用户无法猜到的专有 Exchange？

提前致谢。

**编辑 - 澄清**

每个连接到我们系统的用户应该只能对某些动态创建的队列或交换进行读写。我们不希望未经授权的用户能够订阅其他人的队列。此外，我们可能允许匿名用户连接到我们的系统，但他们必须遵守相同的安全规则。

我们找到的解决方案是：

*   使用 RabbitMQ 的认证和授权系统。我们不确定它是否被设计成这种动态的。或者是吗？
*   为每个用户创建某种会话，并使用该随机会话密钥来命名用户的交换和/或队列。这样，只有用户会知道它应该订阅哪些队列。这听起来足够安全，足以满足我们的需求。这是更好的方法吗？

# linux - 更改 KNOPPIX 7.0.4 启动

> ID：12384516
> 
> 赞同：0
> 
> 时间：2012-09-12T08:55:24.907
> 
> 标签：linux

我想知道如何让 knoppix 直接进入桌面而不要求登录或从启动时的菜单中选择，就像现在一样。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T14:47:48.540

Knoppix 是一个 live CD 启动程序，如果您已经从 live CD 安装它并且现在得到一个登录提示

转到：KDE 按钮系统设置 最后一组选项管理并查找/单击 o 登录屏幕 登录屏幕的最后一个选项卡很方便

左侧启用自动登录，右侧启用无密码登录

# ajax - 使用基于 wordpress 永久链接的 ajax

> ID：12384517
> 
> 赞同：0
> 
> 时间：2012-09-12T08:55:28.170
> 
> 标签：ajax, wordpress

我试图创建基于 wordpress 永久链接的 ajax 调用。

前任。domain.com/#!/tag/lorem-ipsum/

使用此 url 我如何读取哈希并使用它来执行 ajax 调用，返回此特定标签的所有帖子？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T11:29:03.627

*   首先读出给定 url 的哈希值，[Get #anchor for URL using jQuery ?](https://stackoverflow.com/questions/4483044/get-anchor-for-url-using-jquery)
*   进行 ajax 调用：[http](http://codex.wordpress.org/AJAX_in_Plugins) ://codex.wordpress.org/AJAX_in_Plugins 。
*   [使用WP_Query](http://codex.wordpress.org/Class_Reference/WP_Query)获取帖子。
*   返回 ajax 响应中的帖子。
*   使用 javascript 在 HTML 中插入帖子。

一种让您入门的方法。

# ios - 使用虚拟键盘在 iOS 上登录 Facebook

> ID：12384519
> 
> 赞同：0
> 
> 时间：2012-09-12T08:55:29.760
> 
> 标签：ios, facebook

我正在编写一个 iPad 应用程序，它需要将 iPad 插入扫描设备。扫描设备似乎充当硬件键盘，因为只要将设备插入 iPad，软件键盘就会从屏幕上消失。为了解决这个问题，我创建了自己的虚拟键盘。这一切都很好。

但是，现在我需要提供登录 Facebook 的功能。显然，单点登录不是一种选择，因为这会切换到没有我的虚拟键盘的 Facebook 应用程序。我还有哪些其他选择？我还没有尝试过，因为这个应用程序仍处于计划阶段，但我对能否将文本插入应用程序内对话框并没有那么自信。应用内对话框甚至是最新 SDK 的一个选项吗？Facebook 似乎也没有提供直接的登录 API？

注意：暂时不能拔掉扫描设备。

# sql-server - 选择具有最大列数据的行

> ID：12384520
> 
> 赞同：2
> 
> 时间：2012-09-12T08:55:33.520
> 
> 标签：sql-server, select

我的表中有超过 1 行属于同一 ID。

我想选择更多列包含数据的行。

例如。

我的数据看起来像这样

```
select * from my_table where id=1

PK   Id   Col1   Col2   Col3   Col4   Col5   Col6   Col7   Col8   Col9   Col10
101  1    NULL   NULL   NULL   XX     NULL   NULL   NULL   NULL   NULL   NULL
102  1    NULL   NULL   NULL   XX     YY     NULL   ZZ     NULL   NULL   NULL
103  1    NULL   AA     NULL   NULL   NULL   NULL   NULL   NULL   NULL   NULL
104  1    NULL   NULL   NULL   NULL   NULL   BB     NULL   NULL   NULL   NULL
105  1    NULL   NULL   NULL   NULL   NULL   NULL   NULL   CC     NULL   NULL 
```

我想要查询，它会给我这样的 id=1 输出：-

```
PK   Id   Col1   Col2   Col3   Col4   Col5   Col6   Col7   Col8   Col9   Col10
102  1    NULL   NULL   NULL   XX     YY     NULL   ZZ     NULL   NULL   NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:16:43.217

其中 pk 是您的主键...

```
select * 
from YourBadlyStructuredTable
where pk in (
    select top 1 pk from YourBadlyStructuredTable
    unpivot (col for z in (col1,col2,col3, ...))u
    where id=1
    group by pk
    order by COUNT(*) desc
) 
```

如果您无法指定列名...

```
select 
    top 1 
    HorribleTable.* 
from
(
    select
        xmldata.value('(/x2/@PK)[1]','int') as PK1,
        xmldata.value('(/x2/@Id)[1]','int') as ID1,
        xmldata.value('count(/x2/@*)','int') as cnt
        from
        (
    select      
        t.x.query('.') as xmldata               
    from
        (   select convert(xml,(select * from HorribleTable for xml raw('x2'))) as x1) v
            cross apply
        v.x1.nodes('/x2') t(x)
    ) v
) v
    inner join HorribleTable on v.PK1 = HorribleTable.pk
where ID1 = 1 
order by cnt desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:01:29.673

试试这个：

```
with cte as (select  *,case when col1 is not null then 1 else 0 end+
          case when col2 is not null then 1 else 0 end+
          case when col3 is not null then 1 else 0 end+
          case when col4 is not null then 1 else 0 end+
          case when col5 is not null then 1 else 0 end+
          case when col6 is not null then 1 else 0 end+
          case when col7 is not null then 1 else 0 end+
          case when col8 is not null then 1 else 0 end+
          case when col9 is not null then 1 else 0 end+
          case when col10 is not null then 1 else 0 end as col_count
  from my_table  where id=1)
  select * from cte where col_count =(select MAX(col_count) from cte) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:05:34.877

```
;WITH CTE as (    
select pk,isnull(col1,'')+isnull(col2,'')+isnull(col3,'')+isnull(col4,'')+isnull(col5,'')+
    isnull(col6,'')+isnull(col7,'')+isnull(col8,'')+isnull(col9,'')+isnull(col10,'') as res
    from tbl4 where id=1)

select * from tbl4 where pk in(select pk from CTE where len(res)=(select max(len(res)) from CTE)) 
```

# c# - Javascript 嵌入式图像资源

> ID：12384525
> 
> 赞同：0
> 
> 时间：2012-09-12T08:55:49.043
> 
> 标签：c#, javascript, asp.net, custom-controls, embedded-resource

我目前在自定义控件中使用嵌入式资源。我嵌入了图像，这些图像是用于导航等的图标。但是我需要能够在嵌入的 JavaScript 中使用这些图像来根据某些标准更改图像。

我知道如何在 c# asp.net 页面中访问嵌入式资源，但在 JavaScript 中却不知道。

我尝试了以下但没有成功。

```
document.getElementById('button1').src = "NAMESPACE.FOLDER/DIRECTORY.IMAGE.png"; 
```

我不相信我写的 JavaScript 是错误的，只是图像的访问方式。

我对 CSS / C# 代码的替代方案不感兴趣，因为它必须使用 JS 来完成。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:20:53.933

如果定义了项目的虚拟路径，请尝试在 src 之前使用斜杠访问图像文件。

如果未定义，请执行以下操作来定义项目的虚拟路径（我想您正在使用*Visual Studio*）：

1.  单击您的项目名称（不是解决方案）。
2.  在属性窗口中，将虚拟路径属性更改为`"/"`.

# php - 我可以在数组中存储多个值吗？

> ID：12384531
> 
> 赞同：-2
> 
> 时间：2012-09-12T08:56:17.243
> 
> 标签：php, arrays

例如，我有一个`li`，每个`li`人都有一个`<a>`
这是我的代码。

```
include 'functions/class.php';

$db = new DB();
$warriors = array();
$result=$db->getWarriors();

foreach($result as $names) {
    echo '<li><a href="display_warrior.php id='.$names['warrior_id'].'">'.$names['warrior_name'].'</a></li>';
} 
```

我想要发生的情况是，例如，当我单击特定链接时，它从我的数据库中显示 3 个值，它的 id 将直接转到一个数组，当我单击另一个 a 时，它会添加到数组中，因此我的数组中已经有 2 个值如何我可以这样做吗？

检索值

```
if(isset($_GET['id'])) {
    $values = array($_GET['id']);//it overwrites how to do the right way?
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T08:58:14.610

I think you're looking for this instead:

```
if(isset($_GET['id'])) {
    $values['id'] = $_GET['id'];
} 
```

**Update**

Is this what you want?

```
<?php
    if (!empty($_GET["values"])) {
        $currentOptionsArray = explode(",", $_GET["values"]);
        $currentOptionsText = implode(",", $currentOptionsArray) . ",";
    } else {
        $currentOptionsText = "";
    }
?>
<a href="?values=<?=$currentOptionsText?>option1">Option 1</a>
<a href="?values=<?=$currentOptionsText?>option2">Option 2</a>
<a href="?values=<?=$currentOptionsText?>option3">Option 3</a> 
```

# c# - 如何在我的 SQL 数据库中设计实体到实体的关系

> ID：12384532
> 
> 赞同：0
> 
> 时间：2012-09-12T08:56:18.807
> 
> 标签：c#, sql

我在我的 SQL 数据库中设计实体到实体关系时遇到问题。我有一个充当“组”的实体。并且所有的组都相互之间有关系。

例如：GroupA 和 GroupB 具有从 groupA 到 groupB 的关系，反之亦然，具有布尔值。它就像一个二维矩阵：

姓名 | 甲组 | B组 |

A组 | 真实 | 错误的

B组 | 假 | 真实 |

这些组是动态的，可能有更多或更少的组。现在，我应该如何将它存储在我的数据库中？

对不起我的英语不好，我希望有人明白我的意思:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T08:59:06.553

你需要两张表：

```
GROUP
Name
...

GROUPTOGROUP
BaseGroupID
ConnectedToGroupID
True/False 
```

因此，您可以在 GroupToGroup 中定义任何连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:11:09.423

`Groups`带有一些`Id`列的表。`GroupConnections`带有`Group1Id`和`Group2Id`列的表，以及`Group1Id <> Group2Id`的`unique Group1Id, Group2Id`约束和外键`Groups`。

如果有连接（`true`在您的矩阵中），则应该在`GroupConnections`. 如果没有，就不应该。

# java - 在 Java 中将 Unicode 转换为字符串和将字符串转换为 Unicode

> ID：12384535
> 
> 赞同：1
> 
> 时间：2012-09-12T08:56:34.127
> 
> 标签：java, string, unicode

如何转换此字符串：此字符串包含 unicode 字符 unicodetoString("\u0064") 和字符串到 unicode，如 stringtounicode("a")？

```
public static String GetUnicode(String str_code) {          
String hexCode = Integer.toHexString(str_code.codePointAt(0)).toUpperCase();        
    String hexCodeWithAllLeadingZeros = "0000" + hexCode;
    String hexCodeWithLeadingZeros = hexCodeWithAllLeadingZeros
    .substring(hexCodeWithAllLeadingZeros.length() - 4);
    hexCodeWithLeadingZeros = "\\u" + hexCodeWithLeadingZeros;
    System.out.println("Unicode " + hexCodeWithLeadingZeros);
    return hexCodeWithLeadingZeros;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T07:00:40.630

要将 unicode 转换为字符串，请使用

[StringEscapeUtils](http://commons.apache.org/proper/commons-lang/download_lang.cgi) .unescapeJava(unicodeString)

# tfs - TFS 2012 RTM 中的看板

> ID：12384538
> 
> 赞同：1
> 
> 时间：2012-09-12T08:56:47.367
> 
> 标签：tfs, kanban, tfs-2012

是否可以像在 TFS 服务上一样将看板添加到 TFS 2012 Web 访问站点？如果是，我如何将 cvan 添加到 Web 访问站点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T10:05:44.173

您将不得不等待今年秋天到期的更新。

来自 Brian Harry宣布看板支持的[博客文章：](http://blogs.msdn.com/b/bharry/archive/2012/08/13/introducing-kanban.aspx)

> 我还想提一下，我们的计划是在今年秋季晚些时候的第一次 TFS 2012 本地更新中包含看板支持。

# iphone - 无法上传图片

> ID：12384542
> 
> 赞同：0
> 
> 时间：2012-09-12T08:57:08.747
> 
> 标签：iphone, ios, ajax, json, trigger.io

我正在 iPhone 上开发一个应用程序。我的搭档给我发了这样的 curl 命令

```
curl -F "clothing_item[photo]=@dress1.jpg" -F "clothing_item[name]= pink_dress" http://www......com/shop_items.json?auth_token=abc_xyz_123 
```

并要求我实现一个响应将图像上传到服务器的功能。我试试

```
forge.ajax({
    url: "http://www........com/shop_items.json",
    type: "POST",
    dataType: 'json',
    data: {
        "auth_token": token,
        "clothing_item[photo]": imageFile,
        "clothing_item[name]": id + "-" + d.getTime().toString()            
    },

    success: function(data) {

    },
    error: function(error) {

    }
}); 
```

使用 imageFile 是来自相机的文件。发帖成功，但是没有图片上传到服务器。

也试试：

```
forge.ajax({
    url: "http://www........com/shop_items.json",
    type: "POST",
    dataType: 'json',
    file:[imageFile];
    data: {
        "auth_token": token,
        "clothing_item[photo]": imageFile,
        "clothing_item[name]": id + "-" + d.getTime().toString()            
    },

    success: function(data) {

    },
    error: function(error) {

    }
}); 
```

但它不起作用。

任何建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T16:03:14.777

这里有一些指南可以帮助您进行调试，尽管很难知道这里到底是什么问题。

*   打开[Charles Proxy](http://www.charlesproxy.com/)并运行 iOS 模拟器。检查在clothin_item[photo] 字段上发布的内容
*   使用[Trigger.IO Catalyst](https://trigger.io/catalyst/)远程调试器查看 Network 选项卡，并可能手动调用类似的请求
*   从查看 ajax[请求 API](http://docs.trigger.io/en/v1.2/api/cross-domain.html)看来，密钥实际上是“文件”而不是“文件”。如果我理解正确，您不应该在另一个字段“clothing_item [照片]”上发布图像。此外（再次，如果我理解正确的话），二进制文件字段名称是“文件”，不能自定义。

# asp.net - 使用 ASP.Net Web API 的多部分表单 POST

> ID：12384544
> 
> 赞同：9
> 
> 时间：2012-09-12T08:57:16.183
> 
> 标签：asp.net, .net, file-upload, task-parallel-library, multipartform-data

我有一个 POST ASP.Net Web Api 方法，改编自[*A guide to asynchronous file uploads in ASP.NET Web API RTM*](http://www.strathweb.com/2012/08/a-guide-to-asynchronous-file-uploads-in-asp-net-web-api-rtm/)。

我遇到了第一个请求被触发并完成后触发的所有请求的错误任务问题。

场景如下：我有一个示例页面，该页面将文件连同其他参数一起发布到 Web API Post 方法。第一次运行良好，文件已上传。但是，所有后续请求最终都会使任务处于故障状态。我收到“MIME 多部分流意外结束。MIME 多部分消息不完整。” 任何想法为什么？

下面粘贴的是我的 Post 方法、示例 html 表单和聚合异常的源代码。

```
 public Task<HttpResponseMessage> Post([FromUri]string memberNumber)
    {
        // Check if the request contains multipart/form-data.
        if (!Request.Content.IsMimeMultipartContent())
        {
            throw new HttpResponseException(HttpStatusCode.UnsupportedMediaType);
        }

        string root = HttpContext.Current.Server.MapPath("~/App_Data");
        var provider = new MultipartFormDataStreamProvider(root);

        // Read the form data and return an async task.
        var task = Request.Content.ReadAsMultipartAsync(provider).
            ContinueWith(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                {
                    throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.InternalServerError, t.Exception));
                }

                return Request.CreateResponse(HttpStatusCode.OK, new MyModel());
            });

        return task;
    } 
```

我正在使用这样的示例表单触发这个 web api：

```
<form name="form1" method="post" enctype="multipart/form-data" action="api/claims/asd123" style="margin:auto;width:500px;">
    <div>
        <label for="HCPracticeNumber">HC Pratice Number:</label>
        <input type="text" name="HCPracticeNumber" id="HCPracticeNumber"/>
    </div>
    <div>
        <label for="ServiceDate">Service/Treatment date:</label>
        <input type="text" name="ServiceDate" id="ServiceDate"/>
    </div>
    <div>
        <label for="AmountClaimed">Amount Claimed:</label>
        <input type="text" name="AmountClaimed" id="AmountClaimed"/>
    </div>
    <div>
        <label for="Image">Image Attachment:</label>
        <input name="Image" type="file" />
    </div>
    <div>
        <input type="submit" value="Submit" />
    </div>
</form> 
```

返回的 AggregateException 如下：

```
<Error>
<Message>An error has occurred.</Message>
    <ExceptionMessage>One or more errors occurred.</ExceptionMessage>
    <ExceptionType>System.AggregateException</ExceptionType>
    <StackTrace/>
    <InnerException>
        <Message>An error has occurred.</Message>
        <ExceptionMessage>
            Unexpected end of MIME multipart stream. MIME multipart message is not complete.
        </ExceptionMessage>
        <ExceptionType>System.IO.IOException</ExceptionType>
        <StackTrace>
            at System.Net.Http.Formatting.Parsers.MimeMultipartBodyPartParser.<ParseBuffer>d__0.MoveNext() at System.Net.Http.HttpContentMultipartExtensions.MoveNextPart(MultipartAsyncContext context)
        </StackTrace>
    </InnerException>
</Error> 
```

**更新：**

在 Filip 在他的博客网站上提出建议后，我修改了 post 方法，将流位置重置为 0，如下所示：

```
 Stream reqStream = Request.Content.ReadAsStreamAsync().Result;
        if (reqStream.CanSeek)
        {
            reqStream.Position = 0;
        }
        var task = Request.Content.ReadAsMultipartAsync(provider).
            ContinueWith(t =>
            {
                if (t.IsFaulted || t.IsCanceled)
                {
                    throw new HttpResponseException(
                    Request.CreateErrorResponse(HttpStatusCode.InternalServerError,
                    t.Exception));
                }

                return Request.CreateResponse(HttpStatusCode.OK, new MyModel());

            }); 
```

但是，这是非常喜怒无常的代码。它有时有效，但有时无效。换句话说，它并不能完全解决问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-12T12:15:25.187

事实证明，正如 Filip 在评论中所建议的那样，我改编自[*实现消息处理程序以跟踪您的 ASP .net Web API 使用情况*](http://www.strathweb.com/2012/05/implementing-message-handlers-to-track-your-asp-net-web-api-usage/)的 Web API 使用处理程序正在读取内容正文，因此在请求正在我的 POST 方法中处理。

因此，如果请求的类型为 IsMimeMultipartContent，我向 WebApiUsageHandler 添加了一个条件语句以不读取请求正文。这解决了问题。

**更新**

我想用 Filip 通过电子邮件向我建议的另一个选项更新答案，以便记录在案：

如果您在 API 使用处理程序中使用此代码，就在阅读正文之前：

```
 //read content into a buffer
   request.Content.LoadIntoBufferAsync().Wait();

   request.Content.ReadAsStringAsync().ContinueWith(t =>
   {
       apiRequest.Content = t.Result;
       _repo.Add(apiRequest);
   }); 
```

请求将被缓冲，并且可以读取两次，因此可以在管道中进一步上传。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-09T15:03:08.333

这不是原始海报问题的答案。但是，在我的代码中多次调用 ReadAsMultipartAsync() 方法也会导致相同的异常：

```
public async Task<IHttpActionResult> PostFiles()
{

     // Check if the request contains multipart/form-data.
     if (!Request.Content.IsMimeMultipartContent())
     {
         return Content(HttpStatusCode.BadRequest, "Unsupported media type. ";
    }
     try
     {
        var provider = new CustomMultipartFormDataStreamProvider(workingFolder);

        await Request.Content.ReadAsMultipartAsync(provider); // OK
        await Request.Content.ReadAsMultipartAsync(provider); // calling it the second time causes runtime exception "Unexpected end of MIME multipart stream. MIME multipart message is not complete"
        ... 

    }
    catch(Exception ex)
    {
        ...
    }
} 
```

# php - 如何显示从 whmcs 到站点的最后一张票

> ID：12384546
> 
> 赞同：0
> 
> 时间：2012-09-12T08:57:29.130
> 
> 标签：php, show, whmcs

我想做点什么来显示网站上的最后一张票

例如，我有文件夹 /whmcs，我的网站是 example.com/

我想显示 whmcs 的票。我使用此代码获取名字并显示用于登录我的站点的表单，但在用户的信息中想要添加最后一张票或显示最后一张票的名称和票的链接。

怎么做？？

```
<?php
    include("../whmcs/dbconnect.php"); 
    if ($_SESSION['uid']) {
        $result = mysql_query("SELECT firstname FROM tblclients WHERE id='".$_SESSION['uid']."' LIMIT 1;");

        while($row = mysql_fetch_array($result))
            echo "<div class='after'><p id='login'><span>".$_LANG['welcomeback'].', '.$row['firstname'].' <br /><a href="../sup/clientarea.php">'.$_LANG['clientareatitle'].'</a> | <a href="../sup/submitticket.php">اضف تذكرة</a></span></p><div class="out"><a href="../sup/logout.php">خروج</a></div></div>';
        }else{
            echo '<div class="before">
        <form action="../sup/dologin.php?goto=clientarea.php" method="post">';?>
            <input type="hidden" name="token" value="" />
                <input type="text" name="username" id="username" value="البريد الالكتروني" onblur="if (this.value=='')this.value='البريد الالكتروني'" onclick="value=''" />
            <?php  
            echo '<input name="password" id="password" type="password" value="" />
                      <label><div class="rememberme">تذكرني</div>
                      <input type="checkbox" name="rememberme" />
                      <span class="state"></span>
                      </label>
                      <input type="submit" value="دخول" />
                      </form>
                      <a href="../sup/pwreset.php" class="lost" title="نسيت كلمة المرور؟">نسيت كلمة المرور؟</a>
                      <a href="../sup/register.php" title="التسجيل">التسجيل</a>
                      </div>';
                }
            ?> 
```

# logging - 错误日志：避免多次记录相同的错误

> ID：12384547
> 
> 赞同：1
> 
> 时间：2012-09-12T08:57:30.317
> 
> 标签：logging

我希望有人可以就我要描述的问题给我一些有用的建议。我的公司软件由为管理特定工作而构建的不同层组成。

基本上我们有：

*   数据库接口的数据访问层

*   用于通过多种协议（ftp、smtp、mapi 等）发送消息的传输层

*   业务层（我们应用程序的逻辑）

*   其他层

我们采用 NLog 作为记录各层错误和活动的通用框架。除了每个“层”独立且正确地记录的活动之外，我想在异常发生的层/类中只记录一次异常。例如，业务层使用数据库层，在 SQL 操作期间发生一些错误，数据库层记录的错误被业务层再次记录，结果日志文件或电子邮件或任何重复相同的错误。我知道记录很多比不记录要好:-)但是......你有没有实用的建议来避免相同异常的多个日志？

在此先感谢路易吉

# email - 在 Outlook 中呈现零宽度表格单元格

> ID：12384548
> 
> 赞同：7
> 
> 时间：2012-09-12T08:57:32.393
> 
> 标签：email, outlook, html-email, outlook-2010, email-client

**首先：**
我讨厌 Outlook :)

**原因如下：**
我正在尝试发送具有以下结构的电子邮件（这只是一个简化的示例，所以请不要告诉我“去掉中间`td`的 s”）

```
<table width="400">
  <tbody>
    <tr>
       <td width="200"><img src="http://lorempixel.com/200/200/"></td>
       <td width="0"></td>
       <td width="0"></td>
       <td width="200"><img src="http://lorempixel.com/200/200/"></td>
    </tr>
  </tbody>
</table> 
```

问题是，`td`中间的两个 s 导致两张图片之间有一个空格，如您在此屏幕截图中所见[http://i48.tinypic.com/6i8rvk.png](http://i48.tinypic.com/6i8rvk.png)

我觉得我已经尝试了所有可能的方法。

*   cellpadding = 0，cellspacing = 0，border = 0 on table
*   使用内联 css 设置每个 td 的宽度
*   添加边框折叠：折叠到所有 tds 和表格
*   添加边距：0，填充：0；边框 0; 到内联 css 中的所有 tds
*   在 inline css 中将字体大小和行高设置为 0

没有任何效果。

**旁注：**
如果中间只有一个空的表格单元格，则渲染是可以的。所以看起来好像每个`td`只占半个像素
这已经是一个简化的示例，我无法更改表格的结构，这意味着我必须为渲染问题找到解决方法，而不是不幸地修复相当不漂亮的编码风格。

**测试**
这是我的测试环境 - 随意玩弄它： http: [//putsmail.com/d58ffa01c4b3e29123baab00754716](http://putsmail.com/d58ffa01c4b3e29123baab00754716)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:58:12.667

尝试将 padding-left 和/或 padding-right 放在包含图像的 tds 中，作为内联 css。

最新编辑：试试这个——

`<tr> <td style="border-collapse: collapse; margin:0;padding:0; border:0" align="right" width="200"><img src="http://lorempixel.com/200/200/" style="display:block;margin:0;padding:0; border:0" border="0"></td> <td style="width: 0px;line-height: 0px; font-size: 0px; border-collapse: collapse;padding:0;margin:0;border:0" width="0"></td> <td style="width: 0px;line-height: 0px; font-size: 0px; border-collapse: collapse;padding:0;margin:0;border:0" width="0"></td> <td style="border-collapse: collapse; margin:0;padding:0; border:0" align="left" ><img src="http://lorempixel.com/200/200/" style="display:block;margin:0;padding:0; border:0" border="0"></td></tr>`

我从包含图像的 tds 中删除了宽度，因此它采用图像的默认宽度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-09T09:51:30.507

Outlook 不喜欢隐藏内容 ;-) 但是应该怎么做 - 添加一些条件代码：

```
 <table border="0" cellpadding="0" cellspacing="0" style="width:100%;table-layout:fixed">
                <tr>
                  <td style="width:217px" valign="top">
                    column 1
                  </td>
                  <!--[if !mso]><!--><td style="line-height:0;max-height:0;width:0;overflow:hidden;font-size:0;display:none" valign="top">
                    hidden column 2
                  </td>
                  <!--<![endif]--><td valign="top">
                    column 3
                  </td>
                </tr>
              </table> 
```

要从 Outlook 中隐藏它，使用 [!mso / endif] 列周围的注释就足够了。但是，您可能还想隐藏在 outlook.com、gmail.com 和其他一些网站中 - 为此包括其他样式。不要忘记使用媒体查询恢复移动视图中的设置。

祝奥列格好运

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T08:59:56.983

您是否尝试将`<td>`s 放在同一行？也就是去掉元素之间的换行符？

（内部元素换行符被忽略）

```
<td>Foo
</td><td>
Bar</td> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-06T15:57:33.720

我一直在尝试解决这个问题——**没有任何**效果（我在这里尝试过所有的建议等等）。
最后，我采用了更困难但也是我认为最干净的方式，并编写了一个脚本，通过 xsl 转换删除所有空列和所有空行。现在它适用于 Outlook 2003 - 2010。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-20T20:58:34.767

“显示：无”有帮助吗？

```
<table width="400">
  <tbody>
    <tr>
       <td width="200"><img src="http://lorempixel.com/200/200/"></td>
       <td width="0" style="display:none"></td>
       <td width="0" style="display:none"></td>
       <td width="200"><img src="http://lorempixel.com/200/200/"></td>
    </tr>
  </tbody>
</table> 
```

顺便说一句，我在 Outlook 2003 上没有遇到您的问题，所以我无法验证它。

# c# - 将 Oracle 数据库与 SQL Azure 同步

> ID：12384554
> 
> 赞同：1
> 
> 时间：2012-09-12T08:57:50.927
> 
> 标签：c#, sql-server, oracle, azure, synchronization

我想将本地 Oracle 数据库与 SQL Azure 同步。目前，我为我的本地应用程序（Oracle 和 SQL Server 都在本地）设置了 DTS 包。如果我将 SQL Server 迁移到 Azure，这个过程应该如何设计？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:33:22.357

您必须选择迁移到 Azure：

1.  移动到 Azure SQL 数据库
2.  在 Azure 中预配 SQL Server VM

后者将具有与常规本地 SQL Server 相同的功能集。前者的功能不完全等同于 SQL Server。Azure SQL 数据库只是数据库引擎的一部分，没有 SSIS、SSAS、复制甚至 TSQL 都不完全等同于 SQL Server。

如果您使用 VM 方法，可以安全地假设您仍然可以运行现有的包。但是，您需要考虑云中的 Azure 与本地 Oracle 数据库之间的延迟。

您还可以构建自定义解决方案来同步数据库，甚至使用 Sync Framework。请参阅：[数据库同步：Oracle 和 SQL Compact 2-Tier](http://code.msdn.microsoft.com/Database-Sync-Oracle-and-037fb083)，只需将 SQL Compact 替换为适用于 Azure SQL 数据库的 SqlSyncProvider。如果您还想使用 WCF，您可以更改示例以使用 n 层方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:59:59.717

SQL Server 和 Azure SQL 数据库（SQL Azure 重命名）之间几乎没有[区别，](http://social.technet.microsoft.com/wiki/contents/articles/996.compare-sql-server-with-windows-azure-sql-database-en-us.aspx)所以我想您的代码也可以在 Azure 上轻松运行。Azure SQL 数据库没有相同的功能，并且 AFAIK DTS 包无法在 Azure 环境中运行。但我想如果逻辑/流量/延迟允许，您可以考虑在本地运行 DTS，与 Azure SQL 数据库和 Oracle 交互。您可能会发现[SQL 数据同步](http://msdn.microsoft.com/en-us/library/windowsazure/hh456371.aspx)很有趣：

> SQL 数据同步是一种 Web 服务，可用于在不同位置的多个服务器之间保持数据同步

# regex - 正则表达式不允许双下划线

> ID：12384555
> 
> 赞同：8
> 
> 时间：2012-09-12T08:57:52.110
> 
> 标签：regex

尝试应用正则表达式以不允许带有双下划线的字符串

```
 [a-z][a-z0-9_-]+[^__] 
```

但它在许多情况下都失败了，例如：

```
ab_      doesn't matches whereas it should
ab__c_   matches whereas it shouldn't. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T09:04:12.247

`[^__]`匹配一个*非*下划线字符。要***断言***您的字符串没有两个连续的下划线，您可以使用[*负前瞻*](http://www.regular-expressions.info/lookaround.html)：

```
^(?!.*__.*)[a-z][a-z0-9_-]+$ 
```

环视断言您的字符串**没有**两个连续的下划线`(?!.*__.*)`，如果断言没有失败，则匹配您所需的字符串- `[a-z][a-z0-9_-]+`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:04:01.007

`[^]`语法定义了一组**字符**，以便匹配该组中不存在的字符

如果你想匹配两个不是下划线的字符，你可以使用`[^_]{2}`

但是如果你真的想检查一个字符串是否有两个下划线，你最好搜索两个下划线并否定结果

例如在 perl 中：`"ab_" !~ /__/`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T10:47:48.350

在 perl 中它将是：

```
 if($a =~ /__/){
    } else{
    } 
```

这意味着如果字符串 a 包含 "__" 做某事，如果不做其他事情。当然有很多方法可以美化这样的代码

# c# - 我可以在 WCF 命名管道上传递 COM 接口吗？

> ID：12384556
> 
> 赞同：2
> 
> 时间：2012-09-12T08:57:53.017
> 
> 标签：c#, .net, wcf, com, named-pipes

我可以在 WCF 命名管道上传递 COM 接口吗？

我有以下COM接口：

```
[CoClass(typeof(ConfigViewerClass))]
[Guid("E51C677A-163B-11D4-AFE4-00902743BD1F")]
public interface ConfigViewer : IConfigViewer{} 
```

当我尝试在我的 WCF 中将它作为返回类型传递时，我收到以下错误：

> 从管道读取错误：管道已结束。(109, 0x6d)。

为什么是这样？

我尝试了以下但失败了：

1.  将 TransferMode 更改为 Streaming。
2.  将 COM 接口封装为`[DataMember]`定义为的 c# 类内部`[DataContract]`
3.  传递此 COM 接口的空实例（用于较小的流量大小）。
4.  添加 KnownType 属性 - 导致编译错误，因为它是 COM 类：

> 属性“KnownType”在此声明类型上无效。它仅对“类、结构”声明有效。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:21:23.427

该错误消息意味着当您的客户端通道堆栈尝试从管道读取响应时，它发现管道实例已经关闭。

您可以通过在服务端配置 WCF 跟踪并查看引发了哪些异常来确认这一点，但我认为服务端通道堆栈在尝试序列化您的服务实例时失败（因此中止管道连接）作为返回值提供：它将发现对象的具体类型是 RCW，它不知道如何序列化。

我不相信在 WCF 服务操作的参数或返回值中使用 COM 接口类型是可能的。

如果您的 COM coclass 公开了支持序列化和反序列化 coclass 实例状态的接口/方法，您可以通过定义一个包装 ConfigViewer 的纯 .NET 类型然后手动实现`ISerializable`或`IXmlSerializable`在包装器类型上来解决此问题，使用 COM 方法对对象状态进行序列化和反序列化。然后，此包装器类型将在服务操作签名中使用，并且需要在部署到服务器和客户端的程序集中。

# zend-framework - Is it possible to run the zend complete project without setting virtual host?

> ID：12384557
> 
> 赞同：0
> 
> 时间：2012-09-12T08:57:55.510
> 
> 标签：zend-framework

I have created a zend project and executed it through a virtual host... so is it possible to run a zend project without creation of virtual host?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T19:32:45.597

只需像往常一样使用 Zend_Tool 生成您的项目，并将 public/index.php 更新到正确的路径，瞧，您不需要虚拟主机，但总是推荐它，因为它使事情更加透明。

# .htaccess - htaccess 文件中的条件重写

> ID：12384559
> 
> 赞同：0
> 
> 时间：2012-09-12T08:57:59.197
> 
> 标签：.htaccess, mod-rewrite

我对整个 .htaccess 东西还很陌生，我现在正在使用以下内容来使用“漂亮的 url”：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?path=$1 [NS,L]
</IfModule> 
```

[现在我发现我的网站有点慢，并决定通过我在网络（网站](http://www.wangarific.com/how-to-gzip-css-files/)）某处找到的 php 脚本开始压缩我的 CSS 文件。为此，我需要重写 url 以打开正确的 php 文件。看起来像这样：

```
RewriteRule ^(.*).css$ /csszip.php?file=$1.css [L] 
```

但我只希望第一个发生，而第二个不发生，反之亦然。换句话说，我想要这样的东西：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    if request doesn't contain .css do
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteRule ^(.*)$ index.php?path=$1 [NS,L]
    else do
        RewriteRule ^(.*).css$ /csszip.php?file=$1.css [L]
</IfModule> 
```

任何人都可以帮助我使用正确的代码或我可以找到在 htaccess 文件中使用某种条件语句的方法吗？

提前致谢！：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:04:45.623

试试这个

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    RewriteCond %{REQUEST_URI} !.css
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?path=$1 [NS,L]

    RewriteRule ^(.*).css$ /csszip.php?file=$1.css [L]
</IfModule> 
```

此外，您可以将最后一条规则放在首位

# javascript - Autosuggestion is not working on my search engin

> ID：12384560
> 
> 赞同：0
> 
> 时间：2012-09-12T08:58:03.340
> 
> 标签：javascript, ajax

I have implemented dbsight on my server. It is working fine. Just one option is missing: it is not showing me autosuggestion on the search result page like in the demo page:

```
http://search.dbsight.com/search.do?indexName=freedb&q=u2+beautiful+day 
```

In my search result page it is not displaying me suggestion list. I have found the suggest.ftl file but it's doesn't produce anything. You can check it over here.http://filesinn.com/

search the term and I show the ajax call on the firebug console but it will not populate suggestion list.

Can any one help me out?

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:14:23.970

他们确实为此使用了 jquery.suggest.js 我认为：

[http://search.dbsight.com/templates/freedb/html/resource/jquery.suggest.js](http://search.dbsight.com/templates/freedb/html/resource/jquery.suggest.js)

使用 .在您的输入字段上激活它`id="q"`。

```
jQuery(function() {
 jQuery("#q").suggest("suggest.do?indexName=freedb",
 {
  minchars:1
 });
}); 
```

它在 keypes 上进行这样的查询：

[http://search.dbsight.com/suggest.do?indexName=freedb&q=u2+beautiful+d](http://search.dbsight.com/suggest.do?indexName=freedb&q=u2+beautiful+d)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T15:02:17.073

起初，我还误以为您已经在主页上实现了自动完成功能。但是花了一些时间后，我意识到我看到的不是服务器自动完成，而是**浏览器自动完成**。

在您的主页中，您最好将`autocomplete="off"`属性添加到您的输入字段，以禁用浏览器帮助用户自动完成他在名为“q”的字段中键入的所有历史记录。

然后继续从 DBSight 文档中学习：

*   [与现有系统集成 - 步骤 2 添加 javascripts](http://wiki.dbsight.com/index.php?title=Integration_with_existing_systems#Step_2_Add_javascripts)（仅限您的主页）：

    ```
    <script type="text/javascript" language="javascript" src="http://filesinn.com/search/search.nocache.js"></script>
    <script language="javascript">
    function dbsightOnLoad(){
        new dbsight.Searcher().server("http://filesinn.com/dbsight")
               .indexName("foxsaver")
        .setup();
    }
    </script> 
    ```

*   [如何添加/自定义 Suggest-As-You-Type？](http://wiki.dbsight.com/index.php?title=Embeddable_Javascript_Widget#How_to_add.2Fcustomize_Suggest-As-You-Type.3F)

    ```
    var s = new dbsight.Searcher();
    s.addSuggestion(); 
    ```

# objective-c - How to make screen scrollable when orientation is landscape xcode

> ID：12384567
> 
> 赞同：0
> 
> 时间：2012-09-12T08:58:24.513
> 
> 标签：objective-c, ios5

Hi all I'm developing an app in xcode for iPhone. i've many label in that it looks good when orientation is Portrait but when it is landscape all labels will overlap on each other, so i want to make it as scrollable screen only when it is in landscape mode. please help me Thanks in Advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:07:19.040

在 self.view 中添加**UIScrollView**。

现在根据方向设置 yourScrollView 的框架，并根据它的内容大小。但是在纵向框架和内容大小将相等，因此不会滚动。

现在在横向中，框架和内容大小将不相等，因此会有滚动

**注意**：根据方向调整 UIlements 的名气

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {

  if(UIInterfaceOrientationIsLandscape(interfaceOrientation))
  {
     [yourScrollView setFrame:CGRectMake(0,0,320,460)];
     [yourScrollView setContentSize:CGSizeMake(320,460)];
     //change frame of UIELement(labels) here according to orientation
  }
  else
  {
     [yourScrollView setFrame:CGRectMake(0,0,480,300)];
     [yourScrollView setContentSize:CGSizeMake(480,460)];
     //change frame of UIELement(labels) here according to orientation
  }
  return YES;
} 
```

# c# - C# 方法调用比代码更快

> ID：12384586
> 
> 赞同：1
> 
> 时间：2012-09-12T08:59:49.863
> 
> 标签：c#, performance, methods

我想通过将代码放入方法而不是仅仅调用它来测试损失了多少时间。

令我惊讶的是，方法调用更快，我问自己：**为什么？**

这是代码：HObjects 是图像处理库“Halcon”的一部分，在方法调用中非常常用“out”，所以不要担心可怕的外观 ;-)

```
 static void Main(string[] args)
    {
        int runs = 900000;
        HObject hob1;
        HObject hob2;
        HObject hob3;
        HObject hob4;
        HObject hob5;
        HObject hob6;

        DateTime t1 = DateTime.Now;

        for ( int i = 0; i < runs; i++ )
        {
            doItMethod(out hob1, out hob2, out hob3, out hob4, out hob5, out hob6);
        }

        TimeSpan ts1 = TimeSpan.FromTicks(DateTime.Now.Ticks - t1.Ticks);

        DateTime t2 = DateTime.Now;

        for ( int i = 0; i < runs; i++ )
        {
            HOperatorSet.GenEmptyObj(out hob1);
            HOperatorSet.GenEmptyObj(out hob2);
            HOperatorSet.GenEmptyObj(out hob3);
            HOperatorSet.GenEmptyObj(out hob4);
            HOperatorSet.GenEmptyObj(out hob5);
            HOperatorSet.GenEmptyObj(out hob6);

            hob1.Dispose();
            hob2.Dispose();
            hob3.Dispose();
            hob4.Dispose();
            hob5.Dispose();
            hob6.Dispose();
        }

        TimeSpan ts2 = TimeSpan.FromTicks(DateTime.Now.Ticks - t2.Ticks);

        Console.WriteLine("Zeitspanne Methodenaufruf : " + ts1.TotalMilliseconds.ToString());
        Console.WriteLine("Zeitspanne direkter Aufruf: " + ts2.TotalMilliseconds.ToString());

        Console.ReadKey();
    }

    static void doItMethod(out HObject hobOut1, out HObject hobOut2, out HObject hobOut3, out HObject hobOut4, out HObject hobOut5, out HObject hobOut6)
    {
        HOperatorSet.GenEmptyObj(out hobOut1);
        HOperatorSet.GenEmptyObj(out hobOut2);
        HOperatorSet.GenEmptyObj(out hobOut3);
        HOperatorSet.GenEmptyObj(out hobOut4);
        HOperatorSet.GenEmptyObj(out hobOut5);
        HOperatorSet.GenEmptyObj(out hobOut6);

        hobOut1.Dispose();
        hobOut2.Dispose();
        hobOut3.Dispose();
        hobOut4.Dispose();
        hobOut5.Dispose();
        hobOut6.Dispose();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:09:53.643

你应该使用[秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

```
 //add using System.Diagnostics;

 public static void Main()
    {
        int runs = 900000;
        HObject hob1;
        HObject hob2;
        HObject hob3;
        HObject hob4;
        HObject hob5;
        HObject hob6;

        Stopwatch t1 = new Stopwatch();

        t1.Start();

        for ( int i = 0; i < runs; i++ )
        {
            doItMethod(out hob1, out hob2, out hob3, out hob4, out hob5, out hob6);
        }

        t1.Stop();

        Stopwatch t2 = new Stopwatch();
        t2.Start();

        for ( int i = 0; i < runs; i++ )
        {
            HOperatorSet.GenEmptyObj(out hob1);
            HOperatorSet.GenEmptyObj(out hob2);
            HOperatorSet.GenEmptyObj(out hob3);
            HOperatorSet.GenEmptyObj(out hob4);
            HOperatorSet.GenEmptyObj(out hob5);
            HOperatorSet.GenEmptyObj(out hob6);

            hob1.Dispose();
            hob2.Dispose();
            hob3.Dispose();
            hob4.Dispose();
            hob5.Dispose();
            hob6.Dispose();
        }
        t2.Stop();

        Console.WriteLine("Zeitspanne Methodenaufruf : " + t1.ElapsedMilliseconds);
        Console.WriteLine("Zeitspanne direkter Aufruf: " + t2.ElapsedMilliseconds);

        Console.ReadKey();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:19:15.900

**感谢人们！**我得到了我的答案。

**正如 Eugen Rieck 所怀疑的那样，这是一个 GC-Artifact。**

强制垃圾回收使方法调用版本比直接代码慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:12:07.310

我使用秒表得到了正确的结果：

```
Method: 00:00:04.5573170
Code: 00:00:04.5539918

static void Main(string[] args)
    {
        int runs = 1000;
        HObject hob1;
        HObject hob2;
        HObject hob3;
        HObject hob4;
        HObject hob5;
        HObject hob6;

        Stopwatch sw = new Stopwatch();
        sw.Start();

        for (int i = 0; i < runs; i++)
        {
            doItMethod(out hob1, out hob2, out hob3, out hob4, out hob5, out hob6);
        }

        sw.Stop();
        Console.WriteLine(sw.Elapsed);

        sw = Stopwatch.StartNew();

        for (int i = 0; i < runs; i++)
        {
            HOperatorSet.GenEmptyObj(out hob1);
            HOperatorSet.GenEmptyObj(out hob2);
            HOperatorSet.GenEmptyObj(out hob3);
            HOperatorSet.GenEmptyObj(out hob4);
            HOperatorSet.GenEmptyObj(out hob5);
            HOperatorSet.GenEmptyObj(out hob6);

            hob1.Dispose();
            hob2.Dispose();
            hob3.Dispose();
            hob4.Dispose();
            hob5.Dispose();
            hob6.Dispose();
        }

        sw.Stop();
        Console.WriteLine(sw.Elapsed);

        Console.ReadKey();
    } 
```

# database - 在 UiBinder 中使用 GWT-Editor

> ID：12384590
> 
> 赞同：0
> 
> 时间：2012-09-12T08:59:55.517
> 
> 标签：database, gwt, editor, uibinder

我正在尝试在 GWT 应用程序中使用 Editor，所以我已经阅读了官方文档。我还查看了here question [enter link description here](https://stackoverflow.com/questions/4979116/gwt-2-1-editors-framework)及其答案，但我仍然无法弄清楚编辑的最终“目的”。举个例子，假设一个 UiBinder 有一些字段：

```
@UiField
TextBox name;

@UiField
TextArea comment;

@UiField
ListBox type;

... 
```

我另外创建了一个方法editCustomer：

```
private void editCustomer(CustomerProxy entity) {

MyRequestFactory requestFactory = MyRequest.getRequestFactory();

CustomerRequestContext requestContext = requestFactory.customerRequest();

entity = requestContext.edit(entity);

editorDriver.edit(entity, requestContext);
} 
```

我认为使用编辑器的方法可以将 UiBinder 字段与数据库连接起来。这是如何完成的，基于通过“保存”按钮在数据库中发送数据的常见方式？

```
@UiHandler("saveButton")
void onSaveButtonClick(ClickEvent event){
????
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T16:04:54.413

我使用 MVP 模式已经有一段时间了，并且有一些更复杂的编辑器。我发现将 EditorDriver 放在您的视图中很好，因为当您初始化它时，您可以将它绑定到您的特定视图。我的示例需要一个活动/视图接口/视图实现。

这是一个可以被其他活动扩展的抽象活动，但我包含了相关内容。我已经删除了相当多的代码，但这应该让您了解使用编辑器的有用方法。我的编辑器很复杂，有很多子编辑器。我只包括名称和描述。我们发现这是处理编辑器的一种非常有用的设计模式。

```
public abstract class AbstractTaskBuilderActivity extends <E extends AnalyticsTaskProxy, R extends DaoRequest<E>> implements TaskBuilderView {

/**
 * Create a new task. This will initialize any new lists.
 * @param context The RequestContext to use to create the task.
 * @param clazz The class type to be created. 
 * @return
 */
protected E create(R context, Class<E> clazz) {
            // This is implemented in my inherited classes.
    E editableAnalyticsTask = context.create(clazz);
            // More initialization code expecially initializing arrays to empty so that 
            // any ListEditor sub editors will work.

    return editableAnalyticsTask;
}

/**
 * Call to edit the task and update the dashboards. 
 * @param context
 * @param task
 */
protected void doEdit(R context, E task) {
    RequestFactoryEditorDriver<? super AnalyticsTaskProxy, ?> driver = display.getEditorDriver();
    E editable = context.edit(task);
    context.save(editable).with(driver.getPaths()).to(new Receiver<Long>() {

        @Override
        public void onFailure(ServerFailure error) {
            display.showError(error.getMessage());
            super.onFailure(error);
        }

        public void onConstraintViolation(Set<ConstraintViolation<?>> violations) {
            display.getEditorDriver().setConstraintViolations(violations);
        }

        @Override
        public void onSuccess(Long response) {
            clientFactory.getPlaceController().goTo(getSavePlace());
        }

    });
    driver.edit(editable, context);
}

    /**
     * Save the task.
     */
        @Override
    public void onSaveTask() {

        RequestFactoryEditorDriver<? super AnalyticsTaskProxy, ?> driver = display.getEditorDriver();

        RequestContext request = driver.flush();
        request.fire();
    }

} 
```

我的视图界面

```
public interface TaskBuilderView extends View {

    public interface Presenter {
        void onSaveTask();
    }

    public RequestFactoryEditorDriver<AnalyticsTaskProxy, ?> getFactoryEditorDriver();

    public void setPresenter(Presenter presenter);
} 
```

我的观点实现

```
public class AnalyticsTaskBuilderViewImpl extends ViewImpl implements AnalyticsTaskBuilderView, Editor<AnalyticsTaskProxy> {

    interface AnalyticsTaskBuilderDriver extends RequestFactoryEditorDriver<AnalyticsTaskProxy, AnalyticsTaskBuilderViewImpl> {
    }

    /**
     * UiBinder implementation.
     * 
     * @author chinshaw
     * 
     */
    @UiTemplate("AnalyticsTaskBuilderView.ui.xml")
    interface Binder extends UiBinder<Widget, AnalyticsTaskBuilderViewImpl> {
    }

    /**
     * Name component for the name of the analytics operation.
     * This also implements {@link HasEditorErrors so it can show 
     * constraint violations when an error occurs.
     */
    @UiField
    ValueBoxEditorDecorator<String> name;

    /**
     * Description component that edits analytics operation description.
     * This also implements {@link HasEditorErrors} so it can show
     * constraint violations when an error occurs
     */
    @UiField
    ValueBoxEditorDecorator<String> description;

    public AnalyticsTaskBuilderViewImpl(Resources resources) {
        super(resources);
        // Must initialize the view before calling driver initialize 
        initWidget(GWT.<Binder> create(Binder.class).createAndBindUi(this));
        driver.initialize(this);
    }

    @Override
    public void setPresenter(Presenter presenter) {
        this.presenter = presenter;
        bindToPresenter();
    }

    // Save the task
    @UiHandler("saveTask")
    void handleClick(ClickEvent clickEvent) {
        presenter.onSaveTask();
    }

    @Override
    public RequestFactoryEditorDriver<AnalyticsTaskProxy, ?> getEditorDriver() {
        return driver;
    }
} 
```

# coding-style - 为什么/如何在函数中使用传递的常量？

> ID：12384592
> 
> 赞同：0
> 
> 时间：2012-09-12T08:59:56.217
> 
> 标签：coding-style, constants

我见过将常量传递给方法的类，我想它完成了在该函数中定义某种设置。我现在在任何地方都找不到它来尝试找出逻辑，所以我虽然可以在这里问。您如何以及为什么使用这个概念，我在哪里可以找到有关它的更多信息？

下面的示例是用 PHP 编写的，但我猜任何处理常量的语言都可以。

```
// Declaring class
class ExampleClass{
  const EXAMPLE_CONST_1 = 0;
  const EXAMPLE_CONST_2 = 1;  

  function example_method($constant(?)){

     if($constant == ExampleClass::EXAMPLE_CONST_1)
       // do this
     else if($constant == ExampleClass::EXAMPLE_CONST_2)
       // do that

  }
}

// Using class
$inst = new ExampleClass();
$inst->example_method(ExampleClass::EXAMPLE_CONST_1); 
```

对我来说，传递“ExampleClass::EXAMPLE_CONST_1”比传递“1”更清楚，但这是传递常量的唯一原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:04:23.253

简单地通过 1 并不能说明什么。通过拥有一个常量，您可以对名称中的设置进行描述。

例如：常数 RAIN = 1；

方法 setWeather(RAIN);

至少这就是我使用它的方式和原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:05:54.583

避免传递文字总是一个好主意。通过指定*名称*，任何阅读您的代码的人都有机会理解该值的含义——数字没有意义。它还可以帮助您维护代码：如果出于某些要求必须更改值，您可以轻松地在一个地方完成，而不是检查每个值的出现。

# .net - 共享返回非托管结构的 ref 类的正确方法是什么？

> ID：12384593
> 
> 赞同：0
> 
> 时间：2012-09-12T08:59:59.440
> 
> 标签：.net, struct, c++-cli, shared-libraries

在托管库之间共享非托管结构最好（简单而不会增加很多开销）是什么？

假设我有一个托管类库，如下所示：

```
// MyClassLib.h
#pragma once
#include "MyLegacyStruct.h"
using namespace System;

namespace MyClassLib {

    public ref class Class1
    {
    protected:
        MyLegacyStruct* m_internalBuffer;

    public:
        Class1() { }
        ~Class1() { }

        MyLegacyStruct* GetBuffer()
        {
            return m_internalBuffer;
        }
    };
} 
```

...结构定义（在库中）：

```
// MyLegacyStruct.h
#pragma once

namespace MyClassLib {

    typedef struct MyLegacyStruct
    {
        unsigned int m_someVar;

    } MyLegacyStruct;

} 
```

...以及一个想要使用该库的简单控制台应用程序：

```
// ConsoleApp.cpp : main project file.

#include "stdafx.h"
#include "MyLegacyStruct.h"

using namespace System;
using namespace MyClassLib;

int main(array<System::String ^> ^args)
{
    Console::WriteLine(L"Hello World");

    Class1^ c1 = gcnew Class1();
    MyLegacyStruct* s1 = c1->GetBuffer(); // <-- This is a problem

    return 0;
} 
```

...这使编译器发牢骚：

```
2>.\ConsoleApp.cpp(14) : error C3767: 'MyClassLib::Class1::GetBuffer': candidate function(s) not accessible 
```

内部缓冲区用于一些相当繁重的处理算法，然后将这些算法与 .net 代码粘合在一起，使其一切都变得漂亮和模块化，并挂接到 C# gui 以及一些命令行重新处理工具中。

这样做的正确方法是什么？返回一个`void *`？制作一个.net ref struct，使用它复制模块之间的所有数据，然后再转换回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:38:41.547

这已经在[C++ CLI 错误 C3767: Candidate function(s) not accessible](https://stackoverflow.com/questions/947213/c-cli-candidate-functions-not-accessible) by [Ben Schwehn](https://stackoverflow.com/users/37117/ben-schwehn)的堆栈溢出问题上得到了回答。

总之：

> 默认情况下，本机类型在程序集外是私有的。本机类型现在默认情况下在程序集外不可见。有关程序集外部类型可见性的详细信息，请参阅类型可见性。此更改主要是由使用其他不区分大小写的语言的开发人员在引用以 Visual C++ 编写的元数据时的需求驱动的。 [来源](http://msdn.microsoft.com/en-us/library/ms177253%28VS.80%29.aspx)

如果您使用`#pragma make_public(MyClassLib::MyLegacyStruct)`, 导出程序集中的 MyLegacyStruct 本机类型，那么您的项目将编译。

# pdf - PDF到源转换

> ID：12384599
> 
> 赞同：1
> 
> 时间：2012-09-12T09:00:19.010
> 
> 标签：pdf, pdf-conversion

有没有办法找到构建任何 PDF 的来源？原因是如果它是从 XML 构建的，那么我想知道我是否可以从 PDF 中获取 XML 并解析 XML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T13:46:39.927

> 有没有办法找到构建任何 PDF 的来源？

不，没有办法做到这一点。PDF 是一种演示格式，而不是一种数据存储格式，**通常**，PDF 缺乏它所呈现的数据结构。您甚至可能在 PDF 文件中没有单词或短语。可以将 PDF 视为（以完全过度简化的方式）一系列指令，例如：

- 在坐标 10, 30 中绘制字符 'a'
- 将笔移动到点 40,40 -
从当前点画一条线到点 50,50
...

# linux - modprobe 致命：找不到模块 XXX.ko

> ID：12384600
> 
> 赞同：0
> 
> 时间：2012-09-12T09:00:19.353
> 
> 标签：linux

我通过谷歌搜索并在旁边搜索。但没有出现任何解决方案。

我有一个模块 XXX.ko 。它适用于 insmod。比我把它复制到`/lib/modules/$(uname -r)`但它仍然不适用于 modprobe

解决方案是什么？

我也跑`depmod XXX.ko`

# c# - Wso2 ESB 管理服务以获取可用的代理 C#

> ID：12384603
> 
> 赞同：1
> 
> 时间：2012-09-12T09:00:35.503
> 
> 标签：c#, proxy, wso2, wso2esb, esb

您好，任何有使用管理服务经验的人都可以让我举例说明如何使用 wso2 ESB 的管理服务吗？

如果可能的话，我想要一个 C# 示例。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:11:07.687

[在这里](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/proxy-admin/org.wso2.carbon.proxyadmin.ui/4.0.1/src/main/java/org/wso2/carbon/proxyadmin/ui/client/ProxyServiceAdminClient.java)，您可以在 Java 中找到一个这样的示例。您可能需要将相同的逻辑转换为 C#。[对于注册表，此处](http://docs.wso2.org/wiki/display/Governance450/.NET+WS-API+Sample)提供了一个 .net 客户端作为示例，它使用管理服务来执行注册表操作。

# c# - RichTextBox 编程格式化退格行为

> ID：12384605
> 
> 赞同：0
> 
> 时间：2012-09-12T09:00:42.887
> 
> 标签：c#, wpf, richtextbox

我遇到了另一个问题`RichTextBox`。当您有一个像这样颜色的文本范围时：

```
var range = new TextRange(TextInput.Document.ContentStart,
TextInput.Document.ContentEnd);
range.Text = "asdfghjk";

var colored = new TextRange(TextInput.Document.ContentStart.GetPositionAtOffset(3, LogicalDirection.Forward),
TextInput.Document.ContentStart.GetPositionAtOffset(7, LogicalDirection.Forward));
colored.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Blue); 
```

在您的更改侦听器中，您有以下内容：

```
var range = new TextRange(TextInput.Document.ContentStart, TextInput.Document.ContentEnd);
if (range.Text.Length == 9)
     range.ApplyPropertyValue(TextElement.ForegroundProperty, Brushes.Black); 
```

当使用退格键删除其中一个蓝色的字符时（我认为删除键工作正常），并且您立即开始输入**，出现的文本是 blue**，就像格式化之前一样。我对为什么会发生这种情况以及避免它的方法很感兴趣。

# ajax - CakePHP 重定向方法不重定向

> ID：12384606
> 
> 赞同：2
> 
> 时间：2012-09-12T09:00:44.027
> 
> 标签：ajax, cakephp, get-request

我正在尝试使用 CakePHP 重定向方法重定向到新页面，但由于某种原因重定向不起作用。我用来重定向的代码是

```
public function update_sticky_postition_in_db()
{   
     $this->autoRender = false;

     ... // Save info to database

     $this->redirect(array('action' => 'tool'));
} 
```

其中 tool 是我要重定向到的视图的名称。为了尝试加快发现问题的过程，我检查了几件事，并认为我已经找到了问题的原因。基本上我正在尝试重定向到当前处于活动状态的视图，我认为这是它不重定向的部分原因。我读过它可能与页面缓存有关，但我不确定如何解决该问题。

此外，当使用 firebug 时，我可以看到重定向正在发送一个 GET 请求，但之后什么都没有发生。我必须对 GET 请求做些什么，还是应该让 Cake 为我处理。我还检查了 GET 的 URL，它是正确的。

它位于具有正确名称的控制器内，因为我可以查看原始工具页面。

update_sticky_postition_in_db() 方法也没有视图（因此自动渲染设置为 false），其预期目的是通过 ajax 调用更新数据库中的一行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:11:11.517

从您的帖子看来，您正在触发`update_sticky_postition_in_db()`using ajax 调用，因此重定向将不起作用。

您可以在 ajax`success`方法中使用 JavaScript 进行重定向。

为此，您可以`json_encode()`从上述方法中发送一些消息，并在 ajax 方法中检查该状态，`success`您可以使用`window.location`.

# oracle - pl/sql 开发者IDE

> ID：12384611
> 
> 赞同：2
> 
> 时间：2012-09-12T09:00:56.180
> 
> 标签：oracle, ide, plsqldeveloper

我正在使用 AllRoundAutomatation 的 Pl/sql 开发人员，现在我遇到了一个非常有趣的问题，我只想为 scoll up 配置 CTRL+UP 组合键！但我无法管理它，我该怎么做？

警告：工具 > 首选项 > 转到用户界面部分 > 键配置，其中一个不起作用，因为当我按 UP 或 ctrl+up 时，“键配置”的表会自行向上滑动

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:44:08.587

工具->首选项->用户界面部分->键配置->向下滚动到编辑器：向上滚动是您通常会执行的操作，但是我看到了您的问题，CTRL + UP是首选项窗口中的控制键，可以带您回到那个窗口的顶部。

如果您转到 pl/sql 开发人员安装上的 defaults.ini 文件（可能在 C:\Program Files\PLSQL Developer\Preferences\your username 之类的位置），您可以手动更改条目，我建议设置滚动将条目设置为其他值，然后您将看到一个条目，然后您可以将其更改为 16422，这是我为 CTRL+UP 安装的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:11:35.570

您可以按如下方式执行此操作：

```
tools > preferences > go to user interface section > key configuration 
```

找到项目`Editor: Scroll up`选择它并按下`CTRL+UP`组合键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-15T00:59:27.207

为了您的信息，您可以在配置文件中添加以下条目以启用 CTRL+DOWN 向下滚动。

```
Editor: Scroll Down=16424 
```

# sql-server - 如何将 Lambda 表达式查询转换为 Sql 查询？

> ID：12384615
> 
> 赞同：0
> 
> 时间：2012-09-12T09:01:02.000
> 
> 标签：sql-server, c#-4.0, lambda, azure-sql-database

我正在动态生成 Lambda 表达式，需要交叉检查 Lambda 表达式查询是否正确。这意味着 lambda 表达式如何针对 Entity 框架执行，以及它如何在内部转换为 sqlquery？我正在使用 Windows Azure Sqlserver。不知道 SQL Profiler 对窗口 Azure Sqlserver 的支持。

**实体框架中应用的 Lambda 表达式查询**

```
IQueryable<Object> queryResults = null;

queryEntity = _db.Companies.Where(Company => ((Convert(Company.Name) == "test") 
```

或者

```
((Convert(Company.AddressLine1) == "test1") Or (Convert(Company.AddressLine2) == "test2")))); 
```

有人有想法吗？请分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T11:25:31.290

我从这个链接获得了解决方案，Azure Sql profiler，我可以看到我的 lambda 表达式的 SQL 查询。

[http://blogs.msdn.com/b/benko/archive/2012/05/19/cloudtip-14-how-do-i-get-sql-profiler-info-from-sql-azure.aspx](http://blogs.msdn.com/b/benko/archive/2012/05/19/cloudtip-14-how-do-i-get-sql-profiler-info-from-sql-azure.aspx)

# android - WebView中facebook的登录页面没有键盘

> ID：12384618
> 
> 赞同：1
> 
> 时间：2012-09-12T09:01:12.520
> 
> 标签：android, facebook

我有以下代码：

```
 mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.loadUrl("http://www.facebook.com/example");
    mWebView.setWebViewClient(new CallBack()); 
```

当提示用户登录并且文本字段（电子邮件地址和密码）获得焦点时，键盘不会出现，因此用户无法登录。

我能改变什么？页面加载正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:13:04.697

您可以使用此代码可以帮助您：

```
webView.requestFocus(View.FOCUS_DOWN);
webView.setOnTouchListener(new View.OnTouchListener()
{
    @Override
    public boolean onTouch(View v, MotionEvent event)
    {
        switch (event.getAction())
        {
            case MotionEvent.ACTION_DOWN:
            case MotionEvent.ACTION_UP:
                if (!v.hasFocus())
                {
                    v.requestFocus();
                }
                break;
        }
        return false;
    }
}); 
```

# php - PHP 中的 OOP，$this->

> ID：12384620
> 
> 赞同：0
> 
> 时间：2012-09-12T09:01:21.407
> 
> 标签：php, oop

对于我作为 PHP OO 的新手来说，下面的代码中有一些不清楚的地方。对于`$this->name`，从哪里`name`派生？至于`$this->get_pinn_number`，为什么我必须使用`get_pinn_number`声明的函数/方法名称才能使其工作？

对于扩展类员工，为什么我不能使用`$this->name = $employee_name`呢？

```
class person {  
    var $name;
    public $pinn_number;

    function __construct($persons_name) {
        $this->name = $persons_name;
    }

    function set_name($name="Jay") {
        $this->name = $name;
    }

    function get_name() {
        return $this->name;
    }

    public function get_pinn_number($pinn_number) {
        $this->get_pinn_number = $pinn_number;
        return;
    }
}

class employee extends person {

    function __construct($employee_name) {
         $this->set_name($employee_name);
    }

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:04:18.963

来自`$name`父类：

```
class person {  
    var $name;
/// ....
class employee extends person { 
```

作为`employee`扩展`person`，它也获得了所有属性。

话虽如此，`var`这并不是声明属性的最佳方式。你会更好地使用`public`或`private`大多数。

最后，您*可以*在代码中使用`$this->name=$employee_name`，但使用父类函数的想法是允许它执行它应该执行的任何任务。假设该函数验证进入它的数据，因为它需要在父类的另一个函数中使用它。如果您只是设置它，它可能会破坏您稍后调用的另一个函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:05:23.753

你应该改变`var $name`，`protected $name`然后你就可以做到。由于亲自构造的构造函数已经设置了名称，因此您不必在员工中重新声明构造函数来执行相同的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:10:19.773

因为 in `employee`class`$this`表示雇员类。`$name`是`person`类的变量，所以不能用 . 调用父类的变量`$this`。您可以`$this->set_name()`在`employee`类中使用，因为它扩展了`person`类并且是公共方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:06:43.997

`why I cannot use $this->name = $employee_name instead?`

你可以，但使用 setter 可能是个好习惯，因为主类开发人员可能添加了比`this->x=x`. 尽管如果是这种情况，它应该设置为私有以强制您使用设置器。

注意：不再需要声明类成员变量。它将在 PHP5 中工作，但会在 PHP5 直到版本 5.3 中引发 E_STRICT 警告，从该版本开始，它已被弃用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T09:08:31.863

对于您的第二个问题，您应该使用：

`protected`当你想让你的变量/函数在扩展当前类的所有类中可见时，范围。

`public`范围以使该变量/函数可从任何地方、对象的其他类和实例中使用。

`private`当您希望变量/函数仅在其自己的类中可见时的范围。

# .net - 构建后的 MsBuild 复制文件

> ID：12384628
> 
> 赞同：24
> 
> 时间：2012-09-12T09:01:35.390
> 
> 标签：.net, visual-studio-2010, build, msbuild, csproj

我想`bin\Debug`在构建项目后将一个 xml 文件从主目录复制到，但我的解决方案不起作用。我编辑了`.csproj`文件并添加了：

```
<Target Name="AfterBuild">
     <Copy SourceFiles="Controllers.xml" DestinationFolder="\bin\Debug" ContinueOnError="true" />
</Target> 
```

我究竟做错了什么？构建成功。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-12T10:23:39.207

您的目标文件夹（很可能）是错误的。如果您使用前导反斜杠指定它，它实际上只是`<current-drive-letter>\bin\Debug`（使其有效地成为绝对路径，如`C:\bin\Debug`）的简写形式。

要么使用`bin\Debug`，要么更好地使用`OutputPath`变量，该变量设置为`bin\Debug`或者`bin\Release`取决于您的构建配置。

例子：

```
<Target Name="AfterBuild">
     <Copy SourceFiles="Controllers.xml" DestinationFolder="$(OutputPath)" ContinueOnError="true" />
</Target> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T11:33:46.687

xml文件在你的项目中吗？然后它的属性之一是 CopyToOutputDirectory。将其设置为 CopyAlways，当项目构建时，文件将被复制到 bin\debug。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T11:46:00.057

您必须指定完整路径。我怀疑 MsBuild 复制任务是从 Visual Studio 的“默认路径”运行的，并且找不到该文件。此外，您很可能希望文件最终位于构建目标目录中。

```
<Target Name="AfterBuild">
    <Copy SourceFiles="$(ProjectDir)Controllers.xml" DestinationFolder="$(TargetDir)" ContinueOnError="true" />
</Target> 
```

# bash - 如何查找第一个文件中的哪一行最常出现在第二个文件中？

> ID：12384629
> 
> 赞同：4
> 
> 时间：2012-09-12T09:01:37.387
> 
> 标签：bash, frequency

我有两个清单。我需要确定第一个列表中的哪个单词最常出现在第二个列表中。第一个`list1.txt`包含单词列表，按字母顺序排序，没有重复。我使用了一些脚本来确保每个单词出现在唯一的行上，例如：

```
canyon
fish
forest
mountain
river 
```

第二个文件`list2.txt`是 UTF-8 格式，还包含许多项目。我还使用了一些脚本来确保每个单词出现在唯一的行上，但有些项目不是单词，有些可能会出现多次，例如：

```
fish
canyon
ocean
ocean
ocean
ocean
1423
fish
109
fish
109
109
ocean 
```

*   该脚本应输出最常匹配的项目。例如，如果使用上面的 2 个文件运行，输出将是“fish”，因为该词`list1.txt`最常出现在`list2.txt`.

这是我到目前为止所拥有的。首先，它搜索每个单词并创建一个包含匹配项的 CSV 文件：

```
#!/bin/bash
while read -r line
do
    count=$(grep -c ^$line list2.txt)
    echo $line”,”$count >> found.csv
done < ./list1.txt 
```

之后，`found.csv`按第二列降序排序。输出是出现在第一行的单词。不过我不认为这是一个好的脚本，因为它效率不高，并且可能没有最常见的匹配项，例如：

*   如果 2 个或多个单词之间存在平局，例如“fish”、“canyon”和“forest”，每个单词出现 5 次，而没有其他单词出现频率相同，则输出将是按字母顺序排列的这 3 个单词，以逗号分隔，例如：“峡谷、鱼、森林”。
*   如果 from 中没有`list1.txt`出现任何单词`list2.txt`，则输出只是文件中的第一个单词`list1.txt`，例如“canyon”。

如何创建一个更有效的脚本来查找第一个列表中的哪个单词最常出现在第二个列表中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T09:06:03.930

您可以使用以下管道：

```
grep -Ff list1.txt list2.txt | sort | uniq -c | sort -n | tail -n1 
```

`F`告诉 grep 搜索文字单词，`f`告诉它`list1.txt`用作要搜索的单词列表。其余的对匹配项进行排序，计算重复项，并根据出现次数对它们进行排序。最后一部分选择最后一行，即最常见的一行（加上出现次数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:19:32.810

```
> awk 'FNR==NR{a[$1]=0;next}($1 in a){a[$1]++}END{for(i in a)print a[i],i}' file1 file2 | sort -rn|head -1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:16:49.390

假设 'list1.txt' 已排序，我将使用 unix **join**：

```
sort list2.txt | join -1 1 -2 1 list1.txt - | sort |\
   uniq -c | sort -n | tail -n1 
```

# python - “ IOError：解码器 zip 不可用” xhtml2pdf

> ID：12384630
> 
> 赞同：0
> 
> 时间：2012-09-12T09:01:39.413
> 
> 标签：python, xhtml2pdf

“IOError：解码器 zip 不可用”当我尝试使用图像渲染 pdf 时出现此类错误。我搜索答案如何解决它，但我发现仅适用于 linux 的决定（但我使用 Windows）。它怎么能修复？

### 这里有一些python代码：

```
 result = StringIO()            
            pdf = pisa.pisaDocument(StringIO(html.encode("UTF-8")), result, encoding="utf-8")
            filename = '%s_%s.pdf' % (name.capitalize(), datetime.datetime.now().strftime('%d-%m-%Y'))
            return Response(result.getvalue(), content_type='application/pdf',content_disposition='attachment; filename="%s"' % filename) 
```

### 我尝试渲染base64，这里是mako的代码：

```
<div><img src="data:image/png;base64,${img['actions'][0]['data']}"></div> 
```

### 完整追溯：

```
 URL: http://localhost:5000/en/case/report/84f3f17c-4cb3-4269-a369-910ddbba1ba4/pdf
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\weberror-0.10.3-py2.7.egg\\weberror\\evalexception.py', line 431 in respond
      app_iter = self.application(environ, detect_start_response)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid-1.2.1-py2.7.egg\\pyramid\\router.py', line 176 in __call__
      response = self.handle_request(request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid-1.2.1-py2.7.egg\\pyramid\\tweens.py', line 17 in excview_tween
      response = handler(request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid_tm-0.5-py2.7.egg\\pyramid_tm\\__init__.py', line 100 in tm_tween
      response = handler(request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid-1.2.1-py2.7.egg\\pyramid\\router.py', line 153 in handle_request
      response = view_callable(context, request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid-1.2.1-py2.7.egg\\pyramid\\config\\views.py', line 186 in _secured_view
      return view(context, request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\fidesysonline\\handlers\\__init__.py', line 32 in decorated_view
      response = view(context, request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid-1.2.1-py2.7.egg\\pyramid\\config\\views.py', line 319 in viewresult_to_response
      result = view(context, request)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pyramid-1.2.1-py2.7.egg\\pyramid\\config\\views.py', line 378 in _class_requestonly_view
      response = getattr(inst, attr)()
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\fidesysonline\\handlers\\case.py', line 530 in report
      pdf = pisa.pisaDocument(StringIO(html.encode("UTF-8")), result, encoding="utf-8")
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\document.py', line 127 in pisaDocument
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\platypus\\doctemplate.py', line 880 in build
      self.handle_flowable(flowables)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\platypus\\doctemplate.py', line 763 in handle_flowable
      if frame.add(f, canv, trySplit=self.allowSplitting):
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\platypus\\frames.py', line 174 in _add
      flowable.drawOn(canv, self._x + self._leftExtraIndent, y, _sW=aW-w)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\platypus\\flowables.py', line 108 in drawOn
      self._drawOn(canvas)
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\platypus\\flowables.py', line 89 in _drawOn
      self.draw()#this is the bit you overload
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\xhtml2pdf_reportlab.py', line 677 in draw
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\reportlab_paragraph.py', line 1064 in draw
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\reportlab_paragraph.py', line 1544 in drawPara
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\reportlab_paragraph.py', line 347 in _leftDrawParaLineX
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\reportlab_paragraph.py', line 214 in _putFragLine
    File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\pdfgen\\canvas.py', line 857 in drawImage
      imgObj = pdfdoc.PDFImageXObject(na

me, image, mask=mask)
File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\pdfbase\\pdfdoc.py', line 2086 in __init__
  self.loadImageFromSRC(source)   #it is already a PIL Image
File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\reportlab-2.5-py2.7-win-amd64.egg\\reportlab\\pdfbase\\pdfdoc.py', line 2173 in loadImageFromSRC
  raw = im.getRGBData()
File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\xhtml2pdf-0.0.4-py2.7.egg\\xhtml2pdf\\xhtml2pdf_reportlab.py', line 430 in getRGBData
File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pil-1.1.7-py2.7-win-amd64.egg\\Image.py', line 532 in tostring
  self.load()
File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pil-1.1.7-py2.7-win-amd64.egg\\ImageFile.py', line 189 in load
  d = Image._getdecoder(self.mode, d, a, self.decoderconfig)
File 'B:\\Khakhulin\\Fidesys\\Interface\\Pylons\\FidesysOnline\\~fo\\lib\\site-packages\\pil-1.1.7-py2.7-win-amd64.egg\\Image.py', line 385 in _getdecoder
  raise IOError("decoder %s not available" % decoder_name)
IOError: decoder zip not available 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T12:19:02.817

看起来你有一个没有 zip 支持的 PIL 版本这是一个答案，其中包含指向[Windows 的替代 PIL 版本](https://stackoverflow.com/a/7618116/187292)的链接，试试看。

# actionscript-3 - 带虚拟键盘的 AIR 弹出窗口(as3.0)

> ID：12384637
> 
> 赞同：-1
> 
> 时间：2012-09-12T09:02:13.240
> 
> 标签：actionscript-3, air, virtual

这是关于信息亭内容（全屏）。

我正在尝试使用虚拟键盘（as3.0）在**“AIR 弹出窗口”**（facebook 登录）中输入一些文本。

我知道“HTML 加载器类”可以是一个解决方案，但我认为这是不同的情况。

我怎样才能做到？我真的需要你的想法！感谢您阅读本文，对不起我的英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:56:21.060

尊重你真的应该对谷歌甚至stackoverflow进行彻底的搜索，因为这个问题已经至少提出过一次。无论如何，这里有一个关于同一问题的问题，有人在这里回答：

[适用于 Android 平台的 Flash API](https://stackoverflow.com/questions/5868058/flash-apis-for-android-platform/5870658#5870658)

基本上，它涉及 InteractiveObjects 中手动调用系统软键盘的新方法。很基本的东西。希望能帮助到你！:)

# android - 沿 .shp routelayer 为 Android 应用识别位置

> ID：12384642
> 
> 赞同：1
> 
> 时间：2012-09-12T09:02:39.043
> 
> 标签：android, gps, shapefile

我希望制作一个简单的 Android 应用程序，它显示沿 .shp 路由层的当前位置。我是一个关于 Android 应用程序开发的初学者。我在 Arcgis 中有这个工具，它可以从道路的起点识别特定点的公里值。该应用程序应使用 GPS 位置，并将其转换为道路距离和道路编号。它是报告事故或其他道路事件（死动物、倒下的树）的非常好的工具。我应该从哪里开始？也许有一些教程？这个应用程序合理可行吗？

先感谢您

# android - accountManager.addAccountExplicitly(帐号, 密码, null); 这个函数有什么作用？

> ID：12384643
> 
> 赞同：1
> 
> 时间：2012-09-12T09:02:44.550
> 
> 标签：android, email, accountmanager, google-account

这个函数有什么作用？是登录还是注册？

文档说“将帐户直接添加到 AccountManager。通常由与身份验证器关联的注册向导使用，而不是直接由应用程序使用。”

我在搜索“如何在 android 上添加帐户”并找到了这个功能。很多人都使用过这个功能，所以我也尝试过，但出现异常“调用者 uid 10043 与验证者的 uid 不同”。

然后，我阅读了文档，现在我很困惑，即使这是为了注册，但它对我不起作用。

我只想在注册或登录后以编程方式在 Android 设备上添加一个帐户（Gmail 帐户）。

# php - jQuery $.ajax request receives wrong response in Internet Explorer

> ID：12384644
> 
> 赞同：4
> 
> 时间：2012-09-12T09:02:45.623
> 
> 标签：php, jquery, json, internet-explorer, opencart

I'm having issues with ajax json requests and Internet Explorer. Specifically ajax requests do not behave properly.
I'm using:
OpenCart 1.5.3.1
jquery-1.7.1.min.js
jquery-ui-1.8.16.custom.min.js
Internet Explorer 9
PHP 5.2.9

This is the request function:

```
 function addToCart(product_id, quantity, option_id, option_value) {
        quantity = typeof(quantity) != 'undefined' ? quantity : 1;
        option_value = typeof(option_value) != 'undefined' ? option_value : 0;
        option_id = typeof(option_id) != 'undefined' ? option_id : 0;
        jQuery.ajax({
            url: 'index.php?route=checkout/cart/add',
            type: 'post',
            cache: false,
            data: 'product_id=' + product_id + '&quantity=' + quantity + '&option_id=' + option_id + '&option_value=' + option_value+'&rnd=' + Math.random(),
            dataType: 'json',
            success: function(jsonObj) {
                $('.success, .warning, .attention, .information, .error').remove();

                if (jsonObj['redirect']) {
                    location = jsonObj['redirect'];
                }

                if (jsonObj['success']) {
                    $('#notification').html('<div class="success" style="display: none;">' + jsonObj['success'] + '<img src="catalog/view/theme/default/image/close.png" alt="" class="close" /></div>');

                    $('.success').fadeIn('slow');

                    $('#cart-total').html(jsonObj['total']);

                    $('html, body').animate({ scrollTop: 0 }, 'slow'); 
                }   
            }
        });
    } 
```

The PHP function return:

```
{"success":"Added to cart!","total":"1 product(s) - 52,48\u043b\u0432."} 
```

This all works fine in Chrome, FF etc. but fails in IE.

Actually IE does not fire a "success" event.
The only way I can get a response is through an error handler.
Then the json object has a status = 200 and statusText = OK

This is the json object after success event fired in Chrome:

```
jsonObj: Object
success: "Added to cart!"
total: "1 product(s) - 52.48лв."
__proto__: Object 
```

From which the 'success' and 'total' values are used.

This is the json object after the error event was handled in Internet Explorer:
![Internet Explorer 9 developer tools screenshot](../Images/b5dc11751e982c3ea2bd3399de5cd099.png)

The responseText is a string that contains the current page html source.

I've tried with `jQuery.ajaxSetup({cache: false});` but the result is the same.

Has anyone had this issue? Or any tips?
I have no more ideas.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:11:29.477

try using absolute url for `url: 'index.php?route=checkout/cart/add'`

the problem is your respons is html or xml (I see the start tag (namespace tag) of an xml page followed by a newline followed by the (old)html starting tag).

jQuery expects json. So it's a parse error resulting in an error callback in staid of the expected success.

Make sure the backend sends the right info and that the called page is right. You can use the network tab to capture the calls to find your problem.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T12:06:47.340

The way I've gotten this to work on all of my mods is to use

```
$('base').attr('href') 
```

with the code, so the ajax for your code would be (small exerpt)

```
 option_value = typeof(option_value) != 'undefined' ? option_value : 0;
    option_id = typeof(option_id) != 'undefined' ? option_id : 0;
    var base = jQuery('base').attr('href');
    jQuery.ajax({
        url: base + 'index.php?route=checkout/cart/add',
        type: 'post', 
```

This has the benefit of always being a full URL and also working regardless of you using HTTP or HTTPS

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T07:40:30.837

I don't like having unnecessary stuff executed on every load as Jay Gilford offered here. Use this instead:

```
if ($.browser.msie) {
    $.ajaxPrefilter(function (options, originalOptions, jqXHR) {
        options.url = $('base').attr('href') + options.url;
    });
} 
```

# android - 如何在 Android 中自定义 FTS 标记器

> ID：12384645
> 
> 赞同：6
> 
> 时间：2012-09-12T09:02:53.483
> 
> 标签：android, sqlite, full-text-search

因为 sqlite fts 默认标记是“简单”，我可以将其更改为“搬运工”。但我必须支持非美国语言。像中文一样，它不能只按空格或点分隔。所以我想自定义分词器。有人可以给我一些建议吗？

1.  如何在 Sqlite 中注册 Tokenizer。

    ```
    SELECT fts3_tokenizer(<tokenizer-name>, <sqlite3_tokenizer_module ptr>); 
    ```

    因为 sqlite 是 Android 中的系统库，我不知道我是否可以注册。

2.  是否有适用于所有语言的通用标记器？对于我的应用程序必须 i18n。只支持中文是没有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-27T17:04:05.540

当然，您需要自定义 SQLite 安装。SQLite Android 绑定提供了一种简单的方法来做到这一点。这允许应用程序使用自定义构建或 SQLite 版本，而不管它部署到哪个 Android 版本，同时继续使用标准 Android 界面。 [https://sqlite.org/android/doc/trunk/www/index.wiki](https://sqlite.org/android/doc/trunk/www/index.wiki)

# c# - 为什么在 WinForm 中隐藏控件比使其可见需要更长的时间？

> ID：12384647
> 
> 赞同：3
> 
> 时间：2012-09-12T09:03:05.570
> 
> 标签：c#, winforms, performance

我有一个`FlowLayoutPanel`包含 56 个复选框。复选框用于三态模式。现在这是有趣的部分。如果复选框未选中，则表示它们未使用并且可以隐藏以便于阅读或阅读。为了隐藏它们，我使用了另一个复选框。当用户单击复选框时，FlowPanel 中所有未使用的复选框都使用 foreach 迭代隐藏。

问题是要隐藏它们，foreach 调用需要 ( `checkBox.Visible=false`) 大约 2-3 秒，而显示它们 ( `checkBox.Visible=true`) 需要 0.5 秒。

关于为什么会发生这种情况的任何建议？

```
private void hideUnusedPinsCheckBoxClick(objest sender, EventArgs e)
{
   bool state = !hideUnusedPinsCheckBox.Checked;
   foreach(object obj in flowLayoutPanel.Controls)
   {
      CheckBox cB = (CheckBox)obj;
      if(cB.CheckState == CheckState.Unchecked)
         cB.Visible=state;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:10:27.420

如果你隐藏了一些东西，系统必须找出那个对象下面的东西，并强制那个东西重新绘制自己。

另一方面，当您使控件可见时，只需绘制该控件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T09:15:17.667

您可以在隐藏所有复选框之前尝试调用`SuspendLayout`，然后再调用`ResumeLayout`。有关更多信息，请参阅[此链接](https://stackoverflow.com/questions/3838315/c-sharp-why-use-suspendlayout)。

回答您关于*为什么*会发生这种情况的问题。每次在 FlowLayoutPanel 上隐藏（或显示）控件时，都会执行面板布局器算法以重新排列屏幕上的所有内容。例如，如果您连续隐藏 50 个复选框，则布局器算法将至少执行 1,275 次。例如：

```
- Hide checkbox
- Perform layout for remaining 49 check boxes
- Hide checkbox
- Perform layout for remaining 48 check boxes
- Hide checkbox
- Perform layout for remaining 47 check boxes
- etc... 
```

通过调用 SuspendLayout，layouter 算法在调用 ResumeLayout 之前根本不会运行，将数量从 1,275 减少到 1。

# macos - 在 Xcode 构建期间将 iOS 应用程序包复制到另一个文件夹

> ID：12384652
> 
> 赞同：0
> 
> 时间：2012-09-12T09:03:27.637
> 
> 标签：macos, xcode4

我想在 Xcode 构建阶段将我的 iOS App Bundle 的内容复制到特定目录。谁能告诉我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-11-11T22:10:25.610

在“构建阶段”中使用脚本的解决方案无法正常工作，因为在运行脚本时 Xcode 尚未完成构建应用程序。这是一个解决方案，其中包含在所有构建任务完成后运行的脚本：

1.  转到“编辑方案”
2.  单击“构建”旁边的三角形
3.  选择“事后”
4.  按 + 按钮并选择“新建运行脚本选项”
5.  在“提供构建设置来自”中选择您的应用名称
6.  添加以下 shell 脚本：

脚本：

```
PRODUCT="${BUILT_PRODUCTS_DIR}/${TARGET_NAME}.app"
cp -R "${PRODUCT}" ~/Desktop 
```

[![编辑方案](../Images/49ddfcaa000d763f895560490b7c3282.png)](https://i.stack.imgur.com/5lvkU.png)

# php - 在选择框中选择一个选项，给定 PHP 表单中 word 形式的选项

> ID：12384657
> 
> 赞同：0
> 
> 时间：2012-09-12T09:03:57.237
> 
> 标签：php, html, forms, selection, drop-down-menu

我的网站的 php 表单中有一个标准**选择**框，其中包含英国的县列表，示例如下所示：

```
<p class='form_title'>County<br>
    <select id="county" name="county">
        <optgroup label="England">
            <option>Bedfordshire</option>
            <option>Berkshire</option>
            <option>Bristol</option>

            ....

            <option>Wiltshire</option>
            <option>Worcestershire</option>
        </optgroup>

        <optgroup label="Wales">
            <option>Anglesey</option>

            ...

            <option>Radnorshire</option>
        </optgroup>

        <optgroup label="Scotland">
            <option>Aberdeenshire</option>

            ...

            <option>Wigtownshire</option>
        </optgroup>

        <optgroup label="Northern Ireland">
            <option>Antrim</option>

            ...

            <option>Tyrone</option>
        </optgroup>
    </select>
</p> 
```

一旦用户提交了详细信息，他们就可以对其进行编辑。

因此，我需要一种方法来选择他们之前选择的选项，因为我有他们选择的选项以 word 形式保存，例如**Bedfordshire**。

我知道我需要将**所选**单词添加到其中一个选项中，但我想知道是否有比大量**案例**陈述更好的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:10:53.137

尝试这样的事情：

```
 foreach($places as $place) {
      $selected = $prevSelectionId == $place['id'] ? " selected='selected' " : "";
      echo "<option $selected value='".$place['id']."'>".$place['name']."</option>";
  }
 </select> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:11:31.933

您应该为每个选项设置一个选项值以跟踪该值。

此外，您应该从数据库生成它，然后您可以`selected`基于 a`$_GET`或进行设置`$_POST`：

例如：

```
foreach($county as $name){
    $selected = '';
    if($name == $_GET['name']){
        $selected = ' selected="selected"';
    }
    echo '<option value="'.$name.'"'.$selected.'>'.$name.'</option>';
} 
```

这不包括您的`optgroup`，但也应该来自数据库。

# c# - 为什么有时换行符是“\r\n”而不是“\n”？

> ID：12384670
> 
> 赞同：0
> 
> 时间：2012-09-12T09:04:23.453
> 
> 标签：c#, newline

> **可能重复：**
> [\n 和 \r 之间的区别？](https://stackoverflow.com/questions/1761051/difference-between-n-and-r)

在 C/C++ 中，我习惯了换行符为 '\n'，但是当我使用 C# 时，它是 "\r\n"、'\n' 或 '\r' 不要自己写一个新行.

这是为什么？'\r' 和 '\n' 有什么区别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:08:07.227

来自[http://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)：

*   LF：Multics、Unix 和类 Unix 系统（**GNU/Linux**、**Mac OS X**、**FreeBSD**、AIX、Xenix 等）、BeOS、Amiga、RISC OS 等。
*   CR+LF：**Microsoft Windows**、DEC TOPS-10、RT-11 和大多数其他早期的非 Unix 和非 IBM 操作系统、CP/M、MP/M、DOS（MS-DOS、PC-DOS 等）， Atari TOS、OS/2、Symbian 操作系统、Palm 操作系统
*   LF+CR：Acorn BBC 和 RISC OS 假脱机文本输出。
*   CR：Commodore 8 位机器、Acorn BBC、TRS-80、Apple II 系列、**Mac OS 最高版本 9**和 OS-9
*   RS：QNX pre-POSIX 实现。

CRLF 旨在与所有其他兼容。

以上都意味着换行符。在历史的某个时刻，即使有人争论使用其中一个，原始含义也丢失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:08:52.943

它应该与 C++ 完全相同。

但是，某些 Windows 控件需要回车符/换行符对，而不仅仅是换行符。

\n 是换行符。\r 是回车符。

# javascript - 尝试 init() Spine 的控制器并失败

> ID：12384675
> 
> 赞同：0
> 
> 时间：2012-09-12T09:04:44.257
> 
> 标签：javascript, controller, spine.js

我正在尝试创建一个 Spine 的控制器和 init() 它，

```
jQuery(function($) {
    window.Tests = Spine.Controller.create({
        init: function() {
            console.log('Tests created!');
        }
    });
    window.App = Tests.init();
}); 
```

但我有一个错误

> 未捕获的类型错误：对象函数结果（）{返回结果。**super** .constructor.apply(this, arguments); } 没有方法'init'

Spine 包含在我的 Controller 文件之前。帮我解决它，为什么 Controller.create() （和 Controller.sub()）返回函数而不是对象？

我试着让它像例子：

```
jQuery(function($){
  window.App = Spine.Controller.create({
    el: $("body"),

    elements: {
      "#sidebar": "sidebarEl",
      "#contacts": "contactsEl"
    },

    init: function(){
      this.sidebar = Sidebar.init({el: this.sidebarEl});
      this.contact = Contacts.init({el: this.contactsEl});

      Contact.fetch();
    }
  }).init();
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:18:15.527

我通过这样做解决了它

```
new Tests(); 
```

# c++ - C++中的静态布尔函数

> ID：12384677
> 
> 赞同：-3
> 
> 时间：2012-09-12T09:04:46.603
> 
> 标签：c++, static, boolean

该函数被定义为`static bool foo(const std::string& iVariable);`属于A类。我在使用的时候`if (A::foo（Var）)`，发现A::foo(Var)的返回值不会变，我在很多地方都用过，而且`Var`是变了。那么这是否意味着 A::foo(Var) 的返回值在我第一次使用后将被修复？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:19:46.490

查看 A::foo 的文档，看看它是否说它在第一次调用后忽略了参数。如果它确实这么说，那么你不应该期望返回值会改变。如果没有这样说，那么您应该期望该值会根据输入以及文档可能会告诉您的其他事情以某种方式发生变化。

当然，文档可能是错误的或具有误导性的，在这种情况下，查看源代码可以澄清这一点。

如果没有文档，我建议您与代码的作者交谈。

如果你是作者，你可能有一些工作要做。

# java - Android：热点未检测到所有与其连接的 WiFi 设备（/proc/net/arp）

> ID：12384678
> 
> 赞同：1
> 
> 时间：2012-09-12T09:04:47.753
> 
> 标签：java, android, wifi

我正在使用以下代码扫描连接到启用热点的设备的 wifi 设备。它正在检测除一台设备之外的几乎所有设备。以下是代码片段

> 公共 ArrayList getClientList(boolean onlyReachables, intreachableTimeout) {

```
 BufferedReader br = null;
    ArrayList<ClientScanResultSO> result = null;

   try {
        result = new ArrayList<ClientScanResultSO>();
        br = new BufferedReader(new FileReader("/proc/net/arp"));
        String line;
        while ((line = br.readLine()) != null) {
            String[] splitted = line.split(" +");

            if ((splitted != null) && (splitted.length >= 4)) {
                // Basic sanity check
                String mac = splitted[3];
                System.out.println("mac is***************"+ mac);
                if (mac.matches("..:..:..:..:..:..")) {
                    boolean isReachable = InetAddress.getByName(splitted[0]).isReachable(reachableTimeout);
                    String name = InetAddress.getByName(splitted[0]).getHostName();
                    if (!onlyReachables || isReachable) {
                        result.add(new ClientScanResultSO(splitted[0], splitted[3], splitted[5], isReachable, name));
                    }
                }
            }
        }
    } catch (Exception e) {
        Log.e(this.getClass().toString(), e.getMessage());
    } finally {
        try {
            br.close();
        } catch (IOException e) {
            Log.e(this.getClass().toString(), e.getMessage());
        }
    }

    return result;
} 
```

我无法找到它的问题。“/proc/net/arp”是否没有注册所有设备详细信息？有人可以帮助我吗...谢谢！

# c# - C#中的继承问题

> ID：12384679
> 
> 赞同：1
> 
> 时间：2012-09-12T09:04:48.297
> 
> 标签：c#, multiple-inheritance

我在 C# 中遇到了不允许的多重继承问题

以下场景：

```
class MasterCamera { ... }

class CameraFromManufacturerA : MasterCamera { ... }

class CameraFromManufacturerB : MasterCamera { ... }

class CameraFromManufacturerC : MasterCamera { ... } 
```

`MasterCamera`提供一些功能，如`StartCamera()`，`ConnectCamera()`等。在我的主代码中，我使用一个对象`MasterCamera mCamera = CameraSelector.GetCamera();` 来`CameraSelector`检查是否连接了来自 A、B 或 C 的相机，并返回该对象（例如`CameraFromManufacturerA`）

这在理论上工作得很好，但是这些相机的 API 之一需要使用 WindowsMessageCallback ( `WndProc`)，因此我只需要包含该相机`Windows.System.Forms.Form`

由于C#不允许多重继承，并且afaik Form没有接口类，我必须`MasterCamera`从`Windows.System.Forms.Form`

我不想那样，那我怎么能绕过呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:10:40.680

您不应将 MasterCamera { ... } 用作类，而应将其用作接口，例如：

公共接口 MasterCamera { ... }

它必须工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:12:10.757

这是继承的一个常见问题，这就是为什么 GoF 声明“优先组合优于继承”的原因

您可以使用[策略](http://en.wikipedia.org/wiki/Strategy_pattern)模式。而不是派生不同类型的`MasterCamera`，而是派生不同类型的`ICameraFunctionality`，并将该实例的对象存储在您的`MasterCamera`（或者更确切地说只是`Camera`）类中。

这样 MasterCamera 只是做普通的工作，但调用它的`ICameraFunctionality`实例来执行特定的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:08:24.060

如果您只是简单地*反转*代码中的依赖关系会怎样。创建一个`Form`覆盖`WindowsMessageCallback`并能够承载`MasterCamera`对象的类，这将是`Camera`您需要的子类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T09:10:54.250

你正在努力`Inheritance`。也试试看`Composition`。

不能`Camera`包含在`Form`?

# entity-framework - 实体框架多对多数据库迁移

> ID：12384683
> 
> 赞同：5
> 
> 时间：2012-09-12T09:05:03.847
> 
> 标签：entity-framework, entity-framework-4

我正在使用带有 .NET Framework 4.0 的 Entity Framework 4.4 构建 ASP MVC 网站

我在我的模型中添加了多对多关系，如下所示：

```
 public class User {
    public int UserID { get; set; }
    public string Username { get; set; }
    public virtual ICollection<Tenant> Tenants { get; set; }
  }

  public class Tenant {
    public string TenantID { get; set; }
    public string Name { get; set; }
    public virtual ICollection<User> Users { get; set; }
  } 
```

当我运行`Add-Migration`命令时，我得到了这个迁移类（我删除了 Down 方法）

```
 public partial class TenantUsersManyToManyMigration : DbMigration
    {
        public override void Up()
        {
            CreateTable(
                "dbo.UserTenants",
                c => new
                    {
                        User_UserID = c.Int(nullable: false),
                        Tenant_TenantID = c.String(nullable: false, maxLength: 128),
                    })
                .PrimaryKey(t => new { t.User_UserID, t.Tenant_TenantID })
                .ForeignKey("dbo.Users", t => t.User_UserID, cascadeDelete: true)
                .ForeignKey("dbo.Tenants", t => t.Tenant_TenantID, cascadeDelete: true)
                .Index(t => t.User_UserID)
                .Index(t => t.Tenant_TenantID);
        }
  } 
```

1.  为什么 TenantID 和 UserID 的字段名称分别是 User_UserID 和 Tenant_TenantID 而不是 UserID 和 TenantID。

2.  如何更改默认迁移脚手架（或我的模型）以使 cascadeDelete 为假？（目前我只是手动更改它）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T13:09:06.113

您可以使用流利的表示法以您想要的方式创建映射表。在您的 DbContext 类中，使用以下内容覆盖 OnModelCreating：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>()
            .HasMany(u => u.Tenants)
            .WithMany(t => t.Users)
            .Map(m =>
                {
                    m.ToTable("UserTenants");
                    m.MapLeftKey("UserId");
                    m.MapRightKey("TenantId");
                });
    } 
```

此外，使用 fluent 时，如果要在单个表上禁用级联删除，可以在映射属性时使用 .WillCascadeDelete(false)。这是[MSDN](http://msdn.microsoft.com/en-us/library/hh295843%28v=vs.103%29.aspx)上关于如何使用流利符号的精彩文章。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T12:23:44.523

您可以通过这种方式删除级联删除约定：

```
using System.Data.Entity.ModelConfiguration.Conventions;

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    modelBuilder.Conventions.Remove<OneToManyCascadeDeleteConvention>();
} 
```

然后看看脚手架有没有变化。我个人从未使用过它。

此外，Microsoft（有点）在标题下的此[链接](http://blogs.msdn.com/b/efdesign/archive/2010/06/01/conventions-for-code-first.aspx)中解释了 FK 命名约定`Foreign Keys`。

# c# - 将电子邮件与数据库中的现有电子邮件匹配

> ID：12384686
> 
> 赞同：-1
> 
> 时间：2012-09-12T09:05:12.713
> 
> 标签：c#, asp.net, sql

我有创建向导控件。用户将输入用户名、电子邮件和密码进行注册。然后他们需要在注册后登录。用户点击登录按钮后，将有一个文本框供用户插入他们之前注册的电子邮件。如果他们的电子邮件与其注册的电子邮件匹配，他们只会重定向到主页。如果没有，他们需要再次重新输入电子邮件。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:09:03.763

如果找到匹配项，下面的查询将返回 1，否则将返回 0。`Password`不包括在内，因为您提到它已经在第二页上（*意味着用户成功输入了正确的用户名和密码*）

```
SELECT COUNT(*)
FROM tablename
WHERE userName = 'value' AND
      email = 'email' 
```

# css - css 3 立方体翻转变换 - 页面转换 - 使用 twitter bootstrap

> ID：12384687
> 
> 赞同：1
> 
> 时间：2012-09-12T09:05:16.170
> 
> 标签：css, twitter-bootstrap, css-transforms

问题陈述

我受到[这里介绍的立方体翻转变换的启发](http://desandro.github.com/3dtransforms/docs/cube.html)

我认为当我将用户从一个页面重定向到另一个页面时，进行这样的转换会很棒。

然后在检查 HTML 时，我发现这是对堆叠的 div 执行的效果。

我设法在[http://jsfiddle.net/celestialcitizen/WpxX3/14/上复制了这个](http://jsfiddle.net/celestialcitizen/WpxX3/14/)

现在我的网站是用 Twitter Bootstrap 设计的。所以我决定将我网站的各个页面作为 div 堆叠在一个页面中。我在[http://jsfiddle.net/celestialcitizen/Rt4eR/4/尝试失败](http://jsfiddle.net/celestialcitizen/Rt4eR/4/)

1.  任何人都可以帮我纠正它吗？

2.  当我进行这些转换时，我仍然可以确保页面/div 中的元素是可点击的吗？

编辑：

这些 JS Fiddles 必须在 safari 和 Firefox 15.0.1 上查看

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-26T17:05:06.067

我知道已经很晚了，但是我对您的第一次复制做了一些 jQuery 移植：

[http://jsfiddle.net/celestialcitizen/WpxX3/14/](http://jsfiddle.net/celestialcitizen/WpxX3/14/)

这是第二个：

[http://jsfiddle.net/Rt4eR/11/](http://jsfiddle.net/Rt4eR/11/)

看起来你用`navbar-fixed-top`引导类和面尺寸和定位搞砸了一切。

请注意`e.preventDefault()`jQuery 调用，这将使您脸上的任何链接行为无效（即，如果您需要菜单等，请将其删除）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:58:41.813

this example I did about 3D transform might help, you can inspect the css/js/html for details

[http://www.css3rubikexperiment.net/](http://www.css3rubikexperiment.net/)

To answer your quetion:

1.  The perspective of your transitions box might be wrong. Theses parameter ara a good start.

    ```
    -webkit-perspective: 800;
    -webkit-perspective-origin: 50% 90px;
    -webkit-transition: -webkit-perspective, 1s;
    -webkit-transform: scale(0.6); 
    ```

2.  Yes, yes you can. After all we talking about div containers

# perl - Perl中文件的行号

> ID：12384692
> 
> 赞同：9
> 
> 时间：2012-09-12T09:05:28.127
> 
> 标签：perl

如果`awk`我将多个文件作为参数提供给`awk`，则有两个特殊变量：

`NR`= 对应于所有文件中所有行的行号。

`FNR`=当前文件的行号。

我知道在 Perl 中，`$.`对应于`NR`（所有文件中的行中的当前行）。

Perl 中是否也有与`FNR`AWK 类似的东西？

假设我有一些命令行：

```
perl -pe 'print filename,<something special which hold the current file's line number>'  *.txt 
```

这应该给我这样的输出：

```
file1.txt 1
file1.txt 2
file2.txt 1 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:47:26.357

实际上，[`eof`](http://perldoc.perl.org/perlfunc.html#eof)文档显示了一种方法：

```
# reset line numbering on each input file
while (<>) {
    next if /^\s*#/;  # skip comments
    print "$.\t$_";
} continue {
    close ARGV if eof;  # Not eof()!
} 
```

打印所有文件第一行的单行示例：

```
$ perl -ne 'print "$ARGV : $_" if $. == 1; } continue { close ARGV if eof;' *txt 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T09:30:02.427

Perl 中没有这样的变量。但是你应该学习[eof](http://p3rl.org/perlfunc#eof)才能写出类似的东西

```
perl -ne 'print join ":", $. + $sum, $., "\n"; $sum += $., $.=0  if eof;' *txt 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-16T22:08:25.193

我发现这种情况是使用 Perl 的一个很大的缺点。虽然这个答案是次优的，性能方面的，并且只适用于涉及的情况`xargs`，但我通常发现它是我 95% 的时间使用的解决方法。所以问题场景：

```
git ls-files -z | xargs -0 perl -ne 'print "$ARGV:$.\t$_" if /#define oom/'

file.h:85806    #define oom() exit(-1) 
```

该行号显然不正确，您显然会得到相同的行为`find` 当然，对于这个正则表达式或其他更简单的 Perl 正则表达式，我只会使用`awk`or `git grep -P`。但是，如果您正在处理一个相当复杂的正则表达式，或者需要其他 Perl 功能，那将无法正常工作……并且这个问题的*正确*答案会使已经很可能是复杂的 Perl 单行代码变得更加复杂。

所以我只使用以下内容：

```
git ls-files -z | xargs -0 -n1 perl -ne 'print "$ARGV:$.\t$_" if /#define oom/'

file.h:43       #define oom() exit(-1) 
```

xargs 参数使`-n1`xargs 为每个文件启动一个 Perl 进程，从而产生正确的行号。您正在查看*非常*显着的性能影响，但我发现它对于具有数百万行代码的非常大的项目而不是在 Perl 中解决它是可以接受的，我发现这几乎总是需要一个实际的脚本而不是单行代码。在绝大多数情况下，系统范围的搜索是*不可接受的。*

# c# - Visual Studio 2012：“实时错误列表” - 如何将其关闭？

> ID：12384694
> 
> 赞同：4
> 
> 时间：2012-09-12T09:05:33.837
> 
> 标签：c#, ide, visual-studio-2012

当我在 Visual Studio 2012 中编辑 C# 代码时，“错误列表”窗口会不断更新当前语法错误等列表。我发现这非常分散注意力，想将其关闭。

有谁知道如何关闭它？

（我真的不知道这个 VS 功能的正确名称，所以可能已经有人回答了......如果是这种情况，请道歉。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T09:08:39.043

您可以尝试基于： `General and deselecting the "Always show Error List if build finishes with errors"`

工具 --> 选项 --> 项目和解决方案 --> 常规并取消选择“如果构建完成时出现错误，则始终显示错误列表”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T09:10:36.750

我通常将其取消固定（右上角有固定图标），并在我想查看它时通过将鼠标移动到其标题上来调用它。编译项目后，如果有任何错误，窗口将自动出现。

# javascript - 停止重叠以获得更大的单词

> ID：12384695
> 
> 赞同：5
> 
> 时间：2012-09-12T09:05:41.380
> 
> 标签：javascript, jquery

在我目前的拼写游戏中，网格是为 3 个字母的单词设计的。我可以将更大的单词添加到“wordList”（动态创建网格）中，但是网格的大小会发生变化并在更大的单词所在的行上重叠。

例如，当添加一个四个字母的单词时，网格将在该行的末尾添加一个额外的单元格，而不是判断该单词不适合该行并在网格中占据另一个有效的位置。

基本上我需要网格保持相同的大小，并且当随机放置单词时，确定一个允许网格保持 6x6 的位置，而不是在它们不适合位置时离开边缘。显然，当添加大于 6 个字母的单词时，这是行不通的，因为它是 6x6，但这应该不是问题，因为我认为我们不会扩展到那么大的单词。

像这样通过html添加单词...

```
<ul style="display:none;" id="wordlist">
    <li data-word="rat" 
        data-audio="http://www.wav-sounds.com/cartoon/bugsbunny1.wav" 
        data-pic="http://www.clker.com/cliparts/C/j/X/e/k/D/mouse-md.png">
    </li>
</ul> 
```

然后像这样从列表中动态创建网格......

```
var listOfWords = [];
var rndWord = [];
var counter = 0;
var ul = document.getElementById("wordlist");
var i;

for (i = 0; i < ul.children.length; ++i) {

    listOfWords.push({
        "name": ul.children[i].getAttribute("data-word"),
        "pic": ul.children[i].getAttribute("data-pic"),
        "audio": ul.children[i].getAttribute("data-audio")
     });
}

var chosenWords = [];
var copylist = listOfWords.slice();

for (var x = 0; x < ul.children.length; x++) {
    var rand = Math.floor(Math.random() * (copylist.length));
    chosenWords.push(copylist[rand].name);
    copylist.splice(rand, 1);
    if (chosenWords.length < 12) {
        chosenWords.push('   ');
    }

}

var shuffledWords = [];
shuffledWords = chosenWords.sort(function() {
    return 0.5 - Math.random()
});

var guesses = {};
var tbl = document.createElement('table');
tbl.className = 'tablestyle';
var wordsPerRow = 2;

for (var i = 0; i < shuffledWords.length - 1; i += wordsPerRow) {

    var row = document.createElement('tr');
    for (var j = i; j < i + wordsPerRow; ++j) {
        var word = shuffledWords[j];
        guesses[word] = [];

        for (var k = 0; k < word.length; ++k) {
            var cell = document.createElement('td');

            $(cell).addClass('drop-box').attr('data-word', word).attr('data-letter', word[k]);
            cell.textContent = word[k];

            row.appendChild(cell);
         }
    }

    tbl.appendChild(row);
}

$(".container").append(tbl); 
```

这是一个小提琴，可以准确地说明我的意思。我在“wordList”中添加了两个 4 个字母的单词来说明我的意思。[http://jsfiddle.net/cTGGA/18/](http://jsfiddle.net/cTGGA/18/)

编辑

一旦我将较大的单词改编成网格，我将在此声明中说什么来准备它。

```
var completeLetters = $('.wordglow2').length;
var completeWords = (completeLetters / 3);
$('.counter').html(completeWords + '/6'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:21:46.620

我认为您要么需要从 shuffledword 列表中选择一个单词，该函数返回下一个未使用的单词，该单词适合该行中剩余的空间。

或者如果您想要每行 2 个单词并在从列表中选择一个或 2 个单词后用空格填充到行尾，则将行设为最长单词的 2 倍。

# python - 有没有人在带有 python nad OAuth2 的 appengine 上使用 picasa Web API 的工作示例？

> ID：12384699
> 
> 赞同：0
> 
> 时间：2012-09-12T09:05:54.047
> 
> 标签：python, google-app-engine, oauth-2.0, gdata, picasa

现有的 gdata python 客户端库仅具有使用 AuthSub 的文档，但[以下链接](https://developers.google.com/accounts/docs/AuthSub)指出 AuthSub 已弃用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T06:50:26.737

有大量使用 Python 和 OAuth2.0 的其他 GData API 示例。例如：http: [//googleappsdeveloper.blogspot.com/2011/09/python-oauth-20-google-data-apis.html](http://googleappsdeveloper.blogspot.com/2011/09/python-oauth-20-google-data-apis.html)

# java - 当 java 变量包含斯堪的纳维亚字母时，声纳分析运行失败

> ID：12384701
> 
> 赞同：0
> 
> 时间：2012-09-12T09:06:01.287
> 
> 标签：java, sonarqube

我正在对我的项目进行声纳分析。一些 java 变量包含斯堪的纳维亚字母（我知道这是不好的做法），Sonar 分析在遇到这种类型的字母时会中断。关于如何处理这个的任何想法（除了删除扫描字母）？

# ruby-on-rails - Ruby %r{ } 表达式

> ID：12384704
> 
> 赞同：150
> 
> 时间：2012-09-12T09:06:27.447
> 
> 标签：ruby-on-rails, ruby

在模型中有一个字段

```
validates :image_file_name, :format => { :with => %r{\.(gif|jpg|jpeg|png)$}i 
```

对我来说这看起来很奇怪。我知道这是一个正则表达式。但我想：

*   知道它到底是什么意思。`%r{value}`等于`/value/`? _
*   能够用普通的 Ruby 正则表达式运算符`/some regex/`或`~=`. 可能吗？

* * *

## 回答 #1

> 赞同：288
> 
> 时间：2012-09-12T09:10:22.250

`%r{}`等效于`/.../`符号，但允许您在正则表达式中包含 '/' 而不必转义它们：

```
%r{/home/user} 
```

相当于：

```
/\/home\/user/ 
```

为了易读性，这只是一种语法商品。

编辑：

请注意，您几乎可以使用任何非字母字符对来代替“{}”。这些变体也同样有效：

```
%r!/home/user!
%r'/home/user'
%r(/home/user) 
```

编辑2：

请注意，该`%r{}x`变体忽略空格，使复杂的正则表达式更具可读性。[来自GitHub 的 Ruby 风格指南的](https://github.com/github/rubocop-github/blob/master/STYLEGUIDE.md#regular-expressions)示例：

```
regexp = %r{
  start         # some text
  \s            # white space char
  (group)       # first group
  (?:alt1|alt2) # some alternation
  end
}x 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-12T09:15:17.363

使用`%r`，您可以使用任何分隔符。

您可以使用`%r{}`or `%r[]`or`%r!!`等​​。

使用其他分隔符的好处是您不需要转义`/`在普通正则表达式中使用的文字。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-12T09:09:40.557

`\.`=> 包含一个点
`(gif|jpg|jpeg|png)`=> 然后，这些扩展中的任何一个
`$`=> 结尾，之后什么都没有
`i`=> 不区分大小写

这和写作一样`/\.(gif|jpg|jpeg|png)$/i`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T09:08:35.103

此正则表达式匹配所有以 .gif、.jpg... 结尾的字符串

你可以用

```
/\.(gif|jpg|jpeg|png)$/i 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-12T09:10:21.140

这意味着必须以点和 gif、jpg、jpeg 或 png 之一`image_file_name`结束 ( )。`$`

是`%r{}`的意思完全一样，`//`但`%r{}`你不需要逃避`/`。

# windows - 如何将函数回调传递给创建的窗口？（视窗）

> ID：12384706
> 
> 赞同：0
> 
> 时间：2012-09-12T09:06:38.573
> 
> 标签：windows, callback

我有一个函数回调来处理窗口的事件，如 WM_SIZE。现在，如何将函数回调传递给打开的窗口？（它用于命令行应用程序）。

我见过 RegisterClassEx 但我认为它用于创建新窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:18:08.830

如果您想处理现有窗口的窗口消息，您有几个选择：

**子类化**。每个窗口都有一个“window proc”回调函数（您指的是），您可以使用`SetWindowLongPtr`with替换它`GWLP_WNDPROC`。然后在您自己的窗口过程中，您需要将消息转发到您替换的原始消息。但是有一些限制：

1.  您不能安全地取消子类窗口。
2.  您只能在自己的流程中执行此操作。

**Windows 挂钩**，使用`SetWindowsHookEx`. 如果您想查看其他窗口的消息，请使用此选项 - 您可以查看给定线程或系统范围内窗口的所有消息。有不同类型的钩子可让您捕获不同类型的消息。这是一种相当繁重的方法；最后的手段，这样您就不会不必要地使系统陷入困境。

# javascript - 无法让 document.GetElementById 正常工作

> ID：12384714
> 
> 赞同：0
> 
> 时间：2012-09-12T09:07:09.310
> 
> 标签：javascript, asp.net, updatepanel

我正在尝试从 asp 服务器按钮的 onClick 事件中调用 javascript 函数。我在更新面板中有这个按钮和一个标签。

在 aspx 中：

```
 <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
       <ContentTemplate>
         <asp:Button ID="Button1" runat="server" 
            style="z-index: 1; left: 49px; top: 119px; position: absolute; height: 26px;" Text="Button" 
            onclick="Button1_Click"/>
         <asp:Label ID="Label1" runat="server" Text="l1" 
            style="position:absolute; top: 123px; left: 127px;"></asp:Label>
       </ContentTemplate>
    </asp:UpdatePanel> 
```

后面的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
   ScriptManager.RegisterClientScriptBlock(this, typeof(Button), "me", "me()", true);
} 
```

aspx 中的 Javascript：

```
<script type="text/javascript">
function me()
{
   document.getElementById('<%= Label1.ClientID %>').value="clicked";
}
</script> 
```

我要做的就是在按钮上单击标签的值应更改为“单击”，这不会发生，并且在萤火虫中也没有错误。我在哪里错了（）？

PS：我这样做是为了学习从后面的代码中调用 javascript 函数。因此，也欢迎对代码进行任何优化。（其实我后面有很多代码要在JS函数中实现，所以请适当的建议）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:10:11.323

据我所知，Label 控件呈现为`<div>`或`<span>`（不记得确切），而不是文本输入字段。所以你应该设置它的`innerHTML`属性而不是`value`：

```
document.getElementById('<%= Label1.ClientID %>').innerHTML = 'clicked'; 
```

或者干脆在服务器端做而不是注册客户端回调：

```
protected void Button1_Click(object sender, EventArgs e)
{
   Label1.Text = "clicked";
} 
```

* * *

更新：

根据评论部分的要求，这里是您如何将参数从服务器传递给客户端回调：

```
protected void Button1_Click(object sender, EventArgs e)
{
    string param1 = ...
    double param2 = ...
    int param3 = ...
    var serializer = new JavaScriptSerializer();

    ScriptManager.RegisterClientScriptBlock(
        this, 
        typeof(Button), 
        "me", 
        string.Format("me({0})", serializer.Serialize(new { param1 = param1, param2 = param2, param3 = param3 })), 
        true
    );
} 
```

和你的回调：

```
function me(values) {
    // you could use values.param1, values.param2, values.param3, ... here
} 
```

# mysql - 识别关系 - 多对多

> ID：12384715
> 
> 赞同：2
> 
> 时间：2012-09-12T09:07:16.767
> 
> 标签：mysql, database, database-design, database-schema

我为日托中心制作了一个小型数据库。我一直在阅读有关识别和非识别关系的内容，但对整个事情仍然有些困惑。我一直在使用 MySQL Workbench 来设计数据库。

现在，父母和孩子的标准是一个`Parent`可以有一个或多个`Children`，反之亦然 - 因此，和之间的关系`Parents`是`Children`多对多的。解决这个问题的最佳实践（据我所知）是制作第三张表 -`Parets_Children`并将其用作其他两张表之间的“连接”：

```
Parents - 1:n - Parents_Children n:1 - Children 
```

现在我遇到的问题是是否在这里使用识别关系。逻辑是，没有父母，任何孩子都无法生存，除非他们在那里至少有一个孩子，否则父母不会成为日托的成员。他们都不会“单独”存在。但是，当让 MySQL WB 为我整理它时，它会创建一个非识别关系（我认为）。
非常简化的代码：

```
CREATE TABLE 'parents' (
  'id_parents' SMALLINT UNSIGNED NOT NULL ,
  'name' VARCHAR(48) NOT NULL ,
  PRIMARY KEY ('id_parents');

CREATE TABLE 'parents_children' (
  'id_parents' SMALLINT UNSIGNED NOT NULL ,
  'id_children' SMALLINT UNSIGNED NOT NULL ,
  PRIMARY KEY ('id_parents', 'id_children') ,
  FOREIGN KEY ('id_parents') REFERENCES 'parents' ('id_parents' )
  FOREIGN KEY ('id_children' ) REFERENCES 'children' ('id_children' );

CREATE TABLE 'children' (
  'id_children' SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT ,
  'name' VARCHAR(48) NOT NULL ,
  PRIMARY KEY ('id_children'); 
```

这个输出是否足以达到所需的功能？我误解了整个关系吗？我希望我的问题不是太晦涩难懂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:11:30.767

从您提供的架构中，我可以看到外键约束存在于 table 上`parents_children`，这将确保父子之间的链接只有在父子都存在时才能存在。

`parents`然而，这并不能阻止您在没有附带条目的情况下`parents_children`插入条目`children`。

所以简而言之，这个模式允许父母存在，没有孩子。

您的逻辑问题在于，在创建关系之前需要创建父子关系`parents_children`（由于外键关系）。但是，您正在寻找的附加逻辑（无子无父，反之亦然）将需要父子之间的所有链接，然后才能创建父子或子。

*你看到这里的鸡/蛋问题了吗？*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:41:10.873

> 逻辑是，没有父母，任何孩子都无法生存，除非他们在那里至少有一个孩子，否则父母不会成为日托的成员。

以一种简单的方式实现这一点.. 有一个表`MyDayCare`，您可以在其中包含以下列：`RecordID, ChildID, ChildName, ParentID, ParentName`
在插入记录时，您必须计算下一个`ChildID`和`ParentID`。您可以在您的表中使用其他库，`DateOfBirth`以便唯一标识每个父子对。

当您删除一个孩子时，父母也将被删除，反之亦然。
您甚至可以为同一个孩子存储多个父母的记录（在不同的行中）。通过使用简单的 SELF JOIN，您可以为特定的孩子或父母获取您想要的任何数据。

请注意，这不是设计数据库表的最佳方式，但根据您的要求，这也可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T11:43:32.073

是否在联结（又名链接）表上使用标识关系`Parets_Children`取决于您希望该表具有哪种主键。

`{id_parents, id_children}`正如您已经指出的，识别关系将产生一个“自然”的复合 PK 。*除了*（现在是备用的） key之外，非识别关系将允许您拥有一个“代理”PK `{id_parents, id_children}`。

除非您有代理键[的特定原因](https://stackoverflow.com/questions/11230062/a-column-as-primary-key-or-two-foreign-keys-as-primary-key/11230592#11230592)，否则在联结表上只有一个自然 PK 就足够了。

> 逻辑是，没有父母，任何孩子都无法生存，除非他们在那里至少有一个孩子，否则父母不会成为日托的成员。

不幸的是，至少有一个孩子的*存在并不容易通过纯粹的声明方式来强制执行。*事实上（至少据我所知）不可能在不支持延迟约束的 DBMS（如 MySQL）上以声明方式强制执行它，这对于在将父子节点插入在一起时打破先有鸡还是先有蛋的问题是必要的。

如果确实如此（支持延迟的 FK），则可以像这样声明性地强制每个父母至少有一个孩子的存在：

![在此处输入图像描述](../Images/244d1c167f6f1f32f3cf2a067bdeab6f.png)

`parent`由和之间的循环依赖引起的先有鸡还是先有蛋的问题`parent_child`可以通过推迟执行 FK 直到插入所有必要的行来解决。

就目前而言，您必须在应用程序代码中执行此操作，或者创建确保正确行为的存储过程，然后*仅*通过它们操作数据。

# android - 如何使用图形 api 获取 Facebook 用户相册？

> ID：12384717
> 
> 赞同：3
> 
> 时间：2012-09-12T09:07:26.627
> 
> 标签：android, facebook

我如何从 facebook 获取所有用户相册。我用这个网址试过这样 `https://graph.facebook.com/me/albums?access_token=xxxx`

我正在使用这段代码，我也提到了这个权限`"user_photos"`。

```
Bundle parameters = new Bundle();
parameters.putString("format", "json");
parameters.putString("method", "user_photos");
parameters.putString(TOKEN, facebook.getAccessToken());

JSONObject response = null;        
try {

    response = Util.parseJson(Album_Url);        
    JSONArray array = obj.optJSONArray("data");
    for(int i = 0; i<array.length(); i++){                  
    JSONObject main_obj = array.getJSONObject(i);
    String album = main_obj.getString("name");                          
    }        
} catch (JSONException e1) {             
    e1.printStackTrace();
} catch (FacebookError e1) {             
    e1.printStackTrace();
} 
```

但我在日志猫中得到了这个`09-12 14:27:42.990: W/System.err(12189): org.json.JSONException: Value https of type java.lang.String cannot be converted to JSONObject`。

我也试过这样

```
try {

        Bundle parameters = new Bundle();
        parameters.putString("format", "json");
        parameters.putString(TOKEN, facebook.getAccessToken()) ;       
        String response = null;
        try {
            response = Util.openUrl(Album_Url, "GET", parameters);
        } catch (MalformedURLException e) {      
            e.printStackTrace();
        } catch (IOException e) {        
            e.printStackTrace();
        }
        JSONObject obj = Util.parseJson(response);   
        JSONArray array = obj.optJSONArray("data");
        for(int i = 0; i<array.length(); i++){                  
            JSONObject main_obj = array.getJSONObject(i);
            String album =  main_obj.getString("name");                         
        }        
    } catch (JSONException e1) {             
        e1.printStackTrace();
    } catch (FacebookError e1) {             
        e1.printStackTrace();
    } 
```

我收到这个错误`09-12 14:42:36.920: W/System.err(12259): com.facebook.android.FacebookError: Malformed access token`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:59:32.553

在`onCreate()`方法中，我称之为`Asynctask`：

```
private class getAlbumsData extends AsyncTask<Void, Void, Void> {

    LinearLayout linlaHeaderProgress = (LinearLayout) findViewById(R.id.linlaHeaderProgress);

    @Override
    protected void onPreExecute() {

        // SHOW THE PROGRESS BAR (SPINNER) WHILE LOADING ALBUMS
        linlaHeaderProgress.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {

        // CHANGE THE LOADING MORE STATUS TO PREVENT DUPLICATE CALLS FOR
        // MORE DATA WHILE LOADING A BATCH
        loadingMore = true;

        // SET THE INITIAL URL TO GET THE FIRST LOT OF ALBUMS
        URL = "https://graph.facebook.com/" + initialUserID
                + "/albums&access_token="
                + Utility.mFacebook.getAccessToken() + "?limit=10";

        try {

            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet(URL);
            HttpResponse rp = hc.execute(get);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String queryAlbums = EntityUtils.toString(rp.getEntity());

                JSONObject JOTemp = new JSONObject(queryAlbums);

                JSONArray JAAlbums = JOTemp.getJSONArray("data");

                if (JAAlbums.length() == 0) {
                    stopLoadingData = true;
                    Runnable run = new Runnable() {

                        @Override
                        public void run() {
                            Toast.makeText(getApplicationContext(),
                                    "No more Albums", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    };
                    Albums.this.runOnUiThread(run);

                } else {
                    // PAGING JSONOBJECT
                    if (JOTemp.has("paging"))   {
                        JSONObject JOPaging = JOTemp.getJSONObject("paging");

                        if (JOPaging.has("next")) {
                            String initialpagingURL = JOPaging
                                    .getString("next");

                            String[] parts = initialpagingURL.split("limit=10");
                            String getLimit = parts[1];

                            pagingURL = "https://graph.facebook.com/"
                                    + initialUserID + "/albums&access_token="
                                    + Utility.mFacebook.getAccessToken()
                                    + "?limit=10" + getLimit;

                        } else {
                            stopLoadingData = true;
                            Runnable run = new Runnable() {

                                @Override
                                public void run() {
                                    Toast.makeText(getApplicationContext(),
                                            "No more Albums",
                                            Toast.LENGTH_SHORT).show();
                                }
                            };
                            Albums.this.runOnUiThread(run);
                        }
                    } else {
                        stopLoadingData = true;
                        Runnable run = new Runnable() {

                            @Override
                            public void run() {
                                Toast.makeText(getApplicationContext(),
                                        "No more Albums",
                                        Toast.LENGTH_SHORT).show();
                            }
                        };
                        Albums.this.runOnUiThread(run);

                    }

                    getAlbums albums;

                    for (int i = 0; i < JAAlbums.length(); i++) {
                        JSONObject JOAlbums = JAAlbums.getJSONObject(i);

                        if (JOAlbums.has("link")) {

                            albums = new getAlbums();

                            // GET THE ALBUM ID
                            if (JOAlbums.has("id")) {
                                albums.setAlbumID(JOAlbums.getString("id"));
                            } else {
                                albums.setAlbumID(null);
                            }

                            // GET THE ALBUM NAME
                            if (JOAlbums.has("name")) {
                                albums.setAlbumName(JOAlbums
                                        .getString("name"));
                            } else {
                                albums.setAlbumName(null);
                            }

                            // GET THE ALBUM COVER PHOTO
                            if (JOAlbums.has("cover_photo")) {
                                albums.setAlbumCover("https://graph.facebook.com/"
                                        + JOAlbums.getString("cover_photo")
                                        + "/picture?type=normal"
                                        + "&access_token="
                                        + Utility.mFacebook
                                                .getAccessToken());
                            } else {
                                albums.setAlbumCover("https://graph.facebook.com/"
                                        + JOAlbums.getString("id")
                                        + "/picture?type=album"
                                        + "&access_token="
                                        + Utility.mFacebook
                                                .getAccessToken());
                            }

                            // GET THE ALBUM'S PHOTO COUNT
                            if (JOAlbums.has("count")) {
                                albums.setAlbumPhotoCount(JOAlbums
                                        .getString("count"));
                            } else {
                                albums.setAlbumPhotoCount("0");
                            }

                            arrAlbums.add(albums);
                        }
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // SET THE ADAPTER TO THE LISTVIEW
        lv.setAdapter(adapter);

        // CHANGE THE LOADING MORE STATUS
        loadingMore = false;

        // HIDE THE PROGRESS BAR (SPINNER) AFTER LOADING ALBUMS
        linlaHeaderProgress.setVisibility(View.GONE);
    }

} 
```

为了完整起见，这里是我用来为一个永无止境的列表获取分页 URL 的内容：

```
private class loadMoreAlbums extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        // SHOW THE BOTTOM PROGRESS BAR (SPINNER) WHILE LOADING MORE ALBUMS
        linlaProgressBar.setVisibility(View.VISIBLE);
    }

    @Override
    protected Void doInBackground(Void... params) {

        // SET LOADING MORE "TRUE"
        loadingMore = true;

        // INCREMENT CURRENT PAGE
        current_page += 1;

        // Next page request
        URL = pagingURL;
        // Log.e("NEW URL", URL);

        try {

            HttpClient hc = new DefaultHttpClient();
            HttpGet get = new HttpGet(URL);
            HttpResponse rp = hc.execute(get);

            if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
                String queryAlbums = EntityUtils.toString(rp.getEntity());
                // Log.e("RESULT", queryAlbums);

                JSONObject JOTemp = new JSONObject(queryAlbums);

                JSONArray JAAlbums = JOTemp.getJSONArray("data");

                if (JAAlbums.length() == 0) {
                    stopLoadingData = true;

                    Runnable run = new Runnable() {

                        @Override
                        public void run() {
                            Toast.makeText(getApplicationContext(),
                                    "No more Albums", Toast.LENGTH_SHORT)
                                    .show();
                        }
                    };
                    Albums.this.runOnUiThread(run);

                } else {
                    // PAGING JSONOBJECT
                    JSONObject JOPaging = JOTemp.getJSONObject("paging");
                    // Log.e("PAGING", JOPaging.toString());

                    if (JOPaging.has("next")) {
                        String initialpagingURL = JOPaging
                                .getString("next");
                        // Log.e("initialpagingURL", initialpagingURL);

                        String[] parts = initialpagingURL.split("limit=10");
                        String getLimit = parts[1];

                        pagingURL = "https://graph.facebook.com/"
                                + initialUserID + "/albums&access_token="
                                + Utility.mFacebook.getAccessToken()
                                + "?limit=10" + getLimit;
                        // Log.e("NEW PAGING URL", pagingURL);

                    } else {
                        stopLoadingData = true;
                        Runnable run = new Runnable() {

                            @Override
                            public void run() {
                                Toast.makeText(getApplicationContext(),
                                        "No more Albums available",
                                        Toast.LENGTH_SHORT).show();
                            }
                        };
                        Albums.this.runOnUiThread(run);
                    }

                    getAlbums albums;

                    for (int i = 0; i < JAAlbums.length(); i++) {
                        JSONObject JOAlbums = JAAlbums.getJSONObject(i);
                        // Log.e("INDIVIDUAL ALBUMS", JOAlbums.toString());

                        if (JOAlbums.has("link")) {

                            albums = new getAlbums();

                            // GET THE ALBUM ID
                            if (JOAlbums.has("id")) {
                                albums.setAlbumID(JOAlbums.getString("id"));
                            } else {
                                albums.setAlbumID(null);
                            }

                            // GET THE ALBUM NAME
                            if (JOAlbums.has("name")) {
                                albums.setAlbumName(JOAlbums
                                        .getString("name"));
                            } else {
                                albums.setAlbumName(null);
                            }

                            // GET THE ALBUM COVER PHOTO
                            if (JOAlbums.has("cover_photo")) {
                                albums.setAlbumCover("https://graph.facebook.com/"
                                        + JOAlbums.getString("cover_photo")
                                        + "/picture?type=album"
                                        + "&access_token="
                                        + Utility.mFacebook
                                                .getAccessToken());
                            } else {
                                albums.setAlbumCover("https://graph.facebook.com/"
                                        + JOAlbums.getString("id")
                                        + "/picture?type=album"
                                        + "&access_token="
                                        + Utility.mFacebook
                                                .getAccessToken());
                            }

                            // GET THE ALBUM'S PHOTO COUNT
                            if (JOAlbums.has("count")) {
                                albums.setAlbumPhotoCount(JOAlbums
                                        .getString("count"));
                            } else {
                                albums.setAlbumPhotoCount("0");
                            }

                            arrAlbums.add(albums);
                        }
                    }
                }
            }
        } catch (Exception e) {
            e.printStackTrace();
        }

        return null;
    }

    @Override
    protected void onPostExecute(Void result) {

        // get listview current position - used to maintain scroll position
        int currentPosition = lv.getFirstVisiblePosition();

        // APPEND NEW DATA TO THE ARRAYLIST AND SET THE ADAPTER TO THE
        // LISTVIEW
        adapter = new AlbumsAdapter(Albums.this, arrAlbums);
        lv.setAdapter(adapter);

        // Setting new scroll position
        lv.setSelectionFromTop(currentPosition + 1, 0);

        // SET LOADINGMORE "FALSE" AFTER ADDING NEW FEEDS TO THE EXISTING
        // LIST
        loadingMore = false;

        // HIDE THE BOTTOM PROGRESS BAR (SPINNER) AFTER LOADING MORE ALBUMS
        linlaProgressBar.setVisibility(View.GONE);
    }

} 
```

`loadMoreAlbums` `Asynctask`从以下设置`onScrollListener`运行`onCreate()`：

```
 lv.setOnScrollListener(new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            int lastInScreen = firstVisibleItem + visibleItemCount;
            if ((lastInScreen == totalItemCount) && !(loadingMore)) {

                if (stopLoadingData == false) {
                    // FETCH THE NEXT BATCH OF FEEDS
                    new loadMoreAlbums().execute();
                }

            }
        }
    }); 
```

您可以从我的代码中选择相关部分，也可以将其全部使用（当然是在填写一些空白之后）。希望有些帮助。

# java - 没有结果时的Android SQLite

> ID：12384719
> 
> 赞同：1
> 
> 时间：2012-09-12T09:07:33.257
> 
> 标签：java, android, sqlite

我正在使用 databaseutils 在我的数据库上运行 SQL 查询。基本上只是一个登录，但是我想获取登录的人的用户 ID，所以我选择了它。如果有结果它可以正常工作，但是当没有结果时会摔倒。如果有办法设置 if is set 或类似的？

```
 if(String.valueOf(loginCount).equals("2")) {

    File dbfile = new File(Global.StaticDB + "/Users" ); 
    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);

    String loginQueryCheck=(String)DatabaseUtils.stringForQuery(db,"SELECT UserID from Users where Username like '" + txtUsername.getText().toString() + "' AND Password like '" + txtPassword.getText().toString() + "'",null);

    Log.e("Login Query:", loginQueryCheck);
    db.close();  

    if(loginQueryCheck.length() > 1) {
        Context context = getApplicationContext();
    CharSequence text = "Logged In";
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
    Intent ShowMainPage = new Intent(view.getContext(), MainPage.class);
    startActivityForResult(ShowMainPage, 0);
    } else {
        Context context = getApplicationContext();
    CharSequence text = "Login Failed";
    int duration = Toast.LENGTH_SHORT;
    Toast toast = Toast.makeText(context, text, duration);
    toast.show();
    }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:15:15.637

将检查更改为：

```
if(loginQueryCheck != null && !loginQueryCheck.equals("") && loginQueryCheck.length() > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:19:35.560

我认为您可以尝试计算 UserID 而不是在 SQL 语句中查询 UserID。

```
int loginQueryCheck=(int)DatabaseUtils.stringForQuery(db,
      "SELECT COUNT(DISTINCT UserID) FROM Users WHERE Username like '" +
      txtUsername.getText().toString() + "' AND Password like '" +
      txtPassword.getText().toString() + "'",null); 
```

# percona - pt-kill 在日志中显示数据库

> ID：12384720
> 
> 赞同：2
> 
> 时间：2012-09-12T09:07:35.293
> 
> 标签：percona

我们已经在我们的一些服务器上启用了 pt-kill，但没有杀死，现在只是为了监控慢查询。

唯一的问题是，日志不包含数据库，只包含查询。有没有办法在日志中启用查询执行的数据库？

```
# 2012-09-12T10:31:23 KILL 419539612 (Query 138 sec) SELECT blog.*, blog_text.*, user.*

FROM blog AS blog
INNER JOIN blog_text AS blog_text ON (blog.firstblogtextid = blog_text.blogtextid)
INNER JOIN blog_user AS blog_user ON (blog_user.bloguserid = blog.userid)
LEFT JOIN user AS user ON (user.userid = blog_text.userid)

WHERE 1=1
    AND blog.state = 'visible'
    AND blog.dateline <= 1347438544
    AND blog.pending = 0
    AND blog_user.options_guest & 1
    AND ~blog.options & 8

ORDER BY blog.dateline DESC
LIMIT 15 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T19:00:06.083

它由 vBulletin 运行，如果有帮助的话。您可以通过索引“blog”和“blog_user”表中的一些引用字段来显着加快查询速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-17T01:51:52.110

为查询记录数据库当前不是 pt-kill 的功能（从版本 2.1.x 开始）。

过去曾请求此功能：
[https ://bugs.launchpad.net/percona-toolkit/+bug/1015804](https://bugs.launchpad.net/percona-toolkit/+bug/1015804)

但它尚未实施。

# oracle - Oracle 在从分区表中获取数据时遇到问题

> ID：12384726
> 
> 赞同：1
> 
> 时间：2012-09-12T09:08:06.000
> 
> 标签：oracle, plsql, partitioning

在一份新工作中，我必须弄清楚一些数据库报告脚本是如何工作的。有一张桌子给我带来了一些麻烦。我在现有脚本中看到它是一个分区表。我的问题是我在这个表上运行的任何查询都会返回“未选择行”。

以下是有关我在此表中的调查的一些详细信息：

**表大小估计**

```
SQL> select sum(bytes)/1024/1024 Megabytes from dba_segments where segment_name = 'PPREC';

MEGABYTES
----------
45.625 
```

**分区**

日期范围内共有 730 个分区。

```
SQL> select min(PARTITION_NAME),max(PARTITION_NAME) from dba_segments where segment_name = 'PPREC';

MIN(PARTITION_NAME)            MAX(PARTITION_NAME)
------------------------------ ------------------------------
PART20110201                   PART20130130 
```

有几个表空间和分区在其中分配

```
SQL> select tablespace_name, count(partition_name) from dba_segments where segment_name = 'PPREC' group by tablespace_name;

TABLESPACE_NAME                COUNT(PARTITION_NAME)
------------------------------ ---------------------
REC_DATA_01                                       281
REC_DATA_02                                        48
REC_DATA_03                                        70
REC_DATA_04                                        26
REC_DATA_05                                        44
REC_DATA_06                                        51
REC_DATA_07                                        13
REC_DATA_08                                        48
REC_DATA_09                                        32
REC_DATA_10                                        52
REC_DATA_11                                        35
REC_DATA_12                                        30 
```

附加查询：

```
SQL> select * from dba_segments where segment_name='PPREC' and partition_name='PART20120912';

OWNER SEGMENT_NAME PARTITION_NAME SEGMENT_TYPE    TABLESPACE_NAME HEADER_FILE HEADER_BLOCK BYTES BLOCKS EXTENTS 
----- ------------ -------------- --------------- --------------- ----------- ------------ ----- ------ -------
HIST  PPREC        PART20120912   TABLE PARTITION REC_DATA_01              13       475315 65536      8       1

INITIAL_EXTENT NEXT_EXTENT MIN_EXTENTS MAX_EXTENTS PCT_INCREASE FREELISTS FREELIST_GROUPS RELATIVE_FNO BUFFER_POOL
-------------- ----------- ----------- ----------- ------------ --------- --------------- ------------ -----------
  65536                              1  2147483645                                                 13    DEFAULT 
```

**表空间使用**

这是一个空间摘要（dba_tablespaces、dba_data_files、dba_segments、dba_free_space 的组合）

```
TABLESPACE_NAME                TOTAL_MEGABYTES USED_MEGABYTES FREE_MEGABYTES
------------------------------ --------------- -------------- --------------
REC_01_INDX                              30,700            250         30,449
REC_02_INDX                               7,745              7          7,737
REC_03_INDX                              22,692             15         22,677
REC_04_INDX                              15,768             10         15,758
REC_05_INDX                              25,884             16         25,868
REC_06_INDX                              27,992             16         27,975
REC_07_INDX                              17,600             10         17,590
REC_08_INDX                              18,864             11         18,853
REC_09_INDX                              19,700             12         19,687
REC_10_INDX                              28,716             16         28,699
REC_DATA_01                             102,718            561        102,156
REC_DATA_02                              24,544          3,140         21,403
REC_DATA_03                              72,710              4         72,704
REC_DATA_04                              29,191              2         29,188
REC_DATA_05                              42,696              3         42,692
REC_DATA_06                              52,780            323         52,456
REC_DATA_07                              16,536              1         16,534
REC_DATA_08                              49,247              3         49,243
REC_DATA_09                              30,848              2         30,845
REC_DATA_10                              49,620              3         49,616
REC_DATA_11                              40,616              2         40,613
REC_DATA_12                             184,922        123,435         61,486 
```

表空间使用情况似乎证实了该表不是空的，实际上它的最后一个表空间 (REC_DATA_12) 似乎很忙。

**现有脚本**

我发现令人费解的是，有一些 PL/SQL 存储过程似乎可以在该表上工作并从中获取数据。这种存储过程的一个例子如下：

```
procedure FIRST_REC as
vpartition varchar2(12);
begin
select 'PART'||To_char(sysdate,'YYYYMMDD') INTO vpartition FROM DUAL;

execute immediate
'MERGE INTO FIRST_REC_temp a
 USING (SELECT bno, min(trdate) mintr,max(trdate) maxtr
        FROM PPREC PARTITION ('||vpartition||') WHERE route_id IS NOT NULL AND trunc(trdate) <= trunc(sysdate-1)
        GROUP BY bno) b
    ON (a.bno=b.bno)
    when matched then
    update set a.last_tr = b.maxtr
    when not matched then
    insert (a.bno,a.last_tr,a.first_tr)
    values (b.bno,b.maxtr,b.mintr)';
    commit; 
```

但是，如果我尝试在表上手动使用相同的语法，我得到的是：

```
SQL> select count(*) from PPREC PARTITION (PART20120912);

  COUNT(*)
----------
         0 
```

我尝试了一些随机分区，但总是得到相同的 0 计数。

**摘要** - 我看到一个似乎包含数据的表（已用空间、表空间、数据文件） - 表已分区（截至 2013 年 1 月结束的 730 天内，每天一个分区） - 脚本正在从该表中提取数据不知何故

**问题** - 我使用 PARTITION 的查询都返回“未选择行”。我究竟做错了什么？我怎样才能知道如何从这个表中提取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:40:21.113

我想可能是其他一些进程正在删除数据，但是如果不访问您的站点，这里的任何人都无法判断是否是这样。

我在您的帖子中没有看到您提到分区 DATE 列的名称，但根据您发布的 SQL，我假设它是 TRDATE - 如果这不正确，请将下面语句中的 TRDATE 更改为分区列.

也就是说，试试这个：

```
SELECT COUNT(*)
  FROM PPREC
  WHERE TRDATE >= TO_DATE('01-SEP-2012 00:00:00', 'DD-MON-YYYY HH24:MI:SS') 
```

这假设您应该在此表中拥有 9 月份的数据。如果您找到数据，那就太好了。如果你不 - 好吧，回到过去（当男人是男人，女人是女人，电脑是水冷的 :-) 我们对 IBM 大型机上的内存有一点看法：

```
1\.  If you can see it,   and it's there,     it's Real.
2\.  If you can't see it, but it's there,     it's Protected.
3\.  If you can see it,   but it's not there, it's Virtual.
4\.  If you can't see it, and it's not there, it's GONE! 
```

:-)

PARTITION 子句的使用应该保留在遇到性能问题的情况下（注意：不允许猜测什么是或不会是性能问题。在遇到性能问题之前，你没有一个性能问题。多年来，我发现软件在最糟糕的地方花费了大量的执行时间:-)，并且通常的修复（添加索引、删除不必要的数据、人类牺牲等）没有奏效。基本上，正常编写查询并相信数据库会正确处理。（在一般情况下 -*总是*编写最简单的代码 - 并做最简单的事情 - 可能会起作用。99% 以上的时间会没事的。这使您可以将优化时间花在简单不够好的不到 1% 的情况上——而且您编写或设计的*大多数*软件都将简单易懂）。

分享和享受。

# svn - 在svn中提交特定文件时如何添加警告弹出窗口？

> ID：12384728
> 
> 赞同：2
> 
> 时间：2012-09-12T09:08:06.347
> 
> 标签：svn, tortoisesvn, visualsvn, visualsvn-server

我正在开发一个大型 .NET Web 项目，我想防止团队中的开发人员错误地提交`.config`-files。我想要的解决方案是某种弹出窗口作为警告说*“你确定要提交这些文件吗？”* 当有人试图提交`.config`-files 时。这样做应该是合法的，但首先要发出警告。

我们使用带有 VisualSVN 服务器和 TortoiseSVN 的 Apache Subversion 设置作为 svn gui 客户端。

有没有可能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:24:32.970

我使用[预提交挂钩](http://svnbook.red-bean.com/en/1.7/svn.ref.reposhooks.pre-commit.html)脚本来阻止某些文件的提交，除非日志消息中包含特定的主题标签。

脚本的输出显示在 Tortoise 提交对话框中，解释了提交被阻止的原因以及如果开发人员确定他们打算提交这些文件时要添加什么标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:24:23.110

我可以猜到那些配置文件已经在版本控制中并提交了一些必要的更改，并且您不希望再次提交该文件而缺乏谨慎

要实现这一点，您必须通过添加

```
 svn changelist ignore-on-commit file-name 
```

TortoiseSVN（Windows GUI 客户端）提供“ignore-on-commit”，但命令行 svn 没有。

因此，您可以指示您的开发人员添加配置文件更改列表，如果某个负责人想要提交新的配置文件，他可以从命令行手动完成，而不是使用 tortoise SVN GUI

您也可以从上下文菜单中将文件添加到提交时忽略列表，我认为最新版本的 tortoise svn 具有该功能。

# c# - 如何关闭包含对 NetworkStream.Read 的阻塞调用的线程

> ID：12384730
> 
> 赞同：4
> 
> 时间：2012-09-12T09:08:23.833
> 
> 标签：c#, .net, multithreading, sockets

我正在查看一些不是我自己编写的代码，并试图了解导致应用程序崩溃的原因。

我认为这可能归结为它如何处理资源和管理线程。

主父线程创建一个新的应用层客户端（TCPMonitor），然后创建另一个处理 TCP 套接字通信的类（TCPListen）。此类产生一个新的线程循环，该循环创建一个新的 TCP 套接字客户端、该套接字上的读取网络流，然后调用同步阻塞 Read()。

但是，如果发生网络错误连接，则会在 TCPListen 线程循环中捕获异常，并将事件引发回所属类 TCPMonitor。TCPMonitor 然后检查它是否拥有一个活动的 TCPListen 实例，如果是，它调用 Dispose() 并将该实例设置为 Null。

此时 TCPListen Read() 肯定仍处于其阻塞调用中吗？如果是这种情况，我如何确保从父线程调用 Dispose 将使子线程脱离阻塞调用并正确处理流和套接字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:13:36.070

如何使用异步调用（例如`BeginReceive`）而不是阻塞调用，并让线程等待一个对象告诉它干净地终止？创建类似 a 的东西`ManualResetEvent`并让线程等待它。从主线程发出事件信号，当监听线程唤醒时，它可以关闭套接字。

请注意，当使用数据调用回调委托时，`BeginReceive`如果线程需要接收更多数据，则需要进行另一次调用。检查这里的描述：http `BeginReceive`: [//msdn.microsoft.com/en-us/library/dxkwh6zw](http://msdn.microsoft.com/en-us/library/dxkwh6zw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:30:19.767

关闭套接字以进行输入。这将解锁读取并使其获得 EOS 指示，无论 API 采用何种形式。就像您在 Windows 上一样，如果它继续发送，它也会导致另一端连接休息。（此行为取决于平台。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:45:52.653

您没有提到您的代码正在使用的实际 C# 网络 API 调用，但假设它是底层 Socket 对象上的众多“接收”方法之一，那么您是正确的，它将在绑定的连接套接字上无限期阻塞，除非在 Socket 对象上设置超时 ( [ReceiveTimeout )。](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receivetimeout.aspx)

一旦设置，如果在该时间内没有接收到数据，它将返回。然后，您可以将 Receieve 调用放在某个布尔值上的循环中，您可以在外部设置以触发线程停止。

**更新：**

您可以使用[DataAvailable](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.dataavailable)在循环中查询 NetworkStream 以查看是否有要读取的内容，而不是在同步读取调用上阻塞线程？

# node.js - node.js mongodb如何连接到mongo服务器的副本集

> ID：12384735
> 
> 赞同：5
> 
> 时间：2012-09-12T09:08:41.813
> 
> 标签：node.js, mongodb, node-mongodb-native

我正在使用`mongo`和`node.js`在一个应用程序中。mongo 数据库由两台服务器组成。

在[http://howtonode.org/express-mongodb](http://howtonode.org/express-mongodb)给出的示例中，我可以使用以下方式连接到一台服务器：

```
ArticleProvider = function(host, port) {
 var database = 'node-mongo-blog';
 this.db= new Db(database, new Server(host, port, {auto_reconnect: true}, {}));
 this.db.open(function(){});
}; 
```

但是如何连接到多个服务器，在我的情况下有两个服务器。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2019-02-28T21:39:26.167

现在接受的答案已经很老了。从那以后发生了很多变化。您可以使用以下格式的[连接字符串](https://docs.mongodb.com/manual/reference/connection-string/)：

> mongodb://[用户名:密码@]host1[:port1][,...hostN[:portN]]][/[数据库][?options]]

一个示例如下所示：

```
const { MongoClient } = require('mongodb');

const connectionString = 'mongodb://mongodb0.example.com:27017,mongodb1.example.com:27017,mongodb2.example.com:27017/admin?replicaSet=myRepl';

MongoClient.connect(connectionString, options).then((client) => {
    const db = client.db('node-mongo-blog');
    // do database things
}).catch((error) => {
    // handle connection errors
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-12T10:19:13.060

[来自https://github.com/christkv/node-mongodb-native/blob/master/examples/replSetServersQueries.js](https://github.com/christkv/node-mongodb-native/blob/master/examples/replSetServersQueries.js)的示例代码 。

指定的服务器只是种子列表 - 它会自动发现完整的列表。副本集的成员不是静态的——它们会发生变化（可能会添加新服务器或删除现有服务器）。客户端连接到输入列表中指定的服务器之一，然后从中获取副本集成员。因此，您不必在此处列出所有服务器地址 - 如果列表中提到的至少一台服务器已启动并运行，它将自动找到其余服务器。

```
var port1 = 27018;
var port2 = 27019;
var server = new Server(host, port, {});
var server1 = new Server(host, port1, {});
var server2 = new Server(host, port2, {});
var servers = new Array();
servers[0] = server2;
servers[1] = server1;
servers[2] = server;

var replStat = new ReplSetServers(servers);
console.log("Connecting to " + host + ":" + port);
console.log("Connecting to " + host1 + ":" + port1);
console.log("Connecting to " + host2 + ":" + port2);
var db = new Db('node-mongo-examples', replStat, {native_parser:true}); 
```

# c# - 从 enum_ 设置按钮名称

> ID：12384736
> 
> 赞同：1
> 
> 时间：2012-09-12T09:08:43.747
> 
> 标签：c#, wpf

我在 WPF 窗口上有很多按钮。为了避免一遍又一遍地编写相同的单击事件，我希望它们都触发相同的方法并根据我调用的按钮采取适当的操作。

我知道我可以将发件人投射到一个按钮，然后检查名称并从那里路由代码，但是我必须对所有名称进行硬编码，如果按钮在某个阶段重命名，这可能会一团糟。

有什么更好的方法来做到这一点？例如，我可以从枚举中命名按钮吗？或者是否可以通过直接引用按钮来获取检查的按钮名称？

可能是这样的？

```
private void btnAddTerminatorElement_Click(object sender, RoutedEventArgs e)
    {
        MsoAutoShapeType shapeType;

        switch (((Button)sender).Name)
        {
            case this.btnAddTerminatorElement.Name:
                shapeType = MsoAutoShapeType.msoShapeFlowchartTerminator;
                break;

        }

        CreateChartElement(this.targetWorksheet.Shapes.AddShape(MsoAutoShapeType.msoShapeFlowchartTerminator, 100, 100, 50, 50));
    } 
```

但这不起作用，因为比较需要一个常数......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:20:29.130

使用[Enum.Parse](http://msdn.microsoft.com/en-us/library/essfb559.aspx)从字符串中获取枚举。然后您的开关将起作用。

编辑：

我应该再解释一下：您可以使用按钮名称作为值创建枚举，然后将 Name 转换为枚举并进行切换。

嗯...更简单的解决方案：您可以使用 MsoAutoShapeType 值作为按钮名称或标签，然后在单击处理程序中将其转换为枚举，从而消除 switch 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T04:05:38.987

到目前为止，我想出的唯一好方法不是使用 switch 语句，而是在事件函数中使用单独的 if 块来检查调用者姓名。像这样的东西：

```
private void btnAddTerminatorElement_Click(object sender, RoutedEventArgs e)
    {
        Button button = (Button)sender;
        MsoAutoShapeType shapeType = MsoAutoShapeType.msoShapeRectangle;

        if (sender == this.btnAddTerminatorElement)
            shapeType = MsoAutoShapeType.msoShapeFlowchartTerminator;

        if (sender == this.btnAddDecisionElement)
            shapeType = MsoAutoShapeType.msoShapeFlowchartDecision;

        CreateChartElement(this.targetWorksheet.Shapes.AddShape(shapeType, 100, 100, 50, 50));
    } 
```

到目前为止，我能想到的唯一一种足够强大以应对重命名按钮的方法。如果有任何替代方案，我最有兴趣了解它们。

# wpf - 如何从 c# 代码隐藏设置列表框的数据模板中存在的文本块的文本？

> ID：12384737
> 
> 赞同：0
> 
> 时间：2012-09-12T09:08:45.870
> 
> 标签：wpf, silverlight, xaml, microsoft-metro

我的列表框 XAML 如下所示：

```
<ListBox x:Name="lstbxbProducts" SelectionChanged="lstbxbProducts_SelectionChanged_1" HorizontalAlignment="Left" Height="547" Margin="0,221,0,0" VerticalAlignment="Top" Width="1044" RenderTransformOrigin="0.600000023841858,0.5">        
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <StackPanel Width="80" VerticalAlignment="Center" Orientation="Horizontal">
                    <TextBlock Text="{Binding prdnum}" VerticalAlignment="Center" HorizontalAlignment="Left" ></TextBlock>
                    <TextBlock Text="  -" VerticalAlignment="Center" HorizontalAlignment="Left" ></TextBlock>
                </StackPanel>
                <StackPanel Width="400">
                    <TextBlock Text="{Binding prddsc}" VerticalAlignment="Center"  HorizontalAlignment="Left" ></TextBlock>
                </StackPanel>
                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Width="180">
                    <StackPanel>
                        <TextBlock Text="{Binding um_cod}" Name="txtblkUmcode" VerticalAlignment="Center"  HorizontalAlignment="Left" ></TextBlock>
                    </StackPanel>
                    <StackPanel Width="20"></StackPanel>
                    <StackPanel Width="20">
                        <Image Source="/Images/Arrowselection.png" Tapped="Image_Tapped_1" VerticalAlignment="Center" ></Image>
                    </StackPanel>
                </StackPanel>

                <StackPanel Width="180">
                    <TextBlock Text="{Binding prcby_prc}" VerticalAlignment="Center" HorizontalAlignment="Center" ></TextBlock>
                </StackPanel>
                <StackPanel Width="100">
                    <TextBox Text="{Binding stdordqty, Mode=TwoWay}" VerticalAlignment="Center" TextAlignment="Center"   HorizontalAlignment="Right" ></TextBox>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

我想以这种方式从 c# codebhind 设置我的列表框中的 Name="txtblkUmcode" 的文本，但没有运气：

```
TextBlock txtBlk = new TextBlock();
txtBlk =  lstbxbProducts.FindName("txtblkUmcode") as TextBlock;
txtBlk .Text = "test"; 
```

请让我知道我该怎么做：

1.  在我的列表框的数据模板中设置该文本块的文本？
2.  我只想更改该单个列表框项目的文本块的文本？

我怎样才能做到这一点？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:39:30.017

您必须避免这种编程实践，因为如果视图发生更改——例如，修改后`DataTemplate`的其他控件显示该属性（`Label`、、`TextBox`等）——可能会破坏您的应用程序。

有时没有其他解决方案。

在此处查看答案：http: [//msdn.microsoft.com/en-us/library/bb613579.aspx](http://msdn.microsoft.com/en-us/library/bb613579.aspx)

# c# - 在 EnterWriteLock 之后，锁没有被持有

> ID：12384738
> 
> 赞同：1
> 
> 时间：2012-09-12T09:08:49.223
> 
> 标签：c#, .net, multithreading, synchronization, locking

我有一个 AVL 树数据结构，其中每个节点都有自己的锁。这是因为有更多的作者试图访问一个节点。

```
class Node
{
    public ReaderWriterLockSlim ww;
    // ...
    public Node()
    {
        ww = new ReaderWriterLockSlim(LockRecursionPolicy.SupportsRecursion);
        // ...
    }
}
class AVL_tree
{
    public Node root;
    // ...
    public void Write(int value)
    {
        root = new Node();
        root.ww.EnterWriteLock();
        if (!root.ww.IsWriteLockHeld) throw new Exception("Why?");
        // ...
        root.ww.ExitWriteLock();
    }
} 
```

每个作家都从新线程开始

```
class Program{
    public static AVL_Tree data;
    static void Main()
    {
        data = new AVL_Tree();
        List<Thread> vlakna = new List<Thread>();
        for (int i = 1; i < 10; i++)
            vlakna.Add(new Thread(Write));
        foreach (Thread vlakno in vlakna)
            vlakno.Start();
    }
    public static void Write() // Write some random data into the tree
    {
        Random rnd = new Random(DateTime.Now.Millisecond);
        data.Writer(rnd.Next(1, 999));
    } 
```

Writer看起来不完全一样，节点多，代码多，但问题如下：

锁定节点后，**有时**不会持有锁。我不明白为什么。有人解释一下。

*有时意味着我不知道它什么时候会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:20:47.910

您确定它正在被其他线程访问吗？如果是同一个线程递归地获取锁，它将被授予每个递归级别。

要查看是否是这种情况，请将锁递归策略更改为 NoRecursion 并查看是否出现异常。

[编辑]

这是另一个想法：你有一个竞争条件。

您启动的每个线程都在调用data.Write()，即AVL_tree.Write()。

在 AVL_tree.Write() 中，您分配了一个新的根节点。

让我们检查您的 AVL_tree.Write()：

```
class AVL_tree
{
    public Node root;
    // ...
    public void Write(int value)
    {
        root = new Node();         // [A]
        root.ww.EnterWriteLock();  // [B]
        if (!root.ww.IsWriteLockHeld) throw new Exception("Why?"); // [C]
        // ...
        root.ww.ExitWriteLock();
    }
} 
```

假设线程 1 已经执行到行 [B]，并且即将执行行 [C]。

现在假设线程 2 出现并执行行 [A] 并且即将执行行 [B]。

此时，根字段已被一个新字段覆盖，一个尚未获得其写锁的字段。

现在想象线程 1 继续行 [C]。它查看根（现在是线程 2 更新的根），发现写锁没有被持有，因此抛出异常。

这就是我认为正在发生的事情。

# c# - 如何发送分配列表 到 JavaScript 数组或可枚举对象

> ID：12384746
> 
> 赞同：12
> 
> 时间：2012-09-12T09:09:03.927
> 
> 标签：c#, javascript, asp.net-mvc-3, viewbag

我有以下内容：

```
ViewBag.SomeEnumerable = new List<string>() { "string1", "string2" }; 
```

现在如何在 JavaScript 端分配`ViewBag.SomeEnumerable`给一个`array`或某种形式的可枚举对象？例如：

```
function SomeFunction()
{
  var array = @ViewBag.SomeEnumerable;
  for(var eachItem in array)
  {
    alert(eachItem); // should display "string1" then string2"
  }
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-12T09:13:03.213

```
<script type="text/javascript">
function SomeFunction() {
    var array = @Html.Raw(Json.Encode(ViewBag.SomeEnumerable));
    for(var i = 0; i < array.length; i++) {
        alert(array[i]); // should display "string1" then string2"
    }
}
</script> 
```

将呈现为：

```
<script type="text/javascript">
function SomeFunction() {
    var array = ["string1","string2"];
    for(var i = 0; i < array.length; i++) {
        alert(array[i]); // should display "string1" then string2"
    }
}
</script> 
```

# c# - Asp.net updatepanel 列表框不刷新布局

> ID：12384747
> 
> 赞同：0
> 
> 时间：2012-09-12T09:09:18.247
> 
> 标签：c#, asp.net, ajax, listbox, asp.net-ajax

所以我的问题很简单，我有 2 个列表框和一个按钮。当在 listbox2 中选择一个项目并单击按钮时，我想将所选项目添加到 listbox1。

在我添加第二个项目之前，这一切都可以正常工作。然后 listbox1 不会刷新它的项目...

```
<body>
<form id="form1" runat="server">
    <asp:ScriptManager runat="server"></asp:ScriptManager>
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server">
            <ContentTemplate>
                <asp:ListBox ID="ListBox1" runat="server"></asp:ListBox>
            <asp:ListBox ID="ListBox2" runat="server"></asp:ListBox>
                <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
    </form>
</body>
public partial class Default2 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            ListBox2.Items.Add(new ListItem("1", "1"));
            ListBox2.Items.Add(new ListItem("2", "2"));
            ListBox2.Items.Add(new ListItem("3", "3"));
            ListBox2.Items.Add(new ListItem("4", "4"));
            ListBox2.Items.Add(new ListItem("5", "5"));
        }
    }
    protected void Button1_Click(object sender, EventArgs e)
    {
        if (ListBox2.SelectedIndex != -1)
        {
            ListBox1.Items.Add(ListBox2.SelectedItem);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:12:29.743

您可以添加`UpdateMode=conditional`到您的`UpdatePanel`

并设置`<asp:AsyncPostBackTrigger ControlID="Button1" EventName="Click" />`

```
 <asp:ScriptManager runat="server"></asp:ScriptManager>
    <div>
        <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
            <ContentTemplate>
                <asp:ListBox ID="ListBox1" runat="server"></asp:ListBox>
                <asp:ListBox ID="ListBox2" runat="server"></asp:ListBox>
                <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
            </ContentTemplate>

            <Triggers>
                <asp:AsyncPostBackTrigger ControlID="Button1" EventName="Click" />
            </Triggers>

        </asp:UpdatePanel>
    </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:58:05.200

找到了解决方案:) 问题是 Listbox1 SelectionMode = Single... 所以当返回结果时，错误出现在客户端。解决方案是在将其添加到其他列表之前取消选择该项目。（或使用所选值和文本新建一个）

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if (ListBox2.SelectedIndex != -1)
        {

            ListItem item = ListBox2.SelectedItem;
            item.Selected = false;
            ListBox1.Items.Add(item);

        }
    } 
```

# xcode - G力计算

> ID：12384749
> 
> 赞同：1
> 
> 时间：2012-09-12T09:09:25.580
> 
> 标签：xcode, uiaccelerometer

我已使用此代码获取 G-Force 值。但问题是当我把我的 iPhone 放在桌子上时，它仍然显示 0.99 值。谁能告诉我原因？代码是

```
sx = acceleration.x * kFilteringFactor + sx * (1.0 - kFilteringFactor);
sy = acceleration.y * kFilteringFactor + sy * (1.0 - kFilteringFactor);
sz = acceleration.z * kFilteringFactor + sz * (1.0 - kFilteringFactor);

float aValue = sqrt(sx*sx+sy*sy+sz*sz);

[gLabel setText:[NSString stringWithFormat:@"%.2f",aValue]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T12:40:44.230

至少在 Android 中这是正确的，并且是因为 Gravity。获得 0 的唯一方法是自由落体。如果它在桌子上，那么就会有一个力施加到“不会下落”，该力与重力（1G）的大小相同并且方向相反。

# python - 让模式匹配在旧版本的 python 中工作

> ID：12384751
> 
> 赞同：0
> 
> 时间：2012-09-12T09:09:38.743
> 
> 标签：python, list, jython

考虑下面的代码：

```
searchList=["hello", "hello world", "world"]
pattern = 'hell'
matchingList = [t for t in searchList if re.match(pattern, t)] 
```

上面的代码在 Jython 2.4.3 中运行良好，但在较低版本的 Jython 中失败并出现以下错误：

```
ValueError: iterator indices must be consecutive ints starting at 0 
```

任何解决方法？

通过以下解决方法，我遇到了同样的错误：

```
 for t in searchList:
      if re.match(pattern, t):
          matchingList.append(t) 
```

Jython 2.1 中出现的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:26:28.587

该代码在 cpython 2.3.5、2.2.3、2.1.3 和 2.0 以及 jython 2.2.1、2.2 和 2.1 上运行良好。[列表推导仅在 2.0+ 中可用](http://docs.python.org/dev/whatsnew/2.0.html#list-comprehensions)。相反，您可以编写：

```
# Warning: This code is unnecessarily complex because of cpython 1.x (!) support
import re
searchList=["hello", "hello world", "world"]
pattern = 'hell'
matchingList = []
for t in searchList:
    if re.match(pattern, t):
        matchingList.append(t) 
```

话虽如此，**即使是 2.4 也很古老**，并且在很长一段时间内都不受支持（这意味着您必须从那时起手动应用和调整所有安全补丁才能拥有安全的系统）。您所使用的 Python 版本*已有十多年的*历史，而且几乎可以肯定充满了安全漏洞。考虑弃用 Python 2.5 及更早版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:59:55.683

经过大量调试后，我发现当您第二次尝试迭代同一个列表时会出现问题。并且已在此处报告了此问题：

[http://bugs.jython.org/issue1544224](http://bugs.jython.org/issue1544224)

我使用了上面链接中提到的解决方法，它工作正常。

非常感谢各位

# vim - FuzzyFinder 错误

> ID：12384754
> 
> 赞同：0
> 
> 时间：2012-09-12T09:10:06.150
> 
> 标签：vim

我刚刚安装了[FuzzyFinder](http://www.vim.org/scripts/script.php?script_id=1984)（包括 L9 库），但我似乎无法启动它！应该是`Cmd`+`T`吧？我在[Mac OS X v10.7](http://en.wikipedia.org/wiki/Mac_OS_X_Lion) (Lion) 上。

此外，":help :fuf" 什么也不返回。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:31:22.847

FuzzyFinder 提供各种`:Fuf...`命令，但没有默认映射。

您可以在`.vimrc`文件中定义此类映射，如下所示：

```
:nnoremap <D-t> :FufMruFile<CR> 
```

帮助标签需要生成一次；类型

```
:helptags ~/.vim/doc 
```

# ssrs-2008 - Control + S 将报告部署到报告服务器？

> ID：12384755
> 
> 赞同：0
> 
> 时间：2012-09-12T09:10:09.247
> 
> 标签：ssrs-2008, reportmanager

我经历过这个，我曾尝试保存 rdl，但碰巧它部署了项目中的所有报告而不是保存它。有没有人经历过？如何解决这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:17:15.420

从这里开始：http: [//msdn.microsoft.com/en-us/library/ms173782 (v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms173782(v=sql.105).aspx)

当焦点位于报表设计表面时，Ctrl-S 将保存 RDL - 当我将焦点放在解决方案资源管理器中时，我无法让它做任何事情。

您是否正在运行任何可能捕获热键并发送部署命令的击键管理器？我什至不认为有执行部署的快捷键 - 我想一个框架可能会部署一个可以自动部署的宏。

# c++ - 在 C++ 中使用 Opal API

> ID：12384757
> 
> 赞同：2
> 
> 时间：2012-09-12T09:10:13.173
> 
> 标签：c++, sockets, voip, opalvoip

我正在尝试使用 SIP 和 OPAL 制作一个 VoIP 程序，但我目前坚持使用 opal，因为我根本不知道如何使用它。我已经多次阅读文档，但完全没有运气。目前我认为`OpalConnection:OpalConnection(/*arg*/)`应该做连接工作，我的意思是连接但在另一端我有一个`OpalListener`，

`OpalListener:Open()`但他们并没有像socket.h`OpalListener:Accept()`那样做旧的工作。`accept()`因此，如果有人可以向我解释调用 OPAL API 函数的顺序，将不胜感激。

另一方面，我正在考虑用 reSIProcate 试试运气，但就像在蛋白石中一样，知道基本序列会很好，但没有运气找到任何东西。

# iphone - 用单引号替换双引号以存储在 SQLite 中

> ID：12384758
> 
> 赞同：1
> 
> 时间：2012-09-12T09:10:17.177
> 
> 标签：iphone, objective-c, sqlite, xcode4.3

我想用字符串中的单引号替换所有双引号。我尝试过使用`stringByReplacingOccurrencesOfString`，但它不起作用。如何让它用单引号替换所有双引号，以便我可以将它存储到数据库中？

```
sqlite3_stmt    *statement;

NSString *string = [NSString stringWithString:charDesc.text];
[string stringByReplacingOccurrencesOfString:@"\"" withString:@"''"];

if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK){
    NSString *insertSQL = [NSString stringWithFormat: @"UPDATE CHARACTER SET charName = \"%@\", charDescription = \"%@\" WHERE charID = %i", charName.text, charDesc.text, charID];

    const char *insert_stmt = [insertSQL UTF8String];

    sqlite3_prepare_v2(database, insert_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE){
        status.text = @"Succesfully Updated!";
    }else{
        status.text = @"Failed to Update!";
    }

    sqlite3_finalize(statement);
    sqlite3_close(database); 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:14:59.993

```
string=[string stringByReplacingOccurrencesOfString:@"\"" withString:@"'"]; 
```

# java - SWT / JFace Scrollview不滚动

> ID：12384766
> 
> 赞同：1
> 
> 时间：2012-09-12T09:10:33.877
> 
> 标签：java, swt, scrollview, jface

我有两个带有各自视图的选项卡。tabview 本身在滚动视图中。出于某种原因，较大的选项卡不会出现滚动条。我像这样设置（工作）标签视图：

```
public CustomerTab(Composite arg1, int arg2) throws SQLException {
    super(arg1, arg2);

    layout = new org.eclipse.swt.layout.GridLayout(GridData.FILL_BOTH, false);
    layout.numColumns = 1;
    this.setLayout(layout); 
```

一个不会导致滚动条出现的开始是这样的：

```
public InvoiceTab(Composite parent, int arg2) throws Exception {

    super(parent, arg2);

    // new gridlayout and asign to this tab
    gridLayout = new org.eclipse.swt.layout.GridLayout(GridData.FILL_BOTH, false);
    gridLayout.numColumns = 3;
    this.setLayout(gridLayout); 
```

在我的应用程序中，我配置了 shell：

```
@Override protected void configureShell(Shell shell) {

    super.configureShell(shell);
    shell.setSize(1130, 530);
    setShellStyle(SWT.SHELL_TRIM & (~SWT.RESIZE));
} 
```

并以这种方式创建滚动视图：

```
@Override protected Control createContents (Composite parent) {

    scrolledComp = new ScrolledComposite(parent, SWT.H_SCROLL | SWT.V_SCROLL);
    mainContent = new Composite(scrolledComp, SWT.NONE);
    mainContent.setLayout(new FillLayout());

    mainTabView = null;
    mainTabView = new MainTabView(mainContent);

    scrolledComp.setContent(mainContent);
    scrolledComp.setExpandHorizontal(true);
    scrolledComp.setExpandVertical(true);
    scrolledComp.setMinSize(1100, 500);

    return mainTabView;
} 
```

发生的情况是，滚动视图只显示 500 条，但下面没有内容，也没有滚动条。谁能看到，我做错了什么？

提前谢谢，马库斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:45:52.227

由于您手动将最小高度设置为 500，因此`ScrolledComposite`不知道更好。

您应该使用内容的“真实”大小作为最小大小。您可以使用以下代码：

```
scrolledComp.setContent(mainContent);
scrolledComp.setExpandHorizontal(true);
scrolledComp.setExpandVertical(true);
scrolledComp.setMinSize(mainContent.computeSize(SWT.DEFAULT, SWT.DEFAULT)); 
```

# highstock - Highstock 导航器添加拖尾事件

> ID：12384768
> 
> 赞同：2
> 
> 时间：2012-09-12T09:10:38.033
> 
> 标签：highstock

是否可以在导航器手柄上添加拖尾事件？因为我会从图表中获得实际的导航器选择

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T01:48:32.493

看看官方的[highstock 演示](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/stock/xaxis/events-setextremes/)。您需要在 xAxis 上挂钩 setExtremes 事件，并检查`(event.trigger == 'navigator')`.

希望这可以帮助。

# python - 如何在 Linux 的后台使用 python 捕获鼠标事件和键事件

> ID：12384772
> 
> 赞同：9
> 
> 时间：2012-09-12T09:10:46.553
> 
> 标签：python, linux, background, mouseevent, keyevent

我想制作一个可以在后台运行但在鼠标事件或键事件发生时打印文本的 python 脚本。是否有任何库/内置功能来实现这一点？或者我可以调用任何系统命令来获取此信息？成为root没有问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-12T11:28:38.190

我猜，你可能会为 evdev 使用 python 绑定：[http](http://packages.python.org/evdev/index.html) ://packages.python.org/evdev/index.html 。在教程中，他们给出了一个键盘示例，但鼠标事件应该类似：

```
>>> from evdev import InputDevice, categorize, ecodes
>>> from select import select
>>> dev = InputDevice('/dev/input/event1')

>>> print(dev)
device /dev/input/event1, name "Dell Dell USB Keyboard", phys "usb-0000:00:12.1-2/input0"

>>> while True:
...    r,w,x = select([dev], [], [])
...    for event in dev.read():
...        if event.type == ecodes.EV_KEY:
...            print(categorize(event))
... # hitting a and holding space
key event at 1337016188.396030, 30 (KEY_A), down
key event at 1337016188.492033, 30 (KEY_A), up
key event at 1337016189.772129, 57 (KEY_SPACE), down
key event at 1337016190.275396, 57 (KEY_SPACE), hold
key event at 1337016190.284160, 57 (KEY_SPACE), up 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-12T16:33:17.383

看看[pynput](https://pypi.python.org/pypi/pynput)，例如：

```
from pynput.keyboard import Key, Listener
#defining function to print when key is pressed
def on_press(key):
  print('{0} pressed'.format(
    key))
#defining function to print when key is released
def on_release(key):
  print('{0} release'.format(
    key))
  if key == Key.esc:
    # Stop listener
    return False

# Collect events until released
with Listener(
    on_press=on_press,
    on_release=on_release) as listener:
    listener.join() 
```

# c++ - WinRT - 没有静态构造函数？

> ID：12384775
> 
> 赞同：3
> 
> 时间：2012-09-12T09:11:00.600
> 
> 标签：c++, windows-8, windows-runtime, c++-cx

我目前正在用 C++ 编写一些 WinRT 自定义控件，我的编译器/智能感知告诉我不允许使用静态构造函数。

我需要设置一些静态数据，并且可以使用私有 bool 实例标志，并且在我的类的第一次实例化时，我可以创建静态数据等。（有效地实现相同的目标）。

但是，也许我错过了一些东西，因为这似乎有点啰嗦。

WinRT/c++ 中静态构造的规范替代方法是什么

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:25:24.193

您在类内部声明静态成员，但必须在外部定义它们：

```
// In header file
class Foo
{
    static int bar;
    static int bar2;

    static int init_bar3() { return 123; }
};

// In source file
int Foo::bar;

// Define and intiailize
int Foo::bar2 = 5;

// For more complicated initialization
int Foo::bar3 = Foo::init_bar3(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T10:24:18.287

C++ 不支持静态构造函数。[大多数情况下，您应该使用Joachim Pileborg 的回答](https://stackoverflow.com/a/12385018/59379)中所示的静态初始化。我建议您适应执行静态初始化的惯用 C++ 方式，而不是尝试以 C# 样式编写 C++。

但是，如果你真的需要 C++ 中的 C# 风格的静态构造函数，你可以伪造它们：

```
class Foo {
public:
  Foo() {
    static_constructor();//call must appear in every constructor
  }

  Foo(Bar bar, Baz baz) {
    static_constructor();//call must appear in every constructor
  }

private:    
  static void static_constructor() {
    static bool run = false;
    if( !run ) {
      run = true;
      //your logic goes here
    }
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T18:04:27.590

正如 Joachim Pileborg 在他的回答中演示的那样，全局变量可以有一个动态初始化程序，它可以用作 C++ 和 C++/CX 中的“静态构造函数”的一种形式。请注意，您可以使用 lambda 表达式来保持本地初始化，例如

```
int Foo::bar = [](){ return 123; }(); 
```

但是，如果可能，建议您不要这样做，原因有两个。首先，动态初始化全局变量的顺序仅部分指定。如果您有一个动态初始化程序，它依赖于另一个源文件中定义的其他全局变量，您可能会遇到麻烦。

其次，更重要的是，Windows 运行时组件是一个 DLL，全局变量的动态初始化作为 DLL 初始化的一部分发生，这发生在调用 DLL 的入口点时。正如 MSDN 在 的文档中所指出的[`DllMain`](http://msdn.microsoft.com/en-us/library/ms682583.aspx)，“在 DLL 入口点中可以执行的操作存在严重限制。” 如果您在 Internet 上搜索“DllMain”，您会发现许多资源描述了在 DLL 初始化期间执行任何令人兴奋的事情时可能出现的问题。

值得注意的是，禁止您做任何可能导致加载另一个 DLL 的事情。这意味着，通常，您不能直接或间接使用任何未在 DLL 中定义的 Windows 运行时类型，因为定义它们的 DLL 可能尚未加载。我已经调试了几个挂起，这些挂起是由于在动态初始化期间完成的外来工作导致的死锁。

因此，作为替代方案，将全局变量封装在一个函数中......

```
class Foo {
public:
    static int bar() {
        static int value = [](){ return 123; }();
        return value;
    }
}; 
```

...并使用`Foo::bar()`而不是`Foo::bar`. 块范围的静态变量在第一次进入函数时被初始化一次。请注意，如果您`Foo::bar`从多个线程中使用，您可能需要同步初始化；C++11 要求初始化是线程安全的，但 Visual C++ 尚不（截至 Visual C++ 2012）支持 C++11 的此功能。

# hadoop - 有线网络导致hadoop延迟

> ID：12384776
> 
> 赞同：1
> 
> 时间：2012-09-12T09:11:01.217
> 
> 标签：hadoop

当我连接到有线网络并尝试运行 hadoop 作业（甚至是简单的 ls）时，hadoop 需要大约一分钟或更长时间才能启动作业。如果我从网络断开，hadoop 会立即启动。我应该检查什么来解决这个问题问题？

# java - org.apache.jasper.el.E LContextImpl 不能转换为 org.apache.jasper.runtime.ELContextImpl

> ID：12384779
> 
> 赞同：12
> 
> 时间：2012-09-12T09:11:06.700
> 
> 标签：java, jsp, jetty

我有一个用 java 实现的 web 服务项目，它还包含 jsp 页面。我将它部署在我机器上的 jetty 8.1.5 上，它工作正常。但是，当我在带有 jetty 8.1.3 的 windows server 2003 上部署时，它给出了这个例外：

```
org.apache.jasper.el.ELContextImpl cannot be cast to org.apache.jasper.runtime.ELContextImpl 
```

这是完整的跟踪：

```
java.lang.ClassCastException: org.apache.jasper.el.ELContextImpl cannot be cast to org.apache.jasper.runtime.ELContextImpl
    at org.apache.jasper.runtime.PageContextImpl.evaluateExpression(PageContextImpl.java:1002)
    at org.apache.jsp.home.index_jsp._jspService(org.apache.jsp.home.index_jsp:52)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:111)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:403)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:492)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:378)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:542)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:271)
    at org.eclipse.jetty.server.Dispatcher.forward(Dispatcher.java:98)
    at org.eclipse.jetty.servlet.DefaultServlet.doGet(DefaultServlet.java:557)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:735)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:848)
    at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:598)
    at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:486)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
    at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:499)
    at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:233)
    at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1065)
    at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:413)
    at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:192)
    at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:999)
    at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:250)
    at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:149)
    at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
    at org.eclipse.jetty.server.Server.handle(Server.java:350)
    at org.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:454)
    at org.eclipse.jetty.server.AbstractHttpConnection.headerComplete(AbstractHttpConnection.java:890)
    at org.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.headerComplete(AbstractHttpConnection.java:944)
    at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:630)
    at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:230)
    at org.eclipse.jetty.server.AsyncHttpConnection.handle(AsyncHttpConnection.java:77)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:606)
    at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:46)
    at org.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:603)
    at org.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:538)
    at java.lang.Thread.run(Unknown Source) 
```

知道这个异常是什么以及如何解决它吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-12T16:45:41.123

如果您的 web 应用程序附带特定于 servletcontainer 的 JAR 文件，例如`jasper.jar`,`jetty.jar` `servlet.jar`等，则可能会发生这种情况，`/WEB-INF/lib`原因不明。这又与目标 servlet 容器上的不同版本 JAR 文件冲突。

从您的 web 应用程序的`/WEB-INF/lib`. 它不属于那里。它应该已经由 servletcontainer 本身提供。

### 也可以看看：

*   [如何在我的 Eclipse 项目中导入 javax.servlet API？](https://stackoverflow.com/questions/4076601/how-do-i-import-the-javax-servlet-api-in-my-eclipse-project/4076706#4076706)（这并不能完全回答您的具体问题，但这至少在技术上是相同的核心问题，应该让您更好地理解这个常见的初学者错误）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T13:31:35.813

**如果**您使用的是 maven（我在没有回应的情况下发表了评论），则可以使用“提供的”范围避免冲突的 jar。当您将其部署到生产环境时，不包括 jars。

```
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>jsp-api</artifactId>
    <version>2.0</version>
    <scope>provided</scope>
</dependency>
<dependency>
    <groupId>javax.servlet</groupId>
    <artifactId>servlet-api</artifactId>
    <version>2.5</version>
    <scope>provided</scope>
</dependency> 
```

我不确定码头的罐子，但它可能是一样的。

**如果**您**不**使用 maven，则应将有冲突的 jars（servlet 和 jetty）移动到您的开发容器 lib 文件夹中，并将它们从您的应用程序 WEB-INF/lib 文件夹中删除。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-09-23T13:12:53.223

如果您的 webapp 的文件夹 /WEB-INF/lib 不包含 jasper.jar（请参阅 BalusC 的答案），请检查您的容器中是否正在运行另一个 webapp。然后检查该 webapp 是否在其文件夹 /WEB-INF/lib 中包含 jasper.jar。这发生在我们身上。从这些 webapps（原文如此！）中删除 jasper.jar，问题就可以解决了。显然，webapps 并没有像他们应该的那样相互隔离。当我们从 Tomcat6 切换到 Tomcat7 并且 jasper.jar（版本 6）意外地与我们的一个 webapp 捆绑在一起时，问题就出现了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-08T04:34:18.170

除了提到的答案之外，还要注意一件事。我在同一个 Tomcat 7.0.42 实例下部署了另一场战争，该实例在其 WEB-INF/lib 下有一个 jsp-2.1-6.0.2.jar。这个 jar 有 org.apache.jasper.runtime.ELContextImpl 类。

我的理解是每个 webapp 都有自己的类加载器，一个 webapp 加载的类文件对另一个 webapp 不可见。仍然没有任何工作，我删除了另一个包含该 jsp.jar 的战争并重新启动了我的 tomcat，令我惊讶的是，异常不再出现。不知何故，这个类正在加载并导致问题。

有趣的是，这两个战争都在 Tomcat 6.x 中运行得很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-26T18:39:44.200

对我来说（Jetty 8.1.14），这个确切的错误消息实际上是由同一个 Jetty 容器中的另一个 webapp 引起的。您是否在运行多个 Web 应用程序？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-09T15:11:39.507

我遇到了同样的问题并尝试了所有建议，但没有一个对我有用。我终于发现问题是在使用 Spring Boot 覆盖我的 tomcat 版本后引起的，因为我有

```
<parent>
<groupId>org.springframework.boot</groupId>
<artifactId>spring-boot-starter-parent</artifactId>
<version>1.1.0.M2</version> 
```

删除 Spring Boot 解决了这个问题。[这个](https://stackoverflow.com/a/24126315)答案可以提供使用 Spring Boot + Maven + Tomcat 8 的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-03-27T18:50:19.483

将此行添加到`<context>`：

```
<Loader delegate="true" /> 
```

此问题与应用程序标记中的冲突 jar 有关。这看起来像：

```
<?xml version='1.0' encoding='utf-8'?>
<!-- The contents of this file will be loaded for each web application -->
<Context>

  <!-- Default set of monitored resources -->
  <WatchedResource>WEB-INF/web.xml</WatchedResource>
  <Loader delegate="true" /> <!--this line-->
  <!-- Uncomment this to disable session persistence across Tomcat restarts -->
  <!--
      <Manager pathname="" />
    -->

  <!-- Uncomment this to enable Comet connection tacking (provides events on session expiration as well as webapp lifecycle) -->
  <!--
      <Valve className="org.apache.catalina.valves.CometConnectionManagerValve" />
    -->

</Context> 
```

# wpf-controls - WPF 数据验证和显示错误消息 IDataErrorInfo 和错误模板

> ID：12384781
> 
> 赞同：3
> 
> 时间：2012-09-12T09:11:13.393
> 
> 标签：wpf-controls

如何使用 IDataErrorInfo 和错误模板对错误进行 WPF 数据验证并显示错误消息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-09T11:22:49.783

视图模型：IDataViewModel.cs

```
using GalaSoft.MvvmLight;
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace IDataErrorInfo_InputValidation.ViewModel
{
    class IDataViewModel:ViewModelBase,IDataErrorInfo
    {
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public int  Age { get; set; }

        public string Error
        {
            get { throw new NotImplementedException(); }
        }

        public string this[string columnName]
        {
            get 
            {
                string result = null;
                if (columnName == "FirstName")
                {
                    if (string.IsNullOrEmpty(FirstName))
                        result = "Please Enter Your FirstName";
                }
                if(columnName == "LastName")
                {
                    if (string.IsNullOrEmpty(LastName))
                        result = "Please Enter Your LastName";
                }
                if(columnName == "Age")
                {
                    if(Age <= 0 || Age >= 99)
                    result ="Please Enter Valid Age";
                }

                return result;
            }
        }
    }
} 
```

xaml：IDataView.xaml

```
<Window x:Class="IDataErrorInfo_InputValidation.View.IDataView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="IDataView" Height="300" Width="300">
    <Window.Resources>
        <!-- Error template for changing behaviour -->
        <ControlTemplate x:Key="ErrorTemplate">
            <DockPanel LastChildFill="True">
                <Border BorderBrush="Red" BorderThickness="1">
                    <AdornedElementPlaceholder />
                </Border>
            </DockPanel>
        </ControlTemplate>
        <Style TargetType="TextBox">
            <Style.Triggers>
                <Trigger Property="Validation.HasError" Value="true">
                    <Setter Property="ToolTip" Value="{Binding RelativeSource={x:Static RelativeSource.Self},Path=(Validation.Errors)[0].ErrorContent}"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <Grid HorizontalAlignment="Center">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>            
        </Grid.RowDefinitions>
        <TextBox Text="{Binding FirstName,Mode=TwoWay,ValidatesOnDataErrors=True,NotifyOnValidationError=True,ValidatesOnExceptions=True}" Height="20"  Width="100" Margin="10"/>
        <TextBox Text="{Binding LastName,Mode=TwoWay,ValidatesOnDataErrors=True,NotifyOnValidationError=True,ValidatesOnExceptions=True}" Grid.Row="1" Height="20"  Width="100" Margin="10" />
        <TextBox Grid.Row="2" Text="{Binding Age,Mode=TwoWay,ValidatesOnDataErrors=True,NotifyOnValidationError=True,ValidatesOnExceptions=True}" Height="20" Width="100" Margin="10"/>
        <!--<TextBox Grid.Row="2" Height="20"  Width="100" Margin="10"/>-->
        <TextBox Grid.Row="3" Height="20"  Width="100" Margin="10"/>
    </Grid>
</Window> 
```

IDataViewXaml.cs

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

namespace IDataErrorInfo_InputValidation.View
{
    /// <summary>
    /// Interaction logic for IDataView.xaml
    /// </summary>
    public partial class IDataView : Window
    {
        public IDataView()
        {
            InitializeComponent();
            DataContext = new ViewModel.IDataViewModel();
        }
    }
} 
```

# c++ - c++静态模板成员初始化问题

> ID：12384783
> 
> 赞同：10
> 
> 时间：2012-09-12T09:11:16.757
> 
> 标签：c++, gcc, initialization, static-members, static-initialization

gcc 4.5.1，SuSE Linux i686

假设我们有以下代码：

```
template<typename realT> class B
{
public:
    B() {std::cout << "B()" << std::endl;}
};

template<typename realT> class A
{
public:
    static B<realT> static_var;
};

template<typename realT> B<realT> A<realT>::static_var;
template<> B<float> A<float>::static_var;
template<> B<double> A<double>::static_var;

int main()
{
    A<float> test;
    return 0;
} 
```

在这种情况下，我们在标准输出中不会有任何输出。编译器不会生成代码来初始化 A 类的浮点和双重特化。

但是..如果我们像这样改变初始化：

```
template<> B<float> A<float>::static_var = B<float>();
template<> B<double> A<double>::static_var = B<double>(); 
```

编译器将生成这样的代码，我们将在输出中包含双“B()”。

有人可以帮助我理解这种行为吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-12T09:34:36.293

n3337 14.7.3/13

> **如果声明包含初始化器，则模板的静态数据成员的显式特化是定义；否则，它是一个声明。**[注意：需要默认初始化的模板的静态数据成员的定义必须使用花括号初始化列表：
> 
> ```
> template<> X Q<int>::x; // declaration
> template<> X Q<int>::x (); // error: declares a function
> template<> X Q<int>::x { };// definition 
> ```
> 
> ——尾注]

`braced-init-list`是`C++11`功能，所以`C++03`你只能使用

```
template<> X Q<int>::x = ...; 
```

# google-chrome-extension - 是否可以通过 chrome 扩展访问 iframe 的内容？

> ID：12384784
> 
> 赞同：2
> 
> 时间：2012-09-12T09:11:21.023
> 
> 标签：google-chrome-extension, browser, google-chrome-frame

我想问一下，每当打开包含 iframe 的新窗口时，是否有任何方法或扩展可以预先突出显示 iframe 中的文本？我尝试了很多扩展，但没有一个有效。我需要根据某些关键字过滤掉内容，并且内容在 iframe 内。我可以用 CTRL+F 做到这一点，但每篇文章中有很多关键字，如 10-15。所以这让我的工作变得非常艰难和耗时。我从 chrome 中尝试过的几个扩展是多荧光笔、珍珠、FF，但它们似乎都不起作用。

我也知道这些扩展程序无法访问 iframe 中的内容的原因，即由于跨源策略。

但我还记得大约一年前，我使用名为“自动填充”的 chrome 扩展程序，每当我打开包含 iframe 的新 chrome 窗口时，它可以预先选择表单元素。

那么有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:38:53.767

您可以通过在清单文件的内容脚本部分中将 all_frames 设置为 true 来设置扩展权限，以在[http://developer.chrome.com/extensions/content_scripts.html#registration上将所有框架中的内容脚本作为文档运行。](http://developer.chrome.com/extensions/content_scripts.html#registration)从该页面添加到 Google 的示例中，您的清单文件的一部分可能看起来像

```
{
  "name": "My extension",
  ...
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "css": ["mystyles.css"],
      "js": ["jquery.js", "myscript.js"],
      "all_frames": true
    }
  ],
  ...
} 
```

您需要小心，因为您的内容脚本将为父页面注入页面一次，为页面上的每个 iFrame 注入一个。一旦您的内容脚本被注入页面上的所有框架，您就可以通过查找和突出显示文本来发挥您的魔力。

# jquery - JavascriptMVC bind-unbind 在 Observe 上失败

> ID：12384788
> 
> 赞同：2
> 
> 时间：2012-09-12T09:11:34.350
> 
> 标签：jquery, javascriptmvc

在创建-删除 JavascriptMVC Observe 时遇到了这个奇怪的问题。每隔一段时间，就会在这部分代码中弹出“Uncaught TypeError: Object # has no method 'apply'”。

```
$method = function( name ) {
            return function( eventType, handler ) {
                return $.fn[name].apply($([this]), arguments);

            }
        },
        bind = $method('bind'),
        unbind = $method('unbind'); 
```

更准确地说，它是 'return $.fn[name].apply' 行，问题是当 $method 函数正在创建 'bind' 或 'unbind' 函数时 $.fn.bind 或 $.fn.unbind 不要存在。

更奇怪的是，当我在调试模式下运行并检查这个表达式时，一切都运行得很好。

```
typeof($.fn[name]) != "function" 
```

# objective-c - 自定义 UITableViewCell 中的复选框在行选择时取消选择

> ID：12384792
> 
> 赞同：0
> 
> 时间：2012-09-12T09:11:45.960
> 
> 标签：objective-c, ios, cocoa-touch, ios5, uitableview

我有一个`UITableViewCell`按预期工作的习惯。除了一个（重要的）细节。

我的单元格（从 Nib 加载）包含一个`UIButton`（设置为自定义）。该按钮就像一个复选框。大多数情况下，使用自定义图像选择（=选中）复选框：

```
[self.checkboxButton setImage:[UIImage imageNamed:@"check_off"] forState:UIControlStateNormal];
[self.checkboxButton setImage:[UIImage imageNamed:@"check_on"] forState:UIControlStateSelected]; 
```

**问题是：**
当我选择我的行时，复选框（按钮）会自动取消选择。我一直在查看我的代码以查看它的来源，除了在我的自定义 tableviewcell 代码中之外，不要在任何地方的复选框上设置 selected 属性。

**有趣的部分是：**
当我设置我`tableviewcell.selectionstyle`的`UITableViewCellSelectionStyleNone`一切都按预期工作（没有自定义背景颜色）。当我切换到`UITableViewCellSelectionStyleGray`复选框时自动取消选中。

**更新**
当我覆盖`setSelected:animated:`我的复选框时保持选中状态。

```
- (void) setSelected:(BOOL)selected animated:(BOOL)animated
{
    // checkbox stays checked as expected
    NSLog(@"set select with anim");
    // when calling super setSelected:animated: checkbox gets unchecked
    // [super setSelected:selected animated:animated];
} 
```

有什么我缺少的机制吗？
例如，我是否必须覆盖`setSelected:`, `drawRect`, ...<br> 我已经没有办法解决这个虚幻的错误了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:16:34.597

看来您取消选中`tableView:didSelectRowAtIndexPath:`方法中的复选框。

# c# - 为什么动作方法 DeleteConfirmed 使用模型 id 而不是模型对象作为其参数？

> ID：12384793
> 
> 赞同：1
> 
> 时间：2012-09-12T09:11:53.767
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

我是 ASP.NET MVC 的新手，现在通过阅读 asp.net 中给出的教程从零开始学习。我的问题可能太简单了，但我还没有找到答案。为了快速响应，我在这里问。

## 编辑动作方法：

```
 // GET: /Movie/Edit/5

        public ActionResult Edit(int id = 0)
        {
            Movie movie = db.Movies.Find(id);
            if (movie == null)
            {
                return HttpNotFound();
            }
            return View(movie);
        }

        //
        // POST: /Movie/Edit/5

        [HttpPost]
        public ActionResult Edit(Movie movie)
        {
            if (ModelState.IsValid)
            {
                db.Entry(movie).State = EntityState.Modified;
                db.SaveChanges();
                return RedirectToAction("Index");
            }
            return View(movie);
        } 
```

## 删除操作方法：

```
 //
        // GET: /Movie/Delete/5

        public ActionResult Delete(int id = 0)
        {
            Movie movie = db.Movies.Find(id);
            if (movie == null)
            {
                return HttpNotFound();
            }
            return View(movie);
        }

        //
        // POST: /Movie/Delete/5

        [HttpPost, ActionName("Delete")]
        public ActionResult DeleteConfirmed(int id)
        {
            Movie movie = db.Movies.Find(id);
            db.Movies.Remove(movie);
            db.SaveChanges();
            return RedirectToAction("Index");
        } 
```

让我们比较一下 HTTP POST 的更新和删除。我好奇：

*为什么动作方法 DeleteConfirmed 使用模型 id 而不是模型对象作为其参数？*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T09:16:09.157

> 为什么动作方法 DeleteConfirmed 使用模型 id 而不是模型对象作为其参数？

因为删除实体所需的只是其 id，而要编辑此实体则需要整个对象。另外我猜想调用这个删除操作的视图只是在请求中发送要删除的实体的 id，所以让删除操作获取整个实体是没有意义的，因为它永远不会被绑定。

# c# - .Net 4.0 框架和 4.5 框架的区别？

> ID：12384794
> 
> 赞同：1
> 
> 时间：2012-09-12T09:11:56.810
> 
> 标签：c#, asp.net, .net

我目前正在开发具有 3.5 框架的应用程序。将应用程序迁移到 4.0 还是 4.5 会更好吗？.NET 4.5 中添加了哪些功能/增强功能，但在 4.0 中不可用？

任何可以找到两个版本（4.0 和 4.5）之间差异的链接都会得到重视。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T12:57:53.167

[.NET 4.5中](http://www.microsoft.com/visualstudio/11/en-us/downloads#net-45)***没有***的一件事是[对 Windows XP 的支持](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/2723735-make-net-4-5-work-on-any-os-that-supports-4-0)。

So, if you want your application to support XP, you have to stay on .NET 4.0\. :(

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T09:16:12.153

.Net framework 4.5 已正式发布，因此您可以使用该版本而不是 4.0。我在 .Net 4.5 中注意到的主要内容之一是对空间数据类型的支持。[DbGeography](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeography.aspx)和[DBGeometry](http://msdn.microsoft.com/en-us/library/system.data.spatial.dbgeometry.aspx)及其在新实体框架 5.0 中的支持

您可能想查看：[.NET Framework 4.5 中的新增功能](http://msdn.microsoft.com/en-us/library/ms171868.aspx)

您可能还会看到：

*   .Net 4.5 附带 C# 5.0。您可以在以下位置看到它的功能：[C# 5.0 简介](http://blogs.msdn.com/b/mvpawardprogram/archive/2012/03/26/introduction-of-new-features-in-c-5-0.aspx)
*   [.NET Framework 4.5 包括针对客户端和服务器应用程序的新垃圾收集器增强功能](http://blogs.msdn.com/b/dotnet/archive/2012/07/20/the-net-framework-4-5-includes-new-garbage-collector-enhancements-for-client-and-server-apps.aspx)
*   [.Net 4.5 来自维基百科的版本历史](http://en.wikipedia.org/wiki/.NET_Framework_version_history#.NET_Framework_4.5)
*   [使用 .NET Framework 进行跨平台开发](http://msdn.microsoft.com/en-us/library/gg597391.aspx)
*   [元素](http://msdn.microsoft.com/en-us/library/hh285054.aspx)：（在 64 位平台上，启用*总大小**大于**2 GB的数组）***

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-12T09:16:32.287

1.  服务器进程的后台 GC 模型
2.  C# 中的异步/等待语言功能

[新的框架功能](http://msdn.microsoft.com/en-us/library/ms171868.aspx)

[新的 C# 功能](http://msdn.microsoft.com/en-us/magazine/jj133817.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-12T09:13:51.067

看看这个

[http://msdn.microsoft.com/en-us/library/ms171868.aspx](http://msdn.microsoft.com/en-us/library/ms171868.aspx)

包含实体框架版本 5 对我来说效果很好。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-12T09:16:39.097

**-ASP.NET 4.0**

*   Web.config 文件重构
*   可扩展的输出缓存
*   自动启动 Web 应用程序
*   永久重定向页面
*   收缩会话状态
*   扩大允许 URL 的范围
*   可扩展的请求验证
*   对象缓存和对象缓存可扩展性
*   可扩展的 HTML、URL 和 HTTP 标头编码
*   单个工作进程中单个应用程序的性能监控
*   多目标....等

**和 Asp.net 4.5**

*   还有一长串改进。
    *   异步读写 HTTP 请求和响应
    *   对 HttpRequest 处理的改进
    *   异步刷新响应
    *   支持等待和基于任务的异步模块和处理程序

查看[此](https://stackoverflow.com/questions/10492647/differences-between-net-4-0-and-net-4-5-in-high-level-in-net)帖子以获取更多信息

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-12T09:26:30.790

阅读我们的 Scott Hanselman 博客

[**Visual Studio 2012 和 .NET Framework 4.5 已发布 - 这里有 5 分钟的视频让您快速上手**](http://www.hanselman.com/blog/VisualStudio2012AndNETFramework45IsRELEASEDHeres5MinuteVideosToGetYouUpToSpeedQuick.aspx) 。

# c# - C# Linq to XML - 返回多个子级

> ID：12384801
> 
> 赞同：2
> 
> 时间：2012-09-12T09:12:11.817
> 
> 标签：c#, linq-to-xml

我有这个xml：

```
<?xml version="1.0" encoding="utf-8" ?>
<Interfaces>
  <Interface>
    <Name>Account Lookup</Name>
    <PossibleResponses>
      <Response>Account OK to process</Response>
      <Response>Overridable restriction</Response>
    </PossibleResponses>
  </Interface>
  <Interface>
    <Name>Balance Inquiry</Name>
    <PossibleResponses>
      <Response>Funds available</Response>
      <Response>No funds</Response>
    </PossibleResponses>
  </Interface>
</Interfaces> 
```

我需要检索接口的可能响应：

```
// Object was loaded with XML beforehand    
public class Interfaces : XElement {
    public List<string> GetActionsForInterface(string interfaceName) {
        List<string> actionList = new List<string>();
        var actions = from i in this.Elements("Interface")
                      where i.Element("Name").Value == interfaceName
                      select i.Element("PossibleResponses").Element("Response").Value;

        foreach (var action in actions)
            actionList.Add(action);

        return actionList;
    }
} 
```

结果应该是这样的列表（用于接口“帐户查找”）：
帐户可以处理
可覆盖的限制

但它只返回第一个值 - 'Account OK to process'。这里有什么问题？

编辑：
我改变了我的方法：

```
public List<string> GetActionsForInterface(string interfaceName) {
    List<string> actionList = new List<string>();
    var actions = from i in this.Elements("interface")
                  where i.Element("name").Value == interfaceName
                  select i.Element("possibleresponses").Elements("response").Select(X => X.Value);

    foreach (var action in actions)
        actionList.Add(action);

    return actionList;
} 
```

但现在我在“actionList.Add(action);”行出现 2 个错误：

```
The best overloaded method match for System.Collections.Generic.List<string>.Add(string)' has some invalid arguments 
Argument 1: cannot convert from 'System.Collections.Generic.IEnumerable<char>' to 'string' 
```

我想选择的许多人正在将结果转换成其他东西然后是字符串？

编辑：
要修复最后一个错误：

```
 foreach (var actions in query)
        foreach(string action in actions)
            actionList.Add(action); 
```

显然这里的数组中有一个数组。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:21:42.217

这

```
select i.Element("PossibleResponses").Element("Response") 
```

返回第一个“响应”元素。请改用[元素](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.elements.aspx)。

然后，您需要选择许多来获取值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:24:37.530

```
static List<string> GetActionsForInterface(string interfaceName)
{
  var doc = XDocument.Parse(xml);
  List<string> actionList = new List<string>();
  var actions = doc.Root
    .Elements("Interface")
    .Where(x => x.Element("Name").Value == interfaceName).
    Descendants("Response").Select(x => x.Value);

  foreach (var action in actions)
    actionList.Add(action);

  return actionList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:29:34.330

```
doc.Root.Elements("Interface").Select(e=>new {
 Name = e.Element("Name").Value,
 PossibleResponses = e.Element("PossibleResponses").Elements("Response").select(e2=>e2.Value)
}); 
```

# ms-access - 如何通过 DAO 增加 MDB 字段的大小？

> ID：12384803
> 
> 赞同：1
> 
> 时间：2012-09-12T09:12:14.103
> 
> 标签：ms-access, size, dao, ms-access-97

如何使用 增加`MDB`字段大小的大小`DAO`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:25:55.817

使用 DDL 可以更轻松地做到这一点：

```
Set db = CurrentDb

sSQL = "ALTER TABLE table1 ALTER Column atext text(150)"
db.Execute sSQL, dbFailOnError 
```

显然，这在 MS Access 97 中不可用，但在此后 15 年的任何版本中，我建议 DDL 是最简单的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:23:12.367

来自[http://www.freevbcode.com/ShowCode.asp?ID=4599](http://www.freevbcode.com/ShowCode.asp?ID=4599)：

```
Public Sub change_field_size(DBPath as string, _
  tblName As String, fldName As String, fldSize As Integer)
    ' this routine changes the field size

    Dim db As Database
    Dim td As TableDef
    Dim fld As field

    On Error GoTo errhandler

    Set db = OpenDatabase(DBPath)
    Set td = db.TableDefs(tblName)

    If td.Fields(fldName).Type <> dbText Then
        ' wrong field type
        db.Close
        Exit Sub
    End If

    If td.Fields(fldName).size = fldSize Then
        ' the field width is correct
        db.Close
        Exit Sub
    End If

    ' create a temp feild
    td.Fields.Append td.CreateField("temp", dbText, fldSize)
    td.Fields("temp").AllowZeroLength = True
    td.Fields("temp").DefaultValue = """"""

    ' copy the info into the temp field
    db.Execute "Update " & tblName & " set temp = " & fldName & " "

    ' delete the field
    td.Fields.Delete fldName

    ' rename the field
    td.Fields("temp").Name = fldName
    db.Close

'======================================================================
Exit Sub

errhandler:
MsgBox CStr(Err.Number) & vbCrLf & Err.Description & vbCrLf & "Change Field Size Routine", vbCritical, App.Title

End Sub 
```

# c# - 使用 ID 修改节点值 C#

> ID：12384804
> 
> 赞同：2
> 
> 时间：2012-09-12T09:12:17.897
> 
> 标签：c#, xml, silverlight, linq-to-xml, xelement

这是我的 XML：

```
 <?xml version="1.0" encoding="utf-8" ?>
   <Selection>
    <ID>1</ID>
    <Nom>Name 1</Nom>
    <DateReference>0</DateReference>
    <PrefixeMedia>Department</PrefixeMedia>
    <FormatExport>1630</FormatExport>
    <TraceAuto>Oui</TraceAuto>
    <SubID></SubID>
  </Selection>
  <Selection>
    <ID>2</ID>
    <Nom>Name 1</Nom>
    <DateReference>0</DateReference>
    <PrefixeMedia>Department</PrefixeMedia>
    <FormatExport>1630</FormatExport>
    <TraceAuto>1</TraceAuto>
    <SubID>1</SubID>
  </Selection> 
```

我的问题是我想修改例如其中的节点内容`<Nom>Name 1</Nom>`（`<Selection></Selection>`按`<ID>1</ID>`ID 搜索）

我正在使用 XElement 和 XDocument 进行简单的搜索，但我需要一些帮助来解决上述问题。（SilverLight 上的开发

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T20:19:08.710

另一种方法是使用`XmlDocument`：

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load(@"\path\to\file.xml");

// Select the <nom> node under the <Selection> node which has <ID> of '1'
XmlNode name = xmlDoc.SelectSingleNode("/Selection[ID='1']/Nom");

// Modify the value of the node
name.InnerText = "New Name 1";

// Save the XML document 
xmlDoc.Save(@"\path\to\file.xml"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:37:50.007

如果您不知道如何获取`<Nom>`要更新的正确节点，诀窍是首先选择一个*包含*正确节点的`<Selection>`节点，*然后*您可以获得该节点。*`<ID>`*`<Nom>`**

 **就像是：

```
XElement tree = <your XML>;
XElement selection = tree.Descendants("Selection")
      .Where(n => n.Descendants("ID").First().Value == "1") // search for <ID>1</ID>
      .FirstOrDefault();
if (selection != null)
{
  XElement nom = selection.Descendants("Nom").First();
  nom.Value = "Name one";
} 
```

注 1：通过使用`Descendants("ID").First()`，我希望每个选择节点都包含一个 ID 节点。
注 2：每个 Selection 节点都包含一个 Nom 节点
注 3：现在您仍然必须存储整个 XML，如果您需要的话。**

# sql - 给出正确的 Sql 查询

> ID：12384807
> 
> 赞同：2
> 
> 时间：2012-09-12T09:12:26.210
> 
> 标签：sql, oracle10g, db2

我有两个疑问，

```
SELECT col1,col2,col3
  from scnd1
 where col2<>'' 
 group by col1,col2,col3 
 order by col1

SELECT ROWNUMBER() OVER (PARTITION BY COL1) AS RN FROM SCND1)AS A
 WHERE RN > 1 
```

对于同一张表，我需要单个查询来组合这两个，即。第一个我想对表进行排序以及删除`NULL`然后通过第二个查询删除重复的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:17:29.427

按照以下方式尝试子查询：

```
SELECT 
    main.col1, 
    main.col2,
    main.col3 
FROM scnd1 main
JOIN (SELECT 
         col1,
         col2,
         col3, 
         ROW_NUMBER() OVER (PARTITION BY(col1) ORDER BY col1) AS RN
      FROM SCND1
      WHERE col2<>''
) sub
ON sub.Col1 = main.Col1 AND sub.Col2 = main.col2 AND sub.Col3 = main.col3
WHERE RN > 1
GROUP BY main.col1,main.col2,main.col3 
ORDER BY main.col1 
```

# visual-studio-2012 - 在 Visual Studio 2012 中导航到文件时关闭访问行为

> ID：12384808
> 
> 赞同：4
> 
> 时间：2012-09-12T09:12:26.700
> 
> 标签：visual-studio-2012

当我转到另一个文件时，在代码中的类型名称上使用 F12，它将在右侧的读取选项卡中打开该文件。如果我进一步导航，新文件将替换以前的文件。

在 Visual Studio 2010 中，它会为我访问的每个文件打开一个新选项卡。我试图适应新的行为，但我无法忍受。

如何关闭此功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T16:08:56.993

Visual Studio 2012 在工具 > 选项 > 环境下有一个新的**选项卡和 Windows**设置页面，用于控制这种行为：

![工具 - 选项 - 选项卡和窗口](../Images/c9c53160be8f0c94e295c343c928ab65.png)

您可能想要禁用**允许在预览选项卡部分的预览选项卡中打开**新**文件**。

# netty - 什么时候关闭频道？

> ID：12384811
> 
> 赞同：0
> 
> 时间：2012-09-12T09:12:33.190
> 
> 标签：netty

在 netty 3.5.x 演示中，通道在调用 channel.write(response) 后关闭，通过显式关闭或添加“ChannelFutureListener.CLOSE”。我的问题是，我们是否应该在每次写完之后关闭每个频道？即使我们使用的是保活连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:22:48.863

如果您想“断开连接”，请仅关闭频道。

# django - 表单中的 Django userena mugshot 小部件

> ID：12384816
> 
> 赞同：1
> 
> 时间：2012-09-12T09:13:18.760
> 
> 标签：django, forms

我想将 django userena 中的面部照片添加到初始注册表中，以及用户名、密码和电子邮件地址。我按照常见问题解答中所说的做了（[http://docs.django-userena.org/en/latest/faq.html#how-do-i-add-extra-fields-to-forms](http://docs.django-userena.org/en/latest/faq.html#how-do-i-add-extra-fields-to-forms)）所以现在我有自己的了继承 userena 注册表单的表单。我还重新定义了保存方法以将新的面部照片保存在用户的个人资料中。但现在我不知道如何使该字段出现在表单中。我找不到任何示例，因为 userena 使用了自动呈现它的模型表单。以同样的方式，我可以在此表单中添加一个文本字段作为 forms.CharField 我想知道我应该使用什么来呈现面部照片？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:58:42.820

看起来这很容易，只需按照 userena FAQ 中描述的步骤向表单添加一些额外的字段，然后在新的 forms.py 中添加一些内容：

```
from django import forms    
from userena.forms import SignupForm

class SignupFormExtra(SignupForm):
    avatar = forms.ImageField()

    def save(self):
        new_user = super(SignupFormExtra, self).save()

        profile = new_user.get_profile()
        profile.mugshot = self.cleaned_data['avatar']
        profile.save()

        return new_user 
```

# c - C 编译器中的常量折叠有多有效？

> ID：12384820
> 
> 赞同：2
> 
> 时间：2012-09-12T09:13:30.873
> 
> 标签：c, compilation, constantfolding

我的问题可能太简单了，但我还没有找到答案，抱歉。

如果我有这样的代码：

```
...
#define N 6
...
float a, b;
...
a = 2.0 * 3 * N * b;
... 
```

那么，编译之后，这段代码会变成这样吗？

```
...
a = 36.0 * b;
... 
```

换句话说，常量部分会在编译时计算，对吧？

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:15:56.260

最有可能，但不能保证。

您可以尝试查看程序的反汇编（在调试器中，或在反汇编器中，或使用编译器开关（如果可用）从 C 代码生成汇编代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:38:23.860

这是示例代码，

```
#include <stdio.h>

#define val 10

int main()
{

int b = 100;
int k = (5 * val) + b;
//int k = (5 * 25) + b; 

return 0;
} 
```

val 在预处理过程中被替换为 10，

`cpp ss.c`给我

```
int main()
{    
         int b = 100;
         int k = (5 * 10) + b;    
         return 0;
} 
```

如果我们看一下汇编（gcc -S ss.c），

```
 .file   "ss.c"
        .text
        .globl  main
        .type   main, @function
main:
.LFB0:
        .cfi_startproc
        pushq   %rbp
        .cfi_def_cfa_offset 16
        .cfi_offset 6, -16
        movq    %rsp, %rbp
        .cfi_def_cfa_register 6
        movl    $100, -8(%rbp)
        movl    -8(%rbp), %eax
        addl    $50, %eax            //5 * 10 calculated !!!
        movl    %eax, -4(%rbp)
        movl    $0, %eax
        popq    %rbp
        .cfi_def_cfa 7, 8
        ret
        .cfi_endproc
.LFE0:
        .size   main, .-main
        .ident  "GCC: (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3"
        .section        .note.GNU-stack,"",@progbits 
```

所以常量是在编译时在 gcc 中计算的。

# php - 密码哈希在开发和实时服务器中有所不同

> ID：12384822
> 
> 赞同：3
> 
> 时间：2012-09-12T09:13:34.307
> 
> 标签：php

我刚刚安装了 xampp，所以我可以离线测试我的网站。现在我得到了许多未定义的索引或未定义的变量错误，我知道如何修复。现在登录可以在线工作，但使用 xampp 无法正常工作。代码没有错。我将数据库在线导入到离线。我已经指出了问题所在，但不知道如何解决。

这是我测试登录详细信息是否正确的代码。

```
$Blowfish_Pre = '$2a$05$';
$Blowfish_End = '$';
$hashed_password = crypt($password, $Blowfish_Pre . $salt . $Blowfish_End);

//check to see if they match
if ($username==$dbusername&&$hashed_password==$dbpassword){ 
```

离线`$hashed_password`账户的回显是`$2a$05$CEDaiUETMOTuZ1tzSX1dW.1rmbYfiu1Hf6jnZyJ5DouQOIHEPwXiW`

在线`$hashed_password`帐户的回显是

```
$2J7rPSsTYb1Q 
```

我已经确定 crypt 的在线工作方式与离线工作方式不同？为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:27:58.057

`crypt()`根据系统提供的内容使用不同的哈希算法。从 PHP 5.3 开始，它“包含自己的实现，如果系统缺乏对一种或多种算法的支持，它将使用它”。

正如您在开始时看到的那样，您的离线版本确实使用了河豚`$2a$`。您的在线版本确实使用了一些后备。

见： http: [//php.net/manual/en/function.crypt.php](http://php.net/manual/en/function.crypt.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T01:17:23.650

我无法发表评论..所以我把这个答案放在希望我可以节省一些人的时间。我问了同样的问题，而选择的答案使我找到了解决方案。但由于它没有提供我的最终解决方案，我想我会分享以节省时间。

我的 wamserver 是 PHP 5.38 我发现我的生产服务器是 5.2x 我只是要求他们将我升级到最新版本，即 5.4.22 ......这就解决了这个问题。相同的代码再次开始踢出 60 个字符的哈希值。

所以我敢打赌，如果你有同样的情况，请将服务器升级到最新版本的 PHP 或超过 5.3 的版本，你应该会很好。

# java - ANDROID_ID 有问题

> ID：12384824
> 
> 赞同：3
> 
> 时间：2012-09-12T09:13:46.573
> 
> 标签：java, android, uuid, android-2.3-gingerbread

我试图让 ANDROID_ID 在我的 appn 中工作，但在我的模拟器和硬件上都出现了奇怪的行为。

我的应用程序的摘录。

```
import android.provider.Settings.Secure;

public class RssActivity extends ListActivity {

final String android_id = Secure.getString(getContentResolver(),Secure.ANDROID_ID); 

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.d("UUID", android_id); 
```

现在在我的模拟器中应用程序打开但似乎冻结并且什么都不做，我什至没有收到我的“UUID”调试消息。

在我的手机上，我只是得到一个`"the application has stopped unexpectedly" OS 2.3.3`

任何想法，我执行这个错误吗？

如果我删除`"final String android_id = Secure.getString(getContentResolver(),Secure.ANDROID_ID);"`，那么该应用程序在模拟器和硬件上都可以正常工作 - 所以问题必须出在此处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-12T09:20:03.253

仅在之前声明变量`onCreate`，然后在`onCreate`. 然后您的空指针异常将得到解决。

发生这种情况是因为**getContentResolver()**需要完全启动 Context(Activity)。

```
String android_id; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tst);
    android_id = Secure.getString(getContentResolver(),Secure.ANDROID_ID);
    Log.d("UUID", android_id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:31:06.887

尝试这个：

`Secure.getString(getApplicationContext().getContentResolver(), Secure.ANDROID_ID);`

# matlab - MATLAB：如何创建名称由字符串定义的结构体字段。

> ID：12384826
> 
> 赞同：0
> 
> 时间：2012-09-12T09:13:54.197
> 
> 标签：matlab, structure

我有一个这样的构造函数：

```
function p = class_name(folder, file_name)

    xmlfile = fullfile(folder, file_name);
    xDoc = xmlread(xmlfile);

        struct = xml2struct(xDoc);

        %lots of repetitive code

end 
```

它读取 XML 文件并将其转换为结构。然后使用一些重复的代码将结构元素分配给类的属性/字段，如下所示：

```
if(isfield(struct.parameters, 'parameter_name'))
    p.property_name = struct.parameters.parameter_name.Text;
else
    p.property_name = '';
end 
```

我想把它放到一个方法/函数中，给定结构元素的名称（这里是'parameter_name'）和类字段/属性的名称（这里是'property_name'）将前者分配给后者。

是否可以为此编写通用函数/方法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T09:35:57.787

您可以使用动态字段名称来实现这样的功能。这是针对此类情况的[推荐](http://blogs.mathworks.com/loren/2005/12/13/use-dynamic-field-references/)实现：

```
function p = setparam(s, p, param_name, prop_name)
    if(isfield(s.parameters, param_name))
       param = s.parameters.(param_name);
       p.(prop_name) = param.Text;
    else
       p.(prop_name) = '';
    end
end 
```

您还可以在旧版本的 MATLAB 上使用 setfield 和 getfield：

```
function p = setparam(s, p, param_name, prop_name)
    if(isfield(s.parameters, param_name))
        param = getfield(s.parameters, param_name);
        p = setfield(p, prop_name, getfield(param, 'Text'));
    else
        p = setfield(p, prop_name, '');
    end
end 
```

不要在代码中使用 struct 作为结构名称 - 它是保留关键字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:50:46.510

使用动态字段名称：

```
yourStruct.parameters.('parameter_name') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T18:30:15.273

这是一个通用函数：可用于结构或类对象

```
function obj_to = set_props(obj_to, obj_from)
% insert properties from obj_from into obj_to. 
props_from = fieldnames(obj_from);
props_to = fieldnames(obj_to);
for k = 1 : length(props_to)
    if ismember(props_to{k}, props_from)
        obj_to.(props_to{k}) = obj_from.(props_to{k});
    else
        obj_to.(props_to{k}) = '';
    end
end 
```

现在，在构造函数中：

```
function obj = class_name(folder, file_name)
    xmlfile = fullfile(folder, file_name);
    xDoc = xmlread(xmlfile);
    s = xml2struct(xDoc); % do not use word "struct" for variables
    set_props(obj, s);    % if obj has handle, no need to return it from set_props()
end 
```

# android - Android 蓝牙：软件导致连接中止

> ID：12384833
> 
> 赞同：2
> 
> 时间：2012-09-12T09:14:46.487
> 
> 标签：android, bluetooth

每当我尝试将 android 设备连接到启用蓝牙的设备时，我都会遇到异常，它正在连接，并且在一分钟内它就会出现异常。要使用 BLuettoth 设备（Spp 配置文件）进行连接，我正在使用

```
Method m;
m = mmDevice.getClass().getMethod("createRfcommSocket",
new Class[] { int.class });

tmp = (BluetoothSocket) m.invoke(mmDevice, 1); 
```

使用此代码，我可以连接到设备。但是在这一行 bytes = mmInStream.read(buffer) 处，我在几分钟内就遇到了异常。我可以用

```
if(mmInStream.available() > 0) {
bytes = mmInStream.read(buffer);
} 
```

但是如果我把条件放在这里，它无法理解设备是否仍然与其他设备连接。因为不会发生异常。我找不到解决方案并尝试了 2 天。但我找不到解决方案。

你能帮我么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:35:17.977

我在蓝牙广播后启动的服务器遇到了同样的问题。解决方案是在服务器通过 BluetoothServerSocket.accept() 建立连接后发送一个字节。客户端在 BluetoothSocket.connect() 之后读取一个字节。所以两端是同步的。

# c - 简化C中的嵌套for循环

> ID：12384834
> 
> 赞同：1
> 
> 时间：2012-09-12T09:14:52.333
> 
> 标签：c, recursion, for-loop, nested-loops

我正在寻找一个3 到 9 位数字的[自恋号码](http://en.wikipedia.org/wiki/Narcissistic_number)。我有工作代码，但使用嵌套循环很麻烦。我想我可以使用递归，如何？

```
#include "stdafx.h"
#include <time.h>

int power(int a,int b)
{
    int t=1,i;
    for (i=0;i<b;i++)
        t*=a;
    return t;
}

int _tmain(int argc, _TCHAR* argv[])
{
    double t0=clock();
    int a,b,c,d,e,f,g,h,i;
    int len=9;
    for (a=1;a<=9;a++)
        for (b=0;b<=9;b++)
            for (c=0;c<=9;c++)
                for (d=0;d<=9;d++)
                    for (e=0;e<=9;e++)
                        for (f=0;f<=9;f++)
                            for (g=0;g<=9;g++)
                                for (h=0;h<=9;h++)
                                    for(i=0;i<=9;i++)
                                {
                                    int num=10*(10*(1000000*a+100000*b+10000*c+1000*d+100*e+10*f+g)+h)+i;
                                    if (num==power(a,len)+power(b,len)+power(c,len)+power(d,len)+power(e,len)+power(f,len)+power(g,len)+power(h,len)+power(i,len))
                                        printf(" %d ",num);
                                }
                                printf("\n耗时： %f s",(clock()-t0)/CLOCKS_PER_SEC);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:27:58.433

您`num`只是简单地遍历从`0`(See `Edit 2`) 到 的所有数字`999,999,999`。所以你真的不需要迭代每个数字。一种做你想做的事情的简单方法，即使可能不再有效是这样的：

```
unsigned int num;
for (num = 0; num < 1000000000; ++num)      // will take long
{
    char digits[15];
    unsigned int i, other_num;
    sprintf(digits, "%09u", i);             // division used here
    other_num = 0;
    for (j = 0; j < 9; ++j)
        other_num += power(digits[j] - '0', len);
    if (num == other_num)
        printf(" %d ",num);
} 
```

请注意，您可以`power`以更有效的方式完成您的功能。看到[这个问题](https://stackoverflow.com/q/101439/912144)。

* * *

**编辑1：（**注：见`Edit 2`）

我正在阅读维基百科页面，事实证明你**不应该**设置`len`为 9，因为如果你有例如`153`，`other_num`应该是`1^3 + 5^3 + 3^3`（来自维基百科的例子）。

所以你应该通过以下方式调整循环：

```
unsigned int num;
for (num = 0; num < 1000000000; ++num)
{
    char digits[15];
    unsigned int i, other_num, len;
    len = snprintf(digits, 10, "%u", i);    // len returned by snprintf
    other_num = 0;
    for (j = 0; j < len; ++j)               // changed 9 to len
        other_num += power(digits[j] - '0', len);
    if (num == other_num)
        printf(" %d ",num);
} 
```

* * *

**编辑2：**

我刚注意到你的号码是从 开始的`100,000,000`，所以你真的不需要关注`Edit 1`。不过，我相信如果您需要更改数字的范围，了解它是件好事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:32:11.427

美妙的循环。那这个呢：

```
for( num = 100000000; num <= 999999999; num++ ) {
    int compare = 0;
    for( k = 0; k < 10; k++ ) {
        int position = pow(10, k+1);
        int s = num%position;
        compare += pow(s, 9);
    }
    if( num == compare ) {
        printf("%d\n", num);
    }
} 
```

当然，检查边界:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:30:06.543

实际上，如果我没记错的话，您正在检查`num`从 1 到 的所有值 ( ) 。`10^len`因此，从 1 到 的简单`for`循环`10^len`就足够了。然后您可以从中获取数字`num`并计算功率值。

我强烈建议先计算幂 1^len, 2^len ... 9^len 并将它们放入一个数组中。它将大大提高性能。

# asp.net - 错误：从 Paypal 沙盒 IPN 重定向到 localhost

> ID：12384836
> 
> 赞同：0
> 
> 时间：2012-09-12T09:14:57.677
> 
> 标签：asp.net, visual-studio, paypal, localhost, paypal-ipn

我已经`Paypal`通过我的页面按钮实现了一个结构，它直接到`paypal`沙箱，正在执行付款。

```
form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
    <input type="hidden" name="cmd" value="_xclick" />
    <input type="hidden" name="business" value="abhish_1347270213_biz@gmail.com" />
    <input type="hidden" name="item_name" value="Red Jacket" />
    <input type="hidden" name="item_number" value="7601" />
    <input type="hidden" name="amount" value="125.00" />
    <input type="hidden" name="no_shipping" value="2" />
    <input type="hidden" name="no_note" value="1" />
    <input type="hidden" name="currency_code" value="USD" />
    <input type="hidden" name="bn" value="PP-BuyNowBF" />
    <input type="image" src="https://www.paypal.com/en_US/i/btn/x-click-but23.gif" border="0"
        name="submit" alt="Make payments with PayPal - it's fast, free and secure!" />
    <img alt="" border="0" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1"
        height="1" />

        <input type="hidden" name="return" value="localhost:53237/WebSite17/Default.aspx" />

     <div></div>

    </form> 
```

现在，当我尝试重定向到 a`localhost`时，它显示错误。我需要问是否可以`localhost`从 a重定向到 a `paypal`，如果可以的话，我将如何实现这一点。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T12:10:21.697

在本地主机前尝试 http://

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T12:10:30.290

代替

```
<input type="hidden" name="return" value="localhost:53237/WebSite17/Default.aspx" /> 
```

地方

```
 <input type="hidden" name="return" value="http://localhost:53237/WebSite17/Default.aspx" /> 
```

和用于 IPN 通知的地方

```
 <input type="hidden" name="notify_url" value="http://localhost:53237/WebSite17/Default.aspx" /> 
```

它将使用`Varified`交易的返回值重定向到站点。

# python - 在没有 freetype 的 PIL 中使用字体

> ID：12384838
> 
> 赞同：3
> 
> 时间：2012-09-12T09:15:04.187
> 
> 标签：python, python-imaging-library, font-size, freetype, truetype

嗨，我正在使用没有 lib-freetype 的 PIL（Python 图像库）。

是否有可能在不安装 freetype 的情况下使用字体（我只需要调整文本大小，而不是更多！）？

或者是否有可能设置字体的大小，而不设置字体的truetype，所以使用默认的truetype？

它适用于服务器上的一个项目，我可以在其中安装纯 PIL，而无需任何支持 truetypes 的扩展！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T12:38:23.430

如果您阅读该[模块的](http://effbot.org/imagingbook/imagefont.htm)[手册，`ImageFont`](http://effbot.org/imagingbook/imagefont.htm)您会看到 Python Imaging Library 支持位图字体的**PILFont**格式。

因此，在您自己的计算机上，以您想要的大小渲染您的 TrueType 字体，将位图保存为 PILFont 格式，然后在服务器上使用 PILFont。您可以使用[`otf2bdf`](http://www.math.nmsu.edu/~mleisher/Software/otf2bdf/)将 TrueType 字体转换为 BDF（[位图分布格式](http://en.wikipedia.org/wiki/Glyph_Bitmap_Distribution_Format)），然后使用[PIL 的`pilfont`实用程序](http://effbot.org/imagingbook/pilfont.htm)将 BDF 转换为 PILFont。请参阅[此问题及其答案](https://stackoverflow.com/q/619618/68063)。

# android - Android SDK Manager 不加载 Extras

> ID：12384839
> 
> 赞同：2
> 
> 时间：2012-09-12T09:15:10.643
> 
> 标签：android, android-sdk-tools

我正在尝试在 SDK 管理器中加载 Extras，但它不起作用。这是我的屏幕： http: [//imgupload.sk/viewer.php](http://imgupload.sk/viewer.php?file=ncizvice2hov4ybpiiy3.png) ?file=ncizvice2hov4ybpiiy3.png 我该 如何工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:17:22.833

尝试清除缓存（工具 > 选项 > 清除缓存），然后重新加载（包 > 重新加载）。

# javascript - 敲除映射不起作用

> ID：12384840
> 
> 赞同：0
> 
> 时间：2012-09-12T09:15:14.373
> 
> 标签：javascript, knockout.js

我在使用 Knockout Mapping 时遇到问题。

我有一个 FormBuilderViewModel，包含一堆功能，包括加载和保存数据。第一行（self = this 之后）如下：

`this.form = ko.mapping.fromJS({blueprint_identifier: undefined, name: undefined, description: undefined, pages : []})`

我用 3 个元变量和 1 个数组初始化“this.form”。

然后，我加载数据（也在 FormBuilderViewModel 中）：

`ko.mapping.fromJSON(allData, {}, self.form);`

该变量`allData`来自 AJAX 请求，并且包含以下内容： `{"blueprint_identifier":1347437911,"name":"test","description":"test","pages":[]}`

问题是：加载的 JSON 从未出现在我的页面上。`console.log(this.form)`加载数据后的输出为空。这是整个脚本（除了函数等）：

```
var FormBuilderViewModel = function(data){
    var self = this;

    this.form = ko.mapping.fromJS({
                   blueprint_identifier: undefined, 
                   name: undefined, 
                   description: undefined, 
                   pages : []
                })

    $.getJSON("x", function(allData) {
        if(){
            console.log("I'm here");
            ko.mapping.fromJSON(allData, {}, self.form);
        }else{
            // not relevant
        }
    });
    console.log(self.form); 
}; 
```

输出是“我在这里”（所以我们到达加载点），然后是空的“表单”对象。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:02:26.440

`$.getJSON`功能有效`async`，因此当您调用`console.log(self.form)`映射时未完成。要在控制台输出中查看您的对象，请将日志操作移动到成功函数中：

```
$.getJSON("x", function(allData) {
    if(){
        console.log("I'm here");
        ko.mapping.fromJSON(allData, {}, self.form);
        console.log(self.form);
    }else{
        // not relevant
    }
}); 
```

尝试使用`ko.mapping.fromJS`而不是`ko.mapping.fromJSON`因为`allData`不是`fromJSON`预期的字符串：

```
$.getJSON("x", function(allData) {
    if(){
        console.log("I'm here");
        ko.mapping.fromJS(allData, {}, self.form);
        console.log(self.form);
    }else{
        // not relevant
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T10:21:35.060

这是一个功能齐全的小提琴，可以满足您的需求：

[http://jsfiddle.net/jearles/Cm4xS/](http://jsfiddle.net/jearles/Cm4xS/)

我用一个空的 observable 初始化表单，然后在 AJAX 调用返回时加载它。通过使用`with`绑定，在加载之前我不会尝试显示表单。

# .net - 实体框架缓存与 Context.Items

> ID：12384845
> 
> 赞同：1
> 
> 时间：2012-09-12T09:15:27.417
> 
> 标签：.net, entity-framework

我最近开始使用 EF4.3。

我为每个请求获取了一些数据——页面配置数据就是一个例子。我从数据库中获取这些数据。

直到最近我一直在存储它，`Context.items`因为它允许我在整个请求中保留这些数据。

我的问题是，现在我正在使用 EF 进行跟踪（我在每个请求的基础上使用它），理论上页面配置应该在第一次获取时被缓存，所以对它的任何后续调用应该更便宜虽然可能无法与`context.items`.

是这种情况还是我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:44:06.963

如果您使用 查询数据，`ObjectSet/DbSet`即使您之前查询过相同的数据，它也会始终访问数据库。您必须使用不同的查询技术从缓存项中获取数据。

如果您使用`DbContext/DbSet`API，则可以使用查询缓存。

```
var items = dbContext.Products.Local.Where(/**/); 
```

如果是`ObjectContext`

```
var items = objectContext.ObjectStateManager
        .GetObjectStateEntries(EntityState.Unchanged | EntityState.Added | EntityState.Modified)
        .Where(e => e.Entity is Product)....; 
```

# php - Plupload 不上传文件

> ID：12384846
> 
> 赞同：3
> 
> 时间：2012-09-12T09:15:27.820
> 
> 标签：php, jquery, file-upload, plupload

[我对 Jquery 库 Plupload http://www.plupload.com](http://www.plupload.com)有一个奇怪的问题。我已将它添加到我的网站，它“似乎”正在工作，但实际上并非如此。当您选择一个文件时，它看起来像是正在上传，甚至在完成时说已完成，但文件从未出现在我的服务器上，也没有报告错误。

上传者可以看到'工作'......或者不在此处，当文件正确上传时，刷新页面应该使它们在该页面上显示为缩略图>> [http://www.towerroadacademy.co.uk/index .php/幻灯片编辑器](http://www.towerroadacademy.co.uk/index.php/slideshow-editor)

我在 index.php 头中使用的 Jquery 如下 >>

```
<!-- Load Queue widget CSS and jQuery -->
<style type="text/css">@import url(/plupload/js/jquery.plupload.queue/css/jquery.plupload.queue.css);</style>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>

<!-- Third party script for BrowserPlus runtime (Google Gears included in Gears runtime now) -->
<script type="text/javascript" src="http://bp.yahooapis.com/2.4.21/browserplus-min.js"></script>

<!-- Load plupload and all it's runtimes and finally the jQuery queue widget -->
<script type="text/javascript" src="/plupload/js/plupload.full.js"></script>
<script type="text/javascript" src="/plupload/js/jquery.plupload.queue/jquery.plupload.queue.js"></script>

<script type="text/javascript">
// Convert divs to queue widgets when the DOM is ready
var $j = jQuery.noConflict();
$j(function() {
function log() {
var str = "";

plupload.each(arguments, function(arg) {
    var row = "";

    if (typeof(arg) != "string") {
        plupload.each(arg, function(value, key) {
            // Convert items in File objects to human readable form
            if (arg instanceof plupload.File) {
                // Convert status to human readable
                switch (value) {
                    case plupload.QUEUED:
                        value = 'QUEUED';
                        break;

                    case plupload.UPLOADING:
                        value = 'UPLOADING';
                        break;

                    case plupload.FAILED:
                        value = 'FAILED';
                        break;

                    case plupload.DONE:
                        value = 'DONE';
                        break;
                }
            }

            if (typeof(value) != "function") {
                row += (row ? ', ' : '') + key + '=' + value;
            }
        });

        str += row + " ";
    } else { 
        str += arg + " ";
    }
});

$j('#log').append(str + "\n");
}

$j("#uploader").pluploadQueue({
// General settings
runtimes : 'flash,gears,flash,silverlight,browserplus,html5',
url : '/plupload/upload.php',
max_file_size : '10mb',
chunk_size : '1mb',
unique_names : true,

// Resize images on clientside if we can
resize : {width : 320, height : 240, quality : 90},

// Specify what files to browse for
filters : [
    {title : "Image files", extensions : "jpg,gif,png"},
    {title : "Zip files", extensions : "zip"}
],

// Flash settings
flash_swf_url : '/plupload/js/plupload.flash.swf',

// Silverlight settings
silverlight_xap_url : '/plupload/js/plupload.silverlight.xap',

// PreInit events, bound before any internal events
preinit : {
    Init: function(up, info) {
        log('[Init]', 'Info:', info, 'Features:', up.features);
    },

    UploadFile: function(up, file) {
        log('[UploadFile]', file);

        // You can override settings before the file is uploaded
        // up.settings.url = 'upload.php?id=' + file.id;
        // up.settings.multipart_params = {param1 : 'value1', param2 : 'value2'};
    }
},

// Post init events, bound after the internal events
init : {
    Refresh: function(up) {
        // Called when upload shim is moved
        log('[Refresh]');
    },

    StateChanged: function(up) {
        // Called when the state of the queue is changed
        log('[StateChanged]', up.state == plupload.STARTED ? "STARTED" : "STOPPED");
    },

    QueueChanged: function(up) {
        // Called when the files in queue are changed by adding/removing files
        log('[QueueChanged]');
    },

    UploadProgress: function(up, file) {
        // Called while a file is being uploaded
        log('[UploadProgress]', 'File:', file, "Total:", up.total);
    },

    FilesAdded: function(up, files) {
        // Callced when files are added to queue
        log('[FilesAdded]');

        plupload.each(files, function(file) {
            log('  File:', file);
        });
    },

    FilesRemoved: function(up, files) {
        // Called when files where removed from queue
        log('[FilesRemoved]');

        plupload.each(files, function(file) {
            log('  File:', file);
        });
    },

    FileUploaded: function(up, file, info) {
        // Called when a file has finished uploading
        log('[FileUploaded] File:', file, "Info:", info);
    },

    ChunkUploaded: function(up, file, info) {
        // Called when a file chunk has finished uploading
        log('[ChunkUploaded] File:', file, "Info:", info);
    },

    Error: function(up, args) {
        // Called when a error has occured
        log('[error] ', args);
    }
}
});
});
</script> 
```

在upload.php 文件中，我几乎有默认设置>>

```
<?php
/**
 * upload.php
 *
 * Copyright 2009, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 */

// HTTP headers for no cache etc
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

// Settings
$targetDir = ini_get("upload_tmp_dir") . DIRECTORY_SEPARATOR . "plupload";
//$targetDir = 'uploads';

$cleanupTargetDir = true; // Remove old files
$maxFileAge = 5 * 3600; // Temp file age in seconds

// 5 minutes execution time
@set_time_limit(5 * 60);

// Uncomment this one to fake upload time
// usleep(5000);

// Get parameters
$chunk = isset($_REQUEST["chunk"]) ? intval($_REQUEST["chunk"]) : 0;
$chunks = isset($_REQUEST["chunks"]) ? intval($_REQUEST["chunks"]) : 0;
$fileName = isset($_REQUEST["name"]) ? $_REQUEST["name"] : '';

// Clean the fileName for security reasons
$fileName = preg_replace('/[^\w\._]+/', '_', $fileName);

// Make sure the fileName is unique but only if chunking is disabled
if ($chunks < 2 && file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName)) {
    $ext = strrpos($fileName, '.');
    $fileName_a = substr($fileName, 0, $ext);
    $fileName_b = substr($fileName, $ext);

    $count = 1;
    while (file_exists($targetDir . DIRECTORY_SEPARATOR . $fileName_a . '_' . $count . $fileName_b))
        $count++;

    $fileName = $fileName_a . '_' . $count . $fileName_b;
}

$filePath = $targetDir . DIRECTORY_SEPARATOR . $fileName;

// Create target dir
if (!file_exists($targetDir))
    @mkdir($targetDir);

// Remove old temp files    
if ($cleanupTargetDir && is_dir($targetDir) && ($dir = opendir($targetDir))) {
    while (($file = readdir($dir)) !== false) {
        $tmpfilePath = $targetDir . DIRECTORY_SEPARATOR . $file;

        // Remove temp file if it is older than the max age and is not the current file
        if (preg_match('/\.part$/', $file) && (filemtime($tmpfilePath) < time() - $maxFileAge) && ($tmpfilePath != "{$filePath}.part")) {
            @unlink($tmpfilePath);
        }
    }

    closedir($dir);
} else
    die('{"jsonrpc" : "2.0", "error" : {"code": 100, "message": "Failed to open temp directory."}, "id" : "id"}');

// Look for the content type header
if (isset($_SERVER["HTTP_CONTENT_TYPE"]))
    $contentType = $_SERVER["HTTP_CONTENT_TYPE"];

if (isset($_SERVER["CONTENT_TYPE"]))
    $contentType = $_SERVER["CONTENT_TYPE"];

// Handle non multipart uploads older WebKit versions didn't support multipart in HTML5
if (strpos($contentType, "multipart") !== false) {
    if (isset($_FILES['file']['tmp_name']) && is_uploaded_file($_FILES['file']['tmp_name'])) {
        // Open temp file
        $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
        if ($out) {
            // Read binary input stream and append it to temp file
            $in = fopen($_FILES['file']['tmp_name'], "rb");

            if ($in) {
                while ($buff = fread($in, 4096))
                    fwrite($out, $buff);
            } else
                die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');
            fclose($in);
            fclose($out);
            @unlink($_FILES['file']['tmp_name']);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 103, "message": "Failed to move uploaded file."}, "id" : "id"}');
} else {
    // Open temp file
    $out = fopen("{$filePath}.part", $chunk == 0 ? "wb" : "ab");
    if ($out) {
        // Read binary input stream and append it to temp file
        $in = fopen("php://input", "rb");

        if ($in) {
            while ($buff = fread($in, 4096))
                fwrite($out, $buff);
        } else
            die('{"jsonrpc" : "2.0", "error" : {"code": 101, "message": "Failed to open input stream."}, "id" : "id"}');

        fclose($in);
        fclose($out);
    } else
        die('{"jsonrpc" : "2.0", "error" : {"code": 102, "message": "Failed to open output stream."}, "id" : "id"}');
}

// Check if file has been uploaded
if (!$chunks || $chunk == $chunks - 1) {
    // Strip the temp .part suffix off 
    rename("{$filePath}.part", $filePath);
}

// Return JSON-RPC response
die('{"jsonrpc" : "2.0", "result" : null, "id" : "id"}');

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:36:22.397

检查上传文件夹的 777 权限。根据 plupload 中的自述文件，您需要 HTML5 和 Flash 支持

# ios - 通过 CVOpenGLESTextureCacheCreate 获取屏幕截图

> ID：12384848
> 
> 赞同：1
> 
> 时间：2012-09-12T09:15:34.427
> 
> 标签：ios, opengl-es, opengl-es-2.0

我有一个类似于 GLPaint 示例的应用程序（但在 OpenGL ES 2.0 上）。我想在某些时候获取绘图视图的屏幕截图。我已经读过这个[话题](https://stackoverflow.com/questions/10455329/opengl-es-2d-rendering-into-image/10455622#10455622)

但我不明白我应该在什么时候调用 CVOpenGLESTextureCacheCreate 并做其他事情。请问谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T15:09:53.223

[我在您链接到的答案](https://stackoverflow.com/a/10455622/19679)中描述的代码描述了像素缓冲区的创建、其匹配纹理的提取以及将该纹理绑定为帧缓冲区的输出。您使用该代码一次来设置您将渲染场景的帧缓冲区。

每当您想从该纹理中捕获时，您可能希望使用`glFinish()`阻塞直到所有 OpenGL ES 渲染完成，然后使用我在那里描述的代码：

```
CVPixelBufferLockBaseAddress(renderTarget, 0);
_rawBytesForImage = (GLubyte *)CVPixelBufferGetBaseAddress(renderTarget);
// Do something with the bytes
CVPixelBufferUnlockBaseAddress(renderTarget, 0); 
```

提取包含场景图像的纹理的原始字节。

iOS 纹理的内部字节顺序是 BGRA，因此您需要使用以下内容从这些字节创建 CGImageRef：

```
// It appears that the width of a texture must be padded out to be a multiple of 8 (32 bytes) if reading from it using a texture cache
NSUInteger paddedWidthOfImage = CVPixelBufferGetBytesPerRow(renderTarget) / 4.0;
NSUInteger paddedBytesForImage = paddedWidthOfImage * (int)currentFBOSize.height * 4;
dataProvider = CGDataProviderCreateWithData((__bridge_retained void*)self, _rawBytesForImage, paddedBytesForImage, dataProviderUnlockCallback);

cgImageFromBytes = CGImageCreate((int)currentFBOSize.width, (int)currentFBOSize.height, 8, 32, CVPixelBufferGetBytesPerRow(renderTarget), defaultRGBColorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst, dataProvider, NULL, NO, kCGRenderingIntentDefault); 
```

在上面，我使用了一个`dataProviderUnlockCallback()`函数来处理像素缓冲区的解锁和安全恢复渲染，但在你的情况下，你可能会忽略它，只为那里的参数传递 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T16:41:58.333

另一种选择是：

1.  创建一个新的 CGBitmapContext
2.  调用 [layer renderInContext:yourNewContext]
3.  从位图上下文中获取 CGImage
4.  获取一个像素缓冲区，将 CGImage 放入其中，然后使用 AVAdaptor 将其附加到 AssetWriter。

祝你好运！

**编辑**

这可能行不通：我现在正在对其进行测试，并将尽快重新发布。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T01:20:38.843

试试`VTCreateCGImageFromCVPixelBuffer`（`VideoToolbox`适用于 iOS 9.x+）：

```
OSStatus VTCreateCGImageFromCVPixelBuffer(CVPixelBufferRef pixelBuffer, CFDictionaryRef options, CGImageRef  _Nullable *imageOut);
Parameters 
```

指定将成为 CGImage 图像数据源的像素缓冲区（设置`options`为 NULL）。

# javascript - DataTables 在表之间移动行

> ID：12384851
> 
> 赞同：1
> 
> 时间：2012-09-12T09:15:42.963
> 
> 标签：javascript, jquery, jquery-datatables

我正在为 sql 查询结果构建一个简单的界面。

我选择使用 DataTables 并在它的帮助下创建了如下内容：

[http://live.datatables.net/izavon/18/edit#javascript,html,live](http://live.datatables.net/izavon/18/edit#javascript,html,live)

我在将行从一张表移动到另一张表时遇到问题，现在我有 2 个函数可以完成它们的工作，但我想要一个函数，因为我的解决方案只能在一个方向上工作——我可以从一张表移动到另一张表那些。

```
$(".deleteMe1").on("click", function (event) {
    var row = $(this).closest("tr").get(0);
    var addElement = oTable1.fnGetData(row);
    oTable2.fnAddData(addElement);
    // Remove Element from the source table
    var removeElement = oTable1.fnGetPosition(row);
    oTable1.fnDeleteRow(removeElement, null, true);
});

$(".deleteMe2").on("click", function (event) {
    var row = $(this).closest("tr").get(0);
    var addElement = oTable2.fnGetData(row);
    oTable1.fnAddData(addElement);
    // Remove Element from the source table
    var removeElement = oTable2.fnGetPosition(row);
    oTable2.fnDeleteRow(removeElement, null, true);
}); 
```

所以我的问题是：**如何将上述功能合并为一个。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:06:32.347

随着行的变化，使用 .on 将删除按钮绑定到较低的不变元素，在下面的情况下，单击事件绑定到 $(document)，然后使用第二个参数聚焦。

```
$(document).on("click", '.deleteMe', function (event) 
{
    // Get the id of the clicked table for comparison
    var id = $(this).closest('table').attr('id');

    // Assign the tables to the table object
    var table = {
        primary : (id === 'example1') ? oTable1 : oTable2,
        secondary : (id !== 'example1') ? oTable1 : oTable2
    };

    // Instead of calling the tables in seperate functions just use the  dynamically
    // assigned table.primary.x() and table.secondary.x()
    var row = $(this).closest("tr").get(0);

    var addElement = table.primary.fnGetData(row);

    table.secondary.fnAddData(addElement);

    var removeElement = table.secondary.fnGetPosition(row);

    table.primary.fnDeleteRow(removeElement, null, true);

}); 
```

[使用上述更新的数据表示例](http://live.datatables.net/uwiseb)

这将双向工作，具体取决于单击删除按钮的表。您可以通过硬编码主要/次要表变量或将 .on 函数的第二个参数设置为只有在一张表中使用。

要在表上运行更新，请将此行添加到上述函数的底部：

```
oTable1.fnDraw(); 
```

这将强制表格在每次添加或删除新行时重新绘制，这对您很有用，因为您可以使用：

```
"fnDrawCallback": function() {
    console.log('draw callback executed');
 }; 
```

在您的数据表对象中准确指定应该发生的事情。更新页脚，拉取相关的 ajax 数据等。

希望这可以帮助。

# android - 为什么静态 MediaPlayer 实例不适用于 Android？

> ID：12384853
> 
> 赞同：1
> 
> 时间：2012-09-12T09:15:50.067
> 
> 标签：android, audio, android-activity, static, media-player

我愿意接受建议。我正在编写一个应用程序，该应用程序需要在应用程序的所有活动之间播放音乐，并在用户点击“主页”或通过回击并退出我的应用程序时“退出”应用程序时暂停。所以这就是我所做的——我创建了一个包含 MediaPlayer 静态实例的“SoundController”类，如下所示：

```
private static MediaPlayer _musicPlayer;
public static void init(Context ctx){
    _musicPlayer = new MediaPlayer();
    AssetFileDescriptor descriptor;
    try {
        descriptor = ctx.getAssets().openFd("something.ogg");
        _musicPlayer.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
        _musicPlayer.prepare();
        _musicPlayer.setLooping(true);
    } catch (IOException e) {
        e.printStackTrace();
    } catch (IllegalStateException e) {
        e.printStackTrace();
    }
} 
```

我在我的应用程序中对每个活动的“onResume()”和“onPause()”调用“.start()”和“.pause()”，如下所示：

```
@Override
public void onResume(){
    System.out.println("got in onResume for mainActivity");
    SoundController.playMusic();
    super.onResume();
}

@Override
public void onPause(){
    System.out.println("got in onPause for mainActivity");
    SoundController.pauseMusic();
    super.onPause();
}

@Override
public void onDestroy(){
    System.out.println("got in onDestroy for mainActivity");
    SoundController.tearDown();
    super.onDestroy();
} 
```

SoundController 方法如下：

```
public static void playMusic(){
    if(!_musicPlayer.isPlaying()){
        _musicPlayer.start();
    }
}

public static void pauseMusic(){
    if(_musicPlayer.isPlaying()){
        _musicPlayer.pause();
    }
}

public static void tearDown(){
    if(_musicPlayer.isPlaying()){
        _musicPlayer.stop();
        _musicPlayer.release();
    }
} 
```

但由于某种原因，我注意到几个错误，例如：

*   即使在应用程序退出后音乐也会继续播放，如果我做的事情足够快，比如我启动应用程序，很快就回家，然后再次启动应用程序，然后按“返回”键退出应用程序......
*   该应用程序在尝试退出时崩溃，因为出于某种原因，onPause() 在 onDestroy().... 之后被调用。（我将它记录在我的 logcat 中，在 kindle fire 上）

是不是我的媒体播放器的静态实例在我的应用程序被销毁之前就以某种方式被破坏了？

在我的应用程序退出后音乐继续播放很长时间的情况下，“_mediaPlayer.start（）”是否有延迟启动，所以它绕过了应用程序退出时的检查？

对不起，很长的帖子。非常感谢！！！

==================================================== =====

*编辑*这里的崩溃日志：

```
09-12 14:44:06.304: I/System.out(12191): got in onPause for mainActivity
09-12 14:44:06.366: I/System.out(12191): got in onResume for mainActivity
09-12 14:44:06.726: I/System.out(12191): got in onDestroy for mainActivity
09-12 14:44:07.499: I/System.out(12191): got in onPause for mainActivity
09-12 14:44:07.507: D/AndroidRuntime(12191): Shutting down VM
09-12 14:44:07.507: W/dalvikvm(12191): threadid=1: thread exiting with uncaught exception (group=0x40015560)
09-12 14:44:07.507: E/AndroidRuntime(12191): FATAL EXCEPTION: main
09-12 14:44:07.507: E/AndroidRuntime(12191): java.lang.RuntimeException: Unable to pause activity {com.blah/com.blah.mainActivity}: java.lang.IllegalStateException
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2354)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2311)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2291)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread.access$1700(ActivityThread.java:117)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:942)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.os.Looper.loop(Looper.java:130)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread.main(ActivityThread.java:3683)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at java.lang.reflect.Method.invokeNative(Native Method)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at java.lang.reflect.Method.invoke(Method.java:507)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:850)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:608)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at dalvik.system.NativeStart.main(Native Method)
09-12 14:44:07.507: E/AndroidRuntime(12191): Caused by: java.lang.IllegalStateException
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.media.MediaPlayer.isPlaying(Native Method)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at com.blah.controllers.SoundController.pauseMusic(SoundController.java:63)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at com.blah.mainActivity.onPause(mainActivity.java:53)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.Activity.performPause(Activity.java:3887)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.Instrumentation.callActivityOnPause(Instrumentation.java:1191)
09-12 14:44:07.507: E/AndroidRuntime(12191):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2341)
09-12 14:44:07.507: E/AndroidRuntime(12191):    ... 12 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:34:08.133

您似乎没有使用服务，但它是此类的完美用例：允许在没有 UI 的情况下执行后台任务。播放音乐不需要 UI（控制它当然需要一个）。另外，使用

> 准备异步（）

而不是 prepare() 除非您将 Service 放在单独的线程中：prepare() 是同步的，这意味着当媒体播放器开始播放歌曲时，您的主线程（您的 UI 所在的位置）将被阻塞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T02:45:18.773

好的，这里的关键是 Kindle Fire 和 WarrenFaith 对我的问题的评论。

足够愚蠢的是，在 Kindle Fire 版本 1 上，活动周期有时会混乱 - 在调用 onDestroy 之后调用 onPause。这没有道理。在我的 onDestroy() 中，我拆除了整个 SoundController 变量，因为我的主要活动中的 onDestroy 意味着用户“退出”了我的应用程序。

所以发生的事情是 onPause 在媒体播放器死后被调用。当然，到那时，它处于非法状态。

这个错误在我的另外两个安卓设备上是不可重现的。（真正的蓝色 android，不是它的分叉版本，比如 kindle fire）

# apache-flex - Flex Mobile TextInputSkin 用于提示和不同的软键盘

> ID：12384855
> 
> 赞同：1
> 
> 时间：2012-09-12T09:15:58.020
> 
> 标签：apache-flex, mobile, autoresize, soft-keyboard

我正在开发 Flex 移动应用程序，其中我面临与 TextInputSkin 相关的问题，我已经为所有文本输入和不同的 Sofykeyboard（号码、电子邮件、联系人等）应用了提示。

我将 Textinputs 分组在不同的 VGroup 和 HGroups 中。我使用的是 Scroller，所以当我将“spark.skins.mobile.TextInputSkin”应用到 TextInput 时，滚动效果很好……但是当我移除皮肤时，它会延迟滚动……

现在 TextInputSkin 的问题是它不需要像数字、联系人、电子邮件这样的软键盘......并且对于提示值，它在打字时保留为灰色......

有没有解决这个问题的方法？并且我可以应用自动滚动，以便当软键盘激活而不是适当地调整视图大小时，我找到了 resizeForSoftKeyboard 属性，它调整了视图的大小，但是当软键盘停用时，视图保持不变......所以你可以找到软键盘“黑色”的区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T11:19:06.060

我认为您要问的问题只是与 Flex 4.5 textInput 皮肤（使用 Flash TextField）和 Flex 4.6 皮肤（使用 StageText）之间的差异有关。

不使用舞台文本时，您无法指定 softKeyboardType

阅读更多：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/TextInput.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/TextInput.html)

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/StyleableStageText.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/StyleableStageText.html)

引用 StageText 的一些限制：

> 基于 StageText 的控件的限制：
> 
> ```
> Native text input fields cannot be clipped by other Flex content and are rendered in a layer above the Stage. Because of this 
> ```
> 
> 限制，使用基于 StageText 的外观类的组件将始终显示在其他 Flex 组件之上。Flex 弹出窗口和下拉菜单也将被任何可见的本机文本字段遮挡。最后，本机文本字段的相对 z 顺序无法由应用程序控制。
> 
> ```
> The native controls do not support embedded fonts.
> 
> Links and html markup are not supported.
> 
> text is always selectable.
> 
> Fractional alpha values are not supported.
> 
> Keyboard events are not dispatched for most keys. This means that the tab key will not dispatch keyDown or keyUp events so focus cannot 
> ```
> 
> 使用 tab 键从基于 StageText 的控件中删除。
> 
> ```
> StageText is currently not capable of measuring text.
> 
> At this time StageText does not support programmatic control of scroll position.
> 
> At this time StageText does not support an event model necessary to allow for touch-based scrolling of forms containing native text fields. 
> ```

# java - BigDecimal/ArrayList 需要新的语言环境

> ID：12384858
> 
> 赞同：2
> 
> 时间：2012-09-12T09:16:01.630
> 
> 标签：java, arraylist, locale, bigdecimal

我有一个 ArrayList，我在其中添加了 BigDecimals。

我的问题是，BigDecimals 使用`.`和`,`美国方式 - 我想要欧洲方式 - 例如，而不是`14.70`我想要的`14,70`。

我做了一个方法：

```
public static String getLocale(BigDecimal n) {
   String newValue      =   null;
   if (n != null) 
      newValue  =   NumberFormat.getInstance().format(n);   
   return newValue;
} 
```

其中，当我将整个打印`ArrayList`到 .csv 时，我为每个 Bigdecimals 调用此方法。但是我想知道是否可以更改整个 ArrayList 以了解我想以“正确”的方式存储元素？或者当我将 BigDecimal 设置为 ArrayList 时可能会更改语言环境？

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:21:30.193

最好的方法是你完成它的方式，虽然我会命名该方法`format()`而不是`getLocale()`，因为该方法没有获取语言环境，而是格式化 BigDecimal。

数据是 BigDecimal 的列表。此数据是否以及如何在 CSV 文件中显示/存储不应改变数据的性质。如果以后需要在英文网页中显示这些数据，则不必更改数据的性质，只需更改这些数据的显示方式即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:28:24.433

首先，您无需更改 (BigDecimal) 元素的存储方式！

您必须更改它们的显示方式。您可以使用[DecimalFormat](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/DecimalFormat.html)类来做到这一点。

例如：

```
private static final String BIG_DECIMAL_DEFAULT_FORMAT = "##0.00";
private static final char GROUPING_SEPARATOR = '.';
private static final char DECIMAL_SEPARATOR = ',';
private static final int DIGIT_GROUP_NUMBER = 3;
private static final DecimalFormat decimalFormatter = new DecimalFormat(BIG_DECIMAL_DEFAULT_FORMAT);

static{
    decimalFormatter.setParseBigDecimal(true);
    decimalFormatter.setGroupingSize(DIGIT_GROUP_NUMBER);
    paschiFaceSymbols.setDecimalSeparator(DECIMAL_SEPARATOR);
    paschiFaceSymbols.setGroupingSeparator(GROUPING_SEPARATOR);
} 
```

比您还必须实现一种方法来显示 BigDecimal 值。例如：

```
public static String format(BigDecimal value, String pattern)
{
    if (value == null){
        throw new IllegalArgumentException("Error:value=null");
    }

    if (pattern != null && !pattern.isEmpty()){
        decimalFormatter.applyPattern(pattern);
    }
    else{
        decimalFormatter.applyPattern(BIG_DECIMAL_DEFAULT_FORMAT);
    }

    return decimalFormatter.format(value);
} 
```

# c# - 我需要使用正则表达式检查字符串是否包含特定模式

> ID：12384865
> 
> 赞同：0
> 
> 时间：2012-09-12T09:16:26.653
> 
> 标签：c#, regex

我有一个类似于`"Hello 9 you8 [C#587]"`或的字符串`"Hello 9 you8 [#587]"`

我需要检查字符串是否包含`"[#numbers]"`或`"[letter#numbers]"`在 C# 中使用正则表达式。

请协助。

亲切的问候

实际上，“字母”部分可能是一个词。

请根据更新提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:20:08.727

试试这个，

`\[([A-Za-z]+)?#(\d)+\]`

![在此处输入图像描述](../Images/3e51700526458add1d989199da2c296d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:18:22.997

尝试使用以下正则表达式：

```
\[[a-zA-Z]?#\d+\] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:23:05.113

我相信您想要与@hsz 的答案略有不同的东西。他只会检查`[letter#numbers]`而不是检查`[#numbers]`。

试试这个：

```
\[[a-zA-Z]?#\d+\] 
```

# iphone - 使用 Urbanairship 进行应用内消耗品购买

> ID：12384867
> 
> 赞同：1
> 
> 时间：2012-09-12T09:16:33.607
> 
> 标签：iphone, in-app-purchase, urbanairship.com

我正在开发这个应用程序，您可以在其中购买消耗品。应用内购买在itunes上设置为消耗品，我正在使用urbairship。问题是，当我购买一件商品时，它只要求一次（第一次）付款。之后，它的工作原理相同，但没有 AlertView 节目要求您付费。它像您为产品付款一样进入代表。

谁能帮我？谢谢。

更新：

```
[UAStoreFront registerObserver: self];
//[[UAStoreFront shared] setDelegate:self];

// Urban Airship Subscriptions
[UAStoreFront useCustomUI:[UAStoreFrontUI class]];

// Init Airship launch options
NSMutableDictionary *takeOffOptions = [[[NSMutableDictionary alloc] init] autorelease];
[takeOffOptions setValue:[[AppDelegate appDelegate] appDelegateLaunchOptions] forKey:      UAirshipTakeOffOptionsLaunchOptionsKey];

// Create Airship singleton that's used to talk to Urban Airship servers.
// Please populate AirshipConfig.plist with your info from http://go.urbanairship.com
[UAirship takeOff:takeOffOptions];

[UAStoreFront registerObserver: self];
[[UAStoreFront shared] setDelegate:self];
[UAStoreFront resetAndLoadInventory]; 
```

此代码在 viewDidLoad 中。

我有一个提出请求的方法：

```
- (IBAction)pushBuyMoreTime
{
   [UAStoreFront purchase: @"in-app id"];
} 
```

即使它没有要求我付款，它也会调用这个代表：

```
-(void)productPurchased:(UAProduct*) product {
} 
```

# perforce - perforce：避免在正常“获取最新版本”没有得到所有内容后强制同步

> ID：12384871
> 
> 赞同：3
> 
> 时间：2012-09-12T09:16:42.363
> 
> 标签：perforce

我想知道是否有办法告诉 perforce 只同步*丢失的*（从给定的工作区视图）文件，而不是正确覆盖现有的文件，即避免在`p4 sync -f`正常的“获取最新版本”（`p4 sync`）之后使用的方法没有得到所有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T16:22:01.507

尝试这个：

```
p4 diff -sd | p4 -x- sync -f 
```

这是一个链式命令，它将在您的工作空间中查找所有已知文件，而不是 #head 修订版 ( )，然后**仅对这些文件**`p4 diff -sd`强制同步( )。请注意使用which 指示第二个命令从标准输入 (STDIN) 读取。 **`p4 -x- sync -f``-x-`**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:22:00.220

如果`p4 sync`没有得到该文件，则 perforce 服务器认为您已经拥有它。

`p4 sync <missing file>#0`使服务器同步到丢失的文件，然后`p4 sync <missing file>`获取新副本。

或者，`p4 sync -f <missing tree>/...`将仅同步丢失的树。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-12T09:25:43.000

没有办法避免全局`-f`选项。

如果正常同步没有得到文件的最新版本，那么 Perforce 认为你已经有了它。您是否将文件状态设置为在 Perforce 之外可写？

如果您知道哪些文件/文件夹受到影响，您可以`-f`只对那些更快的文件/文件夹使用，但这确实意味着您可能会错过一些东西。**

# spring - NamedParameterJdbcTemplate 很慢

> ID：12384873
> 
> 赞同：1
> 
> 时间：2012-09-12T09:16:48.510
> 
> 标签：spring, spring-jdbc

我在搜索过程中使用的是 Spring NamedParameterJdbcTemplate，但是当我得到很多结果时，它的执行需要一些时间，我不知道是否有办法优化它。这是我的代码：

```
 NamedParameterJdbcTemplate jt = new NamedParameterJdbcTemplate(dataSource);
 StringBuilder sb = new StringBuilder(query);
 query = sb.toString();
 return jt.query(query, map, new MyRowMapper()); 
```

请问你有什么想法吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:24:07.037

你可以做的几件事1\. 为什么每次调用方法时都要
创建实例？`NamedParameterJdbcTemplate`创建一次并将先前创建的实例传递给该方法。

```
NamedParameterJdbcTemplate jt = new NamedParameterJdbcTemplate(dataSource); 
```

保留`NamedParameterJdbcTemplate`为类属性并初始化一次。
2\. 你在这里尝试什么？

```
 StringBuilder sb = new StringBuilder(query);
 query = sb.toString(); 
```

如果其类型为 ，则直接传递`query`给方法。 3\. 在内部，确保您只在方法中获取和分配必填字段。这可能会影响执行时间，因为对结果集中的每条记录都调用一次。 `.query()``String`
`MyRowMapper``mapRow``mapRow`

# php - 获取未捕获的 OAuthException：将照片发布到目标相册时发生未知错误

> ID：12384877
> 
> 赞同：2
> 
> 时间：2012-09-12T09:17:08.333
> 
> 标签：php, facebook, facebook-graph-api

```
$photo_details = array(
        'message'=> $image->description().' '.$site_adr.$image->id().'/'.cleanSEOstring(strtolower(trim($image->title()))).'-cover-photo',
        'redirect_uri'=> 'http://www.exampleurl.com',
        'scope'=>'publish_stream');
$photo_details['image'] = '@' . realpath($photo);
    try
    {
        $upload_photo = $facebook->api('/'.$album_uid.'/photos', 'POST', $photo_details);
        @unlink($file);
        header('location:https://www.facebook.com/profile.php?id='.$userMe['id'].'&v=wall');
    }
    catch(FacebookApiException $e)
    {
        header('location:http://www.somethingwentwrong.com');
    } 
```

它仍然重定向到somethingwentwrong.com，我做错了什么吗？

如标题中所述的异常是“发生了未知错误”，这是它在 catch 语句中返回的对象：

```
object(FacebookApiException)#5 (7) { ["result:protected"]=> array(1) { ["error"]=> array(3) { ["message"]=> string(30) "An unknown error has occurred." ["type"]=> string(14) "OAuthException" ["code"]=> int(1) } } ["message:protected"]=> string(30) "An unknown error has occurred." ["string:private"]=> string(0) "" ["code:protected"]=> int(0) ["file:protected"]=> string(48) "/var/www/mysite/fb-sdk/base_facebook.php" ["line:protected"]=> int(1106) ["trace:private"]=> array(4) { [0]=> array(6) { ["file"]=> string(48) "/var/www/mysite/fb-sdk/base_facebook.php" ["line"]=> int(810) ["function"]=> string(17) "throwAPIException" ["class"]=> string(12) "BaseFacebook" ["type"]=> string(2) "->" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T02:49:20.077

找出异常错误消息是什么。所以做这样的事情：

```
} catch {
  error_log('caught exception: '. $e);
  header('location:http://www.somethingwentwrong.com');
} 
```

如果你得到`OAuthException: (#803) Some of the aliases you requested do not exist`然后确保 $album_uid 是一个字符串而不是一个 int。

还要确保用户已授予您的应用`user_photos`权限。异常错误信息会告诉你。

如果您尝试将照片发布到 FB 页面，则需要使用页面访问令牌。

您的代码看起来不错，除了我认为`'scope'`并且`'redirect_uri'`不会对 Graph API 调用做任何事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-30T18:46:46.950

我不认为这是你的错。我最近看到了一个非常相似的问题，照片上传失败并出现“发生未知错误”。这在我们所有的客户帐户中随机发生，但最常见的是两个帐户（80-90% 的上传失败）。有时重试上传会解决问题，但通常也会失败。

我已于 9 月 13 日在 Facebook 开发者专区开票。请添加您的复制品，以便获得牵引力。

[http://developers.facebook.com/bugs/258628444257212?browse=search_50688f593127e2295697196](http://developers.facebook.com/bugs/258628444257212?browse=search_50688f593127e2295697196)

# php - 如何在线缩小图像

> ID：12384883
> 
> 赞同：-3
> 
> 时间：2012-09-12T09:17:33.230
> 
> 标签：php, jquery

我有一个应用程序，用户将在其中插入他/她的图像，我不知道它的大小，但是在存储图像时，我想将其缩小为特定大小，同时提出如何实现这一点......请帮助我.. ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:06:47.090

试试这样的 [http://imageresizer.codeplex.com/](http://imageresizer.codeplex.com/)

或者对于 PHP：

[http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/](http://www.white-hat-web-design.co.uk/blog/resizing-images-with-php/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:47:31.070

这可以通过 GD-library (http://www.php.net/manual/en/book.image.php) 或 ImageMagick (http://php.net/manual/en/book.imagick.php) 完成. 后者更快，但必须安装在系统上。GD 库提供较低的速度和较少的选项，但已经在大多数 php 安装中可用。

要保持比率，您只需获取长度和宽度并将它们乘以一个公因子。该因子通常使用较大的值（长度或宽度）来计算。

# arrays - Matlab：如何随机打乱矩阵的列

> ID：12384884
> 
> 赞同：22
> 
> 时间：2012-09-12T09:17:35.750
> 
> 标签：arrays, matlab, random, matrix

我有一个像这样的矩阵：

```
 A=
    4 7 8 9
    3 3 5 7
    6 4 8 6 
```

并希望随机洗牌并执行以下操作：

```
 A=
    8 4 9 7
    5 3 7 3
    8 6 6 4 
```

有人有什么主意吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-09-12T09:19:46.413

您可以使用索引对列进行洗牌：

```
A(:,[3 1 4 2]) 
```

如果你想随机做，你可以创建一个随机排列：

```
A(:,randperm(size(A,2))); 
```

# unix - I/O 错误 (0)：使用 python 2.7 从 ftps 下载文件时出错无法从 FTPS 下载文件

> ID：12384888
> 
> 赞同：0
> 
> 时间：2012-09-12T09:17:55.967
> 
> 标签：unix, ftp, python-2.7, ftps, ftplib

您好我正在尝试使用 python 2.7 从 FTPS 下载文件。下面是我的代码这里我正在门控正常的 IO 错误。虽然此代码在 UNIX 和 Python 2.7 上运行。我尝试在具有相同代码的 Windows 上运行良好。但是在 unix 上它不能正常工作。

没有得到我做错的地方。

```
#!/usr/bin/env python

import ftplib  
import os
import datetime
import sys
from ftplib import FTP_TLS

try:
  ftps = FTP_TLS(server)
  ftps.debug(3)
  ftps.connect(host=server,port=portno)
  ftps.auth()    
  ftps.login(username, password)
  ftps.prot_p()    
  ftplogin=True
except Exception, e:
    logger.error(e)

# Change to the proper directory
if ftplogin:
    try:
      ftps.cwd(directory)
      filelist = [] #to store all files
      ftps.retrlines('LIST',filelist.append)    # append to list
      is_file_exist=False       
      if len(filelist)>0 :#do something                   
          is_file_exist = True

      if  is_file_exist :
         print "file exist"
          ##Loop through matching files and download each one individually
          try:
              for filename in ftps.nlst(filematch):
                  local_filename = os.path.join(downloadpath, filename)
                  fhandle = open(local_filename, 'wb')                    
                  logger.info('Getting ' + filename)
                  ftps.retrbinary('RETR ' + filename, fhandle.write)
                  fhandle.close()             #                    
              ftps.quit()    
              logger.info("File download successfull")
          except Exception , e:
              print e
              logger.error(e)
     else :
       logger.info("There is no file for processing")  

 except IOError as eo:
    print "I/O error ({0}):{1}".format(eo.errno,eo.strerror)
 except Exception, e:
   directoryFound=False
   logger.error(e)
   print e
 except :
   print "Unexpected erro:", sys.exc_info()[0] 
```

注意：请忽略缩进，因为我在这里复制代码并且它在 .Py 文件中的格式正确

代码因以下错误而中断

```
Abc.txt*
Abc1.txt*
*get* '220 208.235.248.3 FTP server ready\r\n'
*resp* '220 208.235.248.3 FTP server ready'
*cmd* 'AUTH TLS'
*put* 'AUTH TLS\r\n'
*get* '234 AUTH TLS successful\r\n'
*resp* '234 AUTH TLS successful'
*cmd* 'USER Username'
*put* 'USER Username \r\n'
*get* '331 Password required for Username.\r\n'
*resp* '331 Password required for Username.'
*cmd* 'PASS ********'
*put* 'PASS ********\r\n'
*get* '230 User Username logged in.\r\n'
*resp* '230 User Username logged in.'
*cmd* 'PBSZ 0'
*put* 'PBSZ 0\r\n'
*get* '200 PBSZ 0 successful\r\n'
*resp* '200 PBSZ 0 successful'
*cmd* 'PROT P'
*put* 'PROT P\r\n'
*get* '200 Protection set to Private\r\n'
*resp* '200 Protection set to Private'
2012-09-12 05:01:54,029 - __main__ - INFO - Server login successful
changeing directory
*cmd* 'CWD /prod/hm'
*put* 'CWD /prod/hm\r\n'
*get* '250 CWD command successful.\r\n'
*resp* '250 CWD command successful.'
Directory changed/prod/hm
filelist init
*cmd* 'TYPE A'
*put* 'TYPE A\r\n'
*get* '200 Type set to A\r\n'
*resp* '200 Type set to A'
*cmd* 'PASV'
*put* 'PASV\r\n'
*get* '227 Entering Passive Mode (208,235,248,3,232,171).\r\n'
*resp* '227 Entering Passive Mode (208,235,248,3,232,171).'
*cmd* 'NLST'
*put* 'NLST\r\n'
*get* '150 Opening ASCII mode data connection for file list\r\n'
*resp* '150 Opening ASCII mode data connection for file list'
*retr* 'Abc.txt\r\n'
*retr* 'Abc1.txt\r\n'
*retr* ''
I/O error (0):Error 
```

为了安全起见，我更改了文件名和 FTPS 详细信息。:)

我尝试了很多选项，但没有解决方法。如果我使用 FTP 更改此 coed 并进行需要代码更改，例如 Comment ftps.auth()、ftps.prot_p()，那么它可以正常工作，但 FTPS 无法正常工作。

我也没有得到错误来探索互联网上没有可用的信息，因为我搜索了很多但没有解决方案请帮助</p>

**我在 ftp_tls 类上使用 ftplib，在 unix 上使用 python2.7**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:30:11.307

它似乎 ftplib.py 在 python2.7 中的 UNIX 上无法正常工作我不知道是否有人在像 python 3.2 这样的 python 的最小版本上得到这个错误。在具有 conn.unwrap() 方法的 FTP_TLS 类 retrbinary 和 retrlines 命令下的 ftplib.py 中。此方法不会关闭连接并在 unix 上正确重新打开。如果我们可以使用 conn.close() 而不是 conn.unwrap() 它会起作用。请在 ftplib.py 中进行以下更改

```
 def retrbinary(self, cmd, callback, blocksize=8192, rest=None):
     ...
     ...
      if isinstance(conn, ssl.SSLSocket):
         ##conn.unwrap()
         conn.close()
     .... 
```

和

```
 def retrlines(self, cmd, callback = None):
     ....
     ....
         if isinstance(conn, ssl.SSLSocket):
         ##conn.unwrap()
         conn.close()
     .....
         conn.close() 
```

我不知道它是否对其他功能有任何影响。请在对生产实施此修改之前进行交叉检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:49:29.680

以下是一个线索，而不是一个答案......如果我们在答案上取得更多进展，我会稍后更新。

我们也遇到过这个错误。我们发现的线索是错误发生在Linux机器上而不是Windows机器上。我们在两台机器上使用相同版本的 Python (2.7.2)。这表明该问题与套接字或在两个操作系统之间以不同方式实现的事物有关。

# c# - 在操作过滤器中获取 PartialView 结果

> ID：12384893
> 
> 赞同：0
> 
> 时间：2012-09-12T09:18:05.257
> 
> 标签：c#, asp.net, asp.net-mvc

我写了一个类似于日志功能的动作过滤器：

```
public class TrackActionFilterAttribute : ActionFilterAttribute, IActionFilter
{
   public override void OnActionExecuting(ActionExecutingContext filterContext)
   {
      Tracking track = new Tracking()
      {
        Action = filterContext.ActionDescriptor.ControllerDescriptor.ControllerName + filterContext.ActionDescriptor.ActionName
      };
      context.Trackings.Add(track);
      context.SaveChanges();
   }
} 
```

我有这样的行动方法：

```
[TrackActionFilter]
public ActionResult Index() 
{
  if (Request.Form["registered"] == 1) 
     return PartialView("Landing");
  else 
     return PartialView("Register");
}

[TrackActionFilter]
public ActionResult Landing() 
{
   return PartialView();
}

[TrackActionFilter]
public ActionResult Register()
{ 
   return PartialView();
} 
```

我的问题是当索引操作被调用时，我只是将索引操作注册到数据库中。由于导航到 Index 将导致 Landing 或 Register Partial View，是否无论如何都可以在任何类型的操作过滤器中获取这些操作？

主要原因是因为我还想在我的数据库中跟踪这些操作，但我似乎无法做到这一点。我试过 ActionExecuted ， ResultExecuted 无济于事。如果任何专家可以提供帮助将很高兴！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:52:31.180

您在操作过滤器中有访问请求参数：

```
filterContext.HttpContext.Request["registered"] 
```

如果您想知道返回了哪个部分视图，则必须使用`OnActionExecuted`event 因为此事件在控制器操作完成后运行：

```
public override void OnActionExecuted(ActionExecutedContext filterContext)
{
    var viewResult = filterContext.Result as ViewResultBase;
    if (viewResult != null)
    {
        // the controller action returned either a View or a partialView
        // => we could get its name:
        var name = viewResult.ViewName;
    }

    ...
} 
```

# android - Android 4.1 上的 AlertDialog 问题

> ID：12384896
> 
> 赞同：1
> 
> 时间：2012-09-12T09:18:13.887
> 
> 标签：android, android-alertdialog

使用警报对话框时出现一些错误。我使用 4.1 果冻豆 sdk。我想检查用户的互联网连接和 gps 是否可用。

错误行：

```
myAlertDialog = alertDialog.create(); 
```

我的控制功能：

```
public void kontrol(){

            LocationManager locManager = (LocationManager) getSystemService(LOCATION_SERVICE);  

            if (locManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){  

                if(isConn()){

                {   
                    startActivity(new Intent (MainActivity.this,GPSanasayfa.class));
                }
            }
                else{
                    AlertDialog.Builder alertDialog = new AlertDialog.Builder(MainActivity.this);

                    alertDialog.setMessage("Uygulamayı kullanabilmek için internet bağlantınızın aktif olması gerekmektedir");
                    alertDialog.setPositiveButton("Tamam", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int which) {
                          System.exit(0);
                       }
                    });

                    myAlertDialog = alertDialog.create(); //I get error this line
                    myAlertDialog.show();
                }

        }

            else{
                    startActivity(new Intent (MainActivity.this,NormalAnasayfa.class)); 
            }

        } 
```

错误日志：

```
09-12 09:06:28.685: E/AndroidRuntime(825): FATAL EXCEPTION: Thread-93
09-12 09:06:28.685: E/AndroidRuntime(825): java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
09-12 09:06:28.685: E/AndroidRuntime(825):  at android.os.Handler.<init>(Handler.java:121)
09-12 09:06:28.685: E/AndroidRuntime(825):  at android.app.Dialog.<init>(Dialog.java:107)
09-12 09:06:28.685: E/AndroidRuntime(825):  at android.app.AlertDialog.<init>(AlertDialog.java:114)
09-12 09:06:28.685: E/AndroidRuntime(825):  at android.app.AlertDialog$Builder.create(AlertDialog.java:913)
09-12 09:06:28.685: E/AndroidRuntime(825):  at com.minor.cepcadisiv3.MainActivity.kontrol(MainActivity.java:55)
09-12 09:06:28.685: E/AndroidRuntime(825):  at com.minor.cepcadisiv3.MainActivity$2.run(MainActivity.java:78)
09-12 09:06:28.685: E/AndroidRuntime(825):  at java.lang.Thread.run(Thread.java:856) 
```

我在 onCreate 中调用这个函数：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        pdialog = ProgressDialog.show(MainActivity.this, "Kontrol Ediliyor...", "İnternet ve GPS erişiminiz kontrol ediliyor.",true);

        new Thread(new Runnable() {  
            public void run() { 
                try {
                    Thread.sleep(2000);
                    kontrol(); 
                    pdialog.dismiss();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return;  
            }  
        }).start();  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:27:09.980

尝试这个..

```
AlertDialog myAlertDialog = new AlertDialog.Builder(MainActivity.this).create();
alertDialog.setMessage("Uygulamayı kullanabilmek için internet bağlantınızın aktif olması gerekmektedir");
alertDialog.setPositiveButton("Tamam", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        System.exit(0);
    }
});

myAlertDialog.show(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T11:13:58.000

我解决了这样的问题。

```
public Activity activity = MainActivity.this; 
```

这是函数的代码

```
activity.runOnUiThread(new Runnable() {
                    public void run() {
                       AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);
                builder.setMessage("Uygulamayı kullanabilmek için internet bağlantınızın aktif olması gerekmektedir")
                       .setCancelable(false)
                       .setPositiveButton("Tamam", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int id) {
                                System.exit(0);
                           }
                       });
                AlertDialog alert = builder.create();
                alert.show(); 
                    }
                }); 
```

# java - 提取引号之间的子字符串忽略 \"

> ID：12384897
> 
> 赞同：1
> 
> 时间：2012-09-12T09:18:18.743
> 
> 标签：java, regex

我的文件包含一些行，例如

```
"This is a string." = "This is a string's content."
" Another \" example \"" = " New example."
"My string
can have several lines." = "My string can have several lines." 
```

我需要提取子字符串：

```
This is a string.
This is a string's content.
 Another \" example \"
 New example.
My string
can have several lines.
My string can have several lines. 
```

这是我的代码：

```
String regex = "\".*?\"\\s*?=\\s*?\".*?\"";
Pattern pattern = Pattern.compile(regex,Pattern.DOTALL);
Matcher matcher = pattern.matcher(file); 
```

目前，我可以得到“=”的左右部分。但是当我的子字符串包含“\””时，我的正则表达式就不能正确地完成工作。

任何人都可以帮我写正确的正则表达式吗？我尝试了 \"^[\\"] 而不是 \"，但它没有用..

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T09:44:54.203

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile(
    "\"          # Match a quote\n" +
    "(           # Capture in group number 1:\n" +
    " (?:        # Match either...\n" +
    "  \\\\.     # an escaped character\n" +
    " |          # or\n" +
    "  [^\"\\\\] # any character except quotes or backslashes\n" +
    " )*         # Repeat as needed\n" +
    ")           # End of capturing group\n" +
    "\"          # Match a quote", 
    Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:39:20.427

很抱歉，我所在的位置无法对此进行测试，但可以

```
\".*?(?:[^\\]\")\\s*=\\s*\".*?(?:[^\\]\") 
```

工作？

我只是将其替换为 `\"` ， `(?:[^\\]\")` 因此如果它们之前的字符不再是 a，它们将不匹配`\`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-12T09:58:26.847

```
/"([^"\\]*(?:\\.[^"\\]*)*)"/ 
```

[来源](http://ad.hominem.org/log/2005/05/quoted_strings.php)。[另请参阅this previous question](https://stackoverflow.com/questions/249791/regex-for-quoted-string-with-escaping-quotes)。

# ssrs-2008 - ssrs 2008 以编程方式添加表格行

> ID：12384898
> 
> 赞同：0
> 
> 时间：2012-09-12T09:18:21.377
> 
> 标签：ssrs-2008, reporting-services

![在此处输入图像描述](../Images/a9ed545fe38063bd20c04fe32eef1701.png)

以上是我的报告的外观，黄色部分处于隐藏状态，仅当用户单击 [name] 上的 + 图标时才会显示。结果基本上是与过去 [X] - [TERM] 的百分比差异，即有一个下拉列表，[周、月、日、小时] 和一个数量的文本框。

因此选择 qty = 4 和 term = week 将根据父结果集日期范围和名称 ID 交付一个分布在 4 周内的结果集

我希望在此处填充行数，具体取决于用户设置的值，并且数据将来自数据集。

1.  是否可以动态添加更多子行（如绑定行数据）
2.  如果我的第一行是 ID 123 [名称]，是否可以将此值 [123] 发送到数据集，以便所有子行仅与 ID 为 123 的名称相关？

这是我在 SSRS 的第一次 bash，所以请不要半截答案，这只会导致更多关于给出的答案的问题 :-) 如果这是有道理的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:45:31.997

做了一些研究，以下解决了这个问题。

正常创建查询，创建子查询，将子查询添加到表中，将子查询参数设置为原始/父查询的值

唉，你有自动生成的列，用于基于原始数据的额外查询。

我发现这似乎是一个很好的资源，可以更好地解释事情：

[http://www.codeproject.com/Articles/195017/SSRS-Series-Part-II-Working-with-Subreports-DrillD](http://www.codeproject.com/Articles/195017/SSRS-Series-Part-II-Working-with-Subreports-DrillD)

# ruby-on-rails - Ruby fastcsv 导入俄语单词

> ID：12384900
> 
> 赞同：1
> 
> 时间：2012-09-12T09:18:27.167
> 
> 标签：ruby-on-rails, ruby, fastercsv

我正在将大 csv 文件导入到我的 rails 应用程序中，但我遇到了麻烦，在我的文件中我有一些俄语单词。我没有抛出 utf8 错误，我试着写：

```
CSV.foreach("/#{Rails.public_path}/uploads/hshatem2.csv", {:encoding => 'ISO-8859-15:UTF-8', :col_sep => ';', :row_sep => :auto, :headers => :first_row}) do | row | 
```

但是后来我也花了一部分时间（我认为是编码）。它也考虑了 5 个小时，如果不编码它会更快，但如何做到这一点？如何不读俄语单词？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T10:11:46.347

您应该查看[activerecord-import](https://github.com/zdennis/activerecord-import)。CSV 对于较小的 CSV 文件来说还不错，但会陷入更大的困境。这是有关导入较大文件的[另一个线程，可能会有所帮助。](https://stackoverflow.com/questions/1579567/import-csv-in-batches-of-lines-in-rails)

此外，您可能希望将加载和迭代分成两个步骤。因此，对文件执行 CSV.parse，然后遍历行。

# c# - c# 制表符分隔符中的 string.Split 函数

> ID：12384905
> 
> 赞同：11
> 
> 时间：2012-09-12T09:18:45.903
> 
> 标签：c#, string, split

我有一个读取分隔文件的函数。

分隔符通过字符串参数传递给函数。问题是，当我通过`"\t"`分隔符时，它最终会像这样`"\\t"`，因此，Split 无法找到这个序列。

我该如何解决这个问题？

```
private void ReadFromFile(string filename, string delimiter)
{

        StreamReader sr = new StreamReader(filename, Encoding.Default);
        string[] firstLine = sr.ReadLine().Split(t.ToCharArray());

        .......
 } 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-12T09:31:27.277

我猜你正在使用类似的东西

```
string sep = @"\t"; 
```

在这种情况下，sep 将保留`\\t`双反斜杠

利用`string sep = "\t"`

```
string content = "Hello\tWorld";
string sep = "\t";
string[] splitContent = content.Split(sep.ToCharArray()); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-12T09:22:03.243

为此使用单个引号，例如 Split('\t')，这样您将传递一个字符而不是字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-05T15:42:24.297

将参数值作为 \t (tab) 的十进制数传递并转换为 Char。

```
 int delimeter =9;

 // 9  ==> \t 
 // 10 ==> \n
 // 13 ==> \r

 char _delimeter = Convert.ToChar(delimeter);

 string[] rowData = fileContent.Split(_delimeter); 
```

快乐编程。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-12T09:31:57.930

如果您传入“\t”作为分隔符，则不会将其更改为“\t”。其他东西正在双重逃避您的标签。

```
 Blah("\t");
    private static void Blah(string s)
    {
        var chars = s.ToCharArray();
        Debug.Assert(chars.Length == 1);

        var parts = "blah\tblah\thello".Split(chars);            
        Debug.Assert(parts.Length == 3);
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-25T22:23:59.437

进行拆分的另一种方法是以这种方式将 TAB(\t) 替换为空格：

```
 if(linea.ToLower().Contains(@"\t"))
                linea = linea.Replace(@"\t", " ");
            retVal = linea.Trim().Split(' ')[1]; 
```

这段代码对我有用。

* * *

## 回答 #6

> 赞同：-5
> 
> 时间：2012-09-12T09:29:25.703

你尝试过：Environment.NewLine 吗？

# objective-c - 消除Objective-C ARC中的弱指针？慢得要命？

> ID：12384906
> 
> 赞同：0
> 
> 时间：2012-09-12T09:18:48.640
> 
> 标签：objective-c, automatic-ref-counting, weak-references

在下面的问题中，有人问到弱指针的 niling 如何在 Objective-C 中工作：

[ARC 的归零弱指针行为是如何实现的？](https://stackoverflow.com/questions/8859666/how-does-the-arcs-zeroing-weak-pointer-behavior-implemented)

答案指向这个似乎包含答案的文档：http: [//mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak-references-in-objective-c.html](http://mikeash.com/pyblog/friday-qa-2010-07-16-zeroing-weak-references-in-objective-c.html)

答案是将字典/哈希表从对象保存到一组弱引用。但是，不是每个释放都必须具有哈希表查找的结果吗？这不是一个相当严重的性能损失，尤其是在许多短期对象的情况下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:35:51.190

哈希表查找通常很快，但正如您正确指出的那样，在大量短期对象的情况下性能损失会增加。然而，这必须与哈希表的便利性相平衡，以保证弱引用是有效的

# xcode - 从 Xcode 中删除所有丢失的文件

> ID：12384907
> 
> 赞同：2
> 
> 时间：2012-09-12T09:18:54.353
> 
> 标签：xcode, file-management

有谁知道从 Xcode 项目中删除所有标记为丢失（红色）的文件的快速方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-12T09:23:56.767

按住 shift 并单击每个文件以选择它们，然后单击右键删除。希望这可以帮助。

# c++ - Windows 8 WinRT - C++ 或 C++ .NET？

> ID：12384909
> 
> 赞同：4
> 
> 时间：2012-09-12T09:19:02.170
> 
> 标签：c++, windows-8, microsoft-metro, windows-runtime, winrt-xaml

我听说 Windows 8 开发将允许 XAML/HTML5 + C++ 应用程序，但它是本机非托管 C++ 还是托管 C++（以前称为 C++ .NET）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T09:26:31.430

[*Windows 运行时 (WinRT)*](http://en.wikipedia.org/wiki/Windows_Runtime)本身是一个本机非托管框架，但可以从托管 .NET 语言以简单的方式调用（与其他本机库和臭名昭著的 .NET 相比`P/Invoke`）。

但除了从托管语言中使用它之外，它还可以从 C++/CX 中调用。这是标准 C++ 的*Microsoft*扩展，类似于 .NET 的 C++/CLI。但与后者相比，它完全是本机非托管 C++。但它支持一些 C++/CLI 的扩展，比如`^`用于“类托管”指针的运算符。但在底层，这些实际上并不是托管的垃圾回收指针，而是原生引用计数指针，类似于`std::shared_ptr`. 我认为它还支持类似 .NET 的属性和委托，以及部分类，以便与*WinRT*的*XAML*框架一起使用。

除此之外，您甚至可以使用所谓的*Windows 运行时 C++ 模板库 (WRL)从标准 C++ 使用**WinRT*，尽管据说它比使用 C++/CX 更麻烦，并且您可能无法使用所有功能，例如简单的*XAML*接口，不确定。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T09:20:43.670

它是您构建到 WinRT 组件中的非托管 C++。然后，您的 HTML5 或 Win8 .NET 应用程序可以引用这些组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:24:45.003

为了添加到 Slugart 的好答案，您可以为 WinRT 应用程序（和 Java 脚本）编写非托管 C++，他们也很可能微软会将这种将非托管 C++ 编写到 Windows Phone 8 的能力也（目前不可能） - 这将是对包括我自己在内的一些开发团队来说，这是一个重大问题。**

# mysql - MySQL 唯一键仅在另一个键包含特定值的情况下

> ID：12384910
> 
> 赞同：3
> 
> 时间：2012-09-12T09:19:04.323
> 
> 标签：mysql, mysql5

我有一个包含用户元数据的表。有4个字段...

```
`ID`,`meta_name`,`meta_value`,`user_id` 
```

我想将电子邮件存储在此表中。当然，这些必须是唯一的。但是，我也想在此表中存储其他数据，其中数据不需要是唯一的。有什么方法可以限制`'meta_value'`为唯一，只有`'meta_name'`等于'电子邮件'？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T09:21:35.587

通过 MySQL 的约束 - 不。

但是，您可以使用插入/更新触发器来验证数据的唯一性并禁止非法操作。

这是插入触发器的草稿（您可以在这里使用它：[http](http://sqlfiddle.com/#!2/5c9e3) ://sqlfiddle.com/#!2/5c9e3 ）：

```
DELIMITER //

CREATE TRIGGER VerifyInsert BEFORE INSERT ON YourTestTable
FOR EACH ROW
BEGIN

IF (SELECT COUNT(1) FROM YourTestTable
WHERE YourTestTable.meta_name = 'EMail' AND YourTestTable.meta_value = NEW.meta_value
AND NEW.meta_name = YourTestTable.meta_name) > 0 THEN

  SIGNAL SQLSTATE '45001' SET MESSAGE_TEXT = 'VerifyInsertFailed';

END IF;

END;

// 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-12T09:47:49.150

使用 MySQL 约束是不可能的，没有特殊技巧（例如`unique_helper`具有恒定值的冗余列`meta_name`=`email`并且彼此随机 +`UNIQUE`索引`unique_helper`+ `meta_value`）。

但是您可以在 innoDB 表中使用自定义 TRIGGER：（记住输入`yourTable`名称）

```
CREATE TRIGGER triggerName
BEFORE INSERT ON yourTable
FOR EACH ROW
BEGIN
  IF NEW.meta_name = 'email' AND EXISTS (SELECT 1 FROM yourTable WHERE meta_name='email' AND meta_value=NEW.meta_value)
  THEN
    SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Duplicate email';
  END IF;
END; 
```

# php - Symfony2 语法错误（在供应商文件中）

> ID：12384913
> 
> 赞同：1
> 
> 时间：2012-09-12T09:19:17.240
> 
> 标签：php, symfony, syntax, vendor

为了在我们的服务器上保持代码完整性，我们希望将 /vendor/* 目录保持在源代码控制之下，而不是每次我们推出到另一台服务器时都使用 composer 下载文件 - 即我们可以确定 /vendor/*文件是相同的。

我们对提交给源代码管理的所有文件运行语法检查器，并遇到以下错误：

```
文件 '/vendor/sensio/generator-bundle/Sensio/Bundle/GeneratorBundle/Resources/skeleton/bundle/Bundle.php' 未能通过 PHP 语法检查并出现以下错误：
PHP 解析错误：语法错误，意外的 '}'，在第 3 行的 /vendor/sensio/generator-bundle/Sensio/Bundle/GeneratorBundle/Resources/skeleton/bundle/Bundle.php 中需要 T_NS_SEPARATOR

```

此文件中的“错误”是故意的吗？任何帮助表示赞赏。文件内容如下：

```
<?php
namespace {{ namespace }};

use Symfony\Component\HttpKernel\Bundle\Bundle;

class {{ bundle }} extends Bundle
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T10:16:44.523

是的，这个文件中的“错误”是故意的，因为它并不是真正由 php “按原样”进行的。它是命令`app/console generate:bundle`用来生成包的模板。

So `{{ namespace }}` will be replaced by a real namespace and `{{ bundle }}` by the bundle name you choose when you generate the bundle.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T09:25:12.697

首先，您必须检查是否`php/bin`在您的`$PATH`.

`PATH=$PATH: /your/path/to/php/bin`
`export PATH`

除了确保 PHP 可以使用 CLI 执行（在 shell 中`exec`）。

其次检查您的服务器要求，即运行 Sympony2：

您可以通过在 Symfony 发行版中运行 web/config.php 轻松查看您的系统是否满足所有要求。由于 CLI 经常使用不同的 php.ini 配置文件，因此从命令行通过以下方式检查您的要求也是一个好主意：

`php app/check.php`

### 必需的：

1.  PHP 需要是 PHP 5.3.2 的最低版本
2.  需要启用 Sqlite3
3.  需要启用 JSON
4.  需要启用 ctype
5.  你的 PHP.ini 需要有 date.timezone 设置

### 选修的：

1.  您需要安装 PHP-XML 模块
2.  您需要至少有 2.6.21 版本的 libxml
3.  需要启用 PHP 标记器
4.  需要启用mbstring函数
5.  需要启用 iconv
6.  需要启用 POSIX（仅在 *nix 上）
7.  Intl 需要安装 ICU 4+
8.  APC 3.0.17+（或需要安装其他操作码缓存）
9.  PHP.ini 推荐设置
    9.1。short_open_tag = 关闭
    9.2。magic_quotes_gpc = 关闭
    9.3。register_globals = 关闭
    9.4。session.autostart = 关闭

如果你想使用 Doctrine，你需要安装 PDO。此外，您需要为要使用的数据库服务器安装 PDO 驱动程序。

# azure - 我们可以在 Azure 网站或虚拟机中运行 windowservice 或 EXE 吗？

> ID：12384917
> 
> 赞同：4
> 
> 时间：2012-09-12T09:19:43.313
> 
> 标签：azure, azure-web-app-service, azure-virtual-machine

我在 Azure 上体验过云服务/托管服务。然而，关于另一个项目，我在功能方面的选择感到困惑。

我有一个项目（2 层 asp.net 应用程序），我需要运行 windowservice 或 exe，它们每天都会执行一些功能（如获取数据），所以我的困惑如下

**关于 Windows Azure 网站**

如果我将移动到保留实例，我可以访问 RDP 吗？
我可以运行 windowservice/exe 吗？

**关于 Windows Azure 虚拟机**

和专用服务器一样吗？
我可以将 WASD 用作应用程序中的数据库吗？我想我可以运行任何 exe 并安装任何东西，但是 azure 会回收它，如果是，那么回收时发生了什么？
我可以在其中使用新窗口服务器 2012 (VHD) 吗？

Azure 网站和 VM 都处于**预览模式**，因此将其用作生产版本是否可靠？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-12T09:36:29.720

就 Windows Azure 网站 WAWS 而言：不，即使我知道您已保留，您也不能 RDP 进入实例。此外，您不能在 WAWS 上运行 Windows 服务/exe。如果这些是您的要求，那么您想要运行虚拟机或在云服务上使用一些启动任务。

使用 Windows Azure 虚拟机 (WAVM)，您可以在本地服务器上安装服务或几乎任何可以安装的东西。请注意，许可由您决定是否超出操作系统的许可（如果您使用的是 Microsoft 的 SQL 映像，则适用于 SQL）。是的，您可以从虚拟机使用/访问 Windows Azure SQL 数据库，但它不驻留在虚拟机上，它仍然是托管服务。您可以在 VM 上为 SQL Server 安装（或选择使用预制映像）；但是，正如您指出的那样，这可能会下降或被回收。目前它们不支持复制；但是，他们确实支持镜像来处理盒子不时出现的问题。

我想他们上个月底发布了 Windows Server 2012 作为 Windows Azure VM 的映像（从而使其可用）。

至于将这些系统用于生产用途，它们处于预览状态，因此我想说所有法律术语都会说您根本不应该将其用于生产。您的里程可能会有所不同，请注意，在预览版结束之前，除了您从论坛获得的以及堆栈溢出之外，这些功能没有官方支持；但是，如果您有真正令人信服的东西，您应该联系您当地的 Microsoft 代表，讨论您的需求。

# sql - firebird MON$STATEMENTS 插入、删除、更新

> ID：12384921
> 
> 赞同：4
> 
> 时间：2012-09-12T09:19:56.440
> 
> 标签：sql, firebird, performance

我使用 2.1 火鸟。

我看到了选择命令，但没有找到`insert`, `update`,`delete`时的命令`MON$STATE = 0`。为什么在这些运行后看不到表`insert`中`update`的`delete`命令？`MON$STATEMENTS`我在他们的时候看到了这些，`MON$STATE = 1`但在他们的时候我没有找到这些`MON$STATE = 0`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:52:21.273

**MON$STATE = 1**表示正在执行查询。**MON$STATE = 0**表示**SELECT**查询已执行并处于挂起状态。即等待客户端应用程序获取一行或到达记录集的末尾但查询尚未关闭。

INSERT、UPDATE、DELETE 查询没有**SUSPENDED**状态。他们要么正在运行，要么已经完成并消失了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-13T17:32:35.227

你可以`MON$STATE = 0`得到`INSERT`和`UPDATE`。`DELETE`当您的应用程序使用准备好的语句并且该语句未执行时，该`MON$STATEMENTS`查询的行也将具有`MON$STATE = 0`.

# asp.net - 无法使用前导 .. 退出顶级目录错误

> ID：12384924
> 
> 赞同：3
> 
> 时间：2012-09-12T09:20:07.580
> 
> 标签：asp.net

“不能使用前导 .. 退出顶级目录”我在我的项目中使用 Windows 身份验证，当我将表单设置为起始页时，出现上述错误。请建议

```
<%@ Page Title="" Language="C#" MasterPageFile="~/TravelsMaster.master" AutoEventWireup="true"
    CodeBehind="AgentMaster.aspx.cs" Inherits="TravelsManagementSystem.Forms.Master.AgentMst.AgentMaster" %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:23:55.093

这意味着您的网页所引用的内容位于页面上一级文件夹中，但您的页面已经在网站的根文件夹中，因此相对路径无效。从您的异常消息来看，似乎是图像控件导致了问题。

你必须有类似的东西： -

```
<asp:Image ImageUrl="..\foo.jpg" /> 
```

但是由于页面本身在网站的根文件夹中，它不能引用上一级的内容，这就是领导`..\`正在做的事情。

# facebook - 单击发送/取消按钮后禁用 Facebook 提要对话框的重定向功能

> ID：12384926
> 
> 赞同：1
> 
> 时间：2012-09-12T09:20:10.240
> 
> 标签：facebook, facebook-javascript-sdk, facebook-ui

以下是我在我的页面上实现 Facebook Feed Dialog 的方法：
**HTML 标记：**

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://ogp.me/ns/fb#" xmlns:og="http://opengraphprotocol.org/schema/"> 
```

**JavaScript：**

```
(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=***************"; 
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

FB.init({
    appId: '***************', 
    display: 'popup',
    status: true, 
    cookie: true, 
    xfbml: true, 
    oauth: true,
    method: 'send'
}); 
```

**发送按钮：**

```
<a onclick="javascript:twitter(this); return false;" href="https://www.facebook.com/dialog/feed?display=popup&app_id=***************&name=<name>&link=<link>&redirect_uri=<uri>">
    <div class="fb-container"></div>
</a> 
```

在这里我使用 Twitter 的弹出脚本，因为`display:popup`不起作用，不知道为什么。

然而弹出窗口出现，我发送提要。但后来我被重定向到`redirect_uri`. 我不想要这个。我只想在单击发送或取消按钮后关闭弹出窗口。我想检测一个按钮是否被点击然后尝试`window.close;`但没有成功，因为它是一个新窗口（弹出窗口）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T14:35:55.740

您当前正在使用对话框的“直接 URL”版本 - 并且始终会重定向。

如果您希望它出现在弹出窗口中，它会在使用后自行关闭，然后使用 FB.ui 调用对话框，如对话框文档中的示例所示：[https ://developers.facebook.com/docs/reference/dialogs /喂养/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# java - windowbuilder xwt design MalformedByteSequenceException：UTF-8 序列的无效字节

> ID：12384932
> 
> 赞同：1
> 
> 时间：2012-09-12T09:20:38.417
> 
> 标签：java, eclipse, windowbuilder, xwt

问题是：当我们试图在 .xwt 文件（例如标签文本）的 xml 属性中使用俄语字符时，WindowBuilder 设计视图崩溃并出现错误：

com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException：3 字节 UTF-8 序列的字节 2 无效。

看来，xml 解析器由于文件编码而崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:46:13.197

问题已经解决了。WindowBuilder 将 IOUtils.toInputStream(xwt_file_content) 传递给 XWTParser。XWTParser 需要 UTF8 编码流，但您的 Eclipse IDE 使用默认系统编码。将 JVM 参数 -Dfile.encoding=UTF8 添加到 eclipse.ini。

# utf-8 - sed：为什么点/星号不匹配 utf8 字符

> ID：12384933
> 
> 赞同：1
> 
> 时间：2012-09-12T09:20:43.043
> 
> 标签：utf-8, character-encoding, sed

我想了解为什么点/星号无法匹配 sed 命令中的 utf8 字符：

```
$ echo "开始删除 → 结束" | sed 's/remove.*//'
开始 → 结束

```

（预期结果应该是`begin` ）

是因为�字符（U+00E0à）用3个字节表示吗？

# gwt - 代理接口中的非 setter/getter 方法

> ID：12384936
> 
> 赞同：0
> 
> 时间：2012-09-12T09:20:48.523
> 
> 标签：gwt, requestfactory

有没有办法可以将非 setter/getter 方法放入我们定义的代理接口中？

例如..

```
@ProxyFor( value = requestFactory.example.gwt.server.domain.Person.class )
public interface PersonProxy extends EntityProxy
{
    String getLastName();

    String getFirstName();

    void setLastName( String nachname );

    void setFirstName( String vorname );

    public Long getId();

    public Integer getVersion();

    void setProperty(String name, Object value);

} 
```

上面示例中的最后一个方法抛出异常“仅允许设置器和获取器”。有什么办法可以解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:04:05.300

不能。代理只能有 getter 和 setter。

但是，您可以将方法添加到 a`RequestContext`以进行相同的服务器端调用：

```
InstanceRequest<PersonProxy> setProperty(String name, String value); 
```

用作：

```
context.setProperty("foo", "bar").using(personProxy); 
```

请注意，您不能使用`Object`任何一种（在您询问之前：不，您不能有重载，因此您必须在服务器端使用类似命名的方法添加`setPropertyString`、`setPropertyDate`、等）`setPropertyDouble`

# oracle - Oracle Apex 4.1 如何创建 LOV 和文本字段的字段

> ID：12384939
> 
> 赞同：2
> 
> 时间：2012-09-12T09:20:54.530
> 
> 标签：oracle, oracle-apex, lov

在 Oracle APEX 中设计新表单时，我遇到了一个交叉问题。我被要求创建可以由用户输入或下拉列表（弹出 LOV）填充的字段。有没有设计这种元素的简单方法？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-12T10:34:35.733

弹出式 LOV 可能是您正在寻找的。创建一个弹出 LOV 类型的项目，并将输入字段设置设置为“Enterable..”

# javascript - ADF：有条件地加载 javascript 资源

> ID：12384944
> 
> 赞同：1
> 
> 时间：2012-09-12T09:21:14.103
> 
> 标签：javascript, oracle-adf

我的页面上有以下行：

```
<af:resource type="javascript" source="JS/google.projected.overlay.js"/> 
```

我需要在特定条件下加载此资源。条件可以通过EL表达式计算。所以我尝试了：

```
<af:panelGroupLayout visible="false" rendered="#{Condition}" id="pgl1">
    <af:resource type="javascript" source="JS/google.projected.overlay.js"/>
</af:panelGroupLayout> 
```

但它不起作用。尽管有我的条件，脚本标记始终呈现在 head 部分的页面上。

有谁知道如何处理这个？有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:38:29.890

正如文档所说，您不能为此使用 af:resource 标签

> 该资源被添加到 af:document 组件中，以便在呈现文档时包含。

所以渲染的条件不会在这里发挥作用。您可以查看此[ADF JavaScript Partitioning](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&frm=1&source=web&cd=1&cad=rja&ved=0CCAQFjAA&url=http://adfproject.googlecode.com/files/ADF%2520JavaScript%2520Partitioning.pdf&ei=AGNQUNe6C6i-0QX6qoDYBg&usg=AFQjCNHQi0WAvIpJxQQLWEslzrzqBY75Uw&sig2=cC-5mYMf0lP8Vy6EO7CYng)或[A.9 Using JavaScript Library Partitioning](http://docs.oracle.com/cd/E25054_01/web.1111/b31973/ap_config.htm#BABCJIDJ)，或者您可以通过 bean 方法将脚本代码通过管道传输到页面中。如果您在 bean 方法中评估条件，您可以在需要时将脚本从 bean 方法添加到页面。为此，您可以使用 ExtendedRenderKitService 之类的

```
 // queue JavaScript into the page
    FacesContext context = FacesContext.getCurrentInstance();
    ExtendedRenderKitService erks =
    Service.getService(context.getRenderKit(), ExtendedRenderKitService.class);
    String script = "YOUR CODE HERE";
    erks.addScript(context, script); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:31:34.927

没有测试它，但是如果你将 render="#{Condition}" 更改为 render="${Condition}" 以进行急切的 EL 解析怎么办？

鉴于脚本一旦加载就被缓存在浏览器上，如果它是有条件的，它真的会有所不同吗？

坦率

# c# - Server.MapPath 问题

> ID：12384947
> 
> 赞同：-1
> 
> 时间：2012-09-12T09:21:23.747
> 
> 标签：c#, asp.net, server.mappath

我的问题是我似乎无法在我的 foreeach 循环中获取我的 mapPath 的实际文件。

```
foreach (DataRow item in objKat.getProd().Rows)
    {
        ddlImage.Items.Add(new ListItem(Server.MapPath("../img/produkter/"), item["fldId"].ToString()));
    } 
```

实际的问题是我不知道在 produkter/" 之后写什么。希望你们能帮助我。提前谢谢你！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:25:20.870

当您使用时，`MapPath`您的路径可能看起来像这样

```
 Server.MapPath("~/img/produkter/") 
```

阅读有关[ASP.NET Web 项目路径的更多信息](http://msdn.microsoft.com/en-us/library/ms178116%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:08:37.233

您需要转义字符串。如果你想去/somefolder/fileyoudesire.ext，它需要是//somefolder//fileyoudesire.ext

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:25:11.190

IS`Produkter`是一个文件夹`Subfolder`。`img`如果是，那么您的图像名称在`item["fldId"].ToString()`然后使用它..否则您`Relative`的图像路径应该在之后`Produkter`

# c# - 使用 fetch XML 从 CRM Dynamics 获取所有公司

> ID：12384952
> 
> 赞同：0
> 
> 时间：2012-09-12T09:21:31.030
> 
> 标签：c#, dynamics-crm, xrm

我正在运行以下代码来访问 CRM Dynamics DB。

```
using (OrganizationServiceProxy proxy 
  = new OrganizationServiceProxy(organizationUri, null, credentials, null))
{
  const String request = @"
    <fetch mapping ='logical'>
      <entity name = 'account'>
        <attribute name = 'name'/>
      </entity>
    </fetch>";

    FetchExpression expression = new FetchExpression(request);
    EntityCollection result = proxy.RetrieveMultiple(expression);
    ...
} 
```

我相当确定`organizationUrl`并且`credentials`是正确的。根据[这个演练](http://blogs.msdn.com/b/crminthefield/archive/2012/01/26/using-a-console-app-to-fire-a-crm-2011-workflow.aspx)，其他两个可以设置`null`为这个简单的案例。

问题是当我到达最后一行时，检索到`result`，我`Exception`告诉我：

> System.ArgumentNullException 未处理
> 
> Message=Value 不能为空。
> 
> 参数名称：CurrentServiceEndpoint

我忘记了什么，我该如何解决这个问题？

编辑：

> System.ArgumentNullException 未处理
> 
> H结果=-2147467261
> 
> Message=Value 不能为空。
> 
> 参数名称：CurrentServiceEndpoint
> 
> 源=Microsoft.Xrm.Sdk
> 
> 参数名称=当前服务端点
> 
> 堆栈跟踪：
> 
> 在 Microsoft.Xrm.Sdk.ClientExceptionHelper.ThrowIfNull（对象参数，字符串名称）
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceConfiguration`1.CreateChannelFactory(ClientCredentials clientCredentials)
> 
> 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceConfiguration.CreateChannelFactory（ClientCredentials clientCredentials）
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceProxy`1.get_ChannelFactory()
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceProxy`1.CreateNewServiceChannel()
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceProxy`1.ValidateAuthentication()
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceProxy`1.get_ServiceChannel()
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceContextInitializer `1.Initialize(ServiceProxy`1 代理）
> 
> 在 Microsoft.Xrm.Sdk.Client.ServiceContextInitializer `1..ctor(ServiceProxy`1 代理）
> 
> 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceContextInitializer..ctor（OrganizationServiceProxy 代理）
> 
> 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.RetrieveMultipleCore（QueryBase 查询）
> 
> 在 Microsoft.Xrm.Sdk.Client.OrganizationServiceProxy.RetrieveMultiple（QueryBase 查询）
> 
> 在 C:\Users\Viltersten\documents\Software\Projects\CRM_Server_Accessor\Program.cs: 60 中的 CRM_Server_Accessor.Program.Main(String[] args)
> 
> 在 System.AppDomain._nExecuteAssembly（RuntimeAssembly 程序集，字符串 [] 参数）
> 
> 在 System.AppDomain.ExecuteAssembly（字符串 assemblyFile，证据 assemblySecurity，String [] args）
> 
> 在 Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
> 
> 在 System.Threading.ThreadHelper.ThreadStart_Context（对象状态）
> 
> 在 System.Threading.ExecutionContext.RunInternal（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
> 
> 在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态，布尔值 preserveSyncCtx）
> 
> 在 System.Threading.ExecutionContext.Run（ExecutionContext executionContext，ContextCallback 回调，对象状态）
> 
> 在 System.Threading.ThreadHelper.ThreadStart()
> 
> 内部异常：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T12:20:30.503

在您的项目中添加一个`Service Reference`，指向您组织的组织服务。

网址将是这样的：`http://yourCRMserver/yourOrganization/XRMServices/2011/Organization.svc`

命名它，说，`OrganizationService`。

然后，在您的代码中，您将像这样进行：

```
using (OrganizationService.OrganizationServiceClient client = new OrganizationService.OrganizationServiceClient())
{
    const String request = "<Your FetchXml query goes here>";
    FetchExpression expression = new FetchExpression(request);
    EntityCollection result = client.RetrieveMultiple(expression);
    //...
} 
```

[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/hh675404.aspx)提供了一个很好的关于身份验证的示例代码，包括在线。

# json - 使用 json 创建 html 的最佳方式

> ID：12384960
> 
> 赞同：0
> 
> 时间：2012-09-12T09:21:55.073
> 
> 标签：json, asp.net-mvc-3, ajax-request

所以问题如下：我有一个返回json的动作方法。我需要做的是使用该json来构建一些基于它的html。例如，假设我收到了一份汽车清单。我想要做的是显示这样的列表，例如：

```
<div id="cars">
@foreach(var car in Model)
{
  <p>car.Name</p>
}
</div>

<div id="pageLinks">
  @Html.MyPageLinks(Model.PageInfo)
</div> 
```

目前这是一个视图，我所做的是在控制器中呈现该视图并将整个结果作为 json 结果返回（检查[此链接](https://stackoverflow.com/questions/483091/render-a-view-as-a-string)）。一切都很好，但是有一个主要缺点 - 操作方法不可测试，因为我必须模拟大量的东西才能使**FindPartialView**工作（目前我坚持这一点）。更糟糕的是，我将视图与操作结合在一起，即更改视图也会损害单元测试，这是不可接受的。

另一方面，使用 javascript 生成所有 html 似乎是一种非常糟糕的方法，因为它将包含很多原始的 javascript 和 jquery（请记住，即使在我的简化示例中也会有很多 js，我会放弃测试 MyPageLinks 的选项，因为一切都将是 js）。

我需要/想要做的是只返回 json （只返回数据对象，没有 html），并且在视图中有类似模板的东西，一旦返回 json 就会应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:25:20.643

只需从控制器操作返回 HTML，而不是 JSON。因此，将您显示的视图片段放入包含在 div 中的部分内容中：

```
<div id="paginatedCars">
    @Html.Partial("Cars")
</div> 
```

然后让您正在调用的控制器操作返回此更新的部分。

# actionscript-3 - Youtube AS3 API 内存泄漏

> ID：12384963
> 
> 赞同：3
> 
> 时间：2012-09-12T09:22:04.417
> 
> 标签：actionscript-3, memory-leaks, youtube-api

使用 AS3 youtube 播放器时出现内存泄漏。所有侦听器都被删除。请帮助寻找解决方案。

```
public class YoutubeStreamTest extends Sprite
{
    private var _loader : Loader;
    private var _player : Object;
    private var _spr : Sprite;

    // constructor -----------------------------------------
    public function YoutubeStreamTest()
    {
        addEventListener(Event.ADDED_TO_STAGE, hAddedToStage);
    }

    // methods --------------------------------------------- 
```

开始加载视频

```
 private function startVideo() : void {
        _loader = new Loader();
        _loader.contentLoaderInfo.addEventListener(Event.INIT, hLoaderInit, false, 0, true);
        _loader.load(new URLRequest("http://www.youtube.com/v/FooZ5x-OX0E?version=3&controls=0&showinfo=0&end=3")); //yPrHf776eWA = the vid u want t play
    }

    // handlers -------------------------------------------- 
```

等待视频准备好

```
 private function hLoaderInit(event : Event) : void {
        _loader.contentLoaderInfo.removeEventListener(Event.INIT, hLoaderInit);
        _player = _loader.content;
        _player.addEventListener("onReady", hPlayerReady, false, 0, true);
        addChild(_player as DisplayObject);
        _player.x = 0;
        _player.y = 20;

        _spr = new Sprite();
        _spr.graphics.beginFill(0x0, .1);
        _spr.graphics.drawRect(0, 0, 500, 500);
        _spr.graphics.endFill();
        addChild(_spr);
    } 
```

准备就绪 - 开始播放

```
 private function hPlayerReady(event : Event) : void 
    {
        _player.removeEventListener("onReady", hPlayerReady);
        _player.setSize(440, 260);
        _player.playVideo();
    }

    private function hAddedToStage(event : Event) : void {
        Security.allowInsecureDomain("*");
        Security.allowDomain("*");
        startVideo();

        addEventListener(MouseEvent.CLICK, hClick);
    } 
```

单击加载新的视频实例

```
 private function hClick(event : Event) : void {
        removeEventListener(Event.ADDED_TO_STAGE, hAddedToStage);
        if(_player) {
            removeChild(_player as DisplayObject);
            _player.destroy();
            removeChild(_spr);
            _loader.unloadAndStop(true);
        }
        startVideo();
    }

    // getsetters ------------------------------------------

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T10:30:10.823

点击监听器呢，并添加到舞台监听器？后者在点击处理程序中未注册 - 错误？

此外，您可能希望在注册事件时使用以下内容（弱侦听器）

addEventListener（事件类型，处理程序，useCapture，优先级，**真**）；

例如

```
addEventListener(MouseEvent.CLICK, onClicked, false, 0, true); 
```

此致

# sql-server - 如何在 SQL Azure 中设置外键？

> ID：12384966
> 
> 赞同：4
> 
> 时间：2012-09-12T09:22:14.103
> 
> 标签：sql-server, azure, foreign-keys, azure-sql-database

如何在 SQL Azure 中设置外键？

我现在在 Azure 系统上有一个数据库。

数据库中的表有一个预期用途，即有一个主要的、逻辑集中的表，然后有许多表，每个表都描述了主表中的某些列。例如，如果我在主表中有一个年龄分类列，我可能有一个单独的表，其中列出了年龄分类的一些类别（作为字符串）和一些相关的索引。然后年龄分类表中的索引将用作主表中的参考。

这就是外键吗？SQL Azure 中是否有某种方法可以在这些索引之间建立关联？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T09:40:15.110

是的 - 这就是外键。

也许最简单的方法是在 SSMS 查询窗口中使用 t-sql

```
alter table MyTable
add constraint MyTable_MyColumn_FK FOREIGN KEY ( MyColumn ) REFERENCES MyOtherTable(MyOtherIDColumn) 
```

（来自：[如何在 SQL Server 中创建外键？](https://stackoverflow.com/questions/48772/how-do-i-create-a-foreign-key-in-sql-server)）

SQL Azure 在某些方面与其他 SQL Server 不同，但在这个简单的命令方面却不同。

我发现[SQL Azure 迁移向导](http://sqlazuremw.codeplex.com/) 对于将“普通”sql 转换为 Azure SQL 非常有用。

# android - Android 图像动画 - 如何为一系列图像制作动画。

> ID：12384967
> 
> 赞同：0
> 
> 时间：2012-09-12T09:22:16.707
> 
> 标签：android, android-animation

所以我基本上可以使用 ObjectAnimation 和 AnimationSet 类为 ImageView 设置动画。但是，现在我想做一些更复杂的事情。

假设我有一张基本的脸、脸、嘴巴和眼睛，原本都是一个FrameLayout中的ImageView。我希望能够为整个面部和单个项目设置动画 - 例如倾斜头部并抬起眉毛。我发现我无法将动画应用到整个 FrameLayout。

请有人能指出我这项任务的正确方法的方向吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:40:23.857

您只需应用`image1.startAnimation(animOne);` 并应用动画侦听器：在 onAnimationEnd 方法中，您只需再启动一个图像动画。

```
AnimationListener  smallAnimOrderOne = new AnimationListener()
    {

        public void onAnimationEnd(Animation animation) {
            // TODO Auto-generated method stub
            imageSmallAnim.startAnimation(smallOrderTwo);
            //System.out.println("me in end");

        }

        public void onAnimationRepeat(Animation animation) {
            // TODO Auto-generated method stub
            //System.out.println("me in repesat");
        }

        public void onAnimationStart(Animation animation) {
            // TODO Auto-generated method stub

        }

    }; 
```

# java - Java中没有空格的字符串比较

> ID：12384969
> 
> 赞同：2
> 
> 时间：2012-09-12T09:22:33.347
> 
> 标签：java, regex, string, stringbuilder, string-comparison

伙计们，

我对 Java 中的 String 比较（中间有空格）有点怀疑。

**用例：-**
考虑以下 Solr 查询字符串：-

```
 String query = ".....&ansDt:[* TO *]...."; 
```

ansDt 的有效格式为：-

1.  `ansDt : [* TO *]`
2.  `ansDt : [someDate TO *]`
3.  `ansDt : [* TO someDate]`
4.  `ansDt : [someDate TO otherDate]`

我有两个疑问：-

*   现在，我需要一种方法来检查查询字符串的唯一`4th ansDt`格式。如果遇到其他格式（简而言之，如果`*`在字段中遇到任何模式`ansDt`），我需要在控制台上抛出一些消息。

*   `ansDt`此外，无论& `:`&之间的空格如何，我都需要检查第一种、第二种和第三种情况`[`。即`ansDt: [* TO *]`, `ansDt :[* TO *]`,`ansDt : [ * TO *]`等都被认为是相同的

我不能使用`String.trim( )`，因为它只会删除字符串的前导和结尾空格

如何使用 Java 字符串比较检查？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T10:47:48.957

请试试这个正则表达式：

```
String query = ".....&ansDt:[* TO *]....";

String pattern = ".*ansDt[\\ ]*[:][\\ ]*[\\[].*[\\ ]+TO[\\ ]+.*[\\]].*"; 

boolean test = query.matches(pattern); 
```

附加信息：

```
. matches any character

.* matches any amount of characters

[\ ] matches space

[\ ]+ matches one or more spaces, used between "TO"

[\ ]* matches any amount of spaces, used between ":"

[\[] and [\]] matches "[" and "]" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:46:44.113

正则表达式是要走的路。但是为了快速修复，您可以尝试

```
 String query = ".....&ansDt : [ * TO *]...."; 
    int indexOfansDt = query.indexOf("ansDt");
    int indexOfBeginBracket = query.indexOf("[",indexOfansDt);
    int indexOfEndBracket = query.indexOf("]",indexOfBeginBracket);
    String yourString = query.substring(indexOfBeginBracket, indexOfEndBracket+1);
    System.out.println(yourString); 
```

检查`yourString`，`indexOf("*")`如果不是`-1`您的格式是 1,2 或 3。但是有很多错误情况，您必须检查 NPE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:25:15.993

您需要比简单的正则表达式更复杂的东西。您已经编写了相当于四行语法的内容。您应该采用解析器生成器的方法：对其进行标记，然后执行规则以查看标记是否与您的语法匹配。

如果你能忍受解析器生成器的大锤，我会推荐 ANTLR。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:25:28.297

这应该这样做（对于字符串`s1`和`s2`）：

```
s1.replace(" ", "").equals(s2.replace(" "), "")) 
```

# android - Android FragmentStatePagerAdapter，如何标记片段以便以后找到它

> ID：12384971
> 
> 赞同：23
> 
> 时间：2012-09-12T09:22:42.010
> 
> 标签：android, android-viewpager

使用时，`FragmentStatePageAdapter`我得到这样的片段：

```
 @Override
    public Fragment getItem(int position) {
        return new SuperCoolFragment();
    } 
```

但是，稍后在我的代码中，我需要找到这个片段来设置属性。在我使用片段的应用程序的其他一些部分中，我基本上标记它们并使用它们查找它们，`findFragmentByTag(TAG)`但现在我不知道该怎么做。

如何使用 找到片段`FragmentStatePageAdapter`？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-13T08:00:35.950

*** 编辑 ***

正如@ElliotM 指出的那样，有一个更好的解决方案。无需更改适配器中的任何内容，只需获取片段：

```
Fragment myFragment = (Fragment) adapter.instantiateItem(viewPager, viewPager.getCurrentItem()); 
```

*** 旧解决方案 ***

最好的选择是这里的第二种解决方案：http: [//tamsler.blogspot.nl/2011/11/android-viewpager-and-fragments-part-ii.html](http://tamsler.blogspot.nl/2011/11/android-viewpager-and-fragments-part-ii.html)

简而言之：您跟踪所有“活动”片段页面。在这种情况下，您在 FragmentStatePagerAdapter 中跟踪片段页面，ViewPager..

```
public Fragment getItem(int index) {
    Fragment myFragment = MyFragment.newInstance();
    mPageReferenceMap.put(index, myFragment);
    return myFragment;
} 
```

为了避免保留对“非活动”片段页面的引用，我们需要实现 FragmentStatePagerAdapter 的 destroyItem(...) 方法：

```
public void destroyItem(View container, int position, Object object) {
    super.destroyItem(container, position, object);
    mPageReferenceMap.remove(position);
} 
```

...当您需要访问当前可见页面时，您可以调用：

```
int index = mViewPager.getCurrentItem();
MyAdapter adapter = ((MyAdapter)mViewPager.getAdapter());
MyFragment fragment = adapter.getFragment(index); 
```

... MyAdapter 的 getFragment(int) 方法如下所示：

```
public MyFragment getFragment(int key) {
    return mPageReferenceMap.get(key);
} 
```

- - 编辑：

还要在您的适配器中添加它，以便在方向更改后：

```
/**
 * After an orientation change, the fragments are saved in the adapter, and
 * I don't want to double save them: I will retrieve them and put them in my
 * list again here.
 */
@Override
public Object instantiateItem(ViewGroup container, int position) {
    MyFragment fragment = (MyFragment) super.instantiateItem(container,
            position);
    mPageReferenceMap.put(position, fragment);
    return fragment;
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-04T16:20:46.677

我找到了另一种方法，不确定使用它是否有任何问题，对我来说似乎没问题。

我正在检查**FragmentStatePageAdapter**的代码，我看到了这个方法：

```
@Override
52     public Object More ...instantiateItem(View container, int position) {
53         // If we already have this item instantiated, there is nothing
54         // to do.  This can happen when we are restoring the entire pager
55         // from its saved state, where the fragment manager has already
56         // taken care of restoring the fragments we previously had instantiated.
57         if (mFragments.size() > position) {
58             Fragment f = mFragments.get(position);
59             if (f != null) {
60                 return f;
61             }
62         }
63 
64         if (mCurTransaction == null) {
65             mCurTransaction = mFragmentManager.beginTransaction();
66         }
67 
68         Fragment fragment = getItem(position);
69         if (DEBUG) Log.v(TAG, "Adding item #" + position + ": f=" + fragment);
70         if (mSavedState.size() > position) {
71             Fragment.SavedState fss = mSavedState.get(position);
72             if (fss != null) {
73                 fragment.setInitialSavedState(fss);
74             }
75         }
76         while (mFragments.size() <= position) {
77             mFragments.add(null);
78         }
79         fragment.setMenuVisibility(false);
80         mFragments.set(position, fragment);
81         mCurTransaction.add(container.getId(), fragment);
82 
83         return fragment;
84     } 
```

您可以使用此方法来获取已为该特定位置设置的片段。所以如果你想在位置 1 获得 Fragment，你只需要调用：

```
myFragmentStatePageAdpater.instantiateItem(null, 1) 
```

希望有帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-15T09:33:40.063

我通过`getItemTag(int position)`向`FragmentStatePagerAdapter`. 如果其他人想走这条路，[这里](https://gist.github.com/chrislacy/5998644)有一个更新文件的插入版本。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-18T19:20:08.193

**如果您的活动被重新创建，那么在您的 getItem() 方法中将片段存储到 HashMap 的解决方案将不起作用！**

问题是，FragmentStatePagerAdapter 的默认实现直接从 FragmentManager 恢复片段，而不调用 getItem() 方法。这意味着您将永远没有机会存储对您的片段的引用。

有关详细信息，请参阅源代码： [FragmentStatePagerAdapter#restoreState](http://grepcode.com/file/repo1.maven.org/maven2/com.google.android/support-v4/r6/android/support/v4/app/FragmentStatePagerAdapter.java#FragmentStatePagerAdapter.restoreState%28android.os.Parcelable,java.lang.ClassLoader%29)。

这基本上意味着获取片段引用的唯一方法是借助反射。如果您使用支持库，这是*相对***安全*的 **。

就是这样：

```
 @SuppressWarnings("unchecked")
    public Fragment getFragment(int position) {
        try {
            Field f = FragmentStatePagerAdapter.class.getDeclaredField("mFragments");
            f.setAccessible(true);
            ArrayList<Fragment> fragments = (ArrayList<Fragment>) f.get(this);
            if (fragments.size() > position) {
                return fragments.get(position);
            }
            return null;
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    } 
```

*相对** 意味着它不像在框架类上使用反射那么危险。支持类已编译到您的应用程序中，此代码无法在您的设备上运行，但会在其他设备上崩溃。您仍然可以通过将支持库更新到较新版本来破坏此解决方案

*安全*** 使用反射从来都不安全；但是，当您使用的库存在设计缺陷时，您必须采用这种方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-10T15:22:27.313

使用`FragmentStateAdapter`设置自定义标签并查找它非常简单。这是`FragmentStateAdapter`标记其片段的方式：

```
mFragmentManager.beginTransaction()
    .add(fragment, "f" + holder.getItemId())
    .setMaxLifecycle(fragment, STARTED)
    .commitNow(); 
```

如您所见，它是静态字符串`"f"`和`getItemId()`. 在您的适配器中覆盖之后`fun getItemId(position: Int): Long`，查找特定片段应该很简单。例如

```
override fun getItemId(position: Int): Long {
    return if(position == 0) {
            "my_first_fragment"
    }else "my_second_fragment"
} 
```

我们的第一个片段的标签将是“fmy_first_fragment”并找到`childFragmentManager.findFragmentByTag("fmy_first_fragment") as? MyFirstFragment`

**每当您寻找片段时都要小心，您必须使用与创建片段相同的 FragmentManager**。因此，我建议使用 FragmentManager 和 LifeCycle 作为构造函数来创建适配器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-11T12:57:46.627

正如@Lancelot 提到的，您可以调用并将结果转换为您的 SuperCoolFragment：

```
SuperCoolFragment frag = (SuperCoolFragment) yourFragmentStatePageAdpater.instantiateItem(null, position); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-30T20:48:31.673

我尝试了弗兰克的回答，它建议从其中链接的教程中使用第二种方法，由于某种原因，在将方法 getFragment() 添加到我的 ViewPagerAdapter 之后，我无法通过 mViewPager.getAdapter 访问它。**getFragment** () 就好像它不存在一样，所以我将 mPageReferenceMap 声明从 ViewPagerAdapter 移动到封闭类，以便从封闭类的任何点轻松访问它（在我的情况下，它是 MainActivity 来自其他片段的回调方法）最后使得在片段之间传递数据成为可能。感谢 Frank，如果您喜欢我在访问自定义 getFragment 方法时遇到问题，请随时实施我的夹具。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-08-21T10:35:14.883

另一种解决方案是复制粘贴[FragmentStatePagerAdapter](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/app/FragmentStatePagerAdapter.java)的源代码并添加一个`getFragment`方法：

```
public Fragment getFragment(int position) {
    if (position >= mFragments.size()) {
        return null;
    }
    return mFragments.get(position);
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-10-08T08:44:10.917

覆盖`setPrimaryItem`，并使用该位置，它将是正确的页面索引：

```
@Override
public void setPrimaryItem(ViewGroup container, int position, Object object) {
        super.setPrimaryItem(container,position,object);
        if (position == 1) {
            currentPageIndex=cameraFragment.pageIndex;
} 
```

* * *

## 回答 #10

> 赞同：-10
> 
> 时间：2012-09-12T09:44:12.080

创建一个持有者来保存新的 SuperCoolFragment 对象。然后标记并返回持有者对象。

```
@Override
public Fragment getItem(int position) {
    SuperCoolFragment superCoolFragment = new SuperCoolFragment();
    superCoolFragment.setTag(YOUR_TAG);
    return superCoolFragment;
} 
```

# django - Django：管理内联表单每个实例的初始数据

> ID：12384973
> 
> 赞同：22
> 
> 时间：2012-09-12T09:22:52.617
> 
> 标签：django, django-admin

我已经阅读了很多，但我似乎无法找到解决方案。

我正在用 Django 编写应用程序，但我仍在编写管理端。

我有一个名为“环境”的模型和一个名为“服务器”的模型，服务器和环境之间存在外键关系，例如给定的环境有多个服务器。

在管理界面中修改环境的“添加”表单时，我使用内联表单来可视化将与环境关联的服务器列表，如下所示：

```
class ServerInline(admin.TabularInline):
    model = Server
    extra = 39

class EnvironmentAdmin(admin.ModelAdmin):
    inlines = [ServerInline] 
```

很简单吧？

我想做的是使用默认值预填充服务器内联表单，我已经能够使用相同的值预填充它们：

```
class ServerInlineAdminForm(forms.ModelForm):
    class Meta:
        model = Server

    def __init__(self, *args, **kwargs):
        super(ServerInlineAdminForm, self).__init__(*args, **kwargs)
        self.initial['name']='Testing'

class ServerInline(admin.TabularInline):
    form = ServerInlineAdminForm
    model = Server
    extra = 39

class EnvironmentAdmin(admin.ModelAdmin):
    inlines = [ServerInline] 
```

但这不是我想要的，我希望能够用列表中的 39 个不同值初始化 39 个服务器表单实例。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-06-27T23:41:20.407

这是我的实现，[感谢 Steven 的想法](https://stackoverflow.com/a/12392201/236195)。

全部在**admin.py**中：

```
class SecondaryModelInline(admin.ModelAdmin):
    model = SecondaryModel
    formset = SecondaryModelInlineFormSet

    def get_formset(self, request, obj=None, **kwargs):
        formset = super(SecondaryModelInline, self).get_formset(request, obj, **kwargs)
        formset.request = request
        return formset

    def get_extra(self, request, obj=None, **kwargs):
        extra = super(SecondaryModelInline, self).get_extra(request, obj, **kwargs)
        something = request.GET.get('something', None)
        if something:
            extra = ... figure out how much initial forms there are, from the request ...
        return extra 
```

之前的某个地方，也在**admin.py**中，这个：

```
class SecondaryModelInlineFormSet(forms.models.BaseInlineFormSet):
    model = SecondaryModel

    def __init__(self, *args, **kwargs):
        super(SecondaryModelInlineFormSet, self).__init__(*args, **kwargs)            
        if self.request.GET.get('something', None):
            # build your list using self.request
            self.initial=[{'field_a': 'A', ...}, {}... ] 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-12T16:01:59.887

不确定您为什么要这样做，但也许您可以创建一个模型表单集：

```
from django.forms.models import BaseModelFormSet
class ServerFormSet(BaseModelFormSet):
    def __init__(self, *args, **kwargs):
        super(ServerFormSet, self).__init__(*args, **kwargs)
        self.initial = [{ 'name': 's1', }, {'name': 's2'},] # supply your list here 
```

并将其设置为您的内联：

```
class ServerInline(admin.TabularInline):
    form = ServerInlineAdminForm
    model = Server
    extra = 39
    formset = ServerFormSet 
```

我还没有尝试过。

请参阅： [https ://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.formset](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.formset)

[https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#providing-initial-values](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#providing-initial-values)

[https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-initial-data-with-a-formset](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-initial-data-with-a-formset)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-07T11:42:35.507

我意识到我自己解决了这个问题，并没有在这里回答。

我最终所做的是重写 Environment 类 save_model 方法，而不是使用管理表单。

我会解释得更好一点：

我有一个环境对象和一个服务器对象。一个环境有许多服务器，它们通过服务器对象的外键链接到它。我的目标是在环境创建过程中填充与环境关联的服务器。为了能够做到这一点，我所做的是覆盖 Environment 对象的 save_model 方法，执行 obj.save() 和 AFTERWARDS 创建指向该环境的 Server 对象，然后再次 obj.save()。为什么后来？因为我无法将新创建的服务器与尚不存在的环境相关联。让我知道是否有人对他的实际代码感兴趣。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T15:54:02.360

我还没有尝试过，但是由于生成的额外表单是必不可少的 Django Formsets，因此您需要做的是将初始数据绑定到[此处](https://docs.djangoproject.com/en/dev/topics/forms/formsets/#using-initial-data-with-a-formset)的文档中解释的表单集。

我刚刚阅读了文档，看起来您可以[在 inlineadmin 中定义自己的表单集](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.formset)，然后如上所述，使用列表中的数据预填充表单集。我认为您可以通过将预填充代码放在类的**init**方法中来实现这一点。

我知道这不是一个非常详尽的解释，但我发现这个问题很有趣，并查阅了文档并认为也许我可以为您指明下一步要尝试的正确方向。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-18T12:53:31.617

好吧，我想评论frnhr的答案，但没有足够的声誉，所以：

答案对我有用，我只需要遍历表单集中的表单并为每个表单设置初始数据：

```
class SecondaryModelInlineFormSet(forms.models.BaseInlineFormSet):
    model = SecondaryModel

    def __init__(self, *args, **kwargs):
        super(SecondaryModelInlineFormSet, self).__init__(*args, **kwargs)            
        if self.request.GET.get('something', None):
            # build your list using self.request
            for form in self:
                form.initial = {'field_a':'A',...} #This is what I changed
            self.initial=[{'field_a': 'A', ...}, {}... ] 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-07T07:38:29.320

`user`在从`request.user`for`StackedInline`和预填充的情况下，它对我有用`TabularInline`。

```
def save_formset(self, request, form, formset, change):
    for form in formset.forms:
        form.instance.user = request.user
    formset.save() 
```

# ruby - Ubuntu 12.04 上 RVM 红宝石的 OpenSSL 错误

> ID：12384974
> 
> 赞同：0
> 
> 时间：2012-09-12T09:23:02.547
> 
> 标签：ruby, openssl, rvm, ubuntu-12.04

我的 Ubuntu 12.04 机器上的 OpenSSL 一直存在问题。我正在使用 RVM，并且我已经尝试[了官方解决方案](https://rvm.io/packages/openssl/)，但无济于事。

向*某些*主机发出的请求会因 SSL 失败而失败（例如，`bitbucket.org`）。例如，机械化抛出这个：

`OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed from /home/avo/.rvm/gems/ruby-1.9.3-p194/gems/net-http-persistent-2.7/`

有人有任何提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T15:50:44.173

该问题在 irc #rvm 上得到解决 - 域名[https://bitbucket.org](https://bitbucket.org)与[https://bitbucket.com](https://bitbucket.com) - 第二个没有适当的证书。

# c# - 从原始心电信号中提取心率的算法

> ID：12384978
> 
> 赞同：4
> 
> 时间：2012-09-12T09:23:20.620
> 
> 标签：c#, c++, algorithm, signal-processing

从原始心电信号中提取心率的算法

我有一个以 BDF 格式记录的原始 ECG 信号（也可以使其成为 EDF 或 txt）。现在我必须离线分析它并提取热耗率。

**这种算法是否有任何 C# 或 C++ 实现？或者至少是伪代码算法。**

我自己从头开始做的原因是我想把它整合到一个在线分析系统中。

我找到了以下链接： 低通滤波器：[http](http://en.wikipedia.org/wiki/Low-pass_filter)
://en.wikipedia.org/wiki/Low-pass_filter 高通滤波器：[http ://en.wikipedia.org/wiki/High-pass_filter](http://en.wikipedia.org/wiki/High-pass_filter)

...过滤初始数据可能需要它。

还有一个为硬件模块创建的系统，这可能是一个不错的开始： http: [//www.codeproject.com/Articles/4353/ECG-recording-storing-filtering-and-recognition](http://www.codeproject.com/Articles/4353/ECG-recording-storing-filtering-and-recognition)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T14:04:24.207

“Pan, Tompkins”算法实现起来相当简单，并且产生了合理的结果。

据我记得，一般的想法是这样的：

特征 ECG 形状称为 QRS 波群，其中 ECG 中的主要尖峰（又称“R 尖峰”）具有独特的形状，这是大多数人关注的。R 尖峰通过“匹配滤波器”（具有类似于尖峰的脉冲响应的滤波器）增强。我认为后来信号通过了微分器。然后在最高峰之后进行了简单的 3 点搜索。我还记得，该算法有一个“空白期”，没有执行 R-spike 搜索，因为心脏只能跳得这么快......

看看这个：[ECG QRS 检测 (PDF)](http://www.physik.uni-freiburg.de/~severin/ECG_QRS_Detection.pdf)

# .net - 重命名程序集时“找到的程序集的清单定义与程序集引用不匹配”

> ID：12384979
> 
> 赞同：1
> 
> 时间：2012-09-12T09:23:21.833
> 
> 标签：.net, manifest, assemblybinding

我有一个包含以下内容的 MyApp.exe.config：

```
<section name="keys" type="MyApp.KeysSection, MyApp" /> 
```

这按预期工作。但是，当我将 MyApp.exe 重命名为 MyApp.renamed.exe，并将配置文件重命名为 MyApp.renamed.exe.config 时，出现异常：“无法加载文件或程序集 'MyApp' 或其依赖项之一。系统找不到指定的文件”。

好的，所以这一定是因为配置文件仍在引用 MyApp 程序集。所以我将其更新为：

```
<section name="keys" type="MyApp.KeysSection, MyApp.renamed" /> 
```

当我运行应用程序时，我得到一个新的异常：“找到的程序集的清单定义与程序集引用不匹配”。

我了解上述消息的含义，但这是否意味着我无法重命名我的程序集而不生成新的清单文件？理想情况下，我希望能够重命名我的程序集，并让它仍然工作。这样做的原因是因为应用程序有各种“风格”，我想使用文件名，例如 MyApp.Flavour1.exe、MyApp.Flavour2.exe 等，但是如果不为每种风格生成不同的清单和配置文件，这将无法工作, 原来如此。

我要问的是，是否有一种方法可以创建我的程序集，以便重命名文件不会导致它抛出此异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T11:35:28.840

不幸的是，您不能以这种方式重命名程序集。有关详细信息，请参阅[加载重命名的 C# 程序集会引发 FileNotFoundException](https://stackoverflow.com/questions/5640746/loading-renamed-c-sharp-assembly-throws-filenotfoundexception)。

相反，您可能希望创建包含相同或相似文件的不同项目，或者将公用文件移动到单独的程序集，并让不同的“风格”程序集引用该公共程序集。

# css - 背景大小的变化取决于菜单的数量

> ID：12384980
> 
> 赞同：1
> 
> 时间：2012-09-12T09:23:23.523
> 
> 标签：css, menu

如何更改背景大小取决于菜单的数量。有没有不使用 JavaScript、jQuery 的方法？我更喜欢不使用 JavaScript、jQuery，但可以使用 JavaScript、jQuery。请参阅下图进行说明。谢谢！

[http://img138.imageshack.us/img138/6076/17049838.png](http://img138.imageshack.us/img138/6076/17049838.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:37:08.580

有一个带有浮动集的容器 div

> 向左飘浮

和带有浮动集的子 div

> 向左飘浮

将使容器 div 自动收缩/扩展为子 div 的大小。这是一个显示此解决方案的小提琴 [http://jsfiddle.net/v9EVQ/](http://jsfiddle.net/v9EVQ/)

如果这对您不起作用，请显示您用于菜单的代码。

编辑：

如果您不想要 col 的宽度，您可以删除宽度，列将自动调整为内容的宽度

[http://jsfiddle.net/v9EVQ/3/](http://jsfiddle.net/v9EVQ/3/)

在原始示例中，col 将包含每一列数据，因此第一个 col 将包含 Action/Adventure、Children/Family、Comedy 等。第二个 col 将包含 Horror/Thriller、Factual、Music/Dance 等

# mysql - 如何在 mysql 中为列在 5 分钟内聚合数据

> ID：12384981
> 
> 赞同：0
> 
> 时间：2012-09-12T09:23:33.570
> 
> 标签：mysql

我在mysql中有一个这样的表：

![在此处输入图像描述](../Images/df56066e2754b639ee5d88901fceac6f.png)

我想聚合 5 分钟，所以我创建了一个这样的过程：

![在此处输入图像描述](../Images/ae9bee66f64d590c550db4ad33b51081.png)

但是，如果 student_score 发生变化（例如添加另一个字段），则需要更新程序。如果 student_score 表有数百个字段，则需要在“avg(src.score) as score”之类的过程中写入数百个作业

我的问题是：有没有办法让程序自适应源表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:33:17.323

您不应该为每种新类型的分数添加新列，这很可能是不正确的数据库设计，特别是如果您谈论数百个字段，更好的选择是有一个像这样的表

studentId , ScoreTypeID, 时间, 分数

在此表中，每个分数类型的每个学生都有一行，上面的查询将是静态的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:50:28.703

你提到的“过程”暗示了数据库服务器上的某种存储过程，但我认为你只是指一段应用程序代码或它创建的 SQL 查询，对吧？

# 如何以 5 分钟的间隔聚合

[给定时间内每 5 分钟的数据](https://stackoverflow.com/questions/12345679/average-of-data-for-every-5-minutes-in-the-given-times)平均值也讨论了平均值。正如我在[我的回答中](https://stackoverflow.com/a/12345778)写的那样，我会使用

```
group by time div 500 
```

# 如何处理多个分数列

关于必须`avg`为每一列复制表达式，我看到了三个解决方案。

一种方法是根本不创建单独的表，而是简单地在您实际访问这些平均值的每个查询中进行平均。如果这些查询仅使用所有列的子集，那么您只需命名并平均这些列。

第二种解决方案是以编程方式生成插入查询。即在您发送这些查询的应用程序中，有一段代码查询有关表中列的数据库，并构造要匹配的查询。您可以将它用于真实表（即插入语句）或视图（即创建视图语句）。

第三，如果你的分数都具有相似的含义，你最好规范化你的表，使这些多列变成多行，列名称、时间、种类和分数，其中种类列是一些（可能是枚举）用于区分不同类型分数的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:45:39.790

如果`student_score`表被更改，那么`student_score_5m`表和您的程序也必须更改。对？但是数据库设计不应该经常改变。在 INSERT...SELECT 语句中指定所有字段。

关于按 5 分钟间隔分组，试试这个查询 -

```
SELECT
  DATE(time) + INTERVAL (TIME_TO_SEC(TIME(time)) DIV 300) * 300 SECOND date,
  SUM(score)
FROM
  table
GROUP BY
  date 
```

# mysql - 对多列进行 GROUP BY

> ID：12384985
> 
> 赞同：0
> 
> 时间：2012-09-12T09:23:51.673
> 
> 标签：mysql, group-by

我有一张如下所示的表格 -

```
 Id     Reference     DateAttribute1    DateAttribute2
  1      MMM005         2011-09-11       2012-09-10 
  2      MMM005         2012-06-13       2012-09-10 
  3      MMM006         2012-08-22       2012-09-10 
  4      MMM006         2012-08-22       2012-09-11 
```

我已经处理了 id 值。我想查询这样我得到以下结果

```
 Id     Reference     DateAttribute1    DateAttribute2
  2      MMM005         2012-06-13       2012-09-10 
  4      MMM006         2012-08-22       2012-09-11 
```

我希望我的结果按引用进行分组，然后是“DateAttribute1”，然后是“DateAttribute2”——正如您在上面的结果中看到的那样，`DateAttribute1`它具有优先级。 我应该如何编写查询以以上述方式获取结果？`DateAttribute2`

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T09:55:31.453

```
Try it..... 
```

> select * from (select * from your_table order by Id desc) as x group by Reference

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:27:40.947

```
select max(id),Reference, min(DateAttribute1),max(DateAttribute2)
group by Reference 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T10:45:40.840

假设表名是'tbl2'

```
 select * from (select * from tbl2 order by REFERENCE,DateAttribute1 desc,
DateAttribute2 desc )  as abc group by reference 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T09:38:16.770

尝试这个：

```
select * 
from   your_table t
join (
      select Reference,
             min(DateAttribute1) as DateAttribute1,
             max(DateAttribute2) as DateAttribute2
      from   your_table
      group by  Reference
      )a
on   t.Reference=a.Reference
and  t.DateAttribute1=a.DateAttribute1
and  t.DateAttribute2=a.DateAttribute2 
```

# c++ - 正确使用智能指针而不会泄漏

> ID：12384993
> 
> 赞同：0
> 
> 时间：2012-09-12T09:24:06.423
> 
> 标签：c++, shared-ptr, smart-pointers

我正在研究一种架构，我需要在不同的列表中有一个实体，如下所示：

*   渲染器 -> 组件列表 (SpriteComponent)
*   Collisioner -> 组件列表（PhysicComponent）

我认为智能指针是管理所有这些引用的最佳解决方案，所以我开始学习它，但是我遇到了一些问题，如果我正确使用它们，我很抱歉。

* * *

说明：

我有一个抽象类：IEntity

```
class IEntity {
  public:
    IEntity( World& world );
  private:
    World* world;
  public:
    std::tr1::weak_ptr<IEntity> weak_this;
};

typedef std::tr1::shared_ptr<IEntity> Entity; 
```

而且我有一种在 EntityManager 中创建实体的方法：

```
Entity EntityManager::createEntity() {
    Entity entity( new IEntity( *this->world ) );
    entity->weak_this = entity;
    this->entityList.add( &entity );
    return entity;
} 
```

在我的 EntityManager 类中，我有一个 "Entity" (Of shared_ptr) 向量：

```
std::vector<Entity> entityList; 
```

**1 - 我是否需要在我的程序中到处使用“实体”类型（在参数中，...）？**

**2 - 如果我有这个：**

```
class IComponent {
  public:
    IComponent();    
};
typedef std::tr1::shared_ptr<IComponent*> Component; 
```

我有一个像这样的对象：

```
class SpriteComponent : public Component {
  public:
    SpriteComponent();        
    int texture;
}; 
```

从 shared_ptr 继承很好吗？这对我来说看起来很奇怪，但那工作。

**3 - 我尝试使用这个创建 10000 个实体：**

```
Entity entity = world.getEntityManager().createEntity(); 
```

对实体的引用被推入我的“实体”向量中，如果我真的了解智能指针，则向量上的清除将删除所有实体（因为没有其他引用）。但是当我使用 cXode 泄漏分析器查看时，我可以看到没有删除实体的内存在增长。所以我刚刚尝试在我的向量中插入创建实体，但我没有泄漏，为什么？问题出在哪里 ？哦。

**4 - 如果我在游戏中使用 smart_ptr，我是否有一些性能问题？（我正在使用参考）：**

谢谢你的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:51:21.777

1.  我不会这样称呼它`Entity`，但也许是`EntityPtr`这样的。（`Entity`建议它的具体实现`IEntity`）
2.  不是从 派生`Component`，而是从派生`IComponent`。然后，您的`Component`智能指针将能够保存 type 的对象`SpriteComponent`。
3.  如果不存在其他引用，则清除`EntityManager.entityList`将删除对象。但是您的代码在填充向量时似乎做了一些奇怪的事情。

    ```
    EntityPtr entity( new IEntity( *this->world ) );
    ...
    this->entityList.add( &entity ); 
    ```

    这会将实体的地址添加到实体列表中，那里不应该`&`有。我不确定为什么这会导致泄漏 - 但它肯定是错误的。

4.  是的，使用智能指针会降低性能。但是不要担心它，直到您可以将其作为核心循环中的问题来衡量 - 这可能永远不足以成为重要的惩罚。

# ruby-on-rails - Ruby 并行 csv 导入

> ID：12384995
> 
> 赞同：2
> 
> 时间：2012-09-12T09:24:10.850
> 
> 标签：ruby-on-rails, ruby, fastercsv

我正在导入巨大的 csv 文件，我想将其拆分，这样导入会更快（我没有直接导入到 db，我有一些计算）。代码如下所示：

```
def import_shatem
    require 'csv'

    CSV.foreach("/#{Rails.public_path}/uploads/hshatem2.csv", {:encoding => 'ISO-8859-15:UTF-8', :col_sep => ';', :row_sep => :auto, :headers => :first_row}) do | row |

      @eur_cur = Currency.find_by_currency_name("EUR")
      abrakadabra = row[0].to_s()
      (ename,esupp) = abrakadabra.split(/_/)
      eprice = row[6].to_f / @eur_cur.currency_value
      eqnt = /(\d+)/.match(row[1])[0].to_f

        if ename.present? && ename.size>3
        search_condition = "*" + ename.upcase + "*"     

        if esupp.present?
          #supplier = @suppliers.find{|item| item['SUP_BRAND'] =~ Regexp.new(".*#{esupp}.*") }
          supplier = Supplier.where("SUP_BRAND like ?", "%#{esupp}%").first
          logger.warn("!!! *** supp !!!")

        end

        if supplier.present?

          @search = ArtLookup.find(:all, :conditions => ['MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE) and ARL_KIND = 1', search_condition.gsub(/[^0-9A-Za-z]/, '')])
          @articles = Article.find(:all, :conditions => { :ART_ID => @search.map(&:ARL_ART_ID)})
          #@art_concret = @articles.find_all{|item| item.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '').include?(ename.gsub(/[^0-9A-Za-z]/, '')) }

          @aa = @articles.find{|item| item['ART_SUP_ID']==supplier.SUP_ID} #| @articles
          if @aa.present?
            @art = Article.find_by_ART_ID(@aa)
          end

          if @art.present?
            #require 'time_diff'
            #cur_time = Time.now.strftime('%Y-%m-%d %H:%M')
            #time_diff_components = Time.diff(@art.datetime_of_update, Time.parse(cur_time))
            limit_time = Time.now + 3.hours
            if  (@art.PRICEM.to_f >= eprice.to_f || @art.PRICEM.blank? ) #&& @art.datetime_of_update >= limit_time) 
              @art.PRICEM = eprice
              @art.QUANTITYM = eqnt
              @art.datetime_of_update = DateTime.now
              @art.save
            end
          end

        end     
      end
    end
  end 
```

我怎么能平行呢？并获得更快的导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T03:18:51.450

查看 Gem smarter_csv！它可以分块读取 CSV 文件，然后您可以创建 Sidekiqjobs 来处理这些块并将其插入数据库。

[https://github.com/tilo/smarter_csv](https://github.com/tilo/smarter_csv)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-16T04:21:40.387

查看代码，瓶颈将是数据库查询。并行运行它不会解决这个问题。相反，让我们看看我们是否可以提高效率。

最大的问题可能是文章搜索。它在内存中进行多个查询和搜索。我们会讲到最后。

* * *

`Currency.find_by_currency_name`总是一样的。从循环中提取 if。它不太可能成为瓶颈，但它会有所帮助。并且，假设`currency_name`是一列`Currency`，我们可以通过获取单个值而不是加载整个记录来节省一点时间[`pick`](https://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-pick)。

```
 def currency_value
    @currency_value ||= Currency.where(currency_name: "EUR").pick(:currency_value)
  end 
```

* * *

同样，`Supplier.where`如果 CSV 将包含许多重复值，则可以从缓存中受益。[使用Memoist](https://github.com/matthewrudy/memoist)缓存返回值。

```
 extend Memoist

  private def find_supplier_for_esupp(esupp)
    return if esupp.blank?
    Supplier.where("SUP_BRAND like ?", "%#{esupp}%").first
  end
  memoize :find_supplier_for_esupp 
```

`%term%`不会使用普通的 B-Tree 索引，因此搜索可能会很慢，具体取决于供应商表的大小。如果您使用的是 PostgreSQL，则可以使用[trigram index](https://about.gitlab.com/blog/2016/03/18/fast-search-using-postgresql-trigram-indexes/)加速此查询。

```
add_index :suppliers, :SUP_BRAND, using: 'gin', opclass: :gin_trgm_ops 
```

* * *

最后，文章搜索可能是最大的瓶颈。它正在查询 ArtLookup，加载所有记录，将它们全部扔到一个列中。然后搜索Article，加载内存中的所有，在内存中过滤，最后一次搜索Article。

假设在模型中正确设置了 Article 和 ArtLookup 之间的关系，则可以将其缩减为一个查询。

```
 art = Article
    .joins(:art_lookups)
    .merge(
      ArtLookup
        .where(ARL_KIND: 1)
        .where(
          'MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE)',
          search_condition
        )
    )
    .where(
      ART_SUP_ID: supplier.SUP_ID
    )
    .first 
```

那应该要快得多。

* * *

总而言之，还有其他一些改进，例如提前返回以避免所有嵌套的 if。

```
require 'csv'

class ShatemImporter
  extend Memoist

  # Cache the possibly expensive query to find suppliers.
  private def find_supplier_for_esupp(esupp)
    Supplier.where("SUP_BRAND like ?", "%#{esupp}%").first
  end
  memoize :find_supplier_for_esupp

  # Cache the currency value query outside the loop.
  private def currency_value
    @currency_value ||= Currency.find_by(currency_name: "EUR").currency_value
  end

  def import_shatem(csv_file)
    CSV.foreach(
      csv_file,
      {
        encoding: 'ISO-8859-15:UTF-8', :col_sep => ';', :row_sep => :auto, :headers => :first_row
      }
    ) do |row|
      (ename,esupp) = row[0].to_s().split(/_/)
      eprice = row[6].to_f / currency_value
      eqnt = row[1].match(/(\d+)/).first.to_f

      next if ename.blank? || ename.size < 4
      next if esupp.blank?

      supplier = find_supplier_for_esupp(esupp)      
      next if !supplier

      article = Article
        .joins(:art_lookups)
        .merge(
          ArtLookup
            .where(ARL_KIND: 1)
            .where(
              'MATCH (ARL_SEARCH_NUMBER) AGAINST(? IN BOOLEAN MODE)',
              "*#{ename.upcase}*"     
            )
        )
        .where(
          ART_SUP_ID: supplier.SUP_ID
        )
        .first
      next if !article

      if art.PRICEM.blank? || art.PRICEM.to_f >= eprice.to_f
        art.update!(
          PRICEM: eprice,
          QUANTITYM: eqnt,
          datetime_of_update: DateTime.now
        )
      end
    end
  end
end 
```

这是用 Rails 6 编写的，您的代码看起来像 Rails 2，并且未经测试。但希望它能为您提供优化的途径。

# python - 从 python 运行 perl 脚本

> ID：12384999
> 
> 赞同：2
> 
> 时间：2012-09-12T09:24:29.820
> 
> 标签：python, windows, perl

我知道 Stack Overflow 上有一些关于这个的话题。但这些对我来说都没有任何意义。我对 python 和 perl 都很陌生，并尽力理解。我想从一段 python 代码运行一个 perl 脚本。

在命令提示符下执行 perl 脚本如下：

```
perl perlscript.pl input.bopt7 output.xml 
```

我想从我的 python 代码中运行这个命令。我尝试了以下方法：

```
pipe = subprocess.Popen(["perlscript.pl" , "input.bopt7" , "output.xml"], stdout=subprocess.PIPE) 
```

但这不起作用。我收到一条错误消息，说它不是有效的 win32 ...

我不需要这个脚本的输入或输出。只需要运行一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T09:29:15.417

`perl`执行 perl 脚本时需要包含命令本身：

```
pipe = subprocess.Popen(["perl", "perlscript.pl" , "input.bopt7" , "output.xml"], stdout=subprocess.PIPE) 
```

你在命令行提示符下做了同样的事情；该类`Popen`无法从`perlscript.pl`文件中猜出您想用 Perl 运行此脚本。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T09:30:20.587

您是否尝试将 perl 添加到 Popen 参数中（就像您在命令行上所做的那样）？

> pipe = subprocess.Popen(["perl", "perlscript.pl" , "input.bopt7" , "output.xml"], stdout=subprocess.PIPE)

在您的示例中，Windows 尝试将“perlscript.pl”作为 Win32 可执行文件执行，因为这是您指定的第一个参数，并且由于它不包含正确的二进制标头（因为它是文本文件）而失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-12T09:29:11.537

第一个参数应该是`perl.exe`，如果`perl.exe`在你的`PATH`; 或可执行文件的完整路径，因为其余的都是`perl.exe`.

还要确保为`perlscript.pl`and放置完整路径`input.bopt7`。