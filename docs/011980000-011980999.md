# StackOverflow 问答 11980000-11980999

# machine-learning - 匹配产品字符串的最佳机器学习技术

> ID：11980000
> 
> 赞同：33
> 
> 时间：2012-08-16T02:40:05.023
> 
> 标签：machine-learning, pattern-matching, string-comparison, levenshtein-distance

这里有一个谜...

我有两个数据库，包含相同的 50000 多种电子产品，我想将一个数据库中的产品与另一个数据库中的产品进行匹配。但是，产品名称并不总是相同的。我尝试使用 Levenshtein 距离来测量字符串相似度，但这并没有奏效。例如，

```
-LG 42CS560 42-Inch 1080p 60Hz LCD HDTV
-LG 42 Inch 1080p LCD HDTV 
```

这些项目是相同的，但它们的产品名称差异很大。

另一方面...

```
-LG 42 Inch 1080p LCD HDTV
-LG 50 Inch 1080p LCD HDTV 
```

这些是具有非常相似产品名称的不同产品。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T03:20:26.580

我的第一个想法是尝试将名称解析为功能描述（公司`LG`、大小`42 Inch`、分辨率`1080p`、类型`LCD HDTV`）。然后，您可以将这些描述相互匹配以实现兼容性；省略产品编号是可以的，但有不同的尺寸是不好的。简单的 are-the-common-attributes-compatible 可能就足够了，或者您可能必须编写/学习关于允许不同属性有多少不同的规则等等。

根据您拥有多少不同种类的产品以及列出的名称有多么不同，我实际上可能会从手动定义一组属性开始，甚至可能只是添加特定的单词/正则表达式来匹配它们，迭代地查看未解析的内容到目前为止并为此添加规则。我想就一个可能属于多个属性的词汇项而言并没有太多歧义，尽管没有看到您的数据库，我想我不知道。

如果这不可行，这种提取类似于半监督词性标注。但是，它有些不同，因为我认为词汇比典型的解析要有限得多，并且产品名称的空间更具层次性：`resolution`标签仅适用于某些类型的产品。我对那些文献不是很熟悉。可能有一些你可以使用的想法。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-22T06:52:00.280

使用大量训练示例。对于此示例集中的每个可能对：

1.  解析字符串的组件，即。公司、size_desc、display_type、make 等。
2.  求一对字符串中相同分量之间的距离。
3.  创建一个表示组件之间距离的数字元组。
4.  根据作为训练集一部分的对中的字符串将元组标记为相同/不同。
5.  输入元组并训练二元分类器 (SVM)。

现在，当您获得一对要确定它们是否相同的字符串时，请像在训练集中所做的那样提取特征，并为字符串的各个组件之间的距离创建数字元组。将元组馈送到经过训练的 SVM 并分类它们是否相同。

使用这样的学习方法的好处是您不必一遍又一遍地修改规则，并且系统还可以学习大量相同和不同的产品之间的差异。

您可以使用 WEKA 中的 LibSVM 包来执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-25T21:04:31.387

我对机器学习知之甚少，但我知道 Levenshtein 距离并不是解决此类问题的最佳方法。

我目前正在研究一个非常相似的问题，并且使用最大连续子序列（[https://www.geeksforgeeks.org/longest-consecutive-subsequence](https://www.geeksforgeeks.org/longest-consecutive-subsequence)）找到了更准确的匹配。

您可能还会发现最长公共子字符串也很有帮助（[https://www.geeksforgeeks.org/longest-common-substring-dp-29/](https://www.geeksforgeeks.org/longest-common-substring-dp-29/)）。

......或者甚至可能两者兼而有之！

Levenshtein 不是很好，因为它允许替换，这可以很容易地忽略具有额外字符的相似字符串。例如，“Hello AAAAAA”、“Hello”和“BBBBB”。

"Hello" 和 "BBBBB" 更接近 Levenshtein 距离，即使您可能希望 "Hello" 与 "Hello AAAAAA" 匹配。

LCS 和 LSS 不允许替换，因此对于这两种方法，“Hello”将与“Hello AAAAAA”匹配。

# json - 跨站点请求

> ID：11980005
> 
> 赞同：0
> 
> 时间：2012-08-16T02:40:34.633
> 
> 标签：json, gwt, xss, cross-site

我正在尝试本[教程](https://developers.google.com/web-toolkit/doc/2.0/tutorial/Xsite)，如果服务器指定回调对象，它工作正常，就像服务器打印这样，

```
callback125([{"symbol":"DDD","price":10.610339195026,"change":0.053085447454327}]); 
```

但我的要求是，服务器只能`JSON`像这样以纯形式打印

```
[{"symbol": "ABC","price": 87.86,"change": -0.41}] 
```

我尝试这样做，json正在检索但回调方法没有调用，有没有我们不需要指定回调方法的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:06:12.063

如果您的服务器仅输出 json 跨站点请求，则无法使用此方法。

您必须使用自己的服务器来获取数据并将其代理到您的 web 应用程序，或者服务器必须输出 javascript（调用您的回调函数）。

# visual-studio - Visual Studio：如何在测试/生产数据库之间快速切换？

> ID：11980008
> 
> 赞同：2
> 
> 时间：2012-08-16T02:41:14.353
> 
> 标签：visual-studio, configuration, app-config, development-environment

我正在使用一个解决方案，其中包括一个 Windows 服务主机项目，该项目使用单个 app.config 文件，该文件包含服务所需的所有内容（日志配置、WCF 配置、自定义配置和**连接字符串**）。

我实际工作的方式是当用户抱怨生产环境中有问题时，我编辑 app.config 文件，修改连接字符串使其指向生产数据库，重新编译服务主机项目，然后在我的开发环境，看看发生了什么。

如果我必须测试对生产环境来说风险太大的东西，我会再次编辑 app.config 文件，修改 app.config 文件使其指向测试数据库，重新编译服务主机项目，......你看我要去哪里...

为了避免每次我必须切换环境时编辑 app.config 文件的负担，我决定创建一个“生产”构建配置和一个“测试”构建配置。我添加了两个附加配置文件，每个环境一个，它们是主 app.config 文件的副本，除了它们的连接字符串指向各自的数据库。我修改了项目的预构建事件以包含根据所选构建配置复制环境的 app.config 文件的代码。

我对该方法有两个担忧：

*   如果我在 app.config 文件中还有其他要修改的内容（WCF、日志记录等），我必须记住在另一个文件中复制我的修改。（对我来说是个大问题，因为我的记忆力和红鱼一样多）

*   我讨厌因为额外的构建事件、项目目录中的额外文件等而使项目更复杂。

*   每个构建配置输出在不同的目录中。我讨厌为了克服数据源问题而复制相同的代码。

任何人都可以提出一种更简单的方法来处理多种环境？

提前致谢。

# iphone - 关于字符串和 NSRangeException 的简单 NSSArray

> ID：11980009
> 
> 赞同：0
> 
> 时间：2012-08-16T02:41:15.387
> 
> 标签：iphone, objective-c, nsstring, nsarray

我有一个简单的问题。我正在设计一些简单的高分代码，但我遇到了很多麻烦，特别是存储和保存玩家姓名。我在 obj-c 中编程的时间不长，只有 2 周。我不太确定在数组中使用 NSStrings 时发生了什么。

下面是保存字符串的代码：

```
-(NSString *) getFilePath2 {
    NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[pathArray objectAtIndex:0] stringByAppendingPathComponent:@"savedFile2.plist"];

}

-(void) savePlayerNameData {
    NSArray *highScoreNames = [[NSArray alloc]
                                initWithObjects:

                                playerName1,

                                playerName2,

                                playerName3,

                                playerName4,

                                playerName5,

                                nil];

    [highScoreNames writeToFile:[self getFilePath2] atomically:YES];

}

-(void) loadPlayerNameData{
    // load data here
    NSString *myPath = [self getFilePath2];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];

    if (fileExists) {
        NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
        playerName1 = [values objectAtIndex:0];
        playerName2 = [values objectAtIndex:1];
        playerName3 = [values objectAtIndex:2];
        playerName4 = [values objectAtIndex:3];
        playerName5 = [values objectAtIndex:4];

    }
    else {
        NSLog(@"first Launch. no file yet");
    }
} 
```

我最终得到这个错误：

```
2012-08-15 22:25:30.780 Pig Fly![5304:f803] *** Terminating app due to uncaught exception 'NSRangeException', reason: '-[__NSCFArray objectAtIndex:]: index (0) beyond bounds (0)'
*** First throw call stack:
(0x14c5022 0xec5cd6 0x146da48 0x146d9b9 0x14bec30 0xbd21 0x62e2 0x964eb6 0x1499936 0x14993d7 0x13fc790 0x13fbd84 0x13fbc9b 0x13ae7d8 0x13ae88a 0x28626 0x1fdd 0x1f45)
terminate called throwing an exception(lldb) 
```

但是，我发现非常有趣的是，当我编写类似的代码来保存 int 值时，程序运行良好。这是工作的 int 代码：

```
-(NSString *) getFilePath {
    NSArray *pathArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[pathArray objectAtIndex:0] stringByAppendingPathComponent:@"savedFile.plist"];
}

-(void) saveData {
    //save data here
    NSArray *highScores = [[NSArray alloc]
                           initWithObjects:

                           [NSString stringWithFormat:@"%i",highScore1],

                           [NSString stringWithFormat:@"%i",highScore2],

                           [NSString stringWithFormat:@"%i",highScore3],

                           [NSString stringWithFormat:@"%i",highScore4],

                           [NSString stringWithFormat:@"%i",highScore5],

                            nil];

    [highScores writeToFile:[self getFilePath] atomically:YES];

}

-(void) loadData{
    // load data here
    NSString *myPath = [self getFilePath];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:myPath];

    if (fileExists) {
        NSArray *values = [[NSArray alloc] initWithContentsOfFile:myPath];
        highScore1 = [[values objectAtIndex:0] intValue];
        highScore2 = [[values objectAtIndex:1] intValue];
        highScore3 = [[values objectAtIndex:2] intValue];
        highScore4 = [[values objectAtIndex:3] intValue];
        highScore5 = [[values objectAtIndex:4] intValue];

    }
    else {
        NSLog(@"first Launch. no file yet");
    }
} 
```

谁能告诉我发生了什么事？在为 int 和 NSString 编写 NSArray 时需要牢记哪些区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:50:33.787

确保 playerName1 不为 NULL。

# objective-c - 如果第一个视图几乎没有代码，为什么我的应用程序总是以内存警告打开？

> ID：11980013
> 
> 赞同：0
> 
> 时间：2012-08-16T02:41:51.780
> 
> 标签：objective-c, memory-leaks, storyboard, nib, uistoryboard

最近，当我在 iPhone 上加载我的应用程序时，我收到了内存警告消息。我相信这与我最近从经典 .xib 文件切换到的情节提要有关。从那以后，该应用程序的运行速度变慢了很多，我不明白为什么。我摆脱了用于加载视图、制作表格等的大量代码，所以我认为我的应用程序现在运行速度会比以前快得多。我的 mainViewController（这给我带来了最多的问题），里面只有默认代码！发生这种情况有原因吗？代码运行速度比故事板快还是什么？

先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:30:19.780

使用 Instruments 进行分析以了解您的应用程序的执行——CPU 时间（慢）和分配（内存消耗）。

# macos - 尝试在 OSX 上设置 postgres

> ID：11980017
> 
> 赞同：6
> 
> 时间：2012-08-16T02:42:29.313
> 
> 标签：macos, postgresql

我正在尝试为我的 mac（10.7 Lion）上的 rails 应用程序在本地设置 postgres。

我安装了[postgresapp](http://postgresapp.com/)并启动​​了它，现在我的状态栏中有一头大象告诉我 postgres 正在运行。

我可以通过以下方式得到它：

```
psql -h localhost 
```

但是当我简单地运行时，`psql`我得到了这个错误：

> psql：无法连接到服务器：权限被拒绝服务器是否在本地运行并接受 Unix 域套接字“/var/pgsql_socket/.s.PGSQL.5432”上的连接？

我把这个：

```
PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH" 
```

在`~/.bashrc`并打开了一个新的终端。但没有骰子。

当我跑步时，`which psql`我得到`/usr/bin/psql`

不太确定该怎么做..我对unix系统还是很陌生。我应该符号链接`/usr/bin/psql`到`/Applications/Postgres.app/Contents/MacOS/bin/psql`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-19T01:09:19.970

我在运行 Mountain Lion 的新 MacBook Pro 上遇到了类似的问题。我下载了[PostgresApp](http://postgresapp.com/)，当我启动 rails 时，我收到以下错误：

```
`initialize': could not connect to server: No such file or directory (PG::Error)
Is the server running locally and accepting
connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"? 
```

为了解决这个问题，我必须在我的`database.yml`文件中明确定义主机和端口，如下所示：

```
development:
  adapter: postgresql
  encoding: unicode
  database: my_app_development
  pool: 5
  username: tony
  password: stark    
  host: localhost
  port: 5432 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T12:25:23.303

这个错误非常具体，可以告诉您出了什么问题，但是如果您是 unix 新手，那么它就不那么明显了。

我在这里给出了类似的答案：

[无法连接到本地 PostgreSQL](https://stackoverflow.com/questions/8465508/)

**问题**

您无权访问（“socket”）文件`/var/pgsql_socket/.s.PGSQL.5432`

**修理：**

检查您是否至少有权访问该目录。在命令行使用：

```
ls -l /var/pgsql_socket/.s.PGSQL.5432 
```

如果没有，这将导致“权限被拒绝”。您可能已经有权访问它，而这只是您无权访问的套接字文件。

套接字文件本身是由 postgresql 在启动时创建的。

跟踪 postgres ( `postgresql.conf`) 的主要配置文件。这本身可能很困难，我是 linux 用户而不是 OSX。您可能需要花一些时间在 google 上。这个链接已经很老了，但如果您遇到问题，它可能会让您走上正轨。[http://www.postgresqlformac.com/server/howto_edit_postgresql_confi.html](http://www.postgresqlformac.com/server/howto_edit_postgresql_confi.html)

找到它后，在 postgresql.conf 中找到它们应该这样说的行：

```
unix_socket_directory = '/var/pgsql_socket'    # dont worry if yours is different
#unix_socket_group = ''                        # default is fine here
unix_socket_permissions = 0777                 # check this one 
```

# ios - 带有 BGRA CgBI 预乘 alpha 的 PNG 图像

> ID：11980019
> 
> 赞同：2
> 
> 时间：2012-08-16T02:42:44.820
> 
> 标签：ios, core-graphics, cgcontext, alpha-transparency, premultiplied-alpha

我有 Apple iOS 优化的 BGRA PNG 格式的 PNG（我使用[OptimizedPNG](https://github.com/basuke/OptimizedPNG)得到的），并希望以一种告诉 CoreGraphics 不要忽略图像的 alpha 分量的方式绘制它们。我正在画`CGContextRef`一个`drawRect:`

编辑：渲染的图像在应该完全透明的地方显示为黑色（有时是其他随机伪影）。不透明区域正常渲染。 `CGImageAlphaInfo`我从图像中得到的是`kCGImageAlphaNoneSkipLast`，这*似乎*表明 OptimizedPNG 保存图像的方式存在问题。我认为这应该是`kCGImageAlphaPremultipliedLast`。

也许 PNG 块是错误的，但我看不出 IHDR 有什么问题，而且我几乎找不到关于 CgBI 块的信息。

这是 OptimizedPNG 保存颜色数据的方式：

```
// IDAT
int size = width*height*4;
unsigned char *buffer = malloc(size);
CGContextRef context = CGBitmapContextCreate(buffer, width, height, 8, width*4, CGImageGetColorSpace(originalImage.CGImage), kCGImageAlphaPremultipliedLast);
CGRect rect = CGRectMake(0.0, 0.0, (CGFloat)width, (CGFloat)height);
CGContextDrawImage(context, rect, originalImage.CGImage);
CGContextRelease(context);

int size_line = 1 + width*4;
int size_in = height*size_line;
unsigned char *buffer_in = malloc(size_in);
for(int y = 0; y < height; ++y){
    unsigned char *src = &buffer[y*width*4];
    unsigned char *dst = &buffer_in[y*size_line];
    *dst++ = 1;
    unsigned char r = 0, g = 0, b = 0, a = 0;
    for(int x = 0; x < width; ++x){
        dst[0] = src[2] - b;
        dst[1] = src[1] - g;
        dst[2] = src[0] - r;
        dst[3] = src[3] - a;
        r = src[0], g = src[1], b = src[2], a = src[3];
        src += 4;
        dst += 4;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:09:43.440

听起来您的 PNG 缺少 alpha 通道。

可能 OptimizedPNG 有 bug；我不知道。尝试使用`UIImagePNGRepresentation`.

也许您的原始图像没有 Alpha 通道。您可以在预览中检查（工具 > 显示检查器，然后在更多信息 > 常规中查找“有 Alpha”）。

还要确保你的观点`opaque`是 NO 并且它`backgroundColor`是`clearColor`. 如果您没有绘制到系统创建的上下文，请确保您使用 Alpha 通道创建上下文。

根据您的评论，我在运行 iOS 5.1.1 的 iPad 3 上测试了此代码：

```
UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://upload.wikimedia.org/wikipedia/commons/f/fb/Wikisource-logo.png"]]];
NSData *data = UIImagePNGRepresentation(image);
NSURL *documentDirectoryURL = [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask].lastObject;
NSURL *url = [documentDirectoryURL URLByAppendingPathComponent:@"test.png"];
[data writeToURL:url atomically:YES]; 
```

`test.png`然后我使用 Xcode Organizer 从我的设备复制。我在预览中打开文件进行检查。它仍然有一个 Alpha 通道。

如果您仍然遇到问题，您需要向我们展示处理图像所涉及的*所有*代码，因为您遗漏了一些内容。编辑您的问题以包含更多详细信息和代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:09:30.393

从您告诉我们的情况来看，没有理由使用透明层。透明层用于组合两个或多个对象以生成被视为单个对象的复合图形。如果您想将效果应用到复合对象而不是每个单独的对象，这将非常有用。一个非常常见的情况是对多个对象的合成应用阴影。

考虑到 Alpha 通道，仅使用`CGContextDrawImage()`会将图像合成到图形上下文中。新图像如何在图形内容中已有的任何内容上合成取决于为图形内容设置的混合模式。您使用 设置混合模式`CGContextSetBlendMode()`。详细描述可以在[Quartz 2D Programming Guide: Bitmaps Images and Masks](https://developer.apple.com/library/ios/#documentation/graphicsimaging/Conceptual/drawingwithquartz2d/dq_images/dq_images.html#//apple_ref/doc/uid/TP30001066-CH212-CJBIJEFG)中找到。正如您从参考资料中看到的那样，如何合成图像有很多选项，但我可能猜到您的想法`kCGBlendModeMultiply`是`kCGBlendModeNormal`. 请注意，默认值为`kCGBlendModeNormal`，它仅将源图像样本绘制在当前上下文中有关 alpha 值的任何内容上。

# c# - 如何获取数据表中每个字段的数据库表名

> ID：11980024
> 
> 赞同：1
> 
> 时间：2012-08-16T02:43:48.457
> 
> 标签：c#, sql-server

我知道如何在 a 中获取字段的名称`DataTable`：

```
col.ColumnName 
```

如何获取数据库表名（不是`DataTable.TableName`）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:47:54.757

不返回数据库表名`DataTable`。您应该从用于填充`DataTable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:54:17.973

`DataTable`是内存中的一个表。它不会跟踪它是从哪个数据库表中填充的。

假设我正在使用这个 select 语句来填充 DataTable

```
select * from foo,bar where foo.id = bar.id 
```

现在告诉我什么应该是 DataTable 名称。

你可以做的是在填充数据表时，给它一个像这样的表名

```
mydatatable = new DataTable("SomeTableName"); 
```

# python - eBay Trading SOAP API — 无效的 AppId？

> ID：11980042
> 
> 赞同：0
> 
> 时间：2012-08-16T02:46:09.783
> 
> 标签：python, soap, ebay-api

我正在尝试使用 SOAP API 将我的第一个呼叫通过 eBay 沙盒

我不断收到**无效的 AppId**响应。我四次检查我确实有适合沙盒环境的 AppIp。易趣文档是相当无用的。

我正在使用 SUDS 和 Python 2.7 进行调用。

**要求**

```
DEBUG:suds.client:sending to (https://api.sandbox.ebay.com/wsapi?callname=GetCategories&appid=MyAppId&siteid=2&version=785&routing=default)
message:
<?xml version="1.0" encoding="UTF-8"?>
<SOAP-ENV:Envelope xmlns:ns0="urn:ebay:apis:eBLBaseComponents" xmlns:ns1="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.o
rg/2001/XMLSchema-instance" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header>
      <ns0:RequesterCredentials ns1:mustUnderstand="0">
         <eBayAuthToken>MySandboxUserAuthToken</eBayAuthToken>
      </ns0:RequesterCredentials>
   </SOAP-ENV:Header>
   <ns1:Body>
      <ns0:GetCategoriesRequest>
         <ns0:DetailLevel xsi:type="ns0:GetCategoriesRequestType">
            <ns0:DetailLevel>ReturnAll</ns0:DetailLevel>
            <ns0:Version>785</ns0:Version>
            <ns0:ErrorHandling/>
            <ns0:WarningLevel>High</ns0:WarningLevel>
            <ns0:LevelLimit>1</ns0:LevelLimit>
         </ns0:DetailLevel>
      </ns0:GetCategoriesRequest>
   </ns1:Body>
</SOAP-ENV:Envelope> 
```

**回复**

```
...
<FaultDetail>
   <ErrorCode>127</ErrorCode>
   <Severity>Error</Severity>
   <DetailedMessage>API application &quot;{0}&quot; invalid.</DetailedMessage>
</FaultDetail>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T14:37:19.757

尝试`appId`在[测试工具](https://developer.ebay.com/DevZone/build-test/test-tool/default.aspx)中测试您的。

# javascript - 如果存在，则替换 sqlite 中的行

> ID：11980047
> 
> 赞同：1
> 
> 时间：2012-08-16T02:46:37.863
> 
> 标签：javascript, sqlite, google-chrome, cordova

如果它存在，我怎样才能使一个**javascript**调用太**sqlite**来**更新**表中的行，如果它**在 phonegap**中不存在则创建该行。

目前，像下面这样的行将成功地在 google chrome 中**创建一行**

```
transaction.executeSql("INSERT INTO "+tablename
                    +" (fieldName,fieldValue,fieldComment) VALUES 
                    ('"+name+"', '"+value+"', '"+comment+"');",[], 
                    this.nullDataHandler, this.errorHandler); 
```

但是，当我尝试以下操作时（我认为应该从这里完成：[http](http://www.sqlite.org/lang_replace.html) ://www.sqlite.org/lang_replace.html ），没有任何反应：

```
transaction.executeSql("REPLACE "+tablename+" (fieldName,fieldValue,fieldComment) 
                       VALUES ('"+name+"', '"+value+"', '"+comment+"');",[],
                        this.nullDataHandler, this.errorHandler); 
```

（这是在调用之后`"CREATE UNIQUE INDEX uniqueName ON "+tablename+" ("+name+")";`）

同样的情况发生在

```
 transaction.executeSql("INSERT INTO OR REPLACE "+tablename+" (fieldName,fieldValue,fieldComment) VALUES ('"+name+"', '"+value+"', '"+comment+"');",[], this.nullDataHandler, this.errorHandler); 
```

（也是在调用 "CREATE UNIQUE INDEX uniqueName ON "+tablename+" ("+name+")" 之后；）

与

```
 transaction.executeSql("DELETE FROM "+tablename+" where \"fieldName\" EQUALS "+name+";",[], this.nullDataHandler, this.errorHandler);
 transaction.executeSql("INSERT "+tablename+" (fieldName,fieldValue,fieldComment) VALUES ('"+name+"', '"+value+"', '"+comment+"');",[], this.nullDataHandler, this.errorHandler); 
```

我有一个 try 语句包围的调用，希望有问题的调用会引发异常，但没有发生任何事情。

我不敢相信我在问这个问题，但是在几个星期没有任何事情之后，我认为是时候问了。如果有人知道在 javascript 中调试 sqlite 的方法，请告诉我。我正在 Windows 7 dell inspiron 上的 google chrome (ctrl+shift+i->resources->databases) 中测试数据库。）

# php - 如何将 ASPpage.asp?id=x 重定向到 PHPpage.php?id=x

> ID：11980048
> 
> 赞同：0
> 
> 时间：2012-08-16T02:47:08.160
> 
> 标签：php, asp-classic

我有一个用 ASP 编写的动态新闻网站，现在我想更改为不支持 ASP 页面的 PHP 服务器。我现在有类似**somepage.asp?id=x**的页面，如何将页面重定向到**somepage.php?id=x** 并且仍然让我的老访问者指向 asp 页面，但它会在 PHP 中返回相同的查询结果。示例：如果我的访问者指向此页面 **www.someweb.com/ASPpage.asp?id=100** 他们应该被重定向到**www.someweb.com/PHPpage.php?id=100**

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:21:01.453

您可以在 ASP Classic 中重定向页面，例如：

```
<%
    Response.Redirect "PHPPage.php?" & Request.QueryString
%> 
```

此外，如果您的 php 文件与您的 asp 文件具有相同的文件名，那么您可以使用类似的东西并将其放在您的所有 asp 页面中......

```
<%
    Response.Redirect Replace(Request.ServerVariables("SCRIPT_NAME"),".asp",".php") & "?" & Request.QueryString
%> 
```

希望这可以帮助...

编辑：

我意识到您将尝试在不支持 ASP 的 php 服务器中执行 asp 页面？如果是这种情况，也许您可​​以将新的 mime-type 添加到您的服务器并将**.asp**文件设置为**.php**。抱歉，我不是服务器端控制专家，但这就是我的想法和我的 5 美分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:58:39.470

根据评论，您可以使用 Apache 的 HTAccess `mod_rewrite`。

设置您的`.htaccess`文件以包含以下内容：

```
RewriteEngine On
RewriteBase /
RewriteRule ^ASPpage\.asp?id=(.*)$ PHPpage.php?id=$1 [L,R] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T11:20:31.593

asp 是 microsoft 技术，而 php 是开源的
，因此除非您更改 php 的服务器端口号，否则这是不可能的。
然后重定向到带有端口号的完整地址以运行 php 文件

# java - 您可以注入自定义异常（或其提供者）吗？

> ID：11980049
> 
> 赞同：0
> 
> 时间：2012-08-16T02:47:17.453
> 
> 标签：java, dependency-injection, guice, gwt-gin

标准[Exception](http://docs.oracle.com/javase/6/docs/api/java/lang/Exception.html)没有默认构造函数（或在实例化后设置消息的方法）。如果自定义异常是基于它的，是否可以使派生类可注入？

```
public class SpecialPurposeException extends Exception {

  private static final long serialVersionUID = 1L;

  public SpecialPurposeException(String message) {
    super(message);
  }
} 
```

自定义异常通常不会在其模块之外实例化，但出于一致性原因，它可能应该在其内部注入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:15:47.717

1.  有**一个**无参数`Exception`。见[`Exception()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html#Exception%28%29)。

2.  您不能在 中修改消息的值`String`，`Exception`但可以覆盖该`getMessage()`方法以返回不同的内容。这应该足以让您以各种方式注入消息......

# java - 无法在 EditText 中显示转换后的 JSONObject

> ID：11980050
> 
> 赞同：0
> 
> 时间：2012-08-16T02:47:24.943
> 
> 标签：java, android

我正在尝试在我的 android 应用程序的 EditText 字段中显示已转换为字符串的 JSONObject。当我运行应用程序时，它加载没有错误，但我的 EditText 字段为空。我也尝试过 System.out.println(name); 但没有打印到控制台，所以我最好的猜测是没有实际存储在那里，我不知道为什么。
这是我的主要文件

```
package com.apitest.rottentomatoestest;

import android.os.Bundle;    
import java.util.ArrayList;
import java.util.HashMap;    
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;    
import org.json.*;
import android.app.Activity;
import android.util.Log;
import android.view.Menu;    
import android.widget.TextView;
import android.widget.EditText;
import java.util.logging.*;

public class Main extends Activity {        

    private static String url = "http://api.rottentomatoes.com/api/public/v1.0/movies/770672123/cast.json?apikey=3p9ehnhzbxwpd6mk8fnncf67";

    private static final String TAG_CAST = "cast";
    private static final String TAG_ID = "id";
    private static final String TAG_NAME = "name";
    private static final String TAG_CHARACTERS = "characters";

    EditText display;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        try
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.mainlayout);
            JSONArray cast = null; 
            JSONParser jParser = new JSONParser();
            JSONObject jSon = jParser.getJSONFromUrl(url);              
            display = (EditText) findViewById(R.id.display);            

            try
            {
                cast = jSon.getJSONArray(TAG_CAST);                 
                for(int i=0; i < cast.length(); i++){
                    JSONObject c = cast.getJSONObject(i);                       
                    String name = c.getString(TAG_NAME);                        
                    display.setText(name); 
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }

        }
        catch (Exception e){
            Log.e("ERROR", "ERROR IN CODE" + e.toString());
            e.printStackTrace();
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.mainlayout, menu);
        return true;
    }
} 
```

这是我的 JSONParser 类

```
package com.apitest.rottentomatoestest;

import java.io.*;
import org.apache.http.*;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.*;

import android.util.Log;

public class JSONParser {

    static InputStream inputStream = null;
    static JSONObject jObject = null;
    static String jSon = "";

    public JSONParser() {
        // TODO Auto-generated constructor stub
    }

    public JSONObject getJSONFromUrl(String url){

        //Make HTTP Request
        try {
            //defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost(url);

            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            inputStream = httpEntity.getContent();

        } catch (UnsupportedEncodingException e){
            e.printStackTrace();
        } catch (ClientProtocolException e){
            e.printStackTrace();
        }catch (IOException e){
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "iso-8859-1"), 8);
            StringBuilder stringBuilder = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null){
                stringBuilder.append(line + "\n");
            }
            inputStream.close();
            jSon = stringBuilder.toString();
        } catch (Exception e){
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }
        //try to parse the string to JSON Object
        try {
            jObject = new JSONObject(jSon);
        } catch (JSONException e){
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }
        //return JSON String
        return jObject;
    }    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:37:57.603

```
 cast = jSon.getJSONArray(TAG_CAST);

  for(int i=0; i < cast.length(); i++){
       JSONObject c = cast.getJSONObject(i);

        String name = c.getString(TAG_NAME);

        display.setText(name);
} 
```

你最好检查最后一个值`name`

# python-2.7 - PyBrain 强化学习 - 迷宫和图形

> ID：11980051
> 
> 赞同：2
> 
> 时间：2012-08-16T02:47:26.830
> 
> 标签：python-2.7, reinforcement-learning, pybrain

我试图在 PyBrain 中实现类似于迷宫问题的东西。但是，它更类似于带有紧急出口的房间，您可以将代理人留在其中一个房间中以找到出口。要将其转换为计算机方法，可以使用双向图，权重显示房间之间的路径。

我试图实现一个新环境，但我有点迷失了应该是什么。例如，基于抽象环境类我想到了这个：

```
#!/usr/bin/python2.7

class RoomEnv(Environment):
    # number of action values acceptable by the environment
    # Two events: go forward and go back through the door (but, how we know what room is connect to another?)
    indim = 2
    # Maybe a matrix where 0 is no connection and 1 is a connection(?)
    #            A,B,C,D,E,F
    #indim = array([[0,0,0,0,0,0],  # A
                    [0,0,0,0,0,1],  # B
                    [0,0,0,0,0,0],  # C
                    [0,0,0,0,0,0],  # D
                    [0,0,0,0,0,1],  # E
                    [0,0,0,0,0,1],  # F
                  ])

    # the number of sensors is the number of the rooms
    outdim = 6

    def getSensors(self):
        # Initial state:
        # Could be any room, maybe something random(?)

    def performAction(self, action):
        # We should look at all the states possible to learn what are the best option to go to the outside state.
        # Maybe a for loop that goes through all the paths and use some weight to know where is the best option?

        print "Action performed: ", action

    def reset(self):
        #Most environments will implement this optional method that allows for reinitialization. 
```

真挚地，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T15:18:43.403

在**pybrain**中，您可以将房间定义为一个数组，然后将结构传递给 Maze 以创建一个新环境。例如：

```
structure = array([[1, 1, 1, 1, 1, 1, 1, 1, 1],
                   [1, 0, 0, 1, 0, 0, 0, 0, 1],
                   [1, 0, 0, 1, 0, 0, 1, 0, 1],
                   [1, 0, 0, 1, 0, 0, 1, 0, 1],
                   [1, 0, 0, 1, 0, 1, 1, 0, 1],
                   [1, 0, 0, 0, 0, 0, 1, 0, 1],
                   [1, 1, 1, 1, 1, 1, 1, 0, 1],
                   [1, 0, 0, 0, 0, 0, 0, 0, 1],
                   [1, 1, 1, 1, 1, 1, 1, 1, 1]])

# defining the environment
environment = Maze(structure, (7, 7)) 
```

在上面的示例中，1 表示墙壁，0 表示代理可以在上面行走的网格。所以你可以修改结构来制作你自己的。

# jquery - 网页在 localhost 中闪烁，但在虚拟主机时不闪烁

> ID：11980052
> 
> 赞同：-3
> 
> 时间：2012-08-16T02:47:37.267
> 
> 标签：jquery, html, css

[在本地主机上闪烁。短片](http://screenr.com/h7E8)。页面刷新时观察到白色闪烁。

当它被托管时，[网站链接](http://geezus1.atwebpages.com)，它根本不会闪烁。

这真的很奇怪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:02:08.173

浏览器如何选择呈现页面并不取决于您。浏览器会选择绘制内容的顺序。当然，您可以通过许多最佳实践方式来影响它，但我建议尝试优化您的网站以在渲染之前加载**巨大的**（2MB PNG！）背景图像不是要走的路。

简而言之，这个加载顺序是正常的，你不需要做任何事情。

# ruby - Nanoc 中的基本操作不能使用变量

> ID：11980055
> 
> 赞同：2
> 
> 时间：2012-08-16T02:48:00.203
> 
> 标签：ruby, nanoc

今晚我遇到了一个非常烦人的问题，也许这里有人可以帮助我。

我正在用 nanoc 构建一个静态博客，目前正在为下一篇/上一篇文章制作一些助手（我包括了一些我所做的测试和返回）：

```
# lib/helpers.rb
include Nanoc3::Helpers::Blogging
include Nanoc3::Helpers::LinkTo

# Returns a link to the next article
# If the article in param is the most recent, returns nothing
def next_article article
  articles = sorted_articles # returns an array of article ordered by date
  pos = articles.index(article) # returns the expected integer
  pos.class # returns Fixnum
  pos.nil? # returns false
  pos + 1 # NoMethodError: undefined method `+' for nil:NilClass
  return if pos.zero? # NoMethodError: undefined method `zero?' for nil:NilClass
  link_to(articles[pos+1][:title], articles[pos+1]) # Fails too, obviously
end 
```

我完全不知道为什么我不能使用“pos”变量，但仍然可以对其执行一些读取。如果有人有见解，我会接受。提前致谢 ！

（我在 OSX Lion 上使用 ruby​​-1.9.3p194 和 rvm，如果它可能有任何关系）

更新：我应该准确地说 pos 的返回值是刚读取时的预期值。奇怪的是，设置

```
pos = articles.index(article).to_s.to_i 
```

似乎工作。我只是不明白它是如何发生的以及为什么会发生。

```
#layout/post_navigation.haml
.post_navigation
  .next
    =next_article @item 
```

# function - 使用 cv::equalizeHist() 的 OpenCV 直方图均衡过程：需要帮助理解最后一步

> ID：11980061
> 
> 赞同：2
> 
> 时间：2012-08-16T02:48:52.170
> 
> 标签：function, image-processing, opencv, process, histogram

我有一个关于使用 cv::equalizeHist()（OpenCV 图像处理库的函数）的直方图均衡过程的问题。在这个网站上：

[使用opencv的直方图均衡过程解释](http://opencv.willowgarage.com/documentation/cpp/histograms.html#cv-equalizehist)

直方图均衡过程解释如下：

1.  计算 src 的直方图 H。

2.  标准化直方图，使直方图 bin 的总和为 255。

3.  计算直方图的积分。[公式在上述网站中给出]

4.  使用 H' 作为查找表来转换图像。[公式在上述网站中给出]

我在理解第 4 步时遇到问题。作者所说的这一行是什么意思？

谁能帮我理解作者是如何从第 4 步得到最终均衡结果的？

他/她在第 4 步中使用了什么方法？他/她是如何改变看着 H' 的图像的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:09:31.363

经过一番谷歌搜索后，我找到了您问题的答案。

1.  阅读这篇[维基百科文章](http://en.wikipedia.org/wiki/Lookup_table#Lookup_tables_in_image_processing)。
2.  从源代码[cvhistogram.cpp](https://code.ros.org/trac/opencv/browser/trunk/opencv/src/cv/cvhistogram.cpp?rev=191)（您实际上可以使用代码在您的项目或库中实现此功能）我在函数中找到`cvEqualizeHist`这一行：

    CV_CALL(cvLUT(src, dst, lut));

3.  最后解释您在 OpenCV 中寻找的功能：[LUT](http://opencv.itseez.com/modules/core/doc/operations_on_arrays.html#lut)。

# python - 在python中，如何在不保留导入模块的命名空间的情况下从另一个模块导入所有类？

> ID：11980062
> 
> 赞同：28
> 
> 时间：2012-08-16T02:48:55.443
> 
> 标签：python

如何在不保留以前的模块命名空间的情况下从另一个模块导入类和方法？

我目前正在重构一些遗留代码，并且经常进行与这些类似的导入。

```
from legacy_module import ClassA as ClassA
from legacy_module import ClassB as ClassB
from legacy_module import ClassC as ClassC
from legacy_module import methodA as methodA
from legacy_module import methodB as methodB 
```

这样做是为了可以将类引用为 ClassA 而不是 legacy_module.ClassA。

在 python 中，如何在一条语句中导入上述所有类和方法？

```
from legacy_module import * as * 
```

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-16T02:52:46.987

用作`from legacy_module import *`您的整个导入。

# c# - 支持样式标签的 .NET 的 HTML Sanitizer

> ID：11980063
> 
> 赞同：11
> 
> 时间：2012-08-16T02:49:07.703
> 
> 标签：c#, .net, css, vb.net, security

我正在寻找在 ASP.NET 项目中使用的好的 HTML sanitizer。问题是清理程序必须支持样式属性，其中可能包含 CSS 属性，也必须对其进行清理。到目前为止，我还没有找到一个好的产品来使用。在我硬着头皮写自己的消毒剂之前，我想我可能会先看看这里的人在用什么。

我看过并拒绝的图书馆：

*   AntiXSS 库（旧版本不安全，新版本去除样式标签）
*   AntiSamy .NET（未维护，在 .NET 版本中缺少必要的功能，具有过时的依赖项）
*   AjaxControlToolkit 中的 HTMLAgilityPackSanitizer（转义样式标签）

理想的情况是拥有一个基于白名单的清理程序，该清理程序还可以根据已知值或正则表达式列表验证属性值。

有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-26T07:46:28.707

试试[这个本机 .NET HTML Sanitizer 项目](https://github.com/mganss/HtmlSanitizer)。它可以根据需要理解样式属性（尽管它不会尝试保留 STYLE 标记，它只是删除它们）。

此外，它基于白名单，而不是黑名单（并且它使用 AngleSharp 而不是现在已弃用的 CsQuery）。它也在[Nuget 上](http://www.nuget.org/packages/HtmlSanitizer/)！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:36:39.197

[将 CsQuery](https://github.com/jamietre/csquery)（我是它的主要作者）视为一种用于处理 HTML 的工具。

这是一个 .NET jQuery 端口，它为您提供通过在客户端上使用的相同方法（DOM 和 jQuery 的 API）对 HTML 的完全访问。这使得推出自己的消毒剂变得非常容易。

Rick Strahl最近发表了一篇关于清理 HTML的[博客文章。](http://www.west-wind.com/weblog/posts/2012/Jul/19/NET-HTML-Sanitation-for-rich-HTML-Input)他展示了如何使用 HTML Agility Pack 使用他的规则来做到这一点，我在那里发表了一条评论，展示了如何使用 CsQuery 更轻松地实现相同的目标。给定标签的枚举，基础就是这样`BlackList`：

```
CQ doc = CQ.Create(html);

// creates a grouped selector "iframe,form,script, ..."
string selector = String.Join(",",BlackList); 

// CsQuery uses the property indexer as a default method, it's identical 
// to the "Select" method and functions like $(...)

doc[selector].Remove(); 
```

如果您不想实际删除某些标签中的内容，例如您希望禁止的格式化标签，您可以使用 jQuery 的 unwrap 代替。这将具有删除标签但保留其子标签的效果。

```
doc[selector].UnWrap(); 
```

完成后：

```
string cleanHtml = doc.Render(); 
```

Ricks 的帖子中有更多关于清理 javascript 事件属性等的内容，但基本上 CsQuery 是一个工具箱，具有熟悉且简单的 HTML 操作方式。创建一个按您想要的方式工作的消毒剂应该很容易。

CsQuery 的 DOM 模型还包含直接访问样式的方法（例如，以比仅操作字符串更方便的方式），如果您需要执行诸如删除某些命名样式之类的操作。例如，您可以从所有元素中删除“字体粗细”样式：

```
// use the [attribute] selector to target only elements with styles

foreach (IDomObject element in doc["[style]"]) {
    if (element.HasStyle("font-weight")) {
        element.RemoveStyle("font-weight");
    }
} 
```

目前 CsQuery 的主要缺点是文档。它的 API 旨在尽可能地匹配浏览器 DOM 和 jQuery（考虑到 jQuery 和 C# 之间的语言差异），并且公共 API 有很好的注释，所以一旦你开始使用它应该很容易编写代码。

但是有一些非标准方法（如“HasStyle”和“RemoveStyle”）是 CsQuery 独有的。不过，github 上的自述文件很好地涵盖了基本用法。它也在 Nuget 上作为`CsQuery`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:05:02.257

Tatham Oddie ASP.Net MVP - [http://blog.tatham.oddie.com.au/2009/06/15/released-xhtml-markup-sanitizer/](http://blog.tatham.oddie.com.au/2009/06/15/released-xhtml-markup-sanitizer/)

我现在已经把这个介绍给了几个人。可能不会做你想做的一切，但 Tatham 是一个很棒的编码器，所以它应该给你很多想法......

就在 AntiXSS 上，AFAIK 的新版本在 HTMLAgilityPackSanitizer

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-17T12:31:13.427

尝试查看开放实验室博客上发布的 HtmlSanitizer：[http](http://roberto.open-lab.com/2010/03/04/a-html-sanitizer-for-c/) ://roberto.open-lab.com/2010/03/04/a-html-sanitizer-for-c/ 。这个支持样式标签，非常适合用于 html 编辑器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-19T14:15:14.923

查看CodeProject 上的**Dead Simple HTML Sanitizer** [http://www.codeproject.com/Tips/529712/Dead-Simple-HTML-Sanitizer](http://www.codeproject.com/Tips/529712/Dead-Simple-HTML-Sanitizer)

# jquery - 无法显示图像 [?] - 将本机应用程序 (PhoneGap) 放入 Xcode

> ID：11980064
> 
> 赞同：1
> 
> 时间：2012-08-16T02:49:30.640
> 
> 标签：jquery, ios, cordova

我目前正在使用 jQuery Mobile (PhoneGap) - HTML5 + CSS5 + JS，然后我将其转换为支持 jQuery Mobile (PhoneGap) 的 Xcode。

我测试了 iOS 模拟器，看看它是否工作正常。确实它工作正常，但我注意到一些图像显示[？]。不确定问题是否在于“无法显示”或“图像加载缓慢”。iPad 应用程序需要显示 600 多张图像。

我将图像文件夹放在“www”下。我什至像这样写代码

```
<img src="Images/abc.png" width="740" height="430"> 
```

你知道问题出在哪里吗？如果你能帮助我，那就太好了。

顺便说一句，我在 jQuery 脚本中包含以下代码：

```
<script src="js/jquery-1.6.4.min.js"></script> 
```

代替

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T17:38:40.700

您的标签末尾缺少“/”，您应该删除目录引用。尝试这个： `<img src="abc.png" width="740" height="430"/>`

# java - 如果 text/plain 类型是第一个 mime 记录，则无法传递消息

> ID：11980065
> 
> 赞同：0
> 
> 时间：2012-08-16T02:49:38.053
> 
> 标签：java, android, email, smtp, jakarta-mail

我使用 JavaMail API 发送邮件。最初，我在发送邮件时使用以下代码，它工作正常，我可以成功接收邮件。但是，有一个问题，正文消息存储在 txt 文件中，而不是在消息字段中。

邮件发送器类：

```
public class MailSender extends Authenticator { 
    private String user; 
    private String password; 

    private String [] to; 
    private String from; 

    private String port; 
    private String sport; 

    private String host; 

    private String subject; 
    private String body; 

    private boolean auth; 
    private boolean debuggable; 

    private Multipart multi; 

    public MailSender(){ 
        host = "me.mysmtp.com"; 
        port = "25"; 
        sport = "25"; 

        user = ""; 
        password = ""; 
        from = ""; 
        subject = ""; 
        body = ""; 

        debuggable = true; 
        auth = true; 

        multi = new MimeMultipart(); 

        // There is something wrong with MailCap, javamail can not find a handler for the multipart/mixed part, so this bit needs to be added. 
        MailcapCommandMap mc = (MailcapCommandMap) CommandMap.getDefaultCommandMap();  
        mc.addMailcap("text/html;; x-java-content-handler=com.sun.mail.handlers.text_html");  
        mc.addMailcap("text/plain;; x-java-content-handler=com.sun.mail.handlers.text_plain");  
        mc.addMailcap("multipart/*;; x-java-content-handler=com.sun.mail.handlers.multipart_mixed"); 
        mc.addMailcap("message/rfc822;; x-java-content-handler=com.sun.mail.handlers.message_rfc822");  
        CommandMap.setDefaultCommandMap(mc);  
    } 

    public MailSender(String user, String password){ 
        this();       
        this.user = user; 
        this.password = password;    
    } 

    public boolean send() throws Exception { 
        Properties props = setProperties(); 

        try{ 
            Session session = Session.getInstance(props, this); 
            session.setDebug(true); 

            MimeMessage msg = new MimeMessage(session); 

            msg.setFrom(new InternetAddress(from)); 

            InternetAddress[] addressTo = new InternetAddress[to.length]; 
            for(int i=0; i<to.length; i++){ 
                addressTo[i] = new InternetAddress(to[i]); 
            } 

            msg.setRecipients(MimeMessage.RecipientType.TO, addressTo); 
            msg.setSubject(subject); 
            msg.setSentDate(new Date()); 

            BodyPart messageBodyPart = new MimeBodyPart(); 
            messageBodyPart.setText(body); 
            multi.addBodyPart(messageBodyPart); 

            msg.setContent(multi); 

            Transport transport = session.getTransport("smtp"); 
            transport.connect(host, 25, user, password); 
            transport.sendMessage(msg, msg.getAllRecipients()); 
            transport.close(); 
            return true; 
        } catch (Exception e) { 
            e.printStackTrace(); 
            return false; 
        } 
    } 

    public void addAttachment(String filename) throws Exception { 
        BodyPart messageBodyPart = new MimeBodyPart(); 
        DataSource source = new FileDataSource(filename); 
        messageBodyPart.setDataHandler(new DataHandler(source)); 
        messageBodyPart.setFileName("record.csv"); 

        multi.addBodyPart(messageBodyPart); 
    } 

    @Override  
      public PasswordAuthentication getPasswordAuthentication() {  
        return new PasswordAuthentication(user, password);  
      } 

    private Properties setProperties() { 
        Properties props = new Properties(); 

        props.put("mail.smtp.host", host); 

        if(debuggable) { 
            props.put("mail.debug", "true"); 
        } 

        if(auth) { 
            props.put("mail.smtp.auth", "true"); 
        } 

        props.put("mail.smtp.ssl.enable", "false");
        props.put("mail.smtp.port", port); 
        props.put("mail.smtp.socketFactory.port", sport); 
        props.setProperty("mail.smtp.ssl.enable", "false");
        props.setProperty("mail.smtp.ssl.socketFactory.fallback", "false");

        return props; 
    } 

    public void setTo(String[] toAddress) { 
        this.to = toAddress; 
    } 

    public void setFrom(String fromAddress) { 
        this.from = fromAddress; 
    } 

    public void setSubject(String subject) { 
        this.subject = subject; 
    } 

    public void setBody(String body) {  
        this.body = body;  
    } 
} 
```

屏幕截图：

![消息字段中没有任何内容](../Images/688a89dddd6cec1499aefad1a30b237f.png) ![在错误的文件中](../Images/77e25db97057b506acf294eb3905f5bf.png)

所以我改变了多部分对象中身体部分的顺序。但是，我修改代码后，虽然应用程序仍然回复它已成功发送邮件，但我无法收到邮件。

这是日志中的消息：

成功一：

```
08-16 11:44:13.371: I/System.out(25774): MAIL FROM:<me@mysmtp.com>
08-16 11:44:13.379: I/System.out(25774): 250 OK
08-16 11:44:13.379: I/System.out(25774): RCPT TO:<you@mysmtp.com>
08-16 11:44:13.418: I/System.out(25774): 250 Accepted
08-16 11:44:13.418: I/System.out(25774): RCPT TO:<admin@mysmtp.com>
08-16 11:44:13.434: I/System.out(25774): 250 Accepted
08-16 11:44:13.434: I/System.out(25774): DEBUG SMTP: Verified Addresses
08-16 11:44:13.434: I/System.out(25774): DEBUG SMTP:   you@mysmtp.com
08-16 11:44:13.434: I/System.out(25774): DEBUG SMTP:   admin@mysmtp.com
08-16 11:44:13.434: I/System.out(25774): DATA
08-16 11:44:13.442: I/System.out(25774): 354 Enter message, ending with "." on a line by itself
08-16 11:44:13.536: I/System.out(25774): Date: Thu, 16 Aug 2012 11:44:10 +0800 (HKT)
08-16 11:44:13.536: I/System.out(25774): From: me@mysmtp.com
08-16 11:44:13.536: I/System.out(25774): To: you@mysmtp.com, admin@mysmtp.com
08-16 11:44:13.536: I/System.out(25774): Message-ID: <1099034872.1.1345088653528.JavaMail.javamailuser@localhost>
08-16 11:44:13.536: I/System.out(25774): Subject: Record cannot be inserted!
08-16 11:44:13.536: I/System.out(25774): MIME-Version: 1.0
08-16 11:44:13.536: I/System.out(25774): Content-Type: multipart/mixed; 
08-16 11:44:13.536: I/System.out(25774):    boundary="----=_Part_0_1098872744.1345088650701"
08-16 11:44:13.536: I/System.out(25774): 
08-16 11:44:13.536: I/System.out(25774): ------=_Part_0_1098872744.1345088650701
08-16 11:44:13.536: I/System.out(25774): Content-Type: application/octet-stream; name=record.csv
08-16 11:44:13.536: I/System.out(25774): Content-Transfer-Encoding: 7bit
08-16 11:44:13.536: I/System.out(25774): Content-Disposition: attachment; filename=record.csv
08-16 11:44:13.536: I/System.out(25774): 
08-16 11:44:13.536: I/System.out(25774): ABD,HK,A,2012/08/16 10:02, ,
08-16 11:44:13.536: I/System.out(25774): 
08-16 11:44:13.536: I/System.out(25774): ------=_Part_0_1098872744.1345088650701
08-16 11:44:13.536: I/System.out(25774): Content-Type: text/plain; charset=us-ascii
08-16 11:44:13.536: I/System.out(25774): Content-Transfer-Encoding: 7bit
08-16 11:44:13.536: I/System.out(25774): 
08-16 11:44:13.536: I/System.out(25774): Please insert manually!
08-16 11:44:13.536: I/System.out(25774): ------=_Part_0_1098872744.1345088650701--
08-16 11:44:13.536: I/System.out(25774): .
08-16 11:44:13.551: I/System.out(25774): 250 OK id=1T1r0E-0001LQ-Al
08-16 11:44:13.551: I/System.out(25774): QUIT
08-16 11:44:13.567: I/System.out(25774): 221 web.mysmtp.com closing connection 
```

失败之一：

```
08-16 11:42:59.129: I/System.out(25322): MAIL FROM:<me@mysmtp.com>
08-16 11:42:59.137: I/System.out(25322): 250 OK
08-16 11:42:59.137: I/System.out(25322): RCPT TO:<you@mysmtp.com>
08-16 11:42:59.192: I/System.out(25322): 250 Accepted
08-16 11:42:59.192: I/System.out(25322): RCPT TO:<admin@mysmtp.com>
08-16 11:42:59.200: I/System.out(25322): 250 Accepted
08-16 11:42:59.200: I/System.out(25322): DEBUG SMTP: Verified Addresses
08-16 11:42:59.200: I/System.out(25322): DEBUG SMTP:   you@mysmtp.com
08-16 11:42:59.200: I/System.out(25322): DEBUG SMTP:   admin@mysmtp.com
08-16 11:42:59.200: I/System.out(25322): DATA
08-16 11:42:59.207: I/System.out(25322): 354 Enter message, ending with "." on a line by itself
08-16 11:42:59.270: I/System.out(25322): Date: Thu, 16 Aug 2012 11:42:56 +0800 (HKT)
08-16 11:42:59.270: I/System.out(25322): From: me@mysmtp.com
08-16 11:42:59.270: I/System.out(25322): To: you@mysmtp.com, admin@mysmtp.com
08-16 11:42:59.270: I/System.out(25322): Message-ID: <1099222896.1.1345088579269.JavaMail.javamailuser@localhost>
08-16 11:42:59.270: I/System.out(25322): Subject: Record cannot be inserted!
08-16 11:42:59.270: I/System.out(25322): MIME-Version: 1.0
08-16 11:42:59.270: I/System.out(25322): Content-Type: multipart/mixed; 
08-16 11:42:59.270: I/System.out(25322):    boundary="----=_Part_0_1098885208.1345088576714"
08-16 11:42:59.270: I/System.out(25322): 
08-16 11:42:59.270: I/System.out(25322): ------=_Part_0_1098885208.1345088576714
08-16 11:42:59.270: I/System.out(25322): Content-Type: text/plain; charset=us-ascii
08-16 11:42:59.270: I/System.out(25322): Content-Transfer-Encoding: 7bit
08-16 11:42:59.270: I/System.out(25322): 
08-16 11:42:59.270: I/System.out(25322): Please insert manually!
08-16 11:42:59.278: I/System.out(25322): ------=_Part_0_1098885208.1345088576714
08-16 11:42:59.278: I/System.out(25322): Content-Type: application/octet-stream; name=record.csv
08-16 11:42:59.278: I/System.out(25322): Content-Transfer-Encoding: 7bit
08-16 11:42:59.278: I/System.out(25322): Content-Disposition: attachment; filename=record.csv
08-16 11:42:59.278: I/System.out(25322): 
08-16 11:42:59.278: I/System.out(25322): ABD,HK,A,2012/08/16 10:02, ,
08-16 11:42:59.278: I/System.out(25322): 
08-16 11:42:59.278: I/System.out(25322): ------=_Part_0_1098885208.1345088576714--
08-16 11:42:59.278: I/System.out(25322): .
08-16 11:42:59.325: I/System.out(25322): 250 OK id=1T1qz2-0001Iq-3T
08-16 11:42:59.325: I/System.out(25322): QUIT
08-16 11:42:59.332: I/System.out(25322): 221 web.mysmtp.com closing connection 
```

我不知道为什么第二个不能成功交付。谁能帮我一把？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:42:40.850

邮件正在发送到您的邮件服务器。查看您的邮件服务器日志以了解它在做什么。

# android - 在下面启动一个没有主应用程序的对话框

> ID：11980070
> 
> 赞同：1
> 
> 时间：2012-08-16T02:50:34.620
> 
> 标签：android

我构建了一个应用程序，该应用程序具有我想从单击状态通知图标开始的活动。我想要发生的是我设置为显示为对话框的活动，以显示在设备上已打开的任何应用程序之上。

但是现在发生的情况是，当单击通知图标时，对话框活动连同其下方的应用程序主活动一起启动，如下图所示。

[http://postimage.org/image/s40v1588b/](http://postimage.org/image/s40v1588b/)

如何启动对话框，以便它显示在屏幕上的当前应用程序上并且我的主要活动没有启动？

主要活动：

```
public class mainActivity extends Activity {
    public  NotificationManager mNotificationManager;
    private Button start;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        start = (Button) findViewById(R.id.start);
        start.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View view) {
                Intent myIntent = new Intent(getApplicationContext(), servicetest.class);
                startService(myIntent);
                Log.d("start","sms");
                Toast.makeText(SmseverywhereActivity.this, "Service Started",
                        Toast.LENGTH_LONG).show();
            }

        });

    }

} 
```

侦听通知按下并启动对话活动的服务：

```
 public class servicetest extends Service{
        public  NotificationManager mNotificationManager;
        public Intent dialogIntent;

        @Override
        public IBinder onBind(Intent intent) {
            // TODO Auto-generated method stub
            return null;
        }
        @Override
        public void onCreate() {
            super.onCreate();
            Log.d("servicetest","onCreate");
            mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
            showNotification();

            }

         private void showNotification(){
                Notification not = new Notification(R.drawable.ic_launcher, "Application started", System.currentTimeMillis());
                Intent myIntent = new Intent(this, dialogactivity.class);
                myIntent.putExtra("isFullScreen", true);
                myIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

                PendingIntent contentIntent = PendingIntent.getActivity(this, 0, myIntent, Notification.FLAG_ONGOING_EVENT);        
                not.flags = Notification.FLAG_ONGOING_EVENT;            
                not.setLatestEventInfo(this, "Application Name", "Application Description", contentIntent);
                mNotificationManager.notify(1, not);
            }

    }

Dialog activity:
public class dialogactivity extends Activity{
     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            requestWindowFeature(Window.FEATURE_NO_TITLE);
            getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
            setContentView(R.layout.dialogtest);

     }
} 
```

显现：

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SmseverywhereActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:label="@string/app_name"
            android:name="NewText"
            android:theme="@android:style/Theme.Dialog"
            android:launchMode="singleTask"
            android:screenOrientation="user">
        </activity>

        <service android:enabled="true" android:name=".servicetest" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T19:32:27.233

我发现了我的问题，我需要`finish();`从我的主要活动中调用，以便每次启动其他活动时它都不会重新启动。

# eclipse - cmd上eclipse控制台的状态

> ID：11980071
> 
> 赞同：1
> 
> 时间：2012-08-16T02:50:39.610
> 
> 标签：eclipse, jboss, cmd, status

我们有什么方法可以在命令行 MSDOS 上查看 Eclipse 控制台的状态（或流量），因为我有两个屏幕，所以我只想在有任何操作时查看应用程序的状态。我看起来像当我在使用 JBOSS 时，然后我打开 MSDOS，我输入standalone.bat，它显示了运行 JBOSS 时的状态。谢谢大家。

# php - 联系表格在现场不起作用

> ID：11980074
> 
> 赞同：0
> 
> 时间：2012-08-16T02:50:55.610
> 
> 标签：php, forms, phpmailer

我目前正在这个网站上工作： [链接到网站](http://www.skipsaviano.com/contact.html)

并且表格似乎不起作用。当您提交时，它总是会转到错误页面。我还在 Windows 服务器上尝试了这个站点（不确定这是否会有所不同）并且表单工作正常。

这是我正在使用的代码...

```
 <?php

            // get posted data into local variables

            $EmailTo = "***@***.com";
            $Subject = Trim(stripslashes($_POST['Subject'])); 
            $Name = Trim(stripslashes($_POST['Name'])); 
            $Email = Trim(stripslashes($_POST['Email'])); 
            $Address = Trim(stripslashes($_POST['Address'])); 
            $City = Trim(stripslashes($_POST['City'])); 
            $State = Trim(stripslashes($_POST['State'])); 
            $Zip = Trim(stripslashes($_POST['Zip'])); 
            $Phone = Trim(stripslashes($_POST['Phone'])); 
            $Message = Trim(stripslashes($_POST['Message'])); /*
            $Sign = Trim(stripslashes($_POST['Sign'])); 
            $Volunteer = Trim(stripslashes($_POST['Volunteer'])); 
            $Walk = Trim(stripslashes($_POST['Walk'])); 
            $Coffee = Trim(stripslashes($_POST['Coffee'])); 
            $Calls = Trim(stripslashes($_POST['Calls'])); 
            $Donate = Trim(stripslashes($_POST['Donate'])); */
            $EmailFromName = $Name;
            $EmailFromAddress = $Email;

            // validation
            $validationOK=true;
            if (!$validationOK) {
              print "<meta http-equiv=\"refresh\" content=\"0;URL=error.html\">";
              exit;
            }

            // prepare email body text
            $Body = "";
            $Body .= "This Email was sent from the Saviano for State Representative Website, contact page.";
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Name: ";
            $Body .= $Name;
            $Body .= "\n";
            $Body .= "Address: ";
            $Body .= $Address;
            $Body .= "\n";
            $Body .= "City: ";
            $Body .= $City;
            $Body .= "\n";
            $Body .= "State: ";
            $Body .= $State;
            $Body .= "\n";
            $Body .= "Zip: ";
            $Body .= $Zip;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Phone: ";
            $Body .= $Phone;
            $Body .= "\n";
            $Body .= "Email: ";
            $Body .= $Email;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Subject: ";
            $Body .= $Subject;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Message: ";
            $Body .= $Message;
            $Body .= "\n";
            $Body .= "\n";/*
            $Body .= "Sign: ";
            $Body .= $Sign;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Volunteer: ";
            $Body .= $Volunteer;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Walk: ";
            $Body .= $Walk;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Coffee: ";
            $Body .= $Coffee;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Calls: ";
            $Body .= $Calls;
            $Body .= "\n";
            $Body .= "\n";
            $Body .= "Donate: ";
            $Body .= $Donate;*/
            $Body .= "\n";

            // send email 
            $success = mail($EmailTo, $Subject, $Body, "From: $EmailFromName <$EmailFromAddress>");

            // redirect to success page 
            if ($success){
              print "<meta http-equiv=\"refresh\" content=\"0;URL=thanks.html\">";
            }
            else{
              print "<meta http-equiv=\"refresh\" content=\"0;URL=error.html\">";
            }
            ?> 
```

ps调查和志愿者页面上的表格也不起作用，但可以在Windows服务器上使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:20:02.280

根据[RFC 2822](http://www.faqs.org/rfcs/rfc2822.html)：标题字段由 CRLF 终止。

试试这个（我在最后添加了“\r\n”）：

```
$success = mail($EmailTo, $Subject, $Body, "From: $EmailFromName <$EmailFromAddress>\r\n"); 
```

# selenium - 使用 Selenium WebDriver 测试浏览器之间的视觉差异

> ID：11980078
> 
> 赞同：2
> 
> 时间：2012-08-16T02:51:33.037
> 
> 标签：selenium, cross-browser, qa, web-testing, selenium-webdriver

也许我错过了 Selenium 的一部分功能。在进行跨浏览器测试时，我主要是想了解我的需求。在进行了数周的手动测试之后，我开始意识到我测试的页面功能都是一样的，但是我遇到的所有问题都源于视觉问题。我不需要断言元素是否存在；如果它在一个浏览器中，它就是全部。浏览器之间的数据也不会改变。

所以我的问题主要是视觉上的。例如，在 Internet Explorer 中显示的文本框应该与 Firefox 和 Chrome 中的文本框位于同一行。当不同的浏览器显示的字体类型应该相同时，它会有所不同。标题行换行是因为一个浏览器中的字体大小导致它在另一个浏览器中保持在同一行时这样做。

有谁知道上述场景的可用示例？Selenium 是适合我使用的工具吗？或者我应该坚持手动测试这样的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T09:27:00.937

我建议在不同浏览器中运行测试时截屏。然后您可以一口气比较不同浏览器中的视图。是的，这将涉及一些手动审查，但可以使用 Selenium 自动执行这些操作，这将为您节省大量时间。

您可以使用类似的功能

```
public void takeScreenShot (String filename) throws Exception {
    File scrFile = ((TakesScreenshot)driver).getScreenshotAs(OutputType.FILE);
    FileUtils.copyFile(scrFile, new File("[path to storing folder]"+ filename + ".jpg"));
} 
```

在执行某些操作后，您可以在任何您认为视图很重要的地方调用此函数。

你不得不 -

```
import org.openqa.selenium.OutputType;
import org.openqa.selenium.TakesScreenshot; 
```

但是 Eclipse 可以处理这部分。:)

我希望这能回答你的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T20:36:39.727

回答这个问题可能已经很晚了。

您可以通过使用 Sikuli 库来实现这一点。这仅适用于 Java 语言。比较 UI 的好工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T19:07:22.877

您可以使用`Ocular`- 一个使用 Selenium WebDriver 进行视觉验证的开源库。

**更多信息：**

[http://www.testautomationguru.com/ocular-automated-visual-validation-for-selenium-webdriver-test-automation-frameworks/](http://www.testautomationguru.com/ocular-automated-visual-validation-for-selenium-webdriver-test-automation-frameworks/)

# php - 带有 MySQL 查询的 PHP 自定义函数无法正常工作

> ID：11980083
> 
> 赞同：0
> 
> 时间：2012-08-16T02:52:13.177
> 
> 标签：php, mysql, function

好的，这是简短的操作，我有运行 8 个 MySQL 查询的自定义函数`SELECT, UPDATE, DELETE`。现在我有严格的标准，所以每次运行查询时我都必须删除错误消息。所以我做了`error_reporting(0);`，然后下一个查询`error_reporting(-1)`

```
 $add_log = "INSERT INTO ac_cand_log
                        (
                            id,
                            action,
                            time
                        )
                      VALUES
                        {$var}";
        $error_reporting = error_reporting();
        error_reporting(0);
        MysqlFns::ExecuteQuery($add_log, "insert");
        error_reporting($error_reporting); 
```

现在我很困惑，因为我运行了这个函数，但由于某种原因它没有产生必要的结果。我相信它会一直运行到最后。切换错误报告级别会导致 php/mysql 发疯吗？

我也只是在它发生之前导入了备份数据库。我知道这发生在我之前，当我刚开始从事这个项目并导入数据库时​​，我无法追踪原因，然后它就停止了。

基本上，我`error_reporting(-1);`在函数中设置了所有查询，并`die;`在最后放置了有趣的事情，它显示了严格的标准警告，并且对于每个执行的查询没有其他警告，但是数据库是不完整的，当我刷新页面时，所有记录都与运行查询之前相同。

有人可以为我解决这个掌握吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:59:29.747

你需要这样的功能

```
function skip($boolean = true) {
    if($boolean) {
         error_reporting(0);
    }
    else {
         error_reporting(E_ALL | E_STRICT);
    } 
```

查询前，

```
skip(true);
#Query here# 
```

查询后，需要将error_reporting设为默认

```
skip(false); 
```

如果没有用，您需要显示您的 mysql 函数用于查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:00:22.590

有了下面这个严格的标准

> 不应静态调用非静态方法 MysqlFns::ExecuteQuery()，假设 $this 来自第 153 行 /home/xxx/111/222/333/bbb/ccc/myclass.php 中的不兼容上下文

你可以试试

```
$add_log = "INSERT INTO ac_cand_log
                (
                    id,
                    action,
                    time
                )
              VALUES
                {$var}";
$error_reporting = error_reporting();
error_reporting(0);
$Mysqlfns = new MysqlFns();
$Mysqlfns->ExecuteQuery($add_log, "insert");
error_reporting($error_reporting); 
```

因为 ExecuteQuery() 不是静态方法，所以不能将其称为静态方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:41:00.837

首先，忽略错误和警告是一个非常糟糕的主意。如果您不想向用户显示它们，请打开 log_errors 指令并在 PHP.INI 中设置 error_log 路径，同时禁用 display_errors 指令。

如果您出于某种原因想要忽略错误，按功能提供，请尝试以下操作：

```
set_error_handler(function ($errno, $errstr) { }, E_ALL );
//your code
restore_error_handler(); 
```

但更好的方法是修复你的 MySQL 函数——你能给出代码还是只是这个 Strict Standarts 错误？

# javascript - Javascript：单词到数字

> ID：11980087
> 
> 赞同：9
> 
> 时间：2012-08-16T02:52:45.280
> 
> 标签：javascript, numbers, word

如何在 JavaScript 中将单词转换为数字？

示例：“19 天后”将变为“19 天后”。

我可以使用 jQuery 或其他库 - 如果不是 jQuery，希望是一个较小的库。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-17T23:28:53.823

这是我的 @Greg Hewgill 的 Python 模块的 JavaScript 替换，减去了代码底部的测试：

```
var Small = {
    'zero': 0,
    'one': 1,
    'two': 2,
    'three': 3,
    'four': 4,
    'five': 5,
    'six': 6,
    'seven': 7,
    'eight': 8,
    'nine': 9,
    'ten': 10,
    'eleven': 11,
    'twelve': 12,
    'thirteen': 13,
    'fourteen': 14,
    'fifteen': 15,
    'sixteen': 16,
    'seventeen': 17,
    'eighteen': 18,
    'nineteen': 19,
    'twenty': 20,
    'thirty': 30,
    'forty': 40,
    'fifty': 50,
    'sixty': 60,
    'seventy': 70,
    'eighty': 80,
    'ninety': 90
};

var Magnitude = {
    'thousand':     1000,
    'million':      1000000,
    'billion':      1000000000,
    'trillion':     1000000000000,
    'quadrillion':  1000000000000000,
    'quintillion':  1000000000000000000,
    'sextillion':   1000000000000000000000,
    'septillion':   1000000000000000000000000,
    'octillion':    1000000000000000000000000000,
    'nonillion':    1000000000000000000000000000000,
    'decillion':    1000000000000000000000000000000000,
};

var a, n, g;

function text2num(s) {
    a = s.toString().split(/[\s-]+/);
    n = 0;
    g = 0;
    a.forEach(feach);
    return n + g;
}

function feach(w) {
    var x = Small[w];
    if (x != null) {
        g = g + x;
    }
    else if (w == "hundred") {
        g = g * 100;
    }
    else {
        x = Magnitude[w];
        if (x != null) {
            n = n + g * x
            g = 0;
        }
        else { 
            alert("Unknown number: "+w); 
        }
    }
} 
```

我对 IE 中的 RegEx-ing 和 for-each 错误感到有些困惑，但就是这样。从 Python 到 JavaScript 的相当不错的转换，如果我自己可以这么说的话，我不能。它需要一些工作——“一百二十”是行不通的——但现在已经足够了。当然，感谢@Greg Hewgill 的原版，用 Python 编写。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-08-09T14:33:48.077

这是一个（真的）旧线程，但如果其他人偶然发现，我制作了一个节点模块，灵感来自上面的答案，它可以完成上述所有操作，还可以：

*   处理破折号和逗号
*   匹配字符串中的多个数字
*   模糊匹配数字单词
*   解释小数位

这是链接：[单词到数字](https://www.npmjs.com/package/words-to-numbers)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-16T02:54:45.927

我为 Python 编写了一个小模块来执行此操作：[https ://github.com/ghewgill/text2num/blob/master/text2num.py](https://github.com/ghewgill/text2num/blob/master/text2num.py)

将其转换为 Javascript 应该很简单。

# macos - Mac OS X 上的屏幕抓取帮助

> ID：11980093
> 
> 赞同：0
> 
> 时间：2012-08-16T02:53:42.460
> 
> 标签：macos, screen-scraping, web-scraping

我有兴趣了解有关 Mac OS X 中屏幕抓取的更多信息。

基本上，我正在考虑它的原因是有一个喜剧演员有一个非常有趣的假推特账户，阅读所有过去推文的唯一方法是通过我找到的存档网站。该站点的设置方式是它是一个主页，并且在过去两年中每天都有一个链接（只是页面下方的基本锚标记）。这是一个非常简单的网站，我想如果我能够抓取数据并将其放入文件中，我可以在一个地方阅读所有内容，而不是点击数百个链接。

我基本上以此为借口来学习这种编码方法。

我用谷歌搜索，似乎找不到太多东西。我有点了解 PHP 代码（我在 PHP 方面很不错），但不确定是否可以从页面上的链接中抓取数据。从单个屏幕上抓取似乎相对容易。

我的另一个问题是你如何运行代码？我见过几个适用于 Windows 和 Linux 的程序，但我还没有看到适用于 Mac OS X 的程序（我使用的是 OS 10.8）。

有人能指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:12:42.440

将此项目视为学习 python 的借口。上手速度非常快，并且有很多很棒的软件包可以处理几乎所有你能想到的东西，包括这个。

几周前我把它加了书签：

[http://jeanphix.me/Ghost.py/](http://jeanphix.me/Ghost.py/)

它是一个 python webkit 客户端——你基本上可以用几行代码从页面中提取任何你想要的东西。

# jquery - 如何选择 UL>LI 中的链接并使其不可使用 jQuery 进行点击？

> ID：11980098
> 
> 赞同：0
> 
> 时间：2012-08-16T02:54:07.803
> 
> 标签：jquery

我对 jQuery 有点不熟悉，但我知道它可以执行以下操作：

选择以下 HTML 中的链接，使其不会去任何地方。（我这样做是为了显示一个下拉菜单）

这是HTML

```
<ul id="navigation">
  <li class="has-drop"><a href="http://72.10.55.131/shop.html/">shop</a></li>
  <li class="has-drop"><a href="http://72.10.55.131/collections.html/">collections</a></li>
</ul> 
```

我正在尝试针对列表中的第二个。如果您想查看源代码，这些链接是实时的。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T02:55:35.120

捕获点击事件并阻止默认行为：

```
$('#navigation li.dropdown').on('click', function(event) {
  event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T02:59:10.460

由于您`I'm trying to target the second one on the list.`在问题中提到，所以如果您只想禁用第二个列表项的链接行为，那么您可以使用

```
$('ul#navigation li').eq(1).find('a').on('click', function(e){
    e.preventDefault();
}); 
```

否则（对于所有链接），您可以使用`Blender`'s answer。

[**演示**](http://jsfiddle.net/Xm8ay/1/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:03:17.477

尝试这个

```
$('li.has-drop:eq(1) a').attr('href','#'); 
```

# java - Sqllite 查询返回 0 行的游标

> ID：11980099
> 
> 赞同：0
> 
> 时间：2012-08-16T02:54:23.363
> 
> 标签：java, android, sqlite, cursor

我正在尝试使用以前填充的 sqlite 数据库中的查询来检索数据。但由于某种原因，查询`returnscursor`没有行。

所以这是我尝试检索数据的部分：

```
 database.open();
    Cursor cursor = database.getComponentData("CONTROLS", null, null);

    int test = cursor.getCount();//This is the part where i test through the eclipse debugger whether there is  any rows return
    cursor.moveToFirst();
    while (!cursor.isAfterLast()) {

        get.append("Video controls : "+cursor.getString(1)+" Audio Controls : "+cursor.getString(2)+" Reader controls : "+cursor.getString(3));
        cursor.moveToNext();
    }
    cursor.close();
    Cursor cursor1 = database.getComponentData("LIST", new String[]{"'URL'"},"AUDIO");

    get.append("Video list : ");
        cursor1.moveToFirst();
    while (!cursor1.isAfterLast()) {

        get.append(" "+cursor1.getString(1)+" "+cursor1.getString(2)+" "+cursor1.getString(3));
        cursor1.moveToNext();

    }
    cursor1.close();
    database.close(); 
```

这是我查询的数据库适配器中的部分。

```
public Cursor getComponentData(String whichTable,String[] whichColumn,String whichSection) {
    Cursor c = null;
    if(whichSection!=null) 
    {   
        return database.query(whichTable, whichColumn,"SECTION = '"+whichSection+"'",null, null, null, null);
    }
    else{
        return database.query(whichTable, whichColumn,null,null, null, null, null);
    }

} 
```

这是我之前插入数据库的部分：

```
 database.open();
               ContentValues control = new ContentValues();
               control.put("VIDEO_CONTROLS",video_control);
               control.put("AUDIO_CONTROLS",audio_control);
               control.put("READER_CONTROLS",book_control);

               control_long =database.insertNewControl(control);

               ContentValues temp_list = new ContentValues();

                a_p=audio_playlist.split(",");
                v_p=video_playlist.split(",");
                b_p=booklist.split(",");
               for(int i =0;i<a_p.length;i++){
                   temp_list.put("NAME", "test");
                   temp_list.put("URL", a_p[i]);
                   temp_list.put("SECTION", "AUDIO");

                list_long=   database.insertNewListRow(temp_list);

               }
               for(int i =0;i<v_p.length;i++){
                  temp_list.put("NAME", "test");
                   temp_list.put("URL", v_p[i]);
                   temp_list.put("SECTION", "VIDEO");
                   list_long=    database.insertNewListRow(temp_list);

                   }
               for(int i =0;i<b_p.length;i++){
                 temp_list.put("NAME", "test");
                   temp_list.put("URL", b_p[i]);
                   temp_list.put("SECTION", "READER");
                   list_long=   database.insertNewListRow(temp_list);

                   }
                database.close(); 
```

在适配器中插入方法：

```
 public Long insertNewControl(ContentValues controls_values) {
return database.insert("CONTROLS", null, controls_values);  
}
public Long insertNewListRow(ContentValues list_values){
return database.insert("LIST", null, list_values);  
} 
```

谢谢阅读。

**编辑：** 忘记提及这一点，如果我在`query()`插入这些行后立即从数据库中取出行，我将能够取出行。但是我要在我`close()`和`open()`再次查询这些行之后，游标不返回任何行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:16:54.473

删除了我的答案回合`cursor`（第一个光标）

cursor1 返回 null 因为您不需要`'`在列名之间放入，只需放入`"URL"`而不是`"'URL'"`

你也不需要测试计数，`moveToFirst()`它本身返回一个布尔值，如果光标为空，它将返回 false。所以你需要做的是

```
if (cursor.moveToFirst()) {
    //do what you want
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T05:02:02.033

我忘记发布我找到的解决方案，

基本上发生的事情是我忘记在创建数据库和表的类的构造函数中命名数据库。*史诗脸掌*

# sql - SQL：如何在 MS ACCESS 的同一 sql 命令中使用 count、sum 和 max 函数

> ID：11980100
> 
> 赞同：2
> 
> 时间：2012-08-16T02:54:28.403
> 
> 标签：sql, ms-access-2007

我是 SQL 的初学者。我只能单独执行所有这些操作，但是当我必须在同一个 SQL 命令中执行所有这些操作时，我感到很困惑。所以你能帮我解决这个问题吗？

我有 3 个表 tbl_user、tbl_sActivity、tbl_client

```
tbl_user
    user_id | first_name | last_name |
    1       |  name1     |  last1    |
    21      |  name2     |  last2    |
    22      |  name3     |  last3    |

tbl_sActivity
user_id | client_id | act_status | act_date |
 1      |    7      |    cold    | 19/7/12  |
 1      |    7      |   dealed   | 30/7/12  |
 22     |    5      |    cold    | 7/8/12   |
 1      |    6      |    cold    | 16/7/12  |
 1      |    6      |    warm    | 18/7/12  |
 1      |    6      |     hot    | 25/7/12  |
 1      |    6      |   dealed   | 7/8/12   |
 1      |    8      |    warm    | 1/8/12   |
 1      |    8      |   dealed   | 12/8/12  |
 21     |    4      |    warm    | 8/8/12   |
 21     |    4      |   dealed   | 10/8/12  |

tbl_client
client_id | client_price |
4         |     400      |
5         |     500      |
6         |     600      |
7         |     700      |
8         |     800      | 
```

我希望输出看起来像这样

```
user_id |Count_Client_id |Sum_client_price | Max_act_date|
1       |     3          |     2100        |   12/8/12   |
21      |     1          |      400        |   10/8/12   |
22      |     1          |      500        |    7/8/12   | 
```

非常感谢下面是我的尝试...

```
SELECT tbl_user.user_id, Count(tbl_client.client_id) AS count_client, 
       Sum(tbl_client.client_price) AS SumOfclient_price, tbl_user.first_name,
       tbl_user.last_name, Max(tbl_sActivity.act_date) AS MaxOfact_date
FROM   (tbl_client INNER JOIN tbl_sActivity ON 
       (tbl_client.client_id=tbl_sActivity.client_id) AND 
       (tbl_sActivity.client_id=tbl_client.client_id)) INNER JOIN tbl_user ON
        tbl_sActivity.user_id=tbl_user.user_id
GROUP BY tbl_user.user_id, tbl_user.first_name, tbl_user.last_name; 
```

这是返回正确输出的 count(distinct client_id)

```
SELECT tmp.user_id, Count(*) AS count_distinct_clients
FROM (SELECT DISTINCT user_id, client_id FROM tbl_sActivity)  AS tmp
GROUP BY tmp.user_id; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T09:06:27.000

久经考验的 Access 2003：

```
SELECT U.user_id, Count(A.act_status) AS Count_Client_id, Sum(C.client_price) AS
Sum_client_price, Max(A.act_date) AS Max_act_date
FROM (tbl_user AS U INNER JOIN tbl_sActivity AS A ON U.user_id = A.user_id) INNER JOIN 
tbl_client AS C ON A.client_id = C.client_id
GROUP BY U.user_id 
```

更新以根据示例生成输出：

```
SELECT U.user_id, Count(A.client_id) AS CountOfclient_id, Sum(A.client_price) AS
SumOfclient_price, S.Max_act_date
FROM (tbl_user AS U INNER JOIN [SELECT DISTINCT tbl_SActivity.client_id, 
tbl_SActivity.user_id, tbl_client.client_price
FROM tbl_SActivity INNER JOIN tbl_client ON tbl_SActivity.client_id = 
tbl_client.client_id]. AS A ON U.user_id = A.user_id) INNER JOIN [SELECT MAX(act_date) AS Max_act_date, user_id FROM tbl_sActivity GROUP by user_id]. AS S ON U.user_id = S.user_id
GROUP BY U.user_id, S.Max_act_date 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-16T03:41:32.477

试试这个查询。我测试过：

```
SELECT  a.user_id ,
    COUNT(DISTINCT b.client_ID) Count_Client_id,
    SUM( DISTINCT c.client_Price) Sum_client_price,
    MAX(b.act_date) Max_act_date
FROM    tbl_user a
        INNER JOIN tbl_sActivity b
            on a.user_id = b.user_id
        INNER JOIN tbl_client c
            on b.client_ID = c.client_ID
GROUP BY a.user_ID 
```

请享用。

# eclipse - Eclipse 4 Juno 主题

> ID：11980102
> 
> 赞同：16
> 
> 时间：2012-08-16T02:54:39.913
> 
> 标签：eclipse, themes

我运行了 google/bing 搜索，发现只有一个 Eclipse 4 Juno 主题。我想知道是否有任何主题网站或更多主题插件。

我想自定义它的外观，而不仅仅是普通的编辑器颜色；）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-16T04:04:06.653

正如[Lars Vogel](http://www.vogella.com/about.html)在“ [New Eclipse 4 Chrome Theme – Eclipse 4 get even more beautiful](http://www.vogella.com/blog/2012/07/25/new-eclipse-4-chrome-theme-eclipse-4-get-even-more-beautiful/) ”中所报道的：

> 结帐[https://github.com/jeeeyul/eclipse-themes/](https://github.com/jeeeyul/eclipse-themes/)以获取新的 Chrome 主题。下面列出了更新方面，主网站描述了设置和可用的自定义。

因此，它是 Eclipse 的*完整*（即“不仅仅是编辑器颜色”）定制的第一个示例（除了[现有的深色主题](https://stackoverflow.com/questions/5053834/eclipse-ide-for-java-full-dark-theme/5349143#5349143)）

![截屏](../Images/32dc8875aec4c3b51564d4cc6186a7d4.png)

[Michael](https://stackoverflow.com/users/1694500/michael) [提出](https://stackoverflow.com/review/suggested-edits/3121658)以下指示：

> `Help / Install New Software`在 Eclipse中单击`add`以下更新站点以下载主题：[https](https://raw.github.com/jeeeyul/eclipse-themes/master/net.jeeeyul.eclipse.themes.updatesite/) ://raw.github.com/jeeeyul/eclipse-themes/master/net.jeeeyul.eclipse.themes.updatesite/ （[取自此页面](http://www.vogella.com/blog/2012/07/25/new-eclipse-4-chrome-theme-eclipse-4-get-even-more-beautiful/)）。
> 然后检查`Jeeeyul's themes`安装它。
> 
> 安装后可以点击，然后在注册中`Window / Preferences / General / Appearance`选择`Jeeeyul's themes - Chrome Theme`并自定义。 享受真棒主题:)`... / Chrome Theme`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-13T19:34:53.550

看看[http://eclipsecolorthemes.org](http://eclipsecolorthemes.org)

易于安装的 Eclipse 颜色主题的资源。越来越多的最佳和最受欢迎的配色方案可供使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-20T19:36:20.647

首先安装[http://eclipsecolorthemes.org/提供的 The Eclipse Color Theme Plugin](http://eclipsecolorthemes.org/)

**要安装插件**，请转到帮助→安装新软件...，按添加站点并输入 Eclipse Color Theme 作为名称，并输入[http://eclipse-color-theme.github.com/](http://eclipse-color-theme.github.com/) update 作为 URL。然后从标记为 Work with 的选择框中选择新条目，标记 Eclipse Color Theme 进行安装并继续。

安装后重启eclipse。然后去窗口→首选项→常规→外观→颜色主题更改颜色主题。

# actionscript-3 - 需要将 var 值增加 +1，并且在同一功能 AS3 中多次增加 - 请检查我的代码

> ID：11980103
> 
> 赞同：0
> 
> 时间：2012-08-16T02:54:44.710
> 
> 标签：actionscript-3, function, add, trace

你能看看我下面的代码吗，每次球没有击中球门区域（这是一场点球大战）时，我需要将 var miss 增加 1，但问题是它增加了很多倍，这是跟踪变量值后输出消息，以便您有一个想法：

失败 1 1 失败 2 2 失败 3 3 失败 4 4 失败 5 5 失败 6 6 失败 7 7 失败 8 8 失败 9 9 失败 10 10依此类推，我的代码是这样的，我很确定影响所需结果的行是 stage.addEventListener(Event.ENTER_FRAME, onEnter); 你能给我一些关于如何解决这个问题的建议吗？当在 moveBall 函数中移动时，可能会尝试另一种方式来移动球？我从你们那里得到了很多帮助，很抱歉让我如此烦人，只是我还是个新手，在我的代码和我迄今为止收集的想法之间的某些点上卡住了。这是我的代码

```
import flash.events.Event;
import flash.ui.Mouse;
import flash.geom.Point;
import flash.events.MouseEvent;

 var misses:int= 0;//Here the var used trying to put the game over when player misses 3 shoots
var cursor:MovieClip; // mouse will be converted to a cursor (aim) which is the spot ball must follow
var nowX:Number; ;// will be used to move the ball
var nowY:Number;// will be used to move the ball
var isUpdating:Boolean = false; // will be used to control mouse events and other later on
var isClipSync:Boolean = false; // will be used to control mouse events and other later on
const START_BALL_POINT:Point = new Point(296,353); // returning the ball to original positions
function initializeGame():void
 {   
cursor = new Cursor();
addChild(cursor);
cursor.enabled = false;
//Mouse.hide(); 
stage.addEventListener(MouseEvent.CLICK, dragCursor);
stage.addEventListener(MouseEvent.MOUSE_MOVE, onCursorMove);
  }

  function onCursorMove(e:MouseEvent):void
  {
cursor.x = mouseX;
cursor.y = mouseY;
 }

function onEnter(e:Event):void
{
 isUpdating= true;

 if(pateador_mc.currentFrame == 19) 
 {
     pateador_mc.gotoAndStop(1);
 }
 //trace(pateador_mc.currentFrame);
 //

if(pateador_mc.currentFrame > 11)
    isClipSync = true;

 moveBall();
  }

  function dragCursor(event:MouseEvent):void
 {
if(isUpdating) return;

trace(isUpdating);
nowX = mouseX;
nowY = mouseY;

pateador_mc.play();
stage.addEventListener(Event.ENTER_FRAME, onEnter);// probably this is causing        multiple count of trace events when I try to gather the failed shoots
}

initializeGame();
var mouse=this.Mouse;

var speed:int = 800;
var ease:int = 4;
 var gravity:Number = 0.5;
function moveBall()
  {
if(!isClipSync) return;

bola.x += 0.2 * (nowX - bola.x);
bola.y += 0.2 * (nowY - bola.y);

if(Math.abs(nowX-bola.x)<1 && Math.abs(nowY-bola.y)<1) 
{
    stage.removeEventListener(Event.ENTER_FRAME, onEnter);
    isUpdating = false;
    isClipSync = false;
    var timer3:Timer = new Timer(3000,1);
    timer3.addEventListener(TimerEvent.TIMER, accionRepetida3);
    timer3.start();
    function accionRepetida3(e:TimerEvent)
    {
    bola.x = START_BALL_POINT.x;
    bola.y = START_BALL_POINT.y;}
}
if (bola.hitTestObject(goalie))
{

    gol_mc.play();  /// All good at this point
    red_mc.play();

}
//
  else
{

    misses++;
    trace("It's a fail", misses);

}

 } 
```

如果有好朋友花时间检查一下，我将非常感激，我保证当我遇到更好的程序员时，我会帮助所有需要它的人。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:05:05.957

你能修改你的代码并再次给出输出吗？

```
trace("It's a fail for barrier3", misses)
trace("It's a fail for barrier2", misses) and so on. 
```

# java - 在 Java 中搜索 JList

> ID：11980106
> 
> 赞同：3
> 
> 时间：2012-08-16T02:54:51.337
> 
> 标签：java, swing, jlist, keylistener

我正在尝试使用 Java 中的 JList 创建搜索功能。我在插入到 JList 的 ListModel 中有一个联系人列表。它显示所有联系人都很好。但是，我在联系人列表上方有一个搜索框，并希望将联系人缩小到用户在输入时在搜索框中输入的内容（如 Google 搜索）。但是，当我尝试在搜索框中输入时，所有联系人都会消失，然后我也无法退格。我的 KeyListener 代码如下：

```
KeyListener klisten = new KeyListener() 
    {
        public void keyPressed(KeyEvent evt) 
        {
            searchResults = new ContactList();
            listModel.removeAllElements();
            searchResults.addContact(contactList.getContact(evt.getKeyChar()));
            for (int i = 0; i < searchResults.getContacts().size(); i++)
            {
                listModel.addElement(searchResults.getContact(i).getFname() + " " + searchResults.getContact(i).getLname());
            }
            contacts = new JList(listModel);
            contacts.validate();
        }
        public void keyReleased(KeyEvent evt) {} 
        public void keyTyped(KeyEvent evt) {}
    };
    searchField.addKeyListener(klisten); 
```

**编辑****包含所有原始联系人的原始 ListModel 在此匿名类之前声明，称为 listModel，我在此类中重用它来替换完整的联系人列表..

解决这个问题的任何帮助都会有很大帮助。让我知道是否需要发布我的代码的其他部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:15:16.963

没有其余代码，很难看到逻辑。考虑发布[SSCCE](http://sscce.org/)。看起来您正在重新创建`JList`关键侦听器事件：

```
contacts = new JList(listModel); 
```

需要将该新列表添加/读取到容器中。看起来不需要重新创建列表，因为`listModel`它是最新的，它应该通知列表刷新更改，除非`searchResults`为空。不看代码，只是猜测。

`JTable`使用带有过滤支持的单列可能更容易。有关详细信息，请参阅[排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T08:36:29.383

考虑使用支持列表过滤的框架，例如 fi [SwingX](http://swingx.java.net)

然后基本步骤是：

*   实现一个 RowFilter，它根据名称片段过滤联系人
*   将 DocumentListener 安装到 textField
*   在文档的更改通知中，在列表中安装一个新的过滤器

伪代码片段

```
// the custom RowFilter
public class ContactRowFilter extends RowFilter {
    private String compare;

    public ContactRowFilter(String compare) {
        this.compare = compare;
    }

    public boolean include(Entry entry) {
        Contact contact = (Contact) entry.getValue(0);
        return contact.getName().contains(compare);
    }
}

// custom documentListener
public class SearchFieldListener implements DocumentListener {
    private JXList list;

    public SearchFieldListener(JXList list) {
        this.list = list;
    }

    @Override
    public void insertUpdate(...) {
        updateFilter(evt.getDocument());
    }
    ....
    protected void updateFilter(Document doc) {
        String text = doc.getText(0, doc.getLength());
        list.setRowFilter(text.length > 0 ?
            new ContactRowFilter(text) : null);
    }

}

// usage
JXList list = new JXList(myModel);
list.setAutoCreateRowSorter(true);
DocumentListener listener = new SearchFieldListener(list);
JTextField searchField = new JTextField(20);
searchField.getDocument().addDocumentListener(listener); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-16T03:18:43.757

我已经快速阅读了，老实说，没有什么可去的。

我不确定这种方法的结果

```
searchResults.addContact(contactList.getContact(evt.getKeyChar())); 
```

这对我来说表明没有可用的联系人

```
searchResults = new ContactList(); 
```

但那是因为我缺少上下文。

更好的解决方案可能是使用“代理”模型，基本上是一个包装模型的模型，它为您提供过滤器功能，或者正如 Max 所建议的那样，`JTable`

# ios - 使用滑块导航一系列图像

> ID：11980108
> 
> 赞同：0
> 
> 时间：2012-08-16T02:54:54.560
> 
> 标签：ios, xcode, arrays, uiimageview, slider

我是新来的，提前道歉。我在网上搜索了示例代码和教程，但没有找到任何可以回答我问题的内容。

我有一个 UIImageView 的图像数组，并希望能够使用滑块根据滑块值在图像之间来回移动

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:39:54.290

一个快速的食谱会是这样的：

a) 将滑块添加到视图控制器 - 在代码或界面构建器中。
b) 确保将属性分配并连接到滑块 c) 将最小值设置为 0，将滑块的最大值设置为照片数组的计数 d) 让滑块动作以动作或方法为目标（连接它 - ctrl 拖动等) e) 将滑块值从浮点数转换为 int 值 f) 在数组中滑块值指向的位置抓取图像 g) 设置图像

所以像这样，我假设你使用了界面生成器并将滑块连接到一个名为滑块的属性和一个名为 showPicture 的 ibaction，并且你有一个名为 photoView 的 UIImageView 和一个名为 photoArray 的照片数组。

```
-(void)viewDidLoad {

 self.slider.minimumValue = 0;
 self.slider.maximumValue = self.photoArray.count;
 }

-(IBAction)showPicture:(id)sender {
    //this gets called when the slider changes value

    int index = (int) self.slider.value;  //convert slider value to int value
    self.photoView.image = [self.photoArray objectAtIndex:index];  //set the image

} 
```

沿着这些思路的东西应该可以解决问题。好起来

# ruby-on-rails - Cucumber/Capybara：检查页面是否没有内容？

> ID：11980109
> 
> 赞同：23
> 
> 时间：2012-08-16T02:54:56.867
> 
> 标签：ruby-on-rails, cucumber, capybara

使用 Cucumber 和 Capybara，有没有办法验证页面上不存在字符串？

例如，我将如何编写与此步骤相反的内容：

```
Then /^I should see "(.*?)"$/ do |arg1|
  page.should have_content(arg1)
end 
```

如果`arg1`存在，则通过。

如果找到，我将如何编写*失败*`arg1`的步骤？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-16T03:20:02.920

[http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_no_text%3F-instance_method](http://rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Matchers#has_no_text%3F-instance_method)

Capybara有一个`has_no_content`匹配器。所以你可以写

```
 Then /^I should not see "(.*?)"$/ do |arg1|
    page.should have_no_content(arg1)
  end 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-02-25T23:43:45.480

在当前的 Rspec 3.4（2016）中，这是测试没有内容的推荐方法：

```
expect(page).not_to have_content(arg1) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-26T18:34:06.543

如果你想让它读得更好一点，你也可以使用**should_not ：**

```
Then /^I should not see "(.*?)"$/ do |arg1|
  page.should_not have_content(arg1)
end 
```

更多信息：[https ://www.relishapp.com/rspec/rspec-expectations/docs](https://www.relishapp.com/rspec/rspec-expectations/docs)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-19T13:44:30.857

目前，您可以使用：

```
Then /^I not see "(.*?)"$/ do |arg1|
  expect(page).to have_no_content(arg1)
end 
```

如果在页面中找到内容，则您的测试是红色的

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-08-16T02:59:25.013

哦，等等，我想通了。这有效：

```
Then /^I should see "(.*?)"$/ do |arg1|
  page.has_content?(arg1) == false
end 
```

# python - Django URL didn't match any of URL config

> ID：11980110
> 
> 赞同：2
> 
> 时间：2012-08-16T02:55:08.973
> 
> 标签：python, django, design-patterns, django-urls

The errors message is:

```
Using the URLconf defined in Blog.urls,
Django tried these URL patterns, in this order:

^admin/doc/
^admin/
^post/ ^post/(?P<post_id>\d+)/$

The current URL, post/1458/, didn't match any of these. 
```

Why? I think `post/1485/` match `^post/(?P<post_id>\d+)/$`

My root url config is:

```
urlpatterns = patterns('',
    ...
    url(r'^post/', include('posts.urls')),
) 
```

Then, my `posts/urls.py` is:

```
urlpatterns = patterns('',
    ...
    url(r'^post/(?P<post_id>\d+)/$', 'post.views.post_page'),
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T02:57:54.850

Your current setup would match URLs like this:

```
/post/post/1485/ 
```

Make `posts/urls.py` look like:

```
urlpatterns = patterns('',
    ...
    url(r'^(?P<post_id>\d+)/$', 'post.views.post_page'),
) 
```

# linux - 一般保护的作用是什么？

> ID：11980117
> 
> 赞同：3
> 
> 时间：2012-08-16T02:56:09.880
> 
> 标签：linux, kernel

在linux中，当发生中断或异常时，如果CUrrent Privilege Level (CPL) 的权限低于Description Privilege Level (DPL)。一般保护将被提升！但是在这种情况下，一般保护故障的作用是什么？请帮我！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T10:30:57.817

The processor does not permit transfer of execution to an exception or interrupt-handler procedure in a less privileged code segment than the CPL. An attempt to violate this rule results in a **general-protection exception (#GP)**. more on that([http://www.lpthe.jussieu.fr/~talon/pentium3.pdf](http://www.lpthe.jussieu.fr/~talon/pentium3.pdf))

Inside the kernel each exception is handled by a **specific exception handler**, which usually sends a Unix **signal** to the process that caused the exception.

In our case : the kernel will generate a signal `SIGSEV`. The exception handler in this case is `general_protection( )` ([https://github.com/torvalds/linux/blob/master/arch/x86/include/asm/traps.h](https://github.com/torvalds/linux/blob/master/arch/x86/include/asm/traps.h))

**EDIT** : in this link you can get a great explanation about how the kernel compare `DPL`, `CPL` and `RPL`:

[http://duartes.org/gustavo/blog/post/cpu-rings-privilege-and-protection](http://duartes.org/gustavo/blog/post/cpu-rings-privilege-and-protection)

Another good link:

[http://www.logix.cz/michal/doc/i386/chp06-03.htm](http://www.logix.cz/michal/doc/i386/chp06-03.htm)

# scala - 我们如何将 Quartz 配置到电梯应用程序中？

> ID：11980120
> 
> 赞同：2
> 
> 时间：2012-08-16T02:56:26.950
> 
> 标签：scala, configuration, installation, quartz-scheduler, lift

我使用 maven 创建我的电梯项目。

在 lift 项目中配置 Quartz 的推荐方法是什么？我用谷歌搜索，但没有全面的教程来设置它。

在普通的 spring 项目中，人们使用`org.springframework.scheduling.quartz.SchedulerFactoryBean`. 有没有类似的方法可以在电梯中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T14:17:04.853

最简单的方法是使用现有的库，该库将 Quartz 包装在像 DSL 这样的 Scala 中。

例如，一个很好的方法是使用 git://github.com/theatrus/akka-quartz.git 和 akka-quartz 库来拥有一个石英演员，您只需将工作发送到该演员。

然后，您可以在 boot.scala 中创建演员，并在需要安排作业时发送它。

# angularjs - AngularJS / Isotope——页面加载后调用 .isotope("reLayout")

> ID：11980121
> 
> 赞同：1
> 
> 时间：2012-08-16T02:56:33.710
> 
> 标签：angularjs, jquery-isotope

我正在尝试将同位素与 AngularJS 一起使用（布置一组“卡片”）。我没有直接添加到 DOM，而是使用 container.isotope('insert',element) 通过同位素添加元素。

我在链接函数中执行所有这些操作，但似乎当我在链接函数中将内容插入 DOM 时，尺寸设置不正确（在我的情况下，高度为 0），因此不会绘制元素适当地。

如果我调整窗口大小，则元素会正确绘制。我在想我可以在 $viewContentLoaded 上使用手表来调用刷新同位素布局的函数（即 container.isotope('reLayout')），但 $viewContentLoaded 事件似乎永远不会触发。我做错了什么还是应该使用其他方法？

编辑：我通过执行 scope.$root.$on('$viewContentLoaded',function(){}); 来运行函数 但这并没有帮助......（它似乎被提前打电话）

编辑 2：在玩了很多之后，用同位素正确添加了 div，但是因为它的父 div 的高度为 0，所以孩子的大小设置正确。如果我这样做 setTimeout(element.isotope('relayout'),100) 它工作正常。有什么办法可以模仿吗？

```
module.directive('tileGrid',function(){
var mytemplate = '<div class="item {{card.class}}">{{card.Title}}</div>';
var original = angular.element(mytemplate);

return {
    restrict: 'A',
    replace: true,
    transclude: true,
    template: '<div id="tileGridContainer"></div>',     
    link: function(scope,element,attrs)
        { 
            element.isotope({itemSelector:'.item',layoutMode:'fitRows'});                               
            var curCards = scope.cards.map(function(a){ return a.nextView;});                                               

            scope.$watch('scope.cards',function()
            {       
//will do this for diff, but for now iterate over all elements
                for(var i=0;i<scope.cards.length;i++)
                {                           
                    var card = scope.cards[i];

                    var childScope = scope.$new();
                    childScope.card = card;

                    scope.compile(original)(childScope,function(clonedElement,childScope){                          
                        element.isotope('insert',clonedElement);                            
                    });

                    scope.$on('$viewContentLoaded', function(){ console.log("view loaded"); });

                }
            }

            );              
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T19:19:39.637

我不完全确定这是否是问题所在。我遇到了一个链接问题，因为我正在修改 postLink 中的 DOM。我最终使用 setTimeout 将所有 DOM 操作移至延迟。

但是......现在我回去尝试重现该问题，我不再看到它。

Angular UI 提到了这个问题，据我所知，这实际上帮助我解决了我遇到的问题：

[GitHub 上的 Angular-UI 模块/指令/select2/select.js:103](https://github.com/angular-ui/angular-ui/blob/5279043da2885d7bdeb487a3569ec9dea83e6217/modules/directives/select2/select2.js#L103)

您可能会尝试在 compile 函数或 setTimeout 调用中进行所有 DOM 操作。

如果您还没有，请阅读[AngularJS：](http://docs.angularjs.org/guide/directive)关于何时可以安全地进行 DOM 操作以及何时不安全的指令。

# jetty - jetty 8 xml 上下文的文档在哪里？

> ID：11980123
> 
> 赞同：0
> 
> 时间：2012-08-16T02:56:51.003
> 
> 标签：jetty

有谁知道如何在 jetty 7/8 中制作 xml 上下文的文档或教程在哪里？例如：

```
> <contextHandlers> <contextHandler
> implementation="org.eclipse.jetty.server.handler.ContextHandler">
> <contextPath>/w3c</contextPath> <resourceBase><SystemProperty
> name="jetty.home" default="."/>/webapps/w3c</resourceBase> <handler
> implementation="org.eclipse.jetty.server.handler.ResourceHandler"/>
> </contextHandler> </contextHandlers> 
```

关于如何创建它的文档在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:01:54.450

[http://wiki.eclipse.org/Jetty/Feature/ContextDeployer](http://wiki.eclipse.org/Jetty/Feature/ContextDeployer)

# c - glibc - #define void

> ID：11980125
> 
> 赞同：12
> 
> 时间：2012-08-16T02:57:36.297
> 
> 标签：c, glibc, libc

我开始研究 glibc ( [GNU Libc](http://www.gnu.org/software/libc/) ) 以了解它是如何编写的。在`malloc.c`中，我找到了一段代码如下：

```
#ifndef void
#define void        void
#endif 
```

有人可以向我解释这是什么意思吗？不`void`总是定义的吗？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-16T03:26:08.887

查看[git history](http://sourceware.org/git/?p=glibc.git;a=commitdiff;h=22a891871)，它是这样的：

```
/*
  Void_t* is the pointer type that malloc should say it returns
*/

#ifndef Void_t
#if (__STD_C || defined(WIN32))
#define Void_t      void
#else
#define Void_t      char
#endif
#endif /*Void_t*/ 
```

这是历史 [C] 的解决方法，它没有`void`并`malloc()`返回`char *`而不是`void`. 该代码于 2011 年被 Ulrich Drepper 删除。提交似乎不是由脚本或任何自动生成的，因此他必须有这样定义的意图。

提交消息没有说明`void`：

> 简化 malloc 代码
> 
> 删除各种未使用的配置选项和死代码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T06:47:10.570

我不确定`#define void void`in 的原因是什么`malloc.c`，但我的猜测如下：

正如[Yasushi Shoji 提到](https://stackoverflow.com/a/11980324/12711)的，`void`在 C 中并不总是一个关键字。当它被引入/标准化时，能够使用`void`不支持它的编译器使用 new 关键字编译代码的常见解决方法是将其定义`void`为宏，例如：

```
#define void int   /* or maybe #define void char */ 
```

该宏定义可以使用编译器命令行而不是通过标题来完成，这样就不需要确保所有翻译单元都包含定义宏的标题。

但是，迁移到 new 关键字的程序员使用如下代码序列也可能很常见：

```
#ifndef void
#define void int
#endif 
```

例如，您将看到以下代码：

```
/*
 * This is a fairly bogus thing to do, but there seems to be no better way for
 * compilers that don't understand void pointers.
 */
#ifndef void
#define void char
#endif 
```

在[http://buildbot.zope.org/Squid-2.4STABLE6%2B/include/snmp_impl.h?annotate=1.1.1.1&cvsroot=Zope.org](http://buildbot.zope.org/Squid-2.4STABLE6%2B/include/snmp_impl.h?annotate=1.1.1.1&cvsroot=Zope.org)

所以，我的猜测是`#define void void`in`malloc.c`只是一种防止它包含的标题中可能存在的任何此类序列重新定义的方法，但仍然允许它之前已经被定义为“gloablly”（在之前`void`只有注释）如果它是在不支持的配置上编译的。换句话说，如果在开始编译之前没有全局定义为宏，则没有理由在编译的后期将某些内容定义为其他内容。`malloc.c``#define void void``void``void``malloc.c`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-16T03:00:23.303

尽管`void`是 C 中的关键字，但关键字并未定义为预处理器符号。您引用的代码确保它也被定义为预处理器符号。

我不知道为什么这是必要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:00:36.693

`void`可能总是有意义的，但我会说 void通常*不是*`#define`d。我不确切知道*那里*发生了什么，但是这段代码运行的结果是，如果`#ifdef void`以后有人说，那将是真的。所以换句话说，它只会通过这次代码运行获得一次`#define`。`void`

# iphone - 使 UIBarButtonSystemItems 出现在圆形矩形按钮中，而不仅仅是单独出现

> ID：11980130
> 
> 赞同：0
> 
> 时间：2012-08-16T02:57:59.270
> 
> 标签：iphone, xcode

我以编程方式在工具栏上包含一个操作按钮和一个撰写按钮，代码如下：

```
UIBarButtonItem *compose = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:7 target:self action:@selector(userWritesHaiku)];

compose.style=UIBarButtonItemStyleBordered;

UIBarButtonItem *action = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:9 target:self action:@selector(userWritesHaiku)];

action.style=UIBarButtonItemStyleBordered; 
```

（然后将它们放在一个数组中并将它们分配给工具栏。）

但这给了我以下输出：

![以编程方式创建的按钮](../Images/d0511d4b2437ed127283ab84dbe60f4a.png)

我想要的是以下内容，我可以使用 Interface Builder 创建，但我没有使用 Interface Builder。

![使用 Interface Builder 创建的按钮](../Images/73be5a0b626c9ea8503545139d67c470.png)

如何以编程方式获取后一个图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:01:21.860

该项目的`style`属性的默认值为`UIBarButtonItemStylePlain`。您需要将其设置为`UIBarButtonItemStyleBordered`.

我在 iOS 5.0 模拟器中尝试了这段代码：

```
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCompose target:self action:@selector(self)];
//item.style = UIBarButtonItemStyleBordered;
self.toolbar.items = [self.toolbar.items arrayByAddingObject:item]; 
```

我得到了这个结果：

![普通的 UIBarButtonItem](../Images/daa8bb364ea664d0644f037aec30f5e8.png)

然后我将其更改为以下代码：

```
UIBarButtonItem *item = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemCompose target:self action:@selector(self)];
item.style = UIBarButtonItemStyleBordered;
self.toolbar.items = [self.toolbar.items arrayByAddingObject:item]; 
```

我得到了这个结果：

![带边框的 UIBarButtonItem](../Images/b81f12c202fdf495a297b39693c799e0.png)

# vim - VIM 'dot' 命令不起作用

> ID：11980134
> 
> 赞同：1
> 
> 时间：2012-08-16T02:59:12.243
> 
> 标签：vim, macvim

我使用 MacVim 作为我的主要代码编辑器，但似乎无法弄清楚我遇到的一个小问题。我无法使用句点键重复上一个命令。相反，它只是删除选定的行。我安装了 Janus，但我认为这不会影响事情。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:02:17.343

并非所有命令都被考虑重复`.`，例如不考虑光标移动命令。该`.`命令将重复考虑的最后一个命令，这可能是*您*`dd`的情况（删除一行）。

# c++ - 使用 tinyxml 创建 xmlns

> ID：11980140
> 
> 赞同：2
> 
> 时间：2012-08-16T02:59:41.977
> 
> 标签：c++, xml-namespaces, tinyxml

我是 tinyxml 的新手，我想使用 tinyxml 库生成以下 xml 文件。你能帮我解决这个问题吗，非常感谢

```
<?xml version="1.0" encoding="utf-8" ?>    
    <geo:Sim xmlns:geo="http://www.xxx/geo"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.xxx/geo file:/geoX.xsd">
 <GG>
 </GG>
</geo:Sim> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T03:44:45.300

TinyXML 不知道也不关心名称空间。但是，这并不意味着您不能使用它们。您只需要编写命名空间声明，就像它们是常规属性一样。因此，如果要定义`geo`命名空间，请创建一个名为的属性`xmlns:geo`并为其指定命名空间的值。等等。

同样，元素必须命名为`geo:Sim`。

# php - 从数据库设置保管箱值

> ID：11980142
> 
> 赞同：0
> 
> 时间：2012-08-16T03:00:06.900
> 
> 标签：php, codeigniter

我有一个添加表单，允许我将特定字段添加到数据库中，我的选项之一是下拉菜单，以便我可以设置表单类型：

我现在正在创建编辑页面，我已经将其他值称为`$field->name`etc，但是我将如何调用`$field->type`来设置下拉菜单的特定值？

我的添加视图是：

```
<label for="edit_fields_type">Type: </label>
<select name="edit_fields_type" id="edit_fields_type">
    <option value="">Please Select</option>
    <option value="input" <?php echo set_select('edit_fields_type','input', ( !empty($fieldType) && $fieldType == "input" ? TRUE : FALSE )); ?>>Input</option>
    <option value="textarea" <?php echo set_select('edit_fields_type','textarea', ( !empty($fieldType) && $fieldType == "textarea" ? TRUE : FALSE )); ?>>Text Area</option>
    <option value="radiobutton" <?php echo set_select('edit_fields_type','radiobutton', ( !empty($fieldType) && $fieldType == "radiobutton" ? TRUE : FALSE )); ?>>Radio Button</option>
    <option value="checkbox" <?php echo set_select('edit_fields_type','checkbox', ( !empty($data) && $data == "checkbox" ? TRUE : FALSE )); ?>>Check Box</option>
</select> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T02:18:22.663

所以你想要的表单助手是 form_dropdown() 的第三个参数，它允许你指定选定的项目。可能：

```
$this->load->helper('form');
$options = array('input' => 'Input','textarea' => 'Text Area','radiobutton' => 'Radio Button','checkbox' => 'Checkbox',);
echo form_dropdown('edit_fields_type', $options, $field->type); 
```

$field->type 是您在模型中具有选定值的任何位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T02:48:15.447

```
<option value="input" <?php echo (set_value('edit_fields_type', $fieldType) == "input") ? TRUE : FALSE )); ?>>Input</option> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T05:00:25.210

尝试这个

```
$this->load->helper('form');
$options = array(
                  'input'  => 'Input',
                  'textarea'    => 'Text Area',
                  'radiobutton'   => 'Radio Button',
                  'checkbox' => 'Checkbox',
                );

echo form_dropdown('edit_fields_type', $options, set_select('edit_fields_type', $fieldType)); 
```

# android - 在方向更改时从 xml 存储 textview 颜色

> ID：11980147
> 
> 赞同：0
> 
> 时间：2012-08-16T03:00:58.910
> 
> 标签：android, xml, colors, textview

我只是一个 android 的初学者，并试图开发一个具有各种基本功能的应用程序来熟悉它们。我正在尝试保护用户选择的 textview 颜色设置。当方向改变时，这种颜色会丢失。我已经阅读了有关如何为方向更改保存内容的多个线程，但是所有这些示例都带有字符串或布尔值等。 [保存活动状态](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

我想从 xml 文件中保存一个值。所以我必须保存一段设置颜色而不是原始数据类型的代码。

设置颜色的部分代码：

```
public void onClick(DialogInterface dialog, int item) {
    switch(item){
        case 0:
            mWelcomeUser.setTextColor(getResources().getColor(R.color.purple_color));
            break;
        case 1:
            mWelcomeUser.setTextColor(getResources().getColor(R.color.red_color));
            break; 
```

部分xml文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="purple_color">#A420A0</color>
    <color name="red_color">#FF0000</color>
    <color name="green_color">#00FF00</color>
    <color name="black_color">#000000</color>
    <color name="blue_color">#0000FF</color>
    <color name="grey_color">#828282</color>
</resources> 
```

现在我想在 onPause() 中保存颜色设置并在 onResume() 中检索它。但我无法弄清楚这一点。我试图把它放在一个像这样的 int （颜色）中：

```
public void onPause(){
    super.onPause(); 
    color = mWelcomeUser.getCurrentTextColor();
}

public void onResume(){
    super.onResume();
    mWelcomeUser.setTextColor(color);
} 
```

最简单的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:30:36.857

当方向改变时，android会暂停正在运行的活动或破坏它。所以我设置了onPause（）和onDestroy（）方法来保存文本颜色，在onCreate（）和onResume（）中我们将再次获得文本颜色。我用过SharedPreferences 来解决您的问题。

我在下面提供答案......

```
private SharedPreferences mPrefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_layout);

    SharedPreferences mPrefs = getPreferences(MODE_PRIVATE);
    mWelcomeUser.setTextColor(mPrefs.getInt("currentColor", Color.RED));
}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();

     SharedPreferences mPrefs = getPreferences(MODE_PRIVATE);
     mWelcomeUser.setTextColor(mPrefs.getInt("currentColor", Color.RED));
}

    @Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();

    SharedPreferences.Editor ed = mPrefs.edit();
    ed.putInt("currentColor", mWelcomeUser.getCurrentTextColor());

    ed.commit();
}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();

    SharedPreferences.Editor ed = mPrefs.edit();
    ed.putInt("currentColor",  mWelcomeUser.getCurrentTextColor());

    ed.commit();
} 
```

# c# - 处理潜在会话到期的正确方法

> ID：11980148
> 
> 赞同：2
> 
> 时间：2012-08-16T03:01:03.033
> 
> 标签：c#, asp.net

我想知道当您经常在代码中使用存储在其中的值时，处理会话潜在到期的最佳（例如，最有效、普遍接受的行业标准）方法是什么。

例如，我经常使用（在 C# 中）类似于以下的行：

```
Guid personGuid = (Guid)Session[SSPersonGuid]; 
```

我正在检查 Page_Load 的值是否为空并进行相应处理，但是会话可能会在该人在页面上时过期，在这种情况下，当他们单击页面上的按钮时，我们需要使用类似上面的东西，那里将是 NullReferenceException。

处理这个问题的最好方法是在每次使用之前检查 null，如下所示：

```
if (Session[SSPersonGuid] == null) {...} 
```

还是有什么我不知道的特殊情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:09:49.837

> 处理会话可能到期的最佳（例如，最有效、普遍接受的行业标准）方法是什么？

最好的办法是它们不会通过设置[进程外会话状态服务器](http://msdn.microsoft.com/en-us/library/ms972429.aspx)或[进程外 SQL Server 来过期](http://support.microsoft.com/kb/317604)。

[您也可以在Session_OnEnd 事件](http://msdn.microsoft.com/en-us/library/ms178583.aspx)中检测到它

**编辑：**

杰夫阿特伍德在这里所说的与斯科茨的回答相对应：http: [//www.codinghorror.com/blog/2008/04/your-session-has-timed-out.html](http://www.codinghorror.com/blog/2008/04/your-session-has-timed-out.html)

> 我每天都会收到来自各种来源的会话超时消息，但我从未见过来自 gmail 的会话过期消息。这是我的建议：
> 
> 1.  在浏览器中创建一个后台 JavaScript 进程，向服务器发送定期心跳。每隔 5 或 10 分钟重新生成一个具有定时到期的新 cookie。
>     
>     
> 2.  如果你担心会话劫持——你真的应该——使用受 HTTPS 保护的连接。对于任何类型的金融机构来说，这绝对是一件轻而易举的事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:11:42.310

我经常看到的是每个页面加载的 JavaScript，其中包含一个计时器，用于检查会话是否即将到期。如果是这样（比如说，在 2 分钟内），显示一个弹出窗口，告诉用户会话即将到期，并询问用户是否要继续。然后，该脚本可以对服务器进行 AJAX 回调以保持会话处于活动状态。

但是，这不会阻止关闭 JavaScript 的用户出现问题。

# python - PyQt4 中的多列（可能使用 QTreeWidget）

> ID：11980149
> 
> 赞同：4
> 
> 时间：2012-08-16T03:01:08.710
> 
> 标签：python, pyqt4, qtreewidget

我试图让 QTreeWidget 的工作方式与此完全相同。在蟒蛇！我不关心多个选项卡，而是关心多个列。

![图片](../Images/46f6f6f20b7839eb788c9e1f8199acd4.png)

这就是我到目前为止所得到的。我不知道如何拥有多个标题。

```
self.pointListBox = QtGui.QTreeWidget()

x=QtGui.QTreeWidgetItem()
x.setText(0,str(coords[0]))
y=QtGui.QTreeWidgetItem()
y.setText(0,str(coords[1]))

Qname=QtGui.QTreeWidgetItem()
Qname.setText(0,new_point_name)

self.pointListBox.setHeaderItem(Qname)
parent = QtGui.QTreeWidgetItem(self.pointListBox)
parent.setText(0,new_point_name)
parent.addChild(x)
parent.addChild(y) 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-16T04:24:57.163

您需要在那里修复一些问题。

```
from PyQt4 import QtCore, QtGui
import sys

app = QtGui.QApplication(sys.argv)
QtGui.qApp = app

pointListBox = QtGui.QTreeWidget()

header=QtGui.QTreeWidgetItem(["Tree","First","secondo"])
#...
pointListBox.setHeaderItem(header)   #Another alternative is setHeaderLabels(["Tree","First",...])

root = QtGui.QTreeWidgetItem(pointListBox, ["root"])
A = QtGui.QTreeWidgetItem(root, ["A"])
barA = QtGui.QTreeWidgetItem(A, ["bar", "i", "ii"])
bazA = QtGui.QTreeWidgetItem(A, ["baz", "a", "b"])

pointListBox.show()
sys.exit(app.exec_()) 
```

我没有完成这个例子，但这应该让你相当接近。

请注意，而不是`barA = QtGui.QTreeWidgetItem(A, ["bar", "i", "ii"])`，没有任何问题

```
barA = QtGui.QTreeWidgetItem(A)
barA.setText(0,"bar")
barA.setText(1,"i")
barA.setText(2,"ii") 
```

如果您需要在显示文本之前进行计算。

# css - 沿父 div 的可见边界定位元素

> ID：11980150
> 
> 赞同：4
> 
> 时间：2012-08-16T03:01:11.903
> 
> 标签：css

奇怪的是，我无法找到有关此主题的任何内容；我认为这将是一个非常普遍的问题！

我所拥有的是一个父 div，它`border-radius`使 div 成为圆形。嵌套在那个 div 中，我有几个我想要的子 div：

*   直接定位在可见的圆形边界上（与围绕 div 的不可见方形“边界”相反——希望[这个 jsFiddle](http://jsfiddle.net/zSdsg/)能澄清我在这里想说的）。
*   此外，我希望能够沿此边界的不同点精确定位子 div（因此，类似于“将 childDiv1 定位在圆形的 90 度位置 [或 ​​105 度位置、120 度、135 度等] parent div”，而不必使用`top`和`left`/或分配绝对像素值或其他东西）。

仍然是一个试图弄清楚 CSS 定位的业余爱好者，所以我什至不确定这是否可能，哈哈。期待你们能提供的任何意见！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:01:34.507

您可以使用 css3 [transform](http://www.w3.org/TR/css3-2d-transforms/#transform-property)和[transform-origin](http://www.w3.org/TR/css3-2d-transforms/#transform-origin-property)来实现这一点

```
<div id="parent">
    <div class="child" id="child1"></div>
    <div class="child" id="child2"></div>
    <div class="child" id="child3"></div>
    <div class="child" id="child4"></div>
</div> 
```

```
#parent {
    position: relative;
    width: 300px;
    height: 300px;
    border: 1px dotted #000;
    border-radius: 150px;
}

.child {
    position: absolute;
    width: 30px;
    height: 30px;
    background-color: #666;
    left: 135px;
}
#child1{
    transform: rotate(90deg);
    transform-origin:50% 150px;
}
#child2{
    transform: rotate(105deg);
    transform-origin:50% 150px;
}
#child3{
    transform: rotate(120deg);
    transform-origin:50% 150px;
}
#child4{
    transform: rotate(135deg);
    transform-origin:50% 150px;
} 
```

[http://jsfiddle.net/zSdsg/20/](http://jsfiddle.net/zSdsg/20/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:09:46.003

[http://jsfiddle.net/zSdsg/15/](http://jsfiddle.net/zSdsg/15/) （更新显示`top:0`不突出圆圈。）

或者[http://jsfiddle.net/zSdsg/17/](http://jsfiddle.net/zSdsg/17/)，看起来更酷：}

**编辑**：我想我误解了你的问题。我将根据……我的答案更新或删除我的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:13:39.787

[http://jsfiddle.net/zSdsg/14/](http://jsfiddle.net/zSdsg/14/)

像这样的东西会是你想要的吗？

```
#parent {
position: relative;
width: 300px;
height: 300px;
border: 1px dotted #000;
border-radius: 150px;
}

#child {
position: absolute;
width: 30px;
height: 30px;
background-color: #666;
}
#child2 {
position: absolute;
top:35px;
left:40px;
width: 30px;
height: 30px;
background-color: red;
    border-radius: 150px;
} 
```

​</p>

```
<div id="parent">
<div id="child"></div>
<div id="child2"></div>
</div>​ 
```

# java - Java JMenuItem ActionListener

> ID：11980151
> 
> 赞同：7
> 
> 时间：2012-08-16T03:01:16.890
> 
> 标签：java, swing, actionlistener, jmenuitem, jmenubar

我的 JMenuBar 上的 ActionListener 需要一些帮助。

没有错误；但是，每次我单击 JMenuItem 时，它都会触发与 JMenuItem 关联的所有操作。我的问题是：我在 ActionListener 代码中做得对吗？我不太确定我的 ActionListener 类。我正在尝试将我的 ActionListener 与我的 Button 逻辑分开。

如果有人对我可能做错了什么有任何想法，请指出。

这是我的代码：

```
package MenuBar;
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
public class SimpleMenuBar{
    private static final LayoutManager grid = new GridLayout(0, 1);
    public JMenuBar MenuBar;
    public JMenu MenuFile, MenuEdit, MenuOption;
    public JMenuItem ItemNew, ItemOpen, ItemSave, ItemExit, ItemCopy, ItemCut, ItemPaste;
    ButtonGroup direction;
    JRadioButtonMenuItem forwardradio, backwardradio;
    JCheckBoxMenuItem CheckCase;
    String input = null;
    public void Design()
    {
        JFrame frame = new JFrame("Simple Menubar");
        frame.setSize(320, 320);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);

        MenuBar = new JMenuBar();
        frame.setJMenuBar(MenuBar);
        MenuBar.setLayout(grid);

        //Menus
        MenuFile = new JMenu("File");
        MenuFile.setMnemonic(KeyEvent.VK_F);
        MenuBar.add(MenuFile);

        //sub Menus
        ItemNew = new JMenuItem("New", KeyEvent.VK_N);
        MenuFile.add(ItemNew);
        ItemNew.setActionCommand("New");
        ItemNew.addActionListener(new MenuBarMethod());

        ItemOpen = new JMenuItem("Open", KeyEvent.VK_O);
        MenuFile.add(ItemOpen);
        ItemOpen.setActionCommand("Open");
        ItemNew.addActionListener(new MenuBarMethod());
        MenuFile.addSeparator();

        ItemSave = new JMenuItem("Save", KeyEvent.VK_S);
        MenuFile.add(ItemSave);
        MenuFile.addSeparator();

        ItemExit = new JMenuItem("Exit", KeyEvent.VK_X);
        MenuFile.add(ItemExit);

        MenuEdit = new JMenu("Edit");
        MenuFile.setMnemonic(KeyEvent.VK_E);
        MenuBar.add(MenuEdit);

        ItemCopy = new JMenuItem("Copy", KeyEvent.VK_C);
        KeyStroke ctrlCKeyStroke = KeyStroke.getKeyStroke("control C");
        ItemCopy.setAccelerator(ctrlCKeyStroke);
        MenuEdit.add(ItemCopy);

        ItemCut = new JMenuItem("Cut", KeyEvent.VK_V);
        KeyStroke ctrlVKeyStroke = KeyStroke.getKeyStroke("control V");
        ItemCut.setAccelerator(ctrlVKeyStroke);
        MenuEdit.add(ItemCut);

        ItemPaste = new JMenuItem("Paste", KeyEvent.VK_Y);
        KeyStroke ctrlYKeyStroke = KeyStroke.getKeyStroke("control Y");
        ItemPaste.setAccelerator(ctrlYKeyStroke);
        ItemPaste.setEnabled(false);
        MenuEdit.add(ItemPaste);
        MenuEdit.addSeparator();

        MenuOption = new JMenu("Option");
        Icon atIcon = new ImageIcon("option.png");
        MenuOption.setIcon(atIcon);
        MenuOption.setMnemonic(KeyEvent.VK_O);

        direction = new ButtonGroup();
        forwardradio = new JRadioButtonMenuItem("Forward Me", true);
        forwardradio.setMnemonic(KeyEvent.VK_F);
        MenuOption.add(forwardradio);
        direction.add(forwardradio);
        MenuEdit.add(MenuOption);

        backwardradio = new JRadioButtonMenuItem("Backward Me");
        backwardradio.setMnemonic(KeyEvent.VK_B);
        MenuOption.add(backwardradio);
        direction.add(backwardradio);

        MenuOption.addSeparator();

        CheckCase = new JCheckBoxMenuItem("Case Sensitive");
        MenuOption.add(CheckCase);
        direction.add(CheckCase);
        MenuEdit.add(MenuOption);

    }
    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable(){
            public void run()
            {
                SimpleMenuBar MyMenu = new SimpleMenuBar();
                MyMenu.Design();

            }
        });
    }
} 
```

对于一个菜单栏来说，这是一个非常多的代码。我还没有完全实现 ActionListener。出于测试目的，我只为两个项目实现了它：`ItemNew`和`ItemOpen`. 不幸的是，每次我点击`ItemNew`菜单项时，都会触发 和 的`ItemNew` *动作* `ItemOpen`。

这是我的动作监听器的代码：

```
package MenuBar;
import java.awt.event.*;

import javax.swing.JOptionPane;
public class MenuBarMethod implements ActionListener{
    public void actionPerformed(ActionEvent e)
    {
        if("New".equals(e.getActionCommand())){
            JOptionPane.showMessageDialog(null, "Selected Item: " + e.getActionCommand());
        }
        if("Open".equals(e.getActionCommand())){
            JOptionPane.showMessageDialog(null, "Selected Item: " + e.getActionCommand());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-16T03:25:23.943

作为个人喜好，我更喜欢使用[Action](http://docs.oracle.com/javase/7/docs/api/javax/swing/Action.html) API

主要原因是

*   它集中了与特定操作相关的逻辑，包括名称、击键、快捷方式、图标等
*   它是可重复使用的。`Action`创建对象比重新创建菜单项、工具栏项和弹出菜单项要容易得多
*   其他 Swing 组件很好地支持它。大多数支持 API 的 Swing 组件`ActionListener`通常都提供了提供方法`Action`（`JMenu.add(Action)`等`JMenu(Action)`）
*   它使您的代码更易于阅读，更容易阅读类的单个`ActionPerformed`方法，`Action`然后尝试浏览多个`if`语句

看看[如何使用动作](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)

恕我直言

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-18T19:34:37.577

我会使用`getSource`方法 of`ActionEvent`而不是`getActionCommand`.

```
public class MenuBarMethod implements ActionListener{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource() == ItemNew){
            JOptionPane.showMessageDialog(null, "Selected Item: " + e.getActionCommand());
        }
        if(e.getSource() == ItemOpen){
            JOptionPane.showMessageDialog(null, "Selected Item: " + e.getActionCommand());
        }
    }
} 
```

# iphone - iPhone - 异步图像仅在滚动时显示

> ID：11980156
> 
> 赞同：0
> 
> 时间：2012-08-16T03:01:49.080
> 
> 标签：iphone, objective-c, asynchronous, uitableview, custom-cell

我一直在用头撞墙，并四处寻找解决方案，但无济于事：

我有大量从网络上提取的数据，我正在使用 Loren Brichter 的[ABTableViewCell](http://www.therefinedgeek.com.au/index.php/tag/abtableviewcell/)通过在每个单元格的 contentView 内绘制所有内容来使其平稳运行，以避免 UILabels 和 UIImageViews 减慢滚动速度。

这非常适合显示文本，但由于下载图像需要时间，我遇到了图像问题。一旦下载了相应的图像，我似乎无法找到一种方法来强制显示的每个单元格的 contentView 重新绘制自身。我必须指出我不是在绘制标签和图像视图，而只是为了节省内存而绘制 contentView。

现在该表的行为如下：

*   加载：显示文本，无图像
*   向上或向下滚动：一旦单元格移出屏幕，图像最终会显示出来

**示例项目在[这里](https://www.yousendit.com/download/TEhXU2VndWNrUm1xV2NUQw)**

代码：

ABTableViewCell.h

```
@interface ABTableViewCell : UITableViewCell
{
    UIView *contentView;
} 
```

ABTableViewCell.m

```
- (void)setNeedsDisplay
{
    [contentView setNeedsDisplay];
    [super setNeedsDisplay];

}

- (void)drawContentView:(CGRect)r
{
    // subclasses implement this
} 
```

表格单元布局.h

```
#import "ABTableViewCell.h"

@interface TableCellLayout : ABTableViewCell {

}

@property (nonatomic, copy) UIImage *cellImage;
@property (nonatomic, copy) NSString *cellName; 
```

表格单元布局.m

```
#import "TableCellLayout.h"

@implementation TableCellLayout

@synthesize cellImage, cellName;

- (void)setCellName:(NSString *)s
{
    cellName = [s copy];
    [self setNeedsDisplay];
}

- (void)setCellImage:(UIImage *)s
{
    cellImage = [s copy];
    [self setNeedsDisplay];
}

- (void)drawContentView:(CGRect)r
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextFillRect(context, r);

    [cellImage drawAtPoint:p];
    [cellName drawAtPoint:p withFont:cellFont];
} 
```

表视图控制器.m

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    TableCellLayout *cell = (TableCellLayout *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[TableCellLayout alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.cellName = [[array valueForKey:@"name"] objectAtIndex:indexPath.row];
    cell.cellImage = [UIImage imageNamed:@"placeholder.png"]; // add a placeholder    

    NSString *imageURL = [[array valueForKey:@"imageLink"] objectAtIndex:indexPath.row];
    NSURL *theURL = [NSURL URLWithString:imageURL];

    if (asynchronousImageLoader == nil){
        asynchronousImageLoader = [[AsynchronousImages alloc] init];
    }
       [asynchronousImageLoader loadImageFromURL:theURL];

        cell.cellImage = asynchronousImageLoader.image;

return cell;
} 
```

这是图像准备好后 AsynchronousImageLoader 调用的最后一个方法：

```
- (void)setupImage:(UIImage*)thumbnail {
    self.image = thumbnail;
        [self setNeedsLayout];

} 
```

一旦下载了行的图像，我只需要正确的方法来告诉我的可见单元格重新绘制自己。我想我应该在最终方法（setupImage）中添加一些东西——但我似乎无法让它按应有的方式工作。想法？非常感谢！

**最终编辑：解决方案**

是的，正如所怀疑的那样，问题在于调用完成后，没有告诉可见单元重新绘制并更新到下载的图像。

我使用以下答案提供的帮助来组合一个适合我需求的解决方案：

在异步图片下载器调用的 final 方法中添加了一个回调：

**AsyncImageView.m**

```
 - (void)setupImage:(UIImage*)thumbnail {

      self.cellImage = thumbnail;
[cell setNeedsDisplay];

} 
```

注意：我还在图像下载器类的初始化中设置了一个本地占位符图像，只是为了美化一点。

**然后在我的 cellForRowAtIndexPath 中：**

```
NSURL *theURL = [NSURL URLWithString:imageURL];

AsyncImageView *aSync = [[AsyncImageView alloc] initWithFrame:CGRectMake(0, 0, 20, cell.bounds.size.height)];

[aSync loadImageFromURL:theURL];
cell.cellImageView = aSync;

return cell; 
```

可能还有一两个其他调整，但这些是这里的主要问题。再次感谢 SO 社区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:02:40.570

您可以使用 Apple TableView 延迟加载。他们有异步下载图像的示例代码。请参阅下面的链接

[Apple LazyTableImages](http://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

在 AsynchronousImages 类中，您可以添加一个属性 NSIndexPath 并且 AsynchronousImages 上的委托应该更改。请参阅下面的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    TableCellLayout *cell = (TableCellLayout *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[TableCellLayout alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.cellName = [[array valueForKey:@"name"] objectAtIndex:indexPath.row];
    cell.cellImage = [UIImage imageNamed:@"placeholder.png"]; // add a placeholder    

    NSString *imageURL = [[array valueForKey:@"imageLink"] objectAtIndex:indexPath.row];
    NSURL *theURL = [NSURL URLWithString:imageURL];

    AsynchronousImages *asynchronousImageLoader = [[AsynchronousImages alloc] init];
    asynchronousImageLoader.indexPath = indexPath;
    [asynchronousImageLoader loadImageFromURL:theURL];
    return cell;
}

//Delegate should be
- (void)setupImage:(UIImage*)thumbnail index:(NSIndexPath*) indePath {
    TableCellLayout *cell = (TableCellLayout *) [tableView cellForRowAtIndexPath:indexPath];
    if(cell) {
      cell.cellImage = thumbnail;
      [cell setNeedsDisplay];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:16:19.903

验证 UIImage 的创建和 UIImageView 的图像属性的设置发生在主线程上。没有理由设置图像视图的图像不应该使其 rect 可见。

如果您正在重用单元格，还请确认您的负载已正确取消。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:04:04.010

使用[AsyncImageView](https://github.com/nicklockwood/AsyncImageView/) 代替 uiimageview

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T07:28:30.627

您可以告诉您的 tableView `reloadData`... 或稍微更精致的重新加载：

```
 [self.tableView reloadRowsAtIndexPaths:self.tableView.indexPathsForVisibleRows withRowAnimation:UITableViewRowAnimationNone]; 
```

编辑添加（查看 OP 的源代码后）：

我查看了您的项目，问题出在您的架构上。您在滥用`AsyncImageView`，因为您仅使用它来异步加载图像 - 而它旨在同时加载*和显示*图像。这就是为什么它没有“回调”功能来让您知道何时检索到数据。

你最好用`CellLayout`UIImageView 属性替换你的 image 属性。（请注意，UIImageView 在绘图方面比其他方式更有效`image drawAtPoint`）。

所以：

1.  更改您的`CellLayout`课程以使用`UIImageView`属性而不是`UIImage`
2.  更改您`cellForRowAtIndexPath`以直接在 Cell 上将 AsyncImageView 设置为属性。

如果您想支持占位符，则应将其添加到您的 AsyncImageView 类中 - 以便它知道在下载内容时要显示什么。

**cellForRowAtIndexPath：**

```
NSURL *theURL = [NSURL URLWithString:imageURL];

AsyncImageView *aSync = [[AsyncImageView alloc] initWithFrame:CGRectMake(0, 0, 20, cell.bounds.size.height)];

[aSync loadImageFromURL:theURL];
cell.cellImageView = aSync;

return cell; 
```

***单元布局.h***

```
@property (nonatomic, strong) UIImageView *cellImageView; 
```

***单元格布局.m***

```
- (void)setCellImageView:(UIImageView *)s
{
    [cellImageView removeFromSuperview];
    cellImageView = s;
    [self addSubview:cellImageView];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T07:37:37.060

确保您正在更新主线程中的单元格图像。UI 更新仅在此处完成时才会出现，这就是为什么您仅在触摸和滚动时才能看到更新的原因。

```
if(cell) {

    dispatch_async(dispatch_get_main_queue(), ^{

        cell.cellImage = thumbnail;
        [cell setNeedsDisplay];

    });

} 
```

**[编辑]**

您需要将单元格作为图像加载器的代表并拥有异步重绘机制。

```
......
    AsynchronousImages *asynchronousImageLoader = [[AsynchronousImages alloc] init];
    asynchronousImageLoader.delegate = cell;
    [asynchronousImageLoader loadImageFromURL:theURL];

    return cell;
} 
```

并将委托回调代码放在单元实现中。

```
- (void)setupImage:(UIImage*)thumbnail {

      self.cellImage = thumbnail;

} 
```

# highcharts - 如何在图形上绘制不连续的直线？

> ID：11980160
> 
> 赞同：1
> 
> 时间：2012-08-16T03:02:41.310
> 
> 标签：highcharts, highstock

我正在尝试在我的图表上绘制一些直线，并且已经完成了大部分工作，但现在我被偏移量所困扰。下面的红线应该在两个标记之间画一条线，但正如您所见，它们在高处和左侧。

![股票图表](../Images/215627d58836c3dc2b9b55563cbe9c16.png)

我期待`plotX`并`plotY`为我解决这个问题，但我错过了一些东西。图表中有四个系列：绿色、蓝色、红色三角形和红色三角形下降。我想画一条连接红色三角形（第 3 系列）和红色三角形向下（第 4 系列）的线。我目前正在通过一个回调来执行此操作，该回调遍历系列三并使用 plotX 和 plotY 添加路径。

它目前看起来像这样，但我愿意接受更好的方法。

```
 function(){
        var chart = this;
        $.each(chart.series[2].data, function(index, value){
            startX = chart.series[2].data[index].plotX;
            startY = chart.series[2].data[index].plotY;
            endX = chart.series[3].data[index].plotX
            endY = chart.series[3].data[index].plotY
            chart.renderer.path(['M', startX, startY, 'L', endX, endY])
                    .attr({ 'stroke-width': 2, stroke: 'red' })
                    .add();
            console.log(index, startX, startY, endX, endY);
        })
    }); 
```

轴和其他一切看起来像：

```
$(document).ready(function () {
    chart1 = new Highcharts.StockChart({
        chart:{
            renderTo:'container'
        },
        yAxis:[
            { // Leader yAxis
                labels:{
                    formatter:function () { return "$" + this.value.toFixed(2); },
                    style:{ color:'green' }
                },
                title:{
                    text:'Leader',
                    style:{ color:'green' }
                }
            },
            { // Follower yAxis
                title:{
                    text:'Follower',
                    style:{ color:'#4572A7' }
                },
                labels:{
                    formatter: function () { return "$" + this.value.toFixed(2); },
                    style: { color:'#4572A7' }
                },
                opposite: true
            }],
        series:[
            {
                type: 'line',
                name: 'Buyer Moving Average',
                data: buyer,
                color: 'green',
                yAxis: 1
            },{
                type:'line',
                name:'Data',
                data: equity,
                color: "#4572A7",
                yAxis: 0
            },{
                type: 'scatter',
                name: 'Buys',
                data: buys,
                color: 'red',
                marker: { symbol: "triangle" },
                yAxis: 0
            },{
                type:'scatter',
                name:'Sells',
                data: [{{ sells }}],
                color: 'red',
                marker: { symbol: "triangle-down" },
                yAxis: 0
            }
        ] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:33:12.307

有趣的是，被迫将问题转化为问题如何帮助我理顺自己的想法和挫败感，足以为自己找到答案……

plotX 和 plotY 属性不考虑标签和轴引入的任何其他内容，因此只需找到它们创建的偏移量并将其添加到：

```
 function(){
        var chart = this;
        xoffset = chart.series[2].xAxis.left;
        yoffset = chart.series[2].xAxis.top;
        $.each(chart.series[2].data, function(index, value){
            startX = chart.series[2].data[index].plotX + xoffset;
            startY = chart.series[2].data[index].plotY + yoffset;
            endX = chart.series[3].data[index].plotX + xoffset;
            endY = chart.series[3].data[index].plotY + yoffset;
            chart.renderer.path(['M', startX, startY, 'L', endX, endY])
                    .attr({ 'stroke-width': 2, stroke: 'red' })
                    .add();
            console.log(index, chart.series[2].xAxis.left, startX, startY, endX, endY);
        } 
```

# business-process-management - 什么是收件箱？

> ID：11980162
> 
> 赞同：0
> 
> 时间：2012-08-16T03:03:09.760
> 
> 标签：business-process-management, inbox

我真的对BPM一无所知。

在 BPM 上下文中，收件箱到底是什么？
它是无处不在的电子邮件的常见位置，还是要执行的任务列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:25:50.527

在 BPM 包中，您构建业务流程，例如雇佣员工流程。流程设计完成后，您可以对其进行实例化。在此示例中，如果您想雇用一名员工，您可以实例化该流程。这个过程的一个实例就是一个案例。案例就是您在 BPM 收件箱中看到的内容。更具体地说，分配给您的任务尚未完成的情况。将其视为您的 BPM 工作待办事项列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:00:17.323

你应该试试：[http ://www.bpm.com/Docs/Q2%20Business%20Agility_BPM%20for%20Dummies.pdf](http://www.bpm.com/Docs/Q2%20Business%20Agility_BPM%20for%20Dummies.pdf)

但是，是的，收件箱通常是一个屏幕，其中包含特定用户的待处理任务列表。

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T23:51:00.147

BPM（业务流程管理）是在企业环境中设计和执行“业务流程”的标准方式。通常这涉及与系统的“人机交互”（简单来说，一些定义业务流程的代码），尽管这并不总是必要的。这种与系统进程的人机交互称为“工作流”。

因此，如果在这个自动化过程中有任何人为活动，这通常会在称为工作流用户界面的类似电子邮件的界面中传达给用户，他可以使用它来执行他的操作，例如批准、拒绝、升级到下一个级别等. 因此，BPM 用户的收件箱通常包含需要他注意的作业，具体取决于 BPM 系统的用户管理组件定义的用户配置文件。

# actionscript-3 - Equally distribute objects across a bezier curve

> ID：11980166
> 
> 赞同：2
> 
> 时间：2012-08-16T03:03:26.210
> 
> 标签：actionscript-3, math

Can somebody walk me through how this madness works: [http://www.youtube.com/watch?v=KL8QLLmUvbg](http://www.youtube.com/watch?v=KL8QLLmUvbg)

Specifically I'm interested in equally distributing a given number of squares along a path. I'm also wondering if this would work with multiple line segments-- this is one curved segment and I need a solution to distribute objects across one big line with multiple curves in it.

Basically I'm trying to make a tail that realistically follows a character.

Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T05:19:05.213

First a Bezier spline is a curve parametrized by `t`. However `t` is not arc-length along the curve. So the procedure is this.

1.  Calculate the length of the bezier curve.
2.  Find the t values that divide the curve into N equal length segments.

However these two steps are tricky.

The first has a closed form solution only for quadratic Beziers. (You can find the solution [here](https://stackoverflow.com/questions/11854907/calculate-the-length-of-a-segment-of-a-quadratic-bezier) ) Otherwise you use a subdivide and approximate approach, or a numerical integration approach (and in some sense these are equivalent - I'd go the numerical integration approach as this has better provable behavior at the cost of slightly trickier implementation, but you may or may not care about that.)

The second is basically a guess a t value, and improve approach (using the same style of calculation at each step as step 1). I'd implement this using a secant style search, as I suspect the derivatives required to use a Newton's method search would be too expensive to calculate.

Once you've got the positions of the objects, you need to use the curve tangent and cotangent to create a local reference frame for the object. This allows the objects to sit nicely in the path of the curve, rather than all having the same orientation. Note that this only works nicely in 2D - in 3D you can still get some weird behavior with object orientation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:56:29.427

You can start by looking into how a bezier curve is calculated. [Wikipedia](http://en.wikipedia.org/wiki/B%C3%A9zier_curve) has some nice animations with the explanation and [this link](http://www.paultondeur.com/2008/03/09/drawing-a-cubic-bezier-curve-using-actionscript-3/) has some as3 code.

but if you're trying to create a tail, there are simpler ways of doing that, like using following behaviour or a physics library

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T16:04:32.220

I ended up creating a following behavior system like Daniel recommended for simplicities sake. But to elaborate on Michael's awesome answer I stumbled onto this tutorial which details the the spline technique.

[http://gamedev.tutsplus.com/tutorials/implementation/create-a-glowing-flowing-lava-river-using-bezier-curves-and-shaders/](http://gamedev.tutsplus.com/tutorials/implementation/create-a-glowing-flowing-lava-river-using-bezier-curves-and-shaders/)

# jquery - 一般来说，哪个更适合用于效果？Jquery 或 CSS3（过渡）？

> ID：11980167
> 
> 赞同：0
> 
> 时间：2012-08-16T03:03:26.740
> 
> 标签：jquery, css, browser, compatibility, transitions

我一直在研究 jQuery 一段时间，最近我遇到了 CSS3。我注意到 jQuery 可以做的大部分效果，也可以通过 CSS3（Transitions）来完成。

但是，我阅读了一些文章，也注意到 CSS3 在浏览器兼容性方面存在一些问题。此外，使其更兼容意味着为每个浏览器添加更多代码。

另一方面，当用户在他们的浏览器上禁用 Javascript 时，jQuery 有一个根本无法工作的问题。

我在这里权衡利弊时遇到了麻烦。我想可能是我缺乏经验的原因。但如果不问太多，你更喜欢用哪个来实现动画呢？哪个更容易使用？还有其他我不知道的优点和缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T03:06:02.520

我的经验法则是，如果您可以在 CSS3 中轻松高效地做某事，那么您应该这样做。如果您正在寻找的东西不能以这种方式完成，那么请使用 jQuery。

最重要的是：**始终**提供备用解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:07:59.567

在我看来，我更喜欢使用 jquery。跨浏览器有问题。

在 jquery 1.8 发行说明中，当开发者设置 css3 属性时，会添加 -moz、-webkit 等前缀。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:06:26.183

一个好的解决方案是使用 jQuery，但如果用户关闭了 JavaScript，仍然要确保你的 css 能够正常工作。在我目前的角色中，我们总是会发现由于浏览器兼容性问题而无法使用 CSS3 功能的情况，尤其是在旧版本的 Internet Explorer 中。

您是否有一些您试图在 jQuery 和 CSS3 之间进行比较的特定功能示例？

# windows-phone-7 - 在 Window Phone 7 上通过 wifi 共享文件

> ID：11980171
> 
> 赞同：1
> 
> 时间：2012-08-16T03:04:22.160
> 
> 标签：windows-phone-7, sharing

开发一个能够通过蓝牙或wifi将文件共享到另一个window phone 7设备的应用程序是否可行？我想分享的是图像、视频或音乐。我只是想知道这是否可能，所以如果你知道请帮助我，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:13:43.083

目前此类 API 不适用于 WP7。我希望他们在未来的版本中提供它。有关蓝牙的信息，请阅读以下文章[http://support.microsoft.com/kb/2449475](http://support.microsoft.com/kb/2449475)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:18:23.880

由于 SplashID APP 正在使用 WIFI 做同样的事情。我们可以使用 TCP 套接字来实现文件共享功能。我们需要以小块发送数据包。

问候马汉特什

# c# - Asp:table 与单元格中的链接按钮和页面周期

> ID：11980173
> 
> 赞同：0
> 
> 时间：2012-08-16T03:04:38.397
> 
> 标签：c#, asp.net

我似乎总是为 asp.net 页面循环和动态创建的控件而苦恼。

我有一个在 page_load 的 !isPostBack 中创建的 asp:table （我尝试在页面加载中创建它，page_init onint）

该表是使用包含 LinkBut​​ton 的单元格创建的：

```
LinkButton lb = new LinkButton();
lb.Text = cabinet.CabinetName;
lb.CssClass = "child";
lb.Click += new EventHandler(btnChange_Folder);
lb.CommandArgument = cabinet.Id.ToString(); 
```

现在的问题是，无论何时单击链接按钮，它都不会触发并且表格消失。

我知道它与页面周期有关。

因此，我尝试的下一个操作是将 LoadTable() 调用放在 !IsPostBack 块之外，以便每次都加载它。

这似乎有效，但它需要我按每个按钮两次才能触发...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:16:18.460

您必须指定一个 ID

```
LinkButton lb = new LinkButton();
lb.Text = cabinet.CabinetName;
lb.ID= "ID_youwant";
lb.CssClass = "child";
lb.Click += new EventHandler(btnChange_Folder);
lb.CommandArgument = cabinet.Id.ToString(); 
```

# android - Android XML id 最佳实践

> ID：11980174
> 
> 赞同：5
> 
> 时间：2012-08-16T03:04:39.167
> 
> 标签：android, xml

假设我有一个活动，我从一个 XML 文件设置内容视图。

假设我在 Java 代码中有一个按钮，acceptButton。

```
acceptButton =(Button)findViewById(R.id.acceptBtn); 
```

在上面的代码中，Java 名称和 XML id 是不同的。是否有命名小部件的“最佳实践”或标准？例如，是否也应将 XML id 称为 acceptButton，而不是 acceptBtn？这似乎微不足道，但当其他人为 Android 名称和 XML id 提供完全不同的名称时，这让我很恼火。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:50:24.563

Google 没有关于在 xml 文件中命名资源的建议。还要检查[贡献者的代码样式指南，](http://source.android.com/source/code-style.html)您没有发现任何提及它，因此最好查看 SDK，您可以在其中看到 Google 在标识符命名方面不一致。

在整个 SDK 中，您可以找到如下约定：

```
mHeaderText = (TextView) view.findViewById(R.id.headerText);

mHeaderText = (TextView) view.findViewById(R.id.header_text);

mHeaderText = (TextView) view.findViewById(R.id.HeaderText); 
```

我建议每个项目保持一致。决定一种命名约定并在整个项目中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:12:42.210

Java 名称和 XML id 从来都不是强制性的。而且我认为谷歌没有提供任何这样的命名标准。但是，如果它们都相同，这似乎是一个很好的做法。通过保持它们相同，我们可以仅在有多个控件时通过名称轻松识别控件。

另一种方法是您可以定义 java 名称和 XML id 的命名样式，并为所有控件遵循相同的方式。但它是特定于开发人员或项目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:17:22.673

正如 Nirav 所说，这从来都不是强制性的，但是 id 和 Variable 具有相同的名称是一种很好的做法，我总是这样做。这件事节省了您的时间，您无需记住 xml 中的 Id 和代码中的变量的不同名称，而且您只需在 xml 中将其定义为代码后复制和粘贴即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-16T04:24:23.567

我会将它更贴切地解释为 Java 约定：“ *AcceptBtn* ”指向一个类，“ ***acceptBtn*** ”指向一个实例，“ *accept_btn* ”——其他。**“id”更像是一个实例**，而不是一个类。至少其他人。但我更喜欢它作为一个例子。

```
R.id.AcceptBtn // As a class.
R.id.acceptBtn // As an instance.
R.id.accept_btn // Other cases. 
```

此外，根据 Steve McConnel 的“代码完成” ， *acceptBtn*更可取**的是写成*acceptButton***。它更具可读性和可写性，但我们阅读代码的次数多于编写代码。所以可读的代码可以节省更多的时间。

# php - 如何在 Symfony2 路由中有可选参数？

> ID：11980175
> 
> 赞同：47
> 
> 时间：2012-08-16T03:04:44.710
> 
> 标签：php, symfony, routes

我在下面有这段代码：

```
/**
 * Lists all User entities.
 *
 * @Route("/{cid}",defaults={"cid" = null},name="user")
 * @Template()
 */
public function indexAction($cid=null)
{} 
```

现在，如果我输入`site/user/1`，那么它可以工作，但如果我输入`site/user/`它会说：

```
No route found 
```

我怎样才能让两条路线都有效？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-08-16T07:04:03.837

尝试转到`site/user`（注意末尾没有反斜杠）。

一般来说它应该可以工作，我有相对相似的配置工作。

但是，如果所有其他方法都失败了，您始终可以为同一操作定义多个路线，即

```
/**
 * Lists all User entities.
 *
 * @Route("/", name="user_no_cid")
 * @Route("/{cid}", name="user")
 * @Template()
 */
public function indexAction($cid=null)
{ 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-08-16T07:01:17.007

使用 yml 文件进行路由配置，并在路由参数中为 id 添加默认值，如下所示：

```
user:
  pattern:   /site/user/{id}
  defaults:  { _controller: YourBundle:Default:index, id: 1 } 
```

[在此处](http://symfony.com/doc/current/book/routing.html)查看文档

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-13T11:40:03.260

您也可以使用 GET 参数来执行此操作，例如

```
/**
 * @param Request $request
 *
 * @return Response
 */
public function displayDetailAction(Request $request) : Response
{
    if ($courseId = $request->query->get('courseId')) { 
```

# php - 如何输出值？

> ID：11980187
> 
> 赞同：0
> 
> 时间：2012-08-16T03:06:02.220
> 
> 标签：php

```
$i = 1;
 foreach ($product->getOptions() as $o) {
     $values = $o->getValues();
     foreach ($values as $v) {
            print_r($v->getData());
     }
     $i++;
 } 
```

上面的代码输出以下结果：

```
Array
(
    [option_type_id] => 9
    [option_id] => 3
    [sku] => 
    [sort_order] => 0
    [default_title] => Black
    [store_title] => 
    [title] => Black
    [default_price] => 0.0000
    [default_price_type] => fixed
    [store_price] => 
    [store_price_type] => 
    [price] => 0.0000
    [price_type] => fixed
)
Array
(
    [option_type_id] => 7
    [option_id] => 3
    [sku] => 
    [sort_order] => 0
    [default_title] => Red
    [store_title] => 
    [title] => Red
    [default_price] => 0.0000
    [default_price_type] => fixed
    [store_price] => 
    [store_price_type] => 
    [price] => 0.0000
    [price_type] => fixed
)
Array
(
    [option_type_id] => 8
    [option_id] => 3
    [sku] => 
    [sort_order] => 0
    [default_title] => White
    [store_title] => 
    [title] => White
    [default_price] => 0.0000
    [default_price_type] => fixed
    [store_price] => 
    [store_price_type] => 
    [price] => 0.0000
    [price_type] => fixed
) 
```

我想输出`[title]`值。我怎么做？谢谢你。我试过用`$v->getData()['title']`，但没有用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T03:07:53.347

在php5.4之前，你不能这样做`$v->getData()['title']`，你需要使用一个变量。

```
$i = 1;
foreach ($product->getOptions() as $o) {
    $values = $o->getValues();
    foreach ($values as $v) {
        $data = $v->getData();
        echo $data['title'];
    }
    $i++;
} 
```

# asp.net - 在不使用 DataPager 的 QueryString (ListView ASP.NET) 的情况下确定当前页面

> ID：11980188
> 
> 赞同：0
> 
> 时间：2012-08-16T03:06:16.003
> 
> 标签：asp.net, listview, query-string, datapager

我有一个包含ListView的选项卡控件，有三个选项卡，每个选项卡包含相同的listView，但是每当Tab Chagnes时，数据源会更改。

假设有 3 个选项卡： Tab1：客户 Tab2：项目 Tab3：订单

当我使用 DataPager 时，问题就来了。( **Previous** 1 2 3 4 5 6 ... **Next** ) DataPager 使用 QueryString：

```
<asp:DataPager runat="server" ID="DataPager1" PagedControlID="ListView1" PageSize="5"     QueryStringField="page"  OnPreRender="Pager_PreRender" >
    <Fields>
        <asp:NextPreviousPagerField ButtonType="Button" PreviousPageText="Previous" />
        <asp:NumericPagerField ButtonType="Link" ButtonCount="10" />
        <asp:NextPreviousPagerField ButtonType="Button" NextPageText="Next" />
    </Fields>
</asp:DataPager> 
```

这会产生以下 URL：

http:// localhost /My​​Project/view/Customers?page=1

假设我在**Tab3: Orders**中，如果我导航到下一页，则会发生回发并显示**Tab1: Customers**，这是因为 URL 指示**view/Customers?page=1** 无论如何都可以在不使用的情况下实现分页请求参数？

这是我使用 QueryString 的地方：

```
 protected void Pager_PreRender(object sender, EventArgs e)
    {
        int CurrentPage = 0;
        Int32.TryParse(Request.QueryString["page"], out CurrentPage);
        CurrentPage = CurrentPage.Equals(0) ? 1 : CurrentPage;

        HyperLink PreviousLink = DataPager1.Controls[0].Controls[0] as HyperLink;
        HyperLink NextLink = DataPager1.Controls[2].Controls[0] as HyperLink;
        if (PreviousLink != null)
        {
            if (CurrentPage.Equals(1))
            {
                PreviousLink.Visible = false;
            }
            else if (CurrentPage > 1)
            {
                PreviousLink.Visible = true;
            }
        }
        if (NextLink != null)
        {
            if ((CurrentPage * DataPager1.PageSize) >= DataPager1.TotalRowCount)
            {
                NextLink.Visible = false;
            }
            else
            {
                NextLink.Visible = true;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:34:58.077

您可以使用 PagingDataSet 并使用 HiddenField 来存储页面索引。刚刚在另一个答案中解释...

[带分页的自定义数据表](https://stackoverflow.com/questions/11974145/custom-datatable-with-paging/11974409#11974409)

有道理？

# matlab - matlab 多个文件夹

> ID：11980192
> 
> 赞同：1
> 
> 时间：2012-08-16T03:06:26.857
> 
> 标签：matlab

我有一个包含 50 个文件夹的目录，每个文件夹有 50 个文件。我有一个脚本可以读取每个文件夹中的所有文件并保存结果，但我每次都需要输入文件夹名称。我可以使用任何循环或批处理工具吗？非常感谢任何建议或代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:18:40.290

可能有一种更简洁的方法，但是`dir`可以将命令的输出分配给一个变量。这为您提供了一个结构，相关字段为`name`and `isdir`。例如，假设顶级目录（包含 50 个文件的目录）中只有文件夹，下面将为您提供第一个文件夹的名称：

```
folderList = dir();
folderList(3).name 
```

（请注意，folderList 结构中的前两个条目将用于“.”（当前目录）和“..”（父目录），因此如果您想要第一个包含文件的目录，您必须转到第三个条目）。如果您希望逐个浏览文件夹，可以执行以下操作：

```
folderList = dir();
for i = 3:length(folderList)
    curr_directory = pwd;
    cd(folderList(i).name); % changes directory to the next working directory
    % operate with files as if you were in that directory
    cd(curr_directory);  % return to the top-level directory
end 
```

如果顶级目录包含文件和文件夹，那么您需要检查`isdir`folderList结构中的每个条目——如果为“1”，则为目录，如果为“0”，则为文件。

# iphone - Objective-C 后台进程应用

> ID：11980193
> 
> 赞同：3
> 
> 时间：2012-08-16T03:06:44.330
> 
> 标签：iphone, objective-c, ios

我正在做 iOS 计时器应用程序，但是当我按下主页按钮时，计时器将停止。

我想知道如果关闭应用程序，程序可以继续工作吗？

并且回去应用程序可以继续运行。

我看到一些文章[如何在 iphone 应用程序中编写后台服务？](https://stackoverflow.com/questions/6814731/how-to-write-a-background-service-in-iphone-application) 说不能在后台运行。

有人能帮我吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:22:31.790

如果它是你正在做的计时器，你可以通过 CACurrentMediaTime() 始终保持它开始的时间，如果你的应用程序进入后台，当它再次进入前台时，在`applicationDidBecomeActive:(UIApplication *)application`中进行另一个 CACurrentMediaTime() 轮询，并且显示数字之间的差异。

我相信这就是 Apple 捆绑应用程序的工作方式。如果不使用应用程序，则无需继续处理该号码。

# ruby - gem packetfu LoadError

> ID：11980199
> 
> 赞同：0
> 
> 时间：2012-08-16T03:07:30.840
> 
> 标签：ruby, gem

我正在尝试使用 packetfu gem。我是 ruby​​ on rails 的新手，所以请多多包涵。我将 rvm 与 ruby​​-1.9.3-head [ x86_64 ] 一起使用。我也有 Mac OSX 10.7.4 尝试运行 sudo ruby​​ app/models/simpleSniff.rb 时出现此错误

```
/Users/aragorn/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- packetfu (LoadError)
from /Users/aragorn/.rvm/rubies/ruby-1.9.3-head/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
from app/simpleSniff.rb:2:in `<main>' 
```

simpleSniff.rb 中包含的代码是

```
#!/usr/bin/env ruby
require 'packetfu'

include PacketFu
iface = "eth1"

cap = Capture.new(:iface => iface, :start => true)
cap.stream.each do |p|
 put p
end 
```

$gem 列表 *** 本地宝石 ***

```
actionmailer (3.2.8)
actionpack (3.2.8)
activemodel (3.2.8)
activerecord (3.2.8)
activeresource (3.2.8)
activesupport (3.2.8)
arel (3.0.2)
builder (3.0.0)
bundler (1.1.5)
coffee-rails (3.2.2)
coffee-script (2.2.0)
coffee-script-source (1.3.3)
diff-lcs (1.1.3)
erubis (2.7.0)
execjs (1.4.0)
hike (1.2.1)
i18n (0.6.0)
journey (1.0.4)
jquery-rails (2.0.2)
json (1.7.4)
mail (2.4.4)
mime-types (1.19)
multi_json (1.3.6)
packetfu (1.1.5)
pcaprub (0.11.2)
polyglot (0.3.3)
rack (1.4.1)
rack-cache (1.2)
rack-ssl (1.3.2)
rack-test (0.6.1)
rails (3.2.8)
railties (3.2.8)
rake (0.9.2.2)
rdoc (3.12)
rspec (2.11.0, 0.9.4)
rspec-core (2.11.1)
rspec-expectations (2.11.2)
rspec-mocks (2.11.2)
rubygems-bundler (1.0.6)
rvm (1.11.3.5)
sass (3.2.1)
sass-rails (3.2.5)
sdoc (0.3.16)
sprockets (2.1.3)
sqlite3 (1.3.6)
thor (0.16.0)
tilt (1.3.3)
treetop (1.4.10)
tzinfo (0.3.33)
uglifier (1.2.7) 
```

最后我的 Gemfile 是

```
source 'http://rubygems.org'
gem "rails", "3.2.8"
gem "rspec", "~> 0.9.2"
gem "sdoc", "~> 0.3.16"
gem "pcaprub", "~> 0.11.2"
gem "packetfu", "~>1.1.5"
# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'
gem 'sqlite3' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T21:35:30.580

A）需要的问题具体是因为您是 sudo'ing 而不是 rvmsudo'ing（这将使您的 ruby​​ 环境保持完整）

B) 如果 PacketFu 和 Pcaprub 以及注入和捕获都在您的 OS X 机器上运行，请告诉我！我会既震惊又敬畏。我听说它对某些人有效。不过，我从来没有亲眼见过它。

# assembly - 如何在 16 位汇编中从另一个位置向视频内存提供字节？

> ID：11980200
> 
> 赞同：1
> 
> 时间：2012-08-16T03:07:47.453
> 
> 标签：assembly, x86, 16-bit

我已将特定数据存储在内存位置**0x4000**上。我想将一个字节从那里传递到内存位置**0xb800**，以便将数据打印在屏幕上。当我尝试将我假设在**0x4000:0中的第一个字节存储在****0xb800:0**中时，就会出现问题。我用作示例的代码如下：

 **```
mov ax, 0xb800
mov es, ax
mov byte [es:0], 'A' 
```

这可以很好地编译并完美运行，但是我正在尝试适应的内容会在 NASM 上引发“**无效段覆盖”错误。**这是我的非工作代码：

```
mov ax, 0xb800
mov es, ax
mov byte [es:0], byte [0x4000:0] 
```

是否可以使用 ES 段从 0x4000:[offset] 获取单个字节并将其馈送到 0xb800:[offset] ？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:12:37.447

你可以做到这一点，但你不能像你一样在一条指令中做到这一点。您需要使用另一个段寄存器，例如`ds`，加上一个中间寄存器（`al`此处）：

```
mov ax, 0x4000
mov ds, ax
mov ax, 0xb800
mov es, ax
mov al, [ds:0]
mov [es:0], al 
```

请注意，如果您已经`ds`指向其他地方，那么您也会考虑到这一点（例如通过保存和恢复它）。**

# java - Java 正则表达式将字符串除以“。”

> ID：11980201
> 
> 赞同：1
> 
> 时间：2012-08-16T03:07:50.883
> 
> 标签：java, regex

例如，如果我有一个字符串`"Sc_bookstore.PKG_book.SP_Harrypotter"`。

我将如何分离架构、包和 StoredProc？即，我想让他得到以下输出：

```
Sc_bookstore
PKG_book
SP_Harrypotter 
```

我将在多个 StoredProc 调用中使用这个正则表达式，它们都遵循“Sc_”“PKG_”“SP_”的标准

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:10:29.107

使用`"\\."`or`"[.]"`如果需要正则表达式拆分分隔符（如[`String.split`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String))）。

[Java 正则表达式](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#sum)`.`中的A表示“匹配任何字符”（大致取决于选项）；上面的两种形式转义/阻止了这个意思，所以它匹配一个字面句号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:13:19.820

任何时候你需要用分隔符来分割一个字符串，你应该考虑使用 String`split`方法：

```
String s = "Sc_bookstore.PKG_book.SP_Harrypotter";
String parts[] = s.split("\\.");
parts[0]; // holds "Sc_bookstore"
parts[1]; // holds "PKG_book"
parts[2]; // holds "SP_Harrypotter" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:12:04.610

你可以使用 split （没有正则表达式）

```
String[] values;
values = str.split("\\."); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:14:32.973

如果您真的想要/需要正则表达式，请执行以下操作：

```
^(Sc_\w+)\.(PKG_\w+)\.(SP_\w+)$ 
```

将允许您捕获组值

对于输入`Sc_bookstore.PKG_book.SP_Harrypotter`：

```
Group 1: "Sc_bookstore"
Group 2: "PKG_book"
Group 3: "SP_Harrypotter" 
```

但是，在您的情况下，只需将字符串拆分`.`就可以很好地满足您的需求

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T03:16:13.280

假设一个字符串总是包含一个这样的记录，使用这个：

```
^Sc_([^.]+)\.PKG_([^.]+)\.SP_([^$]+)$ 
```

...请注意，这会删除字符串的 Sc_、PKG_ 和 SP_ 部分，并且只返回“内容”。

出于测试目的，我创建了一个简单的[JavaRegexTester](http://sourceforge.net/projects/javaregextester/)应用程序来测试正则表达式。

# url - CMIS 的标准 URL 格式？基本 URL + 存储库 + 本地路径

> ID：11980205
> 
> 赞同：0
> 
> 时间：2012-08-16T03:08:37.463
> 
> 标签：url, cmis

通过 URL，是否有一种标准方式来表示特定[CMIS](http://docs.oasis-open.org/cmis/CMIS/v1.0/os/cmis-spec-v1.0.html)服务器的给定存储库的子文件夹的方式？

例如：

*   CMIS 服务器：`http://server/alfresco/service/cmis`
*   此服务器中的存储库：`myrepo7`
*   此存储库中的子文件夹：`proposals/eurostar/`

有没有一种标准的方式来表达整个事情作为一个 URL？

如果我用斜杠加入整个事情，我将无法判断哪一部分是回购：

```
http://server/alfresco/service/cmis/myrepo7/proposals/eurostar/ 
```

也许有破折号或其他东西的语法？

```
http://server/alfresco/service/cmis#myrepo7#proposals/eurostar/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:19:29.530

AtomPub 绑定的 CMIS URL 是特定于存储库的。你不应该依赖任何观察。

CMIS 1.1 浏览器绑定定义了您想要在此处实现的目标，可跨所有 CMIS 存储库进行互操作。但目前支持这种绑定的存储库并不多。

# javascript - 警报消息不起作用

> ID：11980211
> 
> 赞同：0
> 
> 时间：2012-08-16T03:10:08.173
> 
> 标签：javascript

## 嵌入了javascript的html

```
<html>
<head>
        <title>Example</title>

        <script type ="text/javascript"> 
```

我有没有正确调用这个函数？？？？

```
function displayatts()
{
    document.getElementById("buttonone").onclick = saysomething;

} 
```

这里有什么问题吗？？？

```
function saysomething()
{
    alert("I am 28 years old");
}
</script>

<body>
<input type="button" id="buttonone" value="me" >

</body>
</head>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:10:57.830

您的脚本在文档被解析之前运行。
因此，`getElementById`返回 null。

将 移动`<script>`到底部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:23:31.963

> *“我有没有正确调用这个函数？？？？”*

您根本没有调用该`displayatts()`函数。将以下内容添加到脚本的末尾：

```
window.onload = displayatts; 
```

一旦页面完成加载，这种方式`displayatts()`将被自动调用。反过来，它将在您的按钮上设置点击处理程序。

此外，`</head>`在开始标签之前包含结束`<body>`标签。

演示：http: [//jsfiddle.net/nnnnnn/rxDXa/](http://jsfiddle.net/nnnnnn/rxDXa/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:36:20.003

## 这是完整的示例。

这肯定会奏效。如果你愿意，可以测试一下。将以下代码复制并粘贴到 W3Schools 测试环境中，“编辑并单击我”进行测试。

[http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe)

```
<!DOCTYPE html>
<html>
<head>
<title>Example</title>
<script type ="text/javascript">

    function saysomething()
    {
        alert("I am 29 years old");
    }

    function displayatts()
    {
        document.getElementById("buttonone").onclick = saysomething;

    }

</script>

<body onload="displayatts();">
 <input type="button" id="buttonone" value="me" >
</body>
</head>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:17:58.820

```
window.onload  =  displayatts; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T03:20:59.043

将此代码粘贴到`</body>`页面中的标记之前。因此，您可以确定元素是否为空，或者代码在呈现 html 元素之前尝试工作。希望这对您的情况有所帮助..

```
<script>
var element = document.getElementById("buttonone");
if(element){
element.setAttribute("onclick", "saysomething();");
}else
{
alert("element null, move the code to bottom or check element exists");
}
</script> 
```

# c++ - 使用二进制模式将数据结构写入文件

> ID：11980212
> 
> 赞同：0
> 
> 时间：2012-08-16T03:10:24.313
> 
> 标签：c++, c, binaryfiles, data-persistence

代码如下所示：

```
struct Dog {
  string name;
  unsigned int age;
};

int main()
{
    Dog d = {.age = 3, .name = "Lion"};
    FILE *fp = fopen("dog.txt", "wb");
    fwrite(&d, sizeof(d), 1, fp);   //write d into dog.txt
} 
```

我的问题是将数据对象或结构写入二进制文件有什么意义？我认为这是为了使正在运行的程序中生成的数据持久化，对吗？如果是，那么我该如何取回数据？使用`fread`?

这让我想到了类似数据库的东西，以同样的方式将数据库写入磁盘？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:13:46.420

以二进制形式写入数据非常有用，并且比以文本形式读取/写入要快得多，例如视频游戏（尽管并非每个视频游戏都这样做），当保存游戏时，所有必要的结构/类和其他数据都被写入二进制保存文件。

它只是使用二进制的一种用途，但这样做的主要原因是速度。

并且要读回数据，您需要知道保存它的格式，例如，作为一个简单的例子，如果我保存了一个整数、n 大小的 char 数组和一个布尔值，我需要读取二进制文件以整数、n 大小的 char 数组和布尔值形式输入。否则数据读取不正确，根本没有用处

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:23:23.850

你可以做到，但你会有很多问题需要关心：

*   结构类型：你所有的数据都需要*真正*进入结构，或者你可以写一个指向其他地方的指针。
*   结构更改：如果您需要更改结构，则需要编写一个转换器来读取旧结构并写入新结构。
*   语言互操作性：将难以使用其他语言访问数据

在关系数据库普及之前的早期，这是一种常见的做法。您可以使索引文件指向记录号。

但是，现在我会建议您进行序列化并编写字符串而不是二进制文件。

**注意**：如果字符串类似于 char[40]，您的代码可能会继续存在......但是如果您的问题是关于 C++ 并且字符串是一个类，那么在孩子长大之前杀死它！字符串对象字符不在您的结构中，而是在堆中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:24:29.437

当心。结构中的字段“名称”的类型是“字符串”。此类包含动态分配的数据。因此，以这种方式将“字符串”数据写入文件只会写入指针，而不是数据本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:30:44.007

[C++ 中间件编写器](http://webEbenezer.net)支持文件的二进制序列化。

从编组的角度来看，结构的“无符号整数年龄”成员是一个潜在的问题。我会考虑将类型更改为 uint32_t。

# c# - C#/SSIS：需要帮助查找 MySQL 连接器的 ComponentClassID (6.4.1)

> ID：11980216
> 
> 赞同：0
> 
> 时间：2012-08-16T03:11:01.877
> 
> 标签：c#, mysql, ssis

一段时间以来，我一直在尝试以编程方式创建一个具有 MySQL 数据源的 SSIS 包，并且遇到了一个问题，即如何为源 ConnectionManager 设置适当的 ComponentClassID 和 ConnectionManager 类型：

```
ConnectionManager srcCm = pkg.Connections.Add("ADO.NET"); // <-- HALP!
srcCm.Name = srcConnectionName;

MainPipe dfTask = (MainPipe)dfTaskHost.InnerObject;
// Add the DB Source to the data flow.
IDTSComponentMetaData100 srcComp = dfTask.ComponentMetaDataCollection.New();

srcComp.ComponentClassID = "ADO.NET:MySql.Data.MySqlClient.MySqlConnection, MySql.Data, Version=6.5.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d"; // <-- Wha? 
```

调试时，我收到十六进制错误 0xC0048021，根据[此页面](http://msdn.microsoft.com/en-us/library/ms345164.aspx)，这意味着“组件丢失、未注册、不可升级或缺少所需的接口。此组件的联系信息是“%1”。

在这一点上，我已经看到了许多不同的方法来让这个连接器工作，但我似乎没有正确的组合。

任何帮助将不胜感激。

谢谢！富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T05:44:39.343

```
Package.Connections.Add("ADO.NET:MySql.Data.MySqlClient.MySqlConnection, MySql.Data, Version=6.2.5.0, Culture=netral, PublicKeyToken=c5687fc88969c44d");
srcComp.ComponentClassID=typeof(DataReaderSourceAdapter).AssemblyQualifiedName; 
```

# java - javax.net.ssl.SSLHandshakeException：握手期间远程主机关闭连接

> ID：11980218
> 
> 赞同：0
> 
> 时间：2012-08-16T03:11:05.663
> 
> 标签：java, authentication, networking, ssl

我们为特定 IP 地址配置了 Big F5 负载平衡器虚拟服务器，它将传入的 https 请求重定向到具有生成响应功能的多个 Windows 服务器。

我正在使用 SoapUI 来测试通过 Big F5 中虚拟服务器的 IP 地址对这些 Windows 服务器的访问。

使用由我们也设置并通过 SoapUI 发送请求的组织生成的服务器和客户端证书，我得到了预测的响应。

业务要求需要 Thawte 的商业签名证书。

我们创建了一个证书服务请求 (CSR) 来生成一个服务器证书及其私钥，然后我们让 Thawte 对其进行签名，并且还向 Thawte 请求了一个客户商业签名的证书。

我们在 SoapUI 客户端和 Big F5 负载平衡器中加载了这两个证书，但我们尝试测试我们收到“javax.net.ssl.SSLHandshakeException：握手期间远程主机关闭连接”错误的请求。

我的问题是：如何监控 2 路 SSL 握手的确切终止位置 到底发生了什么的实际原因？.. 为什么现在使用商业签名的证书不起作用？

欢迎任何答复。谢谢。

但是，当我们将 Serverto 切换为由 Thawte 进行商业签名时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-22T14:05:09.120

这可能是由于 Java 安全特性。如果是这样，您需要编辑位于`soapui-4.x.x\bin`文件夹中的 soapui-4.xxvmoptions 文件并添加`-Dsun.security.ssl.allowUnsafeRenegotiation=true`到末尾。

您可能还需要将证书导出为 pfx 文件并在soapUI 首选项页面中进行设置。有关详细信息，您可以查看`http://geekswithblogs.net/gvdmaaden/archive/2011/02/24/how-to-configure-soapui-with-client-certificate-authentication.aspx`和`http://forums.devarticles.com/java-development-38/javax-net-ssl-sslhandshakeexception-received-fatal-alert-handshake-failure-11809.html`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-05T03:56:04.170

> 客户端是一个 SoapUI 请求，除了不同的客户端证书之外没有改变

这表明服务器不信任新的客户端证书，这反过来意味着甚至没有发送客户端证书，因为它没有由服务器的受信任签名者之一签名。在这种情况下，关闭连接是服务器唯一真正的选择，因为它没有 SSL 警报。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-10T07:15:16.113

确保您已打开地址转换，并且您的 VIP 的 SNAt 设置为自动映射

# java - RXTX串口开机写二进制数据

> ID：11980223
> 
> 赞同：0
> 
> 时间：2012-08-16T03:11:54.807
> 
> 标签：java, linux, rxtx, slackware

我今天遇到了一个奇怪的问题，找不到任何正确的方法来解决它。**我有一个以 Slackware 12.1**上的 /etc/rc.d/rc.local 开头的 Java 程序。该程序完美运行。发出一些请求后，它必须在 ttyS0 上发送数据，但在最后一次安装中，我需要发送二进制数据而不是 ASCII，这不适用于二进制。当我通过 shell 重新启动程序时，它可以完美运行。似乎有环境变量或其他东西导致 RXTX 库启用或禁用规范模式，但找不到这个，也找不到 RXTX 中的任何设置以在正确模式下初始化串行端口。

谢谢，

亚历克斯。

**编辑 ：**

我可以通过询问来简化问题：在 Slackware 中，串行端口在哪里初始化为默认以 ASCII 模式使用？（在我的情况下 /etc/rc.d/rc.serial 是模式 644，所以没有执行。

# node.js - 带有 pg/postgres 的 node.js 纤维

> ID：11980231
> 
> 赞同：11
> 
> 时间：2012-08-16T03:12:44.873
> 
> 标签：node.js, postgresql, node-fibers

我一直在试图弄清楚如何使用 node-fibers 使我的数据库代码在 node.js 中不那么混乱，但我无法让它工作。我将代码归结为最小测试用例：

```
var Future = require('fibers/future');
var pg=require('pg');

var connstr = "pg://not_the_real_user:or_password@localhost/db";
var pconnect = Future.wrap(pg.connect);

Fiber(function() {
    var client = pconnect(connstr).wait();
    console.log("called function");
}).run(); 
```

如果我保持原样，我会收到以下错误：

```
pgfuture.js:10
}).run();
   ^
TypeError: undefined is not a function
    at Object.PG.connect.pools.(anonymous function).genericPool.Pool.create (/home/erik/code/treehouse-node/node_modules/pg/lib/index.js:49:20)
    at dispense (/home/erik/code/treehouse-node/node_modules/pg/node_modules/generic-pool/lib/generic-pool.js:223:17)
    at Object.exports.Pool.me.acquire (/home/erik/code/treehouse-node/node_modules/pg/node_modules/generic-pool/lib/generic-pool.js:267:5)
    at PG.connect (/home/erik/code/treehouse-node/node_modules/pg/lib/index.js:75:15)
    at Future.wrap (/home/erik/code/treehouse-node/node_modules/fibers/future.js:30:6)
    at /home/erik/code/treehouse-node/pgfuture.js:8:18 
```

但是，如果我注释掉调用 pconnect 的行，我会在控制台上收到“调用函数”消息并且没有错误。github页面上的示例具有几乎相同的结构，并且它在我的系统上确实可以正常工作，但是我对我在这里做错了什么感到困惑。

编辑：附加细节

我已经设法让代码以两种不同的方式运行，这些方式似乎不相关，但都有相同的行为。函数完成后，节点挂起，我必须用 ctrl-c 杀死它。以下是我为获得该结果所做的两件事：

1）将 pg.connect 包装在一个匿名函数中，然后用 Future 包装它：

```
pconnect = Future.wrap(function(err,cb){pg.connect(err,cb);}); 
```

2）这个是一个真正的谜，但它似乎有相同的结果。在光纤内部，我只是在调用 pconnect 之前直接调用 pg.connect，一切似乎都解决了。

```
// add this line before call to pconnect
pg.connect(connstr, function(e,c){console.log("connected.");});
// and now the original call to pconnect
var client = pconnect(connstr).wait(); 
```

我可以想象一种情况，例如，如果 pg.connect 函数有其他可选参数以某种方式干扰 Future.wrap 调用的预期布局，那么 (1) 将是有意义的。另一种可能性是对象超出范围，并且在实际调用 pconnect 时未定义“this”引用。我不知道为什么（2）有任何影响。

编辑：部分答案

好的，所以我至少回答了部分问题。我对对象范围的想法被证明是正确的，并且通过使用 bind() 函数，我能够消除额外的回调包装层：

```
var pconnect = Future.wrap(pg.connect.bind(pg)); 
```

但由于未知原因，它仍然在执行结束时挂起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-24T17:06:31.187

您是否在执行结束时断开与数据库的连接？

如果没有，它会阻止 node.js 程序退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-07T22:35:41.210

添加我自己的另一个泄漏代码。

@Almad 我在这里与提供的回调断开连接，但仍然挂起：

```
var future = Future.task(function() {
   var ret = Future.wrap (pg.connect.bind(pg), "array") (conString).wait ();
   ret[1]();
}).detach(); 
```

# asp.net - 访问路径被拒绝错误

> ID：11980235
> 
> 赞同：0
> 
> 时间：2012-08-16T03:13:15.677
> 
> 标签：asp.net, iis-6

这里和网络上有很多问题，但是我无法解决我的问题。

我的应用程序池用户设置为网络服务，并且我已在文件夹上验证它具有完全访问权限（检查每个权限）。但是，当我发起 GET 请求以下载文件时，它会显示`Access to the path is denied`.

我在 IIS6 上使用 .NET 4 和 webforms。

![在此处输入图像描述](../Images/34ecf6979e766c990fa0ded964504f58.png) ![在此处输入图像描述](../Images/7d4c69dd6ca4aaf7a885d6149405937d.png)![在此处输入图像描述](../Images/b75ca7ca336ae7334a46383ae4d381ad.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:31:58.080

所以问题最终是文件本身没有`NETWORK SERVICE`分配给它的用户，因为我将文件拖到该目录中而没有网站创建它们。

我的印象是在目录上设置用户会影响其中的文件。

# windows-phone-7 - 如何检测手机振动

> ID：11980241
> 
> 赞同：0
> 
> 时间：2012-08-16T03:14:24.423
> 
> 标签：windows-phone-7

摇晃和振动有什么区别？我需要一些帮助：

1) 如何在手机平放时检测手机震动。2) 如何检测手机挂机时的震动。

非常感谢您的帮助和代码示例。谢谢

- - 更新

摇晃是否意味着沿 x 和 y 移动？

和 Virbate 意味着垂直上下移动？

```
// 构造函数
公共主页（）
{
    初始化组件（）；
    acc.ReadingChanged += new EventHandler(acc_ReadingChanged);
    acc.Start();
}

void acc_ReadingChanged（对象发送者，AccelerometerReadingEventArgs e）
    {
    Deployment.Current.Dispatcher.BeginInvoke(() => ThreadSafeAccelerometerChanged(e));
    }

void ThreadSafeAccelerometerChanged(AccelerometerReadingEventArgs e)
{
    XText.Text = eXToString("0.000");
    YText.Text = eYToString("0.000");
    ZText.Text = eZToString("0.000");
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:08:33.597

摇动通常涉及使用手机中的加速度计来检测任何摇动手势/事件。您可以在发生摇晃手势时对您的应用程序进行相应的编程。而当您输赢时，您可以使用振动来提示用户某种输出或发生的事件，就像在游戏中一样。

总而言之，抖动是一种输入手势，振动是输出手势。

对于加速度计，请参阅此[http://msdn.microsoft.com/en-us/library/ff604984.aspx](http://msdn.microsoft.com/en-us/library/ff604984.aspx) ，对于振动行为，您可以从此[http://blog.xyzzer.me/2012/01/09/vibration开始-behaviors-for-windows-phone-part-1/](http://blog.xyzzer.me/2012/01/09/vibration-behaviors-for-windows-phone-part-1/)

希望能帮助到你

# php - Html, reading data after '?'

> ID：11980249
> 
> 赞同：-1
> 
> 时间：2012-08-16T03:15:50.717
> 
> 标签：php, html

I am trying to get an HTML/PHP script to interpret data sent after the `?` in a url. I've seen sites that do this, YouTube being one of them. I thought this was called Post Data (not sure if it is), I've been searching for a few days, and I can find is the PHP `$_POST['']` with some HTML forms reading the data from a textbox, but I would like to read directly from the url, EX. www.example.com?ver=1

How would I go about doing this?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T03:17:13.680

What you're looking for is called a [query string](http://en.wikipedia.org/wiki/Query_string). You can find that data in `$_GET`.

```
print_r($_GET); 
```

If you need access to the raw data (and you probably don't, unless you need multiples for some variable names), check `$_SERVER['QUERY_STRING']`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T03:42:04.693

You can't do that in HTML pages. In PHP pages, you can read (and process) the parameters using the `$_GET` array. This array contains all the things after which come after ? in the URL. Suppose we have a URL like

```
page.php?a=b&c=d 
```

Then we can access `a` and `c` parameters by `$_GET['a']` and `$_GET['b']`. There is also `$_POST` which works a bit different. You can google it to find out more.

# java - 从 Java 套接字 InputStream 读取请求内容，总是在 header 之后挂起

> ID：11980255
> 
> 赞同：8
> 
> 时间：2012-08-16T03:16:37.943
> 
> 标签：java

我正在尝试使用核心 Java 从输入流中读取 HTTP 请求数据，使用以下代码：

```
BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
            String inputLine;
            while ((inputLine = in.readLine()) != null)
                System.out.println(inputLine);
            in.close(); 
```

我很好地收到了标头，但随后客户端永远挂起，因为服务器从未找到请求的“EOF”。我该如何处理？我已经看到这个问题问了很多，大多数解决方案都涉及到上述问题，但它对我不起作用。我试过同时使用 curl 和 web 浏览器作为客户端，只是发送一个 get 请求

感谢您的任何想法

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-16T03:41:53.433

HTTP 请求以空行结束（可选地后跟请求数据，例如表单数据或文件上传），而不是 EOF。你想要这样的东西：

```
BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
String inputLine;
while (!(inputLine = in.readLine()).equals(""))
    System.out.println(inputLine);
in.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-03-23T21:28:48.543

除了上面的答案（因为我还不能发表评论），我想补充一些像 Opera 这样的浏览器（我猜是它做了什么，或者是我的 ssl 设置，我不知道) 发送 EOF。即使不是这种情况，您也希望防止这种情况发生，以便您的服务器不会因为 NullPointerException 而崩溃。

为避免这种情况，只需将空测试添加到您的条件中，如下所示：

```
while ((inputLine = in.readLine()) != null && !inputLine.equals("")); 
```

# c# - ChannelFactory.Open VS IClientChannel.Open

> ID：11980263
> 
> 赞同：7
> 
> 时间：2012-08-16T03:17:56.020
> 
> 标签：c#, .net, wcf, wcf-client

我试图更好地了解 WCF 的一些内部工作原理。我已经做了很多环顾四周，但我无法找到`ChannelFactory.Open()`与`IClientChannel.Open()`. 开厂的目的是什么？如果通道是用于通信的，那么在通道创建和打开后，工厂在这个过程中扮演什么角色？

这个问题在[这里](https://stackoverflow.com/questions/866302/channelfactory-close-vs-iclientchannel-close)被问到，在其他问题中，但从未直接回答。

编辑：

对源码进行反编译后，发现了一些需要在ChannelFactory上调用Open的具体原因，具体如下。

我仍然难以理解的是为什么这项工作是通过 ICommunicationObject 提供的机制完成的，而工厂实际上并没有与任何东西通信（据我所知）。为什么不在对象被构造或处置时处理这些事情呢？

我认为我可能在杂草中已经足够远了，这样的答案可能不会公开。感谢那些对原始问题进行权衡的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T15:22:32.983

Open 需要在工厂中调用，因为它是一个 ICommunicationObject - 在您使用其中之一之前，它需要被打开。但是在大多数情况下，当您调用诸如 CreateChannel 之类的东西时，工厂会自动为您打开，因此您很少需要担心显式打开工厂。

关于关闭，它实际上取决于工厂使用的绑定。在大多数情况下，您是正确的，资源主要与频道相关联。但是有可能某个绑定会在同一个底层连接中多路复用多个通道，因此关闭通道只会从要多路复用的列表中删除通道。只有当工厂关闭时，才真正释放底层连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T17:50:21.213

在反编译了一堆相关的类之后`System.ServiceModel`，我能够得到更多的信息。

该`Open`调用似乎沿着继承树向下到达 CommunicationObject，在该处调用其`Open`方法。所有这一切似乎都是提供一堆诊断信息并引发一些事件。

该类`ChannelFactory`使用 Open 事件做了很多事情，包括创建其内部通道工厂：

```
protected override void OnOpening()
{
    base.OnOpening();
    this.innerFactory = this.CreateFactory();
    if (this.innerFactory == null)
    {
        throw DiagnosticUtility.ExceptionUtility.ThrowHelperError(new InvalidOperationException(SR.GetString("InnerChannelFactoryWasNotSet")));
    }
} 
```

正如其他人在这里提到的那样，关闭事件也用于关闭所有底层通道（通过它的内部通道工厂）：

```
protected override void OnClose(TimeSpan timeout)
{
    TimeoutHelper timeoutHelper = new TimeoutHelper(timeout);
    while (true)
    {
        IChannel channel;
        lock (base.ThisLock)
        {
            if (this.channelsList.Count == 0)
            {
                break;
            }
            channel = this.channelsList[0];
        }
        channel.Close(timeoutHelper.RemainingTime());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:32:59.677

开启ChannelFactory或innerchannel只是改变对象的状态，实例化时开始处于Created状态，对象可以配置但不能发送或接收消息，在Opened状态下，communicationObject可以使用但它不再可配置

所以打开工厂的目的只是一个设计选择，当你创建第一个通道时，它确实是自动完成的，它在后台并没有太多，工厂负责创建实际从传输中带来消息的通道层并将它们发送给您的应用程序。

> 通道工厂负责创建通道。通道工厂创建的通道用于发送消息。这些通道负责从上层获取消息，执行任何必要的处理，然后将消息发送到下层。下图说明了这个过程

[http://msdn.microsoft.com/en-us/library/ms789050.aspx](http://msdn.microsoft.com/en-us/library/ms789050.aspx)

希望这可以帮助

# python - python：合并两个csv文件

> ID：11980265
> 
> 赞同：-2
> 
> 时间：2012-08-16T03:17:59.417
> 
> 标签：python, csv

我在用 python 做作业时遇到问题。我是 python 新手，所以我是一个完整的初学者。

问题：如何合并下面的两个文件？

```
s555555,7
s333333,10
s666666,9
s111111,10
s999999,9 
```

和

```
s111111,,,,,
s222222,,,,,
s333333,,,,,
s444444,,,,,
s555555,,,,,
s666666,,,,,
s777777,,,,, 
```

合并后，它应该看起来像：

```
s111111,10,,,,
s222222,,,,,
s333333,10,,,,
s444444,,,,,
s555555,7,,,,
s666666,9,,,,
s777777,,,,,
s999999,9,,,, 
```

感谢您的阅读，任何帮助将不胜感激！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:52:10.857

以下是解决问题的一种方法可以遵循的步骤。在此我将使用`FileA`,`FileB`和`Result`作为各种文件名。

解决这个问题的一种方法是给文件中的每个位置（每个`,`）一个数字来引用它，然后你从 读取行`FileA`，然后你知道在第一行之后`,`你需要把第一行从`FileB`构建你的结果你会写出来的`Result`。

1.  打开`FileA`. 理想情况下，您应该使用 ，[`with statement`](http://preshing.com/20110920/the-python-with-statement-by-example)因为它会在完成后自动关闭文件。或者您可以使用正常`open()`调用，但请确保在完成后关闭文件。

2.  循环遍历 的每一行`FileA`并将其添加到`list`. （提示：你应该使用`split()`）。为什么要列出清单？它使按索引引用项目变得更容易，因为这是我们的计划。

3.  对 重复步骤 1 和 2 `FileB`，但将其存储在不同的列表变量中。

现在下一部分是遍历 from 的行列表`FileA`，将它们与 from 的列表匹配`FileB`，以创建一个您将写入`Result`文件的新行。您可以通过多种方式做到这一点，但一种简单的方法是：

1.  首先创建一个空列表来存储您的结果 ( `final_lines = []`)
2.  循环遍历包含 for 行的`FileA`列表`for`。

您还应该记住，并非每一行 from`FileA`都会在`FileB`. 对于 's 列表中的每个第一个“位”，在`FileA`'s 列表中找到相应的行`FileB`，然后使用`index()`. 如果您热衷于，您会意识到第一项永远`0`是，下一项永远是`1`，那么为什么不简单地对值进行硬编码呢？如果你看作业；有多个`,`s 所以可能在某些时候你需要添加第四或第五“列”。老师们喜欢检查这些东西。

1.  用于`append()`以正确的顺序将项目添加到`final_lines`.

现在您已经准备好行列表，最后一部分很简单：

1.  打开一个新文件（使用`with`或`open`）
2.  依次通过`final_lines`
3.  将每一行写入文件（确保不要忘记行尾字符）。
4.  关闭文件。

如果您有任何具体问题 - 请询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:12:31.643

与python无关，但在linux上：

```
sort -k1 c1.csv > sorted1
sort -k1 c2.csv > sorted2
join -t , -11 -21 -a 1 -a 2 sorted1 sorted2 
```

结果：

```
s111111,10,,,,,
s222222,,,,,
s333333,10,,,,,
s444444,,,,,
s555555,7,,,,,
s666666,9,,,,,
s777777,,,,,
s999999,9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:20:15.813

使用第一个元素作为主键制作字典，然后合并行？

像这样的东西：

```
f1 = csv.reader(open('file1.csv', 'rb'))
f2 = csv.reader(open('file2.csv', 'rb'))

mydict = {}
for row in f1:
    mydict[row[0]] = row[1:]

for row in f2:
    mydict[row[0]] = mydict[row[0]].extend(row[1:])

fout = csv.write(open('out.txt','w'))
for k,v in mydict:
    fout.write([k]+v) 
```

# python - 覆盖 Python 类 __str__ 方法的最佳方法是什么？

> ID：11980269
> 
> 赞同：3
> 
> 时间：2012-08-16T03:18:21.253
> 
> 标签：python, class, datetime, inheritance

在我的应用程序中，我希望所有我的人都`datetime.__str__()`以不同的方式返回默认值。简单地继承和覆盖方法可以吗？

```
class datetime(datetime):
    def __str__(self):
        return self.strftime('%d-%m-%y %H:%M:%S') 
```

任何建议都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:34:51.223

通常，您会希望将新类命名为内置模块中定义的类以外的名称，但是是的，您就是这样做的。为了您的理智，请不要使用与预定义类相同的名称创建类定义。

我只是试着做`class datetime(datetime)`一点，它确实有效，至少在解释器中，但任何 python 专家都可能会笑或不寒而栗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:11:19.913

这是一个相当哲学的问题 :) 通常在 Python 中我们不喜欢这样的东西。您现在必须使用自己的类，并且始终记住使用它而不是默认日期时间（如果它们具有相同的名称，则很难维护）。Ruby 家伙只会使用 monekypatch 日期时间，我认为这更糟。

我个人什至不会用不同的名称继承它（这也会让我感到困惑），而是在任何类之外创建一些快捷功能并直接使用它。

# sql - SQL - 表关系，主要是（PK/FK）

> ID：11980273
> 
> 赞同：0
> 
> 时间：2012-08-16T03:19:08.733
> 
> 标签：sql, foreign-keys, primary-key, table-relationships

我是 SQL 新手，我有一个关于表关系的问题。目前，我的数据库中有以下表：

**人：**

```
Person_ID (PK)
Name
Company_ID(FK)
Phone
Email 
```

**公司：**

```
Company_ID (PK)
Name
Address
City
State
Invoice_ID (FK) 
```

**发票：**

```
Invoice_ID (PK)
Summary_ID (FK)
Detailed_ID (FK) 
```

**摘要_部分：**

```
Summary_ID (PK)
InvoiceNumber
Date
DueDate 
```

**详细_部分：**

```
Detailed_ID (PK)
Person_ID (FK)
Amount
Info 
```

基本上，每家公司都有多人并收到一张发票​​。

每张发票分为两个部分：

*   概括
*   详细的

摘要部分*显示*公司名称、公司地址、发票编号、发票日期和到期日。

*详细*部分显示此人的姓名、金额和其他信息。

我对这一切都错了吗？解决此问题的最佳方法是什么？谢谢！

**编辑：**

关注：在这种情况下，我是否正确分配了外键/主键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:32:14.507

PK/FK 分配似乎没问题。虽然我会建议以下内容：

1.  如果您使用任何类型的框架，请尽量与其约定保持一致。例如，Ruby on Rails 通常将主键（如果它只是一列）称为所有表的 id。注意：跨表的列名不必是唯一的。
2.  您真的需要将数据库中的摘要和详细部分分开吗？您可以将发票、摘要和详细信息组合在一个表中，然后只需检索/显示您需要的列。这既是设计问题，也是工程问题。
    *   设计：两张发票可以共享一个部分吗？
    *   工程：您认为这些部分可能会被编辑/检索多少次？

# c++ - 第一次使用 Qt：如何显示图像？

> ID：11980274
> 
> 赞同：2
> 
> 时间：2012-08-16T03:19:19.670
> 
> 标签：c++, qt

Noob：如何显示图像我对此很陌生，实际上才刚刚开始。我需要弄清楚如何在屏幕上显示图像。

首先我试过：

源代码：

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QGraphicsScene scene;
    QGraphicsView view(&scene);
    QPixmap qp = QPixmap("../images/tank2.bmp");
    if(qp.isNull())
    {
        printf("Yes its null\n");
    }
    else
    {
        QGraphicsPixmapItem item(QPixmap("../images/tank2.bmp"));
        scene.addItem(&item);
    }
    view.show();
    return a.exec();

} 
```

从：

[Qt jpg图片显示](https://stackoverflow.com/questions/1357960/qt-jpg-image-display)

它编译并运行，但不显示图像。返回 0 等。

然后我只是从那里搞砸了。我也对某些事情感到好奇：在 Qt 编辑器中，它们显示了磁盘上不存在的文件结构。他们有文件“Headers”、“Sources”和“Resources”，而在系统上它只是一个文件夹“projectname”，所有文件都在一个文件夹中。这只是为了视觉清晰吗？

我使用的 QtCreator 版本是 2.4.1，运行 Qt 4.7.4 64 位。

我的最终目标是制作一个小部件，其中图片是可点击的图标，您可以在其中选择该图片并将其放置在更大的屏幕上，如磁贴。

另一个问题：为什么 Qt 有“QString”和“QChar”之类的东西？普通的 c++ 库有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:44:42.553

如果您只想显示一个简单的图像，则将 Qlabel 作为中央小部件并调用[setPixmap()](http://qt-project.org/doc/qt-4.8/qlabel.html#pixmap-prop)将其传递给您的图像路径

> “另一个问题：为什么 Qt 有“QString”和“QChar”之类的东西？普通的 c++ 库有什么问题吗？”

是的，普通库有很多问题——至少对于 std::string 而言。
当 Qt 开始时，跨平台 STL 支持不是很好，标准库在 Unicode 和对翻译的支持方面非常糟糕。QString 做得很好——尽管我认为现代 STL 和 boost 的组合可能可以完成 QString 可以做的所有事情。

几乎所有 Qt 类型都会自动进行引用计数，因此您几乎可以忽略它们的内存管理并自由地传递它们。Qt 还可以做一些技巧，因为额外的 MOC 编译通道意味着它具有标准 C++ 所没有的类似 Java 的内省。

但总的来说，您可以自由使用标准 C++ 类型（[Qt: Qt classes vs. standard C++](https://stackoverflow.com/questions/3523622/qt-qt-classes-vs-standard-c)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:31:48.390

我认为你的问题在这里：

```
{
    QGraphicsPixmapItem item(QPixmap("../images/tank2.bmp"));
    scene.addItem(&item); 
} 
```

item 在您实际使用它之前就超出了范围。

我也很确定您的意思是使用您之前在顶级范围加载的 QPixmap。

一般来说，您希望将关于 SO 的问题限制为一个问题……但要解决您的最后一个问题：QChar 和 QString 允许 Qt 库对字符串做出几个假设。其中最明显的是 QStrings 有一个标准化的编码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T03:46:24.933

像这样测试，它可以工作。不要忘记创建 qrc 文件。

```
#include <QtGui/QApplication>
#include <QGraphicsScene>
#include <QGraphicsView>
#include <QGraphicsPixmapItem>
#include "mainwindow.h"
#include <stdio.h>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    QGraphicsScene scene;
    QGraphicsView view(&scene);
    QPixmap qp = QPixmap(":/images/123.bmp");
    if(qp.isNull())
    {
        printf("Yes its null\n");
    }
    else
    {
        printf("HAHA");
        QGraphicsPixmapItem *item = new QGraphicsPixmapItem(QPixmap(":/images/123.bmp"));
        scene.addItem(item);
    }
    view.show();
    return a.exec();

} 
```

这是qrc文件：

```
<RCC>
    <qresource prefix="/">
        <file>images/123.bmp</file>
    </qresource>
</RCC> 
```

和 .pro 文件

```
QT       += core gui
TARGET = testimage
TEMPLATE = app
SOURCES += main.cpp
RESOURCES += 123.qrc 
```

# uitableview - UITableView 显示不正确但是传入了数据

> ID：11980278
> 
> 赞同：0
> 
> 时间：2012-08-16T03:20:02.043
> 
> 标签：uitableview, ios5, xcode4.3

我有一个 UITableView 从 HTML 中获取数据。提取工作正常，我通常有大约 20 个单元格要显示，从 1、2、3、4、5 到 20。

但是，在提取之后，单元格仅显示所有单元格上第一个单元格中的内容。（即 1、1、1、1、1、1）如果我向下滚动，我会看到 6、7、8、...、20。如果我再次向上滚动，我会看到表格变成普通的...

我正在测试代码，我在insertNewObject类中发现如果我在0索引处插入，那么一切都会正常。但是，如果我只是在最后一个索引处添加对象或插入对象，则不适用于我。

这是我的 insertNewObject 类的代码：

```
- (void)insertNewObject:(id)sender {
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }

// Working code, but I want the order from the top 1, 2, 3, ..., 20 rather than 
// 20, 19, 18, ..., 2, 1
// [_objects insertObject:sender atIndex:0];

// And the code below doesn't show up correctly...
//    [_objects insertObject:sender atIndex:(_objects.count)];
//    [_objects addObject:sender];

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

这很奇怪，我认为这与绘图有关，因为如果我继续上下滚动并“清理”显示，UITableView 会显示一切正常......但是如果我执行 setDisplay，则什么都没有发生......刷新表也没有解决问题...

任何想法？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:41:38.330

您的问题中没有足够的上下文可以确定，但我认为您可能正在尝试在这里做太多工作。您可以使用该`NSMutableArray`方法`addObject:`将新对象附加到数据数组的末尾。完成此操作后，您应该能够调用`reloadData`并且您的 tableView 将重绘自身以包含新数据项的单元格。

```
- (void)insertNewObject:(id)sender
{
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    } 
    [_objects addObject:sender];
    [self.tableView reloadData];
} 
```

# qt - 如何为 Qt Creator 模拟器安装诺基亚纯字体？

> ID：11980280
> 
> 赞同：1
> 
> 时间：2012-08-16T03:20:06.550
> 
> 标签：qt, qt-creator, nokia, meego

我正在使用 Qt creator 开发 Meego 应用程序，但模拟器没有使用诺基亚 Pure 字体进行渲染，这是 Meego 的默认字体。我搜索并找不到安装该字体的方法。请帮忙。谢谢！

# ios - 如何处理 Xcode“pbxproj”文件中的合并冲突？

> ID：11980288
> 
> 赞同：6
> 
> 时间：2012-08-16T03:20:38.707
> 
> 标签：ios, xcode, version-control

每次我拉动时，我的其他团队成员都会发生合并冲突。我尝试手动删除 ==== 和 >>>>，但此后 Xcode 将永远不会打开文件。

我只是好奇，这是团队中每个 iOS 人员都会处理的问题吗？有什么技巧或窍门可以避免这种废话吗？它严重降低了我的工作效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:33:12.120

你只需要一个好的合并工具。我使用 p4merge： [http](http://www.andymcintosh.com/?p=33) ://www.andymcintosh.com/?p=33包含将其与 Git 集成的指南。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:20:01.917

这两个可以走很长的路：

*   减少对 xcode 项目的依赖，这样您就可以通过添加内容目录来重建项目，然后以最少的更改来构建它。一个很好的例子：在 xcconfigs 中定义你的构建设置。

*   简化您的项目。如果您正在开发同一个更大项目的不同组件，那么冲突将会减少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-14T21:59:31.930

我遇到了与我们团队的 cocoapods 集成有关的合并冲突。运行`pod deintegrate`然后`pod install`再次运行后，该`.pbxproj`文件再次可解析。

# c++ - 如何环绕范围

> ID：11980292
> 
> 赞同：29
> 
> 时间：2012-08-16T03:20:54.973
> 
> 标签：c++, range

我的程序中的角度以 0 到 2pi 表示。如果结果高于 2pi，我想要一种方法来添加两个角度并让它围绕 2pi 到 0。或者，如果我从一个角度减去一个角度并且它低于 0，它将环绕 2pi。

有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-16T03:33:09.280

您正在寻找的是模数。fmod 函数将不起作用，因为它计算的是余数而不是算术模数。像这样的东西应该工作：

```
inline double wrapAngle( double angle )
{
    double twoPi = 2.0 * 3.141592865358979;
    return angle - twoPi * floor( angle / twoPi );
} 
```

编辑：

余数通常定义为长除法后的余数（例如，18/4 的余数是 2，因为**18 = 4 * 4 + 2**）。当您有负数时，这会变得很棘手。查找带符号除法余数的常用方法是使余数与结果具有相同的符号（例如，-18/4 的余数是 -2，因为**-18 = -4 * 4 + -2**）。

x 模数 y 的定义是方程 x=y*c+m 中 m 的最小正值，给定 c 是整数。所以**18 mod 4**将是 2（其中 c=4），但是**-18 mod 4**也将是 2（其中 c=-5）。

**x mod y**的最简单计算是**xy*floor(x/y)**，其中 floor 是小于或等于输入的最大整数。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-16T03:26:53.413

```
angle = fmod(angle, 2.0 * pi);
if (angle < 0.0)
   angle += 2.0 * pi; 
```

编辑：在重新阅读后（并查看 Jonathan Leffler 的回答）我对他的结论有点惊讶，所以我将代码重写为我认为更合适的形式（例如，打印出计算结果以确保编译器不能完全丢弃计算，因为它从未被使用过）。我还将它更改为使用 Windows 性能计数器（因为他没有包含他的计时器类，并且在`std::chrono::high_resolution_timer`我现在方便的两个编译器中都完全损坏了）。

我还做了一些一般性的代码清理（这是标记为 C++，而不是 C），得到这个：

```
#include <math.h>
#include <iostream>
#include <vector>
#include <chrono>
#include <windows.h>

static const double PI = 3.14159265358979323844;

static double r1(double angle)
{
    while (angle > 2.0 * PI)
        angle -= 2.0 * PI;
    while (angle < 0)
        angle += 2.0 * PI;
    return angle;
}

static double r2(double angle)
{
    angle = fmod(angle, 2.0 * PI);
    if (angle < 0.0)
        angle += 2.0 * PI;
    return angle;
}

static double r3(double angle)
{
    double twoPi = 2.0 * PI;
    return angle - twoPi * floor(angle / twoPi);
}

struct result {
    double sum;
    long long clocks;
    result(double d, long long c) : sum(d), clocks(c) {}

    friend std::ostream &operator<<(std::ostream &os, result const &r) {
        return os << "sum: " << r.sum << "\tticks: " << r.clocks;
    }
};

result operator+(result const &a, result const &b) {
    return result(a.sum + b.sum, a.clocks + b.clocks);
}

struct TestSet { double start, end, increment; };

template <class F>
result tester(F f, TestSet const &test, int count = 5)
{
    LARGE_INTEGER start, stop;

    double sum = 0.0;

    QueryPerformanceCounter(&start);

    for (int i = 0; i < count; i++) {
        for (double angle = test.start; angle < test.end; angle += test.increment)
            sum += f(angle);
    }
    QueryPerformanceCounter(&stop);

    return result(sum, stop.QuadPart - start.QuadPart);
}

int main() {

    std::vector<TestSet> tests {
        { -6.0 * PI, +6.0 * PI, 0.01 },
        { -600.0 * PI, +600.0 * PI, 3.00 }
    };

    std::cout << "Small angles:\n";
    std::cout << "loop subtraction: " << tester(r1, tests[0]) << "\n";
    std::cout << "            fmod: " << tester(r2, tests[0]) << "\n";
    std::cout << "           floor: " << tester(r3, tests[0]) << "\n";
    std::cout << "\nLarge angles:\n";
    std::cout << "loop subtraction: " << tester(r1, tests[1]) << "\n";
    std::cout << "            fmod: " << tester(r2, tests[1]) << "\n";
    std::cout << "           floor: " << tester(r3, tests[1]) << "\n";

} 
```

我得到的结果如下：

```
Small angles:
loop subtraction: sum: 59196    ticks: 684
            fmod: sum: 59196    ticks: 1409
           floor: sum: 59196    ticks: 1885

Large angles:
loop subtraction: sum: 19786.6  ticks: 12516
            fmod: sum: 19755.2  ticks: 464
           floor: sum: 19755.2  ticks: 649 
```

至少对我来说，结果似乎支持了与乔纳森得出的完全不同的结论。查看在循环中进行减法的版本，我们看到两点：对于大角度测试，它产生的和与其他两个不同（即，它不准确），第二，它*非常*慢。除非你*确定*你的输入总是开始接近标准化，否则这基本上是不可用的。

`fmod`版本和版本之间`floor`似乎没有争论的余地——它们都产生了准确的结果，但`fmod`版本在小角度和大角度测试中都更快。

我做了更多的测试，尝试增加重复次数并减少大角度测试中的步长。虽然我认为这*可能*只是由于平台或编译器的差异，但我无法找到*任何*甚至接近于支持 Jonathan 的结果或结论的情况或情况。

底线：如果您对输入有很多先验知识，并且**知道在标准化***之前*它总是几乎标准化，那么您*可能*能够在循环中进行减法。在任何其他情况下，`fmod`都是明确的选择。似乎*没有任何*情况下该`floor`版本有任何意义。

```
Oh, for what it's worth:
OS: Windows 7 ultimate
Compiler: g++ 4.9.1
Hardware: AMD A6-6400K 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-16T04:30:00.893

出于好奇，我在其他答案中尝试了三种算法，并对它们进行计时。

当要归一化的值接近 0..2π 范围时，`while`算法最快；使用的算法`fmod()`最慢，使用的算法`floor()`介于两者之间。

当要归一化的值不接近范围 0..2π 时，`while`算法最慢，使用的算法`floor()`最快，使用的算法`fmod()`介于两者之间。

所以，我得出结论：

*   如果角度（通常）接近归一化，则该`while`算法就是要使用的算法。
*   如果角度不接近归一化，那么该`floor()`算法就是要使用的算法。

### 测试结果：

r1 = `while`, r2 = `fmod()`, r3 =`floor()`

```
Near Normal     Far From Normal
r1 0.000020     r1 0.000456
r2 0.000078     r2 0.000085
r3 0.000058     r3 0.000065
r1 0.000032     r1 0.000406
r2 0.000085     r2 0.000083
r3 0.000057     r3 0.000063
r1 0.000033     r1 0.000406
r2 0.000085     r2 0.000085
r3 0.000058     r3 0.000065
r1 0.000033     r1 0.000407
r2 0.000086     r2 0.000083
r3 0.000058     r3 0.000063 
```

### 测试代码：

测试代码使用了显示的值`PI`。C 标准没有定义 π 的值，但[POSIX](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/math.h.html)确实定义`M_PI`了一些相关的常量，所以我可以使用`M_PI`而不是`PI`.

```
#include <math.h>
#include <stdio.h>
#include "timer.h"

static const double PI = 3.14159265358979323844;

static double r1(double angle)
{
    while (angle > 2.0 * PI)
        angle -= 2.0 * PI;
    while (angle < 0)
        angle += 2.0 * PI;
    return angle;
}

static double r2(double angle)
{
    angle = fmod(angle, 2.0 * PI);
    if (angle < 0.0)
        angle += 2.0 * PI;
    return angle;
}

static double r3(double angle)
{
    double twoPi = 2.0 * PI;
    return angle - twoPi * floor( angle / twoPi );
}

static void tester(const char * tag, double (*test)(double), int noisy)
{
    typedef struct TestSet { double start, end, increment; } TestSet;
    static const TestSet tests[] =
    {
        {   -6.0 * PI,   +6.0 * PI, 0.01 },
    //  { -600.0 * PI, +600.0 * PI, 3.00 },
    };
    enum { NUM_TESTS = sizeof(tests) / sizeof(tests[0]) };
    Clock clk;
    clk_init(&clk);
    clk_start(&clk);
    for (int i = 0; i < NUM_TESTS; i++)
    {
        for (double angle = tests[i].start; angle < tests[i].end; angle += tests[i].increment)
        {
            double result = (*test)(angle);
            if (noisy)
                printf("%12.8f : %12.8f\n", angle, result);
        }
    }
    clk_stop(&clk);
    char buffer[32];
    printf("%s %s\n", tag, clk_elapsed_us(&clk, buffer, sizeof(buffer)));
}

int main(void)
{
    tester("r1", r1, 0);
    tester("r2", r2, 0);
    tester("r3", r3, 0);
    tester("r1", r1, 0);
    tester("r2", r2, 0);
    tester("r3", r3, 0);
    tester("r1", r1, 0);
    tester("r2", r2, 0);
    tester("r3", r3, 0);
    tester("r1", r1, 0);
    tester("r2", r2, 0);
    tester("r3", r3, 0);
    return(0);
} 
```

`/usr/bin/gcc`使用标准( `i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00)`)在 Mac OS X 10.7.4 上进行测试。显示了“接近标准化”的测试代码；“远未标准化”测试数据是通过取消注释测试数据中的注释创建的`//`。

使用自制 GCC 4.7.1 的时间是相似的（将得出相同的结论）：

```
Near Normal     Far From Normal
r1 0.000029     r1 0.000321
r2 0.000075     r2 0.000094
r3 0.000054     r3 0.000065
r1 0.000028     r1 0.000327
r2 0.000075     r2 0.000096
r3 0.000053     r3 0.000068
r1 0.000025     r1 0.000327
r2 0.000075     r2 0.000101
r3 0.000053     r3 0.000070
r1 0.000028     r1 0.000332
r2 0.000076     r2 0.000099
r3 0.000050     r3 0.000065 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-16T03:34:43.483

你可以使用这样的东西：

```
while (angle > 2pi)
    angle -= 2pi;

while (angle < 0)
    angle += 2pi; 
```

基本上，您必须将角度更改 2pi，直到您确信它不超过 2pi 或低于 0。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-05T19:43:16.403

简单的技巧：只需添加一个偏移量，它必须是 2pi 的*倍数*，以便在执行 fmod() 之前将结果带入正范围。fmod() 会自动将其带回到 [0, 2pi) 范围内。只要您先验地知道您可能获得的可能输入的范围（您经常这样做），这就会起作用。您应用的偏移量越大，您丢失的 FP 精度就越多，因此您可能不想添加 20000pi，尽管在处理非常大的越界输入方面肯定会“更安全” . 假设没有人会传递总和超出相当疯狂的范围 [-8pi, +inf) 的输入角度，我们将在 fmod()ing 之前添加 8pi。

```
double add_angles(float a, float b)
{
    ASSERT(a + b >= -8.0f*PI);
    return fmod(a + b + 8.0f*PI, 2.0f*PI);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-07T01:15:16.033

如果您可以选择自己的角度表示，则根据您的用例，有一些有效的特殊情况。（请注意，将 0 作为下限已经是一种特殊情况，可以提高效率。）

## 将角度表示为单位向量

如果您能够将角度表示为 [0 和 1) 而不是 [0 和 2π) 之间的值，那么您只需要取小数部分：

```
float wrap(float angle) {
    // wrap between [0 and 2*PI)
    return angle - floor(angle);
} 
```

负角只是工作。

您还可以标准化、换行，然后缩小到弧度，但会损失一些精度和效率。

这在与许多着色器代码类似的代码中很有用，尤其是在“一切都是单位向量”环境中。

## 将角度表示为无符号整数，限制为 2 的幂

如果您能够将角度表示为 [0 和 2^n) 之间的值，而不是 [0 和 2π) 之间的值，那么您可以使用按位与运算将它们包装到 2 的幂：

```
unsigned int wrap(unsigned int angle) {
    // wrap between [0 and 65,535)
    return angle & 0xffff;
} 
```

更好的是，如果您可以选择等于整数类型大小的 2 的幂，则数字自然会自动换行。A`uint16_t`总是包裹在 [0 和 2^16) 内，而 a`uint32_t`总是包裹在 [0 和 2^32) 内。六万五千个标题应该对任何人都足够了吧？（-：

我在 8 位时代的游戏和演示类型中使用了它，甚至在 3D 显卡之前用于纹理映射。我想它在模拟器和逆向游戏的代码中仍然有用，但甚至可能在微型微控制器上有用？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-19T01:12:17.213

同样，如果你想在 -2pi 到 2pi 的范围内，那么 fmod 效果很好

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-08T20:34:27.750

这工作得很好而且足够快：

```
#ifndef M_PI
#define M_PI 3.14159265358979323846    
#endif // !M_PI
#ifndef M_2PI
#define M_2PI (2.0 * M_PI)
#endif // !M_2PI
#define to0_2pi(x) ((x) - ((int)((x) / (M_2PI)) - signbit(x)) * (M_2PI)) 
```

# python - django uwsgi 没有加载应用程序

> ID：11980295
> 
> 赞同：0
> 
> 时间：2012-08-16T03:21:35.680
> 
> 标签：python, django, uwsgi

在 Ubuntu 12.04 上遇到 uwsgi 和 django 项目的问题。
uwsgi 运行良好，但看不到任何应用程序。

我的项目位于**/home/satchitananda/PycharmProjects/dbTest/**目录中。

**nginx配置：**

```
server {
root /usr/share/nginx/www;
index index.html index.htm;

server_name somehost;

location / {
            uwsgi_pass unix:///var/run/uwsgi/app/projectname/socket;
            include uwsgi_params;
}

location /doc {
    root /usr/share;
    autoindex on;
    allow 127.0.0.1;
    deny all;
}
} 
```

**uwsgi 配置：**

```
[uwsgi]
plugins = python27
virtualenv=/home/satchitananda/.env4/
pythonpath = ..
thread=3
master=1
env = DJANGO_SETTINGS_MODULE=dbTest.dbTest.settings
module = django.core.handlers.wsgi:WSGIHandler()
chdir = /home/satchitananda/PycharmProjects/dbTest/
#socket = /var/run/uwsgi/app/projectname/socket
logto = /var/log/uwsgi/projectname.log
touch-reload = /home/satchitananda/PycharmProjects/dbTest/ 
```

**uwsgi 日志：**

```
Thu Aug 16 09:29:57 2012 - *** Starting uWSGI 1.0.3-debian (64bit) on [Thu Aug 16 09:29:57 2012] ***
Thu Aug 16 09:29:57 2012 - compiled with version: 4.6.3 on 17 July 2012 02:26:54
Thu Aug 16 09:29:57 2012 - current working directory: /
Thu Aug 16 09:29:57 2012 - writing pidfile to /run/uwsgi/app/projectname/pid
Thu Aug 16 09:29:57 2012 - detected binary path: /usr/bin/uwsgi-core
Thu Aug 16 09:29:57 2012 - setgid() to 33
Thu Aug 16 09:29:57 2012 - setuid() to 33
Thu Aug 16 09:29:57 2012 - your memory page size is 4096 bytes
Thu Aug 16 09:29:57 2012 - uwsgi socket 0 bound to UNIX address /run/uwsgi/app/projectname/socket fd 5
Thu Aug 16 09:29:57 2012 - your server socket listen backlog is limited to 100 connections
Thu Aug 16 09:29:57 2012 - *** Operational MODE: preforking ***
Thu Aug 16 09:29:57 2012 - *** no app loaded. going in full dynamic mode ***
Thu Aug 16 09:29:57 2012 - *** uWSGI is running in multiple interpreter mode ***
Thu Aug 16 09:29:57 2012 - spawned uWSGI master process (pid: 22335)
Thu Aug 16 09:29:57 2012 - spawned uWSGI worker 1 (pid: 22337, cores: 1)
Thu Aug 16 09:29:57 2012 - spawned uWSGI worker 2 (pid: 22339, cores: 1) 
```

如何纠正这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:40:21.260

你用 # 禁用套接字现在它是一个注释

```
socket = /var/run/uwsgi/app/projectname/socket 
```

我不确定，但默认项目设置看起来`dbTest.settings`不像`dbTest.dbTest.settings`

```
env = DJANGO_SETTINGS_MODULE=dbTest.settings 
```

# hadoop - 在 Hadoop 中使用 Cassandra 二级索引

> ID：11980298
> 
> 赞同：2
> 
> 时间：2012-08-16T03:22:20.620
> 
> 标签：hadoop, cassandra

Cassandra 1.1 文档说现在可以使用二级索引来获取用于 Hadoop 处理的行切片。这是否意味着现在可以在使用 RandomPartitioner 时实现这一点，这与之前需要使用 OrderedPartitioner 的版本不同？但是，通过 ColumnFamilyInputformat 代码，我仍然看到一个断言，它强制要求 OrderedPartitioner 需要到位才能发生。对此有什么想法吗？

# django - Django 多标准加权评分

> ID：11980299
> 
> 赞同：0
> 
> 时间：2012-08-16T03:22:24.103
> 
> 标签：django, criteria, rating, weighted

我已经开始在 Django 中构建一个需要多标准加权评级的应用程序。[我的问题](http://www.sitepoint.com/forums/showthread.php?615350-Django-Multi-criteria-weighted-ratings)与几年前的问题完全相同，不幸的是没有任何答案。

如果有人可以给我一些关于如何在 Django 中进行多标准加权评级的提示，我很想听听！我对整个 Django/Python 世界很陌生，并且来自 PHP 背景。

非常感谢！

PS：我没有在这个线程中提供太多信息，因为问题已经在[此处](http://www.sitepoint.com/forums/showthread.php?615350-Django-Multi-criteria-weighted-ratings)的其他主题中进行了描述。这完全一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:37:49.003

加权评级最简单的解决方案是添加一个额外的字段，并在评级对象的[自定义`save`方法中自动填充它。](https://docs.djangoproject.com/en/dev/ref/models/instances/#django.db.models.Model.save)

就获得总体平均评分而言，您可以使用[Django 的聚合查询](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)在每次需要时动态计算（最简单/最准确的方法） ，或者您可以尝试维护每次评分时更新的平均评分字段添加/删除/更新（如果您正在运行读取繁重的服务，则性能更高的方法）。有关实施这些（使用总和而不是平均值）的更多详细信息以及有关权衡的更多详细信息，请参见[我的答案。](https://stackoverflow.com/questions/11956679/how-to-update-balance-in-a-accounting-app-with-django/11957666#11957666)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:53:15.393

如果您不想通过覆盖 save 方法来创建需要维护的单独字段，则需要遵循这个稍微复杂一点的方法：[使用 .aggregate() 对使用 .extra(select={... }) 在 Django 查询中？](https://stackoverflow.com/questions/4567543/using-aggregate-on-a-value-introduced-using-extraselect-in-a-django)

# winapi - 汇编器 + WinApi MapViewOfFile

> ID：11980300
> 
> 赞同：0
> 
> 时间：2012-08-16T03:22:26.163
> 
> 标签：winapi, assembly, masm

我在使用 MapViewOfFile 时遇到了一点问题。这个函数返回映射视图的起始地址，所以我认为它是一个字节序列。这就是我堆积的地方：

```
INVOKE MapViewOfFile, hMapFile, FILE_MAP_READ, 0, 0, 0
mov pMemory, eax
mov edx, DWORD PTR [pMemory] 
```

指针是正确的，因为在将整个内存块保存到文件期间，一切都很好。所以我的问题是：如何引用每一个元素（字节）。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:42:29.367

将 pMemory 转换为正确的类型并将其从 pMemory 移动到 pMemory + 映射内存的大小 - 您引用的类型的大小...

换句话说，您已经有效地分配了内存并将内存与随着您更改内存而更改的文件相关联。

`C`假设 pMemory 是由返回的指针`MapViewOfFile`：

```
int x = (*(int *)pMemory);   // Read the first int
char c = (*(char *)pMemory);   // Read the first char
typedef struct oddball { int x, int y, int z, char str[256] } oddball; // assume the typedef syntax is right...
oddball *p = (oddball *)pMemory;  // point to the base of the mapped memory
p += 14;  // p now points to the 15th instance of oddball in the file.
// Or... p = &p[14];
p->x = 0;
p->y = 0;
p->z = 0;
strcpy( p->str( "This is the 0, 0, 0 position" ) );
// You've now changed the memory to which p[14] refers.

// To read every byte... (Again in C, use the compiler to generate asm
// Assumes:
//     fileSize is the size of the mapped memory in bytes
//     pMemory is the pointer returned by MapViewOfFile
//     buffer is a block of memory that will hold n bytes
//     pos is the position from which you want to read
//     n is the number of bytes to read from position pos and the smallest size in bytes to which buffer can point
void readBytes( unsigned int fileSize, char *pMemory, char *buffer, unsigned int n, unsigned int pos )
{
    char *endP = pMemory + fileSize;
    char *start = pMemory + pos;
    char *end = start + n;
    int i = 0;

    // Code to stay within your memory boundaries
    if( end > endP )
    {
        n -= (end - endP);  // This might be wrong...
        end = endP;
    }

    if( end < start )
        return;
    // end boundary check

    for( ; start < end; start++, i++ )
    {
        buffer[i] = *start;
    }
} 
```

这是编译器使用 -O2 从上面的代码生成的 asm 代码

```
 .686P
        .XMM
        .model  flat

PUBLIC  _readBytes
_TEXT   SEGMENT
_fileSize$ = 8                  ; size = 4
_pMemory$ = 12                  ; size = 4
_buffer$ = 16                   ; size = 4
_n$ = 20                        ; size = 4
_pos$ = 24                      ; size = 4
_readBytes PROC                 ; COMDAT
    mov eax, DWORD PTR _pMemory$[esp-4]
    mov edx, DWORD PTR _fileSize$[esp-4]

    mov ecx, DWORD PTR _n$[esp-4]
    add edx, eax
    add eax, DWORD PTR _pos$[esp-4]
    add ecx, eax

    cmp ecx, edx
    jbe SHORT $LN5@readBytes

    mov ecx, edx
$LN5@readBytes:
    cmp eax, ecx
    jae SHORT $LN1@readBytes
    push    esi
    mov esi, DWORD PTR _buffer$[esp]
    sub esi, eax
$LL3@readBytes:
    mov dl, BYTE PTR [eax]
    mov BYTE PTR [esi+eax], dl
    inc eax
    cmp eax, ecx
    jb  SHORT $LL3@readBytes
    pop esi
$LN1@readBytes:
    ret 0
_readBytes ENDP
_TEXT   ENDS
END 
```

# iphone - 使用 XCode Mapkit 的多个地址

> ID：11980302
> 
> 赞同：0
> 
> 时间：2012-08-16T03:22:43.277
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, mapkit

我对 XCode 和 Objective-c 很陌生。这个问题之前可能已经回答过，但我无法让它发挥作用。我的目标是在谷歌地图上显示多个注释。我有一堆 Lats 和 Longs，但是到目前为止，我只能显示一个注释。如何一次显示所有注释。我有下面的代码`MKMapView`-

```
- (void)viewDidLoad {

    // Set some coordinates for our position
    CLLocationCoordinate2D location;

    location.latitude = (double) 44.271745;
    location.longitude = (double) -88.453265;   
    // Add the annotation to our map view
    MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Appleton" andCoordinate:location];
    [self.mapview addAnnotation:newAnnotation];

    [newAnnotation release];

    self.mapview.region = MKCoordinateRegionMakeWithDistance(location,100000,100000);
} 
```

我知道我可以循环并实例化`newAnnotation`，然后用于`addAnnotation`添加注释。但我不知道该怎么做。这可能是非常基本的，但我对此很陌生。任何帮助将不胜感激。

```
//
//  MapViewAnnotation.h
//

#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface MapViewAnnotation : NSObject <MKAnnotation> {

    NSString *title;
    CLLocationCoordinate2D coordinate;

}

@property (nonatomic, copy) NSString *title;
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d;

@end 
```

和

```
//
//  MapViewAnnotation.m
//

#import "MapViewAnnotation.h"

@implementation MapViewAnnotation
@synthesize title, coordinate;

- (id)initWithTitle:(NSString *)ttl andCoordinate:(CLLocationCoordinate2D)c2d {
    [super init];
    title = ttl;
    coordinate = c2d;
    return self;
}

- (void)dealloc {
    [title release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:53:01.590

看起来你只有一个位置。您应该有纬度和经度列表，然后遍历该列表并实例化 MapViewAnnotation。

```
- (void)viewDidLoad {
    NSArray *arrayOfLatLong = [NSArray arrayWithObjects: [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"10.22", @"20.212", nil] forKeys:[NSArray arrayWithObjects:@"Lat",@"Long",nil]], 
                               [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"10.22", @"24.5", nil] forKeys:[NSArray arrayWithObjects:@"Lat",@"Long",nil]], nil];

    for(NSDictionary *location in arrayOfLatLong) {
        CGFloat latitude = [[location valueForKey:@"Lat"] floatValue];
        CGFloat longitude = [[location valueForKey:@"Long"] floatValue];

        CLLocationCoordinate2D location;
        location.latitude = latitude;
        location.longitude = latitude;   
        MapViewAnnotation *newAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Appleton" andCoordinate:location];
        [self.mapview addAnnotation:newAnnotation];

        [newAnnotation release];
        self.mapview.region = MKCoordinateRegionMakeWithDistance(location,100000,100000);
    }
} 
```

# asp.net - 保存到会话时对象引用未设置为对象实例

> ID：11980307
> 
> 赞同：0
> 
> 时间：2012-08-16T03:23:29.903
> 
> 标签：asp.net, vb.net, session, object, reference

当尝试保存订单时，我们首先从会话加载对象。这行得通。然后我们将信息添加到订单中并将其放回会话中。然后我收到对象引用未设置为对象错误的实例。

```
Private Sub SaveOrder()
    'load the order
    Order = Session("Order")

    'Add order information here

    Session("Order") = Order 'The error is occurring here.
End Sub 
```

堆栈跟踪如下：

```
 Error Path: Contact.aspx
    Error Detail: Object reference not set to an instance of an object.
    Error Source: Void __RenderContent1(System.Web.UI.HtmlTextWriter, System.Web.UI.Control)
    Error Stack Trace:    at ASP.orderentry_uc3_contact_aspx.__RenderContent1(HtmlTextWriter __w, Control parameterContainer) in C:\Portal Websites\Portals\OrderEntry\UC3\Contact.aspx:line 9
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer)
   at System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children)
   at System.Web.UI.Page.Render(HtmlTextWriter writer)
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

对此的任何帮助将不胜感激。

添加了请求的代码：

```
Imports ComponentArt.Web.UI

Partial Class OrderEntry_UC3_Contact
Inherits Company.Pages.CompanyPage
Public Order As Company.Orders.UC3.Order

Protected Sub btnNext_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnNext.Click
    If Valid() Then
        SaveOrder() 'This is line 9
        Response.Redirect("Payment.aspx")
    End If
End Sub 
```

我已经添加了 aspx 页面的顶部（整个东西太大了）。

```
<%@ Page Language="VB" MasterPageFile="~/Portal/PortalNoFooter.master" AutoEventWireup="false"
    EnableTheming="true" CodeFile="Contact.aspx.vb" Inherits="OrderEntry_UC3_Contact"
    Title="Contact" %>

<%@ Register TagPrefix="ComponentArt" Namespace="ComponentArt.Web.UI" Assembly="ComponentArt.Web.UI" %>
<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">
      //To large to submit the whole thing
</asp:Content>
enter code here 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:02:34.220

您的代码示例未显示`Page_Load`aspx 文件第 9 行周围的行或确切行，但听起来您假设`Order`将始终填充该行。如果您仅在非回发期间加载`Order`对象，则当用户单击按钮时，该对象在页面生命周期中加载得不够早。`Page_Load``Order`

尝试删除检查`IsPostback`并始终`Order`从会话中重新加载对象。

# c++ - LibCurl WriteCallback（异步？） - C++

> ID：11980311
> 
> 赞同：5
> 
> 时间：2012-08-16T03:23:49.417
> 
> 标签：c++, curl, libcurl

我正在使用以下代码成功进行 http POST 调用：

```
std::string curlString;
CURL* pCurl = curl_easy_init();

if(!pCurl)
    return NULL;

string outgoingUrl = Url;
string postFields = fields;

curl_easy_setopt(pCurl, CURLOPT_TIMEOUT, 0);

curl_easy_setopt(pCurl, CURLOPT_URL, outgoingUrl.c_str());
curl_easy_setopt(pCurl, CURLOPT_POST, 1);

curl_easy_setopt(pCurl, CURLOPT_POSTFIELDS, postFields.c_str());
curl_easy_setopt(pCurl, CURLOPT_POSTFIELDSIZE, (long)postFields.size());

curl_easy_setopt(pCurl, CURLOPT_WRITEFUNCTION, CurlWriteCallback);
curl_easy_setopt(pCurl, CURLOPT_WRITEDATA, &curlString);

curl_easy_perform(pCurl);

curl_easy_cleanup(pCurl); 
```

写回调具有以下原型：

```
size_t CurlWriteCallback(char* a_ptr, size_t a_size, size_t a_nmemb, void* a_userp); 
```

有没有办法异步执行此操作？目前它在 curl_easy_perform 返回之前等待回调完成。此阻止方法不适用于具有许多用户的服务器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T03:42:47.110

从[libcurl 简单](http://curl.haxx.se/libcurl/c/libcurl-easy.html)文档中：

> 一切都设置好后，您告诉 libcurl 使用 curl_easy_perform(3) 执行传输。然后它将执行整个操作，并且在完成之前不会返回（成功与否）。

从[libcurl 多界面](http://curl.haxx.se/libcurl/c/libcurl-multi.html)文档中，与“简单”界面相反的功能之一：

> 1.  在同一个线程中启用多个同时传输，而不会使应用程序变得复杂。

听起来您想使用“多”方法。

# macos - Adobe AIR 应用程序是否可以在 OS X 中接收触摸事件？

> ID：11980315
> 
> 赞同：1
> 
> 时间：2012-08-16T03:24:20.573
> 
> 标签：macos, events, air, multi-touch

我正在开发 OS X 中的软件，该软件从多点触控设备接收触摸并将它们发布到系统以供应用程序处理。我希望可以支持 Adob​​e AIR 应用程序，但从我所做的研究来看，它们似乎不支持 OS X 上的多点触控事件。[这个页面](http://www.adobe.com/devnet/flash/articles/multitouch_gestures.html)似乎特别表明了这一点，并且一致正如上面所说，我测试过的 AIR 应用程序确实只响应手势事件，而不响应触摸事件。但是我（也许天真地）希望无论如何都有办法做到这一点。

那么在 Mac OS X 中运行的 AIR 应用程序是否有可能接收到触摸事件呢？也许使用与发布系统范围的触摸事件不同的方法？例如，我的软件是否可以通过某种方式将触摸事件直接发送到 AIR 应用程序？

提前致谢！

# c# - 字符串到数组

> ID：11980321
> 
> 赞同：0
> 
> 时间：2012-08-16T03:25:49.573
> 
> 标签：c#

我有一个字符串：

```
id0:xxxxx:id0-value:xxxxx:id1:xxxxxxxx:id1-value:xxxxx:id3:xxxxxxxx:id3-value:xxx 
```

我只需要从字符串到数组中的 idX-value 的值。

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:34:11.977

使用 String.Split()

[http://msdn.microsoft.com/en-us/library/system.string.split.aspx](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

```
String myString = "id0:xxxxx:id0-value:xxxxx:id1:xxxxxxxx:id1-value:xxxxx:id3:xxxxxxxx:id3-value:xxx";
String[] tokens = myString.Split(new Char[] {':'}); 
```

令牌数组将包含 {"id0","xxxxx","id0-value","xxxxx","id1","xxxxxxxx","id1-value","xxxxx","id3","xxxxxxxx", "d3 值","xxx"}

第二种可能性是使用 String.IndexOf() 和 String.Substring()。

[http://msdn.microsoft.com/en-us/library/5xkyx09y](http://msdn.microsoft.com/en-us/library/5xkyx09y) http://msdn.microsoft.com/en-us/library/aka44szs

诠释开始 = 0; ArrayList 令牌；while((start = myString.IndexOf("-value:", start)) > -1) { ArrayList.Add(myString.Substring(start+6, myString.IndexOf(":", start+7); start + = 6; // 跳过我们刚刚找到的内容。}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:16:47.917

简单的方法，值在位置 (4x - 1)：

```
var list = input.Split(':');
var outputs = new List<string>();

for (int index = 0; index < list.Count(); index++)
{
     if (index % 4 == 3)
         outputs.Add(list.ElementAt(index));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:29:15.550

使用 Regex 拆分它（一个拆分 : 在 x 之后的正则表达式），然后使用冒号拆分`:`并使用第一个索引作为字典键和第二个索引作为字典值。

# r - 如何在 r 中创建用于组比较的表？

> ID：11980322
> 
> 赞同：0
> 
> 时间：2012-08-16T03:25:49.060
> 
> 标签：r

我正在比较各组之间的一系列基线和研究结束差异。例如，我可能有以下数据集：

```
> baseline.comp
                             cluster 1970_pred 2008_pred  ratio   diff
 9  Many Transitions, Middle Income    0.1156    0.0248 4.6613 0.0908
10     Many Transitions, Low Income    0.1779    0.0389 4.5733 0.1390
 4       Dictatorships, High Income    0.1403    0.0307 4.5700 0.1096
 7    One Transition, Middle Income    0.0801    0.0219 3.6575 0.0582
 1         Democracies, High Income    0.0396    0.0116 3.4138 0.0280
 5     Dictatorships, Middle Income    0.1252    0.0399 3.1378 0.0853
 2       Democracies, Middle Income    0.0811    0.0291 2.7869 0.0520
 8       One Transition, Low Income    0.1912    0.0775 2.4671 0.1137
 3          Democracies, Low Income    0.1612    0.0698 2.3095 0.0914
 6        Dictatorships, Low Income    0.1854    0.0821 2.2582 0.1033 
```

在此示例中，我想将列`pred_1970`与其自身进行比较，以便我可以有一个表格来告诉我这些集群中基线条件的差异。这将是一个 10 x 10 的表格，但只有下面的对角线单元格会有实际数字，这反映了这些组的初始条件的差异。我想知道是否`R`已经实现了一些功能来做到这一点。

谢谢，

安东尼奥·佩德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:58:25.943

尝试以下操作：

```
# This part is just to create your data:

baseline.comp <- read.table(text="
                             cluster 1970_pred 2008_pred  ratio   diff
 9  'Many Transitions, Middle Income'    0.1156    0.0248 4.6613 0.0908
10     'Many Transitions, Low Income'    0.1779    0.0389 4.5733 0.1390
 4       'Dictatorships, High Income'    0.1403    0.0307 4.5700 0.1096
 7    'One Transition, Middle Income'    0.0801    0.0219 3.6575 0.0582
 1         'Democracies, High Income'    0.0396    0.0116 3.4138 0.0280
 5     'Dictatorships, Middle Income'    0.1252    0.0399 3.1378 0.0853
 2      'Democracies, Middle Income'    0.0811    0.0291 2.7869 0.0520
 8       'One Transition, Low Income'    0.1912    0.0775 2.4671 0.1137
 3          'Democracies, Low Income'    0.1612    0.0698 2.3095 0.0914
 6        'Dictatorships, Low Income'   0.1854    0.0821 2.2582 0.1033")

colnames(baseline.comp) <- c("cluster", "1970_pred", "2008_pred", "ratio", "diff")

# Now, we use outer

diff.1970 <- outer(baseline.comp$`1970_pred`, baseline.comp$`1970_pred`, "-")

# Just renaming the output matrix. I've used A through J to make 
# the output more readable.

#colnames(diff.1970) <- baseline.comp$cluster
colnames(diff.1970) <- LETTERS[1:10]
#rownames(diff.1970) <- baseline.comp$cluster
rownames(diff.1970) <- LETTERS[1:10]

# Make sure only the lower half of the result contains non-zero values

> diff.1970 * lower.tri(diff.1970)
        A       B       C       D      E       F      G       H      I J
A  0.0000  0.0000  0.0000  0.0000 0.0000  0.0000 0.0000  0.0000 0.0000 0
B  0.0623  0.0000  0.0000  0.0000 0.0000  0.0000 0.0000  0.0000 0.0000 0
C  0.0247 -0.0376  0.0000  0.0000 0.0000  0.0000 0.0000  0.0000 0.0000 0
D -0.0355 -0.0978 -0.0602  0.0000 0.0000  0.0000 0.0000  0.0000 0.0000 0
E -0.0760 -0.1383 -0.1007 -0.0405 0.0000  0.0000 0.0000  0.0000 0.0000 0
F  0.0096 -0.0527 -0.0151  0.0451 0.0856  0.0000 0.0000  0.0000 0.0000 0
G -0.0345 -0.0968 -0.0592  0.0010 0.0415 -0.0441 0.0000  0.0000 0.0000 0
H  0.0756  0.0133  0.0509  0.1111 0.1516  0.0660 0.1101  0.0000 0.0000 0
I  0.0456 -0.0167  0.0209  0.0811 0.1216  0.0360 0.0801 -0.0300 0.0000 0
J  0.0698  0.0075  0.0451  0.1053 0.1458  0.0602 0.1043 -0.0058 0.0242 0 
```

关于这一点的一些注意事项：

一般来说，变量（或列名）以数字开头并不是一个好主意。这就是为什么我们在使用时必须重命名列的原因`read.table`：R 会自动在数字前放置一个“X”。请注意，在`outer`函数中引用这些列名时，我必须使用刻度。最好完全避免这种情况。

至于`outer`功能，我使用了轻微的变化。通常的调用看起来像`x %o% y`，与 相同`outer(x, y, "*")`。然而，在这种情况下，我们感兴趣的是差异而不是乘法。

最后一步是将其乘以`lower.tri`，这将返回一个 TRUE/FALSE 矩阵，其中对角线以下的所有内容均为 TRUE，其他所有内容均为 FALSE。如果您已将其用作`diag = TRUE`参数，对角线也将是 TRUE，但这并不重要，因为对角线将始终为零。由于 R 将 TRUE 视为 1 并将 FALSE 视为零，因此我们可以乘以`lower.tri`原始矩阵以返回除我们感兴趣的值（对角线下方的值）之外的所有值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:57:57.790

`outer`就是你要找的。

```
baseline_diff <- outer(baseline.comp[['1970_pred']],baseline.comp[['1970_pred']], '-')
## if you want to set the dimension names (but they will be very long!)
# dimnames(baseline_diff) <- list(baseline.comp[['cluster']],
#                                  baseline.comp[['cluster']])
 baseline_diff
          [,1]    [,2]    [,3]    [,4]   [,5]    [,6]    [,7]    [,8]    [,9]   [,10]
 [1,]  0.0000 -0.0623 -0.0247  0.0355 0.0760 -0.0096  0.0345 -0.0756 -0.0456 -0.0698
 [2,]  0.0623  0.0000  0.0376  0.0978 0.1383  0.0527  0.0968 -0.0133  0.0167 -0.0075
 [3,]  0.0247 -0.0376  0.0000  0.0602 0.1007  0.0151  0.0592 -0.0509 -0.0209 -0.0451
 [4,] -0.0355 -0.0978 -0.0602  0.0000 0.0405 -0.0451 -0.0010 -0.1111 -0.0811 -0.1053
 [5,] -0.0760 -0.1383 -0.1007 -0.0405 0.0000 -0.0856 -0.0415 -0.1516 -0.1216 -0.1458
 [6,]  0.0096 -0.0527 -0.0151  0.0451 0.0856  0.0000  0.0441 -0.0660 -0.0360 -0.0602
 [7,] -0.0345 -0.0968 -0.0592  0.0010 0.0415 -0.0441  0.0000 -0.1101 -0.0801 -0.1043
 [8,]  0.0756  0.0133  0.0509  0.1111 0.1516  0.0660  0.1101  0.0000  0.0300  0.0058
 [9,]  0.0456 -0.0167  0.0209  0.0811 0.1216  0.0360  0.0801 -0.0300  0.0000 -0.0242
[10,]  0.0698  0.0075  0.0451  0.1053 0.1458  0.0602  0.1043 -0.0058  0.0242  0.0000 
```

要仅显示下（或上）三角形，请使用`tril`或`triu`在`Matrix`包中

```
library(Matrix)

tril(baseline_diff)

10 x 10 Matrix of class "dtrMatrix"
      [,1]    [,2]    [,3]    [,4]    [,5]    [,6]    [,7]    [,8]    [,9]    [,10]  
 [1,]  0.0000       .       .       .       .       .       .       .       .       .
 [2,]  0.0623  0.0000       .       .       .       .       .       .       .       .
 [3,]  0.0247 -0.0376  0.0000       .       .       .       .       .       .       .
 [4,] -0.0355 -0.0978 -0.0602  0.0000       .       .       .       .       .       .
 [5,] -0.0760 -0.1383 -0.1007 -0.0405  0.0000       .       .       .       .       .
 [6,]  0.0096 -0.0527 -0.0151  0.0451  0.0856  0.0000       .       .       .       .
 [7,] -0.0345 -0.0968 -0.0592  0.0010  0.0415 -0.0441  0.0000       .       .       .
 [8,]  0.0756  0.0133  0.0509  0.1111  0.1516  0.0660  0.1101  0.0000       .       .
 [9,]  0.0456 -0.0167  0.0209  0.0811  0.1216  0.0360  0.0801 -0.0300  0.0000       .
[10,]  0.0698  0.0075  0.0451  0.1053  0.1458  0.0602  0.1043 -0.0058  0.0242  0.0000 
```

# c# - 有效的文件路径

> ID：11980326
> 
> 赞同：0
> 
> 时间：2012-08-16T03:26:17.763
> 
> 标签：c#, path, filepath

此文件路径是否有效？：

> 'C:sample.txt'

（此字符串是用户输入的）

这是令人困惑的，因为没有返回错误。我用过 Directory.Exists(path.DirectoryName)。但我找不到在 C: 中创建的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T03:37:07.843

它是在您的当前目录中创建的

```
 string filepath = "c:sample.txt";

        StreamWriter sw = File.CreateText(filepath);
        sw.WriteLine("hello");
        sw.Close();

        string s = Directory.GetCurrentDirectory();
        Console.WriteLine(s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:35:26.860

是的，`C:sample.txt`是一个有效的文件路径，并且指的是驱动器的进程当前目录`C:`（因为路径中没有提供特定目录）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T03:32:36.887

这确实是一条正确的路径，Windows 不会打扰 \。

也尝试使用 File.Exists()。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:33:29.337

路径必须如下，

```
 string filePath=args[0]
        if (!File.Exists(filePath))
        {
            File.Create(filePath);
        } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-16T03:29:57.483

它必须改为

```
C:\sample.txt 
```

# visual-studio-2010 - read_only 权限是否允许使用 TFS 修改文件？

> ID：11980327
> 
> 赞同：-2
> 
> 时间：2012-08-16T03:26:24.007
> 
> 标签：visual-studio-2010, sharepoint

我通过团队项目门户给了一个帐户 read_only 权限，因此该帐户可以通过 Web 访问读取共享文档，但不能修改文件。但是，当账号通过vs2010登录TFS时，出现了一些问题；分享文件可以修改！谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:16:20.413

如果将该帐户添加到另一个组中并且该组有权修改文件，则可能会发生这种情况。

# mysql - dart：如何使用 sqljocky 连接器将数据从 mysql 显示到浏览器

> ID：11980328
> 
> 赞同：0
> 
> 时间：2012-08-16T03:26:28.857
> 
> 标签：mysql, dart

每个人都可以告诉我如何使用 sqljocky 连接器将数据从 mysql 显示到浏览器。
我猜“dart:io 和 dart:html”是个问题。
谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:30:34.120

SQLJocky 在服务器端运行（使用 Dart VM）。它不限制向任何客户端（包括浏览器）显示数据的方法。但是，这意味着您必须自己处理它。它的作用类似于Java中的JDBC。

# c++ - 使用向量时出现奇怪的运行时错误

> ID：11980329
> 
> 赞同：1
> 
> 时间：2012-08-16T03:26:39.047
> 
> 标签：c++, debugging, memory-management, valgrind, openmpi

当我与 mpi 并行运行代码时，我的代码在运行时遇到了这个非常奇怪的问题：

```
*** glibc detected *** ./QuadTreeConstruction: munmap_chunk(): invalid pointer: 0x0000000001fbf180 ***
======= Backtrace: =========
/lib/libc.so.6(+0x776d6)[0x7f38763156d6]
./QuadTreeConstruction(_ZN9__gnu_cxx13new_allocatorImE10deallocateEPmm+0x20)[0x423f04]
./QuadTreeConstruction(_ZNSt13_Bvector_baseISaIbEE13_M_deallocateEv+0x50)[0x423e72]
./QuadTreeConstruction(_ZNSt13_Bvector_baseISaIbEED2Ev+0x1b)[0x423c79]
./QuadTreeConstruction(_ZNSt6vectorIbSaIbEED1Ev+0x18)[0x4237d2]
./QuadTreeConstruction(_Z22findLocalandGhostCellsRK8QuadTreeRK6ArrayVIiES5_iRS3_S6_+0x849)[0x41dbbd]
./QuadTreeConstruction(main+0xa32)[0x41ca49]
/lib/libc.so.6(__libc_start_main+0xfe)[0x7f38762bcd8e]
./QuadTreeConstruction[0x41b029] 
```

我的代码是 valgrind 清理了 mpi 库内部的一些错误（我使用 OpenMpi，我以前见过很多次，但它们从来都不是问题；请参阅[http://www.open-mpi.org/faq /?category=debugging#valgrind_clean](http://www.open-mpi.org/faq/?category=debugging#valgrind_clean)）。当我串行运行时，我没有任何问题。

我已经能够`SIGABORT`使用 gdb 将问题追溯到系统调用，这是代码中断时的堆栈：

```
0   raise   raise.c 64  0x7f4bd8655ba5  
1   abort   abort.c 92  0x7f4bd86596b0  
2   __libc_message  libc_fatal.c    189 0x7f4bd868f65b  
3   malloc_printerr malloc.c    6283    0x7f4bd86996d6  
4   __gnu_cxx::new_allocator<unsigned long>::deallocate new_allocator.h 95  0x423f04    
5   std::_Bvector_base<std::allocator<bool> >::_M_deallocate    stl_bvector.h   444 0x423e72    
6   std::_Bvector_base<std::allocator<bool> >::~_Bvector_base   stl_bvector.h   430 0x423c79    
7   std::vector<bool, std::allocator<bool> >::~vector   stl_bvector.h   547 0x4237d2    
8   findLocalandGhostCells  mpi_partition.cpp   249 0x41dbbd    
9   main    mpi_partition.cpp   111 0x41ca49 
```

这听起来像是内存损坏，但我完全不知道是什么原因造成的。基本上，代码在一个看起来像这样的函数内部中断：

```
void findLocalandGhostCells(){
    std::vector<bool> foo(fooSize,false);

    // do stuff with foo; nothing crazy -- I promise

    return;
} 
```

有人知道我现在应该做什么吗？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:49:26.993

如果您非常确定向量操作本身是正确且不疯狂的，请尝试逐步跟踪向量的成员。您的其他一些操作可能会损坏您的向量内存块。例如，一个侵入vector内存的memcpy。

# perl - 如何增加 dotcloud 上 HTTP GET 请求的允许大小？

> ID：11980332
> 
> 赞同：4
> 
> 时间：2012-08-16T03:26:54.533
> 
> 标签：perl, http-request, dotcloud

我正在做一些[JSONP](http://enwp.org/JSONP)调用，这些调用将我限制为[HTTP GET](http://enwp.org/HTTP#Request_methods)作为与服务器交谈的方法。我似乎达到了请求大小的 8k 限制。我已经尝试将我的更改`dotcloud.yml`为

```
www:
  type: perl
  approot: webapp
  config:
    uwsgi_buffer_size: 65536 
```

并在我的项目的根目录中创建了一个`nginx.conf`文件（与 相同的级别`dotcloud.yml`），上面写着

```
large_client_header_buffers 4 64k 
```

但我仍然达到了 8k 的障碍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T15:47:47.493

显然我是个白痴。nginx.conf 文件需要放在服务的 approot 目录中（在这种情况下`./webapp`不是`./`）。这非常有意义，因为您可以拥有多个服务，并且您应该能够为它们单独设置选项。

现在我在测试中达到了 32k 的限制（但要求 64k）。这令人费解，但我现在不太关心继续搜索，因为 32k 应该足够一段时间了。

# html - 访问 iFrame 父级

> ID：11980335
> 
> 赞同：0
> 
> 时间：2012-08-16T03:28:16.827
> 
> 标签：html, iframe

我最近遇到了一个臭名昭著的问题，即 iframe 访问其父级。我试图在更简单的 html 中模仿它。于是我创建了两个文件，parent.htm，child.htm。即使它们是在本地执行的，我也会遇到通常的错误。

```
Unsafe JavaScript attempt to access frame with URL file:///C:/Users/kvaradar/Desktop/New%20folder/Parent.htm from frame with URL file:///C:/Users/kvaradar/Desktop/New%20folder/Child.htm. Domains, protocols and ports must match. 
```

好吧，据说父母和孩子必须在同一个域中。但就我而言，我将它们作为本地文件 - Parent.htm、Child.htm。

我假设他们应该在同一个域上。为什么在这种情况下我会收到此错误？我是不是错过了什么。

这是父 HTML。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<body>
<span id="myParentWindow">Some content of parent frame's span.</span>
<iframe src="Child.htm"></iframe>
</body>
</html> 
```

子 HTML。

```
<html xmlns="http://www.w3.org/1999/xhtml">

<script type="text/javascript">
    function loadChild() {
        document.getElementById('myChild').innerHTML
            = window.parent.document.getElementById('myParent').innerHtml;
    }
</script>
<body onload="loadChild()">
    <div style="border:1px solid green;height:500px; min-height:500px">

    Some content of the child frame.
    In the following span, I am trying to fill the parent's span content through javascript

    <span id="myChild"></span>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T08:44:59.817

我无法重现该错误，但该`loadChild`函数有 2 个错误：

*   它指的是`myParent`而不是`myParentWindow`.

*   它指的是`innerHtml`而不是“innerHTML”。

固定脚本：

```
function loadChild() {
  document.getElementById('myChild').innerHTML
    = window.parent.document.getElementById('myParentWindow').innerHTML;
} 
```

即使经过上述修复，我也无法在 Firefox 14 中重现该错误。一切正常，没有任何脚本警告或错误。

# python - 我的代码中的不可见对象应如何与其可见的小部件对应物相关联？

> ID：11980338
> 
> 赞同：2
> 
> 时间：2012-08-16T03:28:40.413
> 
> 标签：python, user-interface, coding-style, qt4

在编写 GUI 时（通常使用 Python 和 PyQt4），我尝试整齐地组织我的代码，我经常面临同样的问题：

**我的代码中的不可见对象（数据）应如何与其可见的小部件对应物（图形表示）相关联？**

例如，假设我有一个语言词典中的条目列表。每个条目都是具有各种属性和功能的抽象数据对象。每个条目还以图形方式表示为用户可以与之交互的小部件。

我相信有四种可能的组织方式：

1.  小部件对象是数据对象的子对象；
2.  数据对象是小部件对象的子对象；
3.  小部件对象和数据项合并为一个对象（数据是小部件的属性）；
4.  小部件对象和数据对象分开存在，后者被馈入前者（例如作为*args）

现在我不确定在这方面是否有一些传统的协议，我也不确定这些可能的安排是否真的会产生影响。

最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:52:16.977

我从未使用过 Python 或 QT，但听起来您正在寻找一个名为：

[模型-视图-控制器](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

这个想法是，您的数据对象（模型）可以远离您的小部件（视图）。它们由控制器协调。

这在 Objective-C / Cocoa 中非常普遍，在 Android 中也少见。

大多数现代 Web 框架也基于此概念。

**编辑：**至少在某种程度上，QT 也是如此：

[http://doc.qt.nokia.com/qq/qq10-mvc.html](http://doc.qt.nokia.com/qq/qq10-mvc.html)

# php - Codeigniter - 自动转义 SQL 查询

> ID：11980340
> 
> 赞同：1
> 
> 时间：2012-08-16T03:29:02.570
> 
> 标签：php, mysql, codeigniter

首先，我知道 Active Record 通过它自动转义所有查询，并且有一种手动转义 SQL 的方法。

```
$this->db->escape() 
```

问题是我有时使用原始 sql 查询

```
$sql = "...."
$this->db->query($sql); 
```

但我不想每次都手动调用 CI 转义函数。

有没有办法让 CI 自动转义传递给它的所有查询？可以设置的配置可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:39:51.407

参考这里[http://codeigniter.com/user_guide/database/queries.html](http://codeigniter.com/user_guide/database/queries.html)

您可以考虑使用网址底部的查询绑定。尝试练习绑定查询，这是一种更快、更清洁的方式。

**绑定查询示例：**

```
$sql = "SELECT * FROM some_table WHERE id = ? AND price = ?"; 

$this->db->query($sql, array(3, 100)); 
```

注意** 使用绑定方法总是会自动转义。

# opengl - 我可以通过预加载一堆 jpeg 图像而不是 bmp 来节省内存吗？

> ID：11980352
> 
> 赞同：-1
> 
> 时间：2012-08-16T03:31:32.117
> 
> 标签：opengl, animation, jpeg, preload, bmp

> **可能重复：**
> [如何使用 OpenGL 加载 8 位 bmp？](https://stackoverflow.com/questions/11980790/how-can-i-load-8-bit-bmp-with-opengl)

我需要尽可能多地加载大量图像，然后将它们作为动画播放。因此，我想最小化每个图像的大小。

我的问题是，如果我加载 jpeg 图像文件，我的机器会将其存储为 bmp 格式吗？目前，我正在使用 OpenGL 加载 bmp 图像（每个大约 3.5 MB）。600 个 bmp 文件已经超出了我的记忆。我怎样才能加载更多，比如 2000。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:31:25.723

您可以考虑以更适合动画的格式存储图像。想到了**视频。**

如果您只需要一次图像 - 显示后立即从内存中丢弃它们。

使用 DXT 打包图像。随着质量的轻微下降，您将获得 x4/x8 压缩比。

检查你的 OpenGL 设置，你是否使用自动生成的 mipmap，你需要它们吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:52:19.647

> 我的问题是，如果我加载 jpeg 图像文件，我的机器会将其存储为 bmp 格式吗？

您的机器会将其作为原始像素保存在内存中，除非您使用的是压缩纹理格式，但这与 JPEG 有很大不同。

文件格式对硬件和 OpenGL 没有意义。

> 我怎样才能加载更多，比如 2000。

你不应该。如果您正在播放动画，请在该图像显示时加载图像，然后将其删除。对于 OpenGL，您应该使用它`glTexSubImage2D`来替换纹理对象的内容。

# node.js - 如何使用与 Meteor 具有传递依赖关系的 node.js 库？

> ID：11980356
> 
> 赞同：4
> 
> 时间：2012-08-16T03:32:22.863
> 
> 标签：node.js, meteor

[可以按照此处所述](https://stackoverflow.com/questions/11691513/it-possible-use-a-nodejs-package-inside-meteor-app)在 Meteor 中使用 node.js 包，但是由于`require`没有全局定义，具有传递依赖关系的包（例如 xml2js 或 aws-lib）会中断

`ReferenceError: require is not defined` 关于如何在不更改库的情况下修复或解决此问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T21:20:17.403

我按照您的[链接问题](https://stackoverflow.com/questions/11691513/it-possible-use-a-nodejs-package-inside-meteor-app)中的说明进行操作。我使用 node-xml2js 库通过[代码库中的测试夹具](https://github.com/Leonidas-from-XIV/node-xml2js/blob/master/test/fixtures/sample.xml)对此进行了测试，并通过以下方式实现了它。

```
Meteor.startup(function () {

    // This solves the issue
    var require = __meteor_bootstrap__.require;

    // The example from node-xml2js readme
    var fs = require('fs'),
        xml2js = require('xml2js');

    var parser = new xml2js.Parser();
    fs.readFile('/home/prashant/order.xml', 'utf8', function(err, data) {
        parser.parseString(data, function (err, result) {
            console.log(result);
            console.log('Done');
        });
    });
}); 
```

我认为关键是定义一个变量`require`并将其分配给 Meteor 的 require 函数。Meteor 在加载服务器资产的同时，也加载`require`并解决了传递依赖的问题。我没有对 node-xml2js 库进行任何更改。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-09T06:29:13.460

在最新版本的 Meteor（0.6.3，大概是更高版本）中，您需要使用`Npm.require()`而不是单独使用`require()`。

# javascript - 使用 jQuery 从选择标签中抓取文本

> ID：11980359
> 
> 赞同：0
> 
> 时间：2012-08-16T03:32:52.837
> 
> 标签：javascript, jquery, html, function, select

我正在尝试通过第一个中选择的内容来更改第二个选择语句。

这是我目前拥有的代码，但它不起作用：

```
function getSchedText() {

    var schedGrab = $("#schedGrab").text();
    if (schedGrab == "English") {
        $("#schedPost").load('../start/english.html');
    }
    else if (schedGrab == "Spanish") {
        $("#schedPost").load('../start/spanish.html');
    }
    else if (schedGrab == "") {
        $("#schedPost").load();
    }
    else {
        $("#schedPost").load('../start/testdoc.html');
    }
} 
```

这是相应的 HTML：

`<select name="class1" class="login" id="schedGrab" onclick="getSchedText()">php include</select>`

`<select name="class2" class="login" id="schedPost"></select>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:10:44.777

你可以像下面那样做

```
$('#schedGrab').change(function() {
    var schedGrab = $(this).find('option:selected').text();
    if (schedGrab == "English") {
        $("#schedPost").load('../start/english.html');
    }
    else if (schedGrab == "Spanish") {
        $("#schedPost").load('../start/spanish.html');
    }
    else if (schedGrab == "") {
        $("#schedPost").load();
    }
    else {
        $("#schedPost").load('../start/testdoc.html');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:03:10.927

由于您使用“JQuery”放置标题

试试这种方式

```
$("#schedGrab").change(function(){
     //Embed your ifelse here but strongly suggest to go for switch statement

     alert($(this).text());
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:26:26.527

To get the selected option text

```
var schedGrab = $("#schedGrab option:selected").text(); 
```

# android - 在 Android 上解析 asmx 返回的 JSON

> ID：11980360
> 
> 赞同：0
> 
> 时间：2012-08-16T03:32:56.250
> 
> 标签：android, asp.net, json

我有一个 ASP.Net 3.5 Webservice (asmx)，它返回似乎是有效的 JSON。我已经使用在线验证器 (JSONLint.com) 验证了返回的 JSON，它说它是有效的。我不知道如何解析这个字符串。

```
{
    "d": "{\"returnType\":\"authToken\",\"returnData\":\"b1ec28b8-3fca-427a-bbce-8802fb95d94b\"}"
} 
```

下面是我的代码。

```
public static JSONObject DotNetJSONResponse(String raw) throws Exception {
    JSONObject joRaw;
    try {
        joRaw = new JSONObject(raw);
        JSONObject joD = joRaw.getJSONObject("d");
        return joD;
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:52:04.140

试试这个方法

```
public static JSONObject DotNetJSONResponse(String raw) throws Exception {
JSONObject joRaw;
  try {
      joRaw = new JSONObject(raw);
      String str1 = joRaw.getString("d");
      JSONObject joD = new JSONObject(str1);
      return joD;
      } catch (JSONException e) {
         // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:52:27.023

试试这个。在您的示例响应中，**d**是一个属性，而不是 JSONObject。所以必须先解析字符串，然后将d字符串转换为JSONObject。

```
public static JSONObject DotNetJSONResponse(String raw) throws Exception {
    JSONObject joRaw;
    try {
        joRaw = new JSONObject(raw);
        String t=joRaw.getString("d");
        System.out.println(t);                  \\< ---------- 
        JSONObject joD = new JSONObject(t);
        return joD;
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return null;
    }

} 
```

# postgresql - 如何使用带有变量的 postgresql SIMILAR TO

> ID：11980365
> 
> 赞同：-2
> 
> 时间：2012-08-16T03:33:14.953
> 
> 标签：postgresql, pattern-matching, plpgsql

我有一个选择函数，我需要在其中使用`SIMILAR TO`带有变量的表达式，但我不知道该怎么做。这是代码：

```
DECLARE pckg_data cl_data;
DECLARE contacts contacts_reg%ROWTYPE;
DECLARE sim_name varchar;
 BEGIN
SELECT client_reg._name, 
       client_reg.last_name, 
       client_reg.id_card, 
       client_reg.address
INTO pckg_data
FROM client_reg WHERE(client_reg._name = (cl_name ||' '|| cl_lastname));
RETURN NEXT pckg_data;

SELECT ('%'||cl_name || ' ' || cl_lastname ||'%') INTO sim_name;

FOR contacts IN SELECT contacts_reg.id 
FROM contacts_reg, contactscli_asc, client_reg
WHERE(contacts_reg._name SIMILAR TO sim_name) LOOP
    SELECT client_reg._name, client_reg.last_name, client_reg.id_card,
                   client_reg.address, client_reg.id
    INTO pckg_data
    FROM client_reg, contactscli_asc WHERE(contactscli_asc.contact = contacts.id 
    AND client_reg.id = contactscli_asc.client);
END LOOP;

END; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-17T00:47:57.007

您提供循环的查询有`CROSS JOIN`超过三个 (!) 表。我删除了最后两个，因为它们不需要它们。其中之一在循环体中重复。还要考虑@kgrittn 关于`CROSS JOIN`.

在循环体中，您反复选择数据到一个变量中，这*什么也不做*。我假设您想返回这些行 - 无论如何，这就是我编辑的版本所做的。

`LOOP`我用一个简单的`SELECT`with重写了这个结构[`RETURN QUERY`](https://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)，因为这样更快更简单。

实际上，我以一种有意义的方式**重写了所有内容。**您呈现的内容仍然不完整（缺少函数标题）并且在语法和逻辑上一团糟。

这是一个有根据的猜测，仅此而已：

```
CREATE FUNCTION very_secret_function_name(cl_name varchar, cl_lastname varchar)
  RETURNS TABLE (name varchar, last_name varchar,
                 id_card int, address varchar, id int) AS
$func$
DECLARE
   _sim_name varchar := (cl_name ||' '|| cl_lastname);
BEGIN
   RETURN QUERY
   SELECT c._name, c.last_name, c.id_card, c.address, NULL::int
           -- added NULL for an id to match the second call
   FROM   client_reg c
   WHERE  c._name = _sim_name;

   RETURN QUERY
   SELECT c._name, c.last_name, c.id_card, c.address, r.id
   FROM   client_reg      c
   JOIN   contactscli_asc a ON a.client = c.id
   JOIN   contacts_reg    r ON r.id = a.contact
   WHERE  r._name LIKE ('%' || _sim_name || '%');
END
$func$  LANGUAGE plpgsql; 
```

如果这对你有用，我需要一个[precog 徽章。](https://stackoverflow.com/badges/892/precognitive):)
否则，请考虑使用的功能。

一些建议：

*   您可以在声明时分配一个变量。
*   关键字`DECLARE`只需要一次。
*   使用表别名使您的代码更易于阅读。
*   您不必将`WHERE`子句括在括号中。
*   很可能您不需要[`SIMILAR TO`并且`LIKE`](https://www.postgresql.org/docs/current/static/functions-matching.html)可以更快地完成工作。
    我从不使用[`SIMILAR TO`](https://www.postgresql.org/docs/current/static/functions-matching.html#FUNCTIONS-SIMILARTO-REGEXP). `LIKE`或正则表达式 ( `~`) 做得更好。在这里阅读为什么：
    *   [Pattern matching with LIKE, SIMILAR TO or regular expressions in PostgreSQL](https://dba.stackexchange.com/questions/10694/pattern-matching-with-like-similar-to-or-regular-expressions-in-postgresql/10696#10696)

# jquery - IE8 显示：无元素下推锚标签

> ID：11980367
> 
> 赞同：1
> 
> 时间：2012-08-16T03:33:41.537
> 
> 标签：jquery, html, css, internet-explorer-8

我有一个页面，该页面通过 JQuery toggle() 设置了一个输入文本字段，其中隐藏了“显示：无”，并且在其下方有一个锚标记。当我使用锚标记时，无论是通过在 url 中输入它还是通过单击引用它的链接，我通常希望它能够将我带到锚点的正上方，如下所示：

[按预期工作 http://i.snag.gy/1UavI.jpg](http://i.snag.gy/1UavI.jpg)

但是，当我在 IE8 上查看它时，它看起来像这样：

[没有按预期工作 http://i.snag.gy/dbyty.jpg](http://i.snag.gy/dbyty.jpg)

我想要的是那里的隐藏输入字段，以及正确的锚行为。

当我从代码中删除隐藏的输入时，它固定了间距，这让我认为 IE 正在考虑隐藏输入使用的空间，以考虑在屏幕上滚动到锚点的位置。

这是我尝试在 jsfiddle 上重现该问题的最佳尝试，但不幸的是我没有成功。我无法发布我看到错误的实际源代码，但我会尽力提供任何其他信息。

[http://jsfiddle.net/Xynev/4/](http://jsfiddle.net/Xynev/4/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:39:48.570

我没有任何问题让锚在任何版本的 IE 中工作。但是，我对您在 Fiddle 上的代码感到困惑，因为它并不能反映您的实际要求。

如果没有对问题的某种清晰简洁的描述，就很难回答问题。虽然我已经根据您能够传达的内容构建了一个答案。

如果要在单击 A 标记时切换文本字段。您可以使用以下 jQuery：

```
$('#testhide').click(function() {
   $('#hide').toggle();
}); 
```

testhide 将是 A 标记 ID。所以：

```
 <a id="testhide" href="#anchor-here">click here</a> 
```

hide 是包含输入的 div 的名称（您可以随意称呼它）。所以：

```
<div id="hide" style="height:90px">
    <input id="hidden" type="text"/>
</div> 
```

希望有帮助。

这是已编辑小提琴的链接。

[http://jsfiddle.net/Xynev/8/](http://jsfiddle.net/Xynev/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T17:39:11.627

我昨天发现我的问题是什么。

在 IE8 上，如果您使用 window.location.hash 导航到屏幕上的特定区域，则必须确保在进行所有 JQuery .hide() 或 .toggle() 调用之后执行此操作。发生的事情是，我首先导航到锚标记，然后会发生 hide()。然后隐藏会减少页面上的空间量，从而将整个页面拉上来。

通过简单地让页面在 window.location.hash 之前执行隐藏，我解决了我的问题。我不太清楚为什么这个间距问题没有发生在 Firefox 或 Chrome 上。

# c - 在 C 中使用 %[...] 使用 fscanf 解析字符串

> ID：11980368
> 
> 赞同：1
> 
> 时间：2012-08-16T03:33:41.327
> 
> 标签：c, parsing, scanf

我正在使用该`fscanf`函数扫描由逗号分隔的大字符串，大字符串中的最后一个子字符串由星号 (*) 分隔。这是一个例子：

```
子串1，子串2，子串3*子串4

```

我能够毫无问题地解析用逗号分隔的子字符串，但是当它到达星号时，它会停止程序，就像`fscanf`阻塞一样。我在 中使用`%[^...]`格式说明符`fscanf`，如下所示：

```
fscanf(fs, "%[^*,]%*c", str); 
```

上面的代码是一个简单的 for 循环，它会扫描多次。如您所见，我一直在扫描，直到出现星号或逗号。但是，恐怕我没有正确地将星号包含在集合中。有人可以纠正我的错误吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:45:58.297

模式中唯一的特殊字符`%[`是`^`、`-`和`]`。

如果要读取的下一个字符是 a`','`或 a ，则此模式将失败`'*'`。因此，如果您有两个连续的逗号或星号，那么您的循环将卡住并停止阅读。

# javascript - 用于图像的 Javascript 函数

> ID：11980370
> 
> 赞同：0
> 
> 时间：2012-08-16T03:34:10.263
> 
> 标签：javascript

我正在尝试有一个功能，您可以在其中输入图像的名称，它将把图像的名称放在 html 代码中。我对函数和方法知之甚少，但我想知道我现在正在做什么样的语法错误。这是我尝试过的。

```
<li><a href="#" onClick="changeimage(imagenameiwanttoenter)">Link toclick for image</a></li>

 function changeimage(name){

 document.getElementById("content").innerHTML= '<img src="images/'+name+'.jpg" />;';

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:37:03.817

您需要在`imagenameiwanttoenter`.

```
<li><a href="#" onClick="changeimage('imagenameiwanttoenter')">Link toclick for image</a></li> 
```

# ios - 如何在 iOS 中检索点击的链接

> ID：11980372
> 
> 赞同：0
> 
> 时间：2012-08-16T03:34:13.297
> 
> 标签：ios, uiwebview, nsstring, anonymize

出于安全原因，我曾经在移动 safari 上使用匿名器。但是，这有点烦人。如果我搜索了某些内容并单击了链接，那么 google 会返回一条错误消息。你可以试试.. [http://proxy2974.my-addr.org/myaddrproxy.php/http/www.google.com.au/](http://proxy2974.my-addr.org/myaddrproxy.php/http/www.google.com.au/)（搜索一些东西并点击一个链接——如果你测试它就可以了桌面浏览器.. 但是，如果您在 iPhone 或 iPhone 模拟器上尝试，它将返回[http://proxy2974.my-addr.org/myaddrproxy.php/http/url ）](http://proxy2974.my-addr.org/myaddrproxy.php/http/url)

所以我决定自己做。我正在做的是从文本字段中获取 URL 并通过匿名器的链接传递它，例如`urlString = [NSString stringWithFormat:@"http://proxy2974.my-addr.org/myaddrproxy.php/http/%@", urlString];`

但是我仍然面临同样的问题..当我点击谷歌上的链接时，它返回一个错误..所以我想要做的是获取点击的链接，停止加载页面（在它返回错误之前），然后通过匿名器传递它。我该怎么做？谢谢..

```
- (BOOL)webView:(UIWebView *) sender shouldStartLoadWithRequest:(NSURLRequest *) request navigationType:(UIWebViewNavigationType) navigationType {

    NSLog(@"req: %@",request.URL.absoluteString);

    return YES;
}

req: http://proxy2974.my-addr.org/url?sa=t&source=web&cd=1&ved=0CFMQFjAA&url=%2Fmyaddrproxy.php%2Fhttp%2Fwww.perthnow.com.au%2Ffun-games%2Fleft-brain-vs-right-brain%2Fstory-e6frg46u-1111114517613&ei=GXAsUMaUA7H44QTys4HYDA&usg=AFQjCNGB_zOrrEZC0SKx813XGHB1xi_AlA

req: http://proxy2974.my-addr.org/myaddrproxy.php?proxy_url_sjla67z78f8viz4=url&sa=t&source=web&cd=1&ved=0CFMQFjAA&url=%2Fmyaddrproxy.php%2Fhttp%2Fwww.perthnow.com.au%2Ffun-games%2Fleft-brain-vs-right-brain%2Fstory-e6frg46u-1111114517613&ei=GXAsUMaUA7H44QTys4HYDA&usg=AFQjCNGB_zOrrEZC0SKx813XGHB1xi_AlA

req: http://proxy2974.my-addr.org/myaddrproxy.php/http/url 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:39:20.860

实施

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType; 
```

在您的 uiwebview 委托中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:24:38.677

Implement this delegate method to retrieve a clicked link in UIWebView:

```
- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
{
  if(navigationType == UIWebViewNavigationTypeLinkClicked)
  {
     NSLog(@"req: %@",request.URL.absoluteString);
  }
} 
```

# css - CSS 重置不会删除 div 周围的默认浏览器边距/空白

> ID：11980374
> 
> 赞同：1
> 
> 时间：2012-08-16T03:34:29.443
> 
> 标签：css, browser

好的，我已经使用了很长一段时间的重置 CSS 文件并且它们通常都可以工作，但是自从我开始使用 CodeIgniter （我*认为*这与它没有任何关系）之后，`div`'s 周围的空格已经下落不明并在 Firefox、Safari 和 Chrome 中持久存在。我截取了我正在谈论的内容的屏幕截图（橙色箭头指向它）：![在此处输入图像描述](../Images/25661023c718b6cbda7d38915b8129b5.png)

任何帮助将不胜感激。就像我说的，CSS 重置似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:37:18.167

添加`display: block;`到 img 它将删除额外的空白检查结果

我还尝试了[firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)和[mozilla webdeveloper 工具](https://addons.mozilla.org/en-US/firefox/addon/web-developer/#)，它们是很棒的工具

![在此处输入图像描述](../Images/6c8545ca0cb6109ebe166cc56a0fcebe.png)

# python - 获取 Python 的鼻子测试会导致 tearDown() 方法

> ID：11980375
> 
> 赞同：10
> 
> 时间：2012-08-16T03:34:32.953
> 
> 标签：python, nose

我希望能够获得特定测试方法的结果并将其输出到拆卸方法中，同时使用鼻子测试运行器。[这里](https://stackoverflow.com/a/4415062/1566170)有一个很好的例子。

但不幸的是，运行`nosetests example.py`不起作用，因为鼻子似乎不喜欢超类中的 run 方法被覆盖的事实：

```
AttributeError: 'ResultProxy' object has no attribute 'wasSuccessful' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T07:24:48.563

警告：以下内容在拆卸期间实际上并没有访问测试，但它确实访问了每个结果。

您可能想编写一个鼻子插件（[请参阅此处的 API 文档](http://nose.readthedocs.org/en/latest/plugins/interface.html)）。您可能感兴趣的方法是`afterTest()`，在测试之后运行...。:) 不过，取决于您的具体应用，`handleError()`/`handleFailure()`或`finalize()`实际上可能更有用。

这是一个示例插件，它在执行后立即访问测试结果。

```
from nose.plugins import Plugin
import logging
log = logging.getLogger('nose.plugins.testnamer')

class ReportResults(Plugin):
    def __init__(self, *args, **kwargs):
        super(ReportResults, self).__init__(*args, **kwargs)
        self.passes = 0
        self.failures = 0
    def afterTest(self, test):
        if test.passed:
            self.passes += 1
        else:
            self.failures += 1
    def finalize(self, result):
        print "%d successes, %d failures" % (self.passes, self.failures) 
```

这个简单的示例仅报告通过和失败的数量（就像您包含的链接一样，但我相信您可以扩展它以做一些更有趣的事情（[这是另一个有趣的想法](https://stackoverflow.com/q/14077299/1309332)）。要使用它，请确保它安装在鼻子（或将其加载到自定义运行器中），然后使用 --with-reportresults 激活它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T04:20:38.000

如果您可以在测试中添加一些样板代码，那么类似以下的内容可能会起作用。

在 MyTest1 中，`tearDown`在每次测试结束时调用，并且 self.result 的值已设置为包含方法名称和字典的元组（但您可以将其设置为您喜欢的任何内容）。检查模块用于获取方法名称，因此`tearDown`知道刚刚运行了哪个测试。

在 MyTest2 中，*所有*结果都保存在字典 ( `results`) 中，您可以在方法中使用您喜欢的任何内容`tearDownClass`。

```
import inspect
import unittest

class MyTest1(unittest.TestCase):

    result = None

    def tearDown(self):
        print "tearDown:", self.result

    def test_aaa(self):
        frame = inspect.currentframe()
        name = inspect.getframeinfo(frame).function
        del frame
        self.result = (name, None)

        x = 1 + 1
        self.assertEqual(x, 2)

        self.result = (name, dict(x=x))

    def test_bbb(self):
        frame = inspect.currentframe()
        name = inspect.getframeinfo(frame).function
        del frame
        self.result = (name, None)

        # Intentional fail.
        x = -1
        self.assertEqual(x, 0)

        self.result = (name, dict(x=x))

class MyTest2(unittest.TestCase):

    results = {}

    @classmethod
    def tearDownClass(cls):
        print "tearDownClass:", cls.results

    def test_aaa(self):
        frame = inspect.currentframe()
        name = inspect.getframeinfo(frame).function
        del frame
        self.results[name] = None

        x = 1 + 1
        self.assertEqual(x, 2)

        self.results[name] = dict(x=x)

    def test_bbb(self):
        frame = inspect.currentframe()
        name = inspect.getframeinfo(frame).function
        del frame
        self.results[name] = None

        x = -1
        self.assertEqual(x, 0)

        self.results[name] = dict(x=x)

if __name__ == '__main__':
    unittest.main() 
```

# mysql - UPDATE 命令是否比 INSERT 更需要资源

> ID：11980382
> 
> 赞同：1
> 
> 时间：2012-08-16T03:35:32.027
> 
> 标签：mysql, sql, sql-update, sql-insert

我在 SQL 中使用的脚本处理了近 40,000 条记录，我注意到当我使用 UPDATE 命令时执行时间大大增加

在 2 个表中，每个表都有 10 个字段，INSERT 比这个 UPDATE 命令执行得更快

```
UPADTE table1
INNER JOIN table2 ON table1.primarykey = table2.primarykey
SET table1.code = table2.code 
```

实际上 UPDATE 所做的是将代码从一个表复制到另一个存在相同记录的表中，这是因为 table1 是两个数据库之间的临时表，而 table2 是一个拥有表，用于在多个表中插入临时表的数据，两个表都有相同数量的记录约为 40,000

现在对我来说，UPDATE 应该执行得更快，考虑到它只连接 2 个相同的表并为 1 个字段插入数据，它应该比 2 个 INSERTS 运行得更快，其中在 10 个字段上创建了 40,000 条记录（换句话说，插入 800,000 条数据），我在 SQL 控制台窗口中运行查询以避免 php 超时

UPDATE 是否比 INSERT 更需要资源，有什么方法可以让它运行得更快（除了改变我使用单独的表进行处理的事实，临时表更新频繁，所以我像快照一样复制数据并使用也就是说，代码字段一开始是 NULL，所以我只复制具有 NULL 代码的记录，这意味着代码不是 NULL 的记录已经被处理过）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:46:11.320

那个 UPDATE 命令是实际的 SQL 吗？因为您需要一个 WHERE 子句来避免更新表中的每条记录...

此外，INSERT 不需要首先从 2 个连接表中查找要更新的记录。

# jquery - jQuery mouseenter 的古怪之处 - mouseleave

> ID：11980384
> 
> 赞同：0
> 
> 时间：2012-08-16T03:35:54.783
> 
> 标签：jquery, hover, nested, mouseevent, accordion

我试图在光标进入其父元素时为元素设置动画，并在鼠标退出元素时可靠地反转该动画 - 对于多层嵌套元素。我可以用 CSS 笨拙地做到这一点（过渡不是一个选项），但想用 jQuery 来让它性感起来；）

我试图实现的一个例子是这种类型的[手风琴菜单](http://jsfiddle.net/wuUD9/4/)，但正如我所说，使用 jQuery。

到目前为止，我已经[尝试在同一个示例中使用 mouseenter 和 mouseleave](http://jsfiddle.net/Rce8A/1/)，但在第一次扩展和收缩后似乎无法让它工作。

我怎样才能可靠而优雅地将此隐藏/显示动画绑定到 mouseenter/mouseleave 或 jQuery 中的类似内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:45:48.223

看来工作

[http://jsfiddle.net/sechou/Rce8A/2/](http://jsfiddle.net/sechou/Rce8A/2/)

```
$(function(){
  //bind event
  $("li.level1").mouseenter(   
    function(){
       // make sure the item would diplay
       $(this).find("ul:first").find("li.level2").show(); 
       // do "show" 
       $(this).find("ul:first").show(500);       
    });

  $("li.level1").mouseleave(
      function() {
        // do "hide" 
        $(this).find(":parent").hide(500);
      }
  );
}); 
```

# android - 在 SDK 管理器中看不到 android 15 和 13

> ID：11980385
> 
> 赞同：1
> 
> 时间：2012-08-16T03:36:16.117
> 
> 标签：android

我正在尝试安装 Android API 级别 13 和 15，但 SDK 平台未出现在 SDK 管理器中。我尝试更新 ADT 但未找到更新，我首先假设它是最新的，但当我打开时Android 在 Preferences 菜单中，它说 SDK 需要 ADT 20，而我的当前是 16。我正在使用 Eclipse Indigo，有什么解决方法吗？谢谢。

顺便说一句，这是我的 SDK 管理器的屏幕截图：

![SDK 管理器](../Images/9905bd057cc402cdb958a4edf16428af.png)

这是Android首选项：

![喜好](../Images/12f0a0ef1604c8f6a2e3476ead56a618.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T00:48:57.757

我解决了，问题是 SDK 工具已过时，所以我必须先更新它，然后才能最终看到 Android 13 和 15。不知道为什么，但它可以工作。无论如何感谢您的答案:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:12:06.657

我以前从未遇到过这个问题，但我的猜测是 android API 级别 13 和 15 在 inside `android-sdk/platforms`，但不知何故未注册为已安装。您是否有机会从以前的安装中复制粘贴到该文件夹​​中`android-13`？`android-15`如果是这样，那可能会破坏从 SDK 管理器到该文件夹​​的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:52:32.777

首先将您的 ADT 插件更新到 16 到 20，然后检查首选项并查看以下站点以更新 ADT 插件。

[更新 ADT 插件](http://developer.android.com/tools/sdk/eclipse-adt.html)

# php - 如何在 PHP 中从 MySQL 中获取表

> ID：11980388
> 
> 赞同：1
> 
> 时间：2012-08-16T03:36:54.043
> 
> 标签：php, mysql

我是 PHP 的新手，我只是在尝试 MVC 的基础知识。一切都很顺利，但我在从 MySQL 获取数据并用它填充 HTML 表时遇到了问题。

问题是我的代码只返回表的一行（该表中有三行）。我已经尝试了很多事情，现在我正在使用数组来存储数据并传递给控制器​​，然后传递给视图。

查询具有获取数据和名称功能的类文件`queryDB`：

```
 public function getdata(){
    $connectObj=new dbConnection(); 
    //its a connection class where mysql connection has been made
    if(!$connectObj->connectDB()){
        echo "Error in mysql: ".mysql_error();
        return false;
    }
    else{
        $query = "select * from tbl_cartypes";
        $result = mysql_query($query) or die("Error: ".mysql_error());

        $data = array();
        while($row = mysql_fetch_assoc($result)){
            $data[0] = $row['car_id'];
            $data[1] = $row['car_name'];
            $data[2] = $row['car_model'];
            $data[3] = $row['car_type'];
            $data[4] = $row['car_price'];

        }
          return $data;

    }
     $connectObj->closeDB();
} 
```

此查询的控制器名称所在的控制器类`carController.php`：

```
public function getAllData(){
    $runQuery = new queryDB();
    $array = array();
    $array = $runQuery->getTickets($userid);
    return $array;
} 
```

以及我只是在呼应我的数据的最终视图：

```
include "$path/controllers/carController.php";

$ticket = new carController();
$array = array();
$array = $ticket->getdata();
for($i=0;$i<count($array);$i++){
        echo $array[$i]."<br />";
} 
```

此代码的输出没有错误，但问题是它只是获取表的一行，而有三行。

那么任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:40:27.520

它正在获取所有行，但是您将所有数据保存到同一个位置（`$data[0]`通过`$data[5]`），因此除了最后一行之外的所有数据都将被覆盖。

这可能会更好：

```
 $data = array();
 while($row = mysql_fetch_assoc($result)) {
     $data[] = $row;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:21:08.283

使用 PDO 和其他人发布的内容尝试使用此

```
public function getdata(){
  $connectObj=new dbConnection(); 
  //its a connection class where mysql connection has been made
  if(!$connectObj->connectDB()){
      echo "Error in mysql: ".mysql_error();
      return false;
  }
  else{
  $query =  'select * from tbl_cartypes';
  $result = $connectObj->query($query);

  $data = array()

  foreach ($result as $row){
   array_push($data, $row)
  }

  return $data;

}
 $connectObj->closeDB(); 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:42:03.930

您的问题是您正在覆盖上表的值：

```
while($row = mysql_fetch_assoc($result)){
    $data[0] = $row['car_id'];
    $data[1] = $row['car_name'];
    $data[2] = $row['car_model'];
    $data[3] = $row['car_type'];
    $data[4] = $row['car_price'];
} 
```

这只会重写该表中键的最后一行数据。

尝试：

```
$data = array()
while($row = mysql_fetch_assoc($result)){
    array_push($data, $row)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T03:42:29.127

您的 while 循环仅将一行分配给数组 $data。在while循环中试试这个

```
 while($row = mysql_fetch_assoc($result)){
            $data["car_id"][] = $row['car_id'];
            $data["car_name"][] = $row['car_name'];
            $data["car_model"][] = $row['car_model'];
            $data["car_type"][] = $row['car_type'];
            $data["car_price"][] = $row['car_price'];

        }
  return $data; 
```

现在您可以遍历数组。

# android - 使用操作栏的 Android HoneyComb 错误

> ID：11980389
> 
> 赞同：0
> 
> 时间：2012-08-16T03:37:00.143
> 
> 标签：android, android-3.0-honeycomb

将目标 sdk 设置为 11 后出现蜂窝错误 android.os.NetworkOnMainThreadException。我使用以下代码忽略它。它会影响我的应用程序吗？有人可以提出任何解决这个问题的建议。

```
StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

StrictMode.setThreadPolicy(policy); 

@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.grid_layout);
        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 

        ArrayList<HashMap<String, String>> songsList = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL); // getting XML from URL
        Document doc = parser.getDomElement(xml); // getting DOM element

        NodeList nl = doc.getElementsByTagName(KEY_SONG);
        // looping through all song nodes <song>
        for (int i = 0; i < nl.getLength(); i++) {
            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            // adding each child node to HashMap key => value
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
            map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
            map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
            map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));

            // adding HashList to ArrayList
            songsList.add(map);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:45:29.970

在主线程（UI 线程）上进行网络访问不是一个好习惯。如果您的目标 SDK 是 Honeycomb 或更高版本，则会在主线程上出现网络异常。尝试使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)来避免这种情况。

**代码 EX：**

```
public class yourclass extends Activity{
        @Override
        public void onCreate(Bundle savedInstanceState)  {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.uoyrlayout);
        //this is UI thread you should not do network access from here.
        new LongRunning().execute();//call to background thread to do network access
 }
    public class LongRunning extends AsyncTask<Void, Void, Void> {
        protected void onPreExecute() {
            //UI updating goes here before background thread..
        }
        @Override
        protected Void doInBackground(Void... params) {     
            //This is not the UI thread
            //do your network acces
            return null;            
        }

        @Override
        protected void onPostExecute(Void result) {
           //update your UI after background thread
        }

    }
} 
```

# set - “正式定义”是什么意思？

> ID：11980398
> 
> 赞同：1
> 
> 时间：2012-08-16T03:38:10.553
> 
> 标签：set, logic, sml, smlnj

我正在学习逻辑和函数式编程课程（使用 SML 编程），作为我们第一次作业的一部分，我提出了以下问题

*“......您需要定义一个（抽象）类型，称为'a set Documentation：正式描述有限集将如何表示为列表，说明表示不变的属性......”*

谁能解释**一下“正式描述”是什么意思**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:41:24.307

检查您的教科书和课堂笔记，了解“正式描述”如何用于其他类型，然后按照该示例进行操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:42:37.673

数学中的正式描述通常意味着用数学表达式界定事物，并在必要时使用标准符号和术语。在逻辑上，您通常会使用`implies`and`therefore`而不是更通俗的术语。维基百科有[一篇文章](http://en.wikipedia.org/wiki/Formalism_%28mathematics%29)

# sql - 如何将四个表中的四个数字放入 2 x 2 表中？

> ID：11980400
> 
> 赞同：0
> 
> 时间：2012-08-16T03:38:23.830
> 
> 标签：sql, sas

我正在使用 SAS 进行分析。每次分析后，我都会得到四张表。`Table11`, `Table12`,`Tabe21`和`Table22`. 每张桌子只有一个号码。我想将这四个数字（来自四个表）放入一个 2x2 矩阵中。我怎样才能使用 SAS 做到这一点`proc sql`？

*例如*，当我有**1**（表 1 中唯一的数字）、**2**（表 2 中唯一的数字）、**3**（表 3 中的唯一数字）、**4**（表 4 中的唯一数字）时，我想生成一个 2 x 2 表格的另一个表格，里面有这四个数字。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:04:46.077

一个完全 hacky、可怕的方法可能看起来像这样：

```
SELECT (SELECT num FROM table1), (SELECT num FROM table2)
    UNION ALL 
SELECT (SELECT num FROM table3), (SELECT num FROM table4) 
```

您可能必须在联合的每个部分之后添加一个“虚拟”表（就像`SELECT ... FROM sysibm.sysdummy1`在 DB2 中一样）。

我从来没有使用过SAS，所以我不知道具体情况。也许那个（标准 SQL）解决方案对你有用。但就像我说的那样，它非常hackish，所以可能有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:09:49.557

可能具有等效的执行计划（使用隐式交叉连接）：

```
SELECT table11.num, table12.num
FROM table11, table12
    UNION ALL 
SELECT table21.num, table22.num
FROM table21, table22 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T03:18:09.317

您已经收到了上面的一些好点/解决方案，但是您可能希望在加入之前尝试自动检查每个数据集是否存在。类似于以下内容：

```
data c12;
c12=32;
run;

data c21;
c21=40;
run;

data c22;
c22=12;
run;

%sysfunc(ifc(%sysfunc(exist(c11)),
             proc print data = a; run;,
             data _null_; file print; put 'Dataset "c11: was not created'; run;)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T04:35:28.593

显然，您想采用工作保障技术。

```
with
    t11(r, c, num) as (SELECT 1, 1, num from table11),
    t12(r, c, num) as (SELECT 1, 2, num from table12),
    t21(r, c, num) as (SELECT 2, 1, num from table21),
    t22(r, c, num) as (SELECT 2, 2, num from table22)
select
    coalesce(t11.num, t21.num) as col1,
    coalesce(t12.num, t22.num) as col2
from 
    (t11 cross join t12)
    full outer join
    (t21 cross join t22)
        on t11.r = t21.r or t12.r = t22.r 
```

或者，如果您不想浪费 c 列中的值，这可能会更好。

```
 case
        when t11.r * t11.c = t12.c - t12.r
        then t11.num else t21.num
    end as col1,
    case
        when t21.r * t22.r * t22.c - t21.c = t21.r + t21.c + t22.r + t22.c
        then t22.num else t12.num
    end as col2 
```

# entity-framework - 实体框架作为 DAL 如何正确实现更新和删除

> ID：11980401
> 
> 赞同：0
> 
> 时间：2012-08-16T03:38:59.403
> 
> 标签：entity-framework, data-access-layer

我正在使用 EF4.0 编写 DAL 类，我读过

[http://www.codeproject.com/Articles/43367/ADO-NET-Entity-Framework-as-Data-Access-Layer](http://www.codeproject.com/Articles/43367/ADO-NET-Entity-Framework-as-Data-Access-Layer)

和

[http://msdn.microsoft.com/en-us/magazine/cc700340.aspx](http://msdn.microsoft.com/en-us/magazine/cc700340.aspx)

但是当我测试他们的代码时，我遇到了 Update 和 Delete 方法的一些问题。

DAL类所有代码如下：

```
public class FriendlinkDA : IDisposable
{
    private EdiBlogEntities context;

    public FriendlinkDA()
    {
        context = new EdiBlogEntities();
    }

    public void Dispose()
    {
        context.Dispose();
    }

    public FriendLink GetFriendLink(Guid id)
    {
        return context.FriendLink.FirstOrDefault(f => f.Id == id);
    }

    public void Update(FriendLink model)
    {
        // Way 1:  (throw exception)
        //context.Attach(model);
        //model.SetAllModified(context);
        //context.SaveChanges();

        // Way 2: 
        EntityKey key;
        object originalItem;
        key = context.CreateEntityKey("FriendLink", model);
        if (context.TryGetObjectByKey(key, out originalItem))
        {
            context.ApplyCurrentValues(key.EntitySetName, model);
            //context.ApplyPropertyChanges(key.EntitySetName, model);
        }
        context.SaveChanges();
    }

    public void Delete(FriendLink model)
    {
        // Way 1:
        context.Attach(model);
        context.DeleteObject(model);
        context.SaveChanges();

        // Way 2:
        //var item = context.FriendLink.FirstOrDefault(f => f.Id == model.Id);
        //context.DeleteObject(item);
        //context.SaveChanges();
    }
} 
```

扩展方法是：

```
public static void SetAllModified<T>(this T entity, ObjectContext context) where T : IEntityWithKey
{
    var stateEntry = context.ObjectStateManager.GetObjectStateEntry(entity.EntityKey);
    var propertyNameList = stateEntry.CurrentValues.DataRecordInfo.FieldMetadata.Select
      (pn => pn.FieldType.Name);
    foreach (var propName in propertyNameList)
        stateEntry.SetModifiedProperty(propName);
} 
```

在应用程序中，我像这样使用 DAL：

```
// Delete
using (var optFriendlink = new FriendlinkDA())
{
    var test = optFriendlink.GetFriendLink(new Guid("81F58198-D396-41DE-A240-FC306C7343E8"));
    optFriendlink.Delete(test);
}

// Update
using (var optFriendlink = new FriendlinkDA())
{
    var testLink = optFriendlink.GetFriendLink(new Guid("62FD0ACF-40C3-4BAD-B438-38BB540A6080"));
    testLink.Title = "ABC";
    optFriendlink.Update(testLink);
} 
```

问题一：

在 Delete() 中，方式 1 和方式 2 都可以工作。哪一个更好？

问题2：

在 Update() 中，方式 1 给了我一个例外：**无法附加对象，因为它已经在对象上下文中。一个对象只有在它处于未更改状态时才能重新附加。**

关于这个声明：**context.Attach(model);**

但是方式2很好。

为什么会这样？我还在 Delete() 中附加了模型，为什么 Delete() 工作正常？如何正确编写更新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:00:26.940

例外说明了一切：

> 一个对象只有在它处于未更改状态时才能重新附加。

您在 下的代码片段中更改了对象，`// Update`这就是它无法重新附加的原因。

至于哪种方法更好。通常你会从上下文中获取一个对象，处理上下文，对对象做一些事情，然后使用一个新的上下文来保存对象。在这种情况下，使用`Attach`比首先通过 Id 获取对象要舒服得多。

# php - 如何在PHP中比较两个数组值

> ID：11980402
> 
> 赞同：1
> 
> 时间：2012-08-16T03:39:01.240
> 
> 标签：php, arrays, compare, array-merge

我有两个功能，第一个是：

```
 public function computeGHComponents()
    {
      error_reporting (E_ALL^ E_NOTICE);          

      $totals = NULL;

      foreach ($this->transaction as $t){

          $amount = (float) $t['Amount'];

            if (isset($totals[ $t['SiteID'] ][ $t['TransactionType'] ])){
                $totals[ $t['SiteID'] ][ $t['TransactionType'] ] += (float) $amount;
            } else {
                $totals[ $t['SiteID'] ][ $t['TransactionType'] ] = (float) $amount;
            }
        }

     foreach($totals as $key => $value)

        {

         $this->result[$key]['Deposit'] = isset($value['D']) ? $value['D'] : 0;
         $this->result[$key]['Reload']  = isset($value['R']) ? $value['R'] : 0; 
         $this->result[$key]['Redemption'] = isset($value['W']) ? $value['W'] : 0;

       }
    echo "<pre>";

  print_r($this->result);

} 
```

第二个功能是：

```
 public function bindOwnerToSites(){

     error_reporting (E_ALL^ E_NOTICE);  

    foreach( $this->balance as $keysaa =>$key_valuesa)//getsitebalance
            { 
                foreach( $this->sites as $keys=>$key_values)//getsites
                  {

                        if  ($key_values['SiteID'] == $key_valuesa['SiteID'])
                        {

                         $this->arrays[$key_valuesa['SiteID']] = array('SiteID'=>$key_valuesa['SiteID'],'Balance'=>$key_valuesa['Balance'],'MinBalance'=>$key_valuesa['MinBalance'],'MaxBalance'=>$key_valuesa['MaxBalance'],'OwnerAID'=>$key_values['OwnerAID'],'GroupID'=>1);    

                        }
                 }

            }
       print_r ($this->arrays,$return=null);  
    } 
```

现在我需要比较两个 SiteID 才能绑定，这是我的功能：

```
 public function bindGHComponentsToSites()
    {
    error_reporting (E_ALL^ E_NOTICE);  

     foreach ($this->arrays as $keys => $data) {

        foreach($this->result as $key => $value){

    if ($data['SiteID'] == $value['SiteID']){
            }
     }
 } 
```

我曾经呼应 SiteID 的比较，像这样：

echo($data['SiteID'] .'=='.$value['SiteID']);

但是computeGHComponents()函数的$value['SiteID']没有值，它显示如下：

```
 2==
 2==
 2==
 3==
 3==
 3== 
```

如何从 computeGHComponents() 获取 SiteID 的值？请帮我修改我的代码。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:20:01.930

我曾经 print_r 我的 $keyss 并且我发现它是 SiteID 所以我修改我的代码是这样的：

```
 public function bindGHComponentsToSites()
    {
   error_reporting (E_ALL^ E_NOTICE);  

     foreach ($this->arrays as $keys => $data) {

       foreach($this->result as $keyss => $value){

         //print_r($keyss );echo '<br/>';

         if($data['SiteID'] == $keyss){

               //statement...
            }
       }
    } 
```

# sql-server-ce - 我可以告诉 SqlMetal 不要添加 INotifyPropertyChanging 和 INotifyPropertyChanged 吗？

> ID：11980403
> 
> 赞同：1
> 
> 时间：2012-08-16T03:39:03.930
> 
> 标签：sql-server-ce, sqlmetal

我目前正在使用[SqlMetal](http://msdn.microsoft.com/en-us/library/bb386987.aspx)为 SQL Server Compact Edition 3.5 数据库生成数据上下文。

此数据库将在 Windows Phone 7 应用程序中使用，并且只能从中读取。出于这个原因，我想跳过跟踪属性更改的逻辑（实现 INotifyPropertyChanging 和 INotifyPropertyChanged），因为用户/系统不会更改数据库。

有什么办法可以告诉 SqlMetal 排除这个额外的逻辑吗？

或者，除了自己创建上下文和类之外，如果我将生成的文件（大部分）保持原样，是否可以进行任何相对简单的更改来提高性能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T09:25:38.760

如果您只从数据库中读取，则永远不会调用调用这些方法的代码，因此不会有性能损失

# javascript - jQuery UI 效果

> ID：11980404
> 
> 赞同：1
> 
> 时间：2012-08-16T03:39:04.557
> 
> 标签：javascript, jquery, jquery-ui

如何`div`使用 jqueryui 效果显示从顶部和底部的增长？

我试过这段代码：

```
$('div#my').show('clip'); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:44:55.440

slideUp 或 slideDown 对您有帮助吗？

```
$('div#my').slideUp('slow');
$('div#my').slideDown('slow'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:53:44.730

您实际上可以在没有 jQuery UI 的情况下使用动画，使用`.show( [duration] [, easing] [, callback] )`.

这个的代码是`$('div#my').show('slow');`

对于使用自定义效果，例如`clip`，我认为您的代码会按预期工作，但如果不是，您的 jquery UI 路径可能已关闭？

这是您的代码按预期工作的演示：http: [//jsfiddle.net/ysHgp/](http://jsfiddle.net/ysHgp/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:59:32.213

另一种方法是 $('div#my').animate({ height: heightOfDiv_my }, "fast");

# java - gradle只能在运行compileJava时显示编译错误吗？

> ID：11980406
> 
> 赞同：1
> 
> 时间：2012-08-16T03:39:37.600
> 
> 标签：java, gradle

如果我的项目中有一些编译错误并运行，`gradle compileJava`我无法在控制台上看到编译错误。如果我运行，`gradle --debug compileJava`我会得到一个很大的堆栈跟踪，并且在某处有我的编译错误。如果有编译错误，是否可以只显示编译错误？

# ruby-on-rails-3 - 获取rails环境作为变量

> ID：11980410
> 
> 赞同：2
> 
> 时间：2012-08-16T03:40:04.970
> 
> 标签：ruby-on-rails-3, environment-variables

我认为这将相当简单，但似乎无法弄清楚如何去做。

我将一些图像存储在 s3 中，并希望根据项目在开发、测试或生产期间保存的情况而使用不同的存储桶。

所以，我想我可以说

```
：存储=>：s3，
                  :s3_credentials => ":rails_root/config/s3.yml",
                  :url => '/activities/:id/:style.:extension',
                  :path => 'activities/:id/:style.:extension',
                  :bucket => 'appName_:envirnment'

```

当然，我似乎找不到怎么说：环境。这必须在某处作为变量可用，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:46:15.883

它应该通过直接包含`#{Rails.env}`在 :url 和 :path 值中来正常工作。对于开发和测试，每次加载类时都会加载 url 和路径值，而在生产中它们会在启动时加载。所以只需包含它，它应该可以工作：

```
:bucket => "appName_#{Rails.env}" 
```

# web-services - Fiddler 拦截对我的 Weblogic 服务器的 http 请求？

> ID：11980411
> 
> 赞同：1
> 
> 时间：2012-08-16T03:40:14.383
> 
> 标签：web-services, soap, weblogic, fiddler

我有一个在 WebLogic 上运行的应用程序，它公开了一些 Web 服务供外部客户端调用。我不控制 WebLogic 应用程序，但想看看它收到了哪些请求。Fiddler有什么好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:08:54.867

我建议使用[*wireshark*](http://www.wireshark.org/)（以前称为Ethereal）。

# javascript - 使用 jquery 加载一系列图像

> ID：11980420
> 
> 赞同：1
> 
> 时间：2012-08-16T03:41:34.693
> 
> 标签：javascript, jquery

我正在使用[**这个**](http://blog.stableflow.com/jquery-plugins/360-degrees-product-view/)库，我想做的是将整个系列的图像动态加载到一个元素中：

```
<div id="product" style="width: 640px; height: 300px; overflow: hidden;">
    /* These images are loaded and appended to the div element dynamically
        <img src="images/01.jpg" alt="" />
        <img src="images/02.jpg" alt="" />
        <img src="images/03.jpg" alt="" />
        <img src="images/04.jpg" alt="" />
        <img src="images/05.jpg" alt="" />
        <img src="images/06.jpg" alt="" />
    /*
</div> 
```

然后调用***j360***库进行设置：

```
jQuery(document).ready(function() {
    jQuery('#product').j360();
}); 
```

加载图像后。

我只看过这样加载一个图像的教程[**....**](http://jqueryfordesigners.com/image-loading/)有没有按顺序加载和附加一堆图像的技术？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:56:20.703

不知道你所说的“加载”是什么意思，但你可以简单地将`img`元素附加到父元素`div`，浏览器会说，“嘿，有一个带有 的图像`src`，让我去拿它。”

**[这是一个关于 JSFiddle 的工作示例](http://jsfiddle.net/bmgonzal/9B6aw/3/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:34:42.237

如果我理解正确，您希望将 div 标记为正在加载，直到所有要附加的图像都已正确加载。这是可行的，但有点复杂。

我假设您能够生成图像 URL 的有序列表。如果不是这种情况，那么您还有一些繁重的工作要做。

本质上，我们想要做的是检查每个图像是否已加载。一旦它们全部加载完毕，我们可以调用一个完成处理程序，您可以`.gif`用您的产品视图替换加载。我们开始做吧。

**HTML**

```
<div id="product" style="width: 640px; height: 300px; overflow: hidden;"></div> 
```

**JavaScript**

```
$(document).ready(function() {
  var imageURLs = [ ... ]; // you need to generate this (not too hard)
  var imagesLoaded = 0;
  var images = [ ];

  $.each(imageURLs, function(i, imageURL) {
    var $img = $('<img/>').load(function() {
      imagesLoaded++;
      // See if this was the last image we need to load.
      if (imagesLoaded == imageURLs.length) {
        showProductView();
      }
    })
    .attr('src', imageURL);
    images.push($img);
  });
});

var showProductView = function() {
  var $product = $('#product');
  $.each(images, function(i, $img) {
    $product.append($img);
  });
  $product.removeClass('loading');
  $product.j360();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T06:32:03.330

不知道这是否是您在问题中特别要寻找的内容，但是此插件会在加载一组图像时通知您，并允许在加载每个单独的图像或整个图像集后执行回调函数：

[http://www.farinspace.com/jquery-image-preload-plugin/](http://www.farinspace.com/jquery-image-preload-plugin/)

它工作得很好。

# php - mysql - 从父表插入id

> ID：11980429
> 
> 赞同：0
> 
> 时间：2012-08-16T03:42:43.210
> 
> 标签：php, mysql

我有表定义：

```
create table users(
                  id int not null auto_increment, 
                  usernaname varchar(50) not null, 
                  pass varchar(50) not null,
                  primary key(id)
                  ) ENGINE=InnoDB  DEFAULT CHARSET=utf8;
create table users_description(
                  user_id int not null, 
                  description varchar(255),
                  key(user_id), 
                  foreign key(user_id) references users(id) on delete cascade
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

它很好，很好用。

但是当我添加一个新用户时，我使用下一个查询：

```
insert into users (username, pass) values('test', 'test'); 
```

但是如何在 users_description 表中自动添加用户 ID？与此类似的东西：

```
insert into users_description values(
                                    select id from users where username = 'test',
                                     'user description'); 
```

我只想使用两个查询，这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:47:05.943

您可以使用`LAST_INSERT_ID()`获取最后插入的主键 id（来自`users`表）：

```
INSERT INTO users_description VALUES 
(LAST_INSERT_ID(), 'test', 'user description'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:48:27.280

使用`LAST_INSERT_ID()`. [**这里的例子。**](http://thenoyes.com/littlenoise/?p=56)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T03:49:36.700

```
$query = mysql_query("insert form (username, pass) values('test', 'test')");
$id = mysql_insert_id(); 
```

为您提供 PHP 中最后插入的 id ..

# google-drive-api - Google Drive API 中的缩略图质量

> ID：11980433
> 
> 赞同：2
> 
> 时间：2012-08-16T03:43:18.937
> 
> 标签：google-drive-api

我将创建一个从 Google Drive 读取图像的幻灯片应用程序。Google Drive 中的图像大多是高分辨率的。因此，我必须将它们调整为 1000x1000 并保存到我的服务器以显示幻灯片。

我认为 service.files().get() API 中有一个“thumbnailLink”（eq“https://lh4.googleusercontent.com/{hash}=s220”）属性，我可以简单地将链接修改为通过将“s220”替换为“s1000”返回 1000x1000 但是，thumbnailLink 的图像质量看起来不太好。最后，我的解决方案是将整个高分辨率图像下载到我的服务器并调整它们的大小。

如果 Google Drive API 可以提供更高分辨率的缩略图或在 thumbnailLink 中有一个属性来设置图像质量，那就太好了，这将节省 Google Drive 和我的服务器之间的大量带宽传输。

# themes - SSJS 用于主题中的资源 href

> ID：11980434
> 
> 赞同：1
> 
> 时间：2012-08-16T03:43:24.877
> 
> 标签：themes, xpages

我们有多个应用程序共享单个 css 主题。所以我们想把这些通用的 CSS 和资源移动到通用数据库中，并在主题中动态引用它们。

我可以使用以下硬编码路径来引用这些 css：

```
<resource>
    <content-type>text/css</content-type>
    <href>/.ibmxspres/domino/common/designstore.nsf/custom_layout.css</href>
</resource> 
```

这样它工作正常。但是我们想从配置中获取数据库路径。因此，'/common/designstore.nsf' 路径不必在主题中进行硬编码。

我尝试在 Xpage 的 RenderResponse 之前将 designstore db 路径放在 sessionScope 变量中。并在主题中引用范围变量。

```
<resource>
    <content-type>text/css</content-type>
    <href>#{sessionScope.commonCSSPath}</href>
</resource> 
```

其中 sessionScope.commonCSSPath = "/.ibmxspres/domino/common/designstore.nsf/custom_layout.css"

请让我知道我们是否可以计算资源中的 db 路径，或者以任何其他方式使用计算路径从其他数据库引用 CSS 文件。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:25:30.767

Try calculating the `href` value using Javascript instead of EL:

```
<resource>
    <content-type>text/css</content-type>
    <href>#{javascript:sessionScope.commonCSSPath}</href>
</resource> 
```

I am not sure if the timing of beforeRenderResponse and when a theme kicks in, makes it possible to reference a sessionScope variable. Let us know how it goes.

--

**Update:**

I use the following in a theme to determine the rendered property of a field and it works:

```
<control>
    ...
    <property>
        <name>rendered</name>
        <value>#{javascript:document.isEditable()}</value> 
    </property>
</control> 
```

I also use a function to determine the value property where the function is a SSJS function that looks up a value in a profile document:

```
<control>
    ...
    <property>
        <name>value</name>
        <value>#{javascript:getNecessaryValue("SetupProfile", "fieldWithValue")}</value> 
    </property>
</control> 
```

Hopefully this can inspire you to achieve what you want.

# php - 当通过 jquery 发出警报时，函数正在创建大空间

> ID：11980435
> 
> 赞同：1
> 
> 时间：2012-08-16T03:43:32.320
> 
> 标签：php, jquery, ajax, function, whitespace

我有一个处理会话和 cookie 的函数。

**函数.php**

```
function getUser()
{
     if(isset($_COOKIE["auth"]))
     {
         /* check cookie */
         echo $_COOKIE['auth'];
     }else if(isset($_SESSION["auth"])){
         echo $_SESSION["user_auth"];
     }
} 
```

我也有一个表格，并且有一个与之相关的警报。我有一个 ajax，当用户提交表单时，会提醒该功能。

一切正常，但唯一的问题是弹出的警报中有很多空格。我试过用

```
trim(getUser); 
```

和 str_replace("","",getUser());

这给我带来了问题，因为我试图将会话值或 cookie 值输入到 mysql 数据库中。当我检查我的 mysql 数据库中是否有任何值时，它只是空的，而不是 NULL。

谢谢！

阿贾克斯：

**表单.php**

```
$(".inputSubmit").submit(function(e){
      e.preventDefault();
      var inputs= $('.inputForm').serialize();
      $.ajax({
           url: "submit.php",
           type: "POST",
           data: input,
           error: function(data){
                 alert(data.responseText);  
                 alert(data.responseStatus);
                 alert(data);
           }
      }).done(function(data){
           alert(data);
      });
}); 
```

**提交.php**

```
require "functions.php";

$users = str_replace("","",getUser());
echo $users; 
```

假设我有警报框：

```
--------------------------------------
|                                    |
|                                    |
|                                    |
|                                    |
|                                    |
|  1                                 |
|                                    |
|                                    |
|                           OK       |
-------------------------------------- 
```

1 是会话输出。弹出警报时，好的是确定按钮。通常 1 应该是更高和更小的警报框，但它的扩展就像有空白一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T03:56:56.507

你需要`return`，不是`echo`。

```
function getUser()
{
     if(isset($_COOKIE["auth"]))
     {
         /* check cookie */
         return $_COOKIE['auth'];
     }else if(isset($_SESSION["auth"])){
         return $_SESSION["user_auth"];
     }
     return "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:18:20.323

xdazz 是对的——你应该有“return”而不是 echo。但这可能不是问题。这是一个问题，需要修复。但我不知道它将如何解决您的空间问题。

最可能的原因是您有 php 开始标签：

```
<?php 
```

或者

```
<? 
```

不在您的 PHP 页面的顶部，或者您的结束标记 (?>) 不在您的 php 文件的底部 - 或者后面是空字符。

为了获得最佳实践，将 php 开始标记放在最顶部，仅第一行，将 ?> 放在底部，最后一行，后面没有“换行符”。（如果您愿意，也可以省略 ?>，这不是必需的。）这些标签之外的任何内容，包括空行，都将被回显，并将您的显示向下推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:20:05.060

您也可以尝试`jQuery.trim()`OR `j$.trim(str)`OR 正则表达式`string.replace()`。

***[在这里](http://jsfiddle.net/2veEY/)***您可以看到所有三种方法。选择适合您的那一款。

# c++ - 无偏接口的插件式接口设计，使其可以被任何编程语言使用

> ID：11980437
> 
> 赞同：0
> 
> 时间：2012-08-16T03:43:46.720
> 
> 标签：c++, plugins, com

我正在为我的应用程序设计一个插件界面，我希望用户能够以他们想要的任何语言实现这个插件界面。所以我想到了 COM 对象是一个正确的决定吗？为什么？

注意：我的应用程序是一个用 VC++2005 编写的 C++ 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:37:07.410

如果它真的是一个插件，你需要从你的 C++ 应用程序中调用一些插件函数，我认为你不能用 COM 来处理那些脚本语言，比如 php 或 javascript（除非你创建一个解释器）。但是，如果它是脚本/自动化之类的东西，您依赖插件来调用应用程序提供的函数，那么 COM 会很有帮助。

# database - 第一次创建包时需要帮助

> ID：11980446
> 
> 赞同：1
> 
> 时间：2012-08-16T03:45:07.903
> 
> 标签：database, oracle, plsql, oracle11g, packages

这将是一个很难回答的问题，这就是为什么我在这个包上工作了 3 天（我的第一个包）我一直犹豫要问。

下面是我的包的规格和正文的布局。在你看之前，这是我想要完成的。我即将完成，所以不必担心这个问题不值得你花时间。

你也可以在代码中看到我的一些个人笔记。

我的代码不完整，目前没有编译，但在它停止编译之前我可以告诉你它也没有工作。DROP 和 CREATE 过程起作用。无需触摸这些。我的主要问题是 LOG_PROC、我的例外、我的 ARCHIVE_ALL_TABLES ......据我所知

这是我正在尝试做的事情：

创建一个包，可用于将新创建的表“归档”到“TEST_TABLE_A_13AUG2012”格式的归档表中。这个包将使用我创建的名为 VW_TEST_TABLES 的视图，其中包含以下数据：

```
TEST_TABLE_A
TEST_TABLE_B
TEST_TABLE_C
TEST_TABLE_D 
```

此包将需要在创建新表之前删除所有以前存档的表。因此，我的包中需要同时包含 DROP_ARCHIVE_TABLES 和 CREATE_ARCHIVE_TABLES 过程。除了 DROP 和 CREATE 过程之外，我的包还有一个主过程，称为 ARCHIVE_ALL_TABLES。这是需要调用（例如由调度程序）并进行实际归档的过程。我需要在这些过程中加入适当的异常处理。（例如，当我删除它时，不在乎该表是否不存在）。

最后，为了正确跟踪每个归档运行，我想构建一个日志记录机制。为此，我在我的模式中构建了一个名为 TEST_PACKAGE_LOG_TBL 的表。此表应具有以下列：ARCHIVE_DATE (DATE)、TABLE_NAME (VARCHAR2(30))、STATUS_CODE(VARCHAR2(1))、COMMENTS (VARCHAR2(4000))。对于我归档的每个表，我想记录日期、表名，“S”表示成功或“E”表示错误，如果在删除或创建表时遇到错误，SQLERRM 应该是什么被显示。

最后，我的 ARCHIVE_ALL_TABLES 过程应在完成时检查此日志表，以确定是否有任何表未正确归档。我创建了一个函数 ERRORS_FOUND（返回布尔值），它接受一个 IN 参数（今天的日期）并检查日志表是否有错误。如果此函数返回 true，我的 ARCHIVE_ALL_TABLES 过程应该考虑这一点并“通知管理员”（现在我将保持不变，但最终它会简单地用一条评论说明这​​一点，说明我将通知管理员并放置 NULL；在if then 结束块。）

总而言之，我的包结构必须包含（至少）以下过程：

ARCHIVE_ALL_TABLES、DROP_ARCHIVE_TABLE、CREATE_ARCHIVE_TABLE、ERRORS_FOUND（函数）

```
--package specification
CREATE OR REPLACE PACKAGE PKG_TEST_TABLES IS

          -- Author  : 
          -- Created : 8/14/2012 8:40:18 AM
          -- Purpose : For storing procedures to drop, create, and archive new tables

          /* Package specification*/
          PROCEDURE ARCHIVE_ALL_TABLES;
          PROCEDURE DROP_ARCHIVE_TABLES; --2nd
          PROCEDURE CREATE_ARCHIVE_TABLES; --1st and call both from archive tables first assuming it works
          PROCEDURE LOG_PROC
          (
                        P_PROCESS_START_TIMESTAMP TIMESTAMP
                       ,P_ARCHIVE_DATE DATE
                       ,P_TABLE_NAME VARCHAR2
                       ,P_STATUS_CODE VARCHAR2
                       ,P_COMMENTS VARCHAR2
          );
          PROCEDURE W(STR VARCHAR2);

          FUNCTION ERRORS_FOUND(P_JOB_RUN_TIMESTAMP TIMESTAMP) RETURN BOOLEAN;

END PKG_TEST_TABLES;

--package body
CREATE OR REPLACE PACKAGE BODY PKG_TEST_TABLES IS
          /* Package body*/

          -------------------------------------------------------------------------------------------------------------------------------------------------------------------
          -------------------------------------------------------------------------------------------------------------------------------------------------------------------

          /* Procedure 'W' is a wrapper for DBMS output. Placed at top of package to make globally available*/
          PROCEDURE W(STR VARCHAR2) IS
                        L_STRING VARCHAR2(4000);
          BEGIN

                        L_STRING := STR;
                        DBMS_OUTPUT.PUT_LINE(STR);
          END;

          -------------------------------------------------------------------------------------------------------------------------------------------------------------------
          -------------------------------------------------------------------------------------------------------------------------------------------------------------------

          PROCEDURE DROP_ARCHIVE_TABLES AS

                        /* Purpose: For dropping previously archived tables so that new ones can be created */

                        L_NO_TABLES_TO_DROP EXCEPTION;
              BEGIN
                        /* Will drop previously archived tables not current ones*/
                            FOR STMT IN (SELECT 'DROP TABLE mySchema.' || TABLE_NAME AS STR
                                     FROM VW_TEST_TABLES
                                     WHERE REGEXP_LIKE(TABLE_NAME, '.+[0...9]'))
                        LOOP
                                      EXECUTE IMMEDIATE STMT.STR; --so that I don't need ';' at the end of each dynamically created SQL

                        END LOOP;

                        W('Done'); --put the W back in here when in package scope

          EXCEPTION
                        WHEN L_NO_TABLES_TO_DROP THEN
                                      NULL;

          END;

          -------------------------------------------------------------------------------------------------------------------------------------------------------------------
          -------------------------------------------------------------------------------------------------------------------------------------------------------------------

          PROCEDURE CREATE_ARCHIVE_TABLES AS
          /* purpose: setting variable to equal the creation of my 4 tables. Recreating the archive tables */

          L_NO_TABLES_TO_CREATE EXCEPTION;
          L_TABLES_NOT_SUCCESSFULLY_CREATED EXCEPTION;

BEGIN

          FOR STMT IN (SELECT 'CREATE TABLE ' || TABLE_NAME || '_' || TO_CHAR(SYSDATE, 'ddMONyyyy') || ' AS SELECT * FROM ' || TABLE_NAME AS STR
                       FROM VW_TEST_TABLES)
          --LOG_PROC( ,TO_CHAR(SYSDATE, 'ddMONyyyy')  , TABLE_NAME  ,'E' ,'TABLE ARCHIVED SUCCESSFULLY')

          LOOP
                        --DBMS_OUTPUT.PUT_LINE(STMT.STR); --want to do a dbms output first before using 'execute immediate'. Hit test, and run it
                        EXECUTE IMMEDIATE STMT.STR; --so that I don't need ';' at the end of each dynamically created SQL

          END LOOP;

--  DBMS_OUTPUT.PUT_LINE('Done'); --put the W back in here when in package scope

EXCEPTION
              WHEN L_NO_TABLES_TO_CREATE THEN
                            NULL; --logging can go here
              --can call logging procedure here for dml don't need execute immediate, just use    insert into
              WHEN L_TABLES_NOT_SUCCESSFULLY_CREATED THEN
                            NULL; --W('ERROR: ' || SQLERRM);
END;

--PROCEDURE IS NOT CREATING TABLES YET

-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------
-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------
PROCEDURE LOG_PROC(P_PROCESS_START_TIMESTAMP TIMESTAMP, P_ARCHIVE_DATE DATE, P_TABLE_NAME     VARCHAR2, P_STATUS_CODE VARCHAR2, P_COMMENTS VARCHAR2) AS

PRAGMA AUTONOMOUS_TRANSACTION;

/* variables */

L_PROCESS_START_TIMESTAMP TIMESTAMP; L_ARCHIVE_DATE DATE; L_TABLE_NAME VARCHAR2(4000);     L_STATUS_CODE VARCHAR2(1); L_COMMENTS VARCHAR2(4000);

BEGIN

L_PROCESS_START_TIMESTAMP := P_PROCESS_START_TIMESTAMP; L_ARCHIVE_DATE := P_ARCHIVE_DATE;     L_TABLE_NAME := P_TABLE_NAME; L_STATUS_CODE := P_STATUS_CODE; L_COMMENTS := P_COMMENTS;

INSERT INTO TEST_PACKAGE_LOG_TBL(PROCESS_START_TIMESTAMP, ARCHIVE_DATE, TABLE_NAME, STATUS_CODE,     COMMENTS) VALUES(L_PROCESS_START_TIMESTAMP, L_ARCHIVE_DATE, L_TABLE_NAME, L_STATUS_CODE, L_COMMENTS);

RETURN;
END;

-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------
-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------

FUNCTION ERRORS_FOUND(P_JOB_RUN_TIMESTAMP TIMESTAMP) RETURN BOOLEAN IS
L_JOB_RUN_TIMESTAMP TIMESTAMP; ERROR_COUNT NUMBER; ERROR_BOOL BOOLEAN;
BEGIN
L_JOB_RUN_TIMESTAMP := P_JOB_RUN_TIMESTAMP;

SELECT COUNT(*) INTO ERROR_COUNT FROM TEST_PACKAGE_LOG_TBL WHERE STATUS_CODE = 'E' AND     PROCESS_START_TIMESTAMP = L_JOB_RUN_TIMESTAMP; IF ERROR_COUNT > 0 THEN ERROR_BOOL := TRUE; ELSE     ERROR_BOOL := FALSE;
END IF;

RETURN ERROR_BOOL;
END;
-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------
-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------

PROCEDURE ARCHIVE_ALL_TABLES AS

/*
                            Original Author: 
                            Created Date: 13-Aug-2012
                            Purpose: To drop all tables before recreating and archiving newly     created tables
                            NOTE: in package - do not use create or replace and 'as' would be     alternative to 'is'
                            */

/*variables*/
L_DROP_ARCHIVE_TABLES VARCHAR2(4000); L_SQL_CREATE_ARCHIVED_TABLES VARCHAR2(4000);     L_PREVENT_SQL_INJECTION
EXCEPTION
;
--L_NOTIFY_ADMINISTRATOR VARCHAR(4000); --TO BE DONE AT A LATER TIME

BEGIN

RETURN;

EXCEPTION

WHEN L_PREVENT_SQL_INJECTION THEN NULL;

WHEN OTHERS THEN W('ERROR: ' || SQLERRM);

END;

-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------
-------------------------------------------------------------------------------------------------    ------------------------------------------------------------------

BEGIN
-- Initialization
/*archive all tables is like my 'driver' that calls drop then create while logging to the table.     Pragma_auto prevents a rollback which would prevent table logging
              FIRST: This package will need to drop all previously archived tables before it   creates new ones. call drop func first*/

/* calling  ARCHIVE_ALL_TABLES */
BEGIN
-- Call the function
NULL;

END;

RETURN;
END PKG_TEST_TABLES; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:29:34.537

1.  你`LOG_PROC`是一个自主交易，所以你需要一个`COMMIT`在那里。

2.  您定义了许多异常，但您不会在代码中的任何地方引发它们。例如，我猜你需要这样的东西：

    ```
    PROCEDURE CREATE_ARCHIVE_TABLES AS
      L_NO_TABLES_TO_CREATE EXCEPTION;
      l_count number := 0;
    BEGIN
      FOR STMT IN (SELECT ...)
        LOOP
          l_count := l_count + 1;
          EXECUTE IMMEDIATE STMT.STR;
        END LOOP;
      IF l_count = 0 THEN
        RAISE L_NO_TABLES_TO_CREATE;
      END IF;
    EXCEPTION
          WHEN L_NO_TABLES_TO_CREATE THEN
                        NULL; --logging can go here
    END; 
    ```

# python - 汉字不支持Sqlite3 通过CGI 脚本

> ID：11980448
> 
> 赞同：1
> 
> 时间：2012-08-16T03:45:38.333
> 
> 标签：python, sqlite, cgi

通过 Cgi 脚本将汉字插入 Sqlite3 对我不起作用。我可以使用查询浏览器工具从同一数据库中插入和选择汉字，但是当我为此使用 python 脚本时，它会显示错误。这是我用于创建数据库的查询

`CREATE TABLE registrations ( m_username VARCHAR PRIMARY KEY COLLATE 'BINARY', m_identity VARCHAR, m_updatetime DATETIME );`

然后这是我用于更新和选择数据库值的 cgi 脚本

```
#! /Python26/python
dbFile = 'D:/sqlite/registrations'
import cgi
import sqlite3
import xml.sax.saxutils

 query = cgi.parse()
db = sqlite3.connect(dbFile)

user = query.get('username', [None])[0]
identity = query.get('identity', [None])[0]
friends = query.get('friends', [])
print 'Content-type: text/plain\n\n<?xml version="1.0" encoding="utf-8"?>\n'

print "<result>"

if user:
try:
    c = db.cursor()
    c.execute("insert or replace into registrations values (?, ?,      datetime('now'))", (user, identity))
    print "\t<update>true</update>"
except:
    print '\t<update>false</update>'

for f in friends:
print "\t<friend>\n\t\t<user>%s</user>" % (xml.sax.saxutils.escape(f), )
c = db.cursor()
c.execute("select m_username, m_identity from registrations where m_username = ? and m_updatetime > datetime('now', '-1 hour')", (f, ))
for result in c.fetchall():
    eachIdent = result[1]
    if not eachIdent:
        eachIdent = ""
    print "\t\t<identity>%s</identity>" % (xml.sax.saxutils.escape(eachIdent), )
    if f != result[0]:
        print "\t\t<registered>%s</registered>" % (xml.sax.saxutils.escape(result[0]), )
print "\t</friend>"
db.commit()

print "</result>" 
```

我想，我需要将 CHARSET 设置为 UTF-8，但我不知道该怎么做。我被谷歌搜索了，但找不到解决这个问题的好方法。请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T09:32:09.837

我已经通过客户端做到了这一点。我只是使用 EncodeBase64 并对中文数据进行编码并发送到数据库。我认为，这不是直截了当的方法。但我找不到其他方法。

# r - R将colname作为循环中的变量传递给glht函数

> ID：11980453
> 
> 赞同：4
> 
> 时间：2012-08-16T03:46:16.043
> 
> 标签：r, for-loop, linear-regression

我确定我在这里遗漏了一些明显的东西；我正在尝试使用循环将输入更改为公式，然后生成`glht`涉及该公式的公式。（`glht`=一般线性假设检验）。谢谢大家！

```
df2 <- data.frame(f1=seq(1:5),f2=seq(4,8), y=sample(x=c(0,1),size=5,replace=TRUE))
df2 <- data.frame(lapply(df2,factor)) # convert to factors

library(multcomp)

for (i in 1:(length(df2)-1)){
  fmla <- as.formula( paste("y~",colnames(df2)[i],sep=""))
  fm1 <- glm (fmla, family = binomial("logit"), data=df2)
 } 
```

这很有效；现在我正在尝试动态传递`f1`以使以下行：

```
 tuk <- glht(fm1, linfct=mcp(f1 ="Tukey")) 
```

我努力了：

```
tuk <- glht(fm1,linfct=mcp(colnames(df2)[i] ="Tukey")) 
```

但这给出了：

```
Error: unexpected '=' in " tuk <- glht(fm1,linfct=mcp(colnames(df2)[i] =" 
```

我认为这与`parse/eval`. 所以我尝试了：

```
e1 <- paste("fm1,linfct=mcp(",colnames(df2)[i],"=Tukey)",sep="")
glht(e1) 
```

给出：

```
Error in object$coefficients : $ operator is invalid for atomic vectors
Error in modelparm.default(model, ...) :  no 'coef' method for 'model' found! 
```

然后尝试：

```
e1 <- parse(text=paste("fm1,linfct=mcp(",colnames(df2)[i],"=Tukey)",sep="") )
glht(e1) 
```

给出：

```
Error in parse.default(text = paste("fm1,linfct=mcp(", colnames(df2)[i],  : 
 <text>:1:4: unexpected ','
1: fm1,
      ^ 
```

最后：

```
e1 <- as.expression(paste("fm1,linfct=mcp(",colnames(df2)[i],"=Tukey)",sep="") )
glht(e1) 
```

给出：

```
Error in UseMethod("vcov") : no applicable method for 'vcov' applied to an object of class "expression"
Error in modelparm.default(model, ...) :  no 'vcov' method for 'model' found! 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:41:19.127

去年在 SO 上提出并回答了一个基本[相同的问题。](https://stackoverflow.com/questions/8448757/how-to-use-a-character-as-attribute-of-a-function)下面的答案使用了@hadley 然后概述的策略，更详细地解释了它的工作原理。

* * *

这个问题的棘手之处在于您需要将每个列名作为唯一参数的**名称**`mcp()`传递给. 使用`do.call()`可能是实现这一目标的最佳方式。

你想要什么：

```
mcp(f1 = "Tukey") 
```

当你有一个变量时如何得到它`X="f1"`：

```
X <- "f1"
arg <- list("Tukey")
names(arg) <- X
do.call(mcp, arg) 
```

在您的情况下，您可以执行以下操作：

```
require(multcomp)
df2 <- data.frame(f1=seq(1:5),f2=seq(4,8), y=sample(x=c(0,1),
                  size=5,replace=TRUE))
df2 <- data.frame(lapply(df2,factor)) # convert to factors

nms <- head(colnames(df2), -1)
lapply(nms, 
       function(X) {
           fmla <- as.formula( paste("y~", X, sep=""))
           fm1 <- glm (fmla, family = binomial("logit"), data=df2)
           ## From here on down is the solution
           args <- list("Tukey")
           names(args) <- X
           cmp <- do.call(mcp, args)
           glht(fm1, linfct = cmp)
       }) 
```

# c# - Bundler 不包括 .min 文件

> ID：11980458
> 
> 赞同：261
> 
> 时间：2012-08-16T03:46:48.563
> 
> 标签：c#, javascript, asp.net-mvc-4, bundling-and-minification

我对 mvc4 bundler 有一个奇怪的问题，不包括扩展名为 .min.js 的文件

在我的 BundleConfig 类中，我声明

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/Scripts/jquery")
        .Include("~/Scripts/jquery-1.8.0.js")
        .Include("~/Scripts/jquery.tmpl.min.js"));            
} 
```

在我看来，我声明

```
<html>
    <head>
    @Scripts.Render("~/Scripts/jquery")
    </head><body>test</body>
</html> 
```

当它渲染时，它只渲染

```
<html>
    <head>
         <script src="/Scripts/jquery-1.8.0.js"></script>
    </head>
    <body>test</body>
</html> 
```

如果我将 jquery.tmpl.min.js 重命名为 jquery.tmpl.js（并相应地更新包中的路径），两个脚本都会正确呈现。

是否有一些配置设置导致它忽略“.min.js”文件？

* * *

## 回答 #1

> 赞同：257
> 
> 时间：2012-08-17T11:53:38.987

我最初发布的解决方案是有问题的（是一个肮脏的黑客）。正如许多评论者所指出的，调整后的行为在 Microsoft.AspNet.Web.Optimization 包中发生了变化，并且调整不再起作用。现在我完全无法使用 1.1.3 版的软件包重现该问题。

请参阅 System.Web.Optimization.BundleCollection 的来源（例如，您可以使用[dotPeek](http://www.jetbrains.com/decompiler/)），以更好地了解您将要做什么。另请阅读[Max Shmelev 的回答](https://stackoverflow.com/a/12901050/1178142)。

**原始答案**：

将 .min.js 重命名为 .js 或执行类似的操作

```
 public static void AddDefaultIgnorePatterns(IgnoreList ignoreList)
    {
        if (ignoreList == null)
            throw new ArgumentNullException("ignoreList");
        ignoreList.Ignore("*.intellisense.js");
        ignoreList.Ignore("*-vsdoc.js");
        ignoreList.Ignore("*.debug.js", OptimizationMode.WhenEnabled);
        //ignoreList.Ignore("*.min.js", OptimizationMode.WhenDisabled);
        ignoreList.Ignore("*.min.css", OptimizationMode.WhenDisabled);
    }

    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.IgnoreList.Clear();
        AddDefaultIgnorePatterns(bundles.IgnoreList);
        //NOTE: it's bundles.DirectoryFilter in Microsoft.AspNet.Web.Optimization.1.1.3 and not bundles.IgnoreList

        //...your code
     } 
```

* * *

## 回答 #2

> 赞同：180
> 
> 时间：2012-10-15T17:39:36.430

微软暗示了以下行为（我更喜欢在我的项目中遵循它）：

## 简洁版本

1.  您在同一文件夹下的项目中同时拥有调试版本和缩小版本的脚本：
    *   **脚本.js**
    *   **脚本.min.js**
2.  您只将**script.js**添加到代码中的包中。

因此，您将**自动**将**script.js**包含在**DEBUG**模式中，并将**script.min.js**包含在**RELEASE**模式中。

## 长版

你也可以有**.debug.js**版本。在这种情况下，该文件包含在 DEBUG 中的以下优先级中：

1.  **script.debug.js**
2.  **脚本.js**

在发布：

1.  **脚本.min.js**
2.  **脚本.js**

## 笔记

顺便说一句，在 MVC4 中拥有**.min**版本的脚本的唯一原因是无法自动处理缩小版本的情况。例如以下代码不能自动混淆：

```
if (DEBUG) console.log("Debug message"); 
```

在所有其他情况下，您可以只使用脚本的调试版本。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-12-10T16:20:58.217

如果您只有文件的缩小版本，我发现的最简单的解决方案是复制缩小文件，从复制的文件名中删除 .min ，然后在捆绑包中引用非缩小文件名。

例如，假设您购买了一个 js 组件，他们给了您一个名为 some-lib-3.2.1.min.js 的文件。要在捆绑包中使用此文件，请执行以下操作：

1.  复制 some-lib-3.2.1.min.js 并将复制的文件重命名为 some-lib-3.2.1.js。在项目中包含这两个文件。

2.  引用包中的非缩小文件，如下所示：

    ```
    bundles.Add(new ScriptBundle("~/bundles/libraries").Include(
        "~/Scripts/some-lib-{version}.js"
    )); 
    ```

仅仅因为名称中没有“min”的文件实际上被缩小了，不应该引起任何问题（除了它本质上不可读的事实）。它仅在调试模式下使用，并作为单独的脚本写出。当不处于调试模式时，预编译的 min 文件应包含在您的包中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-07-15T11:16:50.473

我找到了一个至少在 MVC5 中有效的好解决方案，你可以使用`Bundle`而不是`ScriptBundle`. `ScriptBundle`在这种情况下，它没有我们不喜欢的智能行为（忽略 .min 等）。在我的解决方案中，我使用`Bundle`带有 .min 和 .map 文件的 3d 派对脚本，并`ScriptBundle`用于我们的代码。我没有注意到这样做的任何缺点。要使其以这种方式工作，您需要添加原始文件，例如 angular.js，它将在调试中加载 angular.js，并在发布模式下捆绑 angular.min.js。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-04-20T11:54:39.650

要渲染`*.min.js`文件，您必须禁用`BundleTable.EnableOptimizations`，这是适用于所有包的全局设置。

如果您只想为特定包启用优化，您可以创建自己的`ScriptBundle`类型，在枚举包中的文件时临时启用优化。

```
public class OptimizedScriptBundle : ScriptBundle
{
    public OptimizedScriptBundle(string virtualPath)
        : base(virtualPath)
    {
    }

    public OptimizedScriptBundle(string virtualPath, string cdnPath)
        : base(virtualPath, cdnPath)
    {
    }

    public override IEnumerable<BundleFile> EnumerateFiles(BundleContext context)
    {
        if (context.EnableOptimizations)
            return base.EnumerateFiles(context);
        try
        {
            context.EnableOptimizations = true;
            return base.EnumerateFiles(context);
        }
        finally
        {
            context.EnableOptimizations = false;
        }
    }
} 
```

使用`OptimizedScriptBundle`而不是`ScriptBundle`用于应始终使用缩小文件的捆绑包，无论是否存在非缩小文件。

用于 ASP.NET MVC 的 Kendo UI 示例，它仅作为缩小文件的集合分发。

```
bundles.Add(new OptimizedScriptBundle("~/bundles/kendo")
        .Include(
            "~/Scripts/kendo/kendo.all.*",
            "~/Scripts/kendo/kendo.aspnetmvc.*",
            "~/Scripts/kendo/cultures/kendo.*",
            "~/Scripts/kendo/messages/kendo.*")); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-15T06:04:54.537

就我而言，我使用的是（太棒了！）Knockout.js 库，它作为 Debug/Non 版本提供：

```
"~/Scripts/knockout-{Version}.js"
"~/Scripts/knockout-{Version}.Debug.js" 
```

为了完成这项工作，我在我的 Bundle 中包含了“Knockout-{Version}.js”（非调试）并获得了 .debug。调试模式下的 js 文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-09T05:56:49.520

一种简单的方法是重命名 .min 文件，例如您有 abc.min.css，而不是将此文件重命名为 abc_min.css 并将其添加到您的包中。我知道这不是正确的方法，而只是一个临时解决方案。谢谢和快乐的编码。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-19T20:47:08.377

Bundler 有很多好处[检查这个页面](http://go.microsoft.com/fwlink/?LinkId=254725) **但是**：

Microsoft MVC4 平台认为您至少有每个脚本或样式包的缩小版本和未缩小版本（也可以使用其他文件，如 Debug 和 vsdoc）。所以我们在只有这些文件之一的情况下会遇到麻烦。

您可以永久更改 web.config 文件中的调试状态以处理输出：

```
<compilation debug="false" targetFramework="4.0" /> 
```

查看输出变化！文件过滤已更改。为了达到目的，我们必须改变会改变应用程序逻辑的忽略大小写过滤！

* * *

## 回答 #9

> 赞同：-21
> 
> 时间：2012-12-11T05:29:42.163

伙计们，我只会保留它，直到微软一起行动

试试这个

在 RegisterBundles 中为 Kendo 创建这个包

```
bundles.Add(new StyleBundle("~/Content/kendo/css").Include(
                    "~/Content/kendo/2012.3.1121/kendo.common.min.css",
                     "~/Content/kendo/2012.3.1121/kendo.dataviz.min.css",
                      "~/Content/kendo/2012.3.1121/kendo.blueopal.min.css"
 )); 
```

在 _Layout.cshtml 中输入：

```
@if (HttpContext.Current.IsDebuggingEnabled)
 { 
<link href="@Url.Content("~/Content/kendo/2012.3.1121/kendo.common.min.css")"      
rel="stylesheet"  type="text/css" />
<link href="@Url.Content("~/Content/kendo/2012.3.1121/kendo.dataviz.min.css")" 
rel="stylesheet" type="text/css" />   
<link href="@Url.Content("~/Content/kendo/2012.3.1121/kendo.blueopal.min.css")"    
rel="stylesheet" type="text/css" />
 }
 else
 {
     @Styles.Render("~/Content/kendo/css")   
 } 
```

通过这种方式，我们在生产中获得了最好的捆绑包，并在调试中获得了参考

当微软修复他们的 MVC 4 代码时修复它

# android - 一个 Activity 应该显示多少视图？

> ID：11980459
> 
> 赞同：0
> 
> 时间：2012-08-16T03:46:48.217
> 
> 标签：android, android-view

我知道在 XML 中，视图很昂贵，理想情况下您应该尽可能少地争取。但在我的情况下，我正在以一种方式设计我的布局，以至于我不得不有很多视图，接近 80 个。Eclipse 给了我一个警告，所以我删除了一些视图，但我只能做这么多，因为我的实现至少需要 48 个视图，并且不包括一些额外的东西。所以我的问题是我是否真的应该找到一种更简单的方法，或者它是否可以。真正应该最大的实际数字是多少？

**XML 文件**

* * *

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<TextView 
        android:id="@+id/top_bar_date_display"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="July 1, 2012"
        android:background="#696969"/>
<ScrollView 
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    >
<RelativeLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/day_view_floaty_holder"
    android:background="#000000">
    <GridLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnCount="1" >

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >
            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="12\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal"
                android:layout_marginBottom="1dp" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="1\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>
        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="2\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="3\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="4\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="5\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="6\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="7\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="8\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="9\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView 
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="10\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="11\nAM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >
            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="12\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="1\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="2\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="3\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="4\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="5\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="6\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="7\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="8\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="9\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="10\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

        <LinearLayout 
            android:layout_width="match_parent"
            android:layout_height="60dp"
            android:orientation="vertical"
            android:background="#ffffff"
            android:layout_marginBottom="1dp" >

            <TextView
                android:layout_width="20dp"
                android:layout_height="60dp"
                android:text="11\nPM"
                android:background="#bebebe"
                android:textSize="10dp"
                android:gravity="center_horizontal" />
        </LinearLayout>

    </GridLayout>

    <!-- THIS GRIDLAYOUT IS WHERE THE EVENTS WILL BE PLACED-->
    <GridLayout 
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:columnCount="1" >
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_0"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_1"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_2"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_3"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_4"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_5"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_6"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_7"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_8"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_9"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_10"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_11"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_12"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_13"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_14"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_15"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_16"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_17"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_18"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_19"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_20"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_21"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_22"
            android:orientation="horizontal" ></LinearLayout>
        <LinearLayout 
            android:layout_height="61dp"
            android:layout_width="match_parent"
            android:layout_marginLeft="20dp"
            android:id="@+id/day_view_23"
            android:orientation="horizontal" ></LinearLayout>

    </GridLayout>

</RelativeLayout>
</ScrollView> 
```

* * *

我可能应该解释一下代码翻译成的背后的逻辑。我基本上需要一个 24 行的 GridLayout，以及另一个漂浮在其上方的 24 行的 GridLayout。我这样做是为了分离我需要漂浮在第一个 GridLayout 之上的内容。它假设是用于日历应用程序的日视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:21:53.820

根据您的 xml 文档，您可以使用 ListView 和 ListAdapter 轻松解决此问题。

您可以将该 xml 文档压缩为一个包含“top_bar_date_display”TextView 和 ListView 的主 xml 文件。其次，您将拥有一个包含列表行项目的 xml 布局文件。ListAdapter 然后将设置行的详细信息。然后，您实现一个列表适配器，其中包含代表您需要的每一行的自定义对象数组。列表适配器根据数组中的位置设置 getView 方法中的文本。

列表行可能如下所示：

```
<LinearLayout
    android:id="@+id/rowItem"
    android:layout_width="match_parent"
    android:layout_height="60dp" >

    <TextView
        android:layout_width="20dp"
        android:layout_height="match_parent"
        android:background="#bebebe"
        android:layout_marginBottom="1dp"
        android:gravity="center_horizontal"
        android:text="[Replaced by ListAdapter]"
        android:textSize="10dp" />

    <LinearLayout
        android:id="@+id/event1"
        android:layout_width="fill_parent"
        android:layout_height="match_parent"
        android:layout_marginBottom="1dp" />

</LinearLayout> 
```

编辑：

如果列表视图没有分隔符，我们将行视图的子视图设置为样式，以便它们创建一个假分隔符，然后列表适配器可以为第 1 行设置“event1”的宽度，并在行中为“event1”使用相同的宽度2\. 由于 'event1' 位于两行之间，您可以选择 row1 中的 'event1' 不显示（假）分隔线，并且因为它们具有相同的背景，所以它们看起来就像是一个对象，你必须做一些不过，对于压制状态等来说是愚蠢的东西。

ListAdapter 还可以通过 rowItem.addView(new LinearLayout) 动态创建要添加的新事件。只需要跟踪所有事件、它们跨越的行和任何冲突。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:42:57.257

正如我所说，我会使用 a`ListView`来显示数据以避免产生太多视图。首先，我将创建一个类来表示您在列表中显示的用户事件：

```
private static class Event {

        public int startHour;
        public int hours = 1;
        public String name;
        public String date;
        public boolean isEmptyEvent = true;

        public Event(int startHour, int hours, String name, String date,
                boolean isEmptyEvent) {
            this.startHour = startHour; 0 to 23 (the method getStartHour makes this pretty)
            this.hours = hours; // how many this event requires(default 1)
            this.name = name;
            this.date = date;
            this.isEmptyEvent = isEmptyEvent;
        }

        public String getStartHour() {
            // should optimize this method so you don't end up creating String
            // after String(char array?)!
            if (startHour < 10) {
                return "0" + startHour + ":00";
            }
            return String.valueOf(startHour) + ":00";
        }
    } 
```

然后我会解析我在`Events`对象中的数据（我不知道你在数据库中保存了什么，所以这只是猜测）：

```
public SparseArray<Event> getData(String date) {
        // here you get the data from the database and create Events object for
        // those dates
        SparseArray<Event> data = new SparseArray<Event>(); // for efficiency
                // add some random events
        data.put(3, new Event(3, 1, "Breackfast", date, false));// one event at 3 taking 1 hour
        data.put(14, new Event(14, 3, "Lunch", date, false));// one event at 14 taking 3 hour
        data.put(20, new Event(20, 2, "Dinner", date, false));// one event at 20 taking 2 hour
        return data;
    } 
```

然后在适配器中，我将用空对象填充其余的空条目（用户尚未设置任何内容）`Events`并将其显示给用户。由于代码有点大，我不会在这里发布，而是您可以在这里找到完整的活动+布局[https://gist.github.com/3370107](https://gist.github.com/3370107)

# django - Dajaxice：无法让 Dajaxice 正常工作

> ID：11980462
> 
> 赞同：2
> 
> 时间：2012-08-16T03:48:21.110
> 
> 标签：django, dajaxice, dajax

我知道，我知道，您首先想到的是在线和 dajaxproject.com 上查看所有说明

好吧，我已经检查并检查并重新运行此安装，但我无法弄清楚问题所在。我认为这与我使用的 Dajaxice 版本和安装说明的版本有关，但通常缺少这些细节。

在此过程中，我已完成所有设置以完成一项非常简单的任务。从 IP:8000（即 1.2.3.4:8000）加载网页并让该页面加载一个简单的 html 表单按钮。一旦按下该按钮，页面就会向服务器发送一条消息（使用 dajaxice），一旦它返回，就会弹出一个警告框，证明 dajaxice 安装正在运行。

所以我有：

*   通过从此处获取 zip 安装 Dajaxice（和 dajax）：github [dot] com/jorgebastida/django-dajaxice/
*   更改了基本 Django 项目中的所有内容以遵循本教程中的详细信息：http: [//django-dajaxice.readthedocs.org/en/latest/installation.html](http://django-dajaxice.readthedocs.org/en/latest/installation.html)
*   我已经设置了 ajax.py 和 index.html 的所有细节来处理这个例子：django-dajaxice [dot] readthedocs [dot] org/en/latest/quickstart.html

PS 对不起“[dot]”，但作为一个新注册用户，他们将您限制为每个帖子 2 个，所以我试图为您提供可点击的最佳链接。

我难住了。我一直在尝试很多不同的东西，但可用的文档似乎很零星。这一定是一些简单的事情，我搞砸了，但我似乎找不到它。

**目前，“打个招呼！” 按钮出现在屏幕上，但是当您按下它时没有任何反应。有任何想法吗？**

**这是我在这里使用的 Django 项目的 zip 文件的链接：[https ://docs.google.com/open?id=0B5rzYk6W5HlrYk9veVRfM3JkTGc](https://docs.google.com/open?id=0B5rzYk6W5HlrYk9veVRfM3JkTGc)**

按照我的组织方式，DjangoAjax 只是包含 Django 项目的文件夹。ajax_prac 是项目，实践是应用程序。此外，您还会看到一个名为 django_media 的文件夹......这很容易解释，它只包含我的 Django 项目的所有“媒体”，包括 jquery.js 和 jquery.dajax.core.js

如果我在代码中弄脏了一些细节，与安装指南相反，我深表歉意。我已经经历了很多次迭代，所以我很可能在发布这篇文章时忘记了改变一些东西。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T06:41:47.540

所有文档的怪异之处可能与我昨天（8 小时前）发布的新版本有关。可能您正在使用旧版本的 dajaxice 阅读新文档。

我已经发布了 django-dajaxice (0.5) 和 django-dajax (0.9.1)，它们都与最新版本的 Django (1.4.1) 完全兼容。

django-dajaxice：[http ://pypi.python.org/pypi/django-dajaxice django-dajax：](http://pypi.python.org/pypi/django-dajaxice) [http](http://pypi.python.org/pypi/django-dajax) ://pypi.python.org/pypi/django-dajax

对于这个版本，我还重写了这两个文档并将它们托管在 readthedocs 上。此外，[http](http://dajaxproject.com) ://dajaxproject.com 代码现在是开源的，因此每个人都可以阅读代码并了解 dajaxice 在生产中的工作方式。

django-dajaxice：[http ://django-dajaxice.readthedocs.org/en/latest/ django-dajax：](http://django-dajaxice.readthedocs.org/en/latest/) [http](http://django-dajax.readthedocs.org/en/latest/) : //django-dajax.readthedocs.org/en/latest/ 示例项目：[https ://github.com /jorgebastida/dajaxproject.com](https://github.com/jorgebastida/dajaxproject.com)

[您能否按照新的安装步骤（非常相似的http://django-dajaxice.readthedocs.org/en/latest/installation.html](http://django-dajaxice.readthedocs.org/en/latest/installation.html) ）升级到 django-dajaxice (0.5)并在此处发布您可能遇到的任何回溯/问题？

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T06:25:01.780

在您的示例代码中（DjangoAjax / ajax_prac / templatedirectory / practice / index.html）：

```
<input type="button" value="Send message to server!"
onclick="Dajaxice.ajax.sayhello(my_js_callback);"> 
```

应该：

```
<input type="button" value="Send message to server!"
onclick="Dajaxice.ajax_prac.practice.views.sayhello(my_js_callback);"> 
```

即它必须引用包含您注册的 Dajaxice 视图的 Python 模块。根据您的示例代码， ajax_prac.practice.views 存在，而 ajax.sayhello 不存在。

此外，Python 模块必须以“Dajaxice”开头（这可能是一个重要的混淆来源）。

# cucumber - 使用 Cucumber，我如何指定每一步后必须保持的条件？

> ID：11980465
> 
> 赞同：0
> 
> 时间：2012-08-16T03:48:27.823
> 
> 标签：cucumber, bdd

我是 Cucumber 和 BDD 的新手。我想知道是否有一种好方法可以指定每个步骤后必须检查的条件。例如，假设我想确保特定变量 x 在每一步之后都等于 5。我不想写这样的场景：

```
When something happens
Then x should be 5

When something else happens
Then x should be 5

And so on... 
```

有没有更少重复的方法来实现这一点？我知道背景和钩子，但这些似乎是用于设置环境而不是验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:17:57.253

使用 AfterStep-hook（参见[https://github.com/cucumber/cucumber/wiki/Hooks](https://github.com/cucumber/cucumber/wiki/Hooks)）。此代码将在*每*一步后运行。

或者，您可以使用标签装饰场景，然后在标记场景中的步骤之后运行挂钩

# sitecore - 创建新项目时的站点核心默认语言

> ID：11980467
> 
> 赞同：0
> 
> 时间：2012-08-16T03:48:52.410
> 
> 标签：sitecore, sitecore6

我正在尝试设置 sitecore，以便当用户创建新项目时，它们会以某种语言（en-AU）创建。我已将“contentLanguage”设置为该语言，并且在内容树中创建任何内容时，它确实以该语言创建它。但是，如果他们去创建一个模板或类似的东西（在内容树之外），它仍然会在“en”中创建它。是否有 web.config 设置来设置它，以便在“en-AU”中创建任何创建的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T12:12:45.793

听起来您需要实现一个事件处理程序或管道处理器来复制您正在使用的语言创建的任何内容并将其自动填充到该`en-AU`语言中。这是带有示例代码的博客文章：

[跨语言复制 Sitecore 项目](http://geekswithblogs.net/amaniar/archive/2010/10/25/copying-sitecore-items-across-languages.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:30:22.933

您应该能够使用web.config 中站点定义`contentLanguage`上的设置为新项目设置默认语言。`shell`它位于：

```
<sitecore>
    <sites>
        ...
        <site name="shell" contentLanguage="en-AU" ... 
```

# facebook - 查询 Facebook 上好友分享的所有链接的最快方式

> ID：11980469
> 
> 赞同：0
> 
> 时间：2012-08-16T03:49:02.477
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-fql, facebook-php-sdk

我正在尝试获取过去几天用户的 facebook 朋友共享的最新链接。假设在过去 7 天：

使用 FQL，我一次最多可以为 20 个朋友抓取这个：

```
$fql = "SELECT link_id, owner, created_time, title, summary, url, image_urls FROM link WHERE owner IN (select uid2 from friend where uid1 = me() LIMIT 20) AND created_time >= $_7ago"; 
```

如果我将好友计数限制从 20 设置为更高的值，则查询会崩溃。我目前的解决方案是重复这个查询，在一个循环中将 1000 个朋友分成 20 个一组。这确实有效，但运行时间超过五分钟。

我也尝试过以这种方式进行多查询（速度并没有提高）：

```
"links":"select uid2 from friend where uid1 = me() LIMIT 20",
"stats":"SELECT owner, owner_comment, title, summary, url, image_urls FROM link WHERE owner IN (select uid2 from #links) AND created_time  >= \"' . $_7ago . '\"" 
```

有更快的替代方案/解决方案吗？

[http://www.pixable.com/](http://www.pixable.com/) <- 设法在不到 3 秒的时间内提取朋友分享的每月照片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:28:37.957

多查询也可用于触发多个不相关的查询。首先获取朋友的 uid，然后通过将 uid 分片成块来创建单独的查询，并立即触发所有查询。在 js sdk 中，这看起来像：

```
FB.api( {
    method: 'fql.multiquery',
    queries: [
            'SELECT owner, owner_comment, title, summary, url, image_urls FROM link WHERE owner IN ('+chunk0+') AND created_time  >= '+time,
            'SELECT owner, owner_comment, title, summary, url, image_urls FROM link WHERE owner IN ('+chunk1+') AND created_time  >= '+time,
            'SELECT owner, owner_comment, title, summary, url, image_urls FROM link WHERE owner IN ('+chunk2+') AND created_time  >= '+time
     ]}, function(results) {
     console.log(results); // array with the individual query results
         var query_results = null;
         var row = null;
         for (var i = 0, l = results.length; i < l; ++i) {
             var query_results = results[i];
             for (var i2 = 0, l2 = query_results.fql_result_set.length; i2<l2; ++i2) {
                 row = query_results.fql_result_set[i2];
                 console.log(row);
                 // at this point row variable contains individual rows from the link table
                 // with the selected fields
                 console.log(row.owner, row.title); // should log something useful
             }
         }
     }
); 
```

[文档指出](https://developers.facebook.com/docs/technical-guides/fql/#multi)这应该比使用批处理 api 接口更快：

> 此方法也比使用 batch.run 运行一系列 fql.query 调用具有更好的性能。

在萤火虫中，第一个`console.log(results)`应该显示类似于此的内容（实际 id 因空间限制而被删除/截断）： ![Firebug 控制台输出结果](../Images/aad8198a1a2df0caa639b440a6ac3acf.png)

# facebook - 一些 facebook 帐户无法通过 facebook ios sdk 登录

> ID：11980470
> 
> 赞同：1
> 
> 时间：2012-08-16T03:49:21.790
> 
> 标签：facebook, login, facebook-ios-sdk

我们的 ios 应用程序使用 Facebook 登录，最近我们发现一些 Facebook 帐户无法登录。服务器给我们以下响应：

```
{"error":{"message":"An unexpected error has occurred. Please retry your request
           later.","type":"OAuthException","code":2}} 
```

使用 facebook 访问令牌调试器并输入我们从 gdb 中找到的访问令牌后：

[https://developers.facebook.com/tools/debug/access_token?q=AAABZCwfIHg0IBAFLqDpQG2ZCYlxGWS0bBXvIwypOxIJ7q8VPNtcOo0eE2LiZBNT9YdWD18prYvhw78Cq7BPE4yhkxrZCBEWnxjM5ef35lwZDZD](https://developers.facebook.com/tools/debug/access_token?q=AAABZCwfIHg0IBAFLqDpQG2ZCYlxGWS0bBXvIwypOxIJ7q8VPNtcOo0eE2LiZBNT9YdWD18prYvhw78Cq7BPE4yhkxrZCBEWnxjM5ef35lwZDZD)

它表明“用户 ID”是未知的。

然后我们尝试另一个可以成功登录的 Facebook 帐户，它在访问令牌调试器中显示正确的“用户 ID”。

因为只有部分账户有问题，我们认为是账户相关的问题。我们已经对其进行了搜索并更改了帐户的某些设置，但没有任何帮助。

# c++ - 为什么这个 const 参数不能匹配非类型模板参数？

> ID：11980475
> 
> 赞同：0
> 
> 时间：2012-08-16T03:50:52.337
> 
> 标签：c++, gcc, constants, constant-expression

使用 gcc 编译下面的代码时，出现错误：*“i”不能出现在常量表达式中。*

为什么是这样？

```
#include <iostream>

using namespace std;
template<int p>
class C
{
public:
    void test();
};

template<int p>
void C<p>::test()
{
    p = 0;
}

char const *const p = "hello";
int main()
{
    const int i = (int)p;
    C<i> c;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T03:56:06.117

该变量`i`在运行时不可变，因为它是`const`，但它不是“常量表达式”，因为它不在编译时进行评估。

`(int)p;`是一个`reinterpret_cast`。整型常量表达式不能有`reinterpret_cast`. 明确禁止（§5.19/2）：

> *条件表达式*是*核心常量表达式*，除非它涉及以下之一作为潜在评估的子表达式（第 3.2 节），但逻辑与（第 5.14 节）、逻辑或（第 5.15 节）和条件（第 5.16 节）操作的子表达式未评估的不被考虑 [*注意：*重载的运算符调用函数。-<em>结束注释]：
> 
> — [...]
> 
> — a `reinterpret_cast`（第 5.2.10 节）；
> 
> — [...]

# iphone - 在 xcode 中保存/共享字符串

> ID：11980477
> 
> 赞同：0
> 
> 时间：2012-08-16T03:51:34.800
> 
> 标签：iphone, ios, xcode, ipad, storyboard

我需要在我的应用程序中保存一个字符串，但我不想创建一个仅用于保存 1 个字符串的 plist 有没有其他方法可以做到这一点？我使用故事板。我试过segue，但没有用

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
   {
   if ([[segue identifier] isEqualToString: @"modal"])
   {
      ViewController *vc = (ViewController *)[segue destinationViewController];
      vc.subject = self.subject;
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:05:01.850

“我需要在我的应用程序中保存一个字符串”是什么意思？您是否只想将字符串传递给目标 ViewController？

如果是这种情况，您可以在目标 ViewController 中定义一个新属性（假设您知道它是哪一个）

```
@property (nonatomic, strong) NSString *myProperty; 
```

接着

```
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
   {
   if ([[segue identifier] isEqualToString: @"modal"])
   {
      [segue.destinationViewController setMyProperty:self.myProperty];
   }
} 
```

如果您希望您的字符串可以从应用程序中的任何位置访问，您可以很容易地将其保存到用户默认值：

```
[[NSUserDefaults standardUserDefaults]setObject:myProperty forKey:@"myPropertyKeyName"]; 
```

您可以稍后取回：

```
NSString *mySavedProperty= [[NSUserDefaults standardUserDefaults]stringForKey:@"myPropertyKeyName"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:09:44.170

如果您可以在项目中的任何位置使用字符串，只需像这样创建一个外部变量。

在 AppDelegate.h

```
extern NSString *stringObject; 
```

在 AppDelegate.m

```
NSString *stringObject; 
```

您可以在项目中的任何位置使用 stringObject。

# contacts - 在 iPhone（也 Android）和服务器之间同步联系人

> ID：11980478
> 
> 赞同：1
> 
> 时间：2012-08-16T03:51:42.883
> 
> 标签：contacts, sync, vcf-vcard, tlv

我有麻烦了，需要你的帮助。

* * *

第一个问题：

我的 IOS 应用程序必须向/从 Web 服务器发送/接收数据。使用TCP定义的服务器，数据格式为TLV；我以前从未使用过 TLV，也不知道如何解决这个问题。

至于 TCP，我决定使用 cocoaAsyncSocket，处理 TCP 传输很简单；但是我发送/接收数据都是（NSData*）格式，我不知道服务器是否可以正确解码。

* * *

第二个问题：

我也在尝试在本地客户端和服务器之间同步联系人；本地客户端将是 IOS 应用程序和 Android 应用程序。通过我决定使用 vCard 作为联系人的数据格式，但是来自 iPhone 的 vCard 包含一些 Android 中不包含的项目（例如 RelatedName）；当我使用 vCard 时，有一些数据丢失，我无法解决这个问题。有什么好的建议吗？

来人帮帮我。此致。

==========================

最后，我决定使用 cocoaAsyncScoket 来传输数据，并使用 SQLite 来存储联系人的所有数据；而且似乎不可能避免数据丢失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T06:05:46.060

我完成了。

我使用 GCDAsyncSocket 库来发送和接收数据；至于 TLV，只需按照自定义规则按顺序发送原始字节即可。

[github中的库](https://github.com/robbiehanson/CocoaAsyncSocket)

# ruby-on-rails - ruby 中的字符串处理使我的工作停止

> ID：11980484
> 
> 赞同：0
> 
> 时间：2012-08-16T03:53:11.253
> 
> 标签：ruby-on-rails, ruby

我的角色集合中有很多名字。在这里，我想从角色集合中带入我的所有名字。

```
 <% @all= Role.all %>
    <% @all.each do |all|%>
    <%= all.name%>
    <% end %> 
```

这给出了 Admin Ram Manager Prem 中的格式但我希望我的输出为 [“Admin”、“Ram”、“Manager”、“Prem”]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:09:37.213

你可以试试这个...

```
[<%= '"' + @roles.collect {|r| r.name}.join('", "') + '"' %>] 
```

我会在你的控制器中分配@roles ...

这样做会将“您选择的角色”与“如何显示角色”分开，从而更容易测试。

如果您需要确保没有换行符，[请将 css 空白设置为 nowrap](http://www.w3schools.com/cssref/pr_text_white-space.asp)（使用 nbsp 处理起来有点笨拙）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:16:21.713

```
<%= Role.all.collect(&:name) %> 
```

# entity-framework - 我有一个有点复杂的模型，关于 EF 级联删除

> ID：11980485
> 
> 赞同：0
> 
> 时间：2012-08-16T03:53:17.807
> 
> 标签：entity-framework, cascade

代码优先，模型如下图：

![](../Images/8b109fe575a114d1aa530b168ab0dbab.png)

```
public class Post
{
    public int Id { get; set; }
    public string title { get; set; }
    public int fid { get; set; }
    public int uid { get; set; }
    public virtual lnk lnk { get; set; }
    public virtual user user { get; set; }
    public virtual ICollection<img> imgs { get; set; }
}

public class lnk 
{
    public int Id { get; set; }
    public string lnkman { get; set; }
}

public class model1:Post
{
    public string content { get; set; }
}

public class user
{
    public int uid { get;set; }
    public string Name {get;set;}
    public virtual ICollection<Post> posts { get; set; }
}

public class img
{
    public int id { get; set; }
    public string imgUrl { get; set; }
    public int pid { get; set; }
    public virtual Post post { get; set; }
}

public class PostContext : DbContext
{
    public DbSet<Post> posts { get; set; }
    public DbSet<user> users { get; set; }
    public DbSet<img> imgs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Post>().HasKey(i=>i.Id);
        modelBuilder.Entity<lnk>().HasKey(i => i.Id);
        modelBuilder.Entity<Post>().HasRequired(i => i.lnk).WithRequiredPrincipal();
        modelBuilder.Entity<Post>().ToTable("Post");
        modelBuilder.Entity<lnk>().ToTable("Post");

        modelBuilder.Entity<model1>().ToTable("model1");

        modelBuilder.Entity<user>().HasKey(i => i.uid).ToTable("user");

        modelBuilder.Entity<user>().HasMany(i => i.posts)
                                  .WithRequired(i => i.user)
                                  .HasForeignKey(i =>i.uid).WillCascadeOnDelete(false);

        modelBuilder.Entity<img>().HasKey(i => i.id).ToTable("img");

        modelBuilder.Entity<Post>().HasMany(i => i.imgs)
                                   .WithRequired(i => i.post)
                                   .HasForeignKey(i => i.pid)
                                   .WillCascadeOnDelete(false);
    }
} 
```

add 和 list 方法运行良好。但是像这样的delele：

```
using (var db = new PostContext())
{
    //model1 ToDel = new model1{ Id=id };
    //b.Entry(ToDel).State = System.Data.EntityState.Deleted;
    var ToDel = db.users.Single(i => i.uid == id);

    db.users.Remove(ToDel);
    db.SaveChanges();
    return id + "DE: well done!" ;
} 
```

> System.Data.SqlClient.SqlException: DELETE statement with REFERENCE constraint "FK_dbo.Post_dbo.user_uid" 冲突。冲突发生在数据库 "jefunfl"，表 "dbo.Post"，列 'uid'

我想删除带有用户帖子的用户，以及带有帖子 imgs 的帖子。我怎样才能做到这一点？有人可以提供任何提示吗？

顺便说一句，我的中文英语可能很有趣。对不起。这是我的第一篇文章，但我不是新人。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:24:30.550

绕过一整天，我找到了。并感谢您回答我。

1：我删除 WillCascadeOnDelete() 方法，所以让 ef 按约定来做。

2：我发现，当我删除帖子时，我不能像 ToDel = db.posts.Single(i => i.Id == id) 这样的语句直接删除，但是这个： ToDel = db.posts.Include (i=>i.lnk).Single(i => i.Id == id) post 和 lnk 有一种称为分表的关系。两者都映射到同一个 post 表。删除帖子时，EF 可以按照约定自动删除 post.imgs。删除用户时会发生什么？所以我明白了。我的代码打击：

```
 var ToDel = db.users.Include(i => i.posts)
                                .Single(i => i.uid == id);
            var PostToDel = db.posts.Include(i => i.lnk)
                              .Single(i => i.Id == ToDel.uid);
            db.posts.Remove(PostToDel);
            db.users.Remove(ToDel);
            db.SaveChanges(); 
```

这会很好用。甚至不完美。但它可以毫无例外地做我想做的事。

最后，最大的问题是post class和lnk class有“分表”。删除帖子时，我们应该明确包括。

我不知道你能不能理解我，我的英语很丑。我有勇气是愚蠢的。感谢你。我很开心

# java - 如何从单个 xml 文件填充多个 sqlite 表？

> ID：11980486
> 
> 赞同：0
> 
> 时间：2012-08-16T03:53:30.113
> 
> 标签：java, android, xml, sqlite

我已经能够成功地将数据引入单个表，但需要为多个表引入数据。是否可以从单个 xml 文件中执行此操作？

```
 //Open xml file
    XmlResourceParser _xml = res.getXml(R.xml.animals_records);
    try
    {
        //Check for end of document
        int eventType = _xml.getEventType();
        while (eventType != XmlPullParser.END_DOCUMENT) {
            //Search for record tags
            if ((eventType == XmlPullParser.START_TAG) &&(_xml.getName().equals("record"))){
                //Record tag found, now get values and insert record
                String _Title = _xml.getAttributeValue(null, TITLE);
                String _Color = _xml.getAttributeValue(null, COLOR, 0);
                _Values.put(TITLE, _Title);
                _Values.put(COLOR, _Color);
                db.insert(TABLENAME1, null, _Values);             
            }
            if ((eventType == XmlPullParser.START_TAG) &&(_xml.getName().equals("trees"))){
                //Record tag found, now get values and insert record
                String _Title = _xml.getAttributeValue(null, FAMILY);
                String _Color = _xml.getAttributeValue(null, SPECIES, 0);
                _Values.put(FAMILY, _Title);
                _Values.put(SPECIES, _Color);
                db.insert(TABLENAME2, null, _Values);             
            }
            eventType = _xml.next();
        }
    } 
```

使用如下所示的 XML：

```
 <animals>
        <record title="Dog" color="Brown" />
        <record title="Cat" color="Gray" />
        <record title="Rabbit" color="White" />
        <record title="Spider" color="Black" />
        <trees family="Hardwood" species="Oak" />
        <trees family="Soft" color="Pine" />
     </animals> 
```

有任何想法吗？明显的缺陷？

# php - PHP代码中的CSS弄乱了IE9中的布局

> ID：11980490
> 
> 赞同：0
> 
> 时间：2012-08-16T03:54:11.500
> 
> 标签：php, javascript, css, internet-explorer-9

我正在设计一个有用户的网站。根据会话，主页将显示“登录”或“注销”按钮。我尝试使用以下代码来做到这一点：

```
<?php
session_start();
if(isset($_SESSION['user'])) {

?>
<style>

    #login {display: none;}
    #logout {display: block;}

</style>
<?

} else {

?>
<style>

    #logout {display: none;}
    #login {display: block;}

</style>
<?

} 
```

?>

除 IE9 外，所有浏览器都能完美运行；在 IE 布局混乱，图像不显示，它们的大小发生变化等。我可以使用哪些其他代码？我可以使用任何建议，甚至可能是 javascript。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:06:52.443

感谢上面的评论，我通过`session_start()`在'html'标签内（特别是在'body'标签内）复制上面的代码（除了）解决了这个问题。以前，该代码位于文件的开头，位于“html”标签之外。

# c# - 在c#中释放其他进程使用的文件

> ID：11980494
> 
> 赞同：0
> 
> 时间：2012-08-16T03:55:13.637
> 
> 标签：c#, winapi, file-io, process

我想在软件中记录：哪些进程正在访问文件以及如何强制释放文件以防止其他进程访问（API 窗口是否可能？）请注意，您可以使用记事本打开文件并删除此文件在没有杀死记事本的磁盘中。但是对于像word excel这样的其他程序，这是不可能的。所以有一些程序可以锁定其他资源。这意味着你可以释放但是如何？其次，对于某些进程，它们可能会在您空闲时崩溃，但在我的情况下，只有自定义服务可以访问这些文件谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:04:40.387

请看

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/37dc9843-2583-41fc-8260-b78183aa4bed/](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/37dc9843-2583-41fc-8260-b78183aa4bed/)

这可能会有所帮助。

# asp.net - 2 个验证器一次验证一个

> ID：11980496
> 
> 赞同：3
> 
> 时间：2012-08-16T03:55:46.287
> 
> 标签：asp.net, validation

嗨，我有一个更改密码页面。

我有2`textboxes`和.`New Password``Confirm Password`

两者都有一个`requiredFieldValidators`。

和一个`compareValidator`。

但是当我输入第一个字段`New Password`、第二个文本框`requiredFieldValidator`并`CompareValidator`同时显示错误消息时会发生什么。

我只想显示`requiredFieldValidator`并且只有当该验证器返回 true 时，我才想验证`compareValidator`.

我怎样才能做到这一点。以下是我的代码。

```
 <table class="editAccTable">
            <tr>
                <td>
                    New Password<br />                      
                    <asp:TextBox ID="txtNewPwd" runat="server" TextMode="Password" Width="204px"></asp:TextBox>
                    <br />
                    <asp:RequiredFieldValidator ID="rfvNewPwd" runat="server"
                    ControlToValidate="txtNewPwd"
                    ValidationGroup="vgChangePwd"
                    Display="Dynamic"
                    ></asp:RequiredFieldValidator>
                </td>
                <td>
                    Confirm New Password<br />                      
                    <asp:TextBox ID="txtConfPwd" runat="server" TextMode="Password" Width="204px"></asp:TextBox>
                    <br />
                    <asp:RequiredFieldValidator ID="rfvConfPwd" runat="server"
                    ControlToValidate="txtConfPwd"
                    ValidationGroup="vgChangePwd"
                    Display="Dynamic"
                    ></asp:RequiredFieldValidator>
                    <asp:CompareValidator ID="cvChangePwd" runat="server"
                    ValidationGroup="vgChangePwd"
                    ControlToValidate="txtNewPwd"
                    ControlToCompare="txtConfPwd"
                    ValueToCompare="String"  
                    Display="Dynamic"                      
                    ></asp:CompareValidator>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <asp:ImageButton ID="ibtnPwdChange" runat="server" 
                    ImageUrl="/images/submit.jpg" onclick="ibtnPwdChange_Click" 
                    ValidationGroup="vgChangePwd" 
                    Width="90px" Height="36px"
                    />
                    <br />      
                    <asp:Label ID="lblSuccessPwdChange" runat="server"></asp:Label>             
                </td>
            </tr>
        </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T06:30:30.647

有几个解决方法。

就我而言，我可以删除`requiredFieldValidator`第二个文本框，因为它就足够了`compareValidator`。

但在某些情况下，必须有 2 个验证器。在这种情况下，我们可以使用`css`重叠 2 个验证器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:28:43.147

`CompareValidator`像这样试试

```
<asp:CompareValidator id="cvChangePwd" runat="server" ControlToValidate="txtConfPwd"   ControlToCompare="txtNewPwd" ErrorMessage="Your passwords do not match up!" Display="Dynamic" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-13T08:08:41.913

将显示属性设置为动态

所有验证器中的 display="dynamic"

# c# - 如何从一个 ListBox 中的 XML 文件加载数据

> ID：11980499
> 
> 赞同：0
> 
> 时间：2012-08-16T03:56:35.350
> 
> 标签：c#, c#-4.0, c#-3.0

> **可能重复：**
> [我想从 XML 文件加载数据并显示在列表框中？](https://stackoverflow.com/questions/11979986/i-want-to-load-the-data-from-xml-file-and-show-in-the-listbox)

我有一个三类：

首先是人：

```
 public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }

    public Person()
    {
    }

    public override string ToString()
    {
        return FirstName + " " +LastName + "\t" +Email;
    }
} 
```

二是：

```
 public class Student:Person
{

    public Student()
    {
    }
    public double AssessmentGrade { get; set; }
    public double AssignmentGrade { get; set; }

    public override string ToString()
    {
        return base.ToString() + "," +AssessmentGrade + "," + AssignmentGrade;
    }
} 
```

第三是：

```
 public class Teacher:Person
{
    public int RoomNumber
    {
        get;
        set;
    }

    public override string ToString()
    {
        return base.ToString() + "," + RoomNumber;
    }
} 
```

我还有一门课，我只是从 PeronDB （类）中调用数据

```
 public class Persons
{
     private List<Person> persons = null;

       public void Fill()
    {
        persons = PersonDB.GetPersons();
    }
 } 
```

InPersonDB 类如果它的 Student 节点然后读取数据，如果它的 Teacher 节点也读取数据并且如果它 Person 它也读取数据，我正在做。

```
 public class PersonDB
{
    private const string path = @"..\..\Persons.xml";

    public static List<Person> GetPersons()
    {
        List<Person> persons = new List<Person>();

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.IgnoreWhitespace = true;
        settings.IgnoreComments = true;

        XmlReader xmlIn = XmlReader.Create(path, settings);

        if (xmlIn.ReadToDescendant("Student"))
        {
            do
            {
                Person person = new Person();
                Student student = (Student)person;
                xmlIn.ReadStartElement("Student");
                student.FirstName = xmlIn.ReadElementContentAsString();
                student.LastName = xmlIn.ReadElementContentAsString();
                student.Email = xmlIn.ReadElementContentAsString();
                student.AssessmentGrade = xmlIn.ReadElementContentAsInt();
                student.AssignmentGrade = xmlIn.ReadElementContentAsInt();

                persons.Add(student);
            } while (xmlIn.ReadToNextSibling("Student"));

        }

        else if (xmlIn.ReadToDescendant("Teacher"))
        {
            do
            {
                Person person = new Person();
                Teacher teacher = (Teacher)person;
                xmlIn.ReadStartElement("Teacher");
                teacher.FirstName = xmlIn.ReadElementContentAsString();
                teacher.LastName = xmlIn.ReadElementContentAsString();
                teacher.Email = xmlIn.ReadElementContentAsString();
                teacher.RoomNumber = xmlIn.ReadElementContentAsInt();

                persons.Add(teacher);
            } while (xmlIn.ReadToNextSibling("Teacher"));
        }

        if (xmlIn.ReadToDescendant("Person"))
        {
            do
            {
                Person person = new Person();

                xmlIn.ReadStartElement("Person");
                person.FirstName = xmlIn.ReadElementContentAsString();
                person.LastName = xmlIn.ReadElementContentAsString();
                person.Email = xmlIn.ReadElementContentAsString();

                persons.Add(person);
            } while (xmlIn.ReadToNextSibling("Person"));
        }

        xmlIn.Close();

        return persons;
    }
   } 
```

在表单加载中我正在做：

```
 Persons personList = null;

        private void FillPersonlstBox()
    {
        Person p;
        listBox1.Items.Clear();
        for (int i = 0; i < personList.Count; i++)
        {
            p = personList[i];
            listBox1.Items.Add(p.ToString());
        }
    }

    private void Load_Click(object sender, EventArgs e)
    {
        personList.Changed += new Persons.ChangeHandler(HandleChange);
        personList.Fill();
        FillPersonlstBox();
    } 
```

它告诉我**“{Unable to cast object of type 'Collection.Person' to type 'Collection.Student'。”}**这个错误:( System.InvalidCastException 它在 PersonDB 类中显示这个错误。请大家帮我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:16:52.243

不要将人选为学生或老师，见下文

```
 public class PersonDB
{
    private const string path = @"..\..\Persons.xml";

    public static List<Person> GetPersons()
    {
        List<Person> persons = new List<Person>();

        XmlReaderSettings settings = new XmlReaderSettings();
        settings.IgnoreWhitespace = true;
        settings.IgnoreComments = true;

        XmlReader xmlIn = XmlReader.Create(path, settings);

        if (xmlIn.ReadToDescendant("Student"))
        {
            do
            {

                Student student = new Student();
                xmlIn.ReadStartElement("Student");
                student.FirstName = xmlIn.ReadElementContentAsString();
                student.LastName = xmlIn.ReadElementContentAsString();
                student.Email = xmlIn.ReadElementContentAsString();
                student.AssessmentGrade = xmlIn.ReadElementContentAsInt();
                student.AssignmentGrade = xmlIn.ReadElementContentAsInt();

                persons.Add(student);
            } while (xmlIn.ReadToNextSibling("Student"));

        }

        else if (xmlIn.ReadToDescendant("Teacher"))
        {
            do
            {

                Teacher teacher = new Teacher();
                xmlIn.ReadStartElement("Teacher");
                teacher.FirstName = xmlIn.ReadElementContentAsString();
                teacher.LastName = xmlIn.ReadElementContentAsString();
                teacher.Email = xmlIn.ReadElementContentAsString();
                teacher.RoomNumber = xmlIn.ReadElementContentAsInt();

                persons.Add(teacher);
            } while (xmlIn.ReadToNextSibling("Teacher"));
        }

        if (xmlIn.ReadToDescendant("Person"))
        {
            do
            {
                Person person = new Person();

                xmlIn.ReadStartElement("Person");
                person.FirstName = xmlIn.ReadElementContentAsString();
                person.LastName = xmlIn.ReadElementContentAsString();
                person.Email = xmlIn.ReadElementContentAsString();

                persons.Add(person);
            } while (xmlIn.ReadToNextSibling("Person"));
        }

        xmlIn.Close();

        return persons;
    }
   } 
```

# jquery - jQuery 水平列表滑块 - LavaLamp

> ID：11980500
> 
> 赞同：0
> 
> 时间：2012-08-16T03:56:39.957
> 
> 标签：jquery, css, slider, lavalamp

我一直在尝试从 Hitmo 网站重新创建“预算”滑块：http: [//hitmo-studio.com/contact.html#budget-panel-container](http://hitmo-studio.com/contact.html#budget-panel-container)

但我不能让它像 Hitmo 滑块一样顺利运行：http: [//jsfiddle.net/XNBMr/1/](http://jsfiddle.net/XNBMr/1/)

我需要的东西：

*   更流畅的动画
*   当标签上的“当前”为白色（无文本阴影）addClass时更改文本的颜色？
*   不应选择“选择预算”
*   单击选项时允许“蓝框”移动（仍然悬停时不会移动）
*   当悬停离开蓝色框然后回到它上面时，下面的悬停样式会闪烁

我将不胜感激任何帮助。我觉得它非常接近，但我知道必须有一个更精简的方法，我希望它尽可能简单。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:02:38.050

让我们看看：

*   动画：您可能想要“缓出”，它开始快，然后减慢。
*   白色文本和悬停：添加一个类非常简单（但我担心那个 css，它并不是真正为性能而创建的；参见[vanseodesign](http://www.vanseodesign.com/css/css-selector-performance/)或[mozilla](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS?redirectlocale=en-US&redirectslug=Writing_Efficient_CSS)）。我还移除了一点腰部，但它真的应该被丢弃并重做（它非常粗糙）。
*   Click & Budget：嗯，基本的 jquery 事件（我认为你找到了代码并尝试修改它）；防止预算被重新选择只是一个简单的条件......

[-- 演示 --](http://jsfiddle.net/scispear/6jtYx/)

# ruby-on-rails - form_for 方法未定义

> ID：11980501
> 
> 赞同：0
> 
> 时间：2012-08-16T03:56:40.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我读了一本名为“Rails 3 in Action”的书，做了两页：“index”和“new”，设置 routes.rb：

```
root :to => 'projects#index'
match '/new', to:'projects#new' 
```

和项目控制器：

```
def new
  @project = Project.new
end

def create
  @project = Project.new(parmas[:project])
  @project.save
  flash[:notice] = "Project has been created"
  redirect_to @project
end 
```

并查看文件：

index.html.erb

```
<%= link_to "new", new_path %> 
```

这工作正常，因为我最终在`localhost:3000/new`，但问题是：

```
<%= form_for(@project) do |f| %> 
```

这导致：

> #<#:0x416b830> 的未定义方法“projects_path”

项目路径在哪里？当我打印`<%= root_path %>`时，我得到了`/`，但`<%= projects_path %>`给出了错误未定义的方法。

如何定义方法`projects_path`？根是不是`projects_path`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:04:43.070

您应该在 routes.rb 中为项目定义资源

```
resources :projects 
```

这将产生助手`projects_path`和[其他人](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:04:02.737

删除该行`match '/new', to:'projects#new'`并`routes.rb`添加以下内容：

```
resources :projects 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:25:48.103

用于创建新项目的路径是指向“/projects”索引 URL 的 HTTP 帖子。您需要指定此路线：

```
post "/projects", :controller => "projects", :action => "create", :as => "projects" 
```

这将生成一个，这是您正在寻找`projects_path`的辅助方法。`form_for`

正如其他人所说，您可能应该`resources :projects`改用。如果您只想创建默认创建的[七个 RESTful 路由](http://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)`:only`中的一个子集，则可以使用：

```
resources :projects, :only => %w(index new create) 
```

# c# - dynamodb 扫描返回 IEnumerable 迭代 IEnumerable 时的对象异常

> ID：11980505
> 
> 赞同：0
> 
> 时间：2012-08-16T03:57:47.690
> 
> 标签：c#, amazon-dynamodb

在以下代码中点击 foreach 时出现此异常：

```
`System.InvalidCastException was unhandled by user code
Message=Specified cast is not valid.
Source=AWSSDK`

IEnumerable<FoodOutlet> foundOutletList = context.Scan<FoodOutlet>(
                    new ScanCondition("Postcode", ScanOperator.Equal, "3000")
);

List<FoodOutlet> foodOutletList = new List<FoodOutlet>();

foreach (FoodOutlet fo in foundOutletList)
{
    foodOutletList.Add(fo);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:09:35.163

您还没有写出“上下文”是什么。我相信您在滥用[Table Scan](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/ScanMidLevelDotNet.html)操作
这就是实际项目与您期望的不同的原因。

如果不是这种情况 - foundOutletList 对象的动态类型是什么？如果你能看到它的成员，他们是什么类型的？

# objective-c - 使用 UITouch 时如何获得触摸偏移

> ID：11980508
> 
> 赞同：0
> 
> 时间：2012-08-16T03:58:15.793
> 
> 标签：objective-c, ios, cocoa-touch, uigesturerecognizer, uitouch

使用时如何获得触摸偏移`UITouch`？我正在做一个像遥控器这样的项目。我有一个设置为多点触控的视图，我希望该视图像 Mac 的触摸板一样，所以当人们移动来控制鼠标时我需要触摸偏移。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:19:12.613

这可以`UIPanGestureRecognizer`通过测量从屏幕中心到当前触摸位置的对角线距离来实现。

```
#import <QuartzCore/QuartzCore.h> 
```

声明手势并将其挂钩，`self.view`以便整个屏幕响应触摸事件。

```
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(myPanRecognizerMethod:)];
[pan setDelegate:self];
[pan setMaximumNumberOfTouches:2];
[pan setMinimumNumberOfTouches:1];
[self.view setUserInteractionEnabled:YES];
[self.view addGestureRecognizer:pan]; 
```

然后在这个方法中，我们使用手势识别器状态：`UIGestureRecognizerStateChanged`更新和整数，测量触摸位置和屏幕中心之间的对角线距离随着触摸位置的变化。

```
-(void)myPanRecognizerMethod:(id)sender
{
    [[[(UITapGestureRecognizer*)sender view] layer] removeAllAnimations];
    if ([(UIPanGestureRecognizer*)sender state] == UIGestureRecognizerStateChanged) {
        CGPoint touchLocation = [sender locationOfTouch:0 inView:self.view];
        NSNumber *distanceToTouchLocation = @(sqrtf(fabsf(powf(self.view.center.x - touchLocation.x, 2) + powf(self.view.center.y - touchLocation.y, 2))));
        NSLog(@"Distance from center screen to touch location is == %@",distanceToTouchLocation);
    }
} 
```

# asp.net - 使用 linq to xml 删除 xml 中的节点

> ID：11980510
> 
> 赞同：0
> 
> 时间：2012-08-16T03:58:45.990
> 
> 标签：asp.net, xml, linq-to-xml

我想使用元素的值从 xml 文件中删除一个节点

这是我的xml

```
 <Employee>
  <User>
    <ID>1</ID>
    <Username>John</Username>
    <Lastname>Smith</Lastname>
  </User>
<User>
    <ID>2</ID>
    <Username>jerry</Username>
    <Lastname>wilson</Lastname>
  </User>
</Employee> 
```

这是我背后的代码

```
 XDocument doc = XDocument.Load(Server.MapPath(@"~/User.xml"));
            doc.Elements("User")
           .Elements("ID")
           .Where(l => l.Value == textbox1.text)
           .Select(x => x.Parent)
           .Remove(); 
```

我想删除在文本框中输入但它不起作用的`<user>`节点。`<id>`你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:15:08.623

添加`doc.Root`属性或`doc.Descendants("User")`返回后代元素的过滤集合：

1.

```
doc.Root.Elements("User")
           .Elements("ID")
           .Where(l => l.Value == textbox1.text)
           .Select(x => x.Parent)
           .Remove(); 
```

2.

```
 doc.Root.Elements("User")
            .Where(p => p.Element("ID").Value == textbox1.text)
            .Remove();
 doc.Save(Server.MapPath(@"~/User.xml")); 
```

# c++ - 取消对用户输入 C++ 的调用

> ID：11980511
> 
> 赞同：1
> 
> 时间：2012-08-16T03:58:59.293
> 
> 标签：c++, timer, user-input

如果在一定时间内没有输入，我将如何有效地取消对用户输入的调用？（我正在使用 Mac OS X 为终端/cmd 窗口编写游戏）。

我尝试关闭规范缓冲并使用在调用用户输入后加入的计时器线程。我还尝试`pthread_join()`在 while 循环的参数中实现对的调用。依然没有。问题是即使规范缓冲关闭，当没有输入时，对用户输入的调用仍然被阻止。如果有输入，它工作正常。

如果我能做到这一点而不需要摆弄下载和安装 ncurses，那就太好了，但如果我必须这样做，我会这样做。

编辑：源代码：

```
//Most headers only pertain to my main program. 
#include <iostream>
#include <termios.h>
#include <pthread.h>
#include <time.h>
#include <cstring>
#include <stdio.h>
#include <string.h>

using namespace std;

//Timer function.
void *Timer(void*) {

    time_t time1, time2;

    time1 = time(NULL);

    while (time2 - time1 < 1) {
        time2 = time(NULL);
    }

    pthread_exit(NULL);
}

int main() {

    //Remove canonical buffering.
    struct termios t_old, t_new;
    tcgetattr(STDIN_FILENO, &t_old);
    t_new = t_old;
    t_new.c_lflag &= ~ICANON;
    tcsetattr(STDIN_FILENO, TCSANOW, &t_new);

    cout << "Press any key to continue." << endl;

    string szInput;

    int control = 0;

    do {

        pthread_t inputTimer;

        pthread_create(&inputTimer, NULL, Timer, NULL);

        szInput = "";

        while (szInput == "") {

            szInput = cin.get();

            //Handle keypresses instantly.
            if (szInput == "a") {
                cout << endl << "Instant keypress." << endl;
            }
        }    

        pthread_join(inputTimer, NULL); 

        cout << endl << "One second interval." << endl;

        control ++;

    } while (control < 25);

    cout << "Game Over." << endl;

    return 0;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:23:37.003

看看这是否有效！

```
char ch;  //Input character
int time = 0;     //Time iterator
int TIMER = 5000; //5 seconds
while(time<TIMER)
{
    if(!kbhit())
    {
        time = 0;
        ch = getch();
        //Do your processing on keypress
    }
    time++;
    delay(1);
} 
```

`kbhit()`检测是否发生了任何击键。如果是，则获取 中的关键字符`ch`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:15:29.290

`STDIN_FILENO`检查是否有输入的一种方法是使用例如`select`系统调用来轮询文件描述符。如果`STDIN_FILENO`是可读的，那么您至少可以读取一个字符。您还可以将超时传递给`select`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T09:29:53.043

感谢 Shashwat，它适用于以下修改：

1) 更改`if(!kbhit())`为`if(kbhit())`

2) 更改`delay(1);`为`Sleep(1);`

我没有足够的代表发表评论，因此添加为答案。

# java - JSF 不解析 #{} 标签

> ID：11980512
> 
> 赞同：4
> 
> 时间：2012-08-16T03:59:00.543
> 
> 标签：java, jsp, jsf, tomcat, jsf-1.2

我是 JSP/JSF 的新手，我的 JSP 遇到了问题。

我有几个看起来像这样的标签：

```
 <div class="summary">
            <h:outputText escape="false"
                          value="#{FrequencyDistManagedBean.summary}"/>
        </div> 
```

但是当我在浏览器中查看 jsp 时，我得到了这个：

```
 <div class="summary">
            #{FrequencyDistManagedBean.summary}
        </div> 
```

它解析 h:outputText 部分，但不解析散列/花括号部分。我为价值所付出的并不重要，它永远不会被解析。没有记录错误，它只是不起作用。我什至可以输入 #{foo.bar} （期望它会因某种错误而失败）并且没有区别。

我将 faces servlet 映射到 /faces/* （或任何默认值），我的 url 看起来像：[http](http://www.mysite.com:8080/MyProject/faces/FrequencyDist.jsp) ://www.mysite.com:8080/MyProject/faces/FrequencyDist.jsp （我正在运行 Tomcat 6，并使用 JSF 1.2)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:54:18.883

根据[这个较旧的 SO question](https://stackoverflow.com/questions/6251401/el-expressions-are-not-evaluated)，将您的 web.xml 文件的版本更改为 2.5：

```
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
         version="2.5"> 
```

还设置`<faces-config ... version="1.2">`

谷歌搜索`jsf not evaluating el expression`将该链接放在搜索结果的顶部。

* * *

与您的直接问题无关，但您很快就会遇到这个问题：

验证您对控制器 bean 名称的使用；我指的`F`是开头的大写字母`FrequencyDistManagedBean`。默认情况下，bean 名称总是以小写字母开头。当您明确命名一个 bean 时，您应该遵循相同的约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T08:23:27.887

没关系，删除 doctype 并将 faces-config 元素替换为：

```
<faces-config 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd" 
version="1.2"> 
```

你摇滚，非常感谢你的帮助！！

# mysql - 如何在 MySQL 表中搜索单词？比赛反对或喜欢？

> ID：11980513
> 
> 赞同：3
> 
> 时间：2012-08-16T03:59:27.083
> 
> 标签：mysql, search, select, sql-like, match-against

我有一些公司的表格，这些公司可能在不同的国家有很多分支机构。这些国家被插入到`countries`字段中。
现在，我必须创建一个搜索系统，允许用户查找在特定国家/地区设有分支机构的公司。
我的问题是：我必须使用哪一个？`MATCH AGAINST`还是`LIKE`？查询必须搜索所有记录以找到完全匹配的项目。

*   注意：记录可能有不同的国家名称，用逗号分隔。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T04:07:23.893

`MATCH AGAINST`子句用于[全文搜索](http://dev.mysql.com/doc/refman/5.5/en/fulltext-search.html)。

为此，您需要创建一个`full text index`搜索栏`countries`。

`full text index`搜索比`LIKE '%country%'`serach 快得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T04:10:32.550

我会改变实现：拥有一个包含多个值的字段是一个*[坏主意](https://stackoverflow.com/questions/8282508/why-is-multi-value-field-a-bad-idea-in-relational-databases)*，例如，它很难维护 - 你将如何`remove`从公司实现一个国家？

我相信更好的方法是有一个单独的表**Companies_countries**将有两列：`company_id`and `country_id`，并且每个可以有多行`company`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:39:48.003

你应该使用`LIKE`. 因为@Omesh 提到`MATCH AGAINST`的子句用于**全文搜索。**. 全文搜索需要整个列进行搜索。

# php - 如何在 symfony 重定向中获取引用 url

> ID：11980515
> 
> 赞同：2
> 
> 时间：2012-08-16T03:59:43.073
> 
> 标签：php, url, redirect, symfony-1.4

我将 symfony 1.4 用于某些 Web 应用程序。在那里，当有人尝试访问一个操作时，我将其重定向到一个新操作，如下所示。

```
//Assume I'm redecting from module1/action1 to module2/action2
$this->redirect('module2/action2'); 
```

我在 module2/action2 中可以获得重定向的 url。我用了

```
$request->getReferer(); 
```

但它没有给出任何结果。

我不需要使用 forward 而不是 redirect 因为它不符合我的需要。有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T07:32:16.100

我可以建议您将引用者放在会话中，以便在重定向后能够检索。这就是 sfGuard 的[执行方式](http://trac.symfony-project.org/browser/plugins/sfDoctrineGuardPlugin/trunk/modules/sfGuardAuth/lib/BasesfGuardAuthActions.class.php#L54)。

在重定向之前：

```
// save the referer
$referer = $this->getContext()->getActionStack()->getSize() > 1 ? $request->getUri() : $request->getReferer();
$this->getUser()->setAttribute('referer', $referer);

// make your redirect
$this->redirect('module2/action2'); 
```

然后，在您的 中`module2/action2`，像这样检索您的引荐来源网址：

```
$referer = $this->getUser()->getAttribute('referer');

// finally, remove it from session
$this->getUser()->getAttributeHolder()->remove('referer'); 
```

# entity-framework-4 - 在 EDMX 中自动将 ConcurrencyMode 设置为 Fix

> ID：11980516
> 
> 赞同：2
> 
> 时间：2012-08-16T03:59:54.550
> 
> 标签：entity-framework-4, concurrency, edmx

我们模型中的大多数表都有一个名为“intConcurrencyID”的字段，我们打算将其用于并发检查。我相信在 Database First 环境中启用此字段以进行并发检查的唯一方法是将并发模式设置为固定。

但是，如果每个 EDMX 有大量表，我们将很难手动配置每个实体的每种类型，更不用说某些实体被忽略的可能性。

你对我如何自动化这个过程有什么想法吗？似乎 T4 模板不是要走的路，因为并发模式在 CSDL 中而不是在后面的代码中..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T03:03:33.020

我在更改属性的并发模式之前和之后查看了 edmx 文件，并提出了一个作为控制台应用程序的解决方案，它从“时间戳”列的存储模型开始解析 edmx 文件，并通过遵循映射修改概念模型。这是一个相当强大的解决方案，但它有一些警告。

我正在使用 MSSQL 2008，其时间戳/行版本是事实上的并发类型。在我的模型中，我只使用这种类型作为并发令牌。如果您在其他地方使用它，但对所有并发令牌使用一致的名称，我已经包含了可以取消注释的此场景的代码。如果您只是使用不同的并发类型并且该类型对于并发列是唯一的，则可以在这行代码中将类型从“时间戳”更改：

```
 IEnumerable<XElement> storageEntities =
            from el in ssdl.Descendants(XName.Get("EntityType",ssdlNS))
            where (from prop in el.Elements(XName.Get("Property",ssdlNS)) where prop.Attribute("Type").Value == "timestamp" select prop).Count()>0
            select el; 
```

如果您的并发模式更复杂，则此代码将不够用。

话虽如此，我在大约一个小时内完成了它并运行了它，它在一个有近 200 个实体的模型上对我来说非常有用，为我节省了很多通过缓慢的 edmx 设计器的烦恼，所以我相信其他人会受益. 这是一个控制台应用程序，因此您可以将其放在模型项目的预构建步骤中，以将其集成到您的构建过程中。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Xml;
using System.Xml.Linq;

namespace ConfigureConcurrency
{
    class Program
    {
        static void Main(string[] args)
        {
            string edmxPath = args[0]; //or replace with a fixed path

            if (edmxPath == null || edmxPath.Length == 0)
                return;

            string edmxNS = @"http://schemas.microsoft.com/ado/2008/10/edmx";
            string ssdlNS = @"http://schemas.microsoft.com/ado/2009/02/edm/ssdl";
            string csdlNS = @"http://schemas.microsoft.com/ado/2008/09/edm";
            string mapNS = @"http://schemas.microsoft.com/ado/2008/09/mapping/cs";

            XElement root = XElement.Load(edmxPath);
            //Storage Model
            XElement ssdl = root.Descendants(XName.Get("StorageModels", edmxNS)).FirstOrDefault();
            //Conceptual
            XElement csdl = root.Descendants(XName.Get("ConceptualModels", edmxNS)).FirstOrDefault();
            //Mapping
            XElement map = root.Descendants(XName.Get("Mappings", edmxNS)).FirstOrDefault();

            /*
             Use this code instead of the line below it, if the type of your concurrency columns is used on other non-concurrency columns
             and you use the same name for every concurrency column             

            string ConcurrencyColumnName = "RowVersion";
            IEnumerable<XElement> storageEntities =
                from el in ssdl.Descendants(XName.Get("EntityType", ssdlNS))
                where (from prop in el.Elements(XName.Get("Property", ssdlNS)) where prop.Attribute("Name").Value == ConcurrencyColumnName select prop).Count() > 0
                select el;
            */

            IEnumerable<XElement> storageEntities =
                from el in ssdl.Descendants(XName.Get("EntityType",ssdlNS))
                where (from prop in el.Elements(XName.Get("Property",ssdlNS)) where prop.Attribute("Type").Value == "timestamp" select prop).Count()>0
                select el;

            //for each timestamp column, find the mapping then find the conceptual model property and establish the concurrency mode
            foreach(XElement storageEntity in storageEntities) 
            {
                //Get the mapping
                XElement mapping = (from el in map.Descendants(XName.Get("EntityTypeMapping",mapNS)) where el.Element(XName.Get("MappingFragment",mapNS)).Attribute("StoreEntitySet").Value == storageEntity.Attribute("Name").Value select el).FirstOrDefault();

                if (mapping != null)
                {
                    //Get the column mapping
                    XElement column = (from el in storageEntity.Descendants(XName.Get("Property",ssdlNS)) where el.Attribute("Type").Value == "timestamp" select el).FirstOrDefault();
                    string columnName = column.Attribute("Name").Value;
                    XElement columnMapping = (from el in mapping.Descendants(XName.Get("ScalarProperty",mapNS)) where el.Attribute("ColumnName").Value == columnName select el).FirstOrDefault();
                    string propertyName = columnMapping.Attribute("Name").Value;

                    //Get the conceptual schema namespace and type name
                    string[] split = mapping.Attribute("TypeName").Value.Split('.');

                    string ns="", typeName =split[split.Length-1];

                    for (int i = 0; i < split.Length-1; i++)
                    {
                        if (i>0)
                            ns+=".";

                        ns += split[i];
                    }

                    //Find the entry in the conceptual model
                    XElement schema = (from el in csdl.Elements(XName.Get("Schema",csdlNS)) where el.Attribute("Namespace").Value == ns select el).FirstOrDefault();

                    if (schema != null)
                    {
                        //Find the entity type
                        XElement entity = (from el in schema.Descendants(XName.Get("EntityType",csdlNS)) where el.Attribute("Name").Value == typeName select el).FirstOrDefault();

                        //Find the property
                        XElement concurrencyProperty = (from el in entity.Elements(XName.Get("Property",csdlNS)) where el.Attribute("Name").Value == propertyName select el).FirstOrDefault();

                        //Set concurrency mode to fixed
                        concurrencyProperty.SetAttributeValue("ConcurrencyMode", "Fixed");
                    }
                }
            }

            //Save the modifications
            root.Save(edmxPath);

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-04T06:50:31.973

使用上述控制台应用程序解决了我的类似问题。但是，如果您正在运行更高版本的实体框架，请务必更新对模式的引用。我正在使用 EF 5，对我来说，我使用了以下几行：

```
string edmxNS = @"http://schemas.microsoft.com/ado/2009/11/edmx";
string ssdlNS = @"http://schemas.microsoft.com/ado/2009/11/edm/ssdl";
string csdlNS = @"http://schemas.microsoft.com/ado/2009/11/edm";
string mapNS = @"http://schemas.microsoft.com/ado/2009/11/mapping/cs"; 
```

# c# - MVC 在控制器中传递变量

> ID：11980518
> 
> 赞同：0
> 
> 时间：2012-08-16T04:00:01.917
> 
> 标签：c#, asp.net-mvc

不确定我是否遵循 MVC 约定，但我有一些变量从一个控制器 A 传递到控制器 B。我的目标是拥有另一个名为“发布”的视图`ActionLink`，并在单击它时进行一些处理。

来自控制器 A 的重定向：

```
var redirectUrl = new UrlHelper(Request.RequestContext).Action("Index", "Publish", new { accTok = facebookAccessTok, fullImgPath = fullpath });
            return Json(new { Url = redirectUrl }); 
```

我现在在控制器 B 的“发布”索引中有“accTok”和“fullImgPath”的值，控制器 B 在其视图中包含一个 ActionLink 来进行处理，但我不确定如何将它们传递给我的“发布”视图结果' 方法：

```
namespace SF.Controllers
{
    public class PublishController : Controller
    {

    public ViewResult Index(string accTok, string fullImgPath)
        {
            return View();
        }

        // This ViewResult requires the values 'accTok' and 'fullImgPath'
        public ViewResult Publish()
        {
            // I need the values 'accTok' and 'fullImgPath'
            SomeProcessing();
            return View();
        }

        public SomeProcessing(string accessToken, string fullImagePath)
        {
            //Implementation
        }
    }
} 
```

索引视图：

```
 @{
        ViewBag.Title = "Index";
    }

    <h2>Publish</h2>

    <br/><br/>

    @Html.ActionLink("Save Image", "Publish") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:26:39.413

I would suggest doing this

```
public ViewResult Publish(string accTok, string fullImgPath)
        {
            SomeProcessing(accTok,fullImgPath);
            return View();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T09:36:19.910

在您的控制器中：

```
public ViewResult Index(string accTok, string fullImgPath)
{
    ViewModel.Acctok = accTok;
    ViewModel.FullImgPath = fullImgPath;
    return View();
}

public ViewResult Publish(string accTok, string fullImgPath)
{
    SomeProcessing(accTok,fullImgPath);
    return View();
} 
```

在视图中：

```
@Html.ActionLink("Save Image", "Publish","Publish",new {accTok=ViewModel.Acctok, fullImgPath=ViewModel.FullImgPath},null ) 
```

除了 ActionLink，您还可以将其设为带有隐藏输入字段的表单（如果此方法更改数据库/磁盘上的内容，它实际上应该在帖子中）。

但是无论如何使用视图模型将参数从索引操作传递到视图，以便反过来将它们发送到发布操作。这通常是在 MVC 中使用无状态 Web 的方法。

# wordpress - Wordpress：如何对自定义字段上的帖子进行排序

> ID：11980520
> 
> 赞同：3
> 
> 时间：2012-08-16T04:00:27.470
> 
> 标签：wordpress, sorting, custom-fields, custom-taxonomy

我想以特定顺序显示自定义分类法中的帖子标题列表。我认为控制顺序的最佳方法是添加一个自定义字段并对该自定义字段进行排序。

我遇到的问题是我正在尝试使用 Wordpress 的内置功能，但找不到添加排序功能的方法。

我的场景如下所示调用 url 是 ...com/taxonomy/term

这会调用一个模板，其文件名是 taxonomy-taxonomyname-term.php

我的模板只是 index.php 模板重命名和编辑以包含此循环

```
<?php if ( have_posts() ) : ?>

<?php twentyeleven_content_nav( 'nav-above' ); ?>
<ul>
<?php /* Start the Loop */ ?>
<?php while ( have_posts() ) : the_post(); ?>
<li><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute( array( 'before' => 'Permalink to: ', 'after' => '' ) ); ?>"><?php the_title(); ?></a></li>

<?php endwhile; ?>
</ul>
<?php twentyeleven_content_nav( 'nav-below' ); ?>

<?php else : ?> etc 
```

这会显示标题列表，但我找不到控制标题顺序的方法。

我见过的设置一组帖子顺序的唯一方法是定义查询中帖子的顺序。但当然在这种情况下我没有查询，因为我已经通过调用 url 获得了帖子。

有没有办法在不添加另一个查询的情况下添加排序功能，或者查询是强制性的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:54:52.250

假设您的自定义字段是 my_date 您可以像这样创建自定义查询。

```
query_posts('meta_key=my_day&meta_compare=<=&meta_value=20&orderby=meta_value&order=DESC'); 
```

使用它

```
<?php if ( have_posts() ) : ?>

<?php twentyeleven_content_nav( 'nav-above' ); ?>
<ul>
<?php /* Start the Loop */ 
  query_posts('meta_key=my_day&meta_compare=<=&meta_value=20&orderby=meta_value&order=DESC');
?>

<?php while ( have_posts() ) : the_post(); ?>
<li><a href="<?php the_permalink(); ?>" title="<?php the_title_attribute( array( 'before' => 'Permalink to: ', 'after' => '' ) ); ?>"><?php the_title(); ?></a></li>

<?php endwhile; ?>
</ul>
<?php twentyeleven_content_nav( 'nav-below' ); ?>

<?php else : ?> etc 
```

欲了解更多信息[http://wpengineer.com/1915/sort-posts-custom-fields/](http://wpengineer.com/1915/sort-posts-custom-fields/)

# ios - UITableView 编辑模式中的减号按钮

> ID：11980523
> 
> 赞同：2
> 
> 时间：2012-08-16T04:01:20.303
> 
> 标签：ios, cocoa-touch, uitableview

当我将 UITableView 设置为编辑模式时，“-”按钮出现在表格行之外。我怎样才能让它们出现在行内（即在白色区域内）。

![当前行为示例 - 减号出现在分组单元格之外。](../Images/ec5110712424889c5155a057a9505cd7.png)

我正在寻找的行为可以在内置应用程序中找到，例如在 iPhone 天气应用程序的背面（可以添加和删除位置。）

[![期望行为示例 - iOS 天气； 减号出现在分组单元格中。](../Images/f1bdbb1e4011d11fb68cc28e6e34e951.png)](https://i.stack.imgur.com/MshzC.jpg)
[（来源：[what-when-how.com](http://what-when-how.com/wp-content/uploads/2011/08/tmp5D87_thumb.jpg)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T02:36:31.733

此行将在行内显示“-”

```
- (BOOL)tableView:(UITableView *)tableView shouldIndentWhileEditingRowAtIndexPath:(NSIndexPath *)indexPath
{
    return NO;
} 
```

# python - python的切片符号可以在括号外使用吗？

> ID：11980524
> 
> 赞同：2
> 
> 时间：2012-08-16T04:01:27.187
> 
> 标签：python, slice

在括号内，python 的切片速记自动生成切片对象的元组：

```
class Foo(object):
    def __getitem__(self, key):
        print key

Foo()[1::, 2:20:5] 
```

这打印`(slice(1, None, None), slice(2, 20, 5))`。然而，据我所知，这个速记在括号外不起作用。

有没有办法在其他情况下使用切片速记？我可以定义一个虚拟对象，它只返回传递给它的任何内容`__getitem__`——这至少会给我一种使用速记语法生成切片元组的方法。有没有更蟒蛇的方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:49:51.397

NumPy 有一个[`s_`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.s_.html)对象可以为您执行此操作：

```
>>> np.s_[2::2]
slice(2, None, 2) 
```

您可以轻松地制作自己的版本，只需设置`s_ = Foo()`并`s_`在您想轻松创建切片时使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:13:44.570

你看到的打印出来的实际上是一个很好的线索。您可以通过 slice() 全局函数直接创建切片对象。然后可以将这些传递用于从列表中索引。

```
s = slice(1, 10, 2)
numbers = list(range(20))
print numbers[s]
print numbers[1:10:2] 
```

这将打印两次相同的结果 [1, 3, 5, 7, 9]。

切片实例有一些属性和方法。您可以查看帮助（切片）以了解更多信息。

# java - 通过java调用.DLL文件

> ID：11980527
> 
> 赞同：1
> 
> 时间：2012-08-16T04:01:47.050
> 
> 标签：java, dll

我有一个主要用 vb.net 编写的 DLL 文件，它需要 2 个参数。我想在我的 java 代码中使用这个 DLL 并传递所需的 2 个参数。我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:05:25.777

在 Java 中，基本上有两个不错的选择：（按推荐顺序）

1.  如果你的 DLL 有 C 函数头（而不是 C++ 装饰），你应该使用[JNA](https://github.com/twall/jna/)。它具有简单的[声明式语法](https://github.com/twall/jna/blob/master/www/DirectMapping.md)，并且只需要编写一些 Java。
2.  为您的 DLL 编写 JNI 绑定（将涉及一些 Java 和一些 C++ 代码）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T04:04:24.207

使用[JNI](http://java.sun.com/docs/books/jni/)，加载您的 dll 并调用本机函数

**看**

*   [例子](http://java.sun.com/developer/onlineTraining/Programming/JDCBook/jniexamp.html)

# sqlite - 在一对多表中指示“规范”记录

> ID：11980529
> 
> 赞同：2
> 
> 时间：2012-08-16T04:02:38.790
> 
> 标签：sqlite, database-design, database-normalization

想象一下，我们有一张国家表和一张城市表。一个国家当然可以有很多城市，但一个城市只能在一个国家，因此一对多的关系很直观：

```
countries
| id | name    |
|  1 | Lorwick |
|  2 | Belmead |

cities
| id | country | name        |
|  1 |       1 | Marblecrest |
|  2 |       1 | Westacre    |
|  3 |       2 | Belcoast    |
|  4 |       1 | Rosemarsh   |
|  5 |       2 | Vertston    | 
```

但是除了我们的一对多关系之外，我们还想描述国家首都的一对一关系。如果这很重要，假设首都可能会相当有规律地变化，因此城市会随意出现和消失，并且城市可能会切换国家。关键是，这个数据是不稳定的。

我看到了几个选项：

1.  添加一个不能为空`capital`的int 列。`countries`优点：总是只有一个城市；缺点：与城市无关，没有强制城市在乡村，或者它甚至存在。

2.  `capital`向中添加一个布尔列`cities`，如果为 true，则表明该城市是相关国家的首都。Pro：直接与相关城市相关联，没有重复的列表示层次结构；缺点：很确定这是一个糟糕的正常化，因为没有什么可以阻止给定国家的“首都”为零或不止一个。

3.  创建一个附加表`capitals`，其中包含列`country`和`city`两个列（或至少在 上`city`）的唯一约束。优点：感觉更干净，很容易加入`countries`或`cities`；缺点：仍然不能确保城市在国内，或者两者都存在。

表示这种关系的最规范和/或最佳方式是什么？有什么办法可以确保每个国家都有一个确实存在并位于该国境内的资本？我想这是不可能的，在这种情况下，我怎样才能最好地减少我的客户端代码的问题？

我目前正在使用 SQLite，但无论底层数据库如何，我都对通用答案感兴趣。

我做了一些挖掘，发现[在数据库中指示主要/默认记录，](https://stackoverflow.com/questions/8981154/indicating-primary-default-record-in-database)但我认为这并不能真正回答我的问题。

* * *

PS：没有首都也没那么糟糕（可能没有城市！），但如果有多个就糟糕了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:27:28.603

我认为“每个国家只有一个首都”的要求与“城市随意出现和消失”的要求是矛盾的。如果一个城市可以消失，那么一个首都也可以消失。

您可以使用大写表上的外键约束来强制执行“每个国家/地区有 [零或] 一个实际上确实存在并位于该国家/地区内的资本”的约束。

```
create table capitals (
  country_id integer primary key,
  city_id integer not null,
  foreign key (country_id, city_id) references cities (country_id, city_id)
); 
```

在该表中，主键约束保证每个国家不能有超过一个资本。外键约束保证您选择的资本存在于您选择的国家。在引用的表（“城市”表）中，您还需要对 {city_id, country_id} 的唯一约束；由于 {city_id} 在“cities”表中是唯一的，{city_id, country_id} 在该表中也必然是唯一的，所以这不是问题。

保证国家和首都之间的一对一关系（不是一对零或一的关系）的声明性“方式”是使用断言。但我不知道当前有任何支持 CREATE ASSERTION 的 SQL dbms。这迫使我们依赖其中的一项或多项：

*   触发器和可能的延迟约束，
*   应用程序代码，或
*   行政程序。

（最初，您必须在单个事务中在三个表“国家”、“城市”和“首都”中输入一行以满足所有约束。我认为您需要延迟约束，但我今天还没喝咖啡。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:36:12.383

为了清楚和简单起见，我将布尔 IsCapital 列添加到城市表中。然后添加一个触发器，当 IsCapital 在记录上设置为 true 时，设置所有其他城市（共享更新记录的国家/地区）IsCapital = false。这将解决您的大部分问题。确保每个国家只有一个首都的一种情况实际上是不可能的，你可以确保有 0 或 1，但由于城市表对国家有 FK 约束，总会有一个时间点插入的国家将没有可以设置为首都的城市。

FWIW，我认为逻辑应该留给应用程序，数据库的引用完整性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T02:32:08.613

要确保每个国家/地区只有一个首都且首都不是来自不同国家/地区的城市，请执行以下操作：

![在此处输入图像描述](../Images/d49d779b8e78c0d8753cf4e7a6789e7e.png)

请注意我们如何使用**标识**关系将 COUNTRY_ID 迁移到 CITY 的 PK，因此可以将其迁移回 CONTRY - 这是保证首都必须实际属于其首都的国家的原因。

此处的循环引用可防止插入新数据，如果 DBMS 支持，则使用延迟外键解决。否则，您可以只保留 COUNTRY.CAPITAL_NO NULL-able（并在应用程序级别强制其*最终*非 NULL-ness）。¹

* * *

*¹这假设 DBMS 具有 MATCH SIMPLE 外键（即，如果 FK 的任何组件为 NULL，则忽略 FK）。如果 DBMS 仅支持 MATCH PARTIAL 或 FULL（例如 MS Access），那么您就不走运了，并且必须通过非声明性方式（触发器或应用程序代码）来模拟 FK。*

# iphone - scrollViewDidEndScrollingAnimation 没有被调用

> ID：11980534
> 
> 赞同：3
> 
> 时间：2012-08-16T04:03:29.853
> 
> 标签：iphone, ios, uiscrollview

我有一个简单的 UIScrollView 和一个 UIPager，每当我滚动滚动视图时，我想更改我的寻呼机，但由于某种原因`(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView`没有被调用。

我的代表正在工作，因为`(void)scrollViewDidScroll:(UIScrollView *)scrollView`刚刚工作，我在这里忘记了什么吗？

还是有另一种方法可以`UIPager`在滚动视图滚动时更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T04:19:28.070

> [http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIScrollViewDelegate_Protocol/Reference/UIScrollViewDelegate.html)
> 
> 滚动视图在 UIScrollView 和 setContentOffset:animated: 和 scrollRectToVisible:animated: 方法的实现结束时调用此方法，但仅在请求动画时才调用。

以下两种方法调用只会起作用。必须是动画值`YES`。

```
[myScrollView setContentOffset:<#(CGPoint)#> animated:YES];
[myScrollView scrollRectToVisible:<#(CGRect)#> animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:20:40.683

我弄错了`(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView`和`(void)scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView`。

[UIScroll View Delegate 不调用 ScrollViewDidEndScrollingAnimation](https://stackoverflow.com/questions/1969256/uiscroll-view-delegate-not-calling-scrollviewdidendscrollinganimation)

# android - 仅在平板电脑中运行 android 应用程序

> ID：11980537
> 
> 赞同：0
> 
> 时间：2012-08-16T04:04:02.787
> 
> 标签：android

如何防止我的应用程序在手机等较小的设备上运行..我需要我的应用程序只能在 android 平板电脑上运行..解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:25:52.903

To run application for tablets only, you can set supports screen size attribute in manifest file, as follows:

```
<supports-screens android:smallScreens="false"
                      android:normalScreens="false"
                      android:largeScreens="true"
                      android:xlargeScreens="true"
                      android:requiresSmallestWidthDp="600" /> 
```

Referenced from [link](http://developer.android.com/guide/practices/screens-distribution.html#FilteringTabletApps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:22:33.947

您可以在清单文件中指定兼容的屏幕尺寸和密度：

```
<compatible-screens>
    <screen android:screenSize=["small" | "normal" | "large" | "xlarge"]
            android:screenDensity=["ldpi" | "mdpi" | "hdpi" | "xhdpi"] />
    :
</compatible-screens> 
```

请记住，这是建议性的，而不是强制执行的。有一个强制执行*的*`supports-screens`标签：

```
<supports-screens android:resizeable=["true"| "false"]
                  android:smallScreens=["true" | "false"]
                  android:normalScreens=["true" | "false"]
                  android:largeScreens=["true" | "false"]
                  android:xlargeScreens=["true" | "false"]
                  android:anyDensity=["true" | "false"]
                  android:requiresSmallestWidthDp="integer"
                  android:compatibleWidthLimitDp="integer"
                  android:largestWidthLimitDp="integer"/> 
```

但是，这种限制方法通常不受欢迎，并且会限制你的潜在市场（尽管我自己在一个应用程序中使用过它，在小屏幕上运行是零意义的，所以我理解你的要求）。

有关避免它的可能策略，请参阅[此链接。](http://developer.android.com/guide/practices/screens_support.html)

# sql - 无法透视表

> ID：11980546
> 
> 赞同：0
> 
> 时间：2012-08-16T04:04:49.527
> 
> 标签：sql, tsql

[我在 SQL Server 中](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)找到了此链接数据透视表。[一个简单的示例。](http://blogs.msdn.com/b/spike/archive/2009/03/03/pivot-tables-in-sql-server-a-simple-sample.aspx)并将其转换为临时表。但是，我收到一个错误“'(' 附近的语法不正确。”你能帮我解决这个问题吗？下面是代码：

```
IF OBJECT_ID('tempdb..#DailyIncome') IS NOT NULL
BEGIN
drop table #DailyIncome
END

create table #DailyIncome
       (
         VendorId nvarchar(10)
         , IncomeDay nvarchar(10)
         , IncomeAmount int
       )

insert into #DailyIncome values ('SPIKE', 'FRI', 100)
insert into #DailyIncome values ('SPIKE', 'MON', 300)
insert into #DailyIncome values ('FREDS', 'SUN', 400)
insert into #DailyIncome values ('SPIKE', 'WED', 500)
insert into #DailyIncome values ('SPIKE', 'TUE', 200)
insert into #DailyIncome values ('JOHNS', 'WED', 900)
insert into #DailyIncome values ('SPIKE', 'FRI', 100)
insert into #DailyIncome values ('JOHNS', 'MON', 300)
insert into #DailyIncome values ('SPIKE', 'SUN', 400)
insert into #DailyIncome values ('JOHNS', 'FRI', 300)
insert into #DailyIncome values ('FREDS', 'TUE', 500)
insert into #DailyIncome values ('FREDS', 'TUE', 200)
insert into #DailyIncome values ('SPIKE', 'MON', 900)
insert into #DailyIncome values ('FREDS', 'FRI', 900)
insert into #DailyIncome values ('FREDS', 'MON', 500)
insert into #DailyIncome values ('JOHNS', 'SUN', 600)
insert into #DailyIncome values ('SPIKE', 'FRI', 300)
insert into #DailyIncome values ('SPIKE', 'WED', 500)
insert into #DailyIncome values ('SPIKE', 'FRI', 300)
insert into #DailyIncome values ('JOHNS', 'THU', 800)
insert into #DailyIncome values ('JOHNS', 'SAT', 800)
insert into #DailyIncome values ('SPIKE', 'TUE', 100)
insert into #DailyIncome values ('SPIKE', 'THU', 300)
insert into #DailyIncome values ('FREDS', 'WED', 500)
insert into #DailyIncome values ('SPIKE', 'SAT', 100)
insert into #DailyIncome values ('FREDS', 'SAT', 500)
insert into #DailyIncome values ('FREDS', 'THU', 800)
insert into #DailyIncome values ('JOHNS', 'TUE', 600)

SELECT * FROM #DailyIncome

SELECT *
FROM #DailyIncome
pivot(avg(IncomeAmount) FOR IncomeDay IN (
        [MON]
        ,[TUE]
        ,[WED]
        ,[THU]
        ,[FRI]
        ,[SAT]
        ,[SUN]
        )) AS AvgIncomePerDay 
```

多谢你们！

**[更新]**

根据评论，数据库是使用 SQL Server 2000 创建的。有解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:23:28.750

你可以尝试类似的东西

```
SELECT  VendorId,
        AVG(CASE
            WHEN IncomeDay = 'MON'
                THEN IncomeAmount
            ELSE NULL
        END) [MON],
        AVG(CASE
            WHEN IncomeDay = 'TUE'
                THEN IncomeAmount
            ELSE NULL
        END) [TUE],
        AVG(CASE
            WHEN IncomeDay = 'WED'
                THEN IncomeAmount
            ELSE NULL
        END) [WED],
        AVG(CASE
            WHEN IncomeDay = 'THU'
                THEN IncomeAmount
            ELSE NULL
        END) [THU],
        AVG(CASE
            WHEN IncomeDay = 'FRI'
                THEN IncomeAmount
            ELSE NULL
        END) [FRI],
        AVG(CASE
            WHEN IncomeDay = 'SAT'
                THEN IncomeAmount
            ELSE NULL
        END) [SAT],
        AVG(CASE
            WHEN IncomeDay = 'SUN'
                THEN IncomeAmount
            ELSE NULL
        END) [SUN]
FROM    #DailyIncome
GROUP BY VendorId 
```

请注意，我使用 NULLS 而不是 0 的原因是由于 PIVOT 功能。

从[使用 PIVOT 和 UNPIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

> 当聚合函数与 PIVOT 一起使用时，计算聚合时不考虑 value 列中是否存在任何空值。

如果您使用 0 而不是 NULL 运行查询，您会发现不同的结果

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T17:19:11.973

枢轴更干净，代码行更少。语法有点不对劲。试试这个作为你的最终语句，它将语句包装在一个 select 子句中：

```
SELECT * FROM 
(
SELECT *
FROM #DailyIncome
)Data
pivot(avg(IncomeAmount) FOR IncomeDay IN (
        [MON]
    ,[TUE]
    ,[WED]
    ,[THU]
    ,[FRI]
    ,[SAT]
    ,[SUN]
    )) 
```

AS 平均每日收入

# c# - DotCMIS/Alfresco：调用 GetRootFolder 时出现“XML 文档中的错误”

> ID：11980549
> 
> 赞同：0
> 
> 时间：2012-08-16T04:04:56.000
> 
> 标签：c#, alfresco, cmis, dotcmis

使用[DotCMIS](http://chemistry.apache.org/dotnet/dotcmis.html)，我可以成功启动到[Alfresco](http://alfresco.com) 4.0.1 CMIS 服务器的会话。
但是当我打电话时`session.GetRootFolder()`，我得到以下异常：

```
Unhandled Exception: DotCMIS.Exceptions.CmisConnectionException: Parsing exception! ---> System.InvalidOperationException: There is an error in XML document. ---> System.InvalidOperationException: Read by order only possible for encoded/bare format
  at System.Xml.Serialization.ClassMap.GetElement (Int32 index) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObjectElement (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot (System.Xml.Serialization.XmlTypeMapping rootMap) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot () [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.Serialization.XmlSerializationReader reader) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.Serialization.XmlSerializationReader reader) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.XmlReader xmlReader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.DeserializeObject (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.ParseElement (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.ParseEntry (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.Parse () [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AbstractAtomPubService.Parse[AtomEntry] (System.IO.Stream stream) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at DotCMIS.Binding.AtomPub.AbstractAtomPubService.Parse[AtomEntry] (System.IO.Stream stream) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AbstractAtomPubService.GetObjectInternal (System.String repositoryId, IdentifierType idOrPath, System.String objectIdOrPath, Nullable`1 returnVersion, System.String filter, Nullable`1 includeAllowableActions, Nullable`1 includeRelationships, System.String renditionFilter, Nullable`1 includePolicyIds, Nullable`1 includeAcl, IExtensionsData extension) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.ObjectService.GetObject (System.String repositoryId, System.String objectId, System.String filter, Nullable`1 includeAllowableActions, Nullable`1 includeRelationships, System.String renditionFilter, Nullable`1 includePolicyIds, Nullable`1 includeAcl, IExtensionsData extension) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetObject (System.String objectId, IOperationContext context) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetObject (IObjectId objectId, IOperationContext context) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetRootFolder (IOperationContext context) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetRootFolder () [0x00000] in <filename unknown>:0 
  at tests.sln.MainClass.Main (System.String[] args) [0x00074] in /home/nico/src/CmisSync/tests/tests.sln/Main.cs:27 
[ERROR] FATAL UNHANDLED EXCEPTION: DotCMIS.Exceptions.CmisConnectionException: Parsing exception! ---> System.InvalidOperationException: There is an error in XML document. ---> System.InvalidOperationException: Read by order only possible for encoded/bare format
  at System.Xml.Serialization.ClassMap.GetElement (Int32 index) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObjectElement (System.Xml.Serialization.XmlTypeMapElementInfo elem) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadMembers (System.Xml.Serialization.ClassMap map, System.Object ob, Boolean isValueList, Boolean readBySoapOrder) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstanceMembers (System.Xml.Serialization.XmlTypeMapping typeMap, System.Object ob) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadClassInstance (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadObject (System.Xml.Serialization.XmlTypeMapping typeMap, Boolean isNullable, Boolean checkType) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot (System.Xml.Serialization.XmlTypeMapping rootMap) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializationReaderInterpreter.ReadRoot () [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.Serialization.XmlSerializationReader reader) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.Serialization.XmlSerializationReader reader) [0x00000] in <filename unknown>:0 
  at System.Xml.Serialization.XmlSerializer.Deserialize (System.Xml.XmlReader xmlReader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.DeserializeObject (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.ParseElement (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.ParseEntry (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AtomPubParser.Parse () [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AbstractAtomPubService.Parse[AtomEntry] (System.IO.Stream stream) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at DotCMIS.Binding.AtomPub.AbstractAtomPubService.Parse[AtomEntry] (System.IO.Stream stream) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.AbstractAtomPubService.GetObjectInternal (System.String repositoryId, IdentifierType idOrPath, System.String objectIdOrPath, Nullable`1 returnVersion, System.String filter, Nullable`1 includeAllowableActions, Nullable`1 includeRelationships, System.String renditionFilter, Nullable`1 includePolicyIds, Nullable`1 includeAcl, IExtensionsData extension) [0x00000] in <filename unknown>:0 
  at DotCMIS.Binding.AtomPub.ObjectService.GetObject (System.String repositoryId, System.String objectId, System.String filter, Nullable`1 includeAllowableActions, Nullable`1 includeRelationships, System.String renditionFilter, Nullable`1 includePolicyIds, Nullable`1 includeAcl, IExtensionsData extension) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetObject (System.String objectId, IOperationContext context) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetObject (IObjectId objectId, IOperationContext context) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetRootFolder (IOperationContext context) [0x00000] in <filename unknown>:0 
  at DotCMIS.Client.Impl.Session.GetRootFolder () [0x00000] in <filename unknown>:0 
```

一个重要的部分似乎是：`Read by order only possible for encoded/bare format`

我的代码几乎直接来自[教程](http://chemistry.apache.org/dotnet/getting-started-with-dotcmis.html)：

```
using System;
using System.Collections.Generic;
using DotCMIS;
using DotCMIS.Client.Impl;
using DotCMIS.Client;
using DotCMIS.Data.Impl;
using DotCMIS.Data.Extensions;
namespace tests.sln
{
    class MainClass
    {
        public static void Main (string[] args)
        {
            // Connect to repository
            Dictionary<string, string> parameters = new Dictionary<string, string>();
            parameters[SessionParameter.BindingType] = BindingType.AtomPub;
            parameters[SessionParameter.AtomPubUrl] = "http://localhost:8080/alfresco/cmisatom";
            parameters[SessionParameter.User] = "admin";
            parameters[SessionParameter.Password] = "admin";
            SessionFactory factory = SessionFactory.NewInstance();
            ISession session = factory.GetRepositories(parameters)[0].CreateSession();
            Console.WriteLine("Created CMIS session: " + session.ToString());

            // Get the root folder
            IFolder rootFolder = session.GetRootFolder(); // Error happens here
        }
    }
} 
```

我错过了什么？

在调试模式下，我可以`DotCMIS.Client.Impl.Session.GetObject (objectId="workspace://SpacesStore/77acb21f-811c-49a3-be4d-5cc7f177f461"`在堆栈中看到，不确定它的含义，但`77acb21f-811c-49a3-be4d-5cc7f177f461`确实是 Alfresco 的节点引用`company_home`。

`http://localhost:8080/alfresco/service/cmisatom`如果我在上面的代码中将 URL 更改为，`Not Found`则会在前面的`GetRepositories`行中出现错误。所以我很确定我的网址是正确的。

我下载了 DotCMIS 源代码，现在正在 Monodevelop 中调试它。

使用 Wireshark，我已经确定了发生异常的数据包：

```
<?xml version='1.0' encoding='UTF-8'?><atom:entry xmlns:atom="http://www.w3.org/2005/Atom" xmlns:cmis="http://docs.oasis-open.org/ns/cmis/core/200908/" xmlns:cmisra="http://docs.oasis-open.org/ns/cmis/restatom/200908/" xmlns:app="http://www.w3.org/2007/app"><atom:author><atom:name>System</atom:name></atom:author><atom:id>http://chemistry.apache.org/d29ya3NwYWNlOi8vU3BhY2VzU3RvcmUvNzdhY2IyMWYtODExYy00OWEzLWJlNGQtNWNjN2YxNzdmNDYx</atom:id><atom:published>2012-06-08T04:46:12Z</atom:published><atom:title>Company Home</atom:title><app:edited>2012-06-08T04:46:22Z</app:edited><atom:updated>2012-06-08T04:46:22Z</atom:updated><cmisra:object xmlns:ns3="http://docs.oasis-open.org/ns/cmis/messaging/200908/"><cmis:properties><cmis:propertyId queryName="cmis:allowedChildObjectTypeIds" displayName="Allowed Child Object Types Ids" localName="allowedChildObjectTypeIds" propertyDefinitionId="cmis:allowedChildObjectTypeIds" /><cmis:propertyId queryName="cmis:objectTypeId" displayName="Object Type Id" localName="objectTypeId" propertyDefinitionId="cmis:objectTypeId"><cmis:value>cmis:folder</cmis:value></cmis:propertyId><cmis:propertyString queryName="cmis:path" displayName="Path" localName="path" propertyDefinitionId="cmis:path"><cmis:value>/</cmis:value></cmis:propertyString><cmis:propertyString queryName="cmis:name" displayName="Name" localName="name" propertyDefinitionId="cmis:name"><cmis:value>Company Home</cmis:value></cmis:propertyString><cmis:propertyDateTime queryName="cmis:creationDate" displayName="Creation Date" localName="creationDate" propertyDefinitionId="cmis:creationDate"><cmis:value>2012-06-08T13:46:12.655+09:00</cmis:value></cmis:propertyDateTime><cmis:propertyString queryName="cmis:changeToken" displayName="Change token" localName="changeToken" propertyDefinitionId="cmis:changeToken" /><cmis:propertyString queryName="cmis:lastModifiedBy" displayName="Last Modified By" localName="lastModifiedBy" propertyDefinitionId="cmis:lastModifiedBy"><cmis:value>System</cmis:value></cmis:propertyString><cmis:propertyString queryName="cmis:createdBy" displayName="Created by" localName="createdBy" propertyDefinitionId="cmis:createdBy"><cmis:value>System</cmis:value></cmis:propertyString><cmis:propertyId queryName="cmis:objectId" displayName="Object Id" localName="objectId" propertyDefinitionId="cmis:objectId"><cmis:value>workspace://SpacesStore/77acb21f-811c-49a3-be4d-5cc7f177f461</cmis:value></cmis:propertyId><cmis:propertyId queryName="cmis:baseTypeId" displayName="Base Type Id" localName="baseTypeId" propertyDefinitionId="cmis:baseTypeId"><cmis:value>cmis:folder</cmis:value></cmis:propertyId><cmis:propertyId queryName="alfcmis:nodeRef" displayName="Alfresco Node Ref" localName="nodeRef" propertyDefinitionId="alfcmis:nodeRef"><cmis:value>workspace://SpacesStore/77acb21f-811c-49a3-be4d-5cc7f177f461</cmis:value></cmis:propertyId><cmis:propertyDateTime queryName="cmis:lastModificationDate" displayName="Last Modified Date" localName="lastModificationDate" propertyDefinitionId="cmis:lastModificationDate"><cmis:value>2012-06-08T13:46:22.049+09:00</cmis:value></cmis:propertyDateTime><cmis:propertyId queryName="cmis:parentId" displayName="Parent Id" localName="parentId" propertyDefinitionId="cmis:parentId" /><aspects:aspects xmlns="http://www.alfresco.org" xmlns:aspects="http://www.alfresco.org"><appliedAspects>P:app:uifacets</appliedAspects><properties><cmis:propertyString xmlns="http://docs.oasis-open.org/ns/cmis/core/200908/" propertyDefinitionId="app:icon"><value>space-icon-default</value></cmis:propertyString><cmis:propertyString xmlns="http://docs.oasis-open.org/ns/cmis/core/200908/" propertyDefinitionId="cm:description"><value>The company root space</value></cmis:propertyString><cmis:propertyString xmlns="http://docs.oasis-open.org/ns/cmis/core/200908/" propertyDefinitionId="cmis:policyText" /><cmis:propertyString xmlns="http://docs.oasis-open.org/ns/cmis/core/200908/" propertyDefinitionId="cm:title"><value>Company Home</value></cmis:propertyString></properties><appliedAspects>P:cm:titled</appliedAspects><appliedAspects>P:sys:localized</appliedAspects></aspects:aspects></cmis:properties><cmis:allowableActions><cmis:canDeleteObject>false</cmis:canDeleteObject><cmis:canUpdateProperties>true</cmis:canUpdateProperties><cmis:canGetFolderTree>true</cmis:canGetFolderTree><cmis:canGetProperties>true</cmis:canGetProperties><cmis:canGetObjectRelationships>true</cmis:canGetObjectRelationships><cmis:canGetObjectParents>false</cmis:canGetObjectParents><cmis:canGetFolderParent>false</cmis:canGetFolderParent><cmis:canGetDescendants>true</cmis:canGetDescendants><cmis:canMoveObject>false</cmis:canMoveObject><cmis:canDeleteContentStream>false</cmis:canDeleteContentStream><cmis:canCheckOut>false</cmis:canCheckOut><cmis:canCancelCheckOut>false</cmis:canCancelCheckOut><cmis:canCheckIn>false</cmis:canCheckIn><cmis:canSetContentStream>false</cmis:canSetContentStream><cmis:canGetAllVersions>false</cmis:canGetAllVersions><cmis:canAddObjectToFolder>false</cmis:canAddObjectToFolder><cmis:canRemoveObjectFromFolder>false</cmis:canRemoveObjectFromFolder><cmis:canGetContentStream>false</cmis:canGetContentStream><cmis:canApplyPolicy>false</cmis:canApplyPolicy><cmis:canGetAppliedPolicies>true</cmis:canGetAppliedPolicies><cmis:canRemovePolicy>false</cmis:canRemovePolicy><cmis:canGetChildren>true</cmis:canGetChildren><cmis:canCreateDocument>true</cmis:canCreateDocument><cmis:canCreateFolder>true</cmis:canCreateFolder><cmis:canCreateRelationship>true</cmis:canCreateRelationship><cmis:canDeleteTree>false</cmis:canDeleteTree><cmis:canGetRenditions>false</cmis:canGetRenditions><cmis:canGetACL>true</cmis:canGetACL><cmis:canApplyACL>true</cmis:canApplyACL></cmis:allowableActions></cmisra:object><atom:link rel="service" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e?repositoryId=200a3d48-6a94-4cb7-b1bd-186eb6be0c4e" type="application/atomsvc+xml" /><atom:link rel="self" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/entry?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/atom+xml;type=entry" cmisra:id="workspace://SpacesStore/77acb21f-811c-49a3-be4d-5cc7f177f461" /><atom:link rel="enclosure" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/entry?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/atom+xml;type=entry" /><atom:link rel="edit" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/entry?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/atom+xml;type=entry" /><atom:link rel="describedby" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/type?id=cmis%3Afolder" type="application/atom+xml;type=entry" /><atom:link rel="http://docs.oasis-open.org/ns/cmis/link/200908/allowableactions" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/allowableactions?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/cmisallowableactions+xml" /><atom:link rel="down" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/children?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/atom+xml;type=feed" /><atom:link rel="down" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/descendants?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/cmistree+xml" /><atom:link rel="http://docs.oasis-open.org/ns/cmis/link/200908/foldertree" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/foldertree?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/cmistree+xml" /><atom:link rel="http://docs.oasis-open.org/ns/cmis/link/200908/acl" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/acl?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/cmisacl+xml" /><atom:link rel="http://docs.oasis-open.org/ns/cmis/link/200908/policies" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/policies?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/atom+xml;type=feed" /><atom:link rel="http://docs.oasis-open.org/ns/cmis/link/200908/relationships" href="http://localhost:8080/alfresco/cmisatom/200a3d48-6a94-4cb7-b1bd-186eb6be0c4e/relationships?id=workspace%3A%2F%2FSpacesStore%2F77acb21f-811c-49a3-be4d-5cc7f177f461" type="application/atom+xml;type=feed" /></atom:entry> 
```

它是有效的 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:22:41.913

这是一个单声道错误。单声道崩溃`<xsd:choice>`。
请参阅[https://bugzilla.xamarin.com/show_bug.cgi?id=2907](https://bugzilla.xamarin.com/show_bug.cgi?id=2907)

* * *

子答案：

您正在使用旧的 Alfresco CMIS URL。

查看：

```
http://localhost:8080/alfresco/service/cmis/index.html 
```

# android - 从 SDCARD 应用背景资源

> ID：11980550
> 
> 赞同：1
> 
> 时间：2012-08-16T04:04:57.027
> 
> 标签：android

我正在尝试找到一种将背景资源应用于多个按钮的方法。这些资源来自 SDCARD。应用资源的通常方式是这样的：

```
Button b = new Button(getContext());
b.setBackgroundResource(R.drawable.button_states);
//where button_states is an XML file 
```

但我不知道如何应用背景，如果 XML 文件来自 sdcard。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:15:31.477

使用下面的代码，它可能会帮助你。

```
Button b = new Button(getContext());
Bitmap bmp = BitmapFactory.decodeFile("/mnt/sdcard/test.png");
Drawable d = new BitmapDrawable(bmp);
b.setBackgroundDrawable(d); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:24:44.137

```
String rootPath =Environment.getExternalStorageDirectory().getAbsolutePath(); // Returns path to sdcard
rootPath+="/test.png"
Bitmap b = BitmapFactory.decodeFile(s);
mImageView.setImageBitmap(b); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:44:05.923

不要将xml文件存储在sdcard中，而是使用这样的东西

```
<selector>
<item>
    <shape>
        <gradient
            android:startColor="#343434"
            android:endColor="#171717"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#171717" />
        <corners
            android:radius="4dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
</selector> 
```

尝试将其用作可绘制文件夹中的单独 xml 文件并将其应用于所需的按钮，例如

```
style="@style/ButtonText 
```

在布局 xml 文件中

# python - Python：如何解析 json 数据并在 GAE 上使用 webapp2 渲染它并部署搜索结果应用程序？

> ID：11980552
> 
> 赞同：-1
> 
> 时间：2012-08-16T04:05:05.827
> 
> 标签：python, json, google-app-engine

大家 : ) 我有一个可以像“http://key.xxxxxx.org:10093/?q=”这样搜索的数据库，当在 url 中输入关键字（=mark 后面）时，它可以显示很多 json 数据。

现在我在 GAE 上使用 webapp2 编写了一个简单的 webapp：在 /search 页面上，当我输入关键字时，它可以解析 /result 页面上的 jsondata 内容。这是我的部分代码：

```
# -*- coding: utf-8 -*-

import os
import re
import httplib
import json
import urllib
from string import letters

import webapp2
import jinja2

template_dir = os.path.join(os.path.dirname(__file__), 'templates')
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                               autoescape = True)

def render_str(template, **params):
    t = jinja_env.get_template(template)
    return t.render(params)

def renderJson(query):
    conn = httplib.HTTPConnection('xxx.xxxxx.org:10093')
    conn.request('GET', '/?q=%s' % urllib.quote_plus(query))
    res = conn.getresponse()
    data = res.read()
    j = json.loads(data)
    results = []
    result = j['data']['group'][0]['resultitem']
    for l in result:
        for k,v in l.items():
            if k == 'word':
                results.append(l[k])
    return results

class BaseHandler(webapp2.RequestHandler):
    def render(self, template, **kw):
        self.response.out.write(render_str(template, **kw))

    def write(self, *a, **kw):
        self.response.out.write(*a, **kw)

class Search(BaseHandler):
    def get(self):
        self.render("search.html")

    def post(self):
        q = self.request.get('query')
        if q:
            self.redirect('/result/?q='+query)

class Result(BaseHandler):
    def get(self):
        q = self.request.get('query')
        self.render('result.html', query = q, result = renderJson(q))

app = webapp2.WSGIApplication([
                               ('/search', Search),
                               ('/result', Result)
                               ],
                              debug=True) 
```

# 在 search.html 中，我写道

```
<input type="text" name="q" value="{{query}}"></input> 
```

在 result.html 中

```
<p>{{result}}</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:29:55.163

要从您需要使用的 url 获取参数：

```
q = self.request.get('query') 
```

请参阅[入门指南](https://developers.google.com/appengine/docs/python/gettingstartedpython27/handlingforms)和[webapp 改进文档](http://webapp-improved.appspot.com/guide/request.html)。

然后您将该参数传递给`renderJson`as `renderJson(q)`，在`renderJson` 第二行中也需要先引用查询字符串（并传递 q 参数）

```
conn.request('GET', '/?q=%s' % urllib.quote(query)) 
```

最后要渲染最终输出，请阅读[入门指南](https://developers.google.com/appengine/docs/python/gettingstartedpython27/templates)。

# python - 使用 struct.pack python 打包带有字符串和 int 类型的列表

> ID：11980553
> 
> 赞同：1
> 
> 时间：2012-08-16T04:05:07.063
> 
> 标签：python, pack

对不起我的英语不好

我有一个类似的列表：

```
[['string type','short int type','long int type','string type','float'],
['Stackoverflow','32','0','any stringgg','55.0'],
['anystring','16','1654657987984','striiingg','2.5']] 
```

我打电话：

```
['string type','short int type','long int type','string type','float'] 
```

是第一个子列表并且

```
['Stackoverflow','32','0','any stringgg','55.0'] 
```

是第二个子列表，三个子列表相同

如何根据第一个子列表的类型在第二个和第三个子列表中使用 struct.pack() 数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:23:58.247

你可以做这样的事情（快速编码，可以使用一些工作）

```
import struct

type_map = {
        'string type': 's',
        'short int type': 'h',
        'long int type': 'q',
        'float': 'f'
        }

conversion = {
        's': str,
        'h': int,
        'q': int,
        'f': float
        }

def do_pack(types, data):
    if len(types) != len(data):
        raise Excpetion("wrong lengths")
    packing = '<'
    data_iter = []
    for i, struct_type in enumerate(types):
        t = type_map[struct_type]
        if t == 's':
            packing += '%ds' % len(data[i]) 
            data_iter.append(data[i])
        else:
            packing += t
            data_iter.append(conversion[t](data[i]))
    return struct.pack(packing, *data_iter), packing

packer = [['string type','short int type','long int type','string type','float'],['Stackoverflow','32','0','any stringgg','55.0'],['anystring','16','1654657987984','striiingg','2.5']]

types = packer[0]
for data_set in packer[1:]:
    binary, packing = do_pack(types, data_set)
    print struct.unpack(packing, binary) 
```

**输出**

```
('Stackoverflow', 32, 0, 'any stringgg', 55.0)
('anystring', 16, 1654657987984, 'striiingg', 2.5) 
```

# javascript - 在我访问链接之前下拉菜单消失了

> ID：11980559
> 
> 赞同：3
> 
> 时间：2012-08-16T04:05:53.367
> 
> 标签：javascript, jquery

我怎样才能将菜单的消失延迟几毫秒/秒？继续`fadesettings: {overduration: 350, outduration: 2000}`在 js 中编辑它只会改变动画速度。但这不是我想要的 =)。

请查看[此 JSFiddle](http://jsfiddle.net/SgyeB/)以查看 JS、CSS 和 HTML。

谢谢你们的帮助

PS：- 关于你看到的 top:80px 差距，我故意把它放在那里，因为这就是我设计网站的方式，所以我想要那里的差距。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:17:03.570

您可以使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)函数在调用函数之前添加延迟。

在您的情况下，如果您想延迟菜单的淡出，而不仅仅是这样做：

```
$this.children("ul:eq(0)").fadeOut(jquerycssmenu.fadesettings.outduration); 
```

你可以做

```
setTimeout(function() { $this.children("ul:eq(0)").fadeOut(jquerycssmenu.fadesettings.outduration)
}, 2000); 
```

将通话延迟 2 秒。

请注意，我在您的小提琴中缓存了 $(this) 选择器，以便仍然能够访问该变量。

[http://jsfiddle.net/KB5Ve/](http://jsfiddle.net/KB5Ve/)

编辑：添加了对小提琴的评论：http: [//jsfiddle.net/DBvq7/](http://jsfiddle.net/DBvq7/)

# c++ - 无法编译简单的 C++ 程序，需要说明

> ID：11980561
> 
> 赞同：1
> 
> 时间：2012-08-16T04:06:04.347
> 
> 标签：c++, syntax

我从我正在阅读的材料中借鉴了这个例子。根据教科书，这里一切都很好。

然而，当试图编译这些文件时，我遇到了一个问题（见下文）

3 个文件

`Date.cpp:`

```
 #include "Date.h"

    Date::Date()
    {
        setDate(1,1,1900);
    }

    Date::Date(int month, int day, int year)
    {
        setDate(month, day, year);
    } 
```

`Date.h:`

```
class Date
{
public:
    Date ();
    Date (int month, int day, int year);

    void setDate(int month, int day, int year);
private:
    int m_month;
    int m_day;
    int m_year;
}; 
```

`Main.cpp:`

```
#include "Date.h"

int main () 
{
    Date d1 ;

    return 1;
} 
```

尝试编译时`g++ *`，我得到

```
Undefined symbols for architecture x86_64:
  "Date::setDate(int, int, int)", referenced from:
      Date::Date()  in cc8C1q6q.o
      Date::Date()  in cc8C1q6q.o
      Date::Date(int, int, int) in cc8C1q6q.o
      Date::Date(int, int, int) in cc8C1q6q.o
ld: symbol(s) not found for architecture x86_64
collect2: error: ld returned 1 exit status 
```

当我`Date *d;`改为声明时，程序编译。当我`Date *d = new Date`改为声明时，程序失败。

请问这里是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:07:53.890

您还没有`setDate`为您的课程提供方法。您在头文件中声明它，但您还需要为其提供实际*代码*。

您看到的错误是链接器 ( `ld`) 告诉您，尽管您有一段代码试图*调用*该方法，但链接器不知道它在哪里。

您需要提供方法，例如将以下内容放入`Date.cpp`：

```
void Date::setDate (int month, int day, int year) {
    m_month = month;
    m_day = day;
    m_year = year;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:08:27.243

您关心从两个构造函数调用的函数 setDate 未定义

您需要类似 .cpp 文件中的内容

```
 void  Date::setDate(int month, int day, int year)
        {
            //code
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T04:08:27.713

看来你从来没有定义`Date::setDate()`

# c# - 来自数组或列表的邮件合并

> ID：11980564
> 
> 赞同：0
> 
> 时间：2012-08-16T04:06:55.030
> 
> 标签：c#, mailmerge

在[这个站点](http://www.aspose.com/docs/display/wordsnet/How+to++Execute+Simple+Mail+Merge)中是一个关于使用 2 个数组和 MailMerge.Execute 方法进行邮件合并的示例，但该方法不接受 2 个参数。

无论如何，有没有办法用 2 个数组或 2 个列表做类似的事情？

谢谢。

这是他们使用的代码：

```
 // Open an existing document.
    Document doc = new Document(MyDir + "MailMerge.ExecuteArray.doc");

    // Fill the fields in the document with user data.
    doc.MailMerge.Execute(
    new string[] {"FullName", "Company", "Address", "Address2", "City"},
    new object[] {"James Bond", "MI5 Headquarters", "Milbank", "", "London"}); 
```

这是我要实现的方法：

```
 private void ReplaceMailMergeField(String plantilla, String[] campos, Object[] valores)
    {
        Object oMissing = System.Reflection.Missing.Value;
        Object oTrue = true;
        Object oFalse = false;
        Word.Application wordApp = new Word.Application();
        Word.Document wordDoc = new Word.Document();
        wordApp.Visible = true;
        Object templatePath = plantilla;
        wordDoc = wordApp.Documents.Add(ref templatePath, ref oMissing, ref oMissing, ref oMissing);
        wordDoc.MailMerge.Execute(campos, valores);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:28:49.267

采用两个数组的第一个代码块是**Aspose Words for .NET**，这是一个独立于**MS Word API**的组件。

MS Word[`MailMerge.Execute()`](http://msdn.microsoft.com/en-us/library/office/ff841097.aspx)是一种不同的方法，它只采用一个可选参数。

要使用仅安装 C# 和 office 的方式自动合并邮件，请参阅以下文章：

[KB301659 如何自动化 Microsoft Word 以从 Visual C# 执行邮件合并](http://support.microsoft.com/kb/301659)

[http://everythingsharepoint.blogspot.in/2011/12/c-microsoft-word-2010-automated-mail.html](http://everythingsharepoint.blogspot.in/2011/12/c-microsoft-word-2010-automated-mail.html)

[http://everythingsharepoint.blogspot.in/2011/12/c-microsoft-word-2010-automated-mail_01.html](http://everythingsharepoint.blogspot.in/2011/12/c-microsoft-word-2010-automated-mail_01.html)

# java - Java Web 应用程序中的用户访问级别

> ID：11980565
> 
> 赞同：2
> 
> 时间：2012-08-16T04:06:56.403
> 
> 标签：java, jsp, authentication, tomcat, servlets

我正在尝试将用户访问级别放在我的 Java Web 应用程序中。但即使我输入了我在 tomcat-user.xml 文件中声明的正确用户名和密码，它也不起作用。它进入登录错误页面。基本身份验证方法也不接受正确的用户名和密码。

这个 tomcat-users.xml

```
<tomcat-users>
<!--
  NOTE:  By default, no user is included in the "manager-gui" role required
  to operate the "/manager/html" web application.  If you wish to use this app,
  you must define such a user - the username and password are arbitrary.
-->
<!--
  NOTE:  The sample user and role entries below are wrapped in a comment
  and thus are ignored when reading this file. Do not forget to remove
  <!.. ..> that surrounds them.
-->
<!--
  <role rolename="tomcat"/>
  <role rolename="role1"/>
  <user username="tomcat" password="tomcat" roles="tomcat"/>
  <user username="both" password="tomcat" roles="tomcat,role1"/>
  <user username="role1" password="tomcat" roles="role1"/>

-->
<role rolename=”Admin”/>
<role rolename=”Member”/>
<role rolename=”Doctor”/>
<role rolename=”Guest”/>
<user username=”sirojan” password=”sirojan” roles=”Admin” />
<user username=”ram” password=”ram123” roles=”Member” />
<user username=”vithu” password=”newbie” roles=”Guest” />
</tomcat-users> 
```

这是 server.xml 文件的一部分

```
<Realm className="org.apache.catalina.realm.LockOutRealm">

    <Realm className="org.apache.catalina.realm.MemoryRealm" /> 

        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
<!-- <Realm className="org.apache.catalina.realm.MemoryRealm" /> -->
        <!-- This Realm uses the UserDatabase configured in the global JNDI
             resources under the key "UserDatabase".  Any edits
             that are performed against this UserDatabase are immediately
             available for use by the Realm.  -->
        <Realm className="org.apache.catalina.realm.UserDatabaseRealm" resourceName="UserDatabase"/><!--
-->      </Realm> 
```

这是我的 web.xml 文件的一部分

```
<security-role> 
        <role-name>Admin</role-name> 
    </security-role>
    <security-role>
        <role-name>Member</role-name> 
    </security-role>
    <security-role>
        <role-name>Guest</role-name> 
    </security-role>
    <security-role>
        <role-name>Doctor</role-name> 
    </security-role>
    <login-config>
        <auth-method>FORM</auth-method>
        <form-login-config>
            <form-login-page>/login2.jsp</form-login-page>
            <form-error-page>/loginerror.jsp</form-error-page>
        </form-login-config>
    </login-config>
    <security-constraint>
        <web-resource-collection>
            <web-resource-name>AdminTasks</web-resource-name>
            <url-pattern>/Department.jsp</url-pattern>

            <http-method>GET</http-method>
            <http-method>POST</http-method>
        </web-resource-collection>
        <auth-constraint>
            <role-name>Admin</role-name>
            <role-name>Member</role-name>
        </auth-constraint>

    </security-constraint>
    <error-page>
        <error-code>404</error-code>
        <location>/notFoundError.jsp</location>
    </error-page> 

</web-app> 
```

我有什么不对吗？？？如果您需要进一步评论它。你能给出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:41:28.930

首先检查现有角色是否适合您。

为此，您需要取消注释 tomcat-users.xml 中的角色

如果他们正在工作，并且您能够登录 tomcat 控制台，那么问题是您的语法，

如果它们不起作用，那么您需要查看错误页面文档并检查您的操作是否正确，因为这很容易，并且每次都对我有用。

# actionscript-3 - 使用 AlivePDF 水平翻转页面（镜像页面）

> ID：11980571
> 
> 赞同：0
> 
> 时间：2012-08-16T04:07:52.677
> 
> 标签：actionscript-3, air, pdf-generation, alivepdf

我正在使用 FlashCS5 中的 AlivePDF 创建 PDF。一切都很好，但我想“反映”文本或整个页面以打印它镜像而不编辑图像。希望有人知道怎么做。干杯!

```
myPDF.setFont( regularFont, 160);
myPDF.addText(nombre, 180, 50);
myPDF.setFont( regularFont, 125);
myPDF.addText(tiempo, 20, 50);

var f:FileStream = new FileStream();
file = File.desktopDirectory.resolvePath("pdf/"+date+"_"+client+".pdf");
f.open( file, FileMode.WRITE);
var bytes:ByteArray = myPDF.save(Method.LOCAL);
f.writeBytes(bytes);
f.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T22:34:10.433

您可以通过将未镜像的 PDF 以及一些自定义 PostScript 代码提供给 Ghostscript 来为任何 PDF 实现此目的。假设您的页面宽度为 612 pts（“Letter”），一个可能的命令是：

```
gs \
    -o mirrored.pdf \
    -sDEVICE=pdfwrite \
    -c "<</Install {-1 1 scale -612 0 translate}>> setpagedevice" \
    -f un-mirrored.pdf 
```

# qt - 如何在 Meego 应用中启用状态栏反馈？

> ID：11980588
> 
> 赞同：1
> 
> 时间：2012-08-16T04:10:04.450
> 
> 标签：qt, qml, meego

我正在开发一个 Meego 应用程序。我发现在我的应用程序中，点击顶部状态栏时没有任何反馈。但是当我再次点击折叠状态栏时，有点击声反馈。为什么会这样？如何启用状态栏的反馈？

谢谢！

# jquery - 为具有相同类的元素的子元素绑定事件

> ID：11980589
> 
> 赞同：0
> 
> 时间：2012-08-16T04:10:20.287
> 
> 标签：jquery

我想为特定类的所有秒元素绑定一个点击事件，我正在使用；

```
$("ul.message-list-row > li:eq(1) > div").click(function(){...}); 
```

不幸的是，它不起作用。我也试过没有“>”但没有运气。

我的代码中有 7 个相同的 UL。所以，

```
console.log($("ul.message-list-row").length); 
```

返回 7，但是

```
console.log($("ul.message-list-row > li:eq(1)").length); 
```

返回 1。不应该是 7 吗？错误是什么？

顺便说一句，我正在尝试使用以下标记；

```
<ul class="message-list-row rounded-corners">
    <li>
        <img src="Public/CSS/Images/sample-app-icon-02.png" alt="" title="" />
        <span class="app-name">AppName</span>
        <span class="version">V3.1</span>
        <div class="apple">OS V. - 5.04</div>
    </li>
    <li>
        <div>
            <span>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Nulla vitae elit libero, a pharetra augue. Maecenas sed diam eget risus varius blandit sit amet non magna.Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Nulla vitae elit libero, a pharetra augue. Maecenas sed diam eget risus varius blandit sit amet non magna.</span>
        </div>
    </li>
    <li>
        <div class="progress-bar" title="70"></div>
        <span>%70</span>
    </li>
    <li class="number">7643</li>
    <li class="completed">&nbsp;</li>
    <li>&nbsp;</li>
    <li>
        <ul>
            <li>Language:</li>
            <li>
                <img src="Public/CSS/Images/flag-uk.png" alt="" title="" />
                English
            </li>

            <li>Operator:</li>
            <li>Operator</li>

            <li>Country:</li>
            <li>
                <img src="Public/CSS/Images/flag-tr.png" alt="" title="" />
                Country
            </li>

            <li>Badge:</li>
            <li>Clean</li>
        </ul>
    </li>
</ul>

<ul class="message-list-row rounded-corners">
    <li>
        <img src="Public/CSS/Images/sample-app-icon-03.png" alt="" title="" />
        <span class="app-name">AppName</span>
        <span class="version">V3.1</span>
        <div class="apple">OS V. - 5.04</div>
    </li>
    <li>
        <div>
            <span>Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Nulla vitae elit libero, a pharetra augue. Maecenas sed diam eget risus varius blandit sit amet non magna.Vivamus sagittis lacus vel augue laoreet rutrum faucibus dolor auctor. Nulla vitae elit libero, a pharetra augue. Maecenas sed diam eget risus varius blandit sit amet non magna.</span>
        </div>
    <li>
        <div class="progress-bar" title="0"></div>
        <span>%0</span>
    </li>
    <li class="date">00:22:58</li>
    <li class="waiting">&nbsp;</li>
    <li>
        <a class="settings-button" href=""></a>
        <a class="approve-button action-button" href=""></a>
        <a class="cancel-button action-button" href=""></a>
    </li>
    <li>
        <ul>
            <li>Language:</li>
            <li>
                <img src="Public/CSS/Images/flag-uk.png" alt="" title="" />
                English
            </li>

            <li>Operator:</li>
            <li>Operator</li>

            <li>Country:</li>
            <li>
                <img src="Public/CSS/Images/flag-tr.png" alt="" title="" />
                Country
            </li>

            <li>Badge:</li>
            <li>Clean</li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:10:45.153

`:eq()`不像你想象的那样工作。使用[`:nth-child(2)`](http://api.jquery.com/nth-child-selector/)而不是[`:eq(1)`](http://api.jquery.com/eq-selector/).

> `:nth-child`选择器获取 jQuery 集合中作为其父级的第 n 个子级的每个元素。选择`:eq`器只获取 jQuery 集合中的一个元素，即“第 n 个”（0 索引）元素。

[http://jsfiddle.net/mattball/xhYaP/](http://jsfiddle.net/mattball/xhYaP/)

# sql-server - 我可以使用 SSIS 将所有表从 SQL Server 数据库移动到 Oracle 架构吗？

> ID：11980597
> 
> 赞同：0
> 
> 时间：2012-08-16T04:11:03.880
> 
> 标签：sql-server, ssis, data-migration

我想使用 SSIS 将所有表从 SQL Server 数据库移动到 Oracle 模式。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:53:36.583

我猜，你还在关注这个帖子。

1.  打开投标。

2.  项目 -> SSIS 导入导出向导。

3.  数据源：SQL Server Native Client。

4.  选择服务器名称和源数据库。

5.  选择目标：OLEDB 的 Oracle 提供程序。

6.  输入目标数据库凭据。

7.  单击允许保存密码。

8.  从一个或多个表或视图中选择复制数据。

9.  标记源复选框，它将选择高源列。

10.  下一步->下一步->完成。

11.  包在 SSIS 中创建。

12.  执行包。

# java - Hibernate 看不到名称中带有引号的表

> ID：11980599
> 
> 赞同：1
> 
> 时间：2012-08-16T04:11:12.257
> 
> 标签：java, hibernate, postgresql

我在 db(postgresql) 中有一些名称像这样`"Test"`的表。当我尝试使用休眠从这些表创建 java 类时，它没有发生。我从具有这样名称的表中获取类`test`。如何使休眠可以看到名称中带有引号的表？

**更新**

也许我写的问题不正确。但是我不能创建 java 类，我想知道如何对在 qoutes 中有名称的表进行反向生成。我无法从表名和列名中删除 qoutes，因为它们的名称类似于 Type 和 Full。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:15:34.260

默认情况下，Hibernate 假定数据库表名与类名相同，但您可以通过`@Table`注解覆盖此行为：

```
@Entity
@Table(name="\"Test\"") // Will use "Test" (including the quotes) as the table name
public class Test { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:47:08.857

@Table 注解用于指定要持久化数据的表。name 属性是指表名。如果没有指定@Table 注解，那么 Hibernate 默认使用类名作为表名。所以你的数据库的表名是“Test”，那么你应该使用你的类名是“Test”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:52:34.173

`select * from """Test"""`如果您的表名是“Test” ，请检查您的数据库 。

您的实体类应该是

```
@Entity
@Table(name = "\"\"\"Test\"\"\"")
public class Test {
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T04:53:08.767

看来你现在没有使用注释......

因此，如果您想`"Test"`用作表名，您应该通过 Bohemian 定义的注释定义 POJO 与您的表的映射

```
@Entity
@Table(name="\"Test\"")
public class Test { 
```

或`Test.hbm.xml`在其中定义您必须将表和字段映射到 java 类和列。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-20T23:11:05.033

或者，您可以在 @Table 注释中指定架构和数据库名称。

```
@Entity
@Table(name = "Test", schema = "public", catalog = "TestDatabase") 
```

Hibernate 将识别表而不需要转义双引号。

# ios - 如何使用 segues 创建一个 uiview，故事板中的多个 UIViewControllers 使用它

> ID：11980601
> 
> 赞同：0
> 
> 时间：2012-08-16T04:11:43.130
> 
> 标签：ios, ios5, storyboard

基本上我想要做的是将 UIView 包含到情节提要上的多个 UIViewControllers 中。我可以包含 uiview，但 UIView 中的 segues 不起作用。我有一个这样的故事板： ![在此处输入图像描述](../Images/63729e39ffe4ee9a84fb1b344beedd7e.png)

我有一个带有 2 个 UIViewControllers`First`和`Second`. 我有一个单独的 UITableViewController 和另外两个 UIViewControllers `A`，并`B`与 segues 连接。

我可以将表格视图添加到视图中`First`并`Second`作为子视图，但是当我点击单元格时，它不会转到下一个屏幕`A`或`B`. 我有点想明白为什么它不起作用，但就是想不出最好的方法来完成这个。

有什么好的方法可以做到这一点吗？我是故事板的新手，但开发 iOS 应用程序已经有一段时间了。

**编辑：**

我将 tableViewController 添加到每个视图的方式如下：

```
self.tableViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"theTableViewController"];
[self.view addSubview:_tableViewController.tableView]; 
```

当点击表视图中的单元格时，会调用 prepareForSegue:segue:sender，但不会推送到导航控制器，因为表视图控制器作为子视图位于每个视图控制器中

**编辑2：**

我在[这里发布了我的测试项目](http://blog.enjoitech.jp/upload/37_storyboard.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:35:04.430

您可以尝试 2 种方法。

1.直接在tableview单元格和下一个视图控制器之间创建一个segue。我要强调的是，除非尝试下面的方法，否则不要在 tableview 或视图与下一个视图控制器之间创建 segue。

2.将此代码添加到您的 tableview 控制器：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([indexPath row]) {
        [self performSegueWithIdentifier:@"segueToB" sender:self];
    }else {
         [self performSegueWithIdentifier:@"segueToA" sender:self];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T19:28:51.950

我终于想出了如何在子视图中进行segue。其实很简单。看来我需要将视图控制器作为“childViewControllers”添加到主视图控制器

代替

```
self.tableViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"theTableViewController"]; 
```

我确实喜欢这样：

```
[self addChildViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"theTableViewController"];
[self.view addSubview:_tableViewController.tableView]; 
```

并且 childViewController 中的 segues 按我的预期工作。谢谢你们的帮助。

# clojure - Clojure 字符串替换奇怪的行为

> ID：11980610
> 
> 赞同：1
> 
> 时间：2012-08-16T04:13:13.047
> 
> 标签：clojure

我想我在 clojure 中发现了一个错误，谁能解释为什么输出中缺少反斜杠？

```
(clojure.string/replace "The color? is red." #"[?.]"  #(str "zzz\\j" %1 %1))

=> "The colorzzzj?? is redzzzj.." 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:19:59.660

请查看函数文档：[http ://clojuredocs.org/clojure_core/clojure.string/replace](http://clojuredocs.org/clojure_core/clojure.string/replace)

具体来说：

> 注意：当 replace-first 或 replace 将正则表达式模式作为匹配参数时，替换字符串中的美元符号 ($) 和反斜杠 (\) 字符将被特殊处理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T04:22:51.677

这不是错误。函数在第三个参数中返回的字符串被解析为转义序列，以便您可以执行以下操作：

```
(clojure.string/replace "The color? is red." #"([?.])" "\\$1$1")
; => "The color$1? is red$1." 
```

注意第一个 $ 是如何被反斜杠转义的，而第二个用作捕获组的标识符。更改您的代码以使用四个反斜杠并且它可以工作：

```
(clojure.string/replace "The color? is red." #"[?.]"  #(str "zzz\\\\j" %1 %1)) 
```

# zxing - ios6.0上的ZxingWidget存档错误

> ID：11980618
> 
> 赞同：3
> 
> 时间：2012-08-16T04:14:36.030
> 
> 标签：zxing, ios6

我尝试归档 ZxingWedget Demo,scanTest。编译没问题。它可以在模拟器上运行。但是在ios6.0上不能完全存档。

这是错误：

```
Stripping /Users/ganguo/Library/Developer/Xcode/DerivedData/ScanTest-gadjcaxemklyqpcxsvmiorzakfhu/Build/Intermediates/ArchiveIntermediates/ScanTest/IntermediateBuildFilesPath/ZXingWidget.build/Release-iphoneos/ZXingWidget.build/Objects-normal/armv7/libZXingWidget.a
    cd /Users/ganguo/objc/lib/zxing/iphone/ZXingWidget
    setenv PATH "/Applications/app/Xcode45-DP4.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/app/Xcode45-DP4.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    /Applications/app/Xcode45-DP4.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip -S /Users/ganguo/Library/Developer/Xcode/DerivedData/ScanTest-gadjcaxemklyqpcxsvmiorzakfhu/Build/Intermediates/ArchiveIntermediates/ScanTest/IntermediateBuildFilesPath/ZXingWidget.build/Release-iphoneos/ZXingWidget.build/Objects-normal/armv7/libZXingWidget.a

0  0x10eaf75f0  __assert_rtn + 144
1  0x10eb5ed12  ld::tool::FunctionStartsAtom<arm>::encode() const + 594
2  0x10eb4d05b  ld::tool::OutputFile::updateLINKEDITAddresses(ld::Internal&) + 251
3  0x10eb483b8  ld::tool::OutputFile::write(ld::Internal&) + 136
4  0x10eaf7c5f  main + 1263
A linker snapshot was created at:
    /tmp/strip.7jH8OR-2012-07-16-113649.ld-snapshot
ld: Assertion failed: (addr != badAddress), function encode, file /SourceCache/ld64/ld64-134.5/src/ld/LinkEdit.hpp, line 1289.
/Applications/app/Xcode45-DP4.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip: internal link edit command failed
Command /Applications/app/Xcode45-DP4.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/strip failed with exit code 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T22:20:36.673

我今天针对这个问题向 Apple 提交了错误 (12176840)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T13:35:02.660

我相信 zxing 库还不支持 armv7 架构。我很想错，虽然...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:11:22.807

做一个清洁，然后再试一次。如果仍然失败，请向 Apple 提交错误。这是一个 xcode/toolchain 错误（在预发布软件中）。

# grails - IntelliJ 中 Grails 项目的同步错误

> ID：11980623
> 
> 赞同：3
> 
> 时间：2012-08-16T04:15:32.710
> 
> 标签：grails, maven, intellij-idea

突然间，我在 IntelliJ 中收到此错误，该项目在 IDE 之外运行良好。我也可以很好地创建和运行新项目。

```
IDEA hook: Grails not found!
java.lang.NullPointerException
    at org.jetbrains.groovy.grails.rt.Agent$2.run(Agent.java:99)
    at java.lang.Thread.run(Thread.java:619) 
```

此错误之前有一些可疑的行：

```
[INFO]    task-segment: [grails:exec] (aggregator-style)
[INFO] ------------------------------------------------------------------------
[INFO] [grails:exec {execution: default-cli}]
[FATAL ERROR] org.grails.maven.plugin.GrailsExecMojo#execute() caused a linkage error (java.lang.NoSuchMethodError) and may be out-of-date. Check the realms:
[FATAL ERROR] Plugin realm = app0.child-container[org.grails:grails-maven-plugin:1.3.7] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T22:22:34.690

升级到 11.1.4 最新的 RC，这解决了这个问题。

[http://confluence.jetbrains.net/display/IDEADEV/IDEA+11.1+EAP](http://confluence.jetbrains.net/display/IDEADEV/IDEA+11.1+EAP)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T21:53:55.883

我也遇到了这个问题。在尝试了各种方法后，我删除了我的 .iml 项目文件并完全重新导入了 maven 项目。

这解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-09T13:18:32.523

对我来说，这很有效，在 intellij 的上下文菜单中，右键单击模块，然后选择：Grails > Synchronize Grails Settings。然后再试一次

# java - 检查表的初始ID（0）是否为空

> ID：11980628
> 
> 赞同：1
> 
> 时间：2012-08-16T04:15:46.523
> 
> 标签：java, mysql

我有一个表 devicedetails，ID 为 d_deviceId 作为自动增量。如果我删除第一个 ID(ie, 0) ，我需要将下一个条目插入到 ID 值 0 中。

如何在 MySQL 中实现这一点。

如果我删除任何其他 ID（比如 5），我使用以下查询：

```
SELECT d_deviceId + 1 FROM devicedetails d1 WHERE NOT EXISTS 
(SELECT 1 FROM devicedetails d2 WHERE d2.d_deviceId = d1.d_deviceId + 1) limit 0,1 
```

从此我得到了除初始 ID 之外的下一个可重用 ID。

有人建议一种方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:18:33.450

停止使用该查询；它会在高并发下给你不正确的结果。改为使用列`AUTO_INCREMENT`上的属性`d_deviceId`- 每次插入一行时，它都会自动为该列分配下一个未使用的值。

这将要求将`d_deviceId`其配置为表的主键。但这可能已经是这种情况了。

[http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.5/en/example-auto-increment.html)

# jquery-ui - 使用 Google 地图拖动 jQuery UI

> ID：11980630
> 
> 赞同：0
> 
> 时间：2012-08-16T04:16:00.063
> 
> 标签：jquery-ui, google-maps

我对 jQuery UI 拖动有问题。

在 div.popup 中有谷歌地图。问题是当移动谷歌地图时，它也会移动 div.popup。

```
$(document).ready(function(){
    $('div.popup').draggable();
}); 
```

# ios - 单个程序的捆绑标识符

> ID：11980636
> 
> 赞同：6
> 
> 时间：2012-08-16T04:16:15.763
> 
> 标签：ios, cocoa-touch, app-store, provisioning-profile

我作为个人 iOS 开发者新开了 99 美元的账户。作为一家公司，我作为 iOS 开发人员有另一个帐户。在公司帐户中，我将捆绑标识符指定为 com.mycompanyname.appname，但我很困惑我应该为单个程序提供什么捆绑标识符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T04:26:39.827

无论帐户是否为公司，Bundle ID 的工作方式都相同。更多地考虑一下：

> com.myDevAccountName.myAppName

来自 Apple 关于 Bundle ID 的文档

> 捆绑包 ID 字符串必须是统一类型标识符 (UTI)，仅包含字母数字 (AZ,az,0-9)、连字符 (-) 和句点 (.) 字符。该字符串应为反向 DNS 格式。例如，如果您公司的域是 Ajax.com，并且您创建了一个名为 Hello 的应用程序，您可以将字符串 com.Ajax.Hello 分配为您的应用程序的包 ID。

# java - 你可以为 maven exec 插件定义一个 exec 和 java 目标吗？

> ID：11980645
> 
> 赞同：5
> 
> 时间：2012-08-16T04:17:20.717
> 
> 标签：java, maven-3, exec-maven-plugin

我正在尝试使用 maven exec 插件执行几项任务。一种是运行脚本来生成应用程序将使用的一些外部数据。第二种是在编译阶段运行一段java代码来做一些方便的工作。

```
<plugin>
<groupId>org.codehaus.mojo</groupId>
<artifactId>exec-maven-plugin</artifactId>
<version>1.2.1</version>
<executions>
    <execution>
        <id>data_for_app</id>
        <phase>generate-sources</phase>
        <goals>
            <goal>exec</goal>
        </goals>
        <configuration>
            <executable>${basedir}/scripts/getappdata.sh</executable>
            <arguments>
                <argument>${basedir}/src/main/webapp/WEB-INF/xml/appdatahere/</argument>
            </arguments>
        </configuration>
    </execution>
    <execution>
        <id>do_convenience</id>
        <phase>compile</phase>
        <goals>
            <goal>java</goal>
        </goals>
        <configuration>
            <mainClass>com.example.DoConvenienceStuff</mainClass>
            <arguments>
                <argument>https://example.com/data</argument>
            </arguments>
        </configuration>
    </execution>
</executions>
</plugin> 
```

但是当我运行时：

```
mvn clean package exec:exec 
```

我得到错误：

```
[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec (default-cli) on project jss: The parameters 'executable' for goal org.codehaus.mojo:exec-maven-plugin:1.2.1:exec are missing or invalid -> [Help 1] 
```

或类似的错误表明参数“mainClass”丢失或无效。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-16T04:17:20.717

看来我遇到的问题是直接调用插件。

```
exec:exec 
```

通过调用它必须使其工作的阶段来点击插件。

```
mvn clean generate-sources package 
```

# jquery - 将节点属性值和节点值放在一起

> ID：11980649
> 
> 赞同：0
> 
> 时间：2012-08-16T04:17:44.477
> 
> 标签：jquery, xml

好吧，我这里有这个 XML，

```
<?xml version="1.0"?>

<!DOCTYPE reviews SYSTEM "bookstore.dtd">

<bookstore>
<location>Port Credit</location>
<address intersection="Hurontario And Lakeshore"/>
<book id="1000">
    <title> Intro to C</title>
    <copies>5</copies>
    <author name="John Fingle"/>
    <author name="Carrie Dingle"/>
<price>20.95</price>
</book>
<book id="1001">
    <title>C for Rocket Scientists</title>
    <copies>3</copies>
    <author name="Robert Johnson"/>
    <author name="B. King"/>
<price>28.95</price>
</book>
<book id="1011">
    <title>Les Miserables</title>
    <copies>5</copies>
    <author name="Victor Hugo"/>
<price>24.95</price>
</book>
</bookstore> 
```

我正在尝试通过此方法将 Book id 及其价格汇总在一起，

```
$(xml).find("bookstore").each(function() {
    $(this).find("book").each(function() {
        $("#bookListDiv").html($(xml).find("price").text() + "<br />");
        $("#bookListDiv").html($(this).attr("id"));
    })
 }); 
```

此外，我也在尝试使用相同的东西将名称和标题放在一起。它所做的只是给出一个结果。我必须使用一种循环吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:30:37.503

尝试使用

```
$(xml).find("bookstore").each(function() {
    $(this).find("book").each(function() {
        $("#bookListDiv").append($(this).find("price").text() + "<br />");
        $("#bookListDiv").append($(this).attr("id"));
    })
 });

html() will replace your content inside div 
```

# php - PHP + 锁定 MySQL 表失败

> ID：11980650
> 
> 赞同：1
> 
> 时间：2012-08-16T04:18:10.870
> 
> 标签：php, mysql, innodb

我有一个需要锁定以防止插入的表，但它还需要能够在阻止插入时进行更新。

```
function myfunction() {
  $locked = mysql_result(mysql_query("SELECT locked FROM mylock"),0,0);
  if ( $locked ) return false;
  mysql_query("LOCK TABLES mylock WRITE");
  mysql_query("UPDATE mylock SET locked=1");
  mysql_query("UNLOCK TABLES");

  /* I'm checking another table to see if a record doesn't exist already */
  /* If it doesn't exist then I'm inserting that record */

  mysql_query("LOCK TABLES mylock WRITE");
  mysql_query("UPDATE mylock SET locked=0");
  mysql_query("UNLOCK TABLES");  
} 
```

但这还不够，从另一个脚本再次调用该函数，同时插入从该函数的 2 次调用中发生，我不能这样做，因为它会导致重复记录。

这很紧急，请帮忙。我想在字段上使用 UNIQUE，但有 2 个字段（player1、player2），并且两者都不能包含重复的玩家 ID。

不良行为： 记录 A = ( Player1: 123 Player2: 456 ) 记录 B = ( Player1: 456 Player2: 123 )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:00:05.933

我刚刚注意到您在代码中遇到了竞争条件。假设没有错误（请参阅我的评论）......两个进程可以检查并获得“未锁定”结果。“LOCK TABLES”将序列化他们的访问，但他们都会继续认为他们拥有锁并因此重复记录。

您可以将其重写为：

```
mysql_query("LOCK TABLES mylock WRITE");
mysql_query("UPDATE mylock SET locked=1 WHERE locked=0");
$have_lock = mysql_affected_rows() > 0;
mysql_query("UNLOCK TABLES");
if (!$have_lock ) return false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:29:06.680

我建议根本不要使用锁。相反，在插入数据时，请执行以下操作：

```
mysql_query("INSERT IGNORE INTO my_table VALUES(<some values here>)");
if(mysql_affected_rows()>0)
{
    // the data was inserted without error
    $last_id = mysql_insert_id();
    // add what you need here
}
else
{
    // the data could not be inserted (because it already exists in the table)
    // query the table to retrieve the data
    mysql_query("SELECT * FROM my_table WHERE <some_condition>");
    // add what you need here
} 
```

将`IGNORE`关键字添加到[INSERT](http://dev.mysql.com/doc/refman/5.5/en/insert.html)语句时，MySQL 将尝试插入数据。如果由于表中已存在具有相同主键的记录而无法正常工作，它将静默失败。[mysql_affected_rows](http://php.net/mysql_affected_rows)用于知道插入记录的数量并决定做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:37:55.297

这里不需要**表级**锁定，最好使用**行级**锁定。**行级**锁定意味着只有他们正在修改的一行被锁定。通常的替代方法是在修改期间锁定整个表，或者锁定表的某些子集。行级锁定只是将行的子集减少到仍然确保完整性的最小数量。

在 InnoDB 事务模型中，目标是将多版本数据库的最佳属性与传统的两阶段锁定相结合。InnoDB 在行级别上进行锁定，默认情况下以非锁定一致性读取的形式运行查询，采用 Oracle 的风格。InnoDB 中的锁表存储得非常节省空间，因此不需要锁升级：通常，允许多个用户锁定 InnoDB 表中的每一行，或行的任何随机子集，而不会导致 InnoDB 内存耗尽。

如果您的问题尚未解决，那么内存大小可能是问题所在。InnoDB 将其锁表存储在主缓冲池中。这意味着您可以同时拥有的锁的数量受到启动 MySQL 时设置的 innodb_buffer_pool_size 变量的限制。默认情况下，MySQL 将其保留为 8MB，如果您在服务器上使用 InnoDB 做任何事情，这将毫无用处。

幸运的是，这个问题的修复非常简单：将 innodb_buffer_pool_size 调整为更合理的值。但是，该修复确实需要重新启动 MySQL 守护程序。根本没有办法即时调整这个变量（在撰写本文时使用当前稳定的 MySQL 版本）。

在调整变量之前，请确保您的服务器可以处理额外的内存使用。innodb_buffer_pool_size 变量是服务器范围的变量，而不是每个线程的变量，因此它在所有到 MySQL 服务器的连接之间共享（如查询缓存）。如果您将其设置为 1GB，MySQL 将不会预先使用所有这些。随着 MySQL 找到更多的东西放入缓冲区，内存使用量会逐渐增加，直到达到 1GB。那时，当需要新数据时，最旧和最少使用的数据开始被修剪。

# vbscript - 如何提升 vbs 以删除注册表项

> ID：11980651
> 
> 赞同：0
> 
> 时间：2012-08-16T04:18:17.270
> 
> 标签：vbscript, registry

这是错误的代码

```
WshShell.RegDelete "HKEY_LOCAL_MACHINE\SOFTWARE\cFos\test\tvalue" 
```

这是我的错误
错误：无法删除注册表项“HKLM\SOFTWARE\test”。
代码：800070005 来源：WshShell.RegDelete

我认为我需要在 Win Vista/7/8 中禁用 UAC，但我想知道是否有办法以管理员身份直接运行 .vbs 文件。因为我需要分发它，而且人们可能不喜欢禁用他们的 UAC，如果我给出明确的指示来取消他们的防御，有些人甚至可能认为这是恶意的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T16:54:29.363

使用下面的命令行创建一个新的快捷方式文件。

```
runas /profile /user:administrator cscript myscript.vbs 
```

或者...

```
runas /profile /user:administrator cscript "C:\Script Collection\My Script.vbs" 
```

然后，您只需双击快捷方式文件即可使用管理员帐户执行脚本。

快捷方式每次都会提示输入管理员密码。如果您希望它完全自动化，请改用下面的命令行。

```
runas /profile /savecred /user:administrator cscript myscript.vbs 
```

它会提示输入密码，但只会提示一次。下次运行它就不会再提示了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T02:41:55.363

打开开始菜单并键入`cmd`。出现命令提示符时，右键单击它并选择以管理员身份运行。您可以使用 cscript.exe 或 wscript.exe 从提升的命令提示符运行脚本。

要从快捷方式运行脚本，请右键单击桌面并选择新建 > 快捷方式。它将提示您输入程序的位置。键入以下内容：

runas /noprofile /savecred /user: **localmachinename** \administrator cscript.exe " **C:\path\to\script.vbs** "

点击下一步。输入您喜欢的快捷方式名称，然后单击完成。

# arrays - as3 随机数组 - 随机化数组 - actionscript 3

> ID：11980657
> 
> 赞同：9
> 
> 时间：2012-08-16T04:18:47.503
> 
> 标签：arrays, actionscript-3, flash, random

如何使用 actionscript 3 随机化数组？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-16T07:45:17.270

有一个使用 Array.sort() 函数的简短版本：

```
var arr : Array = [0,1,2,3,4,5,6,7,8,9];

function randomize ( a : *, b : * ) : int {
    return ( Math.random() > .5 ) ? 1 : -1;
}

trace( arr.sort( randomize ) ); 
```

如果你没有得到“足够”的随机性，你可以排序两次 :)

**编辑 - 逐行解释：**

对于`Array`类方法`sort()`，您不仅可以传递诸如等`Array.CASEINSENSITIVE, Array.DESCENDING`之类的排序选项，还可以传递您自己的自定义比较函数引用（回调），该引用接受两个参数（要比较的数组中的两个元素）。来自 AS3 文档：

> 比较函数应该接受两个参数进行比较。给定元素 A 和 B，compareFunction 的结果可以是负值、0 或正值：
> 
> *   负返回值指定 A 在排序序列中出现在 B 之前。
> *   返回值 0 指定 A 和 B 具有相同的排序顺序。
> *   正返回值指定 A 在排序序列中出现在 B 之后。

注意：可能会输入比较函数参数（如果输入了数组）并具有您想要的任何名称，例如：

```
function compareElements ( elementA : SomeClass, elementB : SomeClass ) : int; 
```

当您需要按数组元素的特殊属性对数组元素进行排序时，此方法非常有用。在随机化情况下，`compareFunction`随机返回`-1, 0`或`1`使数组元素切换它们的位置（索引）。我发现更好的随机化（在我的主观和未经数学测试的观点中）是方法仅返回`-1`和`1`. 还要记住，带有自定义比较功能的排序功能[不会按顺序比较元素，](http://www.actionscript.org/forums/archive/index.php3/t-155186.html)因此在某些特殊情况下，随机化结果可能与您的预期不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T07:14:53.287

如果需要，还有一种更好的方法还可以让您在适当的位置随机化数组，并且它不会让您创建更多原始数组的单个副本。

```
package
{
    import flash.display.Sprite;

    public class RandomizeArrayExample extends Sprite
    {
        public function RandomizeArrayExample()
        {
            super();
            testDistribution();
        }

        private function testDistribution():void
        {
            var hash:Object = { };
            var tester:Array = [1, 2, 3, 4];
            var key:String;

            for (var i:int; i < 1e5; i++)
            {
                randomize(tester);
                key = tester.join("");
                if (key in hash) hash[key]++;
                else hash[key] = 1;
            }
            for (var p:String in hash) trace(p, "=>", hash[p]);
        }

        private function randomize(array:Array):Array
        {
            var temp:Object;
            var tempOffset:int;
            for (var i:int = array.length - 1; i >= 0; i--)
            {
                tempOffset = Math.random() * i;
                temp = array[i];
                array[i] = array[tempOffset];
                array[tempOffset] = temp;
            }
            return array;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T04:19:26.990

我发现这很有帮助。我希望它也可以帮助你。

```
// Array to Randomize
var firstArray:Array = ["One","Two","Three","Four","Five","six","seven","eight","nine","ten"];
trace(firstArray); // Prints in order

var newArray:Array = new Array();
function randomizeArray(array:Array):Array
{
    var newArray:Array = new Array();

    while (array.length > 0)
    {
        newArray.push(array.splice(Math.floor(Math.random()*array.length), 1));
    }

    return newArray;
}

var randomArray:Array = randomizeArray(firstArray);
trace(randomArray); // Prints out randomized :) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T15:41:39.760

我有一个替代要求，我想将大量源数组随机插入到目标数组中。像 Rytis 一样，我是数组上的 forEach、map 和 sort 函数的忠实粉丝。

```
var randomInsert:Function = function callback(item:*, index:int, array:Vector.<MyItem>):void
{
    var j:Number = Math.floor(Math.random() * targetArray.length);
    targetArray.splice(j,0,item);                   
}

targetArray = new Vector.<MyItem>();
sourceArray1.forEach(randomInsert, this);
sourceArray2.forEach(randomInsert, this); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-13T11:07:48.347

这是一个更简单的功能。也适用于多维数组

```
function randomizeArray(array:Array):Array
{
    var newArray:Array = new Array();
    while (array.length > 0)
    {
        var mn=Math.floor(Math.random()*array.length)
        newArray[newArray.length]=array[mn]
        array.splice(mn,1)
    }
    return newArray;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-06T17:16:59.670

如果您需要对数组进行洗牌（您的元素不能重复）。你可以使用这个功能：

```
/**
 * Shuffles array into new array with no repeating elements. Simple swap algorithm is used.
 */
public function shuffleArray(original:Array):Array
{
    // How many swaps we will do
    // Increase this number for better results (more shuffled array, but slower performance)
    const runs:int = original.length * 3;
    var shuffled:Array = new Array(original.length);

    var i:int;
    var a:int;
    var b:int;
    var temp:Object;

    // Copy original array to shuffled
    for(i=0; i<shuffled.length; i++){
        shuffled[i] = original[i];
    }

    // Run random swap cycle 'runs' times
    for(i=0; i<runs; i++){
        // There is a chance that array element will swap with itself,
        // and there is always small probability it will make your shuffle
        // results not that good, hence try to experiment with
        // different runs count as stated above
        a = Math.floor(Math.random() * original.length);
        b = Math.floor(Math.random() * original.length);

        // Swap messages
        temp = shuffled[a];
        shuffled[a] = shuffled[b];
        shuffled[b] = temp;
    }

    return shuffled;
} 
```

用法：

```
var testArray:Array = ["Water", "Fire", "Air", "Earth"];
trace(shuffleArray(testArray).concat()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-15T14:34:19.083

这就是我如何为记忆游戏随机化我的 36 张卡片数组

```
const QUANT_CARTAS: int = 36;

//get the 36 numbers into the array
for (var i: int = 0; i < QUANT_CARTAS; i++)
{
    cartas.push(i);
}

//shuffles them =)
for (var moeda: int = QUANT_CARTAS - 1; moeda > 0; moeda--)
{
    var pos: int = Math.floor(Math.random() * moeda);
    var carta: int = cartas[moeda];
    cartas[moeda] = cartas[pos];
    cartas[pos] = carta;
}
// and add them using the random order...

    for (i = 0; i < QUANT_CARTAS; i++)
{
    var novaCarta: Carta = new Carta();
    novaCarta.tipoCarta = cartas[i];
    etcetcetc.............
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-10T11:43:38.413

从数组中选择随机字符串

```
function keyGenerator(len:Number):String
{
    function randomRange(minNum:Number, maxNum:Number):Number
    {
        return (Math.floor(Math.random() * (maxNum - minNum + 1)) + minNum);
    }
    var hexArray = ['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'];
    var key = "";
    for (var i=0; i<len; i++)
    {
        key +=  hexArray[randomRange(0,hexArray.length-1)];
    }
    return key;
} 
```

用法：

```
trace(keyGenerator(16)); 
```

# javascript - 茉莉花在 jQuery 上失败

> ID：11980681
> 
> 赞同：1
> 
> 时间：2012-08-16T04:21:31.040
> 
> 标签：javascript, jasmine, jasmine-jquery

我正在尝试测试茉莉花中是否正确禁用了一个字段，但我遇到了一个奇怪的错误：

[https://gist.github.com/3366765](https://gist.github.com/3366765)

```
Error: Expected { 0 : HTMLNode, length : 1, context : HTMLNode, selector : '#input1', constructor : Function, init : Function, jquery : '1.7.2', size : Function, toArray : Function, get : Function, pushStack : Function, each : Function, ready : Function, eq : Function, first : Function, last : Function, slice : Function, map : Function, end : Function, push : Function, sort : Function, splice : Function, extend : Function, data : Function, removeData : Function, queue : Function, dequeue : Function, delay : Function, clearQueue : Function, promise : Function, attr : Function, removeAttr : Function, prop : Function, removeProp : Function, addClass : Function, removeClass : Function, toggleClass : Function, hasClass : Function, val : Function, on : Function, one : Function, off : Function, bind : Function, unbind : Function, live : Function, die : Function, delegate : Function, undelegate : Function, trigger : Function, triggerHandler : Function, toggle : Function, hover : Function, blur : Function, focus : Function, focusin : Function, focusout : Function, load : Function, resize : Function, scroll : Function, unload : Function, click : Function, dblclick : Function, mousedown : Function, mouseup : Function, mousemove : Function, mouseover : Function, mouseout : Function, mouseenter : Function, mouseleave : Function, change : Function, select : Function, submit : Function, keydown : Function, keypress : Function, keyup : Function, error : Function, contextmenu : Function, find : Function, has : Function, not : Function, filter : Function, is : Function, closest : Function, index : Function, add : Function, andSelf : Function, parent : Function, parents : Function, parentsUntil : Function, next : Function, prev : Function, nextAll : Function, prevAll : Function, nextUntil : Function, prevUntil : Function, siblings : Function, children : Function, contents : Function, text : Function, wrapAll : Function, wrapInner : Function, wrap : Function, unwrap : Function, append : Function, prepend : Function, before : Function, after : Function, remove : Function, empty : Function, clone : Function, html : Function, replaceWith : Function, detach : Function, domManip : Function, appendTo : Function, prependTo : Function, insertBefore : Function, insertAfter : Function, replaceAll : Function, css : Function, serialize : Function, serializeArray : Function, ajaxStart : Function, ajaxStop : Function, ajaxComplete : Function, ajaxError : Function, ajaxSuccess : Function, ajaxSend : Function, show : Function, hide : Function, _toggle : Function, fadeTo : Function, animate : Function, stop : Function, slideDown : Function, slideUp : Function, slideToggle : Function, fadeIn : Function, fadeOut : Function, fadeToggle : Function, offset : Function, position : Function, offsetParent : Function, scrollLeft : Function, scrollTop : Function, innerHeight : Function, outerHeight : Function, height : Function, innerWidth : Function, outerWidth : Function, width : Function, propAttr : Function, _focus : Function, scrollParent : Function, zIndex : Function, disableSelection : Function, enableSelection : Function, mouse : Function, draggable : Function, droppable : Function, resizable : Function, selectable : Function, sortable : Function, _addClass : Function, _removeClass : Function, _toggleClass : Function, switchClass : Function, effect : Function, _show : Function, _hide : Function, __toggle : Function, cssUnit : Function, accordion : Function, autocomplete : Function, menu : Function, button : Function, buttonset : Function, datepicker : Function, dialog : Function, progressbar : Function, slider : Function, tabs : Function, alert : Function, carousel : Function, collapse : Function, dropdown : Function, modal : Function, scrollspy : Function, tab : Function, tooltip : Function, popover : Function, typeahead : Function } to be true.
at new jasmine.ExpectationResult (http://localhost:8888/__JASMINE_ROOT__/jasmine.js:102:32)

describe("disableFields", function() {
  var $trigger, $input1, $input2, $otherInput;
  var fixture = "<input id='input1' class='disable'></input>" +
                "<input id='otherInput' class='other'></input>" +
                "<button id='submit' data-behavior='disableFields' data-selector='.disable' data-form-id='form'></input>";

  beforeEach(function() {
    $('#jasmine_content').empty();
    $('#jasmine_content').append(fixture);
    Elemental.load(document);
   });

  it('disables all the inputs', function() {
    $trigger = $('#submit');
    expect($("#input1").prop("disabled", false)).toBe(true);
    $trigger.click();
    expect($("#input1").prop("disabled", true)).toBe(true);
  });
 }); 
```

我不确定为什么茉莉花选择器会出错，有人有什么想法吗？

- 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T06:41:45.003

你错过了两件事，

```
expect($("#input1"),prop("disabeld", false)).toBe(true); 
```

`disabeld`应该是`disabled`并且，

`$("#input1"),prop("disabeld"..`你必须`dot`改用`comma`.

但在这两种情况下，

```
expect($("#input1").prop("disabled", true)).toBe(true); 
```

`true`因为`$("#input1").prop("disabled", true)`返回 JQuery 对象而不是 bool 值，所以永远不会被评估。所以使用

```
expect($("#input1").prop("disabled")).toBe(true); 
```

反而。

[jQuery 道具文档](http://api.jquery.com/prop/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:59:46.783

我不确定，但你这里有一个错字：

```
expect($("#input1"),prop("disabeld", false)).toBe(true); 
```

“禁用”应该是“禁用”。

# python - 使用python打开csv文件

> ID：11980682
> 
> 赞同：-2
> 
> 时间：2012-08-16T04:21:41.840
> 
> 标签：python, file, csv

我有一个 csv 文件，如下所示：

```
s555555,7
s333333,10
s666666,9
s111111,10
s999999,9 
```

当我在 python 中打开它时，它应该看起来像：

```
[[’s555555’, ’7’], [’s333333’, ’10’], [’s666666’, ’9’], [’s111111’, ’10’], [’s999999’, ’9’]] 
```

我需要为此使用什么代码？

谢谢，任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T04:29:00.983

检查`csv`模块。(http://docs.python.org/library/csv.html)

# visual-studio-2008 - 使用 COleDispatchDriver MFC 启动和编辑程序

> ID：11980685
> 
> 赞同：0
> 
> 时间：2012-08-16T04:21:53.873
> 
> 标签：visual-studio-2008, visual-c++, com, mfc

我想知道是否可以在从 MFC 对话框启动外部程序后对其进行编辑。我想启动一个 exe，并且我想将一个数据库（这是一个访问文件）加载到启动的程序中。我用谷歌搜索了这个，但我发现解决方案有点复杂。我以前从未使用过 COM 对象。

提前致谢。

# mysql - MySQL Math - 从另一列计算值

> ID：11980687
> 
> 赞同：0
> 
> 时间：2012-08-16T04:22:03.163
> 
> 标签：mysql

我需要为生成的数学函数乘法创建一个视图。这可能吗？

桌子：

```
mysql> show create table devices \G
Create Table: CREATE TABLE `devices` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `d_type` varchar(255) NOT NULL,
  `multiplier` char(255) NOT NULL DEFAULT '',
  `value` decimal(10,3) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=6 DEFAULT CHARSET=latin1
1 row in set (0.00 sec) 
```

示例行：

```
mysql> SELECT devices.id, devices.d_type, devices.multiplier, devices.`value`  FROM devices;   
+----+--------------------------+------------+--------+
| id | d_type                   | multiplier | value  |
+----+--------------------------+------------+--------+
|  1 | Cisco Call Manager       | /          |  4.000 |
|  2 | Generic Router/Switch    | *          |  0.350 | 
```

我需要以某种方式使用乘数进行计算，以提供各种数学的结果。示例（当然不工作）：

```
SELECT devices.id, devices.d_type, devices.multiplier, devices.`value`, (SELECT 1 $multiplier devices.`value`) as EPS FROM devices; 
```

这种情况下的结果应该是：

```
+----+--------------------------+------------+--------+--------+
| id | d_type                   | multiplier | value  |   EPS  |
+----+--------------------------+------------+--------+--------+
|  1 | Cisco Call Manager       | /          |  4.000 |  0.25  |
|  2 | Generic Router/Switch    | *          |  0.350 |  0.35  | 
```

我们需要通过将 1 除以或乘以 value 列来得出 EPS 列。有没有办法使用该乘数来确定是除还是乘？

（请注意，我以 1 为例，这可以是来自用户输入的任何传入整数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:29:36.833

您可以使用此查询

```
SELECT devices.id, devices.d_type, devices.multiplier, devices.`value`, IF(multiplier = '/', 1/value, 1*value) as EPS FROM devices; 
```

它适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:25:58.660

```
IF(multiplier = '/', 1/value, value) AS EPS 
```

# ruby-on-rails - ruby on rails 语法错误与匹配

> ID：11980689
> 
> 赞同：0
> 
> 时间：2012-08-16T04:22:46.853
> 
> 标签：ruby-on-rails, ruby, syntax, match

使用 ROR 创建应用程序时，我在使用时不断收到语法错误：

```
FitsbyApp::Application.routes.draw do
  match '/help',    to: 'static_pages#help'
  match '/about',   to: 'static_pages#about'
  match '/contact', to: 'static_pages#contact'
end 
```

我正在使用 Rails 3.2.8。难道是我没有正确版本的 Rails 或 Ruby？

这是我运行比赛时遇到的错误：

> rb:245:in `load': /Users/dannygaeta/rails_projects/fitsby_app/config/routes.rb:2: 语法错误，意外':'，期待 kEND (SyntaxError)

我每场比赛都得到这个。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:25:54.973

您得到的错误（可能）来自`to:`. 也就是说，我不是铁路专家，但有问题的路线不应该是这样的吗？

```
match '/help' => 'static_pages#help' 
```

见[http://guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:31:20.707

这听起来像您使用的是 ruby​​ 1.8.x。Ruby 1.9 引入了一种新的哈希语法，

```
match 'foo', to: 'bar' 
```

是相同的

```
match 'foo', :to => 'bar' 
```

您的路线文件似乎正在使用较新的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-29T14:54:59.140

在 Rails 3 中：

`match 'logout' => 'user_sessions#destroy', :as => :logout`

或者

`match '/help' => 'static_pages#help'`

在 Rails 4 中：

匹配 'logout' => 'user_sessions#destroy', :as => :logout, via: [:get, :post]

# ruby-on-rails - 如何在编辑页面中添加按钮

> ID：11980692
> 
> 赞同：0
> 
> 时间：2012-08-16T04:22:54.003
> 
> 标签：ruby-on-rails

我必须在编辑页面中添加两个按钮。我生成了默认的脚手架。我试图以这种方式在 _form.html.erb 文件中添加一个按钮： <%= f.submit 'accept'%> 和 <%= f.submit 'reject'%> 但是因为这个表单是在新的.html.erb 所以按钮也出现在新页面中。我只想在编辑页面中使用这些按钮。我是 ruby​​ 和 rails 的新手。任何人都可以帮忙。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:29:38.427

只需将 _form.html.erb 的内容复制到编辑文件和新文件中即可。将模板调用替换为 _form。然后分别编辑每个文件的内容以满足您的需要。将 _form 的内容复制到新的和编辑视图文件后，您可以删除 _form 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:48:28.450

您应该检查动作名称以显示您的第二个按钮，例如

```
<% if controller.action_name = 'edit' %> 
   <%= f.submit 'reject'%>
<% end %> 
```

# navigation - 在引导导航栏中居中品牌

> ID：11980696
> 
> 赞同：1
> 
> 时间：2012-08-16T04:24:21.627
> 
> 标签：navigation, twitter-bootstrap, responsive-design, nav

任何人都可以向我指出有关如何在导航栏中将品牌徽标居中的资源吗？我希望能够像这样布置我的导航栏：

大屏幕：

[链接1] [链接2] [链接3] [品牌标志] [链接4] [链接5] [链接6]

医学屏幕：

[堆栈链接1-3] [品牌标志] [堆栈链接4-6]

小屏幕

[品牌标志] [默认下拉导航菜单]

有任何想法吗？

# ruby-on-rails - 如何配置 Rails 控制台以使用外语？

ID：11980697

赞同：2

时间：2012-08-16T04:24:26.187

标签：ruby-on-rails, ruby-on-rails-3, utf-8, character-encoding

# visual-foxpro - Visual Foxpro or VFP Version 9: Networking from NAS

> ID：11980700
> 
> 赞同：0
> 
> 时间：2012-08-16T04:24:54.260
> 
> 标签：visual-foxpro

In VFP9 I need to move the database to a Netgear ReadyNas Duo V2 shared network drive. I don't know exactly which files to move or where and how to put the network path.

I've been trying for 2 days and keep getting error 2005 (...."table file users.dbf has moved"....) at start-up and now time is running out.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T16:34:58.283

尽管 DaveB 提供了所有扩展，但我认为您可能正在寻找更具体的数据和表格的东西。

在 VFP 中，如果你有一个数据库容器，你可以通过几种方式来实现...在一个文件夹/路径中拥有一个数据库，而在另一个路径中的实际表...我不会推荐任何东西，但这可能是你所遇到的。当您尝试打开这些表时，该数据库将具有预期可以找到这些表的路径。

另一种是将数据库和表放在同一个文件夹中。数据库本身有3个文件

```
.dbc -- database
.dcx -- compound index of database 
.dct -- memo field content for database

Additionally, the tables can have up to 3 files each with respective suffixes

.dbf -- single table
.cdx -- compound index for the single table
.fpt -- memo field content for the single table 
```

因此，如果您将表格从一个位置移动到另一个位置，并且它们在预期位置没有相同的路径，那会让您有些头疼。如果您有 VFP，您可以将数据库作为表打开并浏览它以查看预期的位置。例如

```
CD Whatever\Your\DataPathIs
use NameOfYourDatabase.dbc   (yes, explicitly add the .dbc suffix)
browse for objectType = "Table" 
```

然后，如果您双击该属性的“备注”字段列，您将看到一堆由方框表示的不可查看字符，然后是与数据库预期查找文件的位置相对应的路径。

这可能是您正在寻找的缺失部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:16:29.887

希望任何地方都没有硬编码的文件路径。您可能需要从特定根目录重新创建文件树。以下看起来像是要查找的文件的好列表。

从[Visual FoxPro 文件扩展名和文件类型](http://support.microsoft.com/kb/130686)：

```
File Extensions and File Types used by Visual FoxPro

Extension   File type
----------------------------------------------
.act        Documenting Wizard action diagram
.app        Generated application
.cdx        Compound index
.dbc        Database
.dbf        Table
.dct        Database memo
.dcx        Database index
.dll        Windows Dynamic Link Library
.err        Compilation error
.exe        Executable program
.fky        Macro
.fll        FoxPro Dynamic Link Library
.fmt        Format File
.fpt        Table memo
.frt        Report memo
.frx        Report
.fxp        Compiled program
.hlp        Graphical Help
.idx        Index, compact index
.krt        Used in the recreation of a .dbc file
            NOTE: The .KRT extension is not listed in the online Help.
.lbt        Label memo
.lbx        Label
.lst        Documenting Wizard list
.mem        Memory variable saveDoslives
.mnt        Menu memo
.mnx        Menu
.mpr        Generated menu program
.mpx        Compiled menu program
.ocx        OLE control
.pjt        Project memo
.pjx        Project
.prg        Program
.qpr        Generated query program
.qpx        Compiled query program
.sct        Form memo
.scx        Form
.spr        Generated Screen Program (previous versions of FoxPro only)
.spx        Compiled Screen Program (previous versions of FoxPro only)
.tbk        Memo backup
.txt        Text
.vct        Visual class library memo
.vcx        Visual class library
.vue        FoxPro 2.x view
.win        Window file 
```

# sql - How Sum and Group By with name in stored procedure?

> ID：11980704
> 
> 赞同：3
> 
> 时间：2012-08-16T04:25:28.290
> 
> 标签：sql, sql-server, sql-server-2008, stored-procedures

I want to sum the money column, but I want group name and code in status.

this is the stored procedure code [Sql Server 2008]:

```
SELECT um.upmoney as 'money'
,um.pId as 'code',um.FName as 'name',up.status as 'statusmoney'
From tb_upmoney um inner join tb_pID up on up.uId=um.pId 
```

Result:

```
money | code | name | statusmoney
200.00 | 00001 | fin | 1
100.00 | 00001 | fin | 1
50.00 | 00001 | fin | 1
100.00 | 00002 | welson | 1
200.00 | 00002 | welson | 2
100.00 | 00002 | welson | 2
50.00 | 00002 | welson | 2
0.00 | 00002 | welson | 2 
```

**but I want:**

```
money | code | name | statusmoney
250.00 | 00001 | fin | 1
100.00 | 00002 | welson | 1
250.00 | 00002 | welson | 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:32:58.713

您需要`SUM(UM.upmoney)`像这样对剩余字段进行分组：

```
SELECT SUM(um.upmoney) AS 'money',
       um.pId AS 'code',
       um.FName AS 'name',
       up.status AS 'statusmoney'
FROM tb_upmoney um 
    INNER JOIN tb_pID up 
    ON up.uId=um.pId
GROUP BY um.pId, um.FName, up.status 
```

[请参阅带有聚合器“SUM()”](http://www.java2s.com/Code/SQLServer/Select-Query/GROUPBYclausewithanaggregatorSUM.htm)的 GROUP BY 子句的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:29:07.973

```
SELECT sum(um.upmoney) as 'money',um.pId as 'code',um.FName as 'name',up.status as 'statusmoney'
From tb_upmoney um inner join tb_pID up on    up.uId=um.pId group by um.pId, um.FName, up.status 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:34:54.150

检查这个

SELECT Sum(um.upmoney) as 'money',um.pId as 'code',um.FName as 'name',up.status as 'statusmoney' From tb_upmoney um inner join tb_pID up on up.uId=um.pId按 um.FName、um.pId 分组

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T04:27:12.837

怎么样

```
SELECT  SUM(um.upmoney) as 'money',
        um.pId as 'code',
        um.FName as 'name',
        up.status as 'statusmoney' 
From    tb_upmoney um inner join 
        tb_pID up   on  up.uId=um.pId 
GROUP BY    um.pId,
            um.FName,
            up.status 
```

[总和（事务处理 SQL）](http://msdn.microsoft.com/en-us/library/ms187810.aspx)

[分组依据 (Transact-SQL)](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

# iphone - connection:willCacheResponse 永远不会被调用

> ID：11980715
> 
> 赞同：3
> 
> 时间：2012-08-16T04:26:29.470
> 
> 标签：iphone, xcode

我正在开发一个涉及从网络服务器下载数据的 iPhone 应用程序。`connection:willCacheResponse:`除了永远不会调用该方法之外，所有事情都运行良好。但其他人喜欢`connection:didReceiveResponse:`, `connection:didReceiveData:`, `connection:didFailWithError:`,`connectionDidFinishLoading:`都工作正常。我进行了如下连接：

```
- (void)makeConnection
{
    NSURL *url = [NSURL URLWithString:@"http://www.abc.com"];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:60];
    [request setHTTPMethod:@"POST"];
    NSString *postString = [NSString stringWithFormat:@"%@", string];
    [request setValue:[NSString stringWithFormat:@"%d", [postString length]] forHTTPHeaderField:@"Content-length"];
    [request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse
{
    NSCachedURLResponse *newCachedResponse = cachedResponse;
    NSDictionary *newCachedResponseUserInfo = [NSDictionary dictionaryWithObject:[NSDate date] forKey:@"Cached Date"];
    newCachedResponse = [[NSCachedURLResponse alloc] initWithResponse:[cachedResponse response] data:[cachedResponse data] userInfo:newCachedResponseUserInfo storagePolicy:[cachedResponse storagePolicy]];

    return newCachedResponse;
} 
```

我也尝试将策略更改为`NSURLRequestUseProtocolCachePolicy`，但没有任何帮助。还试图在

```
- (NSCachedURLResponse *)connection:(NSURLConnection *)connection willCacheResponse:(NSCachedURLResponse *)cachedResponse 
```

但什么也没发生。我错过了什么吗？先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T05:34:55.163

根据[Apple 的文档，connection:willCacheResponse: 仅在响应包含 Cache-Control 标头时才调用：](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html#//apple_ref/doc/uid/20001836-169425)

> 委托仅接收支持缓存的协议的 connection:willCacheResponse: 消息。

# winapi - 缺少 InterlockedPushListSList。它在哪里？

> ID：11980721
> 
> 赞同：0
> 
> 时间：2012-08-16T04:26:56.040
> 
> 标签：winapi, synchronization, compiler-errors

我正在使用 Visual Studio 2010 Ultimate，SP1 在 Windows Server 2008 机器上进行开发。不幸的是，该函数[`InterlockedPushListSList`](http://msdn.microsoft.com/en-us/library/windows/desktop/hh448545%28v=vs.10%29.aspx)导致错误，因为它在我的`WinBase.h`.

自己声明函数不起作用；发生链接器错误。看起来这个函数没有在我的编译器的 Windows 库中定义。但是上面链接的文档指出它适用于我的操作系统。

一些谷歌搜索显示，该 API 自 Windows Longhorn 开发以来就已经存在，尽管来自非官方[来源](http://mikedimmick.blogspot.com.au/2004/07/changes-to-win32-api-in-longhorn_21.html)，所以从我的角度来看，它不应该有任何缺失的理由。

这个功能*真的*存在吗？如果是这样，我在哪里可以得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T12:45:35.050

我能够使用 MSVC 2010 和 Windows SDK v7.0A 重现您的问题。`InterlockedPushListSList`WinBase.h 中不存在。在声明它时，我首先也遇到了一个链接错误......直到我意识到我忘记了`extern "C"`:-)。也许你也忘记了？如果我声明，我可以编译和链接

```
extern "C"
PSLIST_ENTRY  FASTCALL InterlockedPushListSList(
  _Inout_  PSLIST_HEADER ListHead,
  _Inout_  PSLIST_ENTRY List,
  _Inout_  PSLIST_ENTRY ListEnd,
  _In_     ULONG Count
); 
```

# c - C中的数组操作

> ID：11980723
> 
> 赞同：0
> 
> 时间：2012-08-16T04:27:06.227
> 
> 标签：c, arrays

我在编写 c 代码方面是 3 周的新手，所以我是一个新手，只是尝试在线托管的哈佛课程视频中的一些示例。我正在尝试编写一些代码来根据关键字加密文件。

关键是字母表中的每个字母都会被分配一个从0到25的数值，所以'A'和'a'将是0，同样'z'和'Z'将是25。如果关键字是'abc ' 例如，我需要能够将其转换为数字形式，即 '012'。我尝试采用的方法（对许多 c 函数一无所知）是在数组中分配字母列表。我认为在讲座中他暗示了一个多维数组，但不确定如何实现它。问题是，如果字母表存储为数组，那么字母将是数组的实际值，我需要知道如何根据值搜索数组，我不知道该怎么做（到目前为止，我只是根据索引返回值）。一世' 我想要一些伪代码帮助，所以我可以解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:34:31.657

这很难回答，不知道你到目前为止学到了什么，但这里有一个提示我会做什么：表示字母的字符是表示它们的 ASCII 值的字节，并且顺序出现，从 a 到 z 和 A 到 Z他们不是从零开始的。您可以将它们转换为整数并获取 ascii 值。

这是我如何编写它的伪代码：

> ```
> Cast the character to a number
> IF it's between the ascii values of A and Z, subtract it from A
> ELSE Subtract it from the ASCII value of a or A
> Output the result. 
> ```

对于它的价值，我没有看到涉及多维数组的问题的明显解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:43:39.693

*   char '0' 是值 48
*   char 'A' 是值 65
*   char 'a' 是值 97

你说你想学习如何在数组中搜索：

```
char foo[26]; //your character array 

...
...
  //here is initialization of the array
for(int biz=0;biz<26;biz++)
 {
    foo[biz]=65+biz; // capital alphabet
  }
 ...
 ...
 //here is searching 1 by 1 iteration(low-yield)
char baz=67;   //means we will find 'C'
for(int bar=0;bar<26;bar++)
{
    if(foo[bar]==baz) {printf("we found C at the index: %i ",bar);break;}
}

 //since this is a soted-array, you can use more-yield search algortihms. 
```

二分搜索算法（你可以在后面的章节中使用）： [http ://en.wikipedia.org/wiki/Binary_search_algorithm](http://en.wikipedia.org/wiki/Binary_search_algorithm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:11:42.743

在 C 中，a`char`是一个 8 位整数，因此，假设您的字母是有序的，您实际上可以使用该`char`值通过使用第一个字母 (a) 作为偏移量来获取索引：

```
char offset = 'a';
char value  = 'b';
int index = value - offset; /* index = 1 */ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T05:23:30.343

多维数组的用途是将小写和大写字母都存储在一个数组中，以便它们可以被映射。一种有效的方法是使用他们的`ASCII`代码，但是由于您是初学者，我想这个示例将向您介绍如何处理`for loops`and `multidimensional arrays`，我认为这也是讲师的计划。

让我们首先为字母设置数组。我们将有两行，每行有 26 个字母：

```
alphabetsEnglish[26][2] = {{'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'},
                           {'A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'}}; 
```

现在我们可以映射这两种情况的元素。

```
int main()
{
    int c,i,j;
    char word[10]; 

    printf("Enter a word:");
    scanf("%s",word);

    c=strlen(word);
    printf("Your word has %d letters ", c);

    for (i = 0; i < c; i++) //loop for the length of your word
    {
        for (j = 0; j <= 25; j++) //second loop to go through your alphabet list
        {
            if (word[i] == alphabetsEnglish[0][j] || word[i] == alphabetsEnglish[1][j]) //check for both cases of your alphabet
            {  
                printf("Your alphabet %c translates to %d: ", word[i], j);
            }
        }
    }
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T12:22:51.210

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int *conv(char* str){
    static const char* table = "abcdefghijklmnopqrstuvwxyz";
    int size, *ret, *p;
    if(NULL==str || *str == '\0') return NULL;
    size = strlen(str);
    ret=p=(int*)malloc(size*sizeof(int));
    while(*str){
        char *pos;
        pos=strchr(table, tolower(*str++));
        *p++ = pos == NULL ? -1 : pos - table;
    }
    return ret;
}

int main(void){
    char *word = "abc";
    int i, size = strlen(word), *result;
    result = conv(word);
    for(i=0;i<size;++i){
        printf("%d ", result[i]);//0 1 2
    }
    free(result);
    return 0;
} 
```

# vba - 在选择前后插入文本并设置新文本的样式

> ID：11980728
> 
> 赞同：2
> 
> 时间：2012-08-16T04:27:34.277
> 
> 标签：vba, ms-word

我可以使用以下方法在选择之前和之后插入文本：

```
Selection.InsertBefore "start"
Selection.InsertAfter "end" 
```

但我无法控制插入文本的样式。如何将新插入的文本设置为特定样式（并保持原来的选定文本不变）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T06:40:17.617

下面是两个单独的代码来处理 Insert After 和 Insert Before。插入文本后，根据插入的位置，您必须选择插入的文本，然后更改样式。

```
Sub InsertAfter()
    Dim wrd As String
    Dim rng As Range

    wrd = "End"

    Set rng = Selection.Range

    rng.InsertAfter wrd

    '~~> Remove selection. This will move the cursor at end of selected word
    Selection.MoveRight Unit:=wdCharacter, Count:=1
    '~~> Select the inserted word
    Selection.MoveRight Unit:=wdCharacter, Count:=Len(wrd), Extend:=wdExtend
    '~~> Change Style
    Selection.Style = ActiveDocument.Styles("List Paragraph")
End Sub

Sub InsertBefore()
    Dim wrd As String
    Dim rng As Range

    wrd = "Start"

    Set rng = Selection.Range

    rng.InsertBefore wrd

    '~~> Remove selection. This will move the cursor at begining of inserted word
    Selection.MoveLeft Unit:=wdCharacter, Count:=1
    '~~> Select the inserted word
    Selection.MoveRight Unit:=wdCharacter, Count:=Len(wrd), Extend:=wdExtend
    '~~> Change Style
    Selection.Style = ActiveDocument.Styles("List Paragraph")
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:54:13.297

这是一个简单的例子：

```
Sub test()
Dim StartingCount As Long
Dim InsertBeforeCount As Long

With ActiveDocument
    StartingCount = .Characters.Count
    Selection.InsertBefore "start"
    InsertBeforeCount = .Characters.Count - StartingCount
    .Range(1, InsertBeforeCount).Font.Bold = True
    Selection.InsertAfter "end"
    .Range(StartingCount + InsertBeforeCount, .Characters.Count).Font.Italic = True
End With
End Sub 
```

# powershell - powershell 接收作业结果

> ID：11980730
> 
> 赞同：0
> 
> 时间：2012-08-16T04:27:54.643
> 
> 标签：powershell

如何在不同的计算机上运行多个作业并将结果返回到一个地方？前任：

```
$servers=s1,s2,s3,s4
$jobs = Invoke-Command -CompureName $servers -ScriptBlock { <RestoreDB> } -AsJob
Wait-Job *
Receive-Job *
Remove-Job * 
```

我会得到所有的工作结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T14:00:32.690

这取决于。如果您正在运行的命令输出了某些内容，那么您应该将其取回。

# c# - 基于 2 个表格中的日期的日历

> ID：11980731
> 
> 赞同：0
> 
> 时间：2012-08-16T04:27:56.083
> 
> 标签：c#, asp.net

我有两个表 Confirm_orders 和 Tentative Orders 有开始日期和结束日期..

如何在我的 .aspx 页面的日历中实现这些日期？

我想要的只是开始和结束日期（代表事件日期），以红色的形式出现在日历中。这些日期必须在日历中标记，以便登录的员工可以查看这些暂定日期并且可以确认这些日期..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:05:40.493

我首先要弄清楚你想使用什么日历控件。它们有[上百万种](http://www.enfew.com/8-best-ajax-calenders-event-mangment-scripts/)，无论您想要标准的 HTML、jQuery、YUI、MooTools 还是随心所欲的任何东西。

ASP.NET 有一个非常基本的内置。你可以在[这里](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.calendar%28v=vs.80%29.aspx)阅读它。它不需要任何脚本或任何东西，您可以使用服务器端代码操作样式。Microsoft AJAX 控件工具包（Microsoft 更现代的 Web 控件框架）也有一个[日历控件](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/Calendar/Calendar.aspx)。

通常，当我在寻找具有特定功能的控件时，在您的情况下突出显示特定日期的能力时，我会找到一个教程或示例来说明如何首先做到这一点。这样我就不会被某种控制所束缚。我搜索了一下，发现这个[StackOverflow 问题](https://stackoverflow.com/questions/2385332/jquery-datepicker-highlight-dates)非常相似，使用基于 jQuery 的控件。从数据库中读取数据后，您可以将开始日期和结束日期写为 JavaScript 变量，并从那里按照示例进行操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-16T04:46:17.240

您需要使用 javascript DatePicker。没有显示日历的内置 C# HTML 助手。

# c# - 正则表达式使用特定字符前面的字符拆分字符串

> ID：11980732
> 
> 赞同：0
> 
> 时间：2012-08-16T04:28:03.153
> 
> 标签：c#, .net, regex, string-split

我有一个字符串，我想使用一个以特定字符开头的字符来拆分它

```
Foo:xxxxxxxxx:Bar:xxxxxxxx:FooBar:xxxxxxx 
```

我想用冒号`:`来分割它`x`。

我试过`x:`了，但它正在删除 last `x`。

我知道我可以使用这个正则表达式，然后附加`x`到每个拆分的字符串中，但是有没有办法使用正则表达式拆分这个字符串，以便最后一个`x`也存在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T06:00:37.867

尝试*`lookbehind assertion`*：

```
(?<=x): 
```

你的代码是这样的：

```
var result = Regex.Split(inputString, "(?<=x):"); 
```

* * *

解释：

```
(?<= subexpression)
Zero-width positive lookbehind assertion. 
```

示例：如果您`(?<=19)\d{2}`在

`1851 1999 1950 1905 2003`结果是

`99`, `50`,`05`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:35:30.557

零宽度正向回溯断言。

```
(?<=x): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T04:36:11.920

```
var list = Regex.Split("Foo:xxxxxxxxx:Bar:xxxxxxxx:FooBar:xxxxxxx", "(?<=x):"); 
```

根据 sbutler 的说法，它使用积极的后视。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T04:39:58.650

在 C# 的方法中使用正向向后看[`Regex.Split`](http://msdn.microsoft.com/en-us/library/8yttk7sy.aspx)：

```
string[] substrings = Regex.Split("Foo:xxxxxxxxx:Bar:xxxxxxxx:FooBar:xxxxxxx", "(?<=x):"); 
```

# java - 扩展集合时如何在“this”上使用 Iterable？

> ID：11980733
> 
> 赞同：0
> 
> 时间：2012-08-16T04:28:05.957
> 
> 标签：java, generics

我该如何解决这个错误？我尝试了`this`, and `(Article) this`, and `super.iterable()`，但似乎没有任何效果。只会将类型`Article`添加到此队列中。Java 1.7.0_03。

```
[javac] C:\cygwin\home\Chloe\Queue.java:26: error: incompatible types
[javac]             for (Article a: (Iterable) this) {
[javac]                             ^
[javac]   required: Article
[javac]   found:    Object 
```

这是源代码。

```
public class Queue<T> extends ArrayDeque {

public int words() {
    int words;
    for (Article a: (Iterable) this) {
    }
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:33:39.580

队列的迭代器将返回实例，而不是. 你的循环应该是这样的：~~`T`~~ `Object``Article`

```
public int words() {
    int words;
    for (Object a: this) {
       // do something
    }
} 
```

或者，如果您需要文章队列，请以这种方式声明该类：

```
public class Queue extends ArrayDeque<Article> {

  // this queue will store Article instances

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:33:47.410

队列包含对象，它并不意味着知道任何项目是否是`Article`...

试试这个

```
for (Object a: this) 
```

或这个

```
public class Test<T> extends ArrayDeque<T> {

    public int words() {
        int words;
        for (T a : this) {
        }
    }
} 
```

# c++ - 我想知道 EN_KILLFOCUS 之后的焦点在哪里？

> ID：11980735
> 
> 赞同：1
> 
> 时间：2012-08-16T04:28:15.653
> 
> 标签：c++, windows, visual-studio, winapi, mfc

现在我已经像这样构建了我的应用程序：它在 Internet 浏览器（IE、FireFox、Chrome 等）的容器中运行。我的程序中有一个无模式对话框，该对话框包含一个 CEdit 控件。

这是我的问题：当用户激活编辑控件以输入内容时，编辑控件获得焦点。当编辑控件失去焦点时，我必须检查输入是否有效。如果没有，我将显示一个模型对话框

AfxMessageBox

. 但现在我无法确定我的编辑控制是否在我自己的应用程序中丢失。因为编辑控件可能会通过很多方式失去焦点，例如当用户关闭浏览器时，当用户打开文本程序时。在这些情况下，我将跳过无效检查。

任何人都可以告诉我如何找到我的编辑控件失去焦点的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:54:13.530

调用 GetFocus() 并查看焦点是否已回到线程中的另一个窗口。

```
HWND hwndFocus = ::GetFocus();
if (hwndFocus != 0 && ::GetWindowThreadProcessId(hwndFocus, NULL) == ::GetCurrentThreadId())
{
    // focus still in our thread
} 
```

# ios - UITableView 仅在第二次尝试时向详细视图控制器发送数据

> ID：11980738
> 
> 赞同：2
> 
> 时间：2012-08-16T04:28:38.937
> 
> 标签：ios, uitableview, ios5, storyboard, segue

嘿，我一直在研究交通应用程序一段时间，现在已经被这个问题困扰了一段时间。

我正在使用 iOS 5 和故事板。基本上，当用户选择我使用的一行时，我有一个 UITableView 显示最喜欢的巴士站位置：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Favorite *favorite = [self.favoriteItems objectAtIndex:indexPath.row];

    stopString = favorite.title;
    routeString = favorite.subtitle;
} 
```

使用用户选择的单元格的停止和路线信息，然后我准备一个与我的故事板上的转场相对应的转场，推动一个使用停止名称和路线名称的详细视图控制器来显示来自 plist 的时间。

我对 Objective C 和 iOS 还很陌生，所以我正在使用我朋友告诉我的 segue，但是，这可能是问题所在。转场看起来像这样：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    UIViewController *destination = segue.destinationViewController;
    if ([destination respondsToSelector:@selector(setDelegate:)])
    {
        [destination setValue:self forKey:@"delegate"];
    }
    if ([destination respondsToSelector:@selector(setSelection:)])
    {
        NSString *route = routeString;
        NSDictionary *selection1 = [NSDictionary dictionaryWithObjectsAndKeys:route, @"route", stopString, @"stop", nil];
        [destination setValue:selection1 forKey:@"selection"];
    }
} 
```

在我的 DetailViewController 中的 segue 之后，我在视图 DidLoad 中获取停止和路线信息：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    route = [selection objectForKey:@"route"];
    stopName = [selection objectForKey:@"stop"];

    NSLog(@"stopName: %@", stopName);
    NSLog(@"routeName: %@", route);
} 
```

这就是我的问题出现的地方。当我运行模拟器并单击表格视图中的一个单元格时，我被推送到 DVC，但是，stopName 和 routeName 都是空的，因此没有发送或接收任何信息。但是，如果我返回表格并单击另一个单元格，则 routeName 和 stopName 将填充我第一次单击单元格时应该发送的信息。如果我继续这个过程，它会继续发送之前点击过的单元格的信息，而不是当前。

所以基本上信息正在发送，但只有在我经历了两次 segue 之后。显然我希望它在第一时间发送和接收信息，但它被延迟了，让我抓狂。我很感激有人可以给我的任何帮助，因为我已经在互联网上搜索了几天试图解决这个问题，非常感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T06:14:06.823

`prepareForSegue:`之前被调用`didSelectRowAtIndexPath:`。这就是为什么你看到的价值观总是落后的原因。

更好的解决方案是在您的方法中获取 stopString 和 routeString 值`prepareForSegue:`（并且根本不使用`didSelectRowForIndexPath:`）。这样做的关键是要意识到`sender`传递给的参数值是`prepareForSegue:`被点击的 UITableViewCell。您可以使用 UITableView 方法`indexPathForCell`在表格中获取单元格的 indexPath，然后使用它来查找`favoriteItems`数组中的数据。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{    
    UITableViewCell *cell = (UITableViewCell*)sender;
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];   
    Favorite *favorite = [self.favoriteItems objectAtIndex:indexPath.row];

    stopString = favorite.title;
    routeString = favorite.subtitle;

    UIViewController *destination = segue.destinationViewController;
    if ([destination respondsToSelector:@selector(setDelegate:)])
    {
        [destination setValue:self forKey:@"delegate"];
    }
    if ([destination respondsToSelector:@selector(setSelection:)])
    {
        NSString *route = routeString;
        NSDictionary *selection1 = [NSDictionary dictionaryWithObjectsAndKeys:route, @"route", stopString, @"stop", nil];
        [destination setValue:selection1 forKey:@"selection"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:19:22.287

确保您没有直接将 segue 连接到下一个视图控制器到 tableView CELL。连接到整个 UITableViewController / UIViewController（无论您使用哪个）并命名，例如“segueNameInStoryboard”。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Favorite *favorite = [self.favoriteItems objectAtIndex:indexPath.row];

    stopString = favorite.title;
    routeString = favorite.subtitle;

    /* add this line */
    [self performSegueWithIdentifier:@"segueNameInStoryboard" sender:self];
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{ 
    if([segue.identifier isEqualToString:@"segueNameInStoryboard"])
    {    
        UIViewController *nextViewController = segue.destinationViewController;
        nextViewController.delegate = self;

        NSDictionary *selection1 = [NSDictionary dictionaryWithObjectsAndKeys:routeString, @"route", stopString, @"stop", nil];
        nextViewController.selection = selection1;
    }
} 
```

# java - 来自套接字的 Java HTTP 请求/响应，服务器在客户端接收之前关闭输出流

> ID：11980748
> 
> 赞同：0
> 
> 时间：2012-08-16T04:29:24.870
> 
> 标签：java, http

似乎使用 curl 和大多数 Web 浏览器，我的服务器代码在客户端能够读取响应之前关闭连接。这是我的代码

```
public void run() {
        try {
            InputStream input = clientSocket.getInputStream();
            OutputStream output = clientSocket.getOutputStream();
            System.out.println(input);

            // getRequestObject(input);
            long time = System.currentTimeMillis();
            output.write(("HTTP/1.1 200 OK\n\nWorkerRunnable: " + this.serverText + " - " + time + "").getBytes());
            output.flush();
            output.close();
            input.close();
            System.out.println("Request processed: " + time);
        } catch (IOException e) {
            // report exception somewhere.
            e.printStackTrace();
        }
    }

    protected String readInputStream(InputStream input) throws IOException {
        String inputLine;
        BufferedReader in = new BufferedReader(new InputStreamReader(input));
        StringBuilder sb = new StringBuilder();
        while (!(inputLine = in.readLine()).equals("")) {
            sb.append(inputLine);
        }
        return sb.toString();
    } 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T07:03:21.600

也许问题可能是由于您没有读取客户端数据这一事实引起的。客户端试图向您发送 HTTP 标头，但您立即开始发送响应。尝试从 中读取，`InputStream`直到收到一个空行（表示请求 HTTP 标头结束），然后开始发送输出。

如果您需要在应用程序中嵌入 HTTP 服务器，我强烈建议您使用现有库。实现自己的 HTTP 兼容服务器将是一项乏味的工作。看

*   [用 Java 创建一个简单的 HTTP 服务器？](https://stackoverflow.com/a/2717309/1333025)
*   [NanoHTTPD](http://elonen.iki.fi/code/nanohttpd/)

# c# - c# - 反序列化大对象

> ID：11980752
> 
> 赞同：0
> 
> 时间：2012-08-16T04:29:49.110
> 
> 标签：c#, serialization, tcp, bittorrent, monotorrent

我有一个聊天室，它有一个文件共享系统，我通过稍微修改 monotorrent 构建了该系统。

当用户共享文件时，客户端序列化 Monotorrent.common.torrent 对象（表示 .torrent 文件）并将其发送到另一个对象内部的服务器，然后服务器对其进行反序列化。这仅在用户共享的文件很小（大约小于 1 MB）时才有效。当服务器较大时，服务器会给出以下例外：

> 二进制流“0”不包含有效的 BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。

这是我的反序列化代码：

```
public CommendData ByteArrayToCommendData(byte[] arrBytes)
{
    using (MemoryStream memStream = new MemoryStream(arrBytes))
    {
        BinaryFormatter binForm = new BinaryFormatter();
        memStream.Seek(0, SeekOrigin.Begin);
        CommendData obj = (CommendData)binForm.Deserialize(memStream);
        return obj;
    }
} 
```

（CommendData 在此实例中包含 Monotorrent.common.torrent 对象）

# delphi - 尝试使用 TZDB ...如何在 delphi 7 中转换

> ID：11980753
> 
> 赞同：1
> 
> 时间：2012-08-16T04:29:50.067
> 
> 标签：delphi, delphi-7

如何在delphi7中转换此代码...

```
 procedure Tform1.button1.click(sender: tobject);  
 var
   LTZID: string;
 begin
  // Write each time zone ID on the console 
  for LTZID in TBundledTimeZone.KnownTimeZones(true) do
  WriteLn(LTZID);
end; 
```

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T07:37:22.050

```
procedure Tform1.button1.click(sender: tobject);
 var
   i: Integer;
 begin
  // Write each time zone ID on the console
  for i := Low(TBundledTimeZone.KnownTimeZones(true))
      to High(TBundledTimeZone.KnownTimeZones(true)) do
    WriteLn(TBundledTimeZone.KnownTimeZones(true)[i]);
end; 
```

或者，稍微优化一下：

```
procedure Tform1.button1.click(sender: tobject);
 var
   KnownTimeZones: TStringDynArray;
   i: Integer;
 begin
  // Write each time zone ID on the console
  KnownTimeZones := TBundledTimeZone.KnownTimeZones(true);
  for i := Low(KnownTimeZones) to High(KnownTimeZones) do
    WriteLn(KnownTimeZones[i]);
end; 
```

# android - 结果为零（android）

> ID：11980754
> 
> 赞同：0
> 
> 时间：2012-08-16T04:29:51.123
> 
> 标签：android, textview

我的输出为零。我找不到任何错误

任何帮助都会很棒。

完整代码：

```
package com.equbez.resistor_decoder;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Second extends Activity {
    int i,b1,b2,b3,result,four;
    String one,two,three; 
    String arr[]={"black","brown","red","orange","yellow","green","blue","violet","grey","white"};

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        EditText etone=(EditText) findViewById(R.id.editText1);
        one=etone.getText().toString();

        for(i=0;i<9;i++) {
            if(one.equalsIgnoreCase(arr[i])) {
                b1=i;
            }
        }

        EditText ettwo=(EditText) findViewById(R.id.editText2);
        two=ettwo.getText().toString();

        for(i=0;i<9;i++) {
            if(two.equalsIgnoreCase(arr[i])) {
                b2=i;
            }
        }

        EditText etthree=(EditText) findViewById(R.id.editText3);
        three=etthree.getText().toString();

        for(i=0;i<9;i++) {
            if(three.equalsIgnoreCase(arr[i])) {
                b3=i;
            }
        }

        result=b2+b2+b3;
        Button bfour=(Button) findViewById(R.id.button4);
        bfour.setOnClickListener( new OnClickListener() {
            @Override
            public void onClick(View V) {
                TextView tv=(TextView) findViewById(R.id.textView4);    
                tv.setText(""+result);
            }
        });
    }
} 
```

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:04:14.767

最初，调用活动时 EditTextView 将为空。所以你总是得到一个空字符串，它与 arr[] 中的字符串进行比较。

b1、b2、b3 被初始化为默认值，即“0”，因此结果始终为“0”

将所有 getText 代码写入`bfour.setOnClickListener()`

或者实现 TextWatcher 并使用 onTextChanged 方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:58:36.317

在这里我重新编码了更改，试试这个代码，

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class Second extends Activity 
{
    private static int b1,b2,b3,result,four;
    private String one,two,three; 
    private String arr[]={"black","brown","red","orange","yellow","green","blue","violet","grey","white"};

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);
        EditText etone=(EditText) findViewById(R.id.editText1);

        one=etone.getText().toString();
        for( int i = 0 ; i < 10; i++ )
        {
            if(one.trim().equalsIgnoreCase(arr[i].trim()))
            {
                b1=i;
                break;
            }
        }

        EditText ettwo=(EditText) findViewById(R.id.editText2);
        two=ettwo.getText().toString();

        for( int i = 0 ; i < 10; i++ )
        {

            if(two.trim().equalsIgnoreCase(arr[i].trim()))
            {
                b2=i;
                break;
            }
        }

        EditText etthree=(EditText) findViewById(R.id.editText3);
        three=etthree.getText().toString();

        for( int i = 0 ; i < 10; i++ )
        {
            if(three.trim().equalsIgnoreCase(arr[i].trim()))
            {
                b3=i;
                break;
            }
        }

        result=b2+b2+b3;
        Button bfour=(Button) findViewById(R.id.button4);
        bfour.setOnClickListener(new OnClickListener() 
        {
            @Override
            public void onClick(View V) 
            {
                TextView tv=(TextView) findViewById(R.id.textView4);    
                tv.setText( String.valueOf(result));
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T04:48:57.643

利用

```
for(i = 0 ; i< arr.length ;i++)
do something 
```

在您的代码中，如果您输入白色，则不会进行比较

最后输入字符串时是否有空格？一旦检查您作为输入提供的字符串的长度是否准确

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T05:29:35.027

我有问题。单击按钮后，您必须运行所有 3 个循环。你已经在 Oncreate() 上做到了。所以你总是得到0。见下文：

```
int i, b1, b2, b3, result, four;
String one, two, three;
String arr[] = { "black", "brown", "red", "orange", "yellow", "green", "blue", "violet", "grey", "white" };
EditText etone, ettwo, etthree;
Button bfour;
TextView tv;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_home);
    etone = (EditText) findViewById(R.id.editText1);
    ettwo = (EditText) findViewById(R.id.editText2);
    etthree = (EditText) findViewById(R.id.editText3);
    bfour = (Button) findViewById(R.id.button4);
    bfour.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View V) {

            one = etone.getText().toString();

            for (i = 0; i < arr.length; i++) {
                if (one.equals(arr[i])) {
                    b1 = i;
                    System.out.println("dhrupal one="+b1);
                }
            }
            two = ettwo.getText().toString();

            for (i = 0; i < arr.length; i++) {

                if (two.equals(arr[i])) {
                    System.out.println("dhrupal one="+two);
                    b2 = i;
                }
            }
            three = etthree.getText().toString();

            for (i = 0; i < arr.length; i++) {
                if (three.equals(arr[i])) {
                    System.out.println("dhrupal one="+three);
                    b3 = i;
                }
            }

            result = b1 + b2 + b3;
            tv = (TextView) findViewById(R.id.textView4);
            tv.setText("result=" + result);

        }
    });
} 
```

# c# - (C#/XNA) 无论如何，碰撞永远不会起作用

> ID：11980765
> 
> 赞同：0
> 
> 时间：2012-08-16T04:30:40.777
> 
> 标签：c#, xna, collision-detection

这几天我一直在琢磨这件事。更新实体时，我会检查碰撞，如果它们根据下面的代码发生碰撞，则将其相应的运动值设置为 0。除某种原因外，此代码不适用于检查右侧的碰撞。如果实体前面有一堵 2 高的墙，它会忽略它。但是，如果我在下面检查它似乎可以正常工作，但它会完全停止。

碰撞代码：

```
 public static bool CollidesRight(Level level, Vector2 position, Vector2 motion, int width, int height)
    {
        Vector2 result = position + motion;
        int x1 = (int)(result.X / (float)Tile.TILE_WIDTH);
        int x2 = (int)((result.X + (float)width) / (float)Tile.TILE_WIDTH) + 1;
        int y1 = (int)(result.Y / (float)Tile.TILE_HEIGHT);
        int y2 = (int)((result.Y + (float)height) / (float)Tile.TILE_HEIGHT);
        AABB resultBB = new AABB(result, width, height);
        for (int i = x1; i < x2; i++)
        {
            for (int j = y1; j < y2; j++)
            {
                if (level.GetTileAt(i, j) != 0 && (Tile.TileList[level.GetTileAt(i, j)].IsSolid() || Tile.TileList[level.GetTileAt(i, j)].HasSolidTop()))
                {
                    AABB tile = new AABB(new Vector2(i * 64f, j * 64f), 64, 64);
                    Console.WriteLine(tile);
                    return resultBB.Intersects(tile);
                }
            }
        }
        return false;
    } 
```

这是我的实体的更新代码：

```
 public virtual void Tick()
    {
        lastMotion = motion;
        lastPosition = position;
        if (Collision.CollidesBottom(level, position, motion, width, height))
        {
            onGround = true;
        }
        else if(!Collision.CollidesBottom(level, position, motion, width, height))
        {
            onGround = false;
        }

        if (onGround && !isJumping)
        {
            motion.Y = 0f;
            fallDistance = 0;
        }
        else if(!onGround)
        {
            fallDistance++;
            motion.Y += gravity * (fallDistance * 0.005f);
        }

        if (isJumping)
        {
            timeJumping++;
            if (timeJumping > 32)
            {
                timeJumping = 0;
                isJumping = false;
            }
            else
            {
                motion.Y = -2.25f;
            }
        }

        position.Y += motion.Y;

        if (motion.X != 0)
        {
            if (motion.X < 0)
            {
                motion.X += friction;
            }
            if (motion.X > 0)
            {
                motion.X -= friction;
            }
        }

        if ((motion.X > 0 && Collision.CollidesRight(level, position, motion, width, height)) || (motion.X < 0 && Collision.CollidesLeft(level, position, motion, width, height)))
        {
            motion.X = 0f;
        }

        position.X += motion.X;

        //MoveEntity(motion);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T19:41:30.957

我有 3 个选项供您选择。

首先，**编辑 - 没关系，我误读了你的代码**我认为你应该在进行碰撞检查之前添加你的 X 运动，因为碰撞检查使用它来工作。如果您不想将其添加到实际的玩家动作中，至少将潜在动作传递给函数。仅此一项就可以解决所有问题。但还有另一个问题。

其次，**我很确定是这个**，我怀疑你的 position.Y 在设置 OnGround 布尔值时经常被截断为 Int 。这意味着它的最小值将是一个完整的单元，而下一个单元将是一个完整的单元。在 pastebin 的 AABB 代码中：

```
if (bb.max.Y <= min.Y || bb.min.Y >= max.Y)
    {
        return false;
    } 
```

即使 X 坐标相关代码检测到碰撞，此代码也会返回 false。您应该修改此处的逻辑，以便函数在发生冲突时返回 true，**而不是在两次独立检查时返回 false**。

第三，假设您的宽度为 1 个单位，并且您的图块也是 1 个单位宽，在 x=2 和 position.x = 0.5 处有一个块，以及一个非常小的 xMotion（或尚未添加的一个，请参阅答案1):

（占用一些块 0 和一些块 1，像这样）

```
[。][ ][X]
```

当你击中 x = 1 时你想停下来，因为那样你就会遇到障碍。但：

x1 = (int)(0.5) = 0
x2 = (int)(0.5 + 1) + 1 = 2

所以你的循环：

```
for (int i = x1; i < x2; i++) 
```

检查块 0（它是空的，然后检查块 1（它是空的）然后停止（因为 i == x2）并且从不检查块 2。所以你关心的块永远不会得到它的碰撞检查。我想如果你改变它到

```
for (int i = x1; i <= x2; i++) 
```

那么一切都会更好地检测迎面而来的碰撞。您可能应该为您未来的 CollidesTop 函数做类似的事情。

PS 当然，一次一个地尝试这些答案。:)

# picasa - picasa的人脸特征提取算法是什么？

> ID：11980766
> 
> 赞同：3
> 
> 时间：2012-08-16T04:31:06.380
> 
> 标签：picasa, face-recognition

我正在研究面部特征提取算法。我玩过几种人脸识别解决方案，但我更喜欢 picasa。我想知道picasa的人脸特征提取算法。你能帮助我吗？请给我你有用的建议。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:19:06.970

谷歌收购了两家从事人脸检测的公司，[2006 年的 Neven Vision](http://www.searchenginejournal.com/google-neven-vision-image-recognition/3728/)和 2011 年的 Pittsburgh Pattern Recognition 或[PittPatt](http://techcrunch.com/2011/07/22/google-acquires-facial-recognition-software-company-pittpatt/)。Neven Vision 最有可能用于 Picasa 的早期版本。很难确定。

有关 Neven Vision 算法的更多信息，请参阅[学术文章](http://scholar.google.com/scholar?q=neven+vision+algorithm&hl=en&as_sdt=0&as_vis=1&oi=scholart&sa=X&ei=2OQsUKHxKIrpygGXi4GoAg&ved=0CGQQgQMwAA)及其[专利申请](http://www.searchenginejournal.com/google-neven-vision-image-recognition/3728/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-03T08:05:41.897

试试opencv，它似乎有更接近的人脸检测……但你会写自己的人脸识别算法……他们已经给出了一个公式来检查opencv.com

永远不要使用人脸识别作为任何身份验证的手段.....因为即使是 android 也有一个 api 并且它在图像识别方面受到了不好的评价.....同样 picasa 也采用人脸识别但它不是那么好.. . 最后 iphoto app apple 几乎达到了 95% 的完美...

iPhoto 算法是基于学习的算法，如果你让 iphoto 知道错误的人脸识别图像，它将从中学习......

但是 iPhoto 和 picasa 都没有发布这个..

查看以下网址... [http://www.ratchetup.com/eyes/2009/02/comparing-iphoto-and-google-face-recognition.html](http://www.ratchetup.com/eyes/2009/02/comparing-iphoto-and-google-face-recognition.html)

[http://arstechnica.com/gadgets/2011/10/first-look-android-40-sdk-opens-up-face-recognition-apis/](http://arstechnica.com/gadgets/2011/10/first-look-android-40-sdk-opens-up-face-recognition-apis/)

[http://blog.chron.com/techblog/2011/12/android-4-0s-facial-recognition-is-cool-but-dont-trust-it-yet/](http://blog.chron.com/techblog/2011/12/android-4-0s-facial-recognition-is-cool-but-dont-trust-it-yet/)

# iphone - 如何将第二个模态视图的文本字段值获取到第一个模态视图的文本字段

> ID：11980772
> 
> 赞同：1
> 
> 时间：2012-08-16T04:32:15.257
> 
> 标签：iphone, ios, xcode, ios5

> **可能的重复：**
> [在视图控制器之间传递数据](https://stackoverflow.com/questions/5210535/passing-data-between-view-controllers)

我有 2 个模态视图。第一个模态视图用于编辑数量和价格；当我们单击第一个模态视图的价格文本字段时使用第二个模态视图，以便给出我们更改价格的原因，我们可以将新价格放入模态视图的价格文本字段中。当我在第二个模式视图中设置价格时，我希望第一个模式视图中的价格发生变化。如何捕捉第二个模态视图的值以放入第一个模态视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:52:51.147

使用**NSNotification**中心

您必须在**First Modalview中添加观察者事件**

```
 -(void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reload:) name:@"refresh" object:nil];
    }
- (void)reload:(NSNotification *)notification {
    textfield.text= [[notification userInfo] valueForKey:@"price"] ;
} 
```

在**第二个模态视图**中，您必须在完成编辑后发布通知

（传递您的文本字段值）

```
NSDictionary *userInfo = [NSDictionary dictionaryWithObject:@"333" forKey:@"price"];
   [[NSNotificationCenter defaultCenter] postNotificationName:@"refresh" object:nil userInfo:userInfo] 
```

;

最后移除观察者

-

```
(void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:@"refresh" object:nil];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:55:53.057

您可以使用**Singleton**来保存该类的一些数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:40:04.943

以下简单的步骤将使您能够做到这一点。

在第一个 Modal ViewController 中，您可以声明一个函数，如

```
- (void) setUpdatedValueWithValue: (NSString *) newValue
{
    self.objTextField.text  =  newValue;
} 
```

在头文件中也声明这个函数，以便我们可以从其他类访问它。

在第二个 Modal ViewController

**SecondViewController.h**

```
@interface SecondViewController : UIViewController
{
     id    objFirstViewController;
}
@property (nonatomic, retain)   id   objFirstViewController;

@end 
```

**第二视图控制器.m**

```
@implementation SecondViewController

@synthesize objFirstViewController;

@end 
```

在你提出喜欢的`SecondViewController`对象之前，`FirstViewController``SecondViewController`

```
- (void) presentSecondViewController
{
    SecondViewController    *objSecondViewController  =  [[SecondViewController alloc] init];
    objSecondViewController.objFirstViewController    =  self;
    [self presentModalViewController: objSecondViewController animated: YES];
    [objSecondViewController release];
    objSecondViewController = nil;
} 
```

然后，在您调用的函数中，`SecondViewController`您可以在值编辑后关闭您可以执行的操作，

```
- (void) finishEdit
{
    if([objFirstViewController respondsToSelector: @selector(setUpdatedValueWithValue:)])
    {
        [objFirstViewController performSelector: @selector(setUpdatedValueWithValue:) withObject: editedTextView.text];
    }
    [self dismissModalViewControllerAnimated: YES];     
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T04:38:43.943

**用你的关键字设置你的对象**

```
[[NSUserDefaults standardUserDefaults]setObject:@"value of second modal view" forKey:@"keyName"]; 
```

**而不是在第一个模态视图中获取该对象**

```
NSString *name = [[NSUserDefaults standardUserDefaults]objectForKey:@"keyName"]; 
```

# linux - memcachedslab和linux内核slab有什么关系

> ID：11980773
> 
> 赞同：0
> 
> 时间：2012-08-16T04:32:26.593
> 
> 标签：linux, memory, memcached, kernel

在linux内核中，有一个slab分配器用于高效的内存管理。我知道 linux 中有一个名为“memcached”的程序来支持 MySQL 或 PHP 或其他程序的内存缓存。他们似乎都在使用slab算法来进行有效的内存管理。

这两个平板算法相同吗？如果我了解“memcached”如何工作以了解内核板分配器的工作原理，这会有所帮助吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:25:21.423

memcached 使用自己的slab分配器实现

# geocode - 地理编码中的必填和可选地址字段是什么？

> ID：11980774
> 
> 赞同：0
> 
> 时间：2012-08-16T04:32:32.717
> 
> 标签：geocode

地理编码中的必填和可选地址字段是什么？由于世界各地不同国家的地址格式不同，地理编码中需要使用什么格式。是否有特定的格式，如地址中的必填字段和可选字段。请让我知道，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T06:42:52.790

没有具体格式。只要给它一些数据，它就会尽最大努力去辨别它。我有一个用户输入邮政编码的应用程序，它将检索所有相关信息（城市、州/省、国家/地区）。

# wordpress - 在 WordPress 中，如何根据查询字符串参数重写“页面”URL？

> ID：11980776
> 
> 赞同：0
> 
> 时间：2012-08-16T04:32:56.757
> 
> 标签：wordpress, url-rewriting, query-string, permalinks

我有以下页面，其中包含一个帖子和一些评论。 [http://mysite.com/tips](http://mysite.com/tips)

当用户发表评论时，我会向其中添加元数据，以便可以使用以下 URL 过滤评论： http://mysite.com/tips? [id =cat&filter_id=1](http://mysite.com/tips?id=dog&filter_id=2)
[http://mysite.com/tips?id](http://mysite.com/tips?id=cat&filter_id=1)
[=狗&filter_id=2](http://mysite.com/tips?id=dog&filter_id=2)

我想改用以下网址：http:
[//mysite.com/tips/cat](http://mysite.com/tips/cat)
[http://mysite.com/tips/dog](http://mysite.com/tips/dog)

我完成了本教程，这似乎是我需要的，但是当我输入我的 url 时，我得到一个找不到页面的错误。[http://thereforei.am/2011/10/28/advanced-taxonomy-queries-with-pretty-urls/](http://thereforei.am/2011/10/28/advanced-taxonomy-queries-with-pretty-urls/)

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T17:49:31.293

使用 mysite/wp-admin 转到管理员的仪表板。然后单击页面选项以查看所有页面。单击所需的页面名称以编辑该页面。在页面名称下方，您可以看到**永久链接**。编辑此内容以更改页面的 URL。

# c# - 使用 c# 客户端将文件上传到 https 网络服务器

> ID：11980779
> 
> 赞同：1
> 
> 时间：2012-08-16T04:33:24.237
> 
> 标签：c#, ssl, webserver

我想使用 C# 客户端将文件从客户端机器安全地上传到网络服务器。获得一些示例应用程序将很有帮助。另外我想知道如何使用 ssl 证书实现这一点。

谢谢，

阿卜杜勒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:35:42.773

```
 WebClient webClient = new WebClient();
        string webAddress = null;
        try
        {
            webAddress = @"http://myCompany/ShareDoc/";

            webClient.Credentials = CredentialCache.DefaultCredentials;

            WebRequest serverRequest = WebRequest.Create(webAddress);
            WebResponse serverResponse;
            serverResponse = serverRequest.GetResponse();
            serverResponse.Close();

            webClient.UploadFile(webAddress + logFileName, "PUT", logFileName);
            webClient.Dispose();
            webClient = null;
        }
        catch (Exception error)
        {
            MessageBox.Show(error.Message);
        } 
```

# javascript - 用户单击带有哈希值的链接以访问该页面 如果禁用 Javascript 会发生什么？

> ID：11980782
> 
> 赞同：0
> 
> 时间：2012-08-16T04:33:42.040
> 
> 标签：javascript, jquery, html

我正在尝试实现此功能，但有点不确定，不知道如何处理它。我有一个名为“masterDiv”的 div 母版页。'masterDiv' 调用 load() 并从其内容 div 加载名为“details.html”的外部 html 页面的内容。这就是我的做法：

```
 $('#masterDiv').load('details.html #content'); 
```

内容按预期加载，url 地址弹出为“http://www.xyz.com#details”

这一切都很好并且有效，但后来我想到了那些可能没有支持 JavaScript 的用户。我想我会直接将这些用户引导到“details.html”页面，而不是让“母版页”从“details.html”页面加载内容。所以现在问题来了，假设我向用户发送此链接：

```
 http://wwww.xyz.com#details 
```

如果该用户的浏览器没有启用 Javascript，那么显然无法调用 JQuery，因此不会进行 load() 调用，依此类推。请问如何将用户直接引导到“details.html”页面？

任何见解都会很棒

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:41:41.923

您的链接可能如下所示：

```
<a id="myLink" href="#details">Link that the user clicks</a> 
```

当用户单击链接时，会调用 jQuery 加载。那是对的吗？

如果是这样，您可以改为使用这样的链接：

```
<a id="myLink" href="http://wwww.xyz.com/details.html">Link that the user clicks</a> 
```

这样，当页面加载时，该链接将适用于所有人（即使是那些禁用了 javascript 的人）。然后，当页面首次加载时：

```
$(document).ready(function() {
    $('#myLink').attr('href', '#details');
}); 
```

将链接设置为以前的方式。这样，只有启用了 Javascript 的用户才能使用加载版本。其他的将被简单地重定向到 details.html

如果问题中有我没有正确理解的内容，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:39:36.863

> 请问如何将用户直接引导到“details.html”页面？

通过使链接的 href 属性为“details.html”。默认情况下，每个链接的工作方式。

```
<a href="details.html">Details</a> 
```

您网站上的每个链接都应该以这种方式构建。这就是互联网设计的工作方式，以及它如何发挥最佳作用。如果您确实*需要*，您应该只使用 JavaScript 添加功能，您不应该依赖它来实现页面之间链接等基本功能。

# ruby-on-rails - 尝试在 Rails 中创建新的 AdminUser：active_admin 但无法发送电子邮件

> ID：11980784
> 
> 赞同：0
> 
> 时间：2012-08-16T04:33:50.150
> 
> 标签：ruby-on-rails, ruby, devise, activeadmin, devise-confirmable

嗨，我已将 active_admin 添加到我的 rails 应用程序中。我想创建一个新的 AdminUser。

根据这个文档，我尝试创建一个用户并让应用程序发送一封电子邮件。用户在应用程序中创建得很好，但没有发送电子邮件。我想知道是否有人可以就为什么这不起作用给我建议。我已经仔细检查了我的代码及其文档所说的确切内容。

我缺少什么来发送电子邮件？

这是相关的类

管理员/admin_users.rb

```
ActiveAdmin.register AdminUser do

index do
  column  :email
  column  :current_sign_in_at
  column  :last_sign_in_at
  column  :sign_in_count
  default_actions
end

form do |f|
    f.inputs "Admin Details" do
      f.input :email
    end
    f.buttons
 end
end 
```

模型/admin_user.rb

```
class AdminUser < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, 
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  after_create { |admin| admin.send_reset_password_instructions }
    def password_required?
      new_record? ? false : super
    end

    before_destroy :raise_if_last
     def raise_if_last
      if AdminUser.count < 2
        raise "Can't delete last admin user"
      end
    end

end 
```

配置/环境/development.rb

```
..........
 #Added per active admin install instructions
  config.action_mailer.default_url_options = { :host => 'localhost:3000' } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:35:50.170

如果您没有配置类似 sendmail 的实用程序，则无法直接从 localhost 发送电子邮件。

您可以使用 SMTP 发送电子邮件

检查下面的问题

[从本地主机发送电子邮件](https://stackoverflow.com/questions/1789032/send-email-from-localhost)

或者您可以将电子邮件写入文件

[Rails Mailer：将电子邮件发送到本地文件](https://stackoverflow.com/questions/3763735/rails-mailer-sending-emails-to-a-local-file)

# rspec - Rspec：测试通过白点？

> ID：11980786
> 
> 赞同：0
> 
> 时间：2012-08-16T04:33:53.613
> 
> 标签：rspec

我有一些测试以白点而不是正常的绿色通过。白点代表什么？或者这可能是由于错误？

![在此处输入图像描述](../Images/69b32716c89a86f3cdc9681b75047634.png)

编辑：在进一步检查中，我相信这与一些调用方法的测试有关`$stdin`，比如`$stdin.gets`和`$stdin.stub`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-07-27T22:42:22.073

我的眼镜中间有一串白点，就像你的一样。有几分钟我非常困惑。事实证明，在测试运行时，我不小心按下并按住句点键一秒钟 - 因此是一串白色句点。

# objective-c - 写入文件末尾

> ID：11980787
> 
> 赞同：1
> 
> 时间：2012-08-16T04:33:57.763
> 
> 标签：objective-c, ios, xcode

我已经设法写入一个文本文件，但我希望能够在不覆盖文本文件当前内容的情况下向文本文件添加更多数据。所以换句话说，我想每次都写到文件的末尾，这样它就不会删除当前的内容。以下代码是我到目前为止所做的，但它每次都会覆盖并写入开头，我不知道如何让它写入结尾。基于此代码，文本文件中的当前内容如下所示：

```
June
July
August
September 
```

例如，我希望能够添加以下内容

```
 June
 July
 August
 September
 October 
```

有谁知道怎么做？谢谢！

```
-(void) writeToTextFile{
NSArray *paths = NSSearchPathForDirectoriesInDomains
(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *fileName = [NSString stringWithFormat:@"%@/textfile.txt", 
                      documentsDirectory];
//create content - four lines of text
NSString *content = @"June\nJuly\nAugust\nSeptember";
//save content to the documents directory
[content writeToFile:fileName 
          atomically:NO 
            encoding:NSStringEncodingConversionAllowLossy 
               error:nil];

 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:51:35.293

你需要[NSFileHandle](http://developer.apple.com/library/ios/#DOCUMENTATION/Cocoa/Reference/Foundation/Classes/NSFileHandle_Class/Reference/Reference.html)

```
NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:fileName];
[fileHandle seekToEndOfFile];
[fileHandle writeData:[content dataUsingEncoding:NSUTF8StringEncoding]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:53:32.203

使用此方法在文件末尾写入：

```
-(void) writeToTextFileWithString:(NSString *) content name:(NSString *) file {

  //TODO: Disable logs at release time

  content = [NSString stringWithFormat:@"%@ |||   %@\n",content,[[NSDate date] description]];

  //get the documents directory:
  NSString *documentsDirectory = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents"];
  NSString *fileName = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.txt",file]];

  NSFileHandle *fileHandle = [NSFileHandle fileHandleForWritingAtPath:fileName];
  if (fileHandle){

    [fileHandle seekToEndOfFile];
    [fileHandle writeData:[content dataUsingEncoding:NSUTF8StringEncoding]];
    [fileHandle closeFile];
  }
  else{

    [content writeToFile:fileName
              atomically:NO
                encoding:NSStringEncodingConversionAllowLossy
                   error:nil];
  }
} 
```

# android - 将收件箱和已发送短信与所有短信区分开来

> ID：11980788
> 
> 赞同：1
> 
> 时间：2012-08-16T04:33:59.143
> 
> 标签：android, android-contentprovider

我正在开发一个 ANdroid 应用程序。在我的应用程序中，我必须列出所有对话，并且我做了那部分。每个对话都包含该号码的所有短信。所以我必须从所有短信中区分收件箱和发送短信。我知道以下 api 可以用来查找收件箱和发送。

```
content://sms/inbox
content://sms/sent 
```

但我不想使用这个。我使用 api 列出了所有短信

```
content://sms/ 
```

我使用 columnindex 的类型、地址进行了测试，但它总是为收件箱和发件箱提供相同的结果。我的示例代码是

```
Uri SMS_INBOX = Uri.parse("content://sms");
        c = getContentResolver().query(SMS_INBOX, null, "thread_id" + " = "
                        + "3", null,
                        "date" + " ASC");
        if(c.moveToFirst()){
            count.add(c.getCount());
            for(int j=0;j<c.getCount();j++){
                System.out.println(c.getString(c.getColumnIndexOrThrow("body")).toString());
                System.out.println("new   person=="+c.getColumnIndex("person")+"type=="+c.getColumnIndexOrThrow("type"));
                c.moveToNext();
            }
        }
        c.close(); 
```

请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T04:45:50.200

您可以在此处使用 ContentObserver 来跟踪发送和接收的消息，

覆盖`onChange()`方法`ContentObserver`并获取短信类型并相应地工作。伪代码可以如下。

```
Cursor cursor = mContext.getContentResolver().query(Uri
                             .parse("content://sms"), null, null, null, null);

String type = cursor.getColumnIndex("type");
if(cursor.getString(type).equalsIgnoreCase("1")){
    // sms received
 }
 else if(cursor.getString(type).equalsIgnoreCase("2")){
    //sms sent
 } 
```

注册`ContentObserver`短信，

```
ContentResolver observer = this.getContentResolver();
observer.registerContentObserver(Uri.parse("content://sms"), 
                               true, new MySMSObserver(new Handler(),this)); 
```

`MySMSObserver`您的类将在哪里扩展`ContentObserver`，构造函数具有参数作为处理程序和上下文，

```
public MySMSObserver(Handler handler, Context context) {
        super(handler);
        this.context = context;
} 
```

# nullreferenceexception - VB.NET - 更改文本框的 .Text 属性会引发空引用异常

> ID：11980789
> 
> 赞同：0
> 
> 时间：2012-08-16T04:34:09.327
> 
> 标签：nullreferenceexception, vb.net-2010

这必须是微不足道的。我这样做是为了谋生，但无法弄清楚为什么会出现此异常：

> System.NullReferenceException 未处理 Message=Object 引用未设置为对象的实例。

这是代码：

```
Public Class frmMain

Private Sub frmMain_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
    Dim counties() As String

    counties = {"", "Huntsville, AL", "Madison, AL", "Rural Madison County, AL", "Taft, TN"}
    Me.cbCounties.DataSource = counties

    Me.lblStatus.Text = "[ Please select a county ]"
    Me.lblStatus.Left = Me.ClientSize.Width \ 2 - Me.lblStatus.Width \ 2

End Sub

Private Sub cbCounties_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cbCounties.SelectedIndexChanged
    Select Case cbCounties.SelectedIndex
        Case 1
            txtTaxRate.Text = "8.00%" 'Issue is these, when index is changed.
        Case 2
            txtTaxRate.Text = "8.50%"
        Case 3
            txtTaxRate.Text = "5.50"
        Case 4
            txtTaxRate.Text = "9.50%"
        Case Else
            txtTaxRate.Text = Nothing
    End Select

    Me.lblStatus.Text = "[ Please enter net amount ]"
    Me.lblStatus.Left = Me.ClientSize.Width \ 2 - Me.lblStatus.Width \ 2

End Sub 
```

结束类

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:41:04.903

改了几次之后就这样了？

设置`txtTaxRate = Nothing`并稍后尝试设置`txtTaxRate.Text`为其他内容会导致一些问题。

您将文本框对象设置为空，然后尝试引用其属性之一。

尝试改变

`txtTaxRate = Nothing`

至

```
txtTaxRate.Text = "" 
```

# c++ - 如何使用 OpenGL 加载 8 位 bmp？

> ID：11980790
> 
> 赞同：0
> 
> 时间：2012-08-16T04:34:18.207
> 
> 标签：c++, opengl, bmp, image-preloader

这是我的情况：我需要预加载 2000 张图像并按顺序显示它们以成为 60 fps 的动画。目前，我正在使用 OpenGL 加载 bmp 文件，但由于内存限制，我最多只能预加载 500 多个图像。我怎么解决这个问题？到目前为止，我可以提出两个方向的解决方案：首先，也许我可以加载 8 位 bmp 图像以节省内存。但我很难使用*glDrawPixels*。其次，如果可能的话，我可以直接加载 jpeg 吗？感谢您的任何建议！

不使用视频的原因是我需要通过跳过一个或多个图像来更改动画速度，如您在代码中看到的（imgCount+=stp; // stp 表示要转义多少图像。它可以使视频更快）。在我的动画中，帧率很重要，低于 50 的 FPS 会显示闪烁。

这是代码：

```
void Frame::LoadBMP(void){

 FILE *in;

 in=fopen(file,"rb");//open file 
 if(in==NULL){

     exit(0);
 }
 fread(&(this->bmfh),sizeof(BITMAPFILEHEADER),1,in);//read bmp file header
 fread(&(this->bmih),sizeof(BITMAPINFOHEADER),1,in);//read bmp infomation header

 colours=new RGBQUAD[bmih.biBitCount];
 fread(colours,sizeof(RGBQUAD),bmih.biBitCount,in);//read bmp colour table

 size=bmfh.bfSize-bmfh.bfOffBits;
 tempPixelData=new GLubyte[size];

 if(tempPixelData==NULL) {
     fclose(in);
 }
 fread(tempPixelData,sizeof(GLubyte),size,in);//read bmp image data
 fclose(in);
} 
```

我将显示图像序列，显示代码：

```
void display(void){

static clock_t start=clock();
static clock_t end=clock();

CurrtempPixelData=msFrame[offset]->tempPixelData;

glEnable(GL_ALPHA_TEST);
glEnable(GL_BLEND);

glDrawPixels(frWidth, frHeight, GL_RGBA, GL_UNSIGNED_BYTE, msFrame[offset]->tempPixelData);

for(int i=0;i<m;i++){
    clock_t c=clock();
}

glutSwapBuffers();
imgCount+=stp; // stp means how many images to escape. it can make video faster.
offset=imgCount%numFrame;
glutPostRedisplay();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:34:23.083

也许您根本不需要 2000 张图像并以 60fps 的速度显示它们？稳定的 25fps 足以应付任何电影。

我鼓励您重新考虑最初的问题并提出更合适的解决方案（视频、动画、矢量，也许还有其他东西）

*至于原来的问题：*

如果您只需要一次图像 - 在需要时将它们存储在内存中，并在显示后立即丢弃它们。

使用 DXT 打包图像。随着质量的轻微下降，您可以获得恒定的 x4/x8 压缩比。

如今，OpenGL 不太擅长使用调色板纹理（许多供应商的实现很差）。但是您可以使用着色器来实现它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T05:38:34.110

# c# - 试图在 C# 代码中使两个 SQL INSERT 语句原子化

> ID：11980793
> 
> 赞同：1
> 
> 时间：2012-08-16T04:35:11.600
> 
> 标签：c#, sql, transactions, ssis, atomic

下面是我在 SSIS 脚本任务中使用的代码。我正在尝试使两个插入都具有原子性，因为它们与类似的客户打交道。

第一个`.executeNonQuery()`工作正常，按应有的方式锁定 SQL 表。

第二个`.executNonQuery()`抛出一个错误：

> *当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求该命令具有事务。该命令的 Transaction 属性尚未初始化。*

代码：

```
 ConnectionManager cm; 
    SqlTransaction sqlTrans;
    SqlConnection sqlConn;
    SqlCommand sqlComm;                                  
    cm = Dts.Connections["connectionManager"];

    try
    {
         //Set 'global' variables                                        
         SqlParameter agentID = new SqlParameter("@agentID", 1000018); //retrievedMessage.Substring(2, 10));//Primary key
         SqlParameter lastChangeOperator = new SqlParameter("@lastChangeOperator", "LVO");
         SqlParameter lastChangeDate = new SqlParameter("@lastChangeDate", DateTime.Now);
         SqlParameter controlId = new SqlParameter("@controlID", 1); //Hard-coded value for testing - CHANGE LATER

         //Set variables for Agent table
         SqlParameter entityType = new SqlParameter("@entityType", "P");//retrievedMessage.Substring(162, 1));
         SqlParameter fName = new SqlParameter("@fName", "test");//retrievedMessage.Substring(12, 25));
         SqlParameter lName = new SqlParameter("@lName", "test");//retrievedMessage.Substring(37, 35));
         SqlParameter suffix = new SqlParameter("@suffix", "test");//retrievedMessage.Substring(72, 10));
         SqlParameter corporateName = new SqlParameter("@corporateName", "Initech");//retrievedMessage.Substring(82, 80));

         //Insert record into Agent table
         sqlConn = (SqlConnection)cm.AcquireConnection(Dts.Transaction);
         sqlComm = new SqlCommand
         (
           "SET IDENTITY_INSERT Agent ON " +
           "INSERT INTO Agent (UniqueAgentId, EntityType, FirstName, LastName, NameSuffix, CorporateName, LastChangeOperator, LastChangeDate, ControlId) " +
           "VALUES (@agentID, @entityType, @fName, @lName, @suffix, @corporateName, @lastChangeOperator, @lastChangeDate, @controlID)" +
           "SET IDENTITY_INSERT Agent OFF",
            sqlConn//, sqlTrans
         );

         sqlTrans = sqlConn.BeginTransaction("SqlAgentTableUpdates");
         sqlComm.Parameters.Add(agentID);
         sqlComm.Parameters.Add(lastChangeOperator);
         sqlComm.Parameters.Add(lastChangeDate);
         sqlComm.Parameters.Add(controlId);
         sqlComm.Parameters.Add(entityType);
         sqlComm.Parameters.Add(fName);
         sqlComm.Parameters.Add(lName);
         sqlComm.Parameters.Add(suffix);
         sqlComm.Parameters.Add(corporateName);
         sqlComm.Transaction = sqlTrans;
         sqlComm.ExecuteNonQuery();

         //Set variables for AgentIdentification table
         SqlParameter taxIdType = new SqlParameter("taxIdType", "S");//Hard-coded value for testing - CHANGE LATER
         SqlParameter agentTaxId = new SqlParameter("@agentTaxId", "999999999");//Hard-coded value for testing - CHANGE LATER

         //Insert record into AgentIdentification table
         sqlConn = (SqlConnection)cm.AcquireConnection(Dts.Transaction);
         sqlComm = new SqlCommand
         (
           "INSERT INTO AgentIdentification (UniqueAgentId, TaxIdType, AgentTaxId, LastChangeOperator, LastChangeDate, ControlId) " +
           "VALUES (@agentID, @taxIdType, @agentTaxId, @lastChangeOperator, @lastChangeDate, @controlId)",
            sqlConn//, sqlTrans
         );

         sqlComm.Parameters.Add(taxIdType);
         sqlComm.Parameters.Add(agentTaxId);
         sqlComm.Transaction = sqlTrans;
         sqlComm.ExecuteNonQuery();
    }
    catch (Exception)
    {
       sqlTrans.Rollback();
       cm.ReleaseConnection(sqlConn);
    }
    finally
    {
       sqlTrans.Commit();
       cm.ReleaseConnection(sqlConn);
    } 
```

**编辑**

通过消除第二个连接，我能够使这个事务工作。但是，两个查询都使用几个相同的变量（SqlParameters）。我被迫复制这些以使其正常运行。有没有办法让他们共享变量，这样我就不必浪费空间重新创建它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:43:46.310

一个事务不能跨越多个连接......`cm.AcquireConnection`每次都返回一个新连接吗？如果是这样，请尝试对两个命令使用相同的连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:43:53.250

使用事务范围

```
using(TransactionScope ts = new TransactionScope())
{

        using(SqlConnection conn = new SqlConnection(myconnstring)
        {
            conn.Open();
    //call first executenonquery
    //call second executenonquery
            ts.Complete();
            conn.Close();
        }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:49:59.757

我认为问题可能出在连接上，或者当您将命令设置为第二次插入的新命令时，您可以使用具有相同连接的两个不同命令或重用一个命令，只需更改 CommandText 属性。

希望这会有所帮助...[使用 SqlTransaction](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqltransaction.aspx)

# shell - vimdiff 与交互式外壳

> ID：11980796
> 
> 赞同：2
> 
> 时间：2012-08-16T04:35:32.873
> 
> 标签：shell, vim

我`shellcmdflag=-ic`在我的 .vimrc 中有使 shell 交互的（这样做是为了读取别名）

使用这个交互式选项集，shell 命令（前面带有 ! 运行）将总是让 vim 像`Ctrl-z`被按下一样进入后台，我必须`fg`带回 vim。

我很高兴不得不`fg`让 vim 回到前面，但是这个交互式 shell 也坏了`vimdiff`。

`vimdiff`无论我是通过还是进入 diff 模式`:difft`，我都必须`fg`两次才能回到 vim，有时甚至会导致整个 konsole 崩溃。

下面是我`:version`来自 vim

```
VIM - Vi IMproved 7.3 (2010 Aug 15, compiled May  4 2012 04:21:49)
Included patches: 1-429
Modified by pkg-vim-maintainers@lists.alioth.debian.org
Compiled by buildd@
Huge version with GTK2 GUI.  Features included (+) or not (-):
+arabic +autocmd +balloon_eval +browse ++builtin_terms +byte_offset +cindent +clientserver +clipboard +cmdline_compl +cmdline_hist +cmdline_info +comments +conceal +cryptv +cscope +cursorbind +cursorshape
+dialog_con_gui +diff +digraphs +dnd -ebcdic +emacs_tags +eval +ex_extra +extra_search +farsi +file_in_path +find_in_path +float +folding -footer +fork() +gettext -hangul_input +iconv +insert_expand +jumplist +keymap
+langmap +libcall +linebreak +lispindent +listcmds +localmap +lua +menu +mksession +modify_fname +mouse +mouseshape +mouse_dec +mouse_gpm -mouse_jsbterm +mouse_netterm -mouse_sysmouse +mouse_xterm +mouse_urxvt
+multi_byte +multi_lang -mzscheme +netbeans_intg +path_extra +perl +persistent_undo +postscript +printer +profile +python -python3 +quickfix +reltime +rightleft +ruby +scrollbind +signs +smartindent -sniff
+startuptime +statusline -sun_workshop +syntax +tag_binary +tag_old_static -tag_any_white +tcl +terminfo +termresponse +textobjects +title +toolbar +user_commands +vertsplit +virtualedit +visual +visualextra +viminfo
+vreplace +wildignore +wildmenu +windows +writebackup +X11 -xfontset +xim +xsmp_interact +xterm_clipboard -xterm_save
system vimrc file: "$VIM/vimrc"
 user vimrc file: "$HOME/.vimrc"
  user exrc file: "$HOME/.exrc"
system gvimrc file: "$VIM/gvimrc"
 user gvimrc file: "$HOME/.gvimrc"
  system menu file: "$VIMRUNTIME/menu.vim"
  fall-back for $VIM: "/usr/share/vim"
Compilation: gcc -c -I. -Iproto -DHAVE_CONFIG_H -DFEAT_GUI_GTK  -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12     -g -O2 -fstack-protect or --param=ssp-buffer-size=4 -Wformat -Wformat-security -Werror=format-security -U_FORTIFY_SOURCE -D_FORTIFY_SOURCE=1     -I/usr/include/tcl8.5  -D_REENTRANT=1  -D_THREAD_SAFE=1  -D_LARGEFILE64_SOURCE=1
Linking: gcc   -L. -Wl,-Bsymbolic-functions -Wl,-z,relro -rdynamic -Wl,-export-dynamic  -Wl,-E  -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,--as-needed -o vim   -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lglib-2.0   -lSM -lICE -lXpm -lXt -lX11 -lXdmcp -lSM -lICE -lm -ltinfo -lnsl  -lselinux  -lacl -lattr -lgpm -ldl  -L/usr/
lib -llua5.1  -Wl,-E  -fstack-protector -L/usr/local/lib  -L/usr/lib/perl/5.14/CORE -lperl -ldl -lm -lpthread -lcrypt -L/usr/lib/python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm -Xlinker -export-dynamic -Wl,-O1 -
Wl,-Bsymbolic-functions  -L/usr/lib -ltcl8.5 -ldl -lpthread -lieee -lm -lruby1.8 -lpthread -lrt -ldl -lcrypt -lm  -L/usr/lib 
```

有人有同样的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:45:12.260

也许不是将 Vim 子 shell 设置为交互模式来获取别名，而是检查以下`$VIM`环境变量`.bashrc`：

```
if [[ $- = *i* || ! -z "$VIM" ]]; then
  # alias ll=...
fi 
```

您需要[明确告诉 bash](http://www.gnu.org/software/bash/manual/html_node/Bash-Startup-Files.html)获取您的资源，因为在非登录、非交互模式 ( )`.bashrc`下它不会获取任何内容。`-c`此外，[别名扩展需要启用](http://xpt.sourceforge.net/techdocs/nix/shell/gsh05-ShBash/ar01s13.html). 在您的`.vimrc`添加中：

```
let $BASH_ENV = '~/.bashrc'
set shellcmdflag=-O\ expand_aliases\ -c 
```

# c# - 使用 PrintDialog 使用 BufferedGraphics 打印

> ID：11980798
> 
> 赞同：0
> 
> 时间：2012-08-16T04:35:44.163
> 
> 标签：c#, winforms

我有一个名为 backbufferGraphics 的 BufferedGraphics，我想使用 PrintDialog 打印出缓冲中的内容，这是我的代码，但它不起作用：

```
private print()
{
        printDocument1.PrintPage += new System.Drawing.Printing.PrintPageEventHandler(printDocument1_PrintPage);
        printDialog1.Document = printDocument1;
        printDialog1.AllowSelection = true;
        printDialog1.AllowSomePages = true;
        printDialog1.ShowDialog();
}
void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
{
    DrawToPrint(e.Graphics);
}
private void DrawToPrint(Graphics _Gd)
{
    backbufferGraphics.Render(_Gd);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:50:33.120

您必须首先在图像中设置缓冲区图形，然后打印图像：

```
Bitmap bmp = new Bitmap();

int X = e.X - bmp.Width/2;
int Y = e.Y - bmp.Height/2;
// créer et initialiser le BufferedGraphics
BufferedGraphics bg =
BufferedGraphicsManager.Current.Allocate(this.CreateGraphics(),
ClientRectangle);
Graphics g = bg.Graphics;

g.Clear(SystemColors.Control);
g.DrawImage(bmp, new Point(X, Y));

bg.Render();
g.Dispose(); 
bg.Dispose();
//save bmp as file 
```

# android - 投射按钮、TextViews、editText 等

> ID：11980800
> 
> 赞同：0
> 
> 时间：2012-08-16T04:36:01.323
> 
> 标签：android, view

例如，

```
Button b = (Button) findViewById (R.id...) 
TextView t = (TextView) findViewById (R.id..) 
```

我们为什么要做这个？我们什么时候必须这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:41:31.507

每当我们将某个类的对象转换为它的子类时，我们都需要进行显式转换。

findViewById 返回 View 类的对象，并且要从该对象中获取 Button、EditText 等对象，我们需要进行显式转换。

当我们需要访问定义在子类中的方法和字段时，我们需要进行显式转换，例如`setText()`.

当我们只需要访问 View 类的方法时，我们不需要显式转换 View，例如：

`setOnClickListener()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:42:37.810

当您想使用 xml 中定义的组件时使用它。

当您在 xml 中定义 textview 或任何组件时，会在 r.java 中为其定义一个整数哈希码。

因此，当您想将其用作文本视图时，您必须将其转换为 textview。

希望有帮助！！

# facebook - 如何在不是您朋友 Facebook 的人的墙上发帖？

> ID：11980803
> 
> 赞同：0
> 
> 时间：2012-08-16T04:36:21.857
> 
> 标签：facebook, facebook-graph-api, facebook-apps

我的目标是在通过按钮发生事件后，从我在 facebook 中的应用程序（用 php 制作）中的几个人（无论是否是我的朋友）的墙上张贴。我得到了“Facebook 用户 ID”（FBUID），我听说如果用户允许我“publish_stream”，我可以通过图形 api 发布。我尝试使用“feed”来处理图形 api，如下所示：

```
$ fbuid = array (0 => 'first_fbuid', 1 => 'second_fbuid', ......) / / These are ID's that are and are not my friends.

foreach ($ fbuid as fb) {
$ facebook-> api ("/ $ fb / feed ',' post ', array (
         'message' => some_message,
         'name' => 'My application name',
         'description' => 'description goes here',
         'picture' => $ imageurl));
} 
```

但是当我尝试向不是我朋友的人发帖时，我会出错。只有我朋友的人在墙上发帖。有没有办法通过 POST 给那些人做其他事情？或者不能通过facebook的限制？还有其他方法吗？

注意：对于网站上的评论，它说我自己的应用程序没有问题可以发布在获取 access_token 的人的墙上。你能做到吗？

* * *

更新：如果不可能向任何人发帖，那么..我可以向任何人发送请求吗？我认为这是可能的，因为像 FarmVille 这样的游戏就是这样做的。请求可以自动吗？没有对话？或者是否可以向任何用户发送通知？.. 在 api 中，我看到一个名为 send.Notification 的函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:25:03.527

这样想吧。API 反映了普通 Facebook 用户可以在网站条款范围内合理地做的事情，并尊重对方的隐私意愿。如果你不能在他们的墙上发帖而不是他们*作为人类*的朋友，那么 Facebook 为什么要允许某人*通过 API*来做到这一点？

我想说这在 API 的使用规则内是不可能做到的。

^(更不用说 Facebook 的所有隐私问题。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T20:16:54.313

例如，您是在谈论像此应用程序那样在用户墙上发布信息吗？[http://applionaire.me/supporters/](http://applionaire.me/supporters/)

如果是这种情况，那么您实际上并不需要访问令牌来执行此操作。如果您想在用户墙上发帖，无论他们是否登录到 Facebook，您都需要一个访问令牌。

# c++ - 包含在多个源文件中的“const”的头文件

> ID：11980806
> 
> 赞同：3
> 
> 时间：2012-08-16T04:37:38.857
> 
> 标签：c++, constants

为什么包含 a 的定义并被多个源文件包含的头文件**不**给出编译错误？`const``multiple definition`

**const_in_header_file.h**

```
const int num = 5;
//int x; //Error. Multiple defintion if included from multiple source files. 
```

**const_in_header_file_func.cpp**

```
#include <iostream>
#include "const_in_header_file.h"

using namespace std;

void func(void)
{
   cout << "num in func() = " << num << endl;
} 
```

**const_in_header_file_main.cpp**

```
#include <iostream>
#include "const_in_header_file.h"

using namespace std;
extern void func(void);

int main()
{
   cout << "num in main() = " << num << endl;
   func();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T04:59:58.133

在 C++ 中，全局 const 是内部链接。将头文件与 cpp 文件合并后（头文件将“插入”到 #include 所在的 cpp 文件中），每个编译单元将被编译为目标文件，然后链接在一起。那些是内部链接的函数和变量不会被链接器看到，这意味着在这个阶段你的 const global 不会被看到。即使您在不同的目标文件中有两个或多个 const，它们也只是隐藏的。只有那些具有外部链接函数和变量的链接器才会尝试将声明与定义“组装”起来。例如：如果您有 `extern int a;`一个编译单元（插入 .h 的 cpp）；链接器将搜索它的定义：（ `int a;`没有外部关键字）。如果找到两个，就会出现重新定义错误。

对于常量，它们只是对链接器隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:40:47.843

因为如果它真的是一个*定义*而不是一个*声明*，那么编译器将在它一次又一次遇到定义时创建一个具有相同名称的（全局）变量 - 然后链接器不知道如何处理多个符号在生成的目标代码文件中具有相同的名称。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T04:41:00.867

可能是因为您编写了头文件……但未能包含“[头文件保护”](http://en.wikipedia.org/wiki/Include_guard)。

缺少“标头保护”会导致编译错误。另一种可能是您没有使用“ [extern](http://www.learncpp.com/cpp-tutorial/42-global-variables/) ”。这会导致链接错误。

例如：

```
#ifndef MY_HEADER_H
#define MY_HEADER_H

extern int myglobal;

#endif 
```

请看上面的两个链接。如果添加防护和/或使用“extern”不能解决问题，请发布失败的代码片段。

# python - 你如何在 tkinter 画布上创建一个按钮？

> ID：11980812
> 
> 赞同：13
> 
> 时间：2012-08-16T04:39:09.157
> 
> 标签：python, user-interface, button, tkinter

我创建了一个框架，然后创建了一个画布。
我接下来要做的是在画布上添加一个按钮。
但是，当我打包按钮时，我看不到画布！

这是我尝试过的：

```
from Tkinter import Tk, Canvas, Frame, Button
from Tkinter import BOTH, W, NW, SUNKEN, TOP, X, FLAT, LEFT

class Example(Frame):
    def __init__(self, parent):
        Frame.__init__(self, parent)
        self.parent = parent
        self.initUI()

    def initUI(self):
        self.parent.title("Layout Test")
        self.config(bg = '#F0F0F0')
        self.pack(fill = BOTH, expand = 1)
                #create canvas
        canvas1 = Canvas(self, relief = FLAT, background = "#D2D2D2",
                                            width = 180, height = 500)
        canvas1.pack(side = TOP, anchor = NW, padx = 10, pady = 10)
        #add quit button
        button1 = Button(canvas1, text = "Quit", command = self.quit,
                                                            anchor = W)
        button1.configure(width = 10, activebackground = "#33B5E5",
                                                        relief = FLAT)
        button1.pack(side = TOP)

def main():
    root = Tk()
    root.geometry('800x600+10+50')
    app = Example(root)
    app.mainloop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-16T05:34:34.643

Tkinter`pack`管理器尝试将父窗口小部件调整为正确的大小以包含其子窗口小部件，默认情况下不会更大。所以画布在那里 - 但它与按钮的大小完全相同，因此是不可见的。

如果要将小部件放置在画布上*而不*导致画布动态调整大小，则需要以下`Canvas.create_window()`功能：

```
# ... snip ...
button1 = Button(self, text = "Quit", command = self.quit, anchor = W)
button1.configure(width = 10, activebackground = "#33B5E5", relief = FLAT)
button1_window = canvas1.create_window(10, 10, anchor=NW, window=button1) 
```

这将创建您的按钮，其左上角`(10, 10)`相对于画布，而无需调整画布本身的大小。

请注意，您可以将`window`参数替换为对任何其他 Tkinter 小部件的引用。不过需要注意的是：命名的小部件必须是包含画布的顶级窗口的子级，或者是位于同一顶级窗口中的某个小部件的子级。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-22T22:37:27.107

您可以使用 button1.place(x=0,y=0) 几何管理器而不是 pack(side =TOP) pack 调整主小部件的大小以使其足够大以容纳子小部件

[http://effbot.org/tkinterbook/pack.htm#Tkinter.Pack.pack_propagate-method](http://effbot.org/tkinterbook/pack.htm#Tkinter.Pack.pack_propagate-method)

[http://effbot.org/tkinterbook/place.htm](http://effbot.org/tkinterbook/place.htm)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-09-16T11:09:08.100

我有同样的问题。我知道没有官方的方式，但这里有一个解决方法：

```
from Tkinter import *
root = Tk()
def clicked(event):
    print("pressed")
canvas1 = Canvas(root, relief = FLAT, background = "#D2D2D2")
canvas1.pack()
buttonBG = canvas1.create_rectangle(0, 0, 100, 30, fill="grey40", outline="grey60")
buttonTXT = canvas1.create_text(50, 15, text="click")
canvas1.tag_bind(buttonBG, "<Button-1>", clicked) ## when the square is clicked runs function "clicked".
canvas1.tag_bind(buttonTXT, "<Button-1>", clicked) ## same, but for the text.
root.mainloop() 
```

# vba - Excel宏自动过滤器问题与变量

> ID：11980819
> 
> 赞同：0
> 
> 时间：2012-08-16T04:40:27.157
> 
> 标签：vba, excel

我有一个数据表，第一行是过滤器，我有一个循环，它改变循环内需要使用的过滤器是变量 filterColumn，每次循环运行时都被分配一个新值。

当我尝试使用 filterColumn 来确定将“打开”哪个过滤器时出现错误

> 范围类的自动过滤方法失败

`ActiveSheet.Range("$U$83:$CV$1217").AutoFilter Field:=filterColumn, Criteria1:="<>"`

为了使用变量来确定过滤器所在的字段，正确的语法是什么？

**问题已解决**我找到了解决方案。我在整个工作表方面引用了过滤器列的位置，而实际上我应该引用它在过滤器组中的编号。例如，我想要更改的过滤器位于第 84 列的“CF”中，但我想要更改的过滤器是组中的第 64 列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:56:14.867

```
Dim filterColumn As Integer
filterColumn = 2
ActiveSheet.Range("$U$83:$CV$1217").AutoFilter Field:=filterColumn, _
    Criteria1:="<>" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:26:50.933

**编辑**：我尝试了@HeadofCatering 的解决方案，但最初它失败了。但是，我在引用的列中填写了值并且它起作用了（我的解决方案在相反的条件下也失败了 - 使列标题为空白并且它失败了）。

但是，这与我（也许您已经）看到的内容并不完全吻合——您绝对可以将过滤器添加到带有空白标题的列中。然而，在我看到的失败中有一件事是一致的 -`filterColumn`引用的列在`Application.UsedRange`. 您可能想尝试验证您所引用的列实际上是否在其中`Application.UsedRange`（简单的方法：`Application.UsedRange.Select`在即时窗口中运行并查看您的列是否被选中）。由于您引用了相当数量的列，因此可能没有超过某个点（包括列标题）的值，并且当您指定要过滤的列时，您实际上是在指定`UsedRange`.

一个有趣的（这对我来说也是新的）测试的事情是拿一张白纸，在单元格中填写值`A1`，`B1`选择列`A:G`并手动添加自动过滤器 - 这只会将过滤器添加到 A 和 B 列（相关情况可以是如果您尝试将过滤器添加到完全空白的工作表中，则会发现）。

抱歉唠叨-这甚至不是您的问题:)

* * *

**旧解决方案（在使用上述条件时不起作用）**

我可能会矫枉过正，但也尝试设置工作表值（注意我在这里使用了示例范围）：

```
Sub SOTest()

Dim ws As Worksheet
Dim filterColumn As Integer

' Set the sheet object and declare your variable
Set ws = ActiveSheet
filterColumn = 2

' Now try the filter
ws.Range("$A$1:$E$10").AutoFilter Field:=filterColumn, Criteria1:="<>"

End Sub 
```

# asp.net - 杀死系统进程

> ID：11980826
> 
> 赞同：0
> 
> 时间：2012-08-16T04:41:05.050
> 
> 标签：asp.net, apache, networking

当我尝试运行 Apache 时，它​​没有运行。它尝试访问端口 80，但端口 80 正在被具有 PID 4 的系统进程监听。

如何停止“系统”进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:16:06.920

Windows 提供了一个出色的工具，称为 Resource-Monitor (resmon.exe)。在网络选项卡上，它可以让您详细了解哪些程序正在侦听计算机上的哪些端口。只需打开该工具即可找出当前正在侦听端口 80 的程序（无论是其 IIS 还是其他）。然后，您所要做的就是结束该过程并将其从您的启动中删除，以防它坐在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T06:35:04.587

Skype 也使用端口 80，因此您可以关闭 Skype 并重新加载您的 apache 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:59:27.847

IIS 默认使用端口 80。如果您在您的机器上运行 IIS，那么您可以按照[此处](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/95826e7a-bac4-4e1f-bcb6-c52d49c9d7f4.mspx?mfr=true)的说明停止它。

# c - 通过传递指针的地址来初始化本地指针

> ID：11980834
> 
> 赞同：1
> 
> 时间：2012-08-16T04:41:58.123
> 
> 标签：c, pointers, coding-style

我在代码的几乎每个部分都看到了以下初始化本地指针的方法。想了解这样做的原因和复杂性。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
void initialize_p(char **p)
{
        char *p_local = NULL;
        p_local=malloc(6);
        strcpy(p_local,"sandy");
        *p = p_local;
}
int main(void)
{
        char *p = NULL;
        initialize_p(&p);
        printf("Name : %s\n",p);
        return 0;
} 
```

就是这样，我在这里用简单的字符串显示。在我的实际代码中，它是使用结构完成的。

我有点理解上述逻辑，但我也不明白。请明确上述实现方式所涉及的概念。另外，让我知道是否有其他更好的方法可以做到这一点。

请赐教.. :)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T04:48:30.323

我可能会返回新分配的字符串，而不是将指针作为参数传递给指针：

```
char *initialize(void) {
    char *init = "sandy"; 
    char *ret = malloc(sizeof(init)+1);
    if (ret != NULL)
        strcpy(ret, init);
    return ret;
}

int main() {
    char *p = initialize();
    printf("Name: %s\n", p);
    free(p);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:53:46.160

这是一个外参数。该函数为您生成结果，并将其保存到您传递的参数中。当结果的大小可能不同时，或者如果参数的类型是不透明的，这通常使用。

*就个人而言，我认为返回结果更加清晰，并且在需要动态分配时*不易出错（如 JerryCoffin 的答案 +1 所示）。

当不需要动态分配时，如果它不是非常小，则通过引用（作为非常量参数）传递它：

```
struct t_struct { int a[100]; };

void InitStruct(struct t_struct* pStruct) {
  pStruct->a[0] = 11;
  ...
}

struct t_struct s;
void InitStruct(&s); 
```

如果它很小，您可以考虑按值返回。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:53:59.797

在 initialize_p 中分配了一块内存，并将一些字符串复制到内存中。为了让初始化程序的调用者获得这个新内存块的地址，指针 p 的地址被传递给 initialize_p：

```
 char **p

         +---+---+---+---+---+----+
   *p -> | s | a | n | d | y | \0 |
         +---+---+---+---+---+----+ 
```

如果只有 *p 会被传递，那么在函数内部设置指针将相当于：

```
void foo(int a)
{
  a=3;
  ...
} 
```

更好的方法是使用 strdup ，它与您在函数中所做的事情相同

```
char* initialize_p()
{
   return strdup("sandy");
} 
```

还要确保释放返回的字符串以避免内存泄漏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T04:57:12.717

我建议你创建分配和释放函数对

```
char *createP()
{
    char *p = NULL;
    p=malloc(6);
    strcpy(p,"sandy");
    return p;
}
void freeP(char *p)
{
    if (p) free(p);
}
int main(void)
{
    char *p = createP();
    printf("Name : %s\n",p);
    freeP(p);
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-16T04:58:27.430

清除概念？好吧，在这样一个简单的情况下，我看不出使用 byref 输出参数进行操作的意义——对我来说，如果像这样工作，则类似面向对象的结构构造函数更容易理解：

```
struct foo *bar = myobj_new(); // uses malloc and returns a pointer
// do something with bar
myobj_destroy(bar); // uses free 
```

有些人同意这种设计很好，因为函数的返回值可以用作错误/成功代码（你见过 SQLite3 吗？），但我不同意。我认为函数的主要、最重要的结果应该通过返回值，而不是一些辅助的东西。（我倾向于编写通过返回 NULL 并设置 byref-passed 错误代码来指示失败的库）。

我能想到的唯一有效场景是传递这样的参数更合乎逻辑或更对称。例如，想象一个非常奇怪的排序函数，它类似于 C 标准库函数`qsort()`，但需要它的比较函数本身来在需要时交换两个元素。比较函数显然需要通过 byref 访问它的两个参数以便交换它们，但将最初遇到的顺序返回给调用方排序函数以优化算法也可能很有用。所以这个比较函数可能是这样的：

```
int compare(void *a, void *b)
{
    int x = *(int *)a;
    int y = *(int *)b;

    if (x > y)
    {
        *(int *)a = y;
        *(int *)b = x;
        return +1;
    } else if (x < x) {
        return -1;
    }

    return 0;
} 
```

嗯，关于我的看法，差不多就这些了……

# c# - 从 .aspx 文件中捕获 php 查询字符串值

> ID：11980835
> 
> 赞同：0
> 
> 时间：2012-08-16T04:42:03.297
> 
> 标签：c#, php

我编写了一个代码来从 SMS 网关获取参数。但是 SMS 网关只接受 php 文件。但是我们的应用程序是 Asp.net，我想通过 php 从网关获取 4 个参数并将其发送到 .aspx 文件。这是场景

![在此处输入图像描述](../Images/e4f00a4dbc61462f463a310c3df749d1.png)

在这里，我编写了 php 文件和 aspx 文件的代码。

PHP文件

```
<?php
//Get Vidamo & Post aspx

$source  = isset($_GET['msisdn']);
$dest = isset($_GET['shortcode']);
$messageIn = isset($_GET['msg']);
$operatorNew = isset($_GET['operator']);

$source = $_POST['msisdn'];
$dest = $_POST['shortcode'];
$messageIn = $_POST['msg'];
$operatorNew = $_POST['operator'];

?> 
```

然后我将通过 .aspx 文件接收它

```
 int source = int.Parse(Request.QueryString["msisdn"].ToString());
        int dest = int.Parse(Request.QueryString["shortcode"].ToString());
        string messageIn = Request.QueryString["msg"];
        string operatorNew = Request.QueryString["operator"]; 
```

我想知道使用 $GET 我可以通过网关接收参数 & 使用 $post 我可以通过查询字符串发送参数还是需要任何其他步骤来做..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:53:59.623

您是否检查过您在 PHP 文件中的变量中获取的值是什么，因为 isset 函数仅返回 true 和 false，第二件事是查询字符串仅适用于 $_GET，如果您通过 Post 发送数据，您将无法使用 Post 获取数据POST 方法，如果您想在 .aspx 文件中检索此数据，您可以使用php 中的**标头**函数传递数据，或者您可以在 PHP 文件中制作一个表单，然后将该表单上传到您的 aspx 文件中。

# checkbox - Struts2复选框值与迭代器

> ID：11980838
> 
> 赞同：1
> 
> 时间：2012-08-16T04:42:58.833
> 
> 标签：checkbox, struts2, iterator

我有以下代码

```
<s:iterator value="assignedProductRoleBean.serviceProfiles" status="serStatus">
  <tr>
    <td width="150px">
      <s:property value="serviceSpecCode" />
    </td>
    <s:hidden name="assignedProductRoleBean.serviceProfiles[{#serStatus.index}].serviceSpecCode" value="{serviceSpecCode}" />
    <td width="150px">
      <s:property value="code" />
    </td>
    <s:hidden name="assignedProductRoleBean.serviceProfiles[%{#serStatus.index}].code" value="%{code}" />
    <td width="50px">
      <s:checkbox name="assignedProductRoleBean.serviceProfiles[{#serStatus.index}].granted" value="granted" cssStyle="width:20px;border:0;background-color:transparent" />
    </td>
    <s:iterator value="assignedProductRoleBean.serviceProfiles[{#serStatus.index}].characteristics" status="serCharStatus">
      test
      <td width="150px">
        <s:property value="key" />
      </td>
      <s:hidden name="assignedProductRoleBean.serviceProfiles[{#serStatus.index}].characteristics[%{#serCharStatus.index}].key" value="%{key}" />
      <td width="150px">
        <s:textfield theme="simple" name="assignedProductRoleBean.serviceProfiles[%{#serStatus.index}].characteristics[%{#serCharStatus.index}].value" value="%{value}" /></td>
    </s:iterator>
  </tr>
</s:iterator> 
```

问题是，我正在查看“已授予”的真实值。但是，当我取消选中/签入视图页面时，它们不会更新到相应的 bean。

第二个迭代器（内部）的另一个问题。我有特征，尽管它们没有显示在 jsp 页面中。但是在提交页面后，他们将进入行动班。

ps 我什至试过 value=%{granted}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T11:17:56.590

我遇到了同样的问题。我有这个工作：

```
<div>           
            <s:iterator value="podTypeContentList" status="stat" var="podTypeContent"> 
                <s:if test = "#podTypeContent.selected == true">
                    a
                </s:if>
                <s:else>
                    b
                </s:else>               
                <s:property value="%{podContent}" />
                <s:property value="%{selected}" />  

                <s:checkbox name="%{id}" value="%{selected}"  fieldValue="%{podContent}"  />
                <br />
            </s:iterator>
            <br class="clear" />
            <s:submit align="center" value="Save" id="submitButton" cssClass="btn btn-primary" />
        </div> 
```

“选定”实际上是 isSelected 布尔 bean 属性。把我扔了几个小时。

# delphi - Firemonkey中的列表视图

> ID：11980845
> 
> 赞同：0
> 
> 时间：2012-08-16T04:44:23.347
> 
> 标签：delphi, listview, delphi-xe2, firemonkey

我想显示一个带有列的项目列表并将它们绑定到我的一些自定义对象。Firemonkey 中没有 ListView 控件，那么推荐的方法是什么？我希望这些列可以轻松调整大小，但不需要可编辑的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T10:45:27.413

我没有使用它，但 TMS FireMonkey Grid 可以做你想做的事[http://www.tmssoftware.com/site/blog.asp?post=230](http://www.tmssoftware.com/site/blog.asp?post=230)

# javascript - Nivo Slider Nivo-control Nav margin

> ID：11980846
> 
> 赞同：0
> 
> 时间：2012-08-16T04:44:24.657
> 
> 标签：javascript, jquery, html, css, nivo-slider

I have a site that has 4 subpages. I want to add nivo slider on each page in separate height. I've added 3 sliders successfully, but on one page I want to show `nivo-controlNav` with margin top 30px, how can I do that?

My code looks like this:

```
.nivo-controlNav {
text-align:center;
padding: 0;
} 
```

It's good for my other 3 pages but I want to add:

```
.nivo-controlNav {
text-align:center;
padding: 0;
margin-top:30px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:50:45.710

You must add some class or id to separate from others. Then you write a style for that particular class or id or use the inline style (Inline is not a good practice) for example

```
.classname
{
margin-top:30px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:51:47.113

If it is on a completely separate page you can easily just add the second set of rules you have above. If they are all governed by one single style sheet you can do this

```
 .differentClassName{
    margin-top: 30px;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:56:02.560

Add this on the page wher u need margin in < head >< / head > section

```
<script type="text/javascript">
    $(document).ready(function () {
    $('.nivo-controlNav').css('margin','30px');

    });
</script> 
```

if that doesnt help try setting z-index, visible properties like above $('.nivo-controlNav').css('z-index','1500'); $('.nivo-controlNav').css('visibility','visible');

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T14:26:44.410

```
.nivo-controlNav {
text-align: center;
padding:10px 0px 0px 0px;
clear:both;
position: relative;
z-index: 10;} 
```

# android - 如何为应用程序实现更改主题？

> ID：11980847
> 
> 赞同：1
> 
> 时间：2012-08-16T04:44:28.430
> 
> 标签：android

现在，我发现有很多可以更改主题的应用程序（更改按钮图像/背景图像等）。用户可以去 Google Play 下载主题，主题会自动应用到应用程序中。但我不明白如何实现，因为背景/按钮图像应该位于项目文件中。请帮助解决这个问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:52:28.813

我认为最简单的方法是在应用程序购买中。主题已经包含在应用程序中，您通过 google play 付费解锁主题并允许应用？

要在运行时设置主题，您可以在活动的 onCreate() 方法期间调用 setTheme()，但必须在 setContentView() 之前调用它。

```
setTheme(android.R.style.Theme_Dark); 
```

# if-statement - 在 if 语句中将 DOS 环境变量设置为另一个环境变量

> ID：11980850
> 
> 赞同：0
> 
> 时间：2012-08-16T04:45:02.310
> 
> 标签：if-statement, set, dos

这看起来很简单，但结果却是如此痛苦。

在 Windows 7 上，我可以将以下内容粘贴到命令提示符中，并将其设置`ProgramFiles(x32)`为`%programfiles%`or `%programfiles(x86)%`：

```
%comspec% /c if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set %ProgramFiles(x32)=%programfiles(x86)%") 
```

但是在 Windows XP 上，使用相同和其他方法，我无法得到相同的结果：

```
E:\>%comspec% /c if exist "%programfiles%" (set "ProgramFiles(x32)=%programfiles%") else (set "ProgramFiles(x32)=%programfiles(x86)%")
E:\Program was unexpected at this time.

E:\>%comspec% /c if exist "%programfiles%" (set ProgramFiles(x32)=%programfiles%) else (set ProgramFiles(x32)=%programfiles(x86)%)
E:\Program was unexpected at this time.

E:\>%comspec% /c if exist "%programfiles%" (set "ProgramFiles(x32)"="%programfiles%") else (set "ProgramFiles(x32)=%programfiles(x86)%")
E:\Program was unexpected at this time.

E:\>%comspec% /c if exist "%programfiles%" (set ProgramFiles(x32)="%programfiles%") else (set ProgramFiles(x32)=%programfiles(x86)%)
"E:\Program Files") was unexpected at this time.

E:\>%comspec% /c if exist "%programfiles%" (set ProgramFiles(x32)=%%programfiles%%) else (set ProgramFiles(x32)=%programfiles(x86)%)
%E:\Program was unexpected at this time. 
```

set ProgramFiles(x32)=%programfiles% 在 Win XP 和 7 上都可以直接从命令行正常工作。

我错过了什么？

作为旁注，我真的希望 Microsoft 将 %ProgramFiles% 设为 32 位程序的目录。我看不出必须进行此检查的逻辑，因为这样，一个 32 位程序将位于同一位置，而不管操作系统的位数如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:50:24.280

除了 .bat 文件语法之外，您几乎可以使用*任何东西进行编程。*恕我直言。

但是“你所缺少的”是 .bat 语法将“程序”和“文件”视为两个单独的词（而不是路径的*一部分*）。

简单的解决方法：

```
 cd c:\
  dir/x pro* 
```

在您的情况下，您可能会有一个“progra~1”（用于“程序文件”）和“progra~2”（用于“程序文件（x86）”。只需相应地修改您的 .bat 文件即可：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:12:30.030

@dbenham 非常深入，非常感谢我对另一个问题的启发，也解决了这个问题 - [DOS 环境设置的不同行为，在 if 语句中，在 DOS 提示符中与 Windows 快捷方式相比](https://stackoverflow.com/questions/11981073/different-behaviour-of-dos-environment-setting-in-if-statement-in-dos-prompt-a/11987337?iemail=1#11987337)

# .net - 打开 Outlook MSG 文件时如何禁用 Outlook 按钮

> ID：11980859
> 
> 赞同：0
> 
> 时间：2012-08-16T04:46:23.070
> 
> 标签：.net

我正在使用系统诊断过程打开 Outlook .MSG 文件，下面是我的代码

```
Process oFileProcess = new System.Diagnostics.Process();
oFileProcess.StartInfo = new System.Diagnostics.ProcessStartInfo(@"D:\OutlookFile.MSG");
oFileProcess.Start(); 
```

执行此代码后，MSG 文件将使用 Outlook 打开，但我的要求是我想禁用 Outlook 的所有按钮，如发送/接收、回复、转发......当使用我的 dotnet 应用程序打开文件时。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:00:15.290

不要使用 System.Diagnostics.Process 对象来启动 Outlook，而是使用“Microsoft Outlook 10.0/11.0 对象库”COM 对象来控制 Outlook。可能很难隐藏您想要的按钮，但理论上这是可能的。

# ios5 - 我该如何解决这个错误：NSInvalidArgumentException'，原因：'-[ViewController viewControllers]：无法识别的选择器

> ID：11980860
> 
> 赞同：1
> 
> 时间：2012-08-16T04:46:39.700
> 
> 标签：ios5, xcode4.2, sigabrt, xcode-storyboard

我想将一些信息推送到 UITableView，所以我必须获取该视图的位置。

这是 AppDelegate 内的代码：

```
player = [[player1Data alloc] init];
player.name = @"Dave Brubeck";
player.game = @"Texas Hold’em Poker";
player.rating = 2;
[playersArray addObject:player];
// to get the player1ViewController
UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
UITabBarController *tabBarController = [[navigationController viewControllers] objectAtIndex:0];
player1ViewController *playersViewController = [[tabBarController viewControllers] objectAtIndex:0];
playersViewController.playersArray = playersArray;
return YES; 
```

错误出现在：

**player1ViewController *playersViewController = [[tabBarController viewControllers] objectAtIndex:0];**

然后xcode显示：**线程1：信号SIGABRT**

控制台显示：

**由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[ViewController viewControllers]：无法识别的选择器发送到实例 0x687a880”**

这是我的故事板布局，我不确定它是否正确。

**Navigation Controller→View Controller（带有按钮）→Tab Bar Controller→Table View（我想在其中显示玩家信息。）**

很抱歉我的英语不是很好，希望你们能理解我在说什么。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:49:11.553

UITabBarController 的初始化部分是问题。将导航控制器堆栈中的 viewconroller 分配给 UITabBarController？

准备一个需要在 UITabBarController 中显示的 VC 数组，并将其加载到 UITabBarController 的 viewcontrollers 属性中

# sql-server - 为一对多关系创建视图

> ID：11980863
> 
> 赞同：-3
> 
> 时间：2012-08-16T04:47:01.237
> 
> 标签：sql-server

我有一张这样的桌子

```
a(Id,Code,Title) 
```

还有一张像这样的桌子

```
b(M,T1,T2,T3) 
```

那是 Fk For Id in a

我想要一张这样的桌子

```
c(b.M,a.Code,b.T1,a.Code,b.T2,a.Code,b.T3,a.Code) 
```

如何为此创建视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:53:32.137

好的，假设在表 b M 中，T1、T2 和 T3 是表 a 的前键（从您对 c(bM,a.Code,b.T1,a.Code,b.T2,a.Code ,b.T3,a.代码))

你可以尝试类似的东西

```
SELECT  b.M,
        a.Code,
        b.T1,
        a1.Code,
        b.T2,
        a2.Code,
        b.T3,
        a3.Code
FROM    b LEFT JOIN
        a a ON  b.M = a.Id LEFT JOIN
        a a1    ON  b.T1 = a1.Id LEFT JOIN
        a a2    ON  b.T2 = a2.Id LEFT JOIN
        a a3    ON  b.T3 = a3.Id 
```

# ruby-on-rails-3 - 真实性令牌在rails 3中没有改变

> ID：11980865
> 
> 赞同：1
> 
> 时间：2012-08-16T04:47:15.620
> 
> 标签：ruby-on-rails-3, authenticity-token

我的应用程序是使用 rails 3 构建的，并且我在 application.html.erb 中添加了 csrf_meta_tag。

```
<%= csrf_meta_tag %> 
```

真实性令牌针对不同的用户而变化，但令牌在整个会话中是相同的，即它不会因每个 put & post 请求而改变。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:24:43.053

真实性令牌在整个会话中保持不变。它不会因每个请求而更改，因为加密形式的真实性副本与您的 cookie 映射，用于匹配真实性令牌是否有效

`session[:csrf_token]=nil`如果您希望它针对每个请求进行更改，只需设置

只是交叉检查一下，我知道这项工作，但很久以前就完成了

也只需检查此[链接](https://stackoverflow.com/questions/7744459/rails-csrf-tokens-do-they-expire)以获取更多信息

# html - 悬停时出现故障并在过渡时访问了选择器

> ID：11980868
> 
> 赞同：0
> 
> 时间：2012-08-16T04:47:27.333
> 
> 标签：html, css, css-transitions

当我为它定义一种颜色时，`:visited`它似乎首先回到父级的颜色，然后再为`:hover`样式应用颜色：

```
body {
    color:black;
}
a {
    color:inherit;
    -webkit-transition:ease 3s;
}
a:visited {
    color:pink;
}
a:hover, a:visited:hover {
    color:yellow;
}​ 
```

[提琴手](http://jsfiddle.net/nuqXP/1/)

有没有针对此的破解/修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T15:32:57.103

这是因为出于隐私原因，[Firefox 不允许在 :visited 上使用某些样式。](https://developer.mozilla.org/en-US/docs/CSS/Privacy_and_the_%3avisited_selector)

# jquery - 在 jQuery 移动应用程序中将参数从一个页面传递到另一个页面

> ID：11980869
> 
> 赞同：1
> 
> 时间：2012-08-16T04:47:30.353
> 
> 标签：jquery, windows-phone-7, jquery-mobile, cordova

我正在使用 PhoneGap 构建一个 jQuery 移动应用程序。我必须通过使用 jQuery mobile 传递一些旧页面的参数来打开一个新页面。为此，我尝试使用本地存储，如下所示：

```
$("li").click(function(){
    console.log("hi");
    var index = $(this).index();
    console.log("index"+ index);

    window.localStorage.setItem("date",userArray_date[index] );
    window.localStorage.setItem("title",userArray_title[index] );

    window.location.href='mypage.html';     
}); 
```

在另一个页面上，我检索到这样的值：

```
var display_date = window.localStorage.getItem("date");
var display_title = window.localStorage.getItem("title");

$("#Date_Leaf").append(display_date);
$("#Title_Leaf").append(display_title); 
```

这在 Android 手机上可以正常工作，但在 Windows 7 手机上不起作用。谁能告诉我我要去哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-08T10:26:06.147

[http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/2.0.0/cordova_storage_storage.md.html#localStorage)

尝试在 onDeviceReady 函数中使用本地存储

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T07:14:51.717

我们使用 PhoneGap deviceready 方法进行本地存储，它工作正常。像：

```
document.addEventListener("deviceready", myMethod, false);
function myMethod(){

$("li").click(function(){

    var index = $(this).index();

    console.log("index"+ index);

    window.localStorage.setItem("date",userArray_date[index] );
    window.localStorage.setItem("title",userArray_title[index] );

window.location.href='mypage.html';
});}

and On mypage.html:

document.addEventListener("deviceready", page2Method, false);

function page2Method(){

  var display_date = window.localStorage.getItem("date");
  var display_title = window.localStorage.getItem("title");

} 
```

# android-ndk - 构建 android-ndk-assets 时出错

> ID：11980870
> 
> 赞同：1
> 
> 时间：2012-08-16T04:47:32.297
> 
> 标签：android-ndk

我想从 C++ 代码加载资源。并尝试重复[这种方式](http://androgeek.info/?p=275)。但是当我尝试构建它时，我得到：

```
E:\Android\Samples\android-ndk-assets\project>e:\Android\android-ndk-r8b\ndk-build
Gdbserver      : [arm-linux-androideabi-4.6] libs/armeabi/gdbserver
Gdbsetup       : libs/armeabi/gdb.setup
"Compile thumb : png <= pngrtran.c
jni/libpng/pngrtran.c: In function 'png_do_expand':
jni/libpng/pngrtran.c:3790:1: internal compiler error: in reload, at reload1.c:1061
Please submit a full bug report,
with preprocessed source if appropriate.
See <http://gcc.gnu.org/bugs.html> for instructions.
make: *** [obj/local/armeabi/objs-debug/png/pngrtran.o] Error 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T19:48:27.650

我也遇到了这个问题。另一种解决方法是将库添加为 ARM 代码而不是 Thumb 代码，方法是将以下行添加到您的 makefile：

```
LOCAL_ARM_MODE := arm 
```

使用 ARM 模式应该没有问题... ARM 指令需要两倍于 Thumb 指令的空间，但也更加复杂，并且能够在一条指令中完成更多任务，因此取决于编译器的聪明程度，生成的代码可能更大或更小以及更有效或更低效率，但应该以相同的结果执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T09:51:05.520

我在 android-ndk-r8b 中遇到了同样的错误。看起来像 GCC 中的错误。您是否已经提交错误报告？

我找到了出错的代码：

```
 if (*(sp - 5) == red_high &&
      *(sp - 4) == red_low &&
      *(sp - 3) == green_high &&  //this line make error
      *(sp - 2) == green_low &&   //this line make error
      *(sp - 1) == blue_high &&
      *(sp    ) == blue_low)
   {
      *dp-- = 0;
      *dp-- = 0;
   } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T00:55:02.373

我在 android-ndk-r8b 中也有类似的错误。调用 ndk-build 并设置 NDK_DEBUG 标志时会发生这种情况：

`ndk-build NDK_DEBUG=1` <--- 错误

尝试将 NDK_BUILD 标志设置为 0。它应该可以编译。当然它不会是可调试的:(

`ndk-build NDK_DEBUG=0` <--- 没有错误

# html - css/html 的简单鼠标悬停问题

> ID：11980871
> 
> 赞同：0
> 
> 时间：2012-08-16T04:48:04.510
> 
> 标签：html, css

我是 html 和 css 的新手，我想知道如何创建一个包含选项的下拉 img/box。这是我正在谈论的一个例子。

![在此处输入图像描述](../Images/c5abc16939284ca92101c0dbfc39b657.png)

在此示例中，当您将鼠标悬停在社区按钮上时，您会看到一个选项列表。无论如何在css中实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:53:08.410

看到这个（仅使用 CSS 和 HTML）

### HTML

```
<div id="navcontainer">
<ul id="navlist">
<li id="active"><a href="#" id="current">Item one</a> 
<ul id="subnavlist">
<li id="subactive"><a href="#" id="subcurrent">Subitem one</a></li>
<li><a href="#">Subitem two</a></li>
<li><a href="#">Subitem three</a></li>
<li><a href="#">Subitem four</a></li>
</ul>

</li>
<li><a href="#">Item two</a></li>
<li><a href="#">Item three</a></li>
<li><a href="#">Item four</a></li>
</ul>
</div>​ 
```

### CSS

```
ul#navlist { font-family: sans-serif; }

ul#navlist a
{
font-weight: bold;
text-decoration: none;
}

ul#navlist, ul#navlist ul, ul#navlist li
{
margin: 0px;
padding: 0px;
list-style-type: none;
}

ul#navlist li { float: left; }

ul#navlist li a
{
color: #ffffff;
background-color: #003366;
padding: 3px;
border: 1px #ffffff outset;
}

ul#navlist li a:hover
{
color: #ffff00;
background-color: #003366;
}

ul#navlist li a:active
{
color: #cccccc;
background-color: #003366;
border: 1px #ffffff inset;
}

ul#subnavlist { display: none; }
ul#subnavlist li { float: none; }

ul#subnavlist li a
{
padding: 0px;
margin: 0px;
}

ul#navlist li:hover ul#subnavlist
{
display: block;
position: absolute;
font-size: 8pt;
padding-top: 5px;
}

ul#navlist li:hover ul#subnavlist li a
{
display: block;
width: 10em;
border: none;
padding: 2px;
}

ul#navlist li:hover ul#subnavlist li a:before { content: " >> "; }​ 
```

[`Working DEMO`](http://jsfiddle.net/c7xmU/)

[参考](http://www.cssnewbie.com/easy-css-dropdown-menus/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:59:18.270

检查这个

[30个Jquery动画下拉菜单](http://www.hongkiat.com/blog/drop-down-menu-30-free-scripts-to-enhance-header-navigation/ "jQuery 菜单")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:00:13.853

试试这个页面... [cssMenuMaker](http://cssmenumaker.com/) 有几种类型的菜单，选择你最喜欢的一种，设置你喜欢的颜色和样式并下载，包括图像和 css... 希望对您有帮助...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-16T04:52:44.040

鼠标事件列表 html5 [http://www.w3schools.com/html5/html5_ref_eventattributes.asp](http://www.w3schools.com/html5/html5_ref_eventattributes.asp)

# php - 大型 XML 文件在 PHP 中解析块数据 Filetering

> ID：11980877
> 
> 赞同：0
> 
> 时间：2012-08-16T04:48:37.567
> 
> 标签：php, xml, regex, xml-parsing

我有一个超过 100 MB 的大型 XML 文件。我正在像这样读取文件

> $fp = fopen('large.xml', 'r');
> 
> 而 ($data = fread($fp, 4096)) {

XML的格式是这样的

```
<PersonalInfo>
    <UserDetail>
       <FirstName>ABC</FirstName>
       <Occupation>Student</Occupation>
       <DateOfBirth>08/14/1999</DateOfBirth>
    </UserDetail>
    <CaseDetail>....</CaseDetail>
    <TransactionDetail>....</TransactionDetail>
</PersonalInfo>      
<PersonalInfo>
    <UserDetail>
       <FirstName>XYZ</FirstName>
       <Occupation>Student</Occupation>
       <DateOfBirth>04/25/1991</DateOfBirth>
     </UserDetail>
     <CaseDetail>....</CaseDetail>
     <TransactionDetail>.....</TransactionDetail>
</PersonalInfo>      
<PersonalInfo>
    <UserDetail>
        <FirstName>DEF</FirstName>
        <Occupation>Teacher</Occupation>
        <DateOfBirth>05/12/1984</DateOfBirth>
    </UserDetail>
    <CaseDetail>....</CaseDetail>
    <TransactionDetail>...</TransactionDetail>
</PersonalInfo> 
```

我只想包含职业标签为“学生”的那些记录，并将这些结果写入 CSV 文件。

我已经尝试将 preg_match 作为 preg_match( "/\(.*?)\</PersonalInfo>/s", $data, $match ); 选择标签，然后查看 $match 但它返回双值（重复）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T07:45:17.520

首先在以下链接的帮助下检查您的 xml 是否有效：

[http://www.xmlformatter.net/](http://www.xmlformatter.net/)

如果您的 xml 有效，请执行以下操作：

```
$dom = new DOMDocument('1.0', 'UTF-8');

$dom->formatOutput = true;
@$dom->load('large.xml');
$tags = $dom->getElementsByTagName('PersonalInfo');

foreach ($tags as $destination) {

    foreach($destination->childNodes as $child) {
        if ($child->textContent == "Student") {
          echo "Write code to create csv file";
        }
    }
} 
```

# java - java同步银行账户转账

> ID：11980891
> 
> 赞同：0
> 
> 时间：2012-08-16T04:50:56.297
> 
> 标签：java, synchronization

我尝试为银行账户转账的经典问题编写同步代码。现在我试图找出解决方案的问题。在我在网上找到的任何解决方案中，转移方法都使用了两个锁，但我没有使用任何一个。

```
 class BankAccount
    {
      double balance;

      public void synchronized deposit(double amount)
      {
          balance+=amount;
       }

      public void synchronized withdraw(double amount)
      {
         balance-=amount;
      }

      public void transferTo(BankAccount b, double amount)
      {
           this.withdraw(amount);
           b.deposit(amount);

       }
   } 
```

请告诉我可能是什么问题`transferTo()`。请原谅忽略了限制检查`balance`。我实际上担心不使 transferTo 原子化是否会导致问题（死锁）。这种情况的一个例子会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:56:47.533

除了使用 double 之外，我没有看到任何特别的问题，尽管您必须记住 transferTo 不是原子的可能会在以后导致问题。但是，您实际上是在使用锁。每个同步方法都隐式使用锁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:56:07.367

您正在使用[内部锁](http://docs.oracle.com/javase/tutorial/essential/concurrency/locksync.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:58:02.510

一旦你把`synchronized`块放在适当的位置，你就在使用锁。在这种情况下，将在正在修改的类对象上获取锁，这就是您的代码可以正常工作的原因。

但是您的`transferTo`方法可能无法正常工作，因为其中的两个操作都是同步的，而不是整个事务。

希望这可以帮助！！！

# scheme - 如何测量 Racket 中一个表达式或整个程序的内存使用量？

> ID：11980899
> 
> 赞同：2
> 
> 时间：2012-08-16T04:51:52.120
> 
> 标签：scheme, racket

我想测量一个表达式为我的程序甚至一个表达式使用了多少内存？

有没有简单的方法可以在 Racket 中做到这一点？文档涉及使用一些保管人，我不确定它是如何工作的.....

演示代码片段赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:56:24.767

因为我不使用球拍作为我的 lisp，所以我不能确定是否有内置函数，但与此同时你可以使用这个： [https ://github.com/samth/gcstats](https://github.com/samth/gcstats)

干杯。

# ubuntu - 如何让自定义 couchdb 作为新贵工作运行？

> ID：11980900
> 
> 赞同：0
> 
> 时间：2012-08-16T04:52:00.860
> 
> 标签：ubuntu, couchdb, upstart

[我使用出色的iriscouch/build-couchdb repo](https://github.com/iriscouch/build-couchdb)构建了一个最新版本的 CouchDB ，现在我想在我的 Ubuntu 12.04 服务器上创建一个新贵的工作。

但是，新贵的工作失败了：

```
kernel: [265024.963594] init: couchdb_a main process (5341) terminated with status 1 
```

新贵的 conf 文件 (/etc/init/couchdb_a.conf)：

```
description     "CouchDB v1.2.0"
console output

start on (local-filesystems and net-device-up IFACE!=lo)
stop on runlevel [!2345]

pre-start script
  logger -t "$0" "pre-start"
  export PATH="/path/to/build-couchdb/build/bin:$PATH"
  logger -t "$0" "DEBUG (pre-start): `set`"
end script

exec /path/to/build-couchdb/build/bin/couchdb 
```

据我所知，自定义 couchdb 只需要将其 PATH 调整为 couchdb 二进制文件的位置（这就是 iriscouch 的 env.sh 所做的）。

但是无论我是否更新 PATH，自定义 couchdb 都不会在这个新贵的工作中启动（它可以在 shell 中完美运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T16:29:03.733

这个新贵配置成功地处理了 CouchDB 的自定义安装：

```
# couchdb v1.2.0
#
# Custom installation of CouchDB

description     "CouchDB v1.2.0, local"
console output

# start after all filesystems & network interfae are available
start on (local-filesystems and net-device-up IFACE!=lo)
stop on runlevel [!2345]

# set working directory
env COUCHDB_WD="/path/to/build-couchdb/build/bin"
export COUCHDB_WD

# required for erlang
env HOME="/home/user"
export HOME

script
  # modify PATH to hit local couchdb's working directory first
  PATH="$COUCHDB_WD:$PATH"
  #export PATH # not necessary inside script block
  #logger -t $0 "HOME='$HOME'"
  #logger -t $0 "PATH='$PATH'"
  # output couchdb logs to custom location
  #exec >>/home/user/couchdb_local.log 2>&1
  exec couchdb
end script 
```

这有帮助，但只是部分：

```
# change working directory: not effective with env variable
chdir /path/to/build-couchdb/build/bin 
```

`chdir`如果只需要从目录运行可执行文件，但不修改`PATH`，也不接受 env 变量，则可以工作。

块中的注释行`script`帮助我确保`HOME`并`PATH`正确更新。该`exec >>`行将所有 couchdb 日志记录输出到自定义文件，这帮助我找到了根本原因：Erlang。

具体来说，[erlexec:HOME 必须设置](http://little418.com/2009/09/erlexec-home-must-be-set.html)错误。 `HOME`显然可以是任何值（不确定它是否必须存在，但我将其设置为我的用户帐户的主目录）。

# kernel - Linux 中的新配置内核崩溃

> ID：11980903
> 
> 赞同：1
> 
> 时间：2012-08-16T04:52:13.370
> 
> 标签：kernel

如果第一个内核在系统启动时崩溃，linux中有任何选项，它会自动选择第二个内核来启动机器吗？

谢谢

哈尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T23:22:18.513

没有这样的选择（据我所知）。它应该是一个内核选项，它应该更改引导加载程序配置，但不同类型的设备上有这么多引导加载程序，这取决于崩溃时间。所以，要实现这样的功能真的很困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T12:17:15.637

不，只有一种方法可以让它在崩溃的情况下重新启动系统（即通过**panic**参数）。

假设一个嵌入式场景，这种行为可以通过存储在闪存中的布尔标志来实现：

*   引导加载程序（例如，U-Boot）在它自己的变量中保留一个设置为 true 的布尔标志（例如，try = true）
*   Linux 文件系统在成功启动后将布尔标志设置回 false
*   Linux 内核使用**panic=0** 变量启动，这会在崩溃的情况下强制重启（即*panic*）
*   U-Boot，当标志设置为真（即先前的内核启动失败）时，启动第二个版本的内核

# symfony - 教义只看到一个连接配置，但我在 config.yml 中声明了 2

> ID：11980907
> 
> 赞同：0
> 
> 时间：2012-08-16T04:52:35.537
> 
> 标签：symfony, doctrine-orm

在我的配置中，我声明了 2 个连接：

```
doctrine:
    dbal:
        default_connection: pay
        connections:
            pay:
                driver:   %database_driver%
                host:     %database_host%
                port:     %database_port%
                dbname:   %database_name%
                user:     %database_user%
                password: %database_password%
                charset:  UTF8
            mein:
                driver:   %database_driver%
                host:     somehost
                port:     3306
                dbname:   dbname
                user:     dbuser
                password: dbpassword
                charset:  UTF8 
```

没有任何参数的 getEntityManager() 可以正常工作，但如果我将使用 'pay' 或 'mein'，原则会显示错误“名称为 %name% 的 EntityManager 不存在。”

修改 Registry.php

```
public function getEntityManager($name = null)
    {

        var_dump($this->entityManagers);die; 
```

返回

```
array(1) { ["default"]=> string(35) "doctrine.orm.default_entity_manager" } 
```

为什么看不到实际配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:25:58.257

您的定义只是 DBAL 连接定义。您还需要定义两个实体管理器。[请看一下](https://stackoverflow.com/questions/11945213/how-to-get-different-dbal-connection-in-symfony2-doctrine2/11947663#11947663)

# android - 音乐播放器何时应该获得和放弃音频焦点？

> ID：11980908
> 
> 赞同：1
> 
> 时间：2012-08-16T04:52:36.343
> 
> 标签：android

我正在编写一个 Android 音乐播放器，并且卡在音频焦点问题上。

似乎音频焦点主要影响媒体按钮接收，但在阅读文档后，我不知道何时获得和放弃焦点。

**我的音乐应用程序将在后台运行，并且每次都**需要检测播放/暂停按钮。也就是说，即使我的应用程序没有运行，用户也应该能够按下耳机的播放按钮并开始播放音乐。

看来我永远不应该放弃音频焦点，那我为什么要实现它呢？

有谁知道应该如何使用音频焦点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T09:09:35.733

> 似乎音频焦点主要影响媒体按钮接收，但在阅读文档后，我不知道何时获得和放弃焦点。

它们都是独立的功能，因此具有独立的侦听器。您可能会失去音频焦点，但您仍然可以选择响应播放暂停硬件键

> 也就是说，即使我的应用程序没有运行，用户也应该能够按下耳机的播放按钮并开始播放音乐。

我假设您上面的意思是您仍在播放音乐但没有显示活动。要继续收听硬件按钮按下，请不要取消注册您的媒体按钮接收器（不要打电话`audioManager.unregisterMediaButtonEventReceiver(receiver)`）。

> 看来我永远不应该放弃音频焦点，那我为什么要实现它呢？

你不放弃焦点，它会从你身上夺走。为了优雅地处理这个问题，你有 AudioFocus 监听器。例如，考虑一个来电。你还想继续播放你的音乐吗？

# c++ - 用 C++ 重写 Matlab 代码

> ID：11980911
> 
> 赞同：2
> 
> 时间：2012-08-16T04:52:45.820
> 
> 标签：c++, matlab

基本上，我试图将一个巨大的 1D 向量拆分为通过函数传递的给定大小的块。该函数应该返回一个二维向量，然后我可以访问不同的块。我找到了一个合适的算法来做到这一点，但是，它在 Matlab 中，我不明白如何将元素放在 2D 向量中。

MatLab 代码：

```
function f = block(v, N, M)

n = length(v);
maxblockstart = n - N + 1;
lastblockstart = maxblockstart - mod(maxblockstart-1 , M);

numblocks = (lastblockstart-1)/M + 1;

f = zeros(numblocks,N);

for i = 1:numblocks
for j = 1:N
  f(i,j) = v((i-1)*M+j);
end
end 
```

这是我在 C++ 中的尝试（如果不好，请见谅）：

```
vector<iniMatrix> subBlocks(vector<int>& theData, int N, int M)
{
// This method splits the vector into blocks
// Each block has size N.
// and consecutive blocks differ 

int n = theData.size();
int maxblockstart = n - N+1;
int lastblockstart = maxblockstart - (maxblockstart-1 % M);

int numblocks = (lastblockstart-1)/M + 1;

vector<int> subBlock;
vector<iniMatrix> block;

for(unsigned i=0; (i < numblocks); i++)
{
    for(unsigned j=0; (j < N); j++)
    {
        subBlock.push_back(theData[(i-1*M+j)]);

        block.push_back(subBlock);
    }
}

return block;
} 
```

这段代码可以编译，但是，当我试图输出块的大小时，我得到：分段错误：11 ..有什么想法吗？

通过函数传递的数据是：N = 600 M = 200

我希望有人可以帮助我，谢谢：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T05:00:19.463

在 c 和 c++ 中，数组索引从零开始。如果您使用数组长度函数，请记住这一点。因此，您应该将`i-1`乘数替换为`i`并从零开始计数。循环条件：

```
for (unsigned j=1; (j < N); j++) 
```

将开始`1`和结束于`N-1`-- 总共的`N-1`时间。但，

```
for (unsigned j=0; (j < N); j++) 
```

将开始`0`和结束于`N-1`-- 总共`N`时间。

**在 Matlab 中：for 循环从第一个边界开始，然后在第二个边界结束**

如果你觉得*必须*从 index 开始`1`，

```
for (unsigned j=1; (j < N+1); j++) 
```

将进行`N`迭代，同时仍从`1`. 但请记住，当您在 C/C++ 中声明数组时，第一个元素的索引为零。

# winapi - 我可以从我的 WinApi 应用程序创建/更新 Windows 8 开始菜单图块吗？

> ID：11980917
> 
> 赞同：2
> 
> 时间：2012-08-16T04:53:23.893
> 
> 标签：winapi, windows-8, startmenu

我有一个常规的 Windows API（*不是 metro*）应用程序，我希望在 Windows 8 上拥有一个实时（定期更新）开始菜单磁贴，而不是静态开始菜单快捷方式。

我试图浏览与此主题相关的 MSDN 迷宫，但它似乎伴随着我正在构建 Metro 应用程序的假设。我不需要 Metro 应用程序，我只想将一些信息推送到一个磁贴中，单击该磁贴仍将执行我的常规 WinApi 应用程序。

如果这些 API 在 WinAPI 中不可用，那么可用于此目的的最小“胶水”是什么？例如，我是否可以拥有一些最小的 HTML + Javascript Metro 组件，通过 COM 访问我的应用程序并为图块制作所需的文本 + 图像？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T05:55:53.307

桌面应用程序不能有动态磁贴，而且 afaik 地铁应用程序无法直接与桌面应用程序对话。您可以在桌面应用程序中实现一个最小的 HTTP 服务器，然后编写一个 Metro 应用程序，通过它获取数据并更新磁贴。

# c++ - 将扩展名更改为 .mm 找不到标题了

> ID：11980923
> 
> 赞同：0
> 
> 时间：2012-08-16T04:53:39.677
> 
> 标签：c++, objective-c, xcode

我正在开发 Iphone 应用程序。我需要在`MainViewController`课堂上使用 C++ 代码。为此，我将其重命名为`MainViewController.m`以`MainViewController.mm`接受 C++ 代码。

但是，在这样做之后，它似乎丢失了与`MainViewController.h`文件的链接。我不能再合成 .h 文件中声明的属性，也不能再在头文件中创建操作。它找不到 .mm 文件。如果我尝试“跳转到定义”，它会说`Symbol not found`

我该如何解决。感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:07:41.620

**关闭并重新打开 Xcode 项目**

如果失败，则**构建并删除**由于更改要编译为的类型而可能引入的任何错误。

如果失败，则**全部清除**并重建。

如果失败，请到 Organizer，选择 "Projects" > *YOUR_PROJECT* 并**Delete its Derived Data**。

# android - Android中的群聊

> ID：11980932
> 
> 赞同：2
> 
> 时间：2012-08-16T04:54:33.227
> 
> 标签：android, livechat

我想在android中实现非常有效的群聊。我怎样才能做到这一点？请给我您最好的建议，并且一些分步教程将帮助我。

我想做点对点聊天和群聊。所以我想实现这两种类型的实现。那里有任何 SDK 可用吗？或者有任何java lib吗？

请给我你最好的建议。

谢谢，杰伊帕特尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:18:36.623

首先查看 Google 自己的[Google Cloud Messaging](http://developer.android.com/guide/google/gcm/index.html)。这使您可以将消息推送到其他设备。在那之后，你可以谷歌，看看你是否找到任何[例子](http://code.google.com/p/jchat4android/)或[教程](https://stackoverflow.com/questions/5360208/chatting-in-android)，你很高兴！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-06T06:49:57.073

这是使用[Applozic](https://www.applozic.com)后端服务器和聊天 SDKS 开发的 Android 聊天 SDK 的示例代码。 [https://github.com/AppLozic/Applozic-Android-SDK](https://github.com/AppLozic/Applozic-Android-SDK)

PS：我来自Applozic

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T06:38:40.637

您需要提交这样的表格来创建一个持久组：

私人无效setConfig（MultiUserChat multiUserChat）{尝试{

```
 Form form = multiUserChat.getConfigurationForm();
    Form submitForm = form.createAnswerForm();
    for (Iterator<FormField> fields = submitForm.getFields(); fields.hasNext();) {
        FormField field = (FormField) fields.next();
        if (!FormField.TYPE_HIDDEN.equals(field.getType()) && field.getVariable() != null) {
            submitForm.setDefaultAnswer(field.getVariable());
        }
    }
    submitForm.setAnswer("muc#roomconfig_publicroom", true);
    submitForm.setAnswer("muc#roomconfig_persistentroom", true);
    multiUserChat.sendConfigurationForm(submitForm);

} catch (Exception e) {
    e.printStackTrace();
} 
```

}

# asp.net - 在 Asp:Chart 中设置 no-repeat 到 backimage

> ID：11980934
> 
> 赞同：0
> 
> 时间：2012-08-16T04:54:37.783
> 
> 标签：asp.net, css, background-image, pie-chart, aspchart

我正在使用`asp:Chart`控制。它的属性`BackImage`工作正常。但是我在设置背景图像时遇到了 2 个错误。

1.  无法设置`no-repeat`的属性`BackImage`。
2.  如何在`BackImage`属性中传递图像的 URL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T06:37:56.327

```
chartid.chartarea[].backimage="url of your folder";
chartid.databind(); 
```

# php - div 高度不会根据子控件自动扩展

> ID：11980936
> 
> 赞同：1
> 
> 时间：2012-08-16T04:55:07.110
> 
> 标签：php, javascript, html, web-applications

我已经创建了网页

[http://jsfiddle.net/KNfrm/embedded/result/](http://jsfiddle.net/KNfrm/embedded/result/)

mid div 没有延伸到左窗格和右窗格的高度。

mid div 具有黑色背景色

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:07:25.083

您需要在`.rightpane`从正常的 html 流中删除浮动元素之后清除浮动。`.rightpane`只需在with 样式后添加一个空的块元素`clear:both`

[http://jsfiddle.net/KNfrm/1/](http://jsfiddle.net/KNfrm/1/) - [http://jsfiddle.net/KNfrm/1/show](http://jsfiddle.net/KNfrm/1/show)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:09:51.370

[**演示**](http://codebins.com/bin/4ldqp8c)

代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Tile Mode</title>
<style>
body {
    margin: auto;
    background-color:#fff;
    font-family:arial, verdana, helvetica;
    font-size:12px;
    color:#222;
}
.center{
    margin-left:auto;
    margin-right:auto;
    margin-top:0px;
    width:1000px;
    height:auto;
    display:block;
    background-color:#000;
}
.frameDiv {
    margin-left:auto;
    margin-right:auto;
    margin-top:0px;
    width:1000px;
    height:auto;
    display:block;
    background-color:#000;
}
.header {
    width:auto;
    height:150px;
    background-color:transparent;
}
.logo {
    height:100px;/*background-image:url(./images/header.png);*/
}
.menu {
    height:50px;
    width:auto;
    background-color:#ccc;
}
.menus {
    list-style-type: none;
    list-style-position:outside;
    position: relative;
    margin: 0;
    padding: 0;
}
.menus li {
    display: block;
    overflow: hidden;
    padding: 0;
    cursor: pointer;
    float: left;
    width: 200px;
    height: 50px;
    margin-right: 0px;
    background-image:url(./images/menu.png);
    background-repeat:no-repeat;
}
.menus a {
    display:block;
    height:50px;
    text-indent:-9999px;
    outline:none;
}
#menu1 {
    background-position:0px 0px;
}
#menu2 {
    background-position:-200px 0px;
}
#menu3 {
    background-position:-400px 0px;
}
#menu4 {
    background-position:-600px 0px;
}
#menu5 {
    background-position:-800px 0px;
}
#menu1.active, #menu1:hover {
    background-position: 0 bottom;
}
#menu2.active, #menu2:hover {
    background-position: -200px bottom;
}
#menu3.active, #menu3:hover {
    background-position: -400px bottom;
}
#menu4.active, #menu4:hover {
    background-position: -600px bottom;
}
#menu5.active, #menu5:hover {
    background-position: -800px bottom;
}
.leftpane {
    float:left;
    width:750px;
    height:auto;
    display:block;
    background-color:transparent;
}
.rightpane {
    float:right;
    width:250px;
    height:auto;
    background-color:transparent;
}
.content {
    width:auto;
    background-color:transparent;
    display:block;
    border-color:#666;
    border-style:solid;
    border-width:5px;
}
.footer {
    margin:0px;
    width:auto;
    height:100px;
    background-color:#461015;
    display:block;
    text-align:center;
    overflow:hidden;
}
.footer p {
    display:inline;
}
.footer p a:link {
    color: #fff;
    text-decoration:none;
}
.footer p a:visited {
    color: #fff;
    text-decoration:none;
}
.footer p a:hover {
    color: #fff;
    text-decoration:none;
}
.footer p a:active {
    color: #fff;
    text-decoration:none;
}
.quote {
    margin-left:35px;
    margin-top:20px;
    margin-bottom:20px;
    margin-right:35px;
    width:180px;
    height:40px;
    display:block;
}
.facebook {
    margin-left:35px;
    margin-top:20px;
    margin-bottom:20px;
    margin-right:35px;
    width:180px;
    height:40px;
    display:block;
    background-image:url(images/facebook.png);
    background-repeat:no-repeat;
}
.linkedin {
    margin-left:35px;
    margin-top:20px;
    margin-bottom:20px;
    margin-right:35px;
    width:180px;
    height:40px;
    display:block;
    background-image:url(images/linkedin.png);
    background-repeat:no-repeat;
}
.twitter {
    margin-left:35px;
    margin-top:20px;
    margin-bottom:20px;
    margin-right:35px;
    width:180px;
    height:40px;
    display:block;
    background-image:url(images/twitter.png);
    background-repeat:no-repeat;
}
.hl {
    border: 2px;
    width: 80%;
    border-color:#999;
}
ul#ticker {
    width: 200px;
    height: 200px;
    overflow: hidden;
    margin:auto;
    list-style-type:none;
    padding:0px;
    font-family:Calibri, Arial, Tahoma;
    font-style:normal;
}
ul#ticker li {
    margin:0px;
    padding:0px;
    width: 200px;
    height: 130px;
    white-space:normal;
    overflow:none;
    text-align:justify;
}
ul#ticker li a:link {
    color: #fff;
    text-decoration:none;
}
ul#ticker li a:visited {
    color: #fff;
    text-decoration:none;
}
ul#ticker li a:hover {
    color: #fff;
    text-decoration:none;
}
ul#ticker li a:active {
    color: #fff;
    text-decoration:none;
}
ul#ticker li span {
    display: block;
    color: #06C;
    text-align:center;
}
</style>
<script type="text/javascript" src="js/jquery-1.4.min.js"></script>
</script>
<script type="text/javascript">

$(function()
{
    var ticker = function()
    {
        setTimeout(function(){
            $('#ticker li:first').animate( {marginTop: '-120px'}, 800, function()
            {
                $(this).detach().appendTo('ul#ticker').removeAttr('style');
            });
            ticker();
        }, 4000);
    };
    ticker();
});
</script>
<body>
<div class="center">
<div class="frameDiv">
  <div class="header">
  <div class="logo"> </div>
  <div class="menu">
    <ul class="menus">
      <li id="menu1"><a href="index.php">Home</a></li>
      <li id="menu2"><a href="aboutus.php">About us</a></li>
      <li id="menu3"><a href="services.php">Services</a></li>
      <li id="menu4"><a href="gallery.php">Gallery</a></li>
      <li id="menu5"><a href="contactus.php">Contact</a></li>
    </ul>
  </div>
</div>
  <div class="mid">
    <div class="leftpane">
    <div class="image" style="margin:5px; margin-right:0px; display:block;">
    <img src="http://www.grnyrenovation.com/images/nycpremier.jpg"; style="overflow:hidden; width:745px" />    
    </div>
      <div class="content"></div>
      <div class="footer"> <br/>
  <hr style="height:2px; border:1px;" noshade="noshade"/>
  <p><a href="index.php">Home  |</a></p>
  <p><a href="aboutus.php">About us  |</a></p>
  <p><a href="services.php">Services  |</a></p>
  <p><a href="gallery.php">Gallery  |</a></p>
  <p><a href="contactus.php">Contact</a></p>
  <hr style="height:2px; border:1px; width:70%" noshade="noshade"/>
  <p style="margin:8px">&#169 Tile</p>
</div>
    </div>
    <div class="rightpane">
      <div style="clear:both;">
  <div class="quote"> </div>
  <div class="facebook"> </div>
  <div class="linkedin"> </div>
  <div class="twitter"> </div>
  <hr/ class="hl" style="height:2px; border:1px;" noshade="noshade">
  <div class="testimonial">
    <div style="color:#FFF; font-weight:bold; font-size:large;  font-family:'MS Serif', 'New York', serif; text-align:center;">
      <h3>Testimonials</h3>
    </div>
    <div class="tickerclass">
      <ul id="ticker">
        <li> <span>Title 1</span> <a href="#"> Welcome to Monday, to cancel reply. Tuesday, before that I employed a odioeros's more, but my following you to use the. </a> </li>
        <li> <span>Title 2</span> <a href="#"> Welcome to Monday, to cancel reply. Tuesday, before that I employed a odioeros's more, but my following you to use the </a> </li>
        <li> <span>Title 3</span> <a href="#"> Welcome to Monday, to cancel reply. Tuesday, before that I employed a odioeros's more, but my following you to use the </a> </li>
        <li> <span>Title 4</span> <a href="#"> Welcome to Monday, to cancel reply. Tuesday, before that I employed a odioeros's more, but my following you to use the </a> </li>
        <li> <span>Title 5</span> <a href="#"> Welcome to Monday, to cancel reply. Tuesday, before that I employed a odioeros's more, but my following you to use the </a> </li>
      </ul>
    </div>
  </div>
  <br/>
  <hr class="hl" style="height:2px; border:1px;" noshade="noshade"/>
  <div class="acceridation" style="text-align:center; height:60px;">
  <img  style="margin:auto;overflow:hidden;width:80px;height:50px;"  align="middle" src="http://www.grnyrenovation.com/images/nkba_170x90.jpg" />
  <img  style="margin:auto;overflow:hidden;width:80px;height:50px;"  align="middle" src="http://www.grnyrenovation.com/images/sm_EPA-Lead-Safe-Certified.png"/>
  </div>
</div>

  </div>
    <div style="clear:both"></div>
    </div>
  </div>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:26:50.940

试试这个将你的代码添加到中心 div

```
.center{ overflow:auto;} 
```

# c# - 实体框架和时间跨度计算

> ID：11980938
> 
> 赞同：2
> 
> 时间：2012-08-16T04:55:42.077
> 
> 标签：c#, linq, entity-framework

如何让 21 岁以上的人使用 EF？

```
from person in context.Persons
where DateTime.UtcNow - person.Dob > TimeSpan.FromHours(184086)
select new {person, Age = DateTime.UtcNow - person.Dob} 
```

以上失败。

我能做些什么来解决这个问题？最新版本的 EF 是否支持上述内容，例如。4.2+

我可以按如下方式访问 DateTime 结构的属性吗？

```
from person in context.Persons
where DateTime.UtcNow.Year - person.Dob.Year > 21
select new {person, Age = DateTime.UtcNow.Year - person.Dob.Year} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T13:31:36.800

您可以`<`在 linq-to-entites 查询中使用该运算符。但是，您不能使用加法或减法。幸运的是，[`SqlFunctions`](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)具有计算日期差异的功能。所以你可以做的是：

```
var d21 = DateTime.Today.AddYears(-21);
var q = from person in context.Persons
        where person.Dob < d21
        select new
        {
            person,
            Age = SqlFunctions.DateDiff("year", person.Dob, DateTime.Today)
        } 
```

您必须先创建变量`d21`，否则 EF 会抱怨 not known `AddYears`。

# python - 将 PyQt 输出与 python 文件链接

> ID：11980939
> 
> 赞同：1
> 
> 时间：2012-08-16T04:55:49.873
> 
> 标签：python, pyqt

如何将此 PyQt 输出与底部的 python 文件链接？我查看了各种教程，但无法弄清楚。如何为单选按钮设置值，以便如果有人单击地球 r 填充为 6.4*10**6 并且 g 设置为 9.8？

## 来自 Qt 设计师

```
import sys
from PyQt4 import QtCore, QtGui
from projectile_ui import Ui_Form

class MyForm(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_Form()
        self.ui.setupUi(self)

try:
    _fromUtf8 = QtCore.QString.fromUtf8
except AttributeError:
    _fromUtf8 = lambda s: s

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName(_fromUtf8("Form"))
        Form.resize(443, 340)
        self.Tilte = QtGui.QLabel(Form)
        self.Tilte.setGeometry(QtCore.QRect(130, 10, 131, 16))
        self.Tilte.setObjectName(_fromUtf8("Tilte"))
        self.Vo = QtGui.QDoubleSpinBox(Form)
        self.Vo.setGeometry(QtCore.QRect(20, 40, 81, 22))
        self.Vo.setMaximum(999999999.0)
        self.Vo.setObjectName(_fromUtf8("Vo"))
        self.angle = QtGui.QDoubleSpinBox(Form)
        self.angle.setGeometry(QtCore.QRect(20, 70, 81, 22))
        self.angle.setMaximum(90.0)
        self.angle.setObjectName(_fromUtf8("angle"))
        self.dt = QtGui.QDoubleSpinBox(Form)
        self.dt.setGeometry(QtCore.QRect(20, 100, 81, 22))
        self.dt.setDecimals(3)
        self.dt.setMinimum(0.0)
        self.dt.setMaximum(1.0)
        self.dt.setSingleStep(0.001)
        self.dt.setProperty("value", 0.01)
        self.dt.setObjectName(_fromUtf8("dt"))
        self.Jupiter = QtGui.QRadioButton(Form)
        self.Jupiter.setGeometry(QtCore.QRect(20, 240, 82, 17))
        self.Jupiter.setObjectName(_fromUtf8("Jupiter"))
        self.Saturn = QtGui.QRadioButton(Form)
        self.Saturn.setGeometry(QtCore.QRect(20, 260, 82, 17))
        self.Saturn.setObjectName(_fromUtf8("Saturn"))
        self.Sun = QtGui.QRadioButton(Form)
        self.Sun.setGeometry(QtCore.QRect(20, 140, 82, 17))
        self.Sun.setCheckable(True)
        self.Sun.setObjectName(_fromUtf8("Sun"))
        self.Venus = QtGui.QRadioButton(Form)
        self.Venus.setGeometry(QtCore.QRect(20, 180, 82, 17))
        self.Venus.setObjectName(_fromUtf8("Venus"))
        self.Mars = QtGui.QRadioButton(Form)
        self.Mars.setGeometry(QtCore.QRect(20, 220, 82, 17))
        self.Mars.setObjectName(_fromUtf8("Mars"))
        self.Neptune = QtGui.QRadioButton(Form)
        self.Neptune.setGeometry(QtCore.QRect(20, 300, 82, 17))
        self.Neptune.setObjectName(_fromUtf8("Neptune"))
        self.Earth = QtGui.QRadioButton(Form)
        self.Earth.setGeometry(QtCore.QRect(20, 200, 82, 17))
        self.Earth.setObjectName(_fromUtf8("Earth"))
        self.Uranus = QtGui.QRadioButton(Form)
        self.Uranus.setGeometry(QtCore.QRect(20, 280, 82, 17))
        self.Uranus.setObjectName(_fromUtf8("Uranus"))
        self.Mercury = QtGui.QRadioButton(Form)
        self.Mercury.setGeometry(QtCore.QRect(20, 160, 82, 17))
        self.Mercury.setObjectName(_fromUtf8("Mercury"))
        self.Vo_Label = QtGui.QLabel(Form)
        self.Vo_Label.setGeometry(QtCore.QRect(110, 40, 71, 21))
        self.Vo_Label.setObjectName(_fromUtf8("Vo_Label"))
        self.Angle_Label = QtGui.QLabel(Form)
        self.Angle_Label.setGeometry(QtCore.QRect(110, 70, 61, 21))
        self.Angle_Label.setObjectName(_fromUtf8("Angle_Label"))
        self.dt_Label = QtGui.QLabel(Form)
        self.dt_Label.setGeometry(QtCore.QRect(110, 100, 61, 21))
        self.dt_Label.setObjectName(_fromUtf8("dt_Label"))
        self.LCDheight = QtGui.QLCDNumber(Form)
        self.LCDheight.setGeometry(QtCore.QRect(230, 150, 181, 71))
        self.LCDheight.setObjectName(_fromUtf8("LCDheight"))
        self.lcdTotaltime = QtGui.QLCDNumber(Form)
        self.lcdTotaltime.setGeometry(QtCore.QRect(230, 250, 181, 71))
        self.lcdTotaltime.setObjectName(_fromUtf8("lcdTotaltime"))
        self.label = QtGui.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(230, 132, 181, 21))
        self.label.setObjectName(_fromUtf8("label"))
        self.label_2 = QtGui.QLabel(Form)
        self.label_2.setGeometry(QtCore.QRect(230, 232, 181, 21))
        self.label_2.setObjectName(_fromUtf8("label_2"))
        self.pushButton = QtGui.QPushButton(Form)
        self.pushButton.setGeometry(QtCore.QRect(230, 50, 181, 61))
        self.pushButton.setAutoFillBackground(False)
        self.pushButton.setDefault(False)
        self.pushButton.setFlat(False)
        self.pushButton.setObjectName(_fromUtf8("pushButton"))

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)

    def retranslateUi(self, Form):
        Form.setWindowTitle(QtGui.QApplication.translate("Form", "Form", None, QtGui.QApplication.UnicodeUTF8))
        self.Tilte.setText(QtGui.QApplication.translate("Form", "Projectile Motion Calculator", None, QtGui.QApplication.UnicodeUTF8))
        self.Jupiter.setText(QtGui.QApplication.translate("Form", "Jupiter", None, QtGui.QApplication.UnicodeUTF8))
        self.Saturn.setText(QtGui.QApplication.translate("Form", "Saturn", None, QtGui.QApplication.UnicodeUTF8))
        self.Sun.setText(QtGui.QApplication.translate("Form", "Sun ", None, QtGui.QApplication.UnicodeUTF8))
        self.Venus.setText(QtGui.QApplication.translate("Form", "Venus", None, QtGui.QApplication.UnicodeUTF8))
        self.Mars.setText(QtGui.QApplication.translate("Form", "Mars", None, QtGui.QApplication.UnicodeUTF8))
        self.Neptune.setText(QtGui.QApplication.translate("Form", "Neptune", None, QtGui.QApplication.UnicodeUTF8))
        self.Earth.setText(QtGui.QApplication.translate("Form", "Earth", None, QtGui.QApplication.UnicodeUTF8))
        self.Uranus.setText(QtGui.QApplication.translate("Form", "Uranus", None, QtGui.QApplication.UnicodeUTF8))
        self.Mercury.setText(QtGui.QApplication.translate("Form", "Mercury", None, QtGui.QApplication.UnicodeUTF8))
        self.Vo_Label.setText(QtGui.QApplication.translate("Form", "Initial Velocity ", None, QtGui.QApplication.UnicodeUTF8))
        self.Angle_Label.setText(QtGui.QApplication.translate("Form", "Angle", None, QtGui.QApplication.UnicodeUTF8))
        self.dt_Label.setToolTip(QtGui.QApplication.translate("Form", "<html><head/><body><p>Smaller number gives more accurate results.</p></body></html>", None, QtGui.QApplication.UnicodeUTF8))
        self.dt_Label.setText(QtGui.QApplication.translate("Form", "Time Step", None, QtGui.QApplication.UnicodeUTF8))
        self.label.setText(QtGui.QApplication.translate("Form", "Max Height ", None, QtGui.QApplication.UnicodeUTF8))
        self.label_2.setText(QtGui.QApplication.translate("Form", "Total Time ", None, QtGui.QApplication.UnicodeUTF8))
        self.pushButton.setText(QtGui.QApplication.translate("Form", "Calculate", None, QtGui.QApplication.UnicodeUTF8))

if __name__ == "__main__":
    app = QtGui.QApplication(sys.argv)
    myapp = MyForm()
    myapp.show()
    sys.exit(app.exec_()) 
```

## 我想链接到 UI 的代码。

```
from math import*
def main():
    loopiterations = int()

    dt = eval(input("")) ##time step

    Vo = eval(input(""))
    xo = 0
    yo = 0
    angle = eval(input(""))
    angle = angle * (pi / 180)
    Vox = Vo * cos(angle)
    Voy = Vo * sin(angle)
    y =  (yo + Voy * dt)
    r=eval(input(""))  ## r= 6.4*10**6 for earth 
    g = eval(input(""))  ## m/s **2
    Vy=Voy - g * dt
    iterations = 0

    while not (Vy < 0):
        y =  (yo + Voy * dt)
        Vy= (Voy - g * dt)
        x = (xo + Vox * dt)
        Vx = Vox
        iterations = iterations + 1
        yo = y
        xo = x
        Vox = Vx
        Voy = Vy
    print (y)
    print(iterations) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:07:58.203

如果你在 QtDesigner 中设计了 UI 并且仍然有 .ui 文件，那么使用它的简单方法是实际上不打扰 pyuic，直接使用它：

```
from PyQt4 import uic

...
class ProjectileObject(QtCore.QObject):
    def __init__(self):
        super(ProjectileObject, self).__init__()
        self.ui = None
        self.ui = uic.loadUi('projectile.ui', self.ui)
        self.ui.Saturn.clicked.connect(self.radioClicked)    #These lines connect your
        self.ui.Uranus.clicked.connect(self.radioClicked)    #interface to your code
        ...                                                  #you can look up other signals as well
        self.ui.show()
    def radioClicked():
        #This code can inspect the various radio buttons, and take different actions
        #depending on which one was clicked 
```

请注意，使用 QtDesigner 中的动作编辑器创建“switchPlanet”动作，然后使用 Signal/Slot 编辑器将所有单选按钮连接到 QtDesigner 中的该动作，效率更高，然后您只需`self.ui.switchPlanet.triggered.connect(self.radioClicked)`在代码中执行类似操作你只需要做一次。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:38:18.570

首先，为了解决您的单选按钮，我会将它们放入代码中的[QButtonGroup](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qbuttongroup.html)中。它将所有这些按钮整合到一个单一的接触点中，并能够使它们独占：

```
self.planetGroup = QtGui.QButtonGroup(self)
self.planetGroup.setExclusive(True)
self.planetGroup.addButton(self.Saturn)
self.planetGroup.addButton(self.Uranus)

self.planetGroup.buttonClicked["QAbstractButton*"].connect(self.planetChanged)

self.planetChanged(self, planetButton):
    if planetButton == self.Saturn:
        # do something
    elif planetButton == self.Uranus:
        # do something 
```

您甚至可以通过使用包含每个按钮的有线值的 dict 来使其更容易：

```
self._planetVals = {
    self.Saturn: "saturn",
    self.Uranus: "uranus",
}

self.planetChanged(self, planetButton):
    do_stuff_with(self._planetVals[planetButton]) 
```

现在解决您的`main`代码问题。它需要从它对收集用户输入的依赖中分离出来`input`，以及它的业务逻辑：

```
from math import *

def main():
    dt = eval(input("")) ##time step
    Vo = eval(input(""))
    angle = eval(input(""))
    r=eval(input(""))  ## r= 6.4*10**6 for earth 
    g = eval(input(""))  ## m/s **2

    print process(dt, Vo, angle, r, g)

def process(dt, Vo, angle, r, g):
    loopiterations = 0

    xo = 0
    yo = 0
    angle = angle * (pi / 180)
    Vox = Vo * cos(angle)
    Voy = Vo * sin(angle)
    y =  (yo + Voy * dt)
    Vy=Voy - g * dt
    iterations = 0

    while not (Vy < 0):
        y =  (yo + Voy * dt)
        Vy= (Voy - g * dt)
        x = (xo + Vox * dt)
        Vx = Vox
        iterations = iterations + 1
        yo = y
        xo = x
        Vox = Vx
        Voy = Vy
    # print (y)
    # print(iterations)
    return y, iterations 
```

现在您可以自由地导入该模块并使用该`process`函数，方法是传递从您的 UI 收集的值

这个难题缺少的部分是创建一个主要的 PyQt4 窗口类，它使用您的 Qt Designer UI 和您的通用业务逻辑来运行应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T17:20:02.410

查看您发布的代码，您需要做的第一件事是将生成的模块保持`pyuic`原样：不要编辑它。

相反，您应该将其导入到一个单独的模块中，所有主程序逻辑都将在其中。这将允许您在 Qt Designer 中更改内容并重新生成 ui 模块，而不会干扰其他代码。

下面的脚本将示例中的两段代码链接在一起。将其另存为`projectile.py`，然后使用重新生成您的 ui 模块`pyuic`并将其另存为`projectile_ui.py`.

显然，您需要稍微调整脚本以使事情按您想要的方式工作，但希望它可以帮助您入门。

```
from math import*
from PyQt4 import QtCore, QtGui
from projectile_ui import Ui_Form

constants = {
    'Sun': (0, 0),
    'Mercury': (0, 0),
    'Venus': (0, 0),
    'Earth': (6.4*10**6, 9.81),
    'Mars': (0, 0),
    'Jupiter': (0, 0),
    'Saturn': (0, 0),
    'Uranus': (0, 0),
    'Neptune': (0, 0),
    }

class MyForm(QtGui.QMainWindow, Ui_Form):
    def __init__(self, parent=None):
        QtGui.QMainWindow.__init__(self, parent)
        self.setupUi(self)
        self.radioButtons = QtGui.QButtonGroup(self)
        self.radioButtons.addButton(self.Sun)
        self.radioButtons.addButton(self.Mercury)
        self.radioButtons.addButton(self.Venus)
        self.radioButtons.addButton(self.Earth)
        self.radioButtons.addButton(self.Mars)
        self.radioButtons.addButton(self.Jupiter)
        self.radioButtons.addButton(self.Saturn)
        self.radioButtons.addButton(self.Uranus)
        self.radioButtons.addButton(self.Neptune)
        self.pushButton.clicked.connect(self.handleCalculate)

    def handleCalculate(self):
        loopiterations = int()

        dt = self.dt.value() # time step

        Vo = self.Vo.value()
        xo = 0
        yo = 0
        angle = self.angle.value()
        angle = angle * (pi / 180)
        Vox = Vo * cos(angle)
        Voy = Vo * sin(angle)
        y =  (yo + Voy * dt)

        iterations = y = r = g = 0

        button = self.radioButtons.checkedButton()

        if button is not None:
            # r= 6.4*10**6 for earth, g= m/s **2
            r, g = constants[str(button.objectName())]

            Vy=Voy - g * dt

            if r > 0 and g > 0:

                while not (Vy < 0):
                    y =  (yo + Voy * dt)
                    Vy= (Voy - g * dt)
                    x = (xo + Vox * dt)
                    Vx = Vox
                    iterations = iterations + 1
                    yo = y
                    xo = x
                    Vox = Vx
                    Voy = Vy

        self.LCDheight.display(y)
        self.lcdTotaltime.display(iterations)

if __name__ == "__main__":

    import sys
    app = QtGui.QApplication(sys.argv)
    myapp = MyForm()
    myapp.show()
    sys.exit(app.exec_()) 
```

# android - Android上没有WebView的oAuth？

> ID：11980946
> 
> 赞同：6
> 
> 时间：2012-08-16T04:56:34.603
> 
> 标签：android, oauth, webview

有没有一种方法可以实现 oAuth 流程，而无需实际启动浏览器甚至是 android 上的 webview？

我想展示的是一个本机弹出窗口，它询问用户凭据，然后将其提供给 oAuth 提供者。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:49:29.903

严格来说不，OAuth 的主要思想是您永远不应该以任何方式处理用户的凭据。

但这取决于提供者。例如，Twitter 使用[他们自己发明的 xAuth](https://dev.twitter.com/docs/oauth/xauth)，您可以在其中发送用户名和密码以换取访问令牌。不过，Twitter 只允许那些能够很好地激发这种需求的应用程序。

因此，请与 API 提供者核实是否有可能以某种方式进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-27T02:49:39.220

最近我做了一些关于在不使用浏览器或 webview 的情况下实现 oAuth 的研究。如今，某些平台已经通过使用他们的 SDK （如 google）拥有原生方式：[https ://developers.google.com/identity/sign-in/android/，linkedin：](https://developers.google.com/identity/sign-in/android/) [https](https://developer.linkedin.com/docs/android-sdk-auth#) : //developer.linkedin.com/docs/android-sdk [-身份验证#](https://developer.linkedin.com/docs/android-sdk-auth#)。您也可以搜索其他平台。

我看到的另一个机会是使用谷歌“Firebase”：[https](https://firebase.google.com/docs/auth/) ://firebase.google.com/docs/auth/ 。尽管我还没有真正尝试实现它，但据我了解，我们可以在 HTML 上创建自己的自定义输入并将其传递给他们的 Javascript oAuth SDK 以进行凭据登录事务。只是我猜我们也可以使用 android 原生界面来做到这一点。

非常欢迎任何更正。谢谢。

# jquery - 动态添加的 jQuery 元素的样式

> ID：11980959
> 
> 赞同：1
> 
> 时间：2012-08-16T04:59:04.057
> 
> 标签：jquery, html, css

这是演示：

[http://jsfiddle.net/JH7SU/1/](http://jsfiddle.net/JH7SU/1/)

我很困惑为什么相同的标记会出现不同，这取决于它是静态交付还是加载。我猜这与 DOM 的解析方式有关，并且样式在某种程度上没有从父元素正确继承？

上下文是我正在设计一个交互式表单，其逻辑太复杂而无法隐藏/显示元素。因此，我想即时创建/销毁新元素（但使用适当的 CSS）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:29:34.020

这是因为，在您的静态 html 中，`select`并且`input`在两行中，意味着它们之间有一些空间。如果你想让它动态化，你也必须在那里添加一个空间。

这是一个[工作小提琴](http://jsfiddle.net/JH7SU/3/)。

但我强烈建议您避免这种定位，并为 和 使用严格的 CSS`margin`样式`padding`。这是使用 CSS的[更正小提琴。](http://jsfiddle.net/JH7SU/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:17:37.777

`select`and`input`元素的样式设置为，`inline-block`如果标记中存在空格，则它们被视为内联元素，它们之间有空格。

在附加动态元素之前插入空格或换行符，或者删除静态元素中的换行符。

没有空格的例子：http: [//jsfiddle.net/bhJg8/](http://jsfiddle.net/bhJg8/) 有空格的例子：http: [//jsfiddle.net/fr5W7/](http://jsfiddle.net/fr5W7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:20:23.443

这是常见的问题：空白。`</select>`您的静态表单在和之间有一个换行符`<input>`，它在表单中变成了一个空白。但是当您动态附加元素时，它们之间没有任何内容。

将其更改为：

```
dynamicControls.append(dynamicSelect, ' ', dynamicInput); 
```

他们看起来都一样。

或者，如果您更喜欢动态元素的外观，请去掉静态版本中的空白。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T05:46:32.510

这只是将 html 附加到您的代码中的方式。它与您真正键入的方式不同。有趣的是，这对你有用。

```
dynamicControls.append(dynamicSelect);
dynamicControls.append('\r\n');
dynamicControls.append(dynamicInput); 
```

# xml - 在 ipad 应用程序中将 myNSArray 转换为 xml 格式？

> ID：11980968
> 
> 赞同：0
> 
> 时间：2012-08-16T05:00:12.030
> 
> 标签：xml, ipad, nsarray

我正在开发一个基于 SOAP 的应用程序。肥皂请求是一个问题列表，我需要回答每个问题并以 xml 格式发送响应。我已经在 NSArray 中收集了所有这些答案。现在我需要将此数组转换为 xml 格式。

每个问题的标题字段是

```
 {productid,questionid,valueid,answerText} 
```

我的答案数组是

```
 {3,2,2,black color} 
```

我需要以 xml 格式生成这些答案数组

就像是

```
 <productid>3</productid> <questionid>2</questionid> <valueid>2</valueid> <answerText>black color</answerText> 
```

我可能有多个问题要回答。最后我需要以 xml 格式发送所有这些答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:14:30.833

像这样的东西应该工作：

```
NSMutableString *res = [NSMutableString string];
for (NSArray *array in allQuestions) {
    [res appendString:@"<question>\n"];
    [res appendFormat:@"<productid>%@</productid>\n", [array objectAtIndex:0]];
    [res appendFormat:@"<questionid>%@</questionid>\n", [array objectAtIndex:1]];
    [res appendFormat:@"<valueid>%@</valueid>\n", [array objectAtIndex:2]];
    [res appendFormat:@"<answerText>%@</answerText>\n", [array objectAtIndex:3]];
    [res appendFormat:@"</question>\n"];
} 
```

假设 allQuestions 是包含所有问题的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-17T08:26:42.143

尝试这个

```
XmlTextWriter textWriter = new XmlTextWriter("C:\\myNSXML.xml", null);
string[] Headers = { "productid", "questionid", "valueid", "answerText" };
string[] Answers = { "3", "2", "2", "black color" };
textWriter.WriteStartDocument();
textWriter.WriteStartElement("Root");
for (int i = 0; i < Headers.Length; i++)
{
  textWriter.WriteStartElement(Headers[i]);
  textWriter.WriteString(Answers[i]);
  textWriter.WriteEndElement();
}
textWriter.WriteEndDocument();
textWriter.Close(); 
```

在 C 驱动器中找到以下名为“myNSXML.xml”的 XML 文件

```
 <?xml version="1.0" ?> 
<Root>
<productid>3</productid> 
<questionid>2</questionid> 
<valueid>2</valueid> 
<answerText>black color</answerText> 
</Root> 
```

我希望这能帮到您...

# java - 如何使用 jdbc 将 MySQL、MS SQL 迁移到 postgreSQL 数据库？用java代码

> ID：11980974
> 
> 赞同：-1
> 
> 时间：2012-08-16T05:00:27.687
> 
> 标签：java, postgresql, jakarta-ee, jdbc, database-migration

我正在使用 jsp/servlets 在 postgresql 数据库中工作，我需要连接外部 jdbc，如 MySQL、MS SQL、PostgreSQL 并将所有数据迁移到我的 Postgresql 数据库。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:10:08.950

我相信您的任务没有简单的解决方案，除非它是一个相当基本的项目。在现实世界中，有时我们被迫使用数据库特定的定义，如索引、事务管理、序列等。我不是在谈论数据库特定的查询或诸如 PL/SQL 或 Transact SQL 之类的东西，这些数据根本不支持基地。

如果您使用 Hibernate/JPA，特别是从实体生成模式，您可以尝试连接到旧模式，获取所有实体并在硬盘上序列化它们，而不是使用新的数据库地址配置数据源并尝试在那里部署实体，但总的来说，我不希望一切都清楚并且开箱即用

Disclamer，我是一个 Java 人，所以我从 Java 开发人员而不是 DBA 的角度分享我的想法:)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:13:37.400

这解释了[如何使用 JDBC 连接到 PostgreSQL](http://www.mkyong.com/jdbc/how-do-connect-to-postgresql-with-jdbc-driver-java/)。这有帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T05:42:29.373

正如 RC 在评论中所说，尝试使用`Talend`他们有一个`open studio` [Here is the link](http://www.talend.com/products/open-studio-di.php)。免费版绝对适合您的情况。您可以编写（或设计）作业并将其导出为 jar，并将其作为应用程序的一部分使用，或者根据您的要求将其作为 cron 调度程序运行。
他们在网上有一些教程，在 youtube 上也有一些。他们应该是有帮助的。

# android - 当我在android webview上加载时html文件中的图像路径

> ID：11980975
> 
> 赞同：1
> 
> 时间：2012-08-16T05:00:30.407
> 
> 标签：android, html, android-webview

我有一些必须在 android webview 上显示的 html 内容。这是我在 webview 上显示内容的代码

```
myBrowser.loadDataWithBaseURL("", myFormHTMLContent , "text/html", "UTF-8", null); 
```

我在 html 内容中有几个 img 标签。我如何为那些指定 src？我试过这个.. src =“/mnt/sdcard/myDir/test.gif”。但它没有加载该图像。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:21:36.657

试试这个。

```
src = Environment.getExternalStorageDirectory().getPath()+"myDir/test.gif" 
```

# perl - 如何在perl cgi中制作二维码

> ID：11980976
> 
> 赞同：2
> 
> 时间：2012-08-16T05:01:30.943
> 
> 标签：perl, qr-code

我正在尝试创建一个网站，其中包含供人们填写的表单，当用户按下提交按钮时，每个表单字段中的文本被连接成一个文本字符串，用于制作二维码。我怎么能做到这一点，什么语言最适合大多数浏览器兼容。

另外，我想让文本字段有一个新行（\n）与之关联，以使用户扫描二维码时格式更漂亮。

请让我知道..提前致谢..您能否提供一个具有三个要连接的文本区域的网站的示例代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-20T16:24:37.550

[Imager::QRCode](https://metacpan.org/module/Imager%3a%3aQRCode)模块使这很容易。我刚刚在 5 分钟内完成了以下操作。

```
#!/Users/quentin/perl5/perlbrew/perls/perl-5.14.2/bin/perl

use v5.12;
use CGI; # This is a quick demo. I recommend Plack/PSGI for production.
use Imager::QRCode;

my $q = CGI->new;
my $text = $q->param('text');
if (defined $text) {
    my $qrcode = Imager::QRCode->new(
        size          => 5,
        margin        => 5,
        version       => 1,
        level         => 'M',
        casesensitive => 1,
        lightcolor    => Imager::Color->new(255, 255, 255),
        darkcolor     => Imager::Color->new(0, 0, 0),
    );
    my $img = $qrcode->plot($text);
    print $q->header('image/gif');
    $img->write(fh => \*STDOUT, type => 'gif')
        or die $img->errstr;
} else {
    print $q->header('text/html');
    print <<END_HTML;
<!DOCTYPE html>
<meta charset="utf-8">
<title>QR me</title>
<h1>QR me</h1>
<form>
    <div>
        <label>
            What text should be in the QR code?
            <textarea name="text"></textarea>
        </label>
        <input type="submit">
    </div>
</form>
END_HTML
} 
```

> 我怎么能做到这一点，什么语言最适合大多数浏览器兼容。

如果它在服务器上运行，那么您只需要确保输出在浏览器之间兼容；所以使用 GIF 或 PNG。

> 您能否包含一个具有三个要连接的文本区域的网站的示例代码？

只需`.`在 Perl 中使用 a 来连接字符串变量。

```
my $img = $qrcode->plot($foo . $bar . $baz); 
```

# ruby-on-rails - 如何找到神秘的 YAML 错误？

> ID：11980979
> 
> 赞同：0
> 
> 时间：2012-08-16T05:02:33.420
> 
> 标签：ruby-on-rails, ruby-on-rails-3, yaml, fixtures

在进行一些测试时，我开始在所有测试中收到以下错误。

```
Psych::SyntaxError: couldn't parse YAML at line 92 column 0 
```

使用此代码运行测试：

```
ruby -Itest ./test/functional/users_controller_test.rb 
```

我在夹具中找不到任何 YAML 错误，所以我撤消了所有更改。根据 git，这些文件与我开始时的状态相同。但我不断收到同样的错误。

怎么修？如何找到导致问题的文件？

导轨 3.0.7
红宝石 1.9.2p290

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:23:44.023

将您的 Rails 升级到更新的 3.0.x 版本，并查看[其他 Stack Overflow 问题](https://stackoverflow.com/q/4980877/152786)以获取其他提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T15:11:59.893

找到了！两个夹具文件中有一个制表符。

奇怪的是，这些文件与以前相比没有变化。他们过去工作得很好。我确信这一点，因为 git 可以区分制表符和空格。（现在修改了文件）。

显然，gem 或其他文件已使用更挑剔的 YAML 解析器进行了更新……但奇怪的是我没有更新任何内容。

我想这是运行 RVM 或 rbenv（我就是）的一个很好的理由。太糟糕了，它没有解释发生了什么......

# html - 如何从任何网页复制 HTML 及其关联的 CSS

> ID：11980980
> 
> 赞同：0
> 
> 时间：2012-08-16T05:02:33.527
> 
> 标签：html, css

> **可能重复：**
> [从现有站点选择性复制 html+css+js 的工具](https://stackoverflow.com/questions/4911338/tools-to-selectively-copy-htmlcssjs-from-existing-sites)

是否有任何工具可以让您选择要复制的 HTML 部分，然后该工具会为您提供与该 HTML 关联的 CSS 规则。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:08:46.487

你厌倦了 FireBug [https://addons.mozilla.org/en-us/firefox/addon/firebug/](https://addons.mozilla.org/en-us/firefox/addon/firebug/)吗？ [https://getfirebug.com/](https://getfirebug.com/)

# database - 数据库索引示例

> ID：11980983
> 
> 赞同：1
> 
> 时间：2012-08-16T05:02:51.450
> 
> 标签：database, indexing, database-indexes

关于数据库索引如何工作的一个简单问题。

假设我有一个表 'Student' 列 id(primary_key)、name 和 GPA。假设我在 id 和其他列上没有索引

现在，如果我使用名称和 GPA（不使用 id）查询记录，它必须搜索所有记录以查找匹配项。索引在这里有什么好处？

索引是否仅在查询包含索引列时才有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T05:06:12.037

> 如果我使用名称和 GPA（不带 id）查询记录，它必须搜索所有记录以查找匹配项。索引在这里有什么好处？

你是对的。没有任何优势，除了唯一索引也可以强制唯一性

> 索引是否仅在查询包含索引列时才有效？

基本上可以用于*查找*`order by`匹配的行，尽管如果包含索引列，索引也可用于帮助排序

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:24:55.487

只是为 Bohemian 的答案添加一些示例（并假设使用 SQL RDBMS）：

1.  Student(name) 上的索引 IX1 将有利于以下查询：

    `SELECT * FROM Student WHERE name = 'Bloggs';`

2.  同样，您需要一个索引，例如 Student(GPA) 上的 IX2

    `SELECT * FROM Student WHERE GPA between 1 and 2;`

3.  如果您同时拥有上述索引 IX1 和 IX2，则 SQL 将在以下查询中“选择”两者：

    `SELECT * FROM Student WHERE name = 'Bloggs' and GPA between 1 and 2;`

4.  仅使用索引中的字段的查询可以完全由索引提供服务（即，SQL 无需在内部“加入”回表或集群）。例如，下面将完全由 IX1 提供服务，因为名称在索引中。

    `SELECT name FROM Student WHERE name = 'Bloggs';`

5.  索引中必须有良好的“选择性”，SQL 才能使用该索引。例如，如果您的数据库中的每个人都有一个名称“Bloggs”，那么 SQL 很可能会绕过索引并改为扫描表。

# c# - 将一个组合框 selectedItem 传递给另一个表单构造函数返回 null 。为什么？

> ID：11980985
> 
> 赞同：1
> 
> 时间：2012-08-16T05:03:14.233
> 
> 标签：c#, winforms

我正在尝试将一个表单的组合框选择项调用到另一个表单构造函数。这样我就可以为其分配一些变量并将其用于其他目的。

包含 comboboxvalue 的表单是 Mode Form：

```
 public Mode()
    {
        InitializeComponent();
    }

    private void Mode_Load(object sender, EventArgs e)
    {

        DataSet ds = new DataSet();
        comboBox1.Focus();
        String query = "select [test_no],[test_name] from [Test]";
        ds = db.ExecuteDataSet(query);
        comboBox1.DisplayMember = "test_name";
        comboBox1.ValueMember = "test_no";
        comboBox1.DataSource = ds.Tables["tablename"];
        panel3.Controls.Add(comboBox1);
        panel3.Controls.Add(Runbutton);                 
    }

      private void Runbutton_Click_2(object sender, EventArgs e)
     {
         label3.Enabled = true;
         val = Convert.ToString(comboBox1.Text);
         Test test = new Test(val);
         Test test1 = new Test();
         test1.Activate();
         test1.Focus();
         this.Hide();
         test1.ShowDialog();  
     }

      private void comboBox1_SelectedIndexChanged_1(object sender, EventArgs e)
      {
          val = Convert.ToString(comboBox1.SelectedItem);

      } 
```

测试形式：代码

```
 string parentform;

    public Test()
    {
        InitializeComponent();
        RunFirst_Settings();
        UserLogin login = new UserLogin();
        login.Hide();
        login.Visible = false;
    }

     public Test(string Mode)
     {
         parentform = Mode;
     }

    private void Startbutton_Click(object sender, EventArgs e)
    {

        stopwatch.Start();
        timer1.Start();
        ts=new ThreadStart(ProcessStarted);
        th=new Thread(ts);                 
        th.Start();

    }

     private void ProcessStarted()
    {
        if (parentform != null)
        {
            // Here every time it returns a null value. Before it was 
            // showing the exact selectedItem of combobox in Mode form:
            MMTest(parentform);

        }

        else
        {
             //other code to be done

        }
  } 
```

现在我怎样才能得到组合框的确切 selectedItem ？有什么建议吗？如果我只在模式表单中的 Runbutton_Click_2() 中调用 Test(string Mode) 构造函数，它会显示空白表单，而不是实际的测试表单。

我的错误在哪里？我怎样才能纠正它以获得所需的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T05:35:11.617

在单击事件处理程序中，您在不同对象上调用参数化构造函数并显示来自另一个对象（test 和 test1）的表单。因此，test1 实例从未真正收到选定的项目文本。

编辑：

1.  替换`Test test1 = new Test();`为`Test test1 = new Test(val);`。
2.  在参数化构造函数中，`:this()`也添加调用默认构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T06:15:59.730

只要您将仅使用参数化构造函数（因为您需要该参数），请删除您的第一个构造函数`Test()`或将其设为私有，以确保您不会偶尔调用它。如果您将离开它 - 比使用丹麦解决方案（`: this()`），如果不是那么：

```
public Test(string Mode)
{
   InitializeComponent();
   RunFirst_Settings();
   UserLogin login = new UserLogin();
   login.Hide();
   login.Visible = false;

   parentform = Mode;
} 
```

# javascript - rake-pipeline 或 requirejs

> ID：11980991
> 
> 赞同：3
> 
> 时间：2012-08-16T05:04:37.030
> 
> 标签：javascript, ember.js, requirejs

我即将开始一个新的 emberjs 项目，我无法决定是使用 requirejs 还是 rake-pipeline。

ember 的建议似乎是使用 rake-pipeline。

有人对争论的任何一方有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T10:33:34.100

如果您想在页面加载后根据需要动态加载依赖项，那么 requirejs 是首选选项。

但是，如果在页面加载时加载所有脚本对您来说不是问题（javascript 的数量很少，或者仅需要大量 javascript 来呈现内容），那么 rails 资产管道为您减少了很多样板文件，因为即使你使用 require js 你最终将不得不使用 r.js 编译器将所有依赖项捆绑到一个脚本中。Rails 在幕后透明地完成所有这些连接和缩小，而您根本无需做任何事情。使用 rails 资产管道可以为您简化滚动部署，因为在开发脚本中，所有脚本都作为单独的文件提供而无需缩小，而在生产中脚本则作为缩小和连接的文件提供。这不需要您在每次更改时运行任何构建脚本或优化器，并且您不需要 甚至不必修改 HTML 文件中的任何内容。只要您遵循 sprockets 规范并指定依赖项（在 requirejs 的情况下您也必须这样做），一切都可以开箱即用。

此外，Rails 资产管道不会将您的客户端应用程序绑定到 Rails 平台，因为 sprockets（在 Rails 管道后面使用的依赖管理器）可以在没有 Rails 的情况下独立使用。

但是，如果 AMD 兼容性对您很重要（例如，您计划在 NodeJS 服务器和客户端上使用相同的代码，或者正在创建可分发的库），那么 requirejs 是一个不错的选择。

您还可以查看[https://github.com/jwhitley/requirejs-rails/](https://github.com/jwhitley/requirejs-rails/)，它尝试将 requirejs 集成到 rails 管道中。在采用这种方法之前，请确保您对 requirejs 和 rails 有一定程度的熟悉。

# perl - Perl 非英文字符

> ID：11980994
> 
> 赞同：0
> 
> 时间：2012-08-16T05:05:10.663
> 
> 标签：perl, encoding

请参阅这段 perl 代码：

```
#!/usr/bin/perl -w -CS

use feature 'unicode_strings';

open IN, "<", "wiki.txt";
open OUT, ">", "wikicorpus.txt";

binmode( IN,  ':utf8' );
binmode( OUT, ':utf8' );

## Condition plain text English sentences or word lists into a form suitable for constructing a vocabulary and language model

while (<IN>) {

  # Remove starting and trailing tags (e.g. <s>)
  # s/\<[a-z\/]+\>//g;

  # Remove ellipses 
  s/\.\.\./ /g;

  # Remove unicode 2500 (hex E2 94 80) used as something like an m-dash between words
  # Unicode 2026 (horizontal ellipsis)
  # Unicode 2013 and 2014 (m- and n-dash)
  s/[\x{2500}\x{2026}\x{2013}\x{2014}]/ /g;

  # Remove dashes surrounded by spaces (e.g. phrase - phrase)
  s/\s-+\s/ /g;

  # Remove dashes between words with no spaces (e.g. word--word)
  s/([A-Za-z0-9])\-\-([A-Za-z0-9])/$1 $2/g;

  # Remove dash at a word end (e.g. three- to five-year)
  s/(\w)-\s/$1 /g;

  # Remove some punctuation
  s/([\"\?,;:%???!()\[\]{}<>_\.])/ /g;

  # Remove quotes
  s/[\p{Initial_Punctuation}\p{Final_Punctuation}]/ /g;

  # Remove trailing space
  s/ $//;

  # Remove double single-quotes 
  s/'' / /g;
  s/ ''/ /g;

  # Replace accented e with normal e for consistency with the CMU pronunciation dictionary
  s/?/e/g;

  # Remove single quotes used as quotation marks (e.g. some 'phrase in quotes')
  s/\s'([\w\s]+[\w])'\s/ $1 /g;

  # Remove double spaces
  s/\s+/ /g;

  # Remove leading space
  s/^\s+//;

  chomp($_);

  print OUT uc($_) . "\n";
#  print uc($_) . " ";
} print OUT "\n"; 
```

第 49 行似乎有一个非英文字符，即 line `s/?/e/g;`。所以当我运行这个时，警告出来了`Quantifier follows nothing in regex;`。

我该如何处理这个问题？如何让perl识别字符？我必须用 perl 5.10 运行这段代码。

另一个小问题是第一行中的“-CS”是什么意思。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:16:31.210

我认为您的问题是您的编辑器不处理 unicode 字符，因此该程序甚至在进入 perl 之前就被丢弃了，并且由于这显然不是您的程序，它可能在它到达您之前就被丢弃了。

在整个工具链正确处理 unicode 之前，您必须小心以保留它们的方式对非 ascii 字符进行编码。这是一种痛苦，不存在简单的解决方案。请查阅您的 perl 手册，了解如何安全地嵌入 unicode 字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T06:09:19.807

根据错误行之前的注释行，要替换的字符是带重音的“e”；大概意思是带有尖锐重音的e：“é”。假设您的输入是 Unicode，它可以在 Perl 中表示为`\x{00E9}`. 另见[http://www.fileformat.info/info/unicode/char/e9/index.htm](http://www.fileformat.info/info/unicode/char/e9/index.htm)

我猜您从服务器上的网页复制/粘贴了此脚本，该服务器未正确配置为显示所需的字符编码。另请参阅[http://en.wikipedia.org/wiki/Mojibake](http://en.wikipedia.org/wiki/Mojibake)

# php - __get 和 __set 未按预期运行

> ID：11980996
> 
> 赞同：0
> 
> 时间：2012-08-16T05:05:16.287
> 
> 标签：php

```
<?php
class BaseClass {
  protected $data = array("foo" => 0, "bar" => 0, "baz" => 0);

  public function __set($name, $value) {
    if( array_key_exists($name, $this->data)){
      $func = "set_$name";
      return call_user_func_array(array($this,$func),array($value));
    }
  }

  public function __get($name) {
    if ( array_key_exists($name, $this->data)){
      $func = "get_$name";
      return call_user_func_array(array($this,$func),array());
    }
  }

  public function __call($method, $args) {
    if (method_exists($this,$method)) {
      return call_user_func_array(array($this,$method),$args);
    }

    if (substr($method, 0, 4) == 'set_'){
      $var_name = substr($method, 4);
      if (!(array_key_exists($var_name, $this->data))){ 
        return FALSE;
      }
      $this->data[$var_name] = $args[0];
      return TRUE;
    }

    if (substr($method, 0, 4) == 'get_'){
      $var_name = substr($method, 4);
      if (!(array_key_exists($var_name, $this->data))){ 
        return FALSE;
      }
      return $this->data[$var_name];
    }
  }
}

class SubClass extends BaseClass {
  protected $baz_changed = FALSE;

  public function set_baz($value) {
    if ($value != $this->baz){
      print "\n\nthis->data BEFORE SET:  ";
      print_r($this->data);
      print "\n\nthis->baz:  ";
      print_r($this->baz);
      print "\n\nPASSED baz:  ";
      print_r($value);
      $this->baz = $value;
      print "\n\nbaz AFTER SET:  ";
      print_r($this->baz); // appears it was set 
      print "\n\nDATA ARRAY:  ";
      print_r($this->data);  // but it wasn't ... what gives? 
      $this->baz_changed = TRUE;
    }
  }
}

$sc = new SubClass();
$sc->foo = 1;
print "\n\$sc->foo = $sc->foo\n";
$sc->baz = 5;
print "\$sc->baz = $sc->baz\n";
?> 
```

我得到以下结果并不像我预期的那样：

```
 $sc->foo = 1

 this->data BEFORE SET:  Array (
     [foo] => 1
     [bar] => 0
     [baz] => 0 )

 this->baz:  0

 PASSED baz:  5

 baz AFTER SET:  5

 DATA ARRAY:  Array (
     [foo] => 1
     [bar] => 0
     [baz] => 0 ) $sc->baz = 5 
```

如您所见，似乎 baz 已设置，但从未在数据数组中设置。谁能解释为什么以及如何解决这个问题？

编辑：修复了结果的格式并为此代码部分添加了更多上下文，因为 stackoverflow 抱怨我没有足够的。

编辑：刚刚注意到最后它说 $sc->baz = 5。但是数据数组没有更新。这不是预期的，我宁愿更新 baz 的数据数组版本。而不是在 SubClass 中创建新的实例变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T05:23:38.793

您正在尝试递归调用`__set`，而 PHP 明确禁止这样做。

*   在`__set`中，您调用`set_baz`
*   在`set_baz`，你做`$this->baz = 5`
*   这将调用`__set`，除非 PHP 阻止这种情况发生。如果没有，您的程序将永远不会结束。

`__set`如果您已经在 内，则无法触发`__set`。相反，您正在动态定义一个新的成员变量，该成员变量的调用`$this->baz`方式就像`__set`不存在一样。如果你是`var_dump`你的对象，你会发现它现在同时包含`$data`和`$baz`成员。

在内部`set_baz`，您需要显式写入`$this->data`. 您不能写入`$this->baz`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T05:25:13.997

它的行为正确，当你这样做`$sc->baz = 5;`时发现 set_baz 方法在那里并执行这一行`$this->baz = $value;`并设置 baz 属性的值

假设如果 __get 和 __set 也在课堂上工作，那么你如何在课堂上访问 $this->data ？

# java - 动态儿童放置在android可扩展列表视图中的各个组中

> ID：11980999
> 
> 赞同：1
> 
> 时间：2012-08-16T05:05:50.590
> 
> 标签：java, android, xml-parsing, expandablelistview

我正在android中开发一个客户端-服务器项目。我需要从url解析xml并将其放在Expandablelistview中。当我试图根据来自服务器的数据将孩子放在每个组中时，就会出现问题。我的代码只将第一个子值放在第一组中，第二个子值放在第二组中。

我需要将“payment_method”和“total”放在第一组中，名字和姓氏放在第二组中（例如：Groupname:OrderInfo,customerInfo, Childname(OrderInfo):payment_method,total, Childname(CustomerInfo):firstname,lastname ).我的代码可以将 Childname(OrderInfo) 放在 OrderInfo 组中，但是我希望在单击 customerInfo 组时需要，名字，姓氏也显示 customerInfo 组。请帮助我怎么做。这是我的代码：

```
public class SingleMenuItemActivity extends ExpandableListActivity {

static final String KEY_ARTIST = "payment_method";
static final String KEY_FNAME = "firstname";
    static final String KEY_LNAME = "lastname";
static final String KEY_DURATION = "total";
static final String OrderInfo = "OrderInfo";
static final String CustomerInfo = "CustomerInfo";
    private static final String GroupID = "GroupID";
@SuppressWarnings("unchecked")
public void onCreate(Bundle savedInstanceState) {
    try{
         super.onCreate(savedInstanceState);
         setContentView(R.layout.particular);

    SimpleExpandableListAdapter expListAdapter =
        new SimpleExpandableListAdapter(
                this,

                createGroupList(),              // Creating group List.
                R.layout.group_row, 

              // Group item layout XML.
                new String[] { "GroupID"},  // the key of group item.e
                new int[] { R.id.order},

                // ID of each group item.-Data under the key goes into this TextView.
                createChildList(),              // childData describes second-level entries.
                R.layout.single_list_item,  
              //  new String[] {"KEY_ARTIST"},  
               // new int[] { R.id.payment_label}  // Keys in childData maps to display.
                  // Layout for sub-level entries(second level).
               new String[] {"KEY_ARTIST","KEY_DURATION","KEY_FNAME","KEY_LNAME"},  
               new int[] { R.id.name_label,R.id.cost_label,R.id.firstname,R.id.lastname}// Keys in childData maps to display.
             //   new int[] { R.id.payment_label,R.id.total_label}     // Data under the keys above go into these TextViews.
            );
        setListAdapter( expListAdapter );       // setting the adapter in the list.

    }catch(Exception e){
        System.out.println("Errrr +++ " + e.getMessage());
    }
}

 private List createGroupList() {

    Log.d(TAG, "Adding groups values");
    List<HashMap<String, String>> list = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> statusMap = new HashMap<String, String>();
    statusMap.put(GroupID, "OrderInfo");
    list.add(statusMap);
    HashMap<String, String> usersMap = new HashMap<String, String>();
    usersMap.put(GroupID, "CustomerInfo");
    list.add(usersMap);
    Log.d(TAG, "Adding groups values successfull");
    return list;
   }

/* creatin the HashMap for the children */
@SuppressWarnings("unchecked")
private List createChildList() {

    ArrayList result = new ArrayList();
    for( int i = 0 ; i < 1 ; ++i ) { // this -15 is the number of groups(Here it's fifteen)
      /* each group need each HashMap-Here for each group we have 3 subgroups */
      ArrayList secList = new ArrayList();
      for( int n = 0 ; n < 1 ; n++ ) {
        HashMap child = new HashMap();

       String s= getIntent().getStringExtra("payment_method");
       String s1= getIntent().getStringExtra("total");

     child.put( "KEY_ARTIST", s);
     child.put( "KEY_DURATION", s1);

        secList.add( child);
      }
     result.add( secList );
    }
    return result;
}
public void  onContentChanged  () {
    System.out.println("onContentChanged");
    super.onContentChanged();
}
/* This function is called on each child click */
public boolean onChildClick( ExpandableListView parent, View v, int groupPosition,int childPosition,long id) {
    System.out.println("Inside onChildClick at groupPosition = " + groupPosition +" Child clicked at position " + childPosition);
    return true;
}

/* This function is called on expansion of the group */
public void  onGroupExpand  (int groupPosition) {
    try{
         System.out.println("Group exapanding Listener => groupPosition = " + groupPosition);
    }catch(Exception e){
        System.out.println(" groupPosition Errrr +++ " + e.getMessage());
    }
}
 } 
```

我的疑问是如何将第一个子值放置在第一组中，第二个子值放置在第二组中。第一个子值放置在第一组中已成功完成......但我不能放置第二个子值第二组。如果我必须单击第二组意味着它被强制关闭。请帮助我。怎么做。