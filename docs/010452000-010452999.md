# StackOverflow 问答 10452000-10452999

# javascript - 当用户输入正确的文本时，图像会翻转/更改

> ID：10452000
> 
> 赞同：0
> 
> 时间：2012-05-04T15:42:49.503
> 
> 标签：javascript, jquery

我正在设计一个语言学习网站。当有人在文本框中输入文本时，我想拥有它，它开始滚动某些图像。看看我下面的示例

[http://imageshack.us/photo/my-images/827/hiraganaquiz2.jpg/](http://imageshack.us/photo/my-images/827/hiraganaquiz2.jpg/)

因此，当用户输入“na”时，第一个符号会突出显示，如您在我的示例中看到的那样。当他输入“ma”时，第二个符号应突出显示/翻转。我希望所有符号在输入正确文本时保持翻转。因此，如果用户键入“nama”，前两个符号应翻转以表明他们正确，一旦输入最后一个正确的文本，所有三个符号都将翻转。

这能做到吗？我会接受高级和简单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:54:58.677

在更改输入框时，您可以执行以下操作：（完全未经测试）

```
var parts = ["na", "ma", "blah"];
var start = 0;
for (var i = 0; i < parts.length; i++) {
  var currentPart = parts[i];
  var $img = $(".images img:nth-child(" + i + ")");
  var end = start + currentPart.length;

  if (str.length >= end && str.slice(start, start + currentPart.length) == currentPart) {
    $img.addClass("highlight");
  } else {
    $img.removeClass("highlight");
  }
  start += currentPart.length;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:27:41.767

```
$(document).ready(function() {
    var text = ['na', 'ma', 'ba'];

    $("#elemID").on('keyup', function() {
        var typed = this.value;
        $.each(text, function(index, item) {
            if (typed.indexOf(item)!=-1) {
                $('li', 'ul').eq(index).find('img').addClass('correct');
            }else{
                $('li', 'ul').eq(index).find('img').removeClass('correct');
            }
        });
    });
}); 
```

[小提琴](http://jsfiddle.net/PT523/1/)

**编辑：**

在页面顶部的`<head>`部分中，添加：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

然后将代码包装在 document.ready 中，请参阅上面的编辑代码以了解如何做到这一点？

# c++ - 错误处理语句是如何格式化的？

> ID：10452006
> 
> 赞同：0
> 
> 时间：2012-05-04T15:43:14.103
> 
> 标签：c++, c, error-handling

如果遇到错误，我有一些函数会返回 1。每个函数调用一个较低级别的函数，这样如果较低级别的函数返回 1，则原始函数也返回 1。因此，错误以这种方式向上传递。

这是其中一个功能的高度删节版本：

```
if (low_level_function()) {
    [do stuff]
    return 1;
}
[do other stuff]
return 0; 
```

我应该改为声明一个错误变量，将 low_level_function() 的结果分配给它，然后在 if() 语句中使用错误变量吗？换句话说：

```
int error = low_level_function();
if (error) {
    [do stuff]
    return 1;
}
[do other stuff]
return 0; 
```

或者还有另一种更好的方法吗？我以前从未编写过代码来解释错误，所以我在这里的经验相当有限。

编辑：我重新格式化了函数以更好地传达我的代码的性质。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:18:42.493

One reason to prefer the second form is when you don't have anything to do in the error case and you want to avoid the stair-step effect of nested if statements.

```
int error_flag = low_level_function();
if (!error_flag)
    error_flag = second_function();
if (!error_flag)
    error_flag = third_function();
return error_flag; 
```

Of course for that specific example you can really simplify by using the short-circuiting property of `||`:

```
return low_level_function() || second_function() || third_function(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:50:08.207

你也可以用这个，

```
return low_level_function(); 
```

If **low_level_function()** returns nonzero on error and zero on success. Or

```
return low_level_function()>0? 1 : 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:52:07.423

I dont see the difference between the two approaches above.

I would recomment using [exception](http://blogs.msdn.com/b/brada/archive/2005/03/27/402801.aspx), much more cleaner approach. why the reinvent the wheel? You can either use standard exception or implement custome exception [like](http://www.codeproject.com/Tips/90646/Custom-exceptions-in-C-NET)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T18:43:02.157

Although it it's s side comment I´ll be first stateing that I prefer **one** exit for any method.

One major pro tof his construction is the possiblity to only have the need for a error-logging statement at one place.

Also it's very easy to add tracing logs for debugging porpose.

So following this idea I'd propose the following

```
#define OK (0)

int mid_level_func(....)
{
  log_entry(...);

  int rc = OK

  {
    ...

    if ((rc = low_level_func1(...)))
      goto lblExit;

    ...

    if ((rc = low_level_func2(...)))
      goto lblExit;

    ...

    lblExit:
    ;
  }

  if (OK != rc)
    log_error(rc, ...);

  log_exit(...);

  return rc;
} 
```

For the ones that insist on `goto` being 'evil' the following variation on the scheme above might help:

```
#define OK (0)

int mid_level_func(....)
{
  log_entry(...);

  int rc = OK

  do 
  {
    ...

    if ((rc = low_level_func1(...)))
      break;

    ...

    if ((rc = low_level_func2(...)))
      break;

    ...

  } while (0);

  if (OK != rc)
    log_error(rc, ...);

  log_exit(...);

  return rc;
} 
```

# android - Android 市场发布：'android:icon' 属性：属性不是字符串值

> ID：10452008
> 
> 赞同：1
> 
> 时间：2012-05-04T15:43:17.933
> 
> 标签：android, android-manifest, google-play

我正在尝试将应用程序发布到 Android Market，我收到以下错误：

> W/ResourceType(16964)：获取资源编号 0x01030006 的值时没有已知包 获取“android：icon”属性时出错：属性不是字符串值

这是 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.prezzofelice.android"
    android:versionCode="6"
    android:versionName="1.0.05"
    >

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" />

    <!-- Prezzofelice -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <!-- C2DM -->
    <permission android:name="it.prezzofelice.android.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="it.prezzofelice.android.permission.C2D_MESSAGE" />    
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />

    <!-- Flurry -->
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@android:style/Theme.NoTitleBar"
        android:theme="@style/AppTheme"
        android:name=".MainApplication"
        >

        <uses-library android:name="com.google.android.maps" />

        <activity
            android:name=".SplashActivity"
            android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
            android:launchMode="singleInstance"
            android:label="@string/app_name"
            >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity
            android:name=".MainActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".deals.DealsListActivity"
            android:theme="@style/AppTheme"
            android:configChanges="orientation|keyboardHidden"
            android:label="@string/app_name"
            />

        <activity
            android:name=".deals.DealDetailsActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".deals.CityListActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".deals.BuyActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".coupons.CouponListActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".profile.ProfileActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".deals.DealMapActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".profile.LoginRegisterActivity"
            android:theme="@style/AppTheme"
            android:launchMode="singleTop"
            android:label="@string/app_name"
            />

        <activity
            android:name=".profile.LoginActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".profile.RegisterActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <activity
            android:name=".coupons.CouponDetailsActivity"
            android:theme="@style/AppTheme"
            android:label="@string/app_name"
            />

        <service
            android:name=".BrowserService"
            />

        <receiver
            android:name=".c2dm.C2DMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND"
            >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <category android:name="it.prezzofelice.android" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
                <category android:name="it.prezzofelice.android" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>            
        </receiver>

    </application>

</manifest> 
```

我已经尝试了这两种方法，但都没有运气：

[尝试上传到 Android Market 时出现“获取 'android:icon' 属性时出错：属性不是字符串值”](https://stackoverflow.com/questions/7474526/error-getting-androidicon-attribute-attribute-is-not-a-string-value-when-t)

*   我已经用“app_name”字符串定义了一个 values/strings.xml。

*   我用从 drawable-hdpi 复制的 ic_launcher.png 创建了一个“drawable”文件夹

有什么提示吗？

谢谢，问候毛里齐奥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:03:24.373

我会尝试清理项目并构建一个新的 apk。

在 Eclipse 中：`Click Project > Clean.. > Select your project and click Ok`

我不知道您为什么将样式放入应用程序标记中的 android:label 属性中。据我所知，这应该是@string/app_name。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-25T08:27:46.550

由于另一个原因，我遇到了同样的问题。

事实上，我已经像这样将一些值设置为 null

```
<activity
    android:name=".MyActivity_"
    android:label="@null"
    android:launchMode="singleTask"
    android:screenOrientation="portrait" >
</activity> 
```

我修复了将所有“@null”替换为“”的问题。

```
<activity
    android:name=".MyActivity_"
    android:label=""
    android:launchMode="singleTask"
    android:screenOrientation="portrait" >
</activity> 
```

应用程序的行为是相同的，但在第一种情况下，我们可以发布，在第二种情况下，我们不能

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-27T08:27:25.270

使用drawable而不是mipmap，不知道为什么。

```
<application
        android:name="com.txxx.eApplication"
        android:allowBackup="false"
        android:icon="@drawable/ic_launcher"
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T16:07:54.830

您的应用程序是否已本地化为多种语言？如果是这样，那么您需要确保在默认`res/strings.xml`文件中正确定义了字符串。

如上所述，清理/重新启动 Eclipse 有时也可以解决问题：)

# wpf - 单选按钮 wpf 绑定

> ID：10452009
> 
> 赞同：1
> 
> 时间：2012-05-04T15:43:47.417
> 
> 标签：wpf, radio-button, master-detail

我有一个主从 wpf 应用程序。“master”是一个 datagrid ，“detail”是两个单选按钮。根据行选择，在“详细信息”部分中选中单选按钮。

我正在使用 inttoboolean 转换器通过以下方式绑定我的单选按钮。xml：

```
<StackPanel Margin="2">
  <RadioButton Margin="0,0,0,5" Content="In Detail" IsChecked="{Binding Path=itemselect.OutputType, Converter ={StaticResource radtointOTSB}, ConverterParameter= 0}"/>
  <RadioButton Content="In Breif" IsChecked="{Binding Path=itemselect.OutputType, Converter ={StaticResource radtointOTSB}, ConverterParameter= 1}"/>
</StackPanel> 
```

在视图模型中：

```
public class radtointOTSB : IValueConverter
{
    object IValueConverter.Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        int OTint = Convert.ToInt32(value);
        if (OTint == int.Parse(parameter.ToString()))
            return true;
        else
            return false;
    }

    object IValueConverter.ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return parameter;
    }
} 
```

我的实现适用于数据网格中的前几个选择。突然之间，我的单选按钮都没有被选中。

我不知道为什么会发生这种情况，欢迎提出任何建议。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T21:18:11.317

搜索绑定多个 RadioButtons 的问题 - 那里有足够多的投诉。基本上绑定不会收到 False 的值，因为它没有被传递给 Dependency Property..etc 等

尝试使用以下类而不是常规 RadioButton，绑定到 IsCheckedExt，因为它会强制更新复选框的 IsChecked 值。

```
public class RadioButtonExtended : RadioButton
{
    public static readonly DependencyProperty IsCheckedExtProperty =
        DependencyProperty.Register("IsCheckedExt", typeof(bool?), typeof(RadioButtonExtended),
                                    new FrameworkPropertyMetadata(false, FrameworkPropertyMetadataOptions.Journal | FrameworkPropertyMetadataOptions.BindsTwoWayByDefault, IsCheckedRealChanged));

    private static bool _isChanging;

    public RadioButtonExtended ()
    {
        Checked += RadioButtonExtendedChecked;
        Unchecked += RadioButtonExtendedUnchecked;
    }

    public bool? IsCheckedExt
    {
        get { return (bool?)GetValue(IsCheckedExtProperty); }
        set { SetValue(IsCheckedExtProperty, value); }
    }

    public static void IsCheckedRealChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        _isChanging = true;
        ((RadioButtonExtended)d).IsChecked = (bool)e.NewValue;
        _isChanging = false;
    }

    private void RadioButtonExtendedChecked(object sender, RoutedEventArgs e)
    {
        if (!_isChanging)
            IsCheckedExt = true;
    }

    private void RadioButtonExtendedUnchecked(object sender, RoutedEventArgs e)
    {
        if (!_isChanging)
            IsCheckedExt = false;
    }
} 
```

# c# - 找不到类型或命名空间名称“名称”

> ID：10452010
> 
> 赞同：0
> 
> 时间：2012-05-04T15:43:52.967
> 
> 标签：c#

找不到类型或命名空间名称“问题”（您是否缺少 using 指令或程序集引用？）

我花了一上午的时间阅读有同样错误的线程，但没有发现任何似乎适用的东西。引用似乎设置正确。我尝试添加“使用 TestProject.Trivia.Web”，但随后我得到“类型或命名空间名称 'Web' 不存在于命名空间 'TestProject.Trivia' 中（您是否缺少程序集引用？）。

在一个项目中，我有这个 cs 文件：

```
using System.Runtime.Serialization;
using System.Xml.Serialization;

namespace TestProject.Trivia
{
[DataContract]
public class Course
{
    [XmlAttribute, DataMember]
    public string Name { get; set; }

    [XmlAttribute, DataMember]
    public int Id { get; set; }

    [XmlElement, DataMember]
    public Question [] Questions { get; set; }
} 
```

}

它引用了类 TestProject.Trivia.Web，该类有一个带有问题定义的 javascript 文件（我在解决方案的其余部分中毫无问题地引用了该文件）。

任何想法将不胜感激...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:46:35.233

定义 Question 是一个 javascript 文件，不会在 .Net 中创建 Question 对象，因此您不能在 C# 代码中将其用作 .Net 对象。

做一个课堂问题并使用它。

```
public class Question
{
    ...
} 
```

# optimization - F#“for循环”优化

> ID：10452011
> 
> 赞同：8
> 
> 时间：2012-05-04T15:43:55.947
> 
> 标签：optimization, f#, for-loop

代码示例：

```
let foo1 (arr : int[]) = 
    for i = 0 to arr.Length-1 do
        arr.[i] <- i

let foo2 (arr : int[]) = 
    for i in [0..arr.Length-1] do
        arr.[i] <- i 
```

我认为这些功能应该彼此等效（在性能方面）。但是如果我们查看 IL 列表，我们会看到：

第一个函数，15 行，没有动态分配，没有`try`操作符，没有虚拟调用：

```
IL_0000: nop
IL_0001: ldc.i4.0
IL_0002: stloc.0
IL_0003: br.s IL_0011
// loop start (head: IL_0011)
    IL_0005: ldarg.0
    IL_0006: ldloc.0
    IL_0007: ldloc.0
    IL_0008: stelem.any [mscorlib]System.Int32
    IL_000d: ldloc.0
    IL_000e: ldc.i4.1
    IL_000f: add
    IL_0010: stloc.0

    IL_0011: ldloc.0
    IL_0012: ldarg.0
    IL_0013: ldlen
    IL_0014: conv.i4
    IL_0015: blt.s IL_0005
// end loop

IL_0017: ret 
```

第二个 - 将近 100 行，大量分配/解除分配，虚函数调用，大量`try`/ `Dispose`：

```
IL_0000: nop
IL_0001: ldc.i4.0
IL_0002: ldc.i4.1
IL_0003: ldarg.0
IL_0004: ldlen
IL_0005: conv.i4
IL_0006: ldc.i4.1
IL_0007: sub
IL_0008: call class [mscorlib]System.Collections.Generic.IEnumerable`1<int32> [FSharp.Core]Microsoft.FSharp.Core.Operators/OperatorIntrinsics::RangeInt32(int32, int32, int32)
IL_000d: call class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0> [FSharp.Core]Microsoft.FSharp.Core.Operators::CreateSequence<int32>(class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0>)
IL_0012: call class [FSharp.Core]Microsoft.FSharp.Collections.FSharpList`1<!!0> [FSharp.Core]Microsoft.FSharp.Collections.SeqModule::ToList<int32>(class [mscorlib]System.Collections.Generic.IEnumerable`1<!!0>)
IL_0017: stloc.0
IL_0018: ldloc.0
IL_0019: unbox.any class [mscorlib]System.Collections.Generic.IEnumerable`1<int32>
IL_001e: callvirt instance class [mscorlib]System.Collections.Generic.IEnumerator`1<!0> class [mscorlib]System.Collections.Generic.IEnumerable`1<int32>::GetEnumerator()
IL_0023: stloc.1
.try
{
    // loop start (head: IL_0024)
        IL_0024: ldloc.1
        IL_0025: callvirt instance bool [mscorlib]System.Collections.IEnumerator::MoveNext()
        IL_002a: brfalse.s IL_003e

        IL_002c: ldloc.1
        IL_002d: callvirt instance !0 class [mscorlib]System.Collections.Generic.IEnumerator`1<int32>::get_Current()
        IL_0032: stloc.3
        IL_0033: ldarg.0
        IL_0034: ldloc.3
        IL_0035: ldloc.3
        IL_0036: stelem.any [mscorlib]System.Int32
        IL_003b: nop
        IL_003c: br.s IL_0024
    // end loop

    IL_003e: ldnull
    IL_003f: stloc.2
    IL_0040: leave.s IL_005b
} // end .try
finally
{
    IL_0042: ldloc.1
    IL_0043: isinst [mscorlib]System.IDisposable
    IL_0048: stloc.s 4
    IL_004a: ldloc.s 4
    IL_004c: brfalse.s IL_0058

    IL_004e: ldloc.s 4
    IL_0050: callvirt instance void [mscorlib]System.IDisposable::Dispose()
    IL_0055: ldnull
    IL_0056: pop
    IL_0057: endfinally

    IL_0058: ldnull
    IL_0059: pop
    IL_005a: endfinally
} // end handler

IL_005b: ldloc.2
IL_005c: pop
IL_005d: ret 
```

我的问题是为什么 F# 编译器使用如此复杂的代码`foo2`？为什么它使用 an`IEnumerable`来实现如此微不足道的循环？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T15:48:58.987

在第二个示例中，如果您使用范围表达式，它将被转换为正常`for`循环：

```
let foo2 (arr : int[]) = 
    for i in 0..arr.Length-1 do
        arr.[i] <- i 
```

并变得等价于`foo1`。

我在 F# 语言规范中引用[了第 6.3.12 节范围表达式](http://research.microsoft.com/en-us/um/cambridge/projects/fsharp/manual/spec.html#_Toc321997065)：

> for var in expr1 .. expr2 do expr3 done 形式的序列迭代表达式有时被详细说明为简单的 for 循环表达式（第 6.5.7 节）。

但是，您的第二个示例更像是：

```
let foo2 (arr : int[]) = 
    let xs = [0..arr.Length-1] (* A new list is created *)
    for i in xs do
        arr.[i] <- i 
```

您在其中明确创建了一个新列表。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-04T15:49:04.790

您看到的是使用基于索引的枚举和`IEnumerable`基于枚举（或 C# 术语`for`vs `foreach`）之间的标准区别。

在第二个示例中，表达式`[0..arr.Length-1]`正在创建一个集合，并且 F#`IEnumerable<T>`用于枚举值。这种枚举风格的一部分涉及使用`IEnumerator<T>`which implements `IDisposable`。生成您所看到的`try / finally`块以确保`IDisposable::Dispose`在枚举结束时调用该方法，即使在遇到异常时也是如此。

F# 能否将第二个示例优化为第一个示例并避免所有额外开销？他们有可能进行这种优化。本质上是查看范围表达式，而不仅仅是一个简单的数字范围，因此会生成等效`for`代码。

F# 是否应该优化第二个示例。我的投票是否定的。像这样的功能通常从外部看起来微不足道，但实际上实现它们，更重要的是维护它们，可能会相当昂贵。精明的用户总是可以将他们的代码转换回标准`for`版本并避免`IEnumerable<T>`开销（如果分析器发现这是一个问题）。不实施优化可以让 F# 团队腾出时间来实施其他很棒的功能。

# mysql - MySQL UTF-8 编码

> ID：10452013
> 
> 赞同：1
> 
> 时间：2012-05-04T15:43:59.270
> 
> 标签：mysql, utf-8

我对我的数据库的字符编码感到非常困惑。

我用 UTF8_general_ci 配置了数据库。但是如果我尝试用西班牙语保存一些东西，比如“león”，内容就会被破坏，然后修复它我必须在保存之前使用 utf8_decode，当我阅读时我使用 utf8_encode。

那么西班牙语是正确的。

现在我有俄罗斯用户用西里尔文写作，他的内容被宠坏了（用???????）

我想如果我不使用 utf8_decode 西里尔语将是正确的（或者不是我不知道），但西班牙语将不正确。

我该怎么做才能正确保存所有语言？我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:54:35.727

```
 http://stackoverflow.com/questions/367711/what-is-the-best-collation-to-use-for-mysql-with-php 
```

mysql 字符集 -----------------

```
 http://dev.mysql.com/doc/refman/5.0/en/charset-unicode-sets.html 
```

您可以指定更具体的 UTF-8 字符集，例如 'utf8_swedish_ci'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:47:07.130

尝试作为第一个语句运行这个 sql 查询：

```
set names 'utf8'; 
```

这将 MySQL 连接的编码设置为 UTF-8 并防止双重编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T15:48:06.180

检查您的客户端是否执行

```
SET NAMES 'utf8'; 
```

当它开始一个会话时。检查所有表和表中的所有 char 字段是否使用 utf-8 编码（它们的编码可能与数据库编码不同）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T15:48:22.137

我使用一个脚本将数据库中的所有表转换为 utf8 字符集。试试看：

```
<?
$dbhost = 'localhost';
$dbuser = 'root';
$dbpass = '';
$dbname = 'db_name';
$collation = "utf8_general_ci";
$charset = "utf8";

mysql_connect($dbhost,$dbuser,$dbpass);
mysql_select_db($dbname);

mysql_query("ALTER DATABASE $dbname COLLATE $collation");
$result = mysql_query("SHOW TABLES");
while ($row = mysql_fetch_row($result)) {
mysql_query("ALTER TABLE $row[0] COLLATE $collation");
$result1 = mysql_query("SHOW COLUMNS FROM $row[0]");
while ($row1 = mysql_fetch_assoc($result1)) {
if (preg_match('~char|text|enum|set~', $row1["Type"])) {
mysql_query("ALTER TABLE $row[0] MODIFY $row1[Field] $row1[Type] CHARACTER SET $charset");
mysql_query("ALTER TABLE $row[0] MODIFY $row1[Field] $row1[Type] COLLATE $collation DEFAULT '$row1[Default]'");
echo $row[0] . "->" . $row1[Field] . "->" . $row1[Type] . " is now UTF8
";
}
}
}
mysql_free_result($result);

?> 
```

# php - PDO 类 bindParam() 不起作用

> ID：10452019
> 
> 赞同：1
> 
> 时间：2012-05-04T15:44:41.493
> 
> 标签：php

我正在尝试使用 bindParam() 编辑 INSERT 查询。

这是我的代码。

```
public function addProduct()
{
   $query = "INSTERT INTO producten (name, model, price, image, description) 
   VALUES (:name, :model, :price, :image, :description)";

   $stmt = $this->dbh->prepare($query);

   $stmt->bindParam(":name", $_POST['name']);
   $stmt->bindParam(":model", $_POST['model']);
   $stmt->bindParam(":price", $_POST['price']);
   $stmt->bindParam(":image", $_FILES['file']['name']);
   $stmt->bindParam(":description", $_POST['description']);

    print_r($stmt);
} 
```

$dbh 对象在类的构造函数中创建；

```
public function __construct()
    {
       $user = "root";
       $pass = "";

       $this->dbh = new \PDO('mysql:host=localhost;dbname=projectname', $user, $pass);

    } 
```

$stmt->bindParam() 在测试时返回 true，但不会替换给定的参数。

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:03:27.700

关于准备好的语句的整个想法是，您不需要将原始参数注入查询中来组合一些带有转义数据的 SQL 代码。相反，您使用简单的占位符并将数据保存在其他地方。当需要运行查询时，您向数据库引擎提供两条数据（带有占位符的 SQL 查询以及与这些占位符对应的值），其余的由数据库自己处理。

所以：

1.  PDO 不会*编辑*您的查询。它不需要。
2.  您仍然需要*运行*查询。“准备”阶段只是将占位符与变量链接起来，因此可以在查询运行时从适当的位置读取该值。
3.  您实际上可以使用不同的参数准备一次并运行多次。

*注意：一些 PDO 驱动程序不允许常规的预处理语句（例如，因为底层数据库引擎不完全支持它们）。在这种情况下，PDO 将模拟准备好的语句并实际执行良好的旧转义。但是由于 PDO 是一个抽象层，所以这不应该改变您处理它的方式。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:05:14.803

好吧，你有一个错字（`INSTERT`）。下次如何避免？

在构造 PDO 对象时，请确保`PDO::ATTR_ERRMODE`is `PDO::ERRMODE_EXCEPTION`，这将导致 PDO`PDOException`在错误时抛出 s。执行以下操作：

```
$this->dbh = new \PDO('mysql:host=localhost;dbname=projectname', $user, $pass, array(
                                                                                    PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION
                                                                               )); 
```

或使用`PDO::setAttribute()`：

```
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
```

* * *

这样做是因为它导致 PDO（和 PDOStatement）在出错时抛出 PDOException。如果未处理，它将杀死脚本，并且可以通过以下方式处理：

```
try {
    $this->addProduct();
}
catch (PDOException $e) {
    echo $e->getMessage();
} 
```

# ruby-on-rails-3 - JRuby 出乎意料：

> ID：10452023
> 
> 赞同：1
> 
> 时间：2012-05-04T15:45:06.097
> 
> 标签：ruby-on-rails-3, jruby, syntax-error

我正在运行带有 Rails 3.2.3 的 JRuby 版本 1.6.7，当我启动我的 rails 服务器时，`rails s`我收到以下错误：

```
/config/routes.rb:8: syntax error, unexpected ':'

  match '/about', to: 'pages#about' 
```

但是，如果我更改为，`match '/about' :to => 'pages#about'`我不会收到错误消息。由于使用的 Rails 版本支持这种速记格式，请问有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:06:55.893

哈希语法来自 Ruby 实现，而不是 Rails。JRuby 可以在 1.9 或 1.8 模式下运行。它默认以 1.8 模式运行。您可以在 wiki 上阅读有关[配置 JRuby 以在 1.9 模式下运行的信息](https://github.com/jruby/jruby/wiki/ConfiguringJRuby)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:09:06.060

该`key: value`语法由 Ruby 1.9 引入以取代 1.8 的`:key => value`语法。Rails 的版本无关紧要；除非您的*Ruby*版本至少为 1.9，否则您不能使用新`key: value`的哈希语法。

# android - 如果我不知道当前上下文，到处显示对话框？

> ID：10452028
> 
> 赞同：2
> 
> 时间：2012-05-04T15:45:35.330
> 
> 标签：android, dialog, android-context

由于后台 http 操作，我必须在前台活动中显示一个对话框。

当对话框必须出现时，它可能无处不在，上下文可以改变，例如我已经开始了一个新的活动。

如果我使用 applicationContext 来显示我得到的对话框：

> 05-04 17:32:32.560: E/AndroidRuntime(3663): android.view.WindowManager$BadTokenException: 无法添加窗口 -- 令牌 null 不适用于应用程序

所以...我怎样才能实现我的目标？

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:53:51.483

无论何时/何地创建对话框，您都将处于活动中，对吗？为什么不直接使用那个活动作为上下文呢？

在我自己的代码中，我创建了一个帮助类，它为我创建了一个对话框。在那个助手类中，我传入当前的活动、标题和消息。它构造对话框并返回我可以管理的 AlertDialog 对象。

您可以尝试这样做，但您仍然需要知道您希望对话框显示的上下文/活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-02T21:34:35.060

在我看来，最好的方法是创建一个新活动并像对话一样使用它。步骤：

1.  创建新的活动，例如（原始的）MainActivy。

2.  根据需要填写相关的activity_main.xml。

3.  在您的 AndroidManifest.xml 中重新编写此行。

    ```
    <activity
            android:theme="@style/AppTheme.Dialog"
            android:name="com.myapp.original.example"
            android:label="@string/timy_titlle" > 
    ```

4.  使用 Intent 类从其他活动中调用您的 MainActivity，现在已转换为 Dialog。

如果您使用的是 Action Bar Compact，您可以按照[其他步骤](http://dandar3.blogspot.be/2013/12/actionbarcompat-dialog-activity.htmlionbarcompat-dialog-activity.html)操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:59:34.597

您需要一种方法来通知您的前台Activity 操作已完成，您可以通过注册一个监听器来做到这一点，因为您没有发布任何代码，我将做出假设。

有两种方法可以通知我知道的前台 Activity，第一种方法是使用广播意图，这里有一个与它们有关的问题[Android BroadcastReceiver 中的 Activity](https://stackoverflow.com/questions/4555215/android-broadcastreceiver-within-activity)。您可以从后台操作中触发广播意图并将您的活动注册为接收器。

见这里[http://developer.android.com/reference/android/content/Context.html#sendOrderedBroadcast%28android.content.Intent,%20java.lang.String,%20android.content.BroadcastReceiver,%20android.os.Handler ,%20int,%20java.lang.String,%20android.os.Bundle%29](http://developer.android.com/reference/android/content/Context.html#sendOrderedBroadcast%28android.content.Intent,%20java.lang.String,%20android.content.BroadcastReceiver,%20android.os.Handler,%20int,%20java.lang.String,%20android.os.Bundle%29)和这里 [http://developer.android.com/reference/android/content/BroadcastReceiver.html](http://developer.android.com/reference/android/content/BroadcastReceiver.html)

第二种方法是向您的类注册一个执行后台操作的侦听器，例如（伪代码）

```
@Override
protected void onResume() {
    BackgroundOperator.registerListener(this);
}

@Override
protected void onPause() {
    BackgroundOperator.unregisterListener(this);
}

public void onOperationComplete(...) {
    // TODO: Show your dialog here
} 
```

您的侦听器可能是这样的（您的 Activity 可以实现）：

```
interface BackgroundOperatorListener {
    void onOperationComplete(...);
} 
```

这里的想法是您的前台活动将是当前注册的侦听器，因此它将是 onOperationComplete(...) 回调的接收者，然后您可以显示您的对话框，... 可以是要传递的任意数量的参数操作完成后到您的活动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T16:00:56.873

我认为您需要的是获取任务的顶级活动（当前显示活动），然后使用它来显示对话框。

所以看到这个线程：[如何获取最顶层活动的任何标识符？](https://stackoverflow.com/questions/3393908/how-to-get-any-identifier-of-the-topmost-activity)

*编辑：*从后台显示对话框不是很好的用户体验，您可以发送通知或只是长时间祝酒。

# html - IE8 显示：表格子大小

> ID：10452031
> 
> 赞同：0
> 
> 时间：2012-05-04T15:45:48.897
> 
> 标签：html, css, internet-explorer-8, internet-explorer-9

悬停 div 将触发鼠标悬停在子按钮上的效果。单击 div（外部）按钮也会触发 onMouseDown 按钮。

示例代码：

```
<DIV style="DISPLAY: table; background-color:#F5DFE8; width:500px;">
    <button onMouseDown="alert('hello')";">Button</button>
</DIV> 
```

自己测试的小提琴：http: [//jsfiddle.net/N2c8t/15/](http://jsfiddle.net/N2c8t/15/)

一直在谷歌搜索我的尾巴，有什么已知的解决方案吗？除了明显不使用 display:table 之外。：） 谢谢！

注意：用 IE8 和 IE9 标记它，因为这些是我迄今为止尝试过的浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:47:56.817

无论放置什么实际设置（并因此填充整个 div），IE 似乎都将其`button`视为。与另一个元素的运行干扰[解决了它](http://jsfiddle.net/N2c8t/16/)（如果这对您来说是一个可行的解决方案）：`display: table-row``display`

```
<DIV style="DISPLAY: table; background-color:#F5DFE8; width:500px;">
    <span><button onMouseDown="alert('hello');">Button</button></span>
</DIV> 
```

**但也许更好**（不那么侵入性），*保持相同的原始 html*并添加一个伪元素`div`也[解决了它](http://jsfiddle.net/N2c8t/17/)：

```
div:before {
    content: '';
    display: block;
    width: 0;
} 
```

# javascript - 为什么使用 jQuery 返回错误会停止传播，而 POJS 却没有？

> ID：10452032
> 
> 赞同：6
> 
> 时间：2012-05-04T15:45:53.403
> 
> 标签：javascript, jquery

这是一个使用 POJS 的 jsfiddle，显示`return false;`不会阻止事件的传播：http: [//jsfiddle.net/Ralt/Lz2Pw/](http://jsfiddle.net/Ralt/Lz2Pw/)

这是另一个使用 jQuery 的展示，它`return false;` **确实**停止了事件的传播：http: [//jsfiddle.net/Ralt/D5Mtg/](http://jsfiddle.net/Ralt/D5Mtg/)

**编辑：**向我解释为什么 jQuery 这样做 - 故意不同于原始行为 - （以及代码中的位置）得到了答案。

这是代码（很长，但很容易阅读）：

*   两个版本的 HTML：

    ```
    <div id="parent1">
        <div id="child1"><a href="#" id="a1">child1</a></div>
    </div>

    <div id="parent2">
        <div id="child2"><a href="#" id="a2">child2</a></div>
    </div>

    <div id="parent3">
        <div id="child3"><a href="#" id="a3">child3</a></div>
    </div> 
    ```

*   POJS：

    ```
    document.getElementById( 'child1' ).onclick = function( e ) {
        console.log( 'child1' );
        e.preventDefault();
    };

    document.getElementById( 'parent1' ).onclick = function( e ) {
        console.log( 'parent1' );
    };

    document.getElementById( 'child2' ).onclick = function( e ) {
        console.log( 'child2' );
        return false;
    };

    document.getElementById( 'parent2' ).onclick = function( e ) {
        console.log( 'parent2' );
    };

    document.getElementById( 'child3' ).onclick = function( e ) {
        console.log( 'child3' );
        e.stopPropagation();
    };

    document.getElementById( 'parent3' ).onclick = function( e ) {
        console.log( 'parent3' );
    }; 
    ```

*   jQuery版本：

    ```
    $( '#child1' ).click( function( e ) {
        console.log( 'child1' );
        e.preventDefault();
    });

    $( '#parent1' ).click( function( e ) {
        console.log( 'parent1' );
    });

    $( '#child2' ).click( function( e ) {
        console.log( 'child2' );
        return false;
    });

    $( '#parent2' ).click( function( e ) {
        console.log( 'parent2' );
    });

    $( '#child3' ).click( function( e ) {
        console.log( 'child3' );
        e.stopPropagation();
    });

    $( '#parent3' ).click( function( e ) {
        console.log( 'parent3' );
    }); 
    ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T16:13:38.780

[在1.7.1 版](http://code.jquery.com/jquery-1.7.2.js)的第 3331 行，在`jQuery.event.dispatch`：

```
ret = ( (jQuery.event.special[ handleObj.origType ] || {}).handle || handleObj.handler )
         .apply( matched.elem, args );

if ( ret !== undefined ) {
    event.result = ret;
    if ( ret === false ) {
        event.preventDefault();
        event.stopPropagation();
    }
} 
```

在这一行之前发生了很多打包，但基本上，`handler`它`handlerObject`使用`apply`. 如果该调用的结果是假的，它确实`preventDefault`和`stopPropagation`。

这在文档中提到[`on()`](http://api.jquery.com/on/)：

> `false`从事件处理程序返回将自动调用`event.stopPropagation()`and `event.preventDefault()`。

至于他们*为什么*这么做？我不知道，因为我不是 jQuery 设计团队，但我认为这只是因为它`return false`比`event.preventDefault(); event.stopPropagation();`. （如果 jQuery 不是为了确保您输入的内容更少，我不确定它是关于什么的。）

我不相信事件处理程序的返回值实际上在 POJS 中的任何地方都使用过（如果错了，请指正！）*。*因此，jQuery 可以安全地`return`在处理程序中使用导致副作用的语句（因为在 POJS 处理程序中返回 false 是没有意义的，因此不会损害 POJS 功能）。

# c# - 并非此方法中的所有代码都返回值

> ID：10452033
> 
> 赞同：1
> 
> 时间：2012-05-04T15:46:08.340
> 
> 标签：c#, .net

这是我用来检查数据表中是否存在匹配标题的方法：

```
public static bool checkBook(DataTable dt, String title)
{
    try
    {
        foreach (DataRow dr in dt.Rows)
        {
            String checktitle = dr["Title"].ToString();
            if (title == checktitle)
                return true;
            else
                return false;
    }
    catch (Exception ex)
    {
        //do something
        return false;
     }
} 
```

但是有一个问题，我尝试使用try and catch但是为什么没有值返回？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:47:20.687

`try`在没有枚举任何内容的情况下，您不会从块中返回任何内容`dt.Rows`。

在 try 块中的 foreach 之外，您只需添加`return false;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T15:47:37.663

*如果数据中没有行会发生什么？
那会返回什么？*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T15:48:19.447

有**错误，因为如果数据表中没有行，则不会返回表单代码**，因此您需要`return false`在代码中如下所示，

**为您优化代码：**

```
 public static bool checkBook(DataTable dt, String title)
    {
      bool returnval= false;
      try 
      {

         foreach (DataRow dr in dt.Rows)
            {
                String checktitle = dr["Title"].ToString();
                if (title == checktitle)
                {
                    returnval= true;
                }

        }
    catch (Exception ex)
    {
     //do something
    }
    return returnval;
   } 
```

# php - 如何在 cakephp 中将样式更改为错误、输入和标签到 formhelper？

> ID：10452039
> 
> 赞同：1
> 
> 时间：2012-05-04T15:46:19.973
> 
> 标签：php, cakephp

如果我想用 cakephp 2.x 更改 formhelper 中所有元素的标签和样式

例子

$this->Form->input("name") 生成：

```
<div class="input number">
<label for="AfiliadoCedula">Cedula</label>
<input name="data[Afiliado][cedula]" type="number" value="12" id="AfiliadoCedula">
<div class="error-message">name error</div>
</div> 
```

为。。改变：

```
<div class="input number **myclassfieldset**">
<label for="AfiliadoCedula" class="**myclasslabel**">Cedula</label>
<input name="data[Afiliado][cedula]" type="number" class="**myclassinput**" value="12"  id="AfiliadoCedula">
<**label** class="error-message **myclasserror**">name error</**label**>
</div> 
```

非常感谢您的帮助！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:48:56.403

```
$this->Form->input("name", array(
                          'div' => array('class' => '**myclassfieldset**'),
                          'label' => array('class' => '**myclasslabel**'),
                          'class' => '**myclassinput**'
)); 
```

# c# - c Sharp中的图片框图像

> ID：10452043
> 
> 赞同：0
> 
> 时间：2012-05-04T15:46:33.277
> 
> 标签：c#, sql-server

我正在使用以下代码将图片框图像保存到数据库。只是我需要一些代码来将图片框图像从数据库加载到图片框。

```
DialogResult dr = openFileDialog1.ShowDialog();
        switch (dr)
        {
            case DialogResult.Cancel:
                break;
            case DialogResult.OK:
                pictureBox1.Image = Image.FromFile(openFileDialog1.FileName);
                sql = new SqlConnection(@"Data Source=PC-PC\PC;Initial Catalog=Test;Integrated Security=True");
                cmd = new SqlCommand();
                cmd.Connection = sql;
                cmd.CommandText = ("insert [Entry] ([Image]) values (@Image)");
                MemoryStream stream = new MemoryStream();
                pictureBox1.Image.Save(stream, System.Drawing.Imaging.ImageFormat.Jpeg);
                byte[] image = stream.ToArray();
                cmd.Parameters.AddWithValue("@Image", image);
                try
                {
                    sql.Open();
                    cmd.ExecuteNonQuery();
                }
                finally
                {
                    sql.Close();
                }
                break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:54:40.627

这里有两个代码： http: [//www.codeproject.com/Articles/25956/Sending-Receiving-PictureBox-Image-in-C-To-From-Mi](http://www.codeproject.com/Articles/25956/Sending-Receiving-PictureBox-Image-in-C-To-From-Mi)

button2_Click 用于检索图像：

```
 SqlConnection connect = new SqlConnection
                     ("Server=.;database=PictureDb;integrated security=true");
    SqlCommand command = new SqlCommand
                        ("select fldPic from tblUsers where fldCode=1", connect);
    //for retrieving the image field in SQL SERVER EXPRESS
    //Database you should first bring
    //that image in DataList or DataTable
    //then add the content to the byte[] array.
    //That's ALL!
    SqlDataAdapter dp = new SqlDataAdapter(command);
    DataSet ds = new DataSet("MyImages");

    byte[] MyData = new byte[0];

    dp.Fill(ds, "MyImages");
    DataRow myRow;
    myRow = ds.Tables["MyImages"].Rows[0];

    MyData = (byte[])myRow["fldPic"];

    MemoryStream stream = new MemoryStream(MyData);
    //With the code below, you are in fact converting the byte array of image
    //to the real image.
    pictureBox2.Image = Image.FromStream(stream); 
```

# jquery - 如何使用 jquery 获取 HTTP 状态代码和消息

> ID：10452046
> 
> 赞同：1
> 
> 时间：2012-05-04T15:46:50.000
> 
> 标签：jquery, servlets

我使用 Servlet 作为控制器和 jquery 向服务器发送请求。以下是我的jQuery请求

```
$.post("login", {userName:$userName, password:$password}, function(data, textStatus) {
alert(textStatus);
}); 
```

在服务器端，我编写了以下代码

```
response.setContentType("text/plain");
            PrintWriter out = response.getWriter();
            out.println("" + strError + "");
            out.flush();
            out.close(); 
```

我想在 servlet 中设置错误消息和错误错误状态代码，并在 jquery 中读取相同的状态代码。我怎样才能达到同样的效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:52:37.880

您可以从服务器返回一个 json 编码的字符串。[如何从 Java Servlet 返回 JSON 对象](https://stackoverflow.com/questions/2010990/how-do-you-return-a-json-object-from-a-java-servlet)

例如，如果您发回以下 json 编码字符串。{'error': '这是一些错误信息' }

然后在客户端，您将执行以下操作

```
$.post("login", {userName:$userName, password:$password}, function(data, textStatus) {
    alert(data.error); // your error message will show up here in the data object 
 },'json'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:00:19.527

在 java servlet 中，要设置 HTTP 状态，您必须使用以下命令：

```
response.setStatus( code ); 
```

该`code`部分可以是几件事`HttpServletResponse.SC_NOT_FOUND`，例如模拟错误 404（找不到页面）。可以在[此处](http://javamex.com/tutorials/servlets/http_status_code.shtml)找到详尽的列表。

在 jQuery 方面，您可以使用以下内容：

```
$.post( 'login', { /* ... */ }, function( data, textStatus, xhrObject ) {
    // You can read the status returned with
    xhrObject.status;
} ); 
```

我猜这个`textStatus`变量保持状态，但[文档](http://api.jquery.com/jQuery.post/)没有说明它可以返回什么。

# ios - ios - UIImageView 上的 SizeToFit 不起作用

> ID：10452047
> 
> 赞同：4
> 
> 时间：2012-05-04T15:46:50.647
> 
> 标签：ios, uiimageview, sizetofit

我有一个 UIImageView，它从 ios 文件系统的文档目录中加载图像。

问题是当我打电话时

```
[imageView sizeToFit]; 
```

这没用。我认为这是因为图像在那时还没有完全加载，所以 sizeToFit 部分在它具有图像宽度和高度之前被调用。

有人可以指出我的修复方向吗？

这是我的代码：

```
imageView.contentMode = UIViewContentModeScaleAspectFit;
imageView.image = [UIImage imageWithContentsOfFile:[FileOperations getLibraryPath:[NSString stringWithFormat:@"%d.png", listData.imageId]]];
[imageView sizeToFit];
[imageScroll setContentOffset:CGPointMake(0, 0)];
imageScroll.contentSize = imageView.frame.size;
imageScroll.decelerationRate = UIScrollViewDecelerationRateFast;
imageScroll.minimumZoomScale = 1;
imageScroll.maximumZoomScale = 2;
[imageScroll setZoomScale:imageScroll.minimumZoomScale];
[imageScroll addSubview:imageView]; 
```

谢谢，阿什利

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:00:33.867

检查图像大小：

```
NSLog(@"%@", NSStringFromCGSize(imageView.image.size)); 
```

您可能希望`imageView`根据图像大小手动设置框架，例如，如果图像太大而无法容纳`imageView`的超级视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-19T10:46:17.020

```
UIImageView *myImage = [[UIImageView alloc]init];
myImage.contentMode = UIViewContentModeScaleAspectFit;
myImage.image = [UIImage imageName:@"image.png"];
[self.view addSubview:myImage]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:02:14.477

`sizeToFit`应该在您的情况下工作，但如果 UIImage 为零，则失败。

UIImage`imageWithContentsOfFile:`返回一个（完全加载的）对 a`UIImage`或的引用`nil`。你确定你走的是正确的道路吗？

# .net - .net 中的日期时间和偏移量

> ID：10452050
> 
> 赞同：0
> 
> 时间：2012-05-04T15:46:57.490
> 
> 标签：.net, datetime, quartz.net, datetimeoffset, quartz.net-2.0

如何安排后台作业在哥伦比亚时间每天晚上 9 点开始？我正在使用quartz.net

```
public class Program
    {
        static void Main(string[] args)
        {
            // construct a scheduler

            var schedulerFactory = new StdSchedulerFactory();
            var scheduler = schedulerFactory.GetScheduler();
            scheduler.Start();

            TimeZoneInfo colombianTimezone = TimeZoneInfo.FindSystemTimeZoneById("SA Pacific Standard Time");     
            var colombianTimeNow = TimeZoneInfo.ConvertTime(DateTime.Now, TimeZoneInfo.Local,
                                                            colombianTimezone);    

            var job = JobBuilder.Create<EmailsJob>().Build();
            var now = DateTime.Now;

            var trigger = TriggerBuilder.Create()
                            .StartAt(//INeedThisToStartEverydayat9pmColombianTime)
                            .WithSimpleSchedule(x => x.WithIntervalInHours(24).RepeatForever())
                            .Build();

            scheduler.ScheduleJob(job, trigger);
        }
    } 
```

StartAt 方法采用 DateTimeOffset 对象。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T06:56:59.620

基于 Cron 的调度可能是满足您需求的更好选择。

```
TimeZoneInfo colombianTimezone = TimeZoneInfo.FindSystemTimeZoneById("SA Pacific Standard Time");     

var job = JobBuilder.Create<EmailsJob>().Build();

var trigger = TriggerBuilder.Create()
                .WithCronSchedule("0 0 21 * * ?", x => x.InTimeZone(colombianTimezone))
                .Build();

scheduler.ScheduleJob(job, trigger); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:23:31.193

这应该给你今天晚上 9 点的 DateTimeOffset，转换为 UniversalTime 以传递给石英。

```
TimeZoneInfo colombianTimezone = TimeZoneInfo.FindSystemTimeZoneById("SA Pacific Standard Time");
DateTime columbianTime9pm = TimeZoneInfo.ConvertTime(DateTime.Today.AddHours(21), TimeZoneInfo.Local,
                                                colombianTimezone);
DateTimeOffset startAt = new DateTimeOffset(columbianTime9pm).ToUniversalTime(); 
```

我还没有测试过，但我认为这也会定义你想要的触发器。

```
TimeZoneInfo colombianTimezone = TimeZoneInfo.FindSystemTimeZoneById("SA Pacific Standard Time");
DateTime startTime = TimeZoneInfo.ConvertTime(DateTime.Today.AddHours(21), TimeZoneInfo.Local,
                                                colombianTimezone);
SimpleTrigger trigger = new SimpleTrigger("myTrigger",
                                            null,
                                            startTime,
                                            null,
                                            SimpleTrigger.RepeatIndefinitely,
                                            TimeSpan.FromHours(24)); 
```

# android - 使用 Android 图库打开图像

> ID：10452051
> 
> 赞同：3
> 
> 时间：2012-05-04T15:46:58.177
> 
> 标签：android, gallery, android-gallery

我需要在 Android Gallery 中打开一个特定的图像，但我尝试了一些代码但没有成功。这是我的代码：

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.parse( "file:///Download/screenshot.jpg"), "image/*");
startActivity(intent); 
```

Android Gallery 似乎已打开，但没有图像，它显示黑屏。

我正在使用 ICS 4.0 在 Samsung Galaxy Nexus 中尝试我的应用程序

希望任何人都可以帮助我。

谢谢，维克多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T06:57:45.227

Usew Button and EditID to "btnLoadPicture" and ImageView ID "imgView" 使用以下并重试

```
private static int RESULT_LOAD_IMAGE = 1;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button btnLoadPicture = (Button) findViewById(R.id.buttonLoadPicture);

    btnLoadPicture.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
            Intent i = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);

            startActivityForResult(i, RESULT_LOAD_IMAGE);

        }
    });
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == RESULT_LOAD_IMAGE && resultCode == RESULT_OK && null != data) {
        Uri selectedImage = data.getData();
        String[] filePathColumn = { MediaStore.Images.Media.DATA };

        Cursor cursor = getContentResolver().query(selectedImage,
                filePathColumn, null, null, null);
        cursor.moveToFirst();

        int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
        String picturePath = cursor.getString(columnIndex);
        cursor.close();
        // String picturePath contains the path of selected Image
        ImageView imageView = (ImageView) findViewById(R.id.imgView);
        imageView.setImageBitmap(BitmapFactory.decodeFile(picturePath));
    }
} 
```

# c# - 在 C# 中处理内存中文件的最佳方法是什么？

> ID：10452056
> 
> 赞同：1
> 
> 时间：2012-05-04T15:47:15.997
> 
> 标签：c#, memorystream

我正在构建一个动态创建 PowerPoint 演示文稿的 ASP.NET Web 应用程序。我有基本的工作，但它会在硬盘上创建实际的物理文件。对于大型多用户 Web 应用程序来说，这似乎不是一个好主意。如果应用程序在内存中创建演示文稿，然后将它们流式传输回用户，似乎会更好。我应该使用 MemoryStream 类而不是操作文件吗？我不确定我是否理解使用文件和使用流之间的区别。它们可以互换吗？谁能指出我在内存而不是磁盘上进行文件类型操作的好资源？我希望我已经很好地描述了这一点。

科里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:18:42.810

您正在尝试根据“似乎不是一个好主意”的测量来做出您认为会影响应用程序性能的决定，这几乎不科学。最好同时实现两者并进行比较，但首先您应该列出您对任一实现的担忧。

以下是一些开始的想法：

*   临时文件和内存流之间确实没有太大区别。如果它们足够小，它们都会在物理内存中包含内容，如果存在内存压力，它们都会撞击磁盘。如果清理文件是主要问题，请考虑[在关闭文件](https://stackoverflow.com/questions/546049/delete-on-close-files)时使用临时删除。
*   操作系统已经在使用缓存管理大文件方面做得很好，需要确保纯内存解决方案至少与之匹配。
*   MemoryStream 不是合理大小的流的最佳实现，因为它的“所有数据都在单字节数组中”合同（请参阅我在[https://stackoverflow.com/a/10424137/477420](https://stackoverflow.com/a/10424137/477420)的回答）。
*   管理多个大型内存流（即，用于多个用户）对于 x86 平台来说很有趣，而对于 x64 平台则没有那么重要。
*   一些 API 根本不提供使用基于 Stream 的类的方法并且需要物理文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:55:02.543

文件和流是相似的，是的。两者本质上都是流式传输`byte`数组……一个来自内存，一个来自硬盘。如果您使用的 API 允许您生成流，那么您可以轻松地执行此操作并将其提供给使用该`Response`对象的用户。

以下代码将获取一个 PowerPoint 内存对象（您需要针对自己的 API 对其进行修改，但您可以了解大致的想法），将其保存到 a `MemoryStream`，然后设置正确的标头并将流写入 Response（其中然后让用户将文件保存到他们的本地计算机）：

```
SaveFormat format = SaveFormat.PowerPoint2007;
Slideshow show = PowerPointWriter.Generate(report, format);
MemoryStream ms = new MemoryStream();
show.Save(ms, format);

Response.Clear();
Response.Buffer = true;
Response.ContentType = "application/vnd.ms-powerpoint";
Response.AddHeader("Content-Disposition", "attachment; filename=\"Slideshow.ppt\"");
Response.BinaryWrite(ms.ToArray());
Response.End(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:51:58.927

是的，我会推荐 MemoryStream。通常，每当您访问文件时，您都是在使用流进行访问。流有很多种（例如网络流、文件流和内存流），它们都实现了相同的基本接口。如果您已经在文件流中创建文件，而不是像字符串或字节数组这样的东西，那么它应该只需要很少的编码更改即可切换到 MemoryStream。

基本上，蒸汽只是一种处理大量数据的方式，您不必或不能一次将所有数据加载到内存中。因此，与其将整个数据集读取或写入到一个巨大的数组或其他东西中，不如打开一个流，它为您提供相当于游标的流。您可以将当前位置移动到流中的任何位置，并从该位置读取或写入。

# c# - 将 ListBoxFor（多个）绑定回模型

> ID：10452060
> 
> 赞同：2
> 
> 时间：2012-05-04T15:47:27.053
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, model-binding

我有一个 MVC 视图，它使用下面的 Razor 语法呈现基本上等同于 KeyValuePair 的内容，然后生成以下 HTML。

```
@Html.DropDownListFor(x => x.SelectedItems, new SelectList(Model.SelectedItems, "Key", "Key"), new { Class = "selectList selectedList", size = "2" }) 
```

HTML：

```
<select class="selectList selectedList" id="SelectedItems" name="SelectedItems" size="2">
   <option value="842">Item 1</option>
   <option value="326">Item 2</option>
   <option value="327">Item 3</option>
</select> 
```

我正在使用 Jquery 和通用函数手动发布表单来发布我们的表单，如下所示：

```
function GenericSubmit(formSelector, sender, callback) {
    if (typeof (sender) != "undefined" && $(sender).hasClass('disabled')) {
        return false;
    }

    var $that = $(formSelector);
    var that = $that.get(0);
    if ($that.valid()) {
        $.ajax({
            url: that.action,
            type: that.method,
            data: $(that).serialize(),
            success: function (data, textStatus, jqXHR) {
                callback.call(that, data);
            }
        });
    }
    return false;
} 
```

但是我遇到的问题是，只有正在发送的数据是实际值（我希望这就是 JQ 的工作方式..），但我需要绑定到 IEnumerable。

通过查看发送到表单的 POST 数据，我只能看到正在发送的以下值——我希望我的模型有一个空集合。

```
SelectedItems:842
SelectedItems:326
SelectedItems:327 
```

我的模型如下：

```
/// <summary>
/// An response for dealing with list type entities
/// </summary>
public class ListEntityResponse : EntityScreenResponse
{
    /// <summary>
    /// Contains a Enumerable of items that can be selected
    /// </summary>
    public List<KeyValueViewModel> AvailableItems { get; set; }

    /// <summary>
    /// Contains a Enumerable of items that have been selected
    /// </summary>
    public List<KeyValueViewModel> SelectedItems { get; set; }

    public ListEntityResponse()
    {
        AvailableItems = new List<KeyValueViewModel>();

        SelectedItems = new List<KeyValueViewModel>();
    }

} 
```

为了更加清晰 - 这是我的 KeyValueViewModel：

```
 public class KeyValueViewModel
    {
        public string Key { get; set; }

        public string Value { get; set; }
    } 
```

![当前结果](../Images/9653e1f198271ed3e84775d9c27ba82e.png)

我已经为此搜索了高低，但似乎找不到任何有效的主题，任何帮助将不胜感激！

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:55:02.323

//刚刚意识到我误读了你的问题。

如果你想绑定到多个值，你需要使用 ListBoxFor

//

那么，如果您可能已经在后端拥有了某些信息，为什么还需要控制器从视图中接收所有这些信息呢？

只关心您在表单中提交的内容是有意义的。

如果您需要重新填充此数据以再次呈现视图（因为存在验证错误，这是一种优雅的方法）

[http://www.paulstovell.com/clean-aspnet-mvc-controllers](http://www.paulstovell.com/clean-aspnet-mvc-controllers)

# java - 在变量上使用多个 String 方法的正确方法是什么？

> ID：10452070
> 
> 赞同：0
> 
> 时间：2012-05-04T15:48:13.440
> 
> 标签：java, string

我有一个平面文件，我正在尝试清理以导入数据库。布局不一致，但总是由一个字段名（可变长度的文本，但总是 9 个单词或短语之一）和一个自由格式的文本字段（可变长度最多 1024 个字节）组成。我需要提取 1024 字节的字段，并将它们排列成跨字段名的列。

输入文件：

```
 foo-01 bunches of data
 foo bar01 more bunches of data including a bunch of notes
 foo-01 lots of data lives in this field
 foo18 monday notes 
    ...etc. 
```

输出文件 - 分隔，修剪空格

```
 foo-01;foo bar 01;foo18                 (<-- header row)
 bunches of data; more bunches of data including a bunch of notes; ;
 lots of data lives in this field; ; notes 
```

我的策略是：阅读每一行。如果该行以九个字段名之一开始，我将一个子字符串（字段名之后的第一个字符到行中的最后一个字符 - 修剪空格）写入适当列位置的分隔平面文件。

此代码有效，

```
 if(inputLine.startsWith("foo-01"))
 {
      String lineVal = inputLine.trim();
      int lVLen = lineVal.length();
      String outVal  = lineVal.substring(17,lVLen);
      String outValTrim = outVal.trim();
      System.out.println(evalVal+" "+inputLine+" "+outValTrim);
  }
  else 
  ...etc... 
```

但提出问题。

考虑：

```
 String outValTrim = inputLine.trim().substring(17,inputLine.trim().length()).trim(); 
```

*   我可以使用的最大方法数是多少？例如， `foo = Stringmethod1.Stringmethod2.StringMethod3()`

*   语句中方法的顺序是否有规则？

*   在一个语句中组合方法的最佳实践是什么？我觉得它的可读性较差，而且我不确定效率。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:52:43.213

方法的最大大小为 64K，您不能使用更多的方法。您可能还会发现您不需要像您想象的那样链接尽可能多的方法。

```
String outValTrim = inputLine.trim().substring(17).trim() 
```

我怀疑第一个 trim() 不正确......

最佳实践是使代码尽可能易读且易于理解。

效率很少是最重要的问题，除非您可以通过使用分析器证明这是导致您遇到问题的原因，否则请坚持可读性。

# objective-c - 在 UIPopoverController 中丢失手势识别器

> ID：10452075
> 
> 赞同：7
> 
> 时间：2012-05-04T15:48:23.467
> 
> 标签：objective-c, ios, uigesturerecognizer, uipopovercontroller, gesture-recognition

我有一个名为 PhotoBoothController 的类，我用它来使用手势操作图像。当我在 iPhone 上运行它时，它运行良好。但是，当我在 iPad 上运行它时，我会在 UIPopoverController 中显示 PhotoBoothController。图像看起来很好，但是我无法操作它，因为我的手势似乎无法被识别。我不确定如何让 UIPopoverController 控制手势。

我展示了 popovercontroller 并这样配置视图：

```
- (void)presentPhotoBoothForPhoto:(UIImage *)photo button:(UIButton *)button {

    //Create a photoBooth and set its contents
    PhotoBoothController *photoBoothController = [[PhotoBoothController alloc] init];
    photoBoothController.photoImage.image = [button backgroundImageForState:UIControlStateNormal];

    //set up all the elements programmatically.
    photoBoothController.view.backgroundColor = [UIColor whiteColor];

    //Add frame (static)
    UIImage *frame = [[UIImage imageNamed:@"HumptyLine1Frame.png"] adjustForResolution];
    UIImageView *frameView = [[UIImageView alloc] initWithImage:frame];
    frameView.frame = CGRectMake(50, 50, frame.size.width, frame.size.height);
    [photoBoothController.view addSubview:frameView];

    //Configure image
    UIImageView *photoView = [[UIImageView alloc] initWithImage:photo];
    photoView.frame = CGRectMake(50, 50, photo.size.width, photo.size.height);
    photoBoothController.photoImage = photoView;

    //Add canvas
    UIView *canvas = [[UIView alloc] initWithFrame:frameView.frame];
    photoBoothController.canvas = canvas;
    [canvas addSubview:photoView];
    [canvas becomeFirstResponder];

    [photoBoothController.view addSubview:canvas];
    [photoBoothController.view bringSubviewToFront:frameView];

    //resize the popover view shown in the current view to the view's size
    photoBoothController.contentSizeForViewInPopover = CGSizeMake(frameView.frame.size.width+100, frameView.frame.size.height+400);

    self.photoBooth = [[UIPopoverController alloc] initWithContentViewController:photoBoothController];
    [self.photoBooth presentPopoverFromRect:button.frame
                                     inView:self.view
                   permittedArrowDirections:UIPopoverArrowDirectionAny
                                   animated:YES];
} 
```

我认为`[canvas becomeFirstResponder]`可能会这样做，但似乎没有什么不同。

任何建议都非常感谢，谢谢。

更新：根据评论添加代码

```
- (void)viewDidLoad {
  [super viewDidLoad];

  if (!_marque) {
    _marque = [CAShapeLayer layer];
    _marque.fillColor = [[UIColor clearColor] CGColor];
    _marque.strokeColor = [[UIColor grayColor] CGColor];
    _marque.lineWidth = 1.0f;
    _marque.lineJoin = kCALineJoinRound;
    _marque.lineDashPattern = [NSArray arrayWithObjects:[NSNumber numberWithInt:10],[NSNumber numberWithInt:5], nil];
    _marque.bounds = CGRectMake(photoImage.frame.origin.x, photoImage.frame.origin.y, 0, 0);
    _marque.position = CGPointMake(photoImage.frame.origin.x + canvas.frame.origin.x, photoImage.frame.origin.y + canvas.frame.origin.y);
  }
  [[self.view layer] addSublayer:_marque];

  UIPinchGestureRecognizer *pinchRecognizer = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(scale:)];
  [pinchRecognizer setDelegate:self];
  [self.view addGestureRecognizer:pinchRecognizer];

  UIRotationGestureRecognizer *rotationRecognizer = [[UIRotationGestureRecognizer alloc] initWithTarget:self action:@selector(rotate:)];
  [rotationRecognizer setDelegate:self];
  [self.view addGestureRecognizer:rotationRecognizer];

  UIPanGestureRecognizer *panRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(move:)];
  [panRecognizer setMinimumNumberOfTouches:1];
  [panRecognizer setMaximumNumberOfTouches:1];
  [panRecognizer setDelegate:self];
  [canvas addGestureRecognizer:panRecognizer];

  UITapGestureRecognizer *tapProfileImageRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapped:)];
  [tapProfileImageRecognizer setNumberOfTapsRequired:1];
  [tapProfileImageRecognizer setDelegate:self];
  [canvas addGestureRecognizer:tapProfileImageRecognizer];

}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
  return ![gestureRecognizer isKindOfClass:[UIPanGestureRecognizer class]] && ![gestureRecognizer isKindOfClass:[UITapGestureRecognizer class]];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T06:30:17.340

我正在开发一个类似的应用程序，我可以轻松地操作画布上的图像。

1) 检查画布的**userInteractionEnabled**属性是否设置为**YES**。
2）您可以尝试将手势添加到 ImageView 而不是画布。（我猜你想缩放、旋转和滑动图像）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T17:17:01.663

一些猜测：

1.  这是因为`viewDidLoad`在设置 cavas 属性之前调用了方法吗？在这种情况下，您可以尝试在当前弹出框之后以另一种方法添加识别器，例如`viewDidAppear`.

2.  我也同意关键可能是 UIPopoverController 允许与弹出框之外的其他视图进行交互。所以我建议移到方法`[canvas becomeFirstResponder];`的末尾并在这里尝试，因为您实际上将识别器添加到 self.view。`viewDidLoad``PhotoBoothController``self.view becomeFirstResponder`

# html - 如何支持 JQuery Mobile Offline Web App (i18n) 的国际化？

> ID：10452076
> 
> 赞同：1
> 
> 时间：2012-05-04T15:48:30.190
> 
> 标签：html, jquery-mobile, internationalization, offline-mode

我正在寻找一种通用机制来国际化必须在离线模式下工作的 Web 应用程序。

最初我正在考虑向元素添加 data-i18n 标签，但这似乎是一个非常丑陋的解决方案。

我遇到了[http://panacodalabs.github.com/The-M-Docs/#components_&_utilities/m_i18n](http://panacodalabs.github.com/The-M-Docs/#components_&_utilities/m_i18n)但是我不希望（或由于时间限制）将我的应用程序移植到该框架。

我需要一个 HTML5 jQuery Mobile 友好的解决方案来解决这个问题，它可以在离线模式下工作。

在我看来，HTML5 框架中缺少这个关键组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:56:30.553

你看过 jQuery i18n 插件吗？

[http://recursive-design.com/projects/jquery-i18n/](http://recursive-design.com/projects/jquery-i18n/)

我目前正在将它与 jQuery 1.7.1 和 jQuery Mobile 1.1.0 一起使用，并且效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T06:43:13.260

我不一定会说这是 JQM 应该提供的功能，因为这可能最好通过一些服务器端逻辑来完成。

我可以想到两种方法：
1.将所有语言翻译放在一些独立的js文件中，您必须将其包含在清单文件中。检查[datebox 插件](http://dev.jtsage.com/jQM-DateBox)，看看如何做到这一点（右上角 - 选项）。
2\. 创建一个本地数据库并在其中存储所需语言的翻译。

我认为第一个应该更容易处理，但可能更难设置/维护。另外，根据翻译的数量，js文件确实会变大......

# c# - C# 网络浏览器自动化

> ID：10452077
> 
> 赞同：6
> 
> 时间：2012-05-04T15:48:33.480
> 
> 标签：c#, browser

背景：我正在创建一个 Windows 窗体应用程序，它可以在 Intranet Web 应用程序上自动输入订单。我们有大量的订单输入需要完成，这将花费我们很多钱，所以我自愿完成这项任务。

问题：我正在使用 webbrowser 类来导航 Web 应用程序。我已经走了很远，但到达了路障。应用程序中有一个部分会打开一个 Web 对话页面。如何与 Web 对话框交互。我的 webbrowser 类实例仍在父页面中。我希望有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T20:25:59.427

你有很多选择。要扩展其他人的答案并添加新想法...

**使用 webbrowser 控件执行**此操作：从技术上讲，这可以通过将 javascript 注入目标页面（如此[处所示](https://stackoverflow.com/a/1437353/156755)）或创建 JavaScript 对象并通过[webbrowser.objectforscripting](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.objectforscripting.aspx)属性将其用作桥接器来实现。这是非常脆弱的 - 像网站更改元素 ID 这样简单的事情可能会破坏它。您还需要确保您的代码不会干扰表单的功能（冲突函数名称等......）

**使用回发：**监控 Web 浏览器和服务器之间的通信（我个人更喜欢 Firfox/Firebug，但 ie/Fiddler 或 Chrome/F12 也都不错）。只要你能准确地复制浏览器的动作，服务器就无法知道其中的区别。这里的问题是浏览器很复杂，表单越安全，服务器的要求就越高。这意味着您可能必须伪造登录、获取 cookie、在后续请求中将它们发回、处理 Viewstate 数据和 xss 预防变量。这是可能的，它比第一个选项更强大，但开始工作可能会很痛苦。如果它不是一种高度安全的形式，那么这是您最好的选择。[更多信息在这里](https://stackoverflow.com/a/931030/156755)

**通过浏览器自动化来做到这一点：** [Selenium](http://seleniumhq.org/)可能是这里的最佳选择（正如其他人所提到的），但存在与 webbrowser 控件类似的缺陷，因为它对表单本身的更改很敏感（但不像 webbrowser 控件那样 mcuh） .

顺便说一句，如果您拥有 Visual Studio Ultimate/Test 版本（以及其他一些版本，不确定是哪个版本），它包括一套测试工具，其中包括一个出色的引擎来自动对网站进行负载测试。正如您可以看到模拟的每一步一样，这对于跟踪表单的确切作用也是极好的。

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:01:51.887

根据您需要的复杂程度，您有两种选择：

1.  使用像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的 HTTP 调试器来找出您需要发送到每个页面的 POST 数据，并通过[HttpWebRequest](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)模仿它。
2.  使用`Browser Automation Tool`类似[Selenium](http://seleniumhq.org/)并完成工作。

注意：您的行为可能会被网站视为垃圾邮件，因此请准备好进行 IP 屏蔽、验证码...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:19:56.353

你可以试试 Selenium：[http](http://seleniumhq.org/) ://seleniumhq.org/ UI 自动化是处理这些类型任务的一种更直观的方法。

# java - 如何在gwt中修剪richtextarea的文本

> ID：10452079
> 
> 赞同：0
> 
> 时间：2012-05-04T15:48:54.387
> 
> 标签：java, gwt, gwt2

我在 GWT 中使用了“RichTextArea”。现在我想在提交表单时修剪richtextarea.gettext() 的文本。

但是，如果我只输入了**空格并**在我的 textarea 中输入了密钥，那么 richtextarea.gettext() 将不会修剪它，因为它会将它们转换为**  和 < br>**。

如果只有输入的空格并在我的文本区域中输入密钥然后**修剪**它应该给我**空白字符串值，有什么建议吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T10:22:00.283

你得到的   和 <br> 是你从 RichTextArea 得到的正确值，因为它提供 HTML。

实现你自己的修剪方法：

```
public String trim(String s) {

   String result = s.trim(); 
   String x = result.replaceAll("<br>", "");
   x = x.replaceAll("&nbsp", "");
   x = x.trim();
   if(x.equals("")) {
       return x;
   } else {
       return result;
   }
} 
```

# replace - 我需要认真的帮助，通过向上移动 2 行并更改值来更改同一列中的列的值

> ID：10452080
> 
> 赞同：0
> 
> 时间：2012-05-04T15:48:55.227
> 
> 标签：replace, while-loop, row, common-table-expression

我是 7 个月的 DBA，所以请多多包涵。我需要编写一个可以找到特定 ProductIdentifier 的代码。当找到这个特定的 ProductIdentifier 时， 1\. 我需要获取这个 ProductIdentifier。2\. 我需要向上移动 2 行并将 ProductIdentifier 放在它上方 2 行的字段中。

这是我的代码（此表中的所有内容都已正确排序）

选择
SipID、
SaleInvoiceID、
AssociationNumber、
Priority、
TotalPrice、
TotalCost、
SerialNumber、
ContractNumber、
ActivatedThroughPAW、
DateCreatedatMidnight、
ReceivedDate、
InvoiceIDByStore、
位置、
ProductIdentifier、
描述、
ShortDescription、
CategoryName、
RevenueStreamID、
RevenueType

从修订表。

我会更好地告诉你需要做什么！[在此处输入图片描述][1]

ProductIdentifier
AUPG2001RGP -- 将此产品标识符替换为“AWRPNS000%”
POSC0021PRW
AWRPNS000343 -- 取此产品标识符

这段代码我需要做的是：每当我找到任何像“AWRPNS000%”这样的 ProductIdentifier 时，我需要让查询获取它并向上移动 2 行并将其中的任何 ProductIdentifier 替换为“AWRPNS000%”。然后我需要将结果插入表中。我相信最好的办法是再次选择 ProductIdentifier 行并给它一个别名。这将是我需要转换的行。然后我可以做一个比较，看看事情是否成功。我不知道如何编写代码来实际抓取 ProductIdentifier 并上升 2 行并替换它，因此非常感谢任何帮助或输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:22:08.467

那么向上两行是什么意思。为什么是两排。

例如

```
ID Class Type Date
1  1     2    20/12/2012
2  1     2    21/12/2012
3  1     2    22/12/2012 * 
```

即是的 ID 是两行，但那是因为记录按 ID 和日期顺序排列，并且至少有三个。

如果你能想出这条规则，例如

```
Select * From SomeTable Where Class = 1 and Type = 2 And Date = 20/12/2012 
```

然后你所有的问题都消失了......

# python - Picloud（AMAZON EC2服务器）上的子进程更改文件夹权限？

> ID：10452087
> 
> 赞同：1
> 
> 时间：2012-05-04T15:49:10.563
> 
> 标签：python, windows, amazon-ec2, subprocess, administrator

在 Ubuntu 中，我使用`subprocess.Popen`调用一个可执行文件，它将一些输出文件保存在服务器（Picloud）的硬盘驱动器上。该代码已在本地 Ubuntu 机器上成功测试。但是，它在服务器上不起作用。我的方法如下：

```
#create a new folder. 
#The permission is drwxrwx--- both locally and on the server end
os.makedirs(folder)

#copy the executable file to this folder. 
#The permission is drwxrwx--- both locally and on the server end after copy
shutil.copy("a.exe", folder)

#call this exe file. 
#The permission is drwxrwx--- locally but changed to drwxr-x--- on the server end. 
#Since I do not have the write permit, my code fails
subprocess.Popen("a.exe")
>>>OSError: [errno 13] permission denied. 
```

我不确定为什么 subprocess 会更改我在服务器端的文件夹权限。所以我尝试将`sudo`模式用作： subprocess.Popen("sudo", "a.exe") 正如我所料，此代码仅在本地工作。

那么任何人都可以帮我解释为什么 subprocess 会删除我的写权限吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:59:22.930

在 Windows 中，您可以使用以下命令运行它：

```
subprocess.Popen("runas /user:Admin a.exe") 
```

# objective-c - 避免多个位置服务警报

> ID：10452093
> 
> 赞同：2
> 
> 时间：2012-05-04T15:49:16.490
> 
> 标签：objective-c, ios5, uiwebview, location

假设我有一个本机 iOS 应用程序，它显示两个或多个请求位置服务权限的 web 视图。

例如，想象一个应用程序比较给定查询的地图结果——例如，用户提交一个地址，一个 web 视图显示来自 google 地图的结果，另一个来自 bing，等等。

有没有办法避免每个离散的 Web 视图通过破坏性警报视图请求位置服务权限？

如果应用程序的唯一目的是比较各种基于位置的资产，我的应用程序似乎应该询问用户*一次*他们是否批准使用位置服务的应用程序。我的网络视图如何继承此权限，或者位置服务架构不可能做到这一点？

如果无法聚合访问位置服务的权限，有没有办法为每个离散的提供者保留权限？例如，用户不应该在每次运行应用程序时都批准对每个地图的访问......导致三个警报视图（应用程序和两个 web 视图），每次启动时都会询问相同的内容。

避免这种行为的唯一方法是实现对地图提供者而不是 webviews 的本机 API 调用？

欢迎任何意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:12:25.503

是的，你可以这样做。为此，请使用您的 appDelegate 类。如果位置交互代码比较简单，只需在appDelegate中创建一个获取授权状态的方法，并从didFinishLaunching方法中调用即可。

我用这样的方法做这样的事情：

```
 - (BOOL)setupLocationMgr  
   {
        CLLocationManager *locationMgr = [[CLLocationManager alloc] init];
        locationMgr.purpose = @"Location tracking for XXX app.";
        return [CLLocationManager authorizationStatus] == kCLAuthorizationStatusAuthorized;
    } 
```

然后 appDelegate 保留 CLLocationManager 对象，并可以将它返回给任何需要它的视图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-03T20:32:58.733

嵌入式 Web 视图处理用户位置权限的方式基于网站。每个需要用户位置的网站都需要专门询问用户（否则你可能会做一些狡猾的事情......）。

我认为您每次打开应用程序时都会看到警报，因为您正在重新创建另一个 Web 视图以进行显示，并且当应用程序被终止时缓存可能会被清除（对此不确定）。

# java - 使用 XSD 文件映射对象的 ArrayList

> ID：10452095
> 
> 赞同：0
> 
> 时间：2012-05-04T15:49:35.710
> 
> 标签：java, web-services, jaxb

我正在使用 Java/Eclipse/Spring 创建 Web 服务。我正在编写一个 XSD 文件，其中包含用于 Web 服务（请求、响应等）的 Java 类的结构。我在 XSD 文件上使用“生成 Jaxb 类”选项来创建 Java 类。它适用于 int、string、long 等数据类型，但是，当我的属性是对象的 ArrayList 时，生成的 Java 类没有该属性的“SET”方法。它只有“GET”方法。

这是一个例子：

XSD 文件：

```
<element name="GetPrizesAndCatalogsResponse">
    <complexType>
        <sequence>
            <element name="answerCode" type="int" />
            <element name="prizes" type="tns:SW_Prize" maxOccurs="unbounded"></element>
            <element name="prizesCatalog" type="tns:SW_Catalog" maxOccurs="unbounded"></element>            
            <element name="pagination" type="tns:SW_Pagination"></element>          
        </sequence>
    </complexType>
</element> 
```

Java类：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "answerCode",
    "prizes",
    "prizesCatalog",
    "pagination"
})
@XmlRootElement(name = "GetPrizesAndCatalogsResponse")
public class GetPrizesAndCatalogsResponse {

    protected int answerCode;
    @XmlElement(required = true)
    protected List<SWPrize> prizes;
    @XmlElement(required = true)
    protected List<SWCatalog> prizesCatalog;
    @XmlElement(required = true)
    protected SWPagination pagination;

    /**
     * Obtiene el valor de la propiedad answerCode.
     * 
     */
    public int getAnswerCode() {
        return answerCode;
    }

    /**
     * Define el valor de la propiedad answerCode.
     * 
     */
    public void setAnswerCode(int value) {
        this.answerCode = value;
    }

    /**
     * Gets the value of the prizes property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the prizes property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getPrizes().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link SWPrize }
     * 
     * 
     */
    public List<SWPrize> getPrizes() {
        if (prizes == null) {
            prizes = new ArrayList<SWPrize>();
        }
        return this.prizes;
    }

    /**
     * Gets the value of the prizesCatalog property.
     * 
     * <p>
     * This accessor method returns a reference to the live list,
     * not a snapshot. Therefore any modification you make to the
     * returned list will be present inside the JAXB object.
     * This is why there is not a <CODE>set</CODE> method for the prizesCatalog property.
     * 
     * <p>
     * For example, to add a new item, do as follows:
     * <pre>
     *    getPrizesCatalog().add(newItem);
     * </pre>
     * 
     * 
     * <p>
     * Objects of the following type(s) are allowed in the list
     * {@link SWCatalog }
     * 
     * 
     */
    public List<SWCatalog> getPrizesCatalog() {
        if (prizesCatalog == null) {
            prizesCatalog = new ArrayList<SWCatalog>();
        }
        return this.prizesCatalog;
    }

    /**
     * Obtiene el valor de la propiedad pagination.
     * 
     * @return
     *     possible object is
     *     {@link SWPagination }
     *     
     */
    public SWPagination getPagination() {
        return pagination;
    }

    /**
     * Define el valor de la propiedad pagination.
     * 
     * @param value
     *     allowed object is
     *     {@link SWPagination }
     *     
     */
    public void setPagination(SWPagination value) {
        this.pagination = value;
    }

} 
```

我对 XSD 文件的定义是否正确？是否有必要在 XML 上添加另一个标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T18:19:38.910

解决了：

有一种新方法（我不知道是不是新方法）叫做“addAll”。您可以获取您的收藏，然后使用 addAll 添加另一个收藏。

代码：

```
getPrizesAndCatalogsResponse.getPrizes().addAll(newPrizes); 
```

# php - Javascript - 在页面加载期间且仅在页面加载期间发生的 Onclick 事件

> ID：10452099
> 
> 赞同：2
> 
> 时间：2012-05-04T15:49:48.713
> 
> 标签：php, javascript, onclick, onload

我对javascript还是很陌生，我没有找到我犯错误的地方。我正在使用的基本设置是一组单选按钮和一组复选框。根据选择的单选按钮，只有一组特定的复选框应该可用，其余的应该被禁用/变灰。给定单选按钮允许哪些复选框通过 php 数组传入。在我的代码中，独占选项指的是单选按钮，而扩展选项指的是复选框。我用于此功能的 javascript 和 php 如下：

```
window.onload = function(){
    <?php
    for($i = 0; $i < count($students_information); $i++){
        foreach($exclusive_extended_array as $exclusive => $extended){
            echo "$('".$i."_exclusive_".$exclusive."').onclick = allow(".$i.",".json_encode($extended).");";
        }
    }
    ?>
}
function allow(i, extended){
    $('[id^="'+i+'Extended"]').disabled = true;
    for (var j = 0; j < extended.length; j++) {
        alert(extended[j]);
        $(i+"Extended"+extended[j]).disabled = false;
    }
} 
```

在加载的页面上，它显示为：

```
<script type="text/javascript">
window.onload = function(){
    $('0_exclusive_2176').onclick = allow(0,[1975]);
    $('0_exclusive_911').onclick = allow(0,[]);
    $('0_exclusive_795').onclick = allow(0,[1973,1975]);
}
function allow(i, extended){
    $('[id^="'+i+'Extended"]').disabled = true;
    for (var j = 0; j < extended.length; j++) {
        alert(extended[j]);
        $(i+"Extended"+extended[j]).disabled = false;
    }
}
</script> 
```

不幸的是，代码最终会在页面加载时运行脚本，而不是在选中单选按钮之一时运行脚本。我不认为这是元素名称的问题（尽管我确实意识到命名风格并不一致，但是，我无法完全控制它）。我假设只是我在代码中犯了一个简单的错误，我仍然没有足够的 javascript 经验来捕捉它。有人看到我做错了什么吗？

感谢您的时间！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T15:54:08.740

您正在分配您的点击处理程序，如下所示：

```
$('0_exclusive_2176').onclick = allow(0,[1975]); 
```

发生的事情是：`allow`被运行并且它的返回值（`undefined`）被设置为事件。您需要设置`onclick`一个功能：

```
$('0_exclusive_2176').onclick = function(){
    allow(0,[1975]);
}; 
```

您还可以`allow`返回一个函数：

```
function allow(i, extended){
    return function(){
        $('[id^="'+i+'Extended"]').disabled = true;
        for (var j = 0; j < extended.length; j++) {
            alert(extended[j]);
            $(i+"Extended"+extended[j]).disabled = false;
        }
    };
} 
```

现在`$('0_exclusive_2176').onclick = allow(0,[1975]);`应该按预期工作。

# java - 调用音频播放函数时，Java 事件被终止

> ID：10452100
> 
> 赞同：0
> 
> 时间：2012-05-04T15:49:53.487
> 
> 标签：java, events, audio

我面临一个奇怪的编程问题。它让我筋疲力尽，但没有找到解决方案！

我的程序主要依赖于从外部硬件触发的事件（Java 侦听器），用于接收来自该硬件的音频消息。在 eventHandler 中，我执行以下操作

1.  将接收到的消息传递给另一个返回数据的类的静态方法“解码”
2.  然后我打开 FileOutputStream，将这些数据“音频”写入文件，然后关闭 FileOutputStream。
3.  我从另一个类中调用静态方法“play”来播放音频文件。

问题是：每当第一次调用“Play”方法时，它都会正确执行，但会导致事件停止引发并且程序终止但没有异常。当我注释掉播放方法时，一切都变好了！

您对导致程序终止的方法有一些想法吗？

```
 public void messageReceived(int to,Message message)
 {

speexAudioMsg msg = (speexAudioMsg)message;
 try{

    byte[] output = jspeexDecoder.decode(msg.get_frame());

os = new FileOutputStream(file);
os.write(output);
os.close();
Player.play();  
  }
  catch (IOException ex) {ex.printStackTrace();}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:58:06.657

您可能正在使用事件线程来播放音乐。尝试在新线程中调用 Player.play()。

新线程（新 Runnable() { public void run() {Player.play()}}).start();

这是一个例子：

```
 static String url = "http://www.stackoverload.com";

    public static void threadTest() {
        new Thread(new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
                try {
                    URL url2 = new URL(url);
                    url2.openStream();
                } catch (MalformedURLException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        }).run(); 
```

# ios - 如何测试是否使用 UIAutomation 从我的应用程序打开了链接？

> ID：10452102
> 
> 赞同：0
> 
> 时间：2012-05-04T15:49:58.380
> 
> 标签：ios, functional-testing, ios-ui-automation

我有这个应用程序，它有一个登录屏幕，其中包含用户名和密码字段。在字段下方有这个“忘记密码链接”。我正在使用 UIAutomation 类测试这个应用程序。当点击该链接时，如何测试链接页面是否在浏览器中打开？我只想检查单击链接时是否打开了浏览器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:56:17.130

如果您确保在 UIAutomation 单击链接之前关联的默认浏览器未打开，那么您只需查看给定浏览器的进程是否在单击后运行（可能等待一秒钟左右）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T19:49:25.423

我不认为有办法做到这一点。Instruments 一次只允许一个目标，因此当导航离开目标时脚本会停止。

# c - 定义一个返回结构指针的函数

> ID：10452103
> 
> 赞同：11
> 
> 时间：2012-05-04T15:50:00.303
> 
> 标签：c

请耐心等待我，我来自其他语言和新手到 c 并从[http://c.learncodethehardway.org/book/learn-c-the-hard-way.html学习它](http://c.learncodethehardway.org/book/learn-c-the-hard-way.html)

```
struct Person {
    char *name;
    int age;
    int height;
    int weight;
};

struct Person *Person_create(char *name, int age, int height, int weight)
{
    struct Person *who = malloc(sizeof(struct Person));
    assert(who != NULL);

    who->name = strdup(name);
    who->age = age;
    who->height = height;
    who->weight = weight;

    return who;
} 
```

我理解第二个 Person_create 函数返回一个 struct Person 的指针。我不明白是（可能是因为我来自其他语言，erlang，ruby），为什么将它定义为

```
struct Person *Person_create(char *name, int age, int height, int weight) 
```

不是

```
struct Person Person_create(char *name, int age, int height, int weight) 
```

还有其他方法可以定义一个函数来返回一个结构吗？

对不起，如果这个问题太基本了。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T15:52:22.767

之所以这样定义，是因为它返回一个指向结构的指针，而不是结构。您将返回值分配给 a `struct Person *`，而不是`struct Person`。

可以返回完整的结构，如下所示：

```
struct Person Person_create(char *name, int age, int height, int weight)
{
    struct Person who;
    who.name = strdup(name);
    who.age = age;
    who.height = height;
    who.weight = weight;
    return who;
} 
```

但它并不经常使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:10:38.417

该`Person_create`函数返回一个指向 a 的指针，`struct Person`因此您必须将返回值定义为一个指针（通过添加 *）。要了解返回指向结构的指针而不是结构本身的原因，必须了解 C 处理内存的方式。

当您在 C 中调用一个函数时，您会在[调用堆栈](http://en.wikipedia.org/wiki/Call_stack)上为它添加一条记录。调用堆栈的底部是`main`您正在运行的程序的函数，顶部是当前正在执行的函数。堆栈上的记录包含传递给函数的参数值和函数的所有局部变量等信息。

您的程序可以访问另一种类型的内存：堆内存。这是您使用 分配空间的地方`malloc`，它没有连接到调用堆栈。

当您从函数返回时，调用堆栈被弹出，与函数调用相关的所有信息都将丢失。如果你想返回一个结构，你有两个选择：在结构从调用堆栈中弹出之前复制结构内部的数据，或者将数据保存在堆内存中并返回一个指向它的指针。逐字节复制数据比简单地返回指针更昂贵，因此您通常希望这样做以节省资源（内存和 CPU 周期）。但是，它并非没有成本。当您将数据保存在堆内存中时，您必须[`free`](http://www.cplusplus.com/reference/clibrary/cstdlib/free/)在停止使用它时记住它，否则您的程序会泄漏内存。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T15:52:32.623

该函数返回`who`，它是一个`struct Person *`- 一个指向结构的指针。保存结构的内存由 分配`malloc()`，函数返回指向该内存的指针。

如果函数被声明为返回`struct Person`而*不是*指针，那么`who`也可以被声明为结构。返回时，结构将被复制并返回给调用者。请注意，复制的效率低于简单地返回指向内存的指针。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T15:52:53.860

默认情况下，结构在 C/C++ 中不是指针（或引用），例如在 Java 中。因此， Struct Person Function() 将返回 struct 本身（按值，制作副本）而不是指针。

您通常不想创建对象的副本（默认情况下为浅副本，或使用复制构造函数创建的副本），因为这很快就会变得非常耗时。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T16:31:01.530

复制整个结构而不仅仅是指针效率较低，因为指针`sizeof`通常比`sizeof`整个结构本身小得多。

此外，结构可能包含指向内存中其他数据的指针，并且盲目复制可能对动态分配的数据造成危险（如果处理一个副本的代码将释放它，则另一个副本将留下无效指针）。

所以浅拷贝几乎总是一个坏主意，除非你确定原始文件超出范围 - 那么你为什么不直接返回一个指向结构的指针（当然是在堆上动态分配的结构，所以它不会像堆栈分配的实体一样被销毁，从函数返回时）。

# asmack - MultiUserChat 获取聊天室用户？

> ID：10452104
> 
> 赞同：0
> 
> 时间：2012-05-04T15:50:06.710
> 
> 标签：asmack

我正在研究 ASmack。使用 asmack 获取聊天室用户列表是否可行？ [http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/muc.html](http://www.igniterealtime.org/builds/smack/docs/latest/documentation/extensions/muc.html) 此列表未显示。请给我一些想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T10:26:44.333

Which list?

You can only call [`getOccupants()`](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/muc/MultiUserChat.html#getOccupants%28%29) if you are an occupant of the MUC or, in other words, if have joined the MUC.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T18:18:28.627

[getOc​​cupants()](http://www.igniterealtime.org/builds/smack/docs/latest/javadoc/org/jivesoftware/smackx/muc/MultiUserChat.html#getOccupants%28%29)对我不起作用。所以你可以试试下面的代码：

```
 try {         
       ServiceDiscoveryManager discoManager =  ServiceDiscoveryManager.getInstanceFor(xmppConn);
       DiscoverItems discoItems = discoManager.discoverItems(roomJID);
       Iterator<DiscoverItems.Item> occupants = discoItems.getItems();  

     } catch (XMPPException e) {
       e.printStackTrace();                
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-11T13:09:59.017

通过将参数作为 MultiUserChat 对象传递的简单跟随方法，我能够获取 XMPP 聊天室中可用的用户列表。

```
public static List<String> findMulitUser(MultiUserChat muc) {
    List<String> listUser = new ArrayList<String>();
    Iterator<String> it = muc.getOccupants();
    // Traverse the chat room name
    while (it.hasNext()) {
        // Chat room members name
        String name = StringUtils.parseResource(it.next());
        System.out.println("Name Of Occupants------>" + name);
        listUser.add(name);
    }
    return listUser;
} 
```

# bash - 防止变量替换后出现通配符

> ID：10452107
> 
> 赞同：5
> 
> 时间：2012-05-04T15:50:09.627
> 
> 标签：bash, shell, escaping, glob

使用 shell 变量 (BASH) 的最优雅方法是什么，该变量包含为通配符（文件名完成）保留的字符，这些字符会触发一些不需要的替换？这是示例：

```
for file in $(cat files); do
   command1 < "$file"
   echo "$file"
done 
```

文件名包含“[”或“]”等字符。我基本上有两个想法：

1）通过 set -f 关闭 globbing：我在其他地方需要它

2）转义文件中的文件名：BASH 在管道输入标准输入时抱怨“找不到文件”

感谢任何建议

*编辑：唯一缺少的答案是当文件名位于shell变量“$file”中时，如何从名称包含用于通配的特殊字符的文件中读取，例如command1 <“$file”。*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-18T16:20:17.153

作为在 and 之间切换的替代方法`set -f`，`set +f`您也许可以只将一个单应用`set -f`到子 shell，因为父 shell 的环境根本不会受此影响：

```
(
set -f
for file in $(cat files); do
   command1 < "$file"
   echo "$file"
done
)

# or even

sh -f -c '
   for file in $(cat files); do
      command1 < "$file"
      echo "$file"
   done
' 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T17:47:50.520

You can turn off globbing with `set -f`, then turn it back on later in the script with `set +f`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:18:26.820

改为使用`while read`。

```
cat files | while read file; do
    command1 < "$file"
    echo "$file"
done 
```

# c++ - 在启用 ARC 的情况下使用 reinterpret_cast

> ID：10452109
> 
> 赞同：4
> 
> 时间：2012-05-04T15:50:12.513
> 
> 标签：c++, objective-c, automatic-ref-counting, reinterpret-cast

我在启用 ARC 的 Objective-C 项目中包含了一个库的头文件。

我知道该库不是在启用 ARC 的情况下编译的，但问题是库的头文件，特别是这些行：

```
template <typename Type_>
static inline Type_ &MSHookIvar(id self, const char *name) {
    Ivar ivar(class_getInstanceVariable(object_getClass(self), name));
    void *pointer(ivar == NULL ? NULL : reinterpret_cast<char *>(self) + ivar_getOffset(ivar));
    return *reinterpret_cast<Type_ *>(pointer);
} 
```

我收到此错误：

```
Cast of an Objective-C pointer to 'char *' is disallowed with ARC 
```

是否可以修复此错误？

整个头文件可以在这里找到：http: [//puu.sh/sTrH](http://puu.sh/sTrH)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:14:30.963

您需要将初始化更改为`pointer`：

```
void *pointer(ivar == NULL ? NULL : reinterpret_cast<char *>((__bridge void *)self) + ivar_getOffset(ivar)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T16:53:58.243

转到项目的目标并选择 Build Phases 选项卡。打开编译源部分并找到该头文件。添加编译器标志“-fno-objc-arc”减去引号。这将导致该文件被定期编译，并且假设代码在非弧环境中工作，应该可以解决您的问题。

# sql - SQL Server 2005 数据库还原无法完成

> ID：10452110
> 
> 赞同：0
> 
> 时间：2012-05-04T15:50:15.210
> 
> 标签：sql, database-restore

我必须恢复一个数据库。数据库和网站托管在同一台机器上。我已从 IIS 关闭该站点，但还原仍无法完成，因为它说数据库正在使用中。我是否也必须停止所有应用程序池？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:54:09.257

您需要将数据库置于[单用户模式](http://msdn.microsoft.com/en-us/library/ms345598%28v=sql.90%29.aspx)，这将关闭与该数据库的任何连接。然后，您可以继续进行还原。

总之，使用 Sql Server Management Studio：

1.  在对象资源管理器中，连接到 SQL Server 数据库引擎的一个实例，然后展开该实例。

2.  右键单击要更改的数据库，然后单击“属性”。

3.  在“数据库属性”对话框中，单击“选项”页面。

4.  从限制访问选项中，选择单一。

5.  如果其他用户连接到数据库，将显示打开连接消息。要更改属性并关闭所有其他连接，请单击是。

此外，使用`exec sp_who2`您可以查看连接到该数据库的 spid。

# c++ - 如何使用宏 C++ 获取带有字符串的结构成员

> ID：10452112
> 
> 赞同：6
> 
> 时间：2012-05-04T15:50:24.510
> 
> 标签：c++, macros

考虑以下示例：

```
struct MyStruct {
    int a;
    int b;
}; 
```

我可以通过执行以下操作使用宏从结构的实例中设置成员：

```
#define setVar(x,y) instance.x = y 
```

然后在任何功能中我可以说：

```
setVar(a, 4) 
```

如何将 a 作为字符串发送到宏？这也可能吗？

```
setVar("a", 4) 
```

编辑：有一堆预定义的结构，其成员都是 double 类型。我只知道传入的 XML 配置文件使用的是什么结构。解析后，我有一堆字符串，它们是需要设置的所有数据成员和值的列表。我需要使用此列表为结构中的每个成员设置值。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T16:21:05.357

仅当您使用某些宏定义结构本身时才有可能，例如：

```
#define MY_STRUCT_STRUCTURE FIELD(a) FIELD(b) FIELD(d) FIELD(e) FIELD(f)

struct MyStruct {

# define FIELD(name) int name;
    MY_STRUCT_STRUCTURE
# undef FIELD

  bool setVar(char* fieldname, int val)
  {
#   define FIELD(name) if(strcmp(#name,fieldname)==0){name=val; return true;};
    MY_STRUCT_STRUCTURE
#   undef FIELD
    return false; // name not found
  }
};

int main()
{
  MyStruct s;
  s.setVar("a",1);
  s.setVar("b",2);
  s.setVar("f",100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:32:23.553

我编写了一些快速而肮脏的代码，但可以给你一些想法，希望对你有所帮助。这里的主要技巧是太使用联合。

```
struct MyStruct
{
int a;
double b;

MyStruct() 
    : a(0), b(0) {}
};

MyStruct instance;

union value 
{
    long value_a;
    double value_d;
} myvalue;

void blah_a(value v)
{
    instance.a = v.value_a;
}

void blah_b(value v)
{
    instance.b = v.value_d;
}

struct 
{
    (void)(*fn)(value);
    const char* key;
}

lookup_table[] = 
{
    { &blah_a, "a" },
    { &blah_b, "b" }
};

void setVar(const char* c, value v)
{
     for (int i = 0; lookup_table[i].fn; i++)
          if (c == lookup_table[i].key)
               (*(lookup_table[i].fn))(v);
}

int main(int argc, char* argv[])
{
    value v;
    v.value_a = 6;
    setVar("a", v);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:32:40.747

可能不是您正在寻找的，但宏等的替代解决方案......只是一些封装和 OO 设计。您可以稍后将 Field 类更改为模板，您将能够基本上表示任何内容。

你可以创建一个类

```
class Field
{
public:
    Field(const std::string& name, const std::string& type);
    virtual ~Field(void);
    std::string toString() const;
    std::string getName() const;
    int getValue() const { return value };
private:
    std::string name;
    std::string type;
    int value;
}; 
```

然后是一个结构类

```
#pragma once
#include <boost/ptr_container/ptr_deque.hpp>
#include <string>

class Field;

class MyStructure
{
public:
    typedef boost::ptr_deque<Field> FieldList;
    typedef FieldList::iterator FieldListIter;
    typedef FieldList::auto_type AutoField;

    MyStructure(void);
    MyStructure(const std::string& name);
    virtual ~MyStructure(void);

    void setName(const std::string& name);
    std::string getName() const;
    void addField( std::auto_ptr<Field> field );
    std::string getFieldValue( const std::string& name ) const;
    MyStructure::AutoField removeField( const std::string& name );
    std::string toString(void) const;

private:
    std::string struct_name;
    FieldList fields;
}; 
```

然后使用它：

```
auto_ptr<MySructure> struct_a(new MySructure("StructName1",0) );
struct_a->addField( auto_ptr<Field> ( new Field( "Field1",    1 ) ) );
struct_a->addField( auto_ptr<Field> ( new Field( var_str1,    2) ) );
struct_a->addField( auto_ptr<Field> ( new Field( getName(),   getVal() ) ) ); 
```

# javascript - IE9 错误地重定向到移动站点

> ID：10452117
> 
> 赞同：2
> 
> 时间：2012-05-04T15:50:57.707
> 
> 标签：javascript, html, internet-explorer

在我们的索引页面上，我们有脚本可以将智能手机（iPhone、Android 和 Windows Phone）上的用户重定向到我们的移动网站。我们使用的技术是：

```
if ( navigator.userAgent.match( /iPhone/ ) && ! navigator.userAgent.match( /iPad/ ) ) {
        window.location="mobile.html";
        }
    else if ( navigator.userAgent.match( /Android/ ) && ! navigator.userAgent.match( /Android 3/) ) {
        window.location="mobile.html";
        }
    else if ( navigator.userAgent.match( /Windows Phone/ ) || navigator.userAgent.match( /Zune/ ) ) {
        window.location="mobile.html";
        } 
```

一切都运行良好，直到我们在 IE9 上测试它，由于某种原因重定向到移动站点，即使它的 userAgent 不包含上述任何字符串。IE9 的 userAgent 是：

Mozilla/5.0（兼容；MSIE 9.0；Windows NT 6.1；WOW64；Trident/5.0）

IE8 没有这种行为方式，任何其他平台也没有。是脚本不正确，还是 IE 以其报复性的恶作剧再次被击落？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T02:49:20.453

根据这篇[关于 IE9 用户代理](https://stackoverflow.com/questions/5465584/what-is-ie9-compatibility-view-in-ie9-developer-tools)的帖子，IE9 在兼容模式下会更改其用户代理，并且可以包含“Zune”字符串。看起来我们将不得不尝试使用另一个字符串来重定向 Windows Phone 用户。谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T00:14:52.450

当你使用 .match() 方法时，它返回一个数组，它可以是空的（`[]`）也可以不是。
IE 可能认为这`[]`是一个`true`表达式，所以我建议您执行以下操作：

```
if(/iPhone/.test(navigator.userAgent) && !/iPad/.test(navigator.userAgent)){
    window.location="mobile.html";
}else if(/Android/.test(navigator.userAgent) && !/Android 3/.test(navigator.userAgent){
    window.location="mobile.html";
}else if(/Windows Phone/.test(navigator.userAgent) || /Zune/.test(navigator.userAgent)){
    window.location="mobile.html";
} 
```

我想它会起作用，因为 .test() 方法只会返回`true`或`false`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T22:41:20.530

感谢您的回答和帮助。以下对我使用 Windows 8 Phone 有效

```
if(/iPhone/.test(navigator.userAgent) && !/iPad/.test(navigator.userAgent)){
    window.location="/mobile";
}else if(/Android/.test(navigator.userAgent) && !/Android 3/.test(navigator.userAgent){
    window.location="/mobile";
}else if(/Windows Phone/.test(navigator.userAgent) || /Zune/.test(navigator.userAgent)){
    window.location="/mobile";
} 
```

我将 window.location="mobile.html" 更改为我为移动设备的 index.html 文件创建的实际目录

```
ex. /root directory/mobile 
```

# .htaccess - 文件夹到子域

> ID：10452120
> 
> 赞同：0
> 
> 时间：2012-05-04T15:51:11.987
> 
> 标签：.htaccess, subdomain

我的服务器提供商停止为我提供在控制面板中创建子域的可能方法，他们说我应该用 htaccess 解决它。

所以我必须做这样的事情。当用户键入[http://asdf.example.com](http://asdf.example.com)时，它应该得到[http://example.com/asdf](http://example.com/asdf)的内容（因为提供者甚至改变了 FTP 的结构......他们怎么样）

我没有找到任何教程。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T19:46:42.807

TerryE 答案的更通用版本。虽然我没有测试过！！！

```
RewriteCond %{HTTP_HOST} !www.example.com
RewriteCond %{HTTP_HOST} (.*).example.com
RewriteCond %1/$0        !^([^/]+)/\1
RewriteRule ^.*          %1/$0   [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:24:32.287

您不需要 mod 代理。只需进行内部重定向：

```
RewriteEngine on
RewriteBase   /
RewriteCond   %{HTTP_HOST} =asdf.example.com
RewriteCond   $0           !^asdf/
RewriteRule   ^.*          asdf/$0             [L] 
```

该规则重写请求前缀`asdf/`，但前提是 (1) 主机是`http:/asdf...`并且 (2) 重写尚未发生。您需要 (2) 来防止迭代循环。$0 是规则中的匹配字符串。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:00:24.230

你可以用 mod_rewrite 和 mod_proxy 做到这一点：

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^asdf\.example\.com$
RewriteRule ^ http://example.com/asdf%{REQUEST_URI} [L,P] 
```

# java - Play framework 2.0.1 - 服务器只响应第一个请求

> ID：10452122
> 
> 赞同：2
> 
> 时间：2012-05-04T15:51:18.037
> 
> 标签：java, playframework-2.0

我对 Play 2.0 或 2.0.1 有一个奇怪的行为：第一个或前几个请求由 Play 快速处理！服务器，但它不再响应。

我在几个项目上重现了这个问题，包括 hello word 示例应用程序： - 启动“播放运行” - 转到[http://localhost:9000](http://localhost:9000) -> ok - 点击刷新几次：请求被锁定，浏览器正在加载.

我对 Firefox 和 Chrome 有同样的行为。

我想这是一个设置问题，我可能遗漏了一些微不足道的东西，但我看不出是什么。

我正在使用 Mac OS X Lion 和 Java 7 update 4。

提前致谢， 问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:34:15.433

谢谢你。

它确实与 Java 7 有关。我终于让它工作了，我花了几个小时才知道怎么做。

似乎将 JAVA_HOME 变量定义为 Java 7 路径会产生一些冲突。

在我的 .bashrc 中评论导出行解决了这个问题：

```
PATH=$PATH:/Users/raphaellemaire/tools/play-2.0.1

#export JAVA_HOME=/Library/Java/JavaVirtualMachines/1.7.0.jdk/Contents/Home 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:35:23.820

众所周知，Play 在使用 Jdk 7 时反应很奇怪。查看邮件列表，发现了几个问题。

似乎是 IMO 唯一可行的解​​决方案。（使用与您相同的设置，完全没有问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:47:39.573

如 mkeoller 的评论中所述，升级到[Play 2.0.2似乎可行。](http://www.playframework.org/documentation/2.0.2/Home)

# mysql - 加入不同服务器上的数据库时的 Rails 性能

> ID：10452124
> 
> 赞同：1
> 
> 时间：2012-05-04T15:51:33.247
> 
> 标签：mysql, database, ruby-on-rails-3, performance

为了给我们更多的可扩展性，我们计划将一个巨大的 MySql 数据库（大约 50 个表）分解为不同服务器上的多个数据库。我们正在使用 Rails 3。

显然，我们希望避免需要从位于不同服务器上的表中进行连接，但这有时是不可避免的。

为了帮助我们找出将数据库分区的第八种方法（分成 3 个新数据库/服务器还是分成 12 个？），我们想了解当我们访问需要在它们之间连接的信息时会遇到哪些性能问题（或没有）。

您对此有何经验？有什么经验法则吗？有什么宝石或工具吗？有任何警告和注意事项吗？缓存呢？备份，可靠性怎么样？

感谢您的见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:42:17.997

我还没有听说过在 Rails 中跨不同物理数据库服务器连接表的任何自动方法。我想您需要在代码中执行手动连接，这将比数据库内连接慢得多。

您可能要考虑的一种选择是在 MySQL 中使用 FEDERATED 引擎：[https ://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html](https://dev.mysql.com/doc/refman/5.5/en/federated-storage-engine.html)

# java - UnsatisfiedLinkError - 如何创建 c++-DLL？

> ID：10452127
> 
> 赞同：0
> 
> 时间：2012-05-04T15:51:40.990
> 
> 标签：java, c++, dll, jna

我正在尝试生成一个我可以通过 JNA 从 java 访问的 dll。

我只是尝试一个简单的：

共产党：

```
void Initialize()
{
  std::cout<< "Hello World!";
} 
```

iostream 也包括在内，编译后我得到： CreateDll.dll

通过 Visual Studio，我现在可以生成一个 *.dll。

我尝试像这样加载到Java中：

```
public class mainRoutine {
  public static void main(String[] args) {
    NativeWrapper INSTANCE = (NativeWrapper) Native.loadLibrary("CreateDll" , NativeWrapper.class);             
    INSTANCE.Initialize();
  }

  static {
    System.setProperty("jna.library.path", "C:\\workspace\\JNA");
  }
} 
```

还有另一个接口：

导入 com.sun.jna.Library；

```
public interface NativeWrapper extends Library {
  void Initialize();
} 
```

所以但是现在运行Java函数我得到了错误，

```
 java.lang.UnsatisfiedLinkError: 
  Error looking up function 'Initialize': 
   The specified procedure could not be found. 
```

我错过了什么？

PS：我知道有很多主题，但是尝试了一天我还没有找到解决方案。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:24:53.673

您需要导出和（如果使用 C++）取消装饰函数名称。

在 Windows 上，函数通常可用于导出`__declspec(dllexport)`.

在任何平台上，为确保函数以不受管理的形式导出，您必须使用`extern "C"`.

具体来说：

```
extern "C" void __declspec(dllexport) Initialize() { ... } 
```

还有其他指定导出函数的方法，但这可能是最常见和最直接使用的方法。如果您*不*使用`extern "C"`，您的函数将类似于`InitializeZ@ASDF@`，其中编译器和链接器使用附加的垃圾字符来根据其调用签名使给定函数唯一可识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T14:43:03.340

如果有一个类要实现怎么办？.h 文件如下所示：

```
namespace simpleDLLNS
{
    class simpleDLL
    {
    public:

       char giveVoidPtrGetChar(void* param);
       int giveIntGetInt(int a);
       void simpleCall(void);
       int giveVoidPtrGetInt(void* param);
    };
} 
```

应该在哪里使用 extern "C" void __declspec(dllexport) ？我在实现功能时使用它。但是当我打开dll时，它看起来像这样：

?simpleCall@simpleDLL@simpleDLLNS@@QAEXXZ

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:14:40.330

您是否正在导出符号：

```
void _declspec(dllexport) Initialize()
{
  std::cout<< "Hello World!";
} 
```

# .net - EntLib 记录到类别

> ID：10452134
> 
> 赞同：2
> 
> 时间：2012-05-04T15:52:21.160
> 
> 标签：.net, logging, enterprise-library

我正在使用 EntLib 4.1。我想将日志条目与不同的类别相关联。我的类别将反映各种有趣的信息，例如上下文类型（例如，“批处理”或“在线”）和功能区域（例如，“发票”或“订单”）。

我已经完成了日志记录代码，但我认为我在配置中做错了什么。我想要实现的是让所有记录到“批处理”类别的条目最终都出现在名为“批处理”的事件日志中，而其他所有内容都出现在应用程序日志中。（我已经手动创建了这个名称的自定义事件日志。）

但是，具有 Batch 类别的日志条目会被记录到应用程序日志中，并且每个条目都包含以下前导码：

```
消息：跟踪 LogSource 'Batch' 失败。其他来源的处理将继续。有关详细信息，请参阅下面的摘要信息。如果此问题仍然存在，请停止服务并检查配置文件以查找类别和接收器配置中可能出现的错误。

```

EntLib 配置文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <configSections>
        <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    </configSections>
    <loggingConfiguration name="Logging Application Block" tracingEnabled="true"
      defaultCategory="APPLICATION" logWarningsWhenNoCategoriesMatch="true">
        <listeners>
            <add source="Project II Logger" formatter="Text Formatter" log="Batch"
              machineName="" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              traceOutputOptions="None" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              name="BatchListener" />
            <add source="Project II Logger" formatter="Text Formatter" log="Application"
              machineName="" listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FormattedEventLogTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              traceOutputOptions="Callstack" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FormattedEventLogTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              name="DefaultListener" />
            <add fileName="c:\temp\trace.log" header="----------------------------------------"
              footer="----------------------------------------" formatter="ExceptionFormatter"
              listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.FlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              traceOutputOptions="Callstack" filter="All" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.FlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              name="Exception TraceListener" />
        </listeners>
        <formatters>
            <add template="Timestamp: {timestamp}&#xD;&#xA;Message: {message}&#xD;&#xA;Category: {category}&#xD;&#xA;Priority: {priority}&#xD;&#xA;EventId: {eventid}&#xD;&#xA;Severity: {severity}&#xD;&#xA;Title:{title}&#xD;&#xA;Machine: {machine}&#xD;&#xA;Application Domain: {appDomain}&#xD;&#xA;Process Id: {processId}&#xD;&#xA;Process Name: {processName}&#xD;&#xA;Win32 Thread Id: {win32ThreadId}&#xD;&#xA;Thread Name: {threadName}&#xD;&#xA;ErrorMessages: {errorMessages}"
              type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              name="ExceptionFormatter" />
            <add template="Timestamp: {timestamp}&#xD;&#xA;Message: {message}&#xD;&#xA;Category: {category}&#xD;&#xA;Priority: {priority}&#xD;&#xA;EventId: {eventid}&#xD;&#xA;Severity: {severity}&#xD;&#xA;Title:{title}&#xD;&#xA;Machine: {machine}&#xD;&#xA;Application Domain: {appDomain}&#xD;&#xA;Process Id: {processId}&#xD;&#xA;Process Name: {processName}&#xD;&#xA;Win32 Thread Id: {win32ThreadId}&#xD;&#xA;Thread Name: {threadName}&#xD;&#xA;ErrorMessages: {errorMessages}"
              type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
              name="Text Formatter" />
        </formatters>
        <categorySources>
            <add switchValue="All" name="APPLICATION">
                <listeners>
                    <add name="DefaultListener" />
                </listeners>
            </add>
            <add switchValue="All" name="Batch">
                <listeners>
                    <add name="BatchListener" />
                </listeners>
            </add>
        </categorySources>
        <specialSources>
            <allEvents switchValue="All" name="All Events" />
            <notProcessed switchValue="All" name="Unprocessed Category" />
            <errors switchValue="All" name="Logging Errors &amp; Warnings">
                <listeners>
                    <add name="DefaultListener" />
                </listeners>
            </errors>
        </specialSources>
    </loggingConfiguration>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T20:48:54.307

我的猜测是您没有在该日志中创建适当的事件日志和/或事件源。

问题似乎不在配置文件中。

如果您选择从 bat 文件或控制台应用程序设置新日志等，请确保在管理员下运行它。

[创建日志和源win 7](http://blog.kappasolutions.ca/blog/post/2010/07/04/How-To-Create-a-Custom-Event-Log-in-Windows-7.aspx)

# sql-server-agent - SQL Server 代理作业设置

> ID：10452137
> 
> 赞同：0
> 
> 时间：2012-05-04T15:52:28.913
> 
> 标签：sql-server-agent

我是 SQL 和 .Net 的新手，问这个问题可能也很愚蠢，但我仍然需要帮助。

我有一个位于 Server1 上的数据库。现在我有了另一台服务器，我们称它为 Server2 来进行我的开发。

我的数据库所在的 Server1 似乎是 SQL Server Express 安装，所以我看不到 SQL Server 代理。Server2 有一个 SQL Server 代理。那么我可以使用 Server2 的 SQL Server 代理并安排查询在 Server1 上自动运行吗？这可能吗？如果是，那么有人可以解释我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:03:55.210

我已经从 SQL Express 成功运行了 Jobs，没有对 mangement studio 的内置支持，但您可以手动完成所有工作。这是一个相当冗长的过程。遵循此[博客文章](http://www.sqlteam.com/article/scheduling-jobs-in-sql-server-express)中出色且非常详细的指南。

[http://www.sqlteam.com/article/scheduling-jobs-in-sql-server-express](http://www.sqlteam.com/article/scheduling-jobs-in-sql-server-express)

或者，有一个为 SQL Express 创建 SQL 代理的项目：http: [//standalonesqlagent.codeplex.com/](http://standalonesqlagent.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:07:36.890

`server1.database.dbo.object`如果您在 Server2 上创建指向 Server1 的链接服务器，是的，您可以在 Server2 上创建使用语法在 Server1 上执行代码的作业。

您可以在此处了解有关创建链接服务器的信息：

[http://technet.microsoft.com/en-us/library/ff772782.aspx](http://technet.microsoft.com/en-us/library/ff772782.aspx)

（您必须将版本更改为您的版本，因为您没有告诉我们您使用的是什么版本。您还需要确保链接服务器与排序规则兼容并支持数据访问/RPC。）

当然，您将不得不处理安全问题以及如何处理连接故障以及两台服务器之间的一般依赖关系。

[您可以使用sp_testlinkedserver](http://msdn.microsoft.com/en-us/library/ms189809.aspx)添加错误处理。

# sql-server - 如何处理 FLAT FILE 中的奇怪记录？

> ID：10452139
> 
> 赞同：0
> 
> 时间：2012-05-04T15:52:37.053
> 
> 标签：sql-server, ssis, batch-file

在这种情况下，SSIS 倒在了后面。

在我的平面文件中，我们有这样的正常记录

```
"1","2","STATUSCHANGED","A","02-MAY-12 21:52:34","","Re","Initial review","" 
```

有些像这样；（记录分布在几行）

```
"1","2","SALESNOTIFICATIONRESPOND","Ac","02-MAY-12 21:55:19","From: W, J 
Sent: Wednesday, May 08, 2012 2:00 PM
To: XXXX, A; Acost
Subject: RE: Notification Id 1219 - Qu ID XXXXXX 
I got this from earlier today. Our team is reviewing the request. 

Thanks, 

Hi,

This account belongs to D please approve/deny.

Thanks!

Claud","","","Reassign" 
```

因此，查看 NOTEPAD + 中的文件真是太棒了，它告诉我，在分布在多行的那个字段中，我应该取出该字段中的所有 {CR}{LF}。

此文件的行分隔符是 LF，文本限定符是“.

所以我需要对 200 个文件的集合做两件事？

1.  删除文件中的所有 {CR}{LF} ？
2.  删除任何嵌入在实际字段中的“作为文本限定符？

任何人都知道如何在 Windows、dos 或 vba 中为如此大量的文件执行此操作，使其自动化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:47:59.020

对于这样的数据，我更喜欢使用脚本组件来执行解析。我写了[一篇描述一种方法的博客文章](http://sqlblog.com/blogs/andy_leonard/archive/2010/05/18/ssis-design-pattern-loading-variable-length-rows.aspx)。

希望这会有所帮助，安迪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:11:04.300

Powershell 将为 {CR}{LF} 为您执行此操作，但如果您以前从未使用过 powershell，则可能需要一段时间来编写代码。

" 出现在字段中间的限定符真是一团糟，您也许可以制定规则来清理它，但不能保证您一定会成功。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:21:14.737

如果正确的行终止符只是 LF，并且您确定每一行都被 LF 正确终止，那么您可以删除所有 {CR}{LF}，但实际上不需要。只要它们 {CR}{LF} 正确地位于一对文本限定符中，它就应该按字面意思导入。

是的，当整个字段被文本限定符包围时，您肯定需要从实际字段中删除任何文本限定符（或根据您的喜好对其进行转义）。那会造成混乱。

就个人而言，我会通过编写一个[python](http://www.simple-talk.com/sql/database-administration/python-for-the-sql-server-dba/)脚本在将数据提供给 SSIS 之前对数据进行预处理，或者只是让脚本为我将整个内容导入 SQL 来解决这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T21:19:20.480

我同意安迪的观点。我有一个类似的问题，我用一个脚本组件任务来处理它。您的代码可能看起来像这样（不处理 CR LF 问题）

```
Imports System
Imports System.Data
Imports System.Math
Imports Microsoft.SqlServer.Dts.Pipeline.Wrapper
Imports Microsoft.SqlServer.Dts.Runtime.Wrapper

<Microsoft.SqlServer.Dts.Pipeline.SSISScriptComponentEntryPointAttribute> _
<CLSCompliant(False)> _
Public Class ScriptMain
    Inherits UserComponent

    Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)
        Dim strRow As String
        Dim strColSeperator As String
        Dim rowValues As String()
        strRow = Row.Line.ToString()
        If strRow.Contains(",") Then
            strColSeperator = (",")
        ElseIf strRow.Contains(";") Then
            strColSeperator = ";"
        End If

        rowValues = Row.Line.Split(CChar(strColSeperator))
        If (rowValues.Length > 1) Then
            Row.Code = rowValues.GetValue(0).ToString()
            Row.Description = rowValues.GetValue(1).ToString()
            Row.Blank = rowValues.GetValue(2).ToString()
            Row.Weight = rowValues.GetValue(3).ToString()
            Row.Scan = rowValues.GetValue(4).ToString()
        End If
    End Sub

End Class 
```

[Andy Mitchell 的帖子](http://www.sqlis.com/sqlis/post/The-Script-Component-as-a-Transformation.aspx)中提供了分步教程

# javascript - 选择一个输入前面的 div

> ID：10452148
> 
> 赞同：0
> 
> 时间：2012-05-04T15:53:18.337
> 
> 标签：javascript, jquery, html

嗨，我发了这两个标签

```
<input type="text" name="aav" class="aav"/>
<div id="aridc" class="aridc"></div> 
```

在这种情况下

```
$(".aav").live("keyup",function(){
    $.ajax({
        type: "POST",
        url: "recapVente.html",
        cache: false,
        data: "exp="+$(this).val()+" article",
        success: function(reponse){
        $(this+"~.aridc").empty();
        $(this+"~.aridc").html(reponse);
        },
        error: function(e){
            $(this+"~.aridc").empty();
            $(this+"~.aridc").html("Votre recherche contien des erreurs");
         }
        });
}); 
```

选择 div 并确保它是输入之后的那个我这样做

```
$(".aav~.aridc") 
```

但是当我这样做时

```
$(this+"~.aridc") 
```

我没话可说

请如何使用

```
this 
```

代替

```
.aav 
```

这里

```
$(".aav~.aridc") 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:56:28.750

这是因为`this`在 ajax 方法的回调内部没有引用同一个对象；上下文发生了变化。您可以通过保留对调用者的引用来轻松解决此问题：

```
 $(".aav").live("keyup",function(){
      var that = this;

      $.ajax({
         type: "POST",
         url: "recapVente.html",
         cache: false,
         data: "exp="+$(this).val()+" article",
         success: function(reponse){
            $(that.class+"~.aridc").empty();
            $(that.class+"~.aridc").html(reponse);
         },
         error: function(e){
            $(that.class+"~.aridc").empty();
            $(that.class+"~.aridc").html("Votre recherche contien des erreurs");
        }
    }); 
```

});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:57:32.213

将此引用存储到一个变量，并用于`.next()`获取兄弟：

```
var thediv = this;
...
$(thediv).next(".aridc") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:00:48.270

`this`是一个 DOM 元素，而不是字符串，它不能被强制转换为字符串的选择器。您只需再次键入字符串（或者我们`.attr`为类获取一些特定的属性选择器，例如它的 ID）。不仅如此，而且`this`无论如何你都在使用错误的方法......我相信`.ajax`它会是。`jqXHR`您可以使用`context:`或存储`this`到另一个变量。

我发现有趣的是它`~`适用于选择器上下文。你可以使用：

```
$input = $(".aac");
$("~ .aridc", $input) 
```

它的工作方式与

```
$(".aac ~ .aridc"); 
```

# ios - 在 CCRenderTexture 中使用 OpenGL ES 2.0

> ID：10452153
> 
> 赞同：1
> 
> 时间：2012-05-04T15:53:48.147
> 
> 标签：ios, cocos2d-iphone, opengl-es-2.0

我正在尝试遵循 Ray Wenderlich 的 iOS 中动态纹理教程

[http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture](http://www.raywenderlich.com/3857/how-to-create-dynamic-textures-with-ccrendertexture)

但使用 Cocos2D 2.0 和 OpenGL ES 2.0 而不是 1.1。本教程首先在屏幕上绘制一个彩色正方形，并对其应用阴影渐变，但我无法将渐变渲染到彩色正方形。本教程的这一部分是将 OpenGL ES 代码发送到 CCRenderTexture 的地方，所以我认为我的 OpenGL ES 2.0 代码设置错误（我对 OpenGL / OpenGL ES 的经验很少）。OpenGL ES 1.1 代码是

```
glDisable(GL_TEXTURE_2D);
glDisableClientState(GL_TEXTURE_COORD_ARRAY);

float gradientAlpha = 0.7;    
CGPoint vertices[4];
ccColor4F colors[4];
int nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0 };
vertices[nVertices] = CGPointMake(textureSize, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
vertices[nVertices] = CGPointMake(0, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};
vertices[nVertices] = CGPointMake(textureSize, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};

glVertexPointer(2, GL_FLOAT, 0, vertices);
glColorPointer(4, GL_FLOAT, 0, colors);
glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices);

glEnableClientState(GL_TEXTURE_COORD_ARRAY);
glEnable(GL_TEXTURE_2D); 
```

它介于 CCRenderTexture`begin`和`end`方法之间（完整的代码可以在上面的链接中找到）。我的 Cocos2D 2.0 / OpenGL ES 2.0 尝试是

```
float gradientAlpha = 0.7;    
CGPoint vertices[4];
ccColor4F colors[4];
int nVertices = 0;

vertices[nVertices] = CGPointMake(0, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0 };

vertices[nVertices] = CGPointMake(textureSize, 0);
colors[nVertices++] = (ccColor4F){0, 0, 0, 0};
vertices[nVertices] = CGPointMake(0, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};
vertices[nVertices] = CGPointMake(textureSize, textureSize);
colors[nVertices++] = (ccColor4F){0, 0, 0, gradientAlpha};

// Setup OpenGl ES shader programs

CCGLProgram *positionColourProgram = [[CCShaderCache sharedShaderCache] programForKey:kCCShader_PositionColor];

[rt setShaderProgram:positionColourProgram];

ccGLEnableVertexAttribs(kCCVertexAttribFlag_Position | kCCVertexAttribFlag_Color);

glVertexAttribPointer(kCCVertexAttrib_Position, 2, GL_FLOAT, GL_FALSE, 0, vertices);
glVertexAttribPointer(kCCVertexAttrib_Color, 4, GL_FLOAT, GL_FALSE, 0, colors);

glDrawArrays(GL_TRIANGLE_STRIP, 0, (GLsizei)nVertices); 
```

`rt`CCRenderTexture 对象在哪里。控制台中没有错误，但屏幕上的图像是没有渐变的纯色正方形。我是否需要使用 OpenGL 混合功能？任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T01:34:13.810

我已经弄清楚了使它\工作所需的更改，并在教程的论坛[http://www.raywenderlich.com/forums//viewtopic.php?f=20&t=512&start=40](http://www.raywenderlich.com/forums//viewtopic.php?f=20&t=512&start=40)上发表了我的评论 希望不是太你迟到了。

为了节省您浏览论坛查找我的帖子的时间，这是我在那里发布的内容：

I have posted my fix at: [http://www.wfu.edu/~ylwong/download/cocos2d-2.0-texture/](http://www.wfu.edu/~ylwong/download/cocos2d-2.0-texture/) The HelloWorldLayer.mm is the final file incorporated all the changes so you do not have to type them in. The pdf file marks up the changes in case you want to see what the changes are.

Basically, in addition to replacing the statements that are not supported in OpenGLES 2.0, I have to add code to set up the shaders for vertex and fragment. Also, instead of using the range 0 to textureSize in the vertex arrays, I have to use the range -1 to 1, which means that in setting up the vertex arrays, the texture width is now 2, 0 becomes -1, and textureSize becomes 1.

To set up the shaders for that tutorial, we can use the ones that come with Cocos2d or write custom but simple shaders. I have included both methods to choose from.

Hope this helps!

# c# - Castle Windsor：如何将接口的所有实现注入到ctor中？

> ID：10452155
> 
> 赞同：27
> 
> 时间：2012-05-04T15:53:58.817
> 
> 标签：c#, dependency-injection, castle-windsor

我编写了一个由多个类实现的接口。我想编写一个服务类，它将所有注册的实现注入到它的ctor中。

我能想到的唯一解决方案是在 ctor 中调用 Service Locator 并要求它 Resolve() 所有实现。

理想情况下，我想要这样的东西-

```
interface IVehicle
{
    void Start();
}

class Car : IVehicle
{
    public void Start()
    {
        Console.WriteLine("Car started.");
    }
}

class Truck : IVehicle
{
    public void Start()
    {
        Console.WriteLine("Truck started.");
    }
}

class Motorbike : IVehicle
{
    public void Start()
    {
        Console.WriteLine("Motorbike started.");
    }
}

class VehicleService
{
    // How do I inject all implementations of IVehicle?
    public VehicleService(IEnumerable<IVehicle> vehicles)
    {
        foreach (var vehicle in vehicles)
        {
            vehicle.Start();
        }
    }
} 
```

**编辑**- 我应该提到我正在使用温莎城堡。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-04T16:00:42.370

你必须使用`CollectionResolver`. 查看此[温莎城堡常见问题解答](https://github.com/castleproject/Windsor/blob/master/docs/faq.md)：

> Windsor，默认情况下，当您依赖 IFoo[] 时，IEnumerable 或 IList 将检查您是否为该确切类型（数组或 IFoo 列表）注册了组件，而不是是否为 IFoo 注册了任何组件（组件数组，与作为数组的组件不同）。您可以将行为更改为“当您看到 IFoo 的数组或列表时，只需给我您可以获得的所有 IFoos”您使用 CollectionResolver。

直接链接到 Castle Resolvers：[Resolvers](https://github.com/castleproject/Windsor/blob/master/docs/resolvers.md)。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-03-14T22:01:58.810

我知道这已经得到了回答，但我认为如何添加 CollectionResolver 的示例会很有用，所以在这里。

在容器中注册组件之前调用 AddSubResolver，例如

```
container = new WindsorContainer();
container.Kernel.Resolver.AddSubResolver(new CollectionResolver(container.Kernel)); 
```

正常注册组件：

```
container.Register(
    Component.For<IVehicle>().ImplementedBy<Car>(),
    Component.For<IVehicle>().ImplementedBy<Truck>(),
    Component.For<IVehicle>().ImplementedBy<Motorbike>()
); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-12-16T17:30:20.897

尽管我仍然想念如何注册给定接口的所有实现，但发现这个答案很有用。

希望这可以帮助！

```
container.Register(
            Classes.FromAssemblyContaining<IVehicle>()
                .BasedOn<IVehicle>().WithService.FromInterface()
            ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-09-27T14:26:27.517

这里的答案都是正确的，但我只是想给它添加一点额外的皱纹：您必须在注册组件**之前添加子解析器。**

这将起作用：

```
container = new WindsorContainer();
container.Kernel.Resolver.AddSubResolver(new CollectionResolver(container.Kernel));
container.Register(
    Component.For<IVehicle>().ImplementedBy<Car>(),
    Component.For<IVehicle>().ImplementedBy<Truck>(),
    Component.For<IVehicle>().ImplementedBy<Motorbike>()
); 
```

这**行不通**_

```
container = new WindsorContainer();
container.Register(
    Component.For<IVehicle>().ImplementedBy<Car>(),
    Component.For<IVehicle>().ImplementedBy<Truck>(),
    Component.For<IVehicle>().ImplementedBy<Motorbike>()
);
container.Kernel.Resolver.AddSubResolver(new CollectionResolver(container.Kernel)); 
```

# c# - Monotouch NSInvalidArgumentException 相机

> ID：10452160
> 
> 赞同：0
> 
> 时间：2012-05-04T15:54:24.527
> 
> 标签：c#, xamarin.ios, camera

我使用 MonoTouch 创建的 iPad 应用程序有问题。在调用方法“SelectPicture”之后，我的应用程序通过调用方法“TakePicture” Lines “parent.PresentModalViewController (picker, true);”而崩溃。如果我反复调用方法“TakePicture”，我没有问题。

返回的错误是：“NSInvalidArgumentException 原因：应用程序试图在目标上呈现一个 nil 模态视图控制器。”。

```
public static class Camera
{
    static UIImagePickerController picker;
    static Action<NSDictionary> _callback;
    static UIPopoverController popover;

    static void Init ()
    {
        if (picker != null)
            return;

        picker = new UIImagePickerController ();

        picker.Delegate = new CameraDelegate ();
    }

    public static void TakePicture (UIViewController parent, Action<NSDictionary> callback)
    {
        Init ();
        picker.SourceType = UIImagePickerControllerSourceType.Camera;
        _callback = callback;                           
        Console.WriteLine("Controller TEST");
        parent.PresentModalViewController (picker, true);
    }

    public static void SelectPicture (UIViewController parent, Action<NSDictionary> callback)
    {
        if(Utils.isIpad()){

            picker = new UIImagePickerController();

            popover = new UIPopoverController(picker);
            picker.Delegate = new CameraDelegate();
            _callback = callback;
            picker.SourceType = UIImagePickerControllerSourceType.PhotoLibrary;
            picker.ContentSizeForViewInPopover = new SizeF(parent.View.Frame.Width,parent.View.Frame.Height);

            if(popover != null)
                popover.PresentFromRect(new Rectangle(0,0,1000,1),
                                        parent.View,UIPopoverArrowDirection.Any,true);

        }else{

            Init ();
            picker.SourceType = UIImagePickerControllerSourceType.PhotoLibrary;
            _callback = callback;           
            parent.PresentModalViewController (picker, true);
        }
    }

    class CameraDelegate : UIImagePickerControllerDelegate {
        public override void FinishedPickingMedia (UIImagePickerController picker, NSDictionary info)
        {
            var cb = _callback;
            _callback = null;
            picker.DismissModalViewControllerAnimated (true);
            cb (info);
            if(popover != null && popover.PopoverVisible){
                popover.Dismiss(true);                                  
                popover.Dispose();
                Console.WriteLine("DISPOSE");
            }
            picker.Dispose();   
        }
    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T08:02:58.770

我解决了我的问题。我要删除这一行：

```
 picker.Dispose(); 
```

# cakephp - Cakephp保存相关模型数据创建一个字段的空白记录

> ID：10452161
> 
> 赞同：2
> 
> 时间：2012-05-04T15:54:27.583
> 
> 标签：cakephp, associations

我整个早上都在试图解决这个问题。从其他问题中尝试了一些东西，但它要么并不真正适用于我的情况，要么不起作用。我有两张桌子：

**users** = (id,name,username,password,roles,last_edit,language)
**french_translations** = (id, french_clinical_recommendations, french_tradenames, include_drug, french_category, drug_id, user_id)

用户有许多 french_translations 和 french_translations 属于用户。

当用户添加或编辑 french_translation 时，我希望它将用户 id 保存在 french_translations 表中，即该记录的字段 user_id，然后将药物的通用名称放在用户表的 last_edit 字段中。现在它在每个表中创建一个新记录。在 users 表中，除了 id 和 last_edit 字段（将正确的药物名称放在字段中）之外，所有内容都是空白的。并且 french_translations 表有一条空白记录，其中 user_id 与 users 表中创建的空白记录相同。

控制器：

```
 function add($id = null) {
    $userid = $session->read('Auth.User.id');
    $drug = $this->FrenchTranslation->Drug->read(
      array(
          'Drug.id','Drug.generic','Drug.ahl','Drug.aap','Drug.rid','Drug.oral','Drug.mw','Drug.clinical_recommendations',
          'Drug.category','Drug.lrc'
      ),
      $id
    );
    $this->set('user',$userid);
    $this->set('drug',$drug);

    if (!empty($this->data)) {
      $french_translation['FrenchTranslation']['id'] = $this->Session->read('id');
            $this->FrenchTranslation->create();
            if ($this->FrenchTranslation->save($this->data)) {
                $this->Session->setFlash(__('The french translation has been saved', true));
                $this->redirect(array('controller'=>'drugs','action' => 'index'));
            } else {
                $this->Session->setFlash(__('The french translation could not be saved. Please, try again.', true));
            }
        }
        $drugs = $this->FrenchTranslation->Drug->find('list');
        $this->set(compact('drugs'));
    }

    function edit($id = null) {
    //$this->FrenchTranslation->id = $id;
    $userid = $this->Auth->user('id');
    $username = $this->Auth->user('name');
  //$this->FrenchTranslation->user_id = $id;
    $drug = $this->FrenchTranslation->Drug->read(
      array(
          'Drug.id','Drug.generic','Drug.ahl','Drug.aap','Drug.rid','Drug.oral','Drug.mw','Drug.clinical_recommendations',
          'Drug.category','Drug.lrc'
      ),
      $id
    );

    $this->set('drug',$drug);
    $this->set('user',$userid);
    $this->set('username',$username);

        if (!$id && empty($this->data)) {
            $this->Session->setFlash(__('Invalid french translation', true));
            $this->redirect(array('action' => 'index'));
        }
        if (!empty($this->data)) {
            if ($this->FrenchTranslation->saveAll($this->data)) {
                $this->Session->setFlash(__('The french translation has been saved', true));
                $this->redirect(array('controller'=>'drugs','action' => 'index'));
            } else {
                $this->Session->setFlash(__('The french translation could not be saved. Please, try again.', true));
            }
        }
        if (empty($this->data)) {
            $this->data = $this->FrenchTranslation->read(null, $id);
        }
        $drugs = $this->FrenchTranslation->Drug->find('list');
        $this->set(compact('drugs'));
    }

    function delete($id = null) {
        if (!$id) {
            $this->Session->setFlash(__('Invalid id for french translation', true));
            $this->redirect(array('action'=>'index'));
        }
        if ($this->FrenchTranslation->delete($id)) {
            $this->Session->setFlash(__('French translation deleted', true));
            $this->redirect(array('action'=>'index'));
        }
        $this->Session->setFlash(__('French translation was not deleted', true));
        $this->redirect(array('action' => 'index'));
    } 
```

编辑视图：

```
 <?php echo $this->Form->input('User.last_edit',array('type'=>'hidden','value'=>$drug['Drug']['generic'])); ?>    
    <?php echo $this->Form->input('user_id', array('type'=>'hidden','value'=>$user)); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T04:10:08.153

这是一个迟到的答案，但你不应该使用视图来设置安全变量，如`user_id`. 相反，您可以在控制器中设置这些变量：

```
$this->request->data['User']['last_edit'] = $this->request->data['Drug']['generic']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T13:35:50.640

我想通了，但是，我觉得有一种更好，更安全的方法。我正在使用安全组件，并且一个人必须登录才能查看任何站点，因此它可能足够安全。

我只是为用户 ID 添加了一个 user.id 输入，此时它可以找到合适的用户来存储 last_edit。在控制器中，我有一个名为 $userid 的变量，它使用它获取当前用户 ID，并使用我在药物 user_id 字段的输入中使用相同的用户 ID 值`$userid = $this->Auth->user('id');`传递给视图。`$ths->set('user',$userid);`

看法：

```
<?php echo $this->Form->input('User.id',array('type'=>'hidden','value'=>$user));//The user ID last edit will be stored in ?>
<?php echo $this->Form->input('User.last_edit',array('type'=>'hidden','value'=>$drug['Drug']['generic']));//The drug edited last by the specified user ?> 
```

# cocoa - WebView中链接的NSRect坐标

> ID：10452162
> 
> 赞同：1
> 
> 时间：2012-05-04T15:54:28.017
> 
> 标签：cocoa, webview, screen, coordinates

我正在尝试找到一种方法来获取 WebView 中链接的屏幕/NSRect 坐标。我想用 NSView 来做，但我找不到任何通往 webView 的方法。一种可能的方法是通过 WebView 使用来自 Objective C 的 Javascript，但这看起来很复杂。

我在这里有什么选择？

我试图这样做的原因是我想用 WebView 拍摄网页的图像，并为图像上的链接创建一个 html 链接映射。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T15:34:20.927

这几乎完美无缺。最终图像中的某些链接不合适，但我认为这可能是 DOM 问题？

```
- (NSString *)constructLinkMap
{
    NSMutableString *result = nil;
    int i = 0;
    int linksCount = 0;

    result = [NSMutableString string];
    linksCount = [[[[webView mainFrame] DOMDocument] getElementsByTagName:@"a"] length];

    [result appendString:@"<map name=\"linkmap\">"];

    for (i = 0; i < linksCount; i++) {

        id linkItem = [[[[webView mainFrame] DOMDocument] getElementsByTagName:@"a"] item:i];

        if (([linkItem text] && ([[linkItem text] length] > 0)) && ([linkItem href] && ([[linkItem href] length] > 0))) {

            DOMRange *domRange = [webView selectedDOMRange];
            [domRange selectNode:linkItem];
            NSRect box = [linkItem boundingBox];

            if ((box.size.width > 0) && (box.size.height > 0))
                [result appendFormat:@"<area class=\"map\" shape=\"rect\" coords=\"%2.0f,%2.0f,%2.0f,%2.0f\" href=\"%@\" alt=\"%@\" />", box.origin.x, box.origin.y, (box.origin.x + box.size.width), (box.size.height + box.origin.y), [linkItem href], [linkItem text]];

            }
    }
    [result appendString:@"</map>"];

    return result;
} 
```

# php - 引用没有值的 PHP 变量

> ID：10452166
> 
> 赞同：1
> 
> 时间：2012-05-04T15:54:39.207
> 
> 标签：php, variables

我刚刚将一个 PHP 网站从 Linux 服务器转移到 Windows。除了一个巨大的不同外，一切似乎都一样：

`$_GET['action']`在 Linux 服务器上，如果未设置，则忽略以下代码：

```
$action = $_GET['action'];
if($action=='add'){
    echo 'good';
} 
```

但是，这会阻止页面加载到 Windows 服务器上。

起作用的是：

```
if(isset($_GET['action'])){
    $action = $_GET['action'];
}else{
    $action='';
}

if($action=='add'){
    echo 'good';
} 
```

2个问题：

1.  有没有办法将服务器配置为更宽容没有值的变量？

2.  第二个代码示例是更好的做法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:57:02.587

```
Is there a way to configure the server to be more forgiving of variables that don't have a value? 
```

在变量前面放一个`@`符号会告诉 php 忽略错误。但我认为这是不好的做法。

```
Is the second code example better practice? 
```

我确实认为这是一个很好的做法，检查总是好的。

IMO 你应该选择第二个，你总是可以使用三元运算符。所以而不是

```
if(isset($_GET['action'])){
    $action = $_GET['action'];
}else{
    $action='';
} 
```

你可以写

```
$action = isset($_GET['action']) ? $_GET['action'] : ''; 
```

两者都做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:00:09.033

第二台服务器仅配置为默认显示错误，而第一个服务器则没有。

如果您将以下代码放在页面顶部，它也会在第一台服务器上显示通知：

```
error_reporting(E_ALL); 
```

检查变量是否存在始终是一个好习惯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:33:48.997

在我看来，检查是否设置了数组索引或变量绝对是更好的做法，并保持您的错误报告保守地冗长。

为了便于处理数据并避免每次出现这种情况时都将我的代码与三元组混淆（通常，如果您使用 PHP 数组来保存可选配置数据但想在代码中嵌入合理的默认值），我一直发现它建设性地在我的核心实用程序代码中隐藏一个数组提取函数，如下所示：

```
function aex( &$srcArray, $variableName, $defaultValue = null )
{
    return isset( $srcArray[$variableName] )
            ? $srcArray[$variableName]
            : $defaultValue
            ;
} 
```

那么你只需像这样提取你的变量：

```
$action = aex( $_GET, 'action', 'none' ); 
```

并且会保证有有用的价值，不会抛出警告。

# sql - 使用 SQL 查询将两个后续行合二为一

> ID：10452173
> 
> 赞同：0
> 
> 时间：2012-05-04T15:54:59.113
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-server-2005

我是 SQL 的初学者，我在 SQL 中有以下问题。

我需要一个 SQL 查询来计算字段 [idpersone] 中具有相同值的两个连续行之间的差异，并将它们重新组合成一行。

例如，我需要将我的表转换为所需的数据，如下所示：

```
Table data:
idLigne | idperson | statut
--------|----------|-------
   L1         1         A
   L2         1         B
   L3         1         A
   L4         1         B
   L5         2         A
   L6         2         B
   L7         3         A
   L8         3         B

Desired output: 
idLigne | idpersonne | firstLighe | secondLigne
--------|------------|------------|------------
 L2-L1         1           L1           L2
 L4-L3         1           L3           L4
 L6-L5         2           L5           L6
 L8-L7         2           L7           L8 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:01:31.527

幼稚的解决方案是这个......

如果有相同的三个记录，我不确定你想做什么`idperson`。或者如果顺序记录有不同的 idperson 怎么办。

```
WITH
  sequenced_data
AS
(
  SELECT
    ROW_NUMBER() OVER (PARTITION BY idperson ORDER BY idLigne) AS sequence_id,
    *
  FROM
    myTable
)
SELECT
  *
FROM
  myTable as firstLigne
LEFT JOIN
  myTable as secondLigne
    ON  secondLigne.idperson    = firstLigne.idperson
    AND secondLigne.sequence_id = firstLigne.sequence_id + 1
WHERE
  (firstLigne.sequence_id % 2) = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:15:01.297

你可以尝试这样的事情：

```
DECLARE @MyTable TABLE(idLigne VARCHAR(2), idperson INT, statut CHAR(1));

INSERT INTO @MyTable VALUES ('L1',1,'A')
, ('L2',1,'B')
, ('L3',1,'A')
, ('L4',1,'B')
, ('L5',2,'A')
, ('L6',2,'B')
, ('L7',3,'A')
, ('L8',3,'B')

; WITH a AS (
    SELECT idLigne=t2.idLigne+'-'+t1.idLigne
    , idpersonne=t1.idperson
    , firstLigne=t1.idLigne
    , secondLigne=t2.idLigne
    , r1=ROW_NUMBER()OVER(PARTITION BY t1.idLigne ORDER BY t2.idLigne)
    , r2=ROW_NUMBER()OVER(PARTITION BY t2.idLigne ORDER BY t1.idLigne)
    FROM @MyTable t1
    INNER JOIN @MyTable t2 ON t1.idperson=t2.idperson AND t1.statut='A' AND t2.statut='B'
)
SELECT idLigne
    , idpersonne
    , firstLigne
    , secondLigne
FROM a WHERE r1=r2
GO 
```

结果：

![在此处输入图像描述](../Images/cc0fb9e1a1996ac06e9c2ba0232e2a9b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T03:45:20.050

我无法准确推断出您查询的意图。但它是这样的：

```
with a as
(
   select *, 
     (row_number() over(order by idLigne, idperson) - 1) / 2 as pair_number 
   from tbl
)
select 
   max(idligne) + '-' + min(idligne) as idLigne, 
   min(idperson) as idpersonne,
   min(idLigne) as firstlighe, max(idLigne) as secondLigne       
from a
group by pair_number 
```

输出：

```
IDLIGNE IDPERSONNE  FIRSTLIGHE  SECONDLIGNE
L2-L1   1           L1          L2
L4-L3   1           L3          L4
L6-L5   2           L5          L6
L8-L7   3           L7          L8 
```

现场测试：[http ://www.sqlfiddle.com/#!3/26371/20](http://www.sqlfiddle.com/#!3/26371/20)

# c# - C#：在本地字符串中正确编码转义的 Unicode 字符（即：不是 \\u20ac）

> ID：10452177
> 
> 赞同：0
> 
> 时间：2012-05-04T15:55:13.430
> 
> 标签：c#, .net, string, text, encoding

**C#**：我有一个来自网页源代码的字符串：

```
<script type="text/javascript">
var itemsLocalDeals = [{"category":"HEALTHCARE SERVICES",
"dealPermaLink":"/deals/aachen/NLP-Deutschlandde
5510969","dealPrice":"399,00 \u20ac",.......... 
```

我对那个字符串做了一些事情，例如提取**dealPrice**并将其添加到 List<> （在整个字符串中不止一个*dealPrice*）。

有没有一种方法可以将所有“ *\u20ac* ”解码为它们的真实字符（“€”）？还有其他字符，因此不仅需要解码 €-Character。

**当我调试我的代码并查看本地字段/变量时，字符串不包含“€”字符，而是转义序列“\\u20ac”。**

像 myString.DecodeUnicodeToRealCharacters 这样的东西。

我正在将结果写入 (UTF-8)result.txt

非常感谢！

PS：不幸的是.Net 2.0只有......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:04:57.580

您可以使用`Regex.Unescape("\u20ac");`

但最好使用 json 解析器，因为您的字符串似乎是 json 字符串（以 开头`[{"category":"HEALTHCARE SERVICES",.....`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:08:14.960

```
public string DecodeUnicodeToRealCharacters(string s)
{
    return Encoding.Unicode.GetString(Encoding.Unicode.GetBytes(s));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:07:43.220

您能否显示您用于编写文本的代码？这个工作得很好：

```
string str = "\u20ac";
using (StreamWriter sw = new StreamWriter(@"C:\trythis.txt", false, Encoding.UTF8)){
    sw.Write(str);
} 
```

# delphi - 如何在接口中实现参数化方法以在 Spring Framework 中使用

> ID：10452181
> 
> 赞同：3
> 
> 时间：2012-05-04T15:55:28.050
> 
> 标签：delphi, interface, spring4d

我正在尝试集成 Aurelius ORM 框架和 Spring 4D 框架，并且我大部分都成功了，但是 Aurelius ORM（以及其他）依赖于“对象管理器”来加载和保存数据库中的对象。我正在做的部分工作是尽可能多地分离类的实现和接口。但是，在为此对象管理器（Aurelius 中的 TObjectManager）创建接口时，我很难实现对象管理器的“查找”方法。例如，对象管理器支持以下方法：

```
MyObjectManager := TObjectManager.Create(Connection);
ExistingSale := MyObjectManager.Find<TSale>(1); // Find the Sale record with ID = 1 of the class TSale. 
```

现在尝试将 ObjectManager 声明转换为接口我尝试按以下方式进行操作：

```
IObjectManager = Interface
     ['{1F54162B-D7D7-4E42-AC9D-D269803371DB}']
     function Find<T>(ID: Integer) : T;
end; 
```

这就是问题所在，因为编译器失败并出现错误：

```
[DCC Error] E2535 Interface methods must not have parameterized methods 
```

基本上我需要想出一个可以在我自己的对象管理器中调用的接口函数，例如：

```
function TMyOwnObjectManager.Find<T>(ID: Integer) : T;
begin
     Result:=fAureliusObjectManager.Find<T>(ID);
end; 
```

感谢任何人的帮助，几天来一直试图提出一个灵魂。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T23:59:41.363

好的，虽然不是我正在寻找的关于接口声明的解决方案，但我设法克服了从 TObjectManager 继承的问题并通过以下方式重新声明 Find 函数：

```
function TMyOwnManager.Find(Class: TClass; IdValue: Variant): TObject; 
begin 
    // Call the TObjectManager protected method "Find(Clazz:TClass; IdValue: Variant)" 
    Result := inherited Find(TClass(Class), IdValue); 
end; 
```

希望它可以帮助某人。

# javascript - Raphaël.js：如何缩放圆形的填充图像以适合圆形？

> ID：10452185
> 
> 赞同：1
> 
> 时间：2012-05-04T15:55:49.550
> 
> 标签：javascript, html, svg, raphael, vml

我正在尝试使用 Raphael 的 VML 功能来生成带有图像的圆圈（修复了缺少边框半径的 IE8）。

我的问题是，如果我使用

```
circle.attr({fill: 'url(image.jpg)'}); 
```

而且我的图像大于仅部分显示图像的圆圈，我找不到将图像缩小到圆圈直径的方法。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:32:57.503

您是否认真考虑使用 RaphaelJS 修复 IE8 边框半径？我会建议像[css3pie](http://css3pie.com/)这样的东西，甚至[在 SO 中](https://stackoverflow.com/questions/4326363/using-css3pie-htc-for-border-radius-in-ie8)还有关于使用的问题。

但是，如果你想使用 RaphaelJS，你将需要使用[Element.transform](http://raphaeljs.com/reference.html#Element.transform)来缩放你的图像，然后才能使用另一个元素设置圆角效果。

# c++ - 是否有任何标准方法可以在没有 QCompleter 的情况下从 QLineEdit 创建下拉菜单？

> ID：10452187
> 
> 赞同：5
> 
> 时间：2012-05-04T15:56:02.993
> 
> 标签：c++, qt, input, menu, drop-down-menu

是否有任何标准方法可以在没有 QCompleter 的情况下从 QLineEdit 创建下拉菜单？例如，使用 QMenu 或创建自己的类。或者还有其他现有的小部件？

或者也许我应该为 QCompleter 使用 QAbstractItemModel？我考虑过，但我不是很了解这个 QAbstractItemModel。如果您有以这种方式创建菜单的经验，也请帮助我。

所以我需要一种常见的下拉菜单类型：带有线条的菜单，每个菜单本身都包含图标（QPixmap）和文本（QLabel）。就像在 Opera 或 Chrome 浏览器中的地址输入行，如 Apple Spotlight 的右侧部分等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:23:16.473

QMenu 不可能，因为它在显示时捕捉焦点，在失去焦点时隐藏。但是，可以为此使用 QListWidget（或任何其他常规小部件）。我为概念验证开发了一些工作示例。它是以 QMainWindow 作为主窗口的默认 Qt Widget 项目。您需要在其中添加带有名称的 QLineEdit`"lineEdit"`并为`textChanged`signa 创建插槽。这是代码：

`MainWindow.h`：

```
class MainWindow : public QMainWindow {
  Q_OBJECT  
public:
  explicit MainWindow(QWidget *parent = 0);
  ~MainWindow();  
private slots:
  void on_lineEdit_textChanged(const QString &arg1);
private:
  Ui::MainWindow *ui;
  QListWidget* list;
}; 
```

`MainWindow.cpp`：

```
#include "MainWindow.h"
#include "ui_MainWindow.h"
#include <QDebug>

MainWindow::MainWindow(QWidget *parent) :
  QMainWindow(parent),
  ui(new Ui::MainWindow),
  list(new QListWidget)
{
  ui->setupUi(this);
  list->setWindowFlags(Qt::WindowFlags(
    Qt::FramelessWindowHint | Qt::WindowStaysOnTopHint));
  list->setAttribute(Qt::WA_ShowWithoutActivating);
}

MainWindow::~MainWindow() {
  delete list;
  delete ui;
}

void MainWindow::on_lineEdit_textChanged(const QString &arg1) {
  if (ui->lineEdit->text().isEmpty()) {
    list->hide();
    return;
  }
  list->clear();
  list->addItem(ui->lineEdit->text());
  list->addItem(tr("Google: ") + ui->lineEdit->text());
  list->move(ui->lineEdit->mapToGlobal(QPoint(0, ui->lineEdit->height())));
  if (!list->isVisible()) list->show();
} 
```

有几个问题：当行编辑失去焦点或用户移动窗口时你应该隐藏菜单，你不能在行编辑中使用向下箭头按钮将焦点设置在菜单上等。但我相信所有这些问题都可以轻松解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T22:09:12.510

根据您的描述，您可以尝试一个可编辑的`QComboBox`：它有自己的模型和视图，自己的完成者，并且可以显示图标。

```
QComboBox *comboBox = new QComboBox;
...
comboBox->setEditable(true);
// The completer popup isn't enabled by default
comboBox->completer()->setCompletionMode(QCompleter::PopupCompletion); 
```

而且由于它可以显示图标，我想您可以使用带有`QCompleter`a 的常规和带有图标的模型。对于模型，您可以使用.`QLineEdit``QCompleter``QStandardItemModel`

# f# - 关于 FParsec 处理空白的建议

> ID：10452190
> 
> 赞同：5
> 
> 时间：2012-05-04T15:56:14.770
> 
> 标签：f#, fparsec

我有以下子表达式来解析具有以下格式的“引号”

```
"5.75 @ 5.95" 
```

因此我有这个解析表达式来解析它

```
let pquote x = (sepBy (pfloat) ((spaces .>> (pchar '/' <|>  pchar '@' )>>. spaces))) x 
```

它工作得很好..除非我的输入中有一个尾随空格，因为分隔符表达式开始消耗内容。所以我将它包裹在一个尝试中，根据我的理解，它工作并且似乎或多或少是什么意思成为。

```
let pquote x = (sepBy (pfloat) (attempt (spaces .>> (pchar '/' <|>  pchar '@' )>>. spaces))) x 
```

因为我不太了解 fparsec，所以我想知道是否有更好的方法来写这个。它似乎有点重（当然仍然非常易于管理）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T18:18:02.587

```
let s1 = "5.75         @             5.95              "
let s2 = "5.75/5.95   "
let pquote: Parser<_> =
    pfloat
    .>> spaces .>> skipAnyOf ['@'; '/'] .>> spaces
    .>>. pfloat
    .>> spaces 
```

笔记：

1.  ~~我在任何`spaces`地方都设置了可选，~~ `spaces`跳过了任何*零*个或多个空格的序列，所以没有必要使用`opt`- 谢谢@Daniel；
2.  `type Parser<'t> = Parser<'t, UserState>`- 我这样定义是为了避免“值限制”错误；您可以删除它；
3.  ~~另外，如果您的程序可以在默认语言设置为十进制逗号的系统上运行，请不要忘记以下内容：`System.Threading.Thread.CurrentThread.CurrentCulture <- Globalization.CultureInfo.GetCultureInfo "en-US"`~~这不起作用，谢谢@Stephan
4.  `sepBy`除非我有一个未知大小的值列表，否则我不会使用。
5.  如果您真的不需要返回的值（例如字符），出于性能考虑`'@'`，建议改用`skip*`函数。`p*`

*UPD*添加斜杠作为分隔符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:12:25.187

我可能会做这样的事情，它返回`float * float`：

```
let ws = spaces
let quantity = pfloat .>> ws
let price = pfloat .>> ws
let quoteSep = pstring "@" .>> ws
let quote = quantity .>> quoteSep .>>. price //`.>> eof` (if final parser) 
```

每个解析器通常都会使用尾随空格。只需确保您的顶级解析器包含`eof`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:21:21.857

假设您可以`float`在输入中有两个以上，并且 '/' 和 '@' 是分隔符：

```
let ws = spaces
let str_ws s = pstring s .>> ws
let float_ws = pfloat .>> ws
let pquote = sepBy float_ws (str_ws "/" <|> str_ws "@") 
```

谈到处理空格， FParsec 教程中的[这一部分](http://www.quanttec.com/fparsec/tutorial.html#handling-whitespace)真的很有帮助。

# asp.net - JavaScriptDeserializer 异常解析 JSON 响应

> ID：10452192
> 
> 赞同：1
> 
> 时间：2012-05-04T15:56:21.387
> 
> 标签：asp.net, json, deserialization

我正在解析来自 Citrix 的 Web 服务的 JSON 响应。响应看起来像这样

```
[{\"webinarKey\":123456,\"subject\":\"Subject\",\"description\":\"Webinar Description. \",\"organizerKey\":123456,\"times\":[{\"startTime\":\"2012-05-08T16:00:00Z\",\"endTime\":\"2012-05-08T17:00:00Z\"}],\"timeZone\":\"America/New_York\"}] 
```

我手动编辑了该字符串以删除识别信息，因此如果缺少引号或任何不相关的内容。

我在 SO 上按照这个答案中的示例进行操作，但仍然遇到错误。

[使用 Json 和 JavaScriptSerializer 反序列化 JSON 结果](https://stackoverflow.com/questions/5838811/deserializing-json-result-with-json-javascriptserializer)

```
public class Webinars {
    public string webinarKey;
    public string subject;
    public string description;
    public string organizerKey;
    public WebinarTimes[] times;
    public string timeZone;
}

public class WebinarTimes {
    public string startTime;
    public string endTime;
}

JavaScriptSerializer jss = new JavaScriptSerializer();
var foo = jss.Deserialize<Webinars>(JSON); 
```

我收到以下错误：`Type 'Web.Site.Webinars' is not supported for deserialization of an array.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:04:16.267

你必须使用`IList<Webinars>`而不是`Webinars`

```
var foo = jss.Deserialize<IList<Webinars>>(JSON); 
```

# java - 带有 X509 证书和 Java 客户端的 WCF 服务

> ID：10452194
> 
> 赞同：0
> 
> 时间：2012-05-04T15:56:23.123
> 
> 标签：java, wcf, x509

我正在研究将在**HTTPS over internet**上运行的 WCF 服务。我计划在服务（服务器证书）和客户端（客户端证书）上使用 X.509 证书来保护 WCF 服务。以下是我的问题。

1.  客户端将是一个 Java 应用程序，会有任何兼容性问题吗？
2.  通过 HTTPS 在 clientCredentialType="Certificate" 模式下运行的 WCF 是否有任何问题？

在这里发帖之前，我做了很多研究，并在这个论坛上解决了很多问题。但现在我正处于一个越来越困惑的地步。

提前感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:35:54.203

我假设您只使用传输级安全性 (ssl) 而不是消息级安全性 (ws-security)。您在这里应该没有任何特殊问题。请注意，大多数 java 客户端使用 jks 证书格式，并且在 windows 上 pfx 更好。

# c - 更改 glibc 但没有任何反应

> ID：10452195
> 
> 赞同：2
> 
> 时间：2012-05-04T15:56:25.743
> 
> 标签：c, linux, gcc, glibc

我想修改 glibc。所以我下载了它的一个版本并对代码进行了一些更改。例如，我对`memset`. 但是，如果我使用编译生成的 .so 文件（使用 LD_PRELOAD）与不执行任何 LD_PRELOAD 时相比，我看不出有任何区别。memset 的行为就像它一样。为什么呢？是不是编译器正在内联 memset 而没有使用共享对象中的任何内容？我不明白这一点。我什至对 printf 进行了更改，但仍然没有。为什么呢。如何修改 glibc（用于测试目的），以便我看到变化？

`printf( "pthread_create")`此外，当我试图通过在该函数的开头引入来更改 pthread_create（当然还有 LD_PRELOAded libpthread.so）时，我只是遇到了分段错误。这里发生了什么？此外，如果我在更改 glibc 源代码后检查 libc.so 中的差异，我发现生成的版本没有差异。这里发生了什么。这让我发疯！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:03:29.400

[GCC 提供了几个函数](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)的内置版本，包括`memset()`和`printf()`。它没有链接到 glibc 对这些函数的实现。

尝试传递`-fno-builtin`编译器选项来禁止这种行为。

# objective-c - UIButton 调用选择器使应用程序崩溃

> ID：10452197
> 
> 赞同：1
> 
> 时间：2012-05-04T15:56:34.087
> 
> 标签：objective-c, ios, cocoa-touch, cocoa

在我的应用程序中，我有一个按钮，它是已经在 .h 文件中声明的实例变量。现在，在为其分配目标并实际按下按钮后，应用程序崩溃，在调试器中给我以下输出：

```
-[__NSCFString handleActionSheet:]: unrecognized selector sent to instance 0x9090330
2012-05-04 17:51:02.646 financeAppV2[2595:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString handleActionSheet:]: unrecognized selector sent to instance 0x9090330'
*** First throw call stack:
(0x13d1022 0x1562cd6 0x13d2cbd 0x1337ed0 0x1337cb2 0x13d2e99 0x1e14e 0x1e0e6 0xc4ade 0xc4fa7 0xc3d8a 0x2dfa1a 0x13a599e 0x133c640 0x13084c6 0x1307d84 0x1307c9b 0x12ba7d8 0x12ba88a 0x1b626 0x29dd 0x2945)
terminate called throwing an exceptionCurrent language:  auto; currently objective-c 
```

我的代码如下所示：

```
saveButton=[UIButton buttonWithType:UIButtonTypeCustom];
[saveButton setBackgroundImage:[UIImage imageNamed:@"intervalbutton"] forState:UIControlStateNormal];
[saveButton setBackgroundImage:[UIImage imageNamed:@"intervalbuttonpressed"] forState:UIControlStateHighlighted];
saveButton.alpha=.8;
saveButton.frame= frame;
UILabel* label=[[UILabel alloc]initWithFrame:CGRectMake(0, 2, saveButton.frame.size.width, 21)];
[saveButton addSubview:label];

[saveButton addTarget:self action:@selector(handleActionSheet:) forControlEvents:UIControlEventTouchDown];

[self.view addSubview:saveButton];

-(void)handleActionSheet:(id)sender{
NSLog(@"working"); 
```

}

任何想法为什么应用程序可能会崩溃？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:20:18.197

如果没有看到您的其余代码，很难具体说明，但`self`没有正确保留。

您正确设置了按钮（据我所知）并将目标指向`self`. 不幸的是，当您按下按钮`self`时，已经超出范围，并且`NSString`. 当您发送字符串`handleActionSheet:`消息时，iOS 会感到惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:58:47.317

您正在向`initAllIVars:`一个`__NSCFString`对象（可能是一个`NSString`）发送一条名为的消息。

搜索该消息并尝试找出为什么接收消息的对象是`NSString`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:11:43.140

刚刚测试了你的代码，它可以工作。也许框架没有正确设置

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    UIButton *saveButton = [[UIButton alloc] init];
    saveButton=[UIButton buttonWithType:UIButtonTypeCustom];
    [saveButton setBackgroundImage:[UIImage imageNamed:@"intervalbutton"] forState:UIControlStateNormal];
    [saveButton setBackgroundImage:[UIImage imageNamed:@"intervalbuttonpressed"] forState:UIControlStateHighlighted];
    saveButton.alpha=.8;
    saveButton.frame= CGRectMake(5, 5, 200, 40);
    UILabel* label=[[UILabel alloc]initWithFrame:CGRectMake(0, 2, saveButton.frame.size.width, 21)];
    label.text = @"Hello";
    [saveButton addSubview:label];

    [saveButton addTarget:self action:@selector(handleActionSheet:) forControlEvents:UIControlEventTouchDown];

    [self.view addSubview:saveButton];

}

-(void)handleActionSheet:(id)sender{
    NSLog(@"working");
} 
```

# svn - 如何在第一次更新时只更新特定的 svn external？

> ID：10452199
> 
> 赞同：2
> 
> 时间：2012-05-04T15:56:49.113
> 
> 标签：svn

我已经成功添加了外部存储库，我们可以通过对父文件夹进行递归更新来更新存储库，并且外部显示正确。

```
svn up parent 
```

但是，父文件夹中的开发工作不需要升级到暂存/生产。我很难仅针对外部而不对整个目录进行递归更新。每次使用时都会让我想念

```
svn up -r 6 parent/external/ 
```

我感谢任何关于在不更新整个目录的情况下对单个外部进行初始更新的建议。

附带说明：我正在与之合作的公司使用带有文件版本号的主干进行部署（不理想）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:54:37.857

根据我对您在评论中所写内容的理解，您所看到的是正常行为：在实际签出外部之前，您无法更新它，因为它还不受版本控制。`svn:external`property 只是 SVN 客户端从另一个存储库中签出某些内容的指令。完成后，您可以将其与其余部分分开更新和提交。甚至还有一个命令开关—— `--ignore-externals`这使它更容易。

# sql - Oracle SQL 自定义通配符

> ID：10452200
> 
> 赞同：0
> 
> 时间：2012-05-04T15:56:54.713
> 
> 标签：sql, regex, oracle

我试图找到与某个指纹匹配的所有内容，但 Oracle 的通配符并不是非常精确。

该指纹将是： WHERE symbol LIKE '%_####@' ESCAPE '\'

前面的内容无关紧要（% 通配符）
接下来是一个下划线（用 '\' 转义）
然后是四个数字 (#)
，最后是一个字符 AZ (@)

我使用翻译功能找到了一些东西，但我无法让它工作。现在我正在研究正则表达式，但我以前从未使用过它们。我试图了解它们是什么以及它们将如何解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:02:47.233

听起来您想使用正则表达式，而不是 LIKE。您的“指纹”似乎被正则表达式捕获，`[_][[:digit:]]{4}[A-Z]`因此您可以使用它`regexp_instr`来确定指纹是否存在（以及它在字符串中的位置）。在这种情况下，字符串 '_1234B' 是第一个字符串中的指纹，从位置 7 开始

```
SQL> ed
Wrote file afiedt.buf

  1  with x as (
  2    select 'sb1234_1234Bdelta' str from dual union all
  3    select 'no match' from dual
  4  )
  5  select str,
  6         regexp_instr( str, '[_][[:digit:]]{4}[A-Z]' )
  7    from x
  8*  where regexp_instr( str, '[_][[:digit:]]{4}[A-Z]' ) > 0
SQL> /

STR               REGEXP_INSTR(STR,'[_][[:DIGIT:]]{4}[A-Z]')
----------------- ------------------------------------------
sb1234_1234Bdelta                                          7 
```

# ios - 加载时更改颜色的ios栏

> ID：10452207
> 
> 赞同：1
> 
> 时间：2012-05-04T15:57:29.907
> 
> 标签：ios, custom-controls

我目前正在开发自己的项目，我想实现自定义加载控件。这几乎是您可以在应用程序 Amen 中找到的内容。彩色条仅在应用程序从服务器加载内容时出现。

任何提示将不胜感激。谢谢。

[这里有一些图像，以使其更清晰](http://www.flickr.com/photos/77896528@N07/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:19:57.417

“硬”部分将编写一个`UIView`处理绘制颜色的子类。您将要覆盖该`drawRect:`方法并弄清楚如何知道进度（或者它只是“自动增量”？）并在此基础上进行绘制/填充。然后，您可以简单地`UIView`在 Interface Builder 中添加一个，更改视图的 Class 类型，适当调整它的大小，然后就可以了！

“简单”的部分是，当您希望视图不可见时，您可以执行以下操作之一：

1.  `frame`通过更改其属性将视图移出屏幕。（这可以是“瞬时的”或动画的。）
2.  通过更改其`hidden`属性将视图设置为不可见。（您也可以对此进行动画处理！）
3.  通过使用完全摆脱视图`[barView removeFromSuperview]`。

* * *

***更新/编辑***

对于实际绘图，试试这个（快速完成，未测试，所以 YMMV）：

```
//  ColorProgressBar.h
#import <UIKit/UIKit.h>
@interface ColorProgressBar : UIView {
    float colorWidth;
    float progressPercent;
    NSMutableArray *colors;
}
@property (assign, nonatomic) float colorWidth;
@property (assign, nonatomic) float progressPercent;
@property (strong, nonatomic) NSMutableArray *colors;
@end

//  ColorProgressBar.m
#import "ColorProgressBar.h"
@implementation ColorProgressBar
@synthesize colors;
@synthesize colorWidth;
@synthesize progressPercent;
- (id)initWithFrame:(CGRect)frame {
    self = [super initWithFrame:frame];
    if (self) {
        // Make the color array to use (this is spelled out for clarity)
        [self setColors:[NSMutableArray array]];
        [[self colors] addObject:[UIColor redColor]];
        [[self colors] addObject:[UIColor orangeColor]];
        [[self colors] addObject:[UIColor yellowColor]];
        [[self colors] addObject:[UIColor greenColor]];
        [[self colors] addObject:[UIColor blueColor]];
        [[self colors] addObject:[UIColor purpleColor]];
    }
    return self;
}
- (void)drawRect:(CGRect)rect {
    CGFloat left = 0;
    CGRect drawBox = CGRectZero;
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextClearRect(ctx, rect);
    int colorIndex = -1;
    // Draw each color block from left to right, switching to the next color each time
    do {
        colorIndex = colorIndex + 1;
        if (colorIndex >= [[self colors] count]) colorIndex = 0;
        [(UIColor *)[[self colors] objectAtIndex:colorIndex] setFill];
        drawBox = CGRectMake(left, 0, [self colorWidth], rect.size.height);
        CGContextFillRect(ctx, drawBox);
    } while (left < rect.size.width);
    // Figure out where the "faded/empty" part should start
    left = [self progressPercent] * rect.size.width;
    drawBox = CGRectMake(left, 0, rect.size.width - left, rect.size.height);
    [[UIColor colorWithWhite:1.0 alpha:0.5] setFill];
    CGContextFillRect(ctx, drawBox);
}
@end 
```

使用此代码，您可以使用此 UIView 子类，并且每次您想要更新进度时，您只需设置您的 progressPercent（它是一个设计范围从 0.00 到 1.00 的浮点数）并调用`[myView setNeedsDisplay]`. 应该是这样！;-)

# java - 从 Oracle 数据库转换具有 AM/PM 日期时间的字符串

> ID：10452210
> 
> 赞同：3
> 
> 时间：2012-05-04T15:57:42.170
> 
> 标签：java, parsing, simpledateformat, java.util.date

我有时间戳，`03-AUG-12 08.15.00.000000000 PM -05:00` 我无法`String`在`yyyy-MM-dd HH:mm:ss`.

这是我的代码：

```
public static void convert() {

    String oldstring = "03-AUG-12 08.15.00.000000000 PM -05:00";
    Date date = null;
    try {
        date = new SimpleDateFormat("dd-MMM-yy HH.mm.ss.S aa").parse(oldstring);
    }
    catch (ParseException e) {
        e.printStackTrace();
    }

    String newstring = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss").format(date);
    System.out.println(newstring);
} 
```

基本上它是来自 Oracle 数据库的具有时区格式的时间戳。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:22:35.557

您不能使用 SimpleDateFormat 解析这样的字符串，至少并非没有一些限制：

*   Java 7 之前不支持像 -05:00（根据 ISO 8601）这样的时区指示符。使用 Java 7，您可以使用 XXX 模式来解析它。

*   要正确解析月份名称，您应该指定您需要英语语言环境。

*   毫秒 (S) 模式解析无限数量的数字。如果您的字符串包含“08.15.00.100000000”，SimpleDateFormat 会将其解析为 8:15:00 和 100000000 毫秒，从而为预期值增加近 28 小时。如果您确定该值始终为 0，则可以忽略此问题。

如果您可以接受最后一个问题并使用 Java 7，那么您应该使用如下内容：

`new SimpleDateFormat("dd-MMM-yy hh.mm.ss.S aa XXX", Locale.ENGLISH)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:11:26.293

像这样改变这一行：

```
 date = new SimpleDateFormat("dd-MMM-yy hh.mm.ss.S aa").parse(oldstring); 
```

您需要使用`h`解析 AM/PM 小时 1-12 的小写字母。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-05T21:59:38.633

# javascript - Phonegap - 配置 config.xml 文件以启用摄像头

> ID：10452215
> 
> 赞同：4
> 
> 时间：2012-05-04T15:58:03.870
> 
> 标签：javascript, html, mobile, jquery-mobile, cordova

我正在尝试创建一个使用设备上的相机的应用程序。当我在我的 Android 手机上运行该应用程序时，我可以让它正常工作。但是，当我使用 Phonegap 构建器打包它时，我似乎无法打开相机。

我的猜测是 config.xml 文件有问题。这是我的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
   <widget xmlns       = "http://www.w3.org/ns/widgets"
      xmlns:gap   = "http://phonegap.com/ns/1.0"
      id      = "com.test.testApp"
      version     = "1.0.0">

   <name>Test App</name>

   <description>
       Test Description
   </description>

   <author href="http://mysite.com"
       email="geoff@email.com">
       Geoff Baum
   </author>

   <gap:platforms>
       <gap:platform name="android" minVersion="2.1" />
       <gap:platform name="webos" />
       <gap:platform name="symbian.wrt" />
       <gap:platform name="blackberry" project="widgets"/>
   </gap:platforms>

  <icon src="icon.png" gap:role="default" />

   <!--<gap:splash src="weirdo.png" />-->

   <feature name="http://api.phonegap.com/1.0/geolocation"/>
   <feature name="http://api.phonegap.com/1.0/network"/>
   <feature name="http://api.phonegap.com/1.0/geolocation"/>
   <feature name="http://api.phonegap.com/1.0/file"/>
   <feature name="http://api.phonegap.com/1.0/camera"/>
   <feature name="http://api.phonegap.com/1.0/media"/>
   <feature name="http://api.phonegap.com/1.0/device"/>

   <!--<preference name="orientation" value="default" />-->
   <!--<preference name="android-minSdkVersion" value="7" /> -->
 </widget> 
```

这看起来正确吗？我在打包并发送到 Phonegap 的文件夹的根级别有这个文件。这是正确的方法吗？我不确定我还能做什么。任何帮助将不胜感激。谢谢！

* * *

更新：所以我尝试包含 Android 特定的 JS 文件 cordova-1.7.0.js 并且一切正常。所以看起来 Phonegap 构建没有添加必要的文件。有人知道吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:15:07.990

你有任何理由

```
<feature name="http://api.phonegap.com/1.0/geolocation"/> 
```

两次？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:31:16.073

所以解决方案在于包含文件。我仍然包含 phonegap.js 文件，它破坏了构建过程。我删除了对该文件的各种引用并修复了它。

# jquery - jQuery对话框内容不显示

> ID：10452216
> 
> 赞同：1
> 
> 时间：2012-05-04T15:58:03.933
> 
> 标签：jquery

```
$(function () {
    $('#records').dialog({
        autoOpen: true,
        modal: false,
        buttons: {
            "Ok": function () {
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });
}); 
```

```
<div id="records" title="Results">
    Content to Display
</div> 
```

对话框出现，没有任何内容。谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:06:11.043

这对我有用 - 请参阅此[http://jsfiddle.net/rqf3t/](http://jsfiddle.net/rqf3t/)但这没有 css。我想问题一定是您正在使用的 css - 您没有`<p>`围绕要显示的内容的标签（jQuery 网站上的示例这样做）所以我想知道 CSS 是否隐藏了内容。尝试

1）`<p>`在您的内容周围添加标签，如示例中所示

2) 使用 firebug 或类似工具查看“要显示的内容”是否确实存在，但被 CSS 隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:02:44.330

肯定有问题，因为您的代码对我来说很好。这是我将所有零碎的东西放在一起使用的：

```
<html>
<head>
<link href="jqueryUI/ui-lightness/query-ui-1.8.19.custom.css" rel="stylesheet" type="text/css">
<script src="jquery-1.7.1.js"></script>
<script src="jqueryUI/js/jquery-ui-1.8.19.custom.min.js"></script>

<script type="text/javascript">
$(function () {
    $('#records').dialog({
        autoOpen: true,
        modal: false,
        buttons: {
            "Ok": function () {
                $(this).dialog("close");
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });
});

</script>

</head>
<body>

<div id="records" title="Results">
    Content to Display
</div>

</body>

</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T14:42:22.983

如果您修改了 jquery-ui.css，那么这可能会发生，因为它发生在我身上，我只是替换了原来的 jquery-ui.css，这很好

# android - 无法在 EDGE 上进行数据传输

> ID：10452218
> 
> 赞同：0
> 
> 时间：2012-05-04T15:58:07.003
> 
> 标签：android, android-permissions, gprs, android-internet

我一直在尝试做很多试验和错误来解决这个问题，但似乎已经没有更多选择了。

场景：我有一个 AsyncTask，它使用 HttpClient 对托管在我的服务器上的 php 页面执行简单的 HTTP POST 事务。这已经过测试，当连接类型为 Wifi 时它工作得非常好。

问题：一旦我将数据连接转移到 EDGE，数据传输就不起作用。我收到以下错误。

```
java.net.SocketException: The operation timed out 
```

这通常发生在低端设备上。我检查了数据连接是否存在，当我使用浏览器时它工作正常。这个问题似乎与我的应用程序无关，因为除了谷歌地图等浏览器之外的所有其他应用程序，谷歌地方也无法进行任何数据传输，并且抛出未找到主机的异常。

我试图增加超时时间，看看这是否是因为连接速度慢但没有缓解。

```
HttpParams httpParameters = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParameters, 30000);
HttpConnectionParams.setSoTimeout(httpParameters, 30000);
HttpConnectionParams.setTcpNoDelay(httpParameters, true); 
```

**权限**

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>
<uses-permission android:name="android.permission.VIBRATE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"></uses-permission>
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission>
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T08:23:13.753

面临同样的问题。检查 GPRS 连接，它应该可以正常工作，当 VodafoneLive 时！使用设置面临上述问题，选择移动网络内的沃达丰GPRS设置，其工作正常。

# android-imageview - 使用矩阵从显示中心缩放图像

> ID：10452226
> 
> 赞同：1
> 
> 时间：2012-05-04T15:58:41.653
> 
> 标签：android-imageview

每个人。我是一名安卓开发者。我想用矩阵从图像显示部分的中心缩放我的图像。所以，我用矩阵缩放了我的图像。然后用计算出的指针移动它。但是，应用程序无法正常工作。这找不到正确的中心，所以当它找到时，它向右移动。这是为什么？我找不到问题。

代码紧随其后。

 **```
 matrix.reset();
            curScale += 0.02f;
            orgImage.getHeight();
            w = orgImage.getWidth();
            matrix.postScale(curScale, curScale);
            rtnBitmap = Bitmap.createBitmap(orgImage, 0, 0, w, h, matrix, true);
            curImageView.setImageBitmap(rtnBitmap);
            Matrix curZoomOutMatrix = new Matrix();

            pointerx =(int ) ((mDisplayWidth/2 - curPosX) * curScale);
            curPosX = - pointerx;
            pointery =(int ) ((mDisplayWidth/2 - curPosY) * curScale);
            curPosY =  - pointery;

            Log.i("ZoomOut-> posX = ", Integer.toString(curPosX));
            Log.i("ZoomOut-> posY = ", Integer.toString(curPosY));
            curZoomOutMatrix.postTranslate(curPosX, curPosY);
            curImageView.setImageMatrix(curZoomOutMatrix);
            curImageView.invalidate(); 
```*  *您是否有任何用于中心 zoomIn 和 zoomOut 矩阵的 imageView 的示例代码？谁能解释一下？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T05:32:21.760

或者，这是我的错。首先，我从原始图像缩放图像。所以，图像是（宽度，高度）*比例；然后我计算显示中心点的绝对位置。然后，将我的 ImageView 移动到视图所在的计算位置。我的错在这里。当我计算视图位置时，我从现在的比例更改位置。因此，当它缩放时，位置不是`<original position> * <now scale>`。是`<original position * <scale> * <now scale>`的，结果是奇怪的位置。所以我重新制作了 add 来计算原始位置的中心位置。

这种模式现在正在遵循。

```
public void calculate(float offset) {

    float tmpScale = curScale - offset;
    float orgWidth = (mDisplayWidth / 2 - curPosX) / tmpScale;
    float orgHeight = (mDisplayHeight / 2 - curPosY) / tmpScale;
    int tmpPosX = (int)(mDisplayWidth / 2 - orgWidth * curScale);
    int tmpPosY = (int)(mDisplayHeight / 2 - orgHeight * curScale);

    curPosX = tmpPosX;
    curPosY = tmpPosY;

    Matrix matrix = new Matrix();
    matrix.postTranslate(tmpPosX, tmpPosY);

    curImageView.setImageMatrix(matrix);
    curImageView.invalidate();
} 
```

谢谢你。每个人。**

# c# - 字符串的不区分大小写的哈希 (SHA)

> ID：10452228
> 
> 赞同：2
> 
> 时间：2012-05-04T15:58:45.740
> 
> 标签：c#, search, hash

我将名称字符串及其 SHA1 值传递到数据库中。SHA 值用作搜索的索引。实现完成后，我们得到了使搜索名称不区分大小写的要求。我们确实需要考虑所有语言（汉字是一个真实的用例）。

我知道[火鸡测试](https://stackoverflow.com/questions/2256453/using-invariantcultureignorecase-instead-of-toupper-for-case-insensitive-string)。如何在散列之前将输入字符串转换为不区分大小写？理想情况下，我希望它等同于[InvariantCultureIgnoreCase](http://msdn.microsoft.com/en-us/library/system.stringcomparer.invariantcultureignorecase.aspx)。

换句话说，我如何使这个函数的输出不区分大小写？

```
private byte[] ComputeHash(string s)
{
     byte[] data = System.Text.Encoding.Unicode.GetBytes(s ?? string.Empty);
     SHA1 sha = new SHA1CryptoServiceProvider();     // returns 160 bit value
     return sha.ComputeHash(data);
} 
```

如果 SHA 不可行，我也许可以让[String.GetHashCode](http://msdn.microsoft.com/en-us/library/system.string.gethashcode.aspx) () 工作，但我也没有办法让这种情况不区分大小写。

我打赌这是不可能的。如果不是，有什么解决方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:50:51.093

建议使用 ToLower(Invariant) 的现有答案是错误的：在执行 ToLower 之后比较字符串**不**等于执行 string.Compare(xxxIgnoreCase)。请参阅此处接受的答案：[字符串比较 - strA.ToLower()==strB.ToLower() 或 strA.Equals(strB,StringComparisonType)？](https://stackoverflow.com/questions/1660192/string-comparison-stra-tolower-strb-tolower-or-stra-equalsstrb-stringcom)它分解为某些类型的字符。

解决方案是为每个字符串创建一个所谓的 SortKey。这样的 SortKey 本质上是一个字节数组，具有相等字节表示相等字符串的属性。（此外，SortKeys 可以以二进制方式进行比较，产生与 string.Compare 产生的完全相同的顺序。但我们在这里不需要该属性）。

**总结：使用 CompareInfo.GetSortKey(string).KeyData 得到一个可散列的 byte[]。**（[MSDN 上的 GetSortKey](https://msdn.microsoft.com/en-us/library/system.globalization.compareinfo.getsortkey(v=vs.110).aspx)）这适用于所有可能的文化。它也适用于不区分大小写。

因此，可以通过以下方式获得任何给定字符串（即使是土耳其语 i）的不区分大小写的哈希：

```
var sortKeyBytes = CultureInfo.InvariantCulture.CompareInfo.GetSortKey(anyString,
    CompareOptions.IgnoreCase).KeyData;
int hashCode = HashByteArray(sortKeyBytes); //Need to provide this function.
... 
```

我们不能使用 byte[] 的 GetHashCode()，因为这个方法没有被覆盖`byte[]`，因此默认`object.GetHashCode()`使用对象标识而不是值。

您可以使用[此答案](https://stackoverflow.com/a/468084/122718)中的哈希函数。这不好，但它可以完成工作。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T16:03:20.277

您可以在生成哈希之前使用 s.ToUpperInvariant() 。只要你以两种方式进行（生成原始哈希，并生成哈希以测试原始哈希），它就会起作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:07:27.313

要使某些内容不区分大小写，请删除大小写：

```
s = s.ToLowerInvariant(); 
```

如果您无法将 CurrentCulture 存储到数据库中并用于转换其他字符串以进行匹配，请不要使用 CurrentCulture，例如：

```
s = s.ToLower(System.Globalization.CultureInfo.CurrentCulture); 
```

您可能一直考虑使用另一种（非不变的）文化，但对于未来的代码维护者来说可能会感到惊讶（通常希望所有字符串操作都使用当前或不变的文化）。

# binding - 加载用户控件时不会触发将 ColumnDefinition.Width 绑定到 DataGridTextColumn

> ID：10452230
> 
> 赞同：0
> 
> 时间：2012-05-04T15:58:51.637
> 
> 标签：binding, datagrid, wpf-controls, datagridtextcolumn

我有一个 WPF 用户控件，它包含一个网格、一些文本框和一个`DataGrid`. 文本框是每列数据的过滤器，所以我希望它们保持在相关列之上。这很容易，除非用户调整`DataGridTextColumn`. 所以，我将 绑定`Grid.ColumnDefinition.Width`到`DataGridTextColumn.Width`.

它就像一个梦......在第一次调整大小之后。当表单最初打开时，文本框的宽度为 0。如何触发数据网格上的调整大小事件？目前我在 XAML 中进行绑定，是否应该等到控件初始化后再在代码中进行绑定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T19:37:10.893

如果您在构造函数中为用户控件设置宽度，则此方法有效。我不能完全遵循事件堆栈，但似乎在绑定之后发生了宽度更改事件。

# svn - 为什么我不能用 monodevelop 递归提交颠覆？

> ID：10452231
> 
> 赞同：0
> 
> 时间：2012-05-04T15:58:52.200
> 
> 标签：svn, monodevelop

在某些时候，我不记得确切的时间，MonoDevelop 停止将多个文件夹递归提交到我的 subversion 存储库中。我必须为每个单独的文件夹做单独的提交。我在 Mac 上运行 MonoDevelop 2.8.8.4 版和 subversion 1.6 版。有任何想法吗？这很烦人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:06:47.717

怎么破？您能否[提交一个](https://bugzilla.xamarin.com)包含更多信息的错误？

# svn - svn分支切换后如何防止文件权限丢失？

> ID：10452237
> 
> 赞同：1
> 
> 时间：2012-05-04T15:59:14.260
> 
> 标签：svn, tortoisesvn, visualsvn-server

当我在我的 svn 存储库中在主干和分支之间进行切换时，受影响的文件正在失去一些文件权限。

要让 ASP.NET 运行属性，IUSR 帐户需要读取文件的权限。切换时通常会丢失此权限。

如何控制乌龟如何处理文件权限？

（我在 Windows 上使用 Tortoise SVN 和 Visual SVN 服务器）

# java - logback手表如何配置文件

> ID：10452242
> 
> 赞同：1
> 
> 时间：2012-05-04T15:59:29.717
> 
> 标签：java, log4j, logback

我听说 Logback 没有使用单独的线程来监视 log4j 之类的配置文件以避免关闭问题。但我找不到任何关于他们如何实现它的材料。回到 2007 年的 logback 邮件列表中有一些讨论。任何人都可以指出一些谈论机制，利弊的材料？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:18:51.863

他们使用`TurboFilter`包装所有日志记录调用的 a 。每 16 次日志记录调用将检查一个计时器是否已过，如果已过，将检查配置文件是否有修改。

因此，他们通过在调用日志方法时占用一点时间来避免单独的线程。

# javascript - Raphael JS：如何找到 SVG 图像的路径？

> ID：10452247
> 
> 赞同：4
> 
> 时间：2012-05-04T15:59:38.793
> 
> 标签：javascript, svg, raphael

[使用 GIMP，我在http://upload.wikimedia.org/wikipedia/commons/9/95/Continents.svg](http://upload.wikimedia.org/wikipedia/commons/9/95/Continents.svg)中获得了每个大陆的路径，但现在我无法弄清楚如何将此 SVG 文件转换为类似（从[https://github.com/thomaspeklak/raphaeljs-worldmap](https://github.com/thomaspeklak/raphaeljs-worldmap)挑选）：

你能指导我如何将 SVG 路径转换为 ​​Raphael Path 吗？

```
africa.push(W.path("M13728 10231 c-34 -19 -84 -21 -109 -5 -6 4 -15 1 -19 -5 -5 -9 -14 -9 -35 1 -22 10 -29 10 -33 0 -2 -6 -11 -12 -21 -12 -9 0 -23 -6 -29 -12 -10 -10 -17 -10 -32 0 -27 16 -55 15 -190 -7 -113 -19 -180 -42 -180 -63 0 -5 -7 -8 -15 -5 -8 4 -17 2 -20 -3 -4 -6 -13 -10 -21 -10 -8 0 -26 -11 -40 -25 -14 -14 -30 -25 -37 -26 -25 -2 -62 3 -70 10 -4 4 -33 4 -65 0 -63 -9 -100 6 -109 42 -6 20 -20 24 -39 11 -6 -4 -22 -32 -35 -62 -34 -81 -57 -108 -119 -137 -60 -29 -120 -82 -120 -107 0 -9 -10 -31 -22 -47 -18 -24 -23 -44 -23 -94 0 -38 -5 -69 -12 -76 -7 -7 -13 -18 -13 -24 0 -5 -16 -24 -36 -40 -20 -17 -45 -38 -56 -48 -23 -21 -80 -47 -103 -47 -22 0 -36 -16 -62 -72 -13 -27 -27 -48 -31 -48 -27 0 -82 -82 -82 -123 0 -24 ")
  )
  .attr(attr)
  .scale(0.016963, -0.016963, 0,0)
  .translate(0,-15000); 
```

-谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-07T12:28:25.710

首先，您正在使用矢量，因此您可能在[inkscape](http://www.inkscape.org)（“开源Adobe Illustrator”）中获得比gimp（“开源Adobe Photoshop”）更好的结果。

一个好的第一步是将其导入 Inkscape，使用 Inkscape 的 Illustrator 路径简化工具的等价物（假设在大多数 wikipedia SVG 地图中，低文件大小比非常高的细节水平更重要 - 注意它不会破坏国家边界），并导出为 SVG。您可能还想在 Inkscape 中为每个国家形状提供一个适当的 ID（例如国家名称或国家代码），如果他们还没有，以节省以后的时间。

然后把它变成拉斐尔逻辑，有三个选择：

1.  使用[Ready Set Raphael (rsr)](http://readysetraphael.com)，这是一个**免费的 SVG 到 raphael 转换器**Web 服务。除非在我写这篇文章后 rsr 已经更新，否则您可能需要整理生成的代码：

    *   [`paper.setStart();`](http://raphaeljs.com/reference.html#Paper.setStart)通过将路径块放在路径块之前和`var world = paper.setFinish();`之后（不要忘记替换`paper`您正在使用的任何内容），将它们全部放在一个有效的集合中。
    *   将所有重复`.attr()`的 s 全部替换掉​​，除了任何设置 id`attr()`的 s，然后将诸如填充和描边之类的 s 应用于集合，而不是每个单独的元素。
    *   将路径存储在对象中，以便按名称轻松访问。使与 Raphael 的合作变得更加容易。
2.  使用**其他一些 SVG 到 Raphael 转换器**或导入器（例如[这个](https://github.com/wout/raphael-svg-import)）。我不知道这些是否有好处，我个人对Ready Set Raphael有更好的体验。

3.  只需**手动完成**。这可以像将字符串`d="lots of co-ordinates"`从每个 SVG 路径复制并粘贴到类似`var someCountry = paper.path("lots of co-ordinates"); someSet.push(someCountry);`. 这将很耗时，因为有这么多国家（大约 170 个），但从长远来看，额外的控制可能会节省时间。

并且不要忘记[从示例中学习](http://raphaeljs.com/world/)。

# javascript - jQuery：在 document.ready() 和 window.load() 上执行函数

> ID：10452248
> 
> 赞同：1
> 
> 时间：2012-05-04T15:59:42.273
> 
> 标签：javascript, jquery, function

我正在尝试执行 jQuery 函数两次。当 DOM 准备好时一次，然后在页面加载时再一次。大多数情况下不需要第二次调用，但每隔一段时间就需要一次。这是我的代码：

```
$(document).ready(function() {
    function someFunction() {
        alert('function complete');
    }
});

$(window).load(function() {
    someFunction();
});​ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:02:37.687

您在传递给 $(document).ready() 的函数中定义 someFunction ...函数的范围应该在它之外...试试这个：

```
function someFunction() {
    alert('function complete');
}

$(document).ready(someFunction);
$(window).load(someFunction);​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:01:11.730

试试这个：

```
function someFunction() {
    alert('function complete');
}

$(document).ready(function() {
    someFunction();
});

$(window).load(function() {
    someFunction();
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:01:31.417

`someFunction`在 中不可访问，`$(window).load`因为它的范围仅限于`document.ready`. 把它拿出来`document.ready`放在全球范围内。

```
function someFunction() {
        alert('function complete');
}

$(document).ready(function() {
     someFunction(); 
});

$(window).load(function() {
    someFunction();
});​ 
```

# r - 在R中的数据帧上划分和帝国

> ID：10452249
> 
> 赞同：0
> 
> 时间：2012-05-04T15:59:42.650
> 
> 标签：r, parallel-processing, dataframe, divide-and-conquer

众所周知，R 并不是运行大型分析的最有效平台。如果我有一个包含三个参数的大型数据框：

```
GROUP   X  Y
A       1  2
A       2  2
A       2  3
...
B       1  1
B       2  3
B       1  4
...
millions of rows 
```

我想在每个组上运行一个计算（例如在 X，Y 上计算 Pearson 的 r）并将结果存储在一个新的数据框中，我可以这样做：

```
df = loadDataFrameFrom( someFile )
results = data.frame()
for ( g in unique( df$GROUP)) ){
    gdf <- subset( df, df$GROUP == g )
    partialRes <- slowStuff( gdf$X,gdf$Y )
    results = rbind( results, data.frame( GROUP = g, RES = partialRes ) )
}
// results contains all the results here.
useResults(results) 
```

明显的问题是这非常慢，即使在强大的多核机器上也是如此。

我的问题是：是否可以并行化这种计算，例如为每个组或一组组设置一个单独的线程？是否有一个干净的 R 模式来解决这个简单的除法问题？

谢谢，穆龙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:15:08.337

首先，R 不一定慢。它的速度很大程度上取决于正确使用它，就像任何语言一样。有几件事可以在不做太多改动的情况下加速你的代码：`results`在开始之前预先分配你的 data.frame；使用列表和矩阵或向量构造而不是 data.frame；切换使用`data.table`；名单还在继续，但[The R Inferno](http://www.burns-stat.com/pages/Tutor/R_inferno.pdf)是一个很好的起点。

另外，看看[这里](http://cran.r-project.org/web/views/HighPerformanceComputing.html)。它很好地总结了如何利用多核机器。

Hadley Wickam 用他的`plyr`包简洁地解决了“干净的 R 模式”，特别是`ddply`：

```
library(plyr)
library(doMC)
registerDoMC()
ddply(df, .(GROUP), your.function, .parallel=TRUE) 
```

但是，它不一定很快。你可以使用类似的东西：

```
library(parallel)
mclapply(unique(df$GRUOP), function(x, df)  ...) 
```

或者最后，您可以使用该`foreach`软件包：

```
foreach(g = unique(df$Group), ...) %dopar$ {
   your.analysis
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T16:35:13.067

支持我的评论：1000 万行，26 个组。在单核 3.3Ghz CPU 上在 < 3 秒内完成。仅使用基础 R。不需要并行化。

```
> set.seed(21)
> x <- data.frame(GROUP=sample(LETTERS,1e7,TRUE),X=runif(1e7),Y=runif(1e7))
> system.time( y <- do.call(rbind, lapply(split(x,x$GROUP),
+     function(d) data.frame(GROUP=d$GROUP[1],cor=cor(d$X,d$Y)))) )
   user  system elapsed 
   2.37    0.56    2.94 
> y
  GROUP           cor
A     A  2.311493e-03
B     B -1.020239e-03
C     C -1.735044e-03
D     D  1.355110e-03
E     E -8.027199e-04
F     F  8.234086e-04
G     G  2.337217e-04
H     H -5.861781e-04
I     I  7.799191e-04
J     J  1.063772e-04
K     K  7.174137e-04
L     L  4.151059e-04
M     M  4.440694e-04
N     N  2.568411e-03
O     O -3.827366e-04
P     P -1.239380e-03
Q     Q -1.057020e-03
R     R  1.079676e-03
S     S -1.819232e-03
T     T -3.577533e-04
U     U -1.084114e-03
V     V  6.686503e-05
W     W -1.631912e-03
X     X  8.668508e-04
Y     Y -6.460281e-04
Z     Z  1.614978e-03 
```

`slowStuff`顺便说一句，只有当您的功能是瓶颈时，并行化才会有所帮助。您`rbind`在循环中的使用可能是瓶颈，除非您在`slowStuff`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:20:33.193

我认为您的缓慢部分是由于您在 R 中的非 R 编程。以下将为您提供每组的相关性（我使用 mtcars 数据集并将其除以 cyl 组）并且做得非常快：

```
by(mtcars, mtcars$cyl, cor) 
```

# sql - 如何从sql中的多个表中删除一行？

> ID：10452252
> 
> 赞同：2
> 
> 时间：2012-05-04T15:59:52.323
> 
> 标签：sql, database, ms-access

所以我必须在它们之间有关系的表 - 关系类型：一对多。我认为以下查询：

```
DELETE Orderstbl.*, ItemsInOrdertbl.*
FROM Orderstbl INNER JOIN ItemsInOrdertbl ON Orderstbl.OrderID = ItemsInOrdertbl.OrderId
WHERE (((Orderstbl.OrderID)=26)); 
```

将删除两个表中包含 OrderID = 26 的所有行，但令我惊讶的是它填充了以下错误：

```
could not delete from specified tables 
```

试图在谷歌上找到答案，没有帮助提前感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:02:36.250

您还可以创建一个包含 的关系`CASCADE DELETE`，然后当您从其中删除时，它将从另一个删除

来自[微软](http://support.microsoft.com/kb/304466)：

> 如果您在定义关系时选中“级联删除相关记录”复选框，则每当您删除主表中的记录时，Microsoft Access 都会自动删除相关表中的相关记录。例如，如果您从“客户”表中删除客户记录，则所有客户的订单都会自动从“订单”表中删除（这包括“订单详细信息”表中与“订单”记录相关的记录）。当您在选中“级联删除相关记录”复选框的情况下从表单或数据表中删除记录时，Microsoft Access 会警告您相关记录也可能被删除。但是，当您使用删除查询删除记录时，Microsoft Access 会自动删除相关表中的记录而不显示警告。

使用`CASCADE DELETE`是一种简单而干净的方法，可以确保从两个表中删除正确的记录。

这是另一篇讨论 MS-Access 的 CASCADE DELETE 的文章。

[从 Access 数据库中删除一条或多条记录](http://office.microsoft.com/en-us/access-help/delete-one-or-more-records-from-an-access-database-HA001173951.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:06:59.337

如果您在两个表的列之间设置了外键，则必须确保先删除子列，然后再删除主列。执行此操作的正确方法是在删除 master 时设置约束，例如 UPDATE 或 DELETE。该约束负责处理外键关系，因此您永远不会到处都是孤立行。

要在 MySQL 中创建约束（例如）...

```
[CONSTRAINT [symbol]] FOREIGN KEY
    [index_name] (index_col_name, ...)
    REFERENCES tbl_name (index_col_name,...)
    [ON DELETE reference_option]
    [ON UPDATE reference_option] 
```

另一种选择是以编程方式进行，首先删除子表中的行，然后删除主表中的行。

# python - 如果在 try/except 块中有其他代码帮助

> ID：10452258
> 
> 赞同：-1
> 
> 时间：2012-05-04T16:00:20.243
> 
> 标签：python, python-2.7

```
SomeDict = {'Sarah':20, 'Mark': 'hello', 'Jackie': 'bye'}
try: 
    result = ""
    theKey = raw_input("Enter some key: ")
    val = someDict[theKey]
    except keyErrorr:
        result "hello"
    else:
        result = result + "" + "done"
    print result 
```

我了解您可以插入的 try 块和代码来尝试查看出现了什么错误，然后错误可以被 except 块捕获。我试图找出在 try 和 except 块中插入 if / else 的最佳方法，以解决此代码中存在的相同关键错误。我在想我可以用 if/else 替换 try 和 except，或者是否可以在 try 和 except 中添加 if/else。任何有关如何在此代码中插入 if/else 以解决关键错误的帮助将不胜感激。所以基本上我想在 try 和 except 块中添加一个 if/else 代码来处理相同的关键错误。

```
 SomeDict = {'Sarah':20, 'Mark': 'hello', 'Jackie': 'bye'}
    try: 
        result = "" #could i insert something like if result == "" : #for this line?
        theKey = raw_input("Enter some key: ")
        val = someDict[theKey]
        except keyErrorr:
            result "hello"
        else:
            result = result + "" + "done"
        print result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:05:44.270

一种合理的选择是先初始化`result = None`，然后进行测试`if result is None:`。

使用 None 比使用空字符串更好，因为有一天您可能希望字典值是空字符串，而且 None 对于您的代码的普通读者来说可能更清楚。

您也可以跳过 try-except 并使用`if theKey in someDict:`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:09:03.473

您可以添加另一个除非没有规范它应该处理什么异常。

```
try:
   # do something
except KeyError:
   # do something because of the Keyerror
except:
   # do what you need to do if the exception is not a KeyError 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:22:49.757

```
someDict = {'Sarah':20, 'Mark': 'hello', 'Jackie': 'bye'}   # corrected dict name
result = ""
theKey = raw_input("Enter some key: ")
try:                    # just try the code where the error could be
    val = someDict[theKey]
except KeyError:        # corrected exception name and indent level
    result = "hello"    # corrected syntax
else:                   # corrected indent level
    result = result + "" + "done"       # why add "" ?
print result 
```

这对你有用吗？

# windows - windows下创建64位jni

> ID：10452262
> 
> 赞同：2
> 
> 时间：2012-05-04T16:00:29.407
> 
> 标签：windows, dll, java-native-interface

在将工具移植到不同的系统时，我遇到了 windows 64 位的问题。

我已经用 linux 32/64 和 windows32 成功构建了 dll。我已经用 msys 尝试了 mingw-64，但不幸的是我只得到了 32 位 dll。这是我获取 dll 的脚本的一部分

gcc -o tool_jni.dll -static-libgcc -static-libstdc++ -Wl,--add-stdcall-alias -shared -IC:/Java/jdk/include -IC:/Java/jdk/include/win32 $SOURCES

我没有收到任何错误消息，只是没有收到所需的 DLL

我愿意接受任何解决方案。我不必使用脚本，我只需要 DLL。

# python - 字典/数据库键值检索

> ID：10452263
> 
> 赞同：2
> 
> 时间：2012-05-04T16:00:30.590
> 
> 标签：python, dictionary

如前一个（但不同的）问题所述，我试图用 Python 找出一个“简单”的字典/数据库，它将从十个列表中检索一个名称，并带有请求的信息。即输入可以是'John phone'，输出是'John's phone number is 0401'（我已经记下来了）；但我也可以输入“John Birthday”或“John hobbies”，输出会对应。

由于我是一个完整的菜鸟，我什至不知道从哪里开始。到目前为止，几个小时的谷歌搜索和仔细研究讲义并没有产生任何结果。我感觉它与多参数 % 函数有关，但我们的讲师真的不清楚如何进一步发展。到目前为止，我所拥有的是：

```
#!/usr/bin/python

friends = {'John': {'phone' : '0401',
                    'birthday' : '31 July',
                    'address' : 'UK',
                    'interests' : ['a', 'b', 'c']},
           'Harry': {'phone' : '0402',
                    'birthday' : '2 August',
                    'address' : 'Hungary',
                    'interests' : ['d', 'e', 'f']}}
name = raw_input ('Please enter search criteria: ')
if name in friends: 
    print "%s's phone number is: %s" % (name, friends[name]['phone'])
else: 
    print 'no data' 
```

我还想使用“while”功能，这样程序就不会在给出该信息后立即关闭，但不确定这是否合适。任何指针都会很棒，即使它是“试试这个”的提示，或者是指向相关网站的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:10:04.733

由于这是家庭作业，我将把答案限制在一些提示上：

1.  `tok = name.split()`将拆分`name`为单词列表，因此`'John address'`将成为`['John', 'address']`.
2.  您可以访问单个单词`tok[0]`和`tok[1]`，并使用它们来索引`friends`以获取相关人员，然后是相关字段。
3.  我认为将输入/搜索逻辑包装到一个`while`循环中没有问题，以便用户可以执行多个查询。唯一要弄清楚的是您将如何退出该循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:15:18.930

根据您的示例代码，“John phone”不起作用，因为它实际上会查找“John phone”作为名称（并且“phone”是硬编码的）。为了说明，试试这样的代码：

```
response = raw_input('Please enter search criteria: ').split()

try:
    print "%s's %s is %s" % (response[0], response[1], friends[response[0]][response[1]])
except KeyError:
    print 'no data' 
```

split() 分别接受每个参数，然后可以用 [0] 和 [1] （依此类推）引用。您已经在使用 % 替换的正确轨道上，但是这种方法将赋予它更多的可用性和可读性。

关键是您不需要检查名称是否匹配（或条件匹配）。假设它会在那里——并且在出现例外情况（未找到匹配项）时，它可以按预期返回“无数据”。

```
Please enter search criteria: John phone
John's phone is 0401

Please enter search criteria: Harry birthday
Harry's birthday is 2 August 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:12:38.260

听 aix 来回答你问题的第一部分。对于第二部分，我建议提出一个退出值（也许是“退出”），用户可以键入退出程序，然后让你的 while 循环继续进行，而输入不是那个值。

# c++ - 在 C++ 中从 SQLite 中检索单个 Int 的最快方法

> ID：10452264
> 
> 赞同：0
> 
> 时间：2012-05-04T16:00:31.217
> 
> 标签：c++, sqlite

我有一个最多包含 3 个字符串的 c++ 容器，而且很多时候只有一个字符串。

我需要为容器中的每个字符串从 sqlite dB 获取一个 int 值，我想知道是否有比准备好的语句更快的方法？

我现在的方式

```
int Idx{}; // set to 0
std::for_each(container.begin(), container.end(), [](string& item) {
    sqlite3_prepared_v2( 
        db, 
        ("SELECT categoryId FROM table WHERE item='" + item + "'").c_str(), 
        -1, 
        &stmt, 
        NULL 
    );
    sqlite3_step(stmt); // goto the first result
    Idx += sqlite3_column_int(stmt, 0); // add to my Idx
    sqlite3_finalize(stmt); // finalize
}; 
```

# php - PHP Mail 功能和外域

> ID：10452269
> 
> 赞同：0
> 
> 时间：2012-05-04T16:00:43.290
> 
> 标签：php, email, phpmailer

PHP Mail 功能似乎在将电子邮件发送到：@domain.edu.ag 时出现问题。该功能是否支持外域？

该域托管在 Google Apps 上，因此应该以相同的方式接收邮件。垃圾邮件中没有消息可以引导我进一步探索。所以我创建了一个测试脚本来发送邮件，并注意到邮件似乎没有发送。

这是我用于测试目的的：

```
<?php
    $to = "mymail@domain.edu.ag,mymail@gmail.com";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";
    if (mail($to, $subject, $body)) {
    echo("<p>Message successfully sent!</p>");
    } else {
    echo("<p>Message delivery failed...</p>");
    }
    ?> 
```

结果是收到了@gmail 消息，但没有收到@edu.ag 电子邮件地址。这里发生了什么？没有错误或任何东西，并且从其他发件人那里收到的邮件也很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:06:15.083

尝试这样做：

```
$to = array("mymail@domain.edu.ag", "mymail@gmail.com");
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";

foreach($to as $to_addr) {
    mail($to_addr, $subject, $body)
} 
```

因此，您正在遍历数组中的电子邮件地址，并为每个地址发送邮件声明。过去我在使用带逗号的常规字符串时遇到了一些麻烦。

# mysql - 我不能更新一行（MySQL）

> ID：10452271
> 
> 赞同：0
> 
> 时间：2012-05-04T16:00:53.270
> 
> 标签：mysql

我使用 MySQL：

```
UPDATE proyectos
SET monto_odt = 1733158.28, monto_activo = 1733158.28
WHERE orden_id = 18360 
```

我收到这条消息：

```
Query OK, 0 rows affected (0.57 sec)
Rows matched: 1  Changed: 0  Warnings: 0 
```

值不变。怎么了？

# perl - 是否可以将编码恢复为修改后的 STDIN？

> ID：10452276
> 
> 赞同：0
> 
> 时间：2012-05-04T16:01:04.180
> 
> 标签：perl, encoding, stdin

是否可以恢复 STDIN 的原始编码，之前修改了哪个编码？

```
#!/usr/bin/env perl
use warnings;
use strict;

binmode STDIN, ':raw';

# do something here
# ...
# ...

# restore original STDIN encoding
binmode STDIN, $old_encoding; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:35:13.400

不确定这是否可行，但有[`:pop`伪编码](http://search.cpan.org/perldoc?PerlIO#%3apop)：

> 删除最顶层。为 perl 代码提供了一种操作层堆栈的方法。应该被认为是实验性的。请注意，:pop 仅适用于真实图层，不会撤消 :utf8 等伪图层的效果。一个可能的使用示例可能是：

```
open($fh,...)
...
binmode($fh,":encoding(...)");  # next chunk is encoded
...
binmode($fh,":pop");            # back to un-encoded 
```

> 需要一个更优雅（和更安全）的界面。

# asp.net - Asp.net MVC 在特定条件下阻止用户访问整个应用程序

> ID：10452278
> 
> 赞同：1
> 
> 时间：2012-05-04T16:01:12.750
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我有一个网站，例如页面 A、B、C、D、.... 我希望用户在注册后只能访问页面 A。要访问其余页面，用户需要完成一些加入手续，其中包括付款。

现在最简单的方法是在我当前完成的所有页面中添加一个检查，以确保仅在用户完成所有加入手续后才显示请求的页面 B、C、D...。这将需要我重新处理所有现有的页面。此外，所有未来开发的页面都需要记住添加该检查。

为了解决这个问题，我使用了一个从 AuthorizeAttribute 继承的自定义授权属性类，并在那里检查了重写的 OnAuthorization 方法，如下面的代码片段所示

```
 else if (!SessionCache.FormalitiesCompleted)
        {
            //force completion of formalities
            if (!( string.Equals(filterContext.ActionDescriptor.ActionName, "Index", StringComparison.InvariantCultureIgnoreCase)
                  || string.Equals(filterContext.ActionDescriptor.ActionName, "Options", StringComparison.InvariantCultureIgnoreCase)
                  || string.Equals(filterContext.ActionDescriptor.ActionName, "Index_B", StringComparison.InvariantCultureIgnoreCase)
                  || string.Equals(filterContext.ActionDescriptor.ActionName, "Index_C", StringComparison.InvariantCultureIgnoreCase)
                    && string.Equals(filterContext.ActionDescriptor.ControllerDescriptor.ControllerName, "Formalities", StringComparison.InvariantCultureIgnoreCase)))
            {
                string _action = filterContext.ActionDescriptor.ActionName;
                filterContext.Result = new RedirectToRouteResult(new RouteValueDictionary(new { controller = "Formalities", action = _action, area = "FormalitiesArea" }));
            }

        } 
```

如您所见，IF 中有太多的 OR 条件。我怀疑这会随着手续复杂性的增加而增加。

有没有更好的方法来强制用户在完成手续之前不要访问网站上的任何其他页面？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:12:42.803

您可能应该查看`[Authorize attribute]` [http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)如果您使用该属性装饰操作，则只有登录的用户才能访问它，而其他人将重定向到登录页面。

对于付费/注册用户，我将从这里继承并创建一个 PaidUserAuthorize 属性：

```
public class PaidUserAuthorizeAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(AuthorizationContext filterContext)
    {
        base.OnAuthorization(filterContext);

        if(filterContext.Result is HttpUnauthorizedResult)
        {
            filterContext.Result = new RedirectResult("/PaymentPage");
        }
    }
} 
```

因此装饰一个动作

`[PaidUserAuthorize(Roles = "PaidUser", "Super User")]`

将未付费用户重定向到付款页面。

用户付费后 - 将他们添加到 PaidUser 角色。因此，当他们再次执行操作时，他们将被允许访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:06:42.567

在控制器中使用 [Authorize] 注释怎么样？通过创建自己的[AuthorizeAttributes](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)，您应该能够根据您选择使用或创建的任何 MembershipProvider 自定义每个操作的授权。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:05:16.817

您可以创建一个肌动蛋白过滤器并将其应用于您也想限制访问的操作或类。在您的操作过滤器中，您需要覆盖 OnActionExecuting 方法并在其中实现您的检查逻辑。您可以根据自己的意愿允许或拒绝访问这些视图

查看此[链接](http://goo.gl/I70Dn)以获取示例

# iphone - 隐藏 PickerView 和 Box 以显示选择的内容

> ID：10452283
> 
> 赞同：0
> 
> 时间：2012-05-04T16:01:43.083
> 
> 标签：iphone, xcode, uitextfield, uipickerview

我正在努力在我的 iOS 应用程序中实现一些我一直在移动网站上看到的东西。我想要一个显示当前选择的值的某种文本框或文本字段。单击时，它将显示一个 UIPickerView，其中包含可能的选择列表。选择后，UIPickerView 将消失，并且 TextBox 或 TextField 将根据用户所做的选择进行更新。有人可以指出我这样做的好方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T09:57:20.450

您可以将 indexPath 值保存在字符串中并将其显示在文本字段上，例如： [textField setText:NSString];

# android - AchartEngine 中的阈值？

> ID：10452289
> 
> 赞同：3
> 
> 时间：2012-05-04T16:02:11.493
> 
> 标签：android, graph, achartengine

我是 android 新手，我一直在使用 AChartEngine 制作图表我想知道是否有任何方法可以在 AchartEngine 中为图表设置阈值线？

例如，温度图表中的阈值可能是华氏 32 度和华氏 212 度。低于 32 的线可能是一种颜色，也可能是介于 32 和 212 之间的另一种颜色，以及高于 212 的另一种颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T14:26:30.813

您可以通过启用渐变并设置开始和停止渐变颜色来使用条形图执行此操作，但不能使用折线图。

# metrics - Chidamber 和 Kemerer 工具可用于除 Java 之外的其他语言的指标？

> ID：10452303
> 
> 赞同：1
> 
> 时间：2012-05-04T16:02:53.053
> 
> 标签：metrics

我一直在尝试为实现[Chidamber 和 Kemerer 1994 论文的指标寻找](http://www.google.com/url?sa=t&rct=j&q=chidamber%20and%20kemerer&source=web&cd=2&ved=0CFcQFjAB&url=http://faculty.salisbury.edu/~stlauterburg/COSC425/MetricForOOD_ChidamberKemerer94.pdf&ei=O_yjT-GdC4au6AGl_vj-CA&usg=AFQjCNH-HvlBYaOUjYLXDHGqGYYlqJWxig&sig2=tEN95aKX6QSTjJtOd06zJQ)[CKJM](http://www.spinellis.gr/sw/ckjm/)以外的工具，因为 CKJM 仅适用于 Java。我尝试在这里进行搜索和类似的标题，但我没有找到关于 Chidamber 和 Kemeder 论文的建议，或者建议的指标与它无关。有没有其他可用的工具（如果可能的话，开源/免费）？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T22:03:26.837

如果您准备好查看商业工具，可以考虑使用 Project Analyzer Enterprise Edition，它计算 Visual Basic 的 Chidamber 和 Kemerer 指标[http://www.aivosto.com/project/help/pm-oo-ck.html](http://www.aivosto.com/project/help/pm-oo-ck.html)

[CCCC](http://sourceforge.net/projects/cccc) [开源] 声称能够计算 C++ 和 Java 的指标。

# jquery - 如何使用 JQuery DataTables 根据每个单元格中值的子字符串对列进行排序

> ID：10452305
> 
> 赞同：2
> 
> 时间：2012-05-04T16:02:55.397
> 
> 标签：jquery, sorting, jquery-datatables

假设我有一列包含格式为 P<2 digit ye​​ar>-<4 digit identifier> 的对象标识符，例如

**P12-3767**

我正在使用 1.9.1 版的 JQuery [DataTables 插件](http://datatables.net)进行排序和分页。有没有一种方法可以忽略单元格值的前 4 个字符（“P12-”部分），以便有效地仅对标识符的数字部分进行排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T15:18:09.120

您可以简单地在查询中创建一个列，它是您要查找的原始字符串的子字符串版本。然后，当您排序时，按子字符串列而不是原始列排序。如果您使用服务器端分页，这是一个非常适合的数据库端解决方案。

您还可以通过以下方式捕获排序顺序和方向：

```
$(oSettings.aoColumns[oSettings.aaSorting[0][0]].nTh).attr('innerText'); 
```

因此，您可以在原始查询中包含子字符串列，将其隐藏，然后当单击的排序顺序是您想要子字符串的列...改为将排序更改为隐藏列。不确定您会在哪里执行此操作，可能在 fnPreDrawCallback 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-01-19T04:19:30.177

在jsp页面中导入jstl函数

```
<%@ taglib uri = "http://java.sun.com/jsp/jstl/functions" prefix = "fn" %> 
```

包含 data-sort 属性，指定要排序的子字符串

```
<td data-sort="${fn:substringAfter('P12-3767', 'P12-')}">P12-3767</td> 
```

# vba - 在 Excel 中筛选数据透视表

> ID：10452306
> 
> 赞同：0
> 
> 时间：2012-05-04T16:03:02.547
> 
> 标签：vba, excel, excel-2007, excel-2003

如果我将区域语言格式设置为英语（英国），则此过滤器会出现问题，如果我使用英语（美国），则效果很好。我的问题是过滤器不会使 5 月 30 日的选择不可见，它在该调用中失败并转到错误部分。

[http://wikisend.com/download/138750/Pivottable.xls](http://wikisend.com/download/138750/Pivottable.xls)

这是一个已知的错误？[http://support.microsoft.com/default.aspx?scid=kb;en-us;114822&Product=xlw](http://support.microsoft.com/default.aspx?scid=kb;en-us;114822&Product=xlw)

它过滤日期[类似于在 Excel 2003 中发布过滤数据透视表](https://stackoverflow.com/questions/9034499/filter-pivottable-in-excel-2003)

```
Sub Filter()
    Dim PvtItem As PivotItem
    Dim ws As Worksheet

    On Error GoTo Whoa1

    Set ws = Sheets("pivot")

    '~~> Show All
    For Each PvtItem In ws.PivotTables("PivotTable1").PivotFields("Date").PivotItems
        PvtItem.Visible = True
    Next

    On Error GoTo Whoa2 '<~~ If no match found in Pivot

    '~~> Show Only the relevant
    For Each PvtItem In ws.PivotTables("PivotTable1").PivotFields("Date").PivotItems
        If Format(PvtItem.Value, "DD/MM/YYYY") <> Format(Range("today"), "DD/MM/YYYY") Then
            PvtItem.Visible = False
        End If
    Next

    Exit Sub
Whoa1:
    MsgBox Err.Description
    Exit Sub
Whoa2:
    '~~> Show All
    For Each PvtItem In ws.PivotTables("PivotTable1").PivotFields("Date").PivotItems
        PvtItem.Visible = True
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T10:52:29.457

**在 EXCEL 2003 中试用和测试（使用英国设置）**

右键单击快照中显示的日期字段，`Field Settings`然后单击，然后单击`Number`。如图所示设置日期格式。现在尝试相同的代码。

![在此处输入图像描述](../Images/121f05c5f00cdc7da070249ce7f91ed4.png)

# java - Regular expression to filter out "\{" but allow "{"

> ID：10452309
> 
> 赞同：1
> 
> 时间：2012-05-04T16:03:09.830
> 
> 标签：java, regex

I am trying for regular expression to get following thing

**Input-**

```
{foo}
{bar}
\{notgood}
\{bad}
{nice}
\{bad} 
```

**Output-**

```
foo
bar
nice 
```

I want to find all strings starting with `{` but NOT with `\{`. I have only five words as input.

I tried a regular expression i.e. `"\\{(foo|bar|nice|notgood|bad)"` which gives all words starting with `{`. I don't know how to get rid of `\{`. How can I do that?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:31:23.450

You could use a [negative lookbehind assertion](http://www.regular-expressions.info/lookaround.html) to make sure that a `{` is only matched if no `\` precedes it:

```
List<String> matchList = new ArrayList<String>();
Pattern regex = Pattern.compile(
    "(?<!\\\\)   # Assert no preceding backslash\n" +
    "\\{         # Match a {\n" +
    "(foo|bar|nice|notgood|bad) # Match a keyword\n" +
    "\\}         # Match a }", 
    Pattern.COMMENTS);
Matcher regexMatcher = regex.matcher(subjectString);
while (regexMatcher.find()) {
    matchList.add(regexMatcher.group(1));
} 
```

`matchList` will then contain `["foo", "bar", "nice"]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:23:11.453

You can use a 'group-match' string for that, as in the following code:

```
str.replaceAll("(?<!\\\\)\\{(foo|bar|nice|notgood|bad)\\}", "$1"); 
```

the `$1` refers to the first `()` group in the input

for `str = "{foo} \{bar} {something}"` it will give you `foo \{bar} {something}`

# java - 保存，合并有时不提交？为什么？

> ID：10452311
> 
> 赞同：0
> 
> 时间：2012-05-04T16:03:19.293
> 
> 标签：java, hibernate

您好，我在使用 Java Hibernate 时遇到问题，我有一个名为“Barang”的实体，并且我有一个创建新 Barang 或更新它的功能。有时它可以正常工作，但是当我一次又一次地尝试这样做时，该功能无法正常工作。

这是我的创建和合并代码：

```
static SessionFactory session = NewHibernateUtil.getSessionFactory();

public Session opennSession(){
   return session.openSession();
}

public void addBarang(Barang b) {
    Session sess = this.opennSession();
    org.hibernate.Transaction t = sess.beginTransaction();
    sess.save(b);
    t.commit();

}

public void updateBarang(Barang b) {
    Session sess = this.opennSession();
    org.hibernate.Transaction t = sess.beginTransaction();
    sess.merge(b);
    t.commit();

} 
```

更令人困惑的是，我有另一个实体可以很好地使用保存或合并功能。我已经比较了很多次，我确信代码是好的。

请帮我解决这个问题。提前谢谢

如果你需要一些我正在使用的代码，我可以在这里发布。所以请告诉我你是否需要它。:D

这是我的hibernate.cfg

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-configuration PUBLIC "-//Hibernate/Hibernate Configuration DTD     3.0//EN" "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
  <session-factory>
    <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/rumah</property>
    <property name="hibernate.connection.username">admin</property>
    <property name="hibernate.connection.password">admin</property>
    <mapping class="entity.Pelanggan"/>
    <mapping class="entity.Penjualan"/>
    <mapping class="entity.PenjualanBarang"/>
    <mapping class="entity.PenjualanBarangPK"/>
    <mapping class="entity.Barang"/>
  </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:31:05.690

我不确定是否有任何理由在事务中进行合并，因为没有其他任何事情发生，所以实际上这是一个单操作事务。

我建议您尝试刷新会话，看看是否有帮助：

```
sess.merge(b);
sess.flush(); 
```

# coldfusion - 访问父级init方法中定义的变量

> ID：10452316
> 
> 赞同：1
> 
> 时间：2012-05-04T16:03:31.140
> 
> 标签：coldfusion

父组件的示例 init 方法

```
 <cffunction name="init" output="false" access="public" returntype="NavigationBase">
      <cfset this.index             = 0 />
      <cfset this.length            = 0 />
      <cfset this.current           = "" />
      <cfreturn this />
   </cffunction>
   .
   .
   . 
```

子组件示例代码

```
 <cfcomponent displayname="Navigation" output="false" extends="NavigationBase">
    <cffunction name="init" output="false" access="public" returntype="Navigation">
     <cfreturn this/>
    </cffunction>

    . 
    . 
```

如果我实例化子组件，则在父组件的 init 函数中定义的变量始终未定义。我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T16:12:31.677

`init()`子的 覆盖父方法`init()`，因此变量不会在任何地方定义。将此行添加到您的孩子`init`

```
<cfset super.init()> 
```

运行父级`init`并定义/初始化这些变量。

# c - 无法在 c 程序中删除（rm）文件，但可以在 shell 中

> ID：10452319
> 
> 赞同：1
> 
> 时间：2012-05-04T16:03:39.997
> 
> 标签：c, linux, rm

我的 C 程序（在 Linux 上）需要删除一个文件，例如 /home/me/myfile，这是我在程序中的操作方式

```
...
system ("rm -f /home/me/myfile");
... 
```

运行此程序时，我收到一条消息说权限被拒绝。顺便说一句，`ls -al /home/me/myfile`退货`-rw-r--r--`

但是，在同一个用户帐户和同一个 shell 中我执行 C 程序，我可以通过键入简单地删除文件`rm -f /home/me/myfile`

我在这里错过了什么？

谢谢，

更新：使用`remove(/home/me/myfile)`or `unlink(/home/me/myfile)`，可以在我的程序中删除该文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:10:39.040

首先，控制您是否可以删除文件的是*目录*的权限。

但是，话虽如此，这两种情况之间有很多不同的地方。您的程序可能以不同的用户身份运行（例如使用 SETUID 位），路径可能不同，导致`rm`运行不同的用户，程序可能会设置`chroot`监狱，使其甚至无法再看到文件（尽管这可能表现为*不同*的错误），等等。可能性相当大。

但是，C 提供了一个删除文件的调用，称为`unlink`- 您应该优先使用它，然后检查`errno`.

我建议检查这`which rm`两种情况的输出，以及文件和可执行文件、所有者和权限的完整详细信息。

# ruby-on-rails - 无法批量分配受保护的属性：整数

> ID：10452322
> 
> 赞同：1
> 
> 时间：2012-05-04T16:03:50.113
> 
> 标签：ruby-on-rails, mass-assignment

我正在关注关于使用 Rails 进行敏捷 Web 开发（第 4 版）的教程，在第 112 页上我开始收到错误消息

```
Can't mass-assign protected attributes: 2 
```

2 是 song_id。我没有在模型上使用任何“#attr_accessible”。当我介绍这段代码进行迁移时，这种情况就开始发生了

```
class AddQuantityToLineItems < ActiveRecord::Migration
  def self.up
    add_column :line_items, :quantity, :integer, :default => 1
  end

  def self.down
    remove_column :line_items, :quantity
  end
end 
```

和

```
class CombineItemsInCart < ActiveRecord::Migration
  def self.up
  Cart.all.each do |cart|
    sums = cart.line_items.group(:song_id).sum(:quantity)

    sums.each do |song_id, quantity|
    if quantity > 1
        cart.line_items.where(:song_id=>song_id).delete_all
        cart.line_items.create(:song_id=>song_id, :quantity=>quantity)
     end
    end
  end
  end

  def self.down
  LineItem.where("quantity>1").each do |line_item|

    line_item.quantity.times do

    LineItem.create :cart_id=>line_item.cart_id,
     :song_id=>line_item.song_id, :quantity=>1
    end
    line_item.destroy

    end
  end
end 
```

**编辑**

重新查看 co 后，我意识到错误在我的控制器中。看起来像这样

def create @cart = current_cart song = Song.find(params[:song_id]) @line_item = @cart.line_items.build @line_item.song = song @line_item = @cart.add_song(song.id)

```
respond_to do |format|
  if @line_item.save
    format.html { redirect_to @line_item.cart, notice: 'Line item was successfully created.' }
  else
    format.html { render action: "new" }
  end
end 
```

这是导致问题的线路

@line_item = @cart.add_song(song.id)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T23:08:14.037

您必须将行**attr_accessible :quantity**添加到 line_item 模型中，它会起作用！

# javascript - jquery html上的子字符串（0,4）给出null

> ID：10452323
> 
> 赞同：0
> 
> 时间：2012-05-04T16:03:54.583
> 
> 标签：javascript, jquery, substring, substr

## 这是我的代码：

```
var revista = $('#revistas_esp_1 option:selected').html();          
var myname = revista.substring(1,3);
console.log(myname);
console.log(revista); 
```

获取 html 正常，但 myname 显示为空。

我也尝试过 substr，结果相同。我没有收到任何错误，只是一个空日志。我也尝试过使用 text() 而不是 html()。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-22T15:45:55.557

这是一个空格问题，将缩进空间放在 php 而不是 HTML 中得到了解决。

# java - 对 Web 服务的困惑

> ID：10452328
> 
> 赞同：2
> 
> 时间：2012-05-04T16:04:06.457
> 
> 标签：java, web-services, jax-ws, wsimport

我们有一些现有的 Java 代码在 Tomcat 服务器上运行，我们希望允许另一台机器上的代码执行，因此我们正在研究 Web 服务。我是网络服务的新手，我想我可能在这里做错了什么。

我遵循了一些关于如何在 Tomcat 中部署 JAX-WS Web 服务的在线教程。我创建了一个 Web 服务类并使用 @WebService 对其进行注释，编写了一个 web.xml 和 sun-jaxws.xml 文件，将这些文件（加上 JAX-WS jar 文件）打包到一个 .war 文件中，并将其部署到 Tomcat . 这似乎有效，因为我可以在指向 Tomcat 的浏览器中加载 WSDL 文件。

这是我遇到问题的网络服务客户端。首先，服务器端有现有的类可以映射到数据库中。我们希望允许客户端使用相同的现有类并从中创建实例，调用 Web 服务，然后将对象存储到数据库中。但是，当我对服务器的 WSDL 文件运行 wsimport 命令时，它生成了一堆 Java 类，其中很多与我们现有的类相似。我想我们必须使用那些而不是我们现有的类？代码重用就这么多，除非我很困惑，这是很有可能的。

所以现在我已经使用 wsimport 生成的那些类编写了客户端。但是我遇到了编译错误。我们现有 Java 类中的一些字段是 java.net.InetAddress 类型的。但由于某种原因，wsimport 生成了自己的 InetAddress 类，它看起来是这样的：

```
package ems.server.webservices;
import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlType;
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "inetAddress")
public class InetAddress {
} 
```

是的，这只是一堂课，里面什么都没有！所以我说的很多编译错误：

```
WSClient.java:37: setAddress(ems.server.webservices.InetAddress) in ems.server.webservices.NetworkAddress cannot be applied to (java.net.InetAddress)
    networkAddress.setAddress(InetAddress.getByName("1.1.1.1")); 
```

我正在尝试创建一个 java.net.InetAddress，但它希望我使用由 wsimport 生成的空类。我一定在这里做错了什么。请赐教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:51:04.260

> 我们有一些现有的 Java 代码在 Tomcat 服务器上运行，我们希望允许另一台机器上的代码执行，因此我们正在研究 Web 服务

网络服务为此？为什么？

> 首先，服务器端有现有的类可以映射到数据库中。我们希望允许客户端使用那些相同的现有类....对于代码重用来说太多了

真是个坏主意。Web 服务的目的不是代码可重用性，而是*互操作性*。尝试重用实际承载您正在使用的编程语言的语义的业务类，不仅是一种不好的做法，而且会导致您遇到许多问题，除非您还控制客户端的大多数微不足道的 Web 服务。

> 当我对服务器的 WSDL 文件运行 wsimport 命令时，它生成了一堆 Java 类

当您运行`wsimport`Web 服务客户端与 Web 服务器通信所需的所有必要工件时，就会创建。这包括所有有助于在 SOAP 编组/解组期间转换类的存根类

> 但是我遇到了编译错误。我们现有 Java 类中的一些字段是 java.net.InetAddress 类型的

`java.net.InetAddress`是***Java 特定***的类。你不应该首先暴露它。这就是代码生成器创建空的`java.net.InetAddress`.

老实说，我不能给你一个直接的答案来完成这项工作。我唯一可以给你的提示是，如果你用它们注释`InetAddress`字段，`@XmlTransient`它们将不会被暴露`WSDL`，你就不会遇到这个问题。当然，你没有说你是否需要这个字段，也许我的建议对你没有用。

但我的建议是改变你的方法。恕我直言，您走错了路。唯一的建议是改变你的方法。

# ios - 如何使用 Cocos2d 缩放圆形区域？

> ID：10452334
> 
> 赞同：1
> 
> 时间：2012-05-04T16:04:32.473
> 
> 标签：ios, cocos2d-iphone, zooming

我正在为 iPad 和 iPhone 开发一个 Cocos2d 项目，现在我需要开发一些对于 iPhone 来说看起来太小的东西。我的第一种方法是重新设计它以使其看起来更大，但后来我认为区域缩放效果会很棒。不好的一点是我不知道该怎么做......我真的不知道什么是正确/最好的方法。

我已经检查了有效的 Cocos2D CCLens3D 构建，但它并没有给我想要的结果。

我希望得到与在 UIKit 上长按 textview/textfield 时相同的结果： ![UITextField 缩放](../Images/40737905bf7c0b2bae5dbd548f50778d.png)

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T13:36:23.283

如果您仍在寻找解决方案： [http ://rombosblog.wordpress.com/2012/06/03/magnifierglassforcocos2d/](http://rombosblog.wordpress.com/2012/06/03/magnifierglassforcocos2d/)

使用 CoreGraphics 进行渲染。尽管此实现有效（需要进行一些调整），但我发现它缺乏我正在寻找的高斯分布效果，并且如果您在小间隔内更新放大效果，它会非常昂贵。

# php - php FORM脚本未处理

> ID：10452335
> 
> 赞同：0
> 
> 时间：2012-05-04T16:04:44.290
> 
> 标签：php, html, forms

我的表单不断重定向回主联系页面......所以即使按下提交按钮，它也不会处理，这意味着`$_POST['contactsent']`“是”并且表单应该处理。

HTML 表单片段

```
<form method="post" action="process.php" id="form1">
<input type="hidden" value='yes' name="contactsend" /> 
```

PHP表单流程

```
if ($_POST['contactsent'] != 'yes') {
    header ('Location: /contact');
    exit;
} else {

    if (is_array($_POST)) {
        foreach ($_POST as $key => $value) {
            $_POST[$key] = mysql_real_escape_string(stripslashes($value));
        }
    }

    $uxRequestType      = $_POST["uxRequestType"];
    $uxGlobalLocation   = $_POST["uxGlobalLocation"];
    $uxFirstName        = strtolower(str_replace("'","''",$_POST["uxFirstName"]));
    $uxFirstName        = strtoupper(substr($uxFirstName,0,1)).substr($uxFirstName,1);
    $uxLastName         = strtolower(str_replace("'","''",$_POST["uxLastName"]));
    $uxLastName         = strtoupper(substr($uxLastName,0,1)).substr($uxLastName,1);
    $uxEmail            = strtolower(str_replace("'","''",$_POST["uxEmail"]));
    $uxCity             = strtolower(str_replace("'","''",$_POST["uxCity"]));
    $uxCity             = strtoupper(substr($uxCity,0,1)).substr($uxCity,1);
    $uxState            = $_POST["uxState"];
    $uxComment          = $_POST["uxComment"];

    if ($uxGlobalLocation == "host1"):
        $SendTo="caninfo@--.com";
    elseif ($uxGlobalLocation == "host2"): 
        $SendTo="cvice@--.com";
    else:
        $SendTo="info@--.com";
    endif; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:06:08.607

Contactsend 和contactsent ... 错字？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:06:17.793

您错误地命名了变量：

```
if ($_POST['contactsent'] != 'yes') { 
```

应该

```
if ($_POST['contactsend'] != 'yes') { 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:07:31.443

```
<input type="hidden" value='yes' name="contactsend" /> 
```

和

```
if ($_POST['contactsent'] != 'yes') { 
```

他们都需要是“contactsend”或“contactsent”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T16:06:27.450

一个键名为“contactSEND”，另一个键名为contactSENT

# paypal-ipn - 必须在虚拟主机中提供什么功能才能使 ipn 正常工作

> ID：10452341
> 
> 赞同：1
> 
> 时间：2012-05-04T16:05:11.383
> 
> 标签：paypal-ipn

我正在使用免费的虚拟主机，但现在我想找到一个支持与 paypal 连接的新主机，请参阅此主题以了解我在说什么 [http://www.zymic.com/forum/index。 php?showtopic=33328&st=0&gopid=141044&#entry141044](http://www.zymic.com/forum/index.php?showtopic=33328&st=0&gopid=141044&#entry141044)

我已经发布了这个问题，但他们告诉我“关于免费网络托管建议的问题与 Stack Overflow 无关”。

**所以我不是要推荐**。我的问题是：必须在虚拟主机中提供什么功能才能使我的 ipn 脚本正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T00:11:30.013

我不确定我是否理解您的问题“必须在虚拟主机中提供什么功能才能使我的 IPN 脚本正常工作？”。IPN 是返回您系统的 POST，然后您的系统响应 PayPal 的 POST 以验证信息。你可以用不同的语言设置它，它可以设置为一个 windows 或 linux 服务器。然后是您希望 IPN 脚本对信息做什么的问题。您需要确保将帖子发送到安全网址 https:// 您能更具体地说明您的要求吗？

# jquery - jquery mobile：谷歌地图api>允许用户位置>提醒这个偏好

> ID：10452342
> 
> 赞同：2
> 
> 时间：2012-05-04T16:05:13.677
> 
> 标签：jquery, mobile, maps, location

我有一个在线托管的移动网站，并围绕它构建了一个应用程序（带有 web 视图）。通常，当您允许某个应用使用您当前的位置时，手机会保存此设置，以后不会再询问。但是使用我的网络应用程序（由 jquery mobile 提供支持），每次我打开应用程序时，它都会询问 sam 问题（允许使用您当前的位置）。当我在浏览器中访问该网站时也会发生同样的情况。

是否有保存此首选项的选项，以便应用程序/网站不会再次询问？

非常感谢。

# unit-testing - Grails 单元测试 Buggy 动态查找器

> ID：10452346
> 
> 赞同：0
> 
> 时间：2012-05-04T16:05:22.270
> 
> 标签：unit-testing, grails, groovy

我正在为服务类编写单元测试。此服务类调用`MyDomain.findAllByIdNotInList`. 我面临的问题是 grails 无法将 NotInList 识别为模拟域的动态查找器。我尝试了 Metaclass-ing 这个功能，但是遇到了问题。

有什么创造性的方法可以绕过将单元测试转变为集成测试的这种短板？我想避免这种情况有多种原因（运行时间，只有我们的单元测试在构建时运行等）

此外，我的元分类可能写得不好：

```
MyDomain.metaClass.findAllByIdNotInList = {ArrayList list ->
        return []
    } 
```

编辑：使用 grails 1.3.7。

也试过

```
 MyDomain.metaClass.findAllByIdNotInList = {deflist ->
        return []
    } 
```

错误报告在这里：

[http://jira.grails.org/browse/GRAILS-8593](http://jira.grails.org/browse/GRAILS-8593)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:54:36.523

@Sagar V 的评论是正确的，当正确模拟域时，您应该能够利用所有动态查找器。如果您使用的是 2.0 之前的 Grails 版本，则必须在尝试调用动态查找器之前进行扩展`GrailsUnitTestCase`和调用。`MockDomain(MyDomain)`作为仅供参考，您的 metaClassing 编写不正确（在我看来，您应该使用模拟框架来使您的测试正常工作，我提供了正确的语法，以便您将来可以正确使用它）。

```
MyDomain.metaClass.'static'.findAllByIdNotInList = {defList ->
    []
} 
```

当您覆盖的方法是`static`您需要添加`.'static'.`中间`metaClass`和方法名称时。

# perl - Perl Inotify 不响应追加（即回显“测试”>> 文件）

> ID：10452347
> 
> 赞同：0
> 
> 时间：2012-05-04T16:05:26.160
> 
> 标签：perl, inotify

当运行下面的测试代码来观察文件时，只有当我对文件执行“vim”并将其写出（或写退出）时，才会检测到事件。未检测到对文件执行“回显”或通过 perl 添加文本。

test_inotify.pl：

```
#!/usr/bin/perl

use strict;
use warnings;
use diagnostics;
use Carp;
use IO::File;
use Linux::Inotify2;

$|++;

my $readfile            = shift;
#my $action     = "IN_CLOSE_WAIT";
#my $action     = "IN_MODIFY";
#my $action     = "IN_OPEN";
my $action      = "IN_ALL_EVENTS";

unless ($readfile) { $readfile = "test.txt" };

my $inotify     = Linux::Inotify2->new();

$inotify->watch($readfile, $action)
                or die "Inotify watch on " . $readfile . "failed: $!\n";

while () {

    my @events  = $inotify->read();

    unless (@events > 0) {
        print "Inotify Read Error: $!\n";
        exit;
    };

    foreach my $event (@events) {
        print "Detected Event: " . $event->fullname . "\n";
    };

}; 
```

test_fh_write.pl：

```
#!/usr/bin/perl -w

use strict;
use warnings;
use diagnostics;
use Carp;
use IO::File;

$|++;

my $readfile            = shift;

unless ($readfile) { $readfile = "test.txt" };

my $readfh              = IO::File->new( $readfile, ">>" ) or
#my $readfh              = IO::File->new( $readfile, ">" ) or
                                die "Cannot open $readfile: $!";

$readfh->autoflush(1);

if ($readfh) {

    print $readfh "test\n\n";

};

undef($readfh); 
```

我尝试过使用 test_fh_write.pl 以及像这样的 echo 命令：'echo a >> test.txt'、'echo "test" >> test.txt' 等。

我也试过用“$|” 字符和没有（即使使用 $fh->autoflush(1)），但无济于事。我尝试过在 test_inotify.pl 中定义的每个 $action 变量，但它们的结果都是一样的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:21:16.867

我认为第二个参数`Linux::Inotify2::watch`是数字/位掩码，而不是字符串。你应该打电话

```
$inotify->watch($readfile, IN_ALL_EVENTS) 
```

代替

```
$inotify->watch($readfile, "IN_ALL_EVENTS") 
```

裸词`IN_ALL_EVENTS`被解析为（可能是常量）函数`&Linux::Inotify2::IN_ALL_EVENTS`。

# sql-server - Sql Server 字符串实习

> ID：10452353
> 
> 赞同：4
> 
> 时间：2012-05-04T16:05:50.523
> 
> 标签：sql-server, string, sql-server-2008, compression

我们有一个存储所有异常（消息、stackTrace 等）的表，该表越来越大，我们希望减少它。

[有大量重复的 StackTraces、消息等，但启用压缩会产生适度的大小减少 (10%)，而我认为如果 Sql Server 以某种方式将字符串实习](http://en.wikipedia.org/wiki/String_interning)在某个每列哈希表中，可能会带来更大的好处。

如果我规范化表并将 StackTraces 提取到另一个表，我可以获得一些好处，但异常消息、异常类型等也会重复。

有没有办法为 Sql Server 中的某些列启用字符串实习？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:15:51.740

没有内置的方法可以做到这一点。您可以轻松地执行以下操作：

```
SELECT MessageID = IDENTITY(INT, 1, 1), Message 
  INTO dbo.Messages 
  FROM dbo.HugeTable GROUP BY Message;

ALTER TABLE dbo.HugeTable ADD MessageID INT;

UPDATE h
   SET h.MessageID = m.MessageID
   FROM dbo.HugeTable AS h
   INNER JOIN dbo.Messages AS m
   ON h.Message = m.Message;

ALTER TABLE dbo.HugeTable DROP COLUMN Message; 
```

现在你需要做一些事情：

*   更改您的日志记录过程以对 Messages 表执行 upsert
*   向消息表添加适当的索引（不确定消息数据类型）和 PK
*   将 FK 添加到 MessageID 列
*   在 HugeTable 上重建索引以回收空间
*   首先在测试环境中执行此操作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-03T05:04:17.377

Aaron 的帖子回答了向表添加实习的问题，但之后您需要修改应用程序代码和存储过程以使用新模式。

...或者你可能会这么想。您实际上可以创建一个`VIEW`返回与旧模式匹配的数据的 a，您还可以支持`INSERT`视图上的操作，这些操作被转换为`Messages`和`HugeTable`表上的子操作。为了便于阅读，我将使用名称`InternedStrings`和`ExceptionLogs`表格。

所以如果旧表是这样的：

```
CREATE TABLE ExceptionLogs (
    LogId         int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    Message       nvarchar(1024) NOT NULL,
    ExceptionType nvarchar(512)  NOT NULL,
    StackTrace    nvarchar(4096) NOT NULL
) 
```

新表是：

```
CREATE TABLE InternedStrings (
    StringId int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    Value    nvarchar(max)     NOT NULL
)

CREATE TABLE ExceptionLogs2 ( -- note the new name
    LogId         int IDENTITY(1,1) NOT NULL PRIMARY KEY,
    Message       int NOT NULL,
    ExceptionType int NOT NULL,
    StackTrace    int NOT NULL
) 
```

添加索引以`InternedStrings`使值查找更快：

```
CREATE UNIQUE NONCLUSTERED INDEX IX_U_InternedStrings_Value ON InternedStrings ( Value ASC ) 
```

然后你也会有一个`VIEW`：

```
CREATE VIEW ExeptionLogs AS

    SELECT
        LogId,
        MessageStrings      .Value AS Message,
        ExceptionTypeStrings.Value AS ExceptionType,
        StackTraceStrings   .Value AS StackTrace
    FROM
        ExceptionLogs2

        INNER JOIN InternedStrings AS MessageStrings       ON
            MessageStrings.StringId = ExceptionLogs2.Message

        INNER JOIN InternedStrings AS ExceptionTypeStrings ON
            ExceptionTypeStrings.StringId = ExceptionLogs2.ExceptionType

        INNER JOIN InternedStrings AS StackTraceStrings    ON
            StackTraceStrings.StringId = ExceptionLogs2.StackTrace 
```

并处理`INSERT`来自未修改客户端的操作：

```
CREATE TRIGGER ExceptionLogsInsertHandler
    ON ExceptionLogs INSTEAD OF INSERT AS

    DECLARE @messageId int = SELECT StringId FROM InternedStrings WHERE Value = inserted.Message
    IF @messageId IS NULL
    BEGIN
        INSERT INTO InternedStrings ( Text ) VALUES ( inserted.Message )
        SET @messageId = SCOPE_IDENTITY()
    END

    DECLARE @exceptionTypeId int = SELECT StringId FROM InternedStrings WHERE Value = inserted.ExceptionType
    IF @exceptionTypeId IS NULL
    BEGIN
        INSERT INTO InternedStrings ( Text ) VALUES ( inserted.ExceptionType )
        SET @exceptionTypeId = SCOPE_IDENTITY()
    END

    DECLARE @stackTraceId int = SELECT StringId FROM InternedStrings WHERE Value = inserted.StackTrace
    IF @stackTraceId IS NULL
    BEGIN
        INSERT INTO InternedStrings ( Text ) VALUES ( inserted.StackTrace )
        SET @stackTraceId = SCOPE_IDENTITY()
    END

    INSERT INTO ExceptionLogs2 ( Message, ExceptionType, StackTrace )
    VALUES ( @messageId, @exceptionTypeId, @stackTraceId ) 
```

请注意，这`TRIGGER`可以改进：它仅支持单行插入，并不完全是并发安全的，尽管因为以前的数据不会发生变异，这意味着表中存在数据*重复*的轻微风险`InternedStrings`- 并且因为`UNIQUE`索引插入将失败。有不同的可能方法来处理这个问题，例如使用 a`TRANSACTION`并将查询更改为使用`holdlock`and `updlock`。

# eclipse - 无法在 Eclipse 3.6 中使用 AJDT 执行无头 PDE 构建

> ID：10452355
> 
> 赞同：0
> 
> 时间：2012-05-04T16:05:51.430
> 
> 标签：eclipse, pde, headless, ajdt

我在 Eclipse 3.6 中开发了几个简单的插件项目，作为 rcp 应用程序的一部分。我也有一个非常简单的方面。我已阅读 Andrew Eisenberg 的文章 (http://contraptionsforprogramming.blogspot.com/2010/03/ajdt-pde-builds-redux.html) 关于从 eclipse 3.6 开始逐步淘汰 ajdt-pde 构建方法，这让我能够我的应用程序直接在 Eclipse 中工作。但是，我们的官方构建是使用 Ant 进行无头构建的，以下代码块是它的编译方式：

```
<target name="compile">
    <java classname="org.eclipse.equinox.launcher.Main" fork="true" failonerror="true" dir="some-dir">
        <arg value="-application" />
        <arg value="org.eclipse.ant.core.antRunner" />
        <arg value="-buildfile" />
        <arg value="${eclipse.location}/plugins/org.eclipse.pde.build_${some-version}/scripts/productBuild/productBuild.xml" />
        <arg value="-Dtimestamp=${timestamp}" />
        <arg value="-propertyfile" />
        <arg value="${some-dir}/ant.properties" />
        <classpath>
            <pathelement
                 location="${eclipse.location}/plugins/org.eclipse.equinox.launcher_${some-version}.jar" />
        </classpath>
    </java>
</target> 
```

因为 build.properties 不涉及基于 Ant 的 PDE 无头构建，所以我不清楚以下条目应该放在哪里：

```
compilerAdapter=org.eclipse.ajdt.core.ant.AJDT_AjcCompilerAdapter
sourceFileExtensions=*.java, *.aj 
```

请帮我。感谢您的时间！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:03:13.647

您需要将上述属性添加到`build.properties`您正在编译的每个需要 AspectJ 的插件的文件中。

# java - 如何在 eclipse 中更改目标应用程序引擎帐户以部署新应用程序？

> ID：10452361
> 
> 赞同：0
> 
> 时间：2012-05-04T16:06:14.960
> 
> 标签：java, eclipse, google-app-engine

我有一个 Google App Engine 帐户，其中托管了我整理的一些 Java 应用程序。我将 Eclipse Indigo 与 appengine-java-sdk 版本 1.6.5 一起使用。我可以毫无问题地将应用程序部署到我自己的帐户，但 google sdk 不要求输入用户名或密码。我找不到任何方法将我的应用程序部署到其他人的帐户，我有一个用户名和密码。

如果有人对此有任何见解，我将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:19:02.167

在[https://developers.google.com/eclipse/docs/signin有关于用于 Eclipse 身份验证的 Google 插件的详细文档](https://developers.google.com/eclipse/docs/signin)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:26:56.180

有一个按钮（在我的 Eclipse 的左下角...）用于登录/退出 google appengine。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T18:15:00.230

也许这有帮助。我使用 DOS 脚本来部署应用程序。这是一个python示例

```
D:\PROGRAMS\google_appengine\appcfg.py --no_cookies --email=you@gmail.com --passin update D:\Eclipse\workspace\myproject < d:\gae\password.txt 
```

顺便说一句：如果您使用两步验证，您需要这样的脚本。

# c# - 如何避免在新创建的 XElement 中获取空命名空间？

> ID：10452365
> 
> 赞同：2
> 
> 时间：2012-05-04T16:06:22.273
> 
> 标签：c#, xml, namespaces, xelement

我正在尝试从另一个文件中删除然后将 pageFooter 添加到 xml 文档：

```
XNamespace rep = "http://developer.cognos.com/schemas/report/8.0/";

//remove pageFooter
doc.Root.Descendants().Where(e=>e.Name == rep + "pageFooter").Remove();

//create and load pagefooter from file
XElement pageFooter = XElement.Load(@"C:\pageFooter.xml"); 
```

我得到了空的命名空间：

```
<pageFooter xmlns="">
    <contents>
         .............. 
```

我尝试了以下所有方法将命名空间添加到新元素，但没有任何效果：

```
XElement pagefooter = new XElement(rep+"pageFooter"); 
pageFooter = XElement.Load(@"C:\pageFooter.xml");        
//this has no effect

pageFooter.Name = rep.GetName(pageFooter.Name.LocalName);
//this moves the xmlns="" to the next descendant, <contents>

pageFooter.Add(rep);   
//this has no effect

pageFooter.SetAttributeValue("xmlns", rep);
//this results an empty pageFooter 
```

有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:19:51.140

列出了您的第二次努力，您走在了正确的轨道上。移动`xmlns=""`到下一个后代意味着`pageFooter`具有正确的 xmlns，但它的其余后代没有。用这个：

```
foreach (var d in pagefooter.DescendantsAndSelf())
    d.Name = rep + d.Name.LocalName; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:25:03.867

任何时候你`pageFooter = XElement.Load(file)`都在用文件的内容替换 pageFooter 中的任何内容。预先设置`rep`命名空间对`XElement.Load()`.

您确定 XML 文件具有 pageFooter 的命名空间吗？

# java - 如何读取输入星并计算方法中的距离并在主中调用答案？

> ID：10452367
> 
> 赞同：0
> 
> 时间：2012-05-04T16:06:28.137
> 
> 标签：java, methods, call, java.util.scanner, main

我希望能够读取输入星并计算方法中的距离并在主中调用答案。我该怎么做呢？这是我到目前为止所拥有的。它的作用是找到我需要显示的 5 颗星的距离。

谢谢！！

```
package desktop;

import java.util.Scanner;
import javax.swing.JOptionPane;
 // *import io because of the file writing

public class distance {

public static void main (String [] args) {

double d = place ();
    }

public static double findDistance (String distance)  {

           double result;

      Scanner sc = new Scanner(System.in);
  System.out.println("Where would you like to go?");
                System.out.println();
                    System.out.println("Enter 1 for Proxima Centauri");
                System.out.println("Enter 2 for Bernard's Star");
                System.out.println("Enter 3 for Sirius A");
                System.out.println("Enter 4 for Epsilon Eridani");
                System.out.println("Enter 5 for Betelgeuse");
                System.out.println();
                System.out.println();

                double operator;
                int place = sc.nextInt();

                switch (place) {

                case 1:
                    result = timePC ();
                    System.out.println();
                    System.out.println();
                    System.out.println("Time to Proxima Centauri is: " + String.format("%.4g",timePC()) + " lightyears");
                    break;
                case 2:
                    result = timeBS ();
                    System.out.println();
                    System.out.println();
                    System.out.println("Time to Bernand's Star is: " + String.format("%.4g",timeBS()) + " lightyears");
                    break;
                case 3:
                    result = timeSA ();
                    System.out.println();
                    System.out.println();
                    System.out.println("Time to Sirius A is: " + String.format("%.4g",timeSA()) + " lightyears");
                    break;
                case 4:
                    result = timeEE ();
                    System.out.println();
                    System.out.println();
                    System.out.println("Time to Epsilon Eridani is: " + String.format("%.4g",timeEE()) + " lightyears");
                    break;
                                   case 5:
                                       result = timeB ();
                                       System.out.println();
                                       System.out.println();
                                       System.out.println("Time to Betelgeuse is:" String.format("%.4g",timeB()) + " lightyears" );
                   break;
                   default:
                        System.out.println("Invalid function");
                   }
                    return place;

            }

                        public static double timePC () {

                        double result;
                        double CC = 3.16887*Math.pow(10,7);
                        double distance = 4.010*Math.pow(10, 16);
                        double velocity = 3*Math.pow(10, 8);
                        result = (distance / velocity)/CC;
                        return result;
                        }

                        public static double timeBS () {

                        double result;
                        double CC = 3.16887*Math.pow(10,7);
                        double distance = 5.637*Math.pow(10, 16);
                        double velocity = 3*Math.pow(10, 8);
                        result = (distance / velocity)/CC;
                        return result;
                        }

                        public static double timeSA () {

                        double result;
                        double CC = 3.16887*Math.pow(10,7);
                        double distance = 3.592*Math.pow(10, 18);
                        double velocity = 3*Math.pow(10, 8);
                        result = (distance / velocity)/CC;
                        return result;
                        }

                        public static double timeEE () {

                        double result;
                        double CC = 3.16887*Math.pow(10,7);
                        double distance = 2.930*Math.pow(10, 18);
                        double velocity = 3*Math.pow(10, 8);
                        result = (distance / velocity)/CC;
                                    return result;
                    }

                        public static double timeB () {

                        double result;
                        double CC = 3.16887*Math.pow(10,7);
                        double distance = 6.079*Math.pow(10, 18);
                        double velocity = 3*Math.pow(10, 8);
                        result = (distance / velocity)/CC;
                        return result;
                        }
                   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:46:11.173

我更改了您的方法签名，因为您没有使用传入的变量并正确重命名了 Distance 类。我还使 findDistance 方法不是静态的，其余方法不应该是静态方法，因为您可以创建[Java Classes 类](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)的实例。您还有一些我留在其中的未使用的原始类型。

```
import java.util.Scanner;
import javax.swing.JOptionPane;

public class Distance {

 public double findDistance ()  {

 double result;

  Scanner sc = new Scanner(System.in);
  System.out.println("Where would you like to go?");
      System.out.println();
      System.out.println("Enter 1 for Proxima Centauri");
      System.out.println("Enter 2 for Bernard's Star");
      System.out.println("Enter 3 for Sirius A");
      System.out.println("Enter 4 for Epsilon Eridani");
      System.out.println("Enter 5 for Betelgeuse");
      System.out.println();
      System.out.println();

      double operator;
      int place = sc.nextInt();

      switch (place) {

      case 1:
          result = timePC ();
          System.out.println();
          System.out.println();
          System.out.println("Time to Proxima Centauri is: " + String.format("%.4g",timePC()) + " lightyears");
          break;
      case 2:
          result = timeBS ();
          System.out.println();
          System.out.println();
          System.out.println("Time to Bernand's Star is: " + String.format("%.4g",timeBS()) + " lightyears");
          break;
      case 3:
          result = timeSA ();
          System.out.println();
          System.out.println();
          System.out.println("Time to Sirius A is: " + String.format("%.4g",timeSA()) + " lightyears");
          break;
      case 4:
          result = timeEE ();
          System.out.println();
          System.out.println();
          System.out.println("Time to Epsilon Eridani is: " + String.format("%.4g",timeEE()) + " lightyears");
          break;
       case 5:
           result = timeB ();
           System.out.println();
           System.out.println();
           System.out.println("Time to Betelgeuse is:" + String.format("%.4g",timeB()) + " lightyears" );
         break;
         default:
              System.out.println("Invalid function");
         }
          return place;

        }

        public static double timePC () {

        double result;
        double CC = 3.16887*Math.pow(10,7);
        double distance = 4.010*Math.pow(10, 16);
        double velocity = 3*Math.pow(10, 8);
        result = (distance / velocity)/CC;
        return result;
        }

        public static double timeBS () {

        double result;
        double CC = 3.16887*Math.pow(10,7);
        double distance = 5.637*Math.pow(10, 16);
        double velocity = 3*Math.pow(10, 8);
        result = (distance / velocity)/CC;
        return result;
        }

        public static double timeSA () {

        double result;
        double CC = 3.16887*Math.pow(10,7);
        double distance = 3.592*Math.pow(10, 18);
        double velocity = 3*Math.pow(10, 8);
        result = (distance / velocity)/CC;
        return result;
        }

        public static double timeEE () {

        double result;
        double CC = 3.16887*Math.pow(10,7);
        double distance = 2.930*Math.pow(10, 18);
        double velocity = 3*Math.pow(10, 8);
        result = (distance / velocity)/CC;
                    return result;
        }

        public static double timeB () {

        double result;
        double CC = 3.16887*Math.pow(10,7);
        double distance = 6.079*Math.pow(10, 18);
        double velocity = 3*Math.pow(10, 8);
        result = (distance / velocity)/CC;
        return result;
        }

        public static void main(String[] args){

          Distance d = new Distance();
          d.findDistance(null);

        }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:13:17.953

您的主要方法应该看起来像这样：

```
public static void main (String [] args) {
    System.out.println(findDistance());
} 
```

这将要求您将 findDistance 的方法标头更改为：

```
public static double findDistance ()  { ... 
```

（因为您从不使用该`string distance`参数）。

# asp.net-mvc - 如何从 ASP.NET MVC Web API 帖子中获取原始 JSON 字典？

> ID：10452371
> 
> 赞同：3
> 
> 时间：2012-05-04T16:06:50.613
> 
> 标签：asp.net-mvc, json, web-services, asp.net-mvc-4, asp.net-web-api

使用 ApiController 子类，它可以在 Post 方法中将其绑定到现有模型对象，例如

```
public class RegisterController : ApiController
{
    public void Post(Product product) 
```

但如果传入的 JSON 数据包含我将用于创建多个模型对象的数据，我如何才能直接获取数据？

```
 public void Post(dynamic value) 
```

将值返回为 null。有没有像 request.POST['name'] 之类的简单快捷方式？

假设数据看起来像

```
{
    'productID':1,
    'productName':'hello',
    'manufacturerID':1,
    'manufacturerName':'world'
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:16:06.297

一种选择可能是在 Request 对象的 HttpContent 实例中使用 ReadAsAsync* 方法之一

```
public void Post() {
   var result = this.Request.Content.ReadAsAsync<string>().Result;
} 
```

我不知道您发送数据的格式，但您可以通过这种方式检索它。

您也可以对多个对象尝试此操作...

```
public void Post(IEnumberable<Product> products) {

} 
```

# jquery - jQuery.ajax 事件在 IE8 中未正确触发（加载 Fiddler 时除外）

> ID：10452376
> 
> 赞同：2
> 
> 时间：2012-05-04T16:06:59.820
> 
> 标签：jquery, ajax, json, web-services, internet-explorer-8

这可能是我遇到过的最奇怪的错误：

所以我有一堆 jQuery.ajax 调用我扔在一起的 Web 服务。它在 Firefox 和 Chrome 中运行良好，但它在 IE8 中没有任何作用，*除非*我运行 Fiddler。（这类似于[这里](https://stackoverflow.com/questions/1297673/jquery-ajax-not-working-remotely-on-ie)报告的问题，但我已经尝试过提到的东西无济于事。）

在这些非功能调用中，它似乎正在构建 jqXHR 对象，但缺少一些东西。但不确定是什么——我对 jQuery 的内部工作方式并不十分熟悉，所以在调试器中单步执行调用对我来说只能做这么多。

这是电话：

```
$.ajaxSetup({
    type: "POST",
    timeout: 30000,
    contentType: "application/json; charset=utf-8"
});

$.ajax({
url: "/PSWS/UserManager.asmx/Login",
data: '{"emailAddress":"' + myEmailAddress + '","password":"' + myPassword + '","stayLoggedIn":' + (myStayLoggedIn ? 'true' : 'false') + '}',
success: function (response) {
    if (!response.Success) {
        alert(response.Message);
    } else {
        $(this).find('.message').remove();
        $.fn.colorbox.close();
    }
},
dataType: 'json',
error: function (jqXHR, textStatus, errorThrown) {
    $(this).find('.message').remove();
    $(this).prepend('<div class="message message_error">Error!<br/>' + jqXHR.status + ' - ' + jqXHR.statusText + '</div>');
} 
```

});`

我想知道我的 JSON 是否有问题，无论是发送的还是接收的。除了通过 Fiddler 之外，我不知道有什么方法可以捕捉到这一点，但它似乎是有效的。无论如何，对于它的解析器和 JSONLint 来说足够有效。

发送： `{"emailAddress":"test@example.com","password":"asdasdasd","stayLoggedIn":true}`

已收到： `{"__type":"PSUserManagerService.SystemResponse","Success":false,"Message":"Error logging in: Invalid username and/or password.","Subscriptions":null}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:34:02.880

我有同样的问题。

就我而言，这是由 NTLM (SSO) 身份验证引起的。

Internet Explorer**在每个 post-Request 上检查 NTLM 身份验证**：

* * *

请求标头（来自 DebugBar 插件）

*Cookie：JSESSIONID=2323......323239*

*授权：NTLM....*

* * *

我不知道为什么它确实适用于提琴手......也许通过这个代理，身份验证头被操纵了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T06:30:56.183

Witali 可能是正确的，这可能与 NTLM 身份验证有关。

就我而言，很难对问题进行诊断。我有 3 个网络：具有类似配置的开发、测试和产品。相同的 IE 8 可以成功地将 JSON 对象发布到开发和测试，但不能成功发布。所以它不应该是客户端的问题。然后我也排除了服务器的问题，例如应用程序或版本控制，因为 Chrom 和 Firefox 可以成功发布到同一个 prod 服务器的应用程序。但是，它看起来更像是一个客户端问题，因为如果我使用 fiddler，那么它可以在 prod 中工作。

无论如何，我试验的最终解决方案是在站点级别启用 Windows 身份验证，而不仅仅是在 IIS 中的应用程序级别（我的站点下面有几个应用程序）。

您还必须 IIS（站点）-> Windows 身份验证-> 高级设置-> 提供程序，使 NTLM 成为顶部而不是 Negociate。

希望这可以帮助。

# javascript - 开发时加载本地 CSS 和 JavaScript 文件，推送到服务器时生效

> ID：10452381
> 
> 赞同：0
> 
> 时间：2012-05-04T16:07:24.343
> 
> 标签：javascript, css, visual-studio

我正在 Visual Studio 中进行开发，并对网站进行大量前端更改。但是由于服务器设置的原因，每次编译都要花一分钟才能在浏览器中看到更改。

是否可以使用程序让网站加载带有本地 CSS 和 JavaScript 文件的网站？我想在本地进行更改并在网站上查看更改而不编译项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:14:12.817

我为此使用[Charles Proxy](http://www.charlesproxy.com/)。它允许您将某些 URI 映射到[不同的 URI](http://www.charlesproxy.com/documentation/tools/map-remote/)或[本地文件](http://www.charlesproxy.com/documentation/tools/map-local/)。

因此，您可以告诉它从不同的位置加载特定的 JS/CSS 文件（或使用通配符并批量映射它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:12:39.997

这里真正的问题是为什么要使用 Visual Studio 开发网站。

您应该设置一个本地 HTTP 服务器并从[http://localhost](http://localhost)访问您的站点。

# android - 如何创建不可移动帐户

> ID：10452387
> 
> 赞同：0
> 
> 时间：2012-05-04T16:07:40.027
> 
> 标签：android, user-accounts, accountmanager

我想创建一个仅限电话的帐户，该帐户将仅保留电话联系人，并且使用不应删除此帐户（恢复出厂设置除外）。

有什么方法可以在帐户身份验证器或同步适配器中或通过帐户管理器指定，这样该帐户将不可删除。以下任何一种可能性都可以，1）。帐户将出现在设备中，但在帐户和同步设置 2) 中配置的帐户列表下将不可用。帐户将在列表中可用，但该帐户的删除选项将被禁用（消失）。

提前致谢， AS

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:21:24.613

抱歉，如果不修改固件，列表中的任何内容都是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-16T03:34:22.417

人们想要这样的东西是有充分理由的。例如，能够使用 2 个单独的帐户保留电话：一个用于您的数据，一个用于电话管理。这样，如果您的手机被盗，您可以通过手机管理帐户远程控制它，同时删除数据帐户。有些应用程序确实允许您远程控制您的手机：1) 如果您只使用一个帐户，那么一旦您更改密码以保护您的数据，您将无法执行远程卸载应用程序等操作。2）小偷可以修改账户，将无法避免管理账户被删除。3) 管理账户最好从账户列表中隐藏起来，这样小偷甚至不会怀疑它在那里。

正如已经提到的那样，使用固件是有道理的。我想知道它是否很难实现。可以在 XDA 上发布。

干杯，让

# jquery - 焦点/单击时是否可以选择iphone设备上的所有输入文本？

> ID：10452391
> 
> 赞同：6
> 
> 时间：2012-05-04T16:07:57.120
> 
> 标签：jquery, iphone, select, jquery-mobile

焦点/单击时是否可以选择iphone设备上的所有输入文本？

通常对于浏览器环境，人们会使用：

```
$('input').bind("click focus", function() {
$(this).select();
}); 
```

这适用于桌面浏览器，但对于 iphone 和可能的其他移动设备似乎没有响应。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-11-02T15:15:25.947

基本上你必须重新排列事件焦点，然后单击，然后触摸启动

```
$('#myID').on('focus click touchstart', function(e){
$(this).get(0).setSelectionRange(0,9999);
//$(this).css("color", "blue"); FUBAR
e.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T15:53:23.050

设置（小）超时最适合我：iOS 键盘似乎是在委托或其他东西中调用的，因为它不断失去我的焦点事件才能选择东西。由于`select()`同样的原因，它没有工作。

我这样修复它：

```
function focusMe(vitem) {
    window.setTimeout(function() { 
      vitem.setSelectionRange(0, 9999);
    }, 10);
}

<input onfocus="focusMe(this)" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T01:23:22.393

```
$('input[type="text"]').on('focus',function(){
    $(this).get(0).selectionStart=0;
    $(this).get(0).selectionEnd=999;
}) 
```

我最初在[这里](https://stackoverflow.com/questions/3272089/programmatically-selecting-text-in-an-input-field-on-ios-devices-mobile-safari)找到了这个信息，还有其他人尝试过的事情已经达到了结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T14:05:10.803

我会使用这样的东西：

```
$('input').live("click", function() {
    $('input').each(function(){
        $(this).select();
    });
});
$('input').live("focus", function() {
    $('input').each(function(){
        $(this).select();
    });
}); 
```

# android - 如何设置一个全局使用的广播接收器来操纵android中的视图

> ID：10452392
> 
> 赞同：1
> 
> 时间：2012-05-04T16:08:04.110
> 
> 标签：android

我的应用程序中的每个活动都使用了一个自定义标题栏。我有一个广播接收器，我想操纵所说的标题栏，

我在我的自定义应用程序类中有这个，

```
 public class MyApplication extends Application {

        public static final String ACTION_RESPONSE = "org.company.com.action.MESSAGE_PROCESSED";                                                                                

        private final BroadcastReceiver receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                MyApplication.log("received");
                //hide the visible progress dialog spinner in title bar

            }
        }; 

        public BroadcastReceiver getBroadcastReceiver() {
            return receiver;
        }   
    } 
```

我在每一个活动的 onCreate 中都有这个，

```
MyApplication application = ((MyApplication) getApplication());
registerReceiver(application.getBroadcastReceiver(), new IntentFilter(MyApplication.ACTION_RESPONSE)); 
```

我想要做的是找到一个很好的 OOP 方法来做到这一点。我意识到，只要在活动中声明了广播接收器，我就可以在每个活动中绑定一个操纵视图的广播接收器，但是复制粘贴相同的代码 15 次以上对我来说没有意义。然后下一个问题是在 MyApplication 类内部，我无权访问任何视图。有没有人遇到过这个问题？

# c# - 有没有更有效的方法来创建基于现有列表和查找列表的列表？

> ID：10452394
> 
> 赞同：1
> 
> 时间：2012-05-04T16:08:24.857
> 
> 标签：c#, refactoring

我有以下方法需要很长时间才能运行，并且希望得到一些帮助以使其运行得更快或更高效。

该方法的主要职责是获取从 CSV 文件创建的数据点列表，`Name`将文件数据点的属性映射到属性`HistorianTagname`的标记名列表中的`DataLoggerTagname`属性，并从映射中创建结果列表。如果映射不存在，则忽略文件数据点。

我知道那是冗长的，但我希望这是有道理的。只看方法可能更容易：

```
 private IEnumerable<DataPoint> GetHistorianDatapoints(IEnumerable<DataPoint> fileDatapoints, IEnumerable<Tagname> historianTagnames)
    {
        /**
         ** REFACTOR THIS 
         **/

        foreach (var fileDatapoint in fileDatapoints)
        {
            var historianTagname = historianTagnames.FirstOrDefault(x => x.DataLoggerTagname.Equals(fileDatapoint.Name, StringComparison.OrdinalIgnoreCase));
            if (historianTagname != null)
            {
                var historianDatapoint = new DataPoint();

                historianDatapoint.Name = historianTagname.HistorianTagname;
                historianDatapoint.Date = fileDatapoint.Date;
                historianDatapoint.Value = fileDatapoint.Value;

                yield return historianDatapoint;
            }
        }
    } 
```

注意：我可以完全控制映射的类和方法，所以如果我做的事情根本上是错误的。我愿意知道！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:11:53.750

我将从修复开始：

```
var historianTagname = historianTagnames.FirstOrDefault(x => x.DataLoggerTagname.Equals(fileDatapoint.Name, StringComparison.OrdinalIgnoreCase)) 
```

通过此循环运行每次迭代是一项非常昂贵的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:15:51.943

就像**@Sheldon Warkentin**所说`FirstOrDefault`的可能是您的功能的瓶颈，最好创建 historianTagnames 一个`Dictionary`名称是关键的地方，然后在您的功能中您可以按键获得价值。

像下面这样：

```
// this is passed to method
IDictionary<string, Tagname> historianTagnames;
// .. method body
var historianTagname = historianTagnames[fileDatapoint.Name]; 
```

当然，您需要添加适当的 if。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:19:41.480

下面是我的提议：

```
private IEnumerable<DataPoint> GetHistorianDatapoints(IEnumerable<DataPoint> fileDatapoints, IEnumerable<Tagname> historianTagnames)
{
    var tagNameDictionary = historianTagnames.ToDictionary(t => t.DataLoggerTagname, StringComparer.OrdinalIgnoreCase);

    foreach (var fileDatapoint in fileDatapoints)
    {                
        if (tagNameDictionary.ContainsKey(fileDatapoint.Name))
        {
            var historianTagname = tagNameDictionary[fileDatapoint.Name];
            var historianDatapoint = new DataPoint();

            historianDatapoint.Name = historianTagname.HistorianTagname;
            historianDatapoint.Date = fileDatapoint.Date;
            historianDatapoint.Value = fileDatapoint.Value;

            yield return historianDatapoint;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T16:22:17.900

正如其他人所说，a`Dictionary<string, Tagname>`可能会表现得更好。

```
var historianDict = new Dictionary<string, Tagname>();
foreach (var tagName in historianTagnames) {
    historianDict[tagName.DataLoggerTagname.ToLowerInvariant()] = tagName;
}

foreach (var fileDatapoint in fileDatapoints) {
    if (historianDict.ContainsKey(fileDatapoint.Name.ToLowerInvariant()) {
        // ...
    }
} 
```

# r - 如何使我在 R 中绘制的圆圈更小？

> ID：10452396
> 
> 赞同：2
> 
> 时间：2012-05-04T16:08:26.997
> 
> 标签：r, size, geometry, figure

当我尝试使用 RStudio 绘制圆时，我只看到圆的一部分。当我使用 plotrix 包中的 draw.circle 以及使用 grid 包中的 grid.circle 时会发生这种情况。

这就是我所看到的：
![在此处输入图像描述](../Images/73890694267998cc67b375aeb14e65ee.png)

我只想有一个正常的圈子。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:23:17.340

只是在这里在黑暗中拍摄。

`draw.circle`只添加到当前情节。如果结果切断了圆圈，原因是您没有创建一个有空间查看圆圈的绘图区域。

比较：

```
plot(-3:3,-3:3,type = "n")
draw.circle(1,1,1) 
```

有了这个：

```
plot(0:1,0:1,type = "n")
draw.circle(1,1,1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:18:08.387

尝试：

```
draw.circle(0.1,0.1,0.1) 
```

想法是坐标从轴相交的左下角开始。如果您设置为 1,1,1，则半径将超过边界，您将获得四分之一圆。

# .htaccess - 亚马逊网上商店按大陆/国家重定向

> ID：10452399
> 
> 赞同：0
> 
> 时间：2012-05-04T16:08:48.400
> 
> 标签：.htaccess, redirect, amazon, country, webstore

我最近帮助建立了一个亚马逊网上商店。我只需要将这家商店展示到美国并重定向来自国外的访客，因为由于税收、运费等原因，定价结构完全不同。

我最初的想法是创建一个 .htaccess 文件

```
GeoIPEnable On
GeoIPDBFile /path/to/GeoIP.dat

# Start Redirecting countries

# Canada
RewriteEngine on
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^US$
RewriteRule ^(.*)$ http://destination-site.com$1 [L] 
```

然后将其上传到亚马逊托管帐户。在测试中，我无法让上述示例正常工作：我期望在这里发生的是，由于我来自美国访问此页面，我应该被重定向到“destination-site.com”但是这并没有发生，我得到一个500 错误。

我的日子越来越难过，因为亚马逊的文档经常过时、不完整，或者非常混乱和令人费解。谷歌搜索也没有提供太多帮助。如果有人知道如果访问者不是来自美国，这是否可以重定向亚马逊网上商店，这将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T16:16:49.783

您应该考虑注册各种亚马逊合作伙伴国家/地区帐户。然后，您应该检测您的访问者，并通过 javascript 为他们所来自的国家/地区附加正确的关联标签。由于这解释起来有点混乱，让我做一个流程图解释。

![在此处输入图像描述](../Images/dc574ebb0c43a89a9e2878d07d1579d0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:31:11.010

尝试将您的重写代码更改为：

```
RewriteEngine on
RewriteCond %{ENV:GEOIP_COUNTRY_CODE} ^US$ [NC]
RewriteRule ^ http://destination-site.com%{REQUEST_URI} [L,R] 
```

如果您仍然收到 500 错误，请查看您的 error.log 以查看错误日志是针对此请求的。

# compression - 如何使用 NLog 压缩日志文件

> ID：10452400
> 
> 赞同：9
> 
> 时间：2012-05-04T16:08:52.927
> 
> 标签：compression, nlog

我在我的一个项目中使用 NLog，我正在尝试压缩文件的输出。我尝试使用压缩文件属性，但是当我查看文件时，它们没有被压缩。

你能告诉我我可能做错了什么吗？

这是我的配置：

```
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <targets>  
        <target name="file" xsi:type="File" fileName="C:\Workspaces\log.xml"
                layout="${message}" keepFileOpen="true"
                archiveFileName = "C:\Workspaces\archived\log.{#####}.xml"
                archiveAboveSize = "1048576" archiveNumbering = "Sequence"
                fileAttributes="Compressed" concurrentWrites =  "true"/>
    </targets>

    <rules>
        <logger name ="*" minlevel="Debug" writeTo="file" />
    </rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-08-26T21:59:33.453

使用 NLog 4，您可以压缩到`zip`文件 (.NET 4.5+)。请参阅[NLog 4.0 发布帖子](http://nlog-project.org/2015/06/09/nlog-4-has-been-released.html)

使用`enableArchiveFileCompression`如下：

```
<target name="file" xsi:type="File"
      layout="${longdate} ${logger} ${message}" 
      fileName="${basedir}/logs/logfile.txt" 
      archiveFileName="${basedir}/archives/log.{#}.txt"
      archiveEvery="Day"
      archiveNumbering="Rolling"
      maxArchiveFiles="7"
    enableArchiveFileCompression="true" /> 
```

# ios - NSURLConnectionDelegate。如何取消身份验证质询？

> ID：10452403
> 
> 赞同：5
> 
> 时间：2012-05-04T16:09:08.977
> 
> 标签：ios, nsurlconnection, basic-authentication, nsurlconnectiondelegate

我成功地使用了相当棒`connection:didReceiveAuthenticationChallenge:`的 NSURLConnectionDelegate 委托方法。凉爽的。

我想正确支持让用户取消身份验证挑战。所以，我呈现给用户的 GUI 有一个取消按钮，问题是该按钮后面应该发生什么行为。

目前我这样做`[[challenge sender] cancelAuthenticationChallenge:challenge]`并且我已经实现了 NSURLConnectionDelegate 方法`connection:didCancelAuthenticationChallenge:`。在 Apple 文档中，我注意到这个回调的这个相当模棱两可的注释：

在 iOS 5.0 之前作为非正式协议的一部分提供。

嗯？实际触发的回调方法是`connection:didFailWithError:`

有人可以在这里阐明一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T21:02:13.783

> 在 iOS 5.0 之前作为非正式协议的一部分提供。

这只是意味着有问题的委托方法不是正式协议的一部分，即使用@protocol 指令声明的方法。非正式协议中的方法通常与调用它们的类一起记录。

> 实际触发的回调方法是 connection:didFailWithError:

`-connection:didCancelAuthenticationChallenge:`在 iOS 5.0 之前，两者`-connection:didFailWithError:`都有关于成为非正式协议一部分的相同说明。听起来您的连接无法加载数据，而不是被取消。如果您通过以下方式取消挑战，您可能会收到前一条消息：

```
[[challenge sender] cancelAuthenticationChallenge:challenge]; 
```

如[取消连接中所述](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW8)。

# c# - 仅在 facebook 画布中提供页面

> ID：10452407
> 
> 赞同：0
> 
> 时间：2012-05-04T16:09:23.750
> 
> 标签：c#, asp.net-mvc-3, facebook-c#-sdk, facebook-canvas

我正在开发一个 Facebook 应用程序。

仅在 IndexController 中，我使用 CanvasAuthorize 对 facebook 进行授权，并且由于重定向，我想避免其他所有页面都使用它。

这是发生的事情：我有 IndexController，它有一个 Index 操作，我用 [CanvasAuthorize] 装饰。然后将 facebook 用户与令牌一起存储在会话中。所以在其他页面中我不需要 Canvas 授权。

当我使用 Visual Studio 进行调试时，如果我访问索引以外的页面，它不会将我重定向到 facebook 应用程序。但它显示 localhost:port 。我该如何强制执行，任何试图查看任何页面的人都将被重定向到 facebook.com/appname。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:13:54.910

你的意思是如果他们没有登录 Facebook 或者他们想使用你的应用程序，你想将你的用户重定向到 IndexController 吗？

如果我理解正确，您的 indexController 就是在 Facebook 上对您的用户进行身份验证的人。其他页面在认证后即可访问。

您的 Facebook 应用程序是 iFrame 应用程序吗？如果是这样，那么您需要一个 Javascript 将您重定向到 indexController 或直接或 Apps.Facebook.con/YourApp。

```
 <script>
 if (top == self)
 {
      top.window.location = '//apps.facebook.com/yourApp';
 }
</script> 
```

# vb.net - Excel 从 ASP.net 页面下载

> ID：10452408
> 
> 赞同：2
> 
> 时间：2012-05-04T16:09:39.273
> 
> 标签：vb.net, excel, download

我对网络编程非常陌生。我正在尝试从 ASP.net 网站下载 excel。IT 不需要身份验证，但是我无法调试 URL，因为萤火虫不会像我一样请求 URL。高低搜索。对此的任何输入都会很棒。先感谢您。

网站：[http ://tebb.elpaso.com/ebbmasterpage/Capacity/OperAvailAutoTable.aspx?code=TGP&name=Operationally%20Available%20Capacity&status=Cap&sParam2=M&sParam3=5/4/2012&sParam8=S](http://tebb.elpaso.com/ebbmasterpage/Capacity/OperAvailAutoTable.aspx?code=TGP&name=Operationally%20Available%20Capacity&status=Cap&sParam2=M&sParam3=5/4/2012&sParam8=S)

行动：我点击“摘要下载”按钮下载excel。

我不知道 onClick() 去哪里了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:11:33.460

[http://tebb.elpaso.com/ebbmasterpage/Capacity/OperAvailAutoTable.aspx?code=TGP&name=Operationally+Available+Capacity&status=Cap&sParam2=M&sParam3=5%2f4%2f2012&sParam8=S](http://tebb.elpaso.com/ebbmasterpage/Capacity/OperAvailAutoTable.aspx?code=TGP&name=Operationally+Available+Capacity&status=Cap&sParam2=M&sParam3=5%2f4%2f2012&sParam8=S)

Param3 代表日期，%2f 是 html 编码的 /

这里的关键是发布数据。要下载 excel 文件，原始帖子数据是：

__ *EVENTTARGET=&* _EVENTARGUMENT=&ctl00_WebSplitter1_tmpl0_NavigationUserControl1_TreeView1_ExpandState=ennunnnnnnnnunnnnnunnnnnnnunnnnnnnnnnnnnnnnnnnnnnnnnnnnnunnnnnnnnnnnnnnnnnnnnnnnnnunnnnnnnnnnnnnnnnnnnnnnnnn&ctl00_WebSplitter1_tmpl0_NavigationUserControl1_TreeView1_SelectedNode=&_ *LASTFO*_VIEWSTATE=%2FwEPDwUIOTA0MDgxNzEPFgYeCmhpZGVDb2x1bW4y3QEAAQAAAP%2F%2F%2F%4P2NvZGU9VEdQJm5hbWU9T3BlcmF0aW9uYWxseSBBdmFpbGFibGUgQ2FwYWNpdHkmc3RhdHVzPUNhcCZzUGFyYW0yPU0mc1BhcmFtMz01LzQvMjAxMiZzUGFyYW04PVNkZAIBDw8WBB8IGwAAAAAAADlABwAAAB8GAoACZBYCZg8PFgIeBFRleHQFEFN1bW1hcnkgRG93bmxvYWQWBB4Hb25jbGljawUKc2hvd0ltZygpOx4Gb25CbHVyBQpoaWRlSW1nKCk7ZAICDw8WBB8IGwAAAAAAQFBABwAAAB8GAoACZGQCAw9kFgJmDw8WAh8HZ2RkAgQPZBYCZg8QDxYEHgtfIURhdGFCb3VuZGcfB2cWAh4Ib25jaGFuZ2UFDXNob3dJbWdEREwoKTsQFQQCMTUCMzACNTADQWxsFQQCMTUCMzACNTADQWxsFCsDBGdnZ2cWAWZkAgMPZBYCZg9kFgICAQ8UKwACDxYGHglJdGVtQ291bnQC%2F%2F%2F%2F%2Fw8eC18hSXRlbUNvdW50Ag8fB2dkPCsAHAQAFggeEnNlckFjdGl2ZVJvd1N0cmluZ2QeF1NvcnRpbmdBbGdvcml0aG1EZWZhdWx0CymjAUluZnJhZ2lzdGljcy5XZWJVSS5VbHRyYVdlYkdyaWQuU29ydGluZ0FsZ29yaXRobSwgSW5mcmFnaXN0aWNzMi5XZWJVSS5VbHRyYVdlYkdyaWQudjExLjEsIFZlcnNpb249MTEuMS4yMDExMS4xMDA2LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTdkZDVjMzE2M2YyY2QwY2IFHhNzZXJBY3RpdmVDZWxsU3RyaW5nZB4TQWxsb3dTb3J0aW5nRGVmYXVsdAspnwFJbmZyYWdpc3RpY3MuV2ViVUkuVWx0cmFXZWJHcmlkLkFsbG93U29ydGluZywgSW5mcmFnaXN0aWNzMi5XZWJVSS5VbHRyYVdlYkdyaWQudjExLjEsIFZlcnNpb249MTEuMS4yMDExMS4xMDA2LCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPTdkZDVjMzE2M2YyY2QwY2IBCBYCHgFCBRBvdmVyZmxvdzpoaWRkZW47ExQrAAMWCB4LQWxsb3dQYWdpbmdnHghQYWdlU2l6ZQIPHhBDdXJyZW50UGFnZUluZGV4AgEeCVBhZ2VDb3VudAJoZGQUFCsAAmQWATwrABQCABYKHg1CYXNlVGFibGVOYW1lBQZUYWJsZTEeD0NoaWxkQmFuZENvbHVtbmUeEEFkZEJ1dHRvbkNhcHRpb24FBlRhYmxlMR4UQWRkQnV0dG9uVG9vbFRpcFRleHRkHgNLZXkFBlRhYmxlMQ0UKwAEFhQoKVpTeXN0ZW0uVUludDY0LCBtc2NvcmxpYiwgVmVyc2lvbj00LjAuMC4wLCBDdWx0dXJlPW5ldXRyYWwsIFB1YmxpY0tleVRva2VuPWI3N2E1YzU2MTkzNGUwODkBMSgrBgEyKCsGATMoKwYBNCgrBgE1KCsGATYoKwYBNygrBgE4KCsGATkoKwYCMTAoKwYCMTEoKwYCMTIoKwYCMTMoKwYCMTQoKwYCMTUoKwYCMTYoKwYCMTcoKwYCMTgoKwYCMTkoKwYCMjAWFWQUKwAJFgYeDkJhc2VDb2x1bW5OYW1lBRJBdmFpbCBDYXAgRWZmIERhdGUfHgUSQXZhaWwgQ2FwIEVmZiBEYXRlHgdJc0JvdW5kZ2RkZGRkFCsABRYCHgdDYXB0aW9uBRJBdmFpbCBDYXAgRWZmIERhdGVkZBYCHgdPcmlnaW5YAgFkFCsABRYCHyEFFTE1NTMgcm93KHMpIHJldHJpZXZlZGRkFgIfIgIBZGQUKwAJFgYfHwUSQXZhaWwgQ2FwIEVmZiBUaW1lHx4FEkF2YWlsIENhcCBFZmYgVGltZR8gZ2RkZGRkFCsABRYCHyEFEkF2YWlsIENhcCBFZmYgVGltZWRkFgIfIgICZDwrAAUBAxYCHyICAmQUKwAJFgYfHwUSQXZhaWwgQ2FwIEVuZCBEYXRlHx4FEkF2YWlsIENhcCBFbmQgRGF0ZR8gZ2RkZGRkFCsABRYCHyEFEkF2YWlsIENhcCBFbmQgRGF0ZWRkFgIfIgIDZDwrAAUBAxYCHyICA2QUKwAJFgYfHwUSQXZhaWwgQ2FwIEVuZCBUaW1lHx4FEkF2YWlsIENhcCBFbmQgVGltZR8gZ2RkZGRkFCsABRYCHyEFEkF2YWlsIENhcCBFbmQgVGltZWRkFgIfIgIEZDwrAAUBAxYCHyICBGQUKwAJFggfHwUDTG9jHx4FA0xvYx8gZx8IGwAAAAAAAE5AAQAAAGQWAh4PSG9yaXpvbnRhbEFsaWduCyopU3lzdGVtLldlYi5VSS5XZWJDb250cm9scy5Ib3Jpem9udGFsQWxpZ24CZGRkFCsABRYCHyEFA0xvY2RkFgIfIgIFZDwrAAUBAxYCHyICBWQUKwAJFggfHwUITG9jIFByb3AfHgUITG9jIFByb3AfIGcfCBsAAAAAAABEQAEAAABkFgIfIwsrBwJkZGQUKwAFFgIfIQUITG9jIFByb3BkZBYCHyICBmQ8KwAFAQMWAh8iAgZkFCsACRYIHx8FCExvYyBOYW1lHx4FCExvYyBOYW1lHyBnHwgbAAAAAAAAaUABAAAAZBYCHyMLKwcBZGRkFCsABRYCHyEFCExvYyBOYW1lZGQWAh8iAgdkPCsABQEDFgIfIgIHZBQrAAkWCB8fBQxJVCBJbmRpY2F0b3IfHgUMSVQgSW5kaWNhdG9yHyBnHwgbAAAAAACAUUABAAAAZBYCHyMLKwcCZGRkFCsABRYCHyEFDElUIEluZGljYXRvcmRkFgIfIgIIZDwrAAUBAxYCHyICCGQUKwAJFgYfHwUHTG9jL1FUSR8eBQdMb2MvUVRJHyBnZGRkZGQUKwAFFgIfIQUHTG9jL1FUSWRkFgIfIgIJZDwrAAUBAxYCHyICCWQUKwAJFgYfHwUSTG9jIFB1cnAgRGVzY0lERU5UHx4FEkxvYyBQdXJwIERlc2NJREVOVB8gZ2RkZGRkFCsABRYCHyEFDUxvYyBQdXJwIERlc2NkZBYCHyICCmQ8KwAFAQMWAh8iAgpkFCsACRYIHghEYXRhVHlwZQUMU3lzdGVtLkludDMyHx8FCENhcCBUeXBlHx4FCENhcCBUeXBlHyBnZGRkZGQUKwAFFgIfIQUIQ2FwIFR5cGVkZBYCHyICC2Q8KwAFAQMWAh8iAgtkFCsACRYMHyQFDFN5c3RlbS5JbnQzMh8fBRVUb3RhbCBEZXNpZ24gQ2FwYWNpdHkfHgUVVG90YWwgRGVzaWduIENhcGFjaXR5HyBnHwgbAAAAAAAAWUABAAAAHgZGb3JtYXQFByMjIywjIyNkFgIfIwsrBwJkZGQUKwAFFgIfIQUVVG90YWwgRGVzaWduIENhcGFjaXR5ZGQWAh8iAgxkPCsABQEDFgIfIgIMZBQrAAkWDB8kBQxTeXN0ZW0uSW50MzIfHwUYRGFpbHkgU2NoZWR1bGVkIENhcGFjaXR5Hx4FGERhaWx5IFNjaGVkdWxlZCBDYXBhY2l0eR8gZx8IGwAAAAAAAFlAAQAAAB8lBQcjIyMsIyMjZBYCHyMLKwcCZGRkFCsABRYCHyEFGERhaWx5IFNjaGVkdWxlZCBDYXBhY2l0eWRkFgIfIgINZDwrAAUBAxYCHyICDWQUKwAJFggfJAUMU3lzdGVtLkludDMyHx8FElF1YW50aXR5IEF2YWlsYWJsZR8eBRJRdWFudGl0eSBBdmFpbGFibGUfIGdkZGRkZBQrAAUWAh8hBRJRdWFudGl0eSBBdmFpbGFibGVkZBYCHyICDmQ8KwAFAQMWAh8iAg5kFCsACRYIHx8FCk1lYXMgQmFzaXMfHgUKTWVhcyBCYXNpcx8gZx8IGwAAAAAAgFFAAQAAAGQWAh8jCysHAmRkZBQrAAUWAh8hBQpNZWFzIEJhc2lzZGQWAh8iAg9kPCsABQEDFgIfIgIPZBQrAAkWBh8fBQlQb3N0IERhdGUfHgUJUG9zdCBEYXRlHyBnZGRkZGQUKwAFFgIfIQUJUG9zdCBEYXRlZGQWAh8iAhBkPCsABQEDFgIfIgIQZBQrAAkWBh8fBQlQb3N0IFRpbWUfHgUJUG9zdCBUaW1lHyBnZGRkZGQUKwAFFgIfIQUJUG9zdCBUaW1lZGQWAh8iAhFkPCsABQEDFgIfIgIRZBQrAAkWCB8fBQNUU1AfHgUDVFNQHyBnHwgbAAAAAACAUUABAAAAZBYCHyMLKwcCZGRkFCsABRYCHyEFA1RTUGRkFgIfIgISZDwrAAUBAxYCHyICEmQUKwAJFgYfHwUIVFNQIE5hbWUfHgUIVFNQIE5hbWUfIGdkZGRkZBQrAAUWAh8hBQhUU1AgTmFtZWRkFgIfIgITZDwrAAUBAxYCHyICE2QUKwAJFggfHwUMQXV0b1RhYmxlVXJsHx4FDEF1dG9UYWJsZVVybB8gZx4GSGlkZGVuZ2RkZGRkFCsABRYCHyEFDEF1dG9UYWJsZVVybGRkFgIfIgIUZDwrAAUBAxYCHyICFGQWFWQUKwAFFgIfIQUSQXZhaWwgQ2FwIEVmZiBEYXRlZGQWAh8iAgFkFCsABRYCHyEFEkF2YWlsIENhcCBFZmYgVGltZWRkFgIfIgICZBQrAAUWAh8hBRJBdmFpbCBDYXAgRW5kIERhdGVkZBYCHyICA2QUKwAFFgIfIQUSQXZhaWwgQ2FwIEVuZCBUaW1lZGQWAh8iAgRkFCsABRYCHyEFA0xvY2RkFgIfIgIFZBQrAAUWAh8hBQhMb2MgUHJvcGRkFgIfIgIGZBQrAAUWAh8hBQhMb2MgTmFtZWRkFgIfIgIHZBQrAAUWAh8hBQxJVCBJbmRpY2F0b3JkZBYCHyICCGQUKwAFFgIfIQUHTG9jL1FUSWRkFgIfIgIJZBQrAAUWAh8hBQ1Mb2MgUHVycCBEZXNjZGQWAh8iAgpkFCsABRYCHyEFCENhcCBUeXBlZGQWAh8iAgtkFCsABRYCHyEFFVRvdGFsIERlc2lnbiBDYXBhY2l0eWRkFgIfIgIMZ%2FY29kZT1UR1AmbmFtZT1PcGVyYXRpb25hbGx5IEF2YWlsYWJsZSBDYXBhY2l0eSZzdGF0dXM9Q2FwJnNQYXJhbTE9VEdQJnNQYXJhbTI9RCZzUGFyYW0zPTA1LzA0LzIwMTIgMDk6MDAmc1BhcmFtND1QMDAwODAmc1BhcmFtNT0wMDE3NTYmc1BhcmFtNj1DQVJUSEFHRSBMSU5FIFRFUk1JTlVTJnNQYXJhbTc9TWF5ICA0IDIwMTIgIDk6NDZQTSZzUGFyYW04PUQmZGV0YWlscz1ZZGQCAQ9kFgICAQ8PFgIfJwX1AU9wZXJBdmFpbEF1dG9UYWJsZS5hc3B4P2NvZGU9VEdQJm5hbWU9T3BlcmF0aW9uYWxseSBBdmFpbGFibGUgQ2FwYWNpdHkmc3RhdHVzPUNhcCZzUGFyYW0xPVRHUCZzUGFyYW0yPUQmc1BhcmFtMz0wNS8wNC8yMDEyIDA5OjAwJnNQYXJhbTQ9UDAwMTg2JnNQYXJhbTU9MDAxNDc5JnNQYXJhbTY9Q1JBTlNUT04gTEFURVJBTCAtIEJFR0lOUyAyNjVBJnNQYXJhbTc9TWF5ICA0IDIwMTIgIDk6NDZQTSZzUGFyYW04PUQmZGV0YWlscz1ZZGQCAg9kFgICAQ8PFgIfJwXgAU9wZXJBdmFpbEF1dG9UYWJsZS5hc3B4P2NvZGU9VEdQJm5hbWU9T3BlcmF0aW9uYWxseSBBdmFpbGFibGUgQ2FwYWNpdHkmc3RhdHVzPUNhcCZzUGFyYW0xPVRHUCZzUGFyYW0yPUQmc1BhcmFtMz0wNS8wNC8yMDEyIDA5OjAwJnNQYXJhbTQ9UDAwMzQ5JnNQYXJhbTU9MDAxODM2JnNQYXJhbTY9SEMgWk9ORSA1JnNQYXJhbTc9TWF5ICA0IDIwMTIgIDk6NDZQTSZzUGFyYW04PUQmZGV0YWlscz1ZZGQCAw9kFgICAQ8PFgIfJwXnAU9wZXJBdmFpbEF1dG9UYWJsZS5hc3B4P2NvZGU9VEdQJm5hbWU9T3BlcmF0aW9uYWxseSBBdmFpbGFibGUgQ2FwYWNpdHkmc3RhdHVzPUNhcCZzUGFyYW0xPVRHUCZzUGFyYW0yPUQmc1BhcmFtMz0wNS8wNC8yMDEyIDA5OjAwJnNQYXJhbTQ9UDAwMzU5JnNQYXJhbTU9MDAwMzM4JnNQYXJhbTY9TUxWIDI2MCAoRC9TIFNNKSZzUGFyYW03PU1heSAgNCAyMDEyICA5OjQ2UE0mc1BhcmFtOD1EJmRldGFpbHM9WWRkAgQPZBYCAgEPDxYCHycF7AFPcGVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDAyOCZzUGFyYW01PTAwMTQ4MCZzUGFyYW02PU1MViAyNjZBIChQQVdUVUNLRVRUKSZzUGFyYW03PU1heSAgNCAyMDEyICA5OjQ2UE0mc1BhcmFtOD1EJmRldGFpbHM9WWRkAgUPZBYCAgEPDxYCHycF5wFPcGVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDMyMSZzUGFyYW01PTAwMDI4NiZzUGFyYW02PU1MViAzMTQgKEQvUyBNUykmc1BhcmFtNz1NYXkgIDQgMjAxMiAgOTo0NlBNJnNQYXJhbTg9RCZkZXRhaWxzPVlkZAIGD2QWAgIBDw8WAh8nBecBT3BlckF2YWlsQXV0b1RhYmxlLmFzcHg%GVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDI5MiZzUGFyYW01PTAwMDA2MyZzUGFyYW02PU1MViA0OCZzUGFyYW03PU1heSAgNCAyMDEyICA5OjQ2UE0mc1BhcmFtOD1EJmRldGFpbHM9WWRkAgkPZBYCAgEPDxYCHycF%2BQFPcGVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDEwOCZzUGFyYW01PTAwMTc3NyZzUGFyYW02PU1MViA1MjkgLyBZc2Nsb3NrZXkgUGxhbnQgKFUvUyBTTSkmc1BhcmFtNz1NYXkgIDQgMjAxMiAgOTo0NlBNJnNQYXJhbTg9RCZkZXRhaWxzPVlkZAIKD2QWAgIBDw8WAh8nBfcBT3BlckF2YWlsQXV0b1RhYmxlLmFzcHg%2FY29kZT1UR1AmbmFtZT1PcGVyYXRpb25hbGx5IEF2YWlsYWJsZSBDYXBhY2l0eSZzdGF0dXM9Q2FwJnNQYXJhbTE9VEdQJnNQYXJhbTI9RCZzUGFyYW0zPTA1LzA0LzIwMTIgMDk6MDAmc1BhcmFtND1QMDAxNjUmc1BhcmFtNT0wMDE0Nzgmc1BhcmFtNj1OLiBIQU1QVE9OIExBVEVSQUwgLSBCRUdJTlMgMjYwQSZzUGFyYW03PU1heSAgNCAyMDEyICA5OjQ2UE0mc1BhcmFtOD1EJmRldGFpbHM9WWRkAgsPZBYCAgEPDxYCHycF4wFPcGVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDA4OCZzUGFyYW01PTAwMTc1OCZzUGFyYW02PU5JQUdBUkEgU1BVUiZzUGFyYW03PU1heSAgNCAyMDEyICA5OjQ2UE0mc1BhcmFtOD1EJmRldGFpbHM9WWRkAgwPZBYCAgEPDxYCHycF8gFPcGVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDI5NyZzUGFyYW01PTAwMTgzMSZzUGFyYW02PU5JQUdBUkEgU1BVUiBCQUNLSEFVTCBQT0lOVCZzUGFyYW03PU1heSAgNCAyMDEyICA5OjQ2UE0mc1BhcmFtOD1EJmRldGFpbHM9WWRkAg0PZBYCAgEPDxYCHycF5wFPcGVyQXZhaWxBdXRvVGFibGUuYXNweD9jb2RlPVRHUCZuYW1lPU9wZXJhdGlvbmFsbHkgQXZhaWxhYmxlIENhcGFjaXR5JnN0YXR1cz1DYXAmc1BhcmFtMT1UR1Amc1BhcmFtMj1EJnNQYXJhbTM9MDUvMDQvMjAxMiAwOTowMCZzUGFyYW00PVAwMDA4MSZzUGFyYW01PTAwMTc1OSZzUGFyYW02PVNUQSAwMDEgKFUvUyBNUykmc1BhcmFtNz1NYXkgIDQgMjAxMiAgOTo0NlBNJnNQYXJhbTg9RCZkZXRhaWxzPVlkZAIOD2QWAgIBDw8WAh8nBecBT3BlckF2YWlsQXV0b1RhYmxlLmFzcHg%2FY29kZT1UR1AmbmFtZT1PcGVyYXRpb25hbGx5IEF2YWlsYWJsZSBDYXBhY2l0eSZzdGF0dXM9Q2FwJnNQYXJhbTE9VEdQJnNQYXJhbTI9RCZzUGFyYW0zPTA1LzA0LzIwMTIgMDk6MDAmc1BhcmFtND1QMDAwNTMmc1BhcmFtNT0wMDE3NDcmc1BhcmFtNj1TVEEgMDE3IChVL1MgU00pJnNQYXJhbTc9TWF5ICA0IDIwMTIgIDk6NDZQTSZzUGFyYW04PUQmZGV0YWlscz1ZZGQCAg8UKwACZDwrABwBABYEHxNkHxFkZAIDDxYCHgJkTgUiT3BlcmF0aW9uYWxseUF2YWlsYWJsZUNhcGFjaXR5LlhMU2QCBA8UKwACFgIeDERvd25sb2FkTmFtZQUeT3BlcmF0aW9uYWxseUF2YWlsYWJsZUNhcGFjaXR5ZGQCCQ8WAh4FVmFsdWUFgwFNYXN0ZXJTdHlsZVNoZWV0LmNzc3wuLi9pZ19yZXMvRWxlY3RyaWNCbHVlL2lnX3NwbGl0dGVyLmNzc3wuLi9pZ19yZXMvRWxlY3RyaWNCbHVlL2lnX3NoYXJlZC5jc3N8Li4vaWdfcmVzL0VsZWN0cmljQmx1ZS9pZ19ncmlkLmNzc2QYAQUeX19Db250cm9sc1JlcXVpcmVQb3N0QmFja0tleV9fFgMFEmN0bDAwJFdlYlNwbGl0dGVyMQU5Y3RsMDAkV2ViU3BsaXR0ZXIxJHRtcGwwJE5hdmlnYXRpb25Vc2VyQ29udHJvbDEkVHJlZVZpZXcxBTpjdGwwMCRXZWJTcGxpdHRlcjEkdG1wbDEkQ29udGVudFBsYWNlSG9sZGVyMSRVbHRyYVdlYkdyaWQxChBz9pI6%2BnL7w6b%2B8VpMMVQUpjRuWt1dkDI5QOKOHqk%3D&__PREVIOUSPAGE=__上一页=__上一页=*q1Vu5vuap4CxPC3AZarvFeTSUmpu1Y5Qe6RAgsXMl*-9eN-hzR45dQjqjC-HEjZ0&__EVENTVALIDATION=%2FwEWDwKF0M%2FIBQKWk6OhBAKx%2FMC2DgLM5d7LCALhg%2FaUDwKHxPzXAQKkobflCwKtsbmoAQLQ5oWgCgL73d1IAvSyi6UMAvayt6UMAvCyt6UMAoaSk6MKAqDJoG0zZk9itnjKzHvp455sJC0LF3pnU%2F9GwKhhL5KKketXYQ%3D%3D&ctl00_WebSplitter1_clientState=%7C0%7C216%2C2%2C1058%2C2%2C%7C%7C%5B%5B%5B%5Bnull%2Cnull%5D %5D%2C%5B%5D%2C%5B%7B%220%22%3A%5B%5Bnull%2Cnull%2Cnull%2Cnull%2Cnull%2Cnull%2C2%2Cnull%2Cnull%2Cnull%2C%2217%25%22 %5D%5D%2C%221%22%3A%5B%5Bnull%2Cnull%2Cnull%2Cnull%2Cnull%2Cnull%2Cnull%2Cnull%2Cnull%2Cnull%2C%2283%25%22%5D%5D%7D%5D %5D%2C%5B%7B%7D%2C%5B%7B%222%22%3A%5B%221%22%2C10%2C%221058px%22%5D%2C%223%22%3A%5B%220 %22%2C10%2C%22216px%22%5D%7D%5D%5D%2Cnull%5D&ctl00%24WebSplitter1%24tmpl1%24ContentPlaceHolder1%24sumBtnDownload=摘要+下载&ctl00%24WebSplitter1%24tmpl1%24ContentPlaceDLer1%24SumDownloadDctl00%24WebSplitter1%24tmpl1%24ContentPlaceHolder1%24PageSizeDDL=15&ctl00xWebSplitter1xtmpl1xContentPlaceHolder1xUltraWebGrid1=%253CDisplayLayout%253E%253CStateChanges%253E%253C%2FStateChanges%253E%253C%2FDisplayLayout%253E&ctl00%24_IG_CSS_LINKS_=MasterStyleSheet.css%7C..%2Fig_res%2FElectricBlue%2Fig_splitter.css %7C..%2Fig_res%2FElectricBlue%2Fig_shared.css%7C..%2Fig_res%2FElectricBlue%2Fig_grid.css

这是使用 HTTP Analyzer v6 发现的。我制作了一个 VB6 测试程序，我成功下载了 5/4/2012、5/3/2012 和 5/2/2012，只需更改 URL 中的 Param3，它使用 cURL，但您应该可以将其用作如何提交 http 请求以接收 excel 文件作为 http 响应的示例。LoadResString(101) 将上述发布数据加载到 CURLOPT_POSTFIELDS 中。等效地，可以将 LoadResString 替换为上述帖子数据的字符串文字。

```
Private Sub XPButton1_Click()
Dim CurlContext As Long
Dim buf As New StringBuffer

CurlContext = vbcurl_easy_init()

vbcurl_easy_setopt CurlContext, CURLOPT_URL, "http://tebb.elpaso.com/ebbmasterpage/Capacity/OperAvailAutoTable.aspx?code=TGP&name=Operationally+Available+Capacity&status=Cap&sParam2=M&sParam3=5%2f3%2f2012&sParam8=S"
vbcurl_easy_setopt CurlContext, CURLOPT_COOKIEJAR, App.Path & "\cookie.txt"
vbcurl_easy_setopt CurlContext, CURLOPT_COOKIEFILE, App.Path & "\cookie.txt"
vbcurl_easy_setopt CurlContext, CURLOPT_FOLLOWLOCATION, 1

vbcurl_easy_setopt CurlContext, CURLOPT_POST, 1
vbcurl_easy_setopt CurlContext, CURLOPT_POSTFIELDS, LoadResString(101)

vbcurl_easy_setopt CurlContext, CURLOPT_PROXYAUTH, CURLAUTH_ANY 'the next 5 lines are only needed to accommodate connecting through a proxy server
vbcurl_easy_setopt CurlContext, CURLOPT_HTTPPROXYTUNNEL, 0 
vbcurl_easy_setopt CurlContext, CURLOPT_PROXY, "your.proxy.if.any.com"
vbcurl_easy_setopt CurlContext, CURLOPT_PROXYPORT, 80 'or your proxy port
vbcurl_easy_setopt CurlContext, CURLOPT_PROXYUSERPWD, "" 
vbcurl_easy_setopt CurlContext, CURLOPT_WRITEDATA, ObjPtr(buf)
vbcurl_easy_setopt CurlContext, CURLOPT_WRITEFUNCTION, _
    AddressOf WriteFunction
vbcurl_easy_setopt CurlContext, CURLOPT_DEBUGFUNCTION, _
    AddressOf DebugFunction
vbcurl_easy_setopt CurlContext, CURLOPT_VERBOSE, True

ret = vbcurl_easy_perform(CurlContext)

Open App.Path & "\test.xls" For Output As #1
Print #1, buf.stringData
Close #1

End Sub 
```

这是下载数据的直接方式，使用 Siddharth Rout 的路由可以适应网站的代码更改。关于“复杂部分”的最后一点。您需要做的就是使用 FindWindow 等待“文件下载”框出现，一旦您知道它已启动，您可以使用`keybd_event`发送 3 个选项卡和一个回车键，稍等片刻，再次按回车键和“y”如果您要覆盖文件。现在，直接下载的优点是您可以准确选择保存位置和方式。

如果您想了解更多关于我的方法的细节，我很乐意将代码发布到 StringBuffer、WriteFunction 和 DebugFunction 并解释如何从 vb 引用 libcurl。

更新，每个请求的附加代码： [StringBuffer.cls](http://dl.dropbox.com/u/72374458/StringBuffer.cls)

```
Private byteData() As Byte
Private stringLength As Long
Private arrayLength As Long

Private Sub Class_Initialize()

ReDim byteData(1024)
arrayLength = 1024
stringLength = 0

End Sub

Public Sub Class_Terminate()

Erase byteData

End Sub

Public Property Get stringData() As String

stringData = String(stringLength, " ")
CopyMemory ByVal stringData, byteData(0), stringLength

End Property

Public Property Let stringData(newStringdata As String)

Dim newStringLength As Long

newStringLength = Len(newStringdata)

If newStringLength > arrayLength Then
    arrayLength = (arrayLength + (newStringLength - newStringLength Mod 2)) * 2
    ReDim Preserve byteData(arrayLength)
End If

CopyMemory byteData(0), ByVal newStringdata, newStringLength

stringLength = newStringLength

End Property

Public Function quickConcat(newStringdata As String)

Dim newStringLength As Long

newStringLength = Len(newStringdata) + stringLength

If newStringLength > arrayLength Then
    arrayLength = (arrayLength + (newStringLength - newStringLength Mod 2)) * 2
    ReDim Preserve byteData(arrayLength)
End If

Dim amountToAdd
amountToAdd = newStringLength - stringLength

CopyMemory byteData(stringLength), ByVal newStringdata, amountToAdd

stringLength = newStringLength

End Function 
```

[写功能：](http://dl.dropbox.com/u/72374458/WriteDebug.bas)

```
Public Function WriteFunction(ByVal rawBytes As Long, _
    ByVal sz As Long, ByVal nmemb As Long, _
    ByVal extra As Long) As Long

    Dim totalBytes As Long, i As Long
    Dim obj As Object, buf As StringBuffer
    Dim tempStr As String
    Dim Buffer() As Byte

    totalBytes = sz * nmemb

    Set obj = AsObject(extra)
    Set buf = obj
    ' append the binary characters to the HTML string
    If Not ((rawBytes = 0) Or (totalBytes = 0)) Then

        ReDim Buffer(0 To (totalBytes - 1)) As Byte
        CopyMemory Buffer(0), ByVal rawBytes, totalBytes

        tempStr = String(totalBytes, " ")
        CopyMemory ByVal tempStr, Buffer(0), totalBytes

        buf.quickConcat (tempStr)

    End If
    ' Need this line below since AsObject gets a stolen reference
    ObjectPtr(obj) = 0&

    ' Return value
    WriteFunction = totalBytes
End Function 
```

[调试功能：](http://dl.dropbox.com/u/72374458/WriteDebug.bas)

```
Public Function DebugFunction(ByVal info As curl_infotype, _
    ByVal rawBytes As Long, ByVal numBytes As Long, _
    ByVal extra As Long) As Long
    Dim debugMsg As String
    Dim i As Long
    debugMsg = ""
    For i = 0 To numBytes - 1
        debugMsg = debugMsg & Chr(MemByte(rawBytes + i))
    Next
    Debug.Print "info=" & info & ", debugMsg=" & debugMsg
    DebugFunction = 0

    DoEvents

End Function 
```

以下是在 vb6 中使用 curl 所需的 dll 和类型库： [libcurl bindings for vb6](http://dl.dropbox.com/u/72374458/vbcurl.zip)

将上述文件解压到项目目录并转到项目->引用并添加两个 tlb 文件（类型库）。

此外，这里是 vb libcurl 绑定的 sourceforge 页面，下载包括源代码和几个示例：http: [//sourceforge.net/projects/libcurl-vb/](http://sourceforge.net/projects/libcurl-vb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:34:02.960

你正在尝试的有点复杂。不是第一部分，而是第二部分。

**逻辑**

**第 1 部分**）单击“摘要下载”按钮以启动“文件下载”对话框

**PART 2** ) 点击“文件下载”中的保存按钮，最终保存文件

* * *

**第1部分**

在表单上放置一个 WebBrowser1 控件和一个按钮。粘贴此代码。

```
Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    WebBrowser1.Navigate("http://tebb.elpaso.com/ebbmasterpage/Capacity/OperAvailAutoTable.aspx?code=TGP&name=Operationally%20Available%20Capacity&status=Cap&sParam2=M&sParam3=5/4/2012&sParam8=S")
End Sub

Private Sub WebBrowser1_DocumentCompleted(sender As Object, e As  _
System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted

    If WebBrowser1.ReadyState <> 4 Then Exit Sub

    Dim el As HtmlElement = _
    WebBrowser1.Document.GetElementById("ctl00_WebSplitter1_tmpl1_ContentPlaceHolder1_sumBtnDownload")

    el.InvokeMember("Click")
End Sub 
```

现在，当您运行此代码时，它将单击“摘要下载”按钮并启动“文件下载”对话框。请参阅下面的快照。

* * *

**第 2 部分 - 复杂部分**

现在您需要使用 API 来单击对话框上的`Save`按钮。`File Download`幸运的是，我已经在我的博客中介绍了这一点，所以你不会有任何问题 :)

**主题：VBA/VB.Net/VB6——在IE下载窗口点击打开/保存/取消按钮——第一部分**

**链接**：[http ://www.siddharthout.com/2011/10/23/vbavb-netvb6click-opensavecancel-button-on-ie-download-window/](http://www.siddharthrout.com/2011/10/23/vbavb-netvb6click-opensavecancel-button-on-ie-download-window/)

**快照**

![在此处输入图像描述](../Images/081aa2936fffa6d51631e1e866e74b7c.png)

高温高压

# javascript - CSS放置元素而不会使用javascript动态地相互影响

> ID：10452410
> 
> 赞同：1
> 
> 时间：2012-05-04T16:09:49.210
> 
> 标签：javascript, css, scroll, position

我试图创建一个图像映射工具作为我项目的一部分 [http://jsfiddle.net/MBThE/12/](http://jsfiddle.net/MBThE/12/)

全屏结果：http: [//jsfiddle.net/MBThE/12/embedded/result/](http://jsfiddle.net/MBThE/12/embedded/result/)

我尝试将链接放置为 div 并使用 css 定位。但问题是添加或删除新热点会导致重新定位其他元素。我找到了解决 `position:fixed`热点 div 的解决方案。但这使得即使用户向下或向上滚动，热点仍会保留在那里......那么有没有办法使用javascript找到向上或向下滚动的像素数并在滚动发生时触发事件，这样我就可以增加或减少div的位置根据滚动？

我认为另一种选择是 HTML5 画布......但这会导致不需要的图像大小调整......那么有没有办法让 div 不会相互影响，但也可以将它们放在容器 div 中？

注意：- 单击“添加热点”按钮并单击图像以添加热点..悬停热点以编辑热点

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:14:39.663

是的，position:absolute 将绝对基于最近的父级定位，即 position:absolute 或 position:relative。因此，您可以使用以下内容创建父级，然后在其中定位。

```
<div style="position:relative" id="parentDiv">
     <div style="position:absolute; top:15px; left:15px">I am 15 pixels from the top and left side of my parent div </div>
     <div style="position:absolute; top:30px; left:30px">I am 30 pixels from the top and left side of my parent div </div>
</div> 
```

希望有帮助

# sql - 堆叠两个具有不同列名的 sql 表 (2008)

> ID：10452412
> 
> 赞同：2
> 
> 时间：2012-05-04T16:09:54.530
> 
> 标签：sql, sql-server, union

我检查了这个站点的代码来堆叠两个表（将一个表的结果放在另一个表的结果下方），其中列名不同。我知道当名称相同时 UNION ALL 有效。我知道当一个表比另一个表具有更多信息时，分配一个表中缺少的列名的 UNION ALL 有效。但是如果列怎么办名字不一样？就像如果在一个表中的列名是 CHP 而在另一个表中是“儿童健康加”，我需要将这两列堆叠在一起怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:21:25.260

只要列的数据类型相同，就可以使用 UNION。列名是否不同并不重要。

```
SELECT column1
FROM Table1
UNION
SELECT column1
FROM Table2 
```

如果您想知道记录来自哪个表，则可以添加另一个字段来区分行：

```
SELECT column1, 'Table1' as TableName
FROM Table1
UNION
SELECT column1, 'Table2' as TableName
FROM Table2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:17:47.537

什么sql语言？mysql/sql 服务器？

mysql 不要求列名相同，但您始终可以使用“AS”来匹配列名，例如。

```
select column1 AS col1, column2 AS col2... 
```

编辑：我刚刚在帖子标题中发现了“2008” - 那是 sql server 2008 吗？无论如何，sql server 似乎并不关心。列名。

# directshow - GDCL Mpeg-4 多路复用器 - 过滤器无法就连接达成一致

> ID：10452413
> 
> 赞同：0
> 
> 时间：2012-05-04T16:09:59.960
> 
> 标签：directshow, mp4

我正在尝试使用 GDCL Mpeg-4 Multiplexor 发布一些 mp4 文件，但它不接受来自我的相机（QuickCam Orbit/Sphere AF）的输入。

我看到它已将子类型设置为 MEDIASUBTYPE_NULL。我似乎无法找出一组过滤器来适应成功链接引脚。我需要做什么才能成功地从 Capture 引脚适应多路复用器？

![在此处输入图像描述](../Images/97853cb06725bbd2f275297aec1c89d4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:04:19.550

[GDCL Mpeg-4 多路复用](http://www.gdcl.co.uk/mpeg4/)器多路复用压缩数据，您的相机捕获原始（未压缩）视频。您需要在两者之间插入一个压缩器，以便将 MPEG-4 兼容的视频传送到多路复用器中。也就是说，MPEG-4 Part 2 或 MPEG-4 Part 10 AKA H.264 视频压缩器。多路复用器滤波器本身不进行数据压缩/编码。

# ios - ios sqlite 行与？没读

> ID：10452414
> 
> 赞同：0
> 
> 时间：2012-05-04T16:10:02.557
> 
> 标签：ios, sqlite

我已经建立了我的 sqlite 数据库，并在应用程序启动时复制。之后我当然会运行查询（只是选择语句）。到目前为止，除了一个查询之外的所有查询都有效。经过一番调查，似乎带有空格的 charNames 是如何得到“？”的。在空格所在的位置添加。所以我有“Hello?World”而不是“Hello world”。无论出于何种原因，这似乎使我的字符串等于null。

```
NSString *querySQL = [NSString stringWithFormat: @"select moveName, moveCommand, moveStance, moveHits, moveType, moveDmg, moveHitRange, moveEscape, moveProperties from Moves where charName='%@' and moveCatagory = '%@';",charName, catName];

        NSLog(@"move SQL query: %@",querySQL);

        const char *query_stmt = [querySQL UTF8String];

        if (sqlite3_prepare_v2(myDB, query_stmt, -1, &statement, NULL) == SQLITE_OK)
        {
            while (sqlite3_step(statement) == SQLITE_ROW)
            {
                const char* moveName = (const char*)sqlite3_column_text(statement, 0);
                const char* moveCommand = (const char*)sqlite3_column_text(statement, 1);
                const char* moveStance = (const char*)sqlite3_column_text(statement, 2);
                const char* moveHits = (const char*)sqlite3_column_text(statement, 3);
                const char* moveType = (const char*)sqlite3_column_text(statement, 4);
                const char* moveDmg = (const char*)sqlite3_column_text(statement, 5);
                const char* moveHitRange = (const char*)sqlite3_column_text(statement, 6);
                const char* moveEscape = (const char*)sqlite3_column_text(statement, 7);
                const char* moveProperties = (const char*)sqlite3_column_text(statement, 8);

                Move * move = [[Move alloc]init];

                if (moveName != nil) {  
                    move.moveName = [[NSString alloc] initWithUTF8String:moveName]; 
                    NSLog(@"moveName %@",move.moveName);
                } 
```

**等...为每个查询的字段复制**

这将适用于除了 moveName 之外的所有查询字段。这些移动行中的每一个都有一个标题字段（通常没有空格），并且该标题每次都出现，但其余行有空格并且那些作为空值出现。

控制台输出：

> 2012-05-04 10:35:11.886 我的 Movelist [2938:f803] moveName Jab
> 
> 2012-05-04 10:35:11.891 我的 Movelist [2938:f803] moveName (null)
> 
> 2012-05-04 10:35:11.895 我的 Movelist [2938:f803] moveName (null)

终端 sqlite3 的输出：

> 刺|1||||8|h||
> 
> 前锋？Jab|f+1||||8|h||
> 
> 向下？Jab|d/b+1|RC|||6|s||

仅供参考：为简单起见，我省略了其他字段，因为它们似乎工作正常。就像我说的，我认为这与似乎只在名称字段中的空格有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:22:21.173

您正在查看不良数据。**?** _ 实际上是 � 或 ï¿½**您**应该能够通过 REPLACE 函数在您的 SQL 中将其替换为您想要的正常空间。`null`可能是字符不兼容 UTF8 的结果。

请参阅此[链接](http://drupal.org/node/81335)或此[帖子](https://stackoverflow.com/questions/1488866/how-to-replace-i-in-a-string)以获取更多信息。

# java - 关于 Java 子接口子类型

> ID：10452421
> 
> 赞同：6
> 
> 时间：2012-05-04T16:10:16.653
> 
> 标签：java, interface

这似乎是一个基本的java问题。

我有一个接口，`Pipeline`它有一个方法`execute(Stage)`。

然后我创建一个子接口来扩展`Pipeline`，比如说`BookPipeline`，我喜欢这个方法`execute(BookStage)`。

`BookStage`从 延伸`Stage`。

似乎这种定义无法通过 java compile。

对此有什么建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T16:12:26.593

您可能需要考虑使用泛型。

```
public interface Pipeline<T extends Stage> {
     public void execute(T stage);
}

public interface BookPipeline extends Pipeline<BookStage> {
     @Override
     public void execute(BookStage stage);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:16:05.873

除了@Jeffrey 写的可能的解决方案之外，了解您为什么不能这样做也很重要。

假设您有一个`Pipeline`带有方法的接口`execute(Stage)`，以及一个`BookPipeline`带有`execute(BookStage)`.

还假设您有一些`Conc`实现`BookPipeline`.

考虑以下

```
Pipeline p = new Conc();
p.execute(new Stage()); 
```

会发生什么？会很不安全！
Java 想要避免它，从而从一开始就防止这种情况。

规则是**扩展类/接口可以添加行为，但不能减少行为**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-06T15:38:53.290

只是为了详细说明@amit 的答案，代码片段是不安全的，因为该`Conc.execute`方法将 a`BookStage`作为参数，这将试图挤压 a`Stage`来代替它（当然，并非所有`Stage`s 都是`BookStage`s）。

但是，想象一下我们想走另一条路，即将参数类型设为`BookePipeline.execute`的*超*类型`Stage`，例如`Object`.

因此，为了澄清，我们将：

```
interface Pipeline
{
  void execute(Stage s);
}

interface BookPipeline extends Pipeline
{
  @Override
  void execute(Object s);
} 
```

在哪里`Conc`实现`BookPipeline`：

```
Pipeline p = new Conc();
p.execute(new Stage()); 
```

从理论上讲，这将是安全的，因为没有违反 Liskov 可替换性 - 我们可以安全地将 a 传递给`Stage`任何采用`Stage`参数或更大参数的实现。这称为*逆变*。Java 不支持*逆变*参数类型，但是有些[语言](http://en.wikipedia.org/wiki/Sather)支持。

您最初的问题与*协变*参数类型有关，由于指定的原因，这是不安全的（但奇怪的是，一种名为[Eiffel](http://en.wikipedia.org/wiki/Eiffel_(programming_language))的语言允许这样做）。

然而，Java 确实支持协变*返回*类型。想象`Pipeline`有一个

```
Stage getAStage(); 
```

`BookPipeline`像这样覆盖这个方法是完全合法的 ：

```
@Override
BookStage getAStage(); 
```

然后想象我们有：

```
public void someMethodSomewhere(Pipeline p)
{
  Stage s = p.getAStage();
  //do some dance on Stage
} 
```

假设我们有一些完全按照定义的类`Donc`实现`Pipeline`和覆盖（所以仍然返回），这两个调用都可以：`getAStage()``Pipeline``Stage`

```
someMethodSomewhere(new Conc());
someMethodSomewhere(new Donc()); 
```

因为我们总是可以将 a`Stage`或任何更少（例如`BookStage`）放入类型为 的变量中`Stage`。

因此，将规则改写为专门与方法覆盖相关**，覆盖方法的扩展类/接口只能使这些方法在它们接受的内容上*更通用，在返回的内容上**更具体*。**（尽管在 Java 的情况下，只允许更具体的返回类型。）

请记住，PECS - Producer Extends，Consumer Super（Joshua Bloch，Effective Java）

# c# - Visual Studio 不断创建已定义的事件处理程序

> ID：10452423
> 
> 赞同：2
> 
> 时间：2012-05-04T16:10:25.873
> 
> 标签：c#, winforms, visual-studio

我有一个在多个部分类文件中定义的 Windows 窗体。在其中一个文件 (xxx.Query.cs) 中，我为 DataGridView 定义了所有事件处理程序。但是，有时，Visual Studio 决定要在表单 (xxx.cs) 的主文件中为其中四个事件处理程序创建存根。我最终得到了四个错误，这些错误说明了“类型'xxx'已经定义了一个名为'dataGridView1_ColumnHeaderMouseClick'的成员具有相同的参数类型”。

如何让 Visual Studio 退出尝试为这些创建存根？是最让人头疼的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-09-22T05:15:43.020

我今天在将大型（旧版）表单拆分为部分类同时添加新部分后遇到了这个问题。尽管这是一个老问题，但我发布的许多原始问题的答案都是不正确的。具体来说，他们中的许多人声称 Visual Studio 无法在不双击的情况下生成这些。我想确认 VS在某些情况下*确实这样做了。*

在我的特殊情况下，我向选项卡控件添加了一个新选项卡，并将新选项卡事件和代码放在新类中。最初，我将这段代码（包括事件）放在主窗体的末尾，这*可能*与问题有关。移动代码后，如果我将控件添加到主窗体的任何部分（例如，单独的选项卡），VS 会为我在新部分类中的 3 个事件生成空事件处理程序，尽管在此有完整的事件处理程序班级。

我现在唯一的解决方案是在出现问题时从我的主表单代码底部删除空处理程序。解决方案清理不会删除这些空白处理程序。

由于所有 3 个每次都一致生成，并且由于它们位于一个选项卡上，当我添加测试控件时它们隐藏在主窗体后面（所以没有机会双击，当然没有机会双击所有 3 个），我可以说相信这*是*一个 Visual Studio 错误（在我的例子中是 VS 2013）。

24/9/15 更新：在厌倦了删除处理程序后，我进行了更多搜索，并找到了解决该问题的方法。这是来自 MS 论坛的 Mustiy 解决方案的文本（[https://social.msdn.microsoft.com/Forums/windows/en-US/79910eaa-84e7-472d-95ee-4b8ddfbf99f0/multiple-partial-class-files-cause -problems-with-forms-designer?forum=winforms&prof=required](https://social.msdn.microsoft.com/Forums/windows/en-US/79910eaa-84e7-472d-95ee-4b8ddfbf99f0/multiple-partial-class-files-cause-problems-with-forms-designer?forum=winforms&prof=required)）。这个修复对我有用，虽然单击创建事件仍然会在错误的类中创建它们，但是在移动它们之后，它们可以正常工作。它还可以防止创建无效的事件处理程序。

```
i had same problem and came accross your post, but i wasn't sattisfied. It had to be a solution for this because VS IDE does it.
Here is the solution :
Open the .csproj project file with notepad and let's say for a Form1.cs file you will see a configuration like
<Compile Include="Form1.cs">
  <SubType>Form</SubType>
</Compile>
<Compile Include="Form1.Designer.cs">
  <DependentUpon>Form1.cs</DependentUpon>
</Compile>
If you create a new file called Form1Events.cs and put another partial class of Form1 and move the events to the new partial class. In the new .csproj file you the new file like this below
<Compile Include="Form1Events.cs">
  <SubType>Form</SubType>
</Compile>
Something is missing you have to tell the VS IDE that this Form1Events.cs file is dependent to Form1.cs. As the IDE do this for Form1.Designer.cs file make the same with Form1Events.cs and put a "DependentUpon" tag into Form1Events.cs. Last the .csproj file look like this below
<Compile Include="Form1.cs">
  <SubType>Form</SubType>
</Compile>
<Compile Include="Form1.Designer.cs">
  <DependentUpon>Form1.cs</DependentUpon>
</Compile>
<Compile Include="Form1Events.cs">
  <DependentUpon>Form1.cs</DependentUpon>
  <SubType>Form</SubType>
</Compile>
And if you save the .csproj file the IDE reloads the project and on the Solution exlorer tree you see that the new partial class is put below Form1.cs file. And if you open the designer and double click a previous decalred and moved event it will navigate to the new file. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:27:18.603

在评论中，您声称：“如果我双击一个已经定义了事件处理程序的控件，它将带我到该事件处理程序，而不是创建一个新的。”

如果您手动挂钩事件，则情况并非如此。

```
public Form1() {
    InitializeComponent();
    myButton.Click += new EventHandler(myButton_Click);
}

void myButton_Click(...) { } 
```

如果您转到设计器并双击控件或在属性网格中分配事件（您会注意到它未在属性网格中标识），Visual Studio 将在 InitializeComponent() 和主窗体代码文件：

```
void myButton_Click1(...) { } 
```

如果您不以某种方式参与设计器，Visual Studio 将永远不会自动创建控件事件处理程序。不幸的是，很容易让 VS Designer 认为你双击了 - 最容易在第一次加载表单时的长时间停顿期间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-07T18:01:05.720

显然，需要做的是清洁溶液。显然，这抹去了所有在幕后完成的序列化。（我不是 Visual Studio 如何进行序列化的专家，所以我的术语可能有误。）

[Visual Studio (2008)“干净的解决方案”选项](https://stackoverflow.com/questions/221803/visual-studio-2008-clean-solution-option)

看，我妈妈不养假人。

# amazon-web-services - Amazon SES aws 不存在/错误的 gmail 地址

> ID：10452424
> 
> 赞同：0
> 
> 时间：2012-05-04T16:10:35.360
> 
> 标签：amazon-web-services, amazon-ses

发生了一些奇怪的事情，我想知道这是什么解释。我有一个 Web 应用程序，它在用户丢失密码、新注册等时使用亚马逊 SES 发送电子邮件......在测试时我意识到 SES 正在为特定电子邮件地址返回“500 BAD REQUEST”，我输入了 pippo@gmail。 com 只是为了在完全知道电子邮件地址不存在的情况下测试我的应用程序的 UI，然后我收到“500 BAD REQUEST”，最初我不明白出了什么问题，所以我一直在调试，不明白为什么会出现错误 500；后来我意识到我得到它是因为不存在或通用的电子邮件地址。例如，如果我尝试向“bar@gmail.com”发送电子邮件，我会得到 500，但如果我尝试“foo@gmail.com”则不会。（顺便说一句，意大利 pippo@gmail.com 相当于 foo@gmail.com）

如果我尝试使用 pippo@hotmail.com、foo@hotmail.com、bar@hotmail.com，我没有任何问题。

实际上这可能是一个功能，也许是，我只是不知道。

SES 对其他人是否也有这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:53:55.100

SES 将退回的电子邮件地址列入黑名单。当您尝试发送电子邮件时，它会确保该地址未被列入黑名单（也就是说，它最近没有被退回）。

我的猜测是，这些地址被测试 SES 的人如此普遍使用，以至于它们几乎总是被退回，因此被列入黑名单。

# rest - 你如何在 Meteor 中制作 REST API 和上传文件

> ID：10452431
> 
> 赞同：5
> 
> 时间：2012-05-04T16:11:18.450
> 
> 标签：rest, meteor

什么是 REST API？是否已经有一种方法可以在服务器上为 API 定义一些路由和逻辑？我认为这是当今必备的功能。

文件上传也是如此。使用 express 框架，我已经可以非常轻松地处理上传。我如何在 Meteor 中做到这一点？文档对此只字未提。那么是否有一些实施计划？还是已经有办法了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T01:31:50.197

就[REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)而言：Meteor 尚未提供支持的 API 来从您的应用程序中提供 HTTP。这是有意的：在不久的将来，您的应用程序服务器可能不仅仅是直接为最终用户服务的单个进程，而是代理层后面的任意可并行化服务。因此，我们需要提供一个受支持的 API 来响应 HTTP 请求（例如，REST），该 API 在这种设置中继续工作。

如果您现在确实需要接受直接 HTTP REST 请求，请查看如何`packages/accounts-oauth-helper/oauth_server.js`使用`__meteor_bootstrap__.app`连接中间件框架。这暂时可行，但我们不保证 Meteor 将始终由 Connect 提供支持 :)

支持 REST 端点在[Meteor 的路线图](https://trello.com/card/page-model-server-side-rendering-rest-endpoints/508721606e02bb9d570016ae/7)上。

文件上传也是如此（这就是[二进制类型](https://trello.com/card/official-ddp-specification/508721606e02bb9d570016ae/53)所指的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T01:22:30.107

我一直在使用 [https://github.com/crazytoad/meteor-collectionapi#readme](https://github.com/crazytoad/meteor-collectionapi#readme)

这将在您的集合上创建开箱即用的休息端点。您可以使用陨石来安装它。

# wordpress - 向 get_posts 添加自定义变量

> ID：10452435
> 
> 赞同：0
> 
> 时间：2012-05-04T16:11:38.990
> 
> 标签：wordpress

在 wordpress 中，我有自定义页面，并且在页面内部我试图调用特定类别的最新帖子。

这样做，我添加了这个来创建变量......

```
$cat = get_post_meta($post->ID, "mom_cat", true); 
```

在页面的自定义字段中，我添加了 mom_cat = (variable #)

在我的帖子中，我试图根据我放在自定义字段中的变量类别显示最近的帖子。我试过这个，但它没有用......

```
<?php
global $post;
$myposts = get_posts('numberposts=4&category=$cat' );
    foreach($myposts as $post) :
?> 
```

然而那是行不通的。如何将变量添加到“category =”以根据我的自定义字段设置显示类别？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:43:18.747

当 Wordpress 为您提供所有工具供您使用时，您不应该使用自定义字段来定义类别。您应该做的是找到您的自定义帖子的注册位置，并添加：

```
'taxonomies' => array('category') 
```

...到您的参数数组。这将使您能够检查自定义帖子所需的类别。如果您找不到自定义帖子类型的注册位置，请将其添加到您的 functions.php 文件中：

```
add_action('init', 'add_category_to_custom');
function add_category_to_custom()
{
    register_taxonomy_for_object_type('category', 'custom_post_name');
} 
```

然后您可以像这样引用您的自定义帖子：

```
$posts = get_posts(array('numberposts' => 4, 'category' => $cat_ID, 'post_type' => 'custom_post_name')); 
```

**更新：**我不建议使用 Pages 来显示类别信息，但我相信你有你的理由。我仍然会避免在自定义字段中放置类别 ID，因为如果您的类别 ID 之一发生更改，那么它可能会导致很多问题。

在您的情况下，我建议将这些特定页面命名为与其匹配类别完全相同。然后做这样的事情：

```
<?php
/*
IF THE PAGE HAS A MATCHING CATEGORY,
DISPLAY 5 OF THE MOST RECENT POSTS IN THAT CATEGORY
*/
if($catID = get_cat_ID(get_the_title(get_the_ID())))
{
    $posts = get_posts(array('numberposts' => 5, 'category' => $catID));
    foreach($posts as $post) : setup_postdata($post);
    ?>
        <!-- POST HTML GOES HERE -->
    <?php
    endforeach;
}
?> 
```

# java - 如何重构 Maven 多模块项目？

> ID：10452444
> 
> 赞同：12
> 
> 时间：2012-05-04T16:12:06.060
> 
> 标签：java, maven, multi-module, maven-deploy-plugin

我为这篇文章的长度表示歉意，但我在不展示图片的情况下无法使其更简洁。我最近接手了一个 maven 3.0 多模块项目的 build-master 工作。问题是项目/模块的结构是一场灾难。从当前存储在源代码控制中的方式（我们使用 RTC）到模块的 pom 结构，我都在竭尽全力尝试每次都完成一个完整的构建周期。

作为项目层次结构，所有模块都“扁平”存储；即：一切都在同一水平。我有一个父 pom，所有模块都依赖于父级。但是，父级与我的所有其他模块处于同一级别。

前任：

```
c:\dev\MyEarProject
 + parent-pom
   - pom.xml
 + module1
   - pom.xml (depends on parent-pom)
   - src
   -   main
   -     ...
 + module2
   - pom.xml (depends on parent-pom)
   - src
   -   main
   -     ...
 + module3
   - pom.xml (depends on parent-pom)
   - src
   -   main
   -     ... 
```

父 pom 定义了构建项目所需的所有模块，以及在不同子模块中使用的工件版本号的一堆属性：

```
<modules>
  <module>../module1</module>
  <module>../module2</module>
  <module>../module3</module>
</modules>

<properties>
    <org.springframework.version>3.0.5.RELEASE</org.springframework.version>
    <slf4j.version>1.6.4</slf4j.version>
    <repositoryAddress>${snapshots.repo.url}</repositoryAddress>
    <my.hibernate-module.dao.impl>1.2.3</my.hibernate-module.dao.impl>
    <my.hibernate-module.dao.api>1.2.3</my.hibernate-module.dao.api>
</properties> 
```

反过来，每个模块的 pom 通过 pom 的工件编号依赖于父 pom：

```
<parent>
    <groupId>com.cws.cs.lendingsimulationservice</groupId>
    <artifactId>parent-pom</artifactId>
    <version>1.0.6</version>
</parent> 
```

更令人困惑的是，实际的工件名称可能（取决于模块）与模块路径匹配，也可能不匹配。例如， module1 可能位于 path 中`c:\dev\MyEarProject\module1`，但具有 artifact name `hibernate-module`。但是，由于它在 RTC 中的存储方式，在`module1`签出时会调用该目录。

当然，构建一切的最简单方法是进入`c:\dev\MyEarProject\parent-pom\`并运行`mvn clean deploy`. 这在 SNAPSHOT 模式下工作正常，因为 SNAPSHOT 存储库允许同一工件版本的多个部署。但是在发布模式下，这会失败。

这种结构给我带来了两个问题。

1.  每次我需要对父级中的属性进行版本更改时，我都必须更新父级 pom 版本号，以及所有子模块父级 pom 的版本，以及所有子模块本身的版本（因为父级更改了）。
2.  每当我需要部署发布周期时，如果其中一个模块自上一个周期以来没有更改并且因此无法重新部署到同一个 repo（repo 不允许覆盖现有工件），mvn 将引发错误

所以我正在寻找重组这个项目以避免这些问题的最佳方法。对于父 pom，我知道我可以使用相对路径来指向父级。但是，鉴于模块的“扁平”结构，这是一种推荐的方法吗（即：父 pom 相对路径将是 ../parent-pom/pom.xml - 对我来说似乎有点奇怪）？此外，鉴于父级的版本控制独立于模块，使用相对路径不仅会导致额外的混乱（即：无法知道父级 pom 的哪个版本与哪个版本相关联子模块）。

其次，如何在不遇到部署错误的情况下构建整个耳朵？由于工件已经存在于 repo 中，我不需要重建和重新部署它。我尝试使用 --projects 但由于涉及的模块数量众多，管理起来非常困难。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T16:57:22.877

我真正推荐的第一件事是重组项目文件夹......这意味着让项目文件夹代表结构，这意味着*不*扁平化结构。

```
 +-- parent-pom (pom.xml)
       +--- module1 (pom.xml)
       +--- module2 (pom.xml)
       +--- module3 (pom.xml) 
```

因此，您的父级模块部分将被简化如下：

```
<modules>
  <module>module1</module>
  <module>module2</module>
  <module>module3</module>
</modules> 
```

此外，您的模块中的父条目也可以像这样简化：

```
<parent>
  <groupId>com.cws.cs.lendingsimulationservice</groupId>
  <artifactId>parent-pom</artifactId>
  <version>1.0.6</version>
</parent> 
```

...这让我想到了下一点：

如果您当前的所有项目都将它们的父项定义为上面这完全是错误的，原因将尝试在存储库中而不是在上层文件夹中找到父项。换句话说，这会导致您在发布等方面遇到很多问题。

如果我们要解决这个问题，它必须看起来像这样，我不推荐：

```
<parent>
  <groupId>com.cws.cs.lendingsimulationservice</groupId>
  <artifactId>parent-pom</artifactId>
  <version>1.0.6</version>
  <relativePath>../parent-pom/pom.xml</relativePath>
</parent> 
```

我观察到的另一件事是您不使用`SNAPTSHOT`'s ，它将在发布阶段被发布插件取代。与此相关，它将自动更改相应父母等中的所有版本。

在理想情况下，您的模块应如下所示：

```
<parent>
  <groupId>com.cws.cs.lendingsimulationservice</groupId>
  <artifactId>parent-pom</artifactId>
  <version>1.0.6</version>
</parent>

<artifactId>module-1</artifactId>
<!-- No Version or groupId --> 
```

因为所有模块都将继承版本并`groupId`从它们的父级继承。有时更改模块很有用或需要，`groupId`但这是一个例外。

我重读的是关于父级的单独版本控制。这根本没有意义，因为它是其模块的父级，因此将其放入相同的结构中，当然还有相同的 VCS。

如果你想制作一些配置/插件版本，应该用于其他项目的依赖项，而不是创建一个单独的公司`pom.xml`，这是一个单独的项目，将单独发布等。

完成结构更改后，您只需进入 parent-pom 目录并从该文件夹执行`mvn clean package`或`mvn release:prepare release:perform`从该文件夹执行操作，一切都会变得更简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:30:11.557

如果要发布 POM，则必须发布任何更新，但无需手动修改 POM 版本 - 您可以使用版本插件或发布插件自动更新版本。我倾向于更喜欢发布插件，因为它也会为您提交 SCM。

```
mvn versions:set 
```

[http://mojo.codehaus.org/versions-maven-plugin/](http://mojo.codehaus.org/versions-maven-plugin/)

```
mvn release:prepare release:perform 
```

[http://maven.apache.org/plugins/maven-release-plugin/](http://maven.apache.org/plugins/maven-release-plugin/)

您的存储库管理器也可能允许覆盖现有版本，但最好只发布新版本。

我更喜欢平面模块结构，因为它允许使用父文件夹来存储常见文件，例如 checkstyle 配置。我还发现跨模块共享组 id 然后将模块目录命名为与 artifactId 相同的名称很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T19:20:40.870

您提出了相互矛盾的要求。你想重组你的项目，但不能移动。您希望简化部署和发布周期，但不想使用单一版本。

鉴于一个模块中的更改将不可避免地影响所有依赖模块，我将使用一个简单的版本控制方案，其中所有子模块都继承其父模块的版本。maven 发布：准备和发布周期变得简单。使用发行说明来跟踪您的更改并证明跳过对未更改模块的不必要测试是合理的（对版本的更改不会更改构建过程的构建/二进制输出，因此您可以将其用作主要参数）。

祝你的项目好运。

# java - 遍历 POJO 属性并将其设置为另一个对象

> ID：10452445
> 
> 赞同：1
> 
> 时间：2012-05-04T16:12:09.633
> 
> 标签：java, hibernate, rtti, pojo

在我们的应用程序中，我有一个例程手动迭代 Hibernate 加载的 POJO 的属性，并将这些属性分配给该对象的新实例，然后保存它。

例如

```
Class TestClass{
    Integer a;
    String b;

    public void setA(Integer a){
        this.a = a;
    }
    public Integer getA(){
        return a;
    }
    ...
} 
```

在它做的动作中

```
TestClass objectOne = testDao.get(id);
TestClass objectTwo = new TestClass(); 
```

然后迭代就像

```
objectOne.setA(objectTwo.getA());
objectOne.setB(objectTwo.getB()); 
```

我想知道是否有更有效的方法来遍历 objectOne 的每个属性**并将**其设置为**ObjectTwo**，因为在我们的实际应用程序中，这些对象大约有 20 个属性。

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:16:11.313

当然。查看[Apache Commons BeanUtils](http://commons.apache.org/beanutils/)库。在那里你可以使用[`copyProperties(Object dest, Object orig)`](http://commons.apache.org/beanutils/v1.8.3/apidocs/org/apache/commons/beanutils/PropertyUtils.html#copyProperties%28java.lang.Object,%20java.lang.Object%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:03:52.373

好吧，如果您不想使用公共库，您可以使用反射在循环中执行此操作，尽管如果您在将库添加到现有库时没有问题，使用经过验证的代码似乎是更明智的选择应用。

编辑：

这对你来说应该足够了

[http://java.sun.com/developer/technicalArticles/ALT/Reflection/](http://java.sun.com/developer/technicalArticles/ALT/Reflection/)

虽然我不知道这个解决方案与 ApacheCommons 的性能，但我认为不会有很大的不同。

# android - 使用 SUM 获取 SQL 查询的结果

> ID：10452446
> 
> 赞同：-1
> 
> 时间：2012-05-04T16:12:16.743
> 
> 标签：android, sql, sum

我不明白如何使用 sum(name_column) 返回查询结果我已经尝试了很多东西，但我没有看到。

你能告诉我为什么我有这些错误：

```
05-04 16:06:31.663: D/AndroidRuntime(2589): Shutting down VM
05-04 16:06:31.663: W/dalvikvm(2589): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-04 16:06:31.703: E/AndroidRuntime(2589): FATAL EXCEPTION: main
05-04 16:06:31.703: E/AndroidRuntime(2589): java.lang.RuntimeException: Unable to start activity ComponentInfo{exercice.thenewboston/exercice.thenewboston.SQLView}: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.os.Looper.loop(Looper.java:137)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.ActivityThread.main(ActivityThread.java:4424)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at java.lang.reflect.Method.invokeNative(Native Method)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at java.lang.reflect.Method.invoke(Method.java:511)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at dalvik.system.NativeStart.main(Native Method)
05-04 16:06:31.703: E/AndroidRuntime(2589): Caused by: android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.database.AbstractCursor.checkPosition(AbstractCursor.java:400)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:136)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:50)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at exercice.thenewboston.HotOrNot.getSolde(HotOrNot.java:126)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at exercice.thenewboston.SQLView.onCreate(SQLView.java:25)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.Activity.performCreate(Activity.java:4465)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-04 16:06:31.703: E/AndroidRuntime(2589):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-04 16:06:31.703: E/AndroidRuntime(2589):     ... 11 more 
```

我的代码：

HotOrNot.java 的一部分

```
public String getData()   // This method works !
{
    String[] columns = new String[]{ KEY_DATE, KEY_MONTANT, KEY_DESCRIPTION};
    Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    String result = "";

    int iDate = c.getColumnIndex(KEY_DATE);
    int iMontant = c.getColumnIndex(KEY_MONTANT);
    int iDescription = c.getColumnIndex(KEY_DESCRIPTION);

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext())
    {
        result = result + c.getString(iDate) + " " + c.getString(iMontant) + " " + c.getString(iDescription) + "\n";
    }

    // Cursor solde = ourDatabase.query(DATABASE_TABLE);

    return result;

}

public String getSolde(){

    String query = "SUM(id_operation) ";
    String[] otherColumns = new String[]{ query};
    Cursor cursorBidon = ourDatabase.query(DATABASE_TABLE, otherColumns, null, null, null, null, null);
    String otherResult = "";

    int iOperation = cursorBidon.getColumnIndex(KEY_ID);

    /*for (cursorBidon.moveToFirst(); !cursorBidon.isAfterLast(); cursorBidon.moveToNext())
    {*/
        otherResult = otherResult + cursorBidon.getString(iOperation) + "\n";
    /*}*/

    return otherResult;
    /*String query = "select SUM(id_operation) from Operations";
    String mysolde = "";
    Cursor cursorBidon = ourDatabase.rawQuery(query,null);  
    int iOperation = cursorBidon.getColumnIndex(KEY_ID);

    mysolde = cursorBidon.getString(iOperation);
    return mysolde;*/

    } 
```

谢谢

巴拉克解的错误

```
05-04 18:52:01.378: D/gralloc_goldfish(561): Emulator without GPU emulation detected.
05-04 18:52:01.378: I/dalvikvm(561): Wrote stack traces to '/data/anr/traces.txt'
05-04 18:53:22.768: E/CursorWindow(561): Failed to read row 0, column -1 from a CursorWindow which has 1 rows, 1 columns.
05-04 18:53:22.798: D/AndroidRuntime(561): Shutting down VM
05-04 18:53:22.798: I/dalvikvm(561): threadid=3: reacting to signal 3
05-04 18:53:22.818: I/dalvikvm(561): Wrote stack traces to '/data/anr/traces.txt'
05-04 18:53:22.818: W/dalvikvm(561): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
05-04 18:53:22.899: E/AndroidRuntime(561): FATAL EXCEPTION: main
05-04 18:53:22.899: E/AndroidRuntime(561): java.lang.RuntimeException: Unable to start activity ComponentInfo{exercice.thenewboston/exercice.thenewboston.SQLView}: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.os.Looper.loop(Looper.java:137)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-04 18:53:22.899: E/AndroidRuntime(561):  at java.lang.reflect.Method.invokeNative(Native Method)
05-04 18:53:22.899: E/AndroidRuntime(561):  at java.lang.reflect.Method.invoke(Method.java:511)
05-04 18:53:22.899: E/AndroidRuntime(561):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-04 18:53:22.899: E/AndroidRuntime(561):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-04 18:53:22.899: E/AndroidRuntime(561):  at dalvik.system.NativeStart.main(Native Method)
05-04 18:53:22.899: E/AndroidRuntime(561): Caused by: java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it.
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.database.CursorWindow.nativeGetString(Native Method)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.database.CursorWindow.getString(CursorWindow.java:442)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:51)
05-04 18:53:22.899: E/AndroidRuntime(561):  at exercice.thenewboston.HotOrNot.getSolde(HotOrNot.java:126)
05-04 18:53:22.899: E/AndroidRuntime(561):  at exercice.thenewboston.SQLView.onCreate(SQLView.java:25)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.Activity.performCreate(Activity.java:4465)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-04 18:53:22.899: E/AndroidRuntime(561):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-04 18:53:22.899: E/AndroidRuntime(561):  ... 11 more 
```

**

## 编辑 2：

** 事实上，在你举这个例子之前，我已经很好地理解了。我在“return iOperation;”之后添加了这一行 并在我的其他 java 中更改 int 类型。Barack 选项 1 的结果

```
05-05 08:02:57.515: E/AndroidRuntime(539): java.lang.RuntimeException: Unable to start activity ComponentInfo{exercice.thenewboston/exercice.thenewboston.SQLView}: android.content.res.Resources$NotFoundException: String resource ID #0x334
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.os.Looper.loop(Looper.java:137)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-05 08:02:57.515: E/AndroidRuntime(539):  at java.lang.reflect.Method.invokeNative(Native Method)
05-05 08:02:57.515: E/AndroidRuntime(539):  at java.lang.reflect.Method.invoke(Method.java:511)
05-05 08:02:57.515: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-05 08:02:57.515: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-05 08:02:57.515: E/AndroidRuntime(539):  at dalvik.system.NativeStart.main(Native Method)
05-05 08:02:57.515: E/AndroidRuntime(539): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x334
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.content.res.Resources.getText(Resources.java:247)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.widget.TextView.setText(TextView.java:3473)
05-05 08:02:57.515: E/AndroidRuntime(539):  at exercice.thenewboston.SQLView.onCreate(SQLView.java:27)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.Activity.performCreate(Activity.java:4465)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-05 08:02:57.515: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-05 08:02:57.515: E/AndroidRuntime(539):  ... 11 more 
```

选项 2 相同的错误但其他资源。

```
05-05 08:12:28.331: E/AndroidRuntime(754): java.lang.RuntimeException: Unable to start activity ComponentInfo{exercice.thenewboston/exercice.thenewboston.SQLView}: android.content.res.Resources$NotFoundException: String resource ID #0x0
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.os.Looper.loop(Looper.java:137)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-05 08:12:28.331: E/AndroidRuntime(754):  at java.lang.reflect.Method.invokeNative(Native Method)
05-05 08:12:28.331: E/AndroidRuntime(754):  at java.lang.reflect.Method.invoke(Method.java:511)
05-05 08:12:28.331: E/AndroidRuntime(754):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-05 08:12:28.331: E/AndroidRuntime(754):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-05 08:12:28.331: E/AndroidRuntime(754):  at dalvik.system.NativeStart.main(Native Method)
05-05 08:12:28.331: E/AndroidRuntime(754): Caused by: android.content.res.Resources$NotFoundException: String resource ID #0x0
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.content.res.Resources.getText(Resources.java:247)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.widget.TextView.setText(TextView.java:3473)
05-05 08:12:28.331: E/AndroidRuntime(754):  at exercice.thenewboston.SQLView.onCreate(SQLView.java:27)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.Activity.performCreate(Activity.java:4465)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
05-05 08:12:28.331: E/AndroidRuntime(754):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
05-05 08:12:28.331: E/AndroidRuntime(754):  ... 11 more 
```

SQLView.java (full) public class SQLView extends Activity{

```
 @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.sqlview);
        TextView tv  = (TextView) findViewById(R.id.tvSQLinfo);
        TextView voirSolde = (TextView) findViewById(R.id.tvSQLsolde);
        HotOrNot info = new HotOrNot(this);
        info.open();
        String data = info.getData();
        info.close();
        tv.setText(data);

        HotOrNot infoSolde = new HotOrNot(this);
        infoSolde.open();
        int iOperation = infoSolde.getSolde();
        info.close();
        voirSolde.setText(iOperation);
    }
} 
```

在您的代码之后的方法 getSolde 的全部部分（代码 2 的示例，我删除了 sting otherSolde，因为我已经全部更改为 int。）

```
public int getSolde(){

        String query = "SUM(id_operation) AS "+ KEY_ID;
        String[] otherColumns = new String[]{ query};
        Cursor cursorBidon = ourDatabase.query(DATABASE_TABLE, otherColumns, null, null, null, null, null);
        cursorBidon.moveToFirst();
        int iOperation = cursorBidon.getColumnIndex(KEY_ID);
        return iOperation; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:08:06.820

你的问题在这里：

```
int iOperation = cursorBidon.getColumnIndex(KEY_ID); 
```

您正在访问游标而不移动到第一条记录。

```
cursorBidon.moveToFirst(); 
```

在对光标进行任何操作之前执行此操作，您的问题应该会消失。

**编辑**

您的另一个问题是您正在使用 引用该列`KEY_ID`，而您没有在光标中返回该列。

两种可能的解决方案：

1）当您尝试从中提取数据时，按数字（或在本例中为 0）引用列。

2) 使用 SQL 函数 AS 返回列。基本上附加“... AS” + KEY_ID; 对您的查询

**编辑 2**

演示我上面提到的两个选项的示例：

*选项1*

```
String query = "SUM(id_operation) ";
String[] otherColumns = new String[]{ query};
String otherResult = "";
Cursor cursorBidon = ourDatabase.query(DATABASE_TABLE, otherColumns, null, null, null, null, null);
cursorBidon.moveToFirst();
int iOperation = cursorBidon.getInt(0); 
```

*选项 2*

```
String query = "SUM(id_operation) AS " + KEY_ID;
String[] otherColumns = new String[]{ query};
String otherResult = "";
Cursor cursorBidon = ourDatabase.query(DATABASE_TABLE, otherColumns, null, null, null, null, null);
cursorBidon.moveToFirst();
int iOperation = cursorBidon.getColumnIndex(KEY_ID); 
```

就个人而言，我会选择选项1。

# ruby - Rails 通过用户表单添加 rolify 角色

> ID：10452452
> 
> 赞同：5
> 
> 时间：2012-05-04T16:12:37.260
> 
> 标签：ruby, ruby-on-rails-3, devise, cancan

我正在创建一个基于 Devise、CanCan 和 Rolify 的应用程序来处理私有资源。

设计注册已被禁用，因为我不想让用户注册，而我正在创建一个管理界面来添加/编辑用户。

现在我正在处理用户角色。我想允许管理员创建用户并使用相同的表单设置他们的角色。我不知道使用 rolify 是什么样的关系，因为我对 rails 和 Ruby 还很陌生，并且 rolify 添加了`rolify`方法而不是更清晰的关系。

我目前需要并且希望每个用户只有一个角色。因此，如果有人编辑更改角色的用户，我将全部删除`@user.roles`，然后设置新角色。

我目前正在使用一个简单的技巧让它工作。我在表单中添加了一个选择字段，使用`Role`s 的集合来提供角色选择。然后在`create`and`update`方法中我这样做：

```
role = params[:user][:role]
params[:user].delete :role
@user = User.new(params[:user])

respond_to do |format|
  if @user.save # update_attributes inside update
    @user.add_role role
    # ...
  end
end 
```

如您所见，我没有`Role`直接与模型交互，而是使用提供的`add_role`方法。这也产生了另一个问题，因为我必须检索当前角色以允许更新视图为选择设置正确的默认值（最重要的事实是我不知道如何验证 ONE 角色的存在）。

这将是一个过于肮脏的解决方案，所以我想有一些观点，也许关于如何做到这一点的一些建议。我整天都在做这个:-(

如果您需要一些信息，请问我。

PS 我正在观看关于嵌套资源的截屏，但在数据库中我可能会看到它正在使用第三个表来跟踪`users_roles`并且我不明白如何去做。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T12:37:23.173

最后，我更喜欢放弃 Rolify。这对我来说花费了太多时间，我意识到我需要一个更简单的解决方案，所以我现在在我的模型中使用一个新列来描述用户，并且我还实现了一个类似于 has_role? 的方法。保持与 CanCan 的兼容性。

这已经解决了很多问题，而且它是一个更常见的解决方案（= 更容易的帮助）。

根据我的经验，我注意到如果没有人在 30 分钟内回答你的问题，那么你做的太复杂了。

谢谢大家。

# javascript - Javascript 中的字母数字和符号验证

> ID：10452458
> 
> 赞同：-3
> 
> 时间：2012-05-04T16:12:59.973
> 
> 标签：javascript, regex, validation

我想验证 alpahnumeric 的密码字段，并且应该包含至少一个符号，任何人都可以帮助我进行正则表达式 javascript 验证

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:14:40.957

这应该有效：/[a-zA-Z0-9]/

# .net - 制作“热键”以聚焦 WPF 中的文本框

> ID：10452462
> 
> 赞同：12
> 
> 时间：2012-05-04T16:13:13.267
> 
> 标签：.net, wpf, hotkeys

我正在尝试制作一个热键（即 Ctrl + Y），它将焦点更改为文本框。

我是从 Delphi 移植过来的，这让我很困惑。在 Delphi 5 中，这**太**容易了。（在标签的标题上，您可以在要创建热键的字母之前添加一个 &。将标签指向 TextBox 后，热键将起作用。）

对于 WPF，我在 WPF 中看到了涉及调用 Win32 调用或为每个热键（以及其他此类繁重的实现）创建命令的可怕示例。

我很难相信**1999**年的新 IDE 和语言版本（Delphi 5）对于像热键这样简单的东西有更好的系统（比 WPF）。

当然，我错过了一些东西。如果你知道，请告诉我它是什么。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-04T16:31:24.817

所以，我应该继续努力寻找。问了这个问题后不久我就明白了。

他们这样做的方式是创建一个标签并设置其内容（类似这样`Content="_Years Of Service"`）

然后将标签的目标绑定到一个文本框。( `Target="{Binding ElementName=SomeTextBox}"`)

现在，如果您按 Alt + Y，它会将焦点移动到 SomeTextBox。

这是完整的绑定：

```
<Label Content="_Label" Target="{Binding ElementName=SomeTextBox}" />
<TextBox Name="SomeTextBox" /> 
```

# php - 如何在php中使用计数？

> ID：10452465
> 
> 赞同：1
> 
> 时间：2012-05-04T16:13:19.180
> 
> 标签：php, mysql, sql, count, autonumber

我想将数据插入数据库。我有一个名为成员的表，它有 7 列（ID、用户、密码、地址、电话、性别、电子邮件）。我用count来制作这样的自动编号

```
$no = "SELECT COUNT(ID)FROM member";
$nors = mysql_query($no);
$nors = $nors + 1;
$query = "INSERT INTO member VALUES (".$nors.",'".$user."','".md5($pass)."','".$name."','".$addr."',".$hp.",'".$gender."','".$email."')"; 
```

为什么，虽然我只有 1 个数据，但 nors 的结果是 6 而不是 2？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:16:39.770

`mysql_query`返回结果对象，而不是值。`COUNT(ID)`您的查询在和`FROM`...之间也缺少所需的空格。

```
$no = "SELECT COUNT(ID) AS count FROM member";
$result = mysql_query($no);
$row = mysql_fetch_object($result);
$nors = $row->count; 
```

不过，您应该考虑使用更现代的东西，例如 PDO，因为`mysql_*`函数已被弃用，最终将完全消失。

**编辑：** @andrewsi 在评论中指出，无论如何，您确实应该使用 MySQL 的内置自动增量功能。比你现在做的好多了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:21:06.983

如果您使用它为新成员生成下一个 ID 号，您应该考虑将 ID 设置为 auto_increment 字段 - 就目前而言，您可能会同时获得两个成员注册，并且两者获得相同的 ID

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:18:37.723

替换此行

```
$nors = mysql_query($no); 
```

通过这些线路：

```
$result_handler = mysql_query($no); 
$result = mysql_fetch_array($result_handler);
$nors = $result[0]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T16:21:22.310

如果您的 id 字段设置为自动编号，则无需插入它。MySql 将为您处理。每当您添加新行时，自动编号都会增加。如果您删除一行，自动编号不会减少。

如果您当前只有 1 行，但您已经添加和删除了行，那么您的插入将生成一个 ID 不连续的行。

# ruby-on-rails - 查看未在 ruby on rails 应用程序中列出数据库的内容

> ID：10452466
> 
> 赞同：0
> 
> 时间：2012-05-04T16:13:31.720
> 
> 标签：ruby-on-rails, ruby, crud

我的 sqlite3 数据库有以下格式的联系人：-

id first_name last_name location city country phone_number email

我在数据库中填写了两个条目。

我的模型类如下：-

```
class Contact < ActiveRecord::Base
  # attr_accessible :title, :body
end 
```

我的控制器如下：-

```
class ContactController < ApplicationController
  def index
    @contacts=Contact.find(:all)

      respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @contacts }
    end
  end

  def show
    @contacts=Contact.find(:all)
  end

  def new
  end

  def create
  end

  def update
  end
end 
```

我的看法如下：-

```
<h1>My Contact List</h1>

<% if @contacts.blank? %>
<p>No contacts to display</p>

<% else %>
    <ul id="contacts">
    <% @contacts.each do |c| %>
    <li>
       <% link_to c.first_name + ' ' + c.last_name, :action =>'show', :id =>c.id  -%>
    </li>
    <% end %>
</ul>
<% end %> 
```

当我运行启动 Webrick 服务器以查看 localhost:3000/contact/index 时，我只得到带有 2 个空白列表项的“我的联系人列表”，而不是数据库中的实际内容。

我应该如何进行？我无法找出我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:26:03.097

看起来你需要使用等号。所以在您看来，请执行以下操作

```
<%= link_to c.first_name + ' ' + c.last_name, :action =>'show', :id =>c.id  %> 
```

# python - 使用 Python 的 GAE 或 Maps API3 存储定位器？（简易版）

> ID：10452467
> 
> 赞同：0
> 
> 时间：2012-05-04T16:13:31.753
> 
> 标签：python, google-app-engine, google-maps-api-3, google-cloud-datastore

我的任务是创建我们的谷歌地图网站商店定位器，到目前为止，我能找到的只是旧的 php 教程和一些新的 appEngine 应用程序。

这些应用程序看起来很棒。它们似乎按设计运行，看起来这是我需要进行的方式。[我什至在这里](http://geodatastore.appspot.com/locator)和[这里](http://code.google.com/p/geomodel/source/browse/#svn%2Ftrunk%2Fdemos%2Fpubschools)找到了一个演示，两者都很完美。

问题是，我还没有达到理解它们的水平，以便向它们学习并开始为我们的商店实施我自己的应用程序。我确实计划使用它们来学习，但目前我还没有达到那个水平，所以我什至没有通过检查代码来真正学习任何东西。

在我学习这个的时候，有什么我可以使用的插件选项吗？也许有隐藏在某个地方的任何 python 教程？我可以学习这些演示，但我暂时确实需要一些东西，而我正在弄清楚这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:09:11.447

这个[2008 年的演示](http://wtp2.appspot.com/AppEngineMapDemo.htm)可能有点旧，但会让你走上正确的轨道。

地理数据存储中也有[定位器](http://code.google.com/p/geodatastore/source/browse/trunk/locator.py)。[演示](http://geodatastore.appspot.com/locator)

# html - 将代码片段放在没有空行的表格中

> ID：10452468
> 
> 赞同：-2
> 
> 时间：2012-05-04T16:13:35.820
> 
> 标签：html, css, layout

对于具有多行的预格式化代码片段，其中一些是缩进的，HTML 元素是`<pre>`. 但是，当我在表格中使用它时，浏览器会在片段前后插入一个空行，即使我没有将标签放在单独的行上。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:15:57.557

是的。您需要删除浏览器自动应用于元素的默认填充和边距`pre`。

做这个`<pre style="padding:0; margin:0;"></pre>`

如果这不能删除所有空格，请添加`display: inline;`到样式属性。默认情况下它使用`display: block;`

# javascript - 按键名过滤对象

> ID：10452470
> 
> 赞同：0
> 
> 时间：2012-05-04T16:13:42.880
> 
> 标签：javascript, jquery, object, filter

我有一个要过滤的对象。这就是我使用的：

```
query = {
   "teststring-123": "true",
   "teststring-12344566": "false",
   test: "true"
} 
```

我想过滤查询，以便过滤后我只有：

```
query = {
   "teststring-123": "true",
   "teststring-12344566": "false"
}

$(query).each(function(index, value) {
    $.each(value, function(i, v) {
        if(i.indexOf('teststring-')==-1) {
            // remove part of query object where index is this one       
            console.log(index)
        }
    });     
}); 
```

我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:18:34.167

您是否要删除所有没有以“teststring-”开头的键的键值对？如果是这样...

```
for(var key in query){
    if(query.hasOwnProperty(key) && key.indexOf('teststring-') === -1){
        delete query[key];
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:17:09.493

使用[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)运算符：

```
$.each(query, function(key, value) {
    if(key.indexOf('teststring-') == -1) {
        delete query[key];
    }
}); 
```

[http://jsfiddle.net/NvZyA/](http://jsfiddle.net/NvZyA/)（在这个演示中，[`Object.keys()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)用于显示所有键）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:17:47.707

您可能正在寻找[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Special_Operators/delete_Operator)运营商。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T16:19:06.707

使用[`delete`](https://developer.mozilla.org/en/JavaScript/Reference/Operators/delete)运算符：

```
var query = {
   "teststring-123": "true",
   "teststring-12344566": "false",
   test: "true"
}
$.each(query, function(sKey) {
    if (sKey.indexOf("teststring-") < 0) { // or check if it is not on first position: != 0
        delete query[sKey];
    }  
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T16:22:21.017

正如其他人所说，使用`delete`运算符。但是，无需迭代对象的属性：

```
var query = {
    "teststring-123" : true,
    "teststring-12344566" :  false,
    test: true
};

delete query['test']; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T16:26:12.733

像这样？

```
var query = {
    "teststring-123": "true",
    "teststring-12344566": "false",
    "test": "true"
}
var newobj = {};

$.each(query, function(i, v) {
    if(i.indexOf('teststring-') != -1) {
        // remove part of query object where index is this one        
        console.log(i);
        newarr[i] = v;
    }
});
console.log(newobj); 
```

# facebook - 使用标签设置视频时长

> ID：10452471
> 
> 赞同：1
> 
> 时间：2012-05-04T16:13:52.397
> 
> 标签：facebook, action, facebook-opengraph, watch, built-in

我在我的应用程序中使用内置的 OpenGraph 操作类型“watch”。当我发布此操作时，我只发送指向对象页面的链接。如文档中所述“默认情况下，start_time 将设置为有关活动的 Open Graph 故事的发布时间，并且 expires_in 将设置为其 Open Graph 对象标记中指定的视频类型对象的持续时间”所以Open Graph 对象标记告诉我，持续时间应标记为

```
[meta property="video:duration"          content="runtime in secs"] 
```

我将此属性设置为 6000，因此在页面的头部我有以下内容：

```
[meta property="og:type" content="movie" /]
[meta property="og:title" content="blabla" /]
[meta property="og:description" content="blablablablabla" /]
[meta property="og:image"  content="<image url>" /]
[meta property="og:video" content="content url"]
[meta property="og:video:type" content="application/x-shockwave-flash"]
[meta property="video:duration" content="6000"] 
```

但是当我发布动作时，它似乎已经完成，即它在我的时间线上写为“已观看”而不是“正在观看”。有谁知道，我应该在页面上设置哪个属性让 Facebook 获得正确的电影时长？

对不起我的英语，谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:23:14.427

[这是一个错误，您能否在https://developers.facebook.com/bugs](https://developers.facebook.com/bugs)上打开一份报告并将链接发布在此步骤的评论中以供其他人订阅？

但是，您可以通过在操作本身中指定“expires_in”属性来解决此问题。有关详细信息，请参阅文档：[https ://developers.facebook.com/docs/opengraph/actions/builtin/#watch](https://developers.facebook.com/docs/opengraph/actions/builtin/#watch)

# java - 使用 Hibernate 和 LEFT JOIN 从单独的表中加载默认值

> ID：10452477
> 
> 赞同：0
> 
> 时间：2012-05-04T16:14:24.967
> 
> 标签：java, sql, hibernate, left-join

我正在编写系统以允许用户设置通知选项。我创建了两个类，Notification 和 NotificationOption。通知用于指定要发送通知的不同事件以及默认值，通知选项将包含用户选择的首选项。这些是 hbm 文件：

通知.hbm

```
<hibernate-mapping>
    <class name="com.entities.Notification" table="engine_notification">
        <id name="id">
            <generator class="sequence">
                <param name="sequence">seq_engine_notification_id</param>
            </generator>
        </id>

        <property name="name" not-null="true"/>
        <property name="descriptor" not-null="true"/>
        <property name="defaultValue" column="default_value"/>
    </class>
</hibernate-mapping> 
```

通知选项.hbm

```
<hibernate-mapping>
    <class name="com.entities.NotificationOption" table="engine_notification_option">
        <composite-id>
           <key-many-to-one name="player"
                     class="com.entities.Profile"
                     foreign-key="id"
                     lazy="false" />
           <key-many-to-one name="notification"
                     class="com.entities.Notification"
                     foreign-key="id"
                     lazy="false" />
       </composite-id>
        <property name="value" not-null="true"/>
    </class>
</hibernate-mapping> 
```

现在我不想每次创建新的 Notification 类型时都在 NotificationOption 表中创建一行，所以我希望能够在 Notification 表上执行查询，在 Notification.id = NotificationOption.notification 上 LEFT JOINs NotificationOption .

使用以下 SQL，我得到了预期的结果：

```
SELECT * FROM engine_notification n
LEFT JOIN 
  (SELECT o.* FROM engine_notification_option o WHERE o.player = :playerid) nop
ON n.ID = nop.notification
ORDER BY n.ID; 
```

所以我在 hbm 文件中添加了以下内容：

```
<sql-query name="notificationsForPlayer">
    <return alias="option" class="com.otto.engine.entities.NotificationOption"/>
    <return-join alias="notification" property="option.notification" />
    select
        n.id as {notification.id},
        n.name as {notification.name},
        n.descriptor as {notification.descriptor},
        n.default_Value as {notification.defaultValue},
        nop.player as {option.player},
        nop.value as {option.value}
    from engine_notification n
    left join (select o.* from engine_notification_option o where o.player = :playerID) nop
    on n.id = nop.notification
    order by n.ID
</sql-query> 
```

然而，这给了我以下信息：

```
java.sql.SQLException: Invalid column name 
```

任何想法如何解决它，或不同的解决方案来实现我想要实现的目标？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:43:13.050

我猜`select o.*`在加入是问题所在。这种连接并不是真正的标准。

这个选择怎么样：

```
select
    n.id as {notification.id},
    n.name as {notification.name},
    n.descriptor as {notification.descriptor},
    n.default_Value as {notification.defaultValue},
    nop.player as {option.player},
    nop.value as {option.value}
from engine_notification n
left join engine_notification_option nop
on n.id = nop.notification
where nop.player = :playerID
order by n.ID 
```

# sharepoint - 将 null 作为 DataViewWeb 部件 SharePoint 的查询字符串中的值传递

> ID：10452479
> 
> 赞同：0
> 
> 时间：2012-05-04T16:14:36.680
> 
> 标签：sharepoint, sharepoint-2010

在 dataviewwebpart 中，如何通过查询字符串传递空字段值来过滤它。我能够做非空值。

有人可以帮我弄这个吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:03:23.590

你试过空值吗？例如 your_url?variable1=&variable2=value2 在这种情况下，第一个查询字符串变量实际上包含一个空字符串。

# join - 如何查询表以获取需要两个连接到两个单独 ID 的一行？

> ID：10452487
> 
> 赞同：0
> 
> 时间：2012-05-04T16:15:11.563
> 
> 标签：join, oracle11g

甲骨文 11g

PERSON 表同时包含卖家和买家 ID。如何让买家和卖家进入单一结果集？我可以获得列出买方或卖方的结果，但不能同时列出两者。

```
Person
=================
 PersonID First   Last
  1      Joe      Camel
  2      Ronald   McFly
  3      Barbara  Wawa

 SalesDetail
 =========================
 TransID   Amount  SellerID CustomerID
 98         500     1        2
 99         700     3        1

Desired Result
===========================================
SellerID    SellerLast  BuyerID BuyerLast  Amount
1           Camel       2       McFly      500
3           Wawa        1       Camel      700 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:17:35.137

只需加入`Person`表两次

```
SELECT sd.sellerID,
       seller.last sellerLast,
       sd.buyerID,
       buyer.last buyerLast,
       sd.amount
  FROM salesDetail sd
       JOIN person seller ON (sd.sellerID = seller.personID)
       JOIN person buyer  ON (sd.buyerID  = buyer.personID) 
```

如果买方或卖方可能未知，您可能需要外部联接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:20:38.373

试试这个

```
select seller.sellerid, 
       seller.last,
       buyer.buyerid,
       buyer.last, 
       amount
from
person buyer
inner join salesdetail on buyer.personid = salesdetail.cutomerid
inner join person seller on salesdetail.sellerid = seller.personid 
```

目前无法测试自己

# scala - 使用带有 scala 的 catch 块的部分函数

> ID：10452489
> 
> 赞同：6
> 
> 时间：2012-05-04T16:15:26.040
> 
> 标签：scala

我有一个 catch 块，我最终重复了很多次，发现这个 SO question 确认我可以使用部分函数作为 catch 块（Scala 2.9 的 try...catch 泛化的用例是什么？ [1](https://stackoverflow.com/questions/7788803/what-are-the-use-cases-for-scala-2-9s-try-catch-generalization)） .

目前，我的代码如下所示：

```
var task = newTask("update product", "update for customer " + customerId.toString)
try {
          val vcdRouter = actorSystem.actorFor("user/supervisor/router-10.10.10.10:443")

          val vdcId = new UUID("92ddba5e-8101-4580-b9a5-e3ee6ea5718f")
          val vdcGet = sendExpect[AdminVdcType](vcdRouter, GetVdc(vdcId))
          val vdcPut = VdcPutConfig(vdcGet, c)
          val vdcPutTask = sendExpect[TaskType](vcdRouter, UpdateVdc(vdcId, vdcPut))

          task = task.copy(Progress = 100, status = SuccessType)

        } catch {
          case failure: NoResponseBodyException =>
            logger.debug("*** In putCustomerProduct, got a Left(VcdGatewayException)")
            task = task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(failure, BadGateway)))

          case failure: VcdGatewayException ⇒
            logger.debug("*** In putCustomerProduct, got a Left(VcdGatewayException)")
            task = task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(failure, GatewayTimeout)))

          case failure: Exception ⇒
            logger.debug("*** In putCustomerProduct, got a Left(Exception)")
            task = task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(failure)))

        } 
```

由于我有这个在 catch 块内发生变化的任务 var，有没有一种很好的方法可以从包含 catch 块的部分函数中访问它？该任务是一个 var，因为它设置了一些初始化数据，例如在进入系统时创建的时间戳。我可以解决这个问题，但无论如何我都对原始问题的答案感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T18:11:47.110

我假设你有几个不同`var task`的函数，你想使用它。

你可以创建一个函数，它同时接受`task`一个任务设置器作为参数，它返回一个`PartialFunction`你可以用作你的 catch 处理程序的函数。

```
def handler(task: Task, setTask: Task => Any): PartialFunction[Throwable, Any] = {
  case failure: NoResponseBodyException =>
    logger.debug("*** In putCustomerProduct, got a Left(NoResponseBodyException)")
    setTask(task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(failure, BadGateway))))

  case failure: VcdGatewayException =>
    logger.debug("*** In putCustomerProduct, got a Left(VcdGatewayException)")
    setTask(task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(failure, GatewayTimeout))))

  case failure: Exception =>
    logger.debug("*** In putCustomerProduct, got a Left(Exception)")
    setTask(task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(failure))))
}

// somewhere else in your code...
var task = newTask("update product", "update for customer " + customerId.toString)
try {
   val vcdRouter = actorSystem.actorFor("user/supervisor/router-10.10.10.10:443")

  val vdcId = new UUID("92ddba5e-8101-4580-b9a5-e3ee6ea5718f")
  val vdcGet = sendExpect[AdminVdcType](vcdRouter, GetVdc(vdcId))
  val vdcPut = VdcPutConfig(vdcGet, c)
  val vdcPutTask = sendExpect[TaskType](vcdRouter, UpdateVdc(vdcId, vdcPut))

  task = task.copy(Progress = 100, status = SuccessType)
} catch handler(task, task = _) 
```

我也同意[user3001](https://stackoverflow.com/users/812272/user3001)的观点，即您应该尝试减少 catch 处理程序中的重复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T21:22:19.973

这是另一种使用`scala.util.control.Exception`.

```
scala> import util.control.Exception._
import util.control.Exception._ 
```

首先创建`Catch[_]`对象来处理特定的异常。

```
scala> val nfeh = handling(classOf[NumberFormatException]) by println
nfeh: util.control.Exception.Catch[Unit] = Catch()

scala> val aobeh = handling(classOf[ArrayIndexOutOfBoundsException]) by println
aobeh: util.control.Exception.Catch[Unit] = Catch() 
```

`.or`使用方法将它们组合在一起。请注意，就像在`catch`块中一样，顺序很重要。

```
scala> val h = nfeh or aobeh
h: util.control.Exception.Catch[Unit] = Catch() 
```

将处理程序应用于可能引发异常的代码。

```
scala> h apply {
     |   println("1o2".toInt)
     | }
java.lang.NumberFormatException: For input string: "1o2"

scala> h apply {
     |   val x = Array(8)
     |   println(x(2))
     | }
java.lang.ArrayIndexOutOfBoundsException: 2 
```

至于这`task`部分，您可以按照以下方式做一些事情：

```
scala> val nfeh = handling(classOf[NumberFormatException]) by { ex =>
     |   println(ex)
     |   -1
     | }
nfeh: util.control.Exception.Catch[Int] = Catch()

scala> val aobeh = handling(classOf[ArrayIndexOutOfBoundsException]) by { ex =>
     |   println(ex)
     |   -2
     | }
aobeh: util.control.Exception.Catch[Int] = Catch()

scala> val h = nfeh or aobeh
h: util.control.Exception.Catch[Int] = Catch()

scala> val task = h apply {
     |   "120".toInt
     | }
task: Int = 120

scala> val task = h apply {
     |   "12o".toInt
     | }
java.lang.NumberFormatException: For input string: "12o"
task: Int = -1

scala> val task = h apply {
     |   Array(12, 33, 22)(2)
     | }
task: Int = 22

scala> val task = h apply {
     |   Array(12, 33, 22)(6)
     | }
java.lang.ArrayIndexOutOfBoundsException: 6
task: Int = -2 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:35:20.420

我对 scala 很陌生，所以也许我的答案可能不是那么正确，但是：在每个“案例”块中，唯一改变的是错误类型。首先，我会为异常类型创建另一个匹配项。就像是

```
def exceptionToErrorReason(val failure:Exception) : ErrorReason = failure.getClass match {
  case classOf[NoResponseBodyException] => BadGateway
  case classOf[VcdGatewayException ] => GatewayTimeout
  case _ => null
} 
```

现在你可以像这样改变你的 catch 块

```
case failure: Exception ⇒
        logger.debug("*** In putCustomerProduct, got a Left(" + failure.getClass().getSimpleName() + )")
        task = task.copy(Progress = 100, status = Error, Error = Option(exceptionToError(exceptionToErrorReason(failure))) 
```

并忽略其余部分。无需复制任何东西。

# html - JavaFX 重定向到网页

> ID：10452495
> 
> 赞同：1
> 
> 时间：2012-05-04T16:15:51.470
> 
> 标签：html, redirect, javafx

有谁知道一种简单的方法来获取，例如，在 web 部署的 java fx 应用程序中的按钮操作事件，以将浏览器定向到新网页？

因此，在我的应用程序中，当用户单击 javafx 按钮时，我想转到我网站的主页。

我认为这可以用 javascript & javafx 来完成，但我认为它很乱......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:35:54.683

```
application.getHostServices().showDocument("http://www.mywebsite.org"); 
```

[hostServices.showDocument(uri)](http://docs.oracle.com/javafx/2/api/javafx/application/HostServices.html#showDocument%28java.lang.String%29)

> 在新的浏览器窗口或选项卡中打开指定的 URI。将由浏览器首选项确定它是新浏览器窗口还是现有浏览器窗口中的选项卡。请注意，这将尊重默认浏览器的弹出窗口拦截器设置；它不会试图规避它们。

# regex - Perl 正则表达式替换最后一次出现

> ID：10452498
> 
> 赞同：0
> 
> 时间：2012-05-04T16:15:55.950
> 
> 标签：regex, perl, non-greedy

我有这个输入：

```
AB2.HYNN.KABCDSEG.L000.G0001V00
AB2.HYNN.GABCDSEG.L000.G0005V00 
```

我想删除`GXXXXVXX`字符串中的所有结尾。

当我使用此代码时：

```
$result  =~ s/\.G.*V.*$//g;
print "$result \n"; 
```

结果是：

```
AB2.HYNN.KABCDSEG.L000
AB2.HYNN 
```

似乎每次正则表达式`".G"`都用空白删除它。我不明白。

我想要这个：

```
AB2.HYNN.KABCDSEG.L000
AB2.HYNN.GABCDSEG.L000 
```

我怎么能在正则表达式中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:27:23.277

```
$result =~ s/\.G\d+V\d+//g; 
```

适用于给定的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:32:42.013

**更新：**

在评论中讨论后，最终的解决方案是：

```
s/\.G\w+V\w+$//; 
```

在您的正则表达式中：

```
s/\.G.*V.*$//g; 
```

那些`.*`是贪婪的，会尽可能匹配。您唯一的要求是某处必须有 a `V`，`.G`因此它会从找到的第一个字符串开始截断字符串`.G`，只要它后面跟着 a `V`。这里不需要`/g`修饰符，因为发生的任何匹配都会删除字符串的其余部分。除非你有换行符，因为`.`没有`/s`修饰符不匹配换行符。

# c# - 自定义图标会破坏 DataGridView？

> ID：10452500
> 
> 赞同：2
> 
> 时间：2012-05-04T16:15:59.460
> 
> 标签：c#, datagridview, icons

我有一个显示彩信列表的 DataGridView。为了区分发送和接收，我在列中放置了一个右箭头和左箭头。我们的客户喜欢它，但希望右箭头为绿色以更加清晰，尤其是在国际环境中。

我选择了右箭头并在 Visual Studio 2003 中打开它（我正在使用 VS2010 编写应用程序）。我重新着色了图标，它看起来很棒，但是当我去显示包含控件时，我收到以下错误：

*DataGridView 出现以下异常：*

*System.ArgumentException：参数无效。* *在 System.Drawing.Image.FromStream（流流，布尔 useEmbeddedColorManagement，布尔 validateImageData）* *在 System.Drawing.ImageConverter.convertFrom（ITypeDescriptorContext 上下文，CultureInfo 文化，对象值）* *在 System.Windows.Forms.Formatter.FormatObjectInternal（对象值，* *在 System.Windows.Forms.DataGridViewCell.GetFormattedValue(Object value, Int32 rowIndex, DataGridViewCellStyle& cellStyle, TypeConverter valueTypeConverter, TypeConverter formattedValueTypeConverter, DataGridViewDataErrorContexts context* *)*

 **要替换此默认对话框，请处理 DataError 事件。*

当我创建要填充数据的 DataTable 时，我在将具有图标的列上使用它

```
dt.Columns.Add(sDirection);
dt.Columns[sDirection].DataType = typeof(Byte[]); 
```

当我将数据添加到行时，我有一个转换图标的方法。

```
internal static Byte[] ConvertIconToByteArray(Icon pIcon) {
        MemoryStream ms = new MemoryStream();
        pIcon.Save(ms);
        return (ms.GetBuffer());
} 
```

我将 DataTable 添加到 DataGridView

```
grdMMSList.DataSource = dt.DefaultView; 
```

（为了清楚起见，从上面的代码中删除了方法调用）

我在调试器中进行了操作，并将 DefaultView 设置为 DataSource 是引发错误的地方。我尝试将它放在 try/catch 块中，这样我就可以看到异常，但它不会触发捕获。

只是其他一些信息： - 图标存储为资源并由 Properties.Resources.RightArrow 调用 - 更改颜色后，我只是将文件保存在 VS2003 中，没有另存为。该文件仍然在各处显示为图标。- 回到 VS2010，资源文件确实有新的配色方案并在那里正确渲染。

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:23:38.237

我不会以这种方式编辑图像。如果您想要一组有效的箭头，这些箭头都支持添加到 a `DataGridView`, 所以到目录

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\VS2010ImageLibrary\1033 
```

在这里您会找到一个 .zip 文件。解压它。

然后你会发现带有大量 MS 图标和图像等的 varios 子目录。导航到

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\VS2010ImageLibrary\1033
    \VS2010ImageLibrary\VS2010ImageLibrary\Objects\png_format\WinVista 
```

在这里，您会发现各种不同颜色的箭头。我的建议是使用这些，而不是您对现有文件的位图编辑。

我希望这有帮助。*

# c++ - makefile 自动 src 文件检测和依赖生成

> ID：10452507
> 
> 赞同：2
> 
> 时间：2012-05-04T16:16:20.047
> 
> 标签：c++, makefile

我的 c++ 项目有以下设置：

在 src 文件夹中，有 *.cpp 和相应的 *.h 文件，在 obj 文件夹中我想要我的 .o 文件。

到目前为止，编译和链接不是问题。但是现在我有太多的 .cpp 和 .h 文件无法手动将它们放入 Makefile 中。所以我决定在makefile中写这个小指令：

```
collect_sources:
@echo "collecting source files";
@echo "SRCS = \\" > sources;
@for file in ./src/*.cpp; \
do \
    echo "$$file \\" >> sources; \
done 
```

我也这样做

```
-include sources 
```

在生成文件的开头

结果文件`sources`看起来不错，尽管最后一行有一个我不喜欢的反斜杠。但是afaik它也应该是有害的。

我现在还需要自动建立依赖关系。在我将 *.cpp 文件定义为`SRCS`直接在 Makefile 中的上一个版本中，以下代码很好：

```
$(SRCDIR)/%.cpp:
  @$(CXX) $(DEPFLAGS) -MT \
  "$(subst $(SRCDIR),$(OBJDIR),$(subst $(EXT_SRC),$(EXT_OBJ),$$file))" \
  $(addprefix ,$$file) >> $(DEP);
clear_dependencies:
    echo "" > $(DEP);

depend: clear_dependencies $(SRCS) 
```

但是包含`sources`-file 后，它永远不会到达上层代码块。

以下是 Makefile 顶部定义的常量：

```
CXX = g++
CXXFLAGS = -Wall \
       -Wextra \
       -Wuninitialized \
       -Wmissing-declarations \
       -pedantic \
       -O3 \
       -p -g -pg
LDFLAGS =  -p -g -pg
DEPFLAGS = -MM

SRCDIR  = ./src
OBJDIR  = ./obj

TARGET = ./bin/my_funky_function_which_is_not_the_real_name

-include sources

OBJSTMP =   $(SRCS:.cpp=.o)
OBJS        =   $(OBJSTMP:$(SRCDIR)=$(OBJDIR))
DEP = depend.main
EXT_SRC =   .cpp
EXT_OBJ =   .o 
```

我错过了什么？我的方法有效/可行吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T17:05:48.983

好吧，你要求的。

**1：**你`collect_sources:... include sources`是光荣的 Rube Goldberg 黑客。只需这样做：

```
SRCS = $(wildcard ./src/*.cpp) 
```

如果你想通过肉眼确认，你可以这样做：

```
$(info $(SRCS)) 
```

**2：**

```
clear_dependencies:
    echo "" > $(DEP); 
```

只是为了美观，让我们解决这个问题。

```
clear_dependencies:
    $(RM) $(DEP); 
```

**3：**

```
$(SRCDIR)/%.cpp:
    @$(CXX) $(DEPFLAGS) -MT \
  "$(subst $(SRCDIR),$(OBJDIR),$(subst $(EXT_SRC),$(EXT_OBJ),$$file))" \
  $(addprefix ,$$file) >> $(DEP); 
```

这将需要一些工作。首先是眼前的问题：目标是存在的真实文件，规则没有先决条件。因此，该规则将不会运行（我不知道为什么它在以前的版本中对您有用，也许还有其他不同的地方）。作为临时修复，我建议我们切换到静态模式规则和 PHONY 目标：

```
.PHONY:$(SRCS)
$(SRCS) : $(SRCDIR)/%.cpp:
    @$(CXX) $(DEPFLAGS) -MT \
   ... 
```

看看这一切是否有效，然后我们就可以解决大问题。

# c - 我需要包含什么 GTK 标头才能使用 lookup_widget？

> ID：10452510
> 
> 赞同：1
> 
> 时间：2012-05-04T16:16:39.703
> 
> 标签：c, gtk, header-files

如下例所示，这个回调函数是当用户点击确定按钮时。我可以通过使用 gtk_widget_get_toplevel 从按钮获取窗口（顶级小部件），但我一直在尝试获取名为 ENTRY 的 GtkEntry 小部件的小部件指针。

```
/* Called when OK button is clicked */
on_BT_OK_clicked(GtkButton *button, gpointer user_data)
{
    //The line directly below is the one I get an error on
    GtkWidget *entry = lookup_widget( GTK_WIDGET(button), "ENTRY" );

    gchar *text1, *text2;
    text1 = gtk_entry_get_text( GTK_ENTRY(entry));
    text2 = g_strconcat("Hello, ", text1, NULL);
    GtkWidget *window = gtk_widget_get_toplevel (GTK_WIDGET(button));
    GtkWidget *dialog = gtk_message_dialog_new( window,
                                               GTK_DIALOG_DESTROY_WITH_PARENT,
                                               GTK_MESSAGE_INFO,
                                               GTK_BUTTONS_CLOSE,
                                               text2);
    gtk_dialog_run(GTK_DIALOG(dialog));
    gtk_widget_destroy(dialog);
} 
```

但我收到错误“未定义对 lookup_widget 的引用”。我可以使用 lookup_widget 找到十亿个代码片段示例，但没有一个完整的源代码示例显示支持使用它的标头。我正在使用 Anjuta3.2.0 和最新的 Glade 插件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T19:43:44.273

正如 Basile Starynkevitch 所说，`lookup_widget()`它是 Glade 2 生成的一个函数。但是，Glade 的代码生成已经被弃用了很长时间，取而代之的是（第一个）libglade 和（后来的）GtkBuilder。事实上，Glade 3 甚至都不会这样做。

首选的解决方案是在连接信号时将指向您的 ENTRY 的指针作为用户数据指针传递，或者，如果您正在使用`gtk_builder_connect_signals()`，则将指向 ENTRY 的指针存储在您的类中并将类作为用户数据指针传递。

但是，如果您*必须*使用`lookup_widget()`，这里是 Glade 2 大约 6 年前生成的源代码：

```
GtkWidget*
lookup_widget (GtkWidget *widget,
               const gchar *widget_name)
{
  GtkWidget *parent, *found_widget;

  for (;;)
    {
      if (GTK_IS_MENU (widget))
        parent = gtk_menu_get_attach_widget (GTK_MENU (widget));
      else
        parent = widget->parent;
      if (!parent)
        parent = (GtkWidget*) g_object_get_data (G_OBJECT (widget), "GladeParentKey");
      if (parent == NULL)
        break;
      widget = parent;
    }

  found_widget = (GtkWidget*) g_object_get_data (G_OBJECT (widget),
                                                 widget_name);
  if (!found_widget)
    g_warning ("Widget not found: %s", widget_name);
  return found_widget;
} 
```

为此，您必须对顶层窗口中包含的*每个小部件执行以下操作：*

```
g_object_set_data_full (G_OBJECT (toplevel), "name-of-widget", gtk_widget_ref (widget), (GDestroyNotify) gtk_widget_unref); 
```

然后对每个顶级窗口执行以下操作：

```
g_object_set_data (G_OBJECT (toplevel), "name-of-toplevel", toplevel); 
```

在我看来，麻烦多于它的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-17T05:32:11.813

Glade-2 在其中实现`lookup_widget()`，`support.c`并且标题为`support.h` 一旦 GLADE GUI 转换为 C 代码，这些文件就会自动生成。

# visual-studio-2010 - 左边距 Resharper 助手图标的下拉菜单快捷方式，如内联 Ctrl+.?

> ID：10452514
> 
> 赞同：1
> 
> 时间：2012-05-04T16:17:01.893
> 
> 标签：visual-studio-2010, resharper-6.0

能够使用 Ctrl+。和 Enter 节省了我很多时间。我希望能够使用显示在左边距的 Resharper 图标来做到这一点。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:44:54.773

它的默认快捷键是`Alt`+ `Enter`。

# php - 如何检查是否已经使用 Jquery 发送了 ajax 请求？

> ID：10452521
> 
> 赞同：0
> 
> 时间：2012-05-04T16:17:19.007
> 
> 标签：php, jquery, ajax

我正在使用 Ajax 请求通过 Jquery 发布表单。

```
$.ajax( 
        { 
            type: "POST", 
            url: "login.php", 
            data: $("#signin").serialize(),
            dataType: "json",
            cache: false,
            success: function(data, textStatus) {
                if (data.redirect) {
                    window.location.replace(data.redirect);
                }
                else {
                    $('#some').fadeOut(200);
                    $('#some2').fadeIn(200);
                    $("#some3").html(data.form);
                    $("#some").delay(2000).fadeOut(200);
                    $('#some2').delay(2800).fadeIn(300);
                }
            }           
        }); 
```

现在，只要您单击“登录”按钮，就会发生 ajax 请求。现在的问题是，如果您多次按下按钮，else case 将执行多次，这将导致#some、#some2 和#some3 淡出并多次出现。那么我如何检查请求是否已经发送（而不必在我的数据库中写入一些东西）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:23:54.107

您必须在全局范围内存储一个布尔值，例如一个存储在窗口对象上的布尔值：

```
if (!window.isClicked) {
    window.isClicked = true;
    ...Do your ajax call here        
} 
```

记住要始终恢复 window.isClicked 的值，而不仅仅是在 ajax() 的成功回调中：

```
var jqxhr = $.ajax( ... )
.done(function() {  })
.fail(function() {  })
.always(function() { window.isClicked = false }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:23:26.313

从[这里](https://stackoverflow.com/a/4063651/337294)：

您可以使用[.one()](http://api.jquery.com/one/)方法并在 ajax 回调中再次设置它。

```
function doAjax(){
    // Your Ajax call.
    $.ajax({..., complete: function() {
        // Ajax call done, re-enabling the button/link
        $("#buttonId").one('click', doAjax);
    }, ...});
}

$("#buttonId").one('click', doAjax); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:20:03.543

在登录时制作布尔标志，例如，`login_in_process`检查这个标志的`true`值。并在每次点击时检查此标志，如果它`true`然后返回空。在成功和错误回调中将其设置为`false`状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T16:21:20.360

你可以使用一个布尔值来记录它是否被点击：

```
var loginClicked = false;

$('input_button_element').click(function(){
  if (!loginClicked) {
    loginClicked = true;
    // your js here - you may want to add some visual feedback to the user also
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T16:21:21.333

你可以制作一个全局变量

```
var loginClick = false; 
```

在您的方法中，您首先检查该值

```
if (!loginClick) {
  loginClick = true;
  //your ajax code;
} 
```

# c - Vim - 显示数据类型

> ID：10452523
> 
> 赞同：11
> 
> 时间：2012-05-04T16:17:29.337
> 
> 标签：c, vim, ide

我通常在 Vim 中编写大部分 C 项目。我对通过 Ctags/Cscope 进行导航、搜索和替换以及索引感到满意。

如果可能的话，我希望拥有的一个功能是键映射，它将在屏幕上的光标下显示变量的数据类型。

例如，如果我的光标在一个变量上，“test123”（即：int test123 = 0）有没有办法在 Vim 的另一个选项卡中显示变量的类型（int）和其他一些细节？

此外，是否有类似的东西可以对结构变量执行相同的操作，并在描述性选项卡中显示其所有成员的列表以及类型（即：结构）？

我还注意到，有时在编码时，我在 Vim 顶部有一个标题为“[Scratch][Preview]”的选项卡，似乎满足了这个要求，但我不知道是什么触发了它（搜索和 Ctag 搜索不' t似乎触发它）。它看起来像这样：

```
name: myStruct::instanceOfStrct|  2 cmd: /^   int instanceOfStrct;$/
.. (up a dir)                  |  3 kind: m
</code/test/test.c             |  4 struct:   myStruct
|+config/                      |  5 access:   public
|+lib/                         |  6 filename: /code/test/test.c 
```

我认为这在某种程度上已经存在于 Vim 中，但我不知道如何使用它。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:34:10.890

I do not know of any plugin that does what you want, however it should be quite possible using [libclang](http://clang.llvm.org/doxygen/group__CINDEX.html). There is a [fork of clang_complete](http://blog.wuwon.id.au/2011/10/vim-plugin-for-navigating-c-with.html) that adds 'go to definition' functionality which is close to what you want. However development on that plugin seems to have stagnated.

Also the scratch buffer appears when doing autocompletion to give more information about a specific completion. It can be enabled and disabled using the [completeopt](http://vimdoc.sourceforge.net/htmldoc/options.html#%27completeopt%27) setting.

# excel - 将不同版本的人名识别为同一个人

> ID：10452525
> 
> 赞同：1
> 
> 时间：2012-05-04T16:17:35.217
> 
> 标签：excel, excel-formula, string-matching

我在电子表格的 A 列中有*同一个人的以下信息：*

```
ALAN K HURTZ
ALAN K HURTZ, ATTY
ALAN K. HURTZ
ALAN K. HURTZ, ATTY
ALAN K. HURTZ, ATTY.
ALAN HURTZ
ALAN HURTZ NDER
ALAN HURTZ ORPD
ALAN HURTZ, ATTY
ALAN HURTZ, ATTY.
ALAN HURTZ, ESQ
ALAN HURTZ, ESQ.
ALAN P. HURTZ, ATTY. 
```

在另一个电子表格中，我有这一行：

```
A           B         C         D       E        F

Hurtz       Alan      K.        ALIAS   91065    1451894 
```

我需要能够`1451894`为每条记录添加到 sheet1 列 B 这个值：（来自 sheet2 的列 F）。我对 VLOOKUP 或 MATCH 没有任何运气。

关于如何比较这些值的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T05:16:13.053

此挑战不适用于 Excel，部分原因是`SEARCH`并且`FIND`只能从左到右工作并且只能定位第一个实例。但是，您不能希望从任何自动化解决方案中获得完美的结果，并且可能准备接受一个相对简单的近似值 - 即您可以选择在编码上花费多少精力而不是人工审查.

首先，我建议从您的第二张工作表创建一个查找表，其中 first_name、initial、last_name 和 first_name、last_name 都指向您在 ColumnF 中的值。在第一种情况下，您可能希望将“inc Initial”之类的内容连接到您的 ColumnF 值，以指示比不匹配初始值更接近的匹配。

然后我建议将第一张工作表的 ColumnA 复制到 ColumnB 并从 ColumnB 中删除 ESQ（至少对于未启动 ESQ 的姓氏！）。在美国，大约有 40,000 人的姓氏以“Esq”开头，但与放弃能够“忽略”Esquires 的便利相比，将这些作为单独的问题处理可能更容易。

我建议分别在 ColumnsC:N 中输入以下内容（假设 Row1 是数据标签）：`=FIND(" ",B2)` `=IF(ISERROR(FIND(",",B2)),0,FIND(",",B2))` `=LEN(B2)` `=LEFT(B2,C2)` `=IF(C2>0,MID(B2,C2+1,E2-C2+1),0)` `=LEFT(G2,1)` `=IF(ISERROR(FIND(" ",G2)),0,FIND(" ",G2))` `=MID(G2,I2+1,E2-C2)` `=IF(ISERROR(FIND(",",J2)),IF(ISERROR(FIND(".",J2)),0,FIND(".",J2)),FIND(",",J2))` `=IF(K2=0,J2,LEFT(J2,K2-1))` `=IF(I2>0,F2&H2&" "&L2,F2&L2)` `=VLOOKUP(M2,array,2,FALSE)`其中 'array' 是 Sheet2 中的查找表。

在您的 13 个样本中，应该给您 8 个“匹配”，其中 5 个包括中间名首字母的匹配。如果不够好，那么只需继续在右侧的列中添加更多公式，直到达到您的权衡点（例如，尽管您的第 13 个示例是上述 5 个不匹配的示例之一，但如果在单独的列中它会这样做您没有连接“P” - 事实上它在其他列中匹配表明它不像其他 8 个那样匹配）。你可以像对待 ESQ 一样对待 ATTY，尽管在美国有超过 100,000 人使用这个姓氏。

或者，您可以提供赏金或尝试 freelancer.com，我希望您会发现很多人愿意为一小笔钱提供代码，这些代码不仅更具选择性，而且可能会给您一个“分数”来表明如何可能是任何“匹配”。

# c - 外部变量声明和定义

> ID：10452526
> 
> 赞同：1
> 
> 时间：2012-05-04T16:17:42.703
> 
> 标签：c, variables, external, declaration, definition

a) 外部变量的定义与局部变量的定义相同，即`int i=2;`（仅在所有函数之外）。但为什么`extern int i=2;`定义太有效了？不是`extern`只用在其他文件的变量声明中吗？

b) 文件 1

```
 #include<stdio.h>
  int i=3;
  int main()
  {
      printf("%d",i);
      fn();
  } 
```

文件2

```
 int i;  //  although the declaration should be: extern int i; So, why is this working?
  void fn()
  {
      printf("%d",i);
  } 
```

输出：两种情况下均为 3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:20:52.223

由于历史原因，确定链接以及声明何时提供定义的规则有点混乱。

对于您的特定示例，在文件范围内

```
extern int i = 2; 
```

和

```
int i = 2; 
```

是等效的外部定义，即`extern`如果您提供初始化程序，则它是可选的。

但是，如果您不提供初始化程序，`extern`则*不是*可选的：

```
int i; 
```

是一个带有外部链接的*暂定定义*，它变成一个外部定义等价于

```
int i = 0; 
```

如果翻译单元不包含具有显式初始化程序的另一个定义。

这不同于

```
extern int i; 
```

这从来都不是一个定义。如果已经有另一个可见的相同标识符的声明，那么变量将从那里获得它的链接；如果这是第一个声明，则变量将具有外部链接。

这意味着在您的第二个示例中， file1 和 file2 都提供了 的外部定义`i`，这是未定义的行为，并且链接器可以自由选择它最喜欢的定义（它也可能试图让恶魔飞出你的鼻子）。C 有一个共同的扩展（参见 C99 附件 J.5.11 和[这个问题](https://stackoverflow.com/questions/1490693/tentative-definitions-in-c99-and-linking)），这使得这个特殊情况得到了很好的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:29:12.447

在 C 中，`extern`带有初始化的 an 会导致分配一个变量。也就是说，该声明将被视为定义声明。这与更常见的`extern`.

C标准说：

> **6.9.2 外部对象定义**
> 
> ......
> 
> 如果对象标识符的声明具有文件范围和初始化程序，则该声明是标识符的外部定义。

至于您问题的第二部分，您`int i`在文件范围内的声明具有外部链接。如果你想给它内部链接，你需要声明它`static int i`。C标准说：

> **6.2.2 标识符的链接**
> 
> ……
> 
> 如果对象标识符的声明具有文件范围且没有存储类说明符，则其链接是外部的。

# emacs - 使一个键表现为另一个键

> ID：10452532
> 
> 赞同：15
> 
> 时间：2012-05-04T16:18:00.337
> 
> 标签：emacs, keyboard-shortcuts, elisp

我希望某些键和组合键在 Emacs 中表现得像其他键或组合键。例如，我想作为涉及它的每个可能组合`F5`的替代品，或者作为. 是否可以在不手动重新绑定所有此类组合键的情况下做到这一点？`C-c``C-S-``C-`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T17:02:20.617

您所指的键称为“前缀键”。前缀键有自己的键映射，因此要使另一个键的行为相同，您需要将其分配给相同的键映射。对于 control-c，您使用`mode-specific-map`：

```
(global-set-key (kbd "<f5>") mode-specific-map) 
```

控件本身不是前缀键，或者根本不是键，因为它不会*向 Emacs* [1] 发送按键，直到您按下另一个键。我不确定如何在 Emacs 中将 CS- 重新映射为 C-。您可以使用 xmodmap 在系统范围内执行此操作，但这可能不是您想要的。

[1] 控制键（和 shift、alt）确实会向操作系统发送按键，但 Emacs 不会“看到”这一点，除非同时按下另一个键

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T17:09:06.690

我更喜欢

```
(define-key key-translation-map [f5] (kbd "\C-c")) 
```

这是一个[很好的资源](http://xahlee.org/emacs/emacs_key-translation-map.html)。

总结上面给出的链接： global-set-key 的缺点是，当你定义一个组合键来输入一个符号时，它在 isearch 中不起作用。

key-translation-map 也有问题。想象一下，您定义了一个符号`|`来执行命令并`C-|`输入符号`|`，按下`C-|`将执行命令。

# javascript - 是否可以临时登录 Facebook 以共享链接？

> ID：10452534
> 
> 赞同：0
> 
> 时间：2012-05-04T16:18:09.550
> 
> 标签：javascript, facebook, ipad, sharing

信息亭的 ipad 将包含一个信息页面，客户希望访问者能够在他们的 Facebook 上分享该信息页面。

我们计划打开一个模式弹出窗口，让用户登录共享，但我们无法保证用户会退出。

有什么方法可以进行 [登录--> 分享--> 注销]，而无需用户单击注销？即使他们最终没有分享，我们也需要在他们关闭分享模式后退出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:20:04.800

尝试使用：

```
FB.logout(function(){
    /* logout callback */
}); 
```

[https://developers.facebook.com/docs/reference/javascript/FB.logout/](https://developers.facebook.com/docs/reference/javascript/FB.logout/)

# java - 在摇摆的JPanel屏幕上失去焦点后，屏幕不显示内容

> ID：10452536
> 
> 赞同：3
> 
> 时间：2012-05-04T16:18:19.773
> 
> 标签：java, swing, jpanel, jtabbedpane

我正在使用 JTabbedPane 和 JPanel 在一个选项卡上显示 JTable，在另一个选项卡上显示文本、下拉菜单和 jbutton。

第一次它工作正常，但如果我最小化或切换屏幕到其他应用程序并返回到我的应用程序，它会正确显示数据，但 JTabbedPane 中的选项卡更改存在严重问题。现在选项卡屏幕变为蓝色并且不显示数据。（我希望数据在那里，但它不是重新绘制或刷新完整的窗口）。

现在在蓝屏的情况下，我执行相同的程序并更改 JTabbedPane 中的选项卡，它显示正确的数据。

我使用了重绘，但它不起作用。

需要帮助才能正确刷新窗口或选项卡。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T11:43:28.080

确保您正在通过 de Event Dispatch Thread 对 Swing 组件进行所有修改（包括更改模型中的数据或手动切换选项卡）。Swing 允许开发人员忽略线程安全，但这会产生未定义的行为。

这是一个修改 JComboBox 模型内容的示例。

```
final DefaultComboBoxModel model = (DefaultComboBoxModel) comboBox.getModel();
EventQueue.invokeLater(new Runnable(){
    public void run(){
        // Add all Swing component modification code here..
        // The line of code below is but an example of what you could do
        model.addElement("String element");
    }
}); 
```

# objective-c - 返回的 HTTPS 数据未保存

> ID：10452543
> 
> 赞同：0
> 
> 时间：2012-05-04T16:18:48.400
> 
> 标签：objective-c, xcode

我设置了一个名为 WebCalls 的对象类。在本课程中，我进行了 Web 调用并从 HTTPS 服务器返回了一些 JSON。现在这些方法完美运行，我已经测试过并且数据返回正常。但是我的问题是，我无法访问类外返回的数据。

检索数据的代码如下

界面

```
@interface WebCall : NSObject{

    NSString *phoneNumber;
    NSString *jsonData;
}
@property (nonatomic, retain) NSMutableData *responseData;
@property (nonatomic, retain) NSString *jsonData;

-(void) getData: (NSString *) link;

@end

Implementation

@implementation WebCall

@synthesize jsonData;
@synthesize responseData;

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
  [responseData setLength:0];
}   

- (BOOL)connection:(NSURLConnection *)connection canAuthenticateAgainstProtectionSpace:(NSURLProtectionSpace *)protectionSpace {
    return [protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust];
}

- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {

    [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];

    [challenge.sender continueWithoutCredentialForAuthenticationChallenge:challenge];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {

    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    self.responseData = nil;
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

       NSString *s = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 
    jsonData = s;

}

-(void) getData: (NSString *) link{

        jsonData = [[NSString alloc] init];
self.responseData = [NSMutableData data];
    NSURL * url = [NSURL URLWithString:link];
    NSMutableURLRequest * request = [NSMutableURLRequest requestWithURL:url];
    [request addValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPMethod:@"GET"];
    [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:YES];

}

@end 
```

在接口类中，我有一个名为 jsonData 的字符串。我使用属性和综合来获取和设置它。所以在我进行网络调用后，我将数据分配给 jsonData，我应该能够导入网络调用类，使用 getInfo 方法，返回 jsonData 然后使用

```
WebCall *wc = [[WebCall alloc] init];
[wc getData:url];
NSLog(@"%@", [c jsonData]); 
```

然而，这只是打印出空值。然而，如果我在收到数据后在 Webcall 类中打印出字符串，它会打印得很好。谁能告诉我我做错了什么？

提前致谢

编辑：更新了完整的实现

我也无法访问方法之外的字符串。我将代码复制到另一个类，并尝试分配 JSON 字符串，然后在正文中再次调用它，它再次出现 null。看来我只能用那种连接方法打印出来。然后似乎清除了字符串

编辑：我试过的

```
[wc setWebCallDidFinish:^(NSString * json, NSString *test){

    NSLog(@"%@", json);

}];
[wc getData:@"12345"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:57:57.713

Adam jsonData 是空字符串的原因是因为 [[NSURLConnection alloc]initWithRequest:request delegate:self startImmediately:YES]; 异步运行，这意味着在一个新线程上并且它不会阻塞。这意味着当您调用 [wc getData:url]; 然后立即调用 NSLog(@"%@", [wc jsonData]); http 请求尚未完成，并且 - (void)connectionDidFinishLoading:(NSURLConnection *)connection 委托函数尚未在您的 WebCall 中调用。

有关详细说明，请阅读此[iOs 并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)。本质上，您需要向 WebCall 添加一个通知程序，以便它可以通知生成它的对象请求已完成加载。我会使用这样的块。

```
 @interface WebCall : NSObject{

    NSString *phoneNumber;
    NSString *jsonData;
    void(^webCallDidFinish)(NSString *jsonData, id otherRandomVar);
}
@property (nonatomic, retain) NSMutableData *responseData;
@property (nonatomic, retain) NSString *jsonData;

-(void) getData: (NSString *) link;
-(void)setWebCallDidFinish:(void (^)(NSString *, id))wcdf;

@end

Implementation

@implementation WebCall

@synthesize jsonData;
@synthesize responseData;

-(void)setWebCallDidFinish:(void (^)(NSString *,id))wcdf{
    webCallDidFinish = [wcdf copy];
}
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

       NSString *s = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding]; 
    jsonData = s;
    webCallDidFinish(jsonData, @"any other object");

}
//all of your other code here 

```

然后在调用代码中如下

```
 WebCall *wc = [[WebCall alloc] init];
[wc setWebCallDidFinish:^(NSString * json, id randomSecondVar) {
    NSLog(@"%@",json);
}];
[wc getData:url]; 

```

将会发生的是您提供给 setWebCallDidFinish 的代码块将在 jsonData 加载后被调用。您也可以使用委托模式来完成此操作。请注意，在加载此异步请求时，您应该向用户提供某种指示符。

# javascript - 执行 location.reload() 时的旋转轮；

> ID：10452544
> 
> 赞同：1
> 
> 时间：2012-05-04T16:18:52.083
> 
> 标签：javascript, jquery, html

我在我的 Javascript 函数中做一些事情，然后我必须使用刷新页面`location.reload();`

jQuery有没有一种简单的方法来显示从页面开始刷新到页面加载的位置的旋转轮？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:24:57.487

虽然可能有一种解决方案可以将`.reload()`调用信息包装在您自己的函数中并在它之前显示微调器，但我严重怀疑其有效性。一旦您发出导航请求，您的浏览器就会开始杀死加载的资源（这也意味着图像），这就是所有 GIF 将停止动画的时候。好吧，也许不是瞬间的，但很快就会破坏效果......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:24:25.990

如果您需要避免使用 Ajax，我的方法如下

*   只需在调用之前将[动画 gif 显示为图像](http://ajaxload.info/)`location.reload();`

*   始终显示微调器图像（`<body>`标签后的第一项，并在加载时将其隐藏（window.onload / jQuery [ready](http://api.jquery.com/ready/)）

虽然会有一些闪烁...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T09:48:30.900

谢谢@Jovan Perovic，您为我找到了解决方案。load() 对我来说似乎非常有用。再次感谢

# jsf - JSF-ViewParameter 的名称可以是 EL 表达式吗？

> ID：10452546
> 
> 赞同：2
> 
> 时间：2012-05-04T16:19:00.880
> 
> 标签：jsf, java-ee-6, el, myfaces

可以写这样的东西吗？

```
<f:metadata>
    <f:viewParam name="#{constantsBean.viewParameterNameForIds}" value="#{displayBean.technicalId}" />
</f:metadata> 
```

我总是收到 myfaces 错误，我认为它来自视图参数名称中的 el 表达式。

编辑：完整的堆栈跟踪是：

```
java.lang.NullpointerException
at org.apache.myfaces.util.AbstractAttributeMap.get(AbstractAttributeMap.java:94)
at javax.faces.component.UIViewParameter.decode(UIViewParameter.java:78)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1176)
at javax.faces.component.UIInput.processDecodes(UIInput.java:178)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1170)
at javax.faces.component.UIComponentBase.processDecodes(UIComponentBase.java:1170)
at javax.faces.component.UIViewRoot._processDecodesDefault(UIViewRoot.java:1316)
at javax.faces.component.UIViewRoot.access$400(UIViewRoot.java:75)
at javax.faces.component.UIViewRoot$ApplyRequestValuesPhaseProcessor.process(UIViewRoot.java:1379)
at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1282)
at javax.faces.component.UIViewRoot.processDecodes(UIViewRoot.java:718)
at org.apache.myfaces.lifecycle.ApplyRequestValuesExecutor.execute(ApplyRequestValuesExecutor.java:34)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.execute(CodiLifecycleWrapper.java:95)
at org.apache.myfaces.extensions.validator.core.startup.ExtValLifecycleWrapper.execute(ExtValLifecycleWrapper.java:61)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1147)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:722)
at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:449)
at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:178)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.invokeTarget(WebAppFilterChain.java:125)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:92)
at gid.common.technical.filter.InboundProcessingFilter.doFilter(InboundProcessingFilter.java:46)
at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:192)
at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:89)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:919)
at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:1016)
at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:87)
at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:883)
at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1659)
at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:195)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1648) 
```

顺便提一句。我正在使用随 WebSphere 8、Myfaces Codi 和 ExtVal 一起提供的 MyFaces。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:31:22.650

该[`<f:viewParam>`文档](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/viewParam.html)`name`对属性进行了以下说明：

```
Name | Required | Request-Time | Type
-----+----------+--------------+-------------------------------------------------
name | true     | false        | javax.el.ValueExpression 
     |          |              | (must evaluate to java.lang.String) 
```

它说`javax.el.ValueExpression`，不是`java.lang.String`（就像你在`id`属性上看到的那样，它确实不接受值表达式）。所以，它确实支持EL。

我不使用 MyFaces，但我只是在 Mojarra 上进行了测试，它对我有用。我不确定您到底得到了什么错误，因为您似乎出于某种原因将其视为无关信息，因此在您的问题中没有提及。错误信息即通常包含问题的答案。如果您发布完整的错误消息，那么我们可能能够用外行的方式解释该消息，以便您能够*理解*错误，因此解决方案将变得显而易见。例如，它可能有完全不同的原因，甚至可能是 MyFaces 中的错误。

# c# - 如何设置任务在后台运行？

> ID：10452550
> 
> 赞同：0
> 
> 时间：2012-05-04T16:19:19.977
> 
> 标签：c#, asp.net, parallel-processing, scheduler, task

我有一个用 c# .net 4.0 编写的 Web 应用程序。它连接到 Oracle 数据库以执行 CRUD 操作。

我需要编写一个后台类型的任务，它以预定义的时间间隔轮询数据库以检查它是否已启动。如果它关闭，则设置内存中的属性，以便不再向数据库发出请求。一旦数据库再次可用，任务将继续运行并更改属性。

我想知道在我的应用程序中构建此类的最佳方法是什么，我将如何设置后台任务以运行等或对此类实施的任何建议？我不希望它占用服务器上的资源，因此它需要在后台运行而不是资源密集型。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:50:24.450

If you must do this I would suggest writing a Windows Service, but have it modify a config file setting that your web application checks. I think having both applications looking at the same config file is the most simple solution in this case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:27:38.563

Windows 服务是后台任务的明显答案。基本操作非常简单 - 只需通过选择 Windows 服务作为项目类型来创建一个新项目，然后从那里开始。

在 Windows 服务中创建一个类的实例并在其中创建一个计时器 - 当计时器触发时运行您的定期任务

# javascript - 当我在 Javascript 中加载相同的声音 n 次时，浏览器是否会从服务器获取声音，然后将其复制到 n 个不同的对象？

> ID：10452558
> 
> 赞同：0
> 
> 时间：2012-05-04T16:20:01.787
> 
> 标签：javascript, html, browser, loading

我使用 Javascript。例如：

```
sound = [];

for (var i = 0; i < 20; i ++)
    sound[i] = new Audio("source.wav"); 
```

声音实际上会从服务器检索 20 次，还是只检索一次？

具体来说，我说的是 Google Chrome、Opera、Safari、Opera 和 IE。所有主流的、更大的、仍然活跃的浏览器。我问是因为加载相同声音的多个版本是我游戏中非常重要的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:21:03.650

取决于浏览器。聪明的只会使用缓存...愚蠢的不会

# asp.net - 用户在 AD 中更改了用户 ID（已结婚），但旧名称仍显示在 asp.net 应用程序中

> ID：10452563
> 
> 赞同：0
> 
> 时间：2012-05-04T16:20:19.713
> 
> 标签：asp.net, authentication, active-directory

我有一个用户结婚并将 id 从 MJones 更改为 MSmith，但是 MJones 仍然显示在我的应用程序的欢迎页面上。我使用 Context.User.Identity.Name 来获取用户 ID。AD 团队表示它已更改，仅用于 Exchange 的旧名称。我已经在 IE 中获得了她清晰的 cookie 和临时文件以及表单数据。关于为什么会发生这种情况以及我能做些什么来解决的任何想法？

哦，我的应用程序使用 Windows 身份验证来确保安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:00:37.393

她的登录 ID 是否真的改变了，或者广告人员只是改变了帐户的名称。登录帐户是一个单独的东西 - WindowsIdentity 上的 Name 属性是帐户名称，而不是用户的名字/姓氏。

# ruby - 类定义/范围中的局部变量

> ID：10452566
> 
> 赞同：7
> 
> 时间：2012-05-04T16:20:36.953
> 
> 标签：ruby, scope

我的印象是 Ruby 中的类定义可以重新打开：

```
class C
  def x
    puts 'x'
  end
end

class C
  def y
    puts 'y'
  end
end 
```

这按预期工作并`y`添加到原始类定义中。

我很困惑为什么以下代码不能按预期工作：

```
class D
  x = 12
end

class D
  puts x
end 
```

这将导致`NameError`异常。为什么重新打开课程时会启动新的本地范围？这似乎有点违反直觉。扩展类时，有什么方法可以继续以前的本地范围？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T16:44:27.073

**局部变量不与*对象*相关联，它们与*范围*相关联。**

局部变量是词法范围的。您正在尝试做的事情并不比以下更有效：

```
def foo
  x = :hack if false  # Ensure that x is a local variable
  p x if $set         # Won't be called the first time through
  $set = x = 42       # Set the local variable and a global flag
  p :done
end

foo                   #=> :done 

foo                   #=> nil (x does not have the value from before)
                      #=> done 
```

在上面，它是相同的方法，在同一个对象上，两次都被执行。`self`不变。但是，局部变量在调用之间被清除。

重新打开类就像再次调用一个方法：你在同一个`self`范围内，但你正在开始一个新的本地上下文。当您使用 关闭`class D`块时`end`，您的局部变量将被丢弃（除非它们被[关闭](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T16:38:11.600

在 ruby​​ 中，局部变量只能在它们定义的范围内访问。但是，`class`关键字会导致一个*全新的*范围。

```
class D
  # One scope
  x = 12
end

class D
  # Another scope
  puts x
end 
```

因此，您无法访问第一`class`部分中定义的局部变量，因为当您离开第一个作用域时，其中的局部变量将被销毁，并且内存被垃圾回收释放。

例如，这也是如此`def`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:46:54.170

简单的解决方案是将*x*设为[类实例变量](https://stackoverflow.com/questions/2084490/ruby-class-variables)。当然，这并不能回答您的范围问题。我相信*x*不在重新打开的类的[范围内](http://www.techotopia.com/index.php/Ruby_Variable_Scope)（请参阅*Detecting the Scope of a Ruby Variable ）的原因是因为它的范围从一开始就不是**D*类的范围。*x*的范围在*D*类关闭时结束，因为*x*既不是实例变量也不是类变量。

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T17:08:28.050

这种行为之所以有意义，部分原因在于元编程能力。您可以使用一些*临时*变量来存储可用于命名新常量或引用方法名称的数据：

```
class A
  names, values = get_some_names_and_values()

  names.each_with_index do |name, idx|
    const_set name, value[idx]
  end
end 
```

或者，也许，你需要得到特征类......

```
class B
  eigenclass = class << self; self; end
  eigenclass.class_eval do
    ...
  end
end 
```

每次重新打开一个类时都有一个新的范围是有意义的，因为在 Ruby 中，您经常在类定义中编写代码，这是要执行的实际代码，*打开*一个类只是为`self`. 您不希望类的内容被这些变量污染，否则您将使用类实例变量：

```
class C
    @answer = 42
end

class C
  p @answer
end 
```

# window - XMonad - 如何让一个窗口出现在多个物理屏幕上？

> ID：10452567
> 
> 赞同：3
> 
> 时间：2012-05-04T16:20:37.187
> 
> 标签：window, screen, xmonad

正如标题所说，我需要在两个或多个屏幕上显示一个窗口。

我试过了`XMonad.Actions.CopyWindow`。但似乎虽然窗口被复制到正确的工作区，但它只显示在一个物理屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-16T17:47:48.983

据我了解这个问题，你根本不能。一个窗口只能看到一次。通过复制窗口，您可以使其可用于多个工作区，但它只会显示一次。如果您只有一个显示器，例如笔记本电脑的屏幕，则会产生窗口无处不在的错觉。更重要的是，如果您浮动它并因此保持位置固定。

但是，一个窗口一次只显示一次。

您可以将整个桌面镜像到所有显示器。如果您将笔记本电脑连接到投影仪，这可能是有道理的。然后两个物理显示器将显示相同的窗口。

# python - Django 允许 .gif 但不允许 .jpg 图片上传

> ID：10452569
> 
> 赞同：0
> 
> 时间：2012-05-04T16:20:44.307
> 
> 标签：python, django

我刚刚创建了一个简单的模型

```
class Ad(models.Model):
    image = models.ImageField(upload_to = 'ads/') 
```

我可以通过管理页面上传 .gif 文件...但是当我尝试上传 jpeg 文件时，我收到以下错误消息：

`Upload a valid image. The file you uploaded was either not an image or a corrupted image.`

这可能是什么原因造成的？我用各种 .jpg 文件对其进行了测试

# c++ - 获取二维数组中数字的平均值、最小值和最大值

> ID：10452572
> 
> 赞同：0
> 
> 时间：2012-05-04T16:21:00.877
> 
> 标签：c++, arrays, multidimensional-array

我在获取二维数组元素的最小值、最大值和平均值时遇到问题。

我有一个包含学生和成绩的二维数组。

我正在用 rand 生成成绩。例如，当我输入 2,2 时，它会将我打印出来

```
Courses : 01   02   Average   Min   Max
    ID   
    01     8   50     29
    02    74   59     29 
```

，我的平均函数取第一个平均值，而不取其他平均值。

这是我的代码；

```
int A[30][30];

int findAverage(int noOfStudents ,int noOfGrades ){

    float sum,average;

    for (int i = 0 ; i < noOfGrades ; i++) {
        for (int j = 0; j<noOfStudents; j++) {

        sum += A[i][j];

        }
        average = sum / noOfGrades;
       // cout << "   " << format(average);
        sum = 0;
        return format(average);

    } 
```

以及我如何使用它

```
int main() {

    int noOfCourses , noOfStudents;
    cin >> noOfCourses >> noOfStudents;
    cout << "Courses : " ;

    for (int i = 0; i < noOfCourses; i++) {
        if (i+1 >= 10) {

            cout << i+1 << "   ";
        }else{
            cout <<"0" << i+1 << "   ";

        }
    }

    cout << "Average   Min   Max";

    for(int i=0; i<noOfStudents; i++) {         //This loops on the rows.        

        for(int j=0; j<noOfCourses; j++) {     //This loops on the columns
            A[i][j] = genGrade(); 
        }
    }

    cout << "\n    ID   " << endl;

    for(int i=0; i<noOfStudents; i++) {  //This loops on the rows.

        if (i+1 >= 10) {

            cout <<"    " << i+1 << "   ";
        }else{
            cout <<"    0" << i+1 << "   ";

        }

        //cout <<"    0" << i+1 << "   ";

        for(int j=0; j<noOfCourses; j++) {  //This loops on the columns

            if (A[i][j] >= 10 && A[i][j] <=99) {

                cout <<" " << A[i][j]  << "  ";
            }
            if(A[i][j] < 10) {

                cout <<"  " << A[i][j] << "  ";
            }
            if (A[i][j] == 100) {

                cout << A[i][j] << "  ";
            }
        }
        cout <<"   "<<findAverage(noOfStudents,noOfCourses);
        cout << endl;
    }
} 
```

我究竟做错了什么 ？另外我怎样才能得到每个数组的最小值，最大值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:29:27.193

我强烈建议使用容器来完成这项任务。例如，您可以执行以下操作

```
typedef std::vector<float> grades;
std::vector<grades> student_grades;

//populate 

for(const grades& gr : student_grades) {
    float min, max, avg;
    std::tie(min, max)=std::minmax(gr.begin(), gr.end());
    avg=std::accumulate(gr.begin(), gr.end(), 0.0) / gr.size());
    std::cout << "Min" << min << " Max: " << max << " Avg: " << avg << std::endl;
} 
```

[http://en.cppreference.com/w/cpp/algorithm/minmax](http://en.cppreference.com/w/cpp/algorithm/minmax)

[http://en.cppreference.com/w/cpp/algorithm/accumulate](http://en.cppreference.com/w/cpp/algorithm/accumulate)

[http://en.cppreference.com/w/cpp/utility/tuple/tie](http://en.cppreference.com/w/cpp/utility/tuple/tie)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:27:02.067

对于初学者，您是从循环内部返回的：

```
for (int i = 0 ; i < noOfGrades ; i++) {
  for (int j = 0; j<noOfStudents; j++) {
    ...
  }
  ...
  return ...;
} 
```

你能看到外循环如何只执行一次吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:30:40.733

问题是在您的`findAverage`函数中，您在循环中有一个 return 语句，该语句循环遍历行。如果您想要一个非常简单的修复，请向`findAverage`函数添加另一个参数，以指示要计算哪一行的平均值。

```
int findAverage(int course ,int noOfGrades ){

    float sum,average;

    for (int j = 0; j<noOfStudents; j++) {

        sum += A[course][j];

    }
    average = sum / noOfGrades;
    return format(average);
 } 
```

并这样称呼它

```
cout <<"   "<<findAverage(i,noOfCourses); 
```

# heroku - Heroku CLI：如何通过自定义域引用应用程序？（文档中的示例不起作用）

> ID：10452578
> 
> 赞同：0
> 
> 时间：2012-05-04T16:21:05.793
> 
> 标签：heroku

Heroku 在 CLI 上的文档说这样做（[链接](https://devcenter.heroku.com/articles/using-the-cli#app_commands)）：

> 如果你有多个 heroku 远程或者想要在本地工作副本之外执行一个应用命令，你可以指定一个明确的应用名称、域或 git 远程，如下所示：

```
$ heroku info --app myapp
$ heroku info --app www.example.com
$ heroku info --remote staging 
```

但是，我无法让第二个工作。这就是我得到的：

```
$ heroku info --app foo
=== foo
[...]

$ heroku domains --app foo
Domain names for foo.herokuapp.com:
foo.example.com

$ heroku info --app foo.example.com
 !    Resource not found 
```

至少，文档似乎不正确。但是是否可以通过其他方式通过其自定义域之一引用应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:47:47.933

是的，我同意这一点——使用最新的 Heroku CLI，除了使用域名之外，所有方法都可以工作。如果其他方式对您有用，您是否有特殊原因要使用这种方式？

# javascript - Javascript FF 慢 Chrome/Safari FAST

> ID：10452580
> 
> 赞同：3
> 
> 时间：2012-05-04T16:21:08.433
> 
> 标签：javascript, jquery, optimization, raphael

这是一个有趣的难题，我有一个 javascript 数据即在 Safari/Chrome 中运行良好，甚至在 IE 中运行良好。但是Firefox真的很慢。我已经注意到似乎在减慢速度的代码部分。

变量统计是`var stats = [{"team":"IND","player":"Andrew Luck","position":"QB","round":1,"choice":1,"size":66}, ... ];`

这是完整的代码。问题区域在底部。有谁知道为什么 Firefox 在运行它时会出现问题？

```
(function($){
    $(document).ready(function() {
        var paper = Raphael("graph",390, 1600);

        var selectedteam;
        for (var i = 0 ; i <= 252; i++) {
            var s = stats[i].size*.3;
            stats[i].circles = paper.circle(stats[i].round*50-20, stats[i].choice*20, s*.75)
                .attr({
                        "fill": "RGB(" + (89*.3-s)*14 + ", " + s*8 + ", 100)",
                        "stroke": "RGB(255,255,255)"
                })
            stats[i].circles.player = stats[i].player;
            stats[i].circles.team = stats[i].team;
            stats[i].circles.position = stats[i].position;
            stats[i].circles.mouseout(function() {
                for (var lines in stats) {
                    stats[lines].circles.animate({"opacity": "1"}, 500);
                }
            });
            stats[i].circles.mouseover(function() {
                selectedteam = this.team;
                $('#error').empty().html("<div><p>" + this.player + ", " + this.position + "</p><p>" + this.team + "</p></div>");   
 //****THIS FOR LOOP IS REALLY REALLY SLOW IN FIREFOX*****
                for (var lines=0; lines <=252; lines++) {
                    stats[lines].circles.stop().animate({"opacity": ".1"}, 50);
                    if (selectedteam === stats[lines].team) {
                        stats[lines].circles.stop().animate({"opacity": "1"}, 50);
                    }
                }
            });

        }   
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:05:02.120

而不是 for 循环，在处理数组索引时，您应该使用[每个](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/every)javascript 的函数来迭代数组，或者为了避免兼容性问题，在创建数组时使用 jQuery 表达式评估（ $() 或 jQuery() ）包装它并使用[. each()](http://api.jquery.com/jQuery.each/) jQuery 的迭代方法。

尝试在你的 Firefox 中执行[这个测试](http://jsperf.com/jquery-each-vs-for-loop/91)，看看它是如何运行的。

**更新**

[在这里](http://jsperf.com/loops3/2)找到了更好的循环测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T19:55:14.523

不是“答案”，而是解决方案。我没有为 Raphael 对象的“不透明度”设置动画，而是尝试编辑其“填充不透明度”。这大大加快了速度。当我为“填充-不透明度”和“填充-描边”设置动画时，速度仍然有很大的提高。

我仍然不确定为什么动画不透明度更改需要这么多资源来执行。

感谢大家！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T17:01:57.660

我从未使用过 Raphael 库。但是，我看到可疑代码包含在`mouseover`处理程序中。

过去我遇到过问题，即相同的 DOM 事件在不同的浏览器中以不同的方式触发（或根本不触发）。

您是否考虑过代码看起来很慢的可能性，因为它以某种方式被多次调用？

我建议您尝试在页面中添加类似这样的内容：

```
<span id='counter'>0</span> 
```

然后写

```
var counter = parseInt($('#counter').val()),10);
counter++;
$('#counter').val(counter);
for (var lines=0; lines <=252; lines++) {
    stats[lines].circles.stop().animate({"opacity": ".1"}, 50);
    if (selectedteam === stats[lines].team) {
        stats[lines].circles.stop().animate({"opacity": "1"}, 50);
    }        
} 
```

在不同的浏览器中查看生成的页面，并观察计数器发生了什么。

我不能向你保证这将有助于找到问题，但这是我首先要尝试的。

# javascript - 验证 ExtJS CheckboxGroup 复选框

> ID：10452587
> 
> 赞同：2
> 
> 时间：2012-05-04T16:21:22.493
> 
> 标签：javascript, validation, extjs, checkbox, extjs4

使用 ExtJS 4，我有一个`Ext.form.CheckboxGroup`并且我想对这个复选框组进行验证，例如“仅在 1、2 或 3 个复选框选中时有效”，这可能是一组可能 10 个复选框。我可以设置一个现有的`allowBlank: false`配置选项，以确保 CheckboxGroup 至少选中一个复选框。我想获得基本相同的功能，但使用自定义验证器功能，以便我可以指定自己的标准。

我怎样才能做到这一点？

查看文档和代码，我没有看到一个明确的方法来做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:13:02.413

我建议在 config 对象中再使用一个属性来指定需要检查的复选框或复选框 id 数组。如果您希望验证就像一个触发器（启用/禁用），您可以在`change`事件处理程序中处理它。

如果您想使用带有错误消息的验证和/或使组件可重用，最好遵循上面的 sha 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:09:28.700

您可以尝试`Ext.form.CheckboxGroup`通过覆盖`validate()`方法来扩展标准，以便在选中一些复选框时返回 true。

我没有看到任何更标准的东西，但它不应该很复杂。

# tridion - SDL Tridion 2011 搜索使用哪些字段？

> ID：10452589
> 
> 赞同：5
> 
> 时间：2012-05-04T16:21:23.050
> 
> 标签：tridion

在使用 Tridion (SDL Tridion 2011) 中的搜索功能时，我从未取得过实际成功。我正在查看组件列表。我为这些组件的名称输入**了一些**文本，但搜索没有找到它。我必须使用组件的**确切名称**才能找到它。

它使用我的条件搜索哪些字段？

是否有我可以使用的通配符或设置使其成为“包含”查询？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T18:34:44.857

搜索索引器应索引每个组件的所有字段以及二进制文件（PDF、MS Word Docs 等）中的文本。我有一个正在运行的 SDL Tridion 2011 实例，并且可以确认它确实提供了二进制和正常组件内容的结果。

我不完全确定 Tridion 的新 SolR 版本的内部工作原理，但我想标题和全文是分开索引的。

可能是您的索引器实际上没有正常运行，我看到该服务似乎处于运行状态，但实际上并未处理搜索队列中的消息。尝试打开清除队列工具（通常位于“C:\Program Files (x86)\Tridion\bin\TcmPurgeQueue.exe”），查看搜索队列中是否有大量消息等待。如果有，可能是项目没有被正确处理，尝试点击刷新，看看数字是否下降。

对于通配符，您应该只能使用`'*'`. 我刚刚测试了将字符串放入组件字段中，`"Rampusplong"`并且可以确认搜索`"Rampusplong"`或返回我的结果，但是“Rampus”没有返回任何结果。`"Rampus*"``"*ampusplo*"`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T22:43:19.507

是的，`*`正如克里斯提到的那样，对于外卡。请参阅下面的一些保留字选项（来源：SDL 欢迎“了解 SDL Tridion”帮助页面）以尝试其他选项。

**标识符**（例如`tcm:19-123-8`）

**搜索运算符**

*   `AND`
*   `OR`
*   `NOT`
*   `IN`（例如“someword IN title”，其中 title 是组件的 XML）

**用“分隔的确切短语**（例如“Mad cookie”）

**通配符**

*   `*`对于通配符，多个字符（我有时在假定的完整匹配中需要这个）
*   `?`单人

**特殊字符** `+` `-` `!` `(` `)` `{` `}` `[` `]` `^` `"` `~` `*` `?` `:` `\` （帮助文件除了用双引号转义外没有多说）

**保留字**（用 \ 转义，不考虑大小写）

*   `CONTAINS`
*   `NEAR`
*   `SENTENCE`
*   `PARAGRAPH`
*   `PHRASE`
*   `IN`
*   `MATCHES`
*   `STARTS`
*   `SUBSTRING`
*   `ENDS`
*   `AND`
*   `OR`
*   `NOT`

您还可以通过单击高级搜索（搜索旁边的向下箭头）在多媒体以及元数据、模式和其他可见搜索选项中进行搜索。

至少在旧版本中（特别是 R5.3，可能是 2009 年），我已经看到常规创建之外的项目（通过 VBScript）跳过被索引。如果是这种情况，请重新索引，但不确定 2011 年。

# java - 如何用三个数组填充列表视图？

> ID：10452592
> 
> 赞同：-4
> 
> 时间：2012-05-04T16:21:27.803
> 
> 标签：java, android

我有三个 String[] 填充了 JSON 数据。所以我需要所有三个 String[] 的列表视图，例如： String[] 名称在顶部，然后是 String[] 地址，在底部 String[] 电话。我发现很少有关于自定义数组适配器的 tuts，但我不太了解它们。因此，重复一遍，我已经拥有 String[] 名称、String[] 地址和 String[] 电话中的所有数据，只需将它们放入正确的适配器中。谁能帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:24:11.353

我建议您将存储数据的方式更改为使用三个`String`字段定义的类的单个数组：`name`、`address`和`phone`。那么使用自定义适配器的教程会更容易适应（可以这么说）。您只需要为每一行定义一个自定义视图，并让您的适配器从（单个）数据数组中的相应条目填充视图。

# java - 随机答案的可能性

> ID：10452593
> 
> 赞同：0
> 
> 时间：2012-05-04T16:21:41.750
> 
> 标签：java, android, random

我在 Android 中为我的班级制作了一个相当可靠的测验游戏，其中从数组中挑选了 10 个随机问题。它现在的工作方式是用户在 EditText 字段中输入答案。我也很高兴我能够弄清楚如何使用简单的随机播放算法不得到重复的问题，因此向用户提出的每个问题都是独一无二的（我实际上为此感到非常自豪）。

理想情况下，我想让游戏成为多项选择，但我没时间了，我按上述方式提交了它。但我一直在考虑如何让游戏变得更好和用户友好，我认为 EditText 选择不是理想的 IMO。所以我一直在考虑这样重写它：

1.  随机选择一个问题；
2.  该问题将显示 4 个随机答案选项，其中一个是正确答案；
3.  我将使用 RadioButtons 和 RadioGroup 来选择答案；
4.  棘手的部分：我希望随机显示和排序答案选项，例如：
    *   问题 x 被选中，答案选项将按随机顺序 a、b、c、rightAnswer 显示；
    *   然后问题 y 被选中，答案选择将是 b, rightAnswer, c, a
    *   ETC...

所以我想知道是否有人可以为我指出如何实现这一目标的正确方向。我不是在要求完整的代码，只是在我可以阅读更多信息并帮助我弄清楚的地方。我似乎在 SO 中找到的只是获取随机问题的方法。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:28:27.377

创建一个数组来保存你的答案。然后从 0-[array.length] 中选择一个随机数，并将数组中的索引设置为正确答案。IE：

```
int[] answers = new int[4];
answers[0] = getRandomAnswer();
answers[1] = getRandomAnswer();
answers[2] = getRandomAnswer();
answers[3] = getRandomAnswer();

int correctIndex = Random.nextInt(0,4); // Maybe off by 1? I didn't compile
answers[correctIndex] = correctAnswer; 
```

现在你有一个包含 3 个随机答案和 1 个正确答案的数组。您需要确保 getRandomAnswer() 方法不会向您返回正确答案，或者此时检查您的数组是否有多个正确答案实例，如果它们存在，则删除除一个之外的所有实例。

您可以使用数组中的答案填充 RadioGroup，当用户选择组中的一个单选按钮时，您可以通过检查正确索引变量来了解用户是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:08:07.513

可能有更有效或更优雅的方法来专门设置 4 个随机位置，这是我的建议：

```
 int setPlace[4] = {0,0,0,0};

    setPlace[0] = Random.nextInt(3) + 1;

    for (loop = 1; loop<=3; Loop++)
 {
    do 
    {
    fix1 = Random.nextInt(3) + 1;
    if ((fix1!=setPlace[0])&&(fix1!=setPlace[1])&&(fix1!=setPlace[2])(fix1!=setPlace[3]))
    {
    setPlace[loop]=fix1;
    fix1=0;
    }
    }
    while{fix1!=0} 
} 
```

# regex - Vim - 反向搜索热键映射

> ID：10452594
> 
> 赞同：0
> 
> 时间：2012-05-04T16:21:43.177
> 
> 标签：regex, vim, ide, vi

再会，

我在 Vim 中发现了一个我无法解释原因的奇怪怪癖，所以我将尽我所能描述它。

如果一个单词在我正在编辑的文件中出现多次，我可以通过将光标移到该单词上并按下井号键（即：SHIFT+3 ==> #）来突出显示它的所有实例。然后，我可以通过点击“N”（即：SHIFT+n）导航到该单词的下一个出现位置，并通过点击“n”导航到上一个实例。

但是，如果我使用搜索命令（即：/int）执行一个单词（例如：“int”）的搜索，使用 'N' 向后搜索，'n' 向前搜索，与当我使用#键。有什么我做错了吗？我目前正在使用极简主义的 VIMRC。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:32:19.113

不，这是正确的。`/`向前、`?`向后搜索（类似地`*`向前和向后搜索 cword `#`）。并`n`在相同方向和`N`相反方向重做搜索。它与初始搜索方法有关。

# .net - 目标 .NET Framework beta v4.0.2 而不是版本 v4.0.3

> ID：10452596
> 
> 赞同：0
> 
> 时间：2012-05-04T16:21:52.413
> 
> 标签：.net, visual-studio-2010

由于一些不寻常的原因，我需要使用运行时库编译我的 vb.net 应用`v4.0.2`程序`v4.0.1`。使用 VS 2010 Ultimate，我的应用程序使用默认运行时 (v4.0.30319) 编译。

当我将目标框架设置为 4.0.2 时，我收到一条消息：

> 您必须安装 v4.0.3xxx .NET Framework

我知道这看起来有点奇怪，但我不会安装这个确切的版本。

如何为我的应用程序定位特定的框架版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:25:20.043

我认为您的意思是您要安装该框架的测试版。如果是这样的话，那就没有了。你不能。至少不合法。您的 Beta 版许可证在发布版本可用的那一刻即到期，并且您有一小段时间进行升级。

没有版本号为 4.0.1 或 4.0.2 的发布版本。

# ruby-on-rails - 无法为表单按钮的副本获取正确的 HAML 语法

> ID：10452598
> 
> 赞同：0
> 
> 时间：2012-05-04T16:22:05.383
> 
> 标签：ruby-on-rails, ruby, haml, yaml

我在表单中有一个按钮。它看起来像这样：

```
 .form-actions
    %buttons= f.submit t(:sign_up), :class => "cmply_btn btn", :disable_with => t(:form_disable) 
```

我想要做的是将按钮的副本更改为我的 YAML 设置中的内容。

我的 yaml 位于 config/locales/file_name.en.yml

如何将表单按钮更改为设置该文件的一些自定义文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:24:52.907

不完全确定，但您可以尝试以下方法：

1-遵循与此问题类似的模式：[Getting submit button label to be "Create model" instead of "Update model" inside form_for in rails](https://stackoverflow.com/questions/9169011/getting-submit-button-label-to-be-create-model-instead-of-update-model-insid)

2-使用字符串而不是符号进行翻译。使用 t("sign_up")

3-尝试将文件重命名为 en.yml 并将其放在单独的文件夹中（如果您有其他文件夹）

4-将 f.submit 移动到新行

```
%buttons
  = submit t("sign_up")... 
```

# c# - 在 Windows 窗体中将面板添加到 SplitContainer

> ID：10452600
> 
> 赞同：12
> 
> 时间：2012-05-04T16:22:11.010
> 
> 标签：c#, winforms, splitcontainer

我无法找到有关如何将面板添加到[SplitContainer](http://msdn.microsoft.com/en-us/library/h0w5ctby.aspx)的文档。我可以很好地创建 SplitContainer，但我不能将我编写的面板放入 splitcontainer 中。

我试过做

```
sc.Container.Add(myPanel);
sc.Container.Add(myOtherPanel); 
```

但`Container`始终为空。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-04T16:23:52.920

始终包含两个面板，`SplitContainer`您无法更改！（而且您不需要自己添加任何面板。）

`Panel1`您可以通过属性和访问这两个面板`Panel2`。

如果您需要更多面板，则可以嵌套多个`SplitContainers`.

* * *

**更新**

您无法替换现有面板。您可以做的是将您自己的控件放在现有的拆分容器面板上（并且您的控件也可以是 System.Windows.Forms.Panels 包含其他控件或用户定义的控件）：

```
sc.Panel1.Controls.Add(myPanel);
sc.Panel2.Controls.Add(myOtherPanel);

myPanel.Dock = DockStyle.Fill;
myOtherPanel.Dock = DockStyle.Fill; 
```

当然，如果您没有必须动态添加控件的场景，您也可以使用 Visual Studio 的表单设计器添加它们。如果您创建自己的控件，它们将自动出现在同一项目内的工具箱中，您只需将它们拖放到 SplitContainer 的面板上即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:28:56.080

SplitContainer 控件已经有两个名为 Panel1 和 Panel2 的面板。选择您要使用的面板：

```
sc.Panel1.Controls.Add(myPanel);
sc.Panel2.Controls.Add(myOtherPanel); 
```

# android - Android - 在简单视图的背景属性上使用 ImageView 的优势

> ID：10452601
> 
> 赞同：3
> 
> 时间：2012-05-04T16:22:14.263
> 
> 标签：android, view, imageview

我使用 Android 已经有一段时间了，大多数时候我使用视图对象的背景属性来引用我项目中的一些可绘制对象，主要是因为我向图像添加了一些内容或功能。

但是最近我正在做一个需要许多静态图像的项目，这些图像只是坐在那里而没有额外的功能，因此我使用的是 ImageView。

但是，我还没有完全理解使用 ImageView 的优势，只是因为 scaleType

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:14:23.473

背景就是背景，内容可以放在它上面。ImageView 是一个视图，因为它与内容一起存在。这是您决定使用哪一个的基础。

至于渲染效率：除了两者通用的draw部分，ImageView也是布局计算过程的一部分，所以在不需要的时候添加ImageView会增加布局计算的额外负担。这就是为什么，虽然您可以使用 ImageView 作为内容的背景，但您不想这样做。

现在，如果您在使用背景时错过了 scaleType 功能，请查看以下内容：[https ://groups.google.com/forum/?fromgroups#!topic/android-developers/HuF7pO4fovA](https://groups.google.com/forum/?fromgroups#!topic/android-developers/HuF7pO4fovA)

# javascript - 在javascript函数中保持变量活动的问题

> ID：10452604
> 
> 赞同：17
> 
> 时间：2012-05-04T16:22:23.650
> 
> 标签：javascript, function, variables, call

我想在函数中容纳一个变量。此变量将根据用户交互更改状态。例如：

```
function plan_state(current){
    if (current != ''){
        state = current;
    }
    else {
        return state;
    }
} 
```

当文件加载时我会打电话`plan_state('me')`，当某些事情发生时我可能会打电话`plan_state('loved')`。当我运行一个函数并想要检查当前状态时会出现问题：

```
alert(plan_state()); 
```

我`undefined`回来了，但值应该是“我”，因为我之前在文档加载时设置了这个值。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-04T16:34:57.303

该函数不是有状态的，因为状态变量是在函数内部声明的，因此仅在函数调用的生命周期内存在。一个简单的解决方案是在函数外部全局声明变量。这[很](http://www.javascripttoolbox.com/bestpractices/#namespace)[糟糕](https://stackoverflow.com/questions/2613310/ive-heard-global-variables-are-bad-what-alternative-solution-should-i-use) [很](http://snook.ca/archives/javascript/global_variable)[糟糕](https://stackoverflow.com/questions/5787351/what-is-so-bad-about-global-variables) 。

更好的方法是使用[模块模式](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)。如果您认真对待 javascript 开发，这是学习的基本模式。它通过内部（私有变量）启用状态，并公开许多用于更改或获取状态的方法或函数（如面向对象编程）

```
 var stateModule = (function () {
        var state; // Private Variable

        var pub = {};// public object - returned at end of module

        pub.changeState = function (newstate) {
            state = newstate;
        };

        pub.getState = function() {
            return state;
        }

        return pub; // expose externally
    }()); 
```

所以`stateModule.changeState("newstate");`设置状态

并`var theState = stateModule.getState();`获得状态

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:29:19.310

我认为您的变量范围太“低”；通过在函数内定义变量，无论是作为参数还是明确地作为 a `var`，它只能在函数内访问。为了实现您所追求的，您可以在函数范围之外以更全局的级别实现变量（实际上不推荐）。

但是，在重新阅读您的问题后，它有点误导。你不想回来`state`不管`current`吗？我想你可能会追求这样的事情：

```
var state;
function plan_state(current)
{
    if (current != '' && current != state)
    {
        state = current;
    }
    return state;
} 
```

替代对象结构：

```
function StateManager(state)
{
    this.state = state;

    this.getState = function(current)
    {
        if (current != '' && current != this.state)
        {
            this.state = current;
        }
        return this.state;
    }
}

// usage
var myStateManager = new StateManager("initial state here");
var theState = myStateManager.getState("some other state"); 
```

# android - 我的 GPS 总是返回 0 - 0 (HTC One X)

> ID：10452608
> 
> 赞同：0
> 
> 时间：2012-05-04T16:22:57.413
> 
> 标签：android, android-ndk

我尝试通过这种方式获取我的位置：

```
public void onCreate(Bundle savedInstanceState) {
   LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 2000, 5, mlocListener);
}

public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location loc) {
        latitude = loc.getLatitude();
        longitude = loc.getLongitude();
        Toast.makeText(getApplicationContext(), "Location found", Toast.LENGTH_SHORT ).show();
    }   

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS disabled", Toast.LENGTH_SHORT ).show();
    }

    @Override
    public void onProviderEnabled(String provider) {}

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {}

} 
```

这是我的权限：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_GPS" /> 
```

当我尝试使用我的 Eclipse 模拟器时，效果很好，Toast 出现了。但是在我的 HTC One X 上，它从来没有出现过……你知道为什么吗？谢谢。

# ruby-on-rails - nil 的未定义方法“valid_options”：具有 simple_form 和 Mongoid 的 NilClass

> ID：10452615
> 
> 赞同：2
> 
> 时间：2012-05-04T16:23:20.290
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongoid, simple-form

我有两个模型，类别和帖子。

**类别.rb**

```
class Category
include Mongoid::Document

field :title, :type => String
has_many :posts, :autosave => true, dependent: :destroy

end 
```

**Post.rb**

```
class Post
include Mongoid::Document

field :title, :type => String
belongs_to :category
end 
```

我正在使用**[simple_form gem](https://github.com/plataformatec/simple_form)**

如果我在我的帖子表格中写下一个：

```
<%= simple_form_for(@post) do |f| %>
 <%= f.collection_select :category, Category.all, :id, :title, :prompt => "Choose a Category"%>
 <%= f.input :title %>
 <%= f.button :submit %>
<% end %> 
```

该表格确实可以正常工作:)。

但如果我使用 simple_form 格式的下一个表单：

```
<%= simple_form_for(@post) do |f| %>
  <%= f.association :category, :prompt => "Choose a Category" %>
  <%= f.input :title %>
  <%= f.button :submit %>
 <% end %> 
```

我得到下一个错误：

```
Completed 500 Internal Server Error in 23ms
ActionView::Template::Error (undefined method `valid_options' for nil:NilClass): 
```

**我该如何解决？谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T22:26:51.587

问题已解决。谢谢卡洛斯安东尼奥达席尔瓦：D。

您可以在[http://groups.google.com/group/plataformatec-simpleform/browse_thread/thread/f384f0445af8468e](http://groups.google.com/group/plataformatec-simpleform/browse_thread/thread/f384f0445af8468e)或：

```
<%= f.input :category, :collection => Category.all, :prompt => "Choose a Category" %> 
```

谢谢！

# python - 在Python中组合未知长度但宽度相同的CSV文件的列

> ID：10452617
> 
> 赞同：0
> 
> 时间：2012-05-04T16:23:29.453
> 
> 标签：python, csv

我有未知数量的输入 csv 文件看起来或多或少像这样（设置宽度不同长度）

```
Header1, Header2, Header3, Header4
1,2,3,4
11,22,33,44
1,2,3,4 
```

输出看起来像这样。

```
Header1,Header3, ,Header1,Header3, ,...
1,3, ,1,3, ,... 
... 
```

目前我可以将所有输入文件读入字符串，并且我知道如何读取每个文件的第一行并以所需的格式打印它，但我被困在如何制作循环以转到每个文件的下一行和打印该数据。由于文件在一个结束时的长度不同，我不知道如何处理它并放入空格作为占位符以保持格式。下面是我的代码。

```
csvs = []
hold = []
i=0         # was i=-1 to start, improved
for files in names:
    i=i+1
    csvs.append([i])
    hold.append([i])

#z=0
for z in range(i):
    # putting csv files into strings
    csvs[z] = csv.reader(open(names[z],'rb'), delimiter=',')

line = []    
#z=0
for z in range(i):
    hold[z]=csvs[z].next()
    line = line + [hold[z][0], hold[z][3], ' ']

print line
writefile.writerow(line) 
```

names 是保存 csv 文件路径的字符串。此外，我对此还很陌生，所以如果你看到一些我可以做得更好的地方，我会全神贯注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:53:13.447

假设您知道当某些文件比其他文件长时如何合并行。这是一种使迭代行和文件更容易的方法。

```
from itertools import izip_longest 
# http://docs.python.org/library/itertools.html#itertools.izip_longest

# get a list of open readers using a list comprehension
readers = [csv.reader(open(fname, "r")) for fname in list_of_filenames]

# open writer
output_csv = csv.writer(...)

for bunch_of_lines in izip_longest(*readers, fillvalue=['', '', '', '']):
  # Here bunch_of_lines is a tuple of lines read from each reader,
  # e.g. all first lines, all second lines, etc
  # When one file is past EOF but others aren't, you get fillvalue for its line.
  merged_row = []
  for line in bunch_of_lines:
      # if it's a real line, you have 4 items of data.
      # if the file is past EOF, the line is fillvalue from above
      #   which again is guaranteed to have 4 items of data, all empty strings.
      merged_row.extend([line[1], line[3]]) # put columns 1 and 3
  output_csv.writerow(merged_row) 
```

这段代码只有在最长的文件结束后才停止，循环只有5行代码。我想你会自己想出标题。

注意：在 Python 中，在您了解循环和列表推导的工作原理`range()`之后，您很少需要对列表进行整数索引访问。`for`在 Python 中，`for`是`foreach`在其他语言中的情况；它与索引无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:46:51.880

这并没有给出您在输出中显示的备用逗号，但是每次我们附加到数据时只需将一个额外的空白字段弹出到数据中，这并不难添加：

```
import csv

names=['test1.csv','test2.csv']
csvs = []
done = []
for name in names:
    csvs.append(csv.reader(open(name, 'rb')))
    done.append(False)

while not all(done):
    data = []
    for i, c in enumerate(csvs):
        if not done[i]:
            try:
                row = c.next()
            except StopIteration:
                done[i] = True
        if done[i]:
            data.append('')
            data.append('')
            # data.append('')  <-- here
        else:
            data.append(row[0])
            data.append(row[3])
            # data.append('')   <-- and here for extra commas
    if not all(done):
        print ','.join(data) 
```

此外，我不会明确关闭任何内容，如果这是长期运行过程的一部分，您应该这样做。

# google-maps-api-3 - 更改 Google Maps v3 MarkerClusterPlus 标题

> ID：10452618
> 
> 赞同：0
> 
> 时间：2012-05-04T16:23:36.890
> 
> 标签：google-maps-api-3, title, google-maps-markers, markerclusterer

我正在尝试动态设置群集图标的群集标题、翻转文本。我希望在翻转文本中使用集群计数/总数。

通过`console.log`我可以看到`title`已更改为`var txt`. 它也适用于`alert( txt )`. 集群的默认标题是`""`并且似乎没有得到更新，并且保持在默认值。

目前我正在将标题设置为`google.maps.event.addListener( markerClusterer, 'mouseover', function( cluster ) {})`.

我在想我的代码会继续执行，这可能是我看不到变化但我无法缩小范围的原因。

```
var latlng = new google.maps.LatLng( lat, lng );

        var qs      = location.search;          
        var options = {
            zoom: 17,
            center: latlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControlOptions: { 
                style: google.maps.MapTypeControlStyle.DROPDOWN_MENU 
            }
        };

        map = new google.maps.Map( mapId[0], options );

        google.maps.event.addListener( map, 'idle', function() {

            var bounds = map.getBounds();

            downloadXML( ABSPATH + 'xml/maps/markers.php' + qs + '&bounds=' + bounds, function( data ) {

                var xml     = parseXml( data );
                var markers = xml.documentElement.getElementsByTagName( "marker" );
                var markerArray = [];

                for ( var i = 0; i < markers.length; i++ ) {

                    var attributes = getMarkerAttributes( markers[i] );
                    var marker     = createMarker( attributes );

                    // Add marker to marker array
                    markerArray.push(marker);

                }

                // Define the marker clusterer
                var clusterOptions = { 
                    zoomOnClick: false,
                    gridSize: 1
                }

                var markerClusterer = new MarkerClusterer( map, markerArray, clusterOptions );

                // Listen for a cluster to be clicked
                google.maps.event.addListener( markerClusterer, 'clusterclick', function( cluster ) {
                    combineInfoWindows( cluster );              
                });

                // Listen for a cluster to be hovered and set title
                google.maps.event.addListener( markerClusterer, 'mouseover', function( cluster ) {
                    var txt = 'There are ' + cluster.getSize() + ' properties at this location.';
                    //alert( txt );
                    console.log( cluster );
                    markerClusterer.setTitle( txt );
                });

            }); // downloadXML

        }); // google.maps.event.addListener( map, 'idle', ... ) 
```

任何帮助将不胜感激。谢谢！

**编辑：1**

我有一个基于*Rick*建议的解决方案的解决方案。

我已经修改了 onAdd 方法。

```
/**
 * Adds the icon to the DOM.
 */
ClusterIcon.prototype.onAdd = function () {
  var cClusterIcon = this;

// MY CHANGES - START
this.cluster_.markerClusterer_.title_ = 'There are ' + this.cluster_.getSize() + ' properties at this location.';
// MY CHANGES - END

  this.div_ = document.createElement("div");
  if (this.visible_) {
    this.show();
  }

...

}; 
```

**编辑：2 - 最终解决方案**

按照*Rick*的建议，将方法更改`show`与以前的方法进行了比较。在 MarkerClustererPlus 的原始源文件之外的文件中进行了更改。`onAdd`

 *```
/**
 * Positions and shows the icon.
 */
ClusterIcon.prototype.show = function () {
  if (this.div_) {
    var pos = this.getPosFromLatLng_(this.center_);
    this.div_.style.cssText = this.createCss(pos);
    if (this.cluster_.printable_) {
     // (Would like to use "width: inherit;" below, but doesn't work with MSIE)
     this.div_.innerHTML = "<img src='" + this.url_ + "'><div style='position: absolute; top: 0px; left: 0px; width: " + this.width_ + "px;'>" + this.sums_.text + "</div>";
    } else {
     this.div_.innerHTML = this.sums_.text;
    }
    //this.div_.title = this.cluster_.getMarkerClusterer().getTitle();
    // MY SOLUTION BELOW
    this.div_.title = 'There are ' + this.cluster_.getSize() + ' properties at this location.';
    this.div_.style.display = "";
  }
  this.visible_ = true;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:45:29.817

您是否将[其](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)用于聚类标记？你有没有扩展它来制作你自己的 setTitle 函数？如果没有，您将不得不制作自己的标签。它本身实际上并不是一个标记。

编辑：不知道这存在。

集群图标只是从 MCOptions 中提取标题。我看不到 ClusterIcon 或 Cluster 在哪里有 setTitle 函数，所以我认为最好的选择是自己覆盖 ClusterIcon 显示原型并将其设置在那里。

```
> ClusterIcon.prototype.show =
> function () {   if (this.div_) {
>     var pos = this.getPosFromLatLng_(this.center_);
>     this.div_.style.cssText = this.createCss(pos);
>     if (this.cluster_.printable_) {
>       // (Would like to use "width: inherit;" below, but doesn't work with MSIE)
>       this.div_.innerHTML = "<img src='" + this.url_ + "'><div style='position: absolute; top: 0px; left: 0px; width: " + this.width_
> + "px;'>" + this.sums_.text + "</div>";
>     } else {
>       this.div_.innerHTML = this.sums_.text;
>     }
>     this.div_.title = **** Your stuff here ***
>     this.div_.style.display = "";   }   this.visible_ = true; }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:02:30.460

您的问题是您正在尝试将`mouseover`事件侦听器（设置标题的位置）分配给 a `MarkerClusterer`，但要定义`mouseover`侦听器，您必须通过 a `Cluster`。

有一个`MarkerClusterer.getClusters()`函数将返回一个`Array`实例`Cluster`。你想循环它`Array`并将一个实例传递`Cluster`给你的`mouseover`事件监听器。如果您检查[参考文档](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/docs/reference.html)并向下滚动到文档的`MarkerClusterer` **事件**部分，则将**参数**`mouseover`定义为：

 **```
c:Cluster 
```

`clusteringbegin`这与and之类的事件形成对比`clusteringend`，后者将**Argument**定义为：

```
mc:MarkerClusterer 
```

说了这么多，我不确定是否有一种简单的方法可以为每个`Cluster`. 该类没有`setTitle`功能。上只是`setTitle`将`MarkerClusterer`标题应用于**所有**实例`Cluster`。我已经仔细检查了 JavaScript；类上没有`setTitle`功能`Cluster`。您现在最好的选择似乎是`mouseover`为每个`Cluster`. 您可以创建一个[信息框](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#InfoBox)，然后在`Cluster` `mouseoet`事件中将其关闭。不是最简单的解决方案，但它会让你到达你想去的地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-23T15:34:02.800

我知道这是一个老问题，但它在 Google 上的搜索排名很高。无论如何，由于此页面的提示，这就是我所做的：

```
google.maps.event.addListener(markerCluster, 'mouseover', function (c) {
    if(c.clusterIcon_.div_){
        c.clusterIcon_.div_.title =  c.getSize() + ' businesses in this area';
    }
}); 
```

我不能保证它将与 MarkerClusterer Plus 的未来版本兼容，因为我使用的是“私有”属性 clusterIcon_ 和 div_。***

# android - Toast 延迟到绘图完成后。为什么？

> ID：10452620
> 
> 赞同：0
> 
> 时间：2012-05-04T16:23:47.717
> 
> 标签：android, android-layout

更新 05/08/12 上午 7:23：
我尝试交换 draw/toast，即将 Draw 放在 AsyncTask 中，将 Toast 放在主 UI 线程中，但仍然没有乐趣：行为没有变化。我放弃。但是，感谢大家的建议。
-约翰

=======================================

更新 05/04/12 下午 6:30：
我认为“单任务”问题可能是问题所在，并且工作线程可能会工作，但由于根据定义，两个线程都需要访问 UI（主线程），看起来对我来说，我仍然有争议。尽管如此，根据建议，我将*吐司*放在 AsyncTask 的 onProgressUpdate() 中，但正如我担心的那样，问题仍然存在。（我不想将渲染放在异步任务中，因为它是一个怪物，我更愿意将简单的吐司放在其他任务中）。所以，还是不开心。关于如何做到这一点的任何其他建议？

=======================================

我创建了一个应用程序，它可以在屏幕上组合和绘制位图。因为撰写位图需要 2-3 秒，所以我想向用户显示一条 Toast 消息，例如“正在刷新，请等待...”。我的问题是，即使我在drawBitmap( )*之前*调用 Toast()，直到绘制完成*后，toast 才会出现。*

 *我以前在 Windows 下看到过​​这样的行为，因为消息队列在长时间计算期间得到了备份，解决方案是在长时间计算期间定期显式发送消息。但我不知道是否/如何在 Android 上执行此操作。也许是神秘的（对我来说）“循环者”？？？

我已经包含了一个小而琐碎的应用程序来隔离/演示问题。

任何建议都*非常*感谢。
-约翰

```
//  PixmapTestMain.java

public class PixmapTestMain extends Activity {

public static View PixmapView;                  // pixmap view
public static Context Ctx;

// Create activity
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Ctx = this;
    PixmapView = findViewById( R.id.pixmap );
}

// Handle click
public void onClick(View v) {           // button view clicked
    PixmapView.invalidate();            // new pixmap
}

}  // end class PixmapTestMain 
```

自定义视图：

```
//  PixmapView - my custom view

public class PixmapView extends View {

static final int Wide=1000,High=1000,Size=(Wide*High);
static int toggle;

// Construct a view to display pixmap
public PixmapView(Context ctx,AttributeSet attrs) {
    super(ctx, attrs);
}

// Handle onDraw callback
@Override
protected void onDraw( Canvas canvas) {
    int[] pixmap;
    Bitmap bm;

    super.onDraw(canvas);

    toast( "Refreshing..." );
    pixmap = createPixmap();
    bm = Bitmap.createBitmap( pixmap, Wide, High, Bitmap.Config.ARGB_8888 );
    canvas.drawBitmap( bm, 0, 0, null );
}

// Create a pixmap
int[] createPixmap()
{
    int i,color;
    int[] pm;
    double s;
    Random rand = new Random();

    pm = new int[Size];                     // allocate pixmap

    toggle++;
    if( (toggle&1)==0 ) color = 0xff0000ff; // red
    else                color = 0xffff0000; // blue

    for( i=0; i<Size; i++ ) {
        pm[i] = color;
        rand.nextLong();        // slow me down
    }

    return( pm );
}

// Flash a toast message
public void toast( String msg)
{
    if( PixmapTestMain.Ctx == null ) return;
    Toast.makeText( PixmapTestMain.Ctx, msg, 0 ).show();
    }
} 
```

布局：

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<Button
  android:text="Refresh"
  android:id="@+id/refresh"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:onClick="onClick"/>

<com.hyperdyne.PixmapTest.PixmapView
  android:id="@+id/pixmap"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T23:14:38.420

您应该将长时间运行的任务从您的 UI 线程中移开，例如：

```
protected void onDraw( Canvas canvas) {
    int[] pixmap;
    Bitmap bm;

    super.onDraw(canvas);

    toast( "Refreshing..." );
    pixmap = createPixmap();
    bm = Bitmap.createBitmap( pixmap, Wide, High, Bitmap.Config.ARGB_8888 );
    canvas.drawBitmap( bm, 0, 0, null );
} 
```

应该变成：

```
private class DrawAsyncTask extends AsyncTask<Void,Void,Bitmap[]> {
    int[] pixmap;
    Bitmap bm;

    protected Void doInBackground(Void... v) {
        pixmap = createPixmap();
        bm = Bitmap.createBitmap( pixmap, Wide, High, Bitmap.Config.ARGB_8888 );
        return bm;
    }

    protected void onPostExecute(Bitmap[] result) {
        canvas.drawBitmap( result[0], 0, 0, null );
    }
}

protected void onDraw( Canvas canvas) {
    super.onDraw(canvas);
    toast( "Refreshing..." );
    new DrawAsyncTask().execute();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:12:14.060

您在与 Toast 消息相同的线程上调用画布刷新。由于重绘操作会阻塞 UI 线程直到它完成，所以在 UI 线程被解除阻塞之前无法呈现 toast 消息。如果将重绘操作移到工作线程中，它应该可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:26:34.420

两者都在 UI 上没有延迟，因此只有在两者结束后才能看到修改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-04T15:56:14.843

我有一个类似的问题。就我而言，我正在加载谷歌地图。第一次加载谷歌地图时，由于您的 api 密钥的验证过程以及加载初始地图图像，会出现明显的延迟。这可能需要几秒钟的时间，并且不会显示 toast。一个简单的解决方案是在 AsyncTask 或单独的 Activity 中加载地图，但**不要**立即启动 AsyncTask 或 Activity，而是在延迟 1 秒后。首先你显示你的吐司，然后在延迟后启动你的进程：

```
Toast.makeText(context, "Please wait...", Toast.LENGTH_LONG).show();
Handler handler = new Handler(); handler.postDelayed(DoSomething, 1000);

private Runnable DoSomething = new Runnable()
{
  @Override
  public void run()
  {
    try
    {
      // Launch an AsyncTask here or some other activity to handle your long process.
    }
    catch (Exception ex)
    {
    }
  }
}; 
```*

# javascript - 如何防止我的按钮点击 5 秒

> ID：10452625
> 
> 赞同：2
> 
> 时间：2012-05-04T16:23:56.650
> 
> 标签：javascript, jquery

我有类似的东西：

```
<button id="button" onclick="alert('Hi')">a button</button> 
```

我想*停用*按钮 onclick 操作，假设页面加载后 5 秒。
注意：我不想禁用该按钮，只是希望它的 onclick 操作在 5 秒后才起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:26:01.330

超时 5 秒后使用 jQuery 绑定事件。

```
setTimeout(function(){
    $('#button').click(function(){
        alert('Hi');
    });
}, 5000); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:26:12.493

您可以简单地删除该`onclick`属性，然后在 5 秒后将其放回。

```
var onClickFunc = $('#button').prop('onclick');
$('#button').removeProp('onclick');
setTimeout(function(){
    $('#button').click(onClickFunc);
}, 5000); 
```

演示：http: [//jsfiddle.net/KX5g7/1/](http://jsfiddle.net/KX5g7/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:26:13.730

```
$(function(){
    $('#button').attr('savedclick', $('#button').attr('onclick')).removeAttr('onclick');  
    setTimeout(enableButton, 5000);    
});

function enableButton(){
    $('#button').attr('onclick', $('#button').attr('savedclick')).removeAttr('savedclick');
} 
```

​<a href="http://jsfiddle.net/Yupt9/1/" rel="nofollow noreferrer">演示

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T16:27:13.680

```
$(function(){
        $('#button').unbind('click');
        setTimeout(function(){
            $('#button').bind('click');
        }, 5000);
    });​ 
```

* * *

**编辑：**

这似乎并没有像**Rocket**所说的那样取消绑定事件，所以，我认为一个好的解决方案可能是删除触发事件的属性：

```
$(function(){
    $('#button').attr('onclick', '');
    setTimeout(function(){
        $('#button').attr('onclick', 'alert("Hi")');
    }, 5000);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T16:27:37.190

为此，请不要放入`onclick`内联。

在您的`$(document).ready(...)`函数中，使用`setTimeout`等待 5 秒的回调函数来设置 onclick ( `$('#button').click(function(btn) { alert('Hi'); });`)

# java - java中骆驼的路线配置-使用一个通用类？

> ID：10452626
> 
> 赞同：1
> 
> 时间：2012-05-04T16:23:59.433
> 
> 标签：java, apache-camel

我为 Camel 使用 java 实现。我应该为我配置的每条路由使用不同的类还是使用一个通用类来配置它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:32:26.940

通常，我使用 RouteBuilder 类来配置功能相关的路由，但粒度完全取决于您。

要考虑的另一件事是异常处理特定于每个 RouteBuilder ...

有关此问题的更多详细信息，请参阅此问题：[如果在单独的类中定义了异常子句，则骆驼异常处理不起作用](https://stackoverflow.com/questions/9283861/camel-exception-handling-doesnt-work-if-exception-clause-is-defined-in-a-separat)

# asp.net - 如何从 ASP.NET 2.0 .MSI 安装中删除依赖项？

> ID：10452633
> 
> 赞同：1
> 
> 时间：2012-05-04T16:24:29.980
> 
> 标签：asp.net, .net, visual-studio-2005, windows-installer

我们有一个 VS 2005、.NET 2.0 应用程序，它似乎依赖于 ADOMD 和/或 OLAP。我们不会在我们的 ASP.NET 应用程序中使用它们中的任何一个，所以我必须找到一种方法将它们从我们创建的 .MSI 中取出。（我们创建一个 .MSI 以便我们可以将 Crystal Reports 11 Release 2 作为合并模块包含在内。）有没有办法可以消除对 ADOMD / OLAP 的依赖，如果可以，怎么做？

# c++ - 访问对象向量内的对象时出现分段错误

> ID：10452635
> 
> 赞同：1
> 
> 时间：2012-05-04T16:24:45.850
> 
> 标签：c++

我在尝试访问存储在向量中的对象时遇到分段错误。我有一个由流程组成的调查。每个过程都由问题组成。所以调查对象包含一个向量或进程，每个进程对象都包含一个问题向量。类定义如下：

```
class Survey {
private:
...
vector <Process> survey_processes;
....
public:
......
vector<Process> getSurveyProcesses()
{ return survey_processes;  }
void addProcessObj(Process obj)
{ survey_processes.push_back(obj);}
.....
};

class Process
 { 
private:
....
vector<Question> proc_questions;
....
public:
...
vector<Question> getProcessQuestions()
{ return proc_questions;}
void addQuestionObj(Question obj)
{ proc_questions.push_back(obj); }
.....
};
class Question {
private:

int quesnum;
int answer;
...
public:
Question (int c_ques, int c_ans)
{
quesnum = c_ques;
answer = c_ans;
}
int getQuestionID()
{
    return quesnum;
} 
int getAnswer()
{
    return answer;
}
...
}; 
```

创建新流程对象时，我将其存储在流程向量中，并且对于每个流程对象，我将问题对象推送到问题向量中。对于调查对象，我想从流程向量中获取每个流程，对于每个流程对象，获取每个问题对象并打印它。

我可以使用以下代码访问进程对象并成功打印它们。

```
cout << ((survey_obj.getSurveyProcesses()).back()).getProcessID() << endl; 
```

当我尝试从 Process 向量中提取问题对象时，它给了我一个分割错误。我相信我在尝试访问该对象时犯了一些语法错误。如何访问嵌入在给定过程对象的问题向量中的问题对象，该过程对象位于给定调查对象的过程对象向量内？

这是发生分段错误的代码的相关部分。

```
int procnum = 0;
for (unsigned i = 11; i < all_words.size()-1; ++i)

{   

vector<string> v;
string s = all_words.at(i);
stringstream ques_stream(s);

int ques_num;
ques_stream >> ques_num;
ques_stream.ignore();   

// if process object already exists, do nothing. Otherwise create a new process object and add it to the survey object  
if (procnum == ques_num)
    ;
else    
{   
Process proc_obj(ques_num);
survey_obj.addProcessObj(proc_obj);
procnum = ques_num;

}

string ques_strng;  
ques_stream >> ques_strng;
ques_stream.ignore();
Question ques_obj(ques_strng);

// objective: put the new question object in the question vector of the last process object from the process vector of the survey object
cout << ((survey_obj.getSurveyProcesses()).back()).getProcessID() << endl;
Process current_proc_obj = (survey_obj.getSurveyProcesses()).back();
cout << " Current Process : " << current_proc_obj.getProcessID() << endl;
Question current_question_obj = (current_proc_obj.getProcessQuestions()).back();

((survey_obj.getSurveyProcesses()).back()).addQuestionObj(ques_obj);    

**// this is where the segmentation fault occurs when i try to get the last object from process vector of the survey and for that object get the last element of the question vector. print the question id of this question object     
cout << " Current Question : " << ((((survey_obj.getSurveyProcesses()).back()).getProcessQuestions()).back()).getQuestionID() << endl;**

cout << " Current Process Question : " << ((current_proc_obj.getProcessQuestions()).back()).getQuestionID() << endl;

} 
```

我尝试运行 gdb 调试器，但它只告诉我尝试访问 questionID 时发生错误。我仍然不知道我做错了什么，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T18:19:29.557

```
((survey_obj.getSurveyProcesses()).back()).addQuestionObj(ques_obj);
             _______________copy^, _copy^ -               ^_______added to copy 
```

由于您是按值而不是引用返回向量，因此您正在添加`ques_obj`到一个临时的 local `vector`，而不是`survey_obj`.

发生崩溃是因为您正在访问（空）向量的末尾，因为没有添加任何内容。

`vector`解决此问题的一种方法是通过*引用*而不是按*值*返回类成员。（因为*按值*可以作为*变量的副本*。）

```
class Survey {
private:
vector <Process> survey_processes;
public:
vector<Process>& getSurveyProcesses()//<--ampersand indicates return by reference 
{ return survey_processes;  }
}; 
```

现在，当你尝试这个时：

```
((survey_obj.getSurveyProcesses()).back()).addQuestionObj(ques_obj);
                          ______^ this is the vector inside the Survey class,
                                  not a copy 
```

幸运的是，[std::vector::back 也通过引用返回](http://www.cplusplus.com/reference/stl/vector/back/)，因此`ques_obj`被添加到由向量持有的对象中，由`Survey`对象持有 - 不涉及本地临时副本！稍后，当您去查询该问题时，您会在预期的位置找到它。

最后两个注意事项：1）您应该决定是否还应该通过引用返回 process_questions；2) 如果你使用了 for 的能力`vector`告诉你它包含多少元素，而不是仅仅假设它`back()`会起作用，你会更早发现这个问题。:)

# c# - 将文件读入 4 个字节的 ByteArrays

> ID：10452637
> 
> 赞同：0
> 
> 时间：2012-05-04T16:24:54.773
> 
> 标签：c#, file-io, bytearray

我想知道如何将文件读入 4 个字节长的 ByteArrays。这些数组将被操作，然后必须转换回准备写入文件的单个数组。

**编辑：** 代码片段。

```
 var arrays = new List<byte[]>();
    using (var f = new FileStream("file.cfg.dec", FileMode.Open))
    {
        for (int i = 0; i < f.Length; i += 4)
        {
            var b = new byte[4];
            var bytesRead = f.Read(b, i, 4);
            if (bytesRead < 4)
            {
                var b2 = new byte[bytesRead];
                Array.Copy(b, b2, bytesRead);
                arrays.Add(b2);
            }
            else if (bytesRead > 0)
                arrays.Add(b);
        }
    }

    foreach (var b in arrays)
    {
        BitArray source = new BitArray(b);
        BitArray target = new BitArray(source.Length);

        target[26] = source[0];
        target[31] = source[1];
        target[17] = source[2];
        target[10] = source[3];
        target[30] = source[4];
        target[16] = source[5];
        target[24] = source[6];
        target[2] = source[7];
        target[29] = source[8];
        target[8] = source[9];
        target[20] = source[10];
        target[15] = source[11];
        target[28] = source[12];
        target[11] = source[13];
        target[13] = source[14];
        target[4] = source[15];
        target[19] = source[16];
        target[23] = source[17];
        target[0] = source[18];
        target[12] = source[19];
        target[14] = source[20];
        target[27] = source[21];
        target[6] = source[22];
        target[18] = source[23];
        target[21] = source[24];
        target[3] = source[25];
        target[9] = source[26];
        target[7] = source[27];
        target[22] = source[28];
        target[1] = source[29];
        target[25] = source[30];
        target[5] = source[31];

        var back2byte = BitArrayToByteArray(target);

        arrays.Clear();
        arrays.Add(back2byte);
    }

    using (var f = new FileStream("file.cfg.enc", FileMode.Open))
    {
        foreach (var b in arrays)
            f.Write(b, 0, b.Length);
    } 
```

* * *

**编辑 2：** 这是完成我想要的丑陋贝蒂的代码。现在我必须改进它的性能......

```
var arrays_ = new List<byte[]>();
var arrays_save = new List<byte[]>();
var arrays = new List<byte[]>();
using (var f = new FileStream("file.cfg.dec", FileMode.Open))
{
    for (int i = 0; i < f.Length; i += 4)
    {
        var b = new byte[4];
        var bytesRead = f.Read(b, 0, b.Length);
        if (bytesRead < 4)
        {
            var b2 = new byte[bytesRead];
            Array.Copy(b, b2, bytesRead);
            arrays.Add(b2);
        }
        else if (bytesRead > 0)
            arrays.Add(b);
    }
}

foreach (var b in arrays)
{
    arrays_.Add(b);
}
foreach (var b in arrays_)
{
    BitArray source = new BitArray(b);
    BitArray target = new BitArray(source.Length);

    target[26] = source[0];
    target[31] = source[1];
    target[17] = source[2];
    target[10] = source[3];
    target[30] = source[4];
    target[16] = source[5];
    target[24] = source[6];
    target[2] = source[7];
    target[29] = source[8];
    target[8] = source[9];
    target[20] = source[10];
    target[15] = source[11];
    target[28] = source[12];
    target[11] = source[13];
    target[13] = source[14];
    target[4] = source[15];
    target[19] = source[16];
    target[23] = source[17];
    target[0] = source[18];
    target[12] = source[19];
    target[14] = source[20];
    target[27] = source[21];
    target[6] = source[22];
    target[18] = source[23];
    target[21] = source[24];
    target[3] = source[25];
    target[9] = source[26];
    target[7] = source[27];
    target[22] = source[28];
    target[1] = source[29];
    target[25] = source[30];
    target[5] = source[31];

    var back2byte = BitArrayToByteArray(target);

    arrays_save.Add(back2byte);
}

using (var f = new FileStream("file.cfg.enc", FileMode.Open))
{
    foreach (var b in arrays_save)
        f.Write(b, 0, b.Length);
} 
```

**编辑 3：** 将一个大文件加载到 4 个字节的字节数组中并不是最聪明的主意……我有超过 6800 万个数组正在处理和操作。我真的想知道是否可以将它加载到单个数组中并且仍然可以进行位操作。：/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:55:48.377

这是另一种方式，类似于@igofed 的解决方案：

```
var arrays = new List<byte[]>();
using (var f = new FileStream("test.txt", FileMode.Open))
{
    for (int i = 0; i < f.Length; i += 4)
    {
        var b = new byte[4];
        var bytesRead = f.Read(b, i, 4);
        if (bytesRead < 4)
        {
            var b2 = new byte[bytesRead];
            Array.Copy(b, b2, bytesRead);
            arrays.Add(b2);
        }
        else if (bytesRead > 0)
            arrays.Add(b);
    }
}
//make changes to arrays
using (var f = new FileStream("test-out.txt", FileMode.Create))
{
    foreach (var b in arrays)
        f.Write(b, 0, b.Length);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:29:35.447

这是你想要的：

```
using (var reader = new StreamReader("inputFileName"))
{
    using (var writer = new StreamWriter("outputFileName"))
    {
        char[] buff = new char[4];
        int readCount = 0;
        while((readCount = reader.Read(buff, 0, 4)) > 0)
        {
            //manipulations with buff

            writer.Write(buff);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-06T03:08:51.930

关于您的“编辑 3”……我会咬一口，尽管这确实是对原始问题的转移。

没有理由需要数组列表，因为您只是将文件分解为 4 字节序列的连续列表，循环并处理每个序列，然后循环并写入每个序列。你可以做得更好。 **注意：**下面的实现不会检查或处理长度不完全是 4 的倍数的输入文件。如果它很重要，我把它留给你作为练习。

为了直接解决您的评论，这里是一个单阵列解决方案。我们将丢弃 List 对象，将整个文件读入一个 byte[] 数组，然后复制该数组的 4 字节部分来进行位转换，然后将结果放回去。最后，我们将把整个内容放入输出文件中。

```
byte[] data;
using (Stream fs = File.OpenRead("E:\\temp\\test.bmp")) {
    data = new byte[fs.Length];
    fs.Read(data, 0, data.Length);
}

byte[] element = new byte[4];
for (int i = 0; i < data.Length; i += 4) {
    Array.Copy(data, i, element, 0, element.Length);

    BitArray source = new BitArray(element);
    BitArray target = new BitArray(source.Length);

    target[26] = source[0];
    target[31] = source[1];
    // ...
    target[5] = source[31];

    target.CopyTo(data, i);
}

using (Stream fs = File.OpenWrite("E:\\temp\\test_out.bmp")) {
    fs.Write(data, 0, data.Length);
} 
```

所有丑陋的初始读取代码都消失了，因为我们只使用了一个单字节数组。请注意，我在处理循环之前保留了一个 4 字节数组以供重复使用，因此我们可以为垃圾收集器节省一些工作。然后我们一次遍历 4 个字节的巨型数据数组并将它们复制到我们的工作数组中，使用它来初始化 BitArrays 以进行转换，然后块中的最后一条语句将 BitArray 转换回字节数组，并复制它直接回到了它在巨大数据阵列中的原始位置。这将替换`BitArrayToByteArray`方法，因为您没有提供它。最后，写入也很容易，因为它只是猛击现在转换的巨型数据阵列。

当我运行您的原始解决方案时，我的 100MB 原始测试文件出现 OutOfMemory 异常，因此我使用了 44MB 文件。它消耗了 650MB 的内存并在 30 秒内运行。单阵列解决方案使用 54MB 内存，运行时间为 10 秒。不错的改进，它展示了持有数百万个小数组对象是多么糟糕。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T16:31:28.513

```
IEnumerable<byte[]> arraysOf4Bytes = File
    .ReadAllBytes(path)
    .Select((b,i) => new{b, i})
    .GroupBy(x => x.i / 4)
    .Select(g => g.Select(x => x.b).ToArray()) 
```

# iphone - 如何使用私有 API 在 IOS 5.1 中打开/关闭飞行模式

> ID：10452640
> 
> 赞同：14
> 
> 时间：2012-05-04T16:25:08.957
> 
> 标签：iphone, ios, iphone-privateapi

我正在尝试使用私有框架在 IOS 5.1 中打开/关闭飞行模式。

在 AppSupport.framework 中，`RadiosPreferences`具有获取/设置飞行模式和设置值的属性

**./AppSupport.framework/RadiosPreferences.h**：

```
@property BOOL airplaneMode; 
```

**./AppSupport.framework/RadiosPreferences.h**：

```
- (void)setAirplaneMode:(BOOL)arg1; 
```

我该如何使用这些方法？我是否需要以`dlsym`某种方式创建对象并调用方法？有人可以帮助我提供示例代码或方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-19T23:18:40.483

正如[jrtc27 在他的回答中所描述的](https://stackoverflow.com/a/13393520/119114)（[我在这里提到过](https://stackoverflow.com/a/6481535/119114)），您需要授予您的应用程序特殊权利才能*成功*更改`airplaneMode`属性。

这是要添加到项目中的示例 entitlements.xml 文件：

```
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>com.apple.SystemConfiguration.SCDynamicStore-write-access</key>
    <true/>
    <key>com.apple.SystemConfiguration.SCPreferences-write-access</key>
    <array>
        <string>com.apple.radios.plist</string>
    </array>
</dict>
</plist> 
```

**com.apple.radios.plist**是实际存储飞行模式首选项的文件，因此您需要对其进行写访问。

**不**，您不需要使用`dlopen`或`dlsym`访问此 API。您可以直接将**AppSupport**框架添加到您的项目中（`AppSupport.framework`存储在 Mac 上的`PrivateFrameworks`文件夹下的例外情况除外）。然后，只需实例化一个`RadiosPreferences`对象，并正常使用它。权利是重要的部分。

对于您的代码，首先[使用 class-dump](http://stevenygard.com/projects/class-dump/)或[class-dump-z](http://code.google.com/p/networkpx/downloads/detail?name=class-dump-z)生成 RadiosPreferences.h 文件，并将其添加到您的项目中。然后：

```
#import "RadiosPreferences.h" 
```

做

```
RadiosPreferences* preferences = [[RadiosPreferences alloc] init];
preferences.airplaneMode = YES;  // or NO
[preferences synchronize];
[preferences release];           // obviously, if you're not using ARC 
```

我只针对越狱的应用程序对此进行了测试。如果设备没有越狱，我不确定是否可以获得此权利（请参阅 Victor Ronin 的评论）。但是，如果这是一个越狱应用程序，请确保您记得**使用**权利文件签署您的可执行文件。[我通常用ldid](http://code.google.com/p/networkpx/downloads/detail?name=ldid)签署越狱应用程序，所以如果我的权利文件是**entitlements.xml ，那么在**[**没有**代码签名](https://stackoverflow.com/a/12548876/119114)的情况下在 Xcode 中构建之后，我会执行

```
ldid -Sentitlements.xml $BUILD_DIR/MyAppName.app/MyAppName 
```

[这是 Saurik 关于代码签名和权利的页面](http://www.saurik.com/id/8)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T08:04:00.210

添加`com.apple.SystemConfiguration.SCPreferences-write-access`到您的权利 plist 并将其设置为 true（您可能需要创建 plist）。我相信以下应该有效 - 如果不能，我可以在今晚晚些时候进行测试时查看：

```
NSBundle *bundle = [NSBundle bundleWithPath:@"/System/Library/PrivateFrameworks/AppSupport.framework"];
BOOL success = [bundle load];

Class RadiosPreferences = NSClassFromString(@"RadiosPreferences");
id radioPreferences = [[RadiosPreferences alloc] init];
[radiosPreferences setAirplaneMode:YES]; // Turns airplane mode on 
```

# javascript - javascript函数调用时间。实现这一点的最佳方式

> ID：10452643
> 
> 赞同：1
> 
> 时间：2012-05-04T16:25:30.807
> 
> 标签：javascript, jquery

我的主 javascript 文件中有以下内容：

```
window.onbeforeunload = function () {
    firstFunction();
}

$("a").live("click", function() {
   secondFunction();
} 
```

当用户点击任何卸载页面的链接（即导航到另一个页面）时，这两个函数都会被调用；首先调用 FirstFunction()，然后调用 secondFunction()。我希望在 firstFunction() 之前调用 secondFunction();

我可以通过这样做来实现这一点：setTimeout('firstFunction(),100)，但我想知道是否有更好的方法来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:28:52.727

我建议您使用 mousedown 事件而不是单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:32:35.020

试试这个 - 给所有外部链接一个 class="external"

```
window.onbeforeunload = function () {
    firstFunction();
}
$(document).ready(function() {
  $("a").click(function() {
     if ($(this).hasClass("external")) secondFunction();
  });
}); 
```

# java - JSF 在修改后放回上下文

> ID：10452648
> 
> 赞同：0
> 
> 时间：2012-05-04T16:25:56.790
> 
> 标签：java, jsf

我正在使用它从另一个支持 bean 访问支持 bean 的上下文。

我正在修改当前 bean 的属性。我可以把这个上下文放回去吗？

```
TemplatePrescriptionMaintenanceBackingBean templatePrescBean = (TemplatePrescriptionMaintenanceBackingBean)context.getApplication()
            .evaluateExpressionGet(context, "#{templatePrescriptionMaintenanceBackingBean}", TemplatePrescriptionMaintenanceBackingBean.class); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:36:58.310

那没有必要。您正在获取对现有 bean 实例的引用，而不是副本或其他东西。如果您操纵引用，那么它将在其他任何也持有对此实例的引用的地方“反射”。Java 是一种面向对象的语言，而不是一种过程语言或其他东西。

顺便说一句，`@ManagedProperty`获得对另一个托管 bean 的引用是一种更好的方法。

### 也可以看看：

*   [JSF2.0 在托管 bean 之间传递值对象](https://stackoverflow.com/questions/4934027/jsf2-0-passing-value-objects-between-managed-beans/4934770#4934770)

# android - 更新通知振动/铃声

> ID：10452656
> 
> 赞同：7
> 
> 时间：2012-05-04T16:26:30.217
> 
> 标签：android, notifications, alert, notificationmanager

我正在使用`NotificationManager`构建器在我的应用程序中显示警报。我知道该`notify`方法的第一个参数是 id，如果通知已经可见，框架将更新通知，但是如果我将警报设置为播放铃声或振动，如果警报更新，铃声/振动是否也会触发?

```
 NotificationCompat.Builder nb = new NotificationCompat.Builder(this);
    nb.setContentTitle("title");
    nb.setContentText("message");
    nb.setSmallIcon(getResources().getIdentifier("drawable/alert", null, packageName));
    nb.setWhen(System.currentTimeMillis());
    nb.setAutoCancel(true);
    nb.setTicker("message");

    final Uri ringtone = Uri.parse(PreferenceManager.getDefaultSharedPreferences(this).getString("ringtone", getString(R.string.settings_default_ringtone)));

    nb.setDefaults(Notification.DEFAULT_VIBRATE);
    nb.setSound(ringtone);      
    nb.setDefaults(Notification.DEFAULT_LIGHTS);

    NotificationManager nm = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);

    final Intent notificationIntent = new Intent(this, Main.class);
    notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_NEW_TASK);

    final PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);
    nb.setContentIntent(contentIntent);

    Notification notification = nb.getNotification();

    nm.notify(0, notification); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T17:18:30.270

刚刚自己测试过，振动/铃声确实会响起，即使是在更新时也是如此。

更新：只是一个更新，如果您正在使用`NotificationCompat.Builder`或者`Notification.Builder`您可以设置`setOnlyAlertOnce`为只发出铃声/振动一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-30T16:05:02.627

NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(MainActivity.this)

长[] v = {500,1000}；notificationBuilder.setVibrate(v);

Uri uri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION); notificationBuilder.setSound(uri);

# .net - AvalonEdit：突出显示开始和结束元素之间的文本

> ID：10452658
> 
> 赞同：1
> 
> 时间：2012-05-04T16:26:48.360
> 
> 标签：.net, wpf, syntax-highlighting, avalonedit

我正在使用 AvalonEdit 并有一个自定义突出显示规则文件，我有这个规则......

```
<Span ruleSet="ASP" multiline="true">
    <Begin color="ASPSectionStartEndTags">&lt;script</Begin>
    <End color="ASPSectionStartEndTags">script&gt;</End>
</Span> 
```

...在我的编辑器中突出显示`<script`and`script>`元素，但我想突出显示整个脚本块。

我需要添加什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:14:28.197

将`color`属性放在 上`<Span>`，而不仅仅是在开始/结束规则上。

# java - 有条件地替换字符串的最后一个字符

> ID：10452659
> 
> 赞同：2
> 
> 时间：2012-05-04T16:26:52.527
> 
> 标签：java

我有一个字符串，比如说`xyzabc_1_1`。

我想首先测试**最后一个**字符是否是`_1`，如果是，将最后一个替换`_1`为`_01_1`. 字符串将变为`xyzabc_1_01_1`.

`_1`查找我正在使用的最后一位数字是否为

```
str1.matches("^.*_\\d$") 
```

但不知道第二部分，即如何用`_01_1`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:29:01.950

要替换字符串，您只需获取一个子字符串并连接您的新后缀。此外，您可以使用[`endsWith`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#endsWith%28java.lang.String%29)而不是正则表达式。恕我直言，它更具可读性。

```
public String replaceSuffix (String target) {
    if (!target.endsWith("_1")) {
       return target;
    }

    return target.substring(0, target.length() - 2) + "_01_1";
} 
```

只是为了好玩，这里有一个更可重用的版本来替换不同的东西：

```
public String replaceSuffix (String target, String suffix, String replacement) {
    if (!target.endsWith(suffix)) {
        return target;
    }

    String prefix = target.substring(0, target.length() - suffix.length());
    return prefix + replacement;
} 
```

调用为（对于您的具体示例）：

```
String replaced = replaceSuffix("xyzabc_1_1", "_1", "_01_1"); 
```

根据您的预期输入，您可能还需要对`str`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-05T19:00:18.713

这是一个简单的单行，使用`replaceAll()`和反向引用：

```
String str2 = str1.replaceAll("_\\d$", "_01$0"); 
```

目前尚不清楚 是否`01`基于`1`or 是一个常数。即如果`2`要成为`02_2`然后这样做：`str1.replaceAll("_(\\d)$", "_0$1_$1")`

这是一个测试：

```
String str1 = "xyzabc_1_1";
String str2 = str1.replaceAll("_\\d$", "_01$0");
System.out.println(str2); 
```

输出：

```
xyzabc_1_01_1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:29:41.930

您宁愿用新字符串替换整个字符串。创建一个连接“_01_1”的新字符串。然后更换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T18:48:09.720

完成但需要优化...

```
String str1 = "xyzabc_1";

    /* System.out.println(str1.matches("^.*_\\d$")); */

    try {
        if (str1.matches("^.*_\\d$")) {
            String cutted = str1.substring(str1.lastIndexOf("_"),
                    str1.length());
            str1 = str1.replaceAll(cutted, "_01" + cutted); //
            System.out.println(str1);
        } else {

        }
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

# asp.net - Chrome 中 ASP.NET 站点的不正确呈现 - 单击时已修复

> ID：10452662
> 
> 赞同：0
> 
> 时间：2012-05-04T16:26:58.597
> 
> 标签：asp.net, css, google-chrome, rendering

在呈现 ASP.NET 站点时，我得到了这个在 Chrome 17 中开始出现并一直在 18 中出现的错误。

发生的事情是其中一个页面呈现不正确，但是如果我单击网页，甚至单击滚动条或 chrome 开发工具中的 html 元素，则网站中的组件会迅速恢复到正确的位置。这是一个非常复杂的网站，有很多控件，视觉上发生的事情是一些面板显示为空白，显示一些弹出窗口，并且一些隐藏的控件可见。

这在任何其他浏览器或版本中都不会发生，并且在我第一次进入页面时也不会发生。它仅在同一页面内发生回发之后发生。

我注意到一些 CSS 规则设置在“行为不端”的组件上，但没有在视觉上应用。例如，我正在使用 chrome 的控制台来检查应该隐藏的自定义下拉菜单。当我检索该项目时，它同时具有 display:none 和 visibility:hidden 属性，例如

```
<ul id="xx" style="position: absolute; left: 90px; top: 845px; display: none; visibility: hidden;> ... </ul> 
```

但是，当检索其显示 css 属性时，它是“块”。

```
$('#xx').css('display')
-block 
```

一旦我在网页内执行操作，组件就会捕捉到它们正确的布局，并且“显示”属性突然变为正确的“无”。

我真的没有这个想法。在页面的不正确和正确呈现之间似乎没有执行任何代码。我的猜测是，asp 代码和 .css 文件之间可能存在 CSS 冲突，并且可能一个在完成渲染之前覆盖了另一个。

任何帮助是极大的赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T21:22:29.257

我们在不同版本的 chrome 中也遇到过这个问题。

这么远。我们找到的唯一解决方案是简化 html。

对我来说看起来像是一个 Chrome 渲染错误。

考虑到它不在客户端运行，我也不认为 ASP 与它有任何关系。

# android - 软键盘上的退格键按太久导致的错误

> ID：10452663
> 
> 赞同：1
> 
> 时间：2012-05-04T16:27:00.017
> 
> 标签：android, android-edittext

我有一个搜索区域（EditText），带有`addTextChangedListener`. 当输入出现时，方法中的 my`AsyncTask`启动`afterTextChanged`。

*   在`onPreExecute`方法中，显示带有“请稍候”消息的对话框。
*   在`doInBackground`方法中，项目被过滤
*   在`onPostExecute`方法中，过滤的项目被写入列表，然后“请稍候”对话框停止。

假设搜索区域中有一个6个字符的单词。当我按住软键盘上的退格键时，字符被一个一个快速删除。

但是在这里我收到错误`IllegalStateException`（适配器的内容已更改但 ListView 没有收到通知）。

虽然我`notifyDataSetChanged`使用`postExecute`.

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-20T08:47:09.350

```
 public boolean onKeyDown(int keyCode, KeyEvent event) {    

///forcontrol pressing backeSpace in editText(softKeyboard)

            if (keyCode == KeyEvent.KEYCODE_DEL) {

                parent.endsWith("");            

                return true;
            } 
} 
```

# xcode - 关闭 UIPopover 时，UISwitch 不会保持关闭状态

> ID：10452669
> 
> 赞同：0
> 
> 时间：2012-05-04T16:27:09.177
> 
> 标签：xcode, uipopovercontroller, uiswitch, uipopover

我在 UIPopoverController 中有一个 UISwitch，当你打开 popover VC 时，它的默认设置是 ON。我试图拥有它，以便当您将其设置为“关闭”并关闭 UIPopover 时 - 当您重新打开弹出窗口时，UISwitch 的状态保持不变。对于我的生活，我无法弄清楚这一点，我敢打赌这真的很简单。我想知道是否有人能指出我正确的方向？任何帮助将不胜感激，谢谢！

**[编辑]**这是我正在使用的代码：

```
 //--NEW CODE--//
#define SWITCH_KEY_STATE @"Save UISwitch State"

- (IBAction)settingsPopover:(id)sender {
    if(![pop isPopoverVisible]){
        settings = [[settingsView alloc] initWithNibName:@"settingsView" bundle:nil];
        settings.setDelegate = self;
        pop = [[UIPopoverController alloc] initWithContentViewController:settings];
        [pop setPopoverContentSize:CGSizeMake(200, 100)];
        [pop presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
        //--NEW CODE--//
        popoverState = [NSUserDefaults standardUserDefaults];
        self.settings.hintSwitch.on = [popoverState boolForKey:SWITCH_KEY_STATE];

        [self.settings.hintSwitch addTarget:self action:@selector(onOff:) forControlEvents:UIControlEventValueChanged];
    } else {
        [pop dismissPopoverAnimated:YES];
    }
} 
```

这是创建弹出框的函数，它`[self.settings.hintSwitch...`是在 UISwitch 上调用的弹出框（设置），当它与之交互时会运行此 void 函数：

```
- (void)onOff:(id)sender {
    if (settings.hintSwitch.on) {
        tutView.hidden = NO;
    } else {
        tutView.hidden = YES;
    //--NEW CODE--//
    popoverState = [NSUserDefaults standardUserDefaults];
    [popoverState setBool:self.settings.hintSwitch.on forKey:SWITCH_KEY_STATE];
        }
    } 
```

所以工作发现它只是当我关闭弹出窗口并重新打开它时，它会将 UISwitch 重置为“ON”。

**[EDIT2]**我已经将上面的代码编辑为我添加的内容。哪个有效！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T07:36:47.783

我看到的第一件事是这行代码：

```
pop = [[UIPopoverController alloc] initWithContentViewController:settings]; 
```

有了它，您每次控制器时都会重新分配，并使用初始设置对其进行初始化（默认为 ON）。

你有这个解决方案：

1.  在你的类中创建一个名为“popoverState”的 BOOL
2.  在关闭 popovercontroller 之前保存 UISwitch 的状态
3.  一旦你初始化它，你可以使用新变量来设置开关的状态

让我知道！

# c - MongoDB 在 C 中使用 $or 检索记录

> ID：10452672
> 
> 赞同：1
> 
> 时间：2012-05-04T16:27:15.357
> 
> 标签：c, mongodb, mongodb-query, mongodb-c

我正在尝试模拟以下 MongoDB shellcode：

```
db.products.find( { $or : [ { title : /blue/i }, { tags : /blue/i } ] }, {_id:0, title:1} ); 
```

这是我尝试过的：

```
bson query[1];
mongo_cursor cursor[1];

bson_init( query );

{
bson_append_start_object( query, "$or");
bson_append_regex( query, "title", "blue", "i" );
bson_append_regex( query, "tags", "blue", "i" );
bson_append_finish_object( query );
}

bson_finish( query );

mongo_cursor_init( cursor, conn, "test.products" );
mongo_cursor_set_query( cursor, query );

while( mongo_cursor_next( cursor ) == MONGO_OK ) {
  bson_iterator iterator[1];
  if ( bson_find( iterator, mongo_cursor_bson( cursor ), "title" )) {
      printf( "%s\n", bson_iterator_string( iterator ) );
  }
}

bson_destroy( query );
mongo_cursor_destroy( cursor ); 
```

但它似乎没有按预期工作。我还尝试用数组替换对象，然后将数组嵌套在对象中，但无济于事。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:39:18.623

mongo_db 答案

好的，我在这个网站上找到了解决方案：

[https://groups.google.com/group/mongodb-user/browse_thread/thread/02a239b0bda84b82](https://groups.google.com/group/mongodb-user/browse_thread/thread/02a239b0bda84b82)

这是我必须改变的：

```
bson_append_start_object( query, "$or");
bson_append_regex( query, "title", "blue", "i" );
bson_append_regex( query, "tags", "blue", "i" );
bson_append_finish_object( query ); 
```

应该

```
bson_append_start_array( query, "$or" );
    bson_append_start_object( query, "0"); 
        bson_append_regex( query, "title", "blue", "i" );
    bson_append_finish_object( query );     
    bson_append_start_object( query, "1"); 
        bson_append_regex( query, "tags", "blue", "i" );
    bson_append_finish_object( query );
bson_append_finish_array( query ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:31:17.183

我对 C 驱动程序并没有真正的经验，但是您的基本查询结构看起来有些不正确。

顺序应该是这样的：

```
array => add Object {title:/blue/i} to array
      => add Object {tags:/blue/i} to array
finish array 
```

所以代码应该是这样的：

```
bson_init(query);

bson_append_start_array( query, "$or" );
  bson_append_regex( query, "title", "blue", "i" );
  bson_append_regex( query, "tags", "blue", "i" );
bson_append_finish_array( query ); 
```

但是，查看[文档](http://api.mongodb.org/c/current/bson.html#creating-complex-bson-objects)，我找不到构建“对象数组”的示例。因此，如果这不起作用，您可能需要联系驱动程序作者或 MongoDB Google Groups。

# javascript - 以编程方式访问 Sencha Touch 2 列表点击处理程序中的 hasMany 关联

> ID：10452683
> 
> 赞同：1
> 
> 时间：2012-05-04T16:27:49.240
> 
> 标签：javascript, sencha-touch-2

我是 ST2 的新手，我在尝试做一些我认为应该简单的事情时遇到了困难。

我有一个模型，它是一个具有称为电子邮件的 hasMany 关联的用户。我有一个成功加载顶级用户项目的列表，当我点击列表中的项目时，我可以使用通过传递给点击事件的记录访问用户属性

```
record.get('displayName'); 
```

但是我尝试从记录对象访问电子邮件集合的任何方式都没有奏效。

我试过了 ：

```
record.get('emails'); // doesn't work 
record.getEmails(); // doesn't work 
record.emails().each(...); 
```

`record.emails()`存在，但不知道它是什么。each() 没有产生任何结果，尽管它的评估结果是好的。

谁能向我解释如何从该记录对象中获取关联数据元素？

这是我正在生成的 JSON 示例：

```
[
   {
      "id":0,
      "displayName":"Display Name 0",
      "emails":[
         {
            "value":"email@thehost.us",
            "type":"home",
            "pref":"true"
         }
      ]
   }
] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T22:39:18.153

`record.emails()`是正确的方法。这将返回一个实例，`Ext.data.Store`然后您可以加载（如果没有数据）记录，或循环它们。

有关 hasMany 关联的更多文档可在此处获得：[http ://docs.sencha.com/touch/2-0/#!/api/Ext.data.association.HasMany](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.association.HasMany)

# c# - 通过链接生成 CSV 文档

> ID：10452685
> 
> 赞同：1
> 
> 时间：2012-05-04T16:27:55.690
> 
> 标签：c#, asp.net-mvc-3, csv, download, actionmethod

我在页面上有一个链接，我希望在用户单击链接时出现“打开或保存 csv 文件”对话框。该链接指向一个操作方法，在该方法中我生成一个表示有效 CSV 输出的字符串。我唯一不知道怎么做的就是输出一个用户可以打开或保存的文件。我想我可能需要做一些改变http头或类似的事情，但我不太确定。

请帮忙。这将决定是否在周五晚上的合理时间回家。;-)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:45:40.677

返回`FileContentResult`并将 MIME 类型设置为“text/csv”。

```
public FileContentResult Download()
{
    string csvContent = "field1,field2,field3";
    var data = Encoding.UTF8.GetBytes(csvContent);
    string filename = "Simple.csv";
    string mime = "text/csv";
    return File(data, mime, filename);
} 
```

在查看页面中，只需创建一个链接以提示下载。

```
@Html.ActionLink("Download File", "Download") 
```

# c# - C#正则表达式匹配一个法语特殊字符

> ID：10452686
> 
> 赞同：0
> 
> 时间：2012-05-04T16:27:55.620
> 
> 标签：c#, regex, special-characters

是否有可能编写一个正则表达式来匹配“c”或“ç”来适用于两个例子，比如

```
var a = "ca va";
var b = "ça va";
Regex.Match(a,"\b(ca\sva)").Success // Match
Regex.Match(b,"\b(ça\sva)").Success // Dont match 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:55:31.277

对我来说，以下代码在任何一种情况下都返回 true：

```
using System;
using System.Text.RegularExpressions;

namespace FrenchRegex
{
    class Program
    {
        static void Main(string[] args)
        {
            var a = "ca va";
            var b = "ça va";

            var regex = @"\b((c|ç)a\sva)";

            var matchA = Regex.Match(a, regex).Success;
            var matchB = Regex.Match(b, regex).Success;

            Console.WriteLine("Matches '" + a + "': " + matchA);
            Console.WriteLine("Matches '" + b + "': " + matchB);

            Console.ReadKey();
        }
    }
} 
```

我复制并粘贴到 VS2010 中，所以你可能需要做同样的事情来重现我的结果。

无论如何，我认为匹配“ça va”和“ca va”的正则表达式将是`\b([cç]a\sva)`.

# macos - 有没有办法阻止 iTunes 商店 URL 在 OS X 中启动 iTunes 应用程序？

> ID：10452690
> 
> 赞同：1
> 
> 时间：2012-05-04T16:28:05.850
> 
> 标签：macos, itunes, itunes-store

首先是从 OS X 上的 Safari 启动的[iTunes 商店项目（例如应用程序）的链接](http://itunes.apple.com/linkmaker)

1.  打开该项目的网页，然后
2.  启动 iTunes 并在那里打开相应的页面。

有没有办法代表第二步？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:33:29.417

这可能就是你要找的...

[http://gigaom.com/apple/how-to-stop-itunes-web-links-from-opening-itunes/](http://gigaom.com/apple/how-to-stop-itunes-web-links-from-opening-itunes/)

# sql - 在存储过程中编写插入语句

> ID：10452693
> 
> 赞同：0
> 
> 时间：2012-05-04T16:28:30.097
> 
> 标签：sql, winforms, stored-procedures

我有 2 个 sql 表

```
[dbo].[Contract]
[ContractID] pk,.....other column

[dbo].[Installment] //this table has composite primary key
[ContractID] pk n fk // it is primary and foreign key
[installmentNum] pk, // contractID and installmentnum both are the primary keys 
```

ContractID 有 6 或 12 个分期付款，我使用 installmentNum 列通过 winform 插入我编写了这个存储过程

```
ALTER PROCEDURE [dbo].[spInsertUpdateInstallment]
@ContractID int = 0,
@InstallmentNumber int = 0,
@month varchar(10),
@installment money = 0.00,
@commission money = 0.00,
@iupdate int = 0
AS
SET NOCOUNT ON 
SET XACT_ABORT ON  
BEGIN TRAN
 if @ContractID<>0 and @iupdate=0 //i'm confused here
BEGIN
INSERT INTO [dbo].[Installment] 
VALUES(@InstallmentNumber,@month,@installment,@commission)
END
if @ContractID <>0 and @month is not null and @iupdate=1
BEGIN
UPDATE [dbo].[Installment] 
SET 
[ContractID] = @ContractID,
[InstallmentNumber] = @InstallmentNumber,
[currentMonth] = @month,
[installment] = @installment,
[commission] = @commission
WHERE [ContractID] = @ContractID and [currentMonth] = @month
END
Commit 
```

第二个用于逐一阅读所选合同的分期付款我正在尝试编写此存储过程

```
ALTER PROCEDURE [dbo].[spReadInstallment]
@ContractID int = 0
AS
SET NOCOUNT ON 
SET XACT_ABORT ON
BEGIN tran
if @ContractID<>0
begin tran
BEGIN
SELECT     ContractID, InstallmentNumber, currentMonth, installment, commission
FROM         Installment
WHERE     (ContractID = @contractid) // have doubt about the select statement?
END
commit 
```

我对 spReadInstallment 的 SELECT 语句和 spInsertUpdateInstallment 的插入语句感到困惑我是初学者，无法理解背后的错误请指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:33:54.833

> `if @ContractID<>0 and @iupdate=0 //i'm confused here`

您的第一个存储过程正在执行*upsert*（更新或插入） - 它将根据为 PK 参数提供的参数插入或更新表： `@ContractID`和`@iupdate`

当这两个都具有 value`0`时，存储的过程将执行插入。否则，它将对表执行更新。

**在此处分析您是否真的需要参数的所有这些默认值。**

你的第二个存储过程，毫无疑问。`0`在没有默认值的情况下重写它`@ContractID`，并且在 SELECT 操作上没有不必要的多个挂起事务：

```
ALTER PROCEDURE [dbo].[spReadInstallment]
@ContractID int
AS
SET NOCOUNT ON;

SELECT    ContractID, InstallmentNumber, currentMonth, installment, commission
FROM      Installment
WHERE     ContractID = @contractid; 
```

# django - Django 和 UnicodeDecodeError

> ID：10452695
> 
> 赞同：0
> 
> 时间：2012-05-04T16:28:43.383
> 
> 标签：django, utf-8, decode

**我所做的...**

___我有一个上传表单，我可以从其中上传带有图片的 .zip 文件。每次当文件标题带有一些非 ascii 字符 äüõ 时，我都会收到 unicode 解码错误。

```
 title = ' '.join([filename[:filename.rfind('.')], str(count)]) 
```

**错误：**

此行生成图片的标题，而这正是给我错误的行： `'utf8' codec can't decode byte 0x82 in position 2: invalid start byte. You passed in 'cr\x82ations' (<type 'str'>)`

**我试图做的事情：**

我也试过 `.decode('utf-8')`了。但无论我尝试什么，每次都会得到相同的结果。

我在 site.py 中阅读了有关将默认 djangos ascii 更改为 utf-8 的信息，但不确定它是否会有所帮助，并且很确定我不想这样做。

**任何帮助表示赞赏。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T10:52:14.490

失败的原因是因为您尝试加入普通`str`对象：

代替

```
' '.join(..) 
```

利用：

```
u' '.join(..) 
```

或者使用以下方法让您的生活更轻松：

```
from __future__ import unicode_literals 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T07:18:04.500

Django 有一些有用的实用方法可供您使用。

请参阅：[https ://docs.djangoproject.com/en/dev/ref/unicode/#conversion-functions](https://docs.djangoproject.com/en/dev/ref/unicode/#conversion-functions)

我想代码可能看起来像这样：

```
from django.utils.encoding import smart_str

title = ' '.join([smart_str(filename[:filename.rfind('.')]), str(count)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T08:46:02.673

我也相信首先使用 .decode() 是正确的选择，但是，您使用的代码页 ('utf-8')) 可能不正确。您可以尝试“1252”或其他一些吗？以下是您可能感兴趣的一些标准编码 [链接]http://docs.python.org/library/codecs.html?highlight=arabic

# android - Android 活动工作流程

> ID：10452696
> 
> 赞同：0
> 
> 时间：2012-05-04T16:28:52.657
> 
> 标签：android, android-activity

如果我启动一个带有 ClearTop 标志的 android 活动，并使用 SetContentView 切换视图，这些活动是否仍会在后台挂起并遵循典型的工作流程 onRestart、onPause 等？

所有这些活动都是使用 startActivity btw 触发的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:38:13.377

任何活动都遵循活动生命周期。如果它有明确的顶部标志，那么上面的活动（如果有的话）都将关闭（将有`onStop`和 onDestroy），并且该明确的顶部活动因此成为顶部活动。对于该活动，将有`onStart`和`onResume`

# c++ - 类名中使用的范围解析运算符是什么意思

> ID：10452698
> 
> 赞同：5
> 
> 时间：2012-05-04T16:28:55.050
> 
> 标签：c++, class, scope-resolution

我遇到了这段代码。

```
class SomeClass::OtherClass : public BaseClass
{
  // stuff in here
} 
```

SomeClass 是一个类，那么也许 OtherClass 是存在于 SomeClass 范围内的一个类？我只是从未见过它这样做。

那么，就是这个意思吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T16:30:11.627

> 也许 OtherClass 是存在于 SomeClass 范围内的类？

给自己打勾。这就是它的意思。

这用于`OtherClass`在内部声明后随后定义`SomeClass`：

```
class SomeClass {
    class OtherClass;
    OtherClass* GetOtherClassInstance() { ...}
};
class SomeClass::OtherClass {
} 
```

如果内部类仅在外部类的上下文中有意义，则可以这样做。

```
class Vector {
  class Iterator;
  Iterator* GetStart();
};
class Vector::Iterator {
   details.
} 
```

正如其他地方所提到的，pimpl 习惯用法是对具有延迟定义的内部类的出色使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:31:19.737

这意味着OtherClass 是SomeClass 的内部类。最好已经在那里宣布了。适用于 pimpl 成语：

```
struct my_object {
  ...

private:
  struct my_impl;
  my_impl * pimpl;
};

// in a cpp file...
struct my_object::my_impl {
  ...implementation details of my_object
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-14T11:00:36.390

一些类是基类的名称，另一些类是派生类，它链接派生类内部，冒号派生类后链接基类。在您的问题中，答案是提到了两个基类和一个派生类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T16:31:12.403

我认为`SomeClass`是`OtherClass`所在的名称空间

```
class BaseClass {};
namespace SomeClass
{
    class OtherClass;
};

class SomeClass::OtherClass : public BaseClass
{
  // stuff in here
}; 
```

# opengl - 从受影响的像素反向三角形查找？

> ID：10452699
> 
> 赞同：0
> 
> 时间：2012-05-04T16:28:56.067
> 
> 标签：opengl, mesh

假设我有一个 3D 三角形网格和一个可以渲染网格的 OpenGL 帧缓冲区。

对于每个渲染的像素，我需要构建一个渲染到该像素的三角形列表，即使是那些被遮挡的。

我能想到的唯一方法是单独渲染网格中的每个三角形，然后遍历帧缓冲区中的每个像素以确定它是否受到三角形的影响（使用深度缓冲区或用户定义的片段着色器输出变量）。然后我必须清除帧缓冲区并对下一个三角形执行相同的操作。

有没有更有效的方法来做到这一点？

我考虑过，对于片段着色器中的每个片段，写出一个三角形标识符，但 GLSL 不允许输出整数列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:07:52.983

> 对于每个渲染的像素，我需要构建一个渲染到该像素的三角形列表，即使是那些被遮挡的。

您将无法为整个场景执行此操作。没有允许您将“列表”与每个像素相关联的结构。

您可以使用选择缓冲区获取影响特定区域的图元列表（请参阅 参考资料[`glRenderMode(GL_SELECT)`](http://www.opengl.org/sdk/docs/man/xhtml/glRenderMode.xml)）。

您可以使用模板缓冲区技术获得场景深度复杂性。

如果总共有 8 个三角形，那么您可以使用模板缓冲区获取影响每个像素的三角形列表（基本上，为每个三角形分配唯一的 (1 << n) 模板值，并将其与每个模板 OP 的现有模板缓冲区值或）。

但是要在一般情况下解决它，您需要自己的光栅化器和大量内存来存储每个像素的三角形列表。毕竟，这个问题与多层深度缓冲区非常相似。

> 有没有更有效的方法来做到这一点？

实际上，是的，但它不是硬件加速的，OpenGL 与它无关。将所有栅格化三角形存储在 OCT 树中。通过 OCT 树为您要测试的每个像素发射一条“射线”，并计算该射线击中的三角形。那是碰撞检测问题。

# .net - 使用 COM 对象将 Silverlight Datagrid 导出到 Excel

> ID：10452706
> 
> 赞同：0
> 
> 时间：2012-05-04T16:29:18.733
> 
> 标签：.net, vb.net, silverlight, excel, silverlight-4.0

我在silverlight 4 应用程序上有一个数据网格，我试图通过在silverlight 中调用Excel 的COM 组件来导出到excel。它不断出错并告诉我不支持该功能。我不能完全弄清楚出了什么问题，并相信我的代码是可靠的，但显然不是。

```
Private Sub Button2_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)

        Dim excel As Object = AutomationFactory.CreateObject("Excel.Application")

        excel.visible = True

        Dim workbook As Object = excel.workbooks

        workbook.add()

    Dim sheet As Object = excel.activesheet
    Dim cell As Object = Nothing
    Dim i As Integer = 1

    'populate the excel sheet
    For Each item In ActivityTypeCountDataGrid.ItemsSource

        cell = sheet.cells(i, 1)
        cell.Value = item.Activity_Type
        cell.ColumnWidth = 50

        cell = sheet.cells(i, 2)
        cell.Value = item.Activity_Type_Count
        cell.ColumnWidth = 50

        i += 1
    Next item

End Sub 
```

这是数据网格 ![数据网格](../Images/f99151a08da04d20815599d8810f839b.png)

这是错误 ![错误](../Images/27738964714e955802e9bd1c853fb2dd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:53:59.757

你有两个选择。

1) 将此应用程序转换为 Silverlight OOB 应用程序。

2) 将数据传递给 WCF 服务。让服务创建 Excel 工作簿。将文件（以 、 等形式）传递`byte[]`回`IEnumerable<byte>`Silverlight 应用程序，并提示用户使用`SaveFileDialog`.

# php - 单击 div 内的链接会在新窗口中加载

> ID：10452715
> 
> 赞同：0
> 
> 时间：2012-05-04T16:29:58.627
> 
> 标签：php, javascript, html, login-script

我试图让我网站中的登录表单出现在页面中间，背景为灰色，所以我这样做了：

```
 <style type="text/css"> 
        #cover5{position:absolute;top:0px;left:0px;overflow:hidden;display:none;width:100%;height:100%;background-color:gray;text-align:center}
    #warning{top: 150px;margin:auto;position:relative;width:600px;height:fit-content;background-color:white;color:black;padding:10px; zIndex:20; border: 5px solid #003366;}
        </style
        <div id="cover5" onclick="javascript:cover5();">
                <div id="warning" onclick="javascript:cover5();">
                    <?php include 'SignIn.php'; ?>
                </div>
            </div>
<script>
 function cover5()
            {

                var cover=document.getElementById('cover5');

                if(vis)
                {
                    vis=0;
                    cover.style.display='block';
                }
                else
                {
                    vis=1;
                    cover.style.display='none';
                }
            }
</script> 
```

这是 SignIn.php 的代码

```
<form id='login' action='SignIn.php' method='post' accept-charset='UTF-8' onsubmit="return valid()">
<fieldset >
<legend>SignIn</legend>
<input type='hidden' name='submitted' id='submitted' value='1'/>
<label for='username' >Email:</label>
<input type='text' name='email' id='username'  maxlength="50" /> <br />
<label for='password' >Password:</label>
<input type='password' name='password' id='password' maxlength="50" /> <br />
<input type='submit' name='Submit' value='Login' /> <br />
<a href='resetPassword1.php'> Forgot/Reset Password? Click Here</a>
</fieldset>
</form> 
```

**问题是，当使用点击忘记/重置密码？或输入错误的数据一切都在新窗口中打开，我使用 iframe 而不是 div 但是当使用登录成功时，主页在同一个 iframe 中打开，所以有人知道如何解决这个问题吗？** 抱歉这个长问题:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:44:02.457

在链接内部尝试`target="_self"`设置

```
<a href="resetPassword1.php" target="_self">Forgot/Reset Password? Click Here</a> 
```

如果这不起作用，请在另一个浏览器中尝试。有时浏览器的默认设置可能会搞砸。另一个可能的问题可能是您网站中某处的 Javascript 将您的链接发送到新窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:38:30.930

您需要将此添加到您的链接中：

```
target='_self' 
```

所以它看起来像这样：

```
<a href='resetPassword1.php' target='_self'> Forgot/Reset Password? Click Here</a> 
```

你也可以和其他人一起玩，比如在新窗口中打开：

```
target='_blank' 
```

希望这可以帮助

# qt - QTranslator 和 UTF-8 组合给我带来了麻烦

> ID：10452717
> 
> 赞同：1
> 
> 时间：2012-05-04T16:30:01.403
> 
> 标签：qt

在 Mac 上使用 Qt 4.7.4。

我的 *.TS 文件是使用我编写的 perl 脚本生成的，并且是 UTF-8 格式。与遗留依赖关系的长篇故事。我们必须支持 13 种语言，包括一些外来语言。从中生成 *.QM 文件似乎效果很好。您可以将 *.QM 文件加载到 Qt Linguist 中，一切看起来都很健康。

由于遗留原因，我的系统语言是“枚举”。也就是说，我做这样的事情：

```
QString label = tr("APP_STRINGS_MYLABEL_TEXT"); // this translates to 13 langauges... 
```

因此，例如英语 .TS 文件的摘录如下：

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE TS>
<TS version="2.0" language="en">
<defaultcodec>UTF-8</defaultcodec>
<context>
  <name>MyApp</name>
    <message>
      <source>APP_STRINGS_MYLABEL_TEXT/source>
      <translation>My Label Text In English</translation>
    </message>
..
..
..
</context> 
```

我的项目文件有以下内容：

```
CODECFORTR = UTF-8 
```

我的主要方法具有如下所示的测试代码：

```
QTextCodec::setCodecForTr(QTextCodec::codecForName("UTF-8"));
QTranslator translator;
bool empty = translator.isEmpty(); // Returns TRUE
bool loaded = translator.load("myApp_en","/Users/user/Dev/myApp/translation");
empty = translator.isEmpty(); // returns FALSE

// install the translator.
MyApp->installTranslator(&translator);

// Here comes my problem...
QString test = MyApp->trUtf8("APP_STRINGS_MYLABEL_TEXT"); // returns "APP_STRINGS_MYLABEL_TEXT"
QString test2 = MyApp->tr("APP_STRINGS_MYLABEL_TEXT"); // returns "APP_STRINGS_MYLABEL_TEXT" 
```

正如你所看到的，我所有的字符串都被翻译回它们的原始值。没有真正的翻译发生。如果您知道为什么会发生这种情况，我将不胜感激。我现在不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:09:25.300

罪魁祸首是上下文。由于我使用的是从第三方来源生成的字符串，因此上下文总是错误的。一旦我开始在翻译 API 中明确使用“MyApp”上下文，它就开始工作了。

感谢所有回复的人。

# c++ - “没有为平台 Win32 分配给这个项目的 Qt 版本” - Qt 的 Visual Studio 插件

> ID：10452721
> 
> 赞同：39
> 
> 时间：2012-05-04T16:30:20.073
> 
> 标签：c++, visual-studio-2010, qt

我有一个 Qt 项目，我正在 Visual Studio 2010 中使用 Qt Visual Studio 插件（用于 Qt 4.8）。该项目在我的工作机器上运行良好，我正在尝试在我的家用机器上运行它。当我尝试构建时，我收到以下错误：

> 没有为平台 Win32 分配给该项目的 Qt 版本。
> 
> 请使用“更改 Qt 版本”功能并为此平台选择有效的 Qt 版本。

但是，它被设置为使用有效的 Qt 版本（我在家工作的另一个项目也使用这个插件）。为什么会出现这种情况？当我进入 Qt -> Qt Options 时，我看到了一个有效的版本 (4.8.0)。谢谢

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-05-11T14:23:04.543

您是否在项目的 Qt 设置中选择了合适的 Qt 版本？

更详细：如果您右键单击项目，在上下文菜单末尾附近应该有一个“ **Qt 项目设置”选项（或类似的 - 我使用德语版本）。**在那里你可以设置这个特定项目使用的 Qt 版本。这可能设置不正确吗？

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-12-15T05:29:01.033

解决方案：

1.  右键单击您的项目；
2.  **Qt 项目设置**；
3.  在**属性**选项卡下，您将找到选项**版本**；
4.  将其更改为适当的值；

现在，继续你的项目。

希望有所帮助

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-07-05T09:42:15.270

在使用 Qt 5.15.0 的 Windows 上使用 x64 Visual Studio 2019 解决方案时遇到了同样的问题。基于@Fabian 的回答和@sitting-duck 的精彩评论：

*   安装`Qt VS Tools`扩展
*   选择`Extensions > Qt VS Tools > Qt Options`
*   在`Qt Versions`选项卡上单击`Add`
*   将“版本名称”设置为“Qt-5.15.0”之类的名称
*   将“路径”设置为“[QT-PATH]\5.15.0\msvc2019_64”
*   打开`Project Properties > Qt Project Settings > General > Qt Installation`
*   确保将其设置为“Qt-5.15.0”并关闭项目属性
*   右键单击解决方案（在`Solution Explorer`选项卡中）并选择`Change Solution's Qt Version`
*   确保`Qt-5.15.0`被选中

你应该很高兴。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-11T18:31:56.967

在记事本中打开 vcxproj 文件，查找 QtVersion...something=... 确保版本值确实是 4.8.0（或者您的实际 QT SDK 版本）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-14T03:54:48.840

我也发现了这个问题。我找到了解决方案。您必须保持 Qt 版本名称与创建使用的项目完全相同。您认为您可以自由更改，但实际上并非如此。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-05T14:05:25.127

如果要在不同计算机之间移动 Qt 项目，最好使用 qt 项目文件，而不是 MSVC (.vcxproj) 文件。因此，当您从工作机器家搬出时，创建一个 .pro 文件（在 Qt 菜单中，您可以找到执行此操作的必要选项），然后在家中加载 .pro 文件，再次使用 MSVC 中的 Qt 菜单。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-04T17:25:22.833

另一件事可能是正在使用的平台不是您认为的平台。在 MSVC 中右键单击项目，选择属性，然后按配置管理器。然后检查所有配置和平台是否符合您的预期。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-25T16:50:50.773

我在从 Qt5.9 迁移到 Qt5.10 的过程中遇到了同样的问题。我们有一个由许多项目组成的解决方案（Visual Studio）。其中一些有 QtVersion = "Qt5.9" 和其他有 QtVersion = "Qt5.7" （是的，这是不准确的项目设置）

因此，在我将所有 Qt 项目的设置从 5.9 自动更改为 5.10 并从版本列表中删除 Qt5.7 之后 - 我得到了同样的错误。这个错误被简单地修复了——我只是将 Qt5.7 添加回版本列表（暂时直到所有项目的 Qt 版本没有更改为 5.10）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-06-04T22:26:54.513

就我而言，我使用 git 将一个 Visual Studio 项目及其所有文件（包括 、 等）移植`.sln`到`.vcxproj`另一台计算机上。当我在新计算机上设置所有内容时，我不小心为 VS 中的 Qt 可执行文件选择了一个不同的文件夹（我选择`C:\Qt\5.9.9\winrt_x86_msvc2017`了而不是`C:\Qt\5.9.9\msvc2017_64`）。当我仔细检查了我在原来的计算机上选择了哪个，然后在新计算机上选择了相同的，一切都很好。

选择 Qt 文件夹：（`Extensions -> Qt VS Tools -> Qt Options -> Add -> Path`选择路径后，版本名称会自动填充）。

这一切都描述了使用 Visual Studio 2019 的过程，[这里](https://marketplace.visualstudio.com/items?itemName=TheQtCompany.QtVisualStudioTools2019)有 Qt 插件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-10-13T02:25:30.853

您可以按照 AlainD 的说明进行操作。它对我有用。只需右键单击解决方案-> 更改解决方案的 Qt 版本，它将对其所有项目进行更改。

# html - 滚动捕捉到锚链接的位置 - 不需要的行为和低效的实现

> ID：10452724
> 
> 赞同：0
> 
> 时间：2012-05-04T16:30:39.607
> 
> 标签：html, css, tabs, pseudo-class

我使用 CSS 和 HTML 创建了一个简单的选项卡式内容显示。此代码将嵌入到包含其他内容的更长页面的中途。

这是 jsFiddle：http: [//jsfiddle.net/ollyf/R9rq2/](http://jsfiddle.net/ollyf/R9rq2/)

我已经使用了，`:target`但我不完全确定它是如何工作的。阅读一些教程，但我并不完全理解这种行为。我觉得这是糟糕/低效的代码。

1.  有没有更有效的方法来实现这种标签式内容效果？
2.  如果没有，如何在滚动位置不对齐 DIV 顶部的情况下显示内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:40:42.957

伪选择器`:target`由页面锚点触发。这意味着当您的 URL 为[http://www.example.com/#anchor1](http://www.example.com/#anchor1) `#anchor1:target`时，样式将被激活。该页面也滚动到#anchor1 元素。这是浏览器中的默认功能。

实现选项卡效果的另一个选项是通过使用 javascript。这个概念与 javascript 相同，您仍然`display`通过点击处理程序切换属性。有几个现成的脚本可用于选项卡。这是一个示例[http://jquerytools.org/demos/tabs/index.html](http://jquerytools.org/demos/tabs/index.html)

希望这有助于澄清事情。

# java - 获取同一局域网内主机的文件系统结构

> ID：10452729
> 
> 赞同：1
> 
> 时间：2012-05-04T16:30:50.123
> 
> 标签：java

JAVA 应用程序是否可以获取同一 LAN 上另一台主机的文件系统目录结构？

例如：

机器 A 和 B 在同一个 LAN 上。A 是本地主机，B 是远程主机。在 A 上执行的 JAVA 应用程序是否有可能获得 B 的目录结构（本质上是“ls -R”）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:33:48.047

是的，尽管您必须使用 SSH 之类的东西来打开远程终端会话来执行`ls`命令。在不打开套接字和机器 B 以某种方式与请求合作的情况下，仅使用 Java 就无法原生地做到这一点。（如果可以的话，那将是一个巨大的安全漏洞……）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:33:55.580

一种方法是通过协议发出`ls -R`命令`ssh`。

有关`ssh`库建议，请参阅[Java 的 SSH 库](https://stackoverflow.com/questions/995944/ssh-library-for-java)

# c# - 计算 RichTextBox wp7 中的行数

> ID：10452730
> 
> 赞同：0
> 
> 时间：2012-05-04T16:30:53.803
> 
> 标签：c#, silverlight, windows-phone-7

我在 WP7 上遇到了 RichTextBox 的一些问题。我想获取此控件中的行数或其他任何可以为我提供有关当前屏幕上文本位置的信息的信息。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:55:29.630

您可以拆分字符串以创建字符串数组。例如：

```
string[] lines = yourRichTextBox.Text.Split(new[] {Environment.NewLine}, StringSplitOptions.RemoveEmptyEntries);

// lines.Count will give you total number of lines 
```

我添加了 StringSplitOptions 枚举参数以忽略通常以数组结尾的空值。如果您需要获得真实的行数，您可能希望避免这种情况。

# winforms - 在设置了 TransparencyKey 的 Winform 首次显示时消除黑色闪烁

> ID：10452740
> 
> 赞同：1
> 
> 时间：2012-05-04T16:31:29.170
> 
> 标签：winforms, transparency, flicker

以下代码在显示表单之前（透明地）在屏幕上产生黑色闪烁，我想知道我有哪些选项可以消除该闪烁？

```
 Form f = new Form();
   f.BackColor = Color.Lime;
   f.TransparencyKey = f.BackColor;
   f.StartPosition = FormStartPosition.Manual;
   f.Bounds = Screen.PrimaryScreen.WorkingArea;
   f.Show(); 
```

如果我创建一个新项目，将表单的背景设置为 Lime，将 TransparencyKey 设置为 Lime，我会得到相同的结果，然后单击运行。

我尝试过的事情：

1.  将不透明度设置为 99%——同样闪烁

2.  在 OnCreateParams 或使用 SetWindowLong 强制 WS_EX_COMPOSITED - 相同的闪烁

3.  显示较小的窗口，或 0 宽度，或屏幕外，然后移动到所需的位置 - 导致我的窗体后面的窗口无法正确重绘的不良显示问题。

4.  设置 ControlStyles.Opaque、ControlStyles.UserPaint 和其他几个 ControlStyles 组合并覆盖不同的绘制/背景绘制事件——各种结果，或者相同的闪烁、更严重的闪烁或表单不透明。

迁移到 WPF 可能是一种选择，但并不是真正寻找“使用 WPF”作为答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:59:28.397

设置`Opacity`为 0.01。

如果您需要表单（或其中的一部分）可见 - 然后在表单创建完成后重新设置不透明度：

```
Form f = new Form { Opacity = 0.01 };
f.Show();
f.BeginInvoke( new Action(() => f.Opacity = 0.99 )); 
```

编辑：按照 Tergiver 的建议更新了清洁剂

# ruby-on-rails - 向 Refinery 中的会话脚手架添加新的页面操作

> ID：10452742
> 
> 赞同：0
> 
> 时间：2012-05-04T16:31:37.737
> 
> 标签：ruby-on-rails, refinerycms

我正在构建一个炼油厂 cms 应用程序，并且正在尝试添加一个替代登录屏幕，该屏幕将使用 .NET Web 服务。然而，虽然使用该服务的代码很简单，但我似乎无法让 rails 或炼油厂确认它的视图确实存在，因此**我输入 url 的任何路线都不会将我带到备用日志的视图**我不知道为什么**。**我的视图文件位于 /views/sessions/dotnet.html.erb 并且当前我的 session_controller.rb 包含该方法的定义

```
class SessionsController < ::Devise::SessionsController
   .
   .
   .
  def create
    super
    rescue ::BCrypt::Errors::InvalidSalt, ::BCrypt::Errors::InvalidHash
      flash[:error] = t('password_encryption', :scope => 'users.forgot')
      redirect_to new_user_password_path
  end

  def dotnet
    .
    .
    .
  end
   .
   .
   .
end 
```

并且没有注释行的 routes.rb 文件看起来像：

```
Quicksmile::Application.routes.draw do
   resources :sessions

   resources :dotnetwrappers

   match "/" => redirect("/new-practices")

end 
```

我已经尝试过[这里](https://stackoverflow.com/questions/401241/adding-an-action-to-an-existing-controller-ruby-on-rails "向现有控制器添加操作")和[这里](https://stackoverflow.com/questions/9801519/how-to-add-a-new-link-in-active-scaffold-rails-3 "添加新链接")的方法，但它们都没有奏效。**如何设置它以便实际上有一个对应于 /views/sessions/dotnet.html.erb 文件的 url？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:10:28.360

看起来您实际上并没有为 SessionsController#dotnet 添加路由。

你需要类似的东西：

```
Quicksmile::Application.routes.draw do
  resources :sessions
  get :dotnet_login => "sessions#dotnet", :as => "dotnet_login"

  # ...
end 
```

`main_app.dotnet_login_path`然后，您可以在代码中使用 URL 帮助`main_app.dotnet_login_url`程序。

更多细节可以在[Rails 路由指南](http://guides.rubyonrails.org/routing.html)中找到。

# php - MySQL & PHP 小数精度错误

> ID：10452744
> 
> 赞同：0
> 
> 时间：2012-05-04T16:31:42.150
> 
> 标签：php, mysql, decimal, precision

24151.40 - 31891.10 = -7739.699999999997

我从 MySQL 表中获取这两个数字，类型为 decimal(14,2) 24151.40 31891.10 它完全按照上述方式保存，它的回声与 PHP 中的完全一样。但是从第一个值中减去第二个值的那一刻，我得到一个数字 -7739.699999999997 而不是 -7,739.7。为什么要额外的精度？它来自哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:34:48.717

从[我为 Authorize.Net 写的一篇文章中](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Precision-Math-with-PHP/ba-p/8368)：

一加一等于二，对吧？0.2 加上 1.4 乘以 10 怎么样？那等于16，对吧？如果您使用 PHP（或大多数其他编程语言）进行数学运算，则不会：

```
echo floor((0.2 + 1.4) * 10); // Should be 16\. But it's 15! 
```

这是由于浮点数是如何在内部处理的。它们以固定的小数位数表示，并且可能导致数字加起来不像您期望的那样。在内部，我们的 0.2 加 1.4 乘以 10 示例计算大约为 15.9999999998 左右。当处理不需要像百分比这样精确的数字时，这种数学方法很好。但是，当处理货币精度问题时，这里或那里丢失的一分钱或一美元很快就会加起来，没有人喜欢在任何丢失的钱中亏本。

**BC 数学解决方案**

幸运的是，PHP 提供了[BC Math 扩展](http://us2.php.net/manual/en/book.bc.php)，它是“用于任意精度数学的 PHP 提供了二进制计算器，它支持任何大小和精度的数字，以字符串表示。” 换句话说，您可以使用此扩展对货币价值进行精确的数学运算。[BC Math 扩展包含](http://us2.php.net/manual/en/ref.bc.php)允许您精确执行最常见操作的函数，包括[加法](http://us2.php.net/manual/en/function.bcadd.php)、[减法](http://us2.php.net/manual/en/function.bcsub.php)、[乘法](http://us2.php.net/manual/en/function.bcmul.php)和[除法](http://us2.php.net/manual/en/function.bcdiv.php)。

**一个更好的例子**

这是与上面相同的示例，但使用 bcadd() 函数为我们进行数学运算。它需要三个参数。前两个是我们希望添加的值，第三个是我们希望精确到的小数位数。由于我们使用的是金钱，我们将精度设置为小数点后两位。

```
echo floor(bcadd('0.2', '1.4', 2) * 10); // It's 16 like we would expect it to be. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:34:11.687

PHP 不像 MySQL 那样具有十进制类型，它使用浮点数；浮点数因不准确而臭名昭著。

要解决这个问题，请查看`number_format`，例如：

```
echo number_format(24151.40 - 31891.10, 2, '.', ''); 
```

为了更准确的数字操作，您还可以查看 PHP 的数学扩展：

[http://www.php.net/manual/en/refs.math.php](http://www.php.net/manual/en/refs.math.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:34:37.737

这与一般浮点/双精度率有关，这在科学上与 1.FRACTAL * 2^exponential 幂有关。由于前缀为 1，因此在技术上没有零这样的东西，您可以获得的最接近 0 的值是 1.0 * 2 ^ -127，即 .000000[127 0s]00001

通过将您的答案四舍五入到一定的精度，舍入因子将为您提供更精确的答案

[http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_round](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_round)

# c# - C# 中的简单网络爬虫

> ID：10452749
> 
> 赞同：12
> 
> 时间：2012-05-04T16:32:08.857
> 
> 标签：c#, web-crawler

我创建了一个简单的网络爬虫，但我想添加递归函数，以便打开的每个页面都可以获取此页面中的 URL，但我不知道如何做到这一点，我还想包含要制作的线程它更快。这是我的代码

```
namespace Crawler
{
    public partial class Form1 : Form
    {
        String Rstring;

        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {

            WebRequest myWebRequest;
            WebResponse myWebResponse;
            String URL = textBox1.Text;

            myWebRequest =  WebRequest.Create(URL);
            myWebResponse = myWebRequest.GetResponse();//Returns a response from an Internet resource

            Stream streamResponse = myWebResponse.GetResponseStream();//return the data stream from the internet
                                                                       //and save it in the stream

            StreamReader sreader = new StreamReader(streamResponse);//reads the data stream
            Rstring = sreader.ReadToEnd();//reads it to the end
            String Links = GetContent(Rstring);//gets the links only

            textBox2.Text = Rstring;
            textBox3.Text = Links;
            streamResponse.Close();
            sreader.Close();
            myWebResponse.Close();

        }

        private String GetContent(String Rstring)
        {
            String sString="";
            HTMLDocument d = new HTMLDocument();
            IHTMLDocument2 doc = (IHTMLDocument2)d;
            doc.write(Rstring);

            IHTMLElementCollection L = doc.links;

            foreach (IHTMLElement links in  L)
            {
                sString += links.getAttribute("href", 0);
                sString += "/n";
            }
            return sString;
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T10:49:29.287

我将您的 GetContent 方法修复如下，以从已爬网页面获取新链接：

```
public ISet<string> GetNewLinks(string content)
{
    Regex regexLink = new Regex("(?<=<a\\s*?href=(?:'|\"))[^'\"]*?(?=(?:'|\"))");

    ISet<string> newLinks = new HashSet<string>();    
    foreach (var match in regexLink.Matches(content))
    {
        if (!newLinks.Contains(match.ToString()))
            newLinks.Add(match.ToString());
    }

    return newLinks;
} 
```

**更新**

修正：正则表达式应该是 regexLink。感谢@shashlearner 指出这一点（我的输入错误）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-07T02:37:27.163

我使用[Reactive Extension](http://msdn.microsoft.com/en-us/data/gg577609.aspx)创建了类似的东西。

[https://github.com/Misterhex/WebCrawler](https://github.com/Misterhex/WebCrawler)

我希望它可以帮助你。

```
Crawler crawler = new Crawler();

IObservable observable = crawler.Crawl(new Uri("http://www.codinghorror.com/"));

observable.Subscribe(onNext: Console.WriteLine, 
onCompleted: () => Console.WriteLine("Crawling completed")); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T14:33:24.653

以下包括一个答案/建议。

我相信您应该使用 a`dataGridView`而不是 a `textBox`，因为当您在 GUI 中查看它时，更容易看到找到的链接（URL）。

你可以改变：

```
textBox3.Text = Links; 
```

到

```
 dataGridView.DataSource = Links; 
```

现在的问题，你还没有包括：

```
using System.  "'s" 
```

使用了哪些，如果我能弄明白它们，将不胜感激。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T14:41:11.103

从设计的角度来看，我写了一些网络爬虫。基本上，您想使用 Stack 数据结构实现深度优先搜索。您也可以使用广度优先搜索，但您可能会遇到堆栈内存问题。祝你好运。

# .net - 调用 DirectorySearcher.FindOne() 且 AD 不可用时会引发什么异常？

> ID：10452751
> 
> 赞同：2
> 
> 时间：2012-05-04T16:32:17.407
> 
> 标签：.net, active-directory

是否抛出异常（如果是这样），返回 null，返回空数据表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:39:33.213

例外是 System.Runtime.InteropServices.COMException。消息将是“服务器无法运行”。

# node.js - Express、EJS、未定义测试的挑战

> ID：10452759
> 
> 赞同：1
> 
> 时间：2012-05-04T16:32:41.687
> 
> 标签：node.js, express, ejs

我正在使用 express 框架创建一个带有 nodejs 的简单网站，couchdb 用于数据库，EJS 用于模板。有时我的一些字段在我的一些 JSON 文档中为空或未定义，我需要处理它。

```
<% if (typeof test !== 'undefined') { %>
  <p><%= test %></p>
<% } %> 
```

那段代码似乎可以很好地处理未定义的“测试”字段，但下面的代码会抛出一个错误，提示“测试未定义”

```
<% if (test) { %>
  <p><%= test %></p>
<% } %> 
```

为什么 javascript 不理解 test 是未定义的，然后在 if 子句中放入 false ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T16:43:21.287

因为“未定义”的概念不同于 JavaScript 语言中定义的变量的状态。这样做的原因是可以理解的，但效果可能会令人困惑，尤其是在变量名与对象属性方面。

您已经演示了如何尝试访问未定义的变量会引发异常。不要将此状态（未定义变量）与“未定义”类型混淆：

```
if (bogusVariable) { // throws ReferenceError: bogusVariable is not defined.
typeof(bogusVariable); // => undefined - wow, that's confusing. 
```

但是，可以安全地测试未定义对象的属性：

```
var x = {}; // an object
x.foo; // => undefined - since "x" has no property "foo".
typeof(x.foo); // => undefined
if (!x.foo) { /* true */ } 
```

您可以通过注意所有变量实际上是“全局”对象（Web 浏览器中的“全局”或“窗口”）的属性来利用此属性。

```
bogus; // => ReferenceError: bogus is not defined.
global.bogus; // => undefined (on node/rhino)
window.bogus; // => undefined (on web browsers) 
```

因此，您也许可以这样编写 EJS 代码：

```
<% if (global.test) { %>
  <p><%= test %></p>
<% } %> 
```

是的，这很令人困惑，JavaScript 语言的许多部分也是如此。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:35:01.633

大多数语言都是这样的：

```
 irb
  >> foo
  NameError: undefined local variable or method `foo' for main:Object
        from (irb):1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-19T14:26:33.273

要检查是否定义了测试，您需要这样做：

```
<% if (this.test) { %>
   here, test is defined
<% } %> 
```

# c# - Windbg：无法遍历托管堆栈

> ID：10452761
> 
> 赞同：6
> 
> 时间：2012-05-04T16:33:12.400
> 
> 标签：c#, asp.net, .net, windbg, adplus

通过 Adplus，我附加了一个流程（在我的 iis 中我运行了一个网站）

```
C:\Program Files (x86)\Debugging Tools for Windows (x86)>ADPlus -crash -pn w3wp .exe -o C:\dumps 
```

以下是重现该网站的 stackoverflow 异常的代码：

```
protected void Page_Load(object sender, EventArgs e)
{

}
public void Hello()
{
    Hello();
}

protected void Button_Test_Click(object sender, EventArgs e)
{
    Hello();
} 
```

为我创建的转储位于：

```
C:\Dumps\Crash_Mode__Date_05-04-2012__Time_21-44-2020\PID-12452__W3WP.EXE_DefaultAppPool__1st_chance_Process_Shut_Down__full_2bc0_2012-05-04_21-45-53-704_30a4 
```

我在 windbg 中打开了这个转储并运行了这些命令

```
0:000> .loadby sos clr
0:000> !clrstack 
```

我收到以下消息

```
Unable to walk the managed stack. The current thread is likely not a 
managed thread. You can run !threads to get a list of managed threads in
the process 
```

你能帮我修一下吗？如何追踪错误的位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-05-05T15:22:06.643

这将返回每个线程的堆栈跟踪，您将能够看到托管线程的堆栈跟踪： `~*e !clrstack`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-07T22:25:31.280

您可以键入 !pe 来获取异常，或者键入 ~#s 来切换到故障线程。!clrstack 应该可以工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-16T00:19:16.453

正如 Remus 指出的，当前线程不是托管线程。~ 在 windbg 上会给你线程列表，如果你仔细观察（我的坏显示器让我更糟：P）有一个 . （点）在当前线程之前。您需要将其更改为托管线程 - 您可以通过 ~s.

现在我将请调试大师来帮助我 - 如何找到哪个线程是托管线程？一位同事告诉我，通常线程 0 是托管的，我能够逃脱，直到这个问题：|

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-25T20:32:26.160

只需按照 ms 教程： [https ://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugging-managed-code](https://docs.microsoft.com/en-us/windows-hardware/drivers/debugger/debugging-managed-code)

描述了如何为托管代码和两种方案加载所需扩展的正确版本：1）从同一台机器转储和 2）从其他机器转储。

# java - 安全角色分配，从 weblogic 迁移到 jboss

> ID：10452763
> 
> 赞同：0
> 
> 时间：2012-05-04T16:33:25.657
> 
> 标签：java, jakarta-ee, jboss

我有一个 weblogic-application.xml 文件如下：

```
<weblogic-application ...>
  <security>
    <security-role-assignment>
      <role-name>Administrator</role-name>
      <principal-name>AdministratorsType1</principal-name>
      <principal-name>AdministratorsType2</principal-name>
    </security-role-assignment>
    ...
  </security>
</weblogic-application> 
```

和 web.xml 如下：

```
<web-app ...>
  ...
  <security-role>
    <role-name>Administrator</role-name>
  </security-role>
  ...
</web-app> 
```

* * *

现在，在安全角色分配中映射角色名称的方式是特定于 weblogic 的，我必须迁移到老板。如何在 jboss 中重写这个安全角色分配？=

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:01:05.043

我认为这可能是您正在寻找的：

[https://community.jboss.org/wiki/MappingRolesInJBossApplicationServerV5x](https://community.jboss.org/wiki/MappingRolesInJBossApplicationServerV5x)

# java - 将 BufferedReader、DataOutputStream 和 Sockets 传递给可运行线程类的 Java 在写入流时会导致套接字异常

> ID：10452765
> 
> 赞同：0
> 
> 时间：2012-05-04T16:33:32.977
> 
> 标签：java, multithreading, sockets, constructor, bufferedreader

我有两个“客户端”，一个“服务器”，可能还有一个实现可运行的“线程管理器”。

两个客户端通过 TCP 与服务器连接并参与协议握手/身份验证（成功），然后我尝试将现有的 BufferedReaders、DataOutputStreams 和 Sockets 传递给“ThreadManager”以管理 Client1 和 Client2 之间的线程消息：

服务器：

```
ThreadManager tManager = new ThreadManager(serviceToClient1,  inputStream, outputStream, serviceToClient2, inputStream2, outputStream2);
new Thread(tManager).start();
serviceToClient1.close();
serviceToClient2.close(); 
```

线程管理器：

```
public ThreadManager(Socket cli1, BufferedReader inputStream, DataOutputStream outputStream, Socket cli2, BufferedReader inputStream2, DataOutputStream outputStream2)
{
this.cli1 = cli1;
this.inputStream = inputStream;
this.outputStream = outputStream;
this.cli2 = cli2;
this.inputStream2 = inputStream2;
this.outputStream2 = outputStream2;
} 
```

此构造成功，但是在`.start()`从服务器调用时，一旦从 ThreadManager 中调用以下命令，调试就会显示“套接字异常：套接字已关闭”错误：

```
outputStream.writeBytes("NUMBER: " + i + "\n"); 
```

我不确定问题出在哪里，我是否需要从 ThreadManager 中关闭连接并重新创建套接字和流读取器/写入器？我尝试只在 ThreadManager 构造函数中传递套接字，然后创建`new BufferedReader... etc.`，但这似乎同样糟糕。任何人都可以提出解决方案，或者问题出在哪里（或两者兼而有之！）:) 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:59:21.530

在`Socket`尝试从`Thread`.

# php - wordpress中的正则表达式错误分隔符

> ID：10452766
> 
> 赞同：2
> 
> 时间：2012-05-04T16:33:41.840
> 
> 标签：php, regex, wordpress

我是正则表达式的新手，我有这个简单的疑问。

我在wordpress中找到了这段代码

```
$self = preg_replace('|^.*/wp-admin/|i', '', $self); 
```

根据[php.net 上的文档，](http://php.net/manual/en/regexp.reference.delimiters.php) `|`不允许作为分隔符..

有人可以解释代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T21:42:35.420

你试过了吗？

从您的[链接](http://php.net/manual/en/regexp.reference.delimiters.php)：

> 使用 PCRE 函数时，需要用分隔符将模式括起来。定界符可以是任何非字母数字、非反斜杠、非空白字符。

`|`一个完全有效的分隔符也是如此。当您阅读该页面上的评论时，他们建议不要使用元字符（如`|`）作为分隔符，而应该在正则表达式中使用它们。

由于您的示例中没有交替，`$self = preg_replace('|^.*/wp-admin/|i', '', $self);`因此没有问题，并且按预期工作。

当您在正则表达式中有交替时（例如`preg_match("|(F|f)oo|", "Foobar")`），您将收到警告“未知修饰符'f'”，因为解释器认为正则表达式确实在第一次交替时结束。

**结论：允许但不建议使用正则表达式元字符，如`|`, `^`, `+`, ... 作为正则表达式分隔符。**

# c# - Windows 服务无法在 OnStart 方法中读取应用设置

> ID：10452769
> 
> 赞同：0
> 
> 时间：2012-05-04T16:33:51.290
> 
> 标签：c#, asp.net, configuration, windows-services

我写了一个自定义的 Windows 服务来处理一些文件清理、编辑等。在这个程序的 OnStart 方法中，我有：

```
timer.Elapsed += new ElapsedEventHandler(OnElapsedTime);
timer.Interval = Convert.ToInt32(System.Configuration.ConfigurationSettings.AppSettings["RunInterval"]) * 60 * 60 * 1000);  //yeah, i know its an old method
timer.Enabled = true; 
```

但是 AppSettings["RunInterval"] 每次都返回 null ，即使我有：

```
<appSettings>
    <add key="RunInterval" value="8" />
    <!-- Lots of other stuff -->
</appSettings> 
```

在 .exe.config 中。为什么要这样做？配置文件是在 OnStart 之后才加载的吗？好像没有多大意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:39:40.517

您绝对可以在 OnStart 处理程序中读取 app.config 设置。一定有其他事情发生。您是否已验证您的值确实存在于 bin 文件夹中的 app.config 中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T08:01:16.810

~~我有这个完全相同的问题。尝试从 applicationSettings 或 appsettings 中提取值在 OnStart 方法中不起作用。~~

~~我最终将配置数据的提取从 OnStart 方法转移到了 Windows 服务的构造函数，这确实有效。~~

从头开始，我的整个问题都是由配置问题引起的。包括 defaultDatabase 是导致问题的原因。我不确定为什么，可能缺少 Patterns and Practices dll。

```
<dataConfiguration defaultDatabase="LiveDatabase"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T18:43:04.613

您使用的是哪个版本的 C#？从 .NET 2.0 开始[不推荐使用](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsettings.aspx)System.Configuration.ConfigurationSettings 。请改用[System.Configuration.ConfigurationManager](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)。

# python - Python lambda 绑定到本地值

> ID：10452770
> 
> 赞同：87
> 
> 时间：2012-05-04T16:33:52.980
> 
> 标签：python, closures, lambda

以下代码吐出`1`两次，但我希望看到`0`然后`1`.

```
def pv(v) :
  print v

x = []
for v in range(2):
  x.append(lambda : pv(v))

for xx in x:
  xx() 
```

我希望 python lambdas 在幕后绑定到局部变量指向的引用。然而，情况似乎并非如此。我在一个大型系统中遇到了这个问题，其中 lambda 正在执行现代 C++ 的等效绑定（例如，'boost::bind'），在这种情况下，您将绑定到智能 ptr 或复制构造 lambda 的副本。

那么，如何将局部变量绑定到 lambda 函数并让它在使用时保留正确的引用？我对这种行为感到非常惊讶，因为我不希望这种行为来自带有垃圾收集器的语言。

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-05-04T16:36:46.487

更改`x.append(lambda : pv(v))`为`x.append(lambda v=v: pv(v))`。

您期望“python lambdas 在幕后绑定到局部变量指向的引用”，但这不是 Python 的工作方式。Python 在调用函数时查找变量名，而不是在创建时查找。使用默认参数是有效的，因为默认参数是在创建函数时评估的，而不是在调用它时。

这对 lambda 来说并没有什么特别之处。考虑：

```
x = "before foo defined"
def foo():
    print x
x = "after foo was defined"
foo() 
```

印刷

```
after foo was defined 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-05-04T16:41:17.527

lambda 的闭包持有对正在使用的变量的引用，而不是它的值，所以如果变量的值稍后发生变化，闭包中的值也会发生变化。也就是说，闭包变量的值是在调用函数时解析的，而不是在创建函数时解析的。（Python 在这里的行为在函数式编程世界中并不罕见，因为它的价值。）

有两种解决方案：

1.  使用默认参数，在定义时将变量的当前值绑定到本地名称。 `lambda v=v: pv(v)`

2.  使用双 lambda 并立即调用第一个。`(lambda v: lambda: pv(v))(v)`

# asp.net - 如何为使用 NeatUpload 上传的文件设置文件位置

> ID：10452771
> 
> 赞同：0
> 
> 时间：2012-05-04T16:33:53.727
> 
> 标签：asp.net, file-upload, neatupload

救命！当我们设置名为“NeatUpload”的 asp.net 文件上传控件时，它会将其文件保存到一个临时位置，如果目录是可写的，则可以是“YOUR_APP_ROOT /app_data/NeatUpload_Temp/”，或者保存到系统的临时文件夹。但是，该演示似乎并没有实际上传任何文件，也没有包含将文件保存到特定目录的示例。

我们如何保存我们上传的文件并将上传的文件移动到特定文件夹？我从文档中得到的唯一线索是它与`UploadStorageProvider`，但我需要一些帮助来实现它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T07:51:23.640

如果您阅读文档 3.3 第 6 点：

> 在您的代码隐藏文件中，处理上传的文件。如果您使用 InputFile 控件，上传文件的客户端指定名称、MIME 类型和内容可以分别通过 inputFileId.FileName、inputFileId.ContentType 和 inputFileId .FileContent 访问。
> 如果要保留上传的文件，则必须使用 inputFileId.MoveTo() 方法将上传的文件移动到永久位置。如果您不这样做，NeatUpload 将在请求结束时自动删除上传的文件，以确保不需要的文件不会填满文件系统。以下代码会将上传的文件放在应用程序的根目录中（假设有足够的权限）：

等等。我希望这就是你所追求的。

# c# - Array.Contains() 抛出索引超出范围异常

> ID：10452774
> 
> 赞同：2
> 
> 时间：2012-05-04T16:33:58.720
> 
> 标签：c#, arrays

我不明白这样的行如何抛出和索引超出范围异常（对不起法语异常）。Array.Contains() 应该返回它是否找到，它应该很简单。数组不为空。

请参阅图像以说明情况。![在此处输入图像描述](../Images/99a51bdba65b4023f07a2e6ae7a58f77.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T16:35:05.537

例外实际上来自上一行。
如果您展开堆栈，则应更正突出显示。

数组从`0`到`Count - 1`; `fields[fields.Count()]`是错的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T16:35:15.333

上面的行抛出异常。

```
fields[fields.Count()] =.. 
```

它应该是

```
fields[fields.Count() - 1] =.. 
```

# git - 将多个站点合并到一个 Git 存储库中

> ID：10452775
> 
> 赞同：2
> 
> 时间：2012-05-04T16:34:10.483
> 
> 标签：git

这是我的问题。我工作的公司从一个基于 osCommerce 的网站开始（早在我出现之前）。网站增长了，他们通过复制第一个开始第二个，并在必要时对其进行修改。这种情况多年来一直在持续，我们现在有五个独立的站点，所有站点都基于相同的代码。当我们对一个站点进行更改时，我目前必须手动将这些更改复制到所有其他站点的代码，并将所有更改的代码上传到每个站点。

这是非常低效的，让我发疯。我知道 Git 几乎就是为解决此类问题而设计的。目前，我拥有每个站点作为它自己的 Git 存储库，但我仍然被迫将修改从一个复制到所有其他站点。我对 Git 也很陌生。我得到了提交、分支、拉取等，但除此之外非常绿色。

无论如何，我可以将所有这些站点合并到一个存储库中，我该怎么做？我还应该指出，每个站点的文件不一定相同。一个站点被视为优先站点，因此在紧急情况下进行了一些更改，但并未推广到其他站点，另一个站点的运行方式与其他 4 个站点略有不同，因此它的代码在某些地方略有不同. 我意识到这会导致冲突，但我希望能够找到所有的冲突，解决它们以便系统按预期工作，并让任何变化都由数据库/选项驱动。老板想在几个月内至少再推出 2 个站点，所以到那时我真的会失去理智。

我想要的甚至可能吗？是否需要我检查每个文件来解决冲突？任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:02:24.693

如果您想将它们合并在一起，您将不得不放弃某些版本的修订历史。

1.  选择一个版本作为起点。
2.  为站点的每个版本（包括原始版本）创建该版本存储库的克隆。
3.  删除每个克隆的内容，但保持 .git 文件夹不变。
4.  将每个版本（不包括.git）的内容复制到对应的副本中。
5.  犯罪

这将为站点的每个版本留下一个分支，以及一个用于常见更改的主分支。现在每个分支都有一个共同的祖先。

合并时，您必须小心避免将一个版本与另一个版本的更改混为一谈。为了使这更容易，将在站点之间共享的所有更改都应在 master 分支中进行，然后合并到各种版本中。合并时您仍然需要小心，并且可能需要使用 git 的樱桃挑选功能来移动各个变更集。从任何非主分支引入更改时，您肯定需要挑选。

如果在开始之前重构您的起始分支以减少特定于站点的代码，您可能会使事情变得更容易。

# c++ - 花栗鼠碰撞太软了

> ID：10452777
> 
> 赞同：1
> 
> 时间：2012-05-04T16:34:18.283
> 
> 标签：c++, cocos2d-iphone, physics, chipmunk, cocos2d-x

我是 cocos2d 的物理学新手。我正在使用花栗鼠，当两个物体碰撞时，它只是“柔软”，就像它们是用海绵或橡胶制成的。

我的代码：

```
cpInitChipmunk();  
space = cpSpaceNew();  
space->gravity = cpv(0, 0);  
schedule(schedule_selector(HelloWorld::step), 1.0f/60.f);
astroBody = cpBodyNew(100, INFINITY);  
astroBody->p = cpv(512,384);
cpSpaceAddBody(space, astroBody);
int num2 = 8;
cpVect vertsAstro[] =  {
    cpv(-17.0f, -44.9f),
    cpv(-29.5f, -33.2f),
    cpv(-32.9f, -13.1f),
    cpv(-24.0f, 11.7f),
    cpv(24.6f, 11.5f),
    cpv(32.9f, -12.9f),
    cpv(29.3f, -33.1f),
    cpv(17.0f, -44.7f)
};
astroShape = cpPolyShapeNew(astroBody, num2, vertsAstro, cpv(0,0));
astroShape->e = 0.0f;
astroShape->u = 0.0f;
astroShape->collision_type = 0; 
astroShape->data = player;
cpSpaceAddShape(space, astroShape);

cpBody *box = cpBodyNew(INFINITY, INFINITY);  
box->p = cpv(z->getPosition().x+32, z->getPosition().y+32); 
int num = 5;
cpVect verts[] = {
    cpv(-32, -32),
    cpv(-32, 32),
    cpv(32, 32),
    cpv(32, -32),
    cpv(-32, -32)
};
cpShape *boxShape = cpPolyShapeNew(box, num, verts, cpv(0,0));
boxShape->e = 0.0f;
boxShape->u = 0.0f;
boxShape->collision_type = 1;  
boxShape->data = z;
cpSpaceAddStaticShape(space, boxShape); 
```

所以这些物体在碰撞，太软了。我可以让它看起来像两块石头互相撞击吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:30:30.100

您必须使用 Chipmunk 5。您需要直接设置字段，例如 shape->e = 1.0。

getter/setter 函数是 Chipmunk 6 的一部分。您仍然可以直接设置字段，但建议不要这样做，因为 setter 函数会在更改值时自动唤醒对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:43:20.320

从文档：

`void cpShapeSetElasticity(cpShape *shape, cpFloat value)`

> 形状的弹性。值 0.0 不会产生反弹，而值 1.0 会产生“完美”反弹。但是，由于模拟不准确，不建议使用 1.0 或更高版本。碰撞的弹性是通过将各个形状的弹性相乘得出的。

这有帮助吗？

# ios - ios图像处理软件自动裁剪到边框

> ID：10452778
> 
> 赞同：4
> 
> 时间：2012-05-04T16:34:19.683
> 
> 标签：ios, image-processing, crop

我正在实现一个应用程序，我的应用程序需要根据背景裁剪图像。我在文档扫描应用程序中看到了类似的行为，它们会自动拾取图像边框以进行裁剪。有人可以帮我弄清楚如何实现此功能吗？

免责声明：我认为这可能是一个“Askdifferent - Apple”问题，但他们把我送回了`SO`. 所以，如果这不属于，请让我知道在哪里问。

更新：回应评论，这是我到目前为止所做的：

*   应用程序启动相机，
*   设置取景器的 AVSession，
*   预设为照片，捕捉图像，保存到文件
*   我还通过使用 CG API 压缩为所有图像创建小缩略图预览。
*   使用 AQGridView 显示图像。

目标不是压缩，而是显示“自动裁剪”图像以`AQGridview`提供更好的用户体验。根据我的应用程序的性质，它与收据扫描非常相似，因为在相对清晰的背景上，主体可能只占据图像的一小部分。希望它有助于澄清..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:45:43.277

解决这个问题的一种相当简单的方法是从上到下扫描图像并查看每一行中值的配置文件。当您离开打印区域时，您基本上可以看到背景，即轮廓非常平坦，具有缓慢变化的高值（明亮值）以及噪声波动。当您遇到打印特征时，配置文件将在至少一个颜色组件上显示负阶跃。

为了以稳健的方式检测它们，我建议隔离严格递减的值序列，并在总递减量达到给定阈值时考虑重大事件。这将为您提供最上面的裁剪线。您还可以通过检查减少后的暗区是否足够长来减少错误检测。

从底部开始重复此操作，同样从左侧和右侧开始。

# php - 如何使用“订阅”接收更多带有 predis 的消息？

> ID：10452780
> 
> 赞同：1
> 
> 时间：2012-05-04T16:34:31.497
> 
> 标签：php, redis

我有 2 个客户，想互相聊天，都发布和订阅。

但正如您所知，PHP 进程不能停留很长时间，我无法使用 predis 中的命令 subscribe 接收进一步的消息。

另外，没有文档可供我们检查，如何正确使用该命令？谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T08:21:21.840

如果您担心通过发布（相对于您的 php 进程）发送的消息的持久性，那么您可以`brpop`使用`lpush`.

这样，您将拥有持久的“消息队列”，并且不会丢失任何消息。而不是发布，您将简单`lpush`地列出并在工作人员方面，您将通过 等待消息`brpop`。

# java - 如果在android java中比较星期几的语句总是返回true

> ID：10452787
> 
> 赞同：1
> 
> 时间：2012-05-04T16:34:54.663
> 
> 标签：java, android, calendar

我知道这似乎是一个逻辑错误，我已经审查了几次，一切似乎都是正确的，如果有人能指出我正确的方向：

我们有一项在特定时间（上午 10 点、下午 4 点和晚上 11 点）调用的服务。该服务工作正常，通知已创建。但是，当我们使用逻辑来比较星期几时，即使它不是所讨论的日期，它也会被每天调用。

代码片段：

```
public void onStart(Intent intent, int startId) {
    Calendar c = Calendar.getInstance();
    int day = c.get(Calendar.DAY_OF_WEEK);
    int hour = c.get(Calendar.HOUR_OF_DAY);
    if (day == Calendar.SATURDAY || day == Calendar.WEDNESDAY); //always true
    {
        if(hour == 10 || hour == 16) //correct regardless of anterior
        {
            //create notification

        }
        else if(hora == 23)
        {
            //create other type of intent

        }
    }
    super.onStart(intent, startId);     

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:40:43.330

您没有得到预期的结果，因为您在 if 语句之后放置了 semi 列

```
 if (day == Calendar.SATURDAY || day == Calendar.WEDNESDAY); 
```

删除半列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:45:57.633

实际上它并不总是正确的。分号将 if 语句与下面的代码块分开，使它们独立。

所以 if 语句被评估，然后代码块被执行而不依赖 if 结果来确定是否应该执行。

# iphone - Iphone sdk - 比较 NSNumber 时的奇怪行为

> ID：10452794
> 
> 赞同：2
> 
> 时间：2012-05-04T16:35:14.773
> 
> 标签：iphone, objective-c, ios, operator-keyword, nsnumber

我有一个执行多个网络操作的项目。为了便于控制，我给每个操作一个唯一的 ID，定义为 NSNumber，因为我必须对对象和数组执行操作，这样更容易：

```
#define LOGIN_OPERATION                     [NSNumber numberWithInt:0]
#define REGISTER_USER_OPERATION             [NSNumber numberWithInt:1]
#define VERIFY_USER_OPERATION               [NSNumber numberWithInt:2]
#define REGISTER_USER_DATA_OPERATION        [NSNumber numberWithInt:3]
#define FORGOT_PASSWORD_OPERATION           [NSNumber numberWithInt:4]
#define PASSTIME_REGISTER_OPERATION         [NSNumber numberWithInt:5]
#define PASSTIME_VERIFY_TOKEN_OPERATION     [NSNumber numberWithInt:6]
#define PASSTIME_OPERATION                  [NSNumber numberWithInt:7]
#define SERVICES_OPERATION                  [NSNumber numberWithInt:8]
#define MAIL_SUPPORT_OPERATION              [NSNumber numberWithInt:9]
#define UPDATE_USER_INFO_OPERATION          [NSNumber numberWithInt:10]
#define OBTAIN_CACS_OPERATION               [NSNumber numberWithInt:11]
#define GET_PREPAID_BALANCE_OPERATION       [NSNumber numberWithInt:12]
#define UPDATE_SERVICES_OPERATION           [NSNumber numberWithInt:13] 
```

然后我只是在我的项目说明中使用了以下内容，这在去年效果很好。

```
- (void) processNetworkResponseForOperation: (NSNumber*) opId {

    if (opId == SERVICES_OPERATION) {
        //do something
    } else if (opId == UPDATE_SERVICES_OPERATION) {
        //do something
    }

} 
```

但是今天我添加了最后一个操作（数字 13）并且所有 == 操作结果为假，只是那个数字！，我使用调试器来确保该值是好的，但我只能让条件为真，如果我使用：**[opId isEqualToNumber: UPDATE_SERVICES_OPERATION]**这很长。

我知道 NSNumber 是一个对象，因此 == 可能不是最好的选择，但为什么它可以与项目中的所有其他操作一起使用，但 #13 却不起作用？

任何帮助将不胜感激。

**编辑** 好吧，我尝试了更大的数字，但我遇到了同样的问题，但是例如，如果我将 UPDATE_SERVICES_OPERATION 数字与另一个操作号切换，它现在会执行 UPDATE_SERVICES_OPERATION 但它不会执行我切换数字的操作。那么为什么它不适用于较新的数字：S，或者它只是 xcode 上的构建问题？（我将重新启动并更新）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T16:49:22.333

你永远不应该`NSNumber`像你在这里做的那样直接比较一个，因为它是一个对象而不是一个简单的类型。您当前的代码取决于对象内存地址的相等性而不是它们的值。阅读此处了解更多信息[比较 Obj-C 中的对象](https://stackoverflow.com/questions/5054730/comparing-objects-in-obj-c)。

您永远不应该使用 == 来比较对象是否相等，而是使用`isEqual:`函数，`NSObject`并且通常仅在您想确保要比较的对象是同一个实例时才使用。下面的代码应该可以解决您的问题。

```
 - (void) processNetworkResponseForOperation: (NSNumber*) opId {

    if ([opId intValue] == [SERVICES_OPERATION intValue]) {
        //do something
    } else if ([opId intValue] == [UPDATE_SERVICES_OPERATION intValue]) {
        //do something
    }

} 
```

# c# - 从字符串中获取最后一组数字，做数学，重建回字符串？

> ID：10452795
> 
> 赞同：8
> 
> 时间：2012-05-04T16:35:14.727
> 
> 标签：c#, regex, .net-4.0

我有一个表示“帐号”的字段，该字段大多数时候都不是数字。我需要对这些“数字”进行一些自动递增。显然不适合做数学。我们决定对我们有用的规则是，我们想要**找到最右边的一组数字并将它们自动递增 1**并返回重建的字符串（即使这使它变长了一个字符）。

这些数字的一些示例是：

*   AC1234 -> AC1235
*   GS3R2C1234 -> GS3R2C1235
*   1234 -> 1235
*   A-1234 -> A-1235
*   AC1234g -> AC1235g
*   GS3R2C1234g -> GS3R2C1235g
*   1234 克 -> 1235 克
*   A-1234g -> A-1235g
*   999 -> 1000
*   GS3R2C9999g -> GS3R2C10000g

我正在使用 C#/.NET 4.0。我将 Regex 列为标签，但这不是必需的。此解决方案不必在正则表达式中。

关于这样做的好方法有什么想法吗？理想的性能不是主要问题。我宁愿为此提供清晰且易于理解/维护的代码，除非它全部包含在正则表达式中。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:45:28.757

```
var src = "ap45245jpb1234h";
var match = Regex.Match(src, @"(?<=(\D|^))\d+(?=\D*$)");
if(match.Success)
{
    var number = int.Parse(match.Value) + 1;
    var newNum=string.Format(
      "{0}{1}{2}",
      src.Substring(0,match.Index),
      number,
      src.Substring(match.Index + match.Length));
    newNum.Dump(); //ap45245jpb1235h
} 
```

解释正则表达式：从（字符串的开头）或（非数字）开始，匹配一个或多个数字，后跟零个或多个非数字，然后是字符串的结尾。

当然，如果提取的数字有前导零，事情就会出错。我将把这个作为练习留给读者。

使用 MatchEvaluator （正如@LB 在他们的回答中所建议的那样），这变得更轻了：

```
Regex.Replace(
    src,
    @"(?<=(\D|^))\d+(?=\D*$)",
    m => (int.Parse(m.Value)+1).ToString()) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:49:37.933

如果我理解正确，您想在某个字符串中最右边的数字上加一。

您可以按照其他人的建议使用正则表达式，但是由于您正在尝试做一些非常具体的事情，因此正则表达式将证明比仅仅为您所做的实现算法要慢。

您可以针对 Regex 解决方案对此进行测试，并亲眼看看这会快得多：

> 我跑了 100 万次，并用秒表计时。

结果：

> 正则表达式 - 10,808,533 滴答
> 
> 我的方式 - 253,355 滴答声

大约快 40 倍！！！

结论：针对特定问题的特定解决方案。

> 我的方式快了很多。

这是代码：

```
 // Goes through a string from end to start, looking for the last digit character.
    // It then adds 1 to it and returns the result string.
    // If the digit was 9, it turns it to 0 and continues,
    // So the digit before that would be added with one.
    // Overall, it takes the last numeric substring it finds in the string,
    // And replaces it with itself + 1.
    private static unsafe string Foo(string str)
    {
        var added = false;

        fixed (char* pt = str)
        {
            for (var i = str.Length - 1; i >= 0; i--)
            {
                var val = pt[i] - '0';

                // Current char isn't a digit
                if (val < 0 || val > 9)
                {
                    // Digits have been found and processed earlier
                    if (added)
                    {
                        // Add 1 before the digits,
                        // Because if the code reaches this,
                        // It means it was something like 999,
                        // Which should become 1000
                        str = str.Insert(i + 1, "1");
                        break;
                    }

                    continue;
                }

                added = true;

                // Digit isn't 9
                if (val < 9)
                {
                    // Set it to be itself + 1, and break
                    pt[i] = (char)(val + 1 + '0');
                    break;
                }

                // Digit is 9\. Set it to be 0 and continue to previous characters
                pt[i] = '0';

                // Reached beginning of string and should add 1 before digits
                if (i == 0)
                {
                    str = str.Insert(0, "1");
                }
            }
        }

        return str;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:50:11.203

假设您不想替换 1 位数字。

```
string input = "GS3R2C1234g";
var output = Regex.Replace(input, @"\d{2,}$*", m => (Convert.ToInt64(m.Value) + 1).ToString()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T16:53:20.903

我建议如下：

```
string IncrementAccountNumber(string accountNumber)
{
    var matches = Regex.Matches(accountNumber, @"\d+");
    var lastMatch = matches[matches.Count - 1];
    var number = Int32.Parse(lastMatch.Value) + 1;
    return accountNumber.Remove(lastMatch.Index, lastMatch.Length).Insert(lastMatch.Index, number.ToString());
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T16:40:50.787

你可以使用这样的正则表达式：

```
(\d*) 
```

这将使用[Matches 方法](http://msdn.microsoft.com/en-us/library/e7sf90t3.aspx)对所有数字进行分组。然后，您可以获取最后一组并从该组进行修改。

然后你可以使用匹配索引和长度来重建你的字符串。

```
string input = "GS3R2C1234g";
string pattern = @"(\d*)";
var matches = Regex.Matches(input, pattern);
var lastMatch = matches[matches.Length - 1];
var value = int.Parse(lastMatch.Value);
value++;
var newValue = String.Format("{0}{1}{2}"input.Substring(0,lastMatch.Index), 
    value, input.Substring(lastMatch.Index+lastMatch.Length)); 
```

我没有进行错误检查。我将由您决定

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T17:01:57.720

如果您想要一个将结果拼接在一起的简单正则表达式：

```
private static readonly Regex _ReverseDigitFinder = new Regex("[0-9]+", RegexOptions.RightToLeft);
public static string IncrementAccountNumber(string accountNumber) {
    var lastDigitsMatch = _ReverseDigitFinder.Match(accountNumber);
    var incrementedPart = (Int64.Parse(lastDigitsMatch.Value) + 1).ToString();
    var prefix = accountNumber.Substring(0, lastDigitsMatch.Index);
    var suffix = accountNumber.Substring(lastDigitsMatch.Index + lastDigitsMatch.Length);
    return prefix + incrementedPart + suffix;
} 
```

笔记：

*   它使用 RegexOptions.RightToLeft 在最后开始搜索，并且比查找所有匹配项并获取最后一个匹配项更有效。
*   它使用“[0-9]”而不是“\d”来避免[土耳其测试](http://www.moserware.com/2008/02/does-your-code-pass-turkey-test.html)问题。

如果你想使用 LINQ：

```
private static readonly Regex _ReverseAccountNumberParser = new Regex("(?<digits>[0-9]+)|(?<nonDigits>[^0-9]+)", RegexOptions.RightToLeft);

public static string IncrementAccountNumber(string accountNumber) {
    bool hasIncremented = false;
    return String.Join("", 
                    _ReverseAccountNumberParser
                        .Matches(accountNumber)
                        .Cast<Match>()
                        .Select(m => {
                            var nonDigits = m.Groups["nonDigits"].Value;
                            if(nonDigits.Length > 0) {
                                return nonDigits;
                            }

                            var digitVal = Int64.Parse(m.Groups["digits"].Value);
                            if(!hasIncremented) {
                                digitVal++;
                            }
                            hasIncremented = true;
                            return digitVal.ToString();
                        })
                        .Reverse());
} 
```

对于它的价值，我最初不小心误读了这个，并认为你想要进位（即“A3G999 -> A4G000”）。这更有趣并且需要进位状态：

```
public static string IncrementAccountNumberWithCarry(string accountNumber) {
    bool hasIncremented = false;
    bool needToCarry = false;
    var result = String.Join("",
                    _ReverseAccountNumberParser
                        .Matches(accountNumber)
                        .Cast<Match>()
                        .Select(m => {
                            var nonDigits = m.Groups["nonDigits"].Value;
                            if (nonDigits.Length > 0) {
                                return nonDigits;
                            }

                            var oldDigitVal = m.Groups["digits"].Value;
                            var digitVal = Int64.Parse(oldDigitVal);

                            if(needToCarry) {
                                digitVal++;
                            }

                            if (!hasIncremented) {
                                digitVal++;
                                hasIncremented = true;
                            }

                            var newDigitVal = digitVal.ToString();
                            needToCarry = newDigitVal.Length > oldDigitVal.Length;
                            if(needToCarry) {
                                newDigitVal = newDigitVal.Substring(1);
                            }

                            return newDigitVal;
                        })
                        .Reverse());
    if(needToCarry) {
        result = "1" + result;
    }

    return result;
} 
```

测试用例：

```
Debug.Assert(IncrementAccountNumber("AC1234") == "AC1235");
Debug.Assert(IncrementAccountNumber("GS3R2C1234") == "GS3R2C1235");
Debug.Assert(IncrementAccountNumber("1234") == "1235");
Debug.Assert(IncrementAccountNumber("A-1234") == "A-1235");
Debug.Assert(IncrementAccountNumber("AC1234g") == "AC1235g");
Debug.Assert(IncrementAccountNumber("GS3R2C1234g") == "GS3R2C1235g");
Debug.Assert(IncrementAccountNumber("1234g") == "1235g");
Debug.Assert(IncrementAccountNumber("A-1234g") == "A-1235g");
Debug.Assert(IncrementAccountNumber("999") == "1000");
Debug.Assert(IncrementAccountNumber("GS3R2C9999g") == "GS3R2C10000g");
Debug.Assert(IncrementAccountNumberWithCarry("GS3R2C9999g") == "GS3R3C0000g");
Debug.Assert(IncrementAccountNumberWithCarry("999") == "1000"); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-04T20:34:37.547

```
string[] src = { "AC1234", "GS3R2C1234", "1234", "A-1234", "AC1234g",
                 "GS3R2C1234g", "1234g", "A-1234g", "999", "GS3R2C9999g" };
foreach (string before in src)
{
  string after = Regex.Replace(before, @"\d+(?=\D*$)", 
      m => (Convert.ToInt64(m.Value) + 1).ToString());
  Console.WriteLine("{0} -> {1}", before, after); 
} 
```

输出：

```
AC1234 -> AC1235
GS3R2C1234 -> GS3R2C1235
1234 -> 1235
A-1234 -> A-1235
AC1234g -> AC1235g
GS3R2C1234g -> GS3R2C1235g
1234g -> 1235g
A-1234g -> A-1235g
999 -> 1000
GS3R2C9999g -> GS3R2C10000g 
```

笔记：

*   @LB 使用 lambda 表达式作为 MatchEvaluator FTW！

*   从@spender 的回答来看，前瞻 - `(?=\D*$)`- 确保只有最后一组数字匹配（但后瞻 - `(?<=(\D|^))`- 不需要）。

*   @JeffMoser 使用的 RightToLeft 选项允许它首先匹配最后一组数字*，*但没有静态`Replace`方法允许您 (1) 指定 RegexOptions，(2) 使用 MatchEvaluator，以及 (3) 限制替换的数量. 您必须先实例化一个 Regex 对象：

```
string[] src = { "AC1234", "GS3R2C1234", "1234", "A-1234", "AC1234g",
                 "GS3R2C1234g", "1234g", "A-1234g", "999", "GS3R2C9999g" };
foreach (string before in src)
{
  Regex r = new Regex(@"\d+", RegexOptions.RightToLeft);
  string after = r.Replace(before, m => (Convert.ToInt64(m.Value) + 1).ToString(), 1);
  Console.WriteLine("{0} -> {1}", before, after); 
} 
```

输出：

```
AC1234 -> AC1235
GS3R2C1234 -> GS3R2C1235
1234 -> 1235
A-1234 -> A-1235
AC1234g -> AC1235g
GS3R2C1234g -> GS3R2C1235g
1234g -> 1235g
A-1234g -> A-1235g
999 -> 1000
GS3R2C9999g -> GS3R2C10000g 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-04T16:57:49.217

您可以尝试使用[`String.Split`](http://msdn.microsoft.com/en-us/library/b873y76a.aspx). 你可以使用类似的东西：

```
NameSplit=AccountNumber.split(new Char[] {'a','b','....'z'}); 
```

然后你可以在数组上循环找到最后一个数字（从`NameSplit.length`到循环`1`，第一个数字由 找到[`Int32.TryParse`](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)），增加该数字，然后再次将数组连接在一起`String.Concat`。

它可能比 RegEx 效率低，但我认为对于不了解 RegEx 的人来说更容易理解。

# c++ - cppunit 中 QTtestrunner 的问题

> ID：10452798
> 
> 赞同：0
> 
> 时间：2012-05-04T16:35:18.733
> 
> 标签：c++, qt, compiler-construction, cppunit

我有一个项目使用 cppunit 进行单元测试，我使用 QTtestrunner 来显示结果这里是代码

```
CPPUNIT_NS::QtUi::TestRunner testrunner;  
testrunner.addTest (CPPUNIT_NS::TestFactoryRegistry::getRegistry().makeTest());
testrunner.run (true); 
```

但我在编译时收到了这条消息：

```
src/main.cpp:78: undefined reference to 'CppUnit::QtTestRunner::QtTestRunner()'
src/main.cpp:79: undefined reference to CppUnit::QtTestRunner::addTest(CppUnit::Test*)'                 
src/main.cpp:80: undefined reference to CppUnit::QtTestRunner::run(bool)'
src/main.cpp:91: undefined reference to 'CppUnit::QtTestRunner::~QtTestRunner()' 
```

我知道存在链接问题，但我包含了所有我需要的 libcppunit.a 和 libcppunit.so

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-10T16:02:56.657

Qt版本差异是问题所在。您可以下载此[补丁](http://sourceforge.net/p/cppunit/patches/46/) 它转换为 Qt3，然后您可以使用“qt3to4”将其转换为 Qt4。

当您使用 qttestrunner.a 库时，您还需要将 qt3 支持添加到您的 pro 文件中。

```
QT += qt3support 
```

# alfresco - 从 Alfresco 的 alfresco-global.properties 文件中访问值

> ID：10452800
> 
> 赞同：7
> 
> 时间：2012-05-04T16:35:21.433
> 
> 标签：alfresco

假设我在 alfresco-global.properties 文件中创建了一个名为“test123”的自定义属性。是否有自定义对象或其他方式可用于访问 Alfresco 中 Java bean 内的值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T18:21:02.697

Spring bean 被称为“global-properties”，它是一个 java.util.Properties 类型

所以你可以像这样注入它：

```
<property name="properties">
  <ref bean="global-properties"/>
</property 
```

并将 java.util.Properties 类型的 properties 属性添加到您的 bean

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-01-15T12:52:21.447

*alfresco-global.properties*中的所有属性都可用作 Spring bean 定义中的占位符。您可以简单地使用：

```
<property name="myCustomOption" value="${my.custom.option}"/> 
```

在您的 bean 定义和 alfresco-global.properties 中：

```
my.custom.option=Some string value 
```

注入整个*global-properties* bean（如上所述）也有效，但违反了[最少知识原则](http://en.wikipedia.org/wiki/Law_of_Demeter)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-24T13:07:32.070

您也可以使用 PropertyPlaceholderConfigurer，请参阅[这篇文章](http://www.shmoula.cz/custom-configs-in-alfresco/)中的最后一个片段。

# image - 无法编译第一个 opencv 程序，'/usr/bin/ld: 找不到 -lcv'

> ID：10452801
> 
> 赞同：5
> 
> 时间：2012-05-04T16:35:25.443
> 
> 标签：image, gcc, graphics, opencv

```
g++ cv.cpp -o cv -I /usr/local/include/opencv
    -L /usr/local/lib  -lm -lcv -lhighgui -lcvaux 
```

错误：

```
/usr/bin/ld: cannot find -lcv
collect2: ld returned 1 exit status 
```

代码：

```
#include <cv.h>
#include <ml.h>
#include <cxcore.h>
//#include <cxtypes.h>
#include <highgui.h>

int main(int argc, char* argv[])
{
    IplImage* img = cvLoadImage( "bal.png" );
    cvNamedWindow( "Example1", CV_WINDOW_AUTOSIZE );
    cvShowImage("Example1", img);
    cvWaitKey(0);
    cvReleaseImage( &img );
    cvDestroyWindow( "Example1" );
    return 0;
} 
```

它是 32 位的，

```
locate libcv
/usr/lib/libcv.so.2.1
/usr/lib/libcv.so.2.1.0 
```

* * *

```
`pkg-config --cflags --libs opencv`

-I/usr/local/include/opencv
-I/usr/local/include  /usr/local/lib/libopencv_calib3d.so
/usr/local/lib/libopencv_contrib.so /usr/local/lib/libopencv_core.so
/usr/local/lib/libopencv_features2d.so /usr/local/lib/libopencv_flann.so
/usr/local/lib/libopencv_gpu.so /usr/local/lib/libopencv_highgui.so
/usr/local/lib/libopencv_imgproc.so /usr/local/lib/libopencv_legacy.so
/usr/local/lib/libopencv_ml.so /usr/local/lib/libopencv_nonfree.so
/usr/local/lib/libopencv_objdetect.so /usr/local/lib/libopencv_photo.so
/usr/local/lib/libopencv_stitching.so /usr/local/lib/libopencv_ts.so
/usr/local/lib/libopencv_video.so /usr/local/lib/libopencv_videostab.so 
```

* * *

在/usr/local中安装了OpenCV-2.4.0，我也有一个系统python-opencv。我在哪里做错了？我应该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T20:05:36.893

从OpenCV 网站上发布的变更[日志](http://code.opencv.org/projects/opencv/wiki/ChangeLog#22)（针对 2.2 版）可以看出，库名称从 2.2 版开始发生了变化，因此用于链接 2.1 版的库名不能用于编译 2.4 版（即`libcv.so`通过`-lcv`不是版本 > 2.1 的有效库名称，依此类推）。您需要传递属于新版本 OpenCV 的库（已通过`pkg-config`命令列出）。您可以使用`pkg-config`在这些行上传递编译器和链接器标志：`g++ cv.cpp -o cv $(pkg-config --cflags --libs opencv)`.
希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:14:17.200

`/usr/lib`当新安装的 2.4版本在时，您拥有 2.1版本`/usr/local/lib`，需要修复该问题并确保`ld`找到的库是您编译/链接的库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T10:37:21.590

我在 opencv 2.4 上遇到了类似的问题，并且是兼容性问题。如果要使用最新版本，请删除之前版本的 opencv 以避免在编译时出现此问题或 lib 位置问题。

# c# - 从服务器下载文件

> ID：10452803
> 
> 赞同：0
> 
> 时间：2012-05-04T16:35:41.757
> 
> 标签：c#, ftp, download, ftpwebrequest

我正在尝试获取服务器上的文件列表

代码：

```
string ftpUserID = "user";
string ftpPassword = "password";
string ftpServerIP = "192.###.###.###";
string remoteDirectory = @"\Update\UpdateTest";
string localDirectory = @"C:\Updates";

string[] downloadFiles;
StringBuilder result = new StringBuilder();
WebResponse response = null;
StreamReader reader = null;

FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServerIP + "/" +      remoteDirectory));
reqFTP.UseBinary = true;
reqFTP.Credentials = new NetworkCredential(ftpUserID, ftpPassword);
reqFTP.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
reqFTP.EnableSsl = true;
reqFTP.Proxy = null;
reqFTP.KeepAlive = true;
reqFTP.UsePassive = true;
response = reqFTP.GetResponse();
reader = new StreamReader(response.GetResponseStream());

string line = reader.ReadLine();
while (line != null)
{
    result.Append(line);
    result.Append("\n");
    line = reader.ReadLine();
}
result.Remove(result.ToString().LastIndexOf('\n'), 1);
return result.ToString().Split('\n'); 
```

我不断收到 WebException 错误提示“无法连接到远程服务器”

这是由于以下错误造成的：

```
 FtpWebRequest reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + ftpServerIP + "/" +      remoteDirectory)); 
```

我认为这是在**reqFTP.Content**和**reqFTP.PreAuthenticate部分引发****System.NotSuportedException 。**

 ***** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T13:01:10.703

您提到，尽管它在代码中不可见，但您使用`PreAuthenticate`. FTP 不支持此功能。

[根据msdn](http://msdn.microsoft.com/en-us/library/system.net.ftpwebrequest.preauthenticate%28v=vs.110%29.aspx) ，仅提供该`PreAuthenticate`属性是为了与 WebRequest 和 WebResponse 类的其他实现兼容。****

# bash - 使用 bash 删除目录中未链接的所有文件夹

> ID：10452804
> 
> 赞同：3
> 
> 时间：2012-05-04T16:35:50.230
> 
> 标签：bash, directory, symlink

我有一项任务要求我删除目录中没有符号链接的所有文件夹，只保留符号链接的文件夹和符号链接。

例如，如果我有 3 个资源：链接、链接文件夹和未链接文件夹。链接和linked_folder 将被保留。

目前我已经设法得到这个代码，它适用于我们拥有的文件命名结构，但我想知道是否有更清洁的解决方案？

```
protected_folders=`ls -l | awk '/^l/ {printf $10}' | tr '/' '|'`;
symlinks=`ls -l | awk '/^l/ {print $8}' | tr "\n" "|"`;
protected_resources=$protected_folders$symlinks;
protected_resources=${protected_resources:0:${#protected_resources}-1};
folders_to_delete=`ls | grep -v -E "$protected_resources"`; 
echo $folders_to_delete | tr '\n' ' ' | tr ' ' '\000' | xargs -0 rm -rf 
```

我知道上面的命令可以在一行上完成，但我已经将它分开，因为我被要求让它更“可读”。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T17:36:21.853

将符号链接及其目标移动到新目录可能更容易，然后用新目录替换旧目录。

警告：这只是一个粗略的草图，给你的想法。[更新：清理并使它不像伪代码]

```
# Make an empty directory to hold the symlinks and targets
# that you want to keep
DIR_TO_CLEAN=/the/directory/to/clean/up
TMP_DIR=$(mktemp -d)

for x in $DIR_TO_CLEAN/*; do
    # Move each symlink and its target to the new directory
    [[ -h $x ]] && mv $x $(readlink -f $x) $TMP_DIR
done

# FIRST!!!, confirm that $TMP_DIR has everything you want to keep,
# and $DIR_TO_CLEAN has nothing you want to keep
rm -rf $DIR_TO_CLEAN
mv $TMP_DIR $DIR_TO_CLEAN 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T18:46:35.907

我不知道你是否会称它为更干净、优雅或复杂得离谱。这是很多设置，但“实际工作”的最后几行已经足够清晰了。

```
# map - apply a function to all arguments
map() {
  fn="$1"
  shift
  for x in "$@"; do
    $fn $x
  done
}

echoif() { if $1 "$2" ; then echo $2 ; fi }

# use map/echoif to find items that meet a criteria in a list
filter() {
  op=$1
  shift
  map "echoif $op" "$@"
}

# list grep, essentially
find_in_list() {
  item=$1
  shift
  itemis() { test $item == $1 ; }
  res=`filter itemis "$@"`
  test -n "$res"
}

not() { if $* ; then return 1; fi ; }
not_in_list() { not find_in_list $* ; }

# utility functions for filtering
islink() { test -L $1 ; }
isdir() { test -d $1 ; }

# actual work starts here
links=`filter islink *`
dests=`map readlink $links`

should_delete() { not_in_list $1 $links $dests ; }

dirs=`filter isdir *`
todelete=`filter should_delete $dirs`

# you know what to do here    
echo rm -rf $todelete 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:44:48.523

## 这是一种可能的解决方案，只需运行

```
mkdir "./onlylinkedfiles" && cd "./onlylinkedfiles"
tar -ch "../symlinks" | tar -x --strip-components=1 
```

并且您只有`../symlinks/`在当前目录中符号链接的所有文件和目录。

### 与一些自动化相同：

```
cd "delete_here"
f="../symlinkshere"; mkdir ../temporary && pushd ../temporary && tar -vch "${f}" | tar -x --strip-components=1 && rm -rf "`dirs +1`" && cd .. && mv temporary "`dirs +1`" && popd 
```

之后，当前目录仅包含在`../symlinkshere/`.

### 让我们分解一下：

```
# Specify directory where symlinks are:
f="../symlinkshere"; 
# Create temporary directory:
mkdir ../temporary && 
# Remember current and change cwd to temporary folder:
pushd ../temporary && 
# Copy all symlinked files and directories to cwd:
tar -vch "${f}" | tar -x --strip-components=1 && 
# Remove directory where we been when pushd called:
rm -rf "`dirs +1`" && 
# Cd out of temporary dir:
cd .. && 
# Rename temporary to original cwd
mv temporary "`dirs +1`" && 
# Go back to path where we started:
popd 
```

## 这是易于使用的shell脚本：

它适用于当前目录并接受一个参数，即符号链接的路径。
`cd /path/to/clean`
`replacebylinks.sh /here/is/symlinks/`

**文件：***`~/bin/replacebylinks.sh`*

```
#!/bin/bash
tmp="`mktemp -d`"
sourced="`readlink -f ${1}`"
workd="`pwd -P`"

cd "${tmp}"
tar -vchC "${sourced}" . | tar -xv --strip-components=1

rm -vrf "${workd}"
cd ..
mv -v "${tmp}" "${workd}" && cd "${workd}" 
```

### 一些注意事项：

*   `-v`如果您认为输出过多，可以从命令中删除 详细开关。
*   最好在`tar -chC "source" .`没有将`-C source`整个源目录树保留在目标位置的情况下使用。对于绝对路径，这从`/`根开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T18:09:37.830

您可以找到所有要保留的目录，如下所示：

```
keep_me=$(for link in $(find . -type l); do find -L . -samefile $link; done) 
```

您可以将其与@chepner 的解决方案结合起来，如下所示：

```
mkdir ../new_tmp_dir
for link in $(find . -type l) 
do
    find -L . -samefile $link -print0
done | xargs -0 -I{} mv {} ../new_tmp_dir
rm -rf *
mv ../new_tmp_dir/* . 
```

`-maxdepth=1`如果您移动的目录超过一级，您可能需要修改 find 语句（使用）。

# php - php邮件发送错误

> ID：10452806
> 
> 赞同：0
> 
> 时间：2012-05-04T16:35:52.633
> 
> 标签：php, email

对 PHP 相当陌生，我正在研究一个简单的表单，

用户输入他们的信息，然后检查信息是否存在且不为空，然后使用邮件功能将其发送出去

这是代码

我得到错误

解析错误：第 20 行 C:\xampp\htdocs\registration.php 中的语法错误，意外 ','

第 20 行是邮件功能所在的位置

```
if (isset ($_POST['attendee']) && isset ($_POST['attending']) && isset ($_POST['message']) && isset ($_POST['contact_email']))
{

    $attendee = $_POST['attendee'];
    $attending = $_POST['attending'];
    $contact_email = $_POST['contact_email'];
    $message = $_POST['message'];

    if(!empty($attendee) && !empty($attending) && !empty($message) && !empty ($contact_email))
        {
            $to = 'someemail@gmail.com';
            $subject = 'Wedding Information Received'.'attending';
            $body = $message;
            $headers = 'From: '.'contact_email';

            if (@mail(($to,$subject, $body, $headers))){
                echo 'Thanks for Reserving';
            } else{
                echo 'Sorry, an error occured. Please Try again     later.';
            }
        }
    else{
        echo ' All Fields are Required';
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:38:33.523

您`((`在前面使用 2`mail`而不是在最后使用`(`3`)))`而不是 2 `))`...

代替

```
 if (@mail(($to,$subject, $body, $headers))){ 
```

和

```
 if (@mail($to,$subject, $body, $headers)){ 
```

# svn - 使用 nginx 代理多个 Subversion 存储库

> ID：10452808
> 
> 赞同：1
> 
> 时间：2012-05-04T16:36:15.817
> 
> 标签：svn, configuration, nginx, reverse-proxy

我目前有一个老化的 subversion 1.4.2 服务器，其中包含多个要升级的存储库。我想做几件事：

*   移动到更新版本（1.7+）的颠覆
*   将存储库拆分到不同的机器
*   更改主机名（我稍后会解释）
*   更改为使用 FQDN 而不是 URL 上的路径（<-- 这是我遇到的问题）

但是，我希望很少的停机时间，并且我希望逐步地（在很大程度上）无缝地为我们的用户执行此操作。

因此，服务器当前由：svn.svr.mycompany.co.uk 解析我希望用户切换到使用：svn.mycompanyglobal.net

该新名称将由 DNS 路由到适当的服务器，具体取决于用户所在的大陆。这行得通。

这指向具有标准类型的 svn DAV 访问权限的 Apache2 安装：

```
<VirtualHost 10.11.22.33>
  Servername svn.svr.mycompany.co.uk

  <Location /main>
    DAV svn
    SVNPath /home/svnrepo/main
    [... Some regular auth stuff ...]
    SVNIndexXSLT /svnindex.xsl
  </Location>

  <Location /data>
    DAV svn
    SVNPath /home/svnrepo/data
    [... Some regular auth stuff ...]
    SVNIndexXSLT /svnindex.xsl
  </Location>
</VirtualHost> 
```

有与文档根和模块相关的常见内容，但这是它的症结所在。

所以，目前我可以查看以下代码：[http ://svn.svr.mycompany.co.uk/data/Core/Blah](http://svn.svr.mycompany.co.uk/data/Core/Blah)

现在我在前面放了一个*nginx*反向代理。它具有全局主机名，我可以通过 URL*浏览代码：http:* [//data.svn.mycompanyglobal.net/Core/Blah](http://data.svn.mycompanyglobal.net/Core/Blah)（**请注意**，我已将*“数据”*从路径移至主机名）。我通过添加以下配置在*nginx中实现了这一点：*

```
server {
  listen 80;

  server_name data.svn.mycompanyglobal.net;

  proxy_set_header  Host svn.svr.mycompany.co.uk;

  location = /svnindex.xsl {
    proxy_pass http://svn.svr.mycompany.co.uk/svnindex.xsl;
  }

  location /data/ {
    proxy_pass http://svn.svr.mycompany.co.uk/data/;
  }

  location / {
    proxy_pass http://svn.svr.mycompany.co.uk/;
    rewrite ^(.*)$ /data$1 break;
  }
} 
```

这一切都有效。我可以在 Web 浏览器中浏览代码，也可以通过 TortoiseSVN 中的 repo 浏览器或命令行“svn ls”浏览代码。所有这些都通过代理。

但是，当我尝试检查代码时，我得到了错误

```
Unusable URI: it does not refer to this repository 
```

我得出的结论是，这是客户做出此决定（即提出错误）。查看 SVNKit 源代码，很明显 svn 客户端会将它请求的路径与服务器返回的路径进行比较——我不知道为什么，但这就是它的样子（参见[DavUtils](http://svn.svnkit.com/repos/svnkit/trunk/svnkit-dav/src/main/java/org/tmatesoft/svn/core/internal/server/dav/DAVPathUtil.java)）。

我可以通过将我结帐的 URL 更改为此来解决这个问题（某种程度上）：

```
http://data.svn.mycompanyglobal.net/data 
```

[即我将存储库的名称添加到末尾]

这可能是因为我在上面添加了*“/data/”路由。*

有没有人设法做这样的事情？我可以在 Subversion 服务器或代理上做些什么来改变 Subversion 客户端的路径表示吗？

我知道一旦我把它放到单独的服务器上，它就不会成为问题，因为每台服务器只会列出一个“位置”（根），但我现在没有这个奢侈。

此外，您可能应该记住，这个盒子已经存在了很多年，并且有很多硬编码的引用。这就是为什么我需要代理它，以便我可以逐步将所有引用移动到新的 URL 格式。

我很欣赏这是一个很长的问题，但我希望我已经明确了我想要实现的目标。随意告诉我我疯了 - 感觉就像我已经接近让它工作了:)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T12:53:15.427

所以我最终通过编辑端点服务器（即我要离开的那个）来在两个不同的位置拥有相同的存储库：

```
<VirtualHost 10.11.22.33>
  Servername svn.svr.mycompany.co.uk

  <Location /data>
    DAV svn
    SVNPath /home/svnrepo/data
    [... Some regular auth stuff ...]
  </Location>
</VirtualHost>

<VirtualHost 10.11.22.33>
  Servername data.svn.svr.mycompany.co.uk

  <Location />
    DAV svn
    SVNPath /home/svnrepo/data
    [... Some regular auth stuff ...]
  </Location>
</VirtualHost> 
```

事实证明，颠覆可以很好地处理这个问题。然后我的代理变得微不足道。显然，我在这里不需要代理，但是当我开始破坏端点服务器时我会这样做。

现在我可以结帐、浏览和签到：

```
http://data.svn.mycompanyglobal.net/
http://data.svn.svr.mycompany.co.uk/
http://svn.svr.mycompany.co.uk/data 
```

第一个将路由到代理服务器并代理到第二个。第二个和第三个（如果直接连接）将直接路由到旧服务器。

作为参考，我的 nginx 代理条目现在看起来像这样：

```
server {
  listen 80;
  listen 443 ssl;

  server_name data.svn.mycompanyglobal.net;

  proxy_set_header     Host data.svn.svr.mycompany.co.uk;

  location / {
    proxy_pass http://data.svn.svr.mycompany.co.uk/;
  }
} 
```

每个存储库都会有其中一个（在我上面的示例中为“数据”和“主”）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-13T03:02:54.430

我可能正确理解您的上下文。我确定您知道这一点，但 SVN 也在不同的端口上运行，所以您可能会遇到问题 :)

关于`location`nginx 中的参数，您必须记住，它仅定义您在配置中设置的服务器名称的位置。`data.svn.company.com`因此，对于您在定义该子域的每个位置时定义的唯一服务器名称。我认为您实际上是在尝试定义多个子域。

因此，如果是这种情况，您将不得不设置多个服务器名称`main.svn.company.com`，`data.svn.company.com`而不是定义位置 URI。

希望有帮助:)

# objective-c - 当点击按钮时，包含按钮的表格视图单元格似乎总是有索引 0

> ID：10452811
> 
> 赞同：0
> 
> 时间：2012-05-04T16:36:23.040
> 
> 标签：objective-c, cocoa-touch, uitableview

我的`UITableView`内部有一个`UIViewController`. 数据、字幕数据和附件按钮都加载正常；但是，当我按下任何附件按钮时，它们都返回索引 0？ `dataSource`并`delegate`连接到 .xib 中的文件所有者我错过了什么？

头文件：

```
@interface OrderPage : UIViewController <UITableViewDataSource, UITableViewDelegate>  {
    NSDictionary *userOrderData;
    NSMutableArray *myMasterList;
    UITableView *tableView;
    NSMutableArray *contentss;
    NSMutableArray *mysendArray;
    NSDictionary *my_data;

}

-(IBAction)sendOrders;
@property( nonatomic, retain) NSDictionary *userOrderData;
@property ( nonatomic, retain) IBOutlet UILabel *firstOrder;
@property(nonatomic, retain) NSMutableArray *myMasterList;
@property(nonatomic, retain) UITableView *tableView;
@property(nonatomic, retain) NSMutableArray *contentss;
@property(nonatomic, retain) NSMutableArray *mysendArray;
@property(nonatomic, retain) NSDictionary *my_data;
@end 
```

实施，我的`cellForRowAtIndexPath:`（按钮部分）：

```
@synthesize tableView = _tableView;

UIButton *button = [UIButton buttonWithType:UIButtonTypeContactAdd];
button.tag = indexPath.row;
[button addTarget:self action:@selector(checkButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
button.backgroundColor = [UIColor clearColor];
cell.accessoryView = button; 
```

我的`buttonPressed`方法：

```
- (void)checkButtonTapped:(UIButton *)sender {
    UITableViewCell *cell = ((UITableViewCell *)[sender superview]);

    NSLog(@"cell row: int%i", [self.tableView indexPathForCell:cell].row);
    NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)[[sender superview] superview]];
    NSLog(@"The row id is %d",  indexPath.row);  

    UIImageView *btnCliked =[[UIImageView alloc] initWithImage:[UIImage imageNamed:@"icon_checkmark.png"]];
    UIActivityIndicatorView *activityView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhite];
    [activityView startAnimating];
    cell.accessoryView = btnCliked;
} 
```

所有这些代码都适用于我的其他专用`UITableView`页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:24:35.760

请参阅我的答案[，](https://stackoverflow.com/questions/9274494/how-to-know-the-uitableview-row-number/9274863#9274863)以更简单的方法使用被点击项目的位置和 indexPathForRowAtPoint 来查找单元格中点击的任何内容的索引路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:12:43.600

我会实现一个`UIButton`子类。让我们称之为`ALAccessoryButton`。

```
// Button code
@interface ALAccessoryButton : UIButton
@property (strong, nonatomic) NSIndexPath *indexPath;
@end

@implementation ALAccessoryButton
@synthesize indexPath;
@end

// In your UITableView 
- (void)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)p {
    ALAccessoryButton *btn = [ALAccessoryButton buttonWithType:UIButtonTypeContactAdd];
    [btn addTarget:self action:@selector(checkButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
    [btn setIndexPath:p];
    [cell setAccessoryView:btn];
}

- (void)checkButtonTapped:(ALAccessoryButton *)sender {
    NSIndexPath *path = [sender indexPath];
    // Now, do whatever else you need to do...
} 
```

说得通？这个答案假设您的主要问题（以及问题的根源）是获取点击按钮的单元格的位置/索引路径，对吗？

# css - 背景图像不适用于 HTML5 样板

> ID：10452812
> 
> 赞同：0
> 
> 时间：2012-05-04T16:36:26.640
> 
> 标签：css, boilerplate, html5boilerplate

从开箱即用的 HTML5 样板安装中，我使用以下代码

```
body
{
background-image:url('img/bg.png');
background-repeat:repeat-y;
} 
```

在 style.css 文件中，背景图片没有出现，它仍然保持空白。

完整的 CSS 在这里

```
/* HTML5 Boilerplate  */

article, aside, details, figcaption, figure, footer, header, hgroup, nav, section { display: block; }
audio, canvas, video { display: inline-block; *display: inline; *zoom: 1; }
audio:not([controls]) { display: none; }
[hidden] { display: none; }

html { font-size: 100%; -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
html, button, input, select, textarea { font-family: sans-serif; color: #222; }
body { margin: 0; font-size: 1em; line-height: 1.4; background-image:url('img/bg.png');
background-repeat:repeat-xy; }

::-moz-selection { background: #fe57a1; color: #fff; text-shadow: none; }
::selection { background: #fe57a1; color: #fff; text-shadow: none; }

a { color: #00e; }
a:visited { color: #551a8b; }
a:hover { color: #06e; }
a:focus { outline: thin dotted; }
a:hover, a:active { outline: 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
blockquote { margin: 1em 40px; }
dfn { font-style: italic; }
hr { display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0; }
ins { background: #ff9; color: #000; text-decoration: none; }
mark { background: #ff0; color: #000; font-style: italic; font-weight: bold; }
pre, code, kbd, samp { font-family: monospace, serif; _font-family: 'courier new', monospace; font-size: 1em; }
pre { white-space: pre; white-space: pre-wrap; word-wrap: break-word; }

q { quotes: none; }
q:before, q:after { content: ""; content: none; }
small { font-size: 85%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }

ul, ol { margin: 1em 0; padding: 0 0 0 40px; }
dd { margin: 0 0 0 40px; }
nav ul, nav ol { list-style: none; list-style-image: none; margin: 0; padding: 0; }

img { border: 0; -ms-interpolation-mode: bicubic; vertical-align: middle; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }

form { margin: 0; }
fieldset { border: 0; margin: 0; padding: 0; }

label { cursor: pointer; }
legend { border: 0; *margin-left: -7px; padding: 0; white-space: normal; }
button, input, select, textarea { font-size: 100%; margin: 0; vertical-align: baseline; *vertical-align: middle; }
button, input { line-height: normal; }
button, input[type="button"], input[type="reset"], input[type="submit"] { cursor: pointer; -webkit-appearance: button; *overflow: visible; }
button[disabled], input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; *width: 13px; *height: 13px; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-decoration, input[type="search"]::-webkit-search-cancel-button { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; resize: vertical; }
input:valid, textarea:valid {  }
input:invalid, textarea:invalid { background-color: #f0dddd; }

table { border-collapse: collapse; border-spacing: 0; }
td { vertical-align: top; }

.chromeframe { margin: 0.2em 0; background: #ccc; color: black; padding: 0.2em 0; }

@media only screen and (min-width: 35em) {

}

.ir { display: block; border: 0; text-indent: -999em; overflow: hidden; background-color: transparent; background-repeat: no-repeat; text-align: left; direction: ltr; *line-height: 0; }
.ir br { display: none; }
.hidden { display: none !important; visibility: hidden; }
.visuallyhidden { border: 0; clip: rect(0 0 0 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; }
.visuallyhidden.focusable:active, .visuallyhidden.focusable:focus { clip: auto; height: auto; margin: 0; overflow: visible; position: static; width: auto; }
.invisible { visibility: hidden; }
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { *zoom: 1; }

@media print {
  * { background: transparent !important; color: black !important; box-shadow:none !important; text-shadow: none !important; filter:none !important; -ms-filter: none !important; } 
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; } 
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; } 
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3 { orphans: 3; widows: 3; }
  h2, h3 { page-break-after: avoid; }
}

body
{
background-image:url('img/bg.png');
background-repeat:repeat-y;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:54:39.460

[HTML5 Boilerplate](https://github.com/h5bp/html5-boilerplate)的目录结构需要这样的东西：

```
body {
  background-image:url(../img/bg.png);
  background-repeat:repeat-y;
} 
```

由于样式表在`/css`并且图像在`/img`（不是`/css/img`）

# java - Eclipse 因错误而崩溃：未处理的事件循环异常超出 CashCode 范围

> ID：10452813
> 
> 赞同：0
> 
> 时间：2012-05-04T16:36:28.793
> 
> 标签：java, eclipse, jboss, event-handling

在我编写代码时，发生了错误，并且有一个窗口显示该错误（我不确定它是否超出范围，我认为是这样的）。现在，当我打开 Eclipse 时，文件过早结束。在错误日志中写着“复制没有正常完成，并且“无法加载由 org.jboss.tools.common.mylyn 提供的带有 connectorKind jira 的存储库模板扩展”。有关更多信息，请参阅日志。我正在与 Jboss 合作，希望这些信息对您有所帮助。谢谢大家。

这是其余的：

```
org.xml.sax.SAXParseException: Premature end of file.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLVersionDetector.determineDocVersion(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.jboss.tools.common.xml.XMLUtilities.getDocument(XMLUtilities.java:252)
    at org.jboss.tools.common.xml.XMLUtilities.getElement(XMLUtilities.java:244)
    at org.jboss.tools.common.xml.XMLUtilities.getElement(XMLUtilities.java:197)
    at org.jboss.tools.jst.web.kb.internal.KbProject.loadValidationContext(KbProject.java:352)
    at org.jboss.tools.jst.web.kb.internal.KbProject.resolveStorage(KbProject.java:286)
    at org.jboss.tools.jst.web.kb.internal.KbBuilder.build(KbBuilder.java:100)
    at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
    at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
    at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
    at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
    at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
    at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
    at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
    at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:47:30.910

Is this a new eclipse install? Or have you possibly removed any atlassian plugins?

You might look at this reference at jboss.org: [https://issues.jboss.org/browse/JBIDE-10338?_sscc=t](https://issues.jboss.org/browse/JBIDE-10338?_sscc=t)

# ios - 视网膜显示屏上的低质量图像

> ID：10452814
> 
> 赞同：1
> 
> 时间：2012-05-04T16:36:29.813
> 
> 标签：ios, uiimageview, png, retina-display

我有一个 UIImageView，用于在 iPad 游戏中显示 png 文件以识别玩家派系。png 为 184x184，UIImage 视图为 92x92。当我在带有视网膜显示器的模拟器中运行应用程序时，它显然会失去质量，但我不明白为什么。[http://oi46.tinypic.com/2cg0n5k.jpg](http://oi46.tinypic.com/2cg0n5k.jpg) 我有很多其他的图像，但它们没有问题。会是什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:50:38.210

当我这样做时，我实际上总是有两个文件......我会这样做：

1）创建92x92的PNG文件并将其命名为image.png（用于演示）

2) 创建 184x184 的 PNG 文件并将其命名为 image@2x.png

然后，当您将它们插入图像视图时，您可以使其显示“image.png”，如果它确实是视网膜显示器，它将自行拉动 image@2x。

# php - 无法使用 Apache 加载 Tor

> ID：10452815
> 
> 赞同：0
> 
> 时间：2012-05-04T16:36:33.090
> 
> 标签：php, apache, tor

我需要使用一个函数通过 Web 界面启动和停止 Tor。由于某种原因，以下指令不起作用（没有产生 Tor 进程）：

```
if ($_GET['tor'] == 'start') {
    shell_exec('/usr/bin/tor > /dev/null 2>&1 &');
... 
```

但是当我通过 shell 运行完全相同的字符串时它可以工作：

```
$ php -r "shell_exec('killall tor > /dev/null 2>&1 &');" 
```

如何解决问题？

提前致谢。ķ

* * *

该问题与 /var/tor 目录权限有关。由于它是由没有任何 home/.tor 的 apache 用户生成的，因此他尝试创建 var/tor。我只能在使用 python (os.system("tor")) 启动 tor 时获得 tor 的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:17:29.340

Tor 需要对运行 Tor 的用户的主目录有写权限。运行 PHP 脚本的用户通常不是这种情况。

试试 echo $output; 上面提到的方法。你可能会看到这一行：

```
[warn] Failed to parse/validate config: Couldn't access/create private data directory "/var/www/.tor" 
```

还要确保 Tor 的路径在您的系统上确实是**/usr/bin/tor**而不是**/usr/sbin/tor**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:42:10.320

您是否以 root 身份运行 php 命令？因为 TOR 可能需要具有 root 权限才能运行。shell_exec 返回什么输出？

另一件事是我建议使用 php 和 ssh，这将允许您在另一台服务器上安装脚本，同时保持功能。

本教程应该可以很好地帮助您：http: [//kevin.vanzonneveld.net/techblog/article/make_ssh_connections_with_php/](http://kevin.vanzonneveld.net/techblog/article/make_ssh_connections_with_php/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:43:22.847

好像是权限问题

```
chmod 777 /usr/bin/tor 
```

但如果这对公众开放，这可能不是一个很好的解决方案。

# java - 使用方面转换方法输入

> ID：10452820
> 
> 赞同：1
> 
> 时间：2012-05-04T16:36:57.047
> 
> 标签：java, aop, transform

我有一个将字符串作为输入的方法，我想让一个方面拦截方法执行，并在某些特定条件下修改字符串并让连接点接收新输入，所以它不知道它已经被改变了。

这是可能的，还是出于安全考虑不能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:44:21.600

使用 AspectJ，您可以像这样声明环绕建议：

```
 public aspect TransformationAspect {
   pointcut transform(String s) : call(* yourMethodName(..)) && args(s);

   Object around(String s): transform(s) {
     // ... Transform String here
     return proceed(s);
   }
 } 
```

您的代码必须在编译时或在运行时使用 AspectJ Java 代理进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:48:27.087

这应该是可能的，但取决于您使用的 AOP 技术。

对于 EJB 3.x 或 CDI，它可能类似于以下伪代码：

```
Object intercept( InvocationContext context ) {

  Object[] params = context .getParameters();

  //modify the string and update the array
  //the value of i depends on the method signature (the parameter position)
  //and getting it is left for you as an excersise
  params[i] =  modify( (String)params[i] );  

  context.setParameters( params );
  return context.proceed();
} 
```

# jsp - 使用 RequestContextAwareTag 导致 java.lang.NoSuchMethodError: setJspContext

> ID：10452824
> 
> 赞同：0
> 
> 时间：2012-05-04T16:37:08.610
> 
> 标签：jsp, spring-mvc, tomcat7, jsp-tags

我有一个自定义标记处理程序类：

```
public class ProfileTag extends RequestContextAwareTag {
@Override
protected int doStartTagInternal() throws Exception {

    return SKIP_BODY;
}

} 
```

在 JSP 上使用此标记会导致以下结果：

```
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NoSuchMethodError: ca.utoronto.med.dc.focus.mvc.customtag.ProfileTag.setJspContext(Ljavax/servlet/jsp/JspContext;)V 
```

完整的跟踪如下：

```
May 4, 2012 12:23:07 PM org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.NoSuchMethodError:    ca.utoronto.med.dc.focus.mvc.customtag.ProfileTag.setJspContext(Ljavax/servlet/jsp/JspContext;)V
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspx_meth_focus_005fprofile_005f0(profile_jsp.java:624)
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspx_meth_c_005fwhen_005f0(profile_jsp.java:598)
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspx_meth_c_005fchoose_005f0(profile_jsp.java:553)
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspx_meth_c_005fforEach_005f5(profile_jsp.java:496)
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspx_meth_c_005fforEach_005f4(profile_jsp.java:449)
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspx_meth_c_005fforEach_005f2(profile_jsp.java:323)
at org.apache.jsp.WEB_002dINF.jsp.profile.profile_jsp._jspService(profile_jsp.java:130)
at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:684)
at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:471)
at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:402)
at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:329)
at org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
at org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1047)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:817)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:549)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:77)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:89)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:300)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

我不明白这一点，`RequestContextAwareTag`extends `TagSupport`which exposes `public void setPageContext`.

谁能告诉我这里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T00:18:49.180

问题不是 setPageContext，而是 setJspContext。

setJspContext 方法仅在 SimpleTagSupport 中可用，在 TagSupport 中不可用。

看起来您的 TLD 被搞砸了，因为 JSP 编译器将您的自定义标记识别为一种类型，然后它的运行时类型就不一样了。确保您的 TLD 文件全部同步，标题中包含正确的版本号等。

# java - 在 jar 文件中包含一个文本文件并读取它

> ID：10452825
> 
> 赞同：6
> 
> 时间：2012-05-04T16:37:17.267
> 
> 标签：java, jar, nullpointerexception, embedded-resource

> **可能重复：**
> [Java 资源作为文件](https://stackoverflow.com/questions/676097/java-resource-as-file)

我是 Java 的新手，我正在尝试在 Jar 文件中获取文本文件。

在我执行 jar 的那一刻，我必须将我的文本文件放在与 jar 文件相同的文件夹中。如果文本文件不存在，我会得到一个`NullPointerException`，我想避免。

我想要做的是在 jar 中获取 txt 文件，这样我就不会遇到这个问题。我尝试了一些指南，但它们似乎没有用。我当前的读取功能是这样的：

```
public static HashSet<String> readDictionary()
{
    HashSet<String> toRet = new HashSet<>();
     try
     {
            // Open the file that is the first 
            // command line parameter
            FileInputStream fstream = new FileInputStream("Dictionary.txt");
        try (DataInputStream in = new DataInputStream(fstream)) {
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;
            //Read File Line By Line
            while ((strLine = br.readLine()) != null)   {
            // Read Lines
                toRet.add(strLine);
            }
        }
            return toRet;
     }
     catch (Exception e)
     {//Catch exception if any
            System.err.println("Error: " + e.getMessage());
     } 
     return null;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:38:36.050

不要试图在 Jar 文件中查找文件作为“文件”。改为使用资源。

获取对类或类加载器的引用，然后对类或类加载器调用`getResourceAsStream(/* resource address */);`。

* * *

请参阅下面的类似问题（如果可能，请避免创建新问题）：

*   [从 jar 中读取资源文件](https://stackoverflow.com/questions/20389255)
*   [如何从 Java jar 文件中读取资源文件？](https://stackoverflow.com/questions/403256)
*   [访问 .jar 文件中的文件](https://stackoverflow.com/questions/8258244)
*   [如何从 JAR 存档中读取文件？](https://stackoverflow.com/questions/16842306)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:43:21.617

```
// add a leading slash to indicate 'search from the root of the class-path'
URL urlToDictionary = this.getClass().getResource("/" + "Dictionary.txt");
InputStream stream = urlToDictionary.openStream(); 
```

另请参阅[此答案](https://stackoverflow.com/a/10450795/418556)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:40:42.653

似乎与此问题完全相同：[如何访问 jar 中的配置文件？](https://stackoverflow.com/questions/944610/how-do-i-access-a-config-file-inside-the-jar)

对于您的问题`NullPointerException`，我建议不要确保它不会发生，而是要做好准备并妥善处理。我会进一步要求您*始终*检查变量的空值，这是一件好事。

# php - 在 __toString 方法中回显一个数组

> ID：10452827
> 
> 赞同：0
> 
> 时间：2012-05-04T16:37:27.517
> 
> 标签：php

我很难在我的`__toString`方法中返回一个数组。

这是我的代码。

```
public function __toString()
{
    $this->_libraries();
    $this->_sysConfig();

    //print_r($this->version);
    $version = implode("\n", $this->version);
    echo $version;
    return 'echo';//$version;
} 
```

我一直在玩它，但无论我做什么，我仍然会收到此错误

```
Notice: Array to string conversion in (...) 
```

不能返回数组吗？

这是我试图内爆的数组

```
Array
(
    [0] => Array
        (
            [version] => Array
                (
                    [item] => Array
                        (
                            [0] => Array
                                (
                                    [name] => cms
                                    [version] => 1.0
                                )

                            [1] => Array
                                (
                                    [name] => TinyMCE Jquery Package
                                    [version] => 3.5
                                )

                            [2] => Array
                                (
                                    [name] => Jquery
                                    [version] => 1.7.2
                                )

                        )

                )

        )

) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:38:55.033

为什么要回显返回值然后返回 PHP 构造？

只需返回您的变量：

```
return $version; 
```

**更新**

我很确定你不能内爆多维数组。您需要编写一个自定义回调并调用 array_walk 以使其工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:53:19.547

您不能`implode`在多维数组上使用

**例子**

```
$version = Array (
        0 => Array (
                'version' => Array (
                        'item' => Array (
                                0 => Array (
                                        'name' => 'cms',
                                        'version' => '1.0' 
                                ),

                                1 => Array (
                                        'name' => 'TinyMCE Jquery Package',
                                        'version' => '3.5' 
                                ),

                                2 => Array (
                                        'name' => 'Jquery',
                                        'version' => '1.7.2' 
                                ) 
                        ) 
                )

        )

);

$version = implode ( $version, "\n" ); 
```

输出

```
 Notice: Array to string conversion in xxxx 
```

**演示 1**

```
 $version = multi_implode ( $version, "," ); 
```

输出

```
 cms1.0 , TinyMCE Jquery Package3.5 , Jquery1.7.2 
```

**演示 2**

```
 $version = multi_implode ( $version, " , " ," = " ); 
```

输出

```
 cms = 1.0 , TinyMCE Jquery Package = 3.5 , Jquery = 1.7.2 
```

**使用的功能**

```
function multi_implode($pieces, $glue, $glue2 = null) {
    foreach ( $pieces as $piece ) {
        if (is_array ( $piece )) {
            $retVal [] = multi_implode ( $piece, $glue, $glue2 );
        } else {
            if ($glue2 == null) {
                $retVal [] = $piece;
            } else {
                $retVal [] = implode ( $glue2, $pieces );
                break;
            }
        }
    }
    return implode ( $glue, $retVal );
} 
```

# javascript - JavaScript 类型参数的有效性？

> ID：10452832
> 
> 赞同：2
> 
> 时间：2012-05-04T16:37:47.923
> 
> 标签：javascript, oop

最近我偶然发现 JavaScript 允许您将对象或数组作为键传递给对象参数。前任：

```
var myType = { 'Name':'MyType' };
var myObject = {};
myObject[myType] = 1; 
```

将`myObject[myType];`返回`1` 从进一步研究来看，似乎在内部`.toString()`调用了对象的方法并将其作为实际键传递。在上面的示例中，这实际上是分开的，因为这意味着正在设置真正发生的事情`myObject['[object Object]']`，这意味着传入的任何标准对象都将访问相同的键。

然而，我决定通过创建自定义对象来扩展它，这将导致它们的`.toString()`方法返回它们的构造函数。这意味着它将为每个对象类型返回一个唯一键。基于此，我创建了以下示例，使用此技术创建类型参数的相对干净的实现：

```
function Cat() {}
function Dog() {}

function AnimalPack() {
    this.speech = "";
    this.size = 0;
}

AnimalPack[Cat] = function() {
    var pack = new AnimalPack();
    pack.speech = "mew";
    pack.size = 2;
    return pack;
}

AnimalPack[Dog] = function() {
    var pack = new AnimalPack();
    pack.speech = "bark";
    pack.size = 4;
    return pack;
}

AnimalPack.prototype.Speak = function() {
    var speak = [];
    for(var i=0; i<this.size; i++) {
        speak.push(this.speech);
    }
    return speak.join(" ");
}

var catparty = new AnimalPack[Cat]();
var dogparty = new AnimalPack[Dog](); 
```

在此示例`catparty.Speak()`中将返回`'mew mew'`并将`dogparty.Speak()`返回`'bark bark bark bark'`。

这也可以用于原生 JavaScript 类型（字符串、数字等）。

这似乎适用于所有 5 种主要浏览器（chrome、firefox，即 safari、opera）。

我想知道在这种技术中是否存在一些我没有看到的明显缺陷，或者这可能是实现类型参数的有效方式？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:47:32.423

你不需要那样做。你可以试试这个：

```
/function ([^(]*)/g.exec(dog.constructor)[1] 
```

## [演示](http://jsfiddle.net/XFdrd/)

# java - 在 64 位操作系统上使用 32 位 JVM 的 JNA

> ID：10452833
> 
> 赞同：3
> 
> 时间：2012-05-04T16:37:49.483
> 
> 标签：java, windows-7, 32bit-64bit, jna

我想使用我开发的专有库 (DLL) 升级设备。该库使用 MFC 应用程序运行良好。然而，这里的转折是我们必须**在浏览器中**进行这项工作。

我的想法是使用一个小程序，然后调用本机 DLL 来完成这项工作。我的测试 Java 应用程序一切正常。然后我尝试使用小程序，然后没有任何效果。

我已将问题范围缩小到 32 位 VS 64 位 JVM。让我解释一下：我使用的 Eclipse IDE 使用**64 位 JVM**，因为我在**Windows 7 64 位**上。但是，浏览器使用**32 位 JVM**，这不起作用。

两者的区别在于传递给我的函数的参数。以下是 DLL 公开的函数的一些示例：

```
bool UPGRADELIB_API Connect( const char* serverAddress, unsigned short serverPort );
bool UPGRADELIB_API Upgrade( const char* pFilePath ); 
```

在Java中分别匹配：

```
boolean Icon_ConnectClientNode( String serverAddress, int serverPort );
boolean Icon_Upgrade( String pFilePath ); 
```

我的 Java 测试 GUI 传递给这个本地库**“192.168.xx”**作为 IP 地址和**50005**作为端口。正如我之前所说，在*64bit中，一切都很好。*在*32bit*中，如果我在 C 中打印 serverAddress 和 serverPort ，它会显示

> （空）：62384

如您所见，即使是端口也没有正确传递。

我已经做了一个星期了，我从头上拉了很多头发，我很快就不会了......请帮帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:42:08.867

发现错误：正在传递一个 long 并且 Java long 的大小与 32 位和 64 位的 C/C++ long 的大小不同。

傻我。

# python - 云中的 OpenCV

> ID：10452834
> 
> 赞同：5
> 
> 时间：2012-05-04T16:37:52.100
> 
> 标签：python, opencv, heroku, amazon-ec2, cloud

对于那些有云开发经验的人来说，这个问题可能看起来很愚蠢，但是来自桌面世界的我自己无法完全弄清楚解决方案。我有很多使用opencv的代码，其中一些带有api。

问题是，是否有可能让 opencv 在远程服务器上运行（比如说 heroku 或 S3）？
我认为唯一的方法是在代码中发送任何依赖项（并且有很多）？

我正在用 Python 开发。

谢谢 ！

**编辑 ：**

我的第一个想法是这个： [https ://github.com/jlengrand/FaceMovie](https://github.com/jlengrand/FaceMovie)

我正在开发一个小型应用程序，能够自动检测图像中的人脸，将它们居中并从中创建电影。但作为一名计算机工程师，我有一大堆可以在云中完成的简单事情的想法。

我意识到这种事情的数据传输可能是巨大的，你可能比我更适合回答这种事情是否可能。

我正在考虑通过降低从云上某处拍摄图像的图像质量来“减少”这个有效载荷的方法？（picasa 相册，...）

让我知道，事实上，我对任何可能性都持开放态度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T18:09:53.100

它绝对有可能。对于 Python 中的 Web 服务，[Piston](https://bitbucket.org/jespern/django-piston/wiki/Home)是我的首选。从那里，您需要将它部署在某种网络服务器上。如果您在 EC2 上进行部署，则可以使用[预配置了 Django 和 Apache 的 bitami AMI。](https://aws.amazon.com/amis/bitnami-djangostack-1-3-1-ubuntu-10-04)当然，您需要 apt-get 安装 opencv ubuntu 软件包。

现在，考虑到所有这些，使用 Web 服务“在云中”执行此操作可能有意义，也可能没有意义。您需要传输要处理的图像，可能是通过 HTTP POST，这样会花费一些时间和带宽。根据您想要返回的内容，您可能还会返回大量数据，这将有其自身的成本。你能和我们分享你的应用程序会做什么吗？如果我知道你想要完成什么，我可以提供更好的建议。

如您所述，ubuntu OpenCV 软件包已过时。如果您需要更新的东西，我发现它很容易安装[ROS](http://www.ros.org/wiki/ROS/Installation)，其中包括[OpenCV 2.3](http://www.ros.org/wiki/vision_opencv)及其依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:10:13.453

您应该尝试 Windows Azure。它是唯一运行 c/c++ 的 PAAS（没有“服务器”的云）。

如果需要一些命令来安装它，你可以使用[启动任务](http://msdn.microsoft.com/en-us/library/windowsazure/gg456327.aspx)。

至于视频流，您可以打开一个套接字（使用 TCP 端点）并将视频流式传输到 azure 实例。如果您想要实时视频处理，这可能是最有效的方法。如果要录制视频并上传，请查看使用[blob 存储](https://www.windowsazure.com/en-us/home/tour/storage/)。然后，您可以使用消息队列向工作人员发出信号，表明有视频等待处理。

信用：[如何在 Windows Azure 上安装 OpenCV？](https://stackoverflow.com/questions/9354046/how-do-i-install-opencv-on-windows-azure)

# css - 979到1200之间的MQ怎么办？

> ID：10452835
> 
> 赞同：2
> 
> 时间：2012-05-04T16:38:03.943
> 
> 标签：css, twitter-bootstrap, media-queries, responsive-design

所以，我只是进入响应式设计和与之相关的任何事情。大多数情况下，我正在研究 Twitter Bootstrap，因为它是用 LESS 制作的，而且我一直使用 LESS 作为 CSS 框架。

我发现他们正在使用的媒体查询宽度：

```
// Landscape phones and down
@media (max-width: 480px) { ... }

// Landscape phone to portrait tablet
@media (max-width: 767px) { ... }

// Portrait tablet to landscape and desktop
@media (min-width: 768px) and (max-width: 979px) { ... }

// Large desktop
@media (min-width: 1200px) { ... } 
```

但是我在测试行为时有一个问题，`979px`和之间会发生什么`1200px`？因为如果我不添加任何东西，另一个媒体查询，我的所有元素都会在调整窗口大小或这两个值之间的宽度时失去样式。

我应该添加其他内容还是缺少某些内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-26T10:16:43.003

我来晚了，但我也想修复引导程序响应网格的那部分。

如果有人感兴趣，我添加了一个新的 LESS 文件和一些变量。

variables.less（在网格部分的好地方添加它）

```
// basic grid
// 980px-1199px
@gridColumnWidth980:      56px; // Feel free to modify this value !
@gridGutterWidth980:      24px; // Feel free to modify this value !
@gridRowWidth980:         (@gridColumns * @gridColumnWidth980) + (@gridGutterWidth980 * (@gridColumns - 1));

// Fluid grid
// 980px-1199px
@fluidGridColumnWidth980:      percentage(@gridColumnWidth980/@gridRowWidth980);
@fluidGridGutterWidth980:      percentage(@gridGutterWidth980/@gridRowWidth980); 
```

新文件：responsive-980px-1199px.less

```
// Responsive: Small desktops
// --------------------------------------------------

@media (min-width: 980px) and (max-width: 1199px) {

  // Fixed grid
  #grid > .core(@gridColumnWidth980, @gridGutterWidth980);

  // Fluid grid
  #grid > .fluid(@fluidGridColumnWidth980, @fluidGridGutterWidth980);

  // Input grid
  #grid > .input(@gridColumnWidth980, @gridGutterWidth980);

  // No need to reset .thumbnails here since it's the same @gridGutterWidth

} 
```

然后只需将新文件导入到 responsive.less 文件！

```
// Small desktops
@import "responsive-980px-1199px"; 
```

网格不应再“宽”在 980px 和 1199px 之间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:12:35.253

你的整个页面会分散并且看起来很奇怪你必须为此配置你的css

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-12T16:06:21.777

最简单的解决方案：将**@media (min-width: 1200px)**从 1200px 更改为 980px。

只要**min-width: 1200px**规则适用于您网站上 980px 的窗口，此方法就可以正常工作。它适用于我的。只要您不介意在每次更新 Bootstrap 时进行更改，您就可以将其保存在 .less 文件中或更改 Bootstrap css 文件。希望他们能在未来的更新中弥补这一差距。

# entity-framework-4 - 使用 SQL Server 2008 R2 生成 ADO.NET 实体框架并连接到 MySQL

> ID：10452840
> 
> 赞同：1
> 
> 时间：2012-05-04T16:38:27.937
> 
> 标签：entity-framework-4, ado.net

我想在 sql server 数据库上开发并使用 MySql 进行生产。

我已经使用 SSMS Diagram 创建了我的数据库，并在我的 ASP.NET MVC 项目中生成了 ADO.NET 实体模型。然后我将 Sql Server 的连接字符串修改为指向 MySql Server，并专门将 MySqlConnection 对象传递给 DbContext。现在我正在尝试执行下面的代码，但它抱怨提供的底层连接不是 .NET Sql Server Connection 类型。

```
dbContext.CreateDatabase(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:41:42.457

您必须将 MySql 添加到g 文件的`System.Data`一部分。`web.confi`

```
 <system.data>
            <DbProviderFactories>
                    <clear />
                    <add name="MySQL Data Provider" invariant="MySql.Data.MySqlClient" description=".Net Framework Data Provider for MySQL" type="MySql.Data.MySqlClient.MySqlClientFactory, MySql.Data, Version=6.4.4.0, Culture=neutral, PublicKeyToken=c5687fc88969c44d" />
            </DbProviderFactories>
    </system.data> 
```

请注意，我使用的是 Mysql.Data 库的 6.4.4.0 版本，如果您使用的是其他版本，则需要对其进行更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:30:42.890

在 web.config 中，您需要：

*   为 MySQL 添加提供者工厂（如上所示）
*   修改您的连接字符串（或创建一个新的），其中 providerName 属性已相应设置（类似于`<add name="NorthwindEntities" connectionString="metadata=NorthwindModel;provider=MySQL Data Provider;provider connection string="Data Source=.\SQLExpress;Initial Catalog=Northwind;Integrated Security=True"" providerName="System.Data.EntityClient"/>`

除了这些更改之外，您还需要有两个 SSDL 文件 - 一个用于 Sql Server，另一个用于 MySQL。这些文件特定于您使用的商店。他们不仅使用商店理解的类型，而且还有提供者特定的信息（我把它放在{大括号}中，对不起，我不知道我的 Sql 的示例性提供者清单令牌）：

```
<Schema Namespace="NorthwindEFModel.Store" Alias="Self" xmlns="http://schemas.microsoft.com/ado/2009/11/edm/ssdl"
    Provider="{MySQL Data Provider}" ProviderManifestToken="{Provider manifest token}"> 
```

我认为如果您先使用代码，您可以省去一些麻烦。您将使用代码（类 + DbContext.OnModelCreating()）创建并可能配置您的模型，并让 EF 为您创建数据库。根据您的连接字符串（在这种情况下将是“常规”连接字符串而不是实体连接字符串），它将与 Sql Server 或 MySQL 通信，并相应地创建数据库。

# .net - 果园新列表功能缺失

> ID：10452841
> 
> 赞同：0
> 
> 时间：2012-05-04T16:38:29.357
> 
> 标签：.net, list, orchardcms

我正在尝试按照[OrchardProject.net 上的概述](http://docs.orchardproject.net/Documentation/Creating-lists)创建自定义内容类型的新列表。但是，我没有“新建”>“列表”选项，在我的已安装模块列表中看不到它，也无法在网站上找到它。如何启用列表功能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:59:59.973

它已被弃用。请改用投影仪或分类法。该模块在图库中仍然可用，但不建议这样做。

# perl - 为什么在 Perl 的 Spreadsheet::WriteExcel 模块中使用 repeat_formula 时，我的 2D 范围没有被 3D 范围替换？

> ID：10452842
> 
> 赞同：2
> 
> 时间：2012-05-04T16:38:32.743
> 
> 标签：perl, excel

我需要通过 Perl 脚本创建动态 Excel 公式。

我存储了一个包含虚假范围的公式

```
my $stored_formula = $worksheet->store_formula('=MEDIAN(A1:A2)'); 
```

在脚本中，我计算了新的范围

```
$formula_range = $mm_arr[$mmindx-1] . "!" . 
                 num2col(2+$form_off) . ((($serv-1)*5)+5) . ":" .
                 num2col((2+31+$form_off)) . ((($serv-1)*5)+5); 
```

where`@mm_arr`是一个数组`("Jan", "Feb", &hellip;)` ，`num2col`是我用来将列号转换为字母的函数。

下面的行是repeat_formula

```
$worksheet->repeat_formula(
     (($serv-1)*5)+4, 
     1+$mmindx, 
     $stored_formula, 
     undef, 
     'A1:A2', $formula_range
); 
```

我希望得到：

```
=median(Feb!K3:AH3) 
```

但相反，我得到：

```
=median(K3:AH3) 
```

所以查找/替换以某种方式工作，但我无法确定如何！

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:41:43.297

首先，有几点建议：

您的表达式中有太多括号，再加上我们看不到其定义的变量和函数，使您的代码难以直观地解析。您也没有发布一个显示问题的小型、独立的脚本，这意味着任何试图帮助您的人都必须设置一个测试脚本。让别人轻松。

例如，您定义的行`$formula_range`可以重写如下：

```
my $formula_range = sprintf('%s!%s%d:%s%d',
    $mm_arr[$mmindx - 1],
    num2col(2 + $form_off),
    5 + 5 * ($serv - 1),
    num2col(2 + 31 + $form_off),
    5 + 5 * ($serv - 1),
); 
```

请记住，您可以使用[Spreadsheet::WriteExcel::Utility](https://metacpan.org/module/Spreadsheet::WriteExcel::Utility)提供的函数在单元格符号和行/列索引之间进行转换。

问题似乎是，如果存储的公式不在 form`SheetName!Range`中，那么替换会在替换中去掉工作表名称，并且只放在范围内。

其原因似乎与`Spreadsheet::WriteExcel::Formula`. 普通范围被解析为`range2d`标记，而具有工作表引用的范围被解析为`range3d`标记。稍后，在 中`repeat_formula`，替换是在令牌上完成的。据我所知，`range2d`令牌看起来像`'_ref2dA1:A10'`。因此，`'_ref2dA1:A2'`被转化为`'_ref2dFeb!A1:10'`重复公式。但是，当它传递给 时，代码仍然根据前缀`Spreadsheet::WriteExcel::Formula::parse_tokens`将其分类为令牌。`range2d`我收集了最后的电话`$parse_str .= $self->_convert_ref2d($token, $class);`，然后将其重新转换为`'_ref2dA1:A10`. 我不确定这是否可以归类为错误，但从用户的 POV 来看，这绝对是出乎意料的。

因此，解决方案是放入保证存在的工作表的名称。

这是一个测试脚本：

```
#!/usr/bin/env perl

use strict; use warnings;
use Spreadsheet::WriteExcel;
use Const::Fast;

const my @MONTHS => qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec);
const my $WORKBOOK => 'test.xls';

my $book = Spreadsheet::WriteExcel->new($WORKBOOK)
    or die "Cannot open '$WORKBOOK': $!";

my %sheets = map {$_ => $book->add_worksheet($_)} Summary => @MONTHS;

for my $m (@MONTHS) {
    for my $n (1 .. 10) {
        $sheets{ $m }->write_number($n - 1, 0, $n);
    }
}

my $formula = $sheets{Summary}->store_formula('=MEDIAN(Summary!A1:A2)');

for my $n (0 .. 1) {
    my $replacement = sprintf(q{'%s'!A1:A10}, $MONTHS[$n]);

    $sheets{Summary}->repeat_formula($n, 0, $formula, undef,
        'Summary!A1:A2' => $replacement
    );
}

$book->close
    or die "Error closing '$WORKBOOK': $!"; 
```

这是一个屏幕截图：

![显示正确公式的屏幕截图](../Images/3078a99edbd8109c12d88968c5c25ee7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T22:45:31.690

这些`store_formula()/repeat_formula()`方法是使用 Parse::RecDescent 进行慢速公式解析的历史解决方法。它们仅用于替换简单和相似的范围。

将表达式从 2D 范围更改为 3D 范围是行不通的，因为表示每个公式的已解析二进制结构非常不同，不能通过简单的替换来更改。

[您可以在Spreadsheet::WriteExcel](http://search.cpan.org/dist/Spreadsheet-WriteExcel/)中解决此问题，但我建议您使用[Excel::Writer::XLSX](http://search.cpan.org/dist/Excel-Writer-XLSX/)，它是 Spreadsheet::WriteExcel 的 API 兼容替代品，并且不需要`store_formula()/repeat_formula()`加快重复公式的速度。

最后一点，两个 Excel 编写器模块都带有用于范围生成的[::Utility模块。](http://search.cpan.org/dist/Excel-Writer-XLSX/lib/Excel/Writer/XLSX/Utility.pm)

# c++ - 共享库中的回溯功能

> ID：10452847
> 
> 赞同：3
> 
> 时间：2012-05-04T16:38:59.330
> 
> 标签：c++, linux, stack-trace, x86-64, backtrace

`SEGSEGV`进入共享库后，我正在尝试获取堆栈跟踪并将其保存到文件中。共享库是闭源产品的插件。所有这些都适用于生产，我无法直接访问它。

我的代码捕获`SIGSEGV`信号，打印堆栈跟踪并退出。我有这样的事情：

> /opt/ecelerity/libexec/site/ec_attachextensions.so [0x2aecc2019f11] /opt/ecelerity/libexec/site/ec_attachextensions.so [0x2aecc2019f11] /opt/ecelerity/libexec/site/ec_attachextensions.so [0x2aecc2019fee] /opt/ecelerity/ libexec/site/ec_attachextensions.so [0x2aecc201a587]
> 
> /opt/ecelerity/sbin/ecelerity [0x501235]
> 
> /opt/ecelerity/sbin/ecelerity(sieve_seng_execute+0x82) [0x506d32] /opt/ecelerity/libexec/validate/sieve.so [0x2aecc2862c9e] /opt/ecelerity/sbin/ecelerity(validate_data+0xa5) [0x4a90d5] /opt/ ecelerity/sbin/ecelerity(esmtp_message_factory+0x154e) [0x46eace] /opt/ecelerity/sbin/ecelerity(schedule_event_and_dispatch+0x6a) [0x49c59a]

问题是我不能在其中包含共享库的函数名称和偏移量。据我了解，在找到`/proc/$PID/maps`.

之后，我正在执行类似的操作：

```
addr2line -e /opt/ecelerity/libexec/site/ec_attachextensions.so (LIBRARY_OFFSET_FROM_MAPS_FILE - 0x2aecc2019f11) 
```

`0x2aecc2019f11`上面堆栈跟踪的地址在哪里。我想知道有什么方法可以在不接触地图文件的情况下在堆栈跟踪中获取函数名称？换句话说，我该如何编程？在这里会`dladdr`有所帮助（在我的情况下`dladdr`，无法从函数提供的地址获取函数名称`backtrace`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:11:02.310

回溯代码使用与 dladdr 大致相同的机制来确定函数名称。

如果您的库是使用链接器映射文件（定义要导出的内容，并可用于限制所有其他项目的可见性）或`-fvisibility=hidden`具有显式可见符号的 构建的，那么它会隐藏符号，以便它们不会出现在回溯输出中。

解决方法是在不使用限制库中所有符号可见性的映射文件的情况下进行编译，或者使用`-fvisibility=default`. 这将使您无需任何努力就可以进行回溯。

要让它在不这样做的情况下工作，您需要从 .so 加载本地符号表，并使用类似于 addr2line 的机制确定符号位置。这样做的机制是利用[`libelf1`](http://directory.fsf.org/wiki/Libelf). 读取本地符号表。

...这当然要求该表尚未从文件中删除。如果是这种情况，那么这些技巧都不重要，因为 .so 根本不附带信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T17:22:40.817

您可以让信号处理程序为您读取 /proc/self/maps。

或者您可以输出某个函数的绝对地址，然后您可以将其用作比较点来查找库偏移量。

但是，如果有一个动态链接器函数可以为您提供基地址，我不会感到惊讶 - 您可以查看文档。

# c++ - C ++成员函数作为全局函数的参数？

> ID：10452850
> 
> 赞同：3
> 
> 时间：2012-05-04T16:39:11.930
> 
> 标签：c++, function-pointers

有没有办法将成员函数作为参数传递给全局函数？我发现[了这个](https://stackoverflow.com/questions/2463112/pointer-to-a-c-class-member-function-as-a-global-functions-parameter)，但它并没有真正解决我的问题。

可以说我有以下全局函数：

```
double Function(double (*fEval)(double F1, double F2),double min, double max,int numArgs,...);

bool Function2(double (*fEval1)(double F1, double F2),double (*fEval2)(double F1, double F2),double xmin, double xmax, double ymin, double ymax,double &ax, double &ay,int numArgs,...); 
```

我的一个成员函数将 Function2 称为

```
Function2(&F1, &F2, 0, m_m1, 0, m_m2, &m_n1, &m_n2,0); 
```

其中 F1 和 F2 是成员函数，而 Function2 在某处调用 Function1 但目前我的问题是 Function2 以及如何正确声明它。

好的，现在我已经设法将我的函数声明更改为

```
bool Function2(double (CLASS::*)(double F1, double F2),double (CLASS::*)(double F1, double F2),double xmin, double xmax, double ymin, double ymax,double *ax, double *ay,int numArgs,...) 
```

当我尝试调用已替换为 CLASS::* 的函数 fEval1 和 fEval2 时，我可能只有一个问题，那么如何在该函数中调用第一个和第二个成员函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:50:37.490

这样做*是有*可能的，但它是否是你真正想要做的事情存在很多问题。

有一个指向成员函数的指针，*但*它基本上充当结构中的偏移量，因此要使用它，您需要提供指向成员函数的指针*和*调用该成员函数的对象. 鉴于您正在做的事情，看起来不太可能（至少对我而言）您真的想要这个。

我的直接反应是将你的`Function1`and编写`Function2`为模板，并传递函子而不是指向函数的指针。而不是指定一个普通的成员函数，每个函数都将像其他仿函数一样，并重载`operator()`来完成工作。

编辑：如果可以的话，我也会避免使用可变参数函数——它们会丢弃类型信息，这是 C++ 中明确的禁忌之一。尤其是对于支持 C++11 的新 C++ 编译器，几乎总是很容易避免它（您可以传递一个创建对象的初始化列表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:41:55.217

成员函数指针与普通函数指针不同——您需要将它们的类指定为类型的一部分。此外，在调用它们时，您需要指定调用成员函数的对象。

您的错误消息表明您传递的成员函数的类型实际上是`double (CLASS::*)(double, double)` - 这与签名中的普通函数指针类型不兼容

看看这里的 C++ FAQ 以获得更多关于如何使用成员函数指针的信息：

[http://www.parashift.com/c++-faq-lite/pointers-to-members.html](http://www.parashift.com/c++-faq-lite/pointers-to-members.html)

# ssms - SQL Server Management Studio 2012 在哪里？

> ID：10452851
> 
> 赞同：224
> 
> 时间：2012-05-04T16:39:22.153
> 
> 标签：ssms, sql-server-2012

我的笔记本电脑上有 SQL Server 2008 R2 和 Visual Studio 2008 和 2010。我已经安装了 SQL Server 2012，并且终于可以显示 SQL Server Data Tools，这样我就可以在 Visual Studio 2010 中创建 SSRS 报告了。

尽管我在 SQL Server 2012 的两个单独实例上安装*了多次*管理工具，但我无法在程序中找到它们，也无法运行它们。我能找到的唯一 SSMS 程序运行 SSMS 2008 R2。

我意识到通常的建议是在 Visual Studio 之前安装 SQL Server，但我真的不想卸载 Visual Studio，因为这会带来许多其他问题。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-09-04T18:35:21.407

只需从[Microsoft 下载 - SQL Server® 2012 Express with SP1下载](http://www.microsoft.com/en-us/download/details.aspx?id=35579)**SQLEXPRWT_x64_ENU.exe**

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-05-04T19:17:52.893

您可以从这里获得[SSMS Express 工具](http://www.microsoft.com/en-us/download/details.aspx?id=43351)或从这里获得完整的[SQL Server Eval 工具](http://www.microsoft.com/betaexperience/pd/SQL2012EvalCTA/enus/default.aspx)。[MSDN](http://msdn.microsoft.com/subscriptions/downloads/default.aspx) / [TechNet](http://technet.microsoft.com/subscriptions/downloads/default.aspx)下载是目前获得SSMS 2012 工具集的RTM 版本（*非评估*）的唯一地方。

请注意现在的第一个链接（2017 年 12 月）指向“Microsoft® SQL Server® 2012 Service Pack 2 (SP2) Express”。ssms 2014 和 2017 仍然可用。

* * *

## 回答 #3

> 赞同：87
> 
> 时间：2012-07-22T01:06:39.483

我刚刚遇到了这个问题。我不得不重新打开 SQL Server 的安装并单击**Installation** -> **New SQL server installation or add features to existing installation**。然后，当我们按照说明进行操作时，直到我们到达**feature selection**时，只需选中 SQL Management tools 复选框并继续。

我不知道为什么这个软件被认为是一个功能并且像这样隐藏。它应该是一个独立的软件安装。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-06-13T03:46:31.703

我发现在这些情况下命令行是我的朋友。

我从 DVD 上安装了 SQL Server 2012 企业管理工具，包括 Management Studio（实际上是安装了 ISO），而没有使用以下命令安装任何其他东西：

```
e:\setup.exe /Q /IACCEPTSQLSERVERLICENSETERMS /ACTION=install /FEATURES=Tools 
```

使用提升的权限运行命令提示符。请耐心等待，因为它必须解压缩安装文件。不要尝试直接安装 MSI 文件，因为您会丢失与主安装程序一起打包的依赖项检查。

同样，这是从 Enterprise 或 Developer 媒体上安装完整版本，如果您有它，并且不希望满足于免费的 Express 版本。

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-10-17T13:02:41.403

# Full 或“Complete Management Studio”，而不是“Express”。

我对在 Windows Server 2012 上运行的 Azure 上新配置的[SQL Server 2012](https://en.wikipedia.org/wiki/Microsoft_SQL_Server#SQL_Server_2012) SP1 标准和企业版缺乏 Management Studio 感到非常困惑。

通常可以从“开始按钮快捷方式”或至少在`C:\Program Files`某个地方找到它。

最终，我找到`C:\SQLServer_11.0_Full`了图像安装路径 - 执行并确认 Management Studio 实际上是默认安装的，即使它无法通过*Add Remove Programs*看到。

简而言之，如果您在 Azure上的[Windows Server 2012上配置 SQL Server 2012 VM，只需运行](https://en.wikipedia.org/wiki/Windows_Server_2012)[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)，然后进入`ssms.exe`访问 Management Studio。

```
C:\Program Files (x86)\Microsoft SQL Server\110\Tools\Binn\ManagementStudio\ssms.exe 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-10-24T05:08:11.790

在[可供下载的官方 SQL Server 2012 ISO 上](http://www.microsoft.com/betaexperience/pd/SQL2012EvalCTA/enus/default.aspx)，只需导航到 \x64\Setup\（或 \x86\Setup），您就会找到“sql_ssms.msi”。它只有大约 60 MB，而且由于它是一个 .MSI，您可能可以将其设置为自动安装（例如用于大型实验室或教室环境）。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-12-17T08:37:11.460

*迟到的答案，但可能对其他读者有用*

尽管 SQL Server Management Studio 安装是用户友好的（或多或少），但人们似乎仍然会遇到不同的问题。网上有很多教程和说明，我个人按照本文中找到的：[http ://www.sqlshack.com/sql-server-management-studio-step-step-installation-guide/](http://www.sqlshack.com/sql-server-management-studio-step-step-installation-guide/)

它解释了如何安装独立的 SSMS，但您也可以将 SSMS 与 SQL Server 一起安装 - 只需确保您在功能选择屏幕中选择了管理工具。

我还建议阅读有关在 Visual Studio 2010 之后安装 SSMS 2008 Express 的分步教程，可在此处找到：http: [//blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-逐步安装-sql-server-management-studio-2008-express-after-visual-studio-2010.aspx](http://blogs.msdn.com/b/bethmassi/archive/2011/02/18/step-by-step-installing-sql-server-management-studio-2008-express-after-visual-studio-2010.aspx)

如果您刚刚安装了 Visual Studio 2010 但还想安装 SQL Server Management Studio，它会有所帮助。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-02-01T17:38:33.393

返回安装程序并检查“管理工具”后，ssms.exe 在“C:\Program Files\Microsoft SQL Server\110\Tools\Binn\ManagementStudio”下可用（感谢大家指出在哪里可以找到它）。

![sql服务器设置](../Images/385b112e03c8c0b5b19f9cd81a169b7b.png)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-08-05T16:06:39.243

仅指向 Management Studio 2012 的直接 MSDN 链接：[SQL Server 2012 Express Management Studio with Service Pack 1 (x64) -（英语）](https://msdn.microsoft.com/en-US/subscriptions/securedownloads/hh442898#FileId=51333)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2012-05-07T13:57:45.223

我使用 Windows 中的控制面板卸载了 SQL Server 2012 的所有部分，然后重新安装（选择“所有功能”）。现在它起作用了！

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2013-02-13T21:39:42.127

我在这里找到它：http: [//www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

这不需要任何 TechNet rigamarole 或使用他们可怕的基于 Java 7 的下载管理器。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-06-11T06:16:54.603

对于单独的模块（x86 和 x64），如果您想要自定义安装而不下载大量垃圾，请参阅*[Servers Microsoft® SQL Server® 2012 Express](http://www.microsoft.com/en-my/download/details.aspx?id=29062)*。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2014-02-08T22:46:20.517

我[从这里](http://msdn.microsoft.com/en-us/data/gg427686)下载了它（名为“Microsoft SQL Server Data Tools”）。在此版本中，您将获得具有管理[SQL Server 2012服务器功能的](https://en.wikipedia.org/wiki/Microsoft_SQL_Server#SQL_Server_2012)[Visual Studio 2012](http://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Visual_Studio_2012)安装。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-07-25T01:49:59.140

*[从下载 SQL Server 2012 Express](https://www.microsoft.com/betaexperience/pd/SQLEXPNOCTAV2/enus/)*的下拉列表中选择 SQL Management Studio 。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-10-14T00:19:40.540

从这里为 x64 位版本安装 SQLEXPRADV_x64_ENU 并选择安装所有组件。这将安装 SQL Server Management Studio。您还可以通过此安装安装 Reporting Services。

/ *Express with Advanced Services（包含数据库引擎、Express Tools、Reporting Services 和 Full Text Search）* /

下载链接： [http ://www.microsoft.com/en-us/download/details.aspx?id=29062](http://www.microsoft.com/en-us/download/details.aspx?id=29062)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-11-19T17:26:33.980

我在这里发现了似乎是最新的 2014 和 2012 SQL Server Management Studio 版本[以前的 SQL Server Management Studio 版本](https://msdn.microsoft.com/en-us/library/mt238488.aspx)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-06-28T14:24:08.853

运行 PowerShell 并键入：

```
gci -Path "C:\Program Files*\Microsoft SQL Server" -Recurse -Include "Ssms.exe" | Select -ExpandProperty FullName 
```

# android - 当 Activity 处于焦点或焦点之外时处理异步任务完成

> ID：10452852
> 
> 赞同：0
> 
> 时间：2012-05-04T16:39:32.723
> 
> 标签：android, user-interface, android-asynctask

我有以下Android场景：

我的活动启动一个异步任务来执行后台活动（`AsyncTask`类），然后搜索帐户。`AbstractAuthenticator`如果不存在帐户，则在前一个 AsyncTask 仍在运行时，会通过调用 UI 来创建新帐户。

该任务最终将在我之前活动的主线程上完成并运行 onPostExecute。

我的问题如下：如果任务在我的活动处于顶部时完成，`AlertDialog`则正确显示；相反，如果在用户输入新帐户的用户名/密码时任务完成，我会`InvocationTargetException`在尝试显示警报时收到一个。

实际上，AlertDialog 必须仅在活动处于活动状态时才显示。我可以修改我的代码并利用`onStart`以下伪代码的方法：

```
public class MyActivity {
    private boolean displayAlertOnStart = false;

    protected void onStart(){
        super.onStart();
        if (displayAlertOnStart){
            displayAlert();
            displayAlertOnStart = false;
        }
    }

    private void handleTaskCallback() {
        if (activityIsOnTop()) //How do I get this???
           displayAlert();
        else
           displayAlertOnStart = true;
    } 
```

我想以编程方式知道当前活动是“在顶部”还是另一个活动是前台。这样我会在下次运行 onStart 时执行我的逻辑。

欢迎任何其他（和更简单的）解决方案。开发工具包 7。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:53:56.073

为什么不能在 onStart() 和 onStop() 方法中使用状态变量来维护 Activity 的状态？

```
public class MyActivity {
    private boolean displayAlertOnStart = false;
    private boolean activityInAStartedState = false;

    protected void onStart(){
        super.onStart();
        activityInAStartedState = true;

        if (displayAlertOnStart){
            displayAlert();
            displayAlertOnStart = false;
        }
    }

    public void onStop(){
       super.onStop();
       activityInAStartedState = false;
    }

    private void handleTaskCallback() {
        if (activityInAStartedState) 
           displayAlert();
        else
           displayAlertOnStart = true;
      }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T17:09:11.413

据我所知，没有任何方法可以让您知道活动是否可见。

解决此问题的一种方法是在您的 Application 类中保留一个变量，该变量表示此 Activity 是否位于顶部。要实现这一点，您需要在 Activity`onPause()`和`onResume()`方法中对其进行管理。创建一个变量，类似于`private boolean myActivityOnTop = false`静态 getter 和 setter 方法。在`onPause()`中，将此变量设置为 false，并在 中再次使其为 true `onResume`。然后`isActivityOnTop()`用getter方法替换。`onResume`如果您想通过将其设为 int、string 或 enum 并在任何活动被调用时设置它来知道多个活动中的哪一个在顶部，您可以做同样的事情。

另外，提示一下，每当一个 Activity 被推送到后台时，都不能保证 Android 不会破坏它。有可能您设置`displayAlertOnStart`为 true，但随后 Activity 被销毁。当它被带回到前面重新启动时，Activity 将被重新创建，并且不知道要显示 Dialog。开始新活动后您想要维护的任何变量都应该在or中捆绑`onSaveInstanceState()`并重新初始化。`onCreate()``onRestoreInstanceState()`

# iphone - 用于睡眠/唤醒解锁的 iOS 应用程序？

> ID：10452854
> 
> 赞同：3
> 
> 时间：2012-05-04T16:39:33.283
> 
> 标签：iphone, ios, unlock

唤醒后解锁 iphone 的正常方法是输入 4 位密码。Apple 是否提供某种 iOS 方法来用自定义编程的解锁屏幕替换此解锁屏幕？

我想用 android 风格的“connect-the-points”解锁方法替换 4 位解锁机制。这样当用户唤醒设备时，用户必须连接点而不是输入 4 位代码。

有谁知道这在技术层面上是否可行以及Apple是否允许？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:41:25.830

未越狱的 iOS SDK 无法实现

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:21:59.663

> 2.4 包含与应用描述不一致的未记录或隐藏功能的应用将被拒绝
> 2.5 使用非公共 API 的应用将被拒绝
> 
> *来源[iOS App Store 指南](https://developer.apple.com/appstore/resources/approval/guidelines.html#functionality)*

正如 Andrew 解释的那样，在公共 SDK 中是不可能的，没有公共 API 可以替换此功能。

# tcp - TCP 序列号

> ID：10452855
> 
> 赞同：30
> 
> 时间：2012-05-04T16:39:37.000
> 
> 标签：tcp, numbers, sequence, rfc

我试图了解 TCP 标头的序列号是如何生成的。

在某些地方，我读到它是“数据包中第一个字节的索引”（[此处链接](https://stackoverflow.com/questions/2672734/tcp-sequence-number-question)），在其他一些站点上，它是一个随机生成的 32 位数字，然后递增。

我真的不知道哪个是哪个，所以这里有一些问题：

*   初始序列号是如何产生的？（如果有，请提供 RFC 编号）
*   它是如何递增的？
*   秘钥是怎么产生的？

我阅读了一些 RFC，例如[RFC 6528](https://www.rfc-editor.org/rfc/rfc6528#section-2)、[RFC 793](https://www.rfc-editor.org/rfc/rfc793)和[RFC 1948](http://www.networksorcery.com/enp/rfc/rfc1948.txt)，但我似乎无法理解实际实现的是哪一个。

我读到了“std”状态，但仍然......

先感谢您！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-05-04T17:01:18.273

TCP 连接的每个端点为其发送的数据包建立一个起始序列号，并在它作为建立连接的一部分发送的 SYN 数据包中发送此编号。

在选择起始序列号时，任何一端都不*需要*遵循特定的程序。操作系统可以自由使用它喜欢的任何机制，但通常最好选择一个随机数，因为这样更安全。

从该起点开始，任一端发送的每个数据包都包含两个序列号 - 一个用于指定数据包在流中的位置，另一个用于表示*接收到*的字节数的 ACK 序列号。这两个数字都由起始序列号偏移。

[当然，请在Wikipedia](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)中阅读所有相关信息- 在该页面中查找“序列号”以获取所有血腥细节。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-26T03:53:16.587

在 4.4BSD（和大多数伯克利派生的实现）中，当系统初始化时，初始发送序列号被初始化为 1。这种做法违反了主机要求 RFC。（代码中的注释承认这是错误的。）然后该变量每半秒增加 64,000，并且大约每 9.5 小时循环回到 0。（这对应于每 8 微秒而不是每 4 微秒递增的计数器。）此外，每次建立连接时，此变量都会递增 64,000。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T20:01:49.890

它是一个介于 0 和 4,294,967,295 之间的随机数。但是在wireshark工具中，你可以看到syn为0（因为它使用相对显示）但是你可以通过编辑->首选项使其显示原始序列号。并在 TCP 协议首选项下取消检查相对序列号和窗口缩放。下一个序列号将根据收到的 ACK 号 (a) 递增（变为 a + 1）。ACK 根据收到的有效载荷 len (l) 增加（变为 l + 1）。请注意，在 SYN/FIN 标志处于活动状态期间不会发送数据/有效负载（在 SYN 和 FIN 期间确实使 ACK 仅增加 1）。

# .net - 使用 .NET 4 SmtpClient 批量发送多封电子邮件（Send vs SendAsync）

> ID：10452856
> 
> 赞同：2
> 
> 时间：2012-05-04T16:40:04.313
> 
> 标签：.net, smtpclient

我编写了一个控制台应用程序，它读取表格中的消息队列并将它们作为电子邮件发送给多个收件人。一个典型的使用场景是一次性发送 2000 封电子邮件，每封电子邮件都发送到不同的电子邮件地址，邮件正文略有不同（邮件合并名称、地址等）

该应用程序运行正常，似乎在一分半钟内处理了 2000 封邮件。我使用的方法非常简单（为简洁起见，我删除了 try..catch 块）：

```
using (var mailBot = new SmtpClient())
{
    foreach (var mail in dataContext.Mails
                                        .Where(item => !item.IsSent)
                                        .OrderBy(item => item.MailId)
                                        .ToList())
    {
        mailBot.Send(new MailMessage(mail.MailFrom, mail.MailTo, mail.Subject, mail.Message));
        mail.IsSent = true;
        dataContext.SaveChanges();
    }
} 
```

现在，我的问题是，我怎样才能加快这个应用程序的运行速度？我觉得这种串行方法可能会通过使用`SmtpClient.SendAsync()`来改进，但我担心我无法控制将创建多少线程，并且我仍然需要应用程序等待发送结果，因为我需要标记邮件是否发送成功。另外，我认为接收 SMTP 服务器只能处理一定数量的并发请求。

那么我是不是在自欺欺人地认为多线程解决方案可以加快邮件传递并允许应用程序更早退出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-24T09:53:59.840

您可以按照[此处](http://www.c-sharpcorner.com/UploadFile/cd7c2e/send-bulk-mails-at-faster-rate/)`Parallel.ForEach`的说明使用。

# c# - SQL 语法和缺失值

> ID：10452858
> 
> 赞同：0
> 
> 时间：2012-05-04T16:40:29.173
> 
> 标签：c#, asp.net, sql

嗨，我有以下三个表

![在此处输入图像描述](../Images/f070316ece121a460af0ef5f799b0d88.png)

只是我想获取学生通过的课程列表（标记> 60）。

我使用了这个 SQL 语法

```
string queryString = "select c.coursename from Courses c, RegisteredIn R where R.CourseId=c.id and R.StudentId=StudentId and R.mark > 60 "; 
```

我这样做是为了打印出结果

```
System.Data.SqlClient.SqlDataReader reader = command.ExecuteReader();
                    reader.Read();

                result = string.Empty;
                int counter = 1;

                while (reader.Read())
                {
                    _coursename = reader[0].ToString();
                    result += string.Format("{1} - Course Name : {0} </br>  ",
                        _coursename,
                        counter);
                    counter++;
                }

               Response.Write(result);

                reader.Close(); 
```

显示的结果是

```
1 - Course Name : ADE 
2 - Course Name : LMW 
3 - Course Name : PBC 
```

这是正确的，但第一个值丢失了结果应该是

```
1 - Course Name : AWM 
2 - Course Name : ADE 
3 - Course Name : LMW 
4 - Course Name : PBC 
```

我不明白为什么它一直跳过第一个结果

好心提醒 ..

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T16:41:32.830

摆脱你的第一个电话`Read`：

```
System.Data.SqlClient.SqlDataReader reader = command.ExecuteReader();
reader.Read();  // <-- Remove this 
```

您在`while`循环中拥有的已经足够了：

```
while (reader.Read()) { ... } 
```

（还有一个有点违反直觉的旁注：结果集从第一条记录*之前*的位置开始，所以第一次调用`Read`实际上将光标放在第一行）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:45:56.857

调用该`command.ExecuteReader()`函数后，下一条语句`reader.Read();`将读取查询的第一个结果。

你不会对这个结果做任何事情。然后`while`循环执行`reader.Read()`as it's 条件表达式，得到第二个和后续结果。这些结果由代码输出，但不使用第一个结果。

如果您刚刚删除了第一个`reader.Read()`方法调用并让 while 循环执行所有`Read`方法调用，我想您会得到预期的结果

# php - Kohana - 使用“.exec”正则表达式发布 javascript 代码返回内部错误

> ID：10452859
> 
> 赞同：1
> 
> 时间：2012-05-04T16:40:38.560
> 
> 标签：php, javascript, post, kohana, exec

*编辑：我重新表述了这个问题，因为我没有很好地解释。让我们看看这次我们是否做得最好。*

我正在通过 Kohana 框架在 PHP 和 MySQL 中开发一个非常简单的博客系统。对于帖子/条目的内容，我使用的是 TinyMCE（POST 请求）。我最近尝试通过解释的方式在javascript中添加一段代码的条目，但它正在运行它的一部分。更具体地说，我在 TinyMCE/textarea 中“使用”了“exec()”（不是为了运行它）。就像是：

```
/regexval/.exec('string'); 
```

正如我所说，问题出在对“exec”的调用中，当我发送表单时，Kohana 会返回以下消息：

> TTP_Exception_404 [ 404 ]：找不到与 URI 匹配的路由：500.shtm

似乎有一个内部错误，我不知道在哪里。我的 CPanel 错误日志没有显示任何内容，并且在 localhost 上它工作正常。我想知道是否有时间可以执行此功能。我尝试在请求执行期间停止 Kohana 进行调试，但是每当我停止执行时，“$_POST”都是空的，所以我猜问题出在其他地方。

我想这是一个菜鸟的错误，但我不知道会发生什么，也没有找到任何关于它的东西（也许我没有正确查看）。因此，如果有人能提供一些启示，我将不胜感激。如果需要提供其他信息，请告诉我。

谢谢你的麻烦，对不起我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T13:03:57.477

在尝试检测问题没有成功后，我选择联系托管。显然是由于服务器上安装了“mod_security”模块的规则。如果您不想或不能禁用此规则，一种解决方案是以某种方式更改文本，例如，在字母之间添加空格：

```
/regexval/.e x e c('string'); 
```

很抱歉浪费了您的时间，也许我应该先问一下我的托管，但首先我没有想到这种可能性。我还删除了粘贴的代码，因为它们发生并且最终没有必要。

谢谢你的时间。

编辑：

**来自 kohana 论坛的cs278**提出了另一种解决方案（在这种情况下是功能性的）：

```
RegExp.prototype['ex'+'ec'].call(/regexval/, 'string'); 
```

此致。

# mysql - 日期插入通过 phpMyAdmin SQL 控制台失败

> ID：10452860
> 
> 赞同：0
> 
> 时间：2012-05-04T16:40:39.170
> 
> 标签：mysql, phpmyadmin

我不确定为什么以下查询不起作用

```
INSERT INTO Cricket_fixture
('season_id', 'league_id', 'fixdate', 'team_one_id', 'team_two_id')
VALUES ('1', '1', '2012-05-13', '8', '3') 
```

我努力了 ：

*   基于搜索的各种日期格式 2012-05-13、2012/05/13、20120513（带和不带引号）；
*   还确保满足 FK 关系，因为前两列是 FK，但两者都存在值“1”并且有效。

我不断收到错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 ''season_id'、'league_id'、'fixdate'、'team_one_id'、'team_two_id' 附近使用正确的语法） VALUES ('1', ' at line 1

**已解决**- 问题是我使用单引号作为列名（它仅用于值）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:46:36.827

您不希望在列名上加上单引号。您可能会使用反引号，但我从不使用。

```
INSERT INTO Cricket_fixture (season_id, league_id, fixdate, team_one_id, team_two_id) VALUES ('1', '1', '2012-05-13', '8', '3') 
```

# javascript - 当我尝试在 ace.js 中创建 Range 对象时，抛出“Illegal Constructor”错误

> ID：10452869
> 
> 赞同：9
> 
> 时间：2012-05-04T16:41:34.390
> 
> 标签：javascript, ace-editor

我试图`ace.js`在我的代码中为编辑器创建一个 Range 对象，但它不起作用。它以我无法弄清楚的方式失败。在[Ace 文档](http://ace.ajax.org/api/range.html)中，此构造函数是：

```
new Range(Number startRow,
          Number startColumn,
          Number endRow,
          Number endColumn) 
```

但是当我在我的代码中尝试这个时：

```
new Range(0, 0, 0, 1) 
```

它引发了一个`Uncaught TypeError: Illegal constructor`错误。是什么导致了这种行为，为什么它与文档不匹配？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-05T08:46:47.540

`Range`是本机类型是您无法实例化的大多数浏览器。我对 Ace 不是很熟悉，但我猜他们使用某种命名空间，以便您执行类似`new Ace.Range()`.

**编辑：**看起来他们正在使用 CommonJS，因此您可以导入该方法并为其命名，但您喜欢：

```
var Range = require('ace/range').Range,
    mine = new Range(0,0,10,0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-16T12:01:29.853

替换`require('ace/range').Range`为`ace.require('ace/range').Range`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-02-27T10:44:14.090

这对我有用：

`import { Range } from "ace-builds"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-20T07:05:14.097

这个解决方案`var Range = ace.acequire('ace/range').Range;`对我有用！！！

完整代码：[https ://stackoverflow.com/a/53387989/630169](https://stackoverflow.com/a/53387989/630169)

# wcf - IErrorHandler 中的 Message.CreateMessage 创建没有包装元素/命名空间的不同消息

> ID：10452882
> 
> 赞同：1
> 
> 时间：2012-05-04T16:42:48.087
> 
> 标签：wcf, serialization, soap, datacontract, ierrorhandler

由于试图从我们所有的 Web 服务中删除面向方面的代码，我遇到了一个奇怪的问题。

有一个 IParameterInspector 进行验证并抛出一个在返回响应的 IErrorHandler 中捕获的 FaultException。

ResponseBase 看起来像这样：

```
 [DataContract(Namespace = Namespaces.Data)]
public class ResponseBase
{
    public ResponseBase()
    {
        this.Build = BuildHelper.GetBuild();
    }

    [DataMember(Name = CommonParameterNames.RequestId, Order = 0)]
    public string RequestId { get; set; }

    [DataMember(Name = CommonParameterNames.Status, Order = 1)]
    public string Status { get; set; }

    [DataMember(Name = CommonParameterNames.Errors, Order = 2, EmitDefaultValue = false)]
    public Error[] Errors { get; set; }

    [DataMember(Name = CommonParameterNames.Build, Order = 3, EmitDefaultValue = false)]
    public Build Build { get; set; }
} 
```

这是由 Web 服务方法创建的所有响应的基类。

当它从服务方法返回而没有发生错误或验证错误时，消息在正文中包含一个包装元素，该元素具有一个名为“response”的命名空间，就在方法名称本身的开始标记之后：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>
  <BulkUploadImageBase64Response xmlns="http://www.mydomain.com/webapi/">
     <response xmlns:a="http://www.mydomain.com/webapi/data/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
         <a:request_id> 
```

但是，如果我尝试处理 IErrorHandler 中的故障，使用 Message.CreateMessage() 方法，从 FaultException 传递 ResponseBase 对象，结果看起来会有所不同：

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body>
  <BulkUploadImageResponse xmlns="http://www.mydomain.com/webapi/data/" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
     <request_id>e505d0d3-fc5d-474f-8ec7-5c7521c8a869</request_id>
     <status>DataValidationError</status> 
```

从错误处理程序返回的 Message 似乎以不同的方式序列化。由于某种原因，缺少“响应”包装元素。

这是错误处理程序的实现（摘录）：

```
public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
    {
        if (error is FaultException<ResponseBase>)
        {
            var fe = error as FaultException<ResponseBase>;
            fault = Message.CreateMessage(version, null, fe.Detail);
        } 
```

我已经尝试过不同的事情：将 BodyReader 与 DataContractSerializer 一起使用，将 MessageContract 属性添加到 ResponseBase 类等等，但我不能让它看起来像框架隐式生成的响应消息。

非常感谢任何帮助，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-01T19:54:15.373

我知道这是一个老问题，但我刚刚遇到了同样的问题，并设法得到了`ProvideFault`与通常的响应相匹配的响应。

这是它的要点：

```
public void ProvideFault(Exception error, MessageVersion version, ref Message fault)
{
    if (error is FaultException<ResponseBase>)
    {
        var fe = error as FaultException<ResponseBase>;
        var action = OperationContext.Current.IncomingMessageHeaders.Action;
        var operation = OperationContext.Current.EndpointDispatcher.DispatchRuntime.Operations.FirstOrDefault(o => o.Action == action);

        // Instantiate a serializer that will wrap the response like the service would, based on the operation name
        var serializer = new FaultSerializer(operation.Name);

        // Create the message
        fault = Message.CreateMessage(version, operation.ReplyAction, fe.Detail, serializer);
    }
} 
```

然后序列化器看起来像这样：

```
using System.Runtime.Serialization;
using System.Xml;

namespace MyNamespace
{
    internal class FaultSerializer: XmlObjectSerializer
    {
        private readonly string _actionName;

        public FaultSerializer(string actionName)
        {
            _actionName = actionName;
        }

        public override bool IsStartObject(XmlDictionaryReader reader)
        {
            // Not used
            throw new System.NotImplementedException();
        }

        public override object ReadObject(XmlDictionaryReader reader, bool verifyObjectName)
        {
            // Not used
            throw new System.NotImplementedException();
        }

        public override void WriteEndObject(XmlDictionaryWriter writer)
        {
            writer.WriteEndElement();
        }

        public override void WriteObjectContent(XmlDictionaryWriter writer, object graph)
        {
            // Instead of naming the main object element with the object type,
            // append Result to the action name
            var xmlDictionary = new XmlDictionary();
            var settings = new DataContractSerializerSettings {
                RootName = xmlDictionary.Add($"{_actionName}Result")
            };

            var serializer = new DataContractSerializer(graph.GetType(), settings);
            serializer.WriteObject(writer, graph);
        }

        public override void WriteStartObject(XmlDictionaryWriter writer, object graph)
        {
            // Wrap the entire object in a Response element
            writer.WriteStartElement($"{_actionName}Response", "http://tempuri.org/");
        }
    }
} 
```

希望这可以帮助！

# java - 有什么方法可以检查客户端对等证书而不抛出异常？

> ID：10452884
> 
> 赞同：1
> 
> 时间：2012-05-04T16:43:04.530
> 
> 标签：java, ssl, ssl-certificate

我正在编写一个服务器，它可以选择（取决于客户端）需要一个客户端证书。提供证书的客户端和不提供证书的客户端需要通过相同的服务器端口连接到服务器。

为了在 SSLContext 上支持这两种类型的客户端，我将调用“setWantClientAuth(true)”。在协商客户端 SSLSession 后，我想获取客户端证书链（如果可用）。我看到获取客户端证书链的唯一方法是通过“sslSession.getPeerCertificates()”，如果客户端没有提供证书，不幸的是会抛出异常。

有没有其他方法可以确定在调用 getPeerCertificates 之前是否提供了客户端证书，这样我就可以避免不提供证书的客户端的异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:21:12.863

在这种情况下抛出异常只是 API 契约的一部分[`getPeerCertificate()`](http://docs.oracle.com/javase/7/docs/api/javax/net/ssl/SSLSession.html#getPeerCertificates%28%29)：

> 抛出： SSLPeerUnverifiedException - 如果尚未验证对等方的身份

处理缺少客户端身份验证的传统方法只是捕获此异常。例如，您可以查看[Apache Tomcat 的`JSSESupport`实现](http://grepcode.com/file/repository.springsource.com/org.apache.coyote/com.springsource.org.apache.coyote/6.0.24/org/apache/tomcat/util/net/jsse/JSSESupport.java)。

（他们`Throwable`在这个版本中捕获，而您可能只想捕获`SSLPeerUnverifiedException`。）

# oracle - 范围查询条件的Oracle复合索引

> ID：10452885
> 
> 赞同：9
> 
> 时间：2012-05-04T16:43:10.973
> 
> 标签：oracle, optimization, indexing, composite-index

我有一张桌子 Blah（纬度浮动，经度浮动，create_time date，owner_id int，......）

我的代码只做一个查询

```
select * 
from Blah 
where latitude < l1 and latitude > l2   
and longitude < ll1 and longitude > ll2   
and create_time < t1 and create_time > t2 
and owner_id < o1 and owner_id > o2 ; 
```

（当然值 l1, l2,.... o1,o2 是来自程序的动态参数）

我的问题是我应该创建什么样的索引；综合指数？如果是复合索引，我应该先放哪一列？该指数的有效性如何？

我想了很长时间，但找不到有关 oracle 索引如何工作的详细文档。

我可以找到它使用 B-tree 实现的文档，在我们的例子中：B-tree 中的每个键都是一个 4 元组：（column1，column2，column3，column4）其中这些元组的排序关系被定义为词法命令。

那么对于上面的查询，假设我们的顺序是（owner_id, create_time, latitude, longitude），我猜oracle首先需要对点（o1, t1, l1,ll1）进行二分查找，对于这个操作，索引确实是有用。但是接下来，我们需要找到第一个中间体的终点：我们需要找到 (o1,t1, l1, ll2 )，这也可以通过二分查找来完成。

接下来，我们需要找到满足条件的下一个部分，因此我们需要找到 (o1, t1, lx, ll1 )，其中 lx 是下一个大于 l1 的值，我们也可以通过二分查找找到它。但是在我们的例子中，很可能对于相同的纬度，经度不能超过 1 个，所以这里的二分查找并不比线性扫描更有效。

遵循这种精神，如果我们的积分仅在几天内创建，我们似乎应该将具有较小值范围基数的列放在第一位，在这种情况下，create_time。同样，如果我们从不做范围条件，而只做等于（=）条件，那么哪一列在前并不重要，对吧？

为了更清楚，这里有一个更简单的例子：

假设我有 2 列，X 和 Y

在数据库中，两者的值都是 [1,2,....100]，所以我们有 100x100 行

我的查询是

```
select * from mytable where X > 34 and X < 78 and Y > 12 and Y < 15; 
```

假设我们的索引在 (X, Y) 上，所以 2 个值之间的比较规则是

```
v1 < v2 <=====>  v1.x < v2.x || v1.x == v2.x && v1.y < v2.y 
```

给定上述排序规则，我们可以看到索引中的值是按顺序排列的（x，y 的值）：

```
1,1, 1,2 1,3 .... 1,100     
2,1  2,2 2,3 ......2,100
.....
100,1 100,2 ....... 100,100 
```

现在，要在查询中搜索值，B-Tree 遍历需要定位 (78-​​34-1) 间隔，因此 (78-​​34-1)*2 查找（1 表示开始位置） ，而不仅仅是 2 次查找。

因此，如果我们有更高的维度，则间隔计数会随着维度的数量呈指数增长，因此索引可能不再有用 ------ 这是我关心的问题

非常感谢杨

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:26:05.150

如果您的唯一目标是创建一个索引来优化此查询，那么您希望复合索引中的列首先按照最具选择性的列进行排序。如果谓词 on`latitude`比其他谓词消除了更多的行，那么首先拥有该列会更有效。如果谓词 on`owner_id`比其他谓词消除了更多的行，那么首先拥有该列会更有效。

但实际上，我们很少创建仅用于优化单个查询的索引。通常，为了使索引维护的开销值得，我们希望我们的索引在许多查询中都是有用的。在复合索引的情况下，这意味着按查询在该列上具有谓词的概率对列进行排序。例如，如果您有一个复合索引 on `owner_id, create_time, latitude, longitude`，您可以将它用于仅指定谓词 on 的查询`owner_id`。但实际上，您不会将该索引用于仅指定谓词的查询`longitude`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-18T09:51:30.843

首先，请记住“B-Tree”中的“B”不是“二进制”。

其次，在 Oracle 中进行索引时，如果满足以下条件，您还可以选择位图索引：

1.  您拥有企业版许可证
2.  您没有很多会话同时修改表
3.  您的索引值并不接近唯一（位图索引仅可用于低基数列的说法通常被夸大了）

位图索引擅长的一种查询类型是有效地组合多个列上的谓词，尤其是在谓词列集变化的情况下（当然，您可能不是这种情况）。如果您满足上述三个条件，那么值得测试在表上具有四个单独的位图索引的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:32:12.857

一种简单的蛮力解决方案是在同一个表上创建多个索引组合，在打开[EXPLAIN PLAN](http://docs.oracle.com/cd/B19306_01/server.102/b14211/ex_plan.htm)的情况下运行查询，然后选择您的 DBMS 喜欢使用的索引。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T17:49:34.867

恕我直言，在标准 B 树索引之外最好处理多维范围查询。通过“多维范围查询”的网络搜索可以找到一些关于一般主题的论文。

Oracle 提供了一个名为 Oracle Spatial 的产品。该产品的文档在[第 4 章](http://docs.oracle.com/cd/B10501_01/appdev.920/a96630/sdo_index_query.htm)中包括创建空间索引和执行查询的示例和说明。没有新的 SQL 语法；他们创建索引的示例是：

```
CREATE INDEX territory_idx ON territories (territory_geom)
    INDEXTYPE IS MDSYS.SPATIAL_INDEX; 
```

它创建了一个 R-tree 索引。

我认为 R-trees、kdb-trees 和类似空间结构的存在证明了标准 B-trees 可能不太适合这些应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-18T12:41:15.390

该表是用于 OLTP 还是用作 DWH？如果此表上没有很多单行/多线程 DML 语句，则可以使用位图索引。位图索引允许您在多个索引之间进行 ROWID AND 运算符（也称为星形转换）。为了做到这一点，在每一列上创建一个位图索引。就像我说的那样，这个解决方案最适合你有一个批量插入的 DWH 系统。

# jquery - 始终选中单选按钮模糊事件

> ID：10452886
> 
> 赞同：0
> 
> 时间：2012-05-04T16:43:11.680
> 
> 标签：jquery

JSFiddle：http: [//jsfiddle.net/dvF5d/2/](http://jsfiddle.net/dvF5d/2/)

```
<input type="radio" id="rad1" name="rad"/><label for="rad1">rad1</label><br/>
<input type="checkbox" id="chk1"/><label for="chk1">chk1</label><br/>
<input type="radio" id="rad2" name="rad"/><label for="rad2">rad2</label>

 $(document).ready(function(){
  var rad1 = $('#rad1');
  var chk1 = $('#chk1');
    var a =  function(){
        if(!rad1.is(':checked'))
        {
           chk1.attr('disabled', true);
        }
        console.log('rad checked', rad1.is(':checked'));
    };
    rad1.blur(function(){
        console.log('blur');
         a();     
    });
    rad1.change(function(){
        console.log('change');
        a();
    });
}); 
```

当 rad1 被模糊时，即使选择了 rad2，rad1 is checked 属性也始终为真。有没有什么办法解决这一问题？（或者更好的是，某种基于其他控件启用/禁用控件的 jquery 插件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:55:13.837

就单选按钮而言，没有这样的事情`blur`，唯一会导致取消选中单选按钮的情况是选中另一个。所以改变你`blur`是：

```
$("input[type='radio']:not(#rad1)").change(function(){
    //rad1 isn't checked
}); 
```

**演示：http: [//jsfiddle.net/dvF5d/4/](http://jsfiddle.net/dvF5d/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:50:46.573

要根据无线电选择切换复选框：

```
jQuery(function(){
    var $rad1 = $('#rad1');
    var $checkbox = $('#chk1');

    $('input[type="radio"]').click(function(){
        $checkbox.prop('disabled', !$rad1.is(':checked'));
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:02:20.190

我知道您已经选择了一个答案，但是根据您的评论，“选择 rad1 时，应启用 chk1。选择 rad2 时，应禁用 chk1。” 以下将按照您所说的进行：

```
​$('input[name="rad"]').change(function(){
    $('#chk1').attr('disabled',$('#rad2').is(':checked'));
});​​​​​​​​​​​​​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/dvF5d/5/)**。

# bouncycastle - 在带有 JDK 6 的 Ubuntu Server 10.04 上安装 JCE

> ID：10452896
> 
> 赞同：0
> 
> 时间：2012-05-04T16:43:49.100
> 
> 标签：bouncycastle, jce, ubuntu-server

我一直在研究密码学并且遇到了一些问题。我总是得到这个例外。

java.io.IOException：异常解密数据 - java.security.InvalidKeyException：org.bouncycastle.jce.provider.JDKPKCS12KeyStore.engineLoad（未知来源）的 org.bouncycastle.jce.provider.JDKPKCS12KeyStore.cryptData（未知来源）的非法密钥大小)

搜索 google 发现需要一个 JCE Unlimited Policy File。当你下载它时，安装说明说唯一需要做的就是将两个 jar 文件复制到 JRE 的 /security/ 文件夹中。好吧，这不起作用，我搜索了我机器的所有目录以找到任何其他 java 安装，但我没有找到。我仔细检查了文件是否正确

一些信息：

java -version 报告：
java version "1.6.0_26"
Java(TM) SE Runtime Environment (build 1.6.0_26-b03)
Java HotSpot(TM) Client VM (build 20.1-b02，混合模式，共享)

我已经使用 apt-get install sun-java6 安装了这个 Java 版本

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T21:52:37.753

我的问题的解决方案来自其他地方，我将在这里解释。在我遇到错误之前：

```
KeyStore ks = KeyStore.getInstance("pkcs12","BC");  
File cert = new File(certPath);     
FileInputStream fis = new FileInputStream(cert);        
ks.load(fis,certpassword.toCharArray()); 
```

现在我有：

```
KeyStore.Builder builder = null;
ProtectionParameter paramet = new PasswordProtection(certpassword.toCharArray());
builder = KeyStore.Builder.newInstance("PKCS12", null, new File(certPath), paramet);
KeyStore ks = builder.getKeyStore();
File cert = new File(certPath);
FileInputStream fis = new FileInputStream(cert);        
ks.load(fis, certpassword.toCharArray()); 
```

这段代码可能并不完全正确，但它可以工作。至于原因，我不知道。我只是尝试了另一种加载证书的方法，并且这种方法有效。

如果没有无限的策略文件，我还没有测试过这个解决方案是否有效。

# c# - 具有 C# 动态的运算符？

> ID：10452904
> 
> 赞同：8
> 
> 时间：2012-05-04T16:44:55.330
> 
> 标签：c#, dynamic, .net-4.0, clr

我有这个功能：

```
static void Func1<T>(T x, T y)
{
    dynamic result = ((dynamic)x + y); //line 1
    dynamic result2 = (x + y);         //line 2
} 
```

此函数可以执行为`Func(1,2);`但是，第 1 行是*OK*，而第 2 行是*BANG*（在编译时）。

第 2 行抛出的异常是：

> 运算符“+”不能应用于“T”和“T”类型的操作数

所以，我们需要创建一个运算符重载。好的，到目前为止一切顺利。

**但是第 1 行呢？它不应该也需要动态演员表`y`吗？**

`((dynamic)x + (dynamic)y);`

我知道它是在运行时评估的，但为什么 C# 编译器接受第`+`1 行中的运算符（即错误地假设 T 可以是`+`其他东西）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T16:57:20.473

在您的第一个示例中，通过制作`x`a`dynamic`您实际上也使`operator+`操作动态化。这摆脱了类型说明符`T`for `x`，从而摆脱了`T`无效的抱怨`operator+`。

在运行时会发生*动态绑定*并评估两个操作数以确保`operator+`可以使用：

> 如果算术运算符的操作数具有编译时类型动态，则表达式是动态绑定的（第 7.2.2 节）。在这种情况下，表达式的编译时类型是动态的，下面描述的解析将在运行时使用那些具有编译时类型动态的操作数的运行时类型进行。

在您的第二个示例中，编译器知道类型，`x + y`并且只是将结果存储到`dynamic`变量中。的进一步使用`result2`将被动态绑定。这是有道理的，因为赋值运算符的*右侧没有动态操作：*

> 当不涉及动态表达式时，C# 默认为静态绑定，这意味着在选择过程中使用构成表达式的编译时类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T16:55:07.893

`dynamic`基本上告诉编译器“不要试图确保我正在做的事情是合法的；我确信它会在运行时”。您尝试对动态类型变量的任何操作都将编译。如果分配给动态变量的类型实际上没有实现操作，它就不会成功运行。

至于为什么它们都不必是动态的，编译器基本上会尝试在与签名匹配的操作中涉及的任何一个类型上找到一个运算符（静态方法），从 LValue 开始。由于 LValue 是动态的，编译器必须假定该操作存在于将用作 X 的任何东西上，即使 X 与 Y 具有相同的占位符类型，并且不知道 Y 具有 + 运算符。

# powershell - 如何在 Jenkins 中将 PowerShell 脚本作为作业运行

> ID：10452905
> 
> 赞同：27
> 
> 时间：2012-05-04T16:44:55.840
> 
> 标签：powershell, jenkins, powershell-2.0

这听起来像一个简单的问题，但是我在网上看了之后一直无法解决。我基本上想在 Jenkins 中执行一个 PowerShell 脚本（例如 script.ps1）并报告成功/失败。

**尝试 1：**以“执行 Windows 批处理命令”的形式运行以下命令

```
powershell -File c:\scripts\script.ps1 
```

这按预期启动，但几秒钟后退出。

**尝试 2：**以“执行 Windows 批处理命令”的形式运行以下命令

```
powershell -NoExit -File c:\scripts\script.ps1 
```

这会成功运行整个脚本，但它永远不会停止。我不得不手动中止脚本。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-05T00:17:27.873

好吧，有一个[PowerShell](https://wiki.jenkins-ci.org/display/JENKINS/PowerShell+Plugin)插件，它无论如何都会包装外壳。我在我的服务器上使用它，以标准符号执行脚本：

```
powershell -File test001.ps1 
```

它没有任何怪癖。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-03-11T23:24:20.947

我发现问题归结为 PowerShell 分别管理 32 位和 64 位版本的执行策略。结帐[http://www.gregorystrike.com/2011/01/27/how-to-tell-if-powershell-is-32-bit-or-64-bit/](http://www.gregorystrike.com/2011/01/27/how-to-tell-if-powershell-is-32-bit-or-64-bit/)尝试启动两者。在两者中运行`Get-ExecutionPolicy`，您会发现它们是不同的。

至少在 1.4 版中，插件似乎最终使用了 32 位进程。

# android - 如何查看 GoogleAnalyticsTracker.trackPageView 发送的数据？

> ID：10452906
> 
> 赞同：0
> 
> 时间：2012-05-04T16:44:57.303
> 
> 标签：android, google-analytics

我想将 GoogleAnalytics 调用添加到我的 Android 应用程序。我在 GoogleAnalytics 中创建了帐户，下载了库，实例化了 GoogleAnalyticsTracker 类，编写了如下调用：

```
tracker.trackPageView(myData); 
```

整个应用程序。我的问题：作为 Google 分析用户，我如何查看所有分析数据？我想检查一切是否正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:47:27.180

Several options available to you:

-Google Analytics offers real-time tracking. Easiest thing to do would be to have Analytics open in a window on your machine, and watch for hits as you use your application.

-Also, by calling

```
tracker.setDebug(true); 
```

You can enter debug mode, which means all requests to GA are sent to the Android log, which you can view using DDMS (either stand-alone or as part of the eclipse plugin). This is probably the option you want. In this case you probably also want to call

```
tracker.setDryRun(true); 
```

which will prevent the data from actually being sent to GA servers, so you can experiment all you want without messing up your production stats. Of course, be sure to remove this line before you ship :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T12:45:31.967

由于我使用了 trackPageView 方法，所以我发送的所有数据都存储在 Google Analytics 中的 Content -> Site content -> Pages 中。这是访问页面的列表。

# regex - htaccess 重写而不重定向

> ID：10452907
> 
> 赞同：5
> 
> 时间：2012-05-04T16:45:00.300
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我要做的就是将网址从 www.exaple.hu 重写为 www.exaple.cz/hu。所以在地址 www.exaple.cz/hu 下显示的是来自地址 www.exaple.hu 的内容。

因此，当用户键入 www.exaple.cz/hu 时，用户**不会**被重定向到 www.exaple.hu，而是来自 www.exaple.hu 的内容显示在域 www.exaple.cz/hu 下（所以在地址栏中是 www.exaple .cz/hu)。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T19:28:25.377

为此，您需要在 Apache 配置中启用 mod_proxy。启用 mod_proxy 后，启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^www\.exaple\.cz$ [NC]
RewriteRule ^(hu)/?$ http://www.exaple.$1 [L,P,NC] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:55:58.177

www.exaple.cz/hu 和 www.exaple.hu 的文件是否在同一台服务器上？

如果是，我将创建一个符号链接，以便 www.exaple.cz/hu 内容目录指向 www.exaple.hu 内容目录。

例如，如果服务器 A 有目录：

*   /var/www/html/A 其中包括以下文件：www.exaple.cz/hu
*   /var/www/html/B 其中包括以下文件：www.exaple.hu

> cd /var/www/html/
> 
> ln -s /var/www/html/BA

这样，您只有一个来源，但可以链接到来源。

如果这两个 URL 指向两个 diff 服务器，您可以尝试安装这两个并使用 slink 或 .. 在 www.exaple.cz/hu 中包含“www.exaple.hu”作为框架？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-14T13:16:24.483

如果文件在同一台服务器上，您可以删除（cpanel）中的附加域并重新添加域，但这次选择其他域的工作目录。

如果您的域的链接结构是这样的：

```
<a href="/path/page">Link</a> 
```

您现在可以毫无问题地使用新站点。

# java - 如何在 HtmlUnit (java) 中禁用或指定重试次数？

> ID：10452910
> 
> 赞同：2
> 
> 时间：2012-05-04T16:45:12.670
> 
> 标签：java, htmlunit

我希望，在连接重置后不会再次执行 HtmlUnit 中的 Web 请求。以下异常消息显示重试连接：

```
INFO: I/O exception (java.net.SocketException) caught when connecting to the target host: Connection reset
* * org.apache.http.impl.client.DefaultRequestDirector tryConnect
INFO: Retrying connect 
```

那么如何在 HtmlUnit (java) 中禁用或指定重试次数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-28T03:20:02.640

由于类的结构，我一直在处理这个问题。我不是 Java 专家，但它可能会对您有所帮助，因为我在 Google 上搜索了几天无济于事。我不确定我们是否遇到同样的问题，但我在集成测试中偶尔会遇到“org.apache.http.NoHttpResponseException：目标服务器无法响应”，并且正在对其进行测试，希望它能解决.

这可能是一种不好的方法，并且没有涵盖所有入口点，但也许它对您有用。

使用名为 RetryHttpWebConnection 的类子类化 HttpWebConnection 并添加此覆盖：

```
@Override
protected AbstractHttpClient createHttpClient() {
    AbstractHttpClient client = super.createHttpClient();

    // Set it to do some retrying in case of closed connection during test.
    client.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,
        new DefaultHttpMethodRetryHandler(5, false));

    return client;
} 
```

子类 WebClient 并在子类的构造函数中执行以下操作：

```
// Override with new web connection that will do retries
// to avoid test failures due to network issues.
setWebConnection(new RetryHttpWebConnection(this)); 
```

编辑：我也在研究[http://pastebin.com/nmmRYqKN](http://pastebin.com/nmmRYqKN)，这可能是我对特定例外所需要的更多。

# c# - UI C# 子数组列表

> ID：10452917
> 
> 赞同：0
> 
> 时间：2012-05-04T16:45:49.943
> 
> 标签：c#, user-interface, arraylist, arrays

当我用 C# 构建我的第一个 UI 程序时，我遇到了一些麻烦！
假设我有两个类（`Country`, `City`），那么我将每个新`Country`对象设置在 An`ArrayList`之前创建并命名`CountryList`如下：

```
public static ArrayList CountryList = new ArrayList();

Country c1 = new Country(string name); // Creating Country object

CountryList.Add(c1); // Store the Object c1 in ArrayList 
```

由于每个`Country`都有自己的`Cities`，所以我无法创建一个`ArrayList`将所有`City`对象存储在一起！
然后，我想要像`ArrayList`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:49:10.007

这个怎么样？

```
public class City
{
  public string Name {get; set;}
}

public class Country 
{ 
  public string Name {get; set;}

  public List<City> Cities {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:49:26.867

不要让 Country 成为一个字符串，而是让它成为一个对象。

```
public class Country
{
   public string Name {get; set;}
   public IList<string> Cities {get; set;}
} 
```

那么你会有

```
Country country = new Country{Name = "England"};
country.Cities.Add("London");
CountryList.Add(country); 
```

# c - 如何使用未知维度的二维数组？

> ID：10452921
> 
> 赞同：2
> 
> 时间：2012-05-04T16:46:06.400
> 
> 标签：c, arrays, multidimensional-array, matrix-multiplication

我正在编写一个用于矩阵乘法的 C 函数。它需要两个 2D 整数数组。如果我知道输入数组的维度，我可以做到这一点，但我想做一个更通用的函数。

当我在编译时不知道产品的尺寸时，如何找到它们的尺寸，以及如何返回一个数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:48:56.790

如果你只有一个指向数组开头的指针，你就无法找出数组的维度。您需要将数组的维度传递给函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:36:22.647

这个答案完全是矫枉过正，但这是我`struct`的基础方法，nm 称之为“一个完整的'另一个故事”。

如果这是一个新程序（即您可以定义函数的输入/输出是什么样的）并且您打算对矩阵做很多工作，我会倾向于使用结构来表示矩阵，并且只是传递指向该结构实例的指针。

下面的代码显示了一种可能的方法。请注意，这里有几个“技巧”。首先，数据都存储在一个连续的块中——这可能出于多种原因提高性能。这种技术的一个潜在缺点是调整矩阵的大小变得昂贵，因为您必须分配一个全新的实例并复制数据。但是如果你发现这是一个问题，你总是可以改变你的实现，假设你总是使用 matrix_get() 和 matrix_set() 函数来访问矩阵中的值。

此外，矩阵结构和数据指针指向的内存都在一个 malloc 调用中分配。如果您使用此技术，请注意数据对齐问题。例如，如果您将数据更改为指向 64 位整数或双精度数，则需要添加填充以确保所有内容都是 8 字节对齐的。或者，只要你`malloc`记得`new_matrix()`在`free_matrix()`.

我已将作为练习留给 OP 来编写乘法函数。

```
#include <stdio.h>
#include <stdlib.h>

struct matrix
{
   int   rows;
   int   cols;
   int * data;
};

struct matrix * new_matrix( int rows, int cols )
{
   struct matrix * m = NULL;

   /* Allocate a block of memory large enough to hold the matrix 'header' struct
    * as well as all the row/column data */
   m = malloc( sizeof(struct matrix)  + (rows * cols * sizeof(int) ) );

   if( m )
   {
      m->rows = rows;
      m->cols = cols;

      /* Some ugly pointer math to get to the first byte of data */
      m->data = (int*) ( (char *) m  + sizeof(*m) );
   }
   return m;
}

void free_matrix( struct matrix * m )
{
   free( m );
}

int matrix_set( struct matrix * m, int row, int col, int val)
{
   if( col >= m->cols || row >= m->rows )
      return -1;
   m->data[ m->cols * row + col ] = val;
   return 0;
}

int matrix_get( struct matrix * m, int row, int col, int * val)
{
   if( col >= m->cols || row >= m->rows )
      return -1;
   else 
   {
      *val = m->data[ m->cols * row + col ];
      return  0;
   }
}

void print_matrix( struct matrix * m )
{
   int r,c;
   int val;
   for( r = 0; r < m->rows; r++ )
   {
      for( c = 0; c < m->cols; c++ )
      {
         matrix_get( m, r, c, &val );
         printf( "%5d%s", val, c + 1 < m->cols ? "," : "" );
      }
      printf("\n");
   }
}

int main (int argc, char **argv)
{
   int r,c;
   struct matrix * m = new_matrix( 5, 5 );

   for(  r = 0; r < m->rows; r++ )
   {
      for( c = 0; c < m->cols; c++ )
      {
         matrix_set( m, r, c, (r +1)* 10 + c + 1 );
      }
   }

   print_matrix( m );
   free_matrix( m );
   return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T17:19:38.747

你最好为你的数组创建一个 MATRIX 结构。正如@David 所指出的，在 C 中，您必须自己跟踪尺寸。语言中没有内置函数可以安全地为您执行此操作。

有类似 strlen() 之类的函数用于字符串（即：以 \0 结尾的字符数组），但不适用于数组之类的东西。跟踪这一点的最简单方法是创建自己的抽象数据类型和辅助函数。

试试这个：

```
typedef struct matrix {
  int **array;
  int rows;
  int cols;
} matrix_t;

int createMatrix(matrix_t* mtx) {
  int i;
  if (!mtx) {
    printf("INVALID POINTER TO MATRIX");
    return -1;
  }
  if ( (mtx->rows == 0) || (mtx->cols == 0) ) {
    printf("Rows/columns cannot be zero!");
    return -1;
  }
  int status = 0;
  // allocate the array
  mtx->array = (int **)calloc(mtx->rows,sizeof(int*));
  if(mtx->array != NULL) {
    // memory allocation succeeded
    for(i = 0; i < mtx->rows; i++) {
      if((mtx->array[i] = (int*)calloc(mtx->cols,sizeof(int))) == NULL) {
        printf("Memory allocation error");
        status = -1;
        break;
      } else {
        // Allocation successful
      }
    }
  } else {
    printf("Memory allocation error!");
    status = -1;
  }
  return status;
}

int destroyMatrix(matrix_t* mtx) {
  // destroy the array
  for(i = 0; i < mtx->rows; i++) {
    if(mtx->array[i] != NULL) {
      free(mtx->array[i]);
      mtx->array[i] = NULL;
    }
  }
  if(mtx->array) {
    free(mtx->array);
    mtx->array = NULL;
  }
  return 0;
} 
```

现在你可以创建一个新的矩阵结构，设置它的行/列值，调用 createMatrix，然后你就设置好了：

```
 matrix_t myMtx;
  myMtx.array = NULL;
  myMtx.rows = 3;
  myMtx.cols = myMtx.cols; // Make it a square matrix
  if(createMatrix(&myMtx) == 0 ) {
    printf("Created matrix successfully");
  } else {
    printf("Failed to create matrix!");
  } 
```

这些函数还可以检查内存分配是否失败，并通过在使用它们之前检查所有指针来避免程序崩溃（即：SEGFAULT）。

祝你好运！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T17:33:02.993

C 中没有真正的二维数组。只有数组的数组，它们并不完全相同。（我知道我会因为这样说而被殴打。请耐心等待。）

虽然差异似乎不是很显着，但确实如此。要使用数组，您不必在编译时知道它的维度。例如

```
double dot_product (double a[], double b[], int size); 
/* an A-OK function */ 
```

但是，您*必须*知道任何数组*元素*的大小。例如

```
void matrix_product (double a[][], double b[][], double result[][], 
                     int a_rows, int a_cols, int b_cols);
/* Bad, would not compile. You are only permitted to say "double[N][]", 
   where N is known at compile time */ 
```

如果你想要完全通用的矩阵操作代码，你需要使用一个普通的一维数组，并自己计算行号和列号的索引。您还必须传递尺寸。

```
void matrix_product (double a[], double b[], double result[], 
                     int a_rows, int a_cols, int b_cols) {
  ...
  for (col = 0; col < a_cols; ++col) {
    for (row = 0; row < a_rows; ++row) {
      ...
      ... a[row*a_cols + col] ...
      ... 
```

在这个例子中，调用者分配`result`的是 ，而不是乘法函数。

* * *

在更高的层次上，您将希望以某种形式的抽象矩阵数据类型封装矩阵及其维度，如下所示：

```
struct matrix {
  double* elements;
  int rows, cols;
}; 
```

但那完全是另一回事了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T16:52:10.753

您将需要传递数组的维度。然后你将不得不动态分配第三个数组来保存结果。一旦你计算了结果矩阵，你就可以返回一个指向它的指针。

沿着这些线尝试一些东西，其中 A 是一个 nxm 矩阵， B 是一个 mxp 矩阵：

```
int* matix_multiply(int* matrix_a, int* matrix_b, int n, m, int p){

    int *result = (int *) malloc(sizeof(int) * a_rows * b_cols);
    if(result == NULL)
        exit(EXIT_FAILURE);
    //loops to do the actual multiplication and store the results in result[i][j]
    return result; //returns the result array
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-11T10:03:52.377

```
#include <stdio.h>

void foo(int *a, int m, int n)
{
    for(int i=0; i<m; i++)
        for(int j=0; j<n; j++)
            printf("%d\n", *(a+i*n+j)); 
}
int main()
{
    int a[][2] = {{1,2},{3,4}};
    foo((int *)a,2,2);
    return 0;
} 
```

通常二维数组以行主要方式存储。二维数组可以被认为是指向元素数组的指针数组。由于我们还传递了两个维度，因此我们可以相应地访问元素。

即使您可以尝试其他数据类型。下面我使用了结构。

```
#include <stdio.h>
struct abc
{
    int a;
    float b;
    char c;
};
void foo(struct abc *a, int m, int n)
{
    for(int i=0; i<m; i++)
        for(int j=0; j<n; j++)
            printf("%d %f %c\n", (a+i*n+j)->a, (a+i*n+j)->b, (a+i*n+j)->c); 
}
int main()
{
    struct abc a[][2] = {{{1,1.0,'a'},{2,2.0,'b'}}, {{3,3.0,'c'},{4,4.0,'d'}}};
    foo((struct abc *)a,2,2);
    return 0;
} 
```

希望能帮助到你....！！！！！

# html - € 欧元货币符号的 HTML 实体在 GMail 中不可见

> ID：10452922
> 
> 赞同：2
> 
> 时间：2012-05-04T16:46:10.367
> 
> 标签：html, firefox, gmail, html-entities, html4

在 GMail 中查看时，我遇到了欧元货币符号 HTML 实体的问题。

我正在使用`&#0128;`而不是，`&euro;`当使用 Firefox 时，这在 GMail 中显示为方形框/坏字符，而当我切换到它时它`&euro;`可以工作。

它似乎不影响雅虎！电子邮件帐户，到目前为止我所看到的只有 GMail。

一些研究使我相信它`&#0128;`的支持范围不如`&euro;`我应该切换，但是我想知道哪个应该用于一致性和支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:57:49.957

该代码`&#128;`对应于[ISO-10646 字符`\u0080`](http://www.w3.org/TR/html4/charset.html#h-5.3.1)，它是一个不可打印的控制字符。尽管有这一事实，但某些浏览器可能会将其解释为欧元字符，因为在 Microsoft 使用的一种文本编码中，字节`80h`用于欧元，但它不是标准的。

如果您想要一种可移植的方式来对欧元符号进行编码，请使用`&euro;`、`&#8364;`或`&#x20AC;`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:54:58.313

这可能是字符编码问题。`&#0128;`仅表示 ISO 10646 代码页中的字符号 128，这在技术上是未定义的。由于历史原因，大多数浏览器根据 windows-1252 映射这些字符，但这绝不是标准化行为。`&euro;`但是，无论字符编码如何，都会明确映射到欧元货币符号。还有第三种选择：对欧元符号 ( `&#x20AC;`) 使用 unicode 代码点。这也应该适用于任何浏览器。最后，您可以将文字欧元符号放入 HTML，但如果这样做，您需要确保在内容类型标头中设置正确的编码，以便接收用户代理能够理解它。

# version-control - 为什么我必须选择本地或服务器版本而不是合并（VS11/TFS2010）

> ID：10452928
> 
> 赞同：0
> 
> 时间：2012-05-04T16:46:37.570
> 
> 标签：version-control, merge, visual-studio-2012

我试图弄清楚如何解决当我用服务器端的更改更新本地工作区时出现的冲突，我对发生的事情感到非常困惑。

首先，有一个冲突，这一切都完全符合我的预期：

![合并冲突，可选择手动合并](../Images/072fd6174027d765177e7c233fdcef32.png)

Automerge 由于冲突而失败，但出现了我期望的选项：手动合并、本地合并或远程合并。

但是，在相同的变更集中但路径不同，我没有合并选项。

![类似的冲突，但没有办法解决它](../Images/9b86a7fe764d173753fa661d3bc659a7.png)

为什么不？我应该如何解决这个冲突而不能在途中的某个时候合并？这是因为这是添加冲突而不是内容冲突吗？如果是这样，有没有办法强制手动合并，这样我就不必再次编写更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:59:23.367

这是因为在示例 #1 中对同一个文件进行了2**次编辑。**您可以通过选择要保留的文件的两次编辑中的哪些位或哪个版本来解决冲突。

在示例 #2 中，同一文件有 2 次**添加**。TFS 2010 无法处理此问题，因此您可以选择要保留哪个文件版本，您**添加**的版本还是**添加**到服务器上的版本。我不认为它期望两个人添加同一个文件的两个版本，并且有人想要将这两个版本合并在一起。

[TFS 11 中的](http://blogs.msdn.com/b/bharry/archive/2011/08/31/merge-enhancements-in-tfs-11.aspx)冲突解决已大大改进，但我不知道它是否会涵盖这种情况。

# javascript - 如何在 Javascript 中创建多维数组？

> ID：10452933
> 
> 赞同：0
> 
> 时间：2012-05-04T16:47:20.690
> 
> 标签：javascript, jquery

我的目标是遍历一个 ID 为 ajaxResponse1 的表，并将每个 COLUMN 的值存储在一个单独的数组中。valuesArr 中的每个条目都是包含单个值数组的列。

我尝试使用新数组而不是新对象，但我似乎仍然没有收到任何输出警报到我的屏幕。我应该使用 .push 的某种组合将每个新列值放入适当的数组吗？希望这很清楚。有任何想法吗？谢谢！

```
var valuesArr = new Object();

$('#ajaxResponse1 tr').each( function() {
    var colNum = 0;
    $('th, td', this).each( function() {
        valuesArr[colNum] = valuesArr[colNum].push( $(this).html() );   
        colNum++;
    });
});

alert(JSON.stringify(valuesArr)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T16:54:32.577

在该数组实际存在之前，您不能将某些内容推送到数组上。

因此，在内部循环的每次迭代中，如果初始数组不存在，则必须创建它：

```
var valuesArr = [];

$('#ajaxResponse1 tr').each( function() {
    $('th, td', this).each( function(i, el) { // nb: implicit column number
        var html = $(this).html();
        if (i in valuesArr) {
            valuesArr[i].push(html);
        } else {
            valuesArr[i] = [ html ];  // new array with one element
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:52:01.123

push() 方法将新项目添加到数组的末尾，并返回新的长度。所以，试着改变它：

```
valuesArr[colNum].push( $(this).html() ); 
```

只需删除`=`

此外，您需要在第一次使用它之前初始化数组，尝试：

```
valuesArr[colNum] = valuesArr[colNum] ? valuesArr[colNum] : []; 
```

您将在这里找到完整的工作示例 [http://jsfiddle.net/57A9z/](http://jsfiddle.net/57A9z/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T16:52:52.017

```
var valuesArr = [];
var r = 0;
var c = 0;

$('#ajaxResponse1 tr').each( function() {
    valuesArr[r] = [];
    $('th, td', this).each( function() {
        valuesArr[r][c] = $(this).html();   
        c++;
    });
    c = 0;
    r++;
}); 
```

# c# - WCF 服务器/客户端连接的客户端检查服务器的值

> ID：10452937
> 
> 赞同：0
> 
> 时间：2012-05-04T16:47:34.107
> 
> 标签：c#, wcf, client-server

现在我遇到了 WCF 服务器/客户端的另一个问题。

我有一个方法：

```
bool spr_wiersz(int wiersz, int kolumna) //check_row(int row, int column)
        {
            for (int i = 0; i < 9; i++)
            {
                if (i != kolumna)
                {
                    //if(grid(row,i)==grid[row,column]
                    if (tablica[wiersz, i] == tablica[wiersz, kolumna]) 
                        return false;
                }
            }
            return true;
        } 
```

我想将每一个值都发送给客户端，他们会检查它并将 true 或 false 返回给服务器。

```
ex.
client 1 compare for i=0
client 2 compare for i=1
client 3 compare for i=2
client 1 compare for i=3
client 2 compare for i=4
...... 
```

向我使用的每个客户发送一些东西：

```
subscribers.ForEach(delegate(ImessageCallback callback)
            {
                if (((ICommunicationObject)callback).State == CommunicationState.Opened)
                {

                }
            }); 
```

我不知道这是如何连接的；/另一个问题是，如何将网格发送到客户端以比较值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T19:36:48.277

我解决了这个问题:) 它几乎可以正常工作。

```
bool spr_wiersz(int wiersz, int kolumna) 
        {
            wys_tab();
            Console.WriteLine("wiersz: {0}, kolumna: {1}", wiersz, kolumna);
            int i_wiersz=0;
            bool[] result = new bool[9];
            while (i_wiersz < 9)
            {
                subscribers.ForEach(delegate(ImessageCallback callback)
                {
                    if (((ICommunicationObject)callback).State == CommunicationState.Opened)
                    {
                        Console.WriteLine("wiersz: {0}, kolumna: {1}, i: {2}", wiersz, kolumna, i_wiersz);
                        result[i_wiersz] = callback.spr_wiersz(wiersz, kolumna, i_wiersz);
                        i_wiersz++;
                    }
                });
                for (int j = 0; j < i_wiersz; j++)
                {
                    if (result[j] == false)
                    {
                        return false;

                    }
                }

            }
            return true;
        } 
```

它仅适用于 1,3 或 9 个客户。对于其他数量的客户，这还不起作用。

# c# - Silverlight：异步调用中的 WaitOne 同步未按预期运行

> ID：10452938
> 
> 赞同：0
> 
> 时间：2012-05-04T16:48:00.493
> 
> 标签：c#, silverlight, synchronization, wcf-data-services

我正在尝试使用 ManualResetEvent 进行阻塞，直到执行回调，但从未到达回调，即使我尝试在另一个线程上运行回调。

```
waitHandle = new ManualResetEvent(false);

DataServiceQueryer<MyEntity> dataServiceQueryer = new DataServiceQueryer<MyEntity>(dsQuery.Expression);

ThreadPool.QueueUserWorkItem(new WaitCallback(stateInfo =>
{
    dataServiceQueryer.ExecuteQuery();
}));

// waits here forever
waitHandle.WaitOne();

public class DataServiceQueryer<T> 
{
    //field, properties

    public void ExecuteQuery()
    {
        // this block is definitely executed
        _asyncResult = _query.BeginExecute(new AsyncCallback(c =>
        {
            // this is never reached
            QueryOperationResponse<T> result = _query.EndExecute(c) as QueryOperationResponse<T>;
            MainPage.ListRecords = new ObservableCollection<T>(result) as ObservableCollectionEx<MyEntity>;
            MainPage.waitHandle.Set();
        }), _query);

        // neither is this!
        var test = _asyncResult.AsyncWaitHandle.WaitOne(0);
    }
} 
```

有什么建议么？我对为什么`_asycResult`任务似乎永远不会发生感到最困惑。我将 Silverlight 4 与 EF4 和 devart Oracle dotConnect 提供程序一起使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:24:21.890

在 silverlight 和 ui 线程中，这是预期的行为（挂起的应用程序）。我似乎找不到更多的官方文档，尽管我可以发誓我记得过去看过它......

我不记得确切的细节，但我相当肯定直接阻塞 ui 线程会导致一切停止运行。我似乎记得 UI 线程处理网络 IO。

无论您想在 WaitOne 调用后发生什么，都需要将其移至回调。

虽然这不是您的确切情况，但此链接中有相关信息。它解释了阻塞 UI 线程会阻止 Web 服务调用，因为它也会阻塞 UI 消息队列。我意识到您的电话正在从线程池中发出。我仍然认为阻塞 ui 线程会干扰，但我找不到具体解释原因的文档。

[http://www.codeproject.com/Articles/31018/Synchronous-Web-Service-Calls-with-Silverlight-Dis](http://www.codeproject.com/Articles/31018/Synchronous-Web-Service-Calls-with-Silverlight-Dis)（目前我能找到的最好的，我会在/如果我找到我的文章时更新寻找）。

# sql - 选择具有不同名称列的最新记录

> ID：10452940
> 
> 赞同：48
> 
> 时间：2012-05-04T16:48:11.157
> 
> 标签：sql

我确实四处搜索，发现此 [SQL 选择最近日期的行，其中包含两个唯一列](https://stackoverflow.com/questions/189213/sql-selecting-rows-by-most-recent-date) ，这与我想要的非常接近，但我似乎无法使其工作。

我收到错误 选择列表中的“ID”列无效，因为它既不包含在聚合函数中，也不包含在 GROUP BY 子句中。

我想要每个不同名称的最新行

```
Select ID,Name,Price,Date
From  table
Group By Name
Order By Date ASC 
```

这是我想要的一个例子

桌子

| ID | 姓名 | 价格 | 日期 |
| --- | --- | --- | --- |
| 0 | 一个 | 10 | 2012-05-03 |
| 1 | 乙 | 9 | 2012-05-02 |
| 2 | 一个 | 8 | 2012-05-04 |
| 3 | C | 10 | 2012-05-03 |
| 4 | 乙 | 8 | 2012-05-01 |

期望的结果

| ID | 姓名 | 价格 | 日期 |
| --- | --- | --- | --- |
| 2 | 一个 | 8 | 2012-05-04 |
| 3 | C | 10 | 2012-05-03 |
| 1 | 乙 | 9 | 2012-05-02 |

我正在使用 Microsoft SQL Server 2008

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-05-04T16:59:07.923

```
Select ID,Name, Price,Date
From  temp t1
where date = (select max(date) from temp where t1.name =temp.name)
order by date desc 
```

这是一个带有上述演示的[SQL Fiddle](http://sqlfiddle.com/#!18/6a8e3/1)

* * *

或者正如康拉德指出的那样，您可以使用 INNER JOIN（另一个带有演示的[SQL Fiddle ）：](http://sqlfiddle.com/#!18/6a8e3/384)

```
SELECT t1.ID, t1.Name, t1.Price, t1.Date 
FROM   temp t1 
INNER JOIN 
(
    SELECT Max(date) date, name
    FROM   temp 
    GROUP BY name 
) AS t2 
    ON t1.name = t2.name
    AND t1.date = t2.date 
ORDER BY date DESC 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-04T16:56:52.183

有几种方法可以做到这一点。这个使用 ROW_NUMBER。只需按名称分区，然后按您想要将所需值放在第一位的内容进行排序。

```
WITH cte 
     AS (SELECT Row_number() OVER (partition BY NAME ORDER BY date DESC) RN, 
                id, 
                name, 
                price, 
                date 
         FROM   table1) 
SELECT id, 
       name, 
       price, 
       date 
FROM   cte 
WHERE  rn = 1 
```

[演示](http://sqlfiddle.com/#!3/bbd4d/3)

请注意，您可能应该`(partition BY NAME ORDER BY date DESC, ID DESC)` 在实际查询中添加 ID 作为日期的决胜局

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-04T17:01:06.237

```
select * from (
    Select
        ID, Name, Price, Date,
        Rank() over (partition by Name order by Date) RankOrder
    From table
) T
where RankOrder = 1 
```

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2012-05-04T16:58:54.397

使用**Distinct**而不是**Group By**

```
Select Distinct ID,Name,Price,Date
From  table
Order By Date ASC 
```

[http://technet.microsoft.com/en-us/library/ms187831.aspx](http://technet.microsoft.com/en-us/library/ms187831.aspx)

# jersey - EclipseLink 抛出异常？

> ID：10452941
> 
> 赞同：0
> 
> 时间：2012-05-04T16:48:14.033
> 
> 标签：jersey, eclipselink

我正在开发一个基于 REST 的球衣实现的项目，我使用 JPA 进行持久性，使用 Spring IoC 进行 DI。现在我有一些必须用 JAXB (MOXy) 编组的对象。按照[这个教程](https://stackoverflow.com/questions/3941479/jaxb-how-to-marshall-map-into-keyvalue-key)一步一步我试图让事情顺利进行，但不幸的是我还没有成功。以下是我的课程，如果你能帮忙请：

根类：

```
package com.persistent.entity;

import java.util.HashMap;
import java.util.Map;

import javax.xml.bind.annotation.XmlAccessType;
import javax.xml.bind.annotation.XmlAccessorType;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.adapters.XmlJavaTypeAdapter;

@XmlAccessorType(XmlAccessType.NONE)
@XmlRootElement
public class Bar {  
    private Map<String,String> mapbar;

    public Bar() {

    }

    public Bar(Map<String,String> map ){
        this.mapbar = map;
    }

    @XmlJavaTypeAdapter(MapAdapter.class)
    public Map<String, String> getMapbar() {
        return mapbar;
    }

    public void setMapbar(Map<String, String> map) {
        this.mapbar = map;
    }
} 
```

地图适配器类：

```
package com.persistent.entity;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

//import javax.xml.bind.JAXBContext;
import javax.xml.bind.annotation.adapters.XmlAdapter;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;
import org.w3c.dom.NodeList;

public class MapAdapter extends XmlAdapter<AdaptedMap, Map<String, String>>  {

    @Override
    public AdaptedMap marshal(Map<String, String> map) throws Exception {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document document = db.newDocument();
        Element rootElement = document.createElement("bar");
        document.appendChild(rootElement);

        for(Entry<String,String> entry : map.entrySet()) {
            Element mapElement = document.createElement(entry.getKey());
            mapElement.setNodeValue(entry.getValue());
            rootElement.appendChild(mapElement);
        }

        AdaptedMap adaptedMap = new AdaptedMap();
        adaptedMap.setValue(document);
        return adaptedMap;
    }

    @Override
    public Map<String, String> unmarshal(AdaptedMap adaptedMap) throws Exception {
        Map<String, String> map = new HashMap<String, String>();
        Element rootElement = (Element) adaptedMap.getValue();
        NodeList childNodes = rootElement.getChildNodes();
        for(int x=0,size=childNodes.getLength(); x<size; x++) {
            Node childNode = childNodes.item(x);
            if(childNode.getNodeType() == Node.ELEMENT_NODE) {
                map.put(childNode.getLocalName(), childNode.getTextContent());
            }
        }
        return map;
    }  
} 
```

AdaptedMap 类：

```
package com.persistent.entity;

import javax.xml.bind.annotation.XmlAnyElement;

//import org.w3c.dom.Document;

public class AdaptedMap {

    private Object value;

    @XmlAnyElement
    public Object getValue() {
        return value;
    }

    public void setValue(Object value) {
        this.value = value;
    }    
} 
```

最后是资源类：

```
package com.persistent.rest;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import javax.ws.rs.DefaultValue;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.QueryParam;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;
import javax.xml.bind.JAXBContext;
import javax.xml.bind.Marshaller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Component;

import com.persistent.entity.Bar;
import com.persistent.entity.BarList;
import com.persistent.entity.Pie;
import com.persistent.entity.Vente;
import com.persistent.entity.VentesList;
import com.persistent.entity.PieList;
import com.persistent.service.VenteService;
import com.sun.jersey.api.json.JSONWithPadding;

// The Java class will be hosted at the URI path "/myresource"
@Path("/myresource")
@Component
@Scope("request")
public class MyResource {

    @Autowired
    VenteService venteService;

    @GET
    @Produces("application/x-javascript")

    public JSONWithPadding getBarService(@QueryParam("callback")  String callback){
        int i;

        VentesList ventes =  venteService.getAll();
        Map<String,String> hmBar = new HashMap<String,String>();

  for (i=0;i<ventes.getsimpleVentes().size();i++){
hmBar.put(ventes.getsimpleVentes().get(i).getProjet(),String.valueOf(
    ventes.getsimpleVentes().get(i).getNbrRsrv()));

}   

  Bar ba = new Bar(hmBar);
    return  new JSONWithPadding(ba,callback);
    } 
} 
```

在Tomcat上运行它后，我得到这个异常：

```
GRAVE: "Servlet.service()" pour la servlet Jersey Spring Web Application a généré une exception
java.io.IOException: Error marshalling JAXB object of type "class com.persistent.entity.Bar".
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:145)
    at com.sun.jersey.spi.container.ContainerResponse.write(ContainerResponse.java:254)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:578)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:502)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:493)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:308)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:314)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:239)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:619)
Caused by: javax.xml.bind.MarshalException
 - with linked exception:
[Exception [EclipseLink-25003] (Eclipse Persistence Services - 2.3.1.v20111018-r10243): org.eclipse.persistence.exceptions.XMLMarshalException
Exception Description: An error occurred marshalling the object
Internal Exception: Exception [EclipseLink-3001] (Eclipse Persistence Services - 2.3.1.v20111018-r10243): org.eclipse.persistence.exceptions.ConversionException
Exception Description: The object [{Dyar Al Baydae=6, TEST=8, test=5, Dyar Al Bahja=20, Dyar Al Mansour=87}], of class [class java.util.HashMap], could not be converted to [class com.persistent.entity.AdaptedMap].]
    at org.eclipse.persistence.jaxb.JAXBMarshaller.marshal(JAXBMarshaller.java:326)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:167)
    at com.sun.jersey.core.provider.jaxb.AbstractRootElementProvider.writeTo(AbstractRootElementProvider.java:143)
    ... 19 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T12:42:06.577

[我根据此处](https://stackoverflow.com/questions/6820092/jaxb-hashmap-unmappable/8770027#8770027)发布的解决方案找到了解决我的问题的另一个解决方案...它对我有用，我认为这是映射 HashMap 类型对象的最佳解决方案。

# ruby-on-rails-3.1 - Rails 3.2.3 资产管道预编译什么都不做

> ID：10452943
> 
> 赞同：2
> 
> 时间：2012-05-04T16:48:26.267
> 
> 标签：ruby-on-rails-3.1, asset-pipeline

我可以使用 Ruby 1.9.2 在 OSX 和 Windows 上重现此问题：

我有一个简单的 Rails 3.2.3 应用程序，正在尝试预编译资产管道，但资产：预编译什么都不做。也不抱怨。

这是我所做的：

1.  使用 RVM，创建一个新的干净的 gemset，命名为 rails32
2.  安装导轨：gem install rails -v 3.2.3
3.  创建一个虚拟脚手架：rails g scaffold test name:string
4.  迁移产品数据库：rake db:migrate RAILS_ENV=production
5.  在 prod 中运行服务器：rails s -e production

在这一点上，我得到了我所期待的资产未预编译异常。然后：

我运行 rake assets:precompile RAILS_ENV=production

它运行没有错误并结束。

之后，我的应用程序在 HTML 中有指纹资产，但它们不存在于任何地方。

有任何想法吗？我认为这是使用资产管道的最简单形式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:19:30.593

默认情况下，Rails 期望一个高负载服务器（例如 Apache 或 nginx）在生产模式下为静态资产提供服务。如果您真的不想在这样的服务器后面运行您的应用程序，请在 config/environment.rb 文件中更改`config.serve_static_assets`为`true`.

# r - R：积分：达到的最大细分数，舍入误差

> ID：10452945
> 
> 赞同：7
> 
> 时间：2012-05-04T16:48:29.693
> 
> 标签：r, function

我遇到了一个有趣但相当烦人的问题。

我正在尝试集成一个从数据集中计算出来的函数。数据可以在这里找到：[链接到 sample.txt](http://dl.dropbox.com/u/15487093/sample.txt)。

我首先为我的数据拟合一条线。这可以与 线性`approxfun`或非线性完成`splinefun`。在下面的示例中，我使用后者。现在，当我尝试集成拟合函数时，我遇到了错误

*   `maximum number of subdivisions reached`

但是当我增加细分时，我得到

*   `roundoff error`

从我的示例代码中的值可以看出，对于这个特定的数据集，阈值是 754->755。

我的同事将这个数据集集成到 Matlab 中没有问题。有没有办法操纵我的数据进行整合？R中是否有另一种数值积分方法？

![在此处输入图像描述](../Images/5229b7d90c7eabf92488d03932958977.png)

```
data<-read.table('sample.txt',sep=',')
colnames(data)<-c('wave','trans')
plot(data$wave,data$trans,type='l')

trans<- -1 * log(data$trans)
plot(data$wave,trans,type='l')

fx.spline<-splinefun(data$wave,trans)

#Try either
Fx.spline<-integrate(fx.spline,min(data$wave),max(data$wave))
#Above: Number of subdivision reached
Fx.spline<-integrate(fx.spline,min(data$wave),max(data$wave),subdivisions=754)
#Above: Number of subdivision reached
Fx.spline<-integrate(fx.spline,min(data$wave),max(data$wave),subdivisions=755)
#Above: Roundoff error 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T19:04:16.210

R 中有许多集成例程，您可以通过“RSiteSearch”或使用“sos”包找到其中的一些。

例如，包`pracma`有几个实现，例如

```
quad(fx.spline,min(data$wave),max(data$wave))   # adaptive Simpson
# [1] 2.170449                                  # 2.5 sec
quadgk(fx.spline,min(data$wave),max(data$wave)) # adaptive Gauss-Kronrod
# [1] 2.170449                                  # 0.9 sec
quadl(fx.spline,min(data$wave),max(data$wave))  # adaptive Lobatto
# [1] 2.170449                                  # 0.8 sec 
```

请注意，这些是纯 R 脚本，因此比`integrate`具有这种振荡功能的编译例程慢。

# c++ - 使用对话控件而不窃取焦点

> ID：10452946
> 
> 赞同：1
> 
> 时间：2012-05-04T16:48:36.850
> 
> 标签：c++, user-controls, mfc, dialog, focus

我有一个包含控件、一些 CButton 和一个 CScrollbar 的无模式 CDialog。CDialog 是我想要始终保持焦点的编辑框的父级。问题是，每当用户使用控件、单击按钮或滚动条时，控件都会从编辑框中窃取焦点，导致父窗口在没有焦点的情况下绘制（灰色标题栏），并导致控件接受所有的键盘输入。有没有办法让控件响应鼠标操作但不窃取焦点？

控件和对话框都是用 WS_CHILD 创建的。控件是对话框的父级，对话框是编辑框的父级。

我尝试在使用控件后重新设置焦点，但这会导致父窗口在丢失然后重新获得焦点时闪烁。基本上我想要一个像组合框一样工作的东西，可以点击或拖动滚动条，但键盘输入仍然进入对话框本身，而不仅仅是滚动条​​，整个事情永远不会失去焦点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:06:50.617

我很久没有做过这样的事情了，所以我确信有一百万个小细节，但我认为出发点是覆盖[`WM_MOUSEACTIVATE`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645612%28v=vs.85%29.aspx).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T21:46:18.083

我对你描述的亲子关系有点困惑。你能解释一下你的意思是什么： *CDialog 是一个编辑框的父级，我想一直保持焦点*

在客户区内托管其他窗口的任何窗口都是这些窗口的父窗口。如果没有其他窗口包含的 WS_CHILD，则无法创建窗口。因此，所有对话框的控件都是此对话框的子项。子窗口也有可能托管另一个子窗口。

CDialog 只是一个对话窗口的 MFC 表示；这同样适用于其他控件。例如，CButton 是一个 MFC 类，它包装了预定义为窗口按钮控件的窗口句柄。

除非为空（没有任何控件），否则对话框永远不会有焦点。如果对话框甚至包含一个控件，则该控件始终具有焦点。

焦点意味着任何给定的窗口都会接收鼠标和键盘消息。在任何给定时间，只有一个控件可以具有焦点。为了让滚动条处理鼠标点击或键盘移动滑块，滚动条必须有焦点；因此其他一些控制必须放弃它。组合框下拉框（我认为这就是您所指的）不是对话框的子项。它是一个弹出窗口，在此期间具有键盘焦点并捕获鼠标。当它下拉时，对话框被停用，一旦下拉隐藏，对话框状态将更改回活动，因此焦点永远不会改变，它返回到对话框被停用时具有焦点的控件。

您尝试做的事情可能是可能的，但它需要大量的编码。可能挂钩消息可以完成这项工作，但我认为它会违背流程。

# ruby-on-rails - 未定义的方法“first_name”

> ID：10452947
> 
> 赞同：2
> 
> 时间：2012-05-04T16:48:41.053
> 
> 标签：ruby-on-rails, ruby

任何人都可以为我阐明这一点吗？

未定义的方法 `first_name' 用于#

这是show.html

```
<p id="notice"><%= notice %></p>
<div id="container">
<p>
  <b>First name:</b>
  <%= @artist.firstname %>
</p>

<p>
  <b>Second name:</b>
  <%= @artist.surname %>
</p>

<p>
  <b>About:</b>
  <%= @artist.about %>
</p>
<div id="comments">

  <h2>Comments</h2>

<%= render :partial => "shared/comment", :collection => @artist.comments%>

</div
</div>

<%= render :partial => "image", :collection => @artist.images %>
<%= link_to 'Edit', edit_artist_path(@artist) %> |
<%= link_to 'Back', artists_path %>
<%= link_to 'show', images_path %> 
```

这是部分

```
 <div class="comment">

     <p>

      <span class="commentator"><%= comment.commentator.display_name %> 

    say's</span>

      <%= comment.comment %>

      </p>

    </div 
```

这是朋友的看法

```
class Friends < ActiveRecord::Base
    attr_accessible :firstname, :surname
    has_many :comments, :as => :commentator, :class_name =>"Commentable"
    def display_name
    "#{self.firstname} #{self.surname}"
    end

end 
```

这是朋友控制器

```
class FriendsController < ApplicationController
  # GET /friends
  # GET /friends.xml
  def index
    @friends = Friend.all

    respond_to do |format|
      format.html # index.html.erb
      format.xml  { render :xml => @friends }
    end
  end

  # GET /friends/1
  # GET /friends/1.xml
  def show
    @friend = Friend.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.xml  { render :xml => @friend }
    end
  end

  # GET /friends/new
  # GET /friends/new.xml
  def new
    @friend = Friend.new

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @friend }
    end
  end

  # GET /friends/1/edit
  def edit
    @friend = Friend.find(params[:id])
  end

  # POST /friends
  # POST /friends.xml
  def create
    @friend = Friend.new(params[:friend])

    respond_to do |format|
      if @friend.save
        format.html { redirect_to(@friend, :notice => 'Friend was successfully created.') }
        format.xml  { render :xml => @friend, :status => :created, :location => @friend }
      else
        format.html { render :action => "new" }
        format.xml  { render :xml => @friend.errors, :status => :unprocessable_entity }
      end
    end
  end

  # PUT /friends/1
  # PUT /friends/1.xml
  def update
    @friend = Friend.find(params[:id])

    respond_to do |format|
      if @friend.update_attributes(params[:friend])
        format.html { redirect_to(@friend, :notice => 'Friend was successfully updated.') }
        format.xml  { head :ok }
      else
        format.html { render :action => "edit" }
        format.xml  { render :xml => @friend.errors, :status => :unprocessable_entity }
      end
    end
  end

  # DELETE /friends/1
  # DELETE /friends/1.xml
  def destroy
    @friend = Friend.find(params[:id])
    @friend.destroy

    respond_to do |format|
      format.html { redirect_to(friends_url) }
      format.xml  { head :ok }
    end
  end
end 
```

我正在努力让朋友可以在艺术家页面上发表评论，但我不断收到上述错误。

我对 Ruby 很陌生，所以如果我遗漏了任何内容，我深表歉意。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:55:04.100

基本上，rails 将查看数据库以找出模型上的字段。因此，请确保您的迁移已运行，并且该 first_name 存在于 db 表中。

此外，Friends 是复数形式。在 rails 中，您的表格是复数（friends），您的模型是单数（Friend），您的控制器是复数（FriendsController）。最好不要违背这个约定。尝试重命名模型，看看会发生什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:51:06.483

您需要`Friend`该类的第 2 行，`attr_accessible :firstname, :surname`以便您的视图可以访问这些变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T17:01:02.077

此错误与您的 db 中不存在 first_name 的数据库有关。仔细运行迁移。

# java - 使用 Java 在 Eclipse 中创建扫描程序时出现 FileNotFoundException

> ID：10452948
> 
> 赞同：4
> 
> 时间：2012-05-04T16:48:52.740
> 
> 标签：java, eclipse, java.util.scanner, filenotfoundexception, filereader

在 Snow Leopard 上的 Eclipse (Indigo) 上运行以下 Java 6 代码时出现 FileNotFoundException：

```
import java.io.*;
import java.util.*;

public class readFile {

    public static void main(String[] args) {

        Scanner s = new Scanner(new FileReader("/Users/daniel/pr/java/readFile/myfile.txt"));  // Line 9

    }
} 
```

例外是

```
Exception in thread "main" java.lang.Error: Unresolved compilation problem: 
    Unhandled exception type FileNotFoundException

    at readFile.main(readFile.java:9) 
```

我当前的工作空间是 /Users/daniel/pr/java。它只包含一个项目（readFile），文件层次结构如下所示：

```
- readFile
    - src
        - (default package)
            - readFile.java
    - JRE System Library [JavaSE-1.6]
    - myfile.txt 
```

在阅读了几个非常相似的问题后，我尝试过

*   将 myfile.txt 的副本放在项目、bin、src 和工作区目录以及我的主文件夹和根文件夹中
*   识别工作目录并使用相对路径
*   通过 Eclipse 中的“运行配置 > 参数 > 工作目录”手动设置工作区
*   在 bin、readFile、src 和 java 目录中使用命令行 Java 启动器运行程序（在所有这些地方都有 myfile.txt 的副本）
*   删除文件扩展名和/或延长文件名（超过一些假定的最小字符限制），和
*   验证 myfile.txt 的权限（它们现在是 rw-r--r--）。

我不知所措。可能是什么问题呢？（感谢您的阅读！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:52:42.280

异常告诉你问题。

您在 main 中的代码*可能会*抛出 FileNotFoundException，因此您需要在代码中考虑这一点，或者通过在方法签名中声明可以抛出该异常，或者使用 try catch 包围代码：

声明：

```
public static void main(String[] args) throws FileNotFoundException{

    Scanner s = new Scanner(new FileReader("/Users/daniel/pr/java/readFile/myfile.txt"));  // Line 9

} 
```

或使用 try/catch

```
public static void main(String[] args) {
    try { 
        Scanner s = new Scanner(new FileReader("/Users/daniel/pr/java/readFile/myfile.txt"));  // Line 9
    } catch (FileNotFoundException e) {
        //do something with e, or handle this case
    }
} 
```

这两种方法之间的区别在于，由于这是您的主要方法，因此如果您在方法签名中声明它，您的程序将抛出异​​常并停止，从而为您提供堆栈跟踪。

如果您使用 try/catch，您可以通过记录错误、重试等方式来处理这种情况。

您可能想看看： [http](http://docs.oracle.com/javase/tutorial/essential/exceptions/) ://docs.oracle.com/javase/tutorial/essential/exceptions/以了解 Java 中的异常处理，它会非常有用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T16:51:06.200

[FileNotFoundException](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileNotFoundException.html)是一个检查异常！您必须捕获异常...

```
 public static void main(String[] args) {
     try {
        Scanner s = new Scanner(new FileReader("/Users/daniel/pr/java/readFile/myfile.txt"));  // Line 9
     } catch(FileNotFoundException ex) {
         //Handle exception code ...
     }
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T16:52:42.750

```
"/Users/daniel/pr/java/readFile/myfile.txt" 
```

那不应该是：

```
"/users/daniel/pr/java/readFile/myfile.txt" 
```

# php - 在没有 mod_rewrite 的情况下编写动态 URL 路径

> ID：10452958
> 
> 赞同：0
> 
> 时间：2012-05-04T16:50:07.117
> 
> 标签：php, apache, rest, url-rewriting

所以，现在我正在尝试在不使用 .htaccess 或使用模块的情况下生成动态 URL 及其路径。基本上，我正在尝试重写和输出在 Apache 服务的不同本地主机上无状态工作的 URL 路径。

我想要一个 index.php 通过这样的查询字符串获取 URI（*显然不是代码*）：

```
-> index.php  (echos dynamically generated URL hyperlinks)      
-> index.php?q=/   (echos every URI in JSON)                       
-> index.php?q=/some_id   (outputs table some_id info w/ links to reviews)                            
-> index.php?q=/some_id/reviews    (outputs table column of reviews w/ link to review_ids)                    
-> index.php?q=/some_id/reviews/review_id   (output related column info) 
```

有人可以告诉我我将如何去做吗？我想我将不得不使用 $_SERVER 方法编写 URL 并在遍历表 ID 数组时爆炸..？

任何帮助是极大的赞赏！

* * *

编辑：
这是我试图编写的代码：/

```
 <?php
     $db = $user = $pw = 'logininfo';

     try {
        $dbconn = new PDO('mysql:host=localhost;db='.$db, $user, $pw;   
     }
     catch (Exception $e) {
        echo "Error: ";
        echo $e->getMessage();
     }
  ?>

  <!DOCTYPE HTML>
  <head>
      <title>Product Reviews</title>
  </head>
   <body>
     <h1>Product List:</h1>
        <h2>
           <ul>
              <?php    
                  try {
                     $sql = "SELECT somename, some_id FROM products";
                 $stmt = $dbconn->query($sql);
                 if($stmt !== false) {
                 foreach($stmt as $row) {  //output just name
                     echo "<li>";
                 echo htmlentities($row['somename'])."<br />";

                 if($stmt !== false) {
                    $url = "<a href=index.php?q=".
                                htmlentities($row['some_id'])."/>".
                                htmlentities($row['somename'])."'s Review</a>";

                    echo $url;         //output URL
                    echo "</li>"."<br />";
                 }
                 else {
                    echo "Unnecessary";
                 }
                 }
                 if($_GET['url']) {   //don't really know what to put here
                    header("Location: $url");   //can't use headers anyway
                 }  
                }
                $stmt = null;
                 }
                 catch (PDOEXCEPTION $e) {
                echo $e->getMessge();
                 }
         ?>
    </ul>
    </h2>
   </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T18:37:19.797

您可以将 URL 编写为：

```
http://example.org/index.php/reviews/id/ [where id can be your review id] 
```

并使用`$_SERVER['PATH_INFO']`in`index.php`获取位于 之后的 URL 的一部分`index.php`，然后分解文本并从中获取所需的数据。

```
<?php
    $query_string = explode('/', $_SERVER['PATH_INFO']);

    switch(count($query_string)) {
        case 2:
            $some_id = (int) $query_string[1];
            if ($some_id === 0) {
                //(echos every URI in JSON)

            }
            else {
                // (outputs table some_id info w/ links to reviews)

            }

            break;

        case 3:
            //(outputs table column of reviews w/ link to review_ids)
            $some_id = (int) $query_string[1];
            $table_name = $query_string[2];
            break;

        case 4:
            //(output related column info)
            $some_id = (int) $query_string[1];
            $table_name = $query_string[2];
            $review_id = (int) $query_string[3];
            break;

        default:
            // Error case
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T18:48:10.867

试试这个尺寸

```
if (isset($_GET['q']) && !empty($_GET['q']))
{
    $params = explode("/",$_GET['q']);

    if (isset($params[3]) && !empty($params[3]))
        echo "(output {$params[2]} {$params[3]} info)";

    else if (isset($params[2]) && !empty($params[2]))
        echo "(outputs table column of {$params[2]} w/ link to review_ids)";

    else if (isset($params[1]) && !empty($params[1]))
        echo "(outputs table {$params[1]} info w/ links to reviews)";
    else
        echo "(echos every URI in JSON) ";

}
else
    echo "(echos dynamically generated URL hyperlinks)"; 
```

# facebook - Cakephp Facebook 插件 - 通过动作分享

> ID：10452960
> 
> 赞同：2
> 
> 时间：2012-05-04T16:50:22.670
> 
> 标签：facebook, cakephp, cakephp-1.3, sharing

我正在使用 Nick Baker (webtechnick) 的 CakePHP / Facebook 插件，它很棒而且效果很好，但是我有一个问题，我似乎无法回答。

我将如何绕过共享按钮的使用并直接通过操作进行共享？

例如，我通过我的网站发布了一个帖子，该帖子按应有的方式添加到了数据库中，它还通过该操作向登录的用户 Twitter 帐户发送了一个帖子。我怎样才能让这个操作句柄将它分享到我的 FB 帐户（已经建立连接）。？我尝试了第一件事，我认为任何人显然都会直接在操作中尝试 $this->Facebook->share() ，但也无济于事......

任何想法或解决方案都会有很大帮助......

**回答后更新**

谢谢你的帮助。我投票赞成你的答案，因为据我所知，你是 100% 正确的。我正在加载 JS SDK。

```
 function init($options = null, $reload = true) {
        if (empty($options)) {
            $options = array();
        }
        if ($appId = FacebookInfo::getConfig('appId')) {
            $session = json_encode($this->Session->read('FB.Session'));
            if ($reload) {
                $callback = "FB.Event.subscribe('auth.login',function(){window.location.reload()});";
            } else {
                $callback = "if(typeof(facebookReady)=='function'){facebookReady()}";
            }
            $callback .= "FB.Event.subscribe('auth.logout',function() {window.location = '/bastards/users/logout'});";
            $init = '<div id="fb-root"></div>';
            $init .= $this->Html->scriptBlock(
<<<JS
window.fbAsyncInit = function() {
    FB.init({
        appId : '{$appId}',
        status : true, // check login status
        cookie : true, // enable cookies to allow the server to access the session
        xfbml : true, // parse XFBML
        oauth : true // use Oauth
    });
    {$callback}
};
(function() {
    var e = document.createElement('script');
    e.src = document.location.protocol + '//connect.facebook.net/{$this->locale}/all.js';
    e.async = true;
    document.getElementById('fb-root').appendChild(e);
}());
JS
            , $options);
            return $init;
        } else {
            return "<span class='error'>No Facebook configuration detected. Please add the facebook configuration file to your config folder.</span>";
        }
    } 
```

我可以毫无问题地提取用户信息并处理所有这些。我已经完成了从我的网站到 FB 的发布，但这只是通过一个链接，使用 FB.ui...

```
 <a href="#" onClick="publishStory();" class="sendFeed"><br><font style="color:#FFF; text-decoration:none;padding-left:27px;">post to wall</font></a><br>
<script>
function publishStory() {
  FB.ui({
    method: 'feed',
    name: 'message name',
    caption: 'message caption ',
    description: 'description goes here',
    link: 'the url current page',
    picture: 'if you want to add an image'
  }, 
  function(response) {
    console.log('publishStory response: ', response);
  });
  return false;
}
</script> 
```

我试过用...替换上面的代码

```
 <a href="#" onClick="publishStory();" class="sendFeed"><br><font style="color:#FFF; text-decoration:none;padding-left:27px;">post to wall</font></a><br>
<script>
function publishStory() {
  var body = 'Reading JS SDK documentation';
FB.api('/me/feed', 'post', { message: body }, function(response) {
  if (!response || response.error) {
    alert('Error occured');
  } else {
    alert('Post ID: ' + response.id);
  }
});
}
</script> 
```

但是每次都会出错。

我还应该指出，用户 FB 墙上的帖子并不是真的来自网站 persay，而是用户在他们自己的墙上的帖子，基本上是说：“我在 ladala.com 上发了一个帖子，你应该去去看看吧。”

所以现在我需要弄清楚如何通过提交帖子的操作来运行 FB.ui。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T18:57:54.687

根据我们的谈话，我想我会在答案中加入更完整的描述。

您可以使用 JavaScript SDK 触发共享调用。

首先，您需要按照[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)的加载部分中的说明加载 JavaScript SDK 。

加载到页面后，您要查看的两个调用是 FB.getLoginStatus 和 FB.api。FB.getLoginStatus 会给你一个回复，告诉你用户是否登录到 facebook，以及他们是否批准了你的申请。[此链接](https://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)将描述 getLoginStatus 的功能，但简而言之，您需要检查 response.connected（如果需要，可能会再次调用以确认用户的权限）。

如果用户已登录并已批准您的应用程序，则您可以尝试使用[FB.api](http://developers.facebook.com/docs/reference/javascript/FB.api/)进行 API 调用。请记住，要执行此操作，您可能需要用户已允许[publish_stream](http://developers.facebook.com/docs/authentication/permissions/)权限。

您的代码将如下所示：

```
//Do FB initialization
FB.getLoginStatus(function(response) {
  if (response.status === 'connected') {
    FB.api('/me/feed', 'post', { message: body }, function(response) {
      if (!response || response.error) {
        //Post was successful
      }
    });
  }
}); 
```

这可以以任何您想要的方式触发。页面加载、点击、其他事件完成等。

请记住，这只是实现这一点的一种方法。此外，如果您尝试与您的 FB 应用程序共享某些内容，但它无法正常工作，您应该确认您拥有执行此操作所需的所有权限。

# git - 如何为一个目录级别“git ls-files”。

> ID：10452962
> 
> 赞同：29
> 
> 时间：2012-05-04T16:50:37.850
> 
> 标签：git, ls, glob

我正在使用 msysgit (1.7.9)，并且我正在寻找`git ls-files`命令的正确调用以仅显示当前级别的（跟踪的）文件和目录，无论是从索引中，还是从当前工作目录中（如果是）更轻松。

本质上，它会提供一个与您在 Github 上看到的类似的目录列表。来自 Windows，我不太熟悉进行 globbing 的正确方法（？）。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-04T21:28:15.167

我想你想`git ls-tree HEAD`尝尝。ls-tree 输出的第二个单词将是`tree`目录、`blob`文件、`commit`子模块，文件名是 ascii 选项卡之后的所有内容。

编辑：改编自[@iegik 的评论](https://stackoverflow.com/questions/10452962/how-to-git-ls-files-for-just-one-directory-level/10456380#comment64472316_10456380)并更好地适应所提出的问题，

```
git ls-files . | sed s,/.*,/, | uniq 
```

将列出从当前级别开始的索引文件并将目录折叠到它们的第一个组件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-04T18:12:04.283

我相信`git ls-tree --name-only [branch]`会做你正在寻找的。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-27T02:08:56.770

`git ls-tree <tree-ish>`很好，但我不知道如何将***索引***指定为`<tree-ish>`. （尽管我确信肯定会有一些全大写的参考来做到这一点。）

无论如何，`ls-files`隐式地在索引上工作，所以我不妨使用它：

```
$ git ls-files | cut -d/ -f1 | uniq 
```

这仅显示当前目录中的文件和目录。

Change`cut`的`-f`参数来控制深度。例如，`-f-2`（那是*破折号*二）显示文件和目录最多两个级别：

```
$ git ls-files | cut -d/ -f-2 | uniq 
```

如果您将`<path>`参数指定为`ls-files`，请确保增加`-f`以适应前导目录：

```
$ git ls-files foo/bar | cut -d/ -f-3 | uniq 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-04T19:57:10.653

仅列出当前工作目录中 git 跟踪的文件，我发现以下比使用快几倍`git ls-tree...`：

```
ls | grep -f <(git ls-files) 
```

如果您还想包含目录，那么使用 sed 会有点混乱，类似于：

```
ls | grep -f <(git ls-files | sed 's/\/.*//g' | sort | uniq) 
```

假设您的文件名中没有任何“/”字符。也...

`ls -a | grep -f <(git ls-files | sed 's/\/.*//g' | sort | uniq)`

为了还列出“不可见”（尚未跟踪的）文件。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-05T17:14:08.480

我很惊讶这太难了……但不要让我开始抱怨 git。

jthill 答案的变体似乎是可别名的（嘿，我是语言学家，我有制造新词的许可证）。变体是

```
ls -d `git ls-tree HEAD | sed -e "s/^.*\t//"` 
```

这使用'ls'来格式化输出，所以你得到颜色编码（如果你使用它）等等。它也可以作为别名：

```
alias gitls='ls -d `git ls-tree HEAD | sed -e "s/^.*\t//"`' 
```

FWIW，您还可以为递归命令设置别名，以便使用“ls”格式（例如，如果您的路径+文件名不太长，您将获得两列输出、可执行文件的颜色编码等）

```
alias gitls-r='ls `git ls-files`' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-13T14:55:01.440

不管你信不信，我找到的最简单的解决方案就是`cd`在终端中简单地进入你想要的目录。运行将只为您提供该目录的结果，而不是运行`git ls-files`它`/project/src``/project`

不是最技术性的答案，但是嘿，它有效！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-31T16:58:03.483

使用这个[简单的 bash 脚本](https://gist.github.com/x3ro/6242017)来定义任何级别的子目录

# iphone - AIR for iOS：创建没有证书的企业应用程序

> ID：10452966
> 
> 赞同：0
> 
> 时间：2012-05-04T16:50:50.003
> 
> 标签：iphone, ios, air, certificate, code-signing

我们使用 AIR for iOS 为客户创建企业应用程序。

我们的客户有一个企业开发者帐户。有没有办法在没有证书的情况下创建 IPA 文件，以便我们的客户可以在构建后对其进行签名？

问题是如果我们不想向我们的客户提供源代码（因为这不是可交付成果的一部分）并且我们的客户不想将证书从他们手中拿走，那么如何创建最终的企业 IPA？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:12:04.430

我不这么认为，创建 IPA 文件需要使用证书创建“代码签名身份”女巫。

# c# - 非泛型 IEnumerable 到字符串

> ID：10452968
> 
> 赞同：3
> 
> 时间：2012-05-04T16:50:51.770
> 
> 标签：c#

**关于从通用**IEnumerable 到字符串的 转换有很多问题/答案。

但我需要从**非通用** *IEnumerable*转换为*string*。结果字符串的形式应该是
`element1.ToString() + ", " + element2.ToString() + ", " + element3.ToString() + ...`
比使用*StringBuilder并通过**MoveNext()*循环遍历元素有更短的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T16:52:26.083

您仍然可以使用 LINQ：

```
String.Join(", ", thingy.Cast<object>()); 
```

# php - 使用 MySQL，不选择存在于不同表中的用户的最佳方法是什么？

> ID：10452975
> 
> 赞同：3
> 
> 时间：2012-05-04T16:51:13.577
> 
> 标签：php, mysql, join, combobox, subquery

我的问题如下：我有两张桌子；人员和团队，我想选择所有 role_id = 2 的人，这些人存在于团队中`persons`但**不**存在于团队中。

表存储一次只能领导**一个团队的***团队负责*`teams`人的哈希值。在创建团队时，我只想向管理员展示当前没有领导团队的人，基本上排除所有已经是任何特定团队领导的人。

 ***我的结构如下：

```
mysql> desc persons;
+-------------+-------------+------+-----+---------+-------+
| Field       | Type        | Null | Key | Default | Extra |
+------------+-------------+------+-----+---------+-------+
| firstname   | varchar(9)  | YES  |     | NULL    |       |
| lastname    | varchar(10) | YES  |     | NULL    |       |
| role_id     | int(2)      | YES  |     | NULL    |       |
| hash        | varchar(32) | NO   | UNI | NULL    |       |
+-------------+-------------+------+-----+---------+-------+

mysql> desc teams;
+--------+-------------+------+-----+---------+----------------+
| Field  | Type        | Null | Key | Default | Extra          |
+--------+-------------+------+-----+---------+----------------+
| id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| name   | varchar(20) | YES  |     | NULL    |                |
| leader | varchar(32) | NO   |     | NULL    |                |
+--------+-------------+------+-----+---------+----------------+
3 rows in set (0.00 sec) 
```

我当前的SQL如下：

```
SELECT CONCAT(  `persons`.`firstname` ," ",  `persons`.`lastname` ) AS  `manager`,
`hash` FROM  `persons`
WHERE  `persons`.`role_id` =2 AND  `persons`.`hash` != 
(SELECT  `leader` FROM  `teams` ); 
```

后一个 SQL 查询在表`teams`只有 1 条记录时有效，但只要我添加另一条记录，MySQL 就会抱怨子查询产生两条记录。

在**WHERE**子句中，我还尝试了以下方法，而不是子查询：

```
 WHERE `persons`.`role_id` = 2 AND `persons`.`hash` != `teams`.`leader` 
```

但随后它抱怨`leader`表中不存在的列`teams`

我也在考虑使用某种*逆向*左连接，但我一直无法提出最佳解决方案。

任何帮助是极大的赞赏！谢谢

**PS**：如果您想要类似于我的场景，这里是 SQL 语句：

```
DROP TABLE IF EXISTS `teams`;
CREATE TABLE IF NOT EXISTS `teams` (
   `id` int(11) NOT NULL AUTO_INCREMENT,
   `name` varchar(20) DEFAULT NULL,
   `leader` varchar(32) NOT NULL,
   PRIMARY KEY (`id`)
 ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=3 ;

 INSERT INTO `teams` (`id`, `name`, `leader`) VALUES
 (1, 'Team 1', '406a3f5892e0fcb22bfc81ae023ce252'),
 (2, 'Team 2', 'd0ca479152996c8cabd89151fe844e63');

DROP TABLE IF EXISTS `persons`;
CREATE TABLE IF NOT EXISTS `persons` (
  `firstname` varchar(9) DEFAULT NULL,
  `lastname` varchar(10) DEFAULT NULL,
  `role_id` int(2) DEFAULT NULL,
  `hash` varchar(32) NOT NULL,
  PRIMARY KEY `hash` (`hash`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `persons` (`firstname`, `lastname`, `role_id`,`hash`) VALUES
('John', 'Doe', 2, '406a3f5892e0fcb22bfc81ae023ce252'),
('Jane', 'Doe', 2, 'd0ca479152996c8cabd89151fe844e63'),
('List', 'Me', 2, 'fbde2c4eeee7f455b655fe4805cfe66a'),
('List', 'Me Too', 2, '6dee2c4efae7f452b655abb805cfe66a'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:08:45.487

您不需要子查询来执行此操作。LEFT JOIN 就足够了：

```
SELECT
   CONCAT (p.firstname, " ", p.lastname) AS manager
   , p.hash
FROM  persons p
   LEFT JOIN teams t ON p.hash = t.leader
WHERE
   p.role_id = 2
   AND t.id IS NULL -- the trick 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T17:00:11.033

我想你想要一个 IN 子句。

```
SELECT CONCAT(  `persons`.`firstname` ," ",  `persons`.`lastname` ) AS  `manager`,
`hash` FROM  `persons`
WHERE  `persons`.`role_id` =2 AND  `persons`.`hash` NOT IN 
(SELECT  `leader` FROM  `teams` ); 
```

正如所指出的，这不是最优的。您可能想改为加入。***

# linq - LINQ 查询返回匹配所有子查询条件的所有记录

> ID：10452976
> 
> 赞同：1
> 
> 时间：2012-05-04T16:51:16.107
> 
> 标签：linq, entity-framework

这可能很简单，我患有“星期五下午综合症”，但我在构建 linq 表达式时遇到了一些麻烦。

我有以下实体 - Rooms、RoomsPeople 和 PersonType。

我正在尝试归还包含教师和学生（人的类型）的所有房间

所以我的查询是沿着

```
context.Rooms.Where(x => x.RoomsPeople.Any(b => (((b.PersonTypeID== 1) && (b.PersonTypeID== 2)) && (b.PersonTypeID== 3)))).ToList<Rooms>(); 
```

从字面上看，它似乎应该做我想做的事......“返回 RoomsPeople 包含任何 personTypes 的房间”

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T17:11:57.463

这应该做你想要的：

```
context.Rooms
    .Where(x => 
        x.RoomsPeople.Any(b => b.PersonTypeID == 1) &&
        x.RoomsPeople.Any(b => b.PersonTypeID == 2) &&
        x.RoomsPeople.Any(b => b.PersonTypeID == 3)
    )
    .ToList<Rooms>(); 
```

如果您查看原始代码，您会注意到您有以下谓词：

```
(((b.PersonTypeID== 1) && (b.PersonTypeID== 2)) && (b.PersonTypeID== 3))) 
```

首先，这可以简化为：

```
b.PersonTypeID == 1 && b.PersonTypeID == 2 && b.PersonTypeID == 3 
```

现在应该清楚为什么您的代码不起作用了。单个`PersonTypeID`不可能同时是多个不同的值（1、2*和*3）

因此，解决方案是`.Any`多次使用谓词——对于您要检查的每个人类型一次。

# java - 找出慢速 JSP 的根本原因的最佳技术是什么？

> ID：10452979
> 
> 赞同：4
> 
> 时间：2012-05-04T16:51:41.907
> 
> 标签：java, jsp, jakarta-ee

我可以使用哪些技术来修改一组 JSP 以测量 JSP 的整体性能，然后进一步缩小和确定 JSP 中花费最多时间的特定区域？

我目前的方法是简单地使用 scriptlet 和 System.currentTimeMillis()：

JSP 顶部

```
<%
StringBuilder result = new StringBuilder();
long startTime = System.currentTimeMillis();
%> 
```

... JSP 代码在这里

```
<%
long duration = System.currentTimeMillis() - startTime;
if (duration > 100L) { //over  100 ms
    result.append("JSP page took "+duration+"ms");
}
%>
<!-- <%=result%> --> 
```

但是这样做的问题是：

*   使用此性能代码污染的 JSP，
*   在多个 JSP 中复制粘贴的代码，
*   当 JSP 包含在 <%@ include ... %> 中时效果不佳，因为结果变量已在多个 JSP 中定义。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:54:36.773

#1 - 黄金法则 - 不要在 JSP 中添加任何逻辑。编写自定义标签。将任何逻辑提取到java代码中。JSP 是表示层。

#2 - 在分析器中运行 servlet 容器（如 jvisualvm 甚至更好：yourkit）。这将告诉您确切的时间花在哪里

注意 - 现在你不需要“在分析器中运行应用程序” - 如果使用 JDK6+，你可以弹出打开 yourkit 或 jvisualvm（JDK 附带）并在它运行时神奇地附加。这真的很方便。

# php - 缓慢的教义发现

> ID：10452984
> 
> 赞同：2
> 
> 时间：2012-05-04T16:52:08.440
> 
> 标签：php, mysql, doctrine, doctrine-orm

我试图弄清楚为什么我的一个学说发现运行如此缓慢。我真的不知道从哪里开始，所以请多多包涵。

我做了一个非常基本的查找来获取用户对象。这个发现大约需要 160 毫秒。当我通过 phpmyadmin 运行查询时，需要 0.7 毫秒。

```
$this->em->find('Entities\User', $userId) 
```

我已经尝试将 skip-name-resolve 添加到 mysql 的 my.cnf 中。用户表中的 id 字段被索引。我真的不知道还能尝试什么。让我知道我是否可以提供其他信息。

下面是实体文件：

```
namespace Entities;
use Doctrine\Common\Collections\ArrayCollection;
use Doctrine\ORM\EntityRepository;

/** @Entity(repositoryClass = "Entities\UserRepository")
  * @Table(name="user") 
  */
class User extends \Company_Resource_AbstractEntity
{
    /** @Id @Column(type="integer") @GeneratedValue */
    protected $id;
    /** @Column(type="string") */
    protected $name;
    /** @Column(type="string") */
    protected $password;
    /** @Column(type="string") */
    protected $email;
    /** @Column(type="string") */
    protected $first_name;
    /** @Column(type="string") */
    protected $last_name;
    /** @Column(type="integer") */
    protected $password_reset;
    /** @Column(type="string") */
    protected $salt;
    /** @Column(type="integer") */
    protected $active;
    /** @Column(type="string") */
    protected $cookie_hash;

    /**
    * @ManyToOne(targetEntity="Company" , inversedBy="user")
    */
    protected $company;

    /**
    * @ManyToOne(targetEntity="Privilege" , inversedBy="user")
    */
    protected $privilege;

    /**
    * @OneToMany(targetEntity="CompanySubscription" , mappedBy="user")
    */
    protected $subscription;

    /**
    * @OneToMany(targetEntity="EquipmentEvent" , mappedBy="check_in_user")
    */
    protected $check_in;

    /**
    * @OneToMany(targetEntity="EquipmentEvent" , mappedBy="check_out_user")
    */
    protected $check_out;

    /**
    * @OneToMany(targetEntity="GroupEvent" , mappedBy="check_in_user")
    */
    protected $check_in_group;

    /**
    * @OneToMany(targetEntity="GroupEvent" , mappedBy="check_out_user")
    */
    protected $check_out_group;

    /**
    * @OneToMany(targetEntity="Maintenance" , mappedBy="submit_user")
    */
    protected $maintenance_submit;

    /**
    * @OneToMany(targetEntity="Maintenance" , mappedBy="completed_user")
    */
    protected $maintenance_complete;

    /**
    * @OneToMany(targetEntity="UserLogin" , mappedBy="user")
    */
    protected $login;
} 
```

抽象实体：

```
use \Doctrine\Common\Collections\ArrayCollection;

abstract class Company_Resource_AbstractEntity implements ArrayAccess
{
    public function offsetExists($offset)
    {
        return property_exists($this, $offset);
    }

    // The get/set functions should check to see if an appropriately named function exists before just returning the
    // property.  This way classes can control how data is returned from the object more completely.
    public function offsetGet($offset)
    {
        $property = new Zend_Filter_Word_UnderscoreToCamelCase();
        $method = 'get'. $property->filter($offset);
        return $this->{$method}();
    }

    public function offsetSet($offset, $value)
    {
        $property = new Zend_Filter_Word_UnderscoreToCamelCase();
        $method = 'set'. $property->filter($offset);
        return $this->{$method}($value);
    }

    public function offsetUnset($offset)
    {
        // can't do this
    }

    /*==-====-====-====-====-====-====-====-====-====-====-==*/

    /*
     * Provides magic method access for getFieldName() and setFieldName()
     * where field_name is a simple field and not a relation
     * A special getData implementation returns all of the current object vars
     */
    public function __call($method, $arguments)
    {
        preg_match('@^([a-z]+)(.*)@', $method, $matches);
        $action = $matches[1];
        $property = $matches[2];
        $underscore = new Zend_Filter_Word_CamelCaseToUnderscore();
        $offset = strtolower($underscore->filter($property));
        if ($action == 'get')
        {
            if ($property == 'Data')
                return get_object_vars($this);
            if ($this->offsetExists($offset))
                return $this->{$offset};
            else
                throw new Zend_Exception(sprintf("'%s' does not have property '%s'", get_class($this), $offset));
        }
        else if ($action == 'set')
        {
            if ($this->offsetExists($offset))
                return $this->{$offset} = $arguments[0];
            else
                throw new Zend_Exception(sprintf("'%s' does not have property '%s'", get_class($this), $offset));
        }
        else
            throw new Zend_Exception(sprintf("'%s' does not have method '%s'", get_class($this), $method));
    }
} 
```

查找产生的 SQL：

```
SELECT t0.id AS id1, 
t0.name AS name2, 
t0.password AS password3, 
t0.email AS email4, 
t0.first_name AS first_name5, 
t0.last_name AS last_name6, 
t0.password_reset AS password_reset7, 
t0.salt AS salt8, 
t0.active AS active9, 
t0.cookie_hash AS cookie_hash10, 
t0.company_id AS company_id11, 
t0.privilege_id AS privilege_id12 
FROM user t0 WHERE t0.id = ? 
```

任何人都看到任何错误或知道在哪里可以进一步解决这个问题？

使用教义 2.2.2。

当我使用 phpmyadmin 运行该查询时得到的解释：http: [//i.imgur.com/wWeGO.png](http://i.imgur.com/wWeGO.png)

表架构：http: [//i.imgur.com/BQsRX.jpg](http://i.imgur.com/BQsRX.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:04:20.763

我相信我的设置的问题是文件中的实际行数。教义每次都在阅读这些内容。我为元缓存启用了 APC，第一次加载后加载时间显着减少。如果没有查询或结果缓存，该查询实际上只需要大约 6 毫秒，这是我一直以来的目标。希望我能早点尝试。

# facebook - 喜欢网址后，Facebook Like 按钮丢失

> ID：10452986
> 
> 赞同：2
> 
> 时间：2012-05-04T16:52:09.520
> 
> 标签：facebook

我目前正在使用 Adthis 中的浮动垂直条来共享 URL。

起初，一切似乎都是正确的，但是当我喜欢使用 Facebook 点赞按钮的页面并重新加载页面时，点赞按钮似乎丢失了。那个空间里没有like按钮。

当我进入一个我不喜欢的新页面时，按钮就会出现。仅当我喜欢该页面或 url 时才会出现问题。

谁可以帮我这个事。

# iphone - 推送视图不从基于单个视图的应用程序推送 UIViewController

> ID：10452991
> 
> 赞同：2
> 
> 时间：2012-05-04T16:52:22.910
> 
> 标签：iphone, uiviewcontroller, uinavigationcontroller

我选择项目模板作为“单一视图”。我试图在按钮单击上推送详细视图（UIViewController）。按钮操作正在正确触发并执行代码 [self navigatingController] 推送......我的代码是作为：

```
MapDetailViewController *mapDetailViewController = [[MapDetailViewController alloc] init];
    [self.navigationController pushViewController:mapDetailViewController animated:YES];
    NSLog(@"self.navigation is as %@",self.navigationController); 
```

self.navigationController 为空。所以我尝试分配初始化导航控制器类型的局部变量，并且该变量能够为非空（一些十六进制值），但我仍然无法推送 mapDetailView。
我在想的是我选择了错误的模板（基于视图）。我应该选择基于导航的（主细节）。下面自动生成的代码是应用程序委托的：

```
self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
// Override point for customization after application launch.
self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES; 
```

导航控制器是否应该在此处进行一些更改？
有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T16:59:02.687

您的问题是您甚至没有导航控制器来进行推送。将您的代码更改为：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    self.viewController = [[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil] autorelease];
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:self.viewController];
    self.window.rootViewController = nav;
    [self.window makeKeyAndVisible];
    return YES; 
} 
```

# php - php : 在 URL 中检索数字

> ID：10452993
> 
> 赞同：0
> 
> 时间：2012-05-04T16:52:38.020
> 
> 标签：php, regex

我有以下类型的网址

```
http://domain.com/1/index.php

http://domain.com/2/index.php

http://domain.com/3/index.php

http://domain.com/4/index.php 
```

我只需要从 url 检索数字。

例如，

当我访问[http://domain.com/1/index.php](http://domain.com/1/index.php)时，它必须返回 1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T16:57:00.707

看看[`parse_url`](http://php.net/manual/en/function.parse-url.php)。

```
$url = parse_url('http://domain.com/1/index.php'); 
```

编辑：查看`$_SERVER['REQUEST_URI']`, 以获取当前 URL。使用它而不是`$url['path']`.

然后你可以拆分`$url['path']`，`/`并获得第一个元素。

```
// use trim to remove the starting slash in 'path'
$path = explode('/', trim($url['path'], '/')); 

$id = $path[0]; // 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T16:57:18.423

鉴于提供的信息，这将满足您的要求......这不是我所说的强大解决方案：

```
$url = $_SERVER['PATH_INFO']; // e.g.: "http://domain.com/1/index.php";
$pieces = explode("/", $url);
$num = $pieces[3]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:57:00.230

*   用正斜杠 ( `explode('/', $_SERVER['REQUEST_PATH']);`)分割服务器路径
*   从头开始删除空条目
*   取第一个元素
*   确保它是一个整数（`intval()`或简单的`(int)`强制转换）。

无需为此使用正则表达式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T17:09:36.530

您使用 preg_match() 匹配域并获取第一个段。

```
$domain = http://www.domain.com/1/test.html

preg_match("/http:\/\/.*\/(.*)\/.*/", "http://www.domain.com/1/test.html");

echo $matches[1];  // returns the number 1 in this example. 
```

# java - 为什么无法将 Runnable 嵌入到线程中？

> ID：10452998
> 
> 赞同：4
> 
> 时间：2012-05-04T16:52:49.910
> 
> 标签：java, multithreading, concurrency, runnable

据我从[`java.lang.Thread`](http://java.sun.com/j2se/1.5.0/docs/api/java/lang/Thread.html)文档以及stackoverflow上发布的其他问题（例如“[如何通过线程访问Runnable对象？](https://stackoverflow.com/questions/2300579/how-to-access-a-runnable-object-by-thread) ”和“[获取Runnable](https://stackoverflow.com/questions/8021809/get-current-instance-of-runnable)的当前实例”）了解，无法获得`Runnable`嵌入对象的引用在一个`Thread`。

具有这种可能性的一个场景是在实现一个方法时，它的签名不能被修改，因为我们正在覆盖另一个类或接口中定义的方法，并且需要根据`Runnable`嵌入的类型执行不同的操作当前`Thread`.

`getRunnable`例如，如果我们在类中调用了一个方法，`Thread`我们可以这样做：

```
if (Thread.currentThread().getRunnable() instanceof Type1) {
  // do something...
} else {
  // do something else...
} 
```

这在我们希望确保方法中包含的操作仅由某些线程执行而不由其他线程执行的情况下也很有用。

所以我想知道，Java 开发人员决定不允许`Runnable`从 a 获取实例是否有特定原因`Thread`，或者它是否是值得通知的缺失功能？如果您认为该选择没有理由，但不值得将其通知为缺少功能，那么您会在上述场景中使用什么策略？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T17:02:00.543

> 所以我想知道，Java 开发人员决定不允许从 Thread 获取 Runnable 实例是否有特定原因

这可能不是一个要求。它`Runnable`本身应该能够识别自己的类，因此它需要获取该信息的想法很奇怪。它也可以是一种保护，以便其他线程无法访问在另一个线程中运行的类。

如果您需要从应用程序的其他部分访问电流`Runnable`，那么我建议您使用`ThreadLocal<Runnable>`. 在您的`run()`方法中，您可以设置它，然后在其他类中检索它。但是，您需要将其`ThreadLocal`放在全局可访问的地方。

您还可以处理当前堆栈跟踪以找出封闭`Runnable`类，这更像是一种黑客攻击，但它会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T17:09:17.157

您可以采取几种方法来解决此问题：

保留您`Runnable`的 s 到`Thread`正在执行它们的 s 的映射（使用 a`Map<Thread, Runnable>`或使用 a `ThreadLocal<Runnable>`）
使用反射`Runnable`从以下访问`Thread`：

```
private static final Field target;
static {
    Field f = null;
    try {
        f = Thread.class.getDeclaredField("target");
        f.setAccessible(true);
    } catch (NoSuchFieldException e) {
        // might happen in a different version of Java (works in Java 7)
        e.printStackTrace();
    }
    target = f;
}

public static Runnable getTarget(Thread t) {
    try {
        return (Runnable) target.get(t);
    } catch (IllegalAccessException e) {
        // shouldn't happen, we already made the field accessible when we created it
        e.printStackTrace();
        }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T09:47:27.253

有一种间接方法可能会有所帮助，您可以获得堆栈跟踪。

```
StackTraceElement[] stackTraceElement = thread.getStackTrace();
for(StackTraceElement e :stackTraceElement){
   System.out.println("Trace "+e.getClassName());
} 
```

输出 ：

跟踪 java.lang.Thread

**跟踪 com.emc.multithreading.RunnableDemo**

跟踪 java.lang.Thread