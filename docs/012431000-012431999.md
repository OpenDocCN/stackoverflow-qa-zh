# StackOverflow 问答 12431000-12431999

# c# - 在与数据库不同的表中显示当前用户的详细信息

> ID：12431001
> 
> 赞同：1
> 
> 时间：2012-09-14T19:44:19.453
> 
> 标签：c#, asp.net, sql

在我的数据库中，有两个表。两者都有一个用户名列。`Table A`是存储用户信息，`Table B`是存储用户的预订。在我的页面中，将有一个下拉菜单，`BookingID`用于检索当前登录用户的 s。应该如何找回它们？

为了帮助您理解，这应该让您了解我的意思。

用户 X 登录， `If User X(Table A) = User X(Table B)` 然后 dropdown1 显示`BookingID`来自 的用户`Table B`X。

很抱歉我没有提供任何代码，因为我真的不知道该怎么做。欢迎任何答案。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:52:41.873

这将列出`BookingID`两个表中的所有用户：

```
select b.BookingID 
from tableA a
inner join tableB b on a.username = b.username 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:52:42.830

使用 SQL

```
SELECT
   //TABLE_A.required_cols
   //TABLE_B.required_cols
FROM
   TABLE_A
JOIN TABLE_B ON TABLE_A.USER_ID = TABLE_B.USER_ID 
```

**注意：：**这里我假设两个表都有一个名为`USER_ID`相同用户匹配的列，比如 X

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T19:59:59.150

创建一个数据表，然后填充它，创建表如下：

```
Private Function CreateDataSource() As DataTable
    'creates the columns for the datatable 
    Dim dt As New DataTable 'create new datatable

    'add appropriate columns to the table
    Dim colImage As New DataColumn("Field1", GetType(Boolean))
    colImage.DefaultValue = bShowExtraInfo
    dt.Columns.Add(colImage)
    dt.Columns.Add("Field2", GetType(String))

    Return dt 'return the table
End Function 
```

然后在您的代码中使用它，如下所示：

```
Dim dt As DataTable = CreateDataSource() 'create the data table
    Dim dr As DataRow
        For Each x In y 'cycle through x and add to table
                dr("Field1") = tableAvalue
                dr("Field2") = tableBvalue
                dt.Rows.Add(dr)
            End If
        Next
    gvEverything.DataSource = dt
    gvEverything.DataBind() 
```

# image - 在 MATLAB 中绘制极坐标图像

> ID：12431005
> 
> 赞同：3
> 
> 时间：2012-09-14T19:44:41.680
> 
> 标签：image, matlab, plot, polar-coordinates

我有 1024 X 256 极坐标数据（行 - 半径，列角度），我需要将其绘制为图像。我从文件交换处获得了一个 m 文件，可以执行此操作[（单击此处）](http://www.mathworks.com/matlabcentral/fileexchange/17933)。但是，对于大图像，它确实很慢。我相信有一种快速的方法可以使用我正在努力使用的 surf 功能来做到这一点。（见下面的代码）

```
data = data; % load any polar data

depth = 4.5; %imaging depth in mm

offset = 0.5;

theta = [(0:2*pi/size(data,2):2*pi-1/size(data,2))]*180/pi;

rho = [0:(depth-offset)/size(data,1):(depth-offset)-1/size(data,1)] + offset;

[THETA,RR] = meshgrid(theta,rho);

[A,B] = pol2cart(THETA,RR);

figure

surf(A,B,data,'edgecolor','none'),

view(0,90)

xlabel('x [mm]')

ylabel('y [mm]')

axis tight 
```

结果似乎不正确。

知道我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:41:13.327

是的，你的问题很简单：

```
pol2cart Transform polar to Cartesian coordinates.
    [X,Y] = pol2cart(TH,R) transforms corresponding elements of data
    stored in polar coordinates (angle TH, radius R) to Cartesian
    coordinates X,Y.  The arrays TH and R must the same size (or
    either can be scalar).  ***TH must be in radians***. 
```

解决方案：**删除 180/pi**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:43:03.267

M文件的方法是正确的。但你是对的，它的实施非常缓慢。您缺少的部分是将数据本身从极坐标转换为矩形，这是困难的部分。目前，您正在转换要绘制的坐标，但随后将极坐标数据绘制为笛卡尔数据（将笛卡尔坐标应用于数据）。

你应该采取正确和快速的方法是这样的：

1.  在您要绘制的区域上生成一个笛卡尔网格 (meshgrid)，每个目标像素一个条目。
2.  将您的 x/y 笛卡尔变量转换为极坐标
3.  将极坐标缩放到极坐标图像的索引（这考虑到矩阵大小和成像深度）
4.  使用极坐标索引从极坐标图像中插入值，使用 interp2 （这就是使缓慢过程快速的原因）
5.  生成的图像是笛卡尔图像，像素位置位于原始 x/y 网格点

这个过程有意义吗？在图像处理中，通常从目标空间（即您需要整个像素的位置）开始，然后向后移动到源图像中的小数像素偏移，然后进行插值。

# ios - tableView:numberOfRowsInSection:]: 无法识别的选择器发送到实例

> ID：12431013
> 
> 赞同：33
> 
> 时间：2012-09-14T19:45:18.093
> 
> 标签：ios, xcode, uitableview, delegates

我有一个奇怪的问题。我收到此错误：

```
 -[FourSquareCheckInViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x7aecc0
2012-09-14 19:18:39.039 [5869:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[FourSquareCheckInViewController tableView:numberOfRowsInSection:]: unrecognized selector sent to instance 0x7aecc0'
*** First throw call stack:
(0x3545e88f 0x37805259 0x35461a9b 0x35460a83 0x353bb650 0x32ee3693 0x32ee49ed 0x32ee493f 0x32ee451b 0x32ef17df 0x32ef16af 0x32e95f37 0x353bd1fb 0x3228daa5 0x3228d6bd 0x32291843 0x3229157f 0x322894b9 0x35432b1b 0x35430d57 0x354310b1 0x353b44a5 0x353b436d 0x37050439 0x32ec0cd5 0xb7ebb 0xb7e60)
terminate called throwing an exception(lldb) 
```

好的，所以我确保将 ViewController 设置为 dataSource 和 Delegate。我已将 UITableViewDelegate 和 UITableViewDataSource 添加到 <> 事物中。

我在 viewDidLoad 方法中设置了 tableView.delegate = self 和 tableView.dataSource = self。

这是我对 viewDidLoad 和 viewDidAppear 方法的实现：

```
- (void)viewWillAppear:(BOOL)animated{
    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyKilometer; // 1km
    [locationManager startUpdatingLocation];
    locationLat = [locationManager location].coordinate.latitude;
    locationLng = [locationManager location].coordinate.longitude;
    [locationManager stopUpdatingLocation];

    // 1
    CLLocationCoordinate2D zoomLocation;
    zoomLocation.latitude = locationLat;
    zoomLocation.longitude= locationLng;
    // 2
    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 0.5*METERS_PER_MILE, 0.5*METERS_PER_MILE);
    // 3
    MKCoordinateRegion adjustedRegion = [_mapView regionThatFits:viewRegion];                
    // 4
    [_mapView setRegion:adjustedRegion animated:YES]; 
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    _tableView.delegate = self;
    _tableView.dataSource = self;

    // Do any additional setup after loading the view.
    // 1
    MKCoordinateRegion mapRegion = [_mapView region];
    CLLocationCoordinate2D centerLocation = mapRegion.center;

    locationManager = [[CLLocationManager alloc] init];
    locationManager.delegate = self;
    locationManager.distanceFilter = kCLDistanceFilterNone; // whenever we move
    locationManager.desiredAccuracy = kCLLocationAccuracyKilometer; // 1km
    [locationManager startUpdatingLocation];
    locationLat = [locationManager location].coordinate.latitude;
    locationLng = [locationManager location].coordinate.longitude;
    [locationManager stopUpdatingLocation];

} 
```

这是我的 numberOfRowsInSection 方法主体：

```
- (NSInteger)numberOfRowsInSection:(NSInteger)section{
    return 5;
} 
```

这是视图控制器的头文件：

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

#define METERS_PER_MILE 1609.344

@interface FourSquareCheckInViewController : UIViewController <UITableViewDelegate, UITableViewDataSource, CLLocationManagerDelegate, MKMapViewDelegate>{

}

@property (weak, nonatomic) IBOutlet MKMapView *_mapView;

- (NSInteger)numberOfRowsInSection:(NSInteger)section;
@property (weak, nonatomic) IBOutlet UITableView *_tableView;

@end 
```

这是一个屏幕截图，显示了我的 tableView 是如何连接的：

![在此处输入图像描述](../Images/261e082309cabbe74bbe7140763fb134.png)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-14T20:15:41.243

阅读错误消息告诉您的内容！

您已实施`numberOfRowsInSection:`. 所以呢？那是错误的方法。这是无关紧要的。它永远不会被调用。

您需要实现的方法称为`tableView:numberOfRowsInSection:`. 那是完全不同的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-11-18T01:18:51.327

![我将委托和数据源连接到 TableView](../Images/52cd26977fc97a1718b358138ec01fa8.png)

如果单击视图，它应该会在 INSPECTOR 中显示上述连接。如果您还没有连接 ViewController，您将收到错误消息：

> 'NSInvalidArgumentException'，原因：'-[UIView tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例

我如何停止错误是你

1.  按下 ViewController 以选择它
2.  在右侧的*连接检查*器中查找**引用插座**
**   *从新参考出口*的圆圈拖动到视图*   当您释放鼠标时，将显示一个小弹出窗口 - 选择*数据源**   重复第 3 步，这次选择*委托**

 *完成后，它应该如下图所示！

![引用出口数据源和委托连接到视图](../Images/9b03fe4207b5f4abaf1b8ae09ec60268.png)

这为我停止了上述错误。我希望这可以帮助别人。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2018-10-17T08:39:21.340

检查您的类文件中是否定义了 UITableViewDelegate、UITableViewDataSource：

```
class ClassName: UIViewController, UITableViewDelegate, UITableViewDataSource  
{

} 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-06-12T20:07:45.600

如果您已经在视图控制器中正确连接了所有内容，但您忘记在情节提要中分配自定义视图控制器类，您也会看到此错误：

[![在身份检查器中输入您的自定义视图控制器](../Images/8457b16fc9e64c9631440f30ff27b859.png)](https://i.stack.imgur.com/G3j80.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-04-28T14:17:36.040

**我认为展示这个答案很重要。**这似乎很愚蠢，可能是这样，但我失去了很长一段时间，直到我看到错误。

它发生在我创建一个新视图并复制部分代码的情况下。

我创建了新视图：

```
class THIRD: UIViewController {

[...]

} 
```

我开始复制代码：

```
func numberOfSections(in tableView: UITableView) -> Int {
...
}

func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
...
} 
```

等等。

然后，消息错误：

**[Fonts.THIRD tableView:numberOfRowsInSection:]：无法识别的选择器发送到实例 0x10204b200**

我一次又一次地回顾了故事板。我一次又一次地检查代码。我失去了美好的时光。

**终于明白了！！！**

我忘了声明：

```
class THIRD: UIViewController, UITableViewDelegate, UITableViewDataSource { 
```

也许错误可能是，不要声明**UITableViewDelegate**和**UITableViewDataSource**协议

记住它，不要忘记它！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-07-29T21:18:32.910

这很简单，我遇到了类似的问题。我在我的 ViewController 中实现没有 Storyboard 的 TableView，它有`UIViewController`两个协议的子类：`<UITableViewDataSource, UITableViewDelegate>`

但是，如果您查看`UITableViewDataSource`有两种方法`@required`，您需要在代码中实现这些方法：

`- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section;`

`- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath;`

因此，您不需要实现它们`UITableViewDelegate`中的所有其他方法。`@optional`

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-09-17T12:42:11.220

如果您已经在视图控制器中正确连接了所有内容，但您忘记扩展 UITableViewDelegate、UITableViewDataSource，您也会看到此错误。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-14T19:50:23.020

```
- (NSInteger)numberOfRowsInSection:(NSInteger)section; 
```

您没有实现 UITableViewDataSource 方法。删除声明，它不会再崩溃了。或者为它提供一个方法体。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-07T20:37:33.350

我发现这个错误的另一个原因（即使符合`UITableViewDataSource`！）是在`tableView.tableHeaderView`设置`tableView.dataSource`.

```
// Header config
self.tableView.tableHeaderView = header; // CRASH!! Triggers table view update and thus calls unknown selector.
self.tableView.dataSource = self; 
```

`tableHeaderView`真正简单的解决方法是在设置（或）之前先设置数据源`tableFooterView`：

```
self.tableView.dataSource = self;
// Header config
self.tableView.tableHeaderView = header; // Runtime can now find selector even though it is already defined. 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-01T15:24:57.053

如果您已正确设置所有内容，但您仍然会收到此错误。您需要为您的自定义类分配一个控制器[![在此处输入图像描述](../Images/66190206fb5b8d75874c321f026c7d6f.png)](https://i.stack.imgur.com/fYKxi.png)*

# infovis - JavaScript InfoVis Toolkit 使用 AJAX 从外部文件加载 JSON 时出错

> ID：12431021
> 
> 赞同：0
> 
> 时间：2012-09-14T19:46:18.323
> 
> 标签：infovis

我的应用程序中有下面显示的代码片段。我想要完成的是：只要单击复选框，条形图就应该更新。

**在我的错误控制台中，我得到：**

“错误：TypeError：值未定义源文件：hit.js 行：11017。

我尝试直接在函数中分配 JSON (var json = ...)，它可以正常工作，但我无法通过从文件中加载 JSON 来使其工作。我究竟做错了什么？

```
 $(':checkbox').click(function () {
   init();

   function init()
   {
       var request = new XMLHttpRequest( );
       request.open("GET", "GetGenes.php", false);
       request.send(null);
       var json = request.response;
       console.log(request.response);
    var barChart = new $jit.BarChart({
          //id of the visualization container
          injectInto: 'infovis',
          //whether to add animations
          animate: true,
          //horizontal or vertical barcharts
          orientation: 'horizontal',
          //bars separation
          barsOffset: 0.5,
          //visualization offset
          Margin: {
            top: 5,
            left: 5,
            right: 5,
            bottom: 5
          },
          //labels offset position
          labelOffset:5,
          //bars style
          type:'stacked',
          //whether to show the aggregation of the values
          showAggregates:true,
          //whether to show the labels for the bars
          showLabels:true,
          //label styles
          Label: {
            type: 'HTML', //Native or HTML
            size: 9,
            family: 'Arial',
            color: 'black'
          },
          //tooltip options
          Tips: {
            enable: true,
            onShow: function(tip, elem) {
              tip.innerHTML = "<b>" + elem.name + "</b>: " + elem.value;
            }
          }
        });

         barChart.loadJSON(json);
   }

}) 
```

基因.php 包含：

```
echo "{'label': ['label 1', 'label 2', 'label 3', 'label 4'],'values': [{'label': 'date A','values': [20, 40, 15, 5]}, {'label': 'date B','values': [30, 10, 45, 10]}, {'label': 'date E','values': [38, 20, 35, 17]}, {'label': 'date F','values': [58, 10, 35, 32]}, {'label''date D','values': [55, 60, 34, 38]}, {'label': 'date C','values': [26, 40, 25, 40]}]};"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:51:17.573

您返回的 JSON 中有一个错误：

> '标签''日期 D'

那里缺少一个冒号。不知道这是否能解决任何问题。

# xsd - XML Schema中组和序列之间的区别？

> ID：12431031
> 
> 赞同：27
> 
> 时间：2012-09-14T19:47:25.123
> 
> 标签：xsd

XML Schema 中的 an[`xs:group`](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#element-group)和 an 有什么区别？[`xs:sequence`](http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/structures.html#element-sequence)您什么时候使用其中一种？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-16T22:36:19.493

`xs:sequence``xs:choice`-与- 一起`xs:all`用于定义目标 XML 中 XML 元素的有效序列。例如，此 XML 的架构：

```
<mainElement>
  <firstSubElement/>
  <subElementA/>
  <subElementB/>
</mainElement> 
```

是这样的：

```
<xs:element name='mainElement'>
  <xs:complexType>
    <xs:sequence>
      <xs:element name="firstSubElement"/>
      <xs:element name="subElementA"/>
      <xs:element name="subElementB"/>
    </xs:sequence>
  </xs:complexType>
</xs:element> 
```

`xs:group`用于定义一组命名的 XML 元素，遵循某些规则，然后可以在架构的不同部分引用。例如，如果 XML 是：

```
<root>

  <mainElementA>
    <firstSubElement/>
    <subElementA/>
    <subElementB/>
  </mainElementA>

  <mainElementB>
    <otherSubElement/>
    <subElementA/>
    <subElementB/>
  </mainElementB>

</root> 
```

您可以为公共子元素定义一个组：

```
<xs:group name="subElements">
  <xs:sequence>
    <xs:element name="subElementA"/>
    <xs:element name="subElementB"/>
  </xs:sequence>
</xs:group> 
```

然后使用它：

```
 <xs:element name="mainElementA">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="firstSubElement"/>
        <xs:group ref="subElements"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>

  <xs:element name="mainElementB">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="otherSubElement"/>
        <xs:group ref="subElements"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element> 
```

# sql - 删除重复数据而不删除多次加载的数据

> ID：12431033
> 
> 赞同：0
> 
> 时间：2012-09-14T19:47:27.920
> 
> 标签：sql, db2

我错误地将重复文件加载到数据库表中（IBM DB2 v9.7）。我需要删除重复记录而不删除有效数据。

最初，我认为`HAVING count(*) > 1`可以解决我的问题，但这不起作用。我们的供应商生产具有修改规格的零件，因此一个文件可能会多次加载有效数据。

我知道几件事：

1.  我的重复记录的日期范围：“2012-08-27”和“2012-09-02”之间
2.  用于验证数据的属性

这是我识别骗子的 SQL 代码：

```
SELECT CAST(ENDDATE AS DATE) ENDDATE,CAST(LOADEDON AS DATE),SUBSTR(SITEID,1,20) SITEID,SUBSTR(LOCATIONNAME_1,1,20),SUBSTR(RID,1,15),COUNT(RID) FROM AUTOMATION WHERE CAST(ENDDATE AS DATE) BETWEEN '2012-08-27' AND '2012-09-02' GROUP BY CAST(ENDDATE AS DATE),CAST(LOADEDON AS DATE),SUBSTR(SITEID,1,20),SUBSTR(LOCATIONNAME_1,1,20),SUBSTR(RID,1,15) ORDER BY 5 ASC FOR FETCH ONLY WITH UR 
```

编辑：可用于指定重复的列集是 RID、LOADEDON 和 FILENAME（此处未显示）。

这是一个示例输出

```
08/29/2012 09/05/2012 JGS Memphis          JGS Memphis          029369751671            518
09/01/2012 09/05/2012 Reynosa              Reynosa              029054883474            521
08/29/2012 09/05/2012 JGS Memphis          JGS Memphis          028881223425            522 
```

我想删除时间范围“2012-08-27”和“2012-09-02”中的所有重复记录，而不删除出于合法原因加载 N 次的记录。

注意：该表没有主键（例如`Rowid`在 MS Sqlserver 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:57:09.517

我不太清楚哪一组列指定了重复项。以下假设它是示例输出中的列：

```
delete from (select t.*,
                    row_number() over (partition by enddate, loadedon, siteid order by loadedon desc) as seqnum
             from automation t
            ) t
where seqnum > 1 
```

这使用 row_number() 来分配序列号并删除除第一行之外的所有行，保证一个留在数据库中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:57:57.653

除非你有办法区分与其他记录完全相同但良好的记录和与其他记录完全相同但不好的记录之间的区别，否则真的没有'没有办法做到这一点。还是我错过了问题中的某些内容？

# php - 如何将php数组传递给bash脚本

> ID：12431034
> 
> 赞同：2
> 
> 时间：2012-09-14T19:47:28.977
> 
> 标签：php, bash

我的 bash 脚本调用一个 php 文件

```
#!/bin/bash
data=$(./getconfig.php) 
```

文件 getconfig.php 是：

```
#!/usr/bin/env php
<?php
$array = array();
... 
```

如何`$array`从 php 文件中返回 ，以便在 bash 脚本中操作此数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:51:00.433

根据[文档](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_10_02.html)，使用以下语法初始化数组：

```
farm_hosts=(web03 web04 web05 web06 web07) 
```

所以你需要做的就是内爆你的`$array`：

```
echo implode(' ', $array); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:58:42.263

您可以使用该`=()`格式将行读入这样的数组

```
data = (`./getconfig.php`) 
```

您只需要确保您的 PHP 脚本为数组中的每个项目输出一行，或者每个项目之间有一个空格。

这里的关键是使用反引号从 PHP 脚本输出中获取替换值。

# jquery - 简单的 jQuery 脚本不起作用

> ID：12431041
> 
> 赞同：3
> 
> 时间：2012-09-14T19:48:28.213
> 
> 标签：jquery

我完全困惑为什么这个简单的 jQuery 脚本不起作用。我从我的另一个项目（代码在其中工作）中复制并粘贴了代码，只是更改了类标签。

```
<html>
<head>
    <title>test page</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('.click_item').click(
                function() {
                    $(this).animate({background: '#ffffff'}, 200);
                },
                function() {
                    $(this).animate({background: '#d0d0d0'}, 200);
                }
            );
    }) 
    </script>
    <style type="text/css">
        #one {
            height: 300px;
            width: 1000px;
            background-color: #a0a0a0;
        }
        .click_item {
            width: 100px;
            height: 30px;
            margin: 0px auto;
            margin-bottom: 10px;
            background: #d0d0d0;
            -moz-transition: background linear;
            -webkit-transition: background linear;
        }
    </style>
</head>

<body>

    <div id="one">
        <div id="map_options_box">
            <div id="kml1" class="click_item">item 1</div>
            <div id="kml2" class="click_item">item 2</div>
        </div>
    </div>

</body> 
```

我还尝试使用 #kml1 和 #kml2 ID 标签代替 class 和 'this' 标签，以及将点击功能替换为悬停和切换，但仍然无效。我也没有在控制台中收到任何错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T19:50:47.997

您将需要包含[jQuery 颜色动画插件](http://www.bitstorm.org/jquery/color-animation/)。因为原生 jquery 不支持此功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:53:39.607

尝试：

```
<script type="text/javascript">
$(document).ready(function() {
        $('.click_item').click(
            function() {
                $(this).animate({background: '#ffffff'}, 200);
            },
            function() {
                $(this).animate({background: '#d0d0d0'}, 200);
            }
        );
});
</script> 
```

# c# - HttpRequest 与 HttpWebRequest

> ID：12431042
> 
> 赞同：3
> 
> 时间：2012-09-14T19:48:29.650
> 
> 标签：c#, asp.net, .net

我有一个网页可以拦截 POST 请求，从请求中提取用户名，并且应该根据用户名转发请求。现在，我注意到传入的 HttpRequest 有一个 Params 属性，而 HttpWebRequest 没有。为什么是这样？有没有办法可以在传出的 HttpWebRequest 中捕获参数数据？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:53:48.963

它们只是两个不同包中的两个不同的 .Net 类：

*   [http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest%28v=vs.71%29.aspx)

```
   系统对象
      System.MarshalByRefObject
         System.Net.WebRequest
            System.Net.HttpWebRequest

```

*   [http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.aspx)

```
   系统对象
      System.Web.HttpRequest

```

HttpWebRequest 是一个旧的 .Net 1.1 东西 - 如果您打算重构任何代码（或编写任何新代码！），我肯定会使用 Web.HttpRequest

恕我直言...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T19:57:06.987

对于初学者来说，它们是完全不同的类，在不同的命名空间中。话虽如此，

`Params`是一个包装器，它公开查询字符串参数和 POST 数据。当您构建一个无法写入参数的请求时，您必须指定您实际添加的数据类型。因此，您应该将其作为查询字符串添加到目标 url，或者您可以将其添加到请求的正文中并使其成为 POST。

# c - GTK 与 C 和 Eclipse

> ID：12431043
> 
> 赞同：2
> 
> 时间：2012-08-05T20:18:49.380
> 
> 标签：c, eclipse, gtk

我决定使用**GTK**库，我一直在搞乱它。

我的问题不在于 C 或 GTK 本身，而在于**Eclipse**。即使我的应用程序编译和运行没有错误，但 Eclipse 不断告诉我存在以下问题：

> GTK_DIALOG_MODAL、GTK_MESSAGE_INFO、GTK_BUTTONS_CLOSE...无法解决。

有没有办法让 Eclipse 了解发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:23:00.327

我猜 Eclipse 找不到 GTK 的头文件。您可以通过将一个或多个包含目录添加到项目属性来告诉它在哪里查找它们：

```
Project → Properties → C/C++ General → Paths and Symbols → Includes 
```

这至少适用于 Eclipse Indigo 和 Juno。

# xsd - 如何使用 Eclipse XSD 编辑器创建枚举

> ID：12431047
> 
> 赞同：1
> 
> 时间：2012-09-14T19:48:51.550
> 
> 标签：xsd, wsimport

我正在为将在 WSDL 中使用的常见 Web 服务类型创建一个 XSD。我需要的一种常见类型是枚举。

**我的问题是当我执行 wsimport 生成的工件是一个类而不是一个枚举。**

我正在使用 Eclipse Indigo 的 XSD 和 WSDL 编辑器。这就是我在设计模式下创建枚举的方法：

1.  创建新的复杂类型 (ResponseCodeType)
2.  在 ResponseCodeType 中添加新的字符串元素（代码）
3.  在代码的约束属性中，我添加了以下约束值：SUCCESS、WARNING、ERROR、FATAL

我究竟做错了什么？

## XSD 源

```
<complexType name="ResponseCodeType">
    <sequence>
        <element name="code">
            <simpleType>
                <restriction base="string">
                    <enumeration value="SUCCESS"></enumeration>
                    <enumeration value="WARNING"></enumeration>
                    <enumeration value="ERROR"></enumeration>
                    <enumeration value="FATAL"></enumeration>
                </restriction>
            </simpleType>
        </element>
    </sequence>
</complexType> 
```

## wsimport 生成的工件的 Java 源代码

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "ResponseCodeType", propOrder = {
    "code"
})
public class ResponseCodeType {

    @XmlElement(required = true)
    protected String code;

    /**
     * Gets the value of the code property.
     * 
     * @return
     *     possible object is
     *     {@link String }
     *     
     */
    public String getCode() {
        return code;
    }

    /**
     * Sets the value of the code property.
     * 
     * @param value
     *     allowed object is
     *     {@link String }
     *     
     */
    public void setCode(String value) {
        this.code = value;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T21:21:35.243

我想到了。当我尝试设计我的枚举时，我创建了一个复杂类型，其元素具有我需要的约束（成功、信息、警告等）。

我所做的是创建一个简单的类型，其中包含一个具有约束 (ResponseCode) 的字符串元素。然后我创建了一个带有 ResponseCode 元素的复杂类型（ResponseCodeType）。

当我执行 wsimport 时，它生成 ResponseCode 作为枚举和具有 ResponseCode 属性的 ResponseCodeType 类。

如果有人有更好的方法，请发表评论或提供更好的答案。

# android - 创建的文件并可以使用 DDMS 查看它们，但它们不会出现在 Windows 文件资源管理器中

> ID：12431058
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:50:05.807
> 
> 标签：android

我正在创建几个用于导出的 .xml 文件。

使用

```
Environment.getExternalStorageDirectory(); 
```

我可以成功地将它们导出到我想要的适当路径。

然后我可以使用 DDMS 查看文件。但是，我无法使用文件资源管理器查看设备上的文件。是的，我关闭了调试，可以看到所有其他文件和文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T19:54:34.873

你没有指出你在什么设备上看到这个。如果它运行的是 Android 3.0 或更高版本，那么您将需要扫描文件。从[博客文章](http://commonsware.com/blog/2011/08/31/mtp-external-storage.html)中引用我自己：

> 然而，对于开发人员来说，有一个更微妙的转变很重要：MTP 内容不是基于外部存储的文字内容。相反，MTP 内容基于`MediaScannerConnection`. 如果您将文件写入外部存储，除非该文件被 扫描`MediaScannerConnection`，否则通过 MTP 的用户将看不到该文件。
> 
> 外部存储会在重新启动时进行扫描，并且可能会定期进行。用户可以通过 SDRescan 等实用程序手动强制扫描。但是，最好的答案是在您关闭文件后使用`scanFile()`on`MediaScannerConnection`更新媒体数据库。这将使您的文件立即可供用户使用。

# c++ - ReadProcessMemory() 为静态地址返回 0

> ID：12431064
> 
> 赞同：1
> 
> 时间：2012-09-14T19:50:37.357
> 
> 标签：c++, visual-c++, readprocessmemory

我试图做的是读取一个静态地址，该地址指向一个具有一定价值的动态地址。但是，如果我尝试读取静态地址，它总是返回 0。读取它的唯一方法是在作弊引擎中将调试器附加到动态地址。但是，我只从动态地址读取它没有问题。

```
DWORD address = 0x74EA46D8;
int value = 0;
int new_address = 0;
DWORD pid;
HWND hwnd;
hwnd = FindWindow(NULL,L"HackMe.exe");
if(!hwnd) {
    cout <<"Window not found!\n";
    cin.get();
} else {
    GetWindowThreadProcessId(hwnd,&pid);

    HANDLE phandle = OpenProcess(PROCESS_VM_READ,0,pid);
    if(!phandle) {
        cout <<"Could not get handle!\n";
        cin.get();
    } else {
        while(1) {
            ReadProcessMemory(phandle,(void*)address,&new_address,sizeof(new_address),0);
            cout << new_address << "\n"; //Always print 0
            //int new_address = 0x2ECA40B0; //This works if I uncomment this
            ReadProcessMemory(phandle,(void*)new_address,&value,sizeof(value),0); 
```

我什至尝试获得调试权限，但这并没有做任何事情。我不知道问题是什么，因为我对 C++ 很陌生。任何帮助表示赞赏。

谢谢你。

**编辑**

GetLastError() 首先返回 0，然后返回 299

**编辑 2**

```
BOOL x = ReadProcessMemory(phandle,(void*)address,&new_address,sizeof(new_address),0);
cout << x << " " << GetLastError() << "\n"; 
```

返回

```
1 0
1 299
1 299
1 299 
```

等等

**编辑 3** 字节读取为 4。

**编辑 4**

只是为了澄清。

使用 ReadProcessMemory() 直接从 0x74EA46D8 读取返回 0。

如果我打开作弊引擎并将地址 0x74EA46D8 指向地址列表。然后右键单击它并按“找出访问此地址的内容”它可以一下子被读取。启用 SeDebugPrivelege 什么都不做。

动态地址可以正常读取，无需调试权限（只要我手动输入地址或作弊引擎调试地址以便读取静态地址）

它的结构是这样的：

指向我尝试读取的地址的静态地址，除非见上文，否则返回 0 作为“新地址”。

动态地址，包含我要读取的值。如果我手动定义动态地址，这会很好。但如果我不这样做，它会失败，因为 new_address 为 0，除非见上文。

**编辑 5**

终于发现问题了，之前的地址写错了。该地址是作弊引擎的一部分，真实地址是 0x013CD878，偏移量为 0x4B0。这就是为什么除非我调试它，否则它不起作用的原因。

但我希望其他人能从我的错误中吸取教训：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T19:55:22.713

你不是从不同的地址阅读吗？`address != new_address`. `(void*)address`- 是您开始阅读的地址。

# session - Symfony2 一个会话已经开始 - 忽略 session_start()

> ID：12431067
> 
> 赞同：2
> 
> 时间：2012-09-14T19:51:13.163
> 
> 标签：session, symfony, symfony-2.1

我无法在本地服务器中使用 Symfony2 会话。我收到“通知：会话已经开始 - 忽略 session_start()”错误。

相同的脚本在我的生产服务器中运行良好。

我在 Windows 7 上使用 Xampp 和 PHP 5.3.5。会话 auto_start 在 php.ini 中关闭。

任何提示都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T04:26:29.153

我想这有点晚了，但如果它可以帮助：

确保在 php.ini 中关闭 session.autostart (0)

从控制器使用 Symfony 2 中的会话的方式如下：

```
$session = $this->getRequest()->getSession();

// store an attribute for reuse during a later user request
$session->set('foo', 'bar');

// in another controller for another request
$foo = $session->get('foo');

// use a default value if the key doesn't exist
$filters = $session->get('filters', array()); 
```

[http://symfony.com/doc/current/book/controller.html#managing-the-session](http://symfony.com/doc/current/book/controller.html#managing-the-session)

或从视图：

```
{{ app.session.get('foo') }} 
```

即使在读取/写入会话数据时会自动调用 start()，您也应该调用它（因为建议使用它，例如 getId() 不会调用它）

```
$session->start();
$id = $session->getId(); 
```

[http://symfony.com/doc/master/components/http_foundation/sessions.html](http://symfony.com/doc/master/components/http_foundation/sessions.html)

您可能无法在生产服务器上收到错误的原因是它的优先级仅为“通知”。

# .htaccess - Htaccess 重定向与 cakePHP

> ID：12431068
> 
> 赞同：1
> 
> 时间：2012-09-14T19:51:17.450
> 
> 标签：.htaccess, cakephp, cakephp-1.3

我有一个 cakePHP 应用程序正在工作`http://domain1.com/domain2`，并想指向`http://domain2.com/`这个应用程序。

我已经完成了将文档根目录更改为的`domain2`操作`public_html/domain2`，但是，当我转到：`domain2.com`未加载所有 css、javascript 和图像时，显示未找到控制器的消息。

我可以做什么？

所有域在 domain1.com 上都有一个没有 TLD 的域的文件夹，我想如果我创建一个 htaccess 并获取没有 TLD 的域，最后更改 rewriteBase，将按预期工作，但不知道该怎么做。

当前的 htaccess `domain2`：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:04:05.683

您可以尝试使用以下规则在 domain2 的文档根目录中添加 htaccess 文件：

```
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI} \.(css|js|png|jpe?g|gif|bmp|ico)$ [NC]
RewriteRule ^/?domain2/(.*) /$1 [L,PT] 
```

这应该删除`domain2`链接的一部分。

# c++ - 第一次部署 Qt 应用程序，动态链接？

> ID：12431069
> 
> 赞同：3
> 
> 时间：2012-09-14T19:51:24.407
> 
> 标签：c++, qt, deployment, dynamic-linking

我开始考虑部署我一直在开发的 Qt 应用程序，但在此之前我从未部署过任何 C++ 应用程序。

我希望能够将我的产品作为预编译的可执行文件发布，该可执行文件动态链接 Linux/Windows 的共享库文件 (Qt)，以便有一个可执行文件在其自己的子目录中查找库而不是可能的库由于其他 Qt 产品而安装。

这是可能的吗？或者必须单独安装 Qt 库文件以便应用程序链接它们？我想避免要求最终用户在他们的系统上安装任何东西，同时也避免静态链接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:27:51.393

这是 Qt 的正常行为。如何做到这一点在很大程度上取决于您的构建系统。

如果您使用 CMake，则可以使用 CPack 生成安装程序。这是将所需共享库添加到安装程序的[链接。](http://www.cmake.org/pipermail/cmake/2008-September/024003.html)CPack 为 Linux、Windows 和 Mac OS X 制作了许多不同类型的安装程序。

您还可以使用 NSIS 生成自己的安装程序。这涉及更多但可行。

Qt 有关于如何部署使用其库的应用程序的[文档。](http://doc.qt.nokia.com/4.7-snapshot/deployment.html)

在我的公司，我们同时做 CPack 和 NSIS。CPack 的方式简单很多，网上有更多的例子。

# c - 通过转换为 char* 并在 sprintf 中使用“%s”来打印十六进制整数

> ID：12431074
> 
> 赞同：1
> 
> 时间：2012-09-14T19:51:35.480
> 
> 标签：c, string, embedded

我正在读取两个 32 位寄存器并尝试使用以下命令将其放入字符串缓冲区中：

```
sprintf (buffer, "%s-%s", ((char*)(in32(REGISTER1))) , (char*)(in32(REGISTER2))); 
```

从寄存器中读取的十六进制值是否可以不作为指向 char 的指针进行类型转换并如上所述打印到缓冲区中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:59:04.380

正如[craig65535](https://stackoverflow.com/users/1255551/craig65535)在上面的评论中暗示的那样，问题很可能出在这句话上：

> 从寄存器中读取的十六进制值

我怀疑您正在阅读十六进制值；相反，您正在阅读整数。如果您想将该整数的十六进制表示形式存储*在*字符串中，您可以使用`%X`格式说明符：

```
sprintf (buffer, "%08X-%08X", in32(REGISTER1), in32(REGISTER2)); 
```

（`8`意思是“使用八个字符的宽度”；`0`意思是“如果值是宽度小于八个，则左填充零”。）

您可以有效转换为的唯一方法`char *`是，如果寄存器中的整数值实际上是指向您存储字符串的某个内存位置的指针；但这显然不是这里的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T19:58:15.617

`sprintf(buffer, "%08x-%08x", REGISTER1, REGISTER2);` - 这是假设您想要缓冲区中的寄存器地址。如果您打算读取寄存器的内容，请进行相应调整。关键是您不能简单地将数字称为 char* 并从中获取数字，但是`sprintf()`（以及所有类似 printf 的函数）可以为您转换值基数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T12:21:55.570

正如其他答案所暗示的那样，您可以`sprintf`使用 using将整数转换为字符串十六进制表示`%X`。
但是由于您没有说您使用什么编译器或整数或长整数的长度是多少，您可能会得到意想不到的结果。
在 16 位控制器`sprintf (buffer, "%08X-%08X", in32(REGISTER1),in32(REGISTER2));`上会失败。

这应该适用于大多数平台，因为 sprintf 假定 long 值作为参数，并且参数总是转换为 long。

```
sprintf (buffer, "%08lX-%08lX", (long)in32(REGISTER1), (long)in32(REGISTER2)); 
```

# php - 将新用户记录添加到 MySQL 数据库时遇到问题

> ID：12431082
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:51:53.970
> 
> 标签：php, mysql, sql

> **可能重复：**
> [为什么我不能用 php 将数据插入我的 sql db](https://stackoverflow.com/questions/12412579/why-cant-i-insert-data-into-my-sql-db-with-php)

好吧，简而言之，我正在编写一个将数据存储到数据库中的登录表单。我的 html 和脚本应该可以完美地工作，在这个确切的时刻不需要过多考虑安全性。但我遇到的问题是我的 php 脚本不会更新我的 sql 数据库。一切检查正常，所有帖子变量都被继承，只是不会插入它们。我盯着认为用户（是的，我正在使用 root）由于某种原因没有足够的权限，所以我想知道如何设置一个新的“管理员用户”，如果你愿意的话。我在我的 Windows 7 机器上运行 WAMP，如果这有很大的不同。

我的表格：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Registration</title>
</head>

<body>

<form action="register.php" method="post" />
<p>Username:</p><input type="text" name="username" />
<p>Password:</p><input type="text" name="password" />
<p>Name:</p><p>First:<input type="text" name="fname" />Last:<input type="text" name="lname" /></p>
<p>Email:</p><input type="text" name="email" />
<input type="submit" />

</body>
</html> 
```

我的脚本：

```
<?php

$host="localhost"; // Host name 
$username="root"; // Mysql username 
$password=""; // Mysql password 
$db_name="login"; // Database name 
$tbl_name="members"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

// username and password sent from form 
$myusername=$_POST['username']; 
$mypassword=$_POST['password']; 
$myfname=$_POST['fname'];
$mylname=$_POST['lname'];
$myemail=$_POST['email'];

// To protect MySQL injection 
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername'";
$result=mysql_query($sql);

// Mysql_num_row is counting table row
$count=mysql_num_rows($result);

// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1){

// username taken
echo "Username already taken";
exit();
}

//protection against sql injection
if (get_magic_quotes_gpc())
{
function stripslashes_deep($value)
{
$value = is_array($value) ?
array_map(stripslashes_deep, $value) :
stripslashes($value) ;
return $value;
}
$_POST = array_map(stripslashes_deep, $_POST);
$_GET = array_map(stripslashes_deep, $_GET);
$_COOKIE = array_map(stripslashes_deep, $_COOKIE);
$_REQUEST = array_map(stripslashes_deep, $_REQUEST);
}

//insert form into DB members

'INSERT INTO members SET
username="' . $myusername . '",
password="' . $mypassword . '",
fname="' . $myfname . '",
lname="' . $mylname . '"
email="' . $myemail . '"';

session_register("myusername");
session_register("mypassword"); 
header("location:registersuccess.html");
?> 
```

用于创建表的sql命令：

```
use login
>database changed
CREATE TABLE members(
id INT(4) NOT NULL AUTO_INCREMENT PRIMARY KEY,
username VARCHAR(30) NOT NULL,
password VARCHAR(30) NOT NULL,
fname VARCHAR(30) NOT NULL,
lname VARCHAR(30) NOT NULL,
email VARCHAR(30) NOT NULL
)
; 
```

然后我可以从命令行添加用户更新，但 php 不行，再次使用 root 帐户和密码。该脚本确实连接到服务器，因为它确实成功地检查了用户是否已准备就绪。如果需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:10:08.780

1）首先，不要使用旧功能，它们不安全且贬值（请参见[此处](http://es.php.net/mysql_query)`mysql_*`的红框）。相反，看看使用 PDO 或 MySQLi，它们不需要很长时间来学习，而且，恕我直言，在各个方面都好得多，包括一旦你习惯了它们就易于使用。

2）其次，`SET`主要用于`UPDATE`命令，不常用于`INSERT`. 一个`INSERT`命令通常应该是这样的；

```
INSERT INTO `tbl` (`column1`,`column2`) VALUES ('value1','value2'); 
```

请参阅 MySQL[手册](http://dev.mysql.com/doc/refman/5.5/en/insert.html)。

3）第三，我不确定代码是否复制不正确，但看起来您没有将以下插入字符串分配给变量，也没有执行它？

```
'INSERT INTO members SET
username="' . $myusername . '",
password="' . $mypassword . '",
fname="' . $myfname . '",
lname="' . $mylname . '"
email="' . $myemail . '"'; 
```

（再次参见第 2 点。关于语法）。

4）第四，缩进！！使阅读和调试更容易。正确缩进的代码可以通过阅读代码向您显示错误，甚至在开始正确的“调试”过程之前，这可以为您节省大量时间！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:01:57.293

我没有看到您在数据库中插入了一些东西，要运行插入，您需要使用`mysql_query`您在 select 语句中使用的相同函数，此外，插入的语法不正确，请查看[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/insert.html)以了解它是如何。

# jquery-mobile - knockout.js, asp.net mvc4 - 使用 getJSON 数据更新简单视图模型

> ID：12431083
> 
> 赞同：1
> 
> 时间：2012-09-14T19:52:02.273
> 
> 标签：jquery-mobile, knockout.js, asp.net-mvc-4

这是一个新手问题，更不用说我对 knockout.js 很陌生。我要做的就是从服务器获取单个种植者（姓名、公司、地址）的详细信息并将其显示在网页上。我正在使用 $(document).bind('pageinit', function () 因为我使用的是 jQuery mobile。

现在我的代码是：

```
 <h3><span data-bind="text: Name"></span></h3>
    <span data-bind="text: Company"></span><br />
    <span data-bind="text: Address"></span>

    <script type="text/javascript">

       $(document).bind('pageinit', function () {

         function MyGrowerModel() {
            //this.Name = "My Name";
            //this.Company = "My Company";
            //this.Address = "My Address";

            //Load initial state from server, convert it to Task instances, then  opulate self.tasks
            $.getJSON("Grower/GetGrower", function (allData) {

             this.Name = allData.Name;
             this.Company = allData.Company;
             this.Address = allData.Address;
             alert(allData.Name); //works!
         });
        }

        ko.applyBindings(new MyGrowerModel());

       });
       </script> 
```

我收到“无法解析绑定。消息：ReferenceError：名称未定义；绑定值：名称

这是有道理的，因为 Name、Company 和 Address 都在 getJSON 函数的范围内。所以，我的问题是，在哪里声明这些变量以及如何更新这些 ViewModel 数据？

我不想使用映射插件。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:35:07.850

你会想要使用[observable properties](http://knockoutjs.com/documentation/observables.html)。这样，一旦您的 $.getJSON 请求完成，您的视图将使用新数据进行更新。

```
<h3><span data-bind="text: Name"></span></h3>
<span data-bind="text: Company"></span><br />
<span data-bind="text: Address"></span>

<script type="text/javascript">

    function MyGrowerModel() {
        var self = this;
        self.Name = ko.observable('');
        self.Company = ko.observable('');
        self.Address = ko.observable('');

        self.Name.subscribe(function(newValue) {
            alert("Name has changed: " + newValue);
        });

        //Load initial state from server and populate viewmodel
        $.getJSON("Grower/GetGrower", function (allData) {
             self.Name(allData.Name);
             self.Company(allData.Company);
             self.Address(allData.Address);
        });
    }

   $(document).bind('pageinit', function () {
        ko.applyBindings(new MyGrowerModel());
   });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:29:19.817

您需要保留对该对象的引用：

```
function MyGrowerModel() {
    var self = this;
    //Load initial state from server, convert it to Task instances, then populate self.tasks
    $.getJSON("Grower/GetGrower", function (allData) {
         self.Name = allData.Name;
         self.Company = allData.Company;
         self.Address = allData.Address;
    });
} 
```

但这不会是唯一的问题。`$.getJSON`默认情况下是异步的，您需要设置`async: false`或更改回调函数以应用绑定。更好的解决方案是使用 observables：

```
function MyGrowerModel() {
    var self = this;
    self.Name = ko.observable(''); // Value shown before getJSON returns
    self.Company = ko.observable('');
    self.Address = ko.observable('');
    //Load initial state from server, convert it to Task instances, then populate self.tasks
    $.getJSON("Grower/GetGrower", function (allData) {
         self.Name(allData.Name);
         self.Company(allData.Company);
         self.Address(allData.Address);
    });
} 
```

`getJSON`这将最初为每个名称、公司和地址显示空字符串，并将自动更新为调用返回的数据。

# javascript - 在 URL 中传递 JS 对象

> ID：12431085
> 
> 赞同：1
> 
> 时间：2012-09-14T19:52:11.430
> 
> 标签：javascript

我已经在 SO 中搜索过这个问题。但是没有一个答案对我有用，所以我再次发布这个，希望找到一个适合我的答案。

有没有办法通过 URL 传递 JS/JSON 对象？假设我有一个像这样的 JS 对象：

```
var jObj = {"color":"red","shape":"square"} 
```

现在假设我想将它传递给这样的 URL：

```
window.open("/process/jObj"); //here I want the var defined above to be passed 
```

我尝试了各种选项，如`JSON.stringfy`, `encodeURIComponent`, `escape`.. 但我无法传递它。知道如何在纯 JS 中实现这一点吗？

我想传递它，以便在下一页（process.php）中获取 jObj 的值并将其用于进一步处理。基本上我正在寻找一个选项，我可以将对象传递到`?color=red&shape=square`不需要过多压缩和重新格式化对象的效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:12:58.487

这是您可以做的一件事

```
var jObj = {"color":"red","shape":"square"}
var urlParam = []

for (var i in jObj){
   urlParam.push(encodeURI(i) + "=" + encodeURI(jObj[i]));
}

window.open("/process/?" + urlParam.join("&")); 
```

这应该会产生你的结果

# c# - 从 DataGridViewComboxBoxCell 获取文本

> ID：12431087
> 
> 赞同：1
> 
> 时间：2012-09-14T19:52:22.127
> 
> 标签：c#, .net, datagridview, combobox

我正在尝试通过以下方式检索 DataGridViewComboBoxCell 的值

向 ComboBox 添加项目时：

```
 public void LoadLayouts()
    {
        ImmutableSet<string> layoutNames = _store.Current.Keys;
        var dgvComboBox = (DataGridViewComboBoxColumn)this.schedulesDataGrid.Columns[1];

        foreach (string name in layoutNames)
        {
            dgvComboBox.Items.Add(name);
        }
    } 
```

尝试读回该值时：

```
var combo = (DataGridViewComboBoxCell) this.schedulesDataGrid[args.ColumnIndex, args.RowIndex];
string LayoutChosen = (string)combo.Value; 
```

但是，即使我可以看到在 ComboBox 中选择了一个值，该值返回为 null，`FormattedValue`返回为“”。

我尝试将名称数组设置为我的数据源，但是考虑到我只有一个值（布局的名称），我不确定为我的显示和值成员设置什么

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:00:23.637

在您尝试读取单元格的值时，该行尚未提交更改。如果您有可见的行标题，您将在尚未提交的行上看到铅笔图标。这通常发生在细胞失去焦点之后。您可以通过挂钩到就地编辑控件组合框并使其在更改值时发布 EndEdit 来强制解决此问题：

```
void dgv_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    var comboBox = e.Control as ComboBox;
    if (comboBox != null)
    {
        // remove any handler we may have added previously
        comboBox.SelectionChangeCommitted -= new EventHandler(comboBox_SelectionChangeCommitted);
        // add handler
        comboBox.SelectionChangeCommitted += new EventHandler(comboBox_SelectionChangeCommitted);
    }
}

void comboBox_SelectionChangeCommitted(object sender, EventArgs e)
{
    // Allow current dispatch to complete (combo-box submitting its value)
    //  then EndEdit to commit the change to the row
    dgv.BeginInvoke(new Action(() => dgv.EndEdit()));
} 
```

# android - 缩放和捏合相对布局

> ID：12431093
> 
> 赞同：3
> 
> 时间：2012-09-14T19:53:12.150
> 
> 标签：android, android-layout, pinchzoom

我是android开发的新手，很抱歉，如果我问一些愚蠢的问题，请尝试帮助我。我正在尝试在RelativeLayout 中实现缩放和捏合。我想制作自己的地图视图，在其中我将获取楼层地图的图像并在其上绘制图钉（ImageVIew）。我已经尝试过了，但我目前无法单击图钉。我在这些帖子的帮助下完成了代码

[扩展 RelativeLayout，并覆盖 dispatchDraw() 以创建可缩放的 ViewGroup](https://stackoverflow.com/questions/6378904/extending-relativelayout-and-overriding-dispatchdraw-to-create-a-zoomable-vie)

和

[Android - 使用展开/捏合放大/缩小 RelativeLayout](https://stackoverflow.com/questions/10013906/android-zoom-in-out-relativelayout-with-spread-pinch)

我的代码是

```
public class TempView extends RelativeLayout {
private static final int INVALID_POINTER_ID = -1;

private Drawable mIcon;
private float mPosX;
private float mPosY;
TempView temp;
private float mLastTouchX;
private float mLastTouchY;
private int mActivePointerId = INVALID_POINTER_ID;

private ScaleGestureDetector mScaleDetector;
private float mScaleFactor = 1.f;

public TempView(Context context) {
    this(context, null, 0);
    temp = this;
}

public TempView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
    temp = this;
}

public TempView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mIcon = context.getResources().getDrawable(R.drawable.ic_launcher);
    mIcon.setBounds(0, 0, mIcon.getIntrinsicWidth(), mIcon.getIntrinsicHeight());
    temp = this;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
}

@Override
public boolean onTouchEvent(MotionEvent ev) {
    // Let the ScaleGestureDetector inspect all events.

    mScaleDetector.onTouchEvent(ev);

    final int action = ev.getAction();
    switch (action & MotionEvent.ACTION_MASK) {
    case MotionEvent.ACTION_DOWN: {
        final float x = ev.getX();
        final float y = ev.getY();

        mLastTouchX = x;
        mLastTouchY = y;
        mActivePointerId = ev.getPointerId(0);
        break;
    }

    case MotionEvent.ACTION_MOVE: {
        final int pointerIndex = ev.findPointerIndex(mActivePointerId);
        final float x = ev.getX(pointerIndex);
        final float y = ev.getY(pointerIndex);

        // Only move if the ScaleGestureDetector isn't processing a gesture.
        if (!mScaleDetector.isInProgress()) {
            final float dx = x - mLastTouchX;
            final float dy = y - mLastTouchY;

            mPosX += dx;
            mPosY += dy;

            invalidate();
        }

        mLastTouchX = x;
        mLastTouchY = y;

        break;
    }

    case MotionEvent.ACTION_UP: {
        mActivePointerId = INVALID_POINTER_ID;

        break;
    }

    case MotionEvent.ACTION_CANCEL: {
        mActivePointerId = INVALID_POINTER_ID;
        break;
    }

    case MotionEvent.ACTION_POINTER_UP: {
        final int pointerIndex = (ev.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK)
                >> MotionEvent.ACTION_POINTER_INDEX_SHIFT;
        final int pointerId = ev.getPointerId(pointerIndex);
        if (pointerId == mActivePointerId) {
            // This was our active pointer going up. Choose a new
            // active pointer and adjust accordingly.
            final int newPointerIndex = pointerIndex == 0 ? 1 : 0;
            mLastTouchX = ev.getX(newPointerIndex);
            mLastTouchY = ev.getY(newPointerIndex);
            mActivePointerId = ev.getPointerId(newPointerIndex);
        }

        break;
    }
    }
   return true;
}

@Override
protected void onLayout(boolean changed, int l, int t, int r, int b)
{
    int count = getChildCount();
    Log.d("onLayout", ""+count);
    for(int i=0;i<count;i++){
        View child = getChildAt(i); 
        if(child.getVisibility()!=GONE ){
            RelativeLayout.LayoutParams params = (RelativeLayout.LayoutParams)child.getLayoutParams();
            child.layout(
                (int)(params.leftMargin * mScaleFactor), 
                (int)(params.topMargin * mScaleFactor), 
                (int)((params.leftMargin + child.getMeasuredWidth()) * mScaleFactor), 
                (int)((params.topMargin + child.getMeasuredHeight()) * mScaleFactor) 
                );

                child.setLayoutParams(params);
        }
    }
}

@Override
public void onDraw(Canvas canvas) {
    super.onDraw(canvas);

    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);
    Log.d("onDraw", ""+mScaleFactor);
    int count = getChildCount();
    for(int i=0;i<count;i++){
        View child = getChildAt(i); 
        if(child.getVisibility()!=GONE){
            child.draw(canvas);
            Log.d("onDraw", ""+mScaleFactor);
        }
    }

    canvas.restore();
}
@Override
protected void dispatchDraw(Canvas canvas) {
    canvas.save(Canvas.MATRIX_SAVE_FLAG);

    canvas.translate(mPosX, mPosY);
    canvas.scale(mScaleFactor, mScaleFactor);

    super.dispatchDraw(canvas);
    canvas.restore();
}

private class ScaleListener extends ScaleGestureDetector.SimpleOnScaleGestureListener {
    @Override
    public boolean onScale(ScaleGestureDetector detector) {
        mScaleFactor *= detector.getScaleFactor();

        // Don't let the object get too small or too large.
        mScaleFactor = Math.max(1.0f, Math.min(mScaleFactor, 5.0f));
       // Log.d("onScale", ""+mScaleFactor);
        temp.invalidate();
        invalidate();
        return true;
    }
}
} 
```

问题：

*   如何使只有楼层地图图像进行缩放？
*   保持引脚不缩放但相对移动？
*   单击图钉时获取准确的单击事件

任何建议和答案都会非常感谢！

提前致谢，

卡马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T10:58:14.393

在 Android 视图中实现类似 HTML 地图的元素：

*   支持图像作为可绘制或布局中的位图
*   允许在 xml 中列出区域标签
*   允许对资源 xml 使用剪切和粘贴 HTML 区域标签（即，能够获取 HTML 地图 - 和图像并在最少编辑的情况下使用它）
*   如果图像大于设备屏幕，则支持平移
*   支持捏缩放
*   支持点击区域时的回调。
*   支持将注释显示为气泡文本并在点击气泡时提供回调

看到这个链接你会得到你的解决方案[https://github.com/catchthecows/AndroidImageMap](https://github.com/catchthecows/AndroidImageMap)

# vba - 从接口实现 getter 和 setter 时的问题

> ID：12431097
> 
> 赞同：1
> 
> 时间：2012-09-14T19:53:32.237
> 
> 标签：vba, object

我有一个实现另一个对象的类。我为实现对象的每个属性设置了一个属性函数，但不断收到“无效使用属性”错误。这是我的代码：

测试子：

```
Sub tst()

Dim a As Derived

Set a = New Derived

a.Base_name = "ALGO" 'Error happens when this executes
End Sub 
```

派生类模块：

```
Option Explicit
Implements Base
Private sec As Base
Private Sub Class_Initialize()
    Set sec = New Base
End Sub
Public Property Get Base_name() As String
    Call sec.name
End Property
Public Property Let Base_name(value As String)
    Call sec.name(value) 'Error happens here
End Property 
```

基类模块：

```
Private pname As String

Public Property Get name() As String
    name = pname
End Property
Public Property Let name(value As String)
    pname = value
End Property 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:49:36.337

这是你想要的吗？

模块1

```
Sub tst()

Dim a As Derived

Set a = New Derived

Debug.Print a.Base_name
a.Base_name = "ALGO"
Debug.Print a.Base_name
End Sub 
```

基类模块

```
Private pname As String

Public Property Get name() As String
    name = pname
End Property
Public Property Let name(value As String)
    pname = value
End Property 
```

派生类模块

```
Option Explicit
Implements Base
Private sec As Base
Private Sub Class_Initialize()
    Set sec = New Base
End Sub
Public Property Get Base_name() As String
    Base_name = sec.name
End Property
Public Property Let Base_name(value As String)
    sec.name = value
End Property 
```

# firefox - 如何在“显示：无”上下文中创建一个赞按钮？

> ID：12431098
> 
> 赞同：1
> 
> 时间：2012-09-14T19:53:32.373
> 
> 标签：firefox, facebook-like

Like 按钮插件不会出现，如果它的容器之一是`display:none`页面加载时，并且稍后使用`display:block`.

仅在 Firefox（我的版本 15.0.1）中检测到问题。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:02:58.783

当你使元素可见时，你应该将你的 fb 插件添加到 dom

IE

```
<div id="showfb">mouseoverme</div>
<div style="display:none" id="facebutton"></div>

<script>
      var fbbutton = document.getElementById("facebutton");
      document.getElementById("showfb").onmouseover = function(){
          // first visible
          fbbutton.style.display='block';
          // then add fb html5
          fbbutton.innerHTML = '<div class="fb-like" ......... ></div>';
      };
</script> 
```

或者，尝试

```
width:0;height:0;overflow:hidden 
```

代替

```
display:none 
```

和

```
width:auto;height:auto;overflow:visible 
```

代替

```
display:block 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T20:56:08.320

我不知道这个错误（FB 或 FF）的原因是什么，但我已经通过仅在 FF 中默认显示我的元素来解决这个问题：

```
@-moz-document url-prefix() {#exe-article-social-tools { display: block; }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:17:59.253

[https://developers.facebook.com/docs/reference/javascript/](https://developers.facebook.com/docs/reference/javascript/)

fb-root 标签

**JavaScript SDK 要求页面中存在 fb-root 元素。不得使用 display: none 或 visibility: hidden 隐藏 fb-root 元素，否则 SDK 的某些部分将无法在 Internet Explorer 中正常工作。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-04T21:21:37.967

我花了一整天的时间才弄明白，但是**使用“测试用户”登录 Facebook 会使点赞按钮不可见**。就我而言，我总是在 Firefox 上使用我的测试用户登录，而在 Chrome 中使用我的常规 Facebook 用户注销/登录（我最初认为这是浏览器问题）。

但是，**解决方案**就像注销测试用户一样简单。

在 FB 文档中指定并非所有功能都为测试用户启用（类似按钮是这些功能之一），但我认为它至少会被渲染。无论如何，我希望这对某人有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-29T07:41:23.503

我的页面上有许多不同的不可见 div，其中`fb-like`隐藏了按钮。当显示 div 之一时，其中不会`fb-like`出现任何按钮。对我有用的解决方案是每次显示不可见的 div 时手动重新启动 FB.init。FB 是一个全局函数，它被添加到您的窗口对象中，因为您通过 url 调用远程 facebook api，例如`http://connect.facebook.net/en_US/all.js`. 因此，由于这个远程脚本附加到您的 DOM，您可以运行类似

```
FB.init({
        appId      : '346094915460000', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true  // parse XFBML
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-16T09:54:51.037

您可以将like button html5代码动态添加到DOM，然后再次运行FB解析器以生成like button：

```
fbbutton.innerHTML = '<div class="fb-like" ... ></div>';
FB.XFBML.parse(); 
```

# javascript - 你如何使用 jQuery 加速动画中间动画？

> ID：12431099
> 
> 赞同：6
> 
> 时间：2012-09-14T19:53:33.060
> 
> 标签：javascript, jquery, animation

假设您有一个动画在一定时间内运行，如下所示：

```
$('span').animate({opacity : 1}, 10000); 
```

动画很长，因此用户尝试再次单击该按钮。动画将通过动画已经有一定的时间，这可能每次都会有所不同。

在第二次单击时，是否可以更新动画过程，在用户单击时保持对象的不透明度，只更改完成所需的时间？

基本上我想在动画中途更新动画过程。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T20:09:05.713

您可以使用`step`选项`animate`来跟踪动画的距离。然后使用该信息，您可以计算动画中剩余的时间。然后停止当前动画并开始一个持续时间一半的新动画。

[http://jsfiddle.net/MdD45/](http://jsfiddle.net/MdD45/)

**编辑**

看起来传递给的第二个参数`step`包含一个名为的属性`pos`，它告诉你你在动画中的百分比。这可以进一步简化事情。

[http://jsfiddle.net/MdD45/1/](http://jsfiddle.net/MdD45/1/)

```
var startVal = 0;
var endVal = 1;
var duration = 10000;

var howfar = 0;

$('span').css("opacity",startVal)
    .animate({
        opacity : endVal
    }, {
        duration: duration,
        step: function(now, fx){
            howfar = fx.pos;  // between 0 and 1, tells how far along %
        }        
    });

$("button").click(function(){
    // calculate the new duration as half of the remaining duration
    var timeRemaining = duration - (howfar * duration);
    duration = timeRemaining / 2;

    $('span').stop().animate({
        opacity : endVal
    }, {
        duration: duration,
        step: function(now, fx){
            howfar = fx.pos;  // between 0 and 1, tells how far along %
        }        
    });
});
​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:03:55.607

~~我昨天把一些东西放在一起[跳过 jQuery 动画](https://stackoverflow.com/questions/12414191/jump-forward-in-jquery-animation/12415095#12415095)，这是代码，它应该很容易为你的用例修改：~~

**编辑**：修改版：

演示：http: [//jsfiddle.net/SO_AMK/fJyKM/](http://jsfiddle.net/SO_AMK/fJyKM/)

jQuery：

```
var time = 10000;
var opacity = 1;
var currentTime = 0;

$("#square").animate({
    opacity: opacity
}, {
    duration: time,
    step: function(now, fx) {

        currentTime = Math.round((now * time) / opacity);

    },
    easing: "linear"
});

$("#hurry").click(function() {
    $("#square").stop().animate({
        opacity: opacity
    }, {
        duration: ((time - currentTime) / 4), // Get remaining time, divide by 4
        step: function(now, fx) {

            currentTime = Math.round((now * time) / opacity);

        },
        easing: "linear"
    });
});​ 
```

它也适用于其他属性，例如[width](http://jsfiddle.net/SO_AMK/bd3Dj/)。唯一的问题是，如果它是一个*递减*的值，那么您需要使用[不同的脚本](http://jsfiddle.net/SO_AMK/MHV5k/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:18:23.927

我不完全确定这是否可行，但考虑这样做：

```
<div id="box"></div>
<style type="text/css">
div#box {
    -webkit-transition: width 10s;
    -moz-transition: width 10s;
    transition: width 10s;
    background: #000;
    width: 100px;
}
div#box.speedy {
    -webkit-transition: width 5s;
    -moz-transition: width 5s;
    transition: width 5s;
}
</style>
<script style="text/javascript">
    $(function() {
        $('div#box').css('width', '400');
        setTimeout(function() {
            $('div#box').addClass('box');
        }, 2000);
    });
</script> 
```

基本上让 css 对其进行动画处理，并添加另一个加速过渡的类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T19:56:37.957

是的你可以 ..

您必须使用“stop()”方法停止动画，然后针对同一属性上的同一节点启动一个新动画，并将其作为目标值，即原始值。

# resharper - 如何在 Resharper 中而不是在“保持打开”模式下正常打开文件

> ID：12431103
> 
> 赞同：20
> 
> 时间：2012-09-14T19:53:52.877
> 
> 标签：resharper, visual-studio-2012

我正在使用 Visual Studio 2012 Ultimate 和 Resharper，每当我按名称搜索（并打开文件）时（使用 Control-Shift-T 的“转到文件”快捷方式），文件以“保持打开”模式打开，而不是正常打开。我已经搜索并找不到正常打开文件的方法。

我可以更改什么设置使其正常打开？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-21T18:21:58.287

只需转到：工具>>选项>>环境>>选项卡和窗口

然后取消选中“预览选项卡”部分中的“允许在预览选项卡中打开新文件”

实际上从那里找到了答案：[Disable file preview in VS2012](https://stackoverflow.com/questions/10952185/disable-file-preview-in-vs2012)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-08T10:43:20.107

如果您想保留预览选项卡，但希望当前预览的文件保持打开状态，请按`Ctrl`- `Alt`- `Home`。等效的 Visual Studio 命令是`Window.KeepTabOpen`.

# sql - SQL 中字符串比较与 int 连接的性能

> ID：12431107
> 
> 赞同：13
> 
> 时间：2012-09-14T19:54:16.973
> 
> 标签：sql, performance, join, foreign-keys, varchar

人们普遍认为，在 int 列上搜索表比在字符串列（比如 varchar）上搜索要快。

但是，如果我有一个带有 Color 列的 Shirt 表，那么使用该表上的主键作为 Shirt 表上的外键创建一个 Color 表会更高效吗？在搜索绿色衬衫时，连接是否会否定将 Shirt 的 Color 列中的值作为 int 而不是字符串值（例如“Green”）的性能优势？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-14T20:02:52.113

如果我理解正确，您是在问这两个查询中的哪一个会更快：

```
SELECT * FROM shirt where color = 'Green' 
```

对比

```
SELECT shirt.* FROM shirt s INNER JOIN colors c 
       ON s.colorid = c.colorid 
       WHERE c.color = 'Green' 
```

它有点取决于数据库（嗯......可能很大程度上取决于它是否正确优化，如果不是全部的话，大多数都应该），但是颜色表中的查找应该可以忽略不计，然后剩余的执行可以使用整数查找值，应该更快。大部分处理最终将相当于`SELECT * from shirt WHERE colorid=N`. 但是，我怀疑除非表很大，否则您不会注意到速度差异。该决定可能应该基于哪种设计最有意义（可能是标准化的）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-14T20:01:08.020

除了性能之外，创建一个单独的颜色表可以让您的设计更好地标准化。因此，在未来的某一天，当有人决定现在应该将“深蓝色”称为“海军蓝”时，您更新 Color 表中的 1 行，而不是更新 Shirt 表中的许多行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-14T20:05:15.677

与正在执行的其他操作相比，这两种方法之间不太可能存在很大的性能差异。如果您只有少数几种颜色（最多几百种），则颜色表适合大多数数据库中的单个页面。颜色上的索引将使查找速度非常快，并且不会引起任何 I/O 活动（在第一次运行加载页面之后）。

字符串比较取决于数据库，但它确实涉及一个函数并从页面读取数据。所以，它不是免费的。当然，不同的数据库对于字符串函数可能具有不同的性能特征。

它应该存储在哪里应该是您的应用程序的功能。假设您有一个将颜色呈现给用户的应用程序。有一天，您可能想用西班牙语、斯瓦希里语或中文显示颜色的名称。如果是这样，拥有一个单独的表会使这种国际化变得更加容易。更简单地说，您可能希望阻止输入“Grene”，如果是这样，拥有这样的表格会使选择列表更容易。

另一方面，如果性能是您唯一关心的问题，那并没有什么不同。在其他情况下，查找表实际上可能比非规范化表*更快。*当字符串很长时会发生这种情况，从而增加了更大表中每条记录的长度。更大的表意味着更多的页面，这需要更长的时间才能加载到内存中。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-14T20:07:50.867

DBMS 有机会在值数量有限的情况下优化指标。我不知道如何告诉 SQL 这样做。它可能会弄清楚。

### 如果报告性能是一个严重的问题，请启动数据仓库。

正如 Joe 所指出的，您希望数据库尽可能标准化。如果您有单独的报告功能，可能会导致性能问题，您应该运行定期转换（或设置规则以实时构建）第二个只读模式。第一个是OLTP，第二个是OLAP（“数据仓库”）；如果您要认真对待您的数据，这些都是重要的概念。

### 如果知道它很重要，请测试它。

如果没有人给你答案，最好的办法就是自己测试。

(1)制作2个数据库

（2）每个测试你的 2 个表

(3) 在数据库中，只加入字符串“color”，并将其用于 FK；另一个通过 int ('colorID') 加入

用 200 万个虚拟行填充每个。每次运行多个查询，计时第一次运行和平均运行。

使用您的开发机器上的实例将网络排除在外。

您还应该在每种类型的测试之前启动和停止实例；东西会故意留在内存中，以便 SQL 可以更快地交付它，但很可能，这会使您的测试结果与实际操作产生偏差 - 它可能不再位于内存中或缓存中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-14T20:03:02.387

这实际上取决于查询优化器。您的颜色表将非常小，因此可能基于数据库统计信息和查询计划，它可能会完全加载到内存中，因此您不仅最终否定了连接的性能成本，它实际上可能更快。这显然取决于您使用的 dbms，但有几个 dbms 可以提示以特殊方式处理表。

Color 表的另一个 +1 是，如果您需要更改颜色名称，则只需更新 1 次，而不是更改每次出现的字符串值。

# c# - 如何在使用自定义窗口镶边时向 WPF 标题栏添加按钮？

> ID：12431112
> 
> 赞同：9
> 
> 时间：2012-09-14T19:54:46.553
> 
> 标签：c#, wpf, xaml

我正在尝试创建一个简单的按钮模板，其中按钮通常看起来像一条水平线，但是当鼠标悬停时，按钮将在其后面显示“矩形”颜色填充。这是我拥有的代码，但我似乎无法触发触发器。

```
<Window x:Class="TestStylingWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <WindowChrome.WindowChrome>
        <WindowChrome CaptionHeight="36" GlassFrameThickness="0 0 0 1" ResizeBorderThickness="5" />
    </WindowChrome.WindowChrome>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="36" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Button Height="36" Width="36" 
                    HorizontalAlignment="Center" VerticalAlignment="Center"
                Grid.Row="0">
            <Button.Template>
                <ControlTemplate>
                    <Grid>
                        <Rectangle x:Name="PART_ButtonBackgroundRectangle" Fill="LightGray" Width="36" Height="36" Opacity="0" />
                        <Path x:Name="PART_ButtonPath" Data="M10,26 L26,26" Stroke="DarkGray" StrokeThickness="1.5" />
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger SourceName="PART_ButtonBackgroundRectangle" Property="IsMouseOver" Value="True">
                            <Setter TargetName="PART_ButtonBackgroundRectangle" Property="Opacity" Value="1" />
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </Grid>
</Window> 
```

有谁知道为什么我的触发器不起作用，或者可能有更好的方法来做到这一点？我对 WPF 有点陌生，想重构它（以便在许多按钮中使用它），但我不确定如何。

**更新：**好的，所以我想这似乎是因为该按钮位于窗口的标题栏中。有没有解决这个问题的好方法？也许一种为按钮设置点击/悬停优先级的方法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-15T17:06:01.990

您需要设置 Hittest 对您的按钮可见，例如：

```
shell:WindowChrome.IsHitTestVisibleInChrome="True" 
```

# google-drive-api - 2LO OAuth 支持

> ID：12431115
> 
> 赞同：2
> 
> 时间：2012-09-14T19:54:57.083
> 
> 标签：google-drive-api

我刚刚阅读了有关停产文档列表 API 的新闻，建议迁移到 Drive API v2，但似乎对 Google Apps 域的 2LO OAuth 的支持为零。对此有什么推荐的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T15:32:39.253

您应该使用服务帐户。

[https://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

# php - 用php获取国家名称

> ID：12431124
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:55:35.040
> 
> 标签：php

> **可能重复：**
> [IP 到国家？](https://stackoverflow.com/questions/1033/ip-to-country)

我正在尝试使用 php 获取国家/地区名称

```
$country = file_get_contents("http://api.hostip.info/country.php?ip=".$_SERVER['REMOTE_ADDR']); 
```

它对我来说工作正常（返回美国）。但是当我在我的网站上使用它时，对于我的大多数用户来说，它返回的是 XX，这不是国家代码。有什么办法可以用 php 获取国家名称吗？请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T19:58:25.430

使用[mod_geoip](http://dev.maxmind.com/geoip/mod_geoip2)，然后您将可以访问国家名称`$_SERVER['GEOIP_COUNTRY_NAME']`

# javascript - Angular js - 返回一个带有 HTML 字符的字符串，例如

> ID：12431125
> 
> 赞同：18
> 
> 时间：2012-09-14T19:55:42.433
> 
> 标签：javascript, html, string, angularjs

如果另一个给定值不为空，我制作了一个过滤器，只是为了在一个值之后添加一个反斜杠，我想用 . 将这个反斜杠与字符串的其余部分分开`&nbsp;`。实际上，过滤器本身可以工作，但在页面中正确的字符串“”。

```
angular.module('ngMod', []).
filter('antislash', function() {
  return function(input) {
    if( input==null || input.length === 0 ){
      return null;
    }else{  
      return '&nbsp;/&nbsp;'; 
    }
  }
}); 
```

它显示在页面中：`&nbsp;/&nbsp;`

是否存在 html 过滤器或类似的东西？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-14T19:57:08.610

它通过[为](http://www.w3.org/TR/html4/sgml/entities.html).`&nbsp;`

```
angular.module('ngMod', []).
filter('antislash', function() {
  return function(input) {
    if( input==null || input.length === 0 ){
      return null;
    }else{  
      return '\u00A0/\u00A0'; 
    }
  }
}); 
```

您还可以使用[$sanitize](http://docs.angularjs.org/api/ngSanitize.$sanitize)和`ng-bind-html`来`ng-bind-html-unsafe`输出 html 片段。

# php - testAction() 函数在 CakePhp 测试中的 debug() 上返回 null

> ID：12431127
> 
> 赞同：5
> 
> 时间：2012-09-14T19:55:45.933
> 
> 标签：php, cakephp, phpunit

我试图学习如何在 CakePhp 中使用单元测试，我正在尝试编写一个控制器测试。我阅读了有关 testAction() 和 debug() 函数的信息，但它对我不起作用，我的意思是，测试方法通过了，但 debug() 返回 null （因为 testAction 确实如此）

这是我的代码：

```
<?php
App::uses('Controller', 'Controller');
App::uses('View', 'View');
App::uses('PostsController', 'Controller');

class PostsControllerTest extends ControllerTestCase {
    public function setUp() {
       parent::setUp();
       $Controller = new Controller();
       $View = new View($Controller);
       $this->Posts = new PostsController($View);
    }

    public function testIndex() {
          $result = $this->testAction('Posts/Index');
        debug($result);        

    }
} 
```

Posts/index 控制器返回存储在数据库中的所有帖子的列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-22T10:33:38.650

我假设您使用的是 CakePHP 2。

`$this->testAction()`可以返回几个不同的结果，具体取决于您给它的选项。

例如，如果您将`return`选项设置为`vars`，该`testAction()`方法将返回已在测试操作中设置的变量数组：

```
public function testIndex() {
    $result = $this->testAction('/posts/index', array('return' => 'vars'));
    debug($result);
} 
```

`/posts/index`在此示例中，调试数据应该是您在操作中设置的变量数组。

CakePHP 文档描述了您可以在此处返回的可能结果：http: [//book.cakephp.org/2.0/en/development/testing.html#choosing-the-return-type](http://book.cakephp.org/2.0/en/development/testing.html#choosing-the-return-type)

请注意，默认选项`result`为您提供控制器操作**返回**的值。对于大多数控制器操作，这将是`null`，因此您在示例中得到的事实`null`是可以预料的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T21:52:36.093

mtnorthrop 的回答确实对我有用，但只有一次我也处理了我的网站的授权。如果您的网站使用授权，那么 testAction('/action', array('return' => 'contents') 将返回 null。我已经看到了一些解决方案：

一种是遵循此处给出的解决方案： [CakePHP Unit Test Not Returning Content or View](https://stackoverflow.com/questions/19504572/cakephp-unit-test-not-returning-content-or-view) 您在 AppController::beforeFilter() 中检查您是否处于调试模式，如果是，请始终验证用户：

```
// For Mock Objects and Debug >= 2 allow all (this is for PHPUnit Tests)
if(preg_match('/Mock_/',get_class($this)) && Configure::read('debug') >= 2){
    $this->Auth->allow();
} 
```

另一个是遵循此讨论中给出的建议：[https](https://groups.google.com/forum/#!topic/cake-php/eWCO2bf5t98) ://groups.google.com/forum/#!topic/cake-php/ eWCO2bf5t98 并使用 ControllerTestCase 的 generate 函数模拟 Auth 对象：

```
class MyControllerTest extends ControllerTestCase {
    public function setUp() {
        parent::setUp();
        $this->controller = $this->generate('My',
            array('components' => array(
                'Auth' => array('isAuthorized')
            ))
        );
        $this->controller->Auth->expects($this->any())
            ->method('isAuthorized')
            ->will($this->returnValue(true));

    }
} 
```

注意（我使用的是 CakePhp 2.3.8）

# android - 安卓运行时错误？

> ID：12431130
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:55:58.283
> 
> 标签：android, android-activity

下面的程序试图从第一个编辑框中获取单个文本并匹配单词 vysh 并在第二个编辑框中生成输出。第二个编辑框最初有点，如果每个单词都与单词 VYSH 匹配，那么它将替换点。

运行程序时出现错误，错误如下：

```
09-14 19:47:25.593: D/AndroidRuntime(469): Shutting down VM
09-14 19:47:25.593: W/dalvikvm(469): threadid=1: thread exiting with uncaught exception (group=0x40014760)
09-14 19:47:25.593: E/AndroidRuntime(469): FATAL EXCEPTION: main
09-14 19:47:25.593: E/AndroidRuntime(469): java.lang.NullPointerException
09-14 19:47:25.593: E/AndroidRuntime(469):  at java.lang.String.<init>(String.java:505)
09-14 19:47:25.593: E/AndroidRuntime(469):  at com.example.testinput.MainActivity$1.onClick(MainActivity.java:46)
09-14 19:47:25.593: E/AndroidRuntime(469):  at android.view.View.performClick(View.java:3110)
09-14 19:47:25.593: E/AndroidRuntime(469):  at android.view.View$PerformClick.run(View.java:11934)
09-14 19:47:25.593: E/AndroidRuntime(469):  at android.os.Handler.handleCallback(Handler.java:587)
09-14 19:47:25.593: E/AndroidRuntime(469):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-14 19:47:25.593: E/AndroidRuntime(469):  at android.os.Looper.loop(Looper.java:132)
09-14 19:47:25.593: E/AndroidRuntime(469):  at android.app.ActivityThread.main(ActivityThread.java:4123)
09-14 19:47:25.593: E/AndroidRuntime(469):  at java.lang.reflect.Method.invokeNative(Native Method)
09-14 19:47:25.593: E/AndroidRuntime(469):  at java.lang.reflect.Method.invoke(Method.java:491)
09-14 19:47:25.593: E/AndroidRuntime(469):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
09-14 19:47:25.593: E/AndroidRuntime(469):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
09-14 19:47:25.593: E/AndroidRuntime(469):  at dalvik.system.NativeStart.main(Native Method)
09-14 19:47:30.175: I/Process(469): Sending signal. PID: 469 SIG: 9 
```

该程序如下图所示：

```
package com.example.testinput;

public class MainActivity extends Activity {

String rword="vysh";
private StringBuffer gword=new StringBuffer();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button button=(Button) findViewById(R.id.button1);

    final EditText output=(EditText) findViewById(R.id.editText2);
  //input dots in edittext
    char positions[] = new char[rword.length()];
    for (int i=0; i<rword.length(); i++) {
        positions[i] = '.';

}
    String dots=new String(positions);
    output.setText(dots);
    //end of input dots

    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            EditText text=(EditText)findViewById(R.id.editText1);
                            String str="";

            str=text.getText().toString();
            if(!TextUtils.isEmpty(str))
            {           
            //String t=new String(gword);
            char a=str.charAt(0);
            //replace dots with text 
            for (int i=0; i<rword.length(); i++)
            {
                if((rword.charAt(i))==a)
                {
                    gword.setCharAt( i, a);
                }

            }
            //print the output
            output.setText(gword);
            }end of iftextutils         
        }
    }); 
     }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;} 
```

}

尝试初始化字符串缓冲区并根据以下解决方案编辑程序，但程序不起作用...我收到以下错误：09-17 10:48:11.169: 09-17 11:36:03.439: E/AndroidRuntime(926 ): java.lang.StringIndexOutOfBoundsException: index=0 length=0 09-17 11:36:03.439: E/AndroidRuntime(926): at java.lang.AbstractStringBuilder.indexAndLength(AbstractStringBuilder.java:214) 09-17 11: 36:03.439: E/AndroidRuntime(926): 在 java.lang.AbstractStringBuilder.setCharAt(AbstractStringBuilder.java:544) 09-17 11:36:03.439: E/AndroidRuntime(926): 在 java.lang.StringBuffer.setCharAt (StringBuffer.java:698) 09-17 11:36:03.439: E/AndroidRuntime(926): 在 com.example.testinput.MainActivity$1.onClick(MainActivity.java:60) 09-17 11:36:03.439: E/AndroidRuntime(926)：在 android.view.View.performClick(View.java:3110)

它显示 String.charat 函数存在错误。如果它与单词 vysh 匹配，基本上我想将编辑框中的点替换为第一个框中的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:11:27.757

在该行`String t=new String(gword);`中，变量`gword`为空，这会导致异常。据我所见，`t`无论如何您都没有使用，所以...删除该行，或`t`使用简单的`new String()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T12:41:54.483

正确的代码是：package com.example.testinput；公共类 MainActivity 扩展 Activity {

```
String rword="vysh";
private StringBuffer gword=new StringBuffer();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button button=(Button) findViewById(R.id.button1);

    final EditText output=(EditText) findViewById(R.id.editText2);
  //input dots in edittext
    char positions[] = new char[rword.length()];
    for (int i=0; i<rword.length(); i++) {
        positions[i] = '.';gword.append(" ");

}
    String dots=new String(positions);
    output.setText(dots);
    //end of input dots

    button.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            // to get input edibox
            EditText text=(EditText) findViewById(R.id.editText1);
            String str="";
            str=text.getText().toString();

            if(!TextUtils.isEmpty(str))
            {
            //String t=new String(gword);

            char a=str.charAt(0);
            //replace dots with text 
            for (int i=0; i<rword.length(); i++)
            {
                if((rword.charAt(i))==a)
                {
                    gword.setCharAt( i, a);

                }

            }
            //print the output
            output.setText(gword);
            }   //end of if textuitls       
        }
    }); 
     }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T11:07:09.357

尝试这个，

```
String str="";
str=text.getText().toString();
if(!TextUtils.isEmpty(str)){
        //String t=new String(gword);
        char a=str.charAt(0);
        //replace dots with text 
        for (int i=0; i<rword.length(); i++)
        {
            if((rword.charAt(i))==a)
            {
                gword.setCharAt( i, a);
            }

        }
        //print the output
        output.setText(gword);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T23:26:02.280

你得到一个`NullPointerException`因为你的`gword`in 声明但未初始化。所以，初始化它，它会正常工作。执行以下操作：

`private StringBuffer gword = new StringBuffer();`

# c - pop 和 peek 在这种情况下做同样的事情吗？

> ID：12431132
> 
> 赞同：8
> 
> 时间：2012-09-14T19:56:03.043
> 
> 标签：c, stack, peek

从我读过的所有资料来看，他们说 - peek 和 pop 之间的区别在于 peek 不会删除最高值。在我的讲义中提供的示例中，显然他们使用不同的减法方法做了同样的事情。在两次操作之后，top 都减去了 1。

我对吗？可能不是，有人可以解释这些有何不同吗？

```
int pop(void)
{
    assert(top>0);
    return data[--top];
}
int peek(void)
{
    assert(top>0);
    return data[top-1];
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-14T19:58:47.350

`top`是堆栈的状态变量，在这种情况下，它是存储在常规数组中的堆栈。该变量`top`通过存储数组索引来引用堆栈的顶部。

第一个操作`pop`使用减量运算符来*更改*变量`top`。`--top`相当于`top = top - 1`。因此，在调用`pop` *堆栈的状态后也发生了变化*。旧值将保留在数组中，但由于变量`top`现在引用了不同的索引，因此该值被有效地删除：堆栈的*顶部*现在是不同的元素。现在如果你调用 a `push`，这个弹出的值将被覆盖。

第二个操作*不会*改变变量的值`top`，它只是用它来返回栈顶的值。该变量仍然引用与堆栈*顶部*`top`相同的值，因此堆栈未更改。

 ** * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T19:57:56.190

它们将返回相同的值，但仅 pop 更改顶部：

```
--top 
```

这相当于

```
top = top -1 
```

其中 top - 1 不会改变 top 的值。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T20:04:35.030

在一般编程术语中，“pop”是指从堆栈中返回对象的方法，同时将其从堆栈中删除。术语“peek”更通用，可用于其他数据容器/ADT，而不是堆栈。“偷看”总是意味着“给我下一个物品，但不要从容器中取出它”。

大多数情况下，“peek”与类似队列的数据容器一起使用，例如用于检查 Windows 消息队列中下一条消息的 Windows API 函数名为 PeekMessage()。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-14T19:58:30.250

这个

```
return data[--top]; 
```

更改`top`while this的值

```
return data[top-1]; 
```

不会改变它。因此，当您调用`pop`指向堆栈顶部的指针时，会将指针修改为指向新项目，同时`peek`保持指针不变，因此函数的行为与您描述的正确含义相同

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-14T19:58:48.350

在`pop`这样做的过程`--top`中`top=top-1`，它改变了 的值`top`。

而在 中`peek`，它的行为，`top-1`即只是减`top`1 并使用该值，`top`是不变的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-23T05:32:27.043

pop 的功能 - 它提取顶部元素并移动到它之前的下一个元素。因此指针现在移动到下一个元素。顶部元素位置现在减少 1。

peek 的功能 - 它只返回顶部元素但指针仍然存在。所以顶部元素位置保持不变。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-04-09T16:34:29.587

实际上 pop 和 peak 是一样的，但问题是前者看到数据并关闭了盒子，但后来先拿了数据看到了它并关闭了盒子*

# sql - 将 EXECUTE IMMEDIATE 与带有变量的连接字符串一起使用

> ID：12431135
> 
> 赞同：2
> 
> 时间：2012-09-14T19:56:09.983
> 
> 标签：sql, variables, plsql, execute

这个问题是关于不允许“创建”权限的环境。版本是：Oracle 数据库 10g 和 PL/SQL 8.0.0.1480

下面是一个小示例，展示了我要完成的工作，即循环遍历集合中的一组“字段”并用一些值填充它们。每个“字段”都具有相同的根名称“MyCol_”，后跟一个数字。

例如：MyCol_1、MyCol_2、...、MyCol_n。

我能够建立我的串联，但我无法让**EXECUTE IMMEDIATE**工作。

我可以在“MyCol_1”是硬编码值的地方运行这些行：

```
MyCol_1.EXTEND;        
MyCol_1(1) := 'abc'; 
```

但是当我用连接的字符串替换那些硬编码的值时，它会失败

```
v_LoopCounter:=1;        
v_MyTestCode := 'MyCol_' || v_LoopCounter || '.EXTEND' ;
DBMS_OUTPUT.PUT_LINE('Present value of v_MyTestCode: '||v_MyTestCode);
execute immediate v_MyTestCode;     -- <<<-- ERRORS ON THIS LINE <<<-- 
```

出现的错误是：ORA-00900：无效的 SQL 语句

我试图遵循这个网站给出的建议：http: [//docs.oracle.com/cd/B10501_01/appdev.920/a97269/pc_13dyn.htm](http://docs.oracle.com/cd/B10501_01/appdev.920/a97269/pc_13dyn.htm)

> ...将动态 SQL 语句存储在字符串中，该字符串必须是主变量或带引号的文字。将 SQL 语句存储在字符串中时，省略关键字 EXEC SQL 和 ';' 语句终止符。

还有来自： [http ://www.databasejournal.com/features/oracle/article.php/2109681/EXECUTE-IMMEDIATE-option-for-Dynamic-SQL-and-PLSQL.htm 的建议](http://www.databasejournal.com/features/oracle/article.php/2109681/EXECUTE-IMMEDIATE-option-for-Dynamic-SQL-and-PLSQL.htm)

我已经尝试了许多关于 EXECUTE IMMEDIATE 的变体，例如 EXEC、EXECUTE，但没有任何成功。

这是完整的代码示例。这只是一些尝试调试此问题的 beta 代码。我希望这不会分散关于使用连接字符串的 EXECUTE IMMEDIATE 的问题。我试图保持示例代码简单且有据可查。希望这有助于解释这种情况。

```
DECLARE

   TYPE MyNestedTable IS TABLE of varchar2(100);       

   MyCol_1 MyNestedTable;
   MyCol_2 MyNestedTable;

   v_LoopCounter  NUMBER;

   v_MyTestCode   VARCHAR2(200);
   v_SomeValue    VARCHAR2(200);

BEGIN

    MyCol_1 := MyNestedTable();
    MyCol_2 := MyNestedTable(); 

    v_LoopCounter:=1;

    v_MyTestCode := 'MyCol_' || v_LoopCounter || '.EXTEND' ;
    DBMS_OUTPUT.PUT_LINE('Present value of v_MyTestCode: '||v_MyTestCode);
    EXECUTE IMMEDIATE v_MyTestCode;     -- <<<-- ERRORS ON THIS LINE <<<--

    v_SomeValue := 'abc';
    v_MyTestCode := 'MyCol_' || v_LoopCounter || ':= '||v_SomeValue;
    DBMS_OUTPUT.PUT_LINE('Present value of v_MyTestCode: '||v_MyTestCode);
    EXECUTE IMMEDIATE v_MyTestCode;     -- <<<-- ERRORS ON THIS LINE <<<--

        MyCol_2.EXTEND;
        MyCol_2(1) := 200;
        DBMS_OUTPUT.PUT_LINE('MyCol_2 '||MyCol_2(1));    
        DBMS_OUTPUT.PUT_LINE('MyCol_1 '|| ', '||'MyCol_2 ');            DBMS_OUTPUT.PUT_LINE(MyCol_1(1)|| ', '||MyCol_2(1));

END; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:39:58.597

`Collection.EXTEND`它不是一个`SQL`完整的语句，它是一个用于扩展集合的 PLSQL 语句。话虽如此，下面的代码将永远无法工作-

```
v_LoopCounter:=1;        
v_MyTestCode := 'MyCol_' || v_LoopCounter || '.EXTEND' ;
execute immediate v_MyTestCode; 
```

但是，如果动态 sql 是一个完整的 PLSQL 存根/匿名块，`EXECUTE IMMEDIATE`则将对其进行处理。喜欢

```
v_LoopCounter:=1;        
v_MyTestCode := 'begin MyCol_' || v_LoopCounter || '.EXTEND;end;' ;
execute immediate v_MyTestCode; 
```

这可能达到目的，但如果上述是从存储过程本身内完成的，那么范围`.EXTEND`是有问题的（即未经测试）。您可以尝试看看它是否有效。

# ajax - 如何使用 Chrome 的开发者工具重复 POST 请求？

> ID：12431137
> 
> 赞同：16
> 
> 时间：2012-09-13T17:36:58.197
> 
> 标签：ajax, google-chrome

不确定这是否是正确的堆栈交换来询问这个问题，但是这里......

我正试图让自己摆脱 Firebug，它多年来一直对我很有帮助。Chrome 的开发工具中似乎缺少的一项功能是重复 AJAX POST 的能力。在萤火虫中，我可以右键单击控制台中的请求并点击“在新选项卡中打开”，并且请求会完全按照最初发送的方式重复。在 Chrome 中，相同的操作只是在链接上执行正常的 GET，没有任何发布数据。

有没有办法在 Chrome 的开发工具中重复 AJAX POST？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T20:31:25.013

没有。不过，有一个开放的错误报告要求该功能。

[问题 107006：功能请求：能够重播先前发出的请求（尤其是 XHR）](http://code.google.com/p/chromium/issues/detail?id=107006)

# xml - JAXB 不想要包装类

> ID：12431138
> 
> 赞同：1
> 
> 时间：2012-09-14T19:56:36.387
> 
> 标签：xml, jaxb, jaxb2

下面是我必须使用的 xml：

```
<watermarks identifier="X" hostname="X">
   <watermark type="XX" value="1234"/>
   <watermark type="YY" value="1234" />
</watermarks> 
```

我只想使用 JAXB 获取 Watermark 对象的列表，而无需创建新的 Watermarks 类。是否有可能或者我必须创建一个包含 Watermark 对象列表的 Watermarks 类？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:21:54.767

您可以使用[**StAX (JSR-173)**](http://jcp.org/en/jsr/detail?id=173) `XMLStreamReader`来解析 XML 文档（从 Java SE 6 开始，JDK/JRE 中就包含了一个实现）。然后你可以将它推进到每个`watermark`元素，然后让[**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)解组它。

**演示**

假设`Watermark`该类带有注释，`@XmlRootElement`您可以执行以下操作。

```
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Watermark.class);
        Unmarshaller unmarshaller = jc.createUnmarshaller();

        StreamSource source = new StreamSource("input.xml");
        XMLInputFactory xif = XMLInputFactory.newFactory();
        XMLStreamReader xsr = xif.createXMLStreamReader(source);
        xsr.nextTag(); // Advance to "watermarks" element
        xsr.nextTag(); // Advance to "watermark" element

        while(xsr.getLocalName().equals("watermark")) {
             Watermark object = (Watermark) unmarshaller.unmarshal(xsr);
             System.out.println(object);
             xsr.nextTag();
        }
    }

} 
```

**完整示例**

*   [JAXB 对“通用”现实世界文档进行解组](https://stackoverflow.com/questions/12402215/jaxb-unmarshalling-of-generic-real-world-documents/12402813#12402813)

**通用列表包装类**

在我对以下问题的回答中，我提供了一个通用列表包装类的示例，您可能会发现它很有用。

*   [如何使用 jaxb 编组多个对象](https://stackoverflow.com/questions/12323397/how-to-marshalling-the-muliptle-object-using-jaxb/12323657#12323657)

# c++ - #include 的 C++ 问题 尝试编译 gstreamer 应用程序时

> ID：12431142
> 
> 赞同：1
> 
> 时间：2012-09-14T19:57:01.200
> 
> 标签：c++, visual-c++, include, gstreamer

当我搜索它时，我没有找到类似的东西。我正在尝试根据在另一个堆栈溢出线程中找到的代码制作一个简单的 gstreamer 应用程序。每当我尝试通过使用命令提示符转到目录并输入`cl cppgstreamer.cc`. 最初，唯一的 include 是`#include <gstreamermm.h>`，这给了我

> cppgstreamer.cc(1)：致命错误 C1083：无法打开包含文件：'gstreamermm.h'：没有这样的文件或目录

即使我放入`cppgstreamer.cc`与`gstreamermm.h`. 然后我尝试将包含更改为

```
#include "C:\Users\MY_NAME\Documents\gstreamer c++\gstreamermm-0.10.10.2\gstreamer\gstreamermm.h" 
```

MY_NAME 被我的名字取代。

这似乎可行，但随后它尝试在 中进行包含`gstreamermm.h`，并且它们在`#include <file.h>`形式中，所以我收到另一个致命错误 C1083，除了这次使用`init.h`，或者当我更改了它时，`error.h`。他们有依赖关系。有没有办法让我的编译器喜欢`#include <file.h>`语法？我真的不想浏览文件并将每个更改`#include <file.h>`为`#include "file.h"`.

对不起，如果这是一个愚蠢的问题。我是 C++ 新手，尽管我过去曾使用过 C。我正在使用 Microsoft Visual C++ Express 2010。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:12:40.963

您需要添加包含`gstreamermm.h`包含路径的目录。我这里没有可查看的可视化 C++，但它位于 C/C++ 下的项目属性中的某个位置。

# ms-access - 优化从 MS Access 导出为 PDF 的 VBA 代码

> ID：12431143
> 
> 赞同：1
> 
> 时间：2012-09-14T19:57:04.747
> 
> 标签：ms-access, vba, ms-access-2010

我有两个函数可以根据相同的标准打开和保存两个不同的报告。除了引用之外，它们是相同的：

```
Function Export_MLR()
On Error GoTo Export_MLR_Err

Dim strReportName As String

DoCmd.OpenReport "Market Rate Notification Final", acViewPreview
strReportName = "S:\National Installations\Market Labor Rates\MLR_INV\MLR\" & Format    (Reports![Market Rate Notification Final].Market_ID, "00") & " " & Replace(Reports![Market  Rate Notification Final].Product_Code, " / ", "_") & "-" & "Market Rate Notification Final" & "_" & Format(Date, "mmddyy") & ".pdf"

DoCmd.OutputTo acOutputReport, "Market Rate Notification Final", "PDFFormat(*.pdf)", strReportName, False, , , acExportQualityScreen
DoCmd.Close acReport, "Market Rate Notification Final", acSaveNo

Export_MLR_Exit:
Exit Function

Export_MLR_Err:
MsgBox Error$
Resume Export_MLR_Exit

End Function 
```

然后我创建了这个函数来选择数据并将其逐行放入报告引用的表格中：

```
Function MassMarket()
On Error GoTo MassMarket_ERR

Dim db As DAO.Database
Dim rs1 As DAO.Recordset
Dim rs2 As DAO.Recordset

'this query creates my rs1 recordset'
DoCmd.SetWarnings (warningsOff)
DoCmd.OpenQuery "mass_market", acNormal, acEdit
DoCmd.SetWarnings (warningsOn)

Set db = CurrentDb()
Set rs1 = db.OpenRecordset("Mass_market_Rate_change")
Set rs2 = db.OpenRecordset("tbl_Form_Auto")

'this checks and clears any records in rs2' 
If rs2.EOF = False And rs2.BOF = False Then
rs2.MoveFirst
rs2.Delete
End If
rs1.MoveFirst

'loop goes through and adds 1 line runs reports saves them and deletes line'
 Do Until rs1.EOF

    Set rs2 = db.OpenRecordset("tbl_Form_Auto")
        rs2.AddNew
        rs2![MarketID] = rs1![MarketID]
        rs2![Product_ID] = rs1![Product_ID]
       rs2.Update
    Call Export_Invoice
    Call Export_MLR

    rs1.MoveNext
    rs2.MoveFirst
    rs2.Delete

 Loop

MassMarket_Exit:
Exit Function

MassMarket_ERR:
MsgBox Error$
Resume MassMarket_Exit

End Function 
```

现在所有这一切都像一个魅力，但它平均每分钟创建 16 个 .pdf 文件，而我必须创建 820 个 .pdf 文件（大约 50 分钟）。如果这是我能做到的最好的，那么我会接受它，但如果可能的话，我很想把这个时间减半。感谢您的任何和所有输入。NR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:33:07.327

在评论中，您指出大部分时间都花在将报告导出为 PDF 的功能上。我不确定我们是否可以加快速度。

您似乎打开了一个报告，引用该报告中的一个值以用作 PDF 文件名的一部分，然后调用`OutputTo`具有相同报告名称的方法将其保存为 PDF。

在那种情况下，我不确定“幕后”会发生什么...... Access 是否打开了报表对象的第二个实例，或者是否足够聪明地看到您已经打开了一个实例并只使用该实例。

作为测试，尝试向 Access 发出信号以使用第一个报表实例。*从该方法的ObjectName*参数的在线帮助中`OutputTo`：

*如果要输出活动对象，请为 ObjectType 参数指定对象的类型并将此参数留空。*

所以我建议在你的代码中试试这个：

```
DoCmd.OutputTo acOutputReport, , "PDFFormat(*.pdf)", _
    strReportName, False, , , acExportQualityScreen 
```

*如果 Access 报错，请尝试使用ObjectName*参数的空字符串。

```
DoCmd.OutputTo acOutputReport, "", "PDFFormat(*.pdf)", _
    strReportName, False, , , acExportQualityScreen 
```

我不知道这个建议会在多大程度上（或什至）加速你的代码。但如果你不能以某种方式加速这些导出功能，我的预感是你希望将总时间减少一半是一个不稳定的提议。

# java - 视网膜显示器上的摆动和位图

> ID：12431148
> 
> 赞同：6
> 
> 时间：2012-09-14T19:57:18.080
> 
> 标签：java, swing, icons, pixel, retina-display

我有一个可以在 OS X 上运行的 Java 桌面应用程序。

现在新的 MacBook Pro 有一个视网膜显示屏，我很担心：它在 Swing 方面是如何工作的？

当 Java 应用程序同时使用 Swing 组件和一些位图图形（如自定义图标/ImageIcon）时会怎样？

是否应该自动调整所有桌面 Java 应用程序的大小（例如通过将每个像素翻两番）或者我是否需要创建两个版本的图标集（例如，一个具有 24x24 图标，另一个具有 96x96 图标）并以某种方式确定该应用程序在视网膜显示器上运行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-03-05T10:59:51.593

使用 IconLoader 库。它支持 HiDPI 图像[http://bulenkov.com/iconloader/](http://bulenkov.com/iconloader/)它还提供了一种处理 HiDPI 图像（绘图等）的方法

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-29T09:53:33.600

在 Apple 的 Java 6 上，您可以提供同一图像的多个版本。根据屏幕（视网膜与否），选择并绘制一个或另一个图像。

但是，这些图像必须以特殊方式加载：

```
Toolkit.getDefaultToolkit().getImage("NSImage://your_image_name_without_extension"); 
```

例如，如果您的（常规分辨率）图像被称为：“scissor.png”，您必须创建一个高分辨率版本“scissor@2x.png”（遵循[Apple 命名约定](http://developer.apple.com/library/mac/#documentation/GraphicsAnimation/Conceptual/HighResolutionOSX/Optimizing/Optimizing.html)）并将两个图像放在`Resources`您的目录中应用程序包（是的，您需要[捆绑您的应用程序](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)）。然后调用：

```
Image img = Toolkit.getDefaultToolkit().getImage("NSImage://scissor"); 
```

您可以在按钮中使用生成的图像，它会神奇地以正确的分辨率绘制。

您可以使用其他两个“技巧”：

1.  在绘制图像之前在 Graphics2D 对象上使用 (0.5, 0.5) 的 AffineTransform。另请参阅[此 java-dev 消息](http://lists.apple.com/archives/java-dev/2012/Jun/msg00069.html)
2.  [使用此 hack](http://blog.beatunes.com/2013/04/creating-retina-capable-images-with.html)以编程方式创建图像的高 dpi 版本

第一个“技巧”（0.5 缩放）现在也适用于 Oracle 的 Java 7/8。即，如果您直接绘制一个缩放为 0.5 的图像到组件的 Graphics 对象，它将在 Retina 显示器上以高分辨率呈现（并且也是其原始大小的一半）。

### 更新

[从 Java 9 开始，通过MultiResolutionImage](https://docs.oracle.com/javase/9/docs/api/java/awt/image/MultiResolutionImage.html)接口对不同分辨率的图像提供了更好的内置支持。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/51088520/942774)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-14T10:21:34.357

我可以确认您的图像缩放适用于 Oracle Java 1.8。我无法让`NSImage`黑客在 java 1.7 或 1.8 上工作。我认为这只适用于Mac的Java 6 ...

除非其他人有更好的解决方案，否则我所做的如下：

创建两组图标。如果您有一个`48pixel`宽度图标，请创建一个`48px`@normal`DPI`和另一个 at `96px`with `2x DPI`。重命名`2xDPI`图像`@2x.png`以符合苹果命名标准。

子类化`ImageIcon`并调用它`RetinaIcon`或其他任何东西。您可以按如下方式测试 Retina 显示屏：

```
public static boolean isRetina() {

boolean isRetina = false;
GraphicsDevice graphicsDevice = GraphicsEnvironment.getLocalGraphicsEnvironment().getDefaultScreenDevice();

try {
              Field field = graphicsDevice.getClass().getDeclaredField("scale");
        if (field != null) {
            field.setAccessible(true);
            Object scale = field.get(graphicsDevice);
            if(scale instanceof Integer && ((Integer) scale).intValue() == 2) {
                isRetina = true;
            }
        }
    } 
    catch (Exception e) {
        e.printStackTrace();
    }
    return isRetina;
} 
```

确保`@Override`新类的宽度和高度`ImageIcon`如下：

```
@Override
public int getIconWidth()
{
    if(isRetina())
    {
        return super.getIconWidth()/2;
    }
    return super.getIconWidth();
}

@Override
public int getIconHeight()
{
    if(isRetina())
    {
        return super.getIconHeight()/2;
    }
    return super.getIconHeight();
} 
```

一旦您对视网膜屏幕进行了测试并且您的自定义宽度/高度方法被覆盖，您可以`painIcon`按如下方式自定义该方法：

```
@Override
public synchronized void paintIcon(Component c, Graphics g, int x, int y) 
{
    ImageObserver observer = getImageObserver();

    if (observer == null) 
    {
        observer = c;
    }

    Image image = getImage();
    int width = image.getWidth(observer);
    int height = image.getHeight(observer);
    final Graphics2D g2d = (Graphics2D)g.create(x, y, width, height);

    if(isRetina())
    {
        g2d.scale(0.5, 0.5);
    }
    else
    {

    }
    g2d.drawImage(image, 0, 0, observer);
    g2d.scale(1, 1);
    g2d.dispose();
} 
```

我不知道这将如何在多个屏幕上工作——还有其他人可以帮忙吗？？？

希望这段代码能有所帮助！

杰森·巴拉克劳。

这是使用上述缩放的示例： [RetinaIcon 在左侧。ImageIcon 在右侧](http://i.stack.imgur.com/7w2mD.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-04T17:54:42.337

这是一个解决方案，在苹果菜单中使用图标时也可以使用。那里的图标自动变灰。所以我实现了一个密集绘制的类 DenseIcon：

```
public synchronized void paintIcon(Component c, Graphics g, int x, int y) {
    if(getImageObserver() == null) {
        g.drawImage(getImage0(), x, y, getIconWidth(), getIconHeight(), c);
    } else {
        g.drawImage(getImage0(), x, y, getIconWidth(), getIconHeight(), getImageObserver());
    }
} 
```

如何挂钩我还没有弄清楚的变灰。因此，作为一个组合，我们返回一个低分辨率图像，以便菜单可以进行修改：

```
public Image getImage() {
    Image image = getImage0().getScaledInstance(
            getIconWidth(),
            getIconHeight(),
            Image.SCALE_SMOOTH);
    ImageIcon icon = new ImageIcon(image, getDescription());
    return icon.getImage();
} 
```

[您可以在gist](https://gist.github.com/jburse/bf66f9e84104ad7cfdd5c04fdbaa68c9#file-denseicon-java)上找到完整课程的代码。您需要使用两倍大小的图像的 URL 来实例化图标类。适用于 2K 显示器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-26T01:19:51.963

这是我的视网膜 macbook '12 上图标的样子：

![在此处输入图像描述](../Images/858210f540d0072b044a2ce5787beae5.png)

在 IntelliJ IDEA 11（swing 应用程序）的左侧图标和声称是*retinized*的 IDEA 12 右侧。如您所见，自动调整大小的图标（在左侧）看起来很丑。

据我所知，他们[和 Chrome 团队的人一样](http://code.google.com/p/chromium/issues/detail?id=111101&q=remove%20pdf&colspec=ID%20Pri%20Mstone%20ReleaseBlock%20OS%20Area%20Feature%20Status%20Owner%20Summary)，是通过提供双倍大小的图标来实现的。

# java - 按字符串调用引用

> ID：12431149
> 
> 赞同：4
> 
> 时间：2012-09-14T19:57:20.567
> 
> 标签：java, reference

在我的代码中，我有一个 HPContentModule：

```
@Resource(name = "HPContentModule")
private HPContentModule hpContentModule; 
```

我想知道是否有可能得到`String`这样的：

```
String myString = "hpContentModule"; 
```

这样我就可以调用`hpContentModule`using `myString`，做类似 的事情`myString.init();`，`init()`方法在`HPContentMethod`哪里？

或者，

如果我有豆子：

```
<beans:bean id="myBean" class="com.app.search.HPContent" /> 
```

我可以`String`在控制器中调用这个bean吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:31:28.730

有多种方法可以做到这一点。

最简单的方法之一是使用 Spring 的`ApplicationContext`. 您可以通过[多种方式](http://mythinkpond.wordpress.com/2010/03/22/spring-application-context/)访问`ApplicationContext`​​ . 一旦你有一个副本，`ApplicationContext`你可以像这样调用该`getBean()`方法：

```
HPContentModule hpContentModule = (HPContentModule) appContext.getBean( "myBean" ); 
```

# linux - 从命令行调用 sed 工作但在脚本中失败

> ID：12431151
> 
> 赞同：1
> 
> 时间：2012-09-14T19:57:32.990
> 
> 标签：linux, bash, sed

我一直在使用以下调用`sed`来删除行文件。

```
sed "/% Program:/,/mode: SPIKE/d" file.tt > file.tt.nh 
```

我尝试编写一个 bash 脚本以允许我一次在多个文件上运行该脚本。然而`sed`失败了。

```
sed "/% Program:/,/mode: SPIKE/d" file.tt > file.tt.nh
sed: -e expression #1, char 1: unknown command: `"' 
```

这是我写的不工作的脚本

```
#!/bin/bash
SEDARG='"/% Program:/,/mode: SPIKE/d"';
for F in *.tt
do
  OUT=$F'.nh';
  echo 'sed '$SEDARG' '$F' > '$OUT;
  sed $SEDARG $F > $OUT
done 
```

令我困惑的是，如果我复制 echo'd 字符串并将其粘贴到命令行中，它可以正常工作。

有谁知道为什么这个脚本失败但命令行调用有效？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:00:43.973

报价很棘手。基本上，将双引号从您*分配*到`$SEDARG`的位置移动到您*使用* `$SEDARG`的位置。

```
SEDARG='/% Program:/,/mode: SPIKE/d'
for F in *.tt
do
  OUT="$F.nh"
  echo "sed $SEDARG $F > $OUT"
  sed "$SEDARG" "$F" > "$OUT"
done 
```

# wcf - 如何使用 XMLSerializer 从 WCF 输出中删除 xmlns:xsd、xmlns:xsi、xsi:type

> ID：12431153
> 
> 赞同：4
> 
> 时间：2012-09-14T19:57:36.950
> 
> 标签：wcf, xmlserializer

将 WCF Restful 服务与 XmlSerializer 一起使用，我得到以下响应。

```
<?xml version="1.0" encoding="utf-8"?>
<availabilityResponse xmlns:xsd="http://www.w3.org/2001/XMLSchema"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns="http://xyz.com/ABCService">
  <availabilityResult>
    <title xsi:type="Availability_1">
      <titleId>0010327457</titleId>
      <availability>
        <purchasable>false</purchasable>
        <availableCopies>0</availableCopies>
        <totalCopies>0</totalCopies>
      </availability>
    </title>    
  </availabilityResult>
</availabilityResponse> 
```

（我希望删除 xmlns:xsd、xmlns:xsi 和 xsi:type 标签）

“Availability_1”是我在代码中使用的一种派生类型。我真的不想在回复中显示这一点。

我通过在服务合同中指定 [XmlSerializerFormat] 来使用 XmlSerialzer。WCF 能够正确序列化我的响应，但我唯一的问题是额外的 xmlns 标记。是的，我知道它们在那里很有用。但是，客户端只对纯 xml 感兴趣。

通过查看 stackoverflow 中的各种帖子，我了解到我可以通过覆盖 XmlTextWriter 的一些方法来做到这一点。但我遇到的问题是如何让 WCF 知道在序列化时使用我的 customXmlWriter（继承自 XmlTextWriter）而不是通用 XmlTextWriter。

如何将我的 customXmlTextWriter 传递给我目前没有任何控制权的 XmlSerializer。

我刚刚创建了我的数据类并从我的角度定义了服务合同方法，但我不必从我这边做任何序列化的事情，因为 WCF 会自行处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T09:11:37.697

一个稍微不同的想法，但它在关注点分离的路线上，因为编写自定义序列化程序以实际使响应从真正的合规原则中看到的那种“无效”可以被视为一种反模式。

我的想法是开发自己的 IIS 自定义 HTTP 处理程序并将其添加到 IIS 处理管道中。这样做，将允许您公开调整后的响应和完全合规的响应。

自定义 HTTP 处理程序可以使用简单的 XSLT 来删除所需的名称空间。

看看这篇文章开始 - [http://www.iis.net/learn/develop/runtime-extensibility/developing-iis-modules-and-handlers-with-the-net-framework](http://www.iis.net/learn/develop/runtime-extensibility/developing-iis-modules-and-handlers-with-the-net-framework)

# php - 我可以在电子邮件标题中使用 php 包含吗？

> ID：12431158
> 
> 赞同：-6
> 
> 时间：2012-09-14T19:57:50.367
> 
> 标签：php, email

试图做到这一点

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: $sales_rep_name <$sales_rep>' . "\r\n";
mail($to,$subject,$message,$headers); 
```

与此一起工作

```
//SET UP INFORMATION GOES HERE
############################################################################
$sales_rep_name="Tommy";
$sales_rep="email@yoursite.com"; 
```

但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T19:58:39.060

您需要双引号来获取要在字符串中插入的变量：

```
$headers .= "From: $sales_rep_name <$sales_rep>" . "\r\n";
            ^                                  ^ 
```

# google-chrome - 两个 H.264 mp4 视频：一个在 Chrome 中播放，一个不在

> ID：12431159
> 
> 赞同：8
> 
> 时间：2012-09-14T19:57:51.280
> 
> 标签：google-chrome, video, h.264, mp4

我有两个不同的视频，（据我所知）通常以相同的方式捕获，我试图在 Chrome 中使用 HTML5 视频标签播放。两个视频都可以在 VLC 中完美打开和播放，所以我认为文件损坏没有任何问题，而且都是使用 YUV 颜色空间的 H.264 格式的 mp4。但是，当我尝试在 Chrome ( `Version 21.0.1180.89`) 中播放一个时，它给了我一个灰色的播放按钮，而另一个则完美运行。作为参考，我的操作系统是 Ubuntu 10.10，尽管我在较新版本的操作系统中看到了同样的问题。这是我将视频加载到 HTML5 标记中，还是直接导航到存储视频的 URL。我在这里有点不知所措，有谁知道我应该去哪个方向找到两个视频之间的显着差异？

### 编辑：

这个有效：[https ://dl.dropbox.com/u/100841270/1_G101_20120914_0139PM_Course_101.mp4](https://dl.dropbox.com/u/100841270/1_G101_20120914_0139PM_Course_101.mp4)

这个没有：[https ://dl.dropbox.com/u/100841270/1_G101_20120914_1156AM_Course_101.mp4](https://dl.dropbox.com/u/100841270/1_G101_20120914_1156AM_Course_101.mp4)

### 更新：

它似乎与操作系统无关，因为我在 Windows 和 Linux 中都看到了同样的问题。Ubuntu 中的 Chrome 22 beta 似乎也不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T16:45:48.157

我们遇到了这个问题，发现按照 iPhone 的 webview 标准对文件进行编码会创建在 Chrome 中可以正常播放的文件。Chrome 和 iPhone webview 共享相同的渲染引擎，并且看起来它们具有相似的 HTML5 视频要求。

并非所有 H.264 编码的 Mp4 文件都受 Chrome 支持，编码过程中的细微差别可能会产生无法正常工作的视频。即使使用完全相同的编码设置，H.264 也是可变比特率编码器，因此不同的视频可能会超过比特率限制。

对我们来说成功的编码设置是：

*   仅使用 H.264 Baseline Profile Level 3.0
*   分辨率低于 640 x 480，帧率高达 30 fps
*   Baseline 配置文件不支持 B 帧。
*   比特率限制为 900kb。

这是我们用来达到这些设置的[参考。](http://developer.apple.com/library/safari/#documentation/AppleApplications/Reference/SafariWebContent/CreatingVideoforSafarioniPhone/CreatingVideoforSafarioniPhone.html)Chrome 可能并非所有这些都是必需的，但我们坚持这些规则并发现所有视频都可以在两个平台上运行。进一步的研究可能会确定导致 Chrome 无法播放视频的确切设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:32:35.847

我正在运行 Windows XP，而 chrome 也不喜欢第二个。

我对原因的最佳猜测是，工作的只有 6.4 MB，但另一个大约是 21.7 MB。Chrome 可能只是拒绝直接播放那么大的视频。您是否尝试过让 YouTube 托管它，并将他们的播放器嵌入您的网站？那可能会解决问题。（如果您担心随机的陌生人观看视频，为什么要在此处发布它们？为什么*有人*甚至想观看它们？但是，您可以在 YouTube 上将视频设为私有，以防这只是两个演示相同问题的视频你面对的是真实的视频。）

当我尝试使用 Windows 的内置播放器时，这两个视频都存在不同的问题，这也可能使情况更加复杂。当我使用电脑的视频播放器时，这两个视频都显得失真，水平拉伸了 300%。

您是否还有其他视频以完全相同的方式失败？由于这些只是真实的测试视频，如果这是唯一存在该问题的视频，我不会说它真的是一个问题，除非它再次出现。功能失调的视频可能刚刚遇到百万分之一的机会，它具有正确的内容使其无法正常工作。

# sql - 触发器在另一个表上插入数据，沿途散列

> ID：12431171
> 
> 赞同：0
> 
> 时间：2012-09-14T19:58:35.227
> 
> 标签：sql, sql-server, session, hash, coldfusion

冷融合/SQL Server

我有一个旧用户表 (USERS) 和一个新用户表 (PT_USERS) 用于新的冷融合应用程序。

新应用是一个开源产品，拥有自己的用户表和登录系统。只要用户已经登录到主系统，并且他们的 USERS 用户名、用户名和密码存在于 PT_USERS 表中，我就已经将应用程序修改为自动登录。

我希望能够使用 SQL 触发器自动将 USERS 中的任何新记录添加到 PT_USERS 表中。问题是，新应用程序 hash() 的用户名和密码在 PT_USERS；因此，当您登录时，它会散列您的值并与数据库的值进行比较。

似乎 hash() 函数默认使用 MD5，尽管当我在 hashbytes() 中指定 MD5 时，它返回相同的值，但带有 0x 前缀。为什么是这样？我怎样才能使这些相同？

其次，我从来没有写过触发器。我应该采取哪些步骤来编写一个在插入新表之前将散列某些值的方法？

# html - 跨浏览器html5离线数据存储？

> ID：12431177
> 
> 赞同：0
> 
> 时间：2012-09-14T19:58:43.110
> 
> 标签：html, web, storage, local

我目前正在寻找用 HTML5 编写一个网络应用程序。这是我的第一个 HTML5 网络应用程序。

这个应用程序的主要特点是它的离线功能。当我的意思是离线时，它类似于 C:\APP\index.html （对于 Windows ），对于 Mac 也是一样的。话虽如此，我一直在研究 LocalStorage、WebSQL、IndexedDB。

我得出的结论是 LocalStorage 对于我要编写的 Web 应用程序来说不够好。IndexedDB 仅适用于除 safari 之外的所有主要浏览器。Safari（桌面和 iOS）支持 WebSQL 而不是 IndexedDB。然后我发现不支持 WebSQL。

所以我想知道我的困境是否有一个“通用”的解决方案？或者我是否应该编写 IndexedDB 和 WebSQL 代码，以便它可以在所有浏览器上运行？欢迎任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:12:53.370

您的应用程序是唯一需要访问它存储的数据的东西，对吧？如果是这样，数据就是数据就是数据，只要您包含读取、写入和理解数据编码的信息所需的所有内容，您使用什么格式来存储并不重要（不是双关语）它。无论您使用哪种语言来创建应用程序，它都将具有可以操作存储数据的库函数。

如果最坏的情况变得最糟，您总是可以使用最小的公分母并使用原始二进制文件或文本文件；这些是唯一真正的通用格式。

# android - android CountDownTimer - 最后一个 onTick 没有被调用 - 使用什么干净的解决方案？

> ID：12431180
> 
> 赞同：5
> 
> 时间：2012-09-14T19:58:53.290
> 
> 标签：android, timer, countdown

沮丧的帖子....

我刚刚偶然发现了许多人在这里报告的“CountDownTimer - last onTick not called”问题。

显示问题的简单演示

```
package com.example.gosh;

import android.app.Activity;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.util.Log;

public class CountDownTimerSucksActivity extends Activity {

int iDontWantThis = 0; // choose 100 and it works yet ...

private static final String TAG = "CountDownTimerSucksActivity";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    new MyCountDownTimer(10000 + iDontWantThis , 1000).start();
}

class MyCountDownTimer extends CountDownTimer {

    long startSec;

    public MyCountDownTimer(long millisInFuture, long countDownInterval) {
        super(millisInFuture, countDownInterval);
        // TODO Auto-generated constructor stub
        startSec = System.currentTimeMillis() ;
    }

    @Override
    public void onFinish() {
        // TODO Auto-generated method stub
        Log.e(TAG, " onFinish (" + getSeconds() + ")");
    }

    @Override
    public void onTick(long millisUntilFinished) {
        // TODO Auto-generated method stub
        Log.e(TAG, millisUntilFinished + " millisUntilFinished" + " (" + getSeconds() + ")");

    }

    protected long getSeconds() {
        return  (((System.currentTimeMillis() - startSec) / 1000) % 60);

    }

}

} 
```

测试运行的 logcat 输出...

![logcat 输出](../Images/b2b1fc70a98b1343ac70e2ce55f9ad0d.png)

如您所见，上一次调用 onTick 发生在 1963 毫秒 millisUntilFinished 时，然后下一次调用在近 2 秒后发生 onFinished。肯定是有问题的行为。我在这方面发现了很多帖子，但还没有干净的解决方案。我在源代码中包含的一个，如果您将 iDontWantThis 字段设置为 100，它可以工作。

我不介意小领域的解决方法，但这似乎是一个核心功能，我无法理解它还没有修复。你们正在做什么来为此提供一个干净的解决方案？

非常感谢

马丁

**更新：**

Sam 对 CountDownTimer 的一个非常有用的修改，它不会由于内部毫秒延迟而抑制最后一个滴答声，并且还可以防止每个滴答声随着时间的推移而累积毫秒延迟，可以在[这里找到](https://stackoverflow.com/questions/12762272/android-countdowntimer-additional-milliseconds-delay-between-ticks)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T20:09:27.070

您遇到的行为实际上是在`CountdownTimer`代码中明确定义的；[看看源码](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/CountDownTimer.java)。

注意内部`handleMessage()`，如果剩余时间小于间隔，它明确地不调用`onTick()`，只是延迟直到完成。

但是请注意，源代码`CountdownTimer`只是一个非常薄的包装器`Handler`，它是 Android 框架的真正计时组件。作为一种解决方法，您可以非常轻松地从此源创建自己的计时器（少于 150 行）并删除此限制以获得最终的滴答回调。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:35:41.487

我认为挫败感来自对蜱应该是什么的错误预期。正如另一个答案所指出的，这种行为是故意的。另一种可能的处理方法是简单地指定一个较小的间隔。例如，如果您正在实现某种倒计时时钟，将时间间隔更改为 500 不会有什么坏处。如果仅在秒数变化时完成某些工作很重要，那么您也可以通过存储和的结果来做到这`getSeconds()`一点仅当该值更改时才执行该工作。

如果`CountdownTimer`更改为即使剩余时间小于间隔也始终触发最后一个滴答声，我敢肯定 StackOverflow 会有一堆问题，例如“为什么我在最后一个滴答声中没有足够的时间`CountdownTimer`？”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T11:36:53.897

我不明白你为什么说这是故意行为，API 准确地说：

“将倒计时安排到未来的某个时间，并在此期间定期通知。”

```
new CountDownTimer(30000, 1000) {

    public void onTick(long millisUntilFinished) {
        mTextField.setText("seconds remaining: " + millisUntilFinished / 1000);
    }

    public void onFinish() {
        mTextField.setText("done!");
    }
}.start(); 
```

如果您将时间设置为 30 秒，并将 countDownInterval 设置为 1000，正如 API 所说的那样，它应该被准确地触发 30 次。我认为这不是故意的行为，而是错误的实施。

解决方案应该是 Sam 在这里提出的解决方案：

[android CountDownTimer - 滴答之间的额外毫秒延迟](https://stackoverflow.com/questions/12762272/android-countdowntimer-additional-milliseconds-delay-between-ticks)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-24T09:49:57.303

Android 的[CountDownTimer](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/CountDownTimer.java)第一次调用**onTick()**（无延迟）计时器启动（如[第 93 行](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/CountDownTimer.java#93)所示）

发布此消息后，onTick() 会根据计时器完成前的剩余时间来调用。

> 如果直到计时器完成的剩余时间小于指定的时间间隔，则不会调用 onTick() （[第 136 行](https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/CountDownTimer.java#136)）。这就是你最后一个 onTick() 没有被调用的原因。

## 修改 CountDownTimer 类

我已修改计时器以在指定延迟后调用 onTick() 所有间隔（包括第一个和最后一个）。这是课程 -

```
public abstract class CountDownTimer {

    private final long mMillisInFuture;
    private final long mCountdownInterval;
    private long mStopTimeInFuture;

    private boolean mCancelled = false;

    public CountDownTimer(long millisInFuture, long countDownInterval) {
        mMillisInFuture = millisInFuture;
        mCountdownInterval = countDownInterval;
    }

    public synchronized final void cancel() {
        mCancelled = true;
        mHandler.removeMessages(MSG);
    }

    public synchronized final CountDownTimer start() {
        mCancelled = false;
        if (mMillisInFuture <= 0) {
            onFinish();
            return this;
        }
        mStopTimeInFuture = SystemClock.elapsedRealtime() + mMillisInFuture;
        onTick(mMillisInFuture);
        mHandler.sendMessageDelayed(mHandler.obtainMessage(MSG), mCountdownInterval);
        return this;
    }

    public abstract void onTick(long millisUntilFinished);

    public abstract void onFinish();

    private static final int MSG = 1;

    private Handler mHandler = new Handler() {
        @Override
        public void handleMessage(Message msg) {
            synchronized (CountDownTimer.this) {
                if (mCancelled)
                    return;
                final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime();
                if (millisLeft <= 0) {
                    onFinish();
                } else {
                    onTick(millisLeft);
                    sendMessageDelayed(obtainMessage(MSG), mCountdownInterval);
                }
            }
        }
    };
} 
```

# php - 我仍然容易受到 SQL 注入的攻击吗？PHP

> ID：12431181
> 
> 赞同：0
> 
> 时间：2012-09-14T19:58:56.100
> 
> 标签：php, mysql, sql, code-injection

我知道大多数人会对此皱眉，但在我了解 PDO 语句和转义字符串之前，我不确定我应该如何防止 mysql 注入。

我创建了一个函数，它接受文本并通过过滤器运行它。我想知道它是否真的会阻止sql注入或者他们是否可以绕过它？我当时的目标是让用户能够输入文本并能够完全按照他们输入的方式显示。

除此之外，我还小心翼翼地确保用户对数据库的权限不超过所需权限。我是否使用他们的输入来更新或插入新行等。但鉴于我没有它仍然可以工作吗？：

```
function filterInput($textToFilter)
{
    if ($textToFilter != null)
{

    //a = &#97;
    //e = &#101;
    //i = &#105;
    //o = &#111;
    //u  = &#117;

    //A = &#65;
    //E = &#69;
    //I = &#73;
    //O = &#79;
    //U = &#85;

    $textToFilter = str_ireplace('insert','ins&#101rt',$textToFilter);
    $textToFilter = str_ireplace('select','s&#101lect',$textToFilter);
    $textToFilter = str_ireplace('values','valu&#101s',$textToFilter);
    $textToFilter = str_ireplace('where','wher&#101',$textToFilter);
    $textToFilter = str_ireplace('order','ord&#101r',$textToFilter);
    $textToFilter = str_ireplace('into','int&#111',$textToFilter);
    $textToFilter = str_ireplace('drop','dr&#111p',$textToFilter);
    $textToFilter = str_ireplace('delete','delet&#101',$textToFilter);
    $textToFilter = str_ireplace('update','updat&#101',$textToFilter);
    $textToFilter = str_ireplace('set','s&#101t',$textToFilter);
    $textToFilter = str_ireplace('flush','fl&#117sh',$textToFilter);
    $textToFilter = str_ireplace("'","&#39",$textToFilter);
    $textToFilter = str_ireplace('"',"&#34",$textToFilter);
    $textToFilter = str_ireplace(';',"&#59",$textToFilter);
    $textToFilter = str_ireplace('>',"›",$textToFilter);
    $textToFilter = str_ireplace('<',"‹",$textToFilter);
$textToFilter = nl2br($textToFilter);
$filterInputOutput = $textToFilter;
return $filterInputOutput;  
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:01:36.580

由于您正在尝试推出自己的“过滤器”功能 - 标准响应是“是的，您是”。编写“安全”代码非常困难，而且您基本上是在尝试重新发明轮子，而且这样做的方式很糟糕。

当你可以这样做的时候，你为什么还要去做所有这些（毫无意义的）麻烦：

```
$safe_text = mysql_real_escape_string($badtext); 
```

（或您的数据库库提供的任何转义功能）并让数据库为您完成所有艰苦的工作？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:07:21.367

这种事情最好留给专家。不要试图自己动手。您应该立即将此功能修补到更安全的位置：

```
function filterInput($textToFilter)
{
    return mysql_real_escape_string($textToFilter);
} 
```

稍后您可以移除所有对 的引用`filterInput`并将其替换为`mysql_real_escape_string`. 下一步是`mysql_query`完全停止使用，因为它非常危险。切换到`mysqli`或 PDO 提供了显着的好处，特别是因为您可以使用 SQL 占位符为您进行转义，避免可能导致您付出高昂代价的简单错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:08:09.103

绝对“是”，因为 str_ireplace 编码不安全（请参阅[infos](http://fr.php.net/manual/en/book.mbstring.php)）。

还有“是”，因为您忘记了“截断”、“授予”、“创建”等。

最好的方法是忘记它并转向[准备好的陈述](http://php.net/manual/en/pdo.prepared-statements.php)。

# xcode - Xcode：如何让 Xcode4.2 在 OS X Mountain Lion 上运行？

> ID：12431185
> 
> 赞同：0
> 
> 时间：2012-09-14T19:59:25.553
> 
> 标签：xcode, macos

我最近从 Lion 升级到 Mountain Lion，我的 Xcode4.2 停止工作。它抱怨它不是为了山狮。我还安装了 Xcode4.4。但是我有一个在 Xcode4.2 下工作的重要项目，但在 Xcode4.4 上存在问题。

有没有办法让 Xcode4.2 在 Mountain Lion 下工作？？？我在 Apple Developer 网站上没有找到 Mountain Lion 的版本...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:09:24.513

Mountain Lion 不支持 Xcode 4.2。事实上，它在这一点上已经很老了，而且它并没有变得更年轻。无论如何，您将不得不更新您的项目以使用更新版本的 Xcode —— 为什么不现在花时间去做呢？Xcode 4.4 将允许您部署到一直追溯到 10.4 的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:37:51.300

您找不到适用于 Mountain Lion 的 Xcode 4.2 的原因是没有这样的版本。过去，人们使用技巧让旧版本的 Xcode 在更新的操作系统上运行——但是，就像人们用来在新版本的 Xcode 中运行旧 SDK 等的技巧一样，Apple 有意或无意地破坏了每一个其中。

在这方面与他们争吵真的不值得。如果您可以让您的代码在 4.4 中运行，请这样做。如果不能，请保留一台 Lion 机器（或虚拟机）来构建它。

# java - java数组中的内存分配

> ID：12431188
> 
> 赞同：-1
> 
> 时间：2012-09-14T19:59:43.253
> 
> 标签：java, arrays, memory-management

我想知道Java如何为数组分配内存：它是连续的还是不连续的？请给我一个合适的例子来证明这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:03:02.713

没有办法说出来，因为即使使用 JNI 也会使您与实际实现隔离。

话虽如此，大多数实际的实现都将数组元素分配为连续的内部内存块，这可能是真的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T20:04:37.480

Java 规范不需要任何一种选择，实际上也没有提供观察任何一种选择的任何方式。

例如，如果我用 Javascript 编写 JVM，数组可能是不连续的。

也就是说，我强烈假设大多数实际的 JVM 确实使用连续内存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:02:34.477

Java 矩阵是数组的数组，例如第一行可以是 10 个元素，而第二行可以是 40 个元素。我认为不是方阵时它是不连续的。但是您可以确定在迭代最后一个索引块时它是连续的。

```
 a[100][500][64]

 a[5][5][0 to 63] contiguous

 a[5][0 to 5][5] not contiguous

 a[0 to 5][5][5] not contiguous and maybe there will be cache-critical stalls 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T20:14:29.983

在大多数 JVM 中，整个堆是连续的，因此您可以合理地假设数组是连续分配的。

注意：即使引用数组是连续的，但它们引用的对象可能在任何地方。他们可能会在一起，但他们可能不会是我。

例如

```
String[] strings = "a,b,c,d,e,f".split(","); 
```

Strings 是一个引用数组，单个 String 对象及其`char[]`对象可以在任何地方。注意：所有字符串都可能使用相同的`char[]`

# jquery - 响应式设计不适用于 iPhone

> ID：12431192
> 
> 赞同：1
> 
> 时间：2012-09-14T20:00:05.190
> 
> 标签：jquery, css, responsive-design

我的第一个响应式项目并没有我希望的那么顺利！

我已经完成了一个在 768 和 480 处有断点的初始概念，当我在浏览器中调整大小时它会很好地中断。我在我的智能手机上做了最后的测试，我得到了完整的网站！

我一直在用头撞墙，我当然希望有人能保释我！

您可以在此处查看页面 - www.siphon-marketing.com/unifirst

此外，当在桌面上调整我的屏幕大小时，它会坏掉，但我需要在每个点刷新以强制一些元素就位......有什么办法可以防止这种情况发生吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:02:29.833

使用元视口标签：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"> 
```

看[这里](http://tech.bluesmoon.info/2011/01/device-width-and-how-not-to-hate-your.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:53:58.340

在您的媒体查询中，您已将`.container width`and定义`.header width`为 100%。我对此并不积极，但我认为这就是正在发生的事情。您`.container`最初设置为`width: 1000px;`. 此时，您的移动设备将其视为以桌面为中心的网页。移动浏览器在渲染大型网页时都有不同的功能。有些人会尝试重排文本以适应您的屏幕（而其他元素处于正常桌面位置），有些人会缩小页面以适应其视口的整个宽度，而其他人不会对它做任何事情，所以你必须平移和缩放整个页面。

媒体查询非常适合在不同大小的视口中强制响应式设计。这些样式会覆盖媒体查询之外的那些原始样式，但是如果移动浏览器认为页面最初是 1000 像素宽，它将“扩展”到 1000 像素。如果您的媒体查询将其覆盖为 100%，则浏览器可能会将其视为“1000 像素的 100%”。

尝试在媒体查询中定义像素宽度，看看是否有帮助。如果这是准确的，我想知道在您的媒体查询中您是否可以这样说：

```
.container {
  width: 480px;
  width: 100%;
} 
```

同样，我没有对此进行测试，但这个想法听起来可能会奏效。不过，我很想看看这是否有帮助，所以如果您尝试一下，请回复评论并告诉我。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:41:25.043

我发现有两个视口...一个覆盖另一个

# php - PHP中的常量增量

> ID：12431194
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:00:17.187
> 
> 标签：php, html, forms

我们的网站上有一个服务注册表。对于该表格，我们需要一个唯一的参考编号，该编号应不断增加。例如**FM00001**、**FM00002**等。

如何在 PHP 中实现这一点。有没有办法保存一个全局变量，该变量可以在成功提交时递增，然后在以后检索新表单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:03:00.247

在 PHP 中有几种方法可以做到这一点......

如果您正在运行数据库，则最容易使用具有自动递增字段的表。

另一种选择是使用文件锁定和读/写本地文件。请注意，文件锁定在安装时不起作用`NFS`，因此在许多流行的共享主机设置中会失败。

有一些`NFS`涉及创建和删除目录条目的锁定解决方法......

嗯..您是否需要它们按顺序递增，或者下一个数字大于旧数字是否足够好？根据托管设置，您**可能**能够获取当前时间戳并将其用作唯一 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:02:20.103

我会将数字存储在数据库中，然后增加它。或者更简单地使用文本文件。

文本文件可以通过以下方式执行：

```
//read
$f = @fopen("count.txt","r");
if(!$f) die ("File could not be opened");
$count = fgets($f,9);
fclose($f);

$count++;

//write
$f = @fopen("count.txt","w");
if(!$f) die ("File could not be written");
fwrite($f,$count);
fclose($f); 
```

# php - 基于存储在 mysql 数据库中的用户角色重定向

> ID：12431198
> 
> 赞同：1
> 
> 时间：2012-09-14T20:00:35.633
> 
> 标签：php

我已经创建了一个用户现在可以成功登录的网站，但是根据用户所在的组，我想在登录后将它们重定向到不同的页面。我有一个带有“training_group”行的数据库，例如，他们在组2013_1，他们将在登录后被引导到homepage_20131.php。

我一直在网上寻找教程，并找到了具有开关功能的可能解决方案？但我不确定如何/在哪里实现这一点。我刚开始学习 php，如果有任何建议，我将不胜感激！

现在，我的登录页面如下所示：

```
<?php
include 'core/init.php'; 
if (empty($_POST) === false) {
    $username = $_POST['username'];
    $password = $_POST['password'];

    if (empty($username) === true || empty($password) === true) {
        $errors[] = 'please input a username and password first! ';
    } else if (user_exists($username) === false)    {
        $errors[] = 'We could not locate you in our database.';
    }    
    $login = login($username, $password);
    if ($login === false) {
        $errors [] = 'That username/password combination is incorrect';
    }    
    else {
        $_SESSION['user_id'] = $login;
        header('Location:logged_in/templates/logged_in_home.php');
        exit ();
    }
}
else {
    $errors [] = 'No data received';
}

include 'includes/overall/header.php';

if (empty ($errors) === false) {
    ?>
    <h2>We tried to log you in, but...</h2>
    <?php
    echo output_errors($errors);
}
include 'includes/overall/footer.php'; 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:34:25.817

这里有几个片段可能会让你朝着正确的方向前进。

```
function login($username, $password){
    //... your login code .. database call
    if($validLogin){
        $user_id = id from database;
        $group_id = id from database;
        $return = array('user_id' => $user_id, 'group_id' => $group_id);
    }
    else{
        $return = false;
    }

    return $return;
}

$userinfo = login($username, $password);
if ($userinfo === false) {
    $errors [] = 'That username/password combination is incorrect';
}    
else {
    $_SESSION['user_id'] = $userinfo['user_id'];
    $_SESSION['group_id'] = $userinfo['group_id'];

    $page = 'homepage_' . str_replace('_', '', $userinfo['group_id'] . '.php';
    header('Location:' . $page);
    exit ();
} 
```

# c# - 由于引号而无法正确删除行

> ID：12431200
> 
> 赞同：0
> 
> 时间：2012-09-14T20:00:46.870
> 
> 标签：c#, sql

试图从 sql 数据库中删除行。引号是我试图在以下查询中添加完美引号但它不接受它的问题。

```
 con.Open();
 SqlCommand fac = new SqlCommand("delete from faculty where schoolName = '" + schlName , con);
 fac.ExecuteNonQuery();
 con.Close(); 
```

请检查并回复解决方案。我试图在以下查询中添加完美的报价，但它不接受它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T20:02:54.413

您需要使用参数：

```
using (var conn = ...)
using (var command = new SqlCommand("delete from faculty where schoolName = @School", con)) {
   command.Parameters.AddWithValue("@School", schoolName); 
```

# android - 在android中获取wifi接入点位置

> ID：12431207
> 
> 赞同：0
> 
> 时间：2012-09-14T20:01:16.397
> 
> 标签：android, gps, location, wifi, point

有没有办法获取 wifi 接入点的位置（纬度、经度）？我需要在地图上显示它们，所以我这样做的唯一方法是获取每个 wifi 接入点的位置。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:06:40.410

为此，您需要使用一个接入点数据库，例如[WiGLE.net 上的那个](http://www.wigle.net/)。

联系他们以获取有关商业许可证的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:06:52.090

路由器通常没有 GPS 功能。您可以使用反向 IP 查找和地理 ISP 数据库大致确定地理位置。

您也许可以使用信号强度估计与用户的距离......

# uiwebview - 在自定义 MonoTouch.Dialog 元素中显示 UIWebView

> ID：12431208
> 
> 赞同：0
> 
> 时间：2012-09-14T20:01:21.413
> 
> 标签：uiwebview, xamarin.ios, monotouch.dialog

正在研究一种`Element`在`MonoTouch.Dialog`. 首先，我基于`UIViewElement`实现创建了一个新类，目的是`UIWebView`在单元格中显示 a（[请参阅此处的 UIViewElement 代码](https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs)）。

自定义元素有效，但从`UIWebView`不显示内容。加载文本后`UIWebView`，我尝试使用`UIWebView.SizeThatFits`. 这个函数总是返回 0，即使给它的宽度（根据实际`UITableViewCell`显示的宽度）是非零的。

是否足以添加`UIWebView`到`UITableViewCell`使用此代码：

```
cell.ContentView.AddSubview (webView); 
```

`UIWebView`从不返回非零高度，因此从不显示实际单元格。即使我覆盖高度计算并返回静态高度（例如`100f`），`UIWebView`仍然不显示。

元素的完整代码：

```
public class RBHTMLRow : Element, IElementSizing
{
    public enum CellFlags {Transparent = 1,DisableSelection = 2}
    public CellFlags Flags;
    private UIWebView webView = null;
    private UITableViewCell current_cell;
    NSString key;

    private void ResizeWebView ()
    {
        if (current_cell != null)
        {
            RectangleF frame = webView.Frame;
            SizeF fittingSize = webView.SizeThatFits(new SizeF(current_cell.Frame.Width, 1f));
            frame.Size = fittingSize;
            webView.Frame = frame;
        }
    }

    private void InitWebView(bool isRTF, string content )
    {
        webView = new UIWebView();
        webView.LoadHtmlString ( content, new NSUrl(""));
        webView.LoadFinished += delegate {
            ResizeWebView();
        } ;
    }

    public RBHTMLRow (bool isRTF, String content, String caption) : base (caption)
    {
        key = new NSString("rbhtml_row");
        InitWebView(isRTF, content);
    }

    protected override NSString CellKey {
    get {
        return key;
    }
    }

    public override UITableViewCell GetCell (UITableView tv)
    {
        var cell = tv.DequeueReusableCell (CellKey);
        if (cell == null){
            cell = new UITableViewCell (UITableViewCellStyle.Default, CellKey);
            if ((Flags & CellFlags.Transparent) != 0){
                cell.BackgroundColor = UIColor.Clear;
                cell.BackgroundView = new UIView (RectangleF.Empty) { 
                    BackgroundColor = UIColor.Clear 
                } ;
            }

            cell.SelectionStyle = UITableViewCellSelectionStyle.None;
            cell.ContentView.AddSubview (webView);
        }  
        current_cell = cell;
        ResizeWebView();
        return cell;
    }

public float GetHeight (UITableView tableView, NSIndexPath indexPath){
    return webView.Bounds.Height;
} 
```

# mod-rewrite - 很简单：Mod_rewrite

> ID：12431217
> 
> 赞同：0
> 
> 时间：2012-09-14T20:02:23.377
> 
> 标签：mod-rewrite

我有以下重写规则：

`RewriteRule ^register/?$ /fitch/index.php?cmd=register [NC,L,QSA]`

请求`mysite.com/register`被重写为

`mysite.com/fitch/index.php?cmd=register`

我还想允许传递一个可选参数，以便请求 `mysite.com/register/sender=models`将我定向到

`mysite.com/fitch/index.php?cmd=register&sender=models`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:04:40.100

也许：

```
RewriteRule ^register/(.*) /fitch/index.php?cmd=register&$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:12:30.267

对于任意数量的路径 -> 查询字符串参数：

```
RewriteCond %{REQUEST_URI} ^/register/
RewriteRule ^(.*)/(.*)$ /$1&$2 [L]

RewriteCond %{REQUEST_URI} ^/register&
RewriteRule ^(.*)$ /fitch/index.php?cmd=$1 [L,QSA] 
```

这将重写 URL，如下所示：

```
http://mysite.com/register/a=b/1=2/c=d 
```

至：

```
http://mysite.com/fitch/index.php?cmd=register&a=b&1=2&c=d 
```

# excel - 如何在excel中搜索部分和绝对值以获得答案？

> ID：12431218
> 
> 赞同：0
> 
> 时间：2012-09-14T20:02:29.670
> 
> 标签：excel, excel-2010

我有一个工作表，我需要在其中进行多个查询的搜索。我遇到的问题是这样的：

在工作簿上有两个选项卡，第一个是 Jobs，第二个是 OOR。在 OOR 中有多个空列**Order Qty。**、**原始承诺日期**和**车间订单**。

现在我知道有重复，这很好，我现在看到的是在 OOR 中使用 B 列是一个参考。所以在这种情况下，使用 B3 作为参考点。这是 的部分数`48900421 Rev 2`。我想做的是这个，使用两个参考点。

**我想在OOR**中查找 B3 ，并使用两个参考点来保证正确的工作被参考。要引用的这两列位于**Jobs**中。第一个是 B 列，它总是等于`Dakota Systems, Inc.`，另一个将引用 C 列，但这是我不知道在这里做什么，我因为`C3`在**OOR**中只显示 48900421，它永远不会发现`48900421 Rev 2`我想过使用类似的东西这：

`=IFERROR(INDEX(Jobs!$E:$E,MATCH(1,INDEX((OOR!$C:$C=$B3)*(Jobs!$C:$C="Dakota Systems, Inc."),1),0)),"")`

但是由于某种原因，当我认为我不应该这样做时，我会变得空白。这周晚些时候我失去了理智，有人可以帮忙吗？

[https://dl.dropbox.com/u/3327208/Excel/twosearches.xlsx](https://dl.dropbox.com/u/3327208/Excel/twosearches.xlsx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:41:20.230

您似乎没有引用正确的列....而且您在第二个 INDEX 函数中需要一个零，而不是 1

在复制下来的 OOR!I3 中尝试此版本，用于`ISNUMBER(FIND`在其他文本中查找您的部件号：

`=IFERROR(INDEX(Jobs!E$3:E$1000,MATCH(1,INDEX(ISNUMBER(FIND(B3,Jobs!C$3:C$1000))*(Jobs!B$3:B$1000="Dakota Systems, Inc."),0),0)),"")`

格式为所需的日期格式

**修改后的评论如下：**

`=IFERROR(INDEX(Jobs!E$3:E$1000,MATCH(1,INDEX(ISNUMBER(FIND(B3,Jobs!C$3:C$1000))*(Jobs!B$3:B$1000="Dakota Systems, Inc.")*(Jobs!A$3:A$1000=M3),0),0)),"")`

# c - VirtualBox 如何处理来宾 Linux 的中断？

> ID：12431220
> 
> 赞同：2
> 
> 时间：2012-09-14T20:02:33.487
> 
> 标签：c, linux, keyboard, kernel, driver

我正在练习在 VirtualBox 来宾 Linux 中编写一个简单的键盘驱动程序。问题是，我的代码只是注册一个中断处理程序并打印`scancode`到日志文件。而且我不会将这些传入的扫描码发送到任何上层代码，例如`Linux input core`. 之后`insmod`，我可以使用`dmesg`. 但是为什么我的终端仍然得到正确的输入？终端不应该收到任何东西。

我的代码如下所示：

```
static int __init init_simple_keyboard_driver(void)
{
    free_irq (IRQ_1, NULL);
    return request_irq (IRQ_1, my_handler, ...);
}

static irqreturn_t my_handler(int irq, void *dev_id)
{
    unsigned char scancode = get_scancode_from_port_0x60();
    printk(...scancode...);
} 
```

之后`insmod`，我可以在内核日志中看到消息。

1.  我的`free_irq`电话会引起一些消息，例如`Can't free already freed IRQ`. （我不知道为什么......它不应该被释放。）
2.  `atkbd`司机抱怨有人要求代为处理`IRQ_1`。
3.  这些扫描码可以正确打印。
4.  **[最奇怪的]**活动控制台仍然获得正确的键盘输入。因此，我可以`rmmod`使用这个简单的驱动程序来执行。
5.  之后`rmmod`，来宾 Linux 就死了，因为它不能再接收任何键盘了。

你有什么主意吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T03:04:40.720

驱动程序不应也不能取消注册本身未注册的中断处理程序。为了防止原始驱动程序处理键盘中断，您可以执行以下操作：

1）在你的中断处理程序中返回IRQ_HANDLED：这个值表示中断处理得很好，linux内核的中断处理机制将停止调用下一个中断处理程序。或者

2）清除硬件中的输入缓冲区，您可以参考原始键盘驱动程序的代码来了解键盘击中事件期间使用的状态寄存器和输入缓冲区。

# asp.net - 在 gridview 中创建文本框和按钮

> ID：12431222
> 
> 赞同：0
> 
> 时间：2012-09-14T20:02:43.307
> 
> 标签：asp.net, gridview

我有一个从 ODBC 数据源动态创建的 gridview。我想做一些类似购物车的东西，所以我想添加一列，其中包含数量的文本框和一些按钮以将行中的项目添加到购物车中。有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:18:35.203

为 RowCreated 创建一个 EventHandler ，每次动态创建一行时都会触发类似的东西：

```
void gridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    GridViewRow row = e.Row;
    TableCell actionsCell = new TableCell();
    //put code here to add to actionsCell

    // you might have to modify this to specify where in the row to insert
    row.Cells.Add(actionsCell);

} 
```

然后将您的按钮或文本或您想要的任何内容放入该行中动态创建的单元格中

# vba - 使用 VBA 将文本转换为 Excel 中的列

> ID：12431231
> 
> 赞同：2
> 
> 时间：2012-09-14T20:03:06.937
> 
> 标签：vba, excel

我正在尝试使用宏将文本转换为列，但我做不到，我试图记录一个宏来实现这一点，但是我遇到了一些问题，因为文本到列的 VBA 函数需要一个选择，有没有一种方法可以让我选择范围A7：A50000？甚至更好的 A7:lastnonempty 单元格？

谢谢，

仅供参考，分隔符并不重要，因为我需要这样做才能将文本转换为公式

这是我的代码

```
Range("O6").Select
Range(Selection, Selection.End(xlDown)).Select
Selection.TextToColumns Destination:=Range("O6"), DataType:=xlDelimited, _
    TextQualifier:=xlDoubleQuote, ConsecutiveDelimiter:=False, Tab:=True, _
    Semicolon:=False, Comma:=False, Space:=False, Other:=False, FieldInfo _
    :=Array(1, 1), TrailingMinusNumbers:=True 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T20:14:30.160

试试这个

```
Sub Txt2Col()
    Dim rng As Range

    Set rng = [C7]
    Set rng = Range(rng, Cells(Rows.Count, rng.Column).End(xlUp))

    rng.TextToColumns Destination:=rng, DataType:=xlDelimited, ' rest of your settings 
```

更新：按钮单击事件以作用于另一张纸

```
Private Sub CommandButton1_Click()
    Dim rng As Range
    Dim sh As Worksheet

    Set sh = Worksheets("Sheet2")
    With sh
        Set rng = .[C7]
        Set rng = .Range(rng, .Cells(.Rows.Count, rng.Column).End(xlUp))

        rng.TextToColumns Destination:=rng, DataType:=xlDelimited, _
        TextQualifier:=xlDoubleQuote,  _
        ConsecutiveDelimiter:=False, _
        Tab:=False, _
        Semicolon:=False, _
        Comma:=True, 
        Space:=False, 
        Other:=False, _
        FieldInfo:=Array(Array(1, xlGeneralFormat), Array(2, xlGeneralFormat), Array(3, xlGeneralFormat)), _
        TrailingMinusNumbers:=True
    End With
End Sub 
```

注意`.`'s (eg `.Range`) 它们指的是`With`语句对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-04T08:34:49.500

如果有人在 UFT 中使用 texttocolumns 函数时遇到问题。请尝试使用以下功能。

```
myxl.Workbooks.Open myexcel.xls
myxl.Application.Visible = false `enter code here`
set mysheet = myxl.ActiveWorkbook.Worksheets(1)
Set objRange = myxl.Range("A1").EntireColumn
Set objRange2 = mysheet.Range("A1")
objRange.TextToColumns objRange2,1,1, , , , true 
```

这里我们使用 coma(,) 作为分隔符。

# c# - 在 C# 中创建 OAuth 客户端以进行自动化测试

> ID：12431235
> 
> 赞同：0
> 
> 时间：2012-09-14T20:03:27.187
> 
> 标签：c#, automation, oauth-2.0

我正在尝试再次测试实现 OAuth 2.0 身份验证协议的服务，并且我想在不使用任何浏览器元素的情况下运行自动化。这可能吗？如果可以，怎么办？

我目前正在做的是打开浏览器，然后发送用户/密钥组合，然后在重定向时，我从 URL 获取访问令牌，然后在后续的 REST 调用中使用它。但是这种方法需要一些时间，并且对于运行大量测试可能并不完全可靠。

有什么方法可以以编程方式处理初始握手，即发送用户/密钥，获取权限请求页面，然后通过 c# 接受它，最后在中间没有任何浏览器的情况下获取访问令牌？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:05:15.437

查看 DotNetOpenAuth - [http://www.dotnetopenauth.net/](http://www.dotnetopenauth.net/)

您应该能够非常简单地编写自动化测试用例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:08:28.150

您可以为您的测试系统尝试服务帐户身份验证。这种方法用加密签名的 JSON Web 令牌 (JWT) 代替了用户交互。

[谷歌的实现文档](https://developers.google.com/accounts/docs/OAuth2#serviceaccount)有一些细节。

# asp.net-mvc - VS 2012 Express 中带有自定义 T4 模板的 MVC 脚手架

> ID：12431238
> 
> 赞同：0
> 
> 时间：2012-09-14T20:03:29.617
> 
> 标签：asp.net-mvc, templates, t4

刚刚开始自定义生成的 MVC 控制器/视图。

继史蒂文桑德森的帖子：http: [//blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)

我使用包管理器控制台在我的 VS 2012 MVC4 项目中生成 3 个自定义模板

```
PM>Scaffold CustomTemplate View Create

PM>Scaffold CustomTemplate View Edit

PM>Scaffold CustomTemplate View _CreateOrEdit 
```

在以下位置创建文件： CodeTemplates\Scaffolders\MvcScaffolding.RazorView _CreateOrEdit.cs.t4 Create.cs.t4 Edit.cs.t4

但是，当我“添加控制器”并使用实体框架选择具有读/写操作和视图的模板 Mvc 控制器时

***新模板没有被使用？？？***

我能够在 VS 2012 文件夹中使用记事本修改 create.tt edit.tt 模板，然后在我的项目中生成更改。C:\Program Files\Microsoft Visual Studio 11.0\Common7\IDE\VWDExpress\ItemTemplates\CSharp\Web\MVC 4\CodeTemplates\AddView\CSHTML

有人知道我在做什么错吗？

谢谢，洛杉矶人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:54:41.773

尝试在您的解决方案中创建一个`CodeTemplates\AddView\CSHTML`文件夹并将您的模板放在那里（或`CodeTemplates\AddController`用于控制器模板）。它在 VS2012 中对我有用。这些可以签入源代码管理，每个人都可以共享它们。VS 安装目录中的那些有点难以共享。

# javascript - 如何从jquery函数返回变量

> ID：12431241
> 
> 赞同：0
> 
> 时间：2012-09-14T20:03:43.413
> 
> 标签：javascript, jquery

你能帮我吗...如何从jquery函数返回变量

```
var height = $(window).height();

$(window).resize(function(){
    var height = $(window).height();
    return height;
});

setInterval(function() {
    $('div').append( 'Index: ' +  height );
}, 500); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:04:57.393

你不需要回来。尝试这个：

```
var height = $(window).height(); // define "height" here

$(window).resize(function(){
    height = $(window).height(); // update "height" variable, 
                                 // don't user "var" here.
                                 // because using "var" will redefine
                                 // "height" again and no longer contain the
                                 // updated value on window resize 
                                 // out of this resize function scope
});

setInterval(function() {
    $('div').append( 'Index: ' +  height );
}, 500); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:04:56.513

当您使用时，`var`您正在创建一个新变量，而不是覆盖原始变量。你会想要这个：

```
var height = $(window).height();

$(window).resize(function() {
    height = $(window).height();
});

// ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:15:22.627

我想你的问题的答案取决于你想如何返回它。安慰？警报？div 还是其他元素？请参阅下面的列表。

*   控制台日志（高度）
*   警报（高度）
*   $("#elementID").html(高度); // 或任何适合您的情况的选择器和方法

我想您也可以将该 $(window).resize 块转换为一个函数，然后调用该函数。这也应该有效。

# sql - 我可以在 DB2 中创建动态列名吗？

> ID：12431244
> 
> 赞同：0
> 
> 时间：2012-09-14T20:04:07.067
> 
> 标签：sql, db2

我有两个表，一个表包含列的名称，另一个表包含我需要在报告中显示的实际数据。数据和列通过列键链接。

有没有办法构建一个可以将列表中的列名用于实际临时表列的选择语句？

像这样的东西；

```
Select A.value AS B.ColumnName 
```

简单来说，我可以根据sql中另一个表中的值创建表列名吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:39:00.577

如果不使用对您有用的上述问题，您将无法做到这一点。

[SQL Server：如何在选择期间从另一个表中设置列别名？](https://stackoverflow.com/questions/9361596/sql-server-how-to-set-column-alias-from-another-table-during-select)

# c# - 泛型基类的派生类型

> ID：12431246
> 
> 赞同：4
> 
> 时间：2012-09-14T20:04:16.543
> 
> 标签：c#, oop, types, covariance

我有以下代码。

```
class Header<T> where T: IItem { }
class HeaderA : Header<ItemA> { } 
class HeaderB : Header<ItemB> { } 

interface IItem { }
class ItemA : IItem { }
class ItemB : IItem { }

Header<IItem> h = new HeaderA(); 
```

最后一行无法编译。

> ```
> Cannot implicitly convert type 'UserQuery.HeaderA' to 'UserQuery.Header<UserQuery.IItem>' 
> ```

HeaderA 是 Header 的子类型，ItemA 是 IItem 的子类型。为什么它不起作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-14T20:22:38.227

简而言之，您正在尝试使用一个名为*covariance*的概念，该概念在[.NET 泛型类](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/generic-classes "泛型类（C# 编程指南） - Microsoft Docs")中不受支持，并且默认情况下在[接口](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/generic-interfaces "通用接口（C# 编程指南） - Microsoft Docs")中不受支持。

如果您想允许该类执行此操作，您可以在 C# 3 或更高版本中使用[通用接口](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/generic-interfaces "通用接口（C# 编程指南） - Microsoft Docs")上的[`out`contextual 关键字](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-generic-modifier "out（通用修饰符）（C# 参考） - Microsoft Docs")指定它：

```
interface IHeader<out T> where T : IItem { }
class Header<T>: IHeader<T> where T:IItem { }
class HeaderA : Header<ItemA> { }
class HeaderB : Header<ItemB> { }

interface IItem { }
class ItemA : IItem { }
class ItemB : IItem { }

public void Foo()
{
    //now this works; notice the use of the interface instead of the base class.
    IHeader<IItem> h = new HeaderA();
} 
```

通过使用带关键字的接口，您基本上是在告诉编译器，只要接口满足接口的泛型类型声明的约束（或者它是一个对象），就不必了解更多关于[泛型类型的信息。](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/generics/ "泛型（C# 编程指南）-Microsoft Docs")因此，虽然您现在可以将更多派生泛型分配给接口类型的变量，但您只能将它们作为接口类型处理，而不能作为任何派生类型处理。

[`out`](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/out-generic-modifier "out（通用修饰符）（C# 参考） - Microsoft Docs")关键字对于类定义是不可接受的；您不能强制使用 of`Header<T>`是协变的。

# php - 从 strtrotime 中减去时间

> ID：12431248
> 
> 赞同：1
> 
> 时间：2012-09-14T20:04:19.310
> 
> 标签：php, mysql, datetime

我试图弄清楚如何从输出时间中减去 1 小时。我们的网络服务器比我们的时间提前 1 小时。我正在使用以下内容来返回在我们的 MySQL 数据库中创建表的时间。

```
ini_set('date.timezone', 'America/Los_Angeles');
$con = mysql_connect('localhost','database','password');  
$db = mysql_select_db('database'); 
$sql = mysql_query("SHOW TABLE STATUS WHERE `name`=\"initm\"");  
$foo = mysql_fetch_array($sql);  
$ts = strtotime($foo['Create_time']);
echo "<h3>Last Updated ";
echo date('m/d/Y g:i a T', $ts);
echo "</h3>"; 
```

如果我尝试减去时间`$ts = strtotime($foo['Create_time']-3600);`

它返回上次更新时间为 1969 年 12 月 31 日太平洋标准时间下午 4:00。我知道它是从 UNIX 时间戳中减去，它定义为自 1970 年 1 月 1 日以来的秒数，而不是从表中的时间中减去。

我尝试添加`ini_set('date.timezone', 'America/Los_Angeles');`，但它只是改变了输出的时区。

任何意见是极大的赞赏。PHP 和 MySQL 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:17:16.533

`strtotime`假设它的参数是一个字符串，并将其转换为秒。您需要在转换后进行减法：

```
$ts = strtotime($foo['Create_time'])-3600; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:13:39.083

为什么不 ：

```
$query = "SET time_zone = '-6:00'"; 
```

这将以与`SET charset utf8`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:13:46.507

```
SELECT UNIX_TIMESTAMP(Create_time) - 3600 ... 
```

比通过 PHP 和 MySQL 的日期/时间处理系统进行多次往返要容易得多。

但是，由于 strtotime 给您的结果无效，我猜您存储的`Create_time`内容实际上并不是本地 mysql 数据/时间值，而可能是一些不稳定的非标准日期值作为字符串。这意味着 strtotime() 返回一个布尔值 FALSE 以指示失败，然后您强制 PHP 将该 false 转换为整数`0`来处理您的“负 3600”计算。

您通常应该始终以原生格式/类型存储内容，以防止发生此类情况。本机允许您使用本机设施进行处理。自定义格式意味着痛苦/痛苦

# asp.net-mvc - ServiceStack MVC Powerpack + Funq 的构造函数注入

> ID：12431249
> 
> 赞同：3
> 
> 时间：2012-09-14T20:04:25.933
> 
> 标签：asp.net-mvc, servicestack, funq

我正在使用演示 MVC 3 Internet 应用程序模板并安装了 ServiceStack.Host.Mvc NuGet 包。我在 Funq 执行构造函数注入时遇到问题。

以下代码段运行良好：

```
public class HomeController : ServiceStackController
{
    public ICacheClient CacheClient { get; set; }

    public ActionResult Index()
    {
        if(CacheClient == null)
        {
            throw new MissingFieldException("ICacheClient");
        }

        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

以下抛出错误

> 无法创建接口的实例。

```
public class HomeController : ServiceStackController
{
    private ICacheClient CacheClient { get; set; }

    public ActionResult Index(ICacheClient notWorking)
    {
        // Get an error message...
        if (notWorking == null)
        {
            throw new MissingFieldException("ICacheClient");
        }

        CacheClient = notWorking;

        ViewBag.Message = "Welcome to ASP.NET MVC!";

        return View();
    }

    public ActionResult About()
    {
        return View();
    }
} 
```

自从公共财产注入有效以来，这并不是什么大不了的事，但我想知道我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:10:50.687

请注意，在第二个示例中，您没有**构造函数**，但确实有**方法**：

```
public ActionResult Index(ICacheClient notWorking)
{
    ....
} 
```

仅注入**构造函数和公共属性**是行不通的。您可以将其更改为：

```
public class HomeController : ServiceStackController
{
    private ICacheClient CacheClient { get; set; }

    public HomeController(ICacheClient whichWillWork)
    {
       CacheClient = whichWillWork;
    }

    ...
} 
```

# wordpress - “自定义字段模板”插件 - 第一个 MULTIPLE FIELD FIELDSET 在保存时消失

> ID：12431257
> 
> 赞同：2
> 
> 时间：2012-09-14T20:04:55.513
> 
> 标签：wordpress, wordpress-theming

我正在为我的 WordPress 项目使用自定义字段模板插件。我有多个字段字段集，允许上传照片并从后端添加标题。

问题：每当我更新帖子时，第一个字段集就会消失，它会一直这样做，直到只剩下一个字段集。

我真的很感谢你们的一些明智的建议，因为这个问题现在让我感到恶心。

我使用的插件：[http ://wordpress.org/extend/plugins/custom-field-template/](http://wordpress.org/extend/plugins/custom-field-template/)

Functions.php 文件和模板文件根据本教程构建：http: [//www.kevinleary.net/multiple-fields-groups-wordpress-custom-field-template-plugin/](http://www.kevinleary.net/multiple-fields-groups-wordpress-custom-field-template-plugin/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:56:47.940

我找到了解决方案。由于我见过更多有类似问题的人，我想我可以提供帮助。

因此，如果您为 wordpress 使用 CFT 插件，并且如果您添加超过 2 个字段集，您的多个字段集将被清除，只需将它们转移到另一个模板，它就可以很好地工作......

# android - EditText.setText 上的 Android 运行时错误

> ID：12431268
> 
> 赞同：0
> 
> 时间：2012-09-14T20:06:02.127
> 
> 标签：android, android-edittext

我有一个适用于我的 PC 应用程序的代码，但是当我将其转换为 Android 应用程序时，它告诉我 setText 方法有错误。

```
((EditText) findViewById(R.id.editText2)).addTextChangedListener(new TextWatcher() {

    public void afterTextChanged(Editable arg0) {
        EditText width = (EditText) findViewById(R.id.editText1);
        EditText height = (EditText) findViewById(R.id.editText2);

        System.out.println("editText2: " + width.getText() + " " + height.getText());

        try {
            double _width = Math.round((Double.parseDouble(height.getText() + "") / IMAGE_HEIGHT) * IMAGE_WIDTH);
            String value = String.valueOf(_width).substring(0, String.valueOf(_width).lastIndexOf("."));
            width.setText(value);
        } catch(Exception e) {

        }

    }

    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}
    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {}

}); 
```

在我说的地方`width.setText(value)`，我得到一个 AndroidRuntime 错误。那有什么问题？`IMAGE_WIDTH`并`IMAGE_HEIGHT`在图像上有所不同，我已经检查过它们在使用前是否已初始化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:35:47.280

问题是我已将 EditText 设置为仅接受数值。在代码中，我插入了一个字符串。我必须将字符串更改为整数才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:11:25.973

可能您进行了跨线程访问。您需要调用该调用。

您需要使用[Handler](http://developer.android.com/reference/android/os/Handler.html)。另请参阅[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

创建一个`Handler`并调用`.post()`一个为您设置文本的可运行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:19:53.407

你需要做类似的事情

```
String value = width.getText().toString(); 
```

然后打电话

```
setText(); 
```

# windows-phone-7 - ReactiveCollection 和无效的跨线程访问

> ID：12431271
> 
> 赞同：0
> 
> 时间：2012-09-14T20:06:14.267
> 
> 标签：windows-phone-7, reactiveui

我正在使用 Reactive UI 为 Windows Phone 7.1 开发我的第一个应用程序，并且在使用 ReactiveCollection 类时遇到了困难。

我的应用程序大致是关于访问 WP7 SQL CE 引擎（LINQ to SQL）。我想使用 ReactiveAsyncCommand 在后台执行数据操作。来自数据库的数据应该“自动”出现在 UI 中，因此我决定使用 ReactiveCollection 作为数据库和 UI 之间的代理。

这是我的模型，所以你可以有一个更好的主意：

```
public class EncounteredModel
{
    public ReactiveCollection<Fact> FactsCollection;

    public ReactiveCollection<FactEntry> FactEntriesCollection;

    private EncounteredModel()
    {
        using (EncounteredDataContext db = new EncounteredDataContext())
        {
            FactsCollection = new ReactiveCollection<Fact>(from fact in db.Facts select fact);
            FactEntriesCollection = new ReactiveCollection<FactEntry>(from factEntry in db.FactEntries select factEntry);
        }

        FactsCollection.ItemsAdded.Subscribe(fact => { using (var db = new EncounteredDataContext()) { db.Facts.InsertOnSubmit(fact); db.SubmitChanges(); } });
        FactsCollection.ItemsRemoved.Subscribe(fact => { using (var db = new EncounteredDataContext()) { db.Facts.DeleteOnSubmit(fact); db.SubmitChanges(); } });

        FactEntriesCollection.ItemsAdded.Subscribe(factEntry => { using (var db = new EncounteredDataContext()) { db.FactEntries.InsertOnSubmit(factEntry); db.SubmitChanges(); } });
        FactEntriesCollection.ItemsRemoved.Subscribe(factEntry => { using (var db = new EncounteredDataContext()) { db.FactEntries.DeleteOnSubmit(factEntry); db.SubmitChanges(); } });
    }

    private static EncounteredModel instance;

    public static EncounteredModel Instance
    {
        get 
        {
            if (instance == null)
                instance = new EncounteredModel();
            return instance; 
        }
    }

} 
```

在我的视图模型中，我尝试使用 2 种不同的变体：

1.  创建派生的反应性集合并将 UI 绑定到它（使用 ReactiveCollection.CreateDerivedCollection() 方法。例如，它派生自 EncounteredModel.FactsCollection。
2.  使用`ObservableAsPropertyHelper<IEnumerable<Fact>>`，然后订阅模型的 ReactiveCollection `Changed`IObservable 来填充 OAPH。

不幸的是，这两种变体都给我“无效的跨线程访问”。两种变体的堆栈跟踪通常相同，这是变体 1 的堆栈跟踪（缩短为重要部分）：

```
 at MS.Internal.XcpImports.CheckThread()
   at System.Windows.DependencyObject.GetValueInternal(DependencyProperty dp)
   at System.Windows.FrameworkElement.GetValueInternal(DependencyProperty dp)
   at System.Windows.DependencyObject.GetValue(DependencyProperty dp)
   at System.Windows.Controls.ItemsControl.get_ItemsHost()
   at System.Windows.Controls.ItemsControl.OnItemsChangedHandler(Object sender, ItemsChangedEventArgs args)
   at System.Windows.Controls.ItemContainerGenerator.OnItemAdded(Object item, Int32 index, Boolean suppressEvent)
   at System.Windows.Controls.ItemContainerGenerator.System.Windows.Controls.ICollectionChangedListener.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs args)
   at System.Windows.Controls.WeakCollectionChangedListener.SourceCollectionChanged(Object sender, NotifyCollectionChangedEventArgs e)
   at System.Windows.Controls.ItemCollection.NotifyCollectionChanged(NotifyCollectionChangedEventArgs e) 
```

当我更改为 ReactiveCommand（不是异步命令）时，一切都很好。任何想法如何克服这个问题？非常感谢提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:57:27.277

ReactiveCollection 不会将所有内容代理到 UI 线程，如果您从工作线程向其中添加项目，您将在同一线程上向 UI 发出信号并导致崩溃。

但是，ReactiveAsyncCommand 为您做的一件事就是将结果返回给 UI 线程，因此您可以执行以下操作：

```
var cmd = new ReactiveAsyncCommand();
cmd.RegisterAsyncFunc(() => getAllTheItems())
   .Subscribe(theItems => theItems.ForEach(item => collection.Add(item))); 
```

`Subscribe`保证在 UI 线程上（如果不是，那是一个错误）

# mysql - 如何在cloudfoundry中执行mysql脚本

> ID：12431272
> 
> 赞同：0
> 
> 时间：2012-09-14T20:06:13.873
> 
> 标签：mysql, grails-2.0, cloud-foundry

我有一个 .sql 文件（初始 sql 脚本）。我最近在 cloudfoundry 中部署了应用程序，所以我想运行这些脚本来使应用程序工作，脚本将更新超过 5 个 db 表。

是否有任何其他方法可以在启动时从 grails 应用程序运行 mysql 脚本或者是否有任何规定可以在 cloudfoundry 中运行脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:49:53.377

你有几个选择。

*   第一个（我推荐）是使用类似[http://liquibase.org/](http://liquibase.org/)的东西（有一个 Grails 插件： http: [//grails.org/plugin/liquibase](http://grails.org/plugin/liquibase)）。此工具将确保您为其提供的任何脚本都将在应用程序启动之前运行，而无需两次运行相同的脚本等。这对于跟踪数据库更改非常有用。这独立于 CloudFoundry 工作，将帮助任何安装您的应用程序的人拥有最新的架构

*   第二个选项是通过隧道连接到 CloudFoundry 数据库并将脚本运行到数据库。看看[http://docs.cloudfoundry.com/tools/vmc/caldecott.html](http://docs.cloudfoundry.com/tools/vmc/caldecott.html)或者更容易使用 STS： http: [//blog.cloudfoundry.com/2012/07/31/cloud-foundry-integration-for -eclipse-now-supports-tunneling-to-services/](http://blog.cloudfoundry.com/2012/07/31/cloud-foundry-integration-for-eclipse-now-supports-tunneling-to-services/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:21:32.720

是的，埃博塔尔说的！:-) 虽然，我个人会选择在 VMC 上使用隧道功能，但也就是说，我是一个 Ruby 人！

如果使用大型数据集引导数据库，请注意 MySQL 中的查询会超时！

# php - PHP 将文本解析为数组

> ID：12431276
> 
> 赞同：0
> 
> 时间：2012-09-14T20:06:26.923
> 
> 标签：php, parsing

我有一个使用 curl 下载并插入字符串的 HTML 文件。HTML 文件有很多内容，但我希望解析文档的某个部分并将该部分插入到数组中。棘手的部分是我试图解析的部分不是 HTML，它是 JavaScript 块中的代码：

```
 <!-- script block -->
 <script type="text/javascript" src="//external.site.com/76b07.js"></script>
 <script>....code.....
 "235533":{"itemId":"235533","type":"0","image":{"url":"thispic.jpg"}:"summary":"This Item"},
 "235534":{"itemId":"235534","type":"1","image":{"url":"thisotherpic.jpg"}:"summary":"This Other Item"},
 </script> 
```

如何将项目信息作为数组导入？：

```
$array = array( "itemId" => "235533", "type" => "0", "image" => "thispic.jpg", "summary" =>"This Item" ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T20:08:28.897

您可以使用 RegExp 来匹配`"....":{....}`位于`<script>`标签之间的位置。您感兴趣的字符串是[JSON](http://json.org)变量。
将每个 json 变量都包含在字符串中后，您可以尝试使用[`json_decode()`](http://php.net/manual/en/function.json-decode.php)

```
$json_string = '"235533":{"itemId":"235533","type":"0","image":{"url":"thispic.jpg"}:"summary":"This Item"}';
$json = json_decode($json_string);
$myArray = (array)$json; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:09:14.243

在 php 中尝试 json_decode 函数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:12:23.733

您首先需要弄清楚如何使用您可以使用的任何字符串搜索方法来隔离数据结构，这些方法即使在数据更改时也是可重复的。如果没有关于数据结构内容的进一步上下文，很难说这可能是什么——即在所有情况下什么是相同的，什么是不同的。

然后，您最终会`json_decode`像其他人建议的那样获得数据字符串和它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T20:11:16.527

使用[爆炸](http://php.net/manual/en/function.explode.php)。例如，像

```
$array = explode('","', $string); 
```

那会接近你想要的。

**编辑：** [这](http://php.net/manual/en/function.json-decode.php)看起来更适合你。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T20:27:49.447

使用正则表达式匹配它们

```
preg_match_all('/[0-9]+":{"itemId":"(?P<itemId>[0-9]*)","type":"(?P<type>[0-9]{1})","image":{"url":"(?P<image>.*)"}:"summary":"(?P<summary>.*)}/',$mystring,$elements,PREG_SET_ORDER); 
```

然后遍历 $elements 以获取您的值

# javascript - esri javascript 异步打印

> ID：12431283
> 
> 赞同：3
> 
> 时间：2012-09-14T20:07:15.793
> 
> 标签：javascript, asynchronous, dojo, esri, arcgis-js-api

# 设置：

我正在使用[ESRI 的 javascript API v. 2.8](http://help.arcgis.com/en/webapi/javascript/arcgis/help/jsapi_start.htm#jsapi/printtask.htm)，它本身使用**dojo 工具包 v. 1.6**。我在 Amazon 的 EC2 中的 Windows 上运行[ArcGIS Server v. 10.1 。](http://resources.arcgis.com/en/help/main/10.1/index.html#//0154000005z2000000)

我可以使用将 JSON POST 到我的服务器的 javascript 成功执行 PrintTask，该服务器运行一个进程并将 PDF 返回到客户端浏览器。但是这个请求是*同步*的，可能需要一两分钟，导致**Heroku**超时并出现 H12 错误。

# 问题：

当我在 ArcGIS 服务器上将 [ ] Asynchronous 复选框切换为**ON**时，我的 PrintTask 返回：

```
{"error":{"code":500,"message":"Error performing execute operation","details":[]}} 
```

我不知道从这里去哪里。有人有在 ArcGIS 服务器上运行异步打印任务的示例或经验吗？

printTask 的 javascript 如下。有没有办法将这个 javascript 重写为更加异步或“非阻塞”？

# 编码

*（为简洁起见）*

```
dojo.require("esri.tasks.PrintTask");

function Print() {
  var printTool = this;

  this.executePrint = function(){
    var params = new esri.tasks.PrintParameters();
    params.map = map;
    params.template = selectedTemplate;
    printTask = new esri.tasks.PrintTask(printUrl, {async: true});
    printTask.execute(params, printTool.printComplete, printTool.printError);
  };

  this.printComplete = function(result){
    dojo.place("<div><a href='" + result.url + "'></a></div>", printForm, "last");
  };

  this.printError = function(err){
    dojo.byId("printJob").innerHTML = err;
  };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T04:24:04.577

调用打印任务时，如果任务是异步的，则需要调用 printTask.submitJob 方法，而不是执行方法。

请参阅 [https://developers.arcgis.com/javascript/jshelp/intro_gp_running.html](https://developers.arcgis.com/javascript/jshelp/intro_gp_running.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:06:46.410

如果它是页面加载驱动的事件，请使用`dojo.addOnLoad`or `dojo.ready`，具体取决于您的版本。

如果您`Print`从用户事件（例如点击）调用，最简单的方法是安排它在空闲时运行

```
function whenIdle(ptr_fun) {
    setTimeout(ptr_fun, 1);
}
whenIdle(Print); 
```

# c# - 动态计算字符串表达式的结果

> ID：12431286
> 
> 赞同：7
> 
> 时间：2012-09-14T20:07:21.680
> 
> 标签：c#

有没有办法计算字符串表达式的结果，例如 `mystring = "2*a+32-Math.Sin(6)"`动态知道**a**是我拥有的变量，可能有一些动态解决方案或使用`System.Reflection`

```
string mystring = "2*a+32-Math.Sin(6)"`;
decimal result = SomeMethod(mystring,3); // where a = 3 for example 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-14T20:19:27.607

让javascript计算你的表达式怎么样？

```
Type scriptType = Type.GetTypeFromCLSID(Guid.Parse("0E59F1D5-1FBE-11D0-8FF2-00A0D10038BC"));

dynamic obj = Activator.CreateInstance(scriptType, false);
obj.Language = "javascript";

var res = obj.Eval("a=3; 2*a+32-Math.sin(6)"); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T20:12:10.053

您可以通过以下方式使用Datatable 的[计算](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)`SomeMethod`方法：

```
 static decimal Somemethod(int val)
        {
            var result = (decimal)new DataTable().Compute(string.Format("2*{0}+32-{1}", val, Math.Sin(6)), "");
            return result;
        } 
```

简单地说，你可以这样调用：

```
 result = Somemethod(3); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T20:25:33.630

如果发现它工作得很好，对不起，我想要的只是运行中的编译器。这就是我得到的

```
MessageBox.Show(Eval("5*3-Math.Sin(12) + 25*Math.Pow(3,2)").ToString());

public static object Eval(string sCSCode)
    {

        CodeDomProvider icc = CodeDomProvider.CreateProvider("C#");
        CompilerParameters cp = new CompilerParameters();

        cp.ReferencedAssemblies.Add("system.dll");
        cp.ReferencedAssemblies.Add("system.xml.dll");
        cp.ReferencedAssemblies.Add("system.data.dll");
        cp.ReferencedAssemblies.Add("system.windows.forms.dll");
        cp.ReferencedAssemblies.Add("system.drawing.dll");

        cp.CompilerOptions = "/t:library";
        cp.GenerateInMemory = true;

        StringBuilder sb = new StringBuilder("");
        sb.Append("using System;\n");
        sb.Append("using System.Xml;\n");
        sb.Append("using System.Data;\n");
        sb.Append("using System.Data.SqlClient;\n");
        sb.Append("using System.Windows.Forms;\n");
        sb.Append("using System.Drawing;\n");

        sb.Append("namespace CSCodeEvaler{ \n");
        sb.Append("public class CSCodeEvaler{ \n");
        sb.Append("public object EvalCode(){\n");
        sb.Append("return " + sCSCode + "; \n");
        sb.Append("} \n");
        sb.Append("} \n");
        sb.Append("}\n");

        CompilerResults cr = icc.CompileAssemblyFromSource(cp, sb.ToString());
        if (cr.Errors.Count > 0)
        {
            MessageBox.Show("ERROR: " + cr.Errors[0].ErrorText,
               "Error evaluating cs code", MessageBoxButton.OK,
               MessageBoxImage.Error);
            return null;
        }

        System.Reflection.Assembly a = cr.CompiledAssembly;
        object o = a.CreateInstance("CSCodeEvaler.CSCodeEvaler");

        Type t = o.GetType();
        System.Reflection.MethodInfo mi = t.GetMethod("EvalCode");

        object s = mi.Invoke(o, null);
        return s;

    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-10-07T05:39:32.843

以下是我所知道的在 C# 中动态评估字符串表达式的一些最流行的方法。

## 微软解决方案

*   [C# CodeDomCodeProvider](https://docs.microsoft.com/en-us/dotnet/api/system.codedom.compiler.codedomprovider?view=netframework-4.7.2)：
    *   请参阅[如何使用 LINQ](https://stackoverflow.com/questions/5766373/how-does-linqpad-compile-code)和此[CodeProject 文章](https://www.codeproject.com/Articles/11939/Evaluate-C-Code-Eval-Function)
*   [罗斯林](https://github.com/dotnet/roslyn)：
    *   请参阅[这篇关于 Rosly Emit API 的文章](https://joshvarty.com/2016/01/16/learn-roslyn-now-part-16-the-emit-api)和这个[StackOverflow 答案](https://stackoverflow.com/a/43630318/184528)
*   [数据表](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx).计算：
    *   在 StackOverflow 上查看这个[答案](https://stackoverflow.com/a/12431343/184528)
*   [Webbrowser.Document.InvokeScript](https://docs.microsoft.com/en-us/dotnet/api/system.windows.forms.htmldocument.invokescript?view=netframework-4.7.2)
    *   看到这个[StackOverflow 问题](https://stackoverflow.com/questions/7322420/calling-javascript-object-method-using-webbrowser-document-invokescript)
*   [数据绑定器.Eval](https://docs.microsoft.com/en-us/dotnet/api/system.web.ui.databinder.eval?redirectedfrom=MSDN&view=netframework-4.7.2#overloads)
*   [脚本控件](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-6.0/aa227400(v=vs.60))
    *   在 StackOverflow 上查看[这个答案](https://stackoverflow.com/questions/12431286/calculate-result-from-a-string-expression-dynamically/12431435#12431435)和[这个问题](https://stackoverflow.com/questions/16075775/calling-the-javascript-functions-inside-c-sharp-for-a-64-bit-project?noredirect=1&lq=1)

## 非微软解决方案（并不是说有什么问题）

*   表达式评估库：
    *   [逃跑](https://github.com/mparlak/Flee)
    *   [动态快车](https://github.com/davideicardi/DynamicExpresso/)
    *   [计算](https://archive.codeplex.com/?p=ncalc)
*   推出自己的语言构建工具包，例如：
    *   [讽刺](https://archive.codeplex.com/?p=irony)
    *   [拼图](https://www.codeproject.com/Articles/272494/Implementing-Programming-Languages-using-Csharp)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-14T20:24:46.387

我认为您所要求的内容没有任何本机支持，但是有很多方法可以实现它，其中没有一种是完全微不足道的，但我认为它们很容易：

*   利用具有所需表达支持的嵌入式语言。例如铁红宝石：http: [//ironruby.codeplex.com/](http://ironruby.codeplex.com/)

*   使用程序中的 C# 编译器，如 [LINQPad 如何编译代码？](https://stackoverflow.com/questions/5766373/how-does-linqpad-compile-code).

*   用讽刺之类的东西编写你自己的解析：http: [//irony.codeplex.com/](http://irony.codeplex.com/)

*   解析后，您可以使用表达式树来获取结果：http: [//msdn.microsoft.com/en-us/library/bb397951.aspx](http://msdn.microsoft.com/en-us/library/bb397951.aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T20:22:29.723

使用要用于评估表达式的方法制作抽象类。在运行时创建一个继承该类的新类。我会尽快分享代码。

正如这里所承诺的那样，代码是这样做的：

```
 public class BaseClass
    {
    public BaseClass(){}
    public virtual double Eval(double x,double y){return 0;}
}
public class MathExpressionParser
{
    private BaseClass Evalulator=null;
    public MathExpressionParser(){}
    public bool Intialize(string equation)
    {
        Microsoft.CSharp.CSharpCodeProvider cp=new Microsoft.CSharp.CSharpCodeProvider();
        System.CodeDom.Compiler.ICodeCompiler comp=cp.CreateCompiler();
        System.CodeDom.Compiler.CompilerParameters cpar=new CompilerParameters();

        cpar.GenerateInMemory=true;
        cpar.GenerateExecutable=false;
        cpar.ReferencedAssemblies.Add("system.dll");
        cpar.ReferencedAssemblies.Add("EquationsParser.exe");   //Did you see this before;

        string sourceCode="using System;"+
                          "class DrivedEval:EquationsParser.BaseClass" +
                          "{"+   
                                  "public DrivedEval(){}"+
                                  "public override double Eval(double x,double y)"+
                                  "{"+
                                        "return "+ /*Looook here code insertion*/ equation +";"+
                                  "}"+
                          "}";
        //the previouse source code will be compiled now(run time);
        CompilerResults result=comp.CompileAssemblyFromSource(cpar,sourceCode);

        //If there are error in the code display it for the programmer who enter the equation
        string errors="";
        foreach(CompilerError rrr in result.Errors)
        {
            if(rrr.IsWarning)
                continue;
            errors+="\n"+rrr.ErrorText;
            errors+="\n"+rrr.ToString();
        }
        //You Can show error if there in the sourceCode you just compiled uncomment the following
        //MessageBox.Show(errors);
        if(result.Errors.Count==0&&result.CompiledAssembly!=null)
        {
            Type objtype=result.CompiledAssembly.GetType("DrivedEval");
            try
            {
                if(objtype!=null)
                {
                    Evalulator=(BaseClass)Activator.CreateInstance(objtype);
                }
            }
            catch(Exception ex)
            {
                MessageBox.Show(ex.Message,"Error in Creation the object");
            }
            return true;
        }
        else return false;
    }
    public double evaluate(double x,double y)
    {
        if(Evalulator==null)
            return 0.0;
        return this.Evalulator.Eval(x,y);
    }
} 
```

您需要进行以下简单测试以确保其正常工作：

```
private void button1_Click(object sender, System.EventArgs e)
{

    if(parser.Intialize(textBox1.Text)==false)
{
    MessageBox.Show("Check equation");
    return;
}
textBox4.Text=(parser.evaluate(double.Parse(textBox2.Text),double.Parse(textBox3.Text))).ToString();
} 
```

# asp.net-mvc - 如何阻止 jQuery mobile 为 ASP.NET MVC 站点设置主题？

> ID：12431293
> 
> 赞同：0
> 
> 时间：2012-09-14T20:08:01.090
> 
> 标签：asp.net-mvc, jquery-mobile, themes

我们有一个自始至终都有自定义格式的 MVC 站点。我们正在使用 jQuery Mobile 并希望使用其中的功能，但它是所有内容的主题。我们不希望这样。

我发现[了这个 SO 问题](https://stackoverflow.com/questions/10108578/how-can-i-stop-jquery-mobile-to-apply-styles-to-my-specific-form-elements)，并在 _Layout.cshtml 页面中添加了这个 Javascript 代码：

```
$(function () {
    $('html').find('*').attr('data-role', 'none');
}); 
```

这适用于所有元素，但是在页面加载后的某个时候，jQuery 插入了一个仍然会导致问题`<div>`的属性。`data-role="page"`

我可以以某种方式完全禁用主题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T18:24:18.560

尝试简单添加`data-ajax=false`到负责导航的链接/按钮。

前任：

```
<a href="@Url.Action("Index", "MyPage")" data-ajax="false"> 
```

这将阻止 jquery 使用 ajax 进行转换，您的页面将重新加载，并且重复的 data-role=page 将不再位于 DOM 上。

它对我有用，也许也可以帮助你。

# facebook - Facebook For Wordpress 配置问题

> ID：12431294
> 
> 赞同：3
> 
> 时间：2012-09-14T20:08:04.513
> 
> 标签：facebook, wordpress

我正在尝试配置插件“Facebook For Wordpress”，但它不起作用。我按照[插件页面](https://developers.facebook.com/wordpress/)上的说明进行操作，也尝试[了这个用户指南](http://fbwordpress.com/fbwordpress.pdf)，但是当我尝试使用插件在 facebook 上发帖时，我总是遇到以下错误：

```
Failed posting to your Facebook Timeline. Error: null 
```

我无法提交我的打开图表，因为我无法在我的 Facebook 时间轴上发布。

你能帮助我吗？

我正在使用插件版本 1.0.2 和 Wordpress 版本 3.3.1

# vb.net - VB 2010 安装项目试图找到旧的 Crystal Reports 依赖项而不是新的依赖项

> ID：12431295
> 
> 赞同：1
> 
> 时间：2012-09-14T20:08:08.580
> 
> 标签：vb.net, crystal-reports-2008

我已将同时使用 SQL Server Express 和 Crystal Reports 的应用程序从 VB 2008 升级到 VB 2010。经过难以置信的努力和时间，我成功地升级了应用程序本身和它们的安装项目。SQL Server 2005 Express 现在升级到 SQL Server 2008 Express。然而，Crystal Reports 是另一回事。我已经卸载了适用于 Visual Studio 2008 的 Crystal Reports Basic，并在我的开发计算机上安装了适用于 Visual Studio 2010 13.0.4 的 SAP Crystal Reports 版本，该计算机为其安装了引导程序。我也必须安装 13.0.4 运行时，以便我可以在调试中运行应用程序。它们在调试中运行得很好，但是安装项目收到有关无法找到 2008 CrystalDecisions 依赖项的警告，即使 2008 版本已被删除且不应使用。选择了 Visual Studio 2010 13.0.4 的 SAP Crystal Reports 版本的先决条件，但我收到以下警告：

警告 1

找不到程序集 'SCoPe2006.exe' C:\Documents and Settings\DCD\My Documents\Visual Studio 2010\Projects TEMP 的依赖项 'CRYSTALDECISIONS.WINDOWS.FORMS' (Signature='692FBEA5521E1304' Version='10.5.3700.0') \Setup SCoPe 2006\Setup SCoPe 2006\Setup SCoPe 2006.vdproj 设置 SCoPe 2006

警告 2

找不到程序集 'SCoPe2006.exe' C:\Documents and Settings\DCD\My Documents\Visual Studio 2010\Projects TEMP\Setup 的依赖项 'CRYSTALDECISIONS.REPORTSOURCE' (Signature='692FBEA5521E1304' Version='10.5.3700.0') SCoPe 2006\Setup SCoPe 2006\Setup SCoPe 2006.vdproj 设置 SCoPe 2006

警告 3

找不到程序集 'SCoPe2006.exe' C:\Documents and Settings\DCD\My Documents\Visual Studio 2010\Projects TEMP\Setup 的依赖项 'CRYSTALDECISIONS.SHARED' (Signature='692FBEA5521E1304' Version='10.5.3700.0') SCoPe 2006\Setup SCoPe 2006\Setup SCoPe 2006.vdproj 设置 SCoPe 2006

警告 4

无法找到程序集 'SCoPe2006.exe' C:\Documents and Settings\DCD\My Documents\Visual Studio 2010\Projects TEMP 的依赖项 'CRYSTALDECISIONS.CRYSTALREPORTS.ENGINE' (Signature='692FBEA5521E1304' Version='10.5.3700.0') \Setup SCoPe 2006\Setup SCoPe 2006\Setup SCoPe 2006.vdproj 设置 SCoPe 2006

我已经在另一台计算机上安装了这些应用程序，并且它们安装了适用于 .NET Framework 4 的 SAP Crystal Reports 运行时引擎，它们应该这样做。当我运行应用程序时，我得到一个未处理的异常“无法加载文件或程序集'CrystalDecisions.CrystalReports.Engine，版本 = 10.5.3700.0”，我认为这是旧的 2008 Crystal Reports，应用程序不应该使用。

我找不到对 2008 Crystal Reports 依赖项的引用在应用程序本身或安装项目中的位置。

你能告诉我要改变什么来解决这个问题吗？

谢谢，

担

# sql - 使用 phpPgAdmin 创建表时出错

> ID：12431302
> 
> 赞同：0
> 
> 时间：2012-09-14T20:08:29.517
> 
> 标签：sql, postgresql

我一直在努力解决 phpPgAdmin 并且遇到了困难。尝试使用自动化工具创建表时，出现以下错误：

```
SQL error:

ERROR:  syntax error at or near "(" at character 96
In statement:
CREATE TABLE "public"."business_secondary_category" ("id" SERIAL, "primary_category_id" integer(10) DEFAULT NULL, "secondary_category" character varying(150) DEFAULT NULL, PRIMARY KEY ("id")) WITHOUT OIDS 
```

这就是我的设置方式：

![创建表的屏幕截图](../Images/74ea2eaad074598fc5a14d1fec90f576.png)

我不知道我做错了什么。[链接到字符](http://jsfiddle.net/loren_hibbard/AWVkz/)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:21:59.260

尝试取出 primary_category_id 列的长度规范，postgresql 不支持 type `integer(10)`，仅`integer`（aka `int4`）

# android - 以编程方式 HotBoot（热重启）Android 设备

> ID：12431304
> 
> 赞同：0
> 
> 时间：2012-09-14T20:08:31.190
> 
> 标签：android, reboot, root

我目前正在使用此代码重新启动我的 Android 设备：

```
try {
    Process proc = Runtime.getRuntime()
                    .exec(new String[]{ "su", "-c", "reboot" });
    proc.waitFor();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

现在，我想在`HotBoot (or "Hot Reboot")`我的 Android 手机上使用 Java。有谁知道这样做的方法？

*（如果您不知道 HotBoot 是什么，[请参考此链接](http://www.droidxforums.com/forum/droid-x-hacks/35451-what-hot-boot.html)）*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-30T06:57:17.340

您将需要一部有根电话。（以防万一）

```
su
busybox killall system_server 
```

或使用您的代码

```
try {
Process proc = Runtime.getRuntime()
            .exec(new String[]{ "su", "-c", "busybox killall system_server"});
    proc.waitFor();
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

# azure - 如何在 SQL Azure 中设置 ACS？

> ID：12431308
> 
> 赞同：1
> 
> 时间：2012-09-14T20:09:02.660
> 
> 标签：azure, azure-sql-database, acs

如何在 SQL Azure 中设置 ACS？

我正在尝试来自 Azure 的代码示例，即在 ASP.NET 和 MVC 3 中创建自定义登录页面。

它声称使用 ACS 管理门户。它指示登录到我的 Azure 主页并“导航到服务总线、访问控制和兑现部分”。哪里是？我在 Azure 主页上没有看到这个。

该示例在此处列出：

[http://msdn.microsoft.com/en-us/library/windowsazure/hh127794.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh127794.aspx)

步骤说：

> 通过 ACS 管理门户配置示例
> 
> 1.  打开浏览器，导航到 Windows Azure 主页 (http://go.microsoft.com/fwlink/?LinkId=130560)，然后登录。导航到服务总线、访问控制和缓存部分以配置您的 ACS 服务命名空间。创建命名空间后，选择它并单击页面顶部的管理 > 访问控制服务。这将在新窗口中启动页面。

哪里是？我在 Azure 主页上没有看到这个。

[http://i67.photobucket.com/albums/h292/Athono/AZURE/whereistheservicebus.png](http://i67.photobucket.com/albums/h292/Athono/AZURE/whereistheservicebus.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:14:30.923

您看到的是新的预览门户（我参考了您的屏幕截图）。为了访问 Azure 订阅的所有功能，您可能还需要使用“旧”Silverlight 门户。今天，ACS 仍然如此。

您可以通过以下 URL 访问旧门户：[https ://windows.azure.com/](https://windows.azure.com/)

# c++ - 获取特定的 COM 服务器实例

> ID：12431314
> 
> 赞同：1
> 
> 时间：2012-09-14T20:09:39.077
> 
> 标签：c++, winapi, com, ole

假设我有多个 .exe 文件，它们通过函数为某个 IID 注册 COM IClassFactories并在参数中`CoRegisterClassObject`指定`REGCLS_MULTI_SEPARATE`标志。`flags`

有没有办法让客户端尝试获取公开接口的实例来指定我希望它从哪个进程获取该实例？到目前为止，在我的实验中，当我调用`CoCreateInstance`它时，它给了我一个指向来自运行时间最长的 LocalServer 的实例的指针，该实例暴露了所请求的接口。

# django - DEBUG True 时没有来自 Django 的 Traceback

> ID：12431316
> 
> 赞同：1
> 
> 时间：2012-09-14T20:09:42.010
> 
> 标签：django

我在 Nginx 上的 Fastcgi 下运行。我有 DEBUG = True，当我在我的网站上访问不正确的 url 时，我得到了正常的 Django 调试页面。

但是，我通过 jQuery 进行了 Ajax 调用，它返回“应用程序引发了未处理的异常”。而不是 Django 回溯。我真的想不通为什么。任何帮助，将不胜感激。

编辑：

```
def FetchItem(request):
    mimetype = 'application/json'
    item_list = simplejson.loads(request.POST['item_list'])
    auth = functions.auth_session_check(request)
    if auth:
        response = [functions.item_by_id(itemid) for itemid in item_list]
    else:
        response = []
    return HttpResponse(simplejson.dumps(response), mimetype) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:15:42.330

服务器将返回带有引用和其他信息的常规调试页面。但由于是 ajax 调用，该页面的内容并没有显示在浏览器上。

您可以尝试通过直接访问该 url 来进行非 ajax 调用。

或者在一些开发人员工具（如 goolgle chromes 开发人员工具）中检查 ajax 请求的响应数据。

# mysql - 热门报告指标 MYSQL

> ID：12431317
> 
> 赞同：1
> 
> 时间：2012-09-14T20:09:43.993
> 
> 标签：mysql, database, join, average

首先恭喜您拥有如此出色的网站，它总是以最专业的答案出现在搜索中。

我正在使用 MySql JOINS 并实际上试图在 MySql 上应用一些预处理，让我们进入正题：

鉴于这 3 个表：

```
CREATE TABLE `reports_indicators` (
  `report_id` int(11) NOT NULL,
  `indicator_id` int(11) NOT NULL,
  `reported` varchar(10) DEFAULT NULL,
  `id` int(11) NOT NULL AUTO_INCREMENT,
  PRIMARY KEY (`id`,`report_id`,`indicator_id`),
  KEY `fk_reports_has_indicators_indicators1` (`indicator_id`),
  KEY `fk_reports_has_indicators_reports1` (`report_id`)
) ENGINE=InnoDB AUTO_INCREMENT=77409 DEFAULT CHARSET=latin1;

CREATE TABLE `reports` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) DEFAULT 'untiteled'
) ENGINE=InnoDB AUTO_INCREMENT=11609 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */;

CREATE TABLE `indicators` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(100) DEFAULT NULL,
  `description` text,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=312 DEFAULT CHARSET=latin1;
/*!40101 SET character_set_client = @saved_cs_client */; 
```

我正在尝试获得最重要的报告指标，就这么简单……但我做不到！

我只能从一份报告中得到一组指标：

```
 SELECT *
  FROM reports_indicators as ri
  INNER JOIN indicators as i
  ON i.id = ri.indicator_id
  WHERE ri.report_id=6867
  ORDER BY ri.report_id asc; 
```

我知道甚至不接近，但是当我开始尝试 AVG 时发现它不能放在赖特的地方。

有什么帮助吗？

非常感谢！

bto。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:13:52.337

这假设通过“顶部报告的指标”，您的意思是在`reports_indicators`表中具有最多关联记录的指标将被排序以首先出现：

```
SELECT 
    i.id,
    i.name, 
    COUNT(*) AS TotalReported
FROM 
    reports_indicators as ri
    INNER JOIN indicators as i
        ON i.id = ri.indicator_id
GROUP BY i.id, i.name
ORDER BY COUNT(*) DESC; 
```

# sql-server-2008 - 对破坏性 SQL Server 查询需要类似 Git 的“提交消息”

> ID：12431324
> 
> 赞同：0
> 
> 时间：2012-09-14T20:10:13.470
> 
> 标签：sql-server-2008

我们正在构建一个数据库，用于金融工程团队的开发工作。在数据库上运行的绝大多数查询将是`SELECT`；当输入新数据和/或发布对旧语句的修订时，应每季度运行一次破坏性查询（和插入）。

我想知道是否可以强制用户在每次运行数据更改查询（、、、和相关）时输入 Git 样式的“提交”消息`INSERT`，如果`UPDATE`可以，如何设置这样的功能。`DELETE``ALTER`

# amazon-ec2 - 如何使用 s3fs 从 S3 存储桶挂载将文件和目录复制到 EBS

> ID：12431325
> 
> 赞同：0
> 
> 时间：2012-09-14T20:10:17.803
> 
> 标签：amazon-ec2, amazon-ebs, s3fs

我在一个带有 S3FS 的 EC2 实例中将 S3 存储桶挂载为卷。我已经用 PHP 在那里创建了一个超过 20GB 的目录结构。

当 S3FS 耗尽实例内存并且上传速度非常慢时，我想将所有文件移动到附加到同一实例的 EBS。

我尝试过 S3CMD，但存在一些不兼容，因为 S3FS 在存储桶中创建了与目录同名的零大小对象。

还尝试编写脚本以递归方式复制跳过那些零大小对象的结构。

没有工作。

有没有人尝试过这样做？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:44:36.940

@hernangarcia 不要让事情变得复杂，使用递归 wget 那个 wget -r 后跟存储桶端点的 url。您可以将所有内容下载到 EBS 卷。另外我的建议是不要在实例的根卷上存储所有那些像 20 GB 的文件，而是将另一个卷附加到它，然后将所有这些文件存储在那个额外的卷中，如果你有一个高 IOPS 卷，那么操作会更快。

# python - 我们可以使用正则表达式来检查每种类型的字符是否有奇数吗？

> ID：12431326
> 
> 赞同：15
> 
> 时间：2012-09-14T20:10:19.653
> 
> 标签：python, regex

### 问题

我正在尝试创建一个正则表达式，我们可以在其中检查某个参考集中存在的所有字母是否存在于其他字符串中，但仅限于奇数（1、3、5，...）。

这是代表问题的[DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automaton "确定性有限自动机")的（非常）粗略的图像：

![奇数 A 和 Bs DFA](../Images/69c9a5806e1f5e4b8a110da66f1604d6.png)

### 我的（损坏的）解决方案

我开始使用有限集，`{a, b}`所以我基本上会检查“字符串中是否同时存在奇数个`a`s 和奇数个s？”`b`

不幸的是，我自己并没有走多远。我首先阅读[了这个线程](https://stackoverflow.com/questions/3698625/regular-expression-for-strings-with-even-number-of-as-and-odd-no-of-bs)，它与这个概念非常相似，但无法从`(aa|bb|(ab|ba)(aa|bb)*(ba|ab))*(b|(ab|ba)(bb|aa)*a)`. *（我了解它是如何工作的，但不知道如何将其转换为检查存在的两个*项目的奇数。）

**到目前为止，这是我想出的**：`^((ab|ba)(bb|aa)?|(bb|aa)?(ab|ba))+$`。这基本上检查是否有`ab`or`ba`后跟`bb`or `aa`or nothing，这将导致`ab`, `ba`, `abaa`, `abbb`, `baaa`, or `babb`。（它也做与此相反的操作，首先检查双字母。）然后可以无限期地重复。我遇到的问题是我似乎无法调整它以匹配字符串`bbaaba`而不匹配`bbaa`。

另外，上面的方法不能动态调整`{a, b, c}`，例如，尽管我愿意放弃这个来解决最初的问题。

### 测试

这是我的测试字符串和所需的输出，括号中是原因：

```
"ba"      # True (1a, 1b)
"abbb"    # True (1a, 3b)
"bbba"    # True (1a, 3b)
"bbab"    # True (1a, 3b)
"ababab"  # True (3a, 3b)
"bbaaba"  # True (3a, 3b)
"abb"     # False (2b)
"aabb"    # False (2a, 2b)
"aabba"   # False (2b)
""        # False (0a, 0b is "even")
"a"       # False (0b is "even")
"b"       # False (0a is "even") 
```

### 问题

那么，这可以通过正则表达式实现吗？还是正则表达式比 DFA 更受限制？我知道它可以通过一个基本循环来完成，但这不是我想要的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T21:00:18.817

正则表达式并不比[DFA](http://en.wikipedia.org/wiki/Deterministic_finite_automaton)更受限制；事实上，它们是等价的。（带有反向引用的 Perl 风格的“正则表达式”严格来说更强大，所以它们根本不是“常规的”。）

`a`如果字符串仅包含s ，我们可以轻松编写正则表达式：

```
a(aa)* 
```

如果中间也可能出现其他字母，我们仍然可以通过简单地忽略这些字符来做到这一点：

```
[^a]*a([^a]*a[^a]*a)*[^a]* 
```

因为正则表达式等同于 DFA，所以我们对每个单独的字母都有一个 DFA。其实很简单：

```
 [^a] _      [^a] _
     / \         / \
     | v   a     | v
---> (0) -----> ((1))
         <-----
            a 
```

状态 (0) 是开始状态（“看到偶数个`a`s”），状态 ((1)) 是唯一接受状态（“看到奇数个`a`s”）。如果我们看到一个`a`，我们就进入另一个状态；对于任何其他角色，我们保持相同的状态。

现在关于 DFA 的好处是它们是*可组合*的。特别是，它们在交叉口下是封闭的。这意味着，如果我们有一个 DFA 识别语言“包含奇数个`a`s 的字符串”，另一个识别语言“包含奇数个`b`s 的字符串”，我们可以将它们组合成一个识别这两种语言的交集，即“包含奇数个`a`'和奇数个'的字符串`b`”。

我不会详细介绍算法，但[这个问题](https://stackoverflow.com/questions/7780521/how-to-use-the-intersection-construction-to-form-a-dfa)有一些很好的答案。生成的 DFA 将具有四种状态：“`a`看到偶数个 s，看到偶数个`b`s”，“`a`看到偶数个 s，看到奇数个`b`s”等等。

由于 DFA 等同于正则表达式，因此还存在一个正则表达式可以精确匹配这些字符串。同样，我不会详细介绍该算法，但[这里有一篇文章](http://qntm.org/algo)很好地解释了它。方便的是，它还附带了一些 Python 3 代码来完成脏活：

```
>>> from fsm import fsm
>>> a = fsm(
      alphabet = {'a', 'b'},
      states = {0, 1, 2, 3},
      initial = 0,
      finals = {3},
      map = {
        0: {'a': 1, 'b': 2},
        1: {'a': 0, 'b': 3},
        2: {'a': 3, 'b': 0},
        3: {'a': 2, 'b': 1}
      }
    )
>>> str(a.lego())
'a*(ab|b(ba*b)*(a|ba+b))((a|ba+b)(ba*b)*(a|ba+b)|ba*b)*' 
```

库中可能存在错误，或者我使用错误，因为一`a*`开始不可能是正确的。但是你明白了：虽然理论上可行，但**你真的不想为此使用正则表达式！**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T20:37:45.953

这是一种方法，使用前瞻依次断言每个条件。

```
^(?=[^a]*a(?:[^a]*a[^a]*a)*[^a]*$)(?=[^b]*b(?:[^b]*b[^b]*b)*[^b]*$)(.*)$ 
```

这是一个带有您的示例[的演示。](http://regexpal.com/?flags=gm&regex=%5E%28%3F%3D%5B%5Ea%5Cn%5D%2aa%28%3F%3A%5B%5Ea%5Cn%5D%2aa%5B%5Ea%5Cn%5D%2aa%29%2a%5B%5Ea%5Cn%5D%2a%24%29%28%3F%3D%5B%5Eb%5Cn%5D%2ab%28%3F%3A%5B%5Eb%5Cn%5D%2ab%5B%5Eb%5Cn%5D%2ab%29%2a%5B%5Eb%5Cn%5D%2a%24%29%28.%2a%29%24&input=ba%0D%0Aabbb%0D%0Abbba%0D%0Abbab%0D%0Aababab%0D%0Abbaaba%0D%0Aabb%0D%0Aaabb%0D%0Aaabba%0D%0A%0D%0Aa%0D%0Ab%0D%0A%0D%0A)（`\n`演示中的 s 用于演示目的。此外，`(.*)$`如果您只需要测试匹配而不是捕获，则可以删除。）

我将很快添加一个解释。

* * *

**解释**

我们只需要看一半：

```
(?=  [^a]*a  (?:[^a]*a[^a]*a)  *  [^a]*$  )
|    |       |                 |  |
|    |       |                 |  Only accept non-'a's to the end.
|    |       |                 |
|    |       |                 Zero or more of these pairs of 'a's.
|    |       |
|    |       Strictly a pair of 'a's.
|    |
|    Find the first 'a'.
|
Use a lookahead to assert multiple conditions. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-14T20:39:02.240

是的：

```
^(?=b*(?:ab*ab*)*ab*$)(?=a*(?:ba*ba*)*ba*$) 
```

**解释：**

```
^             # Start of string
(?=           # Assert that it's possible to match
 b*           # any number of 'b's
 (?:ab*ab*)*  # followed by an even number of 'a's with optional 'b's in-between
 ab*          # followed by one 'a' and optional 'b's
 $            # until the end of the string.
)             # End of lookahead
(?=a*(?:ba*ba*)*ba*$)  # Same thing, vice versa 
```

正则表达式本身不匹配任何字符，因此您将始终得到一个空字符串作为匹配结果（这与`None`作为匹配结果不同）：

```
>>> import re
>>> re.match("^(?=b*(?:ab*ab*)*ab*$)(?=a*(?:ba*ba*)*ba*$)", "ab")
<_sre.SRE_Match object at 0x00000000022AA7E8>
>>> re.match("^(?=b*(?:ab*ab*)*ab*$)(?=a*(?:ba*ba*)*ba*$)", "aab") 
```

# html - 将光标移到书签上时，如何防止书签改变样式？

> ID：12431327
> 
> 赞同：0
> 
> 时间：2012-09-14T20:10:30.387
> 
> 标签：html, css, hyperlink, stylesheet

我对 CSS 几乎没有经验，所以这可能是一个非常简单的问题。

我的网页上有一个目录，其中包含如下链接：

```
<a href="#user-interface">User interface</a> 
```

在其他地方我有一个像这样的书签：

```
<a name="user-interface">User Interface</a> 
```

除此之外，我还有一个具有以下样式的 CSS 文件：

```
a:hover
{
    color:#D090D0;
    background:#803080;
    text-decoration:none;
} 
```

目标是在我将光标移到链接上时更改链接的颜色和背景颜色，并且效果很好。但问题是当我将鼠标移到书签上时，书签的样式也会发生变化。这对我来说很有意义，因为链接和书签都使用`<a>`标签，但我不知道如何在 CSS 上区分两者。我知道我可以为链接使用一个类，但我想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:14:16.070

`<a name="...">`已弃用。

相反，您应该`id="..."`在任何元素上放置一个。

要回答问题，请添加`:link`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:18:36.420

`:link`根据 W3Schools 的说法，虽然选择器似乎有效，但它仅适用于未访问的链接。

（**编辑：**似乎 W3Schools 对此具有误导性。`:link`至少在某些浏览器中，选择器将选择`<a>`链接到某物的标签，无论是否访问过，但该`color`属性将被浏览器默认访问的链接覆盖。显然，属性选择器，如下所述，比默认浏览器设置具有更高的特异性，所以如果你想强制你的链接是你设置的颜色，不管用户之前是否点击过那个链接，那么应该使用属性选择器.)

如果您不太关心 IE6，并且为 IE 7 和 8 指定了文档类型，那么一种方法是使用属性选择器：

```
a[href]:hover {
    color:#D090D0;
    background:#803080;
    text-decoration:none;
} 
```

除此之外，我认为你最好添加一个类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:14:38.590

使用`:link`选择器选择链接

```
a:link:hover
{
    color:#D090D0;
    background:#803080;
    text-decoration:none;
} 
```

[http://jsfiddle.net/9r4L9/](http://jsfiddle.net/9r4L9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T20:14:37.347

使用`class`：

在 HTML 中，使用`class`属性。

```
<a href="#user-interface" class="foo">User interface</a>
<a name="user-interface">User Interface</a> 
```

在 CSS 中：

```
.foo:hover
{
    color:#D090D0;
    background:#803080;
    text-decoration:none;
} 
```

现在，该样式仅适用于具有 class 的元素`foo`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T20:14:57.020

向书签添加一个类，然后在悬停声明后在其上添加一些样式：

```
<a class="bookmark" name="user-interface">User Interface</a> 
```

和CSS：

```
a:hover
{
    color:#D090D0;
    background:#803080;
    text-decoration:none;
}
a.bookmark {
    color: black;
    background: white;
    text-decoration:none;
} 
```

# c# - C# IF 语句未正确中断

> ID：12431328
> 
> 赞同：1
> 
> 时间：2012-09-14T20:10:33.077
> 
> 标签：c#

一直把我的头撞到墙上，谷歌试图找到我问题的答案。

当下面的 IF 语句执行时，似乎完全通过 IF 和 ELSE 语句运行。

```
 if (IsPostBack)
         {
             Boolean bFileOK = false;

             if (fulReagentImg.HasFile)
             {
                 String sFileExtension = System.IO.Path.GetExtension(fulReagentImg.FileName).ToLower();
                 String sFileExtensionLabel = sFileExtension;
                 lblFileExtension.Text = sFileExtensionLabel;
                 String[] allowedExtensions = { ".gif", ".png", ".jpeg", ".jpg" };
                 for (int i = 0; i < allowedExtensions.Length; i++)
                 {
                     if (sFileExtension == allowedExtensions[i])
                     {
                         bFileOK = true;
                     }
                     else
                     {
                         lblException.Text = "Can only upload .gif, .png, .jpeg, .jpg";
                         lblException.CssClass = "red";
                     }

 } 
```

任何想法为什么它没有停止 bFileOK = true？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:12:06.350

你的循环是完全错误的。
如果用户的扩展名不等于列表中的**所有**扩展名，则会显示错误。

您应该调用该`Contains()`方法，最好是`HashSet<String>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:13:50.983

因为您的 sFileExtension 是单个扩展名，而不是所有四个允许的扩展名。这意味着即使 sFileExtension 是允许的扩展之一，它仍然不会是其他三个，所以无论如何，你的 else 语句都会受到影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:15:20.213

我认为您希望当 bFileOK =true 时您应该中断；然后使用 break 语句

```
if (IsPostBack)
    {
        Boolean bFileOK = false;

        if (fulReagentImg.HasFile)
        {
            String sFileExtension = System.IO.Path.GetExtension(fulReagentImg.FileName).ToLower();
            String sFileExtensionLabel = sFileExtension;
            lblFileExtension.Text = sFileExtensionLabel;
            String[] allowedExtensions = { ".gif", ".png", ".jpeg", ".jpg" };
            for (int i = 0; i < allowedExtensions.Length; i++)
            {
                if (sFileExtension == allowedExtensions[i])
                {
                    bFileOK = true;
                    break;
                }
                else
                {
                    lblException.Text = "Can only upload .gif, .png, .jpeg, .jpg";
                    lblException.CssClass = "red";
                }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T20:13:51.200

您不应该在 for 循环中包含 else ，否则您将至少发布失败消息 allowedExtensions.Length-1 次。

将 else 移出 for 循环，并让它跟随：

```
if(bFileOK)
{
//Do Stuff
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T20:14:26.597

是否有可能允许扩展中的第一项成功而第二项失败从而进入标准的第一部分和第二部分？也许你的意思是：

```
if (IsPostBack)
    {
        Boolean bFileOK = false;

        if (fulReagentImg.HasFile)
        {
            String sFileExtension = System.IO.Path.GetExtension(fulReagentImg.FileName).ToLower();
            String sFileExtensionLabel = sFileExtension;
            lblFileExtension.Text = sFileExtensionLabel;
            String[] allowedExtensions = { ".gif", ".png", ".jpeg", ".jpg" };
            for (int i = 0; i < allowedExtensions.Length; i++)
            {
                if (sFileExtension == allowedExtensions[i])
                {
                    bFileOK = true;
                }
            }
            if (!bFileOK)
            {

                    lblException.Text = "Can only upload .gif, .png, .jpeg, .jpg";
                    lblException.CssClass = "red";

            }
     }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T20:18:49.240

您需要在将 bFileOk 设置为 true 后添加一个 break 语句。当您遍历数组中的每个字符串时，您实际上只测试了最后一个字符串 I 是数组。

我还将调查 Array.Contains 它将提供更清洁的实现。

# atk4 - addTotals 到 CRUD Grid 崩溃编辑

> ID：12431331
> 
> 赞同：0
> 
> 时间：2012-09-14T20:10:48.797
> 
> 标签：atk4, php

很简单的问题。我知道 CRUD 使用 Grid 所以我做了：

```
 $finances = $grant->ref('Finances');
        $crud=$tabs->addTab('Finances')->add('CRUD', array('allow_add'=>false, 'allow_del'=>false));
        $crud->setModel($finances);
        $crud->grid->addTotals(array('requested', 'committed', 'spent')); 
```

这添加了总行，但导致编辑按钮显示的弹出窗口内部没有任何内容 - 只是一个空白的白色弹出窗口。无论如何要在不“破坏”CRUD Grid的情况下获得总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T18:48:06.633

[https://github.com/atk4/atk4/issues/102](https://github.com/atk4/atk4/issues/102)

# html - 如何在html中编写方程式？

> ID：12431339
> 
> 赞同：51
> 
> 时间：2012-09-14T20:11:49.470
> 
> 标签：html, equation

我想在我的网页上写一些复杂的数学方程。有任何插件或任何东西吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-09-14T20:12:55.353

试试 mathjax [http://www.mathjax.org/](http://www.mathjax.org/)。我个人觉得非常好。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-15T17:13:31.027

对于复杂的方程，[MathJax](http://www.mathjax.org/)是当前实用的解决方案。[MathML](http://www.w3.org/Math/)原则上是一种结构性更强的方法，但浏览器支持相当有限，而且质量通常有问题。

然而，复杂性是相对的。对某些人来说，*E* = *mc* ² 或 ∂/∂<em>t + ***v*** ⋅ ∇ 可能很复杂，在 CSS 的帮助下，仅使用 HTML 就可以很好地编写这样的结构；在 HTML（和 CSS）中查看我的页面[数学](http://jkorpela.fi/math/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-22T13:52:10.070

如果您不想在 HTML 中实现任何 JavaScript，可以使用 CodeCogs 的方程式编辑器工具 ( [http://www.codecogs.com/latex/about.php](http://www.codecogs.com/latex/about.php) )。

它真的很容易使用。您所要做的就是使用按钮界面来编写您的方程式，并立即生成一个 HTML 图像链接。当您运行 HTML 时，图像将在 CodeCogs 的服务器上生成并在您的站点中实施。这是一个非常舒适的工具。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-06-05T04:51:07.927

使用快速示例`mathjax`：

加载 CDN：（确保指定一个`?config=`选项，因为它不包含在[推荐的 CDN 链接](https://cdnjs.com/libraries/mathjax)中-`default`工作正常）：

```
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script> 
```

然后，在您的 html 中，只需将等式包装在里面`$$ {equation here} $$`

例如`$$ {J(\theta) =\frac{1}{2m} [\sum^m_{i=1}(h_\theta(x^{(i)}) - y^{(i)})2 + \lambda\sum^n_{j=1}\theta^2_j} $$`

它应该在页面上显示为一个等式。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-14T20:15:00.147

你可以试试这个。有点过时了，所以不确定它是如何工作的：

[http://www.w3.org/Math/](http://www.w3.org/Math/)

对于 Firefox，他们有一篇关于[MathML的描述性文章](https://developer.mozilla.org/en-US/docs/Web/MathML/Authoring)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-12T18:24:28.230

我知道这有点晚了。但是想提一下我个人发现的**jqMath ，它比 MathJax 更简单、更轻量级。**

在此处查找详细信息：[https ://mathscribe.com/author/jqmath.html](https://mathscribe.com/author/jqmath.html)

这些文件可以从[https://mathscribe.com/downloads/mathscribe-win-0.4.6.zip下载](https://mathscribe.com/downloads/mathscribe-win-0.4.6.zip)

要使用这个，

1.  解压下载的文件
2.  找到**jqmath-etc-0.4.6.min.js**和**jqmath-0.4.3.css 文件**，并将它们包含在您的 html 中
3.  确保您的 html`<meta charset="utf-8">`在该`<head>`部分中有。
4.  在使用这些之前还包括**jQuery 。**

现在您可以在 html 或网页中编写数学方程式和公式。

访问上面的链接以了解有关如何使用 jqMath 编写数学公式的更多信息。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-17T07:10:02.333

您可以使用 KaTeX [https://katex.org/](https://katex.org/)。只需复制并粘贴 head 标签中的内容并将其粘贴到您的 html 文件中。身体内部进入乳胶内部`\(latex code here\)`。你可以在 GitHub 上查看它，它比 MathJax 更快。我参考了[javascript Katex not rendering](https://stackoverflow.com/a/61261821/9775757)你可以在 Github 上查看。它适用于主要浏览器下面是带有自动渲染选项的示例代码。

```
<!DOCTYPE html>
<!-- KaTeX requires the use of the HTML5 doctype. Without it, KaTeX may not render properly -->
<html>
  <head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>
  </head>
  <body>
      <p>\(x^2 = \sqrt{y}\)</p><br>
      <p style="color:blue;font-size:25px;">\(\frac {-b\pm\sqrt{b^2 - 4ac}}{2a}\)</P>
  </body>
</html>
```

# eclipse - Eclipse 的 XForms 编辑器（设计器）？

> ID：12431345
> 
> 赞同：3
> 
> 时间：2012-09-14T20:12:23.990
> 
> 标签：eclipse, xforms

我正在寻找 Eclipse 的 Xforms 编辑器。我找到了一些信息（点击），但仍然没有结果。是否有可能找到 Visual XForms Designer（现在是 IBM Forms）的源代码，源代码是否仍然存在？任何关于如何在 Eclipse 中创建/编辑 XForm 的建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:18:47.493

据我所知，市场上没有可用于针对多个 XForms 引擎的可用 XForms 编辑器。一些 XForms 引擎附带一个 XForms 编辑器，专门为它们附带的 XForms 引擎量身定制。尤其：

*   [IBM Forms](http://www-01.ibm.com/software/lotus/products/forms/)附带 IBM Forms Designer，这是一个基于 Eclipse 的工具。
*   [Orbeon Forms](http://www.orbeon.com/)附带 Forms Builder，这是一个基于 Web 的工具。

# android - 如何在 Android 中移动多个视图？

> ID：12431353
> 
> 赞同：1
> 
> 时间：2012-09-14T20:12:56.917
> 
> 标签：android, view, move

我的观点有一些问题。我创建了自己的视图（正方形），我想移动我放在屏幕上的任何正方形。使用菜单，我可以将其他方块放在屏幕上。问题是，当程序启动时，我在屏幕上有一个正方形，我可以移动它。但是当我放其他方块时，我可以移动最后一个。我怎样才能解决这个问题？

```
public class Square extends View {
private float x, y, width, height;
private int screenW, screenH;
public boolean isInside = false;
public int id=0;

public Square(Context context, int aid, int asw, int ash, float aw, float ah) {
    super(context);
    id = aid;
    screenH = ash;
    screenW = asw;
    x = asw/2;
    y = ash/2;
    width = aw;
    height = ah;
}
protected void onDraw(Canvas canvas){       
        Paint paint = new Paint();
        paint.setColor(Color.BLACK);
        canvas.drawLine(x, y, x+width, y, paint);
        canvas.drawLine(x, y, x, y+height, paint);
        canvas.drawLine(x+width, y+height, x+width, y, paint);
        canvas.drawLine(x+width, y+height, x, y+height, paint);
}
public void setPosition(float x, float y){      
    this.x = x-width/2;
    this.y = y-height/2;
    //invalidate();
}
public int contains(float ax, float ay){
    if(ax==x || (ax<(x+width) && ax > x) || ax==(x+width))
        if(ay==y || (ay<(y+height) && ay > y) || ay==(y+height))
            return id;
    return -1;      
} 
```

}

```
public class SquareBuilder extends Activity {

private int width, height;
//private RelativeLayout layout;
private FrameLayout layout;
private int id=0;
private ArrayList<Square> squareList;
Square squareTouched;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_square_builder);
    Display display = null;
    display = getWindowManager().getDefaultDisplay();
    DisplayMetrics outMetrics = new DisplayMetrics();
    display.getMetrics(outMetrics);     
    width = outMetrics.widthPixels;
    height = outMetrics.heightPixels;
    Log.i("Display size", "Width: "+width+" Height: "+height);
    Log.i("Display size", "Width: "+width/2+" Height: "+height/2);
    //layout = new RelativeLayout(this);
    layout = new FrameLayout(this);
    squareList = new ArrayList<Square>();
    Square sqr = new Square(this, id++, (int) width, (int)height,50,50);
    sqr.setOnTouchListener(new View.OnTouchListener() {
        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            Square sqr = (Square) v;
            switch(event.getAction()){
            case MotionEvent.ACTION_DOWN:
                if(sqr.contains(event.getX(),event.getY())>=0)
                    sqr.isInside = true;
                break;
            case MotionEvent.ACTION_MOVE:
                if(sqr.isInside)
                    sqr.setPosition(event.getX(),event.getY());
                break;
            case MotionEvent.ACTION_UP:
                sqr.isInside = false;
                break;
            }
            sqr.invalidate();
            //return super.onTouchEvent(event);     
            return true;
            //return false;
        }
    });
    squareTouched = null;
    squareList.add(sqr);
    layout.addView(sqr);
    setContentView(layout);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_square_builder, menu);
    return true;
}
public boolean onOptionsItemSelected(MenuItem item){
    switch(item.getItemId()){
        case R.id.menu_other:
            Square sqr = new Square(this, id++, (int) width, (int) height,50,50);
            sqr.setOnTouchListener(new View.OnTouchListener() {
                public boolean onTouch(View v, MotionEvent event) {
                    // TODO Auto-generated method stub
                    Square sqr = (Square) v;
                    switch(event.getAction()){
                    case MotionEvent.ACTION_DOWN:
                        if(sqr.contains(event.getX(),event.getY())>=0)
                            sqr.isInside = true;
                        break;
                    case MotionEvent.ACTION_MOVE:
                        if(sqr.isInside)
                            sqr.setPosition(event.getX(),event.getY());
                        break;
                    case MotionEvent.ACTION_UP:
                        sqr.isInside = false;
                        break;
                    }
                    sqr.invalidate();
                    //return super.onTouchEvent(event);     
                    return true;
                    //return false;
                }
            });
            squareList.add(sqr);
            layout.addView(sqr);
            setContentView(layout);
            break;
    }
    return super.onOptionsItemSelected(item);   
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:52:54.217

首先，让创建新方块成为 SquareBuilder 中的一个方法：

```
private Square newSquare() { ... 
```

然后用对这个新方法的调用替换用于创建正方形的重复代码。这将使您的问题更容易解决，因为您将只有该代码的一份副本。

然后可能会在每个 case 语句中添加一些日志记录，以查看哪些事件真正在哪里触发。

这也可能有帮助：[多个视图 OnTouch](https://stackoverflow.com/questions/4958498/multiple-views-ontouch-events) 事件 当触摸事件不在广场上时，您需要从事件中返回 false，以便可以将事件传播到其他侦听器。返回 true 会消耗事件。

# c# - 委托功能 无法访问属性

> ID：12431355
> 
> 赞同：1
> 
> 时间：2012-09-14T20:13:14.997
> 
> 标签：c#, function, delegates

我有这个代码

```
private static Func<fLogin,BusinessObject.User> Make = f => 
new BusinessObject.Usuario { 
Name = f.txtU.Text,
Pass = f.txtPass.Text,
}; 
```

所以。用户类是这样的。

```
public class User
{
public string Name {get; set; }
public string Pass {get; set; } 
public Company Com {get; set; }
} 
```

并且用户有一个公司 这里的公司

```
public class Company
{
public string CompanyName {get; set;}
} 
```

所以，这是问题，当我想访问公司名称时，给了我错误

```
private static Func<fLogin,BusinessObject.User> Make = f => 
new BusinessObject.Usuario { 
Name = f.txtU.Text,
Pass = f.txtPass.Text,
Com.CompanyName = f.txtC.text
};

Com.CompanyName = f.txtC.text 
```

这是不可能的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:16:58.873

您收到错误的原因

```
Com.CompanyName = f.txtC.text 
```

是您必须`Com`在对象初始化程序中设置属性，而不是在`CompanyName`属性上设置`Com`属性。解决方法是使用嵌套对象初始化程序设置为具有正确属性`Com`的新对象：`Company``CompanyName`

```
private static Func<fLogin,BusinessObject.User> Make = f => 
    new BusinessObject.User
    { 
        Name = f.txtU.Text,
        Pass = f.txtPass.Text,
        Com = new Company { CompanyName = f.txtC.text },
    }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:16:01.090

您应该更改`Com.CompanyName = f.txtC.text`为`Com = new Company { CompanyName = f.txtC.text }`. 所以字段应该如下所示：

```
 private static Func<fLogin,BusinessObject.User> Make = f => 
      new BusinessObject.User
      { 
          Name = f.txtU.Text,
          Pass = f.txtPass.Text,
          Com = new Company { CompanyName = f.txtC.text },
      }; 
```

在您的代码中，您尝试设置`Com`尚未初始化的对象的 CompanyName 属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:17:11.967

您不能在属性初始化程序中分配给属性的属性。`Com.CompanyName`此外，在没有实际创建`Company`对象的情况下进行分配是没有意义的。

```
private static Func<fLogin,BusinessObject.User> Make = f => 
    new BusinessObject.Usuario { 
        Name = f.txtU.Text,
        Pass = f.txtPass.Text,
        Com = new Company { CompanyName = f.txtC.text }
}; 
```

# google-apps-script - 尝试使用 SitesApp.getAllSites 获取 200 多个站点时出错

> ID：12431358
> 
> 赞同：0
> 
> 时间：2012-09-14T20:13:28.100
> 
> 标签：google-apps-script

在一个谷歌应用程序脚本中，我试图列出给定域中的所有网站，我可以使用前 200 个

var sites = SitesApp.getAllSites(domain, 1, 200);

但是当我尝试得到更多

站点 = SitesApp.getAllSites(域, 201, 200);

我收到一个异常，上面写着“服务错误：SitesApp：内部错误”我知道我们有 400 多个站点，所以我不确定是什么失败了

代码看起来像这样

```
var domain = 'abc.com';
var start = 1;
var max = 200;

try {
    var sites = SitesApp.getAllSites(domain, start, max)
    y = sites.length; 
  } catch (e) { 
    Logger.log('Site exception: '+e);
    y=0;
  }   
if ( y != 0 ) {
process_site(sites, doc, start, y);}

try {
    var sites2 = SitesApp.getAllSites(domain, 201, max)
    l = sites2.length; 
  } catch (e) { 
    Logger.log('Site2 exception: '+e);
    l = 0;
  }   
if ( l != 0 ) {
process_site(sites2, doc, 201, l);} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:06:41.977

这听起来可能是一个错误，请在[问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上提交问题。

# ruby - 为什么 collections.find({}) 为 250 个对象占用 9 秒以上 (MongoMapper)

> ID：12431360
> 
> 赞同：5
> 
> 时间：2012-09-14T20:13:32.203
> 
> 标签：ruby, ruby-on-rails-3, mongodb, mongomapper

我正在运行以下查询，平均需要 9 秒才能返回结果。上面没有过滤器，所以我不确定索引会有所帮助。为什么运行如此缓慢？那里只有 250 个对象，只有 4 个字段（所有文本）。

```
Country.collection.find({},:fields => ['country_name', 'country_code']).to_json

"cursor":"BasicCursor",
"nscanned":247,
"nscannedObjects":247,
"n":247,
"millis":0,
"nYields":0,
"nChunkSkips":0,
"isMultiKey":false,
"indexOnly":false,
"indexBounds":{},
"allPlans":[{"cursor":"BasicCursor","indexBounds":{}}] 
```

机器上的 cpu、内存和磁盘甚至都没有注意到查询运行。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:56:06.817

使用以下命令在“country_name”字段上创建索引：

```
db.countries.ensureIndex({country_name:1}); 
```

[这将极大地加快您的查询速度您可以在此处](http://www.mongodb.org/display/DOCS/Indexes)了解有关索引的更多信息

PS-您可以在看到“有更多”短语时键入“它”以显示更多信息，或者您可以使用以下命令显示没有“有更多”的所有结果：

```
db.countries.find({}, {'country_name' : 1, 'country_code' : 1}).forEach(printjson) 
```

并且您始终可以使用以下方法设置探查器：

```
>use databaseName;
> db.setProfilingLevel(2); // 2 tell the profiler to catch everything happened inside the DB 
```

[您可以在此处](http://www.mongodb.org/display/DOCS/Database+Profiler)了解有关探查器的更多信息

您可以使用在探查器中显示数据

```
> db.system.profile.find() 
```

此方法将为您提供有关数据库及其内部情况的更多信息。

# java - 需要修改此 Java 程序以仅打印每个素因子的一次迭代

> ID：12431361
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:13:34.883
> 
> 标签：java

我有一个 Java 程序“因素”，它接受一个命令行参数并打印它的主要因素。例如，如果您使用参数 3757208 运行程序，它将打印 2 2 2 7 13 13 397。我需要修改代码，以便每个素数只打印一次。所以对于上面的例子，我想要的结果是 2 7 13 397。谢谢！这是代码：

```
public class Factors
{

    public static void main(String[] args) 
    { // Print the prime factors of N.        
        long N = Long.parseLong(args[0]);
        long n = N;
        for (long i = 2; i*i <= n; i++) 
        { // Test whether i is a factor.
            while (n % i == 0) 
            { // Cast out and print i factors                 
                n = n / i;
                System.out.print(i + " ");
            }
        }
        // if biggest factor occurs only once, n > 1
        if (n > 1) System.out.println(n);
        else       System.out.println();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:15:11.743

您可以将其添加到 a`Set`中，然后`Set`在循环后打印您的，而不是打印找到的数字。这将自动摆脱重复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:17:22.673

你可以做

```
if(n % i == 0)
    System.out.println(i + " ");
while(n % i == 0)
    n /= i; 
```

代替

```
while (n % i == 0) 
{ // Cast out and print i factors                 
    n = n / i;
    System.out.print(i + " ");
} 
```

# yii - Yii：在模型中使用带有自定义变量的 CDbCriteria

> ID：12431362
> 
> 赞同：1
> 
> 时间：2012-09-14T20:13:37.577
> 
> 标签：yii

我正在尝试基于 full_name 进行搜索，它是 first_name 和 last_name 的串联，但我不断收到错误消息。

这是我的控制器的样子：

```
$criteria = new CDbCriteria;
$criteria->addSearchCondition('full_name',$customer_search);
$customers = Customer::model()->findAll($criteria); 
```

在我的客户模型中，我有一个应该返回全名的方法：

```
public function getFull_name() {
  return $this->first_name.' '.$this->last_name;
} 
```

但是，我得到这个错误：

```
CDbCommand failed to execute the SQL statement: SQLSTATE[42S22]: Column not found: 1054 Unknown column 'full_name' in 'where clause'. The SQL statement executed was: SELECT * FROM `customer` `t` WHERE full_name LIKE :ycp0 
```

我需要能够同时搜索 first_name 和 last_name，我需要进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:20:14.970

您不能在查询中使用“计算”​​列。您只需重写条件，以便它们只检查数据库中物理存在的列。

由于您想找到他们的名字或姓氏的一部分匹配的人，您*必须**将*搜索词括在百分号中（请参阅 MySql 文档）并使用 指定第二个条件：*[`LIKE`](http://dev.mysql.com/doc/refman/5.5/en/string-comparison-functions.html#operator_like)`OR`*

 *```
$criteria = new CDbCriteria;
$criteria->addSearchCondition('first_name', $customer_search);
$criteria->addSearchCondition('last_name', $customer_search, true, "OR");
$customers = Customer::model()->findAll($criteria); 
```*

# r - R将函数应用于选定的对或行

> ID：12431368
> 
> 赞同：0
> 
> 时间：2012-09-14T20:13:51.267
> 
> 标签：r, matrix, vectorization

我有一个矩阵 M 和一个矩阵 L，其中包含我需要在 M 中选择的“行索引对”，以便应用函数。该函数返回一个具有 2 行和相同列数的 M 矩阵：

```
set.seed(1)
# M has even number of rows
M = matrix(runif(24), ncol = 3)
# each row of L is a pair of row indexes that will be selected in M
# so the first 'pair' is M[1,] M[3,], the second is M[2,] M[4,] and so on
L = matrix(c(1,3,2,4,6,7), ncol = 2, byrow = T) 
```

函数 f 是：

```
f = function(r1, r2)
{
 matrix(c(r1+r2, r1-r2), nrow = 2, byrow = T)
} 
```

问题是需要循环 L，为每个“对”应用 f 并将结果附加到另一个矩阵。因此，对于上面的代码，最终结果将是：

```
#first row of L
res1 = f(M[1,], M[3,])
#second row of L
res2 = f(M[2,], M[4,])
#third row of L
res3 = f(M[6,], M[7,])

#append everything
RES = rbind(res1, res2, res3) 
```

我怎样才能矢量化这个操作？L 中的行索引是随机的，最终结果的行顺序无关紧要。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:23:27.917

如果您将`f`函数包装在将矩阵`M`作为附加参数的东西中怎么办：

```
fm <- function(rowVector, mat) {
  f(mat[rowVector[1],], mat[rowVector[2],])
} 
```

然后调用它`apply`：

```
apply(L, 1, fm, mat=M)

           [,1]       [,2]        [,3]
[1,]  0.8383620  1.2803317  1.84306495
[2,] -0.3073447 -0.5360839 -0.04628558
[3,]  0.8350886  0.2383430  1.15394514
[4,]  0.4231395 -0.1147705 -0.38573770
[5,]  1.0976537  1.7693513  0.86381629
[6,]  0.3375833  0.2144609 -0.43953124 
```

# asp.net - ASP.Net 正则表达式验证器动态设置 ValidationExpression

> ID：12431390
> 
> 赞同：1
> 
> 时间：2012-09-14T20:15:16.353
> 
> 标签：asp.net, validation

我正在尝试这样做：

```
<obout:OboutTextBox ID="txtDistributorEmail" runat="server" Width="250" />
    <asp:RegularExpressionValidator ID="revDistributorEmail" runat="server"     
    ErrorMessage="An invalid email address was entered."                                 
    ValidationExpression='<%=Mynamespace.RegEx.EMAIL %>' 
    ControlToValidate="txtDistributorEmail" /> 
```

```
namespace Mynamespace
{
    public class RegEx
    {
        public const string EMAIL = @"^([0-9a-zA-Z]([-\.\w]*[0-9a-zA-Z])*@([0-9a-zA-Z] 
        [-\w]*[0-9a-zA-Z]\.)+[a-zA-Z]{2,9})$";
    }
 } 
```

即使输入了正确的电子邮件，验证也会失败。但是如果我用`ValidationExpression`正则表达式替换`[]`它，它就可以正常工作。

有什么不正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-10T05:24:39.127

试试这个；用于动态`re`验证。

```
RegularExpressionValidator re = new RegularExpressionValidator();
re.ControlToValidate = "textbox121"; //mention your textbox id
re.Style.Add("color", "Red");
re.ID = "Reg1";
re.ValidationExpression = "^[a-zA-Z\\s]+$";
re.ErrorMessage = "Special Characters Are Not Allowed"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:23:43.660

这在 aspx 页面的顶部：

```
<%@ Import Namespace="Mynamespace" %> 
```

```
<asp:RegularExpressionValidator ID="revDistributorEmail" runat="server"     
    ErrorMessage="An invalid email address was entered."                                 
    ValidationExpression="<%# Mynamespace.RegEx.EMAIL %>" 
    Display="Dynamic"
    ControlToValidate="txtDistributorEmail" /> 
```

# asp.net - Microsoft WebMatrix 和 Visual Studio 有什么区别？

> ID：12431402
> 
> 赞同：16
> 
> 时间：2012-09-14T20:16:35.917
> 
> 标签：asp.net, .net, visual-studio

我知道使用 WebMatrix 更容易，因为该工具似乎更专注于 ASP.NET。但是，我很想知道是否可以仅使用 Visual Studio 创建相同的 ASP.NET 文件。使用 WebMatrix 是了解如何创建 Web 应用程序的良好开端吗？Visual Basic 也可以创建将在您的计算机上运行的应用程序，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T20:20:26.987

WebMatrix 是一个包含 Express IIS 的包，Visual Studio 是一个针对 .Net 框架开发的 IDE。基本上，Webmatrix 专门用于 Web 开发，而 Visual Studio 是一个强大的包，具有 Web 开发方面。这就是它的基础。希望有人有更深入的答案，但说实话，这很容易通过谷歌重新搜索。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-02T18:15:30.183

Webmatrix = Web 应用程序焦点；Visual Studio = 你决定应用程序的重点；

如果你只想做 Web 并且觉得 Visual Studio 对于你想做的那种项目来说太多了，这在很多情况下都是如此，那么我建议只使用 Web Matrix。但是，随着项目的增长，您很快就会发现自己在 Visual Studio 中，因为它具有更大的功能和范围来构建更复杂的系统。

如果我想要一个快速捕获所有解决方案（有点像 MAMP 或 XAMMP）来测试一个小型应用程序，或者使用 sql，我通常会启动一个 Web Matrix 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-28T15:13:16.163

据我了解，主要区别在于 Webmatrix 支持 PHP 和 node.js。

你可以在这里阅读更多 ：

[http://www.microsoft.com/web/platform/tools.aspx](http://www.microsoft.com/web/platform/tools.aspx)

# matrix - 矩阵与其他矩阵的矢量化索引（以八度为单位）

> ID：12431404
> 
> 赞同：2
> 
> 时间：2012-09-14T20:16:42.033
> 
> 标签：matrix, indexing, octave, vectorization

假设我们有一个 2D (5x5) 矩阵：

```
test =  

39   13   90    5   71  
60   78   38    4   11  
87   92   46   45   35  
40   96   61   17    1  
90   50   46   89   63 
```

以及第二个 2D (5x2) 矩阵：

```
tidx =

1   3  
2   4  
2   3  
2   4  
4   5 
```

现在我们想使用 tidx 作为 idex 进行测试，这样我们就可以得到以下输出：

```
out =

39   90  
78    4  
92   46      
96   17  
89   63 
```

一种方法是使用 for 循环......

```
for i=1:size(test,1)     
   out(i,:) = test(i,tidx(i,:)); 
end 
```

## 问题：

有没有办法对此进行矢量化，以便在没有 for 循环的情况下生成相同的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:33:29.627

这是一种方法：

```
test(repmat([1:rows(test)]',1,columns(tidx)) + (tidx-1)*rows(test)) 
```

你描述的是一个索引问题。当您将矩阵全部放在一维中时，您会得到

```
test(:) =
39
60
87
40
90
13
78
92
96
50
90
38
46
61
46
 5
 4
45
17
89
71
11
35
 1
63 
```

这可以使用单个数字进行索引。这是您如何弄清楚如何将 tidx 转换为正确格式的方法。

首先，我使用上面的参考来计算索引号，它们是：

```
outinx =
 1 11
 7 17
 8 13
 9 19
20 25 
```

然后我开始尝试找出模式。这个计算提供了一个线索：

```
(tidx-1)*rows(test) =
0   10
5   15
5   10
5   15
15   20 
```

这会将索引计数移动到正确的测试列。现在我只需要正确的行。

```
outinx-(tidx-1)*rows(test) =
1   1
2   2
3   3
4   4
5   5 
```

这种模式是由 for 循环创建的。我创建了该矩阵：

```
[1:rows(test)]' * ones(1,columns(tidx)) 
```

*编辑：这对内置函数做同样的事情。

```
repmat([1:rows(test)]',1,columns(tidx)) 
```

然后我将 2 加在一起并将它们用作测试的索引。

# eclipse - XText 多个文件扩展名

> ID：12431413
> 
> 赞同：3
> 
> 时间：2012-09-14T20:17:34.230
> 
> 标签：eclipse, dsl, xtext, mda

我想定义一种具有不同元素的语言，这些元素应包含在不同类型的文件中（即类似于带有 .cpp 和 .h 文件的 C++）。语法混合是正确的方法吗？如果是这样，我应该如何进行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-15T11:20:28.223

不同文件类型中的不同元素听起来像是语法混合的用例。基本语法应该定义两种语言共有的语言概念，子语言将从基本语法继承。

理想情况下，创建一个手动编写的 Ecore 元模型并将概念映射到它（即不要使用“生成”）。

从 2.10 开始，Xtext 支持解析器规则片段。这意味着您可以使用“片段”关键字定义规则的某些可重用部分。请参阅[https://github.com/eclipse/xtext-core/blob/761ffeac7e62525be5a5473988d7f1d577298b67/org.eclipse.xtext.tests/src/org/eclipse/xtext/parser/fragments/FragmentTestLanguage.xtext](https://github.com/eclipse/xtext-core/blob/761ffeac7e62525be5a5473988d7f1d577298b67/org.eclipse.xtext.tests/src/org/eclipse/xtext/parser/fragments/FragmentTestLanguage.xtext)。

# iphone - as3 air for ios 获取屏幕设备分辨率

> ID：12431415
> 
> 赞同：0
> 
> 时间：2012-09-14T20:17:40.167
> 
> 标签：iphone, ios, actionscript-3, flash, air

我正在尝试使用 as3 中的空气将我的 mc 设置为 iPhone 上的确切屏幕尺寸。

我累了：

```
import flash.display.Screen;
import flash.geom.Rectangle;

var mainScreen:Screen = Screen.mainScreen;
var screenBounds:Rectangle = mainScreen.bounds;

/// Does not work - comes out 320 by 480
w.text = ""+screenBounds.width+"";
h.text = ""+screenBounds.height+"";
BG.height = screenBounds.height;
BG.width = screenBounds.width;

/// Does not work - comes out 320 by 480
w.text = ""+Capabilities.screenResolutionX+"";
h.text = ""+Capabilities.screenResolutionY+"";
BG.height = Capabilities.screenResolutionY;
BG.width = Capabilities.screenResolutionX;

/// Does not work - comes out 320 by 480
w.text = ""+stage.fullScreenwidth+"";
h.text = ""+stage.fullScreenHeight+"";
BG.height = stage.fullScreenHeight;
BG.width = stage.fullScreenWidth;

/// Works BUT... it does NOT stretch to fit the stage.
/// I am starting with android screen size and it shrinks it proportionally
/// which means there is space on top or bottom or left side.
w.text = ""+stage.stageWidth+"";
h.text = ""+stage.stageHeight+"";
BG.height = stage.stageHeight;
BG.width= stage.stageWidth; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:26:15.807

您可以尝试使用 stage.scaleMode ：

```
stage.scaleMode = StageScaleMode.SHOW_ALL; 
```

或者

```
stage.scaleMode = StageScaleMode.EXACT_FIT; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T00:15:57.970

如果它是 320x480 的，而你说那是错误的，我可以假设你使用的是 iPhone 4S 吗？如果是这样，请进入 App Descriptor XML 文件。在底部（通常是文件中的最后一项），应该有这一行。

```
<requestedDisplayResolution>standard</requestedDisplayResolution> 
```

如果它被注释掉或设置为“标准”，这将是你的问题。将其更改为“高”，这将启用 Retina 支持。“标准”可放大非视网膜显示屏（iPhone 上为 320x480，iPad 上为 1024x768）。“高”将为您提供正确的显示分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-10T11:47:47.207

这里有一个详细的解释：

[http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html](http://www.adobe.com/devnet/air/articles/multiple-screen-sizes.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-06T17:10:59.610

如果其他人在获取 ios 的屏幕分辨率时遇到问题。发生的事情是在完成加载的 swf 和调用屏幕大小的时间之间没有足够的时间。

对于我的应用程序，我需要没有比例的 swf，因为我通过设置屏幕大小的相对值（百分比）来设置所有剪辑的大小和位置。

如果我的舞台是 800x1280 并且我有一个高度 = 100、宽度 = 100 的剪辑；

然后是一样的说我的 clips.height = int(stage.stageWidth * 0.125); 为 100 * 100 / 800 = 12.5；| 100 是 800 的 12.5%；

诀窍是对于您的第一帧（如果您使用的是闪光灯）

只需设置舞台规模并等待 swf 满载，仅此而已。

```
stage.align = StageAlign.TOP_LEFT;
stage.scaleMode = StageScaleMode.NO_SCALE;

var loadTimer:Timer = new Timer(10);
    loadTimer.addEventListener(TimerEvent.TIMER, loading);
    loadTimer.start();

function loading(evt){
    if(root.loaderInfo.bytesLoaded == root.loaderInfo.bytesTotal){
        loadTimer.stop();
        loadTimer.removeEventListener(TimerEvent.TIMER, loading);
        gotoAndPlay(2); 
        }
    } 
```

然后在第 2 帧中，您可以调用 stage.stageWidth ，它会为您提供真实大小，因为您有足够的时间让应用程序获得该值。

```
var stageW:int = stage.stageWidth;
var stageH:int = stage.stageHeight; 
```

我希望它可以帮助，谢谢

# objective-c - UITableViews dataSource 方法没有被调用

> ID：12431425
> 
> 赞同：0
> 
> 时间：2012-09-14T20:18:44.690
> 
> 标签：objective-c, xcode, uitableview, datasource

我想将我的数据源放在与控制器不同的文件中，但它不起作用。方法 cellForRowAtIndexPath、numberOfRowsInSection 和 numberOfSectionsInTableView 不会在我的其他文件中调用。我已将其设置为使用 dataSource 协议，并且在我的控制器的 viewDidLoad 中有这个`[self.tableView setDataSource:dataModel];`.
我不明白为什么它不起作用。您可以将 dataSource 设置为与 interfacebuilder 中的 viewController 不同的文件吗？但由于 viewDidLoad 中的 setDataSource，它应该可以工作。也许还有另一个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:05:21.757

您可以使用作为类扩展的类别将控制器设置在不同的文件中。我不确定你想使用你的控制器是否有你帖子中的数据源。

在任何情况下，您仍然需要通过在非 nil 对象上使用 setDataSource 方法设置对象委托来定义委托。在您的情况下，如果您的对象为零，那么您的 UITableView 对象将不会调用任何内容，因为`sending messages to nil is silently ignored`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:33:25.380

当您将其设置为数据源时，您是否检查过 dataModel 不为零？

# ibatis - Java Ibatis 迭代列表

> ID：12431430
> 
> 赞同：0
> 
> 时间：2012-09-14T20:19:10.713
> 
> 标签：ibatis, loops

Java 我正在使用 ibatis

使用 in 子句想要在 in 子句中迭代，每个人都在谈论以下解决方案，但是当我尝试时它给了我以下错误。

```
**Cause: com.ibatis.common.beans.ProbeException: There is no READABLE property named '[]' in class 'java.util.List'**

List entityIds = new ArrayList(2);
       entityIds.add(42167777);
       entityIds.add(43178455);

(List<EventCategory>)sqlMapClient.queryForList("getEventCategoryByEntityIds", entityIds);

<select id="getEventCategoryByEntityIds" parameterClass="java.util.List" resultMap="eventCategoryDetails">
    <![CDATA[
        SELECT E.EVENTCATEGORYID, ECAT.Name EVENTCATEGORYNAME, E.EVENTSUBCATEGORYID , ESUBCAT.Name EVENTSUBCATEGORYNAME  FROM
        Event E (nolock)
        JOIN EVENTCATEGORY ECAT (nolock) ON E.EventCategoryId=ECAT.EventCategoryId JOIN EVENTCATEGORY ESUBCAT ON E.EVENTSUBCATEGORYID=ESUBCAT.EventCategoryId 
        <dynamic prepend="where ENTITYID in ">
          <iterate open="(" close=")" conjunction=",">
          #[]#
          </iterate>
        </dynamic>
        ]]>
  </select> 
```

我生病了，并尝试尝试此解决方案，但没有奏效。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:02:41.997

如果您观看 ibatis 文档，您会在第 3.2.3.1 章中找到对 CDATA 的解释。转义 XML 符号。

因为您将 SQL 和 XML 组合在一个文档中，所以可能会发生冲突。最常见的冲突是大于和小于符号 (><)。SQL 语句使用这些符号作为运算符，但它们是 XML 中的保留符号。一个简单的解决方案是“转义”在 CDATA 元素中使用 XML 保留符号的 SQL 语句。

```
<statement
    id="selectPersonsByAge" parameterClass=”int” resultClass="person">
    <![CDATA[ SELECT * FROM PERSON WHERE AGE > #value# ]]>
</statement> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:51:11.410

在论坛上阅读了相同类型的问题后，我只删除了`<![CDATA[`它并开始工作。

有人知道为什么会这样吗？请与我们其他人分享。

# javascript - 外部元素边距不等于内部元素边距

> ID：12431434
> 
> 赞同：2
> 
> 时间：2012-09-14T20:19:25.923
> 
> 标签：javascript, android, html, android-webview

我正在使用 Android WebView 来显示我的应用程序的 HTML 内容。我需要动态找到一个元素（通常是一个 div）的完整高度，包括填充、边距和边框。我正在使用 JavaScript，不能使用 jQuery。

我一直`scrollHeight`在我的 div 上使用来获取高度。我得到了 div 的计算样式，并通过调用and`var style = window.getComputedStyle(DIV, null);`得到了顶部和底部边距。他们都是0px。问题是 仍然没有考虑属于 div 的边距的高度。`style.marginTop``style.marginBottom``scrollHeight`

我得到了 div 的子元素（通常是 P 或 H* 标签）并以相同的方式获得了相同的字段：`scrollHeight`、`marginTop`和`marginBottom`. `scrollHeight`s 完全相同（因为我通常每个 div 只有一个子元素），但子元素中通常有一个顶部或底部边距值，而该值未反映在父元素中。

我真的不明白为什么会这样。似乎通过孩子的边距呈现在父母之外，但父母不知道它，也无法直接访问它。

**我正在寻找一种通过父元素访问子元素定义的边距的方法。那可能吗？**

[这个问题](https://stackoverflow.com/questions/2555002/how-to-get-the-height-of-a-div-considering-inner-elements-margins)非常有帮助，但我没有找到为什么它以这种方式呈现的根本原因，并且线程似乎已经变冷了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:37:24.750

Sime Vidas 为我指明了正确的方向，非常感谢！

我发现自己试图找出 div 和他们的孩子之间折叠边距的确切高度（但在我的问题中措辞大不相同）。当通过 DOM 访问该信息时，它会告诉我父母和孩子的样式属性，但它不会报告任何折叠边距的高度。

所以......我的问题的真正答案是否定的。我还没有找到直接访问折叠边距属性的方法。

同样好的是获取`offsetTop`我的 div 的属性，并找到下一个 div 的属性之间的差异`offsetTop`。这给出了总高度，包括边距的最终渲染。要仅查找边距，请减去`scrollHeight`.

这可能不适用于所有情况，但对于我的目的来说已经绰绰有余了。

# java - Mockito：验证在特定点调用方法

> ID：12431436
> 
> 赞同：1
> 
> 时间：2012-09-14T20:19:33.810
> 
> 标签：java, mockito

假设调用`bar()`一个`Foo`对象将依次调用`baz()`它的`Waldo`对象，只是在第一次。换句话说，

```
Foo foo = new Foo();
foo.setWaldo(new Waldo());
foo.bar(); // This calls baz() on the Waldo.
foo.bar(); // This should not call baz() on the Waldo. 
```

这就是我`baz()`目前验证通话的方式。

```
Foo foo = new Foo();
Waldo waldo = mock(Waldo.class);
foo.setWaldo(waldo);
foo.bar();
foo.bar();
verify(waldo).baz(); 
```

问题在于它无法验证何时`baz()`被调用。即使`baz()`第二次`foo.bar()`被调用，这也会通过。

如何使用 Mockito 正确验证这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:20:23.387

```
Foo foo = new Foo();
Waldo waldo = mock(Waldo.class);
foo.setWaldo(waldo);
foo.bar();
verify(waldo).baz();
foo.bar();
verifyNoMoreInteractions(waldo); 
```

# c - 消息包 C API

> ID：12431441
> 
> 赞同：2
> 
> 时间：2012-09-14T20:19:46.803
> 
> 标签：c, msgpack, messagepack

在查看 MessagePack 的 C API 时，有许多函数可以根据类型适当地序列化（打包）数据：`msgpack_pack_uint8`, `msgpack_pack_int32`, ...

API 中似乎没有等效的调用来解包数据。 `msgpack_unpack_next`返回一个`msgpack_object`。这些对象仅具有粗粒度的类型（最大的类型：int64、double、...），基于包含的枚举。

我在这里错过了什么吗？是否期望使用粗对象然后进行投射？

应该如何正确拆包？

此外，是否有任何好的文档或使用示例？网站上的那些都是微不足道的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-25T10:27:12.683

在解包时，任何整数值始终`msgpack_object`作为固定宽度的 64 位整数存储在 a 中（`int64_t`如果为负，则为负`uint64_t`）。

有关等人`cpp/src/msgpack/object.h`的更多详细信息，请参阅 msgpack 如何处理解包逻辑，例如：`msgpack_object``cpp/src/msgpack/unpack.c`

```
static inline int template_callback_int8(unpack_user* u,
                                         int8_t d,
                                         msgpack_object* o) {
    if(d >= 0) {
        o->type = MSGPACK_OBJECT_POSITIVE_INTEGER; o->via.u64 = d;
        return 0;
    }
    else {
        o->type = MSGPACK_OBJECT_NEGATIVE_INTEGER; o->via.i64 = d;
        return 0;
    }
} 
```

这是因为在打包时，msgpack 会根据整数的值动态选择最佳编码方式，例如，如果您使用`msgpack_pack_uint16`打包整数，则：

*   如果值在 [0, 127] 中，它将保存在 1 个字节中，
*   `0xcc`如果值在 [128, 255] 中，则[2 个字节](https://github.com/msgpack/msgpack/blob/master/spec.md#int-format-family)作为第一个字节，
*   [3 个字节](https://github.com/msgpack/msgpack/blob/master/spec.md#int-format-family)，`0xcd`否则作为第一个字节。

有关`msgpack_pack_real_uint16`更多`cpp/src/msgpack/pack_template.h`详细信息，请参阅。

* * *

换句话说，在解包时，msgpack 使用足够大的正数或负数（测试 if `obj.type`is `MSGPACK_OBJECT_POSITIVE_INTEGER`or `MSGPACK_OBJECT_NEGATIVE_INTEGER`）来保存任何整数值。所以这取决于你：

*   如果您始终可以假设值永远不会溢出您的转换类型，则进行转换，
*   或者，如果该值对于您的接收器类型来说不够大，则动态检查（使用掩码），
*   或者，总是使用`int64_t`or `uint64_t`。

最后，C 测试套件 ( `msgpack/cpp/test/msgpackc_test.cpp`) 可能有助于浏览代码示例。

# jquery - jqgrid保存后回调函数

> ID：12431444
> 
> 赞同：0
> 
> 时间：2012-09-14T20:20:03.750
> 
> 标签：jquery, jqgrid

我正在使用以下代码段手动调用网格上的保存函数。我正在使用内联编辑。保存函数需要返回一个自定义对象。如何访问返回值？有回调函数吗？successfunc 是否只返回真/假？

```
jQuery("#grid_id").jqGrid('saveRow',rowid, succesfunc, url, extraparam, aftersavefunc,errorfunc, afterrestorefunc); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:40:15.740

如果你`saveRow`用来保存本地数据，你可以在你的`mySaveFunction`. 重要的是要理解，您必须使用[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#editrow)（或[saveRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing#saverow)`aftersavefunc` ）的参数而不是参数。这是典型的误解，但*只有在服务器上保存数据时*才会调用回调。在的情况下不会调用回调。我建议您使用“对象”形式的用法：`succesfunc``succesfunc`*`succesfunc``'clientArray'``editRow`*

 *```
var someRetValue;
jQuery("#grid_id").jqGrid('saveRow', rowid,
{
    url: 'clientArray'
    aftersavefunc: function (id, response, options) {
        someRetValue = response; // set someRetValue to any value
    }
}); 
```

另一方面，您可以考虑使用回调函数作为自己`"Save"`函数的参数。如果`"Save"`将有`afterSaveFunc`参数，您将不需要使用`"Save"`函数的任何返回值。您应该只构建您的 JavaScript 脚本以异步工作，而不是经典的同步顺序执行顺序。*

# iphone - iPhone 5 - 新图像必须遵循什么命名约定？

> ID：12431445
> 
> 赞同：40
> 
> 时间：2012-09-14T20:20:06.343
> 
> 标签：iphone, ios, ipad, retina-display

新 iPhone 5 必须加载新图像的命名约定是什么？

我们看到我们必须让设备加载 3 个默认图像

```
Default.png
Default@2x.png  and
Default-568h@2x.png 
```

应用程序使用的其他图像呢？

是否有会自动加载正确图像的命名约定？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-14T20:24:08.833

新的默认值为 Default-568h@2x.png。（注意连字符）

没有其他相应的变化。如果您需要新 iPhone 5 屏幕的不同图像，则必须将其创建为单独的名称。没有 1x/2x/新手机自动切换行为。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-14T20:25:44.970

如果您正在寻找类似于`~iPad`or `~iPhone`(like `~586h`) 的东西，那么没有任何内置的东西。但是您可以通过扩展 UIImage 类轻松地自己添加它。

查看[此源代码片段 (UIImage+Retina4)](http://www.sourcedrop.net/gTC2a09877843)以获取有关如何实现的信息。只需添加此 UIImage 类别，即可支持 ~568h@2x 文件。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-27T07:44:54.467

[我在这里](https://github.com/mrdepth/tools/tree/master/Retina4)解决了这个问题。只需将 @2x~568h 后缀添加到图像或 ~568h 到 xib。您也可以在 xib 中使用此图像。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-06T07:19:43.683

随着**`Asset Catalog`**Xcode 5 的引入，您只需将图像拖放到相应的相关区域即可。其他一切都将由 Xcode 自己处理。![在此处输入图像描述](../Images/15bd0f4420ace8fb8ce289d6f38d73c4.png).

您可以通过转到屏幕截图中的上述选项来创建新目录。

# java - 在同一个 glassfish 实例中保持多个会话处于活动状态

> ID：12431446
> 
> 赞同：4
> 
> 时间：2012-09-14T20:20:12.507
> 
> 标签：java, session, web, glassfish-3

现在我们正在开发一个大型应用程序，其中模块被部署为单个*.EAR*文件（每个文件都包含一个*.WAR*和一个*EJB .JAR*）。

我们在 GlassFish 3.1 中将应用程序配置为使用 JAAS 进行单点登录。因此，我们需要在 SSO 会话处于活动状态时保持每个 Web 模块会话处于活动状态。

一个示例可能是： Modules `A`，`B`并`C`使用 10 分钟的会话进行部署。用户使用 登录`A`，然后可以导航到`B`和`C`，并在 上花费（假设）20 分钟`C`。

这个想法是，当用户只使用时，我们必须在和`C`上保持他的会话（包括托管 bean）处于活动状态。`A``B`

什么可以帮助我们实现这一目标？一个想法是在每个模块上创建一个 servlet 来接触会话（从而使其保持活动状态），并从用户正在使用的模块向这些 servlet 发送异步（可能是单向的？）请求，但这似乎有点矫枉过正每次用户做某事时打开 HTTP 连接（通过 TCP）。也许投票在这里会有所帮助，但我们想避免这种交流。

另一个想法是使用共享内存缓存和缓存侦听器来访问其他会话，使用会话 ID 进行查找；这可以用更好的性能来解决问题吗？

我们对任何想法持开放态度……除了使用其他应用程序服务器（我们必须使用 OpenSource GlassFish - 没有 Coherence*Web）。

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T10:37:53.497

您需要 JAAS 吗？您可以使用 spring-security 实现解决方案，并为会话 id 提供支持 redis 缓存。因此，例如，当用户登录时`A`，会将会话 ID 放入 redis 缓存中，当用户`B`通过将会话 ID 作为查询参数传递的链接导航到时，弹簧安全层 (on `B`) 将确保session-id 在 redis 缓存中是活动的并且有效。Redis 内置了对过期数据的支持

这是一篇很好的文章： http: [//www.infoq.com/minibooks/Identity-Management-Shoestring](http://www.infoq.com/minibooks/Identity-Management-Shoestring)关于构建中央身份验证服务 (CAS)。

希望这可以帮助

# asp.net-mvc - Howto：只需将 SQL Server 数据库读取到 MVC 4 视图？

> ID：12431450
> 
> 赞同：3
> 
> 时间：2012-09-14T20:20:30.540
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-4, asp.net-4.5

我对 MVC 比较陌生。我试图只在页面上显示远程 SQL Server 表的内容。它是只读的，我在网上找到的几乎所有东西都在使用实体框架或类似的东西，这对我所追求的东西来说太过分了。我只需要将表中的所有行打印到视图中。

所以我的问题是：

1.  我是否应该将 sqlconn 和所有内容破解到我希望将数据打印到的视图中？
2.  或者我应该在该视图的控制器中添加 sql 吗？
3.  创建一个模型并以某种方式将数据返回到视图中？

我知道第 3 步是“正确”的方法，但是我正在寻找简单快捷的方法。:)

谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:24:36.743

你说 EF 是矫枉过正，但这是最简单的方法。也许使用 Linq to SQL，因为它更轻量级。这就是它的全部：

1.  生成 EF/L2S 实体类
2.  在控制器中实例化数据库上下文，并获取所有记录
3.  将 IEnumerable 记录返回到视图
4.  在视图中，使用`@Html.DisplayForModel()`

这是一个简单的例子。请注意，返回数据库实体类被认为是不好的做法，您应该首先将它们映射/自动映射到视图模型类型类。

**家庭控制器**

```
public ActionResult Index()
{
    MyEntityModel[] items = MyDatabaseContext.GetAllRows();
    return View(items);
} 
```

**主页/索引视图**

```
@model IEnumerable<MyEntityModel>

@foreach (MyEntityModel item in Model)
{
    @Html.DisplayFor(m => item)
} 
```

* * *

如果没有 EF / L2S，它几乎同样简单，但您必须为数据库记录创建自己的实体/包装类并手动填充它们。

还有用于 MVC 的脚手架项目将生成存储库和控制器类，以及 Razor 视图。例如，参见[NuGet 上的 MVC 脚手架](http://nuget.org/packages/MVCScaffolding)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:28:35.683

一旦您习惯了强迫自己将实体框架用于您的“小型”应用程序，那么只有到那时您才会真正理解这是最简单的方法。

当然，如果您来自记忆 ADO.NET 数据集/数据表/数据读取器等的背景。那么请确保您有带有“固定”操作的项目，您可以移植和修改它，但它确实只是旧的并且花费了您更多的时间在长跑。

1.  使用英孚
2.  在一个解决方案中使用多个项目
3.  如果可以，请使用存储库模式，因为您会发现原因，它会带来红利
4.  让你的控制器“瘦”
5.  不要使用“ViewModel”来使用/执行它。

拥有 View 和 Controller 的 SOC 很关键，但是 Models 文件夹不需要使用，如果你愿意，你可以不用它来连接东西，只要注意你的“模型”在哪里，遵守 SOLID 原则等。

# go - D 或 Go 用于集群游戏服务器

> ID：12431451
> 
> 赞同：3
> 
> 时间：2012-09-14T20:20:35.090
> 
> 标签：go, d, rpc

我正在设计一个游戏，但是这个问题适用于任何需要集群中的节点和主服务器之间双向通信的情况。我对集群很陌生，但我积极地用 Go 编程，偶尔用 D 编程。

我真的很想使用现代语言（不是 C/C++），所以我选择了这两种语言，因为：

*   数组切片
*   良好的并发支持
*   跨平台和本地编译（具有多个编译器实现）
*   GC（都在精确的 GC 上工作）

我已阅读[https://stackoverflow.com/questions/3554956/d-versus-go-comparison](https://stackoverflow.com/questions/3554956/d-versus-go-comparison)和 [The D Programming Language for Game Development](https://stackoverflow.com/questions/4516283/the-d-programming-language-for-game-development)。

在高层次上，我的游戏将完成服务器端的大部分处理，而客户端只是从他们的角度呈现游戏状态。该游戏旨在扩展，因此需要在集群中运行。组件主要受 CPU 限制，并异步更新到主服务器，与客户端共享游戏状态。大多数计算依赖于用户输入，因此这些事件需要向下发送到各个组件（因此是双向 RPC）。

我喜欢D的原因：

*   手动内存管理
*   模板/CTFE
*   代码安全（@safe、合同、输入/输出）

我喜欢 Go 的原因：

*   标准库（[pprof](http://golang.org/pkg/net/http/pprof/)，[RPC](http://golang.org/pkg/net/rpc/)）
*   围棋套路
*   `go`工具（尤其`go get -u`是安装/更新远程依赖项）

客户端可能会用 D 编写，但这不应该对服务器产生影响。

我倾向于 D，因为手动内存管理已融入该语言。虽然它没有很好的 RPC 库，但理论上我可以实现它，但我不能优雅地在 Go 中实现手动内存管理。

考虑到在两种语言之间的选择，你会用哪一种来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T21:33:04.423

我希望这两种方法都能奏效，而且很大程度上取决于你喜欢哪一种，但如果你在 D 中做客户端，我建议在 D 中做服务器，因为这样涉及的语言更少。如果您使用两种语言，那么从事您项目的任何人通常都必须同时了解它们，并且 Go 和 D 就目前的用户群而言都足够小，以至于很少有人会同时知道这两种语言 - 尽管如果只有您在工作它，你显然已经知道他们两个了。

但是，我要指出，如果使用 D 的问题是缺少 RPC 库，那么这不是问题，因为[Apache Thrift](http://thrift.apache.org/)支持D。所以，D*确实*有一个可靠的 RPC 库，即使它不在它的标准库中（事实上，它是 D 第一轮参与 Google 代码之夏的成果之一）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:59:24.007

我对你的游戏一无所知，如果你的服务器的良好并发性很重要，那么我投票给 Go。

我在 Go 中开发了通信服务器，使用 PUSH 技术实现通信。Go 非常适合此类任务。简洁简洁的代码，易于理解。

自动内存在并发应用程序中很重要。

客户端应用程序不像服务器应用程序那样并发。客户端应用程序应保持持续的高帧速率。

因此，没有全局 GC 锁的手动内存管理对客户端应用程序来说更好。

# c++ - C++ 中的 Miller-Rabin 素数测试问题

> ID：12431456
> 
> 赞同：1
> 
> 时间：2012-09-14T20:21:08.573
> 
> 标签：c++, math, primes

我一直在尝试[从 wikipedia 实现该算法](http://en.wikipedia.org/wiki/Miller%E2%80%93Rabin_primality_test#Algorithm_and_running_time)，虽然它从不输出复合数作为素数，但它输出了 75% 的素数作为复合数。

最多 1000 它给了我这个素数输出：

3、5、7、11、13、17、41、97、193、257、641、769

据我所知，我的实现与伪代码算法完全相同。我已经逐行调试它，它产生了所有预期的变量值（我跟着我的计算器）。这是我的功能：

```
bool primeTest(int n)
{
    int s = 0;
    int d = n - 1;

    while (d % 2 == 0)
    {
        d /= 2;
        s++;
    }

    // this is the LOOP from the pseudo-algorithm
    for (int i = 0; i < 10; i++)
    {
        int range = n - 4;
        int a = rand() % range + 2;
        //int a = rand() % (n/2 - 2) + 2;
        bool skip = false;
        long x = long(pow(a, d)) % n;

        if (x == 1 || x == n - 1)
            continue;

        for (int r = 1; r < s; r++)
        {
            x = long(pow(x, 2)) % n;

            if (x == 1)
            {
                // is not prime
                return false;
            }
            else if (x == n - 1)
            {
                skip = true;
                break;
            }
        }

        if (!skip)
        {
            // is not prime
            return false;
        }
    }

    // is prime
    return true;
} 
```

任何帮助将不胜感激 D：

编辑：这是整个程序，按照你们的建议进行了编辑 - 现在输出更加破碎：

```
bool primeTest(int n);

int main()
{
    int count = 1;     // number of found primes, 2 being the first of course
    int maxCount = 10001;
    long n = 3;
    long maxN = 1000;
    long prime = 0;

    while (count < maxCount && n <= maxN)
    {
        if (primeTest(n))
        {
            prime = n;
            cout << prime << endl;
            count++;
        }

        n += 2;
    }

    //cout << prime;
    return 0;
}

bool primeTest(int n)
{
    int s = 0;
    int d = n - 1;

    while (d % 2 == 0)
    {
        d /= 2;
        s++;
    }

    for (int i = 0; i < 10; i++)
    {
        int range = n - 4;
        int a = rand() % range + 2;
        //int a = rand() % (n/2 - 2) + 2;
        bool skip = false;
        //long x = long(pow(a, d)) % n;
        long x = a;
        for (int z = 1; z < d; z++)
        {
            x *= x;
        }

        x = x % n;

        if (x == 1 || x == n - 1)
            continue;

        for (int r = 1; r < s; r++)
        {
            //x = long(pow(x, 2)) % n;
            x = (x * x) % n;

            if (x == 1)
            {
                return false;
            }
            else if (x == n - 1)
            {
                skip = true;
                break;
            }
        }

        if (!skip)
        {
            return false;
        }
    }

    return true;
} 
```

现在素数的输出，从 3 到 1000（和以前一样）是：

3、5、17、257

我现在看到 x 变得太大了，它只是变成了一个垃圾值，但直到我删除了“% n”部分，我才看到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:49:21.573

错误的可能来源是对 pow 函数的两次调用。中间结果会很大（尤其是第一次调用）并且可能会溢出，导致错误。您应该查看 Wikipedia 上的[模幂运算](http://en.wikipedia.org/wiki/Modular_exponentiation)主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:41:00.663

问题的根源可能在这里：

```
x = long(pow(x, 2)) % n; 
```

`pow`来自 C 标准库的适用于浮点数，因此如果您只想计算以 n 为模的幂，则使用它是一个非常糟糕的主意。解法其实很简单，用手算个数即可：

```
x = (x * x) % n 
```

# android - 如何使用按钮使微调器更改另一个屏幕上的文本？

> ID：12431457
> 
> 赞同：1
> 
> 时间：2012-09-14T20:21:09.667
> 
> 标签：android, android-widget

在我的一个屏幕上，我有 3 个微调器，可让您选择种族、职业和阵营。我还有一个按钮，上面写着“创建”（btnCreate）。现在，当您单击创建时，它将带您进入主播放屏幕。该屏幕会显示类似名称：种族：班级：标题：等...

那么我如何让前一个屏幕中的微调器显示选择的内容并将其输入到新屏幕上呢？

我试过这个：

```
Button btnCreate = (Button) findViewById(R.id.btnCreate);
    btnCreate.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            TextView textViewStrRace = (TextView) findViewById(R.id.textViewStrRace);
            Spinner spinner2 = (Spinner) findViewById(R.id.spinner2);
            textViewStrRace.setText(spinner2.getSelectedItem().toString());

            Intent intent = new Intent(v.getContext(), PlayScreen.class);
            startActivityForResult(intent, 0);

        }
    }); 
```

那只是不断强制关闭应用程序。

编辑：

日志猫

> 09-14 20:10:15.634：E/AndroidRuntime(1378)：致命异常：主要 09-14 20:10:15.634：E/AndroidRuntime(1378)：java.lang.NullPointerException 09-14 20:10:15.634： E/AndroidRuntime(1378): 在 com.example.intent_buttontests.CreateNew$1.onClick(CreateNew.java:29) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 android.view.View.performClick( View.java:3511) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 android.view.View$PerformClick.run(View.java:14105) 09-14 20:10:15.634: E/ AndroidRuntime(1378): 在 android.os.Handler.handleCallback(Handler.java:605) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 android.os.Handler.dispatchMessage(Handler.java:92 ) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 android.os.Looper.loop(Looper.java:137) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 android .app.ActivityThread。main(ActivityThread.java:4424) 09-14 20:10:15.634: E/AndroidRuntime(1378): at java.lang.reflect.Method.invokeNative(Native Method) 09-14 20:10:15.634: E/AndroidRuntime (1378): 在 java.lang.reflect.Method.invoke(Method.java:511) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller。运行（ZygoteInit.java:784）09-14 20:10:15.634：E/AndroidRuntime（1378）：在 com.android.internal.os.ZygoteInit.main（ZygoteInit.java:551）09-14 20:10： 15.634：E/AndroidRuntime（1378）：在 dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime(1378): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:551) 09-14 20:10:15.634: E/AndroidRuntime(1378): at dalvik.system.NativeStart.main(Native Method)E/AndroidRuntime(1378): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 09-14 20:10:15.634: E/AndroidRuntime(1378): 在 com.android.internal .os.ZygoteInit.main(ZygoteInit.java:551) 09-14 20:10:15.634: E/AndroidRuntime(1378): at dalvik.system.NativeStart.main(Native Method)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:33:37.050

你介意想使用 logcat 并找出它到底哪里出错了吗？让我知道你是否这样做。还可以尝试使用 getApplicationcontext() 而不是 v.context。

# javascript - 使用 javascript 在 Flash 中加载外部图像？

> ID：12431460
> 
> 赞同：2
> 
> 时间：2012-09-14T20:21:15.703
> 
> 标签：javascript, flash, actionscript-2

我创建了一个使用这个 as2 代码加载外部 png 的 flash 电影：

```
photo1.loadMovie("flashimages/photo1.png"); 
```

我的客户希望我使用 javascript，以便他们可以编辑文件位置。这可能吗？

要温柔！我对javascript不是很熟悉:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:23:46.103

无需使用 javascript，`flashVars`在您的嵌入代码中就足够了：

```
<param name="flashVars" value="imgPath=flashimages/photo1.png"/>
<embed movie="" flashVars="imgPath=flashimages/photo1.png"....></embed> 
```

然后在闪存中`imgPath`从嵌入代码中获取：

```
photo1.loadMovie(_root.imgPath); 
```

# php - 重定向给出错误的结果列表

> ID：12431469
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:22:01.513
> 
> 标签：php

当结果数比总损失大一时输入正确，但从列表中减去一。例如：找到 12 个结果，但仅列出 11 个：

```
 $goto = mysql_fetch_array($query);
$results = mysql_num_rows($query); 
if($results == 1){    
    header('Location: movie.php?id='.$goto['id']);}

echo '<p><h2>Results for search "'.$_GET["search"].'": </h2></p>';
echo '<hr />';
echo "Found ".$total." result(s).</p><br>";

echo '<ol class="list">';

while ($resultado = mysql_fetch_assoc($query)) {
$titulo = $resultado['title'];  

echo '<li>';
$link = 'http://localhost/lab/movie.php?id=' . $resultado['id']; 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:27:21.863

你需要做这样的事情：

```
$results = mysql_num_rows($query); 
if($results == 1){    
    $goto = mysql_fetch_array($query);
    header('Location: movie.php?id='.$goto['id']);}
}

echo '<p><h2>Results for search "'.$_GET["search"].'": </h2></p>';
echo '<hr />';
echo "Found ".$results." result(s).</p><br>";

echo '<ol class="list">';

while ($resultado = mysql_fetch_assoc($query)) { 
```

您的代码在开始时获取第一条记录，如果有多个条目，则您将循环遍历其余记录 - 将第一条记录分箱。这样，在`$goto`您知道自己需要它之前，您不会填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:26:31.943

这是因为您正在使用此行上的第一个记录指针：

```
$goto = mysql_fetch_array($query); 
```

如果你在`$results == 1`条件内移动这条线，一切都应该正常。

现在，当您进入 while 循环时，您将从已经在第二条记录上的结果集指针开始。

# android - 用于 Zigbee 连接的 Android API

> ID：12431471
> 
> 赞同：1
> 
> 时间：2012-09-14T20:22:05.740
> 
> 标签：android, linux-kernel, device, linux-device-driver

Android 有 android.net.wifi 和 android.bluetooth 等连接 API

zigbee 有类似的 API 吗？例如，如果我希望手机成为 zigbee 终端节点

假设我已经在底层 Linux 内核中安装了 zigbee 的 .ko 模块（驱动程序）

应该怎么做才能访问这个模块？换句话说，用于设备管理的各种 android API 是如何实际实现的？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:06:14.230

您是否正在使用 zigbee 硬件和自定义 android 开发自定义 Android 设备？

一般来说，堆栈看起来大致是这样的（从下到上）

*   硬件
*   Linux 内核 + 驱动程序
*   JNI (Java Native Interface) 与驱动程序对话
*   使用 JNI 的 Jave 服务。此服务向设备公开高级 API。
*   客户端 Java 代码，打包在 android.jar 中，捆绑到应用程序中。该客户端与 Java 服务对话。

回答您的问题：

*   Vanilla Android 没有用于 zigbee 的 API（之前没有提到的层）
*   如果您想支持它，您将需要构建一个自定义的 Android 构建，其中至少包含一些层。

# matlab - 使用 matlab 在每次模拟中获得相同的结果

> ID：12431473
> 
> 赞同：2
> 
> 时间：2012-09-14T20:22:27.993
> 
> 标签：matlab, random, simulation, random-seed

> **可能重复：**
> [如何为伪随机数生成器设置自定义种子](https://stackoverflow.com/questions/4682080/how-to-set-custom-seed-for-pseudo-random-number-generator)

我正在用 matlab 构建一些模拟，并使用`rand`函数。

我想在每次运行时都获得相同的结果。我在某处读到我必须设置 rand 函数的种子。我尝试使用

```
s = RandStream('mcg16807', 'seed', 0)
RandStream.setGlobalStream(s); 
```

但它没有用。我做错了吗？

```
>> s = RandStream('mcg16807', 'seed', 5)
>> RandStream.setGlobalStream(s);
>> rand

ans = 

    0.5645

>> rand
ans = 

    0.3024

>> rand
ans = 

    0.7520 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:34:40.350

`RandStream.setGlobalStream`当您想重新开始并获得相同的随机数集时，您必须调用：

```
>> s = RandStream('mcg16807', 'seed', 5)
>> RandStream.setGlobalStream(s);
>> rand

ans = 

    0.5645

>> rand
ans = 

    0.3024

>> s = RandStream('mcg16807', 'seed', 5)
>> RandStream.setGlobalStream(s);
>> rand

ans = 

    0.5645

>> rand
ans = 

    0.3024 
```

我通常`setGlobalStream`只打电话一次，在我想每次都给我相同答案的脚本开头。抽到的数字`rand`都是随机的，但每次都是同一组随机数。

# c# - 如何使用资源编译批处理文件到 exe 并在 C# 中使用其 exe 运行它？

> ID：12431477
> 
> 赞同：0
> 
> 时间：2012-09-14T20:22:37.027
> 
> 标签：c#

我有批处理文件和一个包含一个可执行文件的资源文件夹。该文件又使用这些资源。我想将这些资源（批处理文件、可执行文件和带有资源的文件夹）编译为一个可执行文件。在启动这个 exe 后，我的批处理文件应该运行并带来所有随之而来的后果。

我想在 C# 上实现它。我应该从什么开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:28:25.907

如果您想完全按照说明进行操作，那么一种合理的方法是将所有资源打包到一个 zip 文件中，将其作为二进制资源嵌入到您的 C# 可执行文件中，并让可执行文件[提取资源](http://www.dotnetscraps.com/dotnetscraps/post/Insert-any-binary-file-in-C-assembly-and-extract-it-at-runtime.aspx)，[将文件解压缩](http://dotnetzip.codeplex.com/)到临时目录中并从那里运行它`Process.Create`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:31:49.823

@Jon 的回答是正确的，但您可以完全节省自己的编码 - 这就是自提取器所做的。例如，查看[WinZip Self Extractor](http://www.winzip.com/prodpagese.htm)。它可以做你想做的事。

# swt - SWT - 从表中获取选定的行

> ID：12431481
> 
> 赞同：2
> 
> 时间：2012-09-14T20:22:51.427
> 
> 标签：swt

我正在尝试编写一种方法，该方法将从表中获取当前选择并从选择中创建一个 ArrayList。

方法：

```
 public void getPlotterSelection() {
   selPrinters = new ArrayList<PrinterProfile>();
   int[] row = table.getSelectionIndices();
   Arrays.sort(row);
   if (row.length > 0) {
     for(int i = row.length-1; i >= 0; i--){
        PrinterProfile pp = new PrinterProfile(aa.get(i).getPrinterName(), aa.get(i).getProfileName());
        selPrinters.add(pp);
     }
  }
} 
```

这是我得到的错误

错误：16:16:49,503 - TcLogger$IC_LogListener.logging:? org.eclipse.core.runtime - org.eclipse.ui - 0 - 未处理的事件循环异常 org.eclipse.swt.SWTException: Widget 在 org.eclipse.swt.SWT.error(SWT.java:3884) 在 org .eclipse.swt.SWT.error(SWT.java:3799) at org.eclipse.swt.SWT.error(SWT.java:3770) at org.eclipse.swt.widgets.Widget.error(Widget.java:463 ) 在 org.eclipse.swt.widgets.Widget.checkWidget(Widget.java:336) 在 org.eclipse.swt.widgets.Table.getSelectionIndices(Table.java:2536) 等等......

问题在于这行代码

```
int[] row = table.getSelectionIndices(); 
```

再来一次..

我试图让用户在表中选择行并将它们放在一个数组列表中。

**编辑**添加更多代码

```
 //////////////////////////////////////////////////////////////////////////
 //                       createDialogArea()                             //
 //////////////////////////////////////////////////////////////////////////
 protected Control createDialogArea(Composite parent) {
  final Composite area = new Composite(parent, SWT.NONE);
  final GridLayout gridLayout = new GridLayout();
  gridLayout.marginWidth = 15;
  gridLayout.marginHeight = 10;
  area.setLayout(gridLayout);

  GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
  area.setLayoutData(gridData);
  checkingArray();
  createCopyNumber(area);
  createPlotterTable(area);
  return area;
}

public void checkingArray() {
   aa = abd.getPrintersArray();
}

//////////////////////////////////////////////////////////////////////////
//                     createPlotterTable()                             //
//////////////////////////////////////////////////////////////////////////
private void createPlotterTable(Composite parent) {
  Composite composite = new Composite(parent, SWT.BORDER); 
  GridLayout gridLayout = new GridLayout(1, false);
  composite.setLayout(gridLayout);
  GridData gridData = new GridData(SWT.FILL, SWT.FILL, true, true);
  composite.setLayoutData(gridData);

  //gridData = new GridData(SWT.FILL, SWT.FILL, true, true ); 
  table = new Table(composite, SWT.BORDER | SWT.FULL_SELECTION | SWT.MULTI);
  table.setHeaderVisible(true);
  table.setLinesVisible(true);

  TableColumn[] column = new TableColumn[2];
  column[0] = new TableColumn(table, SWT.FILL);
  column[0].setText("Printer Name");
  column[0].setWidth(200);

  column[1] = new TableColumn(table, SWT.FILL);
  column[1].setText("Profile Name");
  column[1].setWidth(200);

  gridData = new GridData();
  gridData.verticalAlignment = GridData.FILL;
  gridData.horizontalAlignment = GridData.FILL;
  gridData.grabExcessHorizontalSpace = true;
  gridData.grabExcessVerticalSpace = true;
  table.setLayoutData(gridData);

  fillTable(table);
  table.setRedraw(true);
} 

private void fillTable(Table table) {
  table.setRedraw(false);

  for(Iterator iterator = abd.getPrintersArray().iterator();iterator.hasNext();){
     PrinterProfile printer = (PrinterProfile) iterator.next();
     TableItem item = new TableItem(table, SWT.FILL);
     int c = 0;
     item.setText(c++, printer.getPrinterName());
     item.setText(c++, printer.getProfileName());
  }
table.setRedraw(true);
} 

 public void getPlotterSelection() {

   selPrinters = new ArrayList<PrinterProfile>();

   int[] row = table.getSelectionIndices();

   Arrays.sort(row);
   if (row.length > 0) {
     for(int i = row.length-1; i >= 0; i--){
        PrinterProfile pp = new PrinterProfile(aa.get(i).getPrinterName(), aa.get(i).getProfileName());
        selPrinters.add(pp);
     }
   }
} 
```

这是调用方法的按钮

```
 Button okButton = createButton(parent, IDialogConstants.OK_ID, "OK", true);
   okButton.setEnabled(true);
   okButton.addSelectionListener(new SelectionAdapter() {
      public void widgetSelected(SelectionEvent e) {
         getPlotterSelection();
      }
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:47:04.460

我建议您使用表格查看器而不是表格。它使您的生活更轻松。我看到您正在对话框中显示表格。我猜您的对话框在进入`getPlotterSelection()`方法之前单击“确定”时会关闭/处理。

# ruby - Haml 和 Sinatra，错误消息在哪里？

> ID：12431482
> 
> 赞同：0
> 
> 时间：2012-09-14T20:23:08.777
> 
> 标签：ruby, sinatra, haml

我正在尝试用 haml 作为 erb 的 sinatra 应用程序的替代品。但是，如果haml teplate 不正确，例如如果缩进有问题，我得到的只是内部服务器错误消息。

haml 是否在其他地方输出更具体的错误消息，或者有什么方法可以获取有关错误的更多信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T19:38:49.297

如果您将 Sinatra 更新到 1.3.3，您将在运行 Sinatra 时再次在终端中获得正确的错误日志。默认情况下，最近两个或三个版本的日志被暂时禁用，但又恢复为默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T16:51:54.013

在 Sinatra 中，环境变量的值决定了是否默认输出错误消息。通过设置默认启用错误消息：

```
set :environment, :development 
```

或者，无论环境如何，都可以通过以下方式直接输出错误消息：

```
set :show_exceptions, true 
```

有关 Sinatra 配置的更多信息，请访问：[http ://www.sinatrarb.com/configuration.html](http://www.sinatrarb.com/configuration.html)

# ruby-on-rails - 在累积条件的同时连接多个表

> ID：12431483
> 
> 赞同：0
> 
> 时间：2012-09-14T20:23:11.160
> 
> 标签：ruby-on-rails, ruby-on-rails-3, arel

我有一个类方法`Relationship.with_attributes`，用于基于多个输入参数构建复杂范围，以返回`Relationship`与匹配某些属性的产品关联的对象。在大多数情况下，我匹配的信息都在`Product`模型上，一切都很好：

```
def self.with_attributes(attributes)
  if (attributes.nil?)
    scoped
  else # (attributes.class == Hash)
    conds = joins(:product)

    attributes.each do |key, value|
      case key
      when "Category"
        # FIXME This doesn't work yet
        category = Category.find(value)
        categories = [category] + category.descendants
        categories.each { |c| conds.push(["categories.id = #{c.id}"], :or) }
      else
        conds.where(key => value)
      end
    end
  end
  conds
end 
```

`Categorizations`挑战是当我的属性是一个类别时，我无法确定如何加入模型。非常感谢任何建议。缩写型号如下。

```
class Relationship < ActiveRecord::Base
  belongs_to :product
  …
end

class Product < ActiveRecord::Base
  has_many :relations
  has_many :categorizations
  …
end

class Categorizations < ActiveRecord::Base
  belongs_to :product
  …
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:47:43.420

发布后不久我偶然发现了答案。答案是更新`conds = joins(:product)`为：

```
conds = joins(:product, { :product => :categorizations }) 
```

# json - API 厨房发布到 drupal 服务

> ID：12431485
> 
> 赞同：1
> 
> 时间：2012-09-14T20:23:24.217
> 
> 标签：json, drupal, service, http-status-code-406

所以我使用[http://apikitchen.com/](http://apikitchen.com/)来调试我在使用 drupal 服务时遇到的问题。

我使用： http: [//vmstage.dop.com/mobile/user/login.json](http://vmstage.dop.com/mobile/user/login.json)作为要测试的 URL。方法是`POST`并添加两个参数：

1.  `username`
2.  `password`

将`username`and设置`password`为您喜欢的任何内容。它会返回**`401 Unauthorized: Wrong username or password.`**这是你应该得到的，因为你不知道`username`or`password`

我看到他们有一个 mac osx 版本，当我在他们的桌面程序中运行完全相同的东西时，我得到了一个**`406 - Not acceptable`**.

我在此进行测试的原因是因为我正在使用的 iPhone 应用程序依赖于 drupal 服务来登录，并且我正在通过 iPhone 模拟器运行相同的东西。

回到 API 厨房的事情，它通过浏览器工作，但不是通过他们的桌面程序..让我认为它与内容类型或端口有关。你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T20:25:29.320

我是 APIKitchen 的作者。我认为网络版和桌面版之间没有任何区别，但是如果您可以提供带有参数的示例 url，我可以快速查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:37:56.567

通常，406 错误用于指示请求以某种方式格式错误。我不熟悉您使用的工具，但我认为您在寻找不同请求之间可能不同的东西方面走在了正确的轨道上。您应该查看标题差异（包括内容类型）。此外，API 不喜欢的两个不同平台之间可能存在一些 JSON 编码差异。

# java - 尝试在 DocsService 上调用 getMedia() 的错误请求

> ID：12431486
> 
> 赞同：0
> 
> 时间：2012-09-14T20:23:24.320
> 
> 标签：java, google-docs, google-docs-api

在为某些文档调用 DocsService 上的 getMedia() 时，我收到下一条消息：错误请求我们遇到了一个错误，我们将立即进行调查。带来不便敬请谅解。

这已经发生了 10 天，如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T15:54:47.083

如果重试会发生什么？

Google 基础架构会定期抛出 500 个错误，这些错误会在重试后成功。确保进行指数退避。

# asp.net-mvc-3 - 从 MVC3 中的 User.Identity.Name 中删除域

> ID：12431493
> 
> 赞同：4
> 
> 时间：2012-09-14T20:23:52.190
> 
> 标签：asp.net-mvc-3, windows-authentication

我正在 MVC3 @Razor 中构建一个 Intranet 站点。它正在使用 Windows 身份验证。我遇到的问题是数据库中的所有用户都由 UserID 列出。从 Windows 上下文中获取用户信息的默认操作包括域（例如 domain\userid）。是否可以将其更改为仅获取用户 ID 并忽略域，而无需编写自定义身份验证过程？含义 User.Identity.Name 只是用户 ID，而不是域和用户 ID。

编辑：这是基于使用默认成员资格的成员资格模型。

编辑：问题与信息的显示无关。问题是当系统从Windows获取用户信息然后去获取成员信息时，可以删除域，因此只传递用户ID而不是域和用户ID。我想要的只是能够将用户标识而不是“域\用户标识”传递给成员。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-14T20:27:35.657

以下：

```
User.Identity.Name.Split('\\')[1]; 
```

将删除域部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-01T03:13:50.797

我在视图上使用它。

***MVC视图：***

```
<a asp-area="" asp-controller="Manage" asp-action="Index" title="Manage">
  <span class="glyphicon glyphicon-user" style="color:white"></span> 
    Hello @UserManager.GetUserName(User).Split('@')[0]!
</a> 
```

# c++ - initializer_list 和模板类型推导

> ID：12431495
> 
> 赞同：46
> 
> 时间：2012-09-14T20:23:58.027
> 
> 标签：c++, templates, c++11, initializer-list

考虑函数：

```
template<typename T>
void printme(T&& t) {
  for (auto i : t)
    std::cout << i;
} 
```

或任何其他需要具有 begin()/end() 启用类型的参数的函数。

**为什么以下是非法的？**

`printme({'a', 'b', 'c'});`

当所有这些都是合法的：

```
printme(std::vector<char>({'a', 'b', 'c'}));
printme(std::string("abc"));
printme(std::array<char, 3> {'a', 'b', 'c'}); 
```

我们甚至可以这样写：

```
const auto il = {'a', 'b', 'c'};
printme(il); 
```

或者

```
printme<std::initializer_list<char>>({'a', 'b', 'c'}); 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-09-14T20:51:49.847

您的第一行是非法的，因为无法推断`printme({'a', 'b', 'c'})`模板参数。`T`如果您明确指定模板参数，它将起作用，例如`printme<vector<char>>({'a', 'b', 'c'})`or `printme<initializer_list<char>>({'a', 'b', 'c'})`。

您列出的其他参数是合法的，因为参数具有明确定义的类型，因此`T`可以很好地推导出模板参数。

您的代码片段`auto`也有效，因为`il`被认为是 type `std::initializer_list<char>`，因此`printme()`可以推断出模板参数。

* * *

这里唯一“有趣”的部分是`auto`会选择类型`std::initializer_list<char>`，但不会选择模板参数。这是因为 C++11 标准的 § 14.8.2.5/5 明确指出这是模板参数的非推导上下文：

> 一个函数形参，其关联实参是初始化列表 (8.5.4) 但该形参没有 std::initializer_list 或对可能有 cv 限定的 std::initializer_list 类型的引用。*[例子：*
> 
> ```
> template<class T> void g(T);
> g({1,2,3}); // error: no argument deduced for T 
> ```
> 
> *—结束示例]*

然而`auto`，§ 7.1.6.4/6 明确支持`std::initializer_list<>`

> 如果初始化程序是一个*花括号初始化列表*（8.5.4），则使用`std::initializer_list<U>`.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-14T23:11:49.787

您还可以重载该函数以显式采用 initializer_list 类型的参数。

```
template<typename T>
void printme(std::initializer_list<T> t) {
  for (auto i : t)
    std::cout << i;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T20:33:19.800

这在 § 14.8.2.5/5 中有明确规定

> 一个函数参数，其关联参数是一个初始化列表，但该参数没有 `std::initializer_list`或不引用可能的 cv 限定 `std::initializer_list`类型。[ 例子：
> 
> ```
> template<class T> void g(T);
> g({1,2,3}); // error: no argument deduced for T 
> ```
> 
> —结束示例]

要使其工作，您可以显式指定模板参数类型。

```
printme<std::initializer_list<int>>( {1,2,3,4} ); 
```

# nginx - nginx - 从上游服务器读取自定义标头

> ID：12431496
> 
> 赞同：96
> 
> 时间：2012-09-14T20:24:04.717
> 
> 标签：nginx, reverse-proxy

我正在使用 nginx 作为反向代理，并尝试从上游服务器（Apache）的响应中读取自定义标头，但没有成功。Apache 响应如下：

```
HTTP/1.0 200 OK
Date: Fri, 14 Sep 2012 20:18:29 GMT 
Server: Apache/2.2.17 (Ubuntu)
X-Powered-By: PHP/5.3.5-1ubuntu7.10
Connection: close
Content-Type: application/json; charset=UTF-8
My-custom-header: 1 
```

我想从**My-custom-header**中读取值并在 if 子句中使用它：

```
location / {
    // ...
    // get My-custom-header value here
    // ...
} 
```

这可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-09-14T20:43:05.683

这不仅可能，而且很容易：

在 nginx 中，响应标头值可通过变量（每个标头一个）获得。有关这些变量的详细信息，请参阅[http://wiki.nginx.org/HttpCoreModule#.24sent_http_HEADER](http://wiki.nginx.org/HttpCoreModule#.24sent_http_HEADER)。

在您的示例中，变量将是 $sent_http_My_custom_header。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2015-06-16T22:14:45.743

我面临着同样的问题。我都尝试了`$http_my_custom_header`，`$sent_http_my_custom_header`但它对我不起作用。

虽然通过使用解决了这个问题`$upstream_http_my_custom_header`。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2021-10-12T12:17:30.860

使用 NGINX 作为代理时，有**四**组标头：

*   `client -> nginx`: 客户端*请求*头
*   `nginx -> upstream`: 上游*请求*头
*   `upstream -> nginx`：上游*响应*标头
*   `nginx -> client`: 客户端*响应*头

您似乎在询问上游响应标头。这些都在[variables](https://nginx.org/en/docs/http/ngx_http_upstream_module.html#var_upstream_http_)中找到。[`$upstream_http_*name*`](https://nginx.org/en/docs/http/ngx_http_upstream_module.html#var_upstream_http_)

**但是**，请注意，任何*响应*标头仅在收到上游服务器响应的标头*后才设置。*任何[`if`指令](http://nginx.org/en/docs/http/ngx_http_rewrite_module.html#if)都*在发送上游请求之前*运行，并且无法访问任何响应标头！换句话说，`if`指令在收到客户端请求之后运行，然后再发出上游请求。

如果您需要更改响应的处理方式，您可以使用[`map`指令](http://nginx.org/en/docs/http/ngx_http_map_module.html)来设置基于响应标头的变量，然后在[`add_header`](http://nginx.org/en/docs/http/ngx_http_headers_module.html#add_header)（设置客户端响应标头）中使用这些变量，[`log_format`](http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format)或者在响应阶段（内部命名为[`NGX_HTTP_CONTENT_PHASE`和`NGX_HTTP_LOG_PHASE`阶段](http://nginx.org/en/docs/dev/development_guide.html#http_phases)）。对于更复杂的控制，您必须使用脚本插件，例如[Lua 模块](https://github.com/openresty/lua-nginx-module)（例如使用[`header_filter_by_lua_block`指令](https://github.com/openresty/lua-nginx-module#header_filter_by_lua_block)）。

要读取或设置单个标题，请使用：

| 从 | 至 | 类型 | 读取（变量） | 写（指令） |
| --- | --- | --- | --- | --- |
| 客户 | nginx | 要求 | [`$http_*name*`](https://nginx.org/en/docs/http/ngx_http_core_module.html#var_http_) | –</td> |
| ngnix | 上游的 | 要求 | –</td> | [`proxy_set_header`](https://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_set_header) |
| 上游的 | nginx | 回复 | [`$upstream_http_*name*`](https://nginx.org/en/docs/http/ngx_http_upstream_module.html#var_upstream_http_) | –</td> |
| nginx | 客户 | 回复 | [`$sent_http_*name*`](https://nginx.org/en/docs/http/ngx_http_core_module.html#var_sent_http_) | [`add_header`](http://nginx.org/en/docs/http/ngx_http_headers_module.html#add_header) |

[`proxy_`NGINX 使用各种指令](https://nginx.org/en/docs/http/ngx_http_proxy_module.html)将某些标头从客户端请求复制到上游请求，并从上游响应复制到客户端响应，从而为您提供省略或显式包含任一方向的标头的选项。因此，如果仅在变量中找到上游响应标头，则这些标头不会专门复制到客户端响应中，并且可用变量集将包括由 NGINX 设置的任何*额外*标头，这些标头不存在于上游响应中。`$upstream_http_*name*``$sent_http_*name*`

 ** * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-05-12T06:25:52.480

使用 $http_MY_CUSTOM_HEADER

你可以写一些像

```
set my_header $http_MY_CUSTOM_HEADER;
if($my_header != 'some-value') {
#do some thing;
} 
```*

# android - 我该如何实现 Android UI，特别是这个画廊？

> ID：12431497
> 
> 赞同：0
> 
> 时间：2012-09-14T20:24:06.170
> 
> 标签：android

这个问题有两个部分：

1) 我是 Android 开发的新手，我发现在 Android 上实现 UI 非常困难。如果您能给我指点一些免费的 UI 库或给我一些关于移动开发人员如何实现 UI 的建议，那将是非常有帮助的。是否有一些“标准”UI 框架框架可用于构建 Android API 无法直接实现的简单内容？我想更多地关注应用程序的内容，而不是从头开始构建所有非常常见的设计模式。

2）目前，我正在构建一个应用程序，它需要有一个画廊。我在想这个

![画廊设计模式](../Images/bcf7cdfe977f9ace10276f68cfe79bbe.png)

我想为此提供一个`Vector`（`Photo`其中包含缩略图的 URL 和实际大小的图像）`View`并得到类似的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:30:00.800

该应用程序只是在网格视图中显示照片。那里有很多库，但 Nostro 的通用图像加载器支持将图像从 url 添加到 gridview 中。[通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

# java - ArrayList 的内容消失了

> ID：12431500
> 
> 赞同：0
> 
> 时间：2012-09-14T20:24:33.313
> 
> 标签：java, arraylist

所以，这是我的课：

```
public class SegmentMaker {

    public ArrayList<Segment> makeSegments(CustomNodes cn, Trip myTrip) {

        ArrayList<Segment> segments = new ArrayList<Segment>();
        ArrayList<Integer>segmentNodes = new ArrayList<Integer>();

        int count = 0; 

        for (int i=0; i < myTrip.getTripList().size(); i++){
            Log.d(TAG, "checking " + cn.getOsmID(myTrip.getTripItem(i)));

            if (i==0) {
                segmentNodes.add(myTrip.getTripItem(i));     
            }

            else if (i==myTrip.getTripList().size()-2) {
                segmentNodes.add(myTrip.getTripItem(i));     
            }

            else if (i==myTrip.getTripList().size()-1) {
                segmentNodes.add(myTrip.getTripItem(i)); 
                Segment segment = new Segment();
                segment.setId(count); 
                segment.setNodeIds(segmentNodes); 

                Log.d(TAG, "in SM segment " + segment.getId() + " nodes: " + segment.getNodeIds().toString());
                segmentNodes.clear(); 
                count++; 
                segments.add(segment);
                Log.d(TAG, "in SM segment " + segment.getId() + " nodes: " );
                for (int x=0; x<segment.getNodeIds().size(); x++) {
                    Log.d(TAG, "   " + segment.getNodeIds().get(x));
                }
                break; 
            }

            else if ((getAngle(myTrip.getTripItem(i), myTrip.getTripItem(i+1), myTrip.getTripItem(i+2),cn) < 25)  &&  
                    (getAngle(myTrip.getTripItem(i), myTrip.getTripItem(i+1), myTrip.getTripItem(i+2),cn) > -25))  
            {
                segmentNodes.add(myTrip.getTripItem(i));         
            }

            else {
                segmentNodes.add(myTrip.getTripItem(i)); 
                Segment segment = new Segment();
                segment.setId(count); 
                segment.setNodeIds(segmentNodes); 

                Log.d(ONE, "in SM segment " + segment.getId() + " nodes: " + segment.getNodeIds().toString());

                segments.add(segment);
                segmentNodes.clear(); 
                count++; 
            }
        }

        Log.d(TWO, " segments SM ende: " + segments.get(0).getNodeIds().size());
        return segments; 
    }

    public float getAngle(int firstItem, int secondItem, int thirdItem, CustomNodes cn){
        //do some stuff

        return angle;
    }
} 
```

很抱歉，要阅读的内容很多，我想做的是：一个 Segment 有一个 ID 和一个 NodeID 的 ArrayList。我收集所有的 NodeID，直到一个没有通过 getAngle-检查，然后转到下一个段。

在我使用 ONE 标记进行 Log.d 的地方，所有 NodeID 都在该段中。在我用 TWO 标记 Log.d 的地方，NodeID 的 ArrayList 是空的。当我返回segments-ArrayList 时，其中的segment 在那里（有一个ID），但所有segment 的NodeID-ArrayLists 都是空的。我在哪里丢失了内容？我要疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:06:26.497

您的问题源于对 Java 如何处理对象和引用的误解。

```
segmentNodes.add(myTrip.getTripItem(i)); 
Segment segment = new Segment();
segment.setId(count); 
segment.setNodeIds(segmentNodes); 

Log.d(TAG, "in SM segment " + segment.getId() + " nodes: " 
    + segment.getNodeIds().toString());
segmentNodes.clear(); 
count++; 
segments.add(segment); 
```

让我们看一下当您“存储”对象时，Java 将如何处理您的对象。在第一个块中，您向`segmentNodes`. 然后，您添加了对新创建的 Segment 对象的**引用。**`segmentNodes`因为您添加了引用，所以对 的所有更改`segmentNodes`也将在`Segment`的引用中看到`segmentNodes`。

然后你打印了一些数据，但你没有改变任何东西，所以什么都不应该改变。

然后，您调用`segmentNodes.clear()`. 这清除了 中的所有数据`segmentNodes`，但是由于您提供了对`segmentNodes`实例`segment`的引用，因此它也丢失了所有整数。现在，如果您希望`segment`对象拥有自己的列表**副本**`segmentNodes`，以便对列表的更改`segmentNodes`不会影响 Segment 实例中的列表。

为此，请手动创建一个副本：

```
ArrayList<Integer> segCopy = new ArrayList<Integer>();
for(Integer i : segmentNodes){
    segCopy.add(i);
}
segment.setNodeIds(segCopy);
segmentNodes.clear(); 
```

Java 不传递对象的副本，它传递引用的副本。您可能会发现有关此主题的[Stackoverflow 问题](https://stackoverflow.com/questions/40480/is-java-pass-by-reference)很有帮助。

# sql - sp_send_dbmail 附加文件在数据库中存储为 varbinary

> ID：12431504
> 
> 赞同：5
> 
> 时间：2012-09-14T20:24:49.880
> 
> 标签：sql, sp-send-dbmail

我有一个关于使用 sp_send_dbmail 将查询结果作为附件发送的两部分问题。

**问题 1：**只会打开基本的 .txt 文件。.pdf 或 .jpg 等任何其他格式已损坏。

**问题 2：**尝试发送多个附件时，我收到一个文件，其中所有文件名都粘在一起。

我正在运行 SQL Server 2005，并且我有一个存储上传文档的表：

```
CREATE TABLE [dbo].[EmailAttachment](
[EmailAttachmentID] [int] IDENTITY(1,1) NOT NULL,
[MassEmailID] [int] NULL, -- foreign key
[FileData] [varbinary](max) NOT NULL,
[FileName] [varchar](100) NOT NULL,
[MimeType] [varchar](100) NOT NULL 
```

我还有一个带有标准电子邮件内容的 MassEmail 表。这是 SQL 发送邮件脚本。为简洁起见，我排除了声明语句。

```
while ( (select count(MassEmailID) from MassEmail where status = 20 )>0) 
begin
    select @MassEmailID = Min(MassEmailID) from MassEmail where status = 20
    select @Subject = [Subject] from MassEmail where MassEmailID = @MassEmailID
    select @Body = Body from MassEmail where MassEmailID = @MassEmailID

    set @query = 'set nocount on; select cast(FileData as varchar(max)) from Mydatabase.dbo.EmailAttachment where MassEmailID = '+ CAST(@MassEmailID as varchar(100))  

    select  @filename = ''
    select  @filename = COALESCE(@filename+ ',', '') +FileName from EmailAttachment where MassEmailID = @MassEmailID

exec msdb.dbo.sp_send_dbmail    
    @profile_name = 'MASS_EMAIL',
    @recipients = 'me@myemail.com',
    @subject = @Subject,
    @body =@Body,
    @body_format ='HTML',
    @query = @query,
    @query_attachment_filename = @filename,
    @attach_query_result_as_file = 1,
    @query_result_separator = '; ',
    @query_no_truncate = 1,
    @query_result_header = 0;

update MassEmailset status= 30,SendDate = GetDate() where MassEmailID = @MassEmailID
end 
```

我能够成功地从数据库中读取文件，所以我知道二进制数据没有损坏。

.txt 文件仅在我将 FilaData 转换为 varchar 时读取。但显然原始标题丢失了。还值得注意的是，附件文件的大小与原始文件不同。这很可能也是由于编码不当造成的。所以我希望有一种方法可以使用存储的 mimetype 创建文件头，或者以某种方式在二进制数据中包含文件头？

我对最后几个参数的值也没有信心，而且我知道 coalesce 不太正确，因为它在第一个文件名前加上逗号。但是几乎不可能找到好的文档。请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T21:11:26.190

我不认为您将能够直接从 SQL 发送二进制数据。那里有[一些帖子](https://stackoverflow.com/questions/3700318/sql-server-sp-send-dbmail-image-file-attachment)讨论了同样的问题。从[Microsoft 文档](http://msdn.microsoft.com/en-us/library/ms190307.aspx)中，返回到查询的文本被格式化为文本文件。二进制被格式化为十六进制。正如您所指出的，这会损坏任何不是文本文档的文件。

[我认为您仍然可以通过首先使用 BCP](http://msdn.microsoft.com/en-us/library/ms162802%28v=sql.105%29.aspx)将二进制数据导出到文件系统，然后通过可用于 sendmail 的传统文件附件方法将其重新导入来完成您想要做的事情。

所以像这样。（仅概念 - 未经测试的代码）

```
DECLARE @OutputFileAndPath VarChar(500) = '\\Log_Files\MyFile.pdf ' 
DECLARE @sql VarChar(8000)

SELECT @sql = 'BCP "SELECT MyFile FROM [dbo].[MyTable] 
    WHERE PrimaryKey = 12345" queryout ' + @OutputFileAndPath +
        ' -S MyServer\MyInstance -T -fC:\Documents.fmt'

/* you could use a generic format file that would cover most formats */

EXEC xp_cmdshell @sql, NO_OUTPUT;

while ( (select count(MassEmailID) from MassEmail where status = 20 )>0) 
begin
    select @MassEmailID = Min(MassEmailID) from MassEmail where status = 20
    select @Subject = [Subject] from MassEmail where MassEmailID = @MassEmailID
    select @Body = Body from MassEmail where MassEmailID = @MassEmailID

    exec msdb.dbo.sp_send_dbmail    
        @profile_name = 'MASS_EMAIL',
        @recipients = 'me@myemail.com',
        @subject = @Subject,
        @body =@Body,
        @body_format ='HTML',
        @file_attachments = @OutputFileAndPath /* i.e. \\Log_Files\MyFile.pdf */

    update MassEmailset status= 30,SendDate = GetDate() where MassEmailID = @MassEmailID
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-19T16:20:45.123

下面的示例将图像嵌入到 <img> 标记中，这将适用于 jpeg、png 等。它不能解决 PDF，但至少可以处理图像。

```
 declare @eRecipient nvarchar(max) = 'me@example.com';
 declare @eSubject nvarchar(max) = 'Testing!';
 declare @FileName nvarchar(2000);
 declare @MimeType nvarchar(200);
 declare @attachText nvarchar(max);
 declare @eBody nvarchar(max) =  '<html><head><style>table, th, td {border-collapse: collapse;border: 1px solid black;} img {width: 100%; max-width: 640px;}</style></head>' + 
                             '<body><h1>Data with pics!</h1><table>' + 
                             '<tr><th>Some text</th><th>Some Pics</th></tr>';

  declare c1 cursor for
    select FileName,
        MimeType, 
          /* MimeType should be something like 'image/jpeg' or 'image/png' */
        cast('' as xml).value('xs:base64Binary(sql:column("FileData"))', 'varchar(max)') attachText
          /* the above uses XML commands to convert the binary attachment to UUencoded text */
    from EmailAttachment
    order by 1;

open c1;
fetch next from c1 into @FileName, @MimeType, @attachText
while @@FETCH_STATUS = 0
begin
    set @eBody = @eBody + '<tr><td>Filename: ' + @FileName + 
       '</td><td><img src="data:' + @contentType + ';base64,' +
        @AttachText + '="></td></tr>';
    /* note that the img tag contents the encoded image data, the mime type, and that it ends in an = sign. */
    fetch next from c1 into @FileName, @MimeType, @attachText
end;
close c1;
deallocate c1;
set @eBody = @eBody + '</table></body></html>';

exec msdb.dbo.sp_send_dbmail
    @recipients = @eRecipient, @body = @eBody, @subject = @eSubject, @body_format='HTML' 
```

# perl - 用于安全、流管理和 JIRA 集成的 Accurev 触发器

> ID：12431505
> 
> 赞同：1
> 
> 时间：2012-09-14T20:24:54.280
> 
> 标签：perl, integration, jira, accurev, event-triggers

大约 6 个月前，我们开始使用 AccuRev 和 JIRA 进行源代码控制和问题管理，但存在一些明显的问题，例如缺乏安全性，每个人几乎都可以做任何事情，例如锁定和解锁流以及更改属于其他任何人的流最重要的是，Accurev 附带的默认电子邮件触发器不是很好。

Accurev 允许预创建、预保留、预推广和服务器-后期-推广阶段，我决定使用这些来帮助我管理 Accurev 开发的一些狂野西部。我会坚持使用 PERL，因为这是他们用于原始触发器的，稍后会在这里发布我的，但在我开始之前，我想知道是否有人以前可能已经遇到过这个问题，你是如何解决它的，如果你可以发布您在这里的一些触发器或触发器的想法以及可以通过它们管理的内容，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T11:24:24.960

披露，我已经为 AccuRev 工作了将近 7 年。AccuRev 主要是通过设计以开放式开发模型开始的。目标是启用您作为组织想要采用的任何流程。一些公司在这种广泛开放的模式中蓬勃发展，另一些公司有非常严格的要求，并使用 GUI 功能和您提到的触发器的组合来严格锁定。

我们随产品提供的示例触发器为高级流程安全性提供了坚实的框架。例如，server_admin_trig.pl 中的默认子句之一是您不能更改其他人的工作区。通常，公司将在初始实施时（或以后的任何时间，或自行）与 AccuRev 合作，以确定这些触发器需要什么级别的定制（如果有的话）。

听起来你有必要的 Perl 经验来设置你需要的任何东西，但是你能举一个你想控制的行为的例子，也许我可以发布一个示例。作为侧边栏，请随时使用我的用户名@accurev dot com 与我联系，我相信我们可以找到一些帮助方式。

问候，〜詹姆斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T09:37:32.980

从 Accurev 5.7 开始，分发版中有一个非常好的示例 server_admin_trigger.pl，其中包含并描述了所有命令。一旦我们升级到 5.7，按照我想要的方式完成管理触发器是轻而易举的事。

# java - 方法“java.lang.reflect.Method.getDefaultValue()”的实用程序？

> ID：12431506
> 
> 赞同：6
> 
> 时间：2012-09-14T20:25:09.837
> 
> 标签：java, reflection

类 java.lang.reflect.Method中方法[getDefaultValue()](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Method.html#getDefaultValue%28%29)的目标是什么？有人能指出这种方法有用的情况吗？

Method API 的描述对我来说并没有说太多，我不明白什么是“ `annotation member represented by this Method instance`”：

> 返回此 Method 实例表示的注释成员的默认值。如果成员是原始类型，则返回相应包装器类型的实例。如果没有默认值与成员关联，或者方法实例不代表注释类型的已声明成员，则返回 null。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-14T20:36:34.930

注释有它们的“属性”作为方法。例如：

```
public @interface Example {
    public String stringValue() default "string default value";
    public int intValue() default 10;
} 
```

注释中的`getDefaultValue()`方法返回以这种方式定义的注释“属性”的默认值。在示例中，Method 的默认`stringValue()`值为`"string default value"`。

# jquery - 仅当我再次包含 jquery 文件时，jquery 才有效

> ID：12431510
> 
> 赞同：-3
> 
> 时间：2012-09-14T20:25:38.850
> 
> 标签：jquery, header

我正在尝试将一些 jquery 应用到我的代码中......

```
<script type="text/javascript">
    alert($('.thickbox'));
</script> 
```

但这不起作用。

我的标题中包含一个 jquery.js 文件（我的标题与此脚本位于不同的位置）。

上面的脚本仅在我在代码上方添加 jquery.js 时才有效，但这会使使用 jQuery 的其他功能无法工作......有没有办法解决这个问题？我为此使用 WordPress。

我期望发生的是出现一个警告框，但它没有，我也没有收到任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T05:29:26.780

尝试这个...

```
jQuery('document').ready(function($){

  alert($('.thickbox'));

}); 
```

可能有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T02:02:26.080

我可能会做以下事情，以确保它有效：

1.  确保代码被 .ready 事件包围：

    ```
    <script type="text/javascript">
        $('document').ready(function() {
            alert($('.thickbox'));
        });
    </script> 
    ```

2.  我也可能会确保 jquery.js 在此文件之前正确加载，如果将其放在此文件上方可以修复它，但会破坏其余部分，那么就出了问题。请记住，最好将代码放在内容的底部，以免减慢网站的加载速度。

3.  既然我知道您正在使用 WordPress，那么为了正确加载脚本，您真正需要确保做的另一件事是使用[wp_register_script](http://codex.wordpress.org/Function_Reference/wp_register_script)并正确使用[wp_enqueue_script](http://codex.wordpress.org/Function_Reference/wp_enqueue_script)，否则 WordPress 将无法正常工作（这很愚蠢， 我知道）。

# ruby-on-rails-3 - Rails 按属性值循环通过 ActiveRecord

> ID：12431511
> 
> 赞同：0
> 
> 时间：2012-09-14T20:25:39.523
> 
> 标签：ruby-on-rails-3, loops

假设我有一个 Match 对象数组，每个对象都属于循环赛结构中的一轮......

**火柴**

```
Round     | Registrant_ID     |Registrant_ID_2    |Winner_id
1         |    1              |    2              |   2 
1         |    3              |    4              |   4
1         |    5              |    6              |   5
1         |    7              |    8              |   8
2         |    1              |    4              |   1
2         |    3              |    6              |   3
2         |    5              |    8              |   5
2         |    7              |    2              |   2
3         |    1              |    6              |   1
... 
```

我想做的是按 Round 对所有匹配进行分组，然后循环遍历该轮并列出匹配项。

所需的输出将类似于...

```
 <h1>Round 1</h1>    
 <table>
 <thead>
  <tr>
   <th>Player 1</th>
   <th>Player 2</th>
   <th>Winner</th>
  </tr>
 </thead>
 <tbody>
  <tr>
    <td>1</td>
    <td>2</td>
    <td>2</td>
  </tr>
  <tr>
    <td>3</td>
    <td>4</td>
    <td>4</td>
  </tr>
  <tr>
    <td>5</td>
    <td>6</td>
    <td>5</td>
  </tr>
  <tr>
    <td>7</td>
    <td>8</td>
    <td>8</td>
  </tr>
 </tbody>
</table> 
```

我面临的问题是我不知道如何通过他们的 round 属性遍历匹配记录。我不确定是否可以使用**in_groups_of**之类的东西，因为参加一轮的玩家数量会有所不同，并不总是像这里看到的那样是 8 人。

到目前为止，这是我的代码，它简单地遍历所有记录并为每场比赛创建一个表格（我正在寻找单个回合的表格）：

```
- @matches.each do |match|
  %h1= "Round #{match.round}"
  %table.table.table-bordered
    %thead
      %tr
        %th.span4 Player 1
        %th.span4 Player 2
        %th.span4 Winner
    %tbody
      %tr
        %td= match.register.user.username
        %td= match.register_2.user.username
        %td= match.winner.user.username unless match.winner.nil? 
```

这是输出的样子，注意单独的表格用于单独的回合：

![循环赛列表](../Images/d38ac2eee5ab71cdb0440d576c2c5b4d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:35:58.593

也许您的意思是按回合对比赛进行分组，如下所示：

```
- @matches.group_by(&:round).each do |round, matches|
  %h1= "Round #{round}"
  %table.table.table-bordered
    %thead
    %tr
      %th.span4 Player 1
      %th.span4 Player 2
      %th.span4 Winner
    %tbody
      - matches.each do |match|
        %tr
          %td= match.register.user.username
          %td= match.register_2.user.username
          %td= match.winner.user.username unless match.winner.nil? 
```

# jquery - 带有jQuery的onClick处理程序-两次单击？

> ID：12431515
> 
> 赞同：0
> 
> 时间：2012-09-14T20:25:51.657
> 
> 标签：jquery, event-handling, onclick

是否可以在同一个元素上创建一个 onClick 处理程序但有两个其他调用？

我是说：

当我单击按钮`TRUE`时会出现警报，当我再次单击它时，`FALSE`应该会出现文本警报，但是当我再次单击它时，它的行为应该与第一次单击时相同，所以它应该显示警报说`TRUE`， 再一次。

这可能（如果是的话 - 如何）用 jQuery 做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:30:41.317

你所描述的是一个经典的切换。

你的 JavaScript 看起来像这样：

```
var toggle = false;
$(document).ready(function(){
    $("#clickme").click(function(){
        toggle = !toggle;
        alert(toggle);
    }); 
});​ 
```

我在此链接上准备了一个有效的 JSFIDDLE 示例： [示例](http://jsfiddle.net/jAuEF/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:27:44.233

```
var flag = true;
$('#button').on('click', function() {
  if( flag ) {
    alert('TRUE');
  } else {
    alert('FLASE');
  }
  flag = !flag;
}); 
```

***[演示](http://jsfiddle.net/68XSP/2/)***

### 笔记

将所有 jQuery 代码包装在`$(document).ready()`函数中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:42:52.820

你可以试试这个方法

```
​$(function() {
    var i =0;
    $('#btn1').on('click' , function() {
        if( i%2 == 0){
           alert(' TRUE !!');
        } 
        else{
           alert(' FALSE !!');
        }  
        i++;        
    });
});​ 
```

工作[小提琴](http://jsfiddle.net/sushanth009/kFkdX/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:00:22.043

这是使用 div 的一种方法

```
<button id="clicker">Click Me</button>
<div id="true" style="display: none;">True!</div>
<div id="false" style="display: none;" class="firstTime">False!</div>​ 
```

准备好内部文件：

```
​$("#clicker").click(function(){
    if ($("#false").hasClass("firstTime")){
        $("#false").removeClass("firstTime");
        $("#true").show();
    } else {
        $("#true").toggle();
        $("#false").toggle();
    }
});​​​​​​​ 
```

[例子](http://jsfiddle.net/tutley/wdecQ/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T21:01:23.310

找到了这个：

```
$('#my-element').toggle(function(){
     alert("true");
}, function(){
     alert("false");
}); 
```

# bash - 如何使用日志文件制作脚本

> ID：12431517
> 
> 赞同：0
> 
> 时间：2012-09-14T20:26:14.330
> 
> 标签：bash, shell

我有一个在控制台上生成各种输出的脚本，它运行各种命令和程序。

我正在寻找一种将所有控制台输出放入日志文件的方法。但他不想要“./MeuScrip>>log.txt”。也可以使用“./Myscript | tee log.txt”。但这隐藏了程序确认的问题（y|n）。

我想在我的脚本中配置日志文件。有人对此有解决方案吗？

谢谢费利佩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:13:14.297

如果脚本提示，则不确定如何捕获超出问题的交互式内容。这意味着它只会到达 (y/n) 然后停止等待人工输入，无论如何不会太投入尝试一下 ./MenuScrip 2>&1 > ./log.txt

唯一的问题就是去那里，你自己可能看不到提示。

为什么不编辑脚本本身并将日志记录到脚本中，以便用户选择或脚本将其记录到日志文件中，这意味着在编辑脚本时声明一个日志文件，然后您希望记录什么捕获命令/输入并发送到日志文件并执行

祝一切顺利

编辑添加：

如果脚本是二进制文件并假设这是出于监控目的，即忽略其他人的操作，您可以::

使用户 sudo 成为另一个用户

运行更高版本的 sudo 附带 sudoreplay - 这将让您通过按键输入/操作播放整个按键，然后您可以在需要时重播 sudo 文件

# javascript - jquery 设置为带参数的函数

> ID：12431519
> 
> 赞同：0
> 
> 时间：2012-09-14T20:26:23.983
> 
> 标签：javascript, jquery, mouseover, onmouseover

我有一个如下所示的鼠标悬停

```
onmouseover='$(this).css(\"cursor\",\"pointer\");infoCardIn("uid")' 
```

我想在 jquery 函数中将其更改为如下所示

```
onmouseover='$(this).css(\"cursor\",\"pointer\");infoCardIn("uid2")' 
```

我似乎无法正确使用语法。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:00:33.317

```
$("#myItem").hover(function() { // Mouse in method
    $(this).css("cursor","pointer");
    infoCardIn("uid2");
}, function() { // Mouse out method
    $(this).css("cursor","");
}); 
```

有关详细信息，请参阅[http://api.jquery.com/hover/](http://api.jquery.com/hover/)。

希望这可以帮助！

# php - jQuery表单添加不适用于下拉菜单

> ID：12431521
> 
> 赞同：0
> 
> 时间：2012-09-14T20:26:35.437
> 
> 标签：php, javascript, jquery, forms, jquery-calculation

好的，基本上我有一个表格，您可以在其中输入要购买的物品，在此期间您可以选择标准并显示折扣，这些折扣适用于您实时添加的物品，现在折扣可以正常使用它们是常规文本字段，但是将它们切换到下拉列表以限制可以输入的值破坏了我的代码，好奇是否有人可以帮助我...这两个表单元素的 ID 为 st_disc 和 sh_disc .. .

这是表单中的 HTML，忽略所有额外的 php，尽管如此，如果表单提交不正确，它会记住选择的选项...

```
 <td colspan="2" style="border-width:0px; padding:10px; text-indent: 10px;"><p class="tdblackbigger">Standard Discount:</p></td>
    <td style="border-width:0px; padding:10px; text-indent: -105px;"><p class="tdblackbigger">
        <?php $restdisc = $_REQUEST['st_discount']; ?>
        <?php $attr7 = 'selected="selected"'; ?>
        <select name="st_discount" id="st_disc" class="invoiceselect">
            <option selected="selected" value="">------</option>
            <option value="20"<?php echo $restdisc == '20' ? $attr7 : ''; ?>>20</option>
            <option value="35"<?php echo $restdisc == '35' ? $attr7 : ''; ?>>35</option>
            <option value="40"<?php echo $restdisc == '40' ? $attr7 : ''; ?>>40</option>
            <option value="45"<?php echo $restdisc == '45' ? $attr7 : ''; ?>>45</option>
        </select>
    </td>
    <td colspan="2" style="border-width:0px; padding:10px;"><p class="tdblackbigger">Show Discount:</p></td>
    <td style="border-width:0px; padding:10px; text-indent: -135px;"><p class="tdblackbigger">
        <?php $reshdisc = $_REQUEST['sh_discount']; ?>
        <?php $attr8 = 'selected="selected"'; ?>
        <select name="sh_discount" id="sh_disc" class="invoiceselect">
            <option selected="selected" value="">------</option>
            <option value="5"<?php echo $reshdisc == '5' ? $attr8 : ''; ?>>5</option>
            <option value="10"<?php echo $reshdisc == '10' ? $attr8 : ''; ?>>10</option>
            <option value="15"<?php echo $reshdisc == '15' ? $attr8 : ''; ?>>15</option>
            <option value="20"<?php echo $reshdisc == '20' ? $attr8 : ''; ?>>20</option>
            <option value="25"<?php echo $reshdisc == '25' ? $attr8 : ''; ?>>25</option>
        </select>
    </td> 
```

这是在它们是文本框时编写的 JS，我比 JS 更擅长 PHP，所以它可能很简单..

```
$(document).ready(function() {   
    $("input").keyup(function() {
    var subtotal = 0;
    var stantot = 0;
    var showtot = 0;
        for (var i = 0; i <= 30; i++) {
        var unitp = parseFloat($("#unitp" + i).val()) || 0;
        var casep = parseFloat($("#casep" + i).val()) || 0;
        var units = parseFloat($("#units" + i).val()) || 0;
        var cases = parseFloat($("#cases" + i).val()) || 0;
        var st_disc = parseFloat($("#st_disc").val()) || 0;
        var sh_disc = parseFloat($("#sh_disc").val()) || 0;

        var unitr = (unitp * units);
        var caser = (casep * cases);
        var result = (unitr + caser);
        var st_disc_fix = (st_disc / 100);
        var sh_disc_fix = (sh_disc / 100);
        var st_disc_solo = (st_disc_fix * result);
        var sh_disc_solo = (sh_disc_fix * result);
        var st_disc_amt = (result - st_disc_solo);
        var sh_disc_amt = (st_disc_amt - sh_disc_solo);
        var disc_total = (st_disc_fix + sh_disc_fix);
        var disc_whole = (disc_total * result);

        var disc = (result - disc_whole);
        var st_disc_tot = (result - disc_whole);
        var sh_disc_tot = (result - disc_whole);

        $("#line" + i).val(result.toFixed(2));
        $("#disc" + i).val(disc.toFixed(2));
        subtotal += parseFloat(result);
        stantot += parseFloat(st_disc_amt);
        showtot += parseFloat(sh_disc_amt);
    }
    $("#totretail").val(subtotal.toFixed(2));
    $("#standiscount").val(stantot.toFixed(2));
    $("#showdiscount").val(showtot.toFixed(2));

    var totship = ($("#totship").val() * 1);

    var finaltotal = (showtot + totship);
    $("#total").val(finaltotal.toFixed(2));

    });
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:49:17.930

看起来你错过了这里的重点..

```
var st_disc = parseFloat($("#st_disc").val());
var sh_disc = parseFloat($("#sh_disc").val());

$("#st_disc").val()   and  $("#sh_disc").val()  is messing your logic here 
```

“#st_disc”是所选元素的id，它**没有值**..**里面的选项**将有一个选定的值..

所以 `var st_disc = parseFloat($("#st_disc").val());` 应该是

```
 var st_disc = parseFloat($("#st_disc  option:selected").val()) || 0;

var sh_disc = parseFloat($("#sh_disc option:selected").val()) || 0;

                            OR

var st_disc = parseFloat($("#st_disc").find(":selected").val()) || 0;

var sh_disc = parseFloat($("#sh_disc").find(":selected").val()) || 0;​ 
```

# php - 如何在php中解压unsigned long long？

> ID：12431522
> 
> 赞同：0
> 
> 时间：2012-09-14T20:26:35.137
> 
> 标签：php

我需要读取一个数据包，小端，长长（64位）这工作正常：

```
echo unpack("V", $packet) . unpack("V", $packet); 
```

但为什么这不起作用？

```
echo unpack("V2", $packet); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T12:16:29.393

尝试

```
 echo unpack("V2", $packet, $packet >> 32); 
```

# .net - 可以使用来自常规 .Net 应用程序的 Toast 通知吗？

> ID：12431523
> 
> 赞同：3
> 
> 时间：2012-09-14T20:26:37.400
> 
> 标签：.net, windows-8, windows-runtime, toast

我最近一直在查看适用于 Windows 应用商店的 WinRT(C#) 示例。我看到的一件非常酷的事情是 Toast Notifications。我可以想到它们的一百万种不同用途，但没有一种也适合作为 Windows 商店应用程序。

那么，是否可以从常规 .Net 桌面应用程序中使用 Windows 8 中的 Toast 通知？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T20:32:31.797

是的你可以。[在这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh779727.aspx#sending_toast_notifications_from_desktop_apps)查看更多信息。

# sql-server - 为什么 SQL Server 数据工具使用的 VS 2010 shell 上的工具箱是空的？

> ID：12431524
> 
> 赞同：15
> 
> 时间：2012-09-14T20:26:39.257
> 
> 标签：sql-server, visual-studio-2010, ssis

我安装了 SQL Server 2012，并将旧的 SSIS 项目导入其中。一切都很好，但是当我尝试编辑我的包时，令人惊讶的是 SQL Server Data Tools 上的工具箱是空的，我不知道如何将这些项目带回来。有人可以帮忙吗？

![截屏](../Images/f7b87654b8900bdfdae69a7b2c806ec1.png)

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-09-15T00:49:19.397

单击**`SSIS`**菜单 -->**`SSIS Toolbox`**以查看 SSIS 特定工具箱*`SQL Server Data Tools`*（以前称为*Business Intelligence Development Studio*）。

问题截图中显示的工具箱与 Visual Studio 工具箱相关，可以在**`View`** menu -->下找到**`Toolbox`**。这与 SSIS 工具箱不同。

![SSIS 工具箱](../Images/37306d9066f0cee502cade56b764d2d8.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-20T14:30:51.497

我在 2012（SQL Server 数据工具）中遇到了类似的问题。请参阅此处的詹姆斯帖子： [http ://www.jamesserra.com/archive/2013/01/ssis-2012-empty-toolbox/](http://www.jamesserra.com/archive/2013/01/ssis-2012-empty-toolbox/)

显然有一个按钮（没有出现在菜单中）

我真的很沮丧，以至于我重新安装了 SSDT；解决了大约一个星期的问题，然后我又把它弄坏了。谷歌搜索在顶部返回了这篇文章，所以我重新发布。谢谢

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-25T17:22:29.260

我有同样的问题，有两种方法可以非常快速地解决这个问题。

第一个：在您的包裹右上角打开我们的一个包裹，其中有两个按钮，其中一个是“变量”，第二个是“SSIS 工具箱”。按第二个：“SSIS 工具箱”。

[![enter image description here](../Images/44859f80f2628ce008ee13f11b6420ff.png)](https://i.stack.imgur.com/hNvg4.png)

上面用户 user756519 所说的第二种方法是在 VS 中选择 SSIS 菜单并选择 SSIS ToolBox。

[![enter image description here](../Images/af378aae72a1b76ad0238f876c0bc9a6.png)](https://i.stack.imgur.com/rvmgN.png)

# git - `git push --force` 什么时候合适？

> ID：12431525
> 
> 赞同：1
> 
> 时间：2012-09-14T20:26:43.830
> 
> 标签：git

我反复看到“锤击”的事情是*永远不* `git push --force`应该，尽管肯定有合适的时候吗？

*--force 打算在什么时候使用？*

我目前的例子：

1.  创建分支并进行一些更改。
2.  推送分支“实时”以显示代码。
3.  以原点为基础，在此过程中进行更改/重写历史记录。
4.  我的代码现在已经偏离了我自己的远程代码。

push --force 是适当的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:31:48.523

在那种情况下，是的，假设您是唯一在该分支上工作的人，或者其他人理解其中的含义，当您执行强制推送并重写该功能分支的历史时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T04:15:21.143

`push -f`如果您需要从错误推送的存储库中删除一些敏感数据，则变得非常有必要。在这种情况下，您需要执行`git filter-branch`and `git push -f`。[这篇文章](https://help.github.com/articles/remove-sensitive-data)解释了这个过程。

`push -f`此外，当初级开发人员对 repo 做了一些愚蠢的事情时，我遇到过你需要做的事情。无论如何，一开始就不应该给他们权利或给他们足够的培训。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:28:50.417

对于那些拉取你的仓库并根据你的分支进行自己的更改的人来说，重写历史将是一件令人头疼的事情。当你重写你的远程历史并且下游的人把它拉出来时，他们的改变最终会在茫茫荒野中摇摇欲坠。（查看文档的从上游变基部分*恢复。）*[`git rebase`](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)

这就是为什么如果其他人正在使用您的存储库，通常最好将更改从源合并到`live`并推送合并。它不像 rebase 那样干净，但是下游不需要做一些时髦的事情来跟上你的重写：

```
git checkout live
git merge --no-ff origin/whatever
git push origin live 
```

当您准备好将更改`live`拉回主分支时，您始终可以重新设置基准。

另一方面，如果你是唯一一个使用你的仓库的人，或者下游的人可以修复远程历史重写，那就`--force`走开。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T20:54:06.137

我通常`push -f`在最初的推送之后，当我知道还没有人获取我的更改时，或者当我是唯一一个在项目中工作的人时。
否则，只要重写历史，就应该避免强制推送。

# router - 网关没有 ARP 响应

> ID：12431526
> 
> 赞同：3
> 
> 时间：2012-09-14T20:26:55.110
> 
> 标签：router, gateway, arp, reply

我正在开发一个必须通过 10Base-T 以太网与外界通信的嵌入式系统。我已经构建了服务网页所需的所有功能，包括 ARP、IP、TCP、ICMP (ping)、HTTP 和部分 FTP。现在，我需要构建其余代码，这将允许我充当客户端。从服务器的角度来看，所有上述协议已经运行了几个月。

现在，我需要构建这些协议的客户端一半，以从其他服务器请求数据。第 1 步是对远程服务器的硬件地址进行 ARP。据我了解，由于服务器位于另一个网络上，因此我的网关应使用其 MAC 地址进行响应，以便我知道将所有发往该 IP 的数据包传递给我的网关。这是问题所在：

我的设备（192.168.1.251，子网掩码 255.255.255.0）没有从我的网关（192.168.1.1）或网络外的任何机器获得 ARP 响应。但是，我的设备 (X.251) 确实从同一路由器下的笔记本电脑 (192.168.1.100) 收到了 ARP 响应。

我确定我的基本 ARP 以太网帧结构是正确的，因为我每次都正确回复 ARP 请求。不同之处在于 OPERATION 字段，取决于 REQUEST 或 REPLY，它是 1 或 2。

* * *

这是我的设备 (192.168.1.251) 对网关 (192.168.1.1) 的请求，但没有得到响应：

FF FF FF FF FF FF <-- 目标 MAC - 广播（也尝试过 0x00）

00 04 A3 7F C1 57 <-- 源 MAC - 我的设备

08 06 <-- ARP

00 01 <-- 以太网

08 00 <-- 知识产权

06 <-- 6 字节 MAC 地址

04 <-- 4 字节 IP 地址

00 01 <-- 请求（2 = 回复）

00 04 A3 7F C1 57 <-- 发件人 MAC - 我的

C0 A8 01 FB <-- 发件人 IP - 我的 = 192.168.1.251

00 00 00 00 00 00 <-- 目标 MAC - 未知，请求的原因

C0 A8 01 01 <-- 目标 IP - 网关 = 192.168.1.1

00 00 00 00 ..... 00 00 00 <-- 18 组 00 的预告片用于填充

* * *

现在，我的设备 (192.168.1.251) 对我的笔记本电脑 (192.168.1.100) 的请求几乎相同，得到了有效响应：

FF FF FF FF FF FF <-- 目标 MAC - 广播（也尝试过 0x00）

00 04 A3 7F C1 57 <-- 源 MAC - 我的设备

08 06 <-- ARP

00 01 <-- 以太网

08 00 <-- 知识产权

06 <-- 6 字节 MAC 地址

04 <-- 4 字节 IP 地址

00 01 <-- 请求（2 = 回复）

00 04 A3 7F C1 57 <-- 发件人 MAC - 我的

C0 A8 01 FB <-- 发件人 IP - 我的 = 192.168.1.251

00 00 00 00 00 00 <-- 目标 MAC - 未知，请求的原因

C0 A8 01 64 <-- 目标 IP - 笔记本电脑 = 192.168.1.100

00 00 00 00 ..... 00 00 00 <-- 18 组 00 的预告片用于填充

* * *

可能重要也可能不重要的旁注：

*   我的设备和网关都显示在笔记本电脑的 ARP 表中。
*   我的笔记本电脑运行的是Win7。
*   我的网关是 Linksys WRT54GL Wireless-G 宽带路由器。
*   我已经通过 Wireshark 分析了数据包以提供上述结果。
*   我的 DHCP 块涵盖 X.100 到 X.149，所以我的笔记本电脑被路由器分配了 X.100
*   我的 X.251 设备 IP 在设备中是硬编码的。我看不到在路由器配置应用程序中设置此 IP 和我设备的 MAC 之间的关系的方法。所有其他功能似乎都可以将我的设备用作服务器，所以我认为这不是问题。
*   我尝试将远程服务器（google = 173.194.43.33）的 ARP 请求直接发送到服务器的 IP 和我的网关的 IP（希望它会意识到它需要成为代理。）
*   我试过把头撞在桌子上，可悲的是，这有点帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:45:29.263

如果我猜对了，您将您的 ARP 请求发布到您的笔记本上，这不允许回答该 ARP 请求。通常每个设备都只为自己回答。尝试为您的路由器输入目标 ip 192.168.1.1。那应该行得通。

顺便说一句，您无法获取子网之外的任何设备的 MAC 地址。每个包都需要发送到带有目标 IP 地址的网关 MAC 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:14:50.277

我会尝试通过以下方式解决此问题：

使用 scapy 之类的工具，从您的笔记本电脑制作一个请求网关 MAC 的 ARP 请求，并将其发送到广播 MAC。查看请求是否得到回复。

然后，使用 scapy 在您的笔记本电脑上创建一个 ARP 请求，但将源 MAC 设置为您设备的 MAC 地址，并向广播 MAC 发送网关 MAC 请求。这实质上是在模拟您的设备在笔记本电脑上的发送。如果您可以将笔记本电脑的 mac 临时更改为设备的 MAC，您应该会在笔记本电脑上收到回复。

如果上述步骤正常工作，那么您将在笔记本电脑上模拟设备的确切行为，并且实际设备也将正常工作。

# r - R中nnet函数的详细输出

> ID：12431528
> 
> 赞同：3
> 
> 时间：2012-09-14T20:27:11.363
> 
> 标签：r, optimization, neural-network

我正在使用 R 包中的`nnet`函数`nnet`来开发前馈多层神经网络。我有兴趣在每次训练迭代后获得与输出相关的预测误差的更详细输出。将 trace 参数设置为 TRUE（默认）将在每组十次训练迭代后给我预测误差。但是，我想在每次迭代之后而不是在每组十次之后得到预测误差。

使用帮助文件中示例代码的修改部分显示初始预测误差、10、20 等次迭代后的预测误差以及达到最大迭代次数后的最终预测误差：

```
data(iris)     
ir <- rbind(iris3[,,1],iris3[,,2],iris3[,,3])
targets <- class.ind( c(rep("s", 50), rep("c", 50), rep("v", 50)) )
samp <- c(sample(1:50,25), sample(51:100,25), sample(101:150,25))
ir1 <- nnet(ir[samp,], targets[samp,], size = 2, rang = 0.1,
                 decay = 5e-4, maxit = 50) 
```

输出：

```
# weights:  19
initial  value 55.824151 
iter  10 value 49.096486
iter  20 value 37.871175
iter  30 value 25.536477
iter  40 value 1.498461
iter  50 value 0.954119
final  value 0.954119 
stopped after 50 iterations 
```

使用解决方法，我可以在每次训练迭代后得到错误：

```
errors<-NULL
for(i in 1:50){
  set.seed(50)
  mod<-nnet(ir[samp,], targets[samp,], size = 2, rang = 0.1,
           decay = 5e-4, maxit = i)
  errors<-rbind(errors,c(i,mod$value))         
  } 
```

出于显而易见的原因，解决方法非常低效，我想知道是否可以调整源代码以在每次训练迭代后返回错误，而不是在每组十次训练迭代后返回错误。我尝试调整 nnet.default 的代码，但没有这样的运气。

提前致谢。

# java - 剪贴板上的图像

> ID：12431530
> 
> 赞同：0
> 
> 时间：2012-09-14T20:27:21.367
> 
> 标签：java, image, clipboard

> **可能重复：**
> [将 BufferedImage 复制到剪贴板](https://stackoverflow.com/questions/4552045/copy-bufferedimage-to-clipboard)

所以，我有以下内容：

```
BufferedImage image = img.getSubimage(x, y, width, height);

ImageSel imageSel = new ImageSel(image);
Toolkit.getDefaultToolkit().getSystemClipboard()
    .setContents(imageSelection, null); 
```

我正在实施一个基本的类似 MS Paint 的程序。这应该是“剪切”功能的一部分。我只是提供有关零件的信息：

img - 代表绘图画布的我的面板的图像。ImageSel - 一个实现可转移的类。image - 我要剪掉的 img 部分。

无论如何，它有效。然而，问题是我从中得到的图像只是一张空白的黑色图像，上面没有其他任何东西。有人可以帮我指出正确的方向吗？

谢谢。

# javascript - 设置孩子的属性 在克隆节点内

> ID：12431545
> 
> 赞同：3
> 
> 时间：2012-09-14T20:28:24.717
> 
> 标签：javascript, clone, clonenode

我已经克隆了一个节点，但我想设置或更改该克隆节点内 div 的属性，具体来说，`id`更改`div id="test0"`

我在这方面找不到任何文档，那里有任何直接的 JavaScript 人知道解决方案吗？

```
var c = document.getElementById("stone-opt0"),
cloned = c.cloneNode(true);

//CODE THAT DOESN'T WORK
cloned.getElementById("test0").id = "new-id"; 
```

我正在做的是遍历一个大的项目列表，并将这些项目放入一个文档片段中，然后我将其推送到页面一次......我这样做而不是将每个元素添加到页面，然后在附加后进行修改到 DOM（这会更快，不是吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:37:33.990

您正在尝试调用`getElementById`元素节点的上下文。这是不可能的：该`getElementById`方法仅存在于`document`节点上（因为`id`值对于文档必须是唯一的）。相比之下，你可以做`getElementsByTagName`或[`querySelectorAll`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)基于一个元素的上下文。

因此，您可以使用该`querySelectorAll`方法来执行此操作，只要您不介意不支持不支持此方法的浏览器，例如 IE8。

```
cloned.querySelectorAll('[id="test0"]')[0].id = "new-id"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:32:23.403

附加到 DOM`cloned.getElementById("test0").id = "new-id"` *后，*您是否尝试过这样做？如果您正在寻找不属于 DOM 的东西，可能会很挑剔。当我说“挑剔”时，我的意思是“通常完全不起作用”。`cloned``getElementById()`

您可以尝试在页面上创建一个隐藏元素（如 a `<div style="display:none">`）并附`cloned`加到该元素上，以便在您准备好之前它不会显示在页面上。

# jboss - IllegalStateException：没有可用于处理的 EJB 接收器

> ID：12431547
> 
> 赞同：5
> 
> 时间：2012-09-14T20:28:26.850
> 
> 标签：jboss, ejb, ejb-3.0, jboss7.x

我有一个使用 JBoss AS 7.1.1 的客户端应用程序和一个服务器。启动时，我的客户端可以很好地连接到服务器，并为我提供了一个远程接口供我使用。但是，当我尝试通过接口运行一个函数时，我得到了这个异常：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalStateException: 
No EJB receiver available for handling [appName:GrahamsProjServer,modulename:GrahamsProjServer,distinctname:] 
combination for invocation context org.jboss.ejb.client.EJBClientInvocationContext@3a42f352
        at org.jboss.ejb.client.EJBClientContext.requireEJBReceiver(EJBClientContext.java:584)
        at org.jboss.ejb.client.ReceiverInterceptor.handleInvocation(ReceiverInterceptor.java:119)
        at org.jboss.ejb.client.EJBClientInvocationContext.sendRequest(EJBClientInvocationContext.java:181)
        at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:136)
        at org.jboss.ejb.client.EJBInvocationHandler.doInvoke(EJBInvocationHandler.java:121)
        at org.jboss.ejb.client.EJBInvocationHandler.invoke(EJBInvocationHandler.java:104)
        at $Proxy0.persistSchemas(Unknown Source)
        at grahamsprojclient.main.GrahamsProjScreen.btnPersistActionPerformed(Unknown Source)
        at grahamsprojclient.main.GrahamsProjScreen.access$400(Unknown Source)
        at grahamsprojclient.main.GrahamsProjScreen$5.actionPerformed(Unknown Source)
        at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
        at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
        at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
        at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
        at java.awt.Component.processMouseEvent(Unknown Source)
        at javax.swing.JComponent.processMouseEvent(Unknown Source)
        at java.awt.Component.processEvent(Unknown Source)
        at java.awt.Container.processEvent(Unknown Source)
        at java.awt.Component.dispatchEventImpl(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
        at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
        at java.awt.Container.dispatchEventImpl(Unknown Source)
        at java.awt.Window.dispatchEventImpl(Unknown Source)
        at java.awt.Component.dispatchEvent(Unknown Source)
        at java.awt.EventQueue.dispatchEvent(Unknown Source)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
        at java.awt.EventDispatchThread.run(Unknown Source) 
```

服务器上没有出现错误。当我运行该功能时，它看起来好像甚至没有与服务器交谈。怎么可能在启动时我的客户端连接到服务器就好了，但是当我尝试运行一个函数时它不会连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T17:07:42.240

该`No EJB receiver available`消息本身并没有说明它为什么无法连接，因此这不会回答您的问题，但至少它可能会为您指明正确的方向。

JBoss EJB 客户端库使用`Log4j`，所以它不会打印`System.out`也不会`System.err`。要真正知道发生了什么，您必须启用对`org.jboss.ejb.client`包的日志记录，例如通过在您的 : 中包含这一行`log4j.properties`：

```
log4j.logger.org.jboss.ejb.client=TRACE 
```

启用此功能后，您可以更好地了解客户端正在为您做什么，并且很可能会打印出潜在的错误。

此外，从 JBoss 7.1.0 开始，`security-realm`默认情况下启用，因此要进行远程调用，必须执行以下操作之一：

*   `<security-realm/>`通过从`standalone.xml`文件中删除来禁用它

或者

*   使用`bin/add-user(.bat)(.sh)`脚本将用户添加到服务器。`jboss-ejb-client.properties`添加后，在您的文件中包含用户/密码信息。

[在这里](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI)，您可以找到有关如何从远程客户端进行 EJB 调用的更详细指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-11T03:56:17.207

你可以在这里试用这个技巧：

*   转到**Jboss 根文件夹->standalone\deployments**
*   选择您正在运行的模块（.jar 文件和 .deployed 文件并删除它们
*   然后转到您的服务器并从服务器中删除您的模块并停止它。
*   然后再次添加项目并启动服务器。
*   然后去检查你的**Jboss 根文件夹 ->standalone\deployments** 并检查你部署的模块在那里是否可用。如果它在那里，你就成功了。

# jquery-mobile - jQuery Mobile 显示微调器

> ID：12431551
> 
> 赞同：0
> 
> 时间：2012-09-14T20:29:03.267
> 
> 标签：jquery-mobile

我正在开发一个 jQuery Mobile 网站并使用 jQuery 验证插件来验证我的表单。在某些表单上，我设置了 data-ajax="false"，但仍然希望在单击提交按钮时显示加载微调器。要显示微调器，我使用以下代码

```
// Display spinner
$(document).delegate('.ajaxSpinner', 'click', function () {
    if($(".ajaxValidate").length == 0 || $(".ajaxValidate").valid()) { // Show spinner if no validation or form is valid
        $.mobile.showPageLoadingMsg();
    }
}); 
```

表单提交按钮有一个“ajaxSpinner”类，表单本身有一个“ajaxValidate”类。

在大多数表单上，这很好用，如果单击提交时表单无效，您将看不到微调器，而如果表单有效，则会显示微调器。

我只有一种表现不佳的表格......无论表格是否有效，微调器都会显示。表单很长，所以我想知道在我的手动显示微调器代码触发之前验证是否尚未完成。

我对 jQuery 不是很精通，所以任何人都可以发现我的代码中的缺陷吗？会不会是时间问题？如果是，是否有一种好方法可以确保在单击功能触发之前完成验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:21:36.690

我认为您需要在验证函数中调用微调器。

因此，使用验证插件，您通常可能会遇到这样的情况：

```
$(".ajaxValidate").validate({
    submitHandler : function(form) {

        // START YOUR SPINNER HERE
        $.mobile.showPageLoadingMsg();

        $(form).ajaxSubmit({

            success: function() {    // YOUR FORM WAS SUBMITTED  SUCCESSFULLY

                // DO SOMETHING WHEN THE FORM WAS SUBMITTED SCESSFULLY ...
                // ...

                // STOP THE SPINNER EVENTUALLY
                //$.mobile.hidePageLoadingMsg()

            }
        });
    }
}); 
```

希望这可以帮助。让我知道这是否适合您。

# vb.net - 与 vb.net 中的 List 比较并将数据添加到 Final List

> ID：12431552
> 
> 赞同：-4
> 
> 时间：2012-09-14T20:29:08.467
> 
> 标签：vb.net

我目前正在研究 VB.NET。我遇到了一个问题，我有两个列表。列表有不同的对象类型；但是，两个列表都包含一个共同属性。这是我可以给出的关于这些列表的示例。

1) 驱动程序列表

```
ID     DriverName    DriverCity
1          A         Chicago
2          B         San Jose
3          C         New York 
```

2) 预告片列表

```
ID       TrailerName
1            A
2            B
3            C
4            D
5            E
6            F 
```

现在我需要一个新列表，其中包含所有带有驱动程序的预告片 IDS（示例 A）。我想比较两个列表并将缺少的项目添加到最终列表中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:01:16.093

假设您无法在 dbms 中执行此操作，因为您根本没有使用数据库。还假设该`ID`财产是*公共财产*，并且您只想找到所有没有司机的拖车（根据 ID）。

您可以使用`Enumerable.Except`来查找设置的差异并`Join`获取原始预告片对象：

```
Dim trailerIDs = From t In trailers Select t.ID
Dim driverIDs = From d In drivers Select d.ID
Dim trailersWithoutDriverIDs = trailerIDs.Except(driverIDs)
Dim trailersWithoutDriver = From t In trailers 
                            Join id In trailersWithoutDriverIDs On t.ID Equals id
                            Select t
' now add missing drivers '
For Each trailer In trailersWithoutDriver 
    Dim driver = new Driver()
    driver.ID = trailer.ID
    driver.DriverName = trailer.TrailerName
    ' which city?? '
    drivers.Add(driver)
Next trailer 
```

# python - 在嵌入式 Python 解释器中启用代码完成

> ID：12431555
> 
> 赞同：7
> 
> 时间：2012-09-14T20:29:22.377
> 
> 标签：python, pyqt

我有一个 PyQT 小部件解释器工作，从[这里](https://stackoverflow.com/a/8219536/153865)提取的代码如下：

```
import os
import re
import sys
import code

from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyInterpreter(QWidget):

    def __init__(self, parent):

        super(MyInterpreter, self).__init__(parent)
        hBox = QHBoxLayout()

        self.setLayout(hBox)
        self.textEdit = PyInterp(self)

        # this is how you pass in locals to the interpreter
        self.textEdit.initInterpreter(locals()) 

        self.resize(650, 300)
        self.centerOnScreen()

        hBox.addWidget(self.textEdit)
        hBox.setMargin(0)
        hBox.setSpacing(0)

    def centerOnScreen(self):
        # center the widget on the screen
        resolution = QDesktopWidget().screenGeometry()
        self.move((resolution.width()  / 2) - (self.frameSize().width()  / 2),
                  (resolution.height() / 2) - (self.frameSize().height() / 2))

class PyInterp(QTextEdit):

    class InteractiveInterpreter(code.InteractiveInterpreter):

        def __init__(self, locals):
            code.InteractiveInterpreter.__init__(self, locals)

        def runIt(self, command):
            code.InteractiveInterpreter.runsource(self, command)

    def __init__(self,  parent):
        super(PyInterp,  self).__init__(parent)

        sys.stdout              = self
        sys.stderr              = self
        self.refreshMarker      = False # to change back to >>> from ...
        self.multiLine          = False # code spans more than one line
        self.command            = ''    # command to be ran
        self.printBanner()              # print sys info
        self.marker()                   # make the >>> or ... marker        
        self.history            = []    # list of commands entered
        self.historyIndex       = -1
        self.interpreterLocals  = {}

        # setting the color for bg and text
        palette = QPalette()
        palette.setColor(QPalette.Base, QColor(0, 0, 0))
        palette.setColor(QPalette.Text, QColor(0, 255, 0))
        self.setPalette(palette)
        self.setFont(QFont('Courier', 12))

        # initilize interpreter with self locals
        self.initInterpreter(locals())

    def printBanner(self):
        self.write(sys.version)
        self.write(' on ' + sys.platform + '\n')
        self.write('PyQt4 ' + PYQT_VERSION_STR + '\n')
        msg = 'Type !hist for a history view and !hist(n) history index recall'
        self.write(msg + '\n')

    def marker(self):
        if self.multiLine:
            self.insertPlainText('... ')
        else:
            self.insertPlainText('>>> ')

    def initInterpreter(self, interpreterLocals=None):
        if interpreterLocals:
            # when we pass in locals, we don't want it to be named "self"
            # so we rename it with the name of the class that did the passing
            # and reinsert the locals back into the interpreter dictionary
            selfName = interpreterLocals['self'].__class__.__name__
            interpreterLocalVars = interpreterLocals.pop('self')
            self.interpreterLocals[selfName] = interpreterLocalVars
        else:
            self.interpreterLocals = interpreterLocals
        self.interpreter = self.InteractiveInterpreter(self.interpreterLocals)

    def updateInterpreterLocals(self, newLocals):
        className = newLocals.__class__.__name__
        self.interpreterLocals[className] = newLocals

    def write(self, line):
        self.insertPlainText(line)
        self.ensureCursorVisible()

    def clearCurrentBlock(self):
        # block being current row
        length = len(self.document().lastBlock().text()[4:])
        if length == 0:
            return None
        else:
            # should have a better way of doing this but I can't find it
            [self.textCursor().deletePreviousChar() for x in xrange(length)]
        return True

    def recallHistory(self):
        # used when using the arrow keys to scroll through history
        self.clearCurrentBlock()
        if self.historyIndex <> -1:
            self.insertPlainText(self.history[self.historyIndex])
        return True

    def customCommands(self, command):

        if command == '!hist': # display history
            self.append('') # move down one line
            # vars that are in the command are prefixed with ____CC and deleted
            # once the command is done so they don't show up in dir()
            backup = self.interpreterLocals.copy()
            history = self.history[:]
            history.reverse()
            for i, x in enumerate(history):
                iSize = len(str(i))
                delta = len(str(len(history))) - iSize
                line = line  = ' ' * delta + '%i: %s' % (i, x) + '\n'
                self.write(line)
            self.updateInterpreterLocals(backup)
            self.marker()
            return True

        if re.match('!hist\(\d+\)', command): # recall command from history
            backup = self.interpreterLocals.copy()
            history = self.history[:]
            history.reverse()
            index = int(command[6:-1])
            self.clearCurrentBlock()
            command = history[index]
            if command[-1] == ':':
                self.multiLine = True
            self.write(command)
            self.updateInterpreterLocals(backup)
            return True

        return False

    def keyPressEvent(self, event):

        if event.key() == Qt.Key_Escape:
            # proper exit
            self.interpreter.runIt('exit()')

        if event.key() == Qt.Key_Down:
            if self.historyIndex == len(self.history):
                self.historyIndex -= 1
            try:
                if self.historyIndex > -1:
                    self.historyIndex -= 1
                    self.recallHistory()
                else:
                    self.clearCurrentBlock()
            except:
                pass
            return None

        if event.key() == Qt.Key_Up:
            try:
                if len(self.history) - 1 > self.historyIndex:
                    self.historyIndex += 1
                    self.recallHistory()
                else:
                    self.historyIndex = len(self.history)
            except:
                pass
            return None

        if event.key() == Qt.Key_Home:
            # set cursor to position 4 in current block. 4 because that's where
            # the marker stops
            blockLength = len(self.document().lastBlock().text()[4:])
            lineLength  = len(self.document().toPlainText())
            position = lineLength - blockLength
            textCursor  = self.textCursor()
            textCursor.setPosition(position)
            self.setTextCursor(textCursor)
            return None

        if event.key() in [Qt.Key_Left, Qt.Key_Backspace]:
            # don't allow deletion of marker
            if self.textCursor().positionInBlock() == 4:
                return None

        if event.key() in [Qt.Key_Return, Qt.Key_Enter]:
            # set cursor to end of line to avoid line splitting
            textCursor = self.textCursor()
            position   = len(self.document().toPlainText())
            textCursor.setPosition(position)
            self.setTextCursor(textCursor)

            line = str(self.document().lastBlock().text())[4:] # remove marker
            line.rstrip()
            self.historyIndex = -1

            if self.customCommands(line):
                return None
            else:
                try:
                    line[-1]
                    self.haveLine = True
                    if line[-1] == ':':
                        self.multiLine = True
                    self.history.insert(0, line)
                except:
                    self.haveLine = False

                if self.haveLine and self.multiLine: # multi line command
                    self.command += line + '\n' # + command and line
                    self.append('') # move down one line
                    self.marker() # handle marker style
                    return None

                if self.haveLine and not self.multiLine: # one line command
                    self.command = line # line is the command
                    self.append('') # move down one line
                    self.interpreter.runIt(self.command)
                    self.command = '' # clear command
                    self.marker() # handle marker style
                    return None

                if self.multiLine and not self.haveLine: #  multi line done
                    self.append('') # move down one line
                    self.interpreter.runIt(self.command)
                    self.command = '' # clear command
                    self.multiLine = False # back to single line
                    self.marker() # handle marker style
                    return None

                if not self.haveLine and not self.multiLine: # just enter
                    self.append('')
                    self.marker()
                    return None
                return None

        # allow all other key events
        super(PyInterp, self).keyPressEvent(event)

if __name__ == '__main__':
    app = QApplication(sys.argv)
    win = MyInterpreter(None)
    win.show()
    sys.exit(app.exec_()) 
```

有没有一种简单的方法可以让一些选项卡完成只针对本地符号？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T00:43:33.020

我认为您指的是[rlcompleter](http://docs.python.org/library/rlcompleter.html#completer-objects)的 Completer 对象。

你可以像这样使用它：

```
from rlcompleter import Completer

line = str(...)

completer = Completer(self.interpreter.locals)
suggestion = completer.complete(line, 0)
self.insertPlainText(suggestion) 
```

数字参数表示第*n*个建议，您可以对其进行迭代，直到它返回`None`。

例如，假设我们有

```
>>> my_data = '012345' 
```

然后

```
>>> completer.complete('my_', 0)
'my_data'
>>> completer.complete('my_data.s', 0)
'my_data.split('
>>> completer.complete('my_data.s', 1)
'my_data.splitlines(' 
```

* * *

请注意，虽然上面的代码使用`interpreter.locals`，但您可以应用更广泛的搜索（但请务必提供字典）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T01:04:24.973

如果您想节省一些时间 - 看看[spyderlib](http://code.google.com/p/spyderlib/source/browse/)，它包含一个嵌入交互式 Python 解释器的小部件，其中包含一些交互糖，例如代码完成。特别感兴趣的位是

*   spyderlib/widgets/sourcecode/codeeditor.py
*   spyderlib/shell.py
*   spyderlib/editor.py
*   spyderlib/widgets/externalshell/pythonshell.py
*   spyderlib/utils/module_completion.py
*   spyderlib/plugins/externalconsole.py
*   spyderlib/插件/console.py
*   spyderlib/插件/editor.py

我对 spyderlib 的唯一警告是，你不能只使用它自己的小玩意儿——在某个地方，我提取了一个版本，其中包含运行所需的最少支持模块。如果您遇到与膨胀有关的相同问题，请给我发送消息，我会将我的内容检查到 github 中供您获取。

我似乎还记得在 NumPy 或 SciPy 中使用了一个基于 Qt 的交互式 Python 解释器小部件——我认为它最初来自 ipython 项目。这非常好，因为它实际上将解释器从代码执行中分离出来——所以如果你的代码崩溃了，你的解释器不会随之崩溃。但是，在这种情况下，您不能修改*其他*线程的 Pythonic 内容。spyderlib 版本可以双向工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T04:46:12.793

我有一个基于 PyQt 的开源 Python 解释器，您可以在这里找到：http: [//docs.projexsoftware.com/api/projexui/](http://docs.projexsoftware.com/api/projexui/)

具体的类是在 projexui.widgets.xconsoleedit 中找到的 XConsoleEdit。它具有内置的自动完成功能。

希望有帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T05:38:04.617

我从[rlcompleter2](https://pypi.python.org/pypi/rlcompleter2/)获得自动完成，但以下代码中有两个问题，

1.  `import xxx as yyy` 在 yyy 上自动完成不起作用
2.  locals() 没有复制到交互式解释器中，我尝试在 Autodesk Maya 中使用此代码，例如，在 Maya`x=3`脚本编辑器中运行，然后`x`在 pyqt 解释器中运行，它说`NameError: name 'x' is not defined`。如果你不使用maya，这个错误也可以从外部python解释器重现，首先定义一些变量，然后启动这个ui，变量不会复制到ui中的解释器中。

```
import os
import re
import sys
import code

from PyQt4.QtGui import *
from PyQt4.QtCore import *

class MyInterpreter(QWidget):

    def __init__(self, parent):

        super(MyInterpreter, self).__init__(parent)
        hBox = QHBoxLayout()

        self.setLayout(hBox)
        self.textEdit = PyInterp(self)

        # this is how you pass in locals to the interpreter
        self.textEdit.initInterpreter(locals())

        self.resize(850, 400)
        # self.centerOnScreen()

        hBox.addWidget(self.textEdit)
        hBox.setMargin(0)
        hBox.setSpacing(0)

    def centerOnScreen(self):
        # center the widget on the screen
        resolution = QDesktopWidget().screenGeometry()
        self.move((resolution.width() / 2) - (self.frameSize().width() / 2),
                  (resolution.height() / 2) - (self.frameSize().height() / 2))

class PyInterp(QTextEdit):

    class InteractiveInterpreter(code.InteractiveInterpreter):

        def __init__(self, locals):
            code.InteractiveInterpreter.__init__(self, locals)

        def runIt(self, command):
            code.InteractiveInterpreter.runsource(self, command)

    def __init__(self,  parent):
        super(PyInterp,  self).__init__(parent)

        sys.stdout = self
        sys.stderr = self
        self.refreshMarker = False  # to change back to >>> from ...
        self.multiLine = False  # code spans more than one line
        self.command = ''    # command to be ran
        self.printBanner()              # print sys info
        self.marker()                   # make the >>> or ... marker
        self.history = []    # list of commands entered
        self.historyIndex = -1
        self.interpreterLocals = {}

        # setting the color for bg and text
        # palette = QPalette()
        # palette.setColor(QPalette.Base, QColor(0, 0, 0))
        # palette.setColor(QPalette.Text, QColor(0, 255, 0))
        # self.setPalette(palette)
        self.setFont(QFont('Courier', 10))

        # initilize interpreter with self locals
        self.initInterpreter(locals())

        from rlcompleter2 import Completer
        self.completer = Completer()

    def printBanner(self):
        self.write(sys.version)
        self.write(' on ' + sys.platform + '\n')
        self.write('PyQt4 ' + PYQT_VERSION_STR + '\n')
        # msg = 'Type !hist for a history view and !hist(n) history index recall'
        # self.write(msg + '\n')

    def marker(self):
        if self.multiLine:
            self.insertPlainText('... ')
        else:
            self.insertPlainText('>>> ')

    def initInterpreter(self, interpreterLocals=None):
        if interpreterLocals:
            # when we pass in locals, we don't want it to be named "self"
            # so we rename it with the name of the class that did the passing
            # and reinsert the locals back into the interpreter dictionary
            selfName = interpreterLocals['self'].__class__.__name__
            interpreterLocalVars = interpreterLocals.pop('self')
            self.interpreterLocals[selfName] = interpreterLocalVars
        else:
            self.interpreterLocals = interpreterLocals
        self.interpreter = self.InteractiveInterpreter(self.interpreterLocals)

    def updateInterpreterLocals(self, newLocals):
        className = newLocals.__class__.__name__
        self.interpreterLocals[className] = newLocals

    def write(self, line):
        self.insertPlainText(line)
        self.ensureCursorVisible()

    def clearCurrentBlock(self):
        # block being current row
        length = len(self.document().lastBlock().text()[4:])
        if length == 0:
            return None
        else:
            # should have a better way of doing this but I can't find it
            [self.textCursor().deletePreviousChar() for x in xrange(length)]
        return True

    def recallHistory(self):
        # used when using the arrow keys to scroll through history
        self.clearCurrentBlock()
        if self.historyIndex <> -1:
            self.insertPlainText(self.history[self.historyIndex])
        return True

    def customCommands(self, command):

        if command == '!hist':  # display history
            self.append('')  # move down one line
            # vars that are in the command are prefixed with ____CC and deleted
            # once the command is done so they don't show up in dir()
            backup = self.interpreterLocals.copy()
            history = self.history[:]
            history.reverse()
            for i, x in enumerate(history):
                iSize = len(str(i))
                delta = len(str(len(history))) - iSize
                line = line = ' ' * delta + '%i: %s' % (i, x) + '\n'
                self.write(line)
            self.updateInterpreterLocals(backup)
            self.marker()
            return True

        if re.match('!hist\(\d+\)', command):  # recall command from history
            backup = self.interpreterLocals.copy()
            history = self.history[:]
            history.reverse()
            index = int(command[6:-1])
            self.clearCurrentBlock()
            command = history[index]
            if command[-1] == ':':
                self.multiLine = True
            self.write(command)
            self.updateInterpreterLocals(backup)
            return True

        return False

    def keyPressEvent(self, event):

        if event.key() == Qt.Key_Tab:
            line = str(self.document().lastBlock().text())[4:]
            self.completer.construct(line)

            if len(self.completer.rl_matches) == 1:
                self.clearCurrentBlock()
                self.insertPlainText(self.completer.rl_matches[0])
            else:
                print 'repeat:', self.completer.repeated

                mod = self.completer.repeated % len(self.completer.completions)
                if mod == 0:
                    # print '\n'.join(self.completer.rl_matches)
                    col_print(self.completer.rl_matches)
                else:

                    print ' '
                    print '\n'.join(self.completer.rl_matches)
                    # print self.completer.rl_matches
                self.marker()
                self.insertPlainText(line)

            return

        if event.key() == Qt.Key_Escape:
            # proper exit
            self.interpreter.runIt('exit()')

        if event.key() == Qt.Key_Down:
            if self.historyIndex == len(self.history):
                self.historyIndex -= 1
            try:
                if self.historyIndex > -1:
                    self.historyIndex -= 1
                    self.recallHistory()
                else:
                    self.clearCurrentBlock()
            except:
                pass
            return None

        if event.key() == Qt.Key_Up:
            try:
                if len(self.history) - 1 > self.historyIndex:
                    self.historyIndex += 1
                    self.recallHistory()
                else:
                    self.historyIndex = len(self.history)
            except:
                pass
            return None

        if event.key() == Qt.Key_Home:
            # set cursor to position 4 in current block. 4 because that's where
            # the marker stops
            blockLength = len(self.document().lastBlock().text()[4:])
            lineLength = len(self.document().toPlainText())
            position = lineLength - blockLength
            textCursor = self.textCursor()
            textCursor.setPosition(position)
            self.setTextCursor(textCursor)
            return None

        if event.key() in [Qt.Key_Left, Qt.Key_Backspace]:
            # don't allow deletion of marker
            # if qt version < 4.7, have to use position() - block().position()
            if self.textCursor().positionInBlock() == 4:
                return None

        if event.key() in [Qt.Key_Return, Qt.Key_Enter]:
            # set cursor to end of line to avoid line splitting
            textCursor = self.textCursor()
            position = len(self.document().toPlainText())
            textCursor.setPosition(position)
            self.setTextCursor(textCursor)

            line = str(self.document().lastBlock().text())[4:]  # remove marker
            line.rstrip()
            self.historyIndex = -1

            if self.customCommands(line):
                return None
            else:
                try:
                    line[-1]
                    self.haveLine = True
                    if line[-1] == ':':
                        self.multiLine = True
                    self.history.insert(0, line)
                except:
                    self.haveLine = False

                if self.haveLine and self.multiLine:  # multi line command
                    self.command += line + '\n'  # + command and line
                    self.append('')  # move down one line
                    self.marker()  # handle marker style
                    return None

                if self.haveLine and not self.multiLine:  # one line command
                    self.command = line  # line is the command
                    self.append('')  # move down one line
                    self.interpreter.runIt(self.command)
                    self.command = ''  # clear command
                    self.marker()  # handle marker style
                    return None

                if self.multiLine and not self.haveLine:  # multi line done
                    self.append('')  # move down one line
                    self.interpreter.runIt(self.command)
                    self.command = ''  # clear command
                    self.multiLine = False  # back to single line
                    self.marker()  # handle marker style
                    return None

                if not self.haveLine and not self.multiLine:  # just enter
                    self.append('')
                    self.marker()
                    return None
                return None

        # allow all other key events
        super(PyInterp, self).keyPressEvent(event)

# http://stackoverflow.com/a/30861871/2052889

def col_print(lines, term_width=90, indent=0, pad=2):
    n_lines = len(lines)
    if n_lines == 0:
        return

    col_width = max(len(line) for line in lines)
    n_cols = int((term_width + pad - indent)/(col_width + pad))
    n_cols = min(n_lines, max(1, n_cols))

    col_len = int(n_lines/n_cols) + (0 if n_lines % n_cols == 0 else 1)
    if (n_cols - 1) * col_len >= n_lines:
        n_cols -= 1

    cols = [lines[i*col_len: i*col_len + col_len] for i in range(n_cols)]

    rows = list(zip(*cols))
    rows_missed = zip(*[col[len(rows):] for col in cols[:-1]])
    rows.extend(rows_missed)

    for row in rows:
        print(" "*indent + (" "*pad).join(line.ljust(col_width)
                                          for line in row))

def main():
    app = QApplication(sys.argv)
    win = MyInterpreter(None)
    win.show()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

想要的效果： [https ://gfycat.com/DistantScrawnyCivet](https://gfycat.com/DistantScrawnyCivet) ![gfycat](../Images/5e470625e47e501d3638c8ba300511c1.png)

当前效果： [https ://gfycat.com/DeafeningHeavyBoto](https://gfycat.com/DeafeningHeavyBoto) ![gfycat](../Images/af32c1c9593c0a68cbc0387c1dc7df1f.png)

# javascript - facebook“添加评论”弹出窗口不会消失

> ID：12431558
> 
> 赞同：2
> 
> 时间：2012-09-14T20:29:37.617
> 
> 标签：javascript, css, facebook-like, facebook-javascript-sdk

有时，facebook 的*Like*插件中的“添加评论”弹出窗口 (iframe) 不会消失，并且无法访问其背后的内容。（我使用的是 Chrome 21 和 Firefox 15）

试试这个小提琴：http: [//jsfiddle.net/H4c5p/](http://jsfiddle.net/H4c5p/)

我怎样才能解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T05:14:37.117

我不认为你可以解决这个问题。该错误在 Facebook 的代码中，我认为您需要向[Facebook 报告该错误以](https://developers.facebook.com/bugs)解决它。

在我的 Chrome 错误控制台中，喜欢按钮的 iframe 和为评论框创建的 iframe 之间存在同源脚本错误，每次我喜欢/不喜欢时都会发生这种错误。此外，我可以只用两轮 Like/Unlike 来一致地重现错误。

> 不安全的 JavaScript 尝试使用 URL [http://static.ak.facebook.com/connect/xd_arbiter.php?version=11#channel=f210065bfc&origin=http%3A%2F%2Ffiddle.jshell.net&channel_path=%2FH4c5p%2Fshow访问框架%2F%3Ffb_xd_fragment%23xd_sig%3Df397b02538%26](http://static.ak.facebook.com/connect/xd_arbiter.php?version=11#channel=f210065bfc&origin=http%3A%2F%2Ffiddle.jshell.net&channel_path=%2FH4c5p%2Fshow%2F%3Ffb_xd_fragment%23xd_sig%3Df397b02538%26)来自带有 URL [https://www.facebook.com/plugins/like.php?channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter 的框架。 php%3Fversion%3D11%23cb%3Df334b6227%26origin%3Dhttp%253A%252F%252Ffiddle.jshell.net%252Ff210065bfc%26domain%3Dfiddle.jshell.net%26relation%3Dparent.parent&extended_social_context=false&href=http%3A%2F%2Fgoogle。 com&layout=button_count&locale=en_US&node_type=link&sdk=joey&send=true&show_faces=false&width=200](https://www.facebook.com/plugins/like.php?channel_url=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D11%23cb%3Df334b6227%26origin%3Dhttp%253A%252F%252Ffiddle.jshell.net%252Ff210065bfc%26domain%3Dfiddle.jshell.net%26relation%3Dparent.parent&extended_social_context=false&href=http%3A%2F%2Fgoogle.com&layout=button_count&locale=en_US&node_type=link&sdk=joey&send=true&show_faces=false&width=200)。域、协议和端口必须匹配。
> -d50SLIrXc3.js:43
> g.inform -d50SLIrXc3.js:43
> i.disconnect -d50SLIrXc3.js:44
> h._handleRequire -d50SLIrXc3.js:67
> j -d50SLIrXc3.js:19
> q -d50SLIrXc3.js:19
> p -d50SLIrXc3.js:19
> k - d50SLIrXc3.js:19
> l -d50SLIrXc3.js:19
> h._handleRequire -d50SLIrXc3.js:67
> k -d50SLIrXc3.js:67
> h.handle -d50SLIrXc3.js:67
> r -d50SLIrXc3.js:23
> （匿名函数）-d50SLIrXc3 .js:23
> v._handleJSResponse -d50SLIrXc3.js:87
> v._dispatchResponse -d50SLIrXc3.js:87

# javascript - 提示使用服务器端事件处理程序激活 javascript

> ID：12431560
> 
> 赞同：-2
> 
> 时间：2012-09-14T20:29:47.043
> 
> 标签：javascript, javascript-events, active-script

有没有办法提示用户使用服务器端事件处理程序激活 javascript，以防他们的 pc 上的 javascript 被关闭，他们将被要求在弹出窗口或指定的 DIV 中按下按钮（我的意思是提交表单）为了激活javascript？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:33:31.517

不，没有办法做到这一点。但是，您可以提供一个`<noscript>`标签来解释用户如何打开 JS。

例如：

```
<script>alert('hi');</script>
<noscript>Please enable JS by opening preferences panel in your browser</noscript> 
```

您可能希望使用服务器端浏览器嗅探为用户提供最相关的指导（通过告诉他们如何在他们当前使用的浏览器中执行此操作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:35:06.663

您可以设置一个具有特定 id 的 div，该 id 在页面加载时隐藏。然后在页面加载时隐藏 div。如果他们有 js，则 div 将隐藏。如果他们将其关闭（此时此地不太可能发生，但无论如何），那么他们会看到 div。

```
<div id="hasJsOn">Please turn on javascript for full enjoyment of this page.</div>
<script>
document.getElementById("hasJsOn").style.display = "none";
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:36:32.167

您可以检测最终用户的机器上是否启用了 JS，并且您可以通过使用 Javascript 将 a 添加到表单/链接，将该信息传递到他们访问的*下一页上的服务器。*`URI Component`

示例（未经测试的“即时”代码）：

```
<form action="postit.php">
  <p>
    <input type="hidden" id="js_detector" value="0">
  </p>
</form>
<script>
  document.getElementById("js_detector").value = 1;
</script> 
```

# django - Django - 如何在没有继承的情况下将所有字段定义从一个模型复制到另一个模型

> ID：12431565
> 
> 赞同：3
> 
> 时间：2012-09-14T20:30:34.013
> 
> 标签：django, django-models

我需要用它自己的表和没有 Django 继承机制的所有列定义现有模型的精确副本。否则，它使用 OneToOne 关系并将所有重复的字段保留在父表中，这是我绝对不需要的。我只是想避免为我的第二个模型重复模型字段和方法定义。

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T20:34:51.807

一种方法是创建[具有通用属性的抽象基础模型](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)。然后在当前应用中创建一个与父模型对应的模型。

为具有相同基类（和一些其他字段）的重复模型创建另一个模型。

虽然不优雅！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T11:57:47.233

你看过 Mixin 吗？

使用它们，您可以将类的字段混合到您的模型类中，并且仍然从常规基类继承。并且您可以混合来自不同类的文件，因此可能会形成一个良好的结构。

[http://eflorenzano.com/blog/2008/05/17/exploring-mixins-django-model-inheritance/](http://eflorenzano.com/blog/2008/05/17/exploring-mixins-django-model-inheritance/)

# actionscript-3 - FlashDevelop 配置问题 - 需要 Java 1.6

> ID：12431569
> 
> 赞同：1
> 
> 时间：2012-09-14T20:30:54.030
> 
> 标签：actionscript-3, windows-7, flash-builder, flashdevelop, java-6

一段时间以来，我一直在使用 Flashdevelop（4.4 版），零问题。然而，我最近重新安装了 Windows 7，在安装 Flashdevelop 之后，它需要 Java 1.6，没有它就无法编译。让我更具体一点，这是我在尝试编译一个简单的 HelloWorld 类型测试时遇到的错误：

```
"Running process: C:\Program Files (x86)\FlashDevelop\Tools\fdbuild\fdbuild.exe "C:\Users\marc\Documents\DeleteMe\DeleteMe\DeleteMe.as3proj" -ipc 01be003c-6cb5-4d0b-9c35-c59dd2ea7a19 -version "4.6.0; 3.3" -compiler "C:\Program Files (x86)\FlashDevelop\Tools\flexsdk" -library "C:\Program Files (x86)\FlashDevelop\Library" -cp "C:\Program Files (x86)\Java\jdk1.6.0_34\bin" -cp "C:\Program Files (x86)\Java\jdk1.6.0_34"
Building DeleteMe
mxmlc -load-config+=obj\DeleteMeConfig.xml -debug=true -incremental=true -swf-version=16 -o obj\DeleteMe634829909556672047
Starting java as: C:\Program Files (x86)\Java\jdk1.6.0_34\bin\java.exe;\bin\java.exe
Unable to start java.exe: The system cannot find the file specified
Could not compile because the fcsh process could not be started.
Build halted with errors (fcsh).
INITIALIZING: Failed, unable to run compiler
Done(1)" 
```

Java 1.6 JDK的`GlobalClasspath`设置设置为：`C:\Program Files (x86)\Java\jdk1.6.0_34\bin`

我也将我的`JAVA_HOME`环境变量设置为相同的位置。我可能会忽略设置另一个环境变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:46:37.130

`JAVA_HOME`应该

`C:\Program Files (x86)\Java\jdk1.6.0_34`

并不是

`C:\Program Files (x86)\Java\jdk1.6.0_34\bin`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T12:31:27.173

FlashDevelop 目前不支持您的 JAVA_HOME 环境变量包含多个路径（C:\Program Files (x86)\Java\jdk1.6.0_34\bin\java.exe、\bin\java.exe）。

将其修改为仅指示第一个路径（C:\Program Files (x86)\Java\jdk1.6.0_34\bin\java.exe）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-29T13:42:16.880

作为正在处理这个问题的人，我刚刚找到了一个不涉及使用 PATH 变量的答案。

进入您的 Flex SDK 的 /bin 目录，查找名为*jvm.config的 JVM 配置文件*

在里面，有一个参数'java.home'，如果留空，它将导致它搜索它自己的值。输入 JRE 的主路径——在我的例子中，

```
java.home=C:\Program Files\Java\jre1.6.0_07\ 
```

我通过转到“控制面板 > Java > Java 选项卡 > 查看...按钮”来查看所有已安装的版本及其路径找到了我的

我更喜欢这种方法，因为我觉得你不应该修改整个系统的设置来让 1 个程序工作，如果你可以选择只修改该程序的设置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-29T16:14:17.923

C:\Program Files (x86)\FlashDevelop\Tools\flexsdk\bin\jvm.config 中的 jvm.config 比路径变量好得多。请避免路径变量。在 jvm.config 中只需设置 jre URL 目录 java.home=C:\Program Files\Java\jre1.6.0_07

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-12-17T14:19:28.870

可能是你更新了 Java，上一个版本的 Java 要求你删除旧版本。然后进入文件

```
C:\Program Files (x86)\FlashDevelop\Tools\flexsdk\bin\jvm.config 
```

并更换

```
java.home=C:\Program Files\Java\jre1.6.0_07\ 
```

按文件夹是你的新版本

```
java.home=C:\Program Files (x86)\Java\jre1.8.0_25\ 
```

# android - Android VideoView 不显示

> ID：12431572
> 
> 赞同：1
> 
> 时间：2012-09-14T20:31:15.887
> 
> 标签：android, xml, camera, android-videoview

我在使用 VideoView 视图的 Activity 中显示相机源时遇到困难。我只是想查看我的相机（稍后我希望记录或拍照）我不想使用意图，我希望实际视图位于 50dp X 50dp 的框中。代码编译，我看到一个带有 50X50 dps 的黑框的空白活动。唯一的问题是它现在正在显示摄像机的实时信息。这是我的代码...

*****我确保包含正确权限*****的清单文件**** 

 ***```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myview"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.CAMERA"/>
    <uses-permission android:name="android.permission.RECORD_AUDIO"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

接下来在我的布局文件中创建一个 VideoView 并设置属性。（我是否设置了所有正确的属性？）

**布局文件**

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:custom="http://schemas.android.com/apk/res/com.example.myview"
    android:id="@+id/LinearLayout1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <VideoView
        android:id="@+id/vvv"
        android:layout_width="250dp"
        android:layout_height="250dp" 
        android:layout_gravity="center"/>

</LinearLayout> 
```

最后在我的活动中......

**我的活动档案**

```
package com.example.myview;

import java.io.IOException;

import android.media.MediaRecorder;
import android.os.Bundle;
import android.app.Activity;
import android.graphics.SurfaceTexture;
import android.hardware.Camera;
import android.view.*;
import android.view.TextureView.SurfaceTextureListener;
import android.widget.VideoView;

public class MainActivity extends Activity
{

    private MediaRecorder mediarecorder;
    private VideoView vv;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        //Be sure to load the activity view before I try to grab the sub view widets...
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mediarecorder = new MediaRecorder();
        mediarecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mediarecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
        mediarecorder.setOutputFormat(MediaRecorder.OutputFormat.DEFAULT);
        mediarecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        mediarecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);
        mediarecorder.setOutputFile("blah.mp4");

        vv = (VideoView)findViewById(R.id.vvv);
        vv.setKeepScreenOn(true);

        vv.start();

        SurfaceHolder holder = vv.getHolder();
        mediarecorder.setPreviewDisplay(holder.getSurface());

        try
        {
            mediarecorder.prepare();

        //  mediarecorder.start();
        } catch (IllegalStateException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e)
        {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T22:33:52.860

[VideoView](http://developer.android.com/reference/android/widget/VideoView.html)仅用于播放已录制的视频；[它与使用 Android Camera](http://developer.android.com/reference/android/hardware/Camera.html)和[MediaRecorder](http://developer.android.com/reference/android/media/MediaRecorder.html) API录制视频无关。

如果您想显示来自相机的预览流，并将相机连接到媒体记录器以录制视频，请从本指南开始： [构建相机应用程序](http://developer.android.com/guide/topics/media/camera.html#custom-camera)

目前，您根本没有需要将其传递给 MediaRecorder 的 Camera 实例。您还应该使用 SurfaceView 来显示相机预览，如果您的目标是 > 3.0，则应该使用 TextureView/GLSurfaceView。

一旦您录制了一些视频，您就可以使用 VideoView 播放它。***

# php - PHP-EWS 错误：无法绑定到服务

> ID：12431575
> 
> 赞同：2
> 
> 时间：2012-09-14T20:31:26.243
> 
> 标签：php, soap, exchangewebservices

当我尝试使用 php-ews 进行任何调用时，我收到“SOAP-ERROR: Parsing WSDL: Couldn't bind to service in”。我已将我的 Exchange 实例中的 services.wsdl、messages.xsd 和 types.xsd 文件复制到我的本地 ews/wsdl 目录中，并且在其中明确定义了服务，并且我使用的是正确的版本 (ExchangeWebServices::VERSION_2007_SP1 ）。有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-12T02:48:56.287

由于您已经从 Exchange 服务器下载了 services.wsdl，因此您必须对其进行修改。

在结束标记 (wsdl:definitions) 之前添加：

```
 ...
    <wsdl:service name="ExchangeServices">
      <wsdl:port name="ExchangeServicePort" binding="tns:ExchangeServiceBinding">
        <soap:address location="https://path.to.your.exchange.server/EWS/Exchange.asmx" />
      </wsdl:port>
    </wsdl:service> 

</wsdl:definitions> 
```

# ios - iOS Coco2D 错误

> ID：12431576
> 
> 赞同：0
> 
> 时间：2012-09-14T20:31:28.460
> 
> 标签：ios, cocos2d-iphone

当我点击添加 CCSPrite、钩子的 Action 方法时，这段代码会生成错误，我重写了 Hook 以绘制一条连接到钩子上的线。

```
 -(void)Action
{
 // Create the hook
Hook *hook = [Hook spriteWithTexture:[[CCTextureCache sharedTextureCache]   textureForKey:@"hook2_small.png"]];
 hook.position = ccp(self.fishToCatch.position.x, self.fishToCatch.position.y - 10);
  [self addChild:hook];

// Create appropriate move and move finished actions for hook and fish
 id fishMove = [CCMoveTo actionWithDuration:0.5 position:ccp(200, 433 - self.fishToCatch.contentSize.height/2)];
 id fishMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];
id updateScore = [CCCallFuncN actionWithTarget:self selector:@selector(updateScore:)];

 id hookMove = [CCMoveTo actionWithDuration:0.5 position:ccp(200, 433 - self.fishToCatch.contentSize.height/2 - 10)];
id hookMoveDone = [CCCallFuncN actionWithTarget:self selector:@selector(spriteMoveFinished:)];

 // Run the actions
 [hook runAction:[CCSequence actions: hookMove, hookMoveDone, nil]];
 [self.fishToCatch runAction:[CCSequence actions: fishMove, fishMoveDone, updateScore, nil]];

[[SimpleAudioEngine sharedEngine] playEffect:@"splash.mp3"];
 self.fishToCatch = nil;
} 
```

Hook 是 CSprite，我重写了 draw 方法

```
 @implementation Hook

 - (void)draw
  {

   [super draw];
   glEnable(GL_LINE_STRIP);
   glLineWidth(1.0);

   ccDrawColor4F(14.0/255.0,118.0/255.0,188.0/255.0,1.0f);

   ccDrawLine(ccp(self.contentSize.width - 15, self.contentSize.height), ccp(253 - self.position.x,459 - self.position.y));

   // ccDrawLine(ccp(0,0), ccp(100, 100));

  }
 @end 
```

我看到的错误是

```
OpenGL error 0x0500 in -[CCGLView swapBuffers] 280
OpenGL error 0x0500 in -[CCGLView swapBuffers] 280
OpenGL error 0x0500 in -[CCGLView swapBuffers] 280
 OpenGL error 0x0500 in -[CCGLView swapBuffers] 280
OpenGL error 0x0500 in -[CCGLView swapBuffers] 280
OpenGL error 0x0500 in -[CCGLView swapBuffers] 280
 OpenGL error 0x0500 in -[CCSprite draw] 532
OpenGL error 0x0500 in -[CCSprite draw] 532
OpenGL error 0x0500 in -[CCSprite draw] 532 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:33:32.043

glLineWidth() 是一个 OpenGL ES 1.1 函数。如果您使用的是 cocos2d 2.x，它可以解释 OpenGL 错误。您不能在 OpenGL ES 2.0 应用程序中使用 OpenGL ES 1.1 函数。

# objective-c - iOS6：UIViewController 无法加载名为 nib

> ID：12431578
> 
> 赞同：1
> 
> 时间：2012-09-14T20:31:36.540
> 
> 标签：objective-c, ios, xcode, cocoa-touch, ios6

在`iOS6`模拟器中进行测试时，单击披露指示器时出现以下错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UIViewController _loadViewFromNibNamed:bundle:] was unable to load a nib named "LocationDetail"' 
```

它在`iOS5`.

我不再有 LocationDetail 笔尖，也不需要使用它。我查看了我的整个项目以获取对它的引用，以及我的 MainWindow nib 和所有连接，以查看它可以在哪里使用，但我没有找到。

XCode 将如何仍然想要加载它，为什么只有错误`iOS6`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-16T22:05:31.417

问题不在 Xcode 中，而在 iOS 模拟器中。如果您已删除项目中对 .xib 的所有引用，并按照您的描述清理了所有内容，那么问题是 .xib 文件仍然存在于*Simulator*的应用程序包中。您应该尝试从模拟器中删除应用程序（或者更好的是，重置模拟器上的所有内容和设置）。这将解决它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T08:23:51.807

我所知道的是 initWithStyle:UITableViewStyleGrouped 将调用 initWithNibName:Bundle: 方法...

您的类与您的 nib 文件具有相同的名称，因此当您调用 initWithStyle:UITableViewStyleGrouped 时，它会尝试加载该 nib 文件。

当您重命名您的班级时，它没有找到具有相同班级名称的笔尖，因此没有像以前那样出现错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:07:45.383

我决定只重命名我的类和 .h 和 .m 文件，这样就解决了这个问题。

谁知道为什么。

# php - 网页更新时将发送电子邮件通知的 PHP 脚本

> ID：12431579
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:31:46.960
> 
> 标签：php

我想知道是否可以在网页更新时向我的电子邮件发送电子邮件通知？我该怎么办？

我在这里的另一个问题中找到了这段代码，它听起来有点相似但不完全一样，这可以根据我的需要进行编辑还是我需要一些不同的东西？：

[PHP - 远程文件更改时的电子邮件通知](https://stackoverflow.com/questions/9495512/php-email-notification-whenever-a-remote-file-changes)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:37:49.190

很久以前我有类似的请求，因此我构建了一个小的 bash 脚本来检查它

```
#!/usr/bin/env bash
url = "http://URL"
checkfile = "/tmp/URL.md5"
email  = "my@example.com"
savefile = "/dev/null"
[ -f ./pagecheck ] \
    && \
  (diff $(wget -O $savefile $url | md5sum) $checkfile) && mail -s "UPDATED: $url" $email) \
|| \
(wget -O $savefile $url | md5sum > $checkfile) 
```

我知道这不是您正在寻找的东西，而是您可以在 PHP 中构建的类似东西。我希望它有所帮助。

# java - 为什么 Java 中的 Set 数据结构在内部使用 Map？

> ID：12431581
> 
> 赞同：7
> 
> 时间：2012-09-14T20:31:48.147
> 
> 标签：java, hashmap, set, hashset

我想知道为什么[HashSet](http://www.docjar.com/html/api/java/util/HashSet.java.html)在幕后使用`HashMap`、`TreeSet`使用`TreeMap`和内部`LinkedHashSet`使用？`LinkedHashMap`因为`Set`只是携带和存储密钥而不是值，所以使用额外的内存空间不是不经济吗？

具有的`Entry`内部类`HashMap`如下

```
class Entry<K,V> implements Map.Entry<K,V> {
    final K key;
    V value;
    Entry<K,V> next;
    final int hash;
    ...
    ....
} 
```

对于 Set 我们真的不需要那个`V value`变量，对吗？那么在内部使用地图对象的好处和主要原因是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T20:34:04.193

更少的代码，更少的错误，更少的测试。

通过重用相同的代码，您只需优化、调试和测试一次。内存开销是最小的 - 每个条目的另一个指针，与 Key 相比可以忽略不计。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T20:33:46.753

使用 Map 可以简化代码，但会稍微增加内存使用量。它并不像您想象的那样多，因为开销已经很高。;)

并非所有地图都有集合，您可以使用以下内容。

```
Set<T> set = Collection.newSetFromMap(new ConcurrentHashMap<T>());
Set<T> set = Collection.newSetFromMap(new ConcurrentSkipListMap<T>());
Set<T> set = Collection.newSetFromMap(new IdentityHashMap<T>()); 
```

# python - 验证 Dropbox 中的访问令牌？

> ID：12431583
> 
> 赞同：2
> 
> 时间：2012-09-14T20:32:02.780
> 
> 标签：python, oauth, python-2.7, dropbox

对于我在 python 中制作的这个程序，我使用 dropbox 来存储一些文件。并遵循本网站上的教程： [https](https://www.dropbox.com/developers/start/authentication#python) ://www.dropbox.com/developers/start/authentication#python 并且通常很容易理解所有这些，但我不知道如何实际检查用户在 dropbox 弹出的页面上单击允许。我尝试制作一个循环，该循环将一直运行直到令牌有效，但这似乎有点愚蠢，如果用户想单击拒绝，那么循环将永远不会结束。我在页面上看到了有关 Oauth_callback 的内容，但我是编程新手，所以我不知道如何获取重定向用户时提供的信息，并将其与用户匹配。

# html - 报价的微数据

> ID：12431584
> 
> 赞同：3
> 
> 时间：2012-09-14T20:32:14.200
> 
> 标签：html, microdata

我可以在一个页面上为不同的产品提供多个优惠吗？我读了一些文章说我不能在一个页面上使用多个报价片段。我想看看是否有人对此了解更多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T10:48:48.917

也许您可能想查看[http://schema.org/AggregateOffer](http://schema.org/AggregateOffer)的示例。此外，还有一个类似的帖子可能会帮助您回答[如何在产品提供聚合页面中处理 schema.org 微数据标记](https://stackoverflow.com/questions/10141179/how-to-approach-schema-org-microdata-markup-in-an-product-offers-aggregation-pag)

我希望这对你有用。

# c# - 如何使用 C# 运行包含许多关键字（包括“GO”）的大型 SQL 脚本？

> ID：12431591
> 
> 赞同：2
> 
> 时间：2012-09-14T20:32:36.457
> 
> 标签：c#, asp.net, sql, sqlcommand

我正在创建一个 Web 应用程序，用作执行 SQL 复制的前端。

我有许多脚本存储在程序的属性中。让我们以第一个为例。第一个脚本是您通过在发布服务器上创建出版物获得的脚本。

```
USE [<<SOURCE_DATABASE_NAME>>]
EXEC sp_replicationdboption @dbname = N'<<SOURCE_DATABASE_NAME>>',
    @optname = N'publish', @value = N'true'
GO
USE [<<SOURCE_DATABASE_NAME>>]
EXEC [<<SOURCE_DATABASE_NAME>>].sys.sp_addlogreader_agent @job_login = N'XXX\Admin',
    @job_password = NULL, @publisher_security_mode = 0,
    @publisher_login = N'Admin', @publisher_password = N'<<PASSWORD>>',
    @job_name = NULL
GO

USE [<<SOURCE_DATABASE_NAME>>]
EXEC sp_addpublication @publication = N'<<SOURCE_DATABASE_NAME>>',
    @description = N'Transactional publication of database ''<<SOURCE_DATABASE_NAME>>'' from Publisher ''<<SOURCE_SERVER_NAME>>''.',
    @sync_method = N'concurrent', @retention = 0, @allow_push = N'true',
    @allow_pull = N'true', @allow_anonymous = N'false',
    @enabled_for_internet = N'false', @snapshot_in_defaultfolder = N'true',
    @compress_snapshot = N'false', @ftp_port = 21,
    @allow_subscription_copy = N'false', @add_to_active_directory = N'false',
    @repl_freq = N'continuous', @status = N'active',
    @independent_agent = N'true', @immediate_sync = N'false',
    @allow_sync_tran = N'false', @allow_queued_tran = N'false',
    @allow_dts = N'false', @replicate_ddl = 1,
    @allow_initialize_from_backup = N'false', @enabled_for_p2p = N'false',
    @enabled_for_het_sub = N'false'
GO

EXEC sp_addpublication_snapshot @publication = N'<<SOURCE_DATABASE_NAME>>',
    @frequency_type = 1, @frequency_interval = 1,
    @frequency_relative_interval = 1, @frequency_recurrence_factor = 0,
    @frequency_subday = 8, @frequency_subday_interval = 1,
    @active_start_time_of_day = 0, @active_end_time_of_day = 235959,
    @active_start_date = 0, @active_end_date = 0,
    @job_login = N'ICS\Admin', @job_password = NULL,
    @publisher_security_mode = 0, @publisher_login = N'Admin',
    @publisher_password = N'<<PASSWORD>>' 
```

我不想在 SQL Management Studio 中运行此脚本，而是想使用我的 Web 应用程序来运行它。

我试过：

```
public static void CreatePublication(string server, string query)
{
    string finalConnString = Properties.Settings.Default.rawConnectionString.Replace("<<DATA_SOURCE>>", server).Replace("<<INITIAL_CATALOG>>", "tempdb");

     using (SqlConnection conn = new SqlConnection(finalConnString))
     {
         using (SqlCommand cmd = new SqlCommand(query, conn))
         {
             conn.Open();

             cmd.ExecuteNonQuery();
         }
      }
}

public static string ConstructCreatePublicationScript(string rawPublicationScript, string rawAddArticleScript,
            string password, string sourceServerName, string sourceDatabaseName, List<string> selectedTables)
{
    string createPublicationScript = "";
    string addArticleScript = "";

    createPublicationScript = rawPublicationScript.Replace("<<PASSWORD>>", password)
            .Replace("<<SOURCE_SERVER_NAME>>", sourceServerName)
            .Replace("<<SOURCE_DATABASE_NAME>>", sourceDatabaseName);

    createPublicationScript = createPublicationScript + "\n\n";

    foreach (string selectedTable in selectedTables)
    {
        addArticleScript = rawAddArticleScript.Replace("<<SOURCE_DATABASE_NAME>>", sourceDatabaseName)
             .Replace("<<SOURCE_TABLE_NAME>>", selectedTable);

             createPublicationScript = createPublicationScript + addArticleScript + "\n\n";
     }
            //write script to file

            return createPublicationScript;
     } 
```

但是遇到了这个错误：

SqlException 被捕获

'GO' 附近的语法不正确。
'GO' 附近的语法不正确。
'GO' 附近的语法不正确。
'GO' 附近的语法不正确。
'GO' 附近的语法不正确。

我的问题是，如何在 C# 中运行上面的整个脚本？我应该摆脱“GO”关键字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:41:55.393

更改您的 ConstructCreatePublicationScript 以返回一个`List<string>`其中每个字符串元素是在 GO 语句处拆分的完整脚本的一部分。这是必要的，因为 GO 是 Management Studio 使用的分隔符，而不是 SQL 语句

```
public static List<string> ConstructCreatePublicationScript(string rawPublicationScript, string rawAddArticleScript)
{
    .....

    List<string> result = new List<string>();
    result.AddRange(Regex.Split(createPublicationScript, "^GO$", RegexOptions.Multiline));
    return result;
} 
```

然后更改您的执行代码以接收列表并执行每个字符串

```
public static void CreatePublication(string server, List<string> queries)    
{    
    string finalConnString = Properties.Settings.Default.rawConnectionString.Replace("<<DATA_SOURCE>>", server).Replace("<<INITIAL_CATALOG>>", "tempdb");    

     using (SqlConnection conn = new SqlConnection(finalConnString))    
     {    
         conn.Open();    
         foreach(string query in queries)
         {
             using (SqlCommand cmd = new SqlCommand(query, conn))    
             {    
                 cmd.ExecuteNonQuery();    
             }
         }    
      }    
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:36:51.853

该`GO`命令不是 SQL 命令，而是 SQL Management Studio 中的命令。它在脚本中分隔批次。

要将脚本作为 SQL 运行，请将其拆分`"GO"`并单独执行每个字符串。

（您可能希望使用正则表达式`\bGO\b`或`\sGO\s`进行拆分，以便仅捕获不属于单词的出现，如果您碰巧有一个包含“go”的标识符。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:35:55.177

读取文件。当您遇到“GO”时，将查询提交到服务器（没有“GO”本身），然后继续阅读。

# android - 如何将多个触摸操作附加到单个列表项？

> ID：12431592
> 
> 赞同：1
> 
> 时间：2012-09-14T20:32:47.070
> 
> 标签：android, android-layout, android-listview, onclick, android-listfragment

我正在为具有关联*评论的**项目*使用以下列表布局。*评论*的数量由右侧的框表示。

 **![项目列表布局](../Images/677c95186a1af5b6e7506ead2bb7c07c.png)

目前，我正在使用`onListItemClick`处理程序来启动另一个*详细信息*视图。

```
public class CustomListFragment extends ListFragment
                                implements LoaderCallbacks<Cursor> {

    private Activity mActivity;
    private CursorAdapter mAdapter;
    private QueryParameters mQueryParameters;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setEmptyText("No data to display");

        mActivity = getActivity();
        if (mActivity == null)  {
            Log.e(getClass().getName(), "Activity is null");
            return;
        }
        // Prepare query.
        mQueryParameters = QueryHelper.getQueryParameters(mActivity);
        if (mQueryParameters == null || !mQueryParameters.isPreparedForLoader()) {
            Log.d(getClass().getName(), "One or more query parameters are null.");
            return;
        }
        mAdapter = new CustomCursorAdapter(mActivity, null, 0);
        setListAdapter(mAdapter);
        getLoaderManager().initLoader(0, null, this);
    }

    @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle extras) {
        return new CursorLoader(mActivity,
                mQueryParameters.uri,
                mQueryParameters.fromColumnsLoader,
                mQueryParameters.selection,
                mQueryParameters.selectionArgs,
                mQueryParameters.sortOrder);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        mAdapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        mAdapter.swapCursor(null);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        Intent intent = new Intent(mActivity, ItemDetailsActivity.class);
        intent.putExtra("ITEM_URI", mItemUri);
        mActivity.startActivity(intent);
    }
} 
```

我想实现用户可以触摸右侧的框元素。然后，此操作应启动关联的`CommentsActivity`. 但是，当用户触摸左侧时，它仍应启动`ItemDetailsActivity`.
在这两种情况下，我都需要传递`itemUri`意图，以便可以加载特定*项目的**详细信息*视图或*评论*列表。 使用a将 s 绑定到*item*的属性。 *`ListFragment``CursorAdapter``TextView`*

 ****问题：**

*   如何将第二个触摸动作附加到单个列表项？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:04:01.083

您没有发布任何与适配器本身相关的代码，但我找到了您[之前的问题](https://stackoverflow.com/q/12350711/1267661)，并且您大部分时间都在那里。

## 快速而肮脏的答案

在`bindView()`中，让我们修改您的`comments_count`TextView 以将当前行的索引保存在标记中（为您的`itemUri`）并添加一个简单的 OnClickListener：

```
public void bindView(View view, Context context, Cursor cursor) {
    ViewHolder holder = (ViewHolder)view.getTag();
    if (holder == null) {
        ...
        holder.comments_count.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // Get the position from the ViewHolder
                long id = (Long) v.getTag();
                Toast.makeText(v.getContext(), "Comment Click: " + id, Toast.LENGTH_SHORT).show();
            }
        });
    }
    ...
    holder.comments_count.setTag(cursor.getLong(0));
} 
```

当用户点击该行时，它仍然会调用`onListItemClick()`，除非他们点击评论框。评论框会触发上面的 OnClickListener，您可以在其中将用户定向到您的`CommentsActivity`. 你没有提到你在哪里获取不同的值，`itemUri`但我认为你需要行的 id 来获取它。

* * *

## 优秀的答案

在您之前的问题中，我注意到您正在进行一些重复调用，并且 Thiago Moreira Rocha 的布局非常复杂，可以重复使用（对于每个 ListView 行）。所以我提出了一种不同的方法。我将我的答案分为与适配器、行布局和颜色相关的部分`comments_count`：

**适配器**
我会把代码完整贴出来，然后在底部解释：

```
public class CustomCursorAdapter extends CursorAdapter {
    private LayoutInflater mInflater;
    private int[] mFrom;

    private OnClickListener commentClick = new OnClickListener() {
        @Override
        public void onClick(View v) {
            // Get the position saved in bindView()
            long id = (Long) v.getTag();
            Toast.makeText(v.getContext(), "Comment Click: " + id, Toast.LENGTH_SHORT).show();
        }
    };

    public CustomCursorAdapter(Context context, Cursor cursor, int flags) {
        super(context, cursor, flags);
        mInflater = LayoutInflater.from(context);
    }

    private void applyColorFilter(Drawable drawable, int count) {
        drawable.clearColorFilter();
        if (count > 0) {
            float saturation = (count * 15) / 100f;
            // The value gets pinned if out of range.
            int color = Color.HSVToColor(new float[] {110f, saturation, 1f});
            drawable.setColorFilter(color, Mode.SRC);
        }
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.title.setText(cursor.getString(mFrom[0]));
        holder.description.setText(cursor.getString(mFrom[1]));

        // Get comments_count and set it as text
        int count = cursor.getInt(mFrom[2]);
        holder.comments_count.setText(count + "");
        holder.comments_count.setTag(cursor.getLong(0));

        // Adjust the color by saturation
        applyColorFilter(holder.comments_color, count);

        // Alternate method, that I explain in the answer
        //   Note: set the solid color in color.xml to #2aff00 
        //holder.comments_color.setAlpha(count * 45);
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        View view = mInflater.inflate(R.layout.list_item, parent, false);

        ViewHolder holder = new ViewHolder();
        holder.title = (TextView)view.findViewById(R.id.title);
        holder.description = (TextView)view.findViewById(R.id.description);
        holder.comments_count = (TextView)view.findViewById(R.id.comments_count);
        holder.comments_count.setOnClickListener(commentClick);
        holder.comments_color = ((LayerDrawable) holder.comments_count.getBackground()).findDrawableByLayerId(R.id.color);

        view.setTag(holder);

        return view;
    }

    @Override
    public Cursor swapCursor(Cursor newCursor) {
        if(mFrom == null && newCursor != null) {
            mFrom = new int[] {newCursor.getColumnIndex(TITLE), newCursor.getColumnIndex(DESCRIPTION), newCursor.getColumnIndex(COMMENTS_COUNT)};
        }
        return super.swapCursor(newCursor);
    }

    private class ViewHolder {
        TextView title;
        TextView description;
        TextView comments_count;
        Drawable comments_color;
    }
} 
```

我做了一些改变：

*   `mFrom`保存您正在使用的列的索引。您只需要获取*一次*列索引，除非您更改 Cursor，否则它不会更改
*   `commentsClick`是我用于*每一行的**一个*通用 OnClickListener，我在创建一个*`ViewHolder`*
**   我将您更改 HSV 颜色的方法带入适配器并调用它`applyColorFilter()`*   我移动了创建in`ViewHolder`而`newView()`不是检查`null`一个 in`bindView()`*

 ** * *

**行布局**
你可能注意到我改变了评论的颜色有点不同，那是因为我使用了更简单的行布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="10dp" >

    <TextView
        android:id="@+id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_toLeftOf="@+id/comments_count"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/description"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/title"
        android:layout_toLeftOf="@+id/comments_count"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <TextView
        android:id="@+id/comments_count"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="15dp"
        android:background="@drawable/comments_layers"
        android:textAppearance="?android:attr/textAppearanceLarge" />

</RelativeLayout> 
```

（虽然[Thiago Moreira Rocha 的布局](https://stackoverflow.com/a/12352314/1267661)有效，但嵌套的 ViewGroup 似乎有点矫枉过正。只要您有一个只有一个孩子的 ViewGroup，它们通常是一种替代方案。）

我使用 LayerDrawable 来替换两个 LinearLayout，我将分步解释。 **首先**是边框（`border.xml`），和上一个很相似：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <corners android:radius="10dp" />
    <padding android:bottom="2dp" android:left="2dp" android:right="2dp" android:top="2dp" />
    <solid android:color="#ffffff" />
    <stroke android:width="2dp"
        android:color="#000000" />
</shape> 
```

（注意填充是笔划的宽度。）

**二、**可调背景色（`color.xml`）：

```
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle" >
    <corners android:radius="10dp" />
    <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
    <solid android:color="#ffffff" />
</shape> 
```

**最后，**我创建了一个 LayerDrawable 来组合两个图像 ( `comments_layers.xml`)：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item 
        android:id="@+id/border"
        android:drawable="@drawable/border" />
    <item 
        android:id="@+id/color"
        android:drawable="@drawable/color" />
</layer-list> 
```

* * *

**（可选）**
您在 中调整 HSV 值的饱和度`applyColorFilter()`，但这似乎相当于调整绿色背景的 alpha。如果这是真的，那么更改 alpha 值是一项简单得多的任务。在以下位置找到我的评论`bindView()`：

1.  注释掉`applyColorFilter(holder.comments_color, count);`
2.  取消注释`holder.comments_color.setAlpha(count * 45);`
3.  打开我的`color.xml`文件并将元素的`color`属性从更改为`solid``#ffffff``#2aff00`

* * *

事实上，我以前从未使用过像这样的 LayerDrawables，可能有更快的方法，但我认为这很巧妙。*****

# windows - 如何使 Visual Studio 2010 成为 Expression Blend 4 中的默认代码编辑器

> ID：12431594
> 
> 赞同：1
> 
> 时间：2012-09-14T20:32:54.433
> 
> 标签：windows, visual-studio, expression-blend

Expression Blend 3 打开 VS2008 作为默认编辑器。

Expression Blend 4 使用内部的类似记事本的编辑器，而不是使用 VS2010/2008。我怎样才能解决这个问题？

编辑：它实际上是通过项目主菜单找到VS2010，但没有在事件处理的上下文中打开它（工作流通过元素属性-> 事件-> ...）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T13:32:44.903

转到工具 > 选项 > 项目并选中使用 Visual Studio Standard 或更高版本来编辑事件处理程序代码（或类似的东西）的框。现在 Blend 将在 VS 中打开事件处理代码。顺便说一句，如果您创建自定义行为，它仍会在 Blend 中打开这些行为。

# javascript - 如何在 d3.js 中返回路径的 y 坐标？

> ID：12431595
> 
> 赞同：27
> 
> 时间：2012-09-14T20:32:55.393
> 
> 标签：javascript, svg, d3.js

我有一个图形，当悬停在 svg 区域的顶部时，我希望代表图形的线在 x 坐标处显示一个圆圈。这个圆应该沿着代表曲线的线的路径。问题是我不知道该怎么做。

下面的代码显示了我已经成功了多远，它确实在文档的右侧 x 坐标处添加了一个圆圈。现在，我用什么代替问号？

```
 svg.on("mousemove", function() {
        d3.select("path.line")
          .style("stroke-width", "2.5px");

         svg.append("svg:circle")
            .attr("cx", Math.floor(event.offsetX-m[1]))
            .attr("cy", ?)
            .attr("r", "10")
            .attr("fill", "red");
    }); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-22T07:23:18.680

SVG 提供了一个名为的本机函数，该函数`.getPointAtLength()`以您传递的任意长度返回路径的 x 和 y 值。

您需要遍历该行的长度，直到找到相应的 y 位置。以下是您在 D3 中的操作方式：

```
var svg = d3.select("#line").append("svg")
var path = 
    svg.append("path")
      .attr("d", "M0,168L28,95.99999999999997L56,192L84,71.99999999999997L112,120L140,192L168,240L196,168L224,48L252,24L280,192L308,120L336,24L364,168L392,95.99999999999997L420,168L448,95.99999999999997L476,192L504,71.99999999999997L532,120L560,192L588,216L616,168L644,48L672,24L700,192L728,120L756,24L784,192L812,71.99999999999997")
      .attr("fill", "none")
      .attr("stroke", "black");

var circle = 
    svg.append("circle")
      .attr("cx", 100)
      .attr("cy", 350)
      .attr("r", 3)
      .attr("fill", "red");

var pathEl = path.node();
var pathLength = pathEl.getTotalLength();
var BBox = pathEl.getBBox();
var scale = pathLength/BBox.width;
var offsetLeft = document.getElementById("line").offsetLeft;
var randomizeButton = d3.select("button");

svg.on("mousemove", function() {
  var x = d3.event.pageX - offsetLeft; 
  var beginning = x, end = pathLength, target;
  while (true) {
    target = Math.floor((beginning + end) / 2);
    pos = pathEl.getPointAtLength(target);
    if ((target === end || target === beginning) && pos.x !== x) {
        break;
    }
    if (pos.x > x)      end = target;
    else if (pos.x < x) beginning = target;
    else                break; //position found
  }
  circle
    .attr("opacity", 1)
    .attr("cx", x)
    .attr("cy", pos.y);
}); 
```

你可以在这里看到一个演示：http: [//bl.ocks.org/3824661](http://bl.ocks.org/3824661)

# css - 三角形箭头的css渐变

> ID：12431596
> 
> 赞同：9
> 
> 时间：2012-09-14T20:32:58.347
> 
> 标签：css, css-shapes, linear-gradients

请看一下[http://jsfiddle.net/ghAgQ/](http://jsfiddle.net/ghAgQ/) 我需要相同的渐变箭头，因为它是矩形。有什么想法是怎么做到的？谢谢

```
.rectangle {
background-color: #EEE;
height: 80px;
width: 240px;
border: 1px solid #CCC;
background: white;
cursor: pointer;
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,white),             color-stop(37%,#F1F1F1), color-stop(57%,#E1E1E1), color-stop(100%,#F6F6F6));
float: left;
}

.arrow {

border-top: 41px solid transparent;
border-bottom: 41px solid transparent;
border-left: 15px solid #C4C4C4;
float: left;
cursor: pointer;

} 
```

​</p>

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-15T00:38:07.983

你可以用一种更简单的方法来做到这一点，只使用一个元素和一个旋转的伪元素（任何支持 CSS 渐变的浏览器也支持[**CSS 转换**](https://developer.mozilla.org/en-US/docs/CSS/transform)和[**伪元素**](https://developer.mozilla.org/en-US/docs/CSS/Pseudo-elements)）和一个有角度的线性渐变。另外，不要使用旧的 WebKit 语法（请参阅[有关语法历史的这一点](https://developer.mozilla.org/en-US/docs/CSS/linear-gradient#History_of_the_syntax)）。

在 Windows 上使用 Chrome、Opera、Firefox、IE 的当前版本。

## [演示](http://dabblet.com/gist/3725803)

**HTML**只是`<div class='rectangle'></div>`

相关**CSS**：

```
.rectangle {
    float: left;
    position: relative;
    height: 80px;
    width: 240px;
    border: solid 1px #ccc;
    border-right: none;
    background: #eee linear-gradient(white, #f1f1f1 37%, #e1e1e1 57%, #f6f6f6);
    cursor: pointer;
}
.rectangle:after {
    position: absolute;
    top: 16px; right: -25px;
    width: 48px;
    height: 47px;
    border-left: solid 1px #ccc;
    border-top: solid 1px #ccc;
    transform: rotate(134deg) skewX(-10deg) skewY(-10deg);
    background: #eee linear-gradient(45deg, white, #f1f1f1 37%, #e1e1e1 57%, #f6f6f6);
    content: '';
} 
```

* * *

### 编辑 2013 年 1 月

4个月后，我有了一个稍微改进的解决方案。这一次，计算值。我第一次让他们使用试错法。

# [新演示](http://dabblet.com/gist/4639593)

```
.shape {
    float: left;
    position: relative;
    border: 1px solid #ccc;
    border-right: none;
    width: 240px; height: 80px;
    background: linear-gradient(white, #f1f1f1 37%, #e1e1e1 57%, #f6f6f6);
    cursor: pointer;
}
.shape:after {
    position: absolute;
    top: 50%; right: 0;
    margin: -24px -20px;
    border-top: solid 1px #ccc;
    border-right: solid 1px #ccc;
    width: 40px /* 80px/2 */; height: 47px/* 80px/sqrt(3) */;
    transform: rotate(30deg) skewY(30deg); /* create a rhombus */
    /* 49.1deg = atan(1.15) = atan(47px/40px) */
    background: 
            linear-gradient(-49.1deg, #f6f6f6, #e1e1e1 43%, #f1f1f1 63%, white);
    content: ''
}
```

```
<div class='shape'></div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T04:37:23.957

虽然上面的演示在 Chrome 中看起来非常不错，但缺少任何浏览器支持信息，并且它在许多浏览器中都不起作用。我花了一些时间来开发一种更跨浏览器的方法。

[这是适用于所有现代浏览器的解决方案，具有使用 Sass 的良好构建功能](http://sassmeister.com/gist/c8708658a5f83dfa4fea)

```
.triangle {
    /* sample positioning */
    width: 160px;
    height: 160px;
    position: absolute;
    top: 30%;
    left: 45%;

    /*
     * deprecated syntax has better browser support
     * IE8+
     * http://css-tricks.com/almanac/properties/c/clip/
     */
    clip: rect(auto, 180px, auto, 100px);

    -webkit-transform: rotate(-90deg);
    -moz-transform: rotate(-90deg);
    -o-transform: rotate(-90deg);
    transform: rotate(-90deg);
}

.triangle::after {
    content: "";
    position: absolute;
    top: 10px;
    bottom: 10px;
    left: 10px;
    right: 10px;

    /**
     * To also support IE 9 we you a background images
     * as fallback, created via compass:
     * @include background-image(linear-gradient(300deg, green, blue));
     */
    background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4gPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJncmFkIiBncmFkaWVudFVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgeDE9IjEuMDkxNTA2IiB5MT0iMC44NDE1MDYiIHgyPSItMC4wOTE1MDYiIHkyPSIwLjE1ODQ5NCI+PHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iIzAwODAwMCIvPjxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iIzAwMDBmZiIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JhZCkiIC8+PC9zdmc+IA==');
    background-size: 100%;
    background-image: -moz-linear-gradient(150deg, green, blue);
    background-image: -webkit-linear-gradient(150deg, green, blue);
    background-image: linear-gradient(300deg, green, blue);

    -webkit-transform: rotate(-45deg);
    -moz-transform: rotate(-45deg);
    -o-transform: rotate(-45deg);
    transform: rotate(-45deg);
} 
```

目前支持 IE 10+、Firefox、Opera、Chroma、Safari

# javascript - 递归使用 eval() 是检查程序执行情况的好方法吗？

> ID：12431597
> 
> 赞同：5
> 
> 时间：2012-09-14T20:32:58.750
> 
> 标签：javascript, metaprogramming, interpreter

在过去的几天里，我一直在构建一个基本的实时评估 JavaScript 开发环境（我称之为[WEPL](http://github.com/tehgeekmeister/wepl)。），并意识到能够将错误消息与行号相关联会很好。不幸的是， eval() 没有提供一个很好的方法来做到这一点，我可以找到。

到目前为止我提出的解决方案是在 eval() 之前转换源代码，以便它是对 eval() 的包装器的一组嵌套调用，它在 eval 之前记录一些信息，检查 eval 是否成功，以及然后使用该信息向用户输出更有用的故障排除信息。

我的问题是，为什么这可能是个坏主意？我需要解决哪些问题才能确保它运作良好？

我的意思是这种转变的一个例子，只是为了具体化。

这个

```
if (cond) {
  return foo + bar;
}
else {
  return baz + quux;
} 
```

变成这个

```
if (myEval('cond')) {
  return myEval("myEval(\"foo\") + myEval(\"bar\")");
else {
  return myEval("myEval(\"baz\") + myEval(\"quux\")");
} 
```

尽管我可以做到，但我显然没有包装最高级别，而程序化版本会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:39:02.563

如果您想接受甚至是远程复杂的脚本，这将不起作用。几个潜在的问题：

## 范围

```
var i = 1; // global scope
!function() {
    var i = 2; // function scope
}();
alert(i); // 1 
```

对比

```
myEval('var i = 1;'); // global scope
myEval('!function() {
    myEval(\'var i = 2;\'); // eval has global scope, always
}();');
myEval('alert(i);'); // 2 
```

## 闭包

```
!function() {
    var i = 1; // local to outer function
    !function() { // inherits context from outer function
        alert(i); // 1
    }();
}(); 
```

对比

```
myEval('!function() {
    myEval(\'var i = 1;\'); // local to outer function
    myEval(\'!function() { // eval has global scope; myEval inherits from wherever it was defined
        myEval(\\\'alert(i);\\\'); // undefined
    }();\');
}();'); 
```

## 这个

```
var obj = {
    n: 1,
    f: function() {
        return this.n; // this is the object f is called from
    }
}
alert(obj.f()); // 1 
```

对比

```
myEval('var obj = {
    n: myEval(\'1\'),
    f: myEval(\'function() {
           return myEval(\\\'this.n\\\'); // this is always the window in eval
       }')
}');
myEval('alert(obj.f());'); // undefined 
```

## 逃脱蠕变

你需要转义每一个引用，你也需要转义转义符号。在包含大量对象、闭包、内部函数等的代码中，这将导致转义符号变得难以管理：

```
!function() {
    $(function() {
        $('#foo').click(function() {
            setTimeout(function() {
                $.post('/', function(res) {
                     log(res);
                });
            }, 1000);
        });
    });
}(); 
```

（请注意，这不是一个特别人为或复杂的示例，它仅涉及在某个事件上触发回调的延迟动作）

```
myEval('!function() {
    myEval(\'$(myEval(\\\'function() {
        myEval(\\\\\\\'$(\\\\\\\'#foo\\\\\\\').click(myEval(\\\\\\\\\\\\\\\'function() {
            myEval(\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'setTimeout(myEval(\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'function() {
                myEval(\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'$.post('/', myEval(\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'function(res) {
                     myEval(\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'log(res);\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\');
                }\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'));\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\');
            }\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\'), 1000);\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\');
        }\\\\\\\\\\\\\\\'));\\\\\\\');
    }\\\'));\');
}();'); 
```

你可能会看到我在说什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:48:53.587

在为 IE 开发扩展时，我不得不做类似的事情。我最终创建了一个名为“lineNumber”的全局变量，并将代码转换为更像这样：

```
lineNumber = 1; if (cond) {
  lineNumber = 2; return foo + bar;
}
else {
  lineNumber = 5; return baz + quux;
} 
```

当然，我确保我在所有块周围都使用了花括号，并且必须保持我的编码足够简单以避免混淆我可怜的蹩脚解析器——但它让我通过了它。

# android - 关闭 GPS 安卓

> ID：12431598
> 
> 赞同：1
> 
> 时间：2012-09-14T20:33:01.213
> 
> 标签：android

> **可能重复：**
> [如何在 Android Cupcake 中以编程方式启用 GPS](https://stackoverflow.com/questions/1051649/how-to-programmatically-enable-gps-in-android-cupcake)

我目前正在编写一个适用于 GPS 的 Android 应用程序。目前我能够确定是否启用了 GPS。我的问题是，如果 GPS 被禁用，我想在应用程序启动时启用它。我怎样才能以编程方式做到这一点？另外，我想创建打开和关闭 GPS 的功能，我阅读了 stackoverflow 上关于它的所有线程，但是我尝试的所有功能都得到了“不幸的是你的应用程序必须停止”（我没有忘记添加权限）

有人可以帮助我启用或禁用 GPS 的工作功能吗？

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS"/>
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.CONTROL_LOCATION_UPDATES" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS" />
<uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
```

起初，我使用了这些功能：

```
 private void turnGPSOn(){
        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

        if(!provider.contains("gps")){ //if gps is disabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider"); 
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3")); 
            sendBroadcast(poke);
        }
    }

    private void turnGPSOff(){
        String provider = Settings.Secure.getString(getContentResolver(), Settings.Secure.LOCATION_PROVIDERS_ALLOWED);

        if(provider.contains("gps")){ //if gps is enabled
            final Intent poke = new Intent();
            poke.setClassName("com.android.settings", "com.android.settings.widget.SettingsAppWidgetProvider");
            poke.addCategory(Intent.CATEGORY_ALTERNATIVE);
            poke.setData(Uri.parse("3")); 
            sendBroadcast(poke);
        }
    } 
```

然后我尝试使用：

```
ENABLE GPS:

Intent intent=new Intent("android.location.GPS_ENABLED_CHANGE");
intent.putExtra("enabled", true);
sendBroadcast(intent);
DISABLE GPS:

Intent intent = new Intent("android.location.GPS_ENABLED_CHANGE");
intent.putExtra("enabled", false);
sendBroadcast(intent); 
```

两者都不适合我

有人知道吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T20:58:13.967

您不能以编程方式打开和关闭 GPS。您能做的最好的事情就是将用户发送到允许他们自己操作的设置屏幕。

```
final LocationManager manager = (LocationManager) getSystemService( Context.LOCATION_SERVICE );
if ( !manager.isProviderEnabled( LocationManager.GPS_PROVIDER ) ) {
     new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
     startActivity(intent);
} 
```

存在以编程方式打开/关闭 GPS 的黑客攻击，但它们仅适用于旧版本的 Android。即使可以，也不要这样做。用户可能已关闭 GPS，因为他们不想让应用程序精确跟踪它们。试图强迫改变他们的决定是非常糟糕的形式。

如果您需要启用 GPS，请在您的应用程序启动时检查它，如果用户不启用它，则保释。

# c - C中的深度复制数组... malloc？

> ID：12431599
> 
> 赞同：0
> 
> 时间：2012-09-14T20:33:03.373
> 
> 标签：c, multidimensional-array, malloc, deep-copy

我正在尝试在 C 中制作一个数组的深层副本（originalBoard 是副本）：

```
int gy, gx;          
            for (gy=0; gy<9; gy++)
            {
                for (gx=0; gx<9; gx++)
                {                  
                g.originalBoard[gy][gx]=g.board[gy][gx];
                }
            } 
```

这似乎没有奏效，我猜这只是指向原始板数组。

那么解决方案是尝试使用malloc吗？喜欢：

```
 int* g.originalBoard[9][9]=malloc(sizeof(g.board[9][9])); 
```

顺便说一句，这是一个 9x9 二维数组。语法是什么（编译器对上述行给出错误...）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:39:36.473

我认为你需要这个：

```
 //assuming g.originalBoard is array of array of integers and same for g.board  
int *originalBoard = malloc(sizeof(g.board));
memcpy(originalBoard, g.board, sizeof(g.board)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:34:26.270

这是使用[memcpy](http://pubs.opengroup.org/onlinepubs/007908799/xsh/memcpy.html)的正确位置。你可能想要

```
g.originalBoard = (int *)malloc(9 * 9 * sizeof(int));
if (NULL == g.originalBoard) {
    /* malloc failed, so handle the error somehow */
}
memcpy(g.originalBoard, g.board, 9 * 9 * sizeof(int)); 
```

* * *

您可能会注意到，在上述解决方案中，您必须使用`g.board[r * 9 + c]`来访问索引 (r, c) 处的项目，而不是两个索引。这是因为这种动态分配内存的方式 - 在编译时`g.board`并且`g.originalBoard`只是指针，而不是数组。或者，如果您可以控制 的类型的定义，则`g`可以将矩阵的大小硬编码为

```
struct foo {
    int board[9][9];
    int originalBoard[9][9];
    /* Other fields here */
}; 
```

然后，您不必为`g.board`and分配额外的空间`g.originalBoard`- 只要您为自己分配空间，这两个字段就会自动分配`g`。此外，您可以使用`g.board[r][c]`而不是`g.board[r * 9 + c]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-23T15:16:06.133

顺便说一句，如果您尝试在阵列上执行以下“预期”任务，

int* g.originalBoard[9][9]=malloc(sizeof(g.board[9][9]));

那么您应该将上面的行更改为

int* g.originalBoard[8][8]=malloc(sizeof(g.board[8][8]));

因为这是一个 9x9 的二维数组，而在 C 中，数组是基于零的。

# ruby-on-rails-3 - 从 Sqlite3 迁移到 PostgreSQL(ror 3)

> ID：12431602
> 
> 赞同：0
> 
> 时间：2012-09-14T20:33:08.877
> 
> 标签：ruby-on-rails-3, postgresql, rake

我期待更改 develeop 和 prodoction 数据库以便能够迁移到 heroku。我逐步关闭[此链接](http://xtremekforever.blogspot.ro/2011/05/setup-rails-project-with-postgresql-on.html)`rails s`，一切正常，我在启动postgresql 时重新启动了服务器，但出现此错误

```
 ActiveRecord::StatementInvalid in Tasks#main

Showing /home/bogdan/ex/bored/app/views/tasks/_rand_task.html.erb where line #3 raised:

PG::Error: ERROR:  relation "tasks" does not exist
LINE 4:              WHERE a.attrelid = '"tasks"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"tasks"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

由于这是一个对象的第一次调用，我正在徘徊我应该迁移或做任何其他事情以便让我的`pg`工作（对不起，如果问题是愚蠢的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:55:35.987

您需要运行`rake db:create:all`以创建新的 Postgres 数据库。

# c# - 如何在c#中提取richtextbox中的最后一个单词

> ID：12431607
> 
> 赞同：-3
> 
> 时间：2012-09-14T20:33:45.650
> 
> 标签：c#, word, richtextbox, extract

我正在使用 Windows 窗体。在我的项目中，我需要为富文本框的最后一个单词着色。当有人在应用程序的给定文本框上写字时，我需要将刚刚写在richtextbox 上的最后一个字涂成红色或其他颜色。

我找到了一种从以下链接中提取最后一个单词的方法

[http://msdn.microsoft.com/en-us/library/system.windows.documents.textselection.select%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.documents.textselection.select%28v=vs.95%29.aspx)

但是如果可能的话，我需要更方便的代码来提取最后一个单词。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:57:06.467

好吧，如果你真的只是想得到最后一个字，你可以做这样的事情......当然，假设你制作的字符串等于富文本框的文本。

```
string str="hello, how are you doing?";
if (str.Length >0)
{
    int index=str.LastIndexOf(" ") + 1;
    str = str.Substring(index));
} 
```

然后只需返回字符串，然后用它做你需要做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:42:50.773

这是示例代码

*> 字符[] arr = 新字符[50]；

> ```
>  int i = 0;
>     private void richTextBox1_KeyUp(object sender, KeyEventArgs e)
>      {
>     if (e.KeyCode == Keys.Space)            {
>         string str = new string(arr); 
>         MessageBox.Show(str);
>         Array.Clear(arr, 0, arr.Length);
>         i = 0;
>     }
>     else if (e.KeyCode == Keys.Back)
>        {
>         i--;
>         if (i < 0)
>         {
>             i = 0;
>         }
>         arr[i] = ' ';
> 
>     }
> 
>     else
>     {
>         arr[i] = (char)e.KeyValue;
> 
>         i++;
>     }
>     }* 
> ```

这就是您能够提取最新单词的方式。现在给自己涂上你喜欢的词。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T23:58:22.760

我记得富文本框可以将文本呈现为 HTML。
只需将您的最后一个单词包装在字体标签中即可。

# fxcop - 可用于 FxCop 规则 CA2241 的源代码实现（为格式化方法提供正确的参数）？

> ID：12431609
> 
> 赞同：0
> 
> 时间：2012-09-14T20:33:51.013
> 
> 标签：fxcop

我正在尝试使用`VisitMethodCall`覆盖来实现我自己的 CA2241 版本。

如果 String.Format 的参数数量为 5 个或更少，则它有效，但如果有 6 个或更多参数（包括格式字符串），则始终仅显示 2 个参数。

例如`(MethodCall)call.Operands.Count`在这些情况下是正确的：

```
Console.WriteLine( String.Format( "{0} {1}", 1, 2 ) );
Console.WriteLine( String.Format( "{0} {1} {2}", 1, 2, 3 ) ); 
```

...但在这种情况下总是只返回“2”：

```
Console.WriteLine( String.Format( "{0} {1} {2} {3}", 1, 2, 3, 4 ) );
Console.WriteLine( String.Format( "{0} {1} {2} {3} {4}", 1, 2, 3, 4, 5 ) ); 
```

这是我对`VisitMethodCall`. 什么时候`expression.NodeType`不是`Literal`，或者`Call`它总是`Pop`只有两个参数。而这种情况只发生在参数数量`String.Format`为 6 个或更多时。

```
public override void VisitMethodCall( MethodCall call )
{
    MemberBinding mb = call.Callee as MemberBinding;
    if ( mb.BoundMember.FullName.StartsWith( "System.String.Format(" ) )
    {
        Expression expression = call.Operands[ 0 ];
        switch ( expression.NodeType )
        {
        case NodeType.Literal:
            // ...
            break;
        case NodeType.Call:
            // ...
            break;
        default: // always NodeType.Pop with two parameters
            // ...
        break;
        }
    }
    base.VisitMethodCall( call );
} 
```

那么，我做错了什么？此外，CA2241 规则是否有可用的源代码？

提前致谢。

编辑：我发现了这篇文章：http: [//blogs.msdn.com/b/codeanalysis/archive/2010/04/14/data-flow-analysis-rules-in-visual-studio-2010.aspx](http://blogs.msdn.com/b/codeanalysis/archive/2010/04/14/data-flow-analysis-rules-in-visual-studio-2010.aspx)其中解释了CC2241 已经使用新的数据流分析引擎 (Pheonix) 重新实现，果然我能够使用 dotPeek 找到方法。不幸的是，我找不到新的 DFA 引擎的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:48:54.430

一旦超过 3 个替代值，您只会看到两个操作数的原因是目标正在调用`Format(string format, params object[] args)`String.Format 的重载。如果您想知道传递了多少替代值，则需要检查`args`参数数组的大小。

Microsoft 提供的 FxCop 规则没有可用的源代码，也没有可用的规则 SDK。如果您想了解它们是如何构建的，则需要使用反编译器（就像几乎所有其他编写自定义规则的人一样）。

# jms - 使用 apache camel xml 路由，如何从 JMS 消息中设置自定义文件名？

> ID：12431610
> 
> 赞同：0
> 
> 时间：2012-09-14T20:33:53.350
> 
> 标签：jms, activemq, apache-camel

使用 java JMS API，我从数据库中得到一个字节数组，然后将它作为 javax.jms.BytesMessage 发送到 ActiveMQ。之后用骆驼我想把文件放在一个位置，

我在骆驼中有这条路线：

```
 <route>
        <from uri="activemq:queue.fileOuput"/>
        <convertBodyTo type="java.nio.ByteBuffer"/>
        <to uri="file://C:/output/"/>
    </route> 
```

但我的问题是我的文件在`c:\output\`目录中，我得到了带有消息 id 作为文件名的文件， `queue-preVerificacion-fileoutput-ID-jmachine-57401-1347652410053-0-1-1-1-1` 但是我想把我的名字放在数据库中，比如`MyFile.xml`.

我试图设置像fileName和file：name这样的消息属性，并且我在apache文档中看到我需要放置一个标题“org.apache.camel.file.name”，但是我不知道jms怎么做。

所以我的问题是如何在骆驼路线中放置自定义名称？

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T23:05:28.300

只需将文件名放在 jms 消息中（作为字符串属性）。

```
// Something like this if you send the message using plain java/jms:
msg.setStringProperty("filename","MyFile.xml");
..//Send msg 
```

然后你可以在骆驼中做这样的事情

```
<to uri="file://C:/output/?fileName=${header.filename}"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T05:19:51.333

您只需要设置“CamelFileName”标头值（基于消息标头等）

```
<route>
    <from uri="activemq:queue.fileOuput"/>
    <convertBodyTo type="java.nio.ByteBuffer"/>
    <setHeader headerName="CamelFileName">
        <constant>${header.fileName}</constant>
    </setHeader>
    <to uri="file://C:/output/"/>
</route> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-10T15:07:40.943

我认为“org.apache.camel.file.name”适用于骆驼 1.x，在 2.x 版本中 CamelFileName 工作正常。但我想要一个更动态的文件名，根据内容命名。这个使用处理器的例子运行良好（camel 2.18）

```
 <route>
    <from uri="MQ:MY_Q_NAME" />
    <process ref="MyMessageProcessor"/>
    <to uri="file://E:\OUTPUT" />
</route>

    Inside the Processor :     

exchange.getIn().setHeader(Exchange.FILE_NAME, myFileName); 
```

# java - 服务器上的 youtube 到 mp3 转换

> ID：12431615
> 
> 赞同：0
> 
> 时间：2012-09-14T20:34:16.847
> 
> 标签：java, youtube, ffmpeg, xuggle

我想知道这个站点如何如此快速地处理文件[youtube-mp3.org](http://www.youtube-mp3.org/)。我可以在不下载 flv 的情况下使用 xuggler 并转换为 mp3 吗？我可以在我的程序中使用[youtube-mp3.org](http://www.youtube-mp3.org/)以便从某个 youtube 链接下载 mp3 文件吗？我正在尝试在具有这些功能的 java 中制作服务器，我可以通过下载文件并转换为 mp3 来实现这一点，但这还不够快......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:05:34.563

我怀疑他们正在缓存转换，所以第一个发布 youtube 链接的人必须等待下载和转换，所有后续用户都会立即获得已经处理的文件。如果您的流量很大，则很可能有人已经请求了您之前请求的相同链接。

# sql - 两个日期时间之间的数据

> ID：12431619
> 
> 赞同：0
> 
> 时间：2012-09-14T20:34:34.543
> 
> 标签：sql, sql-server-2008, datetime

我正在努力解决工作中的这个问题。老实说，我什至不知道如何问这个问题。我想获得在同一时间发生的呼叫的峰值计数。

我尝试将日期范围分解为分钟（产生一个巨大的数据集）并计算在这些时间发生的呼叫计数，但计数已关闭（我减少了 10 倍），因为我知道总呼叫.

```
1 | 2012-01-01 01:15:00.000 | 2012-01-01 01:16:00.000
2 | 2012-01-01 01:14:00.000 | 2012-01-01 01:17:00.000
3 | 2012-01-01 01:18:00.000 | 2012-01-01 01:20:00.000 
```

在第一次通话日期时间范围内，发生了 2 次通话（本身和第 2 次通话）。与 2 相同。呼叫 3 在该日期时间范围内未发生呼叫。这非常简化，因为我们谈论的是一天中的日期时间范围，范围可能是几分钟或几秒钟。我需要找到每个月的高峰。所以对于这个例子，一月的峰值为 2（我不需要知道决定数字的日期范围）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:00:14.310

这是我的首选方式。它从呼叫开始或停止的所有时间列表开始，然后计算同时呼叫的数量：

```
with t as (
     select starttime as thetime, 1 as isstart, 0 as isend
     from calls
     union all
     select endtime, 0 as isstart, 1 as issend
     from calls
   ),
   t2 as (
     select thetime, row_number() over (order by thetime) as numcalls,
            isstart, isend,
            row_number() over (partition by isstart order by thetime) as cumstartsorends
     from t
    ),
   t3 as (
     select thetime,
            (case when isstart = 1 then cumstartsorends
                  else numcalls - cumstartsorends
             end) as numstarts,
            (case when isend = 1 then cumstartsorends
                  else numcalls - cumstartsorends
             end) as numends
      from t2
     )
select year(thetime) as yr, month(thetime) as mon,
       max(numstarts - numends) as maxcum
from t3
group by year(thetime), month(thetime) 
```

这个查询真正想做的是每次（开始时间或结束时间）的累积总和。但是，直到 2012 年才支持。

所以，它有一个技巧。它计算开始和停止的累积次数。但是，这些仅在开始时间或结束时间记录上。为了得到另一个值，它还计算总开始和停止，并减去这个值。因此，每个时间戳都有开始和停止的累积次数。区别在于并发调用的数量。

# ado.net - 使用脚本任务创建 ADO NET (ODBC) 数据流源

> ID：12431620
> 
> 赞同：1
> 
> 时间：2012-09-14T20:34:39.190
> 
> 标签：ado.net, ssis, pervasive-sql

我需要一些有关动态创建包的 SSIS 脚本任务 (SQL 2008 R2) 的帮助。我正在改进一个包，它将数据从 Sage Timberline（现在更名为 Sage 300）Pervasive SQL 环境复制到 SQL Server 数据仓库。我可以创建一个包来打开与 Timberline 的连接并将数据复制到 SQL Server 中的表中。问题是，对于林中的每个公司和 SQL 中的每个表，我都需要创建一个单独的数据流任务。考虑到三个 Timberline 公司文件夹和每个文件夹中的表格数量，这将花费大量时间来创建，并且维护和故障排除也很麻烦。

我正在尝试创建一个包，该包使用 Foreach 循环来创建一个包，该包创建一个 ADO/ODBC 源（Timberline）、一个 OLE 目标（SQL）并动态处理列映射。我在[这里](http://www.sqllion.com/2009/05/ssis-programming-basic/)找到了几乎可以满足我需要的代码。

我测试了这段代码，它在使用 OLE SQL 源和目标时效果很好。使这个脚本工作的原因是它动态地处理列映射。因此，如果您将其放入 100 个左右表的 Foreach 循环中，每个循环都可以动态创建数据流并映射列，然后执行新包。

我的问题是我只能使用 ODBC 连接到 Timberline。因此，我需要修改脚本以使用 ADO NET (ODBC) 而不是 OLE 创建源连接。我在试图弄清楚这一点时遇到了很多麻烦。有人可以帮我解决这个问题吗？

除了这种方法，我首先尝试了其他几件事：

解决方案：设置链接服务器到 Timberline Pervasive SQL
问题：SQL 服务器是 64 位的，而 Timberline 驱动程序是 32 位的。使用链接服务器会返回架构不匹配错误。我打电话给 Sage，他们说他们没有发布 64 位驱动器的计划。

解决方案：使用 SQL 传输任务之一
问题：仅适用于 SQL 数据库。此源是 Pervasive SQL 数据库

解决方案：使用“INSERT ... INTO ...”类型的脚本
问题：这需要一个链接服务器。看上面的问题

这是我需要帮助的[原始 VB .NET 代码部分：](http://www.sqllion.com/2009/05/ssis-programming-basic/)

```
'To Create a package named [Sample Package]
Dim package As New Package()
package.Name = "Sample Package"
package.PackageType = DTSPackageType.DTSDesigner100
package.VersionBuild = 1

'To add Connection Manager to the package
'For source database (OLTP)
Dim OLTP As ConnectionManager = package.Connections.Add("OLEDB")
OLTP.ConnectionString = "Data Source=.;Initial Catalog=OLTP;Provider=SQLNCLI10;Integrated Security=SSPI;Auto Translate=False;"
OLTP.Name = "LocalHost.OLTP"

'To add Load Employee Dim to the package [Data Flow Task]
Dim dataFlowTaskHost As TaskHost = DirectCast(package.Executables.Add("SSIS.Pipeline.2"), TaskHost)
dataFlowTaskHost.Name = "Load Employee Dim"
dataFlowTaskHost.FailPackageOnFailure = True
dataFlowTaskHost.FailParentOnFailure = True
dataFlowTaskHost.DelayValidation = False
dataFlowTaskHost.Description = "Data Flow Task"

'-----------Data Flow Inner component starts----------------
Dim dataFlowTask As MainPipe = TryCast(dataFlowTaskHost.InnerObject, MainPipe)
' Source OLE DB connection manager to the package.
Dim SconMgr As ConnectionManager = package.Connections("LocalHost.OLTP")

' Create and configure an OLE DB source component.
Dim source As IDTSComponentMetaData100 = dataFlowTask.ComponentMetaDataCollection.[New]()
source.ComponentClassID = "DTSAdapter.OLEDBSource.2"

' Create the design-time instance of the source.
Dim srcDesignTime As CManagedComponentWrapper = source.Instantiate()
' The ProvideComponentProperties method creates a default output.
srcDesignTime.ProvideComponentProperties()
source.Name = "Employee Dim from OLTP"

' Assign the connection manager.
source.RuntimeConnectionCollection(0).ConnectionManagerID = SconMgr.ID
source.RuntimeConnectionCollection(0).ConnectionManager = DtsConvert.GetExtendedInterface(SconMgr)
' Set the custom properties of the source.
srcDesignTime.SetComponentProperty("AccessMode", 0)
' Mode 0 : OpenRowset / Table - View
srcDesignTime.SetComponentProperty("OpenRowset", "[dbo].[Employee_Dim]")
' Connect to the data source, and then update the metadata for the source.
srcDesignTime.AcquireConnections(Nothing)
srcDesignTime.ReinitializeMetaData()
srcDesignTime.ReleaseConnections() 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T23:07:38.820

如果您需要在源和目标之间进行派生列转换，这里的 C# 代码就是您所需要的...

[http://bifuture.blogspot.com/2011/01/ssis-adding-derived-column-to-ssis.html](http://bifuture.blogspot.com/2011/01/ssis-adding-derived-column-to-ssis.html)

为了使源和目标连接正常工作，这里有一些秘诀可以让 COM 和 .Net 之间的工作正常... [http://blogs.msdn.com/b/mattm/archive/2008/12/30/api -sample-ado-net-source.aspx](http://blogs.msdn.com/b/mattm/archive/2008/12/30/api-sample-ado-net-source.aspx) 也有一个类似的页面显示如何处理 OleDB 连接。

创建源表很容易。应使用 GetSchema("MetaDataCollections") 检索可访问的可用 ODBC 元数据集合。这将返回可用于该特定 ODBC 驱动程序的可用架构集合的列表。接下来，您将希望查看从 GetSchema("DataTypes") 返回的数据类型，以便您可以正确解释从 GetSchema("Columns") 检索到的每一列的数据类型，以使您的 SQL Server 创建表脚本（我'我假设你已经完成了）。为了至少找出哪些表具有主键，您需要遍历从 GetSchema("Tables") 返回的每个表，以便使用 GetSchema("Indexes")。有一个错误要求您一次查询一个表的索引。

我所做的是将 Tables 和 Columns 集合放入我的父 SSIS 包中的对象变量中。因为 Timberline 非常快（不是），所以将所有列拉下来并在本地过滤它们似乎更有效……如果需要，我这样做是为了在 SQL Server 中创建表。

完成后，再次使用 Tables 的本地副本在“设计模式”中的脚本任务中操作 SSIS 包（更改源和目​​标目标表，并重做列映射），并执行现在在内存中的 SSIS包裹。

对我来说，花了一段时间才弄清楚。以上两个 URL 都是必需的。我找到并将 .Net 2.0 Dts.PipelineWrap 和 Dts.RuntimeWrap .dll 复制到 Microsoft.Net\FrameworkV2.0xxxxx 文件夹，然后在每个想要使用它们的脚本任务中引用这些，然后再设置我的“使用 DtsPW = Microsoft.SqlServer .Dts.Pipeline.Wrapper”等

值得注意的是，由于 Timberline 是 32 位 ODBC，我认为有必要构建 SSIS 包以使用“X86”，并将脚本任务定位为使用 .Net 2.0 框架。

我使用派生列代码是因为我需要将多个 Timberline 数据库复制到一个 SQL Server 数据库中。派生列将“CompanyID”值添加到 SQL Server 的输出管道。

最后，根据目标附加到的管道，将目标的虚拟输入列映射到其外部元数据列：

```
 foreach (DtsPW.IDTSVirtualInputColumn100 vColumn in destVirtInput.VirtualInputColumnCollection)
            {
                var vCol = destInst.SetUsageType(destInput.ID, destVirtInput, vColumn.LineageID, DtsPW.DTSUsageType.UT_READWRITE);
                destInst.MapInputColumn(destInput.ID, vCol.ID, destInput.ExternalMetadataColumnCollection[vColumn.Name].ID);

            } 
```

无论如何，该代码在 bifuture.blogspot.com 页面的上下文中会更有意义。

EzApi 库也可以帮助解决这个问题，但它的 AdoNet 连接源被编码为虚拟类，因此您需要实现特定的类才能使用。我的 C# 功夫在我有的时候还不够强大...

此外，CozyRoc 出售带有自定义 SSIS 控件（数据流源和目标控件...）的工具集，看起来它也可以在输入到输出列映射时执行此操作。

我的包现在似乎工作得很好......哦，还有一个，我没有运气尝试使用无 DSN 的 ODBC 连接到 Timberline，只是： Dsn=dsnname;Uid=user;Pwd=pwd;

在 64 位土地上运行的 SSIS 包在 64 位操作系统上看不到 32 位 DSN，似乎……至少，它对我不起作用（win7-64、32 位文本 ODBC DSN）。

# wpf - 如何在 WPF 中使用标注调整工具提示的位置

> ID：12431621
> 
> 赞同：1
> 
> 时间：2012-09-14T20:34:44.387
> 
> 标签：wpf, tooltip, placement

我正在自定义用户控件上的工具提示，使其看起来像标注。工具提示设置为显示在控件上方 (Placement=Top)，并带有一个向下指向它的箭头。

问题是当控件靠近屏幕边缘时，工具提示未与控件的左侧对齐。因此，箭头指向控件左侧的空白区域。

更糟糕的是，如果控件位于屏幕顶部附近，工具提示会显示在目标控件下方，并且箭头指向下方。

知道如何解决这个问题吗？我正在寻找某种方式以编程方式即时创建工具提示或设置触发器以根据工具提示中的某些属性选择样式，但我不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:38:55.387

我过去也遇到过同样的问题，我所做的是通过调用相同的方法来获取`PlacementTarget`通孔`PointToScreen(new Point(0,0))`的位置并获取通孔的位置，`ToolTip`然后进行数学运算以确定是否`ToolTip`正确定位。如果不是，那么我根据它是否显示在左侧、右侧、上方或下方来更改`Placement`. 另外，请记住，这仅在渲染后才有效，因此将处理程序附加到并在那里执行。希望这有帮助。如果您遇到更有效/更好的方法来解决此问题，请告诉我。`ToolTip``PlacementTarget``PointToScreen()``ToolTip``ToolTip.Open`

# asp.net-mvc-3 - ASP.NET MVC 部署问题

> ID：12431625
> 
> 赞同：0
> 
> 时间：2012-09-14T20:35:03.180
> 
> 标签：asp.net-mvc-3, deployment, web-deployment

我一直在使用“Web Deploy”选项在 IIS 7.5 上的 Win 2k8 上部署 ASP.NET MVC 3.0。

在一个应用程序文件夹中，我有“CSV”文件夹，文件夹中的 CSV 模板文件很少。当我分解应用程序时，既不会在服务器上创建文件夹，也不会复制任何文件。

原因是什么，解决方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:38:12.700

1.  将您的文件移动到 Content 文件夹中（以避免默认路由出现问题）
2.  在解决方案资源管理器中选择它们
3.  右键单击并选择属性
4.  将构建操作更改为内容

完成这些步骤后，您的文件应该与您的应用程序一起部署。

# jquery - 内联编辑 jqGrid 时将附加 POST 数据（额外参数）传递给服务器的正确语法

> ID：12431628
> 
> 赞同：0
> 
> 时间：2012-09-14T20:35:25.537
> 
> 标签：jquery, post, jqgrid, inline-editing

我有一个 jqGrid 使用专门用于该网格的专用脚本进行内联编辑。我正在尝试组织和整合服务器脚本，所以现在我希望使用一个新脚本在服务器上进行内联编辑。要使用这个新脚本，我需要在编辑内联时向脚本传递一个额外的 POST 变量。我不知道如何在编辑内联时将其他数据发布到服务器。

通过表单编辑，我使用该`editData`属性将添加的 POST 数据包含在编辑表单中。我已经阅读了[jqGrid 文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3ainline_editing)，我可以通过`extraparams`参数传递附加的 POST 数据。我似乎无法正确使用语法。

这就是我所拥有的，但它不起作用：

```
$('#list').editRow(
        id,
        true,
        function(){
            $('input[name=customer]').autocomplete({source:customerlist});
            today = new Date();
            $('input[name=date]').val(today.getFullYear() + '-' + (today.getMonth()+1) + '-' + today.getDate());
        },
        extraparams={
            'arg1':'daily_folding_reports'
        }
    ); 
```

`list`网格的ID在哪里。添加自动完成的功能在 EDIT 上正确触发，但我没有`extraparams`正确合并。什么是正确的语法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:50:34.247

如果您使用[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)的位置形式，那么调用应该如下所示

```
$("#list").jqGrid('editRow', id,
    true,
    function () {
        $('input[name=customer]').autocomplete({source:customerlist});
        today = new Date();
        $('input[name=date]').val(today.getFullYear() + '-' +
            (today.getMonth()+1) + '-' + today.getDate());
    },
    null,
    null,
    { arg1: 'daily_folding_reports' }); 
```

我个人更喜欢[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)的另一种用法，它可以减少`null`参数的数量：

```
$("#list").jqGrid('editRow', id, {
    keys: true,
    oneditfunc: function () {
        $('input[name=customer]').autocomplete({source:customerlist});
        today = new Date();
        $('input[name=date]').val(today.getFullYear() + '-' +
            (today.getMonth()+1) + '-' + today.getDate());
    },
    extraparam: { arg1: 'daily_folding_reports' }
}); 
```

我发现表格更具可读性（例如，请参阅[答案](https://stackoverflow.com/a/10396691/315935)）。

# mysql - MySQL JOIN 用另一个表中的值替换 ID

> ID：12431636
> 
> 赞同：5
> 
> 时间：2012-09-14T20:36:10.497
> 
> 标签：mysql

假设我有一个包含各种类型的*编码表，例如：*

```
 ID  EncodingName
    ------------------
    1   UTF-8
    2   ISO-8859-1 
```

还有另一个*EncodingMapping*，它使用这些 ID 来跟踪要转换 From 和 To 的编码：

```
 ID  ItemId_FK  EncodingFromId_FK  EncodingToId_FK
    -------------------------------------------------
    1   45         2                  1  
    2   78         1                  2 
```

我想创建一个 SQL 语句，当 ItemId_FK = 45（例如）时创建以下结果：

```
 FromEncoding  ToEncoding
   -------------------------
   ISO-8859-1    UTF-8 
```

似乎它很简单，但我无法通过以这种格式返回单行来让 JOIN 工作。

到目前为止我所拥有的（这是错误的）：

```
 SELECT EncodingName As FromEncoding, EncodingName As ToEncoding
   FROM Encoding
   LEFT JOIN EncodingMapping As em
   ON Encoding.ID = em.EncodingFromId_FK OR Encoding.ID = em.EncodingToId_FK
   WHERE ItemId_FK = 45 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T20:41:23.320

关闭，但不是雪茄：

```
SELECT 
  FromEnc.EncodingName AS FromEncoding, 
  ToEnc.EncodingName AS ToEncoding
FROM EncodingMapping
INNER JOIN Encoding AS FromEnc
  ON FromEnc.ID=EncodingMapping.EncodingFromId_FK
INNER JOIN Encoding AS ToEnc
  ON ToEnc.ID=EncodingMapping.EncodingToId_FK
WHERE EncodingMapping.ItemId_FK = 45 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:42:16.360

您只需要双重加入同一个表：

```
SELECT from.EncodingName AS FromEncoding,
  to.EncodingName AS ToEncoding
FROM EncodingMapping AS m
LEFT JOIN Encoding AS from ON m.EncodingFromId_FK=from.ID
LEFT JOIN Encoding AS to ON m.EncodingToId_FK=to.ID
WHERE ItemId_FK=45 
```

作为注释，包括`_FK`简单 ID 列的扩展似乎有点多余。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:42:33.123

你的意思应该有两个连接。一个用于“FromEncoding”，另一个用于“ToEncoding”。

像这样：

```
Select  FromEncoding.Title
,   ToEncoding.Title
    From    EncodingOrder
    Inner   Join
        Encoding        As  FromEncoding
    On  FromEncoding.Id     =   EncodingOrder.From_Encoding_Id
    Inner   Join
        Encoding        As  ToEncoding
    On  ToEncoding.Id       =   EncodingOrder.To_Encoding_Id 
```

干杯

# objective-c - 在创建的协议方法中作为参数传递的一些对象在哪里？

> ID：12431637
> 
> 赞同：0
> 
> 时间：2012-09-14T20:36:12.400
> 
> 标签：objective-c, cllocationmanager

我有点不清楚在某些Objective C协议方法中作为参数传递的一些对象是在哪里创建的。让我们看一下下面的代码，它是更新对象位置的 CLLocationManagerDelegate 的协议方法之一：

```
- (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"%@", newLocation);
    NSTimeInterval t = [[newLocation timestamp] timeIntervalSinceNow];

    if (t < -180) {
        return;
    }

    [self foundLocation:newLocation];

} 
```

我在这里的问题是关于 newLocation。根据 Apple 文档，newLocation 由 CLLocationManager 对象提供给该方法。但是这样的对象是在哪里创建的呢？这一切似乎都发生在某处的黑匣子中，然后自动传递给方法......或者我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:40:21.277

黑匣子正是该物体的来源。你不知道，也不在乎。CLLocationManager 的内部工作是私有的，因此应该被认为是易变的和不可知的。

一般来说，只要在方法的范围内正确处理参数，任何方法都不应该关心参数的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:40:06.093

好吧，如果“黑盒”是指“核心位置框架”，他们是的，这就是它的创建位置。调用者（在这种情况下为核心位置）通常会创建这种对象并将其传递给您。不过，在一般情况下，这对您来说并不重要。

# java - 访问由线程池运行的对象

> ID：12431639
> 
> 赞同：0
> 
> 时间：2012-09-14T20:36:24.477
> 
> 标签：java, multithreading, executors

对于我的程序，我使用 ConcurrentHashMap 来保存对多个正在运行的对象的引用。在我的服务器中，我有：

```
public class Server {

private ConcurrentHashMap<String, ChatRoom> _chatRooms;
private ExecutorService _chatRoomExecutor;
...

// create a new channel executor to handle 50 chatrooms
_chatRoomExecutor= Executors.newFixedThreadPool(50);
// create an admin chatroom for testing at this point
_chatRooms.put("/admin", new Channel("/admin"));
// execute that chatroom
_chatRoomExecutor.execute(_chatRooms.get("/admin")); 
```

这会起作用吗，因为我仍然可以从 ConcurrentHashMap 访问聊天室，还是我必须对线程池做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:51:10.743

> 这会起作用吗，因为我仍然可以从 ConcurrentHashMap 访问聊天室，还是我必须对线程池做些什么？

是的，您的代码应该可以正常工作。 **但是**，您需要确保正确同步对象中的字段，因为线程池线程可以从它们的方法`ChatRoom`访问它们，也可以通过*从*. 这将是你的挑战。`run()``ConcurrentHashMap`

# xcode - 如何捕获 OSX 的所有正在运行的进程的列表并将它们保存为 Xcode/Cocoa 中的文件？

> ID：12431643
> 
> 赞同：5
> 
> 时间：2012-09-14T20:36:49.717
> 
> 标签：xcode, macos, cocoa

我想为 OSX 捕获所有正在运行的进程的列表，并将它们保存为 Xcode/Cocoa 中的文件。我用谷歌搜索了这个，我发现的是：

[myWorkspace runningApplications];

我不知道该怎么做。请帮忙！谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T23:00:47.233

正如[QA1123](http://developer.apple.com/legacy/mac/library/#qa/qa2001/qa1123.html)中所解释的，“进程”意味着 Mac 上的多个不同事物（并且随着时间的推移而变化）。

Cocoa（或 Carbon，或从前经典）级别的“流程”基本上是最终用户认为的流程：应用程序、fba、launchitem 等。 BSD 是受过 Unix 培训的系统管理员所认为的进程：出现在`ps`. 一个高级进程可以有多个 BSD 进程；反过来也可以（在经典下）；您还可以拥有没有高级进程的 BSD 进程；等等

如果您想要高级定义，请忘记 QA，`-[NSWorkspace runningApplications]`您提到的方法会返回您想要的内容：一个包含每个此类应用程序的对象的数组，并且这些对象包含您想要的所有信息。如何将它们保存在文件中取决于您想要关于每个应用的哪些信息、您希望以什么格式保存该信息等。这是一个完整的示例应用程序，它将每个应用程序的 URL（每行一个）保存到文件中称为“./appslist”：

```
#include <Cocoa/Cocoa.h>

int main(int argc, char *argv[]) {
  NSString *output = [NSString string];
  for (NSRunningApplication *app in 
       [[NSWorkspace sharedWorkspace] runningApplications]) {
    output = [output stringByAppendingFormat:@"%@\n",
                     [[app bundleURL] absoluteString]];
  }
  [output writeToFile:@"./appslist" 
           atomically:YES
             encoding:NSUTF8StringEncoding
                error:NULL];
  return 0;
} 
```

如果您想要低级定义，那么 QA 中的代码仍然是准确的。或者你可以只是`exec`(or `system`or `NSTask`) `ps`。

无论如何，这里有一个示例（使用来自 QA 的代码）将每个正在运行的进程的 pid 打印到名为“./bsdlist”的本地文件中：

```
int main(int argc, char *argv[]) {
  kinfo_proc *procs;
  size_t count;
  int err = GetBSDProcessList(&procs, &count);
  if (err) return err;
  FILE *f = fopen("./bsdlist", "w");
  for (size_t i=0; i!=count; ++i) {
    fprintf(f, "%d\n", procs[i].kp_proc.p_pid);
  }
  fclose(f);
  free(procs);
} 
```

如果您喜欢脚本的想法，`ps`如上所述，有很多方法可以做到这一点。

Dominik 的回答中提到的`DDTask`库看起来是最简单的方法。如果你想`NSTask`直接使用，它需要更多的代码来设置一个`NSPipe`标准输出等。有一个很好的通用[CocoaDev](http://cocoadev.com/wiki/NSTask)（它是脚本`ls`而不是脚本`ps`，但想法都是一样的。）

或者你可以降到一个较低的水平。您可以显式地`fork`/`exec`并通过 stdout 传递结果，但是该`popen`函数旨在将所有这些都包装起来，并且使用起来要容易得多。[GNU C Programming Tutorial](http://crasseux.com/books/ctutorial/Programming-with-pipes.html)展示了如何将`popen` `ps -A`其通过管道传输到`grep init`; 这就是你所需要的前半部分。

无论你走哪条路，问题是你会得到一堆你必须解析的字符串。最好的办法是传递不同的标志来`ps`只得到你真正想要的。如果你想要的只是命令行，`ps -ax -ocommand=`那么只会给你一个命令行，每行一个命令行——没有要跳过的标题行，没有要解析的列，等等。

如果您担心效率：QA 说“执行 ps 将需要解析工具的输出，并且不会像清单 1 那样有效地使用系统资源。” 这是真的；将输出格式化`sysctl`为字符串只是为了将它们通过管道传递并再次解析它们是额外的工作，必须花费*一些*CPU 时间。但除非你这样做数百万次，否则我怀疑它是否足以产生影响。最好的方法（对此，以及大多数情况）是先编写更简单的代码并测试它是否足够快；如果是，你就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:13:21.267

yip 获取高级查询工作区，如 abarnet 所示，以获取“所有”进程进入较低级别并通过 NSTask 执行 ps 并通过 NSPipe 读取响应。

有苹果的示例代码..或使用 DDTask（我写的一个包装器）[github存储库](https://github.com/Daij-Djan/DDUtils/tree/master/model/DDTask%20%5Bosx%5D)

```
NSString *exe = @"/bin/ps";
NSArray *args = @[@"-ax"];
NSString *res = [DDTask runTaskWithToolPath:exe andArguments:args andErrorHandler:nil];

[res writeToFile:@"./appslist" 
      atomically:YES
        encoding:NSUTF8StringEncoding
           error:NULL]; 
```

# android - 无法在 Android 的表格单元格中对齐 ImageView

> ID：12431647
> 
> 赞同：1
> 
> 时间：2012-09-14T20:37:11.720
> 
> 标签：android, android-tablelayout

好的，这是关于在 Android 中的表中定位对象的另一个问题，但我在 Stack 上发现的任何内容都没有帮助。

我希望`ImageView`下面的 XML 在其单元格中左对齐。但是，无论我尝试了什么，它都不会这样做（它总是居中）。和设置为控制单元格本身的位置和大小`layout_width`。`layout_weight`不过，也许这些设置使得无法`ImageView`在其单元格中左对齐。

`android:layout_gravity="left"`并且`android:gravity="left"`在 ImageView 标记或 TableRow 标记中都不起作用。一种似乎可行的 kludgy 解决方案是在第三列中添加一个空白 TextView，以强制保存 ImageView 的第二列正好是`ImageView`位图的宽度。但是，我不想这样做，特别是因为不同的行可能包含不同宽度的位图。

```
<TableLayout
     android:id="@+id/scoreTable"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true" >

     <TableRow
         android:id="@+id/thisWeek"
         android:layout_width="wrap_content"
         android:layout_height="fill_parent" >

         <TextView
             android:id="@+id/thisWeekText"
             android:layout_width="0px"
             android:layout_height="30dp"
             android:layout_weight="35"
             android:gravity="right"
             android:paddingRight="30px"
             android:text="@string/thisWeek"
             android:textStyle="bold" />

         <ImageView
             android:id="@+id/chevron1"
             android:layout_width="0px"
             android:layout_height="20dp"
             android:layout_weight="65"
             android:layout_marginLeft="0px"
             android:src="@drawable/doser_scale4a"
             android:visibility="visible" />

     </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:49:51.003

我使用 TextViews 中文本的位图将 TextViews 替换为 ImageViews。这对我来说没问题，因为该文本不会改变，但我想如果它改变了，我可以为所有可能的文本创建图像并在这些图像之间切换。

这不是一个理想的解决方案，因为我假设使用位图而不是文本会占用更多内存，并且为我的文本制作位图需要一些时间和精力，并且会牺牲更改文本的易用性和灵活性，如果在某些时候需要的话，但我不知道如何使用 TextViews 进行这项工作。Android 显然在这种方式上受到了限制，因为在表格单元格中以任何方式对齐文本应该不难，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T05:47:44.973

TableRow 的每个“单元格”都是一个视图，因此您可以放置​​一个 LinearLayout（具有您喜欢的重力）并将您的图像放入此 LinearLayour 中。

# php - 将数据分配给jquery中的变量

> ID：12431649
> 
> 赞同：0
> 
> 时间：2012-09-14T20:37:28.110
> 
> 标签：php, jquery

我有这个代码，

```
$(function() {
    //var asd = '<?php $regions_list_full; ?>';
    var projects = [
        {
            value: "jquery",
            label: "jQuery",
            desc: "the write less, do more, JavaScript library",
            //icon: "jquery_32x32.png"
        },
        {
            value: "jquery-ui",
            label: "jQuery UI",
            desc: "the official user interface library for jQuery",
            //icon: "jqueryui_32x32.png"
        },
        {
            value: "sizzlejs",
            label: "Sizzle JS",
            desc: "a pure-JavaScript CSS selector engine",
            //icon: "sizzlejs_32x32.png"
        }
    ];

    $( "#find" ).autocomplete({
        minLength: 0,
        source: projects,
        focus: function( event, ui ) {
            $( "#find" ).val( ui.item.label );
            return false;
        },
        select: function( event, ui ) {
            $( "#find" ).val( ui.item.label );
            //$( ".module h1" ).val( ui.item.value );
            $(":header.title").html(ui.item.value);
            //$( "#project-description" ).html( ui.item.desc );
            //$( "#project-icon" ).attr( "src", "images/" + ui.item.icon );

            return false;
        }
    })
    .data( "autocomplete" )._renderItem = function( ul, item ) {
        return $( "<li></li>" )
            .data( "item.autocomplete", item )
            .append( "<a>" + item.label + "<br>" + item.desc + "</a>" )
            .appendTo( ul );
    };
    }); 
```

实际上这是来自 的自动完成`jQueryUI`，并且我有一个从数据库中获取的值数组。我想要的是将我的值替换为`var projects =[{value:asd}]`这样的值，以便我对自动完成的建议将是数据库中的数据。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:54:59.563

您不想使用`source: projects` 您可能想使用这样的 AJAX 调用为源定义一个函数

```
$( "#search_address" ).autocomplete({
    source: function( request, response ) {
        $.ajax({
            url: '/path/to/script',
            dataType: 'json',
            data: 'whatever you need here', // i.e. term value
            dataFilter: function (data, type) {
                // do whatever you need to here to change data into proper autocomplete array format
                // if JSON data is already in correct format you can just do this.
                response($parseJSON.(data));
            },
            error: function(XMLHttpRequest, textStatus, errorThrown) {
                // handle error here
            },
            success: function(data) {
                // maybe check for case of empty data object here (i.e. successful URL request, but no data returned)
                return data;
            }
        });
    }
}); 
```

现在，您通常希望限制 API 返回的结果数量（最多可能 10 或 20 条记录），因为在自动完成中显示 1000 个项目可能是一种糟糕的 UI 体验。在良好的自动完成中，输入几个字母后结果的数量应该会显着减少。这也使您的脚本执行得更好，因为您只处理少数返回的记录。出于同样的原因，您可能还想使用 的`minLength`属性，`autocomplete`甚至在输入 X 个字符之前都无需启动请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:44:58.453

jQuery 自动完成将向您在 url 中提供的`source:`url 发送一个查询字符串，这个查询字符串会`term` 记住这一点，因为我不认为自动完成文档告诉您，然后从那里您使用术语 querysting 来查询数据库并发回以 term 开头的项目，您不会请求数据库中的每一行并将它们存储在 javascript 变量中，这没有意义 - 如果数据库中有 2,000,000 个条目怎么办？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:40:47.580

改变

`source: projects,`

至

`source: url_to_script`

形成您将发送 json 的脚本。请参阅***[此示例](http://jqueryui.com/demos/autocomplete/#remote)***。`source`如果您查看源代码，您会在他们使用的属性中看到`source: search.php`.

同样，您可以使用自己的脚本路径并从该脚本返回一个 json 数据，该数据将来自服务器。

# python - Python：可以在“if”之前评估“elif”吗？

> ID：12431656
> 
> 赞同：2
> 
> 时间：2012-09-14T20:38:06.877
> 
> 标签：python, if-statement, python-2.6

我正在使用 Python 2.6，并且很难理解为什么以下代码在它被抛出的位置抛出一个 IndexError。当将此版本的 Porter Stemmer 合并到 Web 服务中时，会发生错误（非常少见）。

该代码涉及一系列“if-elif-elif-else”语句，用于检查一系列场景的输入词的索引。请注意，self.k 是一个整数值（占位符），self.ends(val) 返回 0 或 1。

```
if self.b[self.k - 1] == 'a':
    if self.ends("al"): pass
    else: return
elif self.b[self.k - 1] == 'c':
    if self.ends("ance"): pass
    elif self.ends("ence"): pass
    else: return

...additional "elifs" appear here, but none modify self.b or self.k ...

elif self.b[self.k - 1] == 's':
    if self.ends("ism"): pass
    else: return 
```

但是，很少（输入是高度可变的），“elif”语句之一会引发 IndexError。例如：

```
line 290, in step4
elif self.b[self.k - 1] == 's':
IndexError: string index out of range 
```

我无法理解的是为什么对“elif”的评估会抛出 IndexError 而不是最初的“if”语句？我还没有关于什么输入引发错误的数据（同样，这种情况非常罕见）。词干分析器也有可能收到某种类型的“坏”输入......关于 Python if-elifs，我有什么遗漏/应该注意的吗？（我知道“elif”不能在“if”之前......）。

谢谢，如果我可以提供任何其他信息，请告诉我。

另外，如果您对（大部分）完整代码感兴趣，我正在使用它的修改版本：[http](http://tartarus.org/~martin/PorterStemmer/python.txt) ://tartarus.org/~martin/PorterStemmer/python.txt ，但我不这么认为与我的问题有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:42:20.247

如果没有其他人在修改 self.b 或 self.k，那么一遍又一遍地检查它有什么意义呢？将其存储在第一个 if 之前的变量中，并使用它：

```
c = self.b[self.k - 1]
if c=='a': ...
elif c=='c': ... 
```

现在，如果其他人在另一个线程*中*修改 self.b 或 self.k，你应该在你的第一个 if 之前将它存储在一个变量中，并使用它：

```
c = self.b[self.k - 1]
if c=='a': ...
elif c=='c': ... 
```

# desire2learn - D2L 用户密码要求

> ID：12431659
> 
> 赞同：1
> 
> 时间：2012-09-14T20:38:19.683
> 
> 标签：desire2learn, change-password

通过 Valence API 设置用户的 D2L 密码时，是否有任何硬密码要求？

通过反复试验，我们发现最少 8 个字符，这与 GUI 中的消息相匹配：“密码长度必须在 8 到 50 个字符之间。”

这是唯一的硬性要求还是还有其他要求？（字母数字、大写、无重复等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:48:18.703

后端学习服务的站点管理员可以使用 Auth>Password 设置集群中的 DOME 变量指定有效密码必须采用的形式（包括允许的字符、长度等）。配置的验证规则不会通过 Learning Framework API 公开，因此您需要询问您的站点管理员密码是否对其形式有任何规则。

如果您尝试 API 调用来更新用户的密码，并且提供的密码具有无效的形式，则服务将响应无效请求 (400) 错误，但您可能不会获得有关哪种形式*将*是有效的。

因此，如果您正在编写移动客户端应用程序，您的应用程序可能会告诉用户“联系 LMS 系统管理员以获取有关有效密码的更多信息”或类似内容。

# process - 使用 C# 进程启动 .exe 与直接运行 .exe 产生不同的结果

> ID：12431660
> 
> 赞同：1
> 
> 时间：2012-09-14T20:38:33.630
> 
> 标签：process, tfsbuild, startprocessinfo

我有一个在 TFS 2010 Build 中运行的自定义工作流活动，它使用`Process`和`ProcessInfo`类来启动一个自定义`.exe`，该自定义为我们的单元测试托管 WCF 服务。

当自定义 .exe 从我使用`Process`和`ProcessInfo`类启动它的工作流活动运行时，它没有任何作用，并且我的单元测试没有通过。但是，如果我直接使用`.bat`构建服务器上的文件启动该过程，则所有测试都可以正常通过。

`Process`从.Net 中的类运行进程与直接使用 .bat 文件运行它有区别吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-22T22:54:26.583

我弄清楚我做错了什么。当我从 .bat 文件运行托管 WCF 服务的自定义 .exe 时，我明确地对自定义 .exe 的工作目录执行了“cd”。但是在我的 C# 自定义工作流活动中，我没有在 ProcessInfo 类型上设置工作目录。一旦我这样做了，它就会完美地工作！感谢您的意见。

# c# - 只需将 xaml 文件复制到 clob 中。为什么不工作

> ID：12431661
> 
> 赞同：0
> 
> 时间：2012-09-14T20:38:34.237
> 
> 标签：c#, xaml, clob

我需要将 one.xaml 文件的内容复制到一个字节 clob 中。这是我的代码。看起来我没有访问此文件的内容。谁能告诉我为什么。我是 C# API 的新手，但我是一名程序员。选择 4000 是因为最大字符串大小限制，以防万一有人想知道。我可能有关于 zies 等的错误。但主要是我想将 thje xaml 文件的内容放入 clob 中。谢谢。

```
 string LoadedFileName = @"C:\temp2\one.xaml";//Fd.FileName;
             byte[] clobByteTotal ;
             FileStream stream = new FileStream(LoadedFileName, FileMode.Open, FileAccess.Read, FileShare.ReadWrite);
             if (stream.Length % 2 >= 1)
             {
                  clobByteTotal = new byte[stream.Length + 1];
             }
             else clobByteTotal = new byte[stream.Length];
             for (int i = 0; i <= stream.Length/4000; i++)
             {   
                 int x = (stream.Length / 4000 == 0) ? (int)stream.Length : 4000;
                 stream.Read(stringSizeClob, i*4000, x);
                 String tempString1 = stringSizeClob.ToString();
                 byte[] clobByteSection = Encoding.Unicode.GetBytes(stringSizeClob.ToString());
                 Buffer.BlockCopy(clobByteSection, 0, clobByteTotal, i * clobByteSection.Length, clobByteSection.Length);
             } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:45:01.477

如果您只需要将文本文件的内容读入字节数组，就可以这样做

```
string xamlText = File.ReadAlltext(LoadedFileName );
byte[] xamlBytes = Encoding.Unicode.GetBytes(xamlText); //if this is a Unicode and not UTF8

//write byte data somewhere 
```

这个更短的选项自然适用于不太大的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:51:26.857

有什么理由不使用[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)吗？

```
byte[] xamlBytes = File.ReadAllBytes(path); 
```

# symfony - 如何使用 QueryBuilder 在 andWhere 子句中执行 php 循环？

> ID：12431663
> 
> 赞同：0
> 
> 时间：2012-09-14T20:38:51.293
> 
> 标签：symfony, doctrine-orm, query-builder

我想在我的 FakeRepository.php 中使用 QueryBuilder 执行这种类型的查询（它用于用户可以选中某些框的搜索表单）。

```
 if (sizeof($p['types']) > 0) {
         $qb->andWhere(  
               foreach ($p['types'] as $type_id) 
                    {'type.id=' .$type_id.' OR ' }
               '1=0');
         } 
```

但是我的语法有错误，但我不知道如何解决它：

```
Parse error: syntax error, unexpected T_FOREACH, expecting ')' in /MyBundle/Entity/FakeRepository.php 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:00:01.263

您需要先构建 OR 条件，然后将其传递给查询生成器

```
 $first = true;
   $orQuery = '';
   foreach ($p['types'] as $type_id) 
       if ($first) {
           $first = false;
       } else {
           $orQuery .= ' OR ';
       }

       $orQuery .= 'type.id=' .$type_id;
   }
   $qb->andWhere($orQuery); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-25T11:20:04.043

你也可以解决这个问题：

```
$arr = array();
foreach ($p['types'] as $type_id){
    $arr[] = $qb->expr()->orX("type.id = $type_id");
}
$qb->andWhere(join(' OR ', $arr)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-30T11:56:42.410

保留 QueryBuilder 功能的另一种解决方案

```
$orX = $qb->expr()->orX();

foreach ($types as $key => $type) {
        $orX->add($qb->expr()->eq('types', ':types'.$key));
        $qb->setParameter('types'.$key, $type->getId());
    }

$qb->andWhere($orX); 
```

# php - POST 到 PHP 与服务器发送的事件？

> ID：12431665
> 
> 赞同：6
> 
> 时间：2012-09-14T20:38:55.207
> 
> 标签：php, ajax, post, polling, server-sent-events

是否可以像在 Ajax 中一样使用 SSE 将 POST 数据发送到 PHP？

我现在使用 AJAX 已经有一段时间了，但在长轮询技术中结果很糟糕。我也一直在考虑WebSockets，但似乎有点多余。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-01T19:10:15.923

不，SSE 不能向服务器发送任何数据。

您仍然可以使用 SSE 实时读取数据并使用 AJAX 上传任何数据（您可能需要一个共享数据库在 AJAX 接收进程和 SSE 发送进程之间传递信息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T01:13:02.017

您可以通过 GET 发送数据。

例如

```
name=john&name=lea 
```

这是一个简单的脚本，它使用 SSE 向服务器发送迭代次数和服务器返回进度。

该项目由两个文件（index.php 和 ssedemo.php）组成。

*index.php*包含一个文本框和一个按钮。文本框假设包含 ssedemo.php 中循环的迭代次数

```
 <h2>Server Sent Event Test</h2>
    <form>
        <label>Process Duration</label>
        <input type="text" id="progVal">
        <input type="button" value="Get Messages" onclick="updateProgress()"/>
    </form>
    <div id="container">
    </div> 
```

*更新进度*

```
 function updateProgress() {
        var input = $('#progVal').val();
        var evtSource = new EventSource("ssedemo.php?duration=" + encodeURIComponent(input));
        evtSource.addEventListener("progress", function (e) {
            var obj = JSON.parse(e.data);
            $('#container').html(obj.progress);
            if(  parseInt(obj.progress) == 100){
                evtSource.close();
            }
        }, false);
    } 
```

此函数使用 jQuery 获取文本框的内容，然后创建一个[eventSource](https://developer.mozilla.org/en-US/docs/Web/API/EventSource)。EventSource() 构造函数接受一个或两个参数。第一个指定要连接的 URL。第二个以 EventSourceInit 字典的形式指定设置（如果有）。

您可以通过将其添加到 URL 来传递您想要的内容，就像使用 GET 一样。

> `"ssedemo.php?duration=" + encodeURIComponent(input)`

在服务器端，您必须根据[W3C 建议设置标头类型并禁用缓存](http://www.w3.org/TR/2011/WD-eventsource-20110208/)

```
header("Content-Type: text/event-stream");
header("Cache-Control: no-cache"); 
```

然后你像往常一样使用 $_GET 获取数据。

```
$TotalNo = $_GET['duration'];
for ($i = 1; $i <= $TotalNo; $i++) {
    updateProgress($i, $TotalNo);
    sleep(1);
}

function updateProgress($currentVal, $totalNo) {
    $completionPrecentage = $currentVal / $totalNo * 100;
    echo "event: progress\n";
    echo 'data: {"progress": "' . $completionPrecentage . '"}';
    echo "\n\n";
    ob_flush();
    flush();
} 
```

如果你想发送数组你可以参考[这个](https://stackoverflow.com/questions/7206978/how-to-pass-an-array-via-get-in-php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-19T18:03:56.690

EventSource API 不支持 POST 方法，但这并不意味着您不能将 SSE 与 POST 一起使用。您只是不能使用 EventSource API。然而，有替代的实现。一个示例是[sse.js](https://github.com/mpetazzoni/sse.js)，它允许您指定有效负载，如果需要，还可以指定标头。sse.js 应该是 EventSource 的替代品，例如：

```
var source = new SSE("get_message.php");
source.onmessage=function(event)
{
    document.getElementById("message-window").innerHTML+=event.data + "<br>";
}; 
```

为了使用 POST 方法，您只需要指定一个有效负载，例如：

```
var source = new SSE("get_message.php", {payload: 'Hello World'}); 
```

而且，由于它是一个完全兼容的 polyfill，你可以这样做：

```
EventSource = SSE;
var source = new EventSource("get_message.php", {payload: 'Hello World'});
source.onmessage=function(event)
{
    document.getElementById("message-window").innerHTML+=event.data + "<br>";
}; 
```

# java - 在activity和mapActivity之间切换+进入位置设置

> ID：12431667
> 
> 赞同：0
> 
> 时间：2012-09-14T20:39:10.820
> 
> 标签：java, android, google-maps, android-activity, map

您好，再次感谢您的回答，但这不是我想要的

这是我单击按钮时出现的错误

45.266：I/Process(442)：发送信号。PID：442 SIG：9

这是按钮点击的代码

```
public void onClick(View v) {

     gps = new NetworkSettings();

     Log.d("error on click ", "here  is the error in the onclick method ");

     if(isGPSEnabled)
     {
     // Log.d("error on click ", "here  is the error in the if statement ");

      Intent intent = new Intent(this, AndroidGoogleMapsActivity.class);
        mContext.startActivity(intent);
     }

     Log.d("error on click ", "here  is the error out the if statement ");

         gps.showSettingsAlert();

} 
```

这是 showSettingsAlert() 方法

public void showSettingsAlert() { alertDialog = new AlertDialog.Builder(mContext);

```
 Log.d("error on click ", "here  is the error inthe top of the method ");

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog
            .setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(
                            Settings.ACTION_LOCATION_SOURCE_SETTINGS);
                    mContext.startActivity(intent);

                }
            });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel",
            new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                }
            });

    // Showing Alert Message
    alertDialog.show();
} 
```

我知道错误出现在单击按钮中，但我不知道它是什么以及如何修复它，所以请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:47:59.753

寻找它......它可以给你任何想法......

```
 public Location getLocation() {
    //android.os.Debug.waitForDebugger();
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (isNetworkEnabled) {
            this.canGetLocation = true;
            locationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
            Log.d("Network", "Network");
            if (locationManager != null) {
                location = locationManager
                        .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                if (location != null) {
            //      locationManager.removeUpdates(GPSTracker.this);
                    latitude = location.getLatitude();
                    longitude = location.getLongitude();

                }
        //  }
        }

        }
        else if (isGPSEnabled){
            // if GPS Enabled get lat/long using GPS Services
            this.canGetLocation = true;
                locationManager.requestLocationUpdates(
                        LocationManager.GPS_PROVIDER, MIN_TIME_BW_UPDATES, MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("GPS Enabled", "GPS Enabled");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                    if (location != null) {
                    //  locationManager.removeUpdates(GPSTracker.this);
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();

                }
            }
        }
        else{
            //return location;
            this.canGetLocation = false;
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:23:43.733

```
Intent intent = new Intent();
intent.setClass(AndroidGPSTrackingActivity.this, mapslayout.class);
startActivity(intent); 
```

显现：

```
<uses-library
android:name="com.google.android.maps"
android:required="true" /> 
```

像这样使用，错误将得到解决。

# ios - NSFetchedResultsController 在更新后看不到新的插入/删除获取的值

> ID：12431670
> 
> 赞同：9
> 
> 时间：2012-09-14T20:39:27.490
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

在阅读了几十个类似的问题之后，我想从这句话开始：“我确实设置了 NSFetchedResultsController 的委托，它没有工作。”。

所以我有一个简单的 TableViewController，它的单元格中充满了 NSFetchedResultsController。这是 FRC 初始化代码：

```
@property (strong, nonatomic) NSFetchedResultsController *frc;

...

- (NSFetchedResultsController *)frc
{
    if (!_frc)
    {
        NSError *error = nil;
        NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:e_product];
        request.sortDescriptors = [NSArray arrayWithObjects:
                               [NSSortDescriptor sortDescriptorWithKey:@"product_group.product_group_name" ascending:YES],
                               [NSSortDescriptor sortDescriptorWithKey:f_product_name ascending:YES],
                               nil];
        _frc = [[NSFetchedResultsController alloc] initWithFetchRequest:request managedObjectContext:[DTGGlobalSettings sharedInstance].moc sectionNameKeyPath:@"product_group.product_group_name" cacheName:nil];
        _frc.delegate = self;
        [_frc performFetch:&error];
        if (error)
        {
            NSLog(@"Error while fetching products: %@!", error.userInfo);
        }
    }

    return _frc;
} 
```

我还使用一些调试标签实现了 NSFetchedResultsController 委托方法：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    // The fetch controller is about to start sending change notifications, so prepare the table view for updates.
    NSLog(@"controllerWillChangeContent");
    [self.tableView beginUpdates];
}

- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath {

    UITableView *tableView = self.tableView;

switch(type) {

    case NSFetchedResultsChangeInsert:
        NSLog(@"didChangeObject - insert");
        [tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        NSLog(@"didChangeObject - delete");
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeUpdate:
        NSLog(@"didChangeObject - update");
        [self configureCell:[tableView cellForRowAtIndexPath:indexPath] atIndexPath:indexPath];
        break;

    case NSFetchedResultsChangeMove:
        NSLog(@"didChangeObject - move");
        [tableView deleteRowsAtIndexPaths:[NSArray
                                           arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
        [tableView insertRowsAtIndexPaths:[NSArray
                                           arrayWithObject:newIndexPath] withRowAnimation:UITableViewRowAnimationFade];
        break;
}
}

- (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id )sectionInfo atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type {

switch(type) {

    case NSFetchedResultsChangeInsert:
        NSLog(@"didChangeSection - insert");
        [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;

    case NSFetchedResultsChangeDelete:
        NSLog(@"didChangeSection - delete");
        [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
        break;
}
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
// The fetch controller has sent all current change notifications, so tell the table view to process all updates.
NSLog(@"controllerDidChangeContent");
[self.tableView endUpdates];
} 
```

在我的导航栏中，我有刷新按钮，它的功能是启动执行以下操作的产品目录方法： 1\. 从远程 MySQL 服务器获取产品 2\. 如果具有 ID 的产品不存在 - 创建它并填充所有fields 3\. 如果存在，则根据获取的值更新所有字段

在第 2 行和第 3 行之后，商店被保存。我对应用程序中的所有 CoreData 操作使用单个 NSManagedObjectContext。

当我第一次启动应用程序时，TVC 是空的，因为还没有获取任何产品。当我按下 Refresh 时，新产品被提取并插入到 ManagedObjectContext 中，但 NSManagedObjectContext 没有看到/听到任何变化：没有调用委托方法，因此没有新行添加到 TVC。当我重新启动应用程序时，新产品就位，可以毫无问题地提取到 TVC 中。

如果我在那里有一些产品时再次按下刷新按钮，在短暂的延迟后它们都会消失。一些调试告诉我，如果在更新实体的字段（实际上值是相同的）并保存存储之后发生。这次的委托方法就像一个魅力，对于每个更新和保存的实体控制器：didChangeObject:atIndexPath:forChangeType:newIndexPath 被调用 forChangeType = NSFetchedResultsChangeDelete。

问题 #1：为什么 NSFetchedResultsController 在没有应用重启的情况下看不到插入的实体？问题 #2：为什么 NSFetchedResultsController 将已获取的实体标记为“不存在”（？）并在存储保存后将它们从 TVC 中删除？

我将不胜感激任何帮助和想法，整个上周都在与这个问题作斗争；（

**UPD1（乔迪）：** 这里有一些细节。我使用自定义类 DTGGlobalSettings 在应用程序中共享一些变量。这就是我初始化它的 sharedInstance 属性的方式：

```
+(DTGGlobalSettings *)sharedInstance
{
    static DTGGlobalSettings *myInstance = nil;

    if (nil == myInstance)
    {
        myInstance = [[[self class] alloc] init];
        // set values here
        // try to acces MOC to init CoreData 
        [myInstance moc];        
        myInstance.baseURL = @"http://local.app/";
}
return myInstance;
} 
```

为了初始化 CoreData 堆栈，我使用了 Apple 文档中的一个示例，因为由于某种原因，在创建新项目时我没有看到“使用 CoreData”复选框。我确定我以前在 Xcode 中看到过它，但现在我没有；（（Xcode 4.4.1）：

```
#pragma mark Core Data stack

- (NSManagedObjectContext *) moc {

if (_moc != nil) {
    return _moc;
}
NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
if (coordinator != nil) {
    _moc = [[NSManagedObjectContext alloc] init];
    [_moc setPersistentStoreCoordinator: coordinator];
}
return _moc;
}

- (NSManagedObjectModel *)managedObjectModel {

if (_managedObjectModel != nil) {
    return _managedObjectModel;
}
_managedObjectModel = [NSManagedObjectModel mergedModelFromBundles:nil];    
return _managedObjectModel;
}

- (NSPersistentStoreCoordinator *)persistentStoreCoordinator {

if (_persistentStoreCoordinator != nil) {
    return _persistentStoreCoordinator;
}
NSURL *storeUrl = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
storeUrl = [storeUrl URLByAppendingPathComponent:DOC_NAME];

NSError *error;
_persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel: [self managedObjectModel]];

if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:nil error:&error]) {
    NSLog(@"Error adding a store to the coordinator: %@, %@", error, error.userInfo);
}        
return _persistentStoreCoordinator;
}

-(void)saveDataStore
{
    NSError *error;
    if (![self.moc save:&error]) NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
} 
```

DTGGlobalSettings 的 'moc' (ManagedObjectContext) 属性随后在我需要访问 CoreData 的应用程序的任何地方使用。

现在到第二部分，更新数据库。我从远程 Web 服务器获取一些 JSON 格式的新实体，通过生成的字典并为请求结果中找到的每个实体调用 createFromDictionary 方法。这是代码：

```
+(Product *)createFromDictionary:(NSDictionary *)entityData inContext:(NSManagedObjectContext *)moc performUpdate:(BOOL)update
{
Product *result;
if (update)
{
    NSFetchRequest *request = [[NSFetchRequest alloc] initWithEntityName:e_product];
    request.predicate = [NSPredicate predicateWithFormat:@"%K = %@", f_product_id, [entityData objectForKey:f_product_id]];
    result = [[DTGGlobalSettings sharedInstance].moc executeFetchRequest:request error:nil].lastObject;
    if (!result)
    {
        NSLog(@"Error updating Product ID %@! Cannot fetch entity.", [entityData objectForKey:f_product_id]);
        return nil;
    }
} else
{
    result = [NSEntityDescription insertNewObjectForEntityForName:e_product inManagedObjectContext:[DTGGlobalSettings sharedInstance].moc];
}

result.product_id = [[DTGGlobalSettings sharedInstance].numFormatter numberFromString:[entityData objectForKey:f_product_id]];
result.product_image = [NSData dataWithContentsOfURL:[NSURL URLWithString:[[DTGGlobalSettings sharedInstance].baseURL stringByAppendingString:[entityData objectForKey:f_product_image]]]];
result.product_name = [entityData objectForKey:f_product_name];

return result;
} 
```

当我用完 fethed 实体时，我调用 [[DTGGlobalSettings sharedInstance] saveDataStore]（见上文）。此时 TVC 中的现有行（如果有的话）消失了。如果我添加了一些新实体，那么在保存时什么也不会发生，即 TVC 不会更新其行。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-20T14:27:14.810

实际上，我认为您的第一个预编辑帖子包含所有必要的信息。我只是没有阅读它（我不喜欢一直向右滚动阅读长行代码，有时只是不这样做 - 我的错）。

您的问题似乎与您的 FRC 排序描述符有关。

FRC 不能很好地保持关系排序描述符的更新。

有人认为这是它的设计方式。我认为这是一个错误。

请参阅这篇文章[更改托管对象属性不会触发 NSFetchedResultsController 来更新](https://stackoverflow.com/questions/12370521/changing-a-managedobject-property-doesnt-trigger-nsfetchedresultscontroller-to/12379824#12379824)我的表格视图。希望您会看到与您的案例的相似之处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-29T14:29:54.693

我刚刚花时间处理同样的问题并发现以下内容：当`sectionNameKeyPath`引用可以获取`nil`值的关系字段时，插入对象时 FRC 更新将不起作用。

这可能与 Xcode 控制台中的警告有关，即该部分将为该字段设置为的对象创建`nil`。我猜那部分与 FRC 内部工作相混淆。

# iphone - iPhone：将图形路径存储为常量

> ID：12431671
> 
> 赞同：0
> 
> 时间：2012-09-14T20:39:27.847
> 
> 标签：iphone, objective-c, ios, cocoa-touch, core-graphics

我有一堆定义如下的路径：

```
_shapeMutablePath = CGPathCreateMutable();
CGPathMoveToPoint(_shapeMutablePath, NULL, 95.97,36.29);
CGPathAddCurveToPoint(_shapeMutablePath, NULL, 96.02,29.11,90.75,23.00,83.54,21.40);
CGPathAddCurveToPoint(_shapeMutablePath, NULL, 62.64,66.59,64.11,66.96,65.66,67.12);
CGPathAddCurveToPoint(_shapeMutablePath, NULL, 74.52,68.04,82.49,62.03,83.47,53.69);
CGPathAddCurveToPoint(_shapeMutablePath, NULL, 83.57,52.83,83.59,51.98,83.54,51.15);
CGPathAddCurveToPoint(_shapeMutablePath, NULL, 90.74,49.56,96.01,43.45,95.97,36.29);
CGPathCloseSubpath(_shapeMutablePath); 
```

其中一些我必须经常重复使用，所以我想知道存储和检索这些信息的最佳方式是什么？是否可以将其作为常量保存在我的常量文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:45:39.763

与在屏幕上绘制路径相比，创建路径的计算时间微不足道，因此使用静态方法或其他方法按需创建路径应该不是问题

或者，您可以创建一个静态类来存储要重用的不同路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:07:25.093

你总是可以像这样懒加载

添加属性

```
@property (nonatomic, assign, readonly) CGMutablePathRef shapeMutablePath; 
```

然后覆盖getter

```
- (CGMutablePathRef)shapeMutablePath;
{
  if (!_shapeMutablePath) {
    _shapeMutablePath = CGPathCreateMutable();
    CGPathMoveToPoint(_shapeMutablePath, NULL, 95.97,36.29);
    CGPathAddCurveToPoint(_shapeMutablePath, NULL, 96.02,29.11,90.75,23.00,83.54,21.40);
    CGPathAddCurveToPoint(_shapeMutablePath, NULL, 62.64,66.59,64.11,66.96,65.66,67.12);
    CGPathAddCurveToPoint(_shapeMutablePath, NULL, 74.52,68.04,82.49,62.03,83.47,53.69);
    CGPathAddCurveToPoint(_shapeMutablePath, NULL, 83.57,52.83,83.59,51.98,83.54,51.15);
    CGPathAddCurveToPoint(_shapeMutablePath, NULL, 90.74,49.56,96.01,43.45,95.97,36.29);
    CGPathCloseSubpath(_shapeMutablePath);
  }
  return _shapeMutablePath;
} 
```

您还需要在 dealloc 中进行清理

```
- (void)dealloc;
{
  CGPathRelease(_shapeMutablePath);
} 
```

# css - jQuery Mobile 控制组宽度

> ID：12431672
> 
> 赞同：1
> 
> 时间：2012-09-14T20:39:34.010
> 
> 标签：css, jquery-mobile

我只是用 jquery-mobile 弄湿了我的脚.....

我想创建一个宽度为 100% 的控制组，在该组内有一个宽度为 70% 的左按钮和一个宽度为 30% 的右按钮，但我没有运气。这是我尝试过的：http: [//jsfiddle.net/bykB8/](http://jsfiddle.net/bykB8/)

我将不胜感激任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T15:55:43.747

看看这个链接：[**信息**](http://jquerymobile.com/demos/1.0/docs/buttons/buttons-grouped.html)

它说 ：

***通过将 data-type="horizo​​ntal" 属性添加到 controlgroup 容器，您可以切换到水平样式组，该组使按钮并排浮动并将宽度设置为仅足以容纳内容。***

因此，如果要重新调整大小，请使用`<a>`而不是`<buttons>`. 然后你可以给你的链接样式。

看看这个小提琴：[**小提琴**](http://jsfiddle.net/bykB8/1/)

你会注意到这个演示中的宽度是`70%`和`29%`。那是因为两个按钮都有边框。它覆盖了它们的一些宽度。如果你想适应宽度`70%`并为这两个元素`30%,`设置`border:none;`。:)

[**演示 70% 和 30%**](http://jsfiddle.net/bykB8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T16:15:26.563

最简单的解决方案是添加一行 CSS：

```
.ui-controlgroup-horizontal .ui-controlgroup-controls { display: block !important; } 
```

然后只需将控制组的宽度设置为 100%。

[小提琴](http://jsfiddle.net/6pfkF/2/)

# php - PHP 和其他语言如何选择随机数？

> ID：12431678
> 
> 赞同：4
> 
> 时间：2012-09-14T20:39:46.843
> 
> 标签：php, random

实际上我正在学习PHP，所以这个问题突然出现在我的脑海中。计算机如何选择随机数？

*   这个随机数生成背后的逻辑是什么？
*   计算机是否使用垃圾值作为随机数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:50:40.797

我们通常可以从代码中访问的随机数称为伪随机数。它们基于数字的数学序列，这些数字只会在很长很长的时间后才会重复。序列中的开始位置基于种子，通常被视为时间的函数。

这些数字看起来是随机的，但实际上并非如此，这就是为什么它们被称为“伪随机”。

进一步阅读：[http ://en.wikipedia.org/wiki/Random_number_generation](http://en.wikipedia.org/wiki/Random_number_generation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:51:25.617

根据编程/脚本语言，有所谓的伪随机值。因为计算机实际上并没有选择只选择他们想到的数字（嘿！），所以有一种算法/计算可以创建数字。原理很简单。你得到的随机值只是随机的，因为你不知道它的计算方式。如果你有一个随机化函数运行了一段时间而不改变它的种子（你可以输入一个值来改变后台的计算）它给出的值会再次出现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:52:37.760

看看[wiki](http://en.wikipedia.org/wiki/Random_number_generation)，那里解释得很好。

大多数计算机随机数都是伪随机数。如果您想要真正的随机数，则必须使用白噪声作为来源，并将其数字化。

# python - 在 Python 中是否有处理睡眠模式的跨平台方法？

> ID：12431679
> 
> 赞同：2
> 
> 时间：2012-09-14T20:39:48.047
> 
> 标签：python, sleep, standby

我有一个 Python 应用程序，它在计算机进入睡眠状态时经常死机。它在 Mac、Windows 和 Linux 上运行良好，但睡眠问题很烦人。

是否有一个函数/库可以让我以独立于平台的方式处理睡眠模式？

就像是

```
 if(OSSLEEP){ 
     #Reduced Functionality
 } 
```

如果程序没有崩溃，我会很高兴，因为我意识到在睡眠期间可能没有任何功能。

我研究了这个问题： [如何检查系统是否处于待机模式？](https://stackoverflow.com/questions/387141/how-can-i-check-to-see-if-system-is-in-standby-mode)

似乎有一个 Win32 API 函数可以做到这一点：通过这种推理，可能有一个 Python 库可以做同样的事情。 [Windows 进入睡眠模式时的通知](https://stackoverflow.com/questions/9519919/notification-when-windows-enters-in-sleep-mode)

这似乎表明这是不可能的，也是一个坏主意： [Multithreaded python urllib2-based downloader drive the computer to Standby/Sleep](https://stackoverflow.com/questions/7671052/multithreaded-python-urllib2-based-downloader-drives-the-computer-to-standby-sle)

即使不建议这样做，我也很想知道这是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:51:30.063

在睡眠模式下，**没有**程序在运行。这就是重点，因为现代 CPU 在不做任何事情时几乎不使用任何电量。

此外，您的问题并非睡眠模式独有。如果连接中断，或者如果您的进程在休眠期间没有收到通知，或者如果您的网络接口重新启动，或者……，也会发生这种情况。

所以解决你的问题的正确方法是：用[你的代码](http://sscce.org/)和你得到的错误[提出一个新问题。](https://stackoverflow.com/questions/ask)

# oauth-2.0 - 如何获取配置帐户的个人资料信息，即..（电子邮件 ID）

> ID：12431680
> 
> 赞同：1
> 
> 时间：2012-09-14T20:39:54.193
> 
> 标签：oauth-2.0, eventbrite

我使用 Oauth 2 身份验证在我的应用程序中配置了 EventBrite 帐户。配置后，我需要显示配置帐户的配置文件信息（即电子邮件 ID）。是否有任何 API 可以获取配置帐户的配置文件信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T20:33:16.797

试试 Eventbrite 的[user_get](http://developer.eventbrite.com/doc/users/user_get) API 调用：

[http://developer.eventbrite.com/doc/users/user_get](http://developer.eventbrite.com/doc/users/user_get)

# c++ - Eclipse 报告关于有效 cpp 继承的错误

> ID：12431686
> 
> 赞同：0
> 
> 时间：2012-09-14T20:40:36.960
> 
> 标签：c++, eclipse, multiple-inheritance

Eclipse 在“new Listener()”上报告了一个错误，尽管它使用 g++ 编译和执行。请注意，这些类的数据多于此处列出的数据，因为它已被缩减，因此删除看似空的类不是一种选择。有什么我可以添加/更改以使 Eclipse 和 g++ 都高兴的东西。不过，我将无法更改 Base* 类。

```
class BaseIntf {
public:
    virtual ~BaseIntf() {}
    virtual void foo() = 0;
};

class BaseImpl: public virtual BaseIntf {
public:
    virtual void foo() {}
};

class ListenerBaseInft: public virtual BaseIntf {
};

class Listener: public ListenerBaseInft, public BaseImpl {
};

int main(int argc, char *argv[]) {
    // Eclipse:
    // The type 'Listener' must implement the inherited pure virtual method 'BaseIntf::foo'
    Listener* listener = new Listener();
    listener->foo();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:51:54.840

C++ 有一个称为*优势*的特性。通常，当一个类 (say `A`) 派生自两个类 (say`A1`和`A2`) 时，每个类都实现相同的虚函数 (say `void f()`)，派生类也需要实现该函数。纯虚函数也算作实现。

但是，有一个例外：当`A1`本身派生自时`A2`，则`A1`s 的实现`f()`被称为*支配*的实现`A2`，而后者被排除在考虑之外。因此，`A`不必重新实现`f()`。

您的编译器可能没有考虑到该异常。这是一个编译器错误。

要解决它，请`foo`定义`Listener`：

```
void foo() { BaseImpl::foo(); } 
```

这很丑陋，但编译器错误也是如此。

# android - 如何在单/双窗格布局中管理 UI 状态和后台堆栈

> ID：12431687
> 
> 赞同：13
> 
> 时间：2012-09-14T20:40:39.840
> 
> 标签：android, android-fragments, android-lifecycle, android-orientation

我在思考如何`Fragment`在典型的列表细节设计模式中正确管理 s 时遇到了麻烦。

我的布局工作正常，横向视图（双窗格）的结构如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout ... >
    <FrameLayout android:id="@+id/list" ... />
    <FrameLayout android:id="@+id/container" ... />
</LinearLayout> 
```

对于纵向视图（单窗格），就像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout android:id="@+id/container" ... /> 
```

我还可以确保根据设备的屏幕宽度加载适当的布局`refs.xml`。`res/values-w600dp/`

选择列表项时，横向视图应并排显示列表和详细信息，而纵向视图应仅全屏显示详细信息。当未选择任何内容时，横向视图应在左侧显示左侧，在右侧显示空白，而纵向视图应仅全屏显示列表。

![例子](../Images/aaa4db5b53f62150cf868cc0d508f266.png)

但是，这就是我遇到麻烦的地方：

*   我是否将“主要”`Activity`用于列表 + 可选的详细信息布局，而将另一个“详细信息”`Activity`用于纵向、仅详细信息布局？这似乎是[片段指南](http://developer.android.com/guide/components/fragments.html)示例所做的。我已经让这种方法可以正常工作，但是当方向改变时，我如何保持我的细节片段的状态？

    考虑上面显示的相反情况——在细节可见时从纵向旋转到横向意味着`Activity`需要`finish()`编辑细节，以便主`Activity`可以显示两窗格布局，但这也会破坏细节片段及其`savedInstanceState`. 如果用户在详细信息片段的字段中键入信息`EditText`，然后旋转设备，当我将详细信息片段添加到主（双窗格）时，如何保留详细信息片段的整个 UI 状态`Activity`？

*   我是否只使用一个`Activity`并自己管理`Fragment`s？这允许我在方向更改时保留详细 UI 的状态（因为 Android 会自动处理这一点），但在返回堆栈时会变得混乱。

    考虑图像中的情况——当细节可见时从横向旋转到纵向应该显示细节单窗格，但是如何正确管理后退堆栈和`ActionBar`主页图标以显示列表单窗格？旋转回横向还需要撤消我之前所做的任何回栈操作，因为两个片段将同时可见。

经过更多搜索后，我发现了两个类似的问题（[Switch from dual pane to single pane onorientation change maintenance fragment stack](https://stackoverflow.com/q/7604329/687315)和[Retain Fragment state between Activities](https://stackoverflow.com/q/6034186/687315)），但我的情况略有不同，因为我没有尝试改进此功能，但最好预先计划好。我错过了什么？当然，Android 可以同时管理后台堆栈（如在多重`Activity`情况下）**和**UI 状态（如在单一`Activity`情况下），对吧？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T19:21:44.660

我通过多活动路线解决了这个问题。 [请参阅我对“在活动之间保留片段状态”的回答](https://stackoverflow.com/a/12465343/687315)。

关键是[`FragmentManager.saveFragmentInstanceState()`](http://developer.android.com/reference/android/app/FragmentManager.html#saveFragmentInstanceState(android.app.Fragment))用来保存片段 UI 的状态，并[`Fragment.setInitialSavedState()`](http://developer.android.com/reference/android/app/Fragment.html#setInitialSavedState(android.app.Fragment.SavedState))在另一个活动中实例化相同片段时恢复它。

出于我的目的，我发现我需要在两种情况下保存 UI 状态。我在我的片段中创建了一个辅助方法，并在使用将片段的新实例附加到双窗格布局之前立即`public void saveState()`从片段自己的`onPause()`方法以及我的“主”活动中调用它。`replace()`

我仍然想知道这种类型的单/双窗格布局方案所需的回栈操作是否可行，或者单活动方法是否需要`onBackPressed`手动覆盖和模拟回栈。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-24T18:45:57.230

可以只使用一个 Activity，但您必须在纵向时自己管理 backstack。

当您描述应用程序的行为时，可能有 4 种状态：

*   状态A：纵向，显示列表片段。
*   状态B：纵向，显示细节片段和后栈中的列表片段。
*   状态C：横向，左侧显示列表片段，右侧显示空白区域。
*   状态 D：横向，并排显示列表片段和详细信息片段。

假设您处于状态 D（带有两个片段，我们称它们为 FA 和 FB），并且您更改了手机的方向。下面的状态应该是状态B，但问题是你的纵向布局只有一个`FrameLayout`。使用以下内容作为单窗格布局：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout android:id="@+id/list" ... /> 
```

Android 将重新创建 FA 并将其附加到`FrameLayout`. 另一方面，FB 也将被重新创建，但不会关联容器，因此不会显示。此时，您可以创建另一个片段，FB2，其内容与 FB 相同，并用它来替换 FA。您将在您的 backstack 中拥有 FA-FB2 并隐藏 FB。

如果你再次改变方向（期待状态 D），你可以使用`onSaveInstanceState()`从 backstack 中弹出 FB2 `popBackStack()`，从而再次拥有 FA 和 FB。在删除 FB2 之前，您可能还需要将其内容复制到 FB。当应用再次处于状态 D 时，FB 将拥有其 FrameLayout。

还有一些其他的过渡和情况需要你处理，但主要的想法就是这样。

这不是一个非常优雅的解决方案，所以我确信它必须是一种更好，也许更有效（例如不复制片段）的方法来解决这个问题。

# java - 转换为 Dalvik 失败 - 某处未初始化的变量

> ID：12431691
> 
> 赞同：3
> 
> 时间：2012-09-14T20:40:54.860
> 
> 标签：java, android, jvm, dalvik, jasmin

我正在尝试将我的 Android 应用程序与使用 Free Pascal 编译的 JAR 链接。我收到以下构建错误：

```
[2012-09-14 16:08:38 - MyApp] Dx 
EXCEPTION FROM SIMULATION:
[2012-09-14 16:08:38 - MyApp] Dx local 0009: invalid

[2012-09-14 16:08:38 - Yarxi] Dx ...at bytecode offset 00015f2c
locals[0000]: Lcom/mypackage/$Core$$_fpc_nestedvars$70;
locals[0001]: I
locals[0002]: I
locals[0003]: I
locals[0004]: I
locals[0005]: I
locals[0006]: I
locals[0007]: I
locals[0008]: I
locals[0009]: <invalid>
locals[000a]: <invalid>
(..more locals... much more)
locals[06db]: <invalid>
stack[0003]: I
stack[0002]: I
stack[0001]: [I
stack[top0]: int{0x00000000 / 0}
...while working on block 5f23
...while working on method $MyMethod$944$FPR1:(Lcom/mypackage/$Core$$_fpc_nestedvars$70;)V
...while processing $MyMethod$944$FPR1 (Lcom/mypackage/$Core$$_fpc_nestedvars$70;)V
...while processing com/mypackage/Core.class

[2012-09-14 16:08:40 - MyApp] Dx 1 error; aborting
[2012-09-14 16:08:40 - MyApp] Conversion to Dalvik format failed with error 1 
```

错误似乎是在某些时候，代码尝试读取未初始化的本地 0009。

现在，Pascal 不强制初始化局部变量。有可能一开始就省略了初始化。我保留了 Free Pascal 为我生成的 JVM 汇编文件。这些与 Jasmin 一起组装到类文件中。该文件很大 - 我不会在这里粘贴它。

有人可以帮我将错误点追溯到源头吗？错误位于字节码偏移量 00015f2c。有没有办法将其转换回汇编文件行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:18:09.477

解决。00015f2c（十进制的 89900）确实是方法中的字节码偏移量。我做了以下。

首先，我直接调用 Jasmin，传递生成的 .j 文件和 -g 选项（生成行号）：

```
java -jar %JASM% -g Core.j 
```

Free Pascal 本身不会发出 -g 。这给了我一个替代的 Core.class 文件，其中包含行号，行号相对于 FPC 生成的 .j 文件。然后我曾经`javap`将这个类反汇编成另一个 .j 文件：

```
"%JDKROOT%\javap" -l -c Core.class >Core_WithLines.j 
```

但是这个新的 .j 文件包含每个单独命令的行号和偏移量。然后，我在违规方法中搜索了偏移量 89900（注意：由 生成的偏移量`javap`在 65536 处换行）。然后我查看了该方法主体下方的 LineNumberTable（偏移量和行号都换行），在源 Core.j 文件中找到了与该偏移量相对应的行号。回头看Core.j，有一条注释，里面包含了Pascal源码的行号。

确实，有一个函数调用传递了一个未初始化的变量——但作为一个`var`参数。

这个问题有点像 Pascal/JVM 边界问题。该变量未初始化，但它由 ref 传递到要从后者返回的函数中。编译器应该以某种方式将其抽象出来，恕我直言，但 FPC 没有。

# php - 如何在 PHP 中合并大数组？

> ID：12431695
> 
> 赞同：0
> 
> 时间：2012-09-14T20:41:16.880
> 
> 标签：php, arrays

我有 7 个对象数组。每个对象都包含数据。我需要将这些数组合并在一起，我这样做：

```
$arrayTotal = $array1;
$arrayTotal = array_merge($arrayTotal,$array2)
$arrayTotal = array_merge($arrayTotal,$array3)
$arrayTotal = array_merge($arrayTotal,$array4)
... 
```

一切都很好，直到我的总数组有 700 个项目（每个子数组有 100 个项目）。Apache 停止响应，我认为是因为内存问题，因为有这么多的大数组。我在第 4 次或第 5 次合并时遇到了问题。

合并它们并避免错误的最佳方法是什么？

更新：

```
[Sat Sep 15 10:17:36 2012] [notice] Apache/2.2.21 (Win32) PHP/5.3.9 configured -- resuming normal operations
[Sat Sep 15 10:17:36 2012] [notice] Server built: Sep 10 2011 11:34:11
[Sat Sep 15 10:17:36 2012] [notice] Parent: Created child process 3908
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Child process is running
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Acquired the start mutex.
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Starting 64 worker threads.
[Sat Sep 15 10:17:36 2012] [notice] Child 3908: Starting thread to listen on port 8080.
[Sat Sep 15 10:17:53 2012] [notice] Parent: child process exited with status 3221225477 -- Restarting. 
```

这是我的 apache 错误日志。我确实找到了一些将文件复制到我的 system32 文件夹的解决方案，但它们没有用

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T20:46:07.017

`array_merge`可以接受无限数量的参数，因此您可以将它们全部放在一个函数调用中：

```
$arrayTotal = array_merge($array1,$array2,$array3...); 
```

这应该可以解决问题，因为我过去使用过包含数千个项目的数组，没有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T20:49:02.263

使用 + 比使用 array_merge 更优化

像这样写，它更快，使用更少的资源，这似乎你有问题

```
$arrayTotal = $array1 + $array2 + $array3 + $array4; //add as much as you need :) 
```

注意：感谢@ficuscr，来自 php [array_merge 页面](http://php.net/manual/en/function.array-merge.php)，值得关注的真正重要的事情是

> 如果要将第二个数组中的数组元素附加到第一个数组，同时不覆盖第一个数组中的元素并且不重新索引，请使用 + 数组联合运算符

简而言之，如果您只想添加内容，而不关心重复项，请使用 +

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T14:44:38.050

问题不在 array_merge 中，而是在我对外部文件所做的 curl 中。我看到文件对于 curl 来说太大了，然后我们遇到了内存问题，增加了 php.ini 中的内存并没有解决问题

# html - 页面内容布局问题

> ID：12431698
> 
> 赞同：1
> 
> 时间：2012-09-14T20:41:22.180
> 
> 标签：html, css

> **可能重复：**
> [使右侧的 Div 填充所有可用空间](https://stackoverflow.com/questions/12333712/make-div-on-right-side-fill-out-all-available-space)

我正在为博客设计一个主题，但在尝试使布局正常工作时遇到了一些麻烦。这是我想要的图像。

![博客内容的布局](../Images/69e2551056cd912379b5eef8905df04f.png) 该图代表的是单个帖子，而不是网站本身，因此它将包含在它自己的盒子中，我们称之为`.container`。紫色和绿色也在另一个盒子里，我们称之为`.content`。其他元素现在将通过它们的颜色来调用。

所以这里或多或少是 CSS 的样子：

```
.container { 
    display:block;
    margin:0 25px;
}

.gray, .blue, .content {
    display:block;
    width:100%;
}

.purple {
    display:inline-block;
    width:125px;
    height:100%;
    text-align:center;
}

.green {
    display:inline-block;
} 
```

这就是目前的一切。我试过`float`了，但没有效果。正在发生的事情是这样的。

![在此处输入图像描述](../Images/534d7576ad2b7a0780a73488bc37ca6a.png)

这里还有一些你应该知道的事情：

*   `.container`的宽度未设置它是自动的
*   `.purple`并且`.green`不一定需要相同的大小，只要`.green`不去那一边。
*   `.purple`可以有一个设定的高度
*   `.green`是肉在哪里，那是实际帖子所在的地方，请记住这一点。
*   我不认为桌子会有帮助，问题在里面`.content.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:29:30.280

使用这篇文章中的答案来获得解决方案：

[使右侧的 Div 填充所有可用空间](https://stackoverflow.com/questions/12333712/make-div-on-right-side-fill-out-all-available-space/12333767)

我推荐表格导向的方法，因为它是几乎所有浏览器上最有效/最有效的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:53:07.283

我假设您的所有部分都是`<div>`元素。利用：

```
.container { 
    display:block;
    margin:0 25px;
}

.gray, .blue, .content {
    display:block;
    clear:both;
    width:100%;
}

.purple {
    float:left;
    width:125px;
    height:100%;
    text-align:center;
}

.green {
    float:left;
} 
```

您可能还需要`<br clear="all" />`在绿色之后`div`和 div 关闭之前立即添加，然后在`content`div 之后添加另一个`content`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:36:38.343

假设所有设置在 div 你需要这样写：

```
.container { 
    display:block;
    margin:0 25px;
}

.gray, .blue, .content {
    display:block;
    clear:both;
    width:100%;
}

.purple {
    float:left;
    width:125px;
    height:100%;
    text-align:center;
}

.green {
    float:left;
    min-width: 125px;
} 
```

# c# - 如何拦截和取消方法执行

> ID：12431707
> 
> 赞同：4
> 
> 时间：2012-09-14T20:41:51.283
> 
> 标签：c#, unity-container, interceptor, aop

有没有办法*拦截*方法执行并**取消**它？我只找到了一种`Invoke`方法来使用`Microsoft.Practices.Unity`and从方法中抛出异常`ICallHandler`，但是在`Invoke`方法实现上，我只能 return `getNext()(input, getNext);`。

基本上这是代码：

```
public class TestHandler : ICallHandler
{
    public int Order { get; set; }

    public IMethodReturn Invoke(IMethodInvocation input, 
                                GetNextHandlerDelegate getNext)
    {
        Console.WriteLine("It's been intercepted.");

        // Here... please Lord, tell me I can cancel it, I'm a good person.
        return getNext()(input, getNext);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T21:04:24.653

这取决于您所说的取消是什么意思。客户端代码已经调用了该方法，它期待一个结果或一个异常。

您可以做的是避免在处理程序中调用原始方法，从而有效地停止管道，但是您需要做一些事情来完成方法调用。

要绕过包含原始方法的其余管道，您需要使用 IMethodInvocation 接口中的 CreateMethodReturn 方法创建一个新的方法返回以成功返回，或者使用 CreateExceptionMethodReturn 方法引发异常。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ee650526(v=pandp.20)](http://msdn.microsoft.com/en-us/library/ee650526(v=pandp.20))。

例如，而不是做

```
return getNext()(input, getNext); 
```

你可以做

```
return input.CreateMethodReturn(null, input.Arguments) 
```

返回空值。

对于通用处理程序，您需要分析截获的方法签名以找出需要返回的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T21:52:04.847

我还建议查看 AOP 方法。例如 PostSharp。对于不同的用例，它们有很多方面。详情在这里： [http](http://www.sharpcrafters.com) ://www.sharpcrafters.com 你可以看看 MethodInterceptionAspect

# css - 如何使用 CSS 制作以下菜单？

> ID：12431709
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:41:55.413
> 
> 标签：css, menu, background

我有这个菜单： ![在此处输入图像描述](../Images/bd4b9b48390b7f9a912c10267a8d3f68.png)

如何在文本（ul，li）后面制作活动的白色背景？

如何在鼠标悬停时制作背景白色文本？（联系方式，推荐下载）

这是背景图片：

![在此处输入图像描述](../Images/7ef3959c4daa2690b78a8a3781ef6efc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:25:09.907

```
menuButton:hover
{
background:white;
} 
```

这个，悬停，应该在悬停在 div 上时改变背景颜色

# javascript - 在图像的一部分中反转颜色 - HTML、CSS、JS

> ID：12431710
> 
> 赞同：0
> 
> 时间：2012-09-14T20:42:05.823
> 
> 标签：javascript, html, css, image

有没有办法只反转图像的一部分？我有一个“选择器栏”之类的东西，我希望被选中的图标被反转。不幸的是，当栏转换到不同的选择时，这看起来*真的很糟糕，因为图标会立即改变颜色。*“选择器”应该在过渡时沿着条形滑动。

[可以在这里](http://imageshack.us/a/img7/663/invertj.png)找到我正在谈论的简单示例

我现在能想到的最佳解决方案是在选择器元素上放置一个新的倒置图像，然后将图像移动到选择器移动的相反方向。这会给人一种错觉，即所覆盖的图像切片是倒置的。这真的是最好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:44:32.900

创建一个宽度和高度为零的元素，并且`outline: 8px solid invert`. 然后用你的选择器移动这个元素，这将反转它传递的东西。

# jquery - 是否可以在此手风琴 jquery 插件上动态更改某些 html 内容？

> ID：12431716
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:42:41.440
> 
> 标签：jquery, accordion, title, innerhtml

[http://bassistance.de/jquery-plugins/jquery-plugin-accordion/](http://bassistance.de/jquery-plugins/jquery-plugin-accordion/)

[http://jquery.bassistance.de/accordion/demo/](http://jquery.bassistance.de/accordion/demo/)

有点像第三个例子，除了“图标”不应该是图像，而是文本字符。当我选择此选项时，我希望将这个标题：“+吉他”更改为“-吉他”。我的 html 应该是这样的：

```
<a><span>+<span> guitar</a> 
```

至

```
<a><span>-<span> guitar</a> 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T20:52:51.093

**免责声明：**我只是快速浏览了链接的示例，以下可能不适用于 jquery 手风琴，它是基于链接的 javascript 库的组件。

您看到的图像是通过 CSS 设置的，实际上是该元素的背景图像：

```
 #navigation a.head (all closed "tabs") 
```

和

```
 #navigation a.selected (the one currently expanded). 
```

所以你基本上有两个选择：

*   创建类似于 '-' 和 '+' 的图像，这可能是最简单的 hack
*   使用 jQuery 的 .html 来处理这些选择器，并通过使用 '+' 更改预定义的字符串 '-'，反之亦然

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:16:14.843

您需要从 css 中删除图像并将 :before 选择器与内容元素一起使用。

改变

```
#navigation a.head {
    cursor:pointer;
    border:1px solid #CCCCCC;
    background:#5263AB url(collapsed.gif) no-repeat scroll 3px 4px;
    color:#FFFFFF;
    display:block;
    font-weight:bold;
    margin:0px;
    padding:0px;
    text-indent:14px;
    text-decoration: none;
}

#navigation a.selected {
    background-image: url(expanded.gif);
} 
```

至

```
#navigation a.head {
    cursor:pointer;
    border:1px solid #CCCCCC;
    background:#5263AB;
    color:#FFFFFF;
    display:block;
    font-weight:bold;
    margin:0px;
    padding:0px;
    text-indent:14px;
    text-decoration: none;
}

#navigation a.head:before {
    content: '+';
}

#navigation a.selected:before {
    content: '-';
} 
```

# bash - 文件名的 Bash for 循环问题

> ID：12431722
> 
> 赞同：0
> 
> 时间：2012-09-14T20:43:43.330
> 
> 标签：bash, for-loop, cp

我有一个简单的 bash for 循环，并试图在其中执行一个命令。循环是这样我可以执行不同的文件名。

这些文件是：

```
crystal0_cmin.pdb
crystal1_cmin.pdb
.
. 
. 
```

循环是：

```
for ((i=0;i<=10;i++))
do
cp Files/crystal$i_cmin.pdb Energy/
cp Files/crystal$i_cmin.psf Energy/
done 
```

问题是我总是收到以下错误消息：

```
cp: cannot stat `Files/crystal.pdb': No such file or directory
cp: cannot stat `Files/crystal.psf': No such file or directory 
```

但我从不指定文件 Crystal.pdb 和 Crystal.psf。它只是忽略了所有 i 的 $i 扩展名。也就是说，没有文件被复制。

有谁知道我该如何解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T20:47:02.717

问题是 bash 被解释`$i_cmin`为一个变量。要修复它，请使用大括号告诉 bash 这`$i`是一个变量，应该这样解释：

```
cp Files/crystal${i}_cmin.pdb Energy/
cp Files/crystal${i}_cmin.psf Energy/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:08:08.440

直接的解决方法是使用 Adam 建议的大括号将参数名称限制为`i`：

```
for ((i=0; i<=10; i++)); do
    cp Files/crystal${i}_cmin.pdb Energy/
    cp Files/crystal${i}_cmin.psf Energy/
done 
```

下一步是意识到您不需要使用 C 风格的 for 循环来迭代生成的文件名；您可以使用大括号扩展直接迭代所需的文件（这是循环和威廉评论之间的中间点：

```
for f in Files/crystal{0..10}_cmin.p{db,sf}; do
    cp "$f" Energy/
done 
```

最后一步是意识到你根本不需要for循环，因为大括号扩展生成的文件列表可以用作`cp`直接传递给的文件列表（威廉的评论）：

```
cp Files/crystal{0..10}_cmin.p{db,sf} Energy/ 
```

# hbase - 如何设计hbase索引表？

> ID：12431725
> 
> 赞同：0
> 
> 时间：2012-09-14T20:43:57.157
> 
> 标签：hbase

我需要在 Hbase 中设计一个索引表。例如，我的主表是这样的：

```
Person
row key: uuid --> name and address columns 
```

我需要创建一个索引 Person_Name_Index 表，该表使用 Person 键映射名称。我的索引表将如下所示：

```
Person_Name_Index
row key: name --> person row key 
```

将多个人行键插入到 Person_Name_Index 中的行键名称的有效方法是什么？我可以将所有人员行键设为单个值，但如果我需要将另一个人员行键添加到名称中。我必须阅读所有这些，然后向其中添加一个新项目。如果我将每个人的行键放在单独的列中，我需要确保名称是唯一的。如果不使用 uuid 类型的字符串，我不知道该怎么做，这也会使我的表变大。有什么想法或建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:16:35.757

正如 Sean 在 HBase 中所说，建议根据您需要的访问路径对数据进行建模。不建议将其视为 RDBMS（因为它不是）。在您的情况下，您可以将 person 表的键作为名称，后跟一个分隔符（例如管道），然后是 UID - 然后您可以按名称搜索并拥有每个人的唯一 ID

```
String personName="Name to Search";
String delimiter="|";
PrefixFilter prefixFilter = new PrefixFilter(Bytes.toBytes(personName+delimiter));
Scan scan = new Scan();
scan.setFilter(prefixFilter);
ResultScanner resultScanner = hBaseTable.getScanner(scan); 
```

然后在扫描仪上迭代以查看所有具有该名称的人

# javascript - 奇怪的变量问题是 IE

> ID：12431727
> 
> 赞同：0
> 
> 时间：2012-09-14T20:44:16.260
> 
> 标签：javascript, jquery, internet-explorer

我在 IE 中遇到了一个奇怪的问题。

我有

工具变量可以为空，看来我需要 `tool==''`让 IE 开心。

```
//work in IE and other browsers..
  if(tool==null || tool==''){Alert('bang!!!');}

//doesn't work in IE but not other browsers.
  if(tool==null){Alert('bang!!!');} 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:45:49.247

试试这个：

```
if( !tool ){
  Alert('bang!!!');
} 
```

在这里，`!tool`将返回`true`if`tool = null`或`tool = ''`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:49:14.863

这篇文章： [http](http://saladwithsteve.com/2008/02/javascript-undefined-vs-null.html) ://saladwithsteve.com/2008/02/javascript-undefined-vs-null.html 很好地解释了它。

您可以使用`if(!tool) alert('bang');`

# java - 继承中不同的变量和方法的行为

> ID：12431729
> 
> 赞同：1
> 
> 时间：2012-09-14T20:44:29.380
> 
> 标签：java, inheritance

```
class A2 {
    int numt=111; 
  void hello() {

    System.out.println("Hello from A2");
  }
}

class B2 extends A2 {
  void hello() {
    System.out.println("Hello from B2");
  }
}

class C2 extends B2 {
  int numt=666;  
  void hello() {
    System.out.println("Hello from C2");
  }

}

class MethodOverriding2 {
  public static void main(String args[]) {
    A2 obj = new C2();
    obj.hello();
    System.out.println("Num is : " + obj.numt);
  }
} 
```

所以基本上这里的输出是

```
Hello from C2
Num is : 111 
```

为什么它从 C2 运行 hello() 而从 A2 运行 numt？

据我了解，我将 A2 继承到 B2 中，并将 C2 继承到 B2 中。然后在我的主体中，我正在创建一个引用 C2 的 A2 类的对象（它可以这样做，因为 A2 是 C2 的超类）。然后在编译时没有错误，因为代码得到满足。在运行时，程序会在 'obj' 所指的地方而不是定义的地方查找 'hello()'。但它对“numt”却相反。为什么会这样？我的上述理解正确吗？如果不是，请更正。

非常感谢！我知道这是一个新手问题，我对 OOP 很陌生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:45:21.917

当您调用方法时，将调用实例中的方法，而不是由于多态性而在引用类型上。即使引用是 A2 类型，这里您的对象也是 C2，因此将调用 C2 中的方法。

当您访问变量时，它是引用类型而不是对象类型，因为多态性不适用于字段。这就是为什么将变量设为私有以使其他类无法直接访问这些变量总是好的设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:14:54.177

您不能以覆盖方法的方式覆盖字段。它们不是多态的，因此您始终会获得为您访问字段的类型指定的值。例如，您可以将其与“最终”方法进行比较，它们的行为方式相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T20:50:53.043

实际上在java中，成员变量不是多态的。所以如果你使用`obj.numt`，就不会出现编译错误。但是如果你的 obj 是 的引用`B2`，那么你会得到编译器错误。

在方法的情况下，它们是多态的。因此，如果它是 的对象`A2`，`A2.hello()`将被调用。如果它是 的对象`B2`，`B2.hello()`将被调用。情况相同`C2`。

```
class MethodOverriding2 {
  public static void main(String args[]) {
    // class member variables are not polymorphic(i.e. they are not inherited)
    A2 obj = new C2(); // obj is of type A2, so obj.numt would print 111
    B2 obj1 = new C2(); // obj1 is of type B2, so obj1.numt would give compiler error.
    C2 obj2 = new C2(); // obj2 is of type C2, so obj2.numt would print 666
    obj.hello(); // would call C2.hello() as obj points to object of C2

    A2 obj3 = new B2(); // obj3 is of type A2 which points to object of B2
    obj.hello(); // this would call B2.hello()
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T20:52:17.583

在第一种情况下，您覆盖了方法 hello(); 在 C2 中打印：Hello from C2

在第二种情况下，您没有为实例变量分配任何新值，`int numt`因此它打印：111。为 var 分配新值。千万不要这样做：

```
obj.numt=666; 
```

# html - html 5 日期格式

> ID：12431731
> 
> 赞同：-1
> 
> 时间：2012-09-14T20:44:43.500
> 
> 标签：html

> **可能重复：**
> [有没有办法改变输入类型=“日期”的格式？](https://stackoverflow.com/questions/7372038/is-there-any-way-to-change-input-type-date-format)

我们能否更改 html 5 中输入的日期格式？目前，我的网站显示 MM-DD-YYYY，但我希望它显示 DD-MM-YYYY。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:28:25.230

我认为是这样，在 HTML 中没有 DD-MM-YYYY 格式的语法。请参阅此[页面](http://www.java2s.com/Code/SQLServer/Date-Timezone/FormatdateMmmddyyyyhhmmdp.htm)。它会对你有所帮助。或者你可以在 javascript 中尝试这个：

```
<script language="JavaScript">
<!-- Begin
// Get today's current date.
var now = new Date();
// Array list of days.
var days = new Array('Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday');
// Array list of months.
var months = new Array('January','February','March','April','May','June','July','August','September','October','November','December');
// Calculate the number of the current day in the week.
var date = ((now.getDate()<10) ? "0" : "")+ now.getDate();
// Calculate four digit year.
function fourdigits(number){
    return (number < 1000) ? number + 1900 : number;
                                }
// Join it all together
today = days[now.getDay()] + ", " +
        months[now.getMonth()] + " " +
        date + ", " +
        (fourdigits(now.getYear())) ;
// Print out the data.
document.write(today);
// End -->
</script> 
```

# sql - 选择具有多个条件的父行

> ID：12431737
> 
> 赞同：1
> 
> 时间：2012-09-14T20:45:08.090
> 
> 标签：sql

在出现新情况之前，我一直在查询大部分问题，这让我感到困惑。给定以下简化的表模式：

父表：

```
ID  
FName  
LName 
```

子表：

```
[Index]  
ParentID  
Active_Flag  
ExpirationDate 
```

我想要做的是获取父行：

1.  没有孩子。
2.  有些孩子的 Active_Flag 为 1，但其到期日期为空白或 NULL。
3.  确实有孩子，但没有一个将 Active_Flag 设置为 1。

以下查询提出了我的前两个条件：

```
SELECT p.ID, p.LNAME, p.FNAME,
    CASE 
        WHEN COUNT(ct.indx) = 0 THEN 'None'
        WHEN ct.ExpirationDate is NULL or ct.ExpirationDate = '' THEN 'No expiration date'
    END AS Issue
FROM ParentTable AS p 
    LEFT JOIN ChildTable ct
        ON p.ID = ct.ParentID
GROUP BY p.ID, p.LNAME, p.FNAME, ct.[INDEX], ct.ExpirationDate
HAVING (COUNT(ct.[INDEX]) = 0) OR (ct.ExpirationDate IS NULL OR ct.ExpirationDate = '')
ORDER BY p.LNAME 
```

我不知道如何解释＃3。任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T20:50:34.050

您也可以在 HAVING 子句中执行此操作：

```
SELECT p.ID, p.LNAME, p.FNAME,
       (CASE WHEN COUNT(ct.indx) = 0 THEN 'None'
             WHEN ct.ExpirationDate is NULL or ct.ExpirationDate = '' THEN 'No expiration date'
             WHEN sum(case when ActiveFlag = 1 then 1 else 0 end) = 0 then 'No active children'
        END) AS Issue
FROM ParentTable p LEFT JOIN
     ChildTable c
    ON p.ID = ct.ParentID
GROUP BY p.ID, p.LNAME, p.FNAME
HAVING (COUNT(ct.[INDEX]) = 0) OR
       (ct.ExpirationDate IS NULL OR ct.ExpirationDate = '') or
       sum(case when ActiveFlag = 1 then 1 else 0 end) = 0
ORDER BY p.LNAME 
```

SELECT 中的 DISTINCT 是多余的。聚合不需要它。

如果 activeFlag 确实是整数，则可以简化必须“求和（ActiveFlag）”。如果不是，那么它应该是“='1'”而不是“=1'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:04:32.797

你可以使用联合来查询这个查询.....我不确定这个查询....但它会帮助你解决你的问题

```
 select p.id,p.lname,p.fname from parents where (p.id not in (select pid from children))
    union  
    select p.id,p.lname,p.fname from parents p,children c inner join on c.pid=p.id where c.active_flag=1 and c.expiration_date is null or c.expiration_date=''
    union
    select p.id,p.lname,p.fname from parents p inner join on c.pid=p.id where c.active_flag<>1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:51:44.370

```
SELECT  * 
FROM parenttable pt
        -- condition 1: There should be no parents without children at all
WHERE NOT EXISTS (
        SELECT * FROM childtable c1
        WHERE c1.parent_id = pt.id
        )
        -- condition 2: There should be no children with a flag but without a date
OR EXISTS (
        SELECT * FROM childtable c2
        WHERE c2.parent_id = pt.id
        AND c2.active_flag = 1 AND c2.expire_date IS NULL
        )
        -- condition 3: There should at least be a child with the active_flag
OR NOT EXISTS (
        SELECT * FROM childtable c3
        WHERE c3.parent_id = pt.id
        AND c2.active_flag = 1 
        )
        ;

-- Active flags for children c1 and c2
-- c1   c2 (X= child doesn't exists)
-----+-----+---+
-- X    X       rule1+rule3     # no children at all
-- 0    X       rule3           # only one child
-- 1    X                       # idem
-- 0    0       rule 3          # two children
-- 0    1
-- 1    0
-- 1    1
--
-- , which means that rule3 implies rule1, and rule1 is redundant
-------------------------

SELECT  * 
FROM parenttable pt
        -- condition 1+3: There should at least be a child with the active_flag
WHERE NOT EXISTS (
        SELECT * FROM childtable c1
        WHERE c1.parent_id = pt.id
        AND c1.active_flag = 1
        )
        -- condition 2: There should be no children with a flag but without a date
OR EXISTS (
        SELECT * FROM childtable c2
        WHERE c2.parent_id = pt.id
        AND c2.active_flag = 1 AND c2.expire_date IS NULL
        )
        ; 
```

# entity-framework - 代码优先配置不再支持图像类型吗？

> ID：12431740
> 
> 赞同：1
> 
> 时间：2012-09-14T20:45:15.447
> 
> 标签：entity-framework, ef-code-first

将 EF4.3 Code First 与 SQL Server 2008 R2 Express（版本 10.0.5500）一起使用。

我试图`ColumnType`在我的模型中设置属性以指示数据库使用`image`列的数据类型而不是默认的`varbinary(max)`. 我尝试过同时使用数据注释`[Column(TypeName="image")]`和 Fluent API: `.HasColumnType("image")`。

两者似乎都不起作用（尽管没有生成异常），数据库列的类型`varbinary(max)`在重新创建后仍然存在。

所有其他配置似乎都可以正常工作。

Code First 是否不再支持此数据类型？如果我查看 SSMS 中的数据库，SQL Server 2008 R2 Express 似乎仍然支持它。

谢谢

# ruby-on-rails - 如何在单个控制器 Ruby on Rails 中访问多个模型？

> ID：12431744
> 
> 赞同：0
> 
> 时间：2012-09-14T20:45:33.353
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model, controller

这是我的索引方法，它试图访问 2 个不同的模型，即会话和电子邮件：

```
def index
    user_session = Session.find_by_user_id(user_id)

if !user_session.blank?
  if setting_orig = GlobalSetting.find_by_settings_session_id(user_session.id)
      @setting = setting_orig.dup
  end

else
  @setting = GlobalSetting.first.dup
end 
```

结尾

但是，当我尝试创建此表单时：

```
<%= form_for(@setting) do |f| %>
 <%= f.text_field :username %>
 <%= f.password_field :password %>
<%= f.submit "Submit" %> 
```

我看到这个错误，NilClass:Class 的未定义方法'model_name'。如何使它工作，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:49:00.287

Unixmonkey 有正确的想法，查看你的堆栈跟踪并找出错误来自哪里。

此外，您的语句逻辑中有一个漏洞。如果 user_session 不为空（有人已登录）但您找不到 setting_session_id 等于 user_session.id 的电子邮件（用户可能没有电子邮件？）然后@setting 永远不会被声明，因此您将运行进入你的错误。

```
def index
  user_session = Session.find_by_user_id(user_id)

  if !user_session.blank? AND setting_orig = GlobalSetting.find_by_settings_session_id(user_session.id)
    @setting = setting_orig.dup
  else
    @setting = GlobalSetting.first.dup
  end 
end 
```

# django - 如何在国外制作美味派过滤器？

> ID：12431745
> 
> 赞同：4
> 
> 时间：2012-09-14T20:45:37.243
> 
> 标签：django, tastypie

我有两个这样的模型：

```
class CompanyResource(ModelResource):
    class Meta:
        queryset = Company.objects.all()
        fields = ['title', 'latitude', 'longitude']
        resource_name = 'company'
        filtering = {
            'latitude': ALL,
            'longitude': ALL
        }

class EventResource(ModelResource):
    company = fields.ToOneField(CompanyResource, 'company', full=True)
    class Meta:
        fields = ['title', 'company']
        queryset = Event.objects.all()
        resource_name = 'event'
        filtering = {
            'company': ALL_WITH_RELATIONS
        } 
```

然后我尝试访问`/api/v1/event/?format=json&company_latitude__within=2,3`或`/api/v1/event/?format=json&company_latitude__lt=1`未按纬度过滤：

```
{
    "meta": {
        "limit": 20, 
        "next": "/api/v1/event/?offset=20&limit=20&format=json", 
        "offset": 0, 
        "previous": null, 
        "total_count": 329
    }, 
    "objects": [
        {
            "company": {
                "latitude": "1.30521100000000", 
                "longitude": "103.81116299999996", 
                "resource_uri": ""
            }, 
            "resource_uri": "/api/v1/event/16/", 
            "title": "50% off at Infusion@Dempsey, $50 for $100 worth of Fine Dining"
        }
    ]
} 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:10:31.950

哦，这是因为两件事。我不能`field__within`在 Django 中做（为什么我会这么想？）而且应该是`/api/v1/event/?format=json&company__latitude__lt=2`.

# git - 为什么 .gitignore 不起作用？

> ID：12431747
> 
> 赞同：5
> 
> 时间：2012-09-14T20:45:44.573
> 
> 标签：git, version-control, gitignore

我的问题与[为什么 gitignore 在这种情况下不起作用？](https://stackoverflow.com/questions/8156299/why-doesnt-gitignore-work-in-this-case).gitignore也[不起作用](https://stackoverflow.com/questions/11451535/gitignore-not-working)

files/conf.php 已经在 .gitignore 中，但是 git status 仍然显示它的修改，为什么？

我的意思是，如果该文件位于 .gitignore 中，则不应跟踪它...

```
cat .gitignore
files/conf.php
[root@home blogmi]# git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   files/conf.php
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-14T20:47:20.257

`.gitignore`只忽略未跟踪的文件。一旦你开始跟踪一个文件（就像你已经完成的那样`files/conf.php`），它就不会被忽略。

您可以使用`git rm --cached files/conf.php`从 git 中删除文件，而无需实际从文件系统中删除它。提交后，该文件将开始被正确忽略。

# c++ - typdef 类型的单独模板

> ID：12431749
> 
> 赞同：0
> 
> 时间：2012-09-14T20:46:03.930
> 
> 标签：c++, templates, typedef

我创建了一个模板类，它根据数据类型输出值，即 long 作为有符号整数（十进制）输出，而`RESULT`以十六进制格式输出。我定义`RESULT`为：

```
typdef long RESULT. 
```

这不能正常工作，因为`RESULT`被视为 a `long`and`RESULT`的输出例程永远不会被调用（而是`long`' 的例程被调用）。有解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:04:29.197

由于给出的原因，您想要的将不起作用。

只需添加一个可以根据需要格式化输出的 Function 对象怎么样。

```
class A {
    template< typename T>
    std::string output(long val) {return T(val)}
}

struct decimal {
    std::string operator()(long val) {//return decimal}
}

struct hex {
    std::string operator()(long val) {//return hex}
} 
```

一个示例用例：

```
A a;
cout << a.output<decimal>(10) << endl;
cout << a.output<hex>(10) << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T20:48:49.653

这是意料之中的。

typedef 不会改变编译器如何看待类型——它为类型创建一个新名称，在这种情况下为 RESULT，并且由于它是相同的类型，它的行为和使用与指定类型相同的代码，在此案例长。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:59:06.277

`typedef`仅声明`alias`类型。您可以使用一些“ `template magic`”作为您的示例。

```
template<typename T, int I>
struct true_typedef
{
    explicit true_typedef(const T& val):value(val) { }
    T value;
};

typedef true_typedef<long, 0> RESULT; 
```

例子。

[http://liveworkspace.org/code/1fc907ae5cddc23bd7d9545cfafa8a05](http://liveworkspace.org/code/1fc907ae5cddc23bd7d9545cfafa8a05)

# python - 在函数内部创建函数是否有经常性成本？

> ID：12431755
> 
> 赞同：3
> 
> 时间：2012-09-14T20:46:47.593
> 
> 标签：python, python-2.7

我正在用 Python 编写一个函数，我计划为每个脚本执行运行 10 000 次或更多次。该函数当前包含 3 个子函数，但脚本完成后可能包含 20 个或更多。我是在想; 一遍又一遍地声明这些函数（因为父函数将运行数千次）会产生经常性的性能成本，还是优化而不是问题？

**将所有这些子功能分成一个类是否有助于提高性能？**

*（如果没有人知道答案，我打算测试一下并在此处发布结果。）*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T20:52:49.720

函数定义的性能影响可以忽略不计，与定义局部变量相当。

函数的主体只编译一次，在代码块执行期间你最终得到的只是加载编译块（`LOAD_CONST`），`MAKE FUNCTION`然后字节码的结果存储在一个局部变量中：

```
>>> import dis
>>> def foo():
...     def bar():
...         pass
...     print 'boo!'
... 
>>> dis.dis(foo)
  2           0 LOAD_CONST               1 (<code object bar at 0x106c447b0, file "<stdin>", line 2>)
              3 MAKE_FUNCTION            0
              6 STORE_FAST               0 (bar)

  4           9 LOAD_CONST               2 ('boo!')
             12 PRINT_ITEM          
             13 PRINT_NEWLINE       
             14 LOAD_CONST               0 (None)
             17 RETURN_VALUE 
```

现在，如果您调用包含嵌套函数的函数数千次，您会注意到该`MAKE_FUNCTION`操作的性能影响：

```
>>> import timeit
>>> def nonlocal(): pass
... 
>>> def callnonlocal(): nonlocal()
... 
>>> def calllocal():
...     def localf(): pass
...     localf()
... 
>>> timeit.timeit('callnonlocal()', 'from __main__ import callnonlocal')
0.39106082916259766
>>> timeit.timeit('calllocal()', 'from __main__ import calllocal')
0.4878239631652832 
```

请注意，尽管您在函数中放入的*实际代码*越多，这种差异就会越小。上面的例子非常做作，只关注`MAKE_FUNCTION`字节码对执行时间的影响。

首先更好地优化可读性和可维护性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:53:30.680

是的，在另一个函数中定义一个函数比在模块范围内定义函数有轻微的性能损失。

# java - Java：为什么 PrintWriter 或 PrintStream 类不抛出异常？

> ID：12431757
> 
> 赞同：5
> 
> 时间：2012-09-14T20:47:01.303
> 
> 标签：java, exception, formatter, printwriter, printstream

> **可能重复：**
> [PrintWriter 和 PrintStream 从不抛出 IOExceptions](https://stackoverflow.com/questions/297303/printwriter-and-printstream-never-throw-ioexceptions)

也许这个问题有点“奇怪”。但我很想知道为什么[PrintWriter](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)和[PrintStream](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html)都不会自动检查运行时异常，它们提供了一个 checkError() 方法。

提前感谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T20:50:12.433

对于经常写入标准输出或错误的 PrintStream，这些流可能已被关闭或丢弃，但您不希望程序因此而意外失败。

PrintWriter 在很多方面都是 PrintStream 的 Writer 版本，尽管我不确定重复 PrintStream 的错误是否是个好主意。;)

PrintWriter 不报告 IOException 的事实使其成为将文本写入您经常需要知道连接失败的 Socket 的糟糕选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:05:25.547

我认为这主要是因为 System.err 是一个 PrintStream。

当您在 catch 块中处理异常时，调用 e.printStackTrace() 很常见，它会写入 System.err。如果该调用引发异常，您将丢失原始异常并从您的代码中获取 PrintStream 错误。然后你需要在你的 catch 块中额外的 try/catch 来防止这个问题，这会造成很大的混乱。

请注意，JDK 1.7 解决了从 catch 块中抛出异常的问题，并允许您访问这两个异常。

# google-app-engine - AppEngine 上的 remote_api 处理程序的管理员访问错误

> ID：12431758
> 
> 赞同：3
> 
> 时间：2012-09-14T20:47:01.760
> 
> 标签：google-app-engine, remoteapi

尝试配置我的 AppEngine 应用程序的 remote_api，我使用所需的设置 app.yaml：

```
builtins:
    - remote_api: on 
```

然后部署到应用引擎。现在，我是此应用程序的系统管理员（当前所有者），但是当我访问时`https://myapp.appspot.com/_ah/remote_api`，我收到消息：

```
`您必须以管理员身份登录才能访问。`。  

```

为什么会这样？

为了完整起见，我问了我的应用程序的所有者，他得到了同样的信息。我们当时都登录了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:44:17.543

remote_api URL 不适合在浏览器中使用。

你在使用 remote_api_shell.py 脚本吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:15:23.317

您必须使用具有管理员权限的 Google（Gmail？）帐户登录。

# ruby-on-rails - 使用 RubyOnRails 上传 HTML5 FormData 文件

> ID：12431760
> 
> 赞同：9
> 
> 时间：2012-09-14T20:47:09.257
> 
> 标签：ruby-on-rails, ajax, html, file-upload, form-data

我使用此脚本在 Rails 3.2.8 应用程序中使用 HTML5 FormData 上传文件（一个接一个）。

[http://jsfiddle.net/RamPr/](http://jsfiddle.net/RamPr/)

```
$('.uploader input:file').on('change', function() {
  $this = $(this);

  $('.alert').remove();

  $.each($this[0].files, function(key, file) {
    $('.files').append('<li>' + file.name + '</li>');

    data = new FormData();
    data.append(file.name, file);

    $.ajax({
      url: $('.uploader').attr('action'),
      contentType: 'multipart/form-data',
      type: 'POST',
      dataType: 'json',
      data: data,
      processData: false
    });
  });
}); 
```

但是当我上传文件时，我在控制台中收到此错误：

```
webrick/server.rb:191:in `block in start_thread' ERROR ArgumentError: invalid %-encoding ("filename.jpeg" Content-Type: image/jpeg 
```

我该如何解决这个错误？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-19T22:00:08.350

你见过这个问题吗？[使用 jQuery.ajax 发送 multipart/formdata](https://stackoverflow.com/questions/5392344/sending-multipart-formdata-with-jquery-ajax)

看起来您可能会遇到 jQuery 添加内容类型标头，这会导致边界字符串丢失。从上面的链接问题：

> 必须将`contentType`选项设置为`false`，强制 jQuery 不为您添加 Content-Type 标头，否则将缺少边界字符串。此外，您必须将`processData`标志设置为`false`，否则，jQuery 将尝试将您的 FormData 转换为字符串，这将失败。

基于此，试一试：

```
$.ajax({
  url: $('.uploader').attr('action'),
  contentType: false,
  cache: false,
  processData: false,
  type: 'POST',
  dataType: 'json',
  data: data
}); 
```

我自己没有尝试过，但我怀疑这可能是您正在寻找的机器人 :)

# javascript - 未捕获的 ReferenceError：未定义函数（匿名函数）

> ID：12431765
> 
> 赞同：3
> 
> 时间：2012-09-14T20:47:39.223
> 
> 标签：javascript, google-chrome

忍受我...我不是真正的开发人员，所以我确定我一开始并没有以最好的方式解决这个问题，但我希望我们可以使用我必须制作的东西它工作正常...

我有一个 js 和 php 的组合，它们一起工作以在屏幕上闪烁图像对，然后捕获用于选择左或右图像的按键（使用'c'和'm'或左箭头和'右箭头'）。

它似乎在 Safari、Firefox 和 IE 上运行良好，但在 Chrome 中运行不一致（有时会，有时不会）。

我只是在运行时查看了 Chrome 中的检查器，发现其中两个函数没有找到：

> 未捕获的 ReferenceError：imgChoice 未定义（匿名函数）
> 
> 未捕获的 ReferenceError：未定义 stopChoice（匿名函数）

在我寻找答案的过程中，我得到的最接近的结果可能是 Chrome 处理 flashImages() 函数的速度太快了，而没有到达其他两个函数。

有没有办法解决这个问题？也许将 imgChoice 和 stopChoice 函数集成到 flashImages 函数中？

以下是现有功能：

```
function imgChoice(imgPair)
{
    var imgDataR = '<input type="hidden" name="'+imgPair+'[<?php echo $_POST['topicNumber']; ?>]" value="r" />';
    var imgDataL = '<input type="hidden" name="'+imgPair+'[<?php echo $_POST['topicNumber']; ?>]" value="l" />';
    var noData = '<?php $noData = 1; ?>';
    $(document).keydown(function(event) {
        if (event.keyCode == 67 || event.keyCode == 37) {
            document.getElementById(imgPair+'Data').innerHTML = imgDataL;
            $(document).unbind('keydown');
            }
        if (event.keyCode == 77 || event.keyCode == 39) {
            document.getElementById(imgPair+'Data').innerHTML = imgDataR;
            $(document).unbind('keydown');
        }
    });
    //div = document.getElementById(imgPair);
}
function stopChoice(imgPair)
{
    $(document).unbind('keydown');
}
function flashImages()
{
i=500;
//$('#startTopic').fadeOut(500);
setTimeout("document.getElementById('fullpd').style.cursor='none';",50);
setTimeout("document.getElementById('fullpd').style.background='#464646';",500);

for(x=1;x<=imgPairs.length-1;x++)
    {
    setTimeout("document.getElementById('clickSound').play();",i+2000);
    setTimeout('document.getElementById("'+imgPairs[x]+'").style.display="block";',i+3500)
    setTimeout('imgChoice("'+imgPairs[x]+'");',i+3495)
    setTimeout('document.getElementById("'+imgPairs[x]+'").style.display="none";',i+4000)
    setTimeout('stopChoice("'+imgPairs[x]+'");',i+6000)
    i=i+4000;
    }
setTimeout("document.getElementById('fullpd').style.background='#eaeaea';",i+1000)
setTimeout("document.getElementById('fullpd').style.cursor='default';",i)
setTimeout(function() {$('#endTopic').fadeIn(1000);},i+1000);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:04:04.220

为什么不尝试在绑定事件处理程序时委托事件..也许这可能会有所帮助..

`$(document).keydown(function(event) {` 而不是这个尝试

```
$(document).on('keydown' ,function(event) { 
```

# php - Magento 自定义目录搜索结果 html

> ID：12431767
> 
> 赞同：1
> 
> 时间：2012-09-14T20:47:53.740
> 
> 标签：php, html, magento, magento-1.6

我想自定义 CatalogSearch 的结果页面的布局。

我想删除页面上的分页和所有其他工具，并显示一个更简单的页面，因为我们只有很少的产品。然后我需要更改结果的显示方式以自定义图像的大小并在图像上添加翻转。

我怎样才能做到这一点？通过查看它调用的源代码`$this->getProductListHtml()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T22:32:53.457

确定要编辑哪些模板文件的最简单方法是在您的 Magento 配置中启用“模板路径提示”。

为此，请执行以下操作：

1.  在您的 Magento 管理员中，转到**系统 > 配置 > 开发人员**

2.  **在Current Configuration Scope**的左上角，选择**Main Website**（或您尝试修改的站点的名称。）

3.  现在在右侧，将**模板路径提示**设置为**是**，然后单击**保存配置**

4.  回到你的前端。现在，每个部分都将显示您需要修改的确切模板。 *注意：您应该始终将默认模板文件复制到您自己的模板目录中，而不是修改 Magento 的核心主题。*

* * *

或者，您可以使用 CSS 定位 Magento 中的每个页面。`<body>`Magento 为每个页面的标签分配一个唯一的类

在您的情况下，目录搜索结果页面的主体类为**catalogsearch-result-index**。如果要隐藏该页面上的工具栏，可以将以下内容添加到模板的 style.css 文件中：

```
.catalogsearch-result-index .toolbar {
   display: none;
} 
```

# javascript - 使用 jQuery 从 XML 加载 Highcharts 系列

> ID：12431768
> 
> 赞同：5
> 
> 时间：2012-09-14T20:47:53.870
> 
> 标签：javascript, jquery, xml, highcharts

我正在尝试使用 jQuery 从 xml 源填充 highchart 系列。XML 文件是从 RRDTool 导出的，格式如下：

```
<data>
<row><t>1347559200</t><v>2.1600000000e+01</v></row>
<row><t>1347562800</t><v>2.1504694630e+01</v></row>
<row><t>1347566400</t><v>2.1278633024e+01</v></row>
.
.
.
</data> 
```

我的方法是使用 jQuery 加载数据并将系列推送到图表：

```
$.ajax({
      type: "GET",
      url: "data/data.xml",
      dataType: "xml",
      success: function(xml) {
        var series = {  data: []
                    };

        $(xml).find("row").each(function()
        {
            var t = parseInt($(this).find("t").text())*1000
            var v = parseFloat($(this).find("v").text())
            series.data.push([t,v]);
        });
        options.series.push(series);
      }
  }); 
```

我最终收到以下错误：

> 意外值 NaN 解析 y 属性

我创建了一个 JSFiddle 来演示代码：http: [//jsfiddle.net/GN56f/](http://jsfiddle.net/GN56f/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:12:47.940

除了跨域问题外，错误是由于绘图选项中存在现有的空系列。选项中的初始系列应设置为：

```
series: [] 
```

代替：

系列：[{名称：'温度'，数据：[]}]

随后的调用`options.series.push(series);`仅添加一个新系列，而空的系列保持不变。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T00:40:44.987

问题：

*   `var`你在声明之前忘记`options`了`chart`
*   `;`结束后忘记了`options`
*   `options`Hava 您在传递给之前尝试过登录`Highcharts`吗？您正在通过以下`series`.

这是预期的结果？我想不是。

```
series: [{
    name: 'Temperature',
    data: []
}, {
    data: [// data from xml]
}] 
```

*   你是在完成请求之前创建图表，所以`options.series.data.push`不行，你必须使用[setData](http://api.highcharts.com/highstock#object-Series)动态更新，但是有一个问题，你不知道你的请求需要多长时间，所以我建议你创建图表里面`success`。

试试下面的。

```
success: function(xml) {
    $('row', xml).each(function() {
        options.series.data.push([t,v]);
    });
    //@todo: declare chart as global before the ajax function
    chart = new Highcharts.Chart(options);
} 
```

# android - 无法在另一个活动中启动 listactivity

> ID：12431770
> 
> 赞同：1
> 
> 时间：2012-09-14T20:48:05.427
> 
> 标签：android, listactivity, start-activity

在我的 android 应用程序中，有一个名为 mylistview 的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/app_name" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

并且有一个 MyListView JAva 源：

```
package ir.smspeik.sms;

import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.widget.TextView;

public class MyListView extends ListActivity {
    /** Called when the activity is first created. */
    TextView selection;
    String[] names;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mylistview);
        names = new String[] { "sunday", "monday", "tuesday", "wednesday",      
                "thrusday", "friday", "saturday",};      
        this.setListAdapter(new ArrayAdapter<String>(this, R.layout.listlayout, R.id.label,names));     
        selection=(TextView)findViewById(R.id.label);
    }

    public void onListItemClick(ListView parent, View v, int position, long id) {
        selection.setText(names[position]);
    }
} 
```

我开始：

```
ImageButton btnRealState = (ImageButton) findViewById(R.id.imgbtnRealstate);
        btnRealState.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                startActivity(new Intent(MainActivity.this,
                        ir.smspeik.sms.MyListView.class));
            }
        }); 
```

在 AndroidManifest.xml 中：

```
 <activity
            android:name=".MyListView" android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="ir.smspeik.sms.MyListView" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

但是当我想启动它时，这个错误就会缓解：

```
09-14 20:25:56.780: E/AndroidRuntime(760): FATAL EXCEPTION: main
09-14 20:25:56.780: E/AndroidRuntime(760): android.content.ActivityNotFoundException: Unable to find explicit activity class {ir.smspeik.sms/ir.smspeik.sms.MyListView}; have you declared this activity in your AndroidManifest.xml?
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1541)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.Activity.startActivityForResult(Activity.java:3351)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.Activity.startActivityForResult(Activity.java:3312)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.Activity.startActivity(Activity.java:3522)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.Activity.startActivity(Activity.java:3490)
09-14 20:25:56.780: E/AndroidRuntime(760):  at ir.smspeik.sms.MainActivity$3.onClick(MainActivity.java:62)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.view.View.performClick(View.java:4084)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.view.View$PerformClick.run(View.java:16966)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.os.Handler.handleCallback(Handler.java:615)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.os.Handler.dispatchMessage(Handler.java:92)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.os.Looper.loop(Looper.java:137)
09-14 20:25:56.780: E/AndroidRuntime(760):  at android.app.ActivityThread.main(ActivityThread.java:4745)
09-14 20:25:56.780: E/AndroidRuntime(760):  at java.lang.reflect.Method.invokeNative(Native Method)
09-14 20:25:56.780: E/AndroidRuntime(760):  at java.lang.reflect.Method.invoke(Method.java:511)
09-14 20:25:56.780: E/AndroidRuntime(760):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-14 20:25:56.780: E/AndroidRuntime(760):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-14 20:25:56.780: E/AndroidRuntime(760):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T20:54:32.527

您可以将包名称排除在`startActivity()`. 你试过吗？

```
public void onClick(View v) {
     startActivity(new Intent(MainActivity.this, MyListView.class));
} 
```

您的清单看起来不错！

# sockets - 如何通过 net.socket 或 http.request 创建 HTTP-1.0 请求？

> ID：12431774
> 
> 赞同：6
> 
> 时间：2012-09-14T20:48:37.723
> 
> 标签：sockets, node.js, http-1.0

我想通过 net.socket 或 http.request 创建一个 HTTP-1.0 请求，但是这段代码有问题：

```
var http = require('http');

var options = {
   host:'google.com',
   method: 'CONNECT',
   path: 'google.com:80',
   port: 80
};

var req = http.request(options);
req.end();

req.on('connect', function(res, socket, head) {
   socket.write('GET / HTTP/1.0\r\n' +
                'Host: google.com:80\r\n' +
                '\r\n');
socket.on('data', function(chunk) {
    console.log(chunk);
});
socket.end();
}); 
```

我得到同样的错误：

```
events.js:66
        throw arguments[1]; // Unhandled 'error' event
                   ^
Error: Parse Error
    at Socket.socketOnData (http.js:1366:r20)
    at TCP.onread (net.js:403:27) 
```

欢迎您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T13:04:56.977

`http.request`总是使用 HTTP/1.1，它在源代码中是硬编码的。

下面是使用纯 TCP 流（通过）发送 HTTP/1.0 请求的代码`net.connect`：

```
var net = require('net');

var opts = {
  host: 'google.com',
  port: 80
}

var socket = net.connect(opts, function() {
  socket.end('GET / HTTP/1.0\r\n' +
             'Host: google.com\r\n' +
              '\r\n');
});

socket.on('data', function(chunk) {
  console.log(chunk.toString());
}); 
```

# jquery - 使用 jquery 或 regex 删除 img 标签中的字符

> ID：12431786
> 
> 赞同：0
> 
> 时间：2012-09-14T20:49:35.357
> 
> 标签：jquery, regex, string, character

我想删除我的 img 标签中的某些字符，这些字符是循环中的列表项。我想摆脱： `" li="" ..."`但保持我的图像 src 完整。任何帮助都是极好的！！

```
 This is my output:

   <li>
   <img li="" ...<="" src="myimage.jpg?932">
   <li> 
```

这是我尝试过但没有运气...

```
$("#blogs li").each(function(i) {
   $(this).children('img').find('...<="" li="">').remove().end().html();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T20:51:46.363

签出：[removeAttr](http://api.jquery.com/removeAttr/)

如：

```
$("#blogs li").each(function(i) {
   $(this).children('img').removeAttr('li');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:52:43.427

您应该修复循环代码，而不是使用 JavaScript。尝试使用。 `replaceWith`方法。

```
$("#blogs li img").replaceWith(function(){
   return '<img src="'+this.src+'"/>';
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T20:55:50.613

不需要 .each：

```
$("#blogs li img").removeAttr('li'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:03:00.580

看起来 li 没有结束标签我担心解析器会失败：/

你试过这个

```
$("#blogs li").each(function(i) {
   alert($(this).html()); // or alert($(this).children().html());
}); 
```

为什么不尝试在服务器端进行修复？

# asp.net - 带有 Visual Studio 最终代码的表适配器

> ID：12431788
> 
> 赞同：2
> 
> 时间：2012-09-14T20:49:44.853
> 
> 标签：asp.net, visual-studio-2010, tableadapter

我在两个文本框中输入用户名和密码的值。当我单击提交时，我希望表适配器检查数据库以查看这些值是否真的是值并允许用户登录。

这是我的代码：

```
protected void Submit_Click(object sender, EventArgs e)
{

    //assign text from the textboxes to variables 
    string userName = TextBox1.Text;
    string passWord = TextBox2.Text;

    lblError.Visible = true;

    try
    {

        string passwordValue = Encrypt(passWord);

        DataSet1.tblUserDataTable dataTable = proccessedProcess.Login(userName, passwordValue);

        if (dataTable != null & dataTable.Count!=0)
        {
            DataSet1.tblUserRow dataRow = dataTable[0];
            if (dataRow.nUserID.ToString() == "00000000-0000-0000-0000-000000000000")
            {
                lblError.Text = "";

            }

            else if(dataRow.nUserID.ToString() != "00000000-0000-0000-0000-000000000000")
            {
                Session["CurrentUserID"] = dataRow.nUserID.ToString();
                Session["LoggedIn"] = "YES";
                Session["LastLogin"] = DateTime.Now.ToString();
                Session["UserName"] = dataRow.txtUserName;

                HttpContext.Current.Response.Redirect("MainCustomer.aspx");

            }
        } else {

                lblError.Text = "Incorrect UserID or Password";

            }

    }

    catch (Exception E)
    {
        E.Message.ToString();
        lblError.Text = E.Message;

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:00:01.067

在 catch 部分你有 E.Message.ToString(); 这没有效果。您必须将其设置为标签才能查看是否发生异常或抛出 E

```
catch (Exception E)
{
   // E.Message.ToString();
   Throw;
} 
```

# sql - SQL Server:exec('CALL' DB2; 关于管理结果集列的建议

> ID：12431800
> 
> 赞同：0
> 
> 时间：2012-09-14T20:51:05.540
> 
> 标签：sql, sql-server-2008, stored-procedures, db2

技术人员——

如果我发出一个 openquery 选择，我的问题就会得到解决——但据我所知 openquery 不允许调用 lingo/w。远程 db2 服务器的参数！:)

这是有效的：

```
declare @z varchar(max);

set @z = '999990480,888887530';

exec ('CALL S1CATALOG.HCMDEV.EMP_ALL_STARS(?)',@z) AT DB2I; 
```

此存储过程 (EMP_ALL_STARS) 接受连接的字符串作为 clob，然后返回大约 35 列。并非所有有兴趣使用此存储过程的应用程序都需要全部 35 列。关于如何管理结果集的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:04:01.423

您是否可以控制远程 DB2 过程？如果是这样，您可以在 proc 中定义多个游标，每个游标在结果集中都有一组不同的列。在运行时，当需要 proc 打开执行查询并将结果集返回给调用者的游标时，一些逻辑可以评估相关的输入参数以确定打开哪个游标。

# css - DIV 在 Chrome 中意外浮动

> ID：12431802
> 
> 赞同：0
> 
> 时间：2012-09-14T20:51:21.850
> 
> 标签：css, google-chrome, mootools

我正在使用 mootools 滑块，并且 DIV 标签以某种方式浮动在 Chrome 中的父 div 旁边。这在其他浏览器中没有发生。我设法通过添加一个具有固定高度的空 div 来找到一种解决方法，但在不改变 DOM 结构的情况下寻找一种更好的方法来处理这个问题。CSS中有解决方案吗？为什么意外的浮动只发生在 Chrome 中？

案例一：div.lowerPanel 不出现，浮在左上角

[http://jsfiddle.net/superkingjo1/bQpjV/](http://jsfiddle.net/superkingjo1/bQpjV/)

案例 2：添加了具有固定高度的空 DIV 将 div.lowerPanel 置于预期位置 [http://jsfiddle.net/superkingjo1/bQpjV/4/](http://jsfiddle.net/superkingjo1/bQpjV/4/)

感谢您的帮助，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:02:49.057

可能是这一行（html中的第3行）

```
<div class="mainPanelLayersDiv" style="position: relative; float: left; "> 
```

我`float: left;`从第一个小提琴中删除了它，得到的结果似乎与小提琴#2 相同。

# php - Doctrine 2 找不到实体类

> ID：12431806
> 
> 赞同：4
> 
> 时间：2012-09-14T20:51:34.880
> 
> 标签：php, orm, doctrine, doctrine-orm

我无法让 Doctrine 找到位于 www/entities/.. 中的实体类

我不断收到错误“**致命错误：在第 7 行的 /home/dxs/public_html/create-event.php 中找不到类 'Event'** ”.. 我觉得我几乎尝试了所有东西..

我调用的文件是：

## 创建事件.php：

```
<?php
require_once("bootstrap.php");
require_once("entities/Event.php");
$name = $argv[1];
$description = $argv[2];

$event1 = new Event;
$event1->setName("test");
$event1->setDescription("testdesc");

$entityManager->persist($event1);
$entityManager->flush();

echo "Created Event with ID " . $event1->getId() . "\n"; 
```

## 引导程序.php

```
<?php
use Doctrine\ORM\EntityRepository;

if(!class_exists("Doctrine\Common\Version", FALSE))

{

    require_once 'bootstrap_doctrine.php';

} 
```

## 引导程序

```
<?php
use Doctrine\ORM\EntityRepository;

if(!class_exists("Doctrine\Common\Version", FALSE))
{

    require_once 'bootstrap_doctrine.php';

} 
```

## 更新了引导学说

```
 <?php
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(dirname(__FILE__)));

use Doctrine\ORM\Tools\Setup;
use Doctrine\Common\Annotations\AnnotationReader;
use Doctrine\Common\Annotations\AnnotationRegistry;

require_once "Doctrine/ORM/Tools/Setup.php";

Setup::registerAutoloadPEAR();
$cl = new Doctrine\Common\ClassLoader('Entities', __DIR__);
$cl->register();

$isDevMode = true;

$path = array(__DIR__.'/entities');
$config = Setup::createAnnotationMetadataConfiguration($path, $isDevMode);

// database configuration parameters
$conn = array(
    'driver' => 'pdo_mysql',
    'user' => 'dxs',
    'password' => 'pass',
    'dbname' => 'db'

);
// obtaining the entity manager
$entityManager = \Doctrine\ORM\EntityManager::create($conn, $config);   

AnnotationRegistry::registerFile("/usr/local/lib/php/Doctrine/ORM/Mapping/Driver/DoctrineAnnotations.php");
AnnotationRegistry::registerAutoloadNamespace("Symfony\Component\Validator\Constraint", "/usr/local/lib/php/Doctrine/Symfony");
AnnotationRegistry::registerAutoloadNamespace("MyProject\Annotations", ROOT.DS.'www');

$reader = new AnnotationReader();
AnnotationReader::addGlobalIgnoredName('dummy'); 
```

我究竟做错了什么？

## 更新了带有注释的事件类

事件类

```
<?php
namespace Entities\Event;
use Doctrine\ORM\Mapping AS ORM;

/**
 * @ORM\Entity
 * @Table(name="events")
 * @Annotations\Event
 */
class Event
{
    /** @ORM\Id @GeneratedValue
     *  @var int
     */
    protected $id;

    /**
     * @ORM\Column(type="string")
     * @Assert\NotEmpty
     * @var string
     */
    protected $name;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:56:43.493

有关定义实体的正确方法，请参阅此文档 [原则注释](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/reference/annotations.html "教义注释") 。

例如，您需要`* @ORM\Entity`在您的开场评论中使用。

# jquery - 使用 AJAX 将表单发布到 Spring MVC 控制器

> ID：12431809
> 
> 赞同：0
> 
> 时间：2012-09-14T20:51:47.067
> 
> 标签：jquery, ajax, spring-mvc, controller

如何使用 AJAX 将 jsp 页面发布到 SpringMVC 控制器。我想将 AJAX 集成到 SpringMVC 应用程序中。此外，最好使用 html 列表框并在其上设置一个事件，以便在用户单击该项目时可以持久保存对数据库中数据的任何更改，或者这可以通过 JQuery 控件轻松完成。

我是使用 AJAX 的新手，所以我希望有人能指出一个很好的例子，将表单发布到控制器以使用 AJAX 进行处理，以及使用绑定到数据库的 JQuery 控件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:12:20.083

以下是进行 AJAX 调用的 jquery 方式。

```
$(".delete").click(function(){
                $.ajax({
                    url: '<c:url value="/relyingparty/delete"/>' + '?id=' + $(this).attr("refId") ;,
                    type: 'POST',
                    success: function(result) {

                    }
                });
}); 
```

（这只是一个示例，而不是完整的工作示例）

对于上面提到的 url，您应该有一个 Spring MVC 控制器，该控制器带有一个用 @RequestMapping 注释的方法

```
@RequestMapping(value = "/delete", method = RequestMethod.DELETE)
    public String deleteRelyingParty(@RequestParam(required = true) Integer id){
} 
```

# applescript - 如何使applescript不会在tell块中自动打开应用程序

> ID：12431811
> 
> 赞同：0
> 
> 时间：2012-09-14T20:51:53.637
> 
> 标签：applescript

我遇到了 applescript 的问题，每当我打开一个 applescript 文件（在 AppleScript Editor 或 Automator 中）时，它都会自动打开一个tell语句/块中提到的任何程序。大多数这些告诉块只能通过条件访问，我想找到一种方法来阻止 applescript 打开所有提到的应用程序的默认行为。

这基本上就是我正在做的事情：

```
if currentApplication is "Application 1" then
    tell application "Application 1"
       do stuff
    end tell
else if currentApplication is "Application 2" then
    tell application "Application 2"
       do stuff
    end tell
end if 
```

不幸的是，每当我打开这个脚本时，如果“应用程序 1”和“应用程序 2”还没有打开，它就会同时打开它们，即使它应该只在其中一个应用程序打开的情况下才进入 tell 语句。我获取当前应用程序的方式并不真正相关，即使我的“if”语句是“if false”并且我删除了获取“当前”（或最接近的）应用程序的方法，应用程序仍将与小程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:31:40.950

如果您只是运行已编译的脚本，则只有在 AppleScript 需要向其发送命令时才会启动应用程序，但如果您在脚本编辑器中打开脚本，则脚本中引用的所有应用程序都将启动以获取它们的自定义术语 - 请参阅[AppleScript 发行说明](https://developer.apple.com/library/mac/#releasenotes/AppleScript/RN-AppleScript/Introduction/Introduction.html)。

# php - 仅显示当前类别的第一级子类别

> ID：12431814
> 
> 赞同：0
> 
> 时间：2012-09-14T20:52:12.337
> 
> 标签：php, magento

我正在使用以下代码来显示您拥有的当前类别的子类别。

但是，我有 2 个级别的子猫，所以我需要能够以某种方式修改代码以仅显示您拥有的当前类别的第 1 级子类别，而不是两个级别？

```
<?php 
/* Load category by id */
$cat = Mage::registry('current_category');

 /*Returns comma separated ids*/
$subcats = $cat->getChildren();

foreach(explode(',',$subcats) as $subCatid)
{
    $_category = Mage::getModel('catalog/category')->load($subCatid);
    if($_category->getIsActive()) {
        echo '<li><a href="'.$_category->getURL().'" title="View the products for the  "'.$_category->getName().'" category">'.$_category->getName().'</a></li>';

        /* Load category by id */
        $sub_cat = Mage::getModel('catalog/category')->load($_category->getId());

        /*Returns comma separated ids*/
        $sub_subcats = $sub_cat->getChildren();
        foreach(explode(',',$sub_subcats) as $sub_subCatid)
        {
            $_sub_category = Mage::getModel('catalog/category')->load($sub_subCatid);
            if($_sub_category->getIsActive()) {
                echo '<li class="sub_cat"><a href="'.$_sub_category->getURL().'" title="View the products for the "'.$_sub_category->getName().'" category">'.$_sub_category->getName().'</a></li>';
            }
        }      
    }
}
?> ` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:19:12.013

如果您只想显示第一级子类别，那么只需摆脱

```
/*Returns comma separated ids*/
$sub_subcats = $sub_cat->getChildren();
foreach(explode(',',$sub_subcats) as $sub_subCatid)
{
    $_sub_category = Mage::getModel('catalog/category')->load($sub_subCatid);
    if($_sub_category->getIsActive()) {
        echo '<li class="sub_cat"><a href="'.$_sub_category->getURL().'" title="View the products for the "'.$_sub_category->getName().'" category">'.$_sub_category->getName().'</a></li>';
    }
} 
```

由于您现在正在加载当前类别，`$cat = Mage::registry('current_category');`并且 fetches 是您循环通过的子类别（第一级）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:19:17.243

您可以使用`$_sub_category->getLevel()`来检查当前级别。

尝试重写以下代码

```
if($_sub_category->getIsActive()) { 
```

至

```
if($_sub_category->getIsActive() && $_sub_category->getLevel() == 2) { 
```

请确保`getLevel()`返回适当的级别（不记得是 1,2 或 3）。

# wpf - 列表框项样式

> ID：12431817
> 
> 赞同：0
> 
> 时间：2012-09-14T20:52:23.683
> 
> 标签：wpf

我需要为 listboxItem 编写一个样式，当它被选中或鼠标悬停时，它将在 listboxitem 的右侧添加一个按钮。该按钮也需要有一个命令绑定。这种风格需要在不同的地方使用。该按钮也没有边框。但是当鼠标悬停在按钮上时，它将有一个边框。

我怎么写这个？

我尝试编写样式，但无法绑定到样式内的按钮命令。

使用的代码：（对不起，我无法在此处正常粘贴我的代码，所以它在这里[http://justpaste.it/1b9s](http://justpaste.it/1b9s))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:17:32.197

很高兴看到一些代码，但应该工作的一个选项是创建一个 DataTemplate。您可以在 ListBox ItemTemplate 属性上设置它，并在您可能需要它的不同位置使用它。

# ms-access - 是否可以使用 JDBC 到 ODBC 桥进行 SQL 连接？

> ID：12431818
> 
> 赞同：1
> 
> 时间：2012-09-14T20:52:24.537
> 
> 标签：ms-access, jdbc, odbc, ms-access-2003, squirrel-sql

当我使用 MS Access 中的字段连接运行查询时，我可以编写以下内容并且它工作正常：

```
SELECT e.FirstName + " " + e.LastName + " " + e.MiddleName AS Attendant FROM (EMPLOYEES e INNER JOIN PAY pay ON e.SocialSecurityNumber = pay.Pay_Emp_ID) INNER JOIN Patients pat ON pay.Pay_Pat_ID = pat.PatientID; 
```

但是，如果我尝试使用 SQuirreL SQL 中的 JDBC / ODBC 桥运行相同的查询，则会收到一条错误消息：

```
Error: [Microsoft][ODBC Microsoft Access Driver] Too few parameters. Expected 1.
SQLState:  07001
ErrorCode: -3010 
```

ODBC 是否需要一些不同于 MS-Access 的其他语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:34:47.950

Access ODBC 驱动程序允许连接，但这些双引号字符似乎存在问题……至少在这种情况下。根据 VBScript 的测试，我认为如果您用单引号代替双引号，您的查询可能会起作用：

```
SELECT e.FirstName + ' ' + e.LastName + ' ' + e.MiddleName AS Attendant
FROM
    (EMPLOYEES e INNER JOIN PAY pay
    ON e.SocialSecurityNumber = pay.Pay_Emp_ID)
    INNER JOIN Patients pat
    ON pay.Pay_Pat_ID = pat.PatientID; 
```

但是，我不了解 Java，所以不知道该桥接功能是否会以某种方式混淆 ODBC 通信。但是直接通过 Access ODBC 驱动程序提交该查询确实对我有用。

# vim - 让 Vim FuzzyFinder 在搜索时停止闪烁？

> ID：12431819
> 
> 赞同：0
> 
> 时间：2012-09-14T20:52:33.107
> 
> 标签：vim, fuzzyfinder

我设置了 FuzzyFinder，它工作得很好，但是当我执行“:FufCoverageFile”时，每次添加或删除字符时，文件匹配下拉菜单都会闪烁。当我键入以搜索文件时，这会非常非常分散注意力。我可以做些什么来阻止文件查找器分散注意力吗？

[https://github.com/vim-scripts/FuzzyFinder](https://github.com/vim-scripts/FuzzyFinder)

vim --版本：

VIM - Vi IMproved 7.3（2010 年 8 月 15 日，2011 年 7 月 31 日 19:27:29 编译）

运行 OS X Lion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:58:38.993

这与 FuzzyFinder 无关，而是与您的终端不支持您的菜单尝试显示的任何颜色有关。这些由`Pmenu`和设置`PmenuSel`。

检查`:hi Pmenu`并`:hi PmenuSel`查看它们设置为什么颜色。试着看看这是否会阻止它`:hi clear Pmenu`。`:hi clear PmenuSel`如果是这样，那么它证实了我的诊断。如果您的终端支持 256 色，您可能需要启用它。您可以使用 . 检查您当前的 $TERM `:echo $TERM`。

# php - 使用 Javascript 实时读取 PHP 数组的结果

> ID：12431820
> 
> 赞同：3
> 
> 时间：2012-09-14T20:52:33.210
> 
> 标签：php, javascript, ajax, real-time, comet

经过几天的尝试，我当然不能自己解决这个问题。这就是问题：

**我们需要在 PHP 文件中实时生成的屏幕 (HTML) 上显示信息。**

**PHP 正在执行非常主动的爬取，返回大量的 URL 数组，每个 URL 都需要在 HTML 中实时显示，一旦 PHP 捕获它，**这就是我们使用 Ob_flush() 和 flush 方法来回显和打印的原因我们一拿到数组就可以了。

同时，我们需要以某种方式显示这些信息，以便用户可以在它工作时看到它（因为它可能需要一个多小时才能完成）。

**据我了解，使用 AJAX 是不可能完成的，因为我们只需要发出 1 个请求并读取数组内的信息。**我也不完全确定彗星是否可以做这样的事情，因为它会在获得新信息后立即中断连接，并且阵列确实在迅速增加它的大小。

此外，只是为了让事情变得更复杂，没有真正需要打印或回显数组内的信息（URL），因为 HTML 文件被包含为处理和生成数组的同一文件的用户界面我们需要展示。

**长话短说; 我们需要在这里放置：**

```
<ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
    ...
</ul> 
```

**在 PHP 循环中生成并推送到数组中的一个永无止境且实时更新的 URL 列表，下面 1,000 行。**

任何帮助都会非常感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:00:38.250

尝试网络套接字。

它们提供客户端和服务器之间的实时通信，并使用 socket.io 提供跨浏览器兼容性。它基本上为您提供与长轮询/彗星相同的结果，但请求之间的开销更少，因此速度更快。

在这种情况下，您将使用 Web 套接字向客户端发送有关当前处理状态（或正在执行的任何操作）的更新。

看到这个[使用 Socket.io 的 PHP](https://stackoverflow.com/questions/6398887/using-php-with-socket-io)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T20:59:04.980

我认为最好的方法是让第一个 PHP 脚本将每条记录保存到数据库（可能是 MySQL 或 SQLite），然后让第二个 PHP 脚本从数据库中读取并输出最新记录。然后使用 AJAX 每隔一段时间调用这个脚本，并将它发送的记录添加到您的表中。您必须找到触发第一个脚本的方法。

javascript应该记录它已经拥有的最后一个url的id，并在AJAX请求中发送，然后PHP可以选择id大于那个的所有行。

如果 URL 的数量如此之大，以至于您无法在服务器上存储那么大的数据库（有人可能会问浏览器如何处理这么大的表！），那么您总是可以使用 PHP 脚本输出最新的记录也将它们从数据库中删除。

编辑：当做很多 MySQL 插入时，你可以做几件事来加速它。[这里](https://stackoverflow.com/questions/3952288/speeding-up-large-numbers-of-mysql-updates-and-inserts)有一个很好的答案，详细说明了它们。简而言之，使用 MyISAM，并在单个查询中输入尽可能多的行（在 PHP 中有一个缓冲区数组，您可以将 URL 添加到其中，当它已满时，将整个缓冲区插入一个查询中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:11:13.430

假设您使用 PHP 写入 Memcached 服务器的方案。

您写为 rec1、rec2、rec3 的每个键

您还存储一个 current_min 和一个 current_max

您让用户不断地使用 ajax 进行轮询。对于每个请求，他们都包含他们看到的最后一个键，称之为 k。然后服务器返回从 k 到 max 的所有记录。

如果没有立即可用的记录，服务器会进入一个等待循环，最长为 3 秒，每 100 毫秒检查一次是否有新记录

如果记录可用，它们会立即发送。

每当客户端收到更新或连接终止时，它们会立即开始一个新的请求......

写入新记录只需插入 max+1 并递增 min 和 max ，其中 max-min 是您希望保持可用的记录数......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:18:13.710

网络套接字的替代品是 COMET

我写[了一篇](http://treehousetim.com/2011/12/21/php-based-comet-using-iframes/)关于这个的文章，以及描述我的经历[的后续文章。](http://treehousetim.com/2012/05/04/comet-update-workaround-blocked-connections/)

根据我的经验，COMET*很快*。Web 套接字绝对是未来，但如果您只需要完成它，您可以在一小时内启动并运行 COMET。

这里肯定需要某种共享内存结构 - 可能是数据库中的内存临时表，或者斯蒂芬已经建议的 Memcached。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T21:30:42.140

```
If I were you , I try to solve this with two way .
First of all I encode the output part array  with json and with the setTimeout function with javascript I'll decode it and append with <ul id="appendHere"></ul> so 
```

当列表更新时，它会自动更新自己。就像一个带有 js 的 cronjob 。

第二种方式，如果你说我在处理时无法输出，所以我认为使用数据插入到 mysql 是没有意义的，使用 MongoDb 等来提高速度。顺便说一句，您将使用您的密钥达到您需要的内容，并且永远不会重复插入的值。

# ruby-on-rails - 有没有命名空间 url 的 Rails 方法来命名空间控制器？

> ID：12431823
> 
> 赞同：2
> 
> 时间：2012-09-14T20:52:47.230
> 
> 标签：ruby-on-rails

我希望能够命名我的控制器，而无需命名 url。因此，例如，我希望能够在如下文件夹中有一个控制器：

```
app/controllers/abc/my_controller 
```

另一个在

```
app/controllers/def/my_controller 
```

我不希望路由包含 /abc 或 /def，而是使用约束来消除它们之间的歧义。实现这一目标的最 Rails 方法是什么？

一些背景：我正在构建一个多域站点，约束是请求域。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-15T04:07:10.707

您可以将范围与块一起使用。

```
scope :module => "abc" do
  resources :my_controller
end

scope :module => "def" do
  resources :my_controller
end 
```

或单独通过

```
resources :my_controller, :module => "abc"
resources :my_controller, :module => "def" 
```

[路线指南](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)中的更多信息。有关范围的信息就在我链接到的部分的表格下方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T22:59:01.487

路线.rb：

`resources :resource_name, module: 'ControllerNameSpace', constraints: {subdomain: 'foo'}`

[导轨导向链接](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

# python - 我的程序在 python 中完成了完美数字，不确定我是否应该在范围内使用 (1,1000) 或 (2, n+1)

> ID：12431826
> 
> 赞同：5
> 
> 时间：2012-09-14T20:52:51.263
> 
> 标签：python, perfect-numbers

我在 python 中对完美数字进行了实验，它运行良好并打印出我需要的数字。但不确定我是否需要将 (1, 1000) 放在范围内或 (2, n+1) 可以吗？我的指示要求我

*“编写一个 python 程序来查找从 1 到 10,000 的所有完美数字。当找到一个完美数字时，你的逻辑应该打印它。”*

什么是完全数：

> 在数论中，一个完美数是一个正整数，它等于其适当的正因数之和，即不包括数字本身的正因数之和（也称为其等分之和）。等效地，完美数是其所有正因数（包括其自身）之和的一半的数，即 σ1(n) = 2n。

当我运行我的程序时，它会打印出 6、28、496 和 8128。

```
 n = 1
 while True:
     factors = [1]
     [factors.append(i) for i in range(2,n+1) if n%i == 0]
     if sum(factors) == 2*n: print n
     n += 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:02:50.817

比如：你也可以使用一个范围`(1,n)` ，因为完美数等于除自身之外的所有除数之和，即`6=1+2+3`

```
n = 1
while True:
    factors =(i for i in range(1,n) if n%i == 0) #use a generator expression
    if sum(factors) == n: 
        print n
    n += 1 
```

**输出：**

```
6
28
496
8128 
```

或一个班轮：

```
In [2]: [x for x in xrange(1,10001) if sum(y for y in xrange(1,x) if x%y==0)==x]
Out[2]: [6, 28, 496, 8128] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T20:57:44.953

无需一直到`n`您的内部循环。您可以只使用`range(2, n/2 + 1)`, 然后`if sum(factors) == n - 1`. 你的外循环应该是通过的`range(2, 10001)`（即你应该测试`n`这个范围内的每一个）。请注意，1 不被认为是一个完美的数字，所以我们不应该将它包含在我们的范围内。

```
for n in range(2, 10001):
    if sum(i for i in range(2, n/2 + 1) if n % i == 0) == n - 1:
        print n 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T20:58:00.703

好吧，您可以添加很多简单的改进。

首先，使用`range(2,n)`. 你知道 n%n 是 0，所以根本不需要检查 n。请记住，总和应该是 n 而不是 2*n（您看到 2*n 是因为您已将 n 添加到因子列表中）。

如果您真的想加快速度，请使用`range(2, int(math.sqrt(n)))`. 如果 a 是 n 的因数，则 n/a 也是。所以你可以追加`([i, n/i])`而不是仅仅 i。不要忘记`import math`'。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T20:57:55.913

您想获取范围 [1 .. n] 中除 n 的所有数字，因此您应该使用 range(2, n+1)。这是您的代码的简化版本：

```
for n in range(1, 10001):
  factors = [i for i in range(1,n+1) if n % i == 0]
  if sum(factors) == 2*n: print n 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T21:11:25.977

并不是我想侮辱你什么的，但我真的不喜欢编码风格，当需要时间来理解时，为什么某些东西可以正常工作（我的意思是，为什么要写 n+1 然后 sum(factors) == 2*n; 如果你可以写因子 = [] 并且在范围（1，n）内，为什么因子 = [1]。:)

我会写相同的（甚至删除列表理解来避免python新手的意识）：

```
n = 1
while True:
    factors = []
    [factors.append(i) for i in range(1,n) if n % i == 0]
    if sum(factors) == n:
        print n
    n += 1 
```

相同的输出。

# asp.net - SQL Server 连接特定变量

> ID：12431833
> 
> 赞同：0
> 
> 时间：2012-09-14T20:53:54.483
> 
> 标签：asp.net, sql, sql-server, tsql

我正在升级我的应用程序以使用存储过程，而不是像现在这样使用动态 SQL。我想做的是调用一些过程，例如 setUser(id)，然后在当前连接期间将该 ID 结转。我有一个 UserVariables 表，它存储与当前用户相关的重要数据（我没有使用会话来存储这些数据，因为会话只持续这么长时间；这样用户数据会在登录之间保持不变）。我想选择数据，例如他们当前正在查看的客户端的 ID，而不必将用户 ID 传递到每个存储过程。如果你愿意，可以称之为懒惰！

我已经搜索了很多，并查看了各种文章，但它们都是关于全局变量（我们无法更改）或无关的东西。

基本上我想要做的是在页面加载开始时设置用户 ID（有时甚至可以将其移动到 session_start 方法中），然后在所有后续存储过程调用或查询期间访问此变量。

编辑：我所追求的就像您在asp页面的开头设置一个变量（我的应用程序是用好的ol'经典asp编写的）然后您在整个页面和任何包含中使用它。如果您愿意，可以考虑表示连接的 asp 页面和表示存储过程的包含。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:04:08.597

I have found a suitable alternative to setting connection-specific variables. I have a function which takes the sproc name, an array of parameter names, an array of parameter values and a variable to return (i.e. a byref variable). I have modified this function so that, when the parameters are refreshed, it checks for a userid parameter and sets it automatically if it exists. It then returns the 'retval' parameter if it exists, otherwise sets the return variable to `myCmd.execute`.

# django - django - 覆盖 clean 方法将 12 小时日期时间转换为 24 小时

> ID：12431835
> 
> 赞同：1
> 
> 时间：2012-09-14T20:54:01.763
> 
> 标签：django, django-views, django-forms

我在从表单中保存日期时间对象时遇到问题。表单小部件给了我这样的文本字符串：2012-09-20 04:41 PM

我正在尝试覆盖表单中的 clean 方法，如下所示：

```
class LegForm(ModelForm):
    formfield_callback = make_custom_field

    class Meta:
        model = Leg
        exclude = ('riders', 'drivers', 'open_to_prefs','carpool')

    widgets = { 'days': forms.CheckboxSelectMultiple }

    def clean_drive_date_time(self):
        twelve_hour = self.cleaned_data['drive_date_time']
        print "drive time: " + str(twelve_hour)
        data = datetime.strptime(twelve_hour, "%Y-%m-%d %I:%M %p")
        print "24 hour drive time: " + str(data)
        return data 
```

strptime 语句从命令行运行，并为我提供了一个有效的日期时间对象，但是当我在上面显示的项目中尝试它时，我的表单上出现错误，告诉我“输入有效的日期/时间”。

如果我使用 24 小时格式，我可以在不覆盖 clean 方法的情况下保存日期时间，但这对最终用户来说更加困难。任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:10:15.023

表单字段的工作是从用户那里获取输入并将其规范化为 python 值。python 的 datetime 对象不关心它的 12/24 小时格式。它以某种通用方式存储的所有日期时间，您可以以 12/24 格式表示。

因此，据我了解，您正在尝试做的是以 24 小时而不是 12 小时格式从用户那里获取输入。最简单的方法是告诉 django 表单字段您期望用户提供的格式，它会自动将字符串从用户转换为 python 日期时间对象。

```
class LegForm(ModelForm):
    formfield_callback = make_custom_field

    # overwrite the default DateTimeField with defaults parameters
    drive_date_time = DateTimeField(input_formats=['%Y-%m-%d %I:%M %p'])

    class Meta:
        model = Leg
        exclude = ('riders', 'drivers', 'open_to_prefs','carpool')

    widgets = { 'days': forms.CheckboxSelectMultiple } 
```

# internet-explorer - requirejs + IE8：未定义的对象为空或不是对象

> ID：12431837
> 
> 赞同：5
> 
> 时间：2012-09-14T20:54:15.227
> 
> 标签：internet-explorer, internet-explorer-8, undefined, requirejs

我只在 IE 中遇到与 require.js 插件有关的错误。

我在 require.js 中有以下代码（第 1061 行）：

```
 if (plugin.normalize) { 
```

IE 8 返回此错误：

> 消息：'normalize' 为空或不是对象
> 
> 线路：1061 字符：25

我检查了调试器并且插件对象存在，规范化是未定义的。在 javascript 中，这应该评估为“假”，并且不符合 if 条件。但是，由于某种原因，IE 会抛出此错误，而不是让我的页面正确加载。有谁知道为什么会这样？

具有讽刺意味的是，如果我将第 1061 行更改为：

```
if (plugin.normalize !== undefined && plugin.normalize !== null && plugin.normalize !== false) { 
```

然后IE8成功运行代码......问题是，这应该是等效的代码，我不能为了避免像这样的IE错误而改变像require.js这样的第三方包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T18:14:13.150

我有一个类似的问题，我通过确保我没有尾随昏迷并且我的路径很好来解决这个问题。

更多细节在这里：[https ://github.com/jrburke/requirejs/issues/299](https://github.com/jrburke/requirejs/issues/299)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T09:47:20.380

我有类似的问题，如果有一些文件未找到错误（404），请确保为脚本提供的路径正确，（备用路径似乎在 IE8 中不起作用），在修复路径后它解决了。

# scheme - 方案错误，将二叉搜索树返回为有序列表 (R5RS)

> ID：12431839
> 
> 赞同：0
> 
> 时间：2012-09-14T20:54:49.720
> 
> 标签：scheme, binary-search-tree, r5rs

我是 Scheme 的菜鸟。我有一个二叉搜索树。节点的格式是三个元素的列表，第一个是节点的值，第二个是左子节点，第三个是右子节点。“make”函数创建一个空树，如下所示：( () () () )。我能够创建树、插入值并查找树中是否存在某个值。当我尝试编写一个将树作为有序列表返回的函数时，我的问题就出现了。插入和制作功能：

```
;Inserts a number into the tree
(define (insert t x)
    (cond ((null? (car t))
          (list x (make) (make)))
          ((< x (car t))
           (list (car t) (insert (cadr t)  x) (caddr t)))
          ((> x (car t))
           (list (car t) (cadr t) (insert (caddr t) x) ))

    )
)

;Makes a new empty tree
(define (make)
    (list (list) (list) (list))
 ) 
```

那些工作正常。这是我的清单：

```
;Gives list of all numbers
(define (as-list t)
    (cond
         (
           (null? (car t) )
           (list)
         )
          (
           #t
           (append (as-list (cadr t)) (as-list (car t)) (as-list (caddr t)))
         )
     )
  ) 
```

运行这个，我得到一个合同违规，说它预期“mpair？”。我不认为这是我的逻辑错误，但它可能是。这是另一个括号问题吗？
感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:09:04.590

你的递归应该是

(追加 (as-list (cadr t)) (list (car t)) (as-list (caddr t)))

您只想在树上调用 as-list，而您的 t 的汽车不是树。

# authentication - LDAP 是否具有“集成安全”模式？

> ID：12431841
> 
> 赞同：0
> 
> 时间：2012-09-14T20:55:19.800
> 
> 标签：authentication, iis-7, ldap

我正在尝试更改我的 LDAP 连接以通过 SSL 工作。但是，SSL 连接是经过身份验证的，这意味着它通常需要用户名和密码，而标准连接不需要：

```
<add name="ADConnectionString" connectionString="LDAP://myExampleLDAPServer.com:389/CN=Users,DC=example,DC=com" /> 
```

变成

```
<add name="ADConnectionString" connectionString="LDAP:///myExampleLDAPServer.com:636/CN=Users,DC=example,DC=com" /> 
```

但它需要一个用户名和密码，我根本不想将其存储在 web.config 中。我设置了与 SQLServer 的连接，`integrated security=True`该连接使用应用程序池的身份对 SQLServer 进行身份验证。是否可以将我的 LDAP 连接配置为也使用集成安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:04:07.530

LDAP 没有；但是，您可以通过[GSSAPI](http://ldapwiki.willeke.com/wiki/GSSAPI)或[SPNEGO的扩展来做到这一点](http://en.wikipedia.org/wiki/SPNEGO)

# c++ - C++ system() 没有给出 dsget 命令的输出

> ID：12431845
> 
> 赞同：0
> 
> 时间：2012-09-14T20:55:38.427
> 
> 标签：c++, command, system

这很奇怪......我在域环境中的 Windows 7 上，正在做一个快速程序来处理一堆数据[所以不要教我使用 system() =P 的邪恶]，我有这个代码：

```
#include <iostream>
#include <stdlib.h>
using namespace std;

int main()
{
  system("dsget group \"CN=Accounting,OU=Groups,OU=Exchange Users,DC=MyDomain,DC=com\" -members");
} 
```

输出什么都没有。我试过的东西：

1.  在命令提示符下逐字运行该命令，成功取回数据。
2.  在该命令字符串上做了一个“cout”以确保 \" 部分被正确处理。
3.  是否 system("ipconfig -all") 和其他系统命令以确保其正常工作。
4.  是否 system("echo [dsget_command] > runThis.cmd") 然后 system("runThis.cmd")... 唯一的输出是看到它尝试执行 dsget 语句但仍然没有结果。

这很奇怪，这只是在“dsget”命令上发生在我身上，而且也很奇怪，该命令在命令提示符下运行良好[而不是通过 C++ 程序]。有什么建议么？

# python - pypy编译器的使用

> ID：12431847
> 
> 赞同：8
> 
> 时间：2012-09-14T20:55:56.227
> 
> 标签：python, python-3.x, python-2.7, pypy

仅使用 python 和使用 pypy 编译器时，python 编程有区别吗？我想尝试使用 pypy，以便我的程序执行时间变得更快。在 python 中有效的所有语法是否也适用于 pypy？如果没有区别，你能告诉我如何在 debian lunux 上安装 pypy 以及在 pypy 上的一些用法示例吗？除了描述之外，谷歌没有包含太多关于 pypy 的信息。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-14T21:21:29.050

从 pypy[功能页面](http://pypy.org/features.html)：

> PyPy 1.9 实现 Python 2.7.2 并在 Intel x86 (IA-32) 和 x86_64 平台上运行，ARM 和 PPC 正在进行中。它支持所有的核心语言，通过了 Python 测试套件。

这意味着您用 Python 2.7 编写的几乎所有代码都可以工作。唯一值得一提的例外是一些用 C 编写的 python 扩展，例如`numpy`.

安装应该相当容易，你可以[从这里下载一个 linux 二进制文件](http://pypy.org/download.html)。然后简单地提取解释器。从这一点开始，您可以运行您的 python 程序，类似于使用普通 python 解释器运行它们的方式。

在命令行，而不是：

```
python my_program.py 
```

利用：

```
path/to/where/you/installed/pypy my_program.py 
```

有关如何/为什么要使用 pypy 的示例，请查看PyCon 2012 中的[此视频](http://pyvideo.org/video/661/why-pypy-by-example)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:16:35.787

pypy 是 python 语言的兼容替代实现。这意味着几乎没有（有意的）差异。少数区别之一是 pypy 不使用引用计数。这意味着，例如，您必须手动关闭文件，当您的文件变量超出 CPython 的范围时，它们不会自动关闭。

# java - 缓存对象并在 jsf 中使用它们

> ID：12431848
> 
> 赞同：1
> 
> 时间：2012-09-14T20:56:06.747
> 
> 标签：java, jsf, caching, jsf-2

我最近开始构建一个 JSF 2.0 应用程序，我在想是否有人可以帮助我解决我的想法。

我有一个对象列表（从查找表中提取），我知道它不会经常更改（比如说国家列表）。国家/地区是一个不经常更改的列表的简单示例，但该列表很容易成为例如每隔几周更改一次的对象。

在会话范围的 bean 中，我通常做的是从数据库中加载该列表。

现在我的问题是：有没有办法将这样的列表（当然是列表）保存在一段时间后过期的缓存中，并在过期后重新加载这个列表？希望有人会面临同样的“问题”并可以分享他的经验！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:12:46.370

我不会在 UI 层这样做，而是使用 ehcache 缓存您的查找方法。如果您使用休眠，您可以使用它的二级缓存（也可以查找查询缓存）。如果您使用 Spring，您可以通过以下方式轻松注释您的服务方法：

```
@Cacheable("countries")
public List<Country> findCountries(){
    // ... your lookup code here....
} 
```

您还可以在更新国家/地区时使缓存无效：

```
@CacheEvict(value = "countries", allEntries=true)
public void saveCountry(Country country){
    // your code for saving a country
} 
```

最后，在您的 ehcache.xml 中，您可以定义缓存的实时时间 (timeToLiveSeconds)。当您确定更改只能通过您的服务外观应用时，您甚至可以定义它永远不应该失效（eternal=true）。

```
<cache name="countries" maxElementsInMemory="1000" eternal="false" timeToIdleSeconds="120" timeToLiveSeconds="120"/> 
```

**更新1：**

因此，您的支持 bean 本身甚至可以是请求或视图范围：

```
@ManagedBean
@ViewScoped
public class Bean{

    @Inject
    private CountryService countryService;

    public List<Country> getCountries(){
        return countryService.findCountries();
    }

} 
```

# google-app-engine - 如何将可查询的csv数据上传到java应用程序

> ID：12431853
> 
> 赞同：1
> 
> 时间：2012-09-14T20:56:31.943
> 
> 标签：google-app-engine

如何将可查询的 csv 文件上传到 app enginge 数据存储区？

阅读此提示：

> 提示：如果您有 Java 应用程序，则可以通过安装 Java 版本的 remote_api 处理程序来使用 Python appcfg.py 工具，该处理程序包含在 Java 运行时环境中。处理程序 servlet 类是 com.google.apphosting.utils.remoteapi.RemoteApiServlet。

复制自[https://developers.google.com/appengine/docs/python/tools/uploadingdata](https://developers.google.com/appengine/docs/python/tools/uploadingdata)

我从未使用过 Python。remote_api 处理程序的 java 版本在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T22:10:32.223

我发现这很有用：http: [//ikaisays.com/2010/06/10/using-the-bulkloader-with-java-app-engine/](http://ikaisays.com/2010/06/10/using-the-bulkloader-with-java-app-engine/)

# java - Java如何停止冻结linux操作系统，同时像这样运行？

> ID：12431855
> 
> 赞同：-2
> 
> 时间：2012-09-14T20:56:51.860
> 
> 标签：java, linux, swing

我有一个问题，我的应用程序冻结。当我使用`new P2P("string");`重量级 GUI 时。

我的困惑是在这个while循环中运行它的最佳方法是什么？这样它就不会冻结整个操作系统？

示例用例：

```
public void run() {
    while (true) {
      byte[] buf = new byte[5024];
      int bytes_read = 0;      
      bytes_read = sockInput.read(buf, 0, buf.length);
      String data = null;
      data = new String(buf, 0, bytes_read);
      System.out.println("[TCP]: incomeing data: " + bytes_read + " bytes, data=" + data);

      //
      // get some commands on TCP parse it and trigger this
      //
      new P2P(main.my_info_array);
      // After some time the whole OS freeze requires shutdown reboot physically
      // how to improve it

    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:00:02.887

在后台线程（即除事件调度线程之外的线程）中执行长时间运行的任务。这是必需的，因为 Swing 是单线程的。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:47:16.710

好的，请执行以下操作：

1) 告诉我们您的操作系统（例如 CentOS 5.5）、硬件（例如 4-CPU 2.4GHz Pentium、2GB RAM）和 JDK（例如 Sun Java，32 位 1.6.0_21）。

2) 如果可能，请指定指向您的 P2P 库的链接和版本号。

3) 修改您的代码，使其只读取套接字并调用 P2P*一次*（即请注释掉循环）。

4) 在单独的终端窗口中运行“top”。

5）运行你的程序。观察您的程序是否突然开始消耗大量内存和/或大量 CPU。“顶部”在冻结之前最后说的是什么？

6) 报告你的发现。

# perl - Cgi 脚本正在打印 html 文本文件，而不是在获取模块时在浏览器中呈现它

> ID：12431862
> 
> 赞同：0
> 
> 时间：2012-09-14T20:57:56.950
> 
> 标签：perl, cgi

我有以下代码

```
#file 1 a.pm
package a;
@Export=(test);

print "test"; #hashing this is enabling the rendering 

sub test {
  return 1;
} 

#file 2 main cgi script test.pl
use a;
my $t = test();
print "Content-type: text/html\n\n";
print "<html>\n<body>\n<p>test= $t</p></body>\n</html>"; 
```

虽然在模块 a 中散列打印行正在启用渲染，但是当启用打印语句时，它无法做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:01:23.427

当您`use`使用`a`模块时，将`print "test"`执行。即在标题`test`之前打印。`Content-type`此外，您的`Content-type`标题变成`testContent-type`.

# java - 如何读取堆大小——占用和空闲？

> ID：12431864
> 
> 赞同：1
> 
> 时间：2012-09-14T20:58:06.790
> 
> 标签：java, garbage-collection, jvm, heap-memory

我想读取这两个值——我总共分配了多少内存，还有多少可用空间（对 JVM 可见，对操作系统不可见）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:04:02.187

您可以使用 Runtime.totalMemory() 和 Runtime.freeMemory()。

您可以使用 VisualVM 看到这一点。

注意：空闲内存是未使用的内存，而不是清理垃圾后会释放多少内存。这意味着没有可用的内存，但没有问题，因为只要调用 GC，就会有。

出于这个原因，最好查看 GC 后有多少内存可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T21:03:54.420

您可以使用 VisualVM（或）JConsole 工具。

当您运行这些工具之一时，您将选择您希望查看其使用情况的 java 进程。

如果您使用的是 MBean，您可以使用`java.lang:type=Memory`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:04:49.283

至少在类 unix 系统上，您可以[向程序发送 SIGQUIT](http://publib.boulder.ibm.com/infocenter/javasdk/v5r0/topic/com.ibm.java.doc.diagnostics.50/diag/tools/javadump_trigger.html)以获取 javadump，其中包含有关内存的部分。

```
An example from the linked page:
MEMINFO subcomponent dump routine
=================================
Bytes of Heap Space Free: 365df8
Bytes of Heap Space Allocated: 400000 
```

# javascript - 我如何存储“这个”元素以备后用

> ID：12431865
> 
> 赞同：2
> 
> 时间：2012-09-14T20:58:09.757
> 
> 标签：javascript, jquery, jquery-selectors, this

我是 JavaScript 和 jQuery 的新手，所以如果我离基地很远，请告诉我。我正在使用这里的 cookie 插件：[https](https://github.com/carhartl/jquery-cookie) ://github.com/carhartl/jquery-cookie 。

我有一个带有动态链接的页面。他们通过 URL 中的一些 GET 信息将用户发送到他们已经在其上的同一页面。我希望能够突出显示上一个单击的链接。

我的想法是将被点击的元素存储在 cookie 中，然后向该元素添加一个类。

## 设置 cookie

```
$("td.column1").on({
    click: function () {
      $.cookie('productCookie', this); //How do I store 'this' into the cookie?
    }
}); 
```

## 获取 cookie

```
var productValue = $.cookie('productCookie');
$(productValue).addClass("select singleselected"); 
```

## 没有 cookie 的代码

我从经验中知道，这行代码在我添加链接之前有效，这也是在重绘页面之前。

```
$(this).addClass("select singleselected"); 
```

我试过研究 this 关键字是如何工作的，但恐怕我不确定 addClass 方法正在获取什么选择器或如何获取当前元素。

## 使用的解决方案

```
function getParameters(geturl, columnNumber) {
    var url = geturl,
        urlRegExp = new RegExp(url.replace(/\/$/, ''));

    $(columnNumber).each(function () {
        if (urlRegExp.test(this.href)) {
            $(this).addClass("singleselected select");
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:00:54.263

如果您的元素有 ID，您可以将元素的 ID 保存在 cookie 中，并在下一个页面加载时突出显示它。Cookie（和 localStorage，就此而言）只能存储字符串，或者可以序列化为字符串的东西。HTML 元素不可序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:01:41.520

检查这个线程：[jQuery add class .active on menu](https://stackoverflow.com/questions/4866284/jquery-add-class-active-on-menu)

基本思路是解析当前的url，根据url找到激活的锚标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:01:44.533

Cookie 包含字符串。您将需要存储一些基于字符串的指示符，以指示单击了哪个链接。

它可以是表中的 id 或行号或类似的东西。然后，当您在页面加载时读取 cookie 时，您可以找到与该指示符匹配的 DOM 元素并相应地更改它。

您不能将 DOM 元素引用存储在 cookie 中，因为 DOM 元素引用不是字符串，并且它们不会从一个页面加载到下一个页面持续存在。特定的 DOM 元素引用仅存在于给定页面期间。

如果您显示包含您要保存的内容的实际 HTML，我们可以更具体地参考什么是有意义的保存在 cookie 中。如果是表格，可能是行/列计数（转换为字符串形式）。如果每个链接都有唯一的 id，那么最简单的方法就是存储 id。

# c# - C# 反射 SetValue() 找不到集合访问器

> ID：12431869
> 
> 赞同：3
> 
> 时间：2012-09-14T20:58:25.893
> 
> 标签：c#, reflection

我使用反射来更新已对其进行更新并保存到 mongodb 的对象

```
 private void updateSelf(MongoDoc newDoc)
    {
        Type type = this.GetType();
        foreach (var i in type.GetProperties())
        {
            if (i.GetCustomAttributes(false).Any(x => x is MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute)) continue;
            Object oldValue = i.GetValue(this, null);
            Object newValue = i.GetValue(newDoc, null);
            if (!Object.Equals(oldValue, newValue) && !((oldValue == null) && (newValue == null)))
            {
                i.SetValue(this, newValue, null);
            }
        }
    } 
```

这在大多数情况下都有效，但是`i.SetValue(this, newValue, null);`在尝试更新此属性时会引发异常：

```
public uint Revision { get; private set; } 
```

这是试图更新一个类型的对象，`Product`该类型的派生类型`MongoDoc`包含`public uint Revision { get; private set; }`导致异常的属性`Property set Method not found`我不确定是什么原因造成的，因为它适用于我的所有其他属性，只是这个抛出和异常。非常感谢任何帮助

更新：

我试过下面的答案：

```
i.SetValue(this, newValue, System.Reflection.BindingFlags.SetProperty | System.Reflection.BindingFlags.Public | System.Reflection.BindingFlags.NonPublic, null, null, null); 
```

但不幸的是，结果完全相同，它仍然会在 Revision 属性上引发异常。

更新：

例外：

```
System.ArgumentException was unhandled
  Message=Property set method not found.
  Source=mscorlib
  StackTrace:
       at System.Reflection.RuntimePropertyInfo.SetValue(Object obj, Object value, BindingFlags invokeAttr, Binder binder, Object[] index, CultureInfo culture)
       at System.Reflection.RuntimePropertyInfo.SetValue(Object obj, Object value, Object[] index)
       at Flo.Client.Docs.MongoDoc.updateSelf(MongoDoc newDoc) in F:\Flo\Flo.Client\Docs\MongoDoc.cs:line 162
       at Flo.Client.Docs.MongoDoc.UpdateToMongo(MongoDoc newDoc) in F:\Flo\Flo.Client\Docs\MongoDoc.cs:line 120
       at Flo.Client.Docs.Product.EditProduct(String Name, Nullable`1 State) in F:\Flo\Flo.Client\Docs\Product.cs:line 89
       at Flo.Client.Program.Main() in F:\Flo\Flo.Client\Program.cs:line 26
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T22:08:07.820

我解决了这个问题，感谢 Dylan Meador 向我指出另一个问题，这给了我足够的解决方案：

```
 private void updateSelf(MongoDoc newDoc, Type type)
    {
        foreach (var i in type.GetProperties(BindingFlags.DeclaredOnly | BindingFlags.Instance | BindingFlags.Public))
        {
            if (i.GetCustomAttributes(false).Any(x => x is MongoDB.Bson.Serialization.Attributes.BsonIgnoreAttribute)) continue;
            Object oldValue = i.GetValue(this, null);
            Object newValue = i.GetValue(newDoc, null);
            if (!Object.Equals(oldValue, newValue) && !((oldValue == null) && (newValue == null)))
            {
                i.SetValue(this, newValue, null);
            }
        }
        Type baseType = type.BaseType;
        if (baseType != null)
        {
            this.updateSelf(newDoc, baseType);
        }
    } 
```

看起来需要将 Type 显式设置为基类类型才能使用该特定属性的 set 访问器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:09:18.860

尝试使用`SetValue`具有`System.Reflection.BindingFlags`参数的重载并将其传递给`BindingFlags.SetProperty | BindingFlags.Public | BindingFlags.NonPublic`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T22:08:19.707

问题是从派生类型的角度来看，该属性没有设置器。

您可以解决此问题，遍历继承层次结构并获取在每种类型上声明的属性（使用 DeclaredOnly BindingFlag，以及 Public 和 Instance），或者检查属性是否由反射类型声明，如果没有，则再次从属性中获取信息的声明类型。

对于前者，你可以有一个嵌套循环，而后者看起来像这样：

```
 foreach (var property in p.GetType().GetProperties())
    {
        var actualProperty = property.DeclaringType != property.ReflectedType ? property.DeclaringType.GetProperty(property.Name) : property;
        actualProperty.SetValue(p, newValue, null);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T23:35:02.390

问题可能出在下一个：
您正在使用自动属性
`public uint Revision { get; private set; }` ，它通过默认类型 int 执行装箱/拆箱操作。所以，在这里你应该明确地转换为 uint 类型。

您可以在下一个片段中找到类似的问题：

```
byte b1 = 4;  
byte b2 = 5;  
byte sum = b1 + b2; 
```

这将引发异常，因为没有为“+”运算符声明重载。此代码段实际上演示了通过默认类型 int 进行装箱/拆箱操作的问题。

# python - 使用 dataReceived 接收了多少字节？

> ID：12431871
> 
> 赞同：2
> 
> 时间：2012-09-14T20:58:37.333
> 
> 标签：python, twisted

我正在使用 Twisted 从套接字接收数据。我的协议类继承自协议。

由于 Python 2.* 中没有字节类型，因此接收到的数据类型为 str。当然， len (data) 给了我字符串的长度，但我怎么知道收到的字节数？没有 sizeof 或等效的东西可以让我知道字节数吗？还是我应该考虑无论平台如何，字节数都是 2 * len (data) ？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:06:03.060

字符串的长度是以字节为单位的长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T23:50:35.757

在 Python 2 中，

*   `str`→ 字节序列，有时用作 ASCII 文本
*   `bytes`→ 的别名`str`（在 python 2.6 及更高版本中可用）
*   `unicode`→ 一系列 unicode 代码单元（UCS-2 或 UCS-4，取决于编译时选项，默认为 UCS-2）

在 Python 3 中，

*   `str`→ 一系列 unicode 代码单元 (UCS-4)
*   `bytes`→ 字节序列
*   `unicode`→ 没有这种事了，你的意思是`str`

将传递给的类型想象`dataReceived`为`bytes`。它`bytes`在 Python 2.x 中，`bytes`当 Twisted 被移植到 Python 3.x 时。

因此，接收到的段的字节长度很简单`len(data)`。

# jquery - Jquery将值返回到原始值

> ID：12431883
> 
> 赞同：0
> 
> 时间：2012-09-14T21:00:03.283
> 
> 标签：jquery, css, siblings

所以我的脚本完美运行，但问题是，我有 40px 高度的按钮（此处为 Sprite 动作），但前 20 个仅显示完美。当您单击按钮时，即 img 底部 20px 显示完美！但是...问题，我在我的脚本中包含了一种将所有其他人恢复为默认值的方法（应该只选择一个），我该如何解决这个我似乎无法纠正的问题，因为我可以选择其中的多个**用户可以切换 ** 脚本的最后一部分就是问题。谢谢

```
$(document).ready(function() {
    $('.form_sub').hide();
    $('.theader').addClass('active');

    $('.theader_t').click(function() {
        $('.form_header').show();
        $('.form_sub').hide();
        $('.theader').addClass('active');
        $('.sub_theader').removeClass('active');
    });
    $('.sub_theader_t').click(function() {
        $('.form_header').hide();
        $('.form_sub').show();
        $('.theader').removeClass('active');
        $('.sub_theader').addClass('active');
    });

    $('.top_head_img').click(function() {
        $(this).css({
            position: 'relative',
            bottom: '20px'
        }).siblings().css(
            'bottom', '0'
        );
    });
});

<ul class="top_head">
    <li>
    <a href="javascript:void(0)" onClick="selectPic5('top');"><img src="custom/images/top2.jpg" alt="Left" border="0" class="top_head_img"/></a>
    </li>
    <li>
    <a href="javascript:void(0)" onClick="selectPic5('center');"><img src="custom/images/mid2.jpg" alt="Center" border="0" class="top_head_img"/></a>
    </li>
    <li>
    <a href="javascript:void(0)" onClick="selectPic5('bottom');"><img src="custom/images/bot2.jpg" alt="Right" border="0" class="top_head_img"/></a>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:06:17.100

没有太多事情要做，这就是我的建议：使用 CSS 来制作你的图像精灵。

除了实际的图像标签，您可以在一些`block`链接标签上使用背景图像（随时在这些标签上重新添加您需要的任何 onClicks `a`）：

```
<ul class="top_head">
   <li>
     <a href="#"></a>
   </li>
   <li>
     <a href="#"></a>
   </li>
   <li>
     <a href="#"></a>
  </li>
</ul>​ 
```

CSS中的精灵东西：

```
.top_head li a {
    height: 20px; 
    width: 20px;
    display: block;
    background: url(http://lorempixel.com/20/40/abstract) 0 0 no-repeat;
    overflow: hidden; 
    margin: 5px;
}
.top_head li a.selected {
    background: url(http://lorempixel.com/20/40/abstract) 0 -20px no-repeat;
} 
```

​</p>

而你的点击功能我们可以这么简单：

```
$('.top_head li a').click(function() {
    $('.top_head li a').removeClass('selected');
    $(this).toggleClass('selected');
}); 
```

# mysql - MySQL全文搜索不返回所有记录

> ID：12431884
> 
> 赞同：0
> 
> 时间：2012-09-14T21:00:08.037
> 
> 标签：mysql, full-text-search

第一次实现全文搜索...

我已经运行了必要的 ALTER TABLE SQL 以在适用的表/字段上启用 FULLTEXT。

在以下 beta 站点上：[http ://wtc.betaforming.com/](http://wtc.betaforming.com/)

如果我搜索“领导力”，除了底部的“事件”部分之外，我会得到正常的结果。我在活动标题和整个描述副本中都有带有该词的活动 (http://wtc.betaforming.com/events/event/?event_id=10039)。

如果我搜索“通信”，我会在“事件”部分得到结果，这让我认为我已经正确配置了所有内容。

我使用以下基本代码进行测试：

```
SELECT *
FROM tblevents
WHERE MATCH(event_title, event_desc_long, event_desc_short, event_tab_one_title, event_tab_one_text, event_tab_two_title, event_tab_two_text, event_tab_three_title, event_tab_three_text, event_tab_four_title, event_tab_four_text) AGAINST ('$site_search_term') 
```

这与我用于搜索产品和文章的代码相同（更改必要的 FROM 和 WHERE 信息）。

不确定发生了什么（因为它适用于某些短语）或从哪里开始查看我的数据库以查看问题所在。

谢谢

布雷特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T14:58:49.293

我的问题的答案可以在这里找到：

[http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

我的搜索词超过了 50% 的阈值 - 你必须一直阅读到底部才能找到它。

我已经为我的事件搜索实现了“IN BOOLEAN MODE”，一切似乎都正常工作。我还使用这篇文章寻求帮助：

[http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

# mysql - MySQL WHERE `character` = 'a' 匹配 a、A、Ã 等。为什么？

> ID：12431887
> 
> 赞同：2
> 
> 时间：2012-09-14T21:00:15.283
> 
> 标签：mysql, unicode, multibyte

我在 MySQL 中有以下查询：

```
SELECT id FROM unicode WHERE `character` = 'a' 
```

该表`unicode`包含每个 unicode 字符以及一个 ID（它是整数编码值）。由于表的排序规则设置为 utf8_unicode_ci，因此我预计上述查询仅返回 97（字母“a”）。相反，它返回 119 行，其中包含许多类似“a”的字母的 ID：

一个阿...

它似乎忽略了字符的大小写和多字节性质。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:12:15.583

如[Unicode Character Sets](http://dev.mysql.com/doc/en/charset-unicode-sets.html)下所述：

> MySQL`xxx_unicode_ci`根据[http://www.unicode.org/reports/tr10/](http://www.unicode.org/reports/tr10/)中描述的 Unicode Collat​​ion Algorithm (UCA) 实现排序规则。排序规则使用版本 4.0.0 UCA 权重键：[http](http://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt) ://www.unicode.org/Public/UCA/4.0.0/allkeys-4.0.0.txt 。

完整的[排序规则表](http://www.collation-charts.org/mysql60/mysql604.utf8_unicode_ci.european.html)清楚地表明，在这种排序规则中，基本字母的大多数变体都是等效的，无论它们的字母大小写或重音/装饰如何。

如果您只想匹配精确的字母，您应该使用二进制排序规则，例如`utf8_bin`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:10:30.747

表格的整理是问题的一部分；带有 _ci 排序规则的 MySQL 将所有这些 'a' 视为相同字符的变体。

切换到 _cs 排序规则将强制引擎区分 'a' 和 'A'，以及 'á' 和 'Á'，但它仍可能将 'a' 和 'á' 视为同一个字符。

如果您需要精确的比较语义，完全不考虑相似字符的等价性，您可以使用[`BINARY`](http://dev.mysql.com/doc/refman/5.5/en/charset-binary-op.html)比较运算符

```
SELECT id FROM unicode WHERE BINARY character = 'a' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T21:04:30.940

排序规则中的`ci`表示不区分大小写。切换到区分大小写的排序规则 ( `cs`) 以获得您正在寻找的结果。

# jquery - jQuery ui滑块 - 如果滑动时值增加或减少

> ID：12431894
> 
> 赞同：1
> 
> 时间：2012-09-14T21:00:37.347
> 
> 标签：jquery, jquery-ui

基本上我想在值增加和减少时运行两个函数。如何检查用户幻灯片向右（当值增加时）和向左（当值减小时）这里是小提琴：

[http://jsfiddle.net/BxY99/436/](http://jsfiddle.net/BxY99/436/)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:04:15.497

设置一个临时变量并将其与滑块的当前值进行比较。

**[jsFiddle 示例](http://jsfiddle.net/j08691/BxY99/438/)**

```
var last = 0;
$(".slider").slider({
    range: "min",
    value: 1,
    min: 1,
    max: 600,
    slide: function(event, ui) {
        if (ui.value > last) $("#amount").val("this is increasing");
        if (ui.value < last) $("#amount").val("this is decreasing");
        last = ui.value;
    }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:09:42.340

试试这个：http: [//jsfiddle.net/BxY99/439/](http://jsfiddle.net/BxY99/439/)

```
var lastValue = 0;
$(".slider").slider({
        range: "min",
        value: 1,
        min: 1,
        max: 600,
    slide: function( event, ui ) {
        if(ui.value > lastValue) {
            $( "#amount" ).val( "this is increasing" );
        } else {
            $( "#amount" ).val( "this is decreasing" );
        }
        lastValue = ui.value;
    }
});​ 
```

# sqlite - SQLite 从一个表或另一个表中选择

> ID：12431898
> 
> 赞同：1
> 
> 时间：2012-09-14T21:00:58.400
> 
> 标签：sqlite, select

我想知道如何进行单个查询以从一个表或另一个表中选择某些内容。例如，我有 aID=2 的表 A 和 bID=3 的表 B。那么如何使查询返回给定 id = 3 的表 A 或表 B 的 id？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T22:21:20.763

如果您在运行查询之前不知道要使用哪个表，则可以将多个查询与 结合使用[`UNION`](http://www.sqlite.org/lang_select.html#compound)，前提是您选择的列数相同：

```
SELECT something FROM A WHERE aID = 3
UNION ALL
SELECT something FROM B WHERE bID = 3 
```

如果您不想复制 WHERE 条件，则可以使用嵌套查询并将 WHERE 应用于其结果：

```
SELECT something
FROM (SELECT aID as ID, something FROM A
      UNION ALL
      SELECT bID      , something FROM B)
WHERE ID = 3 
```

# google-drive-api - 检索所有文件修改

> ID：12431900
> 
> 赞同：0
> 
> 时间：2012-09-14T21:01:20.410
> 
> 标签：google-drive-api

我需要解析一个特定的文件夹以查看文件夹标题是否存在。如果没有，那么我想创建它。

以下 v2 c# 代码将列出我的 Google Drive 文件中的每个文件。如何修改它以仅返回单个文件夹的文件列表（使用文件夹资源 ID）？我明白一切都是文件，包括文件夹。

```
/// <summary>
    /// Retrieve a list of File resources.
    /// </summary>
    /// <param name="service">Drive API service instance.</param>
    /// <returns>List of File resources.</returns>
    public static List<File> retrieveAllFiles(DriveService service)
    {
        List<File> result = new List<File>();
        FilesResource.ListRequest request = service.Files.List();

        do
        {
            try
            {
                FileList files = request.Fetch();

                result.AddRange(files.Items);
                request.PageToken = files.NextPageToken;
            }
            catch (Exception e)
            {
                Console.WriteLine("An error occurred: " + e.Message);
                request.PageToken = null;
            }
        } while (!String.IsNullOrEmpty(request.PageToken));
        return result;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T16:14:58.227

您可以使用`q` [search 参数](https://developers.google.com/drive/search-parameters)将结果限制为属于单个文件夹的文件，如下例所示：

```
'1234567' in parents 
```

其中“1234567”是文件夹 ID。

要在 C# 中执行相同的查询，可以使用以下代码：

```
FilesResource.ListRequest request = service.Files.List();
request.Q = "'1234567' in parents"; 
```

作为替代方案，如果您只需要文件夹中文件的 ID，则可以使用[Children feed](https://developers.google.com/drive/v2/reference/children/list)：

```
ChildrenResource.ListRequest request = service.Children.List(folderId);
ChildList children = request.Fetch(); 
```

# assembly - jmp FWORD PTR [eax-0x67]？

> ID：12431909
> 
> 赞同：7
> 
> 时间：2012-09-14T21:01:45.210
> 
> 标签：assembly, x86

FWORD 数据类型定义为 6 个字节，那么它是如何在 jmp 指令中转换为 32 位虚拟地址的：

```
 jmp FWORD PTR [eax-0x67] 
```

?...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T21:17:49.570

当您跳转到 FWORD PTR 时，您所做的是“远跳转”——也就是说，指向的内存包含一个 16 位“选择器”（指 GDT 或 LDT 中的段条目)，以及从选择器引用的段开头的 32 位偏移量。段描述符包含关于段的数据，当然……包括它在内存中的起始位置。

在跳转期间，CPU 会进行一些特权检查以确保选择器有效且被允许（涉及特权级别和段类型等），然后它将前 16 位有效地加载到 CS 中，其余的加载到 EIP 中。从那时起，代码地址有效地将 CS 段的基地址添加到它们中，从而将它们变成虚拟地​​址。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T21:22:46.577

远跳转使用完整的段基：偏移值作为绝对地址，因此它由 16 位段和 32 位地址组成。它执行跳转到位于与当前代码段不同的段中的指令，但它应该处于相同的特权级别。

# javascript - 从 observableArray 中删除一行时，没有调用自定义绑定的更新函数 [jsfiddle 链接]

> ID：12431910
> 
> 赞同：0
> 
> 时间：2012-09-14T21:01:48.060
> 
> 标签：javascript, knockout.js

所以我有一个集合，我循环显示一些数据。每行旁边都有一个删除按钮，用于从 observableArray 集合中删除给定行的 $data。它可以很好地删除它，但这就是问题所在。每行上的一些输入字段都有一个我创建的自定义绑定来进行一些验证。当用户与表单交互时，自定义绑定的更新事件会被触发。但是当用户删除一行时，更新事件不会触发！

这完全打乱了我的验证状态。有谁知道这里发生了什么？

这是针对此问题的[jsfiddle 。](http://jsfiddle.net/emirhosseini/SCxdB/2/)

**更新**：此外，在更新事件确实因更改而被调用的情况下，事件被调用的顺序是有问题的。如果我删除一个元素，更新事件会首先被调用，因为对可观察对象进行了一些更新，此时元素本身仍在 DOM 中。所以我无法在更新事件中知道正在更新的元素是否仍然存在于 DOM 中！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:52:21.220

在您的示例中，绑定仅在可观察项目上而不在数组上。将您的绑定添加到 observableArray - 在您的示例中附加到 foreach 绑定

```
<div data-bind="foreach: firstNames, validators:true">
    <input type="text" data-bind="value: firstname, validators:true" />
    <span data-bind="text: firstname"></span>
    <input type="button" value="remove" data-bind="click: $root.deleteRow" /><br />
</div> 
```

问候@all

# javascript - 在 IE8 中使用 javascript __proto__

> ID：12431911
> 
> 赞同：3
> 
> 时间：2012-09-14T21:01:50.630
> 
> 标签：javascript, internet-explorer-8

嗨，我在 javascript 中有这两个对象

```
var john = { firstname: 'John', lastname: 'Smith' }

var jane = { firstname: 'Jane' } 
```

这样做：

```
jane.__proto__ = john; 
```

我可以访问简的财产和约翰的财产

例如，如果`__proto__`在 IE8 中不支持，则相当于这样写：

```
jane.__proto__ = john; 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T21:04:06.420

IE 中没有等效或标准机制。（[`__proto__`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)Firefox 中的属性是ECMAScript 标准中*未指定**的非标准*扩展。）

 *[[prototype]] 对象*只能*通过在构造新对象*之前*作为构造函数的函数对象上设置`prototype`属性来指定。但是，[[prototype]] 可以在以后进行*变异*。

 **无论如何，这里有一个从现有对象指定 [[prototype]] 的小例子。请注意，必须在创建新对象*之前完成 [[prototype]] 分配。*ECMAScript 第 5 版引入了[Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)，它可以执行以下操作*并*浅克隆对象。

```
function create (proto) {
    function f () {}
    f.prototype = proto
    return new f
}
var joe = create({})
var jane = create(joe)
joe.name = "joe"                   // modifies object used as jane's [[prototype]]
jane.constructor.prototype === joe // true
jane.__proto__ === joe             // true  -- in Firefox, but not IE
jane.name                          // "joe" -- through [[prototype]]
jane.constructor.prototype = {}    // does NOT re-assign jane's [[prototype]]
jane.name                          // "joe" -- see above 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-20T07:25:41.477

`__proto__`目前还不是标准用途。

遵循 ECMAScript 标准，符号 someObject.[[Prototype]] 用于指定 someObject 的原型。从 ECMAScript 5 开始，[[Prototype]] 使用访问器`Object.getPrototypeOf()`和`Object.setPrototypeOf()`.

所以你可以`getPrototypeOf()`用来访问。

与镀铬一样，

```
> Object.getPrototypeOf(Object) === Object.__proto__
< true 
```***

# entity-framework - 创建单元测试时的实体框架问题

> ID：12431912
> 
> 赞同：1
> 
> 时间：2012-09-14T21:01:51.580
> 
> 标签：entity-framework, unit-testing

我特别收到以下错误：

“在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。”

```
[TestMethod()]
        public void salesOrderFillListTest()
        {
            SalesOrderController_Accessor target = new SalesOrderController_Accessor(); 
            string orderNumber = "1954120";

            SalesOrderData result;
            result = target.FillingOrder(orderNumber);
            Assert.AreEqual(null, result.ErrorMessage);
            Assert.AreEqual(32, result.LineItems.Count);
            Assert.AreEqual("WRA-24-NFL-CLEV", result.LineItems[7].ItemNumber);
            Assert.AreEqual(2, result.LineItems[7].OrderQuantity);
            Assert.AreEqual(1, result.LineItems[7].FillingFilledQty);
            Assert.AreEqual(1, result.LineItems[7].FillingRemainQty);
        } 
```

错误即将上线：

```
result = target.FillingOrder(orderNumber); 
```

我是一名初级开发人员，对于导致此错误的许多可能原因没有太多经验。我的 App.config 页面包含适当的连接字符串。任何想法在哪里寻找这个？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:50:02.053

我能够成功运行在同一解决方案中的另一个测试项目中找到的测试。仔细查看后发现每个项目中的两个连接字符串之间存在一些差异。失败的测试项目中的数据已经过时了。我更新了连接字符串并解决了错误。

谢谢。

# grails - 编码视频格式im grails

> ID：12431913
> 
> 赞同：1
> 
> 时间：2012-09-14T21:01:54.113
> 
> 标签：grails

我正在寻找一种在 grails 中转换视频格式的方法。我需要能够执行以下操作：

*   用户可以将视频从他们的移动设备上传到这个 Grails 网络应用程序。然后，网络应用程序将从上传的格式转换为 mp4 和 ogg，并使用 html 5 视频标签在浏览器中显示。
*   用户可以以最常见的格式直接上传到 Grails 网络应用程序。这将被转换为 mp4 和 ogg 并使用 html5 视频标签显示在浏览器中。

必须有一种方法可以在我找不到的 grails 中执行此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:52:39.467

您最好的选择是退出 Grails 并执行众多命令行视频转换实用程序之一来完成实际转换的“繁重工作”。那么所有 Grails 需要担心的是：

*   接收上传的文件
*   将它们放在已知位置
*   在它们上运行视频转换
*   将转换后的文件放在*不同*的已知位置
*   提供转换后的文件

这让 Grails 可以做它最擅长的事情（处理 Web 事物），而将困难的部分留给其他人。

我*强烈*建议的一件事是使用作业队列（如 RabbitMQ）将视频转换进程与 Web 服务进程分开，以排队转换作业，然后让服务（或完全不同的服务器）负责运行转换工作。这将使您的网络服务器保持良好的响应，并让您根据需要扩展转换过程。

# actionscript-3 - As3 鼠标悬停背景未按预期工作

> ID：12431914
> 
> 赞同：1
> 
> 时间：2012-09-14T21:02:10.347
> 
> 标签：actionscript-3

我没有任何成功，让背景在鼠标悬停时显示为 0.5 alpha，Sprite 作为 TextArea 的父级。我能得到的最好的结果是在 MouseOver 上以 0.5 透明度出现的文本，这完全不是我想要的。无论鼠标状态如何，我都希望文本处于最大 alpha 值，并且只有背景（Sprite）在 MouseOver 上以半透明度显示。如果可能的话，我宁愿避免补间。这是我的代码：

```
var textSprite:Sprite  = new Sprite();

    public function Main()
    {
        textSprite.graphics.beginFill(0x000000, 0);
        textSprite.graphics.drawRect(94.95, 80.95, 390, 130); 
        textSprite.graphics.endFill();
        textSprite.addChild(picArea1);//textarea added on stage, same dimensions, transparent background
        textSprite.buttonMode = true;
        textSprite.useHandCursor = true;
        stage.addChild(textSprite);

        textSprite.addEventListener(MouseEvent.MOUSE_OVER, applyAlpha);
        textSprite.addEventListener(MouseEvent.MOUSE_OUT, noApplyAlpha);
    }

    function applyAlpha(event:MouseEvent):void {
       textSprite.alpha = 0.5;
    }

    function noApplyAlpha(event:MouseEvent):void {
       textSprite.alpha = 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T21:13:10.653

设置精灵的 alpha 也会影响它的所有子项（按设计），这是您当前的问题。

您当前的操作方式（使用图形对象绘制背景），您必须在鼠标悬停/移出时重新绘制精灵的图形。

这是您可以使用的方法：

```
public function Main()
{
    drawTextBG(); //a new function I made to avoid duplicating code
    textSprite.addChild(picArea1);//textarea added on stage, same dimensions, transparent background
    textSprite.buttonMode = true;
    textSprite.useHandCursor = true;
    stage.addChild(textSprite);

    textSprite.addEventListener(MouseEvent.MOUSE_OVER, applyAlpha);
    textSprite.addEventListener(MouseEvent.MOUSE_OUT, noApplyAlpha);
}

//new function I made, this draws the background and makes the transparency the value passed in. I set the default to 1 (totally visible)
function drawTextBG(bgAlpha:Number = 1):void {
    textSprite.graphics.clear();
    textSprite.graphics.beginFill(0x000000, bgAlpha);
    textSprite.graphics.drawRect(94.95, 80.95, 390, 130); 
    textSprite.graphics.endFill();
}

function applyAlpha(event:MouseEvent):void {
   drawTextBG(.5); //redraw the background with half (.5) alpha
}

function noApplyAlpha(event:MouseEvent):void {
   drawTextBG(); //redraw the background with the default value (1 - totaly visible)
} 
```

现在，如果您使用 TLF（文本布局框架）文本字段，您可以只使用文本字段的 backgroundColor 和 backgroundAlpha 属性，而无需手动绘制背景。

# mysql - 子查询不起作用，但替换子查询结果可以

> ID：12431917
> 
> 赞同：0
> 
> 时间：2012-09-14T21:02:16.540
> 
> 标签：mysql, subquery

好的，我正在使用[此处](http://kimbriggs.com/computers/computer-notes/mysql-notes/mysql-create-state-table.file)`states`找到的表格

...和一个表`default_item`定义：

```
CREATE TABLE IF NOT EXISTS `default_item` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `States` varchar(200) NOT NULL DEFAULT '""'
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=637 ;

INSERT INTO `default_Item` (`id` `States`) VALUES
(636, '''AR'',''CA'''); 
```

我在包含州缩写列表的表中有一个字段，该字段是“州”，所以如果我选择其中一个字段作为示例：

```
SELECT `States`
FROM `default_item` 
WHERE `id`=636 
```

这通过 PHPMyAdmin 返回：

```
'AR','CA' 
```

我希望能够用上面引用的表“状态”中的州名称替换州缩写。如果我使用：

```
SELECT group_concat( `state` )
FROM `state`
WHERE `state_abbr`
IN (
'AR', 'CA'
) 
```

有用！我得到：

```
Arkansas,California 
```

但是如果我使用子查询...

```
SELECT group_concat( `state` )
FROM `state`
WHERE `state_abbr`
IN (
SELECT `States`
FROM `default_item` 
WHERE `id`=636
) 
```

...这将返回 NULL。

一直在寻找一些关于我做错了什么的提示，但似乎找不到诀窍。有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:06:27.770

尝试这个

```
SELECT group_concat( `state` )
FROM `state`
WHERE `state_abbr`
IN (
SELECT `States` FROM `default_item` WHERE `id`='636') 
```

'636'

你可以在这里活着问

[http://sqlfiddle.com/#!2/7bd88/4](http://sqlfiddle.com/#!2/7bd88/4)

表 default_item 在哪里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:06:29.380

您的第一个查询返回一个字符串“AR, CA”，而不是两个字符串的列表。替换子查询时的复合查询实际上如下所示：

```
SELECT group_concat( `state` )
FROM `state`
WHERE `state_abbr`
IN (
  "AR, CA"
) 
```

这就是为什么它不起作用。

# javascript - 在 JavaScript 中将“9:00 pm”转换为“21:00:00”的正确方法是什么？

> ID：12431920
> 
> 赞同：2
> 
> 时间：2012-09-14T21:02:41.653
> 
> 标签：javascript, date, time

首先，我不知道我应该用什么名称来引用这些格式中的每一种，所以请原谅我使用了一个真实的例子。

在 PHP 中，我可以轻松地将字符串时间转换为时间戳，然后使用该时间戳创建具有我选择的任何格式的时间，如下所示：`$timestamp = strtotime('9:00 am'); $militaryTime = date('H:i:s',$timestamp); echo $militaryTime;`

但是我如何在javascript中做到这一点？我只是不明白`Date()`我将使用 JS 对象中的哪个方法来输入我的初始时间，然后使用什么方法来转换时间，等等

那么，javascript中将“9:00 pm”转换为“21:00:00”的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T21:52:49.077

您可以使用正则表达式来获取字符串的各个部分：

```
var in = "9:00 pm";
var m = in.match(/(\d{1,2}):(\d{2}) ([ap])m/i);
m[1] = parseInt(m[1],10);
if( m[1] == 12) m[1] -= 12;
if( m[3].toLowerCase() == "p") m[1] += 12;
m[1] = m[1]%24;
var out = m[1]+":"+m[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:53:20.110

[http://jsfiddle.net/VxL4X/1/](http://jsfiddle.net/VxL4X/1/)

```
var timeString = "7:33 PM";

var dateint = Date.parse("January 1, 2000 " + timeString);
var dateObj = new Date(dateint);
var milTime = dateObj.toLocaleTimeString();
var milTime2 = dateObj.toTimeString().split(" ")[0];

console.log(milTime);
console.log(milTime2); 
```

`toLocaleTimeString`如果您希望此应用程序是国际化的，我可能会建议您不要使用。

另一种选择是手动构造时间字符串：http: [//jsfiddle.net/VxL4X/2/](http://jsfiddle.net/VxL4X/2/)

```
var manualTime = 
    dateObj.getHours().pad(2) + ':' +
    dateObj.getMinutes().pad(2) + ':' +
    dateObj.getSeconds().pad(2); 
```

（注意 Number 对象与`pad`函数的扩展）

# java - 用于快速输入的时间输入字段

> ID：12431929
> 
> 赞同：2
> 
> 时间：2012-09-14T21:03:29.397
> 
> 标签：java, time, jtextfield, jformattedtextfield, documentfilter

我想要一种快速使用的方法来输入时间到厘秒。输入数字应从右侧推入并自动添加前导零“。” 和“：”根据需要，例如：

"" => "0.03" => "0.31" => "3.14" => "31.41" => "3:14.15"

此外，输入“f”应导致“DNF”（“未完成”）：“3:14.15”=>“DNF”=>“0.04”

我下面的代码“有效”，除了它总是将光标放在最后（因为我完全替换），当有人试图在中间进行编辑时，这并不好。有没有一种简单的方法可以将光标保持在应有的位置？更重要的是，我的整个方法是否正确，或者我真的应该以不同的方式做这件事？我之前尝试过很多方法（JFormattedTextField 和 Formatters、DocumentFilter、DocumentListener 等），其中一些是因为它们在这里被建议用于类似的事情，但无法让它们工作。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

class TimeField extends JTextField {

  public static void main ( String[] args ) {
    JFrame frame = new JFrame();
    frame.add( new TimeField() );
    frame.add( new TimeField(), BorderLayout.SOUTH );
    frame.pack();
    frame.setDefaultCloseOperation( frame.EXIT_ON_CLOSE );
    frame.setVisible( true );
  }

  TimeField () {
    super( 10 );
    setHorizontalAlignment( RIGHT );
    setFont( new Font( "MONOSPACED", Font.BOLD, 32 ));
    ((AbstractDocument) getDocument()).setDocumentFilter( new DocumentFilter() {
      public void insertString ( DocumentFilter.FilterBypass fb, int offset, String string, AttributeSet attr ) throws BadLocationException {
        replace( fb, offset, 0, string, attr );
      }
      public void remove ( DocumentFilter.FilterBypass fb, int offset, int length ) throws BadLocationException {
        replace( fb, offset, length, "", null );
      }
      public void replace ( DocumentFilter.FilterBypass fb, int offset, int length, String text, AttributeSet attrs ) throws BadLocationException {
        fb.replace( offset,length, text, attrs );
        if ( text.contains("f") ) {
          fb.replace( 0, getText().length(), "DNF", null );
          return;
        }
        text = getText();                                 // get current text
        text = text.replaceAll( "\\D", "" );              // remove non-digits
        text = text.replaceAll( "^0+", "" );              // remove leading zeros
        while ( text.length() < 3 ) text = "0" + text;    // make at least three digits
        text = text.replaceAll( "(.)(..)$", "$1.$2" );    // add point if necessary
        text = text.replaceAll( "(.)(..\\.)", "$1:$2" );  // add colon if necessary
        fb.replace( 0, getText().length(), text, null );  // replace original with formatted
      }
    } );
  }
} 
```

编辑：我之前尝试过 JFormattedTextField，这是我最好的尝试。我可以输入数字，当焦点离开字段时，调用 valueToString 并添加点+冒号，然后显示。但我希望*在*编辑期间完成，而不是之后。我一定遗漏了一些东西，因为 MaskFormatter 显然可以做到这一点。

```
import java.awt.*;
import javax.swing.*;
import javax.swing.text.*;

class TimeField extends JFormattedTextField {

    public static void main(String[] args) {
       //Create Event Disptach Thread for  swing UI and its components to run on 
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame frame = new JFrame();
                JFormattedTextField ftf = new JFormattedTextField(new TimeFormatter());
                ftf.setHorizontalAlignment(JTextField.RIGHT);
                ftf.setFont(new Font(Font.MONOSPACED, Font.BOLD, 32));
                ftf.setColumns(10);
                frame.getContentPane().add(ftf);
                frame.getContentPane().add(new JButton("foo"), BorderLayout.SOUTH);
                frame.pack();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setVisible(true);
            }
        });
    }

    static class TimeFormatter extends DefaultFormatter {
        public Object stringToValue(String text) {
            System.out.println("stringToValue(" + text + ")");
            return text == null ? "" : text.replaceAll("\\D", "");
        }
        public String valueToString(Object value) {
            System.out.println("valueToString(" + value + ")");
            return value == null ? null : format((String)value);
        }
        private String format(String text) {
            text = text.replaceAll("\\D", "");              // remove non-digits
            text = text.replaceAll("^0+", "");              // remove leading zeros
            while (text.length() < 3) text = "0" + text;    // make at least three digits
            text = text.replaceAll("(.)(..)$", "$1.$2");    // add point
            text = text.replaceAll("(.)(..\\.)", "$1:$2");  // add colon if necessary
            return text;
        }
    }
} 
```

# iframe - 使用 JavaScript 用字符串填充 iFrame.src

> ID：12431930
> 
> 赞同：2
> 
> 时间：2012-09-14T21:03:42.967
> 
> 标签：iframe

我的 JavaScript 程序中有以下代码行

```
MyFrame.src = mainPath + "/resources/help.htm"; 
```

这是默认设置，但在某些情况下，我想使用我动态构建的字符串加载此 iFrame 的内容，例如：

```
"<html><head></head><body>This is additional help that was built dynamically on the fly</body></html>" 
```

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T21:16:22.413

是的：

```
MyFrame.contentWindow.document.write("<html><head></head><body>This is additional help that was built dynamically on the fly</body></html>"); 
```

# c# - C#方法中有多少个参数是可以接受的？

> ID：12431932
> 
> 赞同：23
> 
> 时间：2012-09-14T21:03:47.133
> 
> 标签：c#

我是 C# 新手，必须维护一个 C# 应用程序。现在我找到了一个有 32 个参数的方法（不是自动生成的代码）。

从 C/C++ 我记得经验法则“4 参数”。它可能是一个老式的规则，可以追溯到旧的 0x86 编译器，其中 4 个参数可以容纳在寄存器（快速）或堆栈中。

我不关心性能，但我确实感觉每个函数 32 个参数即使在 C# 中也不容易维护。

还是我完全不是最新的？

C# 的经验法则是什么？

谢谢你的任何提示！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-14T21:08:25.730

没有普遍的共识，这取决于你问谁。

一般来说 - 可读性受到影响的那一刻，有太多......

Bob Martin 说，理想的参数数量是 0，而 3 正在拉伸它。

32 个参数是一种巨大的代码气味。这意味着这个类有太多的责任，需要重构。即使应用[参数对象](http://www.refactoring.com/catalog/introduceParameterObject.html)重构听起来我也觉得它会隐藏一个糟糕的设计而不是解决问题。

来自[第 10 周清洁代码提示](http://www.informit.com/articles/article.aspx?p=1375308)：

> 函数应该有少量的参数。没有论据是最好的，其次是一、二、三。超过三个是非常值得怀疑的，应该避免带有偏见。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-14T21:08:13.603

嗯 32 个参数太多了。我猜的人有多少规则。然而，常识表明超过 6 个变得笨拙。

当您有这么多参数时，最好将对象作为单个参数传递并将参数作为属性，至少更易于阅读。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-14T21:11:49.860

C# 不限制参数的最大数量，AFAIK。
但 IL 确实：0x1FFFFFFF。

当然，这篇文章并不是编写具有大量参数的方法的指南。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-14T21:08:28.520

我相信开发者社区的普遍感觉是最多 5 或 6 个参数。我见过像你这样的方法的时候，有人做类似“SaveCustomer”的事情并传递每个字段而不是传递客户对象。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-14T21:14:48.163

对此没有*灵丹妙药*的答案。一切都取决于您和您的开发团队。参数的数量也可能达到 32 之类的数字，即使这会导致考虑糟糕的设计，但这是在职业生涯中可能会遇到的事情。

对此的普遍共识是

*   尽可能少地使用
*   使用重载函数，在不同函数之间分割参数

    ```
    func A(a,b)
    {
        A(a,b,c);
    } 
    ```

*   可以使用`params`关键字在数组中传递任意信息，例如`object[]`

*   可以使用`Key-value`可以保存大量信息并恢复它的商店

一般来说，他们说`code-line`不必太长，然后限制您在编辑器中水平滚动，即使这与问题主题并不严格相关，但可能会导致一些想法。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-14T21:08:00.093

您可以通过创建一个作为单个参数传入的对象来采取另一种方法？

对于参数，我从来没有经验法则，但常识和实用性通常占上风。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-14T21:09:02.440

虽然我怀疑这个问题会因为争论而结束，但 32 肯定太多了。

一种选择是查看[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)，这至少会使任务更具可读性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-14T21:11:48.763

我认为现在最重要的是人类的可读性，而不是性能。我怀疑 .NET 中是否存在类似的性能行为，但即使确实存在，正确的代码也比执行稍快但做错事的代码有用得多。通过使其易于理解，您可以增加代码正确的机会。

少数参数——根据我的经验，很少超过 5 个——在大多数情况下是最好的。您可以考虑通过在随后调用该方法的类上以属性的形式提供参数来重构需要更多的代码。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-14T21:37:00.630

我认为每个方法有零到五个参数是令人愉快的。但这取决于不同的东西，比如编码风格和类设计。

查看 .NET Framework，您会经常看到：

*   一个类，其方法几乎没有或几乎没有参数，但使用很少的属性来控制类的行为（而不是 30 个参数）。

*   具有大量方法的类，参数较少或没有参数，几乎没有属性。例如`BinaryReader`。

使您的公共 API 尽可能简单。更少的参数可以帮助其他开发人员使用您的类，而无需了解太多“它是如何工作的”。使代码更易读。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-09-14T23:20:02.937

瓦伦丁你有正确的感觉，32 个参数只意味着一个 - 完全出错了。根据我过去的 C++ 经验，我只看到了一个“参数”领导者：
它是 Win32 APi CreateWindow，有 11 个参数。
你永远不应该使用如此大量的参数。

另一方面，如果您对理论上的问题感兴趣（可能可以在面试时提出）-方法允许多少参数？
因此，正如上面提到的，C# 方法的参数不能超过 0x1FFFFFFF（IL 限制）。
您可以使用 params[] 数组来设置如此庞大的数量。

为什么会有这样的限制？
因为，如果您将此值转换为字节和参考大小的倍数（4 字节），您将收到 2 GB。
.NET 中的所有对象都有 2 GB 的限制，您永远不能创建超过 2 GB 的单个对象。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-09-14T21:09:57.697

据我所知，对于您应该拥有多少参数并没有任何硬性规定。这完全取决于你在做什么。

但是对于大多数应用程序来说，32 个参数听起来有点太多了。这可能表明设计不好。如果您仔细观察，可能有一种方法可以简化事情。

# javascript - 浏览器特定/条件 JS

> ID：12431934
> 
> 赞同：0
> 
> 时间：2012-09-14T21:03:49.900
> 
> 标签：javascript, internet-explorer, firefox, google-chrome, opera

是否可以编写浏览器特定的（有条件的）JS 代码，例如 CSS？如果可能的话，我正在寻找一些参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T21:13:14.530

既然你的问题很模糊，那么我的答案只能是。在绝大多数情况下，使用用户代理检测是完全没有必要的，而且经常会给你错误的结果。您最好考虑*功能*而不是*浏览器*，并在运行时检查功能支持。

# mysql - MySQL从组中提取相似数据

> ID：12431949
> 
> 赞同：1
> 
> 时间：2012-09-14T21:04:39.177
> 
> 标签：mysql, group-by, aggregate-functions

所以这是我正在编写的应用程序的消息模块中的剥离表。

![](../Images/b901bfd8f99a02296b603ff7c136c12b.png)

当我运行以下命令时，它按预期进行

> SELECT * FROM `messages` WHERE to_user = 1 或 from_user = 1 GROUP BY from_user

返回

![](../Images/db4dd6312d439f1b76c1463e646102ce.png)

剧情是我只想拥有一个实例2 | 1 或 1 | 2 ，因为在我的应用程序中，我试图根据发送消息的用户名对消息进行分组。我尝试不使用 OR 子句，但是当 1 向 2 发送消息时，该消息不会出现，直到他从 2 得到回复。1 和 2 是来自 php 变量的动态

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:10:20.170

由于您按用户名分组，我会选择一个有效的用户 ID 列表：

```
SELECT DISTINCT from_user FROM messages WHERE to_user = 1 
UNION
SELECT DISTINCT to_user FROM messages WHERE from_user = 1 
```

如果您不介意重复，则`UNION ALL`删除`DISTINCT`将提高性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:12:24.053

1.  您的查询结果中不能有聚合和非聚合字段。
2.  您可以使用函数来形成元组（to_user，from_user）：

    ```
    SELECT DISTINCT IF(from_user < to_user, from_user, to_user) AS first,
                    IF(from_user < to_user, to_user, from_user) AS second
    FROM   messages 
    ```

（当然，未经测试）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-14T22:34:21.210

这有点棘手，但对我有用。

```
SELECT n.f, n.t
FROM
  (SELECT DISTINCT m.from_user AS f, m.to_user AS t
   FROM messages AS m
   WHERE (m.from_user = 1
          OR m.to_user =1)) AS n,
  (SELECT DISTINCT m.from_user AS f, m.to_user AS t
   FROM messages AS m
   WHERE (m.from_user = 1
          OR m.to_user =1)) AS m
WHERE n.f = m.t
  AND m.f = n.t
  AND n.f < m.f; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-14T21:11:57.650

你可以附加

```
HAVING to_user < from_user 
```

# jquery - 如何在动态插入的元素上使用焦点和模糊？

> ID：12431954
> 
> 赞同：17
> 
> 时间：2012-09-14T21:05:09.210
> 
> 标签：jquery

我有功能：

```
$(document).ready(function(){

    $("input.myclass").focus(function() {
        // something
    }).blur(function() {
        // something
    });

} 
```

和html：

```
<div class="usil">
    <div class="editable">
        <form>
            <input type="text" class="myclass" />
        </form>
    </div>
</div> 
```

在“myclass”元素上的加载页面 jquery 工作正常，但其他脚本动态添加“usil”类 div 并且在此 div 上 jquery 不起作用。怎么做？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-14T21:07:12.797

使用事件委托：

```
 $(document).on('focus',"input.myclass", function() {
        // something
    }).on('blur',"input.myclass", function() {
        // something
    }); 
```

或者

```
$(document).on({
    'focus': function () {
        // something
    },
    'blur': function () {
        // something
    }
}, 'input.myclass'); 
```

[http://api.jquery.com/on](http://api.jquery.com/on)

[http://learn.jquery.com/events/event-delegation/](http://learn.jquery.com/events/event-delegation/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-14T21:23:39.203

该代码可以帮助：

```
$('input').live('focus', function() {
    $('label span').text('focus');
}).live('blur', function() {
    $('label span').text('blur');
}); 
```

使用示例：http: [//jsfiddle.net/CPQ37/](http://jsfiddle.net/CPQ37/)

# javascript - 在 GET 中重定向结果，然后是 POST

> ID：12431955
> 
> 赞同：-5
> 
> 时间：2012-09-14T21:05:23.597
> 
> 标签：javascript, jquery, jquery-ui, http, redirect

我有一个网页，其中功能在显示内容的主脚本和实现所有操作的单独 webutil.php 脚本之间分开。页面上的注销按钮非常简单：

```
<a href="webutil.php?op=logout" class="signout"><span>Logout</span></a> 
```

webutil 中的注销操作会清除包含登录信息的会话变量，调用`session_destroy()`，然后重定向到`$_SERVER['HTTP_REFERER']`，从而重新显示原始页面。

我将这个重定向返回用于页面上的所有操作，并且效果很好。但在这种情况下，我注意到了一件奇怪的事情。浏览器为原始页面发送一个 GET，然后立即为同一页面发送一个 POST。由于页面本身不进行任何表单处理，因此这几乎是无害的。但是如果你点击浏览器的刷新按钮，它会弹出你要重新提交表单的警告。

我在 Mac 上尝试过 Chrome/FF，在 Windows 上尝试过 IE 9，它们都证明了这个问题。我已经看到有关 POST 后跟 GET 的问题，但我一直无法找到这种情况。

我试图将其缩小到一个重现问题的简单测试用例，但我做不到，所以我无法提供小提琴。[您可以在http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php](http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php)尝试完整页面；使用用户名“test”登录，密码“test”。它利用了 jQuery、jQuery UI 和几个插件。我意识到我没有给你太多继续下去的机会；如果您无法弄清楚实际问题，我将不胜感激有关如何使用开发人员工具进行跟踪的建议。有没有办法在浏览器发送 POST 时设置断点，以便我可以看到上下文？

不要费心告诉我做这个页面的正确方法是使用 AJAX，我知道。我从一个旧的非交互式页面开始，然后逐步添加所有交互。我不想从头开始重写它以使其使用 AJAX。也许有一天我会有时间重做它，但现在我正在继续我拥有的意大利面条代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:23:11.590

这是您的脚本中发生的事情；这不是 HTTP 问题。重定向将导致使用相同方法 (307/308) 或`GET`(302/303) 发出请求。被重定向的 A`GET`永远不会变成`POST`; 因此，您的问题与注销脚本中的重定向无关。

在您的情况下， schedule-so.php 似乎有某种时区检测代码。这是发生的事情：

首先注销。

```
GET http://dev.bridgebase.com/barmar_test/new_vugraph/webutil.php?op=logout HTTP/1.1
Host: dev.bridgebase.com
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.56 Safari/537.4
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,es;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: PHPSESSID=ub7ov6vvsrrpgq0g7cdoieqne3 
```

这会导致预期的重定向。

```
HTTP/1.1 302 Moved Temporarily
Server: nginx/1.2.1
Date: Fri, 14 Sep 2012 23:00:38 GMT
Content-Type: text/html
Transfer-Encoding: chunked
Connection: keep-alive
X-Powered-By: PHP/5.4.3-6
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Location: http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php#

0 
```

浏览器`GET`的schedule-so.php。

```
GET http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php HTTP/1.1
Host: dev.bridgebase.com
Connection: keep-alive
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.56 Safari/537.4
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,es;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: PHPSESSID=ub7ov6vvsrrpgq0g7cdoieqne3 
```

然后 schedule-so.php 以一个自动提交的表单作为响应。

```
HTTP/1.1 200 OK
Server: nginx/1.2.1
Date: Fri, 14 Sep 2012 23:00:38 GMT
Content-Type: text/html
Connection: keep-alive
Vary: Accept-Encoding
X-Powered-By: PHP/5.4.3-6
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Pragma: no-cache
Cache-control: private
Content-Length: 989

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
  <script type="text/javascript">
    function get_tz()
    {
      var now = new Date()
      document.tz_form.offset.value = now.getTimezoneOffset()
      document.tz_form.submit()
    }
  </script>
  <object><noscript>
    <p>&nbsp;&nbsp;&nbsp;&nbsp;  Javascript support is needed for this page (to get your local timezone).<br />
    &nbsp;&nbsp;&nbsp;&nbsp;  Your browser either has no Javascript support,
 or has such support disabled.<br />
    &nbsp;&nbsp;&nbsp;&nbsp;  As an alternative, click <a href="http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php?offset=0">here</a> to continue.<br />
  All times will be GMT.</p>  </noscript></object>
</head>
  <body onload='get_tz()'>
   <form name="tz_form" action="/barmar_test/new_vugraph/schedule-so.php" method="post">
      <input type='hidden' name='offset' />
    </form>
  </body>
</html> 
```

...而且`onload`，JavaScript 导致表单提交，这就是 的`POST`来源。

```
POST http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php HTTP/1.1
Host: dev.bridgebase.com
Connection: keep-alive
Content-Length: 10
Cache-Control: max-age=0
Origin: http://dev.bridgebase.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.56 Safari/537.4
Content-Type: application/x-www-form-urlencoded
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Referer: http://dev.bridgebase.com/barmar_test/new_vugraph/schedule-so.php
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8,es;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: PHPSESSID=ub7ov6vvsrrpgq0g7cdoieqne3

offset=240 
```

终于登陆日程页面了。

```
HTTP/1.1 200 OK
Server: nginx/1.2.1
Date: Fri, 14 Sep 2012 23:00:38 GMT
Content-Type: text/html
Connection: keep-alive
Vary: Accept-Encoding
X-Powered-By: PHP/5.4.3-6
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Pragma: no-cache
Cache-control: private
Content-Length: 35892

... 
```

因此，您需要`get_tz()`在 schedule-so.php 中查找并找出将其发送到浏览器的原因。我的猜测是用户的时区存储在会话中（在注销期间会被删除）。

要更好地了解 HTTP 请求中发生的情况，请使用[Fiddler](http://www.fiddler2.com/fiddler2/)。

# javascript - 限制固定 div 垂直滚动

> ID：12431957
> 
> 赞同：0
> 
> 时间：2012-09-14T21:05:26.667
> 
> 标签：javascript, jquery, css, html, height

我有 2 列布局，左侧有固定侧边栏，右侧有页面内容。我也有页脚。我希望我的固定侧边栏向右滚动到页面内容 div 末尾的坐标。

但是，如果侧边栏的高度大于页面内容的高度，我需要自动为页面内容 div 分配新的高度。此代码适用于第一种情况（内容高于侧边栏），但第二种情况仅在我再次重新加载页面时才有效（例如，当我从另一个页面转到这种页面时，脚本不会分配新的高度，但是当我重新加载页面时，它确实如此）

这是代码：

```
 $(window).load(function(){
   var windw = this;
   var contentHeight = $('#content').height(); // fetch Сontent div height
   var sideHeight = $('.sidebar-nav-fixed').height(); // fetch sidebar div height
   $.fn.followTo = function ( pos ) {
       var $this = this,
           $window = $(windw);

       $window.scroll(function(e){
           if ($window.scrollTop() >= pos) {
               $this.css({
                   position: 'absolute',
                   top: pos
               });
           } else {
               $this.css({
                   position: 'fixed',
                   top: 100
               });
           }
       });
   };

if (sideHeight > contentHeight) {
   $('#content').css ({
   height: contentHeight + (sideHeight - contentHeight)
 }),
   contentHeight = $('#content').height() // Assign a new height to page content div
}
  $('.sidebar-nav-fixed').followTo(contentHeight - sideHeight);

}); 
```

如果您有任何想法，我将非常高兴谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T11:26:48.393

看起来我解决了这个问题。在我的侧边栏中，我有动态加载的 facebook 小部件，因此当我打开页面时，脚本会在没有 Facebook div 高度的情况下获取高度，因为它尚未加载。在加载 facebook 小部件后，我只是做了一些操作来加载滚动脚本。

甚至更好的方法 - 将此小部件放入容器并在 css 中手动为其指定高度。

# asp.net - 如何让 IE 正确显示 GridView Pager 按钮行的边框？

> ID：12431962
> 
> 赞同：0
> 
> 时间：2012-09-14T21:05:41.577
> 
> 标签：asp.net, css, internet-explorer, gridview, border

我有一个带有寻呼机按钮的 GridView，如下所示：

```
<PagerSettings Mode="NextPreviousFirstLast" FirstPageText="<<" PreviousPageText="<" NextPageText=">" LastPageText=" >>" Position="Bottom" /> 
```

使用这样的寻呼机样式设置：

```
<PagerStyle CssClass="gridPager" HorizontalAlign="Right" /> 
```

请看看我的风格：

```
 .gridPager
   {
       border-collapse: collapse;
       border-width: 1px;
       border-color: Green;
       border-style: solid;   
       font-size: 7pt;
    }

    .gridPager td
    {
        padding-left: 5px;   
    } 
```

**我的寻呼机按钮行上的绿色边框未在 Internet Explorer 中显示**

我怀疑这是因为 IE 无法识别**tr**元素上的边框样式。

我怀疑这是因为当我按下 F12 并查看 IE 开发人员视图时，我看到 GridView 生成的表为包含寻呼机按钮的行创建了这个：

```
 <tr class="gridPager" align="right">
    <td colspan="3"><table border="0">
    <tr>
    <td><a href="...pager button links"  </td>
   </tr>
</table></td>
  </tr> 
```

**注意tr**上的样式...

我发现了这个： [https ://stackoverflow.com/a/583600/614263](https://stackoverflow.com/a/583600/614263)

我试图按照该帖子中的说明进行操作，但没有运气。但是，当我将边框宽度**设为 2px**或更大时，它*确实有效。*但这不好，我需要 1px 的细边框，以便它与网格的其余部分相匹配。

 ****我要做的就是用与网格中其余行相同颜色的边框围绕我的寻呼机按钮。**

请帮忙！我怎样才能做到这一点？这是在消磨我的时间！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T01:13:23.210

尝试不同的方法。而不是设置 .gridPager ('tr') 标签的样式，而是将您的样式放在桌子上

```
.gridPager table { ...styles here...} 
```

您可能必须消除表格前第一个“td”中的填充/边距，但这应该很容易完成。

```
.gridPager td { padding: 0; margin: 0; } /* this will affect all td tags */
.gridPager table td { padding-left: 5px; } /* add the padding back to the table td tags */ 
```

***对我来说***......我通常在整个表格的样式中设置一个边框，除了底部边框。然后我通过“td”标签添加单独的行。我把表格放到 GridLines="none"。

```
/* this line give the table a border on the three sides - the main grid view table */
.gridTable { border: solid 1px #000; border-width: 1px 1px 0 1px }

/* then I put in the row styles */
.gridTable td { border-bottom: solid 1px #000; }

/* Then I fix the pager styles up with no border on the 'td' tag */
.gridTable table td { border: 0; } 
```**

# ios - 适用于 iOS armv7 的具有 FIPS 交叉编译的 OpenSSL

> ID：12431964
> 
> 赞同：6
> 
> 时间：2012-09-14T21:05:58.170
> 
> 标签：ios, openssl, cross-compiling, fips

[我使用http://opensslfoundation.com/testing/validation-2.0/platforms/ios/](http://opensslfoundation.com/testing/validation-2.0/platforms/ios/)中的说明交叉编译了 armv7 的 FIPS

我在交叉编译openssl对fips的依赖时遇到了困难。

我在终端中收到以下错误。

```
/usr/local/ssl/fips-2.0/bin/fipsld: line 185: ./openssl: Bad CPU type in executable
make[2]: *** [link_app.] Error 1
make[1]: *** [openssl] Error 2
make: *** [build_apps] Error 1 
```

这是因为“/apps”文件夹下的 openssl 可执行文件是 armv7 架构。由于我正在交叉编译openssl，我只需要架构armv7的libssl和libcrypto，其他中间可执行文件应该使用i386架构构建。

感谢您对设置环境变量的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T09:25:37.983

[OpenSSL FIPS 用户指南 2.0](http://openssl.org/docs/fips/UserGuide-2.0.pdf)包含构建 FIPS 对象模块和 FIPS 功能库的综合示例。它还提供了一个示例 iOS 程序来测试您的构建。请参见第 1 页的附录 E。122.

从它的外观来看（由于`link_app`错误），您没有使用`setenv-ios-11.sh`. 这导致您的构建尝试构建可执行文件（不应在此配置中构建）。

# macos - （Mac OS X，Cocoa）如何在输入文本字段中制作可拖放的占位符元素？

> ID：12431978
> 
> 赞同：2
> 
> 时间：2012-09-14T21:07:44.510
> 
> 标签：macos, cocoa

我正在编写一个 Cocoa 应用程序，我希望用户能够使用占位符将模板字符串放在一起。（例如，（艺术家）占位符将由当前在 iTunes 中播放的歌曲的艺术家填写，等等。）我见过一些应用程序执行类似的操作，其中每个可能的占位符术语都显示为蓝色的“菱形， " 并且用户可以将这些“菱形”拖放到输入文本字段中以构造一个字符串，可选择输入一些他们自己的自定义文本（例如，用连字符分隔（艺术家）和（标题）“菱形”）。

有谁知道是否有任何示例代码可以帮助我实现这样的东西？

我说的是这样的事情：（这来自“Hazel”应用程序，在 Hazel 规则中，您可以根据您指定的模板模式重命名文件）

![输入文本字段中的可拖放占位符元素](../Images/9f12bcab908feff5a0cbeec6778985de.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-14T22:08:23.303

NSTokenField 集中在上面的图片中（周围有蓝色环）。每个“令牌”（您的菱形）都是令牌字段的自动识别字符串。正如上面的 rdelmar 评论，阅读 NSTokenField ，你将大部分时间在那里。

令牌的“来源”很可能是一个圆角的 NSBox，其中包含排列整齐的无边界、无背景的 NSTokenField，每个字段都有一个令牌。这将使您轻松拖放以及轻松对齐。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:01:01.083

如果你需要自定义单个令牌的 l&f，你需要实现你自己的东西： NSTextView with NSTextAttachment which has NSTextAttachmentCells ...它很痛苦，而且代码很多，但实际上并不难

NSTokenAttachment 单元只有很多私有 l&f 选项:(

# c++ - C++ 向量排序

> ID：12431981
> 
> 赞同：3
> 
> 时间：2012-09-14T21:08:05.617
> 
> 标签：c++, sorting, stdvector, stdlist

这是关于使用 STL std::sort 函数进行排序背后的机制的一般问题。我读过一些关于排序的文章，一般来说，排序向量比排序链表更快。这对于结构/对象的向量和链表是否正确？对于结构的链表，我觉得只需修改索引即可轻松实现排序。另一方面，向量的排序似乎涉及物理地切换结构/对象数据的数据位置，因为它们是连续的（这是真的吗？）。在那种情况下，似乎对链表进行排序会更快。

编辑！！！：现在有图片：

![在此处输入图像描述](../Images/a1e0e57d61c28a5ba6bcc51462d9179a.png)

所以我想这个问题更好用：对对象排​​序、对链表排序还是对向量排序更快（尽管这可能取决于对象的大小）？此外，链表的排序是否如 3) 所示完成，向量的排序是否如 2) 所示完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:12:20.407

排序`list`是专门的（即`list`具有排序功能，不能用 排序`std::sort`）。

```
void sort();
template <class Compare> void sort(Compare comp); 
```

> 复杂性：大约 N log(N) 比较，其中 N == size()。

`std::sort`概括地说。

```
template<class RandomAccessIterator>
void sort(RandomAccessIterator first, RandomAccessIterator last);
template<class RandomAccessIterator, class Compare>
void sort(RandomAccessIterator first, RandomAccessIterator last,
Compare comp); 
```

> 复杂性：O(N log(N))（其中 N == last - first）比较。

请注意，结果与`std::list::sort`相同`std::stable_sort`。注意标准中没有信息，`sort`应该如何实现。它是实现定义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T21:16:48.933

您始终可以通过对索引或指针或其他任何并行集合进行排序来进行排序。这适用于列表和向量。

排序列表较慢的原因是最快的排序算法需要随机访问，即能够立即获取给定索引处的值的能力。你不会用列表来理解这一点。要获得链表中的第 10 项（例如），您必须从头开始并向前移动 10 次。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T21:26:14.243

你是对的，`std::vector`如果复制一个元素很慢，那将会很慢。C++11 引入了可能有帮助的移动语义，元素可以移动而不是复制。

链表很容易使用归并排序进行排序，与任何其他好的排序算法一样，它是 O(n log n)。区别在于开销。

与往常一样，如果结果对您很重要，那么对您的特定案例进行基准测试是一个好主意。

# node.js - Vertx.io - 如何获取在单个 http 连接上发出的请求数？

> ID：12431982
> 
> 赞同：1
> 
> 时间：2012-09-14T21:08:04.603
> 
> 标签：node.js, vert.x

出于统计目的，我想计算在单个 Http 连接上发出了多少请求（在一个打开的套接字上发出了多少保持活动请求）。

在 node.js 中，我可以访问请求和响应对象中的“套接字”，并且可以动态添加一个字段，例如“请求”并增加它。我还可以附加“套接字关闭”处理程序，然后将“请求”字段记录到系统日志中，并在 Graphite 中获得 1 分钟的平均值。

vertx.io 有可能吗？我在 HttpRequest 和 HttpResponse 类中找不到套接字字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:41:42.120

没有直接的方法可以做到这一点。

你可能会做一个 hack:`HttpServerRequest`实际上是一个`org.vertx.java.core.http.impl.DefaultHttpServerRequest`具有私有字段的实例`ServerConnection conn`。该字段可以通过反射访问，例如此处所述： http: [//tutorials.jenkov.com/java-reflection/private-fields-and-methods.html](http://tutorials.jenkov.com/java-reflection/private-fields-and-methods.html)。请求计数可以通过创建整数连接映射来实现。

这个 hack 足以用于测试目的，但由于内存泄漏，我不会在生产中工作。最好将此功能添加到类`handleMessage`的方法中`ServerConnection`并通过 JMX 公开它。

# javascript - 使用 jQuery 显示/隐藏

> ID：12431989
> 
> 赞同：2
> 
> 时间：2012-09-14T21:08:29.337
> 
> 标签：javascript, jquery

我有下面的代码。每个 div 标签都由 CSS 设置为`display: none;`，仅此而已。我希望选择框仅显示选定的 div 及其内容，但隐藏其余部分。我觉得我只是错过了一些简单的东西，但我无法弄清楚。我正在使用 jQuery 1.8.1。提前致谢！

*作为说明，我出于我的目的编辑了[此链接的](http://anthonygthomas.com/2010/03/14/display-form-fields-based-on-selection-using-jquery/)代码。我对 javascript 并不出色，这就是为什么这可能很糟糕。*

```
<script type="text/javascript">
$(document).ready(function(){
$("#choices").change(function(){

if ($(this).val() == "option1" ) {

    $("#option1").slideDown("fast");
    $("#option2").slideUp("fast");
    $("#option3").slideUp("fast");
    $("#option4").slideUp("fast");
    $("#option5").slideUp("fast");
    $("#option6").slideUp("fast");
    $("#option7").slideUp("fast");

} 

if ($(this).val() == "option2" ) {

    $("#option1").slideUp("fast");
    $("#option2").slideDown("fast");
    $("#option3").slideUp("fast");
    $("#option4").slideUp("fast");
    $("#option5").slideUp("fast");
    $("#option6").slideUp("fast");
    $("#option7").slideUp("fast");

} 

if ($(this).val() == "option3" ) {

    $("#option1").slideUp("fast");
    $("#option2").slideUp("fast");
    $("#option3").slideDown("fast");
    $("#option4").slideUp("fast");
    $("#option5").slideUp("fast");
    $("#option6").slideUp("fast");
    $("#option7").slideUp("fast");

} 

if ($(this).val() == "option4" ) {

    $("#option1").slideUp("fast");
    $("#option2").slideUp("fast");
    $("#option3").slideUp("fast");
    $("#option4").slideDown("fast");
    $("#option5").slideUp("fast");
    $("#option6").slideUp("fast");
    $("#option7").slideUp("fast");

} 

if ($(this).val() == "option5" ) {

    $("#option1").slideUp("fast");
    $("#option2").slideUp("fast");
    $("#option3").slideUp("fast");
    $("#option4").slideUp("fast");
    $("#option5").slideDown("fast");
    $("#option6").slideUp("fast");
    $("#option7").slideUp("fast");

} 

if ($(this).val() == "option6" ) {

    $("#option1").slideUp("fast");
    $("#option2").slideUp("fast");
    $("#option3").slideUp("fast");
    $("#option4").slideUp("fast");
    $("#option5").slideUp("fast");
    $("#option6").slideDown("fast");
    $("#option7").slideUp("fast");

} 

if ($(this).val() == "option7" ) {

    $("#option1").slideUp("fast");
    $("#option2").slideUp("fast");
    $("#option3").slideUp("fast");
    $("#option4").slideUp("fast");
    $("#option5").slideUp("fast");
    $("#option6").slideUp("fast");
    $("#option7").slideDown("fast");

} 

});
</script>
random body text
<form>
<select id="choices">
    <option value="none">Select one...</option>
    <option value="option1">Option 1</option>
    <option value="option2">Option 2</option>
    <option value="option3">Option 3</option>
    <option value="option4">Option 4</option>
    <option value="option5">Option 5</option>
    <option value="option6">Option 6</option>
    <option value="option7">Option 7</option>
</select>
</form>
    <div id="option1" class="hide">Opt 1 Text</div>
    <div id="option2" class="hide">Opt 2 Text</div>
    <div id="option3" class="hide">Opt 3 Text</div>
    <div id="option4" class="hide">Opt 4 Text</div>
    <div id="option5" class="hide">Opt 5 Text</div>
    <div id="option6" class="hide">Opt 6 Text</div>
    <div id="option7" class="hide">Opt 7 Text</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T21:11:28.923

您正在使用类选择器按 ID 选择元素，您应该使用jQuery 选择器而不是 CSS 选择器`#`。`.`您还可以缩小代码。

```
$("#choices").change(function(){ 
   $('.hide').slideUp();
   $('#'+this.value).slideDown()
}); 
```

[http://jsfiddle.net/X7AbR/](http://jsfiddle.net/X7AbR/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T21:10:09.250

您的选择器正在使用：

```
$('.optionX') 
```

什么时候应该：

```
$('#optionX') 
```

这是因为 'optionX' 是一个 ID 而不是一个类。如果它是一个类，'.optionX' 会起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T21:12:11.107

哇...有人没有听说过 DRY（“不要重复自己”）。一个简单的循环将杀死所有这些代码：

```
$("#choices").change(function() {
  for( var i=1; i<=7; i++) {
      $("#option"+i)["slide"+($(this).val() == "option"+i ? "Down" : "Up")]("fast");
  }
}); 
```

另请注意，我解决了您的问题：`.choices`指`choices`的是类名称中的任何元素。`#choices`指的是具有 ID 的元素`choices`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T21:14:31.170

您使用了错误的 css 选择器来获取元素。

`$(".choices").change(function(){`

选择`.`器按类名选择元素，而您没有具有“选择”类的元素，您在这里想要的是`$("#choices")`按 id 选择的元素。

这同样适用于您的选项选择，您可以在其中按类选择，`.`而您的元素具有应选择的 id`#`

资源：

[jQuery id 选择器](http://api.jquery.com/id-selector/)

[jQuery 类选择器](http://api.jquery.com/class-selector/)

[jQuery 选择器](http://api.jquery.com/category/selectors/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T21:15:02.893

你的选择器是错误的。您在 html 中使用 id，但在 jquery 中使用类。修复它改变

`$(".choices")`到`$("#choices")`

`$(".optionX")`到`$("#optionX")`

小提琴示例：http: [//jsfiddle.net/johnkoer/UDKrA/10/](http://jsfiddle.net/johnkoer/UDKrA/10/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-14T21:16:56.047

动态构建您的选择器并使用以下[`.siblings()`](http://api.jquery.com/siblings/)方法：

```
$("#choices").change(function(){ // that's an ID, not a class
    var val = $(this).val();
    $('#'+val).slideDown('fast').siblings('.hide').slideUp('fast');
}); 
```

[http://jsfiddle.net/mblase75/QkNX4/](http://jsfiddle.net/mblase75/QkNX4/)

# r - R有条件地提取数据？

> ID：12431990
> 
> 赞同：1
> 
> 时间：2012-09-14T21:08:33.653
> 
> 标签：r

我有一个模拟数据集，它探索一组参数空间，每组参数运行多次（迭代），它看起来像这样：

```
p1    p2    p3  iteration  result
=================================
v3    v2    v1      1       23.8
v2    v1    v3      2       20.36
v3    v2    v1      2       28.8
v2    v1    v3      1       29.36
... 
```

从这个例子可以看出，(v3, v2, v1) 和 (v2, v1, v3) 都运行了两次。我试图只提取每个参数设置的最大结果的行，在这个例子中：只应该保留第 3 行和第 4 行，因为它们代表了该参数集的最佳结果。有没有一种简单的方法可以在 R 中实现这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T21:25:05.070

```
df <- read.table(textConnection("p1    p2    p3  iteration  result
v3    v2    v1      1       23.8
v2    v1    v3      2       20.36
v3    v2    v1      2       28.8
v2    v1    v3      1       29.36"), header = T)

library(plyr)
ddply(df, .(p1,p2,p3), function(x) return(x[(which(x$result == max(x$result))), ]))

p1 p2 p3 iteration result
1 v2 v1 v3         1  29.36
2 v3 v2 v1         2  28.80 
```

# spring - 弹簧标签 不使用 Spring Data DomainClassConverter？

> ID：12431993
> 
> 赞同：2
> 
> 时间：2012-09-14T21:08:43.167
> 
> 标签：spring, spring-mvc, spring-data, spring-data-jpa

我正在使用 Spring MVC 和 Spring Data，并且还配置了 Spring Data`DomainClassConverter`以自动将 String id 转换为适当的 Domain 类。

我现在正在使用以下标签实现 Order to Customer 参考：

```
<form:select path="customer">
    <form:option value="" label="Select" />
    <form:options items="${customers}" itemValue="id" />
</form:select> 
```

这导致给定的HTML：

```
<select id="customer" name="customer" class="span6">
    <option value="">Select</option>
    <option value="1">Customer A</option>
    <option value="2">Customer B</option>
    <option value="3">Customer C</option>
</select> 
```

当提交选择客户 A 的帖子时，我得到一个例外，例如：

```
org.apache.jasper.JasperException: org.springframework.core.convert.ConversionFailedException: Failed to convert from type java.lang.String to type @javax.validation.constraints.NotNull @javax.persistence.ManyToOne nl.kapsalonreflection.domain.Customer for value ''; nested exception is org.springframework.dao.InvalidDataAccessApiUsageException: The given id must not be null!; nested exception is java.lang.IllegalArgumentException: The given id must not be null! 
```

这根本没有意义，因为收到的值应该是 1 而不是 ''。我还调试了收到的请求参数，它只包含 customer=1 （如预期的那样）

请注意，它`InvalidDataAccessApiUsageException`来自 Spring Data `DomainClassConverter`，如果我删除了这个转换器，问题就不会再发生了。

我还调试了`DomainClassConverter`它，我可以看到它试图覆盖两次。首先使用字符串值 1（如预期的那样），然后使用空字符串进行另一个调用，导致异常。

然而它变得更奇怪了......

当我`<form:option value="" label="Select" />`用普通的 html 元素替换时`<option value="">Select</option>`，不会发生异常，因此只使用字符串 1 对 convert 方法进行 1 次调用。奇怪的部分是两者都`<form:option value="" label="Select" />`产生`<option value="">Select</option>`相同的 html 输出......

我无法解释这种行为......虽然我似乎有一个使用普通 html 元素的“解决方法”，但我想知道是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T23:08:04.613

请注意，`org.apache.jasper.JasperException`表示异常发生在 JSP 呈现期间，而不是在数据绑定期间。这与异常依赖的事实一致`<form:option value="" label="Select" />`- 在回发后呈现表单时正在处理此标记时抛出它。

您观察到的行为可以解释如下：为了确定其选定状态`<form:option>`，尝试将其值与绑定到的字段的值进行比较`<form:select>`。如果绑定字段的值为`null`，`<form:option>`只需将其值与 进行比较`null`，这就是为什么在初始表单呈现期间不会出现此异常的原因。否则，`<form:option>`尝试将其转换`<value>`为绑定字段的类型，并`value = ""`在此步骤引发异常。

因此，您应该使用`null`“未选择选项”值而不是空字符串：

```
<form:option value="${null}" label="Select" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T22:18:03.863

在这种情况下，您可能需要考虑附加一个属性编辑器，因为如果我看到`<form:options items="${customers}" itemValue="id" />`您直接将客户列表附加到选项的代码。我认为它自动获取 toString 并显示“客户 A”、“客户 B”等。理想情况下，您可能需要在 form:options 标记中使用 itemLabel，或者您可能需要注册一个属性编辑器并将其附加到 initBinder [http://static.springsource.org/spring/docs/2.5.x/reference/validation.html#beans-beans-conversion](http://static.springsource.org/spring/docs/2.5.x/reference/validation.html#beans-beans-conversion)

# ios - 检测TestFlight？

> ID：12431994
> 
> 赞同：16
> 
> 时间：2012-09-14T21:08:46.007
> 
> 标签：ios, app-store, testflight

我更愿意为 TestFlight 与 App Store 使用相同的构建配置。有没有办法在运行时检测应用程序是通过 TestFlight 还是 App Store 安装的？`takeOff`（我的想法是，如果它没有通过 App Store 安装，我只会打电话。）

我想避免在 App Store 构建中使用 TestFlight 以保护我的用户的隐私，并避免[此处](https://github.com/AFNetworking/AFNetworking/issues/307)讨论的潜在网络脱轨。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-20T22:41:10.897

要确定 Swift 中的 Debug、TestFlight 或 AppStore 部署：

```
 private static let isTestFlight = NSBundle.mainBundle().appStoreReceiptURL?.lastPathComponent == "sandboxReceipt"

  // This can be used to add debug statements.
  static var isDebug: Bool {
    #if DEBUG
      return true
    #else
      return false
    #endif
  } 
```

完整的源代码和示例：[https ://stackoverflow.com/a/33830605/639227](https://stackoverflow.com/a/33830605/639227)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T18:34:21.393

[我相信这与Check if iOS app is live in app store](https://stackoverflow.com/questions/9906504/check-if-ios-app-is-live-in-app-store)的副本足够接近，可以将其关闭。

**您可以通过检查是否缺少embedded.mobileprovision**来确定您的应用程序是否通过应用商店分发。此文件仅包含在临时构建中。因此，如果您仅通过 TestFlight 或 HockeyApp 分发构建并且它*不是*商店构建，则它必须是 TestFlight 或 HockeyApp 构建。

像这样：

```
if ([[NSBundle mainBundle] pathForResource:@"embedded"
                                    ofType:@"mobileprovision"]) {
  // not from app store
} else {
  // from app store
} 
```

该技术来自[HockeyApp SDK](https://github.com/bitstadium/HockeySDK-iOS)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-16T02:35:33.267

[这](http://limlab.io/swift/2016/02/22/xcode-working-with-multiple-environments.html)是一篇博文，向您展示了如何添加除 Debug 和 Release（例如 Beta）之外的其他配置。

添加 Beta 配置后，您将创建另一个项目方案。然后编辑这个新方案。在存档部分下，请选择使用 Beta 配置。然后，您使用此方案为 Testflight 存档，并使用以前的方案为应用商店存档。

# php - 如何在 PHP 中读取 GTFS 协议缓冲区？

> ID：12431995
> 
> 赞同：8
> 
> 时间：2012-09-14T21:08:47.223
> 
> 标签：php, protocol-buffers, gtfs

我有一个 GTFS 协议缓冲区消息（VehiclePosition.pb）和相应的协议格式（gtfs-realtime.proto），我想单独阅读 PHP 中的消息（这甚至可能吗？）。

我查看了 Google 的 Python 教程[https://developers.google.com/protocol-buffers/docs/pythontutorial](https://developers.google.com/protocol-buffers/docs/pythontutorial)和编码文档[https://developers.google.com/protocol-buffers/docs/encoding](https://developers.google.com/protocol-buffers/docs/encoding)和[https://github。 com/maxious/ACTBus-ui/tree/master/lib/Protobuf-PHP](https://github.com/maxious/ACTBus-ui/tree/master/lib/Protobuf-PHP)，但我很难概念化正在发生的事情。我想我明白 gtfs-realtime.php 是 gtfs-realtime.proto 中定义的编码的编译指令集（如果我错了，请纠正我），但我不知道如何让它解码 VehiclePosition.pb。另外， gtfs-realtime.php （或与此相关的 python 等价物）的依赖关系是什么？如果我只想阅读 VehiclePosition.pb，还有什么我必须自己编译或不是简单的 php 脚本的东西吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-25T07:48:10.263

edmonscommerce 和 Julian 走在正确的轨道上。

然而，我走了同样的路，我发现协议缓冲区的 PHP 实现很麻烦（尤其是在 NYCT 的 MTA 提要的情况下）。

* * *

# 替代方法（命令行+ JSON）：

如果您对命令行工具和 JSON 感到满意，我编写了一个将 GTFS-realtime 转换为简单 JSON 的独立工具：[https ://github.com/harrytruong/gtfs_realtime_json](https://github.com/harrytruong/gtfs_realtime_json)

只需下载（无需安装），然后运行：`gtfs_realtime_json <feed_url>`

这是一个[示例 JSON 输出](https://github.com/harrytruong/gtfs_realtime_json/blob/master/samples/bart-trip-updates.json)。

**要在 PHP 中使用它**，只需将其放在`gtfs_realtime_json`与脚本相同的目录中，然后运行以下命令：

```
<?php 

$json = exec('./gtfs_realtime_json "http://developer.mbta.com/lib/GTRTFS/Alerts/VehiclePositions.pb"');
$feed = json_decode($json, TRUE);

var_dump($feed); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-23T21:33:27.220

可以使用官方工具：[https ://developers.google.com/transit/gtfs-realtime/code-samples#php](https://developers.google.com/transit/gtfs-realtime/code-samples#php)

它是最近发布的。我已经使用它几天了，效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-21T15:22:38.663

我会假设这个片段的内容：

```
<?php
require_once 'DrSlump\Protobuf.php';

use DrSlump\Protobuf;

$data = file_get_contents('data.pb');
$person = new Tutorial\Person($data);
echo $person->getName(); 
```

取自手册页：[http ://drslump.github.io/Protobuf-PHP/protobuf-php.3.html](http://drslump.github.io/Protobuf-PHP/protobuf-php.3.html)

在这一步之前，我认为您需要使用 CLI 工具生成 PHP 类，如下所述：http: [//drslump.github.io/Protobuf-PHP/protoc-gen-php.1.html](http://drslump.github.io/Protobuf-PHP/protoc-gen-php.1.html)

所以类似于：

```
protoc-gen-php gtfs-realtime.proto 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-13T08:03:57.430

抱歉，Harry Truong，我试过你的可执行文件，但它总是返回 NULL。我做错了什么？

编辑：问题是我无权在我的服务器中执行。感谢您的可执行文件。

# wcf - HTTP 无法注册 URL http://+:10001/。您的进程无权访问此命名空间

> ID：12431999
> 
> 赞同：5
> 
> 时间：2012-09-14T21:09:06.743
> 
> 标签：wcf, windows-8, visual-studio-2012

我刚刚从 Windows 7/VS2010 升级到全新安装的 Windows 8/VS2012。我正在登录域用户（域管理员）并在从 VS2012 启动我的一些 wcf 服务时开始看到此错误：

> HTTP 无法注册 URL `http://+:10001/`。您的进程无权访问此命名空间

我以前从未在 Windows 7 上经历过这种情况，我有点困惑为什么我现在在 Windows 8 中看到这种情况（域管理员，用户访问控制已关闭）。通过一些研究，我发现这个错误是由于 VS 进程没有以管理员权限运行并且非管理员显然无法监听 TCP 端口，但是，我不太明白为什么 VS 不会像管理员一样运行我登录的用户是域管理员？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T06:50:22.687

您必须执行以下操作：

```
netsh http add urlacl url=http://+:10001/YourUri/ user=\Everyone 
```

或者

```
netsh http add urlacl url=http://+:10001/YourUri/ user=DOMAIN\user 
```

[本文](http://msdn.microsoft.com/en-us/library/ms733768.aspx)或谷歌中提到了“netsh http add urlacl”

AFAIK，因为即使由管理员帐户启动，Vista 进程也不会以提升的权限运行。这就是 UAC 背后的重点。
但是，在您运行`netsh`命令之后，无论如何您都不需要这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T08:14:12.603

您可以在控制面板中将帐户窗口更改为管理员，它具有运行 url 的所有权限。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-29T17:47:22.177

确保以管理员身份运行 VS 和命令提示符。在命令提示符下执行命令

```
netsh http add urlacl url=http://+:10001 user=<your_userid> 
```

以管理员身份打开 VS